# StackOverflow 问答 14976000-14976999

# c# - 使用队列进行深度优先搜索

> ID：14976006
> 
> 赞同：4
> 
> 时间：2013-02-20T09:10:58.137
> 
> 标签：c#, .net-3.5, tree, depth-first-search, tree-traversal

如何在 C# 中使用队列进行深度优先搜索？

以下是我的数据结构：

```
public class Node
{
  public string Name{get;set}
  public IEnumerable<Node> Children{get;set;}
} 
```

现在我有一个 Node 对象的集合，每个对象都有孩子，它又有孩子，依此类推。

我想访问每个节点并将其转换为不同的形式。

如下所示：

```
public IEnumerable<IContent> BuildContentFrom(IEnumerable<Node> nodes)
        {
            var queue = new Queue<Node>(nodes);

            while (queue.Any())
            {
                var next = queue.Dequeue();
                yield return BuildContentFromSingle(next);

                foreach (var child in next.Children)
                {
                    queue.Enqueue(child);
                }
            }
        }

        public IContent BuildContentFromSingle(Node node)
        {
            var content = _contentFactory.Create(node);
            return content;
        } 
```

由于某种原因，上述内容并没有首先给我深度。你能帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T09:15:29.450

深度优先搜索是使用 LIFO 数据结构实现的，因此您需要`Queue`将[`Stack`](http://msdn.microsoft.com/en-us/library/3278tedw.aspx). 使用像队列这样的 FIFO 结构可以为您提供[BFS](http://en.wikipedia.org/wiki/Breadth-first_search)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:29:50.613

你可以递归地做

```
public IEnumerable<IContent> BuildContentFrom(IEnumerable<Node> nodes) {
     foreach(var node in nodes){
         yield node;
         foreach(var c in BuildContentFrom(node.children)){
             yield c;
         }
     }
} 
```

当 n 很大和/或树很深时，这可能会成为 n 树的问题。在这种情况下，您可以使用累加器

```
public IEnumerable<IContent> BuildContentFrom(IEnumerable<Node> nodes) {
     if(!nodes.Any()) return Enumerable.Empty<IContent>();
     var acc = new List<IContent>();
     BuildContentFrom(nodes);
}

public IEnumerable<IContent> BuildContentFrom(IEnumerable<Node> nodes, 
                                              IList<IContent> acc) {
     foreach(var node in nodes){
         acc.Add(BuildContentFromSingle(node));
         if(node.children.Any()) BuildContentFrom(node.children, acc);
     }
} 
```

现在是尾递归，如果编译器对此进行了优化（据我记得是 C# 的设置），即使使用大树，您也不会遇到堆栈问题。

或者，您可以使用堆栈来收集您仍需要执行的工作

```
public IEnumerable<IContent> BuildContentFrom(IEnumerable<Node> nodes)
{
    var stack= new Stack<Node>(nodes);

    while (stack.Any())
    {
        var next = stack.Pop();
        yield return BuildContentFromSingle(next);

        foreach (var child in next.Children)
        {
            stack.push(child);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:26:23.437

作为替代方案，您可以考虑使用递归来展平结构。这是一个二叉树的例子。它演示了深度优先的展平遍历。

```
using System;
using System.Collections.Generic;

namespace Demo
{
    public static class Program
    {
        static void Main(string[] args)
        {
            var tree = buildTree(5, true);
            printTree1(tree);
            Console.WriteLine("---------------------------------------------");
            printTree2(tree);
        }

        // Print tree using direct recursion.

        static void printTree1<T>(Node<T> tree)
        {
            if (tree != null)
            {
                Console.WriteLine(tree.Value);
                printTree1(tree.Left);
                printTree1(tree.Right);
            }
        }

        // Print tree using flattened tree.

        static void printTree2<T>(Node<T> tree)
        {
            foreach (var value in flatten(tree))
            {
                Console.WriteLine(value);
            }
        }

        // Flatten tree using recursion.

        static IEnumerable<T> flatten<T>(Node<T> root)
        {
            if (root == null)
            {
                yield break;
            }

            foreach (var node in flatten(root.Left))
            {
                yield return node;
            }

            foreach (var node in flatten(root.Right))
            {
                yield return node;
            }

            yield return root.Value;
        }

        static Node<string> buildTree(int depth, bool left)
        {
            if (depth > 0)
            {
                --depth;
                return new Node<string>(buildTree(depth, true), buildTree(depth, false), "Node." + depth + (left ? ".L" : ".R"));
            }
            else
            {
                return new Node<string>(null, null, "Leaf." + (left ? "L" : "R"));
            }
        }
    }

    public sealed class Node<T>
    {
        public Node(Node<T> left, Node<T> right, T value)
        {
            _left  = left;
            _right = right;
            _value = value;
        }

        public Node<T> Left  { get { return _left;  } }
        public Node<T> Right { get { return _right; } }
        public T       Value { get { return _value; } }

        private readonly Node<T> _left;
        private readonly Node<T> _right;
        private readonly T       _value;
    }
} 
```

对于您的具体示例，我*认为*（无需测试）您可以这样做：

```
public static IEnumerable<Node> Flatten(Node root)
{
    foreach (var node in root.Children)
    {
        foreach (var child in Flatten(node))
        {
            yield return child;
        }
    }

    yield return root;
} 
```

根据您是否允许空节点，您可能需要添加一些空值检查：

```
public static IEnumerable<Node> Flatten(Node root)
{
    if (root != null)
    {
        foreach (var node in root.Children)
        {
            foreach (var child in Flatten(node))
            {
                if (child != null)
                {
                    yield return child;
                }
            }
        }

        yield return root;
    }
} 
```

# matlab - 在 lsqcurvefit 中使用选项

> ID：14976007
> 
> 赞同：2
> 
> 时间：2013-02-20T09:11:08.493
> 
> 标签：matlab, levenberg-marquardt

我将选项设置为

```
options=optimset('LevenbergMarquardt', 'on') 
```

然后`lsqcurvefit`像下面这样使用，

```
[x,resnorm,residual,exitflag,output] = lsqcurvefit(@myfun, [0.01 0.3], xdata, ydata, [-inf -inf], [inf inf], options) 
```

但问题是我现在不知道为什么我会得到输出：

输出 =

```
firstorderopt: 3.4390e-07
   iterations: 4
    funcCount: 15
 cgiterations: 0
    algorithm: 'large-scale: trust-region reflective Newton'
      message: [1x425 char] 
```

这是否意味着 Matlab 没有使用 Levenberg Marquardt 算法？

但我确实将我的选项设置为 levenberg Marquardt 算法！！！

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:00:21.737

有时，特定算法不适合优化问题的特定配置。在这些情况下，Matlab “回退”到其默认优化算法。
对于您的特定问题/配置，Matlab 可能无法使用 Levenberg-Marquardt 算法。

仔细阅读文档，看看是否是这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T21:49:26.433

我不能肯定地说，但约束 ( `[-inf -inf], [inf inf]`) 可能是你的问题。lsqcurvefit 的文档严格说 LMA 不能用于受约束的问题。如果包含约束，它将回退到信任区域。

是的，您的约束在数学上等同于“无约束”，但我不知道 MATLAB 函数本身将如何解释这些。我试图重新创建我的问题，但`optimset('LevenbergMarquardt', 'on')`已被弃用并产生错误（暗示你有一个相对较旧的版本）。即使使用新语法`optimset('Algorithm', 'levenberg-marquardt')`（为了没有约束，正确的方法是使用空矩阵（即`[]`）。

是的，这个问题已经存在一个月了，但其他人可能会发现这个答案很有用。

# javascript - 性能警告 Processing.js

> ID：14976011
> 
> 赞同：0
> 
> 时间：2013-02-20T09:11:24.643
> 
> 标签：javascript, google-chrome, canvas, webgl, processing.js

当我以 JavaScript 风格编写 Processing.js 时，我收到了一个性能警告，当我使用 Processing.js 解析处理代码时，我没有收到。我已经创建了一个相当简单的带有 3d 支持的草图来进入它，控制台充满了这个警告：

> 性能警告：属性 0 已禁用。这有显着的性能损失

这意味着什么？更重要的是：如何解决它？

那是草图。（[在 codepen.io 上观看/编辑](http://codepen.io/noxoc/pen/54be96aa3c7e97e4fa23dc04bd674da9)）

```
var can = document.createElement("canvas");
var sketch = function(p){

  p.setup = function(){
    p.size(800, 600, p.OPENGL);
    p.fill(170);
  };

  p.draw = function(){
    p.pushMatrix();
    p.translate(p.width/2, p.height/2);
    p.box(50);
    p.popMatrix();
  };
};

document.body.appendChild(can);
new Processing(can, sketch); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T01:49:32.110

这是 Processing.js 中的一个问题

详细解释：OpenGL和OpenGL ES都有属性。所有属性都可以从缓冲区中获取值或提供一个常量值。除了，在 OpenGL 中属性 0 是特殊的。它不能提供一个常数值。它必须从缓冲区中获取值。WebGL 虽然基于没有此限制的 OpenGL ES 2.0。

因此，当 WebGL 在 OpenGL 之上运行并且用户不使用属性 0（它被设置为使用常量值）时，WebGL 必须创建一个临时缓冲区，用常量值填充它，然后将其提供给 OpenGL。这很慢。因此发出警告。

Processing 中的问题是它们有一个处理多个用例的着色器。它具有法线、位置、颜色和纹理坐标的属性。根据您要求处理绘制的内容，它可能不会使用所有这些属性。例如，通常它可能不使用法线。仅在处理中需要法线来支持灯光，因此如果您没有灯光，则没有法线（我猜）。在这种情况下，他们会关闭法线。不幸的是，如果法线恰好在属性 0 上，为了让 WebGL 渲染，它必须创建一个临时缓冲区，用一个常量值填充它，然后再渲染。

解决此问题的方法是始终使用属性 0。在处理的情况下，它们将始终使用位置数据。所以在链接他们的着色器之前，他们应该调用`bindAttribLocation`

```
// "aVertex" is the name of the attribute used for position data in
// Processing.js
gl.bindAttribLocation(program, 0, "aVertex"); 
```

这将使属性“aVertex”始终使用属性 0，因为对于每个用例，他们总是使用“aVertex”，因此他们永远不会收到该警告。

理想情况下，您应该始终绑定您的位置。这样您就不必在链接后查询它们。

# delphi - 计算行数和列数

> ID：14976014
> 
> 赞同：3
> 
> 时间：2013-02-20T09:11:30.240
> 
> 标签：delphi, opengl, hexagonal-tiles

我在地图上画六边形。由于某种原因，它只会创建一行。我相信我的循环是正确的。如果开启

```
glVertex3f(((sin(i/6.0*2*PI))/10)+RowOffset,((cos(i/6.0*2*pi))/10)+CollumnOffset,-2); 
```

我交换`RowOffset`，`CollumnOffset` 然后我得到一列。

```
procedure TFCreatemap.menuArea;
var
  I: Integer;
  Row,Collumn: Integer;
  RowOffset,CollumnOffset: double;
  TotalRow,TotalCollumn:integer;
begin

    Row := 0;
    Collumn:= 0;
    CollumnOffset := -0.9;
    TotalRow := 11;
    TotalCollumn := 11;

    while Collumn < TotalCollumn do
    begin
      CollumnOffset := CollumnOffset+0.4;
      RowOffset:= -0.9;

          while Row < TotalRow do
          begin
             RowOffset := RowOffset+ 0.2;

              glBegin(GL_POLYGON);
              for I := 0 to 6 do
              begin
                glVertex3f(((sin(i/6.0*2*PI))/10)+RowOffset,((cos(i/6.0*2*pi))/10)+CollumnOffset,-2);
              end; {for}
              glEnd;

              Row:= Row+1;
          end; {end collumns with}

      Collumn:= Collumn+1;
    end; {end rows with}
end; 
```

我的左/上也是-1到1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T09:51:52.657

您没有在循环中重置行，IHMO 它应该看起来像这样

```
 RowOffset:= -0.9;
  Row := 0;
      while Row < TotalRow do 
```

# iphone - 是否可以为 Nintendo DSi 移植 AAA iPhone 3D 游戏？

> ID：14976016
> 
> 赞同：1
> 
> 时间：2013-02-20T09:11:32.377
> 
> 标签：iphone, porting, nintendo-ds

正如我的复杂问题所说，我认为，如果我想单独解决它，将会涉及很多搜索。

我对这两个平台一无所知，熟悉它们的硬件和编程能力/工具将非常耗时。

所以，请问社区：

（从一个大公司的角度考虑，而不是作为一个独立的人） **在编程方面移植 3D AAA 游戏时最大的问题是什么？**

（提及最重要的就足够了）

很多很多thanx，好 - 字节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:25:42.560

DSi 几乎没有 RAM (~16Mo) 可使用，处理器速度相当慢 (66MHz) 和有限数量的多边形。因此直接转换现代 3D 游戏将是一场噩梦。您最好考虑使您的资产适应 DSi 规范，而不是试图“尽可能接近”iPhone 版本。

# javascript - 如何在 window.onscroll 事件期间只调用一次 javascript 函数？

> ID：14976017
> 
> 赞同：3
> 
> 时间：2013-02-20T09:11:43.170
> 
> 标签：javascript, html

```
function getH4() {
    var xyz = document.getElementsByClassName('bucket_left');
    for(var i=0;i<xyz.length;i++){
        var x=document.getElementsByTagName("h4")[i].innerHTML;
        var current_bucket = xyz[i];
        var y=current_bucket.firstChild.href;
        var newdiv = document.createElement('div');
        newdiv.innerHTML = "<a href=\""+y+"\">"+x+"</a>";
        newdiv.className = "hover_title_h4";
        current_bucket.appendChild(newdiv);
    }
}

window.onscroll=getH4; 
```

在上面的代码中，我想`div`在一组`div`具有类的 s 中附加新的，`bucket_left`而 this`div`是从无限滚动生成的。上面的代码工作正常，但在滚动时它附加了很多`div`s。那么我如何只追加一次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T09:13:59.167

在函数末尾添加以下行：

```
function getH4() {
    // ...

    window.onscroll = null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:31:46.550

您只需`onscroll`在 JavaScript 函数的末尾将属性设置为 none，如下所示：

```
window.onscroll = null; 
```

现在，当脚本第一次执行时，它将执行其功能，上面的行将设置`onscroll`为 null，因此不会在鼠标滚动时调用任何事件，因此您的函数不会在事件上一次又一次地被调用，除了首次。

或者，您可以通过设置一个公共变量 say 来在逻辑上处理它`var check = 0`，然后在第一次输入时将变量设置为 1。因此，您需要检查`check`并基于该值执行该功能

```
var check = 1;
function getH4() {
    if(check==1)
    {
    var xyz = document.getElementsByClassName('bucket_left');
    for(var i=0;i<xyz.length;i++){
        var x=document.getElementsByTagName("h4")[i].innerHTML;
        var current_bucket = xyz[i];
        var y=current_bucket.firstChild.href;
        var newdiv = document.createElement('div');
        newdiv.innerHTML = "<a href=\""+y+"\">"+x+"</a>";
        newdiv.className = "hover_title_h4";
        current_bucket.appendChild(newdiv);
     }
        check=0;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:17:13.790

创建一个全局布尔变量并将其设置为 false。再次在窗口滚动事件中将其设置为 true，并使用 if 块检查变量是否为 false。将您的代码放入该 if 块中。

```
var isScrolled = false;

function getH4() {
    if(!isScrolled){
        //your code
    }
    isScrolled = true
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-19T08:34:28.467

你可以试试这个：滚动时，检查等于假，追加事件只会发生一次；当滚动结束（mouseup 或 mouseout）时，检查等于 true，您可以再次追加。

```
var check = true;
function getH4(event) {
    event.target.onmouseup = function() {
        check = true;
    }
    event.target.onmouseout = function() {
        check = true;
    }
    if (check) {
        var xyz = document.getElementsByClassName('bucket_left');
        for(var i=0;i<xyz.length;i++){
            var x=document.getElementsByTagName("h4")[i].innerHTML;
            var current_bucket = xyz[i];
            var y=current_bucket.firstChild.href;
            var newdiv = document.createElement('div');
            newdiv.innerHTML = "<a href=\""+y+"\">"+x+"</a>";
            newdiv.className = "hover_title_h4";
            current_bucket.appendChild(newdiv);
        }
    check = false;
}

window.onscroll=getH4 
```

# css - 悬停时精灵图像向下移动

> ID：14976019
> 
> 赞同：1
> 
> 时间：2013-02-20T09:11:45.143
> 
> 标签：css, sprite

我正在使用精灵来更改悬停状态下图像的颜色，但是当我将鼠标悬停在图像上时，它会稍微向下移动并改变颜色。我创建了一个 [JSFiddle](http://jsfiddle.net/richlewis14/k4uPx/2/)来复制问题。

我可能错误地使用了精灵？我不确定，因为这是我第一次和他们一起玩。

```
.ratings ul li {
width:18px;
height:18px;
background:url(star.png) 145px 102px;
}

.ratings ul li:hover{
width:18px;
height:18px;
background:url(star.png) 145px 86px;
 } 
```

我正在使用这张图片： ![在此处输入图像描述](../Images/942abcf5969164aea70250969b7c4480.png)

谁能指出我的错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:26:42.730

**原因**

精灵配置不正确。在您的示例中，至少其中一个`background-position`值应为零或负数。

[CSS sprites](http://css-tricks.com/css-sprites/)的技术依赖于负值`background-position`来改变图像中用作元素背景的*区域。*相反，正值（即大于零）`background-position`实际上会改变背景图像在元素中的*位置。*

**解决方案**

```
background:url(star.png) 0 0;

background:url(star.png) 0 -18px; 
```

参见**[jsFiddle 演示](http://jsfiddle.net/k4uPx/3/)**

**关于图像的注意事项**

另请注意，您当前的精灵`34px`很高，而似乎每颗星都`16px`很高。这意味着`2px`两颗星之间存在差距，所以第二颗`background-position`是`-18px`和不是`-16px`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T09:33:29.407

```
.ratings ul li {
  width:16px; /* redefine your image offset */
  height:16px; 
  background:url(http://i.stack.imgur.com/S5T0M.png) no-repeat;
}
.ratings ul li:hover {
  background-position: 0 -18px;
} 
```

你不需要定义你已经在哪个`width`状态。[您应该在此](http://css-tricks.com/css-sprites/)站点上找到有关 css sprires 的信息指导`height``:hover`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T09:33:41.013

首先：你应该为你的星星使用一个`16px`“盒子”（宽度/高度）而不是 18，因为你的星星的宽度是`16px`.

然后正确地改变你的偏移量，你会遇到更少的问题。

# jquery - 使用 ViewBag 作为数据源插件的 Jquery TagIt 问题

> ID：14976021
> 
> 赞同：1
> 
> 时间：2013-02-20T09:11:53.083
> 
> 标签：jquery, asp.net-mvc-3, razor, viewbag, tag-it

我想绑定数据以用 ViewBag 标记它，不幸的是它不起作用。

所以，这是我的控制器：

```
 public ActionResult ArticleEdit(Guid id)
    {
        ViewBag.Tags = db.Tags.Select(tag => tag.Name).ToList();

        Article article = db.Articles.Single(a => a.ArticleID == id);
        return View(article);
    } 
```

而我的观点：

```
 <div class="tags">
        <label for="tags">
            Tags</label>
        <ul id="mytags">
        </ul>
    </div> 
```

Javascript：

```
$(document).ready(function () {
    $("#mytags").tagit({
        availableTags: @Html.Raw(Json.Encode(@ViewBag.Tags))
    });
}); 
```

它呈现为：

```
$(document).ready(function () {
   $("#mytags").tagit({
   availableTags: ["boool! ","asd ","asdasdasd "]
   });
}); 
```

如果我使用 `availableTags: ["c++", "java", "php", "coldfusion", "javascript", "asp", "ruby", "python", "c", "scala", "groovy", "haskell", "perl"]`

它工作得很好。

我用 ViewBag 尝试了常规的 jquery 自动完成插件，它可以工作。这是它的代码：

```
 <div class="ui-widget">
     <label for="tags">
         Tags:
     </label>
     <input id="tags" />
 </div>

 $(function() {
    var availableTags = @Html.Raw(Json.Encode(@ViewBag.Tags));
    $( "#tags" ).autocomplete({
    source: availableTags
    });
}); 
```

有什么想法吗？

我正在将 MVC3 与 Razor 一起使用。而当我`availableTags`使用时`ViewBag`，输入字段就会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:21:53.480

嗯，我变了

```
$(document).ready(function () {
    $("#mytags").tagit({
        availableTags: @Html.Raw(Json.Encode(@ViewBag.Tags))
    });
}); 
```

到

```
 var myTags = @Html.Raw(Json.Encode(@ViewBag.Tags));

    $(document).ready(function () {
        $("#mytags").tagit({
            availableTags: myTags
        });
    }); 
```

现在可以了

# php - mysql 准备语句 & html 净化器夫妇概念

> ID：14976022
> 
> 赞同：2
> 
> 时间：2013-02-20T09:12:01.587
> 
> 标签：php, mysql, prepared-statement, mysql-real-escape-string, htmlpurifier

嗨

，我的网站正处于原型阶段。在我在这个网站上问[了这个](https://stackoverflow.com/questions/14959707/html-purifier-library-usage-concept)问题之后，经过额外的阅读，我决定使用`mysql prepared statements`.

以我的新思维方式，我想确保我正确理解了这些事情，所以我的两个问题是：

1.  如果我在将不受信任的数据插入 mysql 期间使用准备好的语句，我**不需要使用`mysqli_real_escape_string function`**. 我对吗？

2.  如果我在从 mysql db 获取数据并将数据显示为 html 时使用准备好的语句，（出于安全原因）使用 html 净化器类会更好，所以**我应该使用 html 净化器类**。我对吗？

    你能指导我的思维方式吗？我的方法有意义吗？

    谢谢，BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:16:47.153

是的，它确实。
mysqli_real_escape_string 函数无论如何都与任何保护无关。
html 净化器是个好东西，但`htmlspecialchars()`如果用户输入中没有 HTML，你可以用惰性函数调用代替它。

关于准备好的语句，唯一需要提及的是：它们仅涵盖基本的标量值，无法应对复杂的值，例如标识符（表和字段名称）或数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:19:46.573

> 如果我在将不受信任的数据插入 mysql 期间使用准备好的语句，我不需要使用 mysqli_real_escape_string 函数。我对吗？

你明白了。准备好的语句有自己的转义程序。

> 如果我在从 mysql db 获取数据并将数据显示为 html 时使用准备好的语句，（出于安全原因）使用 html 净化器类会更好，所以我应该使用 html 净化器类。我对吗？

你也是对的。当您打印您的 html 时，您必须确保它是安全的，因此它们是两种解决方案：激进的一种`htmlspecialchars`：使用`htmlpurifier`.

我还希望您向您介绍一条规则，该规则将带您进入一个安全且更舒适的网站：filter in escape out。

准备好的声明并`htmlpurifier`在这里“逃脱”，这意味着您将以您的输出可以理解的方式发送数据。

部分规则中的过滤器使您可以研究用户输入的内容。一个很好的例子是日期格式。也许您希望他们以英文格式 Ymd 输入日期。如果他们不这样做，您的网站将无法运行，因此您必须要求他们以正确的方式再次输入日期。关于过滤，有一种方法要记住：`filter_var`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:20:19.663

> 如果我在将不受信任的数据插入 mysql 期间使用准备好的语句，我不需要使用 mysqli_real_escape_string 函数。我对吗？

正确的

> 如果我在从 mysql db 获取数据并将数据显示为 html 时使用准备好的语句，（出于安全原因）使用 html 净化器类会更好，所以我应该使用 html 净化器类。我对吗？

使用准备好的语句将保护您的数据库免受 SQL 注入。它对 XSS 攻击没有任何作用。你需要某种防御措施。

由于“保护数据库”和“保护 HTML”是完全不同的问题，因此选择一个解决方案与选择另一个解决方案无关。

使用围绕真正的 HTML 解析器构建的基于白名单的过滤器（我假设 HTML 净化器就是其中之一）是一个明智的选择（如果你想允许*一些*HTML）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T09:33:02.467

1）如果您使用准备好的语句插入数据，则不需要在其中转义引号和其他特殊字符。基本上，您可以防止 SQL 注入。但是，您仍然需要清理数据，使其不包含 XSS 攻击。当您正在研究 HTML Purifier 时，您走在正确的轨道上。此外，您需要编写业务逻辑代码来验证您的数据，以确保它确实是您所期望的（类型检查、范围检查等）。

2）理论上，您应该在向用户显示之前对数据进行清理，HTML 净化器可以执行此任务。然而，在实践中，您会注意到 HTML 净化器是一个非常重的库，因此不适合在每次显示数据时使用。一个性能更好的解决方案是在数据插入数据库之前对数据运行 HTML 净化器，然后在不进行额外验证的情况下显示它。您实际上是在尝试确保您的数据库是干净的，因为如果数据库是干净的，那么来自那里的任何东西也肯定是干净的。一般来说，这也是一种很好的安全方法。

您的验证程序应类似于：

```
if( ! isValid( $rawData ) ) {
    return;
}
$purifiedData = htmlPurifier( $rawData );
mysql_prepared_insert( $purifiedData ); 
```

当然，这只是一种方法。有许多方法可以实现良好的安全性和清理数据。此外，了解为什么要使用 HTML Purifier 也很重要。当您希望允许您的用户发布**一些**HTML 标签（但不是全部）时，您应该使用它。如果您想阻止**所有**HTML，那么该`htmlspecialchars`函数将以更有效的方式完成任务。当您拥有要允许并阻止其他所有标签的白名单时，HTML 净化器非常有用。您还可以使用它来剥离所有标签而不是转义它们，从而使文本看起来比经过`htmlspecialchars`.

# google-maps-api-3 - 点击在新窗口中打开谷歌地图

> ID：14976023
> 
> 赞同：2
> 
> 时间：2013-02-20T09:12:03.520
> 
> 标签：google-maps-api-3

我在我的网页中嵌入了谷歌地图。现在我想在一个新的弹出窗口中打开同一张地图。任何人都可以让我知道该怎么做吗？

我尝试了几个通过谷歌搜索和 SF 获得的选项，但它们不起作用。在其中一个论坛中提到了包装带有标签的地图的div，但是必须将什么URL传递给它？

`@Update`

这是代码：

```
<html>
<head>
<script
src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false">
</script>

<script>
var amsterdam=new google.maps.LatLng(18.5204303,73.85624369999992);
var lat;
var long;

function initialize()
{
var mapProp = {
  center:amsterdam,
  zoom:8,
  mapTypeId:google.maps.MapTypeId.ROADMAP
  };

var map = new google.maps.Map(document.getElementById("googleMap"),mapProp);

var geocoder = new google.maps.Geocoder();
var reslatlon = null;
var location = "pune,maharashtra";

if(!geocoder) {
   geocoder = new google.maps.Geocoder();
}

var geocoderRequest = {
   address: location
}
var myCity = null;
geocoder.geocode(geocoderRequest, function(results, status) {
//alert(status);
if (status == google.maps.GeocoderStatus.OK) {

    map.setCenter(results[0].geometry.location);
    reslatlon = results[0].geometry.location;
lat = results[0].geometry.location.hb;
long = results[0].geometry.location.ib;
amsterdam = new     google.maps.LatLng(results[0].geometry.location.hb,results[0].geometry.location.ib);
//alert(results[0].geometry.location.hb + " , " + results[0].geometry.location.ib);
myCity = new google.maps.Circle({
center:amsterdam,
radius:25000,
strokeColor:"#0000ff",
strokeOpacity:0.8,
strokeWeight:2,
fillColor:"#0000ff",
fillOpacity:0.4,
map:map
});

 }
});

}

google.maps.event.addDomListener(window, 'load', initialize);

function openWin(){
alert(lat + " , " + long);
window.open("http://maps.google.com/maps?    ll="+lat+","+long,'MYMAP','height=400,width=600');return true;

}
</script>
</head>

<body>
<a target="MYMAP" onclick="openWin()" href="">
<div id="googleMap" style="width:500px;height:380px;"></div></a>
</body>
</html> 
```

# python - python min 函数是如何工作的

> ID：14976031
> 
> 赞同：4
> 
> 时间：2013-02-20T09:12:36.217
> 
> 标签：python

我正在阅读期望输出是获取具有最小值的元素的问题

因此，如果

```
d= {'a':2,'b':3,'f':5} 
```

答案是一个

给出的答案是`min(d, key=d.get)`

谁能解释这是如何工作的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:15:16.040

该`min`函数根据给定的键返回可迭代的最小值。在这种情况下，它返回`d`具有最小值的键。`d.get`允许您访问字典键的对应值，当您迭代时，它们会被迭代`d`。

例如：

```
>>> min([3, 5, 2, 1, 5])
1
>>> d = {'a': 1, 'b': 2, 'c': 3}
>>> for i in d:
...     print i
b
c
a
>>> d.get('b')
2
>>> d.get('d')  # Nothing is returned
>>> min(d, key=d.get)
'a' 
```

的`key`参数`min`指定要在哪个键上找到最小值。

例如：

```
>>> min(['243', '172344', '6'])
172344
>>> min(['243', '172344', '6'], key=len)
6 
```

该`min`函数执行以下操作：

```
>>> min(['243', '172344', '6'], key=len)
# sort the list with key (call `len` on every element and sort based on that)
# sorted(['243', '172344', '6'], key=len)
# return the first element (lowest value)
# sorted(['243', '172344', '6'], key=len)[0]
6 
```

# jsf - PrimeFaces 上传文件不起作用

> ID：14976032
> 
> 赞同：2
> 
> 时间：2013-02-20T09:12:38.630
> 
> 标签：jsf, file-upload, primefaces

我正在使用 PrimeFaces `<p:fileUpload>`。它不调用侦听器方法。如果我添加`FileUploadFilter`，那么我会得到一个例外。

看法：

```
<h:form enctype="multipart/form-data">
    <p:fileUpload mode="advanced"
        fileUploadListener="#{fileUploadController.upload()}"
        allowTypes="/(\.|\/)(gif|jpg|jpeg|gif|png|PNG|GIF|JPG|JPEG)$/"
        auto="false" />
</h:form> 
```

豆：

```
public class fileUploadController {

    private String destination = "c:\test";

    public void upload(FileUploadEvent event) {
        FacesMessage msg = new FacesMessage("Success! ", event.getFile()
                .getFileName() + " is uploaded.");
        FacesContext.getCurrentInstance().addMessage(null, msg);
        // Do what you want with the file
        try {
            copyFile(event.getFile().getFileName(), event.getFile()
                    .getInputstream());
        } catch (IOException e) {
            e.printStackTrace();
        }

    }

    public void copyFile(String fileName, InputStream in) {
        try {

            // write the inputStream to a FileOutputStream
            OutputStream out = new FileOutputStream(new File(destination
                    + fileName));

            int read = 0;
            byte[] bytes = new byte[1024];

            while ((read = in.read(bytes)) != -1) {
                out.write(bytes, 0, read);
            }

            in.close();
            out.flush();
            out.close();

            System.out.println("New file created!");
        } catch (IOException e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

web.xml

```
<filter>
<filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:29:48.737

`fileUploadListener="#{fileUploadController.upload()}"`这里有问题。我复制了它，我也得到了一个异常方法未找到：

您应该定义不带括号的 fileUploadListener。添加括号后，bean中的预期方法是upload()而不是upload(FileUploadEvent event)

# php - 导入.xls文件codeigniter时如何避免db中的重复

> ID：14976033
> 
> 赞同：0
> 
> 时间：2013-02-20T09:12:39.290
> 
> 标签：php, codeigniter

xls 文件并将数据保存到数据库中一切都是正确的，但我想在导入文件时停止重复，它会避免重复并插入其他数据。

数据插入是正确的，但如何停止重复。

这是我的控制器代码

```
for ($i = 0; $i <= $data->sheets[0]['numCols']; $i++) 
{
    if($data->sheets[0]['cells'][$HeadingRow][$i]=='user')
        $columnsArr['virtual_card_name'] = $i;
    if($data->sheets[0]['cells'][$HeadingRow][$i]=='department')
        $columnsArr['department'] = $i;

    for ($i = $dataStartRow; $i<=$data->sheets[0]['numRows']; $i++) 
    {

        $colsData['virtual_card_name'] = $data->sheets[0]['cells'][$i][$columnsArr['virtual_card_name']]; 
        $colsData['department'] = $data->sheets[0]['cells'][$i][$columnsArr['department']]; 

        $returnMsg = $this->Admin_fund_transfer_model->insertCardsData($colsData);  

        $num++;
    } 
```

模型

```
function insertCardsData($data)
{
    $this->db->insert("cards", $data);
    return  $this->db->insert_id();         
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:25:16.173

您可以向数据库添加一个唯一键，这样它就不允许添加重复项。当然，你必须清楚你所说的重复是什么意思。

# air - 如何从 Flash 投影仪中安装 AIR 应用程序？

> ID：14976039
> 
> 赞同：1
> 
> 时间：2013-02-20T09:12:57.610
> 
> 标签：air, installation, flash

我有两个文件：

1.  公司演示文件，用 CS5 创建，flash 投影仪文件：demo.exe
2.  使用 Flash Builder 4.6 创建的目录应用程序，air 文件：catalog.air

分发媒体将是 CDROM。demo.exe 文件最终将被设置为自动运行文件。

如果以前没有安装，我需要能够安装 air 应用程序，或者如果已经从“demo.exe”文件中安装，则直接运行它。

**我尝试了什么：**

1.  下载 air.swf 用于检查已安装的空气应用程序，
2.  将 demo.exe 导出为“仅访问本地文件”

**问题：**

air.swf 为已安装的 catalog.air 版本返回 null，因此我无法确定是否安装了 catalog.air。

**克服：**

[将“仅访问本地文件”更改为“仅访问网络”并从“ http://airdownload.adobe.com/air/browserapi/air.swf](http://airdownload.adobe.com/air/browserapi/air.swf) ”加载 air.swf，然后它将正确检测安装的版本。

**但是之后：**

切换到“仅访问网络”模式将阻止访问本地 catalog.air 文件。因此，我无法访问 catalog.air 也无法安装它。

我的最后期限快要结束了，我拉头发了。任何指向正确方向的提示都会受到赞赏。

* * *

更新：flash 和 air 应用程序都使用 AS3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:09:53.080

如果您使用 AS1/2，请尝试使用`fscommand ("exec", filename)`，它可能会忽略“仅访问网络”限制。

`fscommand ("exec", "catalog.air")`

或者

`fscommand ("exec", "installMyApp.bat")`（`installMyApp.bat`运行`catalog.air`）

`catalog.air/installMyApp.bat`必须在`fscommand`您附近的目录中`demo.exe`

# android - android 从 LogCat 中的本机代码获取 Stacktrace

> ID：14976040
> 
> 赞同：2
> 
> 时间：2013-02-20T09:12:58.940
> 
> 标签：android, native, crash-reports, android-logcat

当我的程序的本机部分（C++，Qt）崩溃时，我在 logcat 中看到一些堆栈跟踪。但是此消息没有应用程序名称，只有“DEBUG”标签。这就是为什么我无法获得它来发送崩溃报告（我使用 ACRA），因为“因为 JellyBean logcat 只提供来自您自己的应用程序的跟踪”我如何才能获得它或他们以我的应用程序的名义编写的？

对不起我的英语不好，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:06:32.843

您可以使用以下方式（结帐[此线程](https://groups.google.com/forum/?fromgroups#!topic/android-ndk/1sXo8l8e5UM)）：创建具有以下内容的标题：

```
#include <android/log.h>

#define LOGV(...) __android_log_print(ANDROID_LOG_VERBOSE, "libnav",
__VA_ARGS__)
#define LOGD(...) __android_log_print(ANDROID_LOG_DEBUG  , "libnav",
__VA_ARGS__)
#define LOGI(...) __android_log_print(ANDROID_LOG_INFO   , "libnav",
__VA_ARGS__)
#define LOGW(...) __android_log_print(ANDROID_LOG_WARN   , "libnav",
__VA_ARGS__)
#define LOGE(...) __android_log_print(ANDROID_LOG_ERROR  , "libnav",
__VA_ARGS__)

#endif // ANDROID_ALOG_H 
```

或者直接使用`__android_log_print`。

# php - 需要更具体的 PHP While 循环来查询 MySQL 数据库

> ID：14976042
> 
> 赞同：0
> 
> 时间：2013-02-20T09:13:01.843
> 
> 标签：php, mysql, loops, while-loop

我正在查询数据库并显示数据。我有一个时间戳和一个 Facebook ID，用于显示用户的个人资料图片（使用 Facebook 图表）。不过，这更像是一个 PHP/Loop 问题，而不是 FB Graph 问题。这是我正在处理的代码：

```
$sql = "SELECT * FROM fb_id ORDER BY timestamp DESC";
$result = $mysqli->query($sql);

echo "<h1>".$lastone_month." ".$year_lastone."</h1>";
while($row = mysqli_fetch_array($result)){
$fb_id = $row['fb_id'];
$timestamp = date_parse($row['timestamp']);
$month = $timestamp['month'];
$year = $timestamp['year'];                                     
echo "<a href='http://www.facebook.com/".$fb_id."' target='_blank'><img src='http://graph.facebook.com/".$fb_id."/picture/' /></a>";
} 
```

基本上发生的事情是我在呼应最近一个月（这是在此之前的一些代码中）。$lastone_month 是一个数字（它是最近注册用户的月份数）。假设现在是 1 月，因此 h1 将显示 1/2013。然后，我让 while 循环遍历数据库并按时间戳顺序回显用户的个人资料图片。我想做的是运行 while 循环，直到它到达 $month 不等于 $lastone_month 的行。

我不能在 while 循环中使用 "&& $month==$lastone_month 因为此时尚未声明 $month 值。我在 echo 行周围尝试了一个 if 语句，但这导致它无限显示一个条目。我试图在while循环之前声明行，然后也在那里声明$month和$year，然后运行循环，但这也不起作用。我认为这是一个非常简单的解决方案，但我不知道它是什么任何帮助将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:16:33.617

您可以随时使用`break`退出循环：

```
while ($row = mysqli_fetch_array ($result))
{
  ...
  $month = $timestamp ['month'];
  if ($month != $lastone_month) break;
  ...
} 
```

但更有效的是`WHERE`在您的 SQL 查询中使用：

```
$sql = "SELECT * FROM fb_id WHERE MONTH(timestamp)='$lastone_month' ORDER BY timestamp DESC"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:16:55.070

```
// build here timestamp which is your limit and name it $limit
$sql = 'SELECT * FROM fb_id WHERE timestamp < "$limit" ORDER BY timestamp DESC'; 
```

类似的东西

# boost - 删除 BGL 图的循环

> ID：14976045
> 
> 赞同：1
> 
> 时间：2013-02-20T09:13:09.410
> 
> 标签：boost, graph, cycle

我想删除 BGL 图 (BGL adjacency_list) 中的循环，我发现有些人建议使用 depth_first_search 方法来接受这样的访问者

```
class CycleTerminator : public boost::dfs_visitor<> {
template <class Edge, class Graph>
void back_edge(Edge e, Graph& g) {
    //implement
}
}; 
```

但是我怀疑我是否可以使用depth_first_search来删除图中的边，因为depth_first_search有一个const graph参数，所以它不能删除边，我期待着得到答案。非常感谢。

# asp.net-mvc-3 - 在 asp.net mvc 中上传文件

> ID：14976048
> 
> 赞同：0
> 
> 时间：2013-02-20T09:13:27.333
> 
> 标签：asp.net-mvc-3

通过此代码，我无法将我的文件上传到 UserImage 文件夹中，也无法在将我的站点上传到本地主机上的 IIS 之后获取数据库中的路径，然后才能正常工作。当我按下提交按钮时，将发生错误是 -

> 拒绝访问路径“C:\Users\PEERBITS\Desktop\ClientProj\ClientProj\UserImages\Lighthouse.jpg”。

这是代码：

```
if (uploadFile != null && uploadFile.ContentLength > 0)
{
    var filename = Path.GetFileName(uploadFile.FileName);
    var path = Server.MapPath("~/UserImages/") + filename;
    uploadFile.SaveAs(path);
    ins.image_path = "~/UserImages/" + filename;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:50:39.870

请检查“UserImages”文件夹的属性。
请删除此文件夹**的只读**属性。

# java - 在 Web 环境中讨论本地问题

> ID：14976049
> 
> 赞同：1
> 
> 时间：2013-02-20T09:13:32.363
> 
> 标签：java, multithreading, servlets, thread-local

我知道每个请求都由一个 servlet 线程提供服务，但是一个用户会话是否可以由两个不同的线程提供两个请求？

如果上述情况真的发生，那么第一个请求服务线程存储的线程局部变量被第二个请求服务线程读取怎么办？

恐怕如果我将用户凭据存储在第一个线程的 Spring Security 的 SecurityContextHolder（它使用线程局部变量）中，第二个线程将无法访问用户凭据......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:22:36.600

不，一个请求不会由多个线程处理。真正可能发生的是一个线程处理 2 个请求。这就是您自己使用线程局部变量时应该非常小心的原因。但是您可以信任 Spring 框架：它做的事情是正确的。例如，在使用线程本地时可以使用会话或请求 ID，因此不会混淆由一个线程处理的 2 个请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:25:38.197

> 我知道每个请求都由一个 servlet 线程提供服务，但是一个用户会话是否可以由两个不同的线程提供两个请求？

是的，这是可能的。

> 恐怕如果我将用户凭据存储在第一个线程的 Spring Security 的 SecurityContextHolder（它使用线程局部变量）中，第二个线程将无法访问用户凭据......

Spring 为每个请求单独建立安全性，您不必自己处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:41:06.660

同一用户的两个单独请求（很可能）由两个不同的线程处理。

我不确定 Spring 做了什么，但 Servlet api 提供了一种检索特定于用户会话的数据的方法（服务器如何跟踪会话无关紧要，但看看 cookie 和 url 重写）。

现在，如果我想在 threadlocal 变量上拥有用户凭据（这并不罕见，因为 ThreadLocal 伪单例是我所知道的最方便的注入方式），我会将它们存储在用户 HttpSession 上（这是持久的同一用户的所有请求）并使用 servlet 过滤器在每个请求开始时将它们放在 threadlocal 上。

我希望这能让你更清楚一些。我发现即使使用最新的框架，也最好了解幕后发生的事情:)

# java - 数据库基准测试：测试并发时的奇怪结果 (ExecutorService)

> ID：14976052
> 
> 赞同：1
> 
> 时间：2013-02-20T09:13:47.577
> 
> 标签：java, concurrency, benchmarking, derby

我目前正在开发一个 java Benchmark 来评估一些使用 Apache Derby 数据库的用例（插入、更新、删除等）。

我的实现如下：

在预热 JVM 之后，我执行一个系列（for 循环：（100k 到 1M 次迭代）），比方说，`ÌNSERT`在数据库的（目前单个表）中。因为它是 Apache Derby，所以对于那些知道的人，我测试了每种模式（内存/嵌入式、内存/网络、持久/嵌入式、持久/网络）

进程的执行可以是单线程的，也可以是多线程的（使用`Executors.newFixedThreadPool(poolSize)`

好吧，这是我的问题：

当我只用 1 个线程执行基准测试时，我得到了非常现实的结果

`In memory/embedded[Simple Integer Insert] : 35K inserts/second (1 thread)`

然后，我决定依次执行 1 个和 2 个（并发）线程。

现在，我有以下结果：

```
In memory/embedded[Simple Integer Insert] : 21K inserts/second (1 thread)
In memory/embedded[Simple Integer Insert] : 20K inserts/second (2 thread) 
```

为什么 1 个线程的结果变化如此之大？

基本上，我在循环之前和之后开始和结束计时器：

```
// Processing
long start = System.nanoTime();

for (int i = 0; i < loopSize; i++) {
    process();
}
// end timer
long absTime = System.nanoTime() - start;
double absTimeMilli = absTime * 1e-6; 
```

和 process() 方法：

```
private void process() throws SQLException {
        PreparedStatement ps = clientConn.prepareStatement(query);
        ps.setObject(1, val);
        ps.execute();
        clientConn.commit();
        ps.close();
} 
```

由于执行是按顺序处理的，我的代码（数据处理）的其余部分不应该改变基准吗？

随着顺序线程数量的增加（例如 1、2、4、8），结果会变得更糟。

如果这令人困惑，我很抱歉。如果需要，我会提供更多信息或重新解释！

谢谢你的帮助 ：）

编辑 ：

这是调用上述执行的方法（来自 Usecase 类）：

```
@Override
public ArrayList<ContextBean> bench(int loopSize, int poolSize) throws InterruptedException, ExecutionException {
    Future<ContextBean> t = null;
    ArrayList<ContextBean> cbl = new ArrayList<ContextBean>();

    try {

        ExecutorService es = Executors.newFixedThreadPool(poolSize);

        for (int i = 0; i < poolSize; i++) {
            BenchExecutor be = new BenchExecutor(eds, insertStatement, loopSize, poolSize, "test-varchar");
            t = es.submit(be); 
            cbl.add(t.get());
        }

        es.shutdown();
        es.awaitTermination(Long.MAX_VALUE,TimeUnit.MILLISECONDS);

    } catch (InterruptedException e) {
        e.printStackTrace();
    } catch (SQLException e) {
        e.printStackTrace();
    }
    return cbl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:49:02.843

在简单的操作中，每个数据库的行为都与您描述的一样。

原因是您生成的所有线程都试图在同一张表（或一组表）上进行操作，因此数据库必须对访问进行序列化。

在这种情况下，每个线程的工作速度都会慢一些，但总体结果是（小）增益。（21K+20K=41K 对 35K 的单线程版本）。

增益随着线程数的增加而减少（通常呈指数级），最终您可能会因为锁升级而遭受损失（请参阅[https://dba.stackexchange.com/questions/12864/what-is-lock-escalation](https://dba.stackexchange.com/questions/12864/what-is-lock-escalation)）。

通常，多线程解决方案在其性能不受单一资源约束，而是受多种因素（即计算、多表选择、不同表插入）的约束时，收益最大。

# github - md、pdf 和 html 格式的文档

> ID：14976054
> 
> 赞同：0
> 
> 时间：2013-02-20T09:13:50.283
> 
> 标签：github, documentation

我正在 Github 上开发一个开源项目。我创建了一些 Github 的 md 格式的文档。但是，我希望这些文档以三种格式提供：

1.  PDF：与项目一起下载
2.  HTML：托管在我的个人网站上。
3.  Markdown (.md)：用于 Github。

显然我不想写三次。有什么方法我可以在任何地方写一次（尽管首选 MS Word）并且可以将其转换为其他两种格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T15:23:31.303

考虑[潘多克](http://johnmacfarlane.net/pandoc/ "潘多克")

我会用 Markdown 写，然后转换成其他的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T16:43:15.147

另一种可能性是 DITA。它的免费参考实现 DITA Open Toolkit 让您可以开箱即用地生成 HTML 和 PDF，也可以自定义生成 Markdown。

但是，DITA 可能是一个比您需要的更复杂的解决方案，这取决于您对内容重用的要求、文档的大小、更新的频率、您是否会雇用技术作家来维护和更新您的文档......一种功能强大的解决方案，比一次性临时情况更适合专门的文档工作。

# sql - 如何在没有可以在 SQL 上分组的属性的表中进行分组

> ID：14976058
> 
> 赞同：-1
> 
> 时间：2013-02-20T09:14:06.287
> 
> 标签：sql, group-by, user-defined-functions

我有以下表格：

*   订单
*   产品
*   OrderDetails 作为联合表。

我还有一个连接到产品的类别表；CategoryID 是 Products 的外部表。

我正在尝试获取一个表，其中包含 1997 年、1998 年、季度、以 C 字母开头的类别名称和销售（UDF）之间的订单年份。这是我尝试过的：

```
Select YEAR(o.OrderDate) AS "Year", DATENAME(Quarter, o.OrderDate) AS "Qtr",
       c.CategoryName,
       dbo.SaleAfterDiscount(od.UnitPrice, od.Quantity, od.Discount) AS "Sale"
  From Orders o, [Order Details] od, Categories c, Products p
 WHERE (YEAR(o.OrderDate)='1997'OR YEAR(o.OrderDate)='1998')
   AND c.CategoryName LIKE 'c%'
   AND od.OrderID = o.OrderID
   AND od.ProductID = p.ProductID
   AND c.CategoryID = p.CategoryID 
```

但我得到了很多结果。如何对它们进行分组或修复查询以获得正确答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:47:45.067

1.  使用显式 JOIN
2.  不要在列上使用函数
3.  GROUP BY 所有非聚合列

像这样：

```
Select
     YEAR(o.OrderDate) AS "Year",
     DATENAME(Quarter, o.OrderDate) AS "Qtr",
     c.CategoryName,
     SUM(dbo.SaleAfterDiscount(od.UnitPrice, od.Quantity, od.Discount)) AS "SaleSum"
From
     Orders o
     JOIN
     [Order Details] od ON od.OrderID=o.OrderID
     JOIN
     Products p ON od.ProductID=p.ProductID
     JOIN
     Categories c ON c.CategoryID=p.CategoryID
WHERE
     o.OrderDate >= '19970101' AND o.OrderDate < '19990101'
     AND
     c.CategoryName LIKE 'c%'
GROUP BY
     YEAR(o.OrderDate),
     DATENAME(Quarter, o.OrderDate),
     c.CategoryName; 
```

# python - 在 Python 中使用@staticmethod 和全局函数有什么区别？

> ID：14976059
> 
> 赞同：4
> 
> 时间：2013-02-20T09:14:07.543
> 
> 标签：python, decorator

我读过了

*   [Python中的@staticmethod和@classmethod有什么区别？](https://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod-in-python)
*   [适合初学者的 Python @classmethod 和 @staticmethod？](https://stackoverflow.com/questions/12179271/python-classmethod-and-staticmethod-for-beginner)

由于`staticmethod`无法访问该类的实例，我不知道它和它有什么区别`global function`？

什么时候应该使用`staticmethod`？能举个很好的例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T09:19:06.060

与全局函数一样，静态方法无法访问包含类的实例。但它在概念上属于包含类。另一个好处是它可以避免名称冲突。

当函数设计为服务于某个给定类时，建议将其作为该类的静态方法。这称为[凝聚力](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)。另外，如果这个函数没有在外面使用，你可以在它前面加上下划线来标​​记它为“私有”，这叫做[信息隐藏](http://en.wikipedia.org/wiki/Information_hiding)（尽管Python并不真正支持私有方法）。根据经验，尽可能少地公开接口将使代码更干净且不易更改。

即使该函数应该用作跨多个模块的许多类的共享实用程序，但使其成为全局函数仍然不是首选。考虑将其作为某个实用程序类的静态方法，或者将其作为某个专用模块中的全局函数。这样做的一个原因是将类似用途的函数收集到一个公共类或模块中，这有利于另一个层次的抽象/模块化（对于小型项目，有些人可能会认为这是过度工程）。另一个原因是这可能会减少命名空间污染。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:21:46.413

IMO 它更多的是一个设计问题，而不是一个技术问题。如果您觉得逻辑属于一个类（而不是实例），请将其添加为`staticmethod`，如果它不相关，则将其作为全局函数实现。

例如：

```
class Image(object):
    @staticmethod
    def to_grayscale(pixel):
        # ... 
```

海事组织优于

```
def to_grayscale(pixel):
    #...

class Image(object):
    # ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:15:53.843

静态方法包含在类中（添加@MartijnPieters 指出的命名空间）。全局函数不是。

# java - flex sdk 是否需要 java jdk 来编译程序？

> ID：14976061
> 
> 赞同：1
> 
> 时间：2013-02-20T09:14:13.590
> 
> 标签：java, flash, apache-flex, actionscript

flex sdk 是否需要 java jdk 来编译程序？

因为当我运行 mxmlc.exe 时，它​​显示了一个错误：

```
could not find JRE

could not find java 2 runtime environment 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:56:02.317

安装 32 位 JRE！64位版本会像你一样出错。检查 jvm.config (your_flex_dir\sdks\sdk_version\bin) 中的 JAVA_HOME OS env 变量和/或 java.home 变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:24:37.090

是的，需要 JRE。

> 独立 IDE - 如果您当前未使用 Eclipse™ 3.1.2，请安装此版本的 Flex Builder 2。它包括一个定制版本的 Eclipse，以及它自己的 Java 运行时环境 (JRE)。这里提到了正确的[flex 安装指南](http://www.adobe.com/support/documentation/en/flex/2/install.html)

# parse-platform - 我可以使用 parse.com 来运行定期任务吗？

> ID：14976063
> 
> 赞同：1
> 
> 时间：2013-02-20T09:14:21.150
> 
> 标签：parse-platform

我可以使用 parse.com 定期运行云代码任务吗？我已经通读了文档，但留下的印象是，运行云代码的唯一方法是在从我的前端查询解析服务器时将其作为回调运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-12T05:16:58.927

只需将其注册为后台作业[https://parse.com/docs/cloud_code_guide#jobs](https://parse.com/docs/cloud_code_guide#jobs)

然后，您可以安排它从仪表板运行或通过其他方式以编程方式调用它。

# highcharts - 有没有办法动态设置marginLeft？

> ID：14976065
> 
> 赞同：0
> 
> 时间：2013-02-20T09:14:29.137
> 
> 标签：highcharts

我构建了一个带有向下钻取的堆积条形图

[http://jsfiddle.net/uemit/9CJHq/1/](http://jsfiddle.net/uemit/9CJHq/1/)

我将图表配置为“marginLeft：90”。但是当向下钻取发生时，我希望“marginLeft”为“40”。有没有办法动态设置marginLeft？

```
 function setChart(name, categories, data) {
        chart.counters.color = 0;
        chart.xAxis[0].setCategories(categories);
        while (chart.series.length > 0) {
            chart.series[0].remove(true);
        }
        for (var i = 0; i < data.length; i++) {
            chart.addSeries({
                name: name[i],
                data: data[i]
            });
        }
    } 
```

# iphone - TableView 单元格标签在滚动时消失，但对选定的单元格可见？

> ID：14976068
> 
> 赞同：1
> 
> 时间：2013-02-20T09:14:33.677
> 
> 标签：iphone, objective-c, uitableview

由于 TableView 单元格标签在加载时显示，但是当 tableView 滚动时，tableview 内容没有出现。但是，如果我选择任何一个单元格，那么该特定单元格中的标签就会显示出来。

请帮我。我在不同方面也有同样的问题。我没有得到任何解决方案。

这是我的 cellForRowAtIndexPath 方法的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    static NSString *CellIdentifier = @"newsTableCell";
        UITableViewCell *cell = [self.newsTable dequeueReusableCellWithIdentifier:CellIdentifier];
        if(cell == nil) {       
                            cell =[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
            }
            UILabel *user = [[UILabel alloc] initWithFrame:CGRectMake(84, 10,75,21)];
            user.tag = 101;
            [cell.contentView addSubview:user];
            [user release];
            UILabel *usr = (UILabel *)[cell viewWithTag:101];
            usr.font = [UIFont boldSystemFontOfSize:12.0];
            [usr setText:[appDelegate.usernames objectAtIndex:[indexPath row]]];

            UILabel *status = [[UILabel alloc] initWithFrame:CGRectMake(154,10,69,21)];
            status.tag = 102;
            [cell.contentView addSubview:status];
            [status release];
            status = (UILabel *)[cell viewWithTag:102];
            status.font = [UIFont boldSystemFontOfSize:12.0];
            [status setText:[appDelegate.statistics objectAtIndex:[indexPath row]]];
            UILabel *rival = [[UILabel alloc] initWithFrame:CGRectMake(220,10,80,21)];
            rival.tag = 103;
            [cell.contentView addSubview:rival];
            [rival release];
            UILabel *rivals = (UILabel *)[cell viewWithTag:103];
            rivals.font = [UIFont boldSystemFontOfSize:12.0];
            [rivals setText:[appDelegate.rivalusernames objectAtIndex:[indexPath row]]];
            UILabel *gamename = [[UILabel alloc] initWithFrame:CGRectMake(84,27,208,21)];
            gamename.tag = 104;
            [cell.contentView addSubview:gamename];
            [gamename release];
            UILabel *gamenames = (UILabel *)[cell viewWithTag:104];
            gamenames.font = [UIFont boldSystemFontOfSize:12.0];
            [gamenames setText:[appDelegate.challengenames objectAtIndex:[indexPath row]]];
            UILabel *time = [[UILabel alloc] initWithFrame: CGRectMake(84,47,149,21)];
            time.tag = 105;
            [cell.contentView addSubview:time];
            [time release];
            UILabel *times = (UILabel *)[cell viewWithTag:105];
            times.font = [UIFont boldSystemFontOfSize:12.0];
            [times setText:[appDelegate.remainingtime objectAtIndex:[indexPath row]]];
            UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(12,10,67,58)];
            imageView.tag = 106;
            [cell.contentView addSubview:imageView];
            [imageView release];
            NSURL *url = [NSURL URLWithString:[appDelegate.imagepaths objectAtIndex:[indexPath row]]];
            NSData *data = [NSData dataWithContentsOfURL:url];
            UIImage *img = [[UIImage alloc] initWithData:data];
            UIImageView *imgView = (UIImageView *)[cell viewWithTag:106];
            imgView.image = img;
            return cell;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:20:32.517

首先将这些行移到 if (cell==NIL) 中：

```
 if(cell == nil) {       
        cell =[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault       reuseIdentifier:CellIdentifier] autorelease];
        UILabel *user = [[UILabel alloc] initWithFrame:CGRectMake(84, 10,75,21)];
        user.tag = 101;
        [cell.contentView addSubview:user];
        [user release];

    } 
```

或者每次重用它时向单元格添加一个子视图，滚动

和同样的：

```
UILabel *status = [[UILabel alloc] initWithFrame:CGRectMake(154,10,69,21)];
            status.tag = 102;
            [cell.contentView addSubview:status];
            [status release]; 
```

和

```
UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(12,10,67,58)];
            imageView.tag = 106;
            [cell.contentView addSubview:imageView];
            [imageView release]; 
```

...等等等等

作为一般规则：当您第一次创建单元格时（在 if (cell==nil) 内），您只需添加/分配新对象一次

然后除此之外，如果您只是重用所有对象并更改它们的属性，作为图像源的文本......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:25:49.767

也许您的 UILabel 的颜色与背景颜色相同？当您选择一个单元格然后您可以看到文本时，可能是因为当时突出显示的单元格颜色...

而且我还强烈建议您像 cortez 提到的那样创建一个单元子类，此代码不可读取，也不可维护...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:42:01.123

您对 UITableView Cell 的实现是正确的尝试这种方式我知道您的问题会解决。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
  {
     AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
     static NSString *CellIdentifier = @"newsTableCell";

 UITableViewCell *cell = [self.newsTable dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil) 
{       
     cell =[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        UILabel *user = [[UILabel alloc] initWithFrame:CGRectMake(84, 10,75,21)];
        user.tag = 101;
      usr.font = [UIFont boldSystemFontOfSize:12.0];           
      [cell.contentView addSubview:user];
        [user release];
        UILabel *status = [[UILabel alloc] initWithFrame:CGRectMake(154,10,69,21)];
        status.tag = 102;
      status.font = [UIFont boldSystemFontOfSize:12.0];
        [cell.contentView addSubview:status];
        [status release];
        UILabel *rival = [[UILabel alloc] initWithFrame:CGRectMake(220,10,80,21)];
        rival.tag = 103;
        [cell.contentView addSubview:rival];
        [rival release];
}
else
{
    UILabel *usr = (UILabel *)[cell viewWithTag:101];
    status = (UILabel *)[cell viewWithTag:102];
    rival = (UILabel *)[cell viewWithTag:103];
}
[usr setText:[appDelegate.usernames objectAtIndex:[indexPath row]]];
[status setText:[appDelegate.statistics objectAtIndex:[indexPath row]]];
[rival setText:[appDelegate.statistics objectAtIndex:[indexPath row]]];
return cell; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:48:18.960

最初我编写了上面的代码。在meronix的建议下，我改成了下面的一个。请建议。

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];    
    if (tableView.tag ==16)
    {
        NSLog(@"%d",appDelegate.checkChallenges);
        static NSString *CellIdentifier = @"newsTableCell";

        UITableViewCell *cell = [self.newsTable dequeueReusableCellWithIdentifier:CellIdentifier];
        if(cell == nil) {
            cell =[[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
            UILabel *user = [[UILabel alloc] initWithFrame:CGRectMake(84, 10,75,21)];
            user.tag = 101;
            [cell.contentView addSubview:user];
            [user release];
            UILabel *status = [[UILabel alloc] initWithFrame:CGRectMake(154,10,69,21)];
            status.tag = 102;
            [cell.contentView addSubview:status];
            [status release];
            UILabel *rival = [[UILabel alloc] initWithFrame:CGRectMake(220,10,80,21)];
            rival.tag = 103;
            [cell.contentView addSubview:rival];
            //[rival release];
            UILabel *gamename = [[UILabel alloc] initWithFrame:CGRectMake(84,27,208,21)];
            gamename.tag = 104;
            [cell.contentView addSubview:gamename];
            [gamename release];

            UILabel *time = [[UILabel alloc] initWithFrame: CGRectMake(84,47,149,21)];
            time.tag = 105;
            [cell.contentView addSubview:time];
            [time release];

            UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(12,10,67,58)];
            imageView.tag = 106;
            [cell.contentView addSubview:imageView];
            [imageView release];

        }

        UILabel *usr = (UILabel *)[cell viewWithTag:101];
        usr.font = [UIFont boldSystemFontOfSize:12.0];
        [usr setText:[appDelegate.usernames objectAtIndex:[indexPath row]]];

        UILabel *stat = (UILabel *)[cell viewWithTag:102];
        stat.font = [UIFont boldSystemFontOfSize:12.0];
        [stat setText:[appDelegate.statistics objectAtIndex:[indexPath row]]];

        NSURL *url = [NSURL URLWithString:[appDelegate.imagepaths objectAtIndex:[indexPath row]]];
        NSData *data = [NSData dataWithContentsOfURL:url];
        UIImage *img = [[UIImage alloc] initWithData:data];
        UIImageView *imgView = (UIImageView *)[cell viewWithTag:106];
        imgView.image = img;

        UILabel *times = (UILabel *)[cell viewWithTag:105];
        times.font = [UIFont boldSystemFontOfSize:12.0];
        [times setText:[appDelegate.remainingtime objectAtIndex:[indexPath row]]];

        UILabel *gamenames = (UILabel *)[cell viewWithTag:104];
        gamenames.font = [UIFont boldSystemFontOfSize:12.0];
        [gamenames setText:[appDelegate.challengenames objectAtIndex:[indexPath row]]];

        UILabel *rivals = (UILabel *)[cell viewWithTag:103];
        rivals.font = [UIFont boldSystemFontOfSize:12.0];
        [rivals setText:[appDelegate.rivalusernames objectAtIndex:[indexPath row]]];

        return cell;

    } 
```

# javascript - 无法隐藏嵌入在 Safari 中的 iframe 中的 PDF？

> ID：14976070
> 
> 赞同：1
> 
> 时间：2013-02-20T09:14:36.750
> 
> 标签：javascript, jquery, iframe, safari, show-hide

我在 iframe 中嵌入了一个 PDF。我需要在单击按钮时隐藏此 iframe。但由于某种原因，iframe 部分不会隐藏在 Safari 浏览器中。相同的代码在 IE、Chrome 和 Firefox 中运行良好。

这是我的 HTML 页面的一个片段：

```
<div id="PDFSection" style="text-align:center;">
    <iframe id="PDFFrame" src="sample.pdf"> Loading...
    </iframe>
    <hr />
    <input id="btnEmail" type="button" value="Email" name="btnEmail"/>
</div> 
```

这是我要隐藏 div 的 jquery 部分：

```
$(document).ready(function() {
    $( "#btnEmail" ).click(function() {
    $( "#PDFSection" ).hide();
    });
}); 
```

我已经尝试过 toggle() 而不是 hide() 并且还尝试在 iframe 元素本身上调用 hide() 。但没有什么能够隐藏 PDF 对象。我确实看到，当 jQuery 代码运行时，它隐藏了 PDFSection div（因为我可以看到按钮和 hr 行被隐藏），但 PDF 保留在屏幕上。

这是单击按钮之前和之后发生的屏幕截图： ![在此处输入图像描述](../Images/47f950e98b1abd247a568c6e36520fa9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:59:54.950

我刚刚测试了你的例子：

```
<html>
  <head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        $( "#btnEmail" ).click(function() {
            $( "#PDFSection" ).hide();
        });
      });
    </script>
  </head>
  <body>
    <div id="PDFSection" style="text-align:center;">
    <iframe id="PDFFrame" src="about:blank"> Loading...
    </iframe>
    <hr />
    <input id="btnEmail" type="button" value="Email" name="btnEmail"/>
</div>
  </body>
</html> 
```

它在 OSX Mountain Lion 上的 safari 6.0.2 (8536.26.17) 中运行良好。也许你应该打开开发者控制台`cmd`++`alt`并`i`寻找更多的错误信息。

# javascript - 如何从 gridview 中获取特定的单元格值并在 asp.net 中使用 jquery 将其显示在文本框中？

> ID：14976071
> 
> 赞同：0
> 
> 时间：2013-02-20T09:14:38.310
> 
> 标签：javascript, asp.net, jquery-ui, c#-4.0

以下是我的网格视图代码。在此，我有一栏“教学大纲”。在下一列中，我有编辑和删除按钮。单击编辑按钮时，将显示一个弹出窗口。我使用 jquery 显示了该弹出窗口。在弹出窗口中，我有一个教学大纲的文本框。但我不知道如何从 gridview 列中获取该教学大纲值并在弹出窗口中显示其值以编辑其值？

```
 <asp:GridView ID="gdvwSyllabus" CssClass="enquiryTable" runat="server" AutoGenerateColumns="false" Width="100%">
            <Columns>
                <asp:BoundField HeaderText ="Syllabus" DataField ="Syllabus" />
                <asp:TemplateField HeaderText="Options">
                    <ItemTemplate>
                        <ul class="enquiryList1">
                           <li><a href="#"><asp:Image ImageUrl="~/Images/edit2.png" runat="server" ID="btnSyllabusEdit" CssClass="btnEdit" /></a></li>
                           <li><a><asp:Image ImageUrl="~/Images/delete2.png" runat="server" ID="btnDelete" /></a></li>
                        </ul>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

这是我将其设计为表格的弹出代码。单击编辑按钮会弹出该表格。我想在“txtsyllabus”文本框中显示“syllabus”值以进行编辑。

```
 <table style="border: 0px; margin-left: 15px;" border="0" align="left">
                <tr>
                    <td align="right">Syllabus <span class="ErrorField">*</span>:</td>
                    <td>
                        <asp:TextBox ID="txtsyllabus" CssClass="txtbox txtSyllabus" runat="server"></asp:TextBox>

                    </td>
                </tr>
                 <tr>
                      <td>&nbsp;</td>
                      <td align="left">
                         <a href="#"><asp:Button ID="btnSubmit" Text="Save" CssClass="btnStyle btnSyllabusSubmit" runat="server" /></a>
                      </td>
                 </tr>
            </table> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:30:52.240

您可以通过从客户端单击按钮调用 javascript 函数来执行此操作，如下所示：

```
function showpopup(details)
{
document.getElementById('texbox').value=details
document.getElementById('divpopup').style.display='block' 
```

返回假；}

在gridview项目数据绑定事件上做这样的代码

```
btn=e.item.findcontrol("editbouttn")
btn.attributes.add("onclick","return showpopup(" & e.item.dataitem("details") & ");" 
```

如果这不起作用，请告诉我。

# zend-framework2 - Zend Framework 2 路由：自动重定向到子路由

> ID：14976074
> 
> 赞同：0
> 
> 时间：2013-02-20T09:14:56.177
> 
> 标签：zend-framework2

让我们以文档中的示例路由配置为例（稍作修改）：

```
return array(
    'router' => array(
        'routes' => array(
            'home' => array(
                'type' => 'literal',
                'options' => array(
                    'route' => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\IndexController',
                        'action' => 'index'
                    )
                )
            ),
            'blog' => array(
                'type' => 'literal',
                'options' => array(
                    'route' => '/blog',
                    'defaults' => array(
                        'controller' => 'Applicaton\Controller\BlogController',
                        'action' => 'index'
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'rss' => array(
                        'type' => 'literal',
                        'options' => array(
                            'route' => '/rss',
                            'defaults' => array(
                                'action' => 'rss'
                            )
                        )
                    )
                )
                // ... other child routes ...
            )
        )
    )
); 
```

我想在被调用`/blog/rss`时自动重定向到。`/blog`

现在我必须从 BlogController 的 index-action 中重定向。我想知道是否有一种方法可以让 ZF2 处理重定向而无需在操作中编写额外的代码？

# javascript - 是否在 JavaScript 中完成了 RFC3987（IRI 验证）实现？

> ID：14976078
> 
> 赞同：1
> 
> 时间：2013-02-20T09:15:00.387
> 
> 标签：javascript, uri, rfc, iri

是否有在 JavaScript 中完成的[RFC3987（国际化资源标识符）](http://www.ietf.org/rfc/rfc3987.txt)实现，以便我可以使用它来检查字符串是否是有效的 IRI？我需要它用于使用 NodeJS 完成的脚本。

我知道 HTML 不支持 IRI 链接，但我不用于检查 HTML 文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T10:45:47.747

[IRI：用于转换和解析 URI 和 IRI 的实用程序](https://www.npmjs.org/package/iri)可能会有所帮助

# android - 使用 Bixolon R200 进行打印的 Android 应用程序

> ID：14976079
> 
> 赞同：3
> 
> 时间：2013-02-20T09:15:04.600
> 
> 标签：android, printing

我正在开发一个使用 Bixolon R200 进行打印的 android 应用程序。我在工作中使用 bxlprint.jar 的类。当我想打印波斯字符串时`سلام`，打印机打印奇怪的字符。我使用 UTF-8 和 UTF-16 进行编码。你能帮我吗？

```
String PrintTextSample="سلام";

mBxlService.PrintText(PrintTextSample, BxlService.BXL_ALIGNMENT_LEFT, BxlService.BXL_FT_DEFAULT, BxlService.BXL_TS_0WIDTH | BxlService.BXL_TS_0HEIGHT,"UTF-16"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-21T11:42:30.983

您必须使用 Bixolon 字符映射来打印其他语言

[http://www.bixolon.com/upload/download/mobile%20printer_code%20pages%20manual_english_rev_1_00.pdf](http://www.bixolon.com/upload/download/mobile%20printer_code%20pages%20manual_english_rev_1_00.pdf)

# ios - iOS JSON Parser 可以处理的最大响应大小

> ID：14976084
> 
> 赞同：0
> 
> 时间：2013-02-20T09:15:20.850
> 
> 标签：ios, json, max

大多数常见的 iOS 解析器（如 JSONKit 和 Apple JSON 解析器）可以处理的 http 响应的最大大小是多少。还有什么是最大深度。

谢谢你。

# c# - 在 C# 中实现 2x2 旋转矩阵

> ID：14976085
> 
> 赞同：1
> 
> 时间：2013-02-20T09:15:24.393
> 
> 标签：c#, vector, matrix, rotational-matrices

我使用以下代码旋转矢量：

```
 var newVectorX = Math.Cos(step) * normalizedVector.X 
                                 - Math.Sin(step) * normalizedVector.Y;

                var newVectorY = - Math.Sin(step) * (normalizedVector.X )
                                 + Math.Cos(step) * normalizedVector.Y; 
```

我试图创建一个 2x2 矩阵，这样我就可以将我的归一化向量与矩阵相乘。结果将是新的旋转矢量而不是坐标。

![旋转矩阵](../Images/0c9aba2c3adc398dedd14ddd017608a9.png)

不幸`System.Windows.Media.Matrix`的是不支持 2x2 矩阵。到目前为止，我找不到这个旋转矩阵的任何实现。你将如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:33:12.400

实际上，[`System.Windows.Media.Matrix`](http://msdn.microsoft.com/en-us/library/system.windows.media.matrix.aspx)这正是您所需要的。虽然您似乎需要一个 2x2 矩阵，但使用 3x3 矩阵也可以进行转换。只需使用 a`System.Windows.Media.Matrix`并忽略不需要的部分。

```
Matrix rotate = Matrix.Identity;
rotate.Rotate(step * 180 / Math.PI);    // Rotate() takes degrees
Vector newVector = rotate.Transform(normalizedVector); 
```

# .htaccess - 将 .htm 放在 url 的末尾，并在 OSCLASS 脚本中使用 .htaccess

> ID：14976089
> 
> 赞同：0
> 
> 时间：2013-02-20T09:15:29.547
> 
> 标签：.htaccess, url-rewriting, seo, osclass

我正在使用 OSCLASS 脚本，并且正在使用 .htaccess 来重写 url。OSCLASS 生成的默认 .htaccess 提供了这样的网址 ( [http://myhost.com/saleon/vehicles/cars/honda-civic_i28](http://myhost.com/saleon/vehicles/cars/honda-civic_i28) ) 我想在每个网址的末尾添加“.htm”。所以我的网址看起来像这样（[http://myhost.com/saleon/vehicles/cars/honda-civic_i28.htm](http://myhost.com/saleon/vehicles/cars/honda-civic_i28.htm)）。有没有人知道如何在 htaccess 中做到这一点。我的 .htaccess 代码如下：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /saleon/
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /saleon/index.php [L]
</IfModule> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T10:45:25.320

没有必要在`.htaccess`. 您可以在 oc-admin: 中更改它，`Settings > Permalinks`然后单击`Show rules`。

例如，列表的默认永久链接如下所示：`{ITEM_TITLE}-i{ITEM_ID}`它会生成您之前提到的 url。但是，如果您更改以下值的值，您将获得一个以 .htm: 结尾的 url `{ITEM_TITLE}-i{ITEM_ID}.htm`。

# php - HTML5 安全地存储用户名/密码

> ID：14976091
> 
> 赞同：1
> 
> 时间：2013-02-20T09:15:32.267
> 
> 标签：php, javascript, jquery, html

我正在开发一个 HTML5 移动应用程序。该应用程序仅使用 1 个包含登录表单的 html 文件。在提交时，javascript 将用户名和密码发布到服务器上的 php 脚本，该脚本返回“true”或“false”。

当身份验证返回 true 时，应用程序会更改 html5 页面并将用户名和密码存储在 html5 本地存储中。

由于这是敏感数据，我的问题是如何以安全的方式存储这些值？

```
function handleLogin() {
    var form = $("#loginForm");    
    var u = $("#username", form).val();
    var p = $("#password", form).val();
    if(u != '' && p!= '') {
        $.post("http://www.mywebsite.com/login.php", {username:u,password:p}, function(res) {
            if(res == true) {
                //store
                window.localStorage["username"] = u;
                window.localStorage["password"] = p;             
                $.mobile.changePage("index-2.html");
            } else {
                /// error message
            }
         $("#submitButton").removeAttr("disabled");
        },"json");
    }
    return false; } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T09:22:09.453

我建议使用访问令牌，因为它可以经常更新和更改，它也不会透露用户是谁或他们的哈希密码是什么。

[http://php.net/manual/en/oauth.getaccesstoken.php](http://php.net/manual/en/oauth.getaccesstoken.php)

Edit: You do NOT want to use localStorage!

# php - 正则表达式从 php 中的标记中获取特定的类名

> ID：14976098
> 
> 赞同：-1
> 
> 时间：2013-02-20T09:15:56.367
> 
> 标签：php, regex, joomla2.5

![在此处输入图像描述](../Images/6e75056176dc59849cc70156ede02895.png)我想使用正则表达式从字符串/内容匹配类名“coremetrics”中获取标签

在 Content href 将像这样可用`<a href="/children" class="hp2s_desc_btn hp_sp13_btn_2 coremetrics">`

我需要使用标识符类名称“coremetrics”（黑框）在数组中获取 a 标签（红框）

![例子](../Images/300c1b9ca10a13af1cf6fa811322fbf7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:24:01.193

你可以试试这个正则表达式 `<a(.+)?class="(.+)?coremetrics">` 演示链接[http://regex101.com/r/xQ6dR8](http://regex101.com/r/xQ6dR8)

第二个正则表达式`<a.*?href="([^"]*)".*?class=".*?coremetrics.*?"[^>]*>`

如果你使用这个 php 代码

```
preg_match_all('/<a.*?href="([^"]*)".*?class=".*?coremetrics.*?"[^>]*>/', '<a href="yoursite.com" class="hp2s_desc_btn hp_sp13_btn_2 coremetrics">', $matches);

print_r($matches); 
```

你会这样

```
Array
(
    [0] => Array
        (
            [0] => <a href="yoursite.com" class="hp2s_desc_btn hp_sp13_btn_2 coremetrics">
        )

    [1] => Array
        (
            [0] => yoursite.com
        )

) 
```

用于`echo $matches[1][0];`回显 href 值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:31:04.703

如果您需要检索属于“coremetrics”类的所有链接，那么我建议您使用 XPath 执行此操作。

查询时使用此表达式：`//a[contains(@class, 'coremetrics')]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:31:39.083

结帐：[http](http://php.net/manual/pl/class.domxpath.php) ://php.net/manual/pl/class.domxpath.php比使用正则表达式方式更容易操作 DOM 树。

# javascript - Select2 多选重复值

> ID：14976099
> 
> 赞同：6
> 
> 时间：2013-02-20T09:15:57.637
> 
> 标签：javascript, duplicates, jquery-select2

[http://jsfiddle.net/tXFbk/2/](http://jsfiddle.net/tXFbk/2/)

HTML：

```
<div class="control-group">
    <label for="some_id" class="control-label">Some ID</label>
    <div class="controls">
        <input type="text" id="some_id" name="some_id" class="span4"/>
    </div>
</div> 
```

JS：

```
$(function() {
    $('#some_id').select2({
        allowClear: true,
        placeholder: 'Some ID',
        minimumInputLength: 2,
        multiple: true,
        data: [
            {id: 1, text: 'some text'},
            {id: 2, text: 'some other text'},
            {id: 3, text: 'some more text'}
        ]
    });
    $('#some_id').select2('data', [
        {'id':1,'text':'some text'}
    ]);

    console.log($('#some_id').select2('val'));
}); 
```

在第一次加载时它会重复值，并且在清除值后它不会从输入中清除它。此外，如果您添加一个项目（例如“更多文本”）然后将其删除，它不会从输入值中清除它。有没有办法让它停止重复值？还有一件事 - 如何禁用添加已添加的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-16T06:06:30.853

Select2 4.0.0 支持重复标签。

[Jsfiddle 演示链接](https://jsfiddle.net/nsdont/pu6yhbxy/4/)

```
$eventSelect.on("select2:select", function (e) { 
    log("select2:select", e);
  $eventSelect.append('<option value="'+e.params.data.text+'">' +e.params.data.text + '</option>');
});

$eventSelect.on("select2:unselect", function (e) { 
    log("select2:unselect", e); 
    e.params.data.element.remove();
});

function formatResultData (data) {
  if (!data.id) return data.text;
  if (data.element.selected) return
  return data.text;
}; 
```

基于 select2 事件和[github 问题](https://github.com/select2/select2/issues/3341)

图片： [![在此处输入图像描述](../Images/0629d5fdd0eca3d9032e7de46a955352.png)](https://i.stack.imgur.com/ID3mA.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-02T10:56:52.987

检查以下**On Selecting**事件，并在**createSearchChoice中设置****isNew**属性

 **让我知道它是否解决了您的问题

```
$('#some_id').select2({
            tags: true,
            tokenSeparators: [","],
            createSearchChoice: function (term, data) {
                if (term.trim().length > 0) {
                    if ($(data).filter(function () {
                      return this.text.toLowerCase().localeCompare(term.toLowerCase()) === 0;
                    }).length === 0) {
                        return {
                            id: term,
                            text: term,
                            isNew: true // this is necessary to check if the item is newly added or not
                        };
                    }
                }
            },
            multiple: true,
            minimumInputLength: 1,
            allowClear: true,
            data: [
        {id: 1, text: 'some text'},
        {id: 2, text: 'some other text'},
        {id: 3, text: 'some more text'}
    ],
        }).on("select2-selecting", function (e) {
            var tagId = '';
            if (e.choice.isNew) {
                self.AddTagToDatabase(e.choice.text);
            } else {
                var isValidTag = true;
                $(config.element[0] + ' ul li').find('div').each(function (index, item) {
                    if ($(item).html().toLowerCase().trim() == e.choice.text.toLowerCase().trim()) {
                        isValidTag = false;
                        e.choice.text = '';
                        return;
                    }
                });
            }
        }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T07:10:49.203

您需要触发 select2 的更改事件以反映更改。

```
$("#dropdownId").val("yourValues").trigger("change"); 
```

设置值后，您需要手动触发触发值，以反映下拉列表中所做的最新更改**

# android - 在 Android 应用程序中管理后台线程

> ID：14976102
> 
> 赞同：0
> 
> 时间：2013-02-20T09:16:02.183
> 
> 标签：android, concurrency, background-thread

我目前在下面有这个类，它在惰性适配器类和后台线程的帮助下解析 json url 并将图像和文本加载到列表视图中。

每个列表项由一个图像视图和 2 个文本视图组成。

我想为每个生成的列表项创建弹出框（警报对话框）。警报对话框将包含调用其他应用程序的选项。

我的问题 ：

在此类中编写此警报对话框功能是否明智？我担心目前有很多事情正在后台完成，这可能会影响应用程序的功能。

如果没有，任何人都可以建议另一种方法。谢谢。

Json 活动类：

```
public class JsonActivity extends  SherlockActivity{

 private ProgressDialog progressDialog;

    // JSON Node names

   static final String TAG_NAME = "name";
   static final String TAG_IMAGEURL = "imageurl";

    ListView list;
    LazyAdapter adapter;

   String chartUrl;

    String[] urlNames = new String[] { 
            "urls..."

            };

 // chartItemList is the array list that holds the chart items 
    ArrayList<HashMap<String, String>> chartItemList = new ArrayList<HashMap<String, 
        String>>();

    //Holds imageurls 
    ArrayList<String> imageurls = new ArrayList<String>();

    JsonParser Parser = new JsonParser();
 // JSONArray
    JSONArray chartItems = null;

    /** Called when the activity is first created. */    
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.chart);

        //Get the bundle 
        Bundle bundle = getIntent().getExtras();

        //Extract the data from the bundle
        int chartIndex = bundle.getInt("chartIndex");
        String chartUrl = urlNames[chartIndex]; 

        setTitle(bundle.getString("chartname"));

        //url from where the JSON has to be retrieved
        String url = chartUrl;

        //Check if the user has a connection

        ConnectivityManager cm = (ConnectivityManager) 
            getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo info = cm.getActiveNetworkInfo();
        if (info != null) {
            if (!info.isConnected()) {
                Toast.makeText(this, "Please check your connection and try again.", 
             Toast.LENGTH_SHORT).show();
            }

            //if positive, fetch the articles in background
            else new getChartItems().execute(chartUrl);
        }

        //else show toast
        else {
            Toast.makeText(this, "Please check your connection and try again.", 
            Toast.LENGTH_SHORT).show();
        }

    }

    class getChartItems extends AsyncTask<String, String, String> {

        // Shows a progress dialog while setting up the background task
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            progressDialog = new ProgressDialog(JsonActivity.this);
            progressDialog.setMessage("Loading chart...");
            progressDialog.setIndeterminate(false);
            progressDialog.setCancelable(false);
            progressDialog.show();
        }

        //Gets the json data for chart items data and presents it in a list view
        @Override
        protected String doInBackground(String... args) {

        String json = Parser.getJSONFromUrl(args[0]);
            String imageurl;
        String rank;
        String name;            
        String url;

            try{

            chartItems = new JSONArray(json);

            JSONObject json_data=null;

             for(int i=0;i<chartItems.length();i++){

                json_data = chartItems.getJSONObject(i);

                //Retrieves the value of the name from the json object

                name=json_data.getString("name");

                //Retrieves the image url for that object and adds it to an arraylist
                imageurl=json_data.getString("imageurl");
                //imageurls.add(imageurl);

                 HashMap<String, String> hashMap = new HashMap<String, String>();
                 // adding each child node to HashMap key => value
                 //hashMap.put(TAG_RANK, rank);
                 hashMap.put(TAG_NAME, name);
                 hashMap.put(TAG_IMAGEURL, imageurl);

                 // adding HashMap to ArrayList
                    chartItemList.add(hashMap);

             }

              ;
            }

            catch (JSONException e) {
                e.printStackTrace();
            }

            runOnUiThread(new Runnable() {
                public void run() {

                    list=(ListView)findViewById(R.id.list);

                     // Getting adapter by passing xml data ArrayList
                     adapter = new LazyAdapter(JsonActivity.this, chartItemList);
                     list.setAdapter(adapter);

                     // Click event for single list row
                     list.setOnItemClickListener(new OnItemClickListener() {

                         @Override
                         public void onItemClick(AdapterView<?> parent, View view,
                                 int position, long id) {

                         }
                     });

                }
            });
            return null;
        }

        //Removes the progress dialog when the data has been fetched
        protected void onPostExecute(String args) {
            progressDialog.dismiss();
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:20:37.173

我对此的回答是肯定的，只要你的用例证明它是合理的，实现一个更高级别的网络通信就足够明智了。

这取决于通信通道（EDGE/3G/4G/WiFi）和应用程序的用例。从技术上讲，只要您在后台执行此操作，这几乎是可能的。它还取决于您正在加载的列表的大小。检查这一点的最佳方法是实现可插入代码并尝试一下。

# c# - 关于在 MVVM 下的 WPF w/ DataTable 中使用 DataGrid

> ID：14976109
> 
> 赞同：0
> 
> 时间：2013-02-20T09:16:15.017
> 
> 标签：c#, wpf, mvvm, datagrid, datatable

(C#) 最近，我试图在按下 .xaml 中的按钮时将 SQL 结果从 Access MDB 显示到 DataGrid。到目前为止，我成功地使用 ICommand 触发 SQL 并在 DataTable 中返回结果。我还使用 PropertyChangedEventHandler 来通知 GUI。但是，.xaml 中的 DataGrid 不会刷新。（数据网格外观保持不变）

在 ViewModel 中，我使用下面的方式通知 GUI：

```
public DataTable TblData
{  
    get { return _dataTable; }
    set
    {
        _dataTable = value;
        RaisePropertyChanged("TblData");
    }
} 
```

在 .xaml.cs 中，我将 DataContext 设置为我的 ViewModel：

```
public MainWindow()
{
    InitializeComponent();
    this.DataContext = _dataViewModel;
} 
```

在 .xaml 中，我已经将 DataGrid 绑定到 DataTable：

```
<DataGrid Grid.Column="1" Grid.Row="1" 
    ItemsSource="Binding Path=TblData, Mode=OneWay NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged" 
    AutoGenerateColumns="True" /> 
```

关于我应该做些什么来解决的任何想法？（使用 MVVM）

或者还有其他更好的方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:47:56.887

您没有在绑定定义的开头和结尾加上括号：

```
<DataGrid Grid.Column="1" Grid.Row="1" 
ItemsSource="{Binding Path=TblData, Mode=OneWay NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" 
AutoGenerateColumns="True" /> 
```

# php - 多个选择器 ajax 请求显示错误以及如何从多个选择框中获取所选值？

> ID：14976111
> 
> 赞同：0
> 
> 时间：2013-02-20T09:16:25.233
> 
> 标签：php, javascript, jquery, html

以下是我的代码。我的工作是根据城市，位置变化。所以一旦我选择城市，一个 Ajax 请求将发送并且位置将重置。这个位置是多个选择框，所以我可以选择多个位置。基于这个我想要显示分支。这里我的问题是当我改变城市时，多个下拉菜单即将到来。当我打印 alert($('#cboLocation option:selected').val()) 时，它唯一的警报第一个值

PHP 代码

```
<?php
     $arrCity = array('Chennai' => 'Chennai',
                         'Delhi'  => 'Delhi',
                         'Noida'  => 'Noida');
       $act     =   formatstring($_POST['act']);        
      switch($act)  
            {
                case "getCommonLocation":
                    $dbConn       = setDbConn();
                    $strCityName  = $_POST['CityName'];             
                    $strSQL = "SELECT distinct locality 
                                 FROM mp_new_project 
                                WHERE city = '".$strCityName."' ORDER BY locality ASC";         

                    $stmt = $dbConn->prepare($strSQL);
                    $stmt->execute();
                   // $stmt->bind_result($LocationId, $Location);
                   $stmt->bind_result($Location);

                    while($stmt->fetch())
                     //$arrLocations[] = array($LocationId, $Location);;   
                       $arrLocations[] = array($Location);              

                     for($i=0;$i<count($arrLocations);$i++)
                      $strOptionsList .= "<option value='".$arrLocations[$i][0]."'>".$arrLocations[$i][0]."</option>";  

                    $stmt->close();
                    $dbConn->close();

                    print "<option value='all'>All</option>".$strOptionsList;
                    exit();
                break;

            }

    ?> 
```

Javascript

```
 <script type="text/javascript" src="scripts/jquery-1.6.1.min.js"></script>
    <script type="text/javascript" src="scripts/jquery-ui-1.8.13.custom.min.js"></script>
    <script type="text/javascript" src="scripts/ui.dropdownchecklist-1.4-min.js"></script>
    <script type="text/javascript">
     function chnageToUP()
        {
         //  var selLoc =  $('#cboLocation option:selected').text();
          alert($('#cboLocation option:selected').val());
          return false;
        }
        function getCommonLocationForCities()
        {
        url         = 'testing1.php';
        strCityName =  $('#cboCity').val();
        //chnageToUP();

        $.post(
            url,
            {
                "act"       : "getCommonLocation",
                "CityName"  : strCityName
            },
            function(responseText){ 
                $('#cboLocation').val("");
                $('#cboLocation').html(responseText);
                $("#cboLocation").dropdownchecklist({firstItemChecksAll: true, 
                                                     maxDropHeight: 100,
                                                     onComplete: function(selector)
                                                     {
                                                        chnageToUP();
                                                      }});  
                },
            "html"
        );      
       }
    </script> 
```

HTML 代码

```
<table style="margin-left:50px;" cellpadding="3" cellspacing="1" border="0" >
<tr>
     <td><b>City</b></td>
     <td><select name="cboCity" id="cboCity" onchange="getCommonLocationForCities()">
               <option  value="">City</option>
                <?php 
                   foreach($arrCity as $item)
                   {
                      print  "<option value='".$item."'>".$item."</option>";
                   }
                  ?>
       </select></td>
</tr>
<tr>
      <td><b>Location</b></td>
      <td> 
        <select name="cboLocation" id="cboLocation" class="select_142" multiple="multiple">   
         <option value='location'>Location</option>         
        </select>
      </td>
</tr>  
</table> 
```

以下是链接 [http://vignesh.gvignesh.org/dropdown/](http://vignesh.gvignesh.org/dropdown/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:30:06.427

用于[`map`](http://api.jquery.com/jQuery.map/)获取数组中的检查值....

尝试这个

```
 function chnageToUP()
 {
     var tempArray="";
     tempArray=$('#cboLocation :checked').map( function() { return this.value; });
     console.log(tempArray);
     return false;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:24:37.237

alert() 不是很好的调试方法，请`console.log()`改用。需要您拥有 Firebug 或 Google Chrome 才能查看内容。

# c# - 如何计算使用了框架库函数的程序的复杂性

> ID：14976120
> 
> 赞同：1
> 
> 时间：2013-02-20T09:16:51.377
> 
> 标签：c#

```
public void ABC()
    {
         string inputString = "Programming C#";

         // Complexty = O(1) or O(n)  
            int length = inputString.Length;

        // Complexity = O(1) or O(n)
           bool found = inputString.Contains('#');
    } 
```

* * *

上面的程序使用一个内置属性来获取长度和包含函数。内置函数将使用循环在字符串中查找字符，但是当我们直接使用该函数时，我们是否认为该函数调用为 O(1)？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:18:56.850

**假设`n`是字符串的长度**，那么你需要包括所有被调用函数的真正复杂度。否则，您将无法获得整体复杂性的正确结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:30:49.323

不太确定，但我猜这将是 O(n) 而不是 O(1)。

有一种统计方法可以确定它（几乎）......编写代码以编程方式增加字符串长度，例如第一个字符串是“p”，第二个字符串 - “pr”，第三个字符串 - “pro”......等等对于大量数据（如果您还想检查 contains 方法，请将“#”嵌入到字符串中）...记录每个操作的开始和结束时间，并绘制字符串长度增加的时间响应...

响应应该与程序使用的任何逻辑的复杂性密切相关。毕竟，这就是复杂性所表示的……响应时间相对于输入大小的增长率。

# css - 将 div 与图像和链接作为内容居中对齐

> ID：14976121
> 
> 赞同：0
> 
> 时间：2013-02-20T09:16:53.533
> 
> 标签：css

我在将某些内容与页面中心对齐时遇到了麻烦……关键是，我能够实现它……但是当浏览器调整大小时，左侧的内容不可见……我是不知道我哪里出错了..代码如下...

HTML 代码....

```
<!DOCTYPE html>

<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Home</title>
<link href="home.css" rel="stylesheet" type="text/css">

</head>

<body>

<div id="container">
<img class="logo" src="logo.jpg" width="160px" height="83px">

<div id="menualign">
 <ul>
    <li class="topli"><a href="">Home</a></li>
    <li class="topli"><a href="" target="_blank">site 1</a></li>
    <li class="topli"><a href="" target="_blank">Site 2</a></li>
    <li class="topli"><a href="">Logout</a></li>
 </ul>

</div>
<img src="bgn.jpg" width="900" height="7" id="bar">

</div>
</body>

</html> 
```

CSS代码如下

```
#container
{

 width:920px;
 height:600px;    
 position:absolute;
 left: 50%;
 top: 50%;
 margin-left: -460px;
 margin-top: -300px;
}

#menualign
{
position:relative;
left:24%;
}

#menualign ul
{
margin: 0;
padding: 0;
list-style-type: none;
text-align: center;
}
#menualign ul li { display: inline; }

#menualign ul li a
{
text-decoration: none;
font-family: Georgia, "Times New Roman", Times, serif;
font-size: 16px;
padding: .2em 1.41em;
color: #0056A2;
background-color: #fed352;
}

img.logo
{
position:relative;
top:20px;
}

#menualign ul li a:hover
{
color:black;
font-size:17px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:29:04.570

您需要放置容器，`margin:0 auto;`然后将其提供`float:left`给图像和`float:right`菜单。最后给出图像高度的菜单`line-height`以使其垂直对齐。

```
#container
{
 width:920px; 
 margin:0 auto;
}
#menualign ul li {
 margin-top:10px;
 line-height:83px; 
  float:left;
}
img.logo
{
float:left;
margin-top:10px;
} 
```

好的，我做了一个小 jsFiddle，我希望它会有所帮助。[jsFiddle](http://jsfiddle.net/rNwsV/1/)

# glassfish - glassfish3 + apache + octopuslb

> ID：14976136
> 
> 赞同：0
> 
> 时间：2013-02-20T09:17:37.557
> 
> 标签：glassfish, glassfish-3

我正在尝试构建一个由 6 个节点组成的 glassfish3 集群，该集群具有由 Octopus lb 平衡的 6 个 apache Web 服务器作为前端。负载均衡器允许我根据每个节点上注册的负载发送请求。我的设置如下：
客户端-> 章鱼负载均衡器-> apache web 服务器-> glassfish 服务器。Glassfish 通过 ajp 与 Apache 通信。
我遇到的问题是“似乎”会话没有像它们应该在整个集群上那样复制。
我找到了一些关于使用 glassfish v2 进行集群的文档，并说如果我有一个有 3 个节点的集群，节点 1 会将他的会话复制到 n2 和 n2 到 n3 和 n3 到 n1，这样一两个可能会失败，但是会话仍然存在。
gf3也一样吗？当我开始构建这个集群时，我的想法是每个节点都会将他的会话复制到集群中的所有其他节点。
如果会话复制在版本 2 中工作，我猜我的设置将永远无法工作，因为我请求可能是来自 n1 的服务器，而第二个来自 n5（n1 不会直接将会话复制到 n5），那么我将失去我的会话数据。
有什么建议吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:54:40.570

好的，由于还没有人回答我的问题，所以我就我的问题得出了一些结论。
所以会话在我阅读时被复制，我的意思是每个节点都将他的会话备份到另一个节点。与 glassfish v2 不同，在版本 3 中，此复制是在环 node1->node2->node3->node1 中执行的，每个节点都基于哈希算法将其会话复制到其他节点。

此外，您还需要一个粘性会话负载平衡器，因为如果您从节点 1 获得会话并且节点 1 将其会话复制到节点 3，并且第二个请求被转发到节点 2，那么您就会遇到问题。一个粘性会话将解决这个问题。

现在已经实现的设置是这样的：octopus lb(cannot make it work with sticky session) -> apache http (mod_jk loadbalancer with sticky session) -> glassfish 节点。因此，即使章鱼将我发送到错误的节点，基于会话 cookie 的 apache 负载均衡器也会将我发送到正确的 glassfish 节点。
如果您想知道为什么我使用 octopus lb 作为拳头平衡器 si，因为我已经平衡了其他服务和 php 应用程序。
希望这会帮助某人...

# web-services - 如何向 FuseESB 添加服务注册中心（例如：UDDI）？

> ID：14976138
> 
> 赞同：0
> 
> 时间：2013-02-20T09:17:42.637
> 
> 标签：web-services, service-discovery, uddi, fuseesb

我正在使用 Red Hat Fuse ESB。

我想使用“服务注册中心”概念（例如：UDDI）在运行时发现服务的端点。

可行吗？！

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T11:02:48.303

这个问题正在这里讨论，这个问题首先被问到 [http://fusesource.com/forums/thread.jspa?threadID=4655&tstart=0](http://fusesource.com/forums/thread.jspa?threadID=4655&tstart=0)

# coldfusion - 浏览器缓存对coldfusion登录的影响

> ID：14976152
> 
> 赞同：2
> 
> 时间：2013-02-20T09:18:28.567
> 
> 标签：coldfusion, browser-cache, coldfusion-9

我的代码在过去 2 年一直在生产环境中没有问题，上周我们的托管公司关闭了两天，当服务器重新上线时，我们的应用程序开始出现特定问题。

这个问题是当您尝试登录时，它会将您带回到登录页面而没有错误。我提交了一张 troble 票，并被要求清除我的浏览器缓存。我清除了缓存，应用程序又开始工作了。

如果不清除浏览器缓存，是否没有其他方法可以解决此问题？

我尝试了几种方法，我用过

```
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" /> 
```

并且还使用了

```
<cflocation url="index.cfm" addtoken="yes"> 
```

请参阅 Application.cfc 的代码

```
<cfcomponent>

<cfset this.name = "some_app"> 
<cfset this.applicationTimeout = createTimeSpan(0,9,0,0)>
<cfset this.clientmanagement= "yes">
<cfset this.ClientStorage = "registry"><!--- this was formally cookie, i changed it to registry, but no change --->
<cfset this.loginstorage = "session" >
<cfset this.sessionmanagement = "yes">
<cfset this.sessiontimeout = createTimeSpan(0,4,0,0)>
<cfset this.setClientCookies = "yes">
<cfset this.setDomainCookies = "yes">
<cfset this.scriptProtect = "all">  
<cfset this.datasource = "some_dsn">

<cffunction name="onApplicationStart" output="false">

    <cfset application.scriptProtect = "all">

    <cfset application.sessions = 0>
    <cfset application.surportmail = "support@some_app.com"> 
    <cfset application.site.url = "http://some_app.com/"/>        
    <cfset application.com.Employee = CreateObject("component","com.user.Employee").init()/>
    <cfset application.com.Appraisal = CreateObject("component","com.Appraisal").init()/> 
    <cfset application.com.Security = CreateObject("component","com.system.Login").init()/>
    <cfset application.com.Log = CreateObject("component","com.adexfe.portal.system.Log").init()/> 
    <cfset application.com.Temp = CreateObject("component","com.adexfe.portal.Temp").init()/>
    <cfset application.com.Util.Security = CreateObject("component","com.adexfe.util.Security").init()/>   
    <cfset application.com.Security.url = application.site.url/>

</cffunction>

<cffunction name="onApplicationEnd" output="false">
    <cfargument name="applicationScope" required="true">

</cffunction>

<cffunction name="onRequestStart">
    <cfargument name="requestname" required=true/>

    <cflock type="exclusive" scope="session" timeout="10">
        <cfparam name="session.IsLogin" default="false" type="boolean" />
        <cfparam name="session.Userinfo" default=""  />
    </cflock>

    <cflock type="readonly" scope="session" timeout="40">
        <cfset request.IsLogin = session.IsLogin>
        <cfset request.UserInfo = session.UserInfo>
    </cflock>
    <!--- Check for login here --->
    <cfif Not request.IsLogin and ListLast(cgi.SCRIPT_NAME,'/') NEQ "login.cfm"  and ListLast(cgi.SCRIPT_NAME,'/') NEQ "forget.cfm">
        <cflocation url="login.cfm" addtoken="no">            
    </cfif> 

    <cfset application.com.Security.url = application.site.url/> 

    <cfset request.Security = application.com.Util.Security/>
    <cfparam name="url.bp" default="#request.Security.URLEncrypt('bp=home')#"/>     
    <cfset url.bpr = url.bp/>
    <cfif listfirst(url.bp,'=') eq 'h'>
        <cfset request.aurl = request.Security.URLDecrypt(listlast(url.bp,'='))/> 
    <cfelse>
        <cfset request.aurl.bp = url.bp/>
    </cfif> 

    <cfset request.aurl.bp = Replace(request.aurl.bp,'.','/','all')>

</cffunction> 

</cfcomponent> 
```

Login.cfm 代码：

```
<html>
<head>
<title>Login</title>
<link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
<link href="Assets/css/reset.css" rel="stylesheet" type="text/css" />
<link href="Assets/css/login.css" rel="stylesheet" type="text/css" />
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr><td width="50%" align="right"><br />      <img src="Assets/img/logo-b.jpg" width="445" height="164" /></td>
    <td><span class="label"> <img src="Assets/img/comp_logo.gif"  vspace="100" hspace="50" /></span></td></tr>
</table>

<cfform name="login">
<table width="300" border="0" align="center" >
    <tr><td nowrap class="label"> Email:</td>
    <td><cfinput class="in" name="username" message="Valid email address is required please" type="text" required="yes" /></td></tr>
    <tr><td height="41"  class="label">Password:</td>
    <td><cfinput  class="in" name="Password" style="color:red;"  required="yes" type="password"/></td></tr>
    <tr><td height="41">&nbsp;</td>
    <td><input type="submit" value="Login" class="sub"/><input name="Captcha" value="" type="hidden"></td></tr>
    <tr><td>&nbsp;</td>
    <td><a href="forget.cfm">Forget password?</a></td></tr>
</table>
</cfform>

<cfoutput>
<cfif structkeyexists(form,'Captcha')>
    <!---login with user info --->
    <cfset s = createobject("component","com.system.Security").init(false,false)/>
    <cfset l = createobject("component","com.system.Login").init()/>
    <cfset l.url = application.site.url/>
    <cfset l.SignIn(form,s)/>

    <cfif Not l.IsLogin>
        <div align="center" style="color:##F00; font-weight:bold;  text-align:center;">#l.errmsg#</div>
        <cfset application.com.Log.WriteLoginAttempt(form.username)/>
    <cfelse>
        <!--- set session --->
        <cflock type="exclusive" scope="session" timeout="30" throwontimeout="yes">
            <cfset session.IsLogin = true>
            <cfset session.userInfo = application.com.Employee.GetEmployee(l.userInfo.employeeid)/>
        </cflock>
        <cfset application.com.Log.WriteLoginSuccess(form.username,l.userInfo.employeeId)/>
        <cflocation url="index.cfm" addtoken="no">
    </cfif> 
</cfif>
</cfoutput>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T17:06:03.483

如果您使用这些命令，您可以清除服务器上的应用程序变量，如果您想重置任何变量并重新启动应用程序，您也可以使用 structClear()。一般来说，一旦设置了应用程序变量，它们就会在内存中持久存在，直到应用程序重新启动。

这些命令将重新启动应用程序。

```
<cfscript> applicationStop(); </cfscript> or <cfset applicationStop()> 
```

清除变量后，您可以删除该行代码，这应该可以解决缓存问题。

# c# - 使用 SetParent 冻结父窗口

> ID：14976155
> 
> 赞同：0
> 
> 时间：2013-02-20T09:18:35.983
> 
> 标签：c#, winapi, c#-4.0

我有一个 C# 应用程序，它创建一个表单并将其堆叠在另一个应用程序窗口的前面。我通过使用`SetParent`. 但是，（新）父窗口冻结。

我该如何解决？这是线程的问题吗？

这是有效的：

```
private void Test(object sender, EventArgs e)
        {
            FormCover cov = new FormCover();
            IntPtr hwnd = Win32Utils.FindWindowByCaptionStart(IntPtr.Zero, TrackerName, null);

            Win32Utils.SetParent(cov.Handle, hwnd);
            cov.SetDesktopLocation(0, 0);

            cov.Show();
        } 
```

但这（带有计时器已过事件）**不是**：

```
public partial class Form1 : Form
    {

FormCover cover;

void tmrCheck_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
        {
            ShowCover();
        }

private void ShowCover()
        {
            cover = new FormCover();
            IntPtr hwnd = Win32Utils.FindWindowByCaptionStart(IntPtr.Zero, TrackerName, null);

            cover.CoverInitialize(hwnd);
            cover.Activate();
        }
}
//------

public partial class FormCover : Form
    {
        public delegate void IntPtrDlg(IntPtr param);

        public FormCover()
        {
            InitializeComponent();
        }

        internal void CoverInitialize(IntPtr hwdnParent)
        {
            if (this.InvokeRequired)
            {
                this.Invoke(new IntPtrDlg(CoverInitialize), new object[] { hwdnParent });
            }
            else
            {
                Win32Utils.SetParent(this.Handle, hwdnParent);
                this.SetDesktopLocation(0, 0);
            }
        }

        internal void CoverActivate(IntPtr handleFormulario)
        {
            if (!Visible)
                this.Show();
        }

        internal void CoverFinalize()
        {
            Hide();
            Win32ParentUtils.SetParent(Handle, new IntPtr());
        }
    } 
```

这两个样本有什么区别？第一个工作正常，第二个正在冻结aprent窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:32:47.757

正如我刚才所说，您需要为您的表单创建一个消息泵。尝试

```
Thread thread = new Thread( () =>
{
     var formCover = new FormCover();
     Application.Run(formCover);
});
thread.ApartmentState = ApartmentState.STA;
thread.Start(); 
```

然后你应该能够设置你的表单的父级。

请参阅[此处](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/3f0e7794-8671-47c4-aa9a-3bd1f85c9963)以获取更多参考。

# objective-c - 以编程方式创建网格视图

> ID：14976157
> 
> 赞同：1
> 
> 时间：2013-02-20T09:18:42.950
> 
> 标签：objective-c, ios6, xcode4.5

我正在开发一个应用程序，我试图在其中实现这样的东西：-

1：首先，我创建了一个按钮（这里的名称是“创建一个新文件夹”）。单击该按钮时，将出现一个警报视图，该视图将询问将在单击时创建的按钮的名称。

2：每次点击“新建文件夹”按钮时，都会重复上述过程。

3：在运行时创建的按钮将以网格视图格式排列。

![所需的安排将是这样的。](../Images/05a05a582cec790ae42e054d1b5917fe.png)

上面显示的屏幕截图将让您了解所需的安排。

我已经尝试过使用`UITableview`并在其中制作列。但我无法在运行时创建文件夹。请帮助我找到解决此问题的任何方法。建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:28:14.857

如果您需要 iOS 6，请尝试[UICollectionView。Apple网站上也有一个简单的](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)[指南](https://developer.apple.com/library/ios/#samplecode/CollectionView-Simple/Introduction/Intro.html#//apple_ref/doc/uid/DTS40012860)。

# c# - 初始化数据库连接的最佳实践

> ID：14976162
> 
> 赞同：0
> 
> 时间：2013-02-20T09:19:00.800
> 
> 标签：c#, asp.net, oracle, asp.net-mvc-4, odp.net

我目前正在开发一个 MVC 4 项目，我们决定使用普通的旧 SQL，而不是依赖 EntityFramework。

我现在的问题是初始化数据库连接的最佳实践是什么。我考虑过使用单例打开连接（连接字符串存储在 Web.config 中），然后在整个应用程序生命周期中使用已建立的连接，但我不确定这是否是一个好方法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:23:48.017

对于数据库连接，**越晚打开越早关闭**。

您应该在必要时创建连接对象，而不是使用单例连接，如果使用[`using`](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)块则更好，因为 Connection 实现`IDisposable`并且您应该在完成连接后处理连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:24:12.097

`ODP.NET`支持连接池，因此没有理由（除非在您的特定情况下另有证明）来保留`Singleton`您的`OracleConnection`对象。

这里的最佳实践是 imo 为每个语句使用连接（.NET 连接对象，而不是物理连接）。

```
using(OracleConnection connection = ...)
    {
        ...Do work here
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:25:35.630

如果您想了解更多关于您刚刚描述的类似方法的信息，请查看此处：[https](https://stackoverflow.com/a/10153406/1289283) ://stackoverflow.com/a/10153406/1289283 。我已经回答了这种困境。确保您不会在每个应用程序规模上执行此操作，而是在每个请求上执行此操作，否则您会遇到麻烦。每个应用程序适用于单用户桌面应用程序，而不适用于网络应用程序！并且不要为此使用单例...

# web-services - java.lang.NoClassDefFoundError：无法初始化类 net.sf.cglib.proxy.Enhancer

> ID：14976165
> 
> 赞同：0
> 
> 时间：2013-02-20T09:19:07.443
> 
> 标签：web-services, hibernate, rest, jpa, cglib

当我试图在响应时请求休息服务时，它得到异常..

```
Feb 21, 2013 2:34:49 PM com.sun.jersey.spi.container.ContainerResponse mapMappableContainerException
SEVERE: The exception contained within MappableContainerException could not be mapped to a response, re-throwing to the HTTP container
java.lang.NoClassDefFoundError: Could not initialize class net.sf.cglib.proxy.Enhancer
    at org.hibernate.proxy.pojo.cglib.CGLIBLazyInitializer.getProxyFactory(CGLIBLazyInitializer.java:117)
    at org.hibernate.proxy.pojo.cglib.CGLIBProxyFactory.postInstantiate(CGLIBProxyFactory.java:43)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactory(PojoEntityTuplizer.java:162)
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.<init>(AbstractEntityTuplizer.java:135)
    at org.hibernate.tuple.entity.PojoEntityTuplizer.<init>(PojoEntityTuplizer.java:55)
    at org.hibernate.tuple.entity.EntityEntityModeToTuplizerMapping.<init>(EntityEntityModeToTuplizerMapping.java:56)
    at org.hibernate.tuple.entity.EntityMetamodel.<init>(EntityMetamodel.java:302)
    at org.hibernate.persister.entity.AbstractEntityPersister.<init>(AbstractEntityPersister.java:434)
    at org.hibernate.persister.entity.SingleTableEntityPersister.<init>(SingleTableEntityPersister.java:109)
    at org.hibernate.persister.PersisterFactory.createClassPersister(PersisterFactory.java:55)
    at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:226)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1300)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:713)
    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:121)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:52)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:34)
    at de.vogella.jpa.simple.main.Main.getObj(Main.java:18)
    at com.poshs.webapp.MyResource.setIt(MyResource.java:43)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597) 
```

我在运行 mvn 依赖项后得到这个结果：tree

```
[INFO] +- com.sun.jersey:jersey-server:jar:1.8:compile 
[INFO] |  +- asm:asm:jar:3.1:compile
[INFO] |  \- com.sun.jersey:jersey-core:jar:1.8:compile
[INFO] +- com.sun.jersey:jersey-json:jar:1.8:compile
[INFO] |  +- org.codehaus.jettison:jettison:jar:1.1:compile
[INFO] |  |  \- stax:stax-api:jar:1.0.1:compile
[INFO] |  +- com.sun.xml.bind:jaxb-impl:jar:2.2.3-1:compile
[INFO] |  |  \- javax.xml.bind:jaxb-api:jar:2.2.2:compile
[INFO] |  |     +- javax.xml.stream:stax-api:jar:1.0-2:compile
[INFO] |  |     \- javax.activation:activation:jar:1.1:compile
[INFO] |  +- org.codehaus.jackson:jackson-core-asl:jar:1.7.1:compile
[INFO] |  +- org.codehaus.jackson:jackson-mapper-asl:jar:1.7.1:compile
[INFO] |  +- org.codehaus.jackson:jackson-jaxrs:jar:1.7.1:compile
[INFO] |  \- org.codehaus.jackson:jackson-xc:jar:1.7.1:compile
[INFO] +- junit:junit:jar:4.8.2:test
[INFO] +- com.sun.jersey:jersey-client:jar:1.8:test
[INFO] +- org.glassfish.distributions:web-all:jar:10.0-build-20080430:test
[INFO] +- org.glassfish.embedded:gf-embedded-api:jar:1.0-alpha-4:test
[INFO] |  +- org.glassfish.api:dtds:jar:resources:9.0.2:test
[INFO] |  \- org.glassfish.api:schemas:jar:resources:9.0.2:test
[INFO] +- org.apache.httpcomponents:httpclient:jar:4.0-alpha4:compile
[INFO] |  +- org.apache.httpcomponents:httpcore:jar:4.0-beta1:compile
[INFO] |  \- commons-codec:commons-codec:jar:1.3:compile
[INFO] +- com.google.code.gson:gson:jar:2.2.2:compile
[INFO] +- org.apache.openejb:commons-dbcp-all:jar:1.3-r699049:compile
[INFO] +- org.apache.directory.studio:org.apache.commons.pool:jar:1.6:compile
[INFO] |  \- commons-pool:commons-pool:jar:1.6:compile
[INFO] +- org.nuiton.thirdparty:asm-attrs:jar:1.5.4-snapshot:compile
[INFO] +- org.sonatype.sisu.inject:cglib:jar:2.2.2:compile
[INFO] +- org.jvnet.hudson.dom4j:dom4j:jar:1.6.1-hudson-3:compile
[INFO] +- org.hibernate:ejb3-persistence:pom:3.3.2.Beta1:compile
[INFO] +- org.hibernate:hibernate:jar:3.2.6.ga:compile
[INFO] |  +- net.sf.ehcache:ehcache:jar:1.2.3:compile
[INFO] |  +- javax.transaction:jta:jar:1.0.1B:compile
[INFO] |  +- asm:asm-attrs:jar:1.5.3:compile
[INFO] |  +- dom4j:dom4j:jar:1.6.1:compile
[INFO] |  +- antlr:antlr:jar:2.7.6:compile
[INFO] |  \- cglib:cglib:jar:2.1_3:compile
[INFO] +- org.hibernate:hibernate-annotations:jar:3.2.1.ga:compile
[INFO] |  \- javax.persistence:persistence-api:jar:1.0:compile
[INFO] +- org.hibernate:hibernate-commons-annotations:jar:3.0.0.ga:compile
[INFO] +- org.hibernate:hibernate-entitymanager:jar:3.2.1.ga:compile
[INFO] |  +- jboss:javassist:jar:3.3.ga:compile
[INFO] |  \- jboss:jboss-archive-browsing:jar:5.0.0alpha-200607201-119:compile
[INFO] +- org.hibernate:hibernate-validator-annotation-processor:jar:5.0.0.Beta1:compile
[INFO] +- commons-beanutils:commons-beanutils-bean-collections:jar:1.8.3:compile
[INFO] +- jboss:jboss-common:jar:4.2.2.GA:compile
[INFO] +- javassist:javassist:jar:3.12.1.GA:compile
[INFO] +- hibernate:hibernate-entitymanager:pom:3.4.0.GA:compile
[INFO] |  +- org.hibernate:ejb3-persistence:jar:1.0.2.GA:compile
[INFO] |  \- org.hibernate:hibernate-core:jar:3.3.0.SP1:compile
[INFO] +- org.hibernate:hibernate-validator:jar:5.0.0.Beta1:compile
[INFO] |  +- javax.validation:validation-api:jar:1.1.0.Beta3:compile
[INFO] |  +- org.jboss.logging:jboss-logging:jar:3.1.1.GA:compile
[INFO] |  +- com.fasterxml:classmate:jar:0.8.0:compile
[INFO] |  +- de.odysseus.juel:juel-spi:jar:2.2.5:compile
[INFO] |  +- de.odysseus.juel:juel-api:jar:2.2.5:compile
[INFO] |  \- de.odysseus.juel:juel-impl:jar:2.2.5:compile
[INFO] +- commons-collections:commons-collections:jar:3.1:compile
[INFO] +- commons-logging:commons-logging:jar:1.1.1:compile
[INFO] +- org.slf4j:slf4j-api:jar:1.7.2:compile
[INFO] +- org.slf4j:slf4j-simple:jar:1.7.2:compile
[INFO] +- com.google.sitebricks:slf4j:jar:0.8.3:compile
[INFO] |  \- com.google.inject:guice:jar:2.0:compile
[INFO] |     \- aopalliance:aopalliance:jar:1.0:compile
[INFO] +- org.slf4j:slf4j-log4j12:jar:1.7.2:compile
[INFO] |  \- log4j:log4j:jar:1.2.17:compile
[INFO] +- postgresql:postgresql:jar:9.1-901.jdbc4:compile
[INFO] +- com.tunnelvisionlabs:antlr4:jar:4.0:compile
[INFO] |  +- com.tunnelvisionlabs:antlr4-runtime:jar:4.0:compile
[INFO] |  |  \- org.abego.treelayout:org.abego.treelayout.core:jar:1.0.1:compile
[INFO] |  +- org.antlr:antlr-runtime:jar:3.5:compile
[INFO] |  |  \- org.antlr:stringtemplate:jar:3.2.1:compile
[INFO] |  \- org.antlr:ST4:jar:4.0.7:compile
[INFO] +- cglib:cglib-nodep:jar:2.2.2:compile
[INFO] +- org.ow2.asm:asm:jar:4.1:compile
[INFO] \- org.ow2.asm:asm-util:jar:4.1:compile
[INFO]    \- org.ow2.asm:asm-tree:jar:4.1:compile 
```

这是在运行 mvn 依赖项后得到的：树，我检查了我对 cglib 的依赖项，但我不确定版本是否兼容，请检查让我知道哪些与我的项目兼容。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:22:47.583

对于 cglib，您可能会错过一个 jar。

这什么时候发生（unitTest，已部署）？你如何构建你的项目（Maven，ant）？哪个版本的休眠？没有一些信息很难帮助你。

编辑：尝试在`mvn dependency:tree`这里运行并发布结果，我们应该看看有什么问题

编辑：你有 2 个版本的 cglib。您不应手动包含 cglib，因为它已被 hibernate 作为传递依赖项包含在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:24:07.457

只需检查您的项目中有多少个 cglib JAR。尝试确保对于您的项目 + 框架版本，您拥有所需的 cglib JAR，而不是一些额外的浮动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:44:37.507

你在课堂上错过了一些东西。这就是它显示 "MappableContainerException" 的原因。此异常与数据库管理器有关。那么请您停止您的服务器，清理并重新部署它。谢谢。

# javascript - 如何使用 ajax 开始跳棋游戏会话？

> ID：14976170
> 
> 赞同：0
> 
> 时间：2013-02-20T09:19:20.930
> 
> 标签：javascript, ajax, websocket

使用 ajax 发送动作对我来说很有意义。但是游戏会话是如何开始的呢？一名球员如何向另一名球员发送比赛邀请？一旦第二个玩家接受了第一个玩家如何收到报价？我知道 WebSockets 允许推送数据。但是过去的游戏是如何在没有 WebSockets 的情况下完成这项工作的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:49:38.883

您可以通过简单的 ajax 请求来做到这一点，因此您需要一些服务器来管理所有游戏会话。您只需要创建一些函数，每隔 x 秒向服务器发送一次请求并检查用户是否接受了游戏请求。

```
var listener = setInterval(listen,1000);

function listen() {
  //your ajax request to server to check if user2 acccepted the request
} 
```

当游戏被接受时，您可以简单地阻止监听器工作

```
clearInterval(listener); 
```

# iphone - 为 webapp 缓存视频 - 坏主意？

> ID：14976175
> 
> 赞同：1
> 
> 时间：2013-02-20T09:19:42.330
> 
> 标签：iphone, html, css, web-applications

我正在为 iPhone 创建一个 webapp。我想让用户离线使用该应用程序，但该应用程序中也有视频。缓存这些视频是个坏主意吗？

提前致谢， 伦佐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:42:52.323

iPhone 上的缓存清单有 5MB 的限制，所以是的，缓存视频是个坏主意

# c++ - 有人知道像 MFC Internals for Qt 这样的书或文档吗？

> ID：14976181
> 
> 赞同：3
> 
> 时间：2013-02-20T09:20:07.163
> 
> 标签：c++, qt, sdk, cross-platform, qt-creator

我最近阅读了 MFC Internals (ISBN 9780201407211)，它帮助我深入了解了 MFC 的工作原理，并将生产力提高了大约 100 倍。我现在想知道我已经进入 Qt，有没有这样的书或文档？我一直很难找到关于 Qt 的直截了当的文档，它似乎总是围绕着=the-bush 风格的文档（他们告诉你如何建造房子，而不是如何砍伐树木）？ ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:40:11.927

最好的方法是尝试开发自己的应用程序。只需从计算器等基本应用程序开始。向其中添加一些小部件并随时对其进行编码。作为参考，请使用 Zlatomir 提到的“使用 Qt4 进行 C++ gui 编程”。我最近使用 Qt 设计了一个完整的 GUI。我在 Inkscape 上绘制了它的屏幕截图以获得原型外观，然后我开始设计设计器来实现每个功能。然后我实现了代码并重复了设计和编码步骤。此外，最好的帮助将是 Qt Assistant - 它足够完整，不需要 Internet，因此可以节省时间并且易于使用。走我的路，你不仅会在短时间内学习Qt，然后你可以通过这本书了解你可能不知道的技巧和窍门，但它也会很有趣，这样你就不会像许多其他人一样在阅读部分中途放弃。警告 - 这样做，您还将了解 Qt 的陷阱/缺点以及如何不这样做。

这是我昨晚找到的链接之一。我浏览了 2 页，发现它可能会让你的生活更轻松 - [http://zetcode.com/gui/qt4/](http://zetcode.com/gui/qt4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:18:55.460

我没有读过你提到的 MFC 书，但是我通过阅读*“使用 Qt4 进行 C++ gui 编程”*（第一版可免费下载）和*“Qt 开发基础”*中学到的 Qt 框架，值得一提的[是](http://qt-project.org/doc/qt-4.8/qt-basic-concepts.html)文档页面，其中包含指向 Qt 框架基本概念的链接。

# vb.net - 多个 DatagridView 渲染 Vb.net

> ID：14976189
> 
> 赞同：1
> 
> 时间：2013-02-20T09:20:35.183
> 
> 标签：vb.net, winforms

我可以在面板上一个接一个地添加多个 datagridview 1。

通过添加来自同一论坛的 SysDragon 代码

```
 Dim AllDataGrids As List(Of My_custom_DGV)
    Dim lastCtrl As Control
    AllDataGrids = New List(Of My_custom_DGV)

    For j As Int32 = 0 To 3

        Dim aDataGridView As New My_custom_DGV()
        aDataGridView.for_date = ""
        aDataGridView._count = week_count

        aDataGridView.Dock = DockStyle.Top
        aDataGridView.Dock = DockStyle.Right
        aDataGridView.Dock = DockStyle.Left
        aDataGridView.Dock = DockStyle.Bottom

        AllDataGrids.Add(aDataGridView)

    Next j

    For i As Integer = 1 To 3
        Dim dgv As My_custom_DGV = AllDataGrids(i)
        ' Dim dgv As DataGridView = AllDataGrids(i)

        If dataGrid_Panel.Controls.Count.Equals(0) Then
            dgv.Top = DataGridView1.Height + 20
        Else
            lastCtrl = dataGrid_Panel.Controls(dataGrid_Panel.Controls.Count - 1)
            dgv.Top = lastCtrl.Top + lastCtrl.Height + 5

        End If

        dataGrid_Panel.Controls.Add(dgv)

    Next 
```

问题是当我在它们之间滚动时，它看起来很糟糕（即当我滚动时，它会一次又一次地重复面板上的图像）。当我滚动时它是否再次渲染视图，并且可能重复调用datagridview的绘制方法。如果是，那么解决方案是什么？谢谢。

# javascript - 如何使用 javascript 刷新和重新加载页面？

> ID：14976192
> 
> 赞同：0
> 
> 时间：2013-02-20T09:20:42.423
> 
> 标签：javascript, jquery

我有一个要求。即有一个包含用户名和密码的登录表单，一旦我们输入错误的密码，它就会导航到另一个页面（错误消息页面），我单击浏览器返回按钮返回上一页（登录页面）。现在我的页面是刷新，但我需要重新加载页面。你能帮我如何重新加载页面吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:22:53.987

```
$('#hello').click(function() {
    location.reload();
}); 
```

# javascript - 删除除孩子之外的所有内容

> ID：14976194
> 
> 赞同：0
> 
> 时间：2013-02-20T09:20:42.757
> 
> 标签：javascript, jquery, html, parent, children

```
<div class="parent">
   <span>sometext</span>
   plain text
   <input class="child">
</div>
<div class="parent">
   <span>sometext</span>
   plain text
   <input class="child">
</div>
<div class="parent">
   <span>sometext</span>
   plain text
   <input class="child">
</div> 
```

如何安全地删除`.parent`except中的所有内容`.child`？

我正在使用这段代码（其中`items`是堆栈`.child`和`each`是`.child`）

```
items.each(function(){
    $(this).parent().children().each(function(){
       if ($(this).hasClass('child'))
          // do something
       else
          $(this).remove();
    });

    $(this).unwrap(); // remove parent, keep only .child
}); 
```

但它不处理纯文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:24:34.563

你说过

> `.child`里面可以有多个`.parent`，我们只保留第一个。所以如果有三个，第二个和第三个应该被删除。

然后

> `items`是一堆，`.child`每个都是一个`.child`

好的，那么这就是我要做的：

```
items.parent('.parent').each(function() {
    var parent = $(this),
        child  = parent.children('.child').first();
    child.detach();
    parent.empty().append(child);
}); 
```

那是做什么的：

1.  从`.child`元素集向上移动到元素集`.parent`。结果集将只有唯一的父母。

2.  循环通过父母。

3.  获取每个父级中的**第一个并将其分离。** `.child`

4.  清空`.parent`.

5.  重新附加`.child`.

最终结果是每个`.parent`人都只有一个`.child`（并且没有*其他*孩子，无论是否`.child`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T09:34:11.950

在这里，您将有一个纯 JS 的解决方案：[fiddle](http://jsfiddle.net/bHUdt/)

因此，在您的循环中，您可以使用以下内容：

```
this.parentNode.innerHTML = this.outerHTML; 
```

如果您必须保留附加的事件处理程序：

```
var _this = this.cloneNode(true),
    parent = this.parentNode;
parent.innerHTML = '';
parent.appendChild(_this); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:25:06.003

像这样的东西会做到这一点；

```
$('.parent').on('click', '.child', function(e) {
    var $this = $(this),
        $parent = $this.parent(),
        $children = $parent.find('.child'); // or: $this.siblings('.child');

    $parent
        .empty() // Empty the "parent" element
        .append($children); // Re-append all "child" element to "parent"
    $this.focus(); // Focus the (input) element
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T09:37:23.667

这是使用正则表达式的替代方法：

```
$('.parent').each(function() {
    $(this).html($(this).html().match("<input class=.child.>"));
}); 
```

# android - OsmDroid 和 MapQuest：如何使用 JPEG 瓦片？

> ID：14976196
> 
> 赞同：5
> 
> 时间：2013-02-20T09:20:53.000
> 
> 标签：android, maps, offline, osmdroid, mapquest

我是[OSM](http://www.openstreetmap.org/)和[OSMdroid](http://code.google.com/p/osmdroid/)的新手。

我正在按照这个非常好的[教程](http://www.haakseth.com/?p=30)来显示离线地图。所以基本上我所做的是：

*   使用 Mobile Atlas Creator 创建了一个 zip 格式的切片包
*   使用 MapQuest 源，JPEG 格式
*   将压缩包放入正确的文件夹：`/mnt/sdcard/osmdroid/`

问题是没有渲染瓷砖。我有一个空白页。

我找到[了这个解决方案](https://groups.google.com/forum/?fromgroups=#!topic/osmdroid/OhAlkkhYFfU)，来解决我的问题。

但是现在，我不得不使用 PNG 文件，这让我很困扰，这会占用更多的空间。这对我的应用程序来说并不是很有效，因为用户必须下载一个更大的包。

我的问题是：如何在 OSMDroid 和 MapQuest 中使用 JPEG 图块？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-06T22:29:52.197

这可以获取 JPG 而不是 PNG：

```
MapView myOpenMapView;
myOpenMapView = (MapView) findViewById(R.id.openmapview);
myOpenMapView.setTileSource(new XYTileSource("MapquestOSM", ResourceProxy.string.mapquest_osm, 0, 18, 256, ".jpg", new String[] {
                "http://otile1.mqcdn.com/tiles/1.0.0/map/", "http://otile2.mqcdn.com/tiles/1.0.0/map/", "http://otile3.mqcdn.com/tiles/1.0.0/map/",
                "http://otile4.mqcdn.com/tiles/1.0.0/map/" })); 
```

注意第 3 行中的“.jpg”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T07:47:50.873

我创建了一个支持 jpg 的图块源，您可以查看并调整您的案例，请注意 getTileRelativeFilenameString 不会包含 .title 分机。该部分将由 (MapTileFilesystemProvider) 添加

```
import java.io.File;
import java.io.InputStream;
import java.util.Random;

import org.osmdroid.ResourceProxy;
import org.osmdroid.ResourceProxy.string;
import org.osmdroid.tileprovider.MapTile;
import org.osmdroid.tileprovider.tilesource.BitmapTileSourceBase.LowMemoryException;
import org.osmdroid.tileprovider.tilesource.ITileSource;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.BitmapDrawable;
import android.graphics.drawable.Drawable;

public class MapTilerCustomDataSource implements ITileSource {

    private static int globalOrdinal = 0;

    private final int mMinimumZoomLevel;
    private final int mMaximumZoomLevel;

    private final int mOrdinal;
    protected final String mName;
    protected final String mImageFilenameEnding;
    protected final Random random = new Random();

    private final int mTileSizePixels;

    private final string mResourceId;

    public MapTilerCustomDataSource() {
        mResourceId = null;
        mOrdinal = globalOrdinal++;
        mName = "MapquestOSM";
        mMinimumZoomLevel = 0;
        mMaximumZoomLevel = 20;
        mTileSizePixels = 256;
        mImageFilenameEnding = ".jpg";

    }

    @Override
    public String getTileRelativeFilenameString(final MapTile tile) {
        final StringBuilder sb = new StringBuilder();
        sb.append(pathBase());
        sb.append('/');
        sb.append(tile.getZoomLevel());
        sb.append('/');
        sb.append(tile.getX());
        sb.append('/');
        sb.append(tile.getY());
        sb.append(imageFilenameEnding());
        return sb.toString();
    }

    @Override
    public Drawable getDrawable(String aFilePath) throws LowMemoryException {
        try {
            // default implementation will load the file as a bitmap and create
            // a BitmapDrawable from it
            final Bitmap bitmap = BitmapFactory.decodeFile(aFilePath);
            if (bitmap != null) {
                return new BitmapDrawable(bitmap);
            } else {
                // if we couldn't load it then it's invalid - delete it
                try {
                    new File(aFilePath).delete();
                } catch (final Throwable e) {
                }
            }
        } catch (final OutOfMemoryError e) {
            System.gc();
        }
        return null;

    }

    @Override
    public Drawable getDrawable(InputStream aFileInputStream) throws LowMemoryException {
        try {
            // default implementation will load the file as a bitmap and create
            // a BitmapDrawable from it
            final Bitmap bitmap = BitmapFactory.decodeStream(aFileInputStream);
            if (bitmap != null) {
                return new BitmapDrawable(bitmap);
            }
        } catch (final OutOfMemoryError e) {
            System.gc();
        }
        return null;

    }

    @Override
    public int ordinal() {
        return mOrdinal;
    }

    @Override
    public String name() {
        return mName;
    }

    public String pathBase() {
        return mName;
    }

    public String imageFilenameEnding() {
        return mImageFilenameEnding;
    }

    @Override
    public int getMinimumZoomLevel() {
        return mMinimumZoomLevel;
    }

    @Override
    public int getMaximumZoomLevel() {
        return mMaximumZoomLevel;
    }

    @Override
    public int getTileSizePixels() {
        return mTileSizePixels;
    }

    @Override
    public String localizedName(final ResourceProxy proxy) {
        return proxy.getString(mResourceId);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T18:45:11.673

下载“xxx.JPG.tile”文件并将它们重命名为“xxx.PNG.tile”。

# android - 当 S Pen 在 android note 中分离时，将您的应用程序置于最前面？

> ID：14976198
> 
> 赞同：4
> 
> 时间：2013-02-20T09:20:53.840
> 
> 标签：android, galaxy

我想在 S Pen 分离时立即打开我的应用程序，如果仅在我的应用程序再次打开时才调用 onSPenDetached 下的方法，你怎么能做到这一点？

谢谢，钱杜

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-03-25T16:00:42.103

以下适用于我的 Galaxy Tab A 9.7，带有运行 Android 5.0.2 的 S-Pen (SM-P550)。

附加和分离触控笔会创建类型`com.samsung.pen.INSERT`为 booleanExtra`penInsert`的广播意图，名为`false`if detached 和`true`if put back into the device。

因此可以创建一个广播接收器来过滤这种事件。以下代码适用于这样的广播接收器，它在触控笔分离时启动 OneNote：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class SPenDetachIntentBroadcastReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent penInsertIntent) {
        if (!penInsertIntent.getBooleanExtra("penInsert", true)) {
            try {
                Intent launchIntent = context.getPackageManager().getLaunchIntentForPackage("com.microsoft.office.onenote");
                context.startActivity(launchIntent);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

在 Manifest 文件中，您需要将其声明为`com.samsung.pen.INSERT`使用意图过滤器侦听广播意图的接收器。项目中的以下条目`AndroidManifest.xml`declares`SPenDetachBroadcastReceiver`生成一个实例并使其侦听`com.samsung.pen.Insert`广播意图：

```
<receiver
            android:name=".SPenDetachIntentBroadcastReceiver"
            android:enabled="true"
            android:exported="true">
            <intent-filter>
                <action android:name="com.samsung.pen.INSERT" />
            </intent-filter>
</receiver> 
```

`registerSPenDetachmentListener`与在对象上使用已实现的方法`SPenEventLibrary`注册 a相比的优势在于，您不需要任何额外的库文件，也不需要额外的权限。`Service``onSPenDetached`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T10:30:25.797

您将需要创建 a`BroadcastReceiver`和 a `Service`。

服务：

```
public class SPenService extends Service {

    SPenEventLibrary mSPenEventLibrary = new SPenEventLibrary();

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();

        mSPenEventLibrary.registerSPenDetachmentListener(this, new SPenDetachmentListener() {

            @Override
            public void onSPenDetached(boolean bDetached) {
                if (bDetached) {
                    Toast.makeText(SPenService.this, "S Pen Detached", Toast.LENGTH_SHORT).show();
                    Intent intent = new Intent(SPenService.this, MainActivity.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(intent);
                } else {
                    Toast.makeText(SPenService.this, "S Pen Inserted", Toast.LENGTH_SHORT).show();
                }
            }
        });
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        mSPenEventLibrary.unregisterSPenDetachmentListener(this);
    }

} 
```

收件人：

```
public class SPenReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(final Context context, Intent intent) {
        String action = intent.getAction();

        if (action.equals(Intent.ACTION_BOOT_COMPLETED)) {
            context.startService(new Intent(context, SPenService.class));
        }
    }

} 
```

清单（在`<application>`标签内）：

```
<receiver android:name=".SPenReceiver" >
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver>

<service android:name=".SPenService" >
</service> 
```

# android - 动画仅导致少量图像的内存错误

> ID：14976201
> 
> 赞同：0
> 
> 时间：2013-02-20T09:21:04.013
> 
> 标签：android, image, memory

我在同一个活动中开始 2`AnimationDrawable`并且我有一个内存错误。这非常令人惊讶，因为我减小了图像的大小（宽度 = 屏幕宽度），而且我不能再减小它，因为质量会降低。例如，如果我做宽度 = 屏幕宽度/2，它可以工作，但质量很糟糕。

在 logcat 中是这样写的：

```
02-19 10:56:44.769: E/dalvikvm-heap(3118): 383916-byte external allocation too large for this process.
02-19 10:56:44.809: E/GraphicsJNI(3118): VM won't let us allocate 383916 bytes
02-19 10:56:44.809: W/dalvikvm(3118): threadid=1: thread exiting with uncaught exception (group=0x40018560)
02-19 10:56:44.819: E/AndroidRuntime(3118): FATAL EXCEPTION: main
02-19 10:56:44.819: E/AndroidRuntime(3118): java.lang.OutOfMemoryError: bitmap size exceeds VM budget 
```

我不认为我有内存泄漏，但检查[这篇文章](http://android-developers.blogspot.de/2009/01/avoiding-memory-leaks.html)，我试图检测潜在的内存泄漏，但在我看来没有。

我真的需要一些帮助，因为这不是我在这个项目中的第一个内存错误，我总是很难处理。

这是我的代码：

```
private void startAnimation(AnimationDrawable animation1,
        AnimationDrawable animation2) {
    int drawables[] = new int[] { R.drawable.fire1, R.drawable.fire2,
            R.drawable.fire3, R.drawable.fire4, R.drawable.fire5,
            R.drawable.fire6, R.drawable.fire7, R.drawable.fire8,
            R.drawable.fire9, R.drawable.fire10down2,
            R.drawable.fire11down2, R.drawable.fire12down2,
            R.drawable.fire13down2, R.drawable.fire14down2,
            R.drawable.fire15down2, R.drawable.fire16down2 };
    int drawables2[] = new int[] { R.drawable.fire14down2,
            R.drawable.fire14down2, R.drawable.fire14down2,
            R.drawable.fire14down2, R.drawable.fire14down2,
            R.drawable.fire14down2, R.drawable.fire14down2,
            R.drawable.fire14down2, R.drawable.fire14down2,
            R.drawable.fire10up, R.drawable.fire11up, R.drawable.fire12up,
            R.drawable.fire13up, R.drawable.fire14up, R.drawable.fire15up,
            R.drawable.fire16up };
    bitmapDrawable = new BitmapDrawable[drawables.length];
    bitmapDrawable2 = new BitmapDrawable[drawables2.length];
    for (int i = 0; i < drawables.length; i++) {
        bitmapDrawable[i] = new BitmapDrawable(
                decodeSampledBitmapFromResource(getResources(),
                        drawables[i], width));
        Log.w("BITMAP", "i=" + i);
        bitmapDrawable2[i] = new BitmapDrawable(
                decodeSampledBitmapFromResource(getResources(),
                        drawables2[i], width));
        animation1.addFrame(bitmapDrawable[i], 50);
        animation2.addFrame(bitmapDrawable2[i], 50);
    }
    animation1.setOneShot(true);
    animation2.setOneShot(true);
    image2.setLayoutParams(params);
    image2.setImageDrawable(animation1);
    image2.post(new Starter(animation1));
    image3.setLayoutParams(params);
    image3.setImageDrawable(animation2);
    image3.post(new Starter(animation2));
}

class Starter implements Runnable {

    AnimationDrawable animation = new AnimationDrawable();

    public Starter(AnimationDrawable animation) {
        this.animation = animation;
    }

    public void run() {
        animation.start();
    }
} 
```

我怎样才能减少位图的重量（如果有必要？问题可能在其他地方 - 并保持图像的质量？我看不出问题出在哪里，我只使用 30 张图像，其他应用程序使用很多更多！还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:41:50.433

降低质量无济于事，因为如果您要使用整个屏幕大小的图像制作动画，那么（在大多数情况下）您将超出设备的内存。

我对动画所做的是：

*   使用恒定的背景图像。
*   提取动画中不断变化的小区域
*   制作了动画中变化的独立小图像
*   使用小图像制作动画，背景图像不变

# codeigniter - 将会话购物车存储到数据库

> ID：14976202
> 
> 赞同：0
> 
> 时间：2013-02-20T09:21:10.380
> 
> 标签：codeigniter, session, shopping-cart

很抱歉问了这个老问题，我知道我在问这里之前已经阅读过，它可以使用数据库来添加更多购物车而不受限制。我已经尝试使用 ci_sessions 表来存储会话但仍然没有运气，我最多只能添加 6 个项目。

请帮帮我，我在这近两天里寻找一些例子，结果什么都没有

**编辑** 这是我的观点

```
<table id="box-table-a" summary="Employee Pay Sheet">
        <thead>
            <tr>
                <th scope="col">Description</th>
                <th scope="col">Price</th>
                <th class="centered" scope="col">Options</th>
            </tr>
        </thead>
        <tbody>
            <?php foreach ($foto_produk->result() as $key => $value) {?>
            <tr>
                <td><?php echo $value->description;?></td>
                <td><?php echo $value->price;?></td>
                <td class="centered"><input type="checkbox" name="produk_foto[]" value="<?php echo $value->id;?>" /></td>
            </tr>
            <?php }?>
        </tbody>
    </table> 
```

这是我的控制器代码

```
if($this->input->post('produk_foto')){
       $id_foto = $this->input->post('produk_foto');
       foreach ($id_foto as $key => $value) {

           $this->db->where('id', $value);
           $query = $this->db->get('foto_product');
           if($query->num_rows() > 0){
               foreach($query->result() as $ids => $rows){              
                   echo $rows->id.'<br />';
                   $data_produk = array(
                       'user_data'=> array(
                            'id' => $rows->id, 
                            'price' => $rows->price,
                            'name' => $rows->description,
                            'qty' => $rows->aantal
                        )
                   );

                   $this->cart->insert($data_produk);
               }            
           }
       }
    } 
```

这是我的视图代码

```
<?php if(!$this->cart->contents()):?>
    <div class="alert-box warning">The regular products are empty.</div>
    <div class="clearfix"></div>
    <?php else:?>
    <hr>
    <h4>REGULAR PRODUCTS</h4>
    <div class="order_detail" id="Display">
        <table>
            <thead>
                <tr>
                    <th>DESCRIPTION</th>
                    <th>QUANTITY</th>
                    <th>PRICE PER ITEM(S)</th>
                    <th>TOTAL</th>
                    <th>REMOVE</th>
                </tr>
            </thead>
            <tbody>
                 <?php foreach($this->cart->contents() as $rows):?>
                <tr>
                    <td style="font-weight:bold;"><?php echo $rows['name'];?></td>
                    <td>
                        <?php echo form_open(current_url());?>
                        <input type="text" size="3" name="quantity" value="<?php echo $rows['qty'];?>" />
                        <input type="hidden" size="3" name="rowid" value="<?php echo $rows['rowid'];?>" />
                        <input type="submit" name="update" value="Update" />
                        <?php echo form_close();?>
                    </td>
                    <td><?php echo $rows['price'];?></td>
                    <td><?php echo $this->cart->format_number($rows['subtotal']);?></td>
                    <td><a href="<?php echo base_url('index.php/en/payment/delete_item_product/'.$rows['rowid'].'');?>">delete</a></td>
                </tr>
                <?php endforeach;?>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="3">Total Products</td>
                    <td colspan="3">&euro; <?php echo $this->cart->format_number($this->cart->total());?></td>
                </tr>
                <tr>
                    <td colspan="3">Total Shipping</td>
                    <td colspan="3"></td>
                </tr>
                <tr>
                    <td colspan="3"></td>
                    <td colspan="3" style="padding:0;text-align:center;">
                        <p>TOTAL :</p>
                        <span class="tot">&euro; <?php echo $this->cart->format_number($this->cart->total());?></span>
                    </td>
                </tr>
            </tfoot>
        </table>
    </div>
    <?php endif;?> 
```

使用此代码，我想使用带有数组的复选框插入，并且我有超过 6 个复选框

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T03:12:48.007

好的，我自己解决了。。

我不知道产品名称中有特殊字符..

和我的耻辱..

不过还是谢谢你

# c# - 向 Visual Studio 属性窗口公开类属性

> ID：14976203
> 
> 赞同：3
> 
> 时间：2013-02-20T09:21:11.923
> 
> 标签：c#, visual-studio, visual-studio-extensions, visual-studio-sdk

我有一个带有 VSPackage 扩展的 Visual Studio 扩展项目`Microsoft.VisualStudio.Shell.Package`。

有这个类：

```
public class PropertyPageItem
    {
        private string _item1;
        private string _item2;

        public PropertyPageItem()
        {
            _item1 = "ITEM1";
            _item2 = "ITEM2";
        }

        [Description("Item1")]
        [Category("Item-Field")]
        public string Item1
        {
            get
            {
                return _item1;
            }
            set
            {
                _item1 = value;
            }
        }

        [Description("Item2")]
        [Category("Item-Field")]
        public string Item2
        {
            get
            {
                return _item2;
            }
            set
            {
                _item2 = value;
            }
        }
    } 
```

上面的类不是动态的（不考虑事件等），这是为了理解方法。

我们如何将此类链接/公开到 Visual Studio 属性窗口？在浏览解决方案资源管理器时，我们可以在该窗口中查看文件属性。目标是使用此窗口而不是创建另一个属性网格控件。

尝试按照此[链接](http://msdn.microsoft.com/en-us/library/vstudio/cc138529.aspx)上的说明进行操作，但它让我更加困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:08:43.777

经过一个小的研究，我想出了如何做到这一点。

按照[链接中的说明进行操作](http://msdn.microsoft.com/en-gb/library/vstudio/bb165403.aspx)

在该演练的第 6 步中，将“this”替换为“new PropertyPageItem()”

```
public override void OnToolWindowCreated()
{
    ArrayList listObjects = new ArrayList();
    listObjects.Add(new PropertyPageItem());
    SelectList(listObjects);
} 
```

一直到“向属性窗口公开属性”部分的第 7 步，目标已实现，PropertyPageItem 类中的属性被公开到 Visual Studio PropertyWindow。

希望这会有所帮助。

# actionscript-3 - 不能停止这个计时器

> ID：14976207
> 
> 赞同：0
> 
> 时间：2013-02-20T09:21:37.917
> 
> 标签：actionscript-3, flash

创建按钮并命名为“b”。创建动态文本并命名为“tampil”。运行它... 单击 b 按钮运行计时器，然后再次单击停止（但出错）。

以下脚本是我修改的项目的一部分。我的问题是，如何停止计时器？

```
import flash.events.MouseEvent;
var xx:Number = 1;
var waktux:Timer;
var i1:Number = 1;
var ab:Number = 1;
var lantaii:String = "lg";
b.addEventListener(MouseEvent.CLICK, stopp);
function stopp(e:MouseEvent)
{
    waktu(0,0,ab);
    if (ab==1)
    {
        ab = 0;
    }
    else
    {
        ab = 1;
    }
}
function waktu(e, d, cx)
{
    var waktux:Timer;
    var waktuy:Timer;
    function sayHello(f:TimerEvent):void
    {
        tampil.text = String(e);
        e = e + 1;
    }
    function sayHellow(e:TimerEvent):void
    {
        tampil.text = String(d);
        d = d + 1;
    }
    function sayHello2(f:TimerEvent):void
    {
        tampil.text = String(e);
        e = e + 1;
    }
    if (cx==1)
    {
        if (lantaii == "lg")
        {
            naek();
        }
        else
        {
            waktuy = new Timer(400,10);
            waktuy.addEventListener(TimerEvent.TIMER, sayHellow);
            waktuy.start();
            waktuy.addEventListener(TimerEvent.TIMER_COMPLETE, naek2);
        }
        function naek()
        {
            waktux = new Timer(400,10);
            waktux.addEventListener(TimerEvent.TIMER, sayHello);
            waktux.start();
        }
        function naek2(s:TimerEvent):void
        {
            waktux = new Timer(400,10);
            waktux.addEventListener(TimerEvent.TIMER, sayHello2);
            waktux.start();
        }
    }
    else
    {
        trace("nih masuk");
        waktux.stop();
        waktux.reset();
        waktuy.reset();
        waktux.removeEventListener(TimerEvent.TIMER, sayHello);
        waktux.removeEventListener(TimerEvent.TIMER, sayHello2);
        waktuy.removeEventListener(TimerEvent.TIMER, sayHellow);
        waktuy.removeEventListener(TimerEvent.TIMER_COMPLETE, naek2);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:58:05.453

我认为您在全局范围内重新定义 waktux 一个，在 waktu 函数中重新定义另一个。删除这些行之一

```
import flash.events.MouseEvent;
var xx:Number = 1;
var waktux:Timer; //<--------------------------- HERE
var i1:Number = 1;
var ab:Number = 1;
var lantaii:String = "lg";

function waktu(e, d, cx)
{
    var waktux:Timer; //<--------------------------- HERE
    var waktuy:Timer;
    function sayHello(f:TimerEvent):void
    {
        tampil.text = String(e);
        e = e + 1;
    }
    function sayHellow(e:TimerEvent):void
    {
        tampil.text = String(d);
        d = d + 1;
    }
    function sayHello2(f:TimerEvent):void
    {
        tampil.text = String(e);
        e = e + 1;
    }
    if (cx==1)
    {
        if (lantaii == "lg")
        {
            naek();
        }
        else
        {
            waktuy = new Timer(400,10);
            waktuy.addEventListener(TimerEvent.TIMER, sayHellow);
            waktuy.start();
            waktuy.addEventListener(TimerEvent.TIMER_COMPLETE, naek2);
        }
        function naek()
        {
            waktux = new Timer(400,10);
            waktux.addEventListener(TimerEvent.TIMER, sayHello);
            waktux.start();
        }
        function naek2(s:TimerEvent):void
        {
            waktux = new Timer(400,10);
            waktux.addEventListener(TimerEvent.TIMER, sayHello2);
            waktux.start();
        }
    }
    else
    {
        trace("nih masuk");
        waktux.stop();
        waktux.reset();
        waktuy.reset();
        waktux.removeEventListener(TimerEvent.TIMER, sayHello);
        waktux.removeEventListener(TimerEvent.TIMER, sayHello2);
        waktuy.removeEventListener(TimerEvent.TIMER, sayHellow);
        waktuy.removeEventListener(TimerEvent.TIMER_COMPLETE, naek2);
    }
} 
```

只是为了好玩

```
function stopp(e:MouseEvent)
{
    waktu(0,0,ab);
    ab = !ab;
} 
```

# ruby-on-rails - 如何在 ruby on rails 中以一种形式呈现多种形式？

> ID：14976208
> 
> 赞同：0
> 
> 时间：2013-02-20T09:21:40.147
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个静态页面和静态控制器。在页面中，我在四个类别中使用 Jquery UI Accordion。每个类别都有单独的控制器、模型和视图。我正在尝试将所有类别渲染到手风琴中并像单独一样工作。我遇到了一个问题，所以，我尝试在静态页面中创建一个表单并执行以下操作。但是在第一个选项卡中打开的所有表单。我想根据标签分别打开和保存表单。任何想法将不胜感激。谢谢

```
<div class="funding_form">
  <%= form_for(@funding_source, :remote => true) do |f| %>
    <fieldset>
      <legend>Funding Source</legend>
      <div class="control-group">
        <%= f.label :Source_name, 'Funding Source Name' %>
        <%= f.text_field :Source_name %>
      </div>
      <div class="action">
        <%= f.submit 'Save Source name', :class => 'funding_save', remote: true %> | <%= link_to 'Cancel', "#",  {:remote => true, :class => 'funding_cancel_button' } %>
      </div>
    </fieldset>
  <% end %>
</div>

<div class="packages_form">
  <%= form_for(@package, :remote => true) do |f| %>
    <fieldset>
      <legend>Packages</legend>
      <div class="control-group">
        <%= f.label :Package_name, 'Package Name' %>
        <%= f.text_field :Package_name %>
      </div>
      <div class="action">
        <%= f.submit 'Save Packages', :class => 'package_save', remote: true %> | <%= link_to 'Cancel', "#",  {:remote => true, :class => 'package_cancel_button' } %>
      </div>
    </fieldset>
  <% end %>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:07:05.397

你为什么不在选项卡的点击动作上放一个ajax请求，在控制器中调用一个动作。即在你的@package 控制器中有一个方法，当被调用时，它将呈现部分包的形式。然后您可以使用 ajax 请求调用它:)

例如，在您的控制器中，您可能希望呈现部分“表单”，您可以使用如下控制器方法：

```
def return_data
 @package = Package.find(params[:id])

 render partial "form"
end 
```

您可以使用 ajax 请求调用它，例如：

```
 $.ajax({
  url: '/your_path/return_data',
  dataType: 'html',
  success: function(data){
    console.log(data)
  },
  error: function(data){
    console.log(data)
  }); 
```

然后你可以显示它，也许将部分分配给一个 div 并在每次发出 ajax 请求时覆盖它，所以只显示一个:)

# r - ROW_NUMBER() OVER (PARTITION BY nick ORDER BY p_time) 在 R

> ID：14976210
> 
> 赞同：0
> 
> 时间：2013-02-20T09:21:46.280
> 
> 标签：r, postgresql

有

```
x=data.frame(nick=c('a','a','b','b','b','c'), p_time=1:6)
  nick p_time
1    a      1
2    a      2
3    b      3
4    b      4
5    b      5
6    c      6 
```

我怎么能得到这个：</p>

```
 nick p_time flag
1    a      1    1
2    a      2    2
3    b      3    1
4    b      4    2
5    b      5    3
6    c      6    1 
```

我使用 pgsql`ROW_NUMBER() OVER (PARTITION BY nick ORDER BY p_time)`来获取它，但现在只需要使用 R。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-02-01T10:52:44.893

尝试 dplyr::row_number() 函数

```
x %>% 
  group_by(nick) %>%
  mutate(flag = row_number())

# A tibble: 6 x 3
# Groups: nick [3]
  nick  p_time  flag
  <fct>  <int> <int>
1 a          1     1
2 a          2     2
3 b          3     1
4 b          4     2
5 b          5     3
6 c          6     1 
```

更多信息[在这里](http://dplyr.tidyverse.org/reference/ranking.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:32:08.020

看起来您只想按组生成排序的“序列号”，其中您的组是“昵称”列。如果是这种情况，您可以使用`ave`and `seq_along`within `within`：

```
within(x, {
  flag <- ave(as.character(nick), nick, FUN = seq_along)
})
#   nick p_time flag
# 1    a      1    1
# 2    a      2    2
# 3    b      3    1
# 4    b      4    2
# 5    b      5    3
# 6    c      6    1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:30:47.153

试试这个

```
x$flag<-as.vector(unlist(tapply(x$p_time,x$nick,FUN=function(x){1:length(x)}))); 
```

# c++ - C++ 巧克力拼图

> ID：14976211
> 
> 赞同：-5
> 
> 时间：2013-02-20T09:21:50.350
> 
> 标签：c++, algorithm, puzzle

假设我有 N 块巧克力，必须按照它们到达的顺序准确地装入 P 盒中。每个巧克力也有一定数量的卡路里 X，每个盒子的容量 K 必须小于或等于 3*sum(x1, x2, ..., xn) + max(x1, x2, ..., xn)^2 - min(x1, x2, ..., xn)^2。

在任务中，我为每种巧克力分配了 N、P 和 X，我必须找出可能的最低 K。有人能帮我解决这个问题吗（不是为了一些关于问题的提示而寻找解决方案）？

示例：N = 8, P = 3, X = {1, 4, 5, 6, 3, 2, 5, 3}

```
K for first three chocolates = 3*(1+4+5) + 5^2 - 1^2 = 54
K for next two chocolates = 3*(6+3) + 6^2 - 3^2 = 54
K for last three chocolates = 3*(2+5+3) + 5^2 - 2^2  = 51

Lowest possible K = 54 
```

因此，目标是使用具有最低 K 的 P 个框找到最佳组合。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:26:57.147

这是我在Java中解决这个问题的方法：

```
import java.util.HashMap;
import java.util.Map;
import java.util.Random;

public class ChocolatePuzzle {
    private static final Map <String, Integer> solutions =
        new HashMap <String, Integer> ();

    private static final Map <String, Integer> bestMoves =
            new HashMap <String, Integer> ();

    private static int [] x;

    private static int k (int from, int to)
    {
        int sum = x [from];
        int max = x [from];
        int min = x [from];
        for (int i = from + 1; i < to; i++)
        {
            sum += x [i];
            max = Math.max (max, x [i]);
            min = Math.min (min, x [i]);
        }

        return sum * 3 + max * max - min * min;
    }

    public static int solve (int n, int p)
    {
        String signature = n + "," + p;
        Integer solution = solutions.get (signature);
        if (solution == null)
        {
            solution = Integer.valueOf (doSolve (n, p, signature));
            solutions.put (signature, solution);
        }
        return solution.intValue ();
    }

    public static int doSolve (int n, int p, String signature)
    {
        if (p == 1)
        {
            bestMoves.put (signature, Integer.valueOf (x.length - n));
            return k (n, x.length);
        }
        else
        {
            int result = Integer.MAX_VALUE;
            int bestMove = 0;

            int maxI = x.length - n - p + 1;
            for (int i = 1; i <= maxI; i++)
            {
                int k = Math.max (k (n, n + i), solve (n + i, p - 1));

                if (k < result)
                {
                    result = k;
                    bestMove = i;
                }
            }

            bestMoves.put (signature, Integer.valueOf (bestMove));

            return result;
        }
    }

    public static void main(String[] args) {
        int n = 20;
        int p = 5;
        x = new int [n];

        Random r = new Random ();
        for (int i = 0; i < n; i++)
            x [i] = r.nextInt (9) + 1;

        System.out.println("N: " + n);
        System.out.println("P: " + p);
        System.out.print("X: {");
        for (int i = 0; i < n; i++)
        {
            if (i > 0) System.out.print (", ");
            System.out.print (x [i]);
        }
        System.out.println("}");

        System.out.println();

        int k = solve (0, p);

        int o = 0;
        for (int i = p; i > 0; i--)
        {
            int m = bestMoves.get (o + "," + i);

            System.out.print ("{");
            for (int j = 0; j < m; j++)
            {
                if (j > 0)
                    System.out.print (", ");
                System.out.print (x [o + j]);
            }
            System.out.print ("} (k: ");
            System.out.print(k (o, o + m));
            System.out.println (")");

            o += m;
        }

        System.out.println("min(k): " + k);
    }
} 
```

可能您可以在此代码中找到一些有用的提示。

样本输入：

```
N: 20
P: 5
X: {1, 7, 6, 6, 5, 5, 7, 9, 1, 3, 9, 5, 3, 7, 9, 1, 4, 2, 4, 8} 
```

样本输出：

```
{1, 7, 6, 6} (k: 108)
{5, 5, 7, 9} (k: 134)
{1, 3, 9, 5} (k: 134)
{3, 7, 9} (k: 129)
{1, 4, 2, 4, 8} (k: 120)
min(k): 134 
```

# silverlight - Silverlight 4：使用 Calendar 或 DatePicker 时的调度程序错误

> ID：14976225
> 
> 赞同：2
> 
> 时间：2013-02-20T09:22:26.387
> 
> 标签：silverlight, calendar, datepicker

我在这个网站上阅读了很多好的答案，所以我从来不用问什么。现在我有一个问题，我找不到答案。我正在编写一个 Windows 应用程序 für 7.1 并尝试使用日历控件，我不太关心它的日历或 DatePicker。

但是每当我在那里更改值时，我都会收到以下错误：

“这种类型的 Collection 不支持从不同于 Dispatcher 线程的线程更改其 SourceCollection。”

由于我是初学者，我对 Threads 没有做任何花哨的事情，而且我在网络上也没有发现任何关于这个错误的信息，所以我想，这一定是我的环境中的一个独特错误。

有谁知道，这个错误可能来自哪里？

感谢您的回复

穆勒·马蒂亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T08:32:51.313

您应该使用 SDK 命名空间中的 DatePicker，

[http://samples.msdn.microsoft.com/silverlight/samplebrowser/#/?sref=System.Windows.Controls.Calendar](http://samples.msdn.microsoft.com/silverlight/samplebrowser/#/?sref=System.Windows.Controls.Calendar)

我还可以建议 Telerik 的 silverlight 控件 [http://demos.telerik.com/silverlight/](http://demos.telerik.com/silverlight/)

```
<UserControl  xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk" x:Class="CalendarExample.Page"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
FontFamily="Trebuchet MS" FontSize="11"
Width="600" Height="750">

<StackPanel x:Name="LayoutRoot" Background="White">
    <StackPanel Orientation="Horizontal" Margin="5" >
    <!-- A basic Calendar. -->
    <TextBlock  Width="100" 
               Text="Calendar with date ranges defined:" TextWrapping="Wrap" Margin="5" />
    <sdk:Calendar x:Name="cal" />

    <!-- A Calendar does not highlight today's date. -->
        <TextBlock  Width="100" 
               Text="Calendar that does not highlight today's date:" TextWrapping="Wrap" Margin="5"/>
        <sdk:Calendar x:Name="cal2" Canvas.Left="270" Canvas.Top="100" 
                    IsTodayHighlighted="false" />
    </StackPanel>
    <!-- Two DatePicker controls, one using the default Short date format -->
    <!-- and the other using the Long date format. -->
    <StackPanel Orientation="Horizontal" >
    <TextBlock Width="200" Margin="5" 
               Text="DatePicker with Short date format and Calendar event handlers:" TextWrapping="Wrap" />
    <sdk:DatePicker x:Name="dp1" Height="20" Width="200" />
    </StackPanel>
    <StackPanel Orientation="Horizontal" >
    <TextBlock Width="200" Margin="5"
               Text="DatePicker with Long date format and DateSelected event handler:" TextWrapping="Wrap" />
    <sdk:DatePicker Height="20" x:Name="dp2" SelectedDateFormat="Long" Width="200"/>
    </StackPanel>
    <!-- Output TextBlock -->
    <TextBlock x:Name="text1" HorizontalAlignment="Left" Height="40" Width="350" Margin="5" />

    <!-- A Calendar to demonstrate multiple selection. -->
    <StackPanel Orientation="Horizontal" >
    <TextBlock  Width="200" Margin="5"
               Text="Calendar with multiple selections and blackout dates:" TextWrapping="Wrap" />
    <sdk:Calendar x:Name="cal3" />
    </StackPanel>
 </StackPanel> 
```

# java - 7165X786大小的大图无法在真机显示（平板）

> ID：14976230
> 
> 赞同：0
> 
> 时间：2013-02-20T09:22:45.570
> 
> 标签：java, android, imageview, large-files

我无法将大图像显示到android中。我试图通过这个[custom-scrollable-image-view](https://sites.google.com/site/androidhowto/how-to-1/custom-scrollable-image-view)来完成这项工作。

我在课堂上使用了完整视图，并在其中使用了 7165*786 大小的图像。它只有 1.11MB 的图像。我可以在 bluestack 中运行此代码并查看其中的图像，但无法在真实设备中加载。

```
bmLargeImage = BitmapFactory.decodeResource(getResources(),
                R.drawable.imagewithout);
bmlotusImage1 = BitmapFactory.decodeResource(getResources(),
                R.drawable.lotus); 
```

我在 onDraw 方法中使用相同的画布，如下所示。

```
canvas.drawBitmap(bmLargeImage, scrollRect, displayRect, paint);

canvas.drawBitmap(bmlotusImage1, 45 - newScrollRectX,
                255 - newScrollRectY, paint); 
```

我无法在我的真实设备中显示 bmlargeImage 我可以在设备上看到莲花图像，但看不到大图像。

我是否必须解码或缩放图像或其他任何东西才能使其在真实设备中显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T07:58:14.407

我得到了不在真实设备中显示图像的解决方案，问题很简单。

我刚刚删除了目标 sdk ai 在 web 服务中出现错误。它也开始向我的真实设备显示图像，并且我得到了将图像显示到屏幕的解决方案，如下所示。

```
private static Bitmap ShrinkBitmap(String backgroundimage, int width,
        int height) {

    // TODO Auto-generated method stub
    BitmapFactory.Options bmpFactoryOptions = new BitmapFactory.Options();
    bmpFactoryOptions.inJustDecodeBounds = true;
    Bitmap bitmap = BitmapFactory.decodeFile(backgroundimage,
            bmpFactoryOptions);

    int heightRatio = (int) Math.ceil(bmpFactoryOptions.outHeight
            / (float) height);
    int widthRatio = (int) Math.ceil(bmpFactoryOptions.outWidth
            / (float) width);

    if (heightRatio > 1 || widthRatio > 1) {
        if (heightRatio > widthRatio) {
            bmpFactoryOptions.inSampleSize = heightRatio;
        } else {
            bmpFactoryOptions.inSampleSize = widthRatio;
        }
    }

    bmpFactoryOptions.inJustDecodeBounds = false;
    bitmap = BitmapFactory.decodeFile(backgroundimage, bmpFactoryOptions);
    return bitmap;

} 
```

我已将图像宽度和高度作为此方法中的参数传递。

```
bmLargeImage = ShrinkBitmap(backgroundimage, 7165, 786); 
```

# php - PHP 替代语法和字符串/数字比较

> ID：14976236
> 
> 赞同：0
> 
> 时间：2013-02-20T09:22:57.000
> 
> 标签：php, string, syntax, numbers

我可以摆脱这个。正常语法似乎有效，否则替代语法似乎无法按预期工作。

```
<?php
$num =  "abcdefghi";

function checkNum($n) {

    if(!is_numeric($n))
    {
        return "not numeric";
    } else
    {
        if($n<0)
        {
            return "less than zero";
        } else
        {
            return "greater then or equal to zero";
        }
    }
}

echo checkNum($num); # echoes "not numeric";

function checkNum2($n)
{
    $r = !is_numeric($n) ? "not numeric" : $n<0 ? "less than zero" : "greater then or equal to zero";
    return $r;
}

echo checkNum2($num); # echoes "less than zero"
?> 
```

所以有什么问题？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:24:26.653

使用它，你只是错过`()`了你的功能。

```
function checkNum2($n)
{
    $r = !is_numeric($n) ? "not numeric" : ($n<0 ? "less than zero" : "greater then or equal to zero");
    return $r;
}

echo checkNum2($num); # echoes "not numeric"; 
```

工作示例[http://codepad.viper-7.com/DVvQaC](http://codepad.viper-7.com/DVvQaC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:26:54.330

试试这个 ：

```
$r = (!is_numeric($n)) ? "not numeric" : (($n<0) ? "less than zero" : "greater then or equal to zero"); 
```

# javascript - 如何在 AngularJS 指令的模板中使用 ng-repeat 和先前声明的函数？

> ID：14976238
> 
> 赞同：0
> 
> 时间：2013-02-20T09:23:01.990
> 
> 标签：javascript, templates, angularjs, angularjs-directive

使用 AngularJS 我正在尝试创建一个指令来模板化表单中的问题。对于特定类型的问题，我想为特定范围内的每个数字创建单选按钮。我有一个外部函数，它返回一个给定下限和上限的数字数组。

如何使用这个外部函数和 ng-repeat 来模板化这类问题？这是我到目前为止尝试过的代码......

HTML：

```
<qtnrange qtn-variable="cxnTestVarA" first-num="1" last-num="5">
This is a test question. Pick a number between 1 and 5.</qtnrange>
<hr>
You picked {{cxnTestVarA}}. 
```

JS：

```
var module = angular.module('app', [])
.directive('qtnrange', function() {
return {
    scope: {
        qtnVariable: '=',
        firstNum: '=',
        lastNum: '=',
        bounds: '&range',
    },
    template:
        '<div class=question>' + 
            '<label ng-transclude></label>' +
            '<label class="radio inline" ng-repeat="iter in bounds(firstNum, lastNum)"><input type="radio" value="{{iter}}" ng-model="qtnVariable">{{iter}} </label>' +
        '<hr></div>',
    restrict: 'E', // must be an HTML element
    transclude: true,
    replace: true,
};
});

var range = function(start, end, step) {
    ... function that returns an array []
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T16:01:38.870

这是您的 jsFiddle 的一个工作示例：http: [//jsfiddle.net/daEmw/3/](http://jsfiddle.net/daEmw/3/)

我所做的是将范围函数移动到示波器上，并在无线电输入上使用 ng-click，而不是将它们与 ng-model 绑定。

基本上，改变这个：

```
module.directive('qtnrange', function() {
    return {
        scope: {
            qtnVariable: '=',
            firstNum: '=',
            lastNum: '=',
            bounds: '&range',
        },
        template:
            '<div class=question>' + 
                '<label ng-transclude></label>' +
                '<label class="radio inline" ng-repeat="iter in bounds(firstNum, lastNum)"><input type="radio" value="{{iter}}" ng-model="qtnVariable">{{iter}} </label>' +
            '<hr></div>',
        restrict: 'E', // must be an HTML element
        transclude: true,
        replace: true,
    };
});

var range = function() {

} 
```

进入这个：

```
module.directive('qtnrange', function() {
    return {
        scope: {
            qtnVariable: '=',
            firstNum: '=',
            lastNum: '='
        },
        template:
            '<div class=question>' + 
                '<label ng-transclude></label>' +
                '<label class="radio inline" ng-repeat="iter in range(firstNum, lastNum)"><input type="radio" value="{{iter}}" ng-click="setNum(item)">{{iter}} </label>' +
            '<hr></div>',
        restrict: 'E', // must be an HTML element
        transclude: true,
        replace: true,
        controller: function($scope) {
            $scope.setNum = function(num) {
                $scope.qtnVariable = num;
            }
            $scope.range = function() {
                // ...
            }
        }
    };
}); 
```

# .net - 如何在我的本地机器上模拟 CORS？

> ID：14976241
> 
> 赞同：14
> 
> 时间：2013-02-20T09:23:06.930
> 
> 标签：.net, wcf, iis-7, wcf-security, cors

是否有可能在 IIS7 中创建一个网站，以某种方式看起来它位于不同的域中，以便从该站点的一个页面中，我可以测试对本地主机中 WCF 服务的跨域资源共享调用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T09:39:24.027

您可以将任何您喜欢的域名添加到您的主机文件 ( `%windir%\System32\Drivers\etc\hosts`) 并将它们映射回`127.0.0.1`. 然后，对该域的任何请求都将发送到您的本地计算机。

就 CORS 而言，您添加的每个域名都应单独处理。如果您使用的是 Windows Server SKU，您甚至可以将 IIS 配置为使用多个站点，并将其配置为检查主机标头以确定哪个站点响应每个域的请求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T09:42:28.733

您可以在 C:\windows\system32\drivers\etc\ 中修改主机文件

添加如下条目：

```
127.0.0.1    your domain name 
```

然后在 iis 中为“您的域名”在您的网站上添加一个主机名

# objective-c - iPhone：如何使用 xmpp 框架发送图像和文件？

> ID：14976243
> 
> 赞同：2
> 
> 时间：2013-02-20T09:23:18.057
> 
> 标签：objective-c, cocoa, xmppframework

我可以使用 xmppframework 进行一对一的聊天，但现在我想将图像和文件发送到聊天中。

我正在尝试使用转插座，但无法获得该功能，因为这总是说“转连接失败！”

请帮助我摆脱这个问题并能够发送图像和文件。

谢谢，

# android - ListView 项中的图像视图

> ID：14976244
> 
> 赞同：-1
> 
> 时间：2013-02-20T09:23:18.887
> 
> 标签：android, listview

我有一个列表视图。ListView 的每一行/项目包含 2 个视图，一个 **TextView**和一个**ImageView**。我希望只有**ImageView 可以是可聚焦和可点击的，而 textView 不应该是可聚焦和可点击**的。

每个行.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"

android:orientation="horizontal" >

<TextView
    android:id="@+id/textViewEachBlockedKeyword"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="Keyword"
    android:layout_marginTop="8dp"
    android:layout_marginBottom="8dp"
    android:layout_marginLeft="5dp"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ImageView
    android:id="@+id/imageViewBlockKeywordDelete"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="3.1"
    android:layout_marginLeft="2dp"
    android:layout_marginTop="8dp"
    android:layout_marginBottom="8dp"

    android:src="@drawable/delete" />

</LinearLayout> 
```

这个怎么做 ？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:32:11.827

像这样修改您的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"

android:orientation="horizontal" >

<TextView
    android:id="@+id/textViewEachBlockedKeyword"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="Keyword"
    android:layout_marginTop="8dp"
    android:layout_marginBottom="8dp"
    android:layout_marginLeft="5dp"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:clickable="false"
    android:focusable="false" />

<ImageView
    android:id="@+id/imageViewBlockKeywordDelete"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="3.1"
    android:layout_marginLeft="2dp"
    android:layout_marginTop="8dp"
    android:layout_marginBottom="8dp"
    android:src="@drawable/delete"
    android:clickable="true"
    android:focusable="true" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:33:20.513

```
 android:focusable="false"
   android:focusableInTouchMode="false"
   android:clickable="false" 
```

将此添加到您的 textview 标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:34:05.330

试试下面的代码，只需将 imageview 更改为 imagebutton

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"

android:orientation="horizontal" >

<TextView
    android:id="@+id/textViewEachBlockedKeyword"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="Keyword"
    android:layout_marginTop="8dp"
    android:layout_marginBottom="8dp"
    android:layout_marginLeft="5dp"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ImageButton
    android:id="@+id/imageViewBlockKeywordDelete"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="3.1"
    android:layout_marginLeft="2dp"
    android:layout_marginTop="8dp"
    android:layout_marginBottom="8dp"
    android:src="@drawable/delete" />

</LinearLayout> 
```

# javascript - 如何计算 Json 中的不同值

> ID：14976245
> 
> 赞同：1
> 
> 时间：2013-02-20T09:23:28.030
> 
> 标签：javascript, jquery, ajax, json

json文件

```
{"people":[{"Name":"Ray Parker","Email":"luctus.et.ultrices@natoque.ca","State":"Wyoming","Country":"Tuvalu","Martial Status":"Divorced","Department Name":"Tech Support","Company Name":"Borland","Title":"Dr.","Gender":"Male"},
{"Name":"Davis Hooper","Email":"et.libero.Proin@egetvarius.org","State":"Nunavut","Country":"Bangladesh","Martial Status":"Divorced","Department Name":"Public Relations","Company Name":"Cakewalk","Title":"Mr.","Gender":"Female"}, ...... and so on 
```

我喜欢用 Country 的不同值和那个国家的人数来制作一个 json 对象。

我试过代码

```
 $(document).ready(function() {

    var data = $.ajax({
        url: "Data_prop.json",
        dataType: "json",
        async: false
    }).responseText;

    var unique = {};
    var param = "Country"
    $.each(data.people, function() {
        if (!unique[this[param]])
            unique[this[param]] = [];   
        unique[this[param]].push(this);
    });

    for(var d in unique) {
      alert(d);
    }

        }); 
```

我在控制台中遇到的错误

```
TypeError: a is undefined
https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
Line 2 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:28:46.510

尝试

```
function(data)
{
    var variables = {};
    var param = "Country"
    $.each(data.people, function()
    {
        if (!variables[this[param]])
            variables[this[param]] = [];    
        variables[this[param]].push(this);
    });

    for(var d in variables) {
        // add d to array here
        // or do something with d
        // variables[d] is the array of people
    }
} 
```

# javascript - 检查 LatLong 是否在多边形内

> ID：14976250
> 
> 赞同：-1
> 
> 时间：2013-02-20T09:23:42.717
> 
> 标签：javascript, google-maps-api-3, openlayers

我有一个人的纬度和经度，我需要找到这个人在特定多边形的内部或外部。因为我使用 KML 矢量叠加在 openlayers 谷歌地图上显示区域。请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:45:35.743

```
In your init: function()

//Awesome design
style = { styleMap: new OpenLayers.StyleMap({ "temporary": style})};

//Make the layer        
this.selectLayer = new OpenLayers.Layer.Vector("draw_polygon", style);

//Make the control
this.selectControl = new OpenLayers.Control.DrawFeature(this.selectLayer, OpenLayers.Handler.Polygon, {featureAdded: this.toggleDraw});

whatever.map.addControl(this.selectControl);

Then:

toggleDraw: function(feature) {
//Do some magic with finding if the uses is inside (example) search_options.viewModel.searchForPerson(feature);
} 
```

恐怕我不能给你完整的代码，但你明白了。

# json - 没有评论数组的 Facebook Graph API 收件箱消息

> ID：14976253
> 
> 赞同：1
> 
> 时间：2013-02-20T09:23:57.170
> 
> 标签：json, facebook-graph-api

Graph API 中的一些收件箱消息没有评论数组。评论是线程中的实际消息。API 用户根本无法使用这些消息吗？

例子：

```
{
    "unread": 0,
    "to": {
        "data": [
            {
                "id": "666397291",
                "name": "Miguel Paraz"
            },
            {
                "id": "xxxxxx",
                "name": "xxxxxx"
            }
        ]
    },
    "id": "56002435955",
    "updated_time": "2013-01-19T06:33:59+0000",
    "unseen": 0
} 
```

当我在 Facebook 网站或移动应用程序中打开收件箱时，评论就在那里。

当我尝试专门检索此线程时，我得到：

```
{
  "error": {
    "message": "Unsupported get request.",
    "type": "GraphMethodException",
    "code": 100
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:13:32.383

我遇到了同样的问题，而且我找到了解决这个问题的唯一方法——使用 FQL 多查询而不是 Graph API。使用此查询：

```
 {
    'messages': 'SELECT body,created_time, author_id  FROM message WHERE thread_id IN 
    (SELECT thread_id FROM thread WHERE folder_id = 0) and author_id != me() ORDER BY created_time DESC',
    'names': 'SELECT uid, name FROM user WHERE uid IN (SELECT author_id FROM #messages)' 
    } 
```

返回结果，如下所示：

```
 {
      "data": [
        {
          "name": "messages", 
          "fql_result_set": [
            {
              "body": "body of message", 
              "created_time": 1344741084, 
              "author_id": 0
            },...
          ]
        }, 
        {
          "name": "names", 
          "fql_result_set": [
            {
              "uid": "id of user from first query", 
              "name": "user_name"
            },...
          ]
        }
      ]
    } 
```

然后我首先将第二个查询的结果解析为hashmap，然后将第一个查询的结果解析为我的数据结构，用hashmap中的名称替换author_id。

如果您需要有关用户或消息的其他信息 - 只需在 SELECT 查询语句中添加列。

希望这可以帮助。

# c# - 在 bin 目录中包含框架 XML 文档文件

> ID：14976254
> 
> 赞同：1
> 
> 时间：2013-02-20T09:23:57.907
> 
> 标签：c#, asp.net, .net, msbuild

我的 asp.net 站点使用它自己的 XML 文档文件来生成帮助页面。这一切都很好，我正在基于`<see>`and生成页面之间的链接`<seealso>`，以及方法的参数类型。所有链接都可以正常工作，前提是链接到的类型在我的 bin 文件夹中也有 XML 文件（这是我正在搜索的唯一位置）。

对于 .NET 框架类型，有可用*的*XML 文件，位于`%ProgramFiles(x86)%\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5`. 但这些仅存在于开发人员/构建机器上 - 它们不会（据我所知）出现在最终托管该项目的 Web 服务器上。

如果可以将 XML 文档文件（对于我引用的框架程序集）`bin`作为我们构建过程的一部分复制到目录中，那将会很方便。有什么巧妙的方法可以做到这一点吗？我可以批量复制所有 XML 文件，但是有很多我们*没有*引用的框架程序集，我不想过多地增加部署。

# php - 如何从类访问配置文件中的数组

> ID：14976255
> 
> 赞同：0
> 
> 时间：2013-02-20T09:23:58.033
> 
> 标签：php

```
require_once($_SERVER["DOCUMENT_ROOT"] . 'config.php');

class stuff{

    public $dhb;

    public function __construct(){
        $dbh = new PDO('mysql:host=' . $database['host'] . ';dbname=' . $database['dbname'] . '', $database['user'], $database['password']);
    }
} 
```

在上面的示例中，我收到此错误：

> 注意：未定义变量：第 11 行 C:\wamp\www\career\inc\controller.php 中的数据库

如何访问我拥有的数组`config.php`？它包含`$database`数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:27:18.757

更好的是注入信息：

```
class stuff{

    public $dhb;

    public function __construct($database){
        $dbh = new PDO('mysql:host=' . $database['host'] . ';dbname=' . $database['dbname'] . '', $database['user'], $database['password']);
    }
}

require_once($_SERVER["DOCUMENT_ROOT"] . 'config.php');
$stuff = new stuff($database); // really hope this is a fake name 
```

或者甚至更好的是直接传递数据库实例：

```
class stuff{

    public $dhb;

    public function __construct($dbh){
        $this->dbh = $dbh;
    }
}

require_once($_SERVER["DOCUMENT_ROOT"] . 'config.php');
$dbh = new PDO('mysql:host=' . $database['host'] . ';dbname=' . $database['dbname'] . '', $database['user'], $database['password']);
$stuff = new stuff($dbh); // really hope this is a fake name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:47:01.810

PeeHaa 所说的站得住脚。另一种方法是为您的配置选项使用[单例](http://en.wikipedia.org/wiki/Singleton_pattern)类。

如果您仍想按照自己的方式进行操作，我假设 $database 是全局的，因此您的构造函数应该是：

```
public function __construct(){
        global $database;
        $dbh = new PDO('mysql:host=' . $database['host'] . ';dbname=' . $database['dbname'] . '', $database['user'], $database['password']);
    } 
```

# android - 选择性静音模式

> ID：14976257
> 
> 赞同：2
> 
> 时间：2013-02-20T09:24:05.133
> 
> 标签：android

我开发了一个应用程序，即使手机处于静音模式，它也会有选择地为某些号码响铃。我编写了代码，让它在广播接收器中更响亮。

广播接收器是

```
 AudioManager am = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);

     switch (am.getRingerMode()) {
         case AudioManager.RINGER_MODE_SILENT:
             Log.i("MyApp","Silent mode");
             profileStatus = 1;
             break;
         case AudioManager.RINGER_MODE_VIBRATE:
             Log.i("MyApp","Vibrate mode");
             break;
         case AudioManager.RINGER_MODE_NORMAL:
             Log.i("MyApp","Normal mode");
             profileStatus= 2;
             break;
     }
    System.out.println("The Profile Status"+profileStatus);
    System.out.println("The Old Profile Status"+oldProfileStatus);
    System.out.println("The Count = "+count  );

  if(profileStatus==1)
  {
        System.out.println("ProfileStatus"+profileStatus);

     OpenHelper db = new OpenHelper(context);
     //Getting Data From The DataBase

     CONTACT_DATA = db.Contact_Records();

     if (CONTACT_DATA.size() > 0)
     {
       //Log.e("ARRAY", "not null"); 

       for(int i =0;i<CONTACT_DATA.size();i++)
       {
           HashMap<String, String> map = CONTACT_DATA.get(i); 
           phone_number     =  map.get("phone_number"); 
       }
     }

         Bundle bundle = intent.getExtras();
         final AudioManager mobilemode = (AudioManager)context.getSystemService(Context.AUDIO_SERVICE);
         if(null == bundle)
                 return;

         Log.i("IncomingCallReceiver",bundle.toString());

         String state = bundle.getString(TelephonyManager.EXTRA_STATE);

         Log.i("IncomingCallReceiver","State: "+ state);
         if(state.equals("IDLE"))
         {

             System.out.println("THE STATE IS IDLE");
             mobilemode.setRingerMode(AudioManager.RINGER_MODE_SILENT);

         }

         if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
         {
                 String phonenumber = bundle.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);        
                 Log.i("IncomingCallReceiver","Incomng Number:from receiver------------------ " + phonenumber);
                 String info = "Detect Calls sample application\nIncoming number: " + phonenumber;

                 AudioManager maudio=(AudioManager)context.getSystemService(context.AUDIO_SERVICE);

                 bundle = intent.getExtras();
                 this.context = context;

                 if(null == bundle)
                         return;

                 state = bundle.getString(TelephonyManager.EXTRA_STATE);

                 if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_RINGING))
                 {
                         check();
                         PhoneNumber = bundle.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);

                           for(int i =0;i<CONTACT_DATA.size();i++)
                           {
                               HashMap<String, String> map = CONTACT_DATA.get(i); 
                               phone_number     =  map.get("phone_number"); 
                                 if (PhoneNumber.equals(phone_number)) {
                                }
                            if((PhoneNumber.equals(phone_number)))
                            {
                                makeitNormal();
                                maudio.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
                                oldProfileStatus = profileStatus;
                                System.out.println("The Profile Status==="+oldProfileStatus);
                                count=1;
                            }
                           }

                 }
                 if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_OFFHOOK))
                 {
                     makeItSilent();
                     mobilemode.setRingerMode(AudioManager.RINGER_MODE_SILENT);
                 }

                 if(state.equalsIgnoreCase(TelephonyManager.EXTRA_STATE_IDLE))
                 {
                     makeItSilent();
                     mobilemode.setRingerMode(AudioManager.RINGER_MODE_SILENT);

                 } 
```

//

```
 }
         }
  else
  {
      System.out.println("The System  Is In Normal Mode ");
      count=0;
  }
 }
 private void check() {
      // TODO Auto-generated method stub
      AudioManager maudio=(AudioManager)context.getSystemService(context.AUDIO_SERVICE);
      ringerMode=maudio.getRingerMode();

    }

    private void makeitNormal() {
      // TODO Auto-generated method stub

      AudioManager maudio=(AudioManager)context.getSystemService(context.AUDIO_SERVICE);
      maudio.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
    }

    private void makeItSilent() {
      // TODO Auto-generated method stub
      AudioManager maudio=(AudioManager)context.getSystemService(context.AUDIO_SERVICE);
      int ringer=maudio.getRingerMode();
      if (ringerMode==AudioManager.RINGER_MODE_SILENT){

          maudio.setRingerMode(AudioManager.RINGER_MODE_SILENT);

      }else if(ringerMode==AudioManager.RINGER_MODE_NORMAL){
          maudio.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
      }
      else if(ringerMode==AudioManager.RINGER_MODE_VIBRATE){
          maudio.setRingerMode(AudioManager.RINGER_MODE_VIBRATE);
      }

    }

    public void onAccuracyChanged(Sensor arg0, int arg1) {
      // TODO Auto-generated method stub
    }

    public void onSensorChanged(SensorEvent event) {
      // TODO Auto-generated method stub
    } 
```

我面临的问题是 1）它在安装后第一次没有响铃。之后它完美地工作 2）它不能在 HTC 手机中工作，但它在三星中工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T15:59:52.160

您的 BroadcastReceiver 做的太多了。它的生命周期仅与它的 onReceive() 方法一样长，因此您不会获得要放入其中的所有功能。尝试将您的音量操作代码移动到服务中，并使用广播接收器作为简单的代理来告诉服务何时来电。您通常应该避免在 BroadcastReceiver 的上下文中进行繁重的操作。

此外，仅调用 setRingerMode(AudioManager.RINGER_MODE_NORMAL) 并不总是足以取消铃声。您还需要调用 setStreamMute(AudioManager.STREAM_RING, false) 和 setStreamVolume(AudioManager.STREAM_RING, someAudibleVolume, 0)。在许多设备上，铃声模式可以是“正常”，而铃声音量是“0”。

顺便说一句，我写了一个与您描述的非常相似的应用程序，并祝您好运:)。当您尝试一致地操纵铃声音量时，您会看到 Android 设备生态系统中最严重的碎片化。例如，在三星 Galaxy Nexus 上，您可以在来电开始后轻松覆盖和控制音量。然而，在 Galaxy S3 上，铃声音量会在来电时忽略更改音量的尝试，并且需要一些巧妙的（读作“hackish”）变通方法。

# ios - 在 iOS 设备上使用 GWT RequestFactory

> ID：14976262
> 
> 赞同：3
> 
> 时间：2013-02-20T09:24:13.510
> 
> 标签：ios, google-app-engine, gwt, requestfactory, iphone-web-app

Android 应用程序可以使用 RequestFactories 访问来自 GWT 应用程序的数据。那是一个非常简单和伟大的解决方案。有关详细信息，请参阅[http://code.google.com/p/cloud-tasks-io/](http://code.google.com/p/cloud-tasks-io/)。

我的问题：

*   有没有办法在 iOS 设备上使用 RequestFactories？有没有
*   可以在 iOS 项目中实现的库/框架？

最亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T18:50:19.797

AFAIK 没有任何开源库可以在 ios 项目中使用 RequestFactory。

您可以做的是开发一个标准的 gwt 应用程序并将其与 phonegap aka [cordova](http://cordova.apache.org/)打包。

我在我的应用程序中使用 gwt + [mgwt](http://www.m-gwt.com/) + [gwtphonegap](http://code.google.com/p/gwt-phonegap/)并且它们运行得很好。

# highstock - X 轴标签将时间与日期混合在一起

> ID：14976271
> 
> 赞同：1
> 
> 时间：2013-02-20T09:24:36.790
> 
> 标签：highstock

我的日期时间轴显然有点困惑。我正在显示一周间隔的图表，标签有时会显示如下内容：

> 16:00 - 14.02。- 15.02。- 19.02。- 20:00

有没有办法告诉轴坚持一种类型的标签而不是混合它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:57:48.777

您可以设置 tickInterval [http://api.highcharts.com/highstock#xAxis.tickInterval](http://api.highcharts.com/highstock#xAxis.tickInterval)或定义时间标签[http://api.highcharts.com/highstock#xAxis.dateTimeLabelFormats](http://api.highcharts.com/highstock#xAxis.dateTimeLabelFormats)

# c# - 使用 Visual Studio 2010 创建“最小部署包”

> ID：14976277
> 
> 赞同：0
> 
> 时间：2013-02-20T09:24:59.957
> 
> 标签：c#, visual-studio-2010, deployment, release

当我在 Visual Studio 中选择“重建解决方案”时，二进制文件中的输出类似于以下内容：

```
MyProgram.exe
MyProgram.pdb
MyProgram.exe.config
MyProgram.vshosts.exe
MyProgram.vshosts.exe.config
MyProgram.vshosts.exe.manifest
log4net.dll
log4net.xml
SomeOtherLibary.dll
AnotherLibrary.dll 
```

对于 Release 来说，这似乎有很多东西，因为运行程序**真正需要**`exe`的是库的,`config`和`dll`s 。

我该如何构建一个“最小部署包”，它实际上只包含在另一台机器上运行程序所需的最低限度（当然假设它安装了.NET）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:31:25.643

我会[创建一个安装程序](http://msdn.microsoft.com/en-gb/library/2kt85ked%28v=vs.100%29.aspx)。这样做非常简单，它确保您将所有正确的文件捆绑在一个 .msi 中，并具有解决对 .NET、注册表项、文件关联以及您可能需要的任何其他内容的依赖的额外优势。

如果您真的想在没有安装程序的情况下创建包，则需要手动指定要包含的文件。我们在这里为一些项目执行此操作，并且我们让构建服务器运行一个 Nant 构建，它只是将文件打包成一个 .zip 文件。

# excel - Excel 生成的 CSV 文件中的数字

> ID：14976278
> 
> 赞同：2
> 
> 时间：2013-02-20T09:25:03.430
> 
> 标签：excel, csv, vsto

不幸的是，Excel 在生成 CSV 文件时对程序员不是很友好，因为它会存储出现在屏幕上的数字。因此，CSV 中数字的外观取决于区域设置和用户的喜好。

结果，我可能最终得到的数字看起来像

```
2 123
3'322
1,233.44
2123,45 
```

等等

现在我必须在我的程序中处理这样的 CSV 文件。

除了告诉用户如何构建他们的 CSV 文件之外——是否有任何智能或规范的解决方案来处理这个问题？切换到另一种数据格式也是一种选择——但是哪一种呢？它必须由 Excel 原生支持，并且应该易于处理（所以我想避免使用 xlsx）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T14:13:54.210

我和一个客户有同样的问题，我给他们写了一个导出到 csv 宏，它明确地告诉 excel 每一列的格式，这里是一个代码示例

```
Public Sub Export_To_CSV()
'Give excel the sheet with data to be exported to CSV

Sheets("Sheet1").Activate

'Declare your string array to be filled - currently set to 5 columns

Dim csvread(1 To 5) As String
Dim i As Integer
i = 1

Dim ObjFso
Dim StrFileName
Dim ObjFile

'Name the export csv - This will generate it in the folder you have the excel you are working with in and then names it CSVexport-Day-Month.csv

StrFileName = Application.ThisWorkbook.Path & "\CSVExport-" & Day(Date) & "-" & Month(Date) & ".csv"
Set ObjFso = CreateObject("Scripting.FileSystemObject")
'Creating a file for writing data
Set ObjFile = ObjFso.CreateTextFile(StrFileName)

'takes the headers from row 1 - set by i if different

csvread(1) = Range("A" & i).Value
csvread(2) = Range("B" & i).Value
csvread(3) = Range("C" & i).Value
csvread(4) = Range("D" & i).Value
csvread(5) = Range("E" & i).Value

'Writes the Headers

ObjFile.WriteLine (csvread(1) & "," & csvread(2) & "," & csvread(3) & "," & csvread(4) & "," & csvread(5))

i = i + 1

'Do until loop can be altered to meet your parameters

Do Until Range("A" & i).Value = 0 Or i = 1000

'format your data however you require

csvread(15) = Format(Range("A" & i).Value, "###0.00")
csvread(15) = Format(Range("B" & i).Value, "###0.00")
csvread(15) = Format(Range("C" & i).Value, "###0.00")
csvread(15) = Format(Range("D" & i).Value, "###0.00")
csvread(15) = Format(Range("E" & i).Value, "###0.00")

'write the line to the file

ObjFile.WriteLine (csvread(1) & "," & csvread(2) & "," & csvread(3) & "," & csvread(4) & "," & csvread(5))
i = i + 1
Loop

ObjFile.Close

p = MsgBox("Exported", vbOKOnly)

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T14:46:50.610

到目前为止，除了自己导出文件之外，我还没有找到任何更好的解决方案（`CsvWriter`是一个自定义类，但很简单——`CsvWriter.WriteItems`需要一个可枚举的字符串，必要时引用它们，然后在 csv 文件中用它们构建一行):

```
public static class CsvExporter {

    public static void ExportWorksheet (
        CsvWriter csvWriter,
        Excel.Worksheet worksheet,
        Action<int,int> reportProgressCallback = null
    ) {
        foreach (var row in WorksheetToStrings (worksheet, reportProgressCallback))
            csvWriter.WriteItems (row);
    }

    public static IEnumerable<IEnumerable<string>> WorksheetToStrings (
        Excel.Worksheet worksheet, Action<int,int> reportProgressCallback = null
    ) {
        var usedRange = worksheet.UsedRange;
        return RangeToStrings (usedRange, reportProgressCallback);
    }

    public static IEnumerable<IEnumerable<string>> RangeToStrings (
        Excel.Range range,
        Action<int,int> reportProgressCallback = null
    ) {
        if (reportProgressCallback == null)
            reportProgressCallback = (line, total) => { };

        int rowsTotal = range.Rows.Count;
        int currentRow = 0;
        foreach (var row in range.Rows) {
            ++currentRow;
            reportProgressCallback (currentRow, rowsTotal);
            var rowValues = (row as Excel.Range).Value2 as object;
            foreach (
                var convertedRow in
                convertToEnumerableOfEnumerablesOfStrings (rowValues)
            )
                yield return convertedRow;

        }
    }

    private static IEnumerable<IEnumerable<string>>
    convertToEnumerableOfEnumerablesOfStrings (
        object values
    ) {
        return  convertToEnumerableOfEnumerablesOfObjects (values)
                    .Select (
                        r => r.Select (
                            c => convertSingleValueToString (c)
                        )
                    );
    }

    private static IEnumerable<IEnumerable<object>>
    convertToEnumerableOfEnumerablesOfObjects (
        object values
    ) {
        var ary = values as object [,];
        if (ary != null)
            return convertTwoDimAryToEnumerableOfEnumerablesOfObjects (ary);

        var obj = values as object;
        if (obj != null)
            return Enumerable.Repeat<IEnumerable<object>> (
                Enumerable.Repeat<object> (obj, 1), 1
            );

        return Enumerable.Empty<IEnumerable<object>> ();
    }

    private static IEnumerable<IEnumerable<object>>
    convertTwoDimAryToEnumerableOfEnumerablesOfObjects (
        object [,] ary
    ) {
        var firstUpperBound = ary.GetUpperBound (0);
        var secondUpperBound = ary.GetUpperBound (1);
        return Enumerable.Range (1, firstUpperBound).Select (
            i => Enumerable.Range (1, secondUpperBound).Select (j => ary [i, j])
        );
    }

    private static string convertSingleValueToString (object value) {
        if ( value == null ) {
            return string.Empty;
        } else if (value is string) {
            return value as string;
        } else if (value is long) {
            return ((long) value).ToString (CultureInfo.InvariantCulture);
        } else if (value is double) {
            return ( (double) value ).ToString (CultureInfo.InvariantCulture);
        } else if (value is bool) {
            return (bool) value ? "TRUE" : "FALSE";
        } else {
            return value.ToString ();
        }
    }

} 
```

# android - 什么时候在 Android 中触发 hasEnded()

> ID：14976282
> 
> 赞同：0
> 
> 时间：2013-02-20T09:25:10.453
> 
> 标签：android

我想在完成动画后开始另一个文本视图的动画。为此我做到了

```
Animation animationFadeIn = AnimationUtils.loadAnimation(this, R.anim.fadein);
Animation animationFadeOut = AnimationUtils.loadAnimation(this, R.anim.fadeout);
textView.startAnimation(animationFadeIn);
if(animationFadeIn.hasEnded())
{
textView2.startAnimation(animationFadeOut);
} 
```

但是第二个动画不起作用......有什么建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:29:59.553

```
 animationFadeIn.setAnimationListener(new AnimationListener() {

        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub

        }

        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub
            textView2.startAnimation(animationFadeOut);

        }

    }); 
```

您正在检查动画是否结束，它将执行一次，并且动画尚未结束不会触发

即使你把它放在一个线程中它 m8 wrk 试试这个希望它可能会有所帮助并根据你的需要改变它..我不确定但试一试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:30:06.500

`startAnimation()`立即返回，所以当你到达时`if(animationFadeIn.hasEnded())`，animationFadeIn 仍在运行。

您可以使用 an[`AnimationListener`](http://developer.android.com/reference/android/view/animation/Animation.html#setAnimationListener%28android.view.animation.Animation.AnimationListener%29)来了解给定动画何时结束

# javascript - 在动态 div 中附加动态段落

> ID：14976285
> 
> 赞同：1
> 
> 时间：2013-02-20T09:25:16.767
> 
> 标签：javascript, jquery, html, css, jquery-ui

我在对话框中创建了一个动态 div 和段落，以在提交表单时显示确认。如何在动态 div 中附加动态段落，请帮助我。

提前致谢。

```
<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Jquery Confirm Dialog</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
        <script src="JQUERY/jquery-ui.js"></script>
        <style type="text/css">
                .ui-dialog .ui-dialog-titlebar, .ui-dialog .ui-dialog-buttonpane { font-size: 0.8em; }
        </style>
        <script type="text/javascript">
            $(document).ready(function ()
            {
                $("#ShowDivPopup").click(function ()
                {
                    var DynamicDiv = $('<div id="dynamicPopupDiv" style="width: 340px;height: 380px;background-color:#fff;display: none"></div>');
                    var Message = $('<p>Are you Sure</p>');

                    $('body').append(DynamicDiv);
                    $('#DynamicDiv').append(Message);
                    $("#dynamicPopupDiv").dialog(
                    {
                        modal: true,
                        height: 180,
                        width: 320,
                        title: 'Info',
                        closeOnEscape: false,
                        resizable: false,
                        draggable: true,
                        buttons: {
                            "Ok": function ()
                            {
                                alert("Submit form ");

                            },
                            "Cancel": function ()
                            {
                                $(this).dialog('close');
                            }
                        }
                    });
                });
            });

        </script>   
    </head>
    <body>
        <form id="myForm" method="post" action="return welcome()">
            <div id="ConFirmDiv" style="width: 340px;height: 380px;background-color:#fff;display: none">
                <span>Are You Sure Want to Submit</span>
            </div>
            <input type="button" id="ShowDivPopup" value="Show Popup" />
       </form>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:27:06.500

您想引用 DynamicDiv 对象而不是文字：

```
$(DynamicDiv).append(Message); 
```

或者：

```
$("#dynamicPopupDiv").append(Message); 
```

您将 ID 称为 dynamicPopDiv，因此当您引用 $("#DynamicDiv") 时，它不会返回 jQuery 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:30:33.207

```
var DynamicDiv = $('<div id="dynamicPopupDiv" style="width: 340px;height: 380px;background-color:#fff;display: none"></div>');
var Message = $('<p>Are you Sure</p>');

DynamicDiv.append(Message)
$('body').append(DynamicDiv); 
```

# python - 将元素添加到列表更改所有元素

> ID：14976287
> 
> 赞同：1
> 
> 时间：2013-02-20T09:25:24.820
> 
> 标签：python

我对以下代码有疑问

```
 my_list = []
    for i in xrange(1, 13):
        my_list.append(MyObject(year=year, month=i)) 
```

我不知道为什么在调用 append 方法时列表中的所有元素都被新元素替换。因此，当循环完成时，列表中有 12 个相同的元素。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:30:33.747

我怀疑问题出在您的 MyObject 类上

您是否将年份和月份存储为类属性而不是实例变量？

# jquery - 如何检查特定的 CSS 值是否存在

> ID：14976291
> 
> 赞同：3
> 
> 时间：2013-02-20T09:25:39.437
> 
> 标签：jquery, css

为什么这行不通？

浏览器 = Safari

```
<p style="color:blue;">foo</p>

if ($("p").css(("color") === "blue")) {
        alert(1);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T09:28:24.083

这都是关于语法和括号的：

```
if ($("p").css("color") === "blue") {
        alert(1);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T09:30:01.060

最初，支架放置错误。您应该*获得*CSS 属性“color”的`.css("color")`值并测试与您的值是否相等，如下所示：

```
if ($('p').css('color') === 'blue') {
    alert('color is blue');
} 
```

但是，某些浏览器会返回`rgb`与您的“蓝色”不匹配的值，例如 Chrome 和 Firefox 返回`rgb(0, 0, 255)`for `$('p').css('color')`，因此您可能还想针对 rgb（甚至是十六进制 - '#0000ff'）值进行测试。所有值在逻辑上但在文本上并不相同。

```
var color = $('p').css('color')
if (color === 'blue' || color === 'rgb(0, 0, 255)' || color === '#0000ff') {
    alert('color is blue');
} 
```

更进一步，*if 条件*可能应该考虑颜色的大小写。'BLUE' 或 '#0000FF' 也是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:29:13.640

我认为应该是：`if ($("p").css("color") === "blue"){ alert(1); }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T09:37:20.023

至少在 Firefox 和 Chrome 中

```
$("p").css("color") 
```

返回 rgb(0,0,255) 所以你的条件无论如何都不会是真的。所以也许这样的解决方法：

```
if ($("p").attr("style").contains('color:blue;')) {
    alert(1);
} 
```

# java - 使用 TFS Java SDK 订阅带有 TFS 服务器的 CheckinEvent

> ID：14976292
> 
> 赞同：2
> 
> 时间：2013-02-20T09:25:41.810
> 
> 标签：java, tfs, tfs-sdk

*   我正在寻找有关如何使用[TFS Java SDK](http://www.microsoft.com/en-in/download/details.aspx?id=22616)在 TFS 服务器中订阅 CheckinEvents 的信息。

我遇到了[这个链接](http://techstarvation.wordpress.com/tag/tfs-sdk/)，它展示了如何使用 TFS .Net SDK 来做到这一点。

```
TfsTeamProjectCollection tpc = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri(txtTfsURL.Text), new UICredentialsProvider());
tpc.EnsureAuthenticated();
IEventService eventService = tpc.GetService(typeof(IEventService)) as IEventService;
DeliveryPreference delPref = new DeliveryPreference();
delPref.Address = “http://” + System.Environment.MachineName + “:8001/CheckInNotify”;
delPref.Schedule = DeliverySchedule.Immediate;
delPref.Type = DeliveryType.Soap;
subscriptionId = eventService.SubscribeEvent(System.Environment.UserDomainName + “\\” + System.Environment.UserName, “CheckInEvent”, “”, delPref);
lblSubscription.Content = string.Format("A checkin subscription is created with subscription id : {0}",subscriptionId.ToString()); 
```

对应的 Java API 是什么？它们和下面的一样吗？

```
TFSTeamProjectCollection.getVersionControlClient().getEventEngine().addCheckinListener(CheckinListener listener); 
```

另外我怀疑只有当我们使用同一个客户端签入时才会通知这个监听器。那是对的吗？

*   另外，我们如何从通知 SOAP 响应中识别 TFS 集合和项目？

有一个 GUID 是收集的 guid，但它是其他数据的一部分，因此不确定它是否始终可用和项目名称。有任何想法吗？

*   你如何确保你不会两次订阅同一个集合？我们可以只订阅一个项目吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T05:58:07.457

1.  不，您提供的两个示例不等效。第一个示例设置 SOAP 通知，并且 Team Foundation Server 将在任何用户签入时向配置的端点发送 SOAP 消息。第二个示例将配置客户端的事件“引擎”，以便在*您的客户端*成功签入时调用您的签入侦听器。

2.  正如您所注意到的，Java API 将配置 Java API 以在您签入时触发事件。您不能使用 Java API 配置 SOAP 事件 - 或发生在服务器本身上的全局事件。

3.  我建议您使用唯一的 URI 来标识项目集合。查询参数在这里是合适的。要识别项目，您只需查看服务器路径。

4.  我不熟悉何时交付项目集合 GUID，但我会通过上面的 #3 来消除歧义。

# ruby-on-rails - Rails 3.2 中空表列的最佳实践

> ID：14976304
> 
> 赞同：1
> 
> 时间：2013-02-20T09:26:24.120
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, database-design, ruby-on-rails-3.2

我对 Rails 中的数据库数据有疑问。

空表列的最佳做法是什么？

我在某些非用户输入的列上没有默认值，例如。

```
User model
ID | name       | drink_of_choice |  favourite_color
-----------------------------------------------------
1  | Benji      | coffee          |  yellow
2  | Becky      | tea             |  NULL
----------------------------------------------------- 
```

如您所见，Becky 的 favouritte_color 为 NULL，因为 Becky 尚未输入她最喜欢的颜色。

Rails 开发人员是否将 :default => '' 设置为保存空字符串并避免在数据库中出现 NULL 的最佳实践？

感谢您的耐心等待，感谢您对我进一步学习的任何建议。

西部数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:56:07.480

你有很多选择...

1-第一个是强制用户输入一些数据。因此，您可以使用[存在验证](http://guides.rubyonrails.org/active_record_validations_callbacks.html#presence)：

```
class User < ActiveRecord::Base
  validates :name, :drink_of_choice, :favourite_color, :presence => true
  ...
end 
```

2- 但是，您可能希望允许用户将某些列留空。如果是这样，您可以在模型中为其设置默认值，例如：

```
class User < ActiveRecord::Base
  before_save :set_favourite_color
  ...
  def set_favourite_color
    self.favourite_color ||= ''
  end
end 
```

3-您也可以在控制器中设置它，例如：

```
def new
  @user = User.new
  @user.favourite_color ||= ''
  ...
end 
```

4-另一种选择，但我不太喜欢它（根本不灵活），是在您的迁移文件中定义它：

```
class CreateUser < ActiveRecord::Migration
  def change
    create_table :users do |t|
      ...
      t.string :favourite_color, default: ''
      ...
      t.timestamps
    end
  end
end 
```

最好的方法是什么？

遵循 Rails 最佳实践，更准确地说：胖模型，瘦控制器。我会选择选项2。

**编辑**- 在决定列的默认值之前，请考虑它的含义。如果意思是没有输入数据，我认为您应该将其保留为空。感谢[Daniel Rikowski](https://stackoverflow.com/users/23368/daniel-rikowski)的评论，请看一下[这个问题](https://stackoverflow.com/questions/6638291/standard-use-of-z-instead-of-null-to-represent-missing-data)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:55:45.017

如果它适合你，试试这个宝石：

[https://github.com/rubiety/nilify_blanks](https://github.com/rubiety/nilify_blanks)

这也可以帮助 u-> [Ruby/Rails 使用 || 确定值，使用空字符串而不是 nil 值](https://stackoverflow.com/questions/14415357/ruby-rails-using-to-determine-value-using-an-empty-string-instead-of-a-nil-v)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T17:13:46.330

在 Rails 视图中，我使用如下内容：

```
<%= input unless input.blank? %> 
```

并将数据保留在数据库中。

# load-testing - 在云中测试纵向扩展与横向扩展

> ID：14976305
> 
> 赞同：4
> 
> 时间：2013-02-20T09:26:28.763
> 
> 标签：load-testing

这是我的第一篇文章，如果我没有正确遵守正确的网站礼仪，请原谅我。

我目前正在做一个项目来测试云中 Web 应用程序的 Scale Up 与 Scale Out。理想情况下，我想在 2 Cloud 解决方案上对此进行测试，并对两者进行比较和对比。我目前正在寻找的选项是 Windows Azure、AWS 或 Google Apps。我目前订阅了 Windows Azure 免费订阅。

为此，我将不得不部署某种负载测试软件来测试 Web 应用程序。您能否提出任何建议，哪种负载测试解决方案最适合在 2 个不同的云中执行此操作，以及如何设置它以获得两种解决方案的最佳结果？我在这里读到 LoadStorm 非常好，但这是否允许我进行 Scale Up V Scale out 或者我是否会被限制在软件中提供的负载测试功能？我也在考虑使用 JMeter，但读到这很难在 Azure 中部署。

我想回答的一些问题是：

*   4 个 1.75GB 小核实例的性能是否优于 1 个大核 4 核（7GB）实例？
*   是否可以在两个云上使用相同的应用程序？
*   在比较 Scale Up 和 Scale Out 时，最好使用哪些指标？

对此的任何帮助将不胜感激。

# java - 服务器套接字绑定到哪里？

> ID：14976313
> 
> 赞同：0
> 
> 时间：2013-02-20T09:26:53.897
> 
> 标签：java, sockets, tcp, network-programming, serversocket

`new ServerSocket(port);`这个绑定在哪个IP ？
到**所有公共**IP 和本地主机？不确定这一点。
如果我有多个接口，它会绑定到所有接口吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:30:22.600

这个调用相当于

```
new ServerSocket(port, 0, null); 
```

根据此方法的[javadoc ：](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html#ServerSocket%28int,%20int,%20java.net.InetAddress%29)

> 如果 bindAddr 为空，它将默认接受任何/所有本地地址上的连接。

所以是的，它将绑定到所有接口。

# c++ - 仅 C++ 头文件项目 - 从不同的程序集中使用

> ID：14976315
> 
> 赞同：0
> 
> 时间：2013-02-20T09:27:01.893
> 
> 标签：c++, visual-studio-2012, linker, compiler-errors

我有一个项目，我必须将其从分离 .cpp/header 文件更改为将定义加入头文件中。我最初尝试将cpp文件的内容复制到头文件中，但我的ide - VS2012 express - 让我进入一个循环，它说头文件包含自身，所以当我删除包含“class.h”时它抱怨说在 Class::functionname 的情况下，无法识别 Class。最终我决定在标题本身中定义定义，例如

```
class Thing {
public:
   void func { code; } 
} 
```

这解决了我在项目上的编译问题。问题是我有一个测试项目 - WinUnit - 我无法再访问这些功能。该项目曾经是一个静态库并进行了相应的链接，但由于没有 .cpp 文件，该项目没有生成 .lib。尝试更改为动态链接库，同样的问题 - 没有产生 dll。所以我添加了一个项目引用，当我输入#include“Class.h”时，它似乎可以识别我的类文件。

我的问题是它仍然没有编译类。它根本无法识别测试项目的 .cpp 文件中的类名。我什至尝试将头文件添加到测试项目中，但仍然没有乐趣。我尝试将附加包含目录设置为指向标题所在的位置 - 不好。

我怎样才能做到这一点？

编辑：仍然卡住了，所以我创建了一个 SSCCE，它运行良好，将测试项目指向附加包含目录中的头文件目录并且它运行正常。虽然主项目编译得很好，但我注意到它有一个智能感知错误 - 标识符“ClassName”未定义。所有其他类都识别其他类。#include "className" 存在。当我构建测试项目时，第一个错误与智能感知错误有关：错误1错误C2143：语法错误：缺少';' 前 '*'

实际的行是：ClassName * obj; - 这是一个私有变量。

测试项目有629个错误——其他一些代码：c4430、c2061。我想这些只是与未识别的类相关的初始问题的副作用......我迷路了，可以退出并重新考虑失败......

编辑：修复了智能感知错误，因此所有错误现在都在 Testproject 中 - 最多出现 826 个错误。包含头文件时看到头文件，但不识别任何类名。错误代码：c2061、c2065、c2923 等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:40:33.417

在您的示例代码`func`中是私有的，因为这是类内的默认访问。也许您想定义函数 public 以供您的测试代码和该类的其他客户端访问。

如果您只是将函数定义放在标题中，您还必须使它们内联。显式（对于自由函数和完全专用的函数模板定义）或隐式，即在类定义中定义类方法。

你是对的，库不再产生任何编译输出，即你既不需要链接 lib 也不需要链接 dll 文件。因此，在任何使用该库的项目中，包括您的测试项目，您不再需要指定要与该项目链接的库。毕竟，这是只有头文件库的原因之一：它们在编译时被完全包含（而不是链接时）。

如果您的测试项目之前编译过，它也应该在修改后编译，前提是您之前测试了所有库类并且没有对命名空间结构进行任何更改。

如果没有[SSCCE](http://sscce.org)和您从编译器中得到的正确错误，您只能猜测您可能陷入了哪些其他陷阱。

**编辑：**即使源到头的重构已经正确完成，我想到的一件事可能会导致麻烦是循环包含。如果你有这些，你必须要么打破依赖关系，要么把两个类放在同一个头文件中，在两个类定义之后提供方法定义（记住明确声明方法定义内联）

**Edit2：**循环包含的简单示例：A 类和 B 类都有一个调用另一个类的方法的方法。所以每个类方法的定义都需要其他类的方法的*声明*，即其他类的前向声明是不够的。在正常情况下，源将包括两个标题并完成。在仅标头的情况下，编译器将如下所示：

```
class A {
  B* b_;
public:
  A(B* b) : b_(b) {}
  void foo() {b_->meow();}
};

class B {
public:
  void bar() { A a(this); a.foo(); }
  void meow() { /* ... */}
}; 
```

编译器会抱怨 B 的使用和对`B::meow()`. 前者可以通过向前声明 B 来解决，后者不能。首先定义 B 无济于事，您将遇到与 A 和 相同的问题`A::foo()`。所以解决方案必须如下所示：

```
class A {
  B* b_;
public:
  A(B* b) : b_(b) {}
  void foo();   //1
};

class B {
public:
  void bar() { A a(this); a.foo(); }
  void meow() { /* ... */}
};

inline void A::foo() {b_->meow();} //2 
```

依赖于第二类的第一类方法的定义必须延迟到第二类定义之后。由于 A 需要 B 而 B 需要 A，因此在仅包含标头的库中将此类混合类定义分隔在两个不同的标头中几乎没有意义。

分离此类事物的一种方法是打破依赖关系。在上述情况下，可能如下所示：

```
class B_Interface
{
public: 
  virtual void meow() = 0;
};

class A {
  B_Interface* b_;
public:
  A(B_Interface* b) : b_(b) {}
  void foo() {b_->meow();} //OK this time
};

class B : public B_Interface {
public:
  void bar() { A a(this); a.foo(); }
  virtual void meow() { /* ... */}
}; 
```

这是以增加一个间接为代价的，但分离了两个类的依赖关系，使 A 等的测试更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:50:12.593

我已经受够了，由于某种原因它仍然无法正常工作，这已经成为我的时间和精力的浪费。我回到了一个结构良好的项目，只有标题的地狱。

# jquery - 如何使用 jQuery 处理 Primefaces tabView 的“OnTabShow”？

> ID：14976322
> 
> 赞同：4
> 
> 时间：2013-02-20T09:27:16.127
> 
> 标签：jquery, primefaces, jquery-events

我想标题是不言自明的！我正在使用 Primefaces tabView，并添加了一个内联事件处理程序，如下所示：

```
<p:tabView effect="fade" id="myTabView" style="background:none;" dynamic="true" styleClass="myTabs" onTabShow="myShowFunction()">
.
.
</p:tabView> 
```

我想使用 jQuery`on`来绑定一个使用标签显示事件的事件处理程序。我尝试使用`on('ontabsshow', myShowFunction)`，但它不起作用。I need to update a global variable when the tabs change (after completion of the transition). 因此，我需要将我的代码放在具有全局声明的同一个脚本中。

有什么指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-15T15:27:36.737

抱歉，我来晚了……不过

如您所料，浏览器端没有真正的`onTabShow`事件。Primefaces 生成特定的 js 代码，以便在正确的时间调用您的 myShowFunction 函数。

JQuery 在这里没有帮助。

只需将您的函数放在脚本部分（在您的 tabView 组件之后）：

```
<script>
    function myShowFunction() {
        //Update your variable here
    }
</script> 
```

希望能帮助到你

# html - 超链接点击时的修饰键行为

> ID：14976325
> 
> 赞同：4
> 
> 时间：2013-02-20T09:27:20.047
> 
> 标签：html, web, w3c, web-standards

按下修饰键时是否有一些超链接点击行为标准？
例如，firefox 如果按下则创建一个新选项卡，如果`Ctrl`按下则创建一个新窗口`Shift`。
Opera 创建新的非焦点选项卡`Ctrl`和焦点选项卡`Shift`。
是完全依赖于浏览器还是有一些指导方针，应该考虑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-03T16:00:55.450

这取决于浏览器，并且比您预期的要复杂得多：还有中键单击（不会触发`onclick`），还有 Apple 键盘，它是 Command+单击（不是 Ctrl+单击），“在新标签”上下文菜单、移动浏览器等等。

你[在评论中](https://stackoverflow.com/questions/14976325/modifier-keys-behaviour-on-hyperlink-clicks#comment21029845_14976399)说：

> 我正在为我的网站编写一个 js，我想知道用户期望什么行为，点击带有绑定 onClick 事件的超链接。

建议的方法是尽可能在元素中提供一个实际的 URL，`href`并让浏览器处理在新选项卡中打开它。您可以通过从事件处理程序中取消事件来覆盖简单左键单击的默认行为。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T09:31:22.920

您可以使用

```
target="_blank" 
```

属性以强制网页在新选项卡/窗口中打开（取决于浏览器）。例如：

```
<a href="www.google.com" taget="_blank"> 
```

**- 更新 -**

好吧，我做了一些调查，看不到有关超链接和修饰符的任何内容，我唯一能想到的就是处理 javascript 中的修饰键。

如果在新选项卡/窗口中弹出新页面是一个问题，您可以执行以下操作来禁用它。但是，如果用户禁用了 javascript，那么该链接将根本不起作用，这并不理想。

```
<HTML>
<HEAD>
<TITLE>Event Modifiers</TITLE>
<SCRIPT LANGUAGE="JavaScript">

function checkMods(event){
       if(event.shiftKey) {
        alert("Shift, held.");
        return false
       }
       else{
        window.location = "http://www.google.com/"
        return true
       }

}

</SCRIPT>
</HEAD>
<BODY>
<H1>Event Modifiers</H1>
<HR>
<P>This link wont work if Shift is held while clicking. 
<A HREF="javascript:void(0)" onClick="return checkMods(event)">
this link</A>
</BODY>
</HTML> 
```

# objective-c - 2D 点，到 3D，然后回到 2D

> ID：14976329
> 
> 赞同：0
> 
> 时间：2013-02-20T09:27:40.563
> 
> 标签：objective-c, macos, core-graphics

图 1：我在 2d 图层（CoreGraphics）上绘制贝塞尔曲线，我有 A 点和 B 点。

图 2：我可以将图层旋转大约 70 度。

图 3：我想知道点 A 和 B 现在是什么，通过某种方式将图像从 3D 压缩回 2D。

我理想地想要做的是这样的功能：

```
-(CGPoint)calculateNewPointFrom:(CGPoint)p withAngle:(float)angle
{
    //Rotate point by angle in 3d space
    //Return new point in 2d space
} 
```

![2D转3D，再转2D](../Images/4d8292416d2c02481b4fba0afb619e10.png)

欢迎大家帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:45:20.973

如果您有`Q`3D 中某个点的坐标： (x, y, z)

你想把它投影到一个平面上，这个平面包含一个点`P`并且有法向量n，

平面方程为

```
(R - P) . n = 0 
```

我在哪里使用矢量减法，并且`.`是点积。

由此您可以推断出任何点在该平面上的投影：沿着法向量绘制一条线，`n`直到它与平面相交。

所以会有一些价值`a`使得

```
Q + a * n 
```

位于平面内，即

```
(Q - a * n - P) . n = 0 
```

求解（注意`n . n = 1`）：

```
a = (Q - P) . n 
```

（注意——这是从 Q 到 P 的“正常距离”；绝非巧合！）

它们相交点的值现在是

```
Q + ((Q - P) . n ) * n 
```

再次注意 - 我正在使用向量数学，因此最后一个`*n`结果是三个值（因为 n 是一个 3D 向量）。

如果您尝试在平面上进行非法线投影（例如，您想投影到 XY 平面上，但您正在“看一个角度”），您可以概括这一点。在这种情况下，你需要沿着不同的方向m（你正在看的方向）进行投影，相交的方程变为

```
Q + ((Q - P) . n ) * m / (m . n) 
```

如您所见，如果 m 垂直于 n（您是沿着平面看，而不是看它），则没有解决方案......

您还可以看到，如果您直接在 XY 平面上进行投影，因此 n = [0 0 1])，整个事情简化为设置 Z=0

让我知道这是否足够，或者您是否需要实际的代码行......

> --- 编辑 --- 添加一些简单的代码：

如果您有一系列描述曲线的点 (x, y)，您可以通过以下方式围绕 Z 轴（垂直于您的平面）旋转角度 θ：

```
x1 = x * cos(theta) - y * sin(theta);
y1 = x * sin(theta) + y * cos(theta); 
```

现在您可以通过简单地减少 y 坐标来“挤压”这些点，这样您就可以从侧面看到它们：

```
x2 = x1;
y2 = y1 * cos(alpha); 
```

`alpha`您查看曲线的表观角度在哪里。因此，如果您直接向下看 XY 平面，`alpha`则为 0，并且`y2 = y1`。如果你看 45 度，`alpha`是`pi/4`和`y2 = 0.707 * y1`（大约）。

您可以将这两种转换组合成：

```
xnew = x * cos(theta) - y * sin(theta);
ynew = cos(alpha) * (x * sin(theta) + y * cos(theta)); 
```

尝试一些 theta 值（在 0 和 0.5 之间，以 0.1 为步长）和 alpha 值（类似的范围可能很好）。看看你喜不喜欢这个结果。

也许这对您来说是一个更好的（在“更有用”的意义上）答案？

# java - 是否有可能在编译时禁用 guava 的先决条件，就像我们禁用 Java 1.4 的 assert 关键字一样？

> ID：14976330
> 
> 赞同：1
> 
> 时间：2013-02-20T09:27:47.550
> 
> 标签：java, guava, assertion, preconditions

我曾经在我的代码中插入 java1.4 的断言结构，发现它非常实用，因为它允许我在调试时启用插入的断言并在编译时禁用它们。

**我的问题是：** 是否可以对 Guava 库中的现代 Preconditions.checkArgument(..) 等做同样的事情？
了解这一点很重要。我们在代码中可能有很多 guava 的前置条件检查，但大部分都是为了调试目的，当这种前置条件的数量迅速变大时，可能会影响性能。

谢谢你的想法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T09:30:07.417

不，没有。如果您在高速行驶时真的想解下安全带，请`assert`改用。

以我的经验，大多数前提条件都非常便宜——而且不太可能在现实生活中对性能产生*重大*影响。（而意料之外的不良数据进入您的系统并且直到它被弄乱后才被检测到的影响可能是巨大的......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-12T18:43:47.580

您可以将 valid4j 与 hamcrest-matchers 一起使用（在 Maven Central 上以 org.valid4j:valid4j 的形式找到）。虽然我不推荐，valid4j 是可以关掉的。

使用系统属性：-Dorg.valid4j.AssertiveProvider=disabled

或者使用服务加载器，添加一个文件 /META-INF/services/org.valid4j.AssertiveProvider 一行 org.valid4j.impl.AssertiveDisabledProvider

链接：

*   [http://www.valid4j.org/](http://www.valid4j.org/)
*   [https://github.com/helsing/valid4j](https://github.com/helsing/valid4j)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T16:34:06.627

看看[https://github.com/cowwoc/requirements.java/](https://github.com/cowwoc/requirements.java/)（我是作者）。如果断言被禁用，它会完全满足您的要求（代码被 JIT 优化掉）：

```
assertThat(name, value).isGreaterThan(5); 
```

我在文档底部提供了具体的性能数据。

# r - 在 R 编程语言中使用 ~（波浪号）

> ID：14976331
> 
> 赞同：220
> 
> 时间：2013-02-20T09:27:57.883
> 
> 标签：r, r-faq, r-formula

我在有关回归建模的教程中看到了以下命令：

```
myFormula <- Species ~ Sepal.Length + Sepal.Width + Petal.Length + Petal.Width 
```

这个命令究竟做了什么，`~`（波浪号）在命令中的作用是什么？

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2013-02-20T09:35:03.090

右边的东西`<-`是一个[`formula`](https://www.rdocumentation.org/packages/stats/topics/formula)对象。它通常用于表示统计模型，其中左边的`~`东西是响应，右边的东西`~`是解释变量。所以用英语你会说*“物种取决于萼片长度，萼片宽度，花瓣长度和花瓣宽度”*。

该`myFormula <-`行的一部分将公式存储在一个名为的对象中，`myFormula`以便您可以在 R 代码的其他部分中使用它。

* * *

**R中公式对象的其他常见用途**

该`lattice`包使用它们来[指定要绘制的变量](https://www.rdocumentation.org/packages/lattice/topics/B_00_xyplot)。
该`ggplot2`包使用它们来[指定用于绘图的面板](https://www.rdocumentation.org/packages/ggplot2/topics/facet_wrap)。
该`dplyr`软件包将它们用于[非标准评估](https://cran.r-project.org/web/packages/lazyeval/vignettes/lazyeval.html)。

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2013-02-20T11:34:29.147

R 定义了一个`~`（波浪号）运算符以在公式中使用。公式有各种各样的用途，但也许最常见的是回归：

```
library(datasets)
lm( myFormula, data=iris) 
```

`help("~")`或者`help("formula")`会教你更多。

@Spacedman 涵盖了基础知识。让我们讨论一下它是如何工作的。

首先，作为运算符，请注意它本质**上是函数的快捷方式**（带有两个参数）：

```
> `~`(lhs,rhs)
lhs ~ rhs
> lhs ~ rhs
lhs ~ rhs 
```

这对于了解在`apply`家庭命令中的使用可能会有所帮助。

其次，您可以将公式**作为文本**操作：

```
oldform <- as.character(myFormula) # Get components
myFormula <- as.formula( paste( oldform[2], "Sepal.Length", sep="~" ) ) 
```

第三，您可以将其**作为列表**进行操作：

```
myFormula[[2]]
myFormula[[3]] 
```

最后，还有一些有用的公式技巧（更多信息请参阅`help("formula")`）：

```
myFormula <- Species ~ . 
```

例如，上面的版本与原始版本相同，因为点表示“所有尚未使用的变量”。这会查看您在最终模型调用中使用的 data.frame，查看 data.frame 中存在哪些变量，但您的公式中没有明确提及，并用那些缺失的变量替换点。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2021-03-21T04:22:40.960

一句话，

`The tilde`(~) `separates the left side of a formula with the right side of the formula.`

例如，在线性函数中，它将因变量与自变量分开，可以解释为“作为函数”。所以，当一个人的工资（工资）作为他们受教育年限（years_of_education）的函数时，我们会做类似的事情，

```
wages ~ years_of_education 
```

这里，

```
 Species ~ Sepal.Length + Sepal.Width + Petal.Length + Petal.Width 
```

这意味着，`Species`是 的函数 `Sepal Length, Sepal Width, Petal Length and Petal Width`。

# javascript - 通过手机浏览器获取设备的OpenUDID

> ID：14976333
> 
> 赞同：3
> 
> 时间：2013-02-20T09:28:01.430
> 
> 标签：javascript, android, mobile, ios6, udid

我计划在我的一个项目中使用[openUDID](https://github.com/ylechelle/OpenUDID)。

我对此有几个问题：

1.  我可以将它仅用于 iO，还是也可以在 Windows 和 Android 平台上使用？

2.  当用户在网络浏览器上单击我的应用程序链接时，我还想跟踪它。是否有可能，如果我在客户的浏览器中运行一些 javascript 来获取 OpenUDID id ？我的意思是他们有 JavaScript 版本或我可以在移动浏览器中使用的任何其他版本来获取 openUDID 吗？

# javascript - 离线应用程序并与服务器同步 - Sammy 框架

> ID：14976334
> 
> 赞同：1
> 
> 时间：2013-02-20T09:28:03.110
> 
> 标签：javascript

我需要创建一个必须离线使用的 Web 应用程序。用户将使用平板电脑来使用它。它的工作方式如下：

1.  用户第一次获得平板电脑时，他们将访问 Web 应用程序，因为他们将连接到互联网，因此应将应用程序下载到平板电脑（本地）。
2.  从那时起，他们必须能够在离线模式下与应用程序交互。他们将完成一些表单，使用的框架应该让我实现一些逻辑来决定应该显示哪些表单，当用户发送表单时，它们应该存储在平板电脑中，直到用户到家并且可以连接到 WIFI。
3.  当平板电脑连接到 WIFI 时，它必须将表单发送到远程服务器以解析信息。

有人告诉我有一个名为 Sammy JS 的框架可以做到这一点，但我想知道您是否知道其他可以满足这些要求的解决方案。任何评论都会受到欢迎。

我想一切都必须在 javascript 中完成，以便它可以离线工作。

# macos - 写入 MAC 的串行端口以与 Arduino 通信（fopen（/dev/tty.usbmodem1431）永远挂起）

> ID：14976339
> 
> 赞同：3
> 
> 时间：2013-02-20T09:28:29.087
> 
> 标签：macos, arduino

我在 MAC 上的 TTY 设备有问题。我创建了一个与 Arduino 对话并在 Linux 上运行良好的脚本。MAC 遇到的问题是我无法“打开”设备。例如，如果我这样做

```
echo "foo" > /dev/tty.usbmodem1431 
```

它永远挂在端口上。它在 Arduino 的串行监视器上运行良好，所以理论上我应该能够与之交谈。

**好的。我找到了解决方案。我必须写信给**

```
/dev/cu.usbmodem1431 
```

我仍然不知道为什么 TTY 不想工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-08T18:35:02.460

您可以将 tty 用于：

```
stty -f /dev/tty.usbmodem1431 cs8 115200 ignbrk -brkint -icrnl -imaxbel -opost -onlcr -isig -icanon -iexten -echo -echoe -echok -echoctl -echoke noflsh -ixon -crtscts

echo "hello" > /dev/tty.usbmodem1431 
```

其中 115200 是您的 Serial.begin 速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T04:13:08.107

你用什么速度？Max OSX 的默认速度为 9600。试一试（当您在 arduino 程序中设置串行时）。stty 似乎并没有像人们期望的那样改变速度。

# c - 如何在 Pascal/Delphi 中调用以下 C 函数？

> ID：14976341
> 
> 赞同：3
> 
> 时间：2013-02-20T09:28:31.487
> 
> 标签：c, delphi, pointers, pascal

我得到以下情况：

我想从我的 Pascal 程序中调用一个 C 函数。C 函数应该用值填充传递的指针。

这是C函数：

```
DLLEXPORT int dpstate_callPluginFunction(const char* plugin, const char* function, bool synchronous, const char* p0, const char* p1, const char* p2, const char* p3, const char* p4, const char* p5, const char* p6, char** o0, char** o1, char** o2, char** o3, char** o4, char** o5, char** o6) 
```

“p”参数是输入参数，“o”参数是输出参数。我试图在我的 Pascal 程序中调用该函数，如下所示：

C函数调用声明：

```
var dpstate_callPluginFunction: function(plugin, method: PAnsiChar; synchronous: boolean; p0, p1, p2, p3, p4, p5, p6: PAnsiChar; o0, o1, o2, o3, o4, o5, o7: PPAnsiChar): integer; cdecl; 
```

C函数调用加载：

```
@dpstate_callPluginFunction:= GetProcAddress(mConnectorLibrary, 'dpstate_callPluginFunction'); 
```

函数调用声明：

```
function callPluginFunction(plugin, method: PAnsiChar; synchronous :boolean; param, returnParam:array of PAnsiChar): integer; 
```

应该调用函数的函数：

```
procedure TForm1.btn_pluginFunctionClick(Sender: TObject);
var param, returnParam: array of PAnsiChar;
begin
SetLength(param, 7);
SetLength(returnParam, 7);
param[0]:= 'Param1';
param[1]:= 'Param2';
connector.callPluginFunction('dpserverplugin', 'showconfigdialog', true, param, returnParam);

output.Append(returnParam[0]);
output.Append(returnParam[1]);
end; 
```

功能：

```
function PConnect.callPluginFunction(plugin, method: PAnsiChar; synchronous :boolean; param, returnParam:array of PAnsiChar): integer;
  var i, error: integer;
  var p: array[0..6] of PAnsiChar;
  var o: array[0..6] of PPAnsiChar;
begin
  for i:=0 to 6 do
            p[i]:= param[i]; 
  dpstate_callPluginFunction(plugin, method, synchronous, p[0], p[1], p[2], p[3], p[4], p[5], p[6], @o[0], @o[1], @o[2], @o[3], @o[4], @o[5], @o[6]);

  for i:=0 to 6 do
            if o[i] <> Nil then
                returnParam[i]:= o[i]^; 
end; 
```

我现在的问题是，输出“returnParam”总是包含“地址 xxxxxx 越界”。我会很高兴得到一个快速的答案:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T10:29:41.180

我认为你混合了动态数组和开放数组。它们的措辞相同，但在不同的上下文中。 [http://rvelthuis.de/articles/articles-openarr.html](http://rvelthuis.de/articles/articles-openarr.html)

试试这个：

```
type TPAnsiCharDynArray = array of PAnsiChar;

function callPluginFunction(plugin, method: PAnsiChar; 
         synchronous :boolean; param: array of PAnsiChar;
     out returnParam: TPAnsiCharDynAttay): integer; 
```

这条线也有问题：

```
for i:=0 to 6 do
         p[i]:= param[i]; 
```

要么您确定您的数组总是`0..6`如此 - 那么使用动态数组就没有意义了。

```
type TDLLVectorIndex = 0..6; 
     TDLLPCharArray = array [TDLLVectorIndex] of PAnsiChar;

function callPluginFunction(const plugin, method: PAnsiChar; 
         synchronous :boolean; 
         const param: TDLLPCharArray;
         out returnParam: TDLLPCharArray): integer; 
```

*不要忘记参数修饰符`const/var/out`来记录您的调用合同，并使值通过引用传递，而不是克隆并作为值传递*

或者您不知道确切的尺寸 - 那么您不应该假设`6`幻数并迭代到传入的数组的实际大小。

```
for i:=0 to High(param) do
        p[i]:= param[i]; 
```

但是，这似乎不是您的情况，但是您明确声明参数“god-only-knows-what-length-array”然后将其与硬编码的魔术常数一起使用是非常惊人的。

* * *

同样，如果你制作 PAscal 桥，那么使用 PAscal 字符串比使用 C 字符指针更好。

```
function callPluginFunction(const plugin, method: AnsiString; 
         synchronous :boolean; 
         ..... 
```

* * *

追查什么是C`bool`类型。它真的是单字节布尔值吗？或者是一些 Windows 布尔值，可能需要 1,2 甚至 4 个字节？它有时也与`true`实际的 +1 或 -1 有轻微的二进制不兼容性。

但是如果没有这种`bool`不确定性，你在应用参数限定符之后的 fn 声明会更好看。

```
type fn_dpstate_callPluginFunction = 
   function(const plugin, method: PAnsiChar; synchronous: boolean;
   const  p0, p1, p2, p3, p4, p5, p6: PAnsiChar; 
   var o0, o1, o2, o3, o4, o5, o7: PAnsiChar): integer; cdecl;
var dpstate_callPluginFunction: fn_dpstate_callPluginFunction; 
```

在 C++ 中通过引用传递参数并不流行，而在 C 中它可能不存在。但平均而言，通过引用传递参数的 Pascal 代码被认为比传递指针更常见和更安全。

* * *

这涉及到重新编码：

```
type TDLLVectorIndex = 0..6; 
     TDLLPCharArray = array [TDLLVectorIndex] of PAnsiChar;

function PConnect.callPluginFunction(const plugin, method: AnsiString; 
         synchronous :boolean; 
         const p: TDLLPCharArray;
         out o: TDLLPCharArray): integer;

  var Error: integer;
begin
  Error :=
    dpstate_callPluginFunction( PAnsiChar(plugin), PAnsiChar(method), synchronous, 
        p[0], p[1], p[2], p[3], p[4], p[5], p[6],
        @o[0], @o[1], @o[2], @o[3], @o[4], @o[5], @o[6]);
  Result := Error + 10;
// or something like that - you did had the reason
// to declare the var and declare function return type afterall
end;

procedure TForm1.btn_pluginFunctionClick(Sender: TObject);
var param, returnParam: TDLLPCharArray;
begin
  FillChar(param, 0, SizeOf(TDLLPCharArray)); // maybe redundant, but to be on safe side
  param[0]:= 'Param1';
  param[1]:= 'Param2';
  connector.callPluginFunction('dpserverplugin', 'showconfigdialog', true, param, returnParam);
.... 
```

* * *

PS。最后但并非最不重要的一点是，您的连接器内部是否有任何真正的成员变量？我的意思是非静态的，在几个连接器实例中不同的那些？如果不是，您可能会创建`callPluginFunction`一个`class function`并且根本不创建连接器类的实例。

```
 param[0]:= 'Param1';
  param[1]:= 'Param2';
  PConnect.callPluginFunction('dpserverplugin', 'showconfigdialog', true, param, returnParam); 
```

聚苯乙烯。大卫关于合同是非常正确的。特别是关于“谁分配内存？” 即使 DLL 只返回字符串常量，也有一个巧妙的陷阱：加载 DLL，获取指向字符串的指针，卸载 DLL，尝试使用指针 - 访问冲突。因此，虽然我认为上面的桥是正确的界面翻译，但由于 David 指出的问题，它不一定在更大的范围内工作。

购买力平价。数组数据类型声明可能看起来很冗长，但它克服了我认为 Delphi novadays 的一个愚蠢限制：[为什么“字符串数组”的两个别名处理不同？](https://stackoverflow.com/questions/11029353)

购买力平价。使用`out`参数是有争议的。例如，David 认为由于 Delphi 实际上并没有为大多数数据类型实现它们，因此几乎应该总是使用`var`参数来代替。我个人认为使用`out`参数有利于记录您的合同，并且有利于与 FPC 和其他编译器的兼容性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T12:21:12.510

另一个小问题是“布尔”类型。帕斯卡布尔值通常假设 false=0 true=1 并且未定义，很像 GTK gbooleans。

C 布尔值通常假设 0=false，其他任何值=true。

Recent Free Pascals have a complete set of both in various sizes. Boolean8..boolean64 for the pascal side, bytebool,wordbool,longbool etc for the C side.

# php - 如何在 widgets_functions.php 页面中添加评论链接

> ID：14976343
> 
> 赞同：0
> 
> 时间：2013-02-20T09:28:34.910
> 
> 标签：php, wordpress

我想在页面中添加**发表评论**链接。`widgets_functions.php`

该页面位于`/wp-content/themes/framework/library/functions/`. 当我`comments_popup_link()`在页面内使用该功能`widgets_functions.php`时，帖子结束后没有显示此类评论链接。

Wordpress 版本是 3.5.1。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:00:01.783

*此标签必须在循环或评论循环内。*

[http://codex.wordpress.org/Function_Reference/comments_popup_link](http://codex.wordpress.org/Function_Reference/comments_popup_link)

`comments_popup_script`看起来它可以在任何地方使用，但我不确定它是否是你要找的。

[http://codex.wordpress.org/Function_Reference/comments_popup_script](http://codex.wordpress.org/Function_Reference/comments_popup_script)

# validation - 使用 IF 语句时是否有正确或错误的做法：if(foo) 或 if(foo == true)？

> ID：14976344
> 
> 赞同：1
> 
> 时间：2013-02-20T09:28:41.830
> 
> 标签：validation, if-statement, logic

到目前为止，在我的（短暂的）编程生涯中（只是一个从事实习工作的学生），我注意到当谈到 IF 语句时，有两种不同的方法。

如果我们将`foo`其作为布尔值：

```
if(foo)
{
    //do stuff
} 
```

这是我在处理 IF 语句时首选的做事方式，如果我正在寻找错误，我会使用：

```
if(!foo)
{
    //do more stuff
} 
```

但是，当有些人看到这一点时，他们会扬起眉毛，这表明我可能陷入了一个坏习惯。但我想知道，这种方式和“典型”方式有什么区别吗？

```
if(foo == true)
{
    //do a bit more stuff
} 
```

我是否落入了新程序员的常见陷阱？还是没有区别（至少是明显的区别）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:37:57.603

我从不写 == true 或 == false。在我看来，这与 if 句的观点背道而驰。

if 基本上是：如果布尔表达式为真，则执行某些操作。Boolean 本身就是一个布尔表达式，那么为什么要包装它呢？

所以在我看来，使用 == true 的人是有坏习惯的人。因为他们表现出对语言如何工作的无知。

想想这些“允许”的写 if (Foo) 和 if (!Foo) 的方式：

```
if (Foo == true) //If Foo is the same as true
if (Foo != true //If Foo is not the same as true
if (Foo != false) //if Foo is not the same as false
if (Foo == false) //If Foo is the same as false
if (Foo) //If Foo
if (!Foo) //If not Foo 
```

将 == 和 != 与布尔值一起使用实际上引入了在编程和阅读代码时犯错的新方法。

Boolean 和 !Boolean 很难被误读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:37:08.777

我想大多数语言都建议按照你的方式做

```
if(foo)
{
    //do stuff
} 
```

例如**Python [PEP8](http://www.python.org/dev/peps/pep-0008/)说**

不要使用 == 将布尔值与 True 或 False 进行比较。

```
Yes:   if greeting:
No:    if greeting == True:
Worse: if greeting is True: 
```

**[Java 编程语言 7 的代码约定的](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-142311.html#449)**另一个示例

if-else 类语句应具有以下形式：

```
if (condition) {
    statements;
} 
```

只是一个小提示：谈到条件检查，这是我几周前听到的一个很好的提示如果您在 C 中进行比较，例如

`if(variable == "value") ....`

你会遇到这样的问题，如果你不小心写`if (variable = "value") ...` 编译器不会抛出错误，所以有些人使用的约定`if ("value" == variable) ...`，那么如果你不小心写`=`而不是`==`，编译器会抛出错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:31:50.377

大多数编码约定告诉您布尔检查被测试为

```
if(someBoolean) { 
```

或者

```
if(!someBoolean) { 
```

这只是提高了可读性。如果您不确定，请查看一些代码约定，以下是 Java 代码约定：[http ://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T09:48:24.460

检查`if(foo == true)`手段

> 检查 foo 是否等于 true 是否等于 true

在我看来，这只是一个开销。

# python - 在 Python 中解析 XML 信封

> ID：14976346
> 
> 赞同：0
> 
> 时间：2013-02-20T09:28:44.060
> 
> 标签：python, xml, soap

我收到了 SOAP 的回复：

```
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope">
 <env:Body>
  <env:Fault>
   <env:Code>
    <env:Value>env:Receiver</env:Value>
    <env:Subcode>
     <env:Value>-10</env:Value>
    </env:Subcode>
   </env:Code>
   <env:Reason>
    <env:Text xml:lang="en">10001069 - Item 804006 not active </env:Text>
   </env:Reason>
   <env:Detail>
    <Object xmlns="">17</Object>
    <ObjectIndex xmlns="">1</ObjectIndex>
    <Command xmlns="">AddObject</Command>
    <SessionID xmlns="">58711</SessionID>
   </env:Detail>
  </env:Fault>
 </env:Body>
</env:Envelope> 
```

我想访问/知道 tag `Reason`，就像在 python 中一样：`print ObjectXML.Body.Reason.Text` 例如，我想在节点内使用点表示法。我是怎么做到的？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:43:41.963

您可以使用 cElement API 根据 python 对象获取 XML 标记的句柄，然后使用以下 activestate 配方将 XML 转换为 dict 表示（仅推荐用于较小的 XML 文件，配方中的代码可能需要一些修改）。

```
import xml.etree.cElementTree as ElementTree
import XmlDictConfig as XmlDictConfig

if __name__ == "__main__":
  string_containing_my_xml = "read your XML into a string".
  root = ElementTree.parse(StringIO.StringIO(string_containing_my_xml)).getroot()
  xmldict = XmlDictConfig(root) // XmlDictConfig is available in activestate recipe. 
```

[http://code.activestate.com/recipes/410469-xml-as-dictionary/](http://code.activestate.com/recipes/410469-xml-as-dictionary/)

如果您有任何不清楚的地方，请告诉我。

# java - Java 独立应用程序日志记录异常 (log4j)

> ID：14976348
> 
> 赞同：1
> 
> 时间：2013-02-20T09:29:03.717
> 
> 标签：java, logging, log4j

我有一个独立的 java 应用程序。应用程序正在使用几个库，它由 maven 和“shade”插件管理，以创建一个包含所有依赖项的大 jar。我在将未捕获的异常记录到文件时遇到问题（应用程序在 linux 上运行）。我配置了 log4j.properties 并添加了滚动文件附加程序。它正在工作，但只要抛出异常，它就会打印在控制台上，而不是在配置的日志文件中。基本上，我以包含所有 INFO+ 条目的日志文件结束，但没有例外（未捕获）。

这是 log4j.properties：

```
# Root logger option
log4j.rootLogger=INFO, file

# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=logs/my-app.log
log4j.appender.file.MaxFileSize=100MB
log4j.appender.file.MaxBackupIndex=10
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n 
```

我使用以下方式运行应用程序：

```
java -jar -Dlog4j.configuration=file:log4j.properties myApp.jar 
```

目前，我使用控制台附加程序绕过了这个问题，并使用以下方法运行应用程序：

```
java -jar -Dlog4j.configuration=file:log4j.properties myApp.jar >> logs/my-app.log 2>&1 
```

...但我真的很想使用滚动文件附加程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:40:55.173

找到了解决此类问题的方法。这很容易。您需要在“主”类中添加 DefaultUncaughtExceptionHandler。这是片段：

```
 Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {

        @Override
        public void uncaughtException(Thread t, Throwable e) {
            logger.error("Uncaught exception", e);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:30:49.983

作为例外，你不应该使用 e.printStackTrace() 而是使用 logger.fatal(e.getStrackTrace())。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:36:19.293

如果异常*未被捕获*，那么 log4j 根本不会记录它们。所以我认为重定向非常有用，无论如何。

请注意，如果（比如说）您通过 kill -3 触发线程堆栈跟踪，*则会*出现`stderr`，因此我总是会捕获`stderr`/`out`并将其写入与 log4j 文件不同的日志文件中。

由于您不能保证写入同一个日志文件的两个进程会正确交错，因此我不会将重定向和 log4j 都记录到同一个日志文件中（就像您在上面所做的那样）。

# jquery - jQuery多维数组名称选择器

> ID：14976351
> 
> 赞同：3
> 
> 时间：2013-02-20T09:29:06.153
> 
> 标签：jquery, arrays, jquery-selectors, multidimensional-array

您好我正在尝试按名称选择表单输入，但是我的表单设置为发布到多维数组中

我正在尝试使用

> $('输入[名称=地址[永久][街道]]')

选择元素但得到以下响应

> 未捕获的错误：语法错误，无法识别的表达式：input[name=address[permanent][street]]

这是可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T09:31:05.017

尝试在你的循环中使用`$('input[name="address[permanent][street]"]')`或`$('input[name="'+ index +'"]')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:33:43.167

试试这个

```
var strAddress=address[permanent][street];
$('input[name='+strAddress+']') 
```

**更新**

```
$('input[name="address[permanent][street]"]') 
```

如果您输入的名称是`address[permanent][street]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-23T18:56:15.037

使用[带选择器的开头](https://api.jquery.com/attribute-starts-with-selector/)：`'[name^="address"]'`

# android - Android Emulator 未在 Ubuntu 中启动

> ID：14976353
> 
> 赞同：11
> 
> 时间：2013-02-20T09:29:11.007
> 
> 标签：android, android-emulator, ubuntu-11.04, eclipse-adt

我有 Ubuntu 11.04，我下载了最新的 eclipse ADT 包，我也安装了所有`ia32libs`，我不知道为什么模拟器没有启动，我尝试了各种设备配置，我有 4 个平台 2.2、2.3、4.0、4.2。我尝试了各种排列和组合，但虚拟设备没有显示出来——没有一个。

我还在其他 SO'questions 中尝试了各种解决方案，但它们并没有解决我的问题。我已经**被困在这几个星期了**，我仍然没有到达哪里？请帮助

**仅供参考：**我也有 eclipse Helios，因为它工作正常，但我无法获取/下载 3.0/Honeycomb 以上的平台，而在 Helios 中，虚拟设备工作正常。我不知道它是否相关，但仍然..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T10:02:01.303

在命令行参数中运行你的模拟器

要从命令行启动模拟器实例，请导航到`tools/`SDK 文件夹。输入模拟器命令如下：

```
emulator -avd <avd_name> 
```

更多关于模拟器[链接在这里：](http://developer.android.com/tools/devices/emulator.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-28T12:04:42.890

在带有 NVidia 显卡的 Ubuntu 14.04 64 位上，我必须执行以下操作：

1.  为 Eclipse 安装 SDK 和 ADT 插件
2.  安装 32 位库`sudo apt-get install lib32stdc++6 lib32z1`
3.  安装 OpenGL 库`sudo apt-get install libgl1-mesa-dev`
4.  为显卡安装专有驱动程序：系统设置 > 软件和更新 > 附加驱动程序 NVIDIA 二进制驱动程序版本 331.38
5.  在 Eclipse 中，运行 Android Virtual Device Manager 并编辑设备。启用“使用主机 GPU”并保存。

然后它起作用了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-13T23:20:41.600

Ubuntu Android 模拟器问题 [已解决]

android 模拟器的问题不在于硬件驱动程序。它是 OpenGL 驱动程序。要解决它，请执行以下步骤：

1.  打开 synaptic 包管理器（如果没有请从 Ubuntu 软件中心安装）
2.  在快速过滤器中输入“opengl”并按搜索。
3.  选择以下软件包：
    `libgles1-mesa-dev`
    `libgles2-mesa-dev`
    `libgles1-mesa`
    `libgles2-mesa`
    `libqt4-opengl [Update/Upgrade]`
    `glmark2`
    `glmark2-es2`
    `libgles1-mesa-dbg`
    `libgles2-mesa-dbg`
    `freeglut3`
    `libhugs-opengl-bundled`

4.  选择程序
    右键单击​​包并选择“标记为安装”。

5.  并单击“应用”。
6.  使用模拟器享受安卓编程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-22T15:51:50.913

在 Ubuntu 12.04 LTS 64 位（安装了 32 位库）上，我的案例是：

1-正确下载并安装SDK

2-将ADT插件下载到Eclipse并重新启动它

3-正确设置SDK目录

4-创建一个Android项目，然后点击RUN AS > Android application

5-问我一个模拟器，所以我从 AVD 创建了一个（在运行配置的一些步骤之后）

6-然后我再次右键单击该应用程序，运行为> A​​ndroid应用程序

7-出现一条消息>错误：无法启动模拟器...正确安装SDK（类似的东西）

8-重新启动Eclipse ...一切都很好！！！！！！！！！！！！！！！！！！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-09T22:40:22.243

您需要更改以下选项：
编辑您的**avd**并将“仿真性能”选项更改为“软件”。

它会起作用的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-27T09:47:17.537

我正在使用`Bumblebee`禁用我的nvidia卡...

似乎 Android Studio 不喜欢那样。

```
optirun /opt/android-studio/bin/studio.sh 
```

然后在 Android Studio 中打开 AVD Manager 使其工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-28T07:20:20.790

来源：[https ://cialu.net/solve-android-studio-avd-issue-with-ubuntu-16-10/](https://cialu.net/solve-android-studio-avd-issue-with-ubuntu-16-10/)

```
 sudo apt-get install lib64stdc++6:i386

   sudo apt-get install mesa-utils 
```

（寻找sdk的路径）

```
 cd YOURPATH/Android/Sdk/emulator/lib64

  mv libstdc++/ libstdc++.bak

  ln -s /usr/lib64/libstdc++.so.6  libstdc++ 
```

最后，使用模拟器再次运行您的应用程序。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-17T13:12:17.427

[![在此处输入图像描述](../Images/f64a0add1dd49fc8816ee23770c5c5e7.png)](https://i.stack.imgur.com/Jofr1.png) 如果您遇到上述错误，请更新/升级您的 Linux 机器（Ubuntu），例如

1.  sudo apt-get 更新
2.  sudo apt-get 升级

并确保按照[Android 开发者](https://source.android.com/source/initializing#installing-required-packages-ubuntu-1404)网站安装了所有必需的软件。 **如果您仍然面临与每个图像相同的问题**，请在启动模拟器之前在终端中使用 su 模式。 **sudo su -** 使用此命令成为 Su 用户

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-06T12:31:00.207

由于 Ubuntu 既不支持 32 位也不支持 Android 开发者工具支持 32 位（现在和合法），还有一些具有 512 mb ram 之类的低端 pc，并且对于随便玩 pc 游戏，运行 android 的最佳选择是***Android X86*** 。它快速且始终运行的 android 模拟器（实际上不是模拟器，而是一个操作系统）你可以将它用于任何事情，即使 20 岁的电脑也可以非常流畅地运行它。

***要在您的任何计算机上运行它，请按照以下步骤操作：*** -

*   转到[https://www.android-x86.org/](https://www.android-x86.org/)
*   从那里下载任何iso（我建议PC超过512 mb ram = 4.4 kitkat，最新的超过2gb ram（android 9.*））
*   下载 Rufus 或[Etcher](https://www.balena.io/etcher/)（推荐使用 Etcher，下载 Portable）
*   闪存到您的笔式驱动器或 SD 卡
*   保持插入并重新启动
*   您将在登录页面（返回您的电脑，[单击此处](https://www.google.com/search?q=how%20to%20boot%20from%20usb)）
*   单击 Live CD（如果不工作，请单击更多选项或 VESA 模式）

# android - Android：所有片段的一个活动

> ID：14976355
> 
> 赞同：0
> 
> 时间：2013-02-20T09:29:16.867
> 
> 标签：android, android-activity, fragment

只使用一个`Activity`来加载`Fragment`作为意图的附加内容传递的类是个好主意吗？这个解决方案有效，但我不确定这是一个好的模式。我想使用这种方法，因为（目前）每个片段“都是”一个活动，所以我宁愿避免为每个片段创建一个活动。

这是我唯一活动的示例：

```
public class GenericActivity extends FragmentActivity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.onepane);

    if (findViewById(R.id.fragment_container) != null) {

        if (savedInstanceState != null) {
            return;
        }

        String fragmentToLoadName;
        try{
            fragmentToLoadName = getIntent().getExtras().getString("FRAGMENT");
        }catch(NullPointerException e){ 
            FragmentHelper.add(R.id.fragment_container, new MainFragment(), 
                    MainFragment.class.getName(), getSupportFragmentManager());

        }

        if(fragmentToLoadName!=null){
            Class fragment_to_load_class = null;
            try {
                fragmentToLoadClass = Class.forName(fragmentToLoadName);
            } catch (ClassNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            try {
                FragmentHelper.add(R.id.fragment_container, (Fragment) fragmentToLoadClass.newInstance(), 
                        fragmentToLoadName, getSupportFragmentManager());
            } catch (InstantiationException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }

}

} 
```

# android - 如何在android中获取自动滚动文本视图

> ID：14976357
> 
> 赞同：1
> 
> 时间：2013-02-20T09:29:31.753
> 
> 标签：android, android-layout, textview

我在页脚中有文本视图，我想在页脚中滚动该文本。这是我的代码片段，但该文本不可滚动。任何人都可以帮助我提前感谢我的代码

```
public class Footer extends RelativeLayout{
    private TextView footer_TextVeiw;
    ImageView logout;
    public Footer(Context context, AttributeSet attrs) {
        super(context, attrs);
        String infService = Context.LAYOUT_INFLATER_SERVICE;
        LayoutInflater li = (LayoutInflater) getContext().getSystemService(infService);
        li.inflate(R.layout.footer_layout, this, true);
        footer_TextVeiw= (TextView) this.findViewById(R.id.text_Footer);  
        footer_TextVeiw.setSelected(true);    } } 
```

**我的 XML 布局**

```
<RelativeLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Footer" >

    <TextView
        android:id="@+id/text_Footer"
        android:layout_width="fill_parent"
        android:layout_height="25dp"
        android:layout_alignParentBottom="true"
        android:background="#ECEFF5"
        android:layout_centerHorizontal="true"
        android:marqueeRepeatLimit="marquee_forever"
        android:singleLine="true"
         android:scrollHorizontally="true" 
        android:ellipsize="marquee"
        android:text="@string/Footer"
         />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:32:54.043

你可以试试属性 `android:scrollbars="vertical" or Horizontal`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:34:39.940

放

```
android:maxLines = "AN_INTEGER"

android:scrollbars = "vertical" 
```

在 xml 文件中的 TextView 中。并使用

```
textView.setMovementMethod(new ScrollingMovementMethod()) 
```

# google-chrome - 在浏览器中模仿搜索引擎标题

> ID：14976363
> 
> 赞同：0
> 
> 时间：2013-02-20T09:29:59.560
> 
> 标签：google-chrome, google-chrome-extension, safari, safari-extension

我正在使用 Google Chrome 和 Apple Safari 作为浏览器。我希望看到像搜索引擎这样的网站——因为我有时会体验到我被视为“真正的人”而不是搜索引擎所提供的服务。

有没有办法在 Chrome 和/或 Safari 中做到这一点？可能带有扩展名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:07:49.097

你可以欺骗你的用户代理。[Chrome 的用户代理切换器](https://chrome.google.com/webstore/detail/user-agent-switcher-for-c/djflhoibgkdhkhhcedjiklpkjnoahfmg)是一个很好的扩展。只需对您选择的搜索机器人的用户代理进行谷歌搜索并输入，网站就会认为您是机器人。

# iphone - 下载线程出错

> ID：14976364
> 
> 赞同：0
> 
> 时间：2013-02-20T09:30:00.757
> 
> 标签：iphone, ios, objective-c, ipad, asihttprequest

我正在开发一个正在下载一系列 zip 文件的应用程序。

它工作正常，但有时它会崩溃，我可以在项目导航器中看到以下错误：

```
Thread 5 WebThread: EXC_??? (11)(code=0,subcode=0x0) 
```

有任何想法吗？我正在使用`ASIHTTPRequest`下载文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:43:01.763

您可以跟踪异常以获取更多详细信息吗？

用以下代码替换您的 main.m：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        int retVal = -1;
        @try {
            retVal = UIApplicationMain(argc, argv, nil, NSStringFromClass([FRAppDelegate class]));
        }
        @catch (NSException* exception) {
            NSLog(@"Uncaught exception: %@", exception.description);
            NSLog(@"Stack trace: %@", [exception callStackSymbols]);
        }
        return retVal;
    }
} 
```

我也`ASIHTTPRequest`用于下载，它对我来说很好用。我正在使用`ASINetworkQueue`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:46:52.207

除了使用 ASIHTTPRequest 之外，您还可以尝试异步请求。以下代码为您提供有关下载图像的详细信息，只需将其替换为您的 zip url 链接

这是另一种下载选项的方法。在应用程序中拥有更多线程功能会导致性能问题。

```
-(IBAction)startdownload
{
for (int i=0; i<[downloadarray count]; i++)   //download array have url links
{
NSURL *URL = [NSURL URLWithString:[downloadarray objectAtIndex:i]];
NSMutableURLRequest *urlRequest = [[NSMutableURLRequest alloc]initWithURL:URL];
NSOperationQueue *queue = [[NSOperationQueue alloc]init];
[NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)
{
if([data length] > 0 && [[NSString stringWithFormat:@"%@",error] isEqualToString:@"(null)"])
{
//make your image here from data.
UIImage *imag = [[UIImage alloc] initWithData:[NSData dataWithData:data]];
NSArray *array = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,  NSUserDomainMask, YES);
NSString *docDir = [array objectAtIndex:0];
NSString *imgstr=[NSString stringWithFormat:@"%d",i];
NSString *pngfilepath = [NSString stringWithFormat:@"%@sample%@.png",docDir,imgstr];
NSData *data1 = [NSData dataWithData:UIImagePNGRepresentation(imag)];
[data1 writeToFile:pngfilepath atomically:YES];
}
else if ([data length] == 0 && [[NSString stringWithFormat:@"%@",error] isEqualToString:@"(null)"])
{
NSLog(@"No Data!");
 }
else if (![[NSString stringWithFormat:@"%@",error] isEqualToString:@"(null)"]){
NSLog(@"Error = %@", error);
}
}];

}

 -(IBAction)viewfile
{
NSMutableArray *arr=[[NSMutableArray alloc]init];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pngfilepath = [NSString stringWithFormat:@"%@",documentsDirectory];
NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:pngfilepath error:&error];
  for (int i=0; i<[filePathsArray count]; i++){
NSString *pngfilepath = [NSString stringWithFormat:@"%@%@",documentsDirectory,    [filePathsArray objectAtIndex:i]];
[arr addObject:[UIImage imageWithContentsOfFile:pngfilepath]];
}
myimageview = [[UIImageView alloc] initWithImage:[arr objectAtIndex:0]]; //Here   myimageview is UIImageView

} 
```

希望能帮助到你 ！！！

# r - R中的If-Then循环无法识别条件语句

> ID：14976366
> 
> 赞同：0
> 
> 时间：2013-02-20T09:30:03.030
> 
> 标签：r

我有一个如下所示的数据框：

```
X Y
1 3
1 7
1 9
2 12
2 4
2 8 
3 11
3 3
3 5 
```

我想创建一个新变量 Z，如果 X = 1，则 = 0.25；如果 X = 2，则 = 0.75；如果 X = 3，则 = 0.95。

我试过下面的代码，它创建了一个变量 Z，然后在 X 上循环，检查 X 是否是某个值，然后将 Z 设置为相应的正确值。例如：

```
data$Z <- 0
for (i in 1:length(data$X)){
   if (data$X[i]==1) {data$Z <- 0.25)
   if (data$X[i]==2) {data$Z <- 0.50)
   if (data$X[i]==2) {data$Z <- 0.95)
} 
```

问题是由于某种原因，条件触发器在这段代码中没有被触发。如果我只用第一个 if 语句运行它，*所有*的 Z 都设置为 0.25。只有前两个，它们都是 0.50，等等。

关于发生了什么的任何线索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:35:20.063

在这里使用`ifelse`，因为它是矢量化的：

```
transform(dat, Z=ifelse(X==1,0.25,ifelse(X==2,0.75,0.95)))
 X  Y    Z
1 1  3 0.25
2 1  7 0.25
3 1  9 0.25
4 2 12 0.75
5 2  4 0.75
6 2  8 0.75
7 3 11 0.95
8 3  3 0.95
9 3  5 0.95 
```

PS：这里我假设 X 只取 3 个值。

**编辑**

我喜欢使用 sql case 进行此类操作。您保持清晰的业务逻辑，并且它作为矢量化版本（直觉）很快

```
library(sqldf)
dat$newX <- sqldf('SELECT CASE X 
       WHEN 1  THEN 0.25
       WHEN 2 THEN 0.5
       ELSE 0.95
       END AS newX
      FROM dat ') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T09:36:15.317

在这个简单的例子中，最简单的方法是使用子集：

```
data$Z <- 0.25
data$Z[data$X==2] <- 0.50
data$Z[data$X==3] <- 0.95 
```

不需要任何循环或 if/else 语句。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-20T10:21:59.347

到目前为止，所有这些答案都假设您只有 3 个值（正确地，没有理由假设其他）。

但是，假设您可能有 3 个以上的值，您可以`merge`在这种情况下使用：

```
# assuming this is your data (dummy)
set.seed(45)
df <- data.frame(x=rep(1:5, each=5), y=sample(25)) 
```

在这里，您有 5 个唯一值`x`。您可以`data.frame`使用要为 X 的每个值生成附加列的值创建一个：

```
# here for each unique x, there is a value (just for example, randomly generated)
# equivalent to 0.25, 0.5 and 0.95 in your case
key <- data.frame(x=1:5, val=runif(5)) 
```

现在，您可以`merge`用作：

```
merge(df, key, by="x", all=T) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-20T09:32:11.887

您需要在 x 满足这些条件*的相同索引处将 Z 设置为所需的值，因此：*

```
data$Z <- 0
for (i in 1:length(data$X)){
   if (data$X[i]==1) {data$Z[i] <- 0.25)
   if (data$X[i]==2) {data$Z[i] <- 0.50)
   if (data$X[i]==3) {data$Z[i] <- 0.95)
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-20T09:39:35.547

它只使用一个`ifelse`命令：

```
transform(dat, Z = ifelse(X == 3, 0.95, 0.25 + 0.5 * (X - 1)))

  X  Y    Z
1 1  3 0.25
2 1  7 0.25
3 1  9 0.25
4 2 12 0.75
5 2  4 0.75
6 2  8 0.75
7 3 11 0.95
8 3  3 0.95
9 3  5 0.95 
```

它甚至可以在没有任何东西的情况下工作`ifelse`（感谢数学）：

```
transform(dat, Z = 0.25 + round(0.50 * (X - 1) ^ .48, 2))

  X  Y    Z
1 1  3 0.25
2 1  7 0.25
3 1  9 0.25
4 2 12 0.75
5 2  4 0.75
6 2  8 0.75
7 3 11 0.95
8 3  3 0.95
9 3  5 0.95 
```

# utf-8 - 如何在 LibreOffice 中编写 UFT8 编码文件？

> ID：14976370
> 
> 赞同：0
> 
> 时间：2013-02-20T09:30:09.177
> 
> 标签：utf-8, libreoffice

我想用 LibreOffice Basic 编写一个 UFT8 编码的文本文件。

此处的示例[http://wiki.openoffice.org/wiki/Documentation/BASIC_Guide/Structure_of_Text_Documents#Example:_simple_HTML_export](http://wiki.openoffice.org/wiki/Documentation/BASIC_Guide/Structure_of_Text_Documents#Example:_simple_HTML_export)显示了使用常规文本编写

```
 Filename = "c:\temp\text.html"
 FileNo = Freefile
 Open Filename For Output As #FileNo   
 Print #FileNo, "<html><body>" 
```

我逐段遍历文档，并在逐个文本元素的段落内遍历文本元素

```
 Enum2 = TextElement.createEnumeration
 While Enum2.hasMoreElements
     TextPortion = Enum2.nextElement
     ...
 Wend 
```

根据调查结果将文档内容写入文本 HTML 文件。

但是没有写入 Unicode 字符。是否可以启用 UFT8 字符写入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:28:09.950

一种解决方法是首先将所有 Unicode 字符转换为 NCR。那么 PRINT 命令不处理 Unicode 也没关系。

```
' search and replace Unicode values with NCRs (Numerical Character References)
' http://en.wikipedia.org/wiki/NCR

Dim oDoc,aFind,aReplace,aRayCount,oFandR

    oDoc = thisComponent

    aFind = Array("Ɛ","ɛ","Ɔ","ɔ","Ŋ","ŋ")
    aReplace = Array("&#x190;","&#x25B;","&#x186;","&#x254;","&#x14A;","&#x14B;")
    index = 0

    oFandR = oDoc.createReplaceDescriptor
    oFandR.SearchCaseSensitive = true
    oFandR.SearchRegularExpression = false
    While index <= uBound(aFind)
        oFandR.setSearchString(aFind(index))
        oFandR.setReplaceString(aReplace(index))
        index = index + 1
        oDoc.ReplaceAll(oFandR)
    Wend
End Sub 
```

改编自

[http://forum.openoffice.org/en/forum/viewtopic.php?f=21&t=2437](http://forum.openoffice.org/en/forum/viewtopic.php?f=21&t=2437)

# asp.net - 如果用户输入了错误的值，如何在自动完成下获得控件

> ID：14976372
> 
> 赞同：1
> 
> 时间：2013-02-20T09:30:10.350
> 
> 标签：asp.net, jquery, autocomplete

我有一个表格，其中每一行都有一个具有自动完成功能的文本框。在服务器代码中，它看起来像

```
<td><asp:TextBox ID="tbNumber" runat="server" onfocus="AttachNumbers(this)" /></td> 
```

在客户端

```
function AttachNumbers(sender) {
    $(sender).autocomplete({ source: GetNumbers, minLength: 2 });
}

function GetNumbers(request, response) {
    $.ajax({
        type: "POST",
        url: AJAXSERVICEMETHOD,
        data: "{ 'term': '" + request.term + "', 'count': 10 }",
        contentType: "application/json; charset=utf-8",
        dataType: "json",

        success:
            function(data, textStatus, jqXHR) {
                response(data.d);
                //HighlightError(HOW TO GET CONTROL HERE?);
            },
        error:
            function(jqXHR, textStatus, errorThrown) {
            }
    });
} 
```

如果用户没有从列表中选择数字，我需要的是突出显示文本框（使用我拥有的功能`HighlightError(controlid)`）如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:00:07.423

您可以使用 jQuery.proxy作为上下文传递`sender`给函数：`GetNumbers`

```
function AttachNumbers(sender) {
    var sourceProxy = $.proxy(GetNumbers, sender);
    $(sender).autocomplete({ source: sourceProxy, minLength: 2 });
}

function GetNumbers(request, response) {
    var target = this;
    $.ajax({
        type: "POST",
        url: AJAXSERVICEMETHOD,
        data: "{ 'term': '" + request.term + "', 'count': 10 }",
        contentType: "application/json; charset=utf-8",
        dataType: "json",

        success:
            function(data, textStatus, jqXHR) {
                response(data.d);
                // target refers to sender control
                //HighlightError(HOW TO GET CONTROL HERE?);
            },
        error:
            function(jqXHR, textStatus, errorThrown) {
            }
    });
} 
```

# java - Hibernate：许多 ScrollResults 来获取完整的数据库（如子查询策略）

> ID：14976374
> 
> 赞同：0
> 
> 时间：2013-02-20T09:30:16.390
> 
> 标签：java, hibernate, jpa, fetching-strategy

我尝试以最少的请求转储到文件完整数据库的内容。

因此，**如何使用*query.scroll启用**子查询获取*？**

 *## 我的对象：

我有类似的数据库：

```
Employee (1) ------ (0..n) Address 
```

员工等级：

```
...
@OneToMany(mappedBy = "employee", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
@Fetch(FetchMode.SUBSELECT)
public Set<Address> getAddresses() { ... } 
```

地址类：

```
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "employee_id", nullable = false)
public Employee getEmployee() { ... } 
```

Java代码：

```
 session.createQuery("FROM Employee").scroll(ScrollMode.FORWARD_ONLY); 
```

## 预期的 ：

当我使用*query.find*方法时，我得到：

```
select * from employee
select * from address where employee_id in (select employee_id from employee) 
```

但是完整数据库上有 OutOfMemoryError 。

当我使用*session.scroll*时，它使用批量获取：

```
select * from employee
-- and n times :
select * from address where employee_id = ? or employee_id = ? ... 
```

因此，我怎样才能使用 query.scroll 进行“query.find* 的查询*”*

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T19:46:31.680

我尝试了一些方法：自己创建 2 个*ScrollResult*和映射关系，替换 hibernate 的*PersistentSet*。

这是工作 ！但我不确定这是一个*好习惯*......而且它需要大量数据库的临时内存。

对这种做法有什么建议吗？*

# jquery - beforeSend：AJAX jQuery POST 不会在 firefox 中传递标头值

> ID：14976375
> 
> 赞同：1
> 
> 时间：2013-02-20T09:30:17.327
> 
> 标签：jquery, asp.net, ajax, firefox, wcf-data-services

我在 jQuery AJAX POST 中调用了一个 REST 服务。当我在 AJAX 调用中不使用**beforeSend**函数时，该服务被调用并且 http 请求变为**POST请求。****但是当使用 beforeSend 函数时，请求作为OPTIONS**请求传递，服务没有被调用并返回 null。它适用于 IE8。添加**beforeSend**后 Firefox 中会发生什么？我的代码中的任何错误。 **jQuery**代码

 ******```
var postCall = function () {
$.support.cors = true;
var HFAssoRefId = document.getElementById('MainContent_HFAssoRefId').value;
var HFLoginId = document.getElementById('MainContent_HFLoginId').value;
var HFPartnerId = document.getElementById('MainContent_HFPartnerId').value;
var HFFirstName = document.getElementById('MainContent_HFFirstName').value;
var HFLastName = document.getElementById('MainContent_HFLastName').value;
var HFComments = document.getElementById('MainContent_HFComments').value;
var HFCreatedDate = document.getElementById('MainContent_HFCreatedDate').value;
var HFToken = document.getElementById('MainContent_HFToken').value;
var Input = {
AssoRefId: HFAssoRefId, LoginId: HFLoginId, 
PartnerId: HFPartnerId, FirstName: HFFirstName,
LastName: HFLastName, Comments: HFComments,
CreatedDate: HFCreatedDate, Token: HFToken
;
alert(JSON.stringify(Input));
var url = document.URL;
var currentdate = new Date();
var datetime = (currentdate.getMonth() + 1) + "/"
+ currentdate.getDate() + "/"
+ currentdate.getFullYear() + " "
+ currentdate.getHours() + ":"
+ currentdate.getMinutes() + ":"
+ currentdate.getSeconds();
$.ajax({
type: "POST",
beforeSend: function (xhr, settings) {
xhr.setRequestHeader("Date", datetime);
xhr.setRequestHeader("URL", url);
},
url: "http://localhost:40680/LinkService.svc/TokenInsertion",        
data: JSON.stringify(Input),
contentType: "application/json",
dataType: "json",
success: function (response) {
alert(response);
},
error: function (xhr, status, error) {
alert(error);
alert(status);
}
});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:53:53.820

这是一个[**很好的例子。**](http://www.c-sharpcorner.com/blogs/2918/how-to-set-a-request-header-in-a-jquery-ajax-call.aspx)

```
$.ajax(
{
    type:"POST",
    beforeSend: function (request)
    {
        request.setRequestHeader("Authority", authorizationToken);
    },
    url: "entities",
    data: "json=" + escape(JSON.stringify(createRequestObject)),
    processData: false,
    success: function(msg)
    {
        $("#results").append("The result =" + StringifyPretty(msg));
    }
}); 
```******

# c# - 带有相关表的 EF 自定义查询

> ID：14976380
> 
> 赞同：0
> 
> 时间：2013-02-20T09:30:24.950
> 
> 标签：c#, sql, entity-framework

我有一个代码优先数据模型，我需要在其中执行复杂的查询，从相关表中返回一些聚合信息。首先我的简化模型：

```
public class Forum 
{
    public virtual int ForumID { get; set; }
    public virtual string Name { get; set; }
    public virtual ICollection<Topic> Topics { get; set; }
}

[NotMapped] 
public class ForumWith : Forum 
{
    public virtual int topics { get; set; }
    public virtual int messages { get; set; }
    public virtual DateTime lastDate { get; set; }
    public virtual int lastUser { get; set; }
}

public class Topic 
{
    public virtual int TopicID { get; set; }
    public virtual string Subject { get; set; }
    public virtual int ForumID { get; set; }
    [ForeignKey("ForumID")]
    public virtual Forum Forum { get; set; }
    public virtual ICollection<Message> Messages { get; set; }
}

public class Message
{
    public virtual int MessageID { get; set; }
    public virtual int TopicID { get; set; }
    [ForeignKey("TopicID")]
    public virtual Topic Topic { get; set; }
    public virtual string Text { get; set; }
    public virtual DateTime CreatedDate { get; set; }
    public virtual User CreatedBy { get; set; }
} 
```

我想要做的是用最后创建的消息中的主题数、消息数以及日期和用户填充“ForumWith”对象。

我的第一个解决方案是在 forum.topics 和 forum.topics.messages 集合上使用几个循环。这工作得很好，但性能很糟糕。

为了解决这个问题，我创建了一个 SQL 查询，对 3 个表进行左连接，并使用 group by 和 sum/max 聚合。这个 SQL 我用 context.Database.SqlQuery(sql); 执行 并且数据填充得很好，性能非常好。

我的问题是：

1.  有什么方法可以用实际的用户对象“User lastUserObject”替换 ForumWith 中的“int lastUser”，而不必遍历结果集并从 context.Users 手动填充它。

2.  有没有更好的方法通过 linq/EF 进行这种聚合，同时保持性能？

SQL：

```
SELECT  dbo.Forum.ForumID ,
        dbo.Forum.Name ,
        COUNT(DISTINCT dbo.Topics.TopicID) AS topics,
        COUNT(DISTINCT MessageID) AS messages, 
        MAX(dbo.Messages.CreatedDate) AS lastDate, 
        (SELECT UserName FROM [User] where UserId = 
        CONVERT(INT,SUBSTRING(max(CONVERT(varchar,dbo.Messages.CreatedDate,20) + '#' + CONVERT(VARCHAR,dbo.Messages.CreatedBy_UserId,20)),21,10))) AS lastUser
FROM dbo.Forum 
    LEFT JOIN dbo.Topics ON dbo.Forum.ForumID = dbo.Topics.ForumID
    LEFT JOIN dbo.Messages ON dbo.Topics.TopicID = dbo.Messages.TopicID
GROUP BY  dbo.Forum.ForumID ,
        dbo.Forum.Name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:53:08.593

有几种 Linq 2 EF 方法可以实现这一点。下面显示的第一个可能是两者中最慢的，但是如果没有您的架构和填充的数据，我无法确定。两者都假设列表包含填充的论坛列表（很可能会从您的上下文中提取，即 dbContext.Forums）

方法一

```
list.Select(
            x =>
            new ForumWith
                {
                    ForumID = x.ForumID,
                    Name = x.Name,
                    topics = x.Topics.Count,
                    messages = x.Topics.SelectMany(y => y.Messages).Count(),
                    lastDate = x.Topics.SelectMany(y => y.Messages).OrderByDescending(y => y.CreatedDate).First().CreatedDate,
                    lastUser = x.Topics.SelectMany(y => y.Messages).OrderByDescending(y => y.CreatedDate).First().CreatedBy
                }); 
```

方法二

```
from forum in list
let latest = forum.Topics.SelectMany(x => x.Messages).OrderByDescending(x => x.CreatedDate).First()
select
    new ForumWith
        {
            ForumID = forum.ForumID,
            Name = forum.Name,
            topics = forum.Topics.Count,
            messages = forum.Topics.SelectMany(y => y.Messages).Count(),
            lastDate = latest.CreatedDate,
            lastUser = latest.CreatedBy
        }; 
```

# jquery - jquery ui datepicker - 在 beforeShow 上获取输入的兄弟姐妹

> ID：14976381
> 
> 赞同：0
> 
> 时间：2013-02-20T09:30:31.187
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在使用 jquery 的 datepicker，我正在尝试根据兄弟选择元素中的值在 beforeShow 上设置一个数组。

这是我尝试过的，但它既不工作也不抛出任何错误。

```
beforeShow: function(input, inst) {
    $(input).siblings("select.startdates").find("option").each( function() {
        startDates.push($(this).val())
    });
    console.log($(input).siblings("select.startdates"))
}, 
```

日志返回`[]`

html 看起来像这样：

```
<input class="hasDatepicker" id="myInput" />
<div>
<select class="startDates">
    <option value="2013, 2, 1">01/03/2013</option>
    ....
</select>
</div> 
```

# javascript - 如何使用链接而不是警报？

> ID：14976382
> 
> 赞同：0
> 
> 时间：2013-02-20T09:30:32.147
> 
> 标签：javascript

这是我的代码

```
function destroy()
{
    if (confirm("Are you sure?")) {
        alert("User will be deleted")
    }

    else {

    }

} 
```

但我不想显示警报消息，我希望用户通过我自己的链接重定向。我应该写什么而不是`alert`这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:31:47.470

```
if (confirm("Are you sure?")) {
    window.location = 'your_link_here';
} 
```

# ios - CALayer：屏幕点到图层点

> ID：14976394
> 
> 赞同：2
> 
> 时间：2013-02-20T09:31:05.827
> 
> 标签：ios, objective-c, cocoa

我有一个`CGPoint`在屏幕坐标中的。我还有一个`CALayer`应用变换矩阵（缩放、旋转和平移）。

如何将屏幕坐标中的点转换为图层的局部坐标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:39:06.590

`CALayer`有方法可以做到这一点，在[文档](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html)`– convertPoint:fromLayer:`中查找和`– convertPoint:toLayer:`

# mysql - MySQL查询根据另一个字段枚举行

> ID：14976395
> 
> 赞同：1
> 
> 时间：2013-02-20T09:31:08.517
> 
> 标签：mysql, field, rows, enumerate

我有这个结构：

```
表1    表 2
id_t1 id_t2
id_t2

```

现在，我需要在单个查询中通过 id_t2 枚举 table2 中的行。

输出示例：

```
枚举 id_t1 id_t2
1 1 1
2 2 1
3 3 1
1 4 2
2 5 2
4 6 1

```

导致使用每个 id_t2 的独占索引枚举的行。

我知道我必须使用变量（如@ennum）并且我已经能够在全局范围内枚举它们，但我还没有找到正确的方法来做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:46:28.810

试试这个，

```
SELECT  g.ennum, 
        g.id_t1,
        g.id_t2
FROM 
    (
        SELECT  t.id_t1,
                t.id_t2,
                @running1:=if(@previous1=concat(t.id_t2),@running1,0) + 1 as ennum  ,
                @previous1:=concat(t.id_t2) 
        FROM TableName t
     )  g
ORDER BY ID_T2, ennum 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/cc2d5/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T20:01:16.093

好的，感谢@JW。我想我明白了：

为此在 phpmyadmin 中工作：

1.  之前需要将变量*running1*和*previous1*设置为 0。
2.  嵌套查询必须按*idt2*排序，就好像它不会正确更新正在运行的索引一样。

结果是：

```
SET @running1:=0;
SET @previous1:=0;
SELECT  g.ennum, 
    g.id_t1,
    g.id_t2
FROM 
    (
        SELECT  t.id_t1,
                t.id_t2,
                @running1:=if(@previous1=concat(t.id_t2),@running1,0) + 1 as ennum  ,
                @previous1:=concat(t.id_t2) 
        FROM TableName t
        ORDER BY id_t2
    ) AS g
ORDER BY id_t2, ennum 
```

# less - Lesscss 上一级混音

> ID：14976396
> 
> 赞同：0
> 
> 时间：2013-02-20T09:31:13.533
> 
> 标签：less, mixins

很确定这根本不可能，但是......

假设我有这个 mixin：

```
.horizontalList() {
    background:blue;
        & li {
            display:inline-block;
        }
} 
```

它生成的css是：

```
.something{
    background:blue;
}

.something li{
    display:inline-block;
} 
```

是否可以使用类似的 mixin 生成以下 CSS？

```
.something{
    background:blue;
}

.something li{
    display:inline-block;
}

.ie6 .something li,
.ie7 .something li
{
    display:inline;
} 
```

...所以 ie6 和 ie7 的东西在选择器之前，我可以利用[Paul Irish 条件评论的想法](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

我知道我可以添加一个 css hack 来做旧的 IE 东西，但我不想在我的样式表中包含这些。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:13:41.080

您需要在 mixin 中执行此操作：

**较少的**

```
.horizontalList() {
    background:blue;
        & li {
            display:inline-block;
        }
        .ie6 & li,
        .ie7 & li {
            display: inline;
        }
} 
```

**称它为**

```
.something {
  .horizontalList;
} 
```

**CSS 输出**

```
.something {
  background: blue;
}
.something li {
  display: inline-block;
}
.ie6 .something li,
.ie7 .something li {
  display: inline;
} 
```

# hibernate - 休眠中列级的自定义sql操作

> ID：14976402
> 
> 赞同：2
> 
> 时间：2013-02-20T09:31:26.553
> 
> 标签：hibernate, hibernate-mapping

在 Hibernate 中，可以覆盖实体级别的 SQL 操作。有很多[例子](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch13.html#example-custom-crdu-via-annotations)如何做到这一点。

在 Hibernate[文档](http://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch13.html#querysql-cud)中，您还可以阅读到可以在列级别覆盖 SQL 语句。除了 hibernate 注释之外，还可以在 Hibernate-API 中编写它：

```
org.hibernate.mapping.Column.customWrite(String)
org.hibernate.mapping.Column.customRead(String) 
```

但我不知道如何让我的注释映射实体与休眠列类一起工作

有人知道如何为列编写 sql 语句吗？怎么可能让这些东西发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T20:24:34.643

我使用了@ColumnTransformer(write="") 并且效果很好。

它可以帮助您为每次由 hibernate 执行插入或更新查询时插入到最终查询中的列挑选一个写入表达式。

参考链接：[http ://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/mapping.html#mapping-column-read-and-write](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/mapping.html#mapping-column-read-and-write)

# jquery - jQuery：hashchange 函数问题

> ID：14976403
> 
> 赞同：0
> 
> 时间：2013-02-20T09:31:29.790
> 
> 标签：jquery, html, hash, hashchange

我在我的网站上设置了一个 hashchange 函数，它允许我在“关于”页面上的 6 个不同部分之间切换，这很好用，它将哈希附加到每个部分没有问题。
我遇到的问题是，当您从另一个页面链接到这些哈希时，它们无法加载相关内容，例如：www.thisisawebsite.com/about/#section03
当您在 about 页面上时，哈希工作正常，但来自其他任何地方它只加载section01。

```
jQuery(document).ready(function(){
jQuery('.about').hide();
jQuery('#section01').show();

jQuery(function(){
jQuery(window).on('hashchange', function(){
        var hash = window.location.hash;
     jQuery('.sub-menu').each(function(){
           jQuery('.about').hide();
         if (jQuery(this).attr('hook') === hash.replace('#section', '')) {
           jQuery('#section'+jQuery(this).attr('hook')).fadeIn();
           return false;
         }
    });  

});
});
jQuery(window).trigger('hashchange');
}); 
```

这可以解决吗，因为我想要使用 hashchange 函数的整个想法是这样我不必有 6 个单独的页面，我可以在一个页面上显示/隐藏每个部分并使用哈希链接到它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:45:12.187

如果您加载已经存在哈希标签的页面，窗口上的 hashchange 事件是否会触发？如果它不存在您的问题，我建议将每个循环重构为一个单独的函数，然后在文档准备好时调用它以查看是否存在任何哈希标签，然后淡入内容。

像这样的东西（我没有尝试过，因为我没有你的 DOM，但你会明白的。

```
jQuery(document).ready(function(){

    jQuery(window).on('hashchange', function(){
        var hashFound = determineContent();
        if(hashFound) return false;
    });

    function determineContent(){

        var hash = window.location.hash;
        jQuery('.about').hide();

        jQuery('.sub-menu').each(function(){

             if (jQuery(this).attr('hook') === hash.replace('#section', '')) {
               jQuery('#section'+jQuery(this).attr('hook')).fadeIn();
                 return true;
             }
        });

        // no hash found, so let's show #section01
        jQuery('#section01').show();

        return false;
    }

    determineContent();
}); 
```

如果这不起作用，那么有一个很棒的 jQuery 插件，它也可以处理 ajax 事件。我一直在将它用于基于 js 的 Web 应用程序。

[http://www.asual.com/jquery/address/](http://www.asual.com/jquery/address/)

# java - Maven 无法获取依赖项

> ID：14976404
> 
> 赞同：1
> 
> 时间：2013-02-20T09:31:30.313
> 
> 标签：java, git, maven, jenkins

所以我对 Maven 还是很陌生，所以我真的不明白整个过程是如何运作的。无论如何，我试图让 maven 编译我的项目，当我首先运行命令“mvn compile”时，如果我运行命令“mvn package”它会成功并且无论如何后续的“mvn compile”，它会给我一个构建失败之后将工作。我的问题是我需要将它提交给 git，它会将它发送给 jenkins 进行审查，当时它失败了，我不知道如何解决它。这是日志

```
Building in workspace /var/lib/jenkins/workspace/my_dropbox
Checkout:my_dropbox / /var/lib/jenkins/workspace/my_dropbox - hudson.remoting.LocalChannel@427e3f2
Using strategy: Gerrit Trigger
Last Built Revision: Revision 05182398b298d442d1c238673a40beb52b83386f (anything_but_blank)
Fetching changes from 1 remote Git repository
Fetching upstream changes from ssh://jenkins@gerrit:29418/my_dropbox.git
Commencing build of Revision 0980748fbbd29ff9acd2134dd55cb84afb577dd7 (anything_but_blank)
Checking out Revision 0980748fbbd29ff9acd2134dd55cb84afb577dd7 (anything_but_blank)
Parsing POMs
[my_dropbox] $ /usr/lib/jvm/jdk1.7.0/bin/java -cp /var/lib/jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-agent-1.2.jar:/var/lib/jenkins/tools/Maven/Maven_3/boot/plexus-classworlds-2.4.jar org.jvnet.hudson.maven3.agent.Maven3Main /var/lib/jenkins/tools/Maven/Maven_3 /var/cache/jenkins/war/WEB-INF/lib/remoting-2.19.jar /var/lib/jenkins/plugins/maven-plugin/WEB-INF/lib/maven3-interceptor-1.2.jar 40598
<===[JENKINS REMOTING CAPACITY]===>channel started
log4j:WARN No appenders could be found for logger (org.apache.commons.beanutils.converters.BooleanConverter).
log4j:WARN Please initialize the log4j system properly.
Executing Maven:  -B -f /var/lib/jenkins/workspace/my_dropbox/pom.xml clean package
[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for SimpleDropbox:SimpleDropbox:jar:0.0.1-SNAPSHOT
[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-jar-plugin is missing. @ line 35, column 9
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
Projects to build: [MavenProject: SimpleDropbox:SimpleDropbox:0.0.1-SNAPSHOT @ /var/lib/jenkins/workspace/my_dropbox/pom.xml]
projectStarted SimpleDropbox:SimpleDropbox:0.0.1-SNAPSHOT
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building Fiachra 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
mojoStarted org.apache.maven.plugins:maven-clean-plugin:2.4.1(default-clean)
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ SimpleDropbox ---
[INFO] Deleting /var/lib/jenkins/workspace/my_dropbox/target
mojoSucceeded org.apache.maven.plugins:maven-clean-plugin:2.4.1(default-clean)
mojoStarted org.apache.maven.plugins:maven-resources-plugin:2.5(default-resources)
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ SimpleDropbox ---
[debug] execute contextualize
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /var/lib/jenkins/workspace/my_dropbox/src/main/resources
mojoSucceeded org.apache.maven.plugins:maven-resources-plugin:2.5(default-resources)
mojoStarted org.apache.maven.plugins:maven-compiler-plugin:2.3.1(default-compile)
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.1:compile (default-compile) @ SimpleDropbox ---
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 12 source files to /var/lib/jenkins/workspace/my_dropbox/target/classes
[INFO] -------------------------------------------------------------
mojoFailed org.apache.maven.plugins:maven-compiler-plugin:2.3.1(default-compile)[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /var/lib/jenkins/workspace/my_dropbox/src/test/java/TestSomething.java:[3,23] error: package org.junit does not exist

[ERROR] /var/lib/jenkins/workspace/my_dropbox/src/test/java/TestSomething.java:[7,16] error: package org.junit does not exist

[ERROR] /var/lib/jenkins/workspace/my_dropbox/src/test/java/TestSomething.java:[11,2] error: cannot find symbol

[INFO] 3 errors 
[INFO] -------------------------------------------------------------

projectFailed SimpleDropbox:SimpleDropbox:0.0.1-SNAPSHOT
sessionEnded
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 7.054s
[INFO] Finished at: Wed Feb 20 09:03:25 GMT 2013
[INFO] Final Memory: 11M/240M
[INFO] ------------------------------------------------------------------------
Projects to build: [MavenProject: SimpleDropbox:SimpleDropbox:0.0.1-SNAPSHOT @ /var/lib/jenkins/workspace/my_dropbox/pom.xml]
[JENKINS] Archiving /var/lib/jenkins/workspace/my_dropbox/pom.xml to /var/lib/jenkins/jobs/my_dropbox/modules/SimpleDropbox$SimpleDropbox/builds/2013-02-20_09-03-14/archive/SimpleDropbox/SimpleDropbox/0.0.1-SNAPSHOT/SimpleDropbox-0.0.1-SNAPSHOT.pom
Waiting for Jenkins to finish collecting data
mavenExecutionResult exceptions not empty
message : Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.1:compile (default-compile) on project SimpleDropbox: Compilation failure
cause : Compilation failure
Stack trace : 
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:2.3.1:compile (default-compile) on project SimpleDropbox: Compilation failure
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:213)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
    at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:98)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:64)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.apache.maven.plugin.CompilationFailureException: Compilation failure
    at org.apache.maven.plugin.AbstractCompilerMojo.execute(AbstractCompilerMojo.java:656)
    at org.apache.maven.plugin.CompilerMojo.execute(CompilerMojo.java:128)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 27 more
channel stopped
Notifying upstream projects of job completion
Finished: FAILURE 
```

这是我的pom文件

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>SimpleDropbox</groupId>
  <artifactId>SimpleDropbox</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <name>Fiachra</name>
  <description>It's a simple dropbox</description>

   <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>4.10</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>commons-codec</groupId>
      <artifactId>commons-codec</artifactId>
      <version>1.3</version>
    </dependency>
   </dependencies>

  <build>
    <sourceDirectory>src</sourceDirectory>
    <plugins>

       <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-compiler-plugin</artifactId>
           <version>2.3.1</version>
           <configuration>
               <source>1.7</source>
               <target>1.7</target>
           </configuration>
       </plugin>

        <plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-jar-plugin</artifactId>
         <configuration>
       <archive>
         <manifest>
           <mainClass>main.java.Main</mainClass>
           <packageName>main.java</packageName>
         </manifest>
         <manifestEntries>
           <mode>development</mode>
         </manifestEntries>
       </archive>
         </configuration>
     </plugin>

    </plugins>
  </build>
</project> 
```

这是本地干净安装。

```
fiachra@fiachra-Precision-WorkStation-T5500 my_dropbox (develop *%=) $ mvn clean
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building Fiachra
[INFO]    task-segment: [clean]
[INFO] ------------------------------------------------------------------------
[INFO] [clean:clean {execution: default-clean}]
[INFO] Deleting file set: /home/fiachra/work/my_dropbox/target (included: [**], excluded: [])
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: < 1 second
[INFO] Finished at: Wed Feb 20 10:28:00 GMT 2013
[INFO] Final Memory: 11M/361M
[INFO] ------------------------------------------------------------------------
fiachra@fiachra-Precision-WorkStation-T5500 my_dropbox (develop *%=) $ mvn install
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building Fiachra
[INFO]    task-segment: [install]
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources {execution: default-resources}]
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /home/fiachra/work/my_dropbox/src/main/resources
[INFO] [compiler:compile {execution: default-compile}]
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 12 source files to /home/fiachra/work/my_dropbox/target/classes
[INFO] -------------------------------------------------------------
[ERROR] COMPILATION ERROR : 
[INFO] -------------------------------------------------------------
[ERROR] /home/fiachra/work/my_dropbox/src/test/java/TestSomething.java:[3,23] error: package org.junit does not exist

[ERROR] /home/fiachra/work/my_dropbox/src/test/java/TestSomething.java:[9,2] error: cannot find symbol

[INFO] 2 errors 
[INFO] -------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Compilation failure

/home/fiachra/work/my_dropbox/src/test/java/TestSomething.java:[3,23] error: package org.junit does not exist

/home/fiachra/work/my_dropbox/src/test/java/TestSomething.java:[9,2] error: cannot find symbol

[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1 second
[INFO] Finished at: Wed Feb 20 10:28:06 GMT 2013
[INFO] Final Memory: 15M/361M
[INFO] ------------------------------------------------------------------------ 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:58:18.307

编辑：知道了。

在你的 POM 中，你修改了默认的 sourceDirectory（除非你有充分的理由，否则你不应该这样做）

```
<sourceDirectory>src</sourceDirectory> 
```

因此，maven 尝试在编译阶段编译测试类。JUNIT 不可用（JUNIT 依赖的范围是测试）。

消除

```
<sourceDirectory>src</sourceDirectory> 
```

这应该有效

# wpf - 无法在 WPF 文本框中使用鼠标左键设置焦点

> ID：14976405
> 
> 赞同：0
> 
> 时间：2013-02-20T09:31:34.587
> 
> 标签：wpf, visual-studio-2008, wpf-controls

加载时将焦点设置在用户名文本框上，但是如果我单击密码文本框，然后使用鼠标单击用户名文本框，则它不会关注用户名。
我正在使用 VS 2008。

```
<WrapPanel Margin="10" >
    <StackPanel Name="stackPanel5"  Margin="0,20,0,0">
        <StackPanel Height="31" Name="stackPanel2" Orientation="Horizontal" Width="217">
            <Label Margin="15,0,0,0" Height="24" Name="labelUserName" Width="64" FontSize="12" >Username</Label>
            <TextBox Margin="2,1,0,0" Height="24" Name="textboxUsername" Width="120" TabIndex="1" MaxLength="25" />
        </StackPanel>
        <StackPanel Orientation="Horizontal" Height="31" Name="stackPanel3" Width="217">
            <Label Margin="20,0,0,0" Height="24" Name="labelPassword" Width="60" FontSize="12"  >Password</Label>
            <PasswordBox Margin="1,1,0,0" Height="24" Name="passwordBoxUserpassword" Width="120" TabIndex="2" MaxLength="16" CommandManager.PreviewExecuted="passwordBoxUserpassword_PreviewExecuted" />
        </StackPanel>
        <StackPanel Orientation="Horizontal" Height="31" Name="stackPanel7" Width="217" Visibility="Collapsed">
            <Label Margin="10,0,0,0" Height="24" Name="lblApplication" Width="70" FontSize="12" Visibility="Collapsed">Application</Label>
            <ComboBox Margin="1,1,0,0" Height="24" Name="ComboBoxProjects" Width="120" ItemsSource="{Binding}" Visibility="Collapsed"/>
        </StackPanel>

        <StackPanel Orientation="Horizontal" Height="31" Name="stackPanel4" Width="230" Visibility="Collapsed">
            <Label Margin="2,0,0,0" Height="24" Name="labelNewPassword" Width="87" FontSize="12">New Password</Label>
            <PasswordBox Margin="-2,1,0,0" Height="24" Name="passwordBoxNewPassword" Width="120"  />
        </StackPanel>

        <StackPanel Orientation="Horizontal"  Name="stkpnlLogin" Width="230">
            <Label Margin="10,0,0,0" Height="30" Name="lblAppn" Width="70" FontSize="12" >Application</Label>
            <RadioButton Name="rdbCPS" Margin="3,11,3,3" IsChecked="False" TabIndex="3"  VerticalContentAlignment="Center" Content="CPS" Checked="rdbCPS_Checked"/>

            <RadioButton Name="rdbCSS" Margin="3,11,3,3" IsChecked="True" TabIndex="4" VerticalContentAlignment="Center" Content="CSS" Checked="rdbCSS_Checked"/>

        </StackPanel>

        <StackPanel Margin="50,10,10,10" Orientation="Vertical"  Name="stackPanel1" Grid.Row="5" Grid.Column="1" Height="50" Width="153">

            <WrapPanel Orientation="Horizontal" >
                <Button Height="24" Name="buttonSubmit" Style="{StaticResource Glassstyle}" Background="SteelBlue" Width="74"  Click="buttonSubmit_Click" FontWeight="Bold" IsDefault="True" TabIndex="5">Submit</Button>
                <Button Height="24" Name="buttonCancel" Style="{StaticResource Glassstyle}" Background="SteelBlue"  Width="74"  Click="buttonCancel_Click" FontWeight="Bold" TabIndex="6">Cancel</Button>
            </WrapPanel>
            <StackPanel Name="stackPanel6" Margin="2">
                <TextBlock Height="19" Name="textBlock1" Width="100">
                    <Hyperlink Name="HyperlinkChangepassword" Click="HyperlinkChangepassword_Click">Change Password</Hyperlink>
                </TextBlock>
            </StackPanel>
        </StackPanel>
        <!--<StackPanel Height="17" Orientation="Horizontal" Name="stackPanel6" Width="91">
                    <TextBlock Height="19" Name="textBlock1" Width="91">
                        <Hyperlink Name="HyperlinkChangepassword" Click="HyperlinkChangepassword_Click">Change Password</Hyperlink></TextBlock>
                </StackPanel>-->
    </StackPanel>
</WrapPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:24:57.170

您必须添加 Textbox GotFocus() 事件，在该事件中只需说 textbox.SelectAll()。

# c++ - 与服务器的连接被终止 - C++

> ID：14976408
> 
> 赞同：0
> 
> 时间：2013-02-20T09:31:40.857
> 
> 标签：c++, visual-c++, connection

我正在开发 VC++ 应用程序。它作为后台应用程序运行并每小时连接到服务器。它通常工作得很好，但有时会收到错误消息“与服务器的连接异常终止”。

有没有人有任何想法来处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:35:10.543

可能是网络拥塞或服务器负载的原因，您应该更改代码以重试可配置的时间，直到连接成功。

# windows - 如何自定义对话框窗口 nsis

> ID：14976409
> 
> 赞同：0
> 
> 时间：2013-02-20T09:31:41.700
> 
> 标签：windows, winapi, resize, nsis, customdialog

我是 NSIS 的初学者。我想制作一个 NSIS 安装程序，我想在其中打开一个网页 url，上面有一些我希望用户玩的 flash 游戏。为此，我正在使用 nsWeb 插件，但它似乎不支持 flash 文件。所以我想知道是否有其他可用的插件。我还想将对话框窗口和显示网页的区域调整为 600x600 左右。我可以使用 win api 的 func SetWindowPos 调整对话框窗口的大小，但问题是它只调整外部对话框的大小，而不是显示网页的内部区域。那么有什么办法我可以做到这一点。我知道我们可以使用资源黑客来实现它，但我想知道其他方式。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:05:23.457

Resource Hacker 是调整安装程序大小的最简单方法。

我认为 nsweb 应该允许 flash，但您可以尝试使用 Flash 插件进行 Innosetup，如下例所示：

[http://wenku.baidu.com/view/fb800d6baf1ffc4ffe47acbd.html](http://wenku.baidu.com/view/fb800d6baf1ffc4ffe47acbd.html)

# android - Android：当活动进入后台时如何使用相机？

> ID：14976415
> 
> 赞同：1
> 
> 时间：2013-02-20T09:32:01.630
> 
> 标签：android, camera

当我的活动进入后台时，如何释放相机？（例如通过按手机上的待机按钮）

```
 public void onPause(){
    super.onPause();
    if (cam != null) {
        cam.stopPreview();
        cam.release();
        cam = null;
    }
}

@Override
protected void onResume(){
 super.onResume();
    rLayout = (RelativeLayout) findViewById (R.id.layout_background);
    cam = Camera.open();  
    cam.startPreview();
    p = cam.getParameters();
} 
```

日志猫：

```
02-20 11:46:40.040: E/AndroidRuntime(26439): FATAL EXCEPTION: main
02-20 11:46:40.040: E/AndroidRuntime(26439): java.lang.RuntimeException: Unable to resume activity {spicysoftware.spicytaschenlampe/spicysoftware.spicytaschenlampe.FlashLight}: java.lang.RuntimeException: Fail to connect to camera service
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2616)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2644)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2130)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.os.Looper.loop(Looper.java:137)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.app.ActivityThread.main(ActivityThread.java:4898)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at java.lang.reflect.Method.invokeNative(Native Method)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at java.lang.reflect.Method.invoke(Method.java:511)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at dalvik.system.NativeStart.main(Native Method)
02-20 11:46:40.040: E/AndroidRuntime(26439): Caused by: java.lang.RuntimeException: Fail to connect to camera service
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.hardware.Camera.native_setup(Native Method)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.hardware.Camera.<init>(Camera.java:353)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.hardware.Camera.open(Camera.java:330)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at spicysoftware.spicytaschenlampe.FlashLight.onResume(FlashLight.java:182)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1199)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.app.Activity.performResume(Activity.java:5280)
02-20 11:46:40.040: E/AndroidRuntime(26439):    at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2606)
02-20 11:46:40.040: E/AndroidRuntime(26439):    ... 12 more 
```

这是它的工作原理：

```
 public void onPause(){
    super.onPause();
    Log.v("OnPause", "True");
    if (cam != null) {
        Log.v("OnPause", "Cam isn't null");
        cam.stopPreview();
        Log.v("OnPause", "CamPreview stopped");
        cam.release();
        Log.v("OnPause", "CamReleased");
        cam = null;
        Log.v("OnPause", "Cam is null");
    }
}

@Override
protected void onResume(){
 super.onResume();
 Log.v("OnResume", "True");
    if(cam != null){
        Log.v("OnResume", "Camera is in use");
    } else {
        Log.v("OnResume", "Camera isn't in use");
        rLayout = (RelativeLayout) findViewById (R.id.layout_background);
        cam = Camera.open();  
        Log.v("OnResume", "Camera has been opened");
        cam.startPreview();
        Log.v("OnResume", "CamPreview started");
        p = cam.getParameters();
        Log.v("OnResume", "Wrote parameters to variable p");
    }
} 
```

在 onResume 中打开相机确实会使应用程序崩溃。

最好的问候 MSeiz5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:34:41.980

在 onResume 中重新打开并重置您的相机。

```
@Override
protected void onResume(){
 super.onResume();
 camera = Camera.open();

 // We resumed so lock the camera
 Camera.Parameters params = camera.getParameters();

 params.setFlashMode(Parameters.FLASH_MODE_ON);
 //params.setFocusMode(Parameters.FOCUS_MODE_AUTO);
 //params.setWhiteBalance(Parameters.WHITE_BALANCE_AUTO);
 params.setJpegQuality(100);

 camera.setParameters(params);
 ImageView overlay = (ImageView) findViewById(R.id.ImageView01);
 overlay.bringToFront();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:37:47.693

你释放它就好了，但在恢复时它必须抛出空指针，因为相机对象为空，请在使用它之前重新初始化它，就像你做 onCreate 一样。

# php - 数据表中的谷歌地图不起作用

> ID：14976427
> 
> 赞同：1
> 
> 时间：2013-02-20T09:32:41.683
> 
> 标签：php, jquery, google-maps, jquery-datatables

我正在使用[数据表](http://datatables.net/)插件。我在每一行都有指向谷歌地图的链接，点击它会弹出。在使用数据表插件之前，它会弹出，现在点击它会立即进入谷歌地图。

我试着在桌子外面做同样的事情，它工作正常，但在桌子里面不工作。我对彩盒也有同样的问题，因为我将脚本包含在“fnInitComplete”中，然后它就起作用了。那么我怎样才能让地图在弹出窗口中工作。

# python - Python线程，线程未被通知停止

> ID：14976430
> 
> 赞同：4
> 
> 时间：2013-02-20T09:32:53.663
> 
> 标签：python, python-multithreading

我想在主程序停止时停止 Python 线程。它适用于连接到服务器的类。连接由后台线程维护，前台线程响应回调。以下是一个最小的示例。

```
#!/usr/bin/python
import time, threading
class test():
    running = False
    def __init__(self):
        print "init"
        self.running = True
        self.thread = threading.Thread(target = self.startThread)
        self.thread.start()

    def __del__(self):
        running = False
        print "del"

    def startThread(self):
        print "thread start"
        while self.running:
            time.sleep(1)
            print "thread running"

a = test() 
```

当程序结束时，我天真地期望调用 __del__() 以便通知后台线程停止，但直到后台线程停止后才调用 i 。显式调用某些函数不是一种选择，因为该类被其他人使用，我不想强​​迫他们使用一些额外的代码行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:00:47.103

`__del__`只要有对 的引用，就不会调用它`self`，并且您在后台线程本身中有一个这样的引用：在 的`self`参数中`def startThread(self):`。

您需要将运行后台线程的函数移到类之外。而不是`__del__`我会推荐例如使用弱引用，如下所示。此代码应该在没有`__del__()`方法且不使用`self.running`属性的情况下工作。

```
self.thread = threading.Thread(target=run_me, args=(weakref.ref(self),))
...
def run_me(weak_self):
    "Global function"
    while True:
        self = weak_self()
        if self is None: break    # no more reference to self
        ...
        del self        # forget this reference for now
        time.sleep(1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:41:23.837

根据 gnibbler 的评论，使用上下文管理器进行显式资源释放可能会更好。`__del__`关于是否应该用于资源释放的意见似乎有所不同。关于这个主题的几个好帖子在[这里](http://eli.thegreenplace.net/2009/06/12/safely-using-destructors-in-python/)和[这里](http://www.electricmonk.nl/log/2008/07/07/python-destructor-and-garbage-collection-notes/)。

如果你习惯了像 C++ 这样使用[RAII](http://en.wikipedia.org/wiki/RAII)的语言，有时很难习惯 Python 中的析构函数可能不会在你期望的时候被调用，如果有的话，通常是因为引用计数和垃圾收藏作品。

因此，Python 中的常用方法是使用上下文管理器，它可用于提供显式的资源释放。

一个简单的线程示例可能如下所示（未经测试）：

```
#!/usr/bin/python
import time, threading

class test():
    def __init__(self):
        print "init"
        self.stop_event = threading.Event()
        self.thread = threading.Thread(target = self.startThread)
        self.thread.start()

    def startThread(self):
        print "thread start"
        while not self.stop_event.isSet():
            time.sleep(1)
            print "thread running"

    def close(self):
        # Request thread to stop.
        self.stop_event.set()
        # Wait for thread to exit.
        self.thread.join()

    def __enter__(self):
        # Nothing to do, thread already started.  Could start
        # thread here to enforce use of context manager.

    def __exit__(self, exc_type, exc_value, traceback):
        self.close() 
```

然后`test()`在上下文管理器中像这样使用该类：

```
with test():
    # Thread will be active here.
    pass

# Thread will have been stopped and joined. 
```

或者，使用 Python [contextlib.closure](http://docs.python.org/2/library/contextlib.html#contextlib.closing)辅助函数，该函数将确保`close`在退出时调用它。

```
import contextlib

with contextlib.closing(test()):
    # Thread will be active here.
# But not here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-10T08:02:54.493

[我遇到了同样的问题，终于在另一个问题](https://stackoverflow.com/a/2564282/3468437)的答案中找到了这个问题的答案。

使用`daemon = True`旗帜。[3.x](https://docs.python.org/3/library/threading.html#threading.Thread.daemon)和[2.x](https://docs.python.org/2/library/threading.html#threading.Thread.daemon)的文档

所以你的代码是这样的：

```
#!/usr/bin/python
import time, threading

class test():
    def __init__(self):
        print "init"
        self.thread = threading.Thread(target = self.startThread)
        self.thread.daemon = True
        self.thread.start()

    def startThread(self):
        print "thread start"
        while True:
            time.sleep(1)
            print("thread running")

a = test() 
```

**备注**：这可能不是干净地结束你的线程，但是当你退出程序时它会停止它，我想这就是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T03:00:36.413

**您忘记在del**函数中更改当前 test() 实例的“运行”变量。它应该是

```
 def __del__(self):
        self.running = False
        print "del" 
```

这应该够了吧。

# java - 如何使用正则表达式或其他方式删除 java 字符串中多余的 '\r\n'

> ID：14976433
> 
> 赞同：1
> 
> 时间：2013-02-20T09:33:00.173
> 
> 标签：java, string

我有一个这样的字符串：

```
String orginal = "this is for test hello\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n" +
    "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nhello" + 
    "\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nhello"; 
```

用户在文本区域输入内容时按'enter'很多次，所以在java中，它变成了很多'\r\n'。我想将其更改为：

```
String newStr = "this is for test hello\r\nhello\r\nhello" 
```

我怎样才能只保留一个`\r\n`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T09:37:51.920

这个应该做...

```
String newStr = original.replaceAll("(\r\n)+", "\r\n"); 
```

您可能还想考虑使用`line.separator`系统属性而不是硬编码`\r\n`，因为这在其他平台上可能会有所不同。例如 Unix 只使用一个换行符`\n`。这将更便携...

```
final String NEWLINE = System.getProperty("line.separator");
String newStr = original.replaceAll("(" + NEWLINE + ")+", NEWLINE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:24:52.217

通用解决方案（LF - UNIX，CR-Mac，CRLF - Windows）可能是这样的

```
String newStr = original.replaceAll("(\r\n|\r|\n)+", "$1"); 
```

# twitter-bootstrap - 引导布局问题

> ID：14976439
> 
> 赞同：0
> 
> 时间：2013-02-20T09:33:11.500
> 
> 标签：twitter-bootstrap

使用 Bootstrap 模板 (free-responsive-template-photography)。将照片、颜色更改为我拥有和喜欢的东西。开始为照片添加弹出框以进行描述，但现在布局已从 3-4 个缩略图宽（span3 或 span4）变为垂直堆叠的所有照片。现在是 1 列，而不是 3 或 4 列。除了颜色之外，没有更改任何 CSS。我哪里出错了？有什么想法可以纠正这个布局吗？

```
<body>
<div class="container">
 <div class="row">
        <article class="span4">
<h2>Popover with Twitter Bootstrap</h2>
<div class="clear"></div>
<ul><img src="img/bar/tBDR-BM4.png" id="BDR-BM4" class="btn btn-success" rel="popover" data-original-title="">BDR-BM4</a>
</ul>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap-tooltip.js"></script>
<script src="js/pbootstrap-popover.js"></script>
<script>
$(function ()
{ $("#BDR-BM4").popover({title: 'BDR-BM4', content: "Receivers are custom built using precision CNC machines, 7075 T6 aluminum,USA forgings. Must Ship to FFL Holder"});
});
</script>
<ul><img src="img/bar/tBDR-B12.png" id="BDR-B12" class="btn btn-success" rel="popover" data-original-title="">BDR-B12</a>
</ul>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap-tooltip.js"></script>
<script src="js/pbootstrap-popover.js"></script>
<script>
$(function ()
{ $("#BDR-B12").popover({title: 'BDR-15A', content: "Receivers are custom built using precision CNC machines, 7075 T6 aluminum,USA forgings. Must Ship to FFL Holder"});
});
</script>
<ul><img src="img/bar/tBDR-B20H.png" id="BDR-B20H" class="btn btn-success" rel="popover" data-original-title="">BDR-B20H</a>
</ul>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap-tooltip.js"></script>
<script src="js/pbootstrap-popover.js"></script>

<script>
$(function ()
{ $("#BDR-B20H").popover({title: 'BDR-B20H', content: "Receivers are custom built using precision CNC machines, 7075 T6 aluminum,USA forgings. Must Ship to FFL Holder"});
});
</script>
<ul><img src="img/bar/tBDR-B16F.png" id="BDR-B16F" class="btn btn-success" rel="popover" data-original-title="">BDR-B16F</a>
</ul>

<script src="js/jquery.min.js"></script>
<script src="js/bootstrap-tooltip.js"></script>
<script src="js/pbootstrap-popover.js"></script>
<script>
$(function ()
{ $("#BDR-B16F").popover({title: 'BDR-B16F', content: "Receivers are custom built using precision CNC machines, 7075 T6 aluminum,USA forgings. Must Ship to FFL Holder"});
});
</script>

</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:56:58.277

您在页面上多次使用以下代码，仅将其放在页脚中一次。

```
 <script src="js/jquery.min.js">
 <script src="js/bootstrap-tooltip.js">
 <script src="js/pbootstrap-popover.js"> 
```

也去掉ie`clear div`后面的`article tag`

```
<div class="clear"></div>/*remove*/ 
```

我已经清理了你的代码并重新安排了一些东西，在你的身体中使用以下内容，看看它是否是你希望获得的结果：
[Jsfiddle with the result Please check](http://jsfiddle.net/shail/eYpS6/show)

![浏览器中的结果截图](../Images/57f8199d7de9e8de568fa51ddb0d6d17.png)

```
<div class="container">
<div class="row">
    <article class="span12">
         <h2>Popover with Twitter Bootstrap</h2>

       <div class="row-fluid">
        <div class="span3">
            <ul>
                <img src="http://webpages.charter.net/tfbone/img/bar/tBDR-BM4.png" id="BDR-BM4"
                class="btn btn-success" rel="popover" data-original-title="">BDR-BM4</a>
            </ul>
        </div>
        <div class="span3">
            <ul>
                <img src="http://webpages.charter.net/tfbone/img/bar/tBDR-B12.png" id="BDR-B12"
                class="btn btn-success" rel="popover" data-original-title="">BDR-B12</a>
            </ul>
        </div>
        <div class="span3">
            <ul>
                <img src="http://webpages.charter.net/tfbone/img/bar/tBDR-B20H.png" id="BDR-B20H"
                class="btn btn-success" rel="popover" data-original-title="">BDR-B20H</a>
            </ul>
</div>
<div class="span3">
    <ul>
        <img src="http://webpages.charter.net/tfbone/img/bar/tBDR-B16F.png" id="BDR-B16F"
        class="btn btn-success" rel="popover" data-original-title="">BDR-B16F</a>
    </ul>
</div>
<script>

</script>
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap-tooltip.js"></script>
<script src="js/pbootstrap-popover.js"></script>
<script>
    $(function() {
        $("#BDR-BM4").popover({
            title: 'BDR-BM4',
            content: "Black Dawn Lower Receivers are custom built using precision CNC machines, 7075 T6 aluminum,USA forgings. Must Ship to FFL Holder"
        });
    });
    $(function() {
        $("#BDR-B12").popover({
            title: 'BDR-15A',
            content: "Black Dawn Lower Receivers are custom built using precision CNC machines, 7075 T6 aluminum,USA forgings. Must Ship to FFL Holder"
        });
    });
    $(function() {
        $("#BDR-B20H").popover({
            title: 'BDR-B20H',
            content: "Black Dawn Lower Receivers are custom built using precision CNC machines, 7075 T6 aluminum,USA forgings. Must Ship to FFL Holder"
        });
    });
    $(function() {
        $("#BDR-B16F").popover({
            title: 'BDR-B16F',
            content: "Black Dawn Lower Receivers are custom built using precision CNC machines, 7075 T6 aluminum,USA forgings. Must Ship to FFL Holder"
        });
    });
</script>
      </div>
   </article>
   </div>
  </div> 
```

# mysql - SQL插入多行是否可以在处理时渗透

> ID：14976443
> 
> 赞同：4
> 
> 时间：2013-02-20T09:33:27.660
> 
> 标签：mysql, sql

**Test.id**是**主键**和**自动增量**

当我使用这个 SQL 插入时

```
 INSERT INTO Test (id,name) values (null, "a") , (null, "b") , (null, "c") 
```

如果有人使用

```
 INSERT INTO Test (id,name) values (null, "d") 
```

而进程刚刚完成插入“a”

将导致（id，name）

`(1,a) , (2,b) , (3,c) , (4,d)`
或
`(1,a) , (2,d) , (3,b) , (4,c)`

或其他

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:45:28.277

大多数 SQL 引擎默认不支持[并发插入](http://dev.mysql.com/doc/refman/5.1/en/concurrent-inserts.html)。但是，其中一些为您提供了在配置中允许的选项。

就其本身而言，插入是一个[原子](http://en.wikipedia.org/wiki/Atomicity_%28database_systems%29)语句。这意味着数据库将在插入之前被锁定，并且只有在插入完成或失败后才会解锁。

例如，如果我编写这些语句并同时执行它们

```
INSERT INTO Test VALUES(null, 'a'), (null, 'b'), (null, 'c'), (null, 'd') 
```

和

```
INSERT INTO Test VALUES(null, 'e'), (null, 'f') 
```

本质上发生的是[竞争条件](http://en.wikipedia.org/wiki/Race_condition)。所以我的输出可以是

```
1 a, 2 b, 3 c, 4 d, 5 e, 6 f 
```

或者

```
1 e, 2 f, 3 a, 4 b, 5 c, 6 d 
```

我什至可以使用 INSERT SELECT 语句，它会锁定数据库，直到语句完全完成。

```
INSERT INTO Test select * from test2 
```

因此，在您的情况下，一旦第一个查询开始运行，下一个查询将不得不等待，因此，输出将是

```
(1,a) , (2,b) , (3,c) , (4,d) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:38:55.367

你无法预测会发生什么——任何一种选择都是可能的，这取决于谁更早地执行了它。

当您创建 AUTO_INCREMENT 列时，它只保证它是唯一的 - 不能保证它到底是什么，也不能保证它不会包含可能由回滚事务创建的漏洞。

# c++ - 错误：预期的 `;' 在“T”之前

> ID：14976452
> 
> 赞同：1
> 
> 时间：2013-02-20T09:33:51.830
> 
> 标签：c++, class

我知道这可能以前被问过，但不幸的是我无法调试错误。

我写了一个时间类：

```
class time
{
public:
    time(); //constructor
    void setTime (int, int, int); //set time
    void dispTime();  //print time
private:
    int hour, minute, second;
}; 
```

然后我实现函数成员：

```
#include <iostream>
#include "stdio.h"
#include "time.h"
time :: time()
{
    hour = 12;
    minute = 0;
    second = 0;
}
//**********
void time::setTime(int h, int m, int s)
{
    hour = (h >= 0 && h < 12) ? h : 0;
    minute = (m >= 0 && m < 60) ? m : 0;
    second = (s >= 0 && s < 60) ? s : 0;
}
//**********
void time::dispTime()
{
    std::cout << ((hour == 0 || hour == 12) ? 12 : hour % 12)
              << " : " << (minute < 10 ? "0" : "") << minute
              << " : " << (second < 10 ? "0" : "") << second
              << (hour < 12 ? " AM" : " PM");
} 
```

最后是主体主体：

```
#include <iostream>
#include "stdio.h"
#include "time.h"
using namespace std;
//**********
int main()
{
    time T;
    cout << "The initial standard time is: ";
    T.dispTime();
    T.setTime(13, 27, 36);
    cout << "\nStandard time after set-time is: ";
    T.dispTime();
    T.setTime(99,83,12); //attemp to have a invalid time
    cout << "\nStandard time is invalid and standard time is: ";
    T.dispTime();
    cin.get();
    cin.get();
} 
```

当我用 g++ 编译它时：

4-5-class-time.cpp：在函数'int main()'中：

4-5-class-time.cpp:8: 错误: 预期 `;' 在'T'之前</p>

4-5-class-time.cpp:10：错误：未在此范围内声明“T”

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:39:50.803

看起来您的班级名称`time`是保留字，不能使用。如果您将其更改为`mytime`，就像我在[这里](http://liveworkspace.org/code/3FdDkh%246)所做的那样，您会发现它按预期工作。

我将不得不找出*为什么* `time`是保留字或发生了什么。

显然，您的类名与全局`::time`结构冲突，这对于编译器不接受它的原因是有道理的。

如果你真的想使用一个`time`类，你应该创建自己的命名空间并将其放入其中。

`namespace tony { class time {}; } int main() { tony::time t; }`这应该消除名称冲突。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-02T21:56:41.040

尝试将您的“类”文件从 time.h/time.cpp 重命名为 mytime.h/mytime.cpp

有一个名为 time.h 的系统包含文件，并且 - 根据为您的编译器配置的包含文件搜索顺序，系统文件可能会优先于您的文件包含在内。所以编译器根本看不到你的 Time 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:39:45.627

您在第 22 行的 time.cpp 中有错字：

```
<< " : " << (seconde < 10 ? "0" : "") << second 
```

应该 ：

```
<< " : " << (second < 10 ? "0" : "") << second 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T09:53:02.703

```
#include <ctime>

namespace {
class time {};
}

int main()
{
    time();
} 
```

给出错误：

```
main.cpp: In function 'int main()':
main.cpp:9:5: error: reference to 'time' is ambiguous
In file included from /usr/include/c++/4.7/ctime:44:0,
                 from main.cpp:1:
/usr/include/time.h:186:15: error: candidates are: time_t time(time_t*)
main.cpp:4:7: error:                 class {anonymous}::time 
```

摆脱匿名命名空间消除了歧义。奇怪的：

```
main.cpp: In function 'int main()':
main.cpp:7:10: error: too few arguments to function 'time_t time(time_t*)'
In file included from /usr/include/c++/4.7/ctime:44:0,
                 from main.cpp:1:
/usr/include/time.h:186:15: note: declared here 
```

# xcode - 我得到 21004 作为状态值作为苹果沙盒服务器在 ios 中测试自动更新订阅的回复？

> ID：14976453
> 
> 赞同：12
> 
> 时间：2013-02-20T09:33:52.837
> 
> 标签：xcode, in-app-purchase

我正在测试应用内购买自动更新订阅，但苹果的沙箱服务器总是返回 status=21004

```
 #define SHARED_SECRET @"INSERT HERE YOUR ITUNESCONNECT SHARED SECRECT KEY FOR AUTORENEWABLE SUBCRIPTIONS RECEIPT VALIDATION"

-(void)checkReceipt {
// verifies receipt with Apple
NSError *jsonError = nil;
NSString *receiptBase64 = [NSString base64StringFromData:receiptData length:[receiptData length]];
NSLog(@"Receipt Base64: %@",receiptBase64);

NSData *jsonData = [NSJSONSerialization dataWithJSONObject:[NSDictionary dictionaryWithObjectsAndKeys:
                                                            receiptBase64,@"receipt-data",
                                                            SHARED_SECRET,@"password",
                                                            nil]
                                                   options:NSJSONWritingPrettyPrinted
                                                     error:&jsonError
                    ];
NSLog(@"%@",jsonData);
NSError * error=nil;
NSDictionary * parsedData = [NSJSONSerialization JSONObjectWithData:jsonData options:kNilOptions error:&error];
NSLog(@"%@",parsedData);
NSLog(@"JSON: %@",[[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding]);
// URL for sandbox receipt validation; replace "sandbox" with "buy" in production or you will receive
// error codes 21006 or 21007
NSURL *requestURL = [NSURL URLWithString:@"https://sandbox.itunes.apple.com/verifyReceipt"];

NSMutableURLRequest *req = [[NSMutableURLRequest alloc] initWithURL:requestURL];
[req setHTTPMethod:@"POST"];
[req setHTTPBody:jsonData];
NSURLConnection *conn = [[NSURLConnection alloc] initWithRequest:req delegate:self];
if(conn) {
    receivedData = [[NSMutableData alloc] init];
} else {
    completionBlock(NO,@"Cannot create connection");
}
} 
```

有人可以帮我获得正确的收据验证吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-06T09:28:54.547

`INSERT HERE YOUR ITUNESCONNECT SHARED SECRECT KEY FOR AUTORENEWABLE SUBCRIPTIONS RECEIPT VALIDATION`您必须使用从 iTunes Connect 获得的密钥替换顶部的此文本。（显然，不要在 Stack Overflow 上发布完整的秘密）。

秘密通常是一个 32 位的字母数字字符串，看起来像这样`39fkjc38jd02mg72k9cn29dfkm39fk00`（这个是假的）。

在（新的）iTunes Connect 中，转到“**我的应用”** >（然后单击您的应用）> **“应用内购买**” > **“查看或生成共享密钥”**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T13:39:01.157

去ituenes connet 然后你的应用然后去ManageInApp购买然后这里看到左下角有一个选项视图或者生成一个sharedsecret 这里你可以生成一个shared secret或者你可以查看之前的shared secret

# java - 如何使用 spring-data-jpa 检索聚合函数查询

> ID：14976454
> 
> 赞同：4
> 
> 时间：2013-02-20T09:33:53.277
> 
> 标签：java, spring, jpa, spring-data, spring-data-jpa

我正在使用 Spring data jpa 1.2，但无论如何我都找不到像下面这样检索聚合查询结果。

```
select count(v), date(v.createTimestamp) from UserEntity v
    group by date(v.createTimestamp) 
```

与本机 JPA 完美配合

```
@Entity()
public class UserEntity {

   @Id
   private long id;
   .
   .
   @Column(columnDefinition = "TIMESTAMP DEFAULT CURRENT_TIMESTAMP")
   private Timestamp createTimestamp;

} 
```

我的任何 JPA 存储库都是

```
public interface UserRepository extends JpaRepository<UserEntity, Long>, 
      JpaSpecificationExecutor<UserEntity> {
} 
```

那么如何进行聚合查询抛出 Spring 数据，我在文档中找不到任何内容

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-16T11:26:41.277

我找到了一种方法来做到这一点

```
public interface UserRepository extends JpaRepository<UserEntity, Long>, 
      JpaSpecificationExecutor<UserEntity> {

      @Query(value = "select count(v), date(v.createTimestamp) from UserEntity v group by date(v.createTimestamp)", 
             countQuery = "select count(1) from (select count(1) from UserEntity v group by date(v.createTimestamp)) z")
      public List<Object[]> findCountPerDay();
} 
```

通过这种方式，我们可以获得聚合数据以及实际计数（聚合记录）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T10:30:41.477

Spring Data 目前不支持“countBy”：

[支持“countBy”查询方法](http://jira.springsource.org/browse/DATAJPA-231)

[Spring Data JPA 有没有办法使用方法名称解析来计算实体？](https://stackoverflow.com/questions/10696490/does-spring-data-jpa-have-any-way-to-count-entites-using-method-name-resolving)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-27T04:23:29.403

你也可以使用`@NativeQuery`选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T08:04:36.993

您可以使用**@Query**对spring-data 中**不受支持**的方法进行自定义查询。

# compression - 如何使用 scribe 进行压缩？

> ID：14976456
> 
> 赞同：1
> 
> 时间：2013-02-20T09:33:55.540
> 
> 标签：compression, scribe

我使用 scribe 来收集日志。我的问题是如何在发送前压缩数据？我知道 scribe 使用 thrift，并且 thrift 支持 tzlibtransport，但我不知道如何使用它。（由于某些原因，我们不能使用 ssh 隧道。）

谢谢！

# javascript - 使用 ISO 8601 日期字符串初始化 javascript 日期会产生日期值 -1 天

> ID：14976457
> 
> 赞同：0
> 
> 时间：2013-02-20T09:33:59.943
> 
> 标签：javascript, datetime, iso

```
var date = new Date('2013-04-15');
console.log(date); 
```

输出：

```
Sun Apr 14 2013 20:00:00 GMT-0400 (EDT) 
```

即 -1 天，为什么 Date 会有这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:35:15.617

这两个时间戳代表相同的时间：

```
Sun Apr 14 2013 20:00:00 GMT-0400 (EDT)
Mon Apr 15 2013 00:00:00 UTC 
```

你得到第一个，但期待第二个。日期构造函数似乎需要 UTC 时间。

如果你这样做：

```
var date = new Date('2013-04-15 EDT');
console.log(date); 
```

然后你可能会得到预期的结果

* * *

**编辑：** [这种行为很奇怪](https://stackoverflow.com/q/14976646/102441)。此代码按您的预期工作：

```
var date = new Date('Apr 15 2013');
console.log(date);

Mon Apr 15 2013 00:00:00 GMT+XYZ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:36:50.620

您需要指定时区才能获得所需的输出。

这里有一个例子：[Javascript 日期对象总是休息一天？](https://stackoverflow.com/questions/7556591/javascript-date-object-always-one-day-off)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:18:19.767

因为`new Date()`使用的是 UTC 时间，所以`toString()`使用您当前的时区。

如果要打印 UTC 时间，则应使用

```
var date = new Date('2013-04-15');
console.log(date.toUTCString()); 
```

# android - 带有活动按钮的 Android Listview 可以更改行中的文本

> ID：14976458
> 
> 赞同：1
> 
> 时间：2013-02-20T09:34:00.907
> 
> 标签：android, listview, layout, button

嗨，我需要有关 listview 行中活动按钮的帮助。想法是然后我按下它更改文本视图的行中的按钮。此列表行必须在**setOnItemLongClickListener** () 中激活；谁能告诉我示例或教程如何制作这样的东西或一些示例或显示我的问题？我厌倦了谷歌它并且不会得到答案......我是android新手，很抱歉我的语言和tnx有任何帮助;）我的想法。

```
+-----------------------------------------+
| textview | textview | textview | Button |
+----------+----------+----------+--------+
| textview | textview | textview | Button |
+-----------------------------------------+ 
```

然后按钮按下 textview 变成这样的数字：

```
+-----------------------------------------+
| textview | textview | textview | Button |
+----------+----------+----------+--------+
| textview | textview |     1    | Button | <- this button was pressed
+-----------------------------------------+ 
```

**我做了然后按钮改变它，但问题是它改变了更多的行。像**

```
+-----------------------------------------+
| textview | textview | textview | Button |
+----------+----------+----------+--------+
| textview | textview |     1    | Button | <- this button was pressed
+-----------------------------------------+
| textview | textview | textview | Button |
+----------+----------+----------+--------+
| textview | textview |     1    | Button | <- this button was **not** pressed
+----------+----------+----------+--------+
| textview | textview | textview | Button |
+----------+----------+----------+--------+
| textview | textview |     1    | Button | <- this button was **not** pressed
+-----------------------------------------+ 
```

我正在使用 SimpleAdapter 来获取列表。

```
ListView lv = getListView();   
lv.setOnItemLongClickListener(listener);

OnItemLongClickListener listener = new OnItemLongClickListener() {
    public boolean onItemLongClick(AdapterView<?> parent, final View view, int position, long id) {
        btn1 = (Button) view.findViewById(R.id.button1);
        btn1.setOnClickListener(new OnClickListener(){
            int number= 0;
            public void onClick(View v) {
                // TODO Auto-generated method stub
                TextView textView = (TextView) v.findViewById(R.id.textView_must_be_changed);
                number++;
                textView.setText(String.valueOf(number)); 
            }                   
        });
    }
}; 
```

我的布局 XML 是

```
 <GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="fill_parent"
      android:id="@+id/gridas"
      android:layout_height="fill_parent"
      android:choiceMode="multipleChoice"
      android:columnCount="10"
      android:descendantFocusability="beforeDescendants" >

      <TextView
          android:id="@+id/Textview"
          android:layout_column="5"
          android:layout_columnSpan="3"
          android:layout_gravity="left|bottom"
          android:layout_row="1"
          android:layout_rowSpan="2"
          android:text="4.3 kg" />

      <TextView
          android:id="@+id/Textview"
          android:layout_column="7"
          android:layout_gravity="left"
          android:layout_row="1"
          android:layout_rowSpan="2"
          android:text="35 cm" />

      <TextView
          android:id="@+id/Textview"
          android:layout_width="163dp"
          android:layout_height="49dp"
          android:layout_column="9"
          android:layout_gravity="left"
          android:layout_row="2"
          android:gravity="left"
          android:text="949.00 Lt"
          android:textSize="32sp"
          android:textStyle="bold" />

      <TextView
          android:id="@+id/**textView_must_be_changed**"
          android:layout_column="9"
          android:layout_gravity="left|top"
          android:layout_row="1"
          android:text="tekstukas"
           />

      <Button
          android:id="@+id/button1"
          android:layout_column="9"
          android:layout_gravity="left|top"
          android:layout_row="3"
          android:text="Button" 
          android:focusable="false"
          android:focusableInTouchMode="false"/>

  </GridLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:44:26.017

您需要为列表视图创建自定义适配器。在此适配器的 getView() 方法中，您应该设置按钮的单击侦听器。当您按下行按钮时，此侦听器将调用。在此侦听器中，您必须获取将要更改的行数据。嗯..我认为你应该从视图标签中获取它，它在你的听众的 onClick 参数中。你也应该设置这个标签。在以下示例中，我展示了如何..

```
@Override
    public View getView( int position, View convertView, ViewGroup parent ){
        PhoneContactListItem item = getItem( position );
        TextView contactName;
        TextView contactPhone;
        CheckBox isCheckedCheckBox;

        if( convertView == null ) {
            convertView = LayoutInflater.from( context).inflate( R.layout.project_contact_list_item_layout, null );
            contactName = (TextView) convertView.findViewById( R.id.projectContactRow_contactName );
            contactPhone = (TextView) convertView.findViewById( R.id.projectContactRow_contactPhone );
            isCheckedCheckBox = (CheckBox) convertView.findViewById( R.id.projectContactRow_checkBox );

            convertView.setTag( new ViewHolder( contactName, contactPhone, isCheckedCheckBox ) );

            //setting on click listener for isCheckedCheckBox
            isCheckedCheckBox.setOnClickListener( new OnClickListener() {
                public void onClick(View v) {
                    CheckBox cb = (CheckBox)v;
                    PhoneContactListItem i = (PhoneContactListItem)cb.getTag();
                    i.toggleChecked();
                    cb.setChecked( i.isChecked() );
                }               
            });
        } else {
            ViewHolder vh = (ViewHolder)convertView.getTag();
            contactName = vh.getContactName();
            contactPhone = vh.getContactPhone();
            isCheckedCheckBox = vh.getIsCheckedCheckBox();
        }

        //initializing views
        isCheckedCheckBox.setTag( item );
        contactName.setText( item.getPhoneContact().getContactName() );
        contactPhone.setText( item.getPhoneContact().getContactPhone() );

        //initializing checkbox
        if( item.isChecked() )
            isCheckedCheckBox.setChecked( true );
        else 
            isCheckedCheckBox.setChecked( false );

        //enabling or disabling check box
        if( item.isCheckDisabled() ) 
            isCheckedCheckBox.setClickable( false );
        else 
            isCheckedCheckBox.setClickable( true );

        //showing checkboxes
        if( showCheckBoxes ) 
            isCheckedCheckBox.setVisibility( View.VISIBLE );
        else 
            isCheckedCheckBox.setVisibility( View.GONE );

        return convertView;
    }

    private class ViewHolder {
        private TextView contactName;
        private TextView contactPhone;
        private CheckBox isCheckedCheckBox;

        public ViewHolder( TextView contactName, TextView contactPhone, CheckBox isCheckedCheckBox ) {
            this.contactName = contactName;
            this.contactPhone = contactPhone;
            this.isCheckedCheckBox = isCheckedCheckBox;
        }

        /*
         * getters
         */
        public TextView getContactName() {
            return contactName;
        }
        public TextView getContactPhone() {
            return contactPhone;
        }
        public CheckBox getIsCheckedCheckBox() {
            return isCheckedCheckBox;
        }
    } 
```

这不是你的情况，但一样..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:03:20.323

不太确定为什么要在 longclick 侦听器中设置 onclick 侦听器。

您应该做的是创建一个自定义适配器，并在您的自定义适配器内部覆盖 getView 方法并膨胀包含

文本视图文本视图文本视图按钮

然后使用获取对按钮和文本视图的引用

```
buttonView = inflatedView.findViewById(R.id.button);
textView = inflatedView.findViewById(R.id.textView) 
```

并将 onClicklistener 绑定到此按钮引用，该按钮引用编辑此 textView 引用中的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:57:51.063

`ListView`重新使用行作为优化，这就是为什么您在单击按钮后会看到几行带有更改的文本的原因。

您需要为**所有**`textView`行设置值，即使文本与布局中的文本相同。

# c# - 计算数组中元素的数量

> ID：14976459
> 
> 赞同：3
> 
> 时间：2013-02-20T09:34:01.233
> 
> 标签：c#, arrays

该类`System.Array`实现`ICollection`接口。这个接口有一个名为的公共属性`Count`，它给出了数组中元素的数量。

假设我声明一个数组并访问它的属性

```
Array numbers = Array.CreateInstance(typeof(int), 10);
Console.WriteLine(numbers.Count); 
```

您会期望在屏幕上看到 10。`Count`但是，在数字后面加上句号后，我看不到财产。但是，有一个名为 的属性`Length`。为什么会这样？

更新：这是因为显式接口实现。由于还有一个和我类似的问题，我决定重新措辞。为什么要做出明确实现这一特定属性的设计决策？还有另一个具有相同功能的属性`Length`。那么为什么要麻烦提供显式实现`Count`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:38:29.597

您需要将其转换为`ICollection`.

[`Array.ICollection.Count`](http://msdn.microsoft.com/en-us/library/bb357392.aspx)财产

> 该成员是显式接口成员实现。`ICollection` 仅当将 Array 实例强制转换为接口时才能使用它。

顺便说一句，这是重复的：[我无法访问数组的 Count 属性，而是通过转换为 ICollection ！](https://stackoverflow.com/questions/1031583/i-can-not-access-count-property-of-the-array-but-through-casting-to-icollection)

**更新**：

> 这是因为显式接口实现。由于还有一个和我类似的问题，我决定重新措辞。为什么要做出明确实现这一特定属性的设计决策？还有另一个具有相同功能的属性 Length。那么为什么要麻烦提供显式实现的 Count 呢？

它继承自`IList<T>`which implements `ICollection<T>`。所以你可以问[**为什么数组实现`IList`**](https://stackoverflow.com/questions/5968708/why-array-implements-ilist)？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T09:39:36.007

`System.Array`类`ICollection`显式地实现接口。您`ICollection`只能在转换`Array`为之后使用方法`ICollection`

```
Array numbers = Array.CreateInstance(typeof(int), 10);
ICollection numbersCollection =  (ICollection)numbers;
Console.WriteLine(numbersCollection.Count); 
```

[隐式和显式接口实现](http://blogs.msdn.com/b/mhop/archive/2006/12/12/implicit-and-explicit-interface-implementations.aspx)

`System.Array.Count`实际使用`Array.Length`属性

```
int ICollection.Count
{
    get
    {
        return this.Length;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:36:43.137

`Count`是从`ICollection`接口显式实现的。这就是为什么它是不可见的。您必须进行投射`((ICollection) numbers).Count`才能进入该`Count`物业。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T12:09:25.120

我认为这不是编程问题，而是逻辑[内涵](http://en.wikipedia.org/wiki/Intension)问题。

你可能会问自己这两个问题：

**Q1**。数组是集合吗？

**Q2**。集合是数组吗？

在c#中，现有的实现告诉Q1的答案是：

**A1**：是的，数组是集合。因此`Array`实现`ICollection`。

Q2呢？类似的问题要问***一匹马是不是白马***？您可能想看看 [ [When a white horse is not a horse](http://en.wikipedia.org/wiki/When_a_white_horse_is_not_a_horse) ] 来寻找答案。

对于 Q2，我会回答：***“我不知道，这取决于上下文。”*** 那么，可能的上下文是什么？如果您将数组作为接口实现传递`ICollection`，那么是的，这个集合也是一个数组。但是，您可能会传递不同的对象，但具有相同接口的数组除外。那么，它一定是一个数组吗？如果您对此的某些扩展感兴趣，[[此答案](https://stackoverflow.com/questions/14965984/what-magic-is-this/14970434#14970434)]中的 A3 可能会让您有所了解。

因此，**它是完全合理的**，`Array`具有`Length`属性，也具有`Count`来自显式实现的属性`ICollection`。

# html - html5视频录制和上传？

> ID：14976460
> 
> 赞同：13
> 
> 时间：2013-02-20T09:34:01.843
> 
> 标签：html, html5-video, webrtc

我需要创建一个可以使用网络摄像头或移动摄像头录制视频的应用程序（它需要是跨平台的）。

到目前为止，我已经使用 webrtc getusermedia 编写了一个小的概念证明。它可以录制视频和播放，但我不知道如何让文件上传回服务器。

这是此示例的链接[http://jsfiddle.net/3FfUP/](http://jsfiddle.net/3FfUP/)

和javascript代码：

```
(function ($) {
window.URL = window.URL || window.webkitURL;
navigator.getUserMedia  = navigator.getUserMedia || navigator.webkitGetUserMedia ||
            navigator.mozGetUserMedia || navigator.msGetUserMedia;
var video = document.querySelector('video');
var onFailSoHard = function(e) {
    console.log('Reeeejected!', e);
};
$('#capture-button').click (function () {
    console.log ("capture click!");
    if (navigator.getUserMedia) {
        // Not showing vendor prefixes.
        navigator.getUserMedia({video: true, audio: true}, function(localMediaStream) {
            var video = document.querySelector('video');
            video.src = window.URL.createObjectURL(localMediaStream);

            // Note: onloadedmetadata doesn't fire in Chrome when using it with getUserMedia.
            // See crbug.com/110938.
            video.onloadedmetadata = function(e) {
                // Ready to go. Do some stuff.
            };
        }, onFailSoHard);
    } else {
        video.src = 'somevideo.webm'; // fallback.
    }
});
$('#stop-button').click (function (e) {
    video.pause ();
    localMediaStream.stop ();
});
})(jQuery); 
```

我怎样才能将这个示例中记录的内容作为文件获取，以便可以将其上传到服务器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-06T00:50:37.443

嗨，对不起，如果这有点晚了，但这是我设法将文件上传到服务器的方法，我真的不知道这是否是实现这一目标的最佳方法，但我希望它有助于给你一个线索.按照教程 Eric Bidelman 写的（正如 Sam Dutton 评论的那样）你得到的是一个 blob，所以我制作了一个 XMLHttpRequest 来获取视频并将响应类型设置为 blob，然后我创建了一个 FormData，我在其中附加了响应，这个将允许将 blob 发送到服务器。这是我的函数的样子。

```
function sendXHR(){
    //Envia bien blob, no interpretado
    var xhr = new XMLHttpRequest();
    var video=$("#myexportingvideo");
    xhr.open('GET', video.src , true);
    xhr.responseType = 'blob';
    xhr.onload = function(e) {
    if (this.status == 200) {
        // Note: .response instead of .responseText
        var blob = new Blob([this.response], {type: 'video/webm'});
        console.log(blob.size/1024);
        console.log(blob.type);
        form = new FormData(),
        request = new XMLHttpRequest();
        form.append("myblob",blob,"Capture.webm");
        form.append("myname",$("#name_test").value);
        request.open("POST","./UploadServlet",true);
        request.send(form);
       }
    };
    xhr.send();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:21:55.690

您可以分别录制[视频](http://html5-demos.appspot.com/static/getusermedia/record-user-webm.html)和[音频](https://github.com/mattdiamond/Recorderjs)。您可以获取文件 (WAV/WebM) 并按需上传。webkitMediaStream 需要两个对象 1) audioTracks 和 2) videoTracks。您也许可以结合音频/视频录制的流！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-05T21:56:23.680

我知道我迟到了几年，但这里有一个片段，它能够捕获视频并将其作为 webm 文件上传到包含的 node.js 服务器。我已经在 Chrome 和 Firefox 中进行了测试。

[https://gist.github.com/rissem/d51b1997457a7f6dc4cf05064f5fe984](https://gist.github.com/rissem/d51b1997457a7f6dc4cf05064f5fe984)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2014-12-22T18:02:50.433

唯一的**跨平台**网络录像机是[HDFVR 网络摄像头录像机软件](http://hdfvr.com)。

它在桌面上使用 Flash（使用 Flash 编解码器 + 流到媒体服务器的记录）和移动设备上的 HTML Media Capture API（使用 OS 记录 + 上传到网络服务器）从几乎任何桌面或移动浏览器录制视频。

您可以将其链接到 ffmpeg 安装以将所有内容转换为跨平台格式，例如 MP4（iOS 记录到无法在 Android 上播放的 .mov 容器），并且它还具有 JS API。

# ssl - javax.net.ssl、https 客户端和 close_notify

> ID：14976461
> 
> 赞同：8
> 
> 时间：2013-02-20T09:34:02.793
> 
> 标签：ssl, https, dhc

使用 javax.net.ssl 的 https 服务器的简单 Netty 实现，带有自签名证书。服务器已启动，然后[Restlet 使用 DHC](https://chrome.google.com/webstore/detail/dev-http-client/aejoelaoggembcahagimdiliamlcdmfm?hl=en)发出请求。在服务器端，我得到：

> io.netty.handler.ssl.SslHandler setHandshakeFailure **警告：SSLEngine.closeInbound() 由于连接关闭而引发异常。javax.net.ssl.SSLException：入站在收到对等方的 close_notify 之前关闭：可能的截断攻击？** 在 sun.security.ssl.Alerts.getSSLException(Unknown Source) 在 sun.security.ssl.SSLEngineImpl.fatal(Unknown Source) 在 sun.security.ssl.SSLEngineImpl.fatal(Unknown Source) 在 sun.security.ssl.SSLEngineImpl .closeInbound(Unknown Source) at io.netty.handler.ssl.SslHandler.setHandshakeFailure(SslHandler.java:905) at io.netty.handler.ssl.SslHandler.channelInactive(SslHandler.java:576) at io.netty.channel .DefaultChannelHandlerContext.invokeChannelInactive(DefaultChannelHandlerContext.java:819) 在 io.netty.channel.DefaultChannelHandlerContext.access$1300(DefaultChannelHandlerContext.java:38) 在 io.netty.channel.DefaultChannelHandlerContext$5.run(DefaultChannelHandlerContext.java:808) 在 io。 io.netty 上的 netty.channel.SingleThreadEventExecutor.runAllTask​​s(SingleThreadEventExecutor.java:259)。channel.nio.NioEventLoop.run(NioEventLoop.java:305) at io.netty.channel.SingleThreadEventExecutor$2.run(SingleThreadEventExecutor.java:110) at java.lang.Thread.run(Unknown Source)

在客户端：

> 没有反应。证书有效吗？点击这里查看。

在 Chrome 的地址栏发出相同的请求，同样的服务器端异常。在 Firefox 的地址栏发出同样的问题，当 Firefox 显示其关于证书不是来自受信任的 CA 的警告页面时，同样的异常。*这个异常看起来很笼统，并不直接表明协议的状态是什么*。这是否意味着这 3 个客户端（Chrome、Firefox、[Restlet 的 DHC](https://chrome.google.com/webstore/detail/dev-http-client/aejoelaoggembcahagimdiliamlcdmfm?hl=en)）没有很好地播放协议，只是在服务器上消失而不是发送 close_notify？还是 SSL RFC 要求的客户端行为，或者仅仅是面向安全的客户端设计？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-10T15:57:05.227

我已经[通过 Restlet](https://chrome.google.com/webstore/detail/dhc-resthttp-api-client/aejoelaoggembcahagimdiliamlcdmfm)团队与 DHC 联系，他们告诉了我一个解决方法：

> Chrome 不提供用于管理证书的 API。换句话说，我们没有 API 可以自动接受您的证书，也没有办法提出“不受信任的证书”对话框。但是，您可以使用一些解决方法：
> 
> 1.  在另一个选项卡中打开 https URL。
> 2.  手动接受证书。
> 3.  返回 DHC，它会起作用，因为您的证书已被上一步手动接受（存储在您的 Chrome 中）。
> 
> 通常你只需要这样做一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-25T09:00:12.217

我在 linux 机器上安装 Java 的开放 JDK 版本时遇到了这个问题，当我将 Java 版本更改为 Oracle JDK 时，问题就消失了。

引发此异常的确切应用程序是 Information Workbench（流体操作产品），Java 版本为 8 使用流体操作人员在系统先决条件中未提及的 Java 版本。

# sql - 如何使表格不在phpmyadmin的非空集字段中取空值？

> ID：14976467
> 
> 赞同：2
> 
> 时间：2013-02-20T09:34:33.130
> 
> 标签：sql, database, database-design, phpmyadmin

我在 phpmyadmin 中创建了 1 个表，其设置值不为空，但当我使用插入查询插入数据时，它仍然采用空值。
如何解决这个问题？

用于创建表的sql：

```
CREATE TABLE exmp.student ( id INT( 12 ) NOT NULL AUTO_INCREMENT PRIMARY KEY ,   
name VARCHAR( 200 ) NOT NULL ,  
 user_name VARCHAR( 200 ) NOT NULL ,  
 branch VARCHAR( 200 ) NOT NULL ) 
```

插入查询：

```
INSERT INTO exmp.student( name ) VALUES ( 'harjeet' ) 
```

它正在将价值纳入表中，但未显示错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:44:09.133

该`INSERT`语句是真实`INSERT`使用的吗？您创建的表是`exmp.student`. INSERT 正在使用`student`（不使用`exmp`模式）。

可能还有另一个允许`NULL`值的学生表？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:50:32.743

当您运行插入查询时，它会为`user_name`和`branch`列插入空字符串。我能够复制这个。

如果运行此查询，将非空列显式设置为空，则会返回错误：

```
INSERT INTO student( name, user_name, branch ) VALUES ( 'harjeet', null, null ) 
```

[有关数据类型默认值](http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html)，请参阅 MySql 5.0 参考：

> 从 MySQL 5.0.2 开始，如果列定义不包含显式 DEFAULT 值，MySQL 将按如下方式确定默认值：
> 
> 如果列可以将 NULL 作为值，则使用显式 DEFAULT NULL 子句定义该列。这与 5.0.2 之前的相同。
> 
> **如果该列不能以 NULL 作为值，MySQL 将定义没有显式 DEFAULT 子句的列。**例外：如果列被定义为 PRIMARY KEY 的一部分但未显式定义为 NOT NULL，则 MySQL 将其创建为 NOT NULL 列（因为 PRIMARY KEY 列必须为 NOT NULL），但也会使用隐式默认值为其分配 DEFAULT 子句价值。为防止这种情况，请在任何 PRIMARY KEY 列的定义中包含显式 NOT NULL。
> 
> **对于没有显式 DEFAULT 子句的 NOT NULL 列的数据输入，如果 INSERT 或 REPLACE 语句不包含该列的值，或者 UPDATE 语句将该列设置为 NULL，MySQL 根据有效的 SQL 模式处理该列时间：**
> 
> 如果启用了严格的 SQL 模式，则事务表会发生错误并回滚语句。对于非事务性表，会发生错误，但如果多行语句的第二行或后续行发生这种情况，则会插入前面的行。
> 
> **如果未启用严格模式，MySQL 会将列设置为列数据类型的隐式默认值。**

所以看起来你的 MySql 没有启用严格模式。列的隐式默认值`varchar`是空字符串，所以这就是所使用的。如果您希望它返回错误，请打开字符串模式。

# python - 周数的确定

> ID：14976468
> 
> 赞同：1
> 
> 时间：2013-02-20T09:34:34.440
> 
> 标签：python

我有一个今天的日期和日期（例如，2010-06-25）。所以，

```
from datetime import datetime, time, date
today = date.today()
year_past = 2010
past = datetime.strptime('25-06-'+str(year_past), '%d-%m-%Y') 
```

然后我需要找到从过去到现在的周数（int）。解释一下，我是通过 timedelta 来做的，但它不起作用。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:40:53.520

```
from datetime import date
today = date.today()
delta = today - date(2010,6,25)
delta.days / 7
# out: 138 
```

# struts2 - 注解中的 Struts2 令牌拦截器

> ID：14976471
> 
> 赞同：3
> 
> 时间：2013-02-20T09:34:39.277
> 
> 标签：struts2, annotations, struts2-convention-plugin

我正在使用带有令牌拦截器的 struts 2.3.1。如何在基于注释（约定）的动作类中使用令牌拦截器。

这是我的 struts.xml

```
<action name="tokenAction" class="roseindia.action.TokenAction">

 <interceptor-ref name="token" />

 <interceptor-ref name="basicStack"/>

 <result name="success" >/success.jsp</result>

 <result name="invalid.token">/index.jsp</result> 
```

任何人都可以告诉基于相同的注释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:17:20.370

在我看来，这在[此处](http://struts.apache.org/release/2.1.x/docs/convention-plugin.html#ConventionPlugin-InterceptorRefannotation)的文档中相当清楚，您需要这样做：

```
package com.example.actions;

import com.opensymphony.xwork2.ActionSupport; 
import org.apache.struts2.convention.annotation.Action;
import org.apache.struts2.convention.annotation.Actions;

@InterceptorRefs({
    @InterceptorRef("token"),
    @InterceptorRef("basicStack")
})
@Results({
    @Result(name="success", location="/success.jsp")
    @Result(name="invalid.token", location="/index.jsp")
})
public class HelloWorld extends ActionSupport {
  @Action(interceptorRefs={
      @InterceptorRef("token"),
      @InterceptorRef("basicStack")
  })
  public String myActionMethod() {
    //do stuff
    return SUCCESS;
  }
} 
```

# c# - 效率和性能要求

> ID：14976474
> 
> 赞同：0
> 
> 时间：2013-02-20T09:34:48.453
> 
> 标签：c#, .net, sql, sql-server, wpf

我在用户要填写的表单中有许多文本框，我想检查用户的输入是否存在于数据库中。类似于某些网站在您输入用户名时检查用户名的方式。如果后一个用户名存在于数据库中，则将其标记为绿色或带有复选框。

在我的例子中，用户必须填写一个完整的表格，其中每个文本框代表表格中的不同列。检查数据库中是否存在该值的最佳方法是什么？这必须是最快的方法，因为我不能承受滞后。

这是我想到采用的方法：

在用户开始输入数据之前，将在数据库上执行 SQL 查询以检索该表中的所有记录（一个简单的`SELECT * FROM table`）。接下来，这将被保存在一个`DataTable`.

当用户在文本框中完成输入文本时（即相应的文本框未聚焦），将检查表单中的所有文本框以查看它们的输入是否存在于数据库中。这将通过`LINQ`针对每个文本框的 DataTable 运行语句来执行，以查看该值是否包含在 DataTable 中。

这种方法行得通吗？我希望它尽可能快，并且不能容忍任何滞后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:37:28.967

如果行数`table`不是太大，这就是我会使用的方法。
如果数字太大而无法合理地将它们保存在内存中，您将不得不每次都访问数据库。
您可以进行以下优化：

1.  为您需要搜索的每一列添加一个索引。请注意，这会增加向该表添加行所需的时间
2.  仅在数据库中搜索实际更改的文本框
3.  在搜索数据库时，以文本框旁边的小微调器的形式给用户视觉反馈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:47:04.953

我建议不要一次检查所有字段。只要字段被填满，我就会考虑缩小数据范围的方法。

让我解释。让我们假设您有 10000 条用户记录`DataTable`。在用户完成填写第一个字段（通常是“名字”）后，然后只检查此列与您的数据库（`SELECT users.firstName FROM table`），然后您可以`DataTable`根据结果更新您的（`SELECT * FROM table WHERE firstName like ('%firstNameField%')`）。

您只能对加载数据的字段执行此操作，并且可以为您节省一些额外的时间。

希望你理解这个想法:)

# python - Python - 提供命令行参数 - 在“从 X 导入 A”中

> ID：14976476
> 
> 赞同：0
> 
> 时间：2013-02-20T09:34:49.063
> 
> 标签：python, command-line-arguments

我一直在浏览各种帖子，看看是否已经回答了这个问题。但要么我无法理解盯着我的答案，要么我脑海中的确切问题以前没有被问过。

问题：我创建了一个名为“Filter.py”的程序，其目的是接受一个文件作为命令行参数，比如“Flags.txt”，使用该文件进行大量“过滤”。例如。加载了一个数组 A。创建满足某些条件的子集 A_1，满足另一个集合的 A_2，依此类推。我希望这些数组 A_1、A_2 在其他程序中可用。所以，我在另一个程序中说

```
from Filter import * 
```

只要“Filter.py”被编程为即使没有提供命令行参数，上述方法也可以工作。问题是 - 使用上述方法导入时，我可以传递命令行参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:43:24.007

不。最好的方法是将你的功能包装在你的脚本中的一个函数（我们称之为它`main`）中，它可以做所有事情。`Filter.py`并添加以下内容：

```
# Filter.py
#...

if __name__ == '__main__':

    # ...

    main(some, args) 
```

这样，从命令行调用：

```
python Filter.py 
```

将执行`main`。如果你想在另一个脚本中导入它（main 不会被调用）：

```
# your other program
import Filter

# ...

Filter.main(some, args) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:43:54.900

我不确定您是如何在 Filter.py 中设置程序的

但是你能把算法包装在一个函数中并在函数调用中传递参数吗

例如。

```
from Filter import filter
result = filter(argA, argB, argC) 
```

# .net - linq to sql - 按 XML 字段中的属性排序

> ID：14976486
> 
> 赞同：1
> 
> 时间：2013-02-20T09:35:18.750
> 
> 标签：.net, linq

我有一个 SQL 表，其中包含一个 XML 字段。

我想要做的是从每个 XML 字段的数据中按根元素的属性排序的 SQL 表中获取所有数据。

所以我有一个带有“userid”（guid）、一个“description”（xml）和一个“type”（int）的项目表。

单个记录如下所示：

```
1205159E-B4F9-41A9-955E-A3554AF1F21A
1
<book displayText="new book">
    <txtTitle>new book</txtTitle>
    <txtSubTitle>book 1</txtSubTitle>
    <txtAuthor>book 1 author</txtAuthor>
</book> 
```

我正在尝试按“displayText”返回排序列表..基于简单文本的排序..

我试过这个

```
return (from i in mContext.Items
        where i.Type == Type
          &&  i.UserID == UserID
        orderby (string)i.Description.Attribute("displayName")
        select i).ToList(); 
```

但我不断得到：方法'System.Xml.Linq.XAttribute Attribute(System.Xml.Linq.XName)'不支持SQL转换

我对 linq 的要求太高了吗？？？？当然不是..还是我应该硬着头皮创建一个 sql sproc 并在数据库中执行它..???

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:37:48.177

你不能通过 linq2sql 做到这一点！linq 的结果是一个 SQL 查询，你在 linq2sql 中使用的函数是 .net 函数，在 SQL 中没有任何实现函数。您可以将所有数据放入 List 并通过代码对其进行排序（更多时间！！！）

在该转换期间，它只是一个方法调用，仅此而已。Linq to Sql 了解某些方法调用，而您的方法调用不是其中之一。因此错误。

从表面上看，这似乎应该奏效。您编写可重用的查询并从其他查询中组合它们。但是，您实际上是在说：“在数据库服务器上处理每一行的过程中，调用此方法”，这显然是做不到的。它接受一个`IQueryable<T>`并返回一个的事实`IQueryable<T>`并没有使它特别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:38:34.277

Linq-to-Sql 无法解释该属性 - 它在向 Sql Server 的转换中没有并行，因此当它被提交时，它会返回您收到的错误。

您仍然可以使用只能在客户端访问的属性（例如 Attributes）来执行与 Linq 相关的操作。为此，您首先需要将数据带到客户端（`ToList()`在 Linq-to-Sql 查询上使用命令），然后在本地对其进行排序。例如：

```
var query = mContext.Items.Where(i => i.Type == Type && i.UserID == UserID).ToList();
return query.OrderBy(i => i.Description.Attribute("displayName")).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:38:25.570

是的，您要求从 Linq 到 SQL 的匹配度太高了。

您需要的是通过 Linq to SQL 或 Linq to Entities 从数据库中检索 Xml，然后使用 Linq to Xml 处理内存中的数据。

```
return  mContext.Items.Where(i => i.Type == Type && i.UserID == UserID)
                .ToList()
                .OrderBy(i => (string)XElement.Parse(i.Description)
                                              .Attribute("displayName")); 
```

# regex - 带有换行符的正则表达式向后看？

> ID：14976487
> 
> 赞同：0
> 
> 时间：2013-02-20T09:35:19.313
> 
> 标签：regex, perl

我正在尝试使用前瞻/后向提取边界之间的内容，如下所示：

```
Filename: myfile.txt
Message: myMessage
Time:... 
```

我想使用正则表达式提取文件名和时间之间的内容：

```
(?<=.txt).*(?=Time) 
```

但它不起作用，因为不采用换行符。我可以改变什么来匹配？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:39:27.217

首先，你忘了逃避`.`in `.txt`。

```
/(?<=\.txt).*(?=Time)/ 
```

其次，您实际上并没有捕获（“提取”）任何东西。

```
/(?<=\.txt)(.*)(?=Time)/ 
```

然后你需要告诉 Perl`.`应该匹配每个字符，而不是除换行符之外的每个字符。

```
/(?<=\.txt)(.*)(?=Time)/s 
```

你去吧。您可以通过仅从一行的开头到结尾进行匹配来稍微改进它：

```
/(?<=\.txt\n)(.*)^(?=Time)/sm 
```

顺便说一句，在这种情况下似乎没有任何理由使用环视。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:38:52.000

为了`.`匹配换行符，您需要启用`/s`，这使得整个字符串被视为单行。

此外，您可能不应该为此使用环视。通常，仅当您想要获得重叠匹配时才应使用它们。当用于简单地获得部分匹配时，它们可能会产生意想不到的结果。

获得部分匹配的标准方法是使用捕获子组：

```
if (/\.txt(.*?)Time/s)
{
   print "The between portion is:\n$1";
} 
```

# language-agnostic - 关于引用环境和范围

> ID：14976488
> 
> 赞同：0
> 
> 时间：2013-02-20T09:35:20.137
> 
> 标签：language-agnostic, programming-languages

如果范围是变量可见的“地方”，而引用环境是程序中某个点中可见的变量集，那么它们之间有区别吗？

例如[这里](http://phobos.ramapo.edu/~amruth/grants/problets/courseware/scope/home.html)说“”“范围的反面是引用环境......”“”但我不太明白那个断言！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:31:22.957

我认为“converse”一词用词不当，更不用说对比两个本质上不同的类别，即（组）变量和代码中可以访问所述变量的位置。“补充”可能是一个更好的选择。

由于给出的原因，是的，有区别。

您引用的参考文献可能打算颂扬的是变量/参数掩蔽。考虑一些在过程本地声明的变量“a”。假设过程体的一部分是一个局部块，在该块中声明了另一个也称为“a”的变量。

第一个变量“a”将是过程（本地）引用环境的一部分。它的范围扩展到整个过程主体，除了具有自己的变量“a”声明的块。在伪代码中（真实世界的代码可以是例如 c、perl、plsql）：

```
proc xy
   local a;
   ...
   block
      local a;
      ...
   endblock
   ...
endproc 
```

此示例仅用于说明目的，因为省略了细节：它假定静态范围，从其他可能也定义一些“a”的本地块中抽象出来，以及访问“外部 a”的特殊机制（即 perl 允许运行时访问整个符号表）。

# ruby-on-rails - 宝石“better_errors”不起作用 - Rails 3.2

> ID：14976491
> 
> 赞同：8
> 
> 时间：2013-02-20T09:35:27.727
> 
> 标签：ruby-on-rails, ruby, gem, ruby-on-rails-3.2

我想在我的 rails 3.2 应用程序中使用 gem “better_errors”，但它仍然是显示的默认错误页面。

在我的 Gemfile 中：

```
group :development do
  gem 'quiet_assets', '>= 1.0.1'
  gem 'better_errors', '>= 0.3.2'
  gem 'binding_of_caller', '>= 0.6.8'
end 
```

我做了一个“捆绑安装”然后

```
bundle show better_errors
/usr/local/lib/ruby/gems/1.9.1/gems/better_errors-0.5.0 
```

一切似乎都配置得很好。

我在开发环境中运行我的 Rails 服务器

```
rails s -e development 
```

有任何想法吗？非常感谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-07T20:52:42.503

我为同样的问题挠了几天头。我终于给查理发了电子邮件，一个小时左右后他回复了我的答案：“你需要在本地主机上才能使用 better_errors”

我一直在 Windows 7 主机上的 Ubuntu VM 中进行开发，并从 Windows 浏览该站点。虽然这是一个安全风险，但您可以按照此处的说明进行操作：[https ://github.com/charliesome/better_errors#security](https://github.com/charliesome/better_errors#security)

我希望这可以解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-29T16:25:00.473

将行添加到 ./config/environments/development.rb

> BetterErrors::Middleware.allow_ip！“CLIENT_IPADDR”

并且，重新启动 rails-server

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:43:18.377

您可以关注这一集 railscast：

[http://railscasts.com/episodes/402-better-errors-railspanel](http://railscasts.com/episodes/402-better-errors-railspanel)

这是我`group development`的`better_errors`宝石：

```
group :development do
  gem 'better_errors'
  gem 'binding_of_caller'
  gem 'meta_request'
end 
```

您可以按照以下步骤操作：

将 gem更新`better_error`到最新版本！

1º`current version`使用`better_error`命令卸载 gem `gem uninstall better_errors`。

2º 然后删除gem 文件的`'>= 1.0.1'`, `'>= 0.3.2'`,`'>= 0.6.8'`并运行命令`bundle install`

问候！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T10:15:08.097

您可以尝试捆绑更新吗？因为我的当前版本是 0.6.0。

另外我不使用 config/initializers/better_errors.rb 文件

如果您没有 500 个内部服务器错误，请检查服务器日志，当我在 ajax 更新后将它们放在模型中时，我看不到 better_errors 页面。

# django - python / django中的高质量图表

> ID：14976492
> 
> 赞同：1
> 
> 时间：2013-02-20T09:35:32.543
> 
> 标签：django, python-imaging-library, libreoffice

我正在使用 LibreOffice 绘图。图表简直太棒了。我想使用 django 在我的 Web 应用程序中创建质量相当（我认为很高）的图表。

大多数开发人员都推荐 matplotlib，但我不想这样做，因为我需要 bar、line、pie、area 类型的图表。任何人都可以在 python/django 中建议图表库。

或者，如果 python/django 以外的解决方案可以生成高质量的图表（包括 3D），请提出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T21:33:38.597

我同意 jvc26 的评论，[d3](http://d3js.org/)是一个不错的选择。我还推荐[nvd3](https://pypi.python.org/pypi/django-nvd3/) - 一个专门为将 D3 与 django 一起使用而设计的 python 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T06:07:25.923

我为二维坐标系上的图像编写了一个简单的（至少我认为它很简单）python 库。您可能想试一试，它托管在 github - [cartesius](http://tkrajina.github.com/cartesius/)上。这里有一些例子：

![在此处输入图像描述](../Images/181473cbc719baf45278179b787424ba.png)

![在此处输入图像描述](../Images/fef9c6414fd8f246dd84a0bac63c694b.png)

![在此处输入图像描述](../Images/937463515e460c251bc0f880888622b6.png)

![在此处输入图像描述](../Images/cb88db799efefd808bc8ae8f8cfd91c0.png)

# iphone - 如何将 mp4 文件从文档复制到照片库（在 iPhone 中）？

> ID：14976493
> 
> 赞同：1
> 
> 时间：2013-02-20T09:35:33.293
> 
> 标签：iphone, ios, objective-c, copy, photolibrary

我的应用程序中有一个 mp4 视频（在 Document 文件夹中）！我想将其复制或移动到 Photolibrary... 我该怎么做？请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:44:33.590

如果你不想使用 assest 库，这里是代码

```
 NSString *documentDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES) objectAtIndex:0];
 NSString *videoFile = [documentDirectory stringByAppendingPathComponent:@"video.mp4"];
 UISaveVideoAtPathToSavedPhotosAlbum(videoFile, self, @selector(video:didFinishSavingWithError:contextInfo:), nil);

- (void)video:(NSString *) videoPath didFinishSavingWithError: (NSError *) error contextInfo: (void *) contextInfo {
     if(error)
           NSLog(@\"didFinishSavingWithError: %@\", error);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:38:30.220

我认为你可以使用：

```
- (void)writeVideoAtPathToSavedPhotosAlbum:(NSURL *)videoPathURL completionBlock:(ALAssetsLibraryWriteVideoCompletionBlock)completionBlock 
```

方法从`ALAssetsLibrary`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T22:01:32.673

要移动到照片库（在 iOS 中称为相机胶卷）：

```
NSString *fileURLString = @"file://....somepath.../somefile.mp4";
NSURL *fileURL = [NSURL URLWithString:fileURLString];

// Check compatibility
if ([[ALAssetsLibrary new] videoAtPathIsCompatibleWithSavedPhotosAlbum:fileURL]) {
    // Save to Photo Library / Camera Roll
    [[ALAssetsLibrary new] writeVideoAtPathToSavedPhotosAlbum:fileURL completionBlock:nil];
} else {
    NSLog(@"Incompatible type. Cannot save to Photo Library.");
} 
```

要复制到任何文件夹，但您可能不想这样做：

```
NSFileManager *fileManager = [NSFilemanager defaultManager];
NSURL *originalDirectory = [NSURL fileURLWithPath:@"/originalDir/filename.mp4"];
NSURL *newDirectory = [NSURL fileURLWithPath:@"/newDirectory/filename.mp4"];

[fileManager moveItemAtURL:originalDirectory toURL:newDirectory error:nil]; 
```

如果您需要先下载，请执行以下操作：

使用`ALAssetsLibrary`如下：

```
 #import <AssetsLibrary/AssetsLibrary.h>
  // ...
  ALAssetsLibrary *assetsLibrary = [[ALAssetsLibrary alloc] init];
  [assetsLibrary writeVideoAtPathToSavedPhotosAlbum:yourVideoURL completionBlock:^(NSURL *assetURL, NSError *error){
    if (error) {
      // Do something, like show an Alert View describing the error
    }
  }]; 
```

# javascript - 使用 JavaScript 获取选定的选项文本

> ID：14976495
> 
> 赞同：204
> 
> 时间：2013-02-20T09:35:41.157
> 
> 标签：javascript, html, dom, drop-down-menu

我有一个这样的下拉列表：

```
<select id="box1">
<option value="98">dog</option>
<option value="7122">cat</option>
<option value="142">bird</option>
</select> 
```

如何使用 JavaScript 获取实际的选项文本而不是值？我可以通过以下方式获得价值：

```
<select id="box1" onChange="myNewFunction(this.selectedIndex);" > 
```

而是`7122`我想要`cat`的。

* * *

## 回答 #1

> 赞同：344
> 
> 时间：2013-02-20T09:42:24.693

尝试选项

```
function myNewFunction(sel) {
  alert(sel.options[sel.selectedIndex].text);
}
```

```
<select id="box1" onChange="myNewFunction(this);">
  <option value="98">dog</option>
  <option value="7122">cat</option>
  <option value="142">bird</option>
</select>
```

* * *

## 回答 #2

> 赞同：151
> 
> 时间：2013-02-20T09:38:46.170

纯 JavaScript

```
var sel = document.getElementById("box1");
var text= sel.options[sel.selectedIndex].text; 
```

jQuery：

```
$("#box1 option:selected").text(); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-09-09T21:32:19.270

所有这些功能和随机的东西，我认为最好使用这个，并且这样做：

```
this.options[this.selectedIndex].text 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2020-03-01T17:29:31.857

# 据我所知，有两种解决方案。

> 两者都只需要使用 vanilla javascript

## 1 已选择选项

> 现场演示

```
const log = console.log;
const areaSelect = document.querySelector(`[id="area"]`);

areaSelect.addEventListener(`change`, (e) => {
  // log(`e.target`, e.target);
  const select = e.target;
  const value = select.value;
  const desc = select.selectedOptions[0].text;
  log(`option desc`, desc);
});
```

```
<div class="select-box clearfix">
  <label for="area">Area</label>
  <select id="area">
    <option value="101">A1</option>
    <option value="102">B2</option>
    <option value="103">C3</option>
  </select>
</div>
```

## 2 个选项

> 现场演示

```
const log = console.log;
const areaSelect = document.querySelector(`[id="area"]`);

areaSelect.addEventListener(`change`, (e) => {
  // log(`e.target`, e.target);
  const select = e.target;
  const value = select.value;
  const desc = select.options[select.selectedIndex].text;
  log(`option desc`, desc);
});
```

```
<div class="select-box clearfix">
  <label for="area">Area</label>
  <select id="area">
    <option value="101">A1</option>
    <option value="102">B2</option>
    <option value="103">C3</option>
  </select>
</div>
```

* * *

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-02-20T09:38:05.733

*HTML：*

```
<select id="box1" onChange="myNewFunction(this);"> 
```

*JavaScript：*

```
function myNewFunction(element) {
    var text = element.options[element.selectedIndex].text;
    // ...
} 
```

**演示：http:** [//jsfiddle.net/6dkun/1/](http://jsfiddle.net/6dkun/1/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-02-20T09:37:47.263

利用 -

```
$.trim($("select").children("option:selected").text())   //cat 
```

这是小提琴 - [http://jsfiddle.net/eEGr3/](http://jsfiddle.net/eEGr3/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-08-17T23:12:35.790

反应 / 最新的 JavaScript

```
onChange = { e => e.currentTarget.option[e.selectedIndex].text } 
```

如果值在循环内，将为您提供准确的值。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-06-12T03:04:43.457

要使用 Typescript 在 React 上使用它：

```
 const handleSelectChange: React.ChangeEventHandler<HTMLSelectElement> = (event) => {
    const {  options, selectedIndex } = event.target;
    const text = options[selectedIndex].text;
    // Do something...
  }; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-20T09:37:22.380

~~您需要获取选项的 innerHTML，而不是其值。~~

使用`this.innerHTML`而不是`this.selectedIndex`.

~~编辑：您需要先获取选项元素，然后使用 innerHTML。~~

使用`this.text`而不是`this.selectedIndex`.

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-12-08T07:08:24.903

```
function runCode() {
  var value = document.querySelector('#Country').value;
  window.alert(document.querySelector(`#Country option[value=${value}]`).innerText);
}
```

```
<select name="Country" id="Country">
   <option value="IN">India</option>
   <option value="GBR">United Kingdom </option>
   <option value="USA">United States </option>
   <option value="URY">Uruguay </option>
   <option value="UZB">Uzbekistan </option>
</select>

<button onclick="runCode()">Run</button>
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-11-08T13:13:04.960

使用 jQuery。
在您的活动中

```
 let selText = $("#box1 option:selected").text();
  console.log(selText); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-12-04T18:48:00.563

```
 <select class="cS" onChange="fSel2(this.value);">
     <option value="0">S?lectionner</option>
     <option value="1">Un</option>
     <option value="2" selected>Deux</option>
     <option value="3">Trois</option>
 </select>

 <select id="iS1" onChange="fSel(options[this.selectedIndex].value);">
     <option value="0">S?lectionner</option>
     <option value="1">Un</option>
     <option value="2" selected>Deux</option>
     <option value="3">Trois</option>
 </select><br>

 <select id="iS2" onChange="fSel3(options[this.selectedIndex].text);">
     <option value="0">S?lectionner</option>
     <option value="1">Un</option>
     <option value="2" selected>Deux</option>
     <option value="3">Trois</option>
 </select>

 <select id="iS3" onChange="fSel3(options[this.selectedIndex].textContent);">
     <option value="0">S?lectionner</option>
     <option value="1">Un</option>
     <option value="2" selected>Deux</option>
     <option value="3">Trois</option>
 </select>

 <select id="iS4" onChange="fSel3(options[this.selectedIndex].label);">
     <option value="0">S?lectionner</option>
     <option value="1">Un</option>
     <option value="2" selected>Deux</option>
     <option value="3">Trois</option>
 </select>

 <select id="iS4" onChange="fSel3(options[this.selectedIndex].innerHTML);">
     <option value="0">S?lectionner</option>
     <option value="1">Un</option>
     <option value="2" selected>Deux</option>
     <option value="3">Trois</option>
 </select>

 <script type="text/javascript"> "use strict";
   const s=document.querySelector(".cS");

 // options[this.selectedIndex].value
 let fSel = (sIdx) => console.log(sIdx,
     s.options[sIdx].text, s.options[sIdx].textContent, s.options[sIdx].label);

 let fSel2= (sIdx) => { // this.value
     console.log(sIdx, s.options[sIdx].text,
         s.options[sIdx].textContent, s.options[sIdx].label);
 }

 // options[this.selectedIndex].text
 // options[this.selectedIndex].textContent
 // options[this.selectedIndex].label
 // options[this.selectedIndex].innerHTML
 let fSel3= (sIdx) => {
     console.log(sIdx);
 }
 </script> // fSel 
```

但 ：

```
 <script type="text/javascript"> "use strict";
    const x=document.querySelector(".cS"),
          o=x.options, i=x.selectedIndex;
    console.log(o[i].value,
                o[i].text , o[i].textContent , o[i].label , o[i].innerHTML);
 </script> // .cS" 
```

还有这个：

```
 <select id="iSel" size="3">
     <option value="one">Un</option>
     <option value="two">Deux</option>
     <option value="three">Trois</option>
 </select>

 <script type="text/javascript"> "use strict";
    const i=document.getElementById("iSel");
    for(let k=0;k<i.length;k++) {
        if(k == i.selectedIndex) console.log("Selected ".repeat(3));
        console.log(`${Object.entries(i.options)[k][1].value}`+
                    ` => ` +
                    `${Object.entries(i.options)[k][1].innerHTML}`);
        console.log(Object.values(i.options)[k].value ,
                    " => ",
                    Object.values(i.options)[k].innerHTML);
        console.log("=".repeat(25));
    }
 </script> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-11-18T21:06:07.927

我只是复制所有 amazon.com 的“选择列表”，您可以从以下 image.gif 链接查看演示。

![现在看演示](../Images/95fd561c7e716a54177ecbb8c6c6c6dc.png)

我喜欢 amazon.com 的“选择/选项”css 样式和 javascript 技巧......

现在就试试....

```
/***javascript code***/
  document.querySelector("#mySelect").addEventListener("click", () => {
    var x = document.querySelector("#mySelect").selectedIndex;
    let optionText = document.getElementsByTagName("option")[x].innerText;
    document.querySelector(".nav-search-label").innerText = optionText;
  });
```

```
/***style.css***/
  .nav-left {
    display: -webkit-box;
    display: -moz-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    position: static;
    float: none;
  }
  .nav-search-scope {
    display: -webkit-box;
    display: -moz-box;
    display: -webkit-flex;
    display: -ms-flexbox;
    display: flex;
    position: relative;
    float: none;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }
  .nav-search-facade {
    position: relative;
    float: left;
    cursor: default;
    overflow: hidden;
    top: 3px;
  }
  .nav-search-label {
    display: block;
    overflow: hidden;
    white-space: nowrap;
    text-overflow: ellipsis;
    color: #555;
    font-size: 12px;
    line-height: 33px;
    margin-right: 21px;
    margin-left: 5px;
    min-width: 19px;
  }
  .nav-icon {
    position: absolute;
    top: 14px;
    right: 8px;
    border-style: solid;
    _border-style: dashed;
    border-width: 4px;
    border-color: transparent;
    border-top: 4px solid #666;
    border-bottom-width: 0;
    width: 0;
    height: 0;
    font-size: 0;
    line-height: 0;
  }
  .nav-search-dropdown {
    position: absolute;
    display: block;
    top: -1px;
    left: 0;
    height: 35px;
    width: auto;
    font-family: inherit;
    outline: 0;
    margin: 0;
    padding: 0;
    cursor: pointer;
    opacity: 0;
    filter: alpha(opacity=0);
    visibility: visible;
    border: 0;
    line-height: 35px;
  }
```

```
<!--html code-->
<div class="nav-left">
  <div id="nav-search-dropdown-card">
    <div class="nav-search-scope nav-sprite">
      <div class="nav-search-facade">
        <span class="nav-search-label" style="width: auto">All</span>
        <i class="nav-icon"></i>
      </div>

      <select
        id="mySelect"
        class="nav-search-dropdown searchSelect"
        style="display: block; top: 3px"
        tabindex="0"
        title="Search in"
      >
        <option>All Departments</option>
        <option>Arts &amp; Crafts</option>
        <option>Automotive</option>
        <option>Baby</option>
        <option>Beauty &amp; Personal Care</option>
        <option>Books</option>
        <option>Computers</option>
        <option>Digital Music</option>
        <option>Electronics</option>
        <option>Kindle Store</option>
        <option>Prime Video</option>
        <option>Women's Fashion</option>
        <option>Men's Fashion</option>
        <option>Girls' Fashion</option>
        <option>Boys' Fashion</option>
        <option>Deals</option>
        <option>Health &amp; Household</option>
        <option>Home &amp; Kitchen</option>
        <option>Industrial &amp; Scientific</option>
        <option>Luggage</option>
        <option>Movies &amp; TV</option>
        <option>Music, CDs &amp; Vinyl</option>
        <option>Pet Supplies</option>
        <option>Software</option>
        <option>Sports &amp; Outdoors</option>
        <option>Tools &amp; Home Improvement</option>
        <option>Toys &amp; Games</option>
        <option>Video Games</option>
      </select>
    </div>
  </div>
</div>
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-08-22T00:42:54.937

您可以使用 method 方法获取包含所选项目的类似数组的对象`getSelected()`。像这样：

```
querySelector('#box1').getSelected() 
```

`.textContent`因此您可以使用该属性提取文本。像这样：

```
querySelector('#box1').getSelected()[0].textContent 
```

如果你有一个多选框，你可以循环遍历类似数组的对象，我希望它可以帮助你

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2013-02-20T09:43:09.063

试试下面的：

```
myNewFunction = function(id, index) {
    var selection = document.getElementById(id);
    alert(selection.options[index].innerHTML);
}; 
```

请参阅[此处的 jsfiddle](http://jsfiddle.net/LyM9X/)示例

# php - 刷新 DIV 时停止页面自动滚动

> ID：14976498
> 
> 赞同：0
> 
> 时间：2013-02-20T09:35:56.677
> 
> 标签：php, ajax, scroll

我有这个脚本每 5 秒加载一个 DIV 的 php 页面

```
<script type="text/javascript">

var auto_refresh = setInterval(
function ()
{
$('#reload').load('refresh.php');
}, 5000);
</script> 
```

我面临的问题是每次向下滚动页面并刷新DIV时，整个页面都会向上滚动到DIV的位置。我已经尝试了所有可能的解决方案，但都没有奏效。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:40:22.427

在页面中创建一个锚点并将其设置在`document.location`

# php - php $this-> 函数中的变量不能像我希望的那样工作

> ID：14976500
> 
> 赞同：1
> 
> 时间：2013-02-20T09:36:05.317
> 
> 标签：php, variables, this

我正在学习 PHP 并阅读 Robin Nixon 的书。我在使用此代码时遇到问题：

```
<?php 
class Centre
{
    public $centre_name; // String: The name of the centre
    public $tagline; // String: The centre's tagline

        // Set the centres details. This will later be done through a form.
    function set_details()
    {
        $this->centre_name = "YMCA";
        $this->tagline = "Lets all go to the Y";
    }

        // Display the centres details. 
    function display()
    {
        echo "Centre Name - " . $centre->centre_name . "<br />";
        echo "Centre Tagline - " . $centre->tagline . "<br />";
    }
} 

?>

<?php 
    $centre = new Centre();
    $centre->set_details();
    $centre->display();
?> 
```

现在这是输出：中心名称 - 中心标语 - 因此正在设置变量。我在使用 $this->variable = "whatever"; 正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:37:27.673

改变这个

```
function display()
{
    echo "Centre Name - " . $centre->centre_name . "<br />";
    echo "Centre Tagline - " . $centre->tagline . "<br />";
} 
```

到

```
function display()
{
    echo "Centre Name - " . $this->centre_name . "<br />";
    echo "Centre Tagline - " . $this->tagline . "<br />";
} 
```

您使用`$centre`而不是`$this`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:38:03.770

像这样更改您的函数 dispaly() ：

在您的班级内，您可以使用以下方式访问变量`$this`

```
 function display()
    {
        echo "Centre Name - " . $this->centre_name . "<br />";
        echo "Centre Tagline - " . $this->tagline . "<br />";
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:39:56.110

是的，但是在 display() 中用“this”替换“center”：

```
function display()
{
    echo "Centre Name - " . $this->centre_name . "<br />";
    echo "Centre Tagline - " . $this->tagline . "<br />";
} 
```

# python - 在python中同时读取和写入文件

> ID：14976501
> 
> 赞同：0
> 
> 时间：2013-02-20T09:36:07.867
> 
> 标签：python, file

我计划在 python3 中使用三个文本文件或三个数据库表的应用程序，我不确定要使用什么。这些文件仅包含字符串或数据库表中的单个列，每行中都有一个字符串。

该应用程序具有三个程序program_A，program_B，program_C，它们操作这三个文件，file_A和file_B和file_C。程序A读取/写入file_A读取file_C并写入file_B，program_B读取/写入file_B，program_C写入file_A和file_C.file_A和file_B只不过是虚构的队列，因此程序从文件中读取一行，然后从文件中删除该行（因此我提到了读/写），并且写入文件的程序将一行写入文件末尾。

我不确定如何让这些程序工作，因为这些程序同时访问文件。我研究了 sqlite 文件锁定状态，但我不知道如何使用它来解决我的场景。我也不确定如果我应该使用 sqlite 数据库或简单的文本文件。

我也在考虑使用某种共享内存或内存数据库，我可以在应用程序启动时加载这些文件的内容，并在应用程序退出时写回文件，但我担心如果某些软件硬件故障意味着我会由于失败导致文件未更新，因此丢失了在该应用程序运行中完成的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:51:35.467

在同一个文件中读取和写入？不，这只会带来痛苦和困难。您可以尝试使用[threading](http://docs.python.org/3.3/library/threading.html)或[multiprocessing](http://docs.python.org/3.3/library/multiprocessing.html)的机制来共享数据，并拥有`queue`适合您需求的实现。

sqlite 方法似乎也很好，因为您可以添加必要的数据来设置这些“队列”的顺序等等，但我不喜欢通过数据库进行通信的进程。

# shopify - 有没有办法在我的 Shopify 应用程序被卸载时收到通知？

> ID：14976502
> 
> 赞同：2
> 
> 时间：2013-02-20T09:36:08.780
> 
> 标签：shopify

我有一个 Shopify 应用程序，并试图了解用户在我的系统中的流程。

有时我会看到我发出的 API 请求失败，并且当我检查时我得到“无效的 API 密钥或访问令牌”，而同一访问令牌以前在这家商店工作过。

我唯一的结论是该用户在某个时间点卸载了我的应用程序。

当用户卸载我的应用程序时，是否可以获得某种通知？这可以帮助我更好地了解用户流程并确认 API 请求失败的原因。我可以通过不断轮询安装了我的应用程序的每个商店来实现这一点，但这相当笨拙 - 有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T15:34:39.783

您可以注册一个 webhook - 一个 HTTP 调用，当某个事件发生时将调用您选择的端点。在这种情况下，您要列出的事件是“应用程序/卸载”。

有关详细信息，请参阅[http://api.shopify.com/webhook.html 。](http://api.shopify.com/webhook.html)

# java - SSH 隧道远程访问 MySQL 数据库

> ID：14976504
> 
> 赞同：3
> 
> 时间：2013-02-20T09:36:11.297
> 
> 标签：java, mysql, remote-access, ssh-tunnel, blackboard

我正在尝试编写 Java 程序来使用 ssh 隧道访问远程 mySQL 数据库。

下面是我的代码：

```
int lport = 5656;

int rport = 3306;

String rhost = "111.222.333.444";

String host = "111.222.333.444";

String user = "username";

String password = "password1234";

String dbUser = "mySQLuser";

String dbPass = "mySQLpassword1234";

String schema = "test_db";

Connection conn = null;

try {

Properties config = new Properties();

config.put("StrictHostKeyChecking", "no");

JSch jsch = new JSch();

jschSession = jsch.getSession(user, host, 22);

jschSession.setPassword(password);

jschSession.setConfig(config);

jschSession.connect();

logger.info("Connected");

int assigned_port = jschSession.setPortForwardingL(lport, rhost, rport);

logger.info("localhost:" + assigned_port + " -> " + rhost + ":" + rport);

logger.info("Port Forwarded");

Class.forName("com.mysql.jdbc.Driver").newInstance();

String url = "jdbc:mysql://localhost:" + rport + "/" + schema;

conn = DriverManager.getConnection(url, dbUser, dbPass);

logger.info("Database connection established");

Statement stmt = conn.createStatement();

String sql = "SELECT * FROM TEST_TABLE";

ResultSet rs = stmt.executeQuery(sql);

while(rs.next()) {

logger.info(rs.getInt(1) + " " + rs.getString(2));

}

rs.close();

stmt.close();

logger.info("DONE");

} catch (Exception e) {

e.printStackTrace();

logger.error(e.getMessage());

if (jschSession != null && jschSession.isConnected()) {

System.out.println("Closing SSH Connection during error");

logger.error("Closing SSH Connection during error");

jschSession.disconnect();

}

} finally {

if (conn != null && !conn.isClosed()) {

System.out.println("Closing Database Connection");

logger.info("Closing Database Connection");

conn.close();

}

if (jschSession != null && jschSession.isConnected()) {

System.out.println("Closing SSH Connection");

logger.info("Closing SSH Connection");

//jschSession.disconnect();

}

} 
```

我很确定所有的用户名和密码都是正确的。

但是，当我尝试运行上述代码时，它总是在以下行中失败：

```
conn = DriverManager.getConnection(url, dbUser, dbPass); 
```

除了以下例外：

```
INFO   | jvm 1    | 2013/02/20 17:25:24 | java.sql.SQLException: Access denied for user 'mySQLuser'@'localhost' (using password: YES)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:946)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2985)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:885)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3421)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1247)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at com.mysql.jdbc.Connection.createNewIO(Connection.java:2775)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at com.mysql.jdbc.Connection.<init>(Connection.java:1555)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at java.sql.DriverManager.getConnection(DriverManager.java:582)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at java.sql.DriverManager.getConnection(DriverManager.java:185)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at com.prject.testing.Test.<init>(Test.java:97)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:76)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$4.run(AbstractAutowireCapableBeanFactory.java:997)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at java.security.AccessController.doPrivileged(Native Method)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:995)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:955)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:487)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:458)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:874)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:816)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:731)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:485)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:92)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:458)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:926)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:477)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:638)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:595)
INFO   | jvm 1    | 2013/02/20 17:25:24 |       at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:652) 
```

我还检查了 mySQL，用户“mySQLuser”的“主机”已经在“用户”表中设置为“%”。
谁能给我一些建议？

**更新：**

采纳@bmorris591 的建议，

我改变了 String url = "jdbc:mysql://localhost:" + rport + "/" + schema; 转换成字符串 url = "jdbc:mysql://localhost:" + lport + "/" + schema；

但是，出现了一个新的异常：

```
java.io.EOFException: Can not read response from server. Expected to read 4 bytes, read 0 bytes before connection was unexpectedly lost.
    at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:1997)
    at com.mysql.jdbc.MysqlIO.readPacket(MysqlIO.java:573)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1044)
    at com.mysql.jdbc.Connection.createNewIO(Connection.java:2775)
    at com.mysql.jdbc.Connection.<init>(Connection.java:1555)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:285)
    at java.sql.DriverManager.getConnection(DriverManager.java:582)
    at java.sql.DriverManager.getConnection(DriverManager.java:185)
    at com.project.testing.Test.<init>(Test.java:98)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:147)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:76)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$4.run(AbstractAutowireCapableBeanFactory.java:997)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:995)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:955)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:487)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:458)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:874)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:816)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:731)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:485)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:92)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:284)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:458)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:605)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:926)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:477)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:638)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:595)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:652)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:514)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:455)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:138)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at sun.reflect.GeneratedMethodAccessor120.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:270)
    at org.apache.catalina.security.SecurityUtil$1.run(SecurityUtil.java:269)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAsPrivileged(Subject.java:517)
    at org.apache.catalina.security.SecurityUtil.execute(SecurityUtil.java:302)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:163)
    at org.apache.catalina.security.SecurityUtil.doAsPrivilege(SecurityUtil.java:117)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1200)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421) 
```

并且在这行代码中仍然发生错误：

```
conn = DriverManager.getConnection(url, dbUser, dbPass); 
```

错误信息让我很困惑，

谁能给我更多的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:47:51.400

似乎错误就在这一行：

```
String url = "jdbc:mysql://localhost:" + rport + "/" + schema; 
```

给定 than `rport`is `3306`，即远程机器上的 mySQL 端口，您正在连接到

```
"jdbc:mysql://localhost:3306/" + schema; 
```

哪台是你的本地机器。您需要连接到：

```
String url = "jdbc:mysql://localhost:" + lport + "/" + schema; 
```

这将是本地机器上转发到`3306`远程机器上的端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:55:18.183

`"mySQLuser"@"%"`让您从任何*远程*主机进行连接。您应该`"mySQLuser"@"localhost"`能够在本地登录，通过 SSH 隧道时就是这种情况。

默认 MySQL 安装有一个匿名用户帐户，其主机为`localhost`，因此在本地登录时，该帐户被认为是更“特定”的用户。也就是说，没有`"mySQLuser"@"localhost"`帐户，您将被视为匿名用户帐户。

# validation - PrimeFaces TabView在TAB更改时跳过表单验证

> ID：14976505
> 
> 赞同：3
> 
> 时间：2013-02-20T09:36:12.950
> 
> 标签：validation, jsf-2, primefaces, onchange, tabview

我正在使用 PrimeFaces 3.3 和 Mojarra 2.17。

我有一个包含`p:tabView`. 第二个选项卡包含一个文本框和`required="true"`. 当我从第二个选项卡导航到第一个选项卡时，它将验证文本框为空并显示一条错误消息（我有一个`PhaseListener`类可以在 global 中显示错误`p:messages`）。如何跳过此验证？

我在以下方面找不到任何解决方案：

*   [http://code.google.com/p/primefaces/issues/detail?id=3423](http://code.google.com/p/primefaces/issues/detail?id=3423)
*   [http://code.google.com/p/primefaces/issues/detail?id=4143](http://code.google.com/p/primefaces/issues/detail?id=4143)

而且我不想使用 PrimeFaces `p:wizard`。

我的 tabView.xhtml：

```
<p:tabView id="tabView" dynamic="true" cache="false" activeIndex="0" >  
      <p:ajax event="tabChange" listener="#{test.onTabChange}"/> 
      <p:tab id="tab1" title="Tab1">
        <ui:include src="#{test.tab1}"></ui:include>
      </p:tab>
      <p:tab id="tab2" title="Tab2">  
        <ui:include src="#{test.tab2}"></ui:include>
      </p:tab>
</p:tabView> 
```

在我的 Java 类中：

```
public void onTabChange(TabChangeEvent event) {              
     this.setTab1("tab1.xhtml");
     this.setTab2("tab2.xhtml"）;
 } 
```

我的 tab1.xhtml：

```
<h:form id="form1">    
    <p:messages globalOnly="true" />
    tab1 page
    <br/>
</h:form> 
```

我的 tab2.xhtml：

```
<h:form id="form2">
    <p:messages globalOnly="true" />
    <p>
        tab2 page
    </p>
    <p:inputText id="txt1" required="true" />
    <p:message for="txt1" display="text" />
    <p:commandButton value="Submit" update="@form" />
</h:form> 
```

我的 PhaseListener 类：

```
public class MyPhaseListener implements PhaseListener {
    @Override
    public void afterPhase(PhaseEvent e) {
        if (e.getPhaseId() == PhaseId.PROCESS_VALIDATIONS) {
            if (FacesContext.getCurrentInstance().getMessageList().size() > 0) {
                String number = String.valueOf(FacesContext.getCurrentInstance().getMessageList().size());
                String errorMsg = "there are " + number + " errors.";
                FacesContext.getCurrentInstance().addMessage(
                        null,
                        new FacesMessage(FacesMessage.SEVERITY_ERROR, errorMsg,
                                errorMsg));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T03:52:19.583

我通过添加代码解决了我的问题：
FacesContext.getCurrentInstance().renderResponse();
在 backign bean 中的 TabChangeEvent 方法下..

例如：

```
public void onTabChange(TabChangeEvent event) {              
  this.setTab1("tab1.xhtml");
  this.setTab2("tab2.xhtml"）;
  FacesContext.getCurrentInstance().renderResponse();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:45:57.470

`immediate="true"`在您的 ajax 事件标记中添加属性。这将阻止您的字段被验证，并且只会调用您的侦听器：

```
<p:ajax event="tabChange" listener="#{test.onTabChange}" immediate="true"/> 
```

# sql-server - sp 持续时间不等于 sql profiler 中语句持续时间的总和

> ID：14976516
> 
> 赞同：-1
> 
> 时间：2013-02-20T09:36:40.580
> 
> 标签：sql-server, stored-procedures, sql-server-profiler

我有一个在sql profiler中占用6000多毫秒的sp，但是当我查看这个sp中的语句执行时间时，大部分都是0，语句执行时间的总和远小于6000，我不知道在哪里6000ms 来自...请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:56:07.427

在 SQL Profiler 中，持续时间数字以微秒而不是毫秒为单位。

您可能会看到您的语句结果从 0.000001 舍入到 0。

[SQL Profiler CPU/持续时间单位](https://stackoverflow.com/questions/976628)

# svn - 将 svn 中的项目从根目录移动到 /trunk

> ID：14976517
> 
> 赞同：0
> 
> 时间：2013-02-20T09:36:40.740
> 
> 标签：svn, branch, move, trunk

我的项目位于 SVN 根目录中，但我需要将其移至 /trunk 以成为使用分支。

我可以通过保存所有提交历史来移动它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:19:01.377

是的。使用 svn 移动。这只是一个复制+删除，因此历史记录将在未选中“停止复制/删除”的情况下可用。

# java - android - 生成随机日期和时间

> ID：14976523
> 
> 赞同：3
> 
> 时间：2013-02-20T09:37:07.403
> 
> 标签：java, android, arrays, datetime

为了触发一些未来的事件，我正在尝试创建一个算法来执行以下操作：

*   `yyyy-mm-dd`以“ ”格式生成一定数量的随机日期
*   以“”格式为每个日期生成时间`hh:mm:ss`时间应该是（24 小时）在 9 到 22 小时之间
*   将这些项目添加到字符串数组。1 个完整的数组条目看起来像“ `2013-02-25 09:45:23`”

我没有明确的想法如何执行此操作。有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T09:49:24.093

您需要的确切解决方案..

```
public class RandomDateTime {

    public static void main(String[] args) {

        SimpleDateFormat dfDateTime  = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss",Locale.getDefault());
        int year = RandomDateTime.randBetween(1900, 2013);// Here you can set Range of years you need
        int month = RandomDateTime.randBetween(0, 11);
        int hour = RandomDateTime.randBetween(9, 22); //Hours will be displayed in between 9 to 22
        int min = RandomDateTime.randBetween(0, 59);
        int sec = RandomDateTime.randBetween(0, 59);

        GregorianCalendar gc = new GregorianCalendar(year, month, 1);
        int day = RandomDateTime.randBetween(1, gc.getActualMaximum(gc.DAY_OF_MONTH));

        gc.set(year, month, day, hour, min,sec);

        System.out.println(dfDateTime.format(gc.getTime()));

    }

    public static int randBetween(int start, int end) {
        return start + (int)Math.round(Math.random() * (end - start));
    }
} 
```

您可以在以下位置找到 SimpleDateTime 的更多用途：http: [//docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T09:41:32.187

您可以做的是使用随机函数获取随机时间戳，我的意思是您可以轻松获取随机长值，然后将该时间戳转换为日期对象，如下所示

[Java简单的时间戳到日期转换](https://stackoverflow.com/questions/3661137/java-simple-timestamp-to-date-conversion)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:41:14.013

这个想法很简单。您可以使用 Date(milis) 构造函数和随机数生成器来生成随机日期和时间。您必须找到下限和上限，并从中随机选择一个数字。

格式化日期和时间非常简单，您可以使用 DateFormat 类来完成。

# symfony - 在表单构建器中访问表单数据以添加自定义属性

> ID：14976524
> 
> 赞同：0
> 
> 时间：2013-02-20T09:37:08.007
> 
> 标签：symfony, symfony-2.1, symfony-forms

我正在创建具有集合类型的表单，并且集合元素具有带有数据转换器的字段，女巫是 ID 到实体转换器：

```
$builder->add(
        $builder->create('template', 'text', array(
            'label' => false,
            'required' => false,
            'attr' => array(
                'class' => 'template-selector',
            )
        ))->addModelTransformer($transformer)
    ); 
```

这是必需的，因为我想将此字段转换为 Select2 (javascript lib) ajax 驱动的元素。

问题是我需要用数据填充 Select2，为此我只有一个合理的（出于性能考虑）选项将来自表单构建器的数据作为属性（比如说数据值）传递，但表单构建器有任何数据，除非我在其中创建元素EventListener 但后来我无法添加模型转换器。

我怎样才能实现这样的功能？没有任何额外的查询或 ajax 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:55:20.163

我发现在树枝模板中执行此操作的唯一方法：

```
{% if item.get('value').template %}
    {% set templ_id = item.get('value').template.getId %}
    {% set templ_text = item.get('value').template.getTitle %}

    {{ form_row(item.template, {'attr': {'data-value' : '{id:' ~ templ_id ~ ', text:"' ~ templ_text ~ '"}'}}) }}
{% else %}
    {{ form_row(item.template) }}
{% endif %} 
```

其中 item 是表单集合元素

# web-services - 有没有办法使用 Spring 从 WebService 检索 MTOM 附件？

> ID：14976527
> 
> 赞同：1
> 
> 时间：2013-02-20T09:37:14.320
> 
> 标签：web-services, spring, mtom

我正在使用 [1] 连接到 Web 服务，它工作得很好。现在我必须使用 [1] 从这个 Web 服务中检索 MTOM 附件？因为目前我只得到空对象。

[1] [http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/remoting.html#remoting-web-services-jaxws-access](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/remoting.html#remoting-web-services-jaxws-access)

# html - 带有外部文本的 Outlook HTML 签名

> ID：14976536
> 
> 赞同：0
> 
> 时间：2013-02-20T09:37:34.077
> 
> 标签：html, outlook, signature, outlook-2010

我工作的公司实施了与 Outlook 2010 一起使用的新签名。我们公司每年也参加许多展览，我们希望让我们的客户知道这一点。

问题是我想在我们的 html 签名中加载一个外部文本文件，这样我只需要更新一个包含我们将参加的展览信息的文件。

Outlook 去除了 iframe 标签、对象标签，似乎我也无法运行 php 脚本。

谁能帮我找到替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:28:57.193

编写一个 Outlook 插件来搜索特殊名字对象的签名，并将其替换为来自公司可访问位置（例如 Intranet、ActiveDirectory、网站等）的所需文本。

Outlook 存储签名 C:\Users\YOURUSERNAME\AppData\Roaming\Microsoft\Signatures 以便您可以检索此文件夹，其中包含以下内容

```
string SignaturePath = Path.Combine(
  Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData), "Microsoft", "Signatures)); 
```

从这里开始，我将使用 FileIO 来遍历签名，并附加我想要的文本。如果您在大型企业中工作，则可以将 Outlook VTSO 文件配置为使用您公司的集中式软件更新/安装程序软件下推。

# java - 实例化一个抽象类或接口，可能吗？

> ID：14976545
> 
> 赞同：2
> 
> 时间：2013-02-20T09:37:54.287
> 
> 标签：java

这很好用。

```
package abstracttest;

public abstract class AbstractClass implements NewInter {

    public abstract void doStuff();

    public void doStuff2() {
        System.out.println("in doStuff2");
    }

    /*
     * public static void main(String a[]) { AbstractClass ab = new
     * AbstractClass() {
     * 
     * @Override public void doStuff() { // TODO Auto-generated method stub
     * System.out.println(" doStuff "); }
     * 
     * @Override public void doInter() { // TODO Auto-generated method stub
     * 
     * } };
     * 
     * ab.doStuff2(); ab.doStuff();
     * 
     * NewInter ni = new NewInter() {
     * 
     * @Override public void doInter() { // TODO Auto-generated method stub
     * System.out.println("do Inter"); }
     * 
     * }; ni.doInter();
     * 
     * AbstractClass ab1 = new AbstractClass(); }
     */

}

interface NewInter {

    String con = "Hell";

    void doInter();
}

class Impl extends AbstractClass {

    @Override
    public void doInter() {
        // TODO Auto-generated method stub

    }

    @Override
    public void doStuff() {
        // TODO Auto-generated method stub

    }

    public static void main(String[] s) {
        AbstractClass ab = new AbstractClass() {

            @Override
            public void doInter() { // TODO Auto-generated method stub
                System.out.println("impl doInter");
            }

            @Override
            public void doStuff() { // TODO Auto-generated method stub
                System.out.println("impl doStuff");
            }

        };
        ab.doInter();
        ab.doStuff();

        NewInter ni1 = new NewInter() {

            @Override
            public void doInter() {
                // TODO Auto-generated method stub

            }
        };
        ni1.doInter();
    }

} 
```

我能够从抽象类`abstract class`和从. 这怎么可能？ 我期待一个异常，但调用工作正常。 有人可以解释一下这些现象吗？我很困惑。`interface``main()``class Impl`

> Java 抽象类也不能被实例化，但可以在 main() 存在的情况下被调用。

我在[博客](http://javapapers.com/core-java/abstract-and-interface-core-java-2/difference-between-a-java-interface-and-a-java-abstract-class/)中读到了这个。这是什么意思？

还有其他方法可以调用抽象类的构造函数吗？请让我知道是否有。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-20T09:39:35.547

不，你没有实例化它们。您只创建了实现接口或扩展抽象类的匿名类。这些匿名类类型的对象实际上是实例化的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-20T09:41:13.153

如果我这样做：

```
new AbstractClass() {
   public void methodToImplement() {
   }
} 
```

它正在创建一个从抽象类*派生*的匿名类。它之所以被称为（匿名），是因为类定义没有它自己的可访问名称，并且您无法再次访问该定义。定义/实例化一起发生，例如

```
AbstractClass ac = new AbstractClass() {
   ...
} 
```

（它是 的*子*类`AbstractClass`）

请注意，您可以对接口和抽象类执行此操作，但您必须适当地实现所需的方法。

The above is often used to implement simple interfaces/abstract classes in a concise form, often as inner classes within callbacks. See [this SO question](https://stackoverflow.com/questions/355167/how-are-anonymous-inner-classes-used-in-java) for more info, and the [Nested Class tutorial](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html) for more discussion.

# vb.net - 文件夹和文件操作

> ID：14976547
> 
> 赞同：0
> 
> 时间：2013-02-20T09:37:58.947
> 
> 标签：vb.net

我是 VB 新手，但我需要在我的项目中使用 VB 来实现这些。

我`target.file`在本地有一个文件。网络服务器上有一个`target`文件夹。下有数百个文件夹`target`。其中一些`backup`文件夹下有文件夹。

我需要复制`target.file`到文件夹下的那些文件`target`夹，但只有在已经存在的情况下才复制/替换`target.file`。如果`target.file`存在，则将文件复制并替换到备份文件夹（如果备份文件夹存在）。如果没有，请先创建备份文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:57:12.340

您需要使用`System.IO`命名空间中的方法。看看[文档](http://msdn.microsoft.com/en-gb/library/system.io%28v=vs.80%29.aspx)，有很多有趣和有用的类，特别是[File](http://msdn.microsoft.com/en-gb/library/system.io.file%28v=vs.80%29.aspx)、[Directory](http://msdn.microsoft.com/en-gb/library/system.io.directory%28v=vs.80%29.aspx)和[Path](http://msdn.microsoft.com/en-gb/library/system.io.path%28v=vs.80%29.aspx)。

这是您需要的方法：

*   [**File.Exists()**](http://msdn.microsoft.com/en-gb/library/system.io.file.exists%28v=vs.80%29.aspx)：检查给定路径上是否存在文件。
*   [**File.Copy()**](http://msdn.microsoft.com/en-gb/library/c6cfw35a%28v=vs.80%29.aspx)：复制给定路径上的文件。
*   [**Directory.Exists()**](http://msdn.microsoft.com/en-gb/library/system.io.directory.exists%28v=vs.80%29.aspx)：检查给定路径上是否存在目录。
*   [**Directory.CreateDirectory()**](http://msdn.microsoft.com/en-gb/library/system.io.directory.createdirectory%28v=vs.80%29.aspx)：创建给定路径上不存在的所有目录。

但是，您不需要检查文件是否存在，因为您可以在启用覆盖选项的情况下直接复制：

```
File.Copy(sourceFile, destPathFile, True) 'True for overwrite 
```

# apache-camel - Camel smpp 发送短信的特殊字符

> ID：14976551
> 
> 赞同：0
> 
> 时间：2013-02-20T09:38:12.403
> 
> 标签：apache-camel, smpp

我正在做一个项目，我正在将来自 activeMQ 队列的消息发送到 sms-c。

这很好用，只是我目前无法发送法语中使用的特殊字符，例如：é è à ：这些字符在手机上无法正确显示。

您知道我应该在配置中更改什么以正确发送这些字符吗？

我应该更改哪些 smpp 选项？[http://camel.apache.org/smpp.html](http://camel.apache.org/smpp.html)

是我应该改变的数据编码、编码还是字母？或者可能是3的组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:04:05.807

在我做的初始测试中，我将 dataCoding / alphabet (= 8 UCS2) 设置为 URI 选项。这没有用。

如果我设置

UCS2 的字母表作为 Producer Message Header 和 encoding = UTF-16BE 作为 URI 选项

然后它工作:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-06T18:19:56.167

这是为我工作的自动配置参数

```
camel.component.smpp.configuration.encoding=UTF-16BE
camel.component.smpp.configuration.data-coding=8 
```

# android - 绘制多边形并使其可使用 android 进行编辑.....

> ID：14976555
> 
> 赞同：0
> 
> 时间：2013-02-20T09:38:22.817
> 
> 标签：android

实际上我正在android中进行图像编辑并使用画布......但我不知道......

1.  如何一起使用画布和 UI ..??
2.  如何在画布上使用按钮和其他小部件...？？
3.  如何使多边形可编辑..这样，如果我触摸任何点，它就会突出显示，我可以调整多边形的大小。

有我的代码：

```
public class Crop_Image_Activity1 extends Activity implements OnClickListener
{

    static int count=0,i=0,j=0;
    ImageView img1;
    Button bt1,bt2;
    Path path=new Path();
    Paint mPaint;
    float x_current,y_current;

    float x0,y0;
    float x1,y1;
    float pointx[]=new float[20];
    float pointy[]=new float[20];
    String num;

    MyView view1; 
    ViewGroup.LayoutParams params;

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_crop__image__activity1);
    img1=(ImageView)findViewById(R.id.imageView1);
    bt1=(Button)findViewById(R.id.button1);
    bt2=(Button)findViewById(R.id.button2);
    //img1.setImageResource(R.drawable.pic1);

    this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(0xFFFF0000);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(1);

    view1=new MyView(this);
    params =new ViewGroup.LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT);
    addContentView(view1, params);

   // bt1.setOnClickListener(this);
   // bt2.setOnClickListener(this);

}
public class MyView extends View implements android.view.GestureDetector.OnGestureListener{

    private Bitmap  mBitmap;
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;
    private GestureDetector gestureScanner;

    public MyView(Context c) 
    {
        super(c);
        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        gestureScanner=new GestureDetector(this);

    }

    @Override
   protected void onSizeChanged(int w, int h, int oldw, int oldh) 
   {
        super.onSizeChanged(w, h, oldw, oldh);
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
   }

    @SuppressLint("DrawAllocation")
    @Override
    protected void onDraw(Canvas canvas) 
    {

        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
        canvas.drawPath(mPath, mPaint);

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) 
    {

        return gestureScanner.onTouchEvent(event);

    }

    public boolean onDown(MotionEvent arg0) 
    {

        x1=arg0.getX();
        y1=arg0.getY();

        if(count==-1)
        {
            mPath.reset();
            mPath.moveTo(pointx[j],pointy[j]);
        }

        else if(count==0)////    storing initial points 
        {
           mPath.moveTo(x1, y1);
           mCanvas.drawCircle(x1,y1,10, mPaint);
           x0=x1;
           y0=y1;
           pointx[i]=x1; /// storing all points in array 
           pointy[i]=y1;
        }

        else if(count>0)
        {
            mPath.moveTo(x_current,y_current);
            mCanvas.drawCircle(x_current,y_current,10, mPaint);

        }
        count++;

        invalidate();

        return true;
    }

    @Override
    public boolean onFling(MotionEvent arg0, MotionEvent arg1, float arg2,float arg3) 
    {

         x_current=arg1.getX();
         y_current=arg1.getY();

         i++;
         pointx[i]=x_current;
         pointy[i]=y_current;
         mPath.lineTo(x_current,y_current);
         mCanvas.drawPath(mPath, mPaint);
         invalidate();
        return true;
    }

    public boolean onSingleTapUp(MotionEvent e) 
    {

         mPath.moveTo(x_current,y_current);
         mPath.lineTo(x0,y0);
         mCanvas.drawPath(mPath, mPaint);
         invalidate();

         return true;
    }
    public boolean onDoubleTapUp(MotionEvent e) 
    {

        return false;

    }
    public void onLongPress(MotionEvent e)
    {

        for(j=0;j<=i;j++)
        {
            if((e.getX()>pointx[j]-20 && e.getX()<pointx[j]+20) && (e.getY()>pointy[j]-20 && e.getY()<pointy[j]+20))
            {
                mPaint.setColor(Color.BLUE);
                mCanvas.drawCircle(pointx[j],pointy[j],20, mPaint);
                count=-1;
                invalidate();
                mPaint.setColor(0xFFFF0000);
                break;

            }
        }

    }

    @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2,float distanceX, float distanceY) 
    {

        return false;
    }

    @Override
    public void onShowPress(MotionEvent e) 
    {

    }
}

public void onClick(View view)
{
    switch(view.getId())
    {
          case R.id.button1:

                break;
          case R.id.button2:

               // Intent intent1=new Intent();
               // startActivity(intent1);
                break;
    }

}

public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_crop__image__activity1, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:34:58.873

如果您希望自定义视图和 xml 布局中的组件都出现在屏幕上，请创建一个 RelativeLayout 并将其设置为活动的视图。然后将您的自定义视图添加到该布局并使用相对布局作为父级从您的 .xml 文件中扩展视图。

像这样：

```
RelativeLayout relativeLayout = new RelativeLayout(this);
setContentView(relativeLayout);

layout.addView(myView);

LayoutInflater inflater = LayoutInflater.from(this);
inflater.inflate(R.layout.activity_crop__image__activity1, relativeLayout); 
```

关于最后一个问题，在你的 onTouch 方法中尝试这样

```
public boolean onTouch(View v, MotionEvent event) {
    switch(event.getAction()){
    case MotionEvent.ACTION_DOWN:
    tx = event.getX();  // get coordinates when you touch the screen
    ty = event.getY();
    break;
    case MotionEvent.ACTION_MOVE:
    newX = event.getX();   // get coordinates when you move the finger
    newY = event.getY();

    for(int i = 0; i < pointx.length; i++){ // iterate over points array
        if(((tx - pointx[i])*(tx - pointx[i]) + (ty - pointy[i])*(ty - pointy[i])) < 20){
            // if you touched within 20 pixels of the polygon's vertex
            // ...
            // create Path anew replacing that vertex with coordinates newX and newY
            }
        }
        break;
    }
    return true;
} 
```

# spring - Spring InitBinder：将浮点字段的空值或空值绑定为 0

> ID：14976566
> 
> 赞同：6
> 
> 时间：2013-02-20T09:38:48.890
> 
> 标签：spring, spring-mvc, bind

我只是想知道是否可以告诉@InitBinder 表单中的空浮点值将转换为0。

我知道 float 是一种原始数据类型，但我仍然想将 null 或空值转换为 0。

如果这是可能的，我怎么能做到这一点？

否则，我将使用字符串而不是浮点数来解决

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-14T02:30:46.453

将 CustomNumberEditor 的子类定义为

```
import org.springframework.beans.propertyeditors.CustomNumberEditor;
import org.springframework.util.StringUtils;

public class MyCustomNumberEditor extends CustomNumberEditor {

    public MyCustomNumberEditor(Class<? extends Number> numberClass) throws IllegalArgumentException {
        super(numberClass, true);
    }

    @Override
    public void setAsText(String text) throws IllegalArgumentException {
        if (!StringUtils.hasText(text)) {
            setValue(0);
        }else {
            super.setAsText(text.trim());
        }
    }

} 
```

然后在你的控制器类中（我为我的所有应用程序控制器创建了一个 BaseController，我需要为我的应用程序中的所有数字基元类型提供这种行为，所以我只需在我的 BaseController 中定义它），为各种基元类型注册绑定器。注意 MyCustomNumberEditor 的构造函数参数必须是 Number 的子类，而不是原始类类型。

```
 @InitBinder
public void registerCustomerBinder(WebDataBinder binder) {
    binder.registerCustomEditor(double.class, new MyCustomNumberEditor(Double.class));
    binder.registerCustomEditor(float.class, new MyCustomNumberEditor(Float.class));
    binder.registerCustomEditor(long.class, new MyCustomNumberEditor(Long.class));
    binder.registerCustomEditor(int.class, new MyCustomNumberEditor(Integer.class));
....    
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T10:06:01.920

是的，您总是可以这样做。Spring 有一个`CustomNumberEditor`可自定义的属性编辑器，可用于任何 Number 子类（如 Integer、Long、Float、Double）。它默认由 BeanWrapperImpl 注册，但可以通过将其自定义实例注册为自定义来覆盖编辑器。这意味着您可以扩展这样的类

```
public class MyCustomNumberEditor extends CustomNumberEditor{

    public MyCustomNumberEditor(Class<? extends Number> numberClass, NumberFormat numberFormat, boolean allowEmpty) throws IllegalArgumentException {
        super(numberClass, numberFormat, allowEmpty);
    }

    public MyCustomNumberEditor(Class<? extends Number> numberClass, boolean allowEmpty) throws IllegalArgumentException {
        super(numberClass, allowEmpty);
    }

    @Override
    public String getAsText() {
        //return super.getAsText();
        return "Your desired text";
    }

    @Override
    public void setAsText(String text) throws IllegalArgumentException {
        super.setAsText("set your desired text");
    }

} 
```

然后在你的控制器中正常注册它：

```
 @InitBinder
    public void initBinder(WebDataBinder binder) {

       binder.registerCustomEditor(Float.class,new MyCustomNumberEditor(Float.class, true));
    } 
```

这应该完成任务。

# sql - SQL - 避免额外的 GROUP BY（并提高查询性能）

> ID：14976567
> 
> 赞同：0
> 
> 时间：2013-02-20T09:38:49.523
> 
> 标签：sql, sql-server, group-by, sql-tuning

我一直在解决这个问题，听到新的想法应该很高兴:)

我有一张像这样的数十亿条记录的表

```
TAB_IX (int) (PK)
TAB_ID (int) (PK)
PR_ID (int) (PK)
SP_ID (int) (PK)(IX)
.... 
```

以前我正在检索这样的数据

```
SELECT TAB_ID, COUNT (SP_ID) as HITS FROM table t
INNER JOIN table_sp s on t.SP_ID = s.ID
WHERE TAB_IX = @tab_inx 
AND PR_ID IN (SELECT PR_ID FROM @pr_id)
AND s.NAME IN (SELECT DISTINCT NAME FROM @sp_names)  
GROUP BY TAB_ID 
```

table_sp 是一个有 10k 条记录的小表（ID (int) (PK), NAME (varchar) (IX)）

@pr_id 和 @sp_names 是一列的表变量

查询非常快（大约 2-3 秒）；现在我不想区分具有不同 PR_ID 和相同 TAB_IX、TAB_ID、SP_ID 的记录

所以例如像这样的记录

```
TAB_IX - TAB_ID - PR_ID - SP_ID
1      - 700    - 1     - 100
1      - 700    - 2     - 100 
```

应视为一。

唯一的方法似乎是做一个额外的 GROUP BY

像这样

```
SELECT TAB_ID, COUNT(SP_ID) as HITS FROM (
SELECT TAB_ID, SP_ID, COUNT (PR_ID) FROM table 
WHERE TAB_IX = @tab_inx 
AND PR_ID in (select PR_ID from @pr_id)
AND s.NAME IN (SELECT DISTINCT NAME FROM @sp_names)
GROUP BY TAB_ID, SP_ID) AS DUMMY
GROUP BY TAB_ID 
```

问题在于性能，因为添加这个额外的 GROUP BY 操作看起来很痛苦。

您对改进查询有什么想法吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:45:04.857

我想在原始查询中指定要计数`DISTINCT SP_ID`的就可以了

```
SELECT TAB_ID, COUNT (DISTINCT SP_ID) as HITS FROM table t
INNER JOIN table_sp s on t.SP_ID = s.ID
WHERE TAB_IX = @tab_inx 
AND PR_ID IN (SELECT PR_ID FROM @pr_id)
AND s.NAME IN (SELECT DISTINCT NAME FROM @sp_names)  
GROUP BY TAB_ID 
```

# php - 将（shoutcast 状态）脚本的输出写入图像

> ID：14976571
> 
> 赞同：0
> 
> 时间：2013-02-20T09:39:01.683
> 
> 标签：php, image, perl, gd, shoutcast

我正在尝试使用 GD 将（shoutcast 状态）脚本的以下输出写入图像，但它不起作用。我究竟做错了什么？

```
$string = "/home/test.txt"; 
```

使用上面的只是显示文件的路径而不是它的内容。

输出：

```
psytrance.value 37
breaks.value 8
dubstep.value 6
reggae.value 130
oldskool.value 5
ambient.value 81
test.value    <- this should be ignored!
complete.value 267 
```

php:

```
<?php
header ("Content-type: image/png");
$string = "/home/test.txt";
// try changing this as well
$font = 4;
$width = imagefontwidth($font) * strlen($string) ;
$height = imagefontheight($font) ;
$im = imagecreatefrompng("/home/banner2.png");
$x = imagesx($im) - $width ;
$y = imagesy($im) - $height;
$backgroundColor = imagecolorallocate ($im, 255, 255, 255);
$textColor = imagecolorallocate ($im, 0, 0,0);
imagestring ($im, $font, $x, $y,  $string, $textColor);
imagepng($im);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T23:00:19.527

广播状态保存在`test.txt`? 然后你必须将文件的内容写入你的PNG。

```
$content = file_get_contents ($string);
[...]
$lines = explode("\n", $content);
foreach ($lines as $line) {
    if (strstr("test.value", $line) !== false) continue;
    imagestring ($im, $font, $x, $y,  $string, $textColor);
    $y += 20;
} 
```

# sql - 带有 SELECT 的 UPDATE 语句

> ID：14976587
> 
> 赞同：0
> 
> 时间：2013-02-20T09:39:49.157
> 
> 标签：sql, oracle

我正在尝试在 ORACLE 中使用 SELECT 语句编写 UPDATE 语句，但我一直收到“无效标识符”错误。我确信该领域存在。

这是我的 SQL：

```
update 
(
select distinct a.item_id, a.account_code, b.item_id, b.account_code
from bp.poline a, mt.material b 
where a.item_id = b.item_id  
and a.account_code is not null and b.account_code is null
)
set b.account_code = a.account_code 
```

这是我得到的错误：

```
Error report:
SQL Error: ORA-00904: "A"."ACCOUNT_CODE": invalid identifier
00904\. 00000 -  "%s: invalid identifier 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:50:36.933

在 Oracle 中，只有当 Oracle 能够为子查询的每一行准确定位基表中的**一行且仅一行时，您才能更新子查询。**此外，对分析功能、聚合等的使用还有[其他限制。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_10008.htm#SQLRF55455)

在您的示例中，这`DISTINCT`将使 Oracle 无法更新子查询，因为子查询的**一行**可能指向基表的**几**行。

如果删除`DISTINCT`，则查询仅在存在唯一索引时才有效`MATERIAL(item_id)`，因此表中的每一行`POLINE`最多只能与 中的一行相关联`MATERIAL`：

```
UPDATE (SELECT a.item_id, a.account_code acct_a, 
               b.item_id, b.account_code acct_b
          FROM bp.poline a, mt.material b
         WHERE a.item_id = b.item_id
           AND a.account_code IS NOT NULL
           AND b.account_code IS NULL)
   SET acct_a = acct_b 
```

* * *

更新一个连接是非常有效的，但是有几个限制，如果你没有这个索引怎么办？

您可以使用不同的子查询编写标准更新：

```
UPDATE poline a
   SET a.account_code = (SELECT b.account_code
                           FROM material b
                          WHERE b.item_id = a.item_id
                            AND b.account_code is not null)
 WHERE a.account_code IS NULL
   AND a.item_id IN (SELECT b.item_id 
                       FROM material b
                      WHERE b.account_code IS NOT NULL) 
```

然而，受[类似问题的回答](https://stackoverflow.com/a/2446859/119634)启发，IMO 最优雅的解决方案是：

```
MERGE INTO (SELECT * FROM a WHERE account_code IS NULL) a
     USING (SELECT * FROM b WHERE account_code IS NOT NULL) b
        ON (a.item_id = b.item_id)
WHEN MATCHED THEN UPDATE SET a.account_code = b.account_code; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:46:35.770

**在下面的SQL**中使用**update**语句和**select**语句是语法......它在我的代码中工作，我正在使用派生表可能是这个 vl 帮助你

 **例如……

**更新**SHIFT_MST SET SHIFT_MST.SHIFT_DESC=A.SHIFT_DESC,SHIFT_MST.SHIFT_CODE=A.SHIFT_CODE**从**

( **SELECT** * FROM TEMP_SHIFT_MST)a

其中 a.SHIFT_ID=SHIFT_MST.SHIFT_ID**

# c# - 获取 AppDomain 中所有可用命名空间的列表

> ID：14976592
> 
> 赞同：5
> 
> 时间：2013-02-20T09:39:57.520
> 
> 标签：c#, dynamic, appdomain, .net-assembly

我需要在运行时“扫描”所有已加载程序集的活动 AppDomain 并获取这些程序集中可用的唯一命名空间列表，.NET 是否支持？

代码必须在运行时执行，因此代码是动态的。

我刚开始用 C# 编码，所以我有点不确定从哪里开始，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T09:43:30.043

从[`AppDomain`](http://msdn.microsoft.com/en-us/library/system.appdomain.aspx)(`AppDomain.CurrentDomain`可能) 开始并调用[`GetAssemblies`](http://msdn.microsoft.com/en-us/library/system.appdomain.getassemblies.aspx). 在每个程序集上迭代它定义的[类型](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettypes.aspx)，跟踪每个程序集所在的[命名空间](http://msdn.microsoft.com/en-us/library/system.type.namespace.aspx)。

作为使用 LINQ 执行此操作有多容易的示例，请考虑以下内容：

```
var namespaces = AppDomain.CurrentDomain
                     .GetAssemblies()
                     .SelectMany(a => a.GetTypes())
                     .Select(t => t.Namespace)
                     .Distinct()
                     // optionally .OrderBy(ns => ns) here to get sorted results
                     .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T09:47:16.967

事实上，几天前我写了一些代码让你这样做。

**使用这个类**：

```
 public class NSScanner
    {
        public static List<Type> GetLoadedTypes(AppDomain appDomain)
        {
            return _getLoadedTypes(appDomain);
        }

        public static List<Type> GetPublicLoadedTypes(AppDomain appDomain)
        {
            return _getLoadedTypes(appDomain, true);
        }

        public static List<string> GetUniqueNamespaces(IEnumerable<Type> types)
        {
            var uniqueNamespaces = new ConcurrentBag<string>();

            Parallel.ForEach(types, type =>
            {
                if (!uniqueNamespaces.Contains(type.Namespace) && !string.IsNullOrEmpty(type.Namespace))
                    uniqueNamespaces.Add(type.Namespace);
            });

            var sortedList = uniqueNamespaces.OrderBy(o => o).ToList();

            return sortedList;
        }

        private static List<Type> _getLoadedTypes(AppDomain appDomain, bool onlyPublicTypes = false)
        {
            var loadedAssemblies = appDomain.GetAssemblies();

            var loadedTypes = new List<Type>();

            Parallel.ForEach(loadedAssemblies, asm =>
            {
                Type[] asmTypes;
                if (onlyPublicTypes)
                    asmTypes = asm.GetExportedTypes();
                else
                    asmTypes = asm.GetTypes();

                loadedTypes.AddRange(asmTypes);
            });

            return loadedTypes;
        }
    } 
```

**用法**：

```
var publicLoadedTypes = NSScanner.GetPublicLoadedTypes(AppDomain.CurrentDomain);
var namespaces = NSScanner.GetUniqueNamespaces(publicLoadedTypes); 
```

享受！

# c# - 将 base/id 路由到 mvc 4 中的控制器/action/id

> ID：14976594
> 
> 赞同：0
> 
> 时间：2013-02-20T09:40:04.497
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

我想在用户根据 ID 在浏览器中输入 URL 时重定向用户。例如，用户输入：

```
http://localhost:50431/10213 
```

他们将被重定向到：

```
http://localhost:50431/home/job/10213 
```

**默认路线：**

```
routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{jobno}",
                defaults: new { controller = "Home", action = "Job", jobno = UrlParameter.Optional }
            ); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:48:35.713

你可以尝试这样的事情：

```
routes.MapRoute(
  name: "Job Number",
  url: "{jobno}",
  defaults: new { controller = "Home", action = "Job" },
  new { jobno = @"[0-9]*" }      
); 
```

并将其放在另一条路线之上。添加的参数是为了避免路由捕获 url 之类`http://localhost:50431/foobar`的，但只捕获包含数字的 URL。

请注意，我目前没有办法对此进行测试，因此您可能需要稍微调整一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T17:47:17.733

我认为这是最好的解决方案：

```
routes.MapRoute(
  name: "Job Number",
  url: "{jobno}",
  defaults: new { controller = "Home", action = "Job", .jobno = UrlParameter.Optional },
  constraints: new { jobno = @"[0-9]*" }      
); 
```

我已经对此进行了测试并且它工作正常，他在评论中的回复对我来说不能正常工作。

# android - jQuery Mobile 打破了 Phonegap deviceready 事件

> ID：14976595
> 
> 赞同：4
> 
> 时间：2013-02-20T09:40:08.793
> 
> 标签：android, jquery, cordova, jquery-mobile, mobile

所以我已经让 jQuery 1.8.2 与 Phonegap 一起使用没有问题，但是只要我添加 jquery.mobile.1.2.0，默认的 Phonegap 示例就会中断。deviceready 事件停止触发。

索引.html

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Hello World</title>
</head>
<body>
    <div class="app">
        <h1>Apache Cordova</h1>
        <div id="deviceready" class="blink">
            <p class="event listening">Connecting to Device</p>
            <p class="event received">Device is Ready</p>
        </div>
    </div>
    <input   type="text" name="firstname" id="firstname" />  
    <a href="#" class="btn" onclick="displayHello();">Say Hello</a>
    <script type="text/javascript" src="cordova-2.4.0.js"></script>
    <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
        function displayHello(){
            var name = document.getElementById("firstname").value;  
            navigator.notification.alert("My name is "+ name);  
        }
    </script>
</body>
</html> 
```

index.js

```
var app = {
// Application Constructor
initialize: function() {
    this.bindEvents();
},
// Bind Event Listeners
//
// Bind any events that are required on startup. Common events are:
// 'load', 'deviceready', 'offline', and 'online'.
bindEvents: function() {
    document.addEventListener('deviceready', this.onDeviceReady, false);
},
// deviceready Event Handler
//
// The scope of 'this' is the event. In order to call the 'receivedEvent'
// function, we must explicity call 'app.receivedEvent(...);'
onDeviceReady: function() {
    app.receivedEvent('deviceready');
},
// Update DOM on a Received Event
receivedEvent: function(id) {
    var parentElement = document.getElementById(id);
    var listeningElement = parentElement.querySelector('.listening');
    var receivedElement = parentElement.querySelector('.received');

    listeningElement.setAttribute('style', 'display:none;');
    receivedElement.setAttribute('style', 'display:block;');

    console.log('Received Event: ' + id);
}
}; 
```

所以这是Phonegap附带的默认代码示例，我只添加了

```
<script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script> 
```

在 index.html 中。

不知道发生了什么，因为似乎其他人已经让 Phonegap 和 jQuery Mobile 一起工作得很好。

我已经尝试将 js 简化并只是调用 deviceready 事件。

而且我已经尝试遵循此解决方案，而在其下方发布的其他解决方案无济于事。

[一起使用 JQuery-Mobile/Phonegap 的正确方法？](https://stackoverflow.com/questions/10945643/correct-way-of-using-jquery-mobile-phonegap-together)

但同样的事情也会发生。使用 jQuery Mobile deviceready 永远不会触发，没有它，它会触发良好。

任何帮助，将不胜感激！也许我只是在这里遗漏了一些简单的东西。

我还尝试了 jQuery 和 jQuery Mobile 的不同版本组合，但没有成功。我正在运行 Android Phonegap 版本和 cordova-2.3.0。我最近尝试升级到cordova-2.4.0，看看是否有帮助，但没有...

更新：LogCat/DDMS 中没有抛出错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T19:07:02.467

I noticed that the browser does not work, but using the emulator or PhoneGap build ondeviciready event and the same example works!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:52:02.757

不久前我遇到了同样的问题，最后我扔掉了 phonegap 的启动器。

我建议这样做：

```
<script type="text/javascript" src="cordova-2.4.0.js"></script>
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
<script type="text/javascript">
    document.addEventListener("deviceready", onDeviceReady, false);
    function onDeviceReady() {
        // your functions here
    }
</script> 
```

我希望它有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:44:57.780

尝试放置`scripts above jquery mobile library.`：

```
<script type="text/javascript" src="cordova-2.4.0.js"></script>
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
    app.initialize();
    function displayHello(){
        var name = document.getElementById("firstname").value;  
        navigator.notification.alert("My name is "+ name);  
    }
</script>
<script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script> 
```

## 更新：

```
<script type="text/javascript">
    $(document).on('pageinit', function($){
        app.initialize();
    });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-12T20:06:19.643

即使将库添加到头部后，我也遇到了完全相同的问题，但是一旦我将 cordova.js 移动到 jquery-mobile 下面，deviceready 就会再次开始触发。

```
<head>
<script type="text/javascript" src="jqueryMobile/jquery-1.11.1.min.js"></script>
<script type="text/javascript" src="jqueryMobile/jquery.mobile-1.4.3.min.js"></script>
<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
    app.initialize();
</script>
</head> 
```

# iphone - 如何彻底测试发布版本？

> ID：14976600
> 
> 赞同：0
> 
> 时间：2013-02-20T09:40:21.350
> 
> 标签：iphone, ios, xcode, debugging

我经常遇到这个问题：

1）我在许多设备上彻底测试了我的应用程序。使用分析和仪器。没有崩溃。一切都好。

2）提交到应用商店。应用程序总是崩溃。

我意识到“发布版本”与“调试版本”有点不同。但是，从技术上讲，如何在我的设备上测试完全按照 App Store 显示方式构建的发布版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:49:17.917

我建议您使用 TestFlight ( [https://testflightapp.com/](https://testflightapp.com/) )，我最近一直在使用它，这是在公开之前测试您的应用程序的好方法。

您将使用最终的 IPA 文件，因此与您提交到 AppStore 的构建没有任何区别......此外，您可以邀请其他人，他们可以通过无线方式下载和安装您的应用程序，甚至更多，您有关于崩溃的远程日志...

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:56:38.783

您当然也可以将**您的构建**（将方案设置为*iOS Device*，然后选择*Product -> Archive*）存档到 IPA，使用您的*Ad-Hoc 分发配置文件***对其**进行签名，然后通过将 IPA 文件拖到您的Xcode Organizer 中的设备。

当您的存档方案设置为在 RELEASE 模式下构建时，这是您无需进入 App Store 即可测试最终应用程序的最接近的方法。

Testflight 也在做同样的事情，因为您必须将相同的 IPA 上传到他们的网站，所以如果您不需要让更多人参与，您可以通过这种方式在本地进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:58:36.537

您可以设置您的测试方案（在项目菜单下）来构建和运行发布构建。或者，如果您想测试与审阅者完全相同的安装方法，您可以使用 iTunes 安装 Ad Hoc 构建。

# python - 如何在 recv 期间关闭 TCP 客户端？

> ID：14976602
> 
> 赞同：1
> 
> 时间：2013-02-20T09:40:29.723
> 
> 标签：python, multithreading, recv

我有以下代码：

```
s.settimeout( 300 )
while notend:
   data = s.recv()       
   datacheck()
   ... 
```

上面的代码在线程上运行，因此如果用户将`notend`变量设置为 False，线程将结束。但在这种情况下，它不会立即退出，它需要 300 秒才能退出，因为该`recv`功能。怎么能退出这个线程？

```
# Wait all the threads
for thread in threading.enumerate():
   if thread is not threading.currentThread():
       thread.join() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:56:42.460

问题是，如果您有一个阻塞套接字，`recv()`它将在整个超时期间阻塞。您可以指定更短的超时时间，但这可能不是您想要做的（如果 ping 真的是数千毫秒怎么办？）。

您可以使用一个对象以更频繁的速率（更小的超时）轮询感兴趣的套接字，而不是简单地尝试`recv()`一整天，并且仅在轮询报告有一些数据要读取时才调用。在轮询之间，如果您发现任何时候现在是错误的，您都可以跳出轮询循环。`select.poll``recv()``notend`

如果您的平台不支持`poll()`，请查看是否支持`select()`。然后，您可以使用该`select.select()`功能完成或多或少相同的任务。

以下是所描述功能的参考：

[http://docs.python.org/2/library/select.html#poll-objects](http://docs.python.org/2/library/select.html#poll-objects) [http://docs.python.org/2/library/select.html#select.select](http://docs.python.org/2/library/select.html#select.select)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:35:03.743

简单的答案 - 从另一个线程关闭 s。然后 recv() 调用将返回错误，因此允许调用它的线程清理并终止。

不需要超时，select() 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:44:14.530

使用[socket.settimeout](http://docs.python.org/2/library/socket#socket.socket.settimeout)因为`recv`它是一种阻塞方法

# wpf - 将 CommandParameter 绑定到 Property 后面的代码

> ID：14976605
> 
> 赞同：0
> 
> 时间：2013-02-20T09:40:42.757
> 
> 标签：wpf, mvvm

我有一个 WPF 视图，我在其中根据视图绑定到 ViewModel 的列表中的对象类型动态创建控件。我在视图中有一个按钮，我已绑定到 ViewModel 中的 RelayCommand，但我还想将 CommandParameter 传递给命令。动态创建控件的类型有 ListBox、ComboBox、TreeView、RadionButton 和 CheckBox。因此，当我按下按钮时，我想获取控件中所有选定/选中的项目，并使用 CommandParamter 传递一个列表。

如果我在按钮上使用 Click 事件，我已经弄清楚如何搜索所有选定/选中的项目并获取类型代码（类名）的对象并将它们放入列表中。我想使用 RelayCommand 而不是使用 Click 事件。

我已设法将 CommandParameter 绑定到调用 GetAllSelectedCheckedCodes() 的属性，但它仅在创建视图时绑定。

是否可以在后面的代码中有一个属性，该属性调用在触发按钮命令时首先绑定的函数 GetAllSelectedCheckedCodes()。

或者，当它们被选中/取消选中或选中/取消选中时，是否可以让多个控件在 ViewModel 的列表中添加/删除项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:16:19.640

您是否可以向您的类添加一个属性，如 IsSelected 或 IsActive，并将其绑定到控件的 IsSelected 或 IsChecked 属性？然后，当您想对选定的项目采取行动时，您可以只获取集合中 IsActive == true 的所有项目。

# azure - 我可以控制将某些内容上传到暂存并在我的代码中交换吗？

> ID：14976606
> 
> 赞同：0
> 
> 时间：2013-02-20T09:40:43.910
> 
> 标签：azure

我在 Azure Cloud 上有一个游戏站点，我想在我的管理面板上上传所有游戏，并且我希望能够在暂存时发布到测试环境，然后将其切换到生产环境。那么在这种情况下，我可以在我的代码中控制上传到登台并将其切换到真实/实时的 azure 管理面板吗？

你有什么主意吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:14:42.527

查看[用于托管服务的 Windows Azure 管理 API](http://msdn.microsoft.com/en-us/library/windowsazure/ee460812.aspx)。您可以将托管服务上传到暂存槽，然后在同一托管服务中与现有生产环境执行 VIP 交换。

就像一个想法：如果您想在单个托管服务中托管多个游戏，您可能需要考虑将最新版本上传到 blob 存储中，并按需将它们加载到您的托管服务中。

# perl - Perl, Selenium::Remote::Driver - 使用 Xpath 选择 HTML 表单中的第二个元素，其中两个元素具有相同的“值”条目

> ID：14976607
> 
> 赞同：0
> 
> 时间：2013-02-20T09:40:46.427
> 
> 标签：perl, selenium, selenium-rc

我试图弄清楚如何在 Seleniumn::Remote::Driver 的 Perl 模块中正确使用 XPATH。具体来说，我有一个 HTML 表单，其中包含各种输入字段，其中 2 个输入字段具有相同的值。我想根据它的“值”选择第二个输入字段（这个值在两个输入字段中是相同的）。我已经在 Selenium IDE(1.10.0) 中尝试过这个，它将目标显示为：

```
 xpath=(//input[@value='clickhere'])[2] 
```

我试图在使用 Selenium::Remote::Driver 模块的 Perl 脚本中模拟这种行为。

```
$elem = $driver->find_element("xpath=(//input[\@value='clickhere'][2])");
$driver->mouse_move_to_location(element => $elem, xoffset => 0, yoffset => 0);  
$driver->click; 
```

这不起作用并引发错误（见下文）。我认为错误与“[2]”部分有关，因为我通常能够在 HTML 表单中选择具有唯一“值”的元素。将 xpath 编码到 find_element 函数中的正确方法是什么，以便它选择并单击 HTML 表单中的第二个元素，其中第一个和第二个元素的值都为“cickhere”？

```
Error while executing command: Argument was an invalid selector (e.g. XPath/CSS).: The given selector xpath=(//input[@value='click'][2]) is either invalid or does not result in a WebElement. The following error occurred:
InvalidSelectorError: Unable to locate an element with the xpath expression xpath=(//input[@value='clickhere'][2]) because of the following error:
[Exception... "The expression cannot be converted to return the specified type."  code: "0" nsresult: "0x805b0034 (TypeError)"  location: "file:///C:/Temp/anonymous6984397347674679222webdriver-profile/extensions/fxdriver@googlecode.com/components/driver_component.js Line: 5696"]
Command duration or timeout: 16 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/invalid_selector_exception.html
Build info: version: '2.30.0', revision: 'dc1ef9c', time: '2013-02-19 00:15:27'
System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version: '1.7.0_11'
Session ID: ce542470-8a3a-41da-a73a-2a55275290d3
Driver info: org.openqa.selenium.firefox.FirefoxDriver
Capabilities [{platform=XP, databaseEnabled=true, cssSelectorsEnabled=true, javascriptEnabled=true, acceptSslCerts=true, handlesAlerts=true, browserName=firefox, browserConnectionEnabled=true, nativeEvents=true, webStorageEnabled=true, rotatable=false, locationContextEnabled=true, applicationCacheEnabled=true, takesScreenshot=true, version=19.0}] at C:\Perl\scripts\frontend\createAccount.pl line 144. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T09:46:56.650

[文档](http://search.cpan.org/perldoc?Selenium%3a%3aRemote%3a%3aDriver#find_element)显示了采用 XPath 的方法。

定位器方案可以作为单独的 arg 传递，但这里不需要，因为默认值为`xpath`.

尝试

```
my $elem = $driver->find_element('//input[@value="clickhere"][2]'); 
```

# java - 多播接收错误消息

> ID：14976610
> 
> 赞同：0
> 
> 时间：2013-02-20T09:40:50.857
> 
> 标签：java, multicast

我正在研究 MulticastSocket。在 AIX 7 上使用 Websphere 8.0.0.5 进行测试。问题是从发件人那里收到错误消息。测试场景为：1.运行sendMulticast（新线程） 2.运行receiveMulticast（新线程） 3.运行receiveMulticast（新线程）

第一个接收者线程总是接收到正确的消息。辅助接收线程接收到错误消息。

但有趣的是，我在使用 Java 6 作为控制台应用程序的同一台机器（AIX 7）上进行了尝试，一切正常。

这是代码：

```
 static final int port = 9999;
    static final String multicastAddress = "224.2.2.3";

    public static void sendMulticast()  {
        MulticastSocket socket = null;
        DatagramPacket outPacket = null;
        byte[] outBuf;

        long t= System.currentTimeMillis();

        //run 60 seconds
        long end = t+60000;

        try {
            socket = new MulticastSocket();
            String msg;

            while(System.currentTimeMillis() < end) {
                msg = "//172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA";
                outBuf = msg.getBytes();

                InetAddress address = InetAddress.getByName(multicastAddress);
                outPacket = new DatagramPacket(outBuf, outBuf.length, address, port);

                socket.setTimeToLive(32);
                socket.send(outPacket);

                System.out.println("Server sends : " + msg);
                try {
                    Thread.sleep(500);
                } catch (InterruptedException ie) {
                }
            }
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }
        socket.close();
    }

    public static void receiveMulticast() {
        MulticastSocket socket = null;
        DatagramPacket packet = null;
        byte[] inBuf = new byte[1500];

        long t= System.currentTimeMillis();

        //run 60 seconds
        long end = t+60000;

        try {
            // Prepare to join multicast group
            socket = new MulticastSocket(port);
            InetAddress address = InetAddress.getByName(multicastAddress);
            socket.joinGroup(address);

            while(System.currentTimeMillis() < end) {
                packet = new DatagramPacket(inBuf, inBuf.length);
                socket.receive(packet);
                byte[] payload = packet.getData();
                String msg = new String(payload);
                System.out.println("From " + packet.getAddress() + " Msg : " + msg);
            }
        } catch (IOException ioe) {
            ioe.printStackTrace();
        }

        socket.close();
    } 
```

这是日志：您可以在 10:39:47:675 和 10:39:48:177 看到丢失的字符串正在发送到接收器。

可能是什么问题呢？

```
[2/20/13 10:39:45:162 EET] 0000003a SystemOut     O Server sends : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:45:163 EET] 0000003b SystemOut     O From /172.21.131.242 Msg : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:45:665 EET] 0000003b SystemOut     O From /172.21.131.242 Msg : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:45:665 EET] 0000003a SystemOut     O Server sends : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:46:167 EET] 0000003a SystemOut     O Server sends : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:46:168 EET] 0000003b SystemOut     O From /172.21.131.242 Msg : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:46:672 EET] 0000003a SystemOut     O Server sends : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:46:673 EET] 0000003b SystemOut     O From /172.21.131.242 Msg : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:47:173 EET] 0000003a SystemOut     O Server sends : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:47:174 EET] 0000003b SystemOut     O From /172.21.131.242 Msg : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:47:674 EET] 0000003a SystemOut     O Server sends : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:47:675 EET] 0000003b SystemOut     O From /46.50.52.50 Msg : CE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA131.242:51860/REFERENCE_DATA
[2/20/13 10:39:47:676 EET] 0000003c SystemOut     O From /172.21.131.242 Msg : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:48:176 EET] 0000003a SystemOut     O Server sends : //172.21.131.242:51860/SERVICE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA
[2/20/13 10:39:48:177 EET] 0000003b SystemOut     O From /46.50.52.50 Msg : CE_EXECUTION_CACHE|//172.21.131.242:51860/ERROR_CODES_CACHE|//172.21.131.242:51860/ACCOUNTING_CACHE|//172.21.131.242:51860/CONFIGURATION_ITEMS_CACHE|//172.21.131.242:51860/REFERENCE_DATA131.242:51860/REFERENCE_DATA 
```

# c# - 当屏幕分辨率更改 WinForm 内的面板及其子控件显示时

> ID：14976612
> 
> 赞同：2
> 
> 时间：2013-02-20T09:40:53.793
> 
> 标签：c#, winforms

我正在尝试开发具有三个面板的 Windows 窗体应用程序

**面板 1(FileBrowsePanel):-**约束 TextBox , Browse Button

**Panel 2(SearchCriteriaPanel) :-** Lable From Date , ToDate DateTimePicker control From Date and To Date CheckBox for each DateTimePicker control 还有两个 TextBoxes 和 ListBox 两个按钮 Search and Reset

**面板 3（DisplayDataPanel）：-** ListView 显示来自浏览文件路径的数据

**面板 4（DeleteCriteriaPanel）：-**使用 DateTimePicker 控件从列表视图和文件中删除数据，并使用删除按钮

实际问题是，当我更改屏幕的分辨率时，该面板上的所有面板和控件都超出了表单宽度和高度代码是

```
void LoadWindowsSetting()
        {
            this.SuspendLayout();
            int i_StandardHeight = 768;//Developer Desktop Height Where the Form is Designed
            int i_StandardWidth = 1024; ;//Developer Desktop Width Where the Form is Designed
            int i_PresentHeight = Screen.PrimaryScreen.WorkingArea.Height- SystemInformation.CaptionHeight;
            int i_PresentWidth = Screen.PrimaryScreen.Bounds.Width;
            float f_HeightRatio = new float();
            float f_WidthRatio = new float();
            f_HeightRatio = (float)((float)i_PresentHeight / (float)i_StandardHeight);
            f_WidthRatio = (float)((float)i_PresentWidth / (float)i_StandardWidth);
            foreach (Control c in this.Controls)
            {
                if (c.GetType().ToString() == "System.Windows.Forms.Panel")
                {
                    // c.SetBounds(Convert.ToInt32(c.Bounds.X * f_WidthRatio), Convert.ToInt32(c.Bounds.Y * f_WidthRatio), Convert.ToInt32(c.Bounds.Width * f_WidthRatio), Convert.ToInt32(c.Bounds.Height * f_HeightRatio));
                }
                if (c.HasChildren)
                {
                    foreach (Control cChildren in c.Controls)
                    {
                        cChildren.SetBounds(Convert.ToInt32(cChildren.Bounds.X * f_WidthRatio), Convert.ToInt32(cChildren.Bounds.Y * f_WidthRatio), Convert.ToInt32(cChildren.Bounds.Width * f_WidthRatio), Convert.ToInt32(cChildren.Bounds.Height * f_HeightRatio));
                    }
                    c.SetBounds(Convert.ToInt32(c.Bounds.X * f_WidthRatio), Convert.ToInt32(c.Bounds.Y * f_WidthRatio), Convert.ToInt32(c.Bounds.Width * f_WidthRatio), Convert.ToInt32(c.Bounds.Height * f_HeightRatio));
                }
                else
                {
                    c.SetBounds(Convert.ToInt32(c.Bounds.X * f_WidthRatio), Convert.ToInt32(c.Bounds.Y * f_WidthRatio), Convert.ToInt32(c.Bounds.Width * f_WidthRatio), Convert.ToInt32(c.Bounds.Height * f_HeightRatio));
                }
            }
            btnBrowse.Height = txtBrowseFilePath.Height + 1;
            btnSubmit.Height = btnBrowse.Height;
            btnReset.Height = btnBrowse.Height;
            panelSearch.Height += listBoxLogType.Height;

            int leftSpacePanelBrowse = (this.Width - panelBrowse.Width) / 2;
            int leftSpacePanelSearch = (this.Width - panelSearch.Width) / 2;
            int leftSpacePanelLogList = (this.Width - panelLogList.Width) / 2;
            int leftSpacePanelDeleteLog = (this.Width - panelDeleteLog.Width) / 2;

            panelBrowse.Location = new System.Drawing.Point(leftSpacePanelBrowse - 8, 25);
            panelSearch.Location = new System.Drawing.Point(leftSpacePanelSearch - 8, panelBrowse.Height + 40);
            panelLogList.Location = new System.Drawing.Point(leftSpacePanelLogList - 8, panelSearch.Height + 140);
            progressBarFileLoad.Location = new System.Drawing.Point((this.Width / 2) - 100, panelLogList.Bounds.Y + panelLogList.Height + 5);
            panelDeleteLog.Location = new System.Drawing.Point(leftSpacePanelDeleteLog - 8, panelLogList.Bounds.Y + panelLogList.Height + progressBarFileLoad.Height + 20);

            this.ResumeLayout(false);
            Invalidate();
            Focus();
        } 
```

所以我可以在屏幕分辨率改变时阻止控制

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:07:23.167

表单加载事件`ResizeForm()`以这样的方式调用函数

```
Resolution objFormResizer = new Resolution();
            objFormResizer.ResizeForm(this, 768, 1024); 

 public class Resolution
        {
            float heightRatio = new float();
            float widthRatio = new float();
            int standardHeight, standardWidth;
            public void ResizeForm(Form objForm, int DesignerHeight, int DesignerWidth)
            {           
                standardHeight = DesignerHeight;           
                standardWidth = DesignerWidth;
                int presentHeight = Screen.PrimaryScreen.WorkingArea.Height;//.Bounds.Height;
                int presentWidth = Screen.PrimaryScreen.Bounds.Width;
                heightRatio = (float)((float)presentHeight / (float)standardHeight);
                widthRatio = (float)((float)presentWidth / (float)standardWidth);
                objForm.AutoScaleMode = AutoScaleMode.None;
                objForm.Scale(new SizeF(widthRatio, heightRatio));
                foreach (Control c in objForm.Controls)
                {
                    if (c.HasChildren)
                    {
                        ResizeControlStore(c);                    
                    }
                    else
                    {
                        c.Font = new Font(c.Font.FontFamily, c.Font.Size * heightRatio, c.Font.Style, c.Font.Unit, ((byte)(0)));
                    }
                }
                objForm.Font = new Font(objForm.Font.FontFamily, objForm.Font.Size * heightRatio, objForm.Font.Style, objForm.Font.Unit, ((byte)(0)));           
            }

            private void ResizeControlStore(Control objCtl)
            {
                if (objCtl.HasChildren)
                {
                    foreach (Control cChildren in objCtl.Controls)
                    {
                        if (cChildren.HasChildren)
                        {
                            ResizeControlStore(cChildren);

                        }
                        else
                        {
                            cChildren.Font = new Font(cChildren.Font.FontFamily, cChildren.Font.Size * heightRatio, cChildren.Font.Style, cChildren.Font.Unit, ((byte)(0)));
                        }
                    }
                    objCtl.Font = new Font(objCtl.Font.FontFamily, objCtl.Font.Size * heightRatio, objCtl.Font.Style, objCtl.Font.Unit, ((byte)(0)));
                }
                else
                {
                    objCtl.Font = new Font(objCtl.Font.FontFamily, objCtl.Font.Size * heightRatio, objCtl.Font.Style, objCtl.Font.Unit, ((byte)(0)));
                }
            }
        } 
```

这门课解决了我的问题......希望你也喜欢快乐编码

# android - 从android中的后台服务打开/运行相机

> ID：14976614
> 
> 赞同：14
> 
> 时间：2013-02-20T09:40:59.190
> 
> 标签：android

想建立一个在后台持续录制的应用程序，有可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-21T08:17:05.447

是的，很有可能。

创建一个活动，它将在某些事件上启动您的后台服务，或者您也可以使用警报管理器根据您的要求启动和停止服务。

检查一些粗略的代码，这些代码将使用相机开始和停止录制，您可以从后台服务调用它，并且可以顺利运行。

```
 public boolean starMediaRecording(){
            Camera.Parameters params = mServiceCamera.getParameters();
            mServiceCamera.setParameters(params);
            Camera.Parameters p = mServiceCamera.getParameters();

            final List<Size> listSize = p.getSupportedPreviewSizes();
            Size mPreviewSize = listSize.get(2);
            p.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
            p.setPreviewFormat(PixelFormat.YCbCr_420_SP);
            mServiceCamera.setParameters(p);

            try {
                mServiceCamera.setPreviewDisplay(mSurfaceHolder);
                mServiceCamera.startPreview();
            }
            catch (IOException e) {
                Log.e(TAG, e.getMessage());
                e.printStackTrace();
            }

            mServiceCamera.unlock();

            mMediaRecorder = new MediaRecorder();
            mMediaRecorder.setCamera(mServiceCamera);
            mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
            mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
            mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
            mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
            mMediaRecorder.setOutputFile("/sdcard/filenamevideo.mp4");
            mMediaRecorder.setVideoFrameRate(30);
            mMediaRecorder.setVideoSize(mPreviewSize.width, mPreviewSize.height);
            mMediaRecorder.setPreviewDisplay(mSurfaceHolder.getSurface());

            mMediaRecorder.prepare();
            mMediaRecorder.start(); 

            mRecordingStatus = true;

            return true;

    }

    public void stopMediaRecorder() {
        mServiceCamera.reconnect();

        mMediaRecorder.stop();
        mMediaRecorder.reset();

        mServiceCamera.stopPreview();
        mMediaRecorder.release();

        mServiceCamera.release();
        mServiceCamera = null;
    }
} 
```

这是示例代码，您需要添加自己的逻辑并相应地处理异常。

# c# - WPF与winform集成，捕捉事件

> ID：14976616
> 
> 赞同：1
> 
> 时间：2013-02-20T09:41:02.870
> 
> 标签：c#, wpf, winforms, windowsformshost

简短的问题：
如何在具有包含多个控件（例如按钮）的 win 表单面板的 WPF 应用程序中捕获事件并捕获每个按钮事件？

是否可以在 win 表单面板中添加 WPF 按钮并捕获它们的事件？

我有一个 WPF 应用程序（电影播放器​​）。
它从 3rd 方 API（视频）接收 winform 控件。
为了玩这个控件，我需要使用 WindowsFormsHost。
如果我想在控件上捕获事件，我必须在将控件添加到 WindowsFormsHost 之前注册事件。但是，如果我有许多控件的面板，则不会捕获所有事件..

我想要实现的是我可以在 win 表单控件上加载 WPF 停止/启动按钮。
谢谢![在此处输入图像描述](../Images/bb42618acb10ddf933dc7442f03b3463.png)

# db2 - IBM DB2 ODBC 驱动程序问题 [错误 69899] 数据库主机服务器代码中发生错误。SQLSTATE= S1000

> ID：14976625
> 
> 赞同：1
> 
> 时间：2013-02-20T09:41:22.690
> 
> 标签：db2, ibm-midrange, db2-400

在将我们的 IBM System i（又名 i5/OS 或 AS/400）从 V5R4 升级到 V7R1 后，我们使用 ODBC 连接到 DB2 的应用程序之一失败并出现以下错误：

```
Error Code: 69899
SQLSTATE: S1000
[IBM] [System i Access ODBC Driver] [DB2 for i5/OS] PWS0005 
Error occurred in the database host server code. 
```

症状是：

在 While / Wend 循环中，声明了一个 CURSOR，然后打开，执行 fetch(s) 并关闭。

如果在任何迭代中游标未检索到任何行，则在接下来的迭代中，当您尝试打开游标时（使用不同的 SQL 查询）声明游标后会发生错误。

首先，我们将 ODBC 驱动程序更新为可用的最新版本，但问题仍然存在。

因为我们需要一个紧急的解决方案，所以我通过预先选择来确定游标是否会返回行来解决问题，否则跳过该迭代，这暂时解决了问题，但似乎不是一个非常优雅的解决方案。

知道如何获取有关主机上发生的错误的更多信息吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T14:53:25.580

一般来说，如果服务器端代码出现错误，您应该致电 IBM 支持并报告。他们会询问您是否使用最新的 cume，并且可能是最新的数据库组 PTF。

服务器在名为 QZDASOINIT 的作业中运行 ODBC 连接。由于系统可能有很多连接，因此可能有很多 QZDASOINIT 作业。要找到您的，请转到终端会话，然后`WRKOBJLCK MYPROFILE *USRPRF`. 您将看到使用您的用户配置文件运行的作业列表。至少其中之一将是您正在寻找的 QZDASOINIT 工作。使用选项 5 查看作业，然后使用选项 10 查看作业日志。按 F10 查看详细消息，按 F18 转到底部（最新）条目。

如果错误严重到服务器作业异常终止，您的用户配置文件将不会被锁定。相反，使用 . 转到假脱机作业日志`WRKSPLF`。

自 V5R4 以来，IBM 一直在记录一些 SQL 内部错误。 `select * from qrecovery.qsq901s;`查看任何 SQLCODE -901 错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T16:23:46.030

确保您已安装最新版本的 System I Access 的最新修订包

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T20:10:05.853

我之前遇到过这个错误，它是由连接字符串中的语法错误引起的。这是一个在旧版本的操作系统中微不足道的设置，在新版本中更重要，但不会导致连接本身失败，因此很难追踪。

例如：Port Number:8471 有拼写错误，Porte Number:8471 很难发现，但一旦找到，它就为我解决了问题。基本上，通过这部分连接的所有内容都被忽略了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-11T13:57:42.190

想为这个问题添加另一个解决方案。系统上存在的 SQL 包在升级之后/和升级期间会损坏。您必须在升级后删除这些包。这将摆脱旧的包，并允许系统在新的操作系统版本级别重新创建包。删除 SQL 包时，某些连接/作业可能会锁定这些包，因此您可能必须关闭主机服务。使用 DLTSQLPKG 命令执行删除。在 v7r2 及更高版本中，由于 IBM 在软件包方面进行了一些更改，因此需要执行一些额外的步骤，您可以在此处找到信息[http://www-01.ibm.com/support/docview.wss?uid=nas8N1015556](http://www-01.ibm.com/support/docview.wss?uid=nas8N1015556)

或者告诉您的 ODBC/JDBC/.Net 数据适配器/提供者不要使用包。这可能不太理想，因为包有性能优势。

# html - 通过网站将数据输入并存储到neo4j数据库中

> ID：14976627
> 
> 赞同：-3
> 
> 时间：2013-02-20T09:41:31.980
> 
> 标签：html, neo4j

我是 neo4j 的新手，我想创建一个网站，用户可以在其中输入数据并将数据存储到 neo4j 数据库中。

请你能告诉我如何进行。提前致谢。

调频

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:03:55.197

在此处查看示例：http: [//maxdemarzi.com](http://maxdemarzi.com)

或在这里：[http ://gensen.herokuapp.com/?tags=type%2Fneo4j-challenge&q=#results](http://gensen.herokuapp.com/?tags=type%2Fneo4j-challenge&q=#results)

# events - wso2 cep 序列检测丢失事件

> ID：14976628
> 
> 赞同：0
> 
> 时间：2013-02-20T09:41:45.897
> 
> 标签：events, wso2, complex-event-processing

我想在 cep/siddhi 中定义一个查询，以检测序列中的缺失事件。

我有 4 个事件必须在 5 分钟内发生。(p1->p2->p3->p4 3000以内)

当 p1 发生后的 5 分钟时间窗口内缺少 p2、P3 或 P4 之一时，如何编写插入警报事件的条件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:32:11.310

目前没有直接的方法来检测不发生的情况。但是，这可以通过编写自定义窗口然后编写使用自定义窗口的查询来完成。

有关如何为 WSO2 CEP 编写自定义窗口的更多信息，请参阅以下链接：

[http://docs.wso2.org/wiki/display/CEP210/Writing+Extentions+to+Siddhi](http://docs.wso2.org/wiki/display/CEP210/Writing+Extentions+to+Siddhi)

# c# - 对数据库条目进行排名

> ID：14976631
> 
> 赞同：0
> 
> 时间：2013-02-20T09:41:52.473
> 
> 标签：c#, algorithm, sorting

我有一个数据库，其中包含：

```
user_id | category_id | liked_id | disliked_id 
```

（感谢堆栈溢出用户首先帮助我正确设置了我的数据库！！）上次我以食物为例，但这次我将使用人。

给用户两张图片（男性对男性或女性对女性），他/她只需选择他/她认为更有吸引力的一张。用户只要他/她愿意就重复这个过程。每个选择都输入到数据库中，显示他们喜欢和不喜欢的人（如果您认为两者相似，也可以使用按钮）。

既然我的表里满是条目，我正在尝试开发一种算法，它将所有这些“投票”转化为用户认为最有吸引力的人的排名列表（基于数百甚至数千排名条目）。

我已经在绘图板上工作了几个小时，似乎想不出一种有效的方法来做到这一点。

任何帮助，将不胜感激。

PS：这个想法也是让它成为一个多用户的东西，其他用户可以看到你的“喜欢”表，并且还有全局平均表，显示所有用户对事物的总体排名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:06:16.953

*因此，您在 c# 组中发布了您的问题。但是，我想为您提供一个在数据库中实现的解决方案，使其更加独立于您的程序。*

您可能首先要做的是获取图像被喜欢和不喜欢的次数。该 SQL 语句应该为您执行此操作（如果您使用支持分组集的数据库，它可能更容易编写）：

```
SELECT t1.liked_id as id, t1.c_liked, t2.c_disliked
FROM 
    (SELECT liked_id, COUNT(*) as c_liked FROM table GROUP BY liked_id) t1
LEFT JOIN
    (SELECT disliked_id, COUNT(*) c_disliked FROM table GROUP BY disliked_id) t2
ON
    t1.liked_id = t2.disliked_id 
```

然后由您决定如何处理这些数字。在最外层的 SELECT 语句中，您可以放置​​一个非常复杂的函数，例如，您可以选择对不喜欢的权重小于对喜欢的权重。为了让您了解一个可能的非常简单的功能：

```
SELECT t1.liked_id as id, 
(t1.c_liked/(t1.c_liked + t2.c_disliked) -  t2.c_disliked/(t1.c_liked + t2.c_disliked)) as score 
```

这将为您返回值 [-1, 1] （如果您愿意，您可以将其标准化为 [0, 1]，但不必这样做），然后您可以按照以下示例对其进行排序：

```
SELECT t1.liked_id as id, 
    (t1.c_liked/(t1.c_liked + t2.c_disliked) -  t2.c_disliked/(t1.c_liked + t2.c_disliked)) as score    
FROM 
    (SELECT liked_id, COUNT(*) as c_liked FROM table GROUP BY liked_id) t1
LEFT JOIN
    (SELECT disliked_id, COUNT(*) c_disliked FROM table GROUP BY disliked_id) t2
ON
    t1.liked_id = t2.disliked_id
ORDER BY score 
```

# django - 模板中的图像不显示

> ID：14976632
> 
> 赞同：0
> 
> 时间：2013-02-20T09:41:54.530
> 
> 标签：django

我无法在我的模板中显示图像。这是我的代码：

设置.py

```
MEDIA_ROOT = os.path.join(DIRNAME, 'media')

MEDIA_URL = ''

STATIC_ROOT = os.path.join(DIRNAME, 'static')

STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    os.path.join(DIRNAME, 'my_static'),
) 
```

在我的模型中：

```
photo = models.ImageField(upload_to='media/images') 
```

在网站源中（Firefox 中的 ctrl+U）：

```
<img class="preview_image" src="static/images/test_1.png" ale="photo" /> 
```

如何正确显示图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:28:02.140

像这样改变你`MEDIA_URL`：

```
MEDIA_URL = '/media/' 
```

然后像这样更改`upload_to`参数：

```
photo = models.ImageField(upload_to='images') 
```

将此添加到您的`urls.py`：

```
from django.conf import settings
urlpatterns += patterns('',
    url(r'^media/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),
) 
```

然后在您的模板中访问上传的图像，如下所示：

```
<img src="{{ picture.photo.url }}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:55:54.237

首先更改 MEDIA_URL -

```
MEDIA_URL = '/media/' 
```

然后更改模型上的 upload_to 参数

```
photo = models.ImageField(upload_to='images') 
```

将图像文件夹添加到您的 MEDIA_ROOT 目录（我不知道那在哪里，因为我不知道您的`DIRNAME`变量是什么）

```
/path/to/your/media_root/images 
```

现在您可以使用以下方法在模板中显示照片 -

```
{% your_object.photo.url %} 
```

不要在模板中硬编码网址 -

```
<img class="preview_image" src="static/images/test_1.png" ale="photo" /> 
```

应该 -

```
<img class="preview_image" src="{% your_object.photo.url %}" ale="photo" /> 
```

查看有关[ImageField](https://docs.djangoproject.com/en/1.4/ref/models/fields/#django.db.models.ImageField)和[服务静态文件](https://docs.djangoproject.com/en/1.4/howto/static-files/)的文档。

当您保存模型（带有照片）时，照片会上传到`<MEDIA_ROOT>/<upload_to>`. 然后通过 http 从`http://localhost:8000/<MEDIA_URL>/<upload_to>`. 但是，由于您将照片保存在模型中，因此数据库会保留对文件位置的引用，从而允许您使用`<img src="{% object.photo.url %}">`.

# php - Facebook 粉丝专页访问令牌检索

> ID：14976634
> 
> 赞同：0
> 
> 时间：2013-02-20T09:42:14.460
> 
> 标签：php

我想通过以下 php 代码检索粉丝页面访问令牌，但没有成功。任何想法？

```
 $account_url="https://graph.facebook.com/".$page_id."/accounts?"
    . "&method=GET"
    . "&access_token=xxxx";

    $accounts = json_decode( file_get_contents($account_url) );

    $data = $accounts['data'];
    foreach($data as $account) {
        if( $account['id'] == $fanpage_id )
            $fanpage_token = $account['access_token'];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:45:37.473

这是使用图形 API 的代码：

事件.php：

```
<?php

$facebook_appid         = "your appid";                                 // Facebook appplication id
$facebook_secret        = "your secret";                // Facebook secret id
$facebook_pageid        = "your pageid";                                // Facebook secret id
$redirect_uri           = "https://localhost/facebook_page/events.php";   // return url to our application after facebook login ## should be SAME as in facebook application
//$redirect_uri         = "https://localhost/facebook_page/fb_login.php";   // return url to our application after facebook login ## should be SAME as in facebook application
$scope                  = "user_photos,email,user_birthday,user_online_presence,offline_access,manage_pages,publish_stream,user_events,friends_events"; // User permission for facebook

$code                   = $_REQUEST["code"]?$_REQUEST["code"]:"";

if(empty($code)) {
    $_SESSION['state']  = rand(); // CSRF protection
    $dialog_url         = "https://www.facebook.com/dialog/oauth?client_id=". $facebook_appid . "&redirect_uri=" . urlencode($redirect_uri) . "&state=". $_SESSION['state'] . "&scope=".$scope;
    header("location:".$dialog_url);
}

if($_SESSION['state'] && ($_SESSION['state'] == $_REQUEST['state'])) {
    $token_url          = "https://graph.facebook.com/oauth/access_token?". "client_id=" . $facebook_appid . "&redirect_uri=" . urlencode($redirect_uri). "&client_secret=" . $facebook_secret . "&code=" . $code;
    $response           = @file_get_contents($token_url);

    $params             = null;
    parse_str($response, $params);

    $account_url        = "https://graph.facebook.com/".$facebook_pageid."?fields=access_token&access_token=".$params['access_token'];
    $resp               = @file_get_contents($account_url);

    $dt                 =   json_decode($resp);

    echo "Page accesstoken :".$dt->access_token;
    echo "<br>";
    echo "Page id : ".$dt->id;  

}

?> 
```

请注意：`$redirect_uri = https://localhost/facebook_page/events.php`应与 facebook 应用程序页面设置中的网站 url 相同。

# javascript - 如何在 javascript 的 document.write() 方法中添加一个类

> ID：14976637
> 
> 赞同：0
> 
> 时间：2013-02-20T09:42:20.967
> 
> 标签：javascript

我在 document.write 中添加一个类，但它没有显示，下面是我的代码。

```
new_window = open("","hoverwindow","width=600,height=300,left=10,top=10");
new_window.document.open();
new_window.document.write("<li>Dowload <a href=www.anylink.com class='help'></a></li>"); 
```

“帮助”在我的 css 文件中定义。上述语法对于应用类是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:43:50.747

就像@FrédéricHamidi 说的：

```
new_window = open("","hoverwindow","width=600,height=300,left=10,top=10");
new_window.document.open();    
new_window.document.write("<li>Dowload <a href='www.anylink.com' class='help'></a></li>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:44:13.970

你的锚是空的：

```
<li>Dowload <a href=www.anylink.com class='help'></a></li>
                                                 ^-------- 
```

改成：

```
<li><a href="www.anylink.com" class='help'>Dowload</a></li>
                                           ^^^^^^^------- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:44:21.080

不要使用 document.write - 它可能会给您带来问题： [为什么 document.write 被认为是“不好的做法”？](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice)

还有其他使用 Javacsript 将 HTML 注入页面的方法 - .innerHTML 就是一个很好的例子。像 jQuery 这样的 JavaScript 库也有很多选择。

# jquery - rails 3 + jquery + markdown editor = 没有方法

> ID：14976643
> 
> 赞同：2
> 
> 时间：2013-02-20T09:42:34.250
> 
> 标签：jquery, ruby-on-rails-3, markdown, wysiwym

我对 Rails 有点陌生，对 jquery 也很陌生。我正在尝试让 Markdown 编辑器的工作方式与我现在正在编写的类似。rails 应用程序还使用 twitter-bootstrap 和 social-share。

我目前正在测试[jquery-wysiwym](http://pushingkarma.com/projects/jquery-wysiwym/)但收到以下错误：

```
Uncaught TypeError: Object [object Object] has no method 'wysiwym' 
```

我的页面有以下内容：

```
...
<link href="/assets/statuses.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/types.css?body=1" media="all" rel="stylesheet" type="text/css" />
<link href="/assets/wysiwym/wysiwym.css?body=1" media="all" rel="stylesheet"type="text/css" /> 
```

这在页面的底部：

```
...
<script src="/assets/social-share-button.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery-ui.js?body=1" type="text/javascript"></script>
<script src="/assets/wysiwym/wysiwym.js?body=1" type="text/javascript"></script>
...
<script src="/assets/application.js?body=1" type="text/javascript"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      $('.markdown').wysiwym(Wysiwym.Markdown);
    });
</script>

</body> 
```

任何帮助表示赞赏，因为我有点卡住了。

# javascript - 为什么javascript会以不同的方式解释这些相同的日期

> ID：14976646
> 
> 赞同：6
> 
> 时间：2013-02-20T09:42:44.460
> 
> 标签：javascript, date

这里发生了什么：

```
> new Date('Apr 15 2013');
Mon Apr 15 2013 00:00:00 GMT+0100 (GMT Daylight Time)
> new Date('04/15/2013');
Mon Apr 15 2013 00:00:00 GMT+0100 (GMT Daylight Time)
> new Date('2013-04-15');
Mon Apr 15 2013 01:00:00 GMT+0100 (GMT Daylight Time) 
```

显然，一个被解释为 UTC 时间，而另外两个被解释为本地时间。是什么导致了解析的差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:55:48.947

从[规范](http://es5.github.com/#x15.9.4.2)：

> String 可能被解释为**本地时间、UTC 时间或某个其他时区的时间，具体取决于 String 的内容**。该函数首先尝试根据日期时间字符串格式（[15.9.1.15](http://es5.github.com/#x15.9.1.15)）中调用的规则解析字符串的格式。如果字符串不符合该格式，则函数可能会退回到任何特定于实现的启发式或特定于实现的日期格式。

在您提供的所有格式中，只有`'2013-04-15'`官方支持，因此其他格式似乎回退到依赖于实现的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T09:55:48.773

构造`Date`函数委托给[`Date.parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)，它似乎`Date.parse`有两个变体：

> 给定一个表示时间的字符串，parse 返回时间值。它接受**RFC2822 / IETF 日期语法（RFC2822 第 3.3 节）**，例如“Mon, 25 Dec 1995 13:30:00 GMT”。它理解美国大陆时区的缩写，但对于一般用途，使用时区偏移量，例如“Mon, 25 Dec 1995 13:30:00 GMT+0430”（格林威治以东 4 小时 30 分钟）子午线）。**如果不指定时区，则假定为本地时区**。GMT 和 UTC 被认为是等效的。
> 
> 或者，日期/时间字符串可以是 **ISO 8601 格式**。从 JavaScript 1.8.5 (Firefox 4) 开始，支持 ISO 8601 的一个子集。例如，“2011-10-10”（只是日期）或“2011-10-10T14:48:00”（日期和时间）可以传递和解析。

显然，这些在本地时区方面表现不同

* * *

**编辑：**看起来这是[实现定义的](https://stackoverflow.com/questions/14976646/why-does-javascript-interpret-these-identical-dates-differently/14976903#comment21030278_14976903)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T09:56:01.710

您的第三个示例是规范中唯一实际解释的示例。当您`Date`使用单个参数调用构造函数时，[会发生这种情况](http://es5.github.com/#x15.9.3.2)（`v`传递给构造函数的字符串在哪里）：

> 以与方法 (15.9.4.2)完全相同的方式解析`v`为日期；`parse`设为`V`该日期的时间值。

该[`parse`方法](http://es5.github.com/#x15.9.4.2)将尝试解析字符串（添加了重点）：

> **根据 String 的内容，String 可能被解释为本地时间、UTC 时间或其他时区的时间**。该函数首先尝试根据日期时间字符串格式（15.9.1.15）中调用的规则解析字符串的格式。
> 
> **如果字符串不符合该格式，则函数可能会退回到任何特定于实现的启发式或特定于实现的日期格式**。

并且“[日期时间字符串格式](http://es5.github.com/#x15.9.1.15)”是`YYYY-MM-DDTHH:mm:ss.sssZ`，并且还定义了表单的较短版本`YYYY-MM-DD`，这是您在第三个示例中使用的。

对于其他示例，解析将失败并且行为是实现定义的。

# html - org.apache.tomcat.dbcp.dbcp.SQLNestedException：无法获得连接，池错误超时等待空闲对象？

> ID：14976648
> 
> 赞同：-1
> 
> 时间：2013-02-20T09:42:54.717
> 
> 标签：html

我正在使用liferay 6.1并创建了我的自定义portlet，并且我正在使用自定义查询，它直接从数据库中获取记录，并带有以下......

```
public List<DashBoardBean> GetPieChartDataForCampaignbyOrganization(
            ThemeDisplay pThemeDisplay) {

        log.info("In GetPieChartDataForCampaignbyOrganization ");
        Context CtxObj;
        long pParentOrgId;
        ResultSet advResultSet = null;
        List<DashBoardBean> dashboardbeanObjList = new ArrayList<DashBoardBean>();
        try {

            CtxObj = new InitialContext();
            DataSource DsObj = (DataSource) CtxObj
                    .lookup("java:comp/env/jdbc/Liferay");
            Connection ConObj = DsObj.getConnection();
            Statement sStmtObj = ConObj.createStatement();

            advResultSet = sStmtObj
                    .executeQuery("MY CUSTOM QUERY WILL BE HERE");
            while (advResultSet.next()) {
                DashBoardBean dashboardbeanObj = new DashBoardBean();
                dashboardbeanObj
                        .setsOrganizationName(advResultSet.getString(1));
                dashboardbeanObj.setlOrganizationCount(advResultSet.getLong(2));
                dashboardbeanObjList.add(dashboardbeanObj);
            }
        } catch (NamingException e) {
            // TODO Auto-generated catch block
            dashboardbeanObjList = null;
            e.printStackTrace();
        } catch (SQLException e) {
            dashboardbeanObjList = null;
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (PortalException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (SystemException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        log.info("Leave GetPieChartDataForCampaignbyOrganization ");
        return dashboardbeanObjList;
    } 
```

以上是我的一个函数的代码片段...我有超过 5 个具有相同结构的函数...只是 SQL 查询在功能上有所不同...

现在的问题是我必须在页面加载中调用超过 5 个这样的函数......所以当我经常重新加载页面时......它给了我如下错误......

```
 org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot get a connection, pool error Timeout waiting for idle object
        at org.apache.tomcat.dbcp.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:114)
        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)
        at emenu.advertise.appbl.DashBoardCustomQuery.GetPieChartDataForCampaignStatus(DashBoardCustomQuery.java:112)
        at emenu.advertise.appbl.DashBordBL.GetPieChartDataForCampaignStatus(DashBordBL.java:292)
        at emenu.advertise.portlet.RestaurantPortlet.serveResource(RestaurantPortlet.java:402)
        at com.liferay.portlet.FilterChainImpl.doFilter(FilterChainImpl.java:118)
        at com.liferay.portal.kernel.portlet.PortletFilterUtil.doFilter(PortletFilterUtil.java:71)
        at com.liferay.portal.kernel.servlet.PortletServlet.service(PortletServlet.java:111)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72)
        at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilter.doFilter(InvokerFilter.java:73)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
        at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
        at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
        at com.liferay.portlet.InvokerPortletImpl.invoke(InvokerPortletImpl.java:531)
        at com.liferay.portlet.InvokerPortletImpl.invokeResource(InvokerPortletImpl.java:626)
        at com.liferay.portlet.InvokerPortletImpl.serveResource(InvokerPortletImpl.java:436)
        at com.liferay.portal.action.LayoutAction.processPortletRequest(LayoutAction.java:1075)
        at com.liferay.portal.action.LayoutAction.processLayout(LayoutAction.java:719)
        at com.liferay.portal.action.LayoutAction.execute(LayoutAction.java:249)
        at ............................
.......java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
            at java.lang.Thread.run(Thread.java:619)
        Caused by: java.util.NoSuchElementException: Timeout waiting for idle object
            at org.apache.tomcat.dbcp.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1171)
            at org.apache.tomcat.dbcp.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)
            ... 131 more
        09:24:11,163 INFO  [http-bio-8080-exec-5][DashBoardCustomQuery:665] Leave GetHighestClickRestaurantName 
        09:24:11,163 INFO  [http-bio-8080-exec-5][DashBoardCustomQuery:304] Leave GetLineChartDataForHighestClickedByRestaurant 
        09:24:11,164 INFO  [http-bio-8080-exec-5][DashBordBL:166] Leave GetLineChartDataByRestaurant From DashBordBl 
```

我知道我做错了什么...但是我不知道在哪里...可能是因为它的SQL连接刚刚从服务器丢失///是因为我没有关闭连接...请帮助我。 ..并纠正我哪里错了...我刚刚给出了一个函数示例，就像我过去从其他函数获取数据的方式一样...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-08T13:38:16.147

我刚刚找到了解决方案，因为在执行查询后我从未关闭过连接对象。我做了以下工作，在 try catch 块之后对我有用......

```
finally {
             try {
                 if(CtxObj!=null)   {
                     CtxObj.close();
                    }
                    if(sStmtObj!=null){
                        sStmtObj.close();
                    }
                    if(ConObj!=null){
                        ConObj.close();
                    }
            } catch (NamingException e) {
                // TODO Auto-generated catch block
                log.info(e);
            } catch (SQLException e) {
                // TODO Auto-generated catch block
                log.info(e);
            }
        } 
```

# c# - Sonar 的默认目录布局

> ID：14976651
> 
> 赞同：1
> 
> 时间：2013-02-20T09:43:02.523
> 
> 标签：c#, plugins, sonarqube

我准备 Sonar 来分析我的 C# 项目。我安装了 sonar 和 sonar-runner，还配置了 C# 插件（.NET Core、C# Core、FxCop、Gendarme、Gallio、OpenCover 和 StyleCop）

到目前为止一切正常。在 Sonar 中，我看到了我的代码统计信息（LOC 等），我还看到了代码违规。没有代码覆盖，但没关系，因为我没有任何测试。

问题是我只看到有关 Stylecop 的违规行为，所以它只是显示了一些代码样式问题。但我确信我的应用程序还必须有 FxCop 和其他插件应该检测到的其他违规行为。

在这张图片中，我们可以看到它显示了来自 StyleCop 的违规行为。我所有的违规行为都来自 StyleCop。

![在此处输入图像描述](../Images/b21daaa6e636ef737cfedd8ea09640a6.png)

在[Sonar C# 文档](http://docs.codehaus.org/display/SONAR/C#+Plugins+Troubleshooting)中，我读过可能会发生分析成功但发现的违规行为太少的情况，这可能是因为组装方向错误。我向您展示我的 sonar-runner.properties，也许这是我的问题的原因：

```
#----- Default Sonar server
#sonar.host.url=http://localhost:9000

#----- PostgreSQL
#sonar.jdbc.url=jdbc:postgresql://localhost/sonar
#sonar.jdbc.driver=org.postgresql.Driver

#----- MySQL
#sonar.jdbc.url=jdbc:mysql://localhost:3306/sonar?useUnicode=true&amp;characterEncoding=utf8
#sonar.jdbc.driver=com.mysql.jdbc.Driver

#----- Oracle
#sonar.jdbc.url=jdbc:oracle:thin:@localhost/XE
#sonar.jdbc.driver=oracle.jdbc.driver.OracleDriver

#----- Global database settings
#sonar.jdbc.username=sonar
#sonar.jdbc.password=sonar

#----- Default directory layout
sonar.sources=src
sonar.tests=src
sonar.binaries=src

#----- Default source code encoding
#sonar.sourceEncoding=UTF-8 
```

我还想列出我的应用程序结构：

```
-->ProjectMainFolder
   -->Project.sln
   -->sonar-project.properties

   -->Project1Folder
       -->bin
       -->object
       -->Properties
       -->Project1.csproj
       -->Project1Main.cs

   -->Project2Folder
       -->bin
       -->object
       -->Properties
       -->Project2.csproj
       -->Project2Main.cs 
```

那么问题又来了：为什么我只看到 StyleCop 违规行为而没有看到 FxCop、宪兵等违规行为？

我还想添加我的 sonar-project.properties：

```
# optional description
sonar.projectDescription=Project description

# Project identification  
sonar.projectKey=Vendor:Project
sonar.projectVersion= 1.0
sonar.projectName= Project 

# Info required for Sonar  
sources=.
sonar.language=cs
sonar.sourceEncoding=UTF-8

#Core C# Settings  
sonar.dotnet.visualstudio.solution.file=Project.sln 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:54:39.327

*   首先，您不应该将项目特定设置放在 sonar-runner.properties 文件中，您应该在解决方案中创建一个“sonar-project.properties”文件并将其保留在那里

*   其次，在这个“sonar-project.properties”文件中，“sonar.sources”应该设置为“.” 你不应该有“sonar.tests”或“sonar.binaries”

所有这些都在[文档](http://docs.codehaus.org/display/SONAR/C#+Ecosystem)中得到了很好的解释，并在[示例项目](https://github.com/SonarSource/sonar-examples/tree/master/projects/languages/csharp)中得到了应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:50:52.417

我刚刚找到了解决方案。

Fabrice - Sonar Team 刚刚让我想到，FxCop 和 Gendarme 无法正常工作，因为他们没有可使用的组件。

[在这里](https://stackoverflow.com/questions/10709184/how-to-get-fxcop-working-with-sonar-for-a-c-sharp-solution)我找到了灵魂。FxCop 只是在 Debug 文件夹中搜索组件，因为我的组件只是在发布文件夹中，所以它不能正常工作。所以我将它们改回调试（或 sonar.dotnet.buildConfigurations 属性）来解决它

# ember.js - Ember Inspector 是否已发布（适用于 Chrome）？

> ID：14976652
> 
> 赞同：2
> 
> 时间：2013-02-20T09:43:03.080
> 
> 标签：ember.js

我已经多次阅读有关**Ember Inspector**的内容，并且在 yotube 上也看过视频，例如[example video](http://www.youtube.com/watch?v=0B9leRf5kuo)。

有谁知道它是否可用或何时可用。这将使调试更加方便，我想尝试一下:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:45:34.407

[您可以通过克隆github 项目](https://github.com/tildeio/ember-extension)来获取当前版本

通过[http://cgcardona.github.com/2013/02/15/playing-around-with-the-ember-inspector/找到](http://cgcardona.github.com/2013/02/15/playing-around-with-the-ember-inspector/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-29T15:16:16.187

# 是的，它是直播的！

[https://chrome.google.com/webstore/detail/ember-inspector/bmdblncegkenkacieihfhpjfppoconhi](https://chrome.google.com/webstore/detail/ember-inspector/bmdblncegkenkacieihfhpjfppoconhi)

*（废话……愚蠢的最低答案长度要求……废话）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T02:35:08.297

它被释放了。检查下面的链接但我仍然对如何在我的网站上使用它感到困惑。 [https://chrome.google.com/webstore/detail/ember-inspector/bmdblncegkenkacieihfhpjfppoconhi](https://chrome.google.com/webstore/detail/ember-inspector/bmdblncegkenkacieihfhpjfppoconhi)

# php - 如何读取和发送资源？

> ID：14976655
> 
> 赞同：1
> 
> 时间：2013-02-20T09:43:07.060
> 
> 标签：php

我需要生成日志数据并将其以`csv`格式发送到邮件。这是我的代码：

```
public function sendMail(){
    $csv = $this->createCSV();
    $subject = $this->getMessage('subject');
    $message = $this->getMessage('message');
    $headers = $this->generateHeaders($csv, $message);

    mail('my_mail@gmail.com', $subject, $message, $headers);
}

private function createCSV(){
    $data = $this->getAVG();

    $csv = fopen('php://temp', 'w+');

    // long statistics generation

    fclose($csv);

    return $csv;
}

private function generateHeaders($file, $message){
    $boundary = md5(uniqid(time()));

    $headers = 'MIME-Version: 1.0'."\r\n";
    $headers .= 'Content-Type: multipart/mixed; boundary="'.$boundary."\"\r\n";  
    $headers .= 'From: noreplay@'.$_SERVER['SERVER_NAME']."\r\n";

    $headers .= '--'.$boundary."\r\n";

    $headers .= "Content-Type: text/html; charset=utf-8\r\n";
    $headers .= "Content-Transfer-Encoding: base64\r\n";
    $headers .= "\r\n";
    $headers .= chunk_split(base64_encode($message));

    $headers .= '--'.$boundary."\r\n";

    $headers .= "Content-Type: text/csv; name=\"ServersLogs.csv\"\r\n";
    $headers .= "Content-Transfer-Encoding: base64\r\n";
    $headers .= "Content-Disposition: attachment; filename=\"ServersLogs.csv\"\r\n";
    $headers .= "\r\n";
    $headers .= chunk_split(base64_encode(readfile($file)));

    $headers .= "\r\n--".$boundary."--\r\n"; 

    return $headers;
} 
```

问题是我无法在服务器上保存文件，所以我使用[php://](http://www.php.net/manual/en/wrappers.php.php)，但是在它无法读取文件之后......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:00:15.447

`$csv = fopen('php://temp', 'w+');`- 此行将创建资源（处理程序），它不是文件名。

`fclose($csv);`- 此行资源已关闭，不能再使用。
所以`return $csv;`不会返回任何可用的东西。

`readfile($file)`- 此函数需要文件名作为第一个参数，而不是关闭资源的处理程序。

我不明白为什么你需要文件或临时内存存储 - 只需使用变量（不是全局的）。无论如何，整个数据将在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:09:58.943

您应该在 generateHeaders() 调用后 close() 文件并使用 fread() 而不是 readfile()。在阅读之前不要忘记 fseek($file, 0, SEEK_SET)。

顺便说一句，您将数据保存到一个临时文件中只是为了在 generateHeaders() 中再次读取它。为什么不直接将生成的统计数据传递给 generateHeaders() 而不是 $file 资源？

# c# - Try/Catch 没有捕捉到 WebException

> ID：14976658
> 
> 赞同：2
> 
> 时间：2013-02-20T09:43:10.963
> 
> 标签：c#, mono

我构建了一个 .NET Mono 应用程序，它每分钟将文本文件上传到服务器。在我看来，避免应用程序崩溃的最好方法是在上传代码周围使用 try-catch，这样可以捕捉到意外错误。

并且始终正确运行大约 2 天，然后突然崩溃。我已经找了几个星期的原因，但找不到。

我得到的错误是：

> 未处理的异常：System.Net.WebException：请求在 System.Net.FtpWebRequest.CheckIfAborted() [0x00000] in :0 at System.Net.FtpWebRequest.set_Sate (RequestState value) [0x00000] in :0 在 System.Net 中止。 FtpWebRequest.ProcessRequest(RequestState value) [0x00000] in <filename:0 unknown>: 在 System.Threading.Thread.StartUnsafe () [0x00000] in <filename:0 unknown>:

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T06:42:51.230

你的电视机可能没有问题，我的意思是，你的代码。

问题是 Mono 的 FtpWebRequest 实现不是很健壮（在 FTP 会话的各个阶段处理超时）。我对类似案例进行了分析，并在那里发布了我的发现：

[Mono for Android / MonoTouch System.Net.WebException：请求中止](https://stackoverflow.com/questions/16058943/mono-for-android-monotouch-system-net-webexception-request-aborted)

您的案例虽然不相同，但指出了 Mono 的 FtpWebRequest 的常见问题“包”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:57:14.533

这样的错误真的很难找到。你说你在一个线程中运行这个函数。所以我猜它是从`while`循环中调用的，而不是`Thread.Sleep(1000*60);`或者 as `fire and forget`。原因可能是，该函数在下一次调用之前没有完成，或者`FtpWebRequest`仍然没有关闭，没关系，它在不同的上下文中运行。

我遇到了类似的问题，您可以尝试以下方法：

1）使`FtpWebRequest request`全局并在函数调用之前检查它是否仍然存在。

2）在函数端调用垃圾收集器：

```
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

请让我知道这是否有效。

# objective-c - Wanna Scale up view 内的内容根据 view 的大小，根据设备而变化

> ID：14976660
> 
> 赞同：0
> 
> 时间：2013-02-20T09:43:14.237
> 
> 标签：objective-c, uiview

我为 iPad 和 iPhone 共享相同的故事板。我在一个小视图中有内容。我想根据视图的大小放大该视图内的内容，该大小会根据安装的设备而变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:43:19.810

尝试设置自动调整大小的蒙版，例如

```
[YourView setAutoresizingMask:UIViewAutoresizingFlexibleBottomMargin|UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin|UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight]; 
```

希望能对此有所帮助

# mysql - 在 mysql select 上使用 ICONV - 将所有字符转换为标准 ascii

> ID：14976661
> 
> 赞同：3
> 
> 时间：2013-02-20T09:43:15.693
> 
> 标签：mysql, character-encoding, ascii, iconv, transliteration

我想在我的数据库中搜索通常包含许多特殊字符的波兰城市。我想将它们迁移到 ASCII，这样即使没有波兰语键盘的人也可以进行常规搜索。

在 PHP 中看起来像

```
$ascii = iconv("UTF-8", "ASCII//TRANSLIT//IGNORE", $text); 
```

但是如何在 mysql 选择查询中实现呢？

```
select * from city where CONVERT(city using ASCII)=CONVERT(? using ASCII) 
```

不起作用，因为它用问号替换所有未知字符

```
select CONVERT('Lódź' using ascii );
-- RESULT: L?d? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T12:10:51.633

## 操作员行为

### 等号运算符`=`

如果您使用[等号运算符`=`](https://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_equal)进行精确搜索，则解决方案`@rsanchez`是正确的。例如，找到**等于的行`œ`**可以使用这个精确值`œ`或其音译值来完成`oe`：

```
SELECT 'œ' = 'oe' COLLATE utf8_unicode_ci ;
-- true
+-------------------------------------+
| 'œ' = 'oe' COLLATE utf8_unicode_ci  |
+-------------------------------------+
|                                   1 |
+-------------------------------------+ 
```

将返回**等于`œ`或`oe`**如果用户使用其中任何一个的行。

### `LIKE`操作员

但是，如果您想使用[`LIKE`operator](https://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html#operator_like)进行模糊搜索，这是行不通的。例如，`œ`通过**键入`oe`**搜索包含的单词将不会返回带有`œ`.

```
SELECT 'œ' LIKE 'oe' COLLATE utf8_unicode_ci ;
-- false
+----------------------------------------+
| 'œ' LIKE 'oe' COLLATE utf8_unicode_ci  |
+----------------------------------------+
|                                      0 |
+----------------------------------------+ 
```

### 解释 ？

这不是错误，而是[SQL 标准的预期行为（参见 Alexander Barkov 的回答）](http://bugs.mysql.com/bug.php?id=14716)，就像在使用更复杂的方法（例如，允许音译相等）`LIKE`时基于字符进行比较一样。`=`

## 解决方案

### 提供音译形式

一种解决方案是生成搜索的音译并修改查询以搜索每种形式：

```
SELECT * FROM `mytable` 
  WHERE `myfield` LIKE 'oe' or `myfield` LIKE 'oe' 
COLLATE  utf8_unicode_ci; 
```

### 使用全文搜索

从[MySQL 5.6 开始，全文搜索](https://dev.mysql.com/doc/refman/5.6/en/mysql-nutshell.html)现在**可用于 InnoDB**（以前它仅可用于`MyISAM`表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-30T13:07:07.300

如[本答案](https://stackoverflow.com/a/4813651/1507998)中所述，如果您使用排序规则`utf8_general_ci`，则字符串比较将不区分大小写和重音，因此在执行查询时无需指定任何转换：

```
CREATE TABLE test (name varchar(100)) COLLATE 'utf8_general_ci';
INSERT test (name) VALUES ('Lódź');

SELECT * FROM test WHERE name = 'Lodz';

name
----
Lódź 
```

[在这里提琴](http://sqlfiddle.com/#!2/d37af/4)

如果你想为你的列指定另一个排序规则，你甚至可以在一个特定的查询中应用这个排序规则：

```
CREATE TABLE test (name varchar(100)) COLLATE 'utf8_polish_ci';
INSERT test (name) VALUES ('Lódź');

SELECT * FROM test WHERE name = 'Lodz';

Empty set (0.00 sec)

SELECT * FROM test WHERE name COLLATE 'utf8_general_ci' = 'Lodz';

name
----
Lódź 
```

[第二小提琴在这里](http://sqlfiddle.com/#!2/69dd64/5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-31T20:03:52.423

迟到了，但我的回答是：

```
CREATE FUNCTION TO_ASCII(
    text_to_replace MEDIUMTEXT
) RETURNS MEDIUMTEXT
BEGIN
    DECLARE i INT;
    DECLARE char_from, char_to VARCHAR(50);

    SET char_from := 'ĄĆĘŁŃÓŚŻŹąćęłńóśżź ';
    SET char_to   := 'ASCZZEOLNasczzeoln_';
    SET i := CHAR_LENGTH(char_from);

    WHILE i
        DO
            SET text_to_replace := REPLACE(text_to_replace, SUBSTR(char_from, i, 1), SUBSTR(char_to, i, 1));
            SET i:= i - 1;
        END WHILE;

    RETURN text_to_replace;
END; 
```

和用法：

```
SELECT TO_ASCII('abcąśćó   ĄĆĘŁŃÓŚŻŹąćęłńóśżź  ĄĆĘŁŃÓŚŻŹąćęłńóśżź '); 
```

# java - Eclipse：ScheduledExecutorService.scheduleWithFixedDelay 不会在发布时删除

> ID：14976665
> 
> 赞同：1
> 
> 时间：2013-02-20T09:43:25.520
> 
> 标签：java, eclipse

我遇到了奇怪的问题。

我有一个 ScheduledExecutorService.scheduleWithFixedDelay 当我单击发布/停止重新启动服务器时它不会“停止”。

当我重新发布时，将运行 2 个服务，并且运行相同服务的数量取决于我单击发布的次数。

在我停止并启动服务器后，这并没有消失。

我必须关闭 eclipse 并打开它才能停止它，我注意到只有在我编辑初始化服务的类之后才会发生这种情况。

我无法粘贴代码，但很简单.. 只是一个单例并持有服务

```
private final ScheduledExecutorService scheduler = 
       Executors.newScheduledThreadPool(1);

scheduler.scheduleAtFixedRate(new Runnable() {
                public void run() { system.out("hello" }
            }, 60 * 60, SECONDS); 
```

我似乎无法找出问题所在，请有人帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:51:54.513

您应该在取消部署应用程序时关闭调度程序。更简单的方法是声明一个实现[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)，并在方法中关闭调度程序`contextDestroyed()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:12:34.227

Executors.newScheduledThreadPool(1); 创建一个非守护进程工作线程，它会阻止 JVM 关闭，除非您明确关闭调度程序

```
scheduler.shutdown(); 
```

或者，您可以执行以下操作

```
 ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1,
            new ThreadFactory() {
                public Thread newThread(Runnable r) {
                    Thread t = new Thread(r);
                    t.setDaemon(false);
                    return t;
                }

            }); 
```

在这种情况下，工作线程将是一个守护进程，并且不会阻止 JVM 在程序完成时退出

# python - 在 Web 界面中显示 numpy 表示的 birmap [Python]

> ID：14976666
> 
> 赞同：0
> 
> 时间：2013-02-20T09:43:26.490
> 
> 标签：python, opencv, cherrypy

我想用 Web 界面（用 CherryPy 制作）显示 OpenCV 处理的图像。下面的代码可以正常工作，但是有没有办法在不写入/读取图像文件的情况下执行这样的任务？

```
import cherrypy
import cv2

class Picture(object):
    def __init__(self):
        self.cam = cv2.VideoCapture(0)

    @cherrypy.expose
    def index(self):
        _, image = self.cam.read()
        cv2.imwrite('temp.jpg', image)
        with open('temp.jpg', 'rb') as temp_file:
            data = temp_file.read()

        cherrypy.response.headers['Content-Type'] = 'image/jpeg'
        return data

if __name__ == '__main__':
    cherrypy.quickstart(Picture()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:11:49.533

您可以 cv2.imencode() 内存中的图像，而不是保存/读回

# process - 正在返回密钥

> ID：14976667
> 
> 赞同：3
> 
> 时间：2013-02-20T09:43:27.637
> 
> 标签：process

代码运行为：

```
u = subprocess.Popen(['process','abc','def','','ghi','jkl'], stdin=subprocess.PIPE, stdout=subprocess.PIPE, stderr=subprocess.PIPE) 
```

由于发生错误，它在下面不起作用：

```
ValueError: I/O operation on closed file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T07:34:23.690

我建议你试试[pexpect](http://www.noah.org/wiki/pexpect)，它更适合这种任务（实际上，它*是*为这类任务构建的工具）。

您还可以浏览[示例](http://pexpect.svn.sourceforge.net/viewvc/pexpect/trunk/pexpect/examples/)并查看其用法。

# java - 使用 REGEX 验证坐标的正确格式

> ID：14976668
> 
> 赞同：2
> 
> 时间：2013-02-20T09:43:27.980
> 
> 标签：java, regex, latitude-longitude, coordinate

我一直在尝试验证坐标的正确格式。目前我想保存坐标。但是当格式错误时，标记不会出现在我的地图上。

这是我的一些示例代码。

```
String latlon = "3.169054, 101.714108";
        String regex_coords = "/\\((\\-?\\d+\\.\\d+), (\\-?\\d+\\.\\d+)\\)/";
        Pattern compiledPattern2 = Pattern.compile(regex_coords, Pattern.CASE_INSENSITIVE);
        Matcher matcher2 = compiledPattern2.matcher(latlon);
        while (matcher2.find()) {
            System.out.println("Is Valid Map Coordinate: " + matcher2.group());
        } 
```

我希望用户能够使用逗号仅保存此格式“3.169054, 101.714108”。

谁能帮我建立正则表达式来验证这种格式？

谢谢大家

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T09:50:46.027

这应该适合你：

```
([+-]?\d+\.?\d+)\s*,\s*([+-]?\d+\.?\d+) 
```

在线 RegexPlanet 演示：[http ://fiddle.re/20pm](http://fiddle.re/20pm)

这允许任何坐标是一个可选地以`+`或开头的数字`-`。数字可以是整数或双精度数（但如果存在点，则必须用数字括起来）。

最后，可以得到经纬度为 group1 和 group2。

# php - 如果有多个空检查和 OR

> ID：14976672
> 
> 赞同：0
> 
> 时间：2013-02-20T09:43:50.153
> 
> 标签：php

我想知道为什么这种情况不起作用

```
if(!empty($b['boxText1']) || !empty($b['boxText2']) || !empty($b['boxText3']))) {
 // do something
} 
```

我收到此错误：

```
Parse error: syntax error, unexpected '!' in 
```

我错过了什么吗？

最好的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:45:18.420

试试这个............你输入了额外的'）'......

```
if(!empty($b['boxText1']) || !empty($b['boxText2']) || !empty($b['boxText3'])) {
 // do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:45:52.060

```
if(!empty($b['boxText1']) || !empty($b['boxText2']) || !empty($b['boxText3']) ) ) {
                                                                                ^ 
```

卸下您使用的额外支架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:47:22.963

```
if(!empty($b['boxText1']) || !empty($b['boxText2']) || !empty($b['boxText3'])) {
 // do something
} 
```

# java - 如何更改 GEF 中的复选框大小（org.eclipse.draw2d.Checkbox）

> ID：14976674
> 
> 赞同：0
> 
> 时间：2013-02-20T09:43:51.340
> 
> 标签：java, draw2d

在 GEF（图形编辑框架）中，是否可以更改复选框的大小和其中的复选标记？

我尝试了三种方法：

*   设置首选大小
*   设置大小
*   设置边界

但它们只能扩大它与其父级之间的填充。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T10:44:57.957

`Checkbox`是通过在标签内使用 Image 来实现的。有两张图片，一张用于选中的复选框，一张用于未选中的复选框。因此，我没有一种简单的方法来重新调整复选框的大小。

可能的解决方案： 1\. 如果您只需要特定大小的较大复选框，请创建自己的`Checkbox`. 原类的代码很小，很简单。2.如果你需要改变复选框的大小，你必须创建一个新`Graphics`对象并使用方法按需创建一个新图像`scale`（这有点复杂，你必须`GC`从一个新图像创建一个，`SWTGraphics`使用创建一个GC 然后对其进行扩展。 3\. 说服你的客户他不想要一个新的复选框:-)。

祝你好运。

# python - PyQt4 - 在小部件上显示图像不起作用

> ID：14976676
> 
> 赞同：0
> 
> 时间：2013-02-20T09:43:52.400
> 
> 标签：python, widget, pyqt4

类`MainWindow`包含用于操作图像的菜单和功能。有一个变量 `self.image = QtGui.QImage()`保存选择的图片。当我使用`QPixmap`in`MainWindow`显示图片时 - 它可以工作。但我有课`Splitter(QtGui.QWidget)`，`QGraphicsView`我想在上面展示图片。我`scene = QtGui.QGraphicsScene()`在 Splitter 类中声明并尝试了这个： `Splitter.scene.addPixmap(QtGui.QPixmap.fromImage(image))`从 MainWindow 类中，但它不起作用 -`AttributeError: type object 'Splitter' has no attribute 'scene'.` 怎么办？

```
class MainWindow(QtGui.QMainWindow):

    def __init__(self, parent=None):
        super(MainWindow, self).__init__()
        self.form_widget = Splitter()
        self.setCentralWidget(self.form_widget) 
        self.initUI()

    def initUI(self):               

        self.filename = None
        self.statusBar().showMessage('Ready')

        openFile = QtGui.QAction(QtGui.QIcon('fileopen.png'), u'Otwórz plik', self)
        openFile.setShortcut('Ctrl+O')
        openFile.setStatusTip(u'Otwórz nowy plik')
        openFile.triggered.connect(self.showDialog)

        exitAction = QtGui.QAction(QtGui.QIcon('filequit.png'), 'Zamknij', self)        

        exitAction.setShortcut('Ctrl+Q')
        exitAction.setStatusTip('Zamknij program')
        exitAction.triggered.connect(QtGui.qApp.quit)

        #utworzenie menu
        menubar = self.menuBar()
        #menu Plik
        fileMenu = menubar.addMenu('&Plik')
        fileMenu.addAction(openFile)
        fileMenu.addAction(exitAction)

        #menu Edycja
        editMenu=menubar.addMenu('&Edycja')

        #menu Pomoc
        helpMenu=menubar.addMenu('&Pomoc')
        helpAction=QtGui.QAction(QtGui.QIcon('icon.png'), u'O programie',self)
        helpAction.triggered.connect(self.helpAbout)
        helpMenu.addAction(helpAction)
        helpMenu.addAction(u"Opis możliwości", self.helpAbout) #dopisać funkcję

        self.setGeometry(200, 200, 500, 500)
        self.setWindowTitle(u'System analizy rozkładu jasności obrazu')    
        self.show()

    # do otwierania pliku    
    def showDialog(self):

        dir1 = os.path.dirname(self.filename) \
                if self.filename is not None else "."
        formats = ["*.%s" % unicode(format).lower() \
                   for format in QtGui.QImageReader.supportedImageFormats()]
        fname = unicode(QtGui.QFileDialog.getOpenFileName(self,
                            u"System analizy obrazów - Wybierz obraz", dir1,
                            u"Pliki obrazów (%s)" % " ".join(formats)))
        if fname:
            self.loadFile(fname)

    def loadFile(self, fname=None):
        if fname is None:
            action = self.sender()
            if isinstance(action, QtGui.QAction):
                fname = unicode(action.data().toString())
                if not self.okToContinue():
                    return
                else:
                    return
        if fname:
            self.filename = None
            image = QtGui.QImage(fname)
        if image.isNull():
            message = u"Błąd odczytu %s" % fname
        else:
            self.image = QtGui.QImage()
            self.image = image
            self.filename = fname
            self.showImage()
            #self.dirty = False
            #self.sizeLabel.setText("%d x %d" % (image.width(), image.height()))
            message = u"Załadowano %s" % os.path.basename(fname)
        self.updateStatus(message)

        self.filename = None
        image = QtGui.QImage(fname)
        if image.isNull():
            message = u"Błąd odczytu %s" % fname

    def updateStatus(self, message):
        self.statusBar().showMessage(message, 5000)    

    def showImage(self, percent=None):
        if self.image.isNull():
            return
        #if percent is None:
        #    percent = self.zoomSpinBox.value()
        percent=50
        factor = percent / 100.0
        width = self.image.width() * factor
        height = self.image.height() * factor
        image = self.image.scaled(width, height, QtCore.Qt.KeepAspectRatio)
        Splitter.scene.addPixmap(QtGui.QPixmap.fromImage(image)) #doesn't work
        #self.imageLabelRight.setPixmap(QtGui.QPixmap.fromImage(image)) #works, but it's not on widget

class Splitter(QtGui.QWidget):

    def __init__(self):
        super(Splitter, self).__init__()

        self.initUI()

    def initUI(self):      

        #napisy wejściowe
        label_up_box = QtGui.QHBoxLayout()
        napis1=QtGui.QLabel(u"OBRAZ WEJŚCIOWY")
        napis1.setStyleSheet("font: 14pt \"MS Shell Dlg 2\";")
        napis1.setAlignment(QtCore.Qt.AlignCenter)

        napis2=QtGui.QLabel(u"OBRAZ WYJŚCIOWY")
        napis2.setStyleSheet("font: 14pt \"MS Shell Dlg 2\";")
        napis2.setAlignment(QtCore.Qt.AlignCenter)
        label_up_box.addWidget(napis1)
        label_up_box.addWidget(napis2)

        #dwa górne okna
        hbox = QtGui.QHBoxLayout()
        up_left = QtGui.QGraphicsView(self)
        up_right = QtGui.QGraphicsView(self)
        hbox.addWidget(up_left)
        hbox.addWidget(up_right)

        #napisy do slidera
        label_slider = QtGui.QHBoxLayout()
        napis1=QtGui.QLabel(u"\n\nREGULACJA JASNOŚCI")
        napis1.setStyleSheet("font: 14pt \"MS Shell Dlg 2\";")
        napis1.setAlignment(QtCore.Qt.AlignCenter)
        label_slider.addWidget(napis1)

        #slider i licznik
        hbox2 = QtGui.QHBoxLayout()
        sld = QtGui.QSlider(QtCore.Qt.Horizontal, self)
        lcd = QtGui.QLCDNumber(self)
        hbox2.addWidget(sld)
        hbox2.addWidget(lcd)
        sld.valueChanged.connect(lcd.display)

        #napisy do histogramów
        label_down_box = QtGui.QHBoxLayout()
        napis1=QtGui.QLabel(u"\n\nHISTOGRAM WEJŚCIOWY")
        napis1.setStyleSheet("font: 14pt \"MS Shell Dlg 2\";")
        napis1.setAlignment(QtCore.Qt.AlignCenter)

        napis2=QtGui.QLabel(u"\n\nHISTOGRAM WYJŚCIOWY")
        napis2.setStyleSheet("font: 14pt \"MS Shell Dlg 2\";")
        napis2.setAlignment(QtCore.Qt.AlignCenter)
        label_down_box.addWidget(napis1)
        label_down_box.addWidget(napis2)

        #dwa dolne okna
        hbox3 = QtGui.QHBoxLayout()
        down_left = QtGui.QGraphicsView(self)
        down_right = QtGui.QGraphicsView(self)
        hbox3.addWidget(down_left)
        hbox3.addWidget(down_right)

        #layout całości
        vbox = QtGui.QVBoxLayout()
        vbox.addLayout(label_up_box)
        vbox.addLayout(hbox)
        vbox.addLayout(label_slider)
        vbox.addLayout(hbox2)
        vbox.addLayout(label_down_box)
        vbox.addLayout(hbox3)

        self.setLayout(vbox)
        scene = QtGui.QGraphicsScene()  
        scene2 = QtGui.QGraphicsScene()  

        scene.addPixmap(QtGui.QPixmap('icon.png'))  
        #scene2.addPixmap(QtGui.QPixmap.fromImage(image)) #doesn't work

        up_left.setScene(scene)
        up_right.setScene(scene2)
        down_left.setScene(scene)
        down_right.setScene(scene)
        up_left.show()

        self.show()

def main():

    app = QtGui.QApplication([])
    app.setWindowIcon(QtGui.QIcon('icon.png'))

    mm = MainWindow()
    mm.show()

    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T13:35:20.140

解决了！我把我能做的（几乎所有东西）从代码中`MainWindow`移到`Widget`和之后，一切正常。

# nhibernate - NHibernate 过滤数据最佳实践

> ID：14976679
> 
> 赞同：0
> 
> 时间：2013-02-20T09:43:58.017
> 
> 标签：nhibernate, filter, nhibernate-mapping

我有以下情况：

用户登录，打开所有产品的概览，只能看到添加了条件的产品列表，这个条件是可变的。例子：`WHERE category in ('catA', 'CatB')`

管理员登录，打开所有产品的概览，他可以看到所有未应用过滤器的产品。

我需要尽可能动态地进行此操作。我的数据访问类大部分时间都在使用泛型。

我见过[过滤器](http://ayende.com/blog/3993/nhibernate-filters) ，但我的条件非常多变，所以我认为这不够可扩展。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:18:34.827

我们使用 NH 过滤器来做类似的事情，而且效果很好。如果不需要应用过滤器，您可以省略为过滤器设置任何值。我们将这些过滤器用于更基本的内容、几乎 100% 应用的过滤器、fx 已删除对象过滤器、客户端数据隔离等。不确定您在寻找什么可扩展性方面？

对于更高级和更复杂的过滤，我们使用一个操作存储库根的自定义类。类似于以下内容：

```
 public IQueryOver<TIn, TOut> Apply(IQueryOver<TIn, TOut> query)
 {
      return query.Where(x => ... );
 } 
```

如果您有一个与您的 NH 使用集成的 IoC 容器，则可以轻松推广此类内容并将其插入您的堆栈中。我们有这些存储库操纵器，它们执行简单的 where 子句，以及其他生成复杂的 where 子句（引用域逻辑）和其他连接第二个表并在其上过滤的存储库操纵器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:01:51.347

您可以将所有类别保存在类别列表中并将此列表传递给查询。如果列表不为 null 并且包含元素，则可以使用以下内容：

```
List<string> allowedCategoriesList = new List<string>();
allowedCategoriesList.Add(...);
...
.WhereRestrictionOn(x => x.category).IsIn(allowedCategoriesList) 
```

如果您没有任何过滤器，则跳过此条目很重要（因此，您希望查看所有条目而不过滤），否则您将看不到一个结果。

# html - CSS 页脚分隔

> ID：14976681
> 
> 赞同：1
> 
> 时间：2013-02-20T09:44:07.830
> 
> 标签：html, css, position, margin, footer

我的页面上有一个固定的页脚，它由文本组成，没有背景图像。我还有一个固定的背景图像，位于右下角。当我向下滚动页面时，我正在徘徊我可以做些什么来防止我的内容与页脚和背景图像重叠。当我滚动时，是否有在它们之间放置填充？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:46:55.673

您可以将页脚的高度放在主容器的底部填充。像这样的东西：

```
.footer { height: 150px; }
.container { padding-bottom: 150px; } 
```

这将防止内容位于固定页脚下。

编辑：这是小提琴 - [http://jsfiddle.net/2KZyv/](http://jsfiddle.net/2KZyv/) 当您到达页面底部时，由于容器底部的填充，页脚不在内容顶部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:24:46.077

您可能在页脚上有一个白色背景，因为有一个透明的固定页脚必然会产生重叠问题。至于右下角的背景图像，只需包含一个`z-index`代码并将其一直推回，您就会在顶部拥有一切。

# java - 避免空值、不变性、对象状态

> ID：14976682
> 
> 赞同：2
> 
> 时间：2013-02-20T09:44:09.367
> 
> 标签：java, oop, immutability

我喜欢不变性的概念。我也喜欢没有空值的概念（如果可能的话，也尽可能没有 NullDesignPattern，没有 NullObjects ......）。

但是下面的场景呢：

我有一个 object `User`，它有两个字段：`birthday`and `dateInLifeMarried`（可以是任何类似的字段；重要的是，起初这个字段是`null`并且在对象生命中的某个时刻发生变化）。

由于它是不可变的，我希望这两个字段都在构造函数中：

```
public User(birthday, dateInLifeMarried) 
```

现在：

1.  我不想传递`null`给第二个参数
2.  我不想添加一个 setter，因为它是不可变的
3.  我不想用 NullObjectPattern 而不是调用构造函数`null`

我只是在自相矛盾，还是有一种我没有想到的***优雅方式来拥有它？***

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T09:47:36.093

那么你需要考虑你想要的表示是什么 - 而不仅仅是构造函数签名。我怀疑您*需要*对该字段使用空引用（或至少类似的东西）。但是你可以有两个构造函数：

```
User(birthday)               // Unmarried user
User(birthday, marriageDate) // Married user; marriageDate must not be null 
```

作为 API 的用户，我不确定我是否真的喜欢这样 - 我想我宁愿允许`marriageDate`为空。特别是，必须编写以下内容会很烦人：

```
LocalDate marriageDate = getMarriageDateOrNull();
User user = marriageDate == null ? new User(birthday)
                                 : new User(birthday, marriageDate); 
```

或者，由于人们可以多次结婚，因此您始终可以使用`Iterable<LocalDate> marriageDates`，然后从未结婚的用户将有一个空序列:) （尽管您需要考虑已婚然后离婚和结婚然后丧偶的用户. 模拟现实生活很难。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:49:41.120

第二个构造函数呢

```
User(birthday) 
```

调用第一个

```
this(birthday, null) 
```

?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T10:50:04.743

不要为了避免 null 而避免它。想想什么`null`意思，然后在有意义的地方使用它。该值`null`表示*未知*、*未定义*或未*指定*的值。如果您有意识地使用 null，您可以使您的代码更易于使用和更具可读性，同时防止空指针异常。

在您的示例中，可以未指定结婚日期，因此您应该允许`null`. 但是，您不希望未指定生日，因此您不允许 null 存在。您可以像这样指定构造函数：

```
User(LocalDate birthday)
{
    this(birthday, null);
    // That's it! Nothing more to do here.
}

User(LocalDate birthday, LocalDate marriageDate)
{
    if (birthday == null)
        throw new IllegalArgumentException();
    // Use it...
} 
```

现在您（或任何使用您的代码的人）可以执行以下操作：

```
LocalDate marriageDate = getMarriageDateOrNull();
User user = new User(birthday, marriageDate); 
```

看？更简洁的代码，因为你*授权* `null`而不是避免它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T09:52:43.763

您可以使用继承：

```
public abstract class User{}
public class UnMarriedUser extends User{}
public class MarriedUser extends User{} 
```

但是这个模型在面对许多排列时变得越来越弱。

# jquery - 替代在 div / iframe 上使用 .remove

> ID：14976686
> 
> 赞同：1
> 
> 时间：2013-02-20T09:44:19.297
> 
> 标签：jquery, html, iframe

目前我有一个链接，单击该链接会生成一个包含在 DIV 中的 iframe。此 DIV 包含一个链接，单击该链接会隐藏它。

但是我不想只是隐藏它，我希望 iframe 被“删除”，这样它就不会在后台运行。

我知道 .remove 会这样做，但是我无法再次生成它。

这是当前的代码：

```
$(document).ready(function() {
    $("#overlay").hide();
});

$("#ShowSlideshow").live('click', function() {
    $("#overlay").show();
    $('#slideshow').html('<iframe border="0" frameborder="0" width="100%" height="100%" src="index.html"></iframe>').show()
});

$("#HideSlideshow").live('click', function() {
    $("#overlay").hide();
    $("#slideshow").hide();
}); 
```

以下是 DIVS：

```
<div id="overlay"><a href="#" id="HideSlideshow">Close Slideshow</a>
<div id="slideshow"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:46:07.187

您不想删除实际的#slideshow，您只想删除#slideshow 中的 iframe。像这样：

```
$("#HideSlideshow").live('click', function() {
    $("#overlay").hide();
    $("#slideshow iframe").remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:56:25.433

给 IFrame 一些 ID 并从 Div 中删除 Iframe... 然后它工作...

试试下面...

小提琴：http: [//jsfiddle.net/458bM/50/](http://jsfiddle.net/458bM/50/)

**HTML：**

```
<div id="overlay"><a href="#" id="HideSlideshow">Close Slideshow</a>

<div id="slideshow"></div>
</div>
<a href="#" id="ShowSlideshow">Show Slideshow</a> 
```

**查询：**

```
$(document).ready(function() {
    $("#overlay").hide();
});

$("#ShowSlideshow").live('click', function() {
    $("#overlay").show();
    $('#slideshow').html('<iframe border="1" frameborder="1" width="100%" id="iframeshow" height="100%" src="http://www.green.org/"></iframe>').show()
});

$("#HideSlideshow").live('click', function() {
    $("#overlay").hide();
    $("#iframeshow").remove();
}); 
```

# php - 在 Yii 中下载文件

> ID：14976687
> 
> 赞同：0
> 
> 时间：2013-02-20T09:44:19.623
> 
> 标签：php, yii

我正在尝试在 Yii 中编写一个脚本来从服务器下载文件。

这些文件位于 Yii 项目的 webroot 中，

但我每次文件不存在错误，任何人都可以看到哪里错了：

```
public function actionDownload($id) {
    $audio = Audio::model()->findByPk($id);
    $file =  Yii::getPathOfAlias('webroot') . $audio->path;
    if (file_exists($file)) {
        header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
        header('Content-Description: File Transfer');
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename=' . $audio->path);
        header('Content-Length: ' . filesize($audio->path));
        $audio->downloaded = $audio->downloaded + 1;
        $audio->save();
    }else{
        echo "file not exist: ".$file;            
    }
    exit;
} 
```

我得到的错误是：

```
file not exist: /var/www/vhosts/ikhwanbiz.org/httpdocs/userfiles/reklames/media/deneme/sen%20dep%20olmisem.mp3 
```

谢谢

问候

比力

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:48:51.770

Bili，这对我来说效果很好，并且在大多数浏览器上似乎都很好。

```
$filename = 'your_file_name.csv';
header('Content-Disposition: attachment; charset=UTF-8; filename="'.$filename.'"');
$utf8_content = mb_convert_encoding($content, "SJIS", "UTF-8");
echo $utf8_content;
Yii::app()->end();
return; 
```

希望对你有帮助，祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T23:24:37.500

这更像是一个 php 问题而不是 yii 问题。

例如，

```
<?php
header("Content-disposition: attachment; filename=huge_document.pdf");
header("Content-type: application/pdf");
readfile("huge_document.pdf");
?> 
```

来源：[http ://webdesign.about.com/od/php/ht/force_download.htm](http://webdesign.about.com/od/php/ht/force_download.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:59:56.167

看起来文件名部分`$audio->path`是 URL 编码的，而服务器上实际文件的名称不是。您应该从源头修复它（不知道该路径是从哪里设置的），但与此同时，一个简单的解决方法是编写

```
$file =  Yii::getPathOfAlias('webroot') . urldecode($audio->path); 
```

# c# - 结合多个 Linq OrderBy 实现 IComparer

> ID：14976696
> 
> 赞同：5
> 
> 时间：2013-02-20T09:44:47.483
> 
> 标签：c#, sorting, icomparer

我的问题是我总是想以某种方式订购一组对象。

例如：

```
class foo{
public string name {get;set;}
public DateTime date {get;set;}
public int counter {get;set;}
} 
```

...

```
IEnumerable<foo> dosomething(foo[] bar){ 
return bar.OrderBy(a=>a.name).ThenBy(a=>a.date).ThenBy(a=>a.counter);
} 
```

我遇到的问题是它一直在冗长地附加排序顺序。一个巧妙的解决方案似乎只是创建一个实现的类`IComparer<foo>`，这意味着我可以这样做：

```
IEnumerable<foo> dosomething(foo[] bar){ 
return bar.OrderBy(a=>a, new fooIComparer())
} 
```

.

问题是，这个实现的order方法如下

...

```
public int Compare(foo x, foo y){ } 
```

这意味着它在非常精细的基础上进行比较。

当前的实现（可能会起作用，尽管我正在编写伪代码）

```
public int Compare(foo x, foo y){
if (x==y)
  return 0;
var order = new []{x,y}.OrderBy(a=>a.name).ThenBy(a=>a.date).ThenBy(a=>a.counter);
  return (order[0] == x) ? -1 : -1;//if x is first in array it is less than y, else it is greater
} 
```

这不是很有效，另一个可以提供更整洁的解决方案吗？理想情况下完全没有 Compare(x,y) 方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:01:45.757

## 选项 1 - 比较器

当您按多个条件订购时，您将在每种情况下单独检查它们；例如，如果`x.name`和`y.name`相等，那么您将检查`x.date`和`y.date`，依此类推。

```
public class FooComparer : IComparer<Foo>
{
    public int Compare(Foo x, Foo y)
    {
       // nasty null checks!
        if (x == null || y == null)
        {
            return x == y ? 0
                : x == null ? -1
                : 1;
        }

        // if the names are different, compare by name
        if (!string.Equals(x.Name, y.Name))
        {
            return string.Compare(x.Name, y.Name);
        }

        // if the dates are different, compare by date
        if (!DateTime.Equals(x.Date, y.Date))
        {
            return DateTime.Compare(x.Date, y.Date);
        }

        // finally compare by the counter
        return x.Counter.CompareTo(y.Counter);
    }
} 
```

## 选项 2 - 扩展方法

另一种不那么吸引人的方法可能是扩展方法。可悲的是，由于`TKey`for each`ThenBy`可能不同，我们失去了泛型的力量，但`object`在这种情况下可以安全地用类型替换它。

```
public static IOrderedEnumerable<T> OrderByThen<T>(this IEnumerable<T> source, Func<T, object> selector, params Func<T, object>[] thenBySelectors)
{
    IOrderedEnumerable<T> ordered = source.OrderBy(selector);
    foreach (Func<T, object> thenBy in thenBySelectors)
    {
        ordered = ordered.ThenBy(thenBy);
    }

    return ordered;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:14:35.173

您必须实现`IComparable<foo>`并比较所有属性：

```
class foo: IComparable<foo>, IComparer<foo>
{
    public string name { get; set; }
    public DateTime date { get; set; }
    public int counter { get; set; }

    public int Compare(foo x, foo y)
    {
        if (x == null || y == null) return int.MinValue;
        if (x.name != y.name)
            return StringComparer.CurrentCulture.Compare(x.name, y.name);
        else if (x.date != y.date)
            return x.date.CompareTo(y.date);
        else if (x.counter != y.counter)
            return x.counter.CompareTo(y.counter);
        else
            return 0;
    }

    public int CompareTo(foo other)
    {
        return Compare(this, other);
    }
} 
```

然后你可以`OrderBy`这样使用：

```
var ordered = foos.OrderBy(f => f).ToList(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:57:12.423

扩展方法有什么问题？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T10:02:06.460

你为什么不简单地比较你的价值观：

```
int Compare(foo x, foo y)
{

    if (x== null && y == null)
        return 0;
    else if (x == null)
        return -1;
    else if (y == null)
        return 1;

    var nameComparision = string.Compare(x.name,y.name);
    if (nameComparision != 0)
        return nameComparision;
    var dateComparision = x.date.CompareTo(y.date);
    if (dateComparision != 0)
        return dateComparision;
    var counterComparision  = x.counter.CompareTo(y.counter);
    return counterComparision;
} 
```

# c# - 由于其保护级别，C++/CLI 通用函数无法从 c# 访问

> ID：14976704
> 
> 赞同：0
> 
> 时间：2013-02-20T09:45:11.807
> 
> 标签：c#, generics, c++-cli

我编写了一个 C++/CLI 库，它导出一个具有两个通用函数的类：

```
public ref class TargetInterface
{
public:
    static uint32_t buffer_length = 4096;
    TargetInterface();

    static bool Connect(char* deviceAdress);
    static void Disconnect(char* deviceAdress);

    generic<typename T>CommunicationState WriteProtobufMessage( T object);

    generic<typename T>CommunicationState ReadProtobufMessage([Out] T object);

}; 
```

dll编译良好。当我尝试在我的 C# 项目中使用此函数时，我收到错误：

```
WavelabsLightsourceSystem.TargetInterface.ReadProtobufMessage<T>(T)' is inaccessible due to its protection level 
```

这是我尝试使用 Funktions 的 c# 部分：

```
 pb_MessageHeader header = new pb_MessageHeader();
       TargetInterface target = new TargetInterface();

       target.ReadProtobufMessage<pb_MessageHeader>(header); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:11:44.333

根据 Hans Passants 的评论，我不得不`CommunicationState`公开枚举。

谢谢汉斯，你的水晶球是正确的。我做梦也没想到，我必须公开一个枚举。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T21:40:28.513

我遇到了同样的问题，但我的问题实际上是由于不同的项目针对不同的 .NET 框架，详见此处：

[添加对 MEF 插件项目的引用时，为什么会出现警告图标？](https://stackoverflow.com/questions/20186216/why-do-i-get-a-warning-icon-when-i-add-a-reference-to-an-mef-plugin-project)

# windows-phone-7 - VS2012 错误设置对 WP8 的 mvvmcross 的引用

> ID：14976712
> 
> 赞同：1
> 
> 时间：2013-02-20T09:45:27.610
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone, mvvmcross

我正在关注mvvmcross 的[本教程](https://github.com/slodge/MvvmCross/wiki/Tutorial-Part-1)，并且正在尝试使“Windows Phone UI”项目正常工作。但是，当我尝试设置对 mvvmcross 二进制文件的引用时，Visual Studio (2012 Premium) 显示错误：无法将对更高版本的引用或不兼容的程序集添加到项目中。

我正在使用教程中指定的 2013_01_28 的 mvvmcross 二进制文件，并安装了 Windows Phone SDK（7.1 和 8.0）。我已经尝试过 WP7.1 和 WP8 项目，但出现同样的错误。

我应该为 WP8 VS2012 使用不同的二进制文件吗？我在这里想念什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:05:27.643

我的猜测是您从 Internet 下载了文件，而 Windows 正在保护您免受邪恶侵害。

尝试解锁程序集：

[http://pcmusings.wordpress.com/2012/10/31/vs2012-windows-phone-and-the-reference-to-a-higher-version-error/](http://pcmusings.wordpress.com/2012/10/31/vs2012-windows-phone-and-the-reference-to-a-higher-version-error/)

# javascript - 在javascript中记录函数调用

> ID：14976716
> 
> 赞同：1
> 
> 时间：2013-02-20T09:45:39.363
> 
> 标签：javascript, v8

是否可以登录刚刚触发的函数的控制台名称（可能带有其参数）；

我在问 V8 引擎，也许有一个 chrome 开发工具插件，或者任何 Firefox 插件都可以。

# c# - 性能不佳的查询需要重写

> ID：14976719
> 
> 赞同：1
> 
> 时间：2013-02-20T09:45:51.810
> 
> 标签：c#, linq-to-entities

我有一段代码表现不佳，需要重写它以在启动 .ToList 之前引入适当的 where 子句，但是，这就是我卡住的地方。

目前代码看起来像这样（粗略地说，我已经去掉了一些搜索条件以使其更容易显示）

```
var Widgets = from b in _caspEntities.Widgets.Include("WidgetRegionLogs")
                    .Include("WidgetStatusLogs").Include("WidgetVoltageTests")
                        select b;

IEnumerable<Widget> results = Widgets.ToList();
if (comboBoxRegion.SelectedValue.ToString() != "0")
{
    results = from b in results
              where b.CurrentRegionLog != null && b.CurrentRegionLog.RegionId == int.Parse(comboBoxRegion.SelectedValue.ToString())
              select b;
}

if (comboBoxStatus.SelectedValue != null)
{
    results = from b in results
              where b.CurrentStatusLog != null && b.CurrentStatusLog.StatusId == comboBoxStatus.SelectedValue.ToString()
              select b;
}

if (txtCode.Text.Trim().Length > 0)
{
    results = from b in results
              where b.CodeNumber == txtCode.Text.Trim()
              select b;
}

dataGridViewWidget.DataSource = results.ToList(); 
```

我可以很容易地编写 SQL，本质上模型很简单，我有一个 Widget，它有一个 RegionLog 和一个 StatusLog，两者都存储历史记录。通过按 WidgetID 分组并选择最近的更新日期（然后转到区域和状态表以获取实际值），从中检索当前区域和状态。

所以，我需要把它翻译成 LINQ，但老实说，我没有任何线索，但我很肯并且愿意学习。在我的脑海中，我认为我需要添加一些更好的 where 子句，然后在应用 where 子句后执行 Widget.toList。我正在为`CurrentRegionLog`和`CurrentStatusLog`概念苦苦挣扎，因为在我运行`IEnumerable`.

如果有人能指点一下，不胜感激，谢谢

编辑 - 添加

```
 public BatteryRegionLog CurrentRegionLog
    {
        get { return _currentRegionLog; }
    }

    private BatteryRegionLog _currentRegionLog
    {
        get
        {
            if (this.BatteryRegionLogs.Count > 0)
            {
                BatteryRegionLog log = this.BatteryRegionLogs.OrderByDescending(item =>    item.LastModifiedDate).First();
                return log;
            }
            else
            {
                return null;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:51:56.873

尝试删除这一行：

```
IEnumerable<Widget> results = Widgets.ToList(); 
```

只需使用`Widgets`您在顶部获得的变量

`.ToList()`转到数据库并将所有数据具体化为实体。

如果您不调用查询，则子句`.ToList()`的查询仍然“打开”`where`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:53:19.380

您可以像这样编写查询：

```
 if (comboBoxRegion.SelectedValue.ToString() != "0")
    {
        var id = int.Parse(comboBoxRegion.SelectedValue.ToString()
        Widgets = from b in Widgets
                  let currentRegionLog = 
                        b.BatteryRegionLogs
                         .OrderByDescending(item => item.LastModifiedDate)
                         .FirstOrDefault()
                  where currentRegionLog.RegionId == id)
                  select b;
    }
    ... // Same for the other criteria.

    dataGridViewWidget.DataSource = Widgets.ToList(); 
```

在您执行之前不会执行整个查询`ToList()`。由于所有内容都转换为 SQL，因此您不需要 null check `b.CurrentRegionLog != null`。当`b.CurrentRegionLog.RegionId == id`没有`CurrentRegionLog`.

**编辑**

由于`CurrentRegionLog`是您的`Widget`类的计算属性，因此无法将其转换为 SQL。我努力将计算属性的代码以仅使用基本导航属性的方式合并到查询中，因此 EF 可以再次将其转换为 SQL。

# ruby-on-rails - 尝试 Find_by_id 时出错，出现一个额外的值（Ruby on Rails）

> ID：14976720
> 
> 赞同：0
> 
> 时间：2013-02-20T09:45:54.230
> 
> 标签：ruby-on-rails, ruby

我有一个返回这个的 POST 方法：

```
Request Parameters:

{"cm_test_ids"=>["1",
 "8",
 "9",
 "10",
 "11"],
 "commit"=>"Create",
 "authenticity_token"=>"WiBZQcZt2/Vi2RiFdFtaXnthClLsMubXe6sAhUzOPo8=",
 "id"=>"1",
 "cm_test_campaigns_object"=>{"cm_test_campaign_id"=>"1",
 "comments"=>"",
 "assigned_to_id"=>"6"}} 
```

在我的控制器应用程序中，我得到“cm_test_ids”，例如：

```
@ids_selected = params[:cm_test_ids] 
```

在这一点上我没有问题，我可以将这些 id (1,8,9,10,11) 保存在关系表中，但如果我尝试这样做：

```
@my_tests = CmTest.find(["id IN (?)", @ids_selected]) 
```

我收到此错误：

```
"Couldn't find all CmTests with IDs (0,1,8,9,10,11) (found 5 results, but was looking for 6)" 
```

它不退出的值“0”，我打印了数组@ids_selected，但我没有看到它，我不知道为什么总是在IDs数组的第一个位置添加一个“0”，知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T18:01:22.670

使用“解决”错误

```
CmTest.find_all_by_id(@ids_selected) 
```

但是 find 仍然返回 nil，我想我找到了问题所在，生成的查询有很多 "\n" ：

```
SELECT * FROM `cm_tests` WHERE (`cm_tests`.`id` IN ('id IN (?)','--- \n- \"1\"\n- \"8\"\n- \"9\"\n- \"10\"\n- \"11\"\n')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T13:01:26.187

你也可以试试

```
CmTest.where(id: @ids_selected ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T12:19:09.123

Rails 在每次多选之前生成一个隐藏字段：

[https://github.com/rails/rails/issues/5402](https://github.com/rails/rails/issues/5402)

看起来空白字符串在某处被转换为整数，这会给你一个零。您可能需要从参数中删除它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T11:35:46.247

你可以试试这个：

```
CmTest.find_all_by_id(@ids_selected) 
```

# java - 具有两个输出参数的 Spring-data-jpa NativeQuery

> ID：14976722
> 
> 赞同：2
> 
> 时间：2013-02-20T09:46:00.103
> 
> 标签：java, spring, jpa, stored-procedures, spring-data

我使用带有 spring-data-jpa 的 oracle 存储过程。在大多数情况下，它非常好，当它是一个函数或输出参数时，它是参数列表中的第一个。但是我有一些存储过程，输出参数是参数列表中的最后一个：

```
procedure get_data (some_val in varchar2 cur out sys_refcursor); 
```

或返回多个输出引用，例如

```
procedure get_my_data (cur1 out sys_refcursor, cur2 out sys_refcursor, some_val in varchar2); 
```

是否可以通过任何方式将它与 JpaRepository 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T21:08:52.683

好吧，如果您想从服务或实用程序类对 StoredProc 进行本地化调用，那么您可以将 Spring Jdbc 用于 StoredProc。实施见下文

```
public class StoredProcSampleTest extends StoredProcedure {
private static final String SPROC_NAME = "HH_EXTRACT.SAMPLE_TEST";
public StoredProcSampleTest(DataSource dataSource) {
    super(dataSource, SPROC_NAME);
    declareParameter(new SqlParameter("v_in_msg", Types.VARCHAR));
    declareParameter(new SqlOutParameter("v_out_msg", Types.VARCHAR));
    compile();
}

public  String  execute() {
    HashMap<String, Object> hmap = new HashMap<String, Object>();
    hmap.put("v_in_msg", "Suresh");
    hmap.put("v_out_msg", "");
    Map<String, Object> results = execute(hmap);
    String outRes = (String) results.get("v_out_msg");
    return outRes;    
} 
```

}

现在在您的实用程序类或服务类中，执行此操作

```
 protected StoredProcSampleTest storedProcSampleTest;

@Autowired
public void setDataSource(final DataSource dataSource) {
    this.storedProcSampleTest = new StoredProcSampleTest(dataSource);

} 
```

：

```
public String callStoredProcSampleTest(){
    return storedProcSampleTest.execute();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T13:28:59.717

最后，我自己找到了答案:)

我的情况是使用 spring-data 的[自定义实现](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/repositories.html#repositories.custom-implementations)的好点 你应该：

1.  使用您的新方法创建名为 YourRepository* *Custom* * 的接口（例如 EmployeeRepositoryCustom）
2.  为此接口创建一个名为 YourRepository* *Impl* * 的模拟（例如 EmployeeRepositoryImpl）
3.  在方法实现中，您可以使用 SimpleJdbcCall 来调用 Oracle 存储过程，例如
4.  ...
5.  利润！！！

注意：如果要使用默认配置，命名规则很重要

# php - 为最终集成到网站的 MySQL 和 Google Maps API 的数据集创建？（a la point-in-polygon，碰撞定理等）

> ID：14976724
> 
> 赞同：7
> 
> 时间：2013-02-20T09:46:07.503
> 
> 标签：php, mysql, google-maps, dataset, point-in-polygon

在过去的几个月里，我设法自学了 PHP、PDO 和 SQL，并按照 PHP/SQL 最佳实践构建了一个具有用户注册/电子邮件激活/和登录注销功能的基本动态网站。现在我被困在下一个任务上......

我创建了一个巨大的正方形/多边形数据集（300 万+），每 1 分钟的纬度和经度大小，存储在一个带有一组坐标（左上角）的 PHP 数组中。为了推断出一个类似正方形的形状，我只需在每个方向上添加 0.016 度（约 1 分钟）并生成其他 3 个坐标。

我现在需要检查所述阵列中的每个多边形是否至少在美国的某些土地上......即如果要生成我完成的数据集的图形输出并查看旧金山海岸线，他们会看到这样的[东西](https://i.stack.imgur.com/vrgwP.jpg)。

它类似于多边形中的点问题，除了它处理的是另一个多边形而不是一个点，另一个多边形是国家边界，我不只是在看交叉点。我想检查是否：

*   多边形/正方形与多边形相交。（想想海岸线/边界）。
*   多边形/正方形位于多边形内。（想想美国大陆）。
*   多边形/正方形包含多边形的一部分。（想想小岛）。

用我粗略绘制的图像说明了这一点：

![这并不容易！](../Images/07b1180352733f3c41610ed2448a3089.png)

如果它符合这三个条件中的任何一个，我想保留正方形。如果它无论如何都不与大多边形交互（即它在水面上），则丢弃它。

我在想大多边形将是美国的 shapefile，或者是一个 KML 文件，我可以从中剥离坐标以创建一个非常复杂的多边形。

然后，我想我会将这些匹配的正方形和正方形 ID 传递~~给 csv 文件，以便集成~~到包含每个正方形的一组坐标的 MySQL 表中（事实上，我什至不确定处理表的最佳实践MySQL 中的那个大小，但我会在需要的时候来讨论）。最终的目标是通过 Javascript 使用 Google Maps API 开发地图，以在我正在编码的网站上的地图上显示这些方块（显然只在视点内显示方块以确保我不会对我的数据库征税致死）。我很确定我也必须先通过 PHP 传递这些信息。但与实际制作所述数据集的任务相比，所有这些似乎都相对容易。

这显然是手工无法完成的事情，因此需要自动化。我知道一点Python，那会有帮助吗？关于从哪里开始的任何其他提示？有人愿意为我写一些代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:21:48.420

我认为this other question回答了你正在尝试做的很大一部分

[如何确定两个凸多边形是否相交？](https://stackoverflow.com/questions/753140/how-do-i-determine-if-two-convex-polygons-intersect)

另一部分是，如果您使用的是数据库，我会从两个集合（地图多边形的集合和您生成的其他多边形的集合）加载您视点附近的所有多边形，然后在这个较小的一组多边形，您可以生成一组应覆盖在地图上的所有多边形的列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T01:23:18.587

这是一个高效且实施起来尽可能简单的解决方案。请注意，我说的不是简单，而是尽可能简单。事实证明，这是一个棘手的问题。

1) 使用 Shapefiles 或 KFL 获取美国多边形数据，这将产生一组多边形形状（地块），每个形状由顶点列表定义。

2）为美国创建一组轴对齐边界框（AABB）矩形：一个用于阿拉斯加和每个阿拉斯加岛，一个用于每个夏威夷岛，一个用于美国大陆，一个用于每个沿海小岛美国大陆（例如，北卡罗来纳州的秃头岛，加利福尼亚海岸附近的卡塔利娜）。每个边界框被定义为一个矩形，其角是形状的最小和最大纬度和经度。我的猜测是会有几百个这样的。比如夏威夷的大岛，纬度是18°55′N到28°27′N，经度是154°48′W到178°22′W。在此步骤中，您的大多数全局纬度/经度对都会被丢弃，因为它们不在这几百个边界框中的任何一个中。例如，您的边界框位于 10°20'W，30°40' N（位于非洲拉斯帕尔马斯附近的大西洋中的一个点）不与夏威夷重叠，因为 10°20'W 小于 154°48'W。这一点在 Python 中很容易编写。

3）如果纬度/经度对确实与数百个 AABB 矩形之一重叠，那么您需要针对AABB 矩形*内*的单个多边形对其进行测试。为此，强烈建议使用 Minkowski 差分 (MD)。请先彻底检查本网站：

[http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/](http://www.wildbunny.co.uk/blog/2011/04/20/collision-detection-for-dummies/)

特别是，请查看页面中间的“poly vs poly”演示，并试一试。当你这样做时，你会看到当你取两个形状的 MD 时，如果那个 MD 包含原点，那么这两个形状是重叠的。因此，您需要做的就是取 2 个多边形的 Minkowski 差，这本身会产生一个新的多边形（B - A，在演示中），然后查看该多边形是否包含原点。

4）网上有很多关于实现MD的算法的论文，但我不知道你是否有能力阅读论文并将其翻译成代码。由于采用两个多边形的 MD（您正在测试的纬度/经度矩形，以及与纬度/经度矩形重叠的边界框中包含的多边形）是一个棘手的向量数学，并且您已经告诉我们您的经验级别还不高，我建议使用已经实现了MD的库，或者更好的是，实现了碰撞检测。

例如：

[http://physics2d.com/content/gjk-algorithm](http://physics2d.com/content/gjk-algorithm)

在这里，您可以看到相关的伪代码，您可以将其移植到 Python 中：

```
if aO cross ac > 0 //if O is to the right of ac
    if aO dot ac > 0 //if O is ahead of the point a on the line ac
        simplex = [a, c]
        d =-((ac.unit() dot aO) * ac + a)
    else // O is behind a on the line ac
        simplex = [a]
        d = aO
else if ab cross aO > 0 //if O is to the left of ab
    if ab dot aO > 0 //if O is ahead of the point a on the line ab
        simplex = [a, b]
        d =-((ab.unit() dot aO) * ab + a)
    else // O is behind a on the line ab
        simplex = [a]
        d = aO
else // O if both to the right of ac and to the left of ab
    return true //we intersect! 
```

如果您自己无法移植，也许您可​​以联系我在此处包含的 2 个链接的作者中的任何一个——他们都在 Flash 中实现了 MD 算法，也许您可​​以许可源代码。

5) 最后，假设您已经处理了碰撞检测，您可以简单地在数据库中存储一个关于纬度/经度对是否属于美国的布尔值。完成后，我毫不怀疑您将能够使用您的 Google 地图作品随心所欲地进行操作。

因此，总而言之，这里唯一困难的部分是 1) 实现碰撞检测 GJK 算法，或者，2) 编写一个算法，首先计算纬度/经度对与包含在其中的陆地多边形之间的 Minkowski 差异您的 AABB，然后查看该 MD 多边形是否包含原点。如果您使用这种方法，Ray Casting（典型的多边形内点解决方案）将在第二部分中发挥作用。

我希望这能让你朝着正确的方向开始！

# c# - 反序列化 JSON 格式的数据

> ID：14976725
> 
> 赞同：-1
> 
> 时间：2013-02-20T09:46:11.823
> 
> 标签：c#, json, serialization

我有一个 JSON 数据字符串，我通过 webrequest 在线检索到该字符串。我正在尝试解析字符串并将数据映射到我的数据结构上，但它不起作用......我之前也对其他映射使用了相同的方法，到目前为止效果很好。但在这种特殊情况下，它不起作用..

这是我检索到的 JSON 格式的字符串：

```
{"Item":{"FirstName":"Antônio","LastName":"da Silva","CommonName":null,"Height":"175","DateOfBirth":{"Year":"1978","Month":"6","Day":"13"},"PreferredFoot":"Left","ClubId":"1825","LeagueId":"20","NationId":"54","Rating":"70","Attribute1":"53","Attribute2":"68","Attribute3":"74","Attribute4":"73","Attribute5":"55","Attribute6":"56","Rare":"1","ItemType":"PlayerM"}} 
```

这是我解析字符串的类：

```
public class ParsePlayerInfo
{
    private PlayerClass playerInfo;

    public PlayerClass parse(string stringToParse)
    {
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        if ((stringToParse != null) && (stringToParse.Length > 0))
        {
            this.playerInfo = serializer.Deserialize<PlayerClass>(stringToParse);
        }
        return this.playerInfo;
    }
} 
```

这是我的播放器类：

```
public class PlayerClass
{
    public PlayerClass()
    {
        this.Player = new PlayerContents();
    }

    public PlayerContents Player { get; set; }
} 
```

这是我的播放器内容类：

```
public class PlayerContents
{
    public PlayerContents()
    {
        string str;
        this.ItemType = str = "";
        this.Rare = str = str;
        this.Attribute6 = str = str;
        this.Attribute5 = str = str;
        this.Attribute4 = str = str;
        this.Attribute3 = str = str;
        this.Attribute2 = str = str;
        this.Attribute1 = str = str;
        this.Rating = str = str;
        this.NationId = str = str;
        this.LeagueId = str = str;
        this.ClubId = str = str;
        this.PreferredFoot = str = str;
        this.Height = str = str;
        this.CommonName = str = str;
        this.FirstName = this.LastName = str;
        this.DateOfBirth = new DOB();
    }

    public string Attribute1 { get; set; }

    public string Attribute2 { get; set; }

    public string Attribute3 { get; set; }

    public string Attribute4 { get; set; }

    public string Attribute5 { get; set; }

    public string Attribute6 { get; set; }

    public string ClubId { get; set; }

    public string CommonName { get; set; }

    public DOB DateOfBirth { get; set; }

    public string FirstName { get; set; }

    public string Height { get; set; }

    public string ItemType { get; set; }

    public string LastName { get; set; }

    public string LeagueId { get; set; }

    public string NationId { get; set; }

    public string PreferredFoot { get; set; }

    public string Rare { get; set; }

    public string Rating { get; set; }
} 
```

编辑：

这是我的 DOB 课程：

```
public class DOB
{
    public DOB()
    {
        this.Year = this.Month = this.Day;
    }

    public string Day { get; set; }

    public string Month { get; set; }

    public string Year { get; set; }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:59:21.993

尝试重命名您的`Player`属性以匹配 JSON 中的属性，即`Item`

# ajax - IE跨域问题

> ID：14976726
> 
> 赞同：1
> 
> 时间：2013-02-20T09:46:11.547
> 
> 标签：ajax, internet-explorer, cross-domain

我正在处理一个需要跨域 ajax 的项目。为此我选择了cors。它在 chrome 和 firefox 中完美运行。但是在 IE 中，浏览器没有创建任何 ajax 调用。根本没有控制台错误。谁能告诉我一个解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:48:14.943

对于 IE，您不能使用普通的 ajax 进行跨域访问。为此，您需要使用 XDomainRequest()。例子：

```
xdr = new XDomainRequest();
        if (xdr) {
            xdr.onload = function () {
               alert(xdr.responseText);

            };
            xdr.open("get", url);
            xdr.send();
        } 
```

# php - 使用 PHP 检查表单是否已填写

> ID：14976728
> 
> 赞同：-5
> 
> 时间：2013-02-20T09:46:13.533
> 
> 标签：php, javascript, html

我有一个包含 400 多个带有值的隐藏字段的表单，这些值是我从 JavaScript 文件中获取的并将它们附加到 HTML 表中，然后我从 HTML 表单元格中获取这些值并将它们附加到隐藏字段并将它们发送到一个PHP文件。

除了这些字段之外，我还有一些其他字段，如公司名称、电子邮件等。它们不是隐藏字段，我需要在这里做的是：我想检查一个隐藏字段是否有值，如果有隐藏字段有一个值，那么只有电子邮件功能应该工作，如果所有隐藏字段都是空的，那么电子邮件不应该工作。请建议是否有任何简单的方法可以做到这一点。我认为为 400 个字段编写 if 条件不是一个好主意。

例如，我正在获取那些发布的值`$_POST`并将它们分配给 PHP 变量，我有 400 个变量，例如`$one`, `$two`, `$three`.., `$fourhundred`。

我需要写一个条件是否单个变量有值。

`if(strlen($one) > 0 || strlen($two) > 0 || and so on)`

有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:10:03.437

这些字段是否以任何合乎逻辑的方式命名？如果是这样，您可以使用循环轻松实现此目的。如果它们被命名为`email`，`company`等等。那么它将需要更多的工作。

我这样做的方式是使用您期望的所有 POST 数据名称的数组。

**例如：**

```
// Create an array of all of the expected variables
$expectedVars = array("email", "company", "anotherVariable");
$expectedVarNumbers = count($expectedVars);
$varsSoFar = 0;

foreach ($_POST as $key=>$var) {
    if (in_array($key, $expectedVars)) { // If this key is one of the expected vars
        $varsSoFar++;
    }
}

if ($varsSoFar == $expectedVarNumbers) {
    print("All fields have been correctly set!");
} else {
    print("At least one field is missing.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:27:09.050

使用数字命名。而不是 one_two_txt，只需使用 1_2。这样，您可以循环遍历它。

```
$filled = 1;
for($c = 0; $c <= 6; $c++)
{
    if($filled == 0)
    {
        break;
    }
    for($r = 0; $r <= 20; $r++)
    {
        if(strlen($_POST["" . $c . "_" . $r . ""]) <= 0)
        {
            $filled = 0;
            break;
        }
    }
} 
```

如果 $fill 等于 0，则有一个空字段，因此您可以将用户发布回表单或您想做的任何事情。

# objective-c - IOS 6 Objective-c xcode Storyboard, Login-flow, Navigation flow, screen flow

> ID：14976731
> 
> 赞同：-2
> 
> 时间：2013-02-20T09:46:24.893
> 
> 标签：objective-c, xcode, storyboard

我很绝望。多年来我一直试图弄清楚它，但我似乎无法找到答案。

我正在尝试创建与 Pintrest 相同的登录流程。谁能帮我？我试图弄清楚他们是使用导航控制器还是使用自定义导航的单个视图？

请帮忙，我真的想创造一些类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:01:41.067

`UINavigationController`与多个一起使用`UIViewControllers`

For `SIGNUP`-- 下一个屏幕被推送，`UINavigationController`其中包含一些背景图像（`UIScrollView`当然是在 上）；有两个`UIButton`- `Facebook`&&`Twitter` **此外**，它使用`UIButton`了**没有背景图像**的自定义`sign up with your email address`。

For `LOGIN`-- 下一个屏幕是通过`UINavigationController`背景图片组成的（这里没有使用 UIScrollView，简单的放在 UIViewController 的 View 上）；三个`UIButtons`带背景图片 -- `Facebook`&& `Twitter`&&`Email Address`

希望它可以帮助你开始。祝你好运。

# css - 我如何居中和对齐文本，就像在这张图片中一样？

> ID：14976734
> 
> 赞同：4
> 
> 时间：2013-02-20T09:46:31.197
> 
> 标签：css, image, alignment, center, justify

我已经查看了其他问题，但它们都是关于将左对齐文本的博客居中。我正在努力的是将文本居中并以给定的宽度证明它。

![下图是我在 Photoshop 中设计的一部分，我希望编写这样的代码](../Images/a35fd55abddee53e5968b45c12439a99.png)

这是我当前的 CSS 代码块：

```
#body-container .intro p {
    top: 20px;
    width: 80%;
    margin: 0 auto;
    font-weight: 300;
    font-size: 32px;
    text-align: justify;
} 
```

任何建议，非常感谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:04:18.637

这不是一个真正的解决方案，因为这似乎是实验性的，仅适用于 Firefox 和资源管理器：

```
-moz-text-align-last: center;
text-align-last: center; 
```

请参阅：[https ://developer.mozilla.org/es/docs/CSS/text-align-last](https://developer.mozilla.org/es/docs/CSS/text-align-last)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:53:34.213

很抱歉误解了评论中的问题。

段落的内容是动态的，还是固定的？

如果它已修复，您可以将最后一行包装在 span 标签中。

```
span {
    text-align: center;
    display: block;
    width: 100%
} 
```

我已经更新了小提琴：http: [//jsfiddle.net/FuvHt/7](http://jsfiddle.net/FuvHt/7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T03:04:09.770

现在唯一可靠的方法是将文本剪切为图像。

如果您的网站没有响应，您可以`<br />`在其中放置一个标签，`<span>`在最后一行换行，然后居中对齐该文本。

我真的很期待`text-align-last`css 属性被更广泛地采用。

# jquery - 单选按钮在支票上显示图像

> ID：14976741
> 
> 赞同：0
> 
> 时间：2013-02-20T09:46:57.857
> 
> 标签：jquery, css

我有一些单选按钮，当其中一个被选中时，单选按钮旁边会出现一个勾号，其余的都不会被选中。

单选按钮html和css如下

```
<input type="radio" name="InputName" value="ValueA" >

input[type="radio"]:checked + .icon {
background-image: url("../img/glyphicons-halflings.png");
} 
```

但是，我也使用 jquery 来更改其中一个单选按钮的选中状态，但我无法更改它。我的jQuery如下

```
$('[name="InputName" value="ValueA"]').attr('checked',true); 
```

有什么解决办法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:49:26.920

你应该这样调用：

```
$('[name="InputName"]').attr('checked',true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:50:18.627

使用[`prop()`](http://api.jquery.com/prop/).你可以做

```
 $('input[value="ValueA"]').prop('checked',true); 
```

如果你的价值是独一无二的......

**或者**

这个

```
$('input[name="InputName"][value="ValueA"]').prop('checked',true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:58:51.373

你应该试试这个，而不是`.attr('checked',true)`尝试`.attr('checked','checked')`

```
$('[name="InputName"][value="ValueA"]').attr('checked','checked'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T09:59:44.973

而是这样做：

```
$('[name="InputName" value="ValueA"]').attr('checked',true); 
```

做这个：

```
$(':radio:checked').addClass('icon'); 
```

* * *

请参阅以下粘贴代码[的演示：](http://jsfiddle.net/BFLvV/)

```
$(':radio').change(function () {
   $(':radio').removeClass('icon');
   $(':checked').addClass('icon');
}); 
```

* * *

`radios`是为此而制作的，`if you want to select only one option in a radio list`那么`just group them with same name`只有一个会被选中。

像这样：

```
<input type="radio" name="InputName" value="ValueA">
<input type="radio" name="InputName" value="ValueB">
<input type="radio" name="InputName" value="ValueC"> 
```

# c++ - 使用 ctypes 将 python 数组传递给 c++ 函数

> ID：14976743
> 
> 赞同：1
> 
> 时间：2013-02-20T09:47:01.570
> 
> 标签：c++, python, ctypes

我对这种扩展还是新手（尽管我在 C++ 和 python 方面有很好的背景）

我想要的是使用 ctypes 模块将数据传递给迄今为止对我有用的 C++ 函数示例：

测试.dll 文件

```
#define DLLEXPORT extern "C" __declspec(dllexport)

DLLEXPORT int sum(int a, int b) {
    return a + b;
} 
```

sum_test.py 文件：

```
from ctypes import cdll
mydll = cdll.LoadLibrary('test.dll')
mydll.sum(5, 3) 
```

结果是 8 效果很好...

注意：我正在使用它为搅拌机开发一个插件（插件），我将传递给 C++ 函数的数据是一个巨大的数组（元组或任何类型的数组），这些数据将被传递给 GPU 来处理它使用 OpenCL

主要是 C++ 中的工作流是传递一个指针（它将整个数组数据复制到 GPU）

所以问题是：在 C++ 中获取元组指针的最佳方法（也是最快的）（希望能解释在 python 和 C++ 中发生的事情）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:08:35.293

最简单的方法是告诉 ctypes 该函数需要一个指向特定类型数组的指针，在许多情况下 Python/ctypes 会找出其余的。

```
libc = CDLL('libc.so.6') # on Debian/Linux
printf = libc.printf
printf.restype = c_int
printf.argtypes = [POINTER(c_char), c_int]
printf('< %08x >', 1234) 
```

这假定该函数将仅采用一个指针。例如，如果您的函数恰好采用五个浮点数，您可以提供`c_float * 5`相应的参数类型。

# android - 错误无法执行此操作，因为连接池已关闭

> ID：14976746
> 
> 赞同：13
> 
> 时间：2013-02-20T09:47:09.160
> 
> 标签：android, sqlite

我正在使用 sqlite db 并使用 Alex LockWood 的一些代码[正确管理您的 SQLite 数据库](http://www.androiddesignpatterns.com/2012/05/correctly-managing-your-sqlite-database.html)

它工作得很好，但有时我得到了错误`"java.lang.IllegalStateException: Cannot perform this operation because the connection pool has been closed."` 这是完整的错误：

```
02-20 16:37:21.385: W/dalvikvm(25730): threadid=13: thread exiting with uncaught exception (group=0x41c122a0)
02-20 16:37:21.390: E/AndroidRuntime(25730): FATAL EXCEPTION: Timer-0
02-20 16:37:21.390: E/AndroidRuntime(25730): java.lang.IllegalStateException: Cannot perform this operation because the connection pool has been closed.
02-20 16:37:21.390: E/AndroidRuntime(25730):    at android.database.sqlite.SQLiteConnectionPool.throwIfClosedLocked(SQLiteConnectionPool.java:963)
02-20 16:37:21.390: E/AndroidRuntime(25730):    at android.database.sqlite.SQLiteConnectionPool.waitForConnection(SQLiteConnectionPool.java:678)
02-20 16:37:21.390: E/AndroidRuntime(25730):    at android.database.sqlite.SQLiteConnectionPool.acquireConnection(SQLiteConnectionPool.java:349)
02-20 16:37:21.390: E/AndroidRuntime(25730):    at android.database.sqlite.SQLiteSession.acquireConnection(SQLiteSession.java:894)
02-20 16:37:21.390: E/AndroidRuntime(25730):    at android.database.sqlite.SQLiteSession.executeForCursorWindow(SQLiteSession.java:834)
02-20 16:37:21.390: E/AndroidRuntime(25730):    at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:62)
02-20 16:37:21.390: E/AndroidRuntime(25730):    at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:143)
02-20 16:37:21.390: E/AndroidRuntime(25730):    at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:133)
02-20 16:37:21.390: E/AndroidRuntime(25730):    at com.uit.pokemon.DatabaseHandler.getStadiumStatusById(DatabaseHandler.java:533)
02-20 16:37:21.390: E/AndroidRuntime(25730):    at playground.RoomActivity.checkTable(RoomActivity.java:276)
02-20 16:37:21.390: E/AndroidRuntime(25730):    at playground.RoomActivity$6.run(RoomActivity.java:321)
02-20 16:37:21.390: E/AndroidRuntime(25730):    at java.util.Timer$TimerImpl.run(Timer.java:284)
02-20 16:37:21.460: I/timertask cancel(25730): canceled 
```

这是导致错误的代码：

```
public int getStadiumStatusById(int dataStadiumId){
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cur = db.rawQuery("SELECT " + keyStadiumId + " as _id, "
                + keyRoomName + ", " + keyP1Name + ", " + keyP1PokemonName
                + ", " + keyP1PokemonLevel + ", " + keyP1PokemonHp + ", "
                + keyP2Name + ", " + keyP2PokemonName + ", "
                + keyP2PokemonLevel + ", " + keyP2PokemonHp + ", "
                + keyTimeCreate + ", " + keyStadiumStatus + " from "
                + tbl_stadium + " WHERE " + keyStadiumId + " = " + "'"
                + dataStadiumId + "'", new String[] {});

        int stadiumStatus = 0;
        if(cur.getCount()>0)
        {
        cur.moveToFirst();
        stadiumStatus = cur.getInt(11);
        }
        db.close();
        cur.close();
        return stadiumStatus;
    } 
```

我用谷歌搜索了好几个小时，但没有结果。请帮我修复它。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-17T11:36:33.173

在您使用的代码中：

```
db.close();
cur.close(); 
```

最好的做法是先关闭游标，然后再关闭数据库，因为一旦调用`db.close()`，它会使数据库冻结 n 关闭，其对应的游标无效。试试这个改变它会起作用。

将其替换为：

```
cur.close();
db.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T08:37:58.210

我也在处理这个问题。我知道原因，很想听听专家对此的看法。我做了很多假设，并得出了一些没有证据支持的结论......

我认为异常是在“返回体育场状态”行中引发的。上面几行，您将此变量分配给 Cursor 的成员。我相信您实际上是在指定名称 StadiumStatus 以指向仅存在于游标内的 int 变量。另一种可能性（这里是逻辑的巨大飞跃）是 Cursor.getInt() 返回的项目实际上是指向开放数据库中的项目（方法？）的指针（它驻留在内存中，因为它是开放的。）无论哪种方式，当您关闭游标和/或数据库然后尝试返回 StadiumStatus 时，int 指向游标中的地址*或*由游标*传递*的地址，尝试跟随它，并在关闭的游标或关闭的数据库（一个其中是您从中提取的“数据池”。）

如果我是对的，我认为最好的解决办法是替换：

> “体育场状态 = cur.getInt(11);”

和：

> “体育场状态=新整数（cur.getInt（11））；”

从而在内存中创建一个新的 Integer，vm 可以轻松地将其转换为 int，并且仅依赖于其传统的可访问范围。

这个答案有意义吗？我确信提问者早就解决了这个问题，但我很想能够说我回答了 Stack Overflow 上的一个问题（或者被告知我为什么错了，并且对游标和数据库有更好的理解）。

编辑：这些答案暗示我可能是对的：
[Android错误：无法执行此操作，因为连接池已关闭](https://stackoverflow.com/questions/16067884/android-error-cannot-perform-this-operation-because-the-connection-pool-has-bee?rq=1)
[数据库关闭后光标是否仍然存在？](https://stackoverflow.com/questions/6513440/will-cursor-be-still-alive-after-database-is-closed)
在第二个答案中，享有盛誉的用户 DeeV 称 Cursors 为“持久连接”，暗示它不是从数据库返回值的简单集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-07T13:42:19.570

我遇到了这个问题，在这里解决了[java.lang.IllegalStateException: Cannot perform this operation because the connection pool has been closed](https://stackoverflow.com/questions/48622657/java-lang-illegalstateexception-cannot-perform-this-operation-because-the-conne)。就我而言，我分析了android的数据库框架。mime 的真正原因是我在许多用于保存和查询数据的存储对象中使用 SQLiteDatabase。由于 SQLiteOpenHelper 是单例的，因此 SQLiteDatabase 也是单例的。即使我在一个商店中添加了同步，它仍然在另一个商店中解锁。所以，如果我忘记在一个地方删除 SQLiteDatabase.close() ，它将导致 SQLiteConnectionPool 关闭。此外，我还添加了一些释放 SQLite 连接的方法。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-02T13:57:21.700

我发现在多线程中使用数据库时也会发生此异常。所以最好在和`synchronized`之间`db = helper.getXXXDatabase()`加上`db.close()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-31T22:41:28.063

类打开的数据库在`SQLiteOpenHelper`类的生命周期内保持打开状态。

所以不需要打开和关闭数据库。实际上如果在多个线程上使用，就会出错。

我的应用程序已经有一段时间没有数据库错误了，我有一个助手类。这需要是一个单例，所以 SqliteDatabase 的不同实例不要尝试同时修改文件。

此外，我曾经遇到的一些崩溃表明游标和查询都可以调用 sqlite 查询，因此允许对数据库进行并发读写访问是没有意义的。

出于这个原因，我向助手添加了一个读/写锁，并使用这种模式......

```
 public static class MyDbHelper extends SQLiteOpenHelper {
        private MyDbHelper (Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }
        public static MyDbHelper mInstance;
        private static Object mObj = new Object();
        public static MyDbHelper getInstance( Context context ){
            synchronized (mObj ){
                if( mInstance == null ){
                    mInstance = new MyDbHelper ( context );
                }
            }
            return mInstance;
        }
        private ReentrantReadWriteLock mLock = new ReentrantReadWriteLock();
        public Lock readLock() {
            return mLock.readLock();
        }
        public Lock writeLock() {
            return mLock.writeLock();
        } 
```

使用类是这样的......

```
 MyStorageContract.MyDbHelper helper = MyStorageContract.MyDbHelper.getInstance(this);
    SQLiteDatabase db = helper.getReadableDatabase();
    helper.readLock().lock();
    try {
        String[] columns = {
                MyStorageContract.Libraries.COLUMN_NAME_LIBRARY_ID,
                MyStorageContract.Libraries.COLUMN_NAME_LIBRARY_DIR,
                MyStorageContract.Libraries.COLUMN_NAME_LIBRARY_SOMETHING,
        };
        String result = null;
        Cursor c = db.query(MyStorageContract.Libraries.TABLE_NAME, columns, null, null, null, null, null, "1");
        int idxDir = c.getColumnIndex(MyStorageContract.Libraries.COLUMN_NAME_LIBRARY_DIR);
        int idxRoot = c.getColumnIndex(MyStorageContract.Libraries.COLUMN_NAME_LIBRARY_SOMETHING);
        int idxId = c.getColumnIndex(MyStorageContract.Libraries.COLUMN_NAME_LIBRARY_ID);
        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            result = c.getString(idxDir);
        }
        c.close();
        return result;
    }
    finally {
        helper.readLock().unlock();
    } 
```

* * *

## 回答 #6

> 赞同：-6
> 
> 时间：2013-09-27T05:28:02.723

称呼

`db.open()`

在这一行之后：

```
SQLiteDatabase db = this.getReadableDatabase(); 
```

但是，我个人不知道具体情况如何`this.getReadableDatabase()`，但我会制作自己的数据库适配器。有关详细信息，请参阅此链接：[http ://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

# python - 如何将 Python 文件文档字符串转换为 HTML

> ID：14976748
> 
> 赞同：2
> 
> 时间：2013-02-20T09:47:11.550
> 
> 标签：python, documentation

有没有一种简单的方法可以`.py`通过显示其函数 API 和`docstring`'s 来将 a 转换为 HTML？我阅读了 Sphinx - 但这似乎是一个大项目。我只是想找到一种方法来从`.py`仅具有函数定义和`docstring`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:39:36.740

你可以在没有任何工具的情况下做到这一点。首先，您需要获取数据。这是一个非常基本的例子：

```
"""My module"""

def foo():
    """Some function"""
    pass

def bar():
    """Another function"""
    pass

class Spam(object):
    """Some object"""
    pass

if __name__ == '__main__':
    import types

    defs = set(locals().keys()).difference(set(__builtins__.keys())) 

    if __doc__:
        print 'Module:'
        print __doc__, '\n'

    for name in defs:
        object_ = locals()[name]
        if type(object_) is types.FunctionType:
            print "Function %s:" % object_.__name__
            print object_.__doc__, '\n'
        elif type(object_) is type:
            print "Class %s:" % object_.__name__
            print object_.__doc__, '\n' 
```

输出将是：

```
Module:
My module 

Function bar:
Another function 

Class Spam:
Some object 

Function foo:
Some function 
```

要获取 html，您可以使用模板引擎，例如[Mako](http://www.makotemplates.org/)。制作一个模板并将数据传递`__doc__`给它，这应该可以完成这项工作。

**编辑：**这是从函数中获取签名的方法：

```
>>> def foo(spam, eggs):
...     bar = spam + eggs
...     return bar
>>> varnames = foo.func_code.co_varnames
>>> argcount = foo.func_code.co_argcount
>>> '%s(%s)' % (foo.__name__, ', '.join(varnames[:argcount]))
0: 'foo(spam, eggs)' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T11:07:09.257

我的手写 api 文档处理程序会做类似的事情。

```
import inspect
inspect.getmembers(MyClass, predicate=inspect.ismethod) 
```

将返回所有可用方法的列表。第一个对象是方法名称的字符串表示形式，因此您可以使用简单的过滤器函数来过滤掉其中的一些。我的 api 过滤掉以`_`（它们是内部方法，不能从 api 访问）开头的方法，比如

```
 filter(lambda x: not x.startswith('_'), [x[0] for x in inspect.getmembers(MyClass, predicate=inspect.ismethod)]) 
```

第二个对象是相关方法的实例方法。您可以使用它来调用`__doc__`以获取文档字符串或您可以使用方法实例调用的任何其他方法

```
for item in inspect.getmembers(MyClass, predicate=inspect.ismethod):
    print item[0]
    print item[1].__doc__ 
```

# java - eclipse中如何组织gae项目

> ID：14976752
> 
> 赞同：0
> 
> 时间：2013-02-20T09:47:20.023
> 
> 标签：java, eclipse, google-app-engine

我试图找到在 Eclipse 中使用 GAE 的 Google 插件来组织具有多个项目的 GAE 的方法：

*   包含 GAE Web 应用程序的 Web App 项目（一个 WebApp 项目）。
*   具有数据访问权限的 Java 项目
*   具有实用程序类的 Java 项目

我的问题是如何将事物联系在一起。我想在构建和执行路径中添加两个 Java 项目。由于 Web App 项目遵循 JavaEE 结构，因此只考虑 WEB-INF/lib 目录中指定的内容。

我想了解如何根据 Eclipse 工作区中存在的 Java 项目模拟此目录中的 Jar 文件，基于 GAE 的 Google Eclipse 插件提供的内容。

我在 WebApp 项目属性 Google > Web Application 中看到了一些似乎相关的内容，“禁止有关这些构建路径条目在 WEB-INF/lib 之外的警告”部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T11:54:59.067

要运行 GAE Web 应用程序，您需要分别包含在 WEB-INF/classes 或 WEB-INF/lib 文件夹中的项目中的类或 jar。

*   一种方法是构建您的数据和实用程序项目并将生成的 jar 放在 WEB-INF/lib 文件夹中。然后，您可以将这些 jar 作为库从您的 Web 应用程序中引用，一切都应该没问题。当然，手动操作有点累，所以你应该看看一些依赖管理工具。从个人经验来看，Ivy 和 IvyDE 很容易上手，并且应该可以满足您的需求，尽管 Maven 和其他人各有优势。
*   另一种更简单（但结构较少）的方法是在构建路径中使用链接源文件夹（指向数据和实用程序项目的源文件夹）。这样，Eclipse 会将这些子项目构建到 WEB-INF/类，并且构建和执行应该类似地工作。

# php - PHP ImageMagick 转换在 OSX 下不起作用

> ID：14976755
> 
> 赞同：2
> 
> 时间：2013-02-20T09:47:31.117
> 
> 标签：php, imagemagick, shell-exec

我在 OSX 下有一个 apache Web 服务器和一个安装和配置的 ImageMagick。如果我尝试从终端执行一些 ImageMagick 命令，它可以正常工作，但如果我尝试使用 PHP 中的 exec 或 shell_exec 执行此操作，它就不起作用。

这就是我所做的：我设置环境变量：

```
apache_setenv("PATH", "/etc/ImageMagick-6.8.1/bin:".apache_getenv("PATH")); 
```

并尝试执行一些命令：

```
exec('convert -version', $imgkOut); 
```

$imgkOut 数组始终为空。

我尝试设置两个路径：'convert ...'和'/etc/ImageMagick-6.8.1/bin/convert ...' - 没有任何帮助。

在 apache 日志文件中，我发现了这些错误：

```
sh: convert: command not found 
```

对于第一种情况，这是：

```
sh: /etc/ImageMagick-6.8.1/bin/convert: Permission denied 
```

第二个。

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:55:59.600

1.  你看到[http://php.net/manual/en/book.imagick.php](http://php.net/manual/en/book.imagick.php)了吗？
2.  尝试从 macports 安装 imagemagick - [http://www.macports.org/ports.php?by=name&substr=imagemagick](http://www.macports.org/ports.php?by=name&substr=imagemagick)
3.  检查 exec 的转换（也许文件没有 +x 标志？所以只需 chmod +x 转换）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:06:45.393

您得到的错误意味着：

1.  apache_setenv 命令不起作用。
2.  Web 用户无权运行该命令。

如果你这样做

```
 cd /etc/ImageMagick-6.8.1/bin
    chmod +x convert 
```

并再次尝试使用提供完整路径的第二个版本，它应该可以工作。

# c# - SQL Server CE 分布

> ID：14976764
> 
> 赞同：1
> 
> 时间：2013-02-20T09:48:02.473
> 
> 标签：c#, .net, linq, sqlite, sql-server-ce

我花了几天时间试图解决这个问题，但没有运气，我的要求非常简单——我想用**数据库**制作一个应用程序，它可以在大多数 PC 上运行（没有安装数据库服务器），我想使用**LINQ**。出于兼容性原因，我想使用**.NET framework 3.5**（每台 Windows 7 机器都有它）。

我尝试了 2 种方法：SQL Server CE 和 SQLite。

## SQL 服务器 CE

尽管 Visual Studio 不支持紧凑版 SQL 服务器的 LINQ，但我找到了简单的解决方法 - 使用 Visual Studio 中的 metal.exe 工具生成 .dbml 文件，然后将其拖到项目中。我的应用程序在我的机器上运行良好，但是当我将它复制到其他地方时，它会崩溃。我已经从 C:\Program Files (x86)\Microsoft SQL Server Compact Edition\3.5 复制了所有 dll 并尝试了 4.0。我认为问题是我的应用程序没有在其目录中寻找 dll（引用）。我设法使用 DataSets（没有 LINQ）让它工作，我在其中手动添加对 SQLServerCE 的引用并将 CopyLocal 检查为 true。但是当我使用 LINQ 时，项目引用中没有对 SQLServerCE 的引用并且它正在工作。我不知道如何改变它。还是其他地方有问题？

## SQLite

在长期使用 SQL Server CE 之后，我尝试了 SQLite。我对 .NET 中的 SQLite 支持有多差感到非常失望。我必须下载旧版本的 ADO.NET 提供程序（新版本不会将 SQLite 数据库添加到我的 Visual Studio 2010 中 - 我不明白为什么，但我用谷歌搜索它是正常的，我必须安装旧版本，然后将其替换为较新）。然后我下载了 dblinq（后来我发现这个项目已经死了），在弄乱了 dbmetal 和 dll 之后，我摆脱了 Visual Studio 中的错误并编译了我的应用程序。但我无法运行它，它总是在错误 40 时崩溃——就像没有 SQLite 服务器一样。当然我已经复制了所有的dll。即使在我的开发机器上我也无法运行它。

我很惊讶在 C# .NET 中创建简单的数据库应用程序几乎是不可能的，它不会打扰客户端与服务器等。

请问有没有人让 SQL CE 与 LINQ 一起工作，主要是让他的应用程序可分发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:27:36.717

我建议您尝试使用 nuget Entity Framework for SQL CE 包。它将下载所有必需的程序集以使其工作。 [http://nuget.org/packages/EntityFramework.SqlServerCompact/](http://nuget.org/packages/EntityFramework.SqlServerCompact/)

# android - 索尼爱立信 XPeria Android 2.3.4 中的 RadioButton

> ID：14976769
> 
> 赞同：0
> 
> 时间：2013-02-20T09:48:24.943
> 
> 标签：android

我无法通过 button.setBackgroundDrawable 更改 Sony Ericsson XPeria Android 2.3.4 中 RadioButton 的背景 有没有人遇到过这个问题？请与我分享。非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T06:09:18.570

我的解决方案：我必须通过扩展 RadioButton 类来制作自己的 RadioButton 并自己绘制它。

# sql-server-2008 - 从每月的指定周获取开始日期和结束日期

> ID：14976772
> 
> 赞同：2
> 
> 时间：2013-02-20T09:48:35.553
> 
> 标签：sql-server-2008, date

我需要从每月的指定（1/2/3/4/5）周找到开始日期和结束日期。这样我就可以获得 Date_Created 在指定（1/2/3/4/5）周内出现的记录。

例如，如果

```
I choose 1st week of febuary 2013 then 
I want startdate = 2/1/2013 and enddate = 2/2/2013
I choose 2nd week of febuary 2013 then 
I want startdate = 2/3/2013 and enddate = 2/9/2013 
```

休息周也是如此。

我在数据库端有 SQL Server 2008。如果有人有想法，请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T11:57:07.963

这是一个查询，用于获取给定月份的所有周开始和结束日期。所以你可以从这个查询周中选择你需要的：

[SQLFiddle 示例](http://sqlfiddle.com/#!3/d41d8/9211)

```
with C(i) as 
( select CAST('2013-02-01' as datetime) i
  UNION ALL
  select DATEADD (day,1,i) i from C 
    where DATEADD (day,1,i)
          <DATEADD(month,1,'2013-02-01')
), C1 as
(
select DATEPART(WEEK,i)-DATEPART(WEEK,'2013-02-01')+1 WeekOfMonth,i from C
)
select WeekOfMonth,min(i) StartDate, max(i) EndDate from C1 group by WeekOfMonth 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:32:41.553

我写了一个程序来解决我的问题，它将以周号（1/2/3/4/5）作为输入，并将返回开始日期和结束日期

```
ALTER PROCEDURE dbo.SPGetStartAndEndDateofSpcifiedWeek
    @Week int
AS
    SET NOCOUNT ON 
    DECLARE @date DateTime
    DECLARE @currdate DateTime
    DECLARE @startdate DateTime
    DECLARE @enddate DateTime
    DECLARE @CurrWeek int

    /*SET @date  = CONVERT(date,GETDATE())*/
    SET @currdate  = CONVERT(date,GETDATE())
    SET @CurrWeek = datediff(week, dateadd(week, datediff(week, 0, dateadd(month, datediff(month, 0, GETDATE()), 0)), 0), GETDATE() - 1) + 1

    IF (@Week = 1)
    BEGIN
        IF (@CurrWeek = 1)
        BEGIN SET @date = @currdate END
        IF (@CurrWeek = 2)
        BEGIN SET @date = @currdate - 7 END
        IF (@CurrWeek = 3)
        BEGIN SET @date = @currdate - 14 END
        IF (@CurrWeek = 4)
        BEGIN SET @date = @currdate - 21 END
        IF (@CurrWeek = 5)
        BEGIN SET @date = @currdate - 28 END
    END
    IF (@Week = 2)
    BEGIN
        IF (@CurrWeek = 1)
        BEGIN SET @date = @currdate + 7 END
        IF (@CurrWeek = 2)
        BEGIN SET @date = @currdate  END
        IF (@CurrWeek = 3)
        BEGIN SET @date = @currdate - 7 END
        IF (@CurrWeek = 4)
        BEGIN SET @date = @currdate - 14 END
        IF (@CurrWeek = 5)
        BEGIN SET @date = @currdate - 21 END
    END
    IF (@Week = 3)
    BEGIN
        IF (@CurrWeek = 1)
        BEGIN SET @date = @currdate + 14 END
        IF (@CurrWeek = 2)
        BEGIN SET @date = @currdate + 7 END
        IF (@CurrWeek = 3)
        BEGIN SET @date = @currdate END
        IF (@CurrWeek = 4)
        BEGIN SET @date = @currdate - 7 END
        IF (@CurrWeek = 5)
        BEGIN SET @date = @currdate - 14 END
    END
    IF (@Week = 4)
    BEGIN
        IF (@CurrWeek = 1)
        BEGIN SET @date = @currdate + 21 END
        IF (@CurrWeek = 2)
        BEGIN SET @date = @currdate + 14 END
        IF (@CurrWeek = 3)
        BEGIN SET @date = @currdate + 7 END
        IF (@CurrWeek = 4)
        BEGIN SET @date = @currdate END
        IF (@CurrWeek = 5)
        BEGIN SET @date = @currdate - 7 END
    END
    IF (@Week = 5)
    BEGIN
        IF (@CurrWeek = 1)
        BEGIN SET @date = @currdate + 28 END
        IF (@CurrWeek = 2)
        BEGIN SET @date = @currdate + 21 END
        IF (@CurrWeek = 3)
        BEGIN SET @date = @currdate + 14 END
        IF (@CurrWeek = 4)
        BEGIN SET @date = @currdate + 7 END
        IF (@CurrWeek = 5)
        BEGIN SET @date = @currdate END
    END

    Select  CONVERT(date, DATEADD(wk, DATEDIFF(wk, 0, @date), - 1)) as startdate,
               CONVERT(date, DATEADD(wk, DATEDIFF(wk, 0, @date), 5)) as enddate

    RETURN 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T06:51:50.047

我修改了 Valex 给出的代码以获得我需要的准确输出。

```
CREATE PROCEDURE dbo.SPReturnStartEndDateOfSpecifiedWeek
    @Week int,
    @P_startdate DateTime OUTPUT,
    @P_enddate DateTime OUTPUT
AS
    /* SET NOCOUNT ON */

    with C(i) as 
    ( 
      select CAST((DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)) as datetime) i
      UNION ALL
      select DATEADD (day,1,i) i from C 
      where DATEADD (day,1,i)<DATEADD(month,1,(DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)))
    ), 
    C1 as
    (
      select DATEPART(WEEK,i)-DATEPART(WEEK,(DATEADD(mm, DATEDIFF(mm, 0, GETDATE()), 0)))+1 WeekOfMonth,i from C
    ),
    C2 as
    (
        select WeekOfMonth,min(i) StartDate, max(i) EndDate from C1 group by WeekOfMonth
    )

    Select  @P_startdate = StartDate,
            @P_enddate = EndDate  
    from C2
    WHERE WeekOfMonth=@Week 

RETURN 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:42:25.397

你可以试试这个来获取一周的开始或结束日期。只需提供一个您可以找到日期的日期。

逻辑非常简单，只需获取一周的开始日期和结束日期，然后检查开始日期是否大于月份日期，如果是，则将月份日期作为周开始日期，否则将一周的开始日期。

摆弄一下以获得您想要的东西这是代码：

```
DECLARE @date datetime
SET @date = '2013-01-30'
DECLARE @startdate datetime
DECLARE  @enddate datetime
DECLARE @MonthStart datetime
Declare @MonthEnd datetime

SET @startdate = DATEADD(wk, DATEDIFF(wk, 6, @date), 6) 
SET @enddate =  DATEADD(dd,6, DATEADD(wk, DATEDIFF(wk, 6, @date), 6))
SET @monthStart = CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(@date)-1),@date),101)
SET @MonthEnd =CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(DATEADD(mm,1,@date))),DATEADD(mm,1,@date)),101)

--select @startdate wstart,@MonthStart monthstart,@enddate wend,@MonthEnd monthend
select  
[date] =  @date
,[week] = DATEPART(wk,@date)
,[WeekStartDate] = Case
                        WHEN @startdate <= @MonthStart then @MonthStart else @startdate  
                    END
,[WeekEndDate] = Case
                        WHEN @enddate > @MonthEnd then @MonthEnd else @enddate   
                    END 
```

看这里：

[小提琴](http://sqlfiddle.com/#!3/d41d8/9188)

# android - 背景可绘制对象定义视图大小

> ID：14976776
> 
> 赞同：17
> 
> 时间：2013-02-20T09:48:40.607
> 
> 标签：android

*为了清楚起见，这个问题已被显着编辑*。

假设我有一个 100x100px 的 .png 资源：
![在此处输入图像描述](../Images/6ecab321c45ea3ad3d3d4fec0fec2f8f.png)

我想将该图像用作我`TextView`的 s 的背景，其大小由其内容决定，该内容在运行时是可变的。特别是，我希望该图像在`TextView`尺寸大于 100x100px 时平铺，并且我希望在`TextView`小于 100x100px 时对其进行裁剪。

后者似乎是一个困难的问题。

## **示例代码**

我有一个可绘制的资源`bg_tile.xml`：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/bg"
    android:tileMode="repeat" /> 
```

我的布局文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="8dp"
        android:background="@drawable/bg_tile"
        android:text="Short text"
        android:textSize="20sp" />

    <TextView android:layout_margin="8dp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/bg_tile"
        android:text="Long text long text long text long text long text long text long text long text long textlong text long text long text long text long text long text long text long text long textlong text long text long text long text long text long text long text long text long text "
        android:textSize="20sp" />

</LinearLayout> 
```

## **发生了什么**

这是此代码结果的屏幕截图，也是我期望/想要的结果之一： ![在此处输入图像描述](../Images/eabfee3f5d1a392a460a6dd1e5a24ebe.png)

如您所见，平铺部分有效，底部瓷砖正在被切断。但是，当`TextView`小于背景时， 将`TextView`采用背景的大小。

## **建议的解决方案**

*   `android:gravity="clip_vertical|clip_horizontal"`- 这不起作用，即使没有 tilemode。
*   用作`match_parent`布局参数 - 不是一个选项。
*   设置固定高度 - 无法确定内容的`TextView`长度以及大小。

我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-25T17:55:52.250

我自己没有尝试过，但你可以试试这个想法/黑客/解决方法：

视图（TextView）的最小高度/宽度由其背景可绘制对象（除其他外）确定。它使用背景 Drawable 的 getMinimumHeight() 和 getMinimumWidth() 来确定 View 的最小高度和宽度。

看起来您希望 View 的最小高度和宽度为 0（不包括填充），并且 View 的宽度/高度应仅基于 View 的内容（在您的情况下为 TextView 的文本）。

在您的 Activity 的 onCreate 或 Fragment 的 onCreateView 中*尝试**此*操作，您可以在其中获取您尝试“修复”的 TextView。让我们将此 TextView 称为“电视”：

 *```
TextView tv; 
...
...
tv = (TextView)...findViewById(...);
....

// Swap the 'standard' bitmap background with one that has no minimum width/height.
BitmapDrawable background = (BitmapDrawable)tv.getBackground(); // assuming you have bg_tile as background.
BitmapDrawable newBackground = new BitmapDrawable(background.getBitmap) {
    @Override
    public int getMinimumWidth() {
        return 0;
    }

    @Override
    public int getMinimumHeight() {
        return 0;
    }
};
newBackground.setTileModeXY(background.getTileModeX(), background.getTileModeY());
tv.setBackgroundDrawable(newBackground);
...
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-01T11:21:20.373

这种方法对我有用。

1.  清除 TextView 背景
2.  （在 postRunnable 中）保存 TextView 的宽度和高度
3.  （在 postRunnable 中）为 TextView 设置新背景
4.  （在 postRunnable 中）将宽度和高度设置为 TextView

**例子**

```
public void setTextViewBg(final TextView textView, final Drawable newBgDrawable) {
    textView.setBackground(null);
    textView.post(new Runnable() {
        @Override
        public void run() {
            int width = textView.getWidth();
            int height = textView.getHeight();
            textView.setBackgroundDrawable(newBgDrawable);
            LinearLayout.LayoutParams layoutParams = (LayoutParams) textView.getLayoutParams();
            layoutParams.width = width;
            layoutParams.height = height;
        }
    });
} 
```

希望有帮助~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T22:48:48.503

我猜你的问题就在这里：

android:layout_width="wrap_content" android:layout_height="wrap_content"

它设置宽度来包裹内容，内容包括背景图片。我不确定您的视图的上下文是什么，但是如果您可以从代码或 xml 文件中设置高度，那么您的问题应该会消失。如果背景仍然不符合您的喜好，您可能还想添加 android:scaleType="centerCrop" 或 centerInside 作为 Houcine 提到的。

如果您告诉我们这些模糊观点的背景，我们或许可以为您提供更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T02:42:31.120

尝试这个：

```
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/bg_light"
    android:tileMode="repeat"
    android:gravity="clip_vertical|clip_horizontal" /> 
```

其他选项：http: [//developer.android.com/guide/topics/resources/drawable-resource.html#Bitmap](http://developer.android.com/guide/topics/resources/drawable-resource.html#Bitmap)

编辑：我阅读了文档，这不适用于 tileMode 集：

> `android:tileMode`
> 
> ```
> Keyword. Defines the tile mode. When the tile mode is enabled, the bitmap is repeated. Gravity is ignored when the tile mode is enabled. 
> ```

如果您提前知道视图的大小并且知道它会裁剪，您可以将一个 Bitmap-XML 用于 tileMode，另一个用于重力，然后使用适当的。不幸的是，不理想。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-22T23:12:35.420

你总是可以使用：

```
android:layout_width="match_parent"
android:layout_height="match_parent" 
```*

# actionscript-3 - 在位图平铺扑克/台球桌上创建光点效果 - 带有测试代码和屏幕截图

> ID：14976782
> 
> 赞同：1
> 
> 时间：2013-02-20T09:48:56.200
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4, blending

虽然我的简化测试用例（粘贴在下面）在 Flex 中，但我的问题实际上是 ActionScript 3 的问题。

我有一个小型纸牌游戏，我目前将背景绘制为看起来不太令人兴奋的绿色径向渐变：

![在此处输入图像描述](../Images/ac9b96db19248902ad71703523b9b1b4.png)

这是我非常简单的测试代码（只需将其放入新的 Flash Builder 项目中）：

**测试Bg.mxml**：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application 
    xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx"
    xmlns:comps="*">

    <comps:MyBg width="100%" height="100%" />

</s:Application> 
```

**MyBg.as**（自定义组件）：

```
package {
    import flash.display.GradientType;
    import flash.display.InterpolationMethod;
    import flash.display.Shape;
    import flash.display.SpreadMethod;
    import flash.geom.Matrix;
    import mx.core.BitmapAsset;
    import mx.core.UIComponent;

    public class MyBg extends UIComponent {
        [Embed('bg.png')]
        private static const BG_ASSET:Class;
        private static const BG:BitmapAsset = new BG_ASSET() as BitmapAsset;

        private static const COLORS:Array = [0xCCFFCC, 0x669966];
        private static const ALPHAS:Array = [1, 1];
        private static const RATIOS:Array = [0, 255];

        private var _matrix:Matrix = new Matrix();
        private var _bg:Shape = new Shape();

        override protected function createChildren():void {
            super.createChildren();
            addChild(_bg);
        }

        override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void {
            super.updateDisplayList(unscaledWidth, unscaledHeight);

            _bg.graphics.clear();
            //_bg.graphics.beginBitmapFill(BG.bitmapData);
            _matrix.createGradientBox(unscaledWidth, unscaledHeight, 0, 0, -unscaledHeight / 6);
            _bg.graphics.beginGradientFill(GradientType.RADIAL,
                COLORS,
                ALPHAS,
                RATIOS,
                _matrix,
                SpreadMethod.PAD,
                InterpolationMethod.LINEAR_RGB,
                0);
            _bg.graphics.drawRect(0, 0, unscaledWidth, unscaledHeight);
            _bg.graphics.endFill();
        }
    }
} 
```

我想使用无缝瓷砖而不是渐变：

**bg.png**：

![在此处输入图像描述](../Images/0aa02c2c04fab527d9c1125d6912bcb3.png)

**mask.png**（目前未使用）：

![在此处输入图像描述](../Images/a51d756ac40f2d9ad99eda15a90722a5.png)

[让我的背景看起来类似于这个 Stackoverflow 问题](https://stackoverflow.com/questions/6467732/drawing-game-center-like-tableview-cells)底部显示的（可以说）好看的 Apple Game Center 。

所以我取消注释`beginBitmapFill`上面的调用并注释`beginGradientFill`并得到以下黑暗和沉闷的背景：

![在此处输入图像描述](../Images/bf8a35ce4006753e9c7ea4f89d13f4dd.png)

**我的问题是：**如何在我的背景中添加一个亮点，使其整体看起来更轻一些？

我可以使用`mask.png`某种方式或者一些[blendMode](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#blendMode)吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:32:04.383

最简单的方法可能是在单独的形状中绘制渐变并将其添加到纹理背景上方的显示列表中。

您可以创建具有透明度的渐变，也可以创建为白色到黑色（或灰色到黑色）的渐变，并将 Shape 的 blendMode 设置为，例如`BlendMode.SCREEN`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T11:33:19.843

我会使用两层，一个`_bgTexture`只有你所拥有的纹理，一个`_bgShading`在你原来的基础之上有一些灰度照明，但是使用 a `blendMode`，`BlendMode.OVERLAY`然后稍微扩大径向渐变以避免锐利的边缘并添加一个内部阴影.

刚刚在 Flash IDE 中进行测试，我使用`COLORS:Array = [0xDDDDDD, 0x777777]`了作为`BackgroundTexture`类导出的纹理，以及基于您的以下方法`updateDisplayList`来获得这个：

![带照明覆盖的纹理背景。](../Images/4a5e2303701763d6c9a04f38224558b5.png)

```
function drawBG(unscaledWidth:Number, unscaledHeight:Number):void {
    _bgShading.graphics.clear();

    _matrix.createGradientBox(unscaledWidth * 1.2, unscaledHeight * 2.2, 0, -unscaledWidth * 0.1, -unscaledHeight * 0.8);
    _bgShading.graphics.beginGradientFill(GradientType.RADIAL,
        COLORS,
        ALPHAS,
        RATIOS,
        _matrix,
        SpreadMethod.PAD,
        InterpolationMethod.LINEAR_RGB,
        0);
    _bgShading.graphics.drawRect(0, 0, unscaledWidth, unscaledHeight);
    _bgShading.graphics.endFill();

    _bgShading.filters = [new DropShadowFilter(0, 0, 0x000000, 1.0, 10.0, 10.0, 1.0, 3, true)];

    _bgTexture.graphics.clear();
    _bgTexture.graphics.beginBitmapFill(new BackgroundTexture());
    _bgTexture.graphics.drawRect(0, 0, unscaledWidth, unscaledHeight);
    _bgTexture.graphics.endFill();

    _bgShading.blendMode = BlendMode.OVERLAY;
} 
```

# node.js - Redis 发布/订阅数据持久化

> ID：14976784
> 
> 赞同：0
> 
> 时间：2013-02-20T09:49:03.023
> 
> 标签：node.js, redis

我正在使用节点 js 和 redis 实现一个 TCP 聊天服务器，但是我似乎无法使用发布和订阅将聊天数据保存在 redis 上，因此当我离开聊天室并重新进入时，我不会在最新消息，我应该如何实现这样的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:11:53.780

Publish 并不意味着存储在 Redis 中，即使您选择了磁盘存储。当它收到消息时，它只是找到与请求通道的连接并转发到每个通道。所以，它不存储任何东西。即使这样做了，它也应该不断尝试转发消息（因为它是一个发布/订阅模型），这不是很有效。相反，您还应该推送（通过[将](http://redis.io/commands/lpush)消息推送到队列，以便可以存储它们。当客户端连接并且没有消息时，它可以从队列中检索这些消息（不弹出，因此其他新手也可以使用）和然后订阅频道并接收新消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:54:55.157

默认情况下，redis 仅在内存中。您必须明确启用持久性。

有多种选择，AOF 每个查询是最安全的，但可能是最慢的。

更多细节在这里：[http ://redis.io/topics/persistence](http://redis.io/topics/persistence)

# c# - 如何在窗体应用程序中创建动态链接标签

> ID：14976785
> 
> 赞同：0
> 
> 时间：2013-02-20T09:49:03.040
> 
> 标签：c#, winforms, events

单击 Go 按钮时，文本框中给出的名称应显示为链接标签，并且应动态增加。

这是我的代码：

```
private void buttongo_Click(object sender, EventArgs e)
{
   linkLabelName.Text = textBoxName.Text;               
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:04:05.487

```
 private void btnGo_Click(object sender, EventArgs e)
        {
            LinkLabel link = new LinkLabel();
            link.Text = txtText.Text;
            panTable.Controls.Add(link);
        } 
```

# java - 在一个多部分响应中发送模型对象和二进制流

> ID：14976786
> 
> 赞同：1
> 
> 时间：2013-02-20T09:49:14.837
> 
> 标签：java, multipart, http-streaming

我目前正在从公司网络配置的更改中恢复，当用户通过 VPN 连接时，该更改破坏了我的文档管理应用程序中的文件传输。富客户端和我的应用服务器之间的通信使用Springs HttpInvoker实现，文件传输使用RMIIO。RemoteInputStream 只是我模型对象上的一个属性，它代表我传输的文件。

所以无论如何，我必须替换 RMIIO（DirectRemoteInputStream 不是这里的解决方案）并使用纯 HTTP 流。我想将流中的序列化模型对象和二进制数据发送到服务器，到目前为止使用多部分请求可以正常工作：

```
HttpClient client = new DefaultHttpClient();
HttpPost post = new HttpPost(...);

MultipartEntity multipartEntity = new MultipartEntity();
InputStreamBody filePart = new InputStreamBody(new FileInputStream(file), "application/octet-stream", file.getName());
// this is my model object
byte[] serializedFileObject = serializeObject(fileObject);

multipartEntity.addPart("file", filePart);
multipartEntity.addPart("fileObject", new ByteArrayBody(serializedFileObject, "fileObject.ser"));
post.setEntity(multipartEntity);

HttpResponse response = client.execute(post);
EntityUtils.consume(response.getEntity()); 
```

工作正常，我可以将模型对象和二进制数据发送到应用程序服务器。但是如何做相反的事情——在一个响应中返回一个模型对象和二进制数据？我读到了多部分响应以及它们如何被多个浏览器使用，但是如何使用 commons-httpclient 实现它 - 甚至更甜，使用 springs RestTemplate？

# jquery - jQuery.animation() iPad 移动到没有动画的端点

> ID：14976787
> 
> 赞同：0
> 
> 时间：2013-02-20T09:49:17.357
> 
> 标签：jquery, ipad, jquery-animate

我在 iPad 上获得流畅的 jQuery.animate({left:$VariablePixels}) 动画时遇到了一些麻烦。实际上，它根本不是动画：它只是跳到动画的终点。

情况是这样的：图形中有一个指针，它会自动沿着图形移动。根据指针指向的“框架/图形部分”，显示附加信息。问题是这些图有很多，而且帧数不同。少则二十，多则五千。它在我的电脑上完美运行。Firefox、chrome、safari、IE7 及更高版本，一切都很好。但不是在 iPad 上。

我试过使用 jquery.mobile 库。没有不同。我试过使用 CSS transform:translate() 和它的对应物。没用。

```
.css({'transform':'translate(' + Loc_New + 'px,0px)',
 'transition': 'all ' + Speed + 's ease-in-out'}); 
```

指针确实移动了，但过了一会儿它开始来回移动，没有去任何地方，更不用说朝着正确的方向了。起初我认为这是因为动画花费的时间比“帧”花费的时间长，但即使将速度减半也无法解决问题。

我尝试使用指针元素的“宽度”而不是“左侧位置”，效果更好，因为它不会像大黄蜂那样来回移动，但动画远非流畅，而且出现了一些问题。

问题：如何让指针在 iPad 上顺畅移动？除了包含它之外，我是否必须对 jquery.mobile 做一些特定的事情？是否有另一种类型的 css 动画可能对我有用？还是有另一种解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:52:38.360

阅读这篇文章，你就会上路：[http ://coding.smashingmagazine.com/2013/01/15/off-canvas-navigation-for-responsive-website/](http://coding.smashingmagazine.com/2013/01/15/off-canvas-navigation-for-responsive-website/)

# magento - magento - where did theme-related files and folders inside includes/src come from?

> ID：14976789
> 
> 赞同：0
> 
> 时间：2013-02-20T09:49:18.963
> 
> 标签：magento

New to Magento here, please bear with me.

I installed a theme on Magento, which has these folders: `app`, `js`, `skin`, which is the usual. However, when I tried to uninstall the theme, I found that there files and folders for the theme have been created inside `includes/src` folder. Where did they come from, when the downloaded zip file of the theme didn't contain them?

I noticed this only happens to some themes installed. I know the files are related to the theme because the folder names inside `includes/src` are the developer and theme names.

Any ideas?

Magento (Enterprise 1.12)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:10:24.457

When you enable your compilation, Magento gets all the class and compiles them and puts them in `includes/src` directory. You can see all of your classes sitting there if you have your compilation on.

Check this in-depth details on Compilation by Alan Storm: [http://alanstorm.com/magento_compiler_path](http://alanstorm.com/magento_compiler_path)

# android - 如何在 Android 中混合来自 midi 文件的音频文件和音乐？

> ID：14976804
> 
> 赞同：5
> 
> 时间：2013-02-20T09:50:21.253
> 
> 标签：android, audio, midi

[我可以使用SoundPool Class](http://developer.android.com/reference/android/media/SoundPool.html)一次播放音频（mp3、wav 等）和 midi 音乐（.mid）。但是我怎样才能将输出（音频文件 + midi 音乐的混音器）保存到音频文件（mp3、wav 等）中。

请建议我实现这一目标的最佳方法。提前致谢。

# c# - 计算代码到一个新的class.cs

> ID：14976807
> 
> 赞同：0
> 
> 时间：2013-02-20T09:50:36.390
> 
> 标签：c#, .net

我想将我的代码设置为另一个类，例如：一个新类`AgeCalculate.cs`，我如何将数据从`AgeCalculate.cs`我的`Button_Click`事件中获取。

例子：

`AgeCalculate Calculate = new AgeCalculate();`?

从班级到Form1 =？

我的代码现在在`button_Click`.

```
 double startkapital = 0;
        double procentsats = 0;
        int år = 0;
        double kapital = 0;

        startkapital = int.Parse(sKapTxt.Text);
        procentsats = int.Parse(proSatsTxt.Text);

        kapital = startkapital;

        while (kapital < startkapital * 2)
        {
            kapital = kapital * (1 + procentsats / 100);
            år = år + 1;

            listBox1.Items.Add("Årtal: " + år);
            listBox1.Items.Add("Kapital: " + kapital + "kr ");
            listBox1.Items.Add(" ");
        }

        listBox1.Items.Add("Totalt antal år: " + år + "år ");
        listBox1.Items.Add("Total kapital: " + kapital + "kr ");
        listBox1.Items.Add(" ");

        double exaktaåret = år / ((100 + procentsats) / 100);

        listBox1.Items.Add(string.Format("Kapitalet fördubblades efter {0:0} år", exaktaåret));

        if (kapital >= 2 * startkapital)
        {
            listBox1.Visible = true;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:03:00.480

首先，在您`button_Click`的代码背后`C#`事件下，您需要创建一个`AgeCalculate.cs`. 我不确定这是否是正确的方法，`C#`但在这里：

```
 AgeCalculate calc = new AgeCalculate(); 
```

然后，您使用您创建的对象调用一个函数，该函数返回如下计算的年龄：

```
 calc.FunctionName; 
```

但首先，请确保您的班级中`AgeCalculate`有`Function`一个`return`可以返回计算年龄的。然后一旦你这样做`calc.FunctionName`，计算的年龄将被返回。

**例子：**

**在 AgeCalculate.cs 中**

```
public string calc(string value1)
{
    //calculate age
    String str = calculated age;
    return str;
} 
```

**在`C#`**

```
AgeCalculate calculate = new AgeCalculate();

calculate.calc(pass the argument you will use to calculate age); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:18:11.183

您可以在 AgeClass 中创建一个`public property`并在您的按钮单击中获取该属性。

# dynamics-crm-2011 - Dynamics CRM 2011 在合并联系人时运行工作流/流程

> ID：14976810
> 
> 赞同：2
> 
> 时间：2013-02-20T09:50:42.713
> 
> 标签：dynamics-crm-2011, crm, microsoft-dynamics

合并联系人记录时，从属记录的所有者会失去与主记录的关系，并且可能会失去来自 Outlook 的联系人，因为 CRM 和 Outlook 之间的同步会根据所有权或与基础记录的其他连接进行筛选。

合并记录后，我想运行一个工作流/流程（之前或之后），在“丢失”所有者和主记录之间创建连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T15:17:23.260

合并记录时，Master 存储在从属记录的 Master ID 字段中，因此您可以创建在记录状态更改时在联系人实体上运行的工作流。

![在此处输入图像描述](../Images/d5c33d9783dc18c5b4d479d10e6d7396.png)

添加检查条件步骤以检查 Master ID 是否包含数据以及 Contact 状态是否处于非活动状态（这将防止在仅停用记录时创建连接）

![在此处输入图像描述](../Images/08bf88c27ad821c07638cf2a30fdf07d.png)

![在此处输入图像描述](../Images/54b19b9fe263db1d5efa4a1f51c538ec.png)

如果满足在记录所有者和主 ID 之间创建连接的条件，则添加另一个步骤

# bitbucket - 有没有办法使用他们的 API 重命名 Bitbucket 上的存储库

> ID：14976812
> 
> 赞同：34
> 
> 时间：2013-02-20T09:50:49.893
> 
> 标签：bitbucket, bitbucket-api

我在文档中甚至找不到任何与远程相关的东西。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-03-17T00:01:49.793

使用 Bitbucket 网站，您可以按如下方式重命名存储库：

1.  转到 repo 的概述页面，通常`https://bitbucket.org/username/oldname/overview`
2.  单击菜单行最右端的设置齿轮！
3.  `'r'`您可以键入then来代替 1\. 和 2.`'a'`进行管理。
4.  更改`Name`字段中的名称。
5.  点击`Save repository details.`

请注意，更改 repo 的名称也会更改其 URL 访问权限。以前访问是`https://username@bitbucket.org/username/oldname.git`现在，但是，repo 的 URL/路径将是`https://username@bitbucket.org/username/newname.git`

您可以通过返回概览页面并将鼠标悬停在蓝色的大 HTTPS 按钮上来检查这一点。浏览器底部将显示它现在指向`https://username@bitbucket.org/username/newname.git`

如果您使用的是 SourceTree，您可以通过突出显示 SourceTree 中的本地 repo 来更新远程的 URL，然后

1.  点击`Repository`
2.  点击`Repository Settings...`
3.  突出显示包含远程分支的行。通常`origin https://username@bitbucket.org/username/oldname.git`
4.  点击`Edit`
5.  更新`URL/Path`字段。将“oldname.git”更改为“newname.git”，其余保持不变。所以完整的路径应该是`https://username@bitbucket.org/username/newname.git`
6.  点击`OK`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-20T09:57:49.543

## 对于 API 1.0 版：

根据[https://confluence.atlassian.com/display/BITBUCKET/repository+Resource+1.0](https://confluence.atlassian.com/display/BITBUCKET/repository+Resource+1.0)：

```
PUT https://api.bitbucket.org/1.0/repositories/{accountname}/{repo_slug} --data "name=new name" 
```

这允许更新存储库的可见名称。

## 对于 API 的第 2 版：

根据[https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Bworkspace%7D/%7Brepo_slug%7D#put](https://developer.atlassian.com/bitbucket/api/2/reference/resource/repositories/%7Bworkspace%7D/%7Brepo_slug%7D#put)

```
PUT https://api.bitbucket.org/2.0/repositories/{workspace}/{repo_slug} 
```

使用 PUT 方法允许重命名存储库。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-19T13:08:47.553

在 unix shell 中，您可以使用 cURL；

```
curl https://api.bitbucket.org/1.0/repositories/{accountname}/{old_repo_name} --data "name=new_repo_name" -X PUT 
```

用户是否可以在私有存储库中进行身份验证，但仍然只有管理员能够执行：

```
curl https://USER:PASS@api.bitbucket.org/1.0/repositories/{accountname}/{old_repo_name} --data "name=new_repo_name" -X PUT 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-13T23:10:41.843

根据最新的 API，这里是正确的 curl 命令：

```
curl -X PUT --user username:password https://bitbucket.org/api/1.0/repositories/{accountname}/{repo_slug}  --data "name=newRepoName" 
```

请注意，repo_slug 是小写的存储库名称。如果你不把它全部用小写，你会得到不那么有表现力的答案“未找到”。

如果您不确定什么是存储库 slug，请执行以下命令，该命令会显示用户信息，包括当前存储库，并查找“slug”字段

```
curl --user username:password https://bitbucket.org/api/1.0/user 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-03-19T15:25:17.967

以防万一有人在寻找旧版本的 bitbucket API（在我的情况下是 5.14.0）的解决方案时说这个版本的文档缺乏，这是非常礼貌的。

```
curl --location --request PUT 'https://git.local.install/rest/api/1.0/projects/aa/repos/my-repo' \
--header 'Content-Type: application/json' \
--header 'Authorization: Basic .....' \ 
--data-raw '{"name":"my-new-name"}' 
```

# ajax - 使用 Ajax 查询字符串到 url

> ID：14976815
> 
> 赞同：0
> 
> 时间：2013-02-20T09:51:18.580
> 
> 标签：ajax, jquery

我想根据一些复选框更新我的网址...

我现在有一个看起来像的网址`www.mywebsite.com/index.php?city=Amsterdam`

我用来从 mysql 获取数据并将其显示在我的页面上的城市参数。在页面上，我还有一些复选框。如果用户单击复选框，刷新页面并使用新 url 对数据库进行新查询，我想更新 url。

在[http://api.jquery.com/serialize/](http://api.jquery.com/serialize/)上，我找到了我喜欢的东西；）底部的示例显示了我想要的。仅此示例显示结果。有人可以帮我在 url 中得到那个结果吗？

所以点击一些复选框后，我想要一个看起来像的网址`www.mywebsite.com/index.php?city=Amsterdam&single=Single2&multiple=Multiple3&radio=radio1`

我知道 PHP，但我对 jquery 和 ajax 的了解是 0 ;) 我用谷歌搜索，但几个小时后我仍然没有找到任何有用的东西。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:57:55.587

尝试这个

```
 $.ajax({
     url:"www.mywebsite.com/index.php"; // path to your url
     type: "get", //post or get
     data:$('#yourFormID').serialize(),
     success:function(){   //function called when ajax is completed
        alert('done');
     }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:28:31.230

如果您需要使用新的 url 刷新页面，则需要在用户单击复选框并更新 url 时序列化表单（更新 url 将刷新页面，如果您不想刷新页面，则必须用户pushstate 功能或 url 中的哈希）。

尝试这个：

```
 var $form = $('form');
    $('#my-checkbox').on('click', function() {
        window.location.search = '?' + $form.serialize();
    }); 
```

# sql - 使用临时表的查询

> ID：14976817
> 
> 赞同：1
> 
> 时间：2013-02-20T09:51:22.563
> 
> 标签：sql, temp-tables, sql-types

```
SELECT 1 
FROM geo_locationInfoMajor_tbl 
WHERE geo_locationInfoM_taluka IN(SELECT * from #temp 
```

我创建了一个临时表，它从前端获取它的值..使用我将值插入临时表的函数...现在临时表中的数据是混合的...它可以是整数或 varchar..当我只将 int 或 varchar 传递到临时表中，这很好。但是如果输出是混合的，查询会抛出一个错误..如何处理这个？将 varchar 值“English”转换为数据类型 int 时转换失败。

这很好-->

```
#temp
1 
```

这不是-->

```
1
English 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:55:52.337

您的临时表中有多少个值？如果你想使用 IN 子句，你应该只使用与你的 geo_locationInfoMajor_tbl 相同的一列。

试试这个：

```
SELECT * FROM geo_locationInfoMajor_tbl 
WHERE geo_locationInfoM_taluka IN (SELECT geo_locationInfoM_taluka from #temp) 
```

# android - Android：尝试使用本机表面时，mSurface 出现 java.lang.NoSuchField 异常

> ID：14976823
> 
> 赞同：0
> 
> 时间：2013-02-20T09:51:52.720
> 
> 标签：android, android-ndk, stagefright

我想从本机代码提供表面缓冲区。所以我从 SurfaceView 的 SurfaceHolder 的 getSurface 方法中得到了表面。现在我想要的是从本机使用它来提供缓冲区来渲染图像。我已经包含了 SurfaceClinger/Surface.h。但是当我尝试获取 mSurface 属性时，它会抛出错误，说 java.lang.NoSuchFieldException for mSurface。在这方面的任何建议都会有所帮助。

代码片段：

```
Surface       mSurface;
SurfaceHolder mSurfaceHolder;

mSurface = mSurfaceHolder.getSurface();

try{
    class myClass = mSurface.getClass();
    String fieldName = "mSurface";
    Field field = myClass.getDeclaredField(fieldName);
    field.setAccesssible(true);
    int surfacePtr = field.getInt(mSurface);
    nativeInterface.DrawOnSurface(surfacePtr);
}
catch(Exception ex){} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T06:18:40.753

从姜饼开始，字段名称就不同了。通过将字段名从“mSurface”替换为“mNativeSurface”，问题就解决了。对于 froyo 及以下 'mSurface' 将起作用。

# jsf - 如何获取 jenkins 版本号、svn 修订号...并将其显示在我的 JSF 页面上？

> ID：14976824
> 
> 赞同：9
> 
> 时间：2013-02-20T09:51:53.573
> 
> 标签：jsf, maven, build, jenkins, hudson

我有一个 JSF、Spring、Hibernate 项目。在页面底部，我必须有版本号。使用 jenkins(hudson) 我已经安装了 "Parameterized Build" 。但它似乎不起作用。如何获取 jenkins 内部版本号、maven 项目版本、svn 修订号并将其显示在我的 JSF 页面上？

我在网上找不到有用的例子。

谢谢

主要/资源/com/example/build.properties

```
custom_version  = Test 1.0
pom_version     = ${pom_version}
svn_revision    = ${svn_revision}
build_tag       = ${build_tag}
build_number    = ${build_number}
build_id        = ${build_id} 
```

面孔-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config version="2.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd">

    <application>
        <resource-bundle>
            <base-name>com.example.build</base-name>
            <var>build</var>
        </resource-bundle>
    </application>

</faces-config> 
```

版本.xhtml

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    >
    <center>

        <p>Version:  #{build['custom_version']}.#{build['build_tag']}.#{build['build_number']}.#{build['build_id']}.#{build['svn_revision']}</p>

    </center>

</ui:composition> 
```

**这是我的工作解决方案：**

主要/资源/com/example/build.properties

```
custom_version  = ${env.CUSTOM_VERSION}
custom_message  = ${env.CUSTOM_MESSAGE}

pom_version     = ${pom.version}
pom_name        = ${pom.name}
pom_description = ${pom.description}

svn_revision    = ${env.SVN_REVISION}
build_tag       = ${env.JOB_NAME}
build_number    = ${env.BUILD_NUMBER}
build_id        = ${env.BUILD_ID} 
```

pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.example</groupId>
    <artifactId>jenkins_build_deploy</artifactId>
    <packaging>war</packaging>
    <version>1.0.0</version>
    <name>jenkins_build_deploy</name>
    <description>jenkins_build_deploy application</description>
    <url>http://example.com/jenkins_build_deploy</url>

    <scm>
        <url>http://127.0.0.1/dummy</url>
        <connection>scm:svn:http://127.0.0.1/dummy</connection>
        <developerConnection>scm:svn:https://127.0.0.1/dummy</developerConnection>
        <tag>HEAD</tag>
    </scm>

    <build>
        <finalName>jenkins_build_deploy</finalName>

        <resources>
            <resource>
                <directory>${basedir}/src/main/resources</directory>
                <filtering>true</filtering>
                <includes>
                    <include>**/*.properties</include>
                </includes>
            </resource>
            <resource>
                <directory>${basedir}/src/main/resources</directory>
                <filtering>false</filtering>
                <excludes>
                    <exclude>**/*.properties</exclude>
                </excludes>
            </resource>
        </resources>

        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1-alpha-2</version>
                <configuration>
                    <webappDirectory>${project.build.directory}/${project.artifactId}</webappDirectory>
                    <warName>${project.artifactId}</warName>
                    <webResources>
                        <resource>
                            <filtering>true</filtering>
                            <directory>${basedir}/src/main/resources</directory>

                            <directory>${project.build.directory}</directory>
                            <directory>${project.build.sourceDirectory}</directory>
                            <targetPath>WEB-INF/classes</targetPath>
                        </resource>
                    </webResources>
                    <nonFilteredFileExtensions>
                        <nonFilteredFileExtension>gif</nonFilteredFileExtension>
                        <nonFilteredFileExtension>ico</nonFilteredFileExtension>
                        <nonFilteredFileExtension>jpg</nonFilteredFileExtension>
                        <nonFilteredFileExtension>png</nonFilteredFileExtension>
                        <nonFilteredFileExtension>pdf</nonFilteredFileExtension>
                        <nonFilteredFileExtension>jasper</nonFilteredFileExtension>
                    </nonFilteredFileExtensions>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.6</version>
                <executions>
                    <execution>
                        <id>copy-resources</id>
                        <!-- here the phase you need -->
                        <phase>validate</phase>
                        <goals>
                            <goal>copy-resources</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${basedir}/target/WEB-INF/classes</outputDirectory>
                            <resources>
                                <resource>
                                    <filtering>true</filtering>

                                    <directory>${basedir}/src/main/resources</directory>

                                    <directory>${project.build.directory}</directory>
                                    <directory>${project.build.sourceDirectory}</directory>
                                </resource>
                            </resources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>org.glassfish.maven.plugin</groupId>
                <artifactId>maven-glassfish-plugin</artifactId>
                <version>2.1</version>
                <configuration>
                    <debug>true</debug>
                    <echo>true</echo>
                    <terse>true</terse>
                    <force>true</force>
                    <!-- <autoCreate>true</autoCreate> -->
                    <!-- <skip>${test.int.skip}</skip> -->
                    <glassfishDirectory>${glassfish.glassfishDirectory}</glassfishDirectory>
                    <user>${glassfish.user}</user>
                    <adminPassword>${glassfish.adminPassword}</adminPassword>
                    <!-- <passwordFile>${glassfish.home}/domains/${project.artifactId}/master-password</passwordFile> -->
                    <domain>
                        <name>${glassfish.domain.name}</name>
                        <host>${glassfish.domain.host}</host>
                        <adminPort>${glassfish.domain.adminPort}</adminPort>
                    </domain>
                    <components>
                        <component>
                            <name>${project.artifactId}</name>
                            <artifact>${project.build.directory}/${project.artifactId}.war</artifact>
                        </component>
                    </components>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>redeploy</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12.4</version>
                <dependencies>
                    <dependency>
                        <groupId>org.apache.maven.surefire</groupId>
                        <artifactId>surefire-junit47</artifactId>
                        <version>2.12.4</version>
                    </dependency>
                </dependencies>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>buildnumber-maven-plugin</artifactId>
                <version>1.1</version>
                <executions>
                    <execution>
                        <id>buildnumber</id>
                        <phase>validate</phase>
                        <goals>
                            <goal>create</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <doCheck>false</doCheck>
                    <doUpdate>false</doUpdate>
                    <revisionOnScmFailure>unknownbuild</revisionOnScmFailure>
                    <format>{0,number}</format>
                    <items>
                        <item>buildNumber</item>
                    </items>
                </configuration>
            </plugin>

        </plugins>
    </build>

    <dependencies>
        <dependency>
            ****
        </dependency>

    </dependencies>

</project> 
```

詹金斯/config.xml

```
<?xml version='1.0' encoding='UTF-8'?>
<maven2-moduleset plugin="maven-plugin@1.501">
    <actions/>
    <description>jenkins_build_deploy</description>
    <keepDependencies>false</keepDependencies>
    <properties>
        <hudson.model.ParametersDefinitionProperty>
            <parameterDefinitions>
                <hudson.model.StringParameterDefinition>
                    <name>CUSTOM_VERSION</name>
                    <description>custom_version  = Test 1.0 ${env.CUSTOM_VERSION}</description>
                    <defaultValue>1.0.1</defaultValue>
                </hudson.model.StringParameterDefinition>
                <hudson.model.StringParameterDefinition>
                    <name>CUSTOM_MESSAGE</name>
                    <description>Test Env.</description>
                    <defaultValue>Test Env.</defaultValue>
                </hudson.model.StringParameterDefinition>
            </parameterDefinitions>
        </hudson.model.ParametersDefinitionProperty>
    </properties>
    <scm class="hudson.scm.SubversionSCM" plugin="subversion@1.45">
        <locations>
            <hudson.scm.SubversionSCM_-ModuleLocation>
                <remote>http://example.com/svn/jenkins_build_deploy/trunk</remote>
                <local>.</local>
                <depthOption>infinity</depthOption>
                <ignoreExternalsOption>false</ignoreExternalsOption>
            </hudson.scm.SubversionSCM_-ModuleLocation>
        </locations>
        <excludedRegions/>
        <includedRegions/>
        <excludedUsers/>
        <excludedRevprop/>
        <excludedCommitMessages/>
        <workspaceUpdater class="hudson.scm.subversion.UpdateUpdater"/>
        <ignoreDirPropChanges>false</ignoreDirPropChanges>
        <filterChangelog>false</filterChangelog>
    </scm>
    <canRoam>true</canRoam>
    <disabled>false</disabled>
    <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
    <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
    <triggers class="vector"/>
    <concurrentBuild>false</concurrentBuild>
    <rootModule>
        <groupId>com.example</groupId>
        <artifactId>jenkins_build_deploy</artifactId>
    </rootModule>
    <goals>clean install -Dmaven.test.skip=true glassfish:deploy</goals>
    <aggregatorStyleBuild>true</aggregatorStyleBuild>
    <incrementalBuild>false</incrementalBuild>
    <perModuleEmail>true</perModuleEmail>
    <ignoreUpstremChanges>false</ignoreUpstremChanges>
    <archivingDisabled>false</archivingDisabled>
    <resolveDependencies>false</resolveDependencies>
    <processPlugins>false</processPlugins>
    <mavenValidationLevel>-1</mavenValidationLevel>
    <runHeadless>false</runHeadless>
    <disableTriggerDownstreamProjects>false</disableTriggerDownstreamProjects>
    <settings class="jenkins.mvn.DefaultSettingsProvider"/>
    <globalSettings class="jenkins.mvn.DefaultGlobalSettingsProvider"/>
    <reporters/>
    <publishers/>
    <buildWrappers/>
    <prebuilders>
        <hudson.tasks.Shell>
            <command>echo CUSTOM_VERSION: $CUSTOM_VERSION
echo CUSTOM_MESSAGE: $CUSTOM_MESSAGE</command>
        </hudson.tasks.Shell>
    </prebuilders>
    <postbuilders/>
    <runPostStepsIfResult>
        <name>FAILURE</name>
        <ordinal>2</ordinal>
        <color>RED</color>
    </runPostStepsIfResult>
</maven2-moduleset> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T11:26:08.267

好吧，我建议有一个属性文件，它通过 Maven 过滤将这些值作为可替换的值。

例如，将您的属性文件设置为如下所示：

```
custom_version  = Test 1.0
pom_version     = ${pom.version} 
svn_revision    = ${buildNumber}
build_tag       = ${build_tag}   # Will probably need your own implementation
build_number    = ${env.BUILD_NUMBER}
build_id        = ${env.BUILD_ID} 
```

然后在您的 pom.xml 中打开过滤并使用 buildnumber-maven-plugin：

```
<project ...>
   <build>
      <resources>
         <resource>
           <directory>${basedir}/src/main/resources</directory>
           <filtering>true</filtering>
         </resource>
      </resources>

      <plugins>
         <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>buildnumber-maven-plugin</artifactId>
            <version>1.1</version>
            <executions>
               <execution>
                  <phase>validate</phase>
                  <goals>
                     <goal>create</goal>
                  </goals>
               </execution>
            </executions>
            <configuration>
               <doCheck>true</doCheck>
               <doUpdate>true</doUpdate>
            </configuration>
         </plugin>
      </plugins>

   </build>
</project> 
```

有关更多详细信息，请查看[此处](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+software+project)和[此处](http://mojo.codehaus.org/buildnumber-maven-plugin)。

# windows-phone-7 - Webbrowser windows phone 不显示图像

> ID：14976828
> 
> 赞同：1
> 
> 时间：2013-02-20T09:52:00.523
> 
> 标签：windows-phone-7, xaml, webbrowser-control, windows-phone-8

在我的 Windows Phone 应用程序中，我使用网络浏览器来呈现这样的 HTML

```
private void webBrowserHTML_Loaded(object sender, RoutedEventArgs e)
    {
        WebBrowser web = sender as WebBrowser;
        string description = web.DataContext.ToString();
        web.NavigateToString(description);
    } 
```

我的问题是我有在变量中显示图像的 html 代码`description`：

```
<a href=\"tel:3950\"><img width=\"220\" class=\"logo\" alt=\"3950\" src=\"bandeau3950.png\" /> </a> 
```

我将图像与我的代码放在同一个文件夹中，但图像未显示在应用程序中。

![在此处输入图像描述](../Images/ff14437a40ca3e691556c91811621a25.png)

请问有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:54:34.777

解决方案 1

使用 Base64 图像 uri 格式，以便将图像定义为 html 的一部分。您可以使用在线转换工具，例如[http://webcodertools.com/imagetobase64converter](http://webcodertools.com/imagetobase64converter)

解决方案 2

1.  将所有需要的图像复制到隔离的存储文件夹。它可以在应用程序启动期间完成。 [http://msdn.microsoft.com/en-us/library/ff431811%28VS.92%29.aspx](http://msdn.microsoft.com/en-us/library/ff431811%28VS.92%29.aspx)
2.  收到 html 字符串后，将其保存到与 index.html 相同的隔离存储中

3.  导航（新 Uri("folder/index.html", UriKind.Relative))

在这种情况下，浏览器将能够显示图像，因为您的页面和图像在同一个隔离存储文件夹中。

# facebook - 如何为 monodroid/mvvmcross 应用程序实现社交 api (facebook)？

> ID：14976829
> 
> 赞同：-1
> 
> 时间：2013-02-20T09:52:01.810
> 
> 标签：facebook, api, xamarin.android, mvvmcross

您使用哪个 api 在 monodroid/mvvmcross 应用程序中实现 facebook？有人试图从 facebook android sdk 做一个 java 绑定库？我只需要在 facebook 帐户的墙上发送一张图片（graph api）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:06:36.230

我使用了 C# Facebook SDK - [http://csharpsdk.org/](http://csharpsdk.org/)，它有一个用于电话和 RT 的版本。我最终做的是为 Facebook 函数编写一个接口，然后是 2 个实现，将特定于平台的 Facebook 客户端作为构造函数参数。这样我的核心 PCL 代码可以与通用接口对话，并且我在平台设置中设置了特定版本

虽然不知道安卓

# activex - 通过activeXObject在jscript中创建的文本文件中的换行符

> ID：14976831
> 
> 赞同：0
> 
> 时间：2013-02-20T09:52:02.793
> 
> 标签：activex, newline, jscript

从顶部开始：使用以下代码，我可以通过 ActiveX 对象在 Internet Explorer 的 htm 文件中使用 jscript 创建一个文本文件。耶！但是，在记事本中打开文本文件时，我注意到新行显示为 mojibake 字符（矩形字符）而不是 newlines 。在 Sublime 2 中很好。

```
<html>
<head>
</head>
<script type="text/javascript">
var myStr = "The self same moment I could pray;\nAnd from my neck so free\nThe Albatross fell off, and sank\nLike lead into the sea.";
var myPath = "C:\\temp\\";
var myTextfile = "Rime.txt"

writeFile(myPath, myTextfile, myStr)
function writeFile(apath, afilename, str)
{ 
  var fso = new ActiveXObject("Scripting.FileSystemObject");
  var outFile = fso.CreateTextFile(apath + afilename, true);
  outFile.WriteLine(str);
  outFile.Close();
}

</script>
</body>
</html> 
```

我还注意到在 Photoshop 环境中使用以下内容时不会发生这种情况（我通常从中编写脚本）

```
var txtFile = new File(apath + "/" + afilename);
outFile.open('w');
outFile.writeln(str);
outFile.close(); 
```

这只是 ActiveX 的一个怪癖（或奖励）吗？我可以更改它，使其写入可以在记事本中正确查看的新行吗？

而且，是的，我妈妈确实警告过我涉及 ActiveX 对象的危险。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:44:43.503

看起来字符编码有问题。试试这个而不是`CreateTextFile()`：

```
var outFile = fso.OpenTextFile(apath + afilename, 2, true, 0); 
```

第二个参数：`1`= 读取，`2`= 写入，`8`= 附加。

第三个参数：`true`如果创建不存在的文件，`false`如果不创建不存在的文件。[可选，默认 = `false`]

第四个参数：`0`= ASCII，`-1`= Unicode，`-2`= 系统默认值。[可选，默认 = `0`]

# ant - 如何识别文件是否从特定存档中复制？

> ID：14976835
> 
> 赞同：0
> 
> 时间：2013-02-20T09:52:16.677
> 
> 标签：ant

我是 ANT 的新手。

我有一个非常具体的场景要处理：

第 1 步：我需要在某些 ear 文件中查找文件名模式。如果模式匹配，那么我需要提取这些文件。STEP-2：如果从某个耳朵（类似于zip文件）文件中提取任何文件，那么我需要搜索另一组文件，并复制这些文件组。

要处理的情况是“如何识别文件是否从特定存档中复制”，如果找到则继续执行步骤 2，否则转到下一个存档。

我已经达到第 1 步，但不知道如何达到第 2 步。

第1步

```
<!-- Set via arguments passed -->
<patternset id="pattern.needtocopy" includes="${needtocopyfile.pattern}" excludes="${ignore.pattern}"> 
 </patternset>

<target name="get-binaries-from-baseline">
<for param="binary">
    <path>
        <fileset dir="${baseline.dir}/target/aaa/bbb/ccc" includes="*.ear" />
    </path>
    <sequential>
        <basename file="@{binary}" property="@{binary}.basename" />

        <unzip src="@{binary}" dest="${baseline.dir}">
            <patternset refid="pattern.needtocopy" />
            <mapper type="flatten" />
        </unzip>
    </sequential>
</for>
</target> 
```

第2步：

？？？

在这方面需要帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T08:10:15.263

那么我解决了同样的问题，使用基于我能找到的资源的 groovy 脚本。

```
<target name="findJars">
    <zipfileset id="found" src="${ear-name}">
        <patternset refid="${patternsetref}" />
    </zipfileset>
    <groovy>
        project.references.found.each {
            println it.name
            println project.properties.'ear-name'
            println project.properties.'dest.dir'
        }
    </groovy>
</target> 
```

然后我添加了另一个任务，它将这个文件名和 ear-file-name 作为输入，并根据文件提取相关的 jar 以搜索模式。

# c# - 点击事件未触发

> ID：14976836
> 
> 赞同：0
> 
> 时间：2013-02-20T09:52:24.227
> 
> 标签：c#, javascript, progress-bar

一旦我将 JavaScript 代码添加到程序中，按钮 OnClick 事件就不会触发，有什么想法为什么会发生这种情况？，我已经传递了进度条的 C# 代码，单击它时会加载进度条。我想知道为什么按钮单击事件未触发。

**HTML 和 JavaScript 代码**：

```
 <asp:Button ID="Confirm_btn" CssClass="confirmBtn" runat="server" Text="Generate Presentation" UseSubmitBehavior="true" 
                          ClientIDMode="Static" OnClick = "Confirm_Click" />

                         </td></tr>                          
                     <tr><td colspan="2" align="center">
                        <div id="progressbar" style="width:500px"></div>
                        </td></tr>    
                        </table>
                    </div>

                    <asp:Label ID="error" runat="server" ClientIDMode="Static" 
                        EnableViewState="False" Font-Names="Arial"></asp:Label>                    
                </center>
            </div>     

</asp:Content>
  <asp:Content ID="Content3" ContentPlaceHolderID="ScriptContent" runat="server">
    <script type="text/javascript">
        $.updateProgressbar = function () {
            //Calling PageMethod for current progress
            PageMethods.OperationProgress(function (result) {
                //Updating progress
                $("#progressbar").progressbar('value', result.progress)
                //If operation is complete
                if (result.progress == 100) {
                    //Enable button
                    $("#Confirm_btn").attr('disabled', '');
                }
                //If not
                else {
                    //Reset timer
                    setTimeout($.updateProgressbar, 500);
                }
            });
        };

        $(document).ready(function () {
            //Progressbar initialization
            $("#progressbar").progressbar({ value: 0 });
            //Button click event
            $("#Confirm_btn").click(function (e) {
                e.preventDefault();
                //Disabling button
                $("#Confirm_btn").attr('disabled', 'disabled');
                //Making sure that progress indicate 0
                $("#progressbar").progressbar('value', 0);
                //Call PageMethod which triggers long running operation
                PageMethods.Operation(function (result) {
                    if (result) {
                        //Updating progress
                        $("#progressbar").progressbar('value', result.progress)
                        //Setting the timer
                        setTimeout($.updateProgressbar, 500);
                    }
                });
            });
        });
    </script>
</asp:Content> 
```

**ProgressBar 的 C# 代码**：

```
/// <summary>
    /// PageMethod for triggering long running operation
    /// </summary>
    /// <returns></returns>
    [System.Web.Services.WebMethod(EnableSession = true)]
    public static object Operation()
    {
        HttpSessionState session = HttpContext.Current.Session;

        //Separate thread for long running operation
        ThreadPool.QueueUserWorkItem(delegate
        {
            int operationProgress;
            for (operationProgress = 0; operationProgress <= 100; operationProgress = operationProgress + 2)
            {
                session["OPERATION_PROGRESS"] = operationProgress;
                Thread.Sleep(1000);
            }
        });

        return new { progress = 0 };
    }

    /// <summary>
    /// PageMethod for reporting progress
    /// </summary>
    /// <returns></returns>
    [System.Web.Services.WebMethod(EnableSession = true)]
    public static object OperationProgress()
    {
        int operationProgress = 0;

        if (HttpContext.Current.Session["OPERATION_PROGRESS"] != null)
            operationProgress = (int)HttpContext.Current.Session["OPERATION_PROGRESS"];

        return new { progress = operationProgress };
    }
} 
```

**按钮单击事件的 C# 代码**：

```
protected void Confirm_Click(object sender, EventArgs e)
{
   // my process run here 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:03:15.410

默认情况下，WebForms 控件不会发出`id`存在于`ID`服务器标记属性中的确切属性。你需要为你的 jQuery 选择器使用类似的东西：

```
$('#<%: Confirm_btn.ClientID %>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:24:33.230

```
$("#Confirm_btn").live('click', function (e) {

}); 
```

试试这个，肯定有效

别的

```
$("#Confirm_btn").on('click', function (e) {

}); 
```

干杯

帕尼*

# node.js - 使用 node.js 应用程序进行 Grunt livereload

> ID：14976839
> 
> 赞同：15
> 
> 时间：2013-02-20T09:52:33.233
> 
> 标签：node.js, yeoman, gruntjs, livereload

我在 Node.js 中编写了一个应用程序（使用 Express 和 socket.io），**我想在开发和连接到 Node.js 应用程序时使用 Grunt 用 livereload 编译我的客户端内容。我怎样才能做到这一点？**（由于路径和跨域问题，最好不要在另一个端口中运行 Node.js 应用程序和在另一个端口中运行客户端）

我还安装了 Yeoman，它使用的是开箱即​​用的 grunt-contrib-livereload 包，但据我了解，它使用 Node.js Connect 服务器来提供客户端文件，因此与我的 Node.js 应用程序分离。

Yeoman 生成的 Gruntfile.js 示例：

```
var lrSnippet = require('grunt-contrib-livereload/lib/utils').livereloadSnippet;
var mountFolder = function (connect, dir) {
    return connect.static(require('path').resolve(dir));
};

// ... cut some parts
grunt.initConfig({
    watch: {
        livereload: {
            files: [
                '<%= yeoman.app %>/*/*.html',
                '{.tmp,<%= yeoman.app %>}/styles/*.css',
                '{.tmp,<%= yeoman.app %>}/scripts/*.js',
                '<%= yeoman.app %>/images/*.{png,jpg,jpeg}'
            ],
            tasks: ['livereload']
        }
        // ..cut some parts
    },
    connect: {
        livereload: {
            options: {
                port: 9000,
                middleware: function (connect) {
                    return [
                        lrSnippet,
                        mountFolder(connect, '.tmp'),
                        mountFolder(connect, 'app')
                    ];
                }
            }
        }
    }
    // ..cut some parts
});

grunt.registerTask('server', [
    'clean:server',
    'coffee:dist',
    'compass:server',
    'livereload-start',
    'connect:livereload',
    'open',
    'watch'
]); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T06:01:51.497

不确定您是否已经解决了这个问题，但我通过将我的快速应用程序添加为附加到“connect.livereload.options.middleware”选项的中间件来完成此操作。

但是，服务器端代码的自动重新加载不起作用。为此，您可以使用简单的“node ./server.js”实现一个重新加载友好的服务器，创建一个连接中间件作为您的开发服务器的透明代理，并在您的标准连接/livereload 之前在您的 Gruntfile.js 中调用它服务器启动。

```
connect: {
    options: {
        port: 9000,
        // change this to '0.0.0.0' to access the server from outside
        hostname: 'localhost'
    },
    livereload: {
        options: {
            middleware: function (connect) {
                return [
                    lrSnippet,
                    mountFolder(connect, '.tmp'),
                    mountFolder(connect, 'app'),
                    require('./server') // your server packaged as a nodejs module
                ];
            }
        }
    }
} 
```

server.js：

```
var app = express();

...
// Export your server object.
module.exports = app; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-19T12:34:29.897

我的答案是使用`Gulp`我更熟悉的，而不是 Grunt，但我想同样的方法也可以使用`Grunt`。

请参阅[我的存储库](https://github.com/dmitriz/min-server)（和[较旧的](https://github.com/dmitriz/gulp-automation)存储库）和[我的其他答案](https://stackoverflow.com/a/29729776/1614973)。

*既不需要任何浏览器扩展，也不需要向您的文件添加任何脚本*。

该解决方案基于[`gulp-livereload`](https://www.npmjs.com/package/gulp-livereload)和[`connect-livereload`](https://www.npmjs.com/package/connect-livereload)包一起工作。首先，您启动*实时重载侦听*器，并将任何文件更改通过管道传输（更改`*`为任何更具体[`node-glob`](https://github.com/isaacs/node-glob)的以仅侦听特定文件）：

```
 var gulpLivereload = require('gulp-livereload');

gulpLivereload.listen();

gulp.watch('*', function(file) {
  gulp.src(file.path)
    .pipe(gulpLivereload());
}); 

```

其次，您通过以下方式配置服务器以将*侦听*器用作中间件`connect-livereload`：

```
 var connect = require('connect');
var connectLivereload = require('connect-livereload');

connect()
  .use(connectLivereload())
  .use(connect.static(__dirname))
  .listen(8080); 

```

有关它们如何在内部工作的更多信息，请参阅包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-29T09:30:37.513

在 Gruntfile 中，从任务中移除`connect:livereload`和移除。`open``server`

在 HTML 文件中添加以下脚本

```
<!-- livereload script -->
<script type="text/javascript">
    document.write('<script src="http://'
        + (location.host || 'localhost').split(':')[0]
        + ':35729/livereload.js?snipver=1" type="text/javascript"><\/script>')
</script> 
```

# twitter-bootstrap - Twitter Bootstrap - 模式隐藏时的固定背景（无滚动）（如 Pinterest 缩放）

> ID：14976842
> 
> 赞同：1
> 
> 时间：2013-02-20T09:52:43.767
> 
> 标签：twitter-bootstrap, background, modal-dialog

使用 Twitter 引导程序：

当 Modal 处于并且页面背景处于不透明状态时，背景是可滚动的，但当放大时我需要它的固定或静态（不可滚动），就像 Pinterest 一样。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T08:39:26.970

我在这里找到了我的问题的答案：

[https://github.com/twbs/bootstrap/issues/407](https://github.com/twbs/bootstrap/issues/407)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T20:55:23.437

这个问题在 Bootstrap 3.0 modal 中得到了解决。

# jsf-2 - 动态关闭选项卡不丰富：tabPanel

> ID：14976844
> 
> 赞同：1
> 
> 时间：2013-02-20T09:52:57.877
> 
> 标签：jsf-2, richfaces

我有一个丰富的：tabPanel 动态添加标签

```
<c:forEach var="tab" items="#{tabsBean.tabs}" >
   <rich:tab  name="#{tab.name}"  >
     <h:form id="#{tab.name}" >
       <f:facet name="header">
          <h:outputText value="#{tab.name}" />
            <a4j:commandLink value="X" action="#{tabsBean.removeTab(tab)}" />
       </f:facet>
         <ui:include src="#{tab.path}" />
      </h:form>
     </rich:tab>
 </c:forEach> 
```

烦恼是

命令链接 (X) 不显示，当我关闭选项卡时，我会打开 @perv 选项卡

我能怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T23:31:46.890

`f:facet name="header"`必须是 的直接子级`rich:tab`（在您的代码中，它是 的一个方面`h:form`，但`h:form`不支持此类方面，因此未显示）。

另请注意，如果您使用的是 RichFaces 4.x，那么您**不能**在单个选项卡中包含表单元素，尚不支持，请参阅： [https ://issues.jboss.org/browse/RF-11306](https://issues.jboss.org/browse/RF-11306)

# jquery - jQuery移动触摸事件不起作用

> ID：14976845
> 
> 赞同：1
> 
> 时间：2013-02-20T09:52:58.730
> 
> 标签：jquery, cordova, jquery-mobile

我正在使用 phone gap 开发跨平台移动应用程序。

现在，如果我使用 Swipe 事件。它们仅适用于 index.html 等应用程序的第一页。

但是如果我重定向如果它是第二页

登录 --> 索引.html

滑动和链接停止工作

无法弄清楚问题。请帮助

这是代码

```
<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script
    src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

<script>
    $(document).ready(function() {

        $('.ui-slider-handle').live('touchstart', function() {
            // When user touches the slider handle, temporarily unbind the page turn handlers
            doUnbind();
        });

        $('.ui-slider-handle').live('mousedown', function() {
            // When user touches the slider handle, temporarily unbind the page turn handlers
            doUnbind();
        });

        $('.ui-slider-handle').live('touchend', function() {
            //When the user let's go of the handle, rebind the controls for page turn
            // Put in a slight delay so that the rebind does not happen until after the swipe has been triggered
            setTimeout(function() {
                doBind();
            }, 100);
        });

        $('.ui-slider-handle').live('mouseup', function() {
            //When the user let's go of the handle, rebind the controls for page turn
            // Put in a slight delay so that the rebind does not happen until after the swipe has been triggered
            setTimeout(function() {
                doBind();
            }, 100);
        });

        // Set the initial window (assuming it will always be #1
        window.now = 1;

        //get an Array of all of the pages and count
        windowMax = $('div[data-role="page"]').length;

        doBind();
    });
    // Functions for binding swipe events to named handlers
    function doBind() {
        $('div[data-role="page"]').live("swipeleft", turnPage);
        $('div[data-role="page"]').live("swiperight", turnPageBack);
    }

    function doUnbind() {
        $('div[data-role="page"]').die("swipeleft", turnPage);
        $('div[data-role="page"]').die("swiperight", turnPageBack);
    }

    // Named handlers for binding page turn controls
    function turnPage() {
        // Check to see if we are already at the highest numbers page            
        if (window.now < windowMax) {
            window.now++
            $.mobile.changePage("#device" + window.now, "slide", false, true);
        }
    }

    function turnPageBack() {
        // Check to see if we are already at the lowest numbered page
        if (window.now != 1) {
            window.now--;
            $.mobile.changePage("#device" + window.now, "slide", true, true);
        }
    }
</script>
</head>

<body>
    <div data-role="page" id="device1">
        <h1>School Day</h1>
        <p>Muchos paquetes de autoedición y editores de páginas web usan
            el Lorem Ipsum como su texto por defecto, y al hacer una búsqueda de
            "Lorem Ipsum" va a dar por resultado muchos sitios web que usan este
            texto si se encuentran en estado de desarrollo. Muchas versiones han
            evolucionado a través de los años, algunas veces por accidente, otras
            veces a propósito (por ejemplo insertándole humor y cosas por el
            estilo).</p>

    </div>
    <!-- /page -->
    <div data-role="page" id="device2">
        <h1>School Day</h1>
        <p>TRichard McClintock, un profesor de Latin de la Universidad de
            Hampden-Sydney en Virginia, encontró una de las palabras más oscuras
            de la lengua del latín, "consecteur", en un pasaje de Lorem Ipsum, y
            al seguir leyendo distintos textos del latín, descubrió la fuente
            indudable. Lorem Ipsum viene de las secciones 1.10.32 y 1.10.33 de
            "de Finnibus Bonorum et Malorum" (Los Extremos del Bien y El Mal) por
            Cicero, escrito en el año 45 antes de Cristo. Este libro es un
            tratado de teoría de éticas, muy popular durante el Renacimiento.</p>
    </div>
    <!-- /page -->
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:07:32.647

取而代之的是：

```
$(document).ready(function() { 
```

你应该试试这个：

```
 $(document).on('pageinit',function() { 
```

而这个`should be pasted above jquery mobile script`。

所以顺序将是：

```
 <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
 <script>
    $(document).on('pageinit',function() {
      /.....all the code here
 </script>
 <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js">
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T13:15:22.433

我已经重做你的代码并为你制作了一个有效的 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/sBnyP/](http://jsfiddle.net/Gajotres/sBnyP/)

已在桌面 Firefox、Android 4.1.1 Chrome 和 iOS iPad 6.0 测试

```
<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

<script>
    $(document).on('pagebeforeshow', '#device1, #device2', function(){      
        $('.ui-slider-handle').live('touchstart mousedown', function() {
            // When user touches the slider handle, temporarily unbind the page turn handlers
            doUnbind();
        });

        $('.ui-slider-handle').live('touchend mouseup', function() {
            //When the user let's go of the handle, rebind the controls for page turn
            // Put in a slight delay so that the rebind does not happen until after the swipe has been triggered
            setTimeout(function() {
                doBind();
            }, 100);
        });

        doBind();
    });

    // Functions for binding swipe events to named handlers
    function doBind() {
        $(document).on('swipeleft', '[data-role="page"]', turnPage);      
        $(document).on('swiperight', '[data-role="page"]', turnPageBack);
    }

    function doUnbind() {
        $(document).off('swipeleft', '[data-role="page"]', turnPage);      
        $(document).off('swiperight', '[data-role="page"]', turnPageBack);
    }

    // Named handlers for binding page turn controls
    function turnPage(event) {
            if(event.handled !== true) // This will prevent event triggering more then once
            {    
                var nextpage = $(this).next('[data-role="page"]'); 
                // swipe using id of next page if exists
                if (nextpage.length > 0) {
                    $.mobile.changePage(nextpage, {transition: "slide", reverse: false}, true, true);
                }
                event.handled = true;
            }
            return false;  
    }

    function turnPageBack(event) {
            if(event.handled !== true) // This will prevent event triggering more then once
            {      
                var prevpage = $(this).prev('[data-role="page"]');
                //alert('Left');    
                if (prevpage.length > 0) {
                    $.mobile.changePage(prevpage, {transition: "slide", reverse: true}, true, true);
                }
                event.handled = true;
            }
            return false;  
    }
</script>
</head>

<body>
    <div data-role="page" id="device1">
        <h1>School Day</h1>
        <p>Muchos paquetes de autoedición y editores de páginas web usan
            el Lorem Ipsum como su texto por defecto, y al hacer una búsqueda de
            "Lorem Ipsum" va a dar por resultado muchos sitios web que usan este
            texto si se encuentran en estado de desarrollo. Muchas versiones han
            evolucionado a través de los anos, algunas veces por accidente, otras
            veces a propósito (por ejemplo insertándole humor y cosas por el
            estilo).</p>

    </div>
    <!-- /page -->
    <div data-role="page" id="device2">
        <h1>School Day</h1>
        <p>TRichard McClintock, un profesor de Latin de la Universidad de
            Hampden-Sydney en Virginia, encontró una de las palabras más oscuras
            de la lengua del latín, "consecteur", en un pasaje de Lorem Ipsum, y
            al seguir leyendo distintos textos del latín, descubrió la fuente
            indudable. Lorem Ipsum viene de las secciones 1.10.32 y 1.10.33 de
            "de Finnibus Bonorum et Malorum" (Los Extremos del Bien y El Mal) por
            Cicero, escrito en el ano 45 antes de Cristo. Este libro es un
            tratado de teoría de éticas, muy popular durante el Renacimiento.</p>
    </div>
    <!-- /page -->
</body>
</html> 
```

# php - 如何反向显示表格数据？(php)

> ID：14976848
> 
> 赞同：0
> 
> 时间：2013-02-20T09:53:02.643
> 
> 标签：php, image, reverse

我有显示图像的简单代码。我创建了包含 4 列（ID、位置、捕获、序列）的表，并在那里插入了 18 条记录。我的问题是：如何以反向模式显示表中的所有记录？我需要先显示最后一个条目，最后显示第一个条目。

我需要什么：18-1 我现在拥有什么：1-18

我正在寻找简单的代码来做到这一点，但 notwing 完全有效。因此，如果有人能帮助我解决这个问题，我将不胜感激。

这是我的显示脚本的基本代码：

* * *

```
<?php

mysql_connect("localhost", "***", "***") or die(mysql_error());
mysql_select_db("martinidb1337") or die(mysql_error());

$result = mysql_query("SELECT * FROM klpgalerija") or die(mysql_error()); while($row = mysql_fetch_array( $result )) {

    echo '<p><img src="'.$row['location'].'"></p>';
} 
```

* * *

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:55:17.777

您必须为此使用 MySQL [ORDER BY](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)子句，

```
SELECT * FROM klpgalerija ORDER BY id DESC 
```

**注意**：[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。

所以要么使用要么[`PDO`](https://stackoverflow.com/a/14110189/1723893)（`MySQLi`IMO PDO 是可行的方法）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T09:54:19.663

将查询从更改`"SELECT * FROM klpgalerija"`为`"SELECT * FROM klpgalerija ORDER BY ID DESC"`

```
<?php

mysql_connect("localhost", "***", "***") or die(mysql_error());
mysql_select_db("martinidb1337") or die(mysql_error());

$result = mysql_query("SELECT * FROM klpgalerija ORDER BY ID DESC") or die(mysql_error()); while($row = mysql_fetch_array( $result )) {

    echo '<p><img src="'.$row['location'].'"></p>';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:55:14.537

在您的 sql 查询中添加 order by desc 子句

```
$result = mysql_query("SELECT klpgalerija.* FROM klpgalerija order by klpgalerija.ID desc") or die(mysql_error()); 
```

# c# - 从网络摄像头/网络摄像机获取视频

> ID：14976849
> 
> 赞同：1
> 
> 时间：2013-02-20T09:53:03.947
> 
> 标签：c#, wpf, video-streaming, .net-4.5, video-capture

我正在尝试在我的应用程序中实现摄像头安全性。我从一些安全公司那里得到了一些 SDK 来实现系统，但它们都使用 ActiveX。我现在的看法是 ActiveX 有点老了？

但是从设备获取视频并在屏幕上显示（流式传输）它们的最新方法是什么？在 .net 4.5 WPF（和 Windows 8）中使用什么控件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:41:44.637

我在视频 WPF 应用程序上工作了两年，我们遇到了一个从未解决的视频和 WPF 基本问题，那就是可变 fps 速率。这篇博文详细介绍[了](http://rhnatiuk.wordpress.com/2008/12/21/wpf-video-playback-problems/)。

还有一个名为[Media Kit](https://github.com/Sascha-L/WPF-MediaKit)的不错的库（由 Jeremiah Morrill 编写），它可能适合您的问题。

在我们的解决方案中，我们别无选择，只能为我们的渲染 DirectX 引擎公开 HWND。我们通过使用[HwndHost](http://msdn.microsoft.com/en-us/library/system.windows.interop.hwndhost.aspx)类并将其扩展到我们的自定义 WPF 控件来实现这一点。请注意，这是 Windows 窗体主机的基类，因此您会遇到与 WinForms-WPF 互操作相同的问题。

此外，ActiveX 是在 Web 界面中显示专业相机视频流的唯一方式，它仍然是事实上的行业标准，您可以从 MOXA、Acti、Vivotek 和其他各种相机设备制造商处获得它。

还有一件事，如果您需要对视频进行一些高级分析，我建议您使用[OpenCV](http://opencv.org/)。

# android - 如何从android中删除蓝牙模块

> ID：14976855
> 
> 赞同：0
> 
> 时间：2013-02-20T09:53:17.197
> 
> 标签：android

我有一台运行 android 4.1 的设备。但是设备没有蓝牙，所以我想从4.1平台删除蓝牙相关项（如共享菜单，设置项包含“蓝牙”）。

但这似乎是一项杂项工作（设置，文件共享，）。

有什么方法可以告诉平台当前设备没有蓝牙只通过配置一些文件？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T03:49:11.923

在 Android 4.1 Settings.java (packages/apps/settings/) 中的代码

```
// Remove Bluetooth Settings if Bluetooth service is not available.
if (!getPackageManager().hasSystemFeature(PackageManager.FEATURE_BLUETOOTH)) {
target.remove(header);
} 
```

用于判断设备是否支持蓝牙服务。

配置文件位于 systemtem/etc/permissions/xxxx.xml 下，从 /framework/base/data/etc/xxx.xml 复制

```
 PackageManager.FEATURE_BLUETOOTH = "android.hardware.wifi"

 PackageManager.FEATURE_BLUETOOTH = "android.hardware.bluetooth" 
```

由于它只提供了一种方法来标记设备是否支持蓝牙服务，因此应单独删除包含蓝牙的 View 项。

# javascript - Javascript：更改 src 不起作用

> ID：14976856
> 
> 赞同：1
> 
> 时间：2013-02-20T09:53:18.230
> 
> 标签：javascript, jquery

我正在调用这样的函数：

```
<img src="/images/icons/info.png"
width="18" height="18" class="iconbutton" alt="Add to Library" 
onclick="AddLibrary(12345,this.id); this.onclick=null;" /> 
```

然后该函数将 12345 POSTS 到另一个脚本，然后应该更改图标图像：

```
function AddLibrary(pibnval,thisid) {
    $.post('/addlibrary.php', {
        pibn: pibnval
    }, function() {
    thisid.setAttribute('src', "/images/icons/tick.png");
    });
}; 
```

POST 效果很好，但图像没有改变。

我也试过： `document.getElementById(thisid).src = "/images/icons/tick.png";` 但这也没有用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T09:55:42.053

`thisid`只是一个字符串，而不是一个元素。将您更改`onclick`为：

```
onclick="AddLibrary(12345,this); this.onclick=null;" 
```

（我删除了`.id`）和你的`thisid`变量名`img`或类似的（只是为了不误导）：

```
function AddLibrary(pibnval,img) {
    $.post('/addlibrary.php', {
        pibn: pibnval
    }, function() {
    img.setAttribute('src', "/images/icons/tick.png");
    });
}; 
```

其他注意事项：

1.  没有理由为此使用`setAttribute`，图像元素具有`src`属性。

2.  你不要把`;`函数声明放在后面。

3.  一致的缩进可以帮助您和其他人阅读您的代码。

所以：

```
function AddLibrary(pibnval,img) {
    $.post('/addlibrary.php', {
        pibn: pibnval
    }, function() {
        img.src = "/images/icons/tick.png";
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:57:17.203

试试这个 - $('#'+ thisid).attr("src", '/images/icons/tick.png');

您的图像也必须是图像吗？因为您可以将其设置为带有背景图像的 div 并在 css 中设置其宽度和高度，然后像这样更改 css 背景

```
$('#'+ thisid).css({'background':'/images/icons/tick.png'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T10:07:59.860

我宁愿用 JS 附加处理程序（而不是内联），但你可以将代码更改为：

HTML

```
<img src="/images/icons/info.png"
width="18" height="18" class="iconbutton" alt="Add to Library" 
onclick="AddLibrary(event, 12345);" /> 
```

JS

```
function AddLibrary(e, pibnval) {
    var _this = e.target;

    $.post('/addlibrary.php', {
        pibn: pibnval
    }, function() {
        _this.setAttribute('src', "/images/icons/tick.png");
        _this.onclick = null;
    });
} 
```

# android - 如何找出连接到您在android中的同一WIFI网络的其他用户？

> ID：14976858
> 
> 赞同：4
> 
> 时间：2013-02-20T09:53:25.183
> 
> 标签：android, networking, wifi

在这里我想问一下，我怎样才能找到与您连接的同一网络（WIFI）连接的其他手机，并将其显示在您的手机中。例如，会有一个 ANDROID 应用程序，我将在其中获取所有也连接到同一网络的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T15:45:37.543

如果您希望创建一个应用程序来发现在同一网络上运行它的其他主机......
您可以简单地将**UDP 广播**发送到特定端口。然后，网络上所有正在运行的应用程序实例都可以侦听该端口并以将它们标识为主机的消息进行响应！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-09T17:31:46.953

通过使用 CMD...

```
net view

shutdown/I 
```

# php - MySQL插入特殊字符

> ID：14976863
> 
> 赞同：6
> 
> 时间：2013-02-20T09:53:46.777
> 
> 标签：php, mysql, special-characters

我有一个注册表单，它将插入到成员表中，排序规则在 中`utf8_general_ci`，我`SET NAMES utf8`在 php 脚本中使用，好的，问题出在此处，我无法插入纯字母以外的字符串，我尝试在中输入“Hélène”一个表单字段，在运行 sql 查询后，我检查了我的 db 表，该字段被插入为“H”，只要字符串带有特殊字母表（例如`é, ř`后面的​​ on ），就不能插入其余的字母表。

有人可以帮忙吗？谢谢。

**解决方案：**

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

mysql_query("SET NAMES utf8"); 
```

以上两行是接受数据库输入和网页输出的关键部分。

谢谢大家的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:11:56.790

尝试编码后插入数据。尝试`mysql_real_escape_string()`编码。然后执行插入查询。

**编辑：-**

这个答案是一年前发布的。现在**mysql_real_escape_string()** for php 5 将在**mysqli::real_escape_string**这种格式下工作。请[在这里查看](http://in3.php.net/mysqli_real_escape_string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T13:06:30.410

如果你不想担心这么多不同的字符集编码，或者如果 htmlentities 不适合你，这里是替代方案：我使用 mysqli DB 连接（和 PHPV5）Form post 来写入/插入到 MySQl DB。

```
$Notes = $_POST['Notes']; //can be text input or textarea.

$charset = mysqli_character_set_name($link);  //only works for mysqli DB connection
printf ("To check your character set but not necessary %s\n",$charset);  

$Notes = str_replace('"', '&quot;', $Notes);  //double quotes for mailto: emails.  
$von = array("ä","ö","ü","ß","Ä","Ö","Ü"," ","é");  //to correct double whitepaces as well
$zu  = array("&auml;","&ouml;","&uuml;","&szlig;","&Auml;","&Ouml;","&Uuml;","&nbsp;","&#233;");  
$Notes = str_replace($von, $zu, $Notes);  
echo " Notes:".$Notes."<br>" ;  
$Notes = mysqli_real_escape_string($link, $Notes); //for recommended mysqli DB connection.
//$Notes = mysql_real_escape_string($Notes); //for old deprecated mysql DB connection.

// mysqli_real_escape_string Escapes special characters in a string for use in an SQL statement

echo " Notes:".$Notes ;  //ready for inserting 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-31T01:12:18.823

您不能这样做的原因是因为 PHP 阻止将一组特殊字符发送到数据库以避免诸如 sql 注入之类的事情。如果您想转义，可以使用转义字符串函数，但最好的方法是使用准备好的语句。

```
$connection = <"Your database connection">;
$userinput = "Special characters Hélène";
$stmt = $con->prepare("insert into `table` (`fieldname`)values(?)");
$stmt->bind_param("s",$input);
$stmt->execute(); 
```

# php - Symfony 2 - Zip 存档 - 保存 Zip

> ID：14976864
> 
> 赞同：2
> 
> 时间：2013-02-20T09:53:49.010
> 
> 标签：php, zip

我对 Symfony 2 和 Zip Archives 有疑问。当我关闭 zip (zip > closed ()) 时，文件没有保存。我认为问题出现是因为无法写入 symfony 的文件。

我尝试使用我的脚本，除了 Symfony 项目，它运行良好。ZIP 在目录的根目录中创建。

我指定我在 Windows 上。我将 Wamp Server 与 PHP 5.3.13、Apache 2.2.22 和 MySQL 5.5.25 一起使用。

这是我的脚本：

```
<?php  
$host = 'localhost';

$user = 'root';

$bdd = 'symfony';

mysql_connect($host, $user) or die("erreur de connexion au serveur");

mysql_select_db($bdd) or die("erreur de connexion a la base de donnees");

$query = "SELECT * FROM `symfony`.`testzip`";

$result = mysql_query($query);

while ($row = mysql_fetch_array($result)){
    $img = $row["question"];
}

$query = "SELECT * FROM `symfony`.`rallye`";

$result = mysql_query($query);

while($row = mysql_fetch_row($result)){
    $node = array();
    $node["id"] = $row[0];
    $node["name"] = $row[1];
    $node["code"] = $row[2];
    $node["urlarchive"] = $row[3];

    $json[] = $node;
}
mysql_close();

$json = array();
$nom_file = "rallye.json";

$f = fopen($nom_file, "w+");

fputs($f, json_encode($json));

fclose($f);

$zip = new ZipArchive(); 
$zipName = 'archive.zip';
if($zip->open($zipName, ZipArchive::CREATE) === true) {
    echo '&quot;Zip.zip&quot; ouvert<br/>';

    $zip->addFile('fichier.json');

    $zip->addFromString('img.jpeg', $img);

    $zip->close();
    echo 'Archive terminée<br/>';
} else {
    echo 'Impossible d&#039;ouvrir &quot;Zip.zip<br/>';
    echo 'retour au site';
}?> 
```

目的是创建一个包含在我的表中返回的 blob 和从另一个表创建的 json 文件的 zip。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T10:41:02.703

正如Stony所说，它似乎与Symfony2无关......

检查 php.net 页面（用户注释）`ZipArchive::close`将解决您的问题：

[http://www.php.net/manual/en/ziparchive.close.php](http://www.php.net/manual/en/ziparchive.close.php)

# java - 如何将 serversocket 绑定到特定 IP？

> ID：14976867
> 
> 赞同：12
> 
> 时间：2013-02-20T09:54:00.950
> 
> 标签：java, tcp, ip, serversocket, inetaddress

如果我有一个`String`代表 IP 地址（IPv4 或 IPv6），我如何创建一个`ServerSocket`并绑定到该 IP 而无需关心传入的 IP 是 IPv4 还是 IPv6？
我看到有一个构造函数：`ServerSocket(int port, int backlog, InetAddress bindAddr)`但`InetAddress`似乎没有提供任何构造函数，它的子类具有特定于 IPv4 和 IPv6 的名称。
那么如何将套接字绑定到 IP 呢？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-20T09:58:16.183

您可以使用工厂方法[`INetAddress.getByName`](https://docs.oracle.com/javase/8/docs/api/java/net/InetAddress.html#getByName-java.lang.String-)。它会确定使用哪个子类。例如：

```
InetAddress addr = InetAddress.getByName("127.0.0.1");
// or
InetAddress addr = InetAddress.getByName("::1");

// and now you can pass it to your socket-constructor
ServerSocket sock = new ServerSocket(1234, 50, addr); 
```

# objective-c - 像大多数社交网络应用程序一样显示数据的想法

> ID：14976868
> 
> 赞同：0
> 
> 时间：2013-02-20T09:54:00.480
> 
> 标签：objective-c, ios5, storyboard

我想像现在大多数社交网络应用程序一样显示数据。他们使用了很多分离的框架。在每一帧中，它都有文本、图片、按钮和其他内容。我完全不知道该怎么做。我想我可以使用表格视图并使用分组样式（删除组名称标签）来显示它，但我不知道我是否可以在上面放置按钮以及它是否是解决我的问题的最聪明的方法。

你能为我解释清楚还是只给我教程、链接或与之相关的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:11:57.020

Facebook 开发人员分享了他们如何构建 iOS 应用程序的经验。

[https://www.facebook.com/notes/facebook-engineering/under-the-hood-rebuilding-facebook-for-ios/10151036091753920](https://www.facebook.com/notes/facebook-engineering/under-the-hood-rebuilding-facebook-for-ios/10151036091753920)

# google-maps - 如何将svg添加到谷歌地图

> ID：14976869
> 
> 赞同：0
> 
> 时间：2013-02-20T09:54:09.403
> 
> 标签：google-maps, svg

我在这里做错了什么？我似乎无法在谷歌地图上添加 svg 图层。

这是 javascript 文件 maps.js

```
function initialize() 
{
      var mapOptions = 
      {
        zoom: 8,
        center: new google.maps.LatLng(-34.397, 150.644),
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      var map = new google.maps.Map(document.getElementById("googleMap"), mapOptions);

      var bounds = new GLatLngBounds(new GLatLng(-34.397, 150.644), new GLatLng(-34.397, 150.644));
      var oldmap = new GGroundOverlay("test.svg", bounds);
      oldmap.setMap(map);
} 
```

这是html文件

```
<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDY0kkJiTPVd2U7aTOAwhc9ySH6oHxOIYM&sensor=false"></script>
<script type="text/javascript" src="maps.js"></script>
<body onload = "initialize()">
<div id="googleMap" style="width:80%;height:80%;">
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:41:31.133

“document.createElement”不适用于 SVG 元素。“document.createElementNS”是必需的。你必须提供一个额外的“命名空间”参数，“ [http://www.w3.org/2000/svg](http://www.w3.org/2000/svg) ”

您是否考虑过使用 CANVAS 代替 SVG ？

# asp.net-mvc - 更改 Html.DropDownListFor 的名称 - MVC Razor

> ID：14976871
> 
> 赞同：0
> 
> 时间：2013-02-20T09:54:19.047
> 
> 标签：asp.net-mvc, razor

我正在为名为“事件”的属性创建一个带有下拉列表的表单。不幸的是，这是一个保留字，所以它不会像往常一样工作：

```
@Html.DropDownListFor(x => x.Event, new SelectList(ViewData["Events"] as IEnumerable<JFS.Data.Model.Event>, "Id", "Name")) 
```

在控制器中我不能单独获取这个值，因为它是一个保留字，所以如果我这样做：

```
public ActionResult Create(int event)
{
etc etc
} 
```

它抛出一个错误。

我最理想的做法是更改下拉列表的名称，如下所示：

```
@Html.DropDownListFor(x => x.Event as eventId, new SelectList(ViewData["Events"] as IEnumerable<JFS.Data.Model.Event>, "Id", "Name")) 
```

但这不起作用。谁知道改名的正确方法？:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:54:58.023

您不能更改 HTML 助手生成的名称，这是设计使然。相反，您可以做的是更改操作参数的名称并为其添加前缀，`@`从而允许在 C# 中使用保留字作为变量名称：

```
public ActionResult Create(int @event)
{
    etc etc
} 
```

但一般不建议使用保留字作为变量名，除非绝对必要。在您的情况下，这不是绝对必要的，因为有一个更好的解决方案，当然包括使用视图模型：

```
public class CreateEventViewModel
{
    public int Event { get; set; }
} 
```

然后让您的控制器操作将此视图模型作为参数：

```
public ActionResult Create(CreateEventViewModel model)
{
    etc etc
} 
```

# extjs - sencha touch 和 Back Button 中的 NestedList

> ID：14976874
> 
> 赞同：0
> 
> 时间：2013-02-20T09:54:25.020
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我在 Sencha Touch 应用程序中有一个嵌套列表。

[类似于这个例子](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/nestedlist)

当应用程序加载并单击 CAR 时，我将移动到嵌套列表。单击 BACK，再次进入 CAR 列表。

我需要在页面上添加另一个类似的后退按钮，这会将我带到 CAR 列表中。

你能给我一个代码示例吗？或者你知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T11:45:25.370

您是否尝试查看[源代码](http://docs.sencha.com/touch/2-1/source/NestedList.html#Ext-dataview-NestedList)以了解其`onBackTap`工作原理以及是否可以这样做？

# ruby-on-rails - 唯一性验证错误后视图错误地重新加载

> ID：14976875
> 
> 赞同：0
> 
> 时间：2013-02-20T09:54:36.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在您尝试提交新指南并在表单上看到一条错误消息后（由于指南正确未能通过验证）...@specialties 列表未正确重新加载（即它只是说是/否而不是在您提交错误之前可以看到的正确列表）。我无法弄清楚这里的哪一部分是错的......

**视图_form.html.erb**

```
<%= simple_form_for(@guideline, html: {class: "form-horizontal"}) do |f| %>
  <% if @guideline.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@guideline.errors.count, "error") %> prohibited this guideline from being saved:</h2>

      <ul>
      <% @guideline.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.input :title, label: 'Title (e.g. Asthma for under 12 months)' %>
  <%= f.input :specialty, as: :select, collection: @specialties %> 
  <%= f.input :hospital %>
  <%= f.input :content, as: :string, label: 'Link' %>

  <div class="form-actions">
    <%= f.button :submit, :class => "btn btn-info btn-large" %>
  </div>
<% end %> 
```

**指南控制器.rb**

```
 def new
    @guideline = Guideline.new
    @specialties = Guideline.order(:specialty).uniq.pluck(:specialty)

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @guideline }

    end
  end

def create
@guideline = current_user.guidelines.new(params[:guideline])

respond_to do |format|
  if @guideline.save
    format.html { redirect_to @guideline, notice: 'Guideline was successfully created.' }
    format.json { render json: @guideline, status: :created, location: @guideline }
  else

    @specialties = Guideline.order(:specialty).uniq.pluck(:specialty)
    format.html { render action: "new" }
    format.json { render json: @guideline.errors, status: :unprocessable_entity }
  end
end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:00:56.243

这是一个常见错误。在您的创建操作中，如果验证失败，您应该声明 @specialties，因为在新模板中需要这样做。

```
def create
  @guideline = Guideline.new params[:guideline]

  if @guideline.save
  else
    # you need to declare @specialties here since it is needed in the new template
    # which you want to render
    @specialties = Specialty.all
    render :new
  end
end 
```

# android - 带有片段的活动崩溃，就像它是嵌套片段一样

> ID：14976876
> 
> 赞同：0
> 
> 时间：2013-02-20T09:54:38.560
> 
> 标签：android, android-fragments

我想每个人都知道在 Eclipse 中创建项目时选择“主细节流”时创建的项目。![在此处输入图像描述](../Images/bab560b54e35e9f40543f33d801cbc3b.png)

Theres 布局左侧，右侧和 two_pane 布局与片段和 Framelayout 作为片段容器。这工作正常。

现在我有一个带有 viewpager、片段等的“主要”活动 A，我从带有回调的片段调用活动。从该活动 AI 开始一个新的活动 B。该活动 B 的设置与我刚刚谈到的 eclipse 中的示例活动完全相同。

现在我遇到了应用程序崩溃的问题

```
ERROR/AndroidRuntime(8105): Caused by: java.lang.IllegalArgumentException: Binary XML file line #57: Duplicate id 0x7f080024, tag null, or parent id 0x0 with another fragment for FragmentNumber3 
```

当我用另一个框架布局替换 two_pane 布局中的片段时，它不会崩溃。这个问题是嵌套片段的典型问题，但我这里没有嵌套片段，对吧？我有一个活动 B，在那时，它与我的活动 A 没有任何关系。

这里有什么问题？

编辑：这是我的活动 B：

公共类 SucheActivity 扩展 FragmentActivity 实现 SearchboxFragment.SearchboxListener {

```
private boolean mTwoPane;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.searchbox);

    getActionBar().setDisplayHomeAsUpEnabled(true);

    if (findViewById(R.id.searchresult_container) != null) {

        mTwoPane = true;
    }
}
} 
```

这就是活动的 two_pane 布局，搜索框应该在左边，搜索结果在右边：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="16dp"
    android:layout_marginRight="16dp"
    android:baselineAligned="false"
    android:divider="?android:attr/dividerHorizontal"
    android:orientation="horizontal"
    android:showDividers="middle" >

    <fragment
        android:id="@+id/searchbox_fragment"
        android:name="com.example.layouttest.SearchboxFragment"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"/>

    <FrameLayout
        android:id="@+id/searchresult_container"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="3" />

</LinearLayout> 
```

下面是 SearchboxFragment 类：

```
public class SearchboxFragment extends Fragment {

SearchboxListener mCallback;
View v;

public interface SearchboxListener {
    public void onSearchStarted();
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    v = inflater.inflate(R.layout.searchbox, container, false);

    return v;
}
} 
```

搜索结果片段：

```
public class SearchResultFragment extends Fragment {

public SearchResultFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    return inflater.inflate(R.layout.searchresult, container, false);
}

@Override
public void onViewCreated(View view, Bundle savedInstanceState) {

    super.onViewCreated(view, savedInstanceState);

}

} 
```

res/values-large 中的 refs.xml：

```
<resources>

    <item name="searchbox" type="layout">@layout/haussuche_twopane</item>

</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:32:17.037

好的，这就是我发现的：

我无法将我的 Activity 的布局设置为 searchbox.xml（并在 refs.xml 中使用 two_pane.xml 将其作为别名）并将 SearchboxFragment 的布局设置为 searchbox.xml。

我认为 searchbox.xml 从未在两窗格模式下由 Activity 显示，我可以安全地将其设置在其他地方，但这是错误的。

我所做的是复制该布局并使用 searchbox_onepane.xml 和 searchbox_twopane.xml。

# release - 在 Bamboo 中启用发布管理

> ID：14976880
> 
> 赞同：3
> 
> 时间：2013-02-20T09:54:50.660
> 
> 标签：release, jira, bamboo

我正在运行通过应用程序链接连接的 JIRA 和 Bamboo。在 Bamboo 中，有一个带有以下 POM 的 Maven 项目：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.experiments</groupId>
<artifactId>howto-release</artifactId>
<version>${ci.version}</version>
<packaging>jar</packaging>
<name>howto-release</name>
<url>http://maven.apache.org</url>
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <ci.version>2.6-SNAPSHOT</ci.version>
</properties>
<dependencies>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>3.8.1</version>
        <scope>test</scope>
    </dependency>
</dependencies>
<scm>
    <connection>scm:svn:http://svn.xxx.lan/svn/howto-release/trunk</connection>
    <developerConnection>scm:svn:http://svn.xxx.lan/svn/howto-release/trunk</developerConnection>
    <url>http://svn.xxx.lan/svn/howto-release/trunk</url>
</scm>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-release-plugin</artifactId>
            <version>2.0-beta-8</version>
            <configuration>
                <tagBase>http://svn.xxx.lan/svn/howto-release/tag</tagBase>
                <username>release-user</username>
                <password>release-user</password>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

Bamboo 中的 maven 目标定义如下所示：

```
clean install -Dci.version=${bamboo.custom.brmp.name} 
```

到目前为止，我想使用这里描述的合并功能“发布管理”：

*   [http://www.youtube.com/watch?v=OH-Iq4z8Mj8](http://www.youtube.com/watch?v=OH-Iq4z8Mj8)
*   [http://blogs.atlassian.com/2010/09/bamboo_jira_release_management_plugin_part_2/](http://blogs.atlassian.com/2010/09/bamboo_jira_release_management_plugin_part_2/)

不幸的是，它不像 Atlassian 的家伙所描述的那样工作。“计划配置/杂项”中没有“启用发布管理”复选框。

我也遇到了 JIRA 中的 Release 按钮​​问题，该按钮当前发出如下错误消息：“Bamboo 服务器尚未返回任何计划。”

有谁知道如何处理 Bamboo 中的自动发布管理插件以及我必须做什么才能使选项可见（请参阅“计划配置/杂项”）？

我正在运行以下版本的 JIRA 和 Bamboo：

*   JIRA 版本 v5.1.5#784-sha1:6c72993
*   Bamboo 版本 4.4.0 构建 3501 - 13 年 1 月 28 日。

感谢您的帮助！谢谢你。

卡塔琳娜

# vala - Vala 中的局部静态常量：可能吗？

> ID：14976883
> 
> 赞同：2
> 
> 时间：2013-02-20T08:03:29.530
> 
> 标签：vala

# 那片土地

Vala 提供枚举。但是这些不能在本地定义到子程序。常量可以在本地定义到子程序，但似乎不被视为静态表达式（伪常量如此）。

# 案子

我有一些子程序实现为使用`switch`语句构建的状态机。我使用一些`switch (state) { … }`并且想对`case`语句使用一些常量，如`case initial_state: { … }`. 我相信这是推荐的，因为它比在`case 0: { … }`.

我试图在子程序中定义这些常量，使用像`const int initial_state = 0;`. 但瓦拉对每个案例陈述都抱怨。我试图为状态定义一个枚举，如在 中`enum State { initial_state, … };`，但 Vala 拒绝这是一个语法错误，并且似乎只允许子程序之外的枚举声明。

到目前为止，我必须要么将所有状态枚举定义为子程序外部，要么在子程序内定义常量，但必须使用`if`构造而不是`switch`构造，因为`if`条件表达式可以，而不是是静态的。

# 问题

Vala 是否允许以某种方式在子程序本地定义静态常量（标量类型）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T13:00:00.413

这实际上是 gcc 的错误，而不是 valac。使用这个例子：

```
private void foo (int val) {
  const int one = 1;
  const int two = 2;
  const int three = 3;

  switch ( val ) {
    case one:
      GLib.debug ("One");
      break;
    case two:
      GLib.debug ("One");
      break;
    case three:
      GLib.debug ("Three");
      break;
    default:
      GLib.debug (val.to_string ());
      break;
  }
} 
```

valac 将生成：

```
void foo (gint val) {
    static const gint one = 1;
    static const gint two = 2;
    static const gint three = 3;
    gint _tmp0_;
    _tmp0_ = val;
    switch (_tmp0_) {
        case one:
        {
            g_debug ("t.vala:8: One");
            break;
        }
        case two:
        {
            g_debug ("t.vala:11: One");
            break;
        }
        case three:
        {
            g_debug ("t.vala:14: Three");
            break;
        }
        default:
        {
            gint _tmp1_;
            gchar* _tmp2_ = NULL;
            gchar* _tmp3_;
            _tmp1_ = val;
            _tmp2_ = g_strdup_printf ("%i", _tmp1_);
            _tmp3_ = _tmp2_;
            g_debug ("t.vala:17: %s", _tmp3_);
            _g_free0 (_tmp3_);
            break;
        }
    }
} 
```

gcc 会说：

```
t.vala.c:25:3: error: case label does not reduce to an integer constant
t.vala.c:30:3: error: case label does not reduce to an integer constant
t.vala.c:35:3: error: case label does not reduce to an integer constant 
```

有趣的是，clang 很好用（`valac --cc=clang ...`如果你想玩它）。

# java - Java OO 概念在扁平化或包含不必要的过程以简化使用时更好？

> ID：14976884
> 
> 赞同：0
> 
> 时间：2013-02-20T09:55:03.330
> 
> 标签：java, oop, object-oriented-analysis

说，我有 DataObject 类型的 Json 解析器类，如下所示：

```
class JsonDataParser{
   public DataObject parseData(String data){
      // Parse data 
      return dataObject;
   }
} 
```

现在我必须连接到服务器才能获取 Json，所以我有这个：

```
class DataRetriever{
   public String getData(){
      // Get data from server using URL 
      return jsonDataString;
   }
} 
```

问题是，在主类中编写如下代码更好吗（方法-A）

```
DataObject d = new JsonDataParser().parseData(new DataRetriever().getData()); 
```

或者修改 DataRetriever 以在内部包含 Json 解析（方法-B），如下所示：

```
class DataRetriever{
   public DataObject getData(){
      // Get data from server using URL 
      return new JsonDataParser().parseData(jsonDataString);
   }
} 
```

结果在这两种情况下都是相同的，但从概念上讲，使用 Method-A 还是 Method-B 编码更好？

我通常会创建一个控制器类来遵循 Method-A，但我不确定这是否有效。

**编辑：**
事实上，我正在考虑在解析 Json 时使用 GenericType 和 Interface。所以我准备了以下内容：

```
public interface IJsonParser<T> {
    public T parseJSON(String jsonString);
    public T parseJSON(JSONObject jsonObject);
} 
```

然后将其添加到 DataRetriever 的构造函数中，如下所示：

```
class DataRetriever<T>{
   private IJsonParser<T> parser;

   public DataRetriever(IJsonParser<T> parser){
        this.parser = parser;
   }

   public DataObject getData(){
      // Get data from server using URL 
      return new JsonDataParser().parseData(jsonDataString);
   }
} 
```

最终，我正在考虑允许多种类型的解析器，这样每次我们都可以提供自己的解析器来增加它的灵活性。这被认为是某种渎职行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:59:42.277

在这里你不应该看到效率，因为两者都同样有效。但与其这样做，不如考虑类的**未来可扩展性**。

在这件事上，我认为**方法 B**会很好，因为您可以更改解析器，以便将来更改其他解析器。

```
class DataRetriever{
private DataParser dataParser;

public DataRetriever(){
    dataParser = new JsonDataParser(); //tomorrow this can be changed to something else
}

public DataObject getData(String data){
      // Get data from server using URL 
      return dataParser.parseData(data);
   }
} 
```

**更新**：如果您正在为此寻找合适的 OOP 解决方案，那么您应该使用工厂模式，它将根据您提供的类型返回解析器的实例。

```
class ParserFactory{

    //get parser
    public DataParser createParser(int type){
         //creates the new parser based on type and returns it
    }

} 
```

这会更好，因为解析器的创建将是工厂的责任，这将更有意义 IMO。

[工厂模式](http://www.oodesign.com/factory-pattern.html)链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:03:42.100

这取决于您对方法的使用。`getData()` 在第一种情况下，您从方法中检索字符串，然后使用 JsonDataParser 对象对其进行转换。在第二种情况下，您将 DataRetriever 类与 JsonDataParser 对象紧密耦合，这不被视为一个好的做法。假设您想稍后更改 JsonDataParser 类。在这种情况下，您还必须更改代码 DataRetriever。从设计的角度来看，第二种方法更好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:58:04.043

取决于您调用该方法的频率。通常，您会将新的 JsonDataParser() 放在对象将保持活动状态直到下一个 parseData(...) 的位置。例如作为 DataRetriever 的对象属性。

编辑：这反过来也需要您的 DataRetriever 对象保持活力。如果这是针对网站（例如 Tomcat 或其他 Servlet 容器），您应该查看 tomcat 将对象放入 servlet 或应用程序上下文的功能。

# javascript - chrome 和 Firefox 中的卸载事件问题

> ID：14976887
> 
> 赞同：0
> 
> 时间：2013-02-20T09:55:06.617
> 
> 标签：javascript, google-chrome, firefox, javascript-events

我尝试使用卸载事件，但它似乎**不适**用于 chrome 或 Firefox。所以我尝试了另一种方式，问题是页面隐藏回调似乎永远不会调用

```
if ("onpagehide" in window) {
      window.addEventListener("pageshow", function(){alert("enter page")}, false);
      window.addEventListener("pagehide", function(){alert("leave page")}, false);
} else {//for IE
     window.addEventListener("load", function(){alert("enter page")}, false);
     window.addEventListener("unload", function(){alert("leave page")}, false);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T20:46:34.470

我不确定 Firefox，但 Chrome 会忽略从 window.onunload 调用的任何警报。它也不会让您更改 URL 的任何部分以及可能的其他内容。这可能就是为什么看起来事件没有触发的原因。要检查它是否正在触发，您可以从处理函数返回一个字符串，该函数会显示其中一个“您确定要离开此页面吗？” 消息框。

# html - 在 Internet Explorer 中使用 css 给第二列或第四列右侧边框

> ID：14976892
> 
> 赞同：2
> 
> 时间：2013-02-20T09:55:14.110
> 
> 标签：html, css, internet-explorer, html-table

我只想给第二个和第四个`<td >`右侧边框...

如您所见，我有下表：

```
<table class="secondtd">
  <tr>
     <td> Name </td>
     <td> Class </td>
     <td> RollNo </td>
     <td> Batch </td>
   </tr>
</table> 
```

我在css中尝试过类似的东西

```
.secondtd  td+td {
  border-right:solid 1px red;
} 
```

但对我不起作用..**我正在使用 IE。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T10:01:05.007

您可以将类 2 分配给表的第二个和第四个元素：

```
 <td class="secondborder"> </td> 
```

或者你可以使用`nth-child`：

```
td:nth-child(2), td:nth-child(4) {
 border-right:thick double #ff0000;
} 
```

[http://jsfiddle.net/ekHQf/](http://jsfiddle.net/ekHQf/)

这将选择第二个和第四个元素。如果你只有 4 个 td，你可以使用`even`：

```
td:nth-child(even) {
  border-right:thick double #ff0000;
} 
```

[http://jsfiddle.net/ekHQf/1/](http://jsfiddle.net/ekHQf/1/)

**编辑**：

从评论中使用应用的类执行此操作：

```
.secondtd td:nth-child(2) {
  border-right:thick double #ff0000;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T10:22:51.867

有三个基本选项。

1）在单元格上设置一个类并使用一个简单的类选择器。乏味，但适用于所有支持 CSS 的浏览器。

2）将`:first-child`伪类与兄弟运算符一起使用`+`：

```
.secondtd :first-child + td,
.secondtd :first-child + td + td + td {
  border-right: solid 1px red;
} 
```

适用于所有相当现代的浏览器，甚至包括“标准模式”下的 IE 7（但不包括 IE 6）。我认为不是太笨拙，但如果它是第 42 列而不是第 2 和第 4 列，它会变得笨拙。

3）使用`:nth-child(...)`伪类：

```
.secondtd td:nth-child(2),
.secondtd td:nth-child(4) {
  border-right: solid 1px red;
} 
```

适用于现代浏览器，包括“标准模式”下的 IE 9（但不是早期版本）。

在这种特殊情况下，您可以使用较短的选择器列表，因为在此处的列号范围内，只有 2 和 4 对应`2n`（其中`n`隐式采用所有非负整数值 0、1、2、...）：

```
.secondtd td:nth-child(2n) {
  border-right: solid 1px red;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T09:58:37.763

尝试仅将类元素应用到您想看到它的地方，即标签中。

```
<table>

 <tr>
   <td> Name </td>
   <td class="secondborder"> Class </td>
   <td> RollNo </td>
   <td class="secondborder"> Batch </td>
  </tr>
 </table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T10:02:01.843

您可以使用 css 执行此操作`nth-child`：

```
td:nth-child(even) {
    border-right: 1px solid red;
} 
```

这将选择每隔一个元素

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T10:05:02.590

使用`nth-child`css 选择器设置对应的 td 样式。

```
td:nth-child(2) ,td:nth-child(4)
{
    border-right:solid 1px red;
} 
```

[小提琴](http://jsfiddle.net/bkppu/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-20T10:14:42.040

您可以将 nth-child 选择器与其中任何一个一起使用，`:nth-child(even)`或者`:nth-child(2n)`将其添加到每个其他 td。如果您需要支持旧版浏览器，您可以使用 jQuery`even`在 td 中添加一个类并将其添加到 css 中。

**css**

```
.secondtd td.even,
.secondtd td:nth-child(even) {
    border-right: 1px solid red;
} 
```

**js**

```
// jQuery fallback
$('.secondtd td:nth-child(even)').addClass('even'); 
```

[http://jsfiddle.net/ferne97/gsU4K/](http://jsfiddle.net/ferne97/gsU4K/)

# visual-studio - 如何在 Sharepoint 上发布 ClickOnce 应用程序？

> ID：14976897
> 
> 赞同：0
> 
> 时间：2013-02-20T09:55:20.770
> 
> 标签：visual-studio, sharepoint, clickonce, digital-signature, digital-certificate

我正在开发一个工具，它应该作为 ClickOnce 签名的应用程序发布在 Sharepoint 网站上。

问题是，`.application`从 Sharepoint 执行可执行文件时，出现以下句子（法语）的错误：

```
Le fichier <nom de l'appli>.exe.config possède un hachage calculé différent de celui spécifié dans le manifeste. 
```

用英语讲：

```
File, <application name>.exe.config, has a different computed hash than specified in manifest. 
```

对数字签名有一些了解，我知道`.config`文件在发布后被某种神秘的方式修改了......

此外，通过在本地发布我的应用程序，我从未收到此错误。

然后我假设它来自 Sharepoint 应该修改`.config`文件......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:55:20.770

`.deploy`我通过简单地告诉 Visual Studio 使用文件扩展名来解决这个问题。

这可以在*项目属性>发布>选项>部署*下设置，然后检查`Use ".deploy" file extension`

# matlab - 避免在 Matlab GUI 中中断回调函数

> ID：14976907
> 
> 赞同：3
> 
> 时间：2013-02-20T09:55:58.913
> 
> 标签：matlab, user-interface, callback

我有一个 Matlab GUI，需要很长时间才能执行一些回调函数。此外，这些函数包括以下代码：

```
 drawnow('expose');
 pause(handles.data.delay); 
```

我想避免这些回调执行被中断，以避免在用户按下其他按钮时数据不一致。因此，我将图形设置修改为：

```
set(handles.figure, 'BusyAction','cancel', 'Interruptible','off'); 
```

但是，回调仍然被中断。我怎样才能避免它？

注意：我认为问题在于我需要将“BusyAction”和“Interruptible”值传播到我的 GUI 中的所有控件，有什么方法可以自动完成吗？例如，在生成 GUI 之前修改默认值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T07:58:05.840

将任何属性传播到所有 UI 对象的最快和最干净的方法是`findobj`：

```
set(findobj('Type','uicontrol'), 'BusyAction','cancel', 'Interruptible','off'); 
```

# git - Git 快进替换整个 repo 删除以前的历史记录

> ID：14976910
> 
> 赞同：0
> 
> 时间：2013-02-20T09:56:01.467
> 
> 标签：git, github, git-branch, fast-forward

github 上有一个名为**A**的仓库。我从 github 将此 repo 克隆到我的本地。原始存储库 A 有一个名为“a”的分支，它是 A 的先前版本。存储库所有者的提交删除了历史记录并替换了存储库中的所有文件。在 github 上，如果你比较这两者，它会说，`A and a are entirely different commit histories`

我的问题是我想推送一个同步的提交，就像在所有者快速转发主分支之前的备份。但是如果我在提交之前 git pull （这是一个很好的做法）我肯定会遇到问题，因为它根本不同步。

最好的解决方案是停止跟踪 master 所做的事情并将其替换为我所知道的[不可能的分支。](https://stackoverflow.com/questions/10920023/replacing-the-master-branch-in-git-and-preventing-fast-forward)我应该怎么做才能删除快进提交并使其同步回“a”分支。

PS repo 的所有者得到`![rejected] master -> master (non-fast-forward)`它，他试图做一个 git pull。说“他当前分支的尖端在其远程分支的后面”

如果任何部分不清楚，请随时询问，我连续 2 天遇到这个问题！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T12:12:01.643

（如果您在某个地方隐藏了一个问题，我肯定找不到它。这是我根据猜测您试图问什么的答案：）

我不知道为什么你认为`git pull`在提交东西之前盲目做是一种很好的做法。做一个`git fetch`跟随`gitk master origin/master`肯定是有意义的，以了解当前的状态。然后，您通常要在`git checkout master && git rebase origin/master`和之间做出决定`git checkout master && git merge origin/master`。

如果您的本地`master`分支位于不应该出现的位置，请首先确保您没有未提交的更改，然后`git checkout master && git reset --hard [sha1-of-the-commit-you-want]`将`master`分支移动到您喜欢的任何位置。如果您想`origin`用新的正确状态覆盖 master 分支，只需执行`git push -f origin master`. 请注意，如果其他人检查了 old `master`from `origin`，则将需要重新设置所有提交以遵循您的 new `master`。有关详细信息，请参阅[https://www.kernel.org/pub/software/scm/git/docs/git-rebase.html#_recovering_from_upstream_rebase](https://www.kernel.org/pub/software/scm/git/docs/git-rebase.html#_recovering_from_upstream_rebase)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T14:18:15.283

我用一个简单的解决方案解决了它。1\. 本地更改是用 提交的
`git commit -a -m 'temp'`。
2\. 我创建了一个新分支，所有这些更改都反映在我的本地机器上。
3\. 在主分支上进行了结帐。
`git checkout master`
4\. 在提交我的原始仓库后进行了强制推送。
`git push -f upstream master`
现在我的本地和原始仓库完全同步了。PS 有很多关于强制推送的警告，因为它改变了历史。所以非常小心地使用它。

# java - 使用 Autowire 检索 Scoped 原型的 bean

> ID：14976916
> 
> 赞同：0
> 
> 时间：2013-02-20T09:56:34.623
> 
> 标签：java, spring, dependency-injection, inversion-of-control

在我的 XML 配置中，我有这个：

```
<bean id="soap" class="org.grocery.item.Soap" scope="prototype">
        <property name="price" value="20.00" />
</bean> 
```

在我的服务类中，我有这样的“肥皂”自动接线：

```
@Autowired
private Soap soap;
//Accessor methods 
```

我创建了一个这样的测试类：

```
Item soap = service.getItem(ITEM.SOAP);
Item soap2 = service.getItem(ITEM.SOAP);

if(soap2 == soap ){
    System.out.println("SAME REFERENCE");
} 
```

这是我的服务类中的 getItem 方法：

```
public Item item(Item enumSelector) {
        switch (enumSelector) {
            case SOAP:
                return this.getSoap();
        }
        return null;
    }

@Autowired
private Soap soap;
//Accessor methods 
```

现在我期待的是当我调用 this.getSoap(); 它将返回一个新的 Soap 对象。然而，它没有，即使肥皂被声明为原型。这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:51:17.813

Renjith在他的回答中解释了原因。至于如何，我知道实现这一目标的两种方法：

1.  查找方法：

不要将soap依赖声明为一个字段，而是作为一个抽象的getter方法：

```
protected abstract Soap getSoap(); 
```

每当您在服务中需要肥皂时（例如在 getItem 方法中），调用 getter。

在 xml 配置中，指示 Spring 为您实现该方法：

```
<bean id="service" class="foo.YourService">
  <lookup-method name="getSoap" bean="soapBeanId"/>
</bean> 
```

每当调用时，Spring 提供的实现都会获取一个新的 Soap 实例。

1.  范围代理

这指示 Spring 注入代理而不是真正的 Soap 实例。注入的代理方法将查找正确的soap实例（一个新的实例，因为它是一个原型bean）并委托给它们：

```
<bean id="soap" class="foo.Soap">
  <aop:scoped-proxy/>
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T10:14:27.927

当您创建服务对象时，spring 会向您的服务对象注入一个soap 对象的实例。因此，所有对`getSoap()`服务的调用都将检索在创建服务时注入的同一个soap 对象。

# android - 如何使用 facebook 的 android sdk 将文本框中的文本发送到用户的墙上？

> ID：14976921
> 
> 赞同：1
> 
> 时间：2013-02-20T09:56:47.410
> 
> 标签：android, facebook

我有一个运行良好的登录系统，大多数事情都运行顺利。但是，用户必须按下一个显示“发布”的按钮，然后弹出一个屏幕（类似于浏览器），他们可以在其中输入。我想实现一种方法，让他们在我的主要活动的文本框中输入帖子，然后按一个按钮，将其发布到他们的 Facebook 墙上。这可能吗？我已经有适用于 android 的 facebook sdk。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:36:16.753

我用过这个：

```
bundle = new Bundle();
bundle.putString("message", msg);
Session session = Session.getActiveSession();

if(session != null){
Toast.makeText(context, "Posting...", Toast.LENGTH_LONG).show();

Request.Callback callback= new Request.Callback() {             
    public void onCompleted(Response response) {
        FacebookRequestError error = response.getError();
        if (error != null) {                    
            Toast.makeText(context, "Failed to Post", Toast.LENGTH_LONG).show();
        } else {
            Toast.makeText(context, "Successfully Posted", Toast.LENGTH_LONG).show();
        }
     }
  };
  Request request = new Request(session, "me/feed", bundle, HttpMethod.POST, callback);

  RequestAsyncTask task = new RequestAsyncTask(request);            
  task.execute();
} 
```

这是使用 Graph-Api 的技术。使用 Graph-Api 你只能发布到用户的墙上（无需打开浏览器或 web 视图）。如果您尝试在用户的朋友墙上发帖，它将失败。

# apache - Apache反向代理转发https头

> ID：14976923
> 
> 赞同：-1
> 
> 时间：2013-02-20T09:56:52.157
> 
> 标签：apache, header, proxy, reverse

我已经在 Apache 上成功安装了反向代理。它就像一个魅力。我正在使用它将 https 请求代理到 http。我的问题是我需要将变量 SERVER_HTTPS 转发到我的终端服务器，以指示人们是使用 ssl 连接还是仅使用 http。我找到了一种方法：每次我可以转发 HTTP_X_FORWARDED_PROTO 变量并检查终端服务器：

```
 if ($_SERVER['HTTP_X_FORWARDED_PROTO'] == 'https')
   $_SERVER['HTTPS']='on'; 
```

但这个变体对我不利，因为我无法编辑终端服务器脚本。可以说我什至无法访问它。但我知道如何检查它是否被转发。所以，通常我的问题是：有什么方法可以转发这个变量吗？我已经看到了另一种变体，使用 Rewrite engine ，但它对我不起作用，并且没有详细信息。也许如果我将我的服务器设置在 Nginx + apache 上，这将发送这个头变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T13:23:36.143

如果您可以编辑终端服务器配置，请查看 mod_rpaf RPAF_SetHTTPS 选项：

[https://github.com/gnif/mod_rpaf](https://github.com/gnif/mod_rpaf)

# sql - 通过 * 可能 * 为空的字段进行 SQL 连接

> ID：14976931
> 
> 赞同：3
> 
> 时间：2013-02-20T09:57:18.947
> 
> 标签：sql, sql-server-ce

在我的 SQL CE 数据库中，我有三个表：`customer`和`list`（和之间`customerlist`的联结表- 因为它是多对多关系）。`customer``list`

我正在尝试运行一个查询，该查询将显示所有当前列表以及当前订阅该列表的客户数量（从`customerlist`表中计数）。

这是我当前的查询：

```
select list.listid, count(customerlist.customerid) as numppl, list.ShortDesc
from list inner join customerlist on list.listid=customerlist.listid
group by list.ShortDesc, list.listid
order by numppl desc 
```

这个数据库的当前结构是：

```
[Customer]           [List]             [CustomerList]
CustomerId           ListId             CustomerListId
Name                 ShortDesc          CustomerId
Other details                           ListId 
```

这当前返回所有当前分配有客户的列表 - 但不返回为空的列表。空列表被隐藏。

我想修改此查询以显示空列表，但我很挣扎。我想要的输出是：

```
Name      numppl
listA     375
listB     45
listC     0 
```

（在上面的示例中，当前未返回 listC）。

关于如何在查询中也显示 listC 的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:58:35.903

使用`LEFT JOIN`with`ISNULL`替换`NULL`为 0：

```
SELECT 
  list.listid, 
  ISNULL(count(customerlist.customerid), 0) AS numppl, 
  list.ShortDesc
FROM list 
LEFT JOIN customerlist ON list.listid = customerlist.listid
GROUP BY list.ShortDesc, 
         list.listid
ORDER BY numppl DESC; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!3/526e8/1)

* * *

## 更新

对于 SQL Server CE，试试这个：

```
SELECT 
  list.listid, 
  SUM(CASE WHEN customerlist.customerid IS NULL THEN 0 ELSE 1 END) AS numppl, 
  list.ShortDesc
FROM list 
LEFT JOIN customerlist ON list.listid = customerlist.listid
GROUP BY list.ShortDesc, 
         list.listid
ORDER BY numppl DESC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:00:00.407

您必须使用[LEFT JOIN](http://en.wikipedia.org/wiki/Join_%28SQL%29#Left_outer_join)语法。

```
select list.listid,  case when count(customerlist.customerid) is null then 0 else count(customerlist.customerid) end as numppl, list.ShortDesc
from list left join customerlist on list.listid=customerlist.listid
group by list.ShortDesc, list.listid
order by numppl desc 
```

或者您可以使用[RIGHT JOIN](http://en.wikipedia.org/wiki/Join_%28SQL%29#Right_outer_join)：

```
select list.listid, case when count(customerlist.customerid) is null then 0 else count(customerlist.customerid) end as numppl, list.ShortDesc
from customerlist right join list on customerlist.listid=list.listid
group by list.ShortDesc, list.listid
order by numppl desc 
```

使用 COALESCE ：

```
select list.listid,  coalesce(count(customerlist.customerid),0) as numppl, list.ShortDesc
from list left join customerlist on list.listid=customerlist.listid
group by list.ShortDesc, list.listid
order by numppl desc 
```

# apache - 子域到主域，而无需使用 .htaccess 更改 url

> ID：14976932
> 
> 赞同：0
> 
> 时间：2013-02-20T09:57:23.053
> 
> 标签：apache, .htaccess, mod-rewrite

我有“ **main_domain.com** ”和“ **sub.main_domain.com** ”，并且在 main_domain 中有一个名为“ **sub** ”的文件夹。

因此，如果我输入 sub.main_domain.com，我会转到 main_domain.com/sub/，这没关系，但我看到 url 正在改变。我可以防止更改网址吗？

我的代码：

```
RewriteCond %{HTTP_HOST} ^sub\.main_domain\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/sub/$ [NC]
RewriteRule (.*) http://main_domain.com/sub/ 
```

谢谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T23:50:54.670

您可以通过在 RewriteRule 中设置 'Proxy' ("[P]") 指令来实现此目的。见下文：

```
RewriteCond %{HTTP_HOST} ^sub\.main_domain\.com$
RewriteCond %{REQUEST_URI} !^/sub/$
RewriteRule (.*) http://main_domain.com/sub/ [P] 
```

请注意，为了能够使用 Proxy 指令，您需要在 Apache 配置文件中启用“mod_proxy”和“mod_proxy_http”。

让我知道我的回答是否对您有所帮助。

# .htaccess - htaccess 重定向不起作用 - 需要调整

> ID：14976933
> 
> 赞同：0
> 
> 时间：2013-02-20T09:57:24.183
> 
> 标签：.htaccess, loops, redirect

我有一个小问题，请你们中的一些人解决

在我的 htaccess 中，我有

RewriteRule apply /index.php?option=com_loans&view=apply&Itemid=102 [R=301,L,QSA]

基本上意味着任何获取应用的请求都将被发送

但是我有一个页面 apply.html 不再可以访问上面的页面，因为它创建了一个重定向循环

任何人都知道如何更改 htaccess 声明以便仅应用（而不是 apply.html）转发？

tnx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:13:47.530

尝试添加重写条件以及限制正则表达式中的匹配模式：

该条件将确保仅当请求不是针对现有文件时才应用规则。

```
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteRule ^apply$ /index.php?option=com_loans&view=apply&Itemid=102 [R=301,L,QSA] 
```

# regex - 如何在两个匹配项之间排除正则表达式文本？

> ID：14976934
> 
> 赞同：1
> 
> 时间：2013-02-20T09:57:26.733
> 
> 标签：regex, perl, batch-file

我有一组特定的重复文本块。它们具有动态文件名和动态消息。对于我要提取消息的每个文件名。

```
Filename: dynamicFile.txt
Property: some property to neglect
Message: the message I want
Time: dynamicTime 
```

我想在消息之后提取部分，这将是：`the message I want`.

我所拥有的：以下内容将匹配文件名和时间之间的任何内容。

```
(?<=Filename: %myFileVar%)(?s)(.*)(?=Time:) 
```

而`%myFileVar%`动态文件变量是我将使用的表达式。

现在我需要找到一种方法来省略文件名之后的任何内容，直到消息部分。在这里我不得不省略：

```
Property: some property to neglect
Message: 
```

怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:05:28.720

```
use warnings;
use strict;

my $text;
{
    local $/;
    $text = <DATA>;
}

my $myFileVar = 'dynamicFile.txt';

if ($text =~ /Filename: \Q$myFileVar\E.*?Message: (.*?)\s*Time:/s)
{
   print $1;    
}

__DATA__
Filename: dynamicFile.txt
Property: some property to neglect
Message: the message I want
Time: dynamicTime 
```

注意：这假设`Time:`总是紧跟在消息行之后。如果这不是真的，ikegami 的解决方案提供了一种跳过任何其他行的方法。

**解释：**

*   您可以简单地将一个变量插入到您的模式中，它将被插值。
*   但是，如果变量包含任何特殊的正则表达式字符，它们将被视为正则表达式字符。因此，您需要用 包围变量`\Q...\E`，这使得介于两者之间的所有内容都被逐字处理。如果您不这样做，则文件名中的点将匹配任何字符。
*   您不需要使用环视来仅捕获字符串的一部分。取而代之的是，使用捕获组——模式中的任何正常括号集都将自动放入变量`$1`,`$2`等中。
*   对于像这样的简单情况，最好在模式之后启用单行模式 ( `s`) 作为开关。（`/s`而不是`(?s)`）。在模式中打开它是实验性的，仅当您需要它仅应用于模式的一部分时才应使用它。
*   `.*?`应该使用而不是`.*`. 否则，该模式将匹配文件中从第一个`Message:`到最后一个`Time:`的所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:07:40.387

```
/
   ^
   Filename: \s* \Q$myFileVar\E \n
   (?: (?!Message:) [^\n]*\n )*
   Message: \s* ([^\n]*) \n
   (?: (?!Time:) [^\n]*\n )*
   Time:
/mx 
```

`(?: [^\n]*\n )*`跳过任意数量的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T11:37:24.360

**Perl can do `\K` Magic**

Adding a late answer because I'm not seeing my favorite solution. In Perl regex, `\K` tells the engine to drop everything we have matched so far from the final match. So you could have used this regex:

```
(?sm)^Filename:.*?Message: \K[^\r\n]+ 
```

or even:

```
(?m)^Message: \K[^\r\n]+ 
```

See [demo](http://regex101.com/r/kB4rH1).

# git - 无法创建标签

> ID：14976942
> 
> 赞同：3
> 
> 时间：2013-02-20T09:57:44.787
> 
> 标签：git, cygwin, cruisecontrol.net

我有一台运行 Windows 2008R2 的 CruiseControl.Net 构建机器。源代码在 git 存储库中。CruiseControl 使用**cygwin**访问 git 存储库。除了标记外，一切都很好。我想标记每个成功的构建，所以这里是**ccnet.config**的一部分：

```
<sourcecontrol type="git">
    <repository>git://xxx.xxx.xxx.xxx/Project</repository>
    <executable>C:\cygwin\bin\git</executable>
    <branch>projectName/branchToBuild</branch>
    <workingDirectory>Sources</workingDirectory>
    <autoGetSource>true</autoGetSource>
    <tagOnSuccess>true</tagOnSuccess>
    <tagCommitMessage>CCNet Build {0}</tagCommitMessage>
    <tagNameFormat>project/builds/v{0}</tagNameFormat>
    <committerName>CCNet</committerName>
</sourcecontrol> 
```

但是构建失败并出现错误：

```
ThoughtWorks.CruiseControl.Core.CruiseControlException: Source control operation failed: error: unable to create temporary sha1 filename : No such file or directory

error: unable to write tag file
. Process command: C:\cygwin\bin\git tag -a -m "CCNet Build 6.2.18.0" project/builds/v6.2.18.0
   at ThoughtWorks.CruiseControl.Core.Sourcecontrol.ProcessSourceControl.Execute(ProcessInfo processInfo)
   at ThoughtWorks.CruiseControl.Core.Sourcecontrol.Git.GitCreateTag(String tagName, String tagMessage, IIntegrationResult result)
   at ThoughtWorks.CruiseControl.Core.Sourcecontrol.Git.LabelSourceControl(IIntegrationResult result)
   at ThoughtWorks.CruiseControl.Core.IntegrationRunner.Build(IIntegrationResult result)
   at ThoughtWorks.CruiseControl.Core.IntegrationRunner.Integrate(IntegrationRequest request) 
```

有什么问题？如果我从命令行执行相同的命令，一切正常。

谢谢！

通过将此添加到 msbuild 项目文件来解决：

```
<Exec Command='C:\cygwin\bin\git tag -a -m "CCNet Build" project/builds/v$(CCNetLabel)' ContinueOnError="true"/>
<Exec Command='C:\cygwin\bin\git push origin tag project/builds/v$(CCNetLabel)' ContinueOnError="true"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:25:48.460

这看起来像运行 ccnet 服务的用户没有对存储库的写入权限。

# javascript - 通过结合日期和时间比较 2 个日期

> ID：14976943
> 
> 赞同：0
> 
> 时间：2013-02-20T09:57:46.687
> 
> 标签：javascript, jquery

```
var dateStart = $('input[id=orderdate-0]').val();
    var timeStart = $('input[id=ordertime-0]').val();
    var dateEnd = $('input[id=orderdate-1]').val();
    var timeEnd = $('input[id=orderime-1]').val();

    var startDate = new Date(dateStart + " " + timeStart);
    var endDate = new Date(dateEnd + " " + timeEnd);
     startDate.getTime();
    alert(startDate); 
```

我正在尝试将“2013-12-11”的 dateStart 和“11:00”的 timeStart 结合起来，并尝试从中生成日期。但我会收到无效日期等警报。代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:02:57.270

构造`Date`函数对它接受的日期字符串格式[非常特别。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)

例子：

*   1995 年 12 月 25 日
*   1995 年 8 月 9 日，星期三 00:00:00
*   2011-10-10T14:48:00 (JavaScript 1.8.5+)

还有另一个构造函数接收日期的各个组成部分。如果您将日期字符串分解为组件，则可以使用以下内容：

```
new Date(year, month, day, hour, minute); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:02:23.460

使用 moment JS 插件[http://momentjs.com/](http://momentjs.com/)

它是一个用于解析、验证、操作和格式化日期的日期库。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T10:03:09.183

这不是该函数[的有效格式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)`parse`，您可以改用它：

```
var arr = dateStart.split('-');
var timeArr = timeStart.split(':');
new Date(arr[0], arr[1] -1, arr[2], timeArr[0] -1, timeArr[1] -1); 
```

读[这个](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)。

[**现场演示**](http://jsfiddle.net/qNbKr/)

# java - ASM：如何根据类型轻松获取正确的操作码

> ID：14976948
> 
> 赞同：2
> 
> 时间：2013-02-20T09:57:57.273
> 
> 标签：java, bytecode, java-bytecode-asm

我正在使用 ASM 生成 Java 字节码。我需要创建一个动态代理，它可以通过额外的后处理覆盖基本上任何类型的方法。我能够做到这一切，但有一件事我看不出如何以一种好的方式去做。

我要覆盖的方法的第一个参数的类型可以是任何类型，因此我不能`ALOAD`在 ASM 代码中使用，但我可能需要使用`ILOAD`,`LLOAD`等`FLOAD`。我的问题：基于我要加载的参数类型，是有一种方法可以轻松知道哪个 LOAD 指令操作码有效，因此我不必执行以下操作：

```
if (parameterType == int.class)
    mv.visitVarInsn(ILOAD, 1);
else if 
    ...
else 
    mv.visitVarInsn(ALOAD, 1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T15:09:23.907

假设`parameterType`是包含类型描述符（如or ）的类型`Class`OR ，则：`String``"I"``"Ljava/lang/String;"`

```
import org.objectweb.asm.Type;

...

Type parameterAsmType = Type.getType(parameterType);
int opcode = parameterAsmType.getOpcode(Opcodes.ILOAD);
mv.visitVarInsn(opcode, 1); 
```

对于其他操作码也是如此。有关详细信息，请参阅[`Type.getOpcode()`javadoc](https://asm.ow2.io/javadoc/org/objectweb/asm/Type.html#getOpcode-int-)。

# c# - 如何在webbrowser c# app中为textarea设置值

> ID：14976950
> 
> 赞同：0
> 
> 时间：2013-02-20T09:58:04.230
> 
> 标签：c#, browser

我想用 c# webbrowser 填充 textarea ，但 textarea 是用“jhtmlarea.js”创建的。

此代码不起作用：

```
HtmlElement textArea = webBrowser1.Document.All["message"];
        if (textArea != null)
        {
            textArea.InnerText = "This is a test";
        } 
```

如何将字符串设置为“jhtmlarea.js”之类的 javascript 编辑器？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:02:46.197

Webbrowser 控件包含一个名为“InvokeScript”的方法。您可以使用它来调用文档中的一段 JavaScript。只需调用

```
browser.InvokeScript("myFunction", new object[] { arg1, arg2,}); 
```

调用函数。

请参阅[此处](http://msdn.microsoft.com/en-us/library/cc491132%28v=vs.100%29.aspx)以获取更多参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:11:32.657

```
 HtmlElement ele = webBrowser1.Document.GetElementById("message");
 if (ele != null)
    ele.InnerText = "This is a test"; 
```

# visual-studio-2010 - VS 2010 - 缺少项目模板（未找到 vsInstallTemplates）

> ID：14976952
> 
> 赞同：1
> 
> 时间：2013-02-20T09:58:08.680
> 
> 标签：visual-studio-2010, sharepoint, configuration, project-template

SharePoint 项目模板未显示在我们安装在服务器上的 VS 2010 中（SP 已安装并在该机器上运行）。

经过一番研究，我从另一台机器上复制了丢失的 .zip 文件，并将它们粘贴到“{VS Installation Path}/Common7/IDE/Project Templates”中。

现在我应该以管理员权限从 VS 命令提示符运行“devenv /VsInstallTemplates”。

问题是当我键入时......它无法识别“VsInstallTemplates”：S 错误说：“未知开关”。这不是一个错字，因为我已经写了 100 遍了。

在谷歌中搜索，但似乎没有人遇到过“未知开关”的问题......

有什么提示吗？？

# ios - iOS 后台保存在 Core Data 中

> ID：14976953
> 
> 赞同：1
> 
> 时间：2013-02-20T09:58:09.753
> 
> 标签：ios, ios5, core-data, asynchronous, nsmanagedobjectcontext

我想确保我的主线程永远不会阻塞，这就是为什么我想在后台保存我的核心数据。

我一直在阅读 Apple 文档以及此链接（以及许多其他文档，但我发现这个非常有用）： http: [//www.cocoanetics.com/2012/07/multi-context-coredata/](http://www.cocoanetics.com/2012/07/multi-context-coredata/)，虽然我不能获得正确的架构。

在我的 AppDelegate.m 中：

```
- (NSManagedObjectContext *)managedObjectContext
{
    if (_managedObjectContext != nil) {
        return _managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        _saveContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
        [_saveContext setPersistentStoreCoordinator:coordinator];

        _managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
        [_managedObjectContext setParentContext:_saveContext];
    }
    return _managedObjectContext;
} 
```

然后为了保存，我会做这样的事情：

```
// var 'context' is the context coming from method managedObjectContext
// this code is in the same thread 'context' is created in (the main thread)
NSError *error = nil;
if ([context save:&error]) {
    [context.parentContext performBlock:^{
        NSError *err = nil;
        if(![context.parentContext save:&err]) {
            NSLog(@"Error while saving context to the persistent store");
        }
    }];
} else {
    // handle error
} 
```

这是我通过阅读我之前提供的链接所得到的。保存不起作用，一旦应用程序关闭并重新打开，对任何托管对象所做的更改都将消失：它们从未保存到持久存储中。

我猜是有道理的，因为我在 1 个线程中创建了 2 个 NSManagedObjectContexts，Apple 文档明确声明每个线程只有 1 个 NSManagedObjectContext。那么如何设置 _managedObjectContext 和 _saveContext 之间的父/子关系呢？我知道 _saveContext 需要在另一个线程中初始化，但我无法使用这种方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:08:10.720

*（来自评论）*

所有“新”托管对象上下文类型（`NSMainQueueConcurrencyType`, `NSPrivateQueueConcurrencyType`）都管理它们自己的线程，没有必要在特殊线程上创建上下文。唯一要记住的是始终在上下文中使用`performBlock`or for 操作。`performBlockAndWait`这确保了操作在正确的队列和线程上执行。

所以你的代码没问题。

（事实证明，错误是错误的上下文被传递给您的保存例程，因此内部保存没有在顶级上下文中完成。）

# android - android 片段 setOnClickListener

> ID：14976958
> 
> 赞同：0
> 
> 时间：2013-02-20T09:58:31.317
> 
> 标签：android, android-layout, android-fragments

我使用片段，当我单击编辑文本时，会显示带有特殊键盘的布局（许多按钮可单击），但我找不到检测按钮单击的正确方法

这是 onCreateView 代码：

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) 
    {
        View view = inflater.inflate(R.layout.fragment_rsslist_overview,container, false);
                try {
                    setKeys();

                } catch (Exception e) {
                    Log.w(getClass().getName(), e.toString());
                }
        //

        return view;
    } 
```

这是 setKeys 代码：（我在 mBSpace 按钮上尝试了很多东西）

```
 public void setKeys() {
        mWindowWidth = getActivity().getWindowManager().getDefaultDisplay().getWidth(); // getting
        // window
        // height
        // getting ids from xml files
        mB[0] = (Button) getActivity().findViewById(R.id.xA);
        mB[1] = (Button) getActivity().findViewById(R.id.xB);
        mB[2] = (Button) getActivity().findViewById(R.id.xC);
        mB[3] = (Button) getActivity().findViewById(R.id.xD);
        mB[4] = (Button) getActivity().findViewById(R.id.xE);
        mB[5] = (Button) getActivity().findViewById(R.id.xF);
        mB[6] = (Button) getActivity().findViewById(R.id.xG);
        mB[7] = (Button) getActivity().findViewById(R.id.xH);
        mB[8] = (Button) getActivity().findViewById(R.id.xI);
        mB[9] = (Button) getActivity().findViewById(R.id.xJ);
        mB[10] = (Button) getActivity().findViewById(R.id.xK);
        mB[11] = (Button) getActivity().findViewById(R.id.xL);
        mB[12] = (Button) getActivity().findViewById(R.id.xM);
        mB[13] = (Button) getActivity().findViewById(R.id.xN);
        mB[14] = (Button) getActivity().findViewById(R.id.xO);
        mB[15] = (Button) getActivity().findViewById(R.id.xP);
        mB[16] = (Button) getActivity().findViewById(R.id.xQ);
        mB[17] = (Button) getActivity().findViewById(R.id.xR);
        mB[18] = (Button) getActivity().findViewById(R.id.xS);
        mB[19] = (Button) getActivity().findViewById(R.id.xT);
        mB[20] = (Button) getActivity().findViewById(R.id.xU);
        mB[21] = (Button) getActivity().findViewById(R.id.xV);
        mB[22] = (Button) getActivity().findViewById(R.id.xW);
        mB[23] = (Button) getActivity().findViewById(R.id.xX);
        mB[24] = (Button) getActivity().findViewById(R.id.xY);
        mB[25] = (Button) getActivity().findViewById(R.id.xZ);
        mB[26] = (Button) getActivity().findViewById(R.id.xS1);
        mB[27] = (Button) getActivity().findViewById(R.id.xS2);
        mB[28] = (Button) getActivity().findViewById(R.id.xS3);
        mB[29] = (Button) getActivity().findViewById(R.id.xS4);
        mB[30] = (Button) getActivity().findViewById(R.id.xS5);
        mB[31] = (Button) getActivity().findViewById(R.id.xS6);
        mBSpace = (Button) getActivity().findViewById(R.id.xSpace);
        mBdone = (Button) getActivity().findViewById(R.id.xDone);
        mBChange = (Button) getActivity().findViewById(R.id.xChange);
        mBack = (Button) getActivity().findViewById(R.id.xBack);
        mNum = (Button) getActivity().findViewById(R.id.xNum);
//      for (int i = 0; i < mB.length; i++)
        mBSpace.setOnClickListener( this);
/*      
        mBSpace.setOnClickListener( new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    edittext_onClick(v );
                }
              });
*/          
/*          
            mB[i].setOnClickListener( this);
        mBSpace.setOnClickListener( this);
        mBdone.setOnClickListener( this);
        mBack.setOnClickListener( this);
        mBChange.setOnClickListener( this);
        mNum.setOnClickListener( this);
//      mNum.setOnClickListener( this);
*/      

    } 
```

有人知道他正确的语法对此做了什么吗？我尝试将 setkey() 调用为：

```
 public void onActivityCreated (Bundle savedInstanceState){
    setKeys();
    super.onActivityCreated(savedInstanceState);
} 
```

我没有错误，但也没有点击检测......提前谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:02:32.697

您是否在 EditText 的 xml 元素中尝试过 android:clickable="true" ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:15:01.400

确保特殊键盘布局是当前 contentView 的一部分。如果不是，并且您将其膨胀到当前视图中，那么当您获取对按钮的引用时，您应该使用

```
buttonA = inflatedLayout.findViewById(R.id.button); 
```

还要创建一个通用的 onClickListener 并将所有按钮绑定到它

```
OnClickListener buttonClickListener = new OnClickListener() {

      @Override
            public void onClick(View v) {

                edititext.setText(v.getTag().toString()); 
                // or whatever logic you are using

            }

} 
```

# c# - 如何处理在外部 dll 上引发的异常？

> ID：14976959
> 
> 赞同：7
> 
> 时间：2013-02-20T09:58:33.217
> 
> 标签：c#, visual-studio-2010, visual-studio, exception, exception-handling

我开发了一个使用外部 dll 作为 FTPServer 的项目，我在我的项目上创建了 FTP 服务器，如下所示：

`private ClsFTPServer _ClsFTPServer;
_ClsFTPServer = new ClsFTPServer(FTPUserName, FTPPassword, FTPPath);`

上面的代码创建了一个 FTP 服务器类的实例，该类在其构造函数上启动 FTPserver，当客户端正确发送请求时，它作为一个模块独立工作，但是当错误的请求到达 FTP 服务器时，它会引发异常并导致我的应用程序崩溃。

如何处理外部 dll 引发的异常以防止我的应用程序崩溃？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T10:32:28.080

我最近回答了一个类似的（ish）问题，这可能很有用 - [捕获完全意外的错误](https://stackoverflow.com/questions/14773662/catch-completely-unexpected-error/14773698#14773698)

编辑。我必须同意 Hans 上面的评论 - 可能是寻找另一个 FTP 服务器的想法。

[为了完整起见，这里是来自 - http://msdn.microsoft.com/en-GB/library/system.windows.forms.application.threadexception.aspx](http://msdn.microsoft.com/en-GB/library/system.windows.forms.application.threadexception.aspx)的 appdomain/thread 异常设置

```
Application.ThreadException += new ThreadExceptionEventHandler  (ErrorHandlerForm.Form1_UIThreadException);

// Set the unhandled exception mode to force all Windows Forms errors to go through 
// our handler.
Application.SetUnhandledExceptionMode(UnhandledExceptionMode.CatchException);

// Add the event handler for handling non-UI thread exceptions to the event. 
AppDomain.CurrentDomain.UnhandledException +=
    new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:06:01.547

您可能已经尝试过，但以防万一，您是否尝试过将其包装在`try catch`?

```
try
{
    _ClsFTPServer = new ClsFTPServer(FTPUserName, FTPPassword, FTPPath);
    ...
}
catch(Exception e)
{
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-17T12:41:54.717

如果使用外部非托管\不安全代码，.NET（.net 4 以上）默认无法处理 dll 代码内部发生的内存访问冲突异常。为了捕获这些异常，需要做三件事。我做了他们，它对我有用：

1.  将这些属性添加到其中发生异常的方法中：（
    调用非托管代码方法的方法。）

    ```
    [HandleProcessCorruptedStateExceptions]
    [SecurityCritical] 
    ```

2.  将此标签添加到**运行时标签下方的****App.Config**文件中：

     **```
    <runtime>
    <legacyCorruptedStateExceptionsPolicy enabled="true"/>
    <!-- other tags -->
    </runtime> 
    ```** 
***   使用 System.AccessViolationException 异常类型捕获此类异常：

    ```
     try{
            //Method call that cause Memory Access violation Exeption
         }
    catch (System.AccessViolationException exception)
         {
            //Handle the exception here
          } 
    ```** 

 **我所说的只是解决这类异常的方法。有关此异常的自我以及此方法如何工作的更多信息，请参阅[System.AccessViolationException](https://airbrake.io/blog/dotnet-exception-handling/system-accessviolationexception)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-20T10:24:32.357

通过在对对象及其方法的每个调用周围放置一个 try...catch 块。

就像是：

```
try
{
    // use the DLL in some way
}
catch (Exception e) 
{
    // Handle the exception, maybe display a warning, log an event, etc.)
} 
```

另请注意，在 Visual Studio 下运行时，如果您转到“调试”菜单并选择“异常...”，如果您在调试器下启动程序，它将允许调试器中断所有异常，而不仅仅是未处理的异常. 只需单击“Common Language Runtime Exceptions”旁边的“Thrown”复选框。**

# python - 错误的架构错误mysql python

> ID：14976965
> 
> 赞同：-1
> 
> 时间：2013-02-20T09:58:58.363
> 
> 标签：python, mysql, flask, mysql-python

我使用flask。我使用安装MySQL `easy_install mysql-python`，然后尝试运行我的app.py，但是出现了这些错误。这些是什么意思？

```
Traceback (most recent call last):
  File "app.py", line 7, in <module>
    import MySQLdb
  File "/Users/ozcan/Documents/python/venv/lib/python2.7/site-packages/MySQLdb/__init__.py", line 19, in <module>
    import _mysql
ImportError: dlopen(/Users/ozcan/Documents/python/venv/lib/python2.7/site-packages/_mysql.so, 2): no suitable image found.  Did find:
    /Users/ozcan/Documents/python/venv/lib/python2.7/site-packages/_mysql.so: mach-o, but wrong architecture 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T11:01:36.217

我建议改用 Flask-MySQL。这是文档[https://flask-mysql.readthedocs.org/en/latest/](https://flask-mysql.readthedocs.org/en/latest/)

# fortran - 编译时出现奇怪的输出和分支警告

> ID：14976967
> 
> 赞同：0
> 
> 时间：2013-02-20T09:59:05.677
> 
> 标签：fortran, gfortran, fortran77

我使用 gfortran 编译了一个 fortran 77 代码并得到以下错误：

10 open (23,file=outfile,status='old',access='append',err=10)
1 警告：(1) 处的分支可能导致无限循环

这种情况发生了好几次。

输出文件之一如下所示：

^L6a10È <90> ) &<9b>LÓLÓLÕ<91><90> <90> <90> È <8e><9b>LÓLÓLÕ<93>2 !MERCURY ¢¤õ/!ô<8a><8a>< 90> ÿ<90> ÿ<90> ÿÌÖÏ©ü}M<91> "金星 «}>±{©±<8b><90> ÿ<90> ÿ<90> ÿÊº93¿<8d>d<91>

但是，它应该看起来像一个文本表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:25:17.120

你的代码行

```
10 open (23,file=outfile,status='old',access='append',err=10) 
```

指定`open`语句应在遇到错误时将控制权转移到自身（标签 10），因此任何错误都可能触发无限循环。它还抑制错误消息的输出。如果您只想检查错误状态，我建议使用`iostat`and/or `iomsg`(Fortran 2003) 参数：

```
open (23, file=outfile, status='old', access='append', iostat=ios, iomsg=str) 
```

这`ios`是一个整数，如果没有发生错误，则为零，否则为非零，并且`str`是一个字符变量，将记录相应的错误消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:19:41.970

`err=`您的语句中的参数`open`指定了一个语句标签，当`open`由于某种原因失败时要分支到该标签。您的代码为标记的行指定了一个分支，该行`10`恰好是包含该`open`语句的行。这可能不是一个好主意；一个更好的主意是分支到可以优雅地处理`open`语句中的错误的行。

gfortran 的警告是正确的。

至于输出文件中明显的垃圾，如果没有看到用于编写垃圾的代码（或者您认为可能是珍珠），则很难诊断和解决该问题。

# python - 使用子进程在标准输入中读取多行

> ID：14976968
> 
> 赞同：0
> 
> 时间：2013-02-20T09:59:05.350
> 
> 标签：python, subprocess, stdin

我正在尝试从 python 运行一个 c++ 程序。我的问题是每次我运行时：

```
subprocess.Popen(['sampleprog.exe'], stdin = iterate, stdout = myFile) 
```

它只读取文件中的第一行。每次我用一个while循环将它括起来时，它都会因为无限循环而崩溃。有没有其他方法可以读取里面的所有行`testcases.txt`？

我的示例代码如下：

```
someFile = open("testcases.txt","r")
saveFile = open("store.txt", "r+")

try:
    with someFile as iterate:
        while iterate is not False:
            subprocess.Popen(['sampleprog.exe'],stdin = iterate,stdout = saveFile)

except EOFError:
    someFile.close()
    saveFile.close()
    sys.exit() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:33:10.543

读取文件内所有行的最佳方法，假设您想逐行读取它，并且只将当前行传递给程序是

```
with open("testcases.txt","r") as someFile:
    iterate = someFile.readlines()
    for line in iterate:
        #Code 
```

someFile.readlines() 读取并返回 someFile 中所有行的列表。但是，您需要将其传递给 sampleprog.exe。我会为此使用 Popen.communicate() 。可能这是一个巨大的矫枉过正，但你的循环看起来像

```
for line in iterate:
    s = subprocess.Popen(['sampleprog.exe'], stdin = subprocess.PIPE, stdout = saveFile)
    s.communicate(line) 
```

此外，您应该打开 saveFile 进行写入（'w'rite 或 'a'pend 选项）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:53:26.047

您正在向 Popen 传递一个打开以作为标准输出读取的文件。我认为输出应该是这样构造的：

```
 saveFile = open("store.txt", "w") 
```

# performance - 替代嵌套选择语句

> ID：14976969
> 
> 赞同：1
> 
> 时间：2013-02-20T09:59:07.997
> 
> 标签：performance, select, nested

如果可以的话，我想避免使用嵌套的选定语句（我怀疑我会遇到性能问题）。我正在尝试从金融交易表中获取每种交易类型的总数。我猜我可以使用同一张表中的多个选择，但我的 'BFWD' 数字返回它们的结果`"bil_yer + 1"`（不仅仅是 raw `bil_yer`）。任何建议将不胜感激。

```
SELECT bil_yer,
    acc_num,
    ubsgch_key_num,
    sum(bfw_arr) AS bfw_arr,
    sum(bfw_int) AS bfw_int,
    sum(ytd_chg) AS ytd_chg,
    sum(ytd_och) AS ytd_och
FROM (
    -- BFWD Charges
    SELECT src_bil_yer + 1 AS bil_yer,
        src_acc_num AS acc_num,
        des_ubsgch_key_num AS ubsgch_key_num,
        src_trn_amt AS bfw_arr,
        0 AS bfw_int,
        0 AS ytd_chg,
        0 AS ytd_och
    FROM av_ub_tran
    WHERE src_trn_cde <> 2601

    UNION ALL -- BFWD Interest
    SELECT src_bil_yer + 1 AS bil_yer,
        src_acc_num AS acc_num,
        des_ubsgch_key_num AS ubsgch_key_num,
        0 AS bfw_arr,
        src_trn_amt AS bfw_int,
        0 AS ytd_chg,
        0 AS ytd_och
    FROM av_ub_tran
    WHERE src_trn_cde = 2601

    UNION ALL -- YTD Current Charges - Raised in the current year but NOT past due
    SELECT src_bil_yer AS bil_yer,
        src_acc_num AS acc_num,
        des_ubsgch_key_num AS ubsgch_key_num,
        0 AS bfw_arr,
        0 AS bfw_int,
        src_trn_amt AS ytd_chg,
        0 AS ytd_och
    FROM av_ub_tran
    WHERE src_trn_cde = 2600
      AND src_due_dte >= 'TODAY'

    UNION ALL -- YTD Current Overdue Charges - Raised in the current year but PAST due
    SELECT src_bil_yer AS bil_yer,
        src_acc_num AS acc_num,
        des_ubsgch_key_num AS ubsgch_key_num,
        0 AS bfw_arr,
        0 AS bfw_int,
        0 AS ytd_chg,
        src_trn_amt AS ytd_och
    FROM av_ub_tran
    WHERE src_trn_cde = 2600
      AND src_due_dte < 'TODAY'
)
GROUP BY
    bil_yer,
    acc_num,
    ubsgch_key_num 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T11:26:46.600

您没有提到您使用的 RDBMS，但大多数 RDBMS 都有[CASE 语句](http://msdn.microsoft.com/en-us/library/ms181765.aspx)。你可以使用它。您`src_bil_yer + 1`在第一个子查询中使用它是一个`group by`字段，因此无论如何您都必须使用嵌套查询。尝试以下查询：

```
SELECT 
    bil_yer,
    acc_num,
    ubsgch_key_num,
    sum(bfw_arr) AS bfw_arr,
    sum(bfw_int) AS bfw_int,
    sum(ytd_chg) AS ytd_chg,
    sum(ytd_och) AS ytd_och
FROM (
    SELECT src_bil_yer + 1 AS bil_yer,
        src_acc_num AS acc_num,
        des_ubsgch_key_num AS ubsgch_key_num,
        CASE WHEN src_trn_cde <> 2601 THEN src_trn_amt ELSE 0 END AS bfw_arr,
        CASE WHEN src_trn_cde = 2601 THEN src_trn_amt ELSE 0 END AS bfw_int,
        0 AS ytd_chg,
        0 AS ytd_och
    FROM av_ub_tran

    UNION ALL 
    SELECT src_bil_yer AS bil_yer,
        src_acc_num AS acc_num,
        des_ubsgch_key_num AS ubsgch_key_num,
        0 AS bfw_arr,
        0 AS bfw_int,
        CASE WHEN src_due_dte >= 'TODAY' THEN src_trn_amt ELSE 0 END AS ytd_chg,
        CASE WHEN src_due_dte <  'TODAY' THEN src_trn_amt ELSE 0 END AS ytd_och
    FROM av_ub_tran
    WHERE src_trn_cde = 2600
)
GROUP BY
    bil_yer,
    acc_num,
    ubsgch_key_num 
```

# c++ - 具有静态成员的静态结构

> ID：14976971
> 
> 赞同：11
> 
> 时间：2013-02-20T09:59:22.960
> 
> 标签：c++, static, struct

今天我发现自己创建了一个由 2 个整数组成的静态数组，并且因为在 C++（不是 C++11）中不允许它的内联初始化，所以我恢复使用 struct 类型的静态变量。

```
class MyWidget {
  ...
  static const struct Margin {
    const int horizontal = 1;
    const int vertical = 1;
  } margin;

}; 
```

我注意到内部变量只对 struct Margin 的所有实例使用一次，所以我决定也将它们设为静态。

```
class MyWidget {
  ...
  static const struct Margin {
    static const int horizontal = 1;
    static const int vertical = 1;
  } margin;

}; 
```

让我感到奇怪的是声明静态结构变量与使用静态成员的静态结构变量之间的区别。AFAC 静态对象在内存中只分配一次，因此无论我的成员是否是静态的，Margin 结构都只会分配一次。

我错过了什么吗？是否存在差异，还是仅仅是语法糖？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T10:15:59.530

您似乎对“静态结构”有点困惑，因为在 C++ 中，没有静态结构之类的东西（与 C# 等语言相反，静态类是没有全局函数的解决方法）。

您正在做的是创建该类的实例，并使**实例**( `margin`) 静态（和常量）。所以你的结构不是静态的，你只是定义一个结构，并创建`static const`它的一个实例，属于`MyWidget`. 现在给出的两个示例之间的区别应该是非常明显的。

在第一个示例中，您正在创建一个名为 margin 的静态变量，属于`MyWidget`，这意味着您可以`horizontal`像这样访问该成员

```
MyWidget::margin.horizontal 
```

`margin`您创建的实例在哪里。

而如果您将结构的成员设为静态，您将无法做到这一点。相反，您必须像这样访问它们：

```
MyWidget::Margin::horizontal 
```

`Margin`在哪里`struct`。但是请注意，在第二种情况下，不需要静态实例`margin`，因为它没有与之关联的实例字段。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T10:12:35.940

确实有区别：

```
class MyWidget {
  ...
  static const struct Margin {
    const int horizontal = 1;
    const int vertical = 1;
  } margin;

  void foo() {
    Margin anotherMargin = { 3, 4 };
  }
}; 
```

这将创建另一个 Margin 实例，具有不同的成员。`static`in`static const struct Margin {...} margin;`适用于 variable ，而不适用于`margin`class/struct `Margin`。这意味着所有 MyWidget 对象只共享一个 Margin 对象，但是您可以很好地创建具有不同值的其他 Margin 对象。上面的代码本身不会编译`horizontal`并且`vertical`是静态的，因为这样 Margin 对象将没有成员变量（静态不是真正的成员），因此所有 Margin 对象都将共享`horizontal`和`vertical`值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T10:12:10.293

是的，存在显着差异。在这两种情况下，您都声明`MyWidget::margin`它是类型`MyWidget::Margin`并且它们是静态的。在第一种情况下`margin`，是一个具有两个字段的对象，`horizontal`并且`vertical`. 在第二种情况下，`margin`是一个没有字段的对象，您可以删除该对象。

在第一种情况下，您需要使用表单`margin.vertical`（或者`MyWidget::margin.vertical`如果从外部访问`MyWidget`）来访问字段，在第二种情况下，您可以这样做`Margin::vertical`（或`MyWidget::Margin::vertical`）。

# objective-c - Cocoa：鼠标中键点击事件（全局）+手势API？

> ID：14976972
> 
> 赞同：2
> 
> 时间：2013-02-20T09:59:22.627
> 
> 标签：objective-c, cocoa, gesture, gesture-recognition, shortcuts

是否有任何资源可以指导我如何使我的应用程序响应不是左/右按钮的任何类型的鼠标单击？在全球范围内，即使我的应用程序未激活。

对于魔术鼠标/触控板，是否有任何框架或资源可用于轻松地将我的代码附加到特定手势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:05:00.970

您可以找到与鼠标事件相关的所有内容： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingMouseEvents/HandlingMouseEvents.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingMouseEvents/HandlingMouseEvents.html)

和触控板事件： [https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingTouchEvents/HandlingTouchEvents.html#//apple_ref/doc/uid/10000060i-CH13-SW10](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingTouchEvents/HandlingTouchEvents.html#//apple_ref/doc/uid/10000060i-CH13-SW10)

这是一个堆栈溢出[链接](https://stackoverflow.com/questions/4752427/osx-detect-system-wide-keydown-events-solved-with-sample-code)，其中解释了处理全局事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T21:22:50.430

这是一个基于 Shashank（非常有帮助）答案的代码示例。

```
NSEventMask eventMask = NSOtherMouseDownMask|NSOtherMouseUpMask;
[NSEvent addGlobalMonitorForEventsMatchingMask:eventMask
       handler:^(NSEvent *event) {
           if (event.type == NSOtherMouseDown) {
               NSLog(@"middle click down");
           } else if (event.type == NSOtherMouseUp) {
               NSLog(@"middle click up");
           }
       }]; 
```

# javascript - 如何在 Kendo UI TabStrip 中获取对当前选定选项卡的引用？

> ID：14976991
> 
> 赞同：9
> 
> 时间：2013-02-20T10:00:10.717
> 
> 标签：javascript, jquery, kendo-ui, kendo-tabstrip

我正在创建一种基于“x”图像删除 Kendo UI TabStrip 选项卡的方法。我希望它以与其他选项卡控件（例如 Chrome/IE）相同的方式工作：

*   如果活动选项卡已关闭，则选择下一个选项卡（或者如果它是最后一个选项卡，则选择上一个选项卡）。
*   如果它不是活动选项卡，则确保活动选项卡保持打开状态。

我相信我需要获取对当前选项卡的引用，然后检查被删除的选项卡是否是活动选项卡。

我目前的代码只是关闭了与单击的图像相关的选项卡：

```
function DeleteTab(imgObj) {

        var tabStrip = $("#tabstrip").data("kendoTabStrip");

        var deleteIndex = $(imgObj).closest("li").index();
        tabStrip.remove(deleteIndex);
} 
```

如何获得对当前选定选项卡的引用？我可以通过搜索来做到这一点`k-state-active`吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-06T08:11:14.057

`tabstrip.select()`将返回当前选择的选项卡。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-09-05T10:28:08.987

```
tabStrip.select().index(); 
```

将返回当前选择的标签索引

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-05T10:30:51.090

要获取标签条当前选定的标签，您可以使用：

```
var selectedTabElem = $("#tabstripElemId").data('kendoTabStrip').select();// this will be the <li> element that is currently selected 
```

然后可以访问当前选项卡文本，如下所示：

```
var currentSelectedTabText = $(selectedTabElem).children(".k-link").text(); 
```

# javascript - 如何使用 javascript 在 3d 画布上绘制图像

> ID：14976992
> 
> 赞同：0
> 
> 时间：2013-02-20T10:00:10.667
> 
> 标签：javascript, html, canvas

我有这个

```
function doFirst(){
    var x = document.getElementById('canvas'); 
    var canvas = x.getContext('webgl') || x.getContext("experimental-webgl");
 } 
```

我想在画布上绘制一个图像“sheep.png”。我使用它，但它不起作用：

```
var pic = new Image();
pic.src = "images/sheep.png";
pic.addEventListener("load", function() { canvas.drawImage(pic,0,0,0)}, false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T10:07:10.470

`drawImage`仅用于 2D 上下文，不能在 webgl 上下文中使用。

为了在 webgl 中使用它，您需要构建一个网格，并将您的图像用作纹理。

如果您不熟悉 webgl，您可能希望查看 three.js 作为更易于使用的替代方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-20T10:07:13.013

```
drawImage() 
```

我猜只需要 3 个参数。

请参阅此[演示](http://jsfiddle.net/h36Xq/)。

和这个[参考](http://www.html5canvastutorials.com/tutorials/html5-canvas-images/)

# c# - 创建网格视图并使用给定的详细信息更新表格

> ID：14976993
> 
> 赞同：-2
> 
> 时间：2013-02-20T10:00:11.073
> 
> 标签：c#, sql, gridview

我正在寻找更新用户提供的详细信息，例如表格中的名称、地址..等，并在网格视图中显示。

这样我就可以在gridview本身中编辑/更新

```
string s = Session["something"].ToString();
            string str=string.Empty;

        //bool bNextResult;
        SqlConnection con = new SqlConnection("server=AMRNDHW1995\\DEV1;UID=POMS_ZOETIS_D_RO;PWD=12Werty@; database=POMS_Zoetis_D;");

        SqlCommand cmd = new SqlCommand("select amount from budget_detail where year='" + s + "'", con);
        SqlDataReader dr;
        con.Open();
        dr = cmd.ExecuteReader();
        SqlDataAdapter da = new SqlDataAdapter(cmd);

        //DataSet ds =new DataSet();
        //da.Fill(ds);

        //while (bNextResult == true)
        //{

        while (dr.Read())
        {

            str += dr.GetValue(0).ToString()               
                +"\n"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:11:50.890

```
DataRow DR = dtTable.NewRow();
DR["Name"]=TxtName.Text;
DR["Age"]=TxtAge.Text;
DR["Place"]=TxtPlace.Text;
dtTable.adtTable.Rows.Add(DR);
dataGridView1.DataSource = dtTable; 
```

# java - TableFilterDemo.java 不工作

> ID：14976995
> 
> 赞同：1
> 
> 时间：2013-02-20T10:00:16.350
> 
> 标签：java, swing, jtable

我正在学习如何向 JTable 添加过滤器，所以我在 sun 网站上找到了教程

[http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableFilterDemoProject/src/components/TableFilterDemo.java](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/TableFilterDemoProject/src/components/TableFilterDemo.java)

我将代码复制到netbeans，代码编译并成功运行，但是当我在filtertext中输入“jane”时，表数据只是消失而不是显示该行。

寻求帮助谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T10:05:56.663

它区分大小写。输入“简”

祝你好运

**更新**

如果你想让它不区分大小写， (?i) 在正则表达式之前可以正常工作，所以改变这一行

```
rf = RowFilter.regexFilter(filterText.getText(), 0); 
```

像这样。

```
rf = RowFilter.regexFilter("(?i)"+ filterText.getText(), 0); 
```

祝你好运！

# javascript - 如何使用 css3 翻转并更改元素？

> ID：14976999
> 
> 赞同：0
> 
> 时间：2013-02-20T10:00:39.220
> 
> 标签：javascript, jquery, html, css, css-transitions

我的上下文 HTML

```
<div class="cart">
     <div class="black"></div>
</div> 
```

JS

```
var whiteEl="<div class="white"></div>";
//I would like to replace black with white, flip animation.
$(".cart").empty().append(whiteEl);
whiteEl.addClass("flipanim"); 
```

css

```
@-webkit-keyframes flip{
    from{
        -webkit-transform: rotateY(0deg);           
    }
    to {
        -webkit-transform: rotateY(180deg);
    }
  }
     /*
similar cross browser code*/

.flipanim{
    -webkit-animation: flip 1s 1;
    -moz-animation:flip 1s 1;
    -o-animation:flip 1s 1; 
    animation:flip 1s 1;
    -webkit-transition: all .5s;
    -moz-transition: all .5s;
    -o-transition: all .5s;
   transition: all .5s;
} 
```

我正在使用关键帧动画来显示变换动画。

并在 javascript 中将类添加到附加元素。

我的动画不工作。

如何将带有翻转动画的新元素添加到“.cart”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:07:06.147

尝试这个

```
 $(".cart").html('').append(whiteEl);
 //since you have already appended the created div here.. you can use class selctor.
 $('.white').addClass("flipanim"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:51:25.690

您不需要为此删除任何内容，也不需要 Javascript：

html标记：

```
<div class="container">
    <div class="cart">
         <div class="black">Black side</div>
         <div class="white">White side</div>
    </div>
</div> 
```

CSS：

```
.cart div {
  position: absolute;
  width: 100%;
  height: 100%;
  -webkit-backface-visibility: hidden;
}
.cart .black {
    background:#111;
    color:white;
}
.cart .white {
  -webkit-transform: rotateY(180deg);
  color: black;
  background: #eee;
} 
```

现在您可以简单地应用您的效果：

```
.container:hover .cart {
  -webkit-transform: rotateY(180deg);
} 
```

查看[演示](http://jsfiddle.net/Gnxhd/2)