# StackOverflow 问答 13026000-13026999

# mysql - 在mysql中添加两个值

> ID：13026005
> 
> 赞同：4
> 
> 时间：2012-10-23T08:07:52.170
> 
> 标签：mysql

我有一张这样的桌子：

```
A      B        C         Value
1990    1   1   0.791684449
1990    1   2   0.058315583
1990    2   3   2.940000057
1990    3   4   8.975000381
1990    4   5   0
1990    4   6   0.004666695
1990    4   7   0.401333332
1990    5   8   2.609000206
1990    6   9   6.400992393
1990    6   10  9.489910126
1990    6   11  1.31809783
1990    7   12  214.4270172
1990    8   13  0.097975887
1990    8   14  0.680250943
1990    8   15  9.270773888
1990    9   16  1.204782724
1990    9   17  4.113919258
1990    9   18  3.486953974
1990    9   19  1.675345063
1990    10  20  0.434966862
1990    10  21  2.561163187
1990    10  22  2.415041685
1990    10  23  2.660344124
1990    10  24  7.127485275 
```

现在我只想添加那些 B 相同并根据 C 显示在表中的值，例如：

```
1990        1   0.850000031
1990        2   2.940000057
1990        3   8.975000381
1990        4   0.406000027
1990        5   2.609000206
1990        6   17.20900035 
```

我怎样才能在 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:09:12.500

使用`GROUP BY`和`SUM`。

试试这个 SQL：

```
SELECT A, B, SUM(Value) AS TotalValue
FROM yourtable
GROUP BY A, B 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/9fa89/1)

有关更多详细信息，请参阅文档：

*   [GROUP BY（聚合）函数](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T08:09:08.053

使用[*AGGREGATE FUNCTION*](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html) `SUM()`计算总值并按 和`A`分组`B`

```
SELECT A, B, SUM(c) totalValue
FROM tableName
GROUP BY A, B 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/7e859/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:10:18.580

按 B,A 从表组中选择 A,B, sum(value)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T08:18:09.393

试试这个：

```
SELECT A, min(c) c,SUM(value) totalValue
FROM tableName
GROUP BY A, B 
```

# c# - 如何在视觉工作室设计视图中居中？

> ID：13026009
> 
> 赞同：0
> 
> 时间：2012-10-23T08:08:29.250
> 
> 标签：c#, visual-studio, visual-studio-2008, user-interface

我遇到了一个奇怪的问题，如何在 Visual Studio 的设计视图中居中表单？因为设计带有 30 英寸显示器的小型显示器有点痛苦...... :DI 到处找，但还没有找到解决这个问题的地方，也许有人知道怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T08:34:58.920

不是技术解决方案，但对我来说已经足够了。:P

只需将工具箱固定在左侧，将属性固定在右侧并调整它们的宽度。！中提琴..!!! 您在设计视图中有一个居中的表单。！！！:)

![刚刚拍了这个屏幕截图给你一个想法](../Images/3fe64008e244722f9aade338a1850867.png)

# html-table - Slickgrid 渲染现有表格

> ID：13026011
> 
> 赞同：1
> 
> 时间：2012-10-23T08:08:35.740
> 
> 标签：html-table, slickgrid

我对 Slickgrid 有疑问。
在一个网站上，我有一张大桌子，我希望它用 slickgrid 呈现。
无法通过 JS 加载数据。
所以我的问题是，是否可以将 HTML-Table 的数据作为 slickgrid 的源？

如果是的话，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:30:30.447

我不认为 SlickGrid 最适合您的需求。我认为[DataTables](http://datatables.net/)将更适合将 HTML 表格数据转换为支持 jQuery 的格式化网格。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:12:48.687

您还可以通过循环访问现有表来创建数据变量来加载数据。

隐藏 HTML 表格
对于表格中的每一行
将单元格内容分配给 data[rownumber][column_name or number]
next
然后获取填充的数据变量并将其提供给 SlickGrid

# wpf - 在 WPF 应用程序中设置屏幕的字体

> ID：13026013
> 
> 赞同：0
> 
> 时间：2012-10-23T08:08:40.067
> 
> 标签：wpf

是否可以在 wpf 中为屏幕设置字体。我的意思是，如果我能够将字体属性设置为 Tahoma，那么在该特定屏幕中显示的所有文本 [包括用户控件] 都使用 Tahoma 字体。现在我正在手动更改所有文本元素的字体。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:20:03.400

通常，如果将`FontFamily`Window 设置为 Tahoma，由于属性值继承，大多数控件中的文本应该使用该字体。例如`Button`，`TextBlock`应该这样做。

无论如何，很少有控件，例如`StatusBar`, `Menu`，并且`ToolTip`在内部将其字体类型设置为字体系统设置（用户可以使用窗口控制面板进行更改）。因此，这些元素将忽略窗口中的字体设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:55:52.910

Window 是一个从中派生 FontFamily 属性的控件。通过继承，所有字体系列都设置在所有底层控件上。

我认为您需要考虑使用 WPF 样式，例如：

```
<Style TargetType="{x:Type Button}">
    <Setter Property="Control.FontFamily" Value="Showcard Gothic"/>
</Style> 
```

将根据您定义资源的范围（例如窗口或应用程序）将所有按钮设置为此字体系列。

# oracle - Oracle：调用包内的存储过程

> ID：13026016
> 
> 赞同：21
> 
> 时间：2012-10-23T08:08:48.483
> 
> 标签：oracle, package

我对甲骨文的了解不多。我使用 PL/SQL 开发人员。

我有以下包裹：

```
create or replace package PKG1
as
procedure INIT
(
  nRN                       in number,
  nREC_TYPE                 in number,
  nIDENT                    out number
); 
```

我不确定如何从 PL/SQL Developer 环境中调用它。我试过这个：

```
DECLARE
  procId NUMBER;

BEGIN
  EXECUTE PKG1.INIT(1143824, 0, procId);
  DBMS_OUTPUT.PUT_LINE(procId);
END; 
```

但是，有一个 ORA-06550 (PLS-00103) 错误。

如您所见，我有 2 个输入和 1 个输出参数。我想打印输出参数。就这样。

提前感谢您的帮助。

戈兰

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-23T08:13:20.713

你快到了，只需取出执行：

```
DECLARE
  procId NUMBER;

BEGIN
  PKG1.INIT(1143824, 0, procId);
  DBMS_OUTPUT.PUT_LINE(procId);
END; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-05-31T11:38:15.717

对于那些倾向于使用 GUI 的人：

单击`Right mouse`过程名称上的按钮，然后选择`Test`

[![在此处输入图像描述](../Images/63a0c1a918ee2150fa0097cd71e11f24.png)](https://i.stack.imgur.com/hCfEk.png)

然后在新窗口中，您将看到生成的脚本只需添加参数并单击`Start Debugger`或`F9`

[![在此处输入图像描述](../Images/62ddc6999023bb9b1d4485df25e3755c.png)](https://i.stack.imgur.com/crI5D.png)

希望这可以节省您一些时间。

# php - 如何从 URL 中获取用户名？myurl.com/用户名

> ID：13026018
> 
> 赞同：-2
> 
> 时间：2012-10-23T08:08:51.377
> 
> 标签：php, url, get

在很多网站上，他们都喜欢`myurl.com/username`

我将如何为自己制作这个，这样我就不必这样做了`myurl.com/user.php?id=123`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:14:06.473

您可以使用 .htacces 文件

当文件看起来像这样时：

```
RewriteEngine On 
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([\(\)\|a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$   /index.php?ext=$1&cat=$2&name=$3&sub1=$4 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/([\(\)\|a-zA-Z0-9_-]+)/?$     /index.php?ext=$1&cat=$2&name=$3 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/?$    /index.php?ext=$1&cat=$2 [L]
RewriteRule ^([a-zA-Z0-9_-]+)/?$     /index.php?ext=$1 [L] 
```

如果您的网址是 now `myurl.com/username`，您可以通过以下方式获取用户名：

```
$username = $_GET['ext']; 
```

您可以在 htacces 文件中重命名 get 变量以满足您的需要。

# android - 根据群组 ID 从联系人群组中获取联系人

> ID：13026025
> 
> 赞同：0
> 
> 时间：2012-10-23T08:09:29.073
> 
> 标签：android, contactscontract

我找到了一个关于如何从电话中检索联系人组的好[代码：](https://stackoverflow.com/questions/4334649/accessing-android-contact-group-names)

```
final String[] GROUP_PROJECTION = new String[] {ContactsContract.Groups._ID, ContactsContract.Groups.TITLE };
Cursor cursor = getContentResolver().query(ContactsContract.Groups.CONTENT_URI, GROUP_PROJECTION, null,  null, ContactsContract.Groups.TITLE);
      while (cursor.moveToNext()) {

          String id = cursor.getString(cursor.getColumnIndex(ContactsContract.Groups._ID));
          String gTitle = (cursor.getString(cursor.getColumnIndex(ContactsContract.Groups.TITLE)));

          if (gTitle.contains("Group:")) {
            gTitle = gTitle.substring(gTitle.indexOf("Group:") + 6).trim();
          }
          if (gTitle.contains("Favorite_")) {
               gTitle = "Favorites";
          }
          if (gTitle.contains("Starred in Android") || gTitle.contains("My Contacts")) {
              continue;
          }
          arr_groups.add(gTitle);
          arr_groupswithid.add(id + "." + gTitle);
} 
```

结果是：

![在此处输入图像描述](../Images/f225e6ec72029102474a886b1121a518.png)

我不知道为什么我会得到更多具有不同 id-s 的同一组。也许正如 Abhishek 所说，这与存储在 SIM 卡、手机上或从 Facebook 或 Gmail 同步的联系人有关。

忽略这一点，我一直在尝试检索属于特定组的联系人，但我从来没有得到正确的号码。

```
String groupId = "10";
String where = ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID + "="
               + groupId + " AND "
               + ContactsContract.CommonDataKinds.GroupMembership.MIMETYPE + "='"
               + ContactsContract.CommonDataKinds.GroupMembership.CONTENT_ITEM_TYPE + "'";

Cursor c = getContentResolver().query(
               ContactsContract.Data.CONTENT_URI,
               new String[] {
                       ContactsContract.CommonDataKinds.GroupMembership.RAW_CONTACT_ID,
                       ContactsContract.Data.DISPLAY_NAME
               }, where, null, ContactsContract.Data.DISPLAY_NAME + " COLLATE LOCALIZED ASC");

Log.i("cursorc", c.getCount() + ""); 
```

如果 groupId==10，我得到 7 个联系人。如果是 ==12，我得到 11。如果是 ==5，我得到 0。总共 18，这很好，因为我在同事组中有 18 人，见下图。

如果 groupId==3，我得到 0 个联系人。如果是 ==9，我得到 2。如果是 ==13，我得到 0。总而言之 2，这很好。

如果 groupId==1，我得到 0 个联系人。我的最爱到底在哪里？？它应该给我2。

如果 groupId==6，我得到 0 个联系人。我的常用联系人到底在哪里？？它应该给我17。

这些是我手机中的群组：

![在此处输入图像描述](../Images/8c632a355484ceed5d500ebb336ea7ee.png)

我不知道现在该怎么办。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-20T11:46:25.613

您的组 ACCOUNT_TYPE 不同，因此您获得具有不同 ID 和不同计数的相同名称，因此您应该确定要在选择中获取组的类型，例如您可以将选择更改为

```
final String GROUP_SELECTION = ContactsContract.Groups.AUTO_ADD + " = 0 "
                + " AND " + ContactsContract.Groups.ACCOUNT_TYPE + " = 'com.google' "
//              + " AND " + ContactsContract.Groups.ACCOUNT_TYPE + " = 'DeviceOnly' "
//              + " AND " + ContactsContract.Groups.ACCOUNT_TYPE + " = 'vnd.sec.contact.phone' "
                + " AND " + ContactsContract.Groups.SUMMARY_WITH_PHONES + " > 0 "
                + " AND " + ContactsContract.Groups.ACCOUNT_NAME + " NOT NULL  "
                + " AND " + ContactsContract.Groups.FAVORITES + " = 0 "
                + " AND " + ContactsContract.Groups.DELETED + " = 0  "; 
```

这仅显示您的组有 com.google 作为 ACCOUNT_TYPE

# php - ZendFramework 2 - 你如何从控制器处理像 ZF1 中的布局头体页脚？

> ID：13026027
> 
> 赞同：0
> 
> 时间：2012-10-23T08:09:33.437
> 
> 标签：php, zend-framework, zend-form, zend-framework2, zend-controller

如何以 ZF2 方式即时执行 ZF1 中显示的以下 __construct 部分？

我已经尝试`$this->headTitle('..');`通过省略 ->view 调用，但它仍然通过抛出失败：

`Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for headTitle`

```
 public function __construct() { //init is gone 

    $this->_helper->layout()->setLayout('brand');
    $this->HeadTitle($this->title)->setIndent(8);
    $this->view->headMeta()->appendName('keywords', $this->keyword)->setIndent(8);
    $this->view->headMeta()->appendName('description', $this->description)->setIndent(8);
    $this->view->headMeta()->appendName('Language', 'en')->setIndent(8);

    $this->view->headMeta()->appendName('dc.title', $this->title)->setIndent(8);
    $this->view->headMeta()->appendName('dc.keywords', $this->keyword)->setIndent(8);
    $this->view->headMeta()->appendName('dc.description', $this->description)->setIndent(8);

    $this->view->headLink()->appendStylesheet('/css/main.css')->setIndent(8);
    $this->view->headLink()->appendStylesheet('/jquery/css/custom-theme/jquery-ui-
1.8.20.custom.css')->setIndent(8);

    $post = $this->getRequest()->getPost();
    $get = $this->getRequest()->getQuery();
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:11:12.037

您可以在动作控制器中访问“渲染器”对象：

```
public function indexAction()
{
    $renderer = $this->getServiceLocator()->get('Zend\View\Renderer\PhpRenderer');
    $renderer->headTitle('My title');

    return new ViewModel();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T15:36:55.283

我遇到了同样的问题，我开发了一个 ZF2 插件来使用 headTitle，就像在 layout.phtml 文件中一样。 [https://github.com/remithomas/rt-headtitle](https://github.com/remithomas/rt-headtitle)

```
public function indexAction(){
  $this->headTitle("My website")->setSeparator(" - ")->append("easy ?!");
  return new ViewModel();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T07:22:24.553

编写一个函数来处理控制器中的所有操作

```
protected function setHeadTitle($title = ''){
    if(!empty($title)){            
        $renderer = $this->getServiceLocator()->get('Zend\View\Renderer\PhpRenderer');
        $renderer->headTitle($title);
    }
} 
```

在您的操作中使用该功能

```
public function loginAction()
{
    $this->setHeadTitle("Login");
    //write some other codes
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-05T11:39:32.497

为所有模块编写插件

```
class HeadTitlePlugin extends AbstractPlugin
{

    public function setHeadTitle($title = '')
    {
        if (! empty($title)) {
            $renderer = $this->getController()->getServiceLocator()->
                              get('Zend\View\Renderer\PhpRenderer');
            $renderer->headTitle($title);
        }
    }
} 
```

在模块配置中附加插件

```
'controller_plugins' => array(
    'invokables' => array(
        'HeadTitlePlugin' => 'Modulename\Controller\Plugin\HeadTitlePlugin'
    )
), 
```

在控制器动作中调用插件函数

```
public function indexAction()
{
    $this->HeadTitlePlugin()->setHeadTitle("Signup");
    // other codes 
} 
```

就这样

# java - 在 Java 中使用按位 & 运算符和 + 给出不一致的结果

> ID：13026029
> 
> 赞同：6
> 
> 时间：2012-10-23T08:09:39.683
> 
> 标签：java, bit-manipulation, bitwise-operators

有人可以解释为什么这两个 Java 代码的行为不同吗？第一个正确计算位数，但第二个仅显示 1 或 0 表示非零数字。我不明白发生了什么。

```
 public static void printNumUnitBits(int n){
    int num=0;
    for(int i=0;i<32;i++){
        int x=n&1;
        num=num+x;
        n=n>>>1;
        }
     System.out.println("Number of one bits:"+num);
    }

    public static void printNumUnitBits(int n){
    int num=0;
    for(int i=0;i<32;i++){
        num=num+n&1;
        n=n>>>1;
        }
     System.out.println("Number of one bits:"+num);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T08:12:15.567

在 Java 中，`+`优先[级](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)高于`&`. 您的表达式`num+n&1`将添加`num`然后`n`取最低位。

要解决此问题，请尝试在第二个示例中创建语句`num=num+(n&1);`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:12:58.800

运算符优先级。`+`的优先级高于`&`。你的代码

```
num=num+n&1 
```

将像执行

```
num=(num+n)&1 
```

看[这里](http://bmanolov.free.fr/javaoperators.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T08:14:59.933

[运算符优先级](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)

```
int x=n&1;
num=num+x; 
```

和

```
num=num+n&1; 
```

是不同的。
您正在按位进行 & 在不同的时刻。

# python - 发出 HTTP[S] 请求的首选方式

> ID：13026032
> 
> 赞同：1
> 
> 时间：2012-10-23T08:09:49.207
> 
> 标签：python, http, httprequest, urllib2, urllib

我需要使用 POST、GET 和其他方法并指定标头和超时来发出 HTTP 和 HTTPS 请求。

网上有很多例子，各有千秋：

```
import urllib.parse
import urllib.request

url = 'http://www.someserver.com/cgi-bin/register.cgi'
user_agent = 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'
values = {'name' : 'Michael Foord',
          'location' : 'Northampton',
          'language' : 'Python' }
headers = { 'User-Agent' : user_agent }

data = urllib.parse.urlencode(values)
req = urllib.request.Request(url, data, headers)
response = urllib.request.urlopen(req)
the_page = response.read() 
```

或者

```
 fetcher = urllib2.build_opener()
    fetcher.addheaders.append(('Cookie', 'aaaa=%s' % aaaa))
    res = fetcher.open(settings.ABC_URL) 
```

或者

```
req = urllib2.Request(url=url)
req.add_header('X-Real-IP', request.META['REMOTE_ADDR'])
req.add_header('Cookie', request.META['HTTP_COOKIE'])
req.add_header('User-Agent', request.META['HTTP_USER_AGENT'])
resp = urllib2.urlopen(req).read() 
```

或者

```
handler = urllib.urlopen('http://...')
response = handler.read() 
```

我猜在引擎盖下，其中一些方法使用相同的机制。

还有其他使用`httplib`,的例子`httplib2`。我读到 urllib2 是首选的库。

哪一种是首选方法？它们各自有哪些优点和缺点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T08:11:10.173

试试[requests](http://docs.python-requests.org/en/latest/)模块，它修复了 Python 中的 URL/下载库疯狂问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T08:26:19.170

同意 Fabian，您应该使用[Requests](http://docs.python-requests.org/en/latest/)。

为什么？也许作者自己在这里总结得最好：

[Kenneth Reitz 的演讲“Python For Humans”——关于为什么`urllib2`是“有史以来最糟糕的 API”的](http://python-for-humans.heroku.com/#24)部分。

# c++ - 在函数中操作尚未维度化的数组

> ID：13026036
> 
> 赞同：0
> 
> 时间：2012-10-23T08:10:08.503
> 
> 标签：c++, arrays, pointers

我正在尝试执行以下操作：使用函数读取包含整数数据的文本文件，这样代码不会弄乱我的主函数，然后将数据解析到主函数。

我的代码看起来像这样

```
void Readata(char* fname, int* n, int* TheArray){
  int nn=0;
  int anyInt=0;

  ifstream InFile( fname );
  if ( ! InFile.is_open() ) throw myErrHandler("Could not open input file");

  InFile >> anyInt;
  if ( ! InFile ) throw myErrHandler( "Could not read size of array" );
  nn=anyInt;
  (*n)=nn;    

  int* AnArray = (int*) calloc(nn,sizeof(int));
  for(int i=0; i<nn; i++){
    InFile >> anyInt;
    if ( !InFile ) throw myErrHandler( "Could not read data" );
    AnArray[i]=anyInt;
  }
  TheArray = AnArray;
} 
```

主要功能看起来像

```
int main(int argc, char **argv){
  if ( argc < 2 ){
    cerr << "Usage: " << argv[0] << " input file" << endl;
    return 777;
  }

  int n;
  int* TheArray;
  ReadData(arg[1], &n, TheArray);
  return 1;
} 
```

我的问题是，当我尝试从主函数访问 TheArray 时，我收到“分段错误（核心转储）”消息。显然，在调用 ReadData 函数后，我没有用“TheArray”指针指向正确的位置。如果我在 ReadData 函数中将数据打印到屏幕上，AnArray 和 TheArray 都指向相同的（并且是正确的）。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:14:56.660

当您调用指针时`ReadData`，`TheArray`指针是按值传递的，因此在函数内部它的行为就像任何其他非指针参数一样，这意味着对它的更改将在函数外部不可见。您必须将实际指针作为参考（即指针的地址）传递给参数以更改它：

```
void Readata(char* fname, int* n, int** TheArray){
    ...

    *TheArray = AnArray;
} 
```

并称它为

```
Readdata(arg[1], &n, &TheArray); 
```

**编辑：**使用Pete评论中的建议可能会更好。但是，更好的是完全停止使用原始指针，并开始使用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:20:23.197

这是因为您将指针按值传递给 TheArray，因此您的分配是在指针的副本上。正确的方法是通过引用传递指针或将指针传递给指针。

使用指向指针的指针将是：

```
void Readata(char* fname, int* n, int** TheArray){ 
```

任务是：

```
*TheArray = AnArray; 
```

但是，当您将问题标记为 c++ 时，最好（恕我直言）通过引用传递 std::vector 并将其调整大小 + 填充到 Readata()

# mysql - 是否有可能以某种方式增加PK？

> ID：13026038
> 
> 赞同：0
> 
> 时间：2012-10-23T08:10:10.077
> 
> 标签：mysql, sql

是否有可能以某种方式增加PK？我需要让它从大约 10000 开始。是否有一些我可以直接在 phpMyAdmin 中执行的 sql 语句？

编辑：我需要更清楚一点......

我需要更新 PK 超过 2190 的所有行（大约 2000 行）。需要更新它们以从大约 10000 开始......所以我相信这是某种编程问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T08:12:32.917

~~引用[文档](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)。~~

所以问题是关于更新一组值。好吧，这是一种方法：

```
UPDATE some_table 
   SET some_pk = 10000 + some_pk 
 WHERE some_pk > 2190 
```

不过，您必须遵循`ALTER TABLE tbl AUTO_INCREMENT = 10000`; 否则在此 UPDATE 之后插入的所有行仍会获得旧的 auto_increment。例如：

```
CREATE TABLE t (id INT AUTO_INCREMENT NOT NULL, s VARCHAR(5), PRIMARY KEY (id));
INSERT INTO t (s) VALUES ('a'), ('b'), ('c'), ('d'), ('e');

UPDATE t SET id = id + 10000 WHERE id > 3;
ALTER TABLE t AUTO_INCREMENT = 10000;

INSERT INTO t (s) VALUES ('f'); 
```

没有`ALTER TABLE...` `'f'`的 id 将是 6；有了它 - 10006。

这是说明此概念的[**SQL Fiddle 。**](http://sqlfiddle.com/#!2/80780/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:13:28.000

如果您的表已经使用自动增量创建。索引，使用

```
ALTER TABLE tbl AUTO_INCREMENT = 10000; 
```

# php - 如何限制连接的会话数

> ID：13026039
> 
> 赞同：0
> 
> 时间：2012-10-23T08:10:09.860
> 
> 标签：php, session, limit

我编写了一个脚本来限制我所在区域的会话数量。

所以我们有以下代码：

```
if ( $d = opendir( session_save_path()  )  ) {
        $count = 0;
        $session_timeout = 3*600;
        while ( false !== ( $file = readdir( $d )  )  ) {
            if ( $file != '.' && $file != '..' ) {
                if ( time()- fileatime(session_save_path() . '/' . $file) < $session_timeout ) {
                      $count++;
                }
            }
        }
    }
    if($count>$societe['max_utilisateurs'])
    {
        $sql="INSERT INTO `session` SET
`temps` = now(),
`login`='".$_SESSION['login']."',
`mouvement`='2'";  
mysql_query($sql) or die;
session_unset();  
session_destroy();  
header('Location: ../');  
exit();  
    }; 
```

问题是当我回显 $count 时它显示 2。但问题是我是唯一在线的用户。我在 mysql 中限制了连接的数量，我确实将这个数字与会话数进行了比较，但会话数实际上是错误的。

任何形式的帮助将不胜感激。

# php - 如何获取 Android 开发者控制台公钥并将其转换为 PEM

> ID：13026044
> 
> 赞同：0
> 
> 时间：2012-10-23T08:10:27.130
> 
> 标签：php, android, openssl, bouncycastle

如何获取开发人员控制台中提供的 Base64EncodedString 并将其制成可用于的 .pem `openssl_verify()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T22:22:55.920

[phpseclib 是一个纯 PHP RSA 实现](http://phpseclib.sourceforge.net)，它将获取几乎任何格式的公钥并用它们验证签名。例如。

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();  
$rsa->loadKey('publickey.txt'); 
$rsa->setSignatureMode(CRYPT_RSA_SIGNATURE_PKCS1); 
echo $rsa->verify( 
    file_get_contents('plaintext.txt'), 
    file_get_contents('signature.txt') 
) ? 'verified' : 'unverified'; 
```

这是另一个 stackoverflow 问题，即使没有适当的标头，该人也能够使用 phpseclib：

[https://stackoverflow.com/a/13015915/569976](https://stackoverflow.com/a/13015915/569976)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:20:10.063

如下所述添加适当的页眉和页脚以及换行：[http ://www.openssl.org/docs/apps/rsa.html](http://www.openssl.org/docs/apps/rsa.html)

使用 OpenSSL 命令进行测试。

# linux - 如何使用“tc”命令对特定端口进行简单的流量控制

> ID：13026045
> 
> 赞同：5
> 
> 时间：2012-10-23T08:10:27.053
> 
> 标签：linux

我是 linux 新手，我的目标是使用 tc 命令（或 ifconfig 或 iptables 等其他命令，但我认为我不需要它们）为“eth0”或“lo”创建一个简单的流量控制。

我的内核是 2.6.18-238.el5 GNU/Linux，我使用的是 redhat。

我的脚本是：

```
tc qdisc del dev $DEV root
tc qdisc add dev $DEV root handle 1: htb default 10
tc class add dev $DEV parent 1: classid 1:10 htb rate $DNLD
tc filter add dev $DEV parent 1: protocol ip u32 match ip dport $input_port 0xffff flowid 1:10 
```

$DNLD 是带宽限制，$DEV 是 eth0 或 lo，$input_port 是我要限制的端口。

我在互联网上阅读了很多页面并理解应该这样写，但是这行不限制特定端口，而是限制所有端口。

我也尝试使用“运动”，但它也不起作用。所以我不明白问题是什么。

另一个奇怪的事情是带宽限制似乎正在工作，并且重置线似乎也在工作，（这是第一行： tc qdisc del dev $DEV root ）

但是，我写后的输出行仍然是：“RTNETLINK 答案：没有这样的文件或目录”，我不知道为什么以及它是否会造成任何损坏。

如果您需要任何其他信息，请告诉我。如果有人能够帮助我，我会很高兴。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-10-27T12:14:19.537

我不知道这是否正是您要寻找的，但这是您可以编辑和运行的脚本。我用它来限制我的连接和测试网络应用程序。

```
#!/bin/bash
#
#  tc uses the following units when passed as a parameter.
#  kbps: Kilobytes per second 
#  mbps: Megabytes per second
#  kbit: Kilobits per second
#  mbit: Megabits per second
#  bps: Bytes per second 
#       Amounts of data can be specified in:
#       kb or k: Kilobytes
#       mb or m: Megabytes
#       mbit: Megabits
#       kbit: Kilobits
#  To get the byte figure from bits, divide the number by 8 bit
#

#
# Name of the traffic control command.
TC=/sbin/tc

# The network interface we're planning on limiting bandwidth.
IF=`ip addr | grep 2: | cut -d' ' -f2 | cut -d: -f1`

# Latency
LAT_1=200ms          # Base latency
LAT_2=50ms           # Plus or minus
LAT_3=25%            # Based on previous packet %
# Dropping packets
DROP_1=5%            # Base probability
DROP_2=25%           # Based on previous packet %
# Bandwidth
#DNLD=33kbps          # DOWNLOAD Limit
#UPLD=33kbps          # UPLOAD Limit
DNLD=1Mbps          # DOWNLOAD Limit
UPLD=1Mbps          # UPLOAD Limit

# IP address of the machine we are controlling
IP=`ip addr | grep "inet " | tail -1 | cut -d' ' -f6 | cut -d/ -f1`

# Filter options for limiting the intended interface.
U32="$TC filter add dev $IF protocol ip parent 1:0 prio 1 u32"

# We'll use Hierarchical Token Bucket (HTB) to shape bandwidth.
# For detailed configuration options, please consult Linux man
# page.

#$TC qdisc add dev $IF root handle 2: netem delay $LAT_1 $LAT_2 $LAT_3     loss $DROP_1 $DROP_2
$TC qdisc add dev $IF root handle 2: netem delay $LAT_1 $LAT_2 $LAT_3 loss $DROP_1 $DROP_2
$TC qdisc add dev $IF parent 2: handle 1: htb default 30
$TC class add dev $IF parent 1: classid 1:1 htb rate $DNLD
$TC class add dev $IF parent 1: classid 1:2 htb rate $UPLD
$U32 match ip dst $IP/32 flowid 1:1
$U32 match ip src $IP/32 flowid 1:2

# The first line creates the root qdisc, and the next three lines
# create three child qdisc that are to be used to shape download 
# and upload bandwidth.
#
# The 5th and 6th line creates the filter to match the interface.
# The 'dst' IP address is used to limit download speed, and the 
# 'src' IP address is used to limit upload speed.

echo Limit to $DNLD on $IF for $IP 
```

# vim - 如何使用一个命令删除文档中的所有空新行？

> ID：13026046
> 
> 赞同：3
> 
> 时间：2012-10-23T08:10:32.010
> 
> 标签：vim

我的文档看起来像这样：

```
Line number one

Line number two

Line number three 
```

我希望整个文档看起来像这样：

```
Line number one
Line number two
Line number three 
```

换句话说，删除所有的空行。如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T08:13:49.343

Try `:g/^$/d`，这将删除所有空行。`g`指示`global`, the是`^$`一个正则表达式，基本上表示“匹配开始和结束之间没有任何内容的行”，`d`而`delete`. 您可以根据需要混合和匹配:)

如果您有随机空格，另一个与空格相关的命令可能会派上用场`:%s/\s\+$//`，它会修剪任何尾随空格（正如@Bernhard 指出的那样，该`$`运算符意味着您每行最多出现一次，因此这`g`是不必要的）。

根据更新，这些行可能已经包含空格，在这种情况下`:g/^\s*$/d`应该可以工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T08:52:08.073

我使用的命令是

```
:v/./d 
```

[v 命令](http://vimdoc.sourceforge.net/htmldoc/repeat.html#%3avglobal)匹配与给定模式*不*匹配的行。[它是从ed](http://en.wikipedia.org/wiki/Ed_%28text_editor%29)继承的。

# c# - Google Analytics（分析）如何确定用户是否是移动用户？

> ID：13026048
> 
> 赞同：0
> 
> 时间：2012-10-23T08:10:34.973
> 
> 标签：c#, google-analytics, asp.net-mvc-4, google-analytics-api

我正在通过 Google Analytics 跟踪我的网站。但如果是移动设备访问者与网站访问者，我没有得到正确的输出。所以我只想知道谷歌是如何决定的，它如何过滤来自移动或网站/电脑的用户？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:13:47.360

从用户代理中，您可以确定 http 请求来自哪个设备。

[检查此以获取更多信息](http://en.wikipedia.org/wiki/User_agent)

# c# - c# PropertyGrid 限制列表上的编辑 项目

> ID：13026050
> 
> 赞同：4
> 
> 时间：2012-10-23T08:10:49.090
> 
> 标签：c#, .net, list, object, propertygrid

我有一个在 C#/.NET 中使用 PropertyGrid 的应用程序

`PropertGrid`持有`MyAppObject`如下所示的类/对象..

```
class MyAppObject
{
    private List<MyObject> oItems;

    public List<MyObject> Items
    {
        get { return this.oItems; }

    }

} 
```

到目前为止，它运行良好、美观且简单。我希望属性网格允许用户查看项目，这很好，但是当您在 PropertyGrid 中选择属性时，对话框还允许添加更多`List<MyObject> items`.

我不想要这个，我只想拥有显示项目的能力，而不是编辑它们。

我认为不提供设置器（`set { this.oItems = value; }`）：

![像这样](../Images/aa9dc62825caf2273598ecd8ed578433.png)

那么它不会允许添加按钮。

希望这是有道理的，屏幕截图显示了对话框，我圈出了要删除的按钮。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:17:00.103

如果您将其公开为只读列表，它应该可以满足您的需要：

```
[Browsable(false)]
public List<MyObject> Items
{
    get { return this.oItems; }
}
// this (below) is the one the PropertyGrid will use
[DisplayName("Items")]
public ReadOnlyCollection<MyObject> ReadOnlyItems
{
    get { return this.oItems.AsReadOnly(); }
} 
```

请注意，单个对象（`MyObject`实例）的成员仍然是可编辑的，除非您将它们装饰为`[ReadOnly(true)]`.

正如您所注意到的，setter 不需要添加/删除/编辑项目。那是因为网格仍然可以完全访问`.Add`,`.Remove`和 indexer ( `list[index]`) 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:22:34.243

这是一个有点棘手的问题。该解决方案涉及使用完整的 .NET Framework 进行构建（因为仅客户端框架不包括 .NET Framework `System.Design`）。您需要创建自己的子类，`CollectionEditor`并告诉它在 UI 完成后如何处理临时集合：

```
public class MyObjectEditor : CollectionEditor {

    public MyObjectEditor(Type type) : base(type) { }

    public override object EditValue(ITypeDescriptorContext context, IServiceProvider provider, object value) {

        return ((MyObject)context.Instance).Items;
    }
} 
```

然后你必须用以下方式装饰你的财产`EditorAttribute`：

```
[Editor(typeof(MyObjectEditor), typeof(UITypeEditor))]
public List<MyObject> Items{
    // ...
} 
```

参考：[在属性网格中编辑集合的正确方法是什么](https://stackoverflow.com/questions/4145324/whats-the-correct-way-to-edit-a-collection-in-a-property-grid)

选择：

```
return new ReadOnlyCollection(oItems); 
```

或者

```
return oItems.AsReadOnly(); 
```

# wpf - 如何开发多色（在地图上）

> ID：13026060
> 
> 赞同：0
> 
> 时间：2012-10-23T08:11:39.423
> 
> 标签：wpf, maps

我想开发一个multi-paint：一个应用程序，每个用户可以在地图上绘制路线，保存路线，最后所有保存的路线将“合并”成一张大图（如photoshop中的图层）

我应该如何保存路线？要绘制的像素列表？将其保存到图片（透明背景？）

该应用程序将在 WPF 中在 bing 地图上（在触摸设备上）开发。

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:21:12.367

您必须将路线点的纬度和经度值保存在[LocationCollection](http://msdn.microsoft.com/en-us/library/microsoft.maps.mapcontrol.wpf.locationcollection.aspx)中，它是[Bing Maps WPF Control API](http://msdn.microsoft.com/en-us/library/hh872901.aspx)的一部分。

当您希望能够缩放地图时，简单地保存像素是行不通的。

# java - jsf传递参数给flex

> ID：13026061
> 
> 赞同：1
> 
> 时间：2012-10-23T08:11:42.197
> 
> 标签：java, jsp, jsf, flex4, el

我正在尝试将参数传递给 flex：

```
<embed name='costsProject' src='CostsOfProject.swf' height='800%' width='600%' 
    pluginspage='http://www.adobe.com/go/getflashplayer'
    flashVars='projectId=#{cep_TBModelBean.projectId}'/> 
```

但我得到这个错误：

> [ServletException in:../pages/gestioncep/viewTB/viewTBContent.jsp] javax.servlet.jsp.JspException: org.apache.jasper.JasperException: /pages/gestioncep/viewTB/testCost.jsp(14,163) #{.. .} 不允许出现在模板文本中'

当我写`flashVars='projectId=292'`的时候，没关系，我得到了结果。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:27:23.147

那是因为`<embed>`标签不是JSF标签，所以不能直接使用。最好有一个`<h:inputHidden>`保存项目 id 值并使用 Javascript 使用 JavaScript 更新您的`flashVars`标记属性。

```
<script type="text/javascript">
    function setupFlex() {
        var projectId = document.getElementById('hidProjectId').value;
        var flexObject = document.getElementsByName('costsProject')[0];
        flexObject.flashVars = 'projectId=' + projectId;
    }
</script>

<body onload="setupFlex()">
    <!-- note: the <h:inputHidden> is outside a form -->
    <h:inputHidden id="hidProjectId" value="#{cep_TBModelBean.projectId}" />

    <embed name='costsProject' src='CostsOfProject.swf'
        pluginspage='http://www.adobe.com/go/getflashplayer' height='800%' width='600%'
        flashVars=''/>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:49:40.093

`#{}`在传统 JSP 中确实不允许使用 in 模板文本，但仅在其后续的 Facelets 中才允许使用。

如果您可以保证托管 bean 已经创建并出现在该范围内（例如，通过让 JSF 组件在`<embed>`标记之前引用完全相同的托管 bean），那么您可以使用`${}`它来访问它，这是允许的JSP 中的模板文本。关键点是，`${}`当托管 bean 不存在于作用域中时，它不会自动创建它，但它可以毫无问题地访问其属性。

```
<h:someComponent ... value="#{cep_TBModelBean.someProperty}" />

...

<embed name='costsProject' src='CostsOfProject.swf' height='800%' width='600%'
    pluginspage='http://www.adobe.com/go/getflashplayer'
    flashVars='projectId=${cep_TBModelBean.projectId}'/> 
```

### 也可以看看：

*   [JSP EL、JSF EL 和 Unified EL 的区别](https://stackoverflow.com/questions/4812755/difference-between-jsp-el-jsf-el-and-unified-el/4812883#4812883)

# javascript - 修复动画属性

> ID：13026065
> 
> 赞同：2
> 
> 时间：2012-10-23T08:12:10.780
> 
> 标签：javascript, jquery

我目前正在做一些研究，为小学生创建一个新的数学游戏，其中 0-9 的 div 随机出现在容器内。

开头给出了一个问题。类似于 20 的倍数。然后，用户必须点击正确的，然后在最后计算它们并给出分数。

我刚刚改变了 div 出现的速度，使它们出现的时间更长，一次出现多个，以使年幼的孩子更容易玩游戏。

我像这样使用“fadeIn”..

```
 $('#' + id).animate({
        top: newY,
        left: newX
    }, 'slow', function() {}).fadeIn(2000);
} 
```

我的问题是，现在当我拍摄正确或错误的数字时，动画非常有问题，我不知道为什么。

小提琴： http: [//jsfiddle.net/cFKHq/6/](http://jsfiddle.net/cFKHq/6/)（参见第 5 版以了解之前的情况）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:31:12.953

在里面`startplay()`，调用时控制并发`scramble()`，我用一个名为的全局变量来做`window.cont`，所以我替换了你的以下调用：

```
play = setInterval(scramble, 1800); 
```

对于这个：

```
play = setInterval(function() { 
          if (window.cont){ 
              window.cont = false;
              scramble();
          }
}, 1000); 
```

var`window.cont`需要在代码开始时全局设置，如下所示：

```
var miss = 0;
var hit = 0;
var target = $("#target");
window.cont = true; 
```

因此，`window.cont`您现在可以控制动画一个接一个地执行，而不会重叠，如下所示：

```
$('#'+id).css({
    top: newY,
    left: newX
}).fadeIn(2000, function() {
      setTimeout(function() {
        $('#' + id).slideUp('fast');
        window.cont = true;
      }, 1500);
}); 
```

查看工作[**演示**](http://jsfiddle.net/gnel/B4uJ4/9/embedded/result/)

# facebook-javascript-sdk - 带有权限查询的空白窗口

> ID：13026067
> 
> 赞同：-1
> 
> 时间：2012-10-23T08:12:12.787
> 
> 标签：facebook-javascript-sdk

我使用 js sdk 通过 facebook 登录我的网站。如果用户第一次访问我的网站并尝试登录，它工作正常。如果用户登录 facebook 并访问我的网站，它也可以正常工作。但是，如果用户从 facebook 和我的网站注销并在单击登录按钮后转到我的网站，他会看到弹出窗口并输入他们的电子邮件并通过 facebook。[在他单击登录后，它会显示带有此 url](https://www.facebook.com/dialog/permissions.request?_path=permissions.request&app_id=189221317879406&redirect_uri=http://static.ak.facebook.com/connect/xd_arbiter.php?version=11#cb=f39557df7423a7e&origin=http%253A%252F%252Fintalix.home%252Ff200a2e5499adba&domain=intalix.home&relation=opener&frame=f9306257bd1f0a&sdk=joey&display=popup&response_type=token,signed_request&domain=intalix.home&perms=user_photos,friends_photos,user_birthday,friends_birthday,user_education_history,friends_education_history,user_location,friends_location,user_relationships,friends_relationships,user_work_history,friends_work_history&fbconnect=1&from_login=1&client_id=189221317879406)的空白弹出窗口。

如果 facebook 知道该用户已获得我网站的授权，我不明白为什么它会请求许可。

这是我的代码

```
<html>
<head>
    <meta charset="utf-8">
</head>
<body>
    <div id="fb-root"></div>
    <script type="text/javascript">
        window.fbAsyncInit = function () {
            FB.init({ appId: 189221317879406, status: true, cookie: true, xfbml: true, oauth:true });
        };
        (function () {
            var e = document.createElement('script');
            e.type = 'text/javascript';
            e.src = document.location.protocol + '//connect.facebook.net/en_US/all.js';
            e.async = true;
            document.getElementById('fb-root').appendChild(e);
        } ());  
        function loginWithFacebook(){
            FB.login(function(response) {
                if (response.authResponse) {
                    //FB.api('/me', function(response) {alert(response.name);});
                    window.location.href='http://mysite.com/home/';
                }
            },
            {scope: 'user_photos,friends_photos,user_birthday,friends_birthday,user_education_history,friends_education_history,user_location,friends_location,user_relationships,friends_relationships,user_work_history,friends_work_history'}); 
        } 
    </script>
    <a href="#" onclick="loginWithFacebook()">
            <img src="/files/images/facebook-login-button.png" style="width: 90px; height: 90px;"></a>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:26:50.600

我的代码错了。有必要的添加选项 - channelURL: '//site.com/channel.php' [http://developers.facebook.com/docs/reference/javascript/#channel](http://developers.facebook.com/docs/reference/javascript/#channel)

# vba - 如何从一行中挑选数据并将其显示在表单上

> ID：13026072
> 
> 赞同：0
> 
> 时间：2012-10-23T08:12:48.613
> 
> 标签：vba, excel

我在电子表格中有一个日期列表，这些日期旁边是与该日期相对应的详细信息，我有一个组合框，可以找到列表中的所有日期，但是当我从下拉列表中选择特定日期时，我希望它在表单的文本框中显示该行中的相应数据，到目前为止我有：

```
Private Sub ComboBox1_Change()
    Dim rw As Long, cl As Range
    staffName = TextBox8.Value

    rw = WorksheetFunction.Match(Me.ComboBox1.Value, Worksheets(staffName).Range("A16:A18"), 0)
    TextBox1 = Worksheets(staffName).Range("A" & rw).Offset(0, 1)
    TextBox2 = Worksheets(staffName).Range("A" & rw).Offset(0, 2)
    TextBox3 = Worksheets(staffName).Range("A" & rw).Offset(0, 3)
    TextBox4 = Worksheets(staffName).Range("A" & rw).Offset(0, 4)

End Sub 
```

它没有错误，但它没有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:27:55.247

如何将 Match 更改为 vba`Find`函数，如下所示：

```
Private Sub ComboBox1_Change()

    Dim cl As Range, wks As Worksheet
    staffname = TextBox8.Value

    Set wks = Sheets(staffname)
    Set cl = wks.Range("A16:A18").Find(Me.ComboBox1.Value, lookat:=xlWhole)

    With Me
        .TextBox1.Value = cl.Offset(, 1)
        .TextBox2.Value = cl.Offset(, 2)
        .TextBox3.Value = cl.Offset(, 3)
        .TextBox4.Value = cl.Offset(, 4)
    End With

End Sub 
```

# jsf-2 - 冰：selectInputText CSS（默认/内部）不工作。

> ID：13026089
> 
> 赞同：0
> 
> 时间：2012-10-23T08:13:56.223
> 
> 标签：jsf-2, icefaces-3

我是 icefaces 组件的新手，想使用与展示 [ice:selectInputText 展示][1] 中相同的 ice:selectInputText 组件，但展示中显示的默认 css 对我来说功能不同。当输入某些内容时，我会得到下拉列表，但是当在任何项目上移动鼠标时，值显示为透明行并且没有突出显示。

谁能指导问题出在哪里：这是我的代码：test.xhtml

```
 <html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:f="http://java.sun.com/jsf/core" 

 xmlns:ice="http://www.icesoft.com/icefaces/component">
 <h:head></h:head>
 <h:body>

 <h:form>

  <h:panelGroup>
 <h:outputLabel value="Enter your name(autocomplete) :"></h:outputLabel>
                                <ice:selectInputText  id="heloo" 
                             value="#{helloBean.selectedItem}"
                              rows="10"  width="152" valueChangeListener="#{helloBean.ValueChangeL}"  actionListener="#{helloBean.ActionL}">
                            <f:selectItems value="#{helloBean.itemList}"></f:selectItems> 

                    </ice:selectInputText>   
                        </h:panelGroup>

     </h:form>
      </h:body>
     </html> 
```

托管bean类：

```
 import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.faces.bean.SessionScoped;
import javax.faces.event.ActionEvent;
import javax.faces.event.ValueChangeEvent;
import javax.faces.model.SelectItem;

import com.icesoft.faces.component.selectinputtext.SelectInputText;
@ManagedBean( name= "helloBean")
@SessionScoped
public class HelloBean {

private String selectedItem;
private Integer seelectedId;
private List<SelectItem> itemList=new ArrayList<SelectItem>();

public String getSelectedItem() {
    return selectedItem;
}
public void setSelectedItem(String selectedItem) {
    this.selectedItem = selectedItem;
}
public Integer getSeelectedId() {
    return seelectedId;
}
public void setSeelectedId(Integer seelectedId) {
    this.seelectedId = seelectedId;
}
public List<SelectItem> getItemList() {
    return itemList;
}
public void setItemList(List<SelectItem> itemList) {
    this.itemList = itemList;
}

public void ValueChangeL(ValueChangeEvent event)
{
String query=(String) event.getNewValue();
System.out.println("query is "+query);
SelectItem item1=new SelectItem();
SelectItem item2=new SelectItem();
SelectItem item3=new SelectItem();
item1.setLabel("abc");
item1.setValue(1);
item2.setLabel("bbc");
item2.setValue(2);
item3.setLabel("aaa");
item3.setValue(3);
itemList.add(item1);
itemList.add(item2);
itemList.add(item3);

}

public void ActionL(ActionEvent event)
{
    System.out.println("HELLO IN LISTENER of SELECTINPUTTEXT"+event.getSource().toString());
    System.out.println("HELLO IN LISTENER of PHASEID IS"+event.getPhaseId());
    if ( event != null && event.getSource() instanceof SelectInputText )
    {
    SelectInputText comp_ = (SelectInputText) event.getSource();
    SelectItem selectItem_ = comp_.getSelectedItem();//critical line
    System.out.println("selected id"+selectItem_.getValue());
    seelectedId=(Integer)selectItem_.getValue();
    }
}

public String submitFunc()
{

    System.out.println("checking selected item: "+ selectedItem );
    System.out.println("checking selected id: "+ seelectedId );

    return "success";

}
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:29:46.030

展示的内容比页面上显示的要多。该页面上包含一些样式表。

如果您想拥有相同的样式。[在此处](http://sventon.icesoft.org/svn/repos/repo/show/icefaces3/trunk/icefaces/samples/showcase/showcase/src/main/webapp/resources/templates/main-template.xhtml?revision=HEAD)参考他们的代码库并包括这些代码库。

# windows - Windows 更新 GDR 与 LDR (QFE)

> ID：13026090
> 
> 赞同：3
> 
> 时间：2012-10-23T08:13:59.513
> 
> 标签：windows, patch, windows-update, hotfix, automatic-updates

在浏览[Windows 修补程序和更新](http://blogs.msdn.com/b/ntdebugging/archive/2008/10/21/windows-hotfixes-and-updates-how-do-they-work.aspx)网站上的信息时，我了解到 Windows 维护两个不同的分支来提供更新和修补程序，并且根据描述，

1.  GDR -> 所有 Windows 更新都属于此类别。
2.  LDR (QFE) -> 所有修补程序都属于此类别。

在检索

1.  Windows 更新信息与[Windows 更新代理 API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387292%28v=vs.85%29.aspx)和
2.  带有 WMIC QFE GET 的修补程序/LDR/QFE 信息

我发现某些 KB 编号在 Windows Update/Hotfix 中很常见。这怎么可能？根据有关 GDR 和 LDR 的描述，它说

> 默认情况下，Windows 系统上的所有组件都在每个主要版本之后的 GDR 分支上启动。当您从 Windows 更新为 GDR 组件安装更新时，它会使用 GDR 版本进行升级。当您安装特定的修补程序时，修补程序包中的文件和组件将迁移到 LDR 分支。此时，该特定组件被标记为 LDR 组件。如果您在此组件上安装更新的更新，Windows 服务技术将自动为您从 LDR 分支安装适当的最新版本。

有人可以帮助我了解更新和修补程序信息中常见的 KB 编号的原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T06:58:05.860

我在 MSDN 论坛上得到了答案。

[http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/a8538737-ecb6-4981-bed0-4ef3cb9356d7](http://social.msdn.microsoft.com/Forums/en-US/windowsgeneraldevelopmentissues/thread/a8538737-ecb6-4981-bed0-4ef3cb9356d7)

# c# - 如何在 Sharepoint2007 中将 ASPX.net 应用程序转换为 WebPart？

> ID：13026091
> 
> 赞同：-1
> 
> 时间：2012-10-23T08:14:03.520
> 
> 标签：c#, sharepoint, sharepoint-2007, web-parts

我从 Sharepoint 开始。

我有一个使用数据库的简单 C# 应用程序。

我想在Sharepoint2007中展示它，我的老板告诉我必须用WebPart来做，但我一直在寻找信息，但我没有找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:24:25.160

Sharepoint 2007 Web 部件很难构建，因为您需要以编程方式在代码中构建表示层。

您绝对应该使用[Smart Part](http://smartpart.codeplex.com/)，因为它允许您开发 Web 部件，就像它们是传统 .Net 应用程序中的用户控件一样。

您还应该阅读 Sharepoint 模式和实践，因为它在某些方面完全不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:25:38.180

您可以使用（见下面的链接）来显示数据库中的数据。

[http://blogs.technet.com/b/paulpaa/archive/2010/01/26/data-view-web-part-to-view-data-from-non-sharepoint-database-adventure-works.aspx](http://blogs.technet.com/b/paulpaa/archive/2010/01/26/data-view-web-part-to-view-data-from-non-sharepoint-database-adventure-works.aspx)

但是，如果你想要更多的适应性和你知道自己在做什么的感觉（我猜你是一个对 c# 有一定了解的开发人员）

你可能最好沿着编码路线走下去。我总是说聪明地工作而不是努力！

获取一些工具，让您的工作更轻松。WSP.builder for one(Codeplex) 并从非常简单的东西开始。人们说在 hello world 中没有太多用处，但它是学习如何部署、调试您的第一个 sharepoint Web 部件时开始的好地方。

我建议的是。

阅读如何使用 WSP builder。这将帮助您构建具有所需结构的 Sharepoint 项目。

为此，您需要在 wsp builder 中使用可视化 Web 部件功能。

一旦你知道如何部署它，就应该阅读 wsp builder！您应该可以顺利完成 Web 部件。

如果您发现很难坚持下去，SharePoint 可能会是一头喜怒无常的野兽！谷歌利用它有丰富的知识！（聪明地工作而不是努力；））

此外，如果您有自己的开发区域支持它！如果它坏了，你不想重建它，我学会了艰难的方式！

希望这可以帮助

# haskell - 缺乏对无限列表和 seq 运算符的理解

> ID：13026095
> 
> 赞同：3
> 
> 时间：2012-10-23T08:14:11.403
> 
> 标签：haskell, lazy-evaluation

对于给定的整数 n，下面的代码保留列表中的前 n 项，删除后面的 n 项，保留后面的 n 等等。它适用于任何有限列表。

为了使其可用于无限列表，我使用“seq”运算符强制在递归步骤之前进行累加器评估，例如 foldl'。

我通过跟踪累加器的值进行了测试，似乎它是根据有限列表的需要有效计算的。

然而，当应用于无限列表时它不起作用。主函数中的“take”仅在内部计算终止后执行，当然，无限列表永远不会发生这种情况。

拜托，有人能告诉我我的错误在哪里吗？

```
main :: IO ()
main = print (take 2 (foo 2 [1..100]))

foo :: Show a => Int -> [a] -> [a]
foo l lst = inFoo keepOrNot 1 l lst []

inFoo :: Show a => (Bool -> Int -> [a] -> [a] -> [a]) -> Int -> Int -> [a] -> [a] -> [a]
inFoo keepOrNot i l  [] lstOut  = lstOut
inFoo keepOrNot i l lstIn lstOut = let lstOut2 = (keepOrNot (odd i) l lstIn lstOut) in
                      stOut2 `seq` (inFoo keepOrNot (i+1) l (drop l lstIn) lstOut2)

keepOrNot :: Bool -> Int -> [a] -> [a] -> [a]
keepOrNot b n lst1 lst2 = case b of
  True -> lst2 ++ (take n lst1)
  False -> lst2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T08:49:25.813

以下是列表连接的实现方式：

```
(++) :: [a] -> [a] -> [a]
(++) []     ys = ys
(++) (x:xs) ys = x : xs ++ ys 
```

注意

*   右手列表结构按原样重用（即使它还没有被评估，所以很懒惰）
*   左侧列表结构被重写（复制）

这意味着如果您要`++`建立一个列表，您希望累加器位于右侧。（对于有限列表，仅出于效率原因 --- 如果累加器在左侧，它将被重复复制，这是低效的。对于无限列表，调用者不能查看结果的第一个元素，直到它已被最后一次复制，并且不会有最后一次，因为在累加器的右侧总是有其他东西要连接。）

的`True`情况下，`keepOrNot`累加器位于 的左侧`++`。您需要使用不同的数据结构。

在这种情况下，通常的习惯用法是使用*差异列表*。不要使用 type`[a]`作为累加器，而是使用`[a] -> [a]`. 您的累加器现在是一个函数，可以*将*列表添加到作为输入的列表之前。这样可以避免重复复制，并且可以懒惰地构建列表。

```
keepOrNot :: Bool -> Int -> [a] -> ([a] -> [a]) -> ([a] -> [a])
keepOrNot b n lst1 acc = case b of
  True -> acc . (take n lst1 ++)
  False -> acc 
```

累加器的初始值应该是`id`。当您想将其转换为常规列表时，请使用`[]`(ie, `acc []`) 调用它。

* * *

`seq`这里是红鲱鱼。`seq`不强制整个列表。`seq`只确定它是形式`[]`还是`x : xs`.

* * *

你正在学习 Haskell，是吗？因此，修改代码以使用差异列表累加器作为练习是一个好主意。可能使用无限列表会使您在代码的不同部分中被烧毁；我不知道。

但是有更好的写作方法`foo`。

```
foo c xs = map snd . filter fst . zipWith f [0..] $ xs
  where f i x = (even (i `div` c), x) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T10:05:14.267

因此，您希望将列表分组为`n`元素组，并删除所有其他组。我们可以直接写下来：

```
import Data.List (unfoldr)

groups n xs = takeWhile (not.null) $ unfoldr (Just . splitAt n) xs

foo c xs = concatMap head . groups 2 . groups c $ xs 
```

dave4420 已经解释了您的代码有*什么*问题，但我想评论*一下*您是如何到达那里的，IMO。你的`keepOrNot :: Bool -> Int -> [a] -> [a] -> [a]`功能*太笼统了*。它根据收到`Bool`的*任何内容* `Bool`工作；但*你知道*你会喂它一连串的交替值`True`和`False`值。使用函数编程就像将管道插入漏斗 - 一个函数的输出用作下一个函数的输入 - 而这里的漏斗太宽，所以接触松动。

沿着这些行对代码进行最小程度的重写可能是

```
foo n lst = go lst
  where
    go lst = let (a,b) = splitAt n lst
                 (c,d) = splitAt n b
             in
                 a ++ go d 
```

联系“紧密”，这里没有“信息泄露”。我们自己只做*两次* ^((*))工作，并在这段代码中明确地“连接管道”，获取一个结果 ( `a`) 并丢弃另一个结果 ( `c`)。

--
^((*)) *两次*，反映两个布尔值，`True`并且`False`，以一种简单的方式*一个接一个*地交替。因此，这被冻结在代码结构中，而不是作为能够容纳任意布尔值的参数而松散。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T10:16:20.663

就像 dava4420 说的，你不应该使用`(++)`从左边累积。但也许你根本不应该积累！在 Haskell 中，惰性使得直截了当的“头部构造”通常比在 Lisp 中需要使用的尾递归更有效。例如：

```
foo :: Int -> [a] -> [a]     -- why would you give this a Show constraint?
foo ℓ = foo' True
  where foo' _ [] = []
        foo' keep lst
          | keep       = firstℓ ++ foo' False other
          | otherwise  =           foo' True other
         where (firstℓ, other) = splitAt ℓ lst 
```

# jquery - 幻灯片更改时使用jquery移动div

> ID：13026096
> 
> 赞同：0
> 
> 时间：2012-10-23T08:14:13.193
> 
> 标签：jquery

我有一个小的矩形链接框，当幻灯片中的幻灯片更改时，我想更改其位置。

焦点幻灯片的不透明度更改为 1，因此我尝试检查并相应更改框的 CSS，但这不适用于前景中的幻灯片，即新的 CSS 适用于所有幻灯片。

这是我的尝试：

```
<div id="slideshow">
    <ul id="nav">
        <li id="prev"><a href="#">Previous</a></li>
        <li id="next"><a href="#">Next</a></li>
    </ul>
    <ul id="slides">
        <li style="position: absolute; top: 0px; z-index: 3; opacity: 0; display: none; "><img src="image1.png" /></li>
        <li style="position: absolute; top: 0px; z-index: 3; opacity: 1; display: none; "><img src="image2.png" /></li>
        <li style="position: absolute; top: 0px; z-index: 3; opacity: 0; display: none; "><img src="image3.png" /></li>
    </ul>
 <a class="rectangle" style="top: 282px; left: 723px; width: 170px; height: 40px;" href="#"></a>
</div>

<script type="text/javascript">
$("#slides li").each(function() {
    if($(this).css("opacity")==1){
       $(".rectangle").css("top","200px");
}
});
</script> 
```

什么是正确的方法来确保盒子只按照滑块移动`li style="opacity:1;"`？

**编辑：**我正在使用 jquery 循环插件[http://jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:32:09.720

您可以使用`after`转换回调。转换完成后它将触发。

```
$('#slide').cycle({ 
    after: function(currSlideElement, nextSlideElement, options, forwardFlag) {
        $(".rectangle").css("top","200px");
    }
}); 
```

取自[http://jquery.malsup.com/cycle/options.html](http://jquery.malsup.com/cycle/options.html)

# java - java的Android致命错误

> ID：13026097
> 
> 赞同：-1
> 
> 时间：2012-10-23T08:14:15.030
> 
> 标签：java, android

```
10-23 08:07:24.488: E/AndroidRuntime(399): FATAL EXCEPTION: main
10-23 08:07:24.488: E/AndroidRuntime(399): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.tryagain/com.example.tryagain.MainActivity}: java.lang.ClassNotFoundException: com.example.tryagain.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.tryagain-2.apk]
10-23 08:07:24.488: E/AndroidRuntime(399):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
10-23 08:07:24.488: E/AndroidRuntime(399):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-23 08:07:24.488: E/AndroidRuntime(399):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-23 08:07:24.488: E/AndroidRuntime(399):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-23 08:07:24.488: E/AndroidRuntime(399):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-23 08:07:24.488: E/AndroidRuntime(399):  at android.os.Looper.loop(Looper.java:123)
10-23 08:07:24.488: E/AndroidRuntime(399):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-23 08:07:24.488: E/AndroidRuntime(399):  at java.lang.reflect.Method.invokeNative(Native Method)
10-23 08:07:24.488: E/AndroidRuntime(399):  at java.lang.reflect.Method.invoke(Method.java:507)
10-23 08:07:24.488: E/AndroidRuntime(399):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-23 08:07:24.488: E/AndroidRuntime(399):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-23 08:07:24.488: E/AndroidRuntime(399):  at dalvik.system.NativeStart.main(Native Method)
10-23 08:07:24.488: E/AndroidRuntime(399): Caused by: java.lang.ClassNotFoundException: com.example.tryagain.MainActivity in loader dalvik.system.PathClassLoader[/data/app/com.example.tryagain-2.apk]
10-23 08:07:24.488: E/AndroidRuntime(399):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
10-23 08:07:24.488: E/AndroidRuntime(399):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
10-23 08:07:24.488: E/AndroidRuntime(399):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
10-23 08:07:24.488: E/AndroidRuntime(399):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
10-23 08:07:24.488: E/AndroidRuntime(399):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
10-23 08:07:24.488: E/AndroidRuntime(399):  ... 11 more 
```

有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:26:35.813

1）检查AndroidManifest.xml中给出的包名

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.tryagain"> 
```

2）您是否在AndroidManifest.xml 中添加了您的活动信息？

```
<application android:icon="@drawable/icon" android:label="@string/app_name">
  <activity android:name=".MainActivity" android:label="@string/app_name"></activity>
   .......
</application> 
```

# bash - Shell编程，管道输出文件

> ID：13026099
> 
> 赞同：0
> 
> 时间：2012-10-23T08:14:17.770
> 
> 标签：bash, shell, pipe

这里是 shell 编程的新手。

到目前为止我有这个代码：

```
prog inputfile outputfile1

sort -rn outputfile1 | cut -f1-2 > outputfile2 
```

我的问题是有没有办法将输出文件直接从第一个命令传递到第二个命令以获取 outputfile2，即跳过创建 outputfile1 的需要？prog 是一个自定义程序，它以 inputfile 和 outpufile 名称作为参数。

我发现的最接近的东西是shell中的替换，例如

```
sort <(ls dir) 
```

但在这种情况下它并没有真正的帮助，因为我只想管道输出文件而不是标准输出。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:16:55.890

如果我说对了——恰恰相反：

```
prog inputfile >(sort -rn | cut -f1-2 >outputfile) 
```

取决于你可以使用的编

```
prog inputfile /dev/stdout | sort -rn | cut -f1-2 >outputfile 
```

甚至

```
prog inputfile - | sort -rn | cut -f1-2 >outputfile 
```

# php - SQLite FTP 下载/上传问题

> ID：13026102
> 
> 赞同：1
> 
> 时间：2012-10-23T08:14:21.837
> 
> 标签：php, windows, linux, sqlite

在 Linux 服务器上有一堆 SQLite 数据库。我最近对它们进行了备份。数据库崩溃的站点，我不得不重新上传所有文件。

现在 SQLite 数据库不再工作了。服务器运行的是 Linux，我安装了 Windows，但文件只是下载，从未在本地打开。另外，我确保我在一夜之间从服务器下载它们，因此当时没有人与文件通信。

我读到（现在，在损坏完成之后）我必须使用某种 SQLite API 来进行我一开始不知道的备份。

所以我的问题是 - 有没有办法保存这些格式错误的文件？为什么它们首先是畸形的？

天呐！

编辑：我能够查询`SELECT * FROM sqlite_master`数据库文件，但没有别的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:39:19.277

复制 SQLite 文件是完全可以的，只要当前没有人写入它们。

FileZilla 的默认传输模式通常*不是*二进制的，因此很可能已经损坏了您的数据库文件。

使用 ASCII 模式进行 FTP 传输时，所有看起来像行尾的字节（在 Unix 中为 10，在 OS X 中为 13，在 Windows 中为 13+10）都将转换为目标系统的行尾样式。之后，很难或自动确定原始字节是什么，因此出于实际目的，数据库是不可恢复的。

# graph - 压缩稀疏行 (CSR) 稀疏矩阵的快速访问元素

> ID：13026111
> 
> 赞同：4
> 
> 时间：2012-10-23T08:14:50.187
> 
> 标签：graph, fortran, sparse-matrix, circuit, pardiso

我想测试一些较新的稀疏线性求解器，我想知道是否有一种快速填充矩阵的方法。我感兴趣的格式是 CSR (http://goo.gl/hLXYd)。假设 CSR 格式的矩阵由下式给出：

```
values(num non-zero elements)
columns(num non-zero elements)
rowIndex(num rows + 1) 
```

所考虑的稀疏矩阵来自网络。所以，我有数千个节点，其中一些节点通过线连接。因此，矩阵在结构上是对称的。每个连接 (i,j) 向对角项 (i,i) 和 (j,j) 以及非对角项 (i,j) 和 (j,i) 添加一些内容。我可以在相同的节点 (i,j,1)、(i,j,2) 之间有多个连接...因此，我可能需要多次重新访问 2 个对角线和 2 个非对角线元素。

我知道我可以通过执行 rowIndex(i) 来获得行的开头。然后，我必须遍历元素 columns(rowIndex(i):rowIndex(i+1)-1) 才能找到 j 的位置。

**问题：**

有没有一种方法可以在 CSR 格式中更快地访问元素，而无需每次我想更新元素时​​都进行搜索？

一些澄清：我只需要从头开始填写矩阵。矩阵在结构上是对称的，并不是真正对称的。保存的值与网络数据（阻抗、电阻等）有关，它们具有真实值。一般来说，价值（i，j）<>价值（j，i）。我有 (name1,i1,j1,value1), (name2,i2,j2,value2) 等形式的元组。这些元组没有排序，2 个元组可以引用相同的 i,j 值，这意味着它们需要被添加

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:04:53.373

你所拥有的是所谓的三元组稀疏格式。CRS的创建，包括删除重复条目和对值求和，可以非常有效地实现。在自己编程之前，请查看[SuiteSparse 库](http://www.cise.ufl.edu/research/sparse/SuiteSparse/)。它是用 C 编写的，但我相信你会理解其中的原理。您感兴趣的是`cholmod_triplet.c`文件，它实现了您需要的功能。

本质上，转换是在行和列索引上使用两阶段桶排序执行的。该算法具有线性复杂性，如果您对处理大型数据集感兴趣，这一点很重要。

**编辑**如果要一起跳过显式创建三元组格式，可以通过动态生成`(row, col)`连接并将它们添加到动态稀疏结构来实现。我通常使用插入排序和排序列表来做到这一点，这实际上是最快的。它也比三元组到 CRS 的转换更快，并且使用更少的内存。方法如下：

*   如果您大约知道，每行中有多少个非零条目，对于每一行，您预先分配一个（空）列索引数组，以及一个单独的值数组（不是链表，而是一个简单的数组）那个大小。就像是

    `static_lists_cols[row] = malloc(sizeof(int)*expected_number_of_non_zeros)` `static_lists_vals[row] = malloc(sizeof(double)*expected_number_of_non_zeros)`

*   如果您不知道这一点，您可以选择一个初始大小并在行列表已满时根据需要重新分配（使用一些足够大的块大小以避免重新分配开销）。

*   对于每一`(row, col)`对，您将 插入到与使用插入排序`col`相对应的排序列表中。`row`对于每行小的（最多几百个）非零，线性搜索是最快的。对于每行更多的非零，您可以使用二分法来定位插入`col`索引的正确位置。
*   `col``row`通过在排序列表中移动具有较高列索引的非零条目来将其插入到排序列表中。这是缓存友好的，因为实际上这些行足够小，可以放入现在的任何缓存中。
*   完成后，您需要通过将各个行列表复制到最终的`columns`. 价值观也是一样。
*   如果您确定某些行可以有零条目，您实际上可以通过预先分配一个静态的“列表数组”来避免最后一步。因此，每行的条目数是恒定的，其中一些可能为零。有时这没关系。

这种方法比使用三元组到稀疏转换要快，至少对于我使用它的 FEM 模型来说是这样。一般的原因是*内存带宽*是这里的瓶颈，而上面的方案使用的内存要少得多：

*   创建三元组格式需要时间，您需要将三元组写入内存
*   转换为 CRS 需要至少一次读取和写入三元组以对它们进行排序（实际上不止一次，如果您查看算法。您排序两次，并且您需要辅助数据结构。）
*   根据连接结构的不同，您最终可能会获得大量`(row, col)`三元组格式的重复项，这些重复项在组装过程中通过添加相应的值来删除。上述方法中不存在此开销 - 如果`col`行列表中已存在，则只需更新相应的值。
*   如果您将行范围分配给各个工作人员，则可以并行更新排序列表。不需要通信，也不需要同步。确保负载平衡是另一回事......

看看[使用这两种方法（图 1）](http://milamin.sourceforge.net/technical-notes/sparse-matrix-assembly)对 2D 中的三角形元素进行的性能比较。请注意，性能差异取决于*三元组中的条目数与组装稀疏矩阵格式的比率*（表 2）。但总的来说，该方法永远不会比三元组到crs的转换差，**并且需要首先创建三元组**。您还可以下载一个 MATLAB MEX 函数`sparse_create`，它是`mutils`包的一部分（请参阅下载部分）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:27:26.013

您的问题似乎混淆了 2 个完全不同的问题：

1.  以 CSR 形式创建矩阵的快速方法是什么？
2.  有没有更快的方法从已经以 CSR 形式存储的矩阵中读取值？（比您描述的直接方法更快）

所以这里有2个答案：

1.  一般来说，将网络数据从它的任何形式读取到诸如[键字典之](http://en.wikipedia.org/wiki/Sparse_matrix)类的东西中（其他中间形式可用，并且由于速度或其他原因可能对您更有吸引力）；然后将该中间结构转换为矩阵的 CSR 形式。更多关于这下面。
2.  我不相信，不是以 CSR 形式存储的矩阵。这种相对较慢的访问速度是您为节省空间付出的代价的一部分。你已经用时间换空间，或者用空间换时间，这取决于你的观点。

您对输入数据的描述表明您应该考虑设计自己的中间形式来编组原始数据。由于您的邻接矩阵是对称的，您只需要以任何形式存储它的一半。此外，您可能不需要沿主对角线存储元素——我猜该节点要么`i`总是连接到节点`i`，要么永远不会，因此网络的性质决定了存储在`(i,i)`. 我有点不确定要在矩阵的每个节点上存储的信息，是`i`and之间的连接数`j`还是其他？

# iphone - 如何在 UITableViewCell 的子类中管理旋转

> ID：13026118
> 
> 赞同：1
> 
> 时间：2012-10-23T08:15:14.647
> 
> 标签：iphone, ios, uitableview, rotation

我`UITableViewCell`在通用应用程序中有一个自定义，我必须为 iPhone 和 iPad 设置不同的框架，我必须考虑不同的方向，但无法识别设备的方向。`UIDeviceOrientation`是在错误的地方？`UIDeviceOrientation`返回`0`。这是中的代码`CustomCell.m`

```
 -(void) layoutCellPortrait{
 if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){

         //......frame subviews iPhone

 }else{

      //........frame subviews Ipad

 }

 }
 -(void) layoutCellLandscape{
     if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){

         //.....frame subviews iPhone

     }else{

        //.......frame subviews Ipad

 }

}

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
   {

    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];

    if (self) {

    UIDeviceOrientation deviceOrientation = [[UIDevice currentDevice]orientation];
    NSLog(@"The orientation is è %d", deviceOrientation);//here return 0

    if(deviceOrientation == UIInterfaceOrientationPortrait || deviceOrientation== UIInterfaceOrientationPortraitUpsideDown) {

         [self layoutCellPortrait];

    }
    else if (deviceOrientation== UIInterfaceOrientationLandscapeRight){
        [self layoutCellLandscape];

    }
    else if (deviceOrientation==UIInterfaceOrientationLandscapeLeft){

        [self layoutCellLandscape];

    }

    [self.contentView addSubview:self.subviews];

}
return self;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:21:27.670

在你的类中实现旋转委托，每当发生旋转时，调用单元类中的一个方法，并以此方向作为输入参数（假设你正在调用`reloadData`桌子上的 a ，它反过来又调用方法中的这个`cellForRowAtIndexpath`方法。这应该重置框架相应地在每次旋转。

**更新：**

在轮值代表中，

```
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration {
  self.interfaceOrientation = orientation;
}

-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{
  [self.tableView reloadData];
} 
```

在 tabelView`cellForRowAtIndexPath`方法中，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

   static NSString *cellIdentifier = @"cell";
   CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
   if (cell == nil) {
     cell = [[[CustomCell alloc] initWithStyle: UITableViewCellStyleDefault reuseIdentifier:cellIdentifier] autorelease];
   }
  //code..
  [cell rearrangeSubviewsForOrientation:self.interfaceOrientation];

  return cell;
} 
```

在你的`cell`课堂上添加这个，

```
- (void)rearrangeSubviewsForOrientation:(UIInterfaceOrientation)orientation {
    if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){

        //iPhone
        if(orientation == UIInterfaceOrientationPortrait || orientation== UIInterfaceOrientationPortraitUpsideDown) {
            //portait
        } else {
            //landscape
        }

    } else {

        //iPad
        if(orientation == UIInterfaceOrientationPortrait || orientation== UIInterfaceOrientationPortraitUpsideDown) {
            //portait
        } else {
            //landscape
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-25T11:45:28.997

尝试这个

```
-(void)layoutSubviews{
 --- your code ----
} 
```

1.  每次旋转设备时都会调用此方法。
2.  在设备旋转时在要运行的括号内编写代码

注意：这是 UITableViewCell 的子类的类

如果您想检测类中的方向变化，该类是 UIViewController 之类的子类，下面有一个类似的方法，称为**viewDidLayoutSubviews**

```
- (void)viewDidLayoutSubviews{
 --- your code ---
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-07T16:53:55.703

对于**Swift**，如果您`UIView`的`UITableViewCell`without中有 custom`AutoLayout`并且您想在方向更改时更新 UI，您可以在`UITableViewCell`自定义类中执行此操作：

```
override func layoutSubviews() {
    super.layoutSubviews()
    self.customView.layoutSubviews()
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-26T04:26:33.330

你需要看的两件事是：

1.  首先，检查设备是否旋转以重新加载您的表使用

    -(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{ [self.tableView reloadData]; }

2.  其次，在 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 中，使用 UIInterfaceOrientationIsLandscape(self.interfaceOrientation) 检查 GUI 状态以加载所需的布局。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T08:52:16.707

其实我也做过同样的事情。首先，您需要为不同的方向制作两个 UITableViewCell.xib，然后在您的 viewController 中实现以下方法。

您不需要在 customCell.xib ViewController 中检测设备方向自动管理 tabelView 方向。

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation{

    if ([[UIDevice currentDevice] userInterfaceIdiom] != UIUserInterfaceIdiomPhone)
    {
        if(self.interfaceOrientation==UIInterfaceOrientationPortrait || self.interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown)
        {

        }
        else
        {

        }
    }
    else
    {

    }
[yourTable reloadData];
} 
```

**然后在你的 tabelView CellForRowAtIndexPath 方法中实现下面的代码**

```
if(self.interfaceOrientation==UIInterfaceOrientationPortrait || self.interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown) 
        {  

            static NSString *CellIdentifier = @"Cell";
            CategoryCell *cell = [tableView1 dequeueReusableCellWithIdentifier:CellIdentifier];
            if (cell == nil) {
                cell = [[[CategoryCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier] autorelease];
                cell.autoresizingMask = UIViewAutoresizingFlexibleWidth;

            }
}
else{
            static NSString *CellIdentifier = @"Cell1";
            CategoryCell1 *cell = [tableView1 dequeueReusableCellWithIdentifier:CellIdentifier];
            if (cell == nil) {
                cell = [[[CategoryCell1 alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier] autorelease];
                cell.autoresizingMask = UIViewAutoresizingFlexibleWidth;
                            } 
```

# actionscript-3 - 如何将位图设置为蒙版

> ID：13026119
> 
> 赞同：0
> 
> 时间：2012-10-23T08:15:20.327
> 
> 标签：actionscript-3

我想将包含透明区域的图片作为蒙版应用于显示对象。蒙版只显示蒙版有颜色的区域。但实际上，显示对象仍然显示整个区域。所以我将位图转换为矢量图，这样就解决了问题，但是转换方法很糟糕。

```
 public static function createVectorImage(bd:BitmapData,colorKey:uint = 0):Shape{

        if(bd==null){
            return null;
        }
        var sh:Shape = new Shape();
        var g:Graphics = sh.graphics;
        g.beginBitmapFill(bd);
        var beginPixel:int  = -1;
        var i:int,il:int,j:int,jl:int;
        var value:uint;
        for(i = 0,il=bd.height;i<il;i++){
            for(j = 0,jl = bd.width;j<jl;j++){
                value = bd.getPixel32(j,i);
                if(value!=colorKey&&beginPixel==-1){
                    beginPixel = j;
                }else if(value==colorKey&&beginPixel!=-1){
                    //draw rect
                    g.drawRect(beginPixel,i,j-beginPixel,1);
                    beginPixel = -1;
                }
            }
            if(beginPixel!=-1){
                g.drawRect(beginPixel,i,j-beginPixel,1);
                beginPixel = -1
            }
        }
        g.endFill();

        return sh;
     } 
```

还有什么比这更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:36:53.880

您可以将显示对象转换为位图，然后在其上应用蒙版。

1.  将显示对象转换为位图数据：

    ```
    var rect:Rectangle = displayObject.getRect();
    var displayBD:BitmapData = new BitmapData(rect.width, rect.height, true, 0);

    displayBD.draw(displayObject); 
    ```

2.  敷面膜：

    ```
    private static const ORIG:Point = new Point(0, 0);
    private static function createBitmapDataWithMask(
            baseBD:BitmapData, maskBD:BitmapData):BitmapData
    {
        var bitmapData:BitmapData;

        bitmapData = new BitmapData(baseBD.width, baseBD.height, true, 0x000000);
        bitmapData.copyPixels(baseBD, baseBD.rect, ORIG, maskBD, ORIG, true);

        return bitmapData;
    } 
    ```

3.  显示位图数据：

    ```
    var bitmapData:BitmapData = createBitmapDataWithMask(displayBD, maskBD);
    var bitmap:Bitmap = new Bitmap(bitmapData, "auto", true);

    addChild(bitmap); 
    ```

4.  如果您从舞台上移除位图，请不要忘记释放位图数据！

    ```
    removeChild(bitmap);
    bitmap.bitmapData.dispose();
    bitmap = null; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:49:43.743

另一种选择是使用[位图缓存](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#cacheAsBitmap)。它需要应用于遮罩以及被遮罩：

```
var bd:BitmapData = new BitmapData(200, 200, true, 0x00000000);
bd.fillRect(new Rectangle(0, 0, 40, 40), 0xff000000);

var mask:Bitmap = new Bitmap(bd);
mask.cacheAsBitmap = true;

var maskee:Sprite = new Sprite();
maskee.cacheAsBitmap = true;
maskee.graphics.beginFill(0xff0000, 1);
maskee.graphics.drawRect(0, 0, 200, 200);
maskee.graphics.endFill();
maskee.mask = mask;

addChild(mask);
addChild(maskee); 
```

# ruby-on-rails - 页面重新加载后 Rails 找不到资产

> ID：13026120
> 
> 赞同：0
> 
> 时间：2012-10-23T08:15:23.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nginx, ruby-on-rails-3.2, passenger

我在我们的生产服务器（nginx + 乘客 3）上遇到了一个 rails (3.2.6) 应用程序的问题。之后

```
rake assets:precompile 
```

一个静态页面就像一个魅力，但几分钟后我收到一个现有图像的资产未找到错误。如果我再次重新编译资产，它可以工作，但几分钟后，rails 再次引发 file-not-found 错误。

在这里可以看到 production.rb 和 Gemfile：[https ://gist.github.com/3937589](https://gist.github.com/3937589)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:38:04.893

*   有什么方法可以让您的代码对 /public 文件夹进行任何操作？
*   您是否验证过相关资产确实在 /public 文件夹中？
*   是否有可能会干扰您的文件系统的 cron 作业或其他工作进程？

assets:precompile 所做的只是简单地处理您的应用程序/资产并将它们复制到`/public/assets`.

它通常有 3 个优点：未压缩的原始文件、原始文件 + 从帮助程序 ( `asset_path`) 和 gzip 压缩文件引用时使用的哈希。

您可以简单地转到您的生产服务器并查看`/public/assets`以验证是否缺少任何内容。如果文件在那里并且用户仍然收到错误，我会查看我的 nginx 配置。

# php - jquery函数中的变量为空

> ID：13026121
> 
> 赞同：0
> 
> 时间：2012-10-23T08:15:38.703
> 
> 标签：php, javascript, jquery, html

我在网页上看到我的一个变量时遇到问题。这是我到目前为止所拥有的。

```
 $(document).ready(function() {
    $(function() {
        $("#CheckID").click(function() {
         // submit ajax job and display the result
         var id = '$("#ID").val()'      
            $.ajax({
                type: "POST",
                url: "test_wID.php",
                data: "id",
                success: function(data) {
                $('#rightselection').html(data)
                }
            });
        });
    });
}); 
```

这是我用来将输入到表单中的 ID 并将该 ID 用于 bash 脚本的 jquery 函数。

这里是php。

```
<?php

//Get the ID from the HTML form and use it with the check chunk script.

$id = $_POST['ID'];
if (is_null($id)){
        echo "$id is null";
}
echo "Selected test Game ID: ".$id;
//print shell_exec('/opt/bin/tester $id');

?> 
```

我注释掉了脚本，因为变量返回 null，此时我只是想确保我得到了 ID。

为了完整起见，这里是我正在使用的表格。

```
print "<p><h3>ID: <input type=\"text\" id=\"ID\" /></h3></p>";

#print "<br>";

print "<p><button id=\"CheckID\">Check ID</button></p>"; 
```

当我单击按钮时，我在我的 div 中收到变量为空的消息。所以我的问题是我在声明中遗漏了什么吗？怎么是`var id`空的？

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:17:52.203

您在两点混淆了字符串和变量引用。

首先，该语句`var id = '$("#ID").val()'`只为您的变量分配一个字符串，`if`而不是 jQuery 调用的返回值。因此，只需删除`'`此处。

其次，`data`您 `ajax()`再次提供给调用的参数仅包含一个字符串`"id"`，而不是相应的值。在这里您需要更改为`{'id': id}`.

因此，在更正所有内容后，您的代码应如下所示：

```
 $(document).ready(function() {
        $("#CheckID").click(function() {
         // submit ajax job and display the result
         var id = $("#ID").val();     
            $.ajax({
                type: "POST",
                url: "test_wID.php",
                data: {'id': id},
                success: function(data) {
                  $('#rightselection').html(data);
                }
            });
        });
}); 
```

^(旁注：尝试将 all`;`放在它们所属的位置。这可以防止一些难以跟踪的错误！)

**编辑**

正如@FlorianMargaine 在评论中指出的那样，您的代码只需要一个包装器而不是两个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T08:18:31.337

您应该考虑将 jQuery 代码更改为：

```
$.ajax({
    type: "POST",
    url: "test_wID.php",
    data: {id: $("#ID").val()},
    success: function(data) {
        $('#rightselection').html(data)
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T08:35:59.560

首先，以下两个片段是**等效**的：

```
$(document).ready(function() {
});

// Is equivalent to:

$(function() {
}); 
```

因此，您的代码与以下内容相同：

```
$(document).ready(function() {
    $(document).ready(function() {
    });
}); 
```

根本没用，对吧？

其次，这条线是完全错误的：

```
var id = '$("#ID").val()'; 
```

您正在将**字符串**传递给`id`变量。`$('#ID').val()`不**评估**。这相当于在 PHP 中执行此操作：

```
$id = '$_POST["id"]'; 
```

这是错误的，对吧？

你要这个：

```
var id = $('#ID').val(); 
```

顺便说一句，这个变量命名可以改进，HTML ID 也是如此。

第三，您在以下`data`选项中犯了同样的错误`$.ajax`：

```
data: 'id' 
```

您只是将**字符串**传递给`data`选项。**你想要`id`变量的值。**

然后，如果你绝对想要一个字符串，我不推荐它。jQuery 需要一种特殊的字符串。你最好传递一个对象。像这样：

```
data: {
    id: id
} 
```

你明白为什么变量命名是错误的吗？您无法将属性与值区分开来。如果您执行了以下操作：

```
var idValue = $('#ID').val(); 
```

你可以使用这个：

```
data: {
    id: idValue
} 
```

哪种方式更具可读性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T08:17:47.987

在您的 $.ajax 调用中，您需要执行以下操作：

```
data : { id: id } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-23T08:17:39.863

如果你想在 AJAX 调用中传递参数，你需要传递一个类似于你在 urls 中看到的 GET 字符串的字符串。所以像：`d=123&name=test`

换行

```
var id = '$("#ID").val()' 
```

至

```
var id = 'id=' + $("#ID").val(); 
```

# ckeditor - 以编程方式控制保存按钮的启用/禁用状态

> ID：13026122
> 
> 赞同：6
> 
> 时间：2012-10-23T08:15:41.853
> 
> 标签：ckeditor

如何使用外部 JS 启用/禁用 CKEditor 的保存按钮？我不想完全删除它，只需更改灰色和彩色图标之间的外观，使其更加用户友好。

我的保存按钮是这样生成的：

```
CKEDITOR.plugins.registered['save'] =
{
    init : function( editor )
    {
        var command = editor.addCommand( 'save', {
            modes : { wysiwyg:1, source:1 },
            exec : function( editor ) {
                if(My.Own.CheckDirty())
                    My.Own.Save();
                else
                    alert("No changes.");
            }
        });
        editor.ui.addButton( 'Save',{label : '',command : 'save'});
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-23T10:44:53.273

干得好：

对于 3.6.x：

```
CKEDITOR.instances.yourEditorInstance.getCommand( 'save' ).disable();
CKEDITOR.instances.yourEditorInstance.getCommand( 'save' ).enable(); 
```

对于 4.x：

```
CKEDITOR.instances.yourEditorInstance.commands.save.disable();
CKEDITOR.instances.yourEditorInstance.commands.save.enable(); 
```

# android - 如何在android中更新数据库表

> ID：13026127
> 
> 赞同：1
> 
> 时间：2012-10-23T08:16:10.760
> 
> 标签：android, android-sqlite

当电话簿上的联系人更新时，我想更新数据库中的表。当我的应用程序启动时，我试图更新我的表。这是我的代码

```
package com.contactsdemo;

import Dat.DataDemo;
import android.app.Activity;
import android.app.ListActivity;
import android.content.ContentResolver;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.provider.ContactsContract;

public class MainActivity extends Activity {

DataDemo aa = new DataDemo(this);
SQLiteDatabase db;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        ContentResolver cr = getContentResolver();
        Cursor c = cr.query(ContactsContract.Contacts.CONTENT_URI,null,null,null,null);
        aa.onUpgrade(db,1,2);
        if(c.getCount()>0){
            while (c.moveToNext()){
//              String id = c.getString(c.getColumnIndex(ContactsContract.Contacts._ID));
                String name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                aa.insertData(name);
            }
                aa.close();

        }
    }

} 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:25:50.417

试试这个方法

```
public boolean updateNote(long rowId, String value1, String value2, String value3) {
        ContentValues args = new ContentValues();
        args.put(KEY_VALUE1, value1);
        args.put(KEY_VALUE2, value2);
        args.put(KEY_VALUE3, value3);
        return mDb.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
    } 
```

希望它会有用：D

# c# - 使用 Func 在函数中实现泛型

> ID：13026128
> 
> 赞同：0
> 
> 时间：2012-10-23T08:16:13.807
> 
> 标签：c#, generics, func

我有一个跟随静态功能：

```
public static string codeList<T>(List<T> thelist, Func<T, string> coder); 
```

将此函数与我自己的对象一起使用是没有问题的，例如：

```
string code = codeList<MyClass>(myclassList, MyClass.code); 
```

其中 MyClass.code 是一个静态函数（在 MyClass 中定义），它获取 MyClass 并返回字符串。

问题是当我尝试使用这个函数时，`List<int>`或者`List<double>`我现在所做的是预定义静态变量，比如`Func<int,string> intCoder = (x) => x.ToString();`and`Func<double,string> (x) => x.ToString();`并使用它们。还有另一种方法吗？就像是：

```
string code = codeList<int>(intList, Int32.ToString); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:20:27.887

你可以这样做

```
string code = codeList<int>(intList, Convert.ToString); 
```

恰好[`Convert.ToString`](http://msdn.microsoft.com/en-us/library/system.convert.tostring.aspx)有适当的签名[过载。](http://msdn.microsoft.com/en-us/library/x70d7t0y.aspx)

问题[`int.ToString`](http://msdn.microsoft.com/en-us/library/3k9ccxf6.aspx)在于它的所有重载都没有适当的签名（它们没有`int`隐含的参数）。在这种情况下，除了定义一个适配器函数之外，您将无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:24:41.057

您不必为函数声明变量。您可以将 lambda 表达式作为参数值

```
string code = codeList(intList, i => i.ToString()); 
```

# javascript - ExtJS 3.3 Store：保存接收不完整数据的事件

> ID：13026132
> 
> 赞同：0
> 
> 时间：2012-10-23T08:16:44.367
> 
> 标签：javascript, events, extjs, store, extjs3

我们在这个项目中仍在使用 ExtJS 3.3，因为它是一个较旧的项目并且（不幸的是）我们目前没有时间升级。

我有一个带有宁静 JSON 存储的编辑器网格面板。JSON 存储已`autoSave`设置为`false`，因为当某些事情发生变化时，我需要在服务器上执行一个可能长时间运行的任务。所以我决定创建一个“保存”按钮，这样商店只有在用户完成修改后才会保存。由于商店正在向服务器发送多个请求，我正在监听商店的`save`事件以在保存所有数据后触发另一个请求开始长时间运行的操作。

问题来了：根据文档，事件处理程序的第三个参数是已保存的数据，按存储操作（创建、更新或销毁）分组，如下所示：

```
{
    create: [ /* created records here */ ],
    update: [ /* updated records here */ ],
    destroy: [ /* deleted records here */ ]
} 
```

我的问题是我只收到“创建”的记录。对于其他操作，当应该有一些记录时，数组总是空的。如果没有使用“update”或“destroy”的记录，则该`data`对象不包含“update”或“destroy”键（这是正确的）。

假设在最后一次保存操作中有一条更新、两条创建和没有删除的记录，我收到的数据如下所示：

```
{
    create: [
        { /* record 1 data here */ },
        { /* record 2 data here */ }
    ],
    update: [] // <-- should not be empty!
} 
```

我不知道为什么`update`，`destroy`总是空着。谁能帮我？

或者，也许您有另一个建议，我可以如何解决原始问题，使用所有创建/更新/删除记录的 ID 执行“保存后”任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:11:09.220

我设法解决了这个问题。

显然`beforesave`事件接收到正确的参数。我现在将脏记录存储在存储中的一个临时属性中，然后再保存它们，然后在`save`事件中读取该属性。

```
listeners: {
    beforesave: function (store, data) {
        // in my concrete case it's okay to join all records
        var all = (data.create || []).concat(data.update || []).concat(data.destroy || []);
        store.tempData = all;
    },

    save: function (store) {
        // do something with store.tempData
    }
} 
```

由于其中的记录`tempData`是引用，因此在调用时它们可能是幻像记录（没有服务器生成的 ID）并不重要`beforesave`。调用时`save`，这些记录已经被“真实”记录替换。

# oracle - 如何使用 jmeter 测试具有 sys_refcursor 返回类型的 Oracle 存储过程？

> ID：13026140
> 
> 赞同：0
> 
> 时间：2012-10-23T08:17:00.497
> 
> 标签：oracle, testing, stored-procedures, jmeter, sys-refcursor

我想使用 jmeter 测试一个 Oracle 存储过程。除了参数，我什么都做了。

这是我的 SQL 查询：

> 声明 outinfo varchar2(20); outtable sys_refcursor; 开始 {call RK_JSCX(?,?)}; 结尾;

Oracle中的outtable是一个游标。我使用resultSet将它包含在java中。但是，无论我在参数类型中设置什么，它都表示无效类型。

> 示例开始：2012-10-25 16:06:41 CST 加载时间：0 延迟：0 字节大小：25 字节大小：0 字节主体大小：25 示例计数：1 错误计数：1 响应代码：null 0 响应消息：java.sql.SQLException：无效数据类型：游标

响应头：oracle.jdbc.driver.T4CConnection@58ba09

SampleResult 字段： ContentType：文本/纯文本 DataEncoding：UTF-8

如何解决？谢谢！

这是我在java中的代码：

```
public String RK_JSCX() throws Exception {

    RK_JSCX_Response response = null;
    List<RK_JSCX_Outtable> list = null;
    Connection con = null;
    CallableStatement cs = null;
    ResultSet rs = null;
    String sql = null; 
    try {
        sql = "{call RK_JSCX(?,?)}";
        con = ConnectionUtils.getInstance().getConnect();

        if (con.isClosed()) {
            throw new IllegalStateException("ERROR.THE   CONNECTION   ISCLOSED");
        }

        cs = con.prepareCall(sql);
        cs.registerOutParameter(1, oracle.jdbc.OracleTypes.CURSOR);
        cs.registerOutParameter(2, Types.VARCHAR);

        cs.execute();

        rs = (ResultSet) cs.getObject(1);
        list = new ArrayList<RK_JSCX_Outtable>();
        while (rs.next()) {

            RK_JSCX_Outtable out = new RK_JSCX_Outtable(rs.getString(1), rs.getString(2), rs.getString(3), rs.getString(4), rs.getInt(5), rs.getString(6));

            list.add(out);
        }
        String outInfo = cs.getString(2);
        response = new RK_JSCX_Response(list, outInfo);

    } catch (SQLException e) {

        e.printStackTrace();

    } catch (Exception e) {
        e.printStackTrace();

    }finally {

        try {
            if (rs != null) {
                rs.close();
                if (cs != null) {
                    cs.close();
                }
                if (con != null) {
                    con.close();
                }
            }
        } catch (SQLException e) {

            System.out.println("Exception2");
            e.printStackTrace();
        }
    }
    return JSON.toJSONString(response);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T21:11:02.547

这是如何做到的：

*   SQL 查询：调用 RK_JSCX(?,?)

*   参数值：OUT、OUT

*   参数类型：OUT -10,OUT VARCHAR

    -10 是 OracleTypes.CURSOR 的 int 值

*   变量名：cursor、outInfo

    ```
     Names are what you want 
    ```

JMeter 允许使用比 java.sql.Types 常量更多的类型，在这种情况下，您不使用常量名称，而是使用常量的整数值。

文档已经澄清（在下一个 JMeter 版本中），请参阅：

*   [https://issues.apache.org/bugzilla/show_bug.cgi?id=54048](https://issues.apache.org/bugzilla/show_bug.cgi?id=54048)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:46:22.233

尝试以下更改

将调用过程的语法更改为

```
cs = con.prepareCall("BEGIN RK_JSCX(?, ?); END;"); 
```

而且我相信您的第一个 OUT 参数是 VARCHAR2 对吗？所以

```
cs.registerOutParameter(1, Types.VARCHAR); 
```

然后使用以下内容来转换 CallableStatement

```
rs = ((OracleCallableStatement)cs).getCursor(2); 
```

更新 1

我已更改您的程序以演示工作版本

程序

```
CREATE OR REPLACE PROCEDURE rk_jscx (outtable   OUT sys_refcursor,
                                                 outinfo    OUT VARCHAR2
                                                )
AS
BEGIN
    OPEN outtable FOR
        SELECT  SYSDATE
          FROM  DUAL;

    outinfo := 1;
EXCEPTION
    WHEN NO_DATA_FOUND
    THEN
        outinfo := 2;
        ROLLBACK;
END rk_jscx; 
```

Java 代码

```
CallableStatement stmt = conn.prepareCall("BEGIN rk_jscx(?, ?); END;");
 stmt.registerOutParameter(1, OracleTypes.CURSOR); 
 stmt.registerOutParameter(2, Types.VARCHAR);
 stmt.execute();
      ResultSet rs = ((OracleCallableStatement)stmt).getCursor(1);
      while (rs.next()) {
        System.out.println(rs.getDate("sysdate")); 
      } 
```

以上印刷品`2012-10-23`

还要检查你的 jdbc 驱动程序

# android - 在 AlertDialog.Builder 中使用 findViewById() 时出现 NullPointerException

> ID：13026141
> 
> 赞同：2
> 
> 时间：2012-10-23T08:17:17.483
> 
> 标签：android, dialog, nullpointerexception, findviewbyid

这是我的代码

```
@Override
public void onClick(View v) {
final AlertDialog.Builder adb = new AlertDialog.Builder(getApplicationContext());
adb.setView(LayoutInflater.from(getApplicationContext()).inflate(R.layout.custom, null));

adb.setPositiveButton("Add",new android.content.DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int arg1) {

                DatePicker datePicker = (DatePicker)findViewById(R.id.datePicker);

                java.util.Date date = null;
                Calendar cal = GregorianCalendar.getInstance();
                cal.set(datePicker.getYear(),datePicker.getMonth(), datePicker.getDayOfMonth());
                date = cal.getTime();
            }                  
        });             
adb.show();
} 
```

我在这一行中有 NullPointerException，我认为 datePicker 不是 findById，因为我使用 AlertDialog.Builder。

> cal.set(datePicker.getYear(),datePicker.getMonth(), datePicker.getDayOfMonth());

我尝试使用`adb.findViewById();`，但这是一个错误（对于 AlertDialog.Builder 类型，方法 findViewById(int) 未定义）。你能帮我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T08:24:58.030

改变

```
DatePicker datePicker = (DatePicker)findViewById(R.id.datePicker); 
```

这条线到

```
DatePicker datePicker = (DatePicker)adb.findViewById(R.id.datePicker); 
```

…………………………………………………………………………

试试这个：

```
final AlertDialog.Builder adb = new AlertDialog.Builder(this);
final View view = LayoutInflater.from(getApplicationContext()).inflate(R.layout.main1, null);
adb.setView(view);
final Dialog dialog;
adb.setPositiveButton("Add",new android.content.DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int arg1) {

        DatePicker datePicker = (DatePicker)view.findViewById(R.id.datePicker1);

        java.util.Date date = null;
        Calendar cal = GregorianCalendar.getInstance();
        cal.set(datePicker.getYear(),datePicker.getMonth(), datePicker.getDayOfMonth());
        date = cal.getTime();
    }                  
});   
dialog = adb.create();
dialog.show(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T08:22:42.500

搜索`DatePicker`使用`dialog`参数：

```
DatePicker datePicker = (DatePicker) ((Dialog) dialog).findViewById(R.id.datePicker); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-12T06:01:39.167

我认为这可能是问题所在

```
final AlertDialog.Builder adb = new AlertDialog.Builder(getApplicationContext());
adb.setView(LayoutInflater.from(getApplicationContext()).inflate(R.layout.custom,null)); 
```

使用下面的方法来膨胀视图并使用视图对象来获取 id。

```
 LayoutInflater factory = LayoutInflater.from(this);
    final View textEntryView = factory.inflate(R.layout.alert_dialog_text_entry, null);

DatePicker datePicker = (DatePicker)textEntryView.findViewById(R.id.datePicker1); 
```

例子：

```
protected Dialog onCreateDialog() {
    LayoutInflater factory = LayoutInflater.from(this);
    final View textEntryView = factory.inflate(R.layout.alert_dialog_text_entry, null);
    return new AlertDialog.Builder(TicTacToe.this)
        //.setIconAttribute(android.R.attr.alertDialogIcon)
        .setTitle(getTitleText())
        .setView(textEntryView)
        .setPositiveButton("JOIN GAME", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {
                try
                {
                    EditText et = (EditText)findViewById(R.id.username_edit);
                        playerName = et.getText().toString();
                }
                catch (Exception e)
                {
                }
            }
        })
        .create();
return null; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-15T14:28:58.983

就我而言：首先我必须调用

> 对话框.show(),

只有在它之后我才能使用

> dialog.findviewById(R.id.myID)。

如果我错过了调用 show()，那么我会通过 findViewByID 得到一个空值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-25T14:10:53.207

清理和重建项目为我修复了此错误（在 Xamarin 上）。

# ruby - Bundler 找不到依赖项 url

> ID：13026142
> 
> 赞同：0
> 
> 时间：2012-10-23T08:17:20.570
> 
> 标签：ruby, bundler

每当我做任何涉及内置捆绑器执行的事情时，我总是会收到这个错误。

```
Error Bundler::HTTPError during request to dependency API
Fetching full source index from http://rubygems.org/ 
```

我不知道从哪里开始寻找？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:31:49.693

依赖项 API 当前已关闭

[http://status.rubygems.org/](http://status.rubygems.org/)

# css - 在滚动条顶部覆盖内容的预期浏览器行为是什么？

> ID：13026143
> 
> 赞同：0
> 
> 时间：2012-10-23T08:17:24.087
> 
> 标签：css, browser, scrollbar, z-index, blogger

Blogger 有这个我看到很多人都在使用的新奇特主题，但在我看来，它有一个明显的 CSS 错误，因为链接小工具与滚动条重叠。你是否也看到了这个问题？

![滚动条被重叠](../Images/a6cc114438a61462701b82c2619d15ff.png)

小工具 div 的 CSS 设置为 right:0px 和 z-index:3000，这会导致它与 Chrome for Windows 上的滚动条重叠。我认为浏览器首先不应该允许滚动条重叠？如果他们允许这样做，那不还是谷歌的可用性错误吗？

更新：这是一个博客链接：[http](http://www.judegomila.com/2012/10/how-to-name-your-company.html) ://www.judeomila.com/2012/10/how-to-name-your-company.html 这是相同的主题，但没有这个问题：[http://googleblog.blogspot.jp/](http://googleblog.blogspot.jp/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:39:08.780

您已在第1648 行中将其 设置`overflow-y`为删除`<div class="viewitem-inner">`

并尝试

```
html {
    height: 100%;
    overflow: scroll;

} 
```

也`position:fixed;`从`<div class="viewitem-panel">`第 1589 行中删除

在职的

![在此处输入图像描述](../Images/d83c1fccaee9434e051e05cbe8ce5b20.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:36:58.577

我会说这是 Blogger 主题中的可用性错误。滚动条始终属于某个元素，并且元素可以与其他元素重叠——因此滚动条可能会被隐藏。

# jquery - 检测掉落事件

> ID：13026144
> 
> 赞同：1
> 
> 时间：2012-10-23T08:17:31.710
> 
> 标签：jquery

我目前正在做一个项目。有两个按钮绑定到两个 div。按下按钮 1 时显示 #draggableDiv 1，如果按下按钮 2 则显示 #draggableDiv2。然后可以将它们拖到#droppableDiv。我希望能够识别出哪个 div 已被删除。

```
if("#draggableDiv1" == dropped)
    {
      Run this code;
}else{
      Run this code; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:26:32.010

确保在可放置选项中传递事件和 ui 参数，如下所示：

```
drop: function( event, ui ) { 
```

然后在你的 drop 函数中，你可以像这样检测它：

```
var dropped = ui.draggable.attr('id');
if ("draggableDiv1" == dropped)
etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:27:18.793

也许你需要看看 jQuery UI Draggrable

[http://jqueryui.com/draggable/](http://jqueryui.com/draggable/)特别是在[http://jqueryui.com/droppable/#shopping-cart](http://jqueryui.com/droppable/#shopping-cart)

# java - Play 2.1-Snapshot：Ebean 数据库更新和删除在 Junit 测试用例中不起作用

> ID：13026147
> 
> 赞同：1
> 
> 时间：2012-10-23T08:17:50.213
> 
> 标签：java, orm, playframework, junit4, ebean

我有一个奇怪的问题。我正在使用带有 ebeans (=> mysql) 的 play 2.1-SNAPSHOT。我有一个非常小的（测试）设置，由于某种原因，数据库更新和删除不起作用。项目是在数据库中创建的......但更新它们不起作用。

这是我的 bean（它扩展了一个添加时间戳（创建和修改日期）的超类）：

AbstractTimestamp（超类）：

```
@MappedSuperclass
public abstract class AbstractTimestampedBean extends AbstractIdentifiableBean {
    /** The date this item has been created. */
    @CreatedTimestamp
    public Timestamp createdTime;
} 
```

Project Bean（删除了不重要的东西） - hashCode 和 equals 已由 eclipse 创建 - 这里我们覆盖 play.db.ebean.Model 的方法：

```
@Entity
@Table(name = "Projects")
public class Project extends AbstractTimestampedBean {

    private static final long serialVersionUID = -6160140283947231026L;

    @NotNull
    public String title;

    @NotNull
    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
    public User owner;

    @NotNull
    @ManyToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
    public User creator;

    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
    public Set<User> participants;

    @EnumMapping(nameValuePairs = "ACTIVE=A,INACTIVE=I,EXPIRED=E")
    public enum Status {
        ACTIVE, INACTIVE, EXPIRED
    }

    public Project() {
    }

    public Project(final String title, final User creator) {
        this.title = title;
        this.creator = creator;
        this.owner = creator;
    }

    /*
     * (non-Javadoc)
     * 
     * @see play.db.ebean.Model#hashCode()
     */
    @Override
    public int hashCode() {
        final int prime = 31;
        int result = super.hashCode();
        result = prime * result
                        + (this.creator == null ? 0 : this.creator.hashCode());
        result = prime * result
                        + (this.owner == null ? 0 : this.owner.hashCode());
        result = prime * result
                        + (this.participants == null ? 0 : this.participants
                                        .hashCode());
        result = prime * result
                        + (this.title == null ? 0 : this.title.hashCode());
        return result;
    }

    /*
     * (non-Javadoc)
     * 
     * @see play.db.ebean.Model#equals(java.lang.Object)
     */
    @Override
    public boolean equals(final Object obj) {
        if (this == obj) {
            return true;
        }
        if (this.getClass() != obj.getClass()) {
            return false;
        }
        final Project other = (Project) obj;
        if (this.creator == null) {
            if (other.creator != null) {
                return false;
            }
        } else if (!this.creator.equals(other.creator)) {
            return false;
        }
        if (this.owner == null) {
            if (other.owner != null) {
                return false;
            }
        } else if (!this.owner.equals(other.owner)) {
            return false;
        }
        if (this.participants == null) {
            if (other.participants != null) {
                return false;
            }
        } else if (!this.participants.equals(other.participants)) {
            return false;
        }
        if (this.title == null) {
            if (other.title != null) {
                return false;
            }
        } else if (!this.title.equals(other.title)) {
            return false;
        }
        return true;
    } 
```

这是一个非常简单的测试用例：

第一次运行创建一个项目 - 检查它是否存在（这里没有失败）

然后我们更新一些东西 - 存储它 - 并再次断言......在这里我可以看到数据库条目尚未更新。

[http://pastebin.com/7zdzWGXw](http://pastebin.com/7zdzWGXw)

这是我们在这里使用的超类：

```
public abstract class AbstractPersistableTestCase {
    @Transactional
    void saveBean(final Model bean) {
        Ebean.save(bean);
    }

    @Transactional
    void deleteBean(final Model bean) {
        Ebean.delete(bean);
    }

    @Transactional
    <T extends Model> void deleteBeans(final List<T> beans) {
        Ebean.delete(beans);
    }
} 
```

来自 jUnit4 的错误消息：

这是更新案例中标题的断言=>请参阅：db条目尚未更新：

```
[error] Test test.models.ProjectTest.createAndUpdateProject failed: expected:<'Project_[NEW_]1350681993608'> but was:<Project_[]1350681993608'> 
```

当我尝试删除项目时会发生这种情况：

```
[error] Test test.models.ProjectTest.deleteProjects failed: Data has changed. updated [0] rows sql[delete from user where id=? and name is null and email is null and created_time is null] bind[null] 
```

你们知道为什么会这样吗？我在这里真的很沮丧...

问候，

萨沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T11:28:21.370

在我看来，您没有在课程中添加 Id。

尝试将此添加到您的超类：

```
@MappedSuperclass
public abstract class AbstractModel extends play.db.ebean.Model
{
    @Id
    public Long id;

    public Long getId()
    {
        return id;
    }

    // ... here your other attributes
} 
```

# json - 为什么在处理 JSON 数据时应该使用 JavaScriptObject 覆盖类而不是原生 Java 类？

> ID：13026151
> 
> 赞同：0
> 
> 时间：2012-10-23T08:18:07.857
> 
> 标签：json, gwt, javascript-objects

在我的 GWT 项目中，我需要处理通过 PHP 从数据库中检索到的 json 数据。我已经看到了使用 JavaScriptObject 覆盖类的 Google 示例。我不明白为什么这似乎是处理 json 数据的首选方法。为什么我不应该使用所有本机 Java 代码来提取数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:34:38.790

反过来想一想：使用 POJO 意味着什么？（或您命名*的本机 Java 类）*

你必须：

1.  将 JSON 解析为一些 Java 可访问的结构（例如`com.google.gwt.json.client.JSONObject`，或`elemental.json.JsonObject`）
2.  创建 POJO
3.  用解析后的 JSON 结构中的数据填充 POJO
4.  现在您可以*忘记*第 1 步中解析的 JSON 结构

另一方面，`JavaScriptObject`您使用`JsonUtil.safeEval`和 TA-DA！您可以将 JSON 解析为类型化的 Java 对象！

现在，为了处理 JSON，还有[AutoBeans](http://code.google.com/p/google-web-toolkit/wiki/AutoBean)。

选择你的毒药。

# wordpress - 作为 wp_list_pages 项的子项发布

> ID：13026152
> 
> 赞同：0
> 
> 时间：2012-10-23T08:18:09.200
> 
> 标签：wordpress, wordpress-theming

我有一个看起来像这样的垂直菜单

```
HOME
NEWS
ANOTHER PAGE
- SUB PAGE
- SUB PAGE 
```

它是通过 wp_list_pages 检索的。NEWS 在 WP 后端设置为我的帖子页面。

我想要实现的是让 3 个最新帖子的标题显示为 NEWS 的子菜单，如下所示：

```
HOME
NEWS
- POST 3
- POST 2
- POST 1
ANOTHER PAGE
- SUB PAGE
- SUB PAGE 
```

是否有某种 add_filter/function 甚至插件来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:36:34.807

该问题看起来好像您正在尝试将页面对象用作相应帖子的一种“外壳”。这可能是 Wordpress 开发人员在开发自己的主题或使用现有代码时会发现的第一个陷阱。

简而言之，如果您还尝试列出 Post 对象，则不应使用 wp_list_pages。它变得一团糟，而且您实际上是在规避 Wordpress 提供的现有方法来完全满足您的需求。

您要做的是查看内置[导航菜单](http://codex.wordpress.org/Appearance_Menus_Screen)以构建更灵活的菜单。如果您使用的是下载的主题，那么几乎可以肯定它会受到支持。否则，您需要查看[注册导航菜单](http://codex.wordpress.org/Navigation_Menus)以使您的主题“感知菜单”。

这将使您能够做的是构建一个灵活的菜单，该菜单不仅支持页面，还支持直观 UI 中的类别和单个帖子。我建议完全删除名为“新闻”的页面对象，而是将“新闻类别”按您喜欢的顺序放在所有页面对象旁边的菜单中。

至于以子菜单的形式查询导航菜单中最近的三个帖子，这对于纯代码来说会稍微复杂一些。

我的建议是先研究这个选项。构建一个工作的——尽管是静态的——原型来感受菜单界面。如果您正在编写自己的主题，请将您的 wp_list_pages 调用完全替换为[wp_nav_menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)。

一旦你开始工作，打开一个新问题，看看如何编写你自己的[Nav Menu Walker](https://wordpress.stackexchange.com/questions/14037/menu-items-description-custom-walker-for-wp-nav-menu/14039#14039)以使所有内容都按你想要的方式显示。

通过采用这种方法，您将确保您的主题始终按照您的意愿自动运行，而不必经常进行修补。

让我知道这是否有帮助。

# javascript - 无法获取属性“2”的值：对象为空或未定义

> ID：13026154
> 
> 赞同：0
> 
> 时间：2012-10-23T08:18:10.703
> 
> 标签：javascript, asp.net-mvc-3

当我尝试将（非重复的）选定内容从一个列表框复制到另一个列表框时，我遇到了一些问题。我不断收到“无法获取属性值：对象为空或未定义”异常。

以下是我的代码

```
function CopyItem(from, to) {
    var src = document.getElementById(from);
    var dest = document.getElementById(to);

    for (var i = 0; i < src.options.length; i++) {
        if (src.options[i].selected) {
            var found = false;

            for (var j = 0; j < dest.options.length; j++) {
                if (dest.options[j].value == src.option[i].value) {
                    found = true;
                    break;
                }
            }

            if (!found) {
                var newOption = document.createElement("option");
                newOption.text = src.options[i].text;
                newOption.value = src.options[i].value;
                dest.options[dest.options.length] = newOption;
            }
        }
    }
}

@Html.ListBox("lvDataList", Model.DataList, new { id = "SelectionList", Multiple = "multiple", Size = 15, style = "width: 100%;" })
@Html.ListBoxFor(x => x.SelectedData, Model.SelectedDataList, new { id = "SelectedList", Multiple = "multiple", Size = 15, style = "width: 100%;" })
<input type="button" id="btnAdd" title="Add Selected Events" onclick="CopyItem('SelectionList', 'SelectedList', true)" /> 
```

有人可以解释我在哪里编码错误吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:21:31.383

我想你应该有`src.options`而不是`src.option`排队

```
 if (dest.options[j].value == src.option[i].value) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:23:18.077

尝试`if (dest.options[j].value == src.options[i].value)`

反而`if (dest.options[j].value == src.option[i].value)`

# .net - 如何手动序列化对象使用 wcf 显示名称属性？

> ID：13026155
> 
> 赞同：0
> 
> 时间：2012-10-23T08:18:11.387
> 
> 标签：.net, xml, wcf

我的 WCF web 服务必须返回 xml 文件以供下载，对于该功能，我需要序列化一个类的对象列表。这里的类定义：

```
[DataContract]
    public class ReportItemDriversPerAffiliate : IReportItemDriversPerAffiliate
    {
        [DataMember(Name = "affiliate_name")]
        public string AffiliateName { get; set; }

        [DataMember(Name = "affiliate_city")]
        public string AffiliateCity { get; set; }

        [DataMember(Name = "affiliate_state")]
        public string AffiliateState { get; set; }

        [DataMember(Name = "drivers_count")]
        public int DriversCount { get; set; }
    } 
```

对于此功能，我使用以下代码：

```
var totalDriversPerAffiliate = _glManager.GetTotalDriversPerAffiliate<ReportItemDriversPerAffiliate>();

            XmlSerializer ser = new XmlSerializer(totalDriversPerAffiliate.GetType());

            MemoryStream ms = new MemoryStream();
            ser.Serialize(ms, totalDriversPerAffiliate);
            ms.Position = 0;

            StreamReader r = new StreamReader(ms);
            string res = r.ReadToEnd();

            var context = System.ServiceModel.Web.WebOperationContext.Current.OutgoingResponse;
            context.Headers.Add("Content-Disposition", "attachment; filename=TotalDriversPerAffiliate.xml");
            context.ContentType = "application/txt";

            byte[] resultBytes = Encoding.UTF8.GetBytes(res);
            return new MemoryStream(resultBytes); 
```

但是，在响应文件中，我在 xml 中有字段值，这些字段具有类属性的值，而不是 WCF 显示名称属性的值（具有“AffiliateName”，想要“affiliate_name”），我如何手动序列化此类并在 xml 中具有像显示这样的字段类的名称属性？而且，我不想向此类添加额外的 xml 属性，也不想在 Web 服务中创建单独的方法，该方法将此数据作为 xml 响应返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:51:33.993

XmlSerializer 忽略 DataMember 属性。试试 NetDataContractSerializer。

# java - 寻找 libconfig java 包装器

> ID：13026157
> 
> 赞同：2
> 
> 时间：2012-10-23T08:18:31.530
> 
> 标签：java, c++, wrapper, libconfig

目前我正在开发一个 java webapplication 开发，它需要我解析这个 libconfig 文件[http://www.hyperrealm.com/libconfig/](http://www.hyperrealm.com/libconfig/)。

但是我在 Java 中找不到任何兼容的库来解析 libconfig 文件。

任何想法？最坏的情况必须为它编写我自己的包装器？

# azure - 下载 Azure 的 publishsettings 文件时“您已达到 10 个管理证书的配额”

> ID：13026158
> 
> 赞同：1
> 
> 时间：2012-10-23T08:18:34.677
> 
> 标签：azure, publish

当我收到该错误消息时，我正在尝试从 Azure 的门户（位于[https://windows.azure.com/download/publishprofile.aspx ）下载 .publishsettings 文件。](https://windows.azure.com/download/publishprofile.aspx)是的，我确实有 10 个管理证书（我也有 2 个手）。但是，目前尚不清楚拥有 10 个证书与无法下载发布设置之间的联系是什么。为什么前者要阻止后者，我怎样才能在不从 Azure 订阅中删除其他证书的情况下仍然获得 .publishsettings？

我需要它来将文件提供给 VS2012（发布）以及 WebMatrix（再次发布）以及 Azure Powershell 工具（再次发布）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:56:42.223

实际原因是“Download Publish settings”这个动作每次都默默地创建新证书，并没有真正看证书是否已经存在并且可以重复使用。

所以，按照 Sandrino 的建议做 - 重用发布设置文件，或删除证书。

或者，最好的方法是手动管理您的发布设置！我这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:37:33.467

当您选择下载发布配置文件时，它将为您**创建一个新的管理证书**。如果您查看 .publishsettings 文件，您会看到管理证书包含在文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<PublishData>
  <PublishProfile
    PublishMethod="AzureServiceManagementAPI"
    Url="https://management.core.windows.net/"
    ManagementCertificate="AAAABAIBAzC...">
    <Subscription
      Id="XXXXXXXXXXXXXXXX"
      Name="Sandrino" />
  </PublishProfile>
</PublishData> 
```

为了生成新的发布配置文件，您需要删除现有的管理证书（在新门户中，这可以在**Settings**下进行）。

如果您不想删除现有证书，您可以简单地重复使用之前下载的发布配置文件。如果您下载过一次，您可以继续重复使用该发布配置文件，直到证书过期（1 年）。

# function - Postgresql 9.2 触发器以分隔存储字符串中的子字段

> ID：13026159
> 
> 赞同：1
> 
> 时间：2012-10-23T08:18:43.633
> 
> 标签：function, postgresql, triggers

Postgresql 9.2 DB，自动从各种机器收集数据。DB 存储所有数据，包括机器 ID、固件、制造商 ID 等以及实际结果数据。在一个存储字段 ( `varchar`) 中有 5 个子字段，由 ^ 字符分隔。

```
ACT18!!!8246-EN-2.00013151!1^7.00^F5260046959^H1P1O1R1C1Q1L1^1 (Machine 1) 
```

这些数据的顺序似乎因一台机器而异。例如机器 1 2 和 3。上面的字符串显示固件版本，在本例中为“7.0”，它出现在子字段 2 中。但是，另一台机器在不同的子字段中发送数据 - 在本例中为子字段3，值为“1”

```
BACT/ALERT^A.00^1^^ (Machine 2) 
```

我想使用 CREATE TRIGGER t_machine_id AFTER INSERT 函数将值“7.0”和“1”存储在单独表中的不同字段中，我可以根据数据来自的机器选择使用哪个子字段。

这样做是`split_part`最好的功能吗？任何人都可以提供一个示例代码来做到这一点吗？我在文档中找不到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:36:07.733

您需要 (a) 使用类似[`regexp_split_to_table`](http://www.postgresql.org/docs/current/static/functions-string.html)then (b) 使用某些标准匹配哪些部分来拆分数据，因为您没有可以依赖的字段位置顺序。目前我没有看到任何可靠的规则来决定固件版本和机器号是什么；你真的不能说`where field <> machine_number`，因为如果机器 1 有固件版本`1`，你就不会得到任何结果。

给定虚拟数据：

```
CREATE TABLE machine_info(data text, machine_no integer);
INSERT INTO machine_info(data,machine_no) (VALUES
  ('ACT18!!!8246-EN-2.00013151!1^7.00^F5260046959^H1P1O1R1C1Q1L1^1',1),
  ('BACT/ALERT^A.00^1^^',2)
); 
```

就像是：

```
SELECT machine_no, regexp_split_to_table(data,'\^') 
FROM machine_info; 
```

将为您提供带有机器编号的拆分数据元素表，但随后您需要确定哪些字段是哪些：

```
 machine_no |    regexp_split_to_table     
------------+------------------------------
          1 | ACT18!!!8246-EN-2.00013151!1
          1 | 7.00
          1 | F5260046959
          1 | H1P1O1R1C1Q1L1
          1 | 1
          2 | BACT/ALERT
          2 | A.00
          2 | 1
          2 | 
          2 | 
(10 rows) 
```

您可能会发现替换的输出`regexp_split_to_array`更有用，这取决于您是否可以从字段顺序中获得任何有用的信息以及您打算如何处理数据。

```
regress=# SELECT machine_no, regexp_split_to_array(data,'\^') 
          FROM machine_info;
 machine_no |                      regexp_split_to_array                       
------------+------------------------------------------------------------------
          1 | {ACT18!!!8246-EN-2.00013151!1,7.00,F5260046959,H1P1O1R1C1Q1L1,1}
          2 | {BACT/ALERT,A.00,1,"",""}
(2 rows) 
```

假设有两个固件版本；版本 1 发送`code^blah^fwvers^^`，版本 2 及更高版本发送`code^fwvers^blah^blah2^machineno`。然后您可以区分两者，因为您知道版本 1 将最后两个字段留空：

```
SELECT
  machine_no,
  CASE WHEN info_arr[4:5] = ARRAY['',''] THEN info_arr[3] ELSE info_arr[2] END AS fw_vers
FROM (
  SELECT machine_no, regexp_split_to_array(data,'\^')
  FROM machine_info
) string_parts(machine_no, info_arr); 
```

结果：

```
 machine_no | fw_vers 
------------+---------
          1 | 7.00
          2 | 1
(2 rows) 
```

当然，您只提供了两个样本数据，因此真正的匹配规则可能更复杂。考虑编写一个 SQL 函数来提取所需的字段并从传递的数组中返回它们。

# java - java.text.ParseException：无法解析的日期：“2012 年 1 月 11 日星期三 00:00:00 CET”

> ID：13026162
> 
> 赞同：1
> 
> 时间：2012-10-23T08:18:51.433
> 
> 标签：java, date, simpledateformat

我有这个日期的下一个问题：

```
java.text.ParseException: Unparseable date: "Wed Jan 11 00:00:00 CET 2012" 
```

我有这个：

```
 DateFormat formatter ; 
      Date dateIn=null;  
       formatter = new SimpleDateFormat( "EEE MMM dd HH:mm:ss yyyy" ); 
       try {
        dateIn = (Date)formatter.parse(dateI);
    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

我在做什么坏事？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T08:47:02.150

使用时区和语言环境

```
SimpleDateFormat( "EEE MMM dd HH:mm:ss z yyyy", Locale.US); 
```

在输入字符串（日期和月份名称）中反映英语。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T08:21:46.877

您需要添加`z`格式字符串以包含时区。尝试这个：

`SimpleDateFormat( "EEE MMM dd HH:mm:ss z yyyy" );`

# c# - 上传后如何重命名文件

> ID：13026170
> 
> 赞同：2
> 
> 时间：2012-10-23T08:19:30.247
> 
> 标签：c#, file-upload, ftp

我必须在服务器上使用 Ftp 协议上传文件，并在上传后重命名上传的文件。

可以上传，但是不知道怎么改名。

代码如下所示：

```
FtpWebRequest requestFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://" + ftpServer + "/" + "httpdocs/webroot/" + destination + "/" + fileName));
requestFTP.Proxy = null;

requestFTP.Credentials = new NetworkCredential(ftpUser, ftpPassword);
requestFTP.Method = WebRequestMethods.Ftp.UploadFile;
FileStream fStream = fileInfo.OpenRead();
int bufferLength = 2048;
byte[] buffer = new byte[bufferLength];
Stream uploadStream = requestFTP.GetRequestStream();
int contentLength = fStream.Read(buffer, 0, bufferLength);
while (contentLength != 0)
{
  uploadStream.Write(buffer, 0, contentLength);
  contentLength = fStream.Read(buffer, 0, bufferLength);
}
uploadStream.Close();
fStream.Close();

requestFTP = null;

string newFilename = fileName.Replace(".ftp", "");
requestFTP.Method = WebRequestMethods.Ftp.Rename; // this like makes a problem
requestFTP.RenameTo(newFilename); 
```

我得到的错误是

> 错误 2 不可调用的成员 'System.Net.FtpWebRequest.RenameTo' 不能像方法一样使用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T08:25:39.993

RenameTo 是一个属性，而不是一个方法。您的代码应为：

```
// requestFTP has been set to null in the previous line
requestFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://" + ftpServer + "/" + "httpdocs/webroot/" + destination + "/" + fileName));
requestFTP.Proxy = null;
requestFTP.Credentials = new NetworkCredential(ftpUser, ftpPassword);

string newFilename = fileName.Replace(".ftp", "");
requestFTP.Method = WebRequestMethods.Ftp.Rename;
requestFTP.RenameTo = newFilename;
requestFTP.GetResponse(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T08:27:27.060

为什么不直接用正确的文件名上传呢？用您真正想要的文件名更改您的第一行。

```
FtpWebRequest requestFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://" + ftpServer + "/" + "httpdocs/webroot/" + destination + "/" + newFileName)); 
```

但是请从您的旧文件名打开阅读流。

# google-drive-api - Google Documents List API 3.0 版 - 如何按文件名对文件进行排序

> ID：13026174
> 
> 赞同：2
> 
> 时间：2012-10-23T08:20:00.493
> 
> 标签：google-drive-api

我已成功获取带有 url 的文件列表

> [https://docs.google.com/feeds/default/private/full/folder:root/contents?v=3](https://docs.google.com/feeds/default/private/full/folder:root/contents?v=3)

但是文件列表是按更新时间顺序排列的。

如何按文件名排序。

在 Google Documents List API version 2.0 中，`[orderby=title]`可以做到。

在 3.0 版本中，此参数不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:35:24.243

它`orderBy`不是`orderby`。参考答案：[Google Drive Api not return results by descending order of number of occurrences of word](https://stackoverflow.com/questions/10529474/google-drive-api-not-returning-results-by-descending-order-of-number-of-occurren)

# javascript - HTML5画布绘制带有旋转的图像部分

> ID：13026178
> 
> 赞同：2
> 
> 时间：2012-10-23T08:20:15.783
> 
> 标签：javascript, html, canvas, drawing

我正忙于为我的 HTML5 游戏编写 Texture Atlas 类，但是在绘制带有旋转的图像的一部分时遇到了麻烦。

例如：从 spritesheet 中提取一个足球并旋转绘制它。

我已经设置了以下小提琴，我在其中绘制了一个旋转的图像，然后是图像的一部分，我只是不知道如何同时做这两个：/

[http://jsfiddle.net/9ztnF/10/](http://jsfiddle.net/9ztnF/10/)

我需要帮助的代码部分如下：

```
targetX = 450;
targetY = 35;
context.save();
context.translate(targetX, targetY);
context.translate(halfWidth, halfHeight);
context.rotate(60 * TO_RADIANS);

// Help needed HERE!!!!! 

// draws full image rotated at half height
// context.drawImage(logoImage, -halfWidth, -halfHeight, halfWidth, halfHeight);

// draws nothing that is visible
//context.drawImage(logoImage, -halfWidth, -halfHeight, halfWidth, halfHeight, targetX, targetY, halfWidth, halfHeight);

context.restore(); 
```

任何帮助将不胜感激！！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:30:29.683

绘制图像的一部分不会影响旋转。只需使用源位置/比例和目标位置/比例属性绘制旋转图像：

```
//
// Draw rotated image
//
targetX = 50;
targetY = 35;
context.save();
context.translate(targetX, targetY); // move the origin to 50, 35
context.translate(halfWidth, halfHeight); // move across and down half the width and height of the image
context.rotate(60 * TO_RADIANS); // rotate around this point
context.drawImage(logoImage, halfWidth, halfHeight, halfWidth, halfHeight, 0, 0, halfWidth, halfHeight); // then draw the image back and up
context.restore(); 
```

# objective-c - 如何防止滑块在边缘附近变“坏”

> ID：13026180
> 
> 赞同：2
> 
> 时间：2012-10-23T08:20:21.390
> 
> 标签：objective-c, uislider, xcode4.5

我为我的滑块提供了滑块图形。

这是结果： ![在此处输入图像描述](../Images/d631342b0d470981e9e22a99ccd43aec.png)

然后在右边 ![在此处输入图像描述](../Images/1ea78646dc2d6cee063bafd01488031d.png)

所以你看，边缘变成了一个“盒子”而不是圆形。我真正想要的是与苹果提供的更接近的东西。这是我用来在使用自定义滑块图像和 nil 之间来回切换的代码：

```
- (IBAction)groupPinButton:(id)sender {
    self.groupPinButton.selected = ! self.groupPinButton.selected;
    UIImage *minImage = [[UIImage imageNamed:@"minimum_slider.png"]resizableImageWithCapInsets2:UIEdgeInsetsMake(0, 5, 0, 0)];
    UIImage *maxImage = [[UIImage imageNamed:@"maximum_slider.png"]resizableImageWithCapInsets2:UIEdgeInsetsMake(0, 0, 0, 5)];
    if (self.groupPinButton.selected)
    {

        [self.distanceSlider setMaximumTrackImage:maxImage forState:UIControlStateNormal];
        [self.distanceSlider setMinimumTrackImage:minImage forState:UIControlStateNormal];
    }
    else{

        [self.distanceSlider setMaximumTrackImage:nil forState:UIControlStateNormal];
        [self.distanceSlider setMinimumTrackImage:nil forState:UIControlStateNormal];
    }
} 
```

如果我将 maximumTrackImage 设置为 nil，这是屏幕截图：

![在此处输入图像描述](../Images/ff82deefb55f1947a8c380afe25814d3.png) ![在此处输入图像描述](../Images/2fafbc38e99c894327958d8f20c870f5.png)

哪个看起来好多了。但我想定制。

我用于 minimum_slider.png 和 maximum_slider.png 的图片如下：

![在此处输入图像描述](../Images/97587b39eb90c8009e957b3abc028c4d.png) ![在此处输入图像描述](../Images/0859eadb4e1234cd9680acbeec148f57.png)

你可以到达那里

[http://i.stack.imgur.com/n30aw.png](https://i.stack.imgur.com/n30aw.png)

和

[http://i.stack.imgur.com/sF9SQ.png](https://i.stack.imgur.com/sF9SQ.png)

请注意，另一边很好。因此，当滑块位于除最大值和最小值之外的任何位置时，一切正常。如果滑块处于最大值，那么最右边的角落就会被弄乱。最左边的角落很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:17:17.170

啊! 我遇到了同样的问题。当您到达程序结束时，滑块处于最大值时，整个轨道图像现在位于左侧，在您的示例中为“minimum_slider.png”。因此，“maximum_slider”图像的任何部分都没有显示（这会给你圆形的右边缘），只有“minimum_slider”的方形右侧。

我怀疑答案是让你的两个图像的两端都是圆形的，并在图形中间制作可扩展部分（边缘插图）。

我还没有这样做，因为我仍然对 UIEdgeInsets 的工作方式感到困惑（我发现文档很糟糕！）而且默认轨道现在对我来说已经足够了。所以，当你解决这个问题时，让我们都知道。

# objective-c - @end 在 c-objective 中

> ID：13026182
> 
> 赞同：0
> 
> 时间：2012-10-23T08:20:25.153
> 
> 标签：objective-c, xcode

好吧，这可能是一个愚蠢的错误。但我无法弄清楚 xcode 想要从我这里得到什么。

所以这里是头文件

```
#import <Foundation/Foundation.h>
#import "TableViewController.h"

@end
@interface Settings : NSObject

- (id)init: (TableViewController*) TableControll;

@end 
```

如果接口之前没有@end，则表示预期标识符或（，并建议在此处添加@end。如果有@end，则表示end 必须出现在objective-c 上下文中。

想法？

```
#import <UIKit/UIKit.h>
#import <MessageUI/MessageUI.h>
#import <MessageUI/MFMessageComposeViewController.h>

@interface TableViewController :     UIViewController<UITableViewDataSource,UITableViewDelegate,MFMessageComposeViewControllerDelegate>
{
    ControllerType controllerType;
}

@property (retain, nonatomic) IBOutlet UITableView *tableView;
@property (retain, nonatomic) NSArray *dataArray;
@property (retain, nonatomic) NSArray *imageArray;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil andType:(ControllerType)type;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:27:34.617

您的文件中有声明`@end`之前。`@interface``Settings.h`

它应该是：

```
#import <Foundation/Foundation.h>
#import "TableViewController.h"

@interface Settings : NSObject

- (id)init: (TableViewController*) TableControll;

@end 
```

此外，您还没有在您的文件中包含for`#import`指令，这可能就是您在文件中出现模糊错误的原因。`ControllerType``TableViewController.h``Settings.h`

# mysql - 当一个表的索引多于一个时，Mysql索引如何处理？

> ID：13026188
> 
> 赞同：0
> 
> 时间：2012-10-23T08:20:53.650
> 
> 标签：mysql, performance, indexing

样品表

1.  字段 0：否（PK）
2.  字段 1：标题
3.  字段 2：描述
4.  字段 3：类别 1（索引）
5.  字段 4：类别 2（索引）
6.  字段 5：类别 3（索引）
7.  字段 6：类别 4（索引）
8.  字段 7：类别 5（索引）

以上是我将在我的网站上使用的示例，每个类别字段都有一个索引。

如果我像下面这样执行这个命令

```
select * from table where category1=1 and category2=2 and category3=3 and category4=4 and category5=5 
```

比较一个表只有一个类别字段，该表有很多类别，如上表。哪一个更好？

我想当然，只有一个类别字段的表是不错的选择。但我真的不知道关于指数计算过程的深入信息。我必须向我的老板解释他们之间的不同之处！！！！

所以我想用“样本”获取一些信息，包括指数成本、样本数据、计算过程或其他有助于了解指数计算过程的信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:16:54.957

正如 mvp 之前已经写过的，使用[EXPLAIN](http://dev.mysql.com/doc/refman/5.0/en/explain.html)语法来查看查询优化器将如何处理您的查询。一般来说，mysql 对您访问的每个表使用一个索引来获取您要查找的数据。优化器还尝试找到具有最高选择性的一个，以防可能存在多个索引。

例如，您可能有像您这样的查询：

```
SELECT * FROM table WHERE category1=1 AND category2=2 AND category3=3 AND category4=4 AND category5=5 
```

可以使用包含 category1、category2、category3、category4 和 category5 的组合索引，也可以使用仅包含 category1 和 category2 的组合索引。优化器将在运行时决定采用哪一个。

另一个常见的例子是：

```
SELECT * FROM table WHERE category1=1 OR category2=2 
```

查询优化器只能对 category1 或 category2 使用索引，但不能同时使用两者！至少这是 mysql EXPLAIN 返回的。其他数据库可能会同时运行这两个选择，并简单地连接两个结果并删除重复项。

在开始添加大量索引之前，请记住它们产生的开销。如果您的读取访问权限多于写入访问权限，则可能会成功。但是如果您还有很多插入或更新操作，则每次都需要调整索引，这会导致额外的负载并增加查询执行时间。

对于您的跟进，我推荐这个 Mysql 章节[MySQL 如何使用索引](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:40:56.130

一般来说，如果您有多个 WHERE 约束的查询，最好的索引是包含所有受约束字段的复合索引 - 在您的情况下，它将是索引`(category1, category2, category3, category4, category5)`

然而，在实践中，拥有如此多的复合索引真的很浪费。此外，索引仅在具有高选择性时才有用。例如，如果您的字段可能具有相等概率的值 0 或 1（选择性 1/2），则几乎总是不值得在此类字段上创建索引，甚至不值得将该字段包含在复合索引中。

无论如何，请始终尝试运行 EXPLAIN ANALYZE 以了解查询规划器在想什么以及它将选择哪个索引。如果您有顺序扫描，可能有理由担心，但并非总是如此（例如，对于计划者来说，使用低选择性索引可能不值得）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:48:55.177

***您可以使用EXPLAIN EXTENDED query-phrase***分析执行引擎将执行的操作。最好的情况是 MySQL 将使用索引合并。这意味着它将通过自己的索引选择每个选项，然后在没有任何索引帮助的情况下合并结果集。通常，复合索引要快得多，但这可能取决于记录的数量和使用场景（记录的高或低周转率）。

# java - Java 中的 Comparable 和 Comparator 接口

> ID：13026189
> 
> 赞同：4
> 
> 时间：2012-10-23T08:20:59.183
> 
> 标签：java, generics, comparator, comparable

我想编写一个通用的 Pair 类，它有两个成员：键和值。该类的唯一要求是键和值都应实现 Comparable 接口，否则 Pair 类将不接受它们作为类型参数。
首先我这样编码：

```
public class Pair<T1 extends Comparable, T2 extends Comparable> 
```

但是 JDK 1.6 编译器会对此产生警告：

```
Comparable is a raw type. References to generic type Comparable<T> should be parameterized 
```

然后我尝试添加类型参数，现在代码如下所示：

```
public class Pair<T1 extends Comparable<? extends Object>,
                  T2 extends Comparable<? extends Object>> 
```

现在一切顺利，直到我尝试为 Pair 生成一个比较器。（以下代码在 Pair 类中）

```
public final Comparator<Pair<T1, T2>> KEY_COMPARATOR = new Comparator<Pair<T1, T2>>() {
        public int compare(Pair<T1, T2> first, Pair<T1, T2> second) {
            *first.getKey().compareTo(second.getKey());*
            return 0;
        }
    }; 
```

该代码`first.getKey().compareTo(second.getKey());`将生成一条错误消息：

```
The method compareTo(capture#1-of ? extends Object) in the type Comparable<capture#1-of ? extends Object> is not applicable for the  arguments (T1) 
```

有谁知道这个错误信息是什么意思？
欢迎提供有关此主题的任何提示。

**更新：**
这是完整的代码：

```
public class Pair<T1 extends Comparable<? extends Object>, T2 extends Comparable<? extends Object>> {
    private T1 key;
    private T2 value;

    public static int ascending = 1;
    public final Comparator<Pair<T1, T2>> KEY_COMPARATOR = new Comparator<Pair<T1, T2>>() {
        public int compare(Pair<T1, T2> first, Pair<T1, T2> second) {
            int cmp = first.getKey().compareTo((T1)(second.getKey()));
            if (cmp > 0)  return ascending;
            return -ascending;
        }
    };
} 
```

@MarvinLabs您能否解释一下为什么编译器无法确保将对象与相同类型的其他对象进行比较。在上面的代码中，`second.getKey()`返回 T1 类型，它的类型与`first.getKey()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T08:22:00.720

我会这样声明我的班级：

```
public class Pair<T1 extends Comparable<T1>, T2 extends Comparable<T2>> 
```

这意味着对象可以与与其相同类型的对象进行比较（您的错误意味着编译器无法确保将对象与相同类型的其他对象进行比较）。

* * *

您的代码与我的编辑正确编译：

```
public class Pair<T1 extends Comparable<T1>, T2 extends Comparable<T2>> {
    private T1 key;
    private T2 value;

    public T1 getKey() {
        return key;
    }

    public T2 getValue() {
        return value;
    }

    public final Comparator<Pair<T1, T2>> KEY_COMPARATOR = new Comparator<Pair<T1, T2>>() {
        public int compare(Pair<T1, T2> first, Pair<T1, T2> second) {
            return first.getKey().compareTo(second.getKey());
        }
    };

    public static void test() {
        Pair<String, Integer> p1 = new Pair<String, Integer>();
        Pair<String, Integer> p2 = new Pair<String, Integer>();

        p1.KEY_COMPARATOR.compare(p1, p2);
    }
} 
```

但是，您应该为比较器创建一个单独的类（或静态最终类），以便使用起来更直观，并且也不会增加每个 Pair 实例的权重。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-23T08:37:27.273

让我们先来看看界面设计。

```
public interface Comparable<T> { 

   public int compareTo(T o);

} 
```

我们必须说这是非常典型的。因此，如果我们的类需要实现它，我们会这样做。

```
pubilc class ICanComparteWithMyself implements Comparable<ICanComparteWithMyself> { 

public int compareTo(ICanComparteWithMyselfo)    
   //code for compration
} 
```

当我们看到泛型参数类型时，确定我们将操作什么，所以对于泛型我们以相同的方式操作

```
public class ICanCompareMyGeneric<T> implements Comparable<T> {

   public int compareTo(T o)    
       //code for compration
    } 
} 
```

在您的情况下，我们希望它确保泛型参数实现是自己的 Comparable，因为我们需要这样做

```
public class MyGenericCanCompareToItself<T extends Comparable<T>> { 

} 
```

正如我们所看到的，这很常见。预期的（或没有的）限制是我们可以处理实现 Comparable 的类来为其自身类型。如果我们有

```
 public class ICanCompareStrings implements Comparable<String> {
      public int compareTo(String o)    
           //code for compration
      }
 } 
```

* * *

因此，对于`MyGenericCanCompareToItself`作为泛型参数的类，我们可以使用 class`public MyGenericCanCompareToItself`而不是`ICanCompareStrings`.

**编辑：**

因此，当我们现在介绍了基础知识时，我们可以去解决您的问题

您的课程描述如下所示

`public class Pair<T1 extends Comparable<? extends Object>, T2 extends Comparable<? extends Object>>`

这没有太多感觉，因为更不一样`<?>`

这个描述说：

> 我是一个 Pair 类，它使用两个通用参数，可以对我不知道的东西进行比较。

使用此代码，在泛型参数不知道之前您无法继续前进，然后在那里进行操作，最终得到类似的结果。

`first.getKey.compareTo(null);`

这就是为什么您在尝试强制转换时代码不编译的原因，预期类型为空。

* * *

要改变这一点，您需要确定您的泛型参数应该具有可比性。

例如可以在 selft 上进行比较

`public class Pair<T1 extends Comparable<T1>, T2 extends Comparable<T2>>`

这个描述说：

> 我是一个使用两个参数的 Pair 类，每个参数都可以与自身进行比较。

这就是您可能正在寻找的东西，另外它们可以在 T1 或 T2 的超类上进行比较

`public class Pair<T1 extends Comparable<? super T1>, T2 extends Comparable<? super T2>>`

这个描述说：

> 我是一个使用两个参数的 Pair 类，每个参数都可以与从它们提供的类进行比较。

我希望这可以帮助您使用泛型；-)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T09:06:20.240

如果您知道以下之间的区别：

```
List<Object> 
```

和

```
List<String> 
```

......这会更容易。基本上，它们是 java 中的两种不同类型（不是您想象的“相同”列表类型）。

通用类型“逻辑”并不像您在脑海中想象的那样简单直接。

我认为你应该将你的“Pair”类声明如下：

```
public class Pair<T1 extends Comparable<T1>, T2 extends Comparable<T2>> 
```

既然您已经使“T1”T2”具有可比性，为什么还要实现比较器？

如果你想使用“Collections.sort(myCollection, myComparator)”，那么你不必声明“T1”和“T2”是“可比的”......只要确保你的“KEY_COMPARATOR”接受它们。 ..

无论哪种方式，代码中都存在冗余。

# c++ - 如何正确声明通用排序算法？

> ID：13026194
> 
> 赞同：2
> 
> 时间：2012-10-23T08:21:24.633
> 
> 标签：c++, templates, c++11

我正在尝试实现合并排序算法：

```
#include <list>
#include <functional>
#include <iterator>
#include <iostream>
#include <random>

template <typename TIterator, typename TObject>
void mergeSort(const TIterator& begin, const TIterator& end,
               std::function<bool (const TObject& left,
                                   const TObject& right)> criterium)
{
    //...
}

bool compare(int a, int b)
{
    return a < b;
}

int main(int argc, char** argv)  // And now to test the algorithm
{
    std::list<int> container;
    for (int i = 0; i < 100; ++i)
        container.push_back(random() % 20);

    mergeSort(container.begin(), container.end(), compare);

    for (auto it = container.begin(); it != container.end(); ++it)
        std::cout << (*it) << std::endl;

    return 0;
} 
```

该程序无法编译：

```
error: no matching function for call to 
mergeSort(std::list<int>::iterator, std::list<int>::iterator, bool (&)(int, int))

candidate is:

template<class TIterator, class TObject> 
void mergeSort(const TIterator&, const TIterator&, 
std::function<bool(const TObject&, const TObject&)>)

at global scope 
```

我知道我在声明中搞砸了一些简单的事情，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T08:47:05.313

不能从任何不是已经存在的论点中推断出in `TObject`，请参见[这个问题](https://stackoverflow.com/q/8513050/500104)。`std::function<bool(TObject const&, TObject const&)>``std::function`

您也在滥用`std::function`- 仅当您想*存储*任何可调用实体时才使用它。如果您只想将任何可调用的内容作为参数，请将其设为模板参数：

```
template<class Iter, class Comp>
void mergeSort(Iter first, Iter last, Comp comp)
{
  // use 'comp(a, b)'
} 
```

这也是标准库的做法（几乎可以查看每个带有谓词的算法，例如[`std::sort`](http://en.cppreference.com/w/cpp/algorithm/sort)）。这样，您还可以避免执行（在您的情况下是不必要的）类型擦除`std::function`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T08:32:50.273

你可以看看std::sort：

```
template< class RandomIt, class Compare >
void sort( RandomIt first, RandomIt last, Compare comp ); 
```

[http://en.cppreference.com/w/cpp/algorithm/sort](http://en.cppreference.com/w/cpp/algorithm/sort)

这样你就可以使用你想要的任何可调用的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T08:26:22.943

您的功能`compare`不是，`std::function`而是您的`mergeSort`期望。此外，您不应该**传递**给`const_iterator`您的函数，因为它应该修改数组。

如果您更改代码并使用它：

```
std::function<bool(const int&, const int&)> myCompare = compare;
mergeSort(container.begin(), container.end(), myCompare); 
```

它有效（参见[http://ideone.com/7FdKTP](http://ideone.com/7FdKTP)）。

在我看来，将比较器实现为带有`operator()`. 这样，您传递一个对象而不是一个函数，这更容易管理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T08:38:28.713

虽然我不知道如何完全解决这个问题，但很明显编译器无法推断出参数。明确说明它们可以作为一种解决方法：

```
mergeSort< std::list<int>::iterator, bool >(container.begin(), container.end(), compare); 
```

另一种方法是将您传递的函数显式转换为`std::function`.

您也可以通过使最后一个参数 a`operator<`而不是比较函数来实现这一点，我认为这会更直观。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-23T08:24:21.773

`mergeSort`期望和你的`const TIterator`不是。

# r - 如何很好地重新调整晶格图形？

> ID：13026196
> 
> 赞同：13
> 
> 时间：2012-10-23T08:21:25.007
> 
> 标签：r, lattice

在准备要打印的图形时，我经常需要使它们比屏幕上显示的要小得多。将数字缩小到几厘米的情况并不少见。使用标准图形包`par(cex=...)`可用于缩小整个绘图以适应如此小的区域并且仍然看起来成比例。格子包中是否有等价物？

基本上，如何以右面板的大小绘制下图，但保留左面板的比例？

![在此处输入图像描述](../Images/7ef15c8525d40e218a1eb222a39a7d5d.png) ![在此处输入图像描述](../Images/1613c63d8b7d85e62c715dc4902849e2.png)

这个问题时不时地发生在我身上，它通常让我疯狂地尝试`trellis.par.get`，`trellis.par.set`然后放弃并使用标准图形重绘整个图形（这*非常*乏味）。发现时`trellis.par.set(simpleTheme(cex=...))`我以为我已经击中了黄金，但它似乎并没有做任何事情。

### 澄清

我想重新缩放图中的所有内容，包括字体大小、边距和刻度大小。很多。我知道我可以简单地调整`pdf(height=..., width=...)`以获得我喜欢的比例，然后在排版中重新调整它，例如 InDesign 或文字处理器，但我觉得如果每个 pdf 文件中都嵌入了它的预期尺寸，我会得到更好的控制。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-24T11:33:33.153

# 介绍

有几种方法可以缩放格点图元素的大小。一种选择是更改所有带有`cex`属性的参数，另一种是更改`fontsize`绘制所有内容的基础。您想要的解决方案是后者，您将在一分钟内看到，但了解如何通过`par.settings`参数影响绘图的各个组件也很有指导意义，因为您可能希望在设置时调整应用于各个组件的相对缩放`fontsize`.

# tl：博士

使用来自@Andrie's Answer 的示例图

```
require(lattice)
plt <- xyplot(decrease ~ treatment, OrchardSprays, groups = rowpos,
              type = "a",
              auto.key = list(space = "right", points = FALSE, lines = TRUE)) 
```

设置`fontsize`参数，一个包含组件的列表`text`和`points`，它定义了这两个关键绘图元素的基本尺寸，所有其他绘图家具都是从这些元素生成的。

```
update(plt, par.settings = list(fontsize = list(text = 8, points = 4))) 
```

![在此处输入图像描述](../Images/3b4a02270f3301d444594c2bc558f0f7.png)

（在 150 像素 x 200 像素 PNG 光栅设备上渲染）。

# `cex`为地块家具的特定项目设置单独的参数

需要注意的一件事是，格子图的外观由返回的整个参数流控制`trellis.par.get()`

```
> thm <- trellis.par.get()
> str(thm, max = 1)
List of 35
 $ grid.pars        : list()
 $ fontsize         :List of 2
 $ background       :List of 2
 $ panel.background :List of 1
 $ clip             :List of 2
 $ add.line         :List of 4
 $ add.text         :List of 5
 $ plot.polygon     :List of 5
 $ box.dot          :List of 5
 $ box.rectangle    :List of 5
 $ box.umbrella     :List of 4
 $ dot.line         :List of 4
 $ dot.symbol       :List of 5
 $ plot.line        :List of 4
 $ plot.symbol      :List of 6
 $ reference.line   :List of 4
 $ strip.background :List of 2
 $ strip.shingle    :List of 2
 $ strip.border     :List of 4
 $ superpose.line   :List of 4
 $ superpose.symbol :List of 6
 $ superpose.polygon:List of 5
 $ regions          :List of 2
 $ shade.colors     :List of 2
 $ axis.line        :List of 4
 $ axis.text        :List of 5
 $ axis.components  :List of 4
 $ layout.heights   :List of 19
 $ layout.widths    :List of 15
 $ box.3d           :List of 4
 $ par.xlab.text    :List of 5
 $ par.ylab.text    :List of 5
 $ par.zlab.text    :List of 5
 $ par.main.text    :List of 5
 $ par.sub.text     :List of 5 
```

其中许多会影响绘制对象的大小和注释中使用的文本。您需要修改所有适当的设置并仅将这些设置作为列表传递给`par.settings()`. 这是缩放@Andrie 的示例图的示例：

```
CEX <- 0.5

pset <- list(superpose.symbol = list(cex = CEX),
             plot.symbol      = list(cex = CEX),
             par.sub.text     = list(cex = CEX),
             par.main.text    = list(cex = CEX),
             par.zlab.text    = list(cex = CEX),
             par.ylab.text    = list(cex = CEX),
             par.xlab.text    = list(cex = CEX),
             dot.symbol       = list(cex = CEX),
             box.dot          = list(cex = CEX),
             add.text         = list(cex = CEX),
             axis.text        = list(cex = CEX))
plt2 <- update(plt, par.settings = pset) 
```

使用**gridExtra**包在同一设备上排列两个格子图，我们可以看到所有这些的效果：

```
require("gridExtra")  ## loads package:grid too
grid.arrange(plt, plt2, ncol = 2) 
```

导致

![在此处输入图像描述](../Images/131692e31e8025a61be0c893671e313c.png)

所以现在（几乎）一切都被缩放了。需要注意的一件有趣的事情是，这种方法没有缩放图例中的线条长度，也没有缩放刻度长度。请注意地块的大小，每个子地块的面积是相同的。然而，我们可以以更小的尺寸绘制整个事物：

![在此处输入图像描述](../Images/780a8351efc94dfe9e4a442651c52540.png)

这是合理的，并且在基于矢量的设备（例如 ）上呈现的效果要比我在此处用来说明`pdf()`的光栅要好。`png()`第二个绘图位于 150 x 200 像素的设备上。

# 设置基础`fontsize`以控制整体缩放

有一种更简单的方法，那就是通过`fontsize`参数设置文本和点的基本字体大小。其中的默认值是：

```
> trellis.par.get("fontsize")
$text
[1] 12

$points
[1] 8 
```

这些会影响情节上的所有内容，因此我们可以缩小它们以达到设置所有其他设置的类似效果。

```
update(plt, par.settings = list(fontsize = list(text = 8, points = 4))) 
```

产生

![在此处输入图像描述](../Images/0c76386b7437c8744a165b7862e05201.png)

`png()`这是在与之前的图 2相同大小的设备上绘制的。注意边距是如何调整的，以便更好地缩放绘图。因此，我们不仅影响了之前更改的所有设置，还影响了绘图的其他位（例如间距和刻度线），这些位也从`fontsize`设置中获取队列。同样，在矢量设备上绘制这些将产生更好的输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T08:41:53.590

您需要将 传递`cex=...`给图例/键，而不是整个情节：

这是默认设置：

```
xyplot(decrease ~ treatment, OrchardSprays, groups = rowpos,
       type = "a",
       auto.key =
         list(space = "right", points = FALSE, lines = TRUE)) 
```

![在此处输入图像描述](../Images/de045ccc26d2dfc58a6a411feb3f5166.png)

`cex=0.25`在 key 中使用时比较结果：

```
xyplot(decrease ~ treatment, OrchardSprays, groups = rowpos,
       type = "a",
       auto.key =
         list(space = "right", points = FALSE, lines = TRUE, cex=0.25)) 
```

![在此处输入图像描述](../Images/c4f6b5547d026b9c214af77ac59da95f.png)

# gwt - 这是我的弹出面板的出现代码.....但它只能工作 1 次

> ID：13026199
> 
> 赞同：0
> 
> 时间：2012-10-23T08:21:32.507
> 
> 标签：gwt

```
popup.setPopupPositionAndShow(new PopupPanel.PositionCallback() {
    public void setPosition(int offsetWidth, int offsetHeight) {
        int r = getToothNumber();
        if(r == 14 || r == 15 || r == 16) {
            popup.setPopupPosition(event.getClientX() - 170, event.getClientY());
            popup.show();
        } else if(r > 16) {
            popup.setPopupPosition(event.getClientX() - 56, event.getClientY() - 550);
            popup.show();
        } else {
            popup.setPopupPosition(event.getClientX() + 22, event.getClientY());
            popup.show();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:28:32.020

您的代码应始终显示一个弹出窗口。问题可能不在您显示的代码中。我的猜测是，您不只是隐藏弹出窗口。您可能正在销毁它，在这种情况下 show() 将不起作用。请尝试始终创建一个新的弹出窗口而不是重复使用它。

# c - 用另一种类型替换一种类型

> ID：13026202
> 
> 赞同：-2
> 
> 时间：2012-10-23T08:21:41.803
> 
> 标签：c, xml, sml

当我们进行替换时，一种类型可以替换另一种类型吗？这是一个过于宽泛的问题，因为它涉及编程的一般概念，而不是特定的编程语言。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:30:48.670

将一种类型替换为另一种类型完全取决于您的要求。您也可以`typedef`给定类型，也可以创建自己的类型。您还可以使用 Btw 执行类型替换，`template`您的问题有点不完整，无法给出准确的答案，您到底想问什么？

# sql - 如何将两列合并为一列，其中任一列

> ID：13026207
> 
> 赞同：3
> 
> 时间：2012-10-23T08:22:02.680
> 
> 标签：sql

我在表中有两列

```
column 1     column 2
........     .........
v1           v4
v2           v5
NULL         v6
NULL         v7 
NULL         v8 
```

列类型的值在哪里`v1 v2 v3 v4 v5 v6`是 varchar 我想将输出作为合并列但应该只有第一列的值

```
column 1
.......
v1 
v2 
v6 
v7 
v8 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T08:52:07.793

标准 SQL 是`COALESCE`：

```
SELECT COALESCE(column1,column2) as column1
FROM ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:50:24.720

您可以使用 case 语句

```
select case 
       when t.name is null then t.name2 
                           else t.name 
       end 
from your_table t 
```

这应该适用于大多数数据库。在 PostgreSQL 上测试。

# python - IPython 图出现在 IDLE 中

> ID：13026210
> 
> 赞同：0
> 
> 时间：2012-10-23T08:22:14.503
> 
> 标签：python, ipython

这很尴尬，但每次我`plot()`与 IPython 一起使用时，它都会在 IDLE 窗口中弹出，而不是内联显示它。我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:28:48.463

启动ipython

```
$ ipython --pylab=inline 
```

或在 ipython

```
In[x]: %pylab inline 
```

# android - 安卓请求者

> ID：13026215
> 
> 赞同：3
> 
> 时间：2012-10-23T08:22:31.383
> 
> 标签：android, wifi

这些天，我正在尝试将wifi移植到我的板上，android版本是JellyBean，linux内核是2.6.35.11，驱动程序是realtek rtl8192，我配置内核支持wifi并制作它，现在轮到编译驱动程序了，我还配置了makefile，现在它支持我的板子，我在我的板子上的目录“/system/bin”中找到了申请人“rel_supplciant（makefile build it in this name）”，现在我运行了apllicant rel_supplicant，但它不起作用，我抓住了 logcat，它是这样说的：

```
I/wpa_supplicant( 1794): rfkill: Cannot open RFKILL control device
E/wpa_supplicant( 1794): nl80211: Could not configure driver to use managed mode
E/wpa_supplicant( 1794): Could not read interface p2p0 flags: No such device
E/wpa_supplicant( 1794): p2p0: Failed to initialize driver interface 
```

你可能对日志很好奇，是的，这是JellyBean的新属性，如果你想启动请求者，你需要一个一个地创建两个接口“wlan0”和“p2p0”，只有它们都被创建了，请求者可以开始正确。

这里的问题是当我在我的板上运行请求者“rel_supplicant”是directroy“/system/bin”时，请求者无法启动，我不知道为什么。如果请求者无法通过cmd启动，也就是说不能从init.rc启动

# iphone - 将两张图片合并为一张图片后，我的原始尺寸会发生变化

> ID：13026216
> 
> 赞同：0
> 
> 时间：2012-10-23T08:22:32.973
> 
> 标签：iphone, ios, uiview, uiimageview

我想合并两个图像，我的 BaseImages 大小为 1280*1920，然后我使用方法转换为 1 个图像，但新图像大小将为 320*480。我想要它的原始像素和大小

我使用了这个代码：

```
//  ImageContainView  - UIView that Contains 2 UIImageView. View size :- 320*480

UIImage *temp;
UIGraphicsBeginImageContext(imageContainView.bounds.size);
[imageContainView.layer renderInContext:UIGraphicsGetCurrentContext()];
temp = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

![基础图片尺寸 1280*1920](../Images/3c6b7a4119ff6f4f24ebc55e4fe49992.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:25:00.883

如果我正确理解您要执行的操作，那么您获得小图像的原因是您正在使用小尺寸初始化上下文：

```
UIGraphicsBeginImageContext(imageContainView.bounds.size); 
```

如果`imageContainView.bounds.size`是 320x480，您将获得 320x480 的图像。

所以，你应该打电话：

```
UIGraphicsBeginImageContext(correctImageSize); 
```

`correctImageSize`CGSizeMake(1280,1920) 或您拥有的较大图像的大小在哪里。

或者您可以尝试在此之前致电`sizeToFit`：

```
[imageContainView sizeToFit];
UIGraphicsBeginImageContext(imageContainView.bounds.size); 
```

# c++ - C++ 函数挂钩（仅限内存地址）

> ID：13026220
> 
> 赞同：7
> 
> 时间：2012-10-23T08:22:44.583
> 
> 标签：c++, hook, detours

我有一个内存地址，它是另一个程序（它的一个 dll）中的函数的内存地址。我已经通过 DLL 注入加载到程序中。我已经有了低音地址，以及每次程序加载时函数的实际位置。所以，这不是问题。

我只想简单地钩住那个位置，然后抓取变量。我知道函数的伪代码。所以这不是问题。或者另一种很棒的方法是在该内存位置做一个断点并获取调试寄存器。

我找不到任何明确的例子。我也没有函数的“名称”，我只有内存地址。有没有办法只使用内存地址？大多数（如果不是所有）示例都使用函数的名称，而我没有。

如果有人能指出我正确的方向，以便我能够完成这项任务，我将不胜感激。它也可能会帮助许多可能有相同问题的其他人。

**编辑**：我还应该提一下，我宁愿不要用其他人的代码使我的程序超载，我真的只想要准系统，就像一辆带有卷帘窗的基本汽车。请不要给我豪华套餐。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T08:27:41.857

您错过了最重要的部分，这是 32 位还是 64 位代码？无论如何，代码项目都有一个很好的破败和涵盖两者的[库。](http://www.codeproject.com/Articles/21414/Powerful-x86-x64-Mini-Hook-Engine)

如果你想做这个“老派”，那么它可以很简单地完成：

首先，您需要找到要挂钩的函数的虚拟地址（由于 ASLR，您永远不应该依赖它在同一个地方），这通常是通过 RVA + 模块基加载地址来完成的导出，对于导出的函数，您可以使用`GetProcAddress`.

从那里开始，类型挂钩取决于您要完成的任务，在您的情况下，有两种方法：

1.  在目标函数的序言中修补跳转/调用您的函数
2.  将所有调用站点修补到您要挂钩的功能，重定向到您的功能

第一个更简单，但很混乱，因为它通常涉及一些内联汇编（除非您挂钩`/HOTPATCH`二进制文件或者您只想存根它），第二个更干净，但需要使用调试器进行一些工作。

您将跳出的函数应该与您要挂钩的函数具有相同的参数和调用约定 (ABI)，该函数是您可以捕获传递的参数、操作它们、过滤调用或任何您想要的任何东西的地方。

对于这两者，您需要一种方法来编写一些程序集来进行修补，在 Windows 下，`WriteProcessMemory`这是您的第一个调用端口（注意：您需要 RWX 权限才能执行此操作，因此调用`VirtualProtect`），这是一个创建的小实用程序函数一个 32 位的相对调用或跳转（取决于作为 传递的操作码`eType`）

```
#pragma pack(1)
struct patch_t
{
    BYTE nPatchType;
    DWORD dwAddress;
};
#pragma pack()

BOOL ApplyPatch(BYTE eType, DWORD dwAddress, const void* pTarget)
{
    DWORD dwOldValue, dwTemp;
    patch_t pWrite =
    {
        eType,
        (DWORD)pTarget - (dwAddress + sizeof(DWORD) + sizeof(BYTE))
    };

    VirtualProtect((LPVOID)dwAddress,sizeof(DWORD),PAGE_EXECUTE_READWRITE,&dwOldValue);
    BOOL bSuccess = WriteProcessMemory(GetCurrentProcess(),(LPVOID)dwAddress,&pWrite,sizeof(pWrite),NULL);
    VirtualProtect((LPVOID)dwAddress,sizeof(DWORD),dwOldValue,&dwTemp);
    return bSuccess;
} 
```

此函数适用于方法 2，但对于方法 1，您需要跳转到中间程序集蹦床以恢复补丁覆盖的任何代码，然后再返回原始函数，这变得非常乏味，这就是为什么它更好只需使用现有且经过测试的库。

从它的声音来看，使用方法 1 并修补跳过目标函数的序言将满足您的需求，因为您似乎并不关心执行修补的函数。

（还有第三种使用硬件断点的方法，但这非常脆弱，并且可能会出现问题，因为您被限制为 4 个硬件断点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:35:26.780

您的“样本”在这里：

[http://www.codeproject.com/Articles/4610/Three-Ways-to-Inject-Your-Code-into-Another-Proces#section_1](http://www.codeproject.com/Articles/4610/Three-Ways-to-Inject-Your-Code-into-Another-Proces#section_1)

通常，当您“挂钩”到 DLL 中时，实际上是将您的函数放在 DLL 中被调用的函数的前面，因此您的函数会被调用。然后你捕获你想要的任何东西，调用另一个函数，捕获它的返回值和其他任何东西，然后返回给原始调用者。

# jquery - 如何使用 jQuery 从选择框插件中更改选择？

> ID：13026221
> 
> 赞同：0
> 
> 时间：2012-10-23T08:22:44.580
> 
> 标签：jquery, css, drop-down-menu

我不明白为什么我不能点这个 - 它应该很简单。

如果存在一些错误 div - 我想更改选择框样式，但我没有这样做。

这是我在 CSS 文件中设置选择框的方法：

```
.selectBox-options{
-moz-box-shadow: 0px 3px 3px 3px rgba(98,141, 40, 0.2);
-webkit-box-shadow: 0px 3px 3px 3px rgba(98,141, 40, 0.2);
box-shadow: 0px 3px 3px 3px rgba(98,141, 40, 0.2);
border-bottom: 1px solid rgb(98,141, 40);
border-left: 1px solid rgb(98,141, 40);
border-right: 1px solid rgb(98,141, 40);
border-bottom-left-radius:3px;
border-bottom-right-radius: 3px;
} 
```

然后，如果有名为 field_with_errors 的 div - 我应该更改样式。

这是代码：

```
 if($('.field_with_errors').is(':visible')){
        alert('aaa')
        $('.selectBox-options').css({"-moz-box-shadow":"0 0 3px 3px rgba(222,162, 162, 0.4)"});
    } 
```

Field_with_errors DO 出现，因为我收到警报框。

如何更改边框和框阴影？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:27:31.600

用它来改变。

```
$('.selectBox-options').css("-moz-box-shadow","0 0 3px 3px rgba(222,162, 162, 0.4)"); 
```

因为更改 CSS 的语法是

```
$('#id').css('property','value'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:34:47.540

你可以试试这个

```
$('.selectBox-options').css({"-moz-box-shadow":"0 0 3px 3px rgba(222,162, 162, 0.4)",
                            "-webkit-box-shadow":"0 0 3px 3px rgba(222,162, 162, 0.4)",
                             "box-shadow":"0 0 3px 3px rgba(222,162, 162, 0.4)",
                            }); 
```

[JSFiddle](http://jsfiddle.net/geems/1/)

# android - Android SDK 获取点击图片的位置

> ID：13026224
> 
> 赞同：2
> 
> 时间：2012-10-23T08:22:56.770
> 
> 标签：android

我有一个`ImageView`，但我如何才能看到用户在图像上*单击/触摸*的位置。

我知道我必须使用`MotionEvent.getX()`and `MotionEvent.getY()`，但是我怎样才能看到用户点击了图像的位置？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:24:28.020

您必须对图像视图进行子类化，并在用户触摸的位置显式绘制指示器。

```
public class TouchableImageView extends ImageView {

  // Constructors should come here

  // Override onTouch to remember the touch position in our variable touchLocation
  // Set touchLocation to null when getting the ACTION_UP event

  // Override onDraw to draw something at touchLocation. You should create a proper Paint object
  // in your constructors and use it here
  public void onDraw(Canvas c) {
    if (touchLocation!=null) {
      canvas.drawCircle(touchLocation.x, touchLocation.y, 10, indicatorPaint);
    }
  }

  private Point touchLocation;
  private Paint indicatorPaint;
} 
```

# twitter - 将 user_timeline Twitter 放在使用新 API 1.1 的网站上

> ID：13026225
> 
> 赞同：2
> 
> 时间：2012-10-23T08:22:57.657
> 
> 标签：twitter, twitter-oauth

前段时间我有这段代码来放置用户的最后 3 条推文：

```
jQuery.getJSON("http://twitter.com/statuses/user_timeline/"+ user +".json?callback=?&count=3", function(data) {
    jQuery.each(data, function(i, object) {
        var textt = object.text.linkify().atify().hashify();
        jQuery("#twitter").append('<p><span class="text">' + textt + '</span><br/><span class="quan">' +parseTwitterDate(object.created_at) + '</span></p><hr/>');
    });     
}); 
```

现在，我读到 API 已针对新 URL 进行了更改，需要创建一个带有安全令牌 (Oauth) 的应用程序，以便查看网站上的推文。

我已经与想要显示推文的用户一起创建了应用程序，并且我拥有安全密钥，但是我现在如何显示推文？我需要把这个键放在一些 Javascript 代码行上吗？但是使用 Javascript 我不能放这个密钥，因为是秘密......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T15:13:20.143

简而言之：您需要 OAuth 身份验证才能使用 1.1 API。唯一的方法是在服务器端实现此步骤并使用 Javascript 从那里提取提要。这样做缓存提要会增加页面负载。

记得查看 twitter 上的显示要求。真的，真的！

我一直在研究解决方案。在我的搜索中，我发现以下资源非常有用：

[https://dev.twitter.com/docs/api/1.1](https://dev.twitter.com/docs/api/1.1)

[http://www.jaisenmathai.com/articles/twitter-async-documentation.html](http://www.jaisenmathai.com/articles/twitter-async-documentation.html)

# json - 在 html 页面上显示从 URL 返回的 JSON 对象的内容

> ID：13026227
> 
> 赞同：0
> 
> 时间：2012-10-23T08:22:57.750
> 
> 标签：json, jquery

我有从 URL 返回的 JSON 对象，格式为

```
<pre>
    [{"merchant":"eletspay","accountName":"hello","accountType":"Savings","ifscCode":"5545","email":"mypal.1989@gmail.com","phoneNum":"98654567876","isDefaultAccount":false},{"merchant":"eletspay","accountName":"helloi32irn","accountType":"Savings","ifscCode":"5545","email":"mypal.appa99721989@gmail.com","phoneNum":"98654567876","isDefaultAccount":false}]
    </pre> 
```

我想循环遍历每个索引的 JSON 对象，以显示该表所在的 html 表中的所有内容

```
<pre>
<table class= "dataTable">
                    <tr>
                    <td><input type="radio" name="activate"></td>
                    <td>jsonObject[1.value]</td>
                    <td>jsonObject[1.value]</td>
                    <td>jsonObject[1.value]</td>
                    <td>jsonObject[1.value]</td>
                    <td>jsonObject[1.value]</td>
                    <td>jsonObject[1.value]</td>

                    </tr>
<tr>
                    <td><input type="radio" name="activate"</td>
                    <td>jsonObject[2.value]</td>
                    <td>jsonObject[2.value]</td>
                    <td>jsonObject[2.value]</td>
                    <td>jsonObject[2.value]</td>
                    <td>jsonObject[2.value]</td>
                    <td>jsonObject[2.value]</td>
                                            </tr>
</table>
</pre> 
```

`jsonObject[1.value]`索引 1 处的数据在哪里`jsonObject[2.value]`，索引 2 处的数据在哪里，依此类推。

PS：我是 Javascript 和 Jquery 的新手，所以请纠正/纠正 html 部分中的任何愚蠢错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:52:23.313

试试这个[http://jsfiddle.net/aBZDg/13/](http://jsfiddle.net/aBZDg/13/)：

```
var jsonData = [{"merchant":"eletspay","accountName":"hello","accountType":"Savings","ifscCode":"5545","email":"mypal.1989@gmail.com","phoneNum":"98654567876","isDefaultAccount":false},{"merchant":"eletspay","accountName":"helloi32irn","accountType":"Savings","ifscCode":"5545","email":"mypal.appa99721989@gmail.com","phoneNum":"98654567876","isDefaultAccount":false}];

function writeTable() {
    var out = '';

    for(var row=0; row<jsonData.length; row++) {
        out += '<tr>'
                + '<td>' + jsonData[row].merchant + '</td>'
                + '<td>' + jsonData[row].accountName + '</td>'
                + '<td>' + jsonData[row].accountType + '</td>'
                + '<td>' + jsonData[row].ifscCode + '</td>'
                + '<td>' + jsonData[row].email + '</td>'
                + '<td>' + jsonData[row].phoneNum + '</td>'
                + '<td>' + jsonData[row].isDefaultAccount + '</td>'
                + '</tr>';
    }

    document.write(out);
}​ 
```

然后在要显示表格的地方调用此函数。

```
<table border="1">
    <tr>
        <th>Merchant</th>
        <th>AccountName</th>
        <th>AccountType</th>
        <th>IfscCode</th>
        <th>Email</th>
        <th>PhoneNum</th>
        <th>IsDefaultAccount</th>
    </tr>
    <script>writeTable();</script>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:30:40.097

尝试使用 jquerytemplate

[http://www.diplo.co.uk/blog/2011/3/1/using-jquery-templates-to-bind-to-json-data.aspx](http://www.diplo.co.uk/blog/2011/3/1/using-jquery-templates-to-bind-to-json-data.aspx)

这将循环从您的 url 返回的 json 数据

# java - 从java调用ant目标时如何设置记录器

> ID：13026228
> 
> 赞同：5
> 
> 时间：2012-10-23T08:23:01.213
> 
> 标签：java, shell, ant

我必须从 java 类调用一个 ant 目标，目前它是从设置 -logger logger.class 的 sh 脚本调用的

我已经编写了java代码来做到这一点......

```
Project p = new Project();
        p.setUserProperty("ant.file", buildFile.getAbsolutePath());
        p.init();
        ProjectHelper helper = ProjectHelper.getProjectHelper();
        p.addReference("ant.projectHelper", helper);
        helper.parse(p, buildFile);
        p.executeTarget(TARGET); 
```

有人可以告诉我如何使用相同的代码序列设置记录器。

错误：

```
Class not found:util.logger.CustomLogger
java.lang.RuntimeException
        at org.apache.tools.ant.Main.createLogger(Main.java:850)
        at org.apache.tools.ant.Main.addBuildListeners(Main.java:795) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T14:39:31.823

您必须使用 addBuildListener 将 Logger 添加到项目中，ant 提供了一些实现，这些实现也实现了`BuildLogger`

所以

```
project.addBuildListener(new DefaultLogger());
```

或者无论你的记录器是什么（只要它实现`BuildListener`了）都可以解决问题

# java - 如何找到包含对象的 ArrayList

> ID：13026229
> 
> 赞同：0
> 
> 时间：2012-10-23T08:23:03.850
> 
> 标签：java

我有一个方法，我从中返回对象

```
public static Object login(DataManager dataManager, String userName, String password)       
    ArrayList<LoginCredentialsBean> loginCredentialsList = new ArrayList<LoginCredentialsBean>();       
    String authenticated = "false";     
    Connection connection = null;       
    try {           
        connection  = dataManager.getConnection();          
    } catch (Exception e) {         
         return ("Having problem in connectiong to databaste: " + e.getMessage());          
    }       
    if (connection != null) {           
         try {                                       
             ...                     
             try {                   
                 ResultSet rs = prepStatement.executeQuery();                   

                 try {                      
                     while (rs.next()) {
                         ...                             
                         loginCredentialsList.add(new LoginCredentialsBean(roleId, orgaCode, passwordExpiryDate, date, status, language));                                                          
                        authenticated = "true";                          
                     } //end of while()                                                  
                 } finally {                     
                     rs.close();                     
                 }                   
             } finally {
                 prepStatement.close();                  
             }                
             if (authenticated.equals("true")) {                     
                updateUserLogByInserting(connection, userName);                  
             }

         } catch(SQLException e) {               
             System.out.println("Could not login from dataabse:" + e.getMessage());              
         } finally {                 
             dataManager.putConnection(connection);                          
         }                  
    }       
    if (authenticated.equals("true")) {                 
        return loginCredentialsList;            
    } else {        
        return authenticated;           
    }       
} //end of login() 
```

现在我正在测试它

```
public static void main(String... args) {

    MoneyTreeServices moneyTreeServices = new MoneyTreeServices();

    Object result = moneyTreeServices.login("Admin", "cbas1234");       
    if (result instanceof ArrayList<?>) {

        System.out.println("ArrayList instance");           
    }       
    System.out.println(result);
} 
```

它返回我的结果就像

```
ArrayList instance
[pk.mazars.moneyTree.bean.LoginCredentialsBean@b7ec5d] 
```

我想问我正在使用类似的条件`ArrayList<?>`。我如何检查包含 LoginCredentialsBean 对象的 ArrayList。就像我使用时一样

```
if (result instanceof ArrayList<LoginCredentialsBean>) {

} 
```

我得到错误

```
Can not perform instanceof check against parameterized type ArrayList<LoginCredentialsBean>. Use the form ArrayList<?> 
```

我想检查 instanceof ArrayList 和 arraylist 有 LoginCredentialsBean 吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:27:03.990

参数化类型信息在编译时被删除，并`instanceof`在（大张旗鼓）运行时被解析——这就是你得到那个错误的原因。

你可以做的是迭代`List`和`instanceof`它们中的元素。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:27:42.493

简短的回答是**你不能**。泛型是通过类型擦除实现的——它们实际上是编译时语法糖，以确保您不会`Integer`将`List<String>`.

然而，运行时对象本身只是原始类型。的实例`ArrayList`不*知道*它是一个`ArrayList<String>`（或者更确切地说，它被分配给具有该泛型类型的变量）。因此，当您通过反射询问它时，您无法获得任何泛型类型信息。

我能想到两种广泛的解决方案。一种是遍历列表内容并检查*它们的*动态类型——例如，如果第一个元素是 a `LoginCredentialsBean`，那么假设你有 a 是合理的`List<LoginCredentialsBean>`。但是，这不适用于空列表，这可能是一个问题，并且可能会产生误报（例如，a`List<Object> allParameters`可能恰好将 a`LoginCredentialsBean`作为其第一个元素......）

另一种是显式传递元数据对象 - 因此在这种情况下，您`Object`将从`login`方法返回 ，以及描述它是什么类型的对象的标记。这可以是一个简单的枚举常量；或者走向另一个极端，您可以使标记成为通用类型，以便编译器可以根据您返回的类型检查它并确保标记是类型正确的。

但无论如何，`instanceof`太少（信息），太晚了。

* * *

请注意，您的`login`方法看起来……很奇怪。我认为它根本不应该返回一个`Object`，因为这只是懒惰并且完全颠覆了静态类型系统，这将帮助你。相反，我认为它应该只返回一个`List<LoginCredentialsBean>`包含与给定登录名相关的凭据。

你有三个不同的返回路径。第一个是在连接数据库时遇到异常——*在这种情况下你应该抛出异常*！返回带有错误详细信息的字符串是非常不典型且令人困惑的 - 应将异常情况处理为`Exception`，这就是它们的用途。

其他两种情况是您可以查找确定结果的情况。对于登录失败的情况，我将只返回一个空列表（即此用户名/密码没有任何凭据），同时在成功登录期间返回填充列表。

如果您强烈希望能够区分登录失败和成功登录（没有凭据），那么可能会返回一个复合对象，例如：

```
class LoginStatus {
    final boolean authenticated;
    final List<LoginCredentialsBean> credentials;
} 
```

无论哪种方式，调用者都知道他们要返回什么，并且可以适当地调用它的方法，而无需调用`instanceof`和类型转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:27:52.743

你必须检查两次。

```
if (result instanceof ArrayList<?>) {
 System.out.println("ArrayList instance");
 //cast
 ArrayList<LoginCredentialsBean> list = (ArrayList<LoginCredentialsBean>) result;

  ///..check if list contains LoginCredentialsBean
 for(int i=0; i<list.size(); i++){
  if(list.get(i) instanceof LoginCredentialsBean){
   System.out.println("LoginCredentialsBean instance");
  }  
 }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T08:28:55.533

没有像“包含 LoginCredentialsBean 的 ArrayList”这样的东西，ArrayList 始终包含对象。

您必须遍历列表并检查每个对象：

```
for (Object o: result) {
     if (!(o instanceof LoginCredentialsBean)) {
           //Fail
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T08:29:01.107

您可以使用`contains(Object o)`来检查 ArrayList 是否包含您的对象。用`instanceof List`来检查给定的对象是否是一个列表。由于在运行时类型擦除，List 的泛型类型将不可用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T08:32:04.660

如果您的`login`方法返回一个`Object`类型，则无法按照您尝试的方式进行检查。由于类型擦除，类型参数仅存在于编译时。您需要检查重新调整的对象是`List`or`Collection`还是 just `Iterable`，然后遍历它并检查每个项目，如果它是`LoginCredentialsBean`.

但是，您的代码是糟糕设计的一个例子。返回一个`String`或一个列表的方法是错误的。为了使它正确：

*   让它返回`List<LoginCredentialsBean>`
*   如果身份验证失败，则抛出已检查异常

`public static List<LoginCredentialsBean> login(DataManager dataManager, String userName, String password) throws AuthenticationException {...}`

注意：`boolean`用于保留逻辑数据而不是`"true"`或`"false"`字符串。

# php - PHP/SQL 获取第一个星期一和最后一个星期日

> ID：13026230
> 
> 赞同：-5
> 
> 时间：2012-10-23T08:23:06.160
> 
> 标签：php, date, date-arithmetic

> **可能重复：**
> [如果今天是星期一，php strtotime“上星期一”？](https://stackoverflow.com/questions/4150435/php-strtotime-last-monday-if-today-is-monday)

我想从本周的数据库中获取一些信息。

那我需要什么？第一个星期一（日期）和下一个星期日（日期）。

此代码工作正常，但是：

```
$fm = date('Y-m-d', strtotime('last monday', time()));
$lz = date('Y-m-d', strtotime('next sunday', time())); 
```

但是当它是星期一这不起作用？它给了我一个完全不同的日期。

我能做些什么来防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:53:00.370

抱歉搜索不够好。

```
$eerstedag = date('Y-m-d', strtotime('last monday', time()));
if (date('N', time()) == 1) $eerstedag =  date('Y-m-d');
else $eerstedag = date('Y-m-d', strtotime('last Monday')); 
```

这对我有用。

# css - SASS 抱怨有效的 CSS

> ID：13026233
> 
> 赞同：3
> 
> 时间：2012-10-23T08:23:33.897
> 
> 标签：css, sass

SASS 新手。为什么我会收到以下警告？

```
$ sass --watch index.s.css:index.css --debug-info
WARNING on line 13 of index.s.css:
This selector doesn't have any properties and will not be rendered.
      error index.s.css (Line 15: Invalid CSS after "border-box": expected expression (e.g. 1px, bold), was ";") 
```

第 13-18 行：

```
*
{
    -moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
} 
```

我应该注意，这与我尝试删除的供应商前缀无关。我也改成`box-sizing: border-box`了`color: pink`。还在抱怨。

**编辑：**我没有意识到 SASS 有两种语法，也没有意识到它们是根据文件扩展名选择的。我想使用 SCSS，但必须为文件命名，`*.s.css`因为我使用的是 Adob​​e Brackets beta，它目前只有纯 CSS 文件的语法突出显示。我发现了`--scss`强制该语法的标志，但我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:41:41.187

你需要把它写成：

```
*
 +box-sizing(border-box) 
```

试试这个，看看你是否仍然得到同样的错误。如果这不起作用，请尝试选择一些实际元素：`div, section, artcle, figure`等。

# c# - 在 BufferedGraphics 的底部绘图

> ID：13026236
> 
> 赞同：1
> 
> 时间：2012-10-23T08:24:06.330
> 
> 标签：c#, graphics

我有一个`BufferedGraphics`实例，我在上面画了一些图表。我想创建一个名为的函数`DrawLegends`，它接受一个实例`BufferedGraphics`并绘制两个字符串作为图例。

我可以创建一个`PointF`指向 (0, 0) 的实例，但我想将图例放在底部。我应该如何处理？我可以用`BufferedGraphics`实例来做吗，还是我还需要我正在绘制的面板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T07:44:53.620

重要的是您需要知道绘图画布（即面板）的尺寸（主要是高度）。这将用于最终计算图例的位置。因此，如果您没有将高度信息存储在其他地方，那么是的，您将不得不在某种程度上使用面板

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:44:13.620

归根结底，几乎所有绘制到屏幕上的对象都可以手动绘制，就像在它们的封面下一样，或者在您喜欢的时候暴露一个图形对象以进行绘制。

因此，如果您在图形对象或您当前使用的任何东西上进行绘图，那么当您完成绘图时，只需将该图形对象绘制到您想要显示它的任何控件上。因为您可以将图形对象视为图像。没有理由不能传入要绘制的底层控件图形对象而不是制作自己的图形对象，但是如果您有一个方法可以：

```
void DrawGraph(string xLegend, string yLegend, IList<XYValues> values, Graphics graphics); 
```

然后，您可以使用数据绘制到该图形对象上，调用 invalidate 并完成。

# mysql - 在多租户的情况下如何为自己制作数据库副本

> ID：13026239
> 
> 赞同：3
> 
> 时间：2012-10-23T08:24:15.173
> 
> 标签：mysql, database, copy, multi-tenant, discriminator

我有带有 mysql 数据库的多租户系统。有基于鉴别器的多租户。每个表都包含列tenantId。我有默认租户，tenantId = -1。对于此默认租户数据库，包含所有新租户的初始数据。

如何为同一数据库中的新租户 ID 复制所有租户 ID = -1 的数据？数据库中有很多表，因此手动编写这样的脚本非常困难。

主要问题：如果我要转储数据库，那么我不能将此转储加载到同一个数据库，因为主键和外键应该是新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:33:29.827

您需要在 mysqldump 中使用 -w（或 --where）选项。由于您所有的表都有tenantId，这应该可以工作：

```
mysqldump myDB --where='tenandId=-1' 
```

# ontology - 就 Protege 而言，“双关语”、“双关语”代表什么？

> ID：13026240
> 
> 赞同：2
> 
> 时间：2012-10-23T08:24:20.837
> 
> 标签：ontology, protege

我是本体和 Protege 的新手，有时会遇到诸如“双关语”或“双关语”之类的词。但是，我不知道它们是什么意思。你能为我澄清一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:46:52.213

“双关语”不是来自 Protégé 的东西，而是 Protégé 为其编辑的 Web Ontology Language OWL 2 DL 的一个特性。“双关语”是指用相同的IRI命名不同性质的术语的可能性。例如，您可以为一个类和一个实例、一个属性和一个实例、或者一个类和一个属性使用相同的 IRI。在 OWL 2 DL 中，上下文总是明确 IRI 是用作类、属性还是实例。请参阅[OWL 2 新功能和基本原理的第 2.4.1 节](http://www.w3.org/TR/owl2-new-features/#F12%3a_Punning)。

# c# - C# IBM.Data.DB2.dll 版本错误

> ID：13026242
> 
> 赞同：1
> 
> 时间：2012-10-23T08:24:21.883
> 
> 标签：c#, reference, db2, .net-assembly

我使用了 IBM.Data.DB2 version=9.7.4.4，一切正常。但我无法使用性能分析器，支持人员告诉我应该尝试使用新的 IBM 版本 = 10.1。我安装了它，一开始有问题。我必须在 GAC 等中注册对它的引用。

现在我的问题：如果我浏览到 C:\Program Files\IBM\SQLLIB\BIN\netf40_32\IBM.Data.DB2.dll 并查看属性，我有版本：10.1.0.4 但是当我在 Visual Studio 中添加参考时我有version = 9.7.4.4 在属性窗口中，我不确定是否使用了正确的版本。

如何在 Visual Studio 的属性窗口中获取正确的版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T10:09:34.107

我通过使用 C:\Program Files\IBM\SQLLIB\BIN\netf40_32\specific\IBM.Data.DB2.10.1.0.dll 中的 IBM.Data.DB2.dll 解决了这个问题。

所以我得到了正确的版本，然后我有 db2 .net 数据提供程序原因代码 2 的 SQL1159 初始化错误。在错误的目录中搜索了 db2app.dll（找不到文件：http: [//publib.boulder.ibm.com/infocenter /db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.messages.sql.doc/doc/msql01159n.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.messages.sql.doc/doc/msql01159n.html) )

我重新安装了 db2 客户端，现在它可以工作了......

# batch-file - 编写批处理文件以重复包含 %PATH% 的段落时出现问题

> ID：13026245
> 
> 赞同：0
> 
> 时间：2012-10-23T08:24:34.977
> 
> 标签：batch-file

我编写了以下批处理文件，它将 100 个段落写入 .bat 文件，并对所引用的文件名进行增量编号更改。

```
for /l %%N in (1 5 500) do (
echo cd /D "C:\batch"
echo set PATH=C:\batch; &PATH%
echo echo Simulation 'g=0.00%%N.pre' started...
echo call %SOLVERQSP%-fp 1 -nt 3 ^
"C:\batch\0.00%%N.pre" > "C:\batch\g=0.00%%N.out"
echo echo Simulation 'g=0.00%%N' finished...
echo echo. 
```

问题是当存在 %PATH% 和 %SOLVERQSP% 命令时未创建批处理文件。如果我删除这些脚本运行良好。关于我哪里出错或如何避免这种情况的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:35:46.987

只需`%`将它们加倍即可逃脱：

```
echo set PATH=C:\batch;%%PATH%% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:45:42.457

您应该使用一些引号并避免在您的情况下使用插入符号

```
for /l %%N in (1 5 500) do (
  echo cd /D "C:\batch"
  echo set "PATH=C:\batch; %PATH%"
  echo echo Simulation 'g=0.00%%N.pre' started...
  echo call %%SOLVERQSP%%-fp 1 -nt 3 "C:\batch\0.00%%N.pre" > "C:\batch\g=0.00%%N.out"
  echo echo Simulation 'g=0.00%%N' finished...
  echo echo.
) 
```

# php - if else 语句不起作用，不会回显 else

> ID：13026251
> 
> 赞同：-3
> 
> 时间：2012-10-23T08:24:58.113
> 
> 标签：php

您好，希望有人可以提供帮助，

在一个页面上，我有一个表单，您可以在其中输入 ID 号，如果 ID 号在数据库中，则在提交表单时，它会显示来自数据库的信息，如果不是，则应该显示“否”。请参阅下面的代码，目前，如果您输入数据库中的 ID 号，它可以正常工作并显示数据库信息，但是如果您输入的数字不在数据库中，它不会显示任何内容，我想要它回声没有。

如果有人能指出我正确的方向，我将不胜感激。

```
include '../book_classified_advertising/dbc.php';

$deletepost  = $_POST['webid1']; 

$result = mysql_query("SELECT * FROM class WHERE webid='$deletepost'");

while($row = mysql_fetch_array($result))
{
    if ($deletepost == $row['webid'])
    {
        echo $row['text']; 
    }
    else
    {
        echo 'no';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:28:32.150

首先，您的代码容易受到最基本形式的[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击（除非在脚本开头包含的文件中应用了某种形式的清理）。

现在，根据您的问题，该`else`条件的一部分永远不会达到，因为它通过数据库查询的所有结果嵌套在迭代中。如果没有结果，则不会`while`执行循环内的任何语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T08:29:28.917

您需要为此重新组织代码：

```
$result = mysql_query("SELECT * FROM class WHERE webid='$deletepost'");

if( mysql_num_rows($result) == 0) {
  echo 'no';
}
else  {
  while($row = mysql_fetch_array($result)) {
    echo $row['text']; 
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T08:27:51.510

因为`$deletepost`你使用的地方是相同的，所以如果有任何行`$deletepost`

你可以检查这个`mysql_num_rows($result)`

就像是

```
$$deletepost =2' 
```

询问

```
$result = mysql_query("SELECT * FROM class WHERE webid='2'"); 
```

和

```
$row['webid'] will be 2

if ($deletepost == $row['webid']) ///its like if(2 == 2)
{
echo $row['text']; 
} 
```

**尝试类似的东西**

```
 $result = mysql_query("SELECT * FROM class WHERE webid='$deletepost'");
if(mysql_num_rows($result)){
while($row = mysql_fetch_array($result))
{

        echo $row['text']; 

}}else
    {
        echo 'no';
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T08:28:17.183

问题在这里：

```
while($row = mysql_fetch_array($result)) 
```

如果没有结果，那么您的 if 语句将永远不会运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T08:30:47.703

使用 Mysql_num_rows 来检查没有记录

```
$num_rows = mysql_num_rows($result);
if($num_rows)
 {
     True condition
 }
else
 { 
    Fales condition
 } 
```

# mysql - MYSQL查询表

> ID：13026254
> 
> 赞同：5
> 
> 时间：2012-10-23T08:25:10.713
> 
> 标签：mysql, sql

我有一个名为访问者的表，其中包含 IP 和国家/地区列。

现在我想查询表，以便从表中获取唯一国家并显示该国家的行数。

桌子：

```
IP         Country 
1.1.1.1\.    xyz 
1.2.3.4     xyz
2.2.3.6     abc
3.61.3.69   axy 
```

现在我希望结果为：

```
Country     No_Visitors
xyz               2
abc               1
axy               1 
```

我知道如何通过使用 2 个查询来做到这一点，首先获取唯一的国家，然后再次在表中查询国家名称。但是我怎么能用单个查询来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T08:26:30.840

使用[**AGGREGATE FUNCTION**](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html) `COUNT()`获取每个国家/地区的实例总数。

```
SELECT Country, COUNT(IP)
FROM tableName
GROUP BY Country 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/6c060/2)

# c++ - 如何使用 RSA 正确交换对称 aes 密钥

> ID：13026255
> 
> 赞同：3
> 
> 时间：2012-10-23T08:25:20.120
> 
> 标签：c++, openssl, aes, rsa

我正在尝试使用 OpenSSL 库在 C++ 中实现 ssl 握手（在上下文中，因为节点通过网关进行通信，所以我不能使用已经实现的 ssl 套接字）

让我们有发送者和接收者

1.  发件人将他的证书发送给收件人
2.  接收方从发送方 pub_key（包含在证书中）创建 AES 密钥
3.  接收方使用发送方 pub_key 加密 AES 密钥，然后使用其私钥加密并将其发送给发送方（连同其证书）
4.  发送者使用接收者 pub_key 解密它，然后使用它的私钥

使用 RSA_PKCS1_PADDING 进行公共加密 使用 RSA_NO_PADDING 进行私有加密

现在私人解密部分失败了大约 50% 的时间

```
error:0407106B:rsa routines:RSA_padding_check_PKCS1_type_2:block type is not 02 
```

我不知道如何解决这个问题。

整个代码：

```
#include <iostream>
#include "openssl/bio.h"
#include "openssl/evp.h"
#include "openssl/aes.h"
#include "openssl/err.h"
#include <openssl/pem.h>
using namespace std;

int main(int argc, char *argv[]) {
  int ret = 0;

  ERR_load_crypto_strings();
  OpenSSL_add_all_algorithms();

  srand(time(NULL));

  X509 *sender_x, *receiver_x;
  RSA *sender_priv_key, *sender_pub_key, *receiver_priv_key, *receiver_pub_key;
  EVP_PKEY *sender_evp_key, *receiver_evp_key;

  string sender_ssl_cert = "unit_test/ini/00000000000Wcert.pem";
  string sender_ssl_key = "unit_test/ini/00000000000Wkey.pem";
  string receiver_ssl_cert = "unit_test/ini/00000000000Rcert.pem";
  string receiver_ssl_key = "unit_test/ini/00000000000Rkey.pem";
  string ssl_ca="unit_test/ini/sitsroot.pem";
  BIO *bio = BIO_new(BIO_s_mem());
    unsigned char tmp_buf[2000 + 1];

    unsigned char key[32], iv[32];

    /** **************************************************************** */
    /** ************************ READ FILES **************************** */
    FILE *f;
    if ((f = fopen(sender_ssl_cert.c_str(), "r")) == NULL) {
      cout << "failed to open file " << sender_ssl_cert << endl;
      return -1;
    }
    if ((sender_x = PEM_read_X509(f, NULL, NULL, NULL)) == NULL) {
      cout << "failed to read cert file " << sender_ssl_cert << endl;
      fclose(f);
      return -1;
    }
    fclose(f);

    if ((f = fopen(sender_ssl_key.c_str(), "r")) == NULL) {
      cout << "failed to open file " << sender_ssl_key << endl;
      return -1;
    }
    if ((sender_priv_key = PEM_read_RSAPrivateKey(f, NULL, NULL, NULL)) == NULL) {
      cout << "failed to read cert file " << sender_ssl_key << endl;
      fclose(f);
      return -1;
    }
    fclose(f);

    if ((f = fopen(receiver_ssl_cert.c_str(), "r")) == NULL) {
      cout << "failed to open file " << receiver_ssl_cert << endl;
      return -1;
    }
    if ((receiver_x = PEM_read_X509(f, NULL, NULL, NULL)) == NULL) {
      cout << "failed to read cert file " << receiver_ssl_cert << endl;
      fclose(f);
      return -1;
    }
    fclose(f);

    if ((f = fopen(receiver_ssl_key.c_str(), "r")) == NULL) {
      cout << "failed to open file " << receiver_ssl_key << endl;
      return -1;
    }
    if ((receiver_priv_key = PEM_read_RSAPrivateKey(f, NULL, NULL, NULL)) == NULL) {
      cout << "failed to read cert file " << receiver_ssl_key << endl;
      fclose(f);
      return -1;
    }
    fclose(f);
    /** ************************ READ FILES **************************** */
    /** **************************************************************** */

    /** **************************************************************** */
    /** *********************** GENERATE KEY *************************** */
    sender_evp_key = X509_get_pubkey(sender_x);

    PEM_write_bio_PUBKEY(bio, sender_evp_key);

    ret = BIO_read(bio, tmp_buf, 2000);

    ret = EVP_BytesToKey(EVP_aes_256_cbc(), EVP_sha1(), NULL, tmp_buf, ret, 5, key, iv);
    if (ret != 32) {
      cout << "Key size is " << ret << " bytes, should be 256 bits" << endl;
      return -1;
    }
    /** *********************** GENERATE KEY *************************** */
    /** **************************************************************** */

    /** **************************************************************** */
    /** *********************** ENCRYPT KEY **************************** */
    sender_pub_key = EVP_PKEY_get1_RSA(sender_evp_key);

    unsigned char *encrypted_key = (unsigned char*)malloc(RSA_size(sender_pub_key) * sizeof(unsigned char));
    if ((ret = RSA_public_encrypt(32, key, encrypted_key, sender_pub_key, RSA_PKCS1_PADDING)) < 0) {
      cout << "RSA_public_encrypt failed: " << ERR_error_string(ERR_get_error(), NULL) << endl;
      return -1;
    }

    if ((ret = RSA_private_encrypt(ret, encrypted_key, encrypted_key, receiver_priv_key, RSA_NO_PADDING)) < 0) {
      cout << "RSA_private_encrypt failed, " << ERR_error_string(ERR_get_error(), NULL) << endl;
      return -1;
    }

    cout << "RSA_private_encrypt ret: " << ret << endl;
    /** *********************** ENCRYPT KEY **************************** */
    /** **************************************************************** */

    /** **************************************************************** */
    /** *********************** DECRYPT KEY **************************** */
    if ((receiver_evp_key = X509_get_pubkey(receiver_x)) == NULL) cout << "receiver_evp_key NULL" << endl;
    if ((receiver_pub_key = EVP_PKEY_get1_RSA(receiver_evp_key)) == NULL) cout << "receiver_pub_key NULL" << endl;

    unsigned char *decrypted_key = (unsigned char*)malloc(RSA_size(receiver_pub_key) * sizeof(unsigned char) + 1);
    if ((ret = RSA_public_decrypt(ret, encrypted_key, decrypted_key, receiver_pub_key, RSA_NO_PADDING)) < 0) {
      cout << "RSA_public_decrypt failed, " << ERR_error_string(ERR_get_error(), NULL) << endl;
      return -1;
    }
    cout << "RSA_public_decrypt ret: " << ret << endl;

    if ((ret = RSA_private_decrypt(ret, decrypted_key, decrypted_key, sender_priv_key, RSA_PKCS1_PADDING)) < 0) {
      cout << "RSA_private_decrypt failed, " << ERR_error_string(ERR_get_error(), NULL) << endl;
      return -1;
    }
    cout << "RSA_private_decrypt ret: " << ret << endl;

    /** *********************** DECRYPT KEY **************************** */
    /** **************************************************************** */

    return 0;
  } 
```

编辑：在将 strlen 更改为加密函数返回的 ret 值后，这变得没问题 但是让我们转到第 3 步。将此代码添加到末尾（就在 return 0; 语句之前）

```
 /** **************************************************************** */
  /** ******************* ANOTHER ENCRYPT KEY ************************ */
  unsigned char *another_encrypted_key = (unsigned char*)malloc(RSA_size(receiver_pub_key) * sizeof(unsigned char));
  if ((ret = RSA_public_encrypt(32, decrypted_key, another_encrypted_key, receiver_pub_key, RSA_PKCS1_PADDING)) < 0) {
    cout << "RSA_public_encrypt failed: " << ERR_error_string(ERR_get_error(), NULL) << endl;
    return -1;
  }

  if ((ret = RSA_private_encrypt(ret, another_encrypted_key, another_encrypted_key, sender_priv_key, RSA_NO_PADDING)) < 0) {
    cout << "RSA_private_encrypt failed, " << ERR_error_string(ERR_get_error(), NULL) << endl;
    return -1;
  }

  /** ******************* ANOTHER ENCRYPT KEY ************************ */
  /** **************************************************************** */ 
```

这导致大约 15% 的机会获得：

```
error:04066084:rsa routines:RSA_EAY_PRIVATE_ENCRYPT:data too large for modulus 
```

在 RSA_private_encrypt 上，这是我努力解决的主要问题（之前的问题只是我的错误）

编辑2：

```
RSA_public_encrypt ret: 128
RSA_size(sender_priv_key): 128
RSA_private_encrypt failed, error:04066084:rsa routines:RSA_EAY_PRIVATE_ENCRYPT:data too large for modulus 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:47:30.230

您的代码滥用`strlen`. 该`strlen`函数只能用于 C 风格的字符串，不能用于任意二进制数据。

文档说明`RSA_private_encrypt`并`RSA_private_decrypt`返回加密/解密数据的长度。但是你调用which*不是*`strlen`C 风格的字符串——它只是一个没有简单结构的任意二进制数据块。`encrypted_key`

 *您不需要调用`strlen`它，因为`RSA_private_encrypt`返回它的长度。而且你*不能*调用`strlen`它，因为它不是一个字符串。

`strlen`很多人对（有时`sizeof`）做什么有错误的印象。它们具有精确定义的语义，您必须理解这些语义才能正确使用这些功能。它们不会神奇地确定任意数据结构有多大。如果您不明确知道某事是 C 风格的字符串，请不要将其传递给任何`str*`函数。

想一想——有什么算法可以`strlen`实现，仅通过查看指向该数据第一个字节的指针就能够确定加密数据块的长度？你期待魔法。*

# android - 获取具有特定权限的应用程序名称

> ID：13026257
> 
> 赞同：3
> 
> 时间：2012-10-23T08:25:31.633
> 
> 标签：android, android-manifest, android-permissions

我想要设备上安装的使用特定权限（如 INTERNET）的所有应用程序的列表。

我正在使用此代码，但无法检索结果，请帮助。

```
private ArrayList<String> getInstalledApps(Context context) {
    ArrayList<String> results = new ArrayList<String>();
    PackageManager packageManager = context.getPackageManager();
    List<PackageInfo> applist = packageManager.getInstalledPackages(0);
    Iterator<PackageInfo> it = applist.iterator();
    while (it.hasNext()) {
        PackageInfo pk = (PackageInfo) it.next();
        if (PackageManager.PERMISSION_GRANTED == packageManager.checkPermission(Manifest.permission.INTERNET, pk.packageName))
            results.add("" + pk.applicationInfo.loadLabel(packageManager));
    }

    for (int i = 0; i <= results.size(); i++) {
        Log.v("app using internet = ", results.toString());
    }

    return results;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:41:00.727

我在 android 2.2 模拟器上尝试了代码，它工作正常。以下是工作代码：

```
private ArrayList<String> getInstalledApps(Context context) {
        ArrayList<String> results = new ArrayList<String>();
        PackageManager packageManager = context.getPackageManager();
        List<PackageInfo> applist = packageManager.getInstalledPackages(0);
        Iterator<PackageInfo> it = applist.iterator();
        while (it.hasNext()) {
            PackageInfo pk = (PackageInfo) it.next();
            if ((pk.applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) != 0) {
                Log.v("system app using internet = ", ""+pk.applicationInfo.loadLabel(packageManager));
                continue;
            }
            if (PackageManager.PERMISSION_GRANTED == packageManager
                    .checkPermission(Manifest.permission.INTERNET,
                            pk.packageName))
                results.add("" + pk.applicationInfo.loadLabel(packageManager));
        }

        Log.v("app using internet = ", results.toString());

        return results;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:51:27.997

我有同样的情况，我使用以下检查解决了它

```
PackageInfo p = packs.get(i);
ApplicationInfo a = p.applicationInfo;
if (PackageManager.PERMISSION_GRANTED != pm.checkPermission(Manifest.permission.INTERNET, p.packageName)) {
continue;
} 
```

packs 变量是一个类数组，其中包含有关已安装应用程序的信息，它由具有当前安装在系统中的所有应用程序信息的对象组成

# android - 使用 Oauth 检索联系人时出错

> ID：13026259
> 
> 赞同：0
> 
> 时间：2012-10-23T08:25:42.677
> 
> 标签：android, oauth

我在连接到[https://www.google.com/m8/feeds/](https://www.google.com/m8/feeds/)网站时遇到问题，它给了我错误 401。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:29:18.557

401 表示您无权查看该页面，因此您提供的任何凭据似乎都不正确。

# iphone - futuretap / FTLocationSimulator 在 iPhone 模拟器中测试当前位置

> ID：13026260
> 
> 赞同：0
> 
> 时间：2012-10-23T08:25:44.753
> 
> 标签：iphone, objective-c, ios

FTLocationSimulator 允许在桌面上的 iPhone 模拟器中模拟核心位置。它发送从描述预定义路线的 KML 文件中获取的虚假核心位置更新。

在这个链接 [https://github.com/futuretap/FTLocationSimulator](https://github.com/futuretap/FTLocationSimulator)

我无法理解在第 6 步和第 7 步中我必须做什么？任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:35:54.130

For 6:
这个常量表示这个类调用你的委托`didUpdateToLocation`方法的频率（以秒为单位）。它是可调节的，如您所见，默认值为 0.3（秒）。

7 人：包含公里数，从库比蒂诺到旧金山的旅行。它足够长，如果您想用自己的旅行进行测试，您可以简单地替换它。

# c# - 如何在 Asp.Net Web API 上实现 Https/SSL 连接？

> ID：13026263
> 
> 赞同：13
> 
> 时间：2012-10-23T08:25:53.770
> 
> 标签：c#, .net, ssl, https, asp.net-web-api

我使用 Asp.net Web API 向客户端（iphone、android、mac os、web、windows、...）提供 api。我想实现一些更安全的API，我阻止其他人理解链接中的参数（以防他们破解链接）

我的问题是：我可以为此使用 Https/SSL 吗？是否足够安全？如果是，我应该在客户端安装任何东西来实现这个吗？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T15:42:17.277

这取决于您将在何处托管 ASP.NET Web API 应用程序。如果您打算将它托管在 IIS 下，除了通过 IIS 配置 SSL 之外，您不需要做任何特别的事情。

IMO 您应该做的一件事是通过您的应用程序强制使用 HTTPS。您可以使用不同的方式（例如 IIS URL 重定向模块等）来实现这一点，但您也可以使用消息处理程序在应用程序级别执行此操作：

```
public class RequireHttpsMessageHandler : DelegatingHandler {

    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken) {

        if (request.RequestUri.Scheme != Uri.UriSchemeHttps) {

            var forbiddenResponse = request.CreateResponse(HttpStatusCode.Forbidden);
            forbiddenResponse.ReasonPhrase = "SSL Required";
            return Task.FromResult<HttpResponseMessage>(forbiddenResponse);
        }

        return base.SendAsync(request, cancellationToken);
    }
} 
```

`HttpClient`也像任何其他 .NET Web 客户端一样支持 SSL。看看这篇文章：http: [//blogs.msdn.com/b/henrikn/archive/2012/08/07/httpclient-httpclienthandler-and-httpwebrequesthandler.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/08/07/httpclient-httpclienthandler-and-httpwebrequesthandler.aspx)

# c# - 退出我的应用程序的所有实例

> ID：13026269
> 
> 赞同：9
> 
> 时间：2012-10-23T08:26:18.230
> 
> 标签：c#, winforms

我有以下功能：

```
private void TakeOverAllScreens()
    {
        int i = 0;
        foreach (Screen s in Screen.AllScreens)
        {

            if (s != Screen.PrimaryScreen)
            {
                i++;
               Process.Start(Application.ExecutablePath, "Screen|" + s.Bounds.X + "|" + s.Bounds.Y + "|" + i);
            }
        }
    } 
```

如您所见，它为 pc 上的每个屏幕创建了我的应用程序的单独实例。

如何创建一个关闭所有这些的退出函数？该功能需要在应用程序的任何实例上工作，而不仅仅是我的“主”实例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T08:33:27.347

您可以终止所有具有相同名称的进程：

```
var current = Process.GetCurrentProcess();
Process.GetProcessesByName(current.ProcessName)
    .Where(t => t.Id != current.Id)
    .ToList()
    .ForEach(t => t.Kill());

current.Kill(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T08:28:34.547

只是你必须跟踪打开的进程：

```
List<Process> opened = new List<Process>();

private void TakeOverAllScreens()
    {
        int i = 0;
        foreach (Screen s in Screen.AllScreens)
        {

            if (s != Screen.PrimaryScreen)
            {
                i++;
               opened.Add(Process.Start(Application.ExecutablePath, "Screen|" + s.Bounds.X + "|" + s.Bounds.Y + "|" + i));
            }
        }
    } 
```

然后：

```
private void terminateAll()
{
      foreach (var p in opened) p.Kill();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T08:40:15.907

### 如何关闭应用程序？

有三个通用选项：

*   直接杀了
*   假设它有一个主窗口并且它的行为是常规的，`WM_CLOSE`通过 P/Invoking 向该窗口发送一条消息[`SendMessage`](http://msdn.microsoft.com/en-us/library/ms644950%28VS.85%29.aspx)
*   假设它想合作，使用自定义通信通道告诉它终止自己

### 您应该如何关闭应用程序？

彻底杀死一个进程是严厉的，除非您知道该进程在终止时不会做任何敏感的事情，否则永远不要尝试。通常这是最后的手段。

告诉它关闭它的主窗口需要你首先了解那个窗口`HWND`是什么。您可以通过遍历顶级窗口列表或让生成的进程以某种方式将其传达给您来做到这一点。它还假设当您要求关闭其主窗口时，另一个进程将决定自行终止（实际上它可以决定做任何事情，包括完全忽略该消息）。这种方法是合理的第一次尝试，它通常适用于不受您控制的进程——尽管您必须自己找到窗口。

使用自定义通信通道可以让您完全控制发生的事情以及可以通过多种方式实现它的方式，但这种方法涉及编写最多的代码，并且需要您对两个应用程序都有源代码访问权限。

### 结论

**这取决于**. 如果你 1000% 确定终止进程不会破坏任何东西，那么这将是一个快速而肮脏的解决方案；否则，您需要使用两种“礼貌”方法之一。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T08:33:38.477

将所有打开的进程放在列表中，这样你就可以一个一个地杀死进程。看下面的代码：

```
private void TakeOverAllScreens()
{
    int i = 0;
    List<Process> allProcesses = new List<Process>();
    foreach (Screen s in Screen.AllScreens)
    {
        if (s != Screen.PrimaryScreen)
        {
            i++;
           allProcesses.Add(Process.Start(Application.ExecutablePath, "Screen|" + s.Bounds.X + "|" + s.Bounds.Y + "|" + i));
        }
    }

    foreach (Process proc in allProcesses)
    {
        proc.Kill();
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T08:35:10.577

试试这个功能：

```
void ExitAll(string processName)
{
    foreach(Process p in Process.GetProcesses())
    {
        if (p.ProcessName.ToLower().Equals(processName.ToLower()))
            p.Kill();
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-23T08:36:14.723

我总是执行命令

```
tskill notepad // to kill all instances of notepad 
```

从应用程序内部，它可以像

```
Process.Start("cmd /k tskill " + Process.GetCurrentProcess().ProcessName) 
```

# javascript - 带有图像对齐的 Javascript 自定义警报框

> ID：13026278
> 
> 赞同：0
> 
> 时间：2012-10-23T08:26:43.487
> 
> 标签：javascript, jquery, html, ajax

我在 Javascript 中创建了自定义警报框。我添加了带有图像的文本。但它不是探针对齐。它来了这样的事情。 ![在此处输入图像描述](../Images/3ecfeea0e5209b647d2ba4150c524094.png)

我正在尝试使用同一行添加正确的标记和文本，我该如何实现这一点。谁能帮帮我吗。我在下面添加了我的自定义警报框功能。

```
function createCustomAlert(txt, string_url,fd) {
        // shortcut reference to the document object
        d = document;

        // if the modalContainer object already exists in the DOM, bail out.
        if (d.getElementById("modalContainer")) return;

        // create the modalContainer div as a child of the BODY element
        mObj = d.getElementsByTagName("body")[0].appendChild(d.createElement("div"));
        mObj.id = "modalContainer";
        // make sure its as tall as it needs to be to overlay all the content on the page
        mObj.style.height = document.documentElement.scrollHeight + "px";

        // create the DIV that will be the alert 
        alertObj = mObj.appendChild(d.createElement("div"));
        alertObj.id = "alertBox";
        // MSIE doesnt treat position:fixed correctly, so this compensates for positioning the alert
        if (d.all && !window.opera) alertObj.style.top = document.documentElement.scrollTop + "px";
        // center the alert box
        alertObj.style.left = (d.documentElement.scrollWidth - alertObj.offsetWidth) / 2 + "px";

        // create an H1 element as the title bar
        h1 = alertObj.appendChild(d.createElement("h1"));
        h1.appendChild(d.createTextNode(ALERT_TITLE));
btn2 = alertObj.appendChild(d.createElement("img"));
        btn2.id = "fd";
        btn2.src = fd;
        // create a paragraph element to contain the txt argument
        msg = alertObj.appendChild(d.createElement("p"));
        msg.innerHTML = txt;

        // create an anchor element to use as the confirmation button.
        //btn = alertObj.appendChild(d.createElement("a"));
        //btn.id = "closeBtn";
        //btn.appendChild(d.createTextNode(ALERT_BUTTON_TEXT));
        //btn.href = "";

        btn = alertObj.appendChild(d.createElement("img"));
        btn.id = "closeBtn";
        btn.src = 'new-go-next2.png';
        btn.href="#ss";
        //btn.height="30px";
        //btn.width="30px";
        //btn.href="#";

        // set up the onclick event to remove the alert when the anchor is clicked
        btn.onclick = function () { removeCustomAlert(); window.location = string_url; return false; }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:40:43.303

而是创建具有两列的 div 元素创建表。第一个将包含 OK 的“图像”，第二个将包含您的“文本”。检查这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:50:51.610

好吧，是的，创建表格将是解决您的问题的好方法，顺便说一句，您还可以尝试一些具有正确位置的内部 div 以及具有正确浮动属性的元素

# twitter-bootstrap - Twitter bootstrap - 流体网格的计算较少，但具有固定的 30px 装订线

> ID：13026279
> 
> 赞同：1
> 
> 时间：2012-10-23T08:26:45.537
> 
> 标签：twitter-bootstrap, fixed, fluid-layout

是否可以更改 variables.less 中的流体网格计算以使网格是流体的，但排水沟的宽度是固定的？

我查看了计算，但不确定如何从每个流体跨度中删除 30px 的宽度。

任何指向正确方向的指针都将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:43:05.870

检查您的`_variables.less`文件 - 在文件的底部，您应该能够编辑您要查找的内容。

尝试这两个链接，以了解计算：

[自举流体行宽](https://stackoverflow.com/questions/12380384/bootstrap-fluid-row-width)

[http://coding.smashingmagazine.com/2009/06/09/smart-fixes-for-fluid-layouts/](http://coding.smashingmagazine.com/2009/06/09/smart-fixes-for-fluid-layouts/)

希望这个对你有帮助。

**编辑：**

这可能会有所帮助：

[http://en.wikipedia.org/wiki/Cross-multiplication](http://en.wikipedia.org/wiki/Cross-multiplication)

假设您使用的宽度为 940 像素，总装订线为 30 像素。计算 30px 的 940px 是......

`940 to 100% equals 30 to x%`->`x = 3.191489361702128`那是你的阴沟。

如果您使用 12 列，则您有 11 个排水沟，它们使用 330 像素的空间，为您的列留下 610 像素。所以每个 col 应该是`610px / 12`-> `50,8...px`。再次进行计算：

`940 to 100% equals 50,8 to x%`->`x = 6.170212765957447`对于每一列。

当然，对其他两个（或更多）视口执行相同的操作。

希望我是对的...

**计算示例：**

`(940px / 100) = (30px / x) // multiply with x`->

`((940px * x) / 100) = (30px) // multiply with 100`->

`(940px * x) = (3000px) // devide with 940px`->

`x = (3000px / 940px) // cutting the px`

`x = 3.191489361702128`

注意在你的变量中使用点`.`而不是逗号。`,`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T08:33:28.310

另一种解决方案是：向您的元素添加一个额外的类，例如`.my-xtra-margin { margin-left: 30px; }`（确保在引导定义之后包含它）或直接作为样式定义添加到您的标签中。

但是，我认为这总是会弄乱您的布局，因为列需要一定百分比的可用宽度，并且您可以使用固定的装订线`too much`。

# android - 使用 Android 下载 ZIP 文件

> ID：13026281
> 
> 赞同：-2
> 
> 时间：2012-10-23T08:26:54.740
> 
> 标签：android, download, runtime-error

我正在尝试从服务器下载 zip 文件。为此，我使用以下代码：

```
 String path = Environment.getExternalStorageDirectory().toString() + "/KaLePro/";
        StartscreenModel sm = StartscreenModel.getInstance();
        //TODO FIX: unkown error! Bring usb-cable to find out!
        try {
            URL url = new URL(urlString);
            System.out.println("Connecting to " + url);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setRequestMethod("GET");
            connection.setDoOutput(true);
            connection.connect();
            int fileLength = connection.getContentLength();

            File PATH = new File(path + "import/");
            if (!PATH.exists()) {
                PATH.mkdirs();
            }

            File outputFile = new File(PATH, "tmp.zip");

            InputStream input = connection.getInputStream();
            OutputStream output = new FileOutputStream(outputFile);

            byte data[] = new byte[1024];
            long total = 0;
            int count;
            sm.setSubMax(100);
            while ((count = input.read(data)) != -1) {
                total += count;
                sm.setSubStep((int) (total * 100 / fileLength));
                output.write(data, 0, count);
            }

            output.flush();
            output.close();
            input.close();
            Toast.makeText(Booklist.this, "Download fertig.", Toast.LENGTH_SHORT).show();
        } catch (MalformedURLException e) {
            Toast.makeText(Booklist.this, "Keine gültige URL", Toast.LENGTH_SHORT).show();
        } catch (IOException e) {
            Toast.makeText(Booklist.this, "Keine Verbindung zur URL", Toast.LENGTH_SHORT).show();
        } 
```

但是当我尝试下载文件时，我收到以下 Logcat 错误：

```
10-23 10:22:37.867: E/AndroidRuntime(21490): FATAL EXCEPTION: main
10-23 10:22:37.867: E/AndroidRuntime(21490): android.os.NetworkOnMainThreadException
10-23 10:22:37.867: E/AndroidRuntime(21490):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.io.IoBridge.connect(IoBridge.java:112)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at java.net.Socket.connect(Socket.java:842)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:76)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at de.isogon.kalepro.activities.Booklist$2.onDownload(Booklist.java:194)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at de.isogon.kalepro.views.dialogs.DialogDownload$2.onClick(DialogDownload.java:76)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at android.view.View.performClick(View.java:4211)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at android.view.View$PerformClick.run(View.java:17267)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at android.os.Handler.handleCallback(Handler.java:615)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at android.os.Looper.loop(Looper.java:137)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at android.app.ActivityThread.main(ActivityThread.java:4898)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at java.lang.reflect.Method.invokeNative(Native Method)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at java.lang.reflect.Method.invoke(Method.java:511)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
10-23 10:22:37.867: E/AndroidRuntime(21490):    at dalvik.system.NativeStart.main(Native Method) 
```

其中 de.isogon.kalepro.activities.Booklist$2.onDownload(Booklist.java:194) 链接到 connection.connect(); 上面的代码。

我的清单权限如下：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.GET_TASKS"/>
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

我已经测试了很多下载代码示例 - 所有似乎都产生几乎相同的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:29:50.210

从您的 Logcat 中可以看到：`10-23 10:22:37.867: E/AndroidRuntime(21490): android.os.NetworkOnMainThreadException`

这不起作用的原因是因为您为此使用了 UI 线程。尝试将下载添加到`AsyncTask`在单独线程上运行的 ir。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:37:37.870

请不要在主 UI 线程中编写网络调用，为此使用另一个线程，它将解决您的问题，请参阅下面的链接以获取更多信息。

[为什么冰淇淋三明治会使您的应用程序崩溃](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:28:19.077

我和这个班级一起工作

```
public class ZipUtility {
    public static final void zipDirectory(File directory, File zip)
            throws IOException {
        ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(zip));
        zip(directory, directory, zos);
        zos.close();
    }

    private static final void zip(File directory, File base, ZipOutputStream zos)
            throws IOException {
        File[] files = directory.listFiles();
        byte[] buffer = new byte[8192];
        int read = 0;
        for (int i = 0, n = files.length; i < n; i++) {
            if (files[i].isDirectory()) {
                zip(files[i], base, zos);
            } else {
                FileInputStream in = new FileInputStream(files[i]);
                ZipEntry entry = new ZipEntry(files[i].getPath().substring(
                        base.getPath().length() + 1));
                zos.putNextEntry(entry);
                while (-1 != (read = in.read(buffer))) {
                    zos.write(buffer, 0, read);
                }
                in.close();
            }
        }
    }

    public static final void unzip(File zip, File extractTo) throws IOException {
        ZipFile archive = new ZipFile(zip);
        Enumeration e = archive.entries();
        while (e.hasMoreElements()) {
            ZipEntry entry = (ZipEntry) e.nextElement();
            File file = new File(extractTo, entry.getName());
            if (entry.isDirectory() && !file.exists()) {
                file.mkdirs();
            } else {
                if (!file.getParentFile().exists()) {
                    file.getParentFile().mkdirs();
                }

                InputStream in = archive.getInputStream(entry);
                BufferedOutputStream out = new BufferedOutputStream(
                        new FileOutputStream(file));

                byte[] buffer = new byte[8192];
                int read;

                while (-1 != (read = in.read(buffer))) {
                    out.write(buffer, 0, read);
                }

                in.close();
                out.close();
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T08:30:35.850

NetworkOnMainThreadException 是因为您试图在主线程上进行网络操作。您应该制作一个 AsyncTask 并像这样下载文件

应该相当简单，您的大部分代码都可以放在 asyncTask 的 doInBackground 中

# javascript - 仅用于单行文本字段的代码镜像？

> ID：13026285
> 
> 赞同：12
> 
> 时间：2012-10-23T08:27:14.100
> 
> 标签：javascript, codemirror

我有一个单行文本字段。（输入类型='文本'）

我没有文本区域。

此文本字段允许用户在简单的 DSL 中输入小字符串。为了给你一个想法，它们看起来像这样：

*   从米兰到伦敦
*   从意大利（罗马，佛罗伦萨）到英国

我正在考虑用 codemirror 替换这个文本字段

我的问题是：

*   对一行文本区域使用代码镜像是个好主意吗？
*   有人做过吗？
*   还有其他方法可以使文本字段更加“丰富多彩”吗？

谢谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-06T19:46:23.237

好吧，有一种方法可以使用 CodeMirror 的丰富功能制作单行编辑器。首先，您必须添加一个功能齐全的 CodeMirror 对象（使用 textarea）。

假设你有`var cm = CodeMirror(...)`. （使用`value: ""`）。然后做

```
cm.setSize(200, cm.defaultTextHeight() + 2 * 4);
// 200 is the preferable width of text field in pixels,
// 4 is default CM padding (which depends on the theme you're using)

// now disallow adding newlines in the following simple way
cm.on("beforeChange", function(instance, change) {
    var newtext = change.text.join("").replace(/\n/g, ""); // remove ALL \n !
    change.update(change.from, change.to, [newtext]);
    return true;
});

// and then hide ugly horizontal scrollbar
cm.on("change", function(instance, change) {
    $(".CodeMirror-hscrollbar").css('display', 'none');
    // (!) this code is using jQuery and the selector is quite imperfect if
    // you're using more than one CodeMirror on your page. you're free to
    // change it appealing to your page structure.
});

// the following line fixes a bug I've encountered in CodeMirror 3.1
$(".CodeMirror-scroll").css('overflow', 'hidden');
// jQuery again! be careful with selector or move this to .css file 
```

这对我来说很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T11:14:19.087

当有人按下键时，您可以在该字段上运行正则表达式。

当事件发生时，您对 contentEditable 元素的内容执行 str.replace，该元素大约是一行高，有点像这样：

```
var r = /from\s+(\w+)\s+to\s+(\w+)/gi
s.replace(r, 'from <em>$1</em> to <em class="to">$2</em>'); 
```

对于这种方法，您不需要代码编辑器，您可以使用这些类设置标签的样式...

简单的

# rally - 迭代范围变更

> ID：13026286
> 
> 赞同：1
> 
> 时间：2012-10-23T08:27:18.230
> 
> 标签：rally

我想构建一个自定义应用程序，它将向我展示迭代中的范围变化。所以我会有 3 种类型的故事：移动、添加或拆分。结果应该是本次迭代中的所有故事及其旁边的类型。我在 SDK API 中看不到任何东西来帮助我根据故事类型识别故事。

我怎样才能做到这一点？有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:00:58.963

您可能希望从查看[Release Scope Change Catalog 应用程序](http://www.rallydev.com/help/release-scope-change)开始。源代码在[这里](https://rally1.rallydev.com/slm/appdefinition/ReleaseScopeChangeApp.html)。该应用程序解析工件修订历史以查找计划/取消计划事件。虽然这不包括您在拆分故事方面寻找的内容，但它将捕获您正在寻找的大部分内容。将其调整到迭代而不是发布的范围将非常容易。

值得一提的是，在 Lookback API（尚未普遍可用）中，这种应用程序将更容易编码，因为在特定时间查询范围内的点将是一个 REST 查询的问题，使用无需解析修订历史。如果您是参与 Lookback 的预发布 Alpha 客户之一 - 我鼓励您肯定探索这条路线。

# c# - 为什么我的解决方案是在 Visual Studio 中构建的，而不是使用 msbuild 从命令行构建的？

> ID：13026288
> 
> 赞同：5
> 
> 时间：2012-10-23T08:27:19.407
> 
> 标签：c#, visual-studio-2010, msbuild

如果有人知道从哪里开始解决这个问题，我很想听听。我刚刚将我的项目升级到 VS2012、Wix 3.6 和 .NET 4.5，每当我尝试使用命令行 (msbuild) 构建我的项目时，我都会遇到 2000 个错误：http: [//i.imgur.com/WSi7X.png](http://i.imgur.com/WSi7X.png)

它从 Visual Studio 构建得很好，但是当从命令行调用 msbuild 时出现一堆错误，如下所示： http: [//pastie.org/5102451](http://pastie.org/5102451)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:32:54.173

您应该确保在 msbuild 文件中使用正确的工具版本：

[从文件内部强制使用 MSBuild 的工具版本？](https://stackoverflow.com/questions/2819781/force-a-tool-version-with-msbuild-from-inside-the-file)

情况可能并非如此，但我经常发现在迁移到新的 .net 运行时并使用 msbuild 时，这会使团队中的其他人绊倒。

== 编辑 ==

抱歉刚刚注意到您是在命令行上直接运行它，而不是通过一些构建脚本，所以上述解决方案可能不是 100% 相关的，但可能仍然是正在执行的 MSBuild 版本无法处理您的 .net 运行时，因为只需要 1 个项目构建失败，然后所有相关项目都会失败，从而产生 1000 多个随机错误，而实际上只有 1 个有意义的错误需要解决。

# delphi - 无法选择过程作为事件 OnMouseDown 的选项

> ID：13026294
> 
> 赞同：2
> 
> 时间：2012-10-23T08:27:38.140
> 
> 标签：delphi, delphi-xe2

当我在对象检查器/事件选项卡中单击 OnMouseDown 时，我有一个形状。我希望它执行“SelectMessage”程序，但它没有显示为选项。此外，如果我手动输入“SelectMessage”，我会收到错误属性和方法 Selectmessage 不兼容。

选择消息

```
procedure TFZone1Mod7.Selectmessage(sender: TObject);
var
  ShapeOrderNo: Integer;
begin
  if TryStrToInt(copy(TShape(Sender).Name,6,MaxInt),ShapeOrderNo) then
    begin
      LookUpMessage(ShapeOrderNo);
    end;
end; 
```

如果我做

```
procedure TFZone1Mod7.Shape1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
   selectmessage(sender);
end; 
```

那么它将起作用。但如果可以的话，更容易从事件中进行选择。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:33:54.623

an 的事件处理程序`OnMouseEvent`必须具有以下形式的签名：

```
procedure (Sender: TObject; Button: TMouseButton; 
    Shift: TShiftState; X, Y: Integer) of object; 
```

该组件将调用您的事件处理程序并传递所有这些参数，并且您的事件处理程序必须是预期的形式。

你无法控制这一点。该组件为其事件处理程序具有预先确定的硬编码形式。您只需要适应。您当前的解决方案是正确的。

话虽如此，`SelectMessage`只有在通过 a 时才能工作`TShape`。所以以这种方式声明函数：

```
procedure TFZone1Mod7.SelectMessage(Shape: TShape);
var
  ShapeOrderNo: Integer;
begin
  if TryStrToInt(copy(Shape.Name,6,MaxInt), ShapeOrderNo) then
    LookUpMessage(ShapeOrderNo);
end; 
```

并这样称呼它：

```
procedure TFZone1Mod7.Shape1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  SelectMessage(Sender as TShape);
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T08:34:00.060

我的 Delphi 知识有点生疏，但 AFAIR 的签名需要与 IDE 生成的方法相匹配，所以：

```
procedure TFZone1Mod7.Selectmessage(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
var
  ShapeOrderNo: Integer;
begin
  if TryStrToInt(copy(TShape(Sender).Name,6,MaxInt),ShapeOrderNo) then
    begin
      LookUpMessage(ShapeOrderNo);
    end;
end; 
```

# php - 如何在drupal 7视图中按角色和用户ID显示用户评论

> ID：13026300
> 
> 赞同：2
> 
> 时间：2012-10-23T08:27:58.563
> 
> 标签：php, mysql, drupal, views

我有一个节点列表。在每个节点下，我都打开了评论。普通用户可以评论，特殊用户可以回复评论。

我希望普通用户在查看此类节点和特殊角色的响应时只看到他们的评论。

我一直在尝试使用视图，但使用当前用户的过滤器或上下文参数：uid 仅显示用户的评论，而忽略了管理员/编辑器等的响应:(

感谢任何指针。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T10:57:25.230

您需要类似于comment_uid = current_uid 或comment_users_role = special_role 的用户逻辑。

这里的问题是很难将 OR 逻辑与上下文过滤器一起使用。[这篇文章](https://drupal.stackexchange.com/questions/32019/how-to-use-a-views-contextual-filter-or)正在讨论该主题，选择的答案指向[此页面](https://drupal.org/node/357082)，该页面有一个补丁，允许您将值从上下文过滤器传递到“普通过滤器”。

这当然是探索的一种途径，另一种选择是用户 hook_views_query_alter 在执行之前手动更改您的查询。有关如何执行此操作的示例，请参见[这篇文章](https://stackoverflow.com/questions/13531828/drupal-7-views-contextual-filters-or-logic)。

# c# - c# 中的 Selenium 2 OnException 方法

> ID：13026306
> 
> 赞同：0
> 
> 时间：2012-10-23T08:28:28.463
> 
> 标签：c#, selenium-webdriver, onexception

我通过 Java 代码移植到 c#。我想用 c# 重写以下 Java 代码。提前致谢 ：）

```
// Called whenever an exception would be thrown.
    public void onException(java.lang.Throwable throwable, WebDriver driver){
        System.out.println("onException' Called whenever an exception would be thrown ...");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:40:39.603

一个喜欢的翻译如下：

```
public void OnException(System.Exception exception, IWebDriver driver)
{
    Console.WriteLine("OnException' Called whenever an exception would be thrown ...");
} 
```

# actionscript-3 - 如何使用 Flex 中的 Enter 键从组合框的下拉列表中选择一个项目？

> ID：13026310
> 
> 赞同：0
> 
> 时间：2012-10-23T08:28:34.923
> 
> 标签：actionscript-3, apache-flex, flash-builder4.5, flashbuilder4

我想从带有回车键的组合框中选择项目，是任何内置的组合框事件而不是按键事件。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:01:04.307

您可以使用各种事件来捕捉这一点。

例如，所有 Spark 列表（包括 DropDownList 和 ComboBox）都会在所选索引更改时调度[IndexChangeEvent.CHANGE 。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/events/IndexChangeEvent.html#CHANGE)此事件包含有关所选索引 ( `newIndex`) 和刚刚取消选择的索引 ( ) 的信息`oldIndex`。

还调度了一个更通用的事件，所有“输入”组件在其值更改时调度的事件：[FlexEvent.VALUE_COMMIT](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/events/FlexEvent.html#VALUE_COMMIT)。这不携带任何其他信息。

无论是通过鼠标单击还是通过键盘选择来选择项目，都会调度这两个事件。

也许您只想捕获通过键盘选择项目的事件。在这种情况下，您可以侦听[FlexEvent.ENTER](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/events/FlexEvent.html#ENTER)，它仅在按下 Enter 按钮时调度；或者对于更通用的[KeyboardEvent.KEY_UP](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/KeyboardEvent.html#KEY_UP)，在这种情况下，您必须手动确定按下的键是否是回车键。

# c++ - 将 <>'' 翻译成 sql_oracle

> ID：13026330
> 
> 赞同：1
> 
> 时间：2012-10-23T08:29:55.813
> 
> 标签：c++, c++builder-5

我将一些代码从 sql 重写为 sql_oracle，但我找不到 <>'' 的解决方案。

!= '' 将不起作用。

如果我可以翻译 <>'' 它应该可以工作。我已经用谷歌搜索了很多，但找不到任何 awnsers .. 我在编码方面没有那么丰富的经验，所以也许这里有人可以帮助我。

这是sql代码

```
 SQL_genericp2.Insert(
            "from   tsdsmd  trip                            "
            "       left outer join                         "
            "       (                                       "
            "       select  tsroma.* from tsroma            "
            "       where   tsroma.tstohn <> ''             "
            "       )       leg                             "
            "       on      trip.dosvlg = leg.tsrido        "
            "       left outer join dosier shipment         "
            "       on      leg.dosvlg = shipment.dosvlg    "
            "       left outer join                         "
            "       (                                       "
            "       select  * from tsdsco                   "
            "       where   laloin = 1 and volgnr = 1       "
            "       )       tsdsco1                         "
            "       on      leg.dosvlg = tsdsco1.dosvlg     "
            "       left outer join                         "
            "       (                                       "
            "       select  * from tsdsco                   "
            "       where   laloin = 2 and volgnr = 1       "
            "       )       tsdsco2                         "
            "       on      leg.dosvlg = tsdsco2.dosvlg     "
            ,1);
    </i> 
```

这是 sql_orcale 代码：

```
 SQL_Oracle_genericp2.Insert(
            "from                                                       "
            "        \"dkf_tsdsmd\"                                                             trip        "
            "                                                       "
            "        left outer join                                            "
            "        (select  * from \"dkf_tsroma\" where \"tstohn\" != '')                     leg     "
            "        on      trip.\"dosvlg\" = leg.\"tsrido\"                               "
            "                                                       "
            "   left outer join                                             "
            "        \"dkf_tsdsmd\"                                                                 shipment    "
            "        on      leg.\"dosvlg\" = shipment.\"dosvlg\"                               "
            "                                                       "
            "   left outer join                                             "
            "   (                                                   "
            "   select                                                  "
            "       \"fileNumber\"                                  \"dosvlg\", "
            "       max(case when \"addressRole\" = 0 then \"relationSearchname\"   else null end)  \"zoek0\",  "
            "       max(case when \"addressRole\" = 0 then \"nameLine1\"        else null end)  \"tsnam10\",    "
            "       max(case when \"addressRole\" = 0 then \"streetLine1\"      else null end)  \"tsadr10\",    "
            "       max(case when \"addressRole\" = 0 then \"countryCode\"      else null end)  \"land0\",  "
            "       max(case when \"addressRole\" = 0 then \"placeName\"        else null end)  \"tscity0\",    "
            "       max(case when \"addressRole\" = 0 then \"postcode\"     else null end)  \"postun0\",    "
            "                                                       "
            "       max(case when \"addressRole\" = 1 then \"relationSearchname\"   else null end)  \"zoek1\",  "
            "       max(case when \"addressRole\" = 1 then \"nameLine1\"        else null end)  \"tsnam11\",    "
            "       max(case when \"addressRole\" = 1 then \"streetLine1\"      else null end)  \"tsadr11\",    "
            "       max(case when \"addressRole\" = 1 then \"countryCode\"      else null end)  \"land1\",  "
            "       max(case when \"addressRole\" = 1 then \"placeName\"        else null end)  \"tscity1\",    "
            "       max(case when \"addressRole\" = 1 then \"postcode\"     else null end)  \"postun1\",    "
            "                                                       "
            "       max(case when \"addressRole\" = 3 then \"relationSearchname\"   else null end)  \"zoek3\",  "
            "       max(case when \"addressRole\" = 3 then \"nameLine1\"        else null end)  \"tsnam13\",    "
            "       max(case when \"addressRole\" = 3 then \"streetLine1\"      else null end)  \"tsadr13\",    "
            "       max(case when \"addressRole\" = 3 then \"countryCode\"      else null end)  \"land3\",  "
            "       max(case when \"addressRole\" = 3 then \"placeName\"        else null end)  \"tscity3\",    "
            "       max(case when \"addressRole\" = 3 then \"postcode\"     else null end)  \"postun3\",    "
            "                                                       "
            "       max(case when \"addressRole\" = 4 then \"relationSearchname\"   else null end)  \"zoek4\",  "
            "       max(case when \"addressRole\" = 4 then \"nameLine1\"        else null end)  \"tsnam14\",    "
            "       max(case when \"addressRole\" = 4 then \"streetLine1\"      else null end)  \"tsadr14\",    "
            "       max(case when \"addressRole\" = 4 then \"countryCode\"      else null end)  \"land4\",  "
            "       max(case when \"addressRole\" = 4 then \"placeName\"        else null end)  \"tscity4\",    "
            "       max(case when \"addressRole\" = 4 then \"postcode\"     else null end)  \"postun4\" "
            "   from                                                    "
            "       \"dkf_v_cw_fileAddress\"                                    "
            "   group by                                                "
            "       \"fileNumber\"                                          "
            "   )                                           tsdnaw      "
            "   on  leg.\"dosvlg\" = tsdnaw.\"dosvlg\"                              "
            "                                                       "
            "   left outer join                                             "
            "   (                                                   "
            "   select                                                  "
            "       \"dkf_tsdsco\".\"dosvlg\"                           \"dosvlg\", "
            "       max(case when \"laloin\" = 1 and \"volgnr\" = 1 then \"tsfrti\" else null end)  \"tsfrti1\",    "
            "       max(case when \"laloin\" = 1 and \"volgnr\" = 1 then \"tsttim\" else null end)  \"tsttim1\",    "
            "       max(case when \"laloin\" = 2 and \"volgnr\" = 1 then \"tsfrti\" else null end)  \"tsfrti2\",    "
            "       max(case when \"laloin\" = 2 and \"volgnr\" = 1 then \"tsttim\" else null end)  \"tsttim2\" "
            "   from                                                    "
            "       \"dkf_tsdsco\"                                          "
            "   group by                                                "
            "       \"dosvlg\"                                          "
            "   )                                           tsdsco      "
            "       on  leg.\"dosvlg\" = tsdsco.\"dosvlg\"                              "
            ,1); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:32:29.500

```
tsroma.tstohn <> '' 
```

Oracle 将空字符串视为 NULL。所以在这种情况下，你必须把它写成

```
tsroma.tstohn IS NOT NULL 
```

您还需要考虑空字符串变为 NULL 是否对您的数据模型来说是一个问题。

# java - 冲突的传递依赖是 Maven 中的一个严重问题吗？

> ID：13026332
> 
> 赞同：10
> 
> 时间：2012-10-23T08:30:04.533
> 
> 标签：java, maven, clojure, dependencies, dependency-management

我有一个项目 X，它在依赖层次结构中显示了很多相互冲突的依赖关系（如 Eclipse 的依赖层次结构视图中所示）。我看到很多东西，比如：

```
clojure: 1.3.0 (omitted for conflict with 1.4.0) [compile] 
```

这通常是因为 X 使用的两个库指定了某个其他库的两个不同版本 - 即由于共享传递依赖关系而发生冲突。在很多情况下，冲突发生在我无法直接控制的第 3 方库中。

幸运的是，现在一切都构建并运行良好，但我担心这种情况是否会在未来引起问题。

这是我应该担心的问题吗？如果是，我应该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T08:47:02.287

是的，这样的冲突可能很严重。

在比较一个版本和另一个版本时，您不知道依赖项中是否存在不兼容的变化（比较次要版本时不应该存在，但谁知道具体呢？）。或者，某些依赖项可能依赖于另一个依赖项的错误行为。如果这个bug已经修复了怎么办？取决于错误的那个模块将无法正确执行。

您应该排除冲突的依赖项（更有可能排除较低版本）。对于您输入的每个排除项，您必须检查排除的版本与当前使用的版本之间是否存在不兼容的更改。如果是这种情况，您必须检查依赖于该模块的依赖项，如果它们受到此类更改的影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T08:47:12.993

大多数时候这应该没问题，如果 maven 选择了较新的版本。

您应该开始担心是否与主要版本（第一个数字）的差异发生冲突，或者是否省略了较新的版本。单元测试有助于解决这些问题，但 eclipse 项目和 maven 依赖项通常以微妙的方式不同（调试范围等）。唯一真正的保护似乎是集成测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T12:12:02.270

这*可能*是一个严重的问题，因为您永远无法确定到底发生了什么，这很糟糕。我认为使用 maven 配置的重点是明确说明会发生什么以及使用的依赖项是什么。

至于您应该怎么做，请参阅我的[另一个答案](https://stackoverflow.com/a/12995780/365237)-您应该通过明确配置要使用的版本和要省略的版本来推动修复它们，并且[maven-enforcer 插件可以使用](http://maven.apache.org/plugins/maven-enforcer-plugin/)[DependencyConvergence 规则](http://maven.apache.org/enforcer/enforcer-rules/dependencyConvergence.html)使其变得更容易。这是为了保护您免受冲突的传递依赖项的影响。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-05T09:15:03.903

是的，这是一个问题。通常不同的版本包含相同的类。最后，java 只加载该类的一个版本。它可能是旧版本或新版本。它可能会导致运行时错误，例如神秘的 NoSuchMethodError、ClassNotFoundExceptions 等。

# php - 从 MySQL 表中获取最近的日期

> ID：13026334
> 
> 赞同：4
> 
> 时间：2012-10-23T08:30:17.593
> 
> 标签：php, mysql, sql, date

我需要从 MySQL 表中获取最接近当前日期的日期。

这是我的桌子：

```
id        | date          | name
1         | 2012-10-29    | test
2         | 2009-11-31    | test 
```

因此，如果今天运行查询，它将返回`1 | 2012-10-29 | test`

任何帮助深表感谢。谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-23T08:32:54.243

```
SELECT 
  * 
FROM 
  your_table 
ORDER BY 
  ABS(DATEDIFF(NOW(), `date`))
LIMIT 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:32:43.307

```
select top 1 date from table
where date > now()
order by date desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:33:52.697

```
SELECT * FROM `your_table` WHERE ABS(DATEDIFF(`date`, NOW())); 
```

回报：

```
'1', '2012-10-29 00:00:00', 'test' 
```

# heroku - 如何解决“heroku：找不到命令”

> ID：13026337
> 
> 赞同：0
> 
> 时间：2012-10-23T08:30:24.587
> 
> 标签：heroku

输入“heroku create”命令时出现问题

```
(venv)muzaffar@vaio:~/hellodjango$  heroku create
heroku: command not found 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:41:30.620

您必须下载并安装[heroku 工具带](https://toolbelt.heroku.com/)，并确保`heroku`在您的`$PATH`.

Heroku 通常已安装，`/usr/local/heroku`因此您必须添加`/usr/local/heroku/bin`到`PATH`环境变量中。

您可以通过运行检查您的安装

```
 $ which heroku
 /usr/local/heroku/bin/heroku 
```

这会检查您`PATH`是否有一个名为“heroku”的可执行文件，在我的情况下，它位于`/usr/local/heroku/bin/heroku`

# c# - 真正基本的起订量示例失败

> ID：13026340
> 
> 赞同：4
> 
> 时间：2012-10-23T08:30:33.367
> 
> 标签：c#, .net, unit-testing, nunit, moq

我正在尝试起订量，但我陷入了一个非常基本的例子。我想模拟一个非常简单的接口 IInput：

```
namespace Example
{
    public interface IInput
    {
        int SomeProperty { get; set; }
    }
} 
```

这似乎是一项非常容易的工作。但是，当我尝试在以下测试代码中模拟它时出现编译错误：

```
using Moq;
using NUnit.Framework;

namespace FirstEniro._Test
{

    [TestFixture]
    class TestFirstClass
    {
        [Test]
        public void TestConstructionOk()
        {
            var mock = new Mock<IInput>();
            mock.Setup(r => r.SomeProperty).Returns(3);

            var x = new FirstClass(mock);

            Assert.That(x, Is.EqualTo(3));
        }
    }
} 
```

编译器说“无法转换`Moq.Mock<Example.IInput>`为`<Example.IInput>`。我看不出我做错了什么。请帮助我

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T08:32:06.647

使用`Object`模拟的属性来检索模拟对象的实例。

```
 var x = new FirstClass(mock.Object); 
```

在 Moq 框架`Mock`中不是您正在模拟的实例（如在 Rhino Mocks 中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T08:31:44.763

使用实例上的`Object`属性`Mock`来获取实际的模拟对象。

```
var x = new FirstClass(mock.Object); 
```

`Mock`类用于设置方法/验证。`Object`由于 C# 编译器的限制，您需要使用访问器。您可以投票支持在[Microsoft Connect](https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=318122)上取消它（请参阅[QuickStart](http://code.google.com/p/moq/wiki/QuickStart)中的说明）。

# wpf - 与 WPF Popup 中的 ListBox 交互不起作用

> ID：13026343
> 
> 赞同：0
> 
> 时间：2012-10-23T08:30:45.390
> 
> 标签：wpf, listbox, popup, focus

我想创建一个控件，让我为文本框中的值选择单位。为了实现这一点，我在文本框之后附加了一个按钮，并在悬停时打开了一个弹出窗口，其中包含一个带有可用单位的列表框。

如果我在此弹出窗口中放置一个按钮一切正常，我会获得悬停效果并可以单击该按钮。但是 ListBox 不能按预期工作。没有做任何特别的事情，我无法单击或聚焦 ListBox 项目。将弹出窗口的 F​​ocusManager.IsFocusScope 设置为 true 可以让我通过两次单击来选择一个项目，首先是关注窗口，其次是关注我想的 ListBox。以编程方式移动焦点也无济于事。

示例弹出：

```
<Popup x:Name="PART_UnitPopup" 
  PlacementTarget="{Binding}" 
  Placement="Bottom">
  <StackPanel>
    <ListBox x:Name="PART_UnitPopupListBox" ItemsSource="{Binding,Path=Units}"/>
    <Button Content="Click me!" />
  </StackPanel>
</Popup> 
```

阅读一些内容并尝试了一些解决方案，将焦点移到弹出窗口的打开或焦点事件上，但不要让这项工作像按钮那样以正常样式运行。也许除了 popop 之外还有另一种方法来完成这项任务，但它似乎是一个很好的解决方案，我发现一堆据说可以工作并且差别不大的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:23:49.673

我找到了一个与真正的解决方案有点距离的解决方法，但我想分享它。因为按钮接缝效果很好，所以我将按钮放入 ListBox 项目模板中，并更改了样式以使它们看起来像平面对象。现在悬停和交互无需单击两次即可工作。

作为一个陷阱，我不再能够依赖选择更改事件，因为按钮会拦截所有点击。因此，我向按钮添加了一个命令，该命令与更改的处理程序之前所做的工作相同。这基本上可以完成工作，但其他想法将不胜感激。

# asp.net - 组合框 selectionchanged 事件不会更新 Silverlight mvvm 中的数据网格

> ID：13026348
> 
> 赞同：0
> 
> 时间：2012-10-23T08:30:49.227
> 
> 标签：asp.net, silverlight, mvvm

我正在使用 mvvm 在 silverlight 5 中创建一个项目。我在一页中有一个组合框和一个数据网格。这是问题的意思，“如果我在组合框中选择任何值，它不会将所选行更新到数据网格。我在数据网格中绑定三个字段 Fname、Sname、Dept。我将所有的 Dept 值绑定到
组合框。数据网格结构是这样的，

```
____________________________
Fname   | Sname   | Dept   |
---------------------------
jeba    | Raj     |Tester  |
---------------------------
Raj     | Kumar   |Engineer|
____________________________ 
```

ComboBox 结构是这样的，

```
Tester
Engineer 
```

如果我选择组合框 SelectionChanged 项是 Tester，则表示该记录将绑定到 Datagrid。

我写的代码如下，

XAML 代码是：

```
<my:DataGrid x:Name="McDataGrid" ItemsSource="{Binding Employees,UpdateSourceTrigger=PropertyChanged,Mode=TwoWay}" Margin="130,151,0,0" Height="99" VerticalAlignment="Top" RowBackground="#AA5D9324" AutoGenerateColumns="True" HorizontalAlignment="Left" Width="194" CanUserResizeColumns="True" HorizontalScrollBarVisibility="Disabled">
        </my:DataGrid>

<ComboBox ItemsSource="{Binding Employees}"  DisplayMemberPath="Dept" SelectedItem="{Binding Names, Mode=TwoWay}" Margin="130,117,0,0" Height="26" VerticalAlignment="Top" HorizontalAlignment="Left" Width="120">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="SelectionChanged">
                    <si:CallDataMethod Method="BindNew"/>
                    <si:SetProperty TargetName="LayoutRoot" PropertyName="Background" Value="PaleGoldenrod"/>
                </i:EventTrigger>
            </i:Interaction.Triggers>

        </ComboBox> 
```

ViewModel 类文件代码：

EmployeeListViewModel.cs

```
private Employee _Names;
    public Employee Names
    {
        get
        {
            return _Names;
        }
        set
        {
            _Names = value;
            RaisePropertyChanged("Names");
        }
    }
public void BindNew()
         {
            Employee emplo = new Employee();
            Employees = Silverlight_MVVM.DataHelper.EmployeeDataHelper.EmployeeData();
            var semp = from emp in Employees where emp.Dept.Equals(Names.Dept) select emp;

            List<Employee> lt = new List<Employee>();
            lt = semp.ToList();
             lt.Count();
            int i;
            Employees.Clear();
            for (i = 0; i < lt.Count(); i++)
            {
                emplo.Fname = lt[0].Fname.ToString();
                emplo.Sname = lt[0].Sname.ToString();
                emplo.Dept = lt[0].Dept.ToString();
                Employees.Add(emplo);
            }
          } 
```

这里 Employee.cs 是 Model: Employee.cs 的类文件：

```
public class Employee: INotifyPropertyChanged 
    {
        //Constructor Creation Begins

        #region Constructor
        public Employee(string Fname = "", string Sname = "", string Dept = "")
        {
            _Fname = Fname;
            _Sname = Sname;
            _Dept = Dept;
        }
        #endregion

        #region Properties
        private string _Fname = string.Empty;
        public string Fname
        {
            get { return _Fname; }
            set 
            {
                _Fname = value;
            }
        }
        private string _Sname = string.Empty;
        public string Sname
        {
            get { return _Sname; }

            set
            {
                _Sname = value;
            }
        }
        private string _Dept = string.Empty;
        public string Dept
        {
            get { return _Dept; }
            set 
            { 
                _Dept = value; 
            }
        }
        #endregion
 #region INotifyPropertyChanged
        // [field: NonSerialized]
        public event PropertyChangedEventHandler PropertyChanged;

        protected void RaisePropertyChanged(string propertyName)
        {
            var handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }
        #endregion 
```

在 DataHelper 文件夹中，我有以下内容，

```
public static class EmployeeDataHelper
    {
        public static ObservableCollection<Employee> EmployeeData()
        {

            ObservableCollection<Employee> sampleEmployee = new ObservableCollection<Employee>();
            sampleEmployee.Add(new Employee("jas", "manickaraj", "Engineer"));
            sampleEmployee.Add(new Employee("raj", "Kumar", "Tester"));
            sampleEmployee.Add(new Employee("Jeba", "raj", "Developer"));
            return sampleEmployee;
        }
} 
```

这是问题的意思，如果我在 ComboBox 中选择任何项目，则所选记录将不会绑定到 DataGrid ..！请帮我绑定这个。提前谢谢你..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:51:02.577

嗨，我刚刚找到了解决方案。

我们需要告诉值从模型视图更改为视图。要做到这一点，只需给

**RaisePropertyChanged("员工");**

```
**public void BindNew()
         {
            Employee emplo = new Employee();
            Employees = Silverlight_MVVM.DataHelper.EmployeeDataHelper.EmployeeData();
            var semp = from emp in Employees where emp.Dept.Equals(Names.Dept) select emp;

            List<Employee> lt = new List<Employee>();
            lt = semp.ToList();
             lt.Count();
            int i;
            Employees.Clear();
            for (i = 0; i < lt.Count(); i++)
            {
                emplo.Fname = lt[0].Fname.ToString();
                emplo.Sname = lt[0].Sname.ToString();
                emplo.Dept = lt[0].Dept.ToString();
                Employees.Add(emplo);
            }
RaisePropertyChanged("Employees");
          } 
```

问题解决了.. ：）

# php - MySQL，对 id 相同的多行进行分组

> ID：13026350
> 
> 赞同：2
> 
> 时间：2012-10-23T08:30:57.583
> 
> 标签：php, mysql, sql

我继承了一个可爱的模式，它具有三个字段：`id, field_name, field_value`. 现在您可能会看到这是如何工作的，对于通过 CMS 添加的每个字段，它都作为新行添加，而 id 值不是唯一的。

但是每个字段都不是一个单独的实体，它们实际上应该按 id 分组（它引用了提交的表单的实例）。作为旁注，我很想知道这种模式模式可能被称为什么？

```
//example db contents
1    name        Joe Blogs
1    email       joe@example.com
1    programme   sport
2    name        Dave
2    email       dave@example.com
2    programme   art 
```

当然，我真的很想使用一个查询来获取按 id 字段分组的选定字段。输出`array( id => array( 'field' => 'value' , 'field' => 'value' ) )`等

通常我会做下面的事情，但我想知道是否有一种纯 SQL 方法可以做到这一点，在底部切断循环和处理。

```
$existing = new stdClass;
$sql = "SELECT 'id','field_name','field_value'
                FROM table_name";
$results = $wpdb->get_results( $sql, ARRAY ); //using wordpress btw
        foreach ( $results as $k=>$r )
            $existing[$r['id']][$k] = $r; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T08:44:11.583

您可以使用聚合函数和大小写来旋转值，

```
SELECT  ID,
        MAX(CASE WHEN type = 'name' THEN value ELSE NULL end) Name,
        MAX(CASE WHEN type = 'email' THEN value ELSE NULL end) email,
        MAX(CASE WHEN type = 'programme' THEN value ELSE NULL end) programme
FROM table1
GROUP BY ID 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/4f8b9/1)

或者将来如果您打算在不更改查询的情况下添加另一种类型，您可以使用准备好的语句，

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(CASE WHEN type = ''',
      type,
      ''' then value ELSE NULL end) AS ',
      type
    )
  ) INTO @sql
FROM table1;

SET @sql = CONCAT('SELECT  ID, ', @sql, ' 
                   FROM table1 
                   GROUP BY ID');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/3395a/1)

# sql-server - 数据库设计以保持不断变化的向导/工作流数据？

> ID：13026351
> 
> 赞同：0
> 
> 时间：2012-10-23T08:31:00.820
> 
> 标签：sql-server, xml, entity-framework, database-design, entity-attribute-value

我需要创建一个向导类型的 Web 应用程序来获取报告的数据。有多个部分，因此有多个向导工作流程。此外，可以更改工作流程，即可以添加一个步骤。

我正在考虑最好的数据库设计，并从传统的“ER 设计”开始，它始终推荐使用明确的列名。我一直在感兴趣地研究 EAV。但是，我现在意识到，当工作流可以更改时，我确实存在显式设计的问题。所以我现在的想法是

1）使用视图的 EAV（使用“代替”触发器进行更新） 2）只需将每个步骤数据集保存为 XML。

两者都存在查询问题，但我猜 1) 更好，尽管可以使用“Like”等对 XML 进行字符串查询。

我也在使用 MVC 3 和 EF5，并希望尽可能地利用他们的设施，而不是“对抗”该技术。

我可能还需要使用某种形式的 XML 配置文件来帮助设置具有正确控件/布局的剃刀视图。

我真的很感激上面的一些智慧。

非常感谢。

# javascript - Node.JS HTTP 响应什么都不返回？

> ID：13026355
> 
> 赞同：0
> 
> 时间：2012-10-23T08:31:13.750
> 
> 标签：javascript, node.js, mongodb

我正在尝试遍历 MongoDB 游标对象并从集合中返回所有记录，然后使用 Node outout 中的响应方法到浏览器。

我的问题是没有回应似乎被解雇了。

我尝试将 response.end() 放入循环中，但它不会遍历结果。

我也在不同的地方尝试过 response.end() 。这是代码

```
db.open(function(err, db) {
            if(!err) {
                console.log("Nodelistr is connected to MongoDB\n");
                response.writeHead(200);

                db.collection('todo', function(err, collection){            
                    collection.find(function(err, cursor) {
                        cursor.each(function(err, doc) {
                            for(docs in doc){
                                if(docs == "_id"){
                                }else{
                                    var test = docs + " : " + doc[docs];
                                }
                            }
                            data = data.toString("utf8").replace("{{TEST}}", test);
                            response.write(data);

                            //console.dir(doc);
                        })           
                        response.end();         
                    });
                });

            };

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:57:32.553

我无法弄清楚您在`data`遍历未初始化的变量和文档时要对它们做什么，但一般的问题是您需要等待调用`response.end();`，直到您到达光标的末尾。这通过`doc`在`cursor.each`回调中为 null 来表示。

代码的中间部分应遵循以下通用方法：

```
db.collection('todo', function(err, collection){            
    collection.find(function(err, cursor) {
        cursor.each(function(err, doc) {
            if (doc) {
                ...  // initialize data from doc
                response.write(data);
            } else {
                // doc is null, so the cursor is exhausted
                response.end();         
            }
        })           
    });
}); 
```

# eclipse - Eclipse升级后现有项目不与svn关联

> ID：13026356
> 
> 赞同：0
> 
> 时间：2012-10-23T08:31:15.970
> 
> 标签：eclipse, svn

我已将我的 Eclipse 升级到 Indigo。之后我尝试打开我的工作区，现在有些项目与 svn 相关联，而有些则没有。（我也下载了 subclipse 插件）我尝试删除项目并重新添加它。但它仍然与 svn 无关。这些项目最初是从 svn 签出的。如何将这些项目重新关联到 svn？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:37:21.757

尝试这样做： 选择您的项目：右键单击并选择团队：选择共享项目并按照说明进行操作。它要么会自动将您的项目连接到适当的 svn 项目（基于一些 .svn 文件），要么会要求您从 svn 中选择适当的项目。

# php - LAMP中的php和mysql连接

> ID：13026357
> 
> 赞同：1
> 
> 时间：2012-10-23T08:31:29.433
> 
> 标签：php, mysql, lamp

我使用的是 Ubuntu 12.10，并且我已经安装了 LAMP。在我学习 PHP 的时候，我遇到了一个连接 mysql 和 php 的话题。这是我学习的代码

```
<?php

$db = mysql_connect('localhost','root','dbpass') or die('Unable to connect. Check your connection ');

$query = 'CREATE DATABASE IF NOT EXISTS moviesite';
mysql_query($query,$db) or die(mysql_error($db));

mysql_select_db('moviesite',$db) or die(mysql_error($db));

$query2 = 'CREATE TABLE movie (movie_id integer not null, moviename varchar(255) not null, movierating integer not null)';

mysql_query($query,$db) or die(mysql_error($db));

echo "movie database succecfully created ";

?> 
```

当我在我的 Windows 环境中尝试这个时（我有双启动窗口和 ubuntu），它工作正常。在 Windows 中，我使用的是eastPHP。但在 ubuntu 中，它没有显示任何内容。我试图找到语法错​​误，但它与书中给出的相同。那么可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:37:56.720

如果您在浏览器中看到一个空白页面，您可能遇到了致命错误或服务器配置问题。假设您使用 Apache，请查看 Apache 错误日志以获取一些线索。在 Ubuntu 上，它会在`/var/log/apache2/error.log`默认情况下。

# api - Shopify 购物车第一次创建并且可以通过其 ID 使用 API 访问时？

> ID：13026359
> 
> 赞同：1
> 
> 时间：2012-10-23T08:31:33.817
> 
> 标签：api, shopify

Shopify 购物车何时首次创建？是新用户第一次在 Shopify 上进入网站还是第一个商品放入购物车时？我什么时候可以在 API 调用中通过 ID 访问购物车以更改产品数量？

我将拥有私人 Shopify 应用程序，它将处理和存储上传的用户文件。用户将支付处理文件的费用。实际上，商店的一种产品，用户将在购物车中拥有一种产品，但计数会根据他想要处理的文件数量而变化。我需要将上传的文件与用户、相应的购物车相关联，因为在签出购物车时首先输入了用户数据。对于这种情况，购物车 ID 对我来说似乎没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T12:55:22.000

当第一个项目进入购物车时...创建购物车令牌。在那之前你就是SOL。我使用肮脏的 ajax 调用为我启动泵......确保令牌存在。

# javascript - 有没有办法在谷歌服务器上存储谷歌浏览器扩展的信息？

> ID：13026362
> 
> 赞同：0
> 
> 时间：2012-10-23T08:31:49.073
> 
> 标签：javascript, google-chrome, google-chrome-extension

现在我将设置保存在 localStorage 中，但是当同一个用户在另一台计算机上打开浏览器并登录谷歌时，她会得到扩展，但没有得到扩展设置，这是之前在第一台计算机上进行的。有没有办法在不增加自己的服务器的情况下同步它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T21:16:37.277

是的。Chrome.Storage.Sync 有关详细信息，请参阅我对此问题的回答：[访问其他页面上的扩展数据](https://stackoverflow.com/questions/12284952/access-extension-data-on-other-pages/12290000#12290000)。你必须小心你在那里存储了多少数据，因为限制可能有点限制。有关更多信息，请参阅开发人员文档：http: [//developer.chrome.com/extensions/storage.html](http://developer.chrome.com/extensions/storage.html)

# linux - Debian Live 无法配置有线网络

> ID：13026364
> 
> 赞同：1
> 
> 时间：2012-10-23T08:31:57.997
> 
> 标签：linux, networking, configuration, debian, ethernet

我使用 USB 驱动器上的 YUMI 从 debian live 64bit 映像启动。它加载正常，但我无法连接到互联网。即使我插入以太网电缆，eth0 接口也无法工作。

我已经搞砸了一堆，我用 ifup 启用了 eth0，并尝试使用静态 IP 进行操作，我尝试使用 dhcp 进行操作，我已经重新启动了 /etc/init.d/networking。在这一点上我非常困惑，我想知道你们中是否有人有这方面的经验。

如果您想让我发布任何信息，请询问，

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T01:31:28.387

尝试重置您的路由器。首次启动应使用 dhcp 检测 eth0。

# java - 正则表达式在某些情况下无法正常工作

> ID：13026367
> 
> 赞同：0
> 
> 时间：2012-10-23T08:32:08.793
> 
> 标签：java, regex

asRuleValue 是`[^0-9a-zA-Z"'-.#, ]`

```
Pattern classPattern = Pattern.compile(asRuleValue, Pattern.CASE_INSENSITIVE);
Matcher m = classPattern.matcher(asValue);
if (!m.find())
{
   lbFlag = true;
} 
```

在某些情况下无法正常工作，例如`()`我在这里做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T08:34:42.813

你需要`-`在你的角色类中转义或者把它放到最后。

采用：

```
[^0-9a-zA-Z"'.#, -] 
```

否则，您正在创建一个字符范围从`'`到`.`还包括`()*+,`

# cakephp - CakePHP 2.x 如何管理多个用户表和访问区域？

> ID：13026370
> 
> 赞同：1
> 
> 时间：2012-10-23T08:32:18.403
> 
> 标签：cakephp

我正在计划一个使用 cakephp 的新项目，但我遇到了问题。

我想创建多个访问区域和多个用户表，例如商店系统：

1.  组：客户
2.  组：商人
3.  组：affiliate-partners（4\. 组：管理员 [这可能与 acl]）

每个组都有自己的区域（domain.tld、domain.tld/merchants、domain.tld/affiliate）（我知道prefex-routing，但它符合我的想法吗？）

我如何管理3个单独的登录，如果一个商家登录，他不会自动登录到附属区域？在我的第一次尝试中，我看到只有一个 cookie，而且每个商家都将在其他区域登录，而无需在那里拥有帐户。

请帮助我并指出正确的方向；）

（对不起我糟糕的英语）来自德国的问候

米。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:42:56.850

登录后可以做一些处理：

```
if($this->Auth->login()) { 
    $role = $this->Auth->user('role'); // your users must have a `role` field. 
    if($role=='affiliate') { 
        $this->redirect('/affiliates'); 
    }
    // ... 
```

有更好的方法来做到这一点；但取决于您的确切要求。这很简单，但不是很健壮。

# eclipse - 如何在 Eclipse 中以更多行显示打开的文件并禁止折叠

> ID：13026381
> 
> 赞同：1
> 
> 时间：2012-10-23T08:32:47.377
> 
> 标签：eclipse, collapse, folding

如果您打开的文件多于被压缩到打开文件栏中的文件，eclipse 不会为这些文件显示新行而是折叠这些文件，这种行为可以在某处改变吗？

# mysql - 执行插入时 MySQL 错误 1452

> ID：13026383
> 
> 赞同：0
> 
> 时间：2012-10-23T08:32:50.327
> 
> 标签：mysql

这个问题可能真的很愚蠢，我知道以前有人问过这个问题，但是我在以前的帖子中找不到任何对我有帮助的东西。我有 2 个表（实际上还有很多，但这里有 2 个相关）：

```
create table user (
email varchar(100) primary key,
first_name varchar(20) not null,
last_name varchar(20) not null,
password_hash varchar(100) not null,
salt varchar(10) not null,
account_status enum('pending','active','locked','retired') not null,
user_type enum('partsrequestor', 'manager', 'sysadmin') not null,
security_question varchar(256) not null,
security_question_answer varchar(64) not null,
constraint email_user_type_unique unique (email, user_type)
);

create table sysadmin (
email varchar(100) primary key,
user_type enum('sysadmin') not null,
foreign key (email, user_type) references user (email, user_type)
); 
```

我正在尝试将一些示例数据添加到表中：

```
insert into user values
('usera@company.com','firstnamea','lastnamea','c448602d3063e83d486403cc7566706d4eb40c8cb674d6cfb5436d078bc574dc','0590','active','partsrequestor','security question a', 'Answer a'), 
('userb@company.com','firstnameb','lastnameb','44367f83812a4478631e5d02a2b833ebe0a17e405a1c4a5700e41891d6b4ecb6','0591','pending','partsrequestor','security question b', 'Answer b'),
('userc@company.com','firstnamec','lastnamec','028973863316e14501338d012222f4b425fd91d3a50639c51a2aaab489d4dd2c','0592','locked','partsrequestor','security question c', 'Answer c'),
('userd@company.com','firstnamed','lastnamed','05ed7e29083998f403eb5531986687a87aafa3d954e59119389e8779fbc08f2e','0593','retired','partsrequestor','security question d', 'Answer d'),
('usere@company.com','firstnamee','lastnamee','e0e0f0162016e0baccf6cfa19dd184c1b39c02c12bec4aee81755db1cd1e4b6d','0594','active','manager','security question e', 'answer e'),
('userf@company.com','firstnamef','lastnamef','ba8e9abdc4e7640cdfc672b63d86f8aca72c91b729b5d462182482a0dc59d38b','0515','active','sysadmin','security question f', 'answer f')
;

insert into sysadmin values
('userf@company.com', 'sysadmin')
; 
```

插入系统管理员失败

> 错误 1452（“无法添加或更新子行：外键约束失败”）

我尝试禁用外键检查，运行插入，并在两个表之间连接电子邮件和 user_type；userf 显示得很好，所以我知道数据没有不匹配。另一张海报还提到使用不同存储引擎的不同表存在问题，所以我从头开始重新创建了整个数据库并`set storage_engine = innodb;`在添加表之前运行了一个，但它没有帮助。

有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:53:56.497

我认为 ENUM 类型不兼容，尝试以`user_type`这种方式更改字段 -

```
create table user (
...
user_type enum('sysadmin', 'partsrequestor', 'manager') not null,
...
); 
```

...所以“系统管理员”排在第一位，就像在`sysadmin`表中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:37:20.447

尝试更改您的表以使其与命令一起工作：`SET FOREIGN_KEY_CHECKS = 0;`并尝试再次运行查询？

# php - 来自浏览器的两个并行请求

> ID：13026388
> 
> 赞同：0
> 
> 时间：2012-10-23T08:32:58.253
> 
> 标签：php, jquery, mysql, ajax, iframe

> **可能重复：**
> [使用 jQuery 的并行异步 Ajax 请求](https://stackoverflow.com/questions/1060539/parallel-asynchronous-ajax-requests-using-jquery)

我需要一个接一个地创建 2 个 ajax 请求。然后显示第一个完成的结果。问题是第二个总是等待第一个完成。我试图中止第一个，但第二个仍在等待第一个完成。有什么解决方法吗？

基本上第一个调用解析一些 XML 文件并将记录插入 MySQL 表的 php 脚本。第二个调用 PHP 脚本，该脚本需要返回第一个已导入的 20 条记录。

我尝试了两个 ajax 调用，第一个从 iframe 调用。但结果总是一样的。第二个正在等待第一个完成。我发现的唯一方法是创建子域并使用子域调用第一个。但这在 IE 中不起作用。

任何人都可以解释如何解决这个问题？

也许我需要更多地描述我的问题。首先，我调用 ajax，执行时间为 cca 2 分钟，而第一个正在执行时，我需要有多个请求来检索第一个导入的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:36:09.830

您可以尝试使用[AJAX 回调](http://www.w3schools.com/ajax/ajax_callback.asp)来完成。您基本上可以输入嵌套回调并完成工作。第一个回调将在您获得解析的 XML 时调用，第二个回调将由第一个回调调用。

更新代码示例：

```
var callback2 = function(data)
{
   // Callbacks complete
   // Now do some more stuff
}
var callback1 = function(data)
{
   //do something;
   $.ajax({
    url: '/echo/html/',
    success: function(data) {
        callback2(data);
    }
});   
}
$.ajax({
    url: '/echo/html/',
    success: function(data) {
        callback1(data);
    }
}); 
```

在上面的示例中，当第二个 Ajax 调用完成时调用 callback2。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-23T08:50:22.067

按顺序调用它们。在您调用第一个之后，它将以异步方式执行。然后你打电话给第二个。那时第一个请求将仍在运行。但它不保证第二个请求将在第一个请求之后发送。所以你可以有一些超时。请参见下面的示例。

```
$.post('ajax/first_call', function(data) {
    // process returned data of first ajax call
});
window.setTimeout(function(){
    $.post('ajax/second_call', function(data) {
        // process returned data of second ajax call
    });
}, 2000); 
```

这里在 2 秒后请求第二个 ajax 调用。它不依赖于第一次调用。

# actionscript-3 - URLLoader 安全方案

> ID：13026389
> 
> 赞同：1
> 
> 时间：2012-10-23T08:33:10.863
> 
> 标签：actionscript-3

据我了解，从远程 url 读取二进制数据的唯一方法是通过`URLLoader`.

我知道这`URLRequest`需要一个上下文参数，该参数允许要求检查策略文件（在我的情况下已正确配置）。虽然目前还不是很清楚如何对`URLLoader`.

我想要实现的是从我的 S3 存储桶中加载 WAV 文件。我尝试使用`URLRequest`在同一个存储桶上使用的 mp3，效果很好。

我应该寻找另一种加载二进制数据的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:49:54.580

我不知道你想做什么，但你可以通过[`Sound#load()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Sound.html#load%28%29).

```
var request:URLRequest = new URLRequest("http://s3.amazonaws.com/bucket/1.wav");
var context:SoundLoaderContext = new SoundLoaderContext(1000, true);
var sound:Sound = new Sound();

sound.load(request); 
```

* * *

或者，您可以尝试[AS3WavSound](http://code.google.com/p/as3wavsound/)。

# ios - 如何从外部附件异步发送和接收数据

> ID：13026392
> 
> 赞同：1
> 
> 时间：2012-10-23T08:33:24.337
> 
> 标签：ios, asynchronous, nsstream, external-accessory, iphone-accessory

我对从外部附件异步方式发送和接收数据感到困惑。我使用MFi External Accessory，我检查了EADemo，但似乎发送和接收数据同步方式。对此有任何建议，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T10:46:26.897

首先，您必须将输入/输出流附加到 runLoop：

```
[[session inputStream] scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[[session inputStream] open];
[[session outputStream] scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[[session outputStream] open]; 
```

成为他们的代表：

```
[[session outputStream] setDelegate:self];
[[session inputStream] setDelegate:self]; 
```

一旦你成为委托，你必须实现这个方法：

```
-(void)stream:handleEvent:{}; 
```

这是一个例子：

```
-(void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)_event {
    switch (_event)
    {
        case NSStreamEventHasBytesAvailable:
            /* This part will be executed every time your rx buffer contains at least 1 byte */
            switch(state) {
                uint8_t ch;
                /* Read byte per byte */
                [stream read:&ch maxLength:1];
                /* now ch contains a byte from your MFI device
                ** and 'read' function decrease the length of the rx buffer by -1 */
            }
            break;
    }
} 
```

这是将数据写入流的命令：

```
/* txQueue is a NSData containing data to transmit. */
[[session outputStream] write:(uint8_t *)[txQueue bytes] maxLength:[txQueue length]]; 
```

# android - 将工作区投诉更改为 JRE 1.7 会影响我的代码兼容性吗？

> ID：13026395
> 
> 赞同：-1
> 
> 时间：2012-10-23T08:33:30.660
> 
> 标签：android, java

我正在开发一个android应用程序即将使用带有字符串参数的开关，我确保让编译器按照它的建议进行操作并更改任何需要更改的内容是可以的，我的意思是不会影响我的应用程序的可运行性。 ..

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:42:24.473

switch-on-string 只是语法糖，所以它应该产生可转换为 DEX 的字节码。也就是说，Android VM (Dalvik) 只知道 Java 6，所以最好还是坚持下去。

# c# - 如何在 Visual Studio 中重新创建这样的列表？

> ID：13026396
> 
> 赞同：2
> 
> 时间：2012-10-23T08:33:31.103
> 
> 标签：c#, visual-studio-2010, visual-studio, user-interface

如何使用 Windows 窗体在 Visual Studio 的新项目窗口中重新创建带有图标和文本的列表？

像这样： ![Visual Studio 中的新项目](../Images/fbbcda62ba1ca160346819cd2d03e53a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:58:29.260

如果您使用的是**WPF**，那么这很容易，因为它为自定义控件提供了很好的支持

欲了解更多信息和一个很好的例子，[请访问此处](http://www.c-sharpcorner.com/uploadfile/mahesh/listbox-in-wpf/)。

如果您使用的是**Win 表单**，那么这将非常棘手，因为您必须创建一个新的自定义控件以满足您的需求，您的控件可以从任何列表控件继承，并且可以表示您需要使用绘制和/或动态控件的 UI一代。

要查看自定义控件的一个很好的示例，[请转到此处](http://code.msdn.microsoft.com/windowsdesktop/CCS-LABS-Windows-Forms-dcae8214)

# android - 具有不同内容的自定义可扩展列表

> ID：13026401
> 
> 赞同：0
> 
> 时间：2012-10-23T08:33:48.640
> 
> 标签：android, expandablelistview, expandable

我想创建一个活动，其中首先包含按钮和图像等修复内容，然后是可扩展列表。但在可扩展列表中，我也希望显示不同的内容，如谷歌地图、图像、日历、文本......就像我在下面的图片中放置的那样。

![在此处输入图像描述](../Images/4387d25edb3c81ae35936851bb150e48.png)

我试图找到有关如何做到这一点的示例，但我只找到了只有可扩展列表（没有上面的按钮和图像）并且可扩展列表里面只有文本而不是我需要的不同内容的活动。有人知道在哪里可以找到一个很好的例子吗？或者我该怎么做？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:52:04.283

试试我们的以下教程：

[http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/](http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/)

您可以使用适配器的 getView() 来提供您自己的视图。

# css - 如何将正文中的所有元素右对齐

> ID：13026407
> 
> 赞同：0
> 
> 时间：2012-10-23T08:34:07.400
> 
> 标签：css

我有如下嵌套的身体结构

```
 <body>
     <div style="position:absolute"> 
      <div>Some Content </div> <img src="abc.png"></div>
      <div> Some other content </div>
      ...
      ...
     </div>
 </body> 
```

如何将正文内的元素对齐到右/中/左？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:40:01.283

我不确定我是否完全理解您的意思，但是您可以通过使用 CSS 属性来“左对齐”，`float:left`同样`float:right`可以“右对齐”。

要使 div 居中，请设置`width`并使用`margin:auto`

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:42:40.553

这是一个非常开放的问题，因为它取决于您要实现的目标，但以下其中一项可能会对您有所帮助：

如果您的 div 绝对定位，那么您可以使用：

```
position:absolute; right:0px; 
```

或者，如果合适，您可以使用浮点数：

```
float:right; 
```

或者您可以使用边距定位在中心，只要您的 div 具有指定的宽度并且没有浮动：

```
width:100px; margin:0px auto; 
```

# spring - 具有多个 bean 配置文件的 Spring Batch CommandLineRunner

> ID：13026408
> 
> 赞同：0
> 
> 时间：2012-10-23T08:34:09.733
> 
> 标签：spring, batch-processing, spring-batch

我正在编写一个 Spring Batch 应用程序并将 Spring Beans 配置拆分为多个文件；

*   批处理/launchContext.xml（JobLauncher/JobRepository 等）
*   batch/common.xml（所有作业中使用的通用 bean）
*   dataSource.xml（数据源）
*   batch/jobs/myJob.xml（作业的单个文件）

这样做的原因是因为我希望在开发/测试/生产设置之间更改数据源，并且还可以节省一遍又一遍地重写相同的 bean 定义。

问题出在我希望启动 Spring Batch 应用程序时。阅读此处的说明[http://static.springsource.org/spring-batch/reference/html/configureJob.html#runningJobsFromCommandLine](http://static.springsource.org/spring-batch/reference/html/configureJob.html#runningJobsFromCommandLine)时，它​​假定每个作业都有一个 Spring 配置文件，但这不是我希望这样做的方式。

如何从命令行运行使用多个 bean 配置文件的 Spring Batch 作业？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:40:09.093

你总是可以只导入上下文：

所以在`batch/jobs/myJob.xml`：

```
<import resource="batch/launchContext.xml" />
<import resource="batch/common.xml" />
<import resource="dataSource.xml" /> 
```

另请参阅[Spring Docs](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-factory-xml-import)

编辑：

您可以使用属性占位符来外部化您的数据源属性定义：

在你的`dataSource.xml`：

```
<bean id="dataSource" destroy-method="close"
    class="org.apache.commons.dbcp.BasicDataSource">
  <property name="driverClassName" value="${jdbc.driverClassName}"/>
  <property name="url" value="${jdbc.url}"/>
  <property name="username" value="${jdbc.username}"/>
  <property name="password" value="${jdbc.password}"/>
</bean>

<context:property-placeholder 
   location="classpath:com/foo/jdbc.properties" 
   systemPropertiesMode="2" />  <!-- 2 means override --> 
```

您`jdbc.properties`将包含默认值：

```
jdbc.driverClassName=org.hsqldb.jdbcDriver
jdbc.url=jdbc:hsqldb:hsql://production:9002
jdbc.username=sa
jdbc.password=root 
```

但是因为使用“覆盖”系统属性模式，这些可以在运行时指定：

```
java -Djdbc.url=jdbc:hsqldb:hsql://dev:9002 ... 
```

另请参阅[此处](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/xsd-config.html#xsd-config-body-schemas-context-pphc)

# iphone - 设置按钮的框架大小：小数点值

> ID：13026409
> 
> 赞同：0
> 
> 时间：2012-10-23T08:34:17.653
> 
> 标签：iphone, ios, frame

它将在 iOS 中我可以将按钮的帧大小设置为

```
btn1.frame = CGRectMake(20.5, 113.5, 92.5, 93);
btn2.frame = CGRectMake(113.0, 113.5, 186, 93); 
```

十进制值是否会设置或舍入？

对我来说，在 4 英寸的模拟器显示器中，按钮是正确的，这两者之间没有任何间隙。但是在 3.5 英寸的模拟器中，它的两个按钮之间有一个间隙。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:37:07.627

`CGRect`has`CGPoint`和`CGSize`which are all 都来自`CGFloat`which 又来自`float`.

它可以`float`对所有人有价值，但`CGRect` `cordinates`不会`round`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:01:54.537

`f`您需要通过在十进制数字的末尾声明来指定数字是否具有十进制值。

这表示该数​​字具有小数部分。

而且，对于您的代码，这应该有效：

```
btn1.frame = CGRectMake(20.5f, 113.5f, 92.5f, 93);
btn2.frame = CGRectMake(113.0f, 113.5f, 186, 93); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:19:23.843

是的，您可以为按钮的框架赋予浮点值。

```
button.frame = CGRectMake(20.5, 113.5, 92.5, 93.0); 
```

并用于`CGRectIntegral`将任何十进制值转换为其整数等价物。
在为您的按钮分配框架后，只需写下这个 -

```
button1.frame = CGRectIntegral(button1.frame);
button2.frame = CGRectIntegral(button2.frame); 
```

可以看到帧前后的效果`NSLog`。 例子：-`button`

```
button.frame = CGRectMake(20.5, 113.5, 92.5, 93.0);
NSLog(@"Before - %@",NSStringFromCGRect(button.frame));

button.frame = CGRectIntegral(button.frame);
NSLog(@"After - %@",NSStringFromCGRect(button.frame)); 
```

有关更多详细信息，请参见 - [Apple doc on CGRectIntegral](https://developer.apple.com/documentation/coregraphics/1456348-cgrectintegral) and [Stackoverflow answer](https://stackoverflow.com/a/9975374/1140335)

# java - 从其他类的列表视图中选择一行

> ID：13026410
> 
> 赞同：1
> 
> 时间：2012-10-23T08:34:20.237
> 
> 标签：java, android, listview

我想从其他类中选择列表视图中的下一行位置，但我不知道该怎么做。我得到了将点击的位置传递给其他班级的列表。在 onItemclick 监听器中

```
public void onItemClick(AdapterView<?> vie, View view,
                int agr2 , long agr3){

            Intent i = new Intent(context, Test.class);
            i.putExtra("numbers", agr2);
            startActivity(i);
        } 
```

在 test.java 中，我得到了值并将值设为

```
 Bundle extras = getIntent().getExtras();
    int num = extras.getInt("numbers");
    TextView tv = (TextView) findViewById(R.id.textviews);
    int randomb = 1;

    int rand = num - randomb;
    if (rand == -1){
        rand = 100;
    }

    tv.setText("next row to go to :  "+ rand +"  selectedrow :  "+ num ); 
```

所以我的目标是我如何将 int“rand”放在某个地方，以便它进入下一行，当我说我按下按钮或计时器归零时。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:28:29.437

做了很多假设，我认为您想将兰特发回 ListActivity.. 所以调用图如下所示

ListActivity（在意图中单击列表项 id）-> Randomizer Activity（不确定您为什么需要它）会执行一些魔术并生成一个随机变量（您需要将其传递回 List 活动）-> ListActivity

对于这个用例，您可以使用 startActivityForResult()。请查看以下教程：

[http://saigeethamn.blogspot.in/2009/08/android-developer-tutorial-for_31.html](http://saigeethamn.blogspot.in/2009/08/android-developer-tutorial-for_31.html)

编辑1：

您还可以使用 setSelection() 方法来选择特定行。

[http://developer.android.com/reference/android/widget/ListView.html#setSelection(int](http://developer.android.com/reference/android/widget/ListView.html#setSelection(int) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:46:21.433

[在SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中保留 rand 的值

您可以在应用程序的任何位置访问该值，并在需要时进行更新。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:53:07.107

据我了解，如果您想要一个计时器来触发“转到下一行”的事件，那么您应该做的只是增加该 rand 数是您的 TimerActionListener 方法并访问“下一行”。

# android - 在共享gmail android时用粗体在新行中写入数据

> ID：13026414
> 
> 赞同：2
> 
> 时间：2012-10-23T08:34:39.430
> 
> 标签：android

我想在与 gmail 共享数据的同时用粗体和新的线条样式书写。我已经尝试过 \n 或者你可以说但我无法得到结果我的代码低于..

```
 Intent intent = new Intent(Intent.ACTION_SEND); 
        intent.setType("plain/text");
        intent.putExtra(Intent.EXTRA_EMAIL, emailAddressList);  
        intent.putExtra(Intent.EXTRA_SUBJECT, emailSubject); 
        intent.putExtra(Intent.EXTRA_TEXT, "<b>Hi this is test app</b> <br/> your first app is this"); 
        startActivity(Intent.createChooser(intent, "Choice App t send email:")); 
```

但它没有以粗体和新行显示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:37:43.670

试试下面的代码，它工作正常:) 我已经测试过了

```
 Intent shareIntent = new Intent(Intent.ACTION_SENDTO, Uri.parse("mailto:"+emailAddressList));
                shareIntent.putExtra(Intent.EXTRA_SUBJECT, emailSubject);
                shareIntent.putExtra(
                Intent.EXTRA_TEXT,
                Html.fromHtml(new StringBuilder()
                    .append("<p><b>Hi this is test app</b></p>")
                    .append("<small><p>Hi this is test app</small>")
                    .toString()));

                    startActivity(Intent.createChooser(shareIntent, "Choice App t send email:")); 
```

# actionscript-3 - 我如何从另一个冥想者课程中获得视图位置？

> ID：13026417
> 
> 赞同：0
> 
> 时间：2012-10-23T08:34:45.257
> 
> 标签：actionscript-3, robotlegs

我的启动命令是：

```
var containerView:ContainerView = new ContainerView();
var sampleView:SampleView = new SampleView();

contextView.addChild(containerView);
contextView.addChild(sampleView);

containerView.y = 50;
containerView.x = 250; 
```

样本中介：

```
[Inject]
public var containerView:ContainerView;

trace(containerView.x); //0 
```

主要的：

```
public class Main extends Context
{
    public function Main(contextView:DisplayObjectContainer)
    {
        super(contextView);
    }

    override public function startup():void
    {
        commandMap.mapEvent(ContextEvent.STARTUP_COMPLETE, StartupCommand, ContextEvent, true);

        injector.mapSingleton(SampleView);

        mediatorMap.mapView(ContainerView, ContainerMediator);
        mediatorMap.mapView(SampleView, SampleMediator);

        super.startup();
    }
} 
```

那么如何在另一个类中找到 containerView 的确切位置呢？每次返回 0。

# algorithm - 寻找点，与线上所有其他点的距离总和是最低的

> ID：13026419
> 
> 赞同：13
> 
> 时间：2012-10-23T08:34:48.193
> 
> 标签：algorithm, recursion, line

我一直想知道是否有可能以递归或“分而治之”的方式解决这个问题。这是我的问题的可视化：

![在此处输入图像描述](../Images/0479f7e4e1c6ad6292aea86465d297c6.png)

```
Input:
22 // point no 1
35 // point no 2
5  // ...
44
45
20
46

Output: 2 // point with number 2 has got the lowest sum (87) 
```

我知道如何以迭代的方式做到这一点，但我正在考虑更优化的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T08:43:11.170

这称为[中值](http://en.wikipedia.org/wiki/Median "中位数")。只需对值进行排序并选择中心。如果 n 是偶数，则两个中心值中的任何一个都可以。

还有用于计算中位数的[O(n) 算法。](http://en.wikipedia.org/wiki/Selection_algorithm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T10:35:24.913

说解决方案是中[位数](http://en.wikipedia.org/wiki/Median)的答案是正确的，但是可以有

## 多种解决方案

如果有偶数个点：*p [1] < … p [n] < p [n + 1] < … < p [2n]* *，对于任何点x* ，距离总和将是最小的，其中 *p [n] ≤ x ≤ p [n + 1]

要了解为什么中位数有效，请考虑这个

## 解释

假设我们有所有适用的*p* *[i]* *< p* *[i+1]*`n`点。`i`

天真，我们可能认为*x = p [1]**是最小化总和S*的最佳选择。x*加*一，总和*S*会发生什么变化？我们离*p [1 更远 1]*，但离所有其他点更近 1。

因此，*S [p [1] + 1] = S [p [1]] + 1 - (n - 1)*

总和继续以这种方式变化，直到*x = p [2]*：斜率是*1 - (n - 1) = 2 - n* 在通过点*p [2]*之后，斜率变为*2 - (n - 2) = 4 - n*，之后是*6 - n*，然后是*8 - n*等

很容易看出，我们通过的每个点的斜率总是增加 2：接近点的数量减少 1，远离的点数量增加 1，因此坡度变化 2。

在某些时候，斜率将从负变为

*   正数——在奇数点的情况下
*   零 - 在偶数点的情况下

很容易看出，当点数为偶数时，斜率会在某个点为零：
*p [1] < p [2] < … p [n] < p [n + 1] < … p [2n - 1] < p [2n]*

如果我们位于点*p [n]*和*p [n+1]*之间，则左侧和右侧的点数量相等。这意味着，当我们在这两个点之间移动时，等量的点 -准确地说是*n* - 靠近并拉得更远，因此总和*S [p [n] <= x <= p [n + 1]]*保持不变。

如果有奇数个点，则*p [(n + 1)/2]*标记最小值，因为它是斜率从负变为正的点。

# sql - 我们如何在不使用虚拟表概念的情况下优化以下查询

> ID：13026420
> 
> 赞同：1
> 
> 时间：2012-10-23T08:34:49.713
> 
> 标签：sql, db2

以下是使用虚拟概念的查询，但我希望它的优化形式不使用**“虚拟表”** 概念。

```
 with TEMP AS
          (

          Select RN from                                                            
          (                                                                         
          SELECT TCTITL,                                                            
          ROW_NUMBER() OVER ( ORDER BY TCTITL asc ) AS RN FROM PVTC ORDER BY        
          TCTITL asc                                                                
          )T 

          WHERE ((TCTITL >= 'AAPS  ' ))                                             
          ORDER BY TCTITL asc fetch first row only  )  

          , mytab as
          (

          Select * from
          (                                                           
         ( SELECT TCTITL, TCEDUR, TCSTZF, TCTTLE, TCLSHN, TCCEQ3,                  
        ROW_NUMBER() OVER ( ORDER BY TCTITL asc ) AS RN                           
         FROM PVTC ORDER BY TCTITL asc  )                                          
          ) Q

          ,  TEMP where Q.RN                                                     
          between (TEMP.RN + 0) and ( TEMP.RN + 3)                                  
          )
          select * from mytab 
```

注意：我有一个结果为 1 到 10 的表，但我希望两个指针之间的结果只说 3 到 10。这是此查询的目标。

**更新：**我有五条记录，我想根据 Row_Number 2 在 1 t0 5 范围内选择记录。（其中 1,2,3,4,5 显示 Row_number ）

```
 col1    col2    col3 
    a   b   c   
    a1  b1  c1  
    -------------------------
    ---------------------------
    --------------------------
    a5  b5  c5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:54:32.257

看来您只想获取前四行 where `tctitl >= 'AAPS '`，以及描述它们在表中排名的行号。如果是这样，我认为这可以解决问题：

```
select * from (
        select pvtc.*, row_number() over (order by tctitl) as rn from pvtc 
    )
    where (tctitl >= 'AAPS  ' )                                             
    order by tctitl
    fetch first four rows only; 
```

# ios - UITableview 附件类型在滚动时消失

> ID：13026430
> 
> 赞同：5
> 
> 时间：2012-10-23T08:35:37.173
> 
> 标签：ios, xcode, uitableview

我制作了一个 tableView，我需要在其中选择多个选项。选项被选中，但是当我滚动表格视图时，复选标记选项消失，其他一些行显示该复选标记。这是我在`didselectedrowAtindex`方法中的代码`table_option`是`UITableView`并且`selectedcells`是`NSMutableArray`

```
[table_option deselectRowAtIndexPath:indexPath animated:YES];
NSNumber *rowNsNum = [NSNumber numberWithUnsignedInt:indexPath.row];
if ( [selectedCells containsObject:rowNsNum]  )
{
    if (cell.accessoryType == UITableViewCellAccessoryCheckmark) 
        cell.accessoryType = UITableViewCellAccessoryNone;
    else 
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

    [selectedCells removeObject:rowNsNum];
    sel.text=@"Select";
   // cell.accessoryType = UITableViewCellAccessoryNone;

}
    else 
{
    if (cell.accessoryType == UITableViewCellAccessoryCheckmark) 
        cell.accessoryType = UITableViewCellAccessoryNone;
    else 
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

    [selectedCells addObject:rowNsNum];
   sel.text=@"Selected";
   // cell.accessoryType = UITableViewCellAccessoryCheckmark;

}

[table_option reloadData]; 
```

请尽快帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-23T08:39:36.763

您需要检查方法中是否已选择单元格`cellForRowAtIndexPath`。发生此问题是因为 tableView 重复使用了单元格。请在您的方法中编写以下代码`cellForRowAtIndexPath`，它将解决问题。

```
NSNumber *rowNsNum = [NSNumber numberWithUnsignedInt:indexPath.row];
if ( [selectedCells containsObject:rowNsNum]  )
{
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
}
else
{
    cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T13:47:20.020

就我而言，只是设置`accessoryType = UITableViewCellAccessoryCheckmark`不起作用`cellForRowAtIndexPath`。

当`UITableView`到达第一个元素时会出现问题，如果您尝试滚动更多，可见单元格会下降并且它们的复选标记会消失。

```
NSNumber *rowNsNum = [NSNumber numberWithUnsignedInt:indexPath.row];

[cell setAccessoryType:UITableViewCellAccessoryNone];// tricky part is this line

if ( [selectedCells containsObject:rowNsNum]  )
{
    cell.accessoryType = UITableViewCellAccessoryCheckmark;
}
else
{
    cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T17:49:57.713

检查这个例子

```
cell.accessoryType = UITableViewCellAccessoryNone;
 for (int x = 0; x < selectedIds.count; x++) {
     if ([[selectedIds objectAtIndex:x] isEqualToString:[[source objectAtIndex:[indexPath row]] objectForKey:@"id"]])
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
 } 
```

# ios - 如何在 iOS 中清除特定域的 cookie？

> ID：13026432
> 
> 赞同：2
> 
> 时间：2012-10-23T08:35:41.533
> 
> 标签：ios, cookies, uiwebview, nsstring, subdomain

我在 StackOverflow 上搜索了几乎所有问题，以找到我的问题的答案。我还没有找到任何有用的链接或教程来说明哪种方式最适合清除特定域的 cookie。所以请如果有人可以帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T08:49:04.053

我自己找到了解决方案。如果您希望删除 UIWebView 中的整个 cookie，请执行此操作。

```
NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
NSHTTPCookie *cookie;
for (cookie in [storage cookies]) {
  NSLog(@"%@", cookie); // Print the deleted cookie.
  [storage deleteCookie:cookie];
}
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

如果您希望删除特定于某个站点或域的 cookie，请执行此操作。

```
NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
NSHTTPCookie *cookie;
for(cookie in [storage cookies]) {
   if([[cookie domain] rangeOfString:@"siteName(or)domainName"].location != NSNotFound) {
     NSLog(@"cookie to be deleted:%@", cookie);
     [storage deleteCookie:cookie];
   }
 } 
```

在上面的代码中，我使用了 siteName（或）DomainName 将其替换为您要删除 cookie 的站点。您必须知道每个域都有子域。如果您在那个地方提供全局域名，它不会删除子域的 cookie。例如 LinkedIn，它有许多子域，如 in.linkedIn.com、api.linkedIn.com 等。如果我给[http://www.linkedin.com](http://www.linkedin.com)这是全局域名，它不会删除子域的 cookie。

NSHTTPCookie 具有域属性，因此使用它来获取所有域名并使用 rangeOfString: NSString 的方法获取具有您的字符串的域（例如linkedin）。比删除它会删除其所有域的 cookie。

我没有人可以帮助我希望至少我的帖子将来会帮助某人。

# c# - c#上的距离矩阵服务

> ID：13026433
> 
> 赞同：2
> 
> 时间：2012-10-23T08:35:44.400
> 
> 标签：c#, web-services, google-maps-api-3

如何通过 c# 使用距离矩阵服务？

或者我在哪里可以获得 wsdl 文件以将其上传到肥皂？

唯一的方法是他们在 js 中提供的示例。

距离矩阵网站：

[https://developers.google.com/maps/documentation/distancematrix/](https://developers.google.com/maps/documentation/distancematrix/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T08:43:27.137

似乎该服务是基于 REST 的，所以最简单的是使用 WebClient 下载内容：

```
WebClient client = new WebClient();
Stream stream = client.OpenRead("http://maps.googleapis.com/maps/api/distancematrix/xml?origins=Vancouver+BC|Seattle&destinations=San+Francisco|Vancouver+BC&mode=bicycling&language=fr-FR&sensor=false"); 
```

现在您得到了一个包含 XML 结果的 Stream。

您可以使用 XmlSerializer 将 XML 解码为代码，或者使用 XDocument.Load 将其加载到 XDocument 中，您可以使用一些 DOM 遍历或 XPath 查询来获取所需的数据：

```
XDocument doc = XDocument.Load(stream); 
```

# visual-studio-2010 - Visual Studio 2010 安装项目自定义操作 - 安装期间的访问权限错误

> ID：13026434
> 
> 赞同：1
> 
> 时间：2012-10-23T08:35:45.993
> 
> 标签：visual-studio-2010, setup-project, custom-action

我创建了一个 Visual Studio 2010 安装项目，添加了我的应用程序的输出，然后我创建了一个带有 RunInstaller 装饰的类的 ac# 库类。我将该类库输出添加到安装项目中，然后将该输出添加到执行自定义操作视图：提交和安装操作。

我尝试启动安装程序（使用管理员权限），在安装的某个时候它告诉我“写入文件 CustomAction.dll 时出错。请确保您有权访问该目录。”

安装程序类如下：

```
[RunInstaller(true)]
public class WriteFileCustomAction : Installer
{
    public override void Install(IDictionary savedState)
    {
        File.WriteAllText(@"C:\tmp\testInstall.log", "Install");
        base.Install(savedState);

    }

    public override void Commit(IDictionary savedState)
    {
        File.WriteAllText(@"C:\tmp\testCommit.log", "Commit");
        base.Commit(savedState);
    }
} 
```

问题是什么？？

# python - Python线程 - 编译时监听网络

> ID：13026437
> 
> 赞同：0
> 
> 时间：2012-10-23T08:35:48.480
> 
> 标签：python, multithreading, concurrency, process, multiprocess

在python（2.6.6）中，我可以让线程/进程在同时工作（编译）的同时检查网络（消息队列）的最佳方式是什么。如果我在消息队列中收到一条命令，我必须能够杀死并生成编译线程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:57:27.280

没有用于杀死线程的官方 Python API——您需要使用特定于操作系统的方法。

如果您生成一个新进程（使用`multiprocessing.Process`），那么您可以使用`.terminate()`. 当然，这会导致它立即停止——它不会自行清理，并且可能会污染任何共享数据结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:07:48.057

如前所述，没有用于杀死线程的 Python API。您必须使用多处理或协作设计模式。

如果你想做后者，你可以简单地使用协作设计模式，工作线程会定期检查它们是否应该被杀死。例如：

```
while not self.stopped:
     do_come_compilation_stuff() 
```

然后在你的主线程中，你应该为工作线程设置停止标志。如果您希望程序正确处理 CTRL-C 等信号，这也是一种有用的设计模式。

# ios - 使用 MonoTouch 对地址进行地理编码

> ID：13026440
> 
> 赞同：0
> 
> 时间：2012-10-23T08:36:01.300
> 
> 标签：ios, xamarin.ios, ios6, geocoding

我的问题是这个问题的副本：将[地址地理编码为坐标](https://stackoverflow.com/questions/10735981/geocoding-address-into-coordinates-in-iphone)
，唯一的区别是我需要在 Monotouch (C#) 中而不是 Objective-C 中进行。

到目前为止，我已经尝试过，但没有成功：

```
string sw = searchWhere.Text;  
CLGeocoder clg = new CLGeocoder();  
clg.GeocodeAddress(sw, HandleCLGeocodeCompletionHandler); 
```

编辑： CompletionHandler 被调用，但我不知道如何让新的地图应用程序显示。（我对 iOS 开发人员非常陌生。）

```
 MKMapView MapIt = new MKMapView();
    void HandleCLGeocodeCompletionHandler (CLPlacemark[] placemarks, NSError error)
    {

        List<ObjAnnotation> oal = new List<ObjAnnotation>();

        if ( oal.Count > 0 )
        {
            MapIt.RemoveAnnotations(oal.ToArray()); 
        }
        oal.Clear();
        for(int i = 0; i < placemarks.Length; i++)
        {
            var loc = placemarks[i].Location.Coordinate;
            oal.Add(new ObjAnnotation(new CLLocationCoordinate2D(loc.Latitude, loc.Longitude),
                                      placemarks[i].Name, string.Empty));
        }
        MapIt.AddAnnotationObjects(oal.ToArray());
        CustomerDetailTab cdt = CustomerDetailTab;
        UIView view = cdt.View;
        MapIt.AddSubview (view);
    } 
```

这条线`CustomerDetailTab cdt = CustomerDetailTab;`没有建立。我无法理解如何获取视图对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:27:28.890

让它如此工作：

```
partial void btnAddr1Touch (MonoTouch.Foundation.NSObject sender)
        {

        short version =  Convert.ToInt16(UIDevice.CurrentDevice.SystemVersion.Split('.')[0] );
        string lmapLocation = Globals.SelectedCustomer.DelAddr01 + " " + Globals.SelectedCustomer.DelAddr02 + " " + Globals.SelectedCustomer.DelAddr03 + " " + Globals.SelectedCustomer.DelAddr04 + " " + Globals.SelectedCustomer.DelAddr05;
        mapLocation= Globals.SelectedCustomer.DelAddr01 + Environment.NewLine + Globals.SelectedCustomer.DelAddr02 + Environment.NewLine + Globals.SelectedCustomer.DelAddr03 + Environment.NewLine + Globals.SelectedCustomer.DelAddr04 + Environment.NewLine + Globals.SelectedCustomer.DelAddr05;

        if(mapLocation.Trim().Length == 0)return;

        if (version == 5) 
        {
            NSUrl url = new NSUrl("http://maps.google.com/maps?q=" + lmapLocation);
            UIApplication.SharedApplication.OpenUrl(url);
        }               
        else 
        {   
            ActivityThread.Start ("Loading Location");
            string sw = mapLocation;
            CLGeocoder clg = new CLGeocoder();
            clg.GeocodeAddress(sw, HandleCLGeocodeCompletionHandler);

        }
    }

void HandleCLGeocodeCompletionHandler (CLPlacemark[] placemarks, NSError error)
        {
            try 
            {
                CLLocationCoordinate2D coordinate = placemarks [0].Location.Coordinate;

            viewController = new MapViewController (coordinate, Globals.SelectedCustomer.Name, mapLocation);

            ActivityThread.Stop ();
            this.NavigationController.PushViewController (viewController, true);
        } 
        catch (Exception ex) 
        {
            ActivityThread.Stop ();
            var erroralert = new UIAlertView ("Location could not be found", "", null, "Ok", null);
            erroralert.Show ();
        }

    } 
```

# android - Android：使用 Base64 将图像编码为字符串

> ID：13026443
> 
> 赞同：0
> 
> 时间：2012-10-23T08:36:10.353
> 
> 标签：android, base64

我从这里下载了**Base64.java**：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/util/Base64.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/util/Base64.java)

它包含方法**encodeToString()**但与我之前的相比它的大小非常小。它只有大约 750 行代码。

之前的 1 是从这里下载的：

[http://sourceforge.net/projects/iharder/files/](http://sourceforge.net/projects/iharder/files/)

它有 2064 行代码，但没有方法**encodeToString()**而是只有**encodeToFile()**方法。

其中哪个更健壮？

我使用**Base64**的目的是转换从 Camera Api 获得的**ByteArray**并将其发送到**服务器**（编码字符串）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:42:27.623

好吧，如果您想将编码后的图像发送到您的服务器，您应该将其编码为`String`：

```
byte[] imageBytes = yourByteArray;
String encodedImage = Base64.encodeToString(imageBytes, Base64.DEFAULT); 
```

# c# - 如何使用 IE9 在 watin 中捕获 alertDialogHandler？

> ID：13026444
> 
> 赞同：1
> 
> 时间：2012-10-23T08:36:12.960
> 
> 标签：c#, watin

我在用watin做一些web测试，现在出现了一个奇怪的问题：有一个注册页面，点击注册按钮时，如果安全号不正确，会显示一个js弹窗信息，如果数字正确，js弹窗将不会显示。我正在用IE9测试它，我使用的代码是这样的：

```
var alertDialogHandler = new AlertDialogHandler();
using (new UseDialogOnce(ie.DialogWatcher, alertDialogHandler))
{
  ie.Button(Find.ByName("registe_r")).Click();
  MessageBox.Show(alertDialogHandler.Message);
  if (alertDialogHandler.Exists())
  {
     alertDialogHandler.OKButton.Click();

  }
} 
```

奇怪的是alertDialogHandler不能被抓到，代码

```
MessageBox.Show(alertDialogHandler.Message); 
```

将返回错误：“操作不可用。对话框不存在。”

我尝试了几种方法来弄清楚如何解决这个问题，但都失败了，是否有可能是由 IE9 引起的？我记得两年前当我使用 IE7 时，它运行得非常好。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:23:02.190

这段代码在 IE9 上对我有用，试试看：

```
 AlertDialogHandler alertDialogHandler = new AlertDialogHandler();
            ie.AddDialogHandler(alertDialogHandler );
            ie.Button(Find.ByName("registe_r")).Click();      
            alertDialogHandler.WaitUntilExists();
            alertDialogHandler.OKButton.Click();
            ie.RemoveDialogHandler(alertDialogHandler); 
```

# c# - 智能文件合并传输

> ID：13026445
> 
> 赞同：0
> 
> 时间：2012-10-23T08:36:14.313
> 
> 标签：c#, .net, packaging

有没有人知道如何在不使用任何打包程序（Zip，Rar）的情况下进行智能文件组合，仅用于传输目的。

我的交易是什么：我想将文件包传输到移动设备中，然后在它们上解包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:47:30.757

也许您应该将文件放入数组中，使用

```
BinaryFormatter 
```

并将生成的二进制文件传输到移动设备。

# jquery - Rails ajax 表单返回缺少的模板

> ID：13026447
> 
> 赞同：1
> 
> 时间：2012-10-23T08:36:19.730
> 
> 标签：jquery, ruby-on-rails-3.1, form-for

我正在尝试通过 AJAX 提交嵌套表单，但我似乎无法弄清楚。我已经四处寻找解决方案，但都是徒劳的。我在这里看到了一些类似的问题，但没有一个有帮助的答案。我的 application.html.erb 布局中包含所有必要的内容、所有 gem 等。使用 Rails 3.1.1 和 Ruby 1.9.2p290。

下面是我的模型...

```
class Parent < ActiveRecord::Base
    has_many :children, :dependent => :destroy
    accepts_nested_attributes_for :children
end

class Child < ActiveRecord::Base
    belongs_to :parent
end 
```

这是我的表格...

```
<%= form_for @parent.children.new, :remote => true do |t| %>

# form fields...

<%= t.submit 'Save', :class => 'button close_modal', :id => 'submit_button' %> 
```

我的孩子控制器...

```
respond_to :html, :js, :json

def create
    @child = Parent.create(params[:child])
    respond_with(@child.parent)
end 
```

最后是我在 views/children 文件夹中的 create.js.erb 文件（这只是为了测试）......

```
$("#notice").html('this works') 
```

当以上所有方法都不起作用时，我尝试将此脚本添加到表单中......

```
jQuery.ajaxSetup({ 
    'beforeSend': function(xhr) {xhr.setRequestHeader("Accept", "text/javascript")}
});

$("#submit_button").submit(function(){
    $.post($(this).attr("action"), $(this).serialize(), null, "script");
    return false;
}) 
```

但仍然没有运气。我在这里显示的代码将通过子控制器提交表单，然后将我重定向回父/显示视图，这是子表单所在的位置。但是，如果我从子控制器中删除“responds_with(@child.parent)”，我会收到以下错误...

```
Template is missing

Missing template children/create, application/create with 
{:handlers=>[:erb, :builder, :coffee], :formats=>[:html], :locale=>[:en, :en]}. 
Searched in: * "C:/Users/Owner/My Documents/Aptana Studio 3 Workspace/my_app/app/views" 
* "c:/Ruby192/lib/ruby/gems/1.9.1/gems/devise-1.5.2/app/views" 
```

因此，无论哪种情况，我都猜测该表单不是通过 AJAX 提交的。我不知道为什么。我对 Rails 以及一般的编程有点陌生，所以我不太了解 Rails 框架的幕后情况。

另一个可能相关或不相关的注意事项，我注意到我的一些 jQuery 在显示隐藏 div 中的元素时不起作用。例如，我正在处理的这个表单是通过 jQuery 通过显示一个隐藏的 div 来呈现的，而且似乎我必须在部分本身中重新编写一些按钮脚本，因为我已经包含在应用程序中的脚本.js 文件在这些按钮上不起作用，就像在其他按钮上一样。

但是，我认为这不是问题，因为我将表单直接放在视图中（未隐藏），但它仍然不起作用。

编辑

我现在注意到表单是通过 HTML 而不是 JS 提交的。因此，出于某种原因，Rails jQuery 没有绑定到表单并覆盖默认提交操作。可能是什么原因造成的？

编辑

经过进一步研究，我怀疑这个问题与我使用来自 ThemeRoller 的自定义 jQuery 文件有关。我应该做些什么来确保我的自定义 jQuery 不会干扰内置的 Rails jQuery？

有什么想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T04:18:12.263

啊哈！！！所以事实证明我两次包含了 jQuery 库，而且我假设顺序错误。我从 ThemeRoller 下载了一个自定义 jQuery 主题，并且我的 application.html.erb 文件中有一个指向 Google CDN 的链接。所以我在我的应用程序头中删除了对 Google CDN 的引用，然后在我的 application.js 文件中包含一些“//= require”行来引用我的自定义 jQuery 文件。

```
//= require jquery-1.8.2
//= require jquery-1.8.24.custom.js
//= require jquery-ui
//= require jquery_ujs
//= require_tree . 
```

这似乎已经解决了冲突，现在我的 Rails AJAX 调用可以正常工作了！

# .net - 你能在 mdbg 中看到评估堆栈吗？

> ID：13026449
> 
> 赞同：2
> 
> 时间：2012-10-23T08:36:24.950
> 
> 标签：.net, cil, ilasm, mdbg

假设我有以下 CIL：

```
ldc.i4 40 <- a breakpoint is set here
ldc.i4.2
add
box int32
call void [mscorlib]System.Console::WriteLine(string) 
```

然后我`ilasm /debug main.il`用来组装 exe 和 pdb 文件以在 mdbg 中使用。

* * *

我的问题是，当我在第 3 行时，在`add`执行操作之前，我想查看**评估堆栈**，它会显示我之前加载的两个 int32 常量 40 和 2。

如何在 mdbg 中查看此评估堆栈？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:09:21.423

我找到了在 mdbg 中调试时查看评估堆栈所需的命令： `p[rint]`。

```
p[rint]       prints local or debug variables 
```

# c# - 如何使用 itextsharp 更改 PDF 公式的按钮图标？

> ID：13026451
> 
> 赞同：2
> 
> 时间：2012-10-23T08:36:40.217
> 
> 标签：c#, pdf, itextsharp, fdf

我目前正在尝试使用 itextsharp 填写预定义的表单。除了添加图像外，一切都很好。这已经在 Adob​​e 的 FDF 工具包中工作过，该工具包被编译成 .NET 1.1。这不再适用于 .NET 4.0，我切换到 itextsharp。之前添加图像的方式是通过更改预定义形式的按钮图标。正确旋转和缩放图像。不幸的是，我找不到使用 itextsharp 执行此操作的任何方法。代码是：

```
FdfAcX_Doc.FDFSetAP("img", 0, "path\\to\\img.pdf", 1); 
```

（文档： http: [//www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/FDFtkRef.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/FDFtkRef.pdf)）

现在我正在尝试使用 itextsharp 并尝试手动添加图像，例如：

```
PdfContentByte pdfContentByte = pdfStamper.GetOverContent(1);
iTextSharp.text.Image img = iTextSharp.text.Image.GetInstance(picfile);
iTextSharp.text.Rectangle imageRect = new iTextSharp.text.Rectangle(338f, 65f, 250f, 200f, 270);
img.ScaleToFit(imageRect.Width, imageRect.Height);
img.SetAbsolutePosition(65, 250);
pdfContentByte.AddImage(img); 
```

但不幸的是，首先图像没有正确旋转，其次图像太大。我尝试了几种设置，但无法找到正确的设置。有谁知道我做错了什么？

PDF表格可以在这里下载：[http ://www26.zippyshare.com/v/24914063/file.html](http://www26.zippyshare.com/v/24914063/file.html)

请帮忙，我已经坐在这个问题上一天了，想不出更多了。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:37:09.530

您的代码示例与标题中的问题不一致。

在您的代码示例中，您将图像添加到页面的内容中。在您的标题中，您要求替换按钮字段中的图标。按钮字段不是内容的一部分。它们使用小部件注释进行可视化。

我希望代码看起来像这样：

```
AcroFields form = stamper.AcroFields;
PushbuttonField ad = form.GetNewPushbuttonFromField(buttonFieldName);
ad.Layout = PushbuttonField.LAYOUT_ICON_ONLY;
ad.ProportionalIcon = true;
ad.Image = Image.GetInstance(pathToNewImage);
form.ReplacePushbuttonField("advertisement", ad.Field); 
```

# .htaccess - htaccess 用句点重写 url

> ID：13026452
> 
> 赞同：0
> 
> 时间：2012-10-23T08:36:45.550
> 
> 标签：.htaccess

我有以下

> domain.com/products/consumables/jetty 0.18mm

这

> 码头 0.18mm

被 PHP 提取并带入 mysql 以提取产品数据并将其全部显示到页面上。

唯一的问题是，. 在 0.18 中终止搜索，因为 url 认为它是一个扩展。

如何使用 htaccess 重写以获取任何 . 在我的网址的最后一部分，然后重写它以便它可以工作？

我对htaccess一无所知，我们将不胜感激。

**当前的 HTACCESS**

```
RewriteEngine On 

RewriteRule ^([^/.]*)/([^/.]*)$ index.php?c=$1&p=$2 [L]

RewriteRule ^([^/.]*)$ index.php?c=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:38:58.650

```
RewriteRule ^([^/.]*)/(.+)$ index.php?c=$1&p=$2 [L] 
```

我使用了以下有效的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:26:23.840

用此行替换您的 2 RewriteRule 行：

```
RewriteRule ^([^.]+)(\..*)?$ index.php?c=$1&p=$2 [L,QSA,NE] 
```

在您的`index.php`PHP 代码中，将 2 个 GET 参数连接成一个，如下所示：

```
$pname = $_GET["c"];

if (!empty($_GET["p"])
   $pname .= '.' . $_GET["p"]; 
```

# algorithm - 压缩字母数字字符串

> ID：13026453
> 
> 赞同：2
> 
> 时间：2012-10-23T08:36:46.847
> 
> 标签：algorithm, language-agnostic

有没有办法将长度 = 128 * 2 + 1 的字母数字字符串压缩为最短的唯一表示？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T08:38:40.990

当然，但压缩将一如既往地取决于字符串中的可用熵。

我会研究[Huffman coding](http://en.wikipedia.org/wiki/Huffman_coding)作为起点。它相当容易实现，如果您控制压缩/解压缩链的两端，您可能会选择精心挑选的硬编码编码，从而节省更多空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:36:05.633

我想知道您是否只关心“最短的唯一表示”并且*不再需要取回原始字符串*，您始终可以应用和计算哈希。

它可以是任何 SHA 或 MD5 或其他一些。它通常保证是唯一的，但这是一种方式，您无法取回原始数据。

这就是密码在整个互联网上的存储和验证方式。

# php - mysql_escape_string 漏洞

> ID：13026469
> 
> 赞同：3
> 
> 时间：2012-10-23T08:37:39.047
> 
> 标签：php, mysql, sql-parametrized-query

我最近在向我的朋友解释参数化及其优点，他问它比`mysqli_escape_string`安全性更好。具体来说，您能想到任何 SQL 注入示例，尽管输入字符串被转义（使用 mysqli_escape_string），但仍会成功？

更新：

对于我最初的问题不够清楚，我深表歉意。这里要问的一般问题是，尽管转义了输入字符串，SQL 注入是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T08:47:37.603

### 更新的答案

该问题已被编辑（在我的答案发布后）专门针对 target `mysqli_escape_string`，这是一个别名，`mysql_real_escape_string`因此考虑了连接编码。这使得原始答案不再适用，但为了完整起见，我将其保留。

简而言之，新答案在**`mysqli_escape_string`安全方面与参数化查询一样好，前提是您不要误伤自己**。

[具体来说，PHP文档页面](http://www.php.net/manual/en/mysqli.real-escape-string.php)上的巨大警告中突出显示了您不能做的事情：

> 字符集必须在服务器级别设置，或者使用 API 函数`mysqli_set_charset()`设置才能影响 `mysqli_real_escape_string()`.

如果您不注意此警告（即，如果您使用直接`SET NAMES`查询更改字符集）*并且*将字符集从单字节编码更改为“方便”（从攻击者的角度来看）多字节编码，您将拥有实际上模仿了哑巴`mysql_escape_string`的做法：在不知道输入的编码的情况下尝试转义字符。

这种情况使您可能容易受到 SQL 注入的攻击，如下面的原始答案所述。

**重要提示：**我记得在某处读到最近的 MySql 版本已经在其末端（在客户端库中？）堵住了这个漏洞，这意味着即使使用切换到易受攻击的多字节编码，您*也可能是完全安全的。*`SET NAMES`但请不要相信我的话。

### 原始答案

相比之下`mysql_real_escape_string`，bare`mysql_escape_string`不考虑[连接编码](http://dev.mysql.com/doc/refman/5.5/en/charset-connection.html)。这意味着它假设输入采用单字节编码，而实际上它可以合法地采用多字节编码。

一些多字节编码具有对应于单个字符的字节序列，其中一个字节是单引号 ( `0x27`) 的 ASCII 值；如果输入这样一个字符串，`mysql_escape_string`将很高兴地“转义引号”，这意味着`0x27`用`0x5c` `0x27`. 根据编码规则，这可能会导致将多字节字符变为另一个包含 的字符，`0x5c` *并将“剩余”`0x27`作为独立的单引号留在 input 中*。瞧，您在 SQL 中注入了一个未转义的引号。

有关更多详细信息，请参阅[此博客文章](http://ilia.ws/archives/103-mysql_real_escape_string-versus-Prepared-Statements.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T08:58:53.150

## 不好的答案：

> 具体来说，您能想到任何 SQL 注入示例，尽管输入字符串被转义（使用 mysql_escape_string），但仍会成功？

不可靠。您指的是`mysql_escape_string()`，它没有考虑连接编码（虽然`mysql_real_escape_string()`）。

因此，也许一个精心制作的字符串，前面有一个精心制作的不完整 UTF8 代码点，*可能会*导致，比如说，引号被转义，`mysql_escape_string()` *但转义本身被 MySQL 忽略，*因为它会将其“视为”为 UTF8 字符。

例如：

```
0xC2' OR 1=1 ;-- 
```

会被`mysql_escape_string()`as逃脱

```
0xC2\' OR 1=1 ;-- 
```

这将被组装到

```
WHERE password='0xC2\' OR 1=1 ;--'; 
```

并被 MySQL 视为（如果正确的连接编码有效），例如，

```
WHERE password='€' OR 1=1 ;[--';]    <-- the bracketed part is considered a comment and ignored 
```

这将是一个经典的 SQL 注入。

但这取决于您指定的事实，也许是通过分心，一个**双重弃用的功能**。如果你真的指的是`mysql_real_escape_string()`，那么它就行不通了。

此外，这假定服务器和应用程序层（例如 PHP）在填充输入时都没有使用任何类型的字符集验证。如果他们这样做了，无效的 UTF8 将在到达时被删除，甚至永远不会被 看到`mysql_escape_string`，这当然就足够了。

## 真正的答案：

根本不要使用`mysql_escape_string`（或`mysql_whatever`）。它们已被弃用，您的代码可能会停止工作。请改用 PDO 函数。

# html - 渐变在 Safari 中不起作用

> ID：13026482
> 
> 赞同：0
> 
> 时间：2012-10-23T08:38:39.727
> 
> 标签：html, css, web

由于某种原因，我的渐变在 Safari 中不起作用。它适用于所有其他浏览器，包括 IE，但不适用于 safari。有谁知道这个问题的解决方案？

谢谢

```
#menuwrapper {
width: 100%;
height: 50px;
margin: 0;
clear: both;
background: #2c3a54; 
background: -moz-linear-gradient(left,  #1f2b42 2%, #2a3c5d 29%, #2a3c5d 70%, #1f2b42 100%); /* FF3.6+ */

background: -webkit-gradient(linear, left top, right top, color-stop(2%,#1f2b42), color-stop(29%,#2a3c5d), color-stop(70%,#2a3c5d), color-stop(100%,#1f2b42)); /* Chrome,Safari4+ */

background: -webkit-linear-gradient(left,  #1f2b42 2%,#2a3c5d 29%,#2a3c5d 70%,#1f2b42 100%); /* Chrome10+,Safari5.1+ */

background: -o-linear-gradient(left,  #1f2b42 2%,#2a3c5d 29%,#2a3c5d 70%,#1f2b42 100%); /* Opera 11.10+ */

background: -ms-linear-gradient(left,  #1f2b42 2%,#2a3c5d 29%,#2a3c5d 70%,#1f2b42 100%); /* IE10+ */

background: linear-gradient(to right,  #1f2b42 2%,#2a3c5d 29%,#2a3c5d 70%,#1f2b42 100%); /* W3C */

filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1f2b42', endColorstr='#2a3c5d',GradientType=1 ); /* IE6-8 */
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:41:19.760

这适用于Safari，

```
#gradient_background {
     background: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#e4e4e4));
     background: -moz-linear-gradient(top, #ffffff, #038ec8);
     filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffffff, endColorstr=#e4e4e4);
     -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#ffffff, endColorstr=#e4e4e4)";
     background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #ffffff), color-stop(50%, #f7f7f7), color-stop(50%, #f7f7f7), color-stop(100%, #e4e4e4));
     background-image: -webkit-linear-gradient(top, #ffffff 0%, #f7f7f7 50%, #f7f7f7 50%, #e4e4e4 100%);
     background-image: -moz-linear-gradient(top, #ffffff 0%, #f7f7f7 50%, #f7f7f7 50%, #e4e4e4 100%);
     background-image: -ms-linear-gradient(top, #ffffff 0%, #f7f7f7 50%, #f7f7f7 50%, #e4e4e4 100%);
     background-image: -o-linear-gradient(top, #ffffff 0%, #f7f7f7 50%, #f7f7f7 50%, #e4e4e4 100%);
     background-image: linear-gradient(top, #ffffff 0%, #f7f7f7 50%, #f7f7f7 50%, #e4e4e4 100%); 
} 
```

# c# - 将类属性转换为键值对

> ID：13026484
> 
> 赞同：5
> 
> 时间：2012-10-23T08:38:42.803
> 
> 标签：c#

我有这两个课

```
public class BuyEstimateResult
{
    public string SubTitle { get; set; }
    public string Value { get; set; }
    public string Formulae { get; set; }
}
public class SellerReportClass
{
    public string Entityname { get; set; }
    public double EntityAmt { get; set; }
    public string Formulae { get; set; }
} 
```

我必须使它们应该转换为

```
public class KeyValue
{
    public string key {get;set;}
    public string value {get;set;}
} 
```

如果我通过 BuyEstimateResult，它的 SubTitle 应该是 key，Value 应该是 KeyValue 类的 Value，如果我通过 SellerReportClass，那么 Entityname 应该是 key，EntityAmt 应该是 Value

任何想法怎么做

注意：我会得到这两个类的列表

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T08:41:40.523

您可以使用`implicit`C# 中的运算符将其转换为`KeyValue`您想要的 - [http://msdn.microsoft.com/en-us/library/z5z9kes2(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/z5z9kes2(v=vs.110).aspx)

```
public static implicit operator KeyValue(BuyEstimateResult ber)
{
     return new KeyValue { Key = ber.SubTitle, Value = ber.Value }
} 
```

**编辑**

要更具体地了解如何实现这一点：

```
public class BuyEstimateResult
{
    public string SubTitle { get; set; }
    public string Value { get; set; }
    public string Formulae { get; set; }

    public static implicit operator KeyValue(BuyEstimateResult ber)
    {
        return new KeyValue {Key = ber.SubTitle, Value = ber.Value};
    }
}

public class SellerReportClass
{
    public string Entityname { get; set; }
    public double EntityAmt { get; set; }
    public string Formulae { get; set; }

    public static implicit operator KeyValue(SellerReportClass sell)
    {
        return new KeyValue { Key = sell.Entityname, Value = sell.EntityAmt.ToString(CultureInfo.InvariantCulture)};
    }
}

public class KeyValue
{
    public string Key { get; set; }
    public string Value { get; set; }
}

public class Program
{
    static void Main()
    {
        var listB = new List<BuyEstimateResult>
                        {
                            new BuyEstimateResult {SubTitle = "BER1", Value = "BER1_VALUE"},
                            new BuyEstimateResult {SubTitle = "BER2", Value = "BER2_VALUE"}
                        };

        var listS = new List<SellerReportClass>
                        {
                            new SellerReportClass {Entityname = "SELL1", EntityAmt = 1.0},
                            new SellerReportClass {Entityname = "SELL2", EntityAmt = 2.5}
                        };

        foreach (KeyValue kv in listB)
            Console.WriteLine(kv.Key + ":" + kv.Value);

        foreach (KeyValue kv in listS)
            Console.WriteLine(kv.Key + ":" + kv.Value);
    }
} 
```

要从两个不同的列表中获取一个`KeyValue`对象列表，您可以执行以下操作：

```
var KeyValueList = listB.ConvertAll(i => (KeyValue) i);
KeyValueList.AddRange(listS.ConvertAll(i => (KeyValue) i)); 
```

# node.js - 创建后如何在 mongoose 中填充子文档？

> ID：13026486
> 
> 赞同：59
> 
> 时间：2012-10-23T08:38:49.713
> 
> 标签：node.js, mongodb, express, mongoose

我正在向 item.comments 列表添加评论。在将其输出到响应中之前，我需要获取 comment.created_by 用户数据。我该怎么做？

```
 Item.findById(req.param('itemid'), function(err, item){
        var comment = item.comments.create({
            body: req.body.body
            , created_by: logged_in_user
        });

        item.comments.push(comment);

        item.save(function(err, item){
            res.json({
                status: 'success',
                message: "You have commented on this item",

//how do i populate comment.created_by here???

                comment: item.comments.id(comment._id)
            });
        }); //end item.save
    }); //end item.find 
```

我需要在我的 res.json 输出中填充 comment.created_by 字段：

```
 comment: item.comments.id(comment._id) 
```

comment.created_by 是我的猫鼬 CommentSchema 中的用户参考。它目前只给我一个用户 ID，我需要用所有用户数据填充它，除了密码和盐字段。

这是人们要求的架构：

```
var CommentSchema = new Schema({
    body          : { type: String, required: true }
  , created_by    : { type: Schema.ObjectId, ref: 'User', index: true }
  , created_at    : { type: Date }
  , updated_at    : { type: Date }
});

var ItemSchema = new Schema({
    name    : { type: String, required: true, trim: true }
  , created_by  : { type: Schema.ObjectId, ref: 'User', index: true }
  , comments  : [CommentSchema]
}); 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-23T13:09:19.860

为了填充引用的子文档，您需要显式定义 ID 引用的文档集合（如`created_by: { type: Schema.Types.ObjectId, ref: 'User' }`）。

鉴于此引用已定义并且您的架构也已明确定义，您现在可以`populate`照常调用（例如`populate('comments.created_by')`）

概念验证代码：

```
// Schema
var mongoose = require('mongoose');
var Schema = mongoose.Schema;

var UserSchema = new Schema({
  name: String
});

var CommentSchema = new Schema({
  text: String,
  created_by: { type: Schema.Types.ObjectId, ref: 'User' }
});

var ItemSchema = new Schema({
   comments: [CommentSchema]
});

// Connect to DB and instantiate models    
var db = mongoose.connect('enter your database here');
var User = db.model('User', UserSchema);
var Comment = db.model('Comment', CommentSchema);
var Item = db.model('Item', ItemSchema);

// Find and populate
Item.find({}).populate('comments.created_by').exec(function(err, items) {
    console.log(items[0].comments[0].created_by.name);
}); 
```

最后请注意，这`populate`仅适用于查询，因此您需要首先将您的项目传递给查询，然后调用它：

```
item.save(function(err, item) {
    Item.findOne(item).populate('comments.created_by').exec(function (err, item) {
        res.json({
            status: 'success',
            message: "You have commented on this item",
            comment: item.comments.id(comment._id)
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-07-06T17:49:36.397

自从编写了原始答案以来，这可能已经改变，但看起来您现在可以使用 Models populate 函数来执行此操作，而无需执行额外的 findOne。请参阅： http: [//mongoosejs.com/docs/api.html#model_Model.populate](http://mongoosejs.com/docs/api.html#model_Model.populate)。您想在保存处理程序中使用它，就像 findOne 一样。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-01-18T15:35:16.840

@user1417684 和 @chris-foster 是对的！

工作代码的摘录（没有错误处理）：

```
var SubItemModel = mongoose.model('subitems', SubItemSchema);
var ItemModel    = mongoose.model('items', ItemSchema);

var new_sub_item_model = new SubItemModel(new_sub_item_plain);
new_sub_item_model.save(function (error, new_sub_item) {

  var new_item = new ItemModel(new_item);
  new_item.subitem = new_sub_item._id;
  new_item.save(function (error, new_item) {
    // so this is a valid way to populate via the Model
    // as documented in comments above (here @stack overflow):
    ItemModel.populate(new_item, { path: 'subitem', model: 'subitems' }, function(error, new_item) {
      callback(new_item.toObject());
    });
    // or populate directly on the result object
    new_item.populate('subitem', function(error, new_item) {
      callback(new_item.toObject());
    });
  });

}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-12T22:35:44.107

我遇到了同样的问题，但经过数小时的努力，我找到了解决方案。它可以不使用任何外部插件:)

```
applicantListToExport: function (query, callback) {
  this
   .find(query).select({'advtId': 0})
   .populate({
      path: 'influId',
      model: 'influencer',
      select: { '_id': 1,'user':1},
      populate: {
        path: 'userid',
        model: 'User'
      }
   })
 .populate('campaignId',{'campaignTitle':1})
 .exec(callback);
} 
```

# c# - 如何读取 dbase 文件并应用不同的解码？

> ID：13026489
> 
> 赞同：4
> 
> 时间：2012-10-23T08:38:55.953
> 
> 标签：c#, character-encoding, visual-foxpro, dbase

我有一个以 866 代码页 (DOS) 结尾的 dbf 文件

使用下面的代码，我正在尝试阅读它。问题是我得到的字符串就像文件在代码页 1252 中一样形成。到目前为止，我已经检查了 SO 和其他论坛上的其他问题，但没有运气。寻找关于热门的想法以正确阅读。

```
var ConnectionString = @"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\PathtoFile\;Extended Properties=""dBase 5.0""";
var  dBaseConnection = new System.Data.OleDb.OleDbConnection(ConnectionString );

dBaseConnection.Open();

var dBaseCommand = new System.Data.OleDb.OleDbCommand("SELECT * FROM FileName",dBaseConnection);
var dBaseDataReader =  dBaseCommand.ExecuteReader(CommandBehavior.SequentialAccess);

while( dBaseDataReader.Read()){

Encoding.GetEncoding(866).GetString(Encoding.GetEncoding(1252).GetBytes(dBaseDataReader.GetString(2)).Dump();  // Does not help 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T14:06:39.580

文件来自哪里？同一文件夹中还有哪些其他文件扩展名（例如 FPT/CDX/IDX/NTX）？这应该给我们一个关于它是 VFP 还是 dBase 或 Clipper 或其他东西的线索。

[如果它是 Visual Foxpro (VFP) 数据，那么您应该从http://www.microsoft.com/en-gb/download/details.aspx?id=14839](http://www.microsoft.com/en-gb/download/details.aspx?id=14839)安装 VFPOLEDB 提供程序，并使用从[http](http://www.connectionstrings.com/visual-foxpro#vfp-ole-db-provider)获取的以下连接字符串之一[://www.connectionstrings.com/visual-foxpro#vfp-ole-db-provider](http://www.connectionstrings.com/visual-foxpro#vfp-ole-db-provider)。

数据库容器 (.DBC)：

```
Provider=vfpoledb;Data Source=C:\MyDbFolder\MyDbContainer.dbc;Collating Sequence=machine; 
```

空闲表目录：

```
Provider=vfpoledb;Data Source=C:\MyDataDirectory\;Collating Sequence=general; 
```

连接到单个 DBF 文件：

```
Provider=vfpoledb;Data Source=C:\MyDataDirectory\MyTable.dbf;Collating Sequence=machine; 
```

有关 VFPOLEDB 提供程序的更多信息，请访问[http://msdn.microsoft.com/en-us/library/aa975609%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa975609%28v=vs.71%29.aspx)

出于兴趣，您怎么知道它被编码为代码页 866？Visual Foxpro DBF 中偏移量 29 处的字节存储代码页标记。请参阅[http://msdn.microsoft.com/en-us/library/aa975386%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa975386%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:44:40.140

我没有看到您获得 1252 编码数据的证据。您的代码尝试从 1252 转换为 866 代码页失败。因此它不在 1252 代码页中。我目前修复了驱动程序返回非单字节字符串的问题。可能也是你的问题。

解决方案：

检查 HKLM\SOFTWARE\Microsoft\Jet\4.0\Engines\Xbase\BDE 键的值。它必须是 2。如果不存在或密钥不存在（这是我的情况），请创建 DWORD 参数并将其设置为 2。

您可以在此处找到有关此密钥的更多信息：http: [//support.microsoft.com/kb/307455/en-us](http://support.microsoft.com/kb/307455/en-us)

# .net - 如何获得网络服务的响应？

> ID：13026493
> 
> 赞同：0
> 
> 时间：2012-10-23T08:39:12.493
> 
> 标签：.net, xml, vb.net, web-services, soap

所以我试图将我的 xml 文件发送到 web 服务。

当我尝试获得响应时，它给了我一个内部服务器 500 错误。我试着查了一下，但我得到了类似的东西：

**确保设置了用户代理**

通过我正在使用的这个 web 服务，我得到了 java 的示例代码，但它对用户代理没有任何作用。所以我认为它会解决我的问题是不幸的。我没有尝试过的原因是我不完全知道如何将它与 Net.WebRequest 结合使用。

**设置 webrequest 的 header**

我不知道在那个标题中放什么。但显然有些人（将其标记为答案，它确实解决了他们的问题，但没有说明他们从答案中究竟得出了什么结论。看到诸如“谢谢，你的代码给了我一个想法”之类的东西，那就是帖子死了。

我还做了一些其他的小改动，显然解决了他们的问题（我都试过了）。

**我想做什么？** 好吧，我正在尝试将 xml 发送到 web 服务，然后得到响应。响应部分出错了，内部服务器出现 500 错误。网络服务应该发回信息。请注意，我没有使用 Web 参考，因为显然 WSDL 不起作用（所以那里不会有解决方案。）所以我在“System.Net.Webrequest”的帮助下发送我的代码。

```
 Dim req As System.Net.HttpWebRequest = DirectCast(System.Net.WebRequest.Create(url), Net.HttpWebRequest)
    req.ContentType = "text/xml"
    req.Method = "POST"
    req.ContentLength = sentXml.Length
    'the credentials are set somewhere in a string(these are correct)
    req.Credentials = creds 
```

然后我继续将 sentXml 写入 getRequestStream 变量。然后我调用 getResponse 方法。这就是它拒绝工作的地方。

**我的问题：** 我的故障排除步骤应该是什么？由于我是 Web 服务的新手，我可能忘记了什么或做错了什么？任何可以为我指明正确方向的人都会有所帮助。

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:41:10.407

尝试通过 Rest Console 发送您的请求，例如[https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo](https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo)这是 Google Chrome 的扩展。

# css - 选择一个类中所有出现的元素，而不考虑 ID

> ID：13026494
> 
> 赞同：2
> 
> 时间：2012-10-23T08:39:13.173
> 
> 标签：css, css-selectors

我正在尝试稍微压缩我的 CSS，但我遇到了这个问题。我正在使用 CSS 背景将一些文本链接换成具有简单滚动效果的图像。这些图像的高度都相同（除了每个 div 中的 1 个，第一个），所以我试图用 2 个 CSS 规则来处理它们，一个用于所有这些，一个用于更大的第一个链接。这是一个例子：

```
<div id="div1" class="common">
    <a id="link0" class="big" href="link"></a>

    <a id="link1" href="link"></a>

    <a id="link2" href="link"></a>

    <a class="class1" href="link"></a>
    <a id="link3" href="link"></a>
</div>
<div id="div2" class="common">
    ...
</div> 
```

等等。我正在使用以下 CSS：

```
.class1
{
    background:url(images/pdf.png);
    display:block;
    height:38px;
    width:39px;
}

.common a:hover
{
    background-position:0 -38px;
}

.common a.big:hover
{
    background-position:0 -117px;
}

#div1
{
    background:url(images/bg1.png);
}

#link0
{
    background:url(images/big1.png);
    display:block;
    height:117px;
    width:964px;
}

#link1
{
    background:url(images/1_1.png);
    display:block;
    height:38px;
    width:425px;
}

#link2
{
    background:url(images/1_2.png);
    display:block;
    height:38px;
    width:425px;
}

#link3
{
    background:url(images/1_3.png);
    display:block;
    height:38px;
    width:425px;
} 
```

问题是这似乎没有将`background-position`规则应用于具有 ID（#link0、#link1 等）的链接，但它确实选择了一个没有 ID（.class1）的链接。如果我将`.common a:hover`选择器更改为`#div1 a:hover`if 有效，但我必须为每个 div 设置一个规则，这与我想要做的相反。

我究竟做错了什么？我不能使用 JQuery，它必须是纯 CSS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:42:31.787

为此，您必须在 ID **link0、link1等中定义****背景图像**而不是**背景**。这样写：

 **```
#link0
{
    background-image:url(images/big1.png);
}

#link1
{
    background-image:url(images/1_1.png);
}

#link2
{
    background-image:url(images/1_2.png);
}

#link3
{
    background-image:url(images/1_3.png);
} 
```**

# java - jsf 2.0 如何显示连接表中的数据？

> ID：13026495
> 
> 赞同：0
> 
> 时间：2012-10-23T08:39:18.837
> 
> 标签：java, jsf, xhtml

如何在 jsf 2.0 中显示来自两个连接表的数据？

我已经管理了 bean 目录（代表我数据库中的表）：

```
public class Catalog implements Serializable{

//gettters and setters and atrributes } 
```

我有另一个托管bean（代表我数据库中的另一个表）：

```
public class Profit implements Serializable{

//gettters and setters and attributes} 
```

我有一个返回查询的方法，该查询将这两列（来自数据库）与 Catalog id 属性连接起来。

我不知道要给这个方法什么返回值以及如何在 jsf xhtml 页面中显示连接数据......

这是我的方法：

```
 public <what return value to put> method throws Exception { 

     connect(); //to databse

     String query="SELECT....";
     //this query is prefectly good, i tested it in sql server, it does the job
     Statement st=connection.createStatement();
     ResultSet rs=st.executeQuery(upit);

     while(rs.next()) {

          //setting the values from my databse

     }

     return <what to return here> //this is the trick part
         } 
```

要设置什么返回值以及如何在 xhtml 页面上显示它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:48:01.280

创建一个包含 Catalog 和 Profit 的新类，或者仅包含在 JOIN 中使用的 Catalog 和 Profit 中的那些字段。

# android - 如何在android中发送关键事件？

> ID：13026505
> 
> 赞同：11
> 
> 时间：2012-10-23T08:39:53.410
> 
> 标签：android, android-event

我正在为 Android 4.0.3.r1 制作一个自定义导航栏，并希望发送诸如“Home”和“Back”之类的关键事件。因此，我的应用程序不是系统：

```
IWindowManager mWindowManager = IWindowManager.Stub.asInterface(
                ServiceManager.getService(Context.WINDOW_SERVICE));
mWindowManager.injectKeyEvent( ev, false ); 
```

它不起作用，因为我无法`android.permission.INJECT_EVENTS`从非系统应用程序中获取。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-13T06:41:50.823

```
BaseInputConnection  mInputConnection = new BaseInputConnection(targetView, true);
mInputConnection.sendKeyEvent(new KeyEvent(...)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-13T15:58:55.263

[这是罗马](https://stackoverflow.com/a/18202307/3648780)答案的一些精确度

```
BaseInputConnection  mInputConnection = new BaseInputConnection( findViewById(R.id.main_content), true);
KeyEvent kd = new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_MENU);
KeyEvent ku = new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_MENU);
mInputConnection.sendKeyEvent(kd);
mInputConnection.sendKeyEvent(ku); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-26T17:15:17.497

对我有用：</p>

```
public static void simulateKey(final int KeyCode) {

    new Thread() {
        @Override
        public void run() {
            try {
                Instrumentation inst = new Instrumentation();
                inst.sendKeyDownUpSync(KeyCode);
            } catch (Exception e) {
                Log.e("Exception when sendKeyDownUpSync", e.toString());
            }
        }

    }.start();
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-14T02:13:25.353

你可以试试这个

```
try
{
    String keyCommand = "input keyevent " + KeyEvent.KEYCODE_MENU;
    Runtime runtime = Runtime.getRuntime();
    Process proc = runtime.exec(keyCommand);
}
catch (IOException e)
{
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

当然，您可以选择`input text ...`输入文本的命令。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-26T15:29:56.730

这些都不是有效的。从使用下面的代码转到主屏幕。

```
Intent home = new Intent(Intent.ACTION_MAIN);
home.addCategory(Intent.CATEGORY_HOME);
//home.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(home); 
```

如果您不是从活动/片段调用，则可能必须取消注释标志部分。回到下面的代码适用于某些设备。

```
dispatchKeyEvent(new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_BACK));
dispatchKeyEvent(new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_BACK)); 
```

让我知道这是否有帮助！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-09-11T12:23:07.783

我以前也遇到过同样的问题，下面我解决了 KEY_INJECT_EVENT_PERMISSION 问题。

第 1 步：您需要获取设备 ROM 的签名（对我来说文件名为 signapk）。

第二步：接下来需要获取platform.pk8和platform.x509.pem文件。

第 3 步：生成应用程序的调试 apk。

第 4 步：将上述所有文件放在一个文件夹中。

第 5 步：获得所有上述文件后，运行下面提到的命令。

java -jar signapk.jar platform.x509.pem platform.pk8 your_debug_app.apk customname.apk

第 6 步：在此之后，您可以在同一个文件夹中获得一个签名的 apk（customname.apk）。一旦获得，运行以下命令。

adb install -r app-release-signed.apk

第 7 步：现在将启用 Inject_Event_Permisson。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-14T16:05:13.813

还有`InputConnection`的`sendKeyEvent`功能。`InputConnection`只是 API 级别 3。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-18T11:22:34.910

你可以试试这个。

```
long now = SystemClock.uptimeMillis();
BaseInputConnection mInputConnection = new BaseInputConnection(findViewById(R.id.MainActivity), true);
KeyEvent down = new KeyEvent(now, now, KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_HOME, 0);
mInputConnection.sendKeyEvent(down); 
```

这段代码可以为我工作。

注意：请记住将“R.id.MainActivity”替换为您的活动名称。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-26T22:09:48.327

恢复旧线程 - 您可以使用相对较新的 Accessibility API 执行 Home 和 Back - 在此处查看“performGlobalAction”：http: [//developer.android.com/reference/android/accessibilityservice/AccessibilityService.html](http://developer.android.com/reference/android/accessibilityservice/AccessibilityService.html)

（特别是 GLOBAL_ACTION_HOME 和 GLOBAL_ACTION_BACK 动作）

当然，您需要适当的辅助功能服务权限，但这不需要 root

# c# - c#动态web服务调用返回自定义类

> ID：13026515
> 
> 赞同：0
> 
> 时间：2012-10-23T08:40:27.937
> 
> 标签：c#, web-services, reflection, types

我有一个类提供对 Web 服务的动态调用。

```
private System.Xml.XmlTextReader _XmlReader;
private System.Web.Services.Description.ServiceDescription _ServiceDescription;
private System.Web.Services.Description.ServiceDescriptionImporter _DescriptionImporter;
private System.CodeDom.CodeNamespace _CodeNamespace;
private System.CodeDom.CodeCompileUnit _CodeUnit;
private System.Web.Services.Description.ServiceDescriptionImportWarnings _ImportWarnings;
private System.CodeDom.Compiler.CodeDomProvider _Compiler;
private System.CodeDom.Compiler.CompilerParameters _Parameters;
private System.CodeDom.Compiler.CompilerResults _Results;
private System.Reflection.Assembly _WebServiceAssembly;
private string _Url;

public WebServiceInvoker(string url)
{
  _Url = url;
  System.Net.ServicePoint servicePoint = System.Net.ServicePointManager.FindServicePoint(new Uri(_Url));
  servicePoint.Expect100Continue = false;
  _XmlReader = new System.Xml.XmlTextReader(_Url);
  _ServiceDescription = System.Web.Services.Description.ServiceDescription.Read(_XmlReader);
  _DescriptionImporter = new System.Web.Services.Description.ServiceDescriptionImporter();
  _DescriptionImporter.ProtocolName = "Soap";
  _DescriptionImporter.AddServiceDescription(_ServiceDescription, null, null);
  _DescriptionImporter.Style = System.Web.Services.Description.ServiceDescriptionImportStyle.Client;
  _DescriptionImporter.CodeGenerationOptions = System.Xml.Serialization.CodeGenerationOptions.GenerateProperties;
  _CodeNamespace = new System.CodeDom.CodeNamespace();
  _CodeUnit = new System.CodeDom.CodeCompileUnit();
  _CodeUnit.Namespaces.Add(_CodeNamespace);
  _ImportWarnings = _DescriptionImporter.Import(_CodeNamespace, _CodeUnit);
  if (_ImportWarnings != 0) throw new Exception("Can not resolve registration service.");
  _Compiler = System.CodeDom.Compiler.CodeDomProvider.CreateProvider("CSharp");
  string[] references = new string[] { "System.Web.Services.dll", "System.Xml.dll" };
  _Parameters = new System.CodeDom.Compiler.CompilerParameters(references);
  _Results = _Compiler.CompileAssemblyFromDom(_Parameters, _CodeUnit);
  foreach (System.CodeDom.Compiler.CompilerError oops in _Results.Errors) { throw new Exception("Compile Error Creating Assembly"); }
  _WebServiceAssembly = _Results.CompiledAssembly;
}

public LYSProducts.ProductObject GetProduct(string productCode)
{
  LYSProducts.ProductObject p;
  object obj = _WebServiceAssembly.CreateInstance("RegisteryService");
  Type typ = obj.GetType();
  p = (LYSProducts.ProductObject)typ.InvokeMember("GetProduct", System.Reflection.BindingFlags.InvokeMethod, null, obj, new object[] { productCode });
  return p;
} 
```

GetProduct 方法返回一个自定义类。

```
 namespace LYSProducts
{
  [Serializable()]
  class ProductObject
  {
    public string ProductCode
    {
      get { return _ProductCode; }
      set { _ProductCode = value; }
    }
    public string ProductName
    {
      get { return _ProductName; }
      set { _ProductName = value; }
    }
    public string MajorVer
    {
      get { return _MajorVer; }
      set { _MajorVer = value; }
    }
    public string MinorVer
    {
      get { return _MinorVer; }
      set { _MinorVer = value; }
    }
private string _ProductCode;
private string _ProductName;
private string _MajorVer;
private string _MinorVer;

public ProductObject(string productCode, string productName)
{
  _ProductCode = productCode;
  _ProductName = productName;
  _MajorVer = "";
  _MinorVer = "";
}
public ProductObject(string productCode, string productName, string majorVer, string minorVer)
{
  _ProductCode = productCode;
  _ProductName = productName;
  _MajorVer = majorVer;
  _MinorVer = minorVer;
}
  }
} 
```

代码工作正常。但是“typ.InvokeMember”方法返回一个对象，我不知道如何将其转换为 LYSProducts.ProdutcObject 类。我在客户端部署了相同的类，但是当我尝试强制转换时，我收到“无法将'ProductObject'类型的对象转换为'LYSProducts.ProductObject'”错误。我知道该服务必须为“ProductObject”类型提供一些架构，我可以使用反射从该信息创建一个 ProductObject，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:37:36.987

```
 /// <summary>
    /// Invokes the specified method of the named service.
    /// </summary>
    /// <by>J.BETTAIEB</by>
    /// <typeparam name="T">The expected return type.</typeparam>
    /// <param name="serviceName">The name of the service to use.</param>
    /// <param name="methodName">The name of the method to call.</param>
    /// <param name="args">The arguments to the method.</param>
    /// <returns>The return value from the web service method.</returns>
    public T InvokeMethod<T>( string serviceName, string methodName, params object[] args )
    {
        // create an instance of the specified service
        // and invoke the method
        object obj = this.webServiceAssembly.CreateInstance(serviceName);

        Type type = obj.GetType();

        return (T)type.InvokeMember(methodName, BindingFlags.InvokeMethod, null, obj, args);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:07:00.863

这是我解决问题的方法。也许有人会得到一些帮助。

```
public ServiceResponseBase GetProduct(string productCode)
      {
        object obj = _WebServiceAssembly.CreateInstance("RegisteryService");
        Type typ = obj.GetType();
        object o = typ.InvokeMember("GetProduct", System.Reflection.BindingFlags.InvokeMethod, null, obj, new object[] { productCode });
        return InstantiateObject<ProductResponse>(o);
      }

private T InstantiateObject<T>(object o) where T : class
      {
        Type t = o.GetType();
        object r = Activator.CreateInstance(typeof(T));
        foreach (System.Reflection.PropertyInfo p in t.GetProperties()) r.GetType().GetProperty(p.Name).SetValue(r, p.GetValue(o, null), null);
        return (T)r;
      } 
```

ProductResponse 类派生自 ServiceResponseBase 。

# python - 导入 Cython 模块时出现未定义符号错误

> ID：13026523
> 
> 赞同：10
> 
> 时间：2012-10-23T08:40:59.447
> 
> 标签：python, cython, distutils, undefined-reference

我想将我的 C++ 类之一作为 Python 模块提供。该类在标头中声明`Foo.h`并在 .cpp 中实现`Foo.cpp`。（g++-4.5，Ubuntu x86_64）。这是一个非常非常简单的类：

`Foo.cpp`：

```
Foo::Foo() : alfa(1.0), beta(1)
{

}

Foo::~Foo()
{
} 
```

`Foo.h`：

```
 class Foo
 {
 public:

  Foo()
  Foo(const Foo& orig);
  ~Foo();
  double alfa;
  int beta; 
 }; 
```

我创建了一个`setup.py`如 Cython 教程中所示的：

`setup.py`

```
from distutils.core import setup
from distutils.extension import Extension
from Cython.Distutils import build_ext

setup(
  name = 'MyDemo',
  ext_modules=[
    Extension("Foo"
          sources=["Foo.pyx"], 
          include_dirs=[".","../eigen/"],
          language="c++"),
    ],
  cmdclass = {'build_ext': build_ext},
) 
```

并按照 cython 教程的说明编写我的`Foo.pyx`cython 模块：

`Foo.pyx`

```
cdef extern from "Foo.h":
    ctypedef struct c_Foo "Foo":
        double alfa
    c_Foo *new_Foo "new Foo" ()
    void del_Foo "delete" (c_Foo *myfoo)

cdef class Foo:
    cdef c_Foo *thisptr      # hold a C++ instance which we're wrapping
    def __cinit__(self):
         self.thisptr = new_Foo()
    def __dealloc__(self):
         del_Foo(self.thisptr) 
```

我使用以下命令编译它： `python setup.py build_ext --inplace`

```
running build_ext
skipping 'Foo.cpp' Cython extension (up-to-date)
building 'Foo extension
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I. -I../eigen/ -I/usr/include/python2.6 -c Foo.cpp -o build/temp.linux-x86_64-2.6/Foo.o
cc1plus: warning: command line option "-Wstrict-prototypes" is valid for Ada/C/ObjC but not for C++
g++ -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions build/temp.linux-x86_64-2.6/Foo.o -o /home/linello/prova/Foo.so 
```

现在`Foo.so`创建了共享库对象，但是当我想从 python 导入它时，我得到：

```
 >>> import Foo
      Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
      ImportError: ./Foo.so: undefined symbol: _ZN4FooD1Ev
>>> 
```

我认为**_ZN4FooD1Ev**是构造函数的错误名称，`Foo`但不明白如何丢失符号。

我真的不明白共享对象文件中缺少什么符号。作为第二点，在`python setup.py build_ext --inplace`命令之后，我的`Foo.cpp`文件被**弄乱了**，并且包含了 cythonized 版本。

如何以另一种格式（例如`.cxx`）重命名 cythonized 文件并避免该链接器错误？

然后我修改了`Foo.pyx`in`pFoo.pyx`并因此修改了，现在在 setup 命令之后我有in`setup.py`的 cythonized 版本但是当我尝试导入时`pFoo.pyx``Foo.cxx`

`ImportError: dynamic module does not define init function (initpyFoo)`

我的设置有什么问题以及如何解决我的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T17:40:32.047

我建议您为 cython 模块使用不同的名称，例如 cFoo，以避免名称冲突问题：

```
from distutils.core import setup
from Cython.Build import cythonize

setup(ext_modules = cythonize(
           "cFoo.pyx",                 # our Cython source
           sources=["Foo.cpp"],        # additional source file(s)
           language="c++",             # generate C++ code
      )) 
```

要定义 C++ 类，请使用“cppclass”关键字，如下所示：

```
cdef extern from "Foo.h":
    cdef cppclass Foo:
        Foo()
        double alfa
        int beta 
```

然后，您应该能够像这样访问您的课程：

```
cdef Foo *foo = new Foo()
foo.beta = 42 
```

# android - 列表视图中的 EditText

> ID：13026526
> 
> 赞同：1
> 
> 时间：2012-10-23T08:41:03.637
> 
> 标签：android

我正在编写一个自定义列表视图，并放置了一个 EditText 和 textViews。问题是专注于列表不起作用。当我触摸 EditText 时，出现软键盘但 EditText 失去焦点。当我再次触摸它时，软键盘会发生变化，我可以在按下“完成”后在 EditText 中写入。EditText 被清除。你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:58:47.113

这可能只是我在这里说的一件愚蠢的事情，但您可以尝试以下操作：`OnClickListener`在`ListView`物品上放置一个。如果您单击列表中的某个项目，并且该项目是`EditText`，则使用“requestFocus()”方法对其进行聚焦。

我在想，但我可能错了，当您单击它们时， the`EditText`和item（行）都在请求焦点，并且可能“获胜”:) 但这只是一个猜测，我可能错了。`ListView``ListView`

```
 ((ListView)findViewById(R.id.myListView)).setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapter, View view, int position, long id) {              
                   /* Here, check to see if the item clicked is the EditText or whatever.
                    * If so, then set focus to it */
            }
        }); 
```

# linux - erlang odbc：如何禁用 oracle 的自动提交

> ID：13026528
> 
> 赞同：5
> 
> 时间：2012-10-23T08:41:13.500
> 
> 标签：linux, oracle, erlang, odbc

我需要在 Linux 中使用 erlang odbc 模块禁用 oracle 的自动提交。我创建了与代码的连接：

```
{ok, Con} = odbc:connect("DSN=MyDSN", [{auto_commit, off}, {scrollable_cursors, off}]). 
```

连接已成功创建。当我尝试更新表时，请求成功，但它是自动提交的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T05:30:07.247

好，朋友们。我自己解决了这个问题。正如我之前在评论中所说，问题是用于 Linux 的 Oracle ODBC 驱动程序在创建连接之前的驱动程序初始化期间忽略了设置自动提交模式。并且在已经创建连接之后，自动提交模式被正确设置。

我为 erlang odbc 模块的 C 源代码创建了一个修复程序，现在它可以正常工作了。你可以在这里获取我的 Erlang OTP 补丁 - [https://github.com/RubberCthulhu/erlang-odbc-oracle-fix](https://github.com/RubberCthulhu/erlang-odbc-oracle-fix)。

**更新：**这个消息来晚了，但在这里通知它可能是有用的。我对 Oracle ODBC 的修复已包含在 Erlang/OTP 中。因此，自从 R16A 以来，问题并不实际，如果您需要将 ODBC 与 Oracle 一起使用，只需尝试最新版本的 Erlang/OTP。R14B04-R15B02 的补丁可在此处获取 - [https://github.com/RubberCthulhu/erlang-odbc-oracle-fix](https://github.com/RubberCthulhu/erlang-odbc-oracle-fix)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T08:06:49.523

在 ODBC 中有[SQLSetConnectAttr()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms713605%28v=vs.85%29.aspx)函数。它可以与 `SQL_ATTR_AUTOCOMMIT`和`SQL_AUTOCOMMIT_OFF`值一起使用。但我不知道如何从 Erlang 调用它。

# apache-flex - includeInLayout 不适用于 flex 3.6 中的 griditem

> ID：13026532
> 
> 赞同：1
> 
> 时间：2012-10-23T08:41:27.373
> 
> 标签：apache-flex

我正在使用 Flex 3.6，我想将 GridItem 的 includeInLayout 属性设置为 false，但它不会产生任何效果。我有以下内容：

```
<mx:Grid width="100%" height="100%" id="appCore">
  <mx:GridRow width="100%" height="100%">
    <mx:GridItem width="100%" height="100%">
      <np:NodePanel width="100%" height="100%" id="node1" idIndex="1" />
    </mx:GridItem>
    <mx:GridItem width="100%" height="100%" visible="{showAllPanels}" includeInLayout="{showAllPanels}">
    <np:NodePanel width="100%" height="100%" id="node2" idIndex="2" />
    </mx:GridItem>
  </mx:GridRow>
  <mx:GridRow width="100%" height="100%" visible="{showAllPanels}" includeInLayout="{showAllPanels}">
    <mx:GridItem width="100%" height="100%">
      <np:NodePanel width="100%" height="100%" id="node3" idIndex="3" />
    </mx:GridItem>
    <mx:GridItem width="100%" height="100%">
      <np:NodePanel width="100%" height="100%" id="node4" idIndex="4" />
    </mx:GridItem>
  </mx:GridRow>
</mx:Grid> 
```

当 showAllPanels=false 时，第二行正确地不显示，第一行展开整个页面。第一行右侧的 GridItem 未显示，但左侧的 GridItem 并未展开整个页面。如果我完全删除右侧的 GridItem，左侧的 GridItem 会完全扩展页面。

有什么技巧可以让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-30T10:21:16.387

遗憾的是，网格布局不支持 includeInLayout。

它有一个 Apache Jira 条目。 [https://issues.apache.org/jira/browse/FLEX-112](https://issues.apache.org/jira/browse/FLEX-112)

在撰写此答案时，Jira 条目自 2007-06-04 以来处于关闭/稍后状态，因此它可能被推迟到时间结束。

# css - 与 chrome 中的预期结果相比，Firefox 中的奇怪 CSS 结果（一些 div 未对齐但向下移动）

> ID：13026533
> 
> 赞同：1
> 
> 时间：2012-10-23T08:41:29.737
> 
> 标签：css, firefox, google-chrome

使用此 HTML 标记：

```
<html>
<body>
    <ul class="tag-list">
        <li class="tag"><div class="tag-label">short tag</div><div class="tag-tail tag-count">1154353</div></li><!--no whitespaces between list items!!--><li class="tag"><div class="tag-label">A quite long long long long long tag</div><div class="tag-tail tag-active">5</div></li>
    </ul>
</body> 
```

而这个 CSS 规则：

```
.tag-list {
    border:1px solid red;
}

.tag {
    border:1px solid green;
    display:inline-block;/*so that tags are lined up like words... */
    margin-right: 0.5em;
    margin-bottom: 0.5em;
    white-space:nowrap; /* so that label & tail sub-divs are stuck all together */
    height: 2em;
    line-height: 2em; /* text is vertically centered */
}

.tag > div {
    height: 100%;
    display:inline-block; /*so that label&tail are lined up */    
}

.tag-tail {
    border:1px solid orange;
}

.tag-label {
    border:1px solid blue;
    overflow:hidden;
    text-overflow:ellipsis;
    max-width:10em; /* to generate a (text) overflow for the ellipsis*/
} 
```

我在 Chrome 22.0.1229.94 中得到了预期的结果

但是在 Firefox 15.0.1 中，我得到了一个奇怪的结果（`div.tag-tail`元素向下移动）！

您可以将 FF 和 Chrome 中的结果与此[jsFiddle](http://jsfiddle.net/Tr5ea/1/)进行比较。

我知道将属性添加`overflow:hidden;`到选择器/规则可以`.tag-tail`解决问题，但我想了解为什么 FF 需要这样做，以及为什么在行为上有这种差异？

谢谢您的回答 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:56:04.900

CSS 规范在[http://www.w3.org/TR/CSS21/visudet.html#leading](http://www.w3.org/TR/CSS21/visudet.html#leading)最后一段说：

> 'inline-block' 的基线是它在正常流中的最后一个行框的基线，除非它没有流入行框，或者如果它的 'overflow' 属性具有除 'visible' 之外的计算值，在在这种情况下，基线是底部边距边缘。

因此，在您的情况下，`.tag-label`它的基线位于其边距边缘的底部（并且由于它没有边距，这意味着它位于其底部边框的底部边缘。但`.tag-tail`它的基线位于其内部文本的基线上。并且因为这里的所有内容都是基线对齐的，这意味着`.tag-tail`需要在与`.tag-label`.

这正是 Firefox 所做的。Chrome 没有正确实现内联块的基线规范；见[https://bugs.webkit.org/show_bug.cgi?id=36084](https://bugs.webkit.org/show_bug.cgi?id=36084)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:50:35.557

添加`overflow:hidden;`似乎是一件奇怪的事情。

我会做**loic**在评论中建议的事情：

添加垂直对齐。我之前遇到过类似的问题，`vertical-align:top;`这也是我的解决方案。（顺便说一句，Firefox 16 也会显示不良结果。）

```
.tag > div {  
     height: 100%;  
    display:inline-block;   
    vertical-align:top;  
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T18:03:55.820

您在 .tag-label 中发生的事情太多了

这是您的解决方案：http: [//jsfiddle.net/mrbinky3000/JU5Cr/](http://jsfiddle.net/mrbinky3000/JU5Cr/)

```
.tag-label {
    border:1px solid blue;
} 
```

但这是一个更好的解决方案：http: [//jsfiddle.net/mrbinky3000/gwb7d/1/](http://jsfiddle.net/mrbinky3000/gwb7d/1/)

```
.tag-list {
    border: 1px solid red;
    display: block;
}

.tag {
    border:1px solid green;
    display:inline-block;/*so that tags are lined up like words... */
    margin-right: 0.5em;
    margin-bottom: 0.5em;
    white-space:nowrap; /* so that label & tail sub-divs are stuck all together */
    height: 2em;
    line-height: 2em; /* text is vertically centered */
    overflow: hidden;

}

.tag > div {
    height: 100%;
    display:block;
    float: left;        
}

.tag-tail {
    border:1px solid orange;
}

.tag-label {
    border:1px solid blue;
} 
```

如果您浮动一个 div，它会从“页面流”中出来，并且 div 会缩小以适应内容，这与您将某些内容设置为“inline-block”时发生的情况非常相似。但是，与 inline-block 不同的是，您不必担心代码中的空格会搞砸。显示块忽略前导和尾随空格。

# rft - 将 rft 数据池中的数据导出到 rft 中的 excel

> ID：13026546
> 
> 赞同：1
> 
> 时间：2012-10-23T08:42:00.243
> 
> 标签：rft

如何将RFT数据池中的数据导出为ex​​cel文件？我试图直接用excel打开但无法查看任何内容。还有其他方法吗？

请帮忙。感谢广告

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:56:21.933

将数据池导出为[CSV](http://en.wikipedia.org/wiki/Comma-separated_values)文件，然后将其导入 Excel。

在 RFT 中，转到 File -> Export 并选择“Functional Test Datapool to CSV File”，按 Next，选择您想要的数据池和适当的分隔符，通常是逗号`,`，但如果您的数据包含这样的字符，您可以选择另一个。![导出为 CSV 文件](../Images/4b9aa37da548cb5eaf042cc7f9c8cb0b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-04T09:24:03.910

在 RFT 中，转到 File -> Export 并选择“Functional Test Datapool to CSV File”，按下一步，选择数据池文件选择现有文件或输入新文件名，单击完成按钮。该文件将以 .csv 格式保存。并且在使用 excel 打开时应该在 excel 中打开文件。

# c# - C# ASP.NET Web 服务预订系统 NON-DATABASE

> ID：13026548
> 
> 赞同：0
> 
> 时间：2012-10-23T08:42:01.197
> 
> 标签：c#, asp.net, web-services, arraylist

我的一个小系统遇到了问题，正如标题所示，我正在使用 ASP.NET 和 C# 编程技术。特别是 Web 服务和数组列表。

或者我被告知我可以使用缓存对象来存储数组列表或其他东西，但我不知道如何做这些。

当我在本地运行它时，我的项目上的一切都很好，但我似乎无法让它甚至运行 Web 服务。

我的程序的工作原理是用户连续保留一个座位号并提供要进行预订的名称。数据以字符串形式传递

```
 "Seat Number " + seatNumber + " In Row Number " + rowNumber + " Is Reserved"; 
```

然后将其添加到数组列表中。输出将如下所示：第 4 行中的 5 号座位已保留。重复条目很容易防止，但是当我在 Web 服务上尝试此操作时，我认为没有任何数据通过。

预留座位时，执行以下代码：

```
// Retrieve the values from the form controls
string seat = boxSeat.Text;
string row = boxRow.Text;
string name = txtName.Text;

// Convert form control values for Row and Seat into integers
int Row2 = Convert.ToInt32(row);
int Seat2 = Convert.ToInt32(seat);

// Generate Reservation Request
var req = new ReservationRequest();
// Pass the form control values to the request
req.Row = Row2;
req.Seat = Seat2;
req.Name = name;
var resp = new ReservationResponse();

// Create SOAP client
var client = new ReservationsSoapClient(); 
```

这些类`ReservationRequest`分别`ReservationResponse`保存要传递的数据和确认消息。

这是我的网络服务中的代码

```
[WebMethod]
public ReserveSeatResponse ReserveSeat(ReserveSeatRequest req)
{
    var resp = new ReserveSeatResponse();
    int rowNumber = req.Row;
    int seatNumber = req.Seat;
    string name = req.Name;
    string message;
    string seat = "Seat Number " + seatNumber + " In ";
    string row = "Row Number " + rowNumber;
    string booking = seat;
    booking += row;
    message = "Congratulations! " + booking + " is reserved by " + req.Name;
    reservations.Add(booking);
    resp.confirmation = message;
    return resp; 
```

此代码应该从班级检索行号和座位号以及预订名称`ReservationRequest`，然后将其放入“预订”字符串并将其添加到数组中。我现在不在乎重复，因为我想让它工作。

我在表单中添加了`messagebox.show(resp.confirmation);`一行代码来打印确认消息，但我尝试的所有内容都给了我空白。

我真的很感激一些帮助，如果我需要添加更多代码或任何评论，我会提供它。它真的很烦人

另外，如果有人可以推荐一个 C# 中的缓存对象教程来处理 web 服务和数组，或者给我一些关于如何做到这一点的建议，或者只是使用 ArrayList 还是 Generic List，我将由衷地感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:44:54.047

如果您使用的是 Firefox，请使用 Firebug 来识别问题，或者如果您的机器上安装了 fiddler，您也可以使用它。

在 Firebug 中检查发送到 Web 服务的请求并查看它在响应中发回的内容。

# java - 在java中确定文件创建时间

> ID：13026551
> 
> 赞同：-2
> 
> 时间：2012-10-23T08:42:18.460
> 
> 标签：java, file, io

> **可能重复：**
> [确定 Java 中的文件创建日期](https://stackoverflow.com/questions/2723838/determine-file-creation-date-in-java)

我有一个名为的文件`abc.txt`，它是由我的应用程序在`c:`. 现在我必须以这样的方式编写逻辑，如果文件是在 1 小时内创建的，那么我必须打印：

> 文件在 1 小时内创建

如果文件创建时间超过 1 小时，则打印该语句：

> 创建文件已超过 1 小时

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:04:04.187

下面是代码

```
File f = new File("path of file");
Date now = new Date();
Date filedate = new Date(f.lastModified());
if((now.getTime()-filedate.getTime())>60000){
    System.out.println("It has been more then 1 hour the file is created");
}else{
    System.out.println("file is created within 1 hour itself");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:47:28.837

[java.io.File.lastModified()](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#lastModified%28%29)应该满足您的需求。

# android - LaunchMode & 最近的应用原理

> ID：13026554
> 
> 赞同：1
> 
> 时间：2012-10-23T08:42:22.013
> 
> 标签：android, android-activity, android-homebutton, launchmode

我有一个 WidgetResultActivity 和一个 NotificationResultActivity，我设置了它们的启动模式=singleInstance。但它们有不同的行为：WidgetResultActivity 不会从 RECENT 打开，而 NotificationResultActivity 将始终从 RECENT 打开（它是单独打开的！没有 MainActivity）。那么如何禁止从 REcent 打开 NotificationResultActivity，谢谢。

```
 <activity
        android:name=".WidgetResultActivity"
        android:launchMode="singleInstance"
        android:theme="@android:style/Theme.Translucent.NoTitleBar" />

    <activity
        android:name=".NotificationResultActivity"
        android:launchMode="singleInstance"
        android:theme="@android:style/Theme.Translucent.NoTitleBar" /> 
```

编辑：当我从通知中打开时，请查看我的 ATester 应用程序......

测试代码：

```
 NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.ic_launcher, getString(R.string.app_name), java.lang.System.currentTimeMillis());
    notification.flags = Notification.FLAG_NO_CLEAR;
    Intent intent = new Intent(this, ExcludeFromRecentActivity.class);
    // intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent activity = PendingIntent.getActivity(this, R.string.app_name, intent, PendingIntent.FLAG_UPDATE_CURRENT);
    notification.setLatestEventInfo(this, "Open Activity: " + ABox.class.getSimpleName(), "new Intent()", activity);
    manager.notify(R.string.app_name, notification); 
```

测试清单：

```
 <activity
        android:name=".ATester1"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name=".ATester2"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name=".ATester3"
        android:label="@string/app_name" >
    </activity>
    <activity
        android:name=".ExcludeFromRecentActivity"
        android:excludeFromRecents="true"
        android:label="@string/app_name" >
    </activity> 
```

测试图像：

第一个：![在此处输入图像描述](../Images/051b0f0787c4be82dc6d183340d9953c.png)

第二：![在此处输入图像描述](../Images/64e11f1482f5be22a116a85853cf657f.png)

第三：![在此处输入图像描述](../Images/e1d50adf0bd06c881986454625399988.png)

第四：![在此处输入图像描述](../Images/3199415f63a17a1cac329f417d3b2695.png)

编辑：我真正需要的是 DIALOG BEHEVIOR LIKE Activity，我将在另一篇文章中询问。@WebnetMobile.com，同样感谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:45:20.317

要防止活动被添加到最近，请添加

```
android:excludeFromRecents="true" 
```

对其`<activity>`在 Manifest 中的声明：

```
<activity
    android:name=".NotificationResultActivity"
    android:launchMode="singleInstance"
    android:excludeFromRecents="true"
    android:theme="@android:style/Theme.Translucent.NoTitleBar" /> 
```

请参阅： android 文档中的[android:excludeFromRecents](http://developer.android.com/guide/topics/manifest/activity-element.html#exclude)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T08:36:56.653

```
android:taskAffinity="" 
android:excludeFromRecents="true" 
android:launchMode="singleInstance" 
```

需要taskAffinity，这对我有用。

# .net - dapper 缓冲区/缓存的解释

> ID：13026558
> 
> 赞同：46
> 
> 时间：2012-10-23T08:42:28.643
> 
> 标签：.net, caching, dapper

我使用 dapper 将我的数据库中的对象作为 IEnumerable 返回。默认 dapper 将缓冲区设置设置为 true。

这是如何运作的？

如果 dapper 缓存第一个查询，然后从内存中获取对象。

如果有人在表中编辑/删除/添加行会发生什么。dapper 是否必须为此查询再次重新缓存所有数据？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-23T08:51:33.647

缓冲区与缓存无关。Dapper 不包括任何类型的数据缓存（尽管它确实有一个与它如何处理命令相关的缓存，即“这个命令字符串，具有这种类型的参数，以及这种类型的实体 - 具有这些关联的动态生成的配置方法命令并填充对象”）。

这个开关的真正含义是：

*   `false`: 将在接收/消费项目时对其进行迭代 - 基本上，围绕一个迭代器块`IDataReader`
    *   减号：您只能迭代一次（除非您乐于重新运行查询）
    *   另外：您可以遍历**大量**查询（数百万行），而无需一次将它们全部放入内存中-因为您只真正查看正在生成的当前行
    *   加：你不需要等待数据结束开始迭代 - 只要它至少有一行，你就可以开始了
    *   减号：在您迭代时连接正在使用中，如果您尝试在每行上调用其他命令，这可能导致“连接上已经有一个打开的阅读器”（或任何确切的措辞）错误基础（这可以通过 MARS 来缓解）
    *   减号：因为消费者可以为每个项目做任何他们想做的事情（每行可能需要几分钟，如果他们正在做一些复杂的事情），命令/阅读器可能会打开更长时间
*   `true``List<T>`（默认值）：数据在返回给您之前 被完全消耗到 a
    *   加：您可以根据需要多次迭代它
    *   减号：如果查询很大，将它们全部加载到内存中（在列表中）可能会很昂贵/不可能
    *   减：如果查询很大，在收集最后一行时可能会有明显的延迟
    *   加：一旦你得到数据，命令就完成了 - 所以那个和后续操作之间没有冲突
    *   加：一旦你得到数据，命令已经释放了任何资源（锁等），所以你对服务器的影响最小

大多数查询只返回中等数量的数据（例如，少于 100 条记录），因此我们很高兴默认 ( `true`) 为大多数场景提供了最合适的行为。但我们会为您提供该选项，以满足不同的使用场景。

# xquery - 创建集合，使用命令行将文档添加到 zorba？

> ID：13026559
> 
> 赞同：0
> 
> 时间：2012-10-23T08:42:27.950
> 
> 标签：xquery, zorba

我想知道如何使用命令行界面[http://www.zorba-xquery.com/html/documentation/2.7.0/zorba/commandline在新的 zorba 安装中创建一个集合并将文档添加到该集合](http://www.zorba-xquery.com/html/documentation/2.7.0/zorba/commandline)

如果不能通过命令行完成，那么使用脚本 api 的示例会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:42:57.767

这可以使用 XQuery 脚本来完成。考虑以下 XQuery 模块：

```
module namespace news-data = "http://www.news.org/data";

declare namespace an = "http://www.zorba-xquery.com/annotations";

declare collection news-data:employees as element(employee)*;
declare variable $news-data:employees := xs:QName('news-data:employees'); 
```

你可以像这样使用它：

```
import module namespace news-data = "http://www.news.org/data" at "news-data.xq";

import module namespace ddl = "http://www.zorba-xquery.com/modules/store/static/collections/ddl";
import module namespace dml = "http://www.zorba-xquery.com/modules/store/static/collections/dml";

ddl:create($news-data:employees);
dml:insert-nodes($news-data:employees, doc("test2.xml")); 
```

# php - 将变量从一个函数传递到另一个函数

> ID：13026561
> 
> 赞同：0
> 
> 时间：2012-10-23T08:42:37.263
> 
> 标签：php, class, function, variables, global-variables

我正在尝试将变量从一个函数传递给另一个函数。我还有其他几个需要 $member_id 的函数，这些函数在第一个函数 wordpress_user_id() 中提供。

```
function wordpress_user_id() {
    $member_id = get_current_user_id();         
    return $member_id;
} 
```

我需要在这个函数中使用 $member_id：

```
function yif_wlmm_get_wp_user_id() {
    $output = 'Your ID is: ' . $member_id;          
    return $output;
} 
```

我尝试从第一个函数中传递 $member_id ，如下所示：

```
function yif_wlmm_get_wp_user_id($member_ID) 
```

和

```
function yif_wlmm_get_wp_user_id( wordpress_user_id() ) 
```

但没有一个工作。

```
yif_wlmm_get_wp_user_id( wordpress_user_id() ) 
```

不返回`$member_id`。我需要使用全局吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T09:57:09.360

要使该代码通过任何内容，您需要执行以下操作：

```
$id = wordpress_user_id();
yif_wlmm_get_wp_user_id($id); 
```

或者，更简洁：

```
yif_wlmm_get_wp_user_id(wordpress_user_id()); 
```

否则，即使您将它们的参数命名为相同，这些函数也彼此无关。

如果不更多地了解它是如何使用的，就不可能回答一个类是否更好用。

# postgresql - 如何在 PostgreSQL 和 JPA 2 中执行类似的不区分大小写和不区分重音的操作？

> ID：13026564
> 
> 赞同：4
> 
> 时间：2012-10-23T08:42:41.490
> 
> 标签：postgresql, jakarta-ee, jpa-2.0, postgresql-9.1

我有一个使用 PostgreSQL 9.X 和 JPA2（Hibernate 实现）的 Java EE 项目。如何强制类似查询不区分大小写和不区分重音？

我能够更改数据库的字符集，因为它是第一个使用它的项目。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T09:06:44.580

一般来说，没有标准的方法来编写“不区分重音”的代码，或者在忽略重音的同时比较单词是否相等。整个想法几乎没有意义，因为不同的重音字符在不同的语言/方言中意味着不同的东西，并且它们的“普通 ascii”替换/扩展因语言而异。请不要这样做；`resume`和`résumé`是*不同的词*，当考虑英语以外的任何语言时，情况会变得更糟。

对于不区分大小写，您可以`lower(the_col) like lower('%match_expression')`在 JPQL 中使用。据我所知`ilike`，JPQL 不支持，但我没有检查[标准](http://jcp.org/en/jsr/detail?id=317)来验证这一点。它相当易读，因此请考虑下载 JPA2 规范并阅读它。JPA2 Criteria`Restrictions.ilike`为此目的提供。两者都不会规范化/剥离/忽略重音字符。

对于去除重音等，您可能需要使用数据库引擎特定的存储函数或本机查询。参见，例如[这个先前的答案](https://stackoverflow.com/questions/12979390/find-all-possible-duplicates-in-two-column-for-lower-case-uppercase-and-special/13010154#13010154)，或者如果你打算用一个不带重音的替代品替换*这个*[PostgreSQL wiki 条目](https://wiki.postgresql.org/wiki/Strip_accents_from_strings,_and_output_in_lowercase)- 但同样，*请不要这样做，*除非是为了非常有限的目的，比如查找单词可能是“不带重音”的地方被误导的软件或用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T13:07:16.147

如果安装了[unaccent 扩展](http://www.postgresql.org/docs/9.1/static/unaccent.html)：

```
select unaccent(lower('ãóÊ'));
 unaccent 
----------
 aoe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T16:28:11.450

我遇到了这个问题，我无法使用数据库功能。因此，我在标准代码中使用了 REGEX 限制：

```
searchText = unaccent(searchText);
String expression = "firstName ~* '.*" + searchText + ".*'";
Criterion searchCriteria = Restrictions.sqlRestriction(expression); 
```

然后我编写了一个名为 unaccent 的函数来将每个字符更改为一个或语句，例如任何字母 e 将变为 (e|é|è)。对“hello”的查询将变为“h(e|é|è)llo”。

这是从这个线程启发的函数[Postgres 重音不敏感 LIKE search in Rails 3.1 on Heroku](https://stackoverflow.com/questions/9243322/postgres-accent-insensitive-like-search-in-rails-3-1-on-heroku)

```
private String unaccent(String text) {
    String String charactersProcessed = ""; // To avoid doing a replace multiple times.
    String newText = text.toLowerCase();
    text = newText; // Case statement is expecting lowercase.
    for (int i = 0; i < text.length(); i++) {
        char c = text.charAt(i);
        if (charactersProcessed.contains(c + "")) {
            continue; // We have already processed this character.
        }
        String replacement = "";
        switch (c) {
        case '1': {
            replacement = "¹";
            break;
        }
        case '2': {
            replacement = "²";
            break;
        }
        case '3': {
            replacement = "³";
            break;
        }
        case 'a': {
            replacement = "á|à|â|ã|ä|å|ā|ă|ą|À|Á|Â|Ã|Ä|Å|Ā|Ă|Ą|Æ";
            break;
        }
        case 'c': {
            replacement = "ć|č|ç|©|Ć|Č|Ç";
            break;
        }
        case 'd': {
            replacement = "Đ|Ð";
            break;
        }
        case 'e': {
            replacement = "è|é|ê|ё|ë|ē|ĕ|ė|ę|ě|È|Ê|Ë|Ё|Ē|Ĕ|Ė|Ę|Ě|€";
            break;
        }
        case 'g': {
            replacement = "ğ|Ğ";
            break;
        }
        case 'i': {
            replacement = "ı|ì|í|î|ï|ì|ĩ|ī|ĭ|Ì|Í|Î|Ï|Ї|Ì|Ĩ|Ī|Ĭ";
            break;
        }
        case 'l': {
            replacement = "ł|Ł";
            break;
        }
        case 'n': {
            replacement = "ń|ň|ñ|Ń|Ň|Ñ";
            break;
        }
        case 'o': {
            replacement = "ò|ó|ô|õ|ö|ō|ŏ|ő|ø|Ò|Ó|Ô|Õ|Ö|Ō|Ŏ|Ő|Ø|Œ";
            break;
        }
        case 'r': {
            replacement = "ř|®|Ř";
            break;
        }
        case 's': {
            replacement = "š|ş|ș|ß|Š|Ş|Ș";
            break;
        }
        case 'u': {
            replacement = "ù|ú|û|ü|ũ|ū|ŭ|ů|Ù|Ú|Û|Ü|Ũ|Ū|Ŭ|Ů";
            break;
        }
        case 'y': {
            replacement = "ý|ÿ|Ý|Ÿ";
            break;
        }
        case 'z': {
            replacement = "ž|ż|ź|Ž|Ż|Ź";
            break;
        }
        }
        if (!replacement.isEmpty()) {
            charactersProcessed = charactersProcessed + c;
            newText = newText.replace(c + "", "(" + c + "|" + replacement + ")");
        }
    }

    return newText;
} 
```

# asp.net - Telerik.Web.UI.GridInsertionObject' 不包含属性

> ID：13026566
> 
> 赞同：2
> 
> 时间：2012-10-23T08:42:43.087
> 
> 标签：asp.net, .net, telerik

当我想从我的数据库中绑定我的网格中的某些内容时，我遇到了这个奇怪的错误，我在过去的几个小时里一直试图找到以下问题的解决方法，但没有任何成功。我在互联网上找到了许多可能的解决方案，但没有一个能解决我的问题。

```
<%@ Page Title="" Language="C#" MasterPageFile="~/ABBMaster.Master" AutoEventWireup="true"
    CodeBehind="UserEditPanel.aspx.cs" Inherits="HolidayTracker.Administrator.UserEditPanel" %>

<%@ Register Assembly="Telerik.Web.UI" Namespace="Telerik.Web.UI" TagPrefix="telerik" %>
<asp:Content ID="Content1" ContentPlaceHolderID="MainRegionContentPlaceHolder" runat="server">
    <telerik:RadScriptManager ID="rsmTelerik" runat="server">
        <Scripts>
            <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.Core.js"></asp:ScriptReference>
            <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.jQuery.js"></asp:ScriptReference>
            <asp:ScriptReference Assembly="Telerik.Web.UI" Name="Telerik.Web.UI.Common.jQueryInclude.js"></asp:ScriptReference>
        </Scripts>
    </telerik:RadScriptManager>

    <br />
    <%-- Export script %>
    <%--    <script type="text/javascript">
        function onRequestStart(sender, args) {
            if (args.get_eventTarget().indexOf("ExportToExcelButton") >= 0 ||
                    args.get_eventTarget().indexOf("ExportToWordButton") >= 0 ||
                    args.get_eventTarget().indexOf("ExportToCsvButton") >= 0) {
                args.set_enableAjax(false);
            }
        }
    </script>--%>
    <asp:Panel ID="pnlContent" CssClass="pnlContent" runat="server">

        <asp:Panel ID="pnlHeader" CssClass="pnlHeader" runat="server">
        </asp:Panel>
        <asp:Panel ID="pnlBody" CssClass="pnlBody" runat="server">
            <telerik:RadAjaxPanel ID="RadAjaxPanel1" runat="server" Skin="Default" LoadingPanelID="RadAjaxLoadingPanel1">
                <fieldset style="padding: 10px; margin-bottom: 10px;">
                    <legend>User form</legend>
                    <div class="formRowDiv">
                        <asp:Label ID="label4" CssClass="formLabel" runat="server" Text="Email"></asp:Label>

                        <telerik:RadComboBox ID="rcbSearch" CssClass="rowForm" runat="server" Width="260px"
                            Height="100px" EmptyMessage="Enter Email" EnableLoadOnDemand="true" AutoPostBack="true" AllowCustomText="true" MarkFirstMatch="true"
                            OnItemsRequested="rcbSearch_ItemsRequested" CausesValidation="false" OnSelectedIndexChanged="rcbSearch_IndexChanged" Skin="Default">
                        </telerik:RadComboBox>
                        <asp:RegularExpressionValidator ID="revEmail" runat="server" Display="Dynamic" ControlToValidate="rcbSearch"
                            ValidationExpression="^[\w\.\-]+@[a-zA-Z0-9\-]+(\.[a-zA-Z0-9\-]{1,})*(\.[a-zA-Z]{2,3}){1,2}$"
                            ErrorMessage="Enter a valid email address" />
                        <asp:RequiredFieldValidator ID="rfvEmail" runat="server" Display="Dynamic" ControlToValidate="rcbSearch"
                            ErrorMessage="Can not be empty" CssClass="rowFormValidation" />
                    </div>
                    <div class="formRowDiv">
                        <asp:Label ID="label1" CssClass="formLabel" runat="server" Text="Firstname"></asp:Label>
                        <telerik:RadTextBox ID="rtbFirstName" CssClass="rowForm" runat="server" ReadOnly="false" />
                        <asp:RequiredFieldValidator ID="rfvFirstName" runat="server" Display="Dynamic" ControlToValidate="rtbFirstName"
                            ErrorMessage="Can not be empty" CssClass="rowFormValidation" />
                    </div>
                    <div class="formRowDiv">
                        <asp:Label ID="label2" CssClass="formLabel" runat="server" Text="Lastname"></asp:Label>
                        <telerik:RadTextBox ID="rtbLastName" CssClass="rowForm" runat="server" ReadOnly="false" />
                        <asp:RequiredFieldValidator ID="rfvLastName" runat="server" Display="Dynamic" ControlToValidate="rtbLastName"
                            ErrorMessage="Can not be empty" CssClass="rowFormValidation" />
                    </div>
                    <div class="formRowDiv">
                        <asp:Label ID="label3" CssClass="formLabel" runat="server" Text="Username"></asp:Label>
                        <telerik:RadTextBox ID="rtbUserName" CssClass="rowForm" runat="server" ReadOnly="false" />
                        <asp:RequiredFieldValidator ID="rfvUserName" runat="server" Display="Dynamic" ControlToValidate="rtbUserName"
                            ErrorMessage="Can not be empty" CssClass="rowFormValidation" />
                    </div>
                    <div class="formRowDiv" style="display: none;">
                        <asp:Label ID="label5" CssClass="formLabel" runat="server" Text="AdAccount"></asp:Label>
                        <telerik:RadTextBox ID="rtbAdAccount" CssClass="rowForm" runat="server" ReadOnly="false" />
                    </div>
                    <div class="formRowDiv" style="display: none;">
                        <asp:Label ID="label6" CssClass="formLabel" runat="server" Text="AdDomain"></asp:Label>
                        <telerik:RadTextBox ID="rtbAdDomain" CssClass="rowForm" runat="server" ReadOnly="True" />
                    </div>
                    <div class="formRowDiv">
                        <asp:Label ID="label8" runat="server" Text="Role" CssClass="formLabel"></asp:Label>
                        <telerik:RadComboBox ID="rcbUserRoles" CssClass="rowForm" CheckBoxes="True" EmptyMessage="- Please select -"
                            runat="server" DataTextField="Name" DataValueField="RoleId">
                        </telerik:RadComboBox>
                        <asp:SqlDataSource ID="UserRoleSqlSource" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionString %>"
                            SelectCommand="SELECT * FROM [HtUserRole]"></asp:SqlDataSource>
                    </div>
                    <div class="formRowDiv">
                        <%--  <asp:Label ID="label7" CssClass="formLabel" runat="server" Text="Annual vacations"></asp:Label> --%>
                        <telerik:RadAjaxPanel ID="RadAjaxPanel2" runat="server" LoadingPanelID="RadAjaxLoadingPanel1">

                            <telerik:RadGrid ID="rgAnnualVacation" runat="server" CellSpacing="0" GridLines="None" AllowPaging="True" AutoGenerateDeleteColumn="True"
                                OnInsertCommand="rgAnnualVacation_InsertCommand" OnDeleteCommand="rgAnnualVacation_DeleteCommand" Height="200px"
                                OnUpdateCommand="rgAnnualVacation_UpdateCommand" OnNeedDataSource="rgAnnualVacation_NeedDataSource">

                                <MasterTableView AutoGenerateColumns="false" DataKeyNames="AnnualVacationId" CommandItemDisplay="Top" InsertItemPageIndexAction="ShowItemOnCurrentPage">

                                    <Columns>
                                        <telerik:GridBoundColumn DataField="AnnualVacationId" Visible="false" DataType="System.Int32" FilterControlAltText="Filter AnnualVacationId column" HeaderText="AnnualVacationId" ReadOnly="True" SortExpression="AnnualVacationId" UniqueName="AnnualVacationId">
                                        </telerik:GridBoundColumn>
                                        <telerik:GridBoundColumn DataField="UserId" Visible="false" DataType="System.Int32" FilterControlAltText="Filter UserId column" HeaderText="UserId" SortExpression="UserId" UniqueName="UserId">
                                        </telerik:GridBoundColumn>
                                        <telerik:GridBoundColumn DataField="FromDate" DataType="System.DateTime" FilterControlAltText="Filter FromDate column" HeaderText="FromDate" SortExpression="FromDate" UniqueName="FromDate">
                                        </telerik:GridBoundColumn>
                                        <telerik:GridBoundColumn DataField="ToDate" DataType="System.DateTime" FilterControlAltText="Filter ToDate column" HeaderText="ToDate" SortExpression="ToDate" UniqueName="ToDate">
                                        </telerik:GridBoundColumn>
                                        <telerik:GridBoundColumn DataField="WorkingTime" DataType="System.Int32" FilterControlAltText="Filter WorkingTime column" HeaderText="WorkingTime" SortExpression="WorkingTime" UniqueName="WorkingTime">
                                        </telerik:GridBoundColumn>
                                        <telerik:GridBoundColumn DataField="VacationDays" DataType="System.Double" FilterControlAltText="Filter VacationDays column" HeaderText="VacationDays" SortExpression="VacationDays" UniqueName="VacationDays">
                                        </telerik:GridBoundColumn>
                                        <telerik:GridEditCommandColumn />
                                    </Columns>

                                    <EditFormSettings EditFormType="Template">
                                        <FormTemplate>
                                            <table>
                                                <tr>
                                                    <td>From</td>
                                                    <td>
                                                        <telerik:RadDatePicker ID="fromdatepicker" runat="server" MaxDate="1/1/2015" DbSelectedDate='<%# Eval("fromdate") == null ? null : Eval("fromdate") %>' TabIndex="4">
                                                        </telerik:RadDatePicker>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>To</td>
                                                    <td>
                                                        <telerik:RadDatePicker ID="todatepicker" runat="server" MinDate="1/1/1900" DbSelectedDate='<%# Eval("todate") == null ? null :Eval("todate")%>'
                                                            TabIndex="4">
                                                        </telerik:RadDatePicker>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Working time (%)</td>
                                                    <td>
                                                        <telerik:RadNumericTextBox ID="txtWorkingTime" runat="server" NumberFormat-DecimalDigits="0" DbValue='<%# Bind("WorkingTime") %>'></telerik:RadNumericTextBox>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Vacation days</td>
                                                    <td>
                                                        <telerik:RadNumericTextBox ID="txtVacationDays" runat="server" NumberFormat-DecimalDigits="2" DbValue='<%# Bind("VacationDays") %>'></telerik:RadNumericTextBox>
                                                    </td>
                                                </tr>
                                            </table>
                                            <table style="margin-top: 15px;">
                                                <tr>
                                                    <td>
                                                        <asp:Button ID="btnUpdate" Text='<%# (Container is GridEditFormInsertItem) ? "Insert" : "Update" %>'
                                                            runat="server" CommandName='<%# (Container is GridEditFormInsertItem) ? "PerformInsert" : "Update" %>'></asp:Button>&nbsp;
                                                    </td>
                                                    <td>
                                                        <asp:Button ID="btnCancel" Text="Cancel" runat="server" CausesValidation="False"
                                                            CommandName="Cancel"></asp:Button>
                                                    </td>
                                                </tr>
                                            </table>
                                        </FormTemplate>
                                    </EditFormSettings>
                                    <%--<CommandItemSettings ShowExportToWordButton="true" ShowExportToExcelButton="true" ShowExportToCsvButton="true" />--%>
                                </MasterTableView>
                                <FilterMenu EnableImageSprites="False">
                                </FilterMenu>
                            </telerik:RadGrid>
                        </telerik:RadAjaxPanel>
                    </div>
                    <div class="formRowDiv">
                        <telerik:RadButton ID="rbBack" CssClass="rowButton" runat="server" Text="Back" OnClick="rbBack_Clicked"
                            CausesValidation="false" />
                        <telerik:RadButton ID="rbSave" CssClass="rowButton" runat="server" Text="Save" OnClick="rbSave_Clicked" />
                    </div>
                </fieldset>
            </telerik:RadAjaxPanel>
            <telerik:RadAjaxLoadingPanel ID="RadAjaxLoadingPanel1" runat="server" Skin="Default">
            </telerik:RadAjaxLoadingPanel>
        </asp:Panel>
        <asp:Panel ID="pnlFooter" CssClass="pnlFooter" runat="server">
        </asp:Panel>
    </asp:Panel>
</asp:Content>

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using HolidayTracker.Data.Model;
using Telerik.Web.UI;
using HolidayTracker.Code;
using System.Collections;

namespace HolidayTracker.Administrator
{
    public partial class UserEditPanel : System.Web.UI.Page
    {

        private List<AnnualVacation> annualVacations = new List<AnnualVacation>();

        private Boolean newUser;
        private HtUser paramUser;
        private HtUser user;
        private HtUser User
        {
            get
            {
                user = HtUser.INIT_USER(this.Page, true);
                return user;
            }
        }

        protected void Page_Load(object sender, EventArgs e)
        {
            getParameters();
            if (!IsPostBack)
            {

                bindData();

                fillFieldsWithData();
                initFieldSettings();
            }
        }

        private void getParameters()
        {
            if (Page.Request["userId"] != null)
            {
                int userId = Constants.TryConvert(Page.Request["userId"], this.Page);
                this.paramUser = HtUser.GetById(userId);
            }
            else
            {
                this.paramUser = new HtUser();
            }
        }

        private void initFieldSettings()
        {
            if (!newUser)
            {
                //this.rcbSearch.Enabled = false;
            }
        }

        private void bindData()
        {
            this.rcbUserRoles.DataSource = this.UserRoleSqlSource;
            this.rcbUserRoles.DataBind();

            //fill viewstate with annual vacations if empty
            if (paramUser != null && paramUser.AnnualVacations.Any())
            {
                if (ViewState["AnnualVacationSource"] == null)
                {
                    annualVacations.AddRange(paramUser.AnnualVacations);
                    ViewState["AnnualVacationSource"] = annualVacations;
                }
            }
        }

        private void fillFieldsWithData()
        {
            if (paramUser != null)
            {
                this.rtbFirstName.Text = paramUser.FirstName;
                this.rtbLastName.Text = paramUser.LastName;
                this.rtbUserName.Text = paramUser.UserName;
                this.rcbSearch.Text = paramUser.Email;
                this.rtbAdAccount.Text = paramUser.AdAccount;
                this.rtbAdDomain.Text = paramUser.AdDomain;

                //UserRole
                IEnumerable<HtUserRole> userRoles = paramUser.HtUserRoles != null ? paramUser.HtUserRoles : null;
                if (userRoles != null && userRoles.Count() > 0)
                {
                    foreach (RadComboBoxItem rcbi in rcbUserRoles.Items)
                    {
                        rcbi.Checked = false;
                        foreach (HtUserRole ur in userRoles)
                        {
                            if (ur.RoleId.ToString() == rcbi.Value)
                            {
                                rcbi.Checked = true;
                                break;
                            }
                        }
                    }
                }
            }
        }

        protected void rcbSearch_ItemsRequested(object sender, RadComboBoxItemsRequestedEventArgs e)
        {
            if (e.Text != null && e.Text.Length > 2)
            {
                IEnumerable<HtUser> result = null;
                AdLookup lookup = new AdLookup();
                result = lookup.SearchAdUserByEmail(e.Text);//HtUser.SearchByEmail(e.Text);
                if (result != null && result.Count() > 0)
                {
                    foreach (HtUser user in result)
                    {
                        this.rcbSearch.Items.Add(new RadComboBoxItem(user.Email, user.UserId.ToString()));
                    }
                }
            }
        }

        protected void rcbSearch_IndexChanged(object sneder, RadComboBoxSelectedIndexChangedEventArgs e)
        {
            string email = e.Text;
            AdLookup lookup = new AdLookup();
            paramUser = lookup.GetAdUserByEmail(email);
            fillFieldsWithData();
        }

        private void saveData()
        {
            HolidayTrackerEntities ctx = HtEntityFactory.Context;
            HtUser userToSave = ctx.HtUsers.Where(u => u.UserId == paramUser.UserId).FirstOrDefault();
            if (userToSave == null)
            {
                userToSave = new HtUser();
                userToSave.IsNew = true;
            }
            userToSave.FirstName = this.rtbFirstName.Text;
            userToSave.LastName = this.rtbLastName.Text;
            userToSave.UserName = this.rtbUserName.Text;
            userToSave.Email = this.rcbSearch.Text;
            userToSave.AdAccount = this.rtbAdAccount.Text;
            userToSave.AdDomain = this.rtbAdDomain.Text;

            //UserRole
            foreach (RadComboBoxItem rcbi in rcbUserRoles.Items)
            {
                HtUserRole newUserRole = HtUserRole.GetById(int.Parse(rcbi.Value));

                if (rcbi.Checked)
                {
                    if (userToSave.HtUserRoles.Where(x => x.RoleId == newUserRole.RoleId).Count() == 0)
                    {
                        userToSave.HtUserRoles.Add(newUserRole);
                    }
                }
                else
                {
                    if (userToSave.HtUserRoles.Where(x => x.RoleId == newUserRole.RoleId).Count() > 0)
                    {
                        userToSave.HtUserRoles.Remove(newUserRole);
                    }
                }
            }

            if (userToSave.IsNew)
            {
                ctx.AddToHtUsers(userToSave);
            }

            if (((List<AnnualVacation>)ViewState["AnnualVacationSource"]) != null)
            {
                List<AnnualVacation> vacationToSave = (List<AnnualVacation>)ViewState["AnnualVacationSource"];
                IEnumerable<AnnualVacation> existing = paramUser.AnnualVacations;
                foreach (AnnualVacation toSave in vacationToSave)
                {
                    //if (toSave.IsNew) {
                    //    ctx.AddToAnnualVacations(toSave);
                    //}

                    //Zu löschende aus context löschen
                }
            }

            ctx.SaveChanges();
        }

        protected void rbBack_Clicked(object sender, EventArgs e)
        {
            Response.Redirect("~/Administrator/UserPanel.aspx");
        }

        protected void rbSave_Clicked(object sender, EventArgs e)
        {
            saveData();
            fillFieldsWithData();
        }

        protected void rgAnnualVacation_InsertCommand(object sender, GridCommandEventArgs e)
        {
            try
            {
                GridEditableItem item = e.Item as GridEditableItem;
                Hashtable values = new Hashtable();
                item.ExtractValues(values);

                AnnualVacation newAnnualVacation = new AnnualVacation();
                item.UpdateValues(newAnnualVacation);
                //newAnnualVacation.IsNew = true;

                ((List<AnnualVacation>)ViewState["AnnualVacationSource"]).Add(newAnnualVacation);
            }
            catch
            {
                //Hier fehlermeldung
            }

        }

        protected void rgAnnualVacation_DeleteCommand(object sender, GridCommandEventArgs e)
        {
            int annualVacationId = int.Parse((e.Item as GridDataItem).GetDataKeyValue("AnnualVacationId").ToString());
            ((List<AnnualVacation>)ViewState["AnnualVacationSource"]).
                Remove(((List<AnnualVacation>)ViewState["AnnualVacationSource"]).
                Where(av => av.AnnualVacationId == annualVacationId).FirstOrDefault());
        }

        protected void rgAnnualVacation_NeedDataSource(object sender, GridNeedDataSourceEventArgs e)
        {
            rgAnnualVacation.DataSource = ViewState["AnnualVacationSource"];
            if (rgAnnualVacation.DataSource == null)
            {
                rgAnnualVacation.DataSource = String.Empty;
            }
        }

        protected void rgAnnualVacation_UpdateCommand(object sender, GridCommandEventArgs e)
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:54:30.097

也许数据字段`fromdate`并且`todate`区分大小写。我看到您的 GridBoundColumns 使用`FromDate`and `ToDate`。你试过吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T05:51:46.670

这很奇怪，尝试将一个空的 Page_DataBinding 事件处理程序添加到您的插入/编辑用户控件：

```
Private Sub Page_DataBinding(sender As Object, e As System.EventArgs) Handles Me.DataBinding

End Sub 
```

它对我有用，我将所有内容都绑定到 OpenAccess。

# localization - bing 翻译器语言代码 zh-CN 或 zh-CHS

> ID：13026568
> 
> 赞同：4
> 
> 时间：2012-10-23T08:42:48.823
> 
> 标签：localization, microsoft-translator

我发现 zh-CN 和 zh-CHS 都可以用作语言代码，但为什么微软只告诉我只能使用 zh-CHS：http: [//msdn.microsoft.com/en-us/library /hh456380.aspx](http://msdn.microsoft.com/en-us/library/hh456380.aspx)。

会有什么不同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T15:31:58.713

这些代码有很多混淆，因为它们看起来都很相似，但可能意味着不同的东西。

如果您在[CultureInfo docs](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.parent)中达到顶峰，您会看到 zh-CHS 指的是“简体中文”文化，而 zh-CN 是更具体的文化代码，意思是“简体中文，中华人民共和国”（例如特定国家/地区使用的语言，zh-CHS 父母的子文化）。

我认为在 Bing 翻译器的上下文中使用特定于国家/地区的文化代码是没有意义的（例如，两种文化都使用相同的语言，但 zh-CN 更具体，可以让您区分中国的简体中文和新加坡的简体中文， zh-SG)。

# r - 在 R 中使用格式时如何保留 NA？

> ID：13026572
> 
> 赞同：1
> 
> 时间：2012-10-23T08:43:04.447
> 
> 标签：r, format

我有一个矩阵，其中包含一些`NA`我想格式化然后写入 CSV 文件的矩阵，将每个矩阵替换`NA`为两个破折号。但是，所有的`NA`get 转换为字符`format`，`write.csv`然后无法检测和替换它们。

在阅读了 的帮助文件后`format`，设置 `na.encode=FALSE`似乎是合乎逻辑的事情，但这并没有解决问题。我也用谷歌和这个网站搜索过其他有这个问题的人，但找不到任何人。这似乎应该有一个简单的答案，让我把头撞在墙上。

我的代码的一个最小示例如下所示：

```
data = matrix(c(pi, NA, pi*100, NA), 2, 2)
data.f = format(data, digits=4, nsmall=2)
write.csv(data.f, file="data.csv", na="--") 
```

我正在使用 R 2.15.1。这样做的正确方法是什么？

*编辑：谁能解释为什么这甚至需要解决方法？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:02:11.820

可能有一种更正统的方法可以做到这一点，但也许您可以`!is.na()`在`format()`阶段使用来防止将`NA`值转换为字符。

这是一个最小示例以及生成的 CSV。

```
set.seed(1)
data <- matrix(rnorm(20), ncol=5)
data[sample(length(data), 5)] <- NA
data.f <- data
data.f[!is.na(data.f)] <- format(data.f[!is.na(data.f)], digits = 4, nsmall = 2)
write.csv(data.f, file = "data.csv", na = "--")
dput(write.csv(data.f, na = "--"))
# "","V1","V2","V3","V4","V5"
# "1","-0.62645"," 0.32951",--,--,--
# "2"," 0.18364","-0.82047",--,"-2.21470"," 0.94384"
# "3","-0.83563"," 0.48743"," 1.51178",--," 0.82122"
# "4"," 1.59528"," 0.73832"," 0.38984","-0.04493"," 0.59390"
# NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T09:05:09.980

这是一个可能的解决方法

```
data = matrix(c(pi, NA, pi*100, NA), 2, 2)
data.f = format(data, digits=4, nsmall=2)
data.f <- replace(data.f, which(data.f == "     NA"), "--")
write.csv(data.f, file="data.csv") 
```

# ssl - 无法创建链式 SSL 证书

> ID：13026581
> 
> 赞同：0
> 
> 时间：2012-10-23T08:43:44.400
> 
> 标签：ssl, certificate, chained

我正在尝试升级我的 Jira 服务器上的 SSL 证书。目前，它在使用正确的链式证书时工作得非常好。

证书由客户提供并且看起来是有效的。

我有一个根证书、两个中间证书和一个域证书。

我跟着这个：

1.  使用 mydomain 的别名生成新的密钥库
2.  导入根证书
3.  导入 inter1 证书
4.  导入inter2证书
5.  导入 mydomain 证书

我也尝试过以其他方式导入证书，但没有成功。

该站点存在 SSL 错误，并且在任何情况下都不会显示证书的链接信息。

请帮忙！

谢谢阿迪亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:26:02.750

经过大量调查，我自己和我的团队找到了答案。在进行任何更新之前，请确保您拥有正确的根证书域。以下是我为成功升级证书而执行的步骤。

1.  在您的服务器上创建一个密钥库。
2.  生成 .csr 以请求证书
3.  客户端将此.csr 发送给负责生成链证书的CA 机构
4.  获得链证书后，从根证书到keystore中的域证书一一导入
5.  按照步骤在 tomcat 上安装密钥库
6.  重启tomcat
7.  测试。
8.  投票，如果有帮助:)

# android - 在android中将序列编号标签添加到谷歌地图标记

> ID：13026582
> 
> 赞同：1
> 
> 时间：2012-10-23T08:43:45.297
> 
> 标签：android, android-mapview, google-maps-markers

如何在具有相同标记png的android谷歌地图中动态添加序列号？

我去过10个地方。我想在起点显示标记。标记将具有序列号 1,2,3,.... 我该怎么做？

这不应该是不同的 pngs 。我想使用 1 个 png，数字说 1-10 将打印在标记上。

还有一件事：数字也会有不同的颜色和字体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:53:31.883

你会通过触摸屏幕来添加标记吗？或者一旦你达到那个点，它们就会出现。[https://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)展示了如何放置标记和图像。这是一个示例项目[https://github.com/commonsguy/cw-android/tree/master/Maps/NooYawk](https://github.com/commonsguy/cw-android/tree/master/Maps/NooYawk)它解释了如何显示多个标记

# android - 在特定时间自动更改android配置文件模式

> ID：13026583
> 
> 赞同：2
> 
> 时间：2012-10-23T08:43:45.547
> 
> 标签：android, broadcastreceiver, profile, scheduler

如何在android中的特定时间自动更改android手机的配置文件模式？

我想制作一个应用程序，其中配置文件模式将在特定时间自动更改。

我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:47:15.210

配置文件不是内置的 Android 功能，一些制造商和自定义 ROM 添加了它们，因此没有通用的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:28:39.507

[AudioManager](http://developer.android.com/reference/android/media/AudioManager.html)类可用于设置铃声。

使用 setRingerMode() 方法。以下代码将铃声设置为静音模式：

```
AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
audioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT); 
```

以下是此函数的可接受值：

```
RINGER_MODE_NORMAL, RINGER_MODE_SILENT, or RINGER_MODE_VIBRATE. 
```

还要在清单文件中添加以下权限：

```
android.permission.MODIFY_AUDIO_SETTINGS 
```

EDIT1::[警报管理器](http://developer.android.com/reference/android/app/AlarmManager.html)可用于在特定时间执行代码..

# javascript - 关闭开发者工具后，Chrome 扩展程序消失

> ID：13026584
> 
> 赞同：0
> 
> 时间：2012-10-23T08:43:55.490
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在制作一个带有文件上传表单的简单 Chrome 扩展程序。当开发人员工具窗口为插件（“检查元素”）打开时，它工作正常，但是当我尝试在没有开发人员工具的情况下运行它时，当我单击文件选择按钮时插件会崩溃。怎么了？我在 OSX 10.7.5 上使用 Chrome 版本 22

代码如下：

这是 HTML 部分：

```
<!doctype html>
<html>
  <head>
    <script src="upload.js"></script>
  </head>
  <body>
    <form enctype="multipart/form-data" method="post" action="http://localhost" id="form">
      <input type="file" id="file" name="file" >
      <input type="button" id="sub" value="Upload">
    </form>
  </body>
</html> 
```

这是upload.js

```
function upload(form) {
  var formData = new FormData(form);
  var req = new XMLHttpRequest();
  req.open("POST", form.getAttribute("action"));
  req.onload = function(event) {
      console.log(event.target.responseText);
  };
  req.send(formData);
}

document.addEventListener( "DOMContentLoaded", function(){
    document.getElementById("sub").addEventListener("click", function() {
        upload(document.getElementById("form"));
    }, false);
 }, false ); 
```

这是 manifest.json：

```
{
  "name": "Issue-img",
  "version": "1.0",
  "manifest_version": 2,
  "description": "Simple upload.",
  "browser_action": {
      "default_icon": "icon.png",
      "default_popup": "upload.html"
  },
  "permissions": [
      "http://localhost/"
  ]
 } 
```

提前致谢！

# javascript - 始终在引导程序中预先输入的列表中显示链接

> ID：13026585
> 
> 赞同：0
> 
> 时间：2012-10-23T08:44:01.297
> 
> 标签：javascript, html, twitter-bootstrap

这是我在这里找到的代码[http://www.w3resource.com/twitter-bootstrap/typehead.php](http://www.w3resource.com/twitter-bootstrap/typehead.php)

```
<!DOCTYPE html>  
<html>  
<head>  
    <meta charset="utf-8" />  
    <title>Bootstrap typehead example by w3resource</title>  
    <link href="http://www.w3resource.com/twitter-bootstrap/twitter-bootstrap-v2/docs/assets/css/bootstrap.css" rel="stylesheet" type="text/css" />  
</head>  
<body>  
<div class="well">  
<input type="text" class="span3" style="margin: 0 auto;" data-provide="typeahead" data-items="4" data-source='["Ahmedabad","Akola","Asansol","Aurangabad","Bangaluru","Baroda","Belgaon","Berhumpur","Calicut","Chennai","Chapra","Cherapunji"]'>  
</div>  
<script src="http://www.w3resource.com/twitter-bootstrap/twitter-bootstrap-v2/docs/assets/js/jquery.js"></script>  
<script src="http://www.w3resource.com/twitter-bootstrap/twitter-bootstrap/twitter-bootstrap-v2/docs/assets/js/bootstrap-typeahead.js"></script>  
</body>  
</html> ​ 
```

它正在工作，但我想在其中添加一个小功能。我想在列表中创建一个始终显示在列表底部的链接。因此，如果您键入某些内容，如果将过滤列表，但底部的链接将始终显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:44:13.670

这个想法只是扩展 typehead 原型以重新定义其渲染方法：

```
var uber = {render: $.fn.typeahead.Constructor.prototype.render};
$.extend($.fn.typeahead.Constructor.prototype, {
    render: function(items) {
        uber.render.call(this, items);
        this.$menu.append('<li class="nostyle"><a href="#" onclick="alert(123)">some link</a></li>')
        return this;
    }
});​ 
```

请参阅此演示[http://jsfiddle.net/dfsq/8qZd8/2/](http://jsfiddle.net/dfsq/8qZd8/2/)

# c# - 回调干扰初始调用的返回

> ID：13026586
> 
> 赞同：0
> 
> 时间：2012-10-23T08:44:03.107
> 
> 标签：c#, wcf, callback

我有一个 WCF 服务，我试图让回调工作。

接口类看起来像：

```
[ServiceContract(
    SessionMode = SessionMode.Required,
    CallbackContract = typeof(IPredatorEngineCallback))]
public interface IMyApplication
{
    [OperationContract]
    Boolean DoSomething(string mystring);

    [OperationContract]
    Boolean SubscribeToEvent();

}

public interface IMyApplicationCallback
{
    [OperationContract (IsOneWay = true)]
    void EventRaised(EventMessage myEventMessage)
} 
```

EventMessage 是服务器和客户端共享的通信库中的类。

该接口的实现如下所示：

```
[ServiceBehavior(ConcurrencyMode=ConcurrencyMode.Multiple)]
public class MyApplication : IMyApplication
{
    private List<IMyApplicationCallback> CallbackList = new List<IMyApplicationCallback>;

    public Boolean DoSomething(string mystring)
    {
           // Do stuff

           // Now Raise an event
           PublishEvent();

           return true;
    }

    public Boolean SubscribeToEvent()
    {    
        IMyApplicationCallback IMAC = OperationContext.Current.GetCallbackChannel<IMyApplicationCallback>();
        if (!Callbacklist.Contains(IMAC)
           Callbacklist.Add(IMAC);
    }

    private void PublishEvent()
    {
        EventMessage myEM = new EventMessage();

        // Populate myEM.Fields

        Callbacklist.ForEach(delegate(IMyApplicationCallback callback)
        { callback.EventRaised(myEM); });
    }
} 
```

这个想法是客户端可以选择订阅接收事件。

我分阶段构建了我的应用程序，并且在实施回调之前，该服务运行良好。对 DoSomething() 的调用做了他们应该做的事情，并且几乎立即返回。

现在我已经实现了 CallBacks，如果我在 DoSomething 中注释掉 RaiseEvents() 行，它会立即返回。

我的客户端代码现在首先调用 SubscribeToEvent()，然后再调用 DoSomething()。

如果我取消注释并继续使用调试器，我会看到 DoSomething 几乎立即完成 - 没有延迟。我已经在 VS2010 的同一台机器上运行了客户端和 WCF 服务。我一直到 DoSomething() 中的结束 }。

但是，我的客户端中的回调函数没有被调用。1 分钟后，它终于被调用了，而且我还收到一条错误消息，指出我原来的调用已超时。所以我将 app.config 更改为减少到 10 秒，错误消息是：

```
"This request operation sent to http://localhost:8732/Design_Time_Addresses/MyApplication/MyAppication did not receive a reply in the configured timeout (00:00:09.987997). The time allotted to this operation may have been a portion of a longer timeout..." 
```

因此，似乎有些东西阻止了第一个电话的返回；但该事件已被提出，因为它最终会到达那里。我怀疑这与锁定/并发模式有关，但我承认我迷失了解决方案。

在客户端，我使用了通过添加服务引用生成的代理代码。

服务器端 app.config（仅相关部分）：

```
</configuration> 
```

客户端 App.config：

```
<configuration>
<system.serviceModel>
    <bindings>
        <wsDualHttpBinding>
            <binding name="WSDualHttpBinding_IPredatorEngine" closeTimeout="00:00:10"
                openTimeout="00:00:10" receiveTimeout="00:10:00" sendTimeout="00:00:10"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00" />
                <security mode="Message">
                    <message clientCredentialType="Windows" negotiateServiceCredential="true"
                        algorithmSuite="Default" />
                </security>
            </binding>
        </wsDualHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:8732/Design_Time_Addresses/MyApplication/MyApplication/"
            binding="wsDualHttpBinding" bindingConfiguration="WSDualHttpBinding_IMyApplication"
            contract="MyApplication.IMyApplication" name="WSDualHttpBinding_IMyApplication">
            <identity>
                <dns value="localhost" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel>
</configuration> 
```

我假设我没有正确配置一些东西。谁能发现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T03:15:05.027

经过大量搜索和反复试验，我发现我需要将 SynchronizationContext 设置为 false。

```
[ServiceBehavior(ConcurrencyMode=ConcurrencyMode.Multiple, UseSynchronizationContext=false)] 
```

我还需要在客户端代码的实现上设置以下内容：

```
[CallbackBehavior(ConcurrencyMode=ConcurrencyMode.Multiple, UseSynchronizationContext = false)] 
```

# java - 如何在 Play 中启动带有请求的后台线程！框架？

> ID：13026587
> 
> 赞同：2
> 
> 时间：2012-10-23T08:44:02.777
> 
> 标签：java, playframework, playframework-2.0

我一直在看剧！框架，我有兴趣将我的一个项目转换为它。但是，该项目要求在用户操作时产生长时间运行的线程，但线程的结果不会通过正常的请求-响应方法返回给用户。相反，用户被重定向到一个页面，该页面监视他们已启动的线程。

所以，我想知道如何创建一个用户操作，该操作在用户发布到 /start 时创建一个线程，但该线程自动进入“后台”并且用户收到诸如“ok”之类的响应，甚至是重定向，而不是线程的输出。

我还希望对线程进行一定程度的控制；换句话说，我不只是想创建一个线程并让它运行。我想要某种全局参考点，以便用户可以在线程启动后停止它（例如通过访问/stop）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:51:02.137

Play 提供了特殊的 Job，可以定期在后台运行，也可以在应用程序启动时运行，但我认为它不适合你。

在您的情况下，您可以使用 Java API 简单地生成新`Thread`任务或提交新任务`Executor`并将响应返回给用户。对于停止`Thread`，您可以使用带有循环和中断标志的标准方法。这里的 play 框架没有什么特别之处，只是普通的 java api。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T11:35:45.873

我不会产生新`Thread`实例，而是使用`Actor`实例。它们是用于在后台执行非阻塞任务的更简单和健壮的模型。

有关详细信息，请参阅[Play](http://www.playframework.org/documentation/2.0.4/ScalaAkka)和[Akka](http://doc.akka.io/docs/akka/2.0.2/intro/getting-started-first-scala.html)文档。

# .htaccess - 变量 url 的复杂 htaccess 重写

> ID：13026589
> 
> 赞同：2
> 
> 时间：2012-10-23T08:44:12.193
> 
> 标签：.htaccess, mod-rewrite

我有一个包含 SEO 链接的购物车，我正在创建一个选项来优化显示结果中的搜索选项。

这是我想要实现的一个例子

客户展示产品列表 www.example.com/products/Drives-Bluray/view/list/category_id/30/sub_category/167

然后，如果客户也想按制造商搜索 www.example.com/products/Drives-Bluray/view/list/category_id/30/sub_category/167?manufacturer=LG

或者如果客户想按制造商和价格订购

www.example.com/products/Drives-Bluray/view/list/category_id/30/sub_category/167?manufacturer=LG&orderby=price

在我目前拥有的 htaccess 中；

```
RewriteRule view/([a-z]+)/category_id/([0-9]+)/sub_category/([0-9]+)$ com_products.php?view=$1&category_id=$2&sub_category=$3 [L] 
```

我已经搜索过，似乎无法弄清楚如何拥有多个变量，这些变量可能使用 RewriteCond 存在，也可能不存在。

有人可以举个例子吗？

谢谢

周杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T03:36:36.813

为了能够将查询附加到重写 URL 的末尾，您需要使用[`QSA`flag](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_qsa)。这允许您在漂亮 URL 的末尾添加查询字符串，`?`而不是`&`.

# c# - 当我不在表格中时如何检查是否按键？

> ID：13026590
> 
> 赞同：1
> 
> 时间：2012-10-23T08:44:12.223
> 
> 标签：c#, .net

我有一个正在运行但不在焦点中的表单。现在我想按`CTRL`+`NUM1`以便不在前台的表单捕获它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:52:44.907

应该可以使用键盘钩子，您的应用程序在启动时安装它并在应用程序关闭时将其删除。

这应该让你开始，你需要知道/理解 Win32 API 的基础知识！ [http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)

# delphi - TWebBrowser 中是否有与 Chromium Embedded 的 OnResourceResponse 等效的功能？(德尔福)

> ID：13026593
> 
> 赞同：2
> 
> 时间：2012-10-23T08:44:18.467
> 
> 标签：delphi, twebbrowser

我目前正在尝试在加载时查看通过 Res://imagename 加载的图像。在带有 res 处理程序的 Chromium 中，我已经能够通过 ResourceResponse 事件做到这一点，但是，据我所知，TWebBrowser 没有类似的功能。

我已经能够锁定 OnDocumentComplete 函数，并且能够实现一种非常低效的方式，一旦创建了整个 HTML 文档就可以查看它......

```
procedure TNotesBrowser.TBrowserDocumentComplete(ASender: TObject; const pDisp:   IDispatch; var URL: OleVariant);
var
    HTMLDocument2: IHTMLDocument2;
    i            : Integer;
    Item         : IHTMLElement;
    ImageUrl     : string;
begin
    HTMLDocument2 := ((FBrowser as TWebBrowser).Document AS IHTMLDocument2);
    if HTMLDocument2 <> nil then
    begin
        for i := 0 to HTMLDocument2.images.length -1 do
        begin
        Item := HTMLDocument2.images.item(i, 'null') As IHTMLElement;
        ImageUrl:=item.getAttribute('src',0);

        if ContainsText(ImageURL,'ImageName') then
            if Assigned(FCCICONLoaded) then
                { Trigger Event }
                FCCICONLoaded(self);
        end;
    end;
end; 
```

然而，这是一个相当漫长的过程。那么有没有其他人发现一个类似于 Chromium 的 OnResourceResponse() 的事件来避免查看文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T14:53:40.543

通过大量研究，我找到了使用异步可插入协议解决此问题的方法，但到目前为止，它仅适用于将 TWebBrowser 直接嵌入到表单中的单个表单应用程序。此解决方案的源代码可在此处找到[http://www.jasontpenny.com/blog/2010/03/23/custom-protocol-handler-in-delphi/](http://www.jasontpenny.com/blog/2010/03/23/custom-protocol-handler-in-delphi/)。

如果您像我一样，并且由于您的 TWebbrowser 没有直接嵌入到表单中而在使用异步可插入协议时仍然存在问题，那么我提出了一个新问题： [如何找到用于 TWebBrowser 异步可插入协议的 ComServer](https://stackoverflow.com/questions/13051691/twebbrowser-comserver-for-asynchronous-pluggable-protocol)

# jquery - 根据另一个调整div的高度

> ID：13026598
> 
> 赞同：2
> 
> 时间：2012-10-23T08:44:37.953
> 
> 标签：jquery, css

是否可以仅使用 CSS 将右 div 的大小调整为左 div 的高度？
[我的例子](http://jsbin.com/anevor/13/)

我试过这样的jQuery方法：

```
$(document).ready(function () {
   $("#right").css("height", $("#left").height());
}); 
```

这种方法效果不佳，因为我在左侧 div 中动态加载了内容，而 jQuery 方法有时会错误计算高度。

我也尝试`height:100%`了正确的 div 但它没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T08:50:13.620

为此，您可以使用**display:table**属性。像这样写：

```
#left{
    margin-right: 15px;
    width: 425px;
    background-color:#11DD52;
}

#right{
    width:200px;
    background-color:#4477AA;
}
#left, #right{
  display:table-cell;
} 
```

检查这个[http://jsfiddle.net/ZZBM5/](http://jsfiddle.net/ZZBM5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:18:40.930

编辑：如果你喜欢 hacky 的做事方式，@sandeep 创造了[这个](http://jsfiddle.net/ZZBM5/2/)伟大的解决方法。

我最终使用了[这个](http://benalman.com/projects/jquery-resize-plugin/)很棒的 jQuery 调整大小插件。我希望有一个简单的 CSS 解决方案，但上面评论中的几个答案给了我额外的浏览器兼容性问题。
这就是我所做的：

```
$("#left").resize(function () {
    $("#right").css("height", $(this).height());
}); 
```

# web-services - Axis2 层次结构上下文未启动

> ID：13026600
> 
> 赞同：1
> 
> 时间：2012-10-23T08:44:48.387
> 
> 标签：web-services, axis2

我正在尝试在 Axis2 服务器上开发具有应用程序范围的服务，当我启动服务时，axis2 服务器不会实例化上下文层次结构。

有人可以帮助我理解为什么 Axis2 服务器没有启动上下文？

这里是类的代码：

```
package xxx;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.StringTokenizer;

import org.apache.axis2.context.ConfigurationContext;
import org.apache.axis2.context.MessageContext;
import org.apache.axis2.context.ServiceContext;
import org.apache.axis2.description.AxisService;
import org.apache.axis2.service.Lifecycle;

import org.apache.log4j.Logger;

public class Transportsessionservice implements Lifecycle {

  private static final Logger log = Logger.getLogger(LoginStrong.class);

  public int loginTablet(String username, String password) throws Exception {

    ServiceContext serviceContext = MessageContext.getCurrentMessageContext().getServiceContext();
    String ip = (String)MessageContext.getCurrentMessageContext().getProperty("REMOTE_ADDR");
    log.info("SERVICE start ["+ip+"]");

    if(serviceContext.getProperty("COUNT") == null) {
      serviceContext.setProperty("COUNT", 1);
    } else {
      int c = (Integer)serviceContext.getProperty("COUNT");
      serviceContext.setProperty("COUNT", c++);
    }
    log.info("COUNT = " + serviceContext.getProperty("COUNT"));
  }

  @Override
  public void init(ServiceContext serviceContext) {
    log.info("init");
  }

  @Override
  public void destroy(ServiceContext serviceContext) {
    log.info("destroy");
  }

} 
```

在我正在使用的 service.xml 文件下方：

```
<serviceGroup>
<service name="Transportsessionservice" scope="application">
    <Description>This is a sample service to test transport scope</Description>
    <messageReceivers>
        <messageReceiver mep="http://www.w3.org/2006/01/wsdl/in-only" class="org.apache.axis2.rpc.receivers.RPCInOnlyMessageReceiver"/>
        <messageReceiver mep="http://www.w3.org/2006/01/wsdl/in-out" class="org.apache.axis2.rpc.receivers.RPCMessageReceiver"/>
    </messageReceivers>
    <parameter name="ServiceClass" locked="false">xxx.Transportsessionservice</parameter>
</service>
</serviceGroup> 
```

最后是 apache tomcat 的输出：

```
23-ott-2012 14.26.19 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files (x86)\Java\jre6\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files (x86)/Java/jre6/bin/client;C:/Program Files (x86)/Java/jre6/bin;C:/Program Files (x86)/Java/jre6/lib/i386;C:\Program Files (x86)\Java\jre6\bin;C:\app\product\11.2.0\client_1\bin;C:\Program Files (x86)\PC Connectivity Solution\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Users\margheritti.luigi\Oracle\obiee11g\oraMiddle\Oracle_BI1\products\Essbase\EssbaseServer\bin;C:\Users\margheritti.luigi\Oracle\obiee11g\oraMiddle\Oracle_BI1\bin;C:\Users\margheritti.luigi\Oracle\obiee11g\oraMiddle\Oracle_BI1\opmn\bin;C:\Users\margheritti.luigi\Oracle\obiee11g\oraMiddle\Oracle_BI1\opmn\lib;C:\Users\margheritti.luigi\Oracle\obiee11g\oraMiddle\Oracle_BI1\perl\bin;C:\Program Files (x86)\Borland\StarTeam SDK 11.0\Lib;C:\Program Files (x86)\Borland\StarTeam SDK 11.0\Bin;C:\blp\Api\dde;C:\blp\Api;.
23-ott-2012 14.26.19 org.apache.tomcat.util.digester.SetPropertiesRule begin
AVVERTENZA: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:MyBusiness_v2' did not find a matching property.
23-ott-2012 14.26.19 org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
23-ott-2012 14.26.19 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 302 ms
23-ott-2012 14.26.19 org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
23-ott-2012 14.26.19 org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.32
[WARN] Web application uses org.apache.axis2.transport.http.AxisAdminServlet; please update web.xml to use org.apache.axis2.webapp.AxisAdminServlet instead
[INFO] Clustering has been disabled
[INFO] Deploying module: addressing-1.6.1 - file:/C:/Data/Personal/Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyBusiness_v2/WEB-INF/modules/addressing-1.6.1.mar
[INFO] Deploying module: metadataExchange-1.6.1 - file:/C:/Data/Personal/Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyBusiness_v2/WEB-INF/modules/mex-1.6.1.mar
[INFO] Deploying module: mtompolicy-1.6.1 - file:/C:/Data/Personal/Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyBusiness_v2/WEB-INF/modules/mtompolicy-1.6.1.mar
[INFO] Deploying module: ping-1.6.1 - file:/C:/Data/Personal/Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyBusiness_v2/WEB-INF/modules/ping-1.6.1.mar
[INFO] Deploying module: script-1.6.1 - file:/C:/Data/Personal/Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyBusiness_v2/WEB-INF/modules/scripting-1.6.1.mar
[INFO] Deploying module: soapmonitor-1.6.1 - file:/C:/Data/Personal/Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyBusiness_v2/WEB-INF/modules/soapmonitor-1.6.1.mar
[INFO] Deploying Web service: Transportsessionservice - file:/C:/Data/Personal/Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyBusiness_v2/WEB-INF/services/Transportsessionservice/
[INFO] Deploying Web service: version.aar - file:/C:/Data/Personal/Workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyBusiness_v2/WEB-INF/services/version.aar
[INFO] init
[WARN] No transportReceiver for org.apache.axis2.transport.http.AxisServletListener found. An instance for HTTP will be configured automatically. Please update your axis2.xml file!
23-ott-2012 14.26.20 org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
23-ott-2012 14.26.20 org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
23-ott-2012 14.26.20 org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/12  config=null
23-ott-2012 14.26.20 org.apache.catalina.startup.Catalina start
INFO: Server startup in 1042 ms 
```

请帮助我找到激活上下文层次结构的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T10:50:02.373

> 请更新您的axis2.xml 文件！包括这个

```
 <parameter name="manageTransportSession" locked="false">true</parameter> 
```

# java - java Socket类中的sendbuffersize可以设置多大？

> ID：13026604
> 
> 赞同：3
> 
> 时间：2012-10-23T08:45:01.263
> 
> 标签：java, sockets, bufferedoutputstream

我有一个使用 FTP 库传输文件的应用程序。接收文件效果很好，主要是发送文件。当我尝试发送应用程序挂起的大文件 (3 MB) 时，就会出现问题。没有错误信息，什么都没有。我已经调试过，发现它停`socketWrite0()`在`java.net.SocketOutputStream`. 此方法永远不会返回，而只是挂起/阻塞。调用自： 文件开始传输，但第二次调用传输线程在到达 socketWrite0() 方法时停止并挂起。我已经尝试通过在其构造函数中发送一个参数来调整 BufferedOutputStream 中的缓冲区大小，看起来这个大小是多少并不重要，它总是在第二次刷新时停止。
`java.io.BufferedOutputStream write() which calls
java.io.BufferedOutputStream flushBuffer() which calls
java.net.SocketOutputStream write() which calls
java.net.SocketOutputStream socketWrite() which calls
java.net.SocketOutputStream socketWrite0()`
`java.io.BufferedOutputStream flushBuffer()`

然后我尝试将 Socket setSendBufferSize 设置为 3 000 000，突然间一切正常，BufferedOutputStream 大小为默认值。只要我将此缓冲区大小设置为大于文件传输的文件大小，一切都很好！如果我将缓冲区大小设置为 400 000，则在转移此金额后转移停止。

我无法无限制地增加 BufferedOutputStream 缓冲区。如果我将它设置得太大，也会发生同样的事情：应用程序在 socketWrite0() 处挂起。

1.  谁能解释为什么？
2.  Socket 缓冲区大小可以有多大？极限是多少？
3.  BufferedOutputStream 缓冲区和 Socket 缓冲区有什么关系？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T23:39:42.677

听起来另一端没有从套接字读取，所以套接字阻塞了，如果你写了另一端（应该从套接字读取的那一侧），那么问题很可能出在该代码中。如果不是，并且您正在尝试实现 FTP 标准并与已知的工作 FTP 服务器通信，那么您在客户端实现它的方式很可能存在问题（例如，您正在尝试写入文件数据，但远程端是不期待它并且期待控制消息或其他东西）。

# jquery - jQuery iPhone 3gs 性能

> ID：13026605
> 
> 赞同：2
> 
> 时间：2012-10-23T08:45:02.737
> 
> 标签：jquery, iphone

我有一个与性能相关的问题；专门针对 iPhone 3gs。我有一个 jQuery Mobile 网站，它在我朋友的 iPhone 3gs 上反应良好，直到我最近做出了改变。由于更改，在 3gs 上，有问题的页面似乎很慢......几乎无法使用。该页面在 Galaxy S2 上仍然运行良好，但在检查了 javascript 的基准后，我可以看到 S2 能够更好地处理 javascript，所以我想这并不奇怪。此外，iPhone 4 应该没有超出基准数据的问题。

我添加的代码非常简单。它只是从页面上的 12 个按钮中删除 href 并处理点击事件。这是代码：

```
$(document).ready(function() {
  $('.mybutton').removeAttr("href");

  $('.mybutton').on("click", function(){
    if($(this).hasClass("inactive") || $(this).hasClass("active")) {
      $(this).toggleClass("active inactive");
    }

    // Disable if 1 active button, else inactive
    if($('.active').length == 1) {
      $('.inactive').toggleClass("inactive disabled");
    } else {
      $('.disabled').toggleClass("disabled inactive");
    }
  });

}); 
```

我能做些什么来加快 iPhone 3gs 的代码吗？我什至应该为这款手机烦恼吗？除非我的技术有挑战的工作同事，还有人还在使用吗？:)

# html - 输入类型=按钮访问link_to

> ID：13026606
> 
> 赞同：0
> 
> 时间：2012-10-23T08:45:05.290
> 
> 标签：html, ruby-on-rails, haml

我有以下haml代码

```
%input{type: "button", value: "Finish"}= link_to "", stop_time_entry_path(time_entry), remote: true 
```

单击按钮时如何访问 stop_time_entries_path(time_entry)？

看起来很简单，但我想不通

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:48:15.863

```
= link_to stop_time_entry_path(time_entry), remote: true do
    %input{type: "button", value: "Finish"} 
```

这就是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:49:13.340

有一个[button_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to) Rails 助手。试用：

`button_to "Finish", stop_time_entries_path(time_entry), remote: true`

# facebook - oauth 2.0 access_token IP 是否依赖？

> ID：13026608
> 
> 赞同：0
> 
> 时间：2012-10-23T08:45:07.793
> 
> 标签：facebook, api, authentication, oauth, vk

我想知道 Facebook、Twitter 或 Vkontakte API 提供的 access_token 是否取决于请求者的 IP。

我已经检查了这个页面：[http](http://en.wikipedia.org/wiki/OAuth) ://en.wikipedia.org/wiki/OAuth但它没有说明 IP。

可能是依赖于供应商实施还是有一些严格的规定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:03:53.063

nops，它们不依赖于 IP。它们只是特定于应用程序的。如果您有某个应用程序的访问令牌，则可以从任何 IP 地址（甚至是本地服务器）对该应用程序使用相同的访问令牌。

# java - 请求所有文件时如何避免读取超时？（谷歌驱动API）

> ID：13026613
> 
> 赞同：4
> 
> 时间：2012-10-23T08:45:26.117
> 
> 标签：java, google-api, google-drive-api

我有一个驱动器应用程序，它请求所有未丢弃的文件。但有时它会引发读取超时的 IOexception。有没有办法避免这种情况？

这是我得到的错误：

发生错误：java.net.SocketTimeoutException：读取超时

也许我的指数退避实施错误。

这是我用来获取文件的代码：

```
private static List<File> retrieveAllNoTrashFiles(Drive service) throws IOException, InterruptedException {
    List<File> result = new ArrayList<File>();
    Files.List request = service.files().list().setQ("trashed = false").setMaxResults(1000);
    do {
        try {
            FileList files =executeRequest(service,request);
            result.addAll(files.getItems());
            request.setPageToken(files.getNextPageToken());
        } catch (IOException e) {       //here I sometimes get the read timeout
            System.out.println("An error occurred: " + e);
            request.setPageToken(null);
        }
    } while (request.getPageToken() != null
            && request.getPageToken().length() > 0);

    return result;
}

private static FileList executeRequest(Drive service,Files.List request) throws IOException, InterruptedException {
    Random randomGenerator = new Random();
    for (int n = 0; n < 5; ++n) {
        try {
            return(request.execute());
        } catch (GoogleJsonResponseException e) {
            if (e.getDetails().getCode() == 403
                    && (e.getDetails().getErrors().get(0).getReason().equals("rateLimitExceeded")
                    || e.getDetails().getErrors().get(0).getReason().equals("userRateLimitExceeded"))) {
                // Apply exponential backoff.
                Thread.sleep((1 << n) * 1000 + randomGenerator.nextInt(1001));
            } 
             //else {
                // Other error, re-throw.
               // throw e;
           // }
        }
    }catch(SocketTimeoutException e){
            Thread.sleep((1 << n) * 1000 + randomGenerator.nextInt(1001));
        }
    System.err.println("There has been an error, the request never succeeded.");
    return null;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-05-18T00:05:57.783

几天前我也有同样的经历。我的问题的答案在这里找到。[https://code.google.com/p/google-api-java-client/wiki/FAQ](https://code.google.com/p/google-api-java-client/wiki/FAQ)。创建 Drive 的实例时，您可以调用 setHttpRequestInitializer 方法，将 HttpRequestInitializer 的新实例作为参数传递并实现 initialize 方法。在那里，您可以增加 ReadTimeout 和 ConnectionTimeout。

这是一个示例代码：

```
 Drive drive = new Drive.Builder(this.httpTransport, this.jsonFactory, this.credential).setHttpRequestInitializer(new HttpRequestInitializer() {

            @Override
            public void initialize(HttpRequest httpRequest) throws IOException {

                credential.initialize(httpRequest);
                httpRequest.setConnectTimeout(300 * 60000);  // 300 minutes connect timeout
                httpRequest.setReadTimeout(300 * 60000);  // 300 minutes read timeout

            }
        }).setApplicationName("My Application").build(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-27T17:24:37.480

指数退避只是一种让您有更多机会重试的方法，希望下次会更好。但这并没有解决问题的根源。

我注意到您将最大结果设置为 1000。考虑到读取超时通常是由于服务器端处理时间过长造成的，我建议您将此数字减少到 500 或 200。

当我使用最大结果计数 1000 获取更改时遇到了同样的问题。当我将大小更改为 200 或 500 时，它运行顺利。

因为可接受的最大数量与服务器情况有关，并且是动态变化的，所以您还可以设计一个指数退避策略来自动更新最大结果计数。例如，从1000开始，如果遇到错误则更改为500，如果仍然存在错误则更改为200。如果一段时间没有错误，则再次增加到500。

希望这会有所帮助~

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T09:53:33.283

您的指数退避仅在您捕获 GoogleJsonException 时触发，而您在超时时不会收到该异常。您也可以在指数退避中捕获 SocketTimeoutException

# c - c中的异步通信

> ID：13026615
> 
> 赞同：0
> 
> 时间：2012-10-23T08:45:34.973
> 
> 标签：c, asynchronous, serial-communication

我必须通过串行发送命令并根据命令接收答案，并根据收到的消息做一些事情。有人告诉我必须使用回调，因为这是一个异步操作。

我有 2 个线程，一个可以发送消息，一个可以接收消息。

例子：

```
//Thread 1
sendMessage("Initialize");

//Thread 2 
while(1)
{
    checkForMessages();
} 
```

如何编写为特定消息初始化并处理收到的消息的函数。

例子：

```
CommHandle(Command,MsgReceived)
{
  if(command)
  {
    if(MsgReceived == ok)
    ...
    if(MsgReceived == error)
    ...
  } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:56:54.523

> 有人告诉我必须使用回调，因为这是一个异步操作。

不必要。Windows中有一个东西叫做“异步I/O”，这算是Windows内部的一个术语，是“重叠I/O”的同义词（[解释here](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365683%28v=vs.85%29.aspx)）。当您使用重叠 I/O 时，您将在传输完成时收到回调。这很好，因为它减少了 CPU 负载，但如果您的程序在等待时没有更好的事情可做，那么它并不是真正需要的。因此，这取决于您的应用程序的性质。

但无论你的应用程序的性质如何，你确实应该通过线程处理所有串行通信，这样你就不会导致主 GUI 线程以令人尴尬的方式冻结。

但是，拥有一个 rx 和一个 tx 线程会给您带来两难境地：它们使用相同的端口句柄，并且无法自由访问它，因为这不是线程安全的。解决方案是要么让一个超级线程处理所有传输，要么通过互斥锁保护端口句柄。

我不确定哪种方法最好，我没有建议。我自己只使用过“超级线程”：一个明显的优势是我可以将“杀死线程”、“端口打开”、“端口关闭”等 WaitFor 指令集中在一个地方。但与此同时，代码变得相当复杂。

> 如何编写为特定消息初始化并处理收到的消息的函数。

让您的线程将其接收到的数据铲到一些缓冲区中。一个 tx 缓冲区和一个 rx 缓冲区。根据您的串行协议和性能，您可能必须使用双缓冲区：一个用于当前传输，一个包含最近接收的数据。

然后从 main 中，从缓冲区中获取数据。它们需要是线程安全的。一旦你做到了这一点，只需像使用任何形式的数据一样编写一个解析器，然后从那里采取行动

# c# - 从目录中获取文件

> ID：13026618
> 
> 赞同：-1
> 
> 时间：2012-10-23T08:45:46.763
> 
> 标签：c#

我必须开发一项服务，其中我的第一个任务是

->CSV 文件被放入一个目录

目录格式为 \servername\DirectoryName\*.csv。*

 *任何人都可以帮助我如何做到这一点，因为我是编程的绝对初学者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:55:32.850

您可以使用以下代码

```
string path = Assembly.GetExecutingAssembly().Location;
FileInfo fileInfo = new FileInfo(path);
string dir = fileInfo.DirectoryName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:48:34.553

您可以使用`Directory.GetFiles method`

链接：http: [//msdn.microsoft.com/en-us/library/3hwtke0f.aspx](http://msdn.microsoft.com/en-us/library/3hwtke0f.aspx)

```
var targetDirectory = "...";
var files = Directory.GetFiles(targetDirectory); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:50:33.007

您可以看到其中之一关于如何使用 C# 创建 Windows 服务：http: [//www.codeproject.com/Articles/3990/Simple-Windows-Service-Sample](http://www.codeproject.com/Articles/3990/Simple-Windows-Service-Sample) http://www.codeproject.com/Articles/14353 /Creating-a-Basic-Windows-Service-in-C

然后，您可以查看[如何：复制、删除和移动文件和文件夹](http://msdn.microsoft.com/en-us/library/cc148994.aspx)

我希望这有帮助！*

# zend-framework - 如何在某些 JQuery 函数中检查经过身份验证的用户（Zend FW）是否授权？

> ID：13026621
> 
> 赞同：0
> 
> 时间：2012-10-23T08:45:55.163
> 
> 标签：zend-framework, jquery, authentication, zend-auth

用户区有一个用户信息（web app 使用 Zend Framework + Jquery）。当我以 USER_1 身份登录时，我当然可以编辑 USER_1 信息，但是当我在新浏览器的窗口中以 USER_1 身份注销并以 USER_2 身份登录，然后返回打开 USER_1 信息的窗口时，我可以编辑 USER_1 信息，但已登录作为 USER_2。

**视图中的 EDIT 按钮代码：**

```
<div class="editbutton" id="switchbutton<?php echo $user['id']; ?>" onclick="showBody(<?php echo $user['id']; ?>)">EDIT USER</div> 
```

**单独的 .js 文件中的 showBody 函数：**

```
showBody = function(id) {
  if(active_id == id){
    $("#user-body-" + active_id).slideUp(250);
    active_id = 0;
    $("#switchbutton" + id).text("EDIT USER");
    return;
  }
  if(active_id == 0) $("#user-body-" + id).slideDown(300);
  else {
    $("#user-body-" + active_id).slideUp(250, function() {
      $("#user-body-" + id).slideDown(300);
    });
  }
  $("#switchbutton" + active_id).text("EDIT USER");
  $("#switchbutton" + id).text("CANCEL");
  active_id = id;
}; 
```

*user-body*是带有要编辑的文本字段的表单

如何从`showBody`函数中获取当前经过身份验证的用户以与 active_id 进行比较，如果相等，则如果不重定向到某个索引/操作，则通过操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:56:53.653

你总是可以使用 Zend_Auth

```
 // Get Zend_Auth instance
    $auth = Zend_Auth::getInstance();

    // Has user been authenticated
    if($auth->hasIdentity())
    {
      // If so, set user identity
      $this->view->identity = $auth->getIdentity();

      switch($this->view->identity->id)
      {
       case 1:
       $this->view->headScript()->appendFile(somefile.js');                 
      } 
```

# java - Java API 和 Java 方法有什么区别

> ID：13026622
> 
> 赞同：4
> 
> 时间：2012-10-23T08:45:57.723
> 
> 标签：java, api, methods

Java中的方法和API是否基本相同？如果不是，是什么让他们与众不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T08:48:58.137

API 指的是应用程序编程接口，世界其他地方都可以看到和使用。

方法可以是公共接口的一部分，也可以不是。但 API 确实是一组方法。

与 java 中的 API 相关的最常见的事情是*接口*，它实际上是一组公共方法声明。

如何看待 API 的另一种有用方法是将其视为合同。让我们以[List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)接口为例。它告诉您可以在*List*和 javadoc 中使用的方法签名，您可以看到合同是什么（您可以期待什么以及您需要确保什么，以便 List 按预期运行）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T08:48:15.103

API 由一组类型（包括其他工件）组成，其中包括方法、API 合同指定的那些方法的签名和行为。所以是的，API 和方法是两个不同的东西，就像爪子和狗是不同的东西一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T08:50:40.607

要详细说明 Markos 非常精确但有点简洁的答案：具体而言，您可以将 java 接口和相关的 javadoc 视为 API。例如`Collection`，定义了一个由 eg 扩展的 API。`Set`, 而是和API`HashSet`的具体实现。`Collection``Set`

干杯，

# vb.net - 从字符串转换日期和/或时间时转换失败

> ID：13026624
> 
> 赞同：0
> 
> 时间：2012-10-23T08:45:59.560
> 
> 标签：vb.net

我收到此错误“从字符串转换日期和/或时间时转换失败。” 在以前工作的代码上，直到我将数据库迁移到 2008 服务器。

这是代码；

```
 query1 = "INSERT INTO RequisitionSummary (RequisitionDate, RequisitionAmount, IssuingAmount) VALUES('" & dtpRequisitionDate.value & "','" & txtRequisitionAmt.Text & "','" & txtIssuingAmount.Text & "')" 
```

如果可以发现错误，我将不胜感激，因为我尝试了不同的方法，包括在插入之前转换变量中的值。

谢谢尼尔森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T14:00:05.187

根据您的服务器与您的计算机的区域设置，如果不匹配，您将收到此错误。

*   您可能需要转换为 a`date`然后应用格式以确保它与数据库中的设置匹配。
*   或者您可以在 sql 中进行 SQL 转换为区域设置（查看：http: [//msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)了解有关转换的更多详细信息）

# gwt - SmartGwt - 删除一个选项卡会清除画布

> ID：13026625
> 
> 赞同：0
> 
> 时间：2012-10-23T08:46:01.207
> 
> 标签：gwt, tabs, smartgwt

我已经构建了一个带有 SmartGWT TabSet 的 GUI，它带有可以动态添加和删除的选项卡。选项卡共享相同的画布，在每个选项卡选择时从选项卡移动到选项卡，如下所示：

```
myTabSet.addTabSelectedHandler(new TabSelectedHandler() {

    public void onTabSelected(TabSelectedEvent event) {
    [...]
    myTabs[myTabSet.getSelectedTabNumber()].setPane(myCanvas);

    // Then I fill the contained widgets with the tab-specific data

    }
} 
```

这有效，但是当我尝试删除标签时

```
myTabSet.removeTab(iToBeDeletedTab); 
```

该选项卡已删除，但其余选项卡有一个空白窗格，我只能通过重新加载页面来取回内容。我发现我必须通过调用来防止窗格破坏：

```
myTabSet.setDestroyPanes(false); 
```

和

```
myTabSet.updateTab(iToBeDeletedTab, null);                          
//called right before
myTabSet.removeTab(iToBeDeletedTab); 
```

我知道画布/窗格仍然被破坏，但我不知道如何防止这种情况。有没有人有任何提示？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:52:21.777

您的调用是正确的，但现在您得到的是与 TabSet 完全不关联且未绘制的窗格（检查开发人员控制台中的 Watch Tab，您会看到这一点）。现在，调用 updateTab(someOtherTab, pane) 将窗格连接到应该显示的其他选项卡之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T18:38:35.583

好的，我已经进行了一些测试并得到了与您相同的结果，但是在我找到的 Javadoc 中使用以下代码取得了一些成功：1°）：

```
***public void setPane(Canvas pane)
Specifies the pane associated with this tab. You can change the pane associated with a given tab after the TabSet has been created by calling TabSet.updateTab(int, com.smartgwt.client.widgets.Canvas)*** 
```

我尝试不将 tab1 的窗格设置为空，但它不起作用。我认为它可以以更好的方式安排，但无论如何重点是使用该`updatePad`方法

public static void testTabDelete(){ final Canvas theCanvas = new Canvas(); final TabSet theTabs = new TabSet(); theTabs.setWidth("80%"); theTabs.setHeight("80%"); 最终选项卡 tab1 = new Tab("Tab1"); 最终选项卡 tab2 = new Tab("Tab2"); 最终选项卡 tab3 = new Tab("Tab3"); IButton btn1 = new IButton("Btn1"); btn1.setLeft(10); btn1.setTop(100); btn1.setWidth(80);
theCanvas.addChild(btn1);

```
 IButton btn2 = new IButton("Delete");
      btn2.setLeft(100);
      btn2.setTop(100);
      btn2.setWidth(80);
      btn2.addClickHandler(new com.smartgwt.client.widgets.events.ClickHandler() {

        @Override
        public void onClick(com.smartgwt.client.widgets.events.ClickEvent event) {

            theTabs.updateTab(0, null);
            theTabs.updateTab(1, theCanvas);                
            theTabs.selectTab(tab2);                
            theTabs.removeTab(tab1);                
        }
    });
      theCanvas.addChild(btn2);     

    theTabs.addTab(tab1);
    theTabs.addTab(tab2);
    theTabs.addTab(tab3);
    tab1.setPane(theCanvas);

    RootPanel.get("container").add(theTabs);        

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:28:00.927

您是否尝试在删除选项卡后调用 redraw() 方法？这通常对我使用 smartGWT 小部件加载/重新加载数据有帮助。

# python - 使用python将csv加入sqlite数据库

> ID：13026626
> 
> 赞同：1
> 
> 时间：2012-10-23T08:46:01.393
> 
> 标签：python, sqlite, join, csv

我有一个包含 3 个三列（X、Y、Z）的 sqlite 数据库表。此外，我有一个 csv 文件（带有标题），它有 10 列，但 X 和 Y 也相同。我想使用 python 脚本将 csv 文件加入到数据库表中。

到目前为止，我设法建立了 db-connection 并在数据库中创建了新列，例如：

```
import csv, sqlite3
database = sqlite3.connect("my_sqlitedatabase")
db = database.cursor()
db.execute("ALTER TABLE dbtable ADD COLUMN 'col1' float")
db.execute("ALTER TABLE dbtable ADD COLUMN 'col2' float")
db.execute("ALTER TABLE dbtable ADD COLUMN 'col3' float") 
```

到目前为止，我还没有找到任何可以在 python 中使用 .import 的东西，我可能需要直接读取 csv 文件（请参阅[Importing a CSV file into a sqlite3 database table using Python](https://stackoverflow.com/questions/2887878/importing-a-csv-file-into-a-sqlite3-database-table-using-python)）

```
csvtable = csv.reader(open('csvtable.txt', 'r'), delimiter=',') 
```

对于加入，我想使用类似的东西：

```
UPDATE dbtable SET csvtable_col1=(SELECT dbtable.col1 FROM csvtable AS c 
... WHERE csvtable.X=dbtable.X AND csvtable.Y=dbtable.Y) 
```

如何使用 pyhton 将 csv 表加入我的数据库表？两者共享 X 和 Y 作为公共列，两者的组合可用作连接的唯一键。两个表都有几个 100000 行。我需要遍历 csv 文件的行吗？有什么建议么？

# c# - 编译器是否对字符串文字中的有效转义字符进行验证

> ID：13026632
> 
> 赞同：0
> 
> 时间：2012-10-23T08:46:26.933
> 
> 标签：c#, string

具有有效like的普通**字符串文字**的编译器编译没有任何错误。`escape sequence``\n``\t`

但是当我使用`invalid escape characters`like`\s`时，`\w`编译器显示错误。是的，我们可以通过使用`verbatim string`或转义来避免错误，`\\`但我的问题是

编译器是否**验证**字符串文字是否有效`escape characters`，如果是这样，那是唯一的目的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:48:28.373

> 编译器是否验证字符串文字是否有有效的转义字符

是的，显然确实如此，这就是您收到错误消息的原因。

> 如果是这样，那是唯一的目的！

我真的不明白这个问题。我假设您想知道为什么编译器不简单地接受无效的转义序列并逐字处理它们。这确实是一种可能性，但它会使字符串文字的解释略有不一致：`\x`根据`x`.

至少，C# 对转义序列有效性的严格检查没有缺点。也许它可以避免由于不同数量的连续反斜杠引起的拼写错误和混淆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-23T08:52:07.247

是的，编译器验证字符串，如果你使用无效的转义字符，你会得到错误：

[编译器错误 CS1009 - MSDN](http://msdn.microsoft.com/en-us/library/44ezxxy3%28v=vs.110%29.aspx)

> `(\)`意外字符跟在字符串中的反斜杠之后。编译器需要一个有效的转义字符。有关详细信息，请参阅[字符转义](http://msdn.microsoft.com/en-us/library/4edbef7e.aspx)。

# sql - 在一列 SQL 中选择具有较低值的行

> ID：13026635
> 
> 赞同：-1
> 
> 时间：2012-10-23T08:46:37.707
> 
> 标签：sql, select

我有两行：

```
ID | Name
1  | Adrian
2  | Cheska 
```

我希望能够选择具有较低 id 的行，在本例中为“Adrian”，因为他的 ID=1 低于 2。如何选择具有较低列值的行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T08:47:58.157

不确定您的 RDBMS ..这应该适用于所有 RDBMS

```
select * 
from your_table
where ID in(select min(id) from your_table) 
```

或者

**编辑：（**根据 **a_horse_with_no_name**的评论）

```
select * 
from your_table
where ID =(select min(id) from your_table) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:47:58.007

```
SELECT TOP 1 * FROM <tablename>
ORDER BY ID ASC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:48:57.473

```
SELECT TOP 1 * FROM table WHERE something = somethingElse ORDER BY ID ASC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T08:51:04.180

`SELECT * FROM table_name d where d.id = (select min(id) from table_name);`

# ios5 - IOS。单击我的信息按钮后无法关闭视图（新手）

> ID：13026652
> 
> 赞同：2
> 
> 时间：2012-10-23T08:47:39.013
> 
> 标签：ios5, modalviewcontroller

我为我的 infoButton 找到了一些代码，它显示了我的新 credits.xib 但**我无法回到我的 RootViewController**。在我的 Credits.xib 上，我已将“完成”按钮与 ToucheDown-FirstResponder-ToggleCredits Close 相关联。

这是我在 ViewDidLoad 中的 RootViewController.m 中的 infoButton 代码

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeInfoLight];
[button addTarget:self action:@selector(toggleCreditsOpen:) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *modalButton = [[UIBarButtonItem alloc] initWithCustomView:button];
[self.navigationItem setRightBarButtonItem:modalButton animated:YES];
//[button release];
[modalButton release]; 
```

我的代码就在我的 ViewDidLoad 之后

```
- (IBAction) toggleCreditsOpen:(id)inSender
{
    UIViewController *theController = [[UIViewController alloc] initWithNibName:@"Credits" bundle:nil];
    [self.navigationController presentModalViewController:theController animated:YES];
}

- (IBAction) toggleCreditsClosed:(id)inSender
{
    NSLog(@"Button Pressed!");
    //[self.navigationController dismissModalViewControllerAnimated:YES];
    [self.parentViewController dismissModalViewControllerAnimated:YES];
} 
```

我想我应该创建一个 Credits.h 并将 toggleCreditsClosed 放入其中吗？

这是堆栈跟踪

```
*** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIViewController 0x7c67610> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key DoneButton.'
*** First throw call stack: 
```

这是我的 Credits.h

```
#import <UIKit/UIKit.h>

@interface Credits : UIViewController

{

    IBOutlet UIButton *DoneButton;

}

@property (nonatomic, retain) UIButton *DoneButton;

@end 
```

和我的 Credits.m

```
#import "Credits.h"

@implementation Credits

@synthesize DoneButton;

- (void)viewDidLoad
{
    [super viewDidLoad];

}

- (void)viewDidUnload
{
    }

- (IBAction) toggleCreditsClosed:(id)inSender
{
    NSLog(@"Button Pressed!");
    [self dismissModalViewControllerAnimated:YES];
}

@end 
```

如果删除 DoneButton 链接，则会显示 Credits 视图，但我是在按下 Done 按钮时出现问题

```
Costumes[402:11f03] -[UIViewController toggleCreditsClosed:]: unrecognized selector sent to instance 0x7a4c460
2012-10-24 22:19:33.271 Costumes[402:11f03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIViewController toggleCreditsClosed:]: 
```

抱歉，但我不明白我必须做什么，我无法上传图片给你看，但在 Outlets 中，链接是（查看<->查看）和收到的操作（toggleCreditsClosed:<->Button-Done Touch Down）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:54:59.917

欢迎！

是的，您应该为您的 Credits 创建一个单独的 .h / .m。然后告诉 Interface Builder 你的 .xib 是 Credits 类。然后使用您想要的操作将您的按钮链接到此 .h。基本上，您的最后一个方法应该在 Credits.m 中：

```
- (IBAction) toggleCreditsClosed:(id)inSender
{
    NSLog(@"Button Pressed!");
    [self dismissModalViewControllerAnimated:YES];
} 
```

**当心，您在代码中使用self**而不是 self.parentViewController关闭模态视图！

（PS：你得到的答案可能并不总是有效。不要犹豫发表评论，告诉我们什么（没有）有效！）

# mysql - 将具有多行的项目从 mysql 映射到 solr

> ID：13026653
> 
> 赞同：4
> 
> 时间：2012-10-23T08:47:41.967
> 
> 标签：mysql, solr, nosql, key-value-store

所以我有一个规范化的表，其中包含一些我想放入 Solr 索引的数据，类似于这个

```
+----+--------------+--------------+---------+
| id |     name     |  attribute   | value   |
+----+--------------+--------------+---------+
|  1 | Apple        | color        | green   |
|  1 | Apple        | shape        | round   |
|  1 | Apple        | origin       | Belgium |
|  2 | Motorbike    | type         | fast    |
|  2 | Motorbike    | nr of wheels | 2       |
|  3 | Office chair | color        | grayish |
|  3 | Office chair | spins        | yes     |
+----+--------------+--------------+---------+ 
```

现在，我希望将其作为每个唯一 ID（即项目）的一个文档进行索引。但随后我将不得不将 n 个属性合并到一个文档中。为此，我需要对我的 dataConfig 做一些魔术。但是如何存储和映射 n 个字段？现在是使用动态字段的正确时机吗？

这是我目前的尝试。我很确定它是无效的。

```
<dataConfig>
    <dataSource 
        type="JdbcDataSource" driver="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost/mystuff"
        user="root" password="*****"/>

    <document name="doc">
        <entity name="t1" query="select * from item_to_id_table">
            <field name="id" column="id"/>
            <field name="name" column="name"/>
            <entity name="t2" query="select * from my_flat_table" 
                    cacheKey="t1.id"
                    cacheLookup="t2.id">

                <!-- alt 1 -->
                <field name="$(t2.attribute)" column="value" />
                <!-- alt 2 -->
                <entity name="properties" query="select property, value from t2" 
                        cacheKey="$(t2.attribute)"
                        cacheLookup="property">
                    <field name="$(properties.property)" column="value" />
                </entity>
            </entity>
        </entity>

    </document>
</dataConfig> 
```

我很确定这两种选择都不是有效的，除非我能找到更好的方法，否则我会尽快尝试。也许将脚本转换作为第三种选择。

这个用例与 Solr 一起使用是否合理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T14:35:25.867

我用[这里](http://www.chrisumbel.com/article/solr_dataimporthandler_dih_scripttransformer)描述的方式解决了这个问题。

简而言之，我使用脚本转换将“属性”实体行转换为带有前缀“p_”的字段。有点像这样（示例代码，可能存在错误）：

```
<dataConfig>
    <dataSource 
        type="JdbcDataSource" driver="com.mysql.jdbc.Driver"
        url="jdbc:mysql://localhost/mystuff"
        user="root" password="*****"/>

    <script>
    <![CDATA[ 
    function formProperty(row) { 
      var propName = row.get("property");
      var propVal = row.get("value");
      var fieldName = "p_" + propName;
      row.put(fieldName,propVal);
      return row; 
    } 
    ]]>
    </script> 

    <document name="doc">
        <entity name="t1" query="select * from item_to_id_table">
            <field name="id" column="id"/>
            <field name="name" column="name"/>
            <entity name="t2" 
                    query="select * from my_flat_table
                    where my_flat_table.id = ${t1.id}"
                    transformer="script:formProperty">
            </entity>
        </entity>
    </document>
</dataConfig> 
```

然后我将它们映射到 schema.xml 中的 solr schemata 作为动态字段

```
<dynamicField name="p_*" indexed="true" stored="true" type="string"/> 
```

# android - onitemclick 在列表视图对话框中不起作用

> ID：13026654
> 
> 赞同：2
> 
> 时间：2012-10-23T08:47:46.410
> 
> 标签：android, android-layout, android-intent, android-emulator, android-listview

点击项目在对话框内不起作用..

描述：我有一个打印按钮，当我单击该按钮时，将出现一个对话框，其中包含使用适配器的列表视图。当我单击列表视图行时，它必须转到其他活动。但问题是 onitemclick 在列表视图对话框中不起作用。

提前谢谢你。

WorkDetailView.java

```
 printbutton = (Button) findViewById(R.id.barcodePrintButton);
    printbutton.setOnClickListener(new OnClickListener() {
        private Context context = WorkDetailView.this;

        /**
         * 
         * Description: barcodePrintButton onClick to ServiceManager.callPrintService
         * 
         */
        @Override
        public void onClick(View view) {

                dialog = new Dialog(context);
                dialog.setContentView(R.layout.dialoglistview);
                dialog.setTitle("Print Dialog");

                listviewDialog = (ListView) dialog.findViewById(R.id.dialogList);
                dataDialogAdapter = new WorkDetailDialogAdapter(context, sampleDetailsArray);
                listviewDialog.setAdapter(dataDialogAdapter);
                listviewDialog.setClickable(true);
                listviewDialog.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> adapter, View view, int position, long id) {
                    Log.i("selectedAdapter", "selectedAdapter"+ position);

                    Intent intent = new Intent("com.google.zxing.client.android.ENCODE");
                    intent.putExtra("ENCODE_DATA", patient.getMrnNumber());
                    intent.putExtra("ENCODE_FORMAT", "CODE_128");
                //  intent.putExtra("ENCODE_SHOW_CONTENTS", false);
                    startActivity(intent);
                    Toast.makeText(WorkDetailView.this, "Printing Barcode Result", Toast.LENGTH_LONG).show();

                }
            });

                dialog.show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:52:31.737

您是否尝试将 onClickListener 的类型更改为 Dialog.onClickListener？

```
android.content.DialogInterface.OnClickListener ocl =   new Dialog.OnClickListener() {

        @Override
        public void onClick(DialogInterface arg0, int arg1) {
            // TODO Auto-generated method stub

        }
    }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:10:12.347

放在`dialog.show()`前面`listviewDialog.setClickable(true)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:24:24.903

尝试这种方式来构建你的对话框

```
LayoutInflater inflater = getLayoutInflater();
View layout = inflater.inflate(R.layout.dialoglistview, 
    (ViewGroup) findViewById(R.id.root_id_in_dialoglistview_xml_tree));
dialog = AlertDialog.Builder(this).setTitle("Print Dialog").setView(layout); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:45:55.947

```
Button btn=(Button)findViewById(R.id.button1);

        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View arg0) {
                showdialog();
            }});
private void showdialog() {
        listDialog = new Dialog(this);
        listDialog.setTitle("Select Item");
        LayoutInflater li = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View v = li.inflate(R.layout.list_view, null, false);
        listDialog.setContentView(v);
        listDialog.setCancelable(true);

        final ListView list1 = (ListView) listDialog.findViewById(R.id.listView1);
        String array[] = {"1","2","3"};

        ArrayAdapter<String> adapt = new ArrayAdapter<String>(this,R.layout.group, array);
        list1.setAdapter(adapt);
        listDialog.show();

        list1.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
                System.out.println(position);
            }
        });
    } 
```

# .net - 我们总是需要使用 async 关键字吗？

> ID：13026655
> 
> 赞同：7
> 
> 时间：2012-10-23T08:47:51.437
> 
> 标签：.net, asynchronous, async-await

让我们考虑这段代码：

```
public async Task TheBestMethodEver1()
{
// code skipped
await Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
{
  // code skipped
}); 
```

}

```
public Task TheBestMethodEver2()
{
  // code skipped
  return Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () =>
  {
    // code skipped
  }).AsTask();
} 
```

这些方法中的任何一个都可以像这样调用：

```
await TheBestMethodEverX(); 
```

这两种方法有什么区别，为什么我通常要使用第一种？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T11:16:02.883

> 这两种方法有什么区别，为什么我通常应该使用第一种？

第一个具有编译器生成的状态机并在堆上创建额外的垃圾。所以首选**第二种。**

有关更多信息，请观看经典的[Zen of Async](http://channel9.msdn.com/Events/BUILD/BUILD2011/TOOL-829T)视频。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:01:07.437

如果唯一的 await 是最后一条语句（并且您正在等待一个任务，而不是其他一些可等待的对象），您也可以跳过它并返回任务。如果将来需要，添加 async 修饰符很容易。

# c# - 通过 TCP 套接字发送大量数据

> ID：13026666
> 
> 赞同：3
> 
> 时间：2012-10-23T08:48:48.463
> 
> 标签：c#, .net, sockets

这是我在这个论坛上发布的第一个问题，我是 c# 世界的初学者，所以这对我来说有点令人兴奋，但我在通过套接字发送大量数据时遇到了一些问题，所以这是更多细节关于我的问题：

我正在通过 TCP 套接字发送 5 Mo 的二进制图像，在接收部分我正在保存结果（接收到的数据）并且只得到 1.5 Mo ==> 数据已丢失（我比较了原始文件和生成的文件它向我展示了遗漏的部分）这是我使用的代码：

```
private void senduimage_Click(object sender, EventArgs e)
{
    if (!user.clientSocket_NewSocket.Connected)
    {
        Socket clientSocket_NewSocket = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        user.clientSocket_NewSocket = clientSocket_NewSocket;
        System.IAsyncResult _NewSocket = user.clientSocket_NewSocket.BeginConnect(ip_address, NewSocket.Transceiver_TCP_Port, null, null);
        bool successNewSocket = _NewSocket.AsyncWaitHandle.WaitOne(2000, true);
     }
     byte[] outStream = System.Text.Encoding.ASCII.GetBytes(Uimage_Data);
     user.clientSocket_NewSocket.Send(outStream);
 } 
```

在论坛中他们说将数据分成块，这是一个解决方案，如果是我该怎么做，我试过了，但它没有用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:00:21.117

有很多不同的解决方案，但分块通常是一个很好的解决方案，您可以盲目地执行此操作，不断填充临时缓冲区，然后将其放入某个有状态的缓冲区，直到您遇到任意令牌或缓冲区未完全填满，或者您可以遵守每条 tcp*消息*的某种合同（消息是要接收的整体数据）。

如果你打算做某种契约，那么像消息的前 N ​​个字节是描述符，你可以根据需要做大或小，但你的临时缓冲区只会预先读取这个大小从流中。

典型的标头可能类似于：

```
public struct StreamHeader // 5 bytes
{
   public byte MessageType {get;set;} // 1 byte
   public int MessageSize {get;set;}  // 4 bytes
} 
```

因此，如果它足够小，则将完整的消息大小分配给临时缓冲区并将其全部读取，或者如果您认为它太大，将其分成多个部分并继续读取，直到您收到的总字节数与 MessageSize 匹配标题结构的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T23:12:04.570

最有可能的问题是您在所有数据都传输到服务器之前关闭了客户端套接字，因此它被丢弃了。

默认情况下，当您关闭套接字时，所有未传输的数据（位于操作系统缓冲区中）都将被丢弃。有几个解决方案：

[1] 设置 SO_LINGER（见[http://developerweb.net/viewtopic.php?id=2982](http://developerweb.net/viewtopic.php?id=2982)） [2] 让服务器向客户端发送确认，在收到之前不要关闭客户端套接字它。[3] 等到客户端的输出缓冲区为空，然后再关闭套接字（使用 getsocketopt SO_SND_BUF 进行测试 - 我不确定 c# 上的语法）。

此外，您真的应该测试 Send() 的返回值。虽然理论上它应该阻塞，直到它发送所有数据，但我想实际验证这一点，如果存在不匹配，至少打印一条错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T08:59:43.747

可能您还没有阅读 C# 中有关套接字使用的文档。( [http://msdn.microsoft.com/en-us/library/ms145160.aspx](http://msdn.microsoft.com/en-us/library/ms145160.aspx) )

内部缓冲区无法存储您提供给发送方法的所有数据。您的问题的一个可能的解决方案可能是就像您所说的将数据分成块。

```
int totalBytesToSend = outstream.length;     int bytesSend = 0;
while(bytesSend < totalBytesToSend )
    bytesSend+= user.clientSocket_NewSocket.Send(outStream, bytesSend, totalBytesToSend - bytesSend,...); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:12:53.780

我怀疑你的问题之一是你没有打电话`EndConnect`。从 MSDN 文档：

> 异步 BeginConnect 操作必须通过调用 EndConnect 方法来完成。

另外，等待：-

> bool successNewSocket = _NewSocket.AsyncWaitHandle.WaitOne(2000, true);

可能总是错误的，因为没有将事件设置为信号状态。通常，您会为该函数指定一个回调函数，`BeginConnect`并在回调中调用`EndConnect`并将事件的状态设置为已发出信号。[请参阅此 MSDN 页面上](http://msdn.microsoft.com/en-us/library/6aeby4wt.aspx)的示例代码。

**更新**

我想我看到了另一个问题：-

```
byte[] outStream = System.Text.Encoding.ASCII.GetBytes(Uimage_Data); 
```

我不知道 Uimage_Data 是什么类型，但我真的不认为你想将它转换为 ASCII。数据中的零可能表示数据字节结束（或者可能是 26 或其他 ASCII 码）。关键是，编码过程很可能会改变数据。

你能提供`Uimage_Data`对象的类型吗？

# javascript - 在javascript中按下空格键后，如何绑定非breakspace（alt-288或）？

> ID：13026671
> 
> 赞同：0
> 
> 时间：2012-10-23T08:49:10.203
> 
> 标签：javascript, jquery

我正在使用 OpenMRS，它是一个开源医疗记录系统。OpenMRS 有一个内置的 html 编辑器，我主要在构建表单时使用它。在我的一种形式中，我有一个文本区域。我的客户希望他的条目（在段落或列表中）在文本区域中缩进。

现在，当您尝试在 textarea 中缩进段落然后保存更改并预览表单时，段落变得对齐而不是保留缩进的行。

`&#160;`但是，如果我尝试使用 ascii 代码通过键入或按非换行空间来`alt-288`缩进段落，则段落会缩进，从而给我想要的结果。现在，用户不喜欢键入或按 ascii 等效项，因为这对他们来说会很麻烦。

我主要使用 javascript 和 jQuery，因为它是 openmrs 支持的。如果我可以在按键时以某种方式绑定不间断空格字符，那么这将起作用，但我在这里迷路了。我将如何在 javascript 或 jquery 中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:40:20.083

一种可能对您有用的解决方案是在您处理/保存时替换文本区域中的前导空格，甚至每次更改它时都替换如下：

```
ta.value = ta.value.replace (/\n +/, function (m) {
    return '\n' + Array (m.length).join ('&#160');
}); 
```

该`Array ...`构造创建一个包含长度元素的数组，然后与您的非换行符字符连接，从而有效地创建一个由许多空格字符组成的字符串。

另一种可能性是观察进入文本区域的空格字符并对其进行转换。请参见此处：[我可以有条件地更改在按键输入时输入的字符吗？](https://stackoverflow.com/questions/3923089/can-i-conditionally-change-the-character-entered-into-an-input-on-keypress)

# windows - 串口中断条件

> ID：13026673
> 
> 赞同：1
> 
> 时间：2012-10-23T08:49:21.273
> 
> 标签：windows, embedded, serial-port, hardware-interface, uart

我正在通过 COM 端口与多个设备建立通信。

为了进行存在性检查，我想实现当前设备可以在其 UART TX 上设置所谓的 BREAK 条件。（中断条件是发送方将其 TX 设置为低 8 位以上的条件。）

但是如何在 Windows 下的 PC 端检测到这种情况呢？我找到了一些设置休息条件或发送定时休息的功能，但不是检测一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T12:13:00.150

中断是一种中断类型的事件，它只能用于重置正在进行的通信。所以你会从 WaitCommEvent, EV_BREAK 事件位中得到它。

有利于“存在”测试的握手信号。GetCommModemStatus，MS_DSR_ON 告诉你设备上电，MS_CTS_ON 告诉你它愿意接收数据。

# javascript - 如何动态更改js代码？

> ID：13026674
> 
> 赞同：1
> 
> 时间：2012-10-23T08:49:21.210
> 
> 标签：javascript, ajax, dynamic-function

## 如何在运行时替换 JS 函数的代码？（与 C++ 函数指针的功能相同）

我试过`eval()`了，但是当其中一个参数包含像 13 或 10 这样的字节值时，它会引发错误。

我从中了解到 eval 实际上是在评估每个词汇原子并用它们的内容替换它们。

这些是一些示例文件来说明我正在寻找的功能：

* * *

**文件 1：index.html**

```
xmlhttp=new XMLHttpRequest();   
xmlhttp.open("GET","dynamic_code.php",false);
xmlhttp.send();
var dynamic_code=xmlhttp.responseText;
function dynamic_function (){
    eval(dynamic_code)
}
dynamic_function () 
```

**文件 2：dynamic_code.php**

```
some_file=new XMLHttpRequest(); 
some_file.open("GET","some_file.txt",false);
some_file.send();
var some_file_content=some_file.responseText;
alert(some_file_content); 
```

**文件 3：some_file.txt**

```
line1
line2
line3 
```

* * *

**浏览器返回的错误：**

```
> Uncaught exception: SyntaxError: at line 2, column 0: expected
> expression, got '<' Error thrown at line 12, column 4 in
> dynamic_function() in http://my_ip/dummy/index.html:
>     eval(dynamic_code) called from line 15, column 0 in http://my_ip/dummy/index.html:
>     dynamic_function () 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:37:31.130

这与 C++ 函数指针的功能不同:-)

这将是相同的：

```
function someFunc() {
}

function otherFunc(f) {
    f();
}

otherFunc(someFunc); 
```

它可以工作:) Javascript 具有一流的功能。（C++ 用函数指针模拟。）

你想要做的是在 C++ 中：

```
void someFunc(f) {
    eval(f); // doesn't exist of course
}

someFunc("void otherFunc() {}"); 
```

既然真相已经确定，让我们回到你的问题。

您要查找的内容称为[JSONP](http://en.wikipedia.org/wiki/JSONP)。这是一种在浏览器中注入脚本标签的技术。当脚本被注入时，里面的javascript代码就会被执行。使用它的主要原因是因为它可以跨域工作，您不需要 XHR。但是您也可以将它用于您的用例。

# sql - 计算两点之间的距离（纬度，经度）

> ID：13026675
> 
> 赞同：102
> 
> 时间：2012-10-23T08:49:23.097
> 
> 标签：sql, sql-server, tsql, math, sql-server-2008-r2

我正在尝试计算地图上两个位置之间的距离。我已存储在我的数据中：经度、纬度、X POS、Y POS。

我以前一直在使用以下代码段。

```
DECLARE @orig_lat DECIMAL
DECLARE @orig_lng DECIMAL
SET @orig_lat=53.381538 set @orig_lng=-1.463526
SELECT *,
    3956 * 2 * ASIN(
          SQRT( POWER(SIN((@orig_lat - abs(dest.Latitude)) * pi()/180 / 2), 2) 
              + COS(@orig_lng * pi()/180 ) * COS(abs(dest.Latitude) * pi()/180)  
              * POWER(SIN((@orig_lng - dest.Longitude) * pi()/180 / 2), 2) )) 
          AS distance
--INTO #includeDistances
FROM #orig dest 
```

但是，我不相信由此得出的数据，它似乎给出了稍微不准确的结果。

一些示例数据以备不时之需

```
Latitude        Longitude     Distance 
53.429108       -2.500953     85.2981833133896 
```

任何人都可以帮我解决我的代码，如果你有一种新的方法来实现这一点，我不介意你是否想修复我已经拥有的东西。

请说明您的结果采用什么计量单位。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-10-23T09:06:40.303

由于您使用的是 SQL Server 2008，因此您拥有[`geography`](http://technet.microsoft.com/en-us/library/cc280766%28v=sql.100%29.aspx)可用的数据类型，该数据类型专为此类数据而设计：

```
DECLARE @source geography = 'POINT(0 51.5)'
DECLARE @target geography = 'POINT(-3 56)'

SELECT @source.STDistance(@target) 
```

给

```
----------------------
538404.100197555

(1 row(s) affected) 
```

告诉我们从（近）伦敦到（近）爱丁堡大约有 538 公里。

当然，首先会有大量的学习，但是一旦你知道它就比实现你自己的 Haversine 计算要容易得多；再加上你会得到很多功能。

* * *

如果您想保留现有数据结构，您仍然可以使用`STDistance`, 通过使用以下方法构造合适`geography`的实例[`Point`](http://technet.microsoft.com/en-us/library/bb933811%28v=sql.100%29.aspx)：

```
DECLARE @orig_lat DECIMAL(12, 9)
DECLARE @orig_lng DECIMAL(12, 9)
SET @orig_lat=53.381538 set @orig_lng=-1.463526

DECLARE @orig geography = geography::Point(@orig_lat, @orig_lng, 4326);

SELECT *,
    @orig.STDistance(geography::Point(dest.Latitude, dest.Longitude, 4326)) 
       AS distance
--INTO #includeDistances
FROM #orig dest 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2014-03-18T10:29:17.657

以下函数以英里为单位给出***两个地理坐标之间的距离***

```
create function [dbo].[fnCalcDistanceMiles] (@Lat1 decimal(8,4), @Long1 decimal(8,4), @Lat2 decimal(8,4), @Long2 decimal(8,4))
returns decimal (8,4) as
begin
declare @d decimal(28,10)
-- Convert to radians
set @Lat1 = @Lat1 / 57.2958
set @Long1 = @Long1 / 57.2958
set @Lat2 = @Lat2 / 57.2958
set @Long2 = @Long2 / 57.2958
-- Calc distance
set @d = (Sin(@Lat1) * Sin(@Lat2)) + (Cos(@Lat1) * Cos(@Lat2) * Cos(@Long2 - @Long1))
-- Convert to miles
if @d <> 0
begin
set @d = 3958.75 * Atan(Sqrt(1 - power(@d, 2)) / @d);
end
return @d
end 
```

以下函数以公里为单位给出***两个地理坐标之间的距离***

```
CREATE FUNCTION dbo.fnCalcDistanceKM(@lat1 FLOAT, @lat2 FLOAT, @lon1 FLOAT, @lon2 FLOAT)
RETURNS FLOAT 
AS
BEGIN

    RETURN ACOS(SIN(PI()*@lat1/180.0)*SIN(PI()*@lat2/180.0)+COS(PI()*@lat1/180.0)*COS(PI()*@lat2/180.0)*COS(PI()*@lon2/180.0-PI()*@lon1/180.0))*6371
END 
```

下面的函数使用 sql server 2008 中引入的 Geography 数据类型给出 两个***[地理](http://technet.microsoft.com/en-us/library/cc280766%28v=sql.100%29.aspx)***坐标***之间的距离（以公里为单位）***

```
DECLARE @g geography;
DECLARE @h geography;
SET @g = geography::STGeomFromText('LINESTRING(-122.360 47.656, -122.343 47.656)', 4326);
SET @h = geography::STGeomFromText('POINT(-122.34900 47.65100)', 4326);
SELECT @g.STDistance(@h); 
```

**用法：**

```
select [dbo].[fnCalcDistanceKM](13.077085,80.262675,13.065701,80.258916) 
```

**参考：** [Ref1](http://blog.opensourcesql.com/2011/04/calculate-distance-between.html)，[Ref2](https://stackoverflow.com/a/8907943/730807)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2018-04-10T13:25:04.937

看起来微软侵入了所有其他受访者的大脑，让他们编写尽可能复杂的解决方案。这是最简单的方法，不需要任何额外的函数/声明语句：

```
SELECT geography::Point(LATITUDE_1, LONGITUDE_1, 4326).STDistance(geography::Point(LATITUDE_2, LONGITUDE_2, 4326)) 
```

只需替换您的数据而不是`LATITUDE_1`, `LONGITUDE_1`, `LATITUDE_2`,`LONGITUDE_2`例如：

```
SELECT geography::Point(53.429108, -2.500953, 4326).STDistance(geography::Point(c.Latitude, c.Longitude, 4326))
from coordinates c 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-11-09T14:34:58.597

```
Create Function [dbo].[DistanceKM] 
( 
      @Lat1 Float(18),  
      @Lat2 Float(18), 
      @Long1 Float(18), 
      @Long2 Float(18)
)
Returns Float(18)
AS
Begin
      Declare @R Float(8); 
      Declare @dLat Float(18); 
      Declare @dLon Float(18); 
      Declare @a Float(18); 
      Declare @c Float(18); 
      Declare @d Float(18);
      Set @R =  6367.45
            --Miles 3956.55  
            --Kilometers 6367.45 
            --Feet 20890584 
            --Meters 6367450 

      Set @dLat = Radians(@lat2 - @lat1);
      Set @dLon = Radians(@long2 - @long1);
      Set @a = Sin(@dLat / 2)  
                 * Sin(@dLat / 2)  
                 + Cos(Radians(@lat1)) 
                 * Cos(Radians(@lat2))  
                 * Sin(@dLon / 2)  
                 * Sin(@dLon / 2); 
      Set @c = 2 * Asin(Min(Sqrt(@a))); 

      Set @d = @R * @c; 
      Return @d; 

End
GO 
```

**用法：**

选择 dbo.DistanceKM(37.848832506474, 37.848732506474, 27.83935546875, 27.83905546875)

**输出：**

0,02849639

*您可以使用带注释的浮点数更改 @R 参数。*

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-10-23T09:00:45.223

当您使用 SQL 2008 或更高版本时，我建议您查看[GEOGRAPHY](http://technet.microsoft.com/en-us/library/cc280766%28v=sql.100%29.aspx)数据类型。SQL 内置了对地理空间查询的支持。

例如，您的表中有一个 GEOGRAPHY 类型的列，该列将填充坐标的地理空间表示（查看上面链接的 MSDN 参考以获取示例）。然后，此数据类型公开允许您执行大量地理空间查询的方法（例如，查找 2 点之间的距离）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-06T17:41:44.083

除了前面的答案，这里还有一种计算 SELECT 内部距离的方法：

```
CREATE FUNCTION Get_Distance
(   
    @La1 float , @Lo1 float , @La2 float, @Lo2 float
)
RETURNS TABLE 
AS
RETURN 
    -- Distance in Meters
    SELECT GEOGRAPHY::Point(@La1, @Lo1, 4326).STDistance(GEOGRAPHY::Point(@La2, @Lo2, 4326))
    AS Distance
GO 
```

用法：

```
select Distance
from Place P1,
     Place P2,
outer apply dbo.Get_Distance(P1.latitude, P1.longitude, P2.latitude, P2.longitude) 
```

标量函数也可以工作，但在计算大量数据时效率非常低。

我希望这可以帮助某人。

# jsf - JSF 1.2/Seam 2.2 - 输入空时跳过验证器

> ID：13026682
> 
> 赞同：1
> 
> 时间：2012-10-23T08:49:52.227
> 
> 标签：jsf, jboss, seam, jsf-1.2

我正在尝试在 JSF（接缝的 xhtml 文件）中调用 validateLength

```
<f:validateLength minimum="2" maximum="512"/> 
```

它适用于文本长度 513 和 1 等值（即显示警告，但不适用于 0）

正在使用的输入文本字段设置为 required=false （以便它可以使用 a4j 对空字段的支持，我必须根据输入显示预览）

我看到的问题是辅助类中有一个验证器方法，但是当输入的长度为 0 时它会被忽略（即我什么都不放，它适用于非空值）。

我这里也有一个 NullableStringConverter，但我注意到，只要该转换器设置空字符串的 null 值，验证器就会被跳过。这是 inputText 中的完整片段

```
<h:inputText id="linkNameInput" 
    value="#{someHelper.name}"
    validator="#{someHelper.validateMethod}"
    required="false">
      <f:validateLength minimum="2" maximum="512"/>
      <f:converter  converterId="NullableStringConverter" />
</h:inputText> 
```

我希望能够在验证器中验证空字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:56:24.040

> *我希望能够在验证器中验证空字符串。*

这在 JSF 1.x 中是不可能的。这只有在 JSF 2.0 之后才有可能（支持 JSR303 Bean Validation 支持）。

我不确定您为什么要在自定义验证器中验证空字符串。在那里，您通常为此使用该`required="true"`属性。如果唯一的目标是更改所需的消息，那么只需使用`requiredMessage`属性。

```
<h:inputText ... required="true" requiredMessage="Please enter name" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T01:46:12.457

如前所述，不支持在 JSF 1.2 组件中验证空输入字符串。但是，您可以在表单提交时检查支持 bean 中的此 null/空模型值，并添加一个映射到该特定输入字段的 FacesMessage。这将允许与服务器端特定于组件的错误消息显示 ( `<h:message for="componentId" />`) 集成。

```
FacesContext.getCurrentInstance().addMessage("componentId",
                                             facesMessageForComponent); 
```

# php - jQuery、ajax、json、php 解析器错误

> ID：13026684
> 
> 赞同：1
> 
> 时间：2012-10-23T08:50:03.477
> 
> 标签：php, javascript, jquery, ajax, parse-error

我试图让一个 ajax 请求运行，但我得到一个解析器错误。这是我的 Javascript 代码：

```
$.ajax({
            type: 'POST',
            url: 'insertuser.php',
            dataType: 'json',
            data: {
                nickname: $('input[name=nickname]').val(),
                passwort: $('input[name=passwort]').val()
            },
            success : function(data){
                console.log(data);
            },
            error : function(XMLHttpRequest, textStatus, errorThrown) {
                console.log("XMLHttpRequest", XMLHttpRequest);
                console.log("textStatus", textStatus);
                console.log("errorThrown", errorThrown);    
            }
        }); 
```

那是php文件：

> $return['error'] = false;
> $return['msg'] = "juhuuu";
> 
> 回声 json_encode($return);

这是控制台日志：

XMLHttpRequest Object textStatus parsererror errorThrown SyntaxError

这就是 .php 的回声： {"error":false,"msg":"juhuuu"}

我希望有人有一个想法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-18T04:44:46.877

这个答案可能会也可能不会帮助其他人。但是我遇到了一个与 jQuery ajax json 解析错误类似的问题。我的表单不会发送电子邮件，而是通过 jQuery 返回解析错误。

**jQuery**

```
 $.ajax({
    type: "POST",
    url: "process-form.php",
    data: dataString,
    dataType:"json",
    success: function(response) {

        if(response.status == "success") {

        } else if (response.status == "error") {

        }
  }); 
```

**PHP**

```
if (empty($name) || empty($email) || empty($phone) || !preg_match('/^[^0-9][a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[@][a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[.][a-zA-Z]{2,4}$/',$email) || !preg_match("/^(\d[\s-]?)?[\(\[\s-]{0,2}?\d{3}[\)\]\s-]{0,2}?\d{3}[\s-]?\d{4}$/i",$phone)) {
            echo json_encode(array(
                'status' => 'error'
                //'message'=> 'error message'
            ));
        } else {
            $send = mail($sendTo, $subject, $message5, $headers, '‑fexample@example.com');
            $sendText = mail($sendToPhone, '', $txtmsg, 'From: example <noreply@example.com>\r\n');

            // insert into db
            $formName = $_POST['name'];
            $queryIn = "INSERT INTO database pseudo code";

            //execute the query. 
            $result = mysqli_query($connection, $queryIn);
            if (!$result) {
                printf("Error: %s\n", mysqli_error($connection));
                exit();
            }

        }
if($send){
            echo json_encode(array(
                'status' => 'success'
                //This is the message the .ajax() call was looking for but it never posted because there was a MySQL error being printed to the browser along with it. 
            ));
} 
```

我的问题出在我的 PHP 页面上，ajax 调用将转到 ( `process-form.php`)。我正在使用 PHP`mail()`函数通过电子邮件发送表单数据并将 Web 表单数据插入`MySQL`数据库。我的 PHP 检查`mail()`发送成功并将成功消息打印到屏幕上（这是`jQuery .ajax()`调用正在寻找的内容。但我`php/mysql`抛出错误并在屏幕上打印错误而不是它应该显示的“成功”消息。所以我的`jQuery .ajax()`电话是试图读取一个`PHP json_encode()`编码的数组，但它却得到了`MySQL Error`。一旦我修复了我的 MySQL 错误，一切都运行良好。

# django - Django 表单字段清理以检查输入的日期是否在存储范围内

> ID：13026689
> 
> 赞同：4
> 
> 时间：2012-10-23T08:50:26.313
> 
> 标签：django, validation

我正在尝试编写一个表单清理方法，以确保输入的一对日期当前不被存储在模型中的日期范围所覆盖。

所以我想捕捉`fromdate >= value <= todate`，但`between`我的干净方法中的过滤器没有得到它。

任何人都可以提供一些启示吗？

模型.py

```
class Dates(models.Model):
    fromdate = models.DateField()
    todate = models.DateField() 
```

表格.py

```
class Form(forms.Form):
    fromdate = forms.DateField()

    todate = forms.DateField()

    class Meta:
        model = Dates

    def clean_fromdate(self):
        form_fromdate = self.cleaned_data.get('fromdate')

        exists = Dates.objects.filter(fromdate__contains=form_fromdate).exists()
        if exists == True:
            raise forms.ValidationError(_("A period is already entered for this date"))

        between = Dates.objects.filter(fromdate__gte=form_fromdate,
            todate__lte=form_fromdate).exists()
        if between == True:
            raise forms.ValidationError(_("Period already between this date 1"))

        return form_fromdate

    def clean_todate(self):
        form_todate = self.cleaned_data.get('todate')

        exists = Dates.objects.filter(todate__contains=form_todate).exists()
        if exists == True:
            raise forms.ValidationError(_("A period is already entered for this date"))

        between = PeriodsOfInactivity2012.objects.filter(fromdate__gte=form_todate,
            todate__lte=form_todate).exists()
        if between == True:
            raise forms.ValidationError(_("Period already between this date 2"))

        return form_todate 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T13:41:40.307

这应该适合你

```
from django import forms
from models import Dates

class Form(forms.ModelForm):
    fromdate = forms.DateField()
    todate = forms.DateField()

    class Meta:
        model = Dates

    def clean(self):
        form_fromdate = self.cleaned_data.get('fromdate')
        form_todate = self.cleaned_data.get('todate')
        between = Dates.objects.filter(fromdate__gte=form_fromdate, todate__lte=form_todate).exists()
        if between:
            raise forms.ValidationError("Period already between this dates")
        super(Form, self).clean() 
```

* * *

**编辑**

```
#views.py
#!/usr/bin/env python
# -*- coding: utf-8 -*-
from django.http import HttpResponse
from django.template import RequestContext
from django.shortcuts import render_to_response

from forms import Form

def index(request, template='index.html'):
    form = Form()
    if request.method == "POST":
        form = Form(request.POST)
        if form.is_valid():
            return HttpResponse(form)

    kwvars = {
        "form": form,
    }
    return render_to_response(template, kwvars, context_instance=RequestContext(request)) 
```

* * *

```
#forms.py
from django import forms
from models import Dates

class Form(forms.ModelForm):
    fromdate = forms.DateField()
    todate = forms.DateField()

    class Meta:
        model = Dates

    def clean(self):
        form_fromdate = self.cleaned_data.get('fromdate')
        form_todate = self.cleaned_data.get('todate')
        between = Dates.objects.filter(fromdate__gte=form_fromdate, todate__lte=form_todate).exists()
        if between:
            raise forms.ValidationError("Period already between this date 1")
        super(Form, self).clean() 
```

* * *

```
#index.html
<html>
<head>
</head>
<body>
<form action="" method="POST">
    {% csrf_token %}
    {%  if form.errors %}
        errors: {{ form.errors }}
    {% endif %}
    {{ form }}
    <input type="submit" value="submit">
</form>
</body>
</html> 
```

# facebook - 仅当点击发布图片时，Feed 对话框会混淆我通过的推荐链接？

> ID：13026690
> 
> 赞同：0
> 
> 时间：2012-10-23T08:50:32.043
> 
> 标签：facebook, url, dialog

我经营一个网站，允许注册的网站成员使用他们的推荐链接将人们推荐回我的网站

> （例如：[http](http://www.mygreatsite.com/home?ref=MaxP) ://www.mygreatsite.com/home?ref=MaxP ）

最近，我在我的网站中编写了“直接 URL 示例”（https://developers.facebook.com/docs/reference/dialogs/feed/）的实现，以使我的网站成员能够在他们的时间轴上发布一个帖子描述我的网站，并在代码中包含他们自己的引荐链接回到我的网站。

当查看结果帖子的潜在站点推荐点击帖子链接文本时，一切正常（按计划发送到格式正确的推荐链接 - “http://www.mygreatsite.com/home?ref=MaxP”

我遇到的问题是，在同一篇文章中，如果潜在的网站推荐点击了**图片**，那么推荐链接就会像这样“http://www.mygreatsite.com/home?ref=nf”这样乱码，这**完全**是无效的推荐链接与应该将它们发送到的链接无关（“http://www.mygreatsite.com/home?ref=MaxP **”**）

**为什么只有**在点击帖子**图片**时，facebook 才会错误地将正确的推荐人“MaxP”替换为“NF” ？NF 是什么意思，为什么会出现？

这是我的代码传递给 facebook 的 URL（站点 url、应用程序 ID 和名称已替换以保护我的隐私）：

```
 https://www.facebook.com/dialog/feed?app_id=161070640444808&link=http://www.mygreatsite.com/home?ref=MaxP&picture=http://www.mygreatsite.com/images/banners/9.jpg&name=mygreatsite.com%20Ultra-High%20Payout%20site&caption=Paying%20DAILY%20to%20virtual%20points&description=%20%20is%20an%20ultra-high%20paying%20get%20paid%20to%20%28site%29%20site&redirect_uri=http://www.mygreatsite.com/members/refer.php 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:38:32.600

> 我遇到的问题是，在同一篇文章中，如果潜在的网站推荐点击图片，那么推荐链接就会像这样“http://www.mygreatsite.com/home?ref=nf”这样乱码，这完全是无效的推荐链接与应该将它们发送到的链接无关（“http://www.mygreatsite.com/home?ref=MaxP”）

`ref=nf`是一个 Facebook 参数，用于跟踪链接点击来自/发生的位置（在这种情况下，nf = 新闻提要）。

我认为 Facebook 只是用它自己的名称*覆盖*了该名称的任何预先存在的 URL 参数 - 所以我建议将你自己的参数命名为不同的名称，例如 Facebook绝对*不会*`myRef=MaxP`使用的。

您仍然会`ref`从 Facebook 获得参数，但它*应该*会生成一个类似 的 URL `…/home?myRef=MaxP&ref=nf`，这样您仍然可以从中读取您自己的推荐值作为`myRef`. *（理论上；我自己还没有测试过——请让我们知道结果；-)）*

# python - Backbone.js HTTP PUT 请求在发送到 Pyramid/Cornice 应用程序时失败并出现 404 错误

> ID：13026694
> 
> 赞同：2
> 
> 时间：2012-10-23T08:50:50.587
> 
> 标签：python, backbone.js, pyramid, cornice

我正在使用 Pyramid 和[Cornice](http://cornice.readthedocs.org/en/latest/)来创建一个供 Backbone.js 应用程序使用的 API。我当前的代码可以完美地处理`GET`和`POST`请求，但它在收到`PUT`请求时返回 404 错误。我相信这是因为 Backbone 将它们发送为`http://example.com/api/clients/ID`，`ID`所讨论对象的 id 号在哪里。

我的 Cornice 设置代码是：

```
clients = Service(name='clients', path='/api/clients', description="Clients")

@clients.get()
def get_clients(request):
    ...

@clients.post()
def create_client(request):
    ...

@clients.put()
def update_client(request):
    ... 
```

似乎 Cornice 只注册了 path`/api/clients`而不是`/api/clients/{id}`. 我怎样才能让它两者都匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T14:06:46.373

该[文档](http://cornice.readthedocs.org/en/latest/resources.html)提供了一个服务示例，该服务具有单独的路径 ( `/users/{id}`) 和对象路径 ( `/users`)。这对你有用吗？

```
@resource(collection_path='/users', path='/users/{id}') 
```

* * *

快速浏览一下[装饰器的](https://github.com/mozilla-services/cornice/blob/master/cornice/resource.py)[代码，可以`resource`](https://github.com/mozilla-services/cornice/blob/master/cornice/resource.py)看出它主要创建两个`Service`：一个用于对象，一个用于集合。您的问题可能可以通过添加另一个来解决`Service`：

```
client = Service(name='client', path='/api/clients/{id}', description="Client") 
```

# php - PHP MYSQL - 不可能的查询？- 查找“当前显示”

> ID：13026696
> 
> 赞同：0
> 
> 时间：2012-10-23T08:50:53.073
> 
> 标签：php, mysql

我有一个表格，列中有一种奇怪的日期格式，如 varchar - 这是公司为我提供的格式 - 中间的 T 似乎把事情搞砸了。

```
EVENTID   | EVENT_DATE      | EVENT_DURATION

1       | 2012-10-14T06:00  | 15
2       | 2012-10-14T06:15  | 11
3       | 2012-10-14T06:26  | 14    
4       | 2012-10-14T06:40  | 10 
```

等等……等等

我有php代码以完全相同的格式返回当前时间（中间有奇怪的'T''

```
$thisin = DateTime::createFromFormat('Y-m-d\TH:i', date('Y-m-d\TH:i')); 
$thisin->setTimeZone(new DateTimeZone('UTC'));
$thisout= $thisin->format('Y-m-d\TH:i'); 
```

假设今天是 14 号，当前时间是 06:21，我如何根据匹配“$thisout from php”的持续时间和接下来的五行（将来）查询当前行。

因为当前时间和日期从 php 返回为 "2012-10-14T06:21" 查询应该输出

```
2   | 2012-10-14T06:15  | 11        (Now SHowing)
3   | 2012-10-14T06:26  | 14    
4   | 2012-10-14T06:40  | 10 
```

等

我一直在摸不着头脑，DATE_FORMAT() 似乎不起作用，我认为它可能是中间的 T。我还必须弄清楚如何使用持续时间来确定当前时间是否适用于特定行。

这不起作用

```
SELECT DISTINCT EVENTID, EVENT DATE, EVENT_DURATION 
FROM epg_event
WHERE DATE_FORMAT(EVENT_DATE, '%Y-%m-%dT%H:%i') >= DATE_FORMAT(NOW(), '%Y-%m-%dT%H:%i') 
ORDER BY EVENT_DATE ASC LIMIT 5 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:57:30.520

您应该将日期信息加载到数据库中的 Date 列而不是 varchar 列中。如前所述，这是日期的 ISO 格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:06:35.997

我目前无法对其进行测试，但这样的事情可能会奏效：

```
SELECT DISTINCT EVENTID, EVENT_DATE, EVENT_DURATION 
FROM epg_event
WHERE (event_date <= NOW()) AND (ADDTIME(event_date, INTERVAL event_duration MINUTE) >= NOW()) 
ORDER BY event_date ASC LIMIT 5 
```

`DATE_FORMAT()`用于格式化`DATETIME`字段，而不是相反。而且，如前所述，您的 event_date 应该是一个 DATETIME 字段，并且您应该在将数据导入数据库时​​转换时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:08:48.467

需要在区间内添加。

```
where event_date + INTERVAL duration MINUTE >= NOW() 
```

# java - 无法从微调器中检索值

> ID：13026703
> 
> 赞同：0
> 
> 时间：2012-10-23T08:51:16.253
> 
> 标签：java, android, spinner

这是一个非常基本的问题。

就是这样，我有一个基本的 Spinner 用如下的监听器实现：

```
Spinner sensModeSpinner = (Spinner) findViewById(R.id.SensorModeSpinner);
ArrayAdapter<CharSequence> sensModeAdapter = ArrayAdapter.createFromResource(this, R.array.sensorMode_array, android.R.layout.simple_spinner_item);
sensModeAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
sensModeSpinner.setAdapter(sensModeAdapter);

sensModeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        sMode = parent.getItemAtPosition(pos).toString();
    }

    @Override
    public void onNothingSelected(AdapterView<?> parent) {
        Toast.makeText(getBaseContext(), "You need to select atleast one mode!", Toast.LENGTH_SHORT).show();
    }
});

Toast.makeText(getBaseContext(), "sensorMode = " + sMode, Toast.LENGTH_SHORT).show(); 
```

问题是`sMode`变量结果没有出现在 Toast 消息中（值为 NULL），因为它在`OnItemSelected`方法中工作正常。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:35:34.460

有时可能是愚蠢的错误，所以试试这个..

```
@Override
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {

   // sMode = parent.getItemAtPosition(pos).toString();

     sMode = parent.getAdapter().getItemAtPosition(pos).toString();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:56:22.757

您在`Toast.show();`可以设置 sMode 值之前执行该方法，而是`onItemSelected()`在设置 sMode 值之后将其放入，将您的代码更改为以下内容：

```
Spinner sensModeSpinner = (Spinner) findViewById(R.id.SensorModeSpinner);
    ArrayAdapter<CharSequence> sensModeAdapter = ArrayAdapter.createFromResource(this, R.array.sensorMode_array,
                    android.R.layout.simple_spinner_item);
    sensModeAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    sensModeSpinner.setAdapter(sensModeAdapter);

    sensModeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent,
                View view, int pos, long id) {
            sMode = parent.getItemAtPosition(pos).toString();
            Toast.makeText(getBaseContext(), "sensorMode = " + sMode, Toast.LENGTH_SHORT).show();

        }

        @Override
        public void onNothingSelected(AdapterView<?> parent) {
            Toast.makeText(getBaseContext(),
                    "You need to select atleast one mode!",
                    Toast.LENGTH_SHORT).show();
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:06:23.500

你可以这样做

```
 Spinner sensModeSpinner = (Spinner) findViewById(R.id.SensorModeSpinner);
ArrayAdapter<CharSequence> sensModeAdapter = ArrayAdapter.createFromResource(this, R.array.sensorMode_array, android.R.layout.simple_spinner_item);
sensModeAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
sensModeSpinner.setAdapter(sensModeAdapter);

sensModeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        sMode = parent.getItemAtPosition(pos).toString();
        //CALL_YOUR_FUNCTION_HERE
    }

    @Override
    public void onNothingSelected(AdapterView<?> parent) {
        Toast.makeText(getBaseContext(), "You need to select atleast one mode!", Toast.LENGTH_SHORT).show();
    }
}); 
```

# python - 着色器引发 RuntimeError：验证失败（0）：

> ID：13026710
> 
> 赞同：0
> 
> 时间：2012-10-23T08:51:35.360
> 
> 标签：python, opengl, shader, pyopengl

根据`MAX_LIGHTS`以下着色器代码的值，会引发以下异常。知道这是为什么吗？我错过了什么？

```
/usr/lib/python2.7/site-packages/OpenGL/GL/shaders.pyc in compileProgram(*shaders, **named)
    194     program = ShaderProgram( program )
    195     glLinkProgram(program)
--> 196     program.check_validate()
    197     program.check_linked()
    198     for shader in shaders:

/usr/lib/python2.7/site-packages/OpenGL/GL/shaders.pyc in check_validate(self)
    106                 """Validation failure (%s): %s"""%(
    107                 validation,
--> 108                 glGetProgramInfoLog( self ),
    109             ))
    110         return self

RuntimeError: Validation failure (0): 
```

顶点着色器代码：

```
#define MAX_LIGHTS 2

varying vec4 diffuse[MAX_LIGHTS], ambientGlobal[MAX_LIGHTS], ambient[MAX_LIGHTS];
varying vec3 normal[MAX_LIGHTS], lightDir[MAX_LIGHTS], halfVector[MAX_LIGHTS];
varying float dist[MAX_LIGHTS];

void main()
{   
    vec4 ecPos;
    vec3 aux;

    for (int i=0; i<MAX_LIGHTS; i++)
    {
        /* first transform the normal into eye space and normalize the result */
        normal[i] = normalize(gl_NormalMatrix * gl_Normal);

        /* now normalize the light's direction. Note that according to the
        OpenGL specification, the light is stored in eye space. Also since 
        we're talking about a directional light, the position field is actually 
        direction */
        ecPos = gl_ModelViewMatrix * gl_Vertex;
        aux = vec3(gl_LightSource[i].position - ecPos);
        lightDir[i] = normalize(aux);

        /* compute the distance to the light source to a varying variable*/
        dist[i] = length(aux);

        /* Normalize the halfVector to pass it to the fragment shader */
        halfVector[i] = normalize(gl_LightSource[i].halfVector.xyz);

        /* Compute the diffuse, ambient and globalAmbient terms */
        diffuse[i] = gl_FrontMaterial.diffuse * gl_LightSource[i].diffuse;
        ambient[i] = gl_FrontMaterial.ambient * gl_LightSource[i].ambient;
        ambientGlobal[i] = gl_LightModel.ambient * gl_FrontMaterial.ambient;

    }
    gl_Position = ftransform();

} 
```

片段着色器代码：

```
#define MAX_LIGHTS 2

varying vec4 diffuse[MAX_LIGHTS], ambientGlobal[MAX_LIGHTS], ambient[MAX_LIGHTS];
varying vec3 normal[MAX_LIGHTS], lightDir[MAX_LIGHTS], halfVector[MAX_LIGHTS];
varying float dist[MAX_LIGHTS];

void main()
{
    vec3 n, halfV, viewV, ldir;
    float NdotL, NdotHV;
    vec4 color = ambientGlobal[0];
    float att;

    for (int i=0; i<MAX_LIGHTS; i++)
    {
        /* a fragment shader can't write a verying variable, hence we need
        a new variable to store the normalized interpolated normal */
        n = normalize(normal[i]);

        /* compute the dot product between normal and ldir */
        NdotL = max(dot(n, normalize(lightDir[i])), 0.0);

        if (NdotL > 0.0) {

            att = 1.0 / (gl_LightSource[i].constantAttenuation +
                    gl_LightSource[i].linearAttenuation * dist[i] +
                    gl_LightSource[i].quadraticAttenuation * dist[i] * dist[i]);
            color += att * (diffuse[i] * NdotL + ambient[i]);

            halfV = normalize(halfVector[i]);
            NdotHV = max(dot(n,halfV),0.0);
            color += att * gl_FrontMaterial.specular * gl_LightSource[i].specular * pow(NdotHV,gl_FrontMaterial.shininess);
        }
    }
    gl_FragColor = color;
} 
```

# plugins - Toad for Oracle 中是否有插件接口？

> ID：13026712
> 
> 赞同：6
> 
> 时间：2012-10-23T08:51:46.450
> 
> 标签：plugins, toad

我们希望在 Toad for Oracle 中加入一些缺失的功能。目标是添加一个菜单条目，允许访问和修改编辑器中的文本。

是否有一些记录在案的插件接口（如 Eclipse）来为 Toad 编写扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-27T19:20:47.457

Toad Still (2021) 缺少用于开发 Toad 扩展的插件 API 或插件 SDK。

遵循Toad 论坛的[官方](https://forums.toadworld.com/t/toad-sdk/10575/5)而[非官方](https://forums.toadworld.com/t/toad-plugin-api/9570/3)回答：

> 不，我们不为此提供 API，但 Toad 确实支持命令行执行。这意味着您可以通过 Automation Designer 功能调用 Toad 中的特定函数（阅读帮助）并执行特定任务。
> 
> 查看有关命令行语法和从命令行执行操作的 Toad 帮助，如果这有帮助，请告诉我。

这听起来有点讽刺，因为 Now Toad 自己已经为 Microsoft SSMS[开发了一个插件。](https://forums.toadworld.com/t/toad-plugin-for-ssms/50098)这意味着Toad 广泛使用其他软件的Plugin API，而不是自己提供API。

# android - 无法在框架布局中为 webview 提供边距或填充

> ID：13026717
> 
> 赞同：0
> 
> 时间：2012-10-23T08:52:08.967
> 
> 标签：android, webview

这是我的代码。我无法在线性布局下方准确对齐 webview

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<WebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingTop="50dip"
    />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="50dip"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/etenterurl"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="1.0"
        android:inputType="textUri" />

    <Button
        android:id="@+id/buttongo"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="3.0"
        android:text="Go" />
</LinearLayout>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T08:59:27.733

实现中存在错误，`WebView`填充无法正常工作，

请参阅：[如何在 WebView 周围添加填充](https://stackoverflow.com/questions/9170042/how-to-add-padding-around-a-webview)以获得解决方法

但我认为这是您正在寻找的：

A`RelativeLayout`轻松解决了这个问题！仔细看看`layout_below`给出的论点`WebView`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <WebView
        android:id="@+id/webview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/bar" />

    <LinearLayout
        android:id="@+id/bar"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <EditText
            android:id="@+id/etenterurl"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:layout_weight="1.0"
            android:inputType="textUri" />

        <Button
            android:id="@+id/buttongo"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="3.0"
            android:text="Go" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:08:55.420

为什么不将您的更改`FrameLayout`为 a`RelativeLayout`然后使用

```
<LinearLayout
    android:id="@+id/bar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    ...

</LinearLayout>

<WebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/bar"
    android:layout_below="@id/bar" /> 
```

# python - wx.CallLater 对我不起作用

> ID：13026718
> 
> 赞同：0
> 
> 时间：2012-10-23T08:52:10.867
> 
> 标签：python, wxpython

我想使用 wx.CallLater：我有两个函数，它们将在一个循环中相互调用，但每次调用前都要中断 3 秒。问题是：当我的程序在“goto01”中时，它会在调用“Notify”之前正确等待 3 秒。但是当程序处于“通知”中时，会立即调用“goto01”。为什么此时没有休息 3 秒？这是我的代码 & 在这两个函数的最后一行我有一个 wx.CallLater 事件：

```
self.speed = 3000

def Notify(self):
    self.zeit.Destroy()
    self.zeitint = self.zeitint + 1
    time = round(self.zeitint/2)
    self.zeit = wx.StaticText(self.friendlygamepanel, -1, '%d. Spielminute'%(time), (325+self.dx,9))
    try:
        self.ticker.Destroy()
        self.picplayer1but.Destroy()

    except:
        pass
    if self.zeitint % 2 == 1:
        self.ticker = wx.TextCtrl(self, -1, teamname[0]+' ist im Ballbesitz.',
                    size=(340, 320), pos=(195+self.dx,160), style=wx.TE_RICH2|wx.TE_MULTILINE|wx.TE_NO_VSCROLL)
        self.ticker.SetBackgroundColour((128,191,130))
        self.ticker.SetStyle(0, len(teamname[0]), wx.TextAttr("BLACK", wx.NullColour, self.font))
        wx.CallLater(int(self.speed),self.goto01(players,self.playerpics))

    else:
        self.ticker = wx.TextCtrl(self, -1, oppteamname[0]+' ist im Ballbesitz.',
                    size=(340, 320), pos=(195+self.dx,160), style=wx.TE_RICH2|wx.TE_MULTILINE|wx.TE_NO_VSCROLL)
        self.ticker.SetBackgroundColour((205,173,65))
        self.ticker.SetStyle(0, len(oppteamname[0]), wx.TextAttr("BLACK", wx.NullColour, self.font))
        wx.CallLater(int(self.speed),self.goto01(oppplayers,self.oppplayerpics))

def goto01(self,theplayer,thepicture):
    if self.zeitint % 2 == 1:
        picpos = 0
    else:
        picpos = 460
    self.whichplayer = random.randint(0,2)
    self.whichoppplayer = random.randint(0,2)
    last = self.ticker.GetLastPosition()
    self.ticker.AppendText('\n\n'+theplayer[self.whichplayer][0]+' hat den Ball.')
    self.ticker.SetStyle(last, last+2+len(theplayer[self.whichplayer][0]), wx.TextAttr("BLACK", wx.NullColour, self.font))
    self.picplayer1 = wx.Image(thepicture[self.whichplayer], wx.BITMAP_TYPE_BMP).ConvertToBitmap()
    self.picplayer1but = wx.BitmapButton(self.friendlygamepanel,-1,self.picplayer1,pos=(90+self.dx+picpos,180))
    if self.zeitint < 60:
        wx.CallLater(int(self.speed),self.Notify) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T13:23:32.250

当您使用变量调用函数时，您是在告诉 wxPython 立即调用它。就像您通常调用函数时一样。您可以将参数传递给它：

[http://wxpython-users.1045709.n5.nabble.com/wx-CallLater-issue-td4885884.html](http://wxpython-users.1045709.n5.nabble.com/wx-CallLater-issue-td4885884.html)

正如该链接所指出的，CallLater 的签名是：

**(self, millis, callable, *args, **kwargs)**

这意味着你应该能够做类似的事情

```
wx.CallLater(numberOfMilliSecs, myFunction, arg1, arg2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:10:21.597

我明白了，当我只调用“goto01”而不是“goto01（variable1，variable2）”时，它就可以工作了。我能够更改我的代码，以便在调用“goto”时不必使用这些变量，但我仍然不知道为什么 wx.CallLater 不适用于变量？！

# html - XSLT 继承。替换 HTML 标签？

> ID：13026719
> 
> 赞同：1
> 
> 时间：2012-10-23T08:52:14.750
> 
> 标签：html, xslt, inheritance

以前从未做过 XSLT。是否可以继承文档并仅替换一个标签？如果是，你能提供任何例子吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:52:41.567

你从模板开始

```
<xsl:template match="@* | node()">
  <xsl:copy>
   <xsl:apply-templates select="@* | node()"/>
  </xsl:copy>
</xsl:template> 
```

然后你添加模板来转换你想要转换的节点，例如

```
<xsl:template match="td">
  <th>
    <xsl:apply-templates select="@* | node()"/>
  </th>
<xsl:template> 
```

将所有`td`元素转换为`th`元素或

```
<xsl:template match="h6"/> 
```

删除所有`h6`元素。

如果你想转换一个单一的`td`那么你需要一些方法来识别它，假设它有一个`id`属性使用一个匹配模式，比如

```
<xsl:template match="td[@id = 'td1']">
  <td style="background-color: lightgreen;">
    <xsl:apply-templates select="@* | node()"/>
  </td>
</xsl:template> 
```

该示例设置特定元素的 CSS`background-color`属性。`td`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:14:05.340

**最好使用最基本的 XSLT 设计模式来处理此任务：使用和覆盖[标识规则](http://dpawson.co.uk/xsl/sect2/identity.html)**：

让我们拥有这个 XML 文档：

```
<root>
   <x>This is:</x>
   <a>
      <b>
         <c>hello</c>
      </b>
   </a>
   <a>
      <b>
         <c1>world</c1>
      </b>
   </a>
   <a>
      <b>!</b>
   </a>
   <y>The End</y>
</root> 
```

**任务是**：

1.  删除所有`c`元素。

2.  将任何`b`元素重命名为`d`.

3.  `c2`在任何元素之后插入一个`c1`元素。

**解决方案非常简短**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="c"/>

 <xsl:template match="b">
  <d><xsl:apply-templates select="node()|@*"/></d>
 </xsl:template>

 <xsl:template match="c1">
  <xsl:call-template name="identity"/>
  <c2>xxx</c2>
 </xsl:template>
</xsl:stylesheet> 
```

**当对上述 XML 文档应用此转换时，会产生所需的正确结果**：

```
<root>
   <x>This is:</x>
   <a>
      <d/>
   </a>
   <a>
      <d>
         <c1>world</c1>
         <c2>xxx</c2>
      </d>
   </a>
   <a>
      <d>!</d>
   </a>
   <y>The End</y>
</root> 
```

**说明**：

1.  身份模板在选择执行或按名称调用时，会“按原样”复制当前节点。

2.  对于每个特殊任务（删除、插入和重命名），我们添加一个单独的模板来匹配所需的节点，从而覆盖身份模板，因为它具有更高的特异性。

3.  选择覆盖的、更具体的模板在它匹配的节点上执行，并执行我们需要执行的任务。

# magento - Magento 标识符位置 - 类似于 Joomla 中的 ?tp=1

> ID：13026722
> 
> 赞同：2
> 
> 时间：2012-10-23T08:52:21.443
> 
> 标签：magento, layout, identifier

有谁知道我如何找出预定义的标识符及其在某个 magento 模板布局中的位置？

每次我想添加一个新的静态块时，我都会遇到一个大问题，因为我不知道可用的位置是什么。

换句话说，我正在寻找 joomla 拥有的类似 ?tp=1 的东西。

谢谢，乔治

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T16:35:32.260

刚遇到这个问题，这是我找到的解决方案。

1.  登录到 magento 后台管理
2.  转到主菜单中的系统 -> 配置
3.  转到高级下左下角的开发人员
4.  切换到左上角的商店视图到您当前的网站或商店视图。
5.  在同一开发人员配置页面的调试选项卡下，您将看到一个新选项出现，允许您打开/关闭模板路径提示。

*记得清除缓存*

来源： https: [//support.sweettoothrewards.com/entries/21255937-How-do-I-turn-on-template-path-hints-](https://support.sweettoothrewards.com/entries/21255937-How-do-I-turn-on-template-path-hints-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:21:12.947

我不确定 Joombla，但您可以“打开模板路径提示”来识别块。

# php - 带有摘要的 php curl 返回两个响应

> ID：13026725
> 
> 赞同：5
> 
> 时间：2012-10-23T08:52:23.253
> 
> 标签：php, curl

我发现了一个让我发疯的“奇怪”的 php CURL 行为。基本上我正在做的是使用 curl 进行摘要身份验证调用。这是我的代码的摘录：

```
curl_setopt($this->c, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
curl_setopt($this->c, CURLOPT_USERPWD, $username . ":" . $password); 
```

它工作正常，服务器实际上返回“是的，您提供了正确的凭据”类型的消息。唯一的问题是，原始的 http 响应有点奇怪，因为事实上它包含 2 个响应而不是 1 个。这是 curl_exec($this->c) 吐出的内容：

```
HTTP/1.0 401 Unauthorized
Date: Tue, 23 Oct 2012 08:41:18 GMT
Server: Apache/2.2.20 (Ubuntu)
X-Powered-By: PHP/5.3.6-13ubuntu3.9
WWW-Authenticate: Digest realm="dynamikrest-testing",qop="auth",nonce="5086582e95104",opaque="4b24e95490812b28b3bf139f9fbc9a66"
Vary: Accept-Encoding
Content-Length: 9
Connection: close
Content-Type: text/html

HTTP/1.1 200 OK
Date: Tue, 23 Oct 2012 08:41:18 GMT
Server: Apache/2.2.20 (Ubuntu)
X-Powered-By: PHP/5.3.6-13ubuntu3.9
Vary: Accept-Encoding
Content-Length: 9
Connection: close
Content-Type: text/html

"success" 
```

我不明白为什么它包含来自服务器的第一个响应（它声明它需要身份验证的响应）。

任何人都可以对这个问题有所了解吗？如何避免响应的累积？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-31T13:50:17.423

如果您对标头使用 -I 选项，curl 似乎具有相同的行为：

```
curl -I  --digest -u root:somepassword http://localhost/digest-test/ 
```

返回：

```
HTTP/1.1 401 Authorization Required
Date: Fri, 31 May 2013 13:48:35 GMT
Server: Apache/2.2.22 (Ubuntu)
WWW-Authenticate: Digest realm="Test Page", nonce="9RUL3wPeBAA=52ef6531dcdd1de61f239ed6dd234a3288d81701", algorithm=MD5, domain="/digest-test/ http://localhost", qop="auth"
Vary: Accept-Encoding
Content-Type: text/html; charset=iso-8859-1

HTTP/1.1 200 OK
Date: Fri, 31 May 2013 13:48:35 GMT
Server: Apache/2.2.22 (Ubuntu)
Authentication-Info: rspauth="4f5f8237e9760f777255f6618c21df4c", cnonce="MTQ3NDk1", nc=00000001, qop=auth
Vary: Accept-Encoding
Content-Type: text/html;charset=UTF-8
X-Pad: avoid browser bug 
```

要只获得第二个标题，您可以尝试这个（不是非常理想的解决方案）：

```
<?php

$ch = curl_init();
        // set url
curl_setopt($ch, CURLOPT_URL, "http://localhost/digest-test/");
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_DIGEST);
curl_setopt($ch, CURLOPT_USERPWD, "root:test");

// first authentication with a head request
curl_setopt($ch, CURLOPT_NOBODY, 1);
curl_exec($ch);        

// the get the real output
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_HTTPGET, 1);
$output = curl_exec($ch);
echo $output; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T21:22:03.097

I hit the same problem, and I think it was caused by PHP being compiled against an ancient version of libcurl (7.11.0 in my case, which is now nearly 10 years old). On a different machine with a more recent version of libcurl (7.29.0) the same code was fine, and my problems ended after getting my host to recompile their PHP to use the latest they had available (7.30.0).

This fix was suggested by [a thread on the curl-library mailing list from 2008](http://curl.haxx.se/mail/lib-2008-11/0078.html), where a user discovered the problem affected version 7.10.6 but not 7.12.1\. I've searched the [libcurl changelog around 7.12.0](http://curl.haxx.se/changes.html#7_12_0) and failed to find any clear entry about fixing this problem, though it might be covered by "general HTTP authentication improvements". Still, I'm now pretty confident that an old libcurl is the problem.

You can check which version of libcurl is used by your PHP from the 'cURL Information' entry in the output of `phpinfo();`

# high-availability - 设置 cloudbees 应用程序以始终在不同区域拥有实例

> ID：13026728
> 
> 赞同：0
> 
> 时间：2012-10-23T08:52:51.557
> 
> 标签：high-availability, cloudbees, regions

在过去的一个月里，我的 cloudbees 应用程序由于其提供商的 cloudbees 问题而停机。昨天 AWS East 出现了问题，去年夏天发生了这种情况：http: [//blog.cloudbees.com/2012/07/cloudbees-postmortem-on-two-recent.html](http://blog.cloudbees.com/2012/07/cloudbees-postmortem-on-two-recent.html)

为了实现更高的可用性，我想知道在 cloudbees 的支持下，始终在不同区域打开两个实例是否是一个可行的解决方案。最好是其中之一可能是欧盟。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:58:42.093

您说得对，要高度可用的云应用程序必须是 AWS 上的多区域。这对应用程序架构有一些严重影响，需要解决主/备份、数据复制等问题。

我们（cloudbees）没有为这个复杂的问题提供开箱即用的解决方案，这实际上取决于您的要求、数据权重和更新频率等

在欧盟地区部署仅适用于 Cloudbees 的“专用服务器”（联系 sales@cloudbees.com 了解详细信息和定价），但可能是获得此类多区域 HA 应用程序的一个选项

# cakephp - CakePhp 2 树行为的 generateTreeList() 返回平面列表

> ID：13026730
> 
> 赞同：0
> 
> 时间：2012-10-23T08:53:03.937
> 
> 标签：cakephp, tree, cakephp-2.0

我按照[书中](http://book.cakephp.org/2.0/en/core-libraries/behaviors/tree.html)的文档来使用树行为。

一切看起来都很好。parent_id、lft 和 rght 已正确保存，但当我调用时：

```
$this->Model->generateTreeList() 
```

返回的列表是平坦的，即：

```
array(
    (int) 8  => 'p1',
    (int) 11 => 'child of p1',
    (int) 9  => 'p2',
    (int) 2  => 'child of p2',
) 
```

还有什么我需要注意的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T11:51:35.763

它按预期工作（根据文档）。generateTreeList 返回数组，其中键是 id，显示字段是值。 `generateTreeList($conditions=null, $keyPath=null, $valuePath=null, $spacer= '_', $recursive=null)` 您可以指定`$spacer`参数，并获得类似 i.ex 的结果：

```
array(
  1 => 'p1',
  2 => '_p2',
  3 => '_p3',
  4 => '_p4',
  5 => '__p5',
); 
```

该列表是“扁平的”，但带有间隔。如果你想有分层嵌套数组，你必须使用：`$this->Model->find('threaded')`

# ios - 幻灯片放映和动画 iOS

> ID：13026732
> 
> 赞同：1
> 
> 时间：2012-10-23T08:53:17.463
> 
> 标签：ios, animation, uiimage, slideshow

![幻灯片放映](../Images/a715051ef9619f4037a440fa3d0f0670.png)

我需要像上面那样创建幻灯片。上图中从左到右共有5个屏幕 1）在第一个屏幕中：所有图片都是倾斜的 2）当我滑动时，第一张图片随着我的手指移动，最后移动到队列的后面。第二张图出现了。

谁能给我一些资源来阅读和练习来完成这些任务？

编辑：对于那些选择使用 iCarousel 并且需要在用户点击当前选择的图像时添加操作的用户：将以下内容添加到您的 ViewController。- (void)carousel:(iCarousel *)carousel didSelectItemAtIndex:(NSInteger)index { if( index == carousel.currentItemIndex ) { //在这里定义你的操作 } } 希望它对某人有所帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:56:45.873

这是一个好的开始，iCarousel > [https://github.com/nicklockwood/iCarousel](https://github.com/nicklockwood/iCarousel)

# emacs - emacs：返回两行功能？

> ID：13026735
> 
> 赞同：3
> 
> 时间：2012-10-23T08:53:26.590
> 
> 标签：emacs, lisp

我的 emacs 点文件中有一个函数可以在我的日记中插入一个日期。添加后，我想跳回几行并将光标放在日期下方。我如何在函数中做到这一点？

```
(defun ddd ()
  "Insert date at point journal style."
  (interactive)
  (insert (format-time-string "[%Y-%m-%d %a]"))
  (insert "\n")
  (insert "\n")
  (insert "\n")
  (insert "** end\n")
  (gobacktwolineshere)) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T08:59:17.180

你想要这个功能`forward-line`，特别是

```
(forward-line -2) 
```

向后退两行。有关更多信息，请键入`C-h f forward-line RET`inside `emacs`。根据您离开的位置，您可能不会在行首结束。如果你想要这个，添加对`beginning-of-line`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-23T11:18:07.257

请记住，如果您可以告诉 Emacs 以交互方式执行此操作（例如，使用`<up>`或`C-p`在此实例中），那么您可以通过前缀 . 来询问 Emacs 在您键入时它会做什么`C-h``k`。

在这种情况下，Emacs 会告诉您这些键运行命令`previous-line`，并且：

> 如果您正在考虑在 Lisp 程序中使用它，请考虑使用 `forward-line`否定参数。它通常更易于使用且更可靠（不依赖于目标列等）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T13:09:10.383

您可能希望使用`save-excursion`它来使其更健壮：

```
(defun ddd ()
  "Insert date at point journal style."
  (interactive)
  (insert (format-time-string "[%Y-%m-%d %a]\n"))
  (save-excursion (insert "\n\n** end\n"))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T08:55:51.110

如果您知道要返回多少个字符，则可以使用`(backward-char 9)`.

# c# - 我可以使用扩展方法将枚举的内容作为列表返回吗？

> ID：13026738
> 
> 赞同：1
> 
> 时间：2012-10-23T08:53:39.467
> 
> 标签：c#

我有以下枚举：

```
public enum QuestionType {
    Check = 1,
    CheckAndCode = 2,
    na = 99
};

public static class QuestionTypeExtension
{
    public static string D2(this QuestionType key)
    {
        return ((int) key).ToString("D2");
    }
} 
```

我已经创建了一个格式化输出的扩展方法，但现在我有另一个要求。我需要做的是创建一个扩展方法，它将枚举的内容返回到以下类的列表中：

```
public class Reference {
   public string PartitionKey { get; set; } // set to "00"
   public int RowKey { get; set; } // set to the integer value
   public string Value { get; set; } // set to the text of the Enum
} 
```

是否可以在扩展方法中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:02:17.993

尝试以下操作：

```
public static List<Reference> GetReferencesForQuestionType()
{
    return Enum.GetValues(typeof(QuestionType))
        .Cast<QuestionType>()
        .Select(x => new Reference
                         {
                             PartitionKey = "00", 
                             RowKey = (int)x, 
                             Value = x.ToString()
                         })
        .ToList();
} 
```

如果您想为`Reference`扩展方法中的一个元素创建 -class 的实例，请尝试以下操作：

```
public static Reference ToReference(this QuestionType questionType)
{
    return new Reference
                     {
                         PartitionKey = "00", 
                         RowKey = (int)questionType, 
                         Value = questionType.ToString()
                     };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:12:53.420

怎么样...

```
public static class QuestionTypeExtension
{
    public static IEnumerable<Reference> Reference()
    {
        return Enum.GetValues(typeof(QuestionType)).OfType<QuestionType>().
            Select(qt=>new Reference(){ PartitionKey = "00", RowKey = (int)qt, Value = qt.ToString()});
    }
} 
```

# javascript - Jquery查找下一个（指定的）元素不起作用

> ID：13026740
> 
> 赞同：2
> 
> 时间：2012-10-23T08:53:41.457
> 
> 标签：javascript, jquery

我正在尝试使用 Jquery 查找下一个 div。这是代码：

```
$('.menu-item').hover(function() {
  $(this).stop(true, true).addClass("menu-item-hover", 300);
  $(this).next('div').stop(true, true).fadeIn(300);
}, function() {
  $(this).stop(true, true).removeClass("menu-item-hover", 300);
  $(this).next('div').stop(true, true).fadeOut(300);
});

<a href="media.html"><div class="menu-item"><h1>Media</h1></div></a>
<div id="tooltip-media">Sights and sounds from Cambodia</div>

<a href="about.html"><div class="menu-item"><h1>About</h1></div></a>
<div id="tooltip-about">Who in the world is the Phillips Family?</div> 
```

简单的。div隐藏在`toolip-*`css中。我希望代码中的下一个在`menu-item`. 我检查了其他问题，但没有一个适合我的情况。我同时使用 Jquery 和 Jquery UI。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:57:37.840

试试这个

```
$(this).parent().next('div').stop(true, true).fadeIn(300); 
```

在您的示例中，您试图找到下一个`div`，但它不是菜单项的兄弟。只有它不起作用。遍历父项并找到下一个`div`它将起作用。

[父母（）](http://api.jquery.com/parent/)，[下一个（）](http://api.jquery.com/next/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T08:58:46.503

首先，`.next()`只抓取*下一个兄弟姐妹*，它不会搜索所有兄弟姐妹。为此，您需要调用`.nextAll('div')`. 但即使这个函数在这里也对你没有帮助，因为`<div>`你正在寻找的节点不包含在同一个*父元素*中。

你应该去

```
$( this ).parent().next( 'div[id^=tooltip]' ).stop( true, true ).fadeOut( 300 ); 
```

参考：[`.next()`](http://api.jquery.com/next/),[`.nextAll()`](http://api.jquery.com/nextAll/)

# jquery - 如何将额外数据发送到 ajax done 方法？

> ID：13026741
> 
> 赞同：0
> 
> 时间：2012-10-23T08:53:44.457
> 
> 标签：jquery

我会简单点，我有这个代码：

```
$('#album_item' + currentCell).on('blur', '#caption_input' + currentCell, function(e) {

    e.stopPropagation();

    // we extract the num in the id to use related elements
    var numberPattern = /\d+/g;
    var id = $(this).attr("id");
    id = id.match(numberPattern);

    // save caption, when done reInitFlip
    $.ajax({
        type: "POST",
        url: "insert_caption",
        data: {
            thumbnail: file.thumbnail_url,
            caption: $('#caption_input' + currentCell).val()
        }
    }).done(reInitFlip(data, id));

});​ 
```

reInitFlip 如下：

```
var reInitFlip = function(data,id) {

}; 
```

我所有的项目都在一个带有递增 ID 的列表中，所以我试图向函数发送调用此事件的项目的 ID 值，因为可能有一些。

我怎样才能将该数据发送到该方法？或者我怎么知道哪个元素调用了 reInitFlip 中的 ajax 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:59:09.117

我想你需要这样的东西：

```
$.ajax({
    // ...
}).done(function(data) {
    reInitFlip(data, id)
}); 
```

# flash - 在 Flash actionscript 2 中使用滚轮

> ID：13026743
> 
> 赞同：0
> 
> 时间：2012-10-23T08:53:56.120
> 
> 标签：flash, actionscript

当我在 Flash 中测试我的 Flash Actionscript 2 应用程序时，滚轮不起作用，但是当我在浏览器中测试相同的应用程序时，滚轮起作用。我使用的代码非常简单；

```
var mouseListener:Object = new Object();
mouseListener.onMouseWheel = function(delta) {
    songList_mc._y = songList_mc._y + (delta * 3);  
}
Mouse.addListener(mouseListener); 
```

在 Flash 中进行测试时，是否有我遗漏的设置禁用了滚轮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T12:45:51.743

```
var mouseListener:Object = new Object();
mouseListener.onMouseWheel = function(delta)
{
    if ((delta > 0 && songList_mc._y < 1025) || (delta < 0 && songList_mc._y > 0))
    {
        songList_mc._y = songList_mc._y + (delta * 3);
    }
};
Mouse.addListener(mouseListener); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T21:53:33.380

鼠标滚轮在某些 flash wmode 中不起作用

# c# - 并行化许多 HTTP Web 请求的好方法是什么？

> ID：13026744
> 
> 赞同：2
> 
> 时间：2012-10-23T08:54:01.817
> 
> 标签：c#, multithreading, .net-4.0

我正在构建一个通用的 URI 检索系统。本质上，有一个通用类`Retriever<T>`，它维护一个要检索的 URI 队列。它有一个单独的线程，可以尽可能快地处理该队列。如问题标题所示，URI 类型的一个示例是 HTTP 类型 URI。

问题是，当我开始通过抽象方法请求检索资源时，`T RetrieveResource(Uri location)`由于缺乏异步性，它会变慢。

更改 to 的返回类型`RetrieveResource`是`Task<T>`我的第一个想法。但是，当我们有数千个未完成的任务时，这似乎会使任务堆积起来并导致很多问题。它似乎创建了许多实际线程，而不是利用线程池。我想这只会减慢一切，因为一次发生的事情太多了，所以没有任何单独的事情取得重大进展。

预计我们将有大量排队的项目要检索，并且它们的处理速度不能像排队一样快。随着时间的推移，系统有机会赶上；但这绝对不会很快。

我还考虑过而不是维护一个队列和一个线程来处理它......只是在`ThreadPool`. 但是，如果说我需要在处理所有工作项之前关闭系统，或者稍后想要允许优先级排序等，我不确定这是否理想。

我们也知道检索资源是一个耗时的过程（0.250 - 5 秒），但不一定是资源密集型过程。我们可以将其并行化为数百个请求。

我们的要求是：

*   URI 可以从任何线程入队，即使系统正在处理队列
*   检索可能需要稍后能够被优先处理
*   检索应该可以暂停
*   当没有检索到任何东西时应该发生最小的旋转（`BlockingCollection`在这里很有用）。

有没有一种在不引入不必要的复杂性的情况下并行化的好方法？

下面是我们现有的一些代码，作为示例。

```
public abstract class Retriever<T> : IRetriever<T>, IDisposable
{
    private readonly Thread worker;
    private readonly BlockingCollection<Uri> pending;
    private volatile int isStarted;
    private volatile int isDisposing;

    public event EventHandler<RetrievalEventArgs<T>> Retrieved;

    protected Retriever()
    {
        this.worker = new Thread(this.RetrieveResources);
        this.pending = new BlockingCollection<Uri>(new ConcurrentQueue<Uri>());
        this.isStarted = 0;
        this.isDisposing = 0;
    }

    ~Retriever()
    {
        this.Dispose(false);
    }

    private void RetrieveResources()
    {
        while (this.isDisposing == 0)
        {
            while (this.isStarted == 0)
            {
                Monitor.Wait(this.pending);
            }

            Uri location = this.pending.Take();

            // This is what needs to be concurrently done.
            // In this example, it's synchronous, but just on a separate thread.
            T result = this.RetrieveResource(location);

            // At this point, we would fire our event with the retrieved data
        }
    }

    protected abstract T RetrieveResource(Uri location);

    protected void Dispose(bool disposing)
    {
        if (Interlocked.CompareExchange(ref this.isDisposing, 1, 0) == 1)
        {
            return;
        }

        if (disposing)
        {
            this.pending.CompleteAdding();
            this.worker.Join();
        }
    }

    public void Add(Uri uri)
    {
        try
        {
            this.pending.Add(uri);
        }
        catch (InvalidOperationException)
        {
            return;
        }
    }

    public void AddRange(IEnumerable<Uri> uris)
    {
        foreach (Uri uri in uris)
        {
            try
            {
                this.pending.Add(uri);
            }
            catch (InvalidOperationException)
            {
                return;
            }
        }
    }

    public void Start()
    {
        if (Interlocked.CompareExchange(ref this.isStarted, 1, 0) == 1)
        {
            throw new InvalidOperationException("The retriever is already started.");
        }

        if (this.worker.ThreadState == ThreadState.Unstarted)
        {
            this.worker.Start();
        }

        Monitor.Pulse(this.pending);
    }

    public void Stop()
    {
        if (Interlocked.CompareExchange(ref this.isStarted, 0, 1) == 0)
        {
            throw new InvalidOperationException("The retriever is already stopped.");
        }
    }

    public void Dispose()
    {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }
} 
```

以上面的例子为基础......我认为这个解决方案增加了太多的复杂性，或者更确切地说，奇怪的代码......就是这样。

```
 private void RetrieveResources()
    {
        while (this.isDisposing == 0)
        {
            while (this.isStarted == 0)
            {
                Monitor.Wait(this.pending);
            }

            Uri location = this.pending.Take();

            Task<T> task = new Task<T>((state) =>
                {
                    return this.RetrieveResource(state as Uri);
                }, location);

            task.ContinueWith((t) =>
                {
                    T result = t.Result;
                    RetrievalEventArgs<T> args = new RetrievalEventArgs<T>(location, result);

                    EventHandler<RetrievalEventArgs<T>> callback = this.Retrieved;
                    if (!Object.ReferenceEquals(callback, null))
                    {
                        callback(this, args);
                    }
                });

            task.Start();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:10:59.160

我想出了一个很好的解决方案。我抽象了检索资源的方法和结果的表示。这允许支持检索具有任意结果的任意 URI；有点像一些 URI 驱动的“ORM”。

它支持可变并发级别。前几天我发布这个问题时，我忘记了异步和并发是完全不同的，我通过任务实现的只是异步并阻塞了任务调度程序，因为我真正想要的是并发。

我添加了取消功能，因为拥有启动/停止功能似乎是个好主意。

```
public abstract class Retriever<T> : IRetriever<T>
{
    private readonly object locker;
    private readonly BlockingCollection<Uri> pending;
    private readonly Thread[] threads;
    private CancellationTokenSource cancellation;

    private volatile int isStarted;
    private volatile int isDisposing;

    public event EventHandler<RetrieverEventArgs<T>> Retrieved;

    protected Retriever(int concurrency)
    {
        if (concurrency <= 0)
        {
            throw new ArgumentOutOfRangeException("concurrency", "The specified concurrency level must be greater than zero.");
        }

        this.locker = new object();
        this.pending = new BlockingCollection<Uri>(new ConcurrentQueue<Uri>());
        this.threads = new Thread[concurrency];
        this.cancellation = new CancellationTokenSource();

        this.isStarted = 0;
        this.isDisposing = 0;

        this.InitializeThreads();
    }

    ~Retriever()
    {
        this.Dispose(false);
    }

    private void InitializeThreads()
    {
        for (int i = 0; i < this.threads.Length; i++)
        {
            Thread thread = new Thread(this.ProcessQueue)
            {
                IsBackground = true
            };

            this.threads[i] = thread;
        }
    }

    private void StartThreads()
    {
        foreach (Thread thread in this.threads)
        {
            if (thread.ThreadState == ThreadState.Unstarted)
            {
                thread.Start();
            }
        }
    }

    private void CancelOperations(bool reset)
    {
        this.cancellation.Cancel();
        this.cancellation.Dispose();

        if (reset)
        {
            this.cancellation = new CancellationTokenSource();
        }
    }

    private void WaitForThreadsToExit()
    {
        foreach (Thread thread in this.threads)
        {
            thread.Join();
        }
    }

    private void ProcessQueue()
    {
        while (this.isDisposing == 0)
        {
            while (this.isStarted == 0)
            {
                Monitor.Wait(this.locker);
            }

            Uri location;

            try
            {
                location = this.pending.Take(this.cancellation.Token);
            }
            catch (OperationCanceledException)
            {
                continue;
            }

            T data;

            try
            {
                data = this.Retrieve(location, this.cancellation.Token);
            }
            catch (OperationCanceledException)
            {
                continue;
            }

            RetrieverEventArgs<T> args = new RetrieverEventArgs<T>(location, data);

            EventHandler<RetrieverEventArgs<T>> callback = this.Retrieved;
            if (!Object.ReferenceEquals(callback, null))
            {
                callback(this, args);
            }
        }
    }

    private void ThowIfDisposed()
    {
        if (this.isDisposing == 1)
        {
            throw new ObjectDisposedException("Retriever");
        }
    }

    protected abstract T Retrieve(Uri location, CancellationToken token);

    protected virtual void Dispose(bool disposing)
    {
        if (Interlocked.CompareExchange(ref this.isDisposing, 1, 0) == 1)
        {
            return;
        }

        if (disposing)
        {
            this.CancelOperations(false);
            this.WaitForThreadsToExit();
            this.pending.Dispose();
        }
    }

    public void Start()
    {
        this.ThowIfDisposed();

        if (Interlocked.CompareExchange(ref this.isStarted, 1, 0) == 1)
        {
            throw new InvalidOperationException("The retriever is already started.");
        }

        Monitor.PulseAll(this.locker);
        this.StartThreads();
    }

    public void Add(Uri location)
    {
        this.pending.Add(location);
    }

    public void Stop()
    {
        this.ThowIfDisposed();

        if (Interlocked.CompareExchange(ref this.isStarted, 0, 1) == 0)
        {
            throw new InvalidOperationException("The retriever is already stopped.");
        }

        this.CancelOperations(true);
    }

    public void Dispose()
    {
        this.Dispose(true);
        GC.SuppressFinalize(this);
    }
} 
```

# c# - 多个事件的一个处理程序

> ID：13026745
> 
> 赞同：1
> 
> 时间：2012-10-23T08:54:06.423
> 
> 标签：c#, .net, events, handler

我有四个事件：

```
View.AdditionPerformed += new EventHandler<EventArgs>(OnOperationPerformed);
View.SubtractionPerformed+=new EventHandler<EventArgs>(OnOperationPerformed);
View.DivisionPerformed+=new EventHandler<EventArgs>(OnOperationPerformed);
View.MultiplyPerformed+=new EventHandler<EventArgs>(OnOperationPerformed); 
```

和一种方法：

```
private void OnOperationPerformed(object sender, EventArgs e)
 {

 } 
```

如何定义哪个事件引发了我的方法？像这样的东西：

```
private void OnOperationPerformed(object sender, EventArgs e)
 {
    switch(event)
     {
      case MultiplyPerformed:{}
      case DivisionPerformed:{}
      ...
     }  
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:00:08.060

写你自己的`EventArgs`，里面有一个`enum`，告诉你引发的事件。

```
enum MyEventEnum
{
    AdditionPerformed,
    SubtractionPerformed,
    DivisionPerformed,
    MultiplayPerformed
} 
```

这`EventArgs`

```
class MyEventArgs : EventArgs
{
    public MyEventEnum EventRaised { get; set; }
} 
```

定义处理程序

```
View.AdditionPerformed += new EventHandler<MyEventArgs>(OnOperationPerformed);
View.SubtractionPerformed+=new EventHandler<MyEventArgs>(OnOperationPerformed);
View.DivisionPerformed+=new EventHandler<MyEventArgs>(OnOperationPerformed);
View.MultiplyPerformed+=new EventHandler<MyEventArgs>(OnOperationPerformed); 
```

当你打电话给他们时：

```
this.AdditionPerformed(this, new MyEventArgs 
    { EventRaised = MyEventEnum.AdditionPerformed }; 
```

我知道它是硬编码的，但没有其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:57:36.997

除了使用 EventArgs，您可以使用自己的事件参数类来传递必要的数据，以便在处理程序中进行选择。

然后它将在处理程序内的 e 变量上可用。

干杯

# c# - 命名空间的 C# 命名约定

> ID：13026746
> 
> 赞同：4
> 
> 时间：2012-10-23T08:54:07.110
> 
> 标签：c#, namespaces, naming-conventions

在工作中，他们对命名空间的命名非常详尽（在我之前）。一个典型的命名空间可能是

> CompanyName.SubCompanyName.DepartmentName.ProjectName.UniqueProjectName.ProjectName.FilteredProjectName

可悲的是，我不是在开玩笑。问题是，尽管对项目所在的位置有一定的了解，但它实在是太吵了。我想缩短它。

我想使用`using`关键字（关于声明要使用哪些命名空间），然后使用等于符号来使用命名空间别名。现在问题变成了命名空间声明和类属性之间的歧义。例如

```
Project.Message 
```

就目前而言，我们不知道 Project 是静态类的名称、命名空间还是已经初始化的对象的名称（尽管这个词`this.`有助于澄清它）。

因此，在这样的背景下，我的问题是关于命名约定。对我来说，使用匈牙利风格的命名约定是有意义的（我知道这些天现在被认为已经过时了）所以我可以做类似的事情

> 使用 nsProject = CompanyName.SubCompanyName.DepartmentName.ProjectName.UniqueProjectName.ProjectName.FilteredProjectName

请注意，我在它前面加上了 ns（命名空间）。因此，如果代码看起来像以下任何一种，那么至少有一些清晰性：

```
this.Project.Message
nsProject.Message
Project.Message 
```

上面的 3 个例子现在已经很清楚了：第一个已经在项目中声明，第二个是命名空间，第三个可能是静态方法调用。

有没有人对这种方法有任何意见？我是在重新发明轮子（是否已经制定了指导方针），还是有人对可以做什么有不同的看法？

**编辑**

想要使用 Alias 的另一个原因是当前命名空间与文件夹结构不匹配（或在某些地方没有任何意义）。因此，我不仅要确保明确使用的对象/命名空间类型，而且我的 Alias 还将作为文件夹位置的指南。我知道，这可能读作黑客等，但（根据这篇文章中的评论）这是许多人的第一阶段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:50:12.853

我不知道任何“官方”指南，但每当我给命名空间起别名时，我通常会使用公司和项目的缩写。这将导致（使用您的示例）：

```
this.Project.Message.Send();
CompanyProject.Message.Send();
Project.Message.Send(); 
```

我更喜欢匈牙利语btw之上的后缀（我知道主观）。

# php - PHPUnit 中的 InvokedAtIndex 匹配器未验证是否到达最后准备好的索引

> ID：13026748
> 
> 赞同：1
> 
> 时间：2012-10-23T08:54:15.660
> 
> 标签：php, phpunit

当我编写一个测试时，即按特定顺序测试几个模拟调用时，我还想确定所有准备好的函数调用都被调用了。我正在使用`InvokedAtIndex`匹配器，但例如测试用例中的这段代码通过：

```
$mock = $this->getMock('Service', 'SomeClass');
$mock->expects($this->at(0))->method('getSomeValue');
$mock->expects($this->at(1))->method('getSomeOtherValue');

$mock->getSomeValue(); 
```

是否有一些解决方案如何使该测试失败，因为并非所有准备好的模拟方法都被调用？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:52:14.927

问题是，在您的示例中，`MethodName`匹配器不会引发异常，而是仅返回 false。这意味着定序器只有使用适当的方法才能正常工作（例如，如果您将从示例模拟创建存根），但它不会使期望失败。

如果你想检查是否在第一次`getSomeValue`调用方法，而在第二次`getSomeOtherValue`你需要涉及另一个`InvocationMocker`- 例如`with`。

所以，这应该对你有用（假设两种方法都没有参数）：

```
(...)
$mock->expects($this->at(0))->method('getSomeValue')->with();
$mock->expects($this->at(1))->method('getSomeOtherValue')->with();

$mock->getSomeValue(); 
```

除非您在第二次调用时调用，否则上述测试将失败`getSomeOtherValue`。

# android - Phonegap Zoom 和安卓

> ID：13026750
> 
> 赞同：0
> 
> 时间：2012-10-23T08:54:22.860
> 
> 标签：android, cordova, jquery-mobile, zooming

我正在使用以下代码进行缩放

```
<meta id="viewport" name="viewport"
    content="initial-scale=1.0, maximum-scale=3.0, minimum-scale=1.0, user-scalable=yes" /> 
```

它工作正常。但是，当我单击后退按钮时，上一页的缩放级别也会被缩放。因此，例如，我在第 2 页上有 2x 缩放，然后我回到第 1 页，它也将缩放显示为 2x。我的要求是当移动到另一个页面时，缩放级别应该默认为 1.0。

有什么帮助吗？

谢谢布里杰什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:35:04.380

如果您使用 jQuery-Mobile 来管理页面转换，那么您需要在通过 jQuery Mobile 呈现页面时触发一个事件。试试[这里](https://stackoverflow.com/questions/5651776/jquery-mobile-rendering-problems-with-content-being-added-after-the-page-is-init)给出的答案：

它应该有帮助。

# node.js - Heroku + mongoose 连接错误：在集合中找不到主服务器

> ID：13026756
> 
> 赞同：3
> 
> 时间：2012-10-23T08:54:55.207
> 
> 标签：node.js, mongodb, heroku, replication, mongoose

我在 mongolab 上有一个 mongodb 副本集。

我正在使用 nodejs + mongoose。当我尝试从本地计算机连接时，一切正常。但是在部署到 heroku 之后，发生了一些错误，并且 mongoose 出现了奇怪的错误：

```
[Error: no primary server found in set] 
```

这里有一些代码（server.js）：

```
async.series([
  function(callback){
    console.log('DB Connection: ' + siteConf.mongo_url);
    mongoose.connect(siteConf.mongo_url, siteConf.mongo_options, callback);
  },      
  function(callback){
    http.createServer(app).listen(siteConf.port, callback);
  }
],
function(err, results){

 if (err) {
   console.log(err);
 }

 console.log('Running in ' + (process.env.NODE_ENV || 'development') + ' mode @ ' + siteConf.uri);
  }
); 
```

这个网址我用作连接字符串：

```
mongodb://username:password@someid-a0.mongolab.com:39897/pm_prod,mongodb://someid-a1.mongolab.com:39897 
```

我不明白的主要事情是：我的机器和heroku云托管有什么区别。

我已经尝试删除 node_modules 并 npm install 它们以确保我具有与 heroku 相同的版本。（因为 heroku 在每次部署时都会这样做）。

谢谢，对不起我的英语不好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T18:05:28.263

这可能是 URI 问题。DB URI 的格式为：

```
mongodb://<user>:<pass>@host:port,host:port,...,host:port/db_name 
```

这意味着

```
mongodb://username:password@someid-a0.mongolab.com:39897/pm_prod,mongodb://someid-a1.mongolab.com:39897 
```

应该：

```
mongodb://username:password@someid-a0.mongolab.com:39897,someid-a1.mongolab.com:39897/pm_prod 
```

其他人也需要注意：**如果您使用 Heroku 的 MongoLab 插件**，您的 URI 可以作为环境变量在 process.env.MONGOLAB_URI 中使用，因此您不必将 URI 放在代码中。

这也可能与一个关于 Heroku 和 Mongo 之间连接性的问题有关。请参阅[https://github.com/jcottr/temps-mort](https://github.com/jcottr/temps-mort)，其中引用了 Node Mongo 驱动程序的两张票：

[https://jira.mongodb.org/browse/NODE-4](https://jira.mongodb.org/browse/NODE-4)

[https://jira.mongodb.org/browse/NODE-5](https://jira.mongodb.org/browse/NODE-5)

# javascript - 为什么“返回错误；” 或“event.preDefualt();” 在 $.post(); 之后不起作用？

> ID：13026757
> 
> 赞同：1
> 
> 时间：2012-10-23T08:54:55.270
> 
> 标签：javascript, jquery

为什么“返回错误；” 或“event.preDefualt();” 在 $.post(); 之后不起作用 首先，我只是在 . 之后写了一个 return false `$(#id).submit(function(e){ return false;}// it works properly`。但是当我通过调用某些东西时`$.post('check-email.php',{parameter},function{data})`，我尝试在 $.post 调用之后写 return false 。它不起作用，直接进入下一页。这是我的代码：-

```
$(document).ready(function () { //newly added 
    $('#mysignupform').submit(function (event) {
        return false;
        or event.preDfault(); // only work here
        var emailVal = $('#inputEmail').val(); // assuming this is a input text field
        //alert(emailVal);
        $.post('check-email.php', {
            'email': emailVal
        }, function (data) {
            alert(data);
            if (data == 'false') {
                $("#mysignupform").submit(function (event) {
                    return false;
                    or event.preventDefault(); //both doesnt work here..why??
                    ;
                });
            } else {
                $("#mysingupform").submit(function () {
                    return false;
                }); //retrun false doesnt work here..why??
            }
        });
    });
}); 
```

我不想让他们提交，但它仍然在发生。请帮我..！提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:59:58.610

因为`$.post`是*异步*的。在立即调用之后的语句处继续执行`$.post`。由于它后面没有语句，`submit`事件处理函数将简单地返回`undefined`，浏览器将愉快地继续提交，就好像什么都没发生一样。

异步方法的回调只会在一段时间后执行。在您的情况下，这将是服务器返回响应的时候。由于外部函数已经返回，所以该回调函数无处可*返回*。

您将需要始终阻止表单提交按钮上的事件处理程序中的默认操作，然后在回调`click`成功后以编程方式重新提交表单：`$.post`

```
$('#mysignupform :submit').click(function (event) {
    var form = this.closest("form"); // Get a reference to the containing form
    event.preventDefault(); // Prevent the default action (form submission)
    $.post('check-email.php', { /* data */ }, function (data) {
        // If the data is good...
        form.submit(); // Submit the containing form
    });
}); 
```

显然，如果您绑定到表单`submit`事件，您将无法真正做到这一点，因为重新提交表单将再次触发事件处理程序，您将陷入无限循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:00:13.253

这应该有效：

```
$(document).ready(function () { //newly added 
    $('#mysignupform').submit(function (event) {
        // your $.post call
        $.post('check-email.php', {email: emailVal}, function (data) {
            // ...
            // having a return false means returning false to the success callback
            // of your .post call. it is not the same as returning false to the 
            // submit() callback
        });

        // return false to submit()
        return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T09:02:40.477

Ajax 是异步工作的。简单的解决方案是在提交按钮上绑定一个单击事件处理程序。

```
$('#your_submit_button').click(function (event) {
    event.preventDefault();
    var emailVal = $('#inputEmail').val(); // assuming this is a input text field
    $.post('check-email.php', {
        'email': emailVal
    }, function (data) {
        if (data !== 'false') {
            // submit the form here
            $("#mysingupform").submit();
        }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:00:14.220

`$.post(...)`是异步的。试试`$.ajax(async: false, ...)`吧。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T09:02:12.630

这是因为 post 完成后执行的函数是异步执行的，即您不再处于事件处理程序中。

[这个答案](https://stackoverflow.com/questions/8105556/how-do-i-explicitly-execute-default-action-from-jquery-event)有一种您可以使用的技术 - 基本上在设置布尔标志以防止您的帖子逻辑被执行两次之后再次单击提交按钮。

# python - 无法使用 Python 在 Centos 中正确运行套接字程序

> ID：13026759
> 
> 赞同：0
> 
> 时间：2012-10-23T08:54:59.583
> 
> 标签：python, sockets, port

我目前正在使用 Python 处理套接字。

作为初学者，我首先尝试复制本[（17.2.2.示例）教程中给出的示例](http://docs.python.org/library/socket.html#example)

我把客户端和服务器脚本放在两台不同的机器上（当然）

现在，我想试试它是否有效，但我有点迷路了。

我正在考虑连续运行服务器程序，以便它继续接收客户端程序发送的数据。但是，当我尝试运行服务器程序时，它给了我这个错误

> socket.error: (99, '无法分配请求的地址')

当我尝试运行客户端程序时，它没有给我错误，但是，它正在打印随机数据，这与我所期望的不同，因为我发送了字符串“Hello World”，所以我期待它会收到并且打印“你好世界”

下图是服务器程序

```
# Echo server program
import socket

HOST = '192.168.104.112'                 # Symbolic name meaning all available interfaces
PORT = 50007              # Arbitrary non-privileged port
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.bind((HOST, PORT))
s.listen(1)
conn, addr = s.accept()
print 'Connected by', addr
while 1:
    data = conn.recv(1024)
    if not data: break
    conn.sendall(data)
conn.close() 
```

下面是客户端程序

```
# Echo client program
import socket

HOST = '192.168.104.111'    # The remote host
PORT = 50007              # The same port as used by the server
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT))
s.sendall('Hello, world')
data = s.recv(1024)
s.close()
print 'Received', repr(data) 
```

假设运行服务器程序的机器IP为：192.168.104.111

而客户端程序是：192.168.104.112

我不太确定从哪里获取端口号，所以我只是使用了终端中 rpyc 中显示的端口。无论如何，我如何获得正确的端口号？

我知道我在这里犯了很多错误。我只是不知道哪个部分。你能指出我所犯的错误以及如何纠正它们吗？以及如何运行这些程序？

顺便说一句，我正在使用 Centos。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:57:00.907

在服务器上，`HOST`应该是`0.0.0.0`或者服务器*自己的*IP 地址。服务器需要将其侦听端口绑定到自己的接口。客户端连接到服务器。

您的客户端程序不检查错误。因此，如果它无法连接到服务器，事情就会出错。

# jquery - jquery刷新页面而不重复表单操作

> ID：13026761
> 
> 赞同：1
> 
> 时间：2012-10-23T08:55:18.100
> 
> 标签：jquery, forms

我需要找到一种在不包含用户表单详细信息的情况下刷新页面的方法——这弄乱了我的购物车系统（刷新时商品数量不断增加）。当我离开商店页面时，问题就消失了。只有当我将商品添加到购物车时，然后单击刷新，商品数量才会开始增加 - 因此表单信息仍在商店页面上被存储。

有没有办法说 jquery 来清除/重置表单 - 就像我导航离开并返回页面时发生的情况一样。

我的网站是 www.flytraptestsite.com 使用 Woocommerce (wordpress) - 谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:00:16.093

我猜想当用户浏览器在页面重新加载时额外提交表单时会出现问题。一种可能的解决方案可能是不使用`window.location.reload()`，而是手动设置位置，如下所示`window.location.href = some_url`：

成功提交表单后，您还可以通过执行 HTTP 重定向来解决此问题。这样，您稍后重新加载的页面是重定向到的页面，而不是最初接收表单提交的页面（因此可能仍保留发布数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:02:20.557

```
$('#form_id').each(function() {
    this.reset();
}); 
```

或者创建一个jquery表单重置方法：

```
jQuery.fn.reset = function () {
    $(this).each (function() {
        this.reset();
    });
}

$("#form_id").reset(); 
```

或者也许只是：

```
document.getElementById('form_id').reset(); 
```

# java - 从 Eclipse 启动 JBoss 7.1.1 失败

> ID：13026766
> 
> 赞同：4
> 
> 时间：2012-10-23T08:55:31.833
> 
> 标签：java, eclipse, jboss, jboss7.x, jboss-tools

在我的机器上使用 JBoss Tools 2.3.0 从 Eclipse Indigo SR2 内的服务器视图启动 JBoss 时，一切运行正常。

我已将包含 Eclipse 和 JBoss-7.1.1.Final 的工作文件夹的所有内容复制到另一台机器上。

现在，当我尝试启动服务器时，它会失败并显示以下消息：

> 启动 JBoss 7.1.1 运行时遇到错误。类路径引用的存档：/jboss/jboss-modules.jar 不存在。

我在运行时或服务器或项目配置中看不到任何引用 jar 的内容。正如预期的`jboss-modules.jar`那样，它位于 JBoss 服务器的根文件夹中。中没有部署`standalone.xml`。两台机器都在运行 SuSe 12。`.bashrc`并且`.profile`是空的。

服务器从命令行正常启动。

我在 Eclipse 中从头开始创建了一个新的运行时和使用此运行时的服务器，但得到了同样的错误。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-01T07:34:07.933

`modules.jar`需要运行**JBOSS 7.1 Runtime**，这是缺失的。

1.  去`Window > Preferences > Server > Runtime Environment > Default Classpath`。如果您在右侧菜单中没有看到任何类路径，您可以通过以下方式调整类路径设置 -

    1.  将服务器更改为 JBOSS 7.0 运行时。
    2.  再次将服务器更改为 JBOSS 7.1 Runtime。

再次删除并添加服务器，

同时*添加新服务器*，

1.  请检查第二个和第三个复选框
    -“侦听所有接口以允许远程 Web 连接”
    -“将您的管理端口公开为服务器的主机名”

现在一切都会运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:21:24.980

我刚刚找到了解决方案：

1.  我在服务器的启动配置中找到了对 jboss-modules.jar 的引用`User Libraries`。所有删除它的尝试都失败了。删除或重置为默认值并应用后，我启动了服务器，收到相同的错误，.jar 再次位于启动 cofig 类路径中。

2.  我实际上有一个`jboss`没有任何方面的项目，只是为了让 JBoss 文件可以从 eclipse 项目浏览器中看到。该项目已关闭。

打开后，服务器又正常启动了。

我仍然对`jboss-modules.jar`来自项目的引用如何进入启动配置类路径以及为什么它拒绝删除尝试一无所知。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-20T21:05:00.027

我知道这是一个迟到的回应，但万一有人需要解决这个问题。

如果你去 Window > Preferences > Servers > Runtime Environments > Default Classpath

你会看到'JBoss 7.0 Runtime' 没有'modules../-[* */* .jar]' 依赖，这是jboss-modules.jar 所在的地方。选择“JBoss 7.0 Runtime”而不是 JBoss 7.1 Runtime 后，与 jboss-modules.jar 相关的错误消失了，服务器启动时没有错误。

我的应用程序也开始没有错误。我正在使用 JBoss 7.1.1。

# coordinates - 自动热键鼠标坐标

> ID：13026770
> 
> 赞同：1
> 
> 时间：2012-10-23T08:55:43.140
> 
> 标签：coordinates, autohotkey

我使用自动热键记录了一大堆用户交互。当我回放脚本时，我的鼠标坐标应该点击某处，而不是点击其他地方。这些鼠标坐标是相对于活动窗口的，因此它们不应该在错误的位置单击。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T14:32:09.507

您是否尝试过设置不同的 Mouse [CoordMode](http://www.autohotkey.com/docs/commands/CoordMode.htm)？在脚本顶部尝试以下各项，看看哪些有效：

```
CoordMode, Mouse, Relative  ;sets coordinates based upon active window

CoordMode, Mouse, Screen    ;sets coordinates based upon screen resolution 
```

# javascript - 使用 CSS 或 JS 在 textarea 中的段落缩进

> ID：13026777
> 
> 赞同：1
> 
> 时间：2012-10-23T08:56:02.523
> 
> 标签：javascript, css, textarea

您有一些带有文本区域的网站，例如我正在使用 - [http://writer.bighugelabs.com](http://writer.bighugelabs.com)，它是一个非常简洁的工具来编写文本，但我有一个问题 - textarea 中的段落彼此不缩进。

那么，使用 StyleBot for Chrome 作为示例访问本网站时，是否可以覆盖一些 CSS 属性以获取段落缩进，以及哪些属性？如果不可能，那么是否可以使用可以在页面上应用自定义 JS 的类似扩展名？

请指教，我已经搜索过该主题，但没有找到相关信息。我试图覆盖 p 边距和填充属性，但没有成功，因为我理解 textarea 只有一个原始文本。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:22:57.910

由于页面上的文本区域实际上是 HTML `textarea`，因此您无法在 CSS 中设置其中的段落样式。那里没有段落作为元素，只有纯文本，可能包含换行符。具有嵌入式编辑器实用程序的现代页面倾向于使用可编辑`div`元素而不是`textarea`元素，这是相当不灵活的。

您可以使用 JavaScript 代码模拟段落缩进，该代码在每个换行符后插入一个或两个不间断空格。

# ios5 - 如何使用 gyroData 在 iOS 中旋转图像？

> ID：13026778
> 
> 赞同：0
> 
> 时间：2012-10-23T08:56:10.647
> 
> 标签：ios5

使用 coreMotion，我计算了 gyroData。现在我想根据 iPhone 方向旋转图像。请告诉我如何旋转图像？

# javascript - KML 图层的 Z 索引

> ID：13026779
> 
> 赞同：1
> 
> 时间：2012-10-23T08:56:13.627
> 
> 标签：javascript, google-maps-api-3

我使用谷歌地图 v3。我有一张地图，里面有 KML 图层。我的问题是大 KML 区域放在小 KML 区域之上，因此无法单击小 KML 区域查看其信息。是否可以仅从其 url 确定 KML 层是否比其他 KML 更小或更大？我该如何解决这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T21:34:21.797

另一个记忆帮助我解决了我遇到的这个问题。

```
var layer1= new google.maps.KmlLayer({
    url: 'layer1.kml',
});
var layer2= new google.maps.KmlLayer({
    url: 'layer2.kml',
    pane: "floatPane",
    preserveViewport: true
}); 
```

您可以尝试添加

```
 pane: "floatPane",
        preserveViewport: true 
```

# dictionary - 以编程方式使用俄语英语词典

> ID：13026780
> 
> 赞同：0
> 
> 时间：2012-10-23T08:56:14.280
> 
> 标签：dictionary, translation

如果有人可以帮助我，我将不胜感激。有没有办法使用俄语到英语翻译。（每个单词的单词，而不是句子）我听说过并尝试过 google translate API，但是我需要该程序来处理大量单词并且不依赖于 Internet 连接。也许，一些独立的字典。我找到了这本字典：[http](http://sdict.com/en/view.php?file=rus_eng_full2.dct) ://sdict.com/en/view.php?file= rus_eng_full2.dct 并尝试应用 dictconv linux 实用程序转换为纯文本，所以我可以使用它，但它会崩溃并编译它从源头不起作用。也许，有人知道一种读取 .dct 格式的方法，并有一个开源解决方案或链接到它。我还没有找到。如果有可靠的基于 Internet 的解决方案，我也想听听。提前谢谢你，世界。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:13:34.923

如果您可以使用 python 从这里下载 sdictviewer-lib [https://github.com/jmhobbs/sdictviewer-lib](https://github.com/jmhobbs/sdictviewer-lib)

并使用以下脚本阅读

```
import sdictviewer.formats.dct.sdict as sdict
import sdictviewer.dictutil

dictionary = sdict.SDictionary( 'rus-eng.dct' )
dictionary.load()
dictionary.get_word_list_iter('russianword') 
```

# windows-runtime - WinRT 中的 SQLCipher

> ID：13026781
> 
> 赞同：0
> 
> 时间：2012-10-23T08:56:19.387
> 
> 标签：windows-runtime, sqlcipher

SQLite 可用于 WinRT。是否可以在 WinRT 应用程序[中将 SQLCipher与 SQLite 一起使用？](http://sqlcipher.net/)如果没有，还有其他方法可以加密 SQLite 数据库中的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-02T21:01:41.817

它最近在 windows phone 8 和 windows RT 平台上发布（虽然只像商业版，链接如下）。

[sqlcipher-for-windows-phone-8-and-windows-runtim](http://sqlcipher.net/blog/2014/1/13/introducing-sqlcipher-for-windows-phone-8-and-windows-runtim.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T14:02:53.427

一般来说，我们的目标是让 SQLCipher 在尽可能广泛的平台上工作，因此我们肯定有兴趣支持它。但是，SQLite 最近才在 3.7.13 中添加了对 WinRT 的上游支持，我们还没有足够的时间来研究让 SQLCipher 在那里工作所涉及的内容。请留意未来的更新，或者如果您或您的公司对此有资助的商业需求，请通过 support@zetetic.net 与我们联系。

# arrays - 访问 csv 文件中的条目以进行计算 F#

> ID：13026783
> 
> 赞同：4
> 
> 时间：2012-10-23T08:56:25.363
> 
> 标签：arrays, math, csv, f#

如何访问 csv 文件中的条目以便在 F# 中对它们执行计算？

我可以以通常的方式将 csv 文件读入内存，但是一旦我被卡住了。

理想情况下，我会从列创建数组，然后使用 array.map2 执行计算。

所以我的数组 1 是一些网站使用指标，第 2 列是达到第 1 列中的值的用户数（比如对网站进行了 6 次访问），我们可以通过将数组中的每个条目相乘来计算平均访问次数第 1 列，由第 2 列组成的数组除以第 2 列的 array.sum。

我已经在 F# 片段[http://fssnip.net/3T](http://fssnip.net/3T)上尝试了 csv to Array 代码，但它为我生成了一系列字符串元组的数组。

任何人都可以提出更好的方法吗？

编辑：一些示例输入将与此类似：-

```
 Visits Count
     1  8
     2  9
     3  5
     4  3
     5  2
     6  1
     7  1
    10  1 
```

输出将返回数据的平均值，在本例中为 2.87（保留 2 个小数位）。

编辑 2：我发现的从 CSV 到数组代码的当前输出是这样的

```
 val it : seq<BookWindow> =
            seq [{Visits = 1;
                  Count = 8;}; {Visits = 2;
                           Count = 9;}; {Visits = 3;
                                  Count = 5;}; {Visits = 4;
                                              Count = 3;}; ...] 
```

这对计算不是那么有用......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T13:31:16.213

值得补充的是，使用 F# 3.0 类型提供程序，访问 CSV 文件变得更加简单。类型提供者可以在编译期间静态查看 CSV 数据并生成表示列的类型（如`BookWindow`），然后推断各个列的数据类型。

例如，请查看[新版 Try F# 网站](http://www.tryfsharp.org/Learn/financial-computing#using-yahoo)上*“财务建模”下的**“使用 Yahoo Finance Type Provider”*一文。您可以编写如下内容：

 *```
#r "Samples.Csv.dll"

// Type provider that generates schema based on CSV file located online
[<Literal>]
let url = "http://ichart.finance.yahoo.com/table.csv?s=MSFT"
let msft = new Samples.FSharp.CsvProvider.MiniCsv<url>()

// The provider automatically infers the structure and we
// can access columns as properties of the 'row' object
for row in msft.Data do
  printfn "%A %f" row.Date row.Close 
```

据我所知，CSV 提供程序的最新公开版本位于[F# 3.0 Sample Pack](http://fsharp3sample.codeplex.com/)中。我有一个可能更好的版本，它还可以在[我的 GitHub 存储库](https://github.com/tpetricek/Documents/tree/master/Samples)上处理类型推断。

将数据存储在内存中后，您可以使用标准 F# 函数进行计算。例如，要计算平均收盘价（你可以在 Try F# 上尝试），你可以这样写：

```
 Seq.average [ for row in msft.Data -> row.Close ] 
```

这会生成一个仅包含收盘价的列表，然后在数字上调用标准平均函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-23T10:49:25.367

我所做的是创建一个记录类型，以便稍后可以使用强类型操作，然后`seq<myRecord>`像下面的代码一样快速将文本文件读入。如果我打算稍后重用它，我通常将方法移动到记录中`static member fromFile`。如果您像往常一样使用大型文本文件，则 seq 非常有用，这种方式使用的内存非常少。

*编辑*这更干净：

```
open System.IO

type myRecord = { 
    Visits: int
    Count: int 
} with
    static member fromFile file = 
        file
        |> File.ReadLines       // expose as seq<string>
        |> Seq.skip 1           // skip headers
        |> Seq.map (fun s-> s.Split '\t') // split each line into array
        |> Seq.map (fun a -> {Visits=int a.[0]; Count=int a.[1]}) // and create record

myRecord.fromFile @"D:\data.csv"
|> Seq.fold (fun (tv, tc) r -> (tv+r.Visits*r.Count, tc+r.Count))(0,0)
|> (fun t -> float (fst t) / float (snd t))
//val mean : float = 2.866666667 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T10:13:56.790

您可能使事情过于复杂，这不是最干净的解决方案，但是您仍然可以使用现有的东西。如果这提供了一种进行计算的好方法，则将该 BookWindow 类型映射到单独的数组中。

```
 type BookWindow = { Visits: int
                     Count: int }
 // Sample data
 let list = [|{Visits = 1; Count = 8;}; {Visits = 2; Count = 9;}; {Visits = 3; Count = 5;}|]

 let visitcol = list |> Array.map (fun r -> r.Visits)
 let countcol = list |> Array.map (fun r -> r.Count)
 Array.map2( fun v c -> v * c) visitcol countcol 
```*

# android - takePicture() 总是冻结几秒钟

> ID：13026785
> 
> 赞同：1
> 
> 时间：2012-10-23T08:56:32.047
> 
> 标签：android, android-camera

当我按下我的快门按钮时，我遇到了 2 件奇怪的事情`CameraActivity`

1.  在设备 2.3 和 4.0（Galaxy Ace II、Nexus One 和 Galaxy Nexus）上，它将冻结大约 2 秒，然后继续运行`nextActivity`。

2.  只有 Galaxy Ace 2.3.6，它会在冻结期间给我一个像下图这样的乱码，但它可以在稍后给我正确的图像`nextActivity`。

![乱码像素](../Images/9bff34c0b1b1b699f80f022cb7349630.png)

起初我认为我的方法可能有问题或耗时`PicutureCallback`，但看起来没问题？而且我不明白为什么这个乱码只会出现在 Galaxy Ace 上。

那么会有更好的方法来处理它`PictureCallback`以使其更快吗？

没有错误日志，所以我只是把我的相关代码：

```
// I call the takePicture in my button listener.
camera.takePicture(null, null, mPicture);

// here's the picture callback
private PictureCallback mPicture = new PictureCallback() {

    @Override
    public void onPictureTaken(byte[] data, Camera camera) {

        new ShutterHandler(data).execute();
    }

    class ShutterHandler extends AsyncTask<Void, Void, Void> {

        Bitmap bm;
        String timeStamp;
        String filename;
        Intent nextIntent = new Intent(CameraActivity.this, nextActivity.class);

        // a tricky way to pass data into the AsyncTask
        public ShutterHandler(byte[] data) {
            bm = BitmapFactory.decodeByteArray(data, 0, data.length);

        }

        @Override
        protected Void doInBackground(Void... params) {
            // simply generate a time stamp as filename
            timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
            filename = timeStamp + ".jpg";
            Uri path;
            try {

                // save file to app's private folder
                FileOutputStream fos = openFileOutput(filename, Context.MODE_PRIVATE);

                bm.compress(Bitmap.CompressFormat.JPEG, 100, fos);              
                // retrieve Uri from the file
                path = Uri.fromFile(getFileStreamPath(filename));

                Log.d("CameraActivity", "file saved to: " + path);
                fos.flush();
                fos.close();

                // launch ShowMarkersActivity
                String pathString = path.getPath();
                nextIntent.putExtra("IMG", pathString);
                nextIntent.putExtra("FileName", filename);
                nextIntent.putExtra("FLAG", true);

            } catch (FileNotFoundException e) {
                Log.d("CameraActivity", "File not found: " + e.getMessage());
            } catch (IOException e) {
                Log.d("CameraActivity", "Error accessing file: " + e.getMessage());
            }
            return null;                        
        }
        protected void onPostExecute(Void v) {
            CameraActivity.this.startActivity(nextIntent);
            finish();
        }

    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T04:30:50.083

如果你要求相机图片回调返回jpeg格式，它会明显更快。在大多数可用设备上，图片回调仍然很慢。

# delphi - 从列表中删除重复项

> ID：13026787
> 
> 赞同：2
> 
> 时间：2012-10-23T08:56:40.620
> 
> 标签：delphi, list, duplicates, delphi-xe2, tlist

我编写了这个函数来从 TList 后代中删除重复项，现在我想知道这是否会在某些条件下给我带来问题，以及它在性能方面的表现如何。

它似乎适用于对象指针

```
function TListClass.RemoveDups: integer;
var
  total,i,j:integer;
begin
  total:=0;
  i := 0;
  while i < count do begin
    j := i+1;
    while j < count do begin
      if items[i]=items[j] then begin
       remove(items[j]);
       inc(total);
      end
      else
        inc(j);
    end;
    inc(i);
  end;
  result:=total;
end; 
```

**更新：** 这工作更快吗？

```
function TDrawObjectList.RemoveDups: integer;
var
  total,i,j:integer;
  templist:TLIST;
begin
  templist:=TList.Create;
  total:=0;
  i := 0;
  while i < count do
    if templist.IndexOf(items[i])=-1 then begin
      templist.add(i);
      inc(i);
    end else begin
      remove(items[i]);
      inc(total);
    end;
  result:=total;
  templist.Free;
end; 
```

你确实需要另一个列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T15:11:37.113

只是假设：

**接口**

如果您在 TInterfaceList 中具有*仅*在该列表中的接口对象，则可以检查对象的引用计数。只需向后循环列表并删除 refcount > 1 的所有对象。

**自定义计数器**

如果您可以编辑这些对象，您可以在没有接口的情况下执行相同的操作。当对象被添加到列表时增加一个计数器，当它们被删除时减少它。

当然，这仅在您实际上可以为这些对象添加计数器时才有效，但是您的问题中的界限并不完全清楚，所以我不知道这是否允许。

优点是您不需要寻找其他项目，插入时不需要，删除重复项时不需要。在排序列表中查找重复项可能会更快（如评论中所述），但根本不必搜索甚至会击败最快的查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:11:07.660

如前所述，解决方案是 O(N^2)，这使得它在大量项目（1000 秒）上非常慢，但只要计数保持低，它就是最好的选择，因为它简单且易于实施。Where's pre-sorted 和其他解决方案需要更多的代码并且更容易出现实现错误。

这可能是相同的代码以不同的、更紧凑的形式编写的。它遍历列表的所有元素，并为每个元素删除当前元素右侧的重复项。只要在反向循环中完成，删除是安全的。

```
function TListClass.RemoveDups: Integer;
var
  I, K: Integer;
begin
  Result := 0;
  for I := 0 to Count - 1 do //Compare to everything on the right
  for K := Count - 1 downto I+1 do //Reverse loop allows to Remove items safely
    if Items[K] = Items[I] then
    begin
      Remove(Items[K]);
      Inc(Result);
    end;
end; 
```

如果您真的最终得到 5000 个项目列表，我建议您稍后再进行优化。此外，如上所述，如果您在将项目添加到列表时检查重复项，则可以保存：

*   检查重复项会及时分发，因此对用户来说不会那么明显
*   如果发现骗子，你可以希望早点退出

# php - 通过 ajax wile 打开填充组合框

> ID：13026789
> 
> 赞同：-2
> 
> 时间：2012-10-23T08:56:42.550
> 
> 标签：php, html, ajax

我有一个包含许多数据行的表。现在我必须向每一行显示详细信息。我从网络服务获取详细信息，因此在创建表之前我无法获取它们。

我的想法是我显示一个空的组合框并通过单击组合框箭头填充它（JS，AJAX）。这可能吗 ？

再见乔吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:42:05.273

```
in your response create
<select>
<option>value1</option>
<option>value2</option>
<option>value3</option>
</select> 
```

你必须像这样发送你的回复然后它会为你服务

# iphone - 在滚动减速时处理 UITableView 中的触摸

> ID：13026792
> 
> 赞同：1
> 
> 时间：2012-10-23T08:56:49.340
> 
> 标签：iphone, ios, uitableview, uipangesturerecognizer

我有一个`UITableView`里面另一个`UITableview`。第一个是水平放置的，而第二个是常规的`UITableView`。

水平 tableview 是一个自定义类，我在其中重载了 'gestureRecognizerShouldBegin:' 方法，这样：

```
- (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)panGestureRecognizer {
    CGPoint translation = [panGestureRecognizer translationInView:someView];
    return fabs(translation.y) > fabs(translation.x);
} 
```

它主要检测用户是否在水平 tableview 上执行了水平或垂直平移运动。如果是垂直的，主tableview滚动，如果它是水平的，水平的tableview滚动。

我面临的问题如下：

1.  我在水平 tableview 中执行平移触摸。
2.  翻译变量的“x”和“y”值反映了用户的触摸。
3.  水平 tableview 开始滚动。
4.  滚动正在减速。
5.  当滚动正在减速时，我执行了另一个平移触摸。
6.  无论我移动多少手指，翻译变量的“x”和“y”值始终为 0。
7.  我竖起手指，然后在水平表格视图（已停止滚动）中执行另一个水平平移触摸。
8.  translateInView 中返回的 CGPoint 的 'x' 和 'y' 值再次正确，滚动运动开始。

因此，看起来“gestureRecognizerShouldBegin:”方法无法检测到用户在滚动移动时执行的移动......

我很感激你能给我的任何提示。

谢谢！

# asp.net - ASP.Net 中的会话超时设置

> ID：13026793
> 
> 赞同：8
> 
> 时间：2012-10-23T08:56:50.977
> 
> 标签：asp.net, iis-7, iis-6, session-state, session-timeout

我在 web.config 文件中将会话超时设置为 9 小时，如下所示：

```
“&lt;sessionState mode="InProc" timeout="540" /> 
```

但用户经常抱怨他们在不到 9 小时的不活动中面临超时，并且超时后的时间间隔也各不相同。

我想知道会话超时是否取决于 IIS 中的以下任何设置：

1.  会话时间设置
2.  应用程序池的空闲超时设置
3.  回收设置。

请指教。另外，如何检查 IIS 7.0 中的会话超时设置？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T09:00:07.540

ApplicationPool 回收时会话将丢失。这是您提到的 IIS 设置之一。仅在 web.config 中设置超时是不够的。您需要调整 IIS 中的设置。

这是我在研究相同问题时找到的[链接。](http://petesbloggerama.blogspot.de/2007/10/losing-aspnet-sessions-why-application.html)

此外，这个问题非常有用： [Losing Session State](https://stackoverflow.com/questions/3515947/losing-session-state)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:01:57.113

如果您使用 Forms 身份验证，则应确保您的 FormAuthentication Cookie 设置为与您的会话同时到期。

如果不确保您的 IIS 没有被回收。（在您的 Global.asax 中放置一个记录器，与您的用户投诉相比，验证应用程序结束事件。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:31:45.907

在 Web 配置中设置会话超时是不够的。如果托管站点的服务器在 IIS 设置中设置的超时值较少，则根据服务器会话超时值，您的会话超时。

此外，如果您从服务器目录中删除任何文件夹，这也可能导致您的 AppPool 意外回收。

所以请检查服务器会话超时值，如果它小于然后要求您的主机根据您的要求增加它。

# perl - perl 获取一行中第一个匹配的单词

> ID：13026798
> 
> 赞同：0
> 
> 时间：2012-10-23T08:57:02.990
> 
> 标签：perl

抱歉，我是 perl 新手，找不到类似的答案。

.html 文件

```
<div class="user_rating">
.
.
<span class="genre">
.
.
.
<span class="genre">
.
.
.
<span class="genre">
.
.
.
<span class="genre"> 
```

perl 文件

```
$content =~ /<div class="user_rating">(.*)<span class="genre">/gs;
$empty = $1; 
```

这个 $empty 变量包含从`<div class="user_rating">`到 last 的信息`<span class="genre">`。

但我只想要第一个的`<div class="user_rating">`信息`<span class="genre">`。我应该如何修改我的代码？我知道这是一个正则表达式问题。

任何帮助请...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T08:59:04.143

修改你的正则表达式，因为`.*`是贪婪的。

```
$content =~ /<div class="user_rating">(.*?)(<span class="genre">){1}/gs; 
```

# jquery - 如何在图像之间切换

> ID：13026799
> 
> 赞同：0
> 
> 时间：2012-10-23T08:57:04.277
> 
> 标签：jquery

我目前在左侧有一个标题和一个图像![单击文本之前](../Images/3a34935b5c1732d1e6c93a93d9ed7fce.png)

当用户单击此链接时，会出现说明

![出现文字](../Images/8b517565debc838afba947e448cd78e5.png)

我这样做使用：

```
<script type="text/javascript">
    $(document).ready(function () {
        $(".hidden").hide();
        $("p.show").click(function () {
            $(this).next(".hidden").toggle()
        });
        $("p.show").hover().css('cursor', 'pointer');
    });
</script> 
```

但是，我希望在文本出现时更改图像。我尝试使用 replaceWith 但这没有用。我还是 jQuery 的新手，所以任何建议都很棒。我不需要答案，只需要一个关于什么是最好的指针。

```
<p style="color:Black;float:left;padding-top:0px;" class="show">
<img alt="+" src="resources/images/plussign.jpg" style="float:left; margin-right:10px;"/>What is EFM?<br /></p>
<div class="hidden">
  <p style="margin-left:20px;">
    <br />EFM, also known as Ethernet in the First Mile, is an Ethernet leased line
    service that runs over copper rather than the fibre optic cable used for
    other Ethernet services. The copper is provided in bonded pairs, making
    the connection extremely robust. If one copper pair fails, the others remain
    live, meaning you don’t suffer any downtime and can continue working with
    reduced bandwidth until normal service is restored.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:00:17.967

做这个，

```
<img id="myimg" alt="+" src="resources/images/plussign.jpg" style="float:left; margin-right:10px;" />

$('#mying').attr('src','nextimage'); 
```

# pdf - 在 Lotus Notes 中将 PDF OLE 对象转换回文件（附件）？

> ID：13026800
> 
> 赞同：1
> 
> 时间：2012-10-23T08:57:10.547
> 
> 标签：pdf, apache-poi, lotus-notes, xpages, ole

我有一个数据库，其中包含大量作为 OLE 对象嵌入到 Notes RichText 字段中的 PDF 文档。这些与 XPage 不兼容，因此我需要将 OLE 对象转换为文件（附件）。我怎样才能以自动方式做到这一点（我知道它必须在 Notes 客户端中运行（必须吗？） - 或者是否有一种 POI 方法来提取它们？

**澄清**
我可以提取 blob（如果需要，可以将其提取到内存中），但是将其写入磁盘不会创建 PDF 文件，因为该 blob 是一个 OLE 容器。所以我看到了 2 条可能的路径：

*   激活 OLE 对象并使用其中的方法
*   阅读 blob 并获取一些提取 PDF 部分的内容（可能是[Apache POI](http://poi.apache.org/)）

但我还没有接触过这些方法中的任何一种，我想知道一些建议是否可以节省我数小时的测试时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:08:25.750

dxl工具可以吗？我已经使用 dxl 导出器从文档中提取嵌入的图像，也许这对 ole 对象也是可行的？

[我在 openntf 上使用了lotusscript](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=LotusScript%20Gold%20Collection) gold collection 项目的 EmbeddedImage 对象的一个​​稍微改变的版本

该库包含一个对象 Embeddedimagelist，它在 DXL 中搜索图片标签并尝试解析其内容。也许这也适用于嵌入式 ole 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T06:50:47.947

我认为搜索 %PDF 然后将所有内容保存为文件应该是五个 PDF。从理论上讲，OLE 文件中可能有很多东西，但在大多数情况下，您会得到一个简单地以 OLE 标头（或其他名称）作为前缀的文件。

我曾在一个场合使用过这种方法（虽然不是用于 PDF），它似乎工作正常。

我想这就是 jjtbsomhorst 所说的 openntf 方法是基于 :-)

# android - 在Android中模拟电话中的点击动作

> ID：13026803
> 
> 赞同：4
> 
> 时间：2012-10-23T08:57:22.627
> 
> 标签：android

我是一个新开发的android应用程序来解决以下问题。

有时我想通过电话获取一些信息，这里是过程。

1.  拨打号码，我会听到提示音
2.  按 1 选择语言

我想知道是否有库可以用来模拟通话过程中的点击动作，所以我可以输入电话号码，然后应用程序会自动为我选择语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:04:22.177

`View.performClick()`确实存在，但真正的问题是您无法与该活动进行交互（据我所知）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:33:08.583

可能以下链接会对您有所帮助：

[http://www.androidpolice.com/2010/05/10/how-to-add-hard-wait-and-soft-2-3-sec-pauses-to-your-android-contacts/](http://www.androidpolice.com/2010/05/10/how-to-add-hard-wait-and-soft-2-3-sec-pauses-to-your-android-contacts/)

# zend-framework - 使用 PHP 的单例模式

> ID：13026804
> 
> 赞同：0
> 
> 时间：2012-10-23T08:57:23.943
> 
> 标签：zend-framework, singleton

我正在尝试创建一个动态导航类。

```
class myApp_Helper_Breadcrum{
    protected $navigationArray=array();
    private static $_instance = null;
    public static function getInstance()
    {
         if (!isset(self::$_instance)) {
            self::$_instance = new self();
        }
        return self::$_instance;
    }
    private function __construct() {
         $this->navigationArray = array();
    }

    public  function popin($popInElement){
        array_push($this->navigationArray,$popInElement);
    }

    public  function displayLinks()
    {
          //print array
    }
} 
```

在boostrap中我做了以下

```
$nlinks=myApp_Helper_Breadcrum::getInstance();
Zend_Registry::set('nlinks',$nlinks); 
```

现在在我的控制器中，我调用如下

```
$nlinks= Zend_Registry::get('nlinks');
$nlinks->popin('Home');
$nlinks->displayLinks(); 
```

问题是，即使这个类是单例的，构造函数也会被一次又一次地调用，这使得我的数组被初始化。我想要实现的是在浏览网站时继续推送导航数组中的项目。

知道为什么**ZF**会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:11:20.930

PHP 不像 Java 那样运行，你有一个 JVM 来维护你的类的状态。在 Java 中，您可以让单例的行为与您描述的完全一样，但在 PHP 中，所有类都会随着对 Web 服务器的每次后续调用而刷新。因此，您的单例将在对该服务器的调用期间保持原位，但是一旦发送响应，您就会在下一次调用时重新开始。

如果您想通过连续调用来保持状态，您需要使用 $_SESSION 来跟踪您的状态。

编辑：我上面的回答一般涉及 PHP，而不是 Zend 框架。请参阅下面的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T08:16:46.797

即使这是旧的，我想加我的 2 美分。

Zend**不会**创建一个在多个请求中持续存在的单例。无论 ZF 文档的解释如何，在每次请求时，都会重新初始化整个堆栈。

这就是您的问题所在。由于对每个请求都进行了引导，因此每个请求还会重新初始化您的辅助方法。据我所知，ZF 1.x 中的助手**不能**是单例。

我认为这是实现您希望它成为的唯一方法是使用会话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:01:46.717

我遇到了完全相同的问题。问题是您的类的持久性在请求范围内。使用zend，您甚至可以对页面加载有多个请求。

PHP 是一种无共享架构；每个请求都从一个新进程开始，在请求结束时，所有请求都被丢弃。跨请求持久化根本不可能发生——除非你自己做缓存。您可以序列化对象并恢复它们——但实际上，在大多数情况下，您不会从中获得什么好处（并且经常会遇到各种问题，尤其是在资源句柄方面）。

您可能想要使用 Zend_cache 来实现持久性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:06:14.190

尝试如下定义您的组件：

```
class MyApp_Helper_Breadcrum
{
    private static $_instance = null; // use private here

    public static function getInstance()
    {
        if (self::$_instance === null) { // use strictly equal to null
            self::$_instance = new self();
        }

        return self::$_instance;
    }

    private function __construct() // use private here
    {
         // ...
    }

    // ...
} 
```

# twitter-bootstrap - 我可以在 Twitter 的 Bootstrap Popover 中添加“Like”按钮吗？

> ID：13026815
> 
> 赞同：7
> 
> 时间：2012-10-23T08:58:04.407
> 
> 标签：twitter-bootstrap, popover

我有一个按钮，单击时会启动一个弹出窗口（就像这里的现场演示一样：http: [//twitter.github.com/bootstrap/javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)）

现在我想在弹出框的内容字段中添加一个简单的点赞按钮。那可能吗？目前，弹出框仅将链接显示为文本“ [http://test.com](http://test.com) ”

目前：

```
<a href="#" id="example" rel="popover" data-content="http://test.com" data-original-title="Like"><img src="img/specialbutton.png"></a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:21:48.440

我不完全确定您对“赞”按钮的含义。为了在弹出框上放置一个带有锚文本“like”的按钮和一个指向“http://test.com”的链接：

`<a>`1 从您的-tag中删除所有 data-xxx 引用

```
<a href="#" id="example" rel="popover"><img src="img/specialbutton.png"></a> 
```

2 像这样调用弹出框

```
$('#example').popover({
  placement: 'right',
  title: 'Like this website?',
  html: true,
  content: '<button class="btn"><a href="http://test.com">Like</a></button>'
}); 
```

您可以在 中放置多种类型的 HTML 标记`content`，也许您想要一组用于各种社交媒体的按钮？如果你想添加一个 facebook 按钮，你必须遵循这方面的[指导方针](http://developers.facebook.com/docs/reference/plugins/like/)，并在内容中插入从那里生成的代码

# jquery - Jquery Dialog 对话框中 dialogClass 的最大数量

> ID：13026821
> 
> 赞同：0
> 
> 时间：2012-10-23T08:58:41.133
> 
> 标签：jquery, css

`Jquery Dialog`我在我的 xhtml 页面中使用框。由于有 2 个`Jquery Dialog`盒子，每个盒子的外观和感觉都不同，我不得不使用`addClass`属性，这已经在[这篇文章](https://stackoverflow.com/questions/12956504/dialogclass-not-applying-the-given-style-class/12956620#comment17583423_12956620)中讨论过了。现在我必须覆盖许多类，比如`ui-dialog, ui-corner-all, ui-widget-header`etc。所以，我继续使用`addClass`. 代码如下，

```
$('.ui-widget-content').addClass('new-ui-widget-content');
$('.ui-widget').addClass('new-ui-widget');
$('.ui-dialog .ui-dialog-titlebar').addClass('new-ui-dialog new-ui-dialog-titlebar');
$('.ui-widget-header').addClass('new-ui-widget-header');
 $('.ui-helper-clearfix').addClass('new-ui-helper-clearfix');
 ....

$j("#dialog").dialog({
dialogClass: 'new-ui-widget-content',
dialogClass: 'new-ui-widget',
dialogClass: 'new-ui-dialog new-ui-dialog-titlebar',
dialogClass: 'new-ui-widget-header',
dialogClass: 'new-ui-helper-clearfix',
.... 
```

但是，我注意到只有 1 个类被覆盖。我的意思是说，虽然我已经覆盖了很多类，但只是`new-ui-widget-content`被覆盖（放在第一位）。

我也尝试过以下方式。但它给出了语法错误。

```
 $j("#dialog").dialog({
        dialogClass: 'new-ui-widget-content','new-ui-widget',...... 
```

可以覆盖多个类`addClass`吗？

如果是这样，它是如何做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T12:04:41.860

你真的应该从 CSS 中覆盖不需要的样式，而不是通过 JavaScript 交换多个 CSS 类。您所需要的只是第二个对话框的一些标识符。如果`#dialog`是第一个，我猜第二个被命名为 something along `#dialog2`。

将第二个样式表文件添加到 HTML 页面或附加到原始`jquery-ui-rev.css`. 您的其他样式应该反映有问题的选择器，但前面有 a `#dialog2`，这增加了特异性并为名为 的包装器内的任何此类类设置特殊格式`#dialog2`。

由于我找不到`jquery-ui-rev.css`，我将[根据`jquery.ui.dialog.css`](https://github.com/jquery/jquery-ui/blob/master/themes/base/jquery.ui.dialog.css).

如果你想覆盖 selector 的某些特定属性`.ui-dialog`，它是原始的：

```
.ui-dialog { position: absolute; padding: .2em; width: 300px; overflow: hidden; } 
```

…您可以通过设置另一个选择器来做到这一点，同时只重新指定适当的属性：

```
#dialog2 .ui-dialog {
    width: 500px;
} 
```

# java - 如何将元素的内部文本内容映射到 Class 属性？

> ID：13026825
> 
> 赞同：2
> 
> 时间：2012-10-23T08:58:42.867
> 
> 标签：java, xml, jaxb, java-6

假设我分别有以下 XML 和 Java 代码：

```
<foo>
My text content
</foo> 
```

```
@XmlRootElement( name="foo" )
public static class Foo
{
  // This is where I want to see "My text content" stored
  private String text;

  // getters and setters
} 
```

当我尝试编组 XML 时，我的`Foo`实例没有`foo`使用给定 XML 中元素的内部文本中的值填充其文本属性。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:49:49.813

您可以使用`@XmlValue`注释。

```
@XmlValue 
public String getText() {
    return text;
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html](http://blog.bdoughan.com/2011/06/jaxb-and-complex-types-with-simple.html)

# wpf - 加载视图后执行命令 WPF MVVM

> ID：13026826
> 
> 赞同：22
> 
> 时间：2012-10-23T08:58:44.717
> 
> 标签：wpf, mvvm, triggers, command

我有一个基于 WPF 和 MVVM 的项目。我的项目基于一个包含内容控件的向导，该控件显示我的视图（用户控件）我想在视图完全加载后执行命令，我希望用户在命令执行后立即看到视图 UI。

我尝试使用：

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
        <i:InvokeCommandAction Command="{Binding StartProgressCommand}"/>
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

但是该命令是在我看到视图 UI 之前执行的，这不是我想要的。

有谁知道我应该如何实现它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-23T12:21:33.720

您可以为此使用 Dispatcher 并将优先级设置为 ApplicationIdle 以便在一切完成后执行

```
 Application.Current.Dispatcher.Invoke(
            DispatcherPriority.ApplicationIdle,
            new Action(() =>
            {
               StartProgressCommand.Invoke(args);

            })); 
```

有关调度程序的更多信息[http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcherpriority.aspx)

干杯。圣。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-23T12:35:17.250

这是因为即使从技术上讲视图已加载（即：所有组件都已在内存中准备好），您的应用程序还没有空闲，因此 UI 还没有刷新。

在事件上使用交互触发器设置命令`Loaded`已经很好了，因为没有更好的事件可以附加到。
现在要真正等到 UI 显示出来，在你的`StartProgress()`（我在这里假设这是`StartProgressCommand`指向的方法的名称）中执行此操作：

```
public void StartProgress()
{
    new DispatcherTimer(//It will not wait after the application is idle.
                       TimeSpan.Zero,
                       //It will wait until the application is idle
                       DispatcherPriority.ApplicationIdle, 
                       //It will call this when the app is idle
                       dispatcherTimer_Tick, 
                       //On the UI thread
                       Application.Current.Dispatcher); 
}

private static void dispatcherTimer_Tick(object sender, EventArgs e)
{
    //Now the UI is really shown, do your computations
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-25T04:34:54.227

另一种方法：

在您的用户控件 XAML 上定义它`xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"`并`xmlns:mi="http://schemas.microsoft.com/expression/2010/interactions"`在您的项目中添加 Microsoft.Expression.Interactions 程序集。在触发器上使用 CallMethodAction，如下所示：

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="Loaded">
        <mi:CallMethodAction TargetObject="{Binding}" MethodName="StartProgressCommand"/>
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

将触发器放在用户控件的根元素内，例如：grid。并将您的 ViewModel 类中的 StartProgressCommand 从命令更改为普通的旧常规方法，例如：

```
public void StartProgressCommand()
{
  /* put your program logic here*/
} 
```

每次您的用户控件呈现时，它都会准确地运行一次该方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T11:46:29.807

我们使用计时器解决方案——我也对此非常怀疑，但它似乎工作正常。

```
public static class DispatcherExtensions
{
    private static Dictionary<string, DispatcherTimer> timers =
        new Dictionary<string, DispatcherTimer>();
    private static readonly object syncRoot = new object();

    public static void DelayInvoke(this Dispatcher dispatcher, string namedInvocation,
        Action action, TimeSpan delay,
        DispatcherPriority priority = DispatcherPriority.Normal)
    {
        lock (syncRoot)
        {
            RemoveTimer(namedInvocation);
            var timer = new DispatcherTimer(delay, priority, (s, e) =>
                {
                    RemoveTimer(namedInvocation);
                    action();
                }, dispatcher);
            timer.Start();
            timers.Add(namedInvocation, timer);
        }
    }

    public static void CancelNamedInvocation(this Dispatcher dispatcher, string namedInvocation)
    {
        lock (syncRoot)
        {
            RemoveTimer(namedInvocation);
        }
    }

    private static void RemoveTimer(string namedInvocation)
    {
        if (!timers.ContainsKey(namedInvocation)) return;
        timers[namedInvocation].Stop();
        timers.Remove(namedInvocation);
    } 

} 
```

然后我们调用 using

```
Dispatcher.CurrentDispatcher.DelayInvoke("InitSomething",()=> {
    DoSomething();
},TimeSpan.FromSeconds(1)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-23T09:27:03.317

您可以检查视图的 IsLoaded 属性，当视图处于加载状态时返回 false，当视图完全加载时，此属性变为 true。

谢谢， 拉吉尼坎特

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T09:33:24.813

您是否尝试绑定到[ContentRendered](http://msdn.microsoft.com/en-US/library/system.windows.window.contentrendered%28v=vs.100%29.aspx)事件？它会在加载事件之后发生，但我不确定这是否是 UI 线程已经完成绘制窗口的保证。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-23T11:05:29.637

你可以在“CommandExecute”方法的第一行写一个“Thread.Sleep(10000)”。使用相同的加载触发器。

如果您不想使用 Thread.Sleep，那么您可以选择“DispatcherTimer”。在您的命令执行方法中启动一个计时器并将所有代码转移到计时器滴答事件。将您的计时器间隔设置为 2 秒，以便用户发送 UI。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-25T21:09:47.617

我为这个解决方案提供了这个解决方案。我想在工作开始时使用布尔属性设置为 true，最后设置为 false 以允许通知用户后台工作。

基本上，它使用

*   a`DispatcherTimer`根据[this在UI渲染后启动一个方法](https://stackoverflow.com/questions/13026826/execute-command-after-view-is-loaded-wpf-mvvm)
*   一个异步方法将执行`Action`作为参数传递的

**称呼 ：**

```
this.LaunchThisWhenUiLoaded(() => { /*Stuff to do after Ui loaded here*/ }); 
```

**方法 ：**

```
private DispatcherTimer dispatchTimer;
private Action ActionToExecuteWhenUiLoaded;

/// <summary>
/// Handy method to launch an Action after full UI rendering
/// </summary>
/// <param name="toExec"></param>
protected void LaunchThisWhenUiLoaded(Action toExec)
{            
    ActionToExecuteWhenUiLoaded = toExec;
    // Call UiLoaded method when UI is loaded and rendered
    dispatchTimer = new DispatcherTimer(TimeSpan.Zero, DispatcherPriority.ContextIdle, UiLoaded, Application.Current.Dispatcher);
}

/// <summary>
/// Method called after UI rendered
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected async void UiLoaded(object sender, EventArgs e)
{
    this.IsBusy = true;    

    if (ActionToExecuteWhenUiLoaded != null)
        await Task.Run(ActionToExecuteWhenUiLoaded);
    dispatchTimer.Stop();

    this.IsBusy = false;
} 
```

也许不是干净的，但它按预期工作。

# php - 如何从 DOM XPath 查询中转义所有无效字符？

> ID：13026833
> 
> 赞同：1
> 
> 时间：2012-10-23T08:59:11.370
> 
> 标签：php, dom, xpath, html-escape-characters

我有以下函数可以在 a 中查找值`HTML DOM`；

它可以工作，但是当我给出以下参数时`$value`：`Levi's Baby Overall,` 它会破裂，因为它不会逃脱 , 和 ' 字符

如何从 DOM XPath 查询中转义所有无效字符？

```
private function extract($file,$url,$value) {
    $result = array();
    $i = 0;
    $dom = new DOMDocument();
    @$dom->loadHTMLFile($file);
    //use DOMXpath to navigate the html with the DOM
    $dom_xpath = new DOMXpath($dom);
    $elements = $dom_xpath->query("//*[text()[contains(., '" . $value . "')]]");
    if (!is_null($elements)) {
        foreach ($elements as $element) {
            $nodes = $element->childNodes;
            foreach ($nodes as $node) {
                if (($node->nodeValue != null) && ($node->nodeValue === $value)) {
                    $xpath = preg_replace("/\/text\(\)/", "", $node->getNodePath());
                    $result[$i]['url'] = $url;
                    $result[$i]['value'] = $node->nodeValue;
                    $result[$i]['xpath'] = $xpath;
                    $i++;
                }
            }
        }
    }
    return $result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T04:22:16.753

不应该用用户提供的任意字符串替换 XPath 表达式中的占位符——因为存在（恶意）XPath 注入的风险。

为了安全地处理此类未知字符串，解决方案是使用预编译的 XPath 表达式并将用户提供的字符串作为变量传递给它。这也完全消除了在代码中处理嵌套引号的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-21T02:45:56.443

PHP 没有用于为 XPath 查询转义/引用字符串的内置函数。此外，为 XPath 转义字符串非常困难，以下是有关原因的更多信息：[https](https://stackoverflow.com/a/1352556/1067003) ://stackoverflow.com/a/1352556/1067003 ，这是他的 C# XPath 引用函数的 PHP 端口：

```
function xpath_quote(string $value):string{
    if(false===strpos($value,'"')){
        return '"'.$value.'"';
    }
    if(false===strpos($value,'\'')){
        return '\''.$value.'\'';
    }
    // if the value contains both single and double quotes, construct an
    // expression that concatenates all non-double-quote substrings with
    // the quotes, e.g.:
    //
    //    concat("'foo'", '"', "bar")
    $sb='concat(';
    $substrings=explode('"',$value);
    for($i=0;$i<count($substrings);++$i){
        $needComma=($i>0);
        if($substrings[$i]!==''){
            if($i>0){
                $sb.=', ';
            }
            $sb.='"'.$substrings[$i].'"';
            $needComma=true;
        }
        if($i < (count($substrings) -1)){
            if($needComma){
                $sb.=', ';
            }
            $sb.="'\"'";
        }
    }
    $sb.=')';
    return $sb;
} 
```

示例用法：

```
$elements = $dom_xpath->query("//*[contains(text()," . xpath_quote($value) . ")]"); 
```

*   请注意我没有`"`在 xpath 本身中添加引用字符 ( )，因为 xpath_quote 函数为我完成了它（或 concat() 等效项，如果需要）

# core-data - 保存核心数据后，NSManagedObject 的绑定不起作用

> ID：13026839
> 
> 赞同：0
> 
> 时间：2012-10-23T08:59:48.123
> 
> 标签：core-data, uitableview, cocoa-bindings

保存上下文后，UITableViewCell 的数据不会被刷新，因为单元格包含的 UITextFields 没有触发绑定。到目前为止，您是否看到过类似的副作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:37:48.310

问题是我从observeValueFromKeyPath对持久存储执行了很多操作/查询。并且observeValueFromKeyPath 被触发了太多次。因此，不知何故，后台系统可能会过载，我认为这会产生奇怪的副作用。

# python - python如何解释命令行参数？

> ID：13026842
> 
> 赞同：2
> 
> 时间：2012-10-23T09:00:01.897
> 
> 标签：python

这是一个简单的python代码片段

```
#!/usr/bin/python
import sys
print sys.argv 
```

现在，如果我将它保存为 test.py，使其可执行，然后运行它

`./test.py abc`它打印出来`['./test.py','abc']`是非常明智的。

但是如果我运行它

```
./test.py http://www.google.co.in/imgres?hl=en&sa=X&biw=1600&bih=729&tbm=isch&prmd=imvns&tbnid=5FSY1KAB4T48vM:&imgrefurl=http://www.freeganita.com/en/mdlife/4_4.htm&docid=x4Z8mIMpa8FS9M&imgurl=http://www.freeganita.com/en/mdlife/4_4_files/image007.jpg&w=581&h=260&ei=MFaGUMnDHYXSrQfp5YGoDA&zoom=1&iact=hc&vpx=439&vpy=132&dur=1059&hovh=150&hovw=336&tx=71&ty=171&sig=100962344983266552479&page=1&tbnh=123&tbnw=276&start=0&ndsp=28&ved=1t:429,r:2,s:0,i:89 
```

它打印

```
[1] 14812
[2] 14813
[3] 14814
[4] 14815
[5] 14816
[6] 14817
[7] 14818
[8] 14819
[9] 14820
[10] 14821
[11] 14822
[12] 14823
[13] 14824
[14] 14825
[15] 14826
[16] 14827
[17] 14828
[18] 14829
[19] 14830
[20] 14831
[21] 14832
[22] 14833
[23] 14834
[24] 14835
[25] 14836
[26] 14837
[27] 14838
[28] 14839
[2]   Done                    sa=X
[3]   Done                    biw=1600
[4]   Done                    bih=729
[5]   Done                    tbm=isch
[6]   Done                    prmd=imvns
[7]   Done                    tbnid=5FSY1KAB4T48vM:
[8]   Done                    imgrefurl=http://www.freeganita.com/en/mdlife/4_4.htm
[9]   Done                    docid=x4Z8mIMpa8FS9M
[10]   Done                    imgurl=http://www.freeganita.com/en/mdlife/4_4_files/image007.jpg
[11]   Done                    w=581
[15]   Done                    iact=hc
[18]   Done                    dur=1059
[20]   Done                    hovw=336
[21]   Done                    tx=71
[22]   Done                    ty=171
[24]   Done                    page=1
[25]   Done                    tbnh=123
jpm@andromeda:~/test$ ['./test.py', 'http://www.google.co.in/imgres?hl=en'] 
```

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:03:43.977

你没有引用或转义你的 url，所以你从你的论点的 shell 解释中得到了各种各样的东西。尝试

```
./test.py 'http://www.google.co.in/imgres?hl=en&sa=X&biw=1600&bih=729&tbm=isch&prmd=imvns&tbnid=5FSY1KAB4T48vM:&imgrefurl=http://www.freeganita.com/en/mdlife/4_4.htm&docid=x4Z8mIMpa8FS9M&imgurl=http://www.freeganita.com/en/mdlife/4_4_files/image007.jpg&w=581&h=260&ei=MFaGUMnDHYXSrQfp5YGoDA&zoom=1&iact=hc&vpx=439&vpy=132&dur=1059&hovh=150&hovw=336&tx=71&ty=171&sig=100962344983266552479&page=1&tbnh=123&tbnw=276&start=0&ndsp=28&ved=1t:429,r:2,s:0,i:89' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T09:03:58.370

我可以假设您在 Linux 命令行中运行它吗？在这种情况下，`&`是一个[特殊的控制字符](http://hacktux.com/bash/ampersand)，用于分叉后台进程。

使用引号来防止这种情况：

```
./test.py "http://www.google.co.in/imgres?hl=en&sa=X&biw=1600&bih=729" # etc 
```

# java - 为什么策略模式使用工具而不是扩展？

> ID：13026853
> 
> 赞同：0
> 
> 时间：2012-10-23T09:00:25.700
> 
> 标签：java, design-patterns

为什么策略模式使用了`implements`而不是`extends`？因为我会假设 StrategyA `is-a`StrategyBase，这会导致我扩展基本策略而不是将其作为接口实现。

那么，将策略模式与“扩展”一起应用会不会是错误的？如果我在界面上使用它有什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:08:16.030

如果您没有公共代码可以放入您的策略基类型中，那么使用抽象类而不是接口将一无所获，除了将此类 API 的客户端限制为使用他们可能想要的专用策略类一个类实现多个接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:03:44.537

根据我的信息：使用`extends`，您将无法扩展任何其他类。如果方法不需要定义，为什么不使用`interface`。

# python - 如何访问日期时间 Python 中的值？

> ID：13026856
> 
> 赞同：3
> 
> 时间：2012-10-23T09:00:36.377
> 
> 标签：python, datetime

我有类似的东西

```
s= "2010-02-12 12:12:10"
r= repr(datetime.datetime(*time.strptime(s, "%Y-%m-%d %H:%M:%S")[:6]))
print r 
```

打印出来的值是`datetime.datetime(2010, 2, 12, 12, 12, 10)`

我的问题是：如何访问 r 中的每个值？例如，我只想要年份的值，即 2012。我尝试做 r[0] 但它给了我字母 'd' ......

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:05:09.247

你为什么用`repr()`？

```
>>> s = "2010-02-12 12:12:10"
>>> r = datetime.datetime(*time.strptime(s, "%Y-%m-%d %H:%M:%S")[:6])
>>> r.year
2010 
```

有关`date`对象的更多信息：http: [//docs.python.org/library/datetime.html#date-objects](http://docs.python.org/library/datetime.html#date-objects)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-23T09:05:53.537

使用将其转换为字符串（或者实际上， Python 可以使用`repr`的对象的 *repr*esentation。str () 用于将事物转换为字符串）。`datetime`

保持简单：

```
>>> r = datetime.datetime(*time.strptime(s, "%Y-%m-%d %H:%M:%S")[:6])
>>> r.year
2010 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-23T09:06:10.957

您可以直接访问年份属性

```
datetime.date.today().year 
```

# php - 代码点火器和时区

> ID：13026857
> 
> 赞同：0
> 
> 时间：2012-10-23T09:00:41.817
> 
> 标签：php, codeigniter

我在英国，但我的网站在美国的服务器上运行。进入数据库的一些日期反映了服务器时间，一些反映了英国时间。我很困惑这是怎么发生的。

我已经在 codeigniter index.php 文件中设置了时区，`date_default_timezone_set('Europe/Dublin');`它似乎适用于某些控制器而不适用于其他控制器。

关于在哪里寻找问题的任何建议。我应该在每个控制器的构造函数中使用时区函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:37:32.877

我认为这是因为 MySQL 使用服务器时区并且可能未配置到您的时区。最好的解决方案是配置服务器以适合您的时区。

但是，我曾经遇到过同样的情况，并且没有更改服务器的空间（它有其他美国站点）。所以，我被迫在每个请求上为 MySQL 设置时区。我知道这并不理想，但它确实有效。

我有一个在我的应用程序中自动加载的库，然后我对该类的构造函数进行了 DB 调用。我在我的配置文件中设置了时区。

```
$CI = &get_instance();

// Let's set timezone in the DB
$timezone = new DateTimeZone($CI->config->item('app_timezone'));
$offset = $timezone->getOffset(new DateTime("now")); // Offset in seconds
$gmt_offset = ($offset < 0 ? '-' : '+') . str_pad(floor($offset/3600), 2, '0') . ':' . str_pad(($offset % 3600)/60, 2, '0');

$CI->db->query("SET time_zone = '{$gmt_offset}'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:08:33.263

您的控制器可能会扩展同一个控制器 CI_Controller
您可以尝试在构造函数中添加代码，CI_Controlle 是文件

```
System/core/Controller.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:17:54.720

您可能正在使用两种不同的方法来确定时间。也许在某些情况下，它是由客户端确定的，您以不同的方式使用 strtotime 和 date ...

普遍接受的处理方法是输入 Unix 时间戳和/或使用确定正确时间的单一方法。然后，不要在系统文件夹中弄乱控制器（每次升级时都必须这样做），而是在应用程序的核心文件夹中使用 MY_Controller 扩展控制器，并在那里定义/确定时区 - 任何一个都可能这样做。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-23T09:10:15.560

这取决于您如何将日期插入数据库。

您可以通过使用 strtotime 或 time 将时间戳作为整数插入到数据库中来解决此问题。在视图中显示日期时，使用 date 或 strftime 将它们转换回来

在主 index.php 中设置时区应该足够了。

# css - 如何在ie中正确浮动身体

> ID：13026867
> 
> 赞同：0
> 
> 时间：2012-10-23T09:01:00.370
> 
> 标签：css

我试图给身体一些宽度，并尝试使用下面的代码将它与屏幕对齐

```
 body{
       width : 75%;
       float : right;
 } 
```

它不仅在 IE 中工作。我该如何解决..？默认情况下，它向左对齐。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:08:03.173

浮动你的身体是没有意义的，因为它是 DOM 树的顶部操作。它会漂浮在什么地方？

如果你想给人一种你的身体只占据屏幕右侧 75% 的印象，请添加一个边距。

```
body {
  margin-left: 25%;
} 
```

这将起作用。

如果这是不可接受的，请在您的内容周围使用 div。

# php - NuSoap 等效于 SoapVar()

> ID：13026871
> 
> 赞同：3
> 
> 时间：2012-10-23T09:01:10.860
> 
> 标签：php, web-services, soap, nusoap

我对 NuSoap 了解不多，但不幸的是我*不得不*使用它。我正在尝试遵循 dotmailer Web 服务 api [Here](http://www.dotmailer.co.uk/api/address_books/add_contact_to_address_book.aspx)的示例代码。我需要能够为订阅者添加自定义字段。

在示例代码中，自定义/附加字段的定义如下；

```
new SoapVar($FirstName,XSD_STRING,"string","http://www.w3.org/2001/XMLSchema"); 
```

这是我现在拥有的代码；

```
<?php
function subscribeUserEmail($email)
{   
    $username = "********";
    $password = "********";
    $postURL  = "http://apiconnector.com/api.asmx?WSDL";

    $contact = array (
        "Email" => $email,
        "AudienceType" => "B2C",
        "OptInType" => "Single",
        "EmailType" => "Html",
        "ID" => -1,
        "DataFields" => array(
            "Keys" => array("TEST"),
            "Values" => array("Name")
        )
    );
    $params = array(
        "username" => $username,
        "password" => $password,
        "contact" => $contact,
        "addressbookId" => "******"
    );

    $client = new soapclient($postURL, true);
    $error = $client->getError();
    $result = $client->call('AddContactToAddressBook', $params);

    echo "<h2>Request</h2>";
    print("<pre>".$client->request."</pre>");

    echo "<h2>Response</h2>";
    print("<pre>".$client->response."</pre>");

    echo "<h2>Debug</h2>";
    print("<pre>".$client->debug_str."</pre>");
}
?> 
```

如果`$contact`数组改成这个；

```
$contact = array (
    "Email" => $email,
    "AudienceType" => "B2C",
    "OptInType" => "Single",
    "EmailType" => "Html",
    "ID" => -1,
    "DataFields" => array(
        "Keys" => array("TEST"),
        "Values" => array(new SoapVar("Name",XSD_STRING,"string","http://www.w3.org/2001/XMLSchema") )
    )
); 
```

并与普通的肥皂客户端一起使用，代码可以工作。所以我很确定我的功能没有任何其他问题。

我尝试过使用以下内容；

```
new soapval("string", XSD_STRING, "Name","http://www.w3.org/2001/XMLSchema"); 
```

作为 SoapVar() 方法的替代方法，但我得到的错误与我以纯文本形式输入值相同。

如何在 NuSoap 中复制 SoapVar() 的功能？这似乎是唯一的问题。

# java - 使用 Spring-Android 调用 RESTFul

> ID：13026872
> 
> 赞同：0
> 
> 时间：2012-10-23T09:01:13.613
> 
> 标签：java, android, spring, gson

这是我的 Strifified json，

```
 {
       "Request":{
              "Object1":{
                 "Key1":"Value1"
              },
              "Object2":{
                  "Key2":"Value2"
              }
       },
       "Object3":{
                 "Key3":"Value3"
       }
} 
```

我正在使用 Gson 形成这个。`String Stringifiedjson = new Gson().toJson(user);` 这是我想要达到的目标。

```
RestTemplate rest = new RestTemplate();
String url = "";
String event = rest.getForObject(url, Stringifiedjson); 
```

1.  `onEventHandler`我将如何发送到我的 REST 服务并在or中取回我的结果`onErrorHandler`。我基本上来自`JavaScript`背景。
2.  为什么 getForObject 方法不接受`String, String`作为参数。

**更新：**

```
AuthenticateUser user = new AuthenticateUser(credential, Header);       
HttpHeaders requestHeaders = new HttpHeaders();
requestHeaders.setContentType(new MediaType("application","json"));         
//HttpEntity<AuthenticateUser> requestEntity = new HttpEntity<AuthenticateUser>(user, requestHeaders);

RestTemplate restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(new MappingJacksonHttpMessageConverter());
restTemplate.getMessageConverters().add(new StringHttpMessageConverter());
String url = "url";             
String result = restTemplate.postForObject(url, AuthenticateUser.class, String.class); 
```

附件是我得到的异常的馅饼。

[http://pastie.org/private/efyfvvbxyxdsvm3lvv7q](http://pastie.org/private/efyfvvbxyxdsvm3lvv7q)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:30:52.693

关于第二个问题：我刚刚找到了这个例子（你可以看看整个文档；））

[2.7.1 基本使用示例 下面的示例显示了对 google 的搜索词“SpringSource”的查询。](http://static.springsource.org/spring-android/docs/1.0.x/reference/html/rest-template.html)

```
String url = "https://ajax.googleapis.com/ajax/services/search/web?v=1.0&q={query}";

// Create a new RestTemplate instance
RestTemplate restTemplate = new RestTemplate();

// Add the String message converter
restTemplate.getMessageConverters().add(new StringHttpMessageConverter());

// Make the HTTP GET request, marshaling the response to a String
String result = restTemplate.getForObject(url, String.class, "SpringSource"); 
```

> ```
> getForObject
> 
> public <T> T getForObject(URI url,
>                     Class<T> responseType)
>           throws RestClientException
> Description copied from interface: RestOperations
> Retrieve a representation by doing a GET on the URL . The response (if any) is converted and returned.
> Specified by:
> getForObject in interface RestOperations
> Parameters:
> url - the URL
> responseType - the type of the return value
> Returns:
> the converted object
> Throws:
> RestClientException 
> ```

您的堆栈跟踪中的异常可能与这篇[文章](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)的同一问题有关。当您的应用程序尝试在主线程中建立连接时，就会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T11:50:00.553

```
10-23 15:46:10.106: E/AndroidRuntime(1038): FATAL EXCEPTION: main
10-23 15:46:10.106: E/AndroidRuntime(1038): android.os.NetworkOnMainThreadException 
```

当您在应用程序主 ui 线程中执行任何网络操作时，会引发[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)（另请参阅[保持您的应用程序响应](http://developer.android.com/training/articles/perf-anr.html)。这是不允许的。您必须使用后台线程进行网络操作，请参阅[http://上的工作线程developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)

# c++ - 创建一个强大的字典

> ID：13026875
> 
> 赞同：1
> 
> 时间：2012-10-23T09:01:39.587
> 
> 标签：c++, design-patterns, dictionary

我想创建一个类或其他东西来存储不同类型的信息，如字符串、映射、布尔值、整数等。

我想做的是这样的：　

```
dictionary func(dictionary & dict){}. 
```

而且字典里的内容是不固定的，可能我用的是func1()和func2()，但是它们需要不同的参数。

现在，我创建了一个类来存储参数，它有不同类型的成员，这是一个好方法吗？或者我需要找到一个好的解决方案？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T09:05:24.517

如果您想混合键或值类型，则最好利用现有的[`std::undordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)哈希表/映射实现，或者结合使用。[`boost.any`](http://www.boost.org/libs/any/)

# informix - 错误“区域设置无效！！” 尝试在 Informix 上安装 sqldemo 时

> ID：13026876
> 
> 赞同：2
> 
> 时间：2012-10-23T09:01:40.727
> 
> 标签：informix, isql

我对 Informix 非常陌生，并且在尝试安装 sqldemo 时遇到了一些麻烦。

到目前为止设置：

*   openSuse 12.1（32 位）
*   Informix 成长版 11.70 UC6
*   Informix SQL 开发人员 7.50 UC6
*   Informix RDS 7.50 UC6
*   Informix ID 7.50 UC6

在苦苦挣扎了几天并大量阅读[http://publib.boulder.ibm.com/infocenter/idshelp/v117/index.jsp](http://publib.boulder.ibm.com/infocenter/idshelp/v117/index.jsp)之后，我设法安装并上线了 Informix。

我还选择安装随附的演示数据库实例。

我现在尝试通过示例开始使用 Informix 4GL。

我正在尝试启动 sqldemo 数据库。我不知道它是否会取代以前使用 Informix 安装的实例，但这是一个不同的问题。

现在根据文档，运行以下命令应该设置数据库：

```
sqldemo stores2t -log 
```

然而，我得到一个错误：“无效的区域设置！！”。

我已经尝试在文档中查找此错误。

我尝试在我的 .profile 文件中设置 CLIENT_LOCALE 和 DB_LOCALE。

例如：

*   `export CLIENT_LOCALE=en_US.CP1252`和
*   `export DB_LOCALE=en_US.819`

这没有帮助。

朝着正确的方向前进，或者也许我可以阅读的其他一些文档可以更好地解释事情，我们将不胜感激。

如果需要我提供任何其他信息，请随时询问。

更新 1

非常感谢您的回复。

自从你的帖子以来，我首先尝试了几件事。

1.  按照您的指定更改了 CLIENT_LOCALE 和 DB_LOCALE - 相同的错误 - 所以我删除了它，因为您说它不应该设置。
2.  修复了我的 PATH 中的一个问题并确保它具有 /usr/informix/bin - 相同的错误
3.  INFORMIXDIR 是 /usr/informix
4.  INFORMIXSERVER 是 ol_informix1170 （这是来自与informix install 一起安装的数据库，不知道是否必须更改？如果需要更改为什么？）
5.  运行您提到的脚本，结果： INFORMIXDIR=/usr/informix INFORMIXSERVER=ol_informix1170 INFORMIXSQLHOSTS=/usr/informix/etc/sqlhosts LANG=en_US.UTF-8 ONCONFIG=onconfig

6.  我注意到我已将语言设置为英国，这使得语言环境为 en_gb 而不是 en_us，因此尝试在我的 .profile 中更改它，但没有帮助，因此还尝试将语言更改为美国，将语言环境更改为 en_us，但这使得没有不同。

至于你所说的关于 sqldemo 脚本和已经安装的数据库，如果删除那个数据库就可以了，因为这只是一个测试 VB 框供我学习。

设置为 ol_informix1170 的 $INFORMIXSERVER 可能是问题所在吗？

再次感谢您的帮助。

尼尔

更新 2

再次感谢您的回复。

有几点需要注意。

1.  我发布的 dbenv 结果显示了我假设/假设（呃-哦）意味着未设置其他环境变量。您发布的哪些环境变量对于它的工作是绝对必要的？

2.  如上所述，我在哪里可以找到 terminfo 文件，还是需要创建它？

3.  如上所述，SQLEXEC 变量...我在哪里可以找到 sqlrm？我可以从我读过的文件中多少记得我认为它应该是 $INFORMIXDIR/lib？但我只有一个 esql 目录。它是否正确。

4.  除非上述前 3 项中的某些内容不会导致更多问题，否则在尝试您的 DEMOPATH=en_us/0333 sqldemo stores2t -log 的建议时，我收到以下错误：抱歉，无法读取构建演示数据库所需的 mkstores3 程序。检查 INFORMIXDIR (/usr/informix) 的 /etc 子目录。

检查 /usr/informix/etc 确实表明没有 mkstores3 文件。

1.  尝试进一步说明 isqldemo，我收到以下错误：/usr/informix/bin/isqldemo: line 58: /usr/informix/demo/sql/en_us/e01c/isqldemo: No such file or directory。

我想这很有意义，因为没有 e01c 目录，只有 0333 目录。

现在，你能告诉我的任何事情都确实是一种安慰，因为我对一般 Linux 和 Informix 的新手是一个很大的因素。有趣的是，这个错误已经存在了很长时间。我想有更多经验的人比我想出如何自己解决它，或者只是从不打扰 sqldemo。

我想这会教我阅读：

INFORMIX-4GL 示例版本 4.1 1991 年 7 月

现在要检查是否存在任何更新的文本，但仍然希望在解决此问题方面提供更多帮助。您是否认为在安装 Informix 之前恢复到以前的快照并且不选择包含 ol_informix1170 数据库可能是一种可能的解决方案？我不会真的看到它会是，但我知道什么。

非常感谢您的持续时间和努力。

问候，

尼尔

更新 3

所以我确实看到我正在阅读的文件是古老的。我发现了一个使用不同脚本（dbaccessdemo7）的更新版本（2002）。

我尝试运行它，遇到了错误，但明天又是一天。

由于检测到并解决了错误，现在我将其标记为已解决。我不会在 sqldemo 上投入更多的时间和精力。

非常感谢，如果我在使用 dbaccessdemo 7 时遇到困难，我会发布一个新问题。

问候，

尼尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T23:23:14.847

该`sqldemo`脚本不会创建新服务器；它可能会破坏您现有的数据库（单个服务器可能包含多个数据库；实际上，在`sys*`初始化服务器时会创建 4 个数据库），但不会损害您的服务器。

### 错误的可能原因

无效语言环境的正常问题是您没有设置`$INFORMIXDIR`. 您需要`$INFORMIXDIR`设置除非`/usr/informix`是（符号链接）正确的位置。您还需要`$INFORMIXSERVER`set ，通常需要`$INFORMIXDIR/bin`on `$PATH`。严格来说，`$INFORMIXSERVER`是唯一的强制变量；在实践中，你也会担心另外两个。

该`$INFORMIXDIR`设置用于定位语言环境信息（位于 中`$INFORMIXDIR/gls`）和消息文件（位于 中`$INFORMIXDIR/msg`）。

请注意，CP1252 是一个 Windows 代码页。通常在 Unix 上，您要么不设置 CLIENT_LOCALE 或 DB_LOCALE，要么将它们设置为：

```
export CLIENT_LOCALE=en_us.8859-1
export DB_LOCALE=en_us.8859-1 
```

或者您可以选择另一个更适合（对您而言）的语言环境。例如`8859-15`，语言环境包括欧元符号，或者`utf-8`语言环境在数据库中指示 UTF-8。 **但是**，对于初始调试，请坚持使用 8859-1 语言环境，即 819 或 0333（均基于 IBM CCSID）。如果它不适用于 8859-1，那么我们有一组问题；如果它适用于 8859-1 但不适用于其他代码集或语言环境，那么我们就会遇到不同的问题。

* * *

### 如果上述解决方案失败的后续信息

如果这不是问题，那么我会要求提供更多详细信息 — 特别是`dbenv`下面脚本报告的 Informix 环境：

```
:       "@(#)$Id: dbenv.sh,v 2.11 2007/09/02 00:18:58 jleffler Exp $"
#
#       Printout INFORMIX database environment

informix1="DB[^=]|DELIMIDENT=|SQL|ONCONFIG|TBCONFIG|INFOR"
informix2="ARC_|CLIENT_LOCALE=|GL_|GLS8BITSYS|CC8BITLEVEL|ESQL|FET_BUF_SIZE="
informix3="INF_ROLE_SEP=|NODEFDAC=|ONCONFIG|OPTCOMPIND|PDQ|PSORT"
informix4="PLCONFIG|SERVER_LOCALE|FGL|C4GL|NE_"
informix5="TCL_LIBRARY|TK_LIBRARY"
informix="$informix1|$informix2|$informix3|$informix4|$informix5"
system="COLLCHAR=|LANG=|LC_|LD_LIBRARY_PATH(_64)?=|PATH=|SHLIB_PATH="
jlss="IXD(32|64)?="

env |
egrep "^($informix|$system|$jlss)" |
sort 
```

这是一个旧脚本；这就是为什么没有shebang的原因。

* * *

### 第二组诊断

我希望`dbenv`脚本的完整输出；令人惊讶的是，某些事情出现的频率很高。但是，鉴于您所说的，它可能没问题。

INFORMIXSERVER 设置听起来不错。

我对这个`LANG=en_US.UTF-8`设置感到震惊；Informix 确实注意变量（这就是打印这些变量的原因）`$LANG`。这可能是问题的一个因素。但是，如果这是问题所在，我会期望并处理它。另外，在我的 Mac 上，我有但可以连接到 (8859-1) 数据库。`$LC_*``dbenv``CLIENT_LOCALE``SERVER_LOCALE``LANG=en_US.UTF-8`

这开始看起来像一个安装问题......或`sqldemo`问题......

我从 Mac 转换到 RHEL 5 (archaic) x86/64 机器，并尝试`sqldemo`在那里运行：

```
$ dbenv
DBDATE=Y4MD-
DBEDIT=vim
INFORMIXDIR=/work4/informix/tools-7.50.FC4
INFORMIXSERVER=toru_31
INFORMIXSQLHOSTS=/work4/informix/ids-11.70.FC4/etc/sqlhosts
INFORMIXTERM=terminfo
IXD64=/work4/informix/ids-11.70.FC4
IXD=/work4/informix/tools-7.50.FC4
IXH=/work4/informix/ids-11.70.FC4/etc/sqlhosts
IXO=/work4/informix/ids-11.70.FC4/etc/onconfig.toru_31
IXS=toru_31
LANG=en_US.UTF-8
LD_LIBRARY_PATH=/lib64:/usr/lib64:/work4/informix/tools-7.50.FC4/lib:/work4/informix/tools-7.50.FC4/lib/tools:/work4/informix/tools-7.50.FC4/lib/esql:/work4/informix/ids-11.70.FC4/lib:/work4/informix/ids-11.70.FC4/lib/esql:/work4/informix/ids-11.70.FC4/lib/cli
ONCONFIG=onconfig.toru_31
PATH=/work4/informix/tools-7.50.FC4/bin:.:/work4/jleffler/bin:/u/jleffler/bin:/work4/informix/ids-11.70.FC4/bin:/u/jleffler/linux/x86_64/bin:/work4/informix/11.70.FC1:/usr/atria/bin:/work4/jleffler/perl/v5.12.1/bin:/usr/bin:/bin:/usr/X11R6/bin:/atria_release/cm_dist/vobs/imitools/bin:/opt/rational/clearcase/bin:/opt/rational/clearquest/bin
SQLCMDLOG=/work4/jleffler/.sqlcmdlog
SQLEXEC=sqlrm
TERMINFO=/work4/jleffler/terminfo
TERM=xterm-color
$ sqldemo st2 -log
Invalid Locales set !!
$ 
```

哦耶？不; 我的语言环境很好，谢谢！

好吧，就这样吧...我可以重现您的问题！这是第 1 步。第 2 步是查看*已删除的脏话*脚本。

```
PRODUCT=sql
DEMOFILE=sqldemo
DEFLANG=en_US.8859-1

INFORMIXDIR=${INFORMIXDIR:=/usr/informix}
INFENV=$INFORMIXDIR/bin/infenv
CONVLOC=$INFORMIXDIR/bin/convloc

if [ $# -gt 0 -a "X$1" = "X-e" ] ; then
    LOCALE=$DEFLANG                           # -e means en_US.8859-1 required
    shift
else
    LOCALE=`$INFENV DBLANG`                   # get DBLANG value
    if [ "x${LOCALE}" = "x" ]; then        
    LOCALE=`$INFENV CLIENT_LOCALE`        # try CLIENT_LOCALE instead
    if [ "x${LOCALE}" = "x" ]; then
        LOCALE=`$INFENV DB_LOCALE`        # finally default to DB_LOCALE
    fi
    fi
fi

if [ "x${LOCALE}" = "x" ]; then
    LOCALE=$DEFLANG       # finally default to DB_LOCALE
fi

export LOCALE

if [ "x${DEMOPATH}" = "x" ]; then
    echo "Invalid Locales set !!"
else
    exec $INFORMIXDIR/demo/$PRODUCT/$DEMOPATH/$DEMOFILE $*
fi

exit $? 
```

请注意，测试`${DEMOPATH}`; 请注意，`DEMOPATH`未在脚本中设置。所以，我们必须把它设置好。要做什么？好吧，`ls $INFORMIXDIR/demo/sql`表明有各种特定于语言环境的子目录（`en_us`, `ja_jp`, `ko_kr`, `th_th`, `zh_cn`, `zh_tw`），并且在`en_us`目录下有`0333`（仅）。

请运行：

```
DEMOPATH=en_us/0333 sqldemo stores2t -log 
```

这或多或少对我有用——我相信它对你有用。我有一个稍微不寻常的设置，因为我在 $INFORMIXDIR 中只有 I4GL（p 代码和 c 代码）和 ISQL；服务器用完了不同的目录。这意味着我没有像`dbload`. `$INFORMIXDIR/bin`因此，当`sqldemo`脚本尝试使用 加载数据时`dbload`，它对我来说失败了。它会为您工作，因为您将所有 Informix 软件都放在一个目录中。雪上加霜的是，它`dbload`通过显式路径运行程序，所以我不能让我的 PATH 变得可用。

这应该让你继续前进。我有一个错误要报告……它是 CQ idsdb00244894。

很抱歉你遇到了这么多麻烦。你不应该这样做。

# php - 使用函数连接到远程 mysql 服务器

> ID：13026877
> 
> 赞同：0
> 
> 时间：2012-10-23T09:01:51.830
> 
> 标签：php, mysql

我正在使用 wordpress，并且我有一个远程 mysql 服务器来存储未存储在 wordpress db 上的其他一些数据。

现在我想以 php 函数的形式连接到远程 mysql 服务器，但我不知道如何或是否可能。基本上，此功能用于检查`$orderid`远程 mysql 服务器上是否存在。

```
function check_orderid($orderid) {
// Connect to database
// Check if $orderid exist if yes return true.
} 
```

远程服务器确实接受远程连接。

另外，可以吗，不会影响wordpress db连接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:04:01.183

除了主机地址之外，连接到远程服务器与连接到本地服务器没有什么不同。只需将“localhost”替换为可解析的 dns 名称或远程服务器的 ip 地址，就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:18:17.113

要建立多个连接，您必须使用链接。

它们是在成功连接后创建的：

```
$link1 = mysqli_connect('localhost', 'my_user', 'my_password', 'my_db');
$link2 = mysqli_connect('localhost', 'my_user2', 'my_password2', 'my_db2'); 
```

你可以像这样使用它们：

```
mysqli_query($link1, "your first query as string");
mysqli_query($link2, "your second query as string"); 
```

通过官方 OO 版本，您应该使用：

```
$mysqli1 = new mysqli('localhost', 'my_user', 'my_password', 'my_db');
$mysqli2 = new mysqli('externalIP', 'my_user2', 'my_password2', 'my_db2');
$mysqli1->query("some query");
$mysqli1->query("some other query"); 
```

因此，在这种情况下，您可以轻松地做到这一点：

```
 $externaldbcon = new mysqli('ExtrnalDBIP', 'my_user', 'my_password', 'my_db');
 $externaldbcon->query("your query for external DB"); 
```

# python-2.7 - pygame中的透明矩形

> ID：13026887
> 
> 赞同：4
> 
> 时间：2012-10-23T09:02:18.650
> 
> 标签：python-2.7, pygame

我正在尝试在 pygame 中绘制简单的半透明矩形。我试过这段代码：

```
import pygame, sys,pygame.mixer

pygame.init()
size = (width, height) = (400, 400)
screen = pygame.display.set_mode(size)
screen.fill((255,255,255))
pygame.draw.rect(screen, (23, 100, 255, 50), (100,100,100,100),0)

running = True
while running:
    for event in pygame.event.get():
       if event.type == pygame.QUIT:
            pygame.quit()
            running = False 
```

但正如你所见，矩形不是半透明的。就像我插入颜色 23, 100, 255, 255) 而不是 (23, 100, 255, 50)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-16T00:47:51.173

您还可以使用 gfxdraw，它有几个选项并接受颜色的 alpha。

您需要导入：

```
import pygame.gfxdraw 
```

并用于：

```
pygame.gfxdraw.box(screen, pygame.Rect(0,0,200,200), (100,0,0,127)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T11:52:21.330

`pygame.draw.rect`文档没有说明对 alpha 通道的支持。

您应该创建一个 RGBA 表面并用半透明颜色填充它：

```
rect = pygame.Surface((100,100), pygame.SRCALPHA, 32)
rect.fill((23, 100, 255, 50))
screen.blit(rect, (100,100)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T12:36:07.870

[我在这里](https://stackoverflow.com/questions/12255558/how-to-use-pygame-set-alpha-on-a-picture)问了一个与此类似的问题。我最终做的是`set_alpha()`在将其转换为 alpha 图像后使用该功能。你可能会在我的问题中找到一些有用的东西。此外，请确保您没有在半透明的矩形后面显示具有 100% 不透明度的旧版本矩形。

# bash - 防止 bacula 脚本中的安全查询

> ID：13026892
> 
> 赞同：1
> 
> 时间：2012-10-23T09:02:48.467
> 
> 标签：bash, bacula

我正在尝试编写 bacula 脚本以删除不再使用的旧文件。虽然有超过 1000 个旧文件，但我不愿意手动进行。

我已经走了多远

```
for filename in $(echo "list volume" |bconsole |grep Purged |awk -F\| '{print $3}')
do 
    echo "delete volume=2012-10-19_23h40m" | bconsole
done 
```

但是现在我遇到了安全问题的问题，有人必须输入“是”/“否”。

> 您确定要删除卷“2012-10-19_23h40m”吗？（是/否）

但是 bconsole 程序刚刚退出！

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:00:19.657

也许`expect(1)`混入一点？

```
bash$ cat delete_volume
#!/usr/bin/expect

# Start up bconsole
spawn bconsole

# Grab the command from STDIN
expect_user -re "(.*)\n"

# Send it to bconsole
send "$expect_out(1,string)\n"

# Handle the Q&A
expect "Are you sure" { send "yes\n" }

# Let bconsole do its work
interact 
```

所以你的循环看起来像这样（我假设 2012-10... 部分最终将被你在管道中找到的内容所取代，但不知道它是如何工作的，我只是在使用你所拥有的在问题中）...

```
for filename in (...your file finding pipeline...)
do
    echo "delete volume=2012-10-19_23h40m" | ./delete_volume
done 
```

通常的警告适用。我绝不是期望专家，因此强烈建议在上线之前进行测试。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T12:56:51.933

@brain 感谢您的输入，但我喜欢一个班轮：D

几乎是一条线，像魅力一样工作

```
for filename in $(echo "list volume" |bconsole |grep 2012-08 |awk -F\| '{print $3}'); do bconsole << EOF; rm /media/storage/$filename; done
delete volume=$filename
yes
quit
EOF 
```

因此您可以使用交互式程序编写所有内容：D

# java - AutoCompleteTextView 结果在空间上为空

> ID：13026898
> 
> 赞同：2
> 
> 时间：2012-10-23T09:03:12.117
> 
> 标签：java, android, autocomplete, autocompletetextview

我有一个 AutoCompleteTextView，它工作得很好，直到我在我的输入中添加一个空格。例如，如果我有许多历史事件的列表（不列颠之战（1940 年）、突出部之战（1944 年）、[插入许多战斗]、拿破仑的致命行军（1812 年）、[插入许多其他历史事件]） .

当我输入“Battle”或“battle”时，我会得到所有战斗的列表（虽然似乎有一个最大值），当我输入“britain”时，结果中会出现“Battle of British (1940)”。但是，当我在“战斗”之后输入一个空格时，所有结果条目都会消失。

[除了这个](https://stackoverflow.com/questions/8233262/autocompletetextview-doesnt-recognize-spaces)，我真的找不到任何有用的帖子或关于这个主题的问题，但这并没有给我任何答案。

有没有办法让 AutoCompleteTextView 在插入空格后保持自动完成？

**编辑**：我并没有真正看到添加代码的意义，因为它只是一个带有带有字符串的适配器的 AutoCompleteTextView，但是好吧，这发生在`onCreate()`：

```
auto = (AutoCompleteTextView) findViewById(R.id.auto);
String[] events = getListOfEvents();
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, events);
auto.setAdapter(adapter); 
```

where`getListOfEvents()`简单地读取一个将所有历史事件放在一个`String[]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:37:44.203

插入该空格字符时自动完成中断，因为在引擎盖下它使用了`AutoCompleteTextView`（`ArrayAdapter`在您的情况下）设置的适配器中的过滤器。默认过滤器`ArrayAdapter`使用空格作为分隔符，将每个适配器行的文本分成单词，然后针对过滤器输入进行测试。这不会提供任何结果，因为输入过滤器（其中有一个空格）将不匹配该行中的任何单词（因为这些单词末尾没有空格）。例如，*“Battle of British”*行将不匹配*“Battle”*，因为*“Battle”*不会匹配任何单词*“Battle”*、*“of”*或*“Britain”*这是在“”之后拆分初始文本的结果。

如果你想让它工作，你必须实现你自己的`Adapter`，它将返回一个`Filter`考虑到单词后空格的 a 。

# c++ - 这个简单的 std::list 中的错误在哪里？

> ID：13026900
> 
> 赞同：1
> 
> 时间：2012-10-23T09:03:33.430
> 
> 标签：c++, list, stl

我不明白我一直在测试的这个非常简单的列表的问题在哪里。这个想法是在列表中的位置 i 处获取项目。我知道通常我不会使用列表来做到这一点。但是，当我设置`item = 11`,`item = 12`和`item = 13`( 输出将分别为`at position {1, 2, 3} there's the item {11, 12, 13}`) 时有效，但是当我设置 时它不起作用，`item = 10`因为输出是`at position 0 there's the item 6`

```
int main(void)
{
    list<int> L;
    L.push_back(10);
    L.push_back(11);
    L.push_back(12);
    L.push_back(13);

    int item = 10;
    int pos;

    list<int>::iterator it = moveToItem(item, L, pos);

    cout << "at position " << pos << " there's the item " << *it;
}

list<int>::iterator moveToItem(int item, list<int> L, int& pos)
{
     pos = 0;
     list<int>::iterator it = L.begin();

     while(*it != item)
     {
         it++;
         pos++;
     }
     return it;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T09:05:49.527

`L`调用时正在制作列表的副本，`moveToItem()`因此返回的迭代器正在引用`list`已被破坏的 a 项。`list`而是通过引用传递：

```
list<int>::iterator moveToItem(int item, list<int>& L, int& pos)
                                                //^ 
```

在取消引用之前，您还应该防止越过条件`end()`中`list`的。`while``it`

如果这不是练习，请考虑使用 STL 算法[`std::find()`](http://en.cppreference.com/w/cpp/algorithm/find)，[`std::distance()`](http://en.cppreference.com/w/cpp/iterator/distance)而是：

```
#include <iterator>
#include <algorithm>

std::list<int>::iterator it = std::find(L.begin(), L.end(), 41);
if (it != L.end())
{
    std::cout << "at position "
              << std::distance(L.begin(), it)
              << " there's the item "
              << *it
              << "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:07:20.817

`list<int>::iterator moveToItem(int item, list<int> L, int& pos)`在调用当前制作的列表副本时，您应该传递对列表的引用。

所以你的方法应该是`list<int>::iterator moveToItem(int item, list<int>& L, int& pos)`。您可以保持方法的主体相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:14:00.267

您正在按值获取列表。因此，返回的迭代器是函数本地`L`参数的迭代器，因此一旦函数返回（并被`L`销毁）就无效。你应该`L`参考：

```
list<int>::iterator moveToItem(int item, list<int> &L, int& pos) 
```

无论如何，在性能方面，将如此大的数据结构作为按值列表并不是最好的主意。

# php - Wordpress，将帖子包装在 div 中

> ID：13026903
> 
> 赞同：0
> 
> 时间：2012-10-23T09:03:45.267
> 
> 标签：php, css, wordpress, styles

我对wordpress很陌生，所以请耐心等待。我有一个网站启动并运行，允许我动态添加内容，唯一的问题是每个帖子的样式。我希望将帖子包装在一个 div 中，因此图像将被包装在一个 div 中，而文本帖子将被包装在另一个 div 中，如果这有意义吗？
这是我一直在使用的一些代码：

```
<?php if ( in_category('photos') ) { ?>
           <div id="testing">
 <?php } else { ?>
           <div id="test-2">
 <?php } ?> 
```

唯一的问题是它包含给定类别中的所有帖子，并且没有在内容之后放置结束“</div>”，如果这有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:32:31.163

“如果这有意义” 不，这实际上没有意义，因为 Wordpress 默认为每个类别和标签添加一个 CSS 类到周围的`div`. 如果您的主题不是这种情况，请使用该功能`post_class()`将 CSS 类添加到您的`div`.

[有关使用示例，`post_class()`](http://codex.wordpress.org/Function_Reference/post_class)请参阅[-documentation](http://codex.wordpress.org/Function_Reference/post_class)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T12:51:24.573

好吧，你没有得到任何关闭`</div>`s 的唯一原因是因为你没有把它放在你的 php.ini 中的任何地方。

这应该有效：

```
<?php while( have_posts() ) : the_post()
  if( in_category( 'photos' ) { ?>
    <div id="testing">
      // All your post content and whatnot
      <?php the_content(); ?>
    </div>
  <?php } else { ?>
    <div id="test-2">
      // All your post content
      <?php the_content(); ?>
    </div>
  <?php }
  endwhile; ?> 
```

如果您没有在主题文件中编写完整的标记，则不可能期望 Wordpress 或 PHP 自动关闭您的 HTML 标记。

# windows-phone-7 - WP7后台音频代理播放状态

> ID：13026913
> 
> 赞同：0
> 
> 时间：2012-10-23T09:04:06.847
> 
> 标签：windows-phone-7, events, audio, agent

我在[这里阅读了关于 WP7 背景音频播放器代理](http://blogs.msdn.com/b/wpukcoe/archive/2012/02/10/background-audio-in-windows-phone-7-5-part-2.aspx)的说明。我以为代理端只有 1 个未知事件和 1 个正在播放的事件

但是，当我登录`OnPlayStateChanged`代理的事件时，使用

```
System.Diagnostics.Debug.WriteLine(player.PlayerState.ToString(); 
```

播放新曲目时，我收到 2 个未知事件和 3 个正在播放事件

很奇怪，这是为什么呢？

P/S：我使用 MSDN 上的代码示例[How to: Play Background Audio for Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202978%28v=vs.92%29.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T02:05:08.513

感谢彼得托尔，我找到了原因

> 由于媒体播放的异步特性，您应该使用 OnPlayStateChanged 回调的参数来驱动您的逻辑。您不需要查询播放器（这主要是为了让前台应用程序显示 UI）。

# java - GWT Codesplitting 集成：MVP 和 Activity/Places

> ID：13026914
> 
> 赞同：0
> 
> 时间：2012-10-23T09:04:09.103
> 
> 标签：java, gwt, mvp, gwt-activities, gwt-places

假设您有一个[`AcceptsOneWidget`](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/AcceptsOneWidget.html)包含选项卡式窗格的“显示区域”( )。单击不同的选项卡（即，从“ *fantasyo* ”到“ *profile* ”）会导致在窗格中显示全新的内容。这似乎是代码分割的完美用例，因为在用户单击“*配置文件*”选项卡之前，他们不需要下载显示它所需的代码。（**注意：**如果任何 GWT 专家不同意并且认为这不是代码拆分的正确用例，那么请向我指出这一点，但这不是这个问题的重点，所以请多多包涵！）

![在此处输入图像描述](../Images/ed90f4e006ba6fc5b8dcdc5cb749ffa6.png)

现在，如果我*对*基本 GWT 体系结构的理解是正确的，那么显示“*配置文件*”选项卡所必需的代码由`Activity`(ies)、`Place`(s) 组成，也许还有一些 MVP 内容，例如 a `Presenter`、`Module`、`EntryPoint`等。当然这个会因应用程序和开发人员的不同而有所不同（正如我在 GWT 中了解到的，有很多方法可以实现相同的目标），但无论如何，它都是一堆 MVP/Activity/Place “东西”。为了这个问题，我喜欢[这个 SO question](https://stackoverflow.com/questions/5510571/gwt-mvp-with-places-activities-wheres-the-model)的回答者提出的模型。

在阅读[了这篇关于 AsynchProvider 模式的文章](http://jcheng.wordpress.com/2010/02/16/elegant-code-splitting-with-gwt/)后，我试图将所有这些最佳实践结合在一起并实现一个架构：

*   我实现了代码拆分，使得窗格中的每个选项卡都是代码拆分（是代码*拆分吗？codesplat*？*）*作为它自己的片段，并且只有当/当用户第一次点击它时才会下载
**   显示/渲染/实现每个片段（选项卡/窗格）所需的所有代码都整齐地组织并遵循`AsynchProvider`上述文章中引用的模式；这允许它被划分并且不依赖于其他片段*

 *我开始将所有部分放在一起，但仍然没有看到这两个概念如何在工作代码中联系在一起。

我发现 GWT 是神秘的、强大的和美妙的，但是如果没有可遵循的实际代码示例，则很难学习。当然，这些线框在“ *fantasyo* ”或“ *profile* ”窗格中并没有真正显示出任何复杂性，所以请再次忍受并假装它们都是相当复杂的显示区域，具有许多丰富的 UI 组件。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T10:06:47.170

如果*显示区域* **包含**选项卡窗格，那么无论您使用的是活动还是地点都无关紧要。

要拆分选项卡内容，只需将 a`SimplePanel`作为*真正的*选项卡内容，并通过侦听`SelectionEvent`s 来加载其内容。
或者，您可以使用将返回 a 的 a`LazyPanel`并*异步*加载其余代码。`createWidget``SimplePanel`*

# php - 为什么像 PHP 这样的服务器端脚本能够控制客户端 cookie？

> ID：13026915
> 
> 赞同：1
> 
> 时间：2012-10-23T09:04:08.977
> 
> 标签：php, cookies, principles

我是一个新手，目前我正在通过设计一个小而基本的网页来学习 PHP。我想在我的代码中添加一个 cookie 处理脚本。首先我打算用Javascript来做。但是当我浏览 PHP 的 cookie 管理功能并看到它们的[详细](http://php.net/manual/en/function.setcookie.php)程度时，我感到非常惊讶。

但我不明白这背后的机制。PHP 据说是一个服务器端脚本。它如何控制我电脑中的 cookie？它是如何做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:09:05.327

通过设置 HTTP 标头（服务器端）或 JavaScript（客户端）来设置 Cookie。

当您调用该[`setcookie()`](http://php.net/manual/en/function.setcookie.php)函数时，PHP 会生成一个如下所示的 HTTP 响应标头：

```
Set-Cookie: name=value 
```

有关详细信息，请查看此 Wikipedia 文章： [http ://en.wikipedia.org/wiki/HTTP_cookie](http://en.wikipedia.org/wiki/HTTP_cookie)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:08:37.583

当用户单击链接时，请求标头被发送到相关的服务器，该服务器保留了该网站。然后，Web 服务器使用回复标头进行响应。然后，回复标头在 wnd 处有一个空格，向浏览器发出 HTML 正在传入的信号。

回复标头包含诸如 cookie、传入数据的编码等内容，因此 Web 服务器本身并不控制 cookie，但它会指示浏览器做什么和存储什么，即 cookie

# google-apps-script - 具有自定义设置字段的站点中的小工具

> ID：13026916
> 
> 赞同：0
> 
> 时间：2012-10-23T09:04:15.687
> 
> 标签：google-apps-script

我想知道以下是否可能。

当您在站点页面中插入小工具时，您可以配置一些设置，例如高度、边框和 url。

是否可以添加自定义字段来配置小工具？

例如，使用选择小工具 (url)，然后会出现其他字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:08:00.800

有一些变通方法可以实现这种功能（即每个站点页面都有一组脚本参数），但不可能专门按照您的要求进行。即在脚本小工具界面上放置一个参数字段。

无论如何，这似乎是 Google Apps Script gadgets for Sites 可以提供的一个非常好的增强功能。[您可以在 Apps Script issue tracker](http://code.google.com/p/google-apps-script-issues/issues/list)上打开增强请求。

# jquery - fadeSlideShow 描述 onslide

> ID：13026917
> 
> 赞同：0
> 
> 时间：2012-10-23T09:04:18.383
> 
> 标签：jquery, fadein

我正在使用 fadeSlideShow onslide 来控制图像及其描述的显示。

当前的开发可以在这里看到：http: [//uat.hemingweb.com/homepage.php](http://uat.hemingweb.com/homepage.php)

幻灯片来自这里[http://www.dynamicdrive.com/dynamicindex14/fadeinslideshow.htm](http://www.dynamicdrive.com/dynamicindex14/fadeinslideshow.htm)

我遇到的问题是将文本更改与图像同步。目前看起来，一旦图像加载，文本就会发生变化。我希望测试淡入与图像同步。

```
onslide:function(curimage, index){
  var imagearray=this.setting.imagearray    
  jQuery("#hometext").html(imagearray[index][3])
} 
```

jQuery 不是我的强项，有没有办法更快地启动文本更改并将其淡入？

在每条文本附加到 2 个图像的那一刻，我需要避免文本两次淡入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:08:51.007

你可以使用类似的东西

```
setTimeout(function(){changeMyImage()}, 1000); 
```

使用超时。第一个参数是需要调用的函数，第二个是等待时间，单位是毫秒，所以changeMyImage()在等待1秒后被调用。

# grep - 最有效的 grep 方法

> ID：13026926
> 
> 赞同：0
> 
> 时间：2012-10-23T09:04:45.187
> 
> 标签：grep

目前我正在从包含以下任何内容的文件中获取数据：

```
342163477\|405760044\|149007683\|322391022\|77409125\|195978682\|358463993\|397650460\|171780277\|336063797\|397650502\|357636118\|168490006............... 
```

此列表更长，包含约 700 个不同的值。

提取它的最有效方法是什么？我可以把它切成 10/20/50/100 的一部分……或者还有其他的 unix 方法吗？这个 grep 被传送到 python 以进行足够快的进一步分析。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:22:32.060

分裂只会让事情变得更糟。除非在退化的情况下，这真的无关紧要，这不是，正则表达式的长度或复杂程度：执行时间是相同的。

# android - 同一设备上的多个应用程序的 GCM 注册 ID 是否唯一？

> ID：13026934
> 
> 赞同：3
> 
> 时间：2012-10-23T09:05:28.040
> 
> 标签：android, push-notification, google-cloud-messaging

我有一个使用接收通知的应用程序`GCM`。我注册了一个终端：

```
GCMRegistrar.register(this, SENDER_ID); 
```

要获得注册 ID，我打电话：

```
final String regId = GCMRegistrar.getRegistrationId(this); 
```

如果我对不同的应用程序使用相同的 SENDER_ID 和 API_KEY，每个应用程序的**注册 ID会不同吗？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T20:55:28.447

是的，每个应用程序的注册 ID 都会不同。

# android - 我需要在 SVN 中备份 Eclipse Android 项目中的哪些文件夹？

> ID：13026935
> 
> 赞同：2
> 
> 时间：2012-10-23T09:05:30.567
> 
> 标签：android, eclipse, svn, tortoisesvn

真的都在标题中：我不想包含由 Eclipse 生成的文件夹——我只想知道我需要在我的 SVN 备份中包含的最低限度是什么。

我猜是 AndroidManifest.xml、src、assets（在我的情况下是空的）和 res。那么包含 android-support-v4.jar 的库呢？还要别的吗？

我的 SVN 在 eclipse 之外，因为我有几个不同语言的项目，并且我使用的 TortoiseSVN 本身安装在我的 PC 上。所以我不想使用任何集成插件。

谢谢。

PS：我检查了其他类似的问题/答案，但没有人真正回答这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T09:19:00.447

首先，SVN 不是备份，它是版本控制。不要将其用作备份。

其次，如果您使用集成插件、命令行客户端或某些 UI 工具，则没有区别。

最后，您不想放入 VC 中的通常是生成的文件和特定于您的工作区的文件（如果多个人正在处理代码）。对于 Android 项目，生成的文件包括`bin/`和`gen/`目录。为方便起见，您可能希望放入`libs/`VC，但这不是绝对必要的，因为您可以从其他地方获取库。另一方面，将它们放入 VC 可以保证每个人都使用相同的版本。特定于工作区的文件是 Eclipse 的`.settings/`、`.metadata`等。还建议将项目代码和 Eclipse 工作区目录分开，以便在 Eclipse 出现问题时轻松恢复。

因此，排除上述内容并将其他所有内容放在 VC 中。

# android - onShowCustomView 的解决方法

> ID：13026936
> 
> 赞同：4
> 
> 时间：2012-10-23T09:05:32.940
> 
> 标签：android, webview, android-videoview

我需要在嵌入 webview 的 videoview 中提取当前正在播放的视频的 Uri。我可以使用此处提供的解决方案在 android 2.1 到 2.3.7 上运行

[Android 从 VideoView 获取视频源路径](https://stackoverflow.com/questions/7321817/android-get-video-source-path-from-videoview)。

不幸的是，这在上面的 android 3.0 中不起作用，因为 onShowCustomView 回调不是在最小化模式下调用的。

此问题也记录在这里
[http://code.google.com/p/android/issues/detail?id=36020](http://code.google.com/p/android/issues/detail?id=36020)

任何人都可以为我提供任何替代解决方法来获取 videoview uri。

好的搜索了一下（请参阅答案[https://stackoverflow.com/a/3866411/1135101](https://stackoverflow.com/a/3866411/1135101)）显然有一种方法可以通过 JNI 监听视频事件。现在的事情是我不知道如何编写一个 JNI 函数来监听视频事件。任何人都可以说这是否可能以及如何去做。

好的最后的努力

根据这个答案 [Show HTML5 Video Fullscreen](https://stackoverflow.com/questions/12319790/show-html5-video-fullscreen)

onShowCustomView 在全屏模式下调用。现在的问题是当我无法控制网站时，如何强制视频以全屏模式播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T00:14:54.783

我相信`WebViewClient.shouldInterceptRequest(android.webkit.WebView, java.lang.String)`可能会有所帮助。您将需要过滤掉视频网址并简单地返回`null`.

# apache - 127.0.0.1/asd 在 ubuntu 环境下不起作用

> ID：13026937
> 
> 赞同：0
> 
> 时间：2012-10-23T09:05:36.343
> 
> 标签：apache, .htaccess, ubuntu, webserver

我在微软环境下工作，但现在我把我的网站搬到了 ubuntu，问题是，当我尝试写一个这样的链接时，127.0.0.1/asd，我没有找到错误，让我抓狂的是，该 URL 有时工作有时不工作，它在 Windows 环境下工作得很好，这是我得到的错误，

```
Not Found The requested URL /asd was not found on this server. 
```

这是我的.htaccess，

```
# compress text, html, javascript, css, xml:
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript
# Or, compress certain file types by extension:
<files *.html>
SetOutputFilter DEFLATE
</files>
RewriteEngine On
RewriteRule ^([//a-zA-Z0-9_-]+)$ tab.php?tab_id=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T20:14:41.967

您的问题似乎是您的重写规则-“//”应该是“\/”-您的 apache conf 文件是什么样的，是否为该目录启用了 .htaccess？

# .net - VS2010 异步 CTP 和 VS2012 异步定位包在同一个解决方案中

> ID：13026938
> 
> 赞同：1
> 
> 时间：2012-10-23T09:05:36.640
> 
> 标签：.net, visual-studio-2012, .net-4.5, async-await, async-ctp

当我想使用异步 CTP 关键字时，我在这里遇到了一个问题。所有开发人员机器都是 VS2010，因此需要安装异步 CTP - 已经完成并且使用这些功能编写了代码。但是，当我开始提交此代码时，我意识到我们的构建服务器安装了 VS2012（因此安装了 .NET 4.5），因为另一个团队需要 C++11 功能并共享此资源。

这意味着持续构建服务器会导致我们的 C# 构建失败，因为它们现在针对 .NET 4.0（我们仍然有 WinXP 用户计算机）使用异步方法以及启用这些新关键字的 CTP 方法。通过将异步目标包安装到这些项目中，我得到了其他编译​​错误（同一类定义了两次，一次在 CTP 中，一次在异步目标包中）。

有没有办法让这两种方法很好地结合在一起？显然，我们完全打算尽快让所有开发人员在 VS2012 上工作 - 更不用说让我们的用户启动并运行 .NET 4.5，但这超出了问题的范围。

我有一个解决方案，我已在下面回答，但希望得到任何反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:11:01.870

我宁愿建议将开发机器更新到 VS2012，而不是针对两个真正不同的库 - AsyncCTP 和 Async Targeting Pack 进行构建。这些不仅仅是可互换的，它们的实现方式也不同，并且可能会发生，您的代码将与 AsyncCTP 一起使用，而不是在 ATP 中。

将您的项目更新到具有本机 async/await 支持的 .NET 4.5 可能是这里的最佳解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:05:36.640

我对上述问题的解决方案是在所有“启用异步”的 .csproj 文件中使用条件引用：

```
<Reference Include="AsyncCtpLibrary" 
  Condition="'$(BuiltOnNet45)'==''">
  <HintPath>..\..\lib\AsyncCtpLibrary.dll</HintPath>
</Reference>
<Reference Include="Microsoft.CompilerServices.AsyncTargetingPack.Net4" Condition="'$(BuiltOnNet45)'=='true'">
  <HintPath>..\..\lib\Microsoft.CompilerServices.AsyncTargetingPack.Net4.dll</HintPath>
</Reference> 
```

然后，当我使用我们的 VS2012 构建机器进行构建时，我使用 msbuild.exe 标志“/p:BuiltOnNet45=true” - 并在使用我们的开发机器时将其关闭。由于空白是默认值，因此该解决方案允许我们在 VS2010 中加载和使用解决方案而不会出现问题。如果我也使用 VS2012 IDE，我将不得不对此进行调整，但我不需要这个。

# facebook - Facebook 仍然返回时间戳格式

> ID：13026941
> 
> 赞同：0
> 
> 时间：2012-10-23T09:05:42.740
> 
> 标签：facebook, facebook-graph-api, facebook-fql

从“事件时区”迁移开始，Facebook 将时间戳时间格式更改为 UTC。我正在开发一个原生 android 应用程序并运行 fql 查询以获取用户信息。问题是我仍然将时间作为时间戳而不是 UTC，但在尝试通过 GRAPH-API 工具运行简单的 fql 时，我得到的是 UTC 格式的时间。

facebook 上的事件时区迁移说明： [https ://developers.facebook.com/docs/reference/fql/event/](https://developers.facebook.com/docs/reference/fql/event/)

有没有人遇到同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T17:44:41.097

在 facebook 应用程序设置上：应用程序->编辑应用程序->高级->并启用事件时区

（正如 CBroe 建议的那样）

# javascript - 有没有一种简单的方法可以找出操作 DOM 元素的 js 代码？

> ID：13026942
> 
> 赞同：8
> 
> 时间：2012-10-23T09:05:42.143
> 
> 标签：javascript, debugging, dom

我在浏览一个网站时看到了一些有趣的东西：一个以有趣的方式动画的 DOM 元素。我想弄清楚它是如何完成的，所以我开始深入研究源代码。我花了很长时间才找到执行此操作的代码。

有谁知道一种“跟踪” DOM 元素的方法，以便您可以检测到它被操纵的代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T09:08:57.790

在 Chrome 中，您可以添加 DOM 断点。[你可以在这里](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#dom)找到更深入的解释。

简而言之，您在 Elements 面板中选择要检查的 DOM 元素，然后选择`Break On...`-> `Subtree Modifications`。当 DOM 元素更改其*结构*时，您将被指向执行该操作的 JS 代码。

~~但是，如果您特别关注执行动画的 JS 代码，那只能更改元素的 CSS，据我所知，没有办法打破这一点。~~

~~另一方面，Chrome 在让您[中断](https://developers.google.com/chrome-developer-tools/docs/scripts-breakpoints#listeners)浏览器中发生的 JavaScript 事件方面也非常灵活。正如[jfrej 建议](https://stackoverflow.com/a/13027215/182629)的那样，您可以查看触发动画的动作并在此基础上中断。~~

您可以`Attributes modification`从同一元素菜单 ( `Break On...`) 设置断点，它也会在 CSS 更改时中断。感谢[Bergi](https://stackoverflow.com/users/1048572/bergi)在评论中提出的建议。在这里尝试了一个[简单的例子](http://jsfiddle.net/ES8Jp/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T09:21:29.133

在大多数情况下，JavaScript 需要使用某种选择器来修改 HTML 结构或应用 CSS。想想选择器可能是什么——它通常是 ID 或 Class。

Firebug 可以在多个文件中进行搜索 - 只需转到 Script 选项卡，将焦点放在搜索字段中并选中*Multiple Files*。这样，您应该能够找到以 DOM 元素为目标的代码。

或者，如果动画是由事件触发的，例如鼠标点击，您可以使用 Chrome 的开发者工具在*Sources*选项卡下添加 Event Listener Breakpoints，其工作方式与[Alex](https://stackoverflow.com/a/13027005/206614)描述的 DOM Breakpoints 相同。

# django - 将某些用户限制为 Django 中的一页

> ID：13026943
> 
> 赞同：0
> 
> 时间：2012-10-23T09:05:47.870
> 
> 标签：django, django-authentication

我想知道如何将特定用户的访问权限限制在他们登录后只能访问一页。

我在我的用户模型中有

```
deactivated = models.BooleanField(default=False) 
```

如果用户已登录并且他们的帐户已停用，我只想向他们显示停用页面。我不想让他们去网站上的任何其他地方，除非他们再次激活他们的帐户。实现它的最好和最简单的方法是什么？

**编辑：**我负担不起浏览我拥有的每一个视图并在其上附加一个装饰器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:29:21.713

如果您不想使用装饰器方法，最好的办法是编写一个[中间件](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs)来检查是否`request.user`已激活，然后在必要时重定向（到他们可以重新激活帐户的页面）。

大致你想要这样的东西：

```
from django.shortcuts import redirect

class DeactivatedRedirectMiddleware(object):

    def process_request(self, request):
        if request.user and not request.user.is_anonymous():
            if request.user.deactivated and request.get_full_path() != '/some/url/':
                # redirect here
                return redirect('/some/url/')
        # ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:08:45.977

您可以使用装饰器功能来检查用户是否被激活并重定向他。 [如何在 django 中编写自定义装饰器？](https://stackoverflow.com/questions/5469159/how-to-write-a-custom-decorator-in-django)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:10:26.473

使用视图装饰器。

关于它的好文章：http: [//passingcuriosity.com/2009/writing-view-decorators-for-django/](http://passingcuriosity.com/2009/writing-view-decorators-for-django/)

# windows - 如何区分空窗口文本和 GetWindowText API 错误？

> ID：13026945
> 
> 赞同：7
> 
> 时间：2012-10-23T09:05:48.710
> 
> 标签：windows, winapi

该`GetWindowText`函数的返回值[记录如下](http://msdn.microsoft.com/EN-US/library/windows/desktop/ms633520%28v=vs.85%29.aspx)：

> 如果函数成功，则返回值是复制字符串的长度（以字符为单位），不包括终止空字符。如果窗口没有标题栏或文本，如果标题栏为空，或者窗口或控制句柄无效，则返回值为零。要获取扩展错误信息，请调用 GetLastError。

现在，当调用此方法并接收到返回值为零时，我如何知道是否`GetLastError`会返回一个合理的值？毕竟，零不仅用于表示失败，还可能意味着窗口文本为空，在这种情况下`GetLastError`不会返回未定义的值。

我自己的想法：

*   起初，我认为这可能`GetWindowText`会在成功时将最后一个错误设置为 0。但是测试表明它没有（如果确实如此，我无论如何都不能依赖它，因为这没有记录在案）。
*   然后，我认为可能`GetWindowText`会在成功时保持最后一个错误不变，因此在调用之前自己将其设置为 0 可以让我检查最后一个错误是否已更改。测试表明这可能有效，但由于它没有以这种方式证明，我不能依赖它。（我想这在很大程度上取决于具体情况和实施`GetWindowText`。）
*   而且，当然，我可以首先使用检查窗口文本长度`GetWindowTextLength`，然后`GetWindowText`仅在长度大于 0 时才调用。但是，如果窗口在调用`GetWindowTextLength`和之间更改其文本`GetWindowText`怎么办？同样，我不能依赖返回值为零来表示错误。

那么，我该怎么做才能确定是否`GetWindowText`失败？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T14:10:33.570

`SetLastError(ERROR_SUCCESS)`事先是完全安全和支持的。

last-error 代码的文档清楚地表明，函数可能会或可能不会清除成功时的 last-error 值。然而，可以肯定的是，如果一个函数成功，它将保持最后一个错误值不变，或者将其设置为零，但永远不会将其更改为错误值。

WinAPI函数的实现规则可以概括为：

1.  `SetLastError`如果没有发生错误，请不要调用。
2.  如果辅助函数设置了错误代码，但不会导致 API 失败，请调用`SetLastError(0)`以使非致命内部错误对调用者不可见，[或者调用`RestoreLastError`并将`GetLastError`入口返回的任何内容传递给 API](http://blogs.msdn.com/b/oldnewthing/archive/2011/04/29/10159322.aspx)
3.  如果您的 API 在没有引发 SEH 异常的情况下失败，请调用`SetLastError`以报告它（除非辅助函数已经这样做了）。

记录在案的行为“某些函数`SetLastError`在成功时调用零”是第 2 点的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T11:49:26.823

是的，您是对的，您实际上无法使用`GetLastError()`来查看差异。不漂亮。我能想到的唯一解决方法是`IsWindow()`之后使用。如果返回 TRUE，则返回零实际上意味着“空字符串”。然而，这并不能处理传递错误的缓冲区指针，希望在您的代码中很容易避免。

# c# - Linq-to-SQL，传递表达式 > 在查询语法中选择方法

> ID：13026948
> 
> 赞同：4
> 
> 时间：2012-10-23T09:06:03.673
> 
> 标签：c#, linq, linq-to-sql, linq-query-syntax

假设，我们有下一个代码：

```
public class Dto
{
  public int Id;
  public string Name;
}    

...

using (var db = new NorthwindDataContext())
{
  var q = from boss in db.Employees
          from grunt in db.Employees.Where(p => p.ReportsTo == boss.EmployeeID).DefaultIfEmpty()
          select new Dto { Id = boss.EmployeeID, Name = grunt.FirstName };
} 
```

我想将选择器提取为表达式并将其存储在另一个地方。在方法语法中，它将如下所示：

```
Expression<Func<Employee, Employee, Dto>> selector = (boss, grunt) => new Dto
{
  Id = boss.EmployeeID, Name = grunt.FirstName
};

using (var db = new NorthwindDataContext())
{
  var q = db.Employees.SelectMany(boss => db.Employees.Where(p => p.ReportsTo == boss.EmployeeID).DefaultIfEmpty(), selector);
} 
```

是否可以将此 LinqToSql 方法链转换为保持 Expression 变量就地的查询语法？

**升级版：**

为了澄清我的问题，我使用 DefaultIfEmpty 进行左连接，它是相等查询的一种简短形式：

```
using (var db = new NorthwindDataContext())
{
  var q = from boss in db.Employees
          join stub in db.Employees on boss.EmployeeID equals stub.ReportsTo into stubi
          from grunt in stubi.DefaultIfEmpty()
          select new Dto { Id = boss.EmployeeID, Name = grunt.FirstName };
} 
```

它可以正常工作，因为它使用内联表达式进行编译。`null`当没有对应的 时，它分配给 Name 字段`grunt`。但是如果用调用外部映射器方法重写这个查询，它将被编译为方法调用，这将得到可为空`grunt`的参数，并会导致 NullReferenceException：

```
public static Dto GetDto(Employee boss, Employee grunt)
{
  return new Dto
    {
      Id = boss.EmployeeID,
      Name = grunt.FirstName
    };
}

using (var db = new NorthwindDataContext())
{
  var q = from boss in db.Employees
          join stub in db.Employees on boss.EmployeeID equals stub.ReportsTo into stubi
          from grunt in stubi.DefaultIfEmpty()
          select GetDto(boss, grunt);
} 
```

当然，我可以在映射器方法中添加空检查，但我在 DAL 中试图实现的是将选择器提取到映射器类中，并可能在那里省略空检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:23:42.923

您不能总是使用查询语法，在某些情况下您只能使用方法链来表达计算。在这种特定情况下，如果谓词是内联的，则查询语法将在幕后引入 lambda，但是您将其放入变量中，因此您无法指定应如何使用该变量，就像使用 lambda 一样，支持通过查询语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T09:22:53.937

我不确定你为什么需要`Expression`- 只需使用`Func`. 这应该有效：

```
Func<Employee, Employee, Dto> selector = (boss, grunt) => new Dto 
{ 
Id = boss.EmployeeID, Name = grunt.FirstName 
}; 

using (var db = new NorthwindDataContext()) 
{ 
var q = from boss in db.Employees 
        from grunt in db.Employees.Where(p => p.ReportsTo == boss.EmployeeID).DefaultIfEmpty() 
        select selector(boss, grunt)
} 
```

# struts2 - 如何使用 Struts2 Jquery Plugin 实现过滤搜索

> ID：13026959
> 
> 赞同：2
> 
> 时间：2012-10-23T09:06:35.033
> 
> 标签：struts2, struts2-jquery, jqgrid

我正在尝试为我的 Struts2 jquery 网格实现过滤器搜索。如果我搜索任何字符串（通过 jquery 过滤器文本框），那么它正在调用我的操作类，但我无法在我的操作类中获取搜索字符串。我试图在我的 Action 类中打印这一行，但 Search String 没有出现在我的 Action 类中。

```
System.out.println("This line is getting printed But search textbox values is not printing."+searchString+""+searchField); 
```

请为此帮助我，我尝试了很多，但仍在尝试。 **我的代码：**

主题信息.jsp

```
 <%@ page contentType="text/html; charset=UTF-8"%>
            <%@ taglib prefix="s" uri="/struts-tags"%>
            <%@ taglib prefix="sj" uri="/struts-jquery-tags"%> 
            <%@ taglib prefix="sjg" uri="/struts-jquery-grid-tags"%> 
            <html>
            <head>
            <title>Hello World</title> 
            <style type="text/css">
            @import
            url(<%=request.getContextPath()%>/css/style1.css);
            </style> 
             <sj:head jqueryui="true" jquerytheme="le-frog"/> 
            </head>
            <body> 
                <div id="setpage"> <s:url id="editurl" action="nedit"/>
                    <s:url id="editurl" action="nedit"/>
                    <s:url  id="remoteurl" action="ntable"/>

                    <sjg:grid
                       id="gridtable"
                        caption="Customer Examples"
                        dataType="json"
                        filter="true" 
                        filterOptions="{ stringResult :true, 
                        searchOnEnter : false, 
                        enableClear : true, 

                        gridModel="gridModel"
                        rowList="10,15,20"
                        navigatorDelete="true">
                    <sjg:gridColumn name="id" index="subjectId" title="ID" formatter="integer" sortable="true" key="true" 
                                       search="true" searchoptions="{sopt:['eq']}" editable="true"  hidden="true"   />

                    <sjg:gridColumn name="subjectName" index="subjectName" title="Subject Name" sortable="true" search="true"
                                        editable="true"
                                        edittype="text" />
                    </sjg:grid> 

                    </div>
            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T22:36:14.603

来自[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:toolbar_searching](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:toolbar_searching)

当 stringResult 选项设置为 true 时，发布到服务器的数据是一个字符串，并且发布的数据的结构与高级搜索中的相同。

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options)

So I think your problem is that you are looking for searchString, but the jqgrid is sending a request variable called filters, which is a json string as described in the advanced search options link.

# jquery - 循环浏览图像

> ID：13026963
> 
> 赞同：2
> 
> 时间：2012-10-23T09:06:48.273
> 
> 标签：jquery, html, css

我知道这很多，但我就是无法让它工作：/

```
 <div class='container'>
        <img src="images/1.jpg" alt="">
        <img src="images/2.jpg" alt="">
    </div> 
```

所以我有 2 张图片，它们使用下面的 CSS 固定为浏览器窗口的完整大小：

```
 <style type="text/css">
        .container {
            position:fixed; 
            top:-50%; 
            left:-50%; 
            width:200%; 
            height:200%;
        }
        .container img {
            position:absolute; 
            top:0; 
            left:0; 
            right:0; 
            bottom:0; 
            margin:auto; 
            min-width:50%;
            min-height:50%;
        }
    </style> 
```

目前，它只显示最后一张图片 (2) 以全尺寸显示。但是，我想使用一些 jQuery 来显示第一个，然后在 X 秒后，淡出数字 1 并循环淡入每个图像。我认为最好使用 setInterval，然后使用 fadeOut，然后使用 fadeIn 图像，但无论我做什么都行不通。

我试图沿着这条线走：

```
 <script type="text/javascript">
        $(document).ready(function() {

            $('.container').children('img').each(function(i) { 
                $(this).fadeOut();
            }); 

        });
    </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T09:27:04.443

你可以试试这个。

```
$(document).ready(function() {
    var _intervalId;

    function fadeInLastImg()
    {
        var backImg = $('.container img:first');
        backImg.hide();
        $('.container' ).append( backImg );
        backImg.fadeIn()
    };

    _intervalId = setInterval( function() 
    {
        fadeInLastImg();
    }, 1000 );

});​ 
```

这是 jsFiddle [http://jsfiddle.net/KQ3wu/128/](http://jsfiddle.net/KQ3wu/128/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:15:37.823

**[jsBin 演示](http://jsbin.com/amocov/4/edit)**

刚刚修改了 Fademe jQuery 插件以删除鼠标悬停，因为您使用全屏图像:)：

```
(function($){
    $.fn.fademe = function(F,P,S){
        F=F||700;
        P=P||3000;
        S=S-1||0;       
        var e=this.children(), T;
        function a(){ e.eq(S=++S%e.length).fadeTo(F,1).siblings(e).stop(1).fadeTo(F,0); }
        e.eq(S).show().siblings(e).hide();
        function aa(){T=setTimeout(function(){a();aa();},F+P);}aa();
    };
})(jQuery);

// USE PLUGIN:
$(function(){    
  $('.container').fademe();  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T09:08:18.993

试试这个代码：

```
<script type="text/javascript">
        $(document).ready(function() {
            var intervalId = setInterval(function() {
              $('.container').find('img').each(function(i) { 
                $(this).fadeOut();
              }); 
            $(this).data('intervalId', intervalId);
        });
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T09:47:37.087

```
<script>
function showImage1()
{
    $('#IDimage1').show();
    setTimeout(showImage2,3000);
}

function showImage2()
{
   $('#IDimage1').hide();
   $('#IDimage2').show();
}
</script> 
```

好吧，这只是最简单的方法，除此之外，您可以尝试从 JQuery 切换或淡入/淡出功能

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-24T08:00:49.537

使用[插件 jquery-timing](http://creativecouple.github.com/jquery-timing/)它是一个单行：

```
$.repeat(1000).$('#container img:first').hide().appendTo('#container').fadeIn(); 
```

参见小提琴：http: [//jsfiddle.net/creativecouple/zjUEs/](http://jsfiddle.net/creativecouple/zjUEs/)

# map - MapQuest JS API - 如何定位自定义标记图标

> ID：13026965
> 
> 赞同：2
> 
> 时间：2012-10-23T09:07:13.187
> 
> 标签：map, mapquest

我想在 MapQuest 上放置我的自定义标记，因为位置指向图标的中间，而不是图标的底部（图标是“图钉”的图像）。

```
var icon=new MQA.Icon("/images/market.png",30,70);
    locator.setIcon(icon);
    map.addShape(locator); 
```

非常感谢提前

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T16:48:07.533

免责声明：我为 MapQuest 工作。

您可以在 POI 上使用 setIconOffset 方法定位自定义图标。这是一个简单的例子：

```
var myIcon=new MQA.Poi( {lat:39.739217, lng:-104.984861} );
myIcon.setIcon(new MQA.Icon('img/arrowicon.png', 72, 87));
myIcon.setIconOffset(new MQA.Point(-43,-72)); 
```

您传递给 MQA.Point 的第一个数字本质上是图标的 CSS 左偏移量，而第二个是顶部。

如果您需要帮助，请随时回复评论或查看[MapQuest Developer Network](http://developer.mapquest.com)上的[论坛](http://developer.mapquest.com/web/info/forums)。

# java - 如何覆盖休眠集合连接列？

> ID：13026969
> 
> 赞同：9
> 
> 时间：2012-10-23T09:07:23.110
> 
> 标签：java, hibernate

这是我抽象的父亲：

```
@MappedSuperclass   
public abstract class AbstractEntity implements Serializable {

    @OneToMany(fetch = FetchType.LAZY)
    @JoinColumn(name = "entity_no", referencedColumnName = "MY_COLUMN")
    private Set<CLASS_TYPE> list; 
} 
```

我所有的实体都有这个集合，但每个实体都有不同的`referencedColumnName`.

有没有办法只覆盖`@JoinColumn`注释？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-23T10:01:16.183

您可以使用[AssociationOverride](http://www.objectdb.com/api/java/jpa/AssociationOverride)注释。在您的情况下，它看起来像这样：

```
@Entity
@AssociationOverrides({
   @AssociationOverride(name = "list",
      joinColumns = @JoinColumn(referencedColumnName = "COLUMN_NEW_NAME"))
})
public class ConcreteEntity extends AbstractEntity {

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T09:18:29.273

如果您在属性（即getter）而不是字段上定义注释，那么您可以`public Set<CLASS_TYPE> getList()`在每个子类中覆盖并`@JoinColumn`单独定义。

# cruisecontrol.net - MSB3491：无法将行写入文件巡航控制

> ID：13026972
> 
> 赞同：3
> 
> 时间：2012-10-23T09:07:33.113
> 
> 标签：cruisecontrol.net, clearcase

当我尝试从 MSBUILD 构建解决方案文件时收到以下错误。
我正在从 ClearCase 集成流构建解决方案文件。

当我从不同的系统执行相同操作时，它在集成流上运行良好。

我已经尝试创建文件并将其写入 N/W 驱动器，它工作正常。

但是当我通过**CruiseControl**构建它时，它会引发以下错误。

```
 C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Microsoft.Common.targets(3041,9): 
 error MSB3491: 
 Could not write lines to file "obj\DAL.csproj.FileListAbsolute.txt".  
 Access to the path 'M:\yj73_SRDV3G_Proj_01_00_int\SRM_COMP\SRDV3G_Project\CRDB_V3\Application_Source\DAL\obj\DAL.csproj.FileListAbsolute.txt' is denied. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:34:35.373

两个常见的原因：

*   环境变量设置不正确，`CLEARCASE_PRIMARY_GROUP`并且没有引用 Vob 的主要或次要组`\SRM_COMP`（请参阅`cleartool descr -l vob:\SRM_COMP`这些组的列表）
*   当前配置规范以某种方式未选择路径。
    最好使用 cleartool ls in`M:\yj73_SRDV3G_Proj_01_00_int\SRM_COMP\SRDV3G_Project\CRDB_V3\Application_Source\DAL`查看 ClearCase 的显示方式`obj`。

[OP user1383839](https://stackoverflow.com/users/1383839/user1383839) [确认没有为](https://stackoverflow.com/a/13050026/6309)[Build Loop](http://cruisecontrol.sourceforge.net/main/index.html)使用正确的帐户，这意味着它没有从正确的环境变量中受益，因此出现“拒绝访问”消息。
或者您也可以作为不同的用户“运行”项目（请参阅“[在不同的凭据下运行 Cruise control.net](https://stackoverflow.com/questions/3016959/running-cruise-control-net-under-different-credentials) ”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:15:21.803

这个问题得到了解决！:)

我使用的是本地帐户 上一个

您需要转到巡航控制的属性并更改它正在使用的帐户。

# jquery - 使用浏览器后退按钮导航时，下拉列表选择的值不会返回

> ID：13026974
> 
> 赞同：2
> 
> 时间：2012-10-23T09:07:41.307
> 
> 标签：jquery, asp.net-mvc-3, html-select

我有一个下拉列表。一旦用户更改其选择的值，页面就会重新加载。

html 看起来像这样：

```
<select id="period" name="MyViewModel.Period">
    <option selected="selected" value="/Home/11-2012/Index">November 2012</option>
    <option value="/Home/10-2012/Index">October 2012</option>
</select> 
```

jquery 脚本如下所示：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('select#period').change(function () {
            var temp = $(this).find('option:selected').val();
            document.location.href = temp;
        });
    });
</script> 
```

一切都很好，但是如果用户在重新加载原始页面时使用浏览器的*后退按钮，则它的选定值已更改。*它肯定会让用户感到困惑。

那么，通过浏览器后退按钮导航到上一页时，是否可以避免更改下拉列表值？

PS：这个[ASP.NET DropdownList autopostback 和 Browser Back Button](https://stackoverflow.com/questions/1235841/asp-net-dropdownlist-autopostback-and-browser-back-button)看起来像一个类似的问题，但它没有答案，只有一个想法，使用 java 脚本重新分配值。但我没有明白如何......我希望关闭缓存不是唯一的出路。那我最好放弃使用下拉列表...

[这是](https://stackoverflow.com/questions/13025421/how-to-refresh-a-page-on-dropdownlist-value-change)我原来的帖子，这让我想到了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T10:15:05.980

> 一旦用户更改其选择的值，页面就会重新加载。

如果您可以使用 ajax 重新加载页面的内容，那么您将不会遇到此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T00:57:37.077

这是解决我的问题的解决方法。

我添加了一个链接，显示当前日期，并隐藏了下拉列表：

HTML：

> ```
> <select id="period_s" name="_WorkerInfoViewModel.Period">
>     <option value="url1">November 2012</option>
>     <option selected="selected" value="url2">October 2012.</option>
> </select>
> <a id="period_a" data="url2">October 2012</a> 
> ```

CSS：

```
select#period_s {
display:none;
}

a#period_a {
cursor:pointer;
} 
```

然后我添加了一个 jquery 脚本来切换下拉列表并更改下拉列表中的选定值。选定值更改后，我再次隐藏列表：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('select#period_s').change(function () {
            var temp = $(this).find('option:selected').val();                
            $(this).toggle();
            document.location.href = temp;
        });
        $('a#period_a').click(function () {
            $('select#period_s').val($(this).attr('data'));
            $('select#period_s').toggle();
        });
    });
</script> 
```

在有人给出更好的解决方案之前，我会将其标记为答案。

# msbuild - MSBuild 使用通配符从文件中复制任务和条件名称

> ID：13026975
> 
> 赞同：1
> 
> 时间：2012-10-23T09:07:41.440
> 
> 标签：msbuild

我有一个 FilesToExclude2.txt 文件，其中包含所有排除项，如下所示：

```
*.settings
*#*
*.vbproj*
*.csproj*
*\Errors\*
*\Errors
*\_vti_*\*
*\_vti_*
*\CVS\* 
```

在我的任务文件中，有一个复制任务

```
 <Target Name="CustomModuleCopy">
    <ItemGroup>
      <ModuleFiles Include="$(SolutionModuleName)\$(ProjectModuleName)\**\*.*" />
      <FileToExclude Include="$(BasePath)\$(SolutionModuleName)\FilesToExclude2.txt" />
    </ItemGroup>
    <ReadLinesFromFile File="@(FileToExclude)">
      <Output TaskParameter="Lines" ItemName="FileContents" />
    </ReadLinesFromFile>

    <Copy SourceFiles="@(ModuleFiles)" DestinationFiles="@(ModuleFiles->'$(DestFolder)\$(ProjectModuleName)\%(RecursiveDir)%(Filename)%(Extension)')" Condition="'%(ModuleFiles.Identity)' != @(FileContents)" ContinueOnError="false" />

    <!--CallTarget Targets="RemoveCustomModuleConfigFiles" /-->
  </Target> 
```

如果没有复制任务的“条件”属性，一切正常，但我不知道如何使用通配符实现条件以及是否可能

任何形式的帮助将不胜感激:)这让我吓坏了几个小时......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T20:20:08.310

改用 exclude 属性不是更容易吗？如项目 xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

```
<ItemGroup>
  <ModuleFiles Include="c:\code\**\*.*"
               Exclude="@(FileContents)" />
</ItemGroup>

<!--<Copy SourceFiles="@(ModuleFiles)" DestinationFolder="Some|Destination" Condition="'%(ModuleFiles.Identity)' != @(FileContents)" ContinueOnError="false" />

CallTarget Targets="RemoveCustomModuleConfigFiles" /--> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T13:26:37.090

以下代码

```
<Target Name="CustomModuleCopy">
  <ItemGroup>
      <FileToExclude Include="$(BasePath)\$(SolutionModuleName)\FilesToExclude.txt" />
  </ItemGroup>
  <ReadLinesFromFile File="@(FileToExclude)">
    <Output TaskParameter="Lines" ItemName="FileContents" />
  </ReadLinesFromFile>
  <ItemGroup>
    <ModuleFiles Include="$(SolutionModuleName)\$(ProjectModuleName)\**\*.*" Exclude="@(FileContents)" />
  </ItemGroup>
  <Copy SourceFiles="@(ModuleFiles)" DestinationFiles="@(ModuleFiles->'$(DestFolder)\$(ProjectModuleName)\%(RecursiveDir)%(Filename)%(Extension)')" ContinueOnError="false" />
  <Message Text="Exclude = @(FileContents)" />
  <!--CallTarget Targets="RemoveCustomModuleConfigFiles" /-->
</Target> 
```

在控制台中生成此输出：

```
copy /y "CPBMessaging\CPBMessagingWeb_NotificationMessage\Web.Debug.config" "C:\__CPB\CPBSite\CPBMessagingWeb_NotificationMessage\Web.Debug.config"
Copying file from "CPBMessaging\CPBMessagingWeb_NotificationMessage\Web.Release.config" to "C:\__CPB\CPBSite\CPBMessagingWeb_NotificationMessage\Web.Release.config"
copy /y "CPBMessaging\CPBMessagingWeb_NotificationMessage\Web.Release.config" "C:\__CPB\CPBSite\CPBMessagingWeb_NotificationMessage\Web.Release.config"
Exclude = *.cab;*.config;*.vb;*.cs;*.resx;*.xsx;*.bak;*.myapp;*.settings;*#*;
*.vbproj*;*.csproj*;*\Errors\*;*\Errors;*\_vti_*\*;*\_vti_*;*\CVS\*;*\CVS; 
```

# php - Facebook Sharer 也显示图片

> ID：13026978
> 
> 赞同：1
> 
> 时间：2012-10-23T09:08:01.563
> 
> 标签：php, html

我正在使用此代码在我的 wordpress 网站上放置一个 facebook 分享按钮：

```
 <a target="_blank" href="http://www.facebook.com/sharer.php?u=<?php the_permalink();?>&t=<?php the_title(); ?><?php the_title(); ?>">
        <img src="<?php bloginfo('template_url'); ?>/images/facebook.png"/>
    </a> 
```

问题是当我点击 facebook 图标时，它会打开分享帖子的窗口，但只显示帖子的标题，而不是其中的图像。

它看起来像这样：

![在此处输入图像描述](../Images/6939c8328acec8af1fe59030245a98dc.png)

如何修复代码以共享帖子上的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T09:23:58.953

您需要在标题中打开图形标签

对于图像：

```
<meta property="og:image" content="LINK_TO_IMAGE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:57:21.107

您将需要使用 rrikesh 所述的 facebook 开放图元标记。例如：

```
<meta property="og:title" content="The Rock"/>
<meta property="og:type" content="movie"/>
<meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
<meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/>
<meta property="og:site_name" content="IMDb"/>
<meta property="fb:admins" content="USER_ID"/>
<meta property="og:description" content="A group of U.S. Marines, under command of a renegade general, take over Alcatraz and threaten San Francisco Bay with biological weapons."/> 
```

[您可以在https://developers.facebook.com/docs/opengraphprotocol/](https://developers.facebook.com/docs/opengraphprotocol/)查看 facebooks 协议

此外，当用户在 facebook 上放置 url 时，它会缓存相关信息以加快未来的发布速度。要刷新此缓存，请使用以下开发人员工具。

[https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)

享受

# c# - 等待返回语句，直到 Timer 结束

> ID：13026980
> 
> 赞同：0
> 
> 时间：2012-10-23T09:08:03.550
> 
> 标签：c#, multithreading, timer, wait

我有一个返回 bool 值的方法，但应该等待返回值，直到 System.Timers.Timer 引发 elapsed 事件，因为我要返回的值是在计时器的 elapsed 事件中设置的。

```
public static bool RecognizePushGesture()
{
    List<Point3D> shoulderPoints = new List<Point3D>();
    List<Point3D> handPoints = new List<Point3D>();
    shoulderPoints.Add(Mouse.shoulderPoint);
    handPoints.Add(Mouse.GetSmoothPoint());
    Timer dt = new Timer(1000);
    bool click = false;

    dt.Elapsed += (o, s) =>
    {
        shoulderPoints.Add(Mouse.shoulderPoint);
        handPoints.Add(Mouse.GetSmoothPoint());
        double i = shoulderPoints[0].Z - handPoints[0].Z;
        double j = shoulderPoints[1].Z - handPoints[1].Z;
        double k = j - i;
        if (k >= 0.04)
        {
            click = true;
            dt.Stop();
        }
    };

    dt.Start();

    //should wait with returning the value until timer raises elapsed event
    return click;
} 
```

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T09:17:00.070

使用 AutoResetEvent

```
public static bool RecognizePushGesture()
    {
        AutoResetEvent ar = new AutoResetEvent(false);
        List<Point3D> shoulderPoints = new List<Point3D>();
        List<Point3D> handPoints = new List<Point3D>();
        shoulderPoints.Add(Mouse.shoulderPoint);
        handPoints.Add(Mouse.GetSmoothPoint());
        Timer dt = new Timer(1000);
        bool click = false;
        dt.Elapsed += (o, s) =>
        {
            shoulderPoints.Add(Mouse.shoulderPoint);
            handPoints.Add(Mouse.GetSmoothPoint());
            double i = shoulderPoints[0].Z - handPoints[0].Z;
            double j = shoulderPoints[1].Z - handPoints[1].Z;
            double k = j - i;
            if (k >= 0.04)
            {
                click = true;
                dt.Stop();
            }
            ar.Set();
        };
        dt.Start();

        //should wait with returning the value until timer raises elapsed event
        ar.WaitOne();
        return click;
    } 
```

# xquery - 如何在 Marklogic 中使用 xquery 获取隐藏字段的值？

> ID：13026981
> 
> 赞同：0
> 
> 时间：2012-10-23T09:08:08.803
> 
> 标签：xquery, marklogic

我在 xqy 页面中有一个隐藏字段。现在我想通过 xquery 代码在同一页面中获取它的值。页面不刷新。我不想使用 javascript。有什么方法可以在不提交页面的情况下使用 xquery 获取隐藏字段的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:47:46.223

您可以使用 XForms，而不是简单的 HTML 并直接输出它。[http://en.wikibooks.org/wiki/XForms](http://en.wikibooks.org/wiki/XForms)上提供了一些关于 XForms 的详尽文档

然后可以使用 XForms-Processor（例如 XSLTForms 或 BetterForms），它可以在服务器端和客户端使用。这允许您使用纯 X 技术获取任何字段（不仅仅是隐藏字段）的值。默认情况下，XForms 还包括 MVC，这非常好。但是，根据您的项目和已经存在的代码量，您可能需要进行很多更改，因为它是一项完整的技术。但通常这是避免使用 JavaScript 而使用 X* 的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:03:17.723

You would need XQuery capabilities within the browser. MarkLogic runs server-side, so needs a round-trip (e.g. a submit). But you could have a look at XQiB: [http://www.xqib.org/](http://www.xqib.org/)

HTH!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T14:27:49.523

这个问题很模糊，可以用几种不同的方式来解释：如果你提出更好的问题，你会得到更好的答案。

但我会比 Geert 乐观一点。如果表单字段位于由服务器 XQuery 模块构建的 HTML 表单中，那么它的数据必须在该模块构建表单时可供该模块使用。在返回已完成的页面之前，安排您的代码，以便您可以将其用于任何需要的地方。

您可能正在寻找一些神奇的方法来针对实际运行的查询的半完整结果编写 XPath。如果没有您的一些工作，这是不可能的。您可以安排您的代码，使表单或隐藏字段是某个其他函数返回的节点，并编写相对于它的 XPath 以检索其值。如果隐藏字段是使用上一个 HTTP 请求中的请求参数构建的，您可以`xdmp:get-request-field`再次调用。关键是安排您的代码，以便您在需要时拥有所需的数据。

[https://github.com/mblakele/cq](https://github.com/mblakele/cq)上的 XQuery 代码可能有一些有用的示例。它可以玩各种带有表单字段的游戏，无论是否使用 JavaScript。

# php - 使用 PHP 和 cURL 删除

> ID：13026986
> 
> 赞同：-1
> 
> 时间：2012-10-23T09:08:21.273
> 
> 标签：php, facebook, curl

我仍在为我的网站构建 Facebook Build in like 系统......这是创建类似操作的 cURL 代码：

```
curl -F 'access_token=AAAAAKcSOZB8IBACXBZBQ1F5fUqqEeueY0bkj7eAZAeAWgjU5vU8c8ZC5X8L1ZAWGYVTlR0vySQQU0raZCuNCmPlcjxavrG6hsZD' \
     -F 'object=http://samples.ogp.me/226075010839791' \
        'https://graph.facebook.com/me/og.likes' 
```

它通过执行此代码在 PHP 上工作

```
$attachment =  array(
'access_token' => 'AAAAAKcSOZB8IBACXBZBQ1F5fUqqEeueY0bkj7eAZAeAWgjU5vU8c8ZC5X8L1ZAWGYVTlR0vySQQU0raZCuNCmPlcjxavrG6hsZD',
'object' => 'http://samples.ogp.me/226075010839791',
'actions' => json_encode(array('name' => $action_name,'link' => $action_link))
);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,'https://graph.facebook.com/me/og.likes');
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output 
$result = curl_exec($ch);
curl_close ($ch);

$obj = json_decode($result);
$idrespond =  $obj->{'id'}; 
```

Facebook 发回一个 17 位数字 ( **$idrespond** )，我将其存储在我的 SQL 中，因为它需要删除类似...

我不知道该怎么做，是在 cURL 中使用 DELETE 函数...... facebook 说这是删除之类的代码：

```
curl -X DELETE \
     -F 'access_token=AAAAAKcSOZB8IBACXBZBQ1F5fUqqEeueY0bkj7eAZAeAWgjU5vU8c8ZC5X8L1ZAWGYVTlR0vySQQU0raZCuNCmPlcjxavrG6hsZD' \
        'https://graph.facebook.com/{'{id_from_create_call}'}' 
```

我如何在 php 中应用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:11:21.787

您可以使用该选项`CURLOPT_CUSTOMREQUEST`并将其设置为`DELETE`。URL 参数仍将使用`CURLOPT_POSTFIELDS`.

```
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'DELETE'); 
```

从[手册](http://php.net/manual/en/function.curl-setopt.php)：

> 执行 HTTP 请求时使用的自定义请求方法，而不是“GET”或“HEAD”。这对于执行“删除”或其他更晦涩的 HTTP 请求很有用。有效值为“GET”、“POST”、“CONNECT”等；即不要在此处输入整个 HTTP 请求行。例如，输入“GET /index.html HTTP/1.0\r\n\r\n”是不正确的。

# jaxb - 使用 jax-b 的 Jax-rs 客户端编组实体列表

> ID：13026990
> 
> 赞同：0
> 
> 时间：2012-10-23T09:08:27.463
> 
> 标签：jaxb, jax-rs

我需要在 jax-rs 客户端中使用 jax-b 编组一个实体列表，而不需要为每个需要的实体创建一个包装类（有很多实体！）。我注意到该服务能够编组这样的客户列表：

```
<customers>
    <customer>.....</customer>
    <customer>.....</customer>
</customers> 
```

我在客户端能够通过查找所有客户节点并将它们手动添加到列表中来解组。（我想有更好的方法来做到这一点？）

现在，真正的问题是当我想向服务发送实体（例如客户）列表时。在将此字符串作为对服务的请求的有效负载之前，我想将此列表编组为一个 xml 字符串。这不起作用，因为编组器不知道 java.util.List 或其后代。

```
javax.xml.bind.Marshaller.marshal(list, StringWriter);
javax.xml.bind.Unmarshaller.unmarshal(org.​w3c.​dom.node) 
```

任何帮助深表感谢！

谢谢！-Runar

编辑：

这是客户类的一个片段：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Customer implements Serializable {
    private String name;
    .....
} 
```

我正在尝试使用不属于标准实现的第 3 方库来编写轻量级客户端。因此，我编写了自己的 httpclient 接收有效负载对象，将它们编组并将它们传递给请求的有效负载。收到响应后，我读取 xml 并将其发送到解组。如果我可以像我的 jax-rs 服务那样直接对字符串进行编组/解组，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:13:11.613

好的，所以我没有找到很好的解决方案。但由于我的 jax-rs 服务的模式似乎是生成一个名为 的根节点`<class name " + "s>`，所以我这样做是为了能够将对象列表发送到服务：

```
if (obj instanceof List) {
    List list = (List) obj;
    if (!list.isEmpty()) {
        // Since the jax-b marshaller does not allow to send lists directly,
        // we must attempt to create the xml as the jax-rs service would expect them,
        // wrapped with the classname pluss an s.
        String wrapper = list.get(0).getClass().getSimpleName() + "s";
        // Make first letter in class-name lower-case
        wrapper = Character.toLowerCase(wrapper.charAt(0)) +
                  (wrapper.length() > 1 ? wrapper.substring(1) : "");
        marshaller.setProperty(javax.xml.bind.Marshaller.JAXB_FRAGMENT, true);
        writer.write("<" + wrapper + ">");
        for (Object o : (List) obj) {
            marshaller.marshal(o, writer);
        }
        writer.write("</" + wrapper + ">");
    }
} else {
    marshaller.marshal(obj, writer);
} 
```

# function - 一组值的累积分布函数

> ID：13026995
> 
> 赞同：0
> 
> 时间：2012-10-23T09:08:41.647
> 
> 标签：function, distribution, probability, cdf

我有一个直方图，我在其中计算函数采用 0.8 和 2.2 范围内的特定值的出现次数。

我想获得一组值的累积分布函数。只计算每个特定值之前的出现总数是否正确。

例如，0.9 处的 cdf 将是从 0.8 到 0.9 所有出现的总和？

这是对的吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:25:14.250

由条目数归一化的总和将为您提供 cdf 的估计值，是的。它将与直方图一样准确，它是 pdf 的准确表示。如果您想在除 bin 端点之外的任何地方评估 cdf，则包含一小部分计数是有意义的，这样如果您有断点 b_i 和 b_j，那么要在某个点 b_i < p < b_j 评估 cdf，您应该添加来自相关单元格的计数分数 (p - b_i) / (b_j-b_i)。本质上，这假定细胞内的密度均匀。

您也可以从基础值中获得 cdf 的估计值（根据您的问题，我不太确定您可以访问什么，它的 bin 是否计入直方图中或实际值）。请注意，这样做会在每个数据点上给您的 CDF 不连续性（步骤），因此请考虑您是否有足够的 CDF，以及您使用 CDF 的目的，以确定这是否合适。

作为警告的最后一点，请注意，在观察值范围之外评估 cdf 将为您提供零或一的估计概率（x<0.8 为零，x>2.2 为一）。您应该考虑该函数是否真正有界于该区间，如果不是，则使用一些平滑来确保在观察值范围之外的少量概率质量。