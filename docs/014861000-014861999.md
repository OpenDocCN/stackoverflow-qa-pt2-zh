# StackOverflow 问答 14861000-14861999

# ms-access - MS Access 中 VBA 中的查询表达式中的语法错误（缺少运算符）

> ID：14861000
> 
> 赞同：0
> 
> 时间：2013-02-13T19:01:45.570
> 
> 标签：ms-access, vba

我收到以下错误消息：查询表达式中缺少 3075 运算符

这里有一小段代码：

```
Dim dbs As Database
Set dbs = CurrentDb()
dbs.Execute "DELETE FROM TempTable_Entity_mapping_DEFSET_Selection;"
Do While Not rsDEFSET.EOF
    Debug.Print rsDEFSET.Fields.item("RESULT").Value
    MIP = rsDEFSET.Fields.item("FK_DIM_MBR_ITEM").Value
    KPIName = rsDEFSET.Fields.item("SHORTNAME_MBR").Value
    ID = rsDEFSET.Fields.item("RESULT").Value
    DefSetName = rsDEFSET.Fields.item("KPI_DEFSET_NAME")
    Scenarios = rsDEFSET.Fields.item("SCENARIOS")

    fillTempTab = "INSERT INTO TempTable_Entity_mapping_DEFSET_Selection (MIP, KPIName, ID, DefSetName, Scenarios) VALUES ('" & MIP & "','" & KPIName & "','" & ID & "','" & DefSetName & "','" & Scenarios & "');"
    Debug.Print fillTempTab
    dbs.Execute fillTempTab
    rsDEFSET.MoveNext
Loop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T20:56:33.020

看起来您缺少要在 SQL 语句中删除的内容

您的第一个查询应为

```
DELETE * FROM TempTable_Entity_mapping_DEFSET_Selection; 
```

# android - Facebook 服务器在查询时返回空数据。在 Graph API Explorer 上查询相同的结果给了我正确的 JSON 数据

> ID：14861003
> 
> 赞同：1
> 
> 时间：2013-02-13T19:01:49.967
> 
> 标签：android, json, facebook-graph-api, facebook-android-sdk

我正在尝试从 facebook 上的特定相册中获取照片。在查询时，下面的尝试`URL`给了我完美的数据`Graph API Explorer`。但它在我的应用程序代码中返回 null。

此外，当我在浏览器上尝试时，它返回给我：

```
{
 "data": { 
    ]
 } 
```

基本上`null`：

URL = " [https://graph.facebook.com/3386086936429/photos?limit=10](https://graph.facebook.com/3386086936429/photos?limit=10) ";

```
try {
HttpClient hc = new DefaultHttpClient();
HttpGet get = new HttpGet(URL);
HttpResponse rp = hc.execute(get);

String st=rp.toString();

Log.e("RESPONSE", st);
Log.e("ACCESS_TOKEN",at);

if (rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
       String queryAlbums = EntityUtils.toString(rp.getEntity());

       int s=rp.getStatusLine().getStatusCode();
       String a=String.valueOf(s);
       Log.e("RESPONSE-IF", a);

       JSONObject JOTemp = new JSONObject(queryAlbums);

       JSONArray JAPhotos = JOTemp.getJSONArray("data");

      Log.e("JSONArray", String.valueOf(JAPhotos));
      Log.e("JSONArray-Length",String.valueOf(JAPhotos.length())); 
```

日志：

```
02-14 00:12:34.280: E/RESPONSE(1320)org.apache.http.message.BasicHttpResponse@40518ac8
02-14 00:12:34.301: E/RESPONSE-IF(1320): 200
02-14 00:12:34.310: E/JSONArray(1320): []
02-14 00:12:34.310: E/JSONArray-Length(1320): 0 
```

查询时我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:45:15.763

当我尝试在 Facebook 上访问您的 ID 或通过 Graph API 查询时，我收到“不支持的获取请求”错误。这告诉我要么你的 id 有误，要么这个 id 对谁可以查看有限制。

If you are able to view this information, then you can only get this information if you have an access token from a user who meets that object's restrictions.

# c# - 试图理解 ASP.net 中的 C# 和 XML 电子表格

> ID：14861004
> 
> 赞同：0
> 
> 时间：2013-02-13T19:01:50.013
> 
> 标签：c#, asp.net-mvc-3, xml-spreadsheet

我目前正在构建一个 Web 应用程序，它将以 Excel 电子表格格式为用户提供他们在当前页面上的表格上看到的相同信息。我在另一个做同样事情的项目中发现了一些以前的代码。

首先是一个小问题：有人知道 Column ss:Width 是如何工作的吗？这不是完全匹配。`Column ss:AutoFitWidth="0" ss:Width="114"`返回 21.00 的列宽...

我最麻烦的地方是，传递到电子表格的所有数据都有前导和尾随空格；我不知道如何删除它。我`.Trim()`在进行`.ToString()`查询时尝试过，并且一直在寻找其他方法，但似乎没有找到。以下是我的工作表代码片段：

```
 <Worksheet ss:Name="UserMgmt1">
        <Table>        
            @*Name*@
            <Column ss:AutoFitWidth="0" ss:Width="114" /> 
             <Row>
                 <Cell ss:StyleID="s29">
                  <Data ss:Type="String">Name</Data> 
                  </Cell>

             </Row>
        @foreach (tbl_Users query in ViewBag.contents )
            {
            <Row>
                <Cell ss:StyleID="s31">
                    <ss:Data ss:Type="String" >
                        @(query.Name.ToString().Trim())
                    </ss:Data>
                </Cell>
            </Row>
            }
     </Table>
 </Worksheet> 
```

忘记添加实现此代码的 ActionResult：

```
 public ActionResult _Excel(tblUsers model)
    {
        List<tbl_Users> inquiriesList = UserManageModel.GetResults(model);
        ViewBag.contents = inquiriesList;
        return View("_Excel");
    } 
```

和电话：

```
@using (Html.BeginForm("_Excel", "UserManage", FormMethod.Post))
{
    <input type="submit" value="View Detailed List of Users in Excel" />
} 
```

结果在 Excel 中如下所示，每个字符串项周围都有很多空格：

```
 Administrator 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:40:52.337

According to the XML Excel spec on MSDN [http://msdn.microsoft.com/en-us/library/aa140066(v=office.10).aspx#odc_xmlss_ss:column](http://msdn.microsoft.com/en-us/library/aa140066(v=office.10).aspx#odc_xmlss_ss:column) The ss:Width is the column width in points (which may render differently based on screen resolution, etc).

The extra spaces around your trimmed text may be due to your indenting. Try collapsing that XML element like this:

```
<ss:Data ss:Type="String" >@(query.Name.ToString().Trim())</ss:Data> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:35:50.980

原来我的问题一直是我的`<Row>`代码格式

```
<ss:Data ss:Type="String" >
       @(query.Name.ToString().Trim())
</ss:Data> 
```

标记之间的前导和后继空格`<ss:Data>`被复制到 Excel 文档中。我不知道为什么会这样，但这解决了我的问题。

# c# - Unity 无法解析 Session_Start 中的接口并解析错误的 DbContext

> ID：14861005
> 
> 赞同：1
> 
> 时间：2013-02-13T19:01:58.530
> 
> 标签：c#, asp.net-mvc-3, dependency-injection, unity-container

我正在使用 Mvc3 和[Unity.Mvc3](http://unitymvc3.codeplex.com/)来构建一个可测试和解耦的站点，但我显然做错了什么。

在我的`Application_Start()`我注册了一个依赖：

```
// container is a property of the MvcApplication
// and the HierarchicalLifetimeManager should make sure that the registrations
// only last for this request (or should it?)
_container.Register<Interface, Class>(new HierarchicalLifetimeManager()) 
```

然后在`Session_Start()`我尝试解决我的依赖关系以将一些数据保存到会话中：

```
var obj = _container.Resolve<Interface>(); 
```

此时我得到一个异常说Unity无法解析接口，但我以为我为那个接口注册了一个类？？？

我很茫然，找到解决方案越来越难。

**编辑：**

这是我的整个代码，省略了一些不必要的部分：

```
public class MvcApplication : System.Web.HttpApplication  
{   
    // as EDIT 2 says, this is wrong...
    //private IUnityContainer _container = new UnityContainer();

    protected void Application_Start()
    {
        // mvc stuff, routes, areas and whatnot

        // create container here and it works, almost
        var container = new UnityContainer();

        // register dependencies            
        string connectionString = "String from config";
        container.RegisterInstance<DbContext>(new CustomContext(connectionString), new HierarchicalLifetimeManager())
                 .RegisterType<IUnitOfWork, UnitOfWork>(new HierarchicalLifetimeManager())
                 .RegisterType(typeof(IRepository<>), typeof(Repository<>), new HierarchicalLifetimeManager());

        // register controller resolver
        DependencyResolver.SetResolver(new UnityDependencyResolver(container));

        // if i try to resolve repos here, it works and they all have the same context
        // just like the unit of work
    }

    protected void Session_Start()
    {
        // here the container complains that it can't resolve the interface

        // wrong
        //var userRepo = _container.Resolve<IRepository<User>>();

        // right, but still failes, because it is resolving DbContext
        // instead of using the CustomContext instance
        var userRepo = DependencyResolver.Current.GetService<IRepository<User>>();

        // save some user data to session           
    }
}

public class SampleController : Controller {

    // here the container tries to resolve the System.Data.Entity.DbContext
    // instead of just giving the repo that instance that I registered
    public SampleController(IRepository<Entity> repo) {
    }

} 
```

我显然在这个工作单元，依赖注入的东西上失败了，最糟糕的是我不知道为什么......所以在我开始拔牙之前请帮忙。

**编辑2：**

部分在那里。如果我按上述方式创建容器，它会在`Session_Start()`. 如果我在 中创建它`Application_Start()`作为局部变量，并使用`DependencyResolver`，它可以工作。怎么打，为什么打我？

但它仍在尝试解决`DbContext`而不是`CustomContext`实例。

**解决方案：**

好的，这是交易：

问题1）访问容器`Session_Start()`：

如 EDIT 2 中所述，使用本地容器变量可以解决该问题，并通过`DependencyResolver`作品访问容器。

问题2）解析注册的数据库上下文实例：

事实证明，注册实例不起作用。但这确实：

```
container.RegisterType<DbContext, CustomContext>(null, new HierarchicalLifetimeManager(), new InjectionConstructor(connectionString)) 
```

但我并不真正感到满意，因为我仍然不明白为什么会这样。看来我很长一段时间都需要读一本书什么的。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:07:16.783

与其直接访问容器（从你的 Q 中不清楚你在哪里获得对容器的引用？），为什么不让 MVC 依赖解析器解决它呢？

设置依赖解析器（Application_Start()）：

```
DependencyResolver.SetResolver(new UnityDependencyResolver(container)); 
```

解决您的界面（Session_Start()）：

```
var obj = DependencyResolver.Current.GetService<IMyInterface>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T05:42:11.457

问题是您使用`RegisterInstance`的是`HierarchecalLifetimeManager`. 我猜你正在尝试为每个请求获取一个新实例，因为 Unity.Mvc3 项目使用 LifetimeManager 来发挥这种魔力（以及 HttpModules 来管理子容器的创建和销毁）。

问题是，当一个新请求进来时，它会想要构造一个新对象，但不知道怎么做；您只是在应用程序启动时注册了一次实例，而不是创建对象的方法。所以你需要使用 RegisterType() 才能工作。

你有两个选择：

1.  使用 InjectionConstructor 指定注入值：`RegisterType<DbContext, CustomContext>(new HierarchecalLifetimeManager(), new InjectionConstructor(connectionString))`

2.  使用工厂：（`Container.RegisterType<DbContext>(new InjectionFactory(c => new CustomContext(connectionString)), new HierarcicalLifetimeManager())`受此[启发](https://stackoverflow.com/questions/7771097/ioc-register-instance-issue-with-mvc3-unity-nhibernate-unity-mvc3-lib-from)）

*注意：参数顺序可能有误。

如果您想要为整个应用程序提供一个真正的单例实例，请使用`ContainerControlledLifetimeManager()`（这实际上是 RegisterInstance 的默认值，因此您甚至不需要指定它）。但是随着站点的使用，您的 DbContext 将变得相当大。

此外，关于未在 Session_Start() 中注册的项目的初始问题：

ASP.NET 维护一个 HttpApplication 类池。这意味着如果您将 Unity 容器设为成员变量，您将拥有多个实例，它们都有自己的注册。Application_Start() 只被调用一次，而 Session_Start() 可以使用没有注册的不同实例调用。您需要使用静态变量来解决这个问题（这就是您最终使用 DependencyResolver 所做的事情）。

# facebook - Facebook API，通过他的 ID 获取朋友的名字

> ID：14861006
> 
> 赞同：1
> 
> 时间：2013-02-13T19:01:58.517
> 
> 标签：facebook, facebook-fql

我写了一个 FQL 查询来获取标记我的朋友的名字 -

这是 FQL 查询，它为我提供了朋友 ID 的列表（有效）：

**SELECT owner FROM photo WHERE object_id IN (SELECT object_id FROM photo_tag WHERE subject=me())**

现在我想通过查询来获取他们的名字：

**SELECT name FROM user WHERE uid IN (SELECT owner FROM photo WHERE object_id IN (SELECT object_id FROM photo_tag WHERE subject=me()))**

但我没有得到完整的名称列表，它停止并给出了这个错误 - **“未捕获的类型错误：无法读取未定义的属性‘名称’”**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:26:16.510

您的查询可能会失败，因为`owner`您的内部查询返回的某些 id 不属于用户。`profile`改用表格试试：

```
SELECT name FROM profile WHERE id IN 
  (SELECT owner FROM photo WHERE object_id IN 
    (SELECT object_id FROM photo_tag WHERE subject=me())) 
```

# python - 使用while循环检查输入是否为回文时的IndexError

> ID：14861016
> 
> 赞同：0
> 
> 时间：2013-02-13T19:02:26.427
> 
> 标签：python, loops, while-loop, palindrome

我想知道如何使用 Python 检查输入是否是带有 while 循环的回文。

谢谢：

我试过这个

```
i = 0
n = len(msg_list)

while i < n:
    palindrome = msg_list[i]
    if palindrome == msg_list[-1]:
        print("Palindrome? True")
        msg_list.pop(-1)
    else:
        print("Palindrome? False")
    i=i+1 
```

但最后我收到一条错误消息，指出列表索引超出范围

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:15:19.310

您不需要迭代到最后，而只需要迭代到中间字符。并在反向计数时将每个字符与同一索引处的字符进行比较：

```
s = "abcca"
length = len(s)
i = 0

while i < length / 2 + 1:
    if s[i] != s[-i - 1]:
        print "Not Palindrome"
        break
    i += 1
else:
    print "Palidrome" 
```

`else`当`while`循环在没有任何`break`.

* * *

或者，如果您可以使用除`while`循环之外的任何其他内容，那么此任务就在`single`以下行中`Python`：

```
if s == s[::-1]: 
    print "Palindrome" 
```

哦，变成了两条线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:18:07.783

有一个while循环

```
import string

palin = 'a man, a plan, a canal, panama'

def testPalindrome(in_val):
    in_val = in_val.lower()
    left, right = 0, len(in_val) - 1
    while left < right:
        char_left, char_right = '#', '#'
        while char_left not in string.lowercase:
            char_left = in_val[left]
            left += 1
        while char_right not in string.lowercase:
            char_right = in_val[right]
            right -= 1
        if char_left != char_right:
            return False
    return True

print testPalindrome(palin) 
```

没有

```
>>> palindrome = 'a man, a plan, a canal, panama'
>>> palindrome = palindrome.replace(',', '').replace(' ', '')
>>> palindrome
'amanaplanacanalpanama'
>>> d[::-1] == d
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:20:16.347

使用的简短解决方案`reversed`：

```
for c, cr in s, reversed(s):
    if c != cr:
        print("Palindrome? False")
        break
else:
    print("Palindrome? True") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T19:26:53.810

另一种使用`while`循环的方法。一旦两个字符不匹配，while 循环就会停止，因此它非常有效，但当然不是在 Python 中执行此操作的最佳方法。

```
def palindrome(word):
   chars_fw = list(word)
   chars_bw = list(reversed(word))
   chars_num = len(word)
   is_palindrome = True
   while chars_num:
       if chars_fw[chars_num-1] != chars_bw[chars_num-1]:
           is_palindrome = False
           break
       chars_num -= 1

   return is_palindrome 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-04T20:11:21.370

想我会为仍在查看此问题的人们添加另一种选择。它使用了一个 while 循环，并且相当简洁（尽管我仍然更喜欢这种`if word = word[::-1]`方法。

```
def is_palindrome(word):    
    word = list(word.replace(' ', ''))  # remove spaces and convert to list
    # Check input   
    if len(word) == 1:
        return True
    elif len(word) == 0:
        return False
    # is it a palindrome....    
    while word[0] == word[-1]:
        word.pop(0)
        word.pop(-1)    
        if len(word) <= 1:
            return True
    return False 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-04T20:20:10.500

```
word = "quiniuq"
pairs = zip(word,reversed(word))
a,b = next(pairs)
try:
    while a == b:
        a,b = next(pairs)
    return False # we got here before exhausting pairs
except StopIteration:
    return True # a == b was true for every pair 
```

此处使用 while 循环是人为的，但它会消耗整个列表并执行测试。

如果不需要 while 循环，可以这样做：`all(a == b for a,b in zip(word,reversed(word)))`

# php - CodeIgniter 查看博客文章页面

> ID：14861017
> 
> 赞同：0
> 
> 时间：2013-02-13T19:02:32.727
> 
> 标签：php, codeigniter

大家好，我正在尝试创建一个博客。第一个主页没问题..我正在从数据库中获取 shrot 描述和类别，但是...我的链接有问题：

这是我的控制器功能：

```
public function index()
    {
        $this->load->model('Model_cats');
        $data['posts'] = $this->Model_cats->getLivePosts(10); 
        $data['cats'] = $this->Model_cats->getTopCategories(); 
        $data['title'] = 'Welcome to Paul Harbuz Blog Spot!';
        $data['main'] = 'public_home';
        $this->load->vars($data);
        $this->load->view('template', $data);
    }

    public function category($id)
    {
        $data['category'] = $this->Model_cats->getCategory($id);
        $data['posts'] = $this->Model_cats->getAllPostsByCategory($id);
        $data['cats'] = $this->Model_cats->getTopCategories();
        $data['title'] = $data['category']['name'];
        $data['main'] = 'public_home';
        $this->load->vars($data);
        $this->load->view('template', $data);
    }
    public function post($id)
    {
        $data['post'] = $this->Model_cats->getPost($id);
        $data['comments'] = $this->Model_cats->getComments($id);
        $data['cats'] = $this->Model_cats->getTopCategories();
        $data['title'] = $data['post']['title'];
        $data['main'] = 'public_post';
        $this->load->vars($data);
        $this->load->view('template');
    } 
```

这是我的模型功能：

```
function getTopCategories()
    {
        $this->db->where('parentid',0);
        $query = $this->db->get('categories');
        $data = array();

        if ($query->num_rows() > 0)
        {
            foreach ($query->result_array() as $row)
            {
                $data[$row['id']] = $row['name'];
            }
        }

        $query->free_result();
        return $data;
    }

    function getLivePosts($limit)
    {
        $data = array();

        $this->db->limit($limit);
        $this->db->where('status', 'published');
        $this->db->order_by('pubdate', 'desc');
        $query = $this->db->get('posts');

        if($query->num_rows() > 0)
        {
            foreach($query->result_array() as $row)
            {
                $data[] = $row;
            }
        }

        $query->free_result();
        return $data;
    }

    function getCategory($id)
    {
        $data = array();
        $this->db->where('id',$id);
        $this->db->limit(1);
        $query = $this->db->get('categories');

        if($query->num_rows() > 0)
        {
            $data = $query->row_array();
        }

        $query->free_result();
        return $data;
    }

    function getAllPostsByCategory($catid)
    {
        $data = array();
        $this->db->where('category_id', $catid);
        $this->db->where('status', 'published');
        $query = $this->db->get('posts');

        if($query->num_rows() > 0)
        {
            foreach($query->result_array() as $row){
                $data[] = $row;
            }
        }
        $query->free_result();
        return $data;
    }

    function getPost($id)
    {
        $data = array();
        $this->db->where('id',$id);
        $this->db->limit(1);
        $query = $this->db->get('posts');

        if ($query->num_rows() > 0)
        {
            $data = $query->row_array();
        }

        $query->free_result();
        return $data;
    } 
```

在视图页面中我有这样的东西：

```
if ( count($posts) )
    {
        foreach ($posts as $key => $list)
        {
        echo '<h2>'.$list['title'].'</h2>';
        echo auto_typography(word_limiter($list['body'], 200));
        echo anchor('post/'.$list['id'],'read more >>');
        }

        echo '<br/><br/>';
    } 
```

我在 url 中获取了帖子 ID，但是.. 我不知道为什么找不到该页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:07:34.253

您必须将控制器名称添加到锚 uri 段。

```
echo anchor('CONTROLLER/post/'.$list['id'],'read more >>'); 
```

[CodeIgniter URLs 文档](http://ellislab.com/codeigniter/user-guide/general/urls.html)中有关此主题的更多信息。

如果您想要这样的 URL，`http://example.com/post/123`则必须将以下内容添加到您的`application/config/routes.php`文件中：

```
$route['post/(:num)'] = "CONTROLLER/post/$1"; 
```

[文档](http://ellislab.com/codeigniter/user-guide/general/routing.html)中还提供了有关路由的更多信息。

# c++ - 使用 C++ 中的流操纵器在固定宽度字段中居中文本

> ID：14861018
> 
> 赞同：21
> 
> 时间：2013-02-13T19:02:34.800
> 
> 标签：c++, string, stringstream, ostream, manipulators

我正在重构一些使用`printf`longs 字符串（没有任何实际格式）的遗留代码，以打印出在概念上看起来像这样的纯文本表标题：

```
|  Table   |  Column  | Header  | 
```

目前正在像这样生产：

```
printf("|  Table   |  Column  | Header  |"); 
```

我想用代码生成上面的代码¹：

```
outputStream << "|" << std::setw(10) << std::center << "Table"
             << "|" << std::setw(10) << std::center << "Column"
             << "|" << std::setw(9) << std::center << "Header"
             << "|" << std::endl; 
```

它不能编译，因为`<iomanip>`有流操纵器`std::left`，`std::right`并且`std::internal`，但似乎没有`std::center`。在标准 C++ 库中是否已经有一种干净的方法可以做到这一点，还是我必须手动计算必要的间距？

* * *

¹[尽管这比 C 代码更冗长，但从长远来看，由于`printf`语句的数量和字符串中的中缀重复的数量，它会变得不那么冗长。它也将更具可扩展性和可维护性。]

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2020-12-16T15:34:19.340

在 C++20 中，您将能够使用它[`std::format`](https://en.cppreference.com/w/cpp/utility/format)来执行此操作：

```
outputStream << std::format("|{:^10}|{:^10}|{:^9}|\n",
                            "Table", "Column", "Header"); 
```

输出：

```
|  Table   |  Column  | Header  | 
```

同时你可以使用[基于的 {fmt}](https://github.com/fmtlib/fmt)库`std::format`。{fmt} 还提供了`print`使这更容易和更高效的功能（[godbolt](https://godbolt.org/z/j4rqEf)）：

```
fmt::print("|{:^10}|{:^10}|{:^9}|\n", "Table", "Column", "Header"); 
```

**免责声明**：我是 {fmt} 和 C++20 的作者`std::format`。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-13T19:18:55.557

这是一个帮助类，可以完成你想要的：

```
#include <string>
#include <iostream>
#include <iomanip>

template<typename charT, typename traits = std::char_traits<charT> >
class center_helper {
    std::basic_string<charT, traits> str_;
public:
    center_helper(std::basic_string<charT, traits> str) : str_(str) {}
    template<typename a, typename b>
    friend std::basic_ostream<a, b>& operator<<(std::basic_ostream<a, b>& s, const center_helper<a, b>& c);
};

template<typename charT, typename traits = std::char_traits<charT> >
center_helper<charT, traits> centered(std::basic_string<charT, traits> str) {
    return center_helper<charT, traits>(str);
}

// redeclare for std::string directly so we can support anything that implicitly converts to std::string
center_helper<std::string::value_type, std::string::traits_type> centered(const std::string& str) {
    return center_helper<std::string::value_type, std::string::traits_type>(str);
}

template<typename charT, typename traits>
std::basic_ostream<charT, traits>& operator<<(std::basic_ostream<charT, traits>& s, const center_helper<charT, traits>& c) {
    std::streamsize w = s.width();
    if (w > c.str_.length()) {
        std::streamsize left = (w + c.str_.length()) / 2;
        s.width(left);
        s << c.str_;
        s.width(w - left);
        s << "";
    } else {
        s << c.str_;
    }
    return s;
} 
```

只需调用即可使用它`centered("String")`，如下所示：

```
int main(int argc, char *argv[]) {
    std::cout << "|" << std::setw(10) << centered("Table")
              << "|" << std::setw(10) << centered("Column")
              << "|" << std::setw(9)  << centered("Header") << "|"
              << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-13T19:07:46.073

没有`std::center`操纵器。恐怕你必须自己做。您可以编写一个辅助函数来计算给定宽度和字符串的空间，以减少工作量。

下面是一个帮助函数的样例。它需要一些工作来提高效率，等等。

```
string helper(int width, const string& str) {
    int len = str.length();
    if(width < len) { return str; }

    int diff = width - len;
    int pad1 = diff/2;
    int pad2 = diff - pad1;
    return string(pad1, ' ') + str + string(pad2, ' ');
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-13T19:10:34.170

恐怕你必须手动完成。但是，如果您使用字符串，这并不难。就像是：

```
std::string
centered( std::string const& original, int targetSize )
{
    assert( targetSize >= 0 );
    int padding = targetSize - checked_cast<int>( original.size() );
    return padding > 0
        ? std::string( padding / 2, ' ' ) 
            + original
            + std::string( targetSize - (padding / 2), ' ' )
        : original;
} 
```

应该做的伎俩。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-27T12:03:08.797

这仅适用于那些不需要对代码进行任何额外更改并且不包括像我这样的任何新库的人。

上面给出了许多答案，需要新的帮助类或额外的库，但是有一个简单的 hack 代替，不需要任何额外的更改。您可以将宽度除以 2 并在要打印的元素的任一侧添加 setw() 方法。作为问题的解决方案：

```
outputStream << "|" << std::setw(5) << "Table" << std::setw(5)
             << "|" << std::setw(5) << "Column" << std::setw(5)
             << "|" << std::setw(5) << "Header" << std::setw(5)
             << "|" << std::endl; 
```

上面的代码将完成这项工作。

输出：

```
|  Table   |  Column  | Header  | 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-22T00:16:12.417

你可以使用 NCURSES 库......这有点吓人，你必须在你的编译命令中添加“-L NCURSES”（g++ -L NCURSES yourProgram.cpp）它会起作用，而且你可以做颜色和其他“酷”东西[无论如何对 CLI 来说都很酷]。只需阅读手册，居中的东西很容易。 [http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)

# fix-protocol - 修复外汇交易协议

> ID：14861021
> 
> 赞同：2
> 
> 时间：2013-02-13T19:03:11.570
> 
> 标签：fix-protocol, forex

我正在尝试收集有关 FX（外汇）交易的 FIX 协议的信息。一些旧消息来源提到 FIX 协议通过 FX 相关消息支持得到了扩展： [http ://www.fixprotocol.org/discuss/read/1a070ffc](http://www.fixprotocol.org/discuss/read/1a070ffc)

但我无法在网上找到详细信息。

基本上，我需要了解：

*   要使用什么消息类型。我可以使用 AI（分配提取）还是应该是 FX 特定的消息类型？
*   货币/对应货币对已正确编码。
*   哪些字段将用于数量和/或汇率。
*   应该使用什么 CFI 代码或安全类型。
*   需要提供证券交换（如果有）的价值。

链接到文档就足够了，任何评论将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:50:48.420

FIX 是一个非常模糊的协议，而现实情况是，两个不同的外汇经纪商可以选择使用非常不同的消息和字段定义来做同样的事情。

如果您正在设计一个客户端以连接到现有的商业接口，您应该尽快与您的预期交易对手核实。他们应该有文档来描述他们支持哪些消息、他们需要哪些字段、任何字段自定义以及字段的任何“非正统”用法。

如果您正在设计一个多方连接*到您*的服务器系统，那么您将有一些选择。FIX 的模糊性对您来说是一把双刃剑：您有很多自由走自己的路，但同时它也不容易设计。您可以对默认规范提供给您的消息进行最佳猜测，并确保**为您的客户记录下来**。（在这种情况下，您可能想从现有的交易对手那里获取一些规范，以获取示例。）

关于您的消息来源说“FIX 协议通过 FX 相关消息支持得到了扩展”，很可能这只是新的字段和消息。看起来那些可能在 FIX 4.4 及更高版本中。

如果您想要一个很好的浏览 FIX 消息的来源，请使用[FIXimate](http://fixprotocol.org/FIXimate3.0/)。这是无价的。

# python - 重新采样分钟数据

> ID：14861023
> 
> 赞同：33
> 
> 时间：2013-02-13T19:03:18.797
> 
> 标签：python, pandas

我有开放范围/第一个小时（美国东部标准时间上午 9:30-10:30）的基于分钟的 OHLCV 数据。我希望重新采样这些数据，以便获得一个 60 分钟的值，然后计算范围。

当我对数据调用 dataframe.resample() 函数时，我得到两行，第一行从上午 9:00 开始。我希望只有一排从上午 9:30 开始。

注意：初始数据从 9:30 开始。

![在此处输入图像描述](../Images/8d119c5938481913068193809ef9e1c7.png)

编辑：添加代码：

```
# Extract data for regular trading hours (rth) from the 24 hour data set
rth = data.between_time(start_time = '09:30:00', end_time = '16:15:00', include_end = False)

# Extract data for extended trading hours (eth) from the 24 hour data set
eth = data.between_time(start_time = '16:30:00', end_time = '09:30:00', include_end = False)

# Extract data for initial balance (rth) from the 24 hour data set
initial_balance = data.between_time(start_time = '09:30:00', end_time = '10:30:00', include_end =      False) 
```

卡住试图按个别日期分隔开盘范围并获得初始余额

```
conversion = {'Open' : 'first', 'High' : 'max', 'Low' : 'min', 'Close' : 'last', 'Volume' : 'sum'}
sample = data.between_time(start_time = '09:30:00', end_time = '10:30:00', include_end = False)
sample = sample.ix['2007-05-07']
sample.tail()

sample.resample('60Min', how = conversion) 
```

默认情况下，重新采样从整点开始。我希望它从数据开始的地方开始。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-13T19:10:13.217

您可以使用以下`base`参数[`resample`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.resample.html)：

```
sample.resample('60Min', how=conversion, base=30) 
```

从[上面的文档链接](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.resample.html)：

> `base`: `int`, 默认 0
>     对于均匀细分 1 天的频率，聚合间隔的“原点”。
>     例如，对于“5min”频率，base 的范围可以从 0 到 4。默认为 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-27T11:52:59.817

value 是您要聚合的列，按秒重新采样数据框日期并按平均值聚合，然后删除 nan 行。

```
data=[('2014-02-24 16:16:47.204000',    1.391424)
,('2014-02-24 16:18:48.296000',    1.048143)
,('2014-02-24 16:19:52.346000',  -0.823974)
,('2014-02-24 16:22:13.665000',   -0.689560)
,('2014-02-24 16:24:13.760000',   -0.323252)
,('2014-02-24 16:26:15.155000',   -1.095331)
,('2014-02-24 16:29:58.235000',   -0.185681)]

df=pd.DataFrame(data,columns=['Date','Value'])
df['Date']=pd.to_datetime(df['Date'])
minutes=df.resample('1Min',on='Date').mean().dropna()

print(minutes) 
```

输出：

```
Value
Date                         
2014-02-24 16:16:00  1.391424
2014-02-24 16:18:00  1.048143
2014-02-24 16:19:00 -0.823974
2014-02-24 16:22:00 -0.689560
2014-02-24 16:24:00 -0.323252
2014-02-24 16:26:00 -1.095331
2014-02-24 16:29:00 -0.185681 
```

# jquery - jQuery UI 可选择多级

> ID：14861037
> 
> 赞同：2
> 
> 时间：2013-02-13T19:04:11.230
> 
> 标签：jquery, jquery-ui, jquery-ui-selectable

我希望有多个级别的选择，但选择功能首先触发父母，而不是孩子，有时甚至不注册孩子。我想做类似的事情：

```
<ul>
  <li>Level 1a
    <ul>
      <li>Level 2a</li>
      <li>Level 2b</li>
    </ul>
  </li>
  <li>Level 1b
    <ul>
      <li>Level 2c</li>
      <li>Level 2d</li>
    </ul>
  </li>
</ul> 
```

关于如何使点击 2 级项目注册的任何想法？我希望覆盖它，以便在选择级别 2 时，它会取消选择父级，并且仅将级别 2 显示为突出显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:35:45.123

您希望使子`ul`项可选，而不是父项。使用您当前的示例，执行以下操作：

```
$(function() {
    $('ul').children('li').children('ul').selectable();
 }); 
```

演示：http: [//jsfiddle.net/dirtyd77/FHBMq/1/](http://jsfiddle.net/dirtyd77/FHBMq/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:27:28.703

我可以提出无序列表的唯一解决方案是通过关闭二级无序列表之前的列表项来使用无效标记，例如：

```
<ul>
  <li>Level 1a</li>
    <ul>
      <li>Level 2a</li>
      <li>Level 2b</li>
    </ul>
  </li>
  <li>Level 1b</li>
    <ul>
      <li>Level 2c</li>
      <li>Level 2d</li>
    </ul>
  </li>
</ul> 
```

我不喜欢这样，所以我设置了如下结构：

```
<div class="selectable">
  <div id="level1">Level 1</div>
  <div class="subgroup level1">
    <div id="level1a">Level 1a</div>
    <div id="level1b">Level 1b</div>
  </div>
  <div id="level2">Level 2</div>
  <div class="subgroup level2">
    <div id="level2a">Level 2a</div>
    <div id="level2b">Level 2b</div>
  </div>
</div> 
```

然后我设置可选的，如：

```
$('.selectable').selectable({
  selected: function (event, ui) {
    if ($(ui.selected).hasClass('click-selected')) {
      $(ui.selected).removeClass('click-selected');
      $('.'+ui.selected.id).removeClass('click-selected');
      $('.'+ui.selected.id+' div').removeClass('click-selected');
    } else {
      $(ui.selected).addClass('click-selected');
      $('.'+ui.selected.id).addClass('click-selected');
      if ($(ui.selected).parent('.subgroup').length) {
        $(ui.selected).parent('.subgroup').removeClass('click-selected');
        var cNames = $(ui.selected).parent('.subgroup').attr('class').replace("subgroup","").split(" ");
        $.each(cNames, function(i,c){
          if ($(ui.selected).parent('.subgroup').children().length == $(ui.selected).parent('.subgroup').children('.click-selected').length) {
            $('#'+c).addClass('click-selected');
          } else {
            $('#'+c).removeClass('click-selected');
          }
        });
      }
    }
  },
  filter: "div:not(.subgroup)"
}); 
```

这样做是使任何 div 成为除子组之一之外的选择器。然后我添加了一个新的单击选择的类，因为我希望能够打开和关闭单击选择，同时保留现有的选择。如果所有孩子都被选中，我希望第一个级别被选中，如果他们没有被选中，我希望第一个级别打开和关闭所有孩子。

# c# - 在 LINQ 中，如何修改现有的 LINQ 扩展方法以添加“By”选择器，即添加 Func TResult 到函数签名？

> ID：14861039
> 
> 赞同：5
> 
> 时间：2013-02-13T19:04:17.500
> 
> 标签：c#, .net, linq

我很想知道如何修改现有的 LINQ 函数以添加`Func<T> TResult`到函数签名中，即允许它使用`(o => o.CustomField)`.

例如，在 C# 中，我可以`.IsDistinct()`用来检查整数列表是否不同。我还可以`.IsDistinctBy(o => o.SomeField)`用来检查字段中的整数`o.SomeField`是否不同。我相信，在幕后，附加`.IsDistinctBy(...)`了函数签名之类的东西？`Func<T> TResult`

我的问题是：采用现有的 LINQ 扩展函数并将其转换为具有参数的技术是`(o => o.SomeField)`什么？

这是一个例子。

此扩展函数检查列表是否单调增加（即值永远不会减少，如 1、1、2、3、4、5、5）：

```
main()
{
   var MyList = new List<int>() {1,1,2,3,4,5,5};
   DebugAssert(MyList.MyIsIncreasingMonotonically() == true);
}

public static bool MyIsIncreasingMonotonically<T>(this List<T> list) where T : IComparable
{
    return list.Zip(list.Skip(1), (a, b) => a.CompareTo(b) <= 0).All(b => b);
} 
```

如果我想添加一个“By”，我添加一个参数`Func<T> TResult`。但是如何修改函数的主体以使其选择`(o => o.SomeField)`？

```
main()
{
   DebugAssert(MyList.MyIsIncreasingMonotonicallyBy(o => o.CustomField) == true);
}

public static bool MyIsIncreasingMonotonicallyBy<T>(this List<T> list, Func<T> TResult) where T : IComparable
{
    // Question: How do I modify this function to make it  
    // select by o => o.CustomField?
    return list.Zip(list.Skip(1), (a, b) => a.CompareTo(b) <= 0).All(b => b);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:57:15.470

考虑一个像下面这样的实现，它只枚举给定`IEnumerable<T>`一次。枚举可能会产生副作用，如果可能的话，调用者通常会期望一次传递。

```
public static bool IsIncreasingMonotonically<T>(
    this IEnumerable<T> _this)
    where T : IComparable<T>
{
    using (var e = _this.GetEnumerator())
    {
        if (!e.MoveNext())
            return true;
        T prev = e.Current;
        while (e.MoveNext())
        {
            if (prev.CompareTo(e.Current) > 0)
                return false;
            prev = e.Current;
        }
        return true;
    }
} 
```

您`enumerable.IsIncreasingMonotonicallyBy(x => x.MyProperty)`描述的重载现在可以写成如下。

```
public static bool IsIncreasingMonotonicallyBy<T, TKey>(
    this IEnumerable<T> _this,
    Func<T, TKey> keySelector)
    where TKey : IComparable<TKey>
{
    return _this.Select(keySelector).IsIncreasingMonotonically();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T19:15:27.327

只需将`Func`a 和 b 应用于：

```
public static bool MyIsIncreasingMonotonicallyBy<T, TResult>(this IEnumerable<T> list, Func<T, TResult> selector)
    where TResult : IComparable<TResult>
{
    return list.Zip(list.Skip(1), (a, b) => selector(a).CompareTo(selector(b)) <= 0).All(b => b);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:33:45.170

上面的一个接近正确，但存在问题：

1.  您的列表可能有多个 IEnumeration 枚举

    ```
    public static bool MyIsIncreasingMonotonicallyBy<T, TResult>(
            this IEnumerable<T> list, Func<T, TResult> selector)
        where TResult : IComparable<TResult>
    {
        var enumerable = list as IList<T> ?? list.ToList();
        return enumerable.Zip(
                   enumerable.Skip(1),
                   (a, b) => selector(a).CompareTo(selector(b)) <= 0
               ).All(b => b);
    } 
    ```

PS 我相信你需要删除“this”，因为扩展方法只能在非泛型、非嵌套静态类中声明。

* * *

回应弗雷德里克·哈米迪：

考虑以下：

```
IEnumerable<string> names = GetNames();
foreach (var name in names)   Console.WriteLine("Found " + name);
var allNames = new StringBuilder();
foreach (var name in names)   allNames.Append(name + " "); 
```

假设 GetNames() 返回一个 IEnumerable，我们实际上是通过在两个 foreach 语句中枚举该集合两次来完成额外的工作。如果 GetNames() 导致数据库查询，您最终会执行两次该查询，而两次都获取相同的数据。

这种问题很容易解决——只需通过将序列转换为列表（或者你可以做数组）来强制在变量初始化点进行枚举。数组和列表类型都实现了 IEnumerable 接口。

# c# - 重置 System.Timers.Timer 以防止 Elapsed 事件

> ID：14861047
> 
> 赞同：6
> 
> 时间：2013-02-13T19:05:00.810
> 
> 标签：c#, asp.net, static, timer

我正在尝试使用`Timer`触发事件以通过网络发送数据。我创建了一个简单的类来调试。基本上我有一个`List<string>`我想发送。我希望发生以下情况：

1.  将字符串添加到`List`
2.  开始`Timer`10 秒
3.  将第二个字符串添加到`List`之前`Timer.Elapsed`
4.  10 秒后重新启动`Timer`。

到目前为止，我有这个：

```
public static List<string> list;
public static Timer timer;
public static bool isWiredUp = false;

public static void Log(string value) {
    if (list == null) list = new List<string>();
    list.Add(value);

    //this does not reset the timer, elapsed still happens 10s after #1
    if (timer != null) {
        timer = null;
    }

    timer = new Timer(10000);
    timer.Start();
    timer.Enabled = true;
    timer.AutoReset = false;

    if (!isWiredUp) {
        timer.Elapsed += new ElapsedEventHandler(SendToServer);
        isWiredUp = true;
    }
}

static void SendToServer(object sender, ElapsedEventArgs e) {
    timer.Enabled = false;
    timer.Stop();
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T19:10:37.943

您可以使用该`Stop`函数后跟该`Start`函数来“重新启动”计时器。使用它，您可以`Timer`在第一次创建类时创建，在那时连接 Elapsed 事件，然后在添加项目时只调用这两个方法。它将启动或重新启动计时器。请注意，调用`Stop`尚未启动的计时器什么也不做，它不会引发异常或导致任何其他问题。

```
public class Foo
{
    public static List<string> list;
    public static Timer timer;
    static Foo()
    {
        list = new List<string>();
        timer = new Timer(10000);
        timer.Enabled = true;
        timer.AutoReset = false;
        timer.Elapsed += SendToServer;
    }

    public static void Log(string value)
    {
        list.Add(value);
        timer.Stop();
        timer.Start();
    }

    static void SendToServer(object sender, ElapsedEventArgs e)
    {
        //TODO send data to server

        //AutoReset is false, so neither of these are needed
        //timer.Enabled = false;
        //timer.Stop();
    }
} 
```

请注意，`List`您很可能要使用 a`BlockingCollection<string>`而不是使用 a 。这有几个优点。首先，`Log`如果从多个线程同时调用这些方法，它们将起作用；因为多个并发日志可能会破坏列表。这也意味着`SendToServer`可以在添加新项目的同时将项目从队列中取出。如果您使用 a`List`您将需要对`lock`列表的所有访问权限（这可能不是问题，但并不那么简单）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-15T13:51:57.397

这种事情用 IObservable (Rx) 很容易实现。

让我们通过将 a 声明`Subject<string>`为使用 .OnNext 推进的列表来简化问题。一旦你有了你的主题，一个可观察的，你就可以用 System.Reactive.Linq 的一个“行”来做你想做的事。这在以下伪 C# 中进行了说明

```
 subject
.Buffer(<your timespan>,1)   //buffer until either a value is added or the timeout expires
.Subscribe(x => 
   { 
      if (x.Count == 0)  //the timeout expired so send on
      {
         SendAccumulatedListToServer(<your list>);   
         <clear your list>
      }   
      else
      {
         <your list>.Add(x);
      }
   }); 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-02-13T19:09:23.257

你正在实施的是完全错误的方式去做这件事。看看消费者生产者模型：

[http://msdn.microsoft.com/en-us/library/hh228601.aspx](http://msdn.microsoft.com/en-us/library/hh228601.aspx)

您尝试做的通常称为消费者/生产者数据流模型。本质上，您有一些东西会生成要发送到某处的数据列表，而不是每次将项目添加到您希望分组发送的列表时发送它。所以您有一个生产者（将数据放入发送）和消费者（发送数据的代码）。

通常，这个问题可以通过产生一个线程来监视列表（通常是一个队列）并定期发送数据来解决，最好的方法是使用 EventWaitHandle。

这是一些非常简化的代码作为示例

```
 class ServerStuff
{
    public void Init()
    {
        datatosend = new List<string>();
                    exitrequest = new EventWaitHandle(false, EventResetMode.ManualReset); //This wait handle will signal the consumer thread to exit
        Thread t = new Thread(new ThreadStart(_RunThread));
        t.Start(); // Start the consumer thread...
    }

    public void Stop()
    {
        exitrequest.Set();
    }

    List<string> datatosend;
    EventWaitHandle exitrequest;

    public void AddItem(string item)
    {
        lock (((ICollection)datatosend).SyncRoot)
            datatosend.Add(item);
    }

    private void RunThread()
    {
        while (exitrequest.WaitOne(10 * 1000)) //wait 10 seconds between sending data, or wake up immediatly to exit request
        {
            string[] tosend;
            lock (((ICollection)datatosend).SyncRoot)
            {
                tosend = datatosend.ToArray();
                datatosend.Clear();
            }

            //Send the data to Sever here...

        }
    }
} 
```

# c# - 如何保留列表中的值 在清除列表后的模型中？

> ID：14861051
> 
> 赞同：0
> 
> 时间：2013-02-13T19:05:06.703
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我有一个接收 ID 的列表。它在 foreach 语句之外实例化。

```
List<int> indices = new List<int>();

foreach (var m in docsRelacionadosModel)
{
   //.. do stuff
   modelTemp.indices = indices;

   //..here I do more stuff and some time it goes to the next iteration and I need to keep the value in indices to get more values.

    //although in a condition

    if(isOk) {
        //I save the value of this list to a model
        model.indices = modelTemp.indices;

        //And I need to clear the list to get new values
        indices.Clear();  <--- This will clear the values saved in model.indices
    }
} 
```

由于它具有通过引用传递的值，我如何将值保留在 model.indices 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:06:55.903

您需要制作列表的副本并将该*副本*保存到`model.indecies`. 虽然有多种复制列表的方法，但 LINQ`ToList`扩展方法可能是最方便的：

```
model.indices = modelTemp.indices.ToList(); 
```

另一种选择是只使用`List`构造函数：

```
model.indices = new List<int>(modelTemp.indices); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:15:24.343

根据[这个 S/O question](https://stackoverflow.com/questions/1952185/how-do-i-copy-items-from-list-to-list-without-foreach, "https://stackoverflow.com/questions/1952185/how-do-i-copy-items-from-list-to-list-without-foreach")，最简单的方法可能是在您的列表中调用 ToList ：

```
model.indices = modelTemp.indices.ToList(); 
```

您还可以实例化为一个新列表，将您的列表作为构造函数参数传递。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:07:03.400

Just create a copy of the list:

```
model.indices = new List<int>(modelTemp.indices); 
```

# javascript - javascript表单发布到主窗口

> ID：14861052
> 
> 赞同：0
> 
> 时间：2013-02-13T19:05:12.710
> 
> 标签：javascript, forms, post

```
<button class="Button" onclick="NewTicket()">New Ticket</button>

<script language=javascript>
   function OpenPopup( url, winname, features )
   {
    if(winname==''){
     window.open( url, winname, features, false );
     return;
    }
    if ( !findWindow( url, winname, features ) )
    {
     var handle = window.open( url, winname, features, false );
     if ( handle != null ) handle.focus();
    }
   }

   function findWindow( url, winname, features )
   {
    var handle = window.open( '', winname, features, false );
    if ( handle != null )
    {
     if (( handle.location != 'about:blank' ) && ( handle.location != '' ))
     {
      handle.focus();
      return true;
     }
    }
    return false;
   }
function NewTicket(){
    OpenPopup('../Ticket/New.php', 'NewTicket', 'channelmode=0, directories=0, fullscreen=0, width=430, height=360, location=0, menubar=0, resizable=0, scrollbars=1, status=0, titlebar=1, toolbar=0', false);
}
</script> 
```

使用此代码打开一个弹出式表单。这一点没有问题。我想再次将表单 (../Ticket/New.php) 发布回此页面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:15:42.100

您需要为当前窗口设置一个名称。在您的窗口打开功能之前，在您有打开按钮的页面上添加以下代码段。

```
<script>window.name = 'mainwindow';</script> 
```

在您的 New.php 中，将目标属性添加到您的表单中，并将值设置为“主窗口”

```
<form target="mainwindow"> 
```

# javascript - 使用 gjs，如何将 Soup.Buffer 数据块写入文件？

> ID：14861056
> 
> 赞同：0
> 
> 时间：2013-02-13T19:05:30.120
> 
> 标签：javascript, gnome, gjs

我正在编写一个下载文件并将其写入磁盘的 GTK javascript 程序。这是我的代码的样子：

```
const Gio = imports.gi.Gio;
const Soup = imports.gi.Soup;

// start an http session to make http requests
let _httpSession = new Soup.SessionAsync();
Soup.Session.prototype.add_feature.call(_httpSession, new Soup.ProxyResolverDefault());

// open the file
let file = Gio.file_new_for_path(path);
let fstream = file.replace(null, false, Gio.FileCreateFlags.NONE, null);

// start the download
let request = Soup.Message.new('GET', url);
request.connect('got_chunk', Lang.bind(this, function(message, chunk){
  // write each chunk to file
  fstream.write(chunk, chunk.length, null);
}));

this._httpSession.queue_message(request, function(_httpSession, message) {
  // close the file
  fstream.close(null);
}); 
```

我在 fstream.write() 行收到错误：

```
 JS ERROR: !!!   Exception was: Error: Unhandled GType GCancellable unpacking GArgument from Number
    JS ERROR: !!!     message = '"Unhandled GType GCancellable unpacking GArgument from Number"'
    JS ERROR: !!!     fileName = '"./torbrowser-launcher"'
    JS ERROR: !!!     lineNumber = '402'
    JS ERROR: !!!     stack = '"([object _private_Soup_Message],[object _private_Soup_Buffer])@./torbrowser-launcher:402
("2.3.25-2")@./torbrowser-launcher:122
wrapper("2.3.25-2")@/usr/share/gjs-1.0/lang.js:204
("2.3.25-2")@/usr/share/gjs-1.0/lang.js:145
("2.3.25-2")@/usr/share/gjs-1.0/lang.js:239
@./torbrowser-launcher:489
"' 
```

我能找到的对这个错误的唯一引用是在这个线程中：[https ://mail.gnome.org/archives/gnome-shell-list/2012-July/msg00126.html](https://mail.gnome.org/archives/gnome-shell-list/2012-July/msg00126.html)

那个人最终放弃并将他的代码移植到 python。

我也对“got_chunk”回调传递的内容感到困惑。块字段是一个 Soup.Buffer ( [http://www.roojs.com/seed/gir-1.2-gtk-3.0/gjs/Soup.Buffer.html](http://www.roojs.com/seed/gir-1.2-gtk-3.0/gjs/Soup.Buffer.html) )。我可以用 chunk.length 获得它的长度，但是当我尝试打印 chunk.data 时它是未定义的。当我只打印块时，它会打印：[object _private_Soup_Buffer]。

fstream 是一个 Gio.FileOutputStream ( [http://www.roojs.com/seed/gir-1.2-gtk-3.0/gjs/Gio.FileOutputStream.html](http://www.roojs.com/seed/gir-1.2-gtk-3.0/gjs/Gio.FileOutputStream.html) )。write方法为：write(String buffer, guint32 count, Cancellable cancellable)，cancellable是可选的。奇怪的是，如果我用这个替换写行，我仍然会得到完全相同的错误：

```
fstream.write('test ', 5, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T20:52:27.037

我遇到了完全相同的问题。经过大量的试验和错误，它归结为`write()`电话的两个问题：

1.  [您正在使用的写入功能的文档（ http://www.roojs.com/seed/gir-1.2-gtk-3.0/gjs/Gio.FileOutputStream.html](http://www.roojs.com/seed/gir-1.2-gtk-3.0/gjs/Gio.FileOutputStream.html) ）似乎是错误的；写方法签名是（据我所知）：

    `write(String buffer, Cancellable cancellable, guint32 count)`

2.  但是，如果您只是使用`fstream.write(chunk, null, chunk.length);`，您将编写一个充满零的文件。我不知道为什么（与 GJS 绑定到底层 C 库的方式有关）但你应该使用`chunk.get_data()`而不是仅仅使用`chunk`. 即将代码中的 write 调用替换为：

    `fstream.write(chunk.get_data(), null, chunk.length);`

# assembly - 带有负数的汇编语言帮助代码

> ID：14861057
> 
> 赞同：1
> 
> 时间：2013-02-13T19:05:31.163
> 
> 标签：assembly, tasm

我这里有一小部分计算器代码。我想就如何使用负数执行算术运算寻求帮助。

这是我的代码：

```
ASSCII_LOOP : MOV EDX , 0
                  DIV ECX 
                  OR DL , 30H       ;MAKE REMINDER ASSCII
                  MOV [ESI] , DL    ;PUT ASSCII IN ASSCII_NUM
                  DEC ESI
                  INC EBP           ;ADD ONE TO THE CHAR'S COUNTER
                  CMP EAX , 0       ;IF AX > 0 GOTO 
                  JA ASSCII_LOOP    ;ASSCII_LOOP

    CMP EDI , 0                     ;CHECK IF THAT WAS A NEGETIVE NUMBER
    JZ REST                         ;IF THATS NOT NEGETIVE GOTO REST
    MOV DL , '-'
    MOV [ESI] , DL                  ;ADD A MINES SIGN TO THE STRING
    DEC ESI
    INC EBP

REST :
    LEA EDI , ASSCII_NUM

    ;MOVE THE ASSCII CODE TO IT'S RIGHT PLCAE IN ASSCII_NUM
    ORDER_ASSCII : INC ESI
                   MOV AL , BYTE PTR [ESI] 
                   MOV BYTE PTR [EDI] , AL
                   INC EDI
                   DEC EBP
                   CMP EBP , 0
                   JA ORDER_ASSCII

    MOV CL , '$'           
    MOV BYTE PTR [EDI] , CL         ;AT LAST PUT A DOLLOR SIGN AT THE END OF ASSCII_NUM 
```

该程序检查输入是否为负，如果为负则转到 REST。我想问以下问题：

* REST 在这个程序中的作用是什么？

*我想请教一下如何开始在这个程序中编写代码来对负数进行操作。我已经知道 2' 补码的事情，我想要的是 2's 补码的代码，我只是不知道从哪里开始，如何开始。我对汇编编程真的很陌生。希望你能帮助我。

这是我尝试过的代码，但它不起作用，我将其单独放置以便更好地理解：

```
neg_num: 
  mov ax, data
  mov ds, ax
  mov es, ax
  mov ah, 0000h
  mov al, num
  NOT al
  mov bl, al
  adc al, 00000001B
  mov bl, al 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:42:32.677

我将向您展示如何实现 2 的补码以执行简单减法的示例。我将使用我自己的通用助记符来演示如何实现这一点。然后，您可以将其应用到您的汇编程序中。

我们将遵循 AB = A + (B( 1 的补码) + 1) 的模型

好的，假设我们想从 A (AB) 中减去累加器 B 的内容。

让我们假设我们的累加器 A 值的操作数就位（[AccA]<-someValue）。

第一：从内存中获取你需要的值并将其存储在累加器 B 中。

```
 MOVM   B   'Move contents of memory into Acc B   ([AccB]<-someOtherValue) 
```

第二：补B的值得到它的否定

```
 CMPL   B   'AccB = -B 
```

第三：将您的 1 的补码移到某个寄存器中以进行临时存储

```
 MOVBR R0  'Move contents of Acc B to Register 0 
```

第四：我们想将“1”加载到现在可用的累加器 B

```
 MOVB   #1  'Move a '1' immediately to Acc B  [AccB]<- 1 
```

第五：我们要把AccB的内容加到RO中，我们的-B就存放在这里

```
 ADDB   RO    ' This takes care of the (B(complement) +1 part of our model)
                ' The resulting value will be stored in AccB 
```

第六：最后加上AccA和AccB

```
 ADAB     'Mnemonic for "Add AccA to AccB, result stored in AccA" 
```

这满足了我们对 A + (B(complement) + 1) 的要求

这一切都假设您的架构不允许简单的 SUBA 或 SUBB 命令。一些处理器内置了它，但是由于您正在学习它的机制，因此上述基本代码结构有望为您描绘出更好的画面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T07:22:13.290

你在这方面遇到了太多麻烦，scarface23！x86 不使用 1 的补码，因此该示例可能有帮助，也可能没有帮助。我们使用 2 的补码，因为它“可以正常工作”（无论如何应该）。你最新的代码应该给你一个 2 的补码（`adc`这不是真的），但它会更容易`neg al`- 这就是它的作用。

第`REST`一个示例的部分只是将您放置在缓冲区“末尾”的字符移动到缓冲区的“开头”。如果您在正确的位置 ( `esi`) 开始打印位置，您甚至不需要这样做。

就在你展示之前，你做了一些类似`test eax, 8000h`确定数字是否为负的事情。如果它是负数，则`neg eax`设置一个标志 ( `edi`) 以表明我们需要一个减号。由于您始终使用 32 位数字，因此我会...

 `````
test eax, eax
jns is_positive 
```` 

`仅测试第 15 位适用于 16 位数字，但您在这里使用的是 32 位寄存器/指令。混合大小的数字可能是给您带来麻烦的原因。既然你有一个非常好的（未经测试，但我看不出有什么问题）32 位数字到 ASCII 例程，请输入 32 位数字。或者，我认为如果您始终切换到 16 位寄存器，您的例程仍然可以工作。用 '$' 终止你的字符串让我知道这可能是 16 位代码。使用 32 位数字/寄存器/指令仍然可以使用，但请坚持使用一种数字大小。我想你会少一些麻烦。`

 `在您未显示的部分 - 从键盘获取数字 - 如果用户以减号开头，请跳过减号并设置一个标志。将 ascii 按原样转换为数字，如果设置了标志，`neg ax`则`neg eax`在末尾转换为数字。

 `````
mov eax, 3
sub eax, 4 
```` 

`现在，`eax`将是负数 - 一个 2 的补码 - 只需使用它。如果您希望将其更改为正数，请“翻转”所有位（`not`或`xor`全部位）并加 1。（这适用于正到负或负到正）这就是 2 的补码的工作原理，但是只需`neg`一条指令即可完成。`

 `如果您需要在保留符号的同时更改数字的大小，`movsx eax, al`或者会这样做，但更容易坚持相同的大小，

您的代码中可能存在我没有看到的严重错误，但您所显示的内容对我来说看起来相当不错（除了`mov al, RESULT +1`部分）。我怀疑问题出在其他地方-也许混合了数字大小...````

# xcode - 将文件添加到项目时出错

> ID：14861058
> 
> 赞同：0
> 
> 时间：2013-02-13T19:05:40.477
> 
> 标签：xcode, resourcebundle, file-copying

发生了一些奇怪的事情，并对洞察力感兴趣。

我在 Photoshop 中创建了 5 个新的自定义按钮图像并将它们保存为 .png 文件。打开我的项目，导航到侧栏中的“按钮”组，并删除现有的占位符自定义按钮图像。然后做了一个“添加文件…”来添加我的新图像。

Xcode 显示一条错误消息，指出“复制文件时发生多个错误”。系统控制台出现错误提示：“2/13/13 8:12:18.027 AM Interface Builder Cocoa Touch Tool[1623]: CFPreferences: user home directory at file://localhost/Users/jack/Library/Application%20Support /iPhone%20Simulator/User/ 不可用。用户域将不稳定。”

“按钮”组中生成的图像文件都显示为红色。我尝试清理、删除派生数据，但无法通过典型方式识别文件。

部分工作是将文件手动复制到项目文件夹中，然后手动 - 对于“按钮”文件夹中红色的每个图像名称 - 单击位置图标（见下图）以明确选择我刚刚复制的图像文件到项目文件夹。

但是，当我尝试构建时，我遇到了一堆编译器错误，其中引用了不存在的图像文件，无法复制到包中。

![在此处输入图像描述](../Images/823fda6f99d1f1c7bf1c0213a97d4dcb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:05:40.477

最终我删除了整个“按钮”组+内容，添加了一个新组“新按钮”，然后再次添加了图像文件，进行了清理，构建，并且不得不将每个图像文件显式拖到“复制捆绑资源”部分在一切正常之前的目标构建阶段。这么多的痛苦，但谢天谢地，我又回来了。

# php - 如何解释 Xdebug 计算机化跟踪输出？

> ID：14861060
> 
> 赞同：1
> 
> 时间：2013-02-13T19:05:43.383
> 
> 标签：php, performance, profiling, xdebug, php-extension

XDebug 以下列形式输出计算机化的输出：

```
5   33  0   0.003569    193040  function_exists 0       E:\Dropbox\Websites\flyingpiranhas\wireframework\vendor\swiftmailer\swiftmailer\lib\swift_required.php  24  1   '_swiftmailer_init'
5   33  1   0.003609    193040
5   34  0   0.003620    193008  Swift::registerAutoload 1       E:\Dropbox\Websites\flyingpiranhas\wireframework\vendor\swiftmailer\swiftmailer\lib\swift_required.php  32  1   $callable = '_swiftmailer_init'
6   35  0   0.003661    193472  spl_autoload_register   0       E:\Dropbox\Websites\flyingpiranhas\wireframework\vendor\swiftmailer\swiftmailer\lib\classes\Swift.php   79  1   array (0 => 'Swift', 1 => 'autoload')
6   35  1   0.003712    193560
5   34  1   0.003728    193240 
```

可以看到，ID为33的函数入栈，退出，一切正常。但是看 34。函数调用 34 进入堆栈，然后 35 运行并执行，然后才打印 34 的退出。

我想知道的是，我该如何解释这个？这是否意味着函数 34 持续了 108 毫秒（直到最后一行）并且它等待 35 完成，或者我应该将 41 毫秒视为它的持续时间，即直到函数 35 开始？这与“水平”有关吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:09:09.770

你是对的，34 等待 35 完成持续 108 毫秒。

# variables - 输入->转到不起作用->解决后不起作用

> ID：14861063
> 
> 赞同：0
> 
> 时间：2013-02-13T19:05:55.117
> 
> 标签：variables, batch-file, goto

[从 bat: input -> goto don't work](https://stackoverflow.com/questions/9143414/beginning-in-bat-input-goto-dont-work) 我试图让事情正常工作。但它似乎不想工作......我的脚本是批处理如下。

```
@echo off
title [title here]
setlocal enabledelayedexpansion
color 0F
mode con cols=1000 lines=1000
[code between (nothing to do with InstallChoice]
set /p InstallChoice = -^> 
if "%InstallChoice%"=="1" goto :Install1
goto :Install 
```

所以...

```
if "%InstallChoice%" == 1 goto :Install1 
```

不起作用，它再次将我发送到 :InstallChoice 输入，所以看起来 %InstallChoice% 不是 1。

```
if "%InstallChoice%"=="1" goto :Install1 
```

此时出乎意料的转到......我没有真正得到的消息。系统不必理解它，执行它，结束...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:23:29.457

我认为你只需要删除额外的空间`set /p InstallChoice = -^>`应该是`set /p InstallChoice=-^>`

# jquery - 使用 jQuery 获取 div 元素的上一个兄弟元素

> ID：14861065
> 
> 赞同：-1
> 
> 时间：2013-02-13T19:06:06.250
> 
> 标签：jquery

我正在尝试获取以前的 id，并且正在执行以下操作，但我从 alert(id) 得到“未定义”；所以在这个例子中，当他们点击左键时它应该返回**step_1 。**谢谢你的帮助。

JavaScript：

```
$("body").keydown(function(e) {
  if(e.keyCode == 37) { // left
      id = $('.steps.onit').prev().attr('id');
      alert(id);
  }
  else if(e.keyCode == 39) { // right
  }
}); 
```

更新 HTML（div 是背景图片）：

```
<div id="container-steps">
    <a href="some url"><div id="step_1" class="steps"></div></a>
    <a href="some url"><div id="step_2" class="steps onit">selected one</div></a>
    <a href="some url"><div id="step_3" class="steps"></div></a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:26:13.827

[prev](http://api.jquery.com/prev)找到兄弟姐妹（在同一级别，共享父母）而不是堂兄弟。

```
$("body").keydown(function(e) {
  if(e.keyCode == 37) { // left
      id = $('.steps.onit').parent().prev().children('.steps').attr('id');
      alert(id);
  }
  else if(e.keyCode == 39) { // right
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:29:16.617

这应该工作

```
$("body").keydown(function(e) {if(e.keyCode == 37) { // left
  var obj = $('.steps.onit');
  var id = obj.attr("id");
  alert(id);}else if(e.keyCode == 39) { // right}}); 
```

# python - 覆盖一组命名空间常量

> ID：14861073
> 
> 赞同：0
> 
> 时间：2013-02-13T19:06:39.413
> 
> 标签：python, constants, overriding

为了在整个程序中最小化硬编码值，我定义了一组常量，如下所示`Constants.py`：

```
FOO = 42
HOSTNAME=socket.gethostname()
BAR = 777 
```

所有想要使用这些常量的模块，只需执行`import Constants`并`Constants.FOO`立即使用。

现在其中一些常量可能取决于程序运行的实际主机。因此，我想根据应用程序运行的实际环境有选择地覆盖其中的一些。第一次粗略的尝试如下所示`Constants.py`：

```
FOO = 42
HOSTNAME=socket.gethostname()
if HOSTNAME == 'pudel':
   BAR = 999
elif HOSTNAME == 'knork'
   BAR = 888
else:
   BAR = 777 
```

虽然这可以正常工作，但它会使文件因特殊情况而变得混乱，我想避免这种情况。

如果我在做 shell 脚本，我会使用这样的东西`Constants.sh`：

```
 FOO = 42
 HOSTNAME=$(hostname)
 BAR = 777

 # load host-specific constants
 if [ -e Constants_${HOSTNAME}.sh ]; then
   . Constants_${HOSTNAME}.sh
 fi 
```

和一个可选`Constants_pudel.sh`的，看起来像：

```
BAR = 999 
```

它将公共常量保持在一起，并允许在单独的文件中轻松地覆盖它们。

因为我不是在写一个 shell 脚本而是一个 python 程序，所以我想知道如何获得相同的结果。

无济于事，我尝试了类似的方法：

```
FOO = 42
HOSTNAME=socket.gethostname()
BAR = 777
try:
  __import__('Constants_'+HOSTNAME)
except ImportError:
  pass 
```

看起来`Constants_poodle.py`像：

```
import Constants
Constants.BAR = 999 
```

这可以正常工作，`Constants_poodle`但当我尝试`import Constants`在另一个 python 文件中时，我得到了原始的`Constants.BAR`.

除了根本不工作之外，使用`__import__()`似乎特别难看，所以我想有一种适当的方法可以覆盖特定设置的导出常量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:20:30.877

You could do something like that with the following, which is derived from the Activestate [Constants in Python](http://code.activestate.com/recipes/65207-constants-in-python) recipe:

```
import os as _os
import socket as _socket

class _constants(object):
    def __init__(self):
        self.FOO = 42
        self.HOSTNAME = _socket.gethostname()
        self.BAR = 777

        # load host-specific constants
        hostconst = 'Constants_{}'.format(self.HOSTNAME)
        if _os.path.exists(hostconst):
            localdict = {}
            execdict = self.__dict__.copy()
            execdict['__builtins__'] = None
            execfile(hostconst, execdict, localdict)
            self.__dict__.update(localdict) # add/override attributes defined

    def __setattr__(self, name, value):
        self.__dict__[name] = value

# replace module entry in sys.modules[__name__] with instance of _constants
# (and create additional reference to module so it's not deleted --
# see Stack Overflow question: http://bit.ly/ff94g6)
import sys
_ref, sys.modules[__name__] = sys.modules[__name__], _constants()

if __name__ == '__main__':
    import constants

    print constants.FOO
    print constants.HOSTNAME
    print constants.BAR 
```

So, for example if `_socket.gethostname()` returned 'pudel', and a `Constants_pudel` file existed containing these lines:

```
BAR = 999
FOO += 1 
```

Then the output from the `print` statements would be:

```
43   
pudel
999 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T20:17:40.243

您的解决方案有几个问题。首先，**import**不会将导入的模块添加到当前命名空间。不确定 python 3.x，但在 python 2.x 上你可以这样做：

```
FOO = 42
BAR = 777
HOSTNAME=socket.gethostname()
try:
    _imp = __import__('Constants_'+HOSTNAME)
    _locals = locals()
    for _name in dir(_imp):
        if not _name.startswith('_'):
            _locals[_name] = getattr(_imp, _name)
    del _imp, _locals, _name
except ImportError:
    pass 
```

但是下一个问题是所有的 constants_xxx.py 文件都必须在 python 路径中。

我认为对您更有效的替代解决方案是将配置放在用户目录中的 .ini 文件中并使用 ConfigParser（或 yaml 或 xml，具体取决于您的喜好）。

# html - 如果两个图像如何放置在中心

> ID：14861075
> 
> 赞同：1
> 
> 时间：2013-02-13T19:06:47.013
> 
> 标签：html, css, positioning

我创建了[这个](http://www.stavarov-ubytovna.cz)网站。现在，我想将文本放在标题中的这两个图像上。相关代码在这里

```
<div class="header">
    <img src="css/title578145459.png" class="headerImage left"/>
    <img src="css/title756941752.png" class="headerImage right"/>
    <span class="headerText">Ubytovna Stavařov Přerov</span>
</div> 
```

和 CSS

```
.headerImage {
    width: 50%;
    height: 100%;
}

.header {
    position: relative;
    height: 190px;
    text-align: center;    
    padding-top: 5px;
    opacity: 0.8;
}

.headerText {
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    z-index: -1;
    color: yellow;
    font: normal 3em sling;
    font-style: oblique;
} 
```

我尝试设置不同的值`top`和`bottom`属性，我也尝试设置`padding`，`margin`但这些都没有奏效。感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:14:12.507

您在 .headerText 上的 z-index 应该是正数。使用 Chrome 开发工具，我可以使用以下命令查看文本：

```
.headerText {
position: absolute;
top: 120px;
left: 0px;
right: 0;
z-index: 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:29:08.413

尝试这个

```
.headerText {
position: absolute;
top: 50%;
left: 25%;
right: 25%;
z-index: 1;
} 
```

# objective-c - OS X：沙盒应用程序从睡眠中醒来后无法读取拖放的文件

> ID：14861076
> 
> 赞同：4
> 
> 时间：2013-02-13T19:06:47.183
> 
> 标签：objective-c, macos, app-store

我们在 Mac App Store 中有一个应用程序是沙盒的，它读取用户拖放到它上面的文件。这一切都在应用程序如何访问沙盒之外的文件的指导方针之内。但是，有时在计算机从睡眠中唤醒后，OS X 将不再授予对拖放文件的访问权限，直到应用程序重新启动。

这是它产生的错误：

```
sandboxd: ... deny file-read-xattr /path/to/file 
```

除了重新启动应用程序之外，有没有办法让 Apple 再次授予文件权限？

# php - 输入类型提交登录错误

> ID：14861077
> 
> 赞同：0
> 
> 时间：2013-02-13T19:06:48.120
> 
> 标签：php, html, forms

好的，所以我已经下载了 mibew messenger 并且我想自定义按钮，所以我进入 login.php 并且登录的实际提交按钮是`type="image"`所以我更改为`type="submit"`，当我提交表单时，我得到一个不正确的用户名/密码错误，无论如何我很困惑，所以我正在查看其他文件的负载，看看我是否能找到任何与`type="image"`以防万一的东西相关的东西，`type="image"`我不知道，除了什么我没有找到任何东西我确实注意到，当我输入`admin`用户名并单击`login`提交按钮时，它会返回登录错误，而且在我放的框中`admin`现在有值`type="submit"`所以在这种情况下它说`login`因为值是`value="login"`，我真的很困惑，我想可能是提交“登录”而不是“管理员”作为用户名。

这是提交之前和之后的按钮：

**新的**

`<input type="submit" name="login" value="login" >`

**原来的**

```
<input type="image" name="login" src='<?php echo $webimroot.getlocal("image.button.login") ?>' alt='<?php echo getlocal("button.enter") ?>'/> 
```

如果我将它改回原来的它工作正常，但我想使用 css 而不是图像。

此外，制作一个 jsfiddle 会非常困难，否则我会制作一个。

这是 login.php 发布数据的地方

```
require_once('../libs/common.php');
require_once('../libs/operator.php');

$errors = array();
$page = array('formisRemember' => true, 'version' => $version);

if (isset($_POST['login']) && isset($_POST['password'])) {
    $login = getparam('login');
    $password = getparam('password');
    $remember = isset($_POST['isRemember']) && $_POST['isRemember'] == "on";

    $operator = operator_by_login($login);
    if ($operator && isset($operator['vcpassword']) && $operator['vcpassword'] == md5($password)) {

        $target = isset($_SESSION['backpath'])
                ? $_SESSION['backpath']
                : "$root/agent/index.php";

        login_operator($operator, $remember);
        header("Location: $target");
        exit;
    } else {
        $errors[] = getlocal("page_login.error");
        $page['formlogin'] = $login;
    }
}

$page['localeLinks'] = get_locale_links("$root/agent/login.php");
start_html_output();
require('../display/login.php'); 
```

这是 login.php 中包含的 operator.php

```
$can_administrate = 0;
$can_takeover = 1;
$can_viewthreads = 2;
$can_modifyprofile = 3;

$can_count = 4;

$permission_ids = array(
    $can_administrate => "admin",
    $can_takeover => "takeover",
    $can_viewthreads => "viewthreads",
    $can_modifyprofile => "modifyprofile"
);

function operator_by_login($login)
{
    global $mysqlprefix;
    $link = connect();
    $operator = select_one_row(
        "select * from ${mysqlprefix}chatoperator where vclogin = '" . mysql_real_escape_string($login) . "'", $link);
    mysql_close($link);
    return $operator;
}

function operator_by_email($mail)
{
    global $mysqlprefix;
    $link = connect();
    $operator = select_one_row(
        "select * from ${mysqlprefix}chatoperator where vcemail = '" . mysql_real_escape_string($mail) . "'", $link);
    mysql_close($link);
    return $operator;
}

function operator_by_id_($id, $link)
{
    global $mysqlprefix;
    return select_one_row(
        "select * from ${mysqlprefix}chatoperator where operatorid = $id", $link);
}

function operator_by_id($id)
{
    $link = connect();
    $operator = operator_by_id_($id, $link);
    mysql_close($link);
    return $operator;
}

function operator_get_all()
{
    global $mysqlprefix;
    $link = connect();

    $query = "select operatorid, vclogin, vclocalename, vccommonname, istatus, (unix_timestamp(CURRENT_TIMESTAMP)-unix_timestamp(dtmlastvisited)) as time " .
             "from ${mysqlprefix}chatoperator order by vclogin";
    $operators = select_multi_assoc($query, $link);
    mysql_close($link);
    return $operators;
}

function operator_is_online($operator)
{
    global $settings;
    return $operator['time'] < $settings['online_timeout'];
}

function operator_is_available($operator)
{
    global $settings;
    return $operator['istatus'] == 0 && $operator['time'] < $settings['online_timeout'] ? "1" : "";
}

function operator_is_away($operator)
{
    global $settings;
    return $operator['istatus'] != 0 && $operator['time'] < $settings['online_timeout'] ? "1" : "";
}

function update_operator($operatorid, $login, $email, $password, $localename, $commonname)
{
    global $mysqlprefix;
    $link = connect();
    $query = sprintf(
        "update ${mysqlprefix}chatoperator set vclogin = '%s',%s vclocalename = '%s', vccommonname = '%s'" .
        ", vcemail = '%s', vcjabbername= '%s'" .
        " where operatorid = %s",
        mysql_real_escape_string($login),
        ($password ? " vcpassword='" . md5($password) . "'," : ""),
        mysql_real_escape_string($localename),
        mysql_real_escape_string($commonname),
        mysql_real_escape_string($email),
        '',
        $operatorid);

    perform_query($query, $link);
    mysql_close($link);
}

function update_operator_avatar($operatorid, $avatar)
{
    global $mysqlprefix;
    $link = connect();
    $query = sprintf(
        "update ${mysqlprefix}chatoperator set vcavatar = '%s' where operatorid = %s",
        mysql_real_escape_string($avatar), $operatorid);

    perform_query($query, $link);
    mysql_close($link);
}

function create_operator_($login, $email, $password, $localename, $commonname, $avatar, $link)
{
    global $mysqlprefix;
    $query = sprintf(
        "insert into ${mysqlprefix}chatoperator (vclogin,vcpassword,vclocalename,vccommonname,vcavatar,vcemail,vcjabbername) values ('%s','%s','%s','%s','%s','%s','%s')",
        mysql_real_escape_string($login),
        md5($password),
        mysql_real_escape_string($localename),
        mysql_real_escape_string($commonname),
        mysql_real_escape_string($avatar),
        mysql_real_escape_string($email), '');

    perform_query($query, $link);
    $id = mysql_insert_id($link);

    return select_one_row("select * from ${mysqlprefix}chatoperator where operatorid = $id", $link);
}

function create_operator($login, $email, $password, $localename, $commonname, $avatar)
{
    $link = connect();
    $newop = create_operator_($login, $email, $password, $localename, $commonname, $avatar, $link);
    mysql_close($link);
    return $newop;
}

function notify_operator_alive($operatorid, $istatus)
{
    global $mysqlprefix;
    $link = connect();
    perform_query("update ${mysqlprefix}chatoperator set istatus = $istatus, dtmlastvisited = CURRENT_TIMESTAMP where operatorid = $operatorid", $link);
    mysql_close($link);
}

function has_online_operators($groupid = "")
{
    global $settings, $mysqlprefix;
    loadsettings();
    $link = connect();
    $query = "select count(*) as total, min(unix_timestamp(CURRENT_TIMESTAMP)-unix_timestamp(dtmlastvisited)) as time from ${mysqlprefix}chatoperator";
    if ($groupid) {
        $query .= ", ${mysqlprefix}chatgroupoperator where groupid = $groupid and ${mysqlprefix}chatoperator.operatorid = ${mysqlprefix}chatgroupoperator.operatorid and istatus = 0";
    } else {
        $query .= " where istatus = 0";
    }
    $row = select_one_row($query, $link);
    mysql_close($link);
    return $row['time'] < $settings['online_timeout'] && $row['total'] > 0;
}

function is_operator_online($operatorid, $link)
{
    global $settings, $mysqlprefix;
    loadsettings_($link);
    $query = "select count(*) as total, min(unix_timestamp(CURRENT_TIMESTAMP)-unix_timestamp(dtmlastvisited)) as time " .
             "from ${mysqlprefix}chatoperator where operatorid = $operatorid";
    $row = select_one_row($query, $link);
    return $row['time'] < $settings['online_timeout'] && $row['total'] == 1;
}

function get_operator_name($operator)
{
    global $home_locale, $current_locale;
    if ($home_locale == $current_locale)
        return $operator['vclocalename'];
    else
        return $operator['vccommonname'];
}

function append_query($link, $pv)
{
    $infix = '?';
    if (strstr($link, $infix) !== FALSE)
        $infix = '&amp;';
    return "$link$infix$pv";
}

function check_login($redirect = true)
{
    global $root, $mysqlprefix;
    if (!isset($_SESSION["${mysqlprefix}operator"])) {
        if (isset($_COOKIE['webim_lite'])) {
            list($login, $pwd) = preg_split("/,/", $_COOKIE['webim_lite'], 2);
            $op = operator_by_login($login);
            if ($op && isset($pwd) && isset($op['vcpassword']) && md5($op['vcpassword']) == $pwd) {
                $_SESSION["${mysqlprefix}operator"] = $op;
                return $op;
            }
        }
        $requested = $_SERVER['PHP_SELF'];
        if ($_SERVER['REQUEST_METHOD'] == 'GET' && $_SERVER['QUERY_STRING']) {
            $requested .= "?" . $_SERVER['QUERY_STRING'];
        }
        if ($redirect) {
            $_SESSION['backpath'] = $requested;
            header("Location: $root/agent/login.php");
            exit;
        } else {
            return null;
        }
    }
    return $_SESSION["${mysqlprefix}operator"];
}

function get_logged_in()
{
    global $mysqlprefix;
    return isset($_SESSION["${mysqlprefix}operator"]) ? $_SESSION["${mysqlprefix}operator"] : FALSE;
}

function login_operator($operator, $remember)
{
    global $root, $mysqlprefix;
    $_SESSION["${mysqlprefix}operator"] = $operator;
    if ($remember) {
        $value = $operator['vclogin'] . "," . md5($operator['vcpassword']);
        setcookie('webim_lite', $value, time() + 60 * 60 * 24 * 1000, "$root/");

    } else if (isset($_COOKIE['webim_lite'])) {
        setcookie('webim_lite', '', time() - 3600, "$root/");
    }
}

function logout_operator()
{
    global $root, $mysqlprefix;
    unset($_SESSION["${mysqlprefix}operator"]);
    unset($_SESSION['backpath']);
    if (isset($_COOKIE['webim_lite'])) {
        setcookie('webim_lite', '', time() - 3600, "$root/");
    }
}

function setup_redirect_links($threadid, $token)
{
    global $page, $root, $settings, $mysqlprefix;
    loadsettings();
    $link = connect();

    $operatorscount = db_rows_count("${mysqlprefix}chatoperator", array(), "", $link);

    $groupscount = 0;
    $groups = array();
    if ($settings['enablegroups'] == "1") {
        foreach (get_groups($link, true) as $group) {
            if ($group['inumofagents'] == 0) {
                continue;
            }
            $groups[] = $group;
        }
        $groupscount = count($groups);
    }

    prepare_pagination(max($operatorscount, $groupscount), 8);
    $p = $page['pagination'];
    $limit = $p['limit'];

    $operators = select_multi_assoc(db_build_select(
                                        "operatorid, vclogin, vclocalename, vccommonname, istatus, (unix_timestamp(CURRENT_TIMESTAMP)-unix_timestamp(dtmlastvisited)) as time",
                                        "${mysqlprefix}chatoperator", array(), "order by vclogin $limit"), $link);

    $groups = array_slice($groups, $p['start'], $p['end'] - $p['start']);
    mysql_close($link);

    $agent_list = "";
    $params = array('thread' => $threadid, 'token' => $token);
    foreach ($operators as $agent) {
        $params['nextAgent'] = $agent['operatorid'];
        $status = $agent['time'] < $settings['online_timeout']
                ? ($agent['istatus'] == 0
                        ? getlocal("char.redirect.operator.online_suff")
                        : getlocal("char.redirect.operator.away_suff")
                )
                : "";
        $agent_list .= "<li><a href=\"" . add_params($root . "/agent/redirect.php", $params) .
                       "\" title=\"" . topage(get_operator_name($agent)) . "\">" .
                       topage(get_operator_name($agent)) .
                       "</a> $status</li>";
    }
    $page['redirectToAgent'] = $agent_list;

    $group_list = "";
    if ($settings['enablegroups'] == "1") {
        $params = array('thread' => $threadid, 'token' => $token);
        foreach ($groups as $group) {
            $params['nextGroup'] = $group['groupid'];
            $status = $group['ilastseen'] !== NULL && $group['ilastseen'] < $settings['online_timeout']
                    ? getlocal("char.redirect.operator.online_suff")
                    : ($group['ilastseenaway'] !== NULL && $group['ilastseenaway'] < $settings['online_timeout']
                            ? getlocal("char.redirect.operator.away_suff")
                            : "");
            $group_list .= "<li><a href=\"" . add_params($root . "/agent/redirect.php", $params) .
                           "\" title=\"" . topage(get_group_name($group)) . "\">" .
                           topage(get_group_name($group)) .
                           "</a> $status</li>";
        }
    }
    $page['redirectToGroup'] = $group_list;
}

$permission_list = array();

function get_permission_list()
{
    global $permission_list, $permission_ids;
    if (count($permission_list) == 0) {
        foreach ($permission_ids as $permid) {
            $permission_list[] = array(
                'id' => $permid,
                'descr' => getlocal("permission.$permid")
            );
        }
    }
    return $permission_list;
}

function is_capable($perm, $operator)
{
    $permissions = $operator && isset($operator['iperm']) ? $operator['iperm'] : 0;
    return $perm >= 0 && $perm < 32 && ($permissions & (1 << $perm)) != 0;
}

function prepare_menu($operator, $hasright = true)
{
    global $page, $settings, $can_administrate;
    $page['operator'] = topage(get_operator_name($operator));
    if ($hasright) {
        loadsettings();
        $page['showban'] = $settings['enableban'] == "1";
        $page['showgroups'] = $settings['enablegroups'] == "1";
        $page['showstat'] = $settings['enablestatistics'] == "1";
        $page['showadmin'] = is_capable($can_administrate, $operator);
        $page['currentopid'] = $operator['operatorid'];
    }
}

function get_all_groups($link)
{
    global $mysqlprefix;
    $query = "select ${mysqlprefix}chatgroup.groupid as groupid, vclocalname, vclocaldescription from ${mysqlprefix}chatgroup order by vclocalname";
    return select_multi_assoc($query, $link);
}

function get_groups($link, $checkaway)
{
    global $mysqlprefix;
    $query = "select ${mysqlprefix}chatgroup.groupid as groupid, vclocalname, vclocaldescription" .
             ", (SELECT count(*) from ${mysqlprefix}chatgroupoperator where ${mysqlprefix}chatgroup.groupid = ${mysqlprefix}chatgroupoperator.groupid) as inumofagents" .
             ", (SELECT min(unix_timestamp(CURRENT_TIMESTAMP)-unix_timestamp(dtmlastvisited)) as time " .
             "from ${mysqlprefix}chatgroupoperator, ${mysqlprefix}chatoperator where istatus = 0 and ${mysqlprefix}chatgroup.groupid = ${mysqlprefix}chatgroupoperator.groupid " .
             "and ${mysqlprefix}chatgroupoperator.operatorid = ${mysqlprefix}chatoperator.operatorid) as ilastseen" .
             ($checkaway
                     ? ", (SELECT min(unix_timestamp(CURRENT_TIMESTAMP)-unix_timestamp(dtmlastvisited)) as time " .
                       "from ${mysqlprefix}chatgroupoperator, ${mysqlprefix}chatoperator where istatus <> 0 and ${mysqlprefix}chatgroup.groupid = ${mysqlprefix}chatgroupoperator.groupid " .
                       "and ${mysqlprefix}chatgroupoperator.operatorid = ${mysqlprefix}chatoperator.operatorid) as ilastseenaway"
                     : ""
             ) .
             " from ${mysqlprefix}chatgroup order by vclocalname";
    return select_multi_assoc($query, $link);
}

function get_operator_groupids($operatorid)
{
    global $mysqlprefix;
    $link = connect();
    $query = "select groupid from ${mysqlprefix}chatgroupoperator where operatorid = $operatorid";
    $result = select_multi_assoc($query, $link);
    mysql_close($link);
    return $result;
} 
```

如果您需要 common.php，它不会让我添加更多代码让我知道

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:12:38.347

没有看到你的 PHP 很难说，但它可能是图像提交“登录”作为 POST/GET 变量值数组（x，y），其中提交类型将只是一个字符串值。如果您根据该值检查提交，则需要进行一些更改。

编辑：

查看您的代码，您可能正在使用“登录”作为用户名和提交按钮。尝试将提交按钮名称更改为其他名称。

```
<input type="submit" name="loginButton" value="login" /> 
```

# asp.net-mvc-4 - Kendo UI Change data on clicking "Go to next page"

> ID：14861090
> 
> 赞同：0
> 
> 时间：2013-02-13T19:07:27.370
> 
> 标签：asp.net-mvc-4, kendo-ui, kendo-grid

I am very new to Kendo and MVC4\. I got the piece where I display the data on a Kendo Grid on my webpage. ![Grid](../Images/d68bcdccd340fd18917ff2bfc812a5d5.png)

On a single page, I have enabled only 10 items (rows) to be displayed. But when I click on the number "2", the page fantastically fails.

![failure](../Images/23f3cab97a6f93669495a8ed5fa66021.png)

I understand that I am missing some piece of code on the controller side. But due to my lack of knowledge about MVC4, I dont know what to add at what place. Below is the View:

```
 @model IEnumerable<MVC4Trial.Models.vwCallDetail>
@{
    ViewBag.Title = "Index";
}

<h2>Call Detail View</h2>

@(Html.Kendo().Grid(Model)
.Name("Grid")
.Columns(columns =>
    {
        columns.Bound(p => p.CCCID).Width(50).Title("CCCID");
        columns.Bound(p => p.Mp3_Url).Width(50).Title("MP3 URL");
        columns.Bound(p => p.Target_Number).Width(50).Title("Target Number");
        columns.Bound(p => p.Duration).Width(50);
        columns.Bound(p => p.Index).Width(50);
        columns.Bound(p => p.LocalTime).Width(50);
        columns.Bound(p => p.Site_Name___Address).Width(50).Title("Site Address");
        columns.Bound(p => p.Ad_Source_Name).Width(50).Title("Ad Source Name");
        columns.Bound(p => p.Tracking_Number).Width(50).Title("Tracking Number");
        columns.Bound(p => p.Caller_Number).Width(50).Title("Caller");
        columns.Bound(p => p.Available_Feature).Width(50).Title("Features");
    })
    .Pageable(page => page.Enabled(true).PageSizes(new Int32[] {10, 20, 30, 40}))
    .Sortable(sorting => sorting.SortMode(Kendo.Mvc.UI.GridSortMode.SingleColumn))
    .Scrollable()
    .Filterable()
    .DataSource(datasource => datasource
        .Ajax()
        .Read(read => read.Action("vwCallDetail", "Grid"))
        )
    .Resizable(resize =>resize.Columns(true))
    .Reorderable(reordering => reordering.Columns(true))   

    ) 
```

**Below is the controller code**

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using MVC4Trial.Models;
using Kendo.Mvc.UI;
using Kendo.Mvc.Extensions;

namespace MVC4Trial.Controllers
{
    public class CallTrackController : Controller
    {
        private CallTrackEntities db = new CallTrackEntities();

        //
        // GET: /CallTrack/

        public ActionResult Index()
        {
            return View(db.vwCallDetails.ToList());
        }

        public ActionResult vwCallDetails([DataSourceRequest] DataSourceRequest request)
        {
            return Json(GetCallDetails().ToDataSourceResult(request));
        }

        private static IEnumerable<vwCallDetail> GetCallDetails()
        {
            var callDetails = new CallTrackEntities();
            return callDetails.vwCallDetails.Select(vwCallDetail => new vwCallDetail
            {
                CCCID = vwCallDetail.CCCID,
                Mp3_Url = vwCallDetail.Mp3_Url,
                Index = vwCallDetail.Index,
                Target_Number = vwCallDetail.Target_Number,
                Duration = vwCallDetail.Duration,
                LocalTime = vwCallDetail.LocalTime,
                Site_Name___Address = vwCallDetail.Site_Name___Address,
                Ad_Source_Name = vwCallDetail.Ad_Source_Name,
                Tracking_Number = vwCallDetail.Tracking_Number,
                Caller_Number = vwCallDetail.Caller_Number,
                Available_Feature = vwCallDetail.Available_Feature

            });
        }

        public ActionResult Details(int id = 0)
        {
            vwCallDetail vwcalldetail = db.vwCallDetails.Find(id);
            if (vwcalldetail == null)
            {
                return HttpNotFound();
            }
            return View(vwcalldetail);
        }

        //
        // GET: /CallTrack/Create

        public ActionResult Create()
        {
            return View();
        }

        //
        // POST: /CallTrack/Create

        [HttpPost]
        public ActionResult Create(vwCallDetail vwcalldetail)
        {
            if (ModelState.IsValid)
            {
                db.vwCallDetails.Add(vwcalldetail);
                db.SaveChanges();
                return RedirectToAction("Index");
            }

            return View(vwcalldetail);
        }

        //
        // GET: /CallTrack/Edit/5

        public ActionResult Edit(int id = 0)
        {
            vwCallDetail vwcalldetail = db.vwCallDetails.Find(id);
            if (vwcalldetail == null)
            {
                return HttpNotFound();
            }
            return View(vwcalldetail);
        }

        //
        // POST: /CallTrack/Edit/5

        [HttpPost]
        public ActionResult Edit(vwCallDetail vwcalldetail)
        {
            if (ModelState.IsValid)
            {
                db.Entry(vwcalldetail).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View(vwcalldetail);
        }

        //
        // GET: /CallTrack/Delete/5

        public ActionResult Delete(int id = 0)
        {
            vwCallDetail vwcalldetail = db.vwCallDetails.Find(id);
            if (vwcalldetail == null)
            {
                return HttpNotFound();
            }
            return View(vwcalldetail);
        }

        //
        // POST: /CallTrack/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {
            vwCallDetail vwcalldetail = db.vwCallDetails.Find(id);
            db.vwCallDetails.Remove(vwcalldetail);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

**Below is the _Layout.cshtml file**

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - Kendo UI Sample</title>
         <link rel="stylesheet" href="@Url.Content("~/Content/kendo.common.min.css")">
         <link rel="stylesheet" href="@Url.Content("~/Content/kendo.default.min.css")">
         <script src="@Url.Content("~/Scripts/jquery.min.js")"></script>
         <script src="@Url.Content("~/Scripts/kendo.web.min.js")"></script>
         <script src="@Url.Content("~/Scripts/kendo.aspnetmvc.min.js")"></script>
         <link href="@Url.Content("~/Content/kendo.dataviz.min.css")" rel="stylesheet" type="text/css" />
         <script src="@Url.Content("~/Scripts/kendo.dataviz.min.js")"></script>
         <script src="@Url.Content("~/Scripts/kendo.aspnetmvc.min.js")"></script>
    </head>
    <body>
        <header>
            <div class="content-wrapper">

                <div class="float-right">
                </div>
            </div>
        </header>
        <div id="body">
            @RenderSection("featured", required: false)
            <section class="content-wrapper main-content clear-fix">
                @RenderBody()
            </section>
        </div>
        <footer>

        </footer>

        @Scripts.Render("~/bundles/jquery")
        @RenderSection("scripts", required: false)
    </body>
</html> 
```

Now what changes do I need to make to the View/Model/Controller to make this thing work? Please forgive me if I have omitted any details. Thanks for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:36:51.263

最好看一下[Telerik 的在线演示](http://demos.kendoui.com/web/grid/index.html)

您必须编写控制器：

```
 public ActionResult vwCallDetail([DataSourceRequest] DataSourceRequest request)
    {
        return Json(db.TableName.ToDataSourceResult(request));
    } 
```

我希望您已将这些文件包含在视图中：

```
<link href="@Url.Content("~/Content/kendo/2012.3.1114/kendo.common.min.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/kendo/2012.3.1114/kendo.default.min.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/kendo/2012.3.1114/jquery.min.js")"></script>
<script src="@Url.Content("~/Scripts/kendo/2012.3.1114/kendo.all.min.js")"></script>
<script src="@Url.Content("~/Scripts/kendo/2012.3.1114/kendo.aspnetmvc.min.js")"></script> 
```

# python - 无法理解 ** 操作员的行为

> ID：14861094
> 
> 赞同：3
> 
> 时间：2013-02-13T19:07:36.060
> 
> 标签：python

我突然遇到了这个，我无法理解为什么会这样！

在 python 提示符下，`**`从 3 开始使用运算符，如下所示给出错误结果。IE，

```
>>> 2**2**2
16
>>> 3**3**3
7625597484987L
>>> 4**4**4
13407807929942597099574024998205846127479365820592393377723561443721764030073546976801874298166903427690031858186486050853753882811946569946433649006084096L 
```

然后我认为我必须使用括号，所以我使用了它并且它给出了正确的结果。

```
>>>(3**3)**3
19683 
```

但是`//`操作员在这种操作中支持并给出正确的结果，即

```
>>> 4//4//4
0
>>> 40//4//6
1 
```

请帮我理解。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T19:13:32.203

`**`是右结合的。从数学上讲，这是有道理的： 3 ^(3 ³)等于 3 ^(27)，而不是 27 ³。

[该文档](http://docs.python.org/2/reference/expressions.html#the-power-operator)指出它是右关联的：

> 在无括号的幂和一元运算符序列中，运算符的计算顺序是从右到左。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T19:13:49.937

正如[文档](http://docs.python.org/2/reference/expressions.html#operator-precedence)所说：

> 同一框中的运算符从左到右分组（比较...和取幂除外，它们从右到左分组）。

换句话说，`**`是右关联的，而`//`（与除比较之外的所有其他运算符一样）是左关联的。

在其他地方，有一个关于[幂运算符](http://docs.python.org/2/reference/expressions.html#the-power-operator)的完整部分，在给出了关于幂和一元运算符如何交互的规则（此处不相关）之后，阐明了这一点：

> [I]在不带括号的幂和一元运算符序列中，运算符的计算顺序是从右到左...</p>

这实际上是大多数编程语言的做法。

求幂不是用数学中的对称运算符语法编写的，因此实际上没有理由它应该具有相同的默认关联性。右结合取幂的用处要小得多，因为`(2**3)**4`它与 完全一样`2**(3*4)`，而没有什么明显与 相同的东西`2**(3**4)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T19:14:08.460

当你做类似的事情时`4**4**4`，你应该使用括号来明确你的意图。正如@cHao 所指出的那样，解析器将解决歧义，但这会让其他人感到困惑。您应该使用`(4**4)**4`或`4**(4**4)`。这里的显式比隐式要好，因为获取权力并不是我们经常看到的工作日操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T19:10:15.697

看起来`**`运算符是右结合的，意思是`3**3**3`评估 as`3**27`和`4**4**4`as `4**256`。

# xslt - 无法通过 xslt 删除其中的“xsi:nil”标签

> ID：14861098
> 
> 赞同：3
> 
> 时间：2013-02-13T19:07:47.373
> 
> 标签：xslt, xml-nil

我有以下 xml，其中包含几个带有 xsi:nil="true" 的 xml 标签。这些是基本上为空的标签。我无法使用/找到任何 sxlt 转换器来从 xml 中删除这些标签并获取 xml 的其余部分。

```
<?xml version="1.0" encoding="utf-8"?>
<p849:retrieveAllValues xmlns:p849="http://package.de.bc.a">
    <retrieveAllValues>
        <messages xsi:nil="true" />
        <existingValues>
            <Values>
                <value1> 10.00</value1>
                <value2>123456</value2>
                <value3>1234</value3>
                <value4 xsi:nil="true" />
                <value5 />
            </Values>
        </existingValues>
        <otherValues xsi:nil="true" />
        <recValues xsi:nil="true" />
    </retrieveAllValues>
</p849:retrieveAllValues> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:21:42.587

你得到的错误原因

> [致命错误] file2.xml:5:30：与元素类型“messages”关联的属性“xsi:nil”的前缀“xsi”未绑定。

没有声明名为“xsi”的前缀，您应该在根元素中指定它，例如：

```
<p849:retrieveAllValues xmlns:p849="http://package.de.bc.a"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<retrieveAllValues>
    <messages xsi:nil="true" />
       // other code... 
```

## 更新

如果您无法更改从 web 服务接收到的 xml 文档，您可以尝试下一种方法（如果您可以接受这种方法）：

1.  更改您的`xslt`文档以处理 xml 文档而不指定元素前缀
2.  将 的属性设置`namespaceAware`为[`DocumentBuilderFactory`](http://docs.oracle.com/javase/7/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setNamespaceAware%28boolean%29)false

在这之后你的变压器不应该抱怨

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:12:27.017

看起来这在 XSLT 中是不可能的——因为缺少命名空间声明，您必须使用非命名空间感知解析器来解析 XML 文件，但我尝试过的所有 XSLT 处理器都没有对于此类文档，它们必须依赖一些仅在启用命名空间感知的情况下才存在的信息，即使相关文档实际上不包含任何命名空间节点。

因此，您必须以不同的方式处理它，例如通过自己遍历 DOM 树。既然您说您正在使用 Java，这里有一个使用 Java DOM API 的示例（该示例在[Groovy](http://groovy.codehaus.org)控制台中按原样运行，或者将其包装在适当的类定义中并添加任何异常处理以将其作为 Java 运行)

```
import javax.xml.transform.*;
import javax.xml.transform.dom.*;
import javax.xml.transform.stream.*;
import javax.xml.parsers.*;
import org.w3c.dom.*;
import org.w3c.dom.ls.*;

public void stripNils(Node n) {
  if(n instanceof Element &&
      "true".equals(((Element)n).getAttribute("xsi:nil"))) {
    // element is xsi:nil - strip it out
    n.getParentNode().removeChild(n);
  } else {
    // we're keeping this node, process its children (if any) recursively
    NodeList children = n.getChildNodes();
    for(int i = 0; i < children.getLength(); i++) {
      stripNils(children.item(i));
    }
  }
}

// load the document (NB DBF is non-namespace-aware by default)
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document xmlDoc = db.parse(new File("input.xml"));

stripNils(xmlDoc);

// write out the modified document, in this example to stdout
LSSerializer ser =
  ((DOMImplementationLS)xmlDoc.getImplementation()).createLSSerializer();
LSOutput out =
  ((DOMImplementationLS)xmlDoc.getImplementation()).createLSOutput();
out.setByteStream(System.out);
ser.write(xmlDoc, out); 
```

在您的原始示例 XML 上，这会产生正确的结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<p849:retrieveAllValues xmlns:p849="http://package.de.bc.a">
    <retrieveAllValues>

        <existingValues>
            <Values>
                <value1> 10.00</value1>
                <value2>123456</value2>
                <value3>1234</value3>

                <value5/>
            </Values>
        </existingValues>

    </retrieveAllValues>
</p849:retrieveAllValues> 
```

空行实际上并不是空的，它们包含已删除元素两侧的空白文本节点，因为此处仅删除了元素本身。

# google-maps - Google Maps API，我可以更改国家名称吗？

> ID：14861105
> 
> 赞同：0
> 
> 时间：2013-02-13T19:08:29.310
> 
> 标签：google-maps, google-maps-api-3

我在我的网站上使用 Google Maps API v3 作为地图，并将语言设置为法语。

`<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&language=fr">`

问题是谷歌在国名的法语翻译方面做得很差。为了解决这个问题，我想知道我是否可以重写所有国家名称。我已经搜索和搜索，但是，唉，似乎只是基于样式的修改。这可以做到吗？如果是这样，怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:27:36.153

一种选择是隐藏地图上的所有标签并添加您自己的标签。隐藏现有标签（使用[样式化地图）后，您可以使用](https://developers.google.com/maps/documentation/javascript/styling)[infobox](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/infobox-label.html)将您喜欢的标签添加到地图中。如果你有很多标签，这将不起作用，但如果它只是国家名称，它应该没问题。

# mongodb - 替换 MongoDB 中 $where 的使用

> ID：14861110
> 
> 赞同：0
> 
> 时间：2013-02-13T19:08:53.017
> 
> 标签：mongodb, mongodb-query, mongodb-php, nosql

我有一个问题，我需要比较两个字段的划分是否大于或等于某个值。所以我找到的解决方案是：

```
{
    "$where": "this.total / this.limit > 0.6"
} 
```

但是文档说使用 $where 对性能不利，因为它会运行一个 javascript 函数，并丢失索引。

有人对此有更好的解决方案，不使用 $where 吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:24:51.377

[您可以使用divide ( http://docs.mongodb.org/manual/reference/aggregation/#_S_divide](http://docs.mongodb.org/manual/reference/aggregation/#_S_divide) )移至聚合框架：

```
db.col.aggregate([
    {$match: {_id: whatever_or_whatever_clause_you_want}},
    {$project: {
        // Your document fields
        divided_limit: {$divide: ['$total', '$limit']}
    }},
    {$match: {divided_limit: {$gt: 0.6}}}
]); 
```

注意：聚合框架是 v2.1 之后的新版本

> 但是文档说使用 $where 对性能不利，因为它会运行一个 javascript 函数，并丢失索引

无论如何，您不能为此使用索引，没有办法为这样的数学函数使用索引。关键是 JS 引擎比普通查询慢了 16X，聚合框架应该更快。不仅如此，JS 锁对于所有查询都是全局的。

当然，最快的方法是在修改应用程序中的记录时将此总和预聚合到另一个字段中，然后您将不需要任何这些，只需一个普通查询即可。

# android - 在没有 SIP 的情况下传输实时 Android 音频

> ID：14861111
> 
> 赞同：0
> 
> 时间：2013-02-13T19:08:56.253
> 
> 标签：android, audio, stream, sip, audio-recording

我希望以类似于婴儿监视器的功能（单向收听）的方式将音频从我正在开发的 Android 应用程序实时传输到服务器。

我创建了一个测试应用程序，它使用 SIP 在我们的客户端和服务器应用程序之间发起 VOIP 呼叫。问题是现在我需要一种在非 SIP 启用设备上执行此操作的方法。我尝试将来自设备麦克风的音频录制到缓冲区中，然后通过 HTTP 对象将缓冲区分块发送到服务器，并重新组装音频以进行播放，但效果不佳。

是否有人对将实时音频从 Android 设备流式传输到服务器应用程序进行处理有任何建议？SIP 运行良好，但我没有时间在我们所有不受支持的设备上实现 SIP 堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:48:33.317

XMPP/jingle（又名 gtalk）是通常的选择。有 C 库以及使用 smack 库的 java 中的一些支持。（smack jingle 支持很旧并且效果不佳，但 IIRC 有人正在开发新版本）

# jquery - Jquery：在悬停时扩展选择选项

> ID：14861117
> 
> 赞同：4
> 
> 时间：2013-02-13T19:09:21.393
> 
> 标签：jquery

如何使用 jquery 在鼠标悬停时展开/打开选择选项以显示选择列表中的所有项目？

```
 <select size="3" id="something">
       <option value="1">.1..</option>
       <option value="2">.2..</option>
 <option value="3">.3..</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T19:16:15.203

你的意思是这样的吗。

```
$('select').hover(function(){
    var count = $(this).children().length;
    $(this).attr('size', count);
},function(){
    $(this).removeAttr('size');
}); 
```

This will add and remove the size attribute when the select is hovered over. 看到这个[小提琴](http://jsfiddle.net/bplumb/GE86L/1/)。

# python - 如何确定变量 M 的 SciPy 矩阵“类型”

> ID：14861119
> 
> 赞同：2
> 
> 时间：2013-02-13T19:09:28.140
> 
> 标签：python, scipy, sparse-matrix

是否有方法或可靠的方法来确定给定矩阵是否`M`是通过`coo_matrix()`or创建的`csc_matrix()`？`csr_matrix()`

我怎么能写这样的方法：

```
MATRIX_TYPE_CSC = 1
MATRIX_TYPE_CSR = 2
MATRIX_TYPE_COO = 3
MATRIX_TYPE_BSR = 4
...

def getMatrixType(M):
    if ...:
         return MATRIX_TYPE_COO
    else if ...:
         return MATRIX_TYPE_CSR
    return ... 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:14:04.547

假设您的矩阵是稀疏矩阵，您需要以下`.getformat()`方法：

```
In [70]: s = scipy.sparse.coo_matrix([1,2,3])

In [71]: s
Out[71]: 
<1x3 sparse matrix of type '<type 'numpy.int32'>'
    with 3 stored elements in COOrdinate format>

In [72]: s.getformat()
Out[72]: 'coo'

In [73]: s = scipy.sparse.csr_matrix([1,2,3])

In [74]: s
Out[74]: 
<1x3 sparse matrix of type '<type 'numpy.int32'>'
    with 3 stored elements in Compressed Sparse Row format>

In [75]: s.getformat()
Out[75]: 'csr' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T19:18:48.300

似乎 SciPy 提供了一个功能接口来检查稀疏矩阵类型：

```
In [38]: import scipy.sparse as sps

In [39]: sps.is
sps.issparse        sps.isspmatrix_coo  sps.isspmatrix_dia
sps.isspmatrix      sps.isspmatrix_csc  sps.isspmatrix_dok
sps.isspmatrix_bsr  sps.isspmatrix_csr  sps.isspmatrix_lil 
```

例子：

```
In [39]: spm = sps.lil_matrix((4, 5))

In [40]: spm
Out[40]: 
<4x5 sparse matrix of type '<type 'numpy.float64'>'
    with 0 stored elements in LInked List format>

In [41]: sps.isspmatrix_lil(spm)
Out[41]: True

In [42]: sps.isspmatrix_csr(spm)
Out[42]: False 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T19:15:55.687

```
def getMatrixType(M):
    if isinstance(M, matrix_coo):
         return MATRIX_TYPE_COO
    else if isinstance(M, matrix_csr):
         return MATRIX_TYPE_CSR 
```

的类型`scipy.sparse.coo_matrix`是`type`，所以`isinstance`工作得很好。

但是……你为什么要这样做？它不是很pythonic。

# asp.net - 最佳实践：存储自定义配置文件数据？

> ID：14861129
> 
> 赞同：0
> 
> 时间：2013-02-13T19:10:05.887
> 
> 标签：asp.net, vb.net, authentication, asp.net-membership

所以这是我上一个问题的延续……不情愿地，我选择使用内置的 ASP.NET/VB 身份验证。但我现在的主要问题是如何定制它？

例如

1）我需要用户名是一个电子邮件地址，并且内置版本要求/存储两者。

2) 存储其他配置文件数据的最佳方式是什么。{IE 地址、电话号码等}。

我的想法...

1）隐藏（不知何故）登录控件上的用户名文件，并将电子邮件地址传递给（用户名和电子邮件地址）列。

2) 我打算创建一个单独的表来存储附加数据（电话、地址等），并通过在 ASP 身份验证过程中生成的 UserID 来保存它。但是，由于我对此很陌生，我不确定这样做是否会产生看不见的后果。从理论上讲，它似乎会起作用。

对于一个非常陌生的人来说，关于身份验证/会员系统的信息非常混乱。我基本上有我的网站构建，但这部分。我不禁想知道这世界上怎么这么容易……

任何人都可以提供任何意见吗？- 谢谢！

# wordpress - RSS 提要中的回显类别

> ID：14861130
> 
> 赞同：0
> 
> 时间：2013-02-13T19:10:06.697
> 
> 标签：wordpress, rss, categories

我正在使用默认的 /feed.php 将 rss 提要拉入我的页面模板。我可以很好地呼出标题、永久链接和描述，但我似乎无法显示要显示的类别。理想情况下，我想使用类别将背景图像按类插入到 div 中。这就是我所拥有的：

```
<?php if(function_exists('fetch_feed')) {
include_once(ABSPATH . WPINC . '/feed.php');  
$feed = fetch_feed('http://www.*link to the feed*'); 
$limit = $feed->get_item_quantity(50); 
$items = $feed->get_items(0, $limit); 
}
if ($limit == 0) echo 'The feed is either empty or unavailable.';
else foreach ($items as $item) : ?>
<div class="feedItem">
<div class="<?php echo $item->get_categories(); ?>"></div>
<ul>
<li class="feedtitle"><a href="<?php echo $item->get_permalink(); ?>"     
target="_blank"> <?php echo $item->get_title(); ?></a> </li>
<li class="feeddate"><?php echo $item->get_date('m/d/y'); ?></li>
<li><p><?php echo($item->get_description()); ?></p></li>
</ul>   
</div><!--item-->
<?php endforeach; ?> 
```

但`<?php echo $item->get_categories(); ?>`唯一的回声`<div class="Array"></div>`

如何从 rss 提要中获取类别名称？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:23:29.137

看看你的代码。

```
<div class="<?php echo $item->get_categories(); ?>"></div> 
```

您将结果放入`get_categories`您`class`的`<div>`.

根据[文档](http://simplepie.org/api/class-SimplePie_Item.html)，`get_categories`返回一个`Array`. 因此，`<div class="Array"></div>`正是预期的结果。

我想你宁愿看到类似的东西`<div class="category1 category2 category3"></div>`？如果是这样，您将需要使用`get_categories`返回的数组。

编辑的代码，基于[http://simplepie.org/api/class-SimplePie_Category.html](http://simplepie.org/api/class-SimplePie_Category.html)

```
<?php
$cat_terms = array();
for ($item->get_categories() as $cat) {
    $cat_terms[] = $cat->get_term();
}
?>
<div class="<?php echo implode(" ", $cat_terms); ?>"></div> 
```

# ios - 在 segue 中绘制与编写代码以转换视图 - 为什么数据有时不传输？

> ID：14861133
> 
> 赞同：0
> 
> 时间：2013-02-13T19:10:13.667
> 
> 标签：ios, nsuserdefaults, uistoryboard, delegation

假设我在 ViewControllerA 上有一个 UILabel，在 ViewControllerB 上有一个 UITextField。我想去 ViewControllerB 并输入文本，然后按一个按钮返回 ViewControllerA。UILabel 现在应该读取在 UITextField 中输入的任何内容。

通过使用 NSUserDefaults 和委托，我能够完成上述任务。我正在使用故事板来做到这一点。我的问题是关于故事板中使用的转场。

似乎在使用委托时，我必须使用代码进出情节提要，而不是在视觉上将视图控制器与 segue 连接以传输数据。这是我按下 ViewController A 上的按钮时的代码：

```
- (IBAction)pressFirstButton:(id)sender {
UIStoryboard* sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
RBViewController2 *vc2 = [sb  instantiateViewControllerWithIdentifier:@"ViewController2"];
[vc2 setDelegate:self];
[self presentViewController:vc2 animated:YES completion:NULL];
} 
```

当将数据从 ViewControllerB 传递回 ViewControllerA 时，我这样做：

```
- (IBAction)buttonSegueBackTo1:(id)sender {
NSString *sendThis = self.textFieldVC2.text;
[self.delegate passTextFieldInput:sendThis];
[self dismissViewControllerAnimated:YES completion:NULL];
} 
```

视图控制器之间没有划线，一切正常。如果我不编写相同的代码并在 segue 中绘制，数据将不会向后传递。但是，当我尝试使用 NSUserDefaults 传递这样的数据时，我不必编写代码来进出视图控制器。相反，我可以简单地将视图控制器与绘制的 segue 连接起来。奇怪的是，如果我在手动编码视图控制器（不绘制 segue）时尝试使用 NSUserDefaults 传递数据，则数据不会传输。

我在想也许不是在 -(IBAction) pressFirstButton:(id) sender 方法中编写代码，而是应该将代码放在 prepareForSegue 方法中。

我的问题是为什么绘制的segues有时会导致数据丢失？是否必须在没有抽签的情况下完成所有委派？如果 NSUserDefaults 需要 segues 正确传输并且委派需要代码正确传输，那么如果我有一个需要两者的视图，似乎 NSUserDefaults 将胜过委派 b/c 正在使用的手动 segue “重置”视图并且只有 NSUserDefaults 数据遗迹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:30:30.347

普通转场（除了展开转场）总是创建新的视图控制器。因此，如果您使用非展开 segue 以外的任何方法返回到 A，那么您实际上并不是在“返回”，而是在创建一个新的 ViewControllerA。在您演示的情况下，通常不会使用展开转场，只是返回一个控制器，但您可以。

这种情况也不是使用用户默认值的好地方。Apple 推荐的方法是使用委托，就像您在问题代码中所做的那样。您展示的方式可能是最好的方式，而不是使用转场返回。不过，您当然可以使用 segue 继续前进，在这种情况下，您将实现 prepareForSegue: 因此您可以将自己设置为委托和/或转发任何数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:37:00.070

你的问题有点难以解析，但我想你是在问是否有办法通过 segues 获取传递数据。答案是肯定的，而且比您尝试的解决方法要好得多。

在您的按钮中，您会调用：

```
[self performSegueWithIdentifier:@"scrollerSegue" sender:self]; 
```

这将触发下面的方法，您可以在这里设置目标 viewController 上的数据。您可以在目标 viewController 上设置抽象属性，但不能填充 UIKit 元素（标签、图像视图等），因为它们尚不存在。而是设置属性，然后在`viewWillAppear`目标 viewController 中，根据需要进行设置。（或者，您可以设置委托，然后调用委托上的方法以根据需要获取数据，而不是传递数据）。

为了取回数据，使用委托并在其上调用方法似乎是 Apple 推荐的做事方式。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
     if ([[segue identifier] isEqualToString:@"scrollerSegue"])
     {
         ScrollViewController * target = segue.destinationViewController;
         target.assetsArray = self.assetsArray;
         target.delegate = self;
     }
} 
```

# c# - 存储父子关系

> ID：14861137
> 
> 赞同：2
> 
> 时间：2013-02-13T19:10:32.117
> 
> 标签：c#, collections

我想知道如何在 C# 中最好地存储一组值，给定父/子（ren）关系。我考虑过 Dictionary、KeyValuePair 和 List，或者可能定义了一个类。我可能想多了，但我想确保没有更好的方法。我需要能够进行快速查找。我的数据集是这样的，第一项是“父项”，如果你愿意的话，其余的项与第一项相关。所以：

```
G   H Y
Z   X A J 
```

G 与 H 和 Y 有关，Z 与 X、A 和 J 有关。很简单。但是我如何最好地将这些存储在 C# 中？我可以有一个数组，其中 0 索引代表父级。在 C# 中有更好的方法来存储它吗？这很像 SQL 中的一对多关系。但我必须在代码中完成这一点。我的目标是能够轻松地根据父母拉出亲属名单。所以，给定 G，我应该很快就能得到 H 和 Y。我是否使用数组、List<>... 其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:14:54.633

`Dictionary<string, string[]>`对于您正在谈论的内容，这将是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:15:39.010

我建议`Lookup<TKey, TValue>`（[http://msdn.microsoft.com/en-us/library/bb460184.aspx](http://msdn.microsoft.com/en-us/library/bb460184.aspx)）。

> 查找类似于字典。不同之处在于 Dictionary 将键映射到单个值，而 Lookup 将键映射到值的集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:20:05.567

我会使用一个哈希表对象。性能非常简洁，因为键值是计算散列，查找值是通过计算键和直接命中来完成的。

检查将哈希表与字典进行比较的其他帖子。

[在哈希表或排序列表中查找项目哪个更快？](https://stackoverflow.com/questions/876923/which-is-faster-to-find-an-item-in-a-hashtable-or-in-a-sorted-list)

[.NET HashTable Vs Dictionary - 字典可以这么快吗？](https://stackoverflow.com/questions/1089132/net-hashtable-vs-dictionary-can-the-dictionary-be-as-fast)

[为什么字典比哈希表更受欢迎？](https://stackoverflow.com/questions/301371/why-is-dictionary-preferred-over-hashtable)

# javascript - 如何在第一次迭代后停止此电传动画？

> ID：14861144
> 
> 赞同：1
> 
> 时间：2013-02-13T19:10:58.130
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用 jquery 进行打字效果，并找到了这段代码并对其进行了编辑，使其可以根据需要完美地工作。

但是，我有一个问题，我无法停止循环。

我试图检测到最后一段已打印，因此我可以在没有运气的情况下添加一个函数。

感谢您的建议和提示。

代码是：

[http://jsbin.com/araget/33/](http://jsbin.com/araget/33/)

```
(function ($) {

  function typeString($target, str, cursor, delay, cb) {
    $target.html(function (_, html) {
      return html + str[cursor];
    });

    if (cursor < str.length - 1) {
      setTimeout(function () {
        typeString($target, str, cursor + 1, delay, cb);
      }, delay);
    }
    else {
      cb();
    }
  }

  function deleteString($target, delay, cb) {
    var length;

    $target.html(function (_, html) {
      length = html.length;
      return html.substr(0, length - 1);
    });

    if (length > 1) {
      setTimeout(function () {
        deleteString($target, delay, cb);
      }, delay);
    }
    else {
      cb();
    }
  }

  // jQuery hook
  $.fn.extend({
    teletype: function (opts) {
      var settings = $.extend({}, $.teletype.defaults, opts);

      return $(this).each(function () {
        (function loop($tar, idx) {
          // type
          typeString($tar, settings.text[idx], 0, settings.delay, function () {
            // delete
            setTimeout(function () {
              deleteString($tar, settings.delay, function () {
                loop($tar, (idx + 1) % settings.text.length);
              });
            }, settings.pause);
          });

        }($(this), 0));
      });
    }
  });

  // plugin defaults  
  $.extend({
    teletype: {
      defaults: {
        delay: 100,
        pause: 5000,
        text: []
      }
    }
  });
}(jQuery));

$('#target').teletype({
  text: [
    'Lorem ipsum dolor sit amet, consetetur sadipscing elitr,',
    'sed diam nonumy eirmod tempor invidunt ut labore et dolore',
    'magna aliquyam erat, sed diam voluptua. At vero eos et'
  ]
});

$('#cursor').teletype({
  text: ['_', ' '],
  delay: 0,
  pause: 500
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:47:03.663

您可以添加一个参数来停止动画的循环，并将另一个参数设置为在动画结束时调用的回调。让我们分别说`forever`和`end`。

```
// plugin defaults  
$.extend({
  teletype: {
    defaults: {
      delay: 100,
      pause: 5000,
      text: [],
      forever: true,
      end: $.noop
    }
  }
}); 
```

设置`forever`为`true`将使动画无限期地继续，并`text`在到达最后一个元素之后从第一个元素重新开始。设置`forever`为`false`将使其在达到第一次迭代后停止。

设置`end`为将在动画的第一次迭代完成时调用的回调函数。此选项需要`forever`设置为`false`，否则将永远不会被调用。

利用：

```
if (settings.forever || (idx + 1 < settings.text.length)) {
  loop($tar, (idx + 1) % settings.text.length);
} else {
  settings.end.call(self);
} 
```

代替

```
loop($tar, (idx + 1) % settings.text.length); 
```

应用这些更改后，您可以`teletype`使用适当的参数进行调用。

```
$('#target').teletype({
  text: [
    'Lorem ipsum dolor sit amet, consetetur sadipscing elitr,',
    'sed diam nonumy eirmod tempor invidunt ut labore et dolore',
    'magna aliquyam erat, sed diam voluptua. At vero eos et'
  ],
  forever: false,
  end: function(){
    alert("Teletype is done!");
  }
}); 
```

[在这里你可以看到它。](http://jsbin.com/araget/36/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:18:28.127

您需要从处理程序中获取处理程序`setTimeout()`并`clearTimeout()`与处理程序一起运行。

```
var handler = setTimeout(function () {
        typeString($target, str, cursor + 1, delay, cb);
      }, delay);
....
clearTimeout(handler); 
```

编辑：我修改了你的代码来解释你应该在哪里放置一个停止例程。

检查此链接：http: [//jsbin.com/enukit/1](http://jsbin.com/enukit/1)

你需要再清理一下你的逻辑。光标应该分开或通过选项设置，因为你的意思是停止循环，用于闪烁光标。

```
(function ($) {
  // writes the string
  //
  // @param jQuery $target
  // @param String str
  // @param Numeric cursor
  // @param Numeric delay
  // @param Function cb
  // @return void

  var handler1, mycount=0, handler2, handler3;
  function typeString($target, str, cursor, delay, cb) {
    $target.html(function (_, html) {
      return html + str[cursor];
    });
    //alert('cursor:'+cursor);
    //alert('str.length:'+str);
    if (cursor < str.length - 1) {
      handler1 = setTimeout(function () {
        typeString($target, str, cursor + 1, delay, cb);
      }, delay);
    }
    else {
      cb();
    }
  }

  // clears the string
  //
  // @param jQuery $target
  // @param Numeric delay
  // @param Function cb
  // @return void
  function deleteString($target, delay, cb) {
    var length;

    $target.html(function (_, html) {
      length = html.length;
      return html.substr(0, length - 1);
    });

    if (length > 1) {
      handler2 = setTimeout(function () {
        deleteString($target, delay, cb);
      }, delay);
    }
    else {
      cb();
    }
  }

  // jQuery hook
  $.fn.extend({
    teletype: function (opts) {
      var settings = $.extend({}, $.teletype.defaults, opts);
      $(this).each(function () {
mycount=0;
        (function loop($tar, idx) {
        mycount ++;
          // type
          typeString($tar, settings.text[idx], 0, settings.delay, function () {
            // delete
            clearTimeout(handler1);
            handler3 = setTimeout(function () {
              deleteString($tar, settings.delay, function () {
                if (mycount<settings.text.length) {
                  loop($tar, (idx + 1));} else {
clearTimeout(handler3);
                    alert('The end!');
                  }
              });
            }, settings.pause);
          });

        }($(this), 0));
      });

    }
  });

  // plugin defaults  
  $.extend({
    teletype: {
      defaults: {
        delay: 100,
        pause: 5000,
        text: []
      }
    }
  });
}(jQuery));

$('#target').teletype({
  text: [
    'Lorem ipsum dolor sit amet, consetetur sadipscing elitr,',
    'sed diam nonumy eirmod tempor invidunt ut labore et dolore',
    'magna aliquyam erat, sed diam voluptua. At vero eos et'
  ]
});
/*
$('#cursor').teletype({
  text: ['_', ' '],
  delay: 0,
  pause: 500
});
*/ 
```

# xslt - XSLT 1.0 以及如何在 Text 中找到一些关键字

> ID：14861148
> 
> 赞同：2
> 
> 时间：2013-02-13T19:11:16.610
> 
> 标签：xslt

我想使用 XSLT 1.0 在 Text 中找到一些关键字

*   contentText ：海洋天气预报、警告、概要和冰情。数百个陆地和浮标站观测和海洋天气预报、警告、概要和冰情。数百个陆地和浮标站观测。

*   关键词：“海洋天气，海洋天气，海洋天气”

*   分隔符 : ,

以下代码只是一个关键字作品......但我想找到多个关键字（“海洋天气，海洋天气，海洋天气”）

```
<xsl:choose>
  '<xsl:when test="contains($contentText,$keyWordLower)">
    <xsl:value-of select="substring-before($contentText,$keyWordLower)" disable-output-escaping="yes"/>
    <span class="texthighlight">
      <xsl:value-of select="$keyWordLower" disable-output-escaping="yes"/>
    </span>
    <!--Recursive call to create the string after keyword-->
    <xsl:call-template name="ReplaceSections">
      <xsl:with-param name="contentText" select="substring-after($contentText,$keyWordLower)"/>
      <xsl:with-param name="keyWordLower" select="$keyWordLower"/>
    </xsl:call-template>
  </xsl:when> <xsl:otherwise>
    <xsl:value-of select="$contentText"/>
  </xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:18:17.560

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="pKeyWords">
  <kw>Marine weather</kw>
  <kw>marine weather</kw>
  <kw>Marine Weather</kw>
 </xsl:param>

 <xsl:variable name="vKeyWords" select=
 "document('')/*/xsl:param[@name='pKeyWords']/*"/>

 <xsl:template match="/*">
  <t><xsl:apply-templates/></t>
 </xsl:template>

 <xsl:template match="text()" name="highlightKWs">
  <xsl:param name="pText" select="."/>

  <xsl:if test="not($vKeyWords[contains($pText,.)])">
   <xsl:value-of select="$pText"/>
  </xsl:if>

  <xsl:apply-templates select="$vKeyWords[contains($pText,.)]">
   <xsl:sort select="string-length(substring-before($pText,.))"
    data-type="number"/>
   <xsl:with-param name="pText" select="$pText"/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="kw">
   <xsl:param name="pText"/>
   <xsl:if test="position()=1">
    <xsl:value-of select="substring-before($pText, .)"/>
    <span class="texthighlight">
     <xsl:value-of select="."/>
    </span>
    <xsl:call-template name="highlightKWs">
     <xsl:with-param name="pText" select="substring-after($pText, .)"/>
    </xsl:call-template>
   </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于以下 XML 文档时：**

```
<t>Marine weather forecasts,
warnings, synopsis, and ice conditions.
Hundreds of land and buoy station observations
across and marine weather forecasts, warnings,
synopsis, and ice conditions. Hundreds of land
and buoy station observations across.</t> 
```

**产生想要的正确结果：**

```
<t>
   <span class="texthighlight">Marine weather</span> forecasts,
warnings, synopsis, and ice conditions.
Hundreds of land and buoy station observations
across and <span class="texthighlight">marine weather</span> forecasts, warnings,
synopsis, and ice conditions. Hundreds of land
and buoy station observations across.</t> 
```

# mysql - mysql 通过排除组删除记录组

> ID：14861150
> 
> 赞同：0
> 
> 时间：2013-02-13T19:11:18.857
> 
> 标签：mysql, select, group-by

我有一张这样的桌子：

```
| id | EAN | supplier_code |
|0001|11111|         aaaaaa|
|0002|22222|         aaaaaa|
|0003|33333|         bbbbbb|
|0004|33333|         cccccc|
|0005|11111|         aaaaaa| 
```

我必须删除像 3 和 4 这样的 ID，因为它们是脏数据。我如何编写一个选择来找到它们？

像这样的东西

```
SELECT id, EAN, supplier_code, COUNT( id ) AS NumDuplicati
FROM table
WHERE supplier_code <>  ""
GROUP BY EAN
HAVING NumDuplicati >1 
```

但我不能删除像 1 和 5 这样的 ID ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:21:36.390

未经测试：不确定您是否可以在这样的情况下与众不同...

```
delete from yourTable where EAN in (
Select EAN
FROM yourTable
Group by EAN
having count(distinct supplier_Code ) > 1) 
```

# wcf - 在 WCF 中获取绑定错误。无法理解它是什么。

> ID：14861158
> 
> 赞同：4
> 
> 时间：2013-02-13T19:11:37.393
> 
> 标签：wcf, wcf-binding

找不到与绑定 BasicHttpBinding 的终结点的方案 https 匹配的基地址。注册的基地址方案是 [http]。

```
 Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

 Exception Details: System.InvalidOperationException: Could not find a base address that matches scheme https for the endpoint with binding BasicHttpBinding. Registered base address schemes are [http].

 Source Error: 

  An unhandled exception was generated during the execution of the current web request.     Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

 Stack Trace: 

   [InvalidOperationException: Could not find a base address that matches scheme https for the endpoint with binding BasicHttpBinding. Registered base address schemes are [http].] 
```

System.ServiceModel.ServiceHostBase.MakeAbsoluteUri(Uri relativeOrAbsoluteUri, Binding binding, UriSchemeKeyedCollection baseAddresses) +12366396 System.ServiceModel.Description.ConfigLoader.LoadServiceDescription(ServiceHostBase host, ServiceDescription description, ServiceElement serviceElement, Action`1 addBaseAddress) +12363749 System.ServiceModel.ServiceHostBase .LoadConfigurationSectionInternal(ConfigLoader configLoader, ServiceDescription description, ServiceElement serviceSection) +67 System.ServiceModel.ServiceHostBase.ApplyConfiguration() +108 System.ServiceModel.ServiceHostBase.InitializeDescription(UriSchemeKeyedCollection baseAddresses) +192 System.ServiceModel.ServiceHost.InitializeDescription(Type serviceType, UriSchemeKeyedCollection baseAddresses) +49 System.ServiceModel.ServiceHost..ctor（类型 serviceType，Uri[] baseAddresses）+151 System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost（类型 serviceType，Uri[] baseAddresses）+30 System.ServiceModel.Activation.ServiceHostFactory.CreateServiceHost（String constructorString，Uri[] baseAddresses） +422 System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath) +1461 System.ServiceModel.HostingManager.ActivateService(String normalizedVirtualPath) +44 System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) +651Uri[] baseAddresses) +422 System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath) +1461 System.ServiceModel.HostingManager.ActivateService(String normalizedVirtualPath) +44 System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) +651Uri[] baseAddresses) +422 System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath) +1461 System.ServiceModel.HostingManager.ActivateService(String normalizedVirtualPath) +44 System.ServiceModel.HostingManager.EnsureServiceAvailable(String normalizedVirtualPath) +651

```
 [ServiceActivationException: The service '/BulkEmailService.svc' cannot be activated due to an exception during compilation.  The exception message is: Could not find a base address that matches scheme https for the endpoint with binding BasicHttpBinding. Registered base address schemes are [http]..]
   System.Runtime.AsyncResult.End(IAsyncResult result) +688590
   System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult result) +190

     System.ServiceModel.Activation.HttpModule.ProcessRequest(Object sender, EventArgs e) +359
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75 
```

这是我的 Web.config 文件。请帮忙。

```
 <?xml version="1.0"?>
   <configuration>

     <system.web>
       <compilation debug="true" targetFramework="4.0" />
     </system.web>
     <connectionStrings>
       <add name="WWDbConnect"
            connectionString="Data Source=(dev0320);USER ID = scott; Password = t;Max Pool Size=200;"
            providerName="System.Data.SqlClient" />
     </connectionStrings>
     <system.serviceModel>
       <bindings>
         <basicHttpBinding>
           <binding name="BasicHttpBindingWithNoSecurity" maxBufferPoolSize="524288" maxReceivedMessageSize="500000">
             <security mode="Transport">
               <transport clientCredentialType="Certificate" proxyCredentialType="None"
                   realm="" />
               <message clientCredentialType="UserName" algorithmSuite="Default" />
             </security>
           </binding>
         </basicHttpBinding>
       </bindings>
       <client/>
       <services>
           <service name="WW.Common.Service.Impl.EmailService" behaviorConfiguration="BasicHttpBindingWithNoSecurity">
             <host>
               <baseAddresses>
                 <add baseAddress = "https://localhost:8270/Design_Time_Addresses/TestWcfEmailServiceLibrary/EmailService/" />
               </baseAddresses>
             </host>
             <endpoint address="EmailService" binding="basicHttpBinding" contract="WW.Common.Service.Contract.IEmailService" />
             <endpoint address="mex" binding="basicHttpBinding" bindingConfiguration="BasicHttpBindingWithNoSecurity" 
                       name="mexEndpoint" contract="IMetadataExchange" />
           </service>
         </services>
         <behaviors>
         <serviceBehaviors>
             <behavior name="EmailService">
               <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true"/>
               <serviceMetadata httpsGetEnabled="true" />
               <serviceSecurityAudit auditLogLocation="Application"
                  suppressAuditFailure="true"
                  serviceAuthorizationAuditLevel="Success"
                  messageAuthenticationAuditLevel="Success" />
           </behavior>
         </serviceBehaviors>
       </behaviors>
       <diagnostics>
         <messageLogging logEntireMessage="true"
                         maxMessagesToLog="3000"
                         logMessagesAtServiceLevel="true"
                         logMalformedMessages="false"
                         logMessagesAtTransportLevel="false" />
       </diagnostics>
       <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
     </system.serviceModel>
    <system.webServer>
       <modules runAllManagedModulesForAllRequests="true"/>
     </system.webServer>

   </configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:23:15.157

您在基址中使用 https，但您的绑定是 basicHttpBinding。查看您的配置，我假设您打算使用证书。我建议您将绑定更改为 WSHttpBinding

```
<endpoint address="test" binding="wsHttpBinding" contract="WW.Common.Service.Contract.IEmailService"/> 
```

或者，如果您只想使用 http。将基地址更改为http，如下所示。请注意，我还从您的代码中删除了绑定配置

```
 <service name="WW.Common.Service.Impl.EmailService">
          <host>
            <baseAddresses>
              <add baseAddress = "http://localhost:8270/Design_Time_Addresses/TestWcfEmailServiceLibrary/EmailService/" />
            </baseAddresses>
          </host>
          <endpoint address="EmailService" binding="basicHttpBinding" contract="WW.Common.Service.Contract.IEmailService" />
          <endpoint address="mex" binding="basicHttpBinding" 
                    name="mexEndpoint" contract="IMetadataExchange" />
        </service> 
```

我还建议您阅读 WCF 绑定

# jquery - 使用 jquery validate 和选择的插件验证选择框

> ID：14861160
> 
> 赞同：2
> 
> 时间：2013-02-13T19:11:46.487
> 
> 标签：jquery, jquery-validate, jquery-chosen

我正在尝试一起使用 validate 和 selected 插件。我在验证选择框时遇到问题。我发现了类似的问题[How can I use jQuery validation with the "chosen" plugin?](https://stackoverflow.com/questions/11232310/how-can-i-use-jquery-validation-with-the-chosen-plugin) 和[Chosen.js 并验证 jquery](https://stackoverflow.com/questions/10387553/chosen-js-and-validate-jquery)但我找不到将解决方案导入我的代码的方法：

```
<form  class='myform' id='producteditform'>
                    <input type='hidden' value='<? echo $row['id']; ?>' name='pkedit' id='pkedit'>                   
                    <input type='hidden' value='save' name='operation' id='operation'>
                    <p><label for='nameedit'>Product Name</label><em>*</em><input id='nameedit' name='nameedit' value='<? echo $row['pname']?>'/></p>
                    <p><label for='unitedit'>Unit</label><em>*</em><?
                        $query="select * from units";
                        $result=$mysqli->query($query);
                        if($result->num_rows==0)
                        echo "<a href='units.php?operation=insert'>No unit found. Please define a unit first</a>";
                        else{               
                        echo    "<select class='chosen' id='unitedit' name='unitedit'>";        
                            while($row=$result->fetch_assoc())
                              echo  "<option value='".$row['id']."'>".$row['name']."</option>";
                            echo    "</select>";
                        }
                        $mysqli->close();               

                    ?></p>                    
                    <p><a class='button' class='button' id='saveedit'>Save</a>
                    <a class='button' id='canceledit' onclick='f()' >Cancel</a></p>
                    </form> 
```

jQuery代码

```
$("#save").click(function () {
        if($("#producteditform").validate({ 
         ignore: [], 
                rules: {
                  nameedit: {
                    required: true,
                    maxlength:100

                  },
                  unitedit:{
                    required: true,
                  }

                }
              }).form()
            )
        {
            // do sth

                })
        }
} 
```

html渲染输出

```
<form class="myform" id="productform" novalidate="novalidate">
                    <input type="hidden" value="insert" name="operation" id="operation">

                    <p><label for="name">Product Name</label><em>*</em><input type="text" name="name" id="name"></p>
                    <p><label for="unit">Unit</label><em>*</em><select class="chosen chzn-done" id="unit" name="unit" style="display: none;"><option value="">please choose..</option><option value="1">kgg</option></select><div id="unit_chzn" class="chzn-container chzn-container-single" style="width: 200px;" title=""><a href="javascript:void(0)" class="chzn-single" tabindex="-1"><span>please choose..</span><div><b></b></div></a><div class="chzn-drop" style="left: -9000px; width: 198px; top: 24px;"><div class="chzn-search"><input type="text" autocomplete="off" style="width: 163px;"></div><ul class="chzn-results"><li id="unit_chzn_o_0" class="active-result result-selected" style="">please choose..</li><li id="unit_chzn_o_1" class="active-result" style="">kgg</li></ul></div></div></p>
                    <p><a class="button" id="save">Save</a>
                    <a class="button" id="cancel" onclick="f()">Cancel</a></p>                  
                    </form> 
```

当我删除 class='chosen' 时，单击保存按钮时一切正常，否则我收到错误 Uncaught Error: Failed to validate, found an element with no name assigned。请参阅控制台以获取元素参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:21:51.050

试试这样的东西。

```
$(document).ready(function() {

    // initialize the plugin on DOM ready
    $("#producteditform").validate({ 
        // all rules and options,
        rules: {
            nameedit: {
                required: true,
                maxlength:100
            },
            unitedit:{
                required: true,
            }
        }
    });

    // test for valid form
    $('#save').on('click' function() {
        if($("#producteditform").valid()) {
            // do this on valid form
        } else {
            // do this on invalid form
        }
    });

}); 
```

[`$('#producteditform').validate()`初始化](http://docs.jquery.com/Plugins/Validation/validate#options)`form`. _

[`$('#producteditform').valid()`以编程方式触发实际验证测试](http://docs.jquery.com/Plugins/Validation/valid)并返回一个`true/false`布尔值。

* * *

或者，由于 your`event`是事件表单`click`，`submit`因此您只需使用内置`submitHandler`回调函数即可。（无需创建另一个`click`处理程序。）

```
$(document).ready(function() {

    // initialize the plugin on DOM ready
    $("#producteditform").validate({ 
        // all rules and options,
        rules: {
            nameedit: {
                required: true,
                maxlength:100
            },
            unitedit:{
                required: true,
            }
        },
        submitHandler: function(form) {
            // do this on valid form
        }
    });

}); 
```

**完整文档：**

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

在您显示 HTML 输出而不是 PHP 之前，这是一个如何验证`select`元素的通用示例：

**[http://jsfiddle.net/6Dt7F/](http://jsfiddle.net/6Dt7F/)**

`option`重要的是，元素中的第一个或默认值`select`必须包含`value=""`，否则`required`规则将失败。

```
<select name="field1">
    <option value="">please choose...</option>
    <option>option 1</option>
    <option>option 2</option>
    <option>option 3</option>
</select> 
```

* * *

**编辑**：

我仍然没有足够的代码来制作一个有效的演示。但是，由于`chosen`插件隐藏了实际的表单元素，您必须执行以下操作...

1) 针对将要验证并传递数据的实际表单元素，而不是由`chosen`.

2) 通过设置选项[启用 jQuery Validate 以处理隐藏元素。](https://stackoverflow.com/a/8565769/594235)`ignore: []`

尝试这个...

```
$(document).ready(function () {

    // initialize the plugin on DOM ready
    $("#producteditform").validate({ 
        // all rules and options,
        ignore: [], // <-- option so that hidden elements are validated
        rules: {
            name: {  // <-- name of actual text input
                required: true,
                maxlength: 100
            },
            unit:{  // <-- name of actual select input
                required: true
            }
        },
        submitHandler: function(form) {
            // do this on valid form
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-09T03:00:29.383

这是因为 Chosen 插入了一个输入字段，用户可以使用该字段在下拉列表中进行搜索。

由于某种原因，此搜索字段没有*名称*标签（因此出现错误）：

```
<input type="text" autocomplete="off" tabindex="7"> 
```

输入也没有类或 ID，这可能是控制台错误如此模糊的原因。一个快速的解决方法是给它一个名字：

```
$(".chzn-search input").attr('name', 'chzn-search'); 
```

# ruby-on-rails-3 - Rails 路由全局帐户 ID

> ID：14861161
> 
> 赞同：0
> 
> 时间：2013-02-13T19:11:54.610
> 
> 标签：ruby-on-rails-3, routing

我的 Rails 应用程序基于帐户。所以每个用户都属于一个帐户，每个项目等等。

目前我的路线如下：

```
/mission-control
/tasks
/projects 
```

我正在获取用户的当前帐户。由于用户应该能够拥有许多帐户的权限，因此我希望拥有以下路线：

```
/:account_id/mission-control
/:account_id/tasks
/:account_id/projects 
```

我知道我可以写：

```
resource :accounts do
  resource :tasks
end 
```

但这最终会出现在例如

```
/accounts/1/tasks 
```

希望有人可以帮助我如何为此编写路线！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T09:29:38.880

现在我得到了正确的方法：

起初我需要定义范围，如：

```
scope ":account_id" do
  resources :tasks
  resources :projects
end 
```

然后，为了使eversthing工作，在一个循环中引起链接，如：

```
<%= link_to "Project", project %> 
```

不起作用，您需要在应用程序控制器中设置默认 url 选项：

```
def default_url_options(options={})
  if @current_account.present?
    { :account_id => @current_account.id }
  else
    { :account_id => nil }
  end
end 
```

这为我解决了所有`No Route Matches Error`问题。如果没有 :account_id 就不会有错误，例如对于那个设计的东西。

对于@Mohamad：

```
before_filter :set_current_account  

# current account
def set_current_account
  # get account by scoped :account_id

  if params[:account_id]
    @current_account = Account.find(params[:account_id])
    return @current_account
  end

  # dont' raise the exception if we are in that devise stuff
  if !devise_controller?
    raise "Account not found."
  end
end 
```

这种设计和错误处理可能会更好。:S

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:32:37.330

你可以做一个这样的范围：

```
scope ":account_id" do
  resources :tasks
  resources :projects
end 
```

# python - cursor.fetchall() 使用 MySQldb 和 python 返回额外的字符

> ID：14861162
> 
> 赞同：6
> 
> 时间：2013-02-13T19:12:02.093
> 
> 标签：python, mysql, mysql-python

当我使用 python 从 SQL 数据库中获取结果时，我会在返回值的开头和结尾获得额外的章程。例如，下面的代码返回 ((56L,),) 而不是 56，有谁知道如何获取值...以及 (( ,),) 的实际含义...？

```
hp= 56
id= 3

database = MySQLdb.connect (host="localhost", user = "root", passwd = "", db = "db")

cursor = database.cursor()

cursor.execute("UPDATE period_option SET points =%s WHERE period_option_id =%s", (hp, id))

cursor.execute("SELECT points FROM period_option WHERE period_option_id =%s", (po_id_home))
results = cursor.fetchall()
print results 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T19:30:19.353

`fetchall()`返回一个元组列表（实际上是一个元组）。将其视为一系列行，其中每一行是列中的一系列项目。如果您确定您的搜索将只返回 1 行，请使用 fetchone()，它返回一个元组，它更易于解包。下面是从 fetchall() 和 fetchone() 中提取所需内容的示例：

```
# Use fetchall():
((points,),) = cursor.fetchall()  # points = 56L

# Or, if you use fetchone():
(points,) = cursor.fetchone()     # points = 56L 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-21T09:45:51.360

尝试以下方法，这将有助于将 fetchall() 输出转换为更好的列表：

```
 row = cursor.fetchall()
 print row 
 output is : [(1,), (2,), (3,), (4,)]
 num = list(sum(row, ()))
 print num
 output is : [1, 2, 3, 4] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-08-31T12:29:53.867

如果您使用查询仅获取一个值，则只需获取第 0 个索引。

```
results = cursor.fetchall() 
```

如果结果只有一个值使用`results[0]`。它应该为您提供您正在寻找的价值。有时我们在运行查询时会得到一个巨大的结果，在这种情况下，我们将不得不遍历这些值并将其分配给列表。

```
>>> result
('58',)
>>> result[0]
'58' 
```

当您对大型项目运行查询时，当您使用 curosr.fetchall() 时，您会得到类似这样的输出

```
(('58',),('50',),('10'),) 
```

使用以下代码获取列表格式的数据

```
>>> results=(('58',),('50',),('10'),)
>>>[x[0] for x in results] --> code
   ['58', '50', '1'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T19:19:15.503

`56L`是一个[长整数](http://docs.python.org/2/library/stdtypes.html#numeric-types-int-float-long-complex)。“长整数具有无限精度。” 它们可以像普通整数一样使用。

您可以通过执行以下操作来查看 long 值：

```
for result in results:
    print result[0] 
```

示例 REPL 会话：

```
>>> results = ((56L,),)
>>> for result in results:
...     print(result[0])
...
56 
```

`.fetchall()`[在DB-API](http://www.python.org/dev/peps/pep-0249/)中定义为“作为序列序列（例如元组列表）”返回剩余行。MySQLdb 的默认值是使用一个元组的元组，看起来像这样`(( ,),)`，甚至像这样`( (1,2,3), (4,5,6) )`，其中结果集的各个行是内部元组——因此总是具有相同的长度。

# r - POSIXct 数据的意外输出

> ID：14861165
> 
> 赞同：0
> 
> 时间：2013-02-13T19:12:20.980
> 
> 标签：r, posixct, lubridate

我有这个df：

```
>    fechas <- c("1991-01-01", "1991-01-03", "1991-01-04", "1991-01-05", 
    +             "1991-01-08", "1991-01-09", "1991-01-11", "1991-01-13", "1991-01-15", 
    +             "1991-01-16", "1991-01-20", "1991-01-21", "1991-01-27", "1991-01-29", 
    +             "1991-02-06", "1991-02-07", "1991-02-08", "1991-02-09", "1991-02-10", 
    +             "1991-02-11", "1991-02-12", "1991-02-16")
> index <- c(1:10)
> df <- merge (index,fechas) 
```

我首先使用 lubridate 将“y”因子变量转换为 POSIXct，如下所示：

```
library (lubridate)
df$fecha <- ymd (df$y)
220 parsed with %Y-%m-%d

str(df)
'data.frame':   220 obs. of  3 variables:
 $ x    : int  1 2 3 4 5 6 7 8 9 10 ...
 $ y    : Factor w/ 22 levels "1991-01-01","1991-01-03",..: 1 1 1 1 1 1 1 1 1 1 ...
 $ fecha: POSIXct, format: "1991-01-01" "1991-01-01" "1991-01-01" "1991-01-01" ... 
```

然后我为计算生成参考数据并继续

```
 > start_1991 <- ymd("1991-01-01")
     1 parsed with %Y-%m-%d
    > df$jul <- (df$fecha-start_1991)+1 
```

我得到了一个奇怪的结果，朱利安天数很高

```
 fecha2      jul
    1991-01-03  172801
    1991-01-04  259201
    1991-01-05  345601
    1991-01-08  604801 
```

有些年份运行良好，这是我在不同数据帧中使用的常见程序

任何的想法？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T01:02:01.287

您获得的差异以秒为单位。

```
> head(df, n = 13)
    x          y      fecha         jul
1   1 1991-01-01 1991-01-01      1 secs
2   2 1991-01-01 1991-01-01      1 secs
3   3 1991-01-01 1991-01-01      1 secs
4   4 1991-01-01 1991-01-01      1 secs
5   5 1991-01-01 1991-01-01      1 secs
6   6 1991-01-01 1991-01-01      1 secs
7   7 1991-01-01 1991-01-01      1 secs
8   8 1991-01-01 1991-01-01      1 secs
9   9 1991-01-01 1991-01-01      1 secs
10 10 1991-01-01 1991-01-01      1 secs
11  1 1991-01-03 1991-01-03 172801 secs
12  2 1991-01-03 1991-01-03 172801 secs
13  3 1991-01-03 1991-01-03 172801 secs 
```

# python - scikit-learn 无法加载

> ID：14861169
> 
> 赞同：0
> 
> 时间：2013-02-13T19:12:31.383
> 
> 标签：python, linux, scipy, scikit-learn, atlas

我安装了 scikit-learn 0.13 和`pip install scikit-learn`.

```
from sklearn import svm, metrics 
```

失败了

```
from .classes import SVC, NuSVC, SVR, NuSVR, OneClassSVM, LinearSVC
from ..linear_model.base import LinearClassifierMixin
from .base import LinearRegression
from .cd_fast import sparse_std
ImportError: sklearn/linear_model/cd_fast.so: undefined symbol: ATL_dcopy 
```

NumPy 和 SciPy`test()`在 1.7.0 和 0.11.0 版本中似乎没有问题（通过），从源代码安装。机器上安装了最新的 ATLAS 3.10.1，也来自源代码。

```
$ uname -a
Linux hostname 2.6.32-5-amd64 #1 SMP Sun Sep 23 10:07:46 UTC 2012 x86_64 GNU/Linux

$ python --version
Python 2.6.6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T16:04:28.493

添加atlas lib进行编译可以解决问题。通过在 cblas_libs.append('m') 之前或之后添加一行来编辑文件 sklearn/linear_model/setup.py： cblas_libs.append('atlas')

然后重建并安装 scikit-learn

# php - 图片从 url 大小限制上传

> ID：14861172
> 
> 赞同：0
> 
> 时间：2013-02-13T19:12:36.583
> 
> 标签：php, upload, filesize, image-upload

如何检查从 url 上传的图像是否小于 1MB？目前我使用保存图像并使用 .`file_put_contents()`检查保存图像的大小`filesize()`。有没有办法在使用前检查大小`file_put_contents()`以防止获取太大的文件？

# javascript - 如何为 Twitter Bootstrap 覆盖/撤消 CSS 类属性

> ID：14861175
> 
> 赞同：0
> 
> 时间：2013-02-13T19:12:42.997
> 
> 标签：javascript, jquery, css, twitter-bootstrap

大约一年前，@Andres Ilich 为在 Bootstrap 中居中导航栏提供了一个非常优雅的答案。 [已发布答案的摘录如下：](https://stackoverflow.com/questions/10568103/modify-twitter-bootstrap-navbar)

```
<div class="navbar navbar-fixed-top center">
     <div class="navbar-inner">
        ....
     </div>
</div> 
```

然后你可以像这样定位 .center 类：

```
.center.navbar .nav,
.center.navbar .nav > li {
    float:none;
    display:inline-block;
    *display:inline; /* ie7 fix */
    *zoom:1; /* hasLayout ie7 trigger */
    vertical-align: top;
}

.center .navbar-inner {
    text-align:center;
} 
```

由于这也影响了下拉菜单，他补充说：

```
.center .dropdown-menu {
    text-align: left;
} 
```

这样下拉菜单就会正常运行。

现在我面临着类似的问题。导航栏居中精美。下拉菜单效果很好。但是，当您进入平板电脑和移动视口时，移动菜单也会居中。简单地将文本向左对齐并不能解决问题，因为每个无序列表项都需要自己的行。

我一直在试图找出一种方法，我可以简单地在媒体查询中添加一个可以撤消此操作的类，但我一直无法找到解决方案。

请参阅此 jsFiddle 以了解我在说什么：http: [//jsfiddle.net/persianturtle/rAYyk/2/](http://jsfiddle.net/persianturtle/rAYyk/2/)

**我的问题：** 是否有一种简单的方法（<50 行代码）可以在媒体查询中撤消上述代码，以便此导航菜单将桌面视图居中并在平板电脑和手机上正常显示？

如果这不能用纯 CSS 完成，能否逐步解释 jQuery 解决方案如何工作？由于我有 h5bp，我已经链接了 jQuery 1.9.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:17:46.390

如果您想进行仅影响平板电脑和移动设备视口的 CSS 更改，您可以在 bootstrap-responsive.css 文件中添加您需要的 CSS 覆盖。

这是执行“响应式设计”并对平板电脑和移动视口进行样式化的@media 查询所在的位置。

```
@media (max-width: 979px) { 
    .center .navbar-inner {
        text-align:left !important;
    }
    .center.navbar .nav > li{
        display:block !important;
    }
} 
```

# c# - 无法获取换行符以在 aspx 页面上呈现

> ID：14861176
> 
> 赞同：2
> 
> 时间：2013-02-13T19:12:43.450
> 
> 标签：c#, asp.net, html, .net

我正在共享点 aspx 页面上进行一些服务器端验证。如果有任何错误，我将一个字符串传递给 PreRender 中的 zone.error 文本。

**如何让我的换行符呈现？**

**现在我有：**

```
 protected override void OnPreRender(EventArgs e)
    {
        if (!string.IsNullOrEmpty(_errorText))
        {
            this.Zone.ErrorText += "I'm an error!" + Environment.NewLine + "Fix me damnit!";                
        }
        base.OnPreRender(e);
    } 
```

我尝试了各种组合

> <br />，\r\n，\n，同时使用 htmlEncode 和 htmlDecode 无济于事。

我过去读过一些关于 <pre> 的内容，但我不确定这是否是正确的方法。

这里有什么诀窍？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:17:49.500

您将需要呈现一个`<br/>`标签而不是 Environment.NewLine，它只会将 \n 或 \r\n 放入其中。这不会在 HTML 页面上呈现。

```
protected override void OnPreRender(EventArgs e)
    {
        if (!string.IsNullOrEmpty(_errorText))
        {
            this.Zone.ErrorText += "I'm an error<br/>Fix me damnit!";                
        }
        base.OnPreRender(e);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:19:11.393

尝试使用标签

```
<br> 
```

而不是 Environment.NewLine

# unicode - 呈现 Unicode 替换字符时出现问题

> ID：14861179
> 
> 赞同：0
> 
> 时间：2013-02-13T19:12:53.303
> 
> 标签：unicode, utf-8, character-encoding

我正在尝试显示 Unicode 替换字符，但字体和页面编码的某种组合似乎导致该字符在浏览器中不可见。我可以突出显示浏览器内容并将其复制粘贴到文本编辑器中，然后查看问题框字形，因此字符存在，但浏览器不显示字形。

我正在处理带有`java.nio.charset.CharsetDecoder`对象的文本文件（使用“REPLACE”选项`onUnmappable`），因此它应该处理所有输入，如果有不可映射的输出，我应该看到替换字符（保留为默认值）。

我在标记为 utf-8 的 jsp 中显示此内容，如下所示：

```
<%@ page language="java" pageEncoding="utf-8" contentType="text/html;charset=utf-8" %> 
```

也像这样：

```
meta charset='utf-8' 
```

（头部的第一个元素）

最初，我的页面的CSS 设置为“Courier New”，但在查看[此页面](http://en.wikipedia.org/wiki/Unicode_font)`font-family`后我尝试了各种字体。有些东西使 Unicode 替换字形在呈现的页面中不可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:38:31.700

您是否尝试将其自身的文件格式从编辑器更改为 UTF-8。

# android - 无法从自定义片段对话框中获取输入

> ID：14861183
> 
> 赞同：0
> 
> 时间：2013-02-13T19:13:08.000
> 
> 标签：android

我在我的列表视图活动布局顶部显示用户输入的自定义对话框。但是当我尝试在 onCreateDialog() 方法中引用编辑文本时，它总是空白。以下是我的代码，如果有人能指出我做错的地方，不胜感激 -

```
public class QuestionDialog extends DialogFragment
{

     public Dialog onCreateDialog(Bundle savedInstanceState) 
     {

            AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
          // Get the layout inflater
            LayoutInflater inflater = getActivity().getLayoutInflater();
         // Inflate and set the layout for the dialog
            final View v =inflater.inflate(R.layout.ques_dialog,null);
            builder.setView(inflater.inflate(R.layout.ques_dialog, null))

            .setTitle("Title Message!")  
            .setCancelable(true)
            .setPositiveButton("GO", new DialogInterface.OnClickListener(){
                       public void onClick(DialogInterface dialog, int whichButton)
                        {

                          EditText et1 = (EditText)v.findViewById(R.id.et1);

                      // here not able to get the data from edit text 

                          String s1 = et1.getText().toString().trim();
                          Log.d("debug","data -"+s1+" and length"+s1.length());

                        .... rest code goes here 

                       })
                     .setNegativeButton("Cancel", new DialogInterface.OnClickListener(){
                       public void onClick(DialogInterface dialog, int whichButton)
                        {

                            ..rest code goes here

                         }

                       });              

        return builder.create();

     }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:22:33.147

发生这种情况是因为以下几行：

```
final View v =inflater.inflate(R.layout.ques_dialog,null);
builder.setView(inflater.inflate(R.layout.ques_dialog, null)) 
```

您首先对*v进行膨胀，然后将* **新膨胀的视图**`View`设置为对话框的内容（因此最终您会寻找不是对话框实际内容的视图）。用这个：

 **```
final View v =inflater.inflate(R.layout.ques_dialog,null);
builder.setView(v); 
```**

# c# - 如何在 xna 中为动态生成的地形顶点添加纹理

> ID：14861185
> 
> 赞同：0
> 
> 时间：2013-02-13T19:13:09.937
> 
> 标签：c#, xna, coordinates, textures

我正在尝试将纹理坐标添加到每个顶点，以便将草纹理添加到每个三角形。我的代码将纹理延伸到整个区域，这可以工作但不能很好地放大。如何正确地将 (0,0)、(0,1)、(1,1) 等添加到顶点？目前它们是在 SetUpVertices() 方法中添加的，如果代码可以区分它是左上角、左下角、右下角等，是否应该在 SetUpIndices() 方法中添加它们。任何帮助将不胜感激。相关方法如下，完整的 Game1.cs 代码在这里[http://pastebin.com/REd8QDZA](http://pastebin.com/REd8QDZA)

```
 private void SetUpVertices()
    {
        vertices = new VertexPositionNormalTexture[terrainWidth * terrainHeight];
        for (int x = 0; x < terrainWidth; x++)
        {
            for (int y = 0; y < terrainHeight; y++)
            {
                vertices[x + y * terrainWidth].Position = new Vector3(x, -y, heightData[x, y]);
                vertices[x + y * terrainWidth].TextureCoordinate.X = x / (terrainWidth - 1.0);
                vertices[x + y * terrainWidth].TextureCoordinate.Y = y / (terrainHeight - 1.0);
            }
        }
    }
    private void SetUpIndices()
    {
        indices = new short[(terrainWidth - 1) * (terrainHeight - 1) * 6];
        int counter = 0;
        for (int y = 0; y < terrainHeight - 1; y++)
        {
            for (int x = 0; x < terrainWidth - 1; x++)
            {
                int lowerLeft = x + y * terrainWidth;
                int lowerRight = (x + 1) + y * terrainWidth;
                int topLeft = x + (y + 1) * terrainWidth;
                int topRight = (x + 1) + (y + 1) * terrainWidth;

                indices[counter++] = (short)topLeft;
                indices[counter++] = (short)lowerRight;
                indices[counter++] = (short)lowerLeft;

                indices[counter++] = (short)topLeft;
                indices[counter++] = (short)topRight;
                indices[counter++] = (short)lowerRight;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:29:19.887

只需指定

```
vertices[x + y * terrainWidth].TextureCoordinate.X = x;
vertices[x + y * terrainWidth].TextureCoordinate.Y = y; 
```

默认情况下，大于 1 的纹理坐标将被包裹并重复纹理。

# python - 将下载的文件存储在内存中

> ID：14861191
> 
> 赞同：0
> 
> 时间：2013-02-13T19:13:30.890
> 
> 标签：python, multiprocessing, urllib2

我正在尝试从两个网站下载多个图像文件，并且正在使用多处理模块进行，希望缩短所需时间（同步大约需要五分钟）。这是在单独进程中执行的代码：

```
def _get_image(self):
        if not os.path.isdir(self.file_path + self.folder):
            os.makedirs(self.file_path + self.folder)

        rand = Random()
        rand_num = rand.randint(0, sys.maxint)
        self.url += str(rand_num)
        opener = urllib.FancyURLopener()
        opener.retrieve(self.url, self.file_path + self.folder + '/' + str(rand_num) + '.jpg') 
```

上面的代码在单独的进程中执行并且工作正常，但我希望它不要在下载每个文件后立即保存，而是在进程执行结束时保存。下载后，我希望将它们存储在某个内部列表或字典中……遗憾的是，FancyURLopener 不允许将文件存储在内存中，并坚持在下载后立即将它们写入磁盘。有没有像 FancyURLopener 这样的工具，但没有磁盘写入功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:01:27.777

[`URLopener.open()`](http://docs.python.org/2.7/library/urllib.html#urllib.URLopener.open)返回类似文件。您可以`read()`将数据作为字节字符串检索，然后将其存储在您想要的任何位置。

为什么你首先需要一个`URLopener`？简单的怎么样[`urllib2.urlopen()`](http://docs.python.org/2.7/library/urllib2.html#urllib2.urlopen)？

# python - PIL python，许可证和分发

> ID：14861194
> 
> 赞同：2
> 
> 时间：2013-02-13T19:13:38.130
> 
> 标签：python, licensing, python-imaging-library

早上好，我用 PIL python 创建了一个用于照片修饰的小软件。通过 py2exe，我从我的 .py 文件创建了一个 exe 版本。在我的 dist 和 build 文件夹中，我可以找到 PIL 模块 pyc 以及允许我的程序在没有 python 的每台计算机上工作的每个文件。现在我将通过我的网站分发这个程序免费软件（只有 .exe 而不是源代码） . 我在 PIL 软件许可证上阅读了这个

**特此授予出于任何目的免费使用、复制、修改和分发本软件及其相关文档的许可，前提是上述版权声明出现在所有副本中，并且该版权声明和本许可声明均出现在支持文档，并且未经事先明确的书面许可，不得在与软件分发有关的广告或宣传中使用 Secret Labs AB 或作者的名称。**

如果我的发行版和 py2exe 创建的构建文件夹中只有 .pyc 文件，我该如何维护版权声明？

一天之内，我的网站会有很多访问量，也许我会把 ADsense Google 放到微乎其微的利润，有没有违反 PIL 许可的情况？关于许可证，分发我很困惑......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:39:59.667

只要您将通知放在程序的文档中，您就可以自由地分发您的程序。

关于许可证中的广告，仅涉及您自己的程序的广告。这意味着您不得在程序的下载页面上使用 Secret Labs AB 的名称，或者如果您购买广告空间来分发程序，则不得在广告上使用名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:41:39.240

添加到 ssidorenko 答案：如果您真的想确保在打包的可执行文件中包含版权声明，可以将其作为“文档字符串”添加到源代码中，然后它也应该包含在生成`*.pyc`的文件中。（我看到`py2exe`可以在设置时配置以生成优化`*.pyo`文件 - 在这种情况下，不要`-OO`在运行时使用`python setup.py py2exe`，因为它会从生成的`*.pyo`文件中删除文档字符串。）您可以在文档字符串中明确说明这是 PIL 的通知例如，说“此软件包含带有以下版权声明的 PIL：...”

# node.js - nodejs'永远'只是什么都不做

> ID：14861197
> 
> 赞同：13
> 
> 时间：2013-02-13T19:14:00.703
> 
> 标签：node.js, amazon-ec2, forever

我正在尝试在 Amazon EC2 实例上永远使用我的 nodejs 应用程序。我安装了 nodejs npm，然后运行`sudo npm install forever -g`​​.
安装没有返回任何错误，所以我继续尝试使用 运行我的应用程序`forever start server.js`，但它不会做任何事情 - 没有任何输出，甚至没有错误。
我也试过`forever --help`了，只是`forever`，但他们都没有给我任何回应......

使用 nodejs 定期运行我的应用程序时 -`nodejs init.js`它按预期工作，但我需要让它运行，`forever`这样当我与服务器断开连接时它不会关闭。

**编辑：**
由于我遇到的唯一问题是当我关闭与我的 EC2 服务器的终端会话时 nodejs 正在关闭，我通过使用这样的 linux`nohup`命令解决了这个问题：
`nohup sudo nodejs server.js &`
即使在我关闭终端后，这也让 nodejs 在子进程中运行窗户。

不过感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-09-09T19:29:46.573

我也没有收到任何命令的任何`stdout`输入`forever`，这个修复解决了它：

```
sudo ln -s /usr/bin/nodejs /usr/local/bin/node 
```

希望对某人有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T19:24:49.603

你不应该只`forever start server.js`使用`forever server.js`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T19:24:30.087

我不知道这是否会有所帮助，但作为替代方案，您可以使用`upstart`. 创建一个这样的脚本：

```
#this is the upstart service task. move it to /etc/init/nodeapp.conf

description "server for Node App"
author "Neels Grobler"

chdir /root/servers/nodeapp
exec node init.js 1>stdout.log 2>stderr.log
respawn 
```

并通过键入运行它`start nodeapp`。停止输入`stop nodeapp`。您还可以更改脚本，以便节点应用程序在系统启动等时启动。更多信息请访问[upstart.ubuntu.com](http://upstart.ubuntu.com)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T22:10:25.840

几个猜测。

*   如果您使用 安装`sudo npm install forever -g`，您可能需要`sudo`永远运行。
*   当你永远运行时，放置一个完整的 server.js 路径，例如`forever start /home/you/source/server.js`或`sudo forever start /home/you/source/server.js`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-25T08:57:58.500

在 Windows 上，当你永远运行时：

```
forever start app.js 
```

您可以在文件系统中找到生成的日志文件：

```
C:\Users\USERNAME\.forever\SomeLogFileHere.txt 
```

为每个正在运行的脚本重新生成日志文件，每个文件都有唯一的标识符。您始终可以通过以下方式检查哪个文件属于哪个进程：

```
forever list 
```

# java - 在java中搜索大量文件中的内容

> ID：14861198
> 
> 赞同：1
> 
> 时间：2013-02-13T19:14:02.053
> 
> 标签：java, io, readfile

我们正在我们的应用程序中构建搜索功能，以遍历超过 100,000 个 xml 文件的内容。数据内容以大量 xml 文件的形式存在。

**保留大量 xml 文件并在搜索时（如按名称等）遍历每个文件以获取结果是一个好主意吗？**它可能会降低我们的应用程序搜索性能。

或者最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:19:42.107

你想要[弹性搜索](http://www.elasticsearch.org/)在这里。它会给你你所需要的。

# windows-8 - DirectX 11.1 禁用深度缓冲区

> ID：14861204
> 
> 赞同：1
> 
> 时间：2013-02-13T19:14:32.700
> 
> 标签：windows-8, directx-11, c++-cx

这个问题与我[之前提出](https://stackoverflow.com/questions/14859018/windows-8-store-app-directx-11-1-enabling-blendstate-with-loaded-png-texture-wit)的问题有关。

我正在渲染的平面方形网格上有一系列 48 个纹理，它们都组合在一起形成一个“场景”。它们每个都有很大比例的透明度和一两个较小的图像，当它们排成一行时，我应该能够看到完整的场景。我希望这不会有太大问题，但是当我去测试它时，我看到最上面的纹理，然后在任何有透明度的地方，它只是清晰的颜色。

起初，我认为这是我如何加载图像的问题，并且以某种方式禁用了 alpha，但在尝试了清晰的颜色之后，我意识到有一些透明度。

其次，我尝试启用混合 - 如果所有纹理都在单个 z 平面上组合，则此方法有效。

我已经在上面链接到的问题上发布了我的图像加载和混合代码。

现在我开始认为这可能是深度缓冲区的问题，所以我将以下代码添加到我的窗口相关资源中：

```
Microsoft::WRL::ComPtr<ID3D11DepthStencilState> DepthDefault;

D3D11_DEPTH_STENCIL_DESC depthstencilDesc;
ZeroMemory(&depthstencilDesc, sizeof(depthstencilDesc));
depthstencilDesc.DepthEnable = FALSE;
depthstencilDesc.DepthWriteMask = D3D11_DEPTH_WRITE_MASK_ALL;
depthstencilDesc.DepthFunc = D3D11_COMPARISON_ALWAYS;
depthstencilDesc.StencilEnable = FALSE;

depthstencilDesc.BackFace.StencilDepthFailOp = D3D11_STENCIL_OP_KEEP;
depthstencilDesc.BackFace.StencilFailOp = D3D11_STENCIL_OP_KEEP;
depthstencilDesc.BackFace.StencilFunc = D3D11_COMPARISON_ALWAYS;
depthstencilDesc.BackFace.StencilPassOp = D3D11_STENCIL_OP_KEEP;

depthstencilDesc.FrontFace.StencilDepthFailOp = D3D11_STENCIL_OP_KEEP;
depthstencilDesc.FrontFace.StencilFailOp = D3D11_STENCIL_OP_KEEP;
depthstencilDesc.FrontFace.StencilFunc = D3D11_COMPARISON_ALWAYS;
depthstencilDesc.FrontFace.StencilPassOp = D3D11_STENCIL_OP_KEEP;

DX::ThrowIfFailed( direct3d.device->CreateDepthStencilState(&depthstencilDesc, DepthDefault.GetAddressOf() ) );

direct3d.context->OMSetDepthStencilState(DepthDefault.Get(), 0); 
```

即使使用此代码，我也只能看到最顶层。我错过了什么，还是我设置不正确？

**编辑：**为了可视化问题，就好像我有 48 块相同大小的玻璃窗格，它们都排成一排。每块玻璃上的某处都有一个图像。当您查看所有玻璃窗格时，您会得到一张由所有较小图像组合而成的超棒图像。对我来说，directx 或像素着色器仅绘制第一个玻璃窗格并用透明/背景颜色填充第一个窗格的所有透明度。

**编辑：**我用来创建 depthstencilview 的代码：

```
CD3D11_TEXTURE2D_DESC depthStencilDesc( DXGI_FORMAT_D24_UNORM_S8_UINT, backBufferDesc.Width, backBufferDesc.Height, 1, 1, D3D11_BIND_DEPTH_STENCIL );

ComPtr<ID3D11Texture2D> depthStencil;
DX::ThrowIfFailed( direct3d.device->CreateTexture2D( &depthStencilDesc, nullptr, &depthStencil ) );

auto viewDesc = CD3D11_DEPTH_STENCIL_VIEW_DESC(D3D11_DSV_DIMENSION_TEXTURE2D);

DX::ThrowIfFailed( direct3d.device->CreateDepthStencilView( depthStencil.Get(), &viewDesc, &direct3d.depthStencil ) ); 
```

该代码实际上就在我的深度测试/ D3D11_DEPTH_STENCIL_DESC 代码之上。我假设这会创建深度代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T23:39:12.950

我认为如果要使用深度缓冲区渲染半透明度，您可能需要对渲染顶点的顺序进行排序。如果您不想使用深度缓冲区 - 也许只是不定义/创建/设置它？

# c++ - Python 和 SWIG：使用 StringIO 代替 FILE*

> ID：14861205
> 
> 赞同：1
> 
> 时间：2013-02-13T19:14:33.490
> 
> 标签：c++, python, swig

我有以下方法，我使用 SWIG 包装以在 Python 中访问它：

```
void some_class::some_method( FILE *fp, int *pT, int **pO ) {
    fscanf( fp, "lalala", pT ); 
```

如何为第一个参数传递 StringIO ？我应该使用什么类型图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:40:18.343

简单的解决方案是构建一个类型映射，用于`fmemopen`自动`FILE*`为您创建一个。我创建了一个示例：

```
%module test
%include <typemaps.i>

%typemap(in) FILE *sb (PyObject *str=NULL) {
  str = PyObject_CallMethod($input, "getvalue", NULL);
  char *buf = NULL;
  int len = 0;
  PyString_AsStringAndSize(str, &buf, &len);
  $1 = fmemopen(buf, len, "r");
}

%typemap(freearg) FILE *sb {
  if ($1) fclose($1);
  Py_XDECREF(str$argnum);
}

%apply int *OUTPUT { int * i };

%inline %{
  void foo(FILE *sb, int *i) {
    fscanf(sb, "%d", i);
  }
%} 
```

这有两个部分，首先有一些 python C API 可以调用`getvalue`，`StringIO`以便访问它保存的数据。这个缓冲区需要至少和 一样长`FILE*`，所以我们必须引入一个额外的变量并在完成后清理它。

我也曾经`%apply`自动将`int *i`其视为输出而不是输入。这可能足以做你想做的事情。

这足以让我运行以下测试程序：

```
import StringIO
import test

buf=StringIO.StringIO("666")
print test.foo(buf) 
```

如果你想让接口更通用，我建议插入一个调用来[`PyFile_AsFile`](http://docs.python.org/2/c-api/file.html)处理 Python File 对象，这些对象实际上是文件，而不仅仅是 StringIO 对象。您可以检查返回值以尝试使用您给出的参数作为许多不同的可行类型的输入。

这很令人费解。更好的解决方案是[`cStringIO`](http://docs.python.org/2/library/stringio.html#module-cStringIO)改用它，它为您提供直接的 C API，完全避免调用`getvalue`。如果您使用的是 glibc，那么您可以使用将 a直接[`fopencookie`](https://www.kernel.org/doc/man-pages/online/pages/man3/fopencookie.3.html)挂接到对象以实现零拷贝。`FILE*``cStringIO`

# css - Office Outlook Web Access 在我们的电子邮件中注入了不需要的 CSS。是什么触发了这种情况以及如何解决？

> ID：14861211
> 
> 赞同：0
> 
> 时间：2013-02-13T19:15:02.607
> 
> 标签：css, outlook, html-email, outlook-web-app, web-access

注入的样式会导致所有文本都带有下划线。它不会在源自 Outlook 的邮件中注入样式，也不会在所有 HTML 格式的邮件中注入样式。

我们的 HTML 模板在所有客户端中正确显示，包括 Outlook 本地客户端和 Hotmail，据称它使用与 Outlook WebAccess 部署的类似的 HTML 电子邮件预处理 ( [http://litmus.com/help/email-clients/rendering-engines](http://litmus.com/help/email-clients/rendering-engines) )

我想知道究竟是什么问题触发了这种行为。有没有办法通过修改我的 HTML 电子邮件来防止注入？这是它注入的 CSS：

编辑：我只是注意到它适用于除 IE 之外的所有浏览器。

```
<style type="text/css">
<!--
.x_preheaderContent 
  {color:#606060!important;
  font-weight:normal!important;
  text-decoration:underline!important}
.x_headerContent 
  {color:#EB4102!important;
  font-weight:normal!important;
  text-decoration:underline!important}
.x_bodyContent 
  {color:#0000cc!important;
  font-weight:normal!important;
  text-decoration:underline!important}
.x_footerContent 
  {color:#000099!important;
  font-weight:normal!important;
  text-decoration:underline!important}
-->
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:42:09.700

在我看来，代码是对 Outlook 对风格的理解及其应用方式的一种解释。您很可能通过查看 Outlook 中的 html 电子邮件的源代码获取了上述代码。如果您查看您的 html 代码，然后设置或覆盖文本下划线属性应该和其他任何东西一样平滑。我从来没有遇到过这个属性的问题。

# php - 有哪些可靠的方法来识别可疑登录？

> ID：14861213
> 
> 赞同：11
> 
> 时间：2013-02-13T19:15:09.610
> 
> 标签：php, javascript, web-applications, ip

我有兴趣在我的 Web 应用程序上实现一项功能，该功能可以在用户上次访问后发生可疑登录时发出警告。

我的下意识反应是使用客户端的 IP 地址，但经过我的研究，这似乎是一个糟糕的主意。动态分配和 NAT 表明这是不可靠的。

我的第二个想法是使用地理定位服务。但我能找到的要么是基于 IP 的，要么是超出我的价格范围的。

我的第三个想法是实现类似 Facebook 的“注册此设备”提示，但我不确定这是如何以可靠的方式工作的。

有人对我如何以合理的置信度识别设备或位置有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-13T19:24:27.247

这取决于您的业务规则。您可以根据几个因素对其进行评分。

1.  不同IP：+5
2.  不同子网：+10
3.  不同国家：+100
4.  成功前 3 次或更多尝试：+50
5.  2个或更多同时登录：+50
6.  与上次不同的浏览器：+5

等等

然后你可以设置规则说：

1.  0-20：告诉用户下次登录成功。
2.  21-50：开始让他们在两次登录之间等待 5 分钟。
3.  51-100：锁定帐户并通过电子邮件确认强制他们解锁。

我总是会像 gmail 一样向他们显示登录的最后日期和 IP。Gmail 还具有您可以查看的登录历史记录。

编辑：这是一个非常古老的答案，仍然有一些观点。今天我可能会推荐一个 2FA 解决方案。[什么是双重身份验证？](https://stackoverflow.com/questions/559639/what-is-two-factor-authentication)

# algorithm - 对科门书中弗洛伊德·沃歇尔（Floyd Warshall）的例子感到困惑

> ID：14861215
> 
> 赞同：0
> 
> 时间：2013-02-13T19:15:15.937
> 
> 标签：algorithm, clrs, floyd-warshall

我已经阅读并搜索了 Floyd Warshall 算法，我想我理解它。但是在我在“算法简介（Thomas H. Cormen 的书）”一书中读到的示例中，我堆叠在一个点上。我很困惑。这是书中相同的图片。我的问题在最后一步，即 π(5)。这是示例：http: ![在此处输入图像描述](../Images/3b47b80d319732458bce218fc55750e2.png) [//integrator-crimea.com/images/fig653_01_0.jpg](http://integrator-crimea.com/images/fig653_01_0.jpg)

```
 I think the first row of π(5) must be : 

 NIL  5   5   5   1      

 However it is written in the book :

 NIL  3   4   5   1 
```

有人可以解决我上面的困惑吗？书上写错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T11:27:32.097

让我们写成`D_4(1,3)`距离矩阵 D(4) 中的第 1 行第 3 列。

如果`D_5(1,2)=1`被解释`by Pi_5(1,2)=3`（即从 1 到 2 的最短路径经过 3），我们希望`D_5(1,2) = D_4(1,3) + D_4(3,2)`. 然而，`D_5(1,2) = 1 but D_4(1,3) + D_4(3,2) = -1 + 4 = 3`. 所以`Pi_5(1,2)=3`是不正确的。

您的替代值`Pi_5(1,2)=5 is`正确，因为`1 = D_5(1,2) = D_4(1,5) + D_4(5,2) = -4 + 5`.

所以你说 Pi(5) 的第一行中的第二个值应该是 5，而不是 3 是正确的。我没有检查其他值，但我认为你对这些值也是正确的。

# grails - findBy 多个属性 (findAllWhere)

> ID：14861218
> 
> 赞同：2
> 
> 时间：2013-02-13T19:15:19.823
> 
> 标签：grails, multiple-columns, findby

我有一个对象，我必须从中过滤某些属性，其中一些属性也可能是“null”。我有一个 Filter 对象和一个 Product 对象。

在 Filter 对象中，我有一些反映 Product 对象的属性，可以填写或留空。这里是关于类的简短视图。

```
Product: String name, Boolean isEmpty, ...., belongsTo [Producer, Distributor]...

Filter: Boolean isEmpty, ... belongsTo [Producer, Distributor]... 
```

使用此过滤器，我可以搜索具有特定属性（空、生产者、分销商）的所有产品。

我有一个导出功能，我可以在其中选择过滤器，并根据产品的选择输出信息。

由于所有这些属性都可以为空，但也包含一个值，我首先想到构造一个自己的搜索查询（组合字符串等）来构造一个 SQL 字符串，然后使用 Product.findAll(string_query, string_params)。但是由于这很乏味，我现在将其更改为这样的：

```
if(filter.producer)
    prods = Product.findAllWhere(producer:filter.producer)
if(filter.distributor)
    prods =  prods.findAll {it.distributor == filter.distributor}
if(filter.isEmpty!=null) //as it could be NULL but also false/true
    prods =  prods.findAll {it.isEmpty == filter.isEmpty} 
```

但是，如果我要过滤 10-15 个属性，这将成为一项更大的任务。我对 Grails 或 Groovy 不是很有经验，但我想这可以更容易解决，对吧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T20:18:10.167

我相信您会发现 Grails Criteria 查询是完成此类任务的一种非常好的方法。看：

*   [http://grails.org/doc/latest/guide/single.html#criteria](http://grails.org/doc/latest/guide/single.html#criteria)
*   [http://viaboxxsystems.de/the-grails-hibernatecriteriabuilder](http://viaboxxsystems.de/the-grails-hibernatecriteriabuilder)

当表示为条件查询时，您的示例可能看起来像这样：

```
def prods = Product.createCriteria().list {
    if(filter.producer) eq("producer", filter.producer)
    if(filter.distributor)  eq("distributor", filter.distributor)
    if(filter.isEmpty != null) eq("isEmpty", filter.isEmpty)
} 
```

# cordova - 谷歌地图上带有图标\标签的地理 uri

> ID：14861225
> 
> 赞同：2
> 
> 时间：2013-02-13T19:15:51.313
> 
> 标签：cordova, geo, google-maps-mobile

我在我的phonegap应用程序中通过geo uri指的是谷歌地图移动应用程序：

`mapString = "geo:"+data.lat + "," + data.lng+"?saddr=("+data.lat+ "," + data.lng+")&daddr=&z=18";`

地图可以缩放并在正确的位置打开，但我还想在该点上添加谷歌应用标签 \ 图标。

我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:18:28.673

```
geo:?q=lat,lon (label) 
```

虽然不知道图标。

# serialization - boost::序列化段错误

> ID：14861234
> 
> 赞同：0
> 
> 时间：2013-02-13T19:16:26.483
> 
> 标签：serialization, boost

对于 boost::serialize 我正在尝试使用自己的序列化函数定义一个自定义类，类似于[http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/tutorial.html#simplecase](http://www.boost.org/doc/libs/1_53_0/libs/serialization/doc/tutorial.html#simplecase)但是，该程序只是段错误。为什么？

```
class Test {
        public:
        unsigned short testid;

        template<class Archive>
        void serialize(Archive & ar, const unsigned int version)
        {
                ar & testid;
        }

};

int main() {
        Test mytest = {100};
        std::ofstream ofsx("test.tmp");
        boost::archive::binary_oarchive oax(ofsx);
        oax << mytest;
        cout << "Exported";
        exit(1);
} 
```

我还尝试了非侵入式版本，结果相同。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:59:17.770

该问题是由链接过时的库引起的。

# ajax - 将 Ajax POST 变量传递给 JQuery UI 对话框

> ID：14861236
> 
> 赞同：1
> 
> 时间：2013-02-13T19:16:34.243
> 
> 标签：ajax, jquery, jquery-ui-dialog

下面是`POST`我用来向 ASP MVC3 视图返回一些信息的 Ajax 变量。但是，我无法使`.dialg()`弹出功能正常工作。现在您单击调用的图标，`GetProgramDetails(pgmname)`没有任何反应。第一次使用 Ajax，所以任何建议都将不胜感激。谢谢！

```
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript"></script>

<script type="text/javascript">
    function GetProgramDetails(pgmname) {

        var request = $.ajax({
            type: 'POST',
            url: '/BatchPrograms/PopDetails',
            data: { programName: pgmname },
            dataType: 'html'
        });

        request.done(function (data) {
            $('#data').dialog();
        });
</script> 
```

编辑

我已经更新了`request.done`函数以包含一个简单`alert`的代码来查看代码是否被调用。用 Chrome 的调试器单步调试后，我看到里面的代码被完全跳过了。

```
 request.done(function (data) {
    alert("HERE!");
        $('#programExplanation').html(data);
    }); 
```

第二次编辑

这是 ajax 从中返回值的控制器代码：

```
 [HttpPost]
    public string PopDetails(string programName)
    {
        BatchPrograms batchprograms = db.BatchPrograms.Find(programName);
        if (batchprograms == null) return string.Empty;
        StringBuilder s = new StringBuilder();
        s.Append(batchprograms.ProgramName + " - " + batchprograms.ShortDescription);
        s.Append("<br />Job Names: " + batchprograms.PrdJobName + ", " + batchprograms.QuaJobName );
        s.Append("<br /> " + batchprograms.Description);
        return s.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:35:01.060

您需要使用 success 方法来处理回调，如下所示：

```
var request = $.ajax({
        type: 'POST',
        url: '/BatchPrograms/PopDetails',
        data: { programName: pgmname },
        dataType: 'html'
    }).success(function(data){ $('#data').dialog()} ); 
```

这将为您启动对话框，但如果您想获取响应数据以使用它，您可以让 GetProgramDetails 获取第二个参数，该参数是数据加载后的回调，如下所示：

```
function GetProgramDetails(pgmname, callback) {

    var request = $.ajax({
        type: 'POST',
        url: '/BatchPrograms/PopDetails',
        data: { programName: pgmname },
        dataType: 'html'
    }).success(callback);
} 
```

这样，在收到响应后，您可以在回调的实现中处理如何处理数据，在这种情况下，您似乎将在对话框中设置数据并启动对话框。

# database - Heroku 上的数据库分片

> ID：14861237
> 
> 赞同：11
> 
> 时间：2013-02-13T19:16:40.633
> 
> 标签：database, heroku, partitioning, sharding, heroku-postgres

在接下来的几个月里，我们的应用程序将达到我们需要对数据库进行分片的大小。我们使用 Heroku 来托管 Node.js/PostgreSQL 堆栈。

从概念上讲，我们的应用程序让每个逻辑分片代表一个用户以及与该用户关联的所有数据（我们应用程序的每个用户生成大量数据，并且用户之间没有交互）是有意义的。我们需要保留用户对他们的数据进行复杂的即席查询的能力。我读过很多文章，比如这篇关于分片的文章：[http ://www.craigkerstiens.com/2012/11/30/sharding-your-database/](http://www.craigkerstiens.com/2012/11/30/sharding-your-database/)

从概念上讲，我了解分片是如何工作的。但是在实践中，我不知道如何在 Heroku 上实现这一点，就我需要编写的代码以及我需要修改应用程序的哪些部分而言。一个教程或一些指针的链接将不胜感激。

以下是我已经看过的一些资源：

*   [http://www.craigkerstiens.com/2012/11/30/sharding-your-database/](http://www.craigkerstiens.com/2012/11/30/sharding-your-database/)
*   [MySQL分片方法？](https://stackoverflow.com/questions/5541421/mysql-sharding-approaches)
*   [Heroku 负责多个数据库服务器？](https://stackoverflow.com/questions/3534773/heroku-takes-care-of-multiple-database-servers)
*   [http://petrohi.me/post/30848036722/scaling-out-postgres-partitioning](http://petrohi.me/post/30848036722/scaling-out-postgres-partitioning)
*   [http://adam.heroku.com/past/2009/7/6/sql_databases_dont_scale/](http://adam.heroku.com/past/2009/7/6/sql_databases_dont_scale/)
*   [https://devcenter.heroku.com/articles/heroku-postgres-follower-databases](https://devcenter.heroku.com/articles/heroku-postgres-follower-databases)
*   [当 AWS 存在时，为什么人们会使用 Heroku？Heroku 与 AWS 的区别是什么？](https://stackoverflow.com/questions/9802259/why-do-people-use-heroku-when-aws-is-present-whats-distinguishing-about-heroku)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-17T14:05:08.480

作为第一篇文章的作者，很高兴进一步补充。当涉及到分片时，非常关键的组件之一就是您要分片的关键是什么。当您拥有混合在不同物理节点上的数据时，分片的复杂性就真正发挥了作用。如果您是一个多租户应用程序，那么围绕租户或客户的想法对您的所有数据进行建模[可以非常适合此设置](https://www.citusdata.com/blog/2016/10/03/designing-your-saas-database-for-high-scalability)。在这种情况下，您将希望分解与客户相关的所有表，并以与其他租户相关表相同的方式对它们进行分片。

至于在 Heroku 上执行此操作，有两种选择。您可以使用 Heroku Postgres 和应用程序逻辑自行开发，或者使用 Citus 之类的工具（这是一个可以帮助您管理更多内容的附加组件。

为了滚动您自己，您将首先创建各种应用程序逻辑来处理创建所有分片并知道将适当的查询路由到哪里。对于 Rails，有一些 gem 可以帮助解决这个问题，例如[activerecord-multi-tenant](https://github.com/citusdata/activerecord-multi-tenant)或[apartment](https://github.com/influitive/apartment)。当谈到实际转向分片和迁移时，您要做的是创建一个 Heroku 追随者来开始。在迁移期间，您将开始取消关注。然后，您将从原始主节点中删除一半数据，并从您相应分离的跟随者中删除另一半数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T14:22:09.677

我不确定我会称之为“分片”。

在 LedgerSMB 中，这是我们做事的方式。每个公司（业务实体）都是一个具有完全独立数据的独立数据库。数据不能在公司之间共享。一个 postgreSQL 集群可以运行任意数量的公司数据库。我们有一个创建数据库和加载模式的管理界面。管理界面还可以创建新用户，可以在公司之间共享（可选）。我不太清楚在 Heroku 上的 dbs 之间共享用户的效果如何，但我包括了关于我们如何使用 PostgreSQL 的详细信息。

所以这是一个可行的方法。

您真正需要的是以自动化方式启动数据库和管理用户的东西。从那里您可以要求用户指定一个公司名称，您可以根据需要映射到数据库（例如，此映射可以存储在另一个数据库中）。

我知道这是相当高的水平。但是，它应该可以帮助您入门。

# string - 编写显示模板时如何从模型中获取属性

> ID：14861238
> 
> 赞同：1
> 
> 时间：2013-02-13T19:16:43.057
> 
> 标签：string, asp.net-mvc-4, display-templates

我有一个模型...

```
public class PatientACOModel
{
    public int EncounterId { get; set; }
    public int PatientId { get; set; }
    public int EMPIID { get; set; }
    public int PopulationPatientID { get; set; }
    public string EditAddOrEditCurrent { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public DateTime? DateOfBirth { get; set; }
    //[UIHint("_PhoneNumFormatter")]
    public string Phone { get; set; }
 } 
```

我想专门格式化我的电话号码。我只想在我的电话号码和可能的其他电话号码上放置一个 UIHint。我不希望所有字符串都被格式化。

我正在尝试这样的事情......

```
@Model String
@if (Model != null) {
    String.Format("{0: (###) ###-####}", double.Parse(Model.ModelMetadata.Get));
} 
```

那将是我的 UIHint 中引用的显示模板被注释掉了。当我这样做时，我的字符串都没有出现。我究竟做错了什么？

在我的显示模板中，如何获取要解析的字符串然后格式化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:51:27.953

首先，我将检查是否`_PhoneNumFormatter`在以下位置之一定义：

```
~/Views/Shared/DisplayTemplates/_PhoneNumFormatter.cshtml
~/Views/<Controller>/DisplayTemplates/_PhoneNumFormatter.cshtml 
```

接下来我想你想直接从`Model`属性格式化字符串值：

```
@model String

@if (!String.IsNullOrWhiteSpace(Model)) 
{
    @String.Format("{0: (###) ###-####}", Convert.ToInt64(Model))
} 
```

这应该适用于该`UIHint`属性，我刚刚签入了一个示例应用程序。

代码假定您所在地区的数字不以前导 0 开头，并且该`Model`属性将包含仅包含数字字符的字符串，如果不是，您应该改进该`Convert.ToInt64`部分。

希望能帮助到你。

# php - 在php中每5分钟重复一次循环

> ID：14861239
> 
> 赞同：-5
> 
> 时间：2013-02-13T19:16:45.353
> 
> 标签：php

如何在 PHP 中每 15 分钟重复一次循环。我是 PHP 编码的新手，请给我一些教程或代码。请各位。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:52:09.327

### 如前所述，您真正需要的是：

1.  构建您的**PHP脚本，它可以在****不循环**的情况下执行您需要的所有逻辑（例如：获取 DB 数据和编码 JSON）
2.  配置一个[cron](http://en.wikipedia.org/wiki/Cron)作业，它将每**X次运行****PHP**脚本。

 **### 例子：

*   example.php -*这将是您所有的数据库获取和编码逻辑*
*   /etc/crontab -*此文件的位置取决于您的操作系统*。

`crontab -e`在 linux shell 中写入
将此行添加到 crontab 文件的末尾：
`*/15 * * * * /path/to/your/php/file`
并保存

**现在，您的PHP**文件应该每 15 分钟运行一次并执行您希望它执行的操作。

PS 如果你看到你的**PHP**脚本不是每 15 分钟运行一次，你需要验证 crond 服务是否正在运行：`service crond status`在 linux shell**

# java - Maven 2 - 从传递依赖版本定义依赖版本

> ID：14861242
> 
> 赞同：5
> 
> 时间：2013-02-13T19:16:48.893
> 
> 标签：java, maven, maven-2, dependency-management

我会用我的实际情况来解释这个问题。

我使用 logback 1.0.1 进行日志记录，它包含 SLF4J 1.6.4 作为依赖项。我还将 SLF4J API 桥用于遗留日志 API（java.util.logging、log4j 和 commons-logging），它们不是显式依赖项。这些也必须（最好）是 1.6.4 版本。

为了使我的 pom.xml 尽可能整洁和无错误，我想强制这些 API 桥与 SLF4J 的版本相同。我知道的唯一方法是使用 1.6.4 版在我的 pom.xml 中手动将它们定义为依赖项。如果我更新了 logback 并提出了所需的 SLF4J 版本，我需要记住将桥接 API 更改为正确的版本。

我可以以某种方式将旧 API 的版本与传递依赖项 SLF4J 的版本挂钩吗？

当前 pom.xml：

```
 <properties>
    <org.slf4j.version>1.6.4</org.slf4j.version>
</properties>

<dependencies>
    <dependency>
        <groupId>ch.qos.logback</groupId>
        <artifactId>logback-classic</artifactId>
        <version>1.0.1</version>
        <!-- requires SLF4J 1.6.4 -->
    </dependency>
    <!-- ... -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>log4j-over-slf4j</artifactId>
        <version>${org.slf4j.version}</version>
        <!-- here, how to bind this version value to SLF4J's version? -->
        <scope>runtime</scope>
    </dependency>
    <!-- the other two bridge API's go here -->
</dependencies> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:45:24.727

不是很漂亮：/

有 maven 强制插件：[http ://maven.apache.org/enforcer/enforcer-rules/](http://maven.apache.org/enforcer/enforcer-rules/)

所以你可以禁止传递依赖并包含你想要的版本：[http ://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html](http://maven.apache.org/enforcer/enforcer-rules/bannedDependencies.html)

如果您使用好版本的属性，则无需在实施器插件版本中搞乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-19T21:52:10.077

[依赖收敛](http://maven.apache.org/enforcer/enforcer-rules/dependencyConvergence.html)可能会对您有所帮助。谢谢@wemu！

我有[同样的吗？问题](https://stackoverflow.com/q/33813496/330457)。

你可以克隆[https://gist.github.com/f35db1ac6dc8b6f45393.git](https://gist.github.com/f35db1ac6dc8b6f45393.git)

```
<dependencies>
  <dependency>
    <groupId>ch.qos.logback</groupId>
    <artifactId>logback-classic</artifactId>
    <version>1.1.3</version>
    <scope>runtime</scope> <!-- depends on slf4j-api:1.7.7 -->
  </dependency>
  <dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>log4j-over-slf4j</artifactId>
    <version>${unified.slf4j-api.version}</version>
    <scope>runtime</scope>
  </dependency>
  <dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>slf4j-api</artifactId>
    <version>${unified.slf4j-api.version}</version>
  </dependency>
</dependencies>
<properties>
  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  <unified.slf4j-api.version>1.7.7</unified.slf4j-api.version>
</properties>
<build>
  <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
       <artifactId>maven-enforcer-plugin</artifactId>
       <version>1.4.1</version>
       <executions>
         <execution>
           <id>enforce</id>
           <configuration>
             <rules>
               <dependencyConvergence/>
             </rules>
           </configuration>
           <goals>
             <goal>enforce</goal>
           </goals>
         </execution>
       </executions>
     </plugin>
  </plugins>
</build> 
```

在这一点上，一切正常。

```
$ mvn -Dverbose=true dependency:tree verify
...
[INFO] test:enforcer-dependency-convergence-test:jar:0.1-SNAPSHOT
[INFO] +- ch.qos.logback:logback-classic:jar:1.1.3:runtime
[INFO] |  +- ch.qos.logback:logback-core:jar:1.1.3:runtime
[INFO] |  \- (org.slf4j:slf4j-api:jar:1.7.7:runtime - omitted for duplicate)
[INFO] +- org.slf4j:log4j-over-slf4j:jar:1.7.7:runtime
[INFO] |  \- (org.slf4j:slf4j-api:jar:1.7.7:runtime - omitted for duplicate)
[INFO] \- org.slf4j:slf4j-api:jar:1.7.7:compile
[INFO]
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (default) @ enforcer-dependency-convergence-test ---
[INFO]
...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
...

$ 
```

现在让我们更改`slf4j-api`'s 版本。

```
$ mvn -Dunified.slf4j-api.version=1.7.13 -Dverbose=true dependency:tree verify
...
[INFO] test:enforcer-dependency-convergence-test:jar:0.1-SNAPSHOT
[INFO] test:enforcer-dependency-convergence-test:jar:0.1-SNAPSHOT
[INFO] +- ch.qos.logback:logback-classic:jar:1.1.3:runtime
[INFO] |  +- ch.qos.logback:logback-core:jar:1.1.3:runtime
[INFO] |  \- (org.slf4j:slf4j-api:jar:1.7.7:runtime - omitted for conflict with 1.7.13)
[INFO] +- org.slf4j:log4j-over-slf4j:jar:1.7.13:runtime
[INFO] |  \- (org.slf4j:slf4j-api:jar:1.7.13:runtime - omitted for conflict with 1.7.7)
[INFO] \- org.slf4j:slf4j-api:jar:1.7.13:compile
[INFO]
[INFO] --- maven-enforcer-plugin:1.4.1:enforce (default) @ enforcer-dependency-convergence-test ---
[WARNING]
Dependency convergence error for org.slf4j:slf4j-api:1.7.7 paths to dependency are:
+-test:enforcer-dependency-convergence-test:0.1-SNAPSHOT
  +-ch.qos.logback:logback-classic:1.1.3
    +-org.slf4j:slf4j-api:1.7.7
and
+-test:enforcer-dependency-convergence-test:0.1-SNAPSHOT
  +-org.slf4j:log4j-over-slf4j:1.7.13
    +-org.slf4j:slf4j-api:1.7.13
and
+-test:enforcer-dependency-convergence-test:0.1-SNAPSHOT
  +-org.slf4j:slf4j-api:1.7.13

[WARNING] Rule 0: org.apache.maven.plugins.enforcer.DependencyConvergence failed with message:
Failed while enforcing releasability the error(s) are [
Dependency convergence error for org.slf4j:slf4j-api:1.7.7 paths to dependency are:
+-test:enforcer-dependency-convergence-test:0.1-SNAPSHOT
  +-ch.qos.logback:logback-classic:1.1.3
    +-org.slf4j:slf4j-api:1.7.7
and
+-test:enforcer-dependency-convergence-test:0.1-SNAPSHOT
  +-org.slf4j:log4j-over-slf4j:1.7.13
    +-org.slf4j:slf4j-api:1.7.13
and
+-test:enforcer-dependency-convergence-test:0.1-SNAPSHOT
  +-org.slf4j:slf4j-api:1.7.13
]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
...

$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T21:51:18.337

只是不要直接依赖顶级 pom 中的 slf4j。

# c++ - 脚本 - 值类型 - 如何解决这个问题？

> ID：14861246
> 
> 赞同：1
> 
> 时间：2013-02-13T19:17:09.993
> 
> 标签：c++

我正在编写自己的脚本语言，需要以某种方式处理值类型。

我需要在我的脚本中定义一个变量值，如下面的片段

```
#Var #Name="Alpha" #Class="Float" #Value=1.0
#Var #Name="Beta" #Class="Int" #Value=1
#Var #Name="Delta" #Class="Vector2" #Value=(1.0,2.0)
#Var #Name="Echo" #Class="String" #Value="abcdefgh" 
```

如您所见，每个#Var 都有一个#Class 定义期望的值**类型。**

问题是我不知道如何“轻松”地处理它，以便我以后可以以简单的方式管理这些值：

```
float fAlpha = GetVar("Alpha")->GetValue();
fAlpha = 150.0f;
GetVar("Alpha")->SetValue(fAlpha); 
```

...

```
CVector2 vDelta = GetVar("Delta")->GetValue();
vDelta=CVector2(10.0,20.0);
GetVar("Delta")->SetValue(vDelta) 
```

我可以一直检查#Var #Class，但我正在寻找更清晰/OO的东西。

```
if(GetVar("Alpha")->GetClass() == "Float")
{
float fAlpha = GetVar("Alpha")->GetValue();
} 
```

有人可以说明您如何处理这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:37:52.647

我过去处理这个问题的方式是使用继承和虚函数：

创建变量时，我会执行以下操作：

```
variable_base *var = new variable_int; 
```

这是这样实现的：

```
class variable_base {
public:
    virtual ~variable_base() {}

public:
    virtual variable_base *clone() const = 0;

public:
    // all operations you can do to a variable as pure virtual functions here
    virtual variable_base *operator+=(const variable_base *rhs) = 0;
    // ...
};

class variable_int : public variable_base {
public:
    virtual variable_base *clone() const { return new variable_int(*this); }

public
    virtual variable_base *operator+=(const variable_base *rhs) {
        if(variable_int *other = dynamic_cast<variable_int *>(rhs)) {
            // int += int
            value_ += other->value_;
        } else {
            // throw exception, or convert, whatever you want
        }
        return this;
    }

private:
    int value_;
}; 
```

我会为每种可能的变量类型执行此操作。

唯一变得棘手的是操作应该“上转换”左值。比如在我的脚本语言`char + string == string`中为了保持一致`string + char == string`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:28:04.010

我最近遇到了类似的问题。我将每个变量存储为一个[void 指针](http://www.learncpp.com/cpp-tutorial/613-void-pointers/ "空指针")，然后当我想访问该值时，我只需传递 void 指针和我想将其设置为的值。

我重载了四个左右的函数，每个变量类型一个，但都具有相同的名称。

```
setValue(&currentVoidPointerToVar , string("value") ) 
```

然后，正确的函数（在本例中为字符串 one）将检查存储在 void 指针处的变量类型。如果它与指定的值匹配，它会将 void 指针重新转换为正确的类型，然后访问该对象，然后设置该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:38:23.007

该[`boost::program_options`库](http://www.boost.org/doc/libs/1_53_0/doc/html/program_options.html)基本上做了类似的事情。您注册已知选项的类型并使用 检索值[`boost::any`](http://www.boost.org/doc/libs/1_53_0/doc/html/any.html)。

`#Class`您可以使用提供适当处理程序（例如仿函数）的已知字符串来区分值提取。

# android - 为什么 onDraw() 不断调用？

> ID：14861253
> 
> 赞同：4
> 
> 时间：2013-02-13T19:17:34.950
> 
> 标签：android, android-linearlayout

我有一个使用自定义 LinearLayout 的小型应用程序，称为 LinearlayoutOutlined。我想在里面画出不同大小和颜色的盒子。它还有两个指示时间间隔的文本标签。在某些用户操作后必须重新绘制布局。因此我确实刷新了布局

```
slotPanel.setDayBoundariesInMinutes( db, dw );
TimeSlot[] tSlots = nextDaysSlots.getGaps( dayOfWeek );
slotPanel.setItems( tSlots );
slotPanel.invalidate(); 
```

其中*slotpanel*是*LinearLayoutOutlined*实例。

我检测到 onDraw 方法被不断调用。它不会在特定数量的周期后停止调用。

这是整个 LinearLayoutOutlined 类：

包 com.widgets；

```
public class LinearLayoutOutlined extends LinearLayout {
    private int workingTimeBeginsInMinutes;
    private int workingTimeFinishesInMinutes;
    private TimeSlot[] items;
    private Rect outline;
    private Paint strokePaint = new Paint();
    SimpleDateFormat formatter;
    public LinearLayoutOutlined( Context context ) {
        super( context );
        setWillNotDraw( false );
    }
    public LinearLayoutOutlined( Context context, AttributeSet attrs ) {
        super( context, attrs );
        setWillNotDraw( false );
    }
    public void setWorkingTimeBeginsInMinutes( int m ) {
        this.workingTimeBeginsInMinutes = m;
    }
    public void setWorkingTimeFinishesInMinutes( int m ) {
        this.workingTimeFinishesInMinutes = m;
    }
    public void setDayWidthInMinutes( int dayWidthInMinutes ) {
        this.workingTimeFinishesInMinutes = this.workingTimeBeginsInMinutes +  dayWidthInMinutes;
    }
    public void setDayBoundariesInMinutes( int daybeginInMinutes, int dayWidthInMinutes ) {
        setWorkingTimeBeginsInMinutes( daybeginInMinutes );
        setDayWidthInMinutes( dayWidthInMinutes );
    }
    private int getWorkingTimeBeginsInMinutes() {
        return workingTimeBeginsInMinutes;
    }
    public int getWorkingTimeFinishesInMinutes() {
        return workingTimeFinishesInMinutes;
    }
    public void setItems( TimeSlot[] items ) {
        this.items = items;
    }
    @SuppressLint("DrawAllocation")
    @Override
    protected void onDraw( Canvas canvas ) {
        if( items == null ) return;
        // time labels
        TextView tvFrom = ( TextView )findViewById( R.id.lblStartingTime ), tvTo = ( TextView )findViewById( R.id.lblFinishingTime );
        formatter = new SimpleDateFormat( "HH:mm", Locale.getDefault() );
        tvFrom.setText( formatter.format( new Date( getWorkingTimeBeginsInMinutes() * 60000L ) ) );
        tvTo.setText( formatter.format( new Date( getWorkingTimeFinishesInMinutes() * 60000L ) ) );
        strokePaint.setStyle( Paint.Style.STROKE );
        strokePaint.setStrokeWidth( 1 );
        strokePaint.setStyle( Style.FILL );
        outline = canvas.getClipBounds();
        Convert.setDayBoundaries( getWorkingTimeBeginsInMinutes(), getWorkingTimeFinishesInMinutes(), outline );
        for( TimeSlot slotItem: items ) {
            RectTouchable rect = Convert.ToRect( slotItem );
            if( slotItem.isFree() )
                strokePaint.setARGB( 255, 0, 255, 0 );
            else
                strokePaint.setARGB( 255, 255, 0, 0 );
            canvas.drawRect( rect.getRect(), strokePaint );
        }
    }
} 
```

请给我一些想法，我该怎么办？提前感谢

* * *

**我不明白为什么我不能对自己的问题添加评论？！？**

**@Romain Guy：** 谢谢！好的，我明白了。但我必须将 setText() 与绘图框一起设置。文本标签被覆盖，它们是最上面的。我该怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T20:01:35.117

每次调用`setText()`UI`TextView`工具包时都需要重新布局和重新绘制 UI。由于您每次都这样做，因此`onDraw()`您基本上创建了一个无限绘图循环。

你的 draw 方法还有其他问题：你不应该`findViewById()`每次都做 a，你不应该`SimpleDateFormat`每次都创建一个新对象，你不应该每次都创建新`Date`对象，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-14T23:44:30.350

如果仅在文本已更改时在 onDraw() 中调用 setText，则可以避免无限循环。而不是 setText 使用这个方法：

```
void setTextIfChanged(TextView tv, CharSequence text) {
    if (!text.equals(tv.getText()))
        tv.setText(text);
} 
```

# xamarin.ios - 将图像添加到 mkmapview Monotouch

> ID：14861254
> 
> 赞同：0
> 
> 时间：2013-02-13T19:17:37.307
> 
> 标签：xamarin.ios, mkmapview

我在网站上找到了这篇文章，用于将 UIImage 添加到 MKMapView，但这是在 Objective-c 中。任何人都可以帮助我们如何在 c# 的 monotouch 上使用它？

[https://stackoverflow.com/a/6554418](https://stackoverflow.com/a/6554418)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T00:04:49.817

我建议您观看 Xamarin 关于**[“使用 C# 开发 iOS 地图应用程序”的](http://docs.xamarin.com/videos/ios/developing-ios-map-applications-c)**截屏视频。
它不包括自定义 MKOverlayView 绘图部分，因为它与创建自定义视图并覆盖它的绘图例程完全一样。
但它确实解释了你如何以及为什么你必须在这里结束..

基本上，你必须

*   创建一个自定义的 MKImageOverlay 对象（子类化 MKOverlay）
*   创建一个自定义的 MKImageOverlayView 对象（子类化 MKOverlayView），它将处理实际的图像绘制方法（就像使用 CoreGraphics 覆盖的任何视图绘制一样）
*   使用 MKMapView.addOverlay() 方法将您的自定义 MKImageOverlay 添加到地图
*   为地图提供一个 MKMapViewDelegate，它将通过覆盖 GetViewForOverlay 并返回您的自定义 MKImageOverlayView 来处理您的自定义 MKImageOverlay

您也可以在这里查看此 SO 帖子：[MonoTouch Mapkit 图像叠加](https://stackoverflow.com/questions/12207660/monotouch-mapkit-image-overlay)

干杯

# ios - iOS 上的 read()/write() 调用似乎受限于 2250 字节

> ID：14861255
> 
> 赞同：0
> 
> 时间：2013-02-13T19:17:38.010
> 
> 标签：ios, file-io, system, output, bsd

我在尝试使用 open()、read() 和 write() 读写 9k 字节时遇到了一个奇怪的问题。当我尝试将 9k 写入文件并将其读回时，数据最多只能达到 2250 字节。在那之后一切都归零。

这是我的代码（除了不相关的文件名，我只是把它放到 NSDocumentDirectory 中）：

```
int fp = open([appFile cStringUsingEncoding:NSASCIIStringEncoding], O_RDWR | O_CREAT, 0644);

[_detailViewController log:@"first open() returns %i (err: %i)", fp, errno];

 int data2[10000];
 int data3[10000];

 for (int i=0;i<10000;i++) data2[i] = 1;

 [_detailViewController log:@"resetting seek to 0"];

 int seekPos = lseek(fp, 0, SEEK_SET);

 result = write(fp, data2, 9000);

 [_detailViewController log:@"wrote 9k, result is %i", result];

 [_detailViewController log:@"resetting seek to 0"];

 seekPos = lseek(fp, 0, SEEK_SET);

 result = read(fp, data3, 9000);

 [_detailViewController log:@"read 9k, result is %i", result];

 [_detailViewController log:@"values of data2[2248-2252] = 0x%x 0x%x 0x%x 0x%x 0x%x", data2[2248], data2[2249], data2[2250], data2[2251], data2[2252]];

 [_detailViewController log:@"values of data3[2248-2252] = 0x%x 0x%x 0x%x 0x%x 0x%x", data3[2248], data3[2249], data3[2250], data3[2251], data3[2252]];

 close(fp); 
```

这是奇怪的输出：

```
2013-02-13 14:08:38.290 FileTester[2800:907] first open() returns 6 (err: 3)
2013-02-13 14:08:38.295 FileTester[2800:907] resetting seek to 0    
2013-02-13 14:08:38.301 FileTester[2800:907] wrote 9k, result is 9000
2013-02-13 14:08:38.306 FileTester[2800:907] resetting seek to 0
2013-02-13 14:08:38.311 FileTester[2800:907] read 9k, result is 9000
2013-02-13 14:08:38.319 FileTester[2800:907] values of data2[2248-2252] = 0x1 0x1 0x1 0x1 0x1
2013-02-13 14:08:38.327 FileTester[2800:907] values of data3[2248-2252] = 0x1 0x1 0x0 0x0 0x0 
```

正如您在最后一行看到的，数据突然变为零。

有什么想法我可能做错了吗？真正让我感动的是 read() 和 write() 都返回 9000。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:19:18.873

正如 ughoavgfhw （谢谢！）所提到的，问题是我混淆了字节和整数。9000 字节与 2250 个整数是一样的，因为每个整数是 4 个字节。

# facebook - 为什么当我在 Facebook 上分享链接时，我只能从 12 张缩略图中的 3 张中选择？

> ID：14861256
> 
> 赞同：3
> 
> 时间：2013-02-13T19:17:41.120
> 
> 标签：facebook, thumbnails, share, meta-tags, muse

URL Linter 检测到我所有的 og:image 缩略图，但是当我分享链接时，Facebook 只允许我在 3 之间进行选择[（参考）](http://oi49.tinypic.com/xd6ruh.jpg)。该网站已通过 W3C 验证，并且我已经三次检查了我正在使用的元标记。这些图像是 300x300 像素的方形 jpeg。

这是我要分享的链接，[http](http://proactiveresources.com/021313) ://proactiveresources.com/021313 。该网站是使用 Adob​​e Muse 创建的，我正在 Google Chrome 上测试共享。

有没有人有任何进一步的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:51:35.007

如果我理解您的问题（我的英语不好）：如果您刚刚创建或更改了`og:`标签，您可能需要等待 24 小时，或者为了让您的 Facebook 缩略图正常工作，您需要强制 Facebook 刷新其缓存。如果 Facebook 已经抓取了您的网站/帖子，它会将其存储在缓存中，并且可能需要 24 小时才能显示任何新的更新。因此，这就是为什么您需要通过将 url 添加到您要分享的帖子来强制 Facebook 刷新其缓存的原因。 [访问此链接](https://developers.facebook.com/tools/debug)

添加您的网址，然后单击调试，如果失败，您可以等待 24 小时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T21:06:39.863

一种可能的解决方案是将 og:type 更改为“网站”或“产品”，这样 Facebook 将提取更多图像。

# c++ - c++ 和 gcc 中的线程局部静态

> ID：14861257
> 
> 赞同：2
> 
> 时间：2013-02-13T19:17:41.510
> 
> 标签：c++, multithreading, gcc, static, constants

我正在尝试使用 gcc 和 c++（前 c++11 和后）了解本地静态的行为。很多时候，在一个成员函数中，我发现自己在做这样的事情：

```
struct Foo
{
    void foo() 
    {
        static const bool bar = someFunc();
        //etc
    }
}; 
```

例如在`someFunc()`哪里`getenv("SOME_ENV_VAR")`。在上面的代码中，管理规则是什么`bar`？我相信，但没有参考，gcc 将编译一个同步机制（不确定是什么）来保护上述本地静态免受多个线程的影响。如果不再是，事情会如何变化`const`？或者如果我们让它成为本地线程`__thread`？如果`foo()`不是成员函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:26:15.960

规则实际上是由 C++ std 而不是 gcc 定义的： http: [//cpp0x.centaur.ath.cx/stmt.dcl.html](http://cpp0x.centaur.ath.cx/stmt.dcl.html)

我想说的是：

*   gcc 将保护初始化但不保护静态的使用；变量在第一次进入块时被初始化
*   const 不影响它，只要是静态存储
*   __thread vars 使用它们自己的初始化进行初始化，并且不受任何额外锁的保护（如 jmetcalfe 注释中所指出的）
*   static 应该在块范围内，所以任何块都可以，即使只是 {} 对。
*   （作者 Aurelien，见评论） someFunc 只会被调用一次

还有其他问题，例如从递归重新进入并且不允许死锁，所有这些都在上面的链接中进行了描述。此外，C++ 03 和 11 std 版本在这个主题上有些不同。

引用：

> 如果在变量初始化时控制同时进入声明，则并发执行将等待初始化完成

6.7.4 美元，C++11

which means that it **is** thread-safe - but only in the new standard. Anyway in gcc this is controlled by -f[no-]threadsafe-statics option.

I'm also interested in the downvote, I mean, if you think the link is wrong it would be nice to tell why, so that me and others know.

# python - Python comtypes - '_Dispatch' 对象不可调用

> ID：14861258
> 
> 赞同：0
> 
> 时间：2013-02-13T19:17:41.747
> 
> 标签：python, comtypes

我一直在使用 Python 的 comtypes 模块来自动化 Photoshop，但是当我尝试在 windows8 上执行命令时出现 TypeError。

这些相同的命令在 windows7 上运行良好。

这是我正在使用的代码示例：

```
from comtypes.client import CreateObject

psApp = CreateObject("Photoshop.Application")

#Create a new document- this is where it bombs out!
psApp.Documents.Add(1024, 1024, 72, 'new_source_texture', 2, 1, 1) 
```

这是我得到的回溯：

```
Traceback (most recent call last):
    File "test.py", line 9, in <module>
    psApp.Documents.Add(1024, 1024, 72, 'new_source_texture', 2, 1, 1)
TypeError: '_Dispatch' object is not callable 
```

我怀疑这与 comtypes 返回错误类型的对象有关，但我很新，所以如果有人能指出我正确的方向，我将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:44:09.890

这似乎是与 Windows 8 的兼容性问题。一旦我将 Python 命令行设置为在 Windows XP 兼容模式下执行，comtypes 模块就会按预期工作。

同样的修复也适用于 win32com 模块，我尝试过但遇到了类似的困难。

要在 Windows 8 中设置兼容模式，您可以按照以下步骤操作：

1.  转到您的控制面板。
2.  单击“程序”类别。
3.  单击“运行为以前版本的 Windows 制作的程序”
4.  逐步执行疑难解答，选择 Python 命令行作为目标程序。

# python - Python sorted() 内置函数与 list insert() 方法的效率

> ID：14861262
> 
> 赞同：4
> 
> 时间：2013-02-13T19:17:52.873
> 
> 标签：python, performance, algorithm

我对它并不陌生，但我不怎么使用 Python，而且我的知识相当广泛，对语言的了解也不是很深，也许这里的知识渊博的人可以回答我的问题。当我需要将项目添加到列表并将其作为添加的项目排序时，我发现自己处于这种情况。一个快速的方法是。

```
list.append(item)                  // O(1)
list.sort()                        // ?? 
```

我想如果这是将项目添加到列表中的唯一方式，我希望排序会相当有效，因为每次添加都会对列表进行排序。然而，也有这样的工作：

```
inserted = False
for i in range(len(list)):         // O(N)
    if (item < list[i]): 
        list.insert(i, item)       // ??
        inserted = True
        break
if not inserted: list.append(item) 
```

谁能告诉我其中之一是否明显更有效？我倾向于第二组陈述，但我真的不知道。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T19:21:02.587

您正在寻找的是 bisect 模块和最有可能的[insort_left](http://docs.python.org/2/library/bisect.html#bisect.insort_left)

所以你的表达式可以等效地写成

从

```
some_list.append(item)                  // O(1)
some_list.sort()                        // ?? 
```

至

```
bisect.insort_left(some_list, item) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T19:26:43.877

插入除末尾附近的任何地方都需要 O(n) 时间，因为它必须移动（复制）插入点之后的所有元素。但另一方面，所有基于比较的排序算法平均必须进行 Omega(n log n) 比较。许多排序（包括 Python 使用的 timsort）在许多输入上会做得更好，可能包括你的（“几乎排序”的情况）。他们仍然必须移动*至少*与立即插入正确位置一样多的元素。他们还必须做很多额外的工作（检查*所有*元素以确保它们的顺序正确，加上更复杂的逻辑，通常可以提高性能，但在你的情况下不是）。由于这些原因，它可能会更慢，至少对于大型列表而言。

由于是用 C 编写的（在 CPython 中；但类似的推理适用于其他 Python），它可能仍然比 Python 编写的线性扫描更快。这就留下了如何找到插入点的问题。二进制搜索可以在 O(log n) 时间内完成这部分，所以在这里非常有用（当然，插入仍然是 O(n)，但如果你想要一个排序列表，就没有办法解决这个问题）。不幸的是，二分搜索实现起来相当棘手。幸运的是，它已经在标准库中实现了：[`bisect`](http://docs.python.org/3/library/bisect.html).

# javascript - Codeigniter 电子邮件类 - 如果在名称字段中输入 2 个单词，则不发送

> ID：14861265
> 
> 赞同：0
> 
> 时间：2013-02-13T19:17:54.700
> 
> 标签：javascript, codeigniter, email

就像标题说的那样，在我的页面上，我有一个包含电子邮件、姓名和消息字段的联系表。出于某种原因，如果在名称字段中输入了 2 个单词（例如“John Doe”），当我尝试发送它时会出现错误：\

有人有什么建议吗？

```
public function send_mail($res)
    {
        $this->load->library('email');
        $config['protocol'] = 'SMTP';
        $config['smtp_host'] = 'mail.something.com';
        $config['smtp_user'] = 'email@something.com';
        $config['smtp_pass'] = 'password';
        $config['smtp_port'] = '25';

        $this->email->initialize($config);

        $this->email->from($res['sender_name'], $res['sender_email']);
        $this->email->to($res['reciever']);
        $this->email->reply_to($res['sender_email'], $res['sender_name']);

        $this->email->subject('Message from website');
        $this->email->message($res['message']);

        if($this->email->send()) {
            return true;
        } else {
            return false;
        }
        //configure mail agent...
    }

    private function get_email_address($email)
    {
        $this->load->model('main_model');
        $email = $this->main_model->get_email($email);
        return $email;
    }

    public function get_email_message()
    {
        //only ajax requests are allowed
        if(!$this->input->is_ajax_request()) {
            die();
        }
        $res['message'] = $this->input->post('message');
        $res['reciever'] = $this->input->post('receiver');
        $res['sender_name'] = $this->input->post('sender_name');
        $res['sender_email'] = $this->input->post('sender_email');

        $res['reciever'] = $this->get_email_address($res['reciever']);

        $res = $this->send_mail($res);
        $this->output->set_content_type('application/json')->set_output(json_encode($res));
    } 
```

PS 我发现这个 JS 代码看起来是用于错误和验证的，不知道它是否有帮助：\

```
function createEmailElem() {
    var parentElem = document.getElementById('contact_art');
    var messageElem = document.createElement('textarea');
    messageElem.id = 'email_message';
    messageElem.style.cssText = "float:right;width: 93%;box-sizing: border-box;-moz-box-sizing: border-box;height:100px;";
    //messageElem.id = "email_mess";
    //messageElem.attributes.placeholder = 'Poruka';
    //$('#email_mess').attr('placeholder') = 'test';
    var nameDiv = document.createElement('div');
    nameDiv.style.marginBottom = '5px';
    var emailDiv = document.createElement('div');
    emailDiv.style.marginBottom = '5px';

    var labelMessage = document.createElement('label');
    labelMessage.innerHTML = 'Poruka';
    var labelName = document.createElement('label');
    labelName.innerHTML = 'Vaš e-mail';
    labelName.style.marginRight = '5px';
    var labelEmail = document.createElement('label');
    labelEmail.innerHTML = 'Vaše ime';
    labelEmail.style.marginRight = '10px';

    var nameElem = document.createElement('input');
    nameElem.type = "text";
    nameElem.name = "sender_name";
    nameElem.id = "sender_name";

    var emailElem = document.createElement('input');
    emailElem.type = "text";
    emailElem.name = "sender_email";
    emailElem.id = "sender_email";

    var buttonElem = document.createElement('input');
    buttonElem.className = 'gradient-button';
    buttonElem.id = 'email_send';
    buttonElem.type = 'button';
    buttonElem.value = 'Posalji';
    buttonElem.style.cssText = "margin-top:10px;float: right;"

    nameDiv.appendChild(labelName);
    nameDiv.appendChild(nameElem);

    emailDiv.appendChild(labelEmail);
    emailDiv.appendChild(emailElem);

    parentElem.appendChild(nameDiv);
    parentElem.appendChild(emailDiv);
    parentElem.appendChild(labelMessage);
    parentElem.appendChild(messageElem);
    parentElem.appendChild(buttonElem);
}

/*if email not found*/
function createNoticeElem() {
    var parentElem = document.getElementById('contact_art');
    var messageElem = document.createElement('p');
    messageElem.innerHTML = 'The user didn\'t leave the e-mail address';
    parentElem.appendChild(messageElem);
}

function sendEmail() {
    if(ckeckEmail()) {
        createEmailElem();
    } else {
        createNoticeElem();
    }
}

function sendingSuccess() {
    var parentElem = document.getElementById('contact_art');
    var messageElem = document.createElement('p');
    messageElem.innerHTML = 'Email was sended succesfuly!';
    parentElem.appendChild(messageElem);
}

function sendingError() {
    var parentElem = document.getElementById('contact_art');
    var messageElem = document.createElement('div');
    messageElem.className = 'alert alert-error';
    messageElem.innerHTML = 'Error! Email was not sended!';
    messageElem.style.width = '150px';
    parentElem.appendChild(messageElem);
}

function phpSendingError() {
    var parentElem = document.getElementById('contact_art');
    var messageElem = document.createElement('div');
    messageElem.className = 'alert alert-error';
    messageElem.style.width = '250px';
    messageElem.innerHTML = 'Error! Email was not sended! Something wrong with server';
    parentElem.appendChild(messageElem);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:37:41.197

[反之亦然](http://ellislab.com/codeigniter/user-guide/libraries/email.html)：_

```
$this->email->from($res['sender_email'], $res['sender_name']); 
```

你不小心放错了属性。这同样适用于您的表单标签。

```
…&amp;sender_name=mrabe%40example.com&sender_email=Marvin+Test 
```

值传输错误。

如果您使用的电子邮件地址不是来自您的服务器，那么 SMTP 服务器可能会禁止发送。服务器正在使用[发件人策略框架](https://en.wikipedia.org/wiki/Sender_Policy_Framework)。将电子邮件地址替换为`from()`来自您服务器的真实电子邮件地址或附加 .

# mysql - SQL：KEY id_2 有什么作用？

> ID：14861267
> 
> 赞同：3
> 
> 时间：2013-02-13T19:18:02.943
> 
> 标签：mysql, sql, indexing, key

我一直在使用：

```
PRIMARY KEY (id), UNIQUE id (id), KEY id_2 (id) 
```

每当我创建表格时，但我不明白做什么`KEY id_2 (id)`以及为什么？

我到处搜索，找不到合适的答案。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:25:56.537

根据您的示例，我相信您正在在一列上创建三个不同的索引......这可能不是您打算做的。

首先，您正在创建一个主键：

```
PRIMARY KEY (id) 
```

接下来，您将创建一个唯一索引，这不是必需的，因为您已经拥有主键......并且您将此唯一索引命名为`id`：

```
UNIQUE id (id) 
```

最后，创建名为 的第三个索引`id_2`：

```
KEY id_2 (id) 
```

相反，我认为您应该只创建主键，而放弃其他两个索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:24:13.283

来自这个问题：[为什么大多数 SQL 数据库允许定义相同的索引两次？](https://stackoverflow.com/questions/3356391/why-most-sql-databases-allow-defining-the-same-index-twice)

看起来`KEY`语法允许您为该键列创建命名索引。这`id_2`是它的名字。正如您将在相关问题中看到的那样，您可以多次指定：

```
CREATE TABLE `testkey` (
  `id` varchar(10) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `id` (`id`),
  KEY `id_2` (`id`)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:25:09.787

`id`它在名为 的列上创建一个索引`id_2`。

从[MySQL CREATE TABLE](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)语句的文档中：

```
CREATE [TEMPORARY] TABLE [IF NOT EXISTS] tbl_name
    { LIKE old_tbl_name | (LIKE old_tbl_name) }

create_definition:
    col_name column_definition   | [CONSTRAINT [symbol]] PRIMARY KEY [index_type] (index_col_name,...)
      [index_option] ...   | {INDEX|KEY} [index_name] [index_type] (index_col_name,...)
      [index_option] ... 
```

换句话说，`KEY`是 的同义词`INDEX`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T19:24:32.457

这是您的索引的名称。您正在 id 列上创建一个名为 id_2 的索引

# android - Android Eclipse > 图形布局：如何为我打开的每个 XML 布局设置默认布局 = Nexus 7 或 Not 2，以便在 IDE 和设备中看起来相同

> ID：14861268
> 
> 赞同：2
> 
> 时间：2013-02-13T19:18:03.057
> 
> 标签：android, xml, eclipse, graphical-layout-editor

在 Android Eclipse 中是否有任何方法，每当我在 Eclipse 中打开 layout/any_xml_file.xml 时，它应该在图形中默认使用 Nexus 7 或 Note 2（自定义设备）（所以我不会从仅可用的设备/尺寸中手动选择）布局 GUI，所以即使我没有在该设备上部署，它在构建和运行之前在设备和 IDE 本身上应该看起来完全一样？

它将节省在 Kindle Fire、Note 2、Galaxy S3、Nexus 7、Nexus 10 等设备上进行测试的时间，而不是在每个设备上进行部署。

简而言之，解决方案应该是： **1\. 为图形布局设置默认设备 2\. 在该列表中为图形布局添加自定义设备（或屏幕尺寸）**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T10:20:35.177

您可以通过创建不同的布局文件夹来设置它。layout-mdpi layout-hdpi layout-xhdpi layout-xxhdpi 这样一来，布局编辑器将记住，您使用哪种布局用于哪种屏幕尺寸/设备。希望这可以帮助

# sql-server - 适合视图的索引类型

> ID：14861275
> 
> 赞同：0
> 
> 时间：2013-02-13T19:18:24.397
> 
> 标签：sql-server, indexing

我有一个如下创建的视图：-

```
CREATE VIEW [dbo].[vwNumberOfEditsForTimeSheets]
AS
SELECT TOP (100) PERCENT TimeSheetId, COUNT(TimeSheetId) AS NumberOfEdits
FROM     dbo.TimeSheetLogs AS tsl
WHERE  (StatusId = 27)
GROUP BY TimeSheetId
ORDER BY TimeSheetId 
```

它现在可能有大约 1,00,000 个条目，并且每天会增加大约 500 到 1000 个。

哪种类型的索引最适合这种类型的视图？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:23:01.150

您实际上可以在这里使用索引视图

```
CREATE VIEW [dbo].[vwNumberOfEditsForTimeSheets]
WITH SCHEMABINDING
AS
  SELECT TimeSheetId,
         COUNT_BIG(*) AS NumberOfEdits
  FROM   dbo.TimeSheetLogs AS tsl
  WHERE  ( StatusId = 27 )
  GROUP  BY TimeSheetId

GO

CREATE UNIQUE CLUSTERED INDEX IX
  ON [dbo].[vwNumberOfEditsForTimeSheets](TimeSheetId) 
```

取决于版本，您可能需要使用`NOEXPAND`提示才能使用它。

如果您不想使用索引视图，那么支持该`SELECT`查询的基表上的最佳索引将是

```
CREATE NONCLUSTERED INDEX IX ON  dbo.TimeSheetLogs(StatusId, TimeSheetId) 
```

允许查找 by`StatusId`匹配的行排序`TimeSheetId`，因此很容易按流聚合进行分组和计数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T19:23:09.803

请注意，索引视图使您的某些查询更快，但是当您更新（插入、更新、删除、合并）基表时它们需要更多维护。您确实应该通过针对您的全部工作负载执行测试来检查此视图是否物有所值，而不仅仅是针对视图的选择。

```
CREATE VIEW [dbo].[vwNumberOfEditsForTimeSheets]
WITH SCHEMABINDING
AS
  SELECT TimeSheetId, COUNT_BIG(*) AS NumberOfEdits
    FROM dbo.TimeSheetLogs AS tsl
    WHERE (StatusId = 27)
    GROUP BY TimeSheetId;
GO
CREATE UNIQUE CLUSTERED INDEX TSId 
  ON dbo.vwNumberOfEditsForTimeSheets(TimeSheetId);
GO 
```

如果您使用的是标准版，则可能必须使用`WITH (NOEXPAND)`提示来使用视图。

# javascript - JavaScript 不能在 innerHTML中运行

> ID：14861277
> 
> 赞同：-2
> 
> 时间：2013-02-13T19:18:28.030
> 
> 标签：javascript, html, sharethis

我正在尝试在我的网站上使用[ShareThis](http://sharethis.com/)（一种共享工具）。

我有一个外部 JavaScript 文件，它将使用 innerHTML 导入所有 html 代码。

所以代码基本上是这样运行的：

```
document.getElementById("social_media").innerHTML = "<span class='st_facebook_large' displayText='Facebook'></span>"; 
```

并且 Header 包含运行此 span 标签所需的所有文件

```
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "de187292-9a6b-41ad-b7c6-a041b541f753", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script> 
```

理想情况下，`<span class='st_facebook_large'`将转换为 facebook 分享按钮，但我无法让标签正常工作。

请帮忙，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:33:41.823

对我来说很好。

请确保

```
document.getElementById("social_media").innerHTML = "<span class='st_facebook_large' displayText='Facebook'></span>"; 
```

在创建具有 id 的元素**之后**`social_media`但**在**shareThis-Script 运行之前调用。

它必须看起来像这样：

```
<div id="social_media"></div>
<script type="text/javascript">var switchTo5x=true;</script>
<script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
<script type="text/javascript">stLight.options({publisher: "de187292-9a6b-41ad-b7c6-a041b541f753", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>
<script type="text/javascript">
    document.getElementById("social_media").innerHTML = "<span class='st_facebook_large' displayText='Facebook'></span>";
</script> 
```

**如何打破我的例子：**如果你把 div 放在页面的底部，它就不起作用。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:37:33.493

```
<body>      
<div id="social_media" ></div>
</body>
<script type="text/javascript">
        document.getElementById("social_media").innerHTML = "<span class='st_facebook_large' displayText='Facebook'></span>";       
</script> 
```

Just make sure you write the innerHTML after the element

# javascript - jquery ui 工具提示手风琴错误

> ID：14861280
> 
> 赞同：0
> 
> 时间：2013-02-13T19:18:28.180
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-accordion, jquery-ui-tooltip

我遇到了可能是一个独特的问题。我试图弄清楚它，但找不到任何可能导致它的证据。我在我的网络应用程序中使用 Jquery UI 工具提示。我需要手动定位它们。所以我要做的是在我想要的位置放置一个 1px x 1px div，使用自定义 HTML 加载工具提示的内容，然后打开工具提示。它完美地工作，除了在一种情况下。

我还有一个 jquery ui 手风琴作为我的左侧菜单。当手风琴的第一个面板打开时，工具提示可以正常工作。它们准确地出现在我想要它们的位置。当任何其他手风琴面板打开时，工具提示总是显示在屏幕的左上角。工具提示 div 在其 css 属性中设置了正确的位置，它只是没有显示在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:38:41.213

没有一些代码，我猜。我的猜测是您正在使用 JS 定位您的 1x1 div，并且因为您的手风琴面板当时是 {display: none}，所以它们没有尺寸可以参考定位。

您需要在每次手风琴动作*后定位 1x1 div，*

或者

将您的手风琴面板设置为屏幕外，但不隐藏，使用`{position: absolute; left: -999em; display: block;}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T19:26:03.130

我现在觉得很笨。我应该删除这个问题吗？

由于未知原因，我的工具提示 div 位于手风琴内部。我不记得是谁把它放在那里的，也不记得它为什么放在那里。我把它移到文档的末尾，一切正常。

# php - 选择具有多个值的记录并枚举它们

> ID：14861282
> 
> 赞同：2
> 
> 时间：2013-02-13T19:18:34.840
> 
> 标签：php, mysql

这是我的桌子现在的样子：

![](../Images/d8c769f74398275f4895e61c682c44c6.png)

如您所见，有多个记录，例如 XRAY。我想做的是列举那些像 1st Xray 2nd Xray 3rd Xray

或任何类型的枚举。

顺便说一下我当前表的查询

```
"SELECT
             `incurredcharges`.`procedure_no`,
  `c`.`procedure`

FROM
  incurredcharges
  INNER JOIN (
    SELECT `procedure`, `procedure_no` FROM `charges`
    UNION ALL
    SELECT `confinement`, `procedure_no` FROM `confinement`
    UNION ALL
    SELECT `service`, `procedure_no` FROM `ultrasound`
  ) c ON `incurredcharges`.`procedure_no` = c.`procedure_no`
WHERE `incurredcharges`.`patient_no` = '$id'"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:45:12.443

虽然我不知道如何添加“1st”、“2nd”等，但您可以添加 1、2 等。这是一个示例：

```
SELECT
  CONCAT(CASE WHEN cnt > 1 THEN CONCAT(RN,'-') ELSE '' END, t.Proc) Proc
FROM
  (
    SELECT
      @curRow:=CASE WHEN @prevRow = a.Proc THEN @curRow+1 ELSE 1 END AS rn,
      a.Proc,
      @prevRow:=Proc grp
    FROM (
         SELECT Proc FROM Procedures ORDER BY Proc
      ) a JOIN (SELECT @curRow:=0) r
  ) t JOIN
  (
    SELECT Proc, COUNT(Proc) cnt 
    FROM Procedures 
    GROUP BY Proc
  ) c ON t.proc = c.proc 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!2/4f9d0/1)。

基本上，您需要将您的程序分组在一起，为每个组提供一个行号。对于那些超过一个的记录，在前面加上行号。

**- -编辑 - -**

鉴于您的评论，您的查询只需放在主 FROM 中（靠近中间），然后您需要将 procno 带到每个 select 语句中。这是一些应该非常接近的东西，尽管未经测试：

```
SELECT
  procno,
  CONCAT(CASE WHEN cnt > 1 THEN CONCAT(RN,'-') ELSE '' END, t.Proc) Proc
FROM
  (
    SELECT
      @curRow:=CASE WHEN @prevRow = a.Proc THEN @curRow+1 ELSE 1 END AS rn,
      a.Proc,
      a.Procno,
      @prevRow:=Proc grp
    FROM (    
          SELECT
            `incurredcharges`.`procedure_no` procno,
            `c`.`procedure` proc
          FROM
            incurredcharges
            INNER JOIN (
              SELECT `procedure`, `procedure_no` FROM `charges`
              UNION ALL
              SELECT `confinement`, `procedure_no` FROM `confinement`
              UNION ALL
              SELECT `service`, `procedure_no` FROM `ultrasound`
            ) c ON `incurredcharges`.`procedure_no` = c.`procedure_no`
          WHERE `incurredcharges`.`patient_no` = '$id'
          ORDER BY `c`.`procedure`
      ) a 
          JOIN (SELECT @curRow:=0) r
  ) t JOIN
  (
          SELECT
            `incurredcharges`.`procedure_no` procno,
            `c`.`procedure` proc, Count(*) cnt
          FROM
            incurredcharges
            INNER JOIN (
              SELECT `procedure`, `procedure_no` FROM `charges`
              UNION ALL
              SELECT `confinement`, `procedure_no` FROM `confinement`
              UNION ALL
              SELECT `service`, `procedure_no` FROM `ultrasound`
            ) c ON `incurredcharges`.`procedure_no` = c.`procedure_no`
          WHERE `incurredcharges`.`patient_no` = '$id'
          GROUP BY `incurredcharges`.`procedure_no`,
            `c`.`procedure`
  ) c ON t.proc = c.proc 
```

祝你好运。

# php - 在 PHP 中创建多级类

> ID：14861283
> 
> 赞同：3
> 
> 时间：2013-02-13T19:18:47.470
> 
> 标签：php, class, object, inheritance, methods

我正在开发一个软件项目，并且在查看其他项目的代码（例如 Zend 框架）时注意到它们使用某种继承的多级类。

一个例子是`$system->sessions->closeSession()`。我知道对象提供了类似的功能，但我不知道它们可以用于实际的可调用方法。

我怎样才能用这种技术创建一个类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:21:15.123

没什么特别的。在模糊的非功能性伪代码中：

```
class Zend_Session {
    function closeSession() { ... }
}

class zend {
   public $sessions;
   function __construct() {
      $this->sessions = new Zend_Session;
   }
} 
```

# ruby - 使用 Mechanize 和 Nokogiri 保存图像？

> ID：14861287
> 
> 赞同：7
> 
> 时间：2013-02-13T19:18:54.157
> 
> 标签：ruby, nokogiri, mechanize

我正在使用 Mechanize 和 Nokogiri 来收集一些数据。我需要保存在每个请求中随机生成的图片。

在我的尝试中，我被迫下载所有图片，但我真正想要的唯一一张是位于`div#specific`.

此外，是否可以从中生成 Base64 数据，而无需保存或重新加载其源？

```
require 'rubygems'
require 'mechanize'
require 'nokogiri'

a = Mechanize.new { |agent|
    agent.keep_alive = true
    agent.max_history = 0
}

urls = Array.new()
urls.push('http://www.domain.com');

urls.each {|url|

    page = a.get(url)
    doc = Nokogiri::HTML(page.body)

    if doc.at_css('#specific')

        page.images.each do |img|
          img.fetch.save('picture.png')
        end

    end
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-13T21:13:30.670

要从特定位置获取图像：

```
agent = Mechanize.new
page = agent.get('http://www.domain.com')
images = page.search("#specific img") 
```

要保存图像：

```
agent.get(images.first.attributes["src"]).save "path/to/folder/image_name.jpg" 
```

要在不保存的情况下对图像进行编码：

```
encoded_image = Base64.encode64 agent.get(images.first.attributes["src"]).body_io.string 
```

我运行它只是为了确保可以将编码的图像解码回来：

```
File.open("images/image_name.jpg", "wb") {|f| f.write(Base64.decode64(encoded_image))} 
```

# mysql - mySQL为A列选择最大值与B列中的值相同

> ID：14861288
> 
> 赞同：0
> 
> 时间：2013-02-13T19:18:55.047
> 
> 标签：mysql

这是有问题的表格，由该问题底部的命令生成：

```
+--------------+-----------------+
| usr_postcode | pdp_point_total |
+--------------+-----------------+
| MS2 8LA      |             160 |
| MS2 8LA      |             140 |
| MS2 8LA      |             110 |
| MS2 8LA      |             100 |
| MS2 8LA      |              90 |
| MS2 8LA      |              80 |
| MS2 8LA      |              50 |
| MS2 8LA      |              30 |
| WN4 9NV      |              25 |
| MS2 8LA      |              20 |
| SL6 1SR      |              10 |
| SL1 4DX      |              10 |
+--------------+-----------------+ 
```

我想为第一列中的每个值在第二列中找到最大值，因此输出将类似于：

```
-------------
MS2 8LA | 160
WN4 9NV | 25
SL6 1SR | 10
SL1 4DX | 10
------------- 
```

这两列来自不同的表，所以目前这是我的命令：

```
SELECT DISTINCT users.usr_postcode, point_date_pairs.pdp_point_total FROM users
INNER JOIN point_date_pairs ON users.usr_id_pk = point_date_pairs.usr_id_fk
ORDER BY point_date_pairs.pdp_point_total DESC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:21:18.963

GROUP BY 应该有帮助：

```
SELECT users.usr_postcode, MAX(point_date_pairs.pdp_point_total)
FROM users
INNER JOIN point_date_pairs ON users.usr_id_pk = point_date_pairs.usr_id_fk
GROUP BY users.usr_postcode ASC 
```

# listview - ListView Windows 8 多个索引

> ID：14861293
> 
> 赞同：1
> 
> 时间：2013-02-13T19:19:11.583
> 
> 标签：listview, windows-runtime, windows-store-apps, winrt-xaml, c++-cx

当您`ListView`在 Windows 8 Metro Style Apps 中拥有一个时，如果您启用了多项选择，您如何才能选择所有索引？

```
void itemsChanged (Platform::Object^ sender, 
      Windows::UI::Xaml::Controls::Controls::SelectionChangedEventArgs^ e 
{
    // get selected indexes
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:22:35.420

您必须将发送方的[SelectedItems](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.selecteditems.aspx)属性（ListView）与[Items](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.itemscontrol.items.aspx)属性进行比较。似乎 SelectedItems 添加到集合中并从集合中删除的订单项被选中（尽管在我能找到的任何地方都没有记录）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:41:04.650

您可以将索引属性添加到您绑定到`ListView`. 除此之外 - 也许你真的不需要索引？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T13:53:17.377

我根据收到的建议找到了解决方案

```
auto v = itemsListView->SelectedItems;
auto l = itemsListView->Items;

std::list <unsigned int> v1;
for (int i=0; i < v->Size; i++)
{
            unsigned int k;
            l->IndexOf(v->GetAt(i),&k);
            v1.push_back(k);
} 
```

# c# - (System.Drawing()) 中的内存不足异常

> ID：14861295
> 
> 赞同：0
> 
> 时间：2013-02-13T19:19:14.277
> 
> 标签：c#, system.drawing

我在旋转图像时遇到问题。我要旋转的图像大小约为 300kB。当我将它从零度旋转到 360 度时，一次增加一个角度，我得到一个内存不足的异常。它一直工作到 100 度。

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
{
    this.openFileDialog1.InitialDirectory  = System.Environment.SpecialFolder.MyComputer .ToString ();

    DialogResult result = this.openFileDialog1.ShowDialog();
    if (result == DialogResult.OK)
    {
        String pathfile = this.openFileDialog1.FileName ;
        meter = Image.FromFile(pathfile);

        pictureBox1.Image = meter;

        bitmapmeter = new Bitmap(meter);
        gmeter = Graphics.FromImage(bitmapmeter);
        w = bitmapmeter.Width;
        h = bitmapmeter.Height;
    }
}

private void button2_Click(object sender, EventArgs e)
{
    for (int angle = 0; angle < 360; angle = angle + 1)
    {
        bitmapmeter = new Bitmap(meter);    //create a bitmap for selected image//pictureBox2.Image = bitmapmeter;
        gmeter = Graphics.FromImage(bitmapmeter);

        rotate(angle);

        bitmapmeter.Dispose();

        gmeter.Dispose();
    }
    MessageBox.Show("Finished");
}

Bitmap newBitmap;
Graphics graphics;

private void rotate(int angle)
{
    newBitmap = new Bitmap(w, h);
    graphics = Graphics.FromImage(newBitmap);

    graphics.TranslateTransform((float)bitmapmeter.Width / 2, (float)bitmapmeter.Height / 2);
    graphics.RotateTransform(1);
    graphics.TranslateTransform(-(float)bitmapmeter.Width / 2, -(float)bitmapmeter.Height / 2);
    graphics.DrawImage(bitmapmeter, new Point(0, 0));

    newBitmap.Dispose();
    graphics.Dispose();
    //pictureBox2.Image = bitmapmeter;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:57:59.207

Dispose 调用的顺序应该颠倒，位图不能被释放，因为图形对象仍在使用它。处理图形，然后处理位图，与创建它们的顺序相反。（并且包装在自动处理的“使用”块中看起来会更好:)

```
using (bitmapmeter = new Bitmap(meter))    //create a bitmap for selected 
{
  using (gmeter = Graphics.FromImage(bitmapmeter))
  {
    rotate(angle);
  }
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-02-13T19:25:16.667

你应该在那里扔一个 GC.Collect，你可能在垃圾收集器有机会运行之前内存不足。

# javascript - document.getElementById().onmousedown 不起作用

> ID：14861297
> 
> 赞同：1
> 
> 时间：2013-02-13T19:19:17.337
> 
> 标签：javascript, onmousedown

```
<html>
<style>
#myA {
    height: 300;
    width: 300;
    background: green;
}
</style>
<body>
<script language="JavaScript">

document.getElementById('myA').onmousedown = function() {
    var a = document.getElementById('myA');
    console.log(a);
}
</script>
<div id="myA"></div>
</body>
</html> 
```

请问，为什么上面的代码不起作用？当我想写console.log 时，我什么也没得到，空值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:21:38.770

当您的脚本运行时，该`myA`元素尚不存在。任何一个：

*   将脚本移动到页面末尾
*   将它放在您从页面末尾的另一个脚本块调用的命名函数中
*   把你的代码放进去`window.onload`
*   在构建 DOM 后，使用 jQuery 运行您的代码，通过`$()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:22:05.717

您必须在该 div 下方编写脚本。因为 div 还没有加载。或者您可以在文档准备好时编写函数和此函数调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:32:09.580

将您的代码包装在一个函数中并将其附加到 window.onload 事件，如下所示：

```
window.onload = function(e) {
    document.getElementById('myA').onmousedown = function() {
        var a = document.getElementById('myA');
        console.log(a);
    };
}; 
```

正如其他人所说，发生这种情况是因为您试图将事件附加到尚未加载的元素。

# vb.net - 任何人都可以将此 VB.NET 代码转换为 VBScript 吗？

> ID：14861298
> 
> 赞同：-2
> 
> 时间：2013-02-13T19:19:17.997
> 
> 标签：vb.net, vbscript

任何可以帮助将一小部分 VB.NET 转换为 VBScript 的人，我在编写测试应用程序时并没有意识到我要在其中使用它的应用程序都是 VBScript =(

代码从数据库中获取一个表，然后写入几行，然后将表写入一个制表符分隔的文件。我知道我可能必须用 Lambda 完全重写该部分？我可能不得不重新开始，但如果有人能做到这一点，我将不胜感激！

```
Private dataTable As New DataTable()

Protected Sub Page_Load(sender As Object, e As EventArgs)
PullData()
End Sub

Public Sub PullData()
'Get data from DB into a DataTable
Using conn As New SqlConnection("Server=.\sqlexpress;Database=DB;User Id=User;Password=Password;")
    Using cmd As New SqlCommand("SELECT areaID as 'Pond Number', storageDescription + SPACE(1) + areaID as 'Pond Name', " & vbCr & vbLf & "case when fishWeight = 0 then 0 else 1 end as 'Pondis Used', 1 as 'Volume', " & vbCr & vbLf & "FeedDensity AS 'Feed Density',round(cast(FeedDensity * revolution as float(25)),2)/*cast as float for correct rounding*/ AS 'Feed Multiplier'," & vbCr & vbLf & "feedType as 'Feed Type', feedName as 'Feed Name', batchID AS 'FishBatchCode'" & vbCr & vbLf & vbCr & vbLf & "FROM dbo.vwStorageMASTER" & vbCr & vbLf & vbCr & vbLf & "WHERE fkLocationID = 1 AND fkStorageIndicator <> 3  ORDER BY sequenceNumber ASC", conn)
        conn.Open()

        Dim da As New SqlDataAdapter(cmd)
        da.Fill(dataTable)
    End Using
End Using

'Output tab-delimited
Dim delim As String = vbTab
Dim sb = New StringBuilder()

sb.AppendLine("Trafalgar Master File" & vbCr & vbLf & vbCr & vbLf)
sb.AppendLine(String.Join(delim, "Number of Ponds: ", dataTable.Rows.Count.ToString() & vbCr & vbLf & vbCr & vbLf))

sb.AppendLine(String.Join(delim, dataTable.Columns.Cast(Of DataColumn)().[Select](Function(arg) arg.ColumnName)))
For Each dataRow As DataRow In dataTable.Rows
    sb.AppendLine(String.Join(delim, dataRow.ItemArray.[Select](Function(arg) arg.ToString())))
Next

'Prompt user to download tab-delimited file
Dim FileName As String = "test.xls"
Dim response As System.Web.HttpResponse = System.Web.HttpContext.Current.Response
response.ClearContent()
response.Clear()
response.ContentType = "text/plain"
response.AddHeader("Content-Disposition", "attachment; filename=" & FileName & ";")
response.Write(sb.ToString())
response.Flush()
response.[End]()
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T21:45:27.970

虽然 VB.Net 和 VBScript 共享相似的语法，但它们使用的对象是完全不同的动物。Vbscript 不了解 System.Web、System.Data、StringBuilder 等。相反，您可能需要查看 VB6 语法和后期绑定的 CreateObject 语法来创建 AdoDb 对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T14:15:23.430

这就是我为我的应用程序重写它的方式。最后我基本上又开始了，但结果几乎一样；

```
<%@LANGUAGE="VBSCRIPT" CODEPAGE="1252"%>
<%Response.Buffer = True%>
<!--#include file="Conn/conn.asp" -->
<% 
Call DownloadFile()

Private Sub DownloadFile()
Dim Comm
Dim rst
Dim delim
delim = vbTab
response.Clear

set rst = Server.CreateObject("ADODB.Recordset")
rst.ActiveConnection = MM_Conn_STRING
rst.Open "Select COUNT(*) from vwTrafalgarMasterFile"

'Write titles
Response.Write("Trafalgar Master File" & vbcrlf & vbcrlf)
Response.Write("Number of Ponds: " & rst.Fields(0).Value & vbcrlf & vbcrlf)

If rst.State = 1 Then rst.Close 'Used 1 instead of AdStateOpen as this seemed to cause an error
rst.Open "Select * from vwTrafalgarMasterFile"

'Write headers
If Not rst.EOF Then
    For Each fld In rst.Fields
        Response.Write(fld.Name & delim)
   Next
   Response.Write vbcrlf
Else
    Response.Write("There was a problem retrieving data or no data could be retrieved")
    Response.End
    Exit sub
End if

'Write rows
With rst
.MoveFirst
Do Until .EOF
    For Each fld In rst.Fields
        Response.Write(fld.Value & delim)
    Next
    Response.Write vbcrlf
        .Movenext
    Loop
End With

Dim FileName
FileName = "TrafalgarMasterFile.xls"
response.ContentType = "text/plain"
response.AddHeader "Content-Disposition", "attachment; filename=" + FileName + ";"
response.Flush
response.End

'Clean up
adoCMD.Close
Set Comm = Nothing
Set rst = Nothing
Set fld = Nothing
End Sub
%> 
```

# c# - TimeZoneInfo.Local vs TimeZoneInfo.FindSystemTimeZoneById

> ID：14861302
> 
> 赞同：13
> 
> 时间：2013-02-13T19:19:27.277
> 
> 标签：c#, asp.net

I've been working with the `DateTime` and `TimeZoneInfo` classes and I ran into an interesting result with the following code:

```
var dstStart = new DateTime(2013, 3, 10, 2, 0, 0, DateTimeKind.Local);
var result = TimeZoneInfo.Local.IsDaylightSavingTime(dstStart); 
```

The result of this is `False`. I actually would have thought it would be `True` (DST starts on March 10th at 2:00 AM)

Then I tried similar code using `FindSystemTimeZoneById` instead:

```
var myTimeZone = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");
var result = myTimeZone.IsDaylightSavingTime(dstStart); 
```

The result of this is surprisingly `True`.

I then checked to see that these objects are both representing the same time zone:

```
myTimeZone.Id == TimeZoneInfo.Local.Id // returns True (Both are "Eastern Standard Time") 
```

My question is: **why are these results different, and more importantly how can I make them the same?**

My computer is definitely in the `Eastern Standard Time` time zone

More information:

I resynced my computer's clock, and I ran a number of tests to compare the `TimeZoneInfo` object that was returned by each of the above methods. Here is my test program

```
var timeZoneFromLookup = TimeZoneInfo.FindSystemTimeZoneById("Eastern Standard Time");

var dstStart = new DateTime(2013, 3, 10, 2, 0, 0, DateTimeKind.Local);

// -- The following return true --

Console.WriteLine("Equal? {0}", TimeZoneInfo.Local.Equals(timeZoneFromLookup));

Console.WriteLine("Has Same Rules? {0}", TimeZoneInfo.Local.HasSameRules(timeZoneFromLookup));

Console.WriteLine("Same Id? {0}", TimeZoneInfo.Local.Id == timeZoneFromLookup.Id);

Console.WriteLine("Same Base UTC Offset? {0}", TimeZoneInfo.Local.BaseUtcOffset == timeZoneFromLookup.BaseUtcOffset);

Console.WriteLine("Same Daylight Name? {0}", TimeZoneInfo.Local.DaylightName == timeZoneFromLookup.DaylightName);

Console.WriteLine("Same Display Name? {0}", TimeZoneInfo.Local.DisplayName == timeZoneFromLookup.DisplayName);

Console.WriteLine("Same Standard Name? {0}", TimeZoneInfo.Local.StandardName == timeZoneFromLookup.StandardName);

Console.WriteLine("Same Support For DST? {0}", 
    TimeZoneInfo.Local.SupportsDaylightSavingTime == timeZoneFromLookup.SupportsDaylightSavingTime
);

Console.WriteLine("Same result as to whether date/time is ambiguous? {0}", 
    timeZoneFromLookup.IsAmbiguousTime(dstStart) == TimeZoneInfo.Local.IsAmbiguousTime(dstStart)
);

// -- The following return false --

Console.WriteLine("Same utc offset result? {0}", 
    timeZoneFromLookup.GetUtcOffset(dstStart) == TimeZoneInfo.Local.GetUtcOffset(dstStart)

);
Console.WriteLine("Same Conversion to UTC? {0}", 
    TimeZoneInfo.Local.GetUtcOffset(dstStart) == timeZoneFromLookup.GetUtcOffset(dstStart)
);

Console.WriteLine("Same result as to whether date/time is invalid? {0}", 
    timeZoneFromLookup.IsInvalidTime(dstStart) == TimeZoneInfo.Local.IsInvalidTime(dstStart)
);

Console.WriteLine("Same result as to whether date/time is DST? {0}", 
    timeZoneFromLookup.IsDaylightSavingTime(dstStart) == TimeZoneInfo.Local.IsDaylightSavingTime(dstStart)
); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T21:57:20.820

I did a little bit of reflecting and I believe the inconsistency stems from how `System.TimeZoneInfo+CachedData.GetCorrespondingKind(TimeZoneInfo timeZone)` returns `DateTimeKind.Local` only in the case where `timeZone == this.m_localTimeZone` (ie, when the argument was the same instance as the `TimeZoneInfo.Local` property is based on).

In the case where you pass this other `TimeZoneInfo` instance you got from `TimeZoneInfo.FindSystemTimeZoneById` I expect that it returns `DateTimeKind.Unspecified`.

This will (probably among other things) affect `System.TimeZoneInfo.IsDaylightSavingTime(DateTime dateTime)` where, in the case where `dateTime.Kind` is local, it does a conversion between essentially `TimeZoneInfo.Local` and your `TimeZoneInfo` instance and bases the conversion on what `GetCorrespondingKind` says for the source and target timezones (the conversion returns the original datetime in the case where source and target are both local).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-08T04:52:14.893

The difference in behavior when using the non-Local `TimeZoneInfo` is defined in the [MSDN documentation](http://msdn.microsoft.com/en-us/library/bb460642.aspx).

The reason the first result is `False` is because the DateTime object you have created is technically ambiguous. There is no 2:00 am on March 10 2013 in the EST local time zone.

The doc states that the `IsDaylightSavingTime()` method is "affected by the relationship between the time zone represented by the TimeZoneInfo object and the Kind property of the dateTime parameter". The table in the Remarks section provides a description of each of the possible combinations.

When specifying a time zone by explicitly calling `FindSystemTimeZoneById`, the "Local Kind" DateTime argument is first converted from Local to the specified time zone. **During this step, the ambiguous time is resolved into a legitimate value.**

Try adding this to your test:

```
var dstStart = new DateTime(2013, 3, 10, 2, 0, 0, DateTimeKind.Local);

dstStart = dstStart.ToUniversalTime();
dstStart = TimeZoneInfo.ConvertTime(dstStart, TimeZoneInfo.Utc, myTimeZone); 
```

The final value of `dstStart` becomes **'3/10/2013 3:00:00 AM'** (assuming your machine is still in EST). The same kind of conversion is happening within `IsDaylightSavingTime()` on the local kind parameter, which illustrates why it returns `True`.

The real surprise here is that the `IsDaylightSavingTime()` method doesn't raise an `ArgumentException` in either case. The documentation says that it will throw an exception when given an invalid `DateTime` parameter whose kind is `DateTimeKind.Local`, but clearly this does not happen.

### **Edit:**

After looking through the source code and comments for the `TimeZoneInfo` class, I've come to the conclusion that the `IsDaylightSavingTime()` method is not meant to throw exceptions. This is a mistake in the documentation.

# asp.net - 绑定到转发器中的文本框 Maxlength 字段

> ID：14861303
> 
> 赞同：0
> 
> 时间：2013-02-13T19:19:29.477
> 
> 标签：asp.net, .net, repeater

我遇到了一个问题，MaxLength 字段似乎不遵守代码隐藏中设置的值。

```
MaxLength='<%#Convert.ToInt32(Eval("AdditionalOptionInfo.MaxFieldLength"))%>' 
```

例如，如果我设置 MaxLength="10" 它似乎工作正常。

编辑：整个代码

```
<asp:Repeater ID="rptList" runat="server">
        <HeaderTemplate>
            <ul>
        </HeaderTemplate>
        <ItemTemplate>
            <li>
                <div class="asdf">
                    <asp:LinkButton ID="adsf" CssClass="asdf" CommandArgument='<%#Eval("OptionAvailable")%>' runat="server" OnDataBinding="lnkList_OnDataBinding" OnClientClick="contactDetailOptionClick(this); return false;">
                        <%#Eval("DisplayText")%>
                        <table class="tbox" runat="server" visible='<%#Eval("IsAdditionalInfoApplicable")%>'>
                            <tbody>
                                <tr>
                                    <td>
                                        <asp:Label runat="server" CssClass="asdf" Text='<%#Eval("AdditionalOptionInfo.InstructionText")%>' />
                                        <br />
                                        <asp:TextBox placeholder='<%#Eval("AdditionalOptionInfo.PlaceHolderText")%>' RetainValueAfterPostback="true" ellipsis="true" AutoComplete="Off" runat="server" MaxLength='<%#Convert.ToInt32(Eval("AdditionalOptionInfo.MaxFieldLength"))%>'  />
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                </asp:LinkButton>
                </div>
            </li>
        </ItemTemplate>
        <FooterTemplate>
            </ul>
        </FooterTemplate>
    </asp:Repeater> 
```

在安德鲁的建议下我的实施：

```
public int GetMaxLength(object additionalOptionInfo)
    {
        var option = additionalOptionInfo as TypeXYZ<string>;

        return option != null ? option.MaxFieldLength : 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:26:12.693

如果父表的可见性为假，则 max lenth eval 仍然会被命中，因为所有这些代码都位于前端。

我会做这样的事情：

```
MaxLength='<%# GetMaxLength(Eval("AdditionalOptionInfo.MaxFieldLength"))%>'

public string GetMaxLength(object optionInfo)
{
     TypeOfOptionInfo option = (TypeOfOptionInfo) optionInfo;

     if (option != null)
     {
         return optionInfo.MaxFieldLength;
     }
     else
     {
           return "0";
     }
} 
```

# css - 在 div 中居中表单

> ID：14861306
> 
> 赞同：0
> 
> 时间：2013-02-13T19:19:52.677
> 
> 标签：css

如何使表单居中，与 div 内的提交按钮对齐？ [http://www.magnixsolutions.com/dev/test/test.html](http://www.magnixsolutions.com/dev/test/test.html)

```
.containerForm {
    padding-top: 20px;
    text-align: center;
    width: 250px;
    float: right;
    padding-right: 65px;    
}
.containerSecuImgs {
    text-align: center;
    width: 250px;   
} 
```

此外，在放置 padding-bottom: 20px; 之后，下面的两个图像不会让我向上移动一点；我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:34:17.170

用包装元素（例如 div）包装标签和输入组，并为其提供一个边距以`0 auto`使其居中。在该包装元素内，您可以根据需要浮动标签和输入。

这是我为你敲的一个例子：http: [//jsfiddle.net/BqEa8/](http://jsfiddle.net/BqEa8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T19:30:04.453

应用`margin: 0px auto;`会将 html 元素定位到浏览器窗口的中心。

尝试将其添加到您的 css 中：

```
.well label {
  margin: 0px auto;
} 
```

希望它能帮助您解决中心对齐问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-25T11:18:57.880

将此类添加到 div：

```
.centerxa {
    position: absolute;
    left: 50%;
    height: auto;
    -webkit-transform: translateX(-50%);
    -moz-transform: translateX(-50%);
    -ms-transform: translateX(-50%);
    -o-transform: translateX(-50%);
    transform: translateX(-50%);
} 
```

# widget - Dojo 小部件和装饰器模式？

> ID：14861311
> 
> 赞同：0
> 
> 时间：2013-02-13T19:20:21.707
> 
> 标签：widget, dojo

任何人都可以帮助我在 Dijit 小部件上应用装饰器模式吗？

例如，给定一个`FormA_Widget`显示带有一些输入文本和按钮的表单。这个想法是创建一个，它用更多的单选按钮、输入等`FormB_Widget`“扩展”装饰它。`FormA_Widget`

我知道如何创建一个模板化的自定义小部件，以及如何“扩展”一个小部件，我需要知道如何在其中的`FormB_Widget`某个位置“注入”模板`FormA_widget`以添加所需的“decoration2.

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:13:49.650

查看我创建的示例：[http ://plnkr.co/edit/dGMJ8UBQ9dT3dGQPQSeu?p=preview](http://plnkr.co/edit/dGMJ8UBQ9dT3dGQPQSeu?p=preview)

这是最简单的解决方案，但它需要在以下方面进行一些微小的更改`FormA`：

**FormA.js**：

```
var FormA = declare([_WidgetBase, _TemplatedMixin, _WidgetsInTemplateMixin], {   
    templateString: template,

    templateExtensionString: "" // <= add `templateExtensionString` property
}); 
```

**FormA.html** - 在小部件模板中添加`templateExtensionString`占位符：

```
<div>
    <div><!-- FormA markup --></div>

    <div>${!templateExtensionString}</div>

    <div><!-- FormA markup --></div>
</div> 
```

**注意：**为防止`_TemplatedMixin`在字符串中转义引号，请放置“！” 在完整的变量名之前。

现在您可以扩展`FormA`：

```
var FormB = declare([FormA], {

    templateExtensionString: template // FormB template (dojo/text!./FormB.html)

}); 
```

如果您无法修改`FormA`，请查看我对[带有确认按钮的 Dojo Dialog 的](https://stackoverflow.com/questions/10401512/dojo-dialog-with-confirmation-button/10405938#10405938)回答，并考虑在此处采用类似的策略。

# algorithm - GUID 或 GUID 的 SHA1 散列之间是否有更多的机会发生冲突？

> ID：14861313
> 
> 赞同：3
> 
> 时间：2013-02-13T19:20:34.940
> 
> 标签：algorithm, guid, sha1, hash-collision

`GUID's`在（128 位）或`GUID's`（160 位）的 SHA1 散列之间是否有更多发生冲突的机会？我的观点是 a 的机会更少`GUID`（即使少了 32 位），因为它有一些特殊的机制来确保它（几乎，因为不能保证）是唯一的（例如：时间戳）

注意：我已经知道 a`GUID`不太可能与另一个发生冲突`GUID`，请不要再讨论这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T19:27:05.520

这很简单：*如果*两个 GUID 相同（即对于每个 GUID 冲突），它们的哈希值也相同（我们有一个“冲突”，它不是“SHA1 冲突”，但对于我们的应用程序来说已经够糟糕了）。另外，有可能发生适当的哈希冲突（不同 GUID 的 SHA1 相同）。

如果您散列您的 GUID，您只能添加冲突。

# java - 在 Android 上隐藏键盘会导致应用程序崩溃

> ID：14861314
> 
> 赞同：0
> 
> 时间：2013-02-13T19:20:42.110
> 
> 标签：java, android, crash, android-context, android-input-method

当我尝试运行此行以隐藏键盘时（我得到 InputMethodManager）：

```
this.context = context;
InputMethodManager mgr = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE); //this line crashes the app 
```

我应该怎么做才能修复它？（顺便说一下，我是从一个片段中运行它的）

**崩溃日志：**

```
11-03 16:20:26.700: D/AndroidRuntime(2809): Shutting down VM
11-03 16:20:26.700: W/dalvikvm(2809): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-03 16:20:26.710: E/AndroidRuntime(2809): FATAL EXCEPTION: main
11-03 16:20:26.710: E/AndroidRuntime(2809): java.lang.NullPointerException
11-03 16:20:26.710: E/AndroidRuntime(2809):     at co.emuze.tabtest1.Tab1$1.onClick(Tab1.java:32)
11-03 16:20:26.710: E/AndroidRuntime(2809):     at android.view.View.performClick(View.java:4084)
11-03 16:20:26.710: E/AndroidRuntime(2809):     at android.view.View$PerformClick.run(View.java:16966)
11-03 16:20:26.710: E/AndroidRuntime(2809):     at android.os.Handler.handleCallback(Handler.java:615)
11-03 16:20:26.710: E/AndroidRuntime(2809):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-03 16:20:26.710: E/AndroidRuntime(2809):     at android.os.Looper.loop(Looper.java:137)
11-03 16:20:26.710: E/AndroidRuntime(2809):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-03 16:20:26.710: E/AndroidRuntime(2809):     at java.lang.reflect.Method.invokeNative(Native Method)
11-03 16:20:26.710: E/AndroidRuntime(2809):     at java.lang.reflect.Method.invoke(Method.java:511)
11-03 16:20:26.710: E/AndroidRuntime(2809):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-03 16:20:26.710: E/AndroidRuntime(2809):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-03 16:20:26.710: E/AndroidRuntime(2809):     at dalvik.system.NativeStart.main(Native Method) 
```

**完全点击方法：**

```
public void onClick(View v) {
                text1.setText(editText1.getText().toString());
                InputMethodManager mgr = (InputMethodManager) context.getSystemService(Context.INPUT_METHOD_SERVICE);
                mgr.hideSoftInputFromWindow(editText1.getWindowToken(), 0);
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:08:02.327

看起来 context 是 null - 你显示 line `this.context = context`，如果右侧`context`不是该方法的本地变量，你什么也不做。我想你可能正在寻找的是`context = getApplicationContext()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-10T09:39:48.813

**不要忘记使用 try catch 博客，因为如果您的键盘没有打开并且如果您使用键盘隐藏代码应用程序崩溃了**

用户在片段中的代码下方

```
 try {
            InputMethodManager imm = (InputMethodManager)getSystemService(INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(), 0);
        } catch (Exception e) {
            // TODO: handle exception
       } 
```

# android - 多个可点击区域（Thumb imageview + textview + listview row） w。底座适配器

> ID：14861316
> 
> 赞同：0
> 
> 时间：2013-02-13T19:20:46.860
> 
> 标签：android, listview, views, baseadapter, clickable

长话短说，我试图将下面代码上半部分的可点击功能添加到下面的自定义适配器中。

我发现了这个 tut（下面代码顶部的源代码的修改版本 - 当前不起作用）：

[http://wiresareobsolete.com/wordpress/2011/08/clickable-zones-in-listview-items/](http://wiresareobsolete.com/wordpress/2011/08/clickable-zones-in-listview-items/)

但是，我的整个项目都使用了这个 tut 中的自定义适配器（下面代码底部的自定义适配器）： [http ://www.androidhive.info/2012/02/android-custom-listview-with-image-and-文本/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

我想做的就是保持我通过列表视图使用现有数据结构（ArrayList w. hash maps）的能力，这将允许我点击

*缩略图图像视图 *粗体标题文本（在图像中它的文本视图读取“像你一样的人”*列表行（除了图像视图和文本视图之外的所有区域）

我宁愿将我的自定义适配器保留在第二个链接中，并仅添加第一个链接中的功能，但是如果这会使事情变得复杂，那么我会向任何允许我插入现有数据集 (Arraylist>) 同时提供描述的功能。

```
import java.util.ArrayList;
import java.util.HashMap;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class MyActivity extends Activity implements AdapterView.OnItemClickListener, View.OnClickListener
{

    // All  static variables
    // XML node keys
    static final String KEY_FEED =  "feed";
    // parent node
    static final String KEY_UID_FK = "uid_fk";  
    static final String KEY_FIRST_NAME = "first_name";
    static final String KEY_LAST_NAME = "last_name";
    static final String KEY_NAME =  "name";
    static final String KEY_MESSAGE = "message";
    static final String KEY_CREATED = "created";
    static final String KEY_THUMB_URL = "thumb_img"; 
    private static final String TAG = "MyApp"; 
    ListView list;
    LazyAdapter adapter;
    JSONArray feed = null;
    Button add;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ListView list = new ListView(this);
        setContentView(list);

        ArrayList<HashMap<String, String>> feedList = new ArrayList<HashMap<String, String>>();

        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();

        // getting JSON string from URL
        JSONObject json = jParser.getJSONFromUrl(URL);

        try {
         // Getting Array of Contacts
         feed = json.getJSONArray(KEY_FEED);

         // looping through All Contacts
         for(int i = 0; i < feed.length(); i++){
          JSONObject c = feed.getJSONObject(i);

          // Storing each json item in variable
          String uid = c.getString(KEY_UID_FK);
          String first_name = c.getString(KEY_FIRST_NAME);
          String last_name = c.getString(KEY_LAST_NAME);
          String name = first_name + last_name;
          String http = "http://10.0.2.2/CI_BUHZ/IMGS/";
          String base_url = c.getString(KEY_THUMB_URL);
          String thumb_url = http + base_url;
          String message = c.getString(KEY_MESSAGE);
          String created = c.getString(KEY_CREATED);

          // creating new HashMap
          HashMap<String, String> map = new HashMap<String, String>();

          // adding each child node to HashMap key => value
          map.put(KEY_UID_FK, uid);
          map.put(KEY_NAME, name);
          map.put(KEY_MESSAGE, message);
          map.put(KEY_CREATED, created);
          map.put(KEY_THUMB_URL, thumb_url);

          // adding HashList to ArrayList
          feedList.add(map);
         }
        } catch (JSONException e) {
         e.printStackTrace();
        }

           Log.i(TAG, "I am logging something informational!");  

        //Supply this adapter with either R.layout.row_button, R.layout.row_view, or R.layout.row_view_noparent
        ArrayAdapter<HashMap<String, String>> adapter = new ArrayAdapter<HashMap<String,String>>(this, R.layout.row_view,
feedList) {
            @Override
            public View getView(int position, View convertView, ViewGroup parent) {
                View row =  super.getView(position, convertView, parent);

                View left = row.findViewById(R.id.left);
                left.setTag(position);
                left.setOnClickListener(MyActivity.this);
                View text = row.findViewById(R.id.text);
                text.setTag(position);
                text.setOnClickListener(MyActivity.this);

                return row;
            }
        };

        list.setAdapter(adapter);
        list.setOnItemClickListener(this);
    }

    @Override
    public void onClick(View v) {
        switch(v.getId()) {
        case R.id.left:
            Toast.makeText(this, "Left Accessory "+v.getTag(), Toast.LENGTH_SHORT).show();
            break;
        case R.id.text:
            Toast.makeText(this, "text Accessory "+v.getTag(), Toast.LENGTH_SHORT).show();
            break;
        default:
            break;
        }
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
        Toast.makeText(this, "Item Click "+position, Toast.LENGTH_SHORT).show();
    } }

//previously I was using this custom adapter that extends base adapter: 

import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        TextView name = (TextView)vi.findViewById(R.id.name); // title
        TextView message = (TextView)vi.findViewById(R.id.message); // artist name
        TextView created = (TextView)vi.findViewById(R.id.created); // duration
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

        HashMap<String, String> update = new HashMap<String, String>();
        update = data.get(position); 

        // Setting all values in listview
        name.setText(update.get("name"));
        message.setText(update.get("message"));
        created.setText(update.get("created"));
        imageLoader.DisplayImage(update.get("thumb_url"), thumb_image);

        return vi;
    }
} 
```

从本教程：[http ://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:10:34.337

Ruware 很乐意与我进行 Google Hangout 来帮助我解决问题。非常尴尬，我自己无法弄清楚这一点：

步骤 1\. 从我的原始描述中的链接 2 导入 dl 项目并将其导入 Eclipse。

步骤 2\. LazyAdapter 类 w。Clickable Imageview & Textview - 只需将我原始描述中链接 2 中的惰性适配器替换为以下代码：

```
import java.util.ArrayList;
import java.util.HashMap;

import android.app.Activity;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class LazyAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
        activity = a;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity.getApplicationContext());
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)
            vi = inflater.inflate(R.layout.list_row, null);

        TextView name = (TextView)vi.findViewById(R.id.name); // title
        TextView message = (TextView)vi.findViewById(R.id.message); // artist name
        TextView created = (TextView)vi.findViewById(R.id.created); // duration
        ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

        HashMap<String, String> update = new HashMap<String, String>();
        update = data.get(position); 

        // Setting all values in listview
        name.setText(update.get("name"));
        message.setText(update.get("message"));
        name.setOnClickListener(new myOnClickListener(position));
        created.setText(update.get("created"));
        imageLoader.DisplayImage(update.get("thumb_url"), thumb_image);
        thumb_image.setOnClickListener(new myOnClickListener(position));

        return vi;
    }

    public class myOnClickListener implements OnClickListener{
        private int position;
        public myOnClickListener(int position){
            this.position=position;
        }
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            HashMap<String, String> update = new HashMap<String, String>();
            update = data.get(position); 
            Log.d("Testing Click", update.get("message"));
        }

    }
} 
```

步骤 3\. list_row.xml - 替换 list_row 布局 w。下面的 XML：

> android:layout_alignParentLeft="true" android:layout_marginRight="5dip"> android:layout_width="50dip" android:layout_height="50dip" android:src="@drawable/default_thumb"/>
> 
> ```
> <TextView
>     android:id="@+id/name"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_alignTop="@+id/thumbnail"
>     android:layout_toRightOf="@+id/thumbnail"
>     android:text="Chuck Kelly"
>     android:textColor="#040404"
>     android:typeface="sans" 
>     android:textSize="15dip"
>     android:textStyle="bold"/>
> 
> <TextView
>     android:id="@+id/message"
>     android:layout_width="fill_parent"
>     android:layout_height="wrap_content"
>     android:layout_below="@id/name"
>     android:textColor="#343434"
>     android:textSize="10dip"
>     android:layout_marginTop="1dip"
>     android:layout_toRightOf="@+id/thumbnail"
>     android:text="This is a status Update" />
> 
> <TextView
>     android:id="@+id/created"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_alignLeft="@+id/message"
>     android:layout_below="@+id/message"
>     android:layout_marginRight="5dip"
>     android:text="5:45"
>     android:textColor="#10bcc9"
>     android:textSize="10dip"
>     android:textStyle="bold" />
> 
>  <ImageView
>      android:id="@+id/close"
>      android:layout_width="wrap_content"
>      android:layout_height="wrap_content"
>      android:layout_alignParentRight="true"
>      android:layout_alignParentTop="true"
>      android:src="@drawable/closeicon"
>      android:visibility="invisible" /> 
> ```

你现在有一个列表视图 w。每行中的可点击视图还允许您在每行中设置多个视图的值，类似于许多流行的社交网络（facebook、twitter、path）再次感谢 Ruware 抽出时间来帮助我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:19:34.827

如果将行的部分设置为可聚焦 (android:focusable="true")（默认），则 ListView 的 OnItemClickListener 不会响应。

尝试将它们全部设置为 false

# groovy - 我想在一张组合地图中合并两张地图

> ID：14861317
> 
> 赞同：0
> 
> 时间：2013-02-13T19:20:49.227
> 
> 标签：groovy

我定义了以下地图

```
def Map1 = [
             Rate: 0,
             Exceptions: [ Exceptions: [ [:] ]
           ]
def Map2 = [
            Exceptions: [Exceptions: [ [:] ] ]
           ] 
```

Map1 已有数据

```
Map1 = [
         Rate: 0, 
         Exceptions: [
                      Exception: [
                                   [Code: 5, Message: "Error"],
                                   [Code: 65, Message: "Error"],
                                   [Code: 35, Message: "Error"]
                      ]
         ]
       ] 
```

我想将 Map2 添加到 Map1

```
Map2 = [
          Exceptions: [
                        Exception: [
                                     [Code: 6, Message: "Error"],
                                     [Code: 25, Message: "Error"],
                                     [Code: 15, Message: "Error"]
                        ]
             ]
           ] 
```

我知道我可以

```
Map2.Exceptions.Exception.each{ Exception ->
  Map1.Exceptions.Exception.add(Exception)
} 
```

但是有没有办法让 Groovy 做到这一点？IE`Map1.merge(Map2)`

编辑：我最终创建了一个元类方法来处理合并。它是递归的，不处理任何已经存在的非 Map/List 变量，但它完成了我需要它做的事情。

```
Map.metaClass.Merge = { Map Source ->
        Map Destination = delegate
        Source.keySet().each{ key ->
            if(Destination.keySet().contains(key)){
                if(!(Source[key] instanceof Map)){
                    if(Source[key] instanceof List){
                        Source[key].each{ Value ->
                            Destination[key].add(Value)
                        }//Source[Key].each
                    }//if(Source[key] instanceof List)
                }//if(!(Source[key] instanceof Map))
                else{
                    Destination[key].Merge(Source[key])
                }//else(!(Source[key] instanceof Map))
            }//if(Destination.keySet().contains(key))
            else{
                Destination[key] = Source[key]
            }//else(Destination.keySet().contains(key))
        }//Source.keySet().each
    }//Map.metaclass.Merge(Map Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:27:04.630

也许像这样？

```
Map1.Exceptions.Exception += Map2.Exceptions.Exception
print Map1 
```

输出：

```
[Rate:0, Exceptions:[Exception:[[Code:5, Message:Error], [Code:65, Message:Error], [Code:35, Message:Error], [Code:6, Message:Error], [Code:25, Message:Error], [Code:15, Message:Error]]]] 
```

# objective-c - 如何使用块异步下载图像？

> ID：14861318
> 
> 赞同：5
> 
> 时间：2013-02-13T19:20:49.927
> 
> 标签：objective-c, ios6, objective-c-blocks

我想单击一个按钮开始下载图像并在更新后将我的 UIImageView 更新为新图像。我的代码的问题是它只下载东西，而不是更新。只有当我再次单击它时它才会更新。我希望它在未来某个时间更新图像，当图像被下载时。我怎么做？

编辑：我发现了错误的代码，改变它有点帮助，一切正常。另一个问题来了——我如何简化这段代码而不把它弄得一团糟？看起来过分了。

```
- (IBAction)getImage
{

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),
     ^{
        NSURL *imageURL = [NSURL URLWithString:@"http://example.com/1.jpg"];
        __block NSData *imageData;

         dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),
            ^{
                imageData = [NSData dataWithContentsOfURL:imageURL];

                dispatch_sync(dispatch_get_main_queue(), ^{
                                             self.image = [UIImage imageWithData:imageData];
                                         });
                                     });

     });

    self.imageView.image = self.image;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-02-13T19:26:31.657

您正在设置`imageView`图像下载完成之前，您需要将逻辑移动到块中。您也没有理由`dispatch_sync`在`dispatch_async`.

```
- (IBAction)getImage
{

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0),
     ^{
        NSURL *imageURL = [NSURL URLWithString:@"http://example.com/1.jpg"];
        NSData *imageData = [NSData dataWithContentsOfURL:imageURL];

        //This is your completion handler
        dispatch_sync(dispatch_get_main_queue(), ^{
             //If self.image is atomic (not declared with nonatomic)
             // you could have set it directly above
             self.image = [UIImage imageWithData:imageData];

             //This needs to be set here now that the image is downloaded
             // and you are back on the main thread
             self.imageView.image = self.image;

         });
     });

     //Any code placed outside of the block will likely
     // be executed before the block finishes.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T19:30:36.587

查看[https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

我用它在后台下载带有进度通知的图像。可以使用 Cocoapods ( [http://cocoapods.org](http://cocoapods.org) ) 将它简单地添加到您的项目中。

Cocoapods 和 GitHub 上还有其他几个异步图像加载器可用，如果它们不适合你的话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-10T20:36:01.150

这是我一直在使用的，尽管它没有提供任何我认为通常有用的进展。这很简单。

```
- (void)downloadImageWithURL:(NSURL *)url completionBlock:(void (^)(BOOL succeeded, NSData *image))completionBlock
{
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];

    [NSURLConnection sendAsynchronousRequest:request
                                       queue:[NSOperationQueue mainQueue]
                           completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                               if ( !error )
                               {
                                   completionBlock(YES,data);
                                   NSLog(@"downloaded FULL size %lu",(unsigned long)data.length);
                               } else{
                                   completionBlock(NO,nil);
                               }
                           }];
} 
```

# arrays - 使用不同的 IFS 解析 txt 文件

> ID：14861319
> 
> 赞同：0
> 
> 时间：2013-02-13T19:20:50.987
> 
> 标签：arrays, bash, parsing

这是我的文件txt中的情况：

```
kevin \t password \t path \n

steve \t password \t path \n

etc... 
```

如何解析这种文件以将名称放入数组中，将密码放入另一个数组中，并将路径同上？我想使用 IFS 变量，但我无法识别什么是 id 或 psw 或路径。

我从这段代码开始：

```
old_IFS=$IFS

IFS=$'\t\n'

lines=($(cat MYFILE)) 

IFS=$old_IFS 
```

还是更好地使用awk？

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:24:14.940

使用 while 读取循环：

```
while IFS=$'\t' read user password path
do
    users+=( "$user" )
    passwords+=( "$password" )
    paths+=( "$path" )
    echo "$user's password is $password, and their path is $path"
done < yourtextfile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:29:14.587

这是一种低效但易于阅读的方法：

```
f() {
    local IFS=$'\n' # Don't wordsplit on just any whitespace. Newlines only
    names=( $(cut -d$'\t' -f1 < file) )
    passes=( $(cut -d$'\t' -f2 < file) )
    paths=( $(cut -d$'\t' -f3 < file) )
}
f 
```

# spring - @XmlSeeAlso 继承

> ID：14861321
> 
> 赞同：2
> 
> 时间：2013-02-13T19:20:57.297
> 
> 标签：spring, jaxb

首先，我是 JAXB 和 Spring 世界的新手，所以如果我错过了一些非常明显的东西，如果有人能指出而不是不回复，我会非常感激。:) 我尝试在这里寻找解决方案，但找不到好的答案。

我有一堆继承自同一个抽象类 A 的子类 DTO（比如 A1、A2、A3）。我希望我的休息查询的结果返回子类类型的列表。我有以下类来表示结果

```
@XmlRootElement(name="result")
@XmlSeeAlso({A1.class, A2.class, A3.class})
public class AResult<T> 
{
...
} 
```

由于 AResult 是通用的，我希望 @XmlSeeAlso 也是通用的，只需编写类似

```
@XmlSeeAlso({(subclasses of A.class}) 
```

但是根据我在本网站和其他地方所做的研究，我认为 JAXB 不可能做到这一点。

1.  由于我们在配置中使用注解驱动标签，它会自动使用 Jaxb2RootElementHttpMessageConverter 类。此消息转换器使用 @XmlSeeAlso 中定义的类创建 JaxbContext。createMarshaller 和 getContext 方法在超类中是不可变的。

2.  由于第 1 点，我无法编写一个类来检查一个类是否是 A 类的子类，然后将其添加到 JaxbContext。我不能使用自定义 Jaxb2RootElementHttpMessageConverter 或自定义 Marshaller。

我该如何解决这个问题？顺便说一句，我们使用的是 Spring 3.1.3 版

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:27:01.817

JAXB 不会扫描您的类路径以查找*可能*恰好是其子类的类`AResult`（这将相当慢！），而是依赖于了解它可能必须创建实例的所有类的[上下文。](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/JAXBContext.html)注释所做的`@XmlSeeAlso`只是使用列出的其他类扩展上下文。

但是，还有许多其他方法。例如，您可以创建一个标有 的类，该类[`@XmlRegistry`](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/XmlRegistry.html)知道如何创建您关心的子类。或者您可以尝试使用[`@XmlJavaTypeAdapter`](http://docs.oracle.com/javase/7/docs/api/javax/xml/bind/annotation/adapters/XmlJavaTypeAdapter.html). 唉，我只`@XmlSeeAlso`在自己的代码中使用基于 - 的方法取得了进展，所以我无法根据经验发表评论。

# windows - Windows 8、手势、.Net/WPF

> ID：14861323
> 
> 赞同：1
> 
> 时间：2013-02-13T19:21:08.127
> 
> 标签：windows, touch

因此，Windows 8 有了处理手势的新方法（Metro 的 GestureRecognizer / Win32 的 InteractionContext）。

*   .Net/WPF 桌面应用程序的认可方式是什么？与 InteractionContext 互操作？
*   .Net 4.5 WPF API 在其上运行时是否使用 Windows 8 中的改进？如果不是，有什么区别？

谢谢！

# javascript - 从 $.when 中的 $.ajax 获取价值的问题

> ID：14861326
> 
> 赞同：0
> 
> 时间：2013-02-13T19:21:14.823
> 
> 标签：javascript, jquery, jquery-ui, dialog

嘿伙计们，我有以下代码：

```
function runATF(){
        var urlatf = '/pcg/ATF/updateATF_window.php';
        var tagatf = $("#insider_dialog");

        var promise1 = showUrlInDialogATF(urlatf);
        var promise2 = sendUpdateATFwindow();

        $.when(promise1, promise2).done(function(data1, data2) {

            tagatf.html(data1[0]).dialog({
              width: '100%',
              modal: true
            }).dialog('open');
           //$('.updaterATF_outerbody').text(data2[0].atfName),
           //$('.updaterATF_outerbody').text(data2[0].atfAmount)
           //console.log(data2[1]);
          alert(data2[0].text(atfName));
              alert(data2[0].text(atfAmount));
        });
    } 
```

我需要你看的部分`alert(data2[0].text(atfName));`和`alert(data2[0].text(atfAmount));` 我的问题是我似乎无法获得值？

让我向您展示运行的 2 个函数：

首先，这个只是发送一个 url 并返回....

```
function showUrlInDialogATF(urlatf)
    {
      return $.ajax({
        url: urlatf
      });
    } 
```

第二个返回在 a 中创建的两个数据值`document.ready`（我已经测试过它们并且它们确实保存值，只有当我尝试将它放入`$.when`语句时）.....

```
function sendUpdateATFwindow()
    {
      return $.ajax({
        data: {
            'atfName': atf_name.val(),
            'atfAmount': atf_amount.val()
        }
      });
    } 
```

如果您还需要什么，请告诉我，谢谢

大卫

哦，这是开始一切的第一条语句：

```
$(document).ready(function () {     
        $(".atf-submit").click(function () {
                atf_name = $(this).parent().parent().find(".user_table");
                atf_amount = $(this).parent().parent().find(".user_atf");
         runATF();
        });
    }); 
```

注意：我正在使用 Jquery UI 对话框打开器，我已经打开了一个，所以我正在打开另一个。不知道会不会有什么影响？我认为不是因为函数和值是不同的名称。

更新：

好的，我想显示打开第一个对话框窗口的第一个代码：

```
$(document).ready(function () {     
        $("#ATF").click(function () {

          runATF();
        });
    });

    function runATF(){
        var urlATF = '/pcg/ATF/atf_layout.php';
        showUrlInDialogATF(urlATF);
    }
    function showUrlInDialogATF(urlATF)
    {
      var tag = $("#dialog-container");
      $.ajax({
        url: urlATF,
        success: function(data) {
          tag.html(data).dialog
          ({
              width: '100%',
                modal: true
          }).dialog('open');
        }
      });
    } 
```

比其他代码运行 - 我将在这里重新发布：

```
$(document).ready(function () {     
        $(".atf-submit").click(function () {
                atf_name = $(this).parent().parent().find(".user_table");
                atf_amount = $(this).parent().parent().find(".user_atf");
         runATFinsider();
        });
    });
function runATFinsider(){
        var urlatfinsider = '/pcg/ATF/updateATF_window.php';
        var tagatfinsider = $("#insider_dialog");

        var promise1 = showUrlInDialogATFinsider(urlatfinsider);
        var promise2 = sendUpdateATFwindow();

        $.when(promise1, promise2).done(function(data1, data2) {

            tagatfinsider.html(data1[0]).dialog({
              width: '100%',
              modal: true
            }).dialog('open');
           //$('.updaterATF_outerbody').text(data2[0].atfName),
           //$('.updaterATF_outerbody').text(data2[0].atfAmount)
           console.log(data2[1]);
          alert(data2[0].text(atfName));
        });
    }
    function showUrlInDialogATFinsider(urlatfinsider)
    {
      return $.ajax({
        url: urlatfinsider
      });
    }
    function sendUpdateATFwindow()
    {
      return $.ajax({
        data: {
            'atfName': atf_name.val(),
            'atfAmount': atf_amount.val()
        }
      });
    } 
```

我也尝试做 a`console.log(data2)`它只是给了我 [0] = `abunch of html?`, [1] = `success`, [2] =`object`

更新：

这是我应该在 data2[0] 中获得的内容的示例...

```
alert(atf_name.val()); = bob
alert(atf_amount.val()); = 0 
```

# android - Android在Gridview中修改ArrayAdapter中文本的字体类型、字体大小、字体颜色

> ID：14861335
> 
> 赞同：0
> 
> 时间：2013-02-13T19:21:54.033
> 
> 标签：android, fonts, android-arrayadapter, font-size, android-gridview

是否可以在 Gridview 中修改字体类型、字体大小、字体颜色（Android API 级别 8 及以上）？如何？

```
public class MainActivity extends Activity {

    GridView gridView;

    static final String[] numbers = new String[] { 
                "P", "Q", "R", "S", "T",
            "U", "V", "W", "X", "Y", "Z"};

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.setActivityBackgroundColor();
        setContentView(R.layout.activity_main);

        gridView = (GridView) findViewById(R.id.gridView1);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, numbers);

        gridView.setAdapter(adapter); 

}

<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/gridView1"
    android:numColumns="auto_fit"
    android:gravity="center"
    android:columnWidth="55dp"
    android:stretchMode="columnWidth"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"    
    android:horizontalSpacing="10dp"
   android:verticalSpacing="10dp"    
    >

</GridView> 
```

提前致谢

# wpf - WPF DataGrid 不显示滚动条并用完可见区域

> ID：14861338
> 
> 赞同：6
> 
> 时间：2013-02-13T19:22:18.007
> 
> 标签：wpf, datagrid, scroll, prism, region

像其他人一样，我有一个不显示滚动条的 DataGrid。我认为我的情况的独特之处在于我在视觉或逻辑树的任何地方都看不到 StackPanel。我正在使用 WPF Inspector 查看树。我尝试了各种建议来设置包含 Grid 列和行的高度和宽度，但没有成功。我确定我缺少一些东西，它允许内容延伸到可见区域之外，但我不知道它是什么。任何帮助，将不胜感激。此应用程序是带有 MEF 应用程序的 WPF Prism，DataGrid 位于 Prism 区域中的 UserControl 内。

外壳窗口 XAML：

```
<Window>
  <Grid x:Name="GridOuterShell">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <ribbon:Ribbon Grid.Row="0" >
        ...
    </ribbon:Ribbon>

    <Grid x:Name="GridShellContent" Grid.Row="1">
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition Height="Auto" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="350" MinWidth="300"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <local:RegionBorderControl Grid.Row="0" Grid.Column="0" Grid.RowSpan="3" Margin="2,2,8,2" RegionName="{Binding MainRegionDisplayName}"
                               Style="{DynamicResource RegionBorderControlStyle}">
        <ContentControl prism:RegionManager.RegionName="MainRegion"
                        VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch"/>

        </local:RegionBorderControl>

        <GridSplitter Grid.Row="0" Grid.Column="1" Grid.RowSpan="3" HorizontalAlignment="Center" VerticalAlignment="Stretch"
                  Width="3" ShowsPreview="True" ResizeDirection="Columns" />

        <local:RegionBorderControl Grid.Row="0" Grid.Column="2" RegionName="{Binding RightTopRegionDisplayName}"
                               Style="{DynamicResource RegionBorderControlStyle}">
        <ContentControl prism:RegionManager.RegionName="RightTopRegion"
                        VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch"/>

        </local:RegionBorderControl>

        <GridSplitter Grid.Row="1" Grid.Column="3" HorizontalAlignment="Stretch" VerticalAlignment="Center"
                  Height="3" ShowsPreview="true" ResizeDirection="Rows" ResizeBehavior="PreviousAndNext" Background="Silver"/>

        <local:RegionBorderControl Grid.Row="2" Grid.Column="2" RegionName="{Binding RightBottomRegionDisplayName}"
                               Style="{DynamicResource RegionBorderControlStyle}">
            <ContentControl prism:RegionManager.RegionName="RightBottomRegion"/>

        </local:RegionBorderControl>

    </Grid>

    <StatusBar Grid.Row="2">
        ...
    </StatusBar>

  </Grid>
</Window> 
```

用户控件 XAML：

```
<UserControl>

<Grid x:Name="GridMain">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition />
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <DockPanel Grid.Row="0" LastChildFill="False" HorizontalAlignment="Stretch" Width="Auto" >
            <ToolBar x:Name="tbToolBar" DockPanel.Dock="Left" Background="{x:Null}">
                ...
            </ToolBar>
        </DockPanel>

        <DataGrid AutoGenerateColumns="False" Grid.Row="2" Name="DataGridList" ItemsSource="{Binding MyItems}" IsReadOnly="True" CanUserResizeRows="False" SelectionMode="Single" 
                    SelectedItem="{Binding Path=SelectedDataGridRecord, Mode=TwoWay}" Style="{StaticResource DataGridDefault}" >
            <DataGrid.Columns>
                ...
            </DataGrid.Columns>
        </DataGrid>

    </Grid> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-14T02:07:30.083

You have the DataGrid in a Grid row where the RowDefinition Height is auto so the grid will be measured with an infinite height and be arranged to its DesiredSize.Height and never show scrollbars. Seems like the grid should be in row 1 or make the height of row 2 to be * instead of auto.

# c# - 将大文件上传到 sitecore 媒体库

> ID：14861340
> 
> 赞同：1
> 
> 时间：2013-02-13T19:22:24.170
> 
> 标签：c#, asp.net, .net, sitecore, sitecore-media-library

我有一个以媒体为中心的网站，要求我们将大图像、视频上传到媒体库。

我在 web.config 中有以下设置的默认设置。

1.  Media.MaxSizeInDatabase (20MB)
2.  httpRuntime maxRequestLength

出于安全原因，我不想增加生产服务器上的 MaxSizeInDatabase 限制。

此外，Media.UploadAsFiles 设置为 false。

所以，我的问题是 - 有没有办法配置 sitecore，如果上传的文件小于 20MB，它会存储在数据库中，而大于 20MB 的文件会存储在文件系统中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:52:42.713

正如 Martijn 所说，没有任何内置功能可以自动检测到这一点，但是如果您知道文件会很大（或者由于文件过大而导致上传失败），那么您可以手动“强制”将其保存到文件中每个上传的基础。

您需要使用高级上传选项并选择“上传为文件”选项。

![将项目项目上传到磁盘](../Images/69831f3b264b27ebf851ae3a8b19cb8b.png)

编辑：如果您能够使用 YouTube，请考虑与 Sitecore 很好/紧密集成的以下模块。对于不同的提供商，还有其他几种方法可以实现相同的目标。

*   [YouTube 整合](http://marketplace.sitecore.net/en/Modules/YouTube_Integration.aspx)
*   [YouTube 上传器](http://marketplace.sitecore.net/en/Modules/YouTube_Uploader.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:34:25.280

不，不是我知道的。至少不是自动的。根据您的设置，上传的文件要么存储在数据库中，要么存储在文件系统中。您可能想要创建一个覆盖上传方法，它可以自动为您处理这个问题，或者使用 Jammykam 所说的高级媒体上传方法中的手动复选框。

# ios - 为 UISegmentedControl 按钮创建单独的视图

> ID：14861345
> 
> 赞同：0
> 
> 时间：2013-02-13T19:22:39.270
> 
> 标签：ios, objective-c, view, uisegmentedcontrol

我正在努力为每个`Segmented Buttons`. 该`Segmented control`按钮位于选项卡栏控制器的其中一个视图中。我在 StoryBoard 中创建它。我已经问过同样的问题（[为分段控制按钮创建单独的视图](https://stackoverflow.com/questions/14847931/creating-separate-views-for-segmented-control-buttons)）..等待解决方案..

这是我的故事板的屏幕截图。 ![在此处输入图像描述](../Images/8bf2a55144152b11a1c8116d2aa0381f.png)

我也试过`Editor->EmbedIn->NavController`，但它与带有后退按钮的 navBar 单独显示。我还需要在同一个显示中的这 3 个视图（以及那些 NavBar 和段按钮）。

对于每个视图，我都有一些显示图像列表的功能，地图..所以我还需要在 UI 中进行设计。是否有可能根据 ParentView 大小创建新的视图控制器（如 contentPlaceHolder）..因为我需要在 ui 中设计..在此先感谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T16:24:00.503

下面的代码显示了如何在容器视图中切换控制器。在 IB 中，我从一个选项卡式模板开始，在 FirstViewController 的顶部添加了导航栏和工具栏，并将分段控件添加到工具栏。然后我在视图中添加了一个容器视图（在对象列表中的常规视图旁边），并调整它的大小以占用标签栏和工具栏之间的所有空间。我为容器视图和导航栏的标题项创建了出口，并将方法 changeControllers: 连接到分段控件。当您添加容器视图时，您会自动获得一个相同大小的视图控制器，并使用嵌入转场连接到它。我又添加了两个视图控制器，将它们的大小更改为“自由形式”，并将它们的大小调整为与嵌入式控制器 (320x411) 相同。此大小更改仅用于 IB 中的布局目的，当您将视图添加到容器时，您仍然需要在代码中调整视图大小，如下所示。这段代码在 FirstViewController 中，即带有容器视图的控制器：

```
@interface FirstViewController ()
@property (weak,nonatomic) IBOutlet UIView *containerView;
@property (strong,nonatomic) UIViewController *embeddedVC;
@property (strong,nonatomic) UIViewController *secondVC;
@property (strong,nonatomic) UIViewController *thirdVC;
@property (strong,nonatomic) UIViewController *currentController;
@property (weak,nonatomic) IBOutlet UINavigationItem *titleItem;
@end

@implementation FirstViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.embeddedVC = self.childViewControllers.lastObject;
    self.currentController = self.embeddedVC;
    self.titleItem.title = self.currentController.title;
}

-(IBAction)ChangeControllers:(UISegmentedControl *)sender {

        switch (sender.selectedSegmentIndex) {
            case 0:{
                if (![self.currentController isEqual:self.embeddedVC]) {
                    self.embeddedVC.view.frame = self.containerView.bounds;
                    [self addChildViewController:self.embeddedVC];
                    [self moveToNewController:self.embeddedVC];
                }
                break;
            }
            case 1:{
                if (! self.secondVC) {
                    self.secondVC = [self.storyboard instantiateViewControllerWithIdentifier:@"Second"];
                }
                if (![self.currentController isEqual:self.secondVC]) {
                    self.secondVC.view.frame = self.containerView.bounds;
                    [self addChildViewController:self.secondVC];
                    [self moveToNewController:self.secondVC];
                }
                break;
            }
            case 2:{
                if (! self.thirdVC) {
                    self.thirdVC = [self.storyboard instantiateViewControllerWithIdentifier:@"Third"];
                }
                if (![self.currentController isEqual:self.thirdVC]) {
                    self.thirdVC.view.frame = self.containerView.bounds;
                    [self addChildViewController:self.thirdVC];
                    [self moveToNewController:self.thirdVC];
                }
                break;
            }
            default:
                break;
        }
}

-(void)moveToNewController:(id) newController {
    [self.currentController willMoveToParentViewController:nil];
    [self transitionFromViewController:self.currentController toViewController:newController duration:.6 options:UIViewAnimationOptionTransitionFlipFromLeft animations:^{}
                            completion:^(BOOL finished) {
                                [self.currentController removeFromParentViewController];
                                [newController didMoveToParentViewController:self];
                                self.currentController = newController;
                                self.titleItem.title = self.currentController.title;
                            }];
} 
```

# objective-c - 不允许使用 NSPageController，但设置为 OS X 10.8

> ID：14861351
> 
> 赞同：1
> 
> 时间：2013-02-13T19:23:09.147
> 
> 标签：objective-c, xcode, compiler-construction

我在我的应用程序中使用 NSPageController，在 Targets -> Summary 中，部署目标设置为 10.8。

在 Targets -> Info 中，最低系统版本为`${MACOSX_DEPLOYMENT_TARGET}`

在 Targets -> Build Settings 中，OS X Deployment Target 设置为`OS X 10.8`.

在项目 -> 信息中，OS X 部署目标设置为`10.8`.

在 Projects -> Build Settings 中，Base SDK 设置为`"Latest OS X (OS X 10.8)"`. 编译器是`Apple LLVM compiler 4.2`. 和 OS X 部署目标说`OS X 10.8`。

但是，在完成所有这些之后，当我尝试构建时，我得到了`"Class Unavailable: NSPageController on OS X versions prior to 10.8"`

有任何想法吗。我试过打扫。我在 OS X 10.8.2 上，使用最新的稳定版 Xcode。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:34:09.793

另一个需要检查的地方是 nib 文件的部署版本。这让我绊倒了几次。

# php - 使用递归将 html_entity_decode 应用于对象和数组

> ID：14861354
> 
> 赞同：1
> 
> 时间：2013-02-13T19:23:14.283
> 
> 标签：php

我正在尝试构建一个将 html_entity_decode 应用于对象和数组的函数。由于我事先不知道结构，并且子属性也可以是对象或数组，所以一个简单的递归函数似乎是要走的路。我无法弄清楚为什么以下不起作用：

```
function decode($data){  
    if(is_object($data) || is_array($data)){
        foreach($data as &$value)
            $value = $this->decode($value);
    }
    else $data = html_entity_decode($data);

    return $data;
} 
```

我也尝试了以下方法，但也不起作用：

```
function decode($data){
    if(is_object($data))
        $data = get_object_vars($data);

    $data = is_array($data) ? array_map(array('MyClassName', 'decode'), $data) : html_entity_decode($data);

    return $data;
} 
```

这两个函数都对数据没有任何影响。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T21:27:17.390

主要问题是您尝试使用像数组`is_object($data) || is_array($data)`这样的对象不会真正起作用，除非您将其转换`object`为`array`

其他问题是基于不正确的变量名并且没有返回正确的变量您可以尝试

```
$std = new stdClass();
$std->title = array("x" => "<a>XXX</a>","y" => "<b>YYY</b>");
$std->body = "<p> THis is the Body </p>";

$var = array(
        "a" => "I'll \"walk\" the <b>dog</b> now",
        "b" => array("<b>Hello World</b>",array(array("Yes am <strong> baba </strong>"))),
        "c" => $std

);

$class = new MyClassName();
$encode = $class->encode($var); // encode 
$decode = $class->decode($encode);  // decode it back

print_r($encode);
print_r($decode); 
```

**编码数组**

```
Array
(
    [a] => I'll &quot;walk&quot; the &lt;b&gt;dog&lt;/b&gt; now
    [b] => Array
        (
            [0] => &lt;b&gt;Hello World&lt;/b&gt;
            [1] => Array
                (
                    [0] => Array
                        (
                            [0] => Yes am &lt;strong&gt; baba &lt;/strong&gt;
                        )

                )

        )

    [c] => stdClass Object
        (
            [title] => Array
                (
                    [x] => &lt;a&gt;XXX&lt;/a&gt;
                    [y] => &lt;b&gt;YYY&lt;/b&gt;
                )

            [body] => &lt;p&gt; THis is the Body &lt;/p&gt;
        )

) 
```

**解码数组**

```
Array
(
    [a] => I'll "walk" the <b>dog</b> now
    [b] => Array
        (
            [0] => <b>Hello World</b>
            [1] => Array
                (
                    [0] => Array
                        (
                            [0] => Yes am <strong> baba </strong>
                        )

                )

        )

    [c] => stdClass Object
        (
            [title] => Array
                (
                    [x] => <a>XXX</a>
                    [y] => <b>YYY</b>
                )

            [body] => <p> THis is the Body </p>
        )

) 
```

[观看现场演示](http://eval.in/11303)

```
class MyClassName {
    function encode($data) {
        if (is_array($data)) {
            return array_map(array($this,'encode'), $data);
        }
        if (is_object($data)) {
            $tmp = clone $data; // avoid modifing original object
            foreach ( $data as $k => $var )
                $tmp->{$k} = $this->encode($var);
            return $tmp;
        }
        return htmlentities($data);
    }

    function decode($data) {
        if (is_array($data)) {
            return array_map(array($this,'decode'), $data);
        }
        if (is_object($data)) {
            $tmp = clone $data; // avoid modifing original object
            foreach ( $data as $k => $var )
                $tmp->{$k} = $this->decode($var);
            return $tmp;
        }
        return html_entity_decode($data);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T01:43:12.267

您到底想做什么：用 html 实体解码值替换现有值或使用编码值复制整个数据结构？

如果要替换，则应通过引用传递函数参数：

```
function decode( &$data ){ 
```

如果您想复制 - 它应该按原样工作（或者请解释“以下内容不起作用”的确切含义）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:42:37.157

array-walk-recursive 怎么样：http: [//php.net/manual/en/function.array-walk-recursive.php](http://php.net/manual/en/function.array-walk-recursive.php) 可能是这样的：

```
function decode($data){  
    $data = html_entity_decode($data);
}
function decode_data($data){
    if(is_object($data) || is_array($data)){
       array_walk_recursive($data, 'decode');
    }else{
       $data = html_entity_decode($data);
    }
    return $data;
} 
```

# c# - 用值填充下拉列表

> ID：14861356
> 
> 赞同：2
> 
> 时间：2013-02-13T19:23:19.707
> 
> 标签：c#, asp.net-mvc, drop-down-menu, html.dropdownlistfor

我是 MVC 的初学者，正在尝试`DropDownListFor`用值填充标签。

以下是我现在发现的内容，对我构建代码有所帮助：

[http://forums.asp.net/t/1705047.aspx/1](http://forums.asp.net/t/1705047.aspx/1)

所以在我的控制器中现在有 2 个类，主类`(ObjController : Controller)`和我按照上面的例子组成的另一个类。

另一个类如下所示：

```
public class ItemCostViewModel
{
    public int Id { get; set; }

    [Required]
    [Display(Name = "Item Cost :")]
    public string ItemCostCode { get; set; }

    public IEnumerable<ItemCostViewModel> GetItemCosts()
    {
        return new List<ItemCostViewModel>
        {
            new ItemCostViewModel() {Id = 1, ItemCostCode = "One"},
            new ItemCostViewModel() {Id = 2, ItemCostCode = "Two"},
            new ItemCostViewModel() {Id = 3, ItemCostCode = "Three"},
            new ItemCostViewModel() {Id = 4, ItemCostCode = "Four"},
            new ItemCostViewModel() {Id = 5, ItemCostCode = "Five"},
            new ItemCostViewModel() {Id = 6, ItemCostCode = "Six"}
        };
    }
} 
```

所以这里的目标是`DropDownListFor`用显示“One”的值填充 a，但我可以从中引用控制器代码中的 id。我的想法是，如果用户选择“一”，我会得到一个整数值 1，我可以相应地对待它。

我在**.cshtlm**视图中尝试了这行代码：

```
@Html.DropDownListFor(m => m.ItemCostCode , new SelectList(new Project1.Controllers.ItemCostViewModel().GetItemCosts(), "Id", "ItemCostCode")) 
```

但可悲的是它引发了崩溃，因为`ItemCostCode`它不在控制器中：

```
Compiler Error Message: CS1061:'System.Collections.Generic.IEnumerable<Project1.Models.ObjectInfo>' does not containt a definition for "ItemCostCode" (...) 
```

我很困惑，我不确定我现在在做什么，以及如何做。任何人都可以帮我解释什么是错的，和/或如何纠正它？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:58:10.310

好吧，最后，我必须承认你们都是对的。

这是我所做的，比我正在做的代码简单得多：

在我的控制器中，我创建了一个我归因于`ViewBag`这样的字典：

```
Dictionary<string, int> dictObjCost = new Dictionary<string, int>
            {
                {"One", 1},
                {"Two", 2},
                {"Three", 3},
                {"Four", 4},
                {"Five", 5},
                {"Six", 6}
            };

            ViewBag.itemCostValue = new SelectList(dictObjCost, "Value", "Key"); 
```

并且在`.cshtml`：

```
Item Cost : @Html.DropDownList("itemCostValue ", String.Empty) 
```

所以现在我的值显示为“一”、“二”等。

当我得到视图时，我传递了 ' `int? itemCostValue`' 参数并且一切正常。

谢谢大家让我意识到我在做什么:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:46:54.163

以下是我建议您解决问题的方法：

1）将该方法的签名更改`GetItemCosts()`为返回一个列表。无论如何，您正在这样做，并且在后续步骤中会更容易。

2）在您的控制器中设置以下内容（使用您所做的任何调用`GetItemCosts()`）：

```
var itemCodeList = new List<DropDownItem>();

GetItemCosts().ForEach(ic => itemCodeList.Add(new DropDownItem { Value = ic.ID, Text = ic.ItemCostCode} );

ViewData["ItemCodes"] = itemCodeList; 
```

3) 您的视图中的行现在应该如下所示：

```
@Html.DropDownListFor(m => m.ItemCostCode , ((IEnumerable<DropDownItem)(ViewData["ItemCodes"]))) 
```

# android - Eclipse 没有检测到我的手机？

> ID：14861357
> 
> 赞同：1
> 
> 时间：2013-02-13T19:23:20.253
> 
> 标签：android

我在 Eclipse 中安装了 Google Services v2，并在应用程序中创建了一个简单的主要活动。我按照[http://developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)中的所有说明进行操作，没有出现错误。

但是当我运行应用程序时，我在控制台中看到了以下内容：

```
Android Launch!
adb is running normally.
Performing es.mapas.Principal activity launch
Application already deployed. No need to reinstall.
Starting activity es.mapas.Principal on device LGOTMS1a1ca6c
ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=es.mapas/.Principal } 
```

所以这意味着 Eclipse 认出了我的 LG 手机。但是当我点击 Android Virtual Manager 图标时，我只看到了我构建的虚拟设备，但没有看到关于我手机的任何内容。Eclipse 检测到我的手机了吗？

运行我手机的应用程序后，我没有看到地图。

谢谢。

# javascript - nextSibling 返回 null

> ID：14861360
> 
> 赞同：0
> 
> 时间：2013-02-13T19:23:22.037
> 
> 标签：javascript, jquery, dom, html

我收到一条错误消息，说“ *this.nextSiblingElement.id is null* ”，显然我已经为生成的元素设置了 ID。我承认仍然可以使用一些工作。我只是好奇 nextSiblingElement 的 ID 被返回为 null 的原因是什么。我确保前一个元素是在下拉菜单之前生成的，并且该菜单使用 previousChild.appendChild 放置在它*之前*。

如有必要，我可以编辑代码，但我不确定要显示多少才有意义。我只显示相关功能如下：

```
//helper function to add elements to the form
function createNewFormElement(inputForm, feildName, elementName, elementValue, elementType){

var inputString = String(feildName + ": <input name='" + elementName + "' type='" + elementType + "' /> ");
var newElement = document.createElement('div');

newElement.style.display = 'inline';

if (feildName == "Quantity" && containerType != "Box/Bag"){
    newElement.style.visibility = 'hidden';
}else{
    newElement.style.visibility = 'visible';
}
if (feildName == "Quantity"){
    newElement.id = "boxhide"+counter;
}else{
    newElement.id = 'dynamicInput';
}

newElement.innerHTML = inputString;

newElement.value = elementValue;
document.getElementById(inputForm.id).parentNode.appendChild(newElement);

return newElement;

}

//helper function to add dropdown
function createNewDropDown(inputForm, feildName, elementName){

    var dropDown, arValue;
    var newElement = document.createElement('div');

    newElement.id = 'dynamicInput';
    newElement.style.display = 'inline';

    dropDown = "<option value='" + containerType + "' selected>" + containerType + "</option>";

    for (i=0; i<conArray.length; i++){
        arValue = conArray[i];
        dropDown = dropDown + "<option value='" + arValue + "'>" + arValue + "</option>";
    }

    var inputString = String(feildName + ": <select onchange='switchMain(this.nextElementSibling.id);' name='" + elementName + "' id='" + elementName + "'>" + dropDown + "</select> ");

    newElement.innerHTML = inputString;
    document.getElementById(inputForm.id).parentNode.lastChild.previousSibling.appendChild(newElement);

    return newElement;
}
function getStyle(divName){

var temp = document.getElementById(divName).style.visibility;

return temp;
}

function switchMain(divName){

var e = document.getElementById("myContainers[]");
var strUser = e.options[e.selectedIndex].value;

if (strUser == "Box/Bag"){

    var current = getStyle(divName);

    //console.debug(current);

    document.getElementById(divName).style.visibility = "visible";
}else{
    document.getElementById(divName).style.visibility = "hidden";
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:36:42.130

你有一个`inputString`喜欢

```
"… <select onchange='switchMain(this.nextElementSibling.id);' …&gt;…&lt;/select> " 
```

现在，如果你执行

```
newElement.innerHTML = inputString; 
```

您不能期望 select 元素有任何兄弟元素 - 它是 : 内的唯一（元素）节点`newElement`：

```
<div …&gt; … <select onchange='switchMain(this.nextElementSibling.id);' …&gt;…&lt;/select> </div> 
```

因此，`this.nextElementSibling`will be`null`并且您在尝试获取其`id`属性时会遇到异常。

> 我确保前一个元素是在下拉菜单之前生成的，并且该菜单与 previousChild.appendChild 一起放置在它之前。

不，`appendChild`总是在最后插入新节点——不管新父节点在 DOM 中的位置。如果要在特殊位置插入元素，请使用[`insertBefore`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore).

# java - 如何将迷你信息添加到 Eclipse 项目文件夹？

> ID：14861363
> 
> 赞同：3
> 
> 时间：2013-02-13T19:23:43.690
> 
> 标签：java, android, eclipse

如您所见，在 Eclipse 中我创建了一个新的 Android 项目，然后我注意到了一件好事。 **gen**文件夹有一个关于其用途的迷你信息。*见红色区域。*

1.  我可以手动将此类信息添加到其他文件夹吗？如果是，如何？

2.  第二个问题是，如果我们做不到，自动生成的项目怎么做？

![日食项目](../Images/96df9d837e9e404367ff85269d806778.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:27:36.990

你不能（以一种简单的方式）。您必须编写自己的 Eclipse 插件才能做到这一点。查看[本教程](http://www.vogella.com/articles/EclipsePlugIn/article.html)以了解如何操作。

# ios - 跟踪 iOS 应用程序在后台运行的时间

> ID：14861370
> 
> 赞同：0
> 
> 时间：2013-02-13T19:24:16.353
> 
> 标签：ios, objective-c, appdelegate

有没有办法跟踪应用程序在后台的时间量，并在应用程序在 iOS 中进入前台时显示相同的时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T19:27:43.227

一种简单的方法是将日期保存到应用程序委托`applicationDidEnterBackground:`方法中的 NSUserDefaults 中，然后将默认日期的日期与`applicationWillEnterForeground:`方法中的当前日期进行比较。这对你有用吗？

# objective-c - 不确定的 NSProgressIndicator 不会设置动画

> ID：14861373
> 
> 赞同：9
> 
> 时间：2013-02-13T19:24:25.253
> 
> 标签：objective-c, animation, ibaction, nsprogressindicator

所以我有一个简单的用户界面、一个开始按钮、一些文本/标签和一个进度条。单击“开始”按钮时，NSProgressIndicator**应该**动画。这是我的代码：

```
@synthesize progressBar = progressBar;
 /* Some code and setup stuffs... */
- (IBAction)startAction:(id)sender {
    NSLog(@"Button clicked.");
    NSLog(@"Beginning Socketry and socket creation...");
    [progressBar setUsesThreadedAnimation:YES];
    [progressBar setIndeterminate:YES];
    [progressBar startAnimation:progressBar];
} 
```

我检查了多个来源（Apple Developer Portal 等），但没有任何效果。我不必拥有 NSPIndicator，但如果可以的话，那就太好了。另外，这是我的 AppDelegate.h 文件：

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;

@property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
@property (weak) IBOutlet NSProgressIndicator *progressBar;
- (IBAction)saveAction:(id)sender;

- (IBAction)startAction:(id)sender;

- (IBAction)changeStatus:(id)sender;

- (IBAction)changeProgress:(id)sender;

@end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-06-12T10:35:58.327

进入 Progress Indicator 的 Attributes Inspector，如下图所示进行设置：

![在此处输入图像描述](../Images/8e1453f4cbea1299931f4bb0408ecbcf.png)

请参见下面的代码：

```
@synthesize progressBar;
- (IBAction)startAction:(id)sender {
    [progressBar setHidden:NO];
    [progressBar setIndeterminate:YES];
    [progressBar setUsesThreadedAnimation:YES];
    [progressBar startAnimation:nil];
} 
```

# php - PHP for 循环优化

> ID：14861377
> 
> 赞同：0
> 
> 时间：2013-02-13T19:24:33.127
> 
> 标签：php, optimization

我已经阅读了一些可以`for`在 PHP 中使用循环进行的不同优化，并想评估您对此的看法：

```
for ($x = 0; $x < 50000000; ++$x) {
} 
```

在这个基本示例中，我还能做些什么来加快速度？Zend Optimizer 会帮助处理如此基本的事情吗？我知道这看起来很傻，不是一个真正的用例，但它对我来说特别感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T19:34:36.240

您的循环目前绝对*没有*做任何事情，因此它已尽可能优化。您需要担心循环*内部*发生了什么，而不是应该优化语言结构。

可以给出的“优化”`for`循环声明的唯一建议是避免`count()`在比较中使用类似函数的东西，因为它可能会被不必要地重新评估 5000 万次。IE：

```
$count = count($hugeArray);
for( $i=0; $i<$count; $i++ ) {
  //actual code
} 
```

否则，您应该更***关心***循环内的代码。您的循环中是否还有其他循环？递归调用？阻塞/锁定操作？与每天使用几十个额外的时钟周期相比，简化`{`和之间的代码`}`将为您***带来***更好的回报。`for`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:33:31.150

专注于可读可维护的代码。微优化通常是一件坏事，因为它会导致代码不可读。查看 Jeff Atwood（stackexchange 联合创始人）对此有何评论：http: [//www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html](http://www.codinghorror.com/blog/2009/01/the-sad-tragedy-of-micro-optimization-theater.html)

# haskell - 标准的 Haskell 类型类应该遵守哪些法律？

> ID：14861379
> 
> 赞同：9
> 
> 时间：2013-02-13T19:24:40.493
> 
> 标签：haskell, interface, proof

众所周知，`Monad`实例应该遵循单子定律。`Functor`实例应该遵循函子定律可能不太为人所知。尽管如此，我对编写优化`fmap id == id`.

还有哪些其他标准类有隐含的法律？`(==)`必须是真正的等价关系吗？`Ord`一定要形成偏序吗？总订单？我们至少可以假设它是传递的吗？反对称？

最后几个似乎没有在 Haskell 2010 报告中指定，我也没有信心利用它们编写重写规则。但是，是否有任何通用库可以做到？一个人可以自信地写出一个多么病态的例子？

最后，假设这样一个实例的病态程度是有界限的，每个类型类实例必须遵守的法律是否有一个标准的、全面的资源？

* * *

例如，我要定义多少麻烦

```
newtype Doh = Doh Bool
instance Eq Doh where a == (Doh b) = b 
```

仅仅是难以理解还是编译器会在任何地方错误地优化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T11:06:26.750

[Haskell 报告](http://www.haskell.org/onlinereport/haskell2010/)提到了以下法律：

*   函子（例如`fmap id == id`）
*   单子（例如`m >>= return == m`）
*   积分（例如`(x ‘quot‘ y)*y + (x ‘rem‘ y) == x`）
*   数 ( `abs x * signum x == x`)
*   显示 ( `showsPrec d x r ++ s == showsPrec d x (r ++ s)`)
*   九（例如`inRange (l,u) i == elem i (range (l,u))`）

这就是我能找到的。具体来说，关于 Eq (6.3.1) 的部分没有提到任何定律，下一个关于 Ord 的部分也没有提到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T20:19:14.750

并非所有标准实例都支持我对法律“应该是”的看法，但我认为

*   `Eq`应该是等价关系。
*   `Ord`应该是一个总订单
*   `Num`应该是一个环，具有`fromInteger`环同态，并且`abs`/`signum`以明显的方式表现。

许多代码将假定这些“法律”成立，即使它们不成立。这不是 Haskell 特定的问题，早期的 C 允许编译器根据代数定律重新排序算术，并且大多数编译器可以选择重新启用这种优化，即使它们不受当前标准的允许并且可能会改变您的程序结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T19:23:46.583

过去，违反 Ix 定律会让你做任何事情。这些天我认为他们已经解决了这个问题。更多信息在这里：[有谁知道（或记得）违反阶级法会如何导致 GHC 出现问题？](https://stackoverflow.com/questions/6970383/does-anyone-know-or-remember-how-breaking-class-laws-could-cause-problems-in-g)

# image-processing - 双三次插值如何处理 MRI 数据？

> ID：14861380
> 
> 赞同：1
> 
> 时间：2013-02-13T19:24:42.443
> 
> 标签：image-processing, interpolation, medical, linear-interpolation, bicubic

我正在尝试将切片添加到一堆 MRI 图像中。我通过将每个新切片计算为直接顶部和底部切片的平均值来进行线性插值。所以在做双三次时，我是否只使用 2 个直接顶部和底部切片来估计新切片？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T06:01:44.090

在双三次插值中，您必须考虑 16 个相邻像素。最好的方法是在 MATLAB 中使用 imresize 函数

# ruby-on-rails - 如何通过外部 RESTful 调用插入 RAILS db

> ID：14861386
> 
> 赞同：0
> 
> 时间：2013-02-13T19:24:50.533
> 
> 标签：ruby-on-rails, rest, curl

已解决：我做错了一些事情，所有这些都涉及我的控制器接收数据。以下发送数据的方法没有任何问题。

1：我没有在我的 reportController#create 中使用@report.save

2：我没有在我的控制器中传递 params[:report]

3：我将“skip_before_filter：verify_authenticity_token”添加到我的应用程序控制器以停止日志中的警告。解决了。数据插入成功。

=====ORIG。下面的问题=====

我需要一个外部程序来发出将内容插入 Ruby on Rails 数据库的命令。我理解这对安全的影响，但因为这个应用程序不是面向公众的，所以这不是一个真正的问题。

这是我希望实现的工作流程：

REST 客户端 > RAILS > 创建新的 DB TABLE 行

举例来说：我的 route.rb 文件包含

```
resources :reports 
```

所以我能够使用这些路线进行 CRUD。我似乎无法让我的休息客户正常工作。

更新：我在 ONE 中尝试了一个 RUBY 休息客户端和 curl 命令，但无济于事。

```
require 'rest_client'
require 'json'

hash_to_send = {:test_name => 'Fake Name', :pass_fail => 'pass',:run_id => 1111, :category => 'Fake Category'}

#formulate CURL attempt
myCommand =  "curl -H 'Content-Type: application/json' -X POST   http://localhost:8889/report.json -d #{hash_to_send.to_json} > deleteme.html"
#execute CURL attempt
`#{myCommand}` # RESULT--> 795: unexpected token at 'test_name:Fake Name'

#Make Ruby rest client attempt
response = RestClient.post( "http://localhost:8889/report.json", 
  hash_to_send.to_json, 
  :content_type => :json, :accept => :json
)

#debug info 
puts myCommand # Returns --> {"test_name":"Fake Name","pass_fail":"pass","run_id":1111,"category":"Fake Category"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:35:00.533

代替命令行中的 curl，使用 ruby​​ 脚本并通过 gems 处理 REST 调用和 JSON 转换。例如，使用`rest-client`gem ( [https://github.com/archiloque/rest-client](https://github.com/archiloque/rest-client) ) 和标准`json`gem，您可以编写：

```
require 'rest_client'
require 'json'

response = RestClient.post( "http://localhost:8889/report.json", 
  params_in_hash.to_json, 
  { :content_type => :json, :accept => :json }
) 
```

# jquery - 以json格式从colorbox中获取数据

> ID：14861390
> 
> 赞同：0
> 
> 时间：2013-02-13T19:25:01.893
> 
> 标签：jquery, json, colorbox

我对 Jquery 很陌生，而 colorobox 很特别。我正在使用以下内容打开颜色框：

```
jQuery().colorbox({
        href: 'http://example.com#oslc-core-postMessage-1.0',
        iframe:true,
        width:"1100px",
        height:"80%"
    }); 
```

在颜色框中提交信息后，如果我使用 iframe，我会得到以下信息：

```
{"oslc_cm:message":"oslc_cm:create","oslc_cm:results":[{"oslc_cm:label":"TA41071:Test", "rdf:resource":"https://example.com/TA41071"}]} 
```

问题是：如何从颜色框中获取 json 值？现在颜色框只是保持打开，空白，没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:55:28.600

我可以通过执行以下操作来获取 json：

```
function createListener()
{
window.addEventListener('message', 
  function (event) {
  try { 
    jQuery().colorbox.close();
    var message = event.data;
    if (message.indexOf("oslc-response:")>-1) {
      message=message.substring(14);
    } else {
      alert('Error. return message should start with "oslc-response:".');
      return;
    }
    handleMessage(message);
  } catch (e) {
     // ignore: access exception when trying to access window name
  }
  }
, false );
}

( function($) 
{
$(document).bind('cbox_load', createListener());        
} ) ( jQuery ); 
```

# joomla - Joomla 2.5 自定义表单字段类型

> ID：14861391
> 
> 赞同：1
> 
> 时间：2013-02-13T19:25:02.957
> 
> 标签：joomla, joomla2.5, joomla-extensions

我正在开发 Joomla 组件，我需要在管理区域中自定义表单字段类型（Joomla 2.5），但我有问题......它只是不起作用。这是我到目前为止所做的：

文件：/administrator/components/com_mycomponent/models/forms/history.xml

```
<form>

    <fields addfieldpath="/administrator/components/com_mycomponent/models/fields">

        <field
            name="id"
            type="hidden"
            default="0"
            required="true"
            readonly="true"/>                           

        <field 
            id="someid" 
            name="someid" 
            type="City" 
            label="City"
            description="Choose City"
            required="true" />

    </fields>   

</form> 
```

文件：/administrator/components/com_mycomponent/models/fields/history.php

```
<?php
defined('_JEXEC') or die('Restricted access');

jimport('joomla.form.formfield');

class JFormFieldCity extends JFormField {

        protected $type = 'City';

        // getLabel() left out

        public function getInput() {

            return '<select id="'.$this->id.'" name="'.$this->name.'">  <option value="1">City 1</option> </select>';
        }
} 
```

这就是我所改变的。我使用本教程：[http](http://docs.joomla.org/Creating_a_custom_form_field_type) ://docs.joomla.org/Creating_a_custom_form_field_type （它适用于 Joomla 1.6，我找不到任何“新鲜”的东西）。有人可以告诉我我是否需要更多的代码或者这段代码有问题吗？

编辑：我忘了提到这段代码只输出输入字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:13:38.400

似乎该文件应该命名为 city.php，而不是 history.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:22:58.620

已解决：我使用此功能而不是添加自定义表单字段：[http ://docs.joomla.org/SQL_form_field_type](http://docs.joomla.org/SQL_form_field_type)

# jquery - ajax在调用WEB SERVICE时返回UNDEFINED，甚至webservice也没有被调用

> ID：14861392
> 
> 赞同：0
> 
> 时间：2013-02-13T19:25:05.060
> 
> 标签：jquery, html, web-services

我正在使用 ajax 调用网络服务。servcie 接受 2 个参数并以 JSON 格式返回数据。

但是当我调用 webservice 时，它​​不会被调用。警报抛出异常 UNDEFINED

我不知道为什么会这样。整个html代码如下。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
<meta content="utf-8" http-equiv="encoding">
<title>Decision Maker</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript">

$(document).ready(function () {
$("#SayHello").click(function (e) {

$.ajax({
type: "POST",
data: "{'userName':'5021','Password':'35A3C84D'}",
url: "http://www.iclinic247.com/authenticateusers.asmx/LoggedUserAuthentication",
contentType: 'application/json; charset=utf-8',
dataType: "json",
success:
function (data) {
alert('Success');
alert(data);
},
error:
function (XMLHttpRequest, textStatus, errorThrown) {
alert('Fail');
alert(errorThrown);
}
});
});
});

</script>
</head>
<body>
<input id="name" /><a id="SayHello" href="#">Greetings!</a>
</body>
</html> 
```

谁能告诉我是什么问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:57:38.683

如果您可以在 Firefox 中使用 Firebug 控制台或`F12`在 Chrome 中使用开发者选项控制台（通过使用密钥），那么您可能会收到如下错误消息：

```
Failed to load resource: the server responded with a status of 404 (Not Found)
XMLHttpRequest cannot load http://www.iclinic247.com/authenticateusers.asmx/LoggedUserAuthentication. Origin null is not allowed by Access-Control-Allow-Origin. 
```

所以基本上，服务器端的问题和你的这部分前端代码是正确的。`404`所以要么你有一个拼写错误的网址，要么这里告诉我们的其他东西很傻。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:38:34.200

****在与我的前辈****讨论**了这个问题后，我才知道**问题是**由于**CROSS-DOMAIN CALLING**造成的。**

 ***我*通过将我的服务设为 RESTFUL 服务（即我的服务的 API）****解决了这个问题。******

# ember.js - Ember 中排序表的路由和控制器

> ID：14861405
> 
> 赞同：3
> 
> 时间：2013-02-13T19:25:26.340
> 
> 标签：ember.js, ember-data

我正在开发的一个应用程序包括一个用户模型，并且用户有分数。我正在尝试创建一个“排行榜”页面，该页面将根据用户的分数对用户进行排名。我预计会有成千上万的人使用该应用程序，因此我希望通过三种方式查看排名：

1.  仅列出前 100 名用户的前100**名视图。**
2.  A **You**视图列出了您上方的 10 个人，然后是您，然后是您下方的 10 个人。
3.  显示您和您的朋友的**朋友视图。**

我不确定在 Ember 中解决此问题的“最佳”方法是什么。到目前为止，我的尝试似乎是在重复很多代码和/或把东西放在错误的地方。这是我的代码：

路线：

```
App.Router.map(function() {
  this.resource('leaderboard', function() {
    this.route('you', { path: '/' });
    this.route('friends');
    this.route('top');
  });
});

App.LeaderboardYouRoute = Ember.Route.extend({
  model: function() {
    var users = App.store.find(App.User);
    // TODO: sort users by descending score
    // TODO: filter out users with an index too far from the user's
    return users;
  }
});

App.LeaderboardFriendsRoute = Ember.Route.extend({
  model: function() {
    var users = App.store.find(App.User);
    // TODO: sort users by descending score and filter out non-friends
    return users;
  }
});

App.LeaderboardTopRoute = Ember.Route.extend({
  model: function() {
    var users = App.store.find(App.User);
    // TODO: sort users by descending score and take the top 100
    return users;
  }
}); 
```

排行榜.车把：

```
<section id="leaderboard">
  <nav>
    <ul>
      <li>{{#linkTo "leaderboard.you"}}You{{/linkTo}}</li>
      <li>{{#linkTo "leaderboard.friends"}}Friends{{/linkTo}}</li>
      <li>{{#linkTo "leaderboard.top"}}Top 100{{/linkTo}}</li>
    </ul>
  </nav>
  {{ outlet }}
</section> 
```

leaderboard_top.handlebars、leaderboard_you.handlebars、leaderboard_friends.handlebars：

```
{{#each user in model}}
  <li data-user-id="">
    <span class="score">{{ user.score }}</span>
    <div class="photo"></div>
    <span class="name">{{ user.name }}</span>
    <div class="clearboth"></div>
  </li>
{{/each}} 
```

对我来说，拥有三个具有完全相同代码的不同模板似乎是多余的。类似地，我将不得不编写许多基本相同的代码，即“按降分对用户进行排序”。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:57:56.700

您可以轻松地为不同的控制器/视图使用相同的模板。使用哪个模板，可以在视图中定义。例子：

```
ExampleView = Ember.View.extend({
  templateName : "theSameTemplateAgainAndAgain"
}); 
```

hth, ph

**更新**

正如该答案的前两条评论所指出的那样，如果根本不使用视图，解决方案可能仍会得到改进。定义要直接在 Route 上渲染的模板，如下所示。

```
App.ExampleRoute = Ember.Route.extend({
  renderTemplate: function() {
    this.render('theSameTemplateAgainAndAgain');
  } 
}); 
```

# python - matplotlib.axes.AxesSubplot 的类定义在哪里？

> ID：14861407
> 
> 赞同：1
> 
> 时间：2013-02-13T19:25:43.670
> 
> 标签：python, class, matplotlib

matplotlib 轴的类是`AxesSubplot`：

```
In [233]: type(gca())
Out[233]: matplotlib.axes.AxesSubplot 
```

然而这个名字似乎并不存在：

```
In [235]: import matplotlib.axes

In [236]: matplotlib.axes.AxesSubplot
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-236-d2888d8fac12> in <module>()
----> 1 matplotlib.axes.AxesSubplot

AttributeError: 'module' object has no attribute 'AxesSubplot'
2
In [237]: from matplotlib.axes import AxesSubplot
---------------------------------------------------------------------------
ImportError                               Traceback (most recent call last)
<ipython-input-237-86d07b77aa8f> in <module>()
----> 1 from matplotlib.axes import AxesSubplot

ImportError: cannot import name AxesSubplot 
```

它不是使用`type()`任何一个花哨的调用创建的；至少，`grep AxesSubplot`不会在模块的模块源文件中返回任何结果`axes`。

如果我查看它的 mro，我可以访问所有其他类的定义：

```
In [238]: type(gca()).mro()
Out[238]: 
[matplotlib.axes.AxesSubplot,
 matplotlib.axes.SubplotBase,
 matplotlib.axes.Axes,
 matplotlib.artist.Artist,
 builtins.object] 
```

怎么可能`type(gca())`报告`matplotlib.axes.AxesSubplot`，但这个类似乎不存在？

我在 Python 3.2、Matplotlib 1.2 上，以防万一。

# javascript - 将固定元素的位置更改为单击点

> ID：14861409
> 
> 赞同：1
> 
> 时间：2013-02-13T19:25:52.747
> 
> 标签：javascript, jquery

我正在尝试为我的一些链接创建一个弹出窗口`(.aj_load)` 这是我的代码

```
$('.aj_load').live('click' , function(e){

    $('#aj_popup').remove(); // delete old popups 
    var x = e.pageX ; 
    var y = e.pageY ;

    var template = '<div class="popup"  id="aj_popup" style="display:none">'+
            '<div class="main"><span class="msg"></span>'+
            '<a href="javascript:void(0)" class="attach" onclick="slideup();"></a>'+
            '<br style="clear:both;" /></div></div>' ;

    $('body').append(template);
    $('#aj_popup').css('left' , x ).css('top' , y ).fadeIn();
    return false;
}) 
```

所以它工作正常，只是它没有出现在我点击的地方。我应该如何定位？这是弹出窗口的css

```
.popup {
    background:#333;
    color:#333;
    border-radius:4px;
    padding:8px;
    position:fixed;
    display:block;
    text-align:center;
    box-shadow:0 0 7px rgba(0,0,0,0.6);
    z-index:3000;
    opacity: .95;
    filter: alpha(opacity=95);
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=95)";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:32:53.760

您可能可以将 CSS 编写为键值对，然后看看效果如何。寻找萤火虫应该会有所帮助

```
$('#aj_popup').css({
       'left':'x',
       'top': 'y'

}).fadeIn(); 
```

# ruby-on-rails - Heroku 运行迁移，但仍然无法识别该列

> ID：14861410
> 
> 赞同：1
> 
> 时间：2013-02-13T19:25:54.093
> 
> 标签：ruby-on-rails, heroku, migration

这是我的观点，问题发生在哪里：

```
<div class="row" style="margin-top:10%;">
    <div class="four columns"></div>
    <div class="four columns">      
        <div class="panel">
            <h2>Criar conta</h2>
            <%= simple_form_for resource, :as => resource_name, :url => registration_path(resource_name), defaults: { error_html: { class: 'alert label' } } do |f| %>
                <div><%= f.input :name, :autofocus => true, :placeholder => "Nome", label: false %></div>
                <div><%= f.input :email, :placeholder => "E-mail", label: false  %></div>
                <div><%= f.input :password, :placeholder => "Senha", label: false  %></div>
                <div><%= f.input :password_confirmation, :placeholder => "Confirme sua senha", label: false  %></div>
                <div align="center">
                    <%= f.submit "Cadastrar", :class => "button success" %>
                </div>
            <% end %>
            <p><%= link_to "Já tenho conta", new_session_path(resource_name) %></p>
        </div>
    </div>
    <div class="four columns" style="margin-top:10%;"></div>
</div> 
```

这是错误消息：

```
ActionView::Template::Error (undefined method `name' for #<User:0x00000003ecda80>):
2013-02-13T18:40:43+00:00 app[web.1]:     4:        <div class="panel">
2013-02-13T18:40:43+00:00 app[web.1]:     5:            <h2>Criar conta</h2>
2013-02-13T18:40:43+00:00 app[web.1]:     6:            <%= simple_form_for resource, :as => resource_name, :url => registration_path(resource_name), defaults: { error_html: { class: 'alert label' } } do |f| %>
2013-02-13T18:40:43+00:00 app[web.1]:     7:                <div><%= f.input :name, :autofocus => true, :placeholder => "Nome", label: false %></div>
2013-02-13T18:40:43+00:00 app[web.1]:     8:                <div><%= f.input :email, :placeholder => "E-mail", label: false  %></div>
2013-02-13T18:40:43+00:00 app[web.1]:     9:                <div><%= f.input :password, :placeholder => "Senha", label: false  %></div>
2013-02-13T18:40:43+00:00 app[web.1]:     10:               <div><%= f.input :password_confirmation, :placeholder => "Confirme sua senha", label: false  %></div>
2013-02-13T18:40:43+00:00 app[web.1]:   app/views/devise/registrations/new.html.erb:7:in `block in _app_views_devise_registrations_new_html_erb___2903664484468264557_32844520'
2013-02-13T18:40:43+00:00 app[web.1]:   app/views/devise/registrations/new.html.erb:6:in `_app_views_devise_registrations_new_html_erb___2903664484468264557_32844520'
2013-02-13T18:40:43+00:00 app[web.1]: 
2013-02-13T18:40:43+00:00 app[web.1]: 
```

这是 Heroku (pg:psql) 表的一部分，以确保创建了该列：

```
name                   | character varying(255)      | 
 status                 | boolean                     | 
 confirmed_at           | timestamp without time zone | 
 confirmation_token     | character varying(255)      | 
 confirmation_sent_at   | timestamp without time zone | 
```

我跑`rake db:version`

**赫罗库：20130213174735**

**本地：20130213174735**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:40:36.443

完成 a 后，`heroku run rake db:migrate`您需要执行 a`heroku restart`以便 Rails 重新缓存 activerecord 结构。

# xcode4.5 - 按钮中的 xCode 缺少文本的 Stange 行为

> ID：14861413
> 
> 赞同：0
> 
> 时间：2013-02-13T19:26:06.083
> 
> 标签：xcode4.5

我遇到了一个我以前从未遇到过的新的和奇怪的问题。按钮上的文字消失了。我已经更改了 2 个按钮。现在问题从第三个按钮开始。如下图所示： ![应用程序和 xCode 预览](../Images/b184a2b35c0e4790670c173103662025.png)

如果这是奇怪的行为，或者我正在做一些我不应该做的事情，谁能帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:33:59.920

将一些按钮移动到滚动视图后，我遇到了类似的问题。我尝试了一些东西，但最简单的就是重新创建按钮。

其他人也有同样的问题，这也是他们采取的方法。

[XCode 4：一些按钮标题在 iOS 模拟中不可见](https://stackoverflow.com/questions/12759798/xcode-4-some-button-titles-not-visible-in-ios-simulation/13589965#13589965)

# networking - RIP- 数到无穷

> ID：14861415
> 
> 赞同：1
> 
> 时间：2013-02-13T19:26:08.137
> 
> 标签：networking, routing, router

我在理解 RIP 的无穷大时遇到问题。

我了解最初是如何使用距离向量设置表格的。但是当链接中断时，必须重新计算成本并在新表​​中更新。我不确定（4,1）之后如何更新（3,3）值。为什么从节点 3 到节点 3 的成本是 3。

在此示例中，教授发布了节点 3 和 4 中断之间的链接。

![在此处输入图像描述](../Images/ea28b0c2405d885394ce139d0363c08a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:16:28.460

该表是节点 4 作为目的地的路由表。

表中的 (x,y) 表示“我可以在 y 步中通过 x 到达节点 4。

休息前：N1 可以通过 N2 分 3 步到达 N4。N2 可以通过 N3 分 2 步到达 N4。N3 可以在 1 步中通过 N4 到达 N4。

休息之后，N3 不再知道如何直接到达 N4。问题是 N2*认为*它知道如何分两步到达 N4，并将其传达给 N3。因此 N3 现在认为它可以通过 N2 分 3 步到达 N4，然后螺旋式下降开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-12T08:52:45.317

抱歉，我不同意问题本身中的给定答案（我不是指 wookie919 答案”。在现实生活中的实现中，当 3 和 4 之间的链接断开时，上述拓扑将不会有任何计数到无穷大事件. 节点 3 会知道它，它会进行路由中毒，通知节点 2 链路 3<-->4 已关闭（成本为 16 无穷大）并且不再可达。节点 2 将等待一段时间接受这个信息。绝对没有无穷大。

计数到无穷大只发生在网络中存在环路拓扑的地方 [http://www.cs.fsu.edu/~curci/itl/labs/countinf/countinf.htm](http://www.cs.fsu.edu/~curci/itl/labs/countinf/countinf.htm)

# java - Java - 扩展自身的接口

> ID：14861417
> 
> 赞同：10
> 
> 时间：2013-02-13T19:26:09.600
> 
> 标签：java, interface, extends

我已经使用这个网站大约 6 个月了，是时候问我的第一个问题了，因为我找不到这个问题的答案，至少不是我能理解的答案！

在这段代码中，为什么这个接口会扩展自己？

```
public interface PositionedVertex<V extends PositionedVertex<V>> {

/**
 * @return Position for node data.
 */
public Point getPosition();
} 
```

这段代码不会做同样的事情吗？：

```
public interface PositionedVertex<V> {

/**
 * @return Position for node data.
 */
public Point getPosition();
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T19:29:04.363

接口不会自行扩展。`<V extends PositionedVertex<V>>`是与您的接口关联的泛型类型的绑定。它只是意味着任何实现此接口的类的泛型类型参数本身必须是`PositionedVertex`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T19:28:22.773

在第一种情况下，您将泛型类型参数限制为`interface`自身的子类型，而在第二种情况下，您可以将任何类型作为泛型类型参数。因此，它们可能是不同的声明。

**例如**，您可以定义如下引用：

```
PositionedVertex<String> 
```

为`2nd interface type`，但不为`1st one`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T19:28:57.740

它不是在扩展自己。它指定其泛型参数 V 必须表示一个扩展或实现自身的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T19:29:15.387

如果不显示更多代码，就无法说明原因。或者这就是全部？它实际上告诉你的是，在这个接口的某处使用了某种类型 V（作为函数的参数，或作为返回类型），它与接口本身的类型相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T19:48:04.590

这是泛型的扩展。有关泛型的更多信息：http: [//docs.oracle.com/javase/tutorial/extra/generics/intro.html](http://docs.oracle.com/javase/tutorial/extra/generics/intro.html)

# .net - 如何递归地将目录和文件打包到程序集中以供以后提取？

> ID：14861423
> 
> 赞同：0
> 
> 时间：2013-02-13T19:26:18.217
> 
> 标签：.net, file, dll, resources, directory

我正在开发一个 DLL（程序集）供以后在其他 .NET 项目中使用。

DLL 需要能够将包含文件（它是网站的脱机副本）的相当大的目录结构部署到本地文件夹，用户可选择。

这些当前是 65 个目录中的 131 个文件。因此，将它们一一添加到我的资源中非常困难。随着新版本的发布，它们可能会不时更改。

我应该制作一个 ZIP 并打包吗？我需要在部署时解压缩，这需要额外的代码。

**将这些文件打包到 DLL 中并将它们提取到与打包时相同的结构的最佳方法是什么？**

注意：这[与这个问题非常相似](https://stackoverflow.com/q/9143529/79485)，但不是 EXE，因此那里提出的解决方案对我不起作用。

# extjs - Ext.draw.Text 动态改变文字

> ID：14861435
> 
> 赞同：0
> 
> 时间：2013-02-13T19:27:01.020
> 
> 标签：extjs, extjs4, extjs4.1

如何在 Ext.draw.Text 元素上动态更改文本？

```
this.textLabel = Ext.create "Ext.draw.Text"
        type  : 'text',
        text  : me.curValue,
        font  : '24px Arial',
        width : 100,
        height: 30,
        x : 100 
        y : 120 
```

此方法不起作用：

```
 this.textLabel.setText("new text") 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:44:23.447

我不知道它是否是一个错字，但你的代码应该是这样的：

```
this.textLabel = Ext.create('Ext.draw.Text', {
    type  : 'text',
    text  : me.curValue,
    font  : '24px Arial',
    width : 100,
    height: 30,
    x : 100, 
    y : 120
});

this.textLabel.setText("new text"); 
```

还有什么`this`和`me`指？更多代码会有所帮助。无论如何，这是一个工作示例：http: [//jsfiddle.net/6zczP/2/](http://jsfiddle.net/6zczP/2/)

# javascript - 如何将成员名称展平或合并到一个列表中？

> ID：14861441
> 
> 赞同：-1
> 
> 时间：2013-02-13T19:27:22.380
> 
> 标签：javascript, jquery

例如，如果我有这样的事情：

```
var Constants = {
  scope:{
    namespaceA: { A_X: "TEST_AX" , A_Y: "TEST_AY" },
    namespaceN: { N_X: "TEST_NX" , N_Y: "TEST_NY" }
  }
  _mapping: [],
  getMapping: function(){...}
}

var flattenList = flatten(Constants.scope); //returns ["TEST_AX","TEST_AY","TEST_NX","TEST_NY"]
var anotherWayFlattened = flatten(Constants.scope.namespaceA,Constants.scope.namespaceB); //returns same result as above 
```

编辑：一种方法是通过 for-each 循环遍历范围，但我正在寻找更优雅的东西？

双重编辑：好的，我刚刚做了这样的事情：

```
var flattenedList = (function(list){
    var flatList = []
    $.each(list,function(i,items){
        for(var p in items) flatList.push(items[p]);
    })
    return flatList;
})([Constants.scope.namespaceA,Constants.scope.namespaceB]); 
```

但想知道我们是否可以避免传入特定属性而只传入常量并搜索命名空间列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:46:30.090

> `[Constants.scope.namespaceA,Constants.scope.namespaceB]`

我想知道为什么您在数组中显式传递子对象。为什么不直接传递整个`Constants.scope`对象？

```
var flattenedList = (function(obj){
    var flatList = []
    for (var prop in obj) {
        var items = obj[prop];
        for (var p in items)
            flatList.push(items[p]);
    }
    return flatList;
})(Constants.scope); 
```

* * *

从您的评论看来，您想要这个：

```
var flattenedList = (function(obj, test){
    var flatList = []
    for (var prop in obj) {
        if (!test(prop))
            continue;
        var items = obj[prop];
        for (var p in items)
            flatList.push(items[p]);
    }
    return flatList;
})(Constants, function(name) {
    return name.substr(0, 9) == "namespace";
    // or maybe
    return /^namespace[A-Z]$/.test(name);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:56:22.210

如果你想递归到任何（非周期性！）深度，你可以这样做：

```
function flattenList(list, accumulator){
    accumulator = accumulator || [];
    for(var p in list){
        if(list.hasOwnProperty(p)) {
            if(typeof list[p] === "string") {
                accumulator.push(list[p]);
            } else if(typeof list[p] === "object") { // this is not a reliable test!
                flattenList(list[p], accumulator);
            }
        }
    }
    return accumulator;
} 
```

这段代码做了许多假设——我们的对象末尾只有字符串等。或者，如果您事先知道深度，您当前的解决方案可以使用 concat 进行优化：

```
var flattenedList = (function(list){
    return Array.prototype.concat.apply([], list);
})([Constants.scope.namespaceA,Constants.scope.namespaceB]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T20:47:41.137

这是一种允许更深嵌套的方法。我知道这不是目标的一部分，但我发现这是一个更有趣的问题。:-)

```
var flatten = (function() {
    var toString = Object.prototype.toString, slice = Array.prototype.slice;
    var flatten = function(input, output) {
        var value;
        output = (toString.call(output) == "[object Array]") ? output : [];
        for (name in input) {if (input.hasOwnProperty(name)) {
            value = input[name];
            if (toString.call(value) == "[object Object]") {
                flatten(value, output);
            } else {
                output.push(value);
            }
        }};
        return output;
    };
    var merge = function(first, second) {
        return first.concat(second);
    }

    return function() {
        return slice.call(arguments).map(flatten).reduce(merge);
    };
}()); 
```

这允许任何一种方法：

```
flatten(Constants.scope);
flatten(Constants.scope.namespaceA, Constants.scope.namespaceN); 
```

你可以传入任意多个单独的参数，或者一个参数。他们都会被搜索到任意深度。

对于某些环境，您可能需要填充`Array.prototype`函数`map`和`reduce`.

# directory - Linux /var 目录与 /opt 目录

> ID：14861442
> 
> 赞同：0
> 
> 时间：2013-02-13T19:27:22.517
> 
> 标签：directory, installation, torque

从我有限的 linux 经验来看，我发现很多 3rd 方程序默认安装到：

`/opt`

特别是一个程序，[扭矩](http://www.adaptivecomputing.com/support/download-center/torque-download/)，默认安装到：

`/var/spool/torque`

我可以用

```
./configure --with-server-home=/opt/torque 
```

有什么理由我应该单独保留默认安装目录，而不是将其移动到

`opt/torque`?

我希望了解 linux 最佳实践的人建议他们认为我应该在哪里安装它。

**更新**
我研究了文件层次标准 (FHS)。似乎 /opt 和 /var/opt 都是安装程序的有效位置。我仍然想知道什么被认为是“最佳实践”，甚至是安装应用程序的最常见位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T17:49:14.373

安装程序的“正确”位置不止一个。

根据[文件系统层次标准](http://www.pathname.com/fhs/)，用户程序经常安装到`/opt/`或`/usr/local`

虽然 /var/spool/torque 作为您的安装目录没有任何问题，但它不遵循 FHS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-20T01:09:45.180

这实际上取决于。如果程序是假脱机程序，那么它安装在正确的位置（即 var/spool）。如果没有，那么你应该改变它。

关于 opt vs var/opt 通常在现代系统中，根目录（/run，/opt 等）和它们的“var”对应物（/var/run，/var/opt）被视为平等，并且在许多发行版中它们实际上是相互联系的。

所以它几乎是你的选择。我个人选择安装在 /var 下，因为许多服务器都将它安装在不同的磁盘上以实现数据安全和冗余，我想让他们的生活更轻松！

# c - 使用 OpenMP 停止 GCC 自动矢量化

> ID：14861447
> 
> 赞同：6
> 
> 时间：2013-02-13T19:27:47.710
> 
> 标签：c, gcc, openmp, vectorization

我一直在努力使我的代码能够被 GCC 自动矢量化，但是，当我包含该`-fopenmp`标志时，它似乎停止了所有自动矢量化的尝试。我正在使用它`ftree-vectorize -ftree-vectorizer-verbose=5`来矢量化和监控它。

如果我不包含标志，它会开始给我很多关于每个循环的信息，如果它是矢量化的，为什么不。当我尝试使用该`omp_get_wtime()`函数时，编译器会停止，因为它无法链接。一旦包含标志，它就会简单地列出每个函数并告诉我它在其中矢量化了 0 个循环。

我已经阅读了其他几个地方提到了这个问题，但他们并没有真正找到任何解决方案： http: [//software.intel.com/en-us/forums/topic/295858](http://software.intel.com/en-us/forums/topic/295858) [http://gcc。 gnu.org/bugzilla/show_bug.cgi?id=46032](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46032)。OpenMP 是否有自己的处理向量化的方式？我需要明确告诉它吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T14:12:02.153

GCC 矢量化器有一个缺点，最近的 GCC 版本似乎已经解决了这个问题。在我的测试用例中，GCC 4.7.2 成功地矢量化了以下简单循环：

```
#pragma omp parallel for schedule(static)
for (int i = 0; i < N; i++)
   a[i] = b[i] + c[i] * d; 
```

同时 GCC 4.6.1 没有并且它抱怨循环包含无法分析的函数调用或数据引用。`parallel for`矢量化器中的错误是由 GCC 实现循环的方式触发的。当 OpenMP 结构被处理和扩展时，简单的循环代码被转换成类似于这样的东西：

```
struct omp_fn_0_s
{
    int N;
    double *a;
    double *b;
    double *c;
    double d;
};

void omp_fn_0(struct omp_fn_0_s *data)
{
    int start, end;
    int nthreads = omp_get_num_threads();
    int threadid = omp_get_thread_num();

    // This is just to illustrate the case - GCC uses a bit different formulas
    start = (data->N * threadid) / nthreads;
    end = (data->N * (threadid+1)) / nthreads;

    for (int i = start; i < end; i++)
       data->a[i] = data->b[i] + data->c[i] * data->d;
}

...

struct omp_fn_0_s omp_data_o;

omp_data_o.N = N;
omp_data_o.a = a;
omp_data_o.b = b;
omp_data_o.c = c;
omp_data_o.d = d;

GOMP_parallel_start(omp_fn_0, &omp_data_o, 0);
omp_fn_0(&omp_data_o);
GOMP_parallel_end();

N = omp_data_o.N;
a = omp_data_o.a;
b = omp_data_o.b;
c = omp_data_o.c;
d = omp_data_o.d; 
```

4.7 之前的 GCC 中的矢量化器无法矢量化该循环。这不是 OpenMP 特有的问题。无需任何 OpenMP 代码即可轻松重现它。为了确认这一点，我编写了以下简单测试：

```
struct fun_s
{
   double *restrict a;
   double *restrict b;
   double *restrict c;
   double d;
   int n;
};

void fun1(double *restrict a,
          double *restrict b,
          double *restrict c,
          double d,
          int n)
{
   int i;
   for (i = 0; i < n; i++)
      a[i] = b[i] + c[i] * d;
}

void fun2(struct fun_s *par)
{
   int i;
   for (i = 0; i < par->n; i++)
      par->a[i] = par->b[i] + par->c[i] * par->d;
} 
```

人们会期望这两个代码（注意 - 这里没有 OpenMP！）应该同样好地矢量化，因为`restrict`用于指定不会发生混叠的关键字。不幸的是，GCC < 4.7 的情况并非如此——它成功地将循环向量化，但在引用与编译 OpenMP 代码时相同的原因时`fun1`未能将其向量化。`fun2`

其原因是矢量化器无法证明`par->d`不位于 、 和 指向的`par->a`内存`par->b`中`par->c`。情况并非总是如此`fun1`，可能有两种情况：

*   `d`在寄存器中作为值参数传递；
*   `d`在堆栈上作为值参数传递。

在 x64 系统上，System V ABI 要求前几个浮点参数在 XMM 寄存器中传递（启用 AVX 的 CPU 上的 YMM）。这就是`d`在这种情况下传递的方式，因此没有指针可以指向它 - 循环被矢量化。在 x86 系统上，ABI 要求将参数传递到堆栈上，因此`d`可能会被三个指针中的任何一个别名。实际上，如果指示使用该选项`fun1`生成 32 位 x86 代码，则GCC 拒绝将循环向量化。`-m32`

GCC 4.7 通过插入运行时检查来解决这个问题，确保既`d`不会也`par->d`不会出现别名。

摆脱`d`了无法证明的非混叠，以下 OpenMP 代码由 GCC 4.6.1 向量化：

```
#pragma omp parallel for schedule(static)
for (int i = 0; i < N; i++)
   a[i] = b[i] + c[i]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T20:26:37.707

我将尝试简要回答您的问题。

1.  OpenMP 是否有自己的处理向量化的方式？

是的...但是从传入的 OpenMP 4.0 开始。上面发布的[链接](https://stackoverflow.com/a/14717689/771663)很好地了解了这个结构。另一方面，当前的 OpenMP 3.1 并没有“意识到” SIMD 概念。因此，在实践中（或者至少在我的经验中）发生的情况是，每当在循环中使用 openmp 工作共享结构时，自动矢量化机制就会被禁止。无论如何，这两个概念是正交的，您仍然可以从两者中受益（参见另一个[答案](https://stackoverflow.com/a/10515670/771663)）。

2.  我需要明确告诉它吗？

恐怕是的，至少目前是这样。我将开始以一种明确矢量化的方式重写正在考虑的循环（即，我将在 Intel 平台上使用内在函数，在 IBM 上使用 Altivec 等等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T01:46:11.037

您在问“为什么启用 OpenMP 时 GCC 不能进行矢量化？”。

看来这可能是 GCC 的一个错误 :) [http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46032](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=46032)

否则，OpenMP API 可能会引入阻止自动矢量化的依赖性（控制或数据）。要自动验证，给定的代码必须不依赖数据/控制。使用 OpenMP 可能会导致一些虚假的依赖性。

注意：OpenMP（4.0 之前）是使用线程级并行性，这与 SIMD/矢量化正交。一个程序可以同时使用 OpenMP 和 SIMD 并行性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-22T13:07:43.940

我在搜索有关 gcc 4.9 选项 openmp-simd 的评论时遇到了这篇文章，该选项应该激活 OpenMP 4 #pragma omp simd 而无需激活 omp 并行（线程）。gcc bugzilla pr60117（已确认）显示了 pragma omp 阻止在没有 pragma 的情况下发生的自动矢量化的情况。

即使使用 simd 子句，gcc 也不会对 omp parallel for 进行矢量化（并行区域只能自动矢量化嵌套在 parallel for 下的内循环）。我不知道除了 icc 14.0.2 之外的任何编译器，它可以被推荐用于 simd 的#pragma omp parallel 的实现；对于其他编译器，需要 SSE 内在函数编码来获得这种效果。

在我的测试中，Microsoft 编译器没有在并行区域内执行任何自动矢量化，这表明 gcc 在这种情况下具有明显的优势。

单个循环的组合并行化和矢量化有几个困难，即使是最好的实现。通过将矢量化添加到并行循环中，我很少看到超过 2 倍或 3 倍的加速。例如，使用 AVX 双数据类型的向量化，有效地将块大小减少了 4 倍。典型的实现只能在整个数组对齐的情况下实现对齐的数据块，并且块也是向量宽度的精确倍数. 当块没有全部对齐时，由于不同的对齐方式，存在固有的工作不平衡。

# ios - 使用 UICollectionView 的电子表格类布局

> ID：14861450
> 
> 赞同：5
> 
> 时间：2013-02-13T19:28:05.900
> 
> 标签：ios

如何使用 UICollectionView 创建类似于布局的电子表格，其中每行显示单个对象的属性。

例子：

```
Customer Id   First Name   Last Name   Social  Address  Phone 
```

这是我使用 UITableView 得出的结论：

```
funds = [[NSMutableArray alloc] init];
    columnNames = [NSArray arrayWithObjects:@"fundNumber",@"fundName",@"unitPrice",@"fundBalance",@"percentageOfAccountValue",@"futureContributionAllocation", nil];

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"FundCell"];

    Fund *fund = [funds objectAtIndex:[indexPath row]];

    for(NSString *columnName in columnNames)
    {
        UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(x, 0, 100, 44)];

        label.backgroundColor = [UIColor clearColor];

        label.text = [fund valueForKey:columnName];

        x += label.bounds.size.width;

        [cell addSubview:label];

    }

    x = 0;

    return cell;
} 
```

这是输出：

![在此处输入图像描述](../Images/eda247cd9f2e7c4a4b878025ff2a6581.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:34:09.383

我不确定您是否能够调整标准流程布局 - 您可能需要创建自己的`UICollectionViewLayout`类 - 但这应该相当简单。

与表格视图一样，您的集合视图可以包含部分和项目：电子表格的每一行都可以是一个部分，然后各个元素（姓氏、社交、地址等）可以是项目。

如果您想要*真正的*电子表格功能（即，您可以水平*和*垂直滚动），那么您将不得不构建自己的布局类。否则，您可能能够适应现有的流程布局，尽管可以说如果您*不需要*滚动，您基本上可以使用表格视图来实现您所追求的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T19:38:58.917

`UICollectionViewController`您可以使用自定义布局`UICollectionViewFlowLayout`您想要做的背后的想法是：每列可以是一个部分每个标题将是每个部分的标题。

对于您的示例： `– numberOfSectionsInCollectionView:`= 6（客户 ID、名字、姓氏、社交、地址、电话） `– collectionView:numberOfItemsInSection:`= 行数

# c# - 将窗口“停靠”在同一位置 C#/Wpf

> ID：14861452
> 
> 赞同：0
> 
> 时间：2013-02-13T19:28:10.703
> 
> 标签：c#, .net, wpf

我正在开发一个 Windows wpf 应用程序，以使用名为 epanet 的开源引擎进行流体建模。已经有一个用 Pascal 编写的开源 UI，我们正在尝试创建一个类似它的具有附加功能和可用性的 UI。

我希望应用程序启动并有一个主窗口，其中包含几个工具栏和 2 个独立的子窗口，就像在原始的 epanet UI 软件中一样（看看下面链接中的一些屏幕截图）。解决此问题的最佳方法是什么？

[http://engineering.wayne.edu/wsuwater/hydraulics/epanet.php](http://engineering.wayne.edu/wsuwater/hydraulics/epanet.php)

我尝试使用此论坛帖子中的“弹出窗口”：

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/bf51e572-b41e-487b-99d0-95262899ef2c/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/bf51e572-b41e-487b-99d0-95262899ef2c/)

它非常挑剔，难以控制。相反，我只是创建了一个新窗口，并在加载 MainWindow() 类后将其打开。

`InitializeComponent(); DrawingArea Init_Canvas = new DrawingArea(); Init_Canvas.Show();`

这很好用，除了用户每次都必须手动将其调整到正确的大小和位置。

我怎样才能让它整齐地藏在角落里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:12:46.317

我不肯定我理解这个问题，但似乎你需要在另一个之上显示控件。我也遇到了弹出窗口的问题，并使用此代码作为替代方案：

```
<Grid>
<Canvas Grid.Row="0" Grid.Column="0">
  <TextBlock FontSize="55">One</TextBlock>
</Canvas>
<Canvas Grid.Row="0" Grid.Column="0">
  <TextBlock FontSize="55">Two</TextBlock>
</Canvas>

</Grid> 
```

基本上，您将两个控件设置为 row=0 和 column=0，它们将相互叠加显示。也许这不能满足您的需求，但这是一个不错的技巧。

# java - 在双变量上使用 Math.floor 将不起作用。Java（使用 Eclipse）

> ID：14861455
> 
> 赞同：-1
> 
> 时间：2013-02-13T19:28:47.183
> 
> 标签：java, variables, math, double

所以基本上我尝试了两件事。我会给你他们的代码：

```
double number;
Scanner input = new Scanner(System.in);
System.out.println("Name a number!");
number = input.nextDouble();
number = Math.floor(number);
System.out.println(number); 
```

和这个：

```
double number;
Scanner input = new Scanner(System.in);
System.out.println("Name a number!");
number = Math.floor(input.nextDouble());
System.out.println(number); 
```

但他们似乎都没有工作......有人可以帮我吗？我基本上想收集用户的输入。是否可以将双精度数转换为整数？例如：控制台询问“你想要多少薯条”，然后用户决定搞笑并说 4.5。这会给我一个错误。我希望控制台自动将 4.5 变成 4。

编辑：我不知道这是否有帮助......但我只有 1 节课，这就是全班的样子：

```
package package.name;

import java.util.Scanner;
public class TestingJava
{
    public static void main(String[] args){
        double number;
        Scanner input = new Scanner(System.in);
        System.out.println("Name a number!");
        number = input.nextDouble();
        number = Math.floor(number);
        System.out.println(number);
    }
} 
```

这是我在输入 3.6 之类的数字时得到的错误：

```
Exception in thread "main" java.util.InputMismatchException
    at java.util.Scanner.throwFor(Unknown Source)
    at java.util.Scanner.next(Unknown Source)
    at java.util.Scanner.nextDouble(Unknown Source)
    at package.name.TestingJava.main(TestingJava.java:10) 
```

当我给数字“2”时，它会回复“2.0”，但是当我做一个分数时，它就不起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:38:24.753

您的任何尝试都应该按原样工作，除了它们将给出双精度值 4.0 而不是整数值 4。如果要将其存储为整数，可以尝试在末尾使用以下行进行强制转换：

```
int integralNumber = (int)number; 
```

**编辑**：看起来您遇到了异常。输入的值`System.in`一定不是您所期望的，因为编写的代码有效。您可以尝试以下操作来了解输入的内容：

```
package package.name;

import java.util.Scanner;
public class TestingJava
{
  public static void main(String[] args){
    double number;
    Scanner input = new Scanner(System.in);
    System.out.println("Name a number!");
    if(input.hasNextDouble()){
      number = input.nextDouble();
      number = Math.floor(number);
      System.out.println(number);
    } else {
      System.out.println("Expected a double but received " + input.next());
    }
  }
} 
```

另一种可能性是语言环境不正确。扫描仪可能对小数点是什么感到困惑。如果英语不是默认语言环境，您可以在初始化 Scanner 后尝试以下操作：

```
input.useLocale(Locale.ENGLISH); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:49:33.573

在Java中，我认为是

```
Math.Ceil(number);
int num = (int)number; 
```

向上舍入，地板向下舍入？因此，先将其四舍五入，然后使用 (int) 将其转换为整数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:20:00.633

你能举个分数的例子吗？

例如，如果我 ender 1.3，我将得到 1.0 的输出，正如预期的那样。但是，如果输入类似 1/3 的内容，我会收到您所看到的错误，这也是我所期望的（因为它不是双精度 - 它可能是一个字符串）

# asp.net - ASP.NET SqlConnection - 异常 - 语法不正确

> ID：14861458
> 
> 赞同：0
> 
> 时间：2013-02-13T19:29:03.923
> 
> 标签：asp.net, database, sqlexception

我有以下代码，运行时我收到一个 SqlException 错误，提示关键字“用户”附近的语法无效。有任何想法吗？猜测它很简单，但我无法发现它。

```
 string insertStmt =
       "INSERT INTO User (UserName) VALUES(@UserName)";

    using (SqlConnection _con = new SqlConnection(myConnectionString))
    using (SqlCommand _cmd = new SqlCommand(insertStmt, _con))
    {
        _cmd.Parameters.Add("@UserName", SqlDbType.NVarChar).Value = UserName;

        try
        {
            _con.Open();
            _cmd.ExecuteNonQuery();
            _con.Close();
        }
        catch (Exception x)
        {
           // output exception
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:32:00.630

您可能需要转义用户，因为它是 sql 中的保留字。

试试这个

```
string insertStmt =
   "INSERT INTO [User] (UserName) VALUES(@UserName)"; 
```

# knockout.js - 使用数据绑定提交，sammy.js 和 knockout.js 一起进行奇怪的重定向

> ID：14861461
> 
> 赞同：18
> 
> 时间：2013-02-13T19:29:13.993
> 
> 标签：knockout.js, sammy.js

我的页面上有这样的表格：

```
<form data-bind="submit: AddFolder"></form> 
```

如果我的 JS 脚本中有这段代码（当然我已经删除了所有不相关的代码并进行了测试以确保我仍然可以只使用这段代码重新创建，通常你会在这里有更多的代码，比如 .get 和 .post职能）：

```
Sammy(function() {
}).run(); 
```

提交表单后，页面会重定向到一个奇怪的 URL，例如`?ko_unique=1`

如果我从脚本中删除 Sammy 部分，则不会发生这种情况。我认为这与事件冒泡有关，Sammy 和 Knockout 都挂钩了 onSubmit，而浏览器只尊重最后一个调用函数的返回值。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-13T19:29:13.993

经过大量搜索，并没有在这里找到任何答案，我最终找到了这个：

[https://groups.google.com/forum/?fromgroups#!topic/sammyjs/EYW-2Ygk3z8](https://groups.google.com/forum/?fromgroups#!topic/sammyjs/EYW-2Ygk3z8)

并将我的代码修改为：

```
Sammy(function() {

    // Override this function so that Sammy doesn't mess with forms
    this._checkFormSubmission = function(form) {
        return (false);
    };

}).run(); 
```

这样当我在我的页面上提交表单时，Sammy 就不会尝试做任何特别的事情。由于我使用的是 Knockout，因此我不打算将 Sammy 用于任何形式。如果您想要更复杂的代码或插件版本，您可以查看上面的 URL，但对我来说，我怀疑对于大多数使用 KO 的人来说，禁用这个 Sammy 功能会更少代码，更容易。

# java - @EJB workflowDao 在服务层为空

> ID：14861462
> 
> 赞同：1
> 
> 时间：2013-02-13T19:29:14.370
> 
> 标签：java, ejb, dao

我试图弄清楚如何在我的应用程序中设置服务/道层。我找到了几十个资源，它们都有不同的方法，并决定遵循这里找到的模型：[EntityManager 应该如何在良好解耦的服务层和数据访问层中使用？](https://stackoverflow.com/questions/7856367/how-should-entitymanager-be-used-in-a-nicely-decoupled-service-layer-and-data-ac)

我无法弄清楚导致此 NPE 的原因是什么。

**用法：**

```
@Path("/helloworld")
public class MyController {
    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String TestRequest() {
        Workflow workflow = new Workflow();
        workflow.setName("test");

        WorkflowService workflowService = new WorkflowService();
        workflowService.save(workflow);

        return "Workflow ID:";
    }
} 
```

**我的道：**

```
@Stateless
public class WorkflowDao {

    @PersistenceContext(unitName = "unit")
    private EntityManager entityManager;

    public int save(Workflow workflow) {
        entityManager.persist(workflow);
        return workflow.getId();
    }
} 
```

**我的服务：**

```
@Stateless
public class WorkflowService {

    @EJB
    WorkflowDao workflowDao;

    public int save(Workflow workflow) {
        int id = workflowDao.save(workflow); //throws NullPointerException because workflowDao is null
        return id;
    }
} 
```

这是我第一次设置 Java 项目（之前只在 1 上工作过，并且使用了 Spring），所以如果这看起来非常错误，请记住这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:33:57.737

`WorkflowDao`不是 EJB，而是带有`@Stateless`注释的 POJO。所以很自然地，注入它`@EJB`失败，创建一个 null`workflowDao`属性并最终产生一个`NullPointerException`.

要`WorkflowDao`成为一个成熟的 EJB，除了具有`@Stateless`or`@Stateful`注释之外，它还需要实现本地、远程或两者的接口，并且这些接口必须分别用`@Local`和注释`@Remote`。详情请参阅[教程](http://docs.oracle.com/javaee/5/tutorial/doc/bnbnc.html#bnbnd)。

此外，很可能（这可能取决于应用程序服务器）您必须在应用程序的 xml 描述符文件中注册 EJB - 例如，在 web.xml 的`<ejb-local-ref>`元素中。

作为旁注 - 将 EJB 用作 DAO 不是一个好主意，EJB 通常用于实现业务逻辑（确实，可以从这里调用持久/合并操作）但现在实际的持久层是使用 JPA 实现的. 换句话说，`WorkflowService`应该是*EJB*服务，不需要向其中注入 EJB，也不需要单独的 DAO 层——JPA 实体完成了这个角色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:57:55.780

如果您手动实例化您的 WorkflowService，容器将不会执行任何注入，因为您的 WorkflowService 不受容器管理。

我建议你：

*   注释您的 Jax-RS 资源 @Stateless

*   通过 @EJB 作为成员注入您的 WorkfloService

不再需要实现本地或远程接口

```
@Path("workflows")
@Stateless
public class WorkFlowResource{
  @EJB
  WorkflowService workflowService;
  @GET
  @Produces(MediaType.TEXT_PLAIN)
  public String TestRequest() {
    Workflow workflow = new Workflow();
    workflow.setName("test");
    workflowService.save(workflow);
    return "Workflow ID:";
    }

} 
```

# scala - 如何使用 Slick 进行 INSERT IGNORE 查询？

> ID：14861467
> 
> 赞同：9
> 
> 时间：2013-02-13T19:29:17.273
> 
> 标签：scala, slick

由于我在一个项目中使用的主题数据的性质，在输入集中经常会遇到重复记录（有时这意味着同一输入集中的重复记录，这可以通过预插入轻松处理过滤，但通常输入集可以包含与数据库中已有记录重复的记录）。

MySQL 和 SQLite`INSERT IGNORE`特性有助于处理这个问题。

所以我的问题是：

1.  将数据插入 MySQL 或 SQLite 数据库时，如何使 Slick 使用`INSERT IGNORE`而不是裸露？`INSERT`

2.  `INSERT IGNORE`将 Slick 与本机不支持的 MS SQL Server 一起使用时，模拟功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T12:05:46.550

我没有使用 Slick 的经验。从我收集的源代码中，为了使 Slick 能够使用`INSERT IGNORE`，您需要执行几个步骤：

*   扩展所需数据库的驱动程序
*   覆盖`InsertBuilder`通过创建的默认值`def createInsertBuilder(node: Node): InsertBuilder`。扩展它并添加一个与该方法类似的专用`buildInsert`方法。
*   覆盖`InsertInvoker`通过创建的默认值`def createCountingInsertInvoker[T, U](u: ShapedValue[T, U])`。扩展它并添加`insertIgnore`应该类似于`def insert[TT](query: Query[TT, U])(implicit session: Session): RetQuery`from`FullInsertInvoker`

至于你的第二个问题。不支持的解决方法的实现`INSERT IGNORE`取决于数据库，谷歌将帮助您找到不同的实现。由于上述添加方法与`INSERT IGNORE`驱动程序无关，因此您可以使用相同的结构为任何数据库添加功能。

# c# - WasapiCapture NAudio

> ID：14861468
> 
> 赞同：0
> 
> 时间：2013-02-13T19:29:25.430
> 
> 标签：c#, audio, wasapi

我们正在使用用 c# 编写的 NAudio 堆栈，并尝试以 PCM 8kHZ 和每个样本 16 位的独占模式捕获音频。

在以下函数中：

```
private void InitializeCaptureDevice()
{
    if (initialized)
        return;

    long requestedDuration = REFTIMES_PER_MILLISEC * 100;

    if (!audioClient.IsFormatSupported(AudioClientShareMode.Shared, WaveFormat) && 
        (!audioClient.IsFormatSupported(AudioClientShareMode.Exclusive, WaveFormat)))
    {
        throw new ArgumentException("Unsupported Wave Format");
    }

    var streamFlags = GetAudioClientStreamFlags();

    audioClient.Initialize(AudioClientShareMode.Shared,
        streamFlags,
        requestedDuration,
        requestedDuration,
        this.waveFormat,
        Guid.Empty);

    int bufferFrameCount = audioClient.BufferSize;
    this.bytesPerFrame = this.waveFormat.Channels * this.waveFormat.BitsPerSample / 8;
    this.recordBuffer = new byte[bufferFrameCount * bytesPerFrame];
    Debug.WriteLine(string.Format("record buffer size = {0}", this.recordBuffer.Length));

    initialized = true;
} 
```

我们在调用此函数之前将 WaveFormat 配置为 (8000,1) 以及 100 ms 的周期。我们预计系统会根据要求为缓冲区分配 1600 字节，间隔为 100 毫秒。

但我们注意到发生了以下情况： 1\. 系统分配 audioClient.BufferSize 为 4800 和“this.recordBuffer” 9600 字节数组（这意味着 600 毫秒而不是 100 毫秒的缓冲区）。2\. 线程将要休眠，然后获得 2400 个样本（4800 字节），而不是预期的 1600 字节帧

知道那里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T07:49:48.303

您说您正在以独占模式捕获音频，但在示例代码中您`Initialize`使用`AudioClientMode.Shared`. 我觉得共享模式不太可能让你在 8kHz 下工作。与 wave... API 不同，WASAPI 不会为您重新采样播放或捕获，因此声卡本身必须以您指定的采样率运行。

# xml - 如何渲染 DotML

> ID：14861469
> 
> 赞同：1
> 
> 时间：2013-02-13T19:29:24.963
> 
> 标签：xml, graph, charts, render, dot

如何将 DotML 呈现到图表中？根据[这里](http://www.martin-loetzsch.de/DOTML/)的网站：

> 从数据中获取图表是一个三步过程。首先，生成或手动键入包含 DotML 元素的 >XHTML（或任何其他 XML）文件。
> 
> 使用“ [http://www.martin-loetzsch.de/DOTML](http://www.martin-loetzsch.de/DOTML) ”作为 DotML 元素的命名空间标识符。>如果您想验证您的 DotML 元素，请使用 DotML Schema。
> 
> 其次，在输入文件上应用脚本“generate-svg-graphics.bash”。它应用 >dotml2dot.xsl 样式表并生成一个 SVG 图表和一个 CSS 文件，其中包含每个 DotML 图形元素的 SVG 图表的大小。请查看“generate-svg->graphics.bash”以获取所需的环境变量和参数。
> 
> 第三，如果 DotML 图形嵌入到 XHTML 文档中，XSLT 样式表“embed->svg-graphics.xsl”通过包含生成的 >SVG 来替换 DotML 图形元素。有关详细信息，请查看“embed-svg-graphics.xsl”。

我已经有输入的 XML，但我不知道其余步骤的含义。如果有人能以非常简单的方式解释如何做到这一点，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:55:42.700

DotML 是用于驱动 GraphViz 程序的点语言的另一种基于 XML 的语法。正常的使用方式是将DotML转换为dot，然后运行GraphViz生成SVG。我这样做的方式（来自 Ant）在这里：

```
 <target name="dot-files" depends="merge-catalog" if="build.spec" unless="spec.exists">
    <xslt in="${merged-spec.xml}" out="${dist.dir}/Overview.html" style="style/xslt-diff.xsl" 
      force="yes" classpathref="saxon9.classpath">
      <factory name="net.sf.saxon.TransformerFactoryImpl">
        <attribute name="http://saxon.sf.net/feature/initialMode" value="make-dot-files"/>
      </factory>
      <param name="baseline" expression="${baseline}"/>
      <param name="show.diff.markup.string" expression="0"/>
    </xslt>    
  </target>

  <target name="diagrams" description="Process all the diagrams in the img directory"
    depends="dot-files">
    <foreach target="diagram" param="diagram">
      <path>
        <fileset dir="${dist.dir}/img">
          <include name="*.dot"/>
        </fileset>
      </path>
    </foreach>
  </target>

  <target name="diagram">
    <echo message="Converting diagram ${diagram}"/>
    <basename property="name" file="${diagram}" suffix=".dot"/>
    <echo message="  to ${dist.dir}/img/${name}.svg"/>
    <!-- Requires "dot" to be on the path. dot is part of GraphViz. Location might be GraphViz2.24/bin/dot-->
    <exec executable="dot">
      <arg line="-o${dist.dir}/img/${name}.raw.svg -Tsvg ${diagram} "/>
    </exec>

    <xslt in="${dist.dir}/img/${name}.raw.svg" out="${dist.dir}/img/${name}.svg" style="style/tidy-graphviz-svg.xsl" 
      force="yes" classpathref="saxon9.classpath"/>   
  </target> 
```

我的情况有点不同，因为我从一个文档开始，该文档包含 XML 词汇表中的多个图表，首先需要将其转换为 DotML。

# azure - 在发布时保留 Azure 配置设置？

> ID：14861471
> 
> 赞同：8
> 
> 时间：2013-02-13T19:29:31.953
> 
> 标签：azure

当我使用 Windows Azure 配置设置时，每次我向我的云服务发布更新时，这些设置都会被我项目中的默认设置覆盖。这对我来说似乎毫无意义，因为如果我想覆盖云中的默认设置，那么即使在发布应用程序代码的更新时，我也希望保留这些覆盖是有道理的。从 Visual Studio 发布时有没有办法保留设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T03:02:52.340

否 - 重新部署您的服务将覆盖您提供的配置文件 (.cscfg) 中设置的所有设置。要保留设置，您必须同时更新云中的配置文件和本地磁盘上的配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:49:54.583

是 - 创建本地 ServiceConfiguration.cscfg（默认）和云或产品配置 ServiceConfiguration.Cloud.cscfg。右键单击云项目，然后单击“管理配置”以添加新的 cscfg 文件。在您的发布设置中，指定“云”作为您的服务配置。

但是，如果您询问是否可以在不上传设置的情况下更新 Azure 角色，则否 - 您必须上传服务配置文件。

# javascript - 设置 angularjs 和不同的谷歌地图服务和功能的最“角度方式”是什么？

> ID：14861473
> 
> 赞同：3
> 
> 时间：2013-02-13T19:29:55.187
> 
> 标签：javascript, google-maps, model-view-controller, google-maps-api-3, angularjs

我正在开发一个应用程序，它使用谷歌距离矩阵、方向服务和一些地图功能，如自定义标记。你会把所有这些不同的功能放在哪里？在控制器、服务、指令甚至是它们组合的模块内部？在您看来，这样做最有角度的方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T06:10:32.980

在 Angular 中对 DOM 的所有操作都应该通过指令来完成。这是“角度方式”。有一个具有 Google 地图示例的[angular-ui](http://angular-ui.github.com/)项目。

看看他们的谷歌地图指令[代码](https://github.com/angular-ui/angular-ui/blob/master/modules/directives/map/map.js)。

# javascript - 避免执行事件的默认动作。`event.cancelable` vs `event.preventDefault`？

> ID：14861474
> 
> 赞同：1
> 
> 时间：2013-02-13T19:29:55.497
> 
> 标签：javascript, events, event-handling, dom-events

当我不想执行与事件关联的默认操作时，我使用

```
function listener(e){
    if(e.preventDefault) e.preventDefault();
    /* Other code */
} 
```

但[我刚刚了解到](https://developer.mozilla.org/en-US/docs/DOM/event.cancelable)事件有 boolean `cancelable`。那么，我应该改用这段代码吗？

```
function listener(e){
    if(e.cancelable) e.preventDefault();
    /* Other code */
} 
```

我想知道：

*   如果`event.preventDefault`是`true`，是否真的意味着该事件是可取消的？也许如果它不可取消，则该属性已定义（和`true`），但它不是函数；或者它是一个函数，但如果我调用它会引发错误。
*   所有浏览器（IE，我在看你）都支持`event.cancelable`吗？是否有浏览器有该方法`event.preventDefault`但没有`event.cancelable`; 或有方法`event.cancelable`但没有`event.preventDefault`；或者这`event.cancelable`并不总是意味着它`event.preventDefault`已定义并且它是一个函数并且它不会引发错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:32:34.457

这个：

```
if (e.preventDefault) 
```

仅仅意味着事件对象有一个名为“preventDefault”的属性。这是一个浏览器功能测试，因为旧版本的 IE 没有这个功能。相反，在 IE 中，您将事件对象上的属性“returnValue”设置为`false`.

因此，您测试“preventDefault”的原因是查看该功能是否可用；如果属性为空，你显然不能进行函数调用。因此，当您想阻止默认操作时，您的代码应如下所示：

```
if (e.preventDefault)
  e.preventDefault();
else
  e.returnValue = false; 
```

如果“可取消”标志为假，则意味着您*无法*阻止默认行为。“preventDefault”函数仍然存在（如果它通常会存在的话），但对于不可取消的事件，对它的调用将被忽略。真的，根本不需要检查标志；它通常是特定类型事件的静态特征。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-09T15:12:32.453

首先，您可以检查事件是否[可取消](https://developer.mozilla.org/en-US/docs/Web/API/Event/cancelable)。知道并非所有事件都是可取消的，例如`change`事件。

之后，您检查事件是否已被[defaultPrevented](https://developer.mozilla.org/en-US/docs/Web/API/Event/defaultPrevented)。

```
if (!event.cancelable || !event.defaultPrevented) {
  // execute the event logic, because the previous event didn't prevented it
} 
```

检查是可选的`cancelable`，但我用它来提醒自己并非所有事件都可以取消。

# c++ - Boost C++ - 搜索 Spirit 符号表

> ID：14861476
> 
> 赞同：1
> 
> 时间：2013-02-13T19:30:05.187
> 
> 标签：c++, boost, boost-spirit

在 Boost Spirit 中，如果我有一个符号表

```
struct Foo : boost::spirit::qi::symbols<char, MyEnums::FruitType>
{
    Foo(const std::string& name = std::string("FooTable")
      : boost::spirit::qi::symbols<char, MyEnums::FruitType>(name)
    {
        add("apple", MyEnums::Apple)
           ("orange", MyEnums::Orange)
           ("peach", MyEnums::Peach);
    }
} 
```

稍后在我的代码中，如果我有数据类型，我该如何获取符号？例如：

```
Foo fruitSymbolTable;
MyEnums::FruitType fruit = MyEnums::Apple;

std::string fruitTypeString = ???? // want it to be equal to "apple" 
```

如何使用表格获得“苹果”？

另外，我知道我可以有一张像这样的桌子：

```
struct Foo : boost::spirit::qi::symbols<char, MyEnums::FruitType>
{
    Foo(const std::string& name = std::string("FooTable")
      : boost::spirit::qi::symbols<char, MyEnums::FruitType>(name)
    {
        add("apple", MyEnums::Apple)
           ("apple2", MyEnums::Apple)
           ("orange", MyEnums::Orange)
           ("peach", MyEnums::Peach);
    }
} 
```

其中 MyEnums::Apple 可以是“apple”或“apple2”，在这种情况下，我希望获得“第一个”匹配项。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:05:04.387

好吧，看来您希望从`qi::symbols`解析器转换为`karma::symbols`生成器。

我会说这样的事情不存在。而且由于您可能已经寻找过它，我认为可以肯定地假设它没有。

我可以看到它是如何有用的，所以你可以考虑将它贡献给 Spirit Repository。

我在这里花了一些时间编写一个简单的映射器，它可以转换`qi::symbols`为`karma::symbols`：

```
template <typename Char, typename T, typename Lookup, typename Filter>
    karma::symbols<T, std::basic_string<Char> > 
    inverse(qi::symbols<Char,T,Lookup,Filter> const& parser)
{
    karma::symbols<T, std::basic_string<Char> > generator;

    parser.for_each([&generator](std::basic_string<Char> const& symbol, T v) 
        { 
            generator.add(v, symbol); 
        });

    return generator;
} 
```

**编辑**C++03 风格：

```
template <typename Char, typename T, typename Lookup, typename Filter>
    karma::symbols<T, std::basic_string<Char> > 
    inverse(qi::symbols<Char,T,Lookup,Filter> const& parser)
{
    struct _adder { 
        karma::symbols<T, std::basic_string<Char> > result;

        void operator()(std::basic_string<Char> const& symbol, T v) { 
            result.add(v, symbol); 
        }
    } adder;

    parser.for_each(adder);
    return adder.result;
} 
```

> **注意**这还**不能**处理解析符号表中可能重复映射的值。

这是一个简单的示例程序，表明它可以工作： http: **[//liveworkspace.org/code/3uzQKi](http://liveworkspace.org/code/3uzQKi%240)**

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>

namespace qi     = boost::spirit::qi;
namespace karma  = boost::spirit::karma;

template <typename ItType>
struct parser : public qi::grammar<ItType, int()>
{
    parser() : parser::base_type(start)
    {
        _sym.add("aap", 1)("noot", 2)("mies", 3);
        start = _sym;
    }
  // private:
    qi::symbols<char, int> _sym;
    qi::rule<ItType, int()> start;
};

template <typename ItType>
struct generator : public karma::grammar<ItType, int()>
{
    template<typename Sym>
    generator(Sym&& sym) : generator::base_type(start)
    {
        // _sym.add(1, "aap")(2, "noot")(3, "mies");
        _sym = std::move(sym);
        start = _sym;
    }
  private:
    karma::symbols<int, std::string> _sym;
    karma::rule<ItType, int()> start;
};

template <typename Char, typename T, typename Lookup, typename Filter>
    karma::symbols<T, std::basic_string<Char> > 
    inverse(qi::symbols<Char,T,Lookup,Filter> const& parser)
{
    karma::symbols<T, std::basic_string<Char> > generator;

    parser.for_each([&generator](std::basic_string<Char> const& symbol, T v) 
        { 
            generator.add(v, symbol); 
        });

    return generator;
}

void testcase(std::string const& str)
{
    typedef std::string::const_iterator It;

    It begin = str.cbegin();
    It end   = str.cend();

    static const parser<It> p;

    int out;
    bool ok = qi::parse(begin, end, p, out);
    std::cout << std::boolalpha << ok << '\n';
    std::cout << "remains: '" << std::string(begin, end) << "'\n";
    if (ok)
    {
        std::cout << "parsed value: " << out << "\n";
        static const generator<boost::spirit::ostream_iterator> g(inverse(p._sym));
        std::cout << "generator: " << karma::format(g, out) << "\n";
    }

}

int main()
{
    const auto v = std::vector<std::string>{ "aap", "noot", "mies" };
    for (auto it=v.begin(); it!=v.end(); ++it)
        testcase(*it);
} 
```

输出：

```
true
remains: ''
parsed value: 1
generator: aap
true
remains: ''
parsed value: 2
generator: noot
true
remains: ''
parsed value: 3
generator: mies 
```

# linux - 在虚拟机中在线安全地评估 perl 代码

> ID：14861478
> 
> 赞同：10
> 
> 时间：2013-02-13T19:30:12.887
> 
> 标签：linux, perl, amazon-ec2, virtualization

**更新2**：我得到了这个工作并且它是活的:)

**更新：**请检查评论，@ikegami 的答案是有效的，但有一个小问题。我可能做错了一些非常简单的事情。

* * *

我最近决定我必须非常好地学习 Linux/Perl，然后我开始构建这个[www.tryperl.com](http://www.tryperl.com)作为一个学习项目。它是一种**云 IDE**。

*（从我第一次接触 perl、linux、bash、osx 到现在才几个月，所以请放轻松）*

目前我使用[Safe.pm](https://metacpan.org/source/RGARCIA/Safe-2.33/Safe.pm)评估代码，但我的游戏计划是：

一个单独的 Amazon EC2 虚拟机，它将评估**不安全**的 perl 代码并返回结果。VM 将被阻止访问 Internet 并进行负载平衡。然后我可以不时地从快照中重置这台机器。

这*主要*是我将用于在服务器上评估 perl 代码的代码，我使用[Time::Out](https://metacpan.org/module/PATL/Time-Out-0.11/Out.pod)进行超时管理：

```
my $code = ..
my $arg = ..

#create a file with random name
my $filename = rand().".pl";
open(FILE,">$filename")
print FILE $code;
close(FILE);

#use Time::Out to timeout after 10 secs

my $ret = timeout 10 => sub {
  #run the file just created with $arg as an argument. << This is IMP 
  my $r = `perl $filename $arg`;
  return $r;
};
if ($@){
    return $@;
}   
return $ret; 
```

我的**问题**

1.  ~~我可以以某种方式**避免创建物理文件并****使用 $arg**管道 $code吗？喜欢`open(FILE,"perl <some_magic> | ")`。听起来可能很愚蠢，但我不得不问~~:( 。@ikegami 在评论中解决了这个问题。

2.  我似乎无法使用[Capture::Tiny](https://metacpan.org/module/Capture%3a%3aTiny)。**我尝试在超时块**内执行此操作：
    `my ($stdout, $stderr, $count) = capture { system('echo Hello') };`
    但我一直收到空字符串！:(是因为它在超时内吗？（不过我不太关心这个）

3.  还有其他我没有发现的安全漏洞吗？我应该做一个**分叉限制**吗？我应该如何开始这样做？（链接和一些指针会很好）

4.  [http://www.perltuts.com](http://www.perltuts.com)的作者在[这篇文章](http://showmetheco.de/articles/2012/7/perltuts-interactive-perl-tutorials.html)中说他使用 qemu 和一个 debian 映像来运行他的代码。除了分叉限制之外，**他的方法在语义上是否与我的相似？**（再次原谅我的无知，记得几个月前我才接触过一个linux盒子）

我的开发箱是 OSX 10.8，生产服务器是 RHEL 用于前端，Ubuntu 用于 Perl 评估机器。我在 EC2 上运行。在此处查看完整的堆栈[详细信息](http://tryperl.com/about)。

任何详细的答案将不胜感激，并以代表和独角兽尘埃奖励:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T08:37:53.120

经过13天的努力，我终于做到了！！

我探索了[FreeBSD Jails](http://www.freebsd.org/doc/handbook/jails.html)，我[缺乏网络](https://serverfault.com/questions/481936/nslookup-fails-inside-freebsd-jail)经验以及我不得不多次重建操作系统的事实让我离开了。不过 FreeBSD 真的很酷！！我很快就会回来。

我黯淡地看着[OpenVZ](https://serverfault.com/users/13325/ewwhite)，然后感谢[@ewwhite](https://serverfault.com/users/13325/ewwhite)，我重新访问了[Linux Containers](http://en.wikipedia.org/wiki/LXC)并给了它一个适当的机会。

文档不是很好，但[这篇文章](http://www.activestate.com/blog/2011/10/virtualization-ec2-cloud-using-lxc)确实对一切都有帮助。

*   我在负载均衡器下设置了多个容器：[HAProxy](http://haproxy.1wt.eu/)。
*   我在每个容器内都安装了 perl，并带有我需要的 cpan 模块。
*   我的*PerlExecutor应用程序是一个在*[Starman](https://metacpan.org/module/Starman)上运行的 Dancer 应用程序，它由一个*有限用户*拥有，该用户拥有较少的权限并且在[limits.conf中有限制](http://manpages.ubuntu.com/manpages/hardy/man5/limits.conf.5.html)
*   容器被阻止与 Internet 连接。

**一个限制**：我对网络了解不多，所以我通过禁用主机上的端口转发来阻止监狱访问互联网。但是，监狱仍然需要在网络上以便主机与其通信，因此，您仍然可以在监狱内执行**ping操作，这将解析域但它****不会响应**。所以里面的任何网络请求都会失败。我还进行了字符串扫描`Ping`并阻止它。

任何建议或改进都将受到欢迎！

我要感谢[@JakeFeasel](https://stackoverflow.com/users/808921/jake-feasel) [@ikegami](https://stackoverflow.com/users/589924/ikegami) [@ewwhite](https://serverfault.com/users/13325/ewwhite) [@chris-s](https://stackoverflow.com/users/213991/chris-s)以及 ubuntu.SE 和 unix.SE 的人的帮助：

这是它的样子：

![TryPerl 架构图](../Images/2699122c2f05090c6bfe0654b148a159.png)

# iphone - 降级 iOS / 升级到非最新版本

> ID：14861482
> 
> 赞同：2
> 
> 时间：2013-02-13T19:30:23.143
> 
> 标签：iphone, ios, testing, qa

如何判断仍然可以“恢复”到 iphone 的最新版本的 iOS 是什么？

背景：作为开发人员，能够测试多个操作系统（针对那些单独的或操作系统特定的错误）很重要，但作为他们与越狱社区战斗的一部分，Apple 限制了操作系统的哪些版本可以安装在设备上。是否在某个地方发布了此逻辑，或者在某个位置跟踪各种操作系统变得无效以恢复的具体日期？

示例：我在 3GS 设备的 iOS 5.x 上报告了一个问题，并且在同一设备上的 iOS 6.x 上不可重复。我有一台带有 4.x 的 3GS 设备，我想用它来查看这是一次性用户问题还是合法问题，所以我下载了 5.1.1 (www.downloadios.net) 并尝试安装 (通过在单击恢复按钮并选择我下载的 ipsw 安装程序的同时按住选项键）但 iTunes 给了我 -

![iPhone](../Images/b6143a63533c9d97c9b0b1969a03c74e.png)

我如何知道哪些版本符合条件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:51:38.023

Apple 使用[SHSH blob](http://en.wikipedia.org/wiki/SHSH_blob)作为所有 iOS 更新和恢复的签名。

苹果通常会在新的 iOS 版本发布后不久停止验证旧更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T21:48:45.330

看起来简短的回答就像[Aamir](https://stackoverflow.com/a/14861841/285694)所说的那样：

> Apple 通常会在新 iOS 版本发布后不久停止验证旧更新。

所以倒退是不可能的。除非您有先见之明，使用像[Tiny Umbrella](http://thefirmwareumbrella.blogspot.com/)这样的程序，它允许您为您拥有的设备获取 SHSH 签名（以及后来的欺骗性签名）。根据我的经验，它只能为您的设备下载当前最新操作系统的设备签名（如果它足够接近发布，可能还会下载一个版本），因此您必须确保为您的所有设备获取 SHSH 签名每次发布新版本 iOS 时的设备——然后您可以通过从[此类](http://downloadios.net/)站点下载适当的 IPSW并使用 Tiny Umbrella 来欺骗 Apple TSS，从而返回为您拥有的设备存档的任何版本服务器，同时通过 iTunes 使用选项密钥进行安装。

# html - 内联无序列表未正确居中

> ID：14861486
> 
> 赞同：2
> 
> 时间：2013-02-13T19:30:35.417
> 
> 标签：html, css, twitter-bootstrap, nav

我有一个超级简单的网站，[这里](http://homegrowndevelopment.com/)使用了一个粘性导航栏。列表项位于左侧的几个位置，我不知道为什么。我已经修改了我能想到的所有边距和填充，但它不会让步。我还应该指出我正在使用 Bootstrap。

这是我的 HTML：

```
<div id="nav-wrapper">
<div id="nav" class="navbar navbar-inverse affix-top" data-spy="affix">
  <div class="navbar-inner" data-spy="affix-top">
    <div class="container">

      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <!-- Everything you want hidden at 940px or less, place within here -->
      <div class="nav-collapse collapse">
        <ul class="nav">
            <li><a href="#home">Home</a></li>
            <li><a href="#service-top">Services</a></li>
            <li><a href="#contact-arrow">Contact</a></li>
        </ul><!--/.nav-->
      </div><!--/.nav-collapse collapse pull-right-->
    </div><!--/.container-->
  </div><!--/.navbar-inner-->
</div><!--/#nav /.navbar navbar-inverse-->
</div><!--/#nav-wrapper--> 
```

这是与我的导航相关的 CSS：

```
.navbar {
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
    padding:0;
    z-index:999;
    margin-bottom:0;
}
.navbar.navbar-inverse .navbar-inner {
    background: #390 url(../img/green-bg.png) repeat;
    border:none;
    -webkit-border-radius: 0; 
    -moz-border-radius: 0; 
    border-radius: 0;
    margin-bottom:0;
}
.navbar .nav, .navbar .nav > li {
    float:none;
    display:inline-block;
    *display:inline; /* ie7 fix */
    *zoom:1; /* hasLayout ie7 trigger */
    vertical-align: top;
    padding:0 2em;
    margin:0;
}
.navbar-inner {
    text-align:center;
    margin-bottom:0;
}
.navbar-inner ul.nav li {
    text-align: center;
}
    .navbar .nav > li a{
    color:white; 
    background:rgba(0,0,0,0.2); 
    text-shadow:none; 
    font-size:1.5em; 
    font-family: marvel, serif; 
    padding:.5em 1em; 
    margin:.5em 1em;
}
.navbar .nav > .active a:hover, .navbar .nav > li a:hover, .navbar .nav > .active a {
    color:white; 
    background: #390 url(../img/green-bg.png) repeat;
    text-shadow:none; 
    font-size:1.5em; 
    font-family: marvel, serif; 
    padding:.5em 1em; 
    margin:.5em 1em;
    -webkit-box-shadow: inset 0 0 10px #000;
    -moz-box-shadow:    inset 0 0 10px #000;
    box-shadow:         inset 0 0 10px #000;
}
.navbar .nav > li {
    padding:1em;
    margin:0;
}
#nav.affix, #nav.affix-bottom {
    position: fixed;
    top: 0;
    width: 100%
}
#nav {
    position:relative;
    z-index:999;
    -webkit-perspective: 1000; -webkit-backface-visibility: hidden;
} 
```

我知道这是一个小细节，但我已经尝试修复它好几天了，无法弄清楚为什么它会很痛苦。

谢谢你的帮助，

布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:36:50.120

您在 (bootstrap.min.css:9) 上有 10px 的右边距，`.navbar .nav`这会将其向左推一点。

改变这个：

```
.navbar .nav {
  display:block;
  float:left;
  left:0;
  margin:0 10px 0 0;
  position:relative;
} 
```

对此：

```
.navbar .nav {
  display:block;
  float:left;
  left:0;
  margin:0;
  position:relative;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:38:02.817

好消息是如何使列表项居中：

添加一个名为“.center”的类，如下所示：

```
 <div class="navbar navbar-fixed-top center">
      <div class="navbar-inner">
         ....
      </div>
 </div> 
```

然后使用这个 CSS：

```
.center.navbar .nav,
.center.navbar .nav > li {
    float:none;
    display:inline-block;
    *display:inline; /* ie7 fix */
    *zoom:1; /* hasLayout ie7 trigger */
    vertical-align: top;
}

.center .navbar-inner {
    text-align:center;
} 
```

要重新对齐下拉菜单，请使用以下命令：

```
.center .dropdown-menu {
    text-align: left;
} 
```

[这取自之前的答案。](https://stackoverflow.com/questions/10568103/modify-twitter-bootstrap-navbar)

现在，坏消息是，该解决方案还将菜单项集中在平板电脑和移动视口的移动菜单下拉列表中。我十分钟前刚刚在这里发布了一个问题：

[如何为 Twitter Bootstrap 覆盖/撤消 CSS 类属性](https://stackoverflow.com/questions/14861175/how-to-override-undo-css-class-attributes-for-twitter-bootstrap/14861260#14861260)

如果您找到解决方案，请告诉我，因为我们都在问同一个问题！

# c# - 从 C# 和 WinRT 中的 IsItemClickEnabled ListView 获取单击的项目

> ID：14861492
> 
> 赞同：0
> 
> 时间：2013-02-13T19:31:03.800
> 
> 标签：c#, windows-8, windows-runtime

如何从`ListView`已`IsItemClickEnabled`启用的 clicket 十一月中获取？我知道如何获取选定的项目/索引，但不知道单击的项目。

`ItemClick`正在工作，但我不能说 s.th。喜欢：

```
Object selection = listView1.SelectedItem; 
```

**编辑**：我有一个 ListView，我需要通过以下方法从该列表中捕获单击的项目：

```
private void listView1_ItemClick(object sender, ItemClickEventArgs e)
{
...            
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T04:41:23.757

我可能遗漏了一些东西，但是以下内容对您不起作用吗？

```
private void lv_ItemClick_1(object sender, ItemClickEventArgs e)
{
    var item = e.ClickedItem as String;
} 
```

在这里，我假设列表中的项目是简单的字符串，但通常它们将是您在绑定到ListView的[ItemsSource属性的集合中使用的任何类型。](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:32:11.937

我想您也可以尝试该`SelectionChanged`事件，并将单击的项目获取为`e.AddedItems`or`MyListView.SelectedItem`或`MyListView.SelectedItems`。

# c# - 使用 Visual Studio 2010 在 Firefox 中使用 C# 自动化网站/Web 表单？

> ID：14861495
> 
> 赞同：0
> 
> 时间：2013-02-13T19:31:15.297
> 
> 标签：c#, visual-studio-2010, firefox, selenium

如果有人可以帮助我，我将不胜感激。

我正在使用 Visual Studio 2010 中的 C# 文件，我需要能够测试具有多个表单页面的网站，出于示例的目的，我们将它们全部称为 1.aspx、2.aspx 等。

我的代码可以很好地填写第一页（1.aspx），然后单击“继续”按钮加载下一页，但是当它到达 2.aspx 时，它不会继续填写表格。

我们会说 2.aspx 页面上的一个元素称为“DOB”。在尝试从头开始运行时（我在一个 .cs 文件中拥有所有页面表单数据），我收到一个错误，例如“当前上下文中不存在 DOB”。

任何人对此的见解将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:43:30.437

老实说，听起来你最好使用[WatiN 框架](http://watin.org/)。多年来，我一直在用它编写自动化程序，它的实现方式和易用性使其值得稍微学习一下。

只是为答案添加更多内容；是的，这是伪代码：

```
[Test]
public void Should_attach_to_browser()
{
     ExecuteTest(browser =>
     {
          browser.GoTo(NewWindowUri);
          browser.Link(Find.First()).Click();

          var findBy = Find.ByTitle("New window");
          var newWindow = Browswer.AttachTo(browser.GetType(), findBy);
          newWindow.Close();
     });          
} 
```

在上面的代码中，注意`Browser.AttachTo(browser.GetType(), findBy);`方法。根据我对您的问题的理解，该`.AttachTo()`方法效果很好，因为您可以将焦点*从*当前表单上移开，并将其分配给您的工作/执行流程中的下一个表单。

# javascript - 带有选项的 HighCharts

> ID：14861496
> 
> 赞同：0
> 
> 时间：2013-02-13T19:31:19.447
> 
> 标签：javascript, jquery, highcharts

我目前有一个使用这个的工作图表：

```
$.ajax({
    type: "GET",
    url: graphURL,
    data: "",
    cache: false,
    success: function (response) {
        //alert(response);
        jsonData = JSON.parse(response);
        if(jsonData != '' && jsonData != null) {
            var category = jsonData.XData.split(",");
            var series = jsonData.YData.split(",");
            series = $.each(series, function (i, amt) {
                series[i] = parseFloat(series[i]);
            });
            //Display chart
            UserChart(series, category, jsonData.YAxisTitle);
        }
    }
}); 
```

...但它不允许我设置选项，例如我想要一个`area`图表而不是线条等。我如何修改代码，以便我可以包含我在所有示例中看到的以下内容：

```
chart : {
    renderTo : 'container'
},

rangeSelector : {
    selected : 1
},

title : {
    text : 'AAPL Stock Price'
},

series : [{
    name : 'AAPL Stock Price',
    data : data,
    type : 'area',
    threshold : null,
    tooltip : {
        valueDecimals : 2
    },
    fillColor : {
        linearGradient : {
            x1: 0, 
            y1: 0, 
            x2: 0, 
            y2: 1
        },
        stops : [[0, Highcharts.getOptions().colors[0]], [1, 'rgba(0,0,0,0)']]
    }
}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:12:50.087

问题在于`series`系列点的数据。
尝试将系列传递给`UserChart`. 如下所示：

```
var points = jsonData.YData.split(",");
points = $.each(series, function (i, amt) {
    points[i] = parseFloat(series[i]);
});

// here you set your serie config
var serie = {
    name: 'AAPL Stock Price',
    type: 'area',
    data: points,
    threshold : null,
    tooltip : {
        valueDecimals : 2
    }
};

UserChart(serie, category, jsonData.YAxisTitle); 
```

然后，`UserChart`您应该将系列直接添加到图表系列中。

**示例**：

```
var options: {
    chart : {
        renderTo : 'container'
    },

    rangeSelector : {
        selected : 1
    },

    title : {
        text : 'AAPL Stock Price'
    },

    series : []
};

function UserChart(serie, category, jsonData.YAxisTitle) {
    options.series.push(serie);
    // add your code
} 
```

# mysql - yii 在常规查询中遇到问题

> ID：14861508
> 
> 赞同：1
> 
> 时间：2013-02-13T19:31:59.737
> 
> 标签：mysql, yii

当我尝试在 navicat 上运行它时，我有使用变量的查询，它运行良好。但由于某种原因，我在 Yii 上运行它时遇到问题。

我使用这段代码：

```
$connection = Yii::app()->db;
$sql = "
select  s.name, s.type
from    (
        select  *
        ,       (@rn := if(@cur=type, @rn+1, 1)) as rn
        ,       @cur := type
        from    games
        join    (select @cur := '') i
        order by
                type
        ) s
where   rn <= 10 ";

$command = $connection->createCommand($sql);
$results = $command->queryAll(); 
```

此查询应从每种游戏类型中选择 10 个游戏名称。当我在 Navicat 上运行它时会发生什么，当我在网站上尝试它时，它只为每种游戏类型返回一个游戏名称。有人知道它发生的原因吗？如何解决？也许如何使用标准运行它？请帮我。

顺便说一句，我使用这个查询（tnx to Andomar）的原因是因为其他查询占用了大量资源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T19:58:54.277

这不是`Yii`问题。使用 pure `PDO`，此 sql 仅返回一行。分析子查询结果，我意识到该`@rn`变量没有存储以前的值，而是存储了`@cur`。所以，我添加了`join`初始化`@rn`变量。

将您更改`SQL`为：

```
$connection = Yii::app()->db;
$sql = "
select  s.name, s.type
from    (
        select  *
        ,       (@rn := if(@cur=type, @rn+1, 1)) as rn
        ,       @cur := type
        from    games
        join    (select @cur := '') i
        join    (select @rn := '') j
        order by
                type
        ) s
where   rn <= 10 ";

$command = $connection->createCommand($sql);
$results = $command->queryAll(); 
```

# class - Matplotlib 窗口类？OO 等效于 matplotlib.pyplot.close()？

> ID：14861512
> 
> 赞同：1
> 
> 时间：2013-02-13T19:32:22.283
> 
> 标签：class, matplotlib

在 Matplotlib 中：

*   我可以写`matplotlib.pyplot.cla()`为`axes.clear()`，对象在`axes`哪里`matplotlib.axes.Axes`。
*   我可以写成`matplotlib.pyplot.clf()`，对象`fig.clear()`在哪里。`fig``matplotlib.figure.Figure`

然后有`matplotlib.pyplot.close()`。这会关闭一个窗口。这个窗口是否对应于任何类？是否有一个`x.close()`等同于`matplotlib.pyplot.close()`但更面向对象的风格？

我的版本的源代码`matplotlib.pyplot.close()`如下：

```
if len(args)==0:
    figManager = _pylab_helpers.Gcf.get_active()
    if figManager is None: return
    else:
        _pylab_helpers.Gcf.destroy(figManager.num)
elif len(args)==1:
    arg = args[0]
    if arg=='all':
        _pylab_helpers.Gcf.destroy_all()
    elif isinstance(arg, int):
        _pylab_helpers.Gcf.destroy(arg)
    elif is_string_like(arg):
        allLabels = get_figlabels()
        if arg in allLabels:
            num = get_fignums()[allLabels.index(arg)]
            _pylab_helpers.Gcf.destroy(num)
    elif isinstance(arg, Figure):
        _pylab_helpers.Gcf.destroy_fig(arg)
    else:
        raise TypeError('Unrecognized argument type %s to close'%type(arg))
else:
    raise TypeError('close takes 0 or 1 arguments') 
```

所以，它似乎是基于静态 `matplotlib._pylab_helpers.Gcf.destroy`方法，它做了很多我不太关注的事情，注意到*在交互式后端，这与窗口“销毁”和“删除”事件有关*。但我不确定数字和窗口是如何相关的。

也许我在浪费时间甚至考虑这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T21:53:16.513

`Gcf`是一个全局单例对象，用于保存您打开的图形列表`plt.figure`。

它本质上是一本字典，周围有一些花哨的代码，以保持一致并跟踪活动人物等。用作（`Figure`由. `plt.figure`_`FigureManagerBase``backend_bases.py`

您使用的子类取决于您使用的后端。这些子类处理诸如确保在单击“x”按钮时删除图形以及系统级 gui 回调之类的事情。

`FigureManager`s 有一种`destroy`方法可以触发其内部拆除。原则上，如果你有一个`Figure`对象并想手动销毁它，你只需要抓住经理。对它的引用不存储在`Figure`对象中，而是存储在`Canvas`对象中，因此您可以通过以下方式销毁窗口

```
fig.canvas.manager.destroy() 
```

这会破坏数字，但是如果你这样做，它可能无法正确清理`Gcf` （它将保留对数字管理器的引用），这将使未来的数字`pyplot`具有意想不到的数字（它不会回到一个） ,`gca`不会像执行的那样工作，等等（这是 的情况`Qt4`）。

如果您打算使用`pyplot`（并确保它始终适用于每个后端），那么您要么需要

1.  直接交谈`Gcf`（`_pyplot_helpers.py`一旦你看到它试图做什么，它就真的不是太复杂了
2.  直接访问并与 GUI 对话（请参阅代码以`lib/matplotlib/tests/test_backend_qt4.py`了解如何使用 with `qt4`，但这将非常依赖于工具包）
3.  `plt.close(fig.number)`

# javascript - CSS或Javascript：如何将两个肖像图像并排放置在具有流体宽度的容器中？

> ID：14861514
> 
> 赞同：1
> 
> 时间：2013-02-13T19:32:23.420
> 
> 标签：javascript, css, flexbox

我有一个灵活`.container`的`width:100%`. 我想将两个肖像图像（宽度不同）并排放入这个`.container`

```
<div class="container">
       <p>Some Text</p>
       <img src="this-is-a-landscape-image.jpg" alt="test"/>
       <p> Some Text again</p>
       <img class="portait" src="this-is-a-portrait-image.jpg" alt="test"/>
       <img class="portrait" src="this-is-a-portrait-image.jpg" alt="test"/>
</div> 
```

**我遇到的问题：** 我正在开发一个`.container`灵活的响应式布局 - `width:100%`。但是，我希望能够将两个图像（具有 class `.portrait`）并排放入此容器中。

![在此处输入图像描述](../Images/1bbb59ea994a86180fe7bd2a8766ec15.png)

正如您在此示例图像中看到的那样，两个`.portrait`图像的宽度不一定相同？我希望它们具有相同的高度，但宽度应该是动态的（如果它们的比例不同）

纯css（也许是flexbox）有可能吗？还是一点JS？

内容是通过 CMS 动态填充的，所以这就是我无法对其进行硬编码的原因。

有什么创意或有用的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:45:33.833

I don't think there is a fully dynamic solution in pure css (though I would love to be proven wrong!)

I wrote a quick jQuery solution here: [http://jsfiddle.net/d2gSK/2/](http://jsfiddle.net/d2gSK/2/) You can play with the image sizes, the window size, and the width of the gutter, and your height should stay the same for both images, while the width is set to proportion.

The javascript looks like this:

```
 // put it in a function so you can easily reuse it elsewhere
    function fitImages(img1, img2, gutter) {
        // turn your images into jQuery objects (so we can use .width() )
        var $img1 = $(img1);
        var $img2 = $(img2);
        // calculate the aspect ratio to maintain proportions
        var ratio1 = $img1.width() / $img1.height();
        var ratio2 = $img2.width() / $img2.height();
        // get the target width of the two images combined, taking the gutter into account
        var targetWidth = $img1.parent().width() - gutter;

        // calculate the new width of each image
        var width1 = targetWidth / (ratio1+ratio2) * ratio1;
        var width2 = targetWidth / (ratio1+ratio2) * ratio2;

        // set width, and height in proportion
        $img1.width(width1);
        $img1.height(width1 / ratio1);
        $img2.width(width2);
        $img2.height(width2 / ratio2);

        // add the gutter
        $img1.css('paddingRight', gutter + 'px');

    }

    //when the DOM is ready
    $(document).ready(function() {
        // cache the image container
        var $wrapper = $('.portrait-wrapper');
        // set the image sizes on load
        fitImages($wrapper.children().get(0), $wrapper.children().get(1), 20);

        // recalculate the image sizes on resize of the window
        $(window).resize(function() {
            fitImages($wrapper.children().get(0), $wrapper.children().get(1), 20);
        });
    }); 
```

I put the explanation inside the code. Feel free to ask if you want me to explain further.

Note that i put a wrapper around your images, and gave the images a `display: block` and a `float:left`, which is required to make this work!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:18:08.277

只需在它们上添加 Float 以便它们脱离“正常流程”，或者您甚至可以使用绝对位置，如果顶部图像和它们之间的文本始终保持不变......

对于宽度：您也可以简单地将它们的宽度设为 %，这样您就可以说给第一个 80% 和第二个 20% 使用伪类...

另一种可能性是您制作不同的硬编码 css，您可以在其中轻松定义要使用什么 css 的页面宽度，例如：

```
@media screen and (max-width: 400px) {
   .portrait:first {
       width: 85px;
   }

   .portrait:last {
       width: 105px;
   }
} 
```

对于窗口大小的每一步，依此类推。

我希望这会有所帮助：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:36:42.900

你可以做这样的事情。

```
 <div class="container">
    <p>Some Text</p>
    <img src="this-is-a-landscape-image.jpg" alt="test"/>
    <p> Some Text again</p>
    <div class="portraits">
      <img style="float:left;" class="portait" src="this-is-a-portrait-image.jpg" alt="test"/>
      <img style="float:right;" class="portrait" src="this-is-a-portrait-image.jpg" alt="test"/>
    </div>
  </div> 
```

# c# - 如何在 C# ASP.NET 中保护 SQL

> ID：14861515
> 
> 赞同：0
> 
> 时间：2013-02-13T19:32:24.323
> 
> 标签：c#, asp.net, sql, webforms

我有以下代码：

```
 [WebMethod]
    public static string addNewNote(string id, string txt)
    {
        Guid parentId = new Guid(id);
        DbProviderFactory dbf = DbProviderFactories.GetFactory();
        using (IDbConnection con = dbf.CreateConnection())
        {
            con.Open();
            using (IDbTransaction trn = con.BeginTransaction())
            {

                Guid noteId = Guid.Empty;
                SqlProcs.spNOTES_WebForms
                        (ref noteId,
                        parentId,
                        "Files",
                        "Client Note",
                        txt,
                        true
                        );
            }
        }
        return "";
    } 
```

在其他语言（例如 PHP）中，存在诸如`strip_tags`or之类的函数`addslashes`，`mysqlrealescapestring`它们会在将基于客户端的变量插入数据库之前对其进行清理或以其他方式清理它们。

是否存在任何此类功能，或者 C# ASP.NET 中是否需要任何此类功能。如您所见，我已经在使用存储过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:34:48.130

如果您使用参数化查询，.Net 将为您处理变量卫生。

# c - 监听本地应用程序和设备之间的通信

> ID：14861521
> 
> 赞同：0
> 
> 时间：2013-02-13T19:32:46.507
> 
> 标签：c, windows, sockets

我的 PC 上有一个 Windows 应用程序，它通过 telnet 连接到设备。它向设备发送一系列命令，设备对其作出响应。

有什么方法可以让我听到该程序正在写入设备的内容吗？

我尝试使用 win32 套接字编程来创建连接到应用程序的客户端。但是，我收到一条错误消息，提示连接被拒绝。当我在wireshark上分析应用程序和设备之间的流量时，我可以看到应用程序每次读取或写入设备的telnet端口（23）时使用不同的端口。

有什么办法可以读取程序发送到设备的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:46:53.017

如果您想以编程方式将程序的输出捕获到设备，正确的方法是不要连接到程序（您不能利用现有连接），而是提供一个*服务器* ，从程序的角度代表目标设备看法。

如果可以将程序配置为连接到不同地址和端口的设备，它将起作用。编写一个侦听某个固定端口的“代理”，并为任何接受的连接打开与*真实*设备的*客户端* 连接。然后它应该在程序接受的连接和客户端到设备的连接之间双向转发数据。在此期间，您还可以解析数据或对它们做任何您想做的事情，例如将它们转发到*另一个* 连接到另一个真实设备。

# windows-7 - 如何在 C++ Builder 2009 中获取系统的日期时间格式

> ID：14861523
> 
> 赞同：0
> 
> 时间：2013-02-13T19:32:53.130
> 
> 标签：windows-7, c++builder

我正在使用 C++ Builder 2009。

我正在寻找一种方法来获取系统的日期时间格式，以便我可以使用它来使用系统的本机格式显示日期和时间。例如，如果用户的格式是英语（美国），那么一天的显示可以是“mm/dd/yyyy”。

我更喜欢适用于 XP 和 7 的解决方案。但是，我会很高兴有一个仅适用于 Windows 7 的答案。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T21:24:02.700

如果使用`TDateTime`，则可以使用`DateTimeToStr()`使用系统默认值的函数（除非被覆盖）来格式化字符串。

更新：要获取字符串，请使用`ShortDateFormat`或`LongDateFormat`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:37:47.213

ShortDateFormat 让我可以访问我需要的内容。

# java - 正则表达式：删除单词和数字

> ID：14861530
> 
> 赞同：0
> 
> 时间：2013-02-13T19:33:18.923
> 
> 标签：java, regex

我有一个字符串，我想从中删除`Input! + word + digits`字符串`Calc! + word + digits`。我也包括了我的尝试。

```
输入：IF（输入！B34 + Calc！B45）

```

```
输出：输入！B34 计算！B45

```

我的尝试：

```
模式 findMyPattern = Pattern.compile("Input!\\w\\d|" + worksheetName+ "!.+?");
        匹配器 foundAMatch = findMyPattern.matcher(input);
        HashSet hashSet = new HashSet();
        而（foundAMatch.find（））{
            字符串 s = foundAMatch.group(0);
            hashSet.add(s);
        }

```

我应该使用什么正则表达式？我尝试使用其中的一些。但我不是他们的专家。一些想法会很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:37:10.250

您可以使用此正则表达式：

```
"(?:Input|Calc)![a-zA-Z]\\d+" 
```

解释：

```
(?:Input|Calc)  // Match `Input or Calc`
 !              // Followed by !
[a-zA-Z]        // Followed by an alphabetical character
\\d+            // Then digits. 
```

并与它一起使用`Matcher#find`，然后添加`matcher.group()`到您的`Set`.

# ruby - 如何检查 Ruby 中每个/do 循环中下一项的属性？

> ID：14861532
> 
> 赞同：0
> 
> 时间：2013-02-13T19:33:23.337
> 
> 标签：ruby, ruby-on-rails-3

使用 RoR，我想要一个助手来编写一个目录菜单，其中根部分是其子部分的下拉菜单。在 each/do 循环中，我需要在输出`class="dropdown"`li 和`class="dropdown-toggle" data-toggle="dropdown"`链接之前检查一个部分是否有小节。

有没有办法在 each/do 循环中检查下一项（如果有）的属性？还是我需要切换到带有索引的循环？

这是我的目录助手。

```
def showToc(standard)
  html = ''
  fetch_all_sections(standard).each do |section|
    html << "<li>" << link_to("<i class=\"icon-chevron-right\"></i>".html_safe + raw(section[:sortlabel]) + " " + raw(section[:title]), '#s' + section[:id].to_s) << "</li>"
    end
  end
  return html.html_safe
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:52:18.683

您可以使用抽象[Enumerable#each_cons](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_cons)。一个例子：

```
>> xs = [:a, :b, :c]
>> (xs + [nil]).each_cons(2) { |x, xnext| p [x, xnext] }
[:a, :b]
[:b, :c]
[:c, nil] 
```

也就是说，请注意您的代码充满了统一的 Ruby，您可能应该将其发布到[https://codereview.stackexchange.com/](https://codereview.stackexchange.com/)以供审查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:08:18.473

如果我正确阅读了您的问题-假设 fetch_all_sections(standard) 返回一个可枚举的对象，例如 Array，您可以添加一个自定义迭代器来获得您想要的内容：

```
class Array
   #yields |current, next|
   def each_and_next
      @index ||= 0
      yield [self[@index], self[@index +=1]] until (@index == self.size)
      @index = 0
   end
end 
```

ps 我喜欢@tokland 的内联答案

* * *

```
a = [1,2,3,4]
a.each_and_next { |x,y| puts "#{x},#{y}" }

produces:
1,2
2,3
3,4
4, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:42:56.533

我找到了一种方法让链接`class="dropdown"`上的`<li>`和`class="dropdown-toggle" data-toggle="dropdown"`不影响锚标记。因此，在这种情况下，我可以检查部分深度是否为 0 并采取相应措施。其他答案可能与大多数人更相关，但这对我有用。

```
def showToc(standard, page_type, section = nil, nav2section = false, title = nil, wtf=nil)
  html = ''
  new_root = true

  fetch_all_sections(standard).each do |section|
    if section[:depth] == 0
      if !new_root
        # end subsection ul and root section li
        html << "</li>\n</ul>"
        new_root = true
      end
      html << "<li class=\"dropdown\">" << link_to("<i class=\"icon-chevron-right\"></i>".html_safe + raw(section[:sortlabel]) + " " + raw(section[:title]), '#s' + section[:id].to_s, :class => "dropdown-toggle", :data => {:toggle=>"dropdown"})
    else
      # write ul if new root
      if new_root
        new_root = false
        html << "<ul class=\"dropdown-menu\">\n" << "<li>" << link_to(raw(section[:sortlabel]) + " " + raw(section[:title]), '#s' + section[:id].to_s) << "</li>"
      else
        html << "<li>" << link_to(raw(section[:sortlabel]) + " " + raw(section[:title]), '#s' + section[:id].to_s) << "</li>"
      end
    end
  end
  return html.html_safe
end 
```

# python - 用一个重复遍历所有列表

> ID：14861533
> 
> 赞同：4
> 
> 时间：2013-02-13T19:33:26.127
> 
> 标签：python

考虑所有长度列表，`n`其中值是来自`range 0 to n-1`. 我想尽可能快地迭代每个可能只有一个重复的列表。如果`n = 2`那么可能的列表是：

```
00
11 
```

如果`n = 3`他们是：

```
001
002
110
112
220
221
100
200
011
211
022
122
010
020
101
121
202
212 
```

此类列表的总数如此之多，`n! * (n choose 2)`因此我想尽可能避免将它们全部存储在内存中。

对于每个列表，我想调用一个计算列表函数的函数。
有什么好方法可以做到这一点？

**基准测试**在我的计算机上，我得到以下基准测试结果

```
timeit all(one_duplicate(6))
100 loops, best of 3: 6.87 ms per loops
timeit all(one_duplicate(7))
10 loops, best of 3: 59 ms per loop
timeit all(one_duplicate(8))
1 loops, best of 3: 690 ms per loop
timeit all(one_duplicate(9))
1 loops, best of 3: 7.58 s per loop 
```

和

```
timeit all(duplicates(range(6)))
10 loops, best of 3: 22.8 ms per loop
timeit all(duplicates(range(7)))
1 loops, best of 3: 416 ms per loop    
timeit all(duplicates(range(8)))
1 loops, best of 3: 9.78 s per loop 
```

和

```
timeit all(all_doublet_tuples(6))
100 loops, best of 3: 6.36 ms per loop
timeit all(all_doublet_tuples(7))
10 loops, best of 3: 60 ms per loop
timeit all(all_doublet_tuples(8))
1 loops, best of 3: 542 ms per loop
timeit all(all_doublet_tuples(9))
1 loops, best of 3: 7.27 s per loop 
```

我首先声明`all_doublet_tuples`and`one_duplicate`是平等的（考虑到测试中的噪音）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T20:30:35.880

以这种方式考虑**任何**所需的输出元组：它是通过复制第一个（让我们从左边开始）doublet elem 并将其插入到第二个 doublet 的位置而得出的。

因此我的解决方案基本上是这个两步过程：

1.  生成的所有`n-1`排列`range(n)`
2.  对于 1\. 中的每个元组：
    获取每个单个元素并将其插入到**前面**的每个位置（以避免重复），包括最后

* * *

```
import itertools as it

# add_doublet accomplishes step 2
def add_doublet(t):
    for i in range(len(t)):
        for j in range(i+1, len(t)+1):
            yield t[:j] + (t[i],) + t[j:]

def all_doublet_tuples(n):
    for unique_tuple in it.permutations(range(n), n-1):
        for doublet_tuple in add_doublet(unique_tuple):
            yield doublet_tuple

from pprint import pprint

n = 3
pprint(list(all_doublet_tuples(n))) 
```

我不在这里打印输出，因为它有点长……而且 n=3 的情况很无聊。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T19:51:17.547

```
import itertools

def one_duplicate(n):
    nrange = list(range(n))
    for x in nrange:
        without_x = nrange[:x] + nrange[x+1:]
        for i, j in itertools.combinations(nrange, 2):
            for others in map(list, itertools.permutations(without_x, n-2)):
                others.insert(i, x)
                others.insert(j, x)
                yield others

>>> list(one_duplicate(2))
[[0, 0], [1, 1]]
>>> list(one_duplicate(3))
[[0, 0, 1], [0, 0, 2], [0, 1, 0], [0, 2, 0], [1, 0, 0], [2, 0, 0], [1, 1, 0], [1, 1, 2], [1, 0, 1], [1, 2, 1], [0, 1, 1], [2, 1, 1], [2, 2, 0], [2, 2, 1], [2, 0, 2], [2, 1, 2], [0, 2, 2], [1, 2, 2]]
>>> list(one_duplicate(4))
[[0, 0, 1, 2], [0, 0, 1, 3], [0, 0, 2, 1], [0, 0, 2, 3], [0, 0, 3, 1], [0, 0, 3, 2], [0, 1, 0, 2], [0, 1, 0, 3], [0, 2, 0, 1], [0, 2, 0, 3], [0, 3, 0, 1], [0, 3, 0, 2], [0, 1, 2, 0], [0, 1, 3, 0], [0, 2, 1, 0], [0, 2, 3, 0], [0, 3, 1, 0], [0, 3, 2, 0], [1, 0, 0, 2], [1, 0, 0, 3], [2, 0, 0, 1], [2, 0, 0, 3], [3, 0, 0, 1], [3, 0, 0, 2], [1, 0, 2, 0], [1, 0, 3, 0], [2, 0, 1, 0], [2, 0, 3, 0], [3, 0, 1, 0], [3, 0, 2, 0], [1, 2, 0, 0], [1, 3, 0, 0], [2, 1, 0, 0], [2, 3, 0, 0], [3, 1, 0, 0], [3, 2, 0, 0], [1, 1, 0, 2], [1, 1, 0, 3], [1, 1, 2, 0], [1, 1, 2, 3], [1, 1, 3, 0], [1, 1, 3, 2], [1, 0, 1, 2], [1, 0, 1, 3], [1, 2, 1, 0], [1, 2, 1, 3], [1, 3, 1, 0], [1, 3, 1, 2], [1, 0, 2, 1], [1, 0, 3, 1], [1, 2, 0, 1], [1, 2, 3, 1], [1, 3, 0, 1], [1, 3, 2, 1], [0, 1, 1, 2], [0, 1, 1, 3], [2, 1, 1, 0], [2, 1, 1, 3], [3, 1, 1, 0], [3, 1, 1, 2], [0, 1, 2, 1], [0, 1, 3, 1], [2, 1, 0, 1], [2, 1, 3, 1], [3, 1, 0, 1], [3, 1, 2, 1], [0, 2, 1, 1], [0, 3, 1, 1], [2, 0, 1, 1], [2, 3, 1, 1], [3, 0, 1, 1], [3, 2, 1, 1], [2, 2, 0, 1], [2, 2, 0, 3], [2, 2, 1, 0], [2, 2, 1, 3], [2, 2, 3, 0], [2, 2, 3, 1], [2, 0, 2, 1], [2, 0, 2, 3], [2, 1, 2, 0], [2, 1, 2, 3], [2, 3, 2, 0], [2, 3, 2, 1], [2, 0, 1, 2], [2, 0, 3, 2], [2, 1, 0, 2], [2, 1, 3, 2], [2, 3, 0, 2], [2, 3, 1, 2], [0, 2, 2, 1], [0, 2, 2, 3], [1, 2, 2, 0], [1, 2, 2, 3], [3, 2, 2, 0], [3, 2, 2, 1], [0, 2, 1, 2], [0, 2, 3, 2], [1, 2, 0, 2], [1, 2, 3, 2], [3, 2, 0, 2], [3, 2, 1, 2], [0, 1, 2, 2], [0, 3, 2, 2], [1, 0, 2, 2], [1, 3, 2, 2], [3, 0, 2, 2], [3, 1, 2, 2], [3, 3, 0, 1], [3, 3, 0, 2], [3, 3, 1, 0], [3, 3, 1, 2], [3, 3, 2, 0], [3, 3, 2, 1], [3, 0, 3, 1], [3, 0, 3, 2], [3, 1, 3, 0], [3, 1, 3, 2], [3, 2, 3, 0], [3, 2, 3, 1], [3, 0, 1, 3], [3, 0, 2, 3], [3, 1, 0, 3], [3, 1, 2, 3], [3, 2, 0, 3], [3, 2, 1, 3], [0, 3, 3, 1], [0, 3, 3, 2], [1, 3, 3, 0], [1, 3, 3, 2], [2, 3, 3, 0], [2, 3, 3, 1], [0, 3, 1, 3], [0, 3, 2, 3], [1, 3, 0, 3], [1, 3, 2, 3], [2, 3, 0, 3], [2, 3, 1, 3], [0, 1, 3, 3], [0, 2, 3, 3], [1, 0, 3, 3], [1, 2, 3, 3], [2, 0, 3, 3], [2, 1, 3, 3]] 
```

下面是算法的描述：

*   使用查找所有索引对`itertools.combinations(nrange, 2)`
*   对于范围内的每个数字`x`，获取`n-2`整个范围内的所有长度排列，除了`x`
*   在每个排列中，插入`x`第一步中找到的每个索引并产生结果。

[我的答案和彼得斯塔尔的](https://stackoverflow.com/a/14861951/505154)答案之间的时间比较：

```
# Just showing they both get the same result
In [23]: set(peter(range(6))) == set(tuple(x) for x in fj(6))
Out[23]: True

In [24]: %timeit list(peter(range(6)))
10 loops, best of 3: 27.3 ms per loop

In [25]: %timeit list(fj(6))
100 loops, best of 3: 8.32 ms per loop

In [26]: %timeit list(peter(range(7)))
1 loops, best of 3: 506 ms per loop

In [27]: %timeit list(fj(7))
10 loops, best of 3: 81 ms per loop 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T20:39:43.563

```
import itertools
n=3
for i in range(n-1):
    for j in range(n-i-1):
        for perm in map(list, itertools.permutations(range(n), n-1)):
            perm.insert(i, perm[i+j])
            print perm 
```

这里的关键概念是从 N 长度集合中生成所有 N-1 长度排列，然后在所有重复组合（i 和 i+j）上运行它

在 N=3 的情况下，排列为：

> (0, 1) (0, 2) (1, 0) (1, 2) (2, 0) (2, 1)

并且重复的元素可以在 X 标记的位置：

> XX_, X_X, _XX

您的结果是这些集合的“乘法”：

```
 XX_  X_X  _XX
(0, 1)  001  010  011
(0, 2)  002  020  022
(1, 0)  110  101  100
(1, 2)  112  121  122
(2, 0)  220  202  200
(2, 1)  221  212  211 
```

一切都是即时计算的。我猜内存消耗是O（N）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T19:43:25.127

您的问题是关于如何在不创建实际`list`内存的情况下这样做，以及如何在每个函数上运行一个函数，所以我将首先一般地回答该部分，然后针对您的具体问题。

> 可能列表的总数是 n*(n-1) * (n choose 2) 所以我想尽可能避免将它们全部存储在内存中。

您只需要创建一个生成器函数，它s 一个一个地回答，而不是一个将每个答案附加到 a然后返回`yield`的常规函数​​。`list``list`

> 对于每个列表，我想调用一个计算列表函数的函数。有什么好方法可以做到这一点？

您可以调用生成器函数并将结果用作迭代器。例如：

```
for element in my_generator_function(n):
    my_function(element) 
```

如果您想要调用`my_function`每个元素的结果，您可以构建另一个生成器函数：

```
def apply_to(my_function, my_iterator):
    for element in my_iterator):
        yield my_function(element) 
```

但是，已经有一个内置函数可以做到这一点，`map`在 Python 3 或`itertools.imap`Python 2 中调用。

或者，更简单地说，您可以使用生成器表达式：

```
results = (my_function(element) for element in my_generator_function(n)) 
```

有关更多信息，请参阅官方 Python 教程中的[迭代器](http://docs.python.org/2/tutorial/classes.html#iterators)、[生成器](http://docs.python.org/2/tutorial/classes.html#generators)和[生成器表达式](http://docs.python.org/2/tutorial/classes.html#generator-expressions)部分。

现在，您可以像这样分解您的问题：

*   对于前 n 个数字的集合中的每个数字：
    *   该数字的所有排列两次，以及其他数字的 n-2

对于 n=2，这意味着 (0, 0) 的所有排列连同 (1) 中的 0 个数，以及 (1, 1) 的所有排列以及 (0) 中的 0 个数。对于 n=3，您得到 (0, 0) 的所有排列和数字 (1, 2) 中的 1 个，以及 (1, 1) 和数字 (0, 2) 中的 1 个的所有排列，以及 (2, 2) 的所有排列以及数字 (0, 1) 中的 1 个。等等。

因此，使用以下魔法将其直接翻译成 Python [`itertools`](http://docs.python.org/2/library/itertools.html)：

```
def one_duplicate_element(n):
    for i in range(n):
        rest = (j for j in range(n) if j != i)
        for combination in itertools.combinations(rest, n-2):
            yield from itertools.permutations(combination + (i, i)) 
```

这使用了`yield from`Python 3.3 中的语句，这意味着“从这个迭代器中产生每个元素”。如果您使用的是 3.2 或更早版本，则需要使用循环显式执行此操作：

```
def one_duplicate_element(n):
    for i in range(n):
        rest = (j for j in range(n) if j != i)
        for combination in itertools.combinations(rest, n-2):
            for permutation in itertools.permutations(combination + (i, i)):
                yield permutation 
```

但是您会注意到，虽然这完全符合您的要求，但它不会生成与您的示例输出相同的列表。即使忽略排序（我认为这与您无关），也有重复。为什么？

那么，集合的排列是`(0, 0)`什么？这是一个棘手的问题；`(0, 0)`不能是集合，因为其中有重复项。那么，不管`(0, 0)`是什么，它的排列是什么？好吧，根据有序元组上排列的通常定义，`((0, 0), (0, 0))`. 这正是`itertools.permutations`给你的。

您可以查看其`permutations`工作原理并自己编写一个`permutations_without_duplicates`函数，或者您可以使用文档的“[食谱](http://docs.python.org/2/library/itertools.html#recipes)”部分中的`unique_everseen`函数，或者您可以对结果进行排序并使用, 或……好吧，让我们选择一个：`unique_justseen`

```
def one_duplicate_element_no_duplicates(n):
    yield from unique_everseen(one_duplicate_element(n)) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T19:57:43.187

```
from itertools import product    

def duplicates(r):
    r_len = len(r)
    dup_len = r_len - 1
    for tup in product(r, repeat=r_len):
        if len(set(tup)) == dup_len:
            yield tup

>>> list(duplicates(range(2)))
[(0, 0), (1, 1)]

>>> list(duplicates(range(3)))
[(0, 0, 1),
 (0, 0, 2),
 (0, 1, 0),
 (0, 1, 1),
 (0, 2, 0),
 (0, 2, 2),
 (1, 0, 0),
 (1, 0, 1),
 (1, 1, 0),
 (1, 1, 2),
 (1, 2, 1),
 (1, 2, 2),
 (2, 0, 0),
 (2, 0, 2),
 (2, 1, 1),
 (2, 1, 2),
 (2, 2, 0),
 (2, 2, 1)] 
```

我机器上的一些基准测试：

```
%timeit all(duplicates(range(5)))
100 loops, best of 3: 2.5 ms per loop

%timeit all(duplicates(range(6)))
10 loops, best of 3: 38.6 ms per loop

%timeit all(duplicates(range(7)))
1 loops, best of 3: 766 ms per loop

%timeit all(duplicates(range(8)))
1 loops, best of 3: 18.8 s per loop 
```

# javascript - 有效处理浏览器历史记录和后退按钮

> ID：14861535
> 
> 赞同：1
> 
> 时间：2013-02-13T19:33:39.303
> 
> 标签：javascript, html, jquery, jquery-plugins

**我所拥有的：** 一个使用以下脚本显示页面的网站：

```
var FluidNav = {
    init: function() {
        $("a[href*=#]").click(function(e) {
        e.preventDefault();
            if($(this).attr("href").split("#")[1]) {
                FluidNav.goTo($(this).attr("href").split("#")[1]);
            }
        });
        this.goTo("home");
    },
    goTo: function(page) {
        var next_page = $("#"+page);
        var nav_item = $('nav ul li a[href=#'+page+']');
        $("nav ul li").removeClass("current");
        nav_item.parent().addClass("current");
        FluidNav.resizePage((next_page.height() + 40), true, function() {
             $(".page").removeClass("current"); next_page.addClass("current"); 
        });
        $(".page").fadeOut(500);
        next_page.fadeIn(500); 
```

单击链接时，URL 栏中的 URL 不会更改，但会显示内容。无法使用浏览器后退按钮。内部链接带有`#hash`标签。例如：`abc.com/#home`，，`abc.com/#services`。但是，如果我`abc.com/#services`在 URL 栏中输入，我将被重定向到该`#home`页面。

**我想要实现的目标：** 当我单击一个链接时，要更改的 URL，以及将其记录在其历史记录中的浏览器。当我按下后退按钮时，该站点会生成我之前访问的页面的内容。当我打开一个新标签并输入`abc.com/#services`时，将被发送到`#services`页面而不是主页

**我尝试过** 的这些是我阅读过的资源和我尝试过的解决方案：

*   使用此处描述的 History.js 方法： [https](https://github.com/browserstate/history.js/) ://github.com/browserstate/history.js/我填写了所有步骤并将脚本输入到标题中，但是当我单击时，只有 URL 栏中的 URL 会发生变化一条链接。当我单击“后退”按钮时，URL 会相应更改，但不会加载内容。当我在 URL 栏中输入 URL 时，我会被发送到主页。
*   此处描述的 Ajaxify 和 Gist 方法：[https](https://github.com/browserstate/ajaxify) ://github.com/browserstate/ajaxify 实现与上述相同，问题也相同
*   此处描述的 Davis.js 方法：[https](https://github.com/olivernn/davis.js) ://github.com/olivernn/davis.js 完成安装说明后没有任何效果。没变。
*   此处描述的 jQuery BBQ 插件方法：[http](http://benalman.com/projects/jquery-bbq-plugin/) : //benalman.com/projects/jquery-bbq-plugin/ 什么都没有，在加载网站标题中的 .js 文件时没有任何变化。
*   我读了这篇文章并理解了它：[http ://diveintohtml5.info/history.html](http://diveintohtml5.info/history.html)

尽管我做出了努力，但我的网站正在使用的代码中似乎有一些东西妨碍了上述方法。

非常感谢任何有关如何解决此问题的建议。

# mysql - mysql 默认插入 current_user()

> ID：14861536
> 
> 赞同：0
> 
> 时间：2013-02-13T19:33:39.503
> 
> 标签：mysql, default-value

我有一张像

创建表尝试（名字varchar（4），用户名varchar（4））

我的问题是，有没有办法在默认情况下在用户名字段中插入 current_user() 或 user() 值。

因此，例如，如果我以“abcduser”身份登录数据库，那么

> 插入尝试值（'kashif'）；
> 
> 从尝试中选择 *
> 
> 卡希夫 abcduser

这可能吗，我如何通过执行 ARRIVAL_TIME timestamp not null DEFAULT CURRENT_TIMESTAMP 之类的操作来插入默认时间戳

这是不可能的，那么有什么替代方案？

# java - JAVA遍历json对象

> ID：14861544
> 
> 赞同：-1
> 
> 时间：2013-02-13T19:33:58.207
> 
> 标签：java, json, jackson

我有这个 JSON 对象（[https://gist.github.com/anonymous/4947388/raw/9efc07f1ac8442c459cf3c6c912d953e2efc6949/stackoverflow.json](https://gist.github.com/anonymous/4947388/raw/9efc07f1ac8442c459cf3c6c912d953e2efc6949/stackoverflow.json)），我想遍历并访问特定键的值，如 streetAdress 或 surname 并将它们存储为字符串. 我想使用 JSON Object 或 jackson 在 Java 中执行此操作，有什么提示吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:45:34.577

```
String JSON_DATA;

String streetAddress = "";
String surname       = "";

int tempPos = JSON_DATA.indexOf("StreetAddress");
streetAddress = JSON_DATA.substring(tempPos+14)
int deliminator = streetAddress.indexOf(",");
streetAddress = streetAddress.substring(0,deliminator); 
```

现在 streetAddress 里面有 Street address 的值

现在对姓氏做同样的事情

# xpath - XPath 大于运算符？

> ID：14861546
> 
> 赞同：1
> 
> 时间：2013-02-13T19:34:02.530
> 
> 标签：xpath, eventlog-source

我正在尝试选择某个日期之后的所有事件日志条目。到目前为止，我认为我得到了等于，但我不知道如何将其更改为大于指定日期......如此接近但到目前为止！

```
<QueryList>
  <Query Id="0" Path="Application">
    <Select Path="Application">*[System[TimeCreated[@SystemTime='2013-01-01T12:21:25.0000000']]]</Select>
  </Query>
</QueryList> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T00:42:35.317

我找到了为 EventLog 创建 XPath 查询的最佳方法。请参阅[此处](http://technet.microsoft.com/en-us/library/cc709635.aspx)了解如何创建自定义视图。创建自定义视图后，使用所需的任何过滤器，只需单击 XML，瞧，它会向您显示它自己构建的 XPath 查询！

下一个挑战是日期的格式。我用这个：“yyyy-MM-ddThh:mm:ss:fffZ”

我还认为您不能创建一个过滤器，显示此日期之后的所有内容。所以我只是在我想要的日期和当前日期之间重新创建了一个范围。

为了完整起见，这是我创建的过滤器（谁为这个设计了规格？）

```
<QueryList>
<Query Id="0" Path="Application">
<Select Path="Application">*[System[(Level=1 or Level 2 or Level=3) and TimeCreated[@SystemTime&gt;='2013-01-01T12:00:00:000Z' and @SystemTime&lt;='2013-02-13T05:30:34:948Z']]]</Select>
</Query>
</QueryList> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:47:54.223

使用这样的东西：

```
*[System[TimeCreated[
    number(translate(substring-before(@SystemTime, 'T'), '-', '')) > 20130101]]] 
```

如果您需要考虑整个字符串，则删除比较不必要的所有内容：

```
*[System[TimeCreated[
    number(translate(@SystemTime, '-T:.', '')) > 201301011221250000000]]] 
```

# .net - 3.75 的 Math.Round 问题

> ID：14861549
> 
> 赞同：0
> 
> 时间：2013-02-13T19:34:17.867
> 
> 标签：.net, rounding

我怎样才能使 Math.Round 从 3.75 到 3.7？

我尝试了以下选项：

```
Math.Round(3,75d,1,MidpointRounding.AwayFromZero) == 3.8
Math.Round(3,75d,1,MidpointRounding.ToEven) == 3.8 
```

编辑：一些上下文。我需要 3.6、3.5、4.2 和 3.7 的平均值，但要求是 3.7 超过 3.8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:39:58.267

我认为您不能使用`Math.Floor`. 但你可以尝试：

```
Math.Floor(num * 10) / 10 
```

我相信`Math.Floor`返回双倍。所以这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:38:29.077

```
n = 3.75;
a = System.Math.Round (n, 2, MidpointRounding.ToEven);       // 3.70
b = System.Math.Round (n, 2, MidpointRounding.AwayFromZero); // 3.80 
```

也试试`Math.Floor`

用于`a`您的工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T09:32:38.810

因此，而不是=x.5 = x+1的*常规规则，即。*1.04 轮到 1.0 和 1.05 轮到 1.1。你想永远下去吗？

您可以使用 Floor 来执行此操作（如之前的回复所示），但我认为这会给负数带来问题 - 您必须进行一些测试（因此您需要使用 'if' 子句来代替使用 ceiling如果您的号码<0。

# android - ZXing 将 Bitmap 转换为 BinaryBitmap

> ID：14861553
> 
> 赞同：10
> 
> 时间：2013-02-13T19:34:26.083
> 
> 标签：android, zxing

我正在使用 OpenCV 和 Zxing，我想添加二维码扫描。我有几种类型的图像可以发送。可能最好的是 Bitmat（另一个选项是 OpenCV Mat）。

看起来您曾经能够像这样进行转换：

```
Bitmap frame = //this is the frame coming in

LuminanceSource source = new RGBLuminanceSource(frame);
BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));

//then I can use reader.decode(bitmap) to decode the BinaryBitmap 
```

但是，RGBLuminaceSource 看起来不再需要位图作为输入。那么我还能如何将输入图像转换为 BinaryBitmap ？？？

# 编辑：

好的，所以我相信我已经取得了一些进展，但我仍然遇到问题。我想我有将位图转换为正确格式的代码，但是我现在得到了一个 arrayIndexOutOfBounds

```
public void zxing(){
    Bitmap bMap = Bitmap.createBitmap(frame.width(), frame.height(), Bitmap.Config.ARGB_8888);
    Utils.matToBitmap(frame, bMap);
    byte[] array = BitmapToArray(bMap);
    LuminanceSource source = new PlanarYUVLuminanceSource(array, bMap.getWidth(), bMap.getHeight(), 0, 0, bMap.getWidth(), bMap.getHeight(), false);

    BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
    Reader reader = new DataMatrixReader();
    String sResult = "";
    try {
        Result result = reader.decode(bitmap);
        sResult = result.getText();
        Log.i("Result", sResult);
        }
    catch (NotFoundException e) {
            Log.d(TAG, "Code Not Found");
            e.printStackTrace();
    }
}

public byte[] BitmapToArray(Bitmap bmp){
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bmp.compress(Bitmap.CompressFormat.JPEG, 50, stream);
    byte[] byteArray = stream.toByteArray();
    return byteArray;
} 
```

我得到错误

```
02-14 10:19:27.469: E/AndroidRuntime(29736): java.lang.ArrayIndexOutOfBoundsException: length=33341; index=34560 02-14 10:19:27.469: E/AndroidRuntime(29736):   at 
com.google.zxing.common.HybridBinarizer.calculateBlackPoints(HybridBinarizer.java:199) 
```

我已经记录了 byte[] 的大小，它就是上面显示的长度。我不明白为什么 zxing 期望它更大

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T14:05:21.947

好，我知道了。正如 Sean Owen 所说，PlanarYUVLuminaceSource 仅适用于默认的 android 相机格式，我猜 OpenCV 不会使用这种格式。简而言之，您可以这样做：

```
//(note, mTwod is the CV Mat that contains my datamatrix code)

Bitmap bMap = Bitmap.createBitmap(mTwod.width(), mTwod.height(), Bitmap.Config.ARGB_8888);
Utils.matToBitmap(mTwod, bMap);
int[] intArray = new int[bMap.getWidth()*bMap.getHeight()];  
//copy pixel data from the Bitmap into the 'intArray' array  
bMap.getPixels(intArray, 0, bMap.getWidth(), 0, 0, bMap.getWidth(), bMap.getHeight());  

LuminanceSource source = new RGBLuminanceSource(bMap.getWidth(), bMap.getHeight(),intArray);

BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));
Reader reader = new DataMatrixReader();     
//....doing the actually reading
Result result = reader.decode(bitmap); 
```

就这样，一点都不难。只需要将 Android 位图转换为整数数组，这就是小菜一碟。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-03-17T00:31:36.413

```
public static String readQRImage(Bitmap bMap) {
    String contents = null;

    int[] intArray = new int[bMap.getWidth()*bMap.getHeight()];  
    //copy pixel data from the Bitmap into the 'intArray' array  
    bMap.getPixels(intArray, 0, bMap.getWidth(), 0, 0, bMap.getWidth(), bMap.getHeight());  

    LuminanceSource source = new RGBLuminanceSource(bMap.getWidth(), bMap.getHeight(), intArray);
    BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(source));

    Reader reader = new MultiFormatReader();// use this otherwise ChecksumException
    try {
        Result result = reader.decode(bitmap);
        contents = result.getText(); 
        //byte[] rawBytes = result.getRawBytes(); 
        //BarcodeFormat format = result.getBarcodeFormat(); 
        //ResultPoint[] points = result.getResultPoints();
    } catch (NotFoundException e) { e.printStackTrace(); } 
    catch (ChecksumException e) { e.printStackTrace(); }
    catch (FormatException e) { e.printStackTrace(); } 
    return contents;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T17:18:32.813

`Bitmap`是一个安卓类。Android 来自相机的默认图像格式是平面 YUV 格式。这就是为什么只有`PlanarYUVLuminanceSource`Android 需要并且存在。`RGBLuminanceSource`将不得不被移植。

您将完全错误的数据类型放入课程中。它需要 YUV 平面格式的像素。您正在传递 JPEG 文件的压缩字节。

# ruby-on-rails - Ruby 中的“冒号”表示法

> ID：14861558
> 
> 赞同：0
> 
> 时间：2013-02-13T19:34:41.423
> 
> 标签：ruby-on-rails, ruby

我是新手`Ruby`，并试图阅读/理解一些`rb`文件。我遇到过这条线。谁能解释它在做什么（以及它背后的语法含义）？

```
@account = current_user.accounts.find(params[:id]) 
```

*   **1：**什么是`current_user`？我 grepped 了整个文件，但没有看到它是在哪里声明的。（好吧，我知道变量不需要在 Ruby 中声明，但它没有用 @ 符号引用，所以这可能不是变量？）我应该在哪里找到`current_user`？（即，在`app/model`，，`app/view`等？）

*   **2：**是什么意思`:id`？ `params`看起来像一个数组，所以我想`:id`不知何故意味着索引，但为什么会有`colon`before `id`？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:43:27.950

> 什么是`current_user`？

通常很难区分局部变量和被调用的方法。这是因为`()`是可选的，并且经常被省略。在这种情况下，`current_user`是一个方法，在某个地方的 mixin 或超类中声明，这就是它不在此文件中的原因。想想`current_user.accounts`as `current_user().accounts`，它应该说明那里发生了什么。

> 我应该在哪里找到`current_user`？

最有可能的是，它在处理项目身份验证的插件或 gem 中提供。在不了解您的项目的情况下，很难提供更多建议。

> 是什么意思`:id`？`params`

它通过它的键从哈希中提取一个值。在 irb 中，试试这个：

```
params = { :id => 123 }
puts params[:id] # => prints 123 
```

所以 params 是一个散列（一些语言将此数据类型称为关联数组或字典）。这是一种存储一组键/值对的方法。该`somehash[somekey]`表示法返回`somekey`in的值`somehash`。

`:id`本身就是一个符号。它有点像一个永远不会改变的字符串。对红宝石符号进行一些研究以了解更多信息。

而在rails中，`params`是一个特殊的哈希。从请求中传递的值显示在此哈希中。`/books/:id`因此，当您加载时，路线将处于活动状态`/books/123`，这将在控制器中设置`params[:id]`为。`123`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:41:03.987

1.  Current user is likely provided by a gem. Example of a gem would be [Devise](https://github.com/plataformatec/devise).

2.  "params" is a hash of the parameters passed as the query string on the URI. So, ":id" would reference the value of the id parameter.

Example:

www.domain.com?id=abc would yield params[:id] as "abc".

# android - 使用android相机更改关键帧间隔

> ID：14861565
> 
> 赞同：2
> 
> 时间：2013-02-13T19:35:11.920
> 
> 标签：android, android-camera, keyframe

`keyframe`使用android相机时有没有办法改变a的频率？我正在使用意图来录制视频，然后使用`MediaMetaDataRetriever`类来提取帧，但是`keyframes`它们之间的距离太远了，我不喜欢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T14:33:49.473

您可以通过 OPTION_CLOSEST 使用 getFrameAtTime (long timeUs, int option) 来获取不是关键帧的帧，因此您可以访问您想要的任何帧。

唯一的问题是这个帧不是关键帧，所以它可以被像素化。

# android - 光标错误android

> ID：14861568
> 
> 赞同：0
> 
> 时间：2013-02-13T19:35:20.233
> 
> 标签：android, android-cursor

每当我使用 Cursor 对象从数据库中检索数据时，我的应用程序每次都会崩溃。我必须为此采取什么预防措施？请帮忙

在这个例子中，我有一个简单的表单和一个提交按钮。提交后，将在微调器中显示火车名称列表。

错误

```
02-14 00:38:48.428: E/AndroidRuntime(456): FATAL EXCEPTION: main
02-14 00:38:48.428: E/AndroidRuntime(456): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.spinnerexample/com.example.spinnerexample.MainActivity}: java.lang.NullPointerException02-14 00:38:48.428: E/AndroidRuntime(456):     atandroid.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-14 00:38:48.428: E/AndroidRuntime(456):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-14 00:38:48.428: E/AndroidRuntime(456):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-14 00:38:48.428: E/AndroidRuntime(456):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-14 00:38:48.428: E/AndroidRuntime(456):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-14 00:38:48.428: E/AndroidRuntime(456):  at android.os.Looper.loop(Looper.java:123)
02-14 00:38:48.428: E/AndroidRuntime(456):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-14 00:38:48.428: E/AndroidRuntime(456):  at java.lang.reflect.Method.invokeNative(Native Method)
02-14 00:38:48.428: E/AndroidRuntime(456):  at java.lang.reflect.Method.invoke(Method.java:507)
02-14 00:38:48.428: E/AndroidRuntime(456):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-14 00:38:48.428: E/AndroidRuntime(456):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-14 00:38:48.428: E/AndroidRuntime(456):  at dalvik.system.NativeStart.main(Native Method)
02-14 00:38:48.428: E/AndroidRuntime(456): Caused by: java.lang.NullPointerException
02-14 00:38:48.428: E/AndroidRuntime(456):  at com.example.spinnerexample.MainActivity.onCreate(MainActivity.java:42)
02-14 00:38:48.428: E/AndroidRuntime(456):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-14 00:38:48.428: E/AndroidRuntime(456):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-14 00:38:48.428: E/AndroidRuntime(456):  ... 11 more 
```

我的光标对象 java 文件

```
 public class AddTrains {

    private static final int DB_VERSION = 1;
    private static final String DB_NAME = "mydb";
    private static final String TABLE_NAME = "trains";
    private static final String KEY_ID = "_id";
    private static final String KEY_TRAIN_NAME = "train_name";
    private static final String KEY_TRAIN_NUMBER = "train_number";
    private static final String KEY_HALT1 = "halt1";
    private static final String KEY_HALT2 = "halt2";
    private static final String KEY_HALT3 = "halt3";
    private static final String KEY_HALT4 = "halt4";
    private static final String KEY_HALT5 = "halt5";

    private DBHelper ourHelper;
    private final Context context;
    private SQLiteDatabase ourDatabase;

    private static final class DBHelper extends SQLiteOpenHelper {

    public DBHelper(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
        // TODO Auto-generated constructor stub
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        db.execSQL("CREATE TABLE " + TABLE_NAME + " (" +
                KEY_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                KEY_TRAIN_NAME + " TEXT NOT NULL, " +
                KEY_TRAIN_NUMBER + " TEXT NOT NULL, " +
                KEY_HALT1 + " TEXT NOT NULL, " +
                KEY_HALT2 + " TEXT NOT NULL, " +
                KEY_HALT3 + " TEXT NOT NULL, " +
                KEY_HALT4 + " TEXT NOT NULL, " +
                KEY_HALT5 + " TEXT NOT NULL); "
                );

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        onCreate(db);
    }
    }

    public AddTrains(Context c){
        context = c;
    }

    public AddTrains open() throws SQLException{

        ourHelper = new DBHelper(context);
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    public void close(){

        ourHelper.close();
    }

    public long createEntry(String tname, int tnumber, String stop1,
            String stop2, String stop3, String stop4, String stop5) {
        // TODO Auto-generated method stub
        ContentValues cv = new ContentValues();
        cv.put(KEY_TRAIN_NAME, tname);
        cv.put(KEY_TRAIN_NUMBER, tnumber);
        cv.put(KEY_HALT1, stop1);
        cv.put(KEY_HALT2, stop2);
        cv.put(KEY_HALT3, stop3);
        cv.put(KEY_HALT4, stop4);
        cv.put(KEY_HALT5, stop5);
        return ourDatabase.insert(TABLE_NAME, null, cv);
    }

    public Set<String> getAllData() {
        // TODO Auto-generated method stub
        Set<String> set = new HashSet<String>();
        String selectQuery = "select * from " + TABLE_NAME;
        Cursor cursor = ourDatabase.rawQuery(selectQuery, null);
        Log.d("Count",cursor.getCount()+""); 
        if(cursor.getCount() > 0){
        if (cursor.moveToFirst()) {
        do {
        set.add(cursor.getString(1));
        } while (cursor.moveToNext());
        }
        }
        cursor.close();
        return set;
    }
} 
```

主要活动文件

```
public class MainActivity extends Activity implements OnClickListener {

    EditText train_name, train_number, halt1, halt2, halt3, halt4, halt5;
    Button submit;
    Spinner spinner;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        train_name = (EditText) findViewById(R.id.train_name);
        train_number = (EditText) findViewById(R.id.train_no);
        halt1 = (EditText) findViewById(R.id.halt1);
        halt2 = (EditText) findViewById(R.id.halt2);
        halt3 = (EditText) findViewById(R.id.halt3);
        halt4 = (EditText) findViewById(R.id.halt4);
        halt5 = (EditText) findViewById(R.id.halt5);
        spinner = (Spinner) findViewById(R.id.spinner1);

        submit.setOnClickListener(this);

        AddTrains db = new AddTrains(this);
        db.open();
        Set<String> set = db.getAllData();
           //Convert set into list
        List<String> list = new ArrayList<String>(set);
          //Sort Data Alphabetical order
        Collections.sort(list, new Comparator<String>() {
        @Override
        public int compare(String lhs, String rhs) {
        return lhs.compareTo(rhs);
        }
        });
        ArrayAdapter adapter = new ArrayAdapter<String>(MainActivity.this,
                android.R.layout.simple_spinner_item, list);
        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);

        spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View v, int position,long id) {
                 String name = parent.getItemAtPosition(position).toString();
               Toast.makeText(getApplicationContext(), "You Selected: "+ name, Toast.LENGTH_LONG ).show();
                   }
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
            }
                });
        db.close();
    }

    public void onClick(View v){
        switch(v.getId()){

        case R.id.button1:
            boolean DidItWorked = true;

            try{
                String tname = train_name.getText().toString();
                int tnumber = Integer.parseInt(train_number.getText().toString());
                String stop1 = halt1.getText().toString();
                String stop2 = halt2.getText().toString();
                String stop3 = halt3.getText().toString();
                String stop4 = halt4.getText().toString();
                String stop5 = halt5.getText().toString();

                AddTrains at = new AddTrains(this);
                at.open();
                at.createEntry(tname, tnumber, stop1, stop2, stop3, stop4, stop5);
                at.close();
            }catch(SQLiteException e){

            }
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:45:21.920

多个问题：

1.  Delcared 按钮，设置一个侦听器，但从未在 xml 中创建或查找。

    ```
    Button submit;
    submit.setOnClickListener(this); 
    ```

    你失踪了吗

    ```
    submit=(Button)findViewById(R.id.awesome_button); 
    ```

2.  你确定这是你的意思吗？

    ```
    while (cursor.moveToNext()); 
    ```

3.  你查过42号线吗？请指出这条线在哪里

    ```
    02-14 00:38:48.428: E/AndroidRuntime(456): Caused by: java.lang.NullPointerException
    02-14 00:38:48.428: E/AndroidRuntime(456):  at com.example.spinnerexample.MainActivity.onCreate(MainActivity.java:42) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T23:58:30.743

如果您解决了这个问题，最好将您的发现发布给其他人（比如我 :) 学习。

我*经常*做的一件事是在任何有 catch 块的地方放一个 Log.d msg。例如，你有

```
public void onClick(View v){
    switch(v.getId()){

    case R.id.button1:
        boolean DidItWorked = true;

        try{
            String tname = train_name.getText().toString();
            // snip ...  
            at.createEntry(tname, tnumber, stop1, stop2, stop3, stop4, stop5);
            at.close();
        }catch(SQLiteException e){

        } 
```

那么如果它在那里爆炸会发生什么？你得到一个堆栈跟踪转储 - 你的应用程序在用户身上崩溃。我建议这样做：

```
 }catch(SQLiteException e){
            Log.d ("OMG", "button1::onClick() caught exception: " + e.toString() ) ;
            // do nothing or some clean up ... but app will likely keep chugging along  
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:39:48.833

您正在取消引用一个空指针。ourDatabase 为 null，或者 rawQuery 返回 null。检查第 42 行，如果其查询语句为数据库，则为空，否则为游标。如何解决它取决于你在那里找到什么。

# file-upload - 文件传输、浏览器到浏览器、本地网络

> ID：14861570
> 
> 赞同：1
> 
> 时间：2013-02-13T19:35:34.047
> 
> 标签：file-upload, upload, download

浏览器到浏览器的文件传输如何工作。我可以很好地猜测[这个](http://www.justbeamit.com/)网站是如何做到的，因为文件是通过第三方服务器传输的。我想知道如何建立类似[这个](http://www.filesovermiles.com/)网站的东西。它声称该文件不会触及第三方服务器（如果不需要，例如通过家庭或办公室网络共享文件），并且所达到的速度似乎证实了这一点。

# java - SNMP4J：如何通过团体字符串限制接收到的陷阱或至少知道陷阱的团体字符串？

> ID：14861571
> 
> 赞同：1
> 
> 时间：2013-02-13T19:35:37.753
> 
> 标签：java, snmp, snmp4j, snmp-trap

我编写了一个基于 SNMP4J 的应用程序，用于发送 SNMP 请求和接收陷阱。一切正常，但我找不到如何为收到的陷阱设置社区字符串，甚至找不到如何查看每个收到的陷阱的社区字符串。

帮助将受到高度评价

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:23:59.810

在里面`public void processPdu(CommandResponderEvent event)`，以下将获得社区名称：

`String community = new String(event.getSecurityName());`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-11T08:48:26.413

恐怕这不是真正的“社区名称”。

“event.getSecurityName()”方法只给你这个陷阱包的“SecurityName”。它是在您在设备上配置陷阱信息时设置的。

真正的“社区名称”用于通过 SNMPv2 API 配置设备。例如，设备的团体为“public”，您可以设置安全名称为“mypublic”的SNMPv2c Trap信息。然后，您将通过调用 event.getSecurityName() 获得“mypublic”，而不是“public”。

# python - 为什么某些 python 内置“函数”实际上是类型？

> ID：14861572
> 
> 赞同：12
> 
> 时间：2013-02-13T19:35:47.223
> 
> 标签：python

模块中的许多迭代器“函数”`__builtin__`实际上是作为类型实现的，即使文档将它们称为“函数”。举个例子`enumerate`。该文档说它相当于：

```
def enumerate(sequence, start=0):
    n = start
    for elem in sequence:
        yield n, elem
        n += 1 
```

当然，这正是我会实施的。但是，我使用之前的定义运行了以下测试，并得到了这个：

```
>>> x = enumerate(range(10))
>>> x
<generator object enumerate at 0x01ED9F08> 
```

这是我所期望的。但是，在使用该`__builtin__`版本时，我得到了这个：

```
>>> x = enumerate(range(10))
>>> x
<enumerate object at 0x01EE9EE0> 
```

由此我推断它被定义为

```
class enumerate:
    def __init__(self, sequence, start=0):
        # ....

    def __iter__(self):
        # ... 
```

而不是文档显示的*标准形式。*现在我可以理解它是如何工作的，以及它是如何等同于*标准*形式的，我想知道这样做的原因是什么。这种方式效率更高吗？它是否与在 C 中实现的这些函数有关（我不知道它们是否是，但我怀疑是这样）？

我正在使用 Python 2.7.2，以防差异很重要。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T19:39:00.323

是的，这与内置函数通常在 C 中实现这一事实有关。实际上，C 代码通常会引入新类型而不是普通函数，例如`enumerate`. 用 C 语言编写它们可以更好地控制它们，并且通常会提高一些性能，并且由于没有真正的缺点，这是一个自然的选择。

考虑到编写相当于：

```
def enumerate(sequence, start=0):
    n = start
    for elem in sequence:
        yield n, elem
        n += 1 
```

在 C 中，即*生成器的新实例*，您应该创建一个包含实际字节码的代码对象。这不是不可能的，但并不比编写一个简单地实现`__iter__`和`__next__`调用 Python C-API 的新类型容易，再加上拥有不同类型的其他优点。

所以，在 and 的情况下`enumerate`，`reversed`这仅仅是因为它提供了更好的性能，并且更易于维护。

其他优点包括：

*   您可以将方法添加到类型（例如`chain.from_iterable`）。即使使用函数也可以做到这一点，但是您必须先定义它们，然后手动设置属性，这看起来不太干净。
*   您可以`isinstance`在可迭代对象上使用我们。这可能允许一些优化（例如，如果您知道`isinstance(iterable, itertools.repeat)`，那么您可能能够优化代码，因为您知道将产生哪些值。

* * *

编辑：只是为了澄清我的意思：

> 在 C 中，即生成器的新实例，您应该创建一个包含实际字节码的代码对象。

查看`Objects/genobject.c`创建`PyGen_Type`实例的唯一函数是`PyGen_New`其签名是：

```
PyObject *
PyGen_New(PyFrameObject *f) 
```

现在，`Objects/frameobject.c`我们可以看到要创建一个`PyFrameObject`you *must* call `PyFrame_New`，它具有以下签名：

```
PyFrameObject *
PyFrame_New(PyThreadState *tstate, PyCodeObject *code, PyObject *globals,
            PyObject *locals) 
```

如您所见，它*需要*一个`PyCodeObject`实例。`PyCodeObject`s 是python解释器如何在内部表示字节码（例如 a`PyCodeObject`可以表示函数的字节码），所以：**是的，`PyGen_Type`要从 C 创建一个实例，您必须手动创建字节码**，而且创建 s 并不容易，`PyCodeObject`因为`PyCode_New`有这个签名：

```
PyCodeObject *
PyCode_New(int argcount, int kwonlyargcount,
           int nlocals, int stacksize, int flags,
           PyObject *code, PyObject *consts, PyObject *names,
           PyObject *varnames, PyObject *freevars, PyObject *cellvars,
           PyObject *filename, PyObject *name, int firstlineno,
           PyObject *lnotab) 
```

请注意它如何包含诸如 之类的参数`firstlineno`，`filename`这些参数显然是由 python 源而不是从其他 C 代码中获取的。显然，您可以在 C 中创建它，但我完全不确定它是否需要比编写简单的新类型更少的字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T20:02:39.207

是的，它们是用 C 实现的。它们将 C API 用于迭代器（[PEP 234](http://www.python.org/dev/peps/pep-0234/)），其中迭代器是通过创建具有`tp_iternext`插槽的新类型来定义的。

由生成器函数语法 ( `yield`) 创建的函数是返回特殊生成器对象的“神奇”函数。这些是 的实例`types.GeneratorType`，您无法手动创建。如果使用 C API 的不同库定义了自己的迭代器类型，它不会是 的实例`GeneratorType`，但仍会实现 C API 迭代器协议。

因此，该`enumerate`类型是不同于 的独特类型，`GeneratorType`您可以像使用任何其他类型一样使用它，`isinstance`例如（尽管您不应该）。

* * *

与 Bakuriu 的答案不同，`enumerate`它不是生成器，因此没有字节码/帧。

```
$ grep -i 'frame\|gen' Objects/enumobject.c
    PyObject_GenericGetAttr,        /* tp_getattro */
    PyType_GenericAlloc,            /* tp_alloc */
    PyObject_GenericGetAttr,        /* tp_getattro */
    PyType_GenericAlloc,            /* tp_alloc */ 
```

相反，您创建新枚举对象的方式是使用 function `enum_new`，其签名不使用框架

```
static PyObject *
enum_new(PyTypeObject *type, PyObject *args, PyObject *kwds) 
```

这个函数被放置在结构（类型）的`tp_new`槽内。在这里，我们还看到该槽被函数占用，该函数包含简单的 C 代码，该代码获取它正在枚举的迭代器的下一项，然后返回一个 PyObject（一个元组）。`PyEnum_Type``PyTypeObject``tp_iternext``enum_next`

继续前进，`PyEnum_Type`然后将其放入`Python/bltinmodule.c`名为 的内置模块 ( ) 中`enumerate`，以便可以公开访问。

不需要字节码。纯 C。比任何纯 python 或`generatortype`实现都高效得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-28T20:44:57.027

该`enumerate`调用需要返回一个迭代器。迭代器是具有特定 API 的对象。使用特定 API 实现类的最简单方法通常是将其实现为类。

它说“类型”而不是“类”的原因是 Python 2 特定的，因为内置类在 Python 2 中被称为“类型”，因为 Python 的其余部分在 Python 2.2 之前同时具有类型和类。在 Python 2.3 中，类和类型是统一的。因此，在 Python 3 中，它表示类：

```
>>> enumerate
<class 'enumerate'> 
```

这更清楚地表明您的问题**“为什么某些内置类型而不是函数”**与它们在 C 中实现几乎没有关系。它们是类型/类，因为这是实现功能的最佳方式。就这么容易。

现在，如果我们将您的问题解释为**“为什么是`enumerate`类型/类而不是生成器”**（这是一个非常不同的问题），那么答案自然也会不同。答案是生成器是从 Python 函数创建迭代器的 Python 快捷方式。它们不适合从 C 中使用。它们对于从函数中生成生成器的用处也比在类方法中生成生成器的用处小，就好像你想从你还需要传入对象上下文的类方法中创建一个迭代器对象一样，但有了一个功能，你就不需要这个了。所以这主要是你有更少的“脚手架”代码的好处。

# wordpress - 无法调整 html 时将 div 框居中

> ID：14861575
> 
> 赞同：0
> 
> 时间：2013-02-13T19:36:01.903
> 
> 标签：wordpress, html, center

我正在尝试调整 CSS，使“产品”和产品信息居中而不是向左浮动我无法通过添加到 WP 帖子中的短代码来调整 HTML，但也许我可以将它包装在 div 中？

**HTML：**

```
<ul class="products ribbon"> 
    <li class="product last first">
    <a href="http://dailybabydeals.co.nz/shop/estella-rose-designs/">
        <div class="thumbnail">
    <span class="onsale">Sale!</span>   
<img width="325" height="325" src="http://dailybabydeals.co.nz/wp-content/uploads/2013/02/Front-Page-325x325.jpg" class="attachment-shop_catalog wp-post-image" alt="Front Page" />         
   <div class="thumb-shadow"></div>
     <strong class="below-thumb">Estella Rose Designs</strong> 
</div>
    <span class="price"><span class="from">From: </span><del><span class="amount">&#36;25</span></del> <ins><span class="amount">&#36;19.95</span></ins></span>     
    </a>  
    <div class="buttons">
                <a href="http://dailybabydeals.co.nz/shop/estella-rose-designs/" data-product_id="2221" class="add-to-cart add_to_cart_button product_type_variable">Select options</a></div>           
</li></ul> 
```

**CSS：**

[CSS](http://dailybabydeals.co.nz/wp-content/themes/maya/woocommerce/style.css?ver=3.5.1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:06:57.790

好的，既然我更好地理解了你的问题，让我们再试一次。所以你想把 <ul> 元素作为一个整体居中？这比我最初认为的要简单得多。

为此，您需要做的就是将 <ul> 元素包装在一个设置为显示为内联块的 span 标记中。然后设置包含元素，使其文本居中。

尝试这个：

```
<html>
  <head>
    <style language="text/css">
      /*<![CDATA[ */
      #test1 {
        text-align: center;
      }
      #test2 {
        display: inline-block;
        text-align: left;
      }
      /* ]]> */
    </style>
  </head>
  <body>
    <div id="test1">
      <span id="test2">
        <!-- Place your <ul> element here -->
      </span>
    </div>
  </body>
</html> 
```

**这个怎么运作**

*   “test2”元素设置为显示为内联块，这意味着它与文本内联显示。这意味着它可能会受到操纵文本行的属性的影响，例如“文本对齐”。
*   在“test1”元素上将“text-align”设置为“center”会使内联内容——在本例中为“test2”元素——在屏幕上居中。

使块居中的标准方法是将“margin-right”和“margin-left”属性设置为“auto”，但这仅适用于显示为块且宽度小于 100% 的元素.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:11:31.433

它看起来像文本“Sale！”的原因 浮动到左边的是 <img> 元素默认显示为内联块，因此图像与“Sale！”字样位于同一行文本中。紧跟在文本“Sale！”之后的 <br /> 标签 会解决这个问题；但是你说你不能修改这个 HTML，对吧？

鉴于这种限制，这就是我能够解决问题的方法......
将您示例中的 HTML 放在 <span> 标记中，并为其分配一个类。我使用“test”作为我的类名”。然后将这个 CSS 放在 HTML 文档的头部：

```
<style language="text/css">
  /*<![CDATA[ */
  .thumbnail img {
    display: block;
  }
  .test {
    display: inline-block;
  }
  .test .price, .test .below-thumb  {
    display: block;
    text-align: center;
  }
  /* ]]> */
</style> 
```

**为什么它有效**

*   使图像显示为块的选择器解决了缺少 <br /> 标签的问题。
*   用于包围 HTML 的 span 标签显示为内联块。这意味着它将围绕其内容折叠，为您提供一个可以使文本居中的框。
*   使包含文本的项目显示为块会导致它们占用 100% 的宽度，填充周围的框
*   包含“text-align：center”最终使文本在其容器中居中显示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:48:05.920

我只是把它放在一个 div 中，然后将它浮动到另一个 div 旁边，里面什么都没有。

[http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

就像此链接中的第 8 步一样。

# android - setParameters() 不支持在surfaceChanged() 中传递的宽度和高度？

> ID：14861576
> 
> 赞同：5
> 
> 时间：2013-02-13T19:36:01.387
> 
> 标签：android, surfaceview, preview

从方法surfaceChanged() 调用Camera.setParameters() 时出现RuntimeException 错误。我看到了关于同一问题的其他帖子，但没有找到明确的解决方案： [将参数设置为相机的问题](https://stackoverflow.com/questions/6830723/problem-with-setting-the-parameters-to-camera)

我的问题是：

1.  为什么要在surfaceCreated() 之后立即调用surfaceChanged()？在surfaceCreated() 中启动预览是违反直觉的（至少对我而言），只是为了停止它并在surfaceChanged() 中重新启动另一个预览。

2.  当第一次调用surfaceChanged()时，是什么决定了传入的宽度和高度？正如上述帖子中所建议的，并在我的实验中得到验证，Camera.setParameters() 不一定支持这些值。请参阅下面的代码片段和日志信息。

3.  在调用surfaceChanged() 之前，有没有办法保证Camera.setParameters() 将支持宽度和高度值？可以在 surfaceChanged() 中添加代码以确保这一点。例如，可以将 w 和 h 与所有支持的预览尺寸进行比较，并将其更改为最接近的支持值。但是，这样做会影响性能。

下面的列表是我的代码片段和 LogCat 输出。日志记录信息表明 surfaceChanged() 中的 Camera.setParameters() 导致了错误。如果我注释掉调用 setParameters() 的行，我将不再看到错误消息。

[**编辑**：我正在亚马逊 Kindle Fire HD 上进行测试。Android版本为4.0.3，API 15]

代码片段：

```
public void surfaceCreated(SurfaceHolder holder) {
    // Log & debug
    Log.d(TAG, "surfaceCreated() is called");

    // The Surface has been created, now tell the camera where to draw the preview.
    try {
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();
    } catch (IOException e) {
        Log.d(TAG, "surfaceCreated(): " + e.getMessage());
    }

    if (mHolder.getSurface() == null) {
        Log.d(TAG, "surfaceCreated(): preview surface does not exist yet!");
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // Log & debug
    Log.d(TAG, "surfaceDestroyed() is called");

    // Stop preview and release camera 
    if (holder.getSurface() != null) {
        mCamera.stopPreview();
        //mCamera.release();  //should we release camera here?
        //mCamera = null;
    }
    else {
        Log.d(TAG, "surfaceDestroyed(): preview surface does not exist");
    }
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    // Log and debug
    Log.d(TAG, "surfaceChanged() is called with width = " + w);
    Log.d(TAG, "surfaceChanged() is called with height = " + h);

    // If your preview can change or rotate, take care of those events here.
    // Make sure to stop the preview before resizing or reformatting it.
    if (holder.getSurface() == null) {
      Log.d(TAG, "surfaceChanged(): preview surface does not exist");
      return;
    }

    // stop preview before making changes
    try {
        mCamera.stopPreview();
    } catch (Exception e) {
        Log.d(TAG, "surfaceChanged(): tried to stop a non-existent preview " + e.getMessage());
    }

    // set preview size and make any resize, rotate or
    // reformatting changes here
    Camera.Parameters params = mCamera.getParameters();
    List<Size> mSizes = params.getSupportedPreviewSizes();

    // list all 25 supported preview sizes
    // i==25 will cause an "IndexOutofBoundsException"
    for (int i=0; i<25; i++) {
        Size mSize  = mSizes.get(i);
        if (mSize == null) break;
        Log.d(TAG, "surfaceChanged() i = " + i);
        Log.d(TAG, "surfaceChanged() preview width = " + mSize.width);
        Log.d(TAG, "surfaceChanged() preview height = " + mSize.height);
    }
    Size       mSize  = mSizes.get(0);
    if(mSize != null) { //make sure we don't pull a NullException.
        if (w > mSize.width) w  = mSize.width;
        if (h > mSize.height) h = mSize.height;
        params.setPreviewSize(w, h); //set the size, since we know it. 
    } 
    mCamera.setParameters(params); //set the parameters now. 

    // start preview with new settings
    try {
        mCamera.setPreviewDisplay(holder);
        mCamera.startPreview();
    } catch (Exception e){
        Log.d(TAG, "surfaceChanged() restart preview " + e.getMessage());
    }
} 
```

LogCat 输出：

```
02-13 10:46:08.113: D/CameraPreview(2886): surfaceCreated() is called
02-13 10:46:08.496: D/CameraPreview(2886): surfaceChanged() is called with width = 1072
02-13 10:46:08.496: D/CameraPreview(2886): surfaceChanged() is called with height = 705
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 0
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 1280
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 720
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 1
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 960
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 720
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 2
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 800
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 480
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 3
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 720
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 576
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 4
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 720
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 480
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 5
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 768
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 576
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 6
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 640
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 480
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 7
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 320
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 240
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 8
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 352
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 288
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 9
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 240
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 160
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 10
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 176
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 144
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 11
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 160
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 120
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 12
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 128
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 96
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 13
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 720
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 1280
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 14
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 480
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 800
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 15
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 576
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 720
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 16
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 576
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 768
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 17
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 480
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 720
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 18
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 480
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 640
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 19
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 288
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 352
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 20
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 240
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 320
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 21
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 240
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 160
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 22
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 144
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 176
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 23
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 120
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 160
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() i = 24
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview width = 96
02-13 10:46:08.941: D/CameraPreview(2886): surfaceChanged() preview height = 128
02-13 10:46:08.957: D/AndroidRuntime(2886): Shutting down VM
02-13 10:46:08.957: W/dalvikvm(2886): threadid=1: thread exiting with uncaught exception (group=0x40a6c1f8)
02-13 10:46:08.965: E/AndroidRuntime(2886): FATAL EXCEPTION: main
02-13 10:46:08.965: E/AndroidRuntime(2886): java.lang.RuntimeException: setParameters failed
02-13 10:46:08.965: E/AndroidRuntime(2886):     at android.hardware.Camera.native_setParameters(Native Method)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at android.hardware.Camera.setParameters(Camera.java:1295)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at com.xyz.camera.CameraPreview.surfaceChanged(CameraPreview.java:109)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at android.view.SurfaceView.updateWindow(SurfaceView.java:544)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at android.view.SurfaceView.access$000(SurfaceView.java:81)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:169)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:590)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1630)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2462)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at android.os.Looper.loop(Looper.java:137)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at android.app.ActivityThread.main(ActivityThread.java:4486)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at java.lang.reflect.Method.invokeNative(Native Method)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at java.lang.reflect.Method.invoke(Method.java:511)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
02-13 10:46:08.965: E/AndroidRuntime(2886):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:53:26.550

好吧，您可能会遇到的问题之一是，由于您使用的是 api 15，那么您应该使用 getSupportedVideoSizes()，因为它来自 api 11。我在某些设备上设置参数时遇到了类似的问题（那些正在运行的设备）蜂窝及以上），因为预览大小和支持的视频大小并不总是相同的。

编辑:: 关于您的评论：我会为您的测试设备输出所有支持的预览大小。你已经拥有了。然后我会拿一个（例如：你得到的第二个）并静态设置它以用于测试目的

例如：

```
for int (i = 0; i < mSizes.size(); i ++)
    {
        Log each size;
    } 
```

从中取一个随机大小：例如 480 x 800 并设置它

```
 params.setPreviewSize(480, 800); 
```

这将肯定地告诉您设置预览大小是否会显示正确的大小。

EDIT2：我将再次更新我的答案以澄清我的评论

onSurfaceChanged 里面有两个变量

```
int width = 0;
int height = 0; 
```

那么在你的 if 语句中

```
if (w > mSize.width) width = mSize.width;
if (h > mSize.height) height = mSize.height; 
```

此外，您正在做的是获得相当于

mSizes.get(mSize.size() -1)。因为你 w 和 h 总是会大于 mSize.width 和 mSize.height

编辑 3：根据您的评论确定。您想在 onSufaceCreated() 中初始化相机并将 setPreviewSize(w,h) 更改为 setPreviewSize(mSizes.get(mSizes.size() -1).width, mSizes.get(mSizes.size() -1)。高度）;

然后添加一个函数，将surfaceView设置为你想要的任何大小（）

```
surfaceParams = surfaceView.getLayoutParameters();
surfaceParams.setWidth(somewidthyouwant);
surfaceParams.setHeight(someHeightYouWant);
surfaceView.setLayoutParams(surfaceParams); 
```

这会将您的表面视图设置为您想要的任何大小。

# bash - 从脚本提示符完成 ZSH（如 BASH 的 read -e）

> ID：14861581
> 
> 赞同：4
> 
> 时间：2013-02-13T19:36:28.467
> 
> 标签：bash, zsh, bash-completion, zsh-completion

在 bash shell 脚本中，您可以提示用户输入并使用`-e`标志为用户启用 readline 完成。（例如`read -e -p 'GET YOUR FILE: ' file`，将允许用户使用制表符补全来查找文件。）

ZSH 的补全更高级和可扩展，所以我希望我能找到一个允许类似行为的 zsh 内置函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T19:50:08.550

我确信有更好的答案（我最近才开始尝试使用`zsh`），但您可以使用`vared`.

```
$ vared -c line 
```

# ios - 内容类型 JSON SIGABRT 错误

> ID：14861584
> 
> 赞同：2
> 
> 时间：2013-02-13T19:36:32.433
> 
> 标签：ios, objective-c, json, nsurlrequest

我正在尝试解析 JSON，并得到一个 SIGABRT 错误：`reason: '[<NSURLRequest 0x7e7e970> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key Content-Type.`

我的代码是：

```
self.responseData = [NSMutableData data];
NSURLRequest *request = [NSURLRequest requestWithURL:
                         [NSURL URLWithString:@"http://dmsfw01.dev.com:8082/G.FQI/GVOLFQI.svc/Search(v)?Start=1&Count=10"]];

NSString *contentType = @"application/json";
[request setValue:contentType forKey:@"Content-Type"];

[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

我应该怎么做才能设置 Content-Type？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:39:22.040

您收到错误消息，因为您使用的是[键值编码](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueCoding_Protocol/Reference/Reference.html)方法，该方法尝试根据请求设置名称为 的属性`Content-Type`。您也不能修改 an`NSURLRequest`因为它是不可变的。使用 an[`NSMutableURLRequest`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html)代替，然后调用`- (void)setValue:(NSString *)value forHTTPHeaderField:(NSString *)field`.

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:
                                [NSURL URLWithString:@"http://sw730voldmsfw01.vol1dev.com:8082/GVOL.FQI/GVOLFQI.svc/Search(visa)?Start=1&Count=10"]];

NSString *contentType = @"application/json";
[request setValue:contentType forHTTPHeaderField:@"Content-Type"]; 
```

# matlab - Matlab中判断图像是否灰度

> ID：14861585
> 
> 赞同：6
> 
> 时间：2013-02-13T19:36:33.680
> 
> 标签：matlab, rgb, grayscale

我正在编写一个可以拍摄图像并执行特定平滑任务的函数。在我的函数的最开始，我使用将图像转换为灰度图像`pic = rgb2gray(pic);`

我希望允许该函数拍摄任何图像（即使它已经是灰度的）。在 Matlab 中，如果我将灰度图像传递给它，它当前会出错，因为它无法转换它（这很明显）。

是否有内置功能或简单的方法来测试图像并确定其颜色格式？

我在谷歌上读到了一些关于 isRGB 和 isGrayscale 函数的内容，但它们已从更高版本的 Matlab 中删除......

我想如果它有一个内置的功能，这样的东西会很酷。

```
 if (pic == RGB)
         do
          .
          .
          .
     elseif (pic == GrayScale)
         do
          .
          .
          .
     else 
         do
          .
          .
          . 
```

如果没有，也许我可以编写一个接受 a`pixel x,y`并测试其值的函数？

`if (p(x,y) == ....`或者其他的东西？我不确定...想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T19:41:23.317

Color images have 3 channels (R, G, B), so:

```
size(pic, 3) = 3 
```

For grayscale:

```
size(pic, 3) = 1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-13T23:33:53.733

类似于@Milo 的建议，但功能不同。使用[`ndims`](http://www.mathworks.com/help/matlab/ref/ndims.html)：

```
ndims(pic) 
```

返回图像中的维数`pic`。数组中的维数始终大于或等于 2，在 RGB 图像中为`>2`. 尾随单件维度被忽略（单件维度是`size(A,dim) = 1`.）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-05T12:17:25.213

f=imfinfo('yourimage.someextension');

f.ColorType

这将返回图像的 ColorType，您可以通过编程方式进行检查。

# android - 替换 ListFragment

> ID：14861598
> 
> 赞同：0
> 
> 时间：2013-02-13T19:37:05.780
> 
> 标签：android, fragment

我正在使用 ListFragment 在我的活动中显示来自数据库的列表。我已经包括了一个搜索功能。不幸的是，“旧” ListFragments 似乎保留在后台，并且包含查询结果的 ListFragments 显示在其顶部。如何避免显示旧的 ListFragments？

我的片段活动：

```
private Button buttonSearch; 
    private TextView searchString; 
    public static String search = null; 
    static IShoppinglist shoppinglistManager;
    static IAktionen aktionenManager; 
    private AktionenListListFragment listFragment;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        Log.d(TAG, "ListFragmentActivity created"); 
        super.onCreate(savedInstanceState);
        setContentView(R.layout.articlelist);

        shoppinglistManager = new Shoppinglist(this);
        aktionenManager = new Aktionen(this); 

        buttonSearch = (Button) findViewById(R.id.search_Button);
        buttonSearch.setOnClickListener(searchListAktionen);

        //show all entries on start
        listFragment = new AktionenListListFragment();
        getSupportFragmentManager().beginTransaction().replace(R.id.fragment_articlelist, listFragment).commit();
    }   

    OnClickListener searchListAktionen = new OnClickListener() {
        public void onClick(View v) {

            try{
                searchString = (TextView) findViewById(R.id.input_search_bezeichnung); 
                search = searchString.getText().toString().trim();
                Log.d(TAG, "search Button clicked "+search); 

                if(search.trim().length()==0){
                    search=null;
                }

                //show all entries on start
                listFragment = new AktionenListListFragment();
                getSupportFragmentManager().beginTransaction().replace(R.id.fragment_articlelist, listFragment).commit();

            }catch(Exception ex){
                ex.printStackTrace();
            }
        }
    }; 
```

提前致谢，

更新：

谢谢您的回答。我试图实现它们，但主要问题似乎是现在 ListFragment 中的 onCreate 和 onActivityCreated 方法被调用了两次（正如我在日志消息中看到的那样）。

我的新代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        Log.d(TAG, "ListFragmentActivity created"); 
        super.onCreate(savedInstanceState);

        //force commit
        getSupportFragmentManager().executePendingTransactions();

        if(getSupportFragmentManager().findFragmentByTag(tag) == null) {
            setContentView(R.layout.articlelist);

            shoppinglistManager = new Shoppinglist(this);
            aktionenManager = new Aktionen(this); 

            buttonSearch = (Button) findViewById(R.id.search_Button);
            buttonSearch.setOnClickListener(searchListAktionen);
            listFragment = new AktionenListListFragment();
            getSupportFragmentManager().beginTransaction().replace(R.id.fragment_articlelist, listFragment,tag).commit();
        }else{
            Log.d(TAG, "ListFragment already exists"); 
        }
    } 
```

我试图为我的 ListFragment 设置一个唯一标签，但这个解决方案不起作用。

我猜其中一个 ListFragments 显示在后台，另一个已更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:41:50.230

So first you need to stop making new ListFragments everytime your list is refreshed and just have a public method in your ListFragment that the Activity can call to restart the loader with the proper parameters. Then:

In your onLoadFinished(),

you should make a new adapter with the list you want to replace it with

```
myAdapter = new AktionenListCustomCursorAdapter(getActivity(), myCursor); 
```

and call:

```
this.getListView().setAdapter(myAdapter); 
```

So:

```
 public void onLoadFinished(Loader<Cursor> mAdapter, Cursor myCursor) {
                if(myCursor!=null){
                    //getting the data from the database
                    Log.d(TAG, "search String "+AktionenListFragmentActivity.search);
                    if(AktionenListFragmentActivity.search==null){
                        myCursor = AktionenListFragmentActivity.aktionenManager.fetchAllArticles();
                    }else{
                        myCursor = AktionenListFragmentActivity.aktionenManager.fetchItemsByBezeichnung(AktionenListFragmentActivity.search);
                    }
myAdapter = new AktionenListCustomCursorAdapter(getActivity(), myCursor);
                    this.getListView().setAdapter(myAdapter);
                }
            } 
```

Hopefully this solved your question as I understood it. If you have any questions please leave it in the comment below and I will expand my answer. If it worked for you please accept answer. :D

# algorithm - 复杂性和大 O 表示法

> ID：14861602
> 
> 赞同：0
> 
> 时间：2013-02-13T19:37:20.637
> 
> 标签：algorithm, complexity-theory, big-o

`ArrayList<Integer>`假设项目 (an ) 有足够的未使用空间以至于它永远不需要重新调整大小，那么以下两种算法的最坏情况时间复杂度是多少？我最初的猜测是 A 会运行得更慢，因为它必须将每个元素移到 index 处添加新元素`[0]`。我认为 B 是`O(N^2)`最坏的情况，但我不确定。

一个。

```
for (int i = 0; i < N; i++)
    items.add(0, new Integer(i)); 
```

和 B。

```
for (int i = 0; i < N; i++)
    items.add(new Integer(i)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:41:02.427

If your question is about java, then first version is slower and has complexity `O(N^2)`for the very reason you mention, while B has complexity `O(N)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T20:17:40.960

通过假设`items`数组足够大，实现 A 可以实现为：

```
for (int i = 0; i < n; i++) {
    for (int j = items.size; j > 0; j++) {
        items[j] = items[j-1]; 
    }
    items[0] = i;
} 
```

在这种情况下执行的操作总数（假设`m`是`items`列表的初始大小）将是：

[![](../Images/84a61ddad1705160eb0bfc7e76158c8d.png)](https://i.stack.imgur.com/7uSPA.png)

这具有复杂性**O(n ² )**

另一方面，选项 B 可以实现为

```
for (int i = 0; i < n; i++) {
    items[items.size] = i;
    items.size++;
} 
```

在这种情况下执行的操作数将是

[![](../Images/df9f83e4819e9e87609753ff69470c7a.png)](https://i.stack.imgur.com/7LfIs.png)

这具有复杂性**O(n)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:41:00.873

in A, you must shift all of the items to the right one in the internal array of the array list for each insertion. This will be O(n^2) to complete the operation. In the second case, no shifting is needed so it will be O(n). In A, you are doing tons of unnecessary and expensive work.

I am assuming, as you had stipulated, that the internal array is not resized.

# virtualbox - 使用自定义 Vagrantfile 打包一个基本盒子

> ID：14861604
> 
> 赞同：18
> 
> 时间：2013-02-13T19:37:32.780
> 
> 标签：virtualbox, vagrant

我有一个用于 lucid32 盒子的特定 Vagrantfile，它安装了一些非常标准的包（PHP/MySQL/Apache），进行一些特定的端口转发等等，我设置它，从 git 签出一个项目并更改一些服务器配置，我想要把这个盒子打包给团队中的其他开发者使用，所以我使用了命令：

```
vagrant package boxname --output test.box --vagrantfile Vagrantfile 
```

我得到一个 test.box 文件，它在包装中指出它正在添加我的特定 Vagrantfile，然后我运行：

```
vagrant box add boxname test.box 
```

它看起来`vagrant box list`很好，现在当我创建一些测试目录时，然后执行`vagrant init boxname`然后`vagrant up` 它为该框提供结帐文件和所有内容，但**没有**设置正确的端口转发，实际上并没有使用我的 Vagrantfile我完全打包了它，但在该目录中生成了一个新的默认值。

我在 ~/.vagrant.d/boxes/boxname 中注意到它具有默认的 Vagrantfile，以及我打包在 include/_Vagrantfile 中的那个

有什么办法可以让特定的 Vagrantfile 成为我生成的文件`vagrant init boxname`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-25T22:06:06.683

这实际上都是按预期工作的。Vagrant 在加载时会加载多个 Vagrantfile（不仅仅是 from 的一个`vagrant init`），而与 box 打包的 Vagrantfile 就是其中之一。有关更多信息，请在此处阅读“Vagrantfile 加载顺序”：[https ://www.vagrantup.com/docs/vagrantfile/#load-order-and-merging](https://www.vagrantup.com/docs/vagrantfile/#load-order-and-merging)

简而言之：Vagrant 按特定顺序加载多个 Vagrantfile，并合并它们的配置。盒子 Vagrantfile 作为这个过程的一部分在根 Vagrantfile（来自 的那个`vagrant init`）之前被加载。

目前没有办法制作一个由`vagrant init`.

您放入打包的 Vagrantfile 中的配置，例如端口转发，应该正确加载，因为在合并配置时，它应该只是附加所有端口转发。

如果这没有发生，您应该报告错误！但是为了一个如此的答案，这就是事情应该如何表现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T10:26:14.263

这段代码对我有用

```
vagrant package --output vagrant_example.box 
```

# javascript - jquery 中 .change 的替代方案？

> ID：14861605
> 
> 赞同：3
> 
> 时间：2013-02-13T19:37:33.133
> 
> 标签：javascript, jquery

我正在尝试触发 ajax 事件，并将选择列表选项的值作为参数传递给 ajax 调用。不幸的是，我在 .change 事件上触发了调用，它在选择新选项之前传递了 select 选项的值（即传递先前选择的选项值）。是否有事件可以获取所选选项的当前值？非常感谢提前，

```
<select id='theList'>
   <option> Option 1</option>
   <option> Option 2</option>
</select> 
```

在 JS 中：

```
$('#theList').change( function() {
$.getJSON('Home/MethodName', { var1: Option1Value, var2: MiscValue}, function(data) {
      //Execute instructions here
}
)}); 
```

我想使用.trigger，但我认为它也会提前触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:40:24.770

I think .change() is what you want, but you're misusing it. The change event fires after the value has changed. In your handler, you need to read the new value:

```
$('#theList').change( function() {
  var value = $('#theList').val();
  $.getJSON('Home/MethodName', { your_key: value }, function(data) {
      // ...
  }
)}); 
```

You also might want to set values on your `<option>` tags:

```
<option value="something"> Option 2</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:43:39.343

获取当前选择值时，您一定做错了什么。以下对我来说是正确的。

[http://jsfiddle.net/TJ2eS/](http://jsfiddle.net/TJ2eS/)

```
<select id="demo">
    <option value=""></option>
    <option value="a">A</option>
    <option value="b">B</option>
    <option value="c">C</option>
</select>

$("#demo").change(function() {
    alert("current select value " + $(this).val());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-06T22:12:36.967

一个警告，`.change`现在已经失效了，你应该使用...

```
.on('change', function() 
```

像那样。

# r - 从 R 中的函数返回完整的 data.frame

> ID：14861607
> 
> 赞同：-1
> 
> 时间：2013-02-13T19:37:36.287
> 
> 标签：r

我想在 data.frame 顶部存储其他信息并从函数中返回它。如您所见 - 附加数据消失。例子 ：

```
> d<-data.frame(N1=c(1,2,3),N2=(LETTERS[1:3]))
> d
  N1 N2
1  1  A
2  2  B
3  3  C
> d.x = 3
> d
  N1 N2
1  1  A
2  2  B
3  3  C
> d.x
[1] 3
> foo1 <- function() {
+ d<-data.frame(N1=c(1,2,3),N2=(LETTERS[1:3]))
+ d.x=3
+ return(d)
+ }
> 
> d1<-foo1()
> d1
  N1 N2
1  1  A
2  2  B
3  3  C
> d1.x
Error: object 'd1.x' not found 
```

我调查了`assign`，但由于 data.frame 是在函数内部创建并被返回的，所以我认为它在这里不相关。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:16:17.960

您的评论建议您要创建一个名为“d.3”的属性（将“元数据”附加到 R 中的对象的常用方法）并使用 foo1 为数据框设置该属性：

```
d <- data.frame(N1=c(1,2,3),N2=(LETTERS[1:3]))
foo1 <- function(d, attrib) {
   attr(d, "d.x") <- attrib
  return(d)
  }
d <- foo1(d, 3)  # need to assign value to 'd' since function results are not "global"
d    # note that the default print method for dataframes does not show the attributes
#---------
  N1 N2
1  1  A
2  2  B
3  3  C
#-----
 attributes(d)
#-----

$names
[1] "N1" "N2"

$row.names
[1] 1 2 3

$class
[1] "data.frame"

$d.x
[1] 3 
```

请参阅`?attr`和`?attributes`了解更多详情。还有一个`comments`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:50:21.810

改变这个：

```
d.x=3 
```

对此：

```
d$x=3 
```

# css - 当 span 溢出时，工具提示箭头消失 - y : auto

> ID：14861610
> 
> 赞同：3
> 
> 时间：2013-02-13T19:37:48.327
> 
> 标签：css, tooltip

我有一个基于跨度的工具提示，它将加载一些内容。内容可能具有不同的大小，因此我为跨度设置了最大高度和最大宽度，并希望它能够在内容超过此尺寸时滚动。

问题是每当我设置时箭头就会消失`overflow:scroll;`。这个问题有什么解决方法吗？

这是代码：

```
#tooltip {
    position: absolute;
    max-height: 300px;
    max-width:300px;
    line-height: 20px;
    overflow: scroll; /*adding this makes the arrow disappear*/
    padding: 10px;
    font-size: 14px;
    text-align: left;
    color: #fff;
    background: #2e31b1;
    border: 4px solid #2e31b1;
    border-radius: 5px;
    text-shadow: rgba(0, 0, 0, 0.0980392) 1px 1px 1px;
    box-shadow: rgba(0, 0, 0, 0.0980392) 1px 1px 2px 0px;
}

#tooltip:after {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    border-width: 10px;
    border-style: solid;
    border-color: transparent #2e31b1 transparent transparent;
    top: 10px;
    left: -24px;
} 
```

并且工具提示将包含如下内容：

```
<span id="tooltip">
    <div> some info</div>
    <div> some info</div>
    <div> some info</div>
    <div> some longer than max-width info</div>
    //more than max-height pixels worth of divs
    <div> some info</div>
</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:31:57.610

我不确定这是最干净的解决方案，但你可以用另一个 div 包装你的内容，如下所示：

**HTML**

```
<div id="tooltip">
  <div id="content">
    <div> some info</div>
    <div> some info</div>
    <div> some info</div>
    <div> some longer than max-width info</div>
    <div> some info</div>
    <div> some info</div>
    <div> some info</div>
  </div>
</div> 
```

**CSS** 

```
#tooltip {
    position: absolute;
}
#content {
  font-size: 14px;
  color: #fff;
  max-height: 100px;
  max-width:300px;
  line-height: 20px;
  overflow: scroll;
  background: #2e31b1;
  padding: 10px;
  border: 4px solid #2e31b1;
  border-radius: 5px;
  text-shadow: rgba(0, 0, 0, 0.0980392) 1px 1px 1px;
  box-shadow: rgba(0, 0, 0, 0.0980392) 1px 1px 2px
}
#tooltip:after {
    content: '';
    position: absolute;
    width: 5px;
    height: 0;
    border-width: 10px;
    border-style: solid;
    border-color: transparent #2e31b1 transparent   transparent;
    z-index:999;
    top: 10px;
    left: -24px;
} 
```

jsbin：http: [//jsbin.com/ukaxof/1/edit](http://jsbin.com/ukaxof/1/edit)

# java - 在远程 Maven 存储库中获取 Jakarta Feedparser？

> ID：14861622
> 
> 赞同：0
> 
> 时间：2013-02-13T19:38:36.100
> 
> 标签：java, maven, apache-commons, sonatype

我简短地说我想在远程 Maven 存储库中启动[Jakarta Feedparser](http://commons.apache.org/dormant/feedparser/)项目（该项目目前处于休眠状态）。

来源在这里： http: [//svn.apache.org/viewvc/commons/dormant/feedparser/trunk/](http://svn.apache.org/viewvc/commons/dormant/feedparser/trunk/)（这是一个Maven项目）

我一直在看[Sonatype](http://www.sonatype.org/)，我可能在这里遗漏了一些东西，但它是否像记录支持票并将它们指向 SVN 源存储库一样简单（[https://docs.sonatype.org/display/Repository/Sonatype +OSS+Maven+存储库+用法+指南](https://docs.sonatype.org/display/Repository/Sonatype+OSS+Maven+Repository+Usage+Guide)）？

如果是这样，我不能 100% 确定 groupId 应该是什么，因为 pom.xml 将通用“org.apache.commons”作为其 groupId？

PS我确实尝试联系项目所有者但收效甚微

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:38:14.790

源似乎处于迁移状态。有一个 pom.xml 但没有 src/main/java 文件夹。还有一个 build.xml 表明它更像是一个 ant 构建。父级不包含任何模块，因此它看起来未完成。

您是否查看了源代码并尝试构建它？如果它不编译，则无法将其添加到存储库中。

如果可以修复，您可以将其添加到 github 创建存储库：[http ://blog.rueedlinger.ch/2012/09/use-github-as-maven-remote-repository/](http://blog.rueedlinger.ch/2012/09/use-github-as-maven-remote-repository/)

groupid 是 org.apache.commons，artifactId commons-feedparser。来自 commons 的大多数其他库都遵循此约定。

# python - 如何使用 python 包分发数据文件以使其可读？

> ID：14861634
> 
> 赞同：3
> 
> 时间：2013-02-13T19:39:42.090
> 
> 标签：python, distutils, setup.py

我有一个 python 模块，其设置如下：

```
from distutils.core import setup
setup = (
    ...
    package_data={'mypackage': ['my/file.data']}) 
```

在一个这样布置的包中：

```
mypackage/
    setup.py
    mypackage/
        __init__.py
        my/
            file.data 
```

`__init__.py`看起来像这样：

```
import pkgutil
DATA = pkgutil.get_data(__name__, 'my/file.data') 
```

很简单。我想要的只是将一些数据放入我的 python 插件中。但是，当我安装它时

```
sudo python setup.py install 
```

并尝试运行它，我得到

```
IOError: [Errno 13] Permission denied: '/usr/local/lib/python2.7/dist-packages/mypackage/my/file.data' 
```

它已使用不正确的权限安装。

如何在 python 中分发数据和配置文件，以便在运行时读取它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T03:39:21.273

恐怕你不能开箱即用：如果我没记错的话，文件权限只是按原样复制。您需要编写自定义构建命令来更改构建目录中的文件权限，然后再通过 install 命令复制它们。

最简单的解决方案是在您的存储库或源代码树中拥有所需的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T16:54:56.053

我也有这个问题，我解决了。

正如@Éric Araujo 所说，您应该更改`file.data`. 如果您的文件的权限是`400`，它也将被许可安装`400`。但是如果您使用许可`root`安装了该软件包，则所有者将是。`root`而且普通用户是看不懂的。

我认为将权限更改为`644`. 并且记得删除`mypackage.pkg-info`，`build`并且`dist`在你当前的位置，否则你不能申请你的数据文件的新权限。

# java - Form Based authentication support for RestEasy webservice client

> ID：14861643
> 
> 赞同：3
> 
> 时间：2013-02-13T19:40:02.057
> 
> 标签：java, web-services, resteasy, webservices-client

I am trying to create a RestEasy client for services host in JBPM server. The service url is always redirecting to a form based login screen which expects j_username and j_password.

I need to login to the service and also have to store the cookies to avoid authentication everytime. Please suggest the best implementation to achieve this.

Now all the service calls ends up in returning the login html page.

I tried some of the solutions posted here, but not works in my scenario.

[RESTEasy client framework authentication credentials](https://stackoverflow.com/questions/1885844/resteasy-client-framework-authentication-credentials)

[RestEasy Client Authentication and HTTP Put with Marshalling](https://stackoverflow.com/questions/12972640/resteasy-client-authentication-and-http-put-with-marshalling)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:00:30.023

1.  首先，编写一个身份验证 servlet（您可以在其中拦截登录凭据并将它们存储到您的 cookie 中）：

    ```
    @WebServlet(urlPatterns = {"/security_check"})

    public class AuthenticationServlet extends HttpServlet 

    {

     protected void doPost(HttpServletRequest req, HttpServletResponse resp) throwsServletException, IOException 
        {

     request.login(userName, userPassword);

     StoreInCookieMethod(request.getUserPrincipal().getName(), userPassword);

     response.sendRedirect(request.getContextPath() + "/protectedResourceUrlPattern/");

        } 
    } 
    ```

2.  在 中`login_form`，将操作映射到 servlet URL，例如：

    ```
    <form method="post" action="security_check"> 
    ```

3.  对于除登录以外的所有其他请求，定义一个 url 模式（例如 protectedResourceUrlPattern）并使用来自 cookie 的凭据进行身份验证

# javascript - Actionscript-Javascript 中 C++ 指针的概念

> ID：14861644
> 
> 赞同：3
> 
> 时间：2013-02-13T19:40:04.053
> 
> 标签：javascript, c++, actionscript-3

学习 C++ 的基础知识，并试图围绕指针以及何时使用它们。来自 Javascript-Actionscript 背景我想不出任何类似的东西。

任何人都可以建议任何与 Javascript 或 Actionscript 3 中的指针等效的方法，以及何时可以使用它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:21:01.020

快速而简单的答案是，没有什么类似于 javascript 或 actionscript 中的指针，但我也许可以为您画一些微不足道的明喻。

所有语言都实现了通过指针提供给您的功能，但大多数现代语言对程序员隐藏了它们。C/C++ 通过暴露它们并要求你使用它们给你很大的力量；大多数其他语言通过隐藏它们来防止程序员伤害自己。负责自己的内存管理可能很危险。另外，请记住，C 和 C++ 是比 JavaScript、ActionScript 甚至 Java 或 C# 更早的语言——在那些“原始”时代，指针语法是必要的。（C 在内存管理上非常接近汇编代码，而 C++ 直接来自 C。）

但是每种编程语言仍然必须管理内存——它们必须让您创建（新）变量、访问这些变量并存储对它们的引用。函数也是如此。

看看你所做的一些事情，并以指针的心态思考它们。

*   当您将变量设置为与命名函数相等时，您的虚拟机将在内存中找到该函数，并将变量设置为指向该内存。（在 C 中，这称为函数指针。C++ 也使用它。）
*   当您将变量设置为匿名函数时，您的虚拟机会在内存中的某处创建该函数，将变量设置为指向其内存中的该区域并让您引用它。
*   当你调用 new 时，你正在创建一个新的引用。同样，虚拟机正在内存中创建一个点，并为您提供访问它的方法。
*   当您将一个对象传递给一个函数时，您并没有传递整个对象，而是传递了对它的引用。VM 使用您的变量来告诉函数要使用的内存部分以及它的行为方式。

如果您开始使用 C/C++ 进行大量编程，您会发现几乎在您所做的所有事情中都使用指针（和引用，这是一个相关的概念）。一旦你习惯了它，你会发现你一直在使用类似的概念——你只是不必明确地意识到你在做什么。您将更加了解每种编程语言与其内存的关系——无论是隐式的还是显式的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T20:27:07.520

通过考虑指针（或引用），一个[保存实际对象地址的](http://en.wikipedia.org/wiki/Reference_%28computer_science%29)值；
在 AS3 中，对“Object”子类的任何引用都是指针：

```
var a:Point = new Point(0, 0);
var pointer:Point;
pointer = a; 
```

对对象“指针”的任何修改实际上都会修改“a”，因此“指针”是指向“a”的指针/引用（保存地址），即使作为参数传递给函数：参数是指针（通过引用传递而不是按价值）。
然而，与“Point”不同的“Object”子类的基元类型总是按值（复制）传递给新的变量或参数；原始类型包括 int、uint、Boolean、Number、String。
顺便说一句，[C++ 指针是一种特殊的“引用”实现。](http://en.wikipedia.org/wiki/Reference_%28C++%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T19:50:54.000

[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")或[actionscript-3](/questions/tagged/actionscript-3 "显示标记为“actionscript-3”的问题")中没有类似的概念。

C++ 取代了 C 语言中的指针概念。*基本上 C/C++ 指针保存指向*类型实例的具体内存地址，但 C++ 为类类型添加了多态解析。

在 C++ 中传递（作为函数参数）或存储（作为变量、类属性）引用到类型实例的首选机制是（uummm）引用或值。这可能不是在所有情况下都是可能的或想要的。

C++ 引用（参见`&`类型说明符）基本相同，但**必须**初始化为引用有效类型实例的有效内存地址。相反，指针也可以保存一个`NULL`值，表明没有引用有效的类型实例。

此外，完全不鼓励在 C++ 中使用原始指针类型（类似 C）。标准库为实例引用的特定语义用例情况提供了几个类似代理（智能指针类型）的指针，解决了生命周期管理问题（回想一下，C++ 没有内在的垃圾收集机制）。

在 Google 和 SO 上有很多关于这个主题的更多资源。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T20:00:33.650

没有一个好的一对一映射。指针在其他语言中是隐藏的，因为虽然非常强大，但也容易导致应用程序崩溃。

通常，当您使用的对象的生命周期允许它逃避您的创建上下文时，您使用指针。即使这样，最佳实践还是将指针包装在另一个对象中，该对象将在适当时自动删除该指针。

如果您对 C++ 引用进行一些研究，并且当 C++ 将默默地复制对象（复制构造函数等）时，引用的用处将变得显而易见。然后，当您意识到引用有一些使用限制时，您就会得到指针。:)

希望这能让你开始！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T19:57:17.530

考虑以下示例：

```
 a = {a:1, b:2};
 b = a;
 b.a = 4;
 console.log(a.a); // outputs 4 
```

对于对象，JavaScript 的行为类似于指针。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T20:16:20.133

我喜欢在概念上将指针想象成一个有两列和无限行数的巨型表。在第一列中，我们有内存地址，在第二列中，我们有存储在该地址的值，它可能看起来像：

`char *catString = "cat"; //C picked free space at address 3 to hold this string`

```
 Address     Value
    0         23
    1         'r'
    2         12.2
    3         'c'
    4         'a'
    5         't'
    6         '/0'
   ...        ... 
```

catString 实际上保存值 3，而不是“cat”。字符串“cat”在内存中，而指针 catString 只知道字符串在哪里，并*指向*该内存地址处字符串中的第一个字母。这也是为什么字符串需要一个空插件，注意地址 6，所以在打印时，程序知道何时停止打印字符。 `char *str;`是更多的 C 风格，它是*一个字符数组*，这相当于`string str;`在 C++ 中，它对字符串更加友好！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-14T21:07:08.107

这是另一种看法。

把指针想象成你手中的一张纸条，它告诉你去厨房里的特定抽屉里找。你可以把这张纸条传给住在房子里的任何人，如果他们按照纸条上的指示，他们都会打开同一个抽屉。

如果 A 人在抽屉里放了东西，然后在稍后将纸条交给 B 人，B 人仍然可以找到 A 人放在那里的任何东西。

等等。

# java - zk 框架：zul 文件，纯 java 或混合以获得更好的性能

> ID：14861645
> 
> 赞同：2
> 
> 时间：2013-02-13T19:40:07.310
> 
> 标签：java, zk, zul

zk 框架对于 Web 开发人员来说非常灵活。但灵活性也带来了一些问题。我想知道哪种方法最适合性能（内存，时间等）

1) .zul 文件，包含以下脚本：

```
<vbox>
        Auto-complete Combobox:
        <combobox id="combo" autodrop="true" mold="rounded"/>
        <hbox>
            <checkbox checked="true"
                onCheck="combo.autodrop = self.checked"
                label="auto drop popup when typing" />
            <checkbox checked="true"
                onCheck="combo.buttonVisible = self.checked" label="button visible" />          
        </hbox>
        <checkbox label="Use rounded combobox" checked="true"
            onCheck='combo.mold=self.checked? "rounded": "default"'/>
    </vbox>
    <zscript>
    String[] _dict = { 
        "abacus", "accuracy", "acuity", "adage", "afar", "after", "apple",
        "bible", "bird", "bingle", "blog"
... 
```

2）纯java之类的

```
public class TestRenderer {

    ListModelList model = new ListModelList();
    private AnnotateDataBinder binder;

    @AfterCompose
    public void afterCompose(@ContextParam(ContextType.VIEW) Component view) {
        binder = new AnnotateDataBinder(view);
     List persons = new ArrayList();    
     model.add(new Person("David", "Coverdale"));
... 
```

3）混合zk

```
<window apply="com.synnex.wms.outbound.so.IndexViewCtrl">
    <style>
        .z-row-cnt .z-label {
            white-space:nowrap;
        }
    </style>
    <grid model="${model}" rowRenderer="${renderer }" height="300px" width="800px">
        <custom-attributes org.zkoss.zul.grid.rod="true" />
        <custom-attributes org.zkoss.zul.grid.initRodSize="20" />
        <columns>
            <column forEach="${headers}" label="${each}" width="80px"/>
        </columns>

    </grid>

</window> 
```

与弹簧等不同技术一起使用时它们是否不同？java 到 html 的解析比 zul 到 html 更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:49:27.717

我建议您使用 MVVM 架构，因为我在 ZK MVC 和 MVVM 上工作时，它会促进您的开发。使用 MVC 架构会增加你的头痛，但有时我们也必须使用 MVC 方法，但据我了解，最好的方法是 MVVM

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T11:11:10.133

> 还要注意 EL 表达式的求值速度非常快，因此 EL 可以在生产系统中使用。另一方面，建议 zscript 仅用于原型设计或快速修复。
> [关联](http://books.zkoss.org/wiki/ZK_Developer%27s_Reference/UI_Composing/ZUML/Scripts_in_ZUML#Distinguish_zscript_from_EL)

所以不要使用 1)
2) 可以更快、更慢或一样快 3) 取决于你的 impl。，
但更快可能需要很多时间，所以 2) 不是一个好主意。
3）通常是最好的，因为 zul 文件比 java 代码
和 GUI 逻辑和 GUI 结构更易读，并没有（那么多）混淆。

要在 MVC 和 MVVM 之间进行选择，请阅读[此](http://books.zkoss.org/wiki/Small_Talks/2011/December/MVVM_in_ZK6%3ain_Contrast_to_MVC)。
如果你认为混合它们是有意义的，那么
框架应该没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T16:08:05.087

ZK 框架的人实际上建议将服务器端与客户端分开。他们说不要将 Java 代码与 ZUL 文件混合，我可以根据自己的经验说这是真的，因为混合它们时会出现性能问题。

将 zscript 保持在最低限度，如果没有必要，请将其保留，并在服务器端处理您的编码。

入门教程[http://books.zkoss.org/wiki/ZK_Getting_Started/Tutorial实际上很清楚](http://books.zkoss.org/wiki/ZK_Getting_Started/Tutorial)

# java - 我可以有多个 @BeforeMethod 只为它们所属的组运行吗？

> ID：14861649
> 
> 赞同：4
> 
> 时间：2013-02-13T19:40:18.593
> 
> 标签：java, automation, testng, qa

```
@BeforeMethod (groups={"a"})
public void setup1() {
    //do something
}

@BeforeMethod (groups={"b"})
public void setup2() {
    //do something else
}

@Test (groups={"a"})
public void Test1() {
    //do something
}

@Test (groups={"b"})
public void Test2() {
    //do something
}

@Test (groups={"a"})
public void Test3() {
    //do something
}

@Test (groups={"b"})
public void Test4() {
    //do something
} 
```

而 xml 文件将类似于：

```
<run>
    <include name="a"/>
    <include name="b"/>
</run> 
```

是否可以在 Test1、Test3 之前只运行 setup1，而在 Test2、Test4 之前只运行 setup2？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T06:31:46.857

您需要使用的是@BeforeGroups 而不是@BeforeMethod。BeforeMethod 确保 setup1 和 setup2 都在每个方法之前运行。BeforeGroups 将确保它仅在特定组开始执行之前运行。

# c# - 匹配用双括号括起来的单词的正则表达式是什么

> ID：14861665
> 
> 赞同：5
> 
> 时间：2013-02-13T19:41:17.093
> 
> 标签：c#, regex

我正在尝试找到正确的正则表达式语法来匹配和拆分被双括号包围的单词。

```
const string originalString = "I love to [[verb]] while I [[verb]]."; 
```

我试过

```
var arrayOfStrings = Regex.Split(originalString,@"\[\[(.+)\]\]"); 
```

但它不能正常工作。我不知道我做错了什么

我希望 arrayOfStrings 像这样出来

```
arrayOfStrings[0] = "I love to "
arrayOfStrings[1] = "[[verb]]"
arrayOfStrings[2] = " while I "
arrayOfStrings[3] = "[[verb]]"
arrayOfStrings[4] = "." 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T19:51:18.410

我认为这就是你所需要的。

```
string input = "I love to [[verb]] while I [[verb]].";
string pattern = @"(\[\[.+?\]\])";

string[] matches = Regex.Split( input, pattern );

foreach (string match in matches)
{
    Console.WriteLine(match);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T20:02:45.593

将产生你想要的答案是`@"(?=\[\[.*?\]\])|(?<=\]\])"`。

这有两个部分，由`|`“或”符号分隔。

`(?=\[\[.*?\]\])`将查找紧跟在 a`[[`一些字符和 a之后的任何符号，并在`]]`它和 . 之间分割`[`。

`(?<=\]\])`将查找紧接在 . 之前`]]`并在 . 之后拆分的任何符号`]`。

这些被称为“前瞻”和“后瞻”，您可以在[此处](http://www.mikesdotnetting.com/Article/46/CSharp-Regular-Expressions-Cheat-Sheet)找到它们的更多变体。

# algorithm - 随机快速排序

> ID：14861667
> 
> 赞同：5
> 
> 时间：2013-02-13T19:41:24.533
> 
> 标签：algorithm, sorting, random, quicksort

实现随机快速排序的两种方法，

方法1：选择一个随机枢轴

方法 2：生成输入的随机排列并将其提供给选择第一个元素作为枢轴的快速排序

就随机化而言，方法 1 与方法 2 相同吗？

注意：看起来 Method2 产生所有分区的可能性相同，但 method1 没有。因此，如果它们不一样，那么我想了解性能影响是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:13:48.223

是的。在任何一种情况下，任何特定元素被选为枢轴的概率都是 1/len(input)。（但是，第二种方法几乎肯定会慢一个常数因子，因为它需要额外的线性通道来生成随机排列。）

# python - 在 Python 中从导入的文件运行代码

> ID：14861669
> 
> 赞同：1
> 
> 时间：2013-02-13T19:41:29.087
> 
> 标签：python, class

我有两个文件，multitest.py 和skiplist.py 我们得到skiplist.py 作为我们无法编辑的起始代码。

multitest.py 是我应该从skiplist.py 创建和借用函数的文件

在 skiplist.py 文件中，我们有一个类似的方法

```
class SkipList(object):
    def __len__(self):
        """(SkipList) -> int
        Return the number of items in this skip list.
        """
        return self.size 
```

在 multitest.py 中，我必须创建自己的**len**方法，但不允许访问任何内置函数。

```
from skiplist import *
class MultiSet(object):
    def __len__(self):
        """(MultiSet) -> int
        Return the number of items in this multiset.
        """
        return SkipList.__len__(self) 
```

跑步时

```
s = MultiSet([])
print(len(s)) 
```

我得到错误

```
Traceback (most recent call last):
File "/Applications/WingIDE.app/Contents/MacOS/src/debug/tserver/_sandbox.py", line 134, in <module>
File "/Applications/WingIDE.app/Contents/MacOS/src/debug/tserver/_sandbox.py", line 56, in __len__
File "/Users/Borna/Documents/CSC148/Assignment/skiplist.py", line 39, in __len__
return self.size
builtins.AttributeError: 'MultiSet' object has no attribute 'size' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T19:44:32.520

好吧，你的`MultiSet`不是继承自，`SkipList`所以它不应该调用`SkipList`自己的任何方法。如您所见，在这种情况下，`SkipList`有一个`.size`属性但`MultiSet`没有。

要解决这个问题，您必须要么进行`MultiSet`扩展`SkipList`（`class MultiSet(SkipList)`），要么在`MultiSet.__len__`不直接使用`SkipList`方法的情况下实现（例如，通过`MultiSet`包含一个实例`SkipList`并返回该实例的大小）。

# php - 如何将元素推送到名称包含在变量中的数组上？

> ID：14861673
> 
> 赞同：0
> 
> 时间：2013-02-13T19:41:51.367
> 
> 标签：php, variable-variables

我正在制作一个通用 php 类，它将值从数据库自动加载到对象中

要设置属性，我使用这个：

`$object->$propertyName = $valueFromDB;`其中propertyName的值来自mysql字段名..

现在我想以类似的方式将一些东西推送到数组上：

这有效..

`$object->$arryName = array();`

但这不..

`$object->$arryName[] = "test";`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:47:22.713

```
$object->{$arryName}[] = "test" 
```

花括号改变了操作的顺序，并使 PHP 在硬括号之前计算变量名。

如果你想做一个关联数组，这会变得有点复杂：

```
$object->{$arryName}[$keyname] = "test" 
```

在这种情况下，您*可以*在 $keyname 周围放置花括号，但这完全是可选的。

在相关的说明中.. 变量变量通常 -*但不总是*- 是一些古怪的迹象。对于那些必须调试、重构、进行任何 grepping 等的追随者来说，它们也是一种痛苦。如果你*必须*使用它们，很好，但请确保你已经考虑了后果。

# iphone - iOS NSXMLParsing unformed HTML

> ID：14861674
> 
> 赞同：1
> 
> 时间：2013-02-13T19:41:53.397
> 
> 标签：iphone, html, ios, nsxmlparser

This is my method body for parsing "img src" image links from poorly formed html generated by an RSS feed... I am aware that NSXML only parses XML, but I have this hope that it can stumble through the mess to find these miniscule image links from messy html.

I'm trying to retrieve ONLY the FIRST image link found in the src attribute I find in each element name called IMG in nsData that has a src attribute and then save it to a NSString *img in another class. The img tags are not all the same, for instance an instance of nsData will contain only one image instance like any one of these:

< img class="ms-rteStyle-photoCredit" src="www.imagelinkthatineed.com" *stuff I don't need*

< img alt="" src="www.imagelinkineedfortableimagecellpreview" *stuff I don't need*

< img class="ms-rteStyle-photoCredit" src="www.IneedThisLink.com" **more stuff I don't need**

The only class that seems to generate NSLog output is the first one.

How can I get the parser methods to actually run ?

Given that there's a way, is there a different, simpler way you recommend?

```
#import "HtmlParser.h"
#import "ArticleItem.h"

@implementation HtmlParser
@synthesize elementArray;

- (HtmlParser *) InitHtmlByString:(NSString *)string {
//    NSString *description = [NSString string];
NSData *nsData = [[NSData alloc] initWithContentsOfFile:(NSString *)string];
elementArray = [[NSMutableArray alloc] init];
parser = [[NSXMLParser alloc] initWithData:nsData];
parser.delegate = self;
[parser parse]; 
```

If I NSLog(@"%@", nsData); in this method body, the output spits out the raw HTML.

```
currentHTMLElement = [ArticleItem alloc];
return self;
}
- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qualifiedName attributes:(NSDictionary *)attributeDict
{
if ([elementName isEqualToString:@"img src"]) {
    currentHTMLElement = [[ArticleItem alloc] init];
}
NSLog(@"\t%@ found a %@ element", self, elementName);
}
- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
if (!currentHTMLElement)
    currentHTMLElement = [[NSMutableString alloc] initWithString:string];   
NSLog(@"Processing Value: %@", currentHTMLElement);
}
- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName   
{
if ([elementName isEqualToString:@"img src"])
    {
        currentHTMLElement.img = elementName;
        [elementArray addObject:currentHTMLElement];
        currentHTMLElement = nil;
        currentNodeContent = nil;
    }
else
{
    if (currentHTMLElement !=nil && elementName != nil && ([elementName isEqualToString:@"img src"]))
    {
        [currentHTMLElement setValue:currentHTMLElement forKey:elementName];
    }
}
    currentHTMLElement = nil;
}                
@end 
```

Thank you for your thoughts.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T20:36:43.873

鉴于 HTML 通常不是格式良好的 XML，`NSXMLParser`可能无法正常工作。如果你想解析 HTML，你可以参考 Ray Wenderlich 的这篇文章，[如何在 iOS 上解析 HTML](http://www.raywenderlich.com/14172/how-to-parse-html-on-ios)。如果您已按照这些说明操作并将 Hpple 添加到您的项目中，则可以`src`像这样检索图像属性：

```
#import "TFHpple.h"

- (void)retrieveImageSourceTagsViaHpple:(NSURL *)url
{
    NSData *data = [NSData dataWithContentsOfURL:url];

    TFHpple *parser = [TFHpple hppleWithHTMLData:data];

    NSString *xpathQueryString = @"//img";
    NSArray *nodes = [parser searchWithXPathQuery:xpathQueryString];

    for (TFHppleElement *element in nodes)
    {
        NSString *src = [element objectForKey:@"src"];
        NSLog(@"img src: %@", src);
    }
} 
```

* * *

或者，我说这为反响应的冲击做好了准备（在我[一直最喜欢的 Stack Overflow 答案](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)`NSRegularExpression`的脉络中），如果你想要一个html 文件中的标签列表，你可以使用以下有点复杂的常规表达：`img`

```
- (void)retrieveImageSourceTagsViaRegex:(NSURL *)url
{
    NSString *string = [NSString stringWithContentsOfURL:url
                                                encoding:NSUTF8StringEncoding
                                                   error:nil];

    NSError *error = NULL;
    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(<img\\s[\\s\\S]*?src\\s*?=\\s*?['\"](.*?)['\"][\\s\\S]*?>)+?"
                                                                           options:NSRegularExpressionCaseInsensitive
                                                                             error:&error];

    [regex enumerateMatchesInString:string
                            options:0
                              range:NSMakeRange(0, [string length])
                         usingBlock:^(NSTextCheckingResult *result, NSMatchingFlags flags, BOOL *stop) {

                             NSString *src = [string substringWithRange:[result rangeAtIndex:2]];
                             NSLog(@"img src: %@", src);
                         }];
} 
```

* * *

如果你想使用`NSXMLParser`，它看起来像这样：

```
- (void)retrieveImageSourceTagsViaNSXMLParser:(NSURL *)url
{
    NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:url];
    parser.delegate = self;
    [parser parse];
}

#pragma mark - NSXMLParserDelegate methods

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementName isEqualToString:@"img"])
    {
        NSString *src = attributeDict[@"src"];

        NSLog(@"img src: %@", src);
    }
} 
```

问题是，根据我的经验，`NSXMLParser`解析 HTML 不如 LibXML2/Hpple 成功。我发现在一些简单的页面上，上面的效果很好。但在其他情况下，它不会。底线，虽然`NSXMLParser`擅长解析格式良好的 XML，但我会谨慎使用它来解析 HTML。

# c++ - OpenCV Drawing a circle to track a ball issue

> ID：14861677
> 
> 赞同：1
> 
> 时间：2013-02-13T19:42:15.423
> 
> 标签：c++, opencv

I'm teaching myself OpenCV and wrote the following code today to track a ball rolling across my computer webcam feed and (attempt to) draw a filled in grey circle on to it's centroid:

```
#include <iostream>
#include <opencv2/opencv.hpp>

using namespace cv;
using namespace std;

Point getBlobCentroid(Mat blobImage);

int main()
{
    Mat bGround, fGround, diff;
    Point p = (500, 280);
    VideoCapture cap(0);

    while (true)
    {
        cap >> fGround; //assign frame from camera to newest image
        cvtColor(fGround, fGround, CV_BGR2GRAY); //convert to grayscale

        bGround.create(fGround.size(), fGround.type()); 
        absdiff(bGround, fGround, diff); //subtract current frame from old frame

        threshold(diff, diff, 50, 255, CV_THRESH_BINARY); //convert to binary
        erode(diff, diff, NULL, Point(-1,-1), 3, 0, BORDER_DEFAULT);

        imshow("Thresholded", diff);

        circle(fGround, getBlobCentroid(diff), 6, 127, -1, 8, 16);
        imshow("Natural Image with Tracking", fGround);

        fGround.copyTo(bGround); //move forward in time
        waitKey(1);
    }

    return 0;
}

Point getBlobCentroid(Mat blobImage)
{
    int rowSum=0, colSum=0, count = 1;

    for(int i=0; i<blobImage.rows; i++)
    {
        for (int j=0; j<blobImage.cols; j++)
        {
            if (blobImage.at<uchar>(i,j) == 255)
            {
                rowSum+=i;
                colSum+=j;
                count++;
            }
        }
    }
    Point centroid = (rowSum, colSum)/count;
    return centroid;
} 
```

However, as evidenced by the attached image - the circle never moves away from the top of the screen - in other words, the centroid.y component is always zero. I wrote a bunch of steps of the calculation to the screen, and it appears as though the searching and additions to rowSum and count and such work - those are nonzero. However, as soon as you calculate the centroid or call it in the circle, that's a no go. Even weirder, I tried making a constant center for the circle Point p = (285, 285) and using that as an argument, and that was a no go as well. Help? Thanks!

-Tony

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:15:57.197

```
fGround.copyTo(bGround); //move forward in time
// so, that's your idea. compare bg & fg, get the centroid of the diff.
// but then, if you follow your while loop there, (waitkey, back to the top ... )

bGround.create(fGround.size(), fGround.type()); 
// aww, so you're never using, what you copied before

absdiff(bGround, fGround, diff); 
// so, in the end, you're always comparing fGround to an empty bGround img 
```

# autosys - autosys - 一个接一个地运行作业列表（jil 中的顺序必须反映依赖关系）

> ID：14861678
> 
> 赞同：0
> 
> 时间：2013-02-13T19:42:18.310
> 
> 标签：autosys

我有一份要按顺序完成的工作清单（一个接一个）。如果我列出我所有的工作

```
---- myjobsBox.jil---
# cleanup-db Jobsinsert_job: **CleanupDB_Box**
job_type: b 
date_conditions: yes 
days_of_week: all 
start_times: "02:00, 17:00"

#########   dbpurge1

insert_job: dbpurge1
job_type: c
box_name: CleanupDB_Box
command: cmd1
machine: mymachine.com
permission: mx,
std_out_file: /var/tmp/cleanupdb.log
std_err_file: /var/tmp/cleanupdb.err
alarm_if_fail: 1

#########   dbpurge2
insert_job: dbpurge2
job_type: c
box_name: CleanupDB_Box
command: cmd1
machine: mymachine.com
permission: mx,
std_out_file: /var/tmp/cleanupdb.log
std_err_file: /var/tmp/cleanupdb.err
alarm_if_fail: 1
condition: done(dbpurge1) # Can I avoid this? Is there a way to tell-the-box to execute the jobs in the order in which it is mentioned in jil file?
#########   dbpurge3
insert_job: dbpurge3
job_type: c
box_name: CleanupDB_Box
command: cmd1
machine: mymachine.com
permission: mx,
std_out_file: /var/tmp/cleanupdb.log
std_err_file: /var/tmp/cleanupdb.err
alarm_if_fail: 1
condition: done(dbpurge2) # Can I avoid this? 
```

condition: done(dbpurge1) # 我可以避免这种情况吗？

有没有办法告诉盒子按照它在jil文件中的顺序执行作业？一个接一个..顺序..不平行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T11:56:30.777

不，没有办法做到这一点，您必须使用条件参数。您是否有任何特殊原因要避免使用条件参数？

# php - Replace HTML strings with spaces

> ID：14861679
> 
> 赞同：2
> 
> 时间：2013-02-13T19:42:20.143
> 
> 标签：php, html, replace, strip-tags

Does anybody know how can I replace HTML string with spaces?

Because if I have something like this

```
<div>word1</div><div>word2</div> 
```

when I use strip_tags(), the result is

```
word1word2 
```

and I need them to be separated by space in order to be processed the way they should be by my script.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:45:53.420

这将正常工作

```
$str = preg_replace('#<[^>]+>#', ' ', '<h1>Foo</h1>bar'); 
```

之后使用类似的东西

```
$str = preg_replace('/\s\s+/', ' ', $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:46:53.187

你可以使用这个：

```
preg_replace('/<[^>]*>/', ' ', $input); 
```

但是你的文本中最好不要有任何杂散`<`字符。

还：

```
preg_replace('/ {2,}/', ' ', $input); 
```

会将多个空间折叠成一个空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:48:20.807

这很容易，也可以理解。

```
<?php

$txt = "<div>word1</div><div>word2</div>";

$find = array("<div>", "</div>");
$replace = array(" ", " ");
echo str_replace($find, $replace, $txt); 
```

# javascript - Passing longitude and latitude into Google maps initialize function

> ID：14861681
> 
> 赞同：0
> 
> 时间：2013-02-13T19:42:28.770
> 
> 标签：javascript, function, google-maps-api-3

I am trying to pass a longitude and latitude to Google Maps JavaScript V3 api. My code as below should take the googleLatLong variable from the switch and then pass it to the Google initialize() function. However at the moment the googleLatLong variable is not accessible in the initialize() function. How do I pass it through?

Thanks in advance.

JavaScript in the head:

```
<script type="text/javascript"> 
//function to get a parameter from the query string
var queryString = function(){
  var s = window.location.search.substr(1),
      p = s.split(/\&/),
      l = p.length, 
      kv, r = {};
  if(l === 0){return false;}
    while(l--){
      kv = p[l].split(/\=/);
      r[kv[0]] = kv[1] || true;
    }
    return r;
}();

//get params from the url
var storeCode = queryString.store;

//switch page params based on the store code
switch(storeCode) {
    case 'POO746':
        var storeName = 'Poole';
        var googleLatLong = '50.736129,-1.988229';
        var trafficURL = 'http://hatrafficinfo.dft.gov.uk/feeds/rss/CurrentAndFutureEvents/South%20West.xml';
        break;
    case 'BRS464':
        var storeName = 'Bognor Regis';
        var googleLatLong = '50.798991,-0.667444';
        var trafficURL = 'http://hatrafficinfo.dft.gov.uk/feeds/rss/CurrentAndFutureEvents/South%20East.xml';
        break;
}    

</script> 
```

JavaScript in the body:

```
<script type="text/javascript">
var map

function initialize() {
    var store = new google.maps.LatLng(googleLatLong);
    var myOptions = {
        zoom:12,
        mapTypeId: google.maps.MapTypeId.HYBRID,
        disableDefaultUI: true,
        center: store
    }   
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var trafficLayer = new google.maps.TrafficLayer();
    trafficLayer.setMap(map);

}

window.onload = function () {
    initialize();
}
</script>

    <div id="trafficMap">
        <div id="map_canvas"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:52:59.220

使其成为页面的全局变量，因此您将拥有这些全局变量：

```
var storeCode = queryString.store;
var googleLatLong;
var map; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:01:43.577

在初始化函数中解析查询字符串。

```
<script type="text/javascript">
var map

  //function to get a parameter from the query string
  var queryString = function(){
    var s = window.location.search.substr(1),
      p = s.split(/\&/),
      l = p.length, 
      kv, r = {};
    if(l === 0){return false;}
      while(l--){
        kv = p[l].split(/\=/);
        r[kv[0]] = kv[1] || true;
      }
      return r;
  }();

function initialize() {

//get params from the url
var storeCode = queryString.store;

//switch page params based on the store code
switch(storeCode) {
    case 'POO746':
        var storeName = 'Poole';
        var googleLatLong = new google.maps.LatLng(50.736129,-1.988229);
        var trafficURL = 'http://hatrafficinfo.dft.gov.uk/feeds/rss/CurrentAndFutureEvents/South%20West.xml';
        break;
    case 'BRS464':
        var storeName = 'Bognor Regis';
        var googleLatLong = new google.maps.LatLng(50.798991,-0.667444);
        var trafficURL = 'http://hatrafficinfo.dft.gov.uk/feeds/rss/CurrentAndFutureEvents/South%20East.xml';
        break;
}

    var store = googleLatLong;
    var myOptions = {
        zoom:12,
        mapTypeId: google.maps.MapTypeId.HYBRID,
        disableDefaultUI: true,
        center: store
    }   
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

    var trafficLayer = new google.maps.TrafficLayer();
    trafficLayer.setMap(map);

}

window.onload = function () {
    initialize();
}
</script> 
```

*   [例子](http://www.geocodezip.com/v3_MW_example_linktomap.html?lat=0.884976&lng=-81.018677&zoom=7&type=m)
*   [您的代码/BRS464 示例](http://www.geocodezip.com/v3_simpleMap_parseQueryOnInit.html?store=BRS464)
*   [您的代码/POO746 示例](http://www.geocodezip.com/v3_simpleMap_parseQueryOnInit.html?store=POO746)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T01:17:27.177

我最终通过拆分经度和纬度来解决这个问题。为经度和纬度创建单独的变量。代替

```
 var googleLatLong = '50.736129,-1.988229'; 
```

我现在有：

```
 var glat = '50.736129';
 var glong = '-1.988229'; 
```

在谷歌地图初始化函数中，它现在看起来像这样：

```
 var store = new google.maps.LatLng(glat,glong); 
```

不太确定为什么它不能与组合的经度和纬度变量一起使用，但是你去了，使这个改变使代码工作。

# ios - Truncated Fat File Linker Error

> ID：14861683
> 
> 赞同：8
> 
> 时间：2013-02-13T19:42:32.303
> 
> 标签：ios, xcode, linker-errors

Although I am familiar to developing in Objective-C, I still consider myself a bit of a n00b when it comes to error interpretation. I working on an application for work that others are also working on. I believe we may have different versions of Xcode, and one developer has a PC (the others and I have a MacBook). I am using Xcode 4.5.1.

**The Problem**

I am getting the following *Apple Mach-O Linker Error*:

> ld: truncated fat file. Slice from 68 to 2783300 is past end of file with length 135 for architecture i386 clang: error: linker command failed with exit code 1 (use -v to see invocation)

The full error is as follows (paths renamed):

> Ld build/Debug-iphonesimulator/MyApp.app/MyApp normal i386 cd /Users/me/Documents/MyApp/trunk setenv IPHONEOS_DEPLOYMENT_TARGET 5.1 setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/opt/local/bin:/usr/local/git/bin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/me/Documents/MyApp/trunk/build/Debug-iphonesimulator -F/Users/me/Documents/MyApp/trunk/build/Debug-iphonesimulator -F/Users/me/Documents/MyApp/trunk -filelist /Users/me/Documents/MyApp/trunk/build/MyApp.build/Debug-iphonesimulator/MyApp.build/Objects-normal/i386/MyApp.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -lsqlite3.0 -v -fobjc-arc -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=5.1 -framework MobileCoreServices -weak_framework Accounts -weak_framework AdSupport -weak_framework Social -framework CoreBluetooth -framework MediaPlayer -framework QuartzCore -framework UIKit -framework Foundation -framework CoreGraphics -framework FacebookSDK -o /Users/me/Documents/MyApp/trunk/build/Debug-iphonesimulator/MyApp.app/MyApp
> 
> Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn) Target: i386-apple-darwin11.4.2 Thread model: posix "/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld" -demangle -dynamic -arch i386 -ios_simulator_version_min 5.1.0 -syslibroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -o /Users/me/Documents/MyApp/trunk/build/Debug-iphonesimulator/MyApp.app/MyApp -lcrt1.o -L/Users/me/Documents/MyApp/trunk/build/Debug-iphonesimulator -filelist /Users/me/Documents/MyApp/trunk/build/MyApp.build/Debug-iphonesimulator/MyApp.build/Objects-normal/i386/MyApp.LinkFileList -objc_abi_version 2 -lsqlite3.0 -no_implicit_dylibs -framework MobileCoreServices -weak_framework Accounts -weak_framework AdSupport -weak_framework Social -framework CoreBluetooth -framework MediaPlayer -framework QuartzCore -framework UIKit -framework Foundation -framework CoreGraphics -framework FacebookSDK -force_load /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/arc/libarclite_iphonesimulator.a -framework Foundation -lobjc -lSystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/4.1/lib/darwin/libclang_rt.ios.a -F/Users/me/Documents/MyApp/trunk/build/Debug-iphonesimulator -F/Users/me/MyApp/trunk ld: truncated fat file. Slice from 68 to 2783300 is past end of file with length 135 for architecture i386 clang: error: linker command failed with exit code 1 (use -v to see invocation)

I have found close to no documentation on this error. What's the problem? How do I resolve an error like this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-25T07:33:45.647

我在某处读过这个答案，

文件和文件夹的符号链接（在您的情况下是某些框架）在从 MAC-OS/X 移动到 Windows 时会变成胖文件。因此，无论何时我们将项目框架从您的 MAC 复制粘贴/签出到 Windows 或反之，它都会被更改，文件会根据符号链接进行修改。

因此，您可以做的只是检查您的项目文件并单独替换框架（请注意，您要替换的框架应该是新鲜下载或从 MAC 的某处复制，而不是 WINDOWS）。

希望这对某人有帮助！

# c# - 如何使用带有 ASP.NET 4.5 的 C# 在中继器中使用链接按钮

> ID：14861690
> 
> 赞同：5
> 
> 时间：2013-02-13T19:43:24.967
> 
> 标签：c#, asp.net, repeater, asplinkbutton

在 asp.net 中，我在数据库中有一个表格，其中包含问题、提交日期和答案。在页面加载时只出现问题。现在我想使用任何链接，点击显示答案和表格数据中指定的日期，在文本框或标签中并再次单击该链接答案再次消失，就像单击时展开和缩小一样。那么我应该在 C# 中使用什么编码呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T20:12:35.997

我相信您可以处理中继器的[ItemCommand](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemcommand.aspx)事件。

在Repeater 的项目模板中为您希望用户单击的链接放置一个LinkBut​​ton 控件。将此的 CommandName 属性设置为有意义的值，例如“ShowAnswers”。此外，将 Label 或 TextBox 控件添加到 Repeater 的项目模板中，但在 aspx 标记中将其 Visible 属性设置为 false。

在代码隐藏中，在 ItemCommand 事件处理程序中检查 的值是否`e.CommandName`等于您的命令（“ShowAnswers”）。如果是这样，则在该Repeater 项目（通过访问）中找到答案和日期的标签或文本框控件`e.Item`。找到它们后，将它们的 Visible 属性设置为 true。

注意：您可以使用 AJAX 采用不同的方法为用户提供更无缝的体验，但这种方法最初可能更容易实现。

我认为实现看起来像这样。免责声明：我没有测试过这段代码。

代码隐藏：

```
void Repeater_ItemCommand(Object Sender, RepeaterCommandEventArgs e)
{
    if (e.CommandName == "ShowAnswers")
    {
        Control control;

        control = e.Item.FindControl("Answers");
        if (control != null)
            control.Visible = true;

        control = e.Item.FindControl("Date");
        if (control != null)
            control.Visible = true;
    }
} 
```

ASPX 标记：

```
<asp:Repeater id="Repeater" runat="server" OnItemCommand="Repeater_ItemCommand">
  <ItemTemplate>
    <asp:LinkButton id="ShowAnswers" runat="server" CommandName="ShowAnswers" />
    <asp:Label id="Answers" runat="server" Text='<%# Eval("Answers") %>' Visible="false" />
    <asp:Label id="Date" runat="server" Text='<%# Eval("Date") %>' Visible="false" />
  </ItemTemplate>
</asp:Repeater> 
```

# php - SQL_BIG_SELECTS，优化我的查询

> ID：14861695
> 
> 赞同：1
> 
> 时间：2013-02-13T19:43:35.380
> 
> 标签：php, mysql, sql, join

我正在使用 HTML 选择输入，启用了多项选择，我正在查看选定的选项并尝试处理我的 SQL ...但是，我收到来自 SQL 的警告，告诉我如果我的选择语句是正确的，我应该使用“SET SQL_BIG_SELECTS = 1”，因为 JOIN 超过了限制？

这是我的查询：

```
"
        SELECT wposts.*, wpostmeta.* 
        FROM $wpdb->posts wposts, $wpdb->postmeta wpostmeta, $wpdb->postmeta wpostmeta2, $wpdb->postmeta wpostmeta3 
        WHERE wposts.ID = wpostmeta.post_id 
            AND wposts.ID = wpostmeta2.post_id 
            AND wposts.ID = wpostmeta3.post_id 
            AND wpostmeta.meta_key = 'listing_subtype' 
                AND wpostmeta.meta_value = '$search_home_type' 
            AND wpostmeta2.meta_key = 'map_area' 
                AND ";

                $count = 0;
                foreach ($params['search_map_area'] as $map_area) :
                    if ( $count != 0 ) :
                        $querystr .= "OR ";
                    endif;
                    $querystr .= "wpostmeta2.meta_value = '$map_area' ";
                    $count++;
                endforeach;

    $querystr .= "AND wpostmeta3.meta_key = 'price_current' 
                AND wpostmeta3.meta_value BETWEEN $search_price_min AND $search_price_max 
            AND wposts.post_status = 'publish' 
            AND wposts.post_type = 'vreb_property' 
        ORDER BY wposts.post_date DESC 
        LIMIT 0, 20
        "; 
```

有没有更好的方法来查询这个？`OR wpostmeta2.meta_value = '$map_area'`这似乎是导致我的脚本超时的倍数......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:53:22.893

```
 FROM $wpdb->posts wposts, 
        INNER JOIN $wpdb->postmeta wpostmeta ON wposts.ID = wpostmeta.post_id
        INNER JOIN $wpdb->postmeta wpostmeta2 ON wposts.ID = wpostmeta2.post_id
        INNER JOIN $wpdb->postmeta wpostmeta3 ON wposts.ID = wpostmeta3.post_id 
    WHERE ... 
```

使用 JOIN ... ON 可能比在 WHERE 类中拥有所有 ID 关系更可取。

* * *

您确实应该使用参数化查询，因此您不会对 SQL 注入敞开心扉，因为您似乎没有正确地转义您使用的任何字符串。[http://www.php.net/manual/en/mysqli.real-escape-string.php](http://www.php.net/manual/en/mysqli.real-escape-string.php)

但是，如果您在私有/内部应用程序和安全性上工作，那该死的......

```
 $temp = "'" . implode("','", $params['search_map_area']) . "'";
            if($temp != "''")
                $querystr .= "wpostmeta2.meta_value IN ($temp)";
            else
                $querystr .= " 1=1 "; 
```

使用 IN 关键字而不是多个 "OR col = 'val'" 也是首选。

# upgrade - Openfire 升级到 3.8 后，名册组的联系人未返回给客户端

> ID：14861697
> 
> 赞同：2
> 
> 时间：2013-02-13T19:43:40.820
> 
> 标签：upgrade, openfire

我在 openfire 3.7.1 中使用 JDBCGroupProvider 从数据库中选择组，并通过在 ofGroupProp 表中将它们标记为 shared-roster-group 来填充使用它们的名册。这运作良好。上周我将服务器升级到 openfire 3.8，之后共享名册组的联系人停止发送给客户端。（因为我的用户只有来自这个共享名册组的朋友，所以现在所有用户的名册都是空的）有人在 openfire 升级后遇到并解决了类似的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T23:25:22.223

从 Openfire 3.7.1 升级到 3.8.2 后，我遇到了同样的问题，只是为了找到这个悬而未决的问题。经过一番搜索，我发现这是一个缓存问题。要清除缓存，请转到**管理控制台**上的**服务器 -> 缓存摘要**并检查以下所有内容：

 ***   团体
*   组元数据缓存
*   名册
*   用户

然后选择页面底部的**清除选定项。**在缓存上可能会过度杀戮，但它对我有用！**

# java - 使用 HashSet 测试遏制

> ID：14861702
> 
> 赞同：0
> 
> 时间：2013-02-13T19:43:50.990
> 
> 标签：java, hashset

我正在用 Java 编写一个程序，我想在其中使用 HashSet（和 HashMap）。我无法让 contains（和 containsKey）方法正常工作。我想我必须在某处覆盖一些 equals 方法才能使其工作。这个想法是让以下代码产生输出：true。关于我如何做到这一点的任何想法？

```
import java.util.HashSet;
import java.util.Set;

public class Sets {

    public static void main(String args[]){

        Set<StringBuilder> wordSet = new HashSet<StringBuilder>();
        StringBuilder element = new StringBuilder("Element");
        wordSet.add(element);
        StringBuilder element2 = new StringBuilder("Element");
        System.out.println(wordSet.contains(element2));

    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T19:45:02.767

你不能`StringBuilder`在这里使用，因为`StringBuilder`使用引用相等，而不是内容相等。改用就好`String`了。

（这是有道理的，因为`StringBuilder`它是可变的，两个`StringBuilder`s 可能在某一时刻相等，但在以后不相等。这不是写一个`hashCode()`或`equals`方法的问题，因为`StringBuilder`它不是你写的类，它是内置在 Java 中的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T19:45:11.417

StringBuilder 不会覆盖默认的 hashCode() 和 equals() 方法，因此它使用 Object 的实现 - 它基本上执行 == 检查。由于您没有使用完全相同的 StringBuilder 实例，因此 contains() 调用返回 false。

由于该类是最终类，因此您无法将其扩展为添加 equals() 和 hashCode()，因此您需要自己的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T19:45:12.380

不要使用 StringBuilder。使用字符串。

# r - 在 R 中使用 diag()

> ID：14861704
> 
> 赞同：0
> 
> 时间：2013-02-13T19:44:02.880
> 
> 标签：r, matlab, matrix

我正在查看我正在翻译为 Matlab 的这段代码，我只有源代码，而不是 R 中的运行版本。

```
Result[,1:2]<-diag(max) 
```

其中 max 是一个 [2*1] 数组。

我曾假设这是在分配给 Result 中的前 4 个元素的 rhs 上创建一个对角矩阵。

但是，我现在认为只有 lhs 上的对角线元素应该改变（到 RHS 的最大值）。这是对代码的正确阅读吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:04:51.077

此代码不会分配。只需比较矩阵，逐个元素。仅当您具有正确的尺寸时，它才有效。这里有一个例子：

```
set.seed(1234)

Result <- matrix(rnorm(20),nrow=2)
Result[,1:2] <= diag(max(c(2,2)))

     [,1]  [,2]
[1,]  TRUE FALSE
[2,] FALSE  TRUE 
```

这是一个你得到错误的例子（最可能的情况）

```
Result[,1:2] <= diag(max(c(2,4)))
Error in Result[, 1:2] <= diag(max(c(2, 4))) : non-conformable arrays 
```

**OP编辑后**编辑****

 **如果原始代码是

```
Result[,1:2] <- diag(max(c(2,2)))

   [,1] [,2]      [,3]       [,4]       [,5]
[1,]    1    0 0.4291247 -0.5747400 -0.5644520
[2,]    0    1 0.5060559 -0.5466319 -0.8900378 
```

代码将分配一个对角矩阵（第 4 个元素）作为 shwon a bove，但如果您没有正确的维度，这将不起作用。例如：

```
 Result <- matrix(rnorm(6),nrow=3)
  Result[,1:2] <- diag(max(c(2,2)))

 Error in Result[, 1:2] <- diag(max(c(2, 2))) : 
 number of items to replace is not a multiple of replacement length 
```

您有一个错误，因为结果的行数多于 RHS。

```
Result
           [,1]       [,2]
[1,] -1.2070657 -2.3456977
[2,]  0.2774292  0.4291247
[3,]  1.0844412  0.5060559 
```

和 RHS 是

```
diag(max(c(2,2)))
     [,1] [,2]
[1,]    1    0
[2,]    0    1 
```**

# java - BoxLayout 粘在顶部

> ID：14861705
> 
> 赞同：0
> 
> 时间：2013-02-13T19:44:04.250
> 
> 标签：java, swing, layout, layout-manager, boxlayout

我刚开始使用 BoxLayout 管理器。

我已经制作了两个相邻的按钮，第三个应该转到下一行（前两个下方），前两个按钮应该在框架的顶部。

我怎样才能做到这一点？

这是我当前的代码

```
 Box box = Box.createHorizontalBox();
    box.add(Box.createHorizontalGlue());
    box.add(new JButton("Button"));
    box.add(new JButton("Hello"));

    box.add(Box.createVerticalBox());
    box.add(Box.createVerticalStrut(100));
    box.add(new JButton("Button2"));

    add(box); 
```

![在此处输入图像描述](../Images/f394abdb91940da7fffe8f273d7beda0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:22:04.653

您当前的代码看起来与您对所需内容的描述完全不同。听起来你需要

*   顶层垂直框
    *   一个水平盒子
        *   按钮
        *   差距
        *   按钮
    *   差距
    *   按钮

所以像

```
Box vbox = Box.createVerticalBox();

Box hbox = Box.createHorizontalBox();
hbox.add(new JButton("Button"));
hbox.add(Box.createHorizontalStrut(10));
hbox.add(new JButton("Hello"));
vbox.add(hbox);

vbox.add(Box.createVerticalStrut(100));
vbox.add(new JButton("Button2")); 
```

# database - 活动数据库设计

> ID：14861706
> 
> 赞同：0
> 
> 时间：2013-02-13T19:44:10.383
> 
> 标签：database

一直在做活动日志数据库设计。询问这些实体之间的关系是什么：

我的实体是日志、活动、角色（区域）、人员。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:49:54.777

取决于你需要什么。

似乎人们执行一项活动并被记录下来......

所以你会有一个包含这些东西的链接表：

```
log_book_table
--------------
log_id
person_id
activity_id
activity_time 
```

# java - TextToSpeech 引发未知异常

> ID：14861707
> 
> 赞同：0
> 
> 时间：2013-02-13T19:44:20.023
> 
> 标签：java, android, exception, text-to-speech

我正在创建一个涉及文本消息的 android 应用程序，其中一个功能是在输入时读出每个字母。我正在使用**TextToSpeech**。

我让它在一个测试项目中工作，但是当将它集成到我自己的项目中时，我收到了一个*未知的异常*。

谁能看到可能导致这种情况的原因并提出补救措施？我创建了一个名为speech 的类，它在另一个类中实例化，并且有一个调用speak out 的方法（类似于下面的第二个示例。）还有谁能解释为什么我需要在第一个示例中扩展Activity？同样有问题的行说**"new TextToSpeech is not defined"**。

片段在哪里不起作用。错误开启`tts = new TextToSpeech(this, this);`

```
public class Speech extends Activity implements TextToSpeech.OnInitListener {

    private TextToSpeech tts;
    private String toRead;

    public Speech(String toRead){

        this.toRead = toRead;
        tts = new TextToSpeech(this, this);
    } 
```

这是它在哪里工作的代码

```
public class MainActivity extends Activity implements
        TextToSpeech.OnInitListener {
    /** Called when the activity is first created. */

    private TextToSpeech tts;
    private Button btnSpeak;
    private EditText txtText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tts = new TextToSpeech(this, this);

        btnSpeak = (Button) findViewById(R.id.btnSendSMS);

        txtText = (EditText) findViewById(R.id.txtMessage);

        // button on click event
        btnSpeak.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                speakOut();
            }

        });
    }

    @Override
    public void onDestroy() {
        // Don't forget to shutdown tts!
        if (tts != null) {
            tts.stop();
            tts.shutdown();
        }
        super.onDestroy();
    }

    public void onInit(int status) {

        if (status == TextToSpeech.SUCCESS) {

            int result = tts.setLanguage(Locale.US);

            if (result == TextToSpeech.LANG_MISSING_DATA
                    || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                Log.e("TTS", "This Language is not supported");
            } else {
                btnSpeak.setEnabled(true);
                speakOut();
            }

        } else {
            Log.e("TTS", "Initilization Failed!");
        }

    }

    private void speakOut() {

        String text = txtText.getText().toString();

        tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);
    }
} 
```

日志信息

```
02-13 20:00:54.974: D/AndroidRuntime(11127): Shutting down VM
02-13 20:00:54.974: W/dalvikvm(11127): threadid=1: thread exiting with uncaught exception (group=0x411cd300)
02-13 20:00:54.979: E/AndroidRuntime(11127): FATAL EXCEPTION: main
02-13 20:00:54.979: E/AndroidRuntime(11127): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{org.BT/org.BT.Text_entry}: java.lang.NullPointerException
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2024)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.os.Looper.loop(Looper.java:137)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.app.ActivityThread.main(ActivityThread.java:4898)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at java.lang.reflect.Method.invokeNative(Native Method)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at java.lang.reflect.Method.invoke(Method.java:511)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at dalvik.system.NativeStart.main(Native Method)
02-13 20:00:54.979: E/AndroidRuntime(11127): Caused by: java.lang.NullPointerException
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.content.ContextWrapper.getContentResolver(ContextWrapper.java:91)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.speech.tts.TtsEngines.getDefaultEngine(TtsEngines.java:75)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.speech.tts.TextToSpeech.getDefaultEngine(TextToSpeech.java:1235)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.speech.tts.TextToSpeech.initTts(TextToSpeech.java:595)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.speech.tts.TextToSpeech.<init>(TextToSpeech.java:553)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.speech.tts.TextToSpeech.<init>(TextToSpeech.java:527)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.speech.tts.TextToSpeech.<init>(TextToSpeech.java:512)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at org.BT.Speech.<init>(Speech.java:17)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at org.BT.Text_entry.<init>(Text_entry.java:48)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at java.lang.Class.newInstanceImpl(Native Method)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at java.lang.Class.newInstance(Class.java:1319)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.app.Instrumentation.newActivity(Instrumentation.java:1057)
02-13 20:00:54.979: E/AndroidRuntime(11127):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2015)
02-13 20:00:54.979: E/AndroidRuntime(11127):    ... 11 more 
```

- - - - - - - - - - - - - - - - - - - - -编辑 - - - - ----------------------------------------------------------- 进一步的研究有建议可能是因为我在 android 上下文之外尝试 Android 框架？这可能是真的吗 - 因为我使用的是课程而不是活动？如果是这样，我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T22:17:59.717

这在我看来是 TextToSpeech (TTS) 的标准示例，可以在互联网上随处找到，它应该可以毫无问题地正常工作。（但是，这并不意味着此代码示例没有任何设计问题。）

也许您使用的 Android 版本太旧或您的手机上没有正确设置 TTS？您是否检查了手机上的 TTS 设置？（通常，如果 TTS 没有在您的手机上正确设置，此代码应该调用正确的安装页面来执行此操作，但我记得看到一条消息，这部分有时会被炸毁。）

`txtText`您还应该在使用 初始化后检查它是否为空`findViewById()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:21:08.963

我就是这样做的。。

```
public class TextToSpeechActivity extends Activity implements TextToSpeech.OnInitListener
{
private TextToSpeech mTts;
// This code can be any value you want, its just a checksum.
private static final int MY_DATA_CHECK_CODE = 1234;

/**
* Called when the activity is first created.
*/
@Override
public void onCreate(Bundle savedInstanceState)
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

// Fire off an intent to check if a TTS engine is installed
Intent checkIntent = new Intent();
checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
startActivityForResult(checkIntent, MY_DATA_CHECK_CODE);

}

public void speakClicked(View v)
{
// grab the contents of the text box.
EditText editText = (EditText) findViewById(R.id.inputText);

mTts.speak(editText.getText().toString(),TextToSpeech.QUEUE_FLUSH, null);
}

public void onInit(int i)
{

}
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
if (requestCode == MY_DATA_CHECK_CODE)
{
if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS)
{
// success, create the TTS instance
mTts = new TextToSpeech(this, this);
}
else
{
// missing data, install it
Intent installIntent = new Intent();
installIntent.setAction(
TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
startActivity(installIntent);
}
}
}

@Override
public void onDestroy()
{
if (mTts != null)
{
mTts.stop();
mTts.shutdown();
}
super.onDestroy();
}
} 
```

# sql-server - 使用不同的服务器/数据库执行 SQL 任务

> ID：14861712
> 
> 赞同：5
> 
> 时间：2013-02-13T19:44:42.223
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, ssis

我可以让我的执行 SQL 任务查看 2 个不同的连接管理器吗？例如：我需要来自 ServerA/DatabaseA 的数据来查询 ServerB/DatabaseB。所以现在我需要编写一个查询并从两台服务器检索数据。现在2台服务器都不是链接服务器，不一定。

这是否可能，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:05:47.253

我之前必须找到一种方法来解决缺少链接服务器的问题，并且我已经做了类似的事情 - 试一试：

```
if object_id('tempdb..#mytemptable') is not null begin drop table #mytemptable end
select * into #mytemptable
from openrowset('SQLNCLI10','Server=TheOtherServersName;Trusted_Connection=yes;','SELECT * FROM FullyQualifiedName.dbo.MyTable')
/* Now use the temptable created on this server to do your join/subquery on whatever */
select * from MyOtherTable a
join #mytemptable b on a.id = b.id 
```

干杯!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T21:17:26.433

`Server A`为和添加具有单独数据流源任务的数据流任务`Server B`。然后使用适当的数据流转换任务连接结果。

例如，此数据流接受一个`Flat File Source`和`OLEDB Source`任务，对结果进行排序，然后将[`Merge Join`](http://msdn.microsoft.com/en-us/library/ms141775.aspx)任务用于结果。听起来您的实现需要两个`OLEDB Sources`或（ODBC、ADO NET 等）。

我喜欢链接服务器上的这种方法，或者`OPENROWSET`，因为您不必配置链接服务器或[`Adhoc Distributed Queries`](http://msdn.microsoft.com/en-us/library/ms187569.aspx)在 SQL Server 数据源上启用。

![SSIS 数据流](../Images/6d254ea2c6d0469ac173d033ca05af1c.png)

# ruby - 与 Ruby 命令行开关“-p”混淆

> ID：14861713
> 
> 赞同：1
> 
> 时间：2013-02-13T19:44:47.043
> 
> 标签：ruby, ruby-1.9.3

`-p`==> 假设循环像 -n 但打印行也像 sed。

现在我尝试在下面看看它是如何工作的：

```
@ubuntu:~$ ruby -p
hi #<~~ pressed on ENTER
   # nothing printed baack 
\t
-:5: syntax error, unexpected $undefined, expecting $end
@ubuntu:~$ 
```

在上面输入“hi”后，当我按“ENTER”时，上面***有空行***。我认为它会输出为***hi***。

现在我尝试了一些不同的方式：

```
@ubuntu:~$ ruby -p -e '"hi"'
hi  #<~~ pressed on ENTER
hi
ttt #<~~ pressed on ENTER
ttt
\t  #<~~ pressed on ENTER
\t
EOF #<~~ pressed on ENTER
EOF 
```

但在这里它似乎`-p`按预期工作。而是`Loop`陷入了无限`Loop`。我试图`EOF`完成这个循环，但没有发生，而是它也被打印出来了。

谁能帮我理解为什么会有这些差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:35:06.453

`-p`会做：

```
- Read a line from input
- Pass the input to the code
- If the code executes successfully, print the input 
```

如果您不提供文件名或`-e`命令行，它只会使用标准输入而不执行任何操作。`-p`不打印，因为没有提供代码。

当你刚刚 put时，它会在你每次输入一行时`-pe '"hi"'`生成一个字符串（但它在内存中但没有输出）并按指示打印。`hi``-p`

`EOF`你放的不是EOF指标。它是一个字符串`"EOF"`。如果要向 ruby​​ 发送 EOF 信号，请按`Ctrl+Z`Enter

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:53:16.410

您的第一个实验失败了，因为没有程序，解释器将读取标准输入，直到 EOF。因此，您处于令人困惑的情况，*首先*需要从标准输入输入程序，然后是 ^D 或控制台上的任何 EOF，*然后*您的程序将启动并*再次*读取标准输入以实现固定循环。

在第二种情况下，您至少可以避免双重标准输入陷阱。而且它并不完全是一个无限循环，当您键入 EOF 时，它将完成。

# asp.net-mvc-3 - ASP.NET MVC 自定义视图路径会破坏 Visual Studio 快捷方式

> ID：14861714
> 
> 赞同：4
> 
> 时间：2013-02-13T19:44:52.537
> 
> 标签：asp.net-mvc-3, visual-studio-2010, shortcuts

我看过很多关于如何更改 ASP.NET MVC 项目的默认路径的文章，以便您可以通过扩展 RazorViewEngine 并指定新的路径格式来重新定位或重命名控制器、模型和视图文件夹。

到目前为止，这很好用，但副作用是它破坏了“转到视图”或“添加视图...”的 Visual Studio 快捷方式。

关于是否可以自定义这些快捷方式选项以了解我指定的新路径的任何想法？

提前致谢！- 斯科特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T06:42:56.950

无法扩展 Visual Studio 功能以支持自定义路径。但是，在即将发布的 ASP.NET 和 Web Frameworks 2012.2 更新中（您现在可以从[此处](http://www.asp.net/vnext/overview/fall-2012-update)下载预览），添加视图功能已更新为在哪些文件夹将启用它以及哪些文件夹启用它时更加灵活。惯于。它现在支持在名为“Views”的文件夹下的任何文件夹中添加视图。

关于 Go To View，它没有更新，因为不幸的是，VS 工具无法知道对视图引擎进行的运行时自定义 - 不过我同意它会很酷！

（顺便说一句，我获取此信息的来源是我在 Microsoft 从事 ASP.NET MVC 工作。）

# ruby-on-rails-3 - Rails未定义方法'model_name'

> ID：14861716
> 
> 赞同：7
> 
> 时间：2013-02-13T19:44:58.947
> 
> 标签：ruby-on-rails-3, activemodel

我有以下模型：

```
class Contact
  attr_accessor :name, :emails, :message

  def initialize(attrs = {})
    attrs.each do |k, v|
      self.send "#{k}=", v
    end
  end

  def persisted?
    false
  end
end 
```

在我看来，我正在拨打联系表格，如下所示：

```
<div class="email_form">
   <%= render 'form' %>
</div> 
```

这是控制器：

```
class ShareController < ApplicationController
  layout "marketing_2013"
  respond_to :html, :js

  def index
    @contact = Contact.new
  end
end 
```

这是表格：

```
<%= form_for(@contact) do |f| %>
    <%= f.label :name, "Your Name" %>
    <%= f.text_field :name %>
    <%= f.label :text, "Send to (separate emails with a comma)" %>
    <%= f.text_field :emails %>
    <%= f.label :message, "Email Text" %>
    <%= f.text_area :message %>
    <%= f.submit %>
<% end %> 
```

出于某种原因，我不断收到此错误： `undefined method model_name for Contact:Class`

为什么我目前所拥有的东西不起作用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T20:09:58.457

除了 config/routes.rb 中的正确路线外，您还需要模型上的以下两条说明：

```
include ActiveModel::Conversion
extend  ActiveModel::Naming 
```

看看这个问题：[form_for without ActiveRecord, form action not updates](https://stackoverflow.com/questions/9577975/form-for-without-activerecord-form-action-not-updating)。

对于`route`这些答案的一部分，您可以将其添加到您的 config/routes.rb 中：

```
resources :contacts, only: 'create' 
```

这将生成以下路线：

```
contacts POST /contacts(.:format)  contacts#create 
```

然后您可以使用此操作 (contacts#create) 来处理表单提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-07T13:16:59.353

添加`include ActiveModel::Model`到您的联系人文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:53:31.630

你的路线可能不会去你认为的地方，因此@contact 可能是 nill

运行“rake routes”并检查新路径..如果您使用默认值，则路线为

new_contact_path.. 并且 erb 应该在文件中：app/views/contacts/new.html.erb

```
 `def new
    @contact = Contact.new
  end` 
```

# visual-studio-2010 - 在 Windows 中编译 Qt 时出现致命错误

> ID：14861718
> 
> 赞同：3
> 
> 时间：2013-02-13T19:45:01.820
> 
> 标签：visual-studio-2010, qt, qt5

我尝试在 Windows 7 中使用 MSVS2010 构建 Qt 5.0.1。

这些是我的步骤：

1.  将源代码提取到 C:\Qt\5.0.1
2.  启动 VS2010 命令提示符
3.  键入 configure（此步骤大约需要 45 分钟）
4.  输入 nmake

一小时后，我收到以下错误：

```
"C:\Program Files (x86)\Microsoft DirectX SDKUtilities\bin\x86\fxc.exe"
/nologo /E standardvs /T vs_2_0 /Fh shaders\standardvs.h ..\..\..\3rdparty\angle
\src\libGLESv2\shaders\Blit.vs

'C:\Program' is not recognized as an internal or external command,
operable program or batch file.

NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft DirectX SDKUtiliti
es\bin\x86\fxc.exe' : return code '0x1'
Stop.

NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 10.0
\VC\bin\nmake.exe"' : return code '0x2'

Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'

Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'

Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'

Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'

Stop.
NMAKE : fatal error U1077: 'cd' : return code '0x2'

Stop. 
```

我在网上搜索，看到了很多解决方案，但没有一个能解决我的问题。我什至重新安装了 Windows 并重复了这些步骤，但我再次遇到了同样的错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T20:06:13.013

您的环境路径中有空格和括号。尝试使用短路径，您可以通过打开 Windows 命令提示符`cmd`并键入来获取它们`dir /X`。短名称将在相应目录的前面

例如，如果您有一个脚本来设置您的环境：

```
SET VISUALDIR=C:\Program Files\Microsoft Visual Studio 9.0
SET PATH=%VISUALDIR%\VC\bin;%PATH% 
```

变成

```
SET VISUALDIR=C:\PROGRA~1\MICROS~1.0
SET PATH=%VISUALDIR%\VC\bin;%PATH% 
```

如果你没有脚本，错误的路径可能是在默认的 Windows`PATH`环境变量中设置的。然后您必须手动编辑`PATH`变量并在此处应用短路径。

窗户电源

# java - mvc:resources 的注解配置替换 - Spring

> ID：14861720
> 
> 赞同：79
> 
> 时间：2013-02-13T19:45:06.843
> 
> 标签：java, spring, spring-mvc, configuration

我正在尝试升级我的 spring mvc 项目以利用新的注释并摆脱我的 xml。以前我在我`web.xml`的行中加载我的静态资源：

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

现在，我正在利用`WebApplicationInitializer`类和`@EnableWebMvc`注释来启动我的服务，而无需任何 xml 文件，但似乎无法弄清楚如何加载我的资源。

是否有注释或新配置可以将这些资源拉回而无需使用 xml？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-02-13T20:42:45.810

**对于春季 3 和 4：**

一种方法是让您的配置类扩展`WebMvcConfigurerAdapter`，然后覆盖以下方法：

```
@Override
public void addResourceHandlers(final ResourceHandlerRegistry registry) {
    registry.addResourceHandler("/resources/**").addResourceLocations("/resources/");
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2018-02-12T19:47:04.917

## 春天 5

从 Spring 5 开始，正确的方法是简单地实现[WebMvcConfigurer](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html)接口。

例如：

```
@Configuration
@EnableWebMvc
public class MyApplication implements WebMvcConfigurer {

    public void addResourceHandlers(final ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/resources/**").addResourceLocations("/resources/");
    }
} 
```

请参阅中已弃用的消息：[WebMvcConfigurerAdapter](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/WebMvcConfigurerAdapter.html)

# python - 在 Python 中转义 % 字符

> ID：14861726
> 
> 赞同：0
> 
> 时间：2013-02-13T19:45:16.543
> 
> 标签：python, django, string, escaping, design-patterns

我在 python 中有以下字符串，然后用 Django 在模板中呈现。

```
link_string = '<a href="/search/?q=%23%s"> %s </a>' 
```

它是指向 %23 为“#”的搜索 url 的链接，因为我正在尝试使用 #hashtag 搜索对象。

我打算在 %23 之后用 %s 和另一个值插入 2 个值：

```
link_href = link_string % ('hashtag_value', 'Link Name') 
```

获得以下最终字符串的正确方法是什么：

```
<a href="/search/?q=%23hashtag_value"> Link Name </a> 
```

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:46:58.177

```
link_string = '<a href="/search/?q=%%23%s"> %s </a>' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T19:47:02.063

`%`使用 double percent 进行转义`%%`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T19:47:09.303

只需输入`%`两次字符

```
link_string = '<a href="/search/?q=%%23%s"> %s </a>' 
```

# java - 如何配置 Spring 的 RestTemplate 在返回 404 的 HTTP 状态时返回 null

> ID：14861728
> 
> 赞同：26
> 
> 时间：2013-02-13T19:45:28.623
> 
> 标签：java, spring, rest, jaxb

我正在调用一个返回 XML 的 REST 服务，并使用`Jaxb2Marshaller`它来编组我的类（例如`Foo`，`Bar`等）。所以我的客户端代码如下所示：

```
 HashMap<String, String> vars = new HashMap<String, String>();
    vars.put("id", "123");

    String url = "http://example.com/foo/{id}";

    Foo foo = restTemplate.getForObject(url, Foo.class, vars); 
```

当服务器端的查找失败时，它会返回 404 以及一些 XML。我最终被`UnmarshalException`抛出，因为它无法读取 XML。

```
Caused by: javax.xml.bind.UnmarshalException: unexpected element (uri:"", local:"exception"). Expected elements are <{}foo>,<{}bar> 
```

响应的正文是：

```
<exception>
    <message>Could not find a Foo for ID 123</message>
</exception> 
```

如果发生 404 ，我该如何配置`RestTemplate`以便`RestTemplate.getForObject()`返回？`null`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-07-11T21:31:54.253

```
Foo foo = null;
try {
    foo = restTemplate.getForObject(url, Foo.class, vars);
} catch (HttpClientErrorException ex)   {
    if (ex.getStatusCode() != HttpStatus.NOT_FOUND) {
        throw ex;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-04-20T11:20:47.013

要专门捕获 404 NOT FOUND 错误，您可以捕获`HttpClientErrorException.NotFound`

```
Foo foo;
try {
    foo = restTemplate.getForObject(url, Foo.class, vars);
} catch (HttpClientErrorException.NotFound ex) {
    foo = null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-28T09:49:53.547

捕获与服务器相关的错误，这将处理内部服务器错误，

```
}catch (HttpServerErrorException e) {
        log.error("server error: "+e.getResponseBodyAsString());
        ObjectMapper mapper = new ObjectMapper();
        EventAPIResponse eh = mapper.readValue(e.getResponseBodyAsString(), EventAPIResponse.class);
        log.info("EventAPIResponse toString "+eh.toString()); 
```

# opencv - BackgroundSubtractorMOG 输出的掩码上的凸包

> ID：14861729
> 
> 赞同：1
> 
> 时间：2013-02-13T19:45:30.213
> 
> 标签：opencv, convex-hull, background-subtraction

我正在使用`BackgroundsubtractorMOG()`基本上提取一个蒙版来分离出前景。然后我`convexHull()`在面具上使用来定位移动物体的位置。

但我收到以下错误：

```
openCV Error: Assertion failed (nelems >= 0 && (depth == CV_32F || depth == CV_32S)) in convexHull, file /home/ameya/OpenCV2.4.2/modules/imgproc/src/contours.cpp, line 1947
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/ameya/OpenCV2.4.2/modules/imgproc/src/contours.cpp:1947: error: (-215) nelems >= 0 && (depth == CV_32F || depth == CV_32S) in function convexHull 
```

我检查了没有。元素以及类型转换的掩码矩阵。但错误仍然存​​在。有没有人遇到过类似的问题。我正在使用 OpenCV 2.4.2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-26T05:51:24.403

使用这种格式，它会有所帮助（注意类型转换为`Mat`）：

```
convexhull(Mat(inputarray),hull,0,0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:03:46.840

你在你的蒙版图像上调用凸包吗？

它应该与point2d（或索引）向量一起使用，例如。从 findContours()

# java - Android 应用程序 - 如何添加 Nexus 7 屏幕支持而无需明确定义其他应用程序

> ID：14861734
> 
> 赞同：4
> 
> 时间：2013-02-13T19:45:46.453
> 
> 标签：java, android

我看了一下这个问题：

[为什么我的应用没有显示在 Google Play 的平板电脑上？](https://stackoverflow.com/questions/11691775/why-my-app-is-not-showing-up-on-tablets-in-google-play)

但是，如果我在接受的答案中使用该清单条目，它将删除以前支持的默认屏幕。如何在默认支持的其他屏幕尺寸之上添加 Nexus 7，而无需为我想要支持的每个尺寸输入条目？

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:windowSoftInputMode="adjustPan"
      package="com.xxx.xxx" android:versionName="1.01" android:versionCode="2">    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.RECORD_VIDEO"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />   
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />
    <uses-permission android:name="com.android.vending.BILLING" />

<compatible-screens>
    <!--no small size screens -->

    <!--Only hdpi and xhdpi for normal size screens -->
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />

    <!-- all large size screens -->
    <screen android:screenSize="large" android:screenDensity="ldpi" />
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />

    <!-- all xlarge size screens -->
    <screen android:screenSize="xlarge" android:screenDensity="ldpi" />
    <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="hdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />

    <!-- Special case for Nexus 7 -->
    <screen android:screenSize="large" android:screenDensity="213" />

</compatible-screens>

    <application android:icon="@drawable/icon" android:label="xxx"
        android:debuggable="false">
        <activity android:name="com.xxx.xxx.xxx" android:label="xxx" 
                  android:configChanges="orientation|keyboardHidden" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-sdk android:minSdkVersion="5" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T10:17:40.517

您可以使用 Android 开发者控制台做到这一点

![在此处输入图像描述](../Images/273fc0ed394ab38bca5d12fab320a210.png)

# mongodb - 创建了 mongod 复制集但无法连接

> ID：14861735
> 
> 赞同：0
> 
> 时间：2013-02-13T19:45:46.857
> 
> 标签：mongodb, shell, replication, database

我使用以下命令创建了 mongoDB 复制集：

> F:\data>mongod --replSet set1 --dbpath 1 --port 27101 --oplogSize 50 --logpath log.1 --logappend --fork

它无法识别`--fork`并且它也不存在`--help`（我猜）所以我已经排除了它并得到了以下输出。我认为到目前为止没有任何问题。

```
all output going to: log.1 
```

然后，当我尝试使用此命令使用 mongo 控制台时

```
F:\data>mongo --port 27101 
```

它返回

```
MongoDB shell version: 2.2.2
connecting to: 127.0.0.1:27101/test
Thu Feb 14 01:36:33 Error: couldn't connect to server 127.0.0.1:27101 src/mongo/
shell/mongo.js:93
exception: connect failed 
```

现在可以做些什么来让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:33:43.313

实际上我在参数中我有这个数据路径`--dbpath 1`，所以我需要在我的当前目录中有一个名为“1”的目录，但是我在`data`目录中创建了它是由于误解。

谢谢`@Alptigin Jalayr`你和其他引导我走向正确方向的人。

# cmake - 在 CMake 脚本中使用生成器命令中的额外标志

> ID：14861738
> 
> 赞同：1
> 
> 时间：2013-02-13T19:45:54.143
> 
> 标签：cmake

如何为 CMake 编写 CMakeLists.txt 脚本，以便生成器文件中的目标使用生成器命令中提供的额外标志？例如，

命令：

> cmake -G "Unix Makefiles"
> 
> 使 MY_FLAGS="-Dfoo -Bar"

CMakeLists.txt：

```
add_executable ( MyApp main.cpp )
# How to reference MY_FLAGS in compile, link commands for MyApp target? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:16:30.297

您可以在标志中简单地使用 Makefile 变量取消引用语法：

```
add_definitions("$(MY_FLAGS)") 
```

我使用它`add_definitions`是因为由此添加的标志不会传递给链接器。您可以尝试将此类引用放入`CMAKE_<Lang>_FLAGS`相关的变量/属性中。

但是，不知道非 Makefile 生成器将如何处理这样的事情。也许封闭`if(CMAKE_GENERATOR ...)`是个好主意。

# jsp - JSP 中的进度条

> ID：14861740
> 
> 赞同：0
> 
> 时间：2013-02-13T19:45:57.997
> 
> 标签：jsp, progress-bar

我正在向 servlet 发出某种请求，这需要时间来处理该请求。该请求需要一些时间才能完成。由于这种延迟，我想在 JSP 进度条中显示 servlet 进度。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:30:05.920

我建议加载 jsp，然后通过 ajax 调用获取所需的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T13:10:02.947

**如果你得到的进度是百分比，那么你可以在 jsp 中使用**

1.  Websocket 连接

2.  jQuery

3.  阿贾克斯

    webSocket 连接是一个双向连接。它是一个带有@serverEndpoint 的简单类。servlet中的监听器可以将进度状态（％）传递给websocket，serverendpoint将值传递给jsp。jsp使用jquery显示进度。就是这样。ajax 调用用于提交表单提交。

如果您不想使用 websockets，请使用 uploadify 等插件。

# html - 如何使用 Groovy XML MarkupBuilder 创建有效的 HTML 脚本标签？

> ID：14861746
> 
> 赞同：6
> 
> 时间：2013-02-13T19:46:29.990
> 
> 标签：html, xml, groovy, markup, markupbuilder

我正在使用 Groovy 1.8 XML MarkupBuilder 构建一个包含`<script>`标签的 HTML 页面。

当我在 Firefox 18 中加载页面时，我看到一个空白页面，而不是预期的结果。

这似乎是由于生成的`<script>`标签没有补充`</script>`标签，即使没有内容可以保证`</script>`标签。（参见：[https](https://stackoverflow.com/questions/69913/why-dont-self-closing-script-tags-work "为什么自关闭脚本标签不起作用？") ://stackoverflow.com/questions/69913/why-dont-self-closing-script-tags-work ）

示例 Groovy 代码：

```
def builder = new groovy.xml.MarkupBuilder( out )

builder.html {
  head {
    script( type:'text/javascript', src:'//example.com/example.js' )
  }

  body {
    p("Hello...Newman.")
  }
} 
```

如果我使用 Firefox 的“查看页面源代码”（Ctrl-U）检查（空白）呈现页面的 HTML，我会看到：

```
<html>
  <head>
    <script type='text/javascript' src='//example.com/example.js />
  </head>
  <body>
    <p>Hello...Newman.</p>
  </body>
</html> 
```

仔细观察，我看到`<script ... />`标签上的“/”呈现为红色，“/”上的悬停文本显示“在非空 HTML 元素上使用的自关闭语法 (“/>”)。忽略斜线并将其视​​为开始标签。”

那么，如何`<script>`使用 Groovy XML MarkupBuilder 生成有效的 HTML 标记？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-13T20:02:15.420

如果你定义了一些空的内容，那么脚本标签将会有一个单独的结束标签：

```
script( '', type:'text/javascript', src:'//example.com/example.js' ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-22T19:25:13.737

或者你可以使用

`script(type:'text/javascript', src:'//example.com/example.js){mkp.yield("")}`

# ruby-on-rails-3 - rails 放置控制器代码的位置

> ID：14861748
> 
> 赞同：0
> 
> 时间：2013-02-13T19:46:33.500
> 
> 标签：ruby-on-rails-3

我在新的工作订单表单上有一个选择框，因此用户可以选择位置。

这是表单输入字段：

```
 <%= f.select :location_id, @loctree %> 
```

我有一些控制器代码定义了@loctree 应该返回的内容。

但是，我对将代码放在哪里感到困惑。它会进入“def new”区域的 Workorders_controller.rb 吗？还是它位于 Locations_controller.rb 中的某个位置？

银行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:49:07.973

如果您发布的代码处理了 Workorders 的新操作，那么它应该`new`在`Workorders_controller`. 此方法将在您的模板之前运行，并且在那里设置的任何成员变量都可以在您的模板中使用。

# objective-c - 突出显示或填充 UIViewController 的空白区域

> ID：14861750
> 
> 赞同：-1
> 
> 时间：2013-02-13T19:46:39.387
> 
> 标签：objective-c, image, uiviewcontroller, colors, uiimageview

我有一个 UIViewController，它最初是白色背景，允许用户通过触摸事件在特定颜色的 UIImageView 中着色。完成后，我想要一种方法来突出显示或显示 UIImageView 的未着色区域（剩余的白色区域）。有没有一种很好的方法来实现这一点。我试过弄乱 CGBitMap 方法，但我没有成功，没有任何代码错误。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:06:24.663

你能简单地改变你的 UIViewController 的背景颜色吗？

# javascript - 如何在highchart中设置x轴从图表底部开始

> ID：14861756
> 
> 赞同：0
> 
> 时间：2013-02-13T19:46:56.277
> 
> 标签：javascript, highcharts

当我有一个图表并且所有数据都为零时，x 轴居中。（jsfiddle）

![](../Images/d5cb38eac45b76d3cd992e363226af4d.png)

但我需要从图表底部开始，如下所示：

![](../Images/792a3b616e73c109e980fe1813a032b5.png)

我怎样才能用 HighChart 做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:03:02.287

设置 yAxis`max`和`min`.

```
yAxis: {
    max: 0.06,
    min: 0
} 
```

[**演示**](http://jsfiddle.net/ricardolohmann/hFFwL/)

对于动态修改。

```
function preventZeroLabel() {
    var axis = this.yAxis[0];
    if( -axis.min == axis.max ) {
        axis.setExtremes(0, 1, true);
    }
}

chart: {
    events: {
        load: preventZeroLabel,
        redraw: preventZeroLabel
    }
} 
```

[**演示**](http://jsfiddle.net/ricardolohmann/hFFwL/4/)

# django - 将用户名传递给通用 DetailView 时出错 - django 1.4.3

> ID：14861757
> 
> 赞同：0
> 
> 时间：2013-02-13T19:46:57.900
> 
> 标签：django, django-urls, django-generic-views

首先，我[在 url 中阅读了这个 django 用户名，而不是 id](https://stackoverflow.com/questions/3013098/django-username-in-url-instead-of-id/3013160#3013160)它有帮助，但没有解决我的问题。`views.py`如果可以的话，我不想写任何代码。

我在`urls.py`. 注意：在这两种情况下，我都会得到`name 'username' is not defined`.

# 1

```
urlpatterns = patterns('',
    url(r'^(?P<username>[\w.@+-]+)/$',
        login_required(
            DetailView.as_view(
                model=User,
                username=username,
                template_name='account/user_detail.html'),
            login_url='/accounts/login/'
        )
    ),
) 
```

# 2

```
urlpatterns = patterns('',
    url(r'^(?P<username>[\w.@+-]+)/$',
        login_required(
            DetailView.as_view(
                model=User,
                queryset=User.objects.get(username=username),
                template_name='account/user_detail.html'),
            login_url='/accounts/login/'
        )
    ),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:00:16.903

您不能在 urlconf 中进行那种动态过滤。子类 DetailView 并覆盖`get_queryset`以过滤`self.kwargs['username']`.

# java - 通过 java 代码记录用户选择和更改 textview 字符串

> ID：14861759
> 
> 赞同：1
> 
> 时间：2013-02-13T19:46:58.850
> 
> 标签：java, android, xml, eclipse, input

我是 android 编程的新手（和 java 相关的）。虽然我对编程概念有很好的掌握。

我试图做一个练习来帮助建立我的理解是创建一个简单的文本冒险。我想首先让用户能够选择诸如玩家种族或等级之类的东西（这将最终决定故事的发展方式）。我计划使用单选按钮（甚至可能是普通按钮）来这样做。

我的问题是这个。当用户选择他们的班级（即：“法师”）时，我希望存储该选择。从那里我希望能够定义一个条件语句，该语句将改变用户将获得的故事。问题是我还没有掌握记录用户选择和更改文本视图（或任何其他视图）中的文本的过程

一旦我知道如何记录用户选择的变量并在“if”语句中对其进行测试，然后在此条件内更改视图的输出，我将继续前进。

提前感谢=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:01:23.997

首先，您需要在布局 XML 文件中创建一个单选组，然后为每个单选按钮提供一个 id 值，以便从 java 代码中引用，如下所示：

```
<RadioGroup android:id="@+id/RadGroup">
<RadioButton android:id="@+id/Rad1"
    android:text="Radio1"/>
<RadioButton android:id="@+id/Rad2"
    android:text="Radio2"/>
<RadioButton android:id="@+id/Rad3"
    android:text="Radio3"/>
</RadioGroup> 
```

然后从那里你可以使用 if 语句或 switch 语句，至于改变你可以使用的 TextView `myTextView.setText("myString")`，你可以在每个 if 中使用它来实现不同的文本值。

# python - 如何在 Windows 上安全地从 64 位切换到 32 位 Python？

> ID：14861765
> 
> 赞同：1
> 
> 时间：2013-02-13T19:47:08.793
> 
> 标签：python, windows, python-2.7, windows-7-x64

我在 Windows 7 上安装了 64 位 Python 并使用了一段时间。现在我需要切换到 32 位 Python，因为某些库需要 32 位。我可以轻松地做到这一点，同时保留所有以前安装的库和设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:18:38.070

您可以使用 virtualenv 来维护使用不同 Python 版本的环境。

对于保持相同安装基础的问题更直接，答案通常是“否”，您不能保持相同的安装。某些包是针对特定的 Python 版本/操作系统/硬件组合（例如 mypackagePy27Win64.exe）而获得的，这些包将在您的文件系统上放置 64 位特定的 DLL。使用 virtualenv 可以让您将新的 x32 工作环境与现有的 x64 工作环境隔离开来。

# php - 使用 curl/php 上传图片

> ID：14861771
> 
> 赞同：0
> 
> 时间：2013-02-13T19:47:36.123
> 
> 标签：php, jquery, ajax, curl, firebug

我正在尝试在使用 curl/php 的网站上使用 php/curl 上传图像。该网站使用 ajax/flash 将图像上传到外部服务器。当我使用 firebug 在网站上手动上传图像时，如果图像成功上传，我只会收到响应（带有永久链接），但我看不到发布了哪些参数和数据以及确切的位置。

需要上传图片的网址：

[http://tinyurl.com/bp779wx](http://tinyurl.com/bp779wx)

如何找出需要发送哪些参数才能将图像成功上传到网站上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:57:08.337

您提到的特定上传者从以下 URL 中提取 epsToken 变量，然后将其用作参数来上传文件。

[http://johannesburg.gumtree.co.za/c-GetEpsToken](http://johannesburg.gumtree.co.za/c-GetEpsToken)

就我而言，令牌是：

> 1:b6ac30fa715a395cf728ac29847b2516f701a8f291fd5243d5153eae41c10636

[您可以在此处查看](http://pastebin.com/s9ZNJwAf)我提出的上传请求的完整 POST 数据。请记住，这是一个多部分/表单数据请求，因此您可能需要调整 curl/PHP 代码以支持它。

基本上，以下参数是通过 POST 请求提供的：

```
Filename = Image.png 
b = 18 
s = 1C5000 
n = k 
a = 1:b6ac30fa715a395cf728ac29847b2516f701a8f291fd5243d5153eae41c10636
v = k 
r = 0 
u = the actual image, sent as a multipart stream 
Upload = Submit Query 
```

我建议您分析其他参数并使用其他答案中的代码以成功上传图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T05:59:29.613

使用 PHP 和 cURL 上传图像。

```
function curl_post_request($url, $data, $referer='') {
$data = http_build_query($data); // seems to be required arrays should'nt be supported  ? whatever.
$c = curl_init();
curl_setopt($c, CURLOPT_URL, $url);
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
curl_setopt($c, CURLOPT_HEADER, true);
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_POSTFIELDS, $data);
curl_setopt($c, CURLOPT_REFERER, $referer);
curl_setopt($c, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1");
curl_setopt($c, CURLOPT_HEADER, $headers); 
curl_setopt($c, CURLINFO_HEADER_OUT, true);
curl_setopt($c, CURLOPT_VERBOSE, true);
$output = curl_exec($c);
var_dump(curl_getinfo($c, CURLINFO_HEADER_OUT));
//var_dump($data);
if($output === false) trigger_error('Erreur curl : '.curl_error($c),E_USER_WARNING);
curl_close($c);
return $output;
}

if(isset($_GET['GO'])) {

$data = array(
'pic1' => "@".realpath('image.jpg'),
'postedvar1' => 'test1',
'postedvar2' => 'test2'
 );
$url = 'http://localhost/test/index.php';
$a = curl_post_request($url, $data);
var_dump($a);

} else {

print_r($_POST);
print_r($_FILES);
} 
```

通过远程表单使用 CURL + PHP 上传图像

```
 $info = array('test title','1234','virginia','@'.realpath('e:\wamp  
 \www\1.jpg'),'@'.realpath('e:\wamp\www\2.jpg'),'@'.realpath('e:\wamp\www
 \3.jpg'),'@'.realpath('e:\wamp\www\4.jpg'),'test description');
  $post->postAd($url, $info); 
```

另请阅读此

[http://www.maheshchari.com/upload-image-file-to-remote-server-with-php-curl/](http://www.maheshchari.com/upload-image-file-to-remote-server-with-php-curl/)

并看到这个链接

[http://blog.smileylover.com/remote-upload-to-imageshackus-with-phpcurl/](http://blog.smileylover.com/remote-upload-to-imageshackus-with-phpcurl/)

和

[http://blogs.digitss.com/php/curl-php/posting-or-uploading-files-using-curl-with-php/](http://blogs.digitss.com/php/curl-php/posting-or-uploading-files-using-curl-with-php/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T06:40:29.623

网站上传的图片有问题 - 它只是弹出一个错误

> 上传您的图片时出错。请检查图像尺寸和尺寸，然后重试。如果您仍然有问题，您可以切换到基本图像加载器。

对于每种类型的图像和基本图像加载器实际上也不可用！

# database - 只有一个有用数据字段的表是否应该是它自己的表

> ID：14861772
> 
> 赞同：1
> 
> 时间：2013-02-13T19:47:41.033
> 
> 标签：database, database-design

刚收到一个关于数据库表的问题。如果表只有一个主键（标识）和 1 列有用数据，是它自己的表还是应该在父表中作为数据？

该表存储用户将设置的安全问题，他们创建帐户并用于在他们想要更改密码或忘记密码时重置密码。我有问题的 ID，以及此表中的问题字符串。

我将它放在自己的表中的原因是同一个问题可以用于许多用户，所以为什么要在父表中多次存储问题。这就是我的想法，只是想问问其他人对此的看法。

编辑：安全问题将由我的团队输入，而不是用户自己。用户将选择要使用的问题之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:53:53.000

您必须始终尝试防止重复，这就是为什么您的解决方案是最好的。它还将使您的数据库更小。具有 int 值的外键小于字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:58:20.747

我建议使用桥接表进行此示例设计： ![在此处输入图像描述](../Images/74da104feb3c405bd9c327f2503a94d6.png)

您可以为用户提出多个问题，并且他们的答案是独一无二的。此外，多个用户的问题可能相同。

# c++ - 错误：没有运算符“<<”与这些操作数匹配

> ID：14861773
> 
> 赞同：2
> 
> 时间：2013-02-13T19:47:47.460
> 
> 标签：c++

我是 C++ 新手，我无法理解为什么会出现此错误。我收到的错误消息是“没有运算符 '<<' 与这些操作数匹配”这是我在发生错误时的编码

```
#include "LList.h"
#include <iostream>

using namespace std;

int main( )
{
    LList a;

    a.push_back(  "30" );
    a.push_front( "20" );
    a.push_back(  "40" );
    a.push_front( "10" );
    a.push_back(  "50" );

    cout << "list a:\n" << a << '\n';

    return 0;    
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T19:48:56.930

您需要重载`operator <<`for LList。为此，请执行以下操作：

```
std::ostream& operator<<(ostream& out, const LList& llist) 
```

# java - 如何在 java 中打印出 DOCX 文件？

> ID：14861775
> 
> 赞同：2
> 
> 时间：2013-02-13T19:47:56.853
> 
> 标签：java, printing

我创建了一些 java 代码，允许我打印 png、pdf、jpg 等，但我被困在 docx 文件和可能的其他文件类型上，

目前我正在使用下面的代码：

```
 if (extension.equals("txt")) {
            psInFormat = DocFlavor.INPUT_STREAM.AUTOSENSE;
        } else if (extension.equals("png")) {
            psInFormat = DocFlavor.INPUT_STREAM.PNG;
        } else if (extension.equals("gif")) {
            psInFormat = DocFlavor.INPUT_STREAM.GIF;
        } else if (extension.equals("jpg")) {
            psInFormat = DocFlavor.INPUT_STREAM.JPEG;
        } else if (extension.equals("pdf")) {
            psInFormat = DocFlavor.INPUT_STREAM.PDF;
        } 
```

要确定文件类型是为该文档类型创建正确输入流的 ps，我可以修改此代码以包含 doc 文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:12:00.983

没有办法直接用 DocFlavor 做到这一点

看看 POI 项目

[http://poi.apache.org/hwpf/index.html](http://poi.apache.org/hwpf/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T20:16:23.147

比 POI 更好的答案是使用 docx4j

[http://www.docx4java.org/trac/docx4j](http://www.docx4java.org/trac/docx4j)

这样做的原因是因为它具有访问 docx 包的不同部分所需的所有 API。

# c# - 如何从日期时间选择器中提取日期和时间？

> ID：14861778
> 
> 赞同：0
> 
> 时间：2013-02-13T19:48:05.513
> 
> 标签：c#, winforms, sql-server-2008, datetime

我正在使用 WinForm 并有两个日期时间选择器：一个显示短日期，一个显示时间。在我的 SQL DB 中，我有一个 DateTime 字段，我想使用放在一起的 DTP 的两个值来填充它。

这就是我目前所拥有的：（这不起作用）

```
myDateTimeField = Convert.ToDateTime(dtp_date.Text + dtp_time.Text); 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:15:36.410

使用第一个属性的方法`DateTime` `Add`，传递第二个属性返回的值。`DateTimePicker``Date``Timespan``DateTimePicker``TimeOfDay`

```
DateTime myDateTimeField = dtp_date.Value.Date.Add(dtp_time.Value.TimeOfDay); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:51:03.777

与其将属性相加，不如`Text`尝试将值相加：

```
var date = dtp_date.Value;
var time = dtp_time.Value.TimeOfDay;
myDateTimeField = date.Add(time); 
```

# c# - 强制变量仅保留某些值

> ID：14861780
> 
> 赞同：3
> 
> 时间：2013-02-13T19:48:07.713
> 
> 标签：c#

我正在使用 vs 2012。我有一个简单的字符串属性

```
 string _someString;

 public string MyString
  {
     get
       {
          return _someString;
       }

   } 
```

我希望这个属性只保存某些值。因此，当客户端使用此属性时，只能使用那些特定的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:51:28.393

听起来您*真正*想要的是`enum`：

```
public enum MyValues //TODO rename all the things
{
    SomeValue,
    SomeOtherValue,
    FinalValue,
} 
```

那么您的财产可以是：

```
private MyValues value;
public  MyValues MyValue
{
    get { return value; }
} 
```

如果您需要获取该值的字符串表示形式，只需调用`ToString`枚举值：

```
string stringValue = value.ToString(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T19:52:33.667

使用枚举，如：

```
enum MyEnum
{
AllowableValue#1,
AllowableValue#2,
...
}

public MyEnum myEnum { get; set; } 
```

然后仅使用枚举的值填充一些 UI 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:51:21.127

我想你想对 setter 进行一些验证：

```
public string MyString
{
    get
    {
        return _someString;
    }
    set
    {
        if (value == "a" || value == "b" /* ... */)
            _someString = value;
        else
            throw new InvalidArgumentException("Invalid value!");
    }
} 
```

确保通过属性设置它，而不是实际的成员变量。

# java - 将 JUnit 测试从 3.x 移植到 4.x

> ID：14861783
> 
> 赞同：2
> 
> 时间：2013-02-13T19:48:18.263
> 
> 标签：java, junit4, junit3

我们有很多用 Junit 3.x 编写的旧单元测试。我的任务是将它们移植到我们的 JUnit 4.x 编码标准，其中包括禁止使用“扩展 TestCase”。

一些旧测试调用了我现在需要删除的**super.setUp()**，但是，我不确定该调用中发生了什么。我可以直接删除这行代码而不用担心，还是应该用其他东西替换它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:50:41.457

由于现在在每次测试之前都会调用 setUp()，因此您可以安全地删除 super.setUp()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:59:13.033

注释掉该行，然后运行测试。如果测试写得对，假设测试之前成功，测试结果应该会给你答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T16:26:40.970

super.setUp() 是 TestCase 不做任何事情，可以安全地删除。如果您要扩展另一个类，您仍然需要保留 super.setUp() 调用。但是，那个不会编译失败，所以你应该没问题。

例如，假设我们有 ATest 扩展 BTest 和 BTest 扩展 TestCase。您可以安全地从 BTest 而不是 ATest 中删除 super.setUp() 调用。由于 BTest 可能会做某事，因此 ATest 仍然需要调用它。

# python - 提高 NDB 查询性能

> ID：14861784
> 
> 赞同：3
> 
> 时间：2013-02-13T19:48:18.807
> 
> 标签：python, google-app-engine, optimization, app-engine-ndb

我正在寻求建议，如何在速度方面提高这一点：

我的数据模型：

```
class Events(ndb.Model):
    eventid = ndb.StringProperty(required=True)
    participants = ndb.StringProperty(repeated=True) 
```

我尝试获取数据的方式：

```
def GetEventDataNotCached(eventslist):
    futures = []
    for eventid in eventslist:
        if eventid is not None:
            ke = database.Events.query(database.Events.eventid == eventid)
            future = ke.get_async(keys_only = True)
            futures.append(future)

    eventskeys = []
    for future in futures:
        eventkey = future.get_result()  
        eventskeys.append(eventkey)

    data = ndb.get_multi(eventskeys) 
```

因此，我将密钥异步获取，然后将密钥传递给“get_multi”-有没有其他方法可以加快速度，因为我仍然对性能不满意。

在重复属性中，最多可以有几百个字符串。事件模型中有几个 10.000 行。在事件列表中只有几十个我想要获取的 eventid。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T17:37:44.953

我发现长列表（即大型`repeated=True`属性）的协议缓冲区的反序列化开销非常差。

你在 appstats 中看过这个吗？您是否看到在您之后没有执行 RPC 的空白处有很大的空白`get_multi()`？这就是反序列化开销。

我发现克服这个问题的唯一方法是删除长列表并在单独的模型中管理它们（即，完全避免长重复的属性列表），但当然，这对于您的用例来说可能是不可能的。

所以最大的问题是：当您获得事件列表时，您真的需要所有参与者，还是您可以以某种方式推迟查找？例如，同步获取所有事件可能更便宜/更快，然后为每个事件（来自不同模型）的参与者启动异步获取并在内存中组合 - 也许您只需要 25 个最近注册的参与者或其他东西因此可以限制您的子查询的成本？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T00:02:23.160

简单性和执行速度方面的改进（而不是成本）可能是：

```
data = database.Events.query(database.Events.eventid.IN(eventslist)).fetch(100) 
```

下一步是将 eventid 作为键中的 id，创建如下

```
event = Event(id=eventid, ...) 
```

在这种情况下你做

```
data = ndb. get_multi(ndb.Key(Event, eventid) for eventid in eventlist) 
```

哪个更快，len(eventlist)*6 便宜。

# visual-studio-2012 - 使用 VS2012 进行代码分析 - 缺少 Dll 引用 / GAC

> ID：14861786
> 
> 赞同：0
> 
> 时间：2013-02-13T19:48:21.753
> 
> 标签：visual-studio-2012, code-analysis, gac, gacutil

我正在尝试对我的项目进行代码分析，但我被许多 DLL 解决问题所困扰。

我已经使用 gacutil 向 GAC 添加了一些 dll 并通过这种方式解决了一些问题，但是我看到一个关于引用 System.Net.Http 版本 2.0.0.0 的错误。

我的解决方案中没有对这个 DLL 的单一引用，事实上，我的机器上的任何地方都没有这个 DLL，只有版本 1.0.0.0 或 4.0.0.0。

我在网站的配置文件中确实有这个 dll 的绑定重定向，但显然代码分析过程没有使用它。

我不确定如何最好地进行此操作。我可以将代码分析配置为使用绑定重定向吗？或者我是否需要在线寻找 DLL 以便 GAC 获得它们？

将不胜感激任何想法，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:02:07.150

我决定只使用 GAC 版本 1.0.0.0 并且代码分析现在工作正常......

# asp.net - 在 ASP.NET 2.0 应用程序中通过 HTTP 接收字节数组

> ID：14861787
> 
> 赞同：0
> 
> 时间：2013-02-13T19:48:23.450
> 
> 标签：asp.net, .net, web-services

尝试在不使用 SOAP 的情况下以轻量级方式将字节数组传输到 ASP.NET 2.0 应用程序。我决定使用通用 HTTP 处理程序 (.ashx)，将 HTTP 请求正文解释为 Base64 字符串，将其解码为字节数组并保存到磁盘。

```
<%@ WebHandler Language="C#" Class="PdfPrintService" %>

using System;
using System.Web;

public class PdfPrintService : IHttpHandler {

    public void ProcessRequest (HttpContext context) {
        string body;
        using (System.IO.StreamReader reader = 
            new System.IO.StreamReader(context.Request.InputStream))
        {
            body = reader.ReadToEnd();
        }

        byte[] bytes = System.Convert.FromBase64String(body);
        String filePath = System.IO.Path.GetTempFileName() + ".pdf";
        System.IO.File.WriteAllBytes(filePath, bytes);

        // Print file.
        XyzCompany.Printing.PrintUtility.PrintFile(filePath);
    }

    public bool IsReusable {
        get {
            return false;
        }
    }
} 
```

客户端应用程序（在我的例子中是一个 iOS 应用程序）只需将字节编码为 Base64 并将它们发布到这个通用处理程序 (ashx) 的 URL。

我想有一种更好、更正统的方法可以做到这一点。任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:05:05.760

想到的是通过 HttpWebResponse 类之类的类处理的 POST 和 GET 请求。[http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse%28v=vs.71%29.aspxx](http://msdn.microsoft.com/en-us/library/system.net.httpwebresponse%28v=vs.71%29.aspxx) 您可以让您的 iOS 应用尝试 POST 到 ASP.NET 应用，然后设置为接收 POST 并将其解析为您将包含的字节数组。或多或少，这就是在 SOAP 之前通过 Internet 发送某些数据的方式。所有 SOAP 都是这些类型请求的模式。

# java - Spring MVC 使用不同的 HTTP 方法转发到控制器

> ID：14861788
> 
> 赞同：4
> 
> 时间：2013-02-13T19:48:27.813
> 
> 标签：java, spring-mvc

我有这样的登录控制器方法：

```
@RequestMapping(value = "/home", method = RequestMethod.GET)
public String home(Locale locale, Model model) {
    // do stuff with locale and model
    // return an html page with a login form
    return "home";
}

@RequestMapping(value = "/account/login", method = RequestMethod.POST)
public String login(Model model, /* username + password params */){
    try {
        // try to login
        // redirect to account profile page
        return "redirect:/account/profile";
    } catch (LoginException e) {
        // log
        // here I want to reload the page I was on but not with a url /account/login
        // possibly using a forward
        model.addAttribute("error", e.getMessage());
        return "forward:/home";
    }
} 
```

上面的代码适用于成功的登录尝试。但是，当登录尝试失败时，它会失败，因为 Spring`forward`使用相同的 HTTP 方法使用当前请求。因此，因为我使用 POST 发送我的用户名/密码（这导致登录失败），转发也将使用 POST 转到 , 的处理程序方法`/home`，`home()`它需要一个 GET。

Spring 中是否有任何方法可以**在保持当前模型的同时**使用不同的 HTTP 方法重定向到另一个控制器方法（因为我想显示错误消息）？

这是在 Spring 3.2.1 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:36:41.107

`redirect`改为：

```
return "redirect:/home"; 
```

如果您需要`Model`在重定向后属性可用，您可以使用[flash attributes](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-flash-attributes)。

# c++ - 如果标志可用，则强制 g++ 编译器使用来自 x.cpp 的特定标志

> ID：14861789
> 
> 赞同：-5
> 
> 时间：2013-02-13T19:48:28.083
> 
> 标签：c++, g++

如果标志在没有 makefile 的情况下可用，我可以强制 g++ 编译器使用来自 x.cpp 的特定标志吗？

我想要那个`g++ x.cpp`并且`g++ -std=c++0x x.cpp`有相同的结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T19:53:12.633

有点。

你不能在里面设置flags `x.cpp`，但是你可以设置**pragma**。

[这是](http://gcc.gnu.org/onlinedocs/gcc/Pragmas.html)来自 gcc 在线文档的可用编译指示列表。

# ruby-on-rails - 为什么使用 ActiveAdmin / Devise 找不到路由方法“change_password_admin_user”？

> ID：14861791
> 
> 赞同：0
> 
> 时间：2013-02-13T19:48:39.547
> 
> 标签：ruby-on-rails, ruby, devise, activeadmin

不明白怎么找不到这个方法？

```
undefined method `change_password_admin_user' for #<ActiveAdmin::Views::ActionItems:0x007ff1cad9d848> 
```

我的输出`rake routes`

```
change_password_admin_user GET /admin/users/:id/change_password(.:format) /users#change_password 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T19:58:54.110

看来您没有在方法调用中使用后缀。您在问题中粘贴的路线会生成两种方法：

```
change_password_admin_user_path 
```

它返回相对于域的路径，以及包含您网站主机的另一个版本：

```
change_password_admin_user_url 
```

# lisp - 关于 Scheme 的 SHOW/READ/READ-LINE/etc 程序

> ID：14861793
> 
> 赞同：3
> 
> 时间：2013-02-13T19:48:51.680
> 
> 标签：lisp, scheme, procedure

我正在学习 Scheme 并使用一些示例来查看这些东西是否有效。

我在 Eclipse 中使用 Chicken 解释器。

尝试运行以下代码时：

```
(define (bottles n)
  (if (= n 0)
      'burp
      (begin (verse n)
         (bottles (- n 1)))))

(define (verse n)
  (show (cons n '(bottles of beer on the wall)))
  (show (cons n '(bottles of beer)))
  (show '(if one of those bottles should happen to fall))
  (show (cons (- n 1) '(bottles of beer on the wall)))
  (show '()))

(bottles 3) 
```

我收到以下错误：

```
#;1> #;2>  Note: the following toplevel variables are referenced but unbound:

  verse (in bottles)
#;3> #;3>  Note: the following toplevel variables are referenced but unbound:

  show (in verse)   show (in verse)   show (in verse)   show (in verse)   show (in verse)

Error: unbound variable: show

Call history:

<syntax>      (bottles 3)   <eval>    (bottles 3)   <eval>    [bottles] (= n 0)     <eval>    [bottles] (verse n)   <eval>    [verse] (show (cons n (quote (bottles of beer on the wall)))) <-- 
```

有人知道为什么吗？当然，如果我创建一个说“show”将显示内容的程序，那么它可以工作，但是 SHOW 应该是 Scheme 的标准程序吗？因为互联网上的许多代码都是这样显示的，并且没有“显示”程序描述。READ/READ-LINE 等也会发生同样的事情。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T20:14:10.573

`show`程序未定义。作为在 Chicken Scheme 中实现的 R5RS 的一部分，您可以使用`display`或`write`用于输出，如[文档](http://wiki.call-cc.org/man/4/The%20R5RS%20standard#output)中所示。

的功能`show`可以很容易地实现，但是：

```
(define (show obj)
  (display obj)
  (newline)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-23T11:05:22.657

鸡的名字`show`是`print`。如果你这样做 `(define show print)` ，你可以使用任何一个名字

# android - Android（Dalvik）成员变量访问性能

> ID：14861795
> 
> 赞同：2
> 
> 时间：2013-02-13T19:48:54.203
> 
> 标签：android, dalvik

我只是做了一个基准来比较局部变量、成员变量、其他对象的成员变量和 getter setter 的访问性能。基准测试以 10 次 mio 迭代循环增加变量。这是输出：

BENCHMARK：本地101，成员1697，外来成员151，getter setter 268

这是在摩托罗拉 XOOM 平板电脑和 Android 3.2 上完成的。这些数字是执行时间的毫秒数。任何人都可以向我解释成员变量的偏差吗？尤其是与其他对象的成员变量相比时。基于这些数字，在计算中使用它们的值之前，将成员变量复制到局部变量似乎是值得的。顺便说一句，我在 HTC One X 和 Android 4.1 上做了同样的基准测试，结果显示出同样的偏差。

这些数字是合理的还是我错过了系统错误？

这是基准函数：

```
private int mID;

public void testMemberAccess() {
    // compare access times for local variables, members, members of other classes
    // and getter/setter functions
    final int numIterations = 10000000;
    final Item item = new Item();
    int i = 0;

    long start = SystemClock.elapsedRealtime(); 
    for (int k = 0; k < numIterations; k++) {
        mID++;
    }
    long member = SystemClock.elapsedRealtime() - start;

    start = SystemClock.elapsedRealtime(); 
    for (int k = 0; k < numIterations; k++) {
        item.mID++;
    }
    long foreignMember = SystemClock.elapsedRealtime() - start;

    start = SystemClock.elapsedRealtime(); 
    for (int k = 0; k < numIterations; k++) {
        item.setID(item.getID() + 1);

    }
    long getterSetter = SystemClock.elapsedRealtime() - start;

    start = SystemClock.elapsedRealtime(); 
    for (int k = 0; k < numIterations; k++) {
        i++;
    }
    long local = SystemClock.elapsedRealtime() - start;

    // just make sure nothing loops aren't optimized away?
    final int dummy = item.mID + i + mID;  
    Log.d(Game.ENGINE_NAME, String.format("BENCHMARK: local %d, member %d, foreign member %d, getter setter %d, dummy %d",
            local, member, foreignMember, getterSetter, dummy));
} 
```

编辑：
我将每个循环放在一个函数中并随机调用它们 100 次。结果：BENCHMARK：本地 100，成员 168，外国成员 190，getter setter 271 看起来不错，谢谢。外来对象是作为最终类成员创建的，而不是在函数内部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:45:55.203

Well, I'd say that the Dalvik VM's optimizer is pretty smart ;-) I do know that the Dalvik VM is register-based. I don't know the guts of the Dalvik VM, but I would assume that the following is going on (more or less):

In the **local** case, you are incrementing a method local variable inside a loop. The optimizer recognizes that this variable isn't accessed until the loop is completed, so can use a register and applies the increments there until the loop is complete and then stores the value back into the local variable. This yields: 1 fetch, 10000000 register increments and 1 store.

In the **member** case, you are incrementing a member variable inside a loop. The optimizer cannot determine whether or not the member variable is accessed while the loop is running (by another method, object or thread), so it is forced to fetch, increment and store the value back into the member variable on each loop iteration. This yields: 10000000 fetches, 10000000 increments and 10000000 store operations.

In the **foreign member** case, you are incrementing a member variable of an object inside a loop. You have created that object within the method. The optimizer recognizes that this object cannot be accessed (by another object, method or thread) until the loop is completed, so can use a register and apply the increments there until the loop is complete and then store the value back into the foreign member variable. This yields: 1 fetch, 10000000 register increments and 1 store.

In the **getter/setter** case, I am going to assume that the compiler and/or optimizer is smart enough to "inline" getter/setters (ie: it doesn't really make a method call - it replaces `item.setID(item.getID() + 1)` with `item.mID = item.mID + 1`). The optimizer recognizes that you are incrementing a member variable of an object inside a loop. You have created that object within the method. The optimizer recognizes that this object cannot be accessed (by another object, method or thread) until the loop is completed, so it can use a register and apply the increments there until the loop is complete and then store the value back into the foreign member variable. This yields: 1 fetch, 10000000 register increments and 1 store.

I can't really explain why the **getter/setter** timing is twice the **foreign member** timing, but this may be due to the time it takes the optimizer to figure it out, or something else.

An interesting test would be to move the creation of the foreign object out of the method and see if that changes anything. Try moving this line:

```
final Item item = new Item(); 
```

outside of the method (ie: declare it as a private member variable of some object instead). I would guess that the performance would be much worse.

Disclaimer: I'm not a Dalvik engineer.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:33:53.523

除了改变它们的顺序之外，您还可以做其他事情来尝试消除任何干扰：

1-通过第二次计算第一项来消除边界效应；最好使用另一个长变量。

2-将迭代次数增加 10。1000000 似乎是一个很大的数字，但从第一个建议中可以看出；在现代 CPU 上将变量增加 100 万倍是如此之快，以至于填充各种缓存等许多其他事情都变得非常重要。

3-添加虚假指令，如插入虚拟`long l = SystemClock.elapsedRealtime()-start`计算。这将有助于表明这 1000000 次迭代确实是一个很小的数字。

4-将`volatile`关键字添加到该`mID`字段。这可能是排除任何编译器或 CPU 相关优化的最佳方式。

# .net - 将 C# LINQ 转换为 VB.NET

> ID：14861800
> 
> 赞同：0
> 
> 时间：2013-02-13T19:49:09.393
> 
> 标签：.net, vb.net, linq

我在将 C# 中的这个 LINQ 查询转换为 VB.NET 时遇到了一些问题。

C＃：

```
from row in Users
group row by row.Password_tx into Passes
select new {Password = Passes.Key, Total = Passes.Count()} 
```

我曾尝试在 VB.NET 中执行此操作，但运气不佳。我知道 Into 语法有点不同，但在这种情况下我无法弄清楚。

VB.NET：

```
from row in Users _
group by pass = row.Password_tx into passes = Group _
select with {.passes.Key, .passes.Count()} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:15:54.160

这应该这样做：

```
From row In Users
Group By pass = row.Password_tx Into passes = Group
Select Password = pass, Total = passes.Count 
```

这是我用来确认它工作的示例代码：

```
Public Class Form1
  Class User
    Friend Property Password_tx As String
    Sub New(pwd As String)
      Password_tx = pwd
    End Sub
  End Class
  Class Users : Inherits Generic.List(Of User)
  End Class

  Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim u As New Users
    u.Add(New User("abc"))
    u.Add(New User("bcd"))
    u.Add(New User("abc"))

    Dim v = From row In u
            Group By pass = row.Password_tx Into passes = Group
            Select Password = pass, Total = passes.Count
  End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T06:57:58.283

也许你可以试试这个。

```
from row in Users _
group by pass = row.Password_tx into passes = Group _
select New With {.Password = Passes.Key, _ 
                 .Total = Passes.Count()} 
```

# c# - 如何存储包含对象的对象

> ID：14861806
> 
> 赞同：1
> 
> 时间：2013-02-13T19:49:31.610
> 
> 标签：c#, db4o

我有一个小问题如何存储包含另一个对象的对象？例如

对象人

 ``Person { Name, Mother }`

其中 Mother 是同一类 Person 的另一个 Object

谢谢你的帮助 lczernik

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:01:25.467

```
class Person
{
    public string Name;
    public Person Mother;
    Person (string name, Person mother)
    {
        Name = name;
        Mother = mother;
    }
} 
```

像使用它一样

```
Person me = new Person("user2069747", new Person("user2069747's mom name", null));
// null was used because you may not know the name of your grand mom;
Console.WriteLine(me.Name) // prints your name
Console.WriteLine(me.Mother.Name) // prints your mom's name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:52:40.833

db4o 会自动为您存储整个对象图，但是由于性能优化，您需要注意以下场景：

*   对象检索
*   对象更新

在这两种情况下，db4o 都会将请求的操作执行到特定深度，通过以下配置参数进行设置：

*   [激活深度](http://community.versant.com/documentation/reference/db4o-7.12/net35/reference/Content/configuration/common/activation_depth.htm)
*   [更新深度](http://community.versant.com/documentation/reference/db4o-7.12/net35/reference/Content/configuration/common/update_depth.htm)

因此，给定以下模型，您可以在一次调用中存储对象图：

```
using System;
using Db4objects.Db4o;

namespace Db4oSample
{
    class Person
    {
        public string Name { get; set; }
        public Person Mother { get; set; }

        public override string ToString()
        {
            return Name + (Mother != null ? "(" + Mother + ")" : "");
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var grandMother = new Person {Name = "grandma"};
            var mother = new Person {Name = "mother", Mother = grandMother };
            var son = new Person {Name = "son", Mother = mother};

            using(var db = Db4oEmbedded.OpenFile("database.odb")) // Closes the db after storing the object graph
            {
                db.Store(son);
            }

            using(var db = Db4oEmbedded.OpenFile("database.odb"))
            {
                var result = db.Query<Person>(p => p.Name == "son");
                if (result.Count != 1)
                {
                    throw new Exception("Expected 1 Person, got " + result.Count);
                }

                Console.WriteLine(result[0]);
            }
        }
    }
} 
```

希望这可以帮助`

# c# - microsoft word 和 call 被 callee 拒绝

> ID：14861810
> 
> 赞同：1
> 
> 时间：2013-02-13T19:49:48.863
> 
> 标签：c#, wpf, ms-word

我在我的 winform 中加入了单词，但出现以下错误：

```
 System.Runtime.InteropServices.COMException (0x80010001): Call was rejected by callee. (Exception from HRESULT: 0x80010001 (RPC_E_CALL_REJECTED))
   at Microsoft.Office.Interop.Word.DocumentClass.Activate() 
```

当代码执行代码行“doc.ActiveWindow”时。有谁知道或知道如何捕获此异常而不显示它或如何解决它？几天来我一直在努力解决这个问题并且被卡住了。

# php - 通过单击更新 iFrame 的 iFrame-page/ 内容

> ID：14861812
> 
> 赞同：-1
> 
> 时间：2013-02-13T19:49:52.983
> 
> 标签：php, javascript, jquery, iframe, refresh

如果你读过我之前的一些问题，你就会知道我遇到了一个问题，我用 iFrame 解决了这个问题。无论如何，我现在想要的是能够在我单击更新按钮时更新 iFrame 显示的页面（这是我的本地页面）。如果不更新我所在的页面，这怎么可能？

背景信息：我在 home.php 上，我有一个 iFrame。此 iFrame 显示页面 something.php，这是我的页面之一。我必须能够在不等待 something.php 更新的情况下更新 home.php，所以解决方案是将它们放在两个文档中，然后使用 iFrames 包含它（现在 home.php 可以在不等待 something.php 的情况下显示） . 这个something.php 的内容是动态的，并且会根据其他网页进行更新。假设用户想要更新这个 iFrame 的内容，或者内容没有显示出来。然后会给他一个“更新”按钮，它只会刷新 something.php 页面，而不刷新 home.php

可以这样做吗（最好用 PHP，但也欢迎使用 JavaScript/jQuery）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:56:45.150

您必须使用客户端脚本来完成。

类似于以下内容：

```
<input type="button" onclick="reLoadIframe();">

reLoadIframe(){
  document.getElementById('iframeYoureTryingToUpdate').contentWindow.location.reload();
} 
```

或者

```
reLoadIframe(){
  document.getElementById('iframeYoureTryingToUpdate').src =document.getElementById('iframeYoureTryingToUpdate').src`
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:57:28.243

只需在 loc 中提供 url 就足够了。

```
var loc = "http://example.com/example.php";
var frameId = "myFrame";
document.getElementById(frameId).src = loc; 
```

# c# - 值类型和引用类型

> ID：14861813
> 
> 赞同：0
> 
> 时间：2013-02-13T19:50:00.323
> 
> 标签：c#, .net

我对 C# 参考中的一些语句有点困惑。

1.  `Object`是引用类型
2.  `Struct`是值类型
3.  `Struct`派生自对象类

在这种情况下，为什么 struct 或任何其他值类型也不应该是引用类型。

如果我的任何假设是错误的，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:52:34.173

这是因为 Struct 是一种特殊情况，CLR 以特殊方式处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:51:50.493

因为它是规范的一部分。因此，编译器团队正在强制执行此操作。我相信有一篇文章谈到这是一个实现细节，但目前找不到。

您可能还想看看[Struct/Heap Storage question](https://stackoverflow.com/questions/815354/why-are-structs-stored-on-the-stack-while-classes-get-stored-on-the-heap-net)。它可能有助于清除一些事情。

# objective-c - 从 JSON 中获取一个数字并使用它在 Core Data 中将值设置为 Int 32

> ID：14861819
> 
> 赞同：1
> 
> 时间：2013-02-13T19:50:23.383
> 
> 标签：objective-c, core-data

我有一个从 Web 服务接收的 JSON 中提取的数组。当我使用 NSLOG 查看数组的内容时，它显示如下：

```
{ ?    Category = "New Products";
    CategoryID = 104;
    SubCategories =     (
    );
} 
```

我需要获取 Category 和 CategoryID 值并将它们分配给托管对象“newProductCategory”。分配与字符串类型相对应的类别值没有问题，并且将硬编码数字分配给应该接收类别 ID 的 int 32 类型也没有问题。但是在将 CategoryID 值转换为将被接受为 int 32 类型的任何内容时，我一直在苦苦挣扎。

将该值转换为这行代码可消化的东西而不是零的正确语法是什么？

```
[newProductCategory setValue : 0 forKey : @"productCategoryID"]; 
```

这是我失败的尝试之一，可能会提供有用的信息。当我尝试...

```
 // Pull category record "i" from JSON        
        NSArray * categoryProperties = [categories objectAtIndex:i];
        NSNumber * productCategoryID = [categoryProperties valueForKey:@"CategoryID"]; 
```

...然后我尝试以上述格式分配它，使用 productCategoryID 代替零，它会产生以下错误：

> 'NSInvalidArgumentException'，原因：'不可接受的属性值类型：property = "parentCategoryID"; 所需类型 = NSNumber; 给定类型 = __NSCFString; 值 = 104。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T15:45:58.893

即使你在 CoreData 中指定了 int32，你也会传递一个 NSNumber 对象，并且似乎你从 json 解析中得到了一个 NSString（你可以试试 NSStringFromClass([productCategoryID class]) 的日志来确定）。你可以试试 ：

```
NSString * productCategoryID = [categoryProperties valueForKey:@"CategoryID"];
newProductCategory.productCategoryID = @([productCategoryID intValue]);
//or
newProductCategory.productCategoryID = [NSNumber numberWithInt:[productCategoryID intValue]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:53:17.063

你需要设置NSNumber，有2种方式：

```
[newProductCategory setValue:@(0) forKey:@"productCategoryID"]; 
```

或者

```
[newProductCategory setValue:[NSNumber numberWithInt:0] forKey:@"productCategoryID"]; 
```

# c++ - 获取/释放与顺序一致的内存顺序

> ID：14861822
> 
> 赞同：42
> 
> 时间：2013-02-13T19:50:46.627
> 
> 标签：c++, concurrency, atomic, stdatomic, memory-model

对于任何`std::atomic<T>`T 是原始类型的地方：

如果我盲目地使用`std::memory_order_acq_rel`for `fetch_xxx`operations 和`std::memory_order_acquire`for `load`operation 和`std::memory_order_release`for `store`operation （我的意思是就像重置这些函数的默认内存顺序一样）

*   结果是否与我`std::memory_order_seq_cst`对任何声明的操作使用（默认使用）相同？
*   如果结果相同，那么`std::memory_order_seq_cst`在效率方面，这种用法与使用有何不同？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-02-13T22:29:40.070

原子操作的 C++11 内存排序参数指定了排序约束。如果您使用 进行存储`std::memory_order_release`，并且来自另一个线程的加载读取该值，则来自第二个线程的后续读取操作将看到第一个线程在存储释放之前*或之后*`std::memory_order_acquire`存储到任何内存位置的任何值*存储到任何这些内存位置*。

如果存储和后续加载都是，`std::memory_order_seq_cst`那么这两个线程之间的关系是相同的。您需要更多线程才能看到差异。

例如`std::atomic<int>`变量`x`和`y`，最初都是 0。

线程 1：

```
x.store(1,std::memory_order_release); 
```

线程 2：

```
y.store(1,std::memory_order_release); 
```

线程 3：

```
int a=x.load(std::memory_order_acquire); // x before y
int b=y.load(std::memory_order_acquire); 
```

线程 4：

```
int c=y.load(std::memory_order_acquire); // y before x
int d=x.load(std::memory_order_acquire); 
```

`x`正如所写，与和的存储之间没有关系`y`，因此很可能在线程 3 和线程4 中看到`a==1`,和。`b==0``c==1``d==0`

如果所有内存排序都更改为，`std::memory_order_seq_cst`则这将强制存储之间的排序为`x`和`y`。因此，如果线程 3 看到`a==1`然后`b==0`那意味着 store to`x`必须在 store to 之前`y`，所以如果线程 4 看到`c==1`，意味着 store to`y`已经完成，那么 store to`x`也必须完成，所以我们必须有`d==1`。

实际上，`std::memory_order_seq_cst`根据您的编译器和处理器体系结构，在任何地方使用都会增加加载或存储或两者的额外开销。例如，x86 处理器的一种常用技术是使用`XCHG`指令而不是存储`MOV`指令`std::memory_order_seq_cst`，以提供必要的排序保证，而对于`std::memory_order_release`普通的`MOV`就足够了。在具有更宽松内存架构的系统上，开销可能更大，因为普通加载和存储的保证更少。

内存排序很难。[在我的书中](http://www.cplusplusconcurrencyinaction.com)，我几乎用了整整一章来讲述它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-13T20:07:07.403

内存排序可能非常棘手，而且弄错的影响通常非常微妙。

所有内存排序的关键点是它保证“已经发生”，而不是将发生什么。例如，如果您将某些内容存储到几个变量中（例如`x = 7; y = 11;`），那么另一个处理器可能能够在看到x 中`y`的值之前看到 11 。通过在设置和设置`7`之间使用内存排序操作，您正在使用的处理器将保证在继续存储内容之前已将其写入内存。`x``y``x = 7;``y`

大多数情况下，写入发生的顺序并不重要，只要值最终更新即可。但是，如果我们有一个带有整数的循环缓冲区，我们会执行以下操作：

```
buffer[index] = 32;
index = (index + 1)  % buffersize; 
```

并且其他一些线程正在使用`index`来确定新值已被写入，那么我们需要先`32`写入，然后再`index`更新。否则，其他线程可能会获取`old`数据。

这同样适用于使信号量、互斥锁和类似的东西起作用——这就是为什么术语释放和获取用于内存屏障类型的原因。

现在，这`cst`是最严格的排序规则 - 它强制在处理器可以继续执行更多操作之前，您已写入的数据的读取和写入都进入内存。这将比执行特定的获取或释放障碍要慢。它强制处理器确保存储和加载已经完成，而不是仅仅存储或加载。

这有多大区别？它高度依赖于系统架构是什么。在某些系统上，缓存需要 [部分地] 刷新，并从一个内核发送中断到另一个内核以说“请在继续之前执行此缓存刷新工作” - 这可能需要数百个周期。在其他处理器上，它只比执行常规内存写入慢一些。X86 非常擅长做到这一点。例如，某些类型的嵌入式处理器（某些型号的 - 不确定？）ARM 需要在处理器中进行更多工作以确保一切正常。

# jquery - 带有幻灯片效果的整个网站

> ID：14861825
> 
> 赞同：-1
> 
> 时间：2013-02-13T19:50:56.490
> 
> 标签：jquery

有谁知道我怎样才能实现像这里[http://dawidtomczyk.pl/这样的“滑块站点”功能](http://dawidtomczyk.pl/)

点击导航首页等。

在查看了与该站点一起使用的每个插件之后，没有一个与“站点幻灯片”效果相关。查看源代码后，我认为他使用包含 $(window).scroll() 的自定义函数完成了它，我真的不明白我如何才能实现这种“效果”。

另外我想补充一点，我更喜欢尽可能多地实现跨浏览器。IE8+，以及新的。

可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:20:52.597

做你所描述的想法是：

**1\. 布局**

一种。创建一个 100% 宽度和 overflow-x:hidden 的容器 div。

湾。创建一个子 div，其宽度为 (pages * 100) % （其中 pages 是您要显示的不同页面的数量）和 position:relative （稍后对其进行动画处理）。

C。每个页面都是包含在前一个 div 中的一个 div（b.中描述的那个）。这些 div 必须彼此相邻，因此我们将使用 display: inline-block; 并将它们设置为 (100 / pages) % 的宽度。

结构将是这样的，仅显示 2 页：

```
 <div id="slider">
       <div id="pages">
           <div>
               <!-- Content of page 1 -->
           </div><!--
           --><div>
               <!-- Content of page 2 -->
           </div>
       </div>
   </div> 
```

和CSS：

```
 #slider {
       overflow-x: hidden;
       width: 100%;
   }

   #pages {
       position: relative;
       width: 200%;
   }

   #pages > div {
         display: inline-block;
         width: 50%;
   } 
```

“图形”可视化（不是很准确，因为所有 div 都应该重叠，但我希望它有助于可视化布局）。

```
+-SLIDER----------------------------+
|+---PAGES--------------------------------------------------------------+
||+---------------------------------++---------------------------------+|                                 
|||                                 ||                                 ||
|||            PAGE 1               ||             PAGE 2              ||
|||                                 ||                                 ||
|||                                 ||                                 ||
|||                                 ||                                 ||
|||                                 ||                                 ||
||+---------------------------------++---------------------------------+|
|+----------------------------------------------------------------------+
+------------------------------------+ 
```

因为属性 overflow-x 设置为“隐藏”，所以第 2 页没有显示。

**2\. 动画**

考虑到滑块 div 的当前宽度，可以通过为 pages div 的“left”属性设置动画来完成动画。

我试图概述如何实现您所描述的效果的想法。如果你需要实际的代码问我。我希望我是有帮助的。

# jquery - 如何在不触发 onchange 事件的情况下删除 IE 中的选择选项

> ID：14861826
> 
> 赞同：2
> 
> 时间：2013-02-13T19:51:03.483
> 
> 标签：jquery, internet-explorer, onchange

我正在 Wicket 中开发一个应用程序。我所有的下拉菜单都有一个默认选项“选择一个”。当用户更改值时，一些 javascript 会删除“选择一个”选项。

我的一些下拉菜单也有 ajax onchange 事件（Wicket onchange 行为）。

我的问题是，对于 Internet Explorer（7 和 8），删除“选择一个”默认选项将触发 onchange 事件。

因此，我所有带有 ajax 侦听器的下拉列表都被调用了两次。框架触发第一个 ajax 调用，然后 javascript 将删除导致第二个 onchange 事件的选项。

在每个示例的 Firefox 中，我的 ajax 监听器只被调用一次。删除该选项不会触发 onchange 女巫是可以的。

javascript代码：

```
var comboboxes = $("select:not(.emptyOptionEnhanced, .noRemoveEmptyChoice)");
comboboxes.each(function() {
    var combo = $(this);
    var emptyOptions = combo.find("option[value='']");

    if (emptyOptions.length) {
        combo.debug("Enhancing combo box with empty option");
        combo.change(function(e) {
        emptyOptions.debug("Removing empty option").remove();
    });
).addClass("emptyOptionEnhanced"); 
```

# php - 未能打开“../tweets.php”以包含（include_path='.:'）

> ID：14861828
> 
> 赞同：7
> 
> 时间：2013-02-13T19:51:08.020
> 
> 标签：php

我正在尝试使用以下代码包含一个脚本。

```
<div class="main_content">
    <?php include ('tweets.php')  ?>
</div> 
```

但它不断抛出以下错误。

> 警告：include(tweets.php)：无法打开流：第 52 行中没有此类文件或目录警告：include()：无法打开“tweets.php”以包含（include_path='.:'）第 52 行

我已经检查并仔细检查了该文件确实存在并且与该文件所在的文件位于同一目录中。

我真的很感谢你在这方面的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T19:56:39.223

该路径相对于发起请求的文件。因此，即使它与包含的文件位于同一文件夹中，如果该文件是从不同文件夹中的文件中包含的，您也必须使用绝对路径或相对于原始文件的路径。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-13T19:58:59.447

尝试使用`include('./tweets.php');`. 如果这不能解决您的问题，则很可能是文件权限。授予每个人对 tweets.php 的完全权限，看看是否可行。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-04-03T17:05:02.657

正如@Josh 所说，路径与接收请求的文件相关，因此您可以利用 PHP`__DIR__` [魔术常量](http://php.net/manual/en/language.constants.predefined.php)：

```
include(__DIR__ . '/tweets.php'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-06T23:00:30.953

1.  相同的消息，但我修复了它...清除 php 符号之前和之后的所有空格`<?php`和`?>`

2.  确保`{`并且`}`没有丢失以及它们需要在哪里

3.  确保此语法正确位于需要的位置，`{`并且`<?php } ?>` 不需要额外的路径...非常感谢

> 警告：include(tweets.php)：无法打开流：第 52 行中没有此类文件或目录警告：include()：无法打开“tweets.php”以包含（include_path='.:'）第 52 行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-06T23:34:12.260

1.）如果你有 2 个不同的变量是一个不同的场景，比如同名一个大写的变量和一个小写的变量......不同的解决方案你是对的，非常感谢

2.）但是如果有人可以将变量更改为完全不同的变量名称，他们可能不会遇到这个问题....并非总是如此

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-07-19T11:53:59.063

那是因为“区分大小写”而找不到您的文件名。示例“./Core/admin.php”和“./core/admin.php”是不同的。

# android - 在我的收件箱中显示消息

> ID：14861830
> 
> 赞同：1
> 
> 时间：2013-02-13T19:51:14.807
> 
> 标签：android, database, inbox

在 android 中显示收件箱消息时遇到问题。我在一项活动中使用了两个内容解析器。它会影响我的程序吗？这是我的代码：

```
ContentResolver contentResolver = getContentResolver();
        ContentResolver contentResolverSender = getContentResolver();

        Cursor cursorsender = contentResolverSender.query(
                Uri.parse("content://sms/sent"), null, "address = "
                        + senderAddress, null, null);

Cursor cursor = contentResolver.query(Uri.parse("content://sms/inbox"),
                null, "address = " + senderAddress, null, null);
        startManagingCursor(cursor);

        int indexBody = cursor.getColumnIndex(SmsReceiver.BODY);
        int indexAddr = cursor.getColumnIndex(SmsReceiver.ADDRESS);
        int dateCol = cursor.getColumnIndex(SmsReceiver.DATE);
        int i = 0, flag = 0;

        int indexSenderBody = cursorsender.getColumnIndex(SmsReceiver.BODY);

        String[] addressUniqueness = null;
        String name = null;

        if (indexBody < 0 || !cursor.moveToFirst())
            return;

        int j = 0;

        String msgSendStr = null;
        if (cursorsender.moveToFirst()) {
            for (i = 0; i < cursorsender.getCount(); i++) {

                msgSendStr = cursorsender.getString(
                        cursorsender.getColumnIndexOrThrow("body")).toString();

                msgSendStr = makeShortMstToText(msgSendStr);

                bodySendMsg[i] = msgSendStr;

                long dateInMilliSecSender = cursorsender.getLong(cursorsender
                        .getColumnIndexOrThrow(SmsReceiver.DATE));

                dateSendMsg[i] = dateInMilliSecSender;

                cursorsender.moveToNext();

            }
        }
        if (cursor.moveToFirst()) {

            do {

                String msgStr = cursor.getString(indexBody);
                long dateInMilliSec = cursor.getLong(cursor
                        .getColumnIndexOrThrow(SmsReceiver.DATE));

                msgStr = makeShortMstToText(msgStr);
                bodyRcvMsg[j] = msgStr;
                dateRcvMsg[j] = dateInMilliSec;

                j++;

            } while (cursor.moveToNext());
            // TODO Auto-generated catch block
        } 
```

每当我打开收件箱时，虽然我的收件箱中有消息，但无法显示收件箱消息。它显示开始对话。

# javascript - 如何使用 Tempo.js 做 JSON 模板？

> ID：14861834
> 
> 赞同：0
> 
> 时间：2013-02-13T19:51:22.637
> 
> 标签：javascript, json, templates, tempo

我正在尝试使用 Tempo.js 进行模板化，文档稀疏。请尝试在 SO 中进行，而不是在 jsFiddle 中进行。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>

            <script type="text/javascript" src="https://raw.github.com/twigkit/tempo/master/tempo.min.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

        <script type="text/javascript" charset="utf-8">

            var data = [
                    {'name':{'first':'Leonard','last':'Marx'},'nickname':'Chico','born':'March 21, 1887','actor': true,'solo_endeavours':[{'title':'Papa Romani'}]},
                    {'name':{'first':'Adolph','last':'Marx'},'nickname':'Harpo','born':'November 23, 1888','actor':true,'solo_endeavours':[{'title':'Too Many Kisses','rating':'favourite'},{'title':'Stage Door Canteen'}]},
                    {'name':{'first':'Julius Henry','last':'Marx'},'nickname':'Groucho','born': 'October 2, 1890','actor':true,'solo_endeavours':[{'title':'Copacabana'},{'title':'Mr. Music','rating':'favourite'},{'title':'Double Dynamite'}]},
                    {'name':{'first':'Milton','last':'Marx'},'nickname':'Gummo','born':'October 23, 1892'},
                    {'name':{'first':'Herbert','last':'Marx'},'nickname':'Zeppo','born':'February 25, 1901','actor':true,'solo_endeavours':[{'title':'A Kiss in the Dark'}]}
                ];

            Tempo.prepare('marx-brothers').render(data);

        </script>       

    </head>
    <body>

    <ol id="marx-brothers">
        <li data-template>{{nickname}} {{name.last}}</li>
    </ol>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:58:46.867

您试图在`Tempo.prepare`具有它引用的 ID 的 DOM 加载之前运行调用。

要么将脚本标签放在`</body>`结束标签之前，要么等到 DOM 准备好后再运行代码，使用某些东西`window.onload`或 jQuery 的`$(document).ready(...)`模式。

# algorithm - 数据挖掘：先验问题。最小支撑

> ID：14861837
> 
> 赞同：1
> 
> 时间：2013-02-13T19:51:30.157
> 
> 标签：algorithm, data-mining, apriori

我编写了数据挖掘先验算法，它在小型测试数据上运行良好，但在更大的数据集上运行它时遇到问题。

我正在尝试生成经常一起购买的物品的规则。

我的小测试数据是 5 笔交易和 10 种产品。

我的大测试数据是 1100 万笔交易和大约 2700 种产品。

问题：最小支持和过滤非频繁项。假设我们对频率为 60% 或更高的项目感兴趣。 `frequency = 0.60;`

当我`Min-support`以 60% 的频率计算一个小数据集时，算法将删除所有购买次数少于 3 次的商品。`Min-support = numberOfTransactions * frequency;`

但是当我尝试对大型数据集做同样的事情时，算法将在第一次迭代后过滤几乎所有项目集，只有几个项目能够满足这样的平面。

所以我开始把那架飞机越来越低，运行算法很多次。但甚至没有 5% 的人给出预期的结果。我必须将频率百分比降低到 0.0005 才能获得至少 50% 的第一次迭代中涉及的项目。

您如何看待目前的情况，因为它是人工生成的，因此可能是数据问题？（微软冒险作品版）或者是我的代码或最小支持计算问题？

也许您可以提供任何其他解决方案或更好的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:24:13.750

也许这就是您的数据的样子。

如果您有很多不同的项目，而每次交易的项目很少，那么项目同时发生的机会就很低。

您**是否验证**了结果，是否修剪错误，或者算法是否正确，以及您的参数是否错误？

你真的能说出一个 Apriori 修剪但不应该修剪的项集吗？

问题是，是的，选择参数很困难。不，先验不能使用自适应阈值，因为这不能满足单调性要求。您必须对所有项目集大小使用相同的阈值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T03:29:52.257

实际上，这完全取决于您的数据。对于一些真实的数据集，我必须将支持阈值设置为低于 0.0002 才能获得一些结果。对于其他一些数据集，我使用了 0.9。这真的取决于你的数据。

顺便说一句，Apriori 和 FPGrowth 存在变体，可以同时考虑多个最小支持，为不同的项目使用不同的阈值。例如，CFP-Growth 或 MIS-Apriori。还有一些专门用于挖掘稀有项集或稀有关联规则的算法。如果你对这个话题感兴趣，你可以查看我的软件，它提供了一些算法：[http ://www.philippe-fournier-viger.com/spmf/](http://www.philippe-fournier-viger.com/spmf/)

# python - 我的 Tornado 应用程序缺少什么来成功使用我自己的 OpenID 服务器

> ID：14861838
> 
> 赞同：4
> 
> 时间：2013-02-13T19:51:31.460
> 
> 标签：python, openid, tornado

我正在尝试使用 Tornado 框架构建一个网站，该框架使用 OpenID 对 OpenID 身份验证服务进行身份验证，该服务也是使用 Tornado 构建的。

我创建了一个基于 tornado.auth.OpenIdMixin 的子类，并将其用作我的 Tornado 应用程序中的身份验证处理程序：

```
class MyMixin(tornado.auth.OpenIdMixin):
    _OPENID_ENDPOINT = "http://myserver.com/openidserver"

    def authorize_redirect(self, oauth_scope, callback_uri=None, ax_attrs=["name", "email", "language", "username"]):
            callback_uri = callback_uri or self.request.uri
            args = self._openid_args(callback_uri, ax_attrs=ax_attrs)
            self.redirect(self._OPENID_ENDPOINT + "?" + urllib_parse.urlencode(args))

    def get_authenticated_user(self, callback):
            tornado.auth.OpenIdMixin.get_authenticated_user(self, callback) 
```

应用程序的处理程序类是

```
class AuthHandler(BaseHandler, MyMixin):
    @tornado.web.asynchronous
    def get(self):
            if self.get_argument("openid.mode", None):
                    self.get_authenticated_user(self.async_callback(self._on_auth))
                    return
            self.authenticate_redirect()

    def _on_auth(self, user):
            if not user:
                    self.send_error(500)
            self.set_secure_cookie("user", tornado.escape.json_encode(user), expires_days=0.01)
            self.redirect("/") 
```

此代码基于 GoogleMixin 类正在执行的操作以及我在[http://technobeans.wordpress.com/2012/09/04/tornado-third-party-authentication/上在线找到的示例](http://technobeans.wordpress.com/2012/09/04/tornado-third-party-authentication/)

对于 OpenID 服务器，我从[https://github.com/openid/python-openid](https://github.com/openid/python-openid)的 server.py 开始，但在遇到一些问题后，我也尝试了[https://github.com/mrjj/cito](https://github.com/mrjj/cito)。在两台服务器中，我都有一个可供我登录的帐户，但两次我在客户端都遇到了同样的问题。

我的目标是让我的客户看到我没有登录，将我重定向到 OpenID 服务器，我在那里进行身份验证，授予客户端使用 ID 对我进行身份验证的权限，然后被重定向到客户端以从那里继续前进。

但是对于两台服务器，我的客户端总是在 AuthHandler._on_auth() 中失败，因为用户参数是 None。

这是运行我的客户端的 Tornado 的输出：

```
ERROR:root:Exception after headers written  
Traceback (most recent call last):  
  File "/usr/lib/python2.7/dist-packages/tornado/web.py", line 897, in wrapper  
    return callback(*args, **kwargs)  
  File "website.py", line 67, in _on_auth  
    self.redirect("/")  
  File "/usr/lib/python2.7/dist-packages/tornado/web.py", line 412, in redirect  
    raise Exception("Cannot redirect after headers have been written")  
Exception: Cannot redirect after headers have been written 
```

添加一些调试`print`语句后，我知道我得到的 HTTP/500 错误是因为`user`变量为空。

我知道我不太了解 OpenID 应该如何工作，但我找不到 OpenID 应该如何工作的实际示例。有一些图表带有很多来回箭头，但没有更多的技术细节。

我看过的所有免费可用的服务器似乎都提供了相同的基本功能集。

*   我是否指向正确的 URL 以启动身份验证过程？
*   我是否在客户的 OpenID 处理过程中遗漏了一些步骤，并且它看起来太像 Google 使用他们的 OpenID+OAuth 协议所做的事情了？

# git - 裸存储库上的 Git 邮件映射

> ID：14861840
> 
> 赞同：4
> 
> 时间：2013-02-13T19:51:34.407
> 
> 标签：git, git-bare

我在我的 git 存储库中设置了一个 .mailmap 文件，所以现在正在运行

```
git log --format="%aE" 
```

在我的本地存储库中正确映射 .mailmap 文件中指定的所有电子邮件地址。但是在我推送到我的裸仓库并在服务器上运行相同的命令后，输出没有改变（.mailmap 文件被忽略）。我确定这是因为裸存储库没有工作树，因此 log 命令看不到 .mailmap 文件。有什么棘手的方法可以让它工作吗？

我能想到的笨拙方式是运行：

```
git show master:.mailmap 
```

然后应用某种查找和替换操作。这是最好的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:40:03.113

您在托管裸存储库的地方拥有哪个版本的 git？查看 git 源代码，您的案例应该已经由这个[commit](https://github.com/git/git/commit/8c473cecfd8835c2bdf34b323e1b2de620099c04)处理，包含在 v1.8.2 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-21T00:28:17.050

被`.mailmap`记录为只能从工作树的根级别读取，但裸存储库中的杂散文件也被意外读取，已在 Git 2.31（2021 年第一季度）中更正。

请参阅[Jeff King ( ) 的](https://github.com/peff)[提交 a38cb98](https://github.com/git/git/commit/a38cb9878ab686d3b7a19e46d8c3fff79cdccf4b)（2021 年 2 月 10 日[）](https://github.com/peff)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 9bdccbc](https://github.com/git/git/commit/9bdccbcda77df036edef5badda76418d0ae80997))^(中，2021 年 2 月 17 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## [`mailmap`](https://github.com/git/git/commit/a38cb9878ab686d3b7a19e46d8c3fff79cdccf4b)`.mailmap`：只在工作树中寻找
> 
> ^(签字人：杰夫·金)

> 尝试查找`.mailmap`文件时，我们将始终在当前目录中查找它。
> 这在具有工作树的存储库中是有意义的，因为我们总是在启动时进入顶级目录。
> 
> 但是对于一个裸存储库，它可能会令人困惑。
> 
> 使用像`--git-dir`（或`$GIT_DIR`在环境中）这样的选项，我们根本不需要`chdir`，我们会`.mailmap`在启动 Git 之前从您碰巧所在的任何目录中读取。
> 
> （请注意，`--git-dir`在历史上不指定工作树意味着当前目录是工作树的根目录，但现在大多数裸存储库都会`core.bare`设置，这意味着他们将意识到根本没有工作树）。
> 
> gitmailmap(5) 的文档说：
> 
> ```
> If the file `.mailmap` exists at the toplevel of the repository[...] 
> ```
> 
> 这同样强化了我们正在查看工作树的概念。
> 
> 当我们在裸存储库中时，此补丁可防止我们查找此类文件。
> 这确实打破了过去的工作：
> 
> ```
> cd bare.git
> git cat-file blob HEAD:.mailmap >.mailmap
> git shortlog 
> ```
> 
> 但这从未在文档中做广告。
> 而现在，我们`mailmap.blob`（默认为`HEAD:.mailmap`）以更清洁的方式做同样的事情。
> 
> 但是，还有一个更有趣的案例：我们可能根本没有存储库！^( ^([man](https://git-scm.com/docs/git-shortlog)) ^)命令可以在其标准输入上提供输出的情况下运行，它将应用邮件映射。在这种情况下，从当前目录 读取可能确实有意义。 此补丁将继续这样做。[`git-shortlog`](https://github.com/git/git/blob/a38cb9878ab686d3b7a19e46d8c3fff79cdccf4b/Documentation/git-shortlog.txt)`git-log`
> `.mailmap`
> 
> 这导致了一种更奇怪的情况：如果您运行`git-shortlog`以处理标准输入，则输入*可能*完全来自不同的存储库。
> 那么我们应该尊重in-tree`.mailmap`吗？大概是。无论输入的来源是什么，如果shortlog
> 在存储库中运行，文档声称我们会*从其*`.mailmap`顶层读取无论出于何种原因单独运行^（^([man](https://git-scm.com/docs/git-log))^(） 。)*[`git-log`](https://github.com/git/git/blob/a38cb9878ab686d3b7a19e46d8c3fff79cdccf4b/Documentation/git-log.txt)`git-shortlog`*
> 
>  *包含的测试涵盖了这些情况，我们现在明确记录“无回购”情况。
> 
> `.mailmap`我们还添加了一个测试，即使我们从工作树的子目录开始，也可以确认我们找到了顶级“ ”。
> 这在此提交之前和之后都有效，但我们从未明确测试过它（它有效，因为`chdir`如果有工作树，我们总是在工作树的顶层）。*

 *`git shortlog`现在在其[手册页](https://github.com/git/git/blob/a38cb9878ab686d3b7a19e46d8c3fff79cdccf4b/Documentation/git-shortlog.txt#L116-L119)中包含：

> 请注意，如果`git shortlog`在存储库之外运行（以处理标准输入上的日志内容），它将`.mailmap`在当前目录中查找文件。*

# python - 对章节编号进行排序，例如 1.2.1 或 1.4.2.4

> ID：14861843
> 
> 赞同：0
> 
> 时间：2013-02-13T19:51:42.120
> 
> 标签：python, google-app-engine, sorting

我有模型章节：

```
class Chapter(ndb.Model):
    tutKey = ndb.KeyProperty(kind='Tutorial')
    title = ndb.StringProperty(required=True)
    content = ndb.TextProperty(required=True)
    note = ndb.TextProperty()
    lvl = ndb.IntegerProperty(default=0)
    order = ndb.IntegerProperty(default=0)
    parentID = ndb.KeyProperty(kind='Chapter')
    number = ndb.IntegerProperty() 
```

'number' 是基本章节（chap1 或 chap 1.2 有 number = 1）。'lvl' 表示章节的深度，例如，在 chap1.1.1 中，lvl 为 3，在 chap1.1.1.1 中，lvl 为 4。'order' 表示章节的顺序，例如，在 chap1 .2 'order' 是 2，在 chap2.2 中，'order' 也是 2。

我如何对以下章节进行排序（例如）？

```
chapter 2
chapter 2.1
chapter 1.1.1
chapter 1.1
chapter 1 
```

我一直在想...我是否应该创建一个 StringProperty 来保存像“1.2.1”这样的章节编号，然后将字符串拆分为“。” ?

* * *

编辑：我创建了一个与 JBernardo 建议的 ListProperty 等效的 ndb.IntegerProperty(repeated=True)。我能够正确存储数据，但我无法按属性排序。任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:52:39.643

您可以通过具有子章节最大深度长度的元组来表示您的章节。未使用的子章节用零表示。然后以下将是您的章节的代表：

```
chapter 2      (2, 0, 0)
chapter 2.1    (2, 1, 0)
chapter 1.1.1  (1, 1, 1)
chapter 1.1    (1, 1, 0)
chapter 1      (1, 0, 0) 
```

如果将这些章节添加到列表中，则可以通过列表的方法`l`对该列表进行排序。`sort`

```
chapters = [(2, 0, 0), (2, 1, 0), (1, 1, 1), (1, 1, 0), (1, 0, 0)]
chapters.sort()
print chapters 
```

这给出了：

```
[(1, 0, 0), (1, 1, 0), (1, 1, 1), (2, 0, 0), (2, 1, 0)] 
```

**- - 编辑 - -**

在动态比较的情况下，您可以通过选项将函数添加到`sort`方法中。`key`此函数在排序之前应用于列表的每个元素。下面`expandChapter`将一章`ch`深入展开`depth`。中的`key`参数`sort`只接受一个参数。因此，计算最大深度`maxdepth`并通过匿名函数`expandChapters`给出。`sort``lambda`

```
def expandChapter(ch, depth):
    ch = ch + (0,) * (depth - len(ch))
    return ch

print expandChapter((1,), 3)                                # prints (1, 0, 0)

chapters = [(2,), (2, 1,), (1, 1, 1,), (1, 1), (1,)]
maxdepth = max([len(i) for i in chapters])
print maxdepth                                              # prints 3

chapters.sort(key = lambda x: expandChapter(x, maxdepth))
print chapters 
```

这给出了正确的答案：

```
[(1,), (1, 1), (1, 1, 1), (2,), (2, 1)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:45:52.683

我想到的第一件事是设置你的路线来处理章节，这样就有了：

```
1/1
1/2/1 
```

ETC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:14:29.310

找到了一种更简单的方法来解决我的问题。我以不同的方式存储章节。在`ndb.IntegerProperty(repeated=True)`. 这样我就可以对它进行排序了：

```
newChaps = sorted(chaps, key=lambda obj: obj.version) 
```

其中“版本”是 ndb.IntegerProperty。

完毕。

# android - 如何获取可扩展 ListView 的父位置

> ID：14861845
> 
> 赞同：0
> 
> 时间：2013-02-13T19:51:58.140
> 
> 标签：android, position, expandablelistview

我有一个里面有一个可扩展列表视图的活动，我的目标是根据两个因素打开不同的活动：用户点击了哪个父视图和子视图。

我想知道如何获得（父母和孩子）的位置。

这是我正在尝试做的示例：

```
public boolean onChildClick(ExpandableListView parent, View v,
                            int groupPosition, int childPosition, long id) {
    String name=((TextView) v.findViewById(R.id.TVC1)).getText().toString();      
    Intent h = new Intent(getApplicationContext(), History.class);
    Intent f = new Intent(getApplicationContext(), Fighters.class);
    if(nombre.equals("History")){
        startActivity(h);
    }
    if(nombre.equals("Fighters")){
        if(flist.getSelectedItemPosition()==0){//code that i want
            f.putExtra("id", "alliance");
            startActivity(f);
        }
        if(flist.getSelectedItemPosition()==1){//code that i want
            f.putExtra("id", "atos");
            startActivity(f);
        }
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:53:29.990

您已经将要求的内容作为参数传递。

```
int groupPosition, int childPosition 
```

# php - 尝试在 php 中使用会话计算重新加载并在 N 次重新加载后重置

> ID：14861850
> 
> 赞同：1
> 
> 时间：2013-02-13T19:52:18.967
> 
> 标签：php, session

我发现了一些奇怪的错误，试图制作一个脚本来计算会话的重新加载。

我的脚本应该计算一个人重新加载页面的次数，当计数为 5 时，计数应返回到 1。这是代码：

```
$_SESSION['counter']++ ;    

if ($_SESSION['counter'] >= 5 || $_SESSION['counter'] == 0){
$_SESSION['counter'] = 1;

  }
    echo $_SESSION['counter']; 
```

这在我拥有的托管帐户中运行良好，但在 wamp 和另一个 linux 托管中存在奇怪的错误。这两个错误是：

*   每次重新加载都会在计数器上加两个，而不仅仅是一个。例如，它是 1，当你重新加载它时显示 3。
*   有时它会回显数字 5，但这应该是不可能的，因为它有一个 if 表示如果它的 5 或更多，那么计数器应该返回 1。

我尝试使用 session_destroy()，对特定变量值使用引号，但没有成功，我不知道为什么。有人知道我怎么能做到这一点完全没有错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:55:04.663

您是否有`RewriteRule`任何可能将所有请求重定向到主文件或前端控制器的东西？

因为如果是这样，请记住所有浏览器都会向`/favicon.ico`. 默认情况下，您的共享虚拟主机可能会将其重定向（如果您不存在该文件）到默认的。但它可能会在您的本地安装中命中您的脚本。

# java - 没有 arg 时使用“if”语句

> ID：14861852
> 
> 赞同：4
> 
> 时间：2013-02-13T19:52:25.273
> 
> 标签：java

我应该给程序两个参数：一个是当前速度，以 mph 为单位，另一个是速度限制，以 kph 为单位。我的程序必须使用转换器文件将您的当前速度更改为 kph，以便与速度限制进行比较，然后通过仪表板显示警告用户他们正在超速。但如果只给出一个 arg，程序必须使用 40kph 作为默认速度限制。我的问题在于不知道如何为缺少 args 编写 IF 语句。帮助！？！

```
public class DetailedSpeedSetter 
```

{

```
public static void main(String args[])
{
        double kph;
        double mph;
        double SpeedLimit;

        mph = Text.toNonnegativeDouble(args [0]);

        kph = Converter.toKPH(mph);

        SpeedLimit = Text.toNonnegativeDouble(args[1]); 

 /**
 * Determines whether the given speed exceeds the given limit
 *
 * @param speed      The speed in km/hr
 * @param limit      The speed limit in km/hr
 * @return           true if speed exceeds limit and false otherwise
 */
public static boolean isSpeeding(double speed, double limit)
{
    speed = kph;
    limit = SpeedLimit;

    if (speed > limit); 

    return true;

   if (speed <= limit);

    return false;

        }

        Dashboard.setSpeed(kph);
        Dashboard.setSpeeding();

        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T19:53:58.657

只需使用：

```
SpeedLimit limit;
if (args.length < SOME_NUMBER) {
    limit = 40;
} 
```

*这是可能的，因为 args 只是一个字符串数组 - 您可以在任何 Array 对象上使用 .length 属性。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T20:03:08.487

这应该可以工作。只需将 SpeedLimit 默认设置为 40，如果通过了 2 个参数，则更新为正确的速度限制。

```
 double SpeedLimit = 40;
    double mph = Text.toNonnegativeDouble(args[0]);
    double kph = Converter.toKPH(mph);

    if (args.length == 2)
    {
       // You have two args
       SpeedLimit = Text.toNonnegativeDouble(args[1]);
    } 
```

这是一个更完整的示例，说明如何进行设置。

```
public class DetailedSpeedSetter
{
    public static void main(String args[])
    {
        double mph = Text.toNonnegativeDouble(args [0]);
        double kph = Converter.toKPH(mph);;
        double SpeedLimit = 40;

        if (args.length == 2)
        {
            SpeedLimit = Text.toNonnegativeDouble(args[1]); 
        }

        Dashboard.setSpeed(speed);

        if (isSpeeding(kph, SpeedLimit))
        {
            Dashboard.setSpeeding(true);
        }
        else
        {
            Dashboard.setSpeeding(false);
        }
    }

     /**
     * Determines whether the given speed exceeds the given limit
     *
     * @param speed      The speed in km/hr
     * @param limit      The speed limit in km/hr
     * @return           true if speed exceeds limit and false otherwise
     */
    public static Boolean isSpeeding(double speed, double limit)
    {
        if (speed > limit)
        {
            return true;
        }

        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T19:57:44.313

与您的问题有关。当心你的代码有一个严重的缺陷：你不应该像这样使用`;`after `if`：

```
if (speed > limit); 
    return true; 
```

由于没有大括号，它将运行空语句，并且每次都会返回 true，即使`speed <= limit`. `;`从你的 ifs中删除：

```
if (speed > limit)
    return true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T20:26:25.403

一个简单的 1 行选项是三级运算符：

```
limit = args.length == 2 ? args[1] : 40; 
```

# facebook - 更新我的高分没有显示在我的时间线上

> ID：14861859
> 
> 赞同：0
> 
> 时间：2013-02-13T19:52:45.000
> 
> 标签：facebook, facebook-graph-api

我使用 Graph API Explorer 为我的测试应用 ( [https://graph.facebook.com/MY_USER_ID/Scores](https://graph.facebook.com/MY_USER_ID/Scores) ) 发布分数。然而，新的高分并没有出现在我的时间线上，尽管[文件](https://developers.facebook.com/docs/howtos/scores/)表明它应该出现。我错过了一步吗？

# authentication - 网站上的 SSL 身份验证

> ID：14861860
> 
> 赞同：0
> 
> 时间：2013-02-13T19:52:52.787
> 
> 标签：authentication, iis, ssl, certificate, client-certificates

我需要在网站上进行诸如 ssl 证书认证之类的事情。据我了解我的任务，我需要获取用户的 ssl 证书并将其发送到服务器，这将决定用户是否可以通过身份验证。如何通过 javascript 获取用户的 SSL 并将其发送到服务器？有可能吗？或者也许我的方法是错误的，或者我没有正确理解我的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T19:19:51.090

也许我的解决方案对某人有用。在 IIS 服务器配置中，我们需要选中需要用户证书复选框。当打开站点时，用户将被要求提供证书形式的个人证书存储。如果可以从服务器上的请求对象 (c#) 访问公共证书。从中我们可以获取用户的详细信息并允许或拒绝登录

# database - 包含用户和图像的数据库

> ID：14861861
> 
> 赞同：0
> 
> 时间：2013-02-13T19:52:57.760
> 
> 标签：database, image

如何用用户和图像形成数据库，并知道每个用户哪些图像属于他。例如，如果我在数据库用户中有（id=1 name=Peter）和另一个用户（id=2 name=Alex）等等？如何通过FK和PK知道哪些图像属于他，如何形成这个数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:56:05.683

我建议使用 VARCHAR 数据类型而不是任何 BLOB 或其他二进制数据类型将图像的位置存储在数据库中。因此您可以为 ImageUrl 或路径使用列，而无需使用不同的表。

存储数据库位置大大减少了数据库的大小，并且更新或替换图像要简单得多，因为它只是一个文件操作，而不是数据库中的大量更新/插入/删除。

注意：在将图像保存到实际文件夹之前，不要忘记重命名它因为上传的图像可以具有相同的名称，请尝试使用 GUID，因为它提供了唯一的值。

[http://blog.sqlauthority.com/2007/12/13/sql-server-do-not-store-images-in-database-store-location-of-images-url/](http://blog.sqlauthority.com/2007/12/13/sql-server-do-not-store-images-in-database-store-location-of-images-url/)

# scala - 您如何在没有开销的情况下丰富价值类别？

> ID：14861862
> 
> 赞同：13
> 
> 时间：2013-02-13T19:52:57.913
> 
> 标签：scala, enrich-my-library, value-class

Scala 2.10 引入了值类，您可以通过使类扩展来指定它们`AnyVal`。值类有很多限制，但它们的巨大优势之一是它们允许扩展方法而不会产生创建新类的惩罚：除非需要装箱，例如将值类放入数组中，否则它只是旧类加上一组将类作为第一个参数的方法。因此，

```
implicit class Foo(val i: Int) extends AnyVal {
  def +*(j: Int) = i + j*j
} 
```

展开到不会比自己编写更昂贵的`i + j*j`东西（一旦 JVM 内联方法调用）。

不幸的是，[SIP-15](http://docs.scala-lang.org/sips/pending/value-classes.html)中描述值类的限制之一是

> 3.  C 的基础类型可能不是值类。

如果你有一个值类，你可以得到你的手，比如说，作为一种提供类型安全单元的方法，而不需要装箱的开销（除非你真的需要它）：

```
class Meter(val meters: Double) extends AnyVal {
  def centimeters = meters*100.0                // No longer type-safe
  def +(m: Meter) = new Meter(meters+m.meters)  // Only works with Meter!
} 
```

那么有没有办法在`Meter`没有对象创建开销的情况下丰富呢？SIP-15 中的限制阻止了明显的

```
implicit class RichMeter(m: Meter) extends AnyVal { ... } 
```

方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-13T20:00:15.913

为了扩展值类，您需要重新捕获底层类型。由于值类需要具有可访问的包装类型（`val i`不仅仅是`i`上面），您总是可以这样做。您不能使用方便的`implicit class`快捷方式，但您仍然可以直接添加隐式转换。所以，如果你想添加一个`-`方法，`Meter`你必须做类似的事情

```
class RichMeter(val meters: Double) extends AnyVal {
  def -(m: Meter) = new Meter(meters - m.meters)
}
implicit def EnrichMeters(m: Meter) = new RichMeter(m.meters) 
```

另请注意，您可以（自由地）使用原始值类重新包装任何参数，因此如果它具有您依赖的功能（例如，它包装 a`Long`但执行复杂的位混合），您可以只重新包装底层类中的你试图在任何你需要的地方扩展价值类。

（另请注意，除非您，否则您会收到警告`import language.implicitConversions`。）

附录：在 Scala 2.11+ 中，您可以将其设为`val`私有；对于已完成此操作的情况，您将无法使用此技巧。

# angularjs - 如何正确地将模块注入 Angularjs Mock？

> ID：14861864
> 
> 赞同：0
> 
> 时间：2013-02-13T19:53:04.163
> 
> 标签：angularjs, jasmine

该应用程序与我的模块一起正常工作。但是构建以下模拟返回：

```
$global_vars is not defined 
```

我想我没有正确注入模块。我在这里想念什么？

```
describe('CalendarController', function() {
  beforeEach(module("$global_vars"));
  beforeEach(inject(function($rootScope, $controller, $location, $injector, $global_vars) {
    var $httpBackend;
    $httpBackend = $injector.get('$httpBackend');
    return this.controller = $controller(CalendarController, {
      $scope: this.scope,
      $location: $location,
      $global_vars: $global_vars
    });
  }));
  return it("can be instantiated", function() {
    return expect($global_vars).not.toBeNull();
  });
}); 
```

*注意：这是对 vanilla js 的咖啡脚本翻译*

**更新**

好的，这样做我得到另一个可能*更好*的错误？

```
Error: Unknown provider: $httpProvider <- $http <- $global_vars 
```

.

```
describe 'CalendarController', ->

  beforeEach module("$global_vars")
  beforeEach module("GlobalService")
  beforeEach inject ($rootScope, $controller, $location, $injector) ->
    $injector = angular.injector [ '$global_vars' ]
    $global_vars = $injector.get('$global_vars')

    $global_vars = $injector.get('$global_vars')
    @controller = $controller CalendarController, {$scope: @scope, $location: $location} 
```

**我的backbone.js 的骨架**

```
angular.module("VarsService", []).factory "$global_vars", ["$http", '$location', ($http, $location) ->  
  global_vars.get_calendar = ->
     console.log 'blam!' 
```

# javascript - 如何使用 Selenium 打开带有哈希的 URL？

> ID：14861877
> 
> 赞同：12
> 
> 时间：2013-02-13T19:53:49.893
> 
> 标签：javascript, backbone.js, selenium, hashchange

我正在尝试使用 Selenium IDE 测试我的 Backbone.js Web 应用程序。

Selenium 可以打开我的测试用例的初始 URL，只要它在一个新的浏览器窗口中——例如`open /#/login`——但是每当它试图打开后续 URL 时它就会超时。

似乎 Selenium 正在侦听一个仅在 URL 哈希更改时未触发的事件。

我想这会发生在你使用 hashchange + Selenium 的任何时候......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-18T21:15:33.407

在 Selenium IDE 中，只需使用“storeEval”命令，例如：

```
Command = storeEval
Target = window.location.hash='/search/events/birthdays/1' 
```

**storeEval**运行分配给“目标”的 javascript 片段。然后你可以做的是有一个测试用例使用 open(url) 命令打开起始页，其余的用例使用 storeEval 命令更改哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-12T17:50:03.570

在开发者工具的控制台上运行它 -> `window.location.hash='#abcde'`。它应该在浏览器选项卡中为您更改哈希值。

通过 Selenium Webdriver 和 Java 执行 javascript：

```
((JavascriptExecutor) driver).executeScript("window.location.hash='#abcde'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T17:56:47.327

一个简短的更新：我们放弃了尝试使用 Selenium IDE 编写我们的集成测试，而是使用 Selenium WebDriver 的[Selenium Python 绑定](https://selenium-python.readthedocs.org/en/latest/index.html)。

使用这种方法，我们可以导航到一个 URL，然后使用它`WebDriverWait`来检测 DOM 中的特定变化，例如

```
driver = webdriver.Firefox()
driver.get("/#/login")
WebDriverWait(driver, 10).until(
    lambda driver: driver.find_element_by_css_selector("form.login").is_displayed()) 
```

# c++ - 以非 root 用户身份以编程方式删除 Linux 缓存

> ID：14861880
> 
> 赞同：5
> 
> 时间：2013-02-13T19:54:07.797
> 
> 标签：c++, linux, permissions, embedded-linux, procfs

出于测试目的，我可以通过写入 Linux 中 procfs 下的 drop_caches 文件来删除缓存内存。我只能以 root 身份执行此操作。这是在嵌入式 Linux 上，所以没有 sudo。

```
sync; echo 3 > /proc/sys/vm/drop_caches 
```

我可以通过从帖子中执行某些操作在 C++ 中以编程方式写入文件 -->[如何在 Linux 系统上以编程方式清除 C++ 中的文件系统内存缓存？](https://stackoverflow.com/questions/6818606/how-to-programmatically-clear-the-filesystem-memory-cache-in-c-on-a-linux-syst/6818653#6818653)

```
sync();
std::ofstream ofs("/proc/sys/vm/drop_caches");
ofs << "3" << std::endl; 
```

挑战是希望在以非 root 用户身份运行应用程序时执行此操作。重新启动时，权限如下所示：

```
# cd /proc/sys/vm/
# ls -lrt drop_caches 
-rw-r--r--    1 root     root             0 Feb 13 19:50 drop_caches 
```

而且您似乎无法更改这些权限 - 即使以 root 身份：

```
# chmod 777 drop_caches 
chmod: drop_caches: Operation not permitted
# chown user:user drop_caches 
chown: drop_caches: Operation not permitted 
```

我怎样才能在 Linux 上做到这一点？是否可以更改 procfs 文件的权限？如有必要，我可以完全定制我的内核。谢谢 -

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:03:25.917

您可以创建一个辅助可执行文件（非常小心，这很危险），任何用户都可以使用 root 权限运行它。

这称为[setuid](http://en.wikipedia.org/wiki/Setuid)。

出于安全原因，您不能`setuid`使用 shell 脚本。

从wiki中提取如何使用它：

> setuid 和 setgid 位通常使用命令 chmod 通过将高位八进制数字设置为 4（对于 setuid）或 2（对于 setgid）来设置。"chmod 6711 file" 将设置 setuid 和 setgid 位 (2+4=6)

## 更新

正如@rici 指出的那样，您仍然需要具有执行权限才能执行此过程，因此您可以删除执行权限`others`并将其仅保留在`group`. 因此，只有该组的成员才能执行它。

# mvvm - 尝试编辑时 WPF DataGrid 上动态列的两种方式绑定异常

> ID：14861882
> 
> 赞同：0
> 
> 时间：2013-02-13T19:54:17.843
> 
> 标签：mvvm, datagridview, datagridtemplatecolumn, wpf-4.0

您好我有以下代码来生成动态列。

```
 <DataGrid AutoGenerateColumns="False" DockPanel.Dock="Top" ItemsSource="{Binding StudentList}">
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding StudentName}"  
                                Header="Name"/>
            <DataGridTemplateColumn Width="*">
                <DataGridTemplateColumn.HeaderStyle>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="HorizontalContentAlignment" 
                                Value="Stretch" />
                        <Setter Property="VerticalContentAlignment"  Value="Stretch" />
                        <Setter Property="Margin" Value="0" />
                        <Setter Property="ContentTemplate">
                            <Setter.Value>
                                <DataTemplate>
                                    <ItemsControl  ItemsSource="{Binding DataContext.TitleList, ElementName=LayoutRoot}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Horizontal">
                                                </StackPanel>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border  Width="70" >
                                                    <TextBlock Text="{Binding}" TextAlignment="Center"/>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </DataTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </DataGridTemplateColumn.HeaderStyle>
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <ItemsControl ItemsSource="{Binding ProjectScores}">
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <StackPanel Orientation="Horizontal"/>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Width="70">
                                        <TextBlock Text="{Binding}" TextAlignment="Center"/>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
                <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBox Text="{Binding}" BorderThickness="0"/>
                            </StackPanel>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
            </DataGridTemplateColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

但是当我尝试编辑一个值时，它会抛出“双向绑定需要路径或 XPath”我该如何解决这个问题？因为我的单元格值是根据将动态更改的“TitleList”动态加载的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-19T16:09:48.637

我刚刚遇到了同样的问题，并通过使用 DataType="models:Account" 解决了

```
<DataTemplate DataType="models:Account" >
    <StackPanel Orientation="Horizontal">
        <TextBox Text="{Binding}" BorderThickness="0"/>
    </StackPanel>
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T02:17:14.433

将您的更改`CellEditingTemplate`为以下

```
<DataGridTemplateColumn.CellEditingTemplate>
    <DataTemplate>
        <ItemsControl ItemsSource="{Binding Path=ProjectScores}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Border Width="70">
                        <TextBox Text="{Binding Path=.}" TextAlignment="Center"/>
                    </Border>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </DataTemplate>
</DataGridTemplateColumn.CellEditingTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T20:09:49.820

我通过将 ProjectScores 的通用集合更改为 CustomType 的集合来解决此问题。

前：

```
public List<string> ProjectScores{get;set;} 
```

修复是：

```
public List<StudentScore> ProjectScores{get;set;}
public class StudentScore
{
public ScoreValue{get;set;}
} 
```

在用户界面中：

```
<DataGridTemplateColumn.CellEditingTemplate>
<DataTemplate>
    <ItemsControl ItemsSource="{Binding Path=ProjectScores}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <StackPanel Orientation="Horizontal"/>
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Border Width="70">
                    <TextBox Text="{Binding Path=ScoreValue}" TextAlignment="Center"/>
                </Border>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</DataTemplate> 
```

这解决了我的问题。

# spring - JPA 2.0 + 弹簧 3.1 + Weblogic 10.3.5

> ID：14861883
> 
> 赞同：0
> 
> 时间：2013-02-13T19:54:23.267
> 
> 标签：spring, jpa, weblogic

我需要在 weblogic 容器中创建一个网站，但我不知道如何使用 spring 将 jpa 2.0 连接到 jndi weblogic 连接和管理。

现在我有一个项目但有错误，在这种情况下我的文件设置是：

```
 <?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="unitPU" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>jdbc/fact</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
      <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>
    </properties>
  </persistence-unit>
</persistence> 
```

错误是：

```
weblogic.deployment.EnvironmentException: Error processing persistence unit unitPU of module web: Error instantiating the Persistence Provider class org.eclipse.persistence.jpa.PersistenceProvider of the PersistenceUnit factory-web-copyPU: java.lang.ClassNotFoundException: org.eclipse.persistence.jpa.PersistenceProvider 
```

任何样本或任何想法来帮助我解决这个错误 o 创建一个项目 jpa + spring + weblogic 我会很高兴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:45:36.723

你还没有类：`org.eclipse.persistence.jpa.PersistenceProvider`在你的类路径中。这就是导致异常的原因。因此，将`.jar`包含此类的文件添加到您的类路径中，或者如果您使用的是 Maven，请添加此依赖项：

```
<dependency>
   <groupId>org.eclipse.persistence</groupId>
   <artifactId>{artifact}</artifactId>
   <version>{version}</version>
   <scope>compile</scope>
</dependency> 
```

并指定适当的`artifactId`.

**看：**

*   [EclipseLink/Maven](http://wiki.eclipse.org/EclipseLink/Maven)

# python - 用 Python 处理 HTML 表单数据？

> ID：14861884
> 
> 赞同：7
> 
> 时间：2013-02-13T19:54:28.873
> 
> 标签：python, html, forms

我正在尝试同时使用 Python 和 HTML。我要做的是创建一个 HTML 表单，它将数据提交到 python 文件，然后该 python 文件将处理数据。但我没有让它工作。

这是我的python代码：

```
form = cgi.FieldStorage() # instantiate only once!

name = form['Sample Name'].value 
```

这是我的 HTML 代码：

```
<form method='POST' action='/functionGen.py'> 
Name: <input type='text' name='Sample Name'> 
<input type='submit' value='Begin Storing'> 
</form> 
```

最终发生的是我只是在浏览器中看到我的 python 代码，文件没有开始处理数据。

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:48:52.447

您应该知道，您现在正在通过 http 协议获取普通的 python 源文档。如果你想使用[CGI](http://en.wikipedia.org/wiki/Common_Gateway_Interface)机制，你应该把你的 .py 放在 cgi-enabled 目录中。这意味着您需要http服务器。

## 相关问题

*   [如何运行 Python CGI 脚本](https://stackoverflow.com/questions/7929848/how-to-run-python-cgi-script)
*   [如何设置 Python CGI 服务器？](https://stackoverflow.com/questions/8156898/how-do-i-set-up-a-python-cgi-server)

# fullscreen - 在 Android 4.0 中使活动全屏

> ID：14861885
> 
> 赞同：0
> 
> 时间：2013-02-13T19:54:33.263
> 
> 标签：fullscreen, android-4.0-ice-cream-sandwich

我在很多网站上都找过。我想让我的活动在 Android 4.0 中全屏显示（全屏甚至虚拟按钮和栏）。即使在 Stack Overflow 中也有很多解决方案。他们中的许多人都在工作时打勾。但是，当我尝试这些解决方案时，它们不起作用！我找不到我在哪里犯了错误。我给出了一个示例代码，作为我的问题的答案（正如他们所说的那样工作）：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Window;
import android.view.WindowManager;

public class ActivityName extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // remove title
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setContentView(R.layout.main);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T00:59:52.513

这还不够：

```
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

为了完成你想要完成的事情，添加这个：

```
this.getWindow().getDecorView()
        .setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

我知道这是一个相当老的问题（有一堆重复），但这是通过谷歌找到的，所以我想我仍然会发布这个解决方案。

# jquery - jquery Flot 找出系列是否已被点击

> ID：14861889
> 
> 赞同：2
> 
> 时间：2013-02-13T19:54:40.190
> 
> 标签：jquery, flot

假设我有以下数据（在这个例子中显然有一些抽象的日期）使用 flot 绘制：[[6:40 AM, 0.5],[6:50 AM, 0.5]]

上午 6:40 - 最左边的情节 上午 6:45 - 中间的情节 上午 6:50 - 最右边的情节

图片： ![在此处输入图像描述](../Images/66cb53854fcc2dd6cdb387c3c72f523b.png)

我希望能够收听“plotclick”事件并能够确定该系列是否在两个数据点之间被点击（即上午 6 点 45 分）。

我知道我可以做到：

elem.bind("plotclick", function(event, pos, item) { }

但我不知道如何确定我是否点击了插值的实际点（请参见上图中的中间图）。

任何人都知道我如何确定我是否点击了系列中的插值点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T08:22:28.907

我相信当您制作绑定功能时，您可以使用

```
item.datapoint[0] 
```

找到您单击的 x 位置。您可以使用它与图表上的其他 x 坐标进行比较。我不相信它会给你一个约会。它只会为您提供点击的 x 位置，在您的情况下，这实际上可以使比较更简单。

# python - RuntimeWarning：在除法中遇到无效值

> ID：14861891
> 
> 赞同：129
> 
> 时间：2013-02-13T19:54:53.603
> 
> 标签：python, python-2.7, matplotlib

我必须使用欧拉方法为“弹簧中的球”模型制作一个程序

```
from pylab import*
from math import*
m=0.1
Lo=1
tt=30
k=200
t=20
g=9.81
dt=0.01
n=int((ceil(t/dt)))
km=k/m
r0=[-5,5*sqrt(3)]
v0=[-5,5*sqrt(3)]
a=zeros((n,2))
r=zeros((n,2))
v=zeros((n,2))
t=zeros((n,2))
r[1,:]=r0
v[1,:]=v0
for i in range(n-1):
    rr=dot(r[i,:],r[i,:])**0.5
    a=-g+km*cos(tt)*(rr-L0)*r[i,:]/rr
    v[i+1,:]=v[i,:]+a*dt
    r[i+1,:]=r[i,:]+v[i+1,:]*dt
    t[i+1]=t[i]+dt

    #print norm(r[i,:])

plot(r[:,0],r[:,1])
xlim(-100,100)
ylim(-100,100)
xlabel('x [m]')
ylabel('y [m]')

show() 
```

我不断收到此错误：

```
a=-g+km*cos(tt)*(rr-L0)*r[i,:]/rr
RuntimeWarning: invalid value encountered in divide 
```

看不懂，代码有什么问题？

* * *

## 回答 #1

> 赞同：207
> 
> 时间：2014-04-16T18:05:59.633

我认为您的代码试图“除以零”或“除以 NaN”。如果您意识到这一点并且不希望它打扰您，那么您可以尝试：

```
import numpy as np
np.seterr(divide='ignore', invalid='ignore') 
```

有关更多详细信息，请参阅：

*   [http://docs.scipy.org/doc/numpy/reference/generated/numpy.seterr.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.seterr.html)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-07-15T20:02:12.567

Python 索引从 0（而不是 1）开始，因此您的赋值“r[1,:] = r0”定义了 r 的**第二个**（即索引 1）元素，并将第一个（索引 0）元素保留为一对零。for 循环中 i 的第一个值为 0，因此 rr 获取 r 中第一个条目与自身的点积的平方根（即 0），并且在后续行中除以 rr 会引发错误。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2019-01-25T11:06:20.897

为了防止被零除，您可以在发生 div0 错误的地方预先初始化输出“out”，例如`np.where`，不会剪切它，因为无论条件如何都会评估完整的行。

预初始化示例：

```
a = np.arange(10).reshape(2,5)
a[1,3] = 0
print(a)    #[[0 1 2 3 4], [5 6 7 0 9]]
a[0]/a[1]   # errors at 3/0
out = np.ones( (5) )  #preinit
np.divide(a[0],a[1], out=out, where=a[1]!=0) #only divide nonzeros else 1 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-14T00:30:51.387

您正在除以`rr`可能是 0.0。检查是否`rr`为零并做一些合理的事情，而不是在分母中使用它。

# java - slf4j 中是否有类似于 org.apache.log4j.EnhancedPatternLayout 的类？

> ID：14861892
> 
> 赞同：0
> 
> 时间：2013-02-13T19:54:57.507
> 
> 标签：java, log4j, slf4j

我想限制 SLF4J 日志框架中异常堆栈跟踪的长度。

SLF4j 中是否有类似于`EnhancedPatternLayout`log4j 中的类？

如果不是怎么实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:00:33.343

SLF4J 只是一个 API，你需要所谓的绑定。[logback](/questions/tagged/logback "显示标记为“logback”的问题")就是其中之一，它支持通过指令[缩短堆栈跟踪。](http://logback.qos.ch/manual/layouts.html#ex)`%ex{short}`

# regex - 使用 preg_replace 链接 DOI

> ID：14861893
> 
> 赞同：2
> 
> 时间：2013-02-13T19:54:59.690
> 
> 标签：regex, preg-replace, doi

我正在循环浏览一些带有嵌入式文献参考的文本。其中一些是 DOI 号，我需要将它们链接起来。

示例文本：

```
<div>Interesting article here:  doi:10.1203/00006450-199305000-00005</div> 
```

到目前为止我已经尝试过：

```
$html = preg_replace("\b(10[.][0-9]{4,}(?:[.][0-9]+)*/(?:(?![\"&\'<>])[[:graph:]])+)\b", "<a href='https://doi.org/\\0' target='_new'>doi:\\0</a>",$html); 
```

这将返回一个空字符串。

我期待着：

```
<div>Interesting article here:  <a href='https://doi.org/10.1203/00006450-199305000-00005' target='_new'>doi:10.1203/00006450-199305000-00005</a></div> 
```

我哪里错了？

**编辑 2018-01-30**：根据 Katrin 在下面的回答更新了 DOI 解析器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-30T14:47:58.503

[CrossRef 有一个建议](https://www.crossref.org/blog/dois-and-matching-regular-expressions/)，他们成功地测试了 99.3% 的 DOI：

```
/^10.\d{4,9}/[-._;()/:A-Z0-9]+$/i 
```

此外，[新推荐的解析器位于`https://doi.org/`](https://www.doi.org/doi_handbook/3_Resolution.html#3.8).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:27:35.037

使用[正则表达式测试工具](http://www.solmetra.com/scripts/regex/)，我找到了一个适用于我的示例文本的[表达式](https://stackoverflow.com/a/10300246/721073)：

```
$pattern        = '(10[.][0-9]{4,}[^\s"/<>]*/[^\s"<>]+)';
$replacement    = "<a href='http://dx.doi.org/$0' target='1'>doi:$0</a>";
$html = preg_replace($pattern, $replacement, $html); 
```

hth

# java - urlrewritefilter 不重定向

> ID：14861895
> 
> 赞同：1
> 
> 时间：2013-02-13T19:55:06.073
> 
> 标签：java, url-rewriting, xml-parsing, tuckey-urlrewrite-filter

我正在尝试使用 urlrewritefilter 实现看起来非常简单的重定向，如下所示，但它不是重定向。

```
<rule> 
<from>/?industry_id=22</from> 
<to type="permanent-redirect">/industry/22/publishing</to> 
</rule> 
```

其他规则工作得很好。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-08T11:45:22.220

我认为问题在于您的“发件人”被解释为正则表达式。尝试转义特殊字符，例如：

```
<rule>
  <from>/\?industry_id\=22</from>
  <to type="permanent-redirect">/industry/22/publishing</to>
</rule> 
```

让我们知道它是否有效！:)

# drupal - 如何在 drupal 6 中卸载覆盖的系统模块

> ID：14861896
> 
> 赞同：0
> 
> 时间：2013-02-13T19:55:24.857
> 
> 标签：drupal, drupal-6

我不小心将drupal 更新（6.26）安装**到sites/all/modules**中（**是**的，我把整个drupal 根目录放在那里，所以我有`sites/all/modules/modules`，`sites/all/modules/sites/all/modules`等等）。

然后，在不知不觉中运行了 update.php，一切正常，因为 Drupal 智能地将新的核心模块注册`sites/all/modules/modules/*`为核心模块。

这工作正常，直到下一次更新。我将核心drupal文件放入根目录，核心被正确替换为6.27。但是在`sites/all/modules`上次更新的 6.26 文件中，drupal 接受`sites/all/modules`了**覆盖**核心文件的旧`/modules`文件。

所以 drupal 现在抱怨它仍然是 6.26，即使真正的核心是 6.27 - 这些文件实际上从未被调用，因为被`/sites/all/modules/modules/*`.

所以：我设法从那里删除了所有不需要的模块，并且出现了一些错误，我让它再次工作。最好的方法是：更改`sites/all/modules/modules/<module>/<module>.info`文件并将版本号从 6.27 调整为旧版本，例如 6.25。**然后**运行 ​​update.php - 所以 Drupal 识别出站点/所有/模块中的版本比核心版本中的旧版本。现在删除目录并再次运行 update.php。现在这个模块的一切都是干净的。

但这不适用于**系统**模块。每次我尝试删除`sites/all/modules/modules/system/`目录时，update.php URL 都不再可调用（HTTP 错误 500）。

任何提示如何从意外覆盖的系统模块中恢复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:04:53.487

我终于找到了答案（感谢 Max），并希望分享它以防其他人遇到同样的问题。

如果您不小心将 drupal 更新安装到子目录（如`/sites/all/modules`. 运行 update.php 后，系统 db 表将更新为新路径，因此所有**不在**的模块`/modules`优先于`/modules`. 您可以卸载所有可选模块，以便它们也可以毫无问题地从系统表中清除。

在`system`模块的情况下，这是不可能的，因为当安装了错误的模块时，您无法*卸载模块。*`system`

所以你要做的是：

1.  使用例如 phpMyAdmin打开`system`表，然后搜索系统模块：`SELECT * FROM system WHERE name = "system"`。
2.  将`filename`字段从“sites/all/modules/modules/system/system.module”（或任何其他）更改为“modules/system/system.module”
3.  现在（这在运行*update.php***之前**很重要！）删除错误的系统模块文件夹。
**   运行*更新.php**

 *现在 Drupal 应该找到原始（内置）系统模块 - 一切都应该没问题。*

# php - 动态检索 xml 数据

> ID：14861897
> 
> 赞同：2
> 
> 时间：2013-02-13T19:55:29.747
> 
> 标签：php, xml-parsing

我正在使用 simplexml 来检索数据。

我遇到问题的数据如下所示：

```
SimpleXMLElement Object
(
    [listing_pics_array] => SimpleXMLElement Object
        (
            [pic0] => http://imagepath.com_1.jpg
            [pic1] => http://imagepath.com_2.jpg
            [pic2] => http://imagepath.com_3.jpg
            [pic3] => http://imagepath.com_4.jpg
            [pic4] => http://imagepath.com_5.jpg
            [pic5] => http://imagepath.com_6.jpg
            [pic6] => http://imagepath.com_7.jpg
        )
) 
```

我可以像这样检索网址： (string)$listing->listing_pics_array->pic0[0]

我想动态循环listing_pic_array，因为我不知道将返回多少张图片。

我想做这样的事情：

```
foreach ($listing->listing_pics_array as $key => $value) {
    echo '<img src="'.$value .'" alt="" />';
} 
```

但我什么也没得到。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:17:17.683

尝试将 SimpleXMLElement 转换为数组。这对我来说很好用：

```
$sXml = <<<XML
<?xml version='1.0'?>
<root>
  <listing_pics_array>
    <pic0>pic0 foo</pic0>
    <pic1>pic1 bar</pic1>
  </listing_pics_array>
</root>
XML;

$oXml = simplexml_load_string($sXml);
foreach ((array)$oXml->listing_pics_array as $sCurrentValue) {
  echo $sCurrentValue . PHP_EOL;
} 
```

产量

```
pic0 foo
pic1 bar 
```

高温高压

# iphone - 根据按下的表格视图单元格更改标签文本（故事板）

> ID：14861900
> 
> 赞同：0
> 
> 时间：2013-02-13T19:55:35.323
> 
> 标签：iphone, xcode, storyboard

我在表格视图中有一些单元格，当按下这些单元格时会导致视图控制器具有我想要更改的标签。

示例：我有代表美国最大城市的单元格，我按下洛杉矶，然后我被发送到视图控制器，标签更改为代表洛杉矶的数字。如果我返回并按 New York，标签现在会显示一个代表 New York 的数字。

我想我会给出标签和单元格标识符并制作某种 if/else if。

像这样的东西：

"如果 'newyorkcell' isPressed setText 'numbercell' = "12345";"

但是使用真实的代码。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:21:12.750

为此，您必须在视图控制器头文件中公开您的标签：

```
@interface YourViewController : UIViewController

@property (weak, nonatomic) IBOutlet UILabel *yourLabel;

@end 
```

然后你可以通过 didSelectRow 设置标签文本，为此你必须给你的细节视图控制器一个故事板 ID（在故事板中），以便能够在代码中访问它：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    ViewController *detailViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"VC"];

    detailViewController.yourLabel.text = [self.yourArray objectAtIndex:indexPath.row];

    [self.navigationController presentViewController:detailViewController animated:YES completion:nil];
} 
```

除了使用 if/else 之外，您还可以使用数组或其他包含所有数据并使用其索引访问它的东西。

# html - html 下拉列表在单击之前无法输入

> ID：14861902
> 
> 赞同：0
> 
> 时间：2013-02-13T19:55:37.523
> 
> 标签：html, yii

我已在多个浏览器中尝试过此操作，并对此进行了搜索，但未能找到解决方案。

所以这就是问题所在。我的页面上有 CHtml::dropDownLists。当您选择该选项时，您有时只需键入以更改为其中包含的选项，但在其他时候您必须实际单击该选项，然后才能开始键入以进行更改。一旦你点击它，你就可以改变它，但我需要更多的鼠标控制。

我很好奇这是基于浏览器如何使用其 DOM 放置项目，还是基于 Yii。

任何关于此的想法、指针、隐藏网站将不胜感激。

# javascript - d3.js 动态数据重新加载可能与 exit().remove() 有关

> ID：14861903
> 
> 赞同：2
> 
> 时间：2013-02-13T19:55:48.313
> 
> 标签：javascript, d3.js

我已经实现了这个 d3 可视化[http://bl.ocks.org/4745936](http://bl.ocks.org/4745936)，加载动态数据而不是 .tsv

就我而言，一旦我的服务器将新信息传递给选择器，第二个图表就会在第一个图表下呈现，而不是修改现有图表的内容。

我相信这与这种`append`方法有关。

```
var svg = d3.select(selector).append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")"); 
```

所以我尝试`exit().remove()`在图例和城市变量之后立即添加其他方法，`append('g');`但我的 javascript 控制台说该`exit()`方法此时不存在。

我觉得我的方法完全错误，如何更新这样的现有图表？与之前的图表一起生成第二个和第三个图表根本不是我想要的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:06:31.257

没错，append 方法每次都添加一个新的 svg 元素。为了防止重复图表，您需要检查 svg 元素是否已经存在。所以在开始时尝试这样的事情：

```
var svg = d3.select("#mycontainer > svg")
if (svg.empty())
    svg = d3.select(selector).append("svg");
... 
```

如[exit() 文档](https://github.com/mbostock/d3/wiki/Selections#wiki-exit)中所述，*此方法仅在数据运算符返回的选择上定义。*因此，请确保您在从`.data(..)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T20:29:08.110

斯科特的回答是确保初始化只发生一次的一种方法。

但是，我更喜欢一种更*d3-ic*的方式来处理这个问题：

```
var svg = d3.select(selector)
            .selectAll('svg')
            .data( [ dataFromTSV ] ); // 1 element array -> 1 svg element

// This will be empty if the `svg` element already exists.
var gEnter = svg.enter()
               .append('svg')
               .append('g');

gEnter.append( ... ); // Other elements to be appended only once like axis

svg.attr('width', ...)
   .attr('height', ...);

// Finally, working with the elements which are surely in the DOM.
var g = svg.select("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

g.selectAll(...).attr(...); 
```

这种方法在[可重用图表示例](http://bost.ocks.org/mike/chart/)的[源代码](http://bost.ocks.org/mike/chart/time-series-chart.js)中得到了例证。

我更喜欢这种方法，因为它通过隐藏初始化和更新的逻辑来保持代码的声明性和可视化的*真实性。*

* * *

我会修改原来的例子： http: [//jsfiddle.net/8Axn7/5/](http://jsfiddle.net/8Axn7/5/)到[http://jsfiddle.net/3Ztt8/](http://jsfiddle.net/3Ztt8/)

图例和图表都是从`svgElem`一个单一的数据元素定义的：

```
var svgElem = d3.select("#multiLinegraph").selectAll('svg')
            .data([cities]);

// ...

var svg = svgElem.select('g');

// ...

var city = svg.selectAll(".city")
    .data(
        function (d) { return d; },
        function (d) { return d.name; } // Object consistency 
    );

// ...

var legend = svg.selectAll('g.legend')
    .data(
        function(d) { return d; }, 
        function (d) { return d.name; } // Object consistency 
    ); 
```

此外，*静态*属性仅在元素进入（或退出）时设置一次，而更新属性在每次更新时设置（转换）：

```
gEnter.append("g")
    .attr("class", "y multiLineaxis")
  .append('text')
    .attr("transform", "rotate(-90)")
    .attr("y", 6)
    .attr("dy", ".71em")
    .style("text-anchor", "end")
    .text("Requests (#)");

svg.select('g.y.multiLineaxis').transition().call(yAxis); 
```

在我看来，代码完全遵循了进入-更新-退出的循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T22:01:54.540

我能够用一些 jQuery 和 CSS voodoo 解决这个问题

基本上，因为我的 d3 图将 svg 元素添加到现有选择器（在我的情况下为 div），我能够动态检查它的名称

`var svgtest = d3.select(selector+" > svg");` 获取该 div 的 svg 子子元素。然后我可以使用 jquery 完全从 dom 中删除该元素，然后让 d3 继续运行并附加 svg 的所有内容！

```
 var svgtest = d3.select(selector+" > svg");
    if(!svgtest.empty())
    {
        $(selector+" > svg").remove();
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-25T12:56:48.983

首先你应该删除旧的 svg，然后你可以添加更新的图表。为此，您应该在附加 svg 之前只添加一行。及其工作。

```
 var flag=d3.select("selector svg").remove(); 
```

//----您的旧代码将从这里开始-----

```
var svg = d3.select(selector).append("svg") 
```

# iphone - 调整视图内的 UIScrollView 的大小

> ID：14861905
> 
> 赞同：0
> 
> 时间：2013-02-13T19:55:49.950
> 
> 标签：iphone, ios, objective-c

我遇到了无法增加 UIScrollView 高度的问题。UIScrollView 位于 UIView 内部。这是描绘我的 xib 设置的图像：

![xib 图片](../Images/67f95b84805960c5cd005c10b7895752.png)

万一图片不出现链接：http: [//imgur.com/QT6emuZ](https://imgur.com/QT6emuZ)

我遇到问题的 UIScrollView 在图片中称为“滚动视图背景”。除了改变 UIScrollView 的 contentSize 属性的高度之外，我还需要做些什么来改变它的高度吗？我是否需要调整其superview的某些属性？

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:26:04.277

好的，我想通了。为了让 contentSize 生效，我必须在文件检查器（在你的 xib 或 StoryBoard 中）取消选中它的 Superview 的“使用自动布局”属性。

# database - foxpro 7 中的显示值、行源和行源类型

> ID：14861907
> 
> 赞同：1
> 
> 时间：2013-02-13T19:55:58.973
> 
> 标签：database, data-binding, datatable, visual-foxpro

我有两个表客户和类别，为了简单起见，我将保持结构简单：

```
customer
---------
id            name        categoryid
----------------------------------
1             joe          1
2             john         2

category
---------
categoryid            categoryname        
-----------------------------------
1                       User
2                       Admin 
```

我有一个包含客户姓名和一些其他信息作为文本字段的表单，以及一个组合框，我想在其中显示类别表中相应的类别名称。知道我希望客户表始终存储 categoryid，我如何使用 foxpro 数据绑定来做到这一点？显示类别名称值，来自类别表，并在客户表中存储类别 ID ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:06:33.600

在表单设计器的组合框属性中，设置 RowSourceType = 2(Alias) 和 RowSource = "CateGory.Categoryname, CateGory.CategoryId", ControlSource = "Customer.Id", BoundColumn = 2

此外，您还需要将表添加到表单的 DataEnvironment 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-11T10:31:50.153

在数据环境中添加具有您要在客户表单中查看的类别的表，并使用与其关联的类别 ID。使用组合框控件作为数据源链接到具有类别 ID 的客户表字段，尝试使用组合框构建器，方法是右键单击鼠标，同时选择表单上的组合框，完成后。转到组合丢失焦点事件并通过代码显示组合框中所选类别的类别名称，使用如下所示：获取类别并在表单上的标签中显示它，假设类别 ID 为整数：

```
Local iCatID As Integer
iCatID = ThisForm.Combo.Value
Select CategoryTable
Locate for iCatID = CategoryTable.CategID
IF Found()
ThisForm.Label.Caption = "Category " + Transform(CategoryTable.Category, "@T")
ThisForm.Refresh()
Else
Messagebox("Invalid Category !")
Endif 
```

试试看，希望它对你有用。

# smartcard - APDU 命令读取卡号

> ID：14861908
> 
> 赞同：3
> 
> 时间：2013-02-13T19:56:01.320
> 
> 标签：smartcard, iso, apdu, pcsc, emv

我想知道是否可以从智能卡中获取借记卡/信用卡号，我正在尝试使用具有通信协议 PC/SC、CCID 和卡接口 ISO/IEC 7816-1/ 的智能卡读卡器来获取它2/3 智能卡，MicroSD 接口 ISO 7816-4 智能卡。

到目前为止，我只知道插入的卡类型（Visa、Mastercard、Maestro 等）

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T05:18:11.040

首先让我告诉你，没有一个简单的方法。

您必须查看 EMV 文档，本教程非常好。

[http://www.openscdp.org/scripts/tutorial/emv/index.html](http://www.openscdp.org/scripts/tutorial/emv/index.html)

芯片卡中的所有信息都以字节为单位，大部分以 TLV 编码。该卡通常有多个存储信息的记录，您必须循环该记录以找到标签“5a”，这是 PAN 之一。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T23:32:03.823

您所说的卡号是 PAN = Primary Account Number

该数据包含在 Track 1 和 Track 2 中，如此[处](http://www.acmetech.com/documentation/credit_cards/magstripe_track_format.html)所示。

您可以通过 APDU 命令从芯片中检索此数据。[这里](https://stackoverflow.com/questions/13118504/scardtransmit-always-return-6d00/13150119#13150119)有一个关于如何做到这一点的步骤。

# objective-c - 在矩阵的 NSMutableArray 中显示对象

> ID：14861911
> 
> 赞同：0
> 
> 时间：2013-02-13T19:56:06.820
> 
> 标签：objective-c, nsmutablearray

遵循此代码：

在 ViewController.m 中

```
double kk[2][2] = {{1,2},{5,6}};
if (!matrix1Col) {
    matrix1Col = [NSMutableArray array];
}

for (int i=0; i<2; i++) {
    [matrix1Row removeAllObjects];
    if (!matrix1Row) {
        matrix1Row = [NSMutableArray array];
    }

    for (int j=0 ; j<2; j++) {
        [matrix1Row insertObject:[NSNumber numberWithDouble:kk[i][j]] atIndex:j];
    }
    [matrix1Col insertObject:matrix1Row atIndex:i];
}

self.label100.text = [NSString stringWithFormat:@"%f",[[[matrix1Col objectAtIndex:0] objectAtIndex:0] doubleValue]];
self.label110.text = [NSString stringWithFormat:@"%f",[[[matrix1Col objectAtIndex:1] objectAtIndex:0] doubleValue]];
self.label101.text = [NSString stringWithFormat:@"%f",[[[matrix1Col objectAtIndex:0] objectAtIndex:1] doubleValue]];
self.label111.text = [NSString stringWithFormat:@"%f",[[[matrix1Col objectAtIndex:1] objectAtIndex:1] doubleValue]];` 
```

我想在矩阵的 NSMutableArray 中显示对象，该对象从标签中的双精度矩阵接收值。

我的所有标签必须显示如下 ->label100 显示 1 ->label110 显示 5 ->label101 显示 2 和 ->label111 显示 6

但它显示 ->label100 显示 5 ->label110 显示 5 ->label101 显示 6 和 ->label111 显示 6

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:03:30.850

问题是您总是覆盖已插入的对象，因为您在同一个循环中多次插入该行。我就是这样写的：

```
double kk[2][2] = {{1,2},{5,6}};
NSMutableArray* matrix= [NSMutableArray new];
for(unsigned int i=0; i<2; i++)
{
    NSMutableArray* row= [NSMutableArray new];
    for(unsigned int j=0; j<2; j++)
    {
        [row addObject: @(kk[i][j]) ];
    } 
    [matrix addObject: row];
} 
```

# jquery - 使用 jQuery 在特定字符串之前添加 Span

> ID：14861916
> 
> 赞同：0
> 
> 时间：2013-02-13T19:56:24.430
> 
> 标签：jquery, html, string

是否可以使用 jQuery 在特定字符串之前添加 HTML 元素？例如，如果我有：

```
<h4>Men's Basketball vs. Georgetown</h4> 
```

我想做到：

```
<h4>Men's Basketball <span class="team">vs. Georgetown</span></h4> 
```

我可以用 jQuery 做到这一点吗？我尝试使用各种选项（:contains、prepend()、html()、pop() 等。但它们似乎都不能完全正确地工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T19:58:17.280

你可以这样做：

```
var h4 = $('h4');
var str = 'vs. Georgetown';
h4.html(h4.text().replace(str, '<span class="team">'+str+'</span>')); 
```

假设您想在所有元素中换`vs`行并结束文本，那么您可能会这样做`h4`

```
$('h4').each(function(){
   var bip = $(this).text().split(/(?<vs)/);      
   if (!bip.length) return;
   $(this).html(bip[0]+'<span class="team">'+bip[1]+'</span>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T20:03:47.057

***[`jsFiddle Demo`](http://jsfiddle.net/je9Aa/)***

假设对于每个`h4`您想要的`vs.` *以及*随后的内容都包裹在一个跨度中，那么您应该遍历每一个，确定`vs.`字符串中的位置，然后将其包裹在一个跨度中。

html:`<h4>Men's Basketball vs. Georgetown</h4>`

CSS：`.team{ color: red; }`

js：

```
$("h4").each(function(){
 var v = 'vs.',t = $(this), prefix, suffix;
 if(t.text().indexOf(v) > -1 ){
  prefix = t.text().substr(0,t.text().indexOf(v));
  prefix += "<span class='team'>";
  suffix = t.text().substr(t.text().indexOf(v));   
  suffix += "</span>";
  t.html(prefix+suffix);
 }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:14:38.633

如果我是你，我会给 h4 一个 id。

```
$(document).ready(function(){
    var text = $('h4').html().split('vs.');

    $('h4').html(function(){
        return text[0] + '<span class="team"> vs. '+ text[1] +'</span>';
    });
}); 
```

或者，如果你有一个 ID。让我们说Id1。

```
$(document).ready(function(){
    var text = $('#Id1').html().split('vs.');

    $('#Id1').html(function(){
        return text[0] + '<span class="team"> vs. '+ text[1] +'</span>';
    });
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-13T20:02:47.523

我会做...

```
var str = $('h4').split('vs.'); // team name

$('h4').html(function(){
    return str[0] + 'vs. <span class="team"> '+ str[1] +'</span>';
}); 
```

与之前的答案相比，这似乎更像是一个动态解决方案。

[这是你的工作 jsFiddle](http://jsfiddle.net/7aQpN/)

# ms-access - 使用第二列设置组合框

> ID：14861917
> 
> 赞同：0
> 
> 时间：2013-02-13T19:56:25.350
> 
> 标签：ms-access, vba

我有一个包含两列的组合框，分别是描述和 ID。ID 列被隐藏。有时以编程方式选择组合框值，我希望能够使用 ID 列进行选择。谁能告诉我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:04:31.440

如果 ID 列是绑定列，你可以简单地说：

```
 Me.MyCombo=1 
```

其中 1 是行源中的 ID。

# python - 在迭代期间删除python列表的元素

> ID：14861918
> 
> 赞同：0
> 
> 时间：2013-02-13T19:56:27.750
> 
> 标签：python, optimization, garbage-collection

我对每个元素都有一个*非常*大的列表，我必须对其进行许多操作。本质上，列表的每个元素都以各种方式附加，然后用于生成对象。然后使用这些对象生成另一个列表。

不幸的是，以幼稚的方式执行此操作会占用所有可用内存。

因此，我想做以下事情：

```
for a in b:
    # Do many things with a
    c.append(C(modified_a))
    b[b.index(a)] = None # < Herein lies the rub 
```

这似乎违反了在迭代期间不应修改列表的想法。有没有更好的方法来进行这种手动垃圾收集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:03:02.980

这应该不是问题，因为您只是为列表元素分配新值，而不是真正删除它们。

但是，您可能应该使用 enumerate，而不是使用 index 方法搜索 a。

另请参阅此处： [http](http://unspecified.wordpress.com/2009/02/12/thou-shalt-not-modify-a-list-during-iteration/) ://unspecified.wordpress.com/2009/02/12/thou-shalt-not-modify-a-list-during-iteration/ “首先，让我明确一点，在本文中，当我说“修改”，我的意思是从列表中插入或删除项目。仅仅更新或改变列表项目就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T06:27:07.927

您最好的选择是[生成器](http://docs.python.org/2/tutorial/classes.html#generators)：

```
def gen(b):
   for a in b:
      # Do many things with a
      yield a 
```

在这里正确完成，不需要额外的内存。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T20:11:28.473

您的代码有几个问题。

首先，分配`None`给列表元素不会删除它：

```
>>> l=[1,2,3,4,5,6,6,7,8,9]
>>> len(l)
10
>>> l[l.index(5)]=None
>>> l
[1, 2, 3, 4, None, 6, 6, 7, 8, 9]
>>> len(l)
10 
```

其次，使用索引来查找要更改的元素根本不是有效的方法。

您可以使用枚举，但您仍然需要循环删除这些`None`值。

```
for i,a in enumerate(b):
    # Do many things with a
    b[i]=C(modified_a)
    b[i]=None 
c=[e for e in b if e is not None] 
```

您可以使用列表推导将新的“a”值复制到 c 列表中，然后删除 b：

```
c=[do_many_things(a) for a in b]
del b                              # will still occupy memory if not deleted... 
```

或者，如果您希望 b 被原地修改，您可以使用[slice assignment](http://docs.python.org/2/tutorial/introduction.html#lists)：

```
b[:]=[do_many_things(a) for a in b] 
```

切片分配以这种方式工作：

```
#shorted a list
>>> b=[1,2,3,4,5,6,7,8,9]
>>> b[2:7]=[None]
>>> b
[1, 2, None, 8, 9]

#expand a list
>>> c=[1,2,3]
>>> c[1:1]=[22,33,44]
>>> c
[1, 22, 33, 44, 2, 3]

# modify in place
>>> c=[1,2,3,4,5,6,7]
>>> c[0:7]=[11,12,13,14,15,16,17]
>>> c
[11, 12, 13, 14, 15, 16, 17] 
```

您可以在列表理解中使用它，如下所示：

```
>>> c=list(range(int(1e6)))
>>> c[:]=[e for e in c if e<10]
>>> c
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

其中一条评论指出，切片分配并没有完全修改到位；生成一个临时列表。[那是真实的。](https://stackoverflow.com/a/4948508/648852)但是，让我们看看这里的总时间：

```
import time
import random
fmt='\t{:25}{:.5f} seconds' 
count=int(1e5)
a=[random.random() for i in range(count)]
b=[e for e in a]

t1=time.time()
for e in b:
    if e<0.5: b[b.index(e)]=None  
c=[e for e in b if e is not None]    
print(fmt.format('index, None',time.time()-t1))

b=[e for e in a]
t1=time.time()
for e in b[:]:
    if e<0.5: del b[b.index(e)]  
print(fmt.format('index, del',time.time()-t1))

b=[e for e in a]
t1=time.time()
for i,e in enumerate(b[:]):
    if e<0.5: b[i]=None
c=[e for e in b if e is not None]    
print(fmt.format('enumerate, copy',time.time()-t1))

t1=time.time()
c=[e for e in a if e<.5]
del a
print(fmt.format('c=',time.time()-t1))

b=[e for e in a]
t1=time.time()
b[:]=[e for e in b if e<0.5]
print(fmt.format('a[:]=',time.time()-t1)) 
```

在我的电脑上，打印这个：

```
index, None              87.30604 seconds
index, del               28.02836 seconds
enumerate, copy          0.02923 seconds
c=                       0.00862 seconds
a[:]=                    0.00824 seconds 
```

或者，如果这没有帮助，请使用 numpy 以获得更优化的数组选项。

# android - 更改地图标记颜色的有效方法

> ID：14861920
> 
> 赞同：0
> 
> 时间：2013-02-13T19:56:29.020
> 
> 标签：android, maps, google-maps-mobile

我正在使用`GoogleMap`加载了很多小标记的 a 。我们说的可能是 400-500 个标记。在用户交互时，我想让这些标记的一个子集改变颜色，可能是 100-300 个。我希望在 30 毫秒或更短的时间内达到理想状态，但最多 50-60 毫秒也是可以接受的。

现在我有类似的代码：

```
onUserInteraction... {
    changeColors(getTheSubset)
}

changeColors(subset) {
    getMarkersForSubset(subset).removeAllFromMap();
    map.addNewMarkers(subset)
} 
```

所以我删除了某种颜色的旧标记（比如绿色），并为这些位置添加新标记（比如黑色）。当子集不再相关时，我会执行相反的过程。

在地图最繁忙的部分，我看到这需要 500 毫秒或更长时间，并且存在明显的滞后，不同的标记在不同的时间改变颜色。所以我很好奇是否有更好的基于数学的方法来在地图上绘制小圆圈并更改它们的颜色而不删除/添加标记，同时最小化 alloc/gc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T20:55:00.920

所以`LevelListDrawable`s 不是一个选项，因为 Gmap 使用`BitmapDescriptorFactory`.

`Marker`我发现的一种解决方案是用新颜色在旧的顶部绘制一个，然后从下面删除旧的。

有两个问题。

*   一、google-maps-android-v2不支持`Marker`s的z-indexing。
*   二，如果你有很多`Marker`s要改变颜色，它的表现会导致伪影。

现在，谷歌最近发布了一个更新，它使`Marker`带有 common`Bitmap`的 s 的绘制速度更快，但你总是可以投入更多`Markers`并打破它。

我还尝试`Marker`在顶部绘制一个，但将其可见性设置为`false`，然后将其设置`true`为该位置被“选中”时。尽管公平地说我没有对它进行基准测试，但这似乎并没有快太多。

结论：不要`Bitmap`在 s 上更改`Marker`s。（目前）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T21:01:01.643

您是否考虑过使用`LevelListDrawable`s？而不是在更新时删除和重新添加所有标记，您可以将各种颜色的各种可绘制对象作为`LevelListDrawable`. 然后，您可以在更新引脚集时调用`setLevel()`以使用所需颜色设置适当的可绘制对象。我不是 100% 确定您可以使用 a`LevelListDrawable`作为地图图钉，但值得一试。

API：http: [//developer.android.com/reference/android/graphics/drawable/LevelListDrawable.html](http://developer.android.com/reference/android/graphics/drawable/LevelListDrawable.html)

示例：http: [//iserveandroid.blogspot.com/2010/10/progress-bar-implementation-using-level.html](http://iserveandroid.blogspot.com/2010/10/progress-bar-implementation-using-level.html)

# php - 如何安全地允许用户在 Wordpress 插件中输入外部应用程序 API 密钥？

> ID：14861923
> 
> 赞同：3
> 
> 时间：2013-02-13T19:56:36.197
> 
> 标签：php, wordpress, security

我正在创建一个允许在页面上显示自定义按钮的 Wordpress 插件。

我已经通过 Wordpress 短代码方法处理了一个简单的 HTML 转储。这是我面临的问题：我希望用户能够自定义按钮的名称、数量和其他参数。这一切都可以通过将参数发送到我们网站的外部 API 并生成按钮的短代码来完成。但是，我还需要让他们使用我们服务中的 API 密钥连接他们的按钮。这不能以明文形式存储在某处，因为如果受到破坏，它可能会被恶意使用。有没有一种好方法可以让用户输入这样的敏感信息但不以纯文本形式存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:15:27.393

我会利用 wordpress 的内置函数来处理密码。

[http://codex.wordpress.org/Function_Reference/wp_hash_password](http://codex.wordpress.org/Function_Reference/wp_hash_password)

如果您已经有一个插件页面，用户可以在其中配置您的插件，那将是一个让他们输入 API 密钥的好地方。当他们保存设置时，您可以运行散列函数，然后将散列存储在数据库中。

# php - 在 Wordpress 中，如何将正文类添加到除主页之外的所有内部页面

> ID：14861924
> 
> 赞同：0
> 
> 时间：2013-02-13T19:56:37.220
> 
> 标签：php, wordpress

我想在**除**主页之外的所有页面的 body 标签中添加一个类。现在我有。

```
<?php body_class('interior'); ?> 
```

但它为包括主页在内的所有页面添加了“内部”。

将类添加到除“主页”之外的所有内部页面的正文标记的最佳标准方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T19:58:48.807

[http://codex.wordpress.org/Function_Reference/is_home](http://codex.wordpress.org/Function_Reference/is_home)

```
<?php if (!is_home()) body_class('interior'); ?> 
```

除非你的意思是[http://codex.wordpress.org/Function_Reference/is_front_page](http://codex.wordpress.org/Function_Reference/is_front_page)

```
<?php if (!is_front_page()) body_class('interior'); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-16T14:28:01.130

我认为最好的解决方案是写：

```
<body <?php if (!is_front_page()) body_class('interior'); ?> <?php body_class(); ?>> 
```

这样你只`class="interior"`在除首页外的所有页面中添加，你可以将类保存在首页，否则在你只使用首页标签中的第一个php代码时，`<body>`你将没有类。

# mysql - LEFT OUTER JOIN 查询未返回预期的行

> ID：14861927
> 
> 赞同：9
> 
> 时间：2013-02-13T19:56:38.507
> 
> 标签：mysql, left-join, sqlfiddle

我的目标是完全按照 LEFT OUTER JOIN 使用第四个维恩图来做的事情：[SQL 图表](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)：

![在此处输入图像描述](../Images/60587a34358b6e6183f5cdee3bca321d.png)

我的查询根本没有返回任何值，实际上，它应该返回 Consultant_Memberships 中的所有值减去存储在 Consultant_Memberships_Lists 中的值。

请参阅[SQL Fiddle](http://sqlfiddle.com/#!2/f0751/7)以更容易理解：

```
SELECT * 
FROM   consultant_memberships 
       LEFT OUTER JOIN consultant_memberships_list 
                    ON consultant_memberships.`id` = 
                       consultant_memberships_list.membership_id 
WHERE  consultant_memberships_list.consultant_id = $id 
       AND consultant_memberships_list.membership_id IS NULL 
```

该查询使用“5”作为 ID 用于演示目的，以尝试挑选正确的行。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-13T20:01:19.407

您当前的查询基本上是`INNER JOIN`由于`consultant_id = 5`on`WHERE`子句而执行的。我相信您实际上想使用：

```
SELECT * 
FROM   consultant_memberships m
LEFT OUTER JOIN consultant_memberships_list l
  ON m.`id` = l.membership_id 
  AND l.consultant_id = 5 
WHERE l.membership_id IS NULL; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/f0751/12)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T20:06:31.613

采用

```
SELECT * 
   FROM   consultant_memberships 
       LEFT  Outer JOIN consultant_memberships_list 
                ON consultant_memberships_list.membership_id = consultant_memberships.`id`  
                and  consultant_memberships_list.consultant_id = 5 
 where  consultant_memberships_list.membership_id IS NULL; 
```

之前在查询“consultant_memberships_list.consultant_id = 5”中使用的 Where 子句忽略了左外连接。

# c - 结构内的指针重新分配正常，但指向结构内指针的指针无法重新分配无效指针错误

> ID：14861929
> 
> 赞同：2
> 
> 时间：2013-02-13T19:56:42.763
> 
> 标签：c, memory, memory-management, realloc

在处理需要频繁分配内存的程序时，我遇到了我无法解释的行为。我已经实施了一项工作，但我很好奇为什么我以前的实施没有奏效。情况如下：

**指针的内存重新分配有效**

这可能不是最佳实践（如果是这样，请告诉我），但我记得如果传入的指针为 NULL，realloc 可以分配新内存。下面是一个示例，我将文件数据读入临时缓冲区，然后为 *data 和 memcopy 内容分配适当的大小

我有一个像这样的文件结构

```
typedef struct _my_file {
       int size;
       char *data;
} 
```

内存重新分配和复制代码如下：

```
// cycle through decompressed file until end is reached
while ((read_size = gzread(fh, buf, sizeof(buf))) != 0 && read_size != -1) {
        // allocate/reallocate memory to fit newly read buffer
        if ((tmp_data = realloc(file->data, sizeof(char *)*(file->size+read_size))) == (char *)NULL) {
                printf("Memory reallocation error for requested size %d.\n", file->size+read_size);
                // if memory was previous allocated but realloc failed this time, free memory!
                if (file->size > 0)
                        free(file->data);
                return FH_REALLOC_ERROR;
        }
        // update pointer to potentially new address (man realloc)
        file->data = tmp_data;
        // copy data from temporary buffer
        memcpy(file->data + file->size, buf, read_size);

        // update total read file size
        file->size += read_size;
} 
```

**指向指针的内存重新分配失败**

但是，这就是我感到困惑的地方。使用重新分配 NULL 指针将分配新内存的相同想法，我解析一个参数字符串，并为每个参数分配一个指向指针的指针，然后分配一个由该指针指向的指针指向一个指针。也许代码更容易解​​释：

这是结构：

```
typedef struct _arguments {
        unsigned short int options;    // options bitmap
        char **regexes;                // array of regexes
        unsigned int nregexes;         // number of regexes
        char *logmatch;                // log file match pattern
        unsigned int limit;            // log match limit
        char *argv0;                   // executable name
} arguments; 
```

以及内存分配代码：

```
int i = 0;
int len;
char **tmp;
while (strcmp(argv[i+regindex], "-logs") != 0) {
        len = strlen(argv[i+regindex]);

        if((tmp = realloc(args->regexes, sizeof(char **)*(i+1))) == (char **)NULL) {
                printf("Cannot allocate memory for regex patterns array.\n");
                return -1;
        }
        args->regexes = tmp;
        tmp = NULL;

        if((args->regexes[i] = (char *)malloc(sizeof(char *)*(len+1))) == (char *)NULL) {
                printf("Cannot allocate memory for regex pattern.\n");
                return -1;
        }

        strcpy(args->regexes[i], argv[i+regindex]);

        i++;
} 
```

当我编译并运行它时，我得到一个运行时错误“realloc：invalid pointer”

我一定遗漏了一些明显的东西，但是在尝试调试和在线搜索解决方案 5 个小时没有完成太多尝试之后，我只运行了两个循环，一个计算参数的数量并为其分配足够的空间，第二个循环为它分配空间参数和 strcpys 它。

对此行为的任何解释都非常感谢！我真的很想知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:17:46.080

第一个片段：

```
// cycle through decompressed file until end is reached
while (1) {
        char **tmp_data;
        read_size = gzread(fh, buf, sizeof buf);
        if (read_size <= 0) break;

        // allocate/reallocate memory to fit newly read buffer
        tmp_data = realloc(file->data, (file->size+read_size) * sizeof *tmp_data );
        if ( !tmp_data ) {
                printf("Memory reallocation error for requested size %d.\n"
                      , file->size+read_size);

                if (file->data) {
                        free(file->data)
                        file->data = NULL;
                        file->size = 0;
                }
                return FH_REALLOC_ERROR;
        }

        file->data = tmp_data;
        // copy data from temporary buffer
        memcpy(file->data + file->size, buf, read_size);

        // update total read file size
        file->size += read_size;
} 
```

第二个片段：

```
unsigned i; // BTW this variable is already present as args->nregexes;

for(i =0; strcmp(argv[i+regindex], "-logs"); i++) {
        char **tmp;

        tmp = realloc(args->regexes, (i+1) * sizeof *tmp ); 
        if (!tmp) {
                printf("Cannot allocate memory for regex patterns array.\n");
                return -1;
        }
        args->regexes = tmp;

        args->regexes[i] = strdup( argv[i+regindex] ); 
        if ( !args->regexes[i] ) {
                printf("Cannot allocate memory for regex pattern.\n");
                return -1;
        }
...
return 0;
} 
```

几点注意事项：

*   语法`ptr = malloc ( CNT * sizeof *ptr);`比`sizeof(type)`变体更健壮。
*   strdup() 与您的 malloc+strcpy() 完全相同
*   `i++;`for(;;) 循环比在循环体末尾松散的 while() 循环更不容易出错。（它也清楚地表明循环条件从未被检查过）
*   对我`if ( !ptr ) {}`来说比阅读更容易`if (ptr != NULL) {}`
*   演员表是不需要的，有时是不需要的。

# c# - 在 C# ASP.NET 中无法获取最后一个事务 ID

> ID：14861931
> 
> 赞同：0
> 
> 时间：2013-02-13T19:56:52.680
> 
> 标签：c#, asp.net, sql-server, webforms

我有以下运行存储过程的代码：

```
 [WebMethod]
    public static string addNewNote(string id, string txt)
    {
        Guid parentId = new Guid(id);
        DbProviderFactory dbf = DbProviderFactories.GetFactory();
        using (IDbConnection con = dbf.CreateConnection())
        {
            con.Open();
            using (IDbTransaction trn = con.BeginTransaction())
            {

                Guid noteId = Guid.Empty;
                SqlProcs.spNOTES_WebForms
                        (ref noteId,
                        parentId,
                        "Files",
                        "Client Note",
                        txt,
                        true
                        );

                IDbCommand cmd = con.CreateCommand();
                cmd.CommandText = "SELECT SCOPE_IDENTITY()";
                cmd.Transaction = trn;

                // Get the last inserted id.
                string insertID = cmd.ExecuteScalar().ToString();
                Debug.Print(insertID.ToString());
            }
        }
        return "";
    } 
```

**它不会在输出面板中输出任何内容。如何找回最后一个 ID？**

注意：我的 ID 是一个 GUID（唯一标识符）。

**编辑：**

这是我的存储过程：

```
if exists (select * from dbo.sysobjects where id = object_id(N'spNOTES_WebForms') and OBJECTPROPERTY(id, N'IsProcedure') = 1)
    Drop Procedure dbo.spNOTES_WebForms;
GO

Create Procedure dbo.spNOTES_WebForms
    ( @ID                   uniqueidentifier output
    , @PARENT_ID            uniqueidentifier
    , @PARENT_TYPE          nvarchar(255)
    , @MODIFIED_USER_ID     uniqueidentifier
    , @NAME                 nvarchar(255)
    , @DESCRIPTION          ntext
    , @VISIBLE_TO_CLIENT    bit
    )
with encryption
as
  begin
    set nocount on

    if dbo.fnIsEmptyGuid(@ID) = 1 begin -- then
        set @ID = newid();
    end -- if;
    insert into NOTES
        ( ID               
        , PARENT_ID
        , PARENT_TYPE
        , CREATED_BY       
        , DATE_ENTERED     
        , MODIFIED_USER_ID 
        , DATE_MODIFIED    
        , NAME             
        , DESCRIPTION      
        , VISIBLE_TO_CLIENT
        )
    values
        ( @ID               
        , @PARENT_ID
        , @PARENT_TYPE
        , @MODIFIED_USER_ID 
        ,  getdate()        
        , @MODIFIED_USER_ID 
        ,  getdate()        
        , @NAME             
        , @DESCRIPTION      
        , @VISIBLE_TO_CLIENT
        );

    -- 03/04/2006 Paul.  Add record to custom table. 
    if not exists(select * from NOTES_CSTM where ID_C = @ID) begin -- then
        insert into NOTES_CSTM ( ID_C ) values ( @ID );
    end -- if;

  end
GO

Grant Execute on dbo.spNOTES_WebForms to public;
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:14:38.313

首先你应该检查 isDBNull 与否？而且您的查询没有返回任何 id。字符串 id = cmd.ExecuteScalar(); 添加`SELECT SCOPE_IDENTITY();`查询的结尾，然后重试。Scope_Identity() 也返回一个小数。您可以对查询结果使用 Convert.ToInt32，也可以将返回值转换为十进制然后转换为 int。

# c# - .NET GUI 未在 WinPE 中显示

> ID：14861933
> 
> 赞同：3
> 
> 时间：2013-02-13T19:56:54.793
> 
> 标签：c#, .net, sccm, winpe

我在 C# 中创建了一个实用程序，一些基本的东西。我在 SCCM 任务序列部署期间运行它。它做的第一件事（在表单加载事件期间）是查询 ldap。这部分代码在 try 块中，捕获到异常并显示错误消息，但表单从未出现。在我的开发机器上，当出现错误时，我会收到消息，但随后会显示表单。

我已经验证我调用的所有 dll 都安装在 WinPE 上，有人为 WinPE 做过任何 .NET 开发吗？这是 WinPE 4.0，我已经使用 Windows 8 ADK 附带的 dism 工具安装了 .NET 4.0 和其他软件。由于 WinPE 中的 .NET 支持是相当新的，因此网络上还没有太多内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T16:05:46.723

似乎没有加载 System.Windows.Forms 程序集。我通过尝试使用 powershell 创建一个表单发现了这一点，而 powershell 给出了一个错误，说它找不到类型。谷歌搜索后，我遇到了一个说使用`[System.Reflection.Assembly]::LoadWithPartialName`方法加载程序集的修复程序，我加载了 System.Windows.Forms 程序集。之后，我在 powershell 中创建了一个表单，它显示没有问题，在我再次运行我的应用程序后，它显示 gui 很好。

**更新**

看起来我找到了答案：任务序列在会话 0 中运行，即没有 gui！[http://blogs.technet.com/b/cameronk/archive/2010/04/27/creating-a-user-interactive-task-sequence-experience.aspx](http://blogs.technet.com/b/cameronk/archive/2010/04/27/creating-a-user-interactive-task-sequence-experience.aspx)

**更新 20130219**

我最终使用 psexec 并从中调用我的可执行文件，使用

```
psexec.exe -accepteula -s -i -h C:\_SMSTaskSequence\Packages\STE000AAA\myapp.exe 
```

# sharepoint - 有没有办法一次编辑多个 SharePoint 2013 页面的 HTML？

> ID：14861934
> 
> 赞同：1
> 
> 时间：2013-02-13T19:56:57.950
> 
> 标签：sharepoint

你们要救我 我应该进入 70 多个 SharePoint 2013 页面并手动将每个页面的 html 中的 3 个以上链接替换为正确的复制版本。如，当前所有链接都指向 /place1/place2/link，现在它们需要是 /place3/place4/link

所以，必须有一种方法可以批量编辑所有页面，比如查找和替换，否则我只会坐在角落里哭几个小时。我无法编辑文件夹结构，因为我不是项目负责人。

我会尽一切努力保持我的理智。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T00:33:44.427

你可以使用powershell。从[这个问题](https://sharepoint.stackexchange.com/questions/29103/powershell-script-to-update-pages-dispose-page-afterwards)：

```
function ProcessWeb($currentWeb)
{
    if([Microsoft.SharePoint.Publishing.PublishingWeb]::IsPublishingWeb($currentWeb))
    {            
        $publishingWeb = [Microsoft.SharePoint.Publishing.PublishingWeb]::GetPublishingWeb($currentWeb)
        $publishingPages = $publishingWeb.GetPublishingPages()
        foreach ($publishingPage in $publishingPages)
        {
            if($publishingPage.ListItem.File.CheckOutStatus -eq "None")
            {
                UpdatePage -page $publishingPage
            }
        }    
        Write-Host -ForegroundColor red "FINISHED"
    }
    else
    {
        Write-Host -Foregroundcolor Red "^ not a publishing site" 
    }
}

function UpdatePage($page)
{
    $page.CheckOut();
    Write-Host -Foregroundcolor green $page.Url;        
    $NewPageContent = $page["PublishingPageContent"].Replace("/place1/place2/link","/place3/place4/link");
    $page["PublishingPageContent"] = $NewPageContent    
    $page.ListItem.Update();
    $page.CheckIn("nothing");
    $page.ListItem.File.Approve("Updated PublishingPageContent to replate place1/place2 with place3/place4");
}

ProcessWeb(Get-SPWeb -identity http://myintranet.com) 
```

请注意，您需要弄清楚一个好的替换语句将如何工作。此外，这会自动执行可能出错的更改，因此请确保先在 dev/uat 环境中执行此操作，然后再在生产环境中备份内容数据库，然后再试一试。

# asp.net-mvc - 创建 MVC 帮助器方法以将“标题”添加到工具提示的控件

> ID：14861936
> 
> 赞同：1
> 
> 时间：2013-02-13T19:57:05.527
> 
> 标签：asp.net-mvc, extension-methods

我正在创建我的第一个 MVC 辅助方法，但不能完全理解。我想发出与标准“@Html.TextBoxFor”相同的代码，但属性“title”及其值取自模型属性。这就是我到目前为止所拥有的。你可以看到我试图在最后使用标准的“TextBoxFor”并向它添加我自己的属性，但这似乎不是这样做的方法。

```
public static MvcHtmlString TextBoxForWithTitle<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper,
    Expression<Func<TModel, TProperty>> expression)
{
    var metaData = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
    return htmlHelper.TextBoxFor(expression, new { @title = metaData.DisplayName });
} 
```

具体来说，我得到一个编译时错误：

```
'System.Web.Mvc.HtmlHelper<TModel>' does not contain a definition for 'TextBoxFor' and no extension method 'TextBoxFor' accepting a first argument of type 'System.Web.Mvc.HtmlHelper<TModel>' could be found (are you missing a using directive or an assembly reference?) D:\DevData\JWilliams\Code\Sandbox\URIntakeMVC2\URIntake\HtmlHelpers.cs  16  31  URIntake 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T20:54:45.623

TextBoxFor是[位于](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.inputextensions.textboxfor%28v=vs.108%29.aspx)命名空间中的类的[扩展方法](http://msdn.microsoft.com/en-us/library/vstudio/bb383977.aspx)。`HtmlHelper<TModel>``System.Web.Mvc.Html`

如果要使用扩展方法，则需要使用`using`指令显式导入其命名空间。所以你错过了`using`：

```
using System.Web.Mvc.Html; 
```

并且不要忘记您也在此处创建了一个扩展方法 ( `TextBoxForWithTitle`)，因此当您想在视图中使用它时，您还需要`using`自己的`TextBoxForWithTitle`方法命名空间：

```
@using URIntakeMVC2.URIntake 
```

# winapi - Owner-Draw 菜单项的菜单加速键（下划线）

> ID：14861937
> 
> 赞同：1
> 
> 时间：2013-02-13T19:57:05.377
> 
> 标签：winapi, menu

我尝试使用 Owner-Draw 菜单。我无法解决的唯一问题是我不知道如何实现（或启用？）菜单加速键（下划线）。我使用的是Win32，我关心的是主菜单，而不是子菜单。使用 Owner-Draw 菜单时如何实现或启用下划线？

ps Menu Accelerator Keys 是一个带下划线的字母，当用户按 Alt 访问菜单项时使用。它是由 & 字符创建的，例如 Save &As。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T20:15:09.817

使用 DrawTextEx() 来绘制文本，它会自动处理它。如果您需要隐藏下划线，请使用 DT_HIDEPREFIX 选项，如果您出于某种原因需要显示 &，请使用 DT_NOPREFIX 选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-17T16:34:15.990

字符前的 & 下划线也适用于 DrawText(); DT_HIDEPREFIX 也可以。至少这适用于所有者绘制按钮控件。

# python - 在 Mac OS X 上安装 python 3 的最佳方式

> ID：14861941
> 
> 赞同：4
> 
> 时间：2013-02-13T19:57:19.350
> 
> 标签：python, macos, python-3.x

在 Mac OS X 上安装 python3.3 的更好方法是什么？

1.  通过自制
2.  [或通过http://python.org/download/](http://python.org/download/)中的官方安装程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:43:57.943

我认为大多数在 Mac 世界工作的人都会推荐 homebrew 或 macports。

我个人更喜欢自制。除了您需要的东西之外，它不会安装任何东西，它也允许您轻松卸载选项。( `brew uninstall blah`)。它还使您可以更轻松地跟上更新。

另外，（我不确定 macports 是否如此），您可以免费获得 pip。

* * *

话虽如此，你可能不得不在你的 bash_profile 和 /usr 目录中弄脏你的手——如果你想在命令行输入 python 并获得你安装的 Python 版本，你可能不得不改变一些符号链接。

我讨厌/不太擅长玩弄系统设置，但我在不到一个小时的时间内安装并运行了完整的 Python，并且它已经运行了很长一段时间没有任何问题。

# java - Jasper 报告：找不到类的错误

> ID：14861942
> 
> 赞同：0
> 
> 时间：2013-02-13T19:57:21.227
> 
> 标签：java, swing, jakarta-ee, nullpointerexception, jasper-reports

我正在尝试打印我的报告，但它没有出现在 jrviewer 中。这是我得到的例外

> net.sf.jasperreports.engine.fill.JRFillImage.evaluateImage(JRFillImage.java:1034) 在 net.sf.jasperreports.engine.fill.JRFillImage.evaluate(JRFillImage.java) 的线程“主”java.lang.NullPointerException 中的异常:1004) 在 net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:499) 在 net.sf 的 net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:258)。 jasperreports.engine.fill.JRVerticalFiller.fillTitle(JRVerticalFiller.java:326) 在 net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:262) 在 net.sf.jasperreports.engine.fill.JRVerticalFiller。 fillReport(JRVerticalFiller.java:128) 在 net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:946) 在 net.sf.jasperreports.engine.fill。JRBaseFiller.fill(JRBaseFiller.java:845) 在 net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:58) 在 net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:417)在 net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:247) 在 Reports.ReportView.(ReportView.java:36) 在 Main.main(Main.java:27)

**这是我的代码：** {

```
public class ReportView extends JFrame
{
    public ReportView(String fileName) throws Exception
    {
        this(fileName, null);
    }
    public ReportView(String fileName, HashMap para) throws Exception
    {
        super("ABC Solutions Employee/Project Management System (Report Viewer)");
        DBhandler db = new DBhandler();
        Connection con = db.getconnection();
        try
        {
            JasperPrint print = JasperFillManager.fillReport(fileName, para, con);
            JRViewer viewer = new JRViewer(print);
            Container c = getContentPane();
            c.add(viewer);            
        } 
        catch (JRException jRException)
        {

        }
        setBounds(10, 10, 1500, 1500);
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:51:29.423

在 Jasper 报告服务器中，您不能在图形类别列中传递“空”值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:38:37.820

不要传递空值。如果您没有任何参数，请在将参数 HashMap 传递给 Jasper 之前对其进行实例化。即使它是空的：

```
 public ReportView(String fileName) throws Exception
   {
        this(fileName, new HashMap< String, String >() );
   } 
```

# multithreading - 用于异步任务的 JMS MDB 或 ScheduledThreadPoolExecutor

> ID：14861944
> 
> 赞同：2
> 
> 时间：2013-02-13T19:57:29.770
> 
> 标签：multithreading, asynchronous, ejb, jms, message-driven-bean

我使用 JMS 已经`Message Driven Bean`有一段时间了，它非常适合异步任务。我知道有很多方法可以处理异步进程，但我只是好奇使用 JMS`Message Driven Bean`和有什么好处`ScheduledThreadPoolExecutor`？

例如，我有一个异步处理一些任务的 Web 服务。所以我看到两个主要区别。如果我要使用`ScheduledThreadPoolExecutor`我不需要应用程序服务器，我可以为 Tomcat 使用 servlet 容器，因为我没有使用任何 EJB 的东西，对于 MDB，我需要一个应用程序服务器，例如 Glassfish。`ScheduledThreadPoolExecutor`但是在处理实际的异步过程方面，每个和有什么优势`MDB`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:10:02.970

[`ScheduledThreadPoolExecutor`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html)用于调度任务，与 MDB 最对应的抽象是[`ExecutorService`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html). 但回到你的问题。

MDB 更重量级，API 更复杂，原则上它实际上是为传输数据而设计的，而不是逻辑。另一方面`ExecutorService`是实际线程池之上的薄层。因此，如果您需要性能、低延迟和小开销，请选择普通线程池。

使用 MDB 和 JMS 的唯一原因是您需要持久性和事务支持。这当然会引入更大的开销，因为每条消息都需要持久化。但是您不会丢失任何排队的任务，甚至在处理过程中也不会因崩溃而丢失。

# ios - 制作一个使用 PickerView 来放置图钉的应用

> ID：14861948
> 
> 赞同：1
> 
> 时间：2013-02-13T19:57:38.057
> 
> 标签：ios, mkmapview, uipickerview, mkannotation, mkannotationview

我和一群朋友正在为我们技术课的一个项目创建一个 iPhone 应用程序。我们的应用程序将用于导航到我们地区不同的高中体育赛事地点。我们目前正在使用 PickerView 来控制学校和运动的所有组合。选择器有两个组件，一个用于学校，一个用于运动。我们也已经设置了 MapView。

我们想知道如何使用 Picker View 的输出为所有不同的学校/运动组合放置引脚。正如您在下面的代码中所看到的，我们目前有大量的 if/then 语句来接收来自 PickerView 的输出，但最终也希望减少它的体积。

这是选择器输出的代码：

```
 - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
int x = [pickerView selectedRowInComponent:0]; NSLog(@"Row 1: %i", x);
int y = [pickerView selectedRowInComponent:1]; NSLog(@"Row 2: %i", y);

//Blue Ridge
if (x == 0 && y == 0)
    {NSLog(@"Blue Ridge Basketball");}

else if (x == 0 && y == 1)
    {NSLog(@"Blue Ridge Basketball");}

else if (x == 0 && y == 2)
    {NSLog(@"Blue Ridge Cross Country");}

else if (x == 0 && y == 3)
    {NSLog(@"Blue Ridge Football");}

else if (x == 0 && y == 4)
    {NSLog(@"Blue Ridge Golf");}

else if (x == 0 && y == 5)
    {NSLog(@"Blue Ridge Soccer");}

else if (x == 0 && y == 6)
    {NSLog(@"Blue Ridge Softball");}

else if (x == 0 && y == 7)
    {NSLog(@"Blue Ridge Track");}

else if (x == 0 && y == 8)
    {NSLog(@"Blue Ridge Volleyball");}

else if (x == 0 && y == 9)
    {NSLog(@"Blue Ridge Wrestling");}

//DeeMack
   else if (x == 1 && y == 0)
    {NSLog(@"DeeMack Baseball");}

   else if (x == 1 && y == 1)
    {NSLog(@"DeeMack Basketball");}

   else if (x == 1 && y == 2)
    {NSLog(@"DeeMack Cross Country");}

   else if (x == 1 && y == 3)
    {NSLog(@"DeeMack Football");}

   else if (x == 1 && y == 4)
    {NSLog(@"DeeMack Golf");}

   else if (x == 1 && y == 5)
    {NSLog(@"DeeMack Soccer");}

   else if (x == 1 && y == 6)
    {NSLog(@"DeeMack Softball");}

   else if (x == 1 && y == 7)
    {NSLog(@"DeeMack Track");}

   else if (x == 1 && y == 8)
    {NSLog(@"DeeMack Volleyball");}

   else if (x == 1 && y == 9)
    {NSLog(@"DeeMack Wrestling");}

} 
```

...等等，这种格式继续适用于另外 11 所学校。

任何关于我们如何使用这些输出在地图上放置大头针的想法，或者使这段代码更短的想法都将不胜感激。同样重要的是要注意，我们都是编码新手，所以越简单越好。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:09:41.853

为了使代码更短，您需要做的就是维护 2 个数组，一个包含高中名称，另一个包含运动。所以创建 2 个 NSArrays 作为控制器的属性

```
@property (strong, nonatomic) NSArray *highSchools;
@property (strong, nonatomic) NSArray *sports; 
```

然后在**viewDidLoad**方法中，执行以下操作：

```
self.highSchools = [NSArray arrayWithObjects:@"Blue Ridge", @"DeeMack," nil];
self.sports = [NSArray arrayWithObjects:@"Baseball", @"BasketBall", @"Cross Country", nil]; 
```

所以现在你的选择器委托方法将减少到这个::

```
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    int x = [pickerView selectedRowInComponent:0]; NSLog(@"Row 1: %i", x);
    int y = [pickerView selectedRowInComponent:1]; NSLog(@"Row 2: %i", y);

    NSLog(@"%@ %@", [self.highSchools objectAtIndex:x], [self.sports objectAtIndex:y]);
} 
```

现在，对于放置引脚，从问题中不清楚，您想要放置它们的确切方式或位置以及引脚代表什么。您似乎想根据所选学校所在位置的学校/运动组合在地图上放置一个图钉。是对的吗？

# javascript - 在选择列表中使用所选选项的值填充文本字段

> ID：14861950
> 
> 赞同：0
> 
> 时间：2013-02-13T19:57:38.310
> 
> 标签：javascript, html

我正在尝试使用 javascript 来做到这一点。我有一个调用 javascript 函数的选择列表的 onchange 事件。Javascript 永远不会运行，因为我已经将函数更改为一个简单的警报并且它永远不会弹出。这有什么明显的问题吗？

HTML

```
select name="nSupervisor" id="iSupervisor" onchange="PopulateUserName()">
        <option value="">---------- </option>
        <option value="test1">Actual Text</option>
    </select>  
<input id="iSupervisorUserName" name="OBKey_WF_Manger_Supervisor_1" type="text" /> 
```

JavaScript

```
function PopulateUsername() {
    var dropdown = document.getElementById("iSupervisor");
    var field = document.getElementByID("iSupervisorName");
    field.value = dropdown.value;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:05:47.820

这是如何做到的，

```
function PopulateUsername() {
    var sup = document.getElementById("iSupervisor");
    var field = document.getElementById("iSupervisorName");
    field.value = sup.options[sup.selectedIndex].value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:09:13.463

你的代码有一些错误。

首先，确保`function PopulateUsername()`没有被其他函数包裹。目前，我认为不是。

其次，JavaScript 是区分大小写的，所以你调用`PopulateUserName()`which is NOT `PopulateUsername()`。

第三，尝试时会遇到错误`var field = document.getElementByID(`，因为它应该是`getElementById`<--小写'd'。

之后，它应该可以工作，并将值（“test1”）放入您的文本框中。

JsFiddle 示例：http: [//jsfiddle.net/LrCwK/2/](http://jsfiddle.net/LrCwK/2/)

# c++ - 使用 print 函数输出重载的 << 运算符？

> ID：14861953
> 
> 赞同：0
> 
> 时间：2013-02-13T19:57:50.867
> 
> 标签：c++, function

我已经成功地重载了 '<<' 运算符，我认为它被称为插入运算符。我有一个打印卡片对象实例信息的打印函数，使用运算符时如何调用此打印函数

例子：

```
Card aCard("Spades",8);  //generates an 8 of spades card object

aCard.Print(); // prints the suit and value of card

cout << aCard << endl;  // will print something successfully but how can I get the same results as if I were to call the print function? 
```

在我的实现文件`card.cpp`中，我重载了 << 以与我的卡类一起使用。

卡片.cpp

```
void Card::Print()
{
    std::cout << "Suit: "<< Suit << std::endl;
    std::cout << "Value:" << Value << std::endl;
}

std::ostream& operator<<(std::ostream &out, const Card &aCard)
{
    Print();//this causes an error in the program
} 
```

卡片.h

```
class Card
{
public:       
    std::string Suit;
    int Value;

    Card(){};
    Card(std::string S, int V){Suit=S; Value=V};

    void Print();

    friend std::ostream& operator<<(std::ostream&, const Card&)
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:06:33.247

您只需要一种实现。您可以创建一个 Print 函数，该函数接受`ostream`并执行所有打印逻辑，然后从`Print()`and调用它`operator<<`

```
void Card::Print()
{
    Print(std::cout);
}

std::ostream& operator<<(std::ostream &out, const Card &aCard)
{
    Print(out);
}

void Card::Print(std::ostream &out)
{
    out << "Suit: "<< Suit << std::endl;
    out << "Value:" << Value << std::endl;
    return out;
} 
```

或者您可以`operator<<`包含打印逻辑并`operator<<`从以下位置调用`Print`：

```
void Card::Print()
{
    std::cout << *this;
}

std::ostream& operator<<(std::ostream &out, const Card &aCard)
{
     out << "Suit: "<< Suit << std::endl;
     out << "Value:" << Value << std::endl;
     return out;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:07:20.323

你需要`aCard.Print()`不`operator<<``Print()`

```
std::ostream& operator<<(std::ostream &out, const Card &aCard)
{
    aCard.Print();
} 
```

你没有说错误是什么，但基本上你正在调用一个全局定义`Print()`的函数或一个在你的代码中不存在的函数。

# jquery - 仅为平板电脑和智能手机添加和加载 Jquery 移动脚本

> ID：14861954
> 
> 赞同：4
> 
> 时间：2013-02-13T19:57:51.613
> 
> 标签：jquery, jquery-mobile, responsive-design

如果用户使用智能手机/平板电脑或笔记本电脑，我想加载不同的脚本。

这是我想要的结果：

笔记本电脑：

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script> 
```

智能手机和平板电脑

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T22:40:13.053

您正在查看嗅探用户代理以检测特定设备，或者您可以使用浏览器/屏幕宽度来确定您的用户属于哪个类别。

要根据浏览器宽度添加脚本，您可以执行以下操作：

```
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script>
    (function ($) {

        //check if the browser width is less than or equal to the large dimension of an iPad
        if ($(window).width() <= 1024) {

            //create an AJAX request for the CSS file
            $.ajax({
                url     : 'jquery.mobile-1.2.0.min.css',
                success : function (response) {
                    $('head').append('<style>' + response + '</style>');
                }
            });

            //create an AJAX request for the JS file, setting the dataType to 'script' will have jQuery automatically evaluate the JS code in the global scope
            $.ajax({
                url      : 'jquery.mobile-1.2.0.min.js',
                dataType : 'script'
            });
        }
    })(jQuery);
</script> 
```

不过，这有一些警告。

1.  小型桌面浏览器可能很`<=1024px`宽，因此平板电脑和桌面用户之间会有一些重叠。
2.  JS/CSS 需要托管在您的 Web 服务器上，这样您就可以在没有跨域策略问题的情况下访问它们。

无论您如何检测移动/平板设备，CSS/JS 包含很可能对您有用。有一些脚本可以检测运行服务器端和客户端的设备，快速的 Google 搜索将显示其中许多脚本。但是我没有使用过这些脚本，所以我不能提供关于它们的使用的太多指导。

# javascript - 将变量整数传递给jquery函数？

> ID：14861955
> 
> 赞同：0
> 
> 时间：2013-02-13T19:57:53.210
> 
> 标签：javascript, jquery, function, variables, integer

好心看看这个jsfiddle：http: [//jsfiddle.net/ne6sg/2/](http://jsfiddle.net/ne6sg/2/)

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script>
$(document).ready(function() {
setInterval(function(){
var interval = 500;
var paras = $('font');
var rand = Math.floor(Math.random() * paras.length);    
paras.eq(rand).addClass('red');
 },500);   
});
</script>
 <style>
.red {
    color: red;
}
 </style>
<font color=#040404>Frabjous Day</font>
<font color=#040404>Frabjous Day</font>
<font color=#040404>Frabjous Day</font>  
<font color=#040404>Frabjous Day</font>
<font color=#040404>Frabjous Day</font>
<font color=#040404>Frabjous Day</font>
<font color=#040404>Frabjous Day</font>
<font color=#040404>Frabjous Day</font> 
```

一切正常。运行时，我的脚本随机将 .red 类赋予页面元素，使用 setInterval 函数以设定的速率赋予类。此速率由脚本第 7 行上的数字定义。当这个数字变大时，添加类的速度会减慢，因为间隔更大。

但是，我希望 line7 上的那个数字是一个整数变量，但我无法让它工作。

总之，为什么这不起作用：http: [//jsfiddle.net/ne6sg/3/](http://jsfiddle.net/ne6sg/3/) ？

```
 <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script>
$(document).ready(function() {
setInterval(function(){
var interval = 500;
var paras = $('font');
var rand = Math.floor(Math.random() * paras.length);    
paras.eq(rand).addClass('red');
 },(interval));   
});
</script>
 <style>
.red {
    color: red;
}
 </style>
<font color=#040404>Frabjous Day</font>
<font color=#040404>Frabjous Day</font>
<font color=#040404>Frabjous Day</font>  
<font color=#040404>Frabjous Day</font>
<font color=#040404>Frabjous Day</font>
<font color=#040404>Frabjous Day</font>
<font color=#040404>Frabjous Day</font>
<font color=#040404>Frabjous Day</font> 
```

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:01:29.710

定义`interval`超出范围`setInterval`

```
var interval = 500; // this line, declare it here

setInterval(function(){

    var paras = $('font');
    var rand = Math.floor(Math.random() * paras.length);    
    paras.eq(rand).addClass('red');

}, interval); // so it exists in this context 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T20:05:24.840

您`interval`在函数内部定义变量并尝试在外部使用它。您的 js 部分将如下所示：

```
$(document).ready(function() {
    var interval = 500;
setInterval(function(){
    var paras = $('font');
    var rand = Math.floor(Math.random() * paras.length);    
    paras.eq(rand).addClass('red');
     },1);   
}); 
```

看到这个：http: [//jsfiddle.net/ne6sg/6/](http://jsfiddle.net/ne6sg/6/)

# compression - 我可以在 Window XP 中破译 TIFF 图像的压缩和 DPI 设置吗？

> ID：14861956
> 
> 赞同：1
> 
> 时间：2013-02-13T19:57:55.383
> 
> 标签：compression, tiff, dpi

我有以下（奇怪的）任务：我在 Windows XP 系统上有一组黑白 TIFF 图像文件。我不允许在该系统上安装任何软件或从中访问互联网。我需要为每个 TIFF 确定两件事：

1.  它的 DPI（分辨率），如果给定
2.  它的压缩设置（包括“不压缩”）

如果我在 MS Paint 中打开 TIFF 文件，我只能看到 #1。我该怎么做才能两者兼得？

[**我尝试在文本编辑器中对文件进行十六进制查看，但我不知道相关信息的存储位置以及存储方式（在此处**](http://en.wikipedia.org/wiki/Tagged_Image_File_Format#Compression)找不到足够的信息）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:39:22.213

如上所述：[维基百科 TIFF 页面的部分](http://en.wikipedia.org/wiki/Tagged_Image_File_Format#TIFF_Compression_Tag)

# ruby-on-rails - 两个HABTM关系中的对象形式，Rails 3

> ID：14861964
> 
> 赞同：0
> 
> 时间：2013-02-13T19:58:14.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3, has-and-belongs-to-many, form-for

我正在尝试通过建立一个网站来学习 Ruby on Rails。用户可以添加内容：帖子和图片。帖子和图片可以有一个或多个标签。我希望每个关系都是 HABTM，这样我就可以通过特定标签轻松访问帖子、图片，反之亦然。

我正在尝试制作表格以向帖子和图片添加标签。当我提交任一表单时，我得到的错误是：

`POST http://localhost:8080/post/1/tags 500 (Internal Server Error)`

当我查看返回的对象时（这两种形式都相同）：

> #Tag id: nil, name: "asdf"> 在'@tag.save'行上的未定义方法`post_id'

我尝试将 post_id、picture_id 添加到 Tag 的 attr_accesible；没有骰子。谢谢你的帮助！我觉得我只是想念一些小东西。

我的模型：

```
class Tag < ActiveRecord::Base
  attr_accessible :name

  has_and_belongs_to_many :pictures
  has_and_belongs_to_many :posts
  validates :name, :presence => true
  validates :name, :uniqueness =>  { :scope => :post_id }
  validates :name, :uniqueness => { :scope => :picture_id }
end

class Post < ActiveRecord::Base
  attr_accessible :content, :title

  belongs_to :user
  has_and_belongs_to_many :tags
end

class Picture < ActiveRecord::Base
      attr_accessible :image, :name

      belongs_to :user
      has_and_belongs_to_many :tags
end 
```

迁移：

```
class CreateTags < ActiveRecord::Migration
  def change
    create_table :tags do |t|
      t.string :name
    end

    create_table :pictures_tags, :id => false do |t|
        t.references :picture, :tag
    end
  end
end

class CreatePostsTags < ActiveRecord::Migration
    def change
    create_table :posts_tags, :id => false do |t|
        t.references :post, :tag
    end
  end
end 
```

在我看来：

```
<%= form_for([@post, @post.tags.build]) do |f| %>
    <%= f.label 'tag' %>
    <%= f.text_area :name %>
    <%= f.submit %> 
<% end %>

<% current_user.pictures.each do |p|
<%= form_for([p, p.tags.build], :remote => true) do |f| %>
    <%= f.text_area :name %>
    <%= f.submit 'add tag' %>
<% end %>   
<% end %> 
```

在我的标签控制器中：

```
def tag_post
    authenticate_user!
    @post = Post.find(params[:id])
    @tag = @post.tags.build(params[:tag])
    @tag.save
    redirect_to edit_post_path(@post)
end

def tag_picture
    authenticate_user!
    @picture = Picture.find(params[:id])
    @tag = @state.picture.build(params[:tag])
    @tag.save
            redirect_to edit_picture_path(@picture)
end 
```

路线.rb：

```
post '/posts/:id/tags' => 'tags#tag_post', :as => :tag_post
post '/flow/:id/tags' => 'tags#tag_picture', :as => :tag_picture 
```

耙路线：

```
 posts GET    /posts(.:format)                            posts#index
                         POST   /posts(.:format)                            posts#create
                new_post GET    /posts/new(.:format)                        posts#new
               edit_post GET    /posts/:id/edit(.:format)                   posts#edit
                    post GET    /posts/:id(.:format)                        posts#show
                         PUT    /posts/:id(.:format)                        posts#update
                         DELETE /posts/:id(.:format)                        posts#destroy
        new_user_session GET    /users/sign_in(.:format)                    devise/sessions#new
            user_session POST   /users/sign_in(.:format)                    devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)                   devise/sessions#destroy
           user_password POST   /users/password(.:format)                   devise/passwords#create
       new_user_password GET    /users/password/new(.:format)               devise/passwords#new
      edit_user_password GET    /users/password/edit(.:format)              devise/passwords#edit
                         PUT    /users/password(.:format)                   devise/passwords#update
cancel_user_registration GET    /users/cancel(.:format)                     devise/registrations#cancel
       user_registration POST   /users(.:format)                            devise/registrations#create
   new_user_registration GET    /users/sign_up(.:format)                    devise/registrations#new
  edit_user_registration GET    /users/edit(.:format)                       devise/registrations#edit
                         PUT    /users(.:format)                            devise/registrations#update
                         DELETE /users(.:format)                            devise/registrations#destroy
                    root        /                                           flow#flow
                    root        /                                           flow#home
             posts_index GET    /ramblin(.:format)                          posts#index
               post_tags POST   /posts/:id/tags(.:format)                   tags#tag_post
              picture_tags POST   /flow/:id/tags(.:format)                  tags#tag_picture
            create_picture POST   /flow(.:format)                             pictures#create
                  search POST   /flow/search(.:format)                      flow#flow 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:20:04.823

Have a look at the routes that were outputted by running `rake routes`. There is this line:

```
post_tags POST    /posts/:id/tags(.:format)    tags#tag_post 
```

which shows you that the path has to be `posts` (plural) rather than `post` (singular).

So, you should instead post to

```
/posts/1/tags 
```

By the way, I know you said you are learning Rails, so it's great you are building a tagging system from scratch - but later you may want to have a look into this awesome gem [acts as taggable on](https://github.com/mbleigh/acts-as-taggable-on). It's super easy and fun. And here is a [rails casts](http://railscasts.com/episodes/382-tagging?autoplay=true) that goes over tagging very nicely.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T21:25:36.023

问题在

```
 validates :name, :uniqueness =>  { :sscope => :post_id }
  validates :name, :uniqueness => { :scope => :picture_id } 
```

因为这些方法期望`tag`模型具有`post_id`存储`picture_id`在`posts_tags`

# c# - 删除特定字符后的所有内容

> ID：14861970
> 
> 赞同：1
> 
> 时间：2013-02-13T19:58:30.657
> 
> 标签：c#, sql-server-ce

我有一个 C# 项目和一些数据，例如：

```
Thinness (n.)
Slenderness (n.)
A fat lot
Hefty (a.)
Tucking of loincloth 
```

我想要这些数据就像下面一样

```
Thinness 
Slenderness 
A fat lot
Hefty 
Tucking of loincloth 
```

我试过了

```
UPDATE    dic
SET  english = LEFT(english, CHARINDEX('(', english) - 1)
WHERE  (CHARINDEX('(', english) > 0) 
```

但我得到错误：

> 令牌错误 LEFT

我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:12:02.307

[SQL Server CE 显然不支持](http://msdn.microsoft.com/en-us/library/ms174077%28v=sql.90%29.aspx)该`LEFT`函数，但您可以改用该函数。[`SUBSTRING`](http://msdn.microsoft.com/en-us/library/aa275646%28SQL.80%29.aspx)

我做了一个测试，效果很好：

```
UPDATE    dic
SET  english = SUBSTRING(english, 1, CHARINDEX('(', english) - 1)
WHERE  (CHARINDEX('(', english) > 0) 
```

# javascript - @font-face、Firefox、CDN、document.domain

> ID：14861973
> 
> 赞同：1
> 
> 时间：2013-02-13T19:58:36.887
> 
> 标签：javascript, firefox, fonts, font-face, cdn

是否可以让自定义字体在所有浏览器中正确显示，而无需修改对我的 CDN 的访问标头？会像这样集成一些javascript脚本：`document.domain='domain.com';`工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:56:58.837

该规范要求跨站点字体加载受 CORS 保护，因此您需要让您的 CDN 发送正确的 CORS 标头。

# vba - Outlook 规则未运行 VBA 代码

> ID：14861974
> 
> 赞同：2
> 
> 时间：2013-02-13T19:58:44.023
> 
> 标签：vba, outlook, attachment, rule

我有 VBA 代码来查找特定 Outlook 文件夹中电子邮件中的附件并将它们保存到一个位置。

我有一个 Outlook 规则，将电子邮件发送到 Outlook 文件夹，然后触发宏。该代码不会在我的计算机上自动触发，但会在另一台计算机上触发。电子邮件进入，规则将其放入文件夹，但代码不运行。当我通过 VB 编辑器手动运行代码时，它会将附件保存在正确的位置。

我已检查以确保文件夹和路径名称正确（无论哪种方式，如果它们错误，则在我手动运行时代码将无法正常运行）。

展望规则：

消息到达后应用此规则

来自 xxxxxxxxxxxx

并在主题中带有 xxxx

并且仅在这台机器上

将其移至 xxxxx 文件夹

并运行 Project1.ThisOutlookSession.Save

VBA代码：

```
Sub Save(item As Outlook.MailItem)
Dim olApp As Outlook.Application
Dim objNS As Outlook.NameSpace
Dim olFolder As Outlook.MAPIFolder
Dim msg As Outlook.MailItem

Set olApp = Outlook.Application
Set objNS = olApp.GetNamespace("MAPI")
Set olFolder = objNS.GetDefaultFolder(olFolderInbox)
Set olFolder = olFolder.Folders("xxxxxxx")
Set oApp = CreateObject("Shell.Application")

For Each myitem In olFolder.Items
  For Each att In myitem.Attachments
    att.SaveAsFile "\\.............\" & att.FileName
      myitem.Attachments.Remove 1
      myitem.Save
  Next
Next
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-30T15:14:16.227

传入的邮件项是子保存中的项目（**项目**为 Outlook.MailItem）。它没有在代码中使用。

稍后手动运行时，代码仍然会忽略传递的任何项目，但现在处理 olFolder 中的所有项目。

尝试这个：

```
Sub Save(item As Outlook.MailItem)
For Each att In item.Attachments
    att.SaveAsFile "\\.............\" & att.FileName
    item.Attachments.Remove 1
    item.Save
Next
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-11T03:12:06.877

尝试删除文件（首先将代码保存在其他地方）... \Documents and Settings\\Application Data\Microsoft\Outlook\VbaProject.OTM

# jquery - 触发选项卡时调整 Google 地图的大小

> ID：14861975
> 
> 赞同：0
> 
> 时间：2013-02-13T19:58:44.207
> 
> 标签：jquery, google-maps, tabs, resize

这是我的问题的一个更集中的问题。我有 3 个地图，在 3 个选项卡中。第一张地图显示，其他2张没有。我意识到在调用 Tab 时我需要重新调整地图的大小。但我不确定在哪里放置调整大小的代码。现在我没有得到任何结果：

```
 $('.nav-tabs a').click(function (e) {
      e.preventDefault();
      $(this).tab('show');
      createMap();

})

function createMap() {

    var mapOptions = {
      center: new google.maps.LatLng(30.30, -97.70),
      zoom: 12,
      mapTypeControlOptions: {
          mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'map_style']
        }
    };

    var map = new google.maps.Map(document.getElementById('map_canvas'),
        mapOptions);

    var map2 = new google.maps.Map(document.getElementById('map_canvas2'),
    mapOptions);

    var map3 = new google.maps.Map(document.getElementById('map_canvas3'),
    mapOptions);

  google.maps.event.addDomListener(window, 'resize', function() {
  map2.setCenter(30.30, -97.70);
  });
  google.maps.event.addDomListener(window, 'resize', function() {
  map3.setCenter(30.30, -97.70);
  });

} 
```

我被称为单击选项卡的功能，但这似乎不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:06:40.060

单击新选项卡时需要触发调整大小事件。您需要将 google map 对象的实例传递给事件触发器。

```
google.maps.event.trigger(map, 'resize'); 
```

[https://developers.google.com/maps/documentation/javascript/reference#event](https://developers.google.com/maps/documentation/javascript/reference#event)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-04T08:06:31.223

请尝试此代码

```
$('a.location-map').on('click', function (e) {
            setTimeout(function(){  initialize();  
            google.maps.event.trigger(map, 'resize');},1000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T06:52:44.923

试试这段代码，加载页面时加载地图

```
$(function () { initializeMap();}); 
```

之后为选项卡创建点击事件

```
$('.nav-tabs a').on('click', function () {
                    setTimeout(function () {
                        initializeMap();
                        google.maps.event.trigger(map, 'resize');
                    }, 1000);
                }); 
```

# ios6 - 重叠的 ccsprites 不响应触摸事件，尽管 z 顺序更大

> ID：14861979
> 
> 赞同：0
> 
> 时间：2013-02-13T19:58:56.240
> 
> 标签：ios6, cocos2d-iphone, ccsprite, overlapping

CCBigSprite 和 CCSmallSprite 类继承自 CCSprite。
spr1,spr2 是它们的实例。

所有 ccTouchesStart、ccTouchesMove、ccTouchesEnd 方法都从协议 CCTargetedTouchDelegate 覆盖，用于这两个类。

问题：在正常情况下，触摸事件按预期工作并且适用于任何精灵实例，直到精灵重叠。
如果触摸 (CCSmallSprite *spr2)，则触摸事件适用于 (CCBigSprite *spr1)。

由于此处存在重叠问题以及如图所示的确切位置。

* * *

**当我按下 spr2 时，它的触摸事件应该起作用，而不是 sp1。**

我该如何解决这个致命的问题？

![在此处输入图像描述](../Images/7e080056c6db179467e46f6971db4080.png)

两个类都具有相同的重写方法：

```
-(void)onEnter {
    [super onEnter];
    [[[CCDirector sharedDirector]touchDispatcher]addTargetedDelegate:self
priority:self.touchPriority swallowsTouches:YES];
} 
```

有意义吗？

另外：
setPriority 没有改变任何东西。

我手动更改。

[spr2 setTouchPriority:1];[spr1 setTouchPriority:2];//较低意味着最高优先级，反之亦然。没有帮助。

这应该是 cocos2d-iphone 2.0 稳定版的问题吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T23:21:53.807

绘制顺序不影响触摸事件的顺序。

如果点击上图中的小精灵，只有精灵向 CCTouchDispatcher 注册的顺序决定了小精灵还是大精灵接收第一个触摸事件。

# database - 运行 python manage.py runserver 时出现数据库错误

> ID：14861985
> 
> 赞同：0
> 
> 时间：2013-02-13T19:59:21.870
> 
> 标签：database, django

我在 PowerShell 上使用 Django 1.4.3，`python manage.py`使用异常值运行后出现数据库错误：

`(1054, "Unknown column 'ventas_cliente.apellidos' in 'field list'")`

所以我正在关注一个 Django 教程，并且我有一个项目的以下目录：

```
demo/
    demo/
        apps/
            ventas/
                __init__.py
                admin.py
                models.py
                tests.py
                views.py
            __init.py
        __init__.py
        settings.py
        urls.py
        wsgi.py
 manage 
```

在 admin.py 下我有：

```
from django.contrib import admin
from demo.apps.ventas.models import cliente.producto

# Register the ventas models
admin.site.register(cliente)
admin.site.register(producto) 
```

从models.py，

```
from django.db import models

class cliente(models.Model):
    nombre      = models.CharField(max_length=200)
    apellidos    = models.CharField(max_length=200)
    status      = models.BooleanField(default=True)

class producto(models.Model):
    nombre      = models.CharField(max_length=200)
    descripcion = models.TextField(max_length=300)
    status      = models.BooleanField(default=True) 
```

我正在使用 MySQL，我没有更改数据库。`runserver`确实有效，我可以访问 localhost:8000/admin。我有一个名为“ventas”的新类别，其中包含“cliente”和“producto”子类别。我可以访问“producto”，但“cliente”给了我数据库错误。

似乎有什么问题？我怀疑这与我的 models.py 文件有关，但我不知道为什么。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T20:50:19.873

您的 model.py 和代码不同步。

# 命令

```
$ python manage.py syncdb 
```

## 做什么

遍历模型，如果该模型**不**存在表，则创建表和匹配字段。如果表**确实**存在，则它对表不执行任何操作。因此，如果您添加了一个字段，那么“syncdb”虽然听起来像，但不会在数据库中创建自上次 syncdb 以来添加的那些字段。

如果您想同步您的模型和代码，您必须删除表，以便 syncdb 将创建它们。您可以使用：

```
$ python manage.py flush 
```

“将数据库返回到它在 syncdb 执行后立即所处的状态。” 资源。[https://docs.djangoproject.com/en/dev/ref/django-admin/#flush](https://docs.djangoproject.com/en/dev/ref/django-admin/#flush)

# java - BufferedReader 在读取 html 页面时忽略 \r\n？

> ID：14861986
> 
> 赞同：0
> 
> 时间：2013-02-13T19:59:21.820
> 
> 标签：java, php, html, bufferedreader, plaintext

我正在使用 Apache HTTPClient 向页面发送 POST 请求，然后使用 BufferedReader 读取响应。

出于某种原因，BufferedReader 正在读取我响应为 1 行的两行。我的回复：

```
SUCCESS  
RANDOM STRING 
```

这是我的PHP：

```
header('Content-Type: text/plain');
echo 'SUCCESS';
echo '\\r\\n';
echo 'Random String'; 
```

缓冲阅读器只是打印出来

```
success\r\nRandom String 
```

难道我做错了什么？我使用带有循环的普通 br.readLine() 来读取所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T20:01:42.980

是的。当它们在单引号中时，它们不会被解释为换行符。它们将按字面解释为`\r\n`. 请改用双引号。

```
echo "\r\n"; 
```

转义序列仅在双引号中有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T20:02:08.400

有几个问题：

*   转义序列必须用双引号，而不是单引号。在单引号中，PHP 不查找除`\'`and之外的转义序列`\\`。
*   您正在转义反斜杠本身，这会导致 PHP 回显文字反斜杠。您只需要一个反斜杠。

只需更换

```
echo '\\r\\n'; 
```

和

```
echo "\r\n"; 
```

# javascript - Mongo 转换所有存储为字符串的数字字段

> ID：14861988
> 
> 赞同：5
> 
> 时间：2013-02-13T19:59:27.057
> 
> 标签：javascript, mongodb

看起来有一段时间我一直将小数存储为字符串。现在这是一个问题，因为我需要开始使用聚合框架来执行一些计算。

有什么方法可以遍历我的集合中的每个文档并检查每个值`isNaN`，如果为假，则将其存储为`parseFloat`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T20:45:08.620

Something like this should work from the mongo shell:

```
db.yourCollection.find({}).forEach(function(doc) { 
    if(isNaN(doc.xyz)) { 
        print('found string: ' + doc._id);
        db.yourCollection.update( 
           { _id: doc._id}, 
           { $set : { "xyz" : parseFloat(doc.xyz) } }
        )
    }
}) 
```

It loops through each document, uses `isNaN` as you suggested, then `$sets` the value to the `parseFloat` value for the current document.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T21:03:44.333

感谢您的答复。我在最初的问题中不清楚，因为我不想指定要更新为数字的字段，而是遍历每个属性并执行检查。

我已经把这个小功能放在一起来解决这个问题：

```
var cursor = db.results.find();
while (cursor.hasNext()) {
    var doc = cursor.next();
    for (key in doc) {
        if (key.match(/^metric_.*/i) && !isNaN(doc[key])) {
            doc[key] = parseFloat(doc[key]);
            db.results.update({ _id : doc._id }, doc );
        }
    }
} 
```

有两点需要注意：

1.  这只会检查和转换到第一级属性。它可以很容易地修改以更深入，但这就是我此时所需要的。
2.  **这个函数会炸掉你的日期值！！！**javascript 日期被评估`isNaN`为 false，因此将被视为数字。就我而言， using`parseFloat`实际上会将值设置为`isNaN`. 同样，对于旁观者来说，这是一个非常简单的解决方法，但我只是想提供该免责声明。

希望这可以帮助其他人在我的位置。

# android - 文本视图活动

> ID：14861989
> 
> 赞同：0
> 
> 时间：2013-02-13T19:59:31.477
> 
> 标签：android, layout, android-activity, textview

所以基本上我想显示有关酒店/餐厅/俱乐部/任何东西的信息。我创建了这个布局 XML 文件：.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <ImageView
        android:id="@+id/picture"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:contentDescription="@string/image"
        android:paddingLeft="10dp"
        android:paddingRight="10dp" />

    <TextView
        android:id="@+id/description"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/picture"
        android:paddingBottom="10dp"
        android:textColor="#000000"
        android:textSize="16sp"
        android:textSTyle="bold" />

    <TextView
        android:id="@+id/description_real"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/description"
        android:paddingLeft="10dp"
        android:textColor="#666666"
        android:textSize="14sp" />

     <TextView
        android:id="@+id/openingtimes"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/description_real"
        android:paddingBottom="10dp"
        android:textColor="#000000"
        android:textSize="16sp"
        android:textSTyle="bold" />

    <TextView
        android:id="@+id/openingtimes_real"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/openingtimes"
        android:paddingLeft="10dp"
        android:textColor="#666666"
        android:textSize="14sp" />
     <TextView
        android:id="@+id/prices"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/openingtimes_real"
        android:paddingBottom="10dp"
        android:textColor="#000000"
        android:textSize="16sp"
        android:textSTyle="bold" />

    <TextView
        android:id="@+id/prices_real"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/prices"
        android:paddingLeft="10dp"
        android:textColor="#666666"
        android:textSize="14sp" />
</RelativeLayout> 
```

我不想收到必须从互联网上显示的文本，但想在活动本身中定义它。如何创建此活动，以便可以在 XML 中定义的布局中显示文本？（很简单，没有什么必须是可点击的，只是文本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:58:13.767

看看这个“[构建你的第一个应用程序](http://developer.android.com/training/basics/firstapp/index.html)”教程。这非常简单明了。它具有创建新活动、定义布局和使用资源（如字符串）的所有基础知识。这应该足以实现您所描述的。

# error-handling - ANTLR 语法 - 如何添加成员覆盖错误处理

> ID：14861990
> 
> 赞同：1
> 
> 时间：2013-02-13T19:59:33.330
> 
> 标签：error-handling, antlr, antlr3

我看到答案[如何让 ANTLR 3.2 在第一个错误时退出？](https://stackoverflow.com/questions/2445008/how-to-get-antlr-3-2-to-exit-upon-first-error)这很有帮助。

但是，如果我的语法不正常，我似乎无法添加这些“@”规则。我的语法文件很简单：

```
 grammar Exp;
 options {
 output=AST;

 }

 program 
  : includes decls (procedure)*  main  -> ^(SMALLCPROGRAM includes decls (procedure)*    main) //AST - PROGRAM root
  ;

   //Lexer and Parser rules continue below as normal..tested thoroughly and works 
```

但是，如果我尝试添加这些 @ 规则中的任何一个，我会收到以下错误：

```
grammar file Exp.g has no rules 
```

和：

```
 Exp.g:0:1: syntax error: assign.types: org.antlr.runtime.EarlyExitException

 org\antlr\grammar\v3\DefineGrammarItemsWalker.g: node from line 202:4 required (...)+ loop did not match anything at input ';' 
```

任何人都知道问题是什么？我只是想更改我的语法，以便当我从单独的主类运行它（使用 ANTLRStringStream 等将输入传递给它）时，当出现语法问题时，它实际上会在主类中引发错误，而不仅仅是说类似的话：

```
line 1:57 missing RPAREN at '{' 
```

在继续解析输入的其余部分之前。最终，我的主类应该拒绝解析我的语法定义的任何语法错误的输入，并且应该向用户报告错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T21:06:15.297

您可能对部分/块的顺序不正确。确保它看起来像这样：

```
grammar Exp;

options {
  ...
}

tokens {
  ...
}

@parser::header {
  ...
}

@lexer::header {
  ...
}

@parser::members {

  ...
}

@lexer::members {
  ...
} 
```

我猜你在块之前放置了一个`@member`或`@header`部分`tokens { ... }`。*之后*`tokens { ... }`应该直接来。 *`options { ... }`*

 *我还记得某些 3.x 版本存在空白部分的问题：确保所有部分中至少有一些内容，否则忽略空白部分。*

# java - 反转句子中的字符

> ID：14861995
> 
> 赞同：4
> 
> 时间：2013-02-13T19:59:46.013
> 
> 标签：java, string, char

**我试图在不使用拆分**功能的情况下反转句子中的字符。我真的很接近，但我错过了最后一封信。有人可以指出我正确的方向吗？现在它打印“这是一个新句子”为“sihT si a wen cnetnes”我还包括**if(start == 0)**因为程序会跳过初始空格字符，但我不明白为什么？

```
static String reverseLetters(String sentence)
    StringBuilder reversed = new StringBuilder("");
        int counter = 0;
        int start = 0;
        String word;

        for(int i = 0; i <= sentence.length()-1 ; i++ )
        {
            if(sentence.charAt(i)== ' '|| i == sentence.length()-1 )
            {
                StringBuilder sb = new StringBuilder("");
                sb.append(sentence.substring(start,i));
                if(start == 0)
                {
                start = i;
                word = sb.toString();
                reversed.append(reverseChar(word));
                reversed.append(' ');
                }
                else
                {
                    start = i;
                    word = sb.toString();
                    reversed.append(reverseChar(word));
                }
            }

  return reversed.toString();
        }

static String reverseChar (String word)
{
    StringBuilder b = new StringBuilder("");
    for(int idx = word.length()-1; idx >= 0; idx -- )
    {
        b.append(word.charAt(idx));
    }
    return b.toString();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:11:14.667

*   `start`意味着`wordStart`。当 i 指向空格时，下一个 wordStart 应该指向 i 之后。
*   因此最后一个`i`应该指向最后一个单词char之后，应该是`length()`
*   if-then-else 太宽泛了；在一种情况下必须添加空格： i 指向空格。

可以无条件循环，并且 i == length() 在循环代码中间中断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T20:07:44.313

另外一个选项

```
private String reverse (String originalString) {
    StringBuilder reverseString = new StringBuilder();
    for (int i = originalString.length() - 1; i >= 0; i--) {
        reverseString.append(originalString.charAt(i));
    }
    return reverseString.toString();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-13T20:24:33.733

我认为错误在于索引，`for`应该是

```
 for(int i = 0; i <= sentence.length() ; i++ ) 
```

那么`if`应该是：

`if (sentence.charAt(i==0?0:i-1)== ' '|| i == sentence.length() )`

对我来说，错误是`substring(start,i)`最后一个`i`应该是 sentence.length 而不是 sentence.length-1，所以这可以解决它。

[子字符串](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#substring%28int,%20int%29)在最后一个索引中是打开的，所以如果你放的`substring(1, 10)`是从 1 到 9 的子字符串。这可能是最后一个单词的问题。

第一个空格的问题也是子字符串的问题，假设您正在阅读“this is...”，它会第一次进行子字符串处理`start=0`，`i = 4`因此您期望“this”，但它确实是“this”。下一个读法，with`start=4`和`i=7`will 是“is”。

因此，随着索引的更改，您也应该能够删除 if/else `start==0`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-13T20:25:56.573

```
String reverseString = "This is a new sentence";
System.out.println(new StringBuffer(reverseString).reverse().toString());

Syso prints : ecnetnes wen a si sihT 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T20:14:27.773

放

```
i <= sentence.length() 
```

在您的 for 循环中并将 if 更改为：

```
if(i == sentence.length() || sentence.charAt(i)== ' ') 
```

作为

```
substring(start,i) 
```

返回直到 i 的字符串，不包括在内。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-13T20:37:45.840

```
import java.util.Stack;

public class Class {
    public static void main(String[] args) {
        String input = "This is a sentence";
        char[] charinput = input.toCharArray();
        Stack<String> stack = new Stack<String>();
        for (int i = input.length() - 1; i >= 0; i--) {
            stack.push(String.valueOf(charinput[i]));
        }
        StringBuilder StackPush = new StringBuilder();
        for (int i = 0; i < stack.size(); i++) {
            StackPush.append(stack.get(i));
        }
        System.out.println(StackPush.toString());
    }
} 
```

看不出分裂。

# java - 如何知道套接字发送的对象类型？

> ID：14861997
> 
> 赞同：3
> 
> 时间：2013-02-13T19:59:50.037
> 
> 标签：java, object, stream

我正在使用**Java**。我使用套接字建立连接，并使用`ObjectOutputStream`. 可以发送两种类型的对象，一种是对象，它是**A 类的**实例，另一种是**B 类**的实例。当我在客户端读取 Object 时，如何确定它是**A 类的**实例还是**B**类的实例？

PS：我也可以在客户端访问这些类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T20:01:42.937

最简单的解决方案是在输入上使用`instanceof`运算符：

```
final Object obj = inputStream.readObject();
if(obj instanceof A) {
  final A a = (A)obj;
} else {
  final B a = (B)obj;
} 
```

稍微冗余的解决方案（但避免`instanceof`）是先发送一些类型字节（`0`- `A`，`1`- `B`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T20:04:07.477

要么使用

```
if (object instanceof ClassA) { 
```

或者

```
if (object.getClass() == ClassA.class) { 
```

不同之处在于，当 object 是 ClassA 的子类或实现 ClassA （当它是接口时）时，第一个也是 true，而第二个只有当它恰好是那个类时才为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T20:02:40.710

是的，instanceof 运算符是最好的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T20:05:08.847

或者，使用纯文本形式的序列化并在序列化的有效负载中嵌入类型的名称（或者可能是反序列化策略）。这样，您可以在反序列化之前检查有效负载。

# javascript - IIS：缺少图像、CSS 和脚本

> ID：14861998
> 
> 赞同：1
> 
> 时间：2013-02-13T19:59:50.950
> 
> 标签：javascript, css, image, iis, visual-studio-2012

我使用 IIS 发布我的网站，但出现错误`Cannot read configuration file due to insufficient permissions`。我尝试向 IIS_USRS 添加权限，但我的计算机 (Win7) 没有此用户。我右键单击文件夹 > 安全选项卡 > 编辑 > 高级并进行搜索，但用户不存在。

然后我在 IIS 中编辑了应用程序的基本设置并以特定用户身份连接。它几乎可以正常工作，因为我没有收到错误消息`Cannot read configuration file due to insufficient permissions`。页面显示但没有样式。未加载 CSS、Image 和 javascripst 文件。我尝试通过在 URL 中设置每个路径来浏览图像。这些图像在我能够浏览时存在，但它们不会随页面一起加载。

我打开控制面板 > 程序和特色 > 打开或关闭 owindows 功能 > Internet 信息服务 > 万维网服务 > 常用 http 特色并检查静态内容。但这并没有解决我的问题。

为什么是这样？

请问我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:28:12.910

如果您使用 IIS7 或 7.5：

打开 IIS 管理器 > 选择您的站点 > IIS 面板 > 身份验证 > 匿名身份验证：启用此功能并编辑此设置以确保使用应用程序池标识。

# java - JDBC + MySQL：在 lockwait 或死锁的情况下重试事务

> ID：14861999
> 
> 赞同：1
> 
> 时间：2013-02-13T19:59:54.360
> 
> 标签：java, mysql, jdbc, ibatis, spring-transactions

我希望任何因“死锁”或“锁定等待超时”而失败的事务重试 3 次。

我使用 SpringTransactionManager -> iBatis -> JDBC -> MySQL。

1) 我不能配置 JDBC 或 MySQL ir IBatis 以那样做吗？

2）添加“包装器”的最佳位置是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T15:56:57.623

您可以使用 Spring AOP，如果目标方法抛出异常，您可以指向重试逻辑方法。您仍然需要编写重试方法。