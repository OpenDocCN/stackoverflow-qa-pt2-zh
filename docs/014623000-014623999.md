# StackOverflow 问答 14623000-14623999

# linux - Tizen 支持哪种 BT 堆栈？

> ID：14623000
> 
> 赞同：2
> 
> 时间：2013-01-31T10:00:06.553
> 
> 标签：linux, bluetooth, bluez, tizen

我想知道 Tizen 是否支持 BT，如果支持，它是否使用开源 bluez 协议？

另外，我想知道在 Tizen 中从哪里开始挖掘蓝牙。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T12:26:49.767

Packages in tizen have bluez, checked in package list [https://www.tizen.org/package-list](https://www.tizen.org/package-list) Not sure about the version or other info

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T06:41:43.467

是的，它支持蓝牙，它使用**bluez stack 和 obexd。**

版本：Bluez-4.101、Obexd-0.34

Tizen 蓝牙支持的配置文件有 GAP、SDP、A2DP、AVRCP、HFP、HSP、GATT。

Obexd 配置文件包括 OPP、FTP、PBAP、SYNC、MAP

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-02T10:01:18.060

在 SamsungGear2 上：

```
~/tizen-sdk/tools/sdb shell rpm -qa | grep bluez
bluez-4.101_40-8.1.rinatoxx.armv7l 
```

如果需要，我还可以在 SamsungZ1 或 tizen 相机上进行测试

# java - 字符串变量可以保存等于 10 MB 文本文件的数据吗？

> ID：14623002
> 
> 赞同：0
> 
> 时间：2013-01-31T10:00:08.147
> 
> 标签：java, string

一个字符串是否可以在文本文件中保存大约 250000 行（一个圆形）数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:01:32.743

您应该能够获得长度为[Integer.MAX_VALUE](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#MAX_VALUE)的字符串（根据 Java 规范，数组的最大大小始终为 2147483647 (231 - 1)，String 类用于内部存储）或最大堆大小的一半（因为每个字符是两个字节），以较小者为准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:01:19.473

由于字符串可以容纳的最大大小是[Integer.MAX_VALUE](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#MAX_VALUE)即 2^31-1 个字节，即 2GB-1byte ~ 2GB ，一个字符串可以容纳**1400 个 Kindle 电子书**内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:08:26.917

字符串由 char[] 数组支持，因此它们仅限于数组结构的大小。数组可以包含 Integer.MAX_VALUE 元素，它还取决于您分配给 JVM 的内存量。所以，理论上一个字符串可以超过 20 亿个字符

# javascript - 函数中的jQuery变量范围

> ID：14623006
> 
> 赞同：3
> 
> 时间：2013-01-31T10:00:19.153
> 
> 标签：javascript, jquery

我对 jQuery 有疑问。

我想得到一个真实的宽度/高度`img`。
现在我用这个函数来获取它：

```
var imageSize = function(image) {
    var realImageSize = { };

    $("<img/>") // Make in memory copy of image to avoid css issues
    .attr("src", $(image).attr("src"))
    .load(function() {
        realImageSize.width = this.width;   // Note: $(this).width() will not
        realImageSize.height = this.height; // work for in memory images.

        alert(realImageSize['height']); // Valid height
    });

    alert(realImageSize['height']); // Undefined

    return realImageSize;
} 
```

所以我将图像复制到内存中，然后在`.load`方法中获取并设置图像的实际大小。

现在，问题是由于`var realImageSize`某种原因该变量在此范围内不可用。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T10:02:08.003

这不是范围问题，很好，但同步性问题：您正在执行加载回调之前读取值。

您作为参数提供的回调`load`不会立即执行，而是仅在图像加载后执行。

通常的解决方案是不返回值而是提供回调：

```
var fetchImageSize = function(image, callback) {
    $("<img/>") // Make in memory copy of image to avoid css issues
    .load(function() {
        var realImageSize = { };
        realImageSize.width = this.width;   // Note: $(this).width() will not
        realImageSize.height = this.height; // work for in memory images.
        callback(realImageSize);
    }).attr("src", image.src);
};

fetchImageSize(myImage, function(realImageSize){
    alert(realImageSize['height']); // NOT Undefined
}); 
```

请注意，您应该始终在设置回调*后设置 src。*`onload`某些浏览器，如果您在缓存中有图像，如果您在设置源后设置它，则可能不会调用 onload 回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:12:29.180

这是来自其他语言的 Javascript 程序员的常见问题。Javascript 使用称为异步调用的执行模型。简而言之，当您为`.load()`事件注册一个函数时，该函数的执行将推迟到**图像已加载**时，而函数体的其余部分（即 second `alert()`）立即执行：

```
var imageSize = function(image) {
    //runs now
    var realImageSize = { };

    //runs now
    $("<img/>") // Make in memory copy of image to avoid css issues
    .attr("src", $(image).attr("src"))
    .load(function() {
        //this code can run say 5 sec later
        realImageSize.width = this.width;   // Note: $(this).width() will not
        realImageSize.height = this.height; // work for in memory images.

        alert(realImageSize['height']); // Valid height
    });

    //runs now. The realImageSize variable is yet to be created in 5 sec
    alert(realImageSize['height']); // Undefined

    //runs now
    return realImageSize;
} 
```

解决此类问题的常见模式是将回调传递给需要很长时间的函数。

```
//** Get an image URL and a callback function that will be called when the image is loaded and the size is detected
function imageSize ( src, callback ) {
    $("<img src="' + src + '"/>").load( function () {
        //here we call the callback which will be called when the image is loaded
        callback({
            width: this.width,
            height: this.height
        });
    });
}

imageSize( 'my/image/path.png', function ( imageSize ) {
    //this callback function will be called when the image is loaded
    alert( 'width: ' + imageSize.width + ', height: ' + imageSize.height );
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T10:02:43.820

在加载函数完成之前调用您的第二个警报。使用回调...

尝试这个

```
var imageSize = function(image,callback) {
  var realImageSize = { };

  $("<img/>") // Make in memory copy of image to avoid css issues
  .attr("src", $(image).attr("src"))
  .load(function() {
    realImageSize.width = this.width;   // Note: $(this).width() will not
    realImageSize.height = this.height; // work for in memory images.

    alert(realImageSize['height']); // Valid height
    callback(realImageSize);
  });

}

imageSize(img, function(realImageSize) {
   alert(realImageSize.height);
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T10:07:37.537

使用回调。其他答案正在解释异步的东西，我不会重复:-)

```
var imageSize = function(image, callback) {
.
.
.
    .load(function() {
        realImageSize.width = this.width;   // Note: $(this).width() will not
        realImageSize.height = this.height; // work for in memory images.

        callback(realImageSize);
    }); 
```

然后，您可以像这样调用该函数：

```
imageSize(img, function(size) {
    alert(size.height);
}); 
```

# android - 如何保留片段列表视图内容？

> ID：14623012
> 
> 赞同：1
> 
> 时间：2013-01-31T10:00:49.610
> 
> 标签：android, actionbarsherlock

前言：我使用的是 ActionBarSherlock，Target SDK 是 17（Android 4.2），Min SDK 是 5（Android 2.0）

**情况：**

我的应用程序中有一个片段，它提供了某种登录。它允许用户在设备上拥有多个用户帐户（因为 Android < 4.2 没有系统支持，而我们的用户似乎由于设备共享而使用它）。

片段布局由一个列表视图和一个大景观组成，还有一个添加新帐户的按钮（否则通过可用的溢出菜单）。

listview 附加到一个名为“AccountAdapter”的 BaseAdapter-Derivate，它从数据库中获取帐户并通过 layoutinflater 为每个帐户创建相应的子视图。有 3 种可能性：用户提供了登录名和密码/用户只提供了登录名/用户什么也没提供。因此，对于这些情况，有 3 种不同的布局，其中丢失的数据是通过 EditText-Elements 请求的，而存储的数据是通过 TextView 显示的。此外，缺少数据的布局提供了一个用于存储缺失数据的复选框和一个提交按钮。如果提供了所有数据，则缺少提交按钮的 onclicklistener 将直接附加到帐户根视图。onclicklistener 将输入的数据消息发送到网络代码类并修改适配器模式；之后，适配器只显示选定的条目，

这已经很好了。

**问题：**

在方向更改时，所有输入的数据都会丢失。输入的登录数据、密码、有关是否应存储登录数据的信息。

**布局：**

```
<!-- layout/main.xml -->
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <FrameLayout
        android:id="@id/main_fragment_content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout>

<!-- layout-large-land/main.xml -->
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <FrameLayout
        android:id="@id/main_fragment_sidebar"
        android:layout_width="@dimen/main_sidebar_width"
        android:layout_height="match_parent" />

    <FrameLayout
        android:id="@id/main_fragment_content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout>

<!-- layout/fragment_login.xml -->
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@id/fragment_login_accountlist"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </ListView>

</RelativeLayout>

<!-- layout-large-land/fragment_login.xml -->
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@id/fragment_login_add"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="@string/string_fragment_login" />

    <ListView
        android:id="@id/fragment_login_accountlist"
        android:layout_width="@dimen/fragment_login_accountlist_width"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" >

    </ListView>

</RelativeLayout>

<!-- layout/view_login_account_new.xml -->
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@id/view_login_account_profileimage"
        android:layout_width="@dimen/view_login_account_profileimage_width"
        android:layout_height="@dimen/view_login_account_profileimage_height"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/string_view_login_account_profileimage_contentdescription"
        android:scaleType="fitCenter"
        android:src="@drawable/img_kb" />

    <EditText
        android:id="@id/view_login_account_username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/view_login_account_profileimage"
        android:ems="10"
        android:hint="@string/string_view_login_account_username_hint"
        android:inputType="text" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@id/view_login_account_password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/view_login_account_username"
        android:layout_alignParentRight="true"
        android:layout_below="@id/view_login_account_username"
        android:ems="10"
        android:hint="@string/string_view_login_account_password_hint"
        android:inputType="textPassword" />

    <CheckBox
        android:id="@id/view_login_account_storecredentials"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@id/view_login_account_password"
        android:layout_toRightOf="@id/view_login_account_profileimage"
        android:text="@string/string_view_login_account_storecredentials_text" />

    <Button
        android:id="@id/view_login_account_submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@id/view_login_account_storecredentials"
        android:text="@string/string_view_login_account_submit_text" />

</RelativeLayout>

<!-- layout/view_login_account_progress.xml -->
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@id/view_login_account_profileimage"
        android:layout_width="@dimen/view_login_account_profileimage_width"
        android:layout_height="@dimen/view_login_account_profileimage_height"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/string_view_login_account_profileimage_contentdescription"
        android:scaleType="fitCenter"
        android:src="@drawable/img_kb" />

    <TextView
        android:id="@id/view_login_account_username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/view_login_account_profileimage"
        android:ems="10"
         >
    </TextView>

    <TextView
        android:id="@id/view_login_account_progress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/view_login_account_username"
        android:layout_alignParentRight="true"
        android:layout_below="@id/view_login_account_username"
        android:ems="10"
        android:text="@string/string_view_login_account_progress_text" />

</RelativeLayout>

<!-- layout/view_login_account_stored_password.xml -->
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@id/view_login_account_profileimage"
        android:layout_width="@dimen/view_login_account_profileimage_width"
        android:layout_height="@dimen/view_login_account_profileimage_height"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/string_view_login_account_profileimage_contentdescription"
        android:scaleType="fitCenter"
        android:src="@drawable/img_kb" />

    <TextView
        android:id="@id/view_login_account_username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/view_login_account_profileimage"
        android:ems="10"
         >
    </TextView>

    <TextView
        android:id="@id/view_login_account_password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/view_login_account_username"
        android:layout_alignParentRight="true"
        android:layout_below="@id/view_login_account_username"
        android:ems="10"
        android:text="@string/string_view_login_account_password_text"
         />

</RelativeLayout>

<!-- layout/view_login_account_stored_username.xml -->
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@id/view_login_account_profileimage"
        android:layout_width="@dimen/view_login_account_profileimage_width"
        android:layout_height="@dimen/view_login_account_profileimage_height"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:contentDescription="@string/string_view_login_account_profileimage_contentdescription"
        android:scaleType="fitCenter"
        android:src="@drawable/img_kb" />

    <TextView
        android:id="@id/view_login_account_username"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_toRightOf="@id/view_login_account_profileimage"
        android:ems="10"
        android:hint="@string/string_view_login_account_username_hint" >

        <requestFocus />
    </TextView>

    <EditText
        android:id="@id/view_login_account_password"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@id/view_login_account_username"
        android:layout_alignParentRight="true"
        android:layout_below="@id/view_login_account_username"
        android:ems="10"
        android:hint="@string/string_view_login_account_password_hint"
        android:inputType="textPassword" />

    <CheckBox
        android:id="@id/view_login_account_storecredentials"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@id/view_login_account_password"
        android:layout_toRightOf="@id/view_login_account_profileimage"
        android:text="@string/string_view_login_account_storecredentials_text" />

    <Button
        android:id="@id/view_login_account_submit"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@id/view_login_account_storecredentials"
        android:text="@string/string_view_login_account_submit_text" />

</RelativeLayout> 
```

**代码：**

代码都没有实现 onSaveInstanceState 和 onConfigurationChange。（整个引用会太长恕我直言，> 1.000 行代码）

```
public class MessengerActivity extends SherlockFragmentActivity {

    // -------------------------------------------------------------------------

    FrameLayout fragmentSidebar = null;
    FrameLayout fragmentContent = null;

    Content     content         = null;

    // -------------------------------------------------------------------------

    boolean     hasSidebar      = false;

    // -------------------------------------------------------------------------

    public void onCreate(Bundle savedInstanceState) {

        // ---------------------------------------------------------------------

        super.onCreate(savedInstanceState);

        // ---------------------------------------------------------------------

        content = Content.getInstance(this);

        // ---------------------------------------------------------------------

        setContentView(R.layout.main);

        // ---------------------------------------------------------------------

        captureFragmentViews();

        // ---------------------------------------------------------------------

        // ---------------------------------------------------------------------

        if (savedInstanceState == null) {

            // -----------------------------------------------------------------

            gotoLogin();

            // -----------------------------------------------------------------

        }
        else {

            // -----------------------------------------------------------------

            // -----------------------------------------------------------------

        }

        // ---------------------------------------------------------------------

    }

    // -------------------------------------------------------------------------
    // Disabled through android manifest at the moment

    @Override
    public void onConfigurationChanged(Configuration newConfig) {

        // ---------------------------------------------------------------------

        super.onConfigurationChanged(newConfig);

        // ---------------------------------------------------------------------

        Log.d(getClass().getSimpleName(), "onConfigurationChanged");

        // ---------------------------------------------------------------------

    }

    // -------------------------------------------------------------------------

    public void captureFragmentViews() {

        // ---------------------------------------------------------------------

        fragmentSidebar = (FrameLayout) findViewById(R.id.main_fragment_sidebar);
        fragmentContent = (FrameLayout) findViewById(R.id.main_fragment_content);

        // ---------------------------------------------------------------------

        if ((fragmentSidebar != null) && (fragmentContent != null)) {

            hasSidebar = true;

        }
        else {

            hasSidebar = false;

        }

        // ---------------------------------------------------------------------

    }

    // -------------------------------------------------------------------------

    public void gotoLogin() {

        // ---------------------------------------------------------------------

        Fragment fragment = SherlockFragment.instantiate(this,
                LoginFragment.class.getName());

        // ---------------------------------------------------------------------

        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();

        if (hasSidebar) {

            ft.add(R.id.main_fragment_content, fragment);
            fragmentSidebar.setVisibility(View.GONE);

        }
        else {

            ft.add(R.id.main_fragment_content, fragment);

        }

        // ---------------------------------------------------------------------

        ft.commit();
        getSupportFragmentManager().executePendingTransactions();

        // ---------------------------------------------------------------------

    }

    // -------------------------------------------------------------------------

    public void gotoSignup() {
        // TODO Auto-generated method stub

    }

    // -------------------------------------------------------------------------

    public void gotoContactList(int filterId) {
        // TODO Auto-generated method stub

    }

    // -------------------------------------------------------------------------

    public void gotoConversation(int userId) {
        // TODO Auto-generated method stub

    }

    // -------------------------------------------------------------------------

    public void gotoOnlineStatusList(int categoryId) {
        // TODO Auto-generated method stub

    }

    // -------------------------------------------------------------------------

    public void gotoSettings(int categoryId) {
        // TODO Auto-generated method stub

    }

    // -------------------------------------------------------------------------

} 
```

我检查是否在主活动中设置了 savedInstanceState，所以我的活动已经在片段重新创建方面“准备好了”。

Fragment 在创建适配器并将其附加到列表视图之前检查适配器是否已经存在。但是：据我了解，即使“重新创建的”片段使用相同的适配器，“默认情况下”所有 getViews() 都会被调用，因此会创建一个具有“重置”内容的视图的新实例。

AccountAdapter 从数据库中获取具有用户 ID、用户名、密码的专用“帐户”对象。此外，“帐户”可以扩展以保存其他数据，例如缓存视图。

我的想法是实现这样的getView：

```
 @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        // ---------------------------------------------------------------------

        final Account account = (Account) getItem(position);
        View view = null;

        // ---------------------------------------------------------------------

        if (account == null) {

            return view;

        }

        // ---------------------------------------------------------------------

        if (account.view != null) {

            return account.view;

        }

        // ---------------------------------------------------------------------
    [...]
    } 
```

但后来我注意到，AccountAdapter 没有在游戏中幸存下来，Android 重新实例化了 LoginFragment 类。

**我需要的：**

*   如何从列表视图内容公式中恢复数据/如何保留 AccountAdapter 及其关联视图
*   关于如何优化和改进我的建筑设计的提示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:26:39.553

`Fragment`如果每次调用 get`onCreate()`方法时都添加 a ，则从您的代码中不清楚`Activity`。

只有在第一次创建 get时，您才应该添加 a`Fragment`或first 。`Fragment``Activity`

```
if(savedInstanceState==null){
     addFragment();
} 
```

如果这不是`null`您`Activity`重新创建的，它还将重新添加您以前的`Fragments`. 埃文，如果你有更多`Fragments`的东西，`backstack`它们都会被放回你的`Activity`.

要将数据保留在您的片段中，您应该`setRetainInstance(true);`在您的`Fragments` `onCreate()`方法上使用，或者使用`onSaveInstanceState(Bundle bundle)`来保存特定数据。

# tfs - 从 CVS 迁移到 Team Foundation Server (TFS) 2012

> ID：14623016
> 
> 赞同：1
> 
> 时间：2013-01-31T10:01:06.290
> 
> 标签：tfs

是否有任何工具或方法可用于将代码、历史记录、标签从 CVS 迁移到 TFS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:05:26.267

Timely Migration 提供了一个[用于将 CVS 历史记录移动](http://www.timelymigration.com/)到 Team Foundation Server 的工具。我已经使用了这些工具（虽然没有使用 CVS）并且它们工作得很好。

与 CS-Convertor 不同的是，它没有每个文件的许可，这很棒，您可以随意使用它多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:30:29.320

您是否尝试过使用[CS-Converter](http://www.componentsoftware.com/Products/converter/index.htm)，它的转换工具，用于从各种旧版本控制系统（如 RCS、CVS、Subversion 和 Visual SourceSafe）迁移到 Microsoft Team Foundation 版本控制（TFVC）系统。

更多信息：

[将 CVS 和 Subversion 存储库迁移到 Team Foundation Server](http://blogs.msdn.com/b/buckh/archive/2006/01/11/migrating-cvs-and-subversion-repositories-to-team-foundation-server.aspx)

# c# - 从不同的线程调用方法 AutoResetEvent 是否安全？

> ID：14623025
> 
> 赞同：2
> 
> 时间：2013-01-31T10:01:30.813
> 
> 标签：c#, multithreading, autoresetevent

从不同的线程调用方法 AutoResetEvent 是否安全？或者我应该避免从不同线程调用对象？

```
class Test 
{
    EventWaitHandle wh = new AutoResetEvent(false);
    Thread worker = new(Work);

    public Test
    {
        worker.Start();
    }

    public void StopSignal()
    {
        wh.Set(); //<-- Main thread Call
    }

    void Work() 
    {
        wh.WaitOne(); //<-- Child thread call
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T12:53:41.477

是的，从不同的线程调用方法 AutoResetEvent 是安全的。看看这个[链接](http://www.codeproject.com/Articles/39040/Auto-and-Manual-Reset-Events-Revisited)。我希望这能让你清楚。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T10:04:01.317

没关系 - 这就是它的用途！

有关详细信息，请参阅[此 MSDN](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent%28v=vs.95%29.aspx)文章。MSDN 上的大多数类在底部附近都有一个名为“线程安全”的部分，因此如果您不确定将来是否有任何其他类是线程安全的，您可以在那里查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:08:25.800

AutoResetEvent 和ManualResetEvent 的全部意义在于提供不同线程之间的同步！

有关详细信息，请参阅[本文](http://msdn.microsoft.com/en-gb/library/system.threading.manualresetevent%28v=vs.80%29.aspx)。

# android - facebook android sdk 身份验证错误

> ID：14623026
> 
> 赞同：0
> 
> 时间：2013-01-31T10:01:32.137
> 
> 标签：android, xml, facebook

我询问 facebook android sdk 身份验证错误。

当我运行程序时，出现错误“已意外停止。请重试。”

调试错误是关于 NullPointerException 问题。(facebook-android-sdk/facebook/src/com/facebook/internal/Validate.java)

我怎么解决这个问题？谢谢。

```
package com.example.fbloginau;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;

public class MainFragment extends FragmentActivity 
{

private Fragment Fragment;

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    if (savedInstanceState == null) {
        // Add the fragment on initial activity setup
        Fragment = new Fragment();
        getSupportFragmentManager()
        .beginTransaction()
        .add(android.R.id.content, Fragment)
        .commit();
    } 
    else 
    {
        // Or set the fragment from restored state info
        Fragment = (Fragment) getSupportFragmentManager()
        .findFragmentById(android.R.id.content);
    }
}
 } 
```

> 块引用

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical">

<com.facebook.widget.LoginButton
    android:id="@+id/authButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="30dp"
    /> 
```

> 块引用

```
enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:09:05.097

您可以使用 social auth sdk 进行 android facebook 集成，您可以在此处找到代码：

[http://code.google.com/p/socialauth-android/downloads/list](http://code.google.com/p/socialauth-android/downloads/list)

[http://www.codeproject.com/Tips/457153/How-to-integrate-Facebook-Twitter-Linkedin-in-Andr](http://www.codeproject.com/Tips/457153/How-to-integrate-Facebook-Twitter-Linkedin-in-Andr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:09:32.740

您可以尝试通过一些网络服务获取访问令牌并进行初始化。您可以在活动中授权您的会话并通过活页夹传递它。脸书脸书

这里的例子。

```
public class ClientService extends Service {

    //Facebook object to operate from service
    private Facebook facebook;

...

    private final ClientBinder clientBinter = new ClientBinder();

    /** Binder to service */
    public class ClientBinder extends Binder {

        public ClientService getService() {
            return ClientService.this;
        }
    }

    @Override
    public IBinder onBind(Intent intent) {
        return clientBinter;
    }

    public void setFacebook(Facebook f) {
        ClientService.this.facebook = f;
    }

    public boolean loggedFacebook() {
        if (facebook == null)
            return false;
        return facebook.isSessionValid();
    }

}

public class DemoActivity extends Activity{

        private ClientService clientService;
        private ServiceConnection clientConnection = new ServiceConnection() {

            public void onServiceDisconnected(ComponentName name) {
                mBound = false;
            }

            public void onServiceConnected(ComponentName name, IBinder service) {
                ClientService.ClientBinder binder = (ClientService.ClientBinder) service;
                clientService = binder.getService();
                mBound = true;
                if (facebook != null)
                    if (facebook.isSessionValid())
                        clientService.setFacebook(facebook);
            }
        };

    @Override
    protected void onStart() {
        super.onStart();
        Intent intent = new Intent(this, ClientService.class);
        bindService(intent, clientConnection, Context.BIND_AUTO_CREATE);
    }

    @Override
    protected void onStop() {
        super.onStop();
        if (mBound) {
            unbindService(clientConnection);
            mBound = false;
        }

    }

      private void logINFacebook() {
                if (facebook.isSessionValid())
                    return;

                facebook.authorize(this,
                        getResources().getStringArray(R.array.facebookPermissions),
                        new DialogListener() {
                            public void onFacebookError(FacebookError e) {...}

                            public void onError(DialogError e) {...}

                            public void onComplete(Bundle values) {
                                if (mBound) {
                                    clientService.setFacebook(facebook);
                                }

                                //Save to shared preferences(optional)
                                SharedPreferences.Editor editor = prefs.edit();
                                editor.putString(FACEBOOK_TOKEN_PREFNAME,
                                        facebook.getAccessToken());
                                editor.putLong(FACEBOOK_EXPIRES_PREFNAME,
                                        facebook.getAccessExpires());
                                editor.commit();
                            }

        @Override
        public void onActivityResult(int requestCode, int resultCode, Intent data) {
            facebook.authorizeCallback(requestCode, resultCode, data);
            super.onActivityResult(requestCode, resultCode, data);
        }

        } 
```

# objective-c - UINavigationController Backbutton 在 iOS 6.1 中消失了

> ID：14623029
> 
> 赞同：1
> 
> 时间：2013-01-31T10:01:40.487
> 
> 标签：objective-c, uinavigationcontroller, uinavigationitem

我昨天升级到xCode（4.6版（4H127）），突然我的一个UIViewController在按下时没有显示它的后退按钮。

后退按钮**出现**在 iPad 模拟器 ( **6.0** ) 中。iPad 模拟器**6.1中没有返回按钮**

任何想法为什么？

我在 viewDidload 中没有做任何奇怪的事情。

//这就是我推送 TableViewController 的方式。

```
[[self navigationController] pushViewController:controller
                                           animated:YES]; 
```

**更新** Okej，所以 iOS 6.1 对没有命名 RootViewController 更加紧张。向我的 RootController 添加标题有帮助。

# mysql - mysql替换功能无法按预期工作

> ID：14623031
> 
> 赞同：1
> 
> 时间：2013-01-31T10:01:46.957
> 
> 标签：mysql, replace

以下 count(*) 查询返回 4181：-

`SELECT COUNT(*) FROM kirball_typed WHERE batt = 'III' AND roll LIKE '%/ctr'`

但是，当我运行以下更新查询时，我得到“0 行受影响”：-

`UPDATE kirball_typed SET roll = REPLACE(roll, '/ctr', ' ') WHERE batt = 'III' AND roll LIKE '%/ctr'`

如果行与 where 子句匹配，我希望更新查询仅执行字符串替换，因此我希望看到“4181 行受影响”

这里发生了什么？我如何达到预期的效果？

# android - ActionbarSherlock：想要删除 MenuItems 之间的分隔线

> ID：14623035
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:02:11.170
> 
> 标签：android, actionbarsherlock, menuitem, divider

我在我的项目中使用 ActionBarSherlock。菜单项之间有分隔线。我想隐藏它们。我应该使用一些自定义样式来实现这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:35:37.777

用这个

```
 <style name="Theme.Example" parent="Theme.Sherlock">
        <item name="actionBarDivider">@drawable/small_detail_divider</item>
        ....
        <item name="android:actionBarDivider">@drawable/small_detail_divider</item>
        ...
    </style> 
```

在你的styles.xml

从这里：[https ://stackoverflow.com/a/11449888/1231245](https://stackoverflow.com/a/11449888/1231245)

# php - 如何将 echo 与 html 块一起使用

> ID：14623040
> 
> 赞同：0
> 
> 时间：2013-01-31T10:02:31.277
> 
> 标签：php

我想在 php 中的 echo 中使用此代码。

```
 <div id="ib-main-wrapper" class="ib-main-wrapper">
 <div class="ib-main">
 <a href="#">
 <img src="images/upload/Desert.jpg" data-largesrc="images/upload/Desert.jpg"  
 alt="image01"/><span>Crabbed Age and Youth</span></a> 
```

请建议

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T10:05:01.473

利用[`heredoc`](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

```
echo <<<EOT
 <div id="ib-main-wrapper" class="ib-main-wrapper">
 <div class="ib-main">
 <a href="#">
 <img src="images/upload/Desert.jpg" data-largesrc="images/upload/Desert.jpg"  
 alt="image01"/><span>Crabbed Age and Youth</span></a>
EOT; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:04:34.333

这很简单。试试下面的代码

```
echo '<div id="ib-main-wrapper" class="ib-main-wrapper">
                <div class="ib-main">
 <a href="#"><img src="images/upload/Desert.jpg" data-largesrc="images/upload/Desert.jpg" alt="image01"/><span>Crabbed Age and Youth</span></a>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:08:39.830

heredoc 的替代方法是使用[输出缓冲区](http://php.net/manual/en/book.outcontrol.php)。

它们以下列方式工作：

```
ob_start(); ?>
 <div id="ib-main-wrapper" class="ib-main-wrapper">
     <div class="ib-main">
         <a href="#">
             <img src="images/upload/Desert.jpg" data-largesrc="images/upload/Desert.jpg" alt="image01"/><span>Crabbed Age and Youth</span>
         </a>

    <?php
$result = ob_get_clean();
// you now have the full html in $result, and you can echo it
echo ob_get_clean();
// or just echo it 
```

heredoc 有一个优势 - 您可以在其中使用任何 PHP 代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T10:10:12.433

不知道我明白你的意思，但有两种方法可以做到：

```
<?php echo '<div id="ib-main-wrapper" class="ib-main-wrapper">
<div class="ib-main">
<a href="#"><img src="images/upload/Desert.jpg" data-largesrc="images/upload/Desert.jpg" alt="image01"/><span>Crabbed Age and Youth</span></a>'; ?> 
```

甚至更好：

```
<?php
//Insert more PHP code
?>
<div id="ib-main-wrapper" class="ib-main-wrapper">
<div class="ib-main">
<a href="#"><img src="images/upload/Desert.jpg" data-largesrc="images/upload/Desert.jpg" alt="image01"/><span>Crabbed Age and Youth</span></a>
<?php
//Even more PHP code
?> 
```

第二个使在带有语法突出显示的编辑器中更容易阅读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T10:05:00.740

```
echo '<div id="ib-main-wrapper" class="ib-main-wrapper">
 <div class="ib-main">
 <a href="#">
 <img src="images/upload/Desert.jpg" data-largesrc="images/upload/Desert.jpg"  
 alt="image01"/><span>Crabbed Age and Youth</span></a>'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T10:06:12.033

```
<?php

$str = <<<EOL
<div id="ib-main-wrapper" class="ib-main-wrapper">
                <div class="ib-main">
 <a href="#"><img src="images/upload/Desert.jpg" data-largesrc="images/upload/Desert.jpg" alt="image01"/><span>Crabbed Age and Youth</span></a>
EOL;

echo $str; 
```

# android - Android ndk 构建的共享库导致 java.lang.UnsatisfiedLinkError

> ID：14623043
> 
> 赞同：1
> 
> 时间：2013-01-31T10:02:38.997
> 
> 标签：android, android-ndk

**概要：** 该库（称为 myEngine.so）使用 jni 来包装本机 c/c++ 代码并为 Java 本机方法提供接口。`ndk-build`我目前使用android ndk 的脚本构建它。

根据 dalvikvm 日志，加载`System.loadLibrary( "myEngine" );`运行良好，`java.lang.UnsatisfiedLinkError`异常带有以下类型的消息：`No implementation found for native LFoo;.myfunc()V`.

**问题：** 正如他们[在此常见问题解答](http://developer.android.com/training/articles/perf-jni.html#faq_ULE)中建议的那样，我检查了`nm myEngine.so`输出，它说“没有符号”。这对我来说看起来很奇怪，因为我已经检查了所有 jni 代码的`JNIEXPORT`限定符，这没关系。但是，`readelf -Ws myEngine.so`给了我正确的（？）符号表，该函数的名称未损坏，如下所示：

```
 Symbol table .dynsym contains 3237 entries:

 Num:    Value  Size Type    Bind   Vis      Ndx Name

 0: 00000000     0 NOTYPE  LOCAL  DEFAULT  UND 
 1: 0003c0d0     0 SECTION LOCAL  DEFAULT    7 
 2: 0027e078     0 SECTION LOCAL  DEFAULT   12
 ...
 56: 0003d3c9    36 FUNC    GLOBAL DEFAULT    7 Java_Foo_myfunc
 ... 
```

可能是什么问题，我该如何避免这个异常？

谢谢是提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T02:43:57.640

对我来说似乎是一个错字 - 请注意错误消息是关于找不到“LFoo”而你的函数是“Java_Foo_myfunc”。如果你的包名有 LFoo，你需要调用你的函数“Java_LFoo_myfunc”。

# python - 在 Django admin 中如何制作 manytomany'element显示更多选项我使用django admin管理电影和发行公司，但是当我编辑电影内容时，我发现许多领域公司选择只显示4家公司，我想让选择元素显示更多元素，怎么做我更改了管理源代码。我的表格如下： class Movie(models.Model): title = models.CharField('影片名称', max_length=100) 昵称 = models.CharField('昵称', max_len

ID：14623044

赞同：0

时间：2013-01-31T10:02:42.127

标签：python, django-admin

# codeigniter - site_url() 在 codeigniter 框架中无法正常工作

> ID：14623050
> 
> 赞同：1
> 
> 时间：2013-01-31T10:02:50.297
> 
> 标签：codeigniter

以下代码不适用于 Codeigniter 框架...

这是我的观点：

```
<?php
    echo '<h2>'.$news_item['title'].'</h2>';
    echo $news_item['text']."</br></br>";
?>
<a href="<?php site_url("news"); ?>" > Back to Main </a></br></br> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T10:04:23.587

你应该已经在你的控制器构造方法或调用你的视图的函数中加载了 url_helper，`$this->load->helper('url')`然后在你的视图中你应该回显`site_url()`

```
<a href="<?php echo site_url("news"); ?>" > Back to Main </a></br></br>` 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T10:15:04.013

你有没有加载 url helper

您是否在配置文件中指定了 site_url... -> 返回您的站点 URL，如您的配置文件中指定的那样。index.php 文件（或您在配置文件中设置为站点 index_page 的任何内容）将添加到 URL，您传递给函数的任何 URI 段以及配置文件中设置的 url_suffix 也将添加到 URL。

如果不起作用，请尝试使用 base_url

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-12T08:43:12.240

尝试基本网址

```
 <a href="<?=base_url("news")?>" > Back to Main </a> 
```

基本网址返回没有任何进一步的页面

另请参阅：[https ://stackoverflow.com/a/17079745/7817622](https://stackoverflow.com/a/17079745/7817622)

# mongodb - MongoDB 排序、计数、查询问题。需要逻辑帮助

> ID：14623054
> 
> 赞同：0
> 
> 时间：2013-01-31T10:03:08.523
> 
> 标签：mongodb, mapreduce, nosql

我正在尝试用 MongoDB 实现一些已被证明相当困难的事情。

我有 2 个收藏。一个称为“标记”，另一个称为“路线”，保存用户在标记之间创建的路线。路由集合有两个重要字段：[start_marker] 和 [end_marker]。这些字段是标记集合中标记的 _id。

浏览地图时，应用程序对标记集合进行地理空间框查询，以在地图上查找和显示标记。

当用户单击标记时，气泡会显示标记名称。

在名称下方还有一个我遇到问题的动态字段。该字段应该显示：

*   从地图上的选定标记驱动到哪些标记
*   这些标记被驱动了多少次
*   只有 3 个最常被驱动的标记将显示在动态字段中

由于我的记录集合记录了 [start_marker] 和 [end_marker] _id，因此我在记录集合中查询 [start_marker] 字段中所选标记的 _id。

这会产生数百个文档，其中所选标记始终位于 [start_marker] 字段中。现在，我想对出现次数最多的 [end_markers] 进行排序，计算它们出现的次数，选择前 3 个，获取它们的 _id 并与它们一起查询标记集合以提取标记名称。

问题是，count 需要我知道要按哪个结束标记字段进行计数，这反过来又需要我知道它发生的频率。捕获 22。

最终气泡结果如下所示：

**城市 1**

城市 16 - 256 次

城市 21 - 118 次

城市 4 - 88 次

我愿意更改数据库结构，因为 Mongo 是无模式的，可能会在某处添加一个计数字段，但此刻我完全不知所措。此查询每秒会发生几百次，因此 map reduce 可能会对数据库性能产生负面影响。一些输入将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:35:53.300

我相信我找到了一个足够简单的答案。

1.  创建另一个名为“路由”的集合。
2.  添加 3 个字段：[start_city]、[end_city]、[count]。
3.  当用户在“records”集合中创建一个文档时，也在“routes”集合中创建一个文档。
4.  将 1 添加到 [count] 字段。
5.  每次在同一条路线上保存一条新记录时，将“路线”集合中的计数再增加 1。
6.  查看地图标记时，请在“路线”集合中查询 [start_marker] 集合中的 marker_id。按计数排序，将结果限制为 3。

# parsing - ANTLR 4：语法错误和“输入时没有可行的替代方案”

> ID：14623058
> 
> 赞同：1
> 
> 时间：2013-01-31T10:03:28.340
> 
> 标签：parsing, antlr, grammar, token, antlr4

我正在使用这样的ANTLR 4：

```
import org.antlr.v4.runtime.ANTLRInputStream;
import org.antlr.v4.runtime.CharStream;
import org.antlr.v4.runtime.CommonTokenStream;
import org.antlr.v4.runtime.TokenStream;

public class Builder
{
    public static void main(String[] args)
    {
        CharStream input = new ANTLRInputStream("ON M1==2 && M3 == 5 && (M2 > 1 || M5 <= 5.0) "
                                              + "DO P5:42 P4:10");
        ExprLexer lexer = new ExprLexer(input);
        TokenStream tokens = new CommonTokenStream(lexer);
        ExprParser parser = new ExprParser(tokens);
        ExprParser.ExpressionContext uu = parser.expression();
        for (int i = 0; i < uu.getChildCount(); ++i)
            System.out.println(uu.getChild(i));
    }
} 
```

以及以下语法：

```
grammar Expr;
options
{
  // antlr will generate java lexer and parser
  language = Java;

}
WS      : [ \t\r\n]+ -> skip ;
OP      : '&&' | '||';
COMP    : '==' | '<' | '>' | '<=' | '>=' | '!=';
INT     : [0-9]+;
REAL    : INT '.' INT | INT;

ACTION  : 'P' INT ':' INT;
MEASURE : 'M' INT;

// ***************** parser rules:
cond       : MEASURE COMP REAL;
condexpr   : '(' condexpr ')' | cond OP condexpr | cond;
actionexpr : ACTION actionexpr | ACTION;
expression : 'ON' condexpr 'DO' actionexpr; 
```

我有以下输出：

```
line 1:7 no viable alternative at input 'M1==2'
ON
[29]
DO
[31] 
```

我认为我的语法有错误，但我没有看到。你有想法吗？

为了您的帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T14:30:10.880

你的`INT`规则应该是`fragment`规则。照原样，表达式`M1==2`被标记为 [MEASURE, COMP, INT] 而不是您期望的 [MEASURE, COMP, REAL]。

```
fragment INT : [0-9]+; 
```

# ios - 可以在本机 FB 应用程序中运行自定义应用程序吗？

> ID：14623062
> 
> 赞同：0
> 
> 时间：2013-01-31T10:03:49.870
> 
> 标签：ios, facebook, mobile

我们正在为客户开发 Facebook 应用程序。主要用于网络，但斯堪的纳维亚的大多数用户通过手机访问 FB。传统观点似乎表明自定义 Facebook 应用程序不能在移动设备上的本机 FB 应用程序中运行。这仍然是真的吗？

澄清一下：我说的是在页面选项卡下找到的 Facebook 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:27:23.233

您可以为移动用户制作单独的应用程序以及将用户转发到移动应用程序的两种方式

1.使用facebook应用设置并添加移动应用设置

2.当用户进入主页跟踪用户来自移动设备或网络时，如果来自移动设备，则将其转发到移动应用程序

# java - 如何避免多线程程序因线程等待而阻塞

> ID：14623064
> 
> 赞同：0
> 
> 时间：2013-01-31T10:03:55.800
> 
> 标签：java, blocked-threads

我有一个模块，可以处理数千个要处理的事务。每笔交易都有多个阶段要经历。该模块以多线程模式执行。我们已经为它可以创建的线程数定义了限制（硬编码）（根据服务器利用率进行限制）。

现在我们遇到了一种情况，线程可能需要等待一段时间（可能超过 24 小时）。由于我们的线程数量有限，并且如果所有线程都等待超过 24 小时，这将完全阻塞应用程序。

我在这里需要的是，我应该如何重用等待等待 24 小时的线程。如果线程处于等待模式，我需要将该线程重用于另一个事务，当原始等待结束时，从它被搁置的位置重新启动原始事务。

我希望上面的描述能帮助你理解问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:14:42.563

如果你的系统有很长的延迟，最好的办法是拥有更多的线程。如果您想限制并发运行的线程数，您可以使用许可，例如信号量，它在您有阻塞操作时释放，并在阻塞完成时重新获取。这可确保您一次运行的线程数量有限，但允许您轻松地在多个任务之间切换。

```
public abstract class LimitedTask implements Runnable {
    static final Semaphore PERMITS = new Semaphore(Runtime.getRuntime().availableProcessors());

    @Override
    public final void run() {
        try {
            PERMITS.acquire();
        } catch (InterruptedException e) {
            System.err.println("Task " + getClass() + " cancelled before it was started.");
            return;
        }
        try {
            runTask();
        } finally {
            PERMITS.release();
        }
    }

    protected abstract void runTask();

    protected void runBlockingTask(Runnable runnable) {
        PERMITS.release();
        try {
            runnable.run();
        } finally {
            PERMITS.acquireUninterruptibly();
        }
    }
} 
```

在此示例中，您可以拥有任意数量的这些，但只有有限的数量会在 PERMIT 区域内。这些任务还可以调用 runBlockingTask() 以允许它执行阻塞任务，但允许另一个线程在它阻塞时运行。

# c# - 使用 openxml 创建折线图

> ID：14623070
> 
> 赞同：6
> 
> 时间：2013-01-31T10:04:07.527
> 
> 标签：c#, .net, charts, openxml, linechart

我正在尝试在 excel 工作表上创建一个新的 LineChart，但我不知道如何感受该图表上的数据以及如何为每个系列添加值。以下是我尝试做的事情：

```
 static void Main(string[] args)
    {
        string docName = @"myFile.xlsx";
        string worksheetName = "Sheet1";
        string title = "My Chart";
        InsertChartInSpreadsheet(docName, worksheetName, title);
    }

    private static void InsertChartInSpreadsheet(string docName, string worksheetName, string title)
    {

    // Open Document for editing
        using (SpreadsheetDocument document = SpreadsheetDocument.Open(docName, true))
        {
            IEnumerable<Sheet> sheets = document.WorkbookPart.Workbook.Descendants<Sheet>().
    Where(s => s.Name == worksheetName);
            if (sheets.Count() == 0)
            {
                // The specified worksheet does not exist.
                return;
            }

            WorksheetPart worksheetPart = (WorksheetPart)document.WorkbookPart.GetPartById(sheets.First().Id);

            // Add a new drawing to the worksheet.
            DrawingsPart drawingsPart = worksheetPart.AddNewPart<DrawingsPart>();
            worksheetPart.Worksheet.Append(new DocumentFormat.OpenXml.Spreadsheet.Drawing() { Id = worksheetPart.GetIdOfPart(drawingsPart) });
            worksheetPart.Worksheet.Save();

            // Add a new chart and set the chart language to English-US.
            ChartPart chartPart = drawingsPart.AddNewPart<ChartPart>();
            chartPart.ChartSpace = new ChartSpace();
            chartPart.ChartSpace.Append(new EditingLanguage() { Val = new StringValue("en-US") });
            DocumentFormat.OpenXml.Drawing.Charts.Chart chart = chartPart.ChartSpace.AppendChild<DocumentFormat.OpenXml.Drawing.Charts.Chart>(
                new DocumentFormat.OpenXml.Drawing.Charts.Chart());

            // Create a new clustered column chart.
            PlotArea plotArea = chart.AppendChild<PlotArea>(new PlotArea());
            Layout layout = plotArea.AppendChild<Layout>(new Layout());
            uint i = 0;
            LineChart lineChart = plotArea.AppendChild<LineChart>(new LineChart());
            LineChartSeries[] series = new LineChartSeries() {} ;
            uint j ; 
            // add series to the lineChart
            for (LineChartSeries s in series) {
                s = lineChart.AppendChild<LineChartSeries>(new LineChartSeries());
                s.SeriesText = new SeriesText(new NumericValue() { Text = "Ser "+j } );
                series1.Index = new Index() { Val = new UInt32Value(j) };
                series1.Order = new Order() { Val = new UInt32Value(j) } ;
                j++;
            }
            i = 1;

            /***
            Here is my question , how can i add values to my chart
            Example data: 
                    Ser1    Ser2    Ser3    Ser4
            2010    5       6       12      41
            2011    65      1       31      43
            2012    75      8       64      40
            2013    12      31      47      66
            ***/

            // Save the chart part.
            chartPart.ChartSpace.Save();
            /* Here i'll add the position of the chart on the worksheet */ 
            // Save the WorksheetDrawing object.
            drawingsPart.WorksheetDrawing.Save();
        }
    } 
```

在上面的代码中，我举了一个我想在图表上感受的数据示例：

```
 Ser1    Ser2    Ser3    Ser4
            2010    5       6       12      41
            2011    65      1       31      43
            2012    75      8       64      40
            2013    12      31      47      66 
```

我是 C# 和 OpenXml 的初学者，请帮助我:-) 谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T14:20:47.603

[经过数小时的搜索，我终于通过使用电子表格](http://spreadsheetlight.com/)库找到了解决此问题的方法，该库与我想要的不同，但最后我得到了我希望的结果。SpreadSheetLight，帮助我轻松地从 DataTable 创建图表，然后我使用以下函数将图表从 excel 文件复制到新的 powerpoint 文件：

```
 public CopyChartFromXlsx2Pptx(string SourceFile, string TargetFile, string targetppt)
    {

        ChartPart chartPart;

        ChartPart newChartPart;

        //SlidePart slidepartbkMark = null;

        string chartPartIdBookMark = null;

        File.Copy(TargetFile, targetppt, true);

        //Powerpoint document

        using (OpenXmlPkg.PresentationDocument pptPackage = OpenXmlPkg.PresentationDocument.Open(targetppt, true))
        {

            OpenXmlPkg.PresentationPart presentationPart = pptPackage.PresentationPart;

            var secondSlidePart = pptPackage.PresentationPart.SlideParts.Skip(0).First();  // this will retrieve your second slide

            chartPart = secondSlidePart.ChartParts.First();

            chartPartIdBookMark = secondSlidePart.GetIdOfPart(chartPart);

            //Console.WriteLine("ID:"+chartPartIdBookMark.ToString());

            secondSlidePart.DeletePart(chartPart);

            secondSlidePart.Slide.Save();

            newChartPart = secondSlidePart.AddNewPart<ChartPart>(chartPartIdBookMark);

            ChartPart saveXlsChart = null;

            using (SpreadsheetDocument xlsDocument = SpreadsheetDocument.Open(SourceFile.ToString(), true))
            {

                WorkbookPart xlsbookpart = xlsDocument.WorkbookPart;

                foreach (var worksheetPart in xlsDocument.WorkbookPart.WorksheetParts)
                {

                    if (worksheetPart.DrawingsPart != null)

                        if (worksheetPart.DrawingsPart.ChartParts.Any())
                        {
                            saveXlsChart = worksheetPart.DrawingsPart.ChartParts.First();
                        }

                }

                newChartPart.FeedData(saveXlsChart.GetStream());
                //newChartPart.FeedData(
                secondSlidePart.Slide.Save();

                xlsDocument.Close();

                pptPackage.Close();

            }

        }
    } 
```

在我可以删除生成的excel文件之后:-)

我希望这个解决方案可以帮助你！

# apache-flex - 如何在 Flex 3 中右对齐工具提示文本

> ID：14623072
> 
> 赞同：0
> 
> 时间：2013-01-31T10:04:13.753
> 
> 标签：apache-flex, flex3, alignment, tooltip

我在表格中有一个下拉列表（作为自定义渲染器）。由于屏幕上存在一些空间限制，某些选项太长而无法在表格或下拉列表中显示。然而，我们确实有一个显示全文的工具提示。

问题是这是表中的最后一列，并且用户的 PC 也有一些分辨率限制。现在工具提示显示，其中一部分在用户监视器上被切断。

现在我可以去调整工具提示的 X 位置（-150）。

```
private function createToolTip(event:ListEvent):void {          
    tip = ToolTipManager.createToolTip("THE TEXT", this.parentApplication.mouseX - 150, this.parentApplication.mouseY) as ToolTip;                  
} 
```

现在这可以按预期工作，但如果文本很短，它会在中间显示。

所以我在工具提示中添加了一个宽度（200）

```
private function createToolTip(event:ListEvent):void {          
     tip = ToolTipManager.createToolTip("THE TEXT", this.parentApplication.mouseX - 150, this.parentApplication.mouseY) as ToolTip;
     tip.width = 200;                   
} 
```

现在这显示正常，文本至少显示在下拉列表旁边。

但问题是，只要将超过 200 的文本存储在数据库中，它就不会显示全文。

有谁知道如何让工具提示右对齐而不是左对齐。这样，无论文本有多长，它都会显示在左侧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:25:52.393

这是一个解决方案，它实现了右对齐的单行和多行工具提示。

![在此处输入图像描述](../Images/6b7b7acb22dccb7a3ec436117f6f9db8.png)

为此，您应该执行两个步骤：创建您自己的 Tooltip 类并让 TooltipManager 使用它。

//工具提示.as

```
package com.tooltip
{
import flash.text.TextFieldAutoSize;
import flash.text.TextFormat;
import flash.text.TextFormatAlign;
import mx.controls.ToolTip;

public class MyToolTip extends ToolTip
{
    public var align:String = "left"; //left or right

    public function MyToolTip()
    {
        super();
    }

    override protected function commitProperties():void
    {
        super.commitProperties();
    }

    override protected function measure():void
    {
        super.measure();

        var tf:TextFormat = textField.getTextFormat();

        if (align == "right")
            tf.align = TextFormatAlign.RIGHT
        else
            tf.align = TextFormatAlign.LEFT;

        textField.setTextFormat(tf);
    }

    override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
    {
        super.updateDisplayList(unscaledWidth, unscaledHeight);

        textField.autoSize = TextFieldAutoSize.NONE;
        textField.width = this.width - 2*textField.x;
    }
}
} 
```

第二步并不简单。

TooltipManager 有一个属性“toolTipClass”，它说明应该使用哪个类来创建 Tooltip。

```
ToolTipManager.toolTipClass = MyToolTip; 
```

SDK 中存在错误，导致无法正确实施。网络上经常讨论这个问题。

创建新工具提示时，不考虑“工具提示类”。相应的代码行如下所示：

```
var toolTip:ToolTip = new ToolTip(); 
```

但应该是这样的：

```
var toolTip:IToolTip = new ToolTipManager.toolTipClass(); 
```

纠正此行为的唯一方法是对 ToolTipManagerImpl 类进行猴子修补。[这里](http://benclinkinbeard.com/2008/07/simple-monkey-patch-to-fix-tooltipmanagertooltipclass/index.html)描述得很好。

现在您可以在应用程序中使用工具提示：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application 
xmlns:mx="http://www.adobe.com/2006/mxml" 
layout="absolute" 
minWidth="955" minHeight="600" >
<mx:Script>
    <![CDATA[
        import com.tooltip.MyToolTip;
        import mx.controls.ToolTip;
        import mx.managers.ToolTipManager;

        private const TOOLTIP_WIDTH:int = 200;

        protected function onBtnClick(event:MouseEvent):void
        {
            ToolTipManager.toolTipClass = MyToolTip;
            ToolTip.maxWidth = TOOLTIP_WIDTH;

            var tip:MyToolTip;

            tip = ToolTipManager.createToolTip("Your text", this.mouseX - 150, this.mouseY) as MyToolTip;

            tip.align = "right";
            tip.width = TOOLTIP_WIDTH;  
        }

    ]]>
</mx:Script>

<mx:Button id="myBtn" x="194" y="145" label="Show Tooltip" click="onBtnClick(event)"/>
</mx:Application> 
```

同时使用“width”和“maxWidth”属性非常重要。要将对齐方式更改为“左”，请使用

```
tip.align = "left"; 
```

此代码中的行顺序也很重要。

我希望它会帮助你！

**//编辑**

[在这里](http://it-skills.su/ifolder/mx.zip)您可以找到 ToolTipManagerImpl 的修补版本。将其放入项目的根目录中。包名和SDK中的一样，所以系统会取这个。

# javascript - 如何使用 stringbyEvaluationJSS 将 Javascript 注入 $(document).ready(function()

> ID：14623080
> 
> 赞同：0
> 
> 时间：2013-01-31T10:04:45.097
> 
> 标签：javascript, jquery, xcode, uiwebview, stringbyevaluatingjavascr

嗨
，我有一个问题，我想从 nativ 向我的 WebSolution 注入一个 var。
因为我想知道，当一个 iDevice 访问页面时，一些按钮必须是可见的......
所以我尝试了一些这样的想法：。在 index.html 我有 JQuery 脚本：

```
$(document).ready(function(){ var htmlvar = varFromUiWebView; alert(htmlvar); } 
```

在我的 xCode 项目中：在 UIWebview 代表：UiWebviewDidFinishload: 上，我有类似的东西：

```
[browser stringByEvaluatingJavaScriptFromString:@"varFromUiWebView = 1;"]; 
```

因此，结果是脚本崩溃，因为 'varFromUiWebView' 未定义。我该如何解决？

提前谢谢康斯坦丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:28:49.323

您在什么时候执行 stringByEvaluatingJavaScriptFromString？

我的猜测是，在尝试运行额外的 javascript 之前，您必须等待页面完全加载，即您需要将其放入

```
- (void)webViewDidFinishLoad:(UIWebView *)theWebView 
```

我意识到这意味着您的 js 警报可能会在您有机会设置您想要查看的值之前出现，但这不是问题。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T14:12:57.107

为什么不让你所有的 iPhone 按钮都有一个特定的类（即：iphone）有一个 display:none css 属性，然后在你的应用程序中你可以使用：

```
- (void)webViewDidFinishLoad:(UIWebView *)theWebView {
    NSString *insertRule = [NSString stringWithFormat:@"addCSSRule('iphone', 'display: block;')"];
    [theWebView stringByEvaluatingJavaScriptFromString:insertRule];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T06:18:15.480

所以此时我认为不可能将变量从：注入

`[theWebView stringByEvaluatingJavaScriptFromString:@"var valueFromNativ = 1"];`

到浏览器网站的DOM：
示例：

```
$(document).ready(function(){
  var clientValue = valueFromNativ;
}); 
```

所以一个非常简单的解决方法是通过 userAgen 捕获访问您页面的设备：

```
 $(document).ready(function() {
            var isMobile = navigator.userAgent.match(/(iPhone|iPod|iPad|Android)/);
            if (isMobile == null) {
                $('#justTablets').hide();
            }
        });<br> 
```

如果现在有人用 ipad 访问我的网站，`<div id="justTablets">Content ...</div>`将显示一个，但如果你是一个简单的台式机、笔记本电脑，它将被隐藏......见这里 [http://jsfiddle.net/konstheinrich188/jASy8/](http://jsfiddle.net/konstheinrich188/jASy8/)

# c# - 使用 LINQ 转换此循环结构

> ID：14623086
> 
> 赞同：-5
> 
> 时间：2013-01-31T10:05:00.163
> 
> 标签：c#, asp.net

你能告诉我如何使用 LINQ 转换这个循环结构吗？

```
list<Entity> auditlist=retreivedata()\\method to fetch data
foreach (Entity obj in auditList)

    obj.CultSpecificRevisedData = "NULL";
    obj.CultSpecificPublishedData = "NULL";

    if (obj.RevisedData != null && obj.RevisedData != "NULL")
        obj.CultSpecificRevisedData = ConvertToProfileSpecificFormat(Convert.ToDecimal(obj.RevisedData), DecimalSeparator);
    if (obj.PublishedData != null && obj.PublishedData != "NULL")
        obj.CultSpecificPublishedData = ConvertToProfileSpecificFormat(Convert.ToDecimal(obj.PublishedData), DecimalSeparator);

    var yearPart = obj.CalendarYear;
    var monthPart = string.Empty;
    var frequencyName = GetEnglishFrequencyBame(frequencyTypeMasId);
    if (frequencyName == FrequencyType.Monthly)
    {
        monthPart = new DateTime(obj.CalendarYear, GetMonthNumber(obj.Month), 1).ToString("MMM");
        obj.CultSpecificPeriod = monthPart + "-" + yearPart.ToString();
    }
    if (frequencyName == FrequencyType.Quarterly)
    {
      UserMessage = obj.QuarterName;
        obj.CultSpecificPeriod = UserMessage + "-" + yearPart.ToString();
    }
    else if (frequencyName == FrequencyType.BiAnnually)
    {
        UserMessage = obj.SemesterName;
        obj.CultSpecificPeriod = UserMessage + "-" + yearPart.ToString();
    }
    else
    {
        obj.CultSpecificPeriod = yearPart.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:08:21.333

我建议您*不要*尝试将其更改为使用 LINQ：

1）它正在修改对象。这不是 LINQ 的设计目的。它是为*查询*而设计的。

2）这里有很多条件逻辑 - 不仅仅是“根据某些条件将 X 设置为 Y 或 Z”，而是“可能设置 X，但可能不设置”。同样，这确实不适合 LINQ。

我*建议*尝试将一些功能提取到小方法中 - 处理频率名称的部分当然可以更清晰地表达，很可能使用开关，并提取通用功能 - 但这不是转换为 LINQ 的问题，一定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:48:24.527

对于它的价值，您可能希望代码更像这样。我希望这在某种程度上有所帮助。

```
foreach (var e in retreivedata())
{
    e.CultSpecificRevisedData = null;
    e.CultSpecificPublishedData = null;

    if (!string.IsNullOrWhiteSpace(e.RevisedData))
    {
        e.CultSpecificRevisedData = ConvertToProfileSpecificFormat(
            Convert.ToDecimal(e.RevisedData),
            DecimalSeparator);
    }

    if (!string.IsNullOrWhitespace(e.PublishedData))
    {
        e.CultSpecificPublishedData = ConvertToProfileSpecificFormat(
            Convert.ToDecimal(e.PublishedData),
            DecimalSeparator);
    }

    switch (GetEnglishFrequencyBame(frequencyTypeMasId))
    {
        case FrequencyType.Monthly:
            var f = CultureInfo.CurrentCulture.DateTimeFormat;
            obj.CultSpecificPeriod = string.Format(
                "{0}-{1}",
                f.GetAbbreviatedMonthName(GetMonthNumber(e.Month)),
                e.CalendarYear);
            break;

        case FrequencyType.Quarterly:            
            UserMessage = e.QuarterName;
            e.CultSpecificPeriod = string.Format(
                "{0}-{1}",
                e.QuarterName,
                e.CalendarYear)
            break;

        case FrequencyType.BiAnnually:
            UserMessage = e.SemesterName;
            e.CultSpecificPeriod = string.Format(
                "{0}-{1}",
                e.SemesterName,
                e.CalendarYear)
            break;

        default:
            obj.CultSpecificPeriod = e.CalendarYear.ToString();
    }
} 
```

# javascript - Javascript骰子

> ID：14623091
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:05:09.613
> 
> 标签：javascript, html

我希望它显示骰子图像但没有输出？怎么了？我从 1-6 中选择一个随机数，它会显示骰子的面。那么它应该，但它不工作。我还想在其他地方显示图像而不是替换按钮。你是怎样做的？

```
<html>
<head><title>DiceBoy</title>
</head>
<body>
<script>
function getRandom(){
var RandomNumber1 = Math.floor(Math.random() * 6) + 1;
var RandomNumber2 = Math.floor(Math.random() * 6) + 1;
  if(RandomNumber1 == 1) document.write('<img src="dice1.png">');
  else if(RandomNumber1 == 2)  document.write('<img src="dice2.png">');
  else if(RandomNumber1 == 3)  document.write('<img src="dice3.png">');
    else if(RandomNumber1 == 4)  document.write('<img src="dice4.png">');
      else if(RandomNumber1 == 5)  document.write('<img src="dice5.png">');

                  else var  document.write('<img src="dice6.png">');

}

</script>
<input type="button" value="Throw Dices" onClick="getRandom();"> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T10:12:50.823

这段代码看起来很糟糕，请确保您始终 DRY 代码：

```
function getRandom(){
     var RandomNumber1 = Math.floor(Math.random() * 6) + 1;
     var RandomNumber2 = Math.floor(Math.random() * 6) + 1;

     document.getElementById('result').innerHTML = '<img src="dice' + RandomNumber1 + '.png">';
     document.getElementById('result').innerHTML += '<img src="dice' + RandomNumber2 + '.png">';
} 
```

[http://jsfiddle.net/tzrGh/4/](http://jsfiddle.net/tzrGh/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:10:31.837

那`var`是不必要的。删除它，它的工作原理。

[http://jsfiddle.net/rRhqn/](http://jsfiddle.net/rRhqn/)

下次，打开您的 Javascript 控制台（例如，Chrome 中的 Ctrl+shift+J）并阅读出现的错误。

* * *

要更好地控制您的文档，请删除`document.write`并使用文档对象模型。

看看这个函数：

```
function writeDice(n) {
    var img = document.createElement('img');
    img.src = 'dice'+n+'.png';
    document.getElementById('dice_container').appendChild(img);
} 
```

它创建一个`img`元素，`src`根据参数设置它，并将其附加到具有 ID 的元素`dice_container`。

在您的 HTML 中，将此 ID 设置在您希望图像出现的位置。

演示：http: [//jsfiddle.net/REPAe/](http://jsfiddle.net/REPAe/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:10:22.023

你有一个额外`var`的最后`else`

并且为了您希望向其他地方展示骰子，我将继续 Cristy 伟大的实施。

在按钮下添加一个 enpty div：

```
<input type="button" value="Throw Dices" onClick="getRandom();">
<div id="diceImage1"> </div>
<div id="diceImage2"> </div> 
```

然后使用此功能：

```
function getRandom(){
  var RandomNumber1 = Math.floor(Math.random() * 6) + 1;
  var RandomNumber2 = Math.floor(Math.random() * 6) + 1;

  document.getElementById("diceImage1").innerHTML = '<img src="dice' + RandomNumber1 + '.png">';
  document.getElementById("diceImage2").innerHTML = '<img src="dice' + RandomNumber2 + '.png">';
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T10:10:43.037

最后你有一个额外的 var

```
else document.write('<img src="dice6.png">'); //removed the var 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T10:21:00.230

你可以这样做：

```
function getRandom(){
  var RandomNumber1 = Math.floor(Math.random() * 6) + 1;
  document.getElementById("showImage").innerHTML='<img src="dice' + RandomNumber1 + '.png">';
} 
```

**并在标记中**

在您的按钮之前：

```
<div id="showImage"></div> 
```

# spring - 一起使用 Spring @Scheduled 和 @Async

> ID：14623092
> 
> 赞同：16
> 
> 时间：2013-01-31T10:05:09.790
> 
> 标签：spring, memory, scheduled-tasks

这是我的用例。

旧系统更新数据库队列表 QUEUE。

我想要一个计划的重复作业 - 检查 QUEUE 的内容 - 如果表中有行，它会锁定该行并做一些工作 - 删除 QUEUE 中的行

如果前一个作业仍在运行，则将创建一个新线程来完成该工作。我想配置最大并发线程数。

我正在使用 Spring 3，我当前的解决方案是执行以下操作（使用 1 毫秒的固定速率来使线程基本上连续运行）

```
@Scheduled(fixedRate = 1)
@Async
public void doSchedule() throws InterruptedException {
    log.debug("Start schedule");
    publishWorker.start();
    log.debug("End schedule");
}

<task:executor id="workerExecutor" pool-size="4" /> 
```

这直接创建了 4 个线程，并且线程正确地共享了队列中的工作负载。但是，当线程需要很长时间才能完成时，我似乎遇到了内存泄漏。

```
java.util.concurrent.ThreadPoolExecutor @ 0xe097b8f0                              |              80 |   373,410,496 |     89.74%
|- java.util.concurrent.LinkedBlockingQueue @ 0xe097b940                          |           48 |   373,410,136 |     89.74%
|  |- java.util.concurrent.LinkedBlockingQueue$Node @ 0xe25c9d68 
```

所以

1：我应该同时使用@Async 和@Scheduled 吗？

2：如果不是那么我还能如何使用spring来满足我的要求？

3：如何只在其他线程忙时才创建新线程？

谢谢大家！

编辑：我认为工作队列变得无限长......现在使用

```
 <task:executor id="workerExecutor"
    pool-size="1-4"
    queue-capacity="10" rejection-policy="DISCARD" /> 
```

将报告结果

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-27T08:27:56.370

你可以试试

1.  运行一个延迟一秒的调度程序，这将锁定并获取到目前为止尚未锁定的所有 QUEUE 记录。
2.  对于每条记录，调用一个异步方法，该方法将处理该记录并删除它。
3.  执行器的拒绝策略应该是 ABORT，以便调度程序可以解锁尚未发出处理的 QUEUE。这样调度程序可以在下次运行时再次尝试处理这些 QUEUE。

当然，您必须处理调度程序已锁定 QUEUE 的情况，但无论出于何种原因，处理程序都没有完成对它的处理。

伪代码：

```
public class QueueScheduler {
    @AutoWired
    private QueueHandler queueHandler;

    @Scheduled(fixedDelay = 1000)
    public void doSchedule() throws InterruptedException {
        log.debug("Start schedule");
        List<Long> queueIds = lockAndFetchAllUnlockedQueues();
        for (long id : queueIds)
            queueHandler.process(id);
        log.debug("End schedule");
    }
}

public class QueueHandler {

    @Async
    public void process(long queueId) {
        // process the QUEUE & delete it from DB
    }
}
<task:executor id="workerExecutor" pool-size="1-4" queue-capcity="10"
     rejection-policy="ABORT"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T05:19:22.187

```
//using a fixedRate of 1 millisecond to get the threads to run basically continuously
@Scheduled(fixedRate = 1) 
```

当您使用`@Scheduled`新线程时，将创建一个新线程，并将`doSchedule` 在 1 毫秒时以指定的 fixedRate 调用方法。当您运行您的应用程序时，您已经可以看到 4 个线程竞争 QUEUE 表，并且可能出现死锁。

通过线程转储调查是否存在死锁。 [http://helpx.adobe.com/cq/kb/TakeThreadDump.html](http://helpx.adobe.com/cq/kb/TakeThreadDump.html)

@Async 注解在这里没有任何用处。

实现这一点的更好方法是通过实现可运行并将您的类传递给`TaskExecutor`所需数量的线程来将您的类创建为线程。

[使用 Spring 线程和 TaskExecutor，我如何知道线程何时完成？](https://stackoverflow.com/questions/2269126/using-spring-threading-and-taskexecutor-how-do-i-know-when-a-thread-is-finished)

还要检查您的设计，它似乎没有正确处理同步。如果前一个作业正在运行并持有该行的锁，那么您创建的下一个作业仍会看到该行并等待获取该特定行的锁。

# php - 比较 PHP 中的 DateTime 对象

> ID：14623095
> 
> 赞同：2
> 
> 时间：2013-01-31T10:05:18.883
> 
> 标签：php, datetime

我有一个关于比较这样设置的日期的问题`$date=new DateTime($_GET['date']);`。

我知道有，`$date1->diff($date2);`但这只会返回差异。

当我进行一些测试时，这很好用：

```
$query='';
while ($date1 < $date2) {
  $query='...'.$date->format("Y-m-d").'...;';
  $date1->modify("+1 days");
}
$db->query($query); 
```

我的问题：这是比较 2 个日期对象的正确方法吗？`while`当我测试它时，结果还可以，但是当脚本检查条件时我可能会出错吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:13:00.367

取自 PHP 手册：[http ://www.php.net/manual/en/class.datetime.php](http://www.php.net/manual/en/class.datetime.php)

> 变更日志：
> 
> 版本：5.2.2 描述：与比较运算符的 DateTime 对象比较更改为按预期工作。以前，所有 DateTime 对象都被认为是相等的（使用 ==）。

因此，如果您使用的是 PHP 5.2.2 或更高版本，则一定没有问题。

# ruby-on-rails - 如何在 ActiveRecord 数据库（RoR）中将 belongs_to 字段设置为 nil

> ID：14623098
> 
> 赞同：0
> 
> 时间：2013-01-31T10:05:24.890
> 
> 标签：ruby-on-rails, null, rails-activerecord

我有一个包含评论的数据库。在模型文件中，我声明了一条评论

```
belongs_to :user 
```

并且在数据库中有一个 user_id 字段与它所属的用户相关联。现在，当删除评论时，我想删除评论的值并将其保留为“此消息已被删除”，而不是实际销毁条目。但是，似乎我无法通过 rails 将 user_id 字段设置为 nil。我试过了

```
@comment.user_id = nil
@comment.save 
```

也

```
@comment.user = nil
@comment.save 
```

但两者都不起作用。解决办法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:25:38.683

如果您在创建评论时使用 gem，则会对 gem 代码进行验证。您始终可以通过 sql 更新来绕过这些验证。要么绕过验证`@comment.save(validate: false)`，要么使用 sql 更新`@comment.update_column :user_id, nil`。

# asp.net-mvc - MVC ViewModel 方法和映射。最佳方法

> ID：14623099
> 
> 赞同：0
> 
> 时间：2013-01-31T10:05:30.490
> 
> 标签：asp.net-mvc, automapper, mass-assignment, valueinjecter

我一直在研究使用 MVC 解决批量分配问题以及以正确方式做事的不同方法。

到目前为止，我认为最好的两种方法如下：（我也看过 AutoMapper）

1：Value Injecter - 这似乎做得很好，但也依赖于第三方库

2：使用 UpdateModel 方法并绑定到视图模型接口，该接口公开了域模型中所需属性的子集。[http://www.codethinked.com/easy-and-safe-model-binding-in-aspnet-mvc](http://www.codethinked.com/easy-and-safe-model-binding-in-aspnet-mvc)

在我使用上述实践之一开始编写整个应用程序（无需花费一周时间来找出我真正喜欢哪个）之前，是否有人有使用这两种方法的实际经验，你会推荐哪一种？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:23:19.670

General consensus from all the reading I've done on this topic is that if you're going from a Entity or Domain Model (from your database) to a View Model to show on the form feel free to use automation tools like AutoMapper or whatever your preferred tool is to automate it.

If you are however going from a Input or Form Model (the object populated via the automatic model binding) back into to your Entity or Domain Model, do not automate this. It's a slippery slope to navigate correctly and can result in your automation tool mapping over fields that were not intended/permitted. Everything I've read about this (and various implementations myself) suggest the best practice is to do this manually/explicitly. It's pretty straight forward and object initializers can make it very easy to read.

```
var person = new Person()
{
    PersonId = model.PersonId,
    FirstName = model.FirstName,
    LastName= model.LastName
}

personService.UpdatePerson(person); 
```

Something along that line.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T15:58:18.193

在只有与字符串/int 属性匹配的文本字段的简单场景中，任何事情都可以。

但是，当您在视图模型上有与模型中的对象（数据库中的 FK）匹配的属性时，它会变得更加复杂，您可能需要从数据库中提取某些单独道具的数据并将该对象的某些属性映射到视图模型， 像这样的东西。

prodinner asp.net mvc 演示应用程序在 Mapper 类中使用 valueinjecter，有一个 pdf 解释了这种方法，你可以在这里下载：http: [//prodinner.codeplex.com/](http://prodinner.codeplex.com/)

# php - 我的网页出现意外的 403 错误

> ID：14623100
> 
> 赞同：1
> 
> 时间：2013-01-31T10:05:36.637
> 
> 标签：php, .htaccess

我的网站网页出现意外的 403 错误。我最近根本没有对我的网站进行任何更改，而且我不知道错误来自哪里。出现错误的页面是重定向到 mediafire（或其他下载源）链接并更新我的数据库中的下载计数的页面。仅当我的 url 中的重定向参数包含 http:// 时，才会发生该错误。

关于如何解决这个问题的任何想法？

下载.php：

```
<?php
    if(isset($_GET['uri'])){
        $download_link = $_GET['uri'];
        $download_link = str_replace("///","//",$download_link);

        $ip = $_SERVER['REMOTE_ADDR'];
        include "include/mysql_connect.php";

        $sql = "SELECT trackid FROM customs WHERE download='$download_link'";
        $res = mysql_query($sql);

        if(mysql_num_rows($res) == 1) {
            while($row = mysql_fetch_array($res)){
                $trackid = $row['trackid'];
            }
        }

        else{
            echo "<script type=\"text/javascript\">
    window.location = \"index.php\";
</script>";
            return;
        }

        if($trackid != ""){
            $query = mysql_query("SELECT * FROM downloads WHERE song='$trackid'");
            if (!$query or mysql_num_rows($query) == 0) {
                //If it doesn't exist, create the row
                $t = mysql_query("INSERT INTO downloads SET song='$trackid', count=1, date=NOW()");
            } else {
                //If it does, add one to the counter
                $t = mysql_query("UPDATE downloads SET count=count+1, date=NOW() WHERE song='$trackid'");
            }
        }

        echo "<script type=\"text/javascript\">
    window.location = \"$download_link\"
</script>";
    }

    else{
        echo "<script type=\"text/javascript\">
    window.location = \"index.php\";
</script>";
    }
?> 
```

.htaccess （对此 download.php 没有任何规则。）：

```
IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*

Redirect /unsubscribe http://ttrcustoms.us/#account=edit
Redirect /cydia http://repo.ttrcustoms.us
Redirect /Cydia http://repo.ttrcustoms.us
Redirect /repo http://repo.ttrcustoms.us
Redirect /tools http://tools.ttrcustoms.us

Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteRule ^repo/deb/(.*)\.deb$ /download.php?package=$1.deb [L,QSA]
RewriteRule ^(.*\.(?:jpe?g|gif|png|bmp)$) /include/retinaimages.php?img=$1 [L] 
```

# java - 有人真的在 Java 中使用对象初始化块吗？这在 Java API 中的任何地方都使用过吗？

> ID：14623103
> 
> 赞同：1
> 
> 时间：2013-01-31T10:05:44.593
> 
> 标签：java

我知道 Java 支持如下所示的对象初始化块。以下代码显示对象初始化块总是在创建 TestObjectInitialize 实例时调用。

```
public class TestObjectInitialize {

    public int abc;

    //object initialize block
    {
      abc= 5;
    }

    public TestObjectInitialize() {

    }

    public static void main(String... args) {
          TestObjectInitialize toi = new TestObjectInitialize();
          System.out.println(toi.abc);
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T10:08:32.673

我见过人们这样做：

```
Map<String, String> map = new HashMap<String, String>() {{
    put("key1", "value1");
    put("key2", "value2");
}}; 
```

当你有方法时它会很有用

```
class Init {
    static int initFoo(Map<String, String> map) {
        // ...
    }
} 
```

你可以这样称呼它：

```
class FooBar {
    static int foo = Init.initFoo(new HashMap<String, String>() {{
                        put("key1", "value1");
                        put("key2", "value2");
                     }});
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:16:05.983

我已经多次使用`static`它的变体。例如，它可用于初始化类内的集合：

```
static List<String> words = new ArrayList<String>();
static {
    words.add("foo");
    words.add("bar");
} 
```

这样做的主要好处是您将声明和初始化保持在同一个地方。非静态初始化程序仍然具有为所有构造函数运行的好处，而无需链接构造函数。

```
public class Foo {
    int value;
    {
        value = getDefaultValue();
    }

    public Foo() {
    }
    public Foo(String something) {
    } 
```

}

`value = getDefaultValue()`无论使用什么 ctor 都会执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:50:14.107

> 有人真的在 Java 中使用对象初始化块吗？

答案是**肯定**的。现在的问题是**为什么？**
如果您有可能需要编程逻辑来设置它们的最终变量。因为，最终变量必须在调用构造函数之前设置，唯一的方法是在声明期间将其设置为硬编码值，或者将其设置在初始化程序块内。虽然，也可以在构造函数中完成，但是如果在 clas 中定义了多个构造函数呢？然后，您必须在每个构造函数中初始化最终变量，这会导致代码冗余。欲了解更多信息，请观看[此处](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)和[此处](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2)。

> 这在 Java 中的任何地方都使用过吗？

到目前为止，我还没有在 Java 的任何 API 中看到它。但我们大多数时候在代码中使用它，如下所示：

```
private final Set<String> VALID_CODES = new HashSet<String>() {{
    add("XZ13s");
    add("AB21/X");
    add("YYLEX");
    add("AR2D");
 }}; 
```

# javascript - 有一个指令监听一个函数

> ID：14623105
> 
> 赞同：1
> 
> 时间：2013-01-31T10:05:48.493
> 
> 标签：javascript, angularjs

我有以下代码：

***HTML***

```
<div id="header">
    <h1>The JSON Store</h1>
    <div class="cart-info" ng-controller="CartController" quantity="basketContents">
        My Cart (<span class="cart-items">{{basketCount()}}</span> items)
    </div>
</div>
<div id="main" ng-view></div> 
```

***JavaScript***

```
app.controller(
    'CartController',
   function ($scope, basketService) {
       $scope.basketCount = basketService.getCount;
       $scope.basketContents = basketService.items;
   }
);

app.factory('basketService', function () {
    return {
        getCount: function () {
            var basket = JSON.parse((localStorage.getItem('shoppingBasket') || '{ "items": [] }'));
            var count = 0;
            basket.items.forEach(function (element) {
                count += element.quantity;
            });

            return count;
        },

        get items() {
            var basket = JSON.parse((localStorage.getItem('shoppingBasket') || '{ "items": [] }'));
            var quantities = basket.items.map(function (x) { return x.quantity; });
            if (quantities.length > 0) {
                var total = quantities.reduce(function (previousValue, currentValue) { return previousValue + currentValue; });
                return total;
            } else {
                return 0;
            }
        },

        addItem: function (item) {
            var basket = JSON.parse((localStorage.getItem('shoppingBasket') || '{ "items": [] }'));

            var itemStoredAlready = basket.items.filter(function (x) { return x.id === item.id; }).length === 1;

            if (itemStoredAlready) {
                var basketItem = basket.items.filter(function (x) { return x.id === item.id; })[0];
                basketItem.quantity += parseInt(item.quantity, 10);
            } else {

                var basketItem = {};
                basketItem.id = item.id;
                basketItem.title = item.title;
                basketItem.quantity = parseInt(item.quantity, 10);

                basket.items.push(basketItem);
            }

            localStorage.setItem('shoppingBasket', JSON.stringify(basket));
        }
    };
});

app.directive('quantity', function () {
    var linker = function (scope, element, attrs, basketService) {

        scope.$watch(attrs.quantity, function (value, oldValue) {
            if (value > oldValue) {
                alert("added");
            }

        }, true);
    };

    return {
        restrict: 'A',
        link: linker
    };
}); 
```

然后我有其他控制器来处理“主” div 的模板。在它调用`basketService.addItem`的其中一个控制器中，视图被更新`basketCount()`（我不完全理解这是如何发生的，我假设某些事情正在触发）

当`addItem`被调用时，我想做一些 jQuery 动画或淡入淡出，我知道我必须使用指令，但我不明白我如何获得指令来观看 addItem 函数，然后做一些 jQuery 的东西。如您所见，我试图在自定义 HTML 元素`basketService`中设置的属性中公开一个属性，`CartController Scope`但是当添加某些内容时，HTML 元素没有得到更新并且指令函数没有被调用。

谢谢你的帮助

这是一个 Plunker - [http://plnkr.co/edit/gis0114bTRRJLHCdYnMG?p=preview](http://plnkr.co/edit/gis0114bTRRJLHCdYnMG?p=preview)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:42:46.890

动画应该在指令内（就像你说的那样）。

并且控制器应该将指令绑定到一个属性，当服务中的计数发生变化时，该属性也会发生变化。在指令中使用隔离范围时，您可以实现这一点。

这是一个示例，您可以使用 jQuery 逻辑更改 css()：[http ://plnkr.co/edit/Mi5QzViUgl5mS21EAKh6?p=preview](http://plnkr.co/edit/Mi5QzViUgl5mS21EAKh6?p=preview)

希望能帮助到你，

晒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T06:06:41.543

> 我不明白我是如何得到指令来观看 addItem 函数然后做一些 jQuery 的东西

通常，您需要 $watch 一个范围属性，而不是一个函数。这是一种方法，我认为可以简化事情：

*   在 basketService 上创建一个计数器原语。添加项目时增加此属性。
*   在 CartController 上创建一个引用 basketService 的购物篮属性
*   数量指令中的 $watch('basket.counter')
*   因为数量指令没有创建一个新的隔离范围，所以它不需要一个值——即，就`<div class="..." ng-controller="..." quantity>`足够了

[PLNKR](http://plnkr.co/edit/NhMnyktjNcoS8YHJXmZx?p=preview)

还有其他方法，比如@ShaiRez 建议的——使用隔离范围。这更复杂，因为您需要了解隔离作用域的工作原理，并且需要使用属性将信息传递到隔离作用域，但它确实使您的指令更可重用。

其他一些观察：

*   与其使用 getCount() 函数（每个摘要周期都会重新评估），不如使用 itemCount 属性。该属性将作为“添加”和“删除”操作的一部分进行更新。
*   您的 plnkr 非常大。对于未来的问题，最好创建一个最小的示例。（你会得到更多的人来看它，你会得到更快的响应）。

# asp.net - 将 asp.net 网站发布到单个 dll 文件中

> ID：14623110
> 
> 赞同：0
> 
> 时间：2013-01-31T10:05:56.970
> 
> 标签：asp.net

我从我的客户那里得到了一个需要修改的 asp.net 网站。问题是旧公司将项目作为版本上传，这意味着没有代码，只有一个 dll 文件。

我们可以使项目类型为 Web 应用程序而不是网站的单个 dll 文件！

你能告诉我如何发布单个 dll 字段吗？

问候，

摩耶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:12:57.437

如果您想要一个 DLL，则将**您的网站转换为 Web 应用程序**。转换后，项目中的所有内容都将编译为单个 DLL 文件。但是，任何外部程序集都将位于它们自己的 DLL 文件中。

# android - Google Maps API v2 Android 添加可绘制形状作为标记

> ID：14623115
> 
> 赞同：30
> 
> 时间：2013-01-31T10:06:09.287
> 
> 标签：android, google-maps-markers, google-maps-android-api-2, shapedrawable

我一直在尝试添加一个可绘制的形状作为我想在地图上添加的标记的标记图标。

形状看起来像这样（res/drawable/blue_circle.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval" >
    <size
        android:width="15dp"
        android:height="15dp" />
    <solid
        android:color="@color/Blue" />
</shape> 
```

我尝试像这样添加标记：

```
markerOptions.icon(BitmapDescriptorFactory.fromResource(R.drawable.blue_circle)); 
```

显然我得到了一个 NullPointer 异常。

标记图标必须是位图吗？我是否可以将形状可绘制对象添加为标记图标？如果是的话，我做错了什么？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-10-02T11:32:51.330

为您的标记创建一个可绘制对象（res/drawable/map_dot_red.xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval" >

    <gradient
        android:angle="90"
        android:endColor="#f58383"
        android:startColor="#ee6464" />

    <stroke
        android:width="1dp"
        android:color="#a13939" />

</shape> 
```

从drawable创建一个位图：

```
int px = getResources().getDimensionPixelSize(R.dimen.map_dot_marker_size);
mDotMarkerBitmap = Bitmap.createBitmap(px, px, Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas(mDotMarkerBitmap);
Drawable shape = getResources().getDrawable(R.drawable.map_dot_red);
shape.setBounds(0, 0, mDotMarkerBitmap.getWidth(), mDotMarkerBitmap.getHeight());
shape.draw(canvas); 
```

使用位图创建标记：

```
Marker marker = mMap.addMarker(new MarkerOptions()
    .position(point)
    .anchor(.5f, .5f)
    .icon(BitmapDescriptorFactory.fromBitmap(mDotMarkerBitmap))); 
```

以尺寸 (res/values/dimens.xml) 为单位设置标记的大小：

```
<resources>
    <dimen name="map_dot_marker_size">12dp</dimen>
</resources> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-28T22:39:34.550

如果您正在使用该`com.google.maps.android:android-maps-utils`库，这是一个答案。

使用创建位图`IconGenerator`

```
IconGenerator iconGen = new IconGenerator(context);

// Define the size you want from dimensions file
int shapeSize = getResources().getDimensionPixelSize(R.dimen.shape_size);

Drawable shapeDrawable = ResourcesCompat.getDrawable(getResources(), R.drawable.my_shape, null);
iconGen.setBackground(shapeDrawable);

// Create a view container to set the size
View view = new View(context);
view.setLayoutParams(new ViewGroup.LayoutParams(shapeSize, shapeSize));
iconGen.setContentView(view);

// Create the bitmap
Bitmap bitmap = iconGen.makeIcon(); 
```

然后像设置标记图标时一样使用位图`BitmapDescriptorFactory.fromBitmap(bitmap)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-13T17:18:05.800

我将形状（xml）可绘制对象作为标记图标处理的方式（基于 saxman 答案）。

我有很多对象（标记）要在地图上显示。它们有两种可绘制对象——位图和形状。我用于多个标记的相同图标。因此，我为位图描述符和可绘制类型检测添加了一些缓存。

```
SparseArray<BitmapDescriptor> iconCache = new SparseArray<>();
for (MyObject object : objects) {
    int iconResId = object.icon;

    BitmapDescriptor icon = iconCache.get(iconResId);
    if (icon == null) {
        Drawable drawable;
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            drawable = getResources().getDrawable(iconResId, null);
        } else {
            drawable = getResources().getDrawable(iconResId);
        }
        if (drawable instanceof GradientDrawable) {
            Bitmap bitmap = Bitmap.createBitmap(drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight(), Bitmap.Config.ARGB_8888);
            Canvas canvas = new Canvas(bitmap);
            drawable.setBounds(0, 0, bitmap.getWidth(), bitmap.getHeight());
            drawable.draw(canvas);
            icon = BitmapDescriptorFactory.fromBitmap(bitmap);
            bitmap.recycle();
        } else {
            icon = BitmapDescriptorFactory.fromResource(iconResId);
        }
        iconCache.put(iconResId, icon);

        map.addMarker(new MarkerOptions()
            .icon(icon)
            .position(position));
    }
} 
```

我的可绘制形状已设置大小，因此，我可以查询可绘制以获取所需的位图大小。

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <size android:width="12dp" android:height="12dp" />
    <solid android:color="@color/transit_bus" />
</shape> 
```

# php - 使用 HTML / PHP 的邮政编码 / 页面查找器

> ID：14623118
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:06:21.183
> 
> 标签：php, search, lookup, finder, postal-code

我需要为一个站点创建一个简单的邮政编码/页面查找器，用户将在其中输入他们的邮政编码并根据该位置是否被公司覆盖而被重定向到一个页面。

与本网站使用的基本相同：[http ://www.dailypoppins.co.uk/](http://www.dailypoppins.co.uk/)

它是邮政编码的事实有点无关紧要。为简单起见，我可能只是喜欢一个 PHP 文件，它接受输入到表单中的值，根据预定义的值列表（邮政编码，目前没有那么多）检查它，然后根据情况将用户重定向到正确的页面在输入的值/邮政编码上。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:42:38.107

这是一个简单的例子。。

```
$validPostcodes = array('123', '456', '789');

// get form value
$postcode = $_GET['postcode'];

if (isset($validPostcodes[$postcode])) {
    header('Location: http://www.newsite.com/'.$postcode);
}
else {
    echo 'Postcode does not exist';
} 
```

就像我说的......这只是一个非常简单的例子。将邮政编码存储在数据库中并对表单值进行一些错误检查可能会更好。

我建议阅读 PHP 表单验证和 PHP 数据库访问，当然还有 HTML 表单。

[PHP 数据库访问 1](http://www.php.net/manual/de/book.pdo.php) , [PHP 数据库访问 2](http://www.php.net/manual/de/book.mysqli.php) , [PHP 表单处理](http://www.w3schools.com/php/php_forms.asp), [HTML 表单](http://www.w3schools.com/html/html_forms.asp)

# python - 使用 doxygen 记录 Python 导入

> ID：14623119
> 
> 赞同：1
> 
> 时间：2013-01-31T10:06:23.530
> 
> 标签：python, doxygen

我正在使用 doxygen 来记录我的 Python 代码。那是因为项目中的大部分代码都是用 C++ 编写的，而 doxygen 与 C++ 配合得很好。

我想记录在 C++ 扩展中动态创建的函数/类。在这种情况下，文档字符串不是一个选项（它们是在运行时创建的），因此唯一的方法是在导入后显式记录它们（这对用户来说也是最有意义的）。但是 doxygen 似乎没有认识到在 Python 中导入的实体成为范围的成员。所以问题是：

**如何在 Python 中记录导入的符号？**

我尝试按照[文档](http://www.doxygen.nl/manual/docblocks.html#pythonblocks)进行操作：

```
## @package test
#  test module

## foo - before
def foo():
    pass

def bar():
    pass
## @fn bar
#  bar - after

from ext import baz
## @fn baz
#  baz - imported 
```

`foo`并`bar`妥善记录：

![输出文档](../Images/6ab23d9746717386ea0e4a62d33f90c2.png)

...但是 doxygen 报告丢失`baz`：

```
./test.py:14: warning: documented symbol 'test::baz' was not declared or defined. 
```

我也试过`@var`了，但我相信正在使用的命令不是问题。那么我如何记录 Python 导入呢？可能吗？

* * *

注意：我使用了最前沿的 doxygen 1.8.3.1。

# asp.net-mvc - 当列数不固定时在MVC网页中显示数据？

> ID：14623121
> 
> 赞同：0
> 
> 时间：2013-01-31T10:06:28.687
> 
> 标签：asp.net-mvc, razor, grid

我想在 MVC 中的 Razor 视图中显示存储为通用列表的自定义数据类型（此处为“用户”）中的数据。如何显示？列数可能会有所不同，有没有办法做到这一点？

我的代码：

```
[HttpPost]
public ActionResult GetData(DataDTO data, FormCollection fc)
{
    string server = fc["CategoryName"].ToString(); 
        //"ctsintbmvodiaf1"
    string cacheName = data.CacheName;
        //"1CPlatformCache";
    string keyName = data.KeyName;
        //"UserContext_311581";
    try
    {
        DataDAO.Initialize(server, cacheName);
        var outPutData = DataDAO.dataCache.Get(keyName);
        if (outPutData != null)
        {
            if (keyName.Contains("UserContext_"))
            {
                var ucOutput = (CTS.OneCognizant.Platform.Caching.User)outPutData;
                CTS.OneCognizant.Platform.Caching.User userData = (CTS.OneCognizant.Platform.Caching.User)outPutData;
                List<User> _user = new List<User>();
                _user.Add(userData);
                return View(_user);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T01:43:53.867

您可以试用自 ASP.NET MVC 3 以来附带的 WebGrid HTML Helper。查看这篇[博客文章](http://www.dotnetcurry.com/ShowArticle.aspx?ID=615)，了解如何使用它。您可以使用它轻松呈现“未知”列表的网格。

您提到您以前使用过 ASP.NET Web 窗体数据绑定，因此如果您想象一个简单的 GridView 或 DataGrid 控件，WebGrid HTML Helper 与此非常相似。一个很大的区别是 WebGrid 助手没有自动编辑/删除/插入支持，所以请记住这个区别。

# android - 如何在单击菜单选项时调用函数？

> ID：14623123
> 
> 赞同：0
> 
> 时间：2013-01-31T10:06:40.380
> 
> 标签：android

我想在菜单按钮上单击以调用一个函数，该函数将弹出一个带有输入位置的窗口。我在activity_main.xml中添加了以下行

```
android:onClick="getURL" 
```

并在我的 mainActivity.java 中定义了一个函数：

```
public void getURL(View view) {...} 
```

但是，当我加载应用程序时，我得到：

```
01-31 09:59:13.479: E/AndroidRuntime(761): FATAL EXCEPTION: main
01-31 09:59:13.479: E/AndroidRuntime(761): android.view.InflateException: Couldn't resolve menu item onClick handler getURL in class com.example.remoteswitch.MainActivity 
```

我的菜单设置如下所示：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never"
    android:title="@string/menu_settings"
    android:onClick="getURL"/> 
```

任何想法为什么会发生在我身上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T10:20:43.207

您处理点击 a 的方式`Menu Item`是这样的：

首先，设置您的选项菜单：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater mnuInflater = getSupportMenuInflater();
    mnuInflater.inflate(R.menu.your_menu_xml, menu);        
    return true;
} 
```

在此处处理点击：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_settings:
        // EITHER CALL THE METHOD HERE OR DO THE FUNCTION DIRECTLY
        yourMethod();

        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

并在`yourMethod()`这里执行功能：

```
private void yourMethod() {
    // TODO Auto-generated method stub      
} 
```

我不确定该`onClick`方法在`Options Menu`. 无论如何，上面的代码都可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:23:44.420

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.menu.menuxml_name, menu);
    return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch(item.getItemId())    
    {
        case R.id.menu_settings:
            getURL();   
            break;
    }
    return super.onOptionsItemSelected(item);
} 
```

尝试将这些覆盖方法放入活动中，以便轻松执行您的操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-07T20:16:02.680

只是在旧帖子中添加一些内容：首先，您的方法的参数应该`MenuItem`不是`View`（打赌您已经知道了）。其次，来自谷歌官方开发者网站，它说：

> 提示：Android 3.0 增加了使用 android:onClick 属性为 XML 中的菜单项定义点击行为的功能。该属性的值必须是活动使用菜单定义的方法的名称。该方法必须是公共的并接受单个 MenuItem 参数——当系统调用此方法时，它会传递所选的菜单项。有关更多信息和示例，请参阅菜单资源文档。

要使用此选项，请在您的活动中定义一个方法（单击选项菜单项时要调用的方法）。例如：

```
 public void showOptionMenuItem(MenuItem item) {
    Toast.makeText(getApplicationContext(), 
          "You have selected the GET URL option", Toast.LENGTH_LONG).show();
   } 
```

然后在您的 XML 中，执行以下操作：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
xmlns:tools="http://schemas.android.com/tools" tools:context=".MainActivity">
<item android:id="@+id/action_settings" android:title="@string/action_settings"
    android:orderInCategory="100" app:showAsAction="never" />

  ...

<item android:id="@+id/getUrl"
    android:onClick="getURL" //<----
    android:title="@string/get_url"/>

</menu> 
```

# php - 在 PHP 中使用 YUI 来混淆 JS

> ID：14623127
> 
> 赞同：1
> 
> 时间：2013-01-31T10:06:59.123
> 
> 标签：php, yui

我正在尝试用我的 php 代码混淆 JS 文件（1 个或更多）。它是一个简单的工具，用户可以选择一个文件并对其进行处理——其中之一就是对它进行模糊处理。所以仅仅使用 YUI 是不够的——我需要在我的代码中实现它。要添加更复杂的内容，我需要使用 YUI 选项 - Nomung 等。我在这里找到了不错的代码：[https](https://github.com/gpbmike/PHP-YUI-Compressor) ://github.com/gpbmike/PHP-YUI-Compressor 但它有两个问题：

1.  不是YUI的所有选项都出现在这里，我需要“覆盖现有文件”选项，我不知道怎么写。

2.  我收到此错误：

> [错误] 1:8: 缺失；before statement [ERROR] 1:0:Compilation 产生了 1 个语法错误。org.mozilla.javascript.EvaluatorException：编译产生 1 个语法错误。在 com.yahoo.platform.yui.compressor.YUICompressor$1.runtimeError(YUICompressor.java:135) 在 org.mozilla.javascript.Parser.parse(Parser.java:410) 在 org.mozilla.javascript.Parser.parse( Parser.java:355) 在 com.yahoo.platform.yui.compressor.JavaScriptCompressor.parse(JavaScriptCompressor.java:312) 在 com.yahoo.platform.yui.compressor.JavaScriptCompressor.(JavaScriptCompressor.java:533) 在 com. yahoo.platform.yui.compressor.YUICompressor.main(YUICompressor.java:112) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke （未知来源）在 java.lang.reflect.Method。

有任何想法吗？

更新：

我已经很容易地解决了这个问题，通过使用 exec() 命令简单地运行 YUI 的 java 命令：java -jar yuicompressor-xyzjar myfile.js -o myfile-min.js --charset utf-8，需要参数。让您将 YUI JAR 文件放在与您的 php 文件相同的文件夹中，仅此而已。

# c# - cmd.exe 进程永远不会完成

> ID：14623128
> 
> 赞同：0
> 
> 时间：2013-01-31T10:07:07.600
> 
> 标签：c#, .net, console

我有以下代码。

```
ProcessStartInfo si = new ProcessStartInfo("cmd.exe");
si.RedirectStandardInput = true;
si.RedirectStandardOutput = true;
si.UseShellExecute = false;
si.WindowStyle = ProcessWindowStyle.Hidden;
si.CreateNoWindow = true;
Process p = Process.Start(si);
p.StandardInput.Write("ipconfig");
p.StandardInput.Write("exit");
string consoleOutput = p.StandardOutput.ReadToEnd();
string dir="here"; 
```

执行到达“string consoleOutput”，但从未到达“string dir”，即代码在读取 StandardOutput 时卡住了。如果这有什么不同，它会从控制台应用程序中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:10:30.230

您必须通过关闭流来明确完成对标准输入的写入。请参阅[Microsoft 的示例](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardinput.aspx)。

总之：

```
 p.StandardInput.Write("exit");
        p.StandardInput.Close(); // <-- You need this
        string consoleOutput = p.StandardOutput.ReadToEnd(); 
```

编辑：在 Visual Studio 中测试。

**顺便说一句**，你想使用`WriteLine()`而不是`Write()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:17:50.297

使用`WriteLine`而不是`Write`写入带有最终换行符的字符串。（你可能也需要打电话`Flush()`，但我不确定）。`Close`正如另一个答案所说，它不会对流造成伤害。

是的，你不需要`cmd.exe`，你可以`ipconfig`直接开始（正如@Petesh 在评论中所建议的那样）。

# c++ - 这些辅助文件是否应该受 Git 版本控制？

> ID：14623129
> 
> 赞同：2
> 
> 时间：2013-01-31T10:07:15.917
> 
> 标签：c++, git, version-control, branching-and-merging

我决定开始为我的 C++ 项目使用 Git 版本控制系统。我是版本控制的新手。对于主干来说，事情很简单，我只提交我拥有的所有项目版本。我将每个版本保存为一个单独的文件夹，因为我知道我很快就会使用 Git。但是我的分支遇到了问题。

在开发的某个阶段，我决定在一个分支中开发一个类。如果没有版本控制，我不得不使用“手动”分支。我将该类的最新头文件和源文件复制到一个单独的文件夹并开始在那里工作。我在那里制作了几个版本以同时使用。根据计划，一个版本是该类的第一个原型（为此我制作了“分支”）。然后我添加了另一个文件，我在其中复制了第一个文件，但删除了似乎不需要的东西。这样我就有了 2 个版本，一个包含我所有的想法和功能，另一个只包含我在代码中真正使用的内容，而没有目前未使用的内容。

但后来我添加了更多。随着开发的进行，我认为将这个类作为模板可能是个好主意。所以我添加了第三个版本，和第二个一样，但是现在使用多态实现的一些功能是使用模板实现的。而且我还不能说哪个版本是最好的，因为现在说还为时过早，所以我想把所有 3 个放在一起。

然后我又做了一个特殊的文件：第三版头文件的副本，其中每一行可以标记或不标记。已标记表示我使用了该特定方法，或者我确定它很快就会使用，否则不会标记该行。

然后，过了一段时间，我开了一个新的分支。对于那个分支，我需要在第一个分支中开发的那个类的新版本。所以我只是将其中一个版本复制到新分支的文件夹并开始在那里工作。现在我又有了某种辅助文件：我有 2 个文件，一个用来删除我使用的类方法，另一个用来写我需要的新方法。

现在我想开始使用 Git，我想知道：对于所有项目的文本文件、计划、图表等，很明显 - 我将它们保存在 Git 存储库之外。每当需要协作编辑时，我都可以建立一个 wiki 或类似的东西。但是对于同一个头文件的所有副本，以及那些辅助的“标记”文件，我该怎么处理它们呢？我的意思是，我可以将它们全部放在一个分支中，但是当我将一个分支合并到主干时会发生什么？我不想拥有所有这些副本、版本和列表，只是我制作的最后一个类文件。

一方面，这些是编码时使用的 C++ 源文件。另一方面，它们不是软件包的纯源代码的一部分，它们只是在我工作时帮助我，但永远不会被编译，因为最后只有我选择合并的类的最终版本，并且所有其他辅助文件、列表等仅供参考。

最好的办法是什么？感谢您阅读我的长篇故事 :)

编辑：这是我个人计算机上的本地存储库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T12:20:04.307

始终将文档保存在与源代码相同的存储库中。如果你不这样做，你的文档就会腐烂。这是因为文档是针对您的软件的某个版本编写的，因此它必须以与软件开发相同的方式进行开发。

如果您的文档是自动生成或编译成另一种格式的，请只提交源数据、makefile 和生成器配置，就像处理源代码一样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:20:40.510

你描述的是分支的正常使用：你有你的主分支（“官方”，如果它在哪里）和一个开发新功能的分支（如果我理解你，它实际上不必住在一个单独的目录中正确）。定期将功能分支与主分支同步，方法是将其重新基于主分支或合并其更改。反过来，您可以拥有从属分支，您可以在其中尝试开发功能的方法，并针对该功能进行处理分支就像对主人的一种尊重。但在这种情况下，每当你变基时你必须小心。

您应该在存储库中保留任何不容易重新创建的数据，无论是源代码、文档还是设计草图。可以重新创建的东西（目标代码，自动格式化的文档，...）应该被排除在外（任何更改都会产生要签入的差异）。您的存储库（特别是未发布的分支）是您自己的工作区，它可以是您喜欢的所有杂乱无章的东西。

看看[git 主页](http://git-scm.com)上提到的书。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:09:54.093

好吧，这显然是文档而不是源代码，因此您应该将其与源代码分开。由于您的文档似乎依赖于分支，因此您仍应将其检入 repo，但在单独的`doc`目录中。

关于合并：合并的工作方式最终取决于您。Git 只是有一个默认的合并策略，这是大多数人大部分时间想要的。但是如果你说合并到主分支应该只带来代码而不是文档，那很好。就这样合并：

```
git merge mybranch --no-commit
rm -rf **docu-dir**
git add -A
git commit 
```

# list - 从 Map 中获取值给定的 Scala 中的键列表

> ID：14623131
> 
> 赞同：15
> 
> 时间：2013-01-31T10:07:21.737
> 
> 标签：list, scala, map

基本上我需要从给定列表中的键的映射中获取一组值（以相同的顺序给出键）。

```
val kv = Map("k3" -> "v3", "k1" -> "v1", "k2" -> "v2")
val ks = List("k1", "k2") 
```

我能即兴创作的最好的已经`foldRight`结束了`ks`：

```
scala> (ks foldRight List[String]()) { (v, a) => kv(v) :: a }
res7: List[String] = List(v1, v2) 
```

有没有更方便的方法可以在标准库或较短的代码中执行此操作，理想情况下是类似的`kv getVals ks`？:)

问题当然不是那么重要，只是试图朝着好的风格去探索。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-31T19:29:07.230

或者：

```
ks collect kv 
```

结果由键在 ks 中的所有 kv 值组成。

（除了是一个函数之外，地图也是一个 PartialFunction）

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-31T10:16:53.137

使用平面地图：

```
 ks flatMap { k => kv get k } 
```

或更好：

```
 ks flatMap (kv get) 
```

并带有`for`理解：

```
for (k <- ks; v <- kv get k) yield v 
```

但是没有一个像你自己的单行一样简洁或清晰：:-)

```
ks map kv
List("k42") map kv // will barf 
```

`ks`但是，请注意这是异常的 - 如果包含未在 map 中定义的键，它可能会引发异常`kv`。

# javascript - Asp.net 页面方法不适用于大多数浏览器

> ID：14623133
> 
> 赞同：1
> 
> 时间：2013-01-31T10:07:25.183
> 
> 标签：javascript, asp.net, asp.net-ajax

我正在使用 ASP.net 页面方法。我遇到的这个问题是它不适用于某些浏览器。例如 IE、Opera Safari 和新的 Firefox。它适用于 Chrome。我发现了这一点，但对我的情况没有帮助[http://www.carlj.ca/2008/06/18/fixing-firefoxs-ns_error_not_available-error-when-using-pagemethods/](http://www.carlj.ca/2008/06/18/fixing-firefoxs-ns_error_not_available-error-when-using-pagemethods/)任何帮助将不胜感激。

```
<asp:ScriptManager ID=”scManager″ enablepagemethods=”true” runat=”server” />
<asp:Button ID="btnBuyNow" runat="server" Text="Buy Now" OnClientClick="AddProductToCart()" />

<script type="text/javascript">
   function AddProductToCart() {
      //hard coded values for testing, productId, quantity
      PageMethods.AddProduct(142, 1);
      window.location.href = '../Cart.aspx';
   }
</script>

[System.Web.Services.WebMethod]
public static void AddProduct(string prodId, string quantity)
{
    //adding product to cart
    //When testing with Chrome breakpoint is hit,
    //All other browsers dont hit break point
    CurrentCart.AddProduct(prodId, quantity);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:56:41.170

> ```
>  <script language="javascript" type="text/javascript">
>         $(document).ready(function() {
>             $('#Save').click(InsertClient);
>         }
>     );
>         function InsertClient() {
>             var BizName = $('#txtBizName').val();
>             alert(BizName);
>             $.ajax({
>                 url: "Common.asmx/InsertClient",
>                 type: "POST",
>                 dataType: "json",
>                 data: "{BizName:'" + BizName + "'}",
>                 contentType: "application/json; charset=utf-8",
>                 success: function(msg) {
>                     $('#status').html('Id: '+msg['d']['Id']);
>                 },
>                 error: function(e) {
>                     $('#status').innerHTML = "Unavailable";
>                 }
>             });
>         }
>     </script> 
> 
> in Common.asmx write webmethod as follow
> 
> [WebMethod]
> [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
> public Client InsertClient(string BizName)
> {
>     Client objClient = new Client();
>     objClient.BizName = BizName;
>     InsertData(objClient);
>     return objClient;
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:30:29.167

对此可能有更好的解决方案，但这是最终奏效的唯一方法。

```
<script type="text/javascript">

function AddProductToCart() {

  //hard coded values for testing, productId, quantity
  PageMethods.AddProduct(142, 1);

  var millisecondsToWait = 500;
           setTimeout(function () {
               window.location.href = '../Cart.aspx';
           }, millisecondsToWait);
       }
  </script> 
```

# jquery - 在 data-role="header" 中更改 .ui-title 的宽度

> ID：14623135
> 
> 赞同：3
> 
> 时间：2013-01-31T10:07:32.003
> 
> 标签：jquery, html, css, jquery-mobile

我正在使用 Jquery Mobile 开发一个网站。我的标题对齐菜单的中心，如上图所示：

![页面标题居中对齐，带有绿色边框](../Images/d1b368bb0862407f0e9a7214920b27ed.png)

我的绿色边框 CSS 是：

```
.ui-title 
{
    border: 2px solid lime;
} 
```

和 HTML：

```
<div data-role="header" data-position="fixed" class="menu">
    <a href="#" data-icon="home" data-theme="a">Home</a>
    <h1>Title</h1>
</div> 
```

我想要的是跨越全宽的标题（相对于窗口的当前宽度），但仍然居中，如下图中的粉红色线条：

![页面标题居中对齐，绿色边框和粉色线条描述目标宽度](../Images/a7ab509fc66b2f9e319516277df98a88.png)

知道如何在不破坏 Jquery Mobile 布局（例如不同目标设备的设备宽度）的情况下实现这一点吗？

**解决方案：**

```
margin-right: 1% !important;
margin-left: 1% !important; 
```

它似乎在我的情况下工作（即使如果窗口足够小，标题也会在按钮后面）。

**更新：**

没有解决周围 div 或更改 CSS 样式（例如边距）的方法，解决了某些设备上标题过宽的问题。我想这就是为什么标题如此之小，以适合所有设备的原因。我几个小时都没有时间测试这个，所以我最终放弃了，回到了默认布局，只是确保标题足够窄。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:11:35.300

使用这个 css 并设置你的左右百分比（将 10% 更改为任何其他数字）

```
.ui-title {
    margin: 0.6em 10% 0.8em !important;
} 
```

如果您想在不同方面使用不同的值，请使用此 css：

```
.ui-title {
    margin: 0.6em 10% 0.8em 5% !important;
} 
```

此外，如果可能的话，给每个标题一个 id，因为提到的 css 将使用 .ui-title 类更改每个元素。

这是一个例子：http: [//jsfiddle.net/Gajotres/QP9qm/2/](http://jsfiddle.net/Gajotres/QP9qm/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:22:44.480

将标题或 ui-title 设置为：

```
 .post .ui-header .ui-title {
  margin:0;
  width:100%;

  } 
```

它应该这样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T01:48:42.697

为什么你会期望没有 div 或 css 的解决方法？那有什么问题呢？

* * *

## 选项 1：复制他们在 JqueryMobile.com 上所做的事情

无论如何，这就是他们在实际的 jQuery Mobile 网站 (1.4.2) 上的做法。我无法评论 2013 年 1 月 jQuery mobile 的状态。

```
<div data-role="header" class="jqm-header">
    <h2><a href="../" title="jQuery Mobile Demos home"><img src="../_assets/img/jquery-logo.png" alt="jQuery Mobile"></a></h2>
    <p><span class="jqm-version"></span> Demos</p>
    <a href="#" class="jqm-navmenu-link ui-btn ui-btn-icon-notext ui-corner-all ui-icon-bars ui-nodisc-icon ui-alt-icon ui-btn-left">Menu</a>
    <a href="#" class="jqm-search-link ui-btn ui-btn-icon-notext ui-corner-all ui-icon-search ui-nodisc-icon ui-alt-icon ui-btn-right">Search</a>
</div> 
```

.ui-title（这是 h2 自动增强的）的默认样式表如下。您会看到，这就是`margin: 0 30%`导致您出现问题的原因。

```
ui-header .ui-title, .ui-footer .ui-title 
{
   font-size: 1em;
   min-height: 1.1em;
   text-align: center;
   display: block;
   margin: 0 30%;
   padding: .7em 0;
   text-overflow: ellipsis;
   overflow: hidden;
   white-space: nowrap;
   outline: 0!important;
} 
```

在他们的覆盖样式表中

```
.jqm-demos .jqm-header h2 
{
   padding: .4em 0 .1em;
   margin: 0 3em;
} 
```

添加此覆盖足以使我的徽标居中。

（可能有另一种方法可以做到这一点，`data-enhance='false'`但这并没有

## 选项 2：禁用自动增强

您可以禁用自动增强以防止`ui-title`首先应用该类并破坏您的 CSS。还有其他副作用，例如其他按钮配置不正确，我不推荐这种方式，但很高兴了解此功能可能适用于其他地方。

首先你必须设置

```
$.mobile.ignoreContentEnabled = true; 
```

注意：您必须`mobileinit`在加载 jQueryMobile 之前对其进行配置。像这样或者你想怎么做。

```
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>

<script>
    $(document).on('mobileinit', function () {
        alert("ignoreContentEnabled initial value = " +$.mobile.ignoreContentEnabled);
        $.mobile.ignoreContentEnabled = true;
    });
</script>

<script src="//code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.js"></script> 
```

然后将标题更新为

```
<div data-role="header" id="defenderHeader" data-enhance="false"> 
```

它里面的任何东西都不会自动增强。`<h2>`不幸的是，如果你把它放在我最初想做的事情上，这不起作用。您可以进一步探索此选项，但我认为选项 1 是最好和最简单的。

另请参阅：[http ://api.jquerymobile.com/global-config/](http://api.jquerymobile.com/global-config/)

# c++ - 对重载函数的模糊调用的解决方法

> ID：14623136
> 
> 赞同：0
> 
> 时间：2013-01-31T10:07:31.267
> 
> 标签：c++

```
void printOutput(std::string text);
void printOutput(std::string& text); 
```

这两个函数都将一些文本打印到控制台，但我想处理每种情况：

```
std::string testOutput = "asdf";
output->printOutput(testOutput); // Gives the error as it can use either function 
```

在某些情况下，我可能想要：

```
output->printOutput("asdf"); // Only the first function can be used 
```

这一切都很新，有没有办法可以处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:09:41.657

通过 const 引用传递：

```
void printOutput(const std::string &text); 
```

两种形式都可以绑定到它，您不必修改打印的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:10:06.063

除非您打算*修改*通过引用传入的字符串，否则单个

```
void printOutput(std::string const& text); 
```

将工作。

或者你希望在每个版本中做一些不同的事情？

# scala - 如何在 SBT 中的项目和库依赖项之间切换？

> ID：14623138
> 
> 赞同：5
> 
> 时间：2013-01-31T10:07:34.950
> 
> 标签：scala, sbt

在 SBT 中声明托管库依赖项很容易，例如

```
 libraryDependencies ++= Seq(
 "org.specs2" %% "specs2" % "1.12.2" % "test" ,
 "junit" % "junit" % "4.7" % "test"
) 
```

虽然在 SBT 中声明项目依赖项并不容易，但我也可以这样做：

```
object RichMath extends Build {
  lazy val myApp = Project("RichMath", file(".")) dependsOn(richUtil)   
  lazy val richUtil = RootProject(file("../RichUtil"))
} 
```

但在实践中，我通常希望在项目模式和库模式之间切换，在这种*模式*下更改在上游项目中立即可见，而在*库模式*中，随着代码的成熟，我必须发布更改才能在依赖项目中看到它们。

在代码库生命的早期，或者每当我想在模块之间进行频繁的更改时，我不希望为了查看上游更改而重新发布的麻烦。但是在稳定/成熟的代码中，我想准确地指定我所依赖的版本。

似乎 SBT 将这两个依赖项视为完全不同的。有没有比重写我的构建定义更直接的方式来在项目依赖和库依赖之间切换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T02:21:59.533

我的 sbt 脚本有一些场景（测试、发布、生产）。例如，我从脚本（从 bash，你可能有其他环境）开始 sbt `DO=TESTS sbt`。这是我对环境变量的动态依赖：

```
if (sys.env.contains("LOCAL_BUILD")) {
  Seq[Project.Setting[_]](
    unmanagedResourceDirectories in Compile <+= baseDirectory { _ / "src" / "main" / "scala" },
    libraryDependencies ++= {
      Seq(
        "org.digimead" %% "digi-lib-slf4j" % "0.2.1-SNAPSHOT" % "test",
        "org.digimead" %% "digi-lib-test" % "0.2.1-SNAPSHOT" % "test",
        "org.scalatest" %% "scalatest" % "1.9" % "test"
      )
    }
  )
} else {
  Seq[Project.Setting[_]](
   libraryDependencies ++= {
      Seq(
        "org.slf4j" % "slf4j-log4j12" % "1.7.1"
      )
    }
  )
} 
```

如您所见，我可能有不同的项目设置，单个 .sbt 定义由一个环境变量控制。环境变量影响所有项目/子项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-02T17:52:38.010

确实，这两种依赖关系的处理方式截然不同，如果不是这样就好了。主要障碍是 sbt 需要在加载设置之前了解所有外部项目（出于各种原因）。

目前，最简单的解决方案可能是另一个答案中描述的环境变量或系统属性。展望未来，以下在 sbt 中非常接近可能，但仍需要更多工作：

1.  像往常一样声明依赖

    ```
    libraryDependencies += "org.example" % "rich-util" % "0.1" 
    ```

2.  从命令行添加源依赖，过程中自动覆盖正常依赖

    ```
    $ sbt
    > projects add ../RichUtil 
    ```

[设置 sbt 环境以同时破解多个库中](https://stackoverflow.com/questions/14351940/setting-up-sbt-environment-to-hack-on-multiple-libraries-at-once)描述的基于约定的方法是一种特殊情况，也可以通过这种工作方式启用。

# android - 音乐播放器锁屏小部件 Android

> ID：14623144
> 
> 赞同：2
> 
> 时间：2013-01-31T10:07:47.073
> 
> 标签：android, audio-player, android-music-player

我正在实现一个音乐播放器应用程序。对于该应用程序，我想实现一个播放小部件，该小部件保持在锁定屏幕上并允许他们与应用程序交互。

我发现在 Android 4.2 Api 中是可能的。但部分音乐播放应用在Android 3.0以上可以提供此功能

所以我已经搜索了很多东西来实现一个支持 Android 3.0 的屏幕锁定小部件，但我找不到任何关于它的东西。

任何人都有解决方案或步骤，如何制作支持 Android 3.0 的锁屏小部件。?

等你回复。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:46:30.533

`FLAG_SHOW_WHEN_LOCKED`你可以把它变成一个活动而不是一个小部件，并使用某些标志`FLAG_DISMISS_KEYGUARD`来实现这一点，我认为。该线程将帮助您：

[Android 锁屏小工具](https://stackoverflow.com/questions/4116001/android-lock-screen-widget)

# android - 如何创建imageView的progressDialog onload？

> ID：14623146
> 
> 赞同：2
> 
> 时间：2013-01-31T10:07:57.137
> 
> 标签：android, android-asynctask, imageview, drawable, progressdialog

我想将一个大/复杂的 svg 图像文件加载到我的 imageView 中。在我的 HTC Desire S 和联想 a60 上加载 svg 需要一些时间。分别约为 5 秒和 10 秒。

现在我的应用程序变得无响应约 5 秒，直到 imageView 完全加载

我使用这个简单的代码加载图像..

```
 svg = SVGParser.getSVGFromResource(getResources(), R.raw.gf);
    mImageView.setImageDrawable(svg.createPictureDrawable()); 
```

我看起来像（webView）

```
webView.setWebViewClient(new WebViewClientEx(MainActivity.this, DEBUG) {

 @Override
        public void onPageFinished(final WebView view, String url) {
 ...........
 .............}
 }); 
```

我在以前的项目中使用过...

**最后我的问题：**

1.) 使应用程序看起来响应的最佳方法是什么？

我打算使用 asynctask 但不知道如何使用它......它适用于这里吗？

2.) 图像完全加载后是否有监听器？

我的方法是在加载 imageView 时显示 progressDialog 并在 imageView 完全加载后隐藏它。

您认为更适合用于显示/隐藏 progressDialog 的其他建议？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:34:27.000

在此处使用异步任务。（加载器也可以工作，但异步任务更容易解释。）

```
 private class LoadSVGTask extends AsyncTask<Integer, Void, Drawable> {

  protected Drawable doInBackground(Integer... res) {
  mProgressBar.setVisibility(View.Visible);
  svg = SVGParser.getSVGFromResource(getResources(),res); 
  Drawable d = svg.createPictureDrawable();
  return d;
 }

 // gets executed in main thread
 protected void onPostExecute(Drawable result) {
 mProgressBar.setVisibility(View.Gone);
     mImageView.setImageDrawable(result);
 }
} 
```

使用以下命令启动任务：

```
new LoaderSVGTask().execute(R.raw.gf, null, null); 
```

见：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:25:06.393

只需在其中引用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)

```
protected void onPreExecute (){
   progressDialog.show(......);

}

protected abstract Result doInBackground (Params... params){
  //load your image from here
}

protected void onPostExecute (Result result){
 progressDialog.dismiss();
} 
```

# c# - C#接口实现

> ID：14623154
> 
> 赞同：2
> 
> 时间：2013-01-31T10:08:10.887
> 
> 标签：c#, interface, n-tier-architecture, multi-tier

我不知道如何正确管理 C# 中的接口。我的目标是为我的业务层服务创建一个抽象类，该类具有一些通用方法（如 Save()、Dispose()），它们调用不同的 DAL 存储库方法。我希望避免在我的所有服务中重复以下内容：

```
public Save() 
{
   repository.Save();
} 
```

我有一个类似的场景：

**界面**

```
namespace Common
{
    public interface IRepository
    {
        void Save;
        void Dispose;
    }
} 
```

**达尔**

```
namespace DAL
{
    public Repository : IRepository
    {
        public void Save() {};
        public void Dispose() {};
        public void Add() {}
    }
} 
```

**提单**

```
namespace BL
{
    public abstrac BaseService
    {
        protected IRepository repository;
        protected BaseService(IRepository repo)
        {
            repository = repo;
        }

        public Save() 
        {
            repository.Save();
        }
    }

    //...

    //Tentative 1
    public Service : BaseService
    {
        private Repository rep;

        public Service()
            : base(new DAL.Repository())
        {
            rep = base.repository; // ERROR: cannot convert IRepository to Repository
        }
    }
} 
```

我也试过这个：

```
//Tentative 2
public Service : BaseService
{
    private IRepository rep;

    public Service()
        : base(new DAL.Repository())
    {
        rep = base.repository; // OK
    }

    public void Add()
    {
        rep.Add() // ERROR: IRepository doesn't contain a definition for 'Add'
    }
} 
```

我知道我可以在接口中定义我想使用的所有方法，但是我将不得不处理泛型类型的很多问题，而且，正如你应该从我的问题中理解的那样，我在 C# 和我希望避免复杂性是可能的，至少我会更专业:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:18:43.533

首先，我认为您与您的成员发生了名字冲突 `IRepository rep.`

尝试使用 `DAL.IRepository rep`

您收到错误的原因是您已将“添加”定义为“存储库”独有的东西。您的成员变量是一个“IRepository”，允许您将任何实现“IRepository”的东西放到它上面。

仅仅因为您可以将存储库放入其中，并不意味着其中的所有内容都将成为存储库。（想想看起来不错，手指和拇指，所有的拇指都是手指，但不是所有的手指都是拇指）

如果您需要在任何存储库上调用 add ，则将其添加到界面中。否则，您需要决定该成员应该是 IRepository 还是 Repository。

或者，您可以使用

```
 Repository myRep = rep as Repository;
    if(rep!=null)
    {
       myRep.Add();
       ...
       profit();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:15:00.193

```
public Service()
        : base(new DAL.Repository())
    {
           rep = (Repository)base.repository;

    } 
```

这样，您将获得 Add() 服务，它不是 IRepository 的一部分，而是扩展类中的较新实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:27:17.733

看到您的主要问题是该`Add`方法缺乏可访问性，并且无论如何这是一种相对常见的方法，我首先建议将其添加到您的`IRepository`中，所以它看起来像这样：

```
public interface IRepository
{
    void Add();
    void Save();
    void Dispose();
} 
```

然后，您将在继承自`IRepository`. 现在，可以理解的是，您可能希望能够访问`Repository`. 为了解决这个问题，您可以做的是让您`BaseService`接受一个通用存储库：

```
public BaseService<T> where T : IRepository
{
    protected T repository { get; set; }
    protected BaseService(T repo)
    {
        repository = repo;
    }
} 
```

然后服务看起来像这样

```
public UserService : BaseService<UserRepository>
{
    public UserService() : base(new DAL.UserRepository())
    {
        // base.Repository is now a UserRepository.
    }    
} 
```

通过这个实现，您`UserService`将能够访问所有`UserRepository`公开的方法，因为它是使用泛型进行强类型化的。希望这可以帮助。

# android - 尝试第二次打开警报对话框时出现 FatalException

> ID：14623168
> 
> 赞同：2
> 
> 时间：2013-01-31T10:09:03.850
> 
> 标签：android, android-alertdialog

这是我的代码

```
import java.util.ArrayList;
import java.util.Calendar;
import java.util.HashMap;
import java.util.List;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity implements OnClickListener {

    RadioButton r1, r2;
    Button exit, submit, report,settings,about;
    EditText amount;
    double Liters = 0;
    double ppetrol;
    double pdiesel;
    double damount;
    String date, time, dbamt;
    String price_petrol;
    String price_diesel;
    DatabaseHandler db;

    // XML parsing data types

        // All static variables
        static final String URL = "http://pixelexis.host56.com/data.xml";
        // XML node keys
        static final String KEY_ITEM = "item"; // parent node(to check every nodes)
        static final String PETROL = "petrol";
        static final String DIESEL = "diesel";

        AlertDialog.Builder alert;

        TextView input1;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

         alert = new AlertDialog.Builder(this);

         input1 = new TextView(this);

        r1 = (RadioButton)findViewById(R.id.radiopetrol);
        r2 = (RadioButton)findViewById(R.id.radiodiesel);
        exit = (Button)findViewById(R.id.exitbutton);
        submit = (Button)findViewById(R.id.submit);
        amount = (EditText)findViewById(R.id.amt);
        report = (Button)findViewById(R.id.repobutton);
        settings = (Button)findViewById(R.id.setbutton);
        about = (Button)findViewById(R.id.abtbutton);

        final DatabaseHandler db = new DatabaseHandler(this);

        final Calendar c = Calendar.getInstance();
        int mYear = c.get(Calendar.YEAR);
        int mMonth = c.get(Calendar.MONTH);
        int mDay = c.get(Calendar.DAY_OF_MONTH);
        int mHour = c.get(Calendar.HOUR_OF_DAY);
        int mMinute = c.get(Calendar.MINUTE);
        TextView t = (TextView)findViewById(R.id.time);
        TextView d = (TextView)findViewById(R.id.date);
        d.setText(" Date:" + mDay+" / "+mMonth+1 + " / "+mYear+" ");
        t.setText("Time:" + mHour+" : "+mMinute);

        date = d.getText().toString();
        time = t.getText().toString();

        // XML to HashMap

                ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

                XMLParser parser = new XMLParser();
                String xml = parser.getXmlFromUrl(URL); // getting XML
                Document doc = parser.getDomElement(xml); // getting DOM element

                NodeList nl = doc.getElementsByTagName(KEY_ITEM);
                // looping through all item nodes <item>
                for (int i = 0; i < nl.getLength(); i++) {
                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();
                    Element e = (Element) nl.item(i);
                    // adding each child node to HashMap key => value
                    map.put(PETROL, parser.getValue(e, PETROL));
                    map.put(DIESEL, parser.getValue(e, DIESEL));

                    // adding HashList to ArrayList
                    menuItems.add(map);
                }

                menuItems.trimToSize();

                price_petrol = menuItems.get(0).values().toString();
                price_diesel = menuItems.get(1).values().toString();

                String regx = ",[] ";
                char[] ca = regx.toCharArray();
                for(char c1 : ca)
                {
                    price_petrol = price_petrol.replace(""+c1, "");
                    price_diesel = price_diesel.replace(""+c1, "");
                }

                System.out.println("Price of petrol = " + price_petrol);
                System.out.println("Price of diesel = " + price_diesel);

                ppetrol = Double.parseDouble(price_petrol);
                pdiesel = Double.parseDouble(price_diesel);

            //  int count = db.getValuesCount();
                /**
                 * DATABASE OPERATIONS
                 * */
                // Inserting values
                Log.d("Insert: ", "Inserting ..");
               // db.addValues(new Values(date, time, price_petrol,dbamt ));

        exit.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                System.exit(0);
                // Force stopping all process and shutting down application

            }
        });

        about.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                Toast.makeText(getApplicationContext(), "App by Junior Hacker...",
                        Toast.LENGTH_LONG).show();

            }
        });

settings.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                 alert.setTitle("Current fuel price");

                 alert.setView(input1);

                 input1.setTextColor(Color.parseColor("#FFFFFF"));

                 input1.setText("Petrol : "+price_petrol+ " Diesel : "+price_diesel);

                 alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() 
                 {
                  public void onClick(DialogInterface dialog, int whichButton) 
                  {

                      dialog.dismiss();
                  }
                 });
                alert.show();

            }
        });

        report.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent i = new Intent(getApplicationContext(), ListviewActivity.class);
                startActivity(i);

            }
        });

        submit.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                dbamt = amount.getText().toString();            

                if(amount.getText().toString() != null && ! amount.getText().toString().equalsIgnoreCase(""))
                {

                    if(r1.isChecked())
                    {
                        damount = Double.parseDouble(amount.getText().toString());
                        Liters = damount/ppetrol;
                        db.addValues(new Values(date, time, price_petrol,dbamt ));
                        Toast.makeText(getApplicationContext(), "Data Submitted Successfully",
                        Toast.LENGTH_LONG).show();
                        amount.setText("");

                        // Reading all values
                        Log.d("Reading: ", "Reading all contacts..");
                        List<Values> value = db.getAllValues();       

                        for (Values val : value) {
                            String log = "Id: "+val.getID()+" ,Date: " + val.getDate() + " ,Time: " + val.getTime() + ",Price: " + val.getPrice() + ",Amount: " + val.getAmount();
                                // Writing values to log
                        Log.d("The Log-> ", log);

                        }
                    }
                    else if(r2.isChecked())
                    {
                        damount = Double.parseDouble(amount.getText().toString());
                        Liters = damount/pdiesel;
                        Toast.makeText(getApplicationContext(), "Data Submitted Successfully",
                        Toast.LENGTH_LONG).show();
                        db.addValues(new Values(date, time, price_diesel,dbamt ));
                         // Reading all values
                        Log.d("Reading: ", "Reading all contacts..");
                        List<Values> value = db.getAllValues();       

                        for (Values val : value) {
                            String log = "Id: "+val.getID()+" ,Date: " + val.getDate() + " ,Time: " + val.getTime() + ",Price: " + val.getPrice() + ",Amount: " + val.getAmount();
                                // Writing values to log
                        Log.d("The Log-> ", log);

                        }

                    }
                    System.out.println(Liters);
                }
                else 
                {
                    Toast.makeText(getApplicationContext(), "Invalid amount!",
                    Toast.LENGTH_LONG).show();
                }

            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub

    }

} 
```

对话框出现在第一次单击时，下一次单击以`FatalException`

这是我的日志猫

```
01-31 15:57:55.692: D/AndroidRuntime(272): Shutting down VM
01-31 15:57:55.692: W/dalvikvm(272): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-31 15:57:55.762: D/dalvikvm(272): GC_FOR_MALLOC freed 2922 objects / 185432 bytes in 61ms
01-31 15:57:55.772: E/AndroidRuntime(272): FATAL EXCEPTION: main
01-31 15:57:55.772: E/AndroidRuntime(272): java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first.
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.view.ViewGroup.addViewInner(ViewGroup.java:1970)
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.view.ViewGroup.addView(ViewGroup.java:1865)
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.view.ViewGroup.addView(ViewGroup.java:1845)
01-31 15:57:55.772: E/AndroidRuntime(272):  at com.android.internal.app.AlertController.setupView(AlertController.java:364)
01-31 15:57:55.772: E/AndroidRuntime(272):  at com.android.internal.app.AlertController.installContent(AlertController.java:205)
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.app.AlertDialog.onCreate(AlertDialog.java:251)
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.app.Dialog.dispatchOnCreate(Dialog.java:307)
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.app.Dialog.show(Dialog.java:225)
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.app.AlertDialog$Builder.show(AlertDialog.java:802)
01-31 15:57:55.772: E/AndroidRuntime(272):  at com.aabasoft.fuelcalc.MainActivity$3.onClick(MainActivity.java:195)
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.view.View.performClick(View.java:2408)
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.view.View$PerformClick.run(View.java:8816)
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.os.Handler.handleCallback(Handler.java:587)
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.os.Handler.dispatchMessage(Handler.java:92)
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.os.Looper.loop(Looper.java:123)
01-31 15:57:55.772: E/AndroidRuntime(272):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-31 15:57:55.772: E/AndroidRuntime(272):  at java.lang.reflect.Method.invokeNative(Native Method)
01-31 15:57:55.772: E/AndroidRuntime(272):  at java.lang.reflect.Method.invoke(Method.java:521)
01-31 15:57:55.772: E/AndroidRuntime(272):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-31 15:57:55.772: E/AndroidRuntime(272):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-31 15:57:55.772: E/AndroidRuntime(272):  at dalvik.system.NativeStart.main(Native Method) 
```

这里有什么问题？我有其他项目也有同样的问题，我需要使用 EditTexts 接受用户的字符串，应用程序也停止了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:27:58.133

您应该在 onClick 本身中初始化警报对话框。

```
 settings.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
             alert = new AlertDialog.Builder(this);
             alert.setTitle("Current fuel price");
             alert.setView(input1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T11:24:51.783

创建一个新类，其唯一目的是重复显示对话框，然后在必要时调用它......

这是代码

```
public class AlertDialogManager {

    public void showAlertDialog(Context context, String title, String message,
            Boolean status) {
        AlertDialog alertDialog = new AlertDialog.Builder(context).create();

        alert.setTitle("Current fuel price");
        alert.setView(input1);
        input1.setTextColor(Color.parseColor("#FFFFFF"));
        input1.setText("Petrol : "+price_petrol+ " Diesel : "+price_diesel);

        if(status != null)

        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            }
        });

        alertDialog.show();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:32:36.597

您必须在每次关闭它后重新初始化它。在 onClickListener 一侧初始化您的警报对话框。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T10:20:14.170

我认为您的变量： alert 和 input1 未初始化。你能复制错误信息吗？你可以读取行号来查找错误，ok。

# excel - 如何在Excel中获取最新日期的对应值？

> ID：14623171
> 
> 赞同：0
> 
> 时间：2013-01-31T10:09:08.380
> 
> 标签：excel, excel-2007, vlookup

我的excel中有这个值：

```
 A      B       C        D             
  StaffId  FSales  ESales    Date  
      1     100     500     23-Jan-13
      1     50      170     25-Jan-13
      1     70      230     26-Jan-13
      2     100     300     25-Jan-13  
      2     130     200     27-Jan-13 
```

想要的结果：

```
 A      B       C        D             
  StaffId  FSales  ESales    Date  
      1     100     500     23-Jan-13 10:00:00AM
      1     50      170     25-Jan-13 11:00:00AM
      1     70      230     26-Jan-13 11:30:00AM
      2     100     300     25-Jan-13 03:00:00PM 
      2     130     200     27-Jan-13 02:00:00PM
      3     100     200     29-Jan-13 01:01:00PM
      3     90      209     29-Jan-13 01:00:00PM

      A      B       C        D             
  StaffId  FSales  ESales    Date 
      1      70      230     26-Jan-13 11:30:00AM
      2      130     200     27-Jan-13 02:00:00PM
      3      100     200     29-Jan-13 01:01:00PM 
```

可以说日期是混乱的，没有按任何顺序排列。如何获取每位员工的最新日期 Fsales 和 ESales？
意思是为 1 号员工获得 70 230，为 2 号员工获得 130 200。请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:16:34.607

假设您在 Sheet2 中有第二个具有唯一员工 ID 的列表，在 Sheet1 中有原始列表，从第 2 行开始，输入以下公式：

Sheet2!B2 中的 FSales 最大值：`=INDEX(Sheet1!$B:$B,MATCH(MAX(Sheet1!$D:$D*(Sheet1!$A:$A=A2)),(Sheet1!$D:$D*(Sheet1!$A:$A=A2)),0))`

Sheet2!C2 中的 ESales 最大值：`=INDEX(Sheet1!$C:$C,MATCH(MAX(Sheet1!$D:$D*(Sheet1!$A:$A=A2)),(Sheet1!$D:$D*(Sheet1!$A:$A=A2)),0))`

这两个公式都是数组公式，即用`Ctrl`-`Shift`而`Enter`不是`Enter`.

# c# - 如何返回上一页并在c#中保留上一页数据

> ID：14623172
> 
> 赞同：0
> 
> 时间：2013-01-31T10:09:13.963
> 
> 标签：c#, asp.net

我正在开发一个使用 Asp.net 3.0 开发的零售网站。我有一个购物车系统，所以当用户将一些商品添加到他们的购物车时，他们会被重定向到购物篮页面。我在篮子页面上有一个按钮，让他们返回添加更多项目。我不知道该怎么做。

情况就是这样。

```
Home Page -> Mens Clothing Product List -> Jeans Page -> Basket pgae 
```

现在，当用户访问男装时，他们会看到所有商品，然后他们会选择一件他们想购买的牛仔裤，然后他们会被重定向到牛仔裤页面。现在他们将商品添加到他们的购物篮并重定向到购物篮页面，现在我在购物篮页面上有一个名为“继续购物”的按钮，当他们点击时（截至目前，他们被重定向到主页）但我需要他们重定向到男装产品列表而不是主页。

```
CASE 1 
```

我用谷歌搜索了它，发现我们可以使用 URLReferrer 并检查它是否为空。但在我的情况下，它始终是篮子页面 URL，因为我在牛仔裤页面上使用 Response.Redirect。所以我不能使用 URLReferrer。

```
CASE 2 
```

我还发现使用 Javascript History 我们可以回到 1 或 2 页。但是因为我想保留用户数据和 CART 我也不能使用它，因为它会使用浏览器缓存并且不会保存任何用户数据。

```
CASE 3 
```

我正在考虑使用上下文或会话将当前页面 URL 存储在牛仔裤页面上，我可以在篮子页面中检查它，如果它不为空，则重定向到该页面。但我想再退一步，即。男装页面不是牛仔裤页面。

我真的不确定这是否是一个好主意。请建议。

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:21:51.237

使用**Response.Redirect**转到所需的页面并使用**会话**存储 Basketdata。

对于重定向使用：

```
protected void btn_click(object sender, EventArgs e)
{
    Response.Redirect("desired page.aspx");
} 
```

用于存储使用数据集或数据表并将其存储在会话中。

```
 Session["items"] = ur_DataTable as DataTable;

     or

     Session["items"] = ur_DataSet as DataSet; 
```

ur_Datatable 或 ur_DataSet 将包含您添加的产品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:46:04.390

要渲染另一个页面并保存其数据以在当前页面中访问，请执行以下操作

```
protected void button_Click(Object sender,EventArgs e )
{
   session["give your prefered Name to session"]=your value.its whatever
   response.redirect("your Page URL to Redirect from this page to that page");
} 
```

现在访问您在另一个页面上的会话中存储的值。执行以下操作，会话返回的默认值是“对象”类型，因此您可以使用显式转换转换为任何数据类型

在这里，我将对象值转换为字符串，

```
protected void Page_Load(object sender, EventArgs e)
{
    string value=session["Use Same Name as u have given to it"].ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:26:03.827

在 asp.net 中进行简单状态管理的一种方法是使用隐藏字段。使用隐藏字段存储位置并将位置传递到购物篮页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T10:30:13.917

> Now when users go to "Mens Clothing" they see all the items, then they select one "Jeans" they want to buy and they are redirected to "Jeans" Page. Now they add items to their basket and they are redirected to "Basket" Page.
> 
> Now I have a button on "Basket" page called "Keep Shopping". When they click I need to redirect them to Mens Clothing Product List instead of Home Page.

Now you say you want to redirect to the "Mens Clothing" page, but you have to determine **why** you want to redirect to that page. If it always is that page, then hardcode that:

```
Response.Redirect("Shop/Categories/Mens-Clothing"); 
```

Though when the page you want to return to depends on what item was added to the basket, you need to realize **what** page you want to redirect to and how the relation of that page is with regard to the item.

The Basket page knows what item is being added to the basket. If you for example want to redirect to the category page for that item, look up the category this item is in, and redirect to that page:

```
Response.Redirect("Shop/Categories/" + item.Category.Name); 
```

Although this will redirect you to the "Jeans" page, because that is the choosen item's category.

Now it looks like you want to redirect to the parent category of the category the item is in. Then you user that:

```
Response.Redirect("Shop/Categories/" + item.Category.ParentCategory.Name); 
```

Or whatever your data model looks like.

# c# - 负载测试 Web 服务

> ID：14623173
> 
> 赞同：2
> 
> 时间：2013-01-31T10:09:14.133
> 
> 标签：c#, web-services, load-testing

我被要求对我们客户托管的外部 Web 服务进行负载测试。

基本上是向服务发送多个 Web 请求，以及服务处理所有请求所需的时间。尝试并模拟多个不同的用户从不同的机器访问 Web 服务。测试将检查 Web 服务是否可以处理此问题，并基本上为客户端提供一些指标和示例……例如，它需要多长时间才能响应 50 个请求。

我知道这可以通过使用像 SoapUI/LoadUI 这样的工具来实现。

我想知道的是无论如何我可以使用 C# 编写负载测试吗？

目前，我有以下几点：

```
 [Test]
    public void TestService50Requests()
    {
        List<WebRequest> requests = CreateMultipleRequests(50); //Creates web request objects

        string timeSpan = TimeMultipleRequests(requests);

        Console.WriteLine("50 Requests runtime: " + timeSpan);
    }

    private void TimeMultipleRequests(List<WebRequest> requests)
    {
       var stopWatch = new Stopwatch();
       stopWatch.Start();

       foreach (var request in requests)
       {
            request.GetResponse();
       } 

       stopWatch.Stop();
       var timeSpan = stopWatch.Elapsed;
       return String.Format("{0:00} hours, {1:00} minutes, {2:00} seconds, {3:00} milliseconds", timeSpan.Hours, timeSpan.Minutes, timeSpan.Seconds, timeSpan.Milliseconds / 10);           
    } 
```

我认为有更好的方法来做到这一点？有什么改进建议还是完全错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:20:06.530

这实际上取决于您要测试的内容。负载测试可用于对系统施加压力（破坏系统需要多少并发用户）或浸泡（长时间中等负载）系统。您的代码不会向系统发送任何并发请求，因此不能将其视为模拟用户真实行为的良好测试。

有很好的工具来完成这些，但它们可能很昂贵。如果您可以使用[Visual Studio Ultimate](https://msdn.microsoft.com/en-gb/library/vstudio/dn250793.aspx)，那么其中包含的[负载测试工具](https://msdn.microsoft.com/en-gb/library/vstudio/dn250793.aspx)非常好。您还可以查看[WAPT](http://www.loadtestingtool.com/index.shtml)，这是一个可以做类似事情的工具。

所以，我会回到给你要求的人那里，询问具体需要测试什么。是系统可以处理的并发用户数、没有内存泄漏、系统可用性还是性能？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:14:05.220

提出 SoapUI 的另一种替代方案 - 我会使用[JMeter](http://jmeter.apache.org/)而不是尝试在 C# 中进行。

从首页：

> Apache JMeter 功能包括：
> 
> *   可以负载和性能测试许多不同的服务器类型：
>     
>     
>     *   肥皂

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T08:01:56.977

我将解释如何在 Visual Studio 中为 Web 服务创建负载测试 创建负载测试项目 创建负载测试项目的第一步。为此，请执行以下步骤 **步骤：**

打开 Visual Studio 实例

通过单击新建 > 项目…创建一个新项目。

单击“测试”，然后使用 C# 选择“Web 性能和负载测试项目”，提供任何合适的名称，然后单击“确定”。

创建项目后使用记录器创建性能测试第二步是创建性能测试，它可以使用记录器创建或直接调用 HTTP 请求在这里我们将使用记录器记录 HTTP 请求。步骤：添加性能测试 左键单击您的项目并打开添加 > Web 性能测试。

注意：将自动添加一个 Web 测试，如果需要，您也可以重命名它 如果记录器打开关闭它，否则只需左键单击您的测试并单击“添加 Web 服务请求”。

从左窗格的属性中将本地主机发布方法更改为用户 Web 服务地址

在 Body Properties 中选择 Content Type 作为 Text /XML 并在 String Body 中提供您的 XML 。例如，请注意使用 SOAP 1.2 请求，因为我们正在使用 .net 框架 4.0 或 4.5 单击确定

参数化脚本我们知道在负载测试中会模拟多个用户，因此在某些情况下，所有用户都需要一个唯一的数据集，因此参数化请求非常重要。为此，需要完成以下步骤
我们需要一个数据源来将我们的参数与 Excel 或 SQL Server 表中的数据绑定。为此，单击突出显示的图标创建数据源。

如果要从 CSV 文件中获取参数数据，请选择 CS，否则选择数据库。

在 SQL Server 的情况下，通过执行所需的步骤并最后选择表来创建与 DB 的连接。现在打开 Web 服务正文 XML 并在其标记中参数化参数类型 .Name of CSV file .Field Name}} 例如

```
{{DataSource1.test#csv.ID}} 
```

这种方式参数化Web服务的所有必需参数。

**添加负载测试** 现在，在创建性能测试后，您需要针对它创建负载测试。为此，请执行以下步骤。步骤：左键单击项目并打开

将打开一个窗口单击下一步

命名您的方案，选择思考时间，然后单击下一步

根据您的要求和测试机器规格选择用户计数。

选择测试模型

添加您的性能测试通过单击将包含在负载测试中的添加

选择您的测试

以这种方式配置您的负载测试并继续

执行负载测试。完成所有配置后，只需启动负载测试

当负载测试开始时，将显示以下图表

**生成报告** 生成负载测试报告的方法有很多种，一种是使用 excel 自动创建报告，第二种是准备报告，你自己只需要数据我通常需要的是响应时间和它的图表，我只是像上面那样制作报告下面在电子邮件形式中提到，但这取决于需要。

[您可以在此链接](http://testingtoolstecniques.blogspot.com/2014/08/load-testing-soap-web-service-with-ms.html?view=sidebar)上找到基本教程

# c# - Internet Explorer 8 设计问题

> ID：14623183
> 
> 赞同：0
> 
> 时间：2013-01-31T10:09:47.970
> 
> 标签：c#, asp.net, internet-explorer-8

我正在开发一个跟踪假期的工具的项目，并且该应用程序的某些部分（报告管理），“用户”角色不应该看到。到目前为止，这没有问题，但不知何故，“用户”不应该看到的部分的表示看起来很糟糕：

![在此处输入图像描述](../Images/c606510ae090cb8130683b03bae41aaa.png)

应该在页面上看到某些内容的权限在 Web.sitemap 中进行控制

```
 <siteMapNode title="Vacation" roles="Administrator,Location Business Leader,Business Leader,Department Leader" description="All employees with vacation" url="~/EmployeeView/UserVacationGrid.aspx" /> 
```

如果有人遇到同样的问题，您能否给我一些好的提示或解决方案如何解决这个问题，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:20:16.747

问题是您隐藏的任何内容（客户端或服务器端）都没有封装所有关联的控件。例如，如果您使用的是 ASP.NET 菜单，那么您可以使用以下代码隐藏菜单选项服务器端：

```
switch (UserRole) {
    case "Administrator":
        Menu1.Items.Item(0).Enabled = false;
        break;
} 
```

这些控件将确保使用该选项折叠所有关联的 HTML。但是，如果您使用自己的控件或隐藏客户端的内容，则需要确保隐藏`<div>`包含控件的整个容器（即）。一个很好的方法是使用 jQuery：

```
$("#divVacationControl").hide(); 
```

确定 IE8 中哪些控件未被隐藏并留下不受欢迎的外观的最佳选择是使用 IE 开发人员工具栏。您可以通过 F12 按钮或**工具 -> 开发人员工具**访问它也可以从这里下载：http: [//www.microsoft.com/en-us/download/details.aspx?id=18359](http://www.microsoft.com/en-us/download/details.aspx?id=18359)

打开后，使用“单击选择元素”功能检查非隐藏元素并检查 DOM。然后，您可以找到未隐藏的罪魁祸首并检查您的逻辑。

如果它只发生在某个浏览器中，最后一种方法是设置其兼容模式。并不是说这是最好的方法，但它是一种选择。您可以在下面我的博客文章中阅读如何做到这一点；只需使用 IE7 或任何对你有用的东西。我不会推荐这种方法作为长期解决方案，除非这是一个您可以完全控制环境的公司 Intranet 应用程序。

[使用 IE8 为 ASP.NET Intranet 站点指定文档兼容模式](http://allen-conway-dotnet.blogspot.com/2011/10/specifying-document-compatibility-modes.html)

# mschart - MSChart 关于 chart1 BeginInit 和 EndInit 是否需要始终使用它们？

> ID：14623184
> 
> 赞同：0
> 
> 时间：2013-01-31T10:09:52.673
> 
> 标签：mschart

在 MSChart 使用 chart1 并现在做事时，我使用 chart1.BeginInit 做事并使用 chart1.EndInit，我不知道这是否需要，我什至不知道什么是 chart1.Begin 的正确用法和一般结束初始化

任何人都可以“澄清”/**告诉何时使用或者根本不使用 chart1 的 BeginInit 和 EndInit 例程**会有所帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T13:16:46.070

BeginInit 和 EndInit 与 ISupportInitialize 接口相关，您可以在以下位置阅读相关信息

[http://msdn.microsoft.com/en-us/library/system.componentmodel.isupportinitialize.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.isupportinitialize.aspx)

还要为 MSChart 示例项目的 BeginInit 查找所有文件。

它主要用于设置许多相互依赖的属性，或者防止绘制消息的潜在过载或许多属性设置的内部逻辑混乱。将其视为将所有控件 Visible 属性设置为 false、进行调整然后设置控件 Visible = true 的更好方法。

如果你没有通过实现这些方法来解决问题，我不会使用它。否则从 mschart 示例项目中为您的使用建模。

# java - 进入 API 背后的设计决策

> ID：14623185
> 
> 赞同：1
> 
> 时间：2013-01-31T10:09:53.960
> 
> 标签：java, api, oop

我是创建供其他人使用的 API 的新手。我正在考虑创建 API 入口背后的设计决策。

就像 JAXB 使用一个称为`JAXBContext`入口点的类来使用其框架一样，Mockito 使用类`Mockito`本身作为入口点，并为此提供了大量静态方法。

那么在设计 API 时是否需要牢记一些经验法则？

编辑：API 负责从不同来源读取和重新加载配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:16:42.653

我建议将您的 API 设计为可加载的服务[`ServiceLoader`](http://docs.oracle.com/javase/7/docs/api/java/util/ServiceLoader.html)，类似于 DOM API。因此，您的 API 将可加载为：

```
Entry entry = ServiceLoader.load(Entry.class).next(); 
```

并且很容易拥有相同 API 的多个实现。

# r - 使用 ddply() 聚合相对直方图计数

> ID：14623187
> 
> 赞同：1
> 
> 时间：2013-01-31T10:10:04.307
> 
> 标签：r, ggplot2, histogram, plyr, reshape2

与我问的上一个问题相关（[ggplot2 如何获得 2 个直方图，y 值 = 一个计数 / 两个计数的总和](https://stackoverflow.com/questions/14522640/ggplot2-how-to-get-2-histograms-with-the-y-value-to-count-of-one-sum-of-the)），我尝试编写一个函数，该函数将 data.frame 作为响应的输入几个参与者在几个条件下的时间（RT）和准确度（正确），并输出一个“汇总”data.frame，其中的数据像直方图一样聚合。这里的特殊性是我不想获得每个箱中响应的绝对数量，而是相对计数。

我所说的相对计数是对于直方图的每个 bin，该值对应于：

```
relative_correct   = ncorrect / sum(ncorrect+nincorrect)
relative_incorrect = nincorrect / sum(ncorrect+nincorrect) 
```

结果实际上接近于密度图，只是它不是每条曲线的总和等于 1，而是正确和不正确曲线的总和。

这是创建示例数据的代码：

```
# CREATE EXAMPLE DATA
subjectname <- factor(rep(c("obs1","obs2"),each=50))
Visibility  <- factor(rep(rep(c("cond1","cond2"),each=25),2)) 
RT          <- rnorm(100,300,50)
correct     <- sample(c(rep(0,25),rep(1,75)),100)
my.data <- data.frame(subjectname,Visibility,RT,correct) 
```

首先，我需要定义一个稍后在 ddply 中使用的函数

```
histRTcounts <- function(df) {out = hist(df$RT, breaks=seq(5, 800, by=10), plot=FALSE)
                          out = out$counts} 
```

然后是 main 函数（有 2 个小问题阻止它在函数内部工作，请参见带有 ????? 的行，但在函数外部，此代码有效）。

```
relative_hist_count <- function(df, myfactors) {
  require(ggplot2)
  require(plyr)
  require(reshape2)

  # ddply it to get one column for each bin of the histogram
  myhistRTcounts <- ddply(df, c(myfactors,"correct"), histRTcounts)

  # transform it in long format
  myhistRTcounts.long = melt(myhistRTcounts, id.vars =c(myfactors,"correct"), variable.name="bin", value.name = 'mycount')

  # rename the bin names with the ms value they correspond to
  levels(myhistRTcounts.long$bin) <- seq(5, 800, by=10)[-1]-5

  # make them numeric and not a factor anymore
  myhistRTcounts.long$bin = as.numeric(levels(myhistRTcounts.long$bin))[myhistRTcounts.long$bin]

  # cast to have count_correct and count_incorrect as columns
  # ??????????????????????? problem when putting that into a function
  # Here I was not able to figure out how to combine myfactors to the other variables in the call
  myhistRTcount.short = dcast(myhistRTcounts.long, subjectname + Visibility + bin ~ correct)
  names(myhistRTcount.short)[4:5] <- c("countinc","countcor")

  # compute relative counts
  myhistRTcounts.rel <- ddply(myhistRTcount.short, myfactors, transform, 
                          incorrect = countinc / sum(countinc+countcor),
                          correct = countcor / sum(countinc+countcor)
  )
  myhistRTcounts.rel = subset(myhistRTcounts.rel,select=c(-countinc,-countcor))

  myhistRTcounts.rel.long = melt(myhistRTcounts.rel, id.vars = c(myfactors,"bin"), variable.name = 'correct', value.name = 'mycount')

  # ??????????????????????? idem here, problem when putting that into a function to call myfactors
  ggplot(data=myhistRTcounts.rel.long, aes(x=bin, y=mycount, color=factor(correct))) + geom_line() + facet_grid(Visibility ~ subjectname) + xlim(0, 600) + theme_bw()

  return(myhistRTcounts.rel.long) 
```

将其应用于数据的调用

```
new.df = relative_hist_count(my.data, myfactors = c("subjectname","Visibility")) 
```

所以首先，我需要你的帮助才能使它作为一个函数工作，并有可能在 dcast() 和 ggplot() 中使用 myfactors 变量。

但更重要的是，我几乎可以肯定这个函数可以用更少的步骤以更优雅、最直接的方式编写。

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:54:42.113

也许这有助于设置数据？

```
countfun <- function(x,...) {
  res <- hist(x,plot=FALSE,...)
  data.frame(counts=res$counts,
             break1=res$breaks[-length(res$breaks)],
             break2=res$breaks[-1])
}

library(plyr)
plot.dat <- ddply(my.data,.(Visibility),function(df){
  res <- ddply(df,.(correct),function(df2) {countfun(df2$RT,breaks=seq(100, 600, by=10))})
  res$freq2 <- res$counts/nrow(df)
  res
}) 
```

您可能需要将整个`parse`, `eval`,`as.formula`东西概括为任意因素。我现在没有时间。

但是，如果您打算进行概括，最好修改`hist`函数以接受一个参数以用作计数的因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:25:11.787

感谢 Roland，我没想过要写一个自制的 hist 函数。请在下面找到它：

```
RelativeHistRT <- function (df, breaks = seq(5,800,10)) 
{
  distrib.correct   = hist(df$RT[df$correct==1], breaks, right=FALSE, plot=FALSE)
  distrib.incorrect = hist(df$RT[df$correct==0], breaks, right=FALSE, plot=FALSE)

  n.total = sum(distrib.correct$counts) + sum(distrib.incorrect$counts)

  data.frame(bin_mids  = distrib.correct$mids,
         correct   = distrib.correct$counts / n.total,
         incorrect = distrib.incorrect$counts / n.total)
} 
```

并将其应用于我的原始 data.frame 并获得我正在寻找的内容：

```
myhistRTcounts <- ddply(my.data, .(subjectname,Visibility), RelativeHistRT) 
```

这确实要短得多，并且完全符合我的要求。

# javascript - ExtJS getCmp Panel by id 不序列化？

> ID：14623190
> 
> 赞同：0
> 
> 时间：2013-01-31T10:10:10.217
> 
> 标签：javascript, extjs, sencha-touch-2

不幸的是，我找不到任何有关通过 id 获取“Ext.tab.Panel”的有用信息。我将更具体地说明来源：

我正在定义一个要使用的面板：

```
Ext.define('MyMobileApp.view.Main', {
extend: 'Ext.tab.Panel',
xtype: 'main',
id: 'mainTabPanel',
.... 
```

在此面板中包含的当前活动视图中，我创建了一个按钮并在其上放置了一个处理程序：

```
xtype: 'button',
text: 'Switch View',    
handler: function () {
    var main = Ext.getCmp('mainTabPanel'); //.getActiveTab();
    main.setActiveTab(Ext.getCmp('AnotherView'));
... 
```

其中“AnotherView”是视图的 id，它也是面板的一部分。
但是在尝试“setActiveTab”时出现错误：

```
Uncaught TypeError: Object [object Object] has no method 'setActiveTab' 
```

看起来 extjs 正在寻找一个对象，但无法序列化？

我想做的就是通过自定义按钮处理程序切换视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:19:00.307

问题在于，选项卡面板没有该功能`'setActiveTab'`

你必须`'setActiveItem'`改用。

Sencha Touch 2 Api：[http ://docs.sencha.com/touch/2-1/#!/api/Ext.tab.Panel-method-setActiveItem](http://docs.sencha.com/touch/2-1/#!/api/Ext.tab.Panel-method-setActiveItem)

```
xtype: 'button',
text: 'Switch View',    
handler: function () {
    var main = Ext.getCmp('mainTabPanel'); //.getActiveTab();
    main.setActiveItem(Ext.getCmp('AnotherView'));
    //main.setActiveItem(1); //You can also set the new item with the index of it
    ... 
```

# c# - 在 asp.net 中不使用 itextsharp.dll 将 HTML 页面转换为 PDF

> ID：14623193
> 
> 赞同：-2
> 
> 时间：2013-01-31T10:10:26.503
> 
> 标签：c#, asp.net, pdf-generation, html-to-pdf, pdf-conversion

我正在使用带有 C# 的 asp.net。我想将我的 html 页面转换为 pdf。但我不想同样使用“itextsharp.dll”。

我去了很多谷歌和网站。我正在寻找一些免费的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:29:16.903

默认情况下，asp.net 中没有这样的内置功能。您必须为此使用任何第三方 dll。我建议看看 PDFSharp 库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:20:26.893

看看[PdfSharp](http://www.pdfsharp.com/PDFsharp/)。它是一个开源库，可以轻松地从任何 .NET 语言创建 PDF 文档。

# vb.net - 从 SqlServer 获取最后一个 UserID 到文本框控件

> ID：14623194
> 
> 赞同：0
> 
> 时间：2013-01-31T10:10:27.770
> 
> 标签：vb.net, sql-server-2008

我有一个表`customers`，其中每个客户都有`UserID`“ **A000”**现在我需要从数据库中获取**最后**输入**`ID`**的信息并将其显示在我的文本框中。

谁能建议我该怎么做？

正如我看到的许多文章描述的

```
SELECT @@IDENTITY
SELECT SCOPE_IDENTITY()
SELECT IDENT_CURRENT('TableName') 
```

但不知道在哪里正确使用它。

这就是我的做法：

```
 Dim strConnection As String = "Data Source=.\SqlExpress;Initial Catalog=Subscription;Integrated Security=True"
 'Establish SQL Connection
 Dim con As New SqlConnection(strConnection)
 'Open database connection to connect to SQL Server
 con.Open()
 'Data table is used to bind the resultant data
 Dim dtusers As New DataTable()
 'Create a new data adapter based on the specified query.
 Dim da As New SqlDataAdapter("SELECT MAX(UserID) FROM Customers", con)
 Dim cmd As New SqlCommandBuilder(da)
 da.Fill(dtusers)
 con.Close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:20:48.417

使用[ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)：

```
Dim comm as new SqlCommand
comm.CommandText = "SELECT MAX(UserID) FROM Customers"
comm.Connection = con

Dim MaxUserID as object = comm.ExecuteScalar() 
```

> 使用 ExecuteScalar 方法从数据库中检索单个值（例如，聚合值）

旁注：`ExecuteScalar()`如果命令的结果为空，例如表中没有记录或存在不产生任何记录的条件，则可能返回空引用（在 VB.NET 中为空）。确保在将值分配给您的 TextBox 之前进行检查。

# lexer - 如何使用 antlr 4 TokenStream 作为可迭代流？

> ID：14623195
> 
> 赞同：5
> 
> 时间：2013-01-31T10:10:28.687
> 
> 标签：lexer, antlr4

我使用 antlr 4 创建了一个词法分析器，用于对土耳其自然语言文本进行标记，我需要做的是有一个标记流，我可以一个一个地获取标记。如果我像这样使用 CommonTokenStream ，它会返回一个列表：

```
ANTLRInputStream inputStream = new ANTLRInputStream(input);
TurkishLexer lexer = new TurkishLexer(inputStream);
CommonTokenStream tokenStream = new CommonTokenStream(lexer);
List<Token> tokens = tokenStream.fill();
for (Token token : token) ... 
```

但是我不想构建一个令牌列表，因为我的输入可能很大，我只想要这样的东西：

```
for (Token token: tokenStream.next()) ... 
```

我会迭代直到获得 EOF 令牌。

是否有允许我迭代令牌的令牌流？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T14:24:44.823

而不是使用 a `CommonTokenStream`，您可以简单地使用`Lexer.nextToken`.

```
for (Token token = lexer.nextToken();
     token.getType() != Token.EOF;
     token = lexer.nextToken())
{
    ... 
```

# mysql - mysql过程中的更新语句不起作用

> ID：14623196
> 
> 赞同：5
> 
> 时间：2013-01-31T10:10:28.343
> 
> 标签：mysql, stored-procedures, java-stored-procedures

这是我的程序代码。我正在尝试通过将旧用户名放在 where 子句中来更新用户名。但它不起作用。

```
 DELIMITER $$

    DROP PROCEDURE IF EXISTS `databasename`.`UpdateUsername` $$

    CREATE DEFINER=`root`@`localhost` PROCEDURE `UpdateUsername`
(IN  uname   VARCHAR(30),tid  VARCHAR(100),username VARCHAR(30)  )

BEGIN

UPDATE table_name SET Username=username WHERE Username=uname;

END $$ 
DELIMITER ; 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:07:06.947

尝试从行号“6”中删除“用户名”并使用其他参数名称。它可能与您的表用户名字段冲突。例如：`UPDATE table_name SET Username=OTHER_PARAMETER_NAME WHERE Username=uname;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:42:08.013

如果 tid 是表名，您不应该在更新查询中使用 tid 而不是 table_name 吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-27T13:34:09.863

嗨我遇到了同样的问题给表名一个别名并尝试运行更新查询

试试这个查询

```
UPDATE table_name  tn SET tn.Username=username WHERE tn.Username=uname; 
```

我使用的查询是：

```
update file_structure fs set fs.active_status = 'N' where fs.fileid = temp_fileid and fs.appid = temp_appid; 
```

# codeigniter - Codeigniter 中的 Https (SSL) 无法正常工作

> ID：14623204
> 
> 赞同：1
> 
> 时间：2013-01-31T10:10:48.530
> 
> 标签：codeigniter, https

`.click`我有一个使用 jquery函数的带有多个表单的 CI 站点，当我`http`运行良好时，当我更改为`https`所有表单时，单击按钮无法触发，它也发生在 localhost 和 Web 主机中，是否需要配置在 https 中运行 CI？

请指教，谢谢！

**解决了：**

我只是从中删除了 url `$config['base_url']`，现在问题已经解决了，但是我想知道运行 https 时无法设置值是`$config['base_url']`怎么回事？希望有人能解决我的疑问。

谢谢你花时间查看我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:25:42.860

设置您的`base_url`协议独立：

```
$config['base_domain'] = 'yourdomain.com'; // a new config item if you need to get your domain name
if (isset($_SERVER['HTTP_HOST']))
{
  $protocol = ($_SERVER['SERVER_PORT'] == 443 ? 'https://' : 'http://');
  $config['base_url'] = $protocol.$_SERVER['HTTP_HOST'];
  $config['base_url'] .= str_replace(basename($_SERVER['SCRIPT_NAME']),"",$_SERVER['SCRIPT_NAME']);
}
else
{
  $config['base_url'] = '';
} 
```

我猜您的 ajax 请求失败是因为您试图从安全站点访问不安全的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-21T05:19:56.597

我有一个类似的问题。我只是将文件中的基本 URL 从 更改为`HTTP`，它适用于两种协议。`HTTPS``config`

```
# Base URL in codeigniter with HTTP
$config['base_url'] = 'http://mysite.abc/';

# Base URL in codeigniter with HTTPS
$config['base_url'] = 'https://mysite.abc/'; 
```

请记住，当您更改`HTTP`为时`HTTPS`，该站点应该适用于两种协议，但反之则不行。

# android - 调整 Imageview 和 fitXY

> ID：14623208
> 
> 赞同：0
> 
> 时间：2013-01-31T10:11:06.130
> 
> 标签：android

我正在调整 ImageView 的大小并自动调整图像的大小，我需要它来放大和缩小图像，这是我希望实现的方式，因为图像已经是 2048x2048 并且我无法重新调整它的大小。但是代码由于某种原因只能工作一次，第二次点击什么也不做。如果您有其他想法或建议，我很乐意听取他们的意见。谢谢你。

```
ImageView map = (ImageView) findViewById(R.id.imageViewMap);
Bitmap mapIm = BitmapFactory.decodeResource(getResources(),R.drawable.myMap);
map.setImageBitmap(mapIm); //first view

zoomIn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {

            map.getLayoutParams().height = counter*5000 ;
            map.getLayoutParams().width = counter*5000;

            BitmapDrawable bmd = new BitmapDrawable(mapIm);
            map.setImageDrawable(bmd);
            bmd = null;

            counter++;

        }
    }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T10:23:29.377

用于缩放图像视图

```
imageview.setScaleType(ScaleType.FIT_XY); 
```

或者你可以试试下面的链接希望它可以帮助你

[可缩放图像视图](https://github.com/laurencedawson/ZoomableImageView)

试试这个希望它可以帮助你

[示例缩放](https://stackoverflow.com/questions/6650398/android-imageview-zoom-in-and-zoom-out)

# android - 使用 svg 缩放 WebView。如果缩放，SVG 会被像素化

> ID：14623209
> 
> 赞同：0
> 
> 时间：2013-01-31T10:11:11.387
> 
> 标签：android, svg, webview, zooming, pixels

```
public class TWVSVGMainActivity extends Activity {  
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    WebView webView = new WebView(this);
    setContentView(webView);
    webView.getSettings().setDefaultZoom(WebSettings.ZoomDensity.FAR);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setRenderPriority(RenderPriority.HIGH);
    webView.getSettings().setUseWideViewPort(true);
    webView.getSettings().setBuiltInZoomControls(true);     
    webView.getSettings().setDisplayZoomControls(false);
    webView.loadUrl("file:///android_asset/003.svg");
}} 
```

缩放 SVG 图像后，它被像素化。

我想将 svg 加载到 WebView，并且我希望 *.svg 文件中的文本不被像素化。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T11:59:39.393

这就是我如何让我的 SVG 文件显示在 Jelly Bean WebView 中：

我使用 embed 标记将 SVG 包含到 HTML 文档中：

`<embed width="100%" height="100%" src="{{ svg_url }}" type="image/svg+xml"/>`

包含宽度和高度属性非常重要，否则 SVG 会在 Jelly Bean WebView 中出现截断。

感谢 Chab（见上文），我还必须在 HTML 页面中包含一些随机文本。像这样的东西起到了作用：

`<span style="color:White;">hidden</span>`

我还必须将`<meta name="viewport" content="initial-scale = 1.0, user-scalable = yes">`标签与`webView.getSettings().setUseWideViewPort(true);`SVG 一起设置，以便在不切断部分图像的情况下进行缩放。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T10:32:59.833

这就是我能够在 WebView 中缩放 SVG 并最初完全缩小显示它的原因：

```
setInitialScale(1);
WebSettings settings = getSettings();
settings.setSupportZoom(true);
settings.setDefaultZoom(WebSettings.ZoomDensity.FAR);
settings.setDisplayZoomControls(true);
settings.setBuiltInZoomControls(true);
settings.setUseWideViewPort(true); 
```

# java - 跨开发人员共享 Maven 存储库

> ID：14623212
> 
> 赞同：9
> 
> 时间：2013-01-31T10:11:17.733
> 
> 标签：java, maven, maven-3

有没有办法避免开发人员下载所有依赖项并将这些依赖项定位到所有开发人员的共享位置，并且每个从事项目工作的开发人员都指向该位置？

任何人都可以用示例文件和示例进行解释吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T10:16:49.220

最好是使用 maven 的存储库管理器之一。设置的主要步骤将是： - 在内部机器上安装中央存储库 - 配置中央存储库以代理开发人员所需的存储库 - 修改开发人员 maven 设置以使用内部 maven 存储库作为所有内容的镜像（请参阅[在这里](http://maven.apache.org/guides/mini/guide-mirror-settings.html)了解详情）

有 3 个著名的存储库管理器可用：

*   神器：[http ://www.jfrog.com/home/v_artifactory_opensource_overview](http://www.jfrog.com/home/v_artifactory_opensource_overview)
*   阿帕奇档案：http: [//archiva.apache.org/index.cgi](http://archiva.apache.org/index.cgi)
*   Sonatype Nexus： http: [//www.sonatype.org/nexus/](http://www.sonatype.org/nexus/)

我最喜欢 Artifactory - 安装和配置不到一个小时。现在，如果开发人员向 maven 项目添加新的依赖项，该工件将从原始远程存储库下载到内部存储库并可用。当下一个开发人员需要存档时，将从内部存储库下载它 - 访问速度会快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:14:47.680

您可以像这样更改本地存储库：

```
The location of your local repository can be changed in your user configuration. The default value is ${user.home}/.m2/repository/.

<settings>
  ...
  <localRepository>/path/to/local/repo/</localRepository>
  ...
</settings> 
```

[看这篇文章](http://maven.apache.org/guides/mini/guide-configuring-maven.html)

我认为，如果您创建共享文件夹并且所有其他开发人员写入该文件夹的路径，这会有所帮助。（但我没有尝试过）

**更新**

使用共享仓库是个坏主意。在两个或多个用户之间共享本地存储库不是线程安全的，并且可能导致不同的错误。
所以这里提到的很多人都使用[Artifactory](http://www.jfrog.com/home/v_artifactory_opensource_overview)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:18:00.063

我想你正在寻找[http://www.jfrog.com/home/v_artifactory_opensource_overview](http://www.jfrog.com/home/v_artifactory_opensource_overview)

Artifactory 有很好的用户指南并且易于理解。我没有太多经验，但它真的很强大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T10:32:13.297

Maven 正在解决和更新依赖项。您将始终在某个地方拥有您的仓库的本地实例。您可以在 .m2 文件夹的 settings.xml 中配置本地存储库和其他配置文件。

例如，本地回购看起来像

`<localRepository>C:/dev/.m2/repository</localRepository>`

它可能还解决了共享文件系统。您还可以在文件共享上为您自己的 Maven 工件添加一个内部存储库，如下所示

```
<repository>
     <id>internal.releases.upload</id>
     <name>Internal repo</name>
      <url>file:////data/repo</url>
</repository> 
```

例如。在此处阅读有关存储库的更多信息[http://maven.apache.org/guides/introduction/introduction-to-repositories.html](http://maven.apache.org/guides/introduction/introduction-to-repositories.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T10:19:00.603

我明白你想要什么，但我确定你这不是一个好主意。因为一旦 2 个开发人员同时开始在同一个项目上工作，以后的冲突就会发生

# django - 如何知道在 Django 中在此上下文中共享此文件的所有者？

> ID：14623219
> 
> 赞同：0
> 
> 时间：2013-01-31T10:11:38.250
> 
> 标签：django

我有一张这样的桌子：

```
+----+----------+----------+----------------+----------------------------------+
| id | users_id | files_id | shared_user_id | shared_date                      |
+----+----------+----------+----------------+----------------------------------+
|  3 |        1 |        1 |              2 | 2013-01-31 14:27:06.523908+00:00 |
|  2 |        1 |        1 |              2 | 2013-01-31 14:25:37.760192+00:00 |
|  4 |        1 |        3 |              2 | 2013-01-31 14:46:01.089560+00:00 |
|  5 |        1 |        1 |              3 | 2013-01-31 14:50:54.917337+00:00 | 
```

现在我想知道共享文件的每个文件的所有者。对于文件 1，users_id 为 1。我想从默认的 Django auth_user 表中获取 users_id 1 的名称。我想获取每个文件的用户名。我怎样才能做到这一点？

```
#models.py
from django.db import models
from django.contrib.auth.models import User

class File(models.Model):
    users = models.ForeignKey(User)
    file_name = models.CharField(max_length=100)
    type = models.CharField(max_length=10)
    source = models.CharField(max_length=100)
    start_date = models.TextField()
    end_date = models.TextField()
    duration = models.TextField()
    size_overview = models.IntegerField()
    size = models.TextField()
    flag = models.TextField()
    #delete_date = models.CharField(max_length=100, null=True, blank=True)

class Share(models.Model):
    users = models.ForeignKey(User)
    files = models.ForeignKey(File)
    shared_user_id = models.IntegerField()
    shared_date = models.TextField()

class Host(models.Model):
    name = models.TextField()
    full_path = models.TextField() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:36:24.643

正如我之前对你说过的，你的模型结构有点奇怪——特别是`Share.shared_user`应该是 ForeignKey，而不是 IntegerField。在这种情况下，您可以通过将`users`ManyToManyField from `File`to用作表格`User`来帮助解决问题：`Share``through`

```
class File(models.Model):
    users = models.ManyToManyField(User, through='Share') 
```

现在给定一个`File`实例，您可以简单地执行以下操作：

```
my_file.users.count() 
```

# mysql - 如何从文件中获取特定单词以及如何更新表格中的单词

> ID：14623221
> 
> 赞同：0
> 
> 时间：2013-01-31T10:11:42.373
> 
> 标签：mysql, linux, bash, unix

我有一个文件：

```
$ cat dd.txt
*************************** 1\. row ***************************
            File: log-bin.00005
        Position: 120614936
    Binlog_Do_DB:
Binlog_Ignore_DB: 
```

我只想要上面文件中的这些值`log-bin.000055, 120614936`

现在我想`file,position`在我的从表中更新。

```
update db.position set binlog_file='log-bin.000055',position='120614936' where master_host='master.tb.com'; 
```

如何为它编写一个简单的脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:28:26.950

使用`GNU Grep`和[积极的向后看](http://www.regular-expressions.info/lookaround.html)：

```
$ grep -Po "(?<=File: )[^ ]+|(?<=Position: )[0-9]+" dd.txt
log-bin.00005
120614936

# Store file in variable 
$ file=$(grep -Po "(?<=File: )[^ ]+" dd.txt)

# Store position in variable
$ pos=$(grep -Po "(?<=Position: )[0-9]+" dd.txt)

# Generate query using variable and store in variable
$ query="update db.position set binlog_file='"$file"',position='$pos' where master_host='master.tb.com';"

$ echo $query    

update db.position set binlog_file='log-bin.00005',position='120614936' where master_host='master.tb.com';

# Pipe query to mysql
$ echo $query | mysql -u user -ppassword 
```

作为脚本：

```
#!/bin/bash

file=$(grep -Po "(?<=File: )[^ ]+" dd.txt)
pos=$(grep -Po "(?<=Position: )[0-9]+" dd.txt)

$ query="update db.position set binlog_file='"$file"',position='$pos' where master_host='master.tb.com';"
$ echo $query | mysql -u user -ppassword 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:14:13.327

要获取指定的数据，您可以执行以下操作：

```
cat dd.txt | egrep "File|Position" | cut -d: -f2 
```

# stack-overflow - 使用 onejar-maven-plugin 创建的签名 jar 引发 stackoverflow 异常

> ID：14623222
> 
> 赞同：3
> 
> 时间：2013-01-31T10:11:48.483
> 
> 标签：stack-overflow, jarsigner, onejar

我有一个使用 jar 创建的 jar，`onejar-maven-plugin`用于监听来自 tibco 的 jms 消息并进行相应处理。它工作正常，但是当我使用这个 jar 签名`jarsigner`并尝试运行它时，它会引发以下异常：

```
org.apache.commons.logging.LogConfigurationException: java.lang.StackOverflowError (Caused by java.lang.StackOverflowError)
    at org.apache.commons.logging.impl.LogFactoryImpl.newInstance(LogFactoryImpl.java:538)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:235)
    at org.apache.commons.logging.impl.LogFactoryImpl.getInstance(LogFactoryImpl.java:209)
    at org.apache.commons.logging.LogFactory.getLog(LogFactory.java:351)
    at org.springframework.context.support.AbstractApplicationContext.<init>(AbstractApplicationContext.java:160)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.<init>(AbstractRefreshableApplicationContext.java:89)
    at org.springframework.context.support.AbstractRefreshableConfigApplicationContext.<init>(AbstractRefreshableConfigApplicationContext.java:59)

    at org.springframework.context.support.AbstractXmlApplicationContext.<init>(AbstractXmlApplicationContext.java:61)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:136)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at com.adobe.jobcloud.envoy.client.PushToPrereleaseWorker.main(PushToPrereleaseWorker.java:33)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.simontuffs.onejar.Boot.run(Boot.java:340)
    at com.simontuffs.onejar.Boot.main(Boot.java:166)
Caused by: java.lang.StackOverflowError
    at com.simontuffs.onejar.OneJarFile.getJarEntry(OneJarFile.java:43)
    at java.util.jar.JarFile.getManEntry(Unknown Source)
    at java.util.jar.JarFile.getManifestFromReference(Unknown Source)
    at java.util.jar.JarFile.getManifest(Unknown Source)
    at java.util.jar.JarFile.maybeInstantiateVerifier(Unknown Source)
    at java.util.jar.JarFile.getInputStream(Unknown Source)
    at com.simontuffs.onejar.OneJarFile.getJarEntry(OneJarFile.java:50)
    at java.util.jar.JarFile.getManEntry(Unknown Source)
    at java.util.jar.JarFile.getManifestFromReference(Unknown Source)
    at java.util.jar.JarFile.getManifest(Unknown Source)
    at java.util.jar.JarFile.maybeInstantiateVerifier(Unknown Source)
    at java.util.jar.JarFile.getInputStream(Unknown Source)
    at com.simontuffs.onejar.OneJarFile.getJarEntry(OneJarFile.java:50)
    at java.util.jar.JarFile.getManEntry(Unknown Source)
    at java.util.jar.JarFile.getManifestFromReference(Unknown Source)
    at java.util.jar.JarFile.getManifest(Unknown Source) 
```

另外，如果我用`maven-jarsigner-plugin`它来签名，结果是完全一样的。我一无所知，并坚持这个问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:16:56.797

Have you tried to increase the -Xss JVM option? To 4096k at first, then lower it until it fails again. Working with ciphers generally maybe need more than default stack size. For the maven jarsigner plugin you can edit .mavenrc file in your linux home directory and add these lines:

```
#!/bin/bash
export JAVA_HOME=/usr/lib/jvm/java-6-sun-i586 #(or another)
export M2_HOME=/usr/local/lib/apache-maven/apache-maven-3.0.4
export MAVEN_OPTS="-Xss4096k -XX:MaxPermSize=128m -Xmx384m" 
```

I don't know how to do this under windows, but there must be similar solution ([here?](https://stackoverflow.com/questions/2819853/setting-java-heap-space-under-maven-2-on-windows))

# git - 每次提交后推送比多次提交后推送有什么好处和成本

> ID：14623224
> 
> 赞同：2
> 
> 时间：2013-01-31T10:11:57.437
> 
> 标签：git

我养成了`origin`在每次提交之后推送的习惯。我的大多数提交都是相当琐碎的，因为我在做了一些小改动后才提交。这是一个好习惯吗？

我的印象是，与多次提交后的推送相比，每次小提交后推送都会增加存储库的大小。这种理解是错误的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T10:24:06.333

只要您的提交仅驻留在本地存储库中，您就可以摆弄它们（`git commit --amend`修复最后一次提交，或`git rebase -i`重新排序和整理您的工作）。在提交后立即推动它们使得以后很难修复。

我喜欢每天推送一次更改，除非它们即将被其他人部署或测试。它让我有一个余地来发现我已经为时过早地做出了一些事情。

它不应该以任何方式影响存储库的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:26:28.717

> 我养成了每次提交后推送到原点的习惯。我的大多数提交都是相当琐碎的，因为我在做了一些小改动后才提交。这是一个好习惯吗？

在我看来，您不应该将每个提交都推送到原点。相反，当你完成使用一个特性来压缩较小的提交时，使用交互式变基，并将该特性作为一个提交推送到源。但对此没有明确的答案——谷歌搜索“git 工作流程”将为您提供多种选择。

> 我的印象是，与多次提交后的推送相比，每次小提交后推送都会增加存储库的大小。这种理解是错误的吗？

错误的。但是如果你在推送之前变基，那么被压扁的提交将不会在原点结束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:22:42.743

在团队中工作时，频繁的推送会让你个人的生活更轻松，因为最后推送的人需要解决合并冲突。其他不那么频繁推送的人可以通过更频繁地拉取来使他们的生活更轻松，以便在他们的存储库分歧过大之前检测到冲突。

频繁推送的缺点是，在推送提交后，您无法使用 rebase 重新排序或压缩提交，也无法再修改它们。这可能是个人的事情，但是当我有一个适合上一次提交描述的微不足道的更改时，我宁愿修改前一个而不是创建一个新的。推了之后就不能这样了。因此，当您频繁推送时，您最终会得到更多琐碎的提交，这会使 git 日志不必要地膨胀。

# java - Java - int Counter 未添加

> ID：14623229
> 
> 赞同：2
> 
> 时间：2013-01-31T10:12:08.270
> 
> 标签：java

我想知道为什么每次调用该方法时我的 policyNumber 都不会增加 1。当我运行它时，我得到了这个。

我试图让我添加的每个策略自动成为 PolicyNumber++。相反，我得到了相同的数字。相反，相同的值被分配给我制定的所有新策略。

```
run:
Policy #3 with amount $320.0
Policy #3 with amount $500.14
Policy #3 with amount $0.0
false 
```

我以前使用过这种方法，我不明白为什么它现在不起作用。有人可以阐明一下吗？谢谢！

主班

```
public class Assignment3 {

    public static void main(String[] args) {        
        Policy p1 = new Policy(320); 
        Policy p2 = new Policy(500.14);
        Policy p3 = new Policy(0);
        System.out.println(p2.policyNumber);
        p1.print(); System.out.println();
        p2.print(); System.out.println(); 
        p3.print(); System.out.println();
        System.out.println(p1.isExpired()); 
    }
} 
```

策略类

```
public class Policy {
    double amount;
    public int policyCount;
    public static int policyNumber;

    public Policy(){
        amount = 0;
        policyCount = 1;
        policyNumber=0;
    }

    public Policy(double a){
        amount = a;
        policyNumber ++;
     }

    public boolean isExpired(){
        return false;
    }

    public void print(){
        System.out.print("Policy #" + this.policyNumber + " with amount $" + this.amount);
        }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:13:56.667

问题是这`policyNumber`不是静态的。因此，它是一个实例变量，并且对于您实例化的每个对象都有自己的值。如果要使其成为类变量，则应将其声明为静态：

```
public static int policyNumber; 
```

查看[此官方文档](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)以了解类变量和实例变量之间的区别。

此外，您必须将静态计数器分配给实例变量。如果您只使用静态变量，则所有实例都将具有类变量的值。如果要为每个实例分配一个值，则必须将类变量的值复制到一个实例变量中。

```
public class Policy {
   double amount;
   public int policyCount;
   public static int policyNumber = 0;

   private int myPolicyNumber;

   public Policy(double a){
    amount = a;
    myPolicyNumber = policyNumber;
    policyNumber ++;

   //or even better
   //myPolicyNumber = ++policyNumber;

  }
} 
```

然后你的打印方法应该是这样的：

```
public void print(){
    System.out.print("Policy #" + myPolicyNumber + " with amount $" + this.amount);
} 
```

还要注意，实例变量通常应该是私有的，以遵守信息隐藏原则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:14:05.117

将其更改为

```
public static int policyNumber; 
```

static 关键字使 java 在创建新对象时保留变量的值。

看一下这个 ：

[http://www.java-samples.com/showtutorial.php?tutorialid=285](http://www.java-samples.com/showtutorial.php?tutorialid=285)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:14:28.233

将 policyNumber 作为静态变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T10:15:25.237

尝试：

```
public static int policyNumber; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T10:16:48.190

每次都在增加。

您必须了解，当您有效地调用构造函数三次时，您将创建三个不同的类策略对象，每个对象都有自己的策略编号。

如果您希望有一个类的所有对象共有的变量，请将其声明为静态的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T10:36:57.717

首先，您的 policyNumber 变量是成员变量而不是类变量。如果要跨类实例访问它，则需要将其设为静态。

```
public int policyNumber; // Not suited for your case. 
```

而是尝试以下操作：

```
public static int policyNumber = 0; 
```

其次，每次创建 Policy 类的实例时，您都会重新初始化 policyNumber。

```
public Policy()
{
    policyNumber = 0; // Why to re-initialize it as you want to persist its value.
} 
```

而是尝试以下操作：

```
public Policy()
{
    policyNumber++; 
} 
```

# iphone - 如何在 NSCalender 中设置事件？

> ID：14623230
> 
> 赞同：2
> 
> 时间：2013-01-31T10:12:09.353
> 
> 标签：iphone, ios, objective-c, calendar, eventkit

我正在尝试使用我的日历日期添加事件，如下所示：

```
- (void)viewDidLoad {

[super viewDidLoad];
self.navigationItem.title = @"Calendar";

EKEventStore *eventStore = [[EKEventStore alloc]init];
EKEvent *event = [EKEvent eventWithEventStore:eventStore];
event.title = @"Training";
event.startDate = [[NSDate alloc]init];
event.endDate = [[NSDate alloc]initWithTimeInterval:600 sinceDate:event.startDate];
//set the default calendar type
calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

// set today
today = [[NSDate alloc] initWithTimeIntervalSinceNow:1];

//set the current day to show the calendar
NSDateComponents *components = [calendar components:units fromDate:[NSDate date]];
[components setDay:1];
self.currentDate = [calendar dateFromComponents:components];

[event setCalendar:[eventStore defaultCalendarForNewEvents]];
//[event setCalendar:<#(EKCalendar *)#>]
NSError *err;
[eventStore saveEvent:event span:EKSpanThisEvent error:&err];
[self fillCalendar];
} 
```

但无法在其中添加培训事件。我想，我需要用我的替换“defaultCalenderForNewEvents” `[self fillCalender]`。但是，这不起作用。你能建议一下吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:32:33.457

在创建事件的代码中，我执行以下操作：

```
NSDate * startDate = [self.complexDatePicker date];
EKEventStore *store = [[EKEventStore alloc] init];
EKEvent * event = [EKEvent eventWithEventStore:store];
EKCalendar * defCalendar = [store defaultCalendarForNewEvents];
[event setCalendar:defCalendar];
event.startDate = startDate;
event.endDate = [NSDate dateWithTimeInterval:3600 sinceDate:[NSDate date]];
event.title = @"SeeksPack Exercises";
//Temporary hardcoded day values, user will be able to select exact days
EKRecurrenceDayOfWeek * day2 = [[EKRecurrenceDayOfWeek alloc] initWithDayOfTheWeek:3 weekNumber:0];
EKRecurrenceDayOfWeek * day4 = [[EKRecurrenceDayOfWeek alloc] initWithDayOfTheWeek:5 weekNumber:0];
EKRecurrenceDayOfWeek * day6 = [[EKRecurrenceDayOfWeek alloc] initWithDayOfTheWeek:7 weekNumber:0];
EKRecurrenceRule * rule = [[EKRecurrenceRule alloc] initRecurrenceWithFrequency:EKRecurrenceFrequencyDaily interval:1 daysOfTheWeek:[NSArray arrayWithObjects:day2, day4, day6, nil] daysOfTheMonth:nil monthsOfTheYear:nil weeksOfTheYear:nil daysOfTheYear:nil setPositions:nil end:[EKRecurrenceEnd recurrenceEndWithOccurrenceCount:25]];

event.recurrenceRules = [NSArray arrayWithObject:rule];
NSError * er;
[store saveEvent:event span:EKSpanFutureEvents commit:YES error:&er];
//The identifier should actually be stored in app bundle in order to get and modify already created events
NSString * identif = event.eventIdentifier; 
```

看一下实际保存事件的方法：

`- (BOOL)saveEvent:(EKEvent *)event span:(EKSpan)span commit:(BOOL)commit error:(NSError **)error`

正如苹果文档所说：

`Save and delete events from the event store with the saveEvent:span:commit:error: and removeEvent:span:commit:error: methods.`

所以尝试改变保存方法可能对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:16:54.423

未指定开始日期...

```
EKEventStore *eventStore = [[EKEventStore alloc] init];

EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
event.title     = @"My Event Name";

event.startDate =[NSDate date];
event.endDate   = [[NSDate alloc] initWithTimeInterval:60 sinceDate:event.startDate];

[event setCalendar:[eventStore defaultCalendarForNewEvents]];
NSError *err;
[eventStore saveEvent:event span:EKSpanThisEvent error:&err]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:40:25.113

希望下面的代码可以帮助你

```
EKEventStore *eventStore = [[[EKEventStore alloc] init] autorelease];

EKEvent *event = [EKEvent eventWithEventStore:eventStore];

EKReminder *reminder = [EKReminder reminderWithEventStore:eventStore];

event.title = @"Test Event";

reminder.title = @"Test reminder";

NSDate *cDate = [NSDate date];

NSLog(@"current date  %@", cDate);

/*NSDateComponents *startDateComponents = [[[NSDateComponents alloc] init] autorelease];

[startDateComponents setDay:12];

[startDateComponents setMonth:12];

[startDateComponents setYear:2012];

[startDateComponents setHour:12];

[startDateComponents setMinute:18];

NSDateComponents *endDateComponents = [[[NSDateComponents alloc] init] autorelease];

[endDateComponents setDay:12];

[endDateComponents setMonth:12];

[endDateComponents setYear:2012];

[endDateComponents setHour:12];

[endDateComponents setMinute:18];

[endDateComponents setSecond:20];*/

//event.startDate = cDate;

//event.endDate = [cDate dateByAddingTimeInterval:15.0];

event.startDate = [cDate dateByAddingTimeInterval:((5*60*60) + (30 * 60) + 15)];

event.endDate = [cDate dateByAddingTimeInterval:((5*60*60) + (30 * 60) + 30)];

//event.startDate = [[NSCalendar currentCalendar] dateFromComponents:startDateComponents];

//event.endDate = [[NSCalendar currentCalendar] dateFromComponents:endDateComponents];

reminder.completionDate = [cDate dateByAddingTimeInterval:((5*60*60) + (30 * 60) + 10)];

NSLog(@"startdate  %@", event.startDate);

NSLog(@"enddate  %@", event.endDate);

[event setCalendar:[eventStore defaultCalendarForNewEvents]];

//[reminder setCalendar:[eventStore defaultCalendarForNewReminders]];

NSError *error = nil;

[eventStore saveEvent:event span:EKSpanThisEvent commit:YES error:&error];

//[eventStore saveReminder:reminder commit:YES error:&error]; 
```

# backbone.js - 从主干视图重新渲染部分车把

> ID：14623232
> 
> 赞同：9
> 
> 时间：2013-01-31T10:12:14.620
> 
> 标签：backbone.js, handlebars.js, rerender

我有一个视图，其中包含车把模板。该模板由另一个部分模板组成。该部分模板包含一个结果列表，我在我的应用程序的不同部分使用它。无论如何，在尝试过滤结果时，我只想渲染那部分。意思是主干视图不应该只渲染整个视图的一部分。可以吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-31T10:35:50.680

是的，这是可能的。最简单的方法是像渲染完整视图时一样执行整个模板，但只替换视图中您需要的部分`el`。

就像是：

```
template: Handlebars.compile(templateHtml),

render: function() {
  //let's say your render looks something like this
  this.$el.html(this.template(this.model.toJSON());
},

renderList: function() {
  var html = this.template(this.model.toJSON());
  var selector = "#list";

  //replace only the contents of the #list element
  this.$el.find(selector).replaceWith($(selector, html));
} 
```

根据您的模板的动态程度，您可能必须`this.delegateEvents()`在替换列表后调用才能使视图的事件正常工作。

**根据评论编辑：**

澄清一下，我在这里提出的方法**确实会**再次执行视图的主把手模板，但**不会**再次渲染整个视图。

一步步：

1.  像在正常渲染中一样执行 Handlebars 模板功能。

    ```
    var html = this.template(this.model.toJSON()); 
    ```

    该变量`html`现在包含一个HTML 标记**字符串**。尚未渲染任何内容。

2.  为要重新渲染的元素定义一个选择器。

    ```
    var selector = "#list"; 
    ```

3.  找到要替换的 DOM 元素。这假定您已经渲染了一次视图。否则 . 内将没有`#list`元素`this.$el`。

    ```
    this.$el.find(selector) 
    ```

4.  在模板化的 html 字符串中找到对应的元素，并将现有元素替换为新元素：

    ```
    .replaceWith($(selector, html)); 
    ```

这只会替换`#list`当前页面上的元素。外部的任何东西`#list`都不会以任何方式重新渲染或触摸。

我建议您这样做而不是单独执行和渲染部分模板的主要原因是*您的视图不需要了解有关模板和模板引擎的实现细节的任何信息*。它只需要知道有一个元素`#list`。我相信这是一个更干净的解决方案，并将您的模板详细信息与您的视图逻辑分开。

# zend-framework2 - 调用成员函数 get()

> ID：14623242
> 
> 赞同：0
> 
> 时间：2013-01-31T10:12:55.313
> 
> 标签：zend-framework2

我在我的 ZF2 供应商库中创建了一个排序基础模块。到目前为止，一切都按我希望的方式工作。我确实有问题。虽然我能够扩展基本模块的控制器，但我无法访问基本服务。我使用 Doctrine 2 作为我的数据库层。

实现 ServiceLocator 后，我收到致命错误：在我的基本服务文件中的非对象上调用成员函数 get()。我的 BaseService 文件如下所示：

```
namespace MyResource\Service;

use Doctrine\ORM\Mapping as ORM;
use Zend\ServiceManager\ServiceManager;
use Zend\ServiceManager\ServiceManagerAwareInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class BaseService implements ServiceLocatorAwareInterface
{
    /**
     * Entity manager instance
     *
     * @var Doctrine\ORM\EntityManager
     */
    protected $_em;

    protected $_serviceLocator;

    public function __construct()
    {
        $this->getEntityManager();
    }

    /**
     * Returns an instance of the Doctrine entity manager loaded from the service
     * locator
     *
     * @return Doctrine\ORM\EntityManager
     */
    public function getEntityManager()
    {
        if (null === $this->_em) {
            $this->_em = $this->getServiceLocator()
                 ->get('doctrine.entitymanager.orm_default');
        }
        return $this->_em;
    }

    /**
     * Set serviceManager instance
     *
     * @param  ServiceLocatorInterface $serviceLocator
     * @return void
     */
    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
        $this->serviceLocator = $serviceLocator;
    }

    /**
     * Retrieve serviceManager instance
     *
     * @return ServiceLocatorInterface
     */
    public function getServiceLocator()
    {
        return $this->serviceLocator;
    }

} 
```

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T15:46:34.273

> ZF2 中似乎有一个小故障。如果您尝试如下设置属性，问题将得到解决。像这样试试

```
foreach ($resultSet as $row) {

        $entity = new Countrypages();
            $entity->setId($row->id);
        $entity->setName($row->name);
        $entity->setSnippet($row->snippet);
        $entity->setSortorder($row->sortorder);
        $entity->setActive($row->active);
        $entity->setCreated($row->created);
        $entity->setModified($row->modified);
        $entity->setFirstname($row->firstname);
        $entity->setCreatedby($row->createdby);
        $entities[] = $entity;
    } 
```

> 忽略这个

```
 foreach ($resultSet as $row) {

                    $entity = new Countrypages();
                    $entity->setId($row->id);
                    ->setName($row->name);
                    ->setSnippet($row->snippet);
                    ->setSortorder($row->sortorder);
                    ->setActive($row->active);
                    ->setCreated($row->created);
                    ->setModified($row->modified);
                    ->setFirstname($row->firstname);
                    ->setCreatedby($row->createdby);
                    $entities[] = $entity;
                } 
```

> 我希望这可以帮助您节省时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T09:38:35.207

1):

你的财产被称为

```
protected $_serviceLocator; 
```

但是您正在将您的值分配给

```
protected $serviceLocator; 
```

2)

您是通过 DI 还是服务管理器创建服务？如果你这样做了，那么 ServiceLocator 应该会自动为你注入，如果你使用“new”关键字手动创建它，那么它不会附加 ServiceLocatior。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-28T21:51:13.243

您正在使用`use use Zend\ServiceManager\ServiceManagerAwareInterface`但您正在实施`ServiceLocatorAwareInterface`（并且没有“使用”声明）。

# mysql - 一个字段中的 SQL 数据，以逗号分隔

> ID：14623246
> 
> 赞同：1
> 
> 时间：2013-01-31T10:12:57.967
> 
> 标签：mysql, sql

> **可能重复：**
> [我可以将多个 MySQL 行连接到一个字段中吗？](https://stackoverflow.com/questions/276927/can-i-concatenate-multiple-mysql-rows-into-one-field)

我有三个表项目，大小和 item_sizes 与连接的多对多关系我可以查询这个：

```
item     size
shirt    L
shirt    XL
dress    S
dress    L
dress    XL 
```

但我想要这个：

```
item     size
shirt    L, XL
dress    S, L, XL 
```

速度无关紧要，我只想要结果。我可以用 while 循环来做，但还有另一种方法来做这个查询吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T10:16:57.880

```
select item, group_concat(size)
from the_table
group by item; 
```

手册中的更多详细信息：http: [//dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T10:21:20.667

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/2fd4b/6)**

```
SELECT item,
       group_concat(size separator ', ') AS SIZE
FROM Table1
GROUP BY item 
```

结果：

```
|  ITEM |     SIZE |
--------------------
| dress | S, L, XL |
| shirt |    L, XL | 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T10:19:24.163

试试[GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)

```
SELECT item, GROUP_CONCAT(size)
FROM table_name
GROUP BY item 
```

# mysql - 使用 MySQL 和 JDBC 触发多个语句时的语法异常

> ID：14623249
> 
> 赞同：2
> 
> 时间：2013-01-31T10:13:00.647
> 
> 标签：mysql, jdbc, triggers, innodb

我正在尝试使用 InnoDB 创建一个在 MySQL 5.5.28**中执行多个操作的触发器。**

我有两个表，“test”和“test_watcher”：在触发器的帮助下，对第一个表的更改记录在 watcher 表中。最后一个触发器需要在 上执行 2 次操作`DELETE`，它可以在 MySQL Workbench (with `DELIMITER`) 中工作，但如果我使用 JDBC 创建它就不行。

```
CREATE TRIGGER `AD_test_FER` AFTER DELETE
  ON `test`
  FOR EACH ROW
      BEGIN
        -- if it's been inserted, modified and deleted but never synced, 
        -- the revision is NULL: no one needs to know about it
        DELETE FROM test_watcher WHERE pk = OLD.id AND revision IS NULL;

        -- if it has been synced already, we just update the flag
        UPDATE test_watcher SET flag = -1 WHERE pk = OLD.id;
      END; 
```

我不断得到`com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax`。

我知道它可以`DELIMITER $$`在 Workbench 中使用，但 JDBC 不支持它。

我已经在 PostgreSQL 中实现了它，并会在必要时发布代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:21:32.193

如果 JDBC 不支持分隔符（DELIMITER 是客户端命令），则分别执行这两个语句 - 一个一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:31:45.873

此行为可能是由[连接属性](http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html) `allowMultiQueries=true`引起的。我的猜测是这个属性将使 MySQL 将查询分解`;`为查询分隔符，然后将它们作为单独的查询执行，本质上会破坏您的触发器创建代码。

正如您在一个现已删除的答案中所说的那样，添加`allowMultiQueries=true`实际上解决了问题（与我的预期相反），问题实际上可能是`;`您查询中的最后一个问题。因此，要检查的另一件事是，通过删除脚本中的最后一个`;`(in )（而不是使用 ） ，问题是否会消失。某些数据库在语句末尾不认为是有效的（因为它实际上是分隔语句的分隔符）。`END;``allowMultiQueries=true``;`

（这个答案是基于我上面的评论）

# sql-server-2008-r2 - 按每个值更新一列

> ID：14623250
> 
> 赞同：0
> 
> 时间：2013-01-31T10:13:01.570
> 
> 标签：sql-server-2008-r2, sql-update

下面是我的表格包含持续时间为 HH:MM:SS

![我的桌子](../Images/7af702f5e4b5d60a620e9fc84dd3f7f6.png)

我可以将其转换为秒

```
SELECT  (SUBSTRING(CAST('00:01:15' AS NVARCHAR(MAX)),1,2) * 360) 
+ (SUBSTRING(CAST('00:01:15' AS NVARCHAR(MAX)),4,2) * 60) 
+  SUBSTRING(CAST('00:01:15' AS NVARCHAR(MAX)),7,2) 
```

现在我需要通过读取每一行记录来将该表更新为几秒钟？

就像我需要每一行而不是'00:01:15'`@DURATIONINSECONDS`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:29:32.360

Try like below

If your table have value like this

**Table1**

```
DurationInSeconds
00:01:15    
00:00:15    
00:01:16    
00:01:17 
```

and you want to Update the field **DurationInSeconds** into Seconds...

then just try like the below query....

```
update Table1 set DurationInSeconds = (SUBSTRING(CAST(DurationInSeconds AS NVARCHAR(MAX)),1,2) * 360) + (SUBSTRING(CAST(DurationInSeconds AS NVARCHAR(MAX)),4,2) * 60) +  SUBSTRING(CAST(DurationInSeconds AS NVARCHAR(MAX)),7,2) 
```

then it give the Result like below

```
SELECT * from Table1

DurationInSeconds
75
15
76
77 
```

# grails - 在没有控制器的情况下设置过滤器

> ID：14623251
> 
> 赞同：0
> 
> 时间：2013-01-31T10:13:03.317
> 
> 标签：grails, servlet-filters, url-mapping

我有一个正在运行的 Tomcat `localost`。

我希望编写一个 grails 过滤器，这样当用户去`localhost/filter/`拦截呼叫并进行一些处理时。`conf`我创建了一个位于文件夹内的过滤器

```
class TestFilters {

    def filters = {
        filter(uri:'/filter') {
            before = {
            }
            after = {                    
            }
            afterView = {                   
            }
        }
    }        
} 
```

当我去设置这个之后，`localhost/filter/`我只得到`404`错误。

我在哪里犯错误？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:32:24.123

如果您没有`FilterController`，则 url`localhost/filter`没有可显示的资源 - 所以您会收到 404 错误。您必须调整您的`UrlMappings`，以便这`localhost/filter`是一个有效的应用程序 url。

将以下内容添加到`UrlMappings.groovy`：

```
"/filter" (controller: "yourController", action:"yourAction") 
```

现在 - url`localhost/filter`指向`yourAction`in`yourController`并且应该应用过滤器。

# c# - 如何设计/编写我的 GlobalConfig 类以便可以继承？

> ID：14623252
> 
> 赞同：1
> 
> 时间：2013-01-31T10:13:02.700
> 
> 标签：c#, static, singleton

我需要创建一个 GlobalConfig 类。但我想在另一个类中派生它。

这是一个例子：

```
public class BaseConfig {
    public String GlobalPath {
        get;
        set;
    }
}

public class ConfigA: BaseConfig {
    public String pathA {
        get;
        set;
    }
}

public class ConfigB: ConfigA {
    public String pathB {
        get;
        set;
    }
} 
```

背后的想法是我不想多次编写代码，在课堂上更重要的`ConfigA`是，我想`GlobalPath`在 ConfigB 中设置并访问它。

换句话说，我希望 class`ConfigB`有一个`GlobalPath`在 class 中设置的属性`ConfigA`。

为了澄清我只想**在内存中有一个配置对象**。

当我设置`BaseConfig.GlobalPath`为“A”时，我想从中访问它`ConfigB.GlobalPath`并获得“A”。

我总是设计`GlobalConfig`成静态类，但是静态类不能被继承。

所以我尝试实现***单例模式***，但`ConfigA`找不到类的构造函数，`BaseConfig`因为它是私有的。

# qt - QDialog关闭崩溃

> ID：14623253
> 
> 赞同：0
> 
> 时间：2013-01-31T10:13:03.797
> 
> 标签：qt, qdialog

我在确保使用以下 Qt 代码关闭/释放对话框时遇到问题。

```
 //Segment 1: To open a 'wait' dialog for some long-running tasks
 void MainWindow::ui_showProgressDialog(QString title) {
     dlgProgress = new QProgressDialog(title, tr("Cancel"), 0, 0, this);
     dlgProgress->setAttribute(Qt::WA_DeleteOnClose); // line 1
     dlgProgress->setModal(true);
     dlgProgress->show();
     connect(voidWatcher, SIGNAL(finished()),
             this, SLOT(onPopulationFile()));
 }

 //Segment 2: Attempts to close the 'wait' dialog
 void MainWindow::onPopulationFile() {
    qDebug((dlgProgress == NULL) ? "true" : "false");
    if (dlgProgress) // 
    {
        qDebug("0");
        dlgProgress->close(); // line 2
        qDebug("1");
    }
    qDebug((dlgProgress == NULL) ? "true" : "false");
 } 
```

**问题**：当我触发两次调用“ui_showProgressDialog”时，第二次调用总是使我的程序崩溃。最初，我的代码没有段 1 的第 1 行，并且从 QtCreator 中，它总是在段 2 的第 2 行崩溃。调试消息显示如下

```
// first call to onPopulationFile
false
0
1
false
// second call to onPopulationFile
false
0
*** CRASH *** 
```

我阅读了从不从不同线程删除对象的文档，我怀疑调用'onPopulationFile'是从非主线程调用的。所以我将第 1 行添加到段中，让程序决定何时删除对象。但这似乎行不通。对这个问题有什么建议吗？

*实验完成*：如果我用 QDialog 替换 QProgressDialog，程序不会崩溃，并且调试消息显示

```
// first call to onPopulationFile
false
0
1
false
// second call to onPopulationFile
false
0
1
false 
```

所以，

*   为什么段 2 中的第二个空测试总是失败？[编辑：我必须明确地将变量设置为 NULL]
*   有没有更好的方法来关闭“等待”对话框？
*   我尝试关闭/释放对话框，因为我想尽快释放内存。我真的需要手动删除对话框吗？

平台：Qt Opensource 4.8 (x64)、Windows 7 (x64)、MinGW (rubenvb 4.7.2)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T10:28:20.133

`dlgProgress->setAttribute(Qt::WA_DeleteOnClose);`关闭时删除小部件。正如您所调用`dlgProgress->close();`的，在此行之后，它指向的对象已被释放，`dlgProgress`现在是一个无效指针。

您需要`dlgProgress`在任何调用关闭或事件后使用信号设置为 null `Qobject::destroyed()`。

编辑：

`Qt::WA_DeleteOnClose`指定如果发生关闭事件，对象将被删除。不确切***需要多少时间***。例如，如果他们正在使用`QObject::deleteLater()`，则不会立即删除该对象。即使不是这样，代码片段也像

```
 A* a = new A;
 a->dosomething();
 delete a;
 a->dosomething(); 
```

是未定义的行为。第二次调用`a->dosomething();`可能会崩溃（如果你幸运的话）或者可能不会崩溃。

# android - Android 身份验证：未调用回调

> ID：14623255
> 
> 赞同：4
> 
> 时间：2013-01-31T10:13:09.083
> 
> 标签：android, authentication, callback

我正在使用身份验证示例在 Android 4.2 中实现身份验证系统。在我的应用程序中，我有一个带有 Login 选项的 MenuActivity。如果单击该选项并且用户尚未登录，我的身份验证系统将启动并显示 AuthenticationActivity。

当登录结束时，我想在 MenuActivity 中执行一些代码，以便它知道用户已经登录。我为此创建了一个回调，但它从未被调用。登录工作正常，如果我关闭应用程序并重新启动它，它会检测到用户已登录。

在我的菜单活动中，我有这个：

```
public void login() {
    if(mAccount != null)
        Toast.makeText(MenuActivity.this, getString(R.string.account_exists), Toast.LENGTH_LONG).show();
    else{
        mAccountManager.addAccount(ACCOUNT_TYPE, AUTHTOKEN_TYPE, null, null, this, completeCallbackLogin, null);
    }
}

// Callback called when the login ends.
private AccountManagerCallback<Bundle> completeCallbackLogin = new AccountManagerCallback<Bundle>() {
    public void run(AccountManagerFuture<Bundle> arg0) {
        Log.d("MenuActivity", "CALLBACK");
        // When the login ends we save the account in the global variables 
        refreshAccount();

        Toast.makeText(MenuActivity.this, getString(R.string.login_ok), Toast.LENGTH_LONG).show();
    }
}; 
```

在我的 AuthenticatorActivity（称为 LoginActivity）中，我执行以下操作：

```
Account account = new Account(mUsername, ACCOUNT_TYPE);
try{
    mAccountManager.addAccountExplicitly(account, mPassword, newBundle());
}catch(Exception e){
    e.printStackTrace();
    return;
}

final Intent intent = new Intent();
intent.putExtra(AccountManager.KEY_ACCOUNT_NAME, mUsername);
intent.putExtra(AccountManager.KEY_ACCOUNT_TYPE, ACCOUNT_TYPE);
intent.putExtra(AccountManager.KEY_PASSWORD, mPassword);
intent.putExtra(AccountManager.KEY_AUTHTOKEN, mAuthToken);
intent.putExtra(AccountManager.KEY_BOOLEAN_RESULT, true);
LoginActivity.this.setAccountAuthenticatorResult(intent.getExtras());
setResult(RESULT_OK, intent);               
LoginActivity.this.finish(); 
```

就像我说的，我的回调永远不会被调用。这是为什么？

[编辑]

我刚刚注意到，如果我再次运行应用程序（Eclipse->Run），则会在我的应用程序关闭以再次安装之前调用回调。

[/编辑]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:15:18.307

在我的 AbstractAccountAuthenticator 中，我忘记在 addAccount 方法中添加以下行：

```
intent.putExtra(AccountManager.KEY_ACCOUNT_AUTHENTICATOR_RESPONSE, response); 
```

# java - Hibernate session.update() 与更新查询？

> ID：14623259
> 
> 赞同：0
> 
> 时间：2013-01-31T10:13:26.157
> 
> 标签：java, hibernate

嗨，如果想更新一行的某些特定列，那么我应该在休眠中使用更新查询还是简单地使用`session.update()`休眠的方法。才知道

```
@org.hibernate.annotations.Entity(
        dynamicUpdate = true 
```

如果设置了注释，我可以更新特定的列。我以前没有用过这个，所以只想知道是否有使用这个的规范。只是需要你的帮助来做出决定。哪种方法会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:37:39.570

关闭动态会话更新后，Hibernate 将缓存**所有实体的**所有可能查询。因此 Hibernate 不必在每次想要更新实体时都生成 SQL。

当它打开时，Hibernate 将始终在请求时生成 SQL 查询，而不是缓存它。所以它对你的数据库来说更轻，但对 Hibernate 来说它变得更重。

什么时候应该使用 Hibernate 动态更新？如果您有一个包含大量列的巨大表，则缓存所有实体的所有查询将比平时消耗更多的内存。因此，您可以打开动态更新以提高性能。此外，如果您正在调试，动态更新将为您提供更具可读性的查询，因为只有修改后的列才会出现在您的更新语句中。

您应该使用更新查询还是会话更新？更新查询的可读性较差且难以维护（例如，如果字段名称已更改，您必须更改所有查询，而会话更新不会受到影响）。

# asp.net-mvc - Orchard 模块开发和 cache.dat

> ID：14623260
> 
> 赞同：0
> 
> 时间：2013-01-31T10:13:30.337
> 
> 标签：asp.net-mvc, module, orchardcms

我正在用果园编写一个自定义模块。我创建了一个指向 Orchard Web Binaries 的解决方案，并将我的模块放置为 subdir od Modules 目录。这个模块在它自己的项目中很开心。我可以构建它，并且可以使用我的模块浏览 Orchard。到现在为止还挺好。但问题是每次我重建我的模块时，我都必须删除 App_data 中的 cache.dat 文件，以便让 Orchard 加载更改的模块。这真的很烦人而且很耗时。有没有更好的方法来开发 Orchard 模块，以便我每次构建 Orchard 时都使用新版本？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T18:13:39.657

只需启用动态编译：

[http://docs.orchardproject.net/Documentation/Orchard-module-loader-and-dynamic-compilation](http://docs.orchardproject.net/Documentation/Orchard-module-loader-and-dynamic-compilation)

查看 \Config\HostComponents.config 并将 Disabled 值设置为 false

# ruby-on-rails - Rails 表中的 show_path 未使用正确的 :id？

> ID：14623261
> 
> 赞同：1
> 
> 时间：2013-01-31T10:13:34.407
> 
> 标签：ruby-on-rails, view, routes

Rails 新手在这里，编写一个示例应用程序，它具有以下三个模型和关系：

销售人员：

```
 class Salesperson < ActiveRecord::Base
       has_many :clients 
```

客户：

```
 class Client < ActiveRecord::Base
       has_many :orders
       belongs_to: salesperson 
```

订单：

```
class Order < ActiveRecord::Base
      belongs_to :client 
```

在页面 clients/show.html.erb 我有一个部分呈现以下内容：

```
<table>
    <tr>
        <th>Name</th>
        <th>Total Orders</th>
        <th>Email</th>
        <th></th>
    </tr>

<% @salesperson.clients.each do |client| %>
    <tr>
        <td><%= client.full_name %></td>
        <td><%= client.orders.count %></td>
        <td><%= client.email %></td>
            <td><%= link_to 'View Client', client_path %></td>  
    </tr>

<% end %>   
</table> 
```

资源都是嵌套的，页面似乎可以工作，除了一件事：

除了客户路径之外，一切都是动态的：客户名称、订单、电子邮件都显示给销售人员，但查看客户链接似乎总是指向 clients/:id 链接，其中 :id 是销售人员 ID，而不是客户 ID .

例如，因为销售人员 :id 是 1，所以所有客户端路径都将指向整个表的 clients/1。

如何使客户端链接路由像表的其余部分一样正确和动态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:17:23.993

尝试

```
<td><%= link_to 'View Client', client_path(client) %></td> 
```

或更简单

```
<td><%= link_to 'View Client', client %></td> 
```

`client_path`需要一个参数是a`Client`或id。

# jquery - Fancybox 将 img 编号包装到单独的跨度中

> ID：14623264
> 
> 赞同：1
> 
> 时间：2013-01-31T10:13:46.090
> 
> 标签：jquery, fancybox, fancybox-2

我有一个带有标题的fancybox画廊，包含标题和图像编号：例如`Title 1/2`

我想在图像的右侧有图像编号，在左侧有标题。因此我需要将 img Number 包装到一个单独的 span 标签中。我该怎么做呢？

这就是现有的标记：

```
<div class="fancybox-title fancybox-title-float-wrap">
   <span class="child">5 / 7 - Soitinrakentajat pajalla, 2012</span>
</div 
```

但它应该是：

```
<div class="fancybox-title fancybox-title-float-wrap">
   <span class="child">Soitinrakentajat pajalla, 2012</span>
   <span class="text-right">5 / 7</span>
</div> 
```

img 数字是这样生成的：

```
$(".fancybox").fancybox({
        afterLoad : function() {this.title = (this.index + 1) + ' / ' + this.group.length + (this.title ? ' - ' + this.title : '');}
    }); 
```

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:50:47.757

您可以执行以下操作：

```
$(".fancybox").fancybox({
    helpers: {
        title: {
            type: 'inside'
        }
    },
    beforeShow: function () {
        this.title = "<span class='mySpanLeft'>" + (this.title ? this.title : '') + "</span>" + "<span class='mySpanRight'>Image " + (this.index + 1) + ' / ' + this.group.length + "</span>";
    }
}); 
```

见**[JSFIDDLE](http://jsfiddle.net/AqL9t/)**

# c++ - 为什么我不能将 uint 重新解释为 int？

> ID：14623266
> 
> 赞同：24
> 
> 时间：2013-01-31T10:13:50.900
> 
> 标签：c++, type-conversion, reinterpret-cast

这是我想要做的：

`const int64_t randomIntNumber = reinterpret_cast<int64_t> (randomUintNumber);`

其中 randomUintNumber 类型为`uint64_t`。

错误是（MSVC 2010）：

> 错误 C2440: 'reinterpret_cast' : 无法从 'const uint64_t' 转换为 'int64_t' 1> 转换是有效的标准转换，可以隐式执行或使用 static_cast、C 样式转换或函数样式转换

为什么不编译？两种类型都有相同的位长，这不是 reinterpret_cast 的用途吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-31T10:20:29.470

因为那不是`reinterpret_cast`目的。所有允许的转换`reinterpret_cast`都涉及指针或引用，但整数或枚举类型可以是`reinterpret_cast`自身的例外。这一切都在标准中定义，`[expr.reinterpret.cast]`.

我不确定你想在这里实现什么，但如果你想`randomIntNumber`拥有与 相同的价值`randomUintNumber`，那么做

```
const int64_t randomIntNumber = randomUintNumber; 
```

如果这导致编译器警告，或者您只想更明确，那么：

```
const int64_t randomIntNumber = static_cast<int64_t>(randomUintNumber); 
```

`randomUintNumber`如果小于 2 ^(63)，则强制转换的结果与输入具有相同的值。否则结果是实现定义的，但我希望所有已知的实现`int64_t`都会定义它来做显而易见的事情：结果相当于输入模 2 ^(64)。

* * *

如果你想`randomIntNumber`拥有与 相同的位模式`randomUintNumber`，那么你可以这样做：

```
int64_t tmp;
std::memcpy(&tmp, &randomUintNumber, sizeof(tmp));
const int64_t randomIntNumber = tmp; 
```

由于`int64_t`保证使用二进制补码表示，因此您*希望*实现定义`static_cast`与 . 的超出范围值具有相同的结果`uint64_t`。但它实际上并不能在标准 AFAIK 中得到保证。

即使`randomUintNumber`是编译时常量，不幸的是这里`randomIntNumber`不是*编译*时常量。但是，编译时常量有多“随机”？;-)

如果您需要解决这个问题，并且您不相信实现将超出范围的无符号值转换为有符号类型是明智的，那么就像这样：

```
const int64_t randomIntNumber = 
    randomUintNumber <= INT64_MAX ? 
        (int64_t) randomUintNumber :
        (int64_t) (randomUintNumber - INT64_MAX - 1) + INT64_MIN; 
```

现在，我赞成在可能的情况下编写真正可移植的代码，但即便如此，我认为这近乎偏执。

* * *

顺便说一句，你可能很想写这个：

```
const int64_t randomIntNumber = reinterpret_cast<int64_t&>(randomUintNumber); 
```

或等效地：

```
const int64_t randomIntNumber = *reinterpret_cast<int64_t*>(&randomUintNumber); 
```

这并不能完全保证工作，因为尽管它们存在`int64_t`并且`uint64_t`保证是相同大小的有符号类型和无符号类型，但它们实际上并不能保证是标准整数类型的有符号和无符号版本。因此，此代码是否违反严格别名是特定于实现的。违反严格别名的代码具有未定义的行为。以下不*违反*严格的别名，只要位模式 in`randomUintNumber`是 的值的有效表示，就可以了`long long`：

```
unsigned long long x = 0;
const long long y = reinterpret_cast<long long &>(x); 
```

因此，在and 是`int64_t`and`uint64_t`的 typedef 的实现`long long`上`unsigned long long`，我`reinterpret_cast`的就可以了。与将超出范围的值转换为有符号类型的实现定义的转换一样，您会*期望*实现要做的明智的事情是使它们对应于有符号/无符号类型。因此，就像`static_cast`隐式转换一样，您希望它可以在任何合理的实现中工作，但实际上并不能保证。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-31T10:14:56.973

`static_cast`在这些情况下使用。我想语言设计者在他们所有的智慧中都认为它不被认为“足够不安全”来保证`reinterpret_cast`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T10:19:07.093

不它不是。`reinterpret_cast`主要是为了将现有的存储位重新解释为与它不同的类型。很多这些解释是依赖于实现的，标准列出了一个特定的（在这里引用很长）可以用`reinterpret_cast`（主要是在不同的指针/引用类型之间进行转换）完成的事情的列表，但是说：

> 无法使用 reinterpret_cast 显式执行其他转换。

在您的情况下，您可能想要转换类型，而不是重新解释现有存储。用于`static_cast`此目的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T10:23:14.307

来自 C++11 Standard(N3376) 5.2.10.1[本文档，第 101 页](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)：

> 下面列出了可以使用 reinterpret_cast 显式执行的转换。无法使用 reinterpret_cast 显式执行其他转换。

实际上，如果类型相同，则允许从整数类型到整数类型的唯一转换。

其他涉及指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-31T10:25:13.893

`reinterpret_cast`用于将对象的存储重新解释为不同的对象。如果您不想通过标准措辞，您可以在[这里](http://en.cppreference.com/w/cpp/language/reinterpret_cast)`reinterpret_cast`找到所有可以做的事情。通常你可以记住你必须使用指针类型。

因此，如果您真的想重新解释用于`uint64_t`as的位，请`int64_t`执行以下操作：

```
int64_t randomIntNumber = reinterpret_cast<int64_t&> (randomUintNumber); 
```

但是，如果您只想转换对象，请尽可能保留其值……只需按照编译器的建议进行操作并`static_cast`改用即可。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-31T10:21:32.130

> 为什么不编译？

因为这两种类型都不是指针。

> 两种类型具有相同的位长，

这有什么关系？如果它们是指针，也许它们指向相同大小的东西会很重要，但它们不是指针。

> 这不是 reinterpret_cast 的用途吗？

不，`reinterpret_cast`用于指针强制转换。`&`您可以通过在演员表内部和外部放入演员表来做您想做的`*`事情。这就是重新解释演员阵容的目的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-06T09:47:03.187

# 用 重新解释位模式`memcpy`，用 转换类型`static cast`

使用`reinterpret_cast`你是违规的`strict aliasing`。这很糟糕，因为它最终会导致未定义的行为（也许您使用新的编译器版本编码故障。） [什么是严格别名规则，我们为什么要关心？](https://gist.github.com/shafik/848ae25ee209f698763cffee272a58f8)是一篇很棒的文章，描述了问题及其解决方案（也许可以跳过冗长的部分“现在，到规则手册”；））。它建议`memcpy`并争辩说，编译器优化无论如何都会跳过复制。

**代码**

交互式代码[在这里](https://techiedelight.com/compiler/?YKG2)。在您的特定情况下，所有选项都会产生相同的结果。这会改变，当玩`newType`和时`randomUintNumber`。

```
#include <iostream>
#include <cstring>

int main()
{
    typedef int64_t newType; // try: double, int64_t

    uint64_t randomUintNumber = INT64_MAX + 10000; // try: 64000, INT64_MIN, INT64_MAX, UINT64_MAX, INT64_MAX + 10000
    std::cout << "INT64_MIN: " << INT64_MIN << std::endl;
    std::cout << "UINT64_MAX: " << UINT64_MAX << std::endl;
    std::cout << "INT64_MAX: " << INT64_MAX << "\n\n";
    std::cout << "randomUintNumber: " << randomUintNumber << "\n\n";

    // const int64_t randomIntNumber = reinterpret_cast<int64_t> (randomUintNumber);
    std::cout << "as \"const int64_t randomIntNumber = reinterpret_cast<int64_t> (randomUintNumber);\" does not work, here are some options ...\n\n";

    std::cout << "BAD [undefined behavior!]:" << std::endl;
    const newType a = reinterpret_cast<int64_t&> (randomUintNumber);
    std::cout << "\treinterpret_cast<int64_t&> (randomUintNumber): " << a << std::endl;

    const newType b = reinterpret_cast<int64_t&&> (randomUintNumber);
    std::cout << "\treinterpret_cast<int64_t&&> (randomUintNumber): " << b << std::endl;

    std::cout << "\nGOOD: " << std::endl;
    const newType c = (int64_t) randomUintNumber;
    std::cout << "\t(int64_t) randomUintNumber [static cast, sometimes reinterprets bit pattern]: " << c << std::endl;

    const newType d = static_cast<int64_t>(randomUintNumber);
    std::cout << "\tstatic_cast<int64_t>(randomUintNumber) [the same as before]: " << d << std::endl;

    static_assert(sizeof(uint64_t) == sizeof(newType), "should not be taken for granted ...");
    newType eNotConst;
    std::memcpy(&eNotConst, &randomUintNumber, sizeof(uint64_t));
    const newType e = eNotConst;
    std::cout << "\tstd::memcpy(&eNotConst, &randomUintNumber, sizeof(uint64_t)); [definately reinterprets bit pattern]: " << e << std::endl;

    return 0;
} 
```

**输出**

```
INT64_MIN: -9223372036854775808
UINT64_MAX: 18446744073709551615
INT64_MAX: 9223372036854775807

randomUintNumber: 9223372036854785807

as "const int64_t randomIntNumber = reinterpret_cast<int64_t> (randomUintNumber);" does not work, here are some options ...

BAD [undefined behavior!]:
    reinterpret_cast<int64_t&> (randomUintNumber): -9223372036854765809
    reinterpret_cast<int64_t&&> (randomUintNumber): -9223372036854765809

GOOD: 
    (int64_t) randomUintNumber [static cast, sometimes reinterprets bit pattern]: -9223372036854765809
    static_cast<int64_t>(randomUintNumber) [the same as before]: -9223372036854765809
    std::memcpy(&eNotConst, &randomUintNumber, sizeof(uint64_t)); [definately reinterprets bit pattern]: -9223372036854765809 
```

# asp.net - ASP.NET 网格视图中的分页

> ID：14623267
> 
> 赞同：1
> 
> 时间：2013-01-31T10:13:51.050
> 
> 标签：asp.net, gridview, custompaging

我正在寻找分页，我可以在其中在框中输入值以到达所需的页面，如下所示。

![在此处输入图像描述](../Images/43d3951578f665f7463ec4d85dbeb3b1.png)

我用谷歌搜索了它。但找不到这个。如果您有链接或代码，请帮助我。我正在使用 asp.net 4.0。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:28:31.577

没有开箱即用的功能。为此，您需要覆盖`DataBound`gridview 的事件并添加自定义寻呼机行。[此 CodeProject 教程](http://www.codeproject.com/Articles/20870/A-very-nice-and-complete-custom-GridView-pager-wit)或[本文](http://www.codeproject.com/Articles/25835/GridView-Custom-Paging-with-PageSize-Change-Dropdo)可能会帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T17:33:08.787

正如 Echilon 所说，我使用了[CustomPager](http://www.codeproject.com/Articles/32559/Paging-in-Grid-View-using-Slider-Extender)并在其中使用了文本框而不是滑块。

# c++ - 绘制字体效果（下划线、删除线）freetype 库和 OpenGL

> ID：14623274
> 
> 赞同：0
> 
> 时间：2013-01-31T10:14:08.773
> 
> 标签：c++, opengl, freetype

我使用此链接使用 freeType 库使用特定字体绘制文本：

[http://nehe.gamedev.net/tutorial/freetype_fonts_in_opengl/24001/](http://nehe.gamedev.net/tutorial/freetype_fonts_in_opengl/24001/)

如何给文本加下划线或删除线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T22:37:35.580

“字体效果”只不过是绘制文本，然后在其上绘制一些东西。下划线字体正是它的样子：绘制文本，然后在其下绘制一条线。在 OpenGL 的情况下，您将使用线渲染。删除线只是将光画*得更高*的问题。

唯一真正的问题是在哪里画线。对于下划线，您在基线处绘制它。对于删除线，您可能会在从基线到顶部的 2/5 处绘制它。或者任何看起来不错的东西。

# windows-8 - 在不连接网络的情况下在 Windows phone 8 中使用地图

> ID：14623282
> 
> 赞同：0
> 
> 时间：2013-01-31T10:14:27.183
> 
> 标签：windows-8, windows-phone-8, windows-phone, bing-maps

我正在使用 Windows 8“手机”，由于以下原因无法使用地图

1.  必应地图：微软本身宣布不再支持必应地图 API，而是使用诺基亚 API。

2.  诺基亚 API：面临许可问题。

3.  内置地图控制：网络连接问题。模拟器无法连接到网络

4.  Google API：这是唯一的选择。但这再次提出了类似的问题，因为我对它的使用很幼稚

请建议我如何在我的应用程序中使用地图功能而不连接到网络

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:32:48.397

1.  Bing 地图仍然受支持，它们不再是默认设置。它们不如诺基亚数据集全面，并且在世界某些地区（中国）使用时存在问题。

2.  在 Windows Phone 8 应用程序中使用嵌入式诺基亚地图控件没有许可问题。为什么您认为存在许可问题？

3.  内置的诺基亚地图控件确实支持下载地图以供离线使用。这是它的一大卖点。

4.  谷歌地图图块可以与旧版/必应地图控件一起使用，但不提供对离线使用的自动支持，并且自己实现需要做**很多**工作。

# opengl - 带有 FBO 的 OpenGL 阴影映射 - 多个拖尾绘制

> ID：14623284
> 
> 赞同：6
> 
> 时间：2013-01-31T10:14:32.770
> 
> 标签：opengl, glsl

我正在尝试在我们的游戏项目中实现阴影映射。我正在使用渲染到纹理技术和两遍渲染。我首先创建了一个 FBO，并仅为深度组件绑定了一个纹理。在第一遍中，我启用了这个 FBO，禁用纹理并从光 POV 渲染我的场景。在第二遍中，我将深度纹理传递给着色器并正常渲染场景。我在着色器中执行与阴影相关的计算。

但是，我的代码无法正常工作。我看不到任何阴影。此外，当我渲染两个通道时，如果我的相机在某个角度以上看：45，我会看到整个世界的多个绘图一个接一个地拖着。如果我看这个角度以下，渲染看起来还不错。这个问题的根源可能是什么？. 如果我禁用第一遍，世界看起来更暗，但尾随场景消失了。我还在下面附上了我的代码。

![多重绘图](../Images/2afe153d139a7347e8b1bb5d7ce6854e.png)

我还有另一个困惑。我为第一个阴影贴图通道禁用了纹理。但是我将纹理坐标与我的顶点坐标一起发送到 VBO。这会引起什么问题吗？

FBO 初始化

```
LightPosition = glm::vec3(50.0f, 40.0f, 50.0f);  
upVector = glm::vec3(0.0f, 1.0f, 0.0f);  

glGenTextures(1, &m_shadowMap);  
glBindTexture(GL_TEXTURE_2D, m_shadowMap);  
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);  
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);  
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP);  
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);  
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_MODE, GL_COMPARE_R_TO_TEXTURE);  
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_FUNC, GL_LEQUAL);  
glTexParameteri(GL_TEXTURE_2D, GL_DEPTH_TEXTURE_MODE, GL_INTENSITY);  
glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT32,  
        WindowWidth, WindowHeight, 0, GL_DEPTH_COMPONENT, GL_FLOAT, NULL);  
glBindTexture(GL_TEXTURE_2D, 0);  

glGenFramebuffers(1, &m_fbo);  
glBindFramebuffer(GL_FRAMEBUFFER, m_fbo);  
glDrawBuffers(0, NULL);  
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, m_shadowMap, 0);  
glBindFramebuffer(GL_FRAMEBUFFER, 0);  

glEnable(GL_DEPTH_TEST);  
glEnable(GL_CULL_FACE);  

GLenum Status = glCheckFramebufferStatus(GL_FRAMEBUFFER);  

if (Status != GL_FRAMEBUFFER_COMPLETE) {  
    printf("FB error, status: 0x%x\n", Status);  
    return false;  
}  

return true; 
```

阴影贴图通行证：

```
glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, 0);
glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, 0);

glViewport(0, 0, windowWidth, windowHeight);

glBindFramebuffer(GL_FRAMEBUFFER, shadowMapFBO.m_fbo);

glClear(GL_DEPTH_BUFFER_BIT);

glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glm::mat4 lightProjection = glm::perspective(45.0f,
        1.0f * windowWidth / windowHeight, 0.125f, 1000.0f);
glGetFloatv(GL_PROJECTION_MATRIX, shadowMapFBO.LightProjectionMatrix);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glm::mat4 lightModelView = glm::lookAt(shadowMapFBO.LightPosition,
        glm::vec3(0.0f, 0.0f, 0.0f), glm::vec3(0.0f, 1.0f, 0.0f));
glGetFloatv(GL_MODELVIEW_MATRIX, shadowMapFBO.LightModelViewMatrix);

glm::mat4 lmvp = lightProjection * lightModelView;

glCullFace(GL_FRONT);

glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);
glDisable(GL_LIGHTING);
glDisable(GL_TEXTURE_2D);
glBindTexture(GL_TEXTURE_2D, 0);

glUniform1i(Shader::id_uniform_layer, 0);
world->render(lmvp);
printGLError();

glBindFramebuffer(GL_FRAMEBUFFER, 0); 
```

渲染通道：

```
static glm::vec3 cCameraPosition = glm::vec3(0.0f, 5.0f, 10.0f);
static glm::vec3 cLightPosition = glm::vec3(50.0f, 40.0f, 50.0f);

glBindFramebuffer(GL_FRAMEBUFFER, 0);
glViewport(0, 0, windowWidth, windowHeight);

glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
glm::mat4 modelView = player->getView();

float viewAngle = 45.0f;
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
glm::mat4 projection = glm::perspective(viewAngle,
        1.0f * windowWidth / windowHeight, 0.01f, 1000.0f);
glm::mat4 mvp = projection * modelView;

glEnable(GL_TEXTURE_2D);

glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, shadowMapFBO.m_shadowMap);

glMatrixMode(GL_TEXTURE);
glLoadIdentity();
glTranslatef(0.5f, 0.5f, 0.5f);
glScalef(0.5f, 0.5f, 0.5f);
glMultMatrixf(shadowMapFBO.LightProjectionMatrix);
glMultMatrixf(shadowMapFBO.LightModelViewMatrix);

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, id_texture_blocks);

glUseProgram(Shader::id_program);

glUniform3fv(Shader::id_uniform_lightPosition, 1,
        glm::value_ptr(cLightPosition));
glUniform3fv(Shader::id_uniform_CameraPosition, 1,
        glm::value_ptr(*(player->getCoordinates())));

//Enabling color write (previously disabled for light POV z-buffer rendering)
glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE);
glUniform1i(Shader::id_shader_shadow, 1);

glUniformMatrix4fv(Shader::id_uniform_mvp, 1, GL_FALSE, glm::value_ptr(mvp));

glEnable(GL_POLYGON_OFFSET_FILL);
glEnable(GL_CULL_FACE);

glCullFace(GL_BACK);

glUniform1i(Shader::id_uniform_layer, 0);
world->render(mvp);
printGLError(); 
```

顶点着色器：

```
attribute vec4 coordinates;
uniform   mat4 mvp;

//Fragment shader forward variables.
varying vec4 voxel;

//shadow map
// Used for shadow lookup
varying vec4 ShadowCoord;

uniform vec3 LightPosition, CameraPosition;

varying vec3 LightDirection, LightDirectionReflected, CameraDirection, Normal;

void main(void) {

//shadow map
LightDirection = LightPosition - gl_Vertex.xyz;
LightDirectionReflected = reflect(-LightDirection, gl_Normal);
CameraDirection = CameraPosition - gl_Vertex.xyz;
Normal = gl_Normal;
gl_TexCoord[0] = gl_MultiTexCoord0;
gl_TexCoord[1] = gl_TextureMatrix[1] * gl_Vertex;

voxel = coordinates;
//Calculates projection on xyz.
gl_Position = mvp * vec4(coordinates.xyz, 1);
} 
```

片段着色器：

```
#extension GL_EXT_gpu_shader4 : enable  

//Rendering layer.  
uniform int layer;  

//Colors.  
uniform float colorRed;  
uniform float colorGreen;  
uniform float colorBlue;  
uniform float colorAlpha;  

//Fog density.  
uniform float fogDensity;  

varying vec4 voxel;  

uniform sampler2D texture;  

const float N_TEXTURES = 32.0;  

//////////////////////shadow map  
uniform sampler2DShadow ShadowMap;  

varying vec4 ShadowCoord;  

varying vec3 LightDirection, LightDirectionReflected, CameraDirection, Normal;  

void main(void) {  

vec2  coord2d;  
float intensity;  

vec4 color = texture2D(texture, coord2d);  

float z = gl_FragCoord.z / gl_FragCoord.w;  
float fog = clamp(exp(-fogDensity * z * z), 0.2, 1.0);  

color.xyz = color.xyz * intensity;  

//shadow map  
float Shadow = shadow2DProj(ShadowMap, gl_TexCoord[1]).r;  

float NdotLD = max(dot(normalize(LightDirection), Normal), 0.0) * Shadow;  
float Spec = pow(max(dot(normalize(LightDirectionReflected), normalize(CameraDirection)), 0.0), 32.0) * Shadow;  
color.xyz = color.xyz * (0.25 + NdotLD * 0.75 + Spec);  

//Final color.  
vec4 fogColor = vec4(colorRed, colorGreen, colorBlue, colorAlpha);  
gl_FragColor = mix(fogColor, color, fog);  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T03:05:45.353

乍一看，您似乎没有使用`glClear`，所以天空是最后一帧中的任何内容，或者至少它不工作。的 alpha 值是`glClearColor`多少？

# mysql - 我怎样才能只提取对他们有 FAIL 的记录？

> ID：14623286
> 
> 赞同：0
> 
> 时间：2013-01-31T10:14:38.103
> 
> 标签：mysql, sql

我敢肯定，对于一些在 SQL 中有所了解的人来说，这将非常简单，但我认为它需要一个子查询或其他东西。我有一个表，其中基本上有大量订单号和来自 XML API 的回复列。失败或成功。

每次请求后都会在数据库中插入一个全新的行。因此，一个订单号可能有 5 次失败，并且在第 6 次尝试时插入一条记录说成功。

我怎样才能放出旁边只有失败状态的订单号？

这将使我能够弄清楚哪些记录需要查看在 API 请求中持续失败的记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:18:24.770

试试这个，通过使用主键 (order_id) 对订单进行分组

```
SELECT * FROM
(
    SELECT GROUP_CONCAT(status) as status_combined, order_id
    FROM orders 
    GROUP BY order_id  
) AS order_tmp
WHERE status_combined NOT LIKE '%SUCCESS%' 
```

**`Edit`**（根据提问者的评论）

```
SELECT * FROM
(
    SELECT GROUP_CONCAT(status) as status_combined, order_id
    FROM orders 
    JOIN certificates ON certificates.Ordernumber = orders.OrderNumber
    GROUP BY order_id  
) AS order_tmp
WHERE status_combined NOT LIKE '%SUCCESS%' 
```

请确保您需要根据“Ordernumber”或“order_id”加入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:17:54.770

试试这个

```
select m.*
from Main m
join Transactiontable tt
on m.orderid = tt.orderid
group by tt.status , m.orderid
having count(case when tt.status = "failed") = count(tt.status) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:19:53.957

您可以使用 where 子句使用简单的 sql 查询：

```
select * 
from some_table 
where Column_From_some_table_has_value = your_particular_value 
```

够了。

你可以看看[如何在 sql 中使用 where 子句](http://www.w3schools.com/sql/sql_where.asp)

谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T02:58:08.030

这可能是最干净的方法：

```
select *
from mytable
where id in (
    select id
    from mytable
    group by id
    having sum(status = 'SUCCESS') = 0) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-21T13:19:16.607

我不喜欢@Minesh 的回答，因为它同时使用聚合函数和`LIKE`运算符。这两者都可能导致性能问题，因为没有任何索引可以帮助查询完成工作中的困难部分。该`LIKE`子句尤其需要对数据库进行大量工作，因为它需要扫描每个结果。

我对 SQL Server 更熟悉，但这应该适合你：

```
SELECT *
FROM Orders
WHERE OrderNumber NOT IN (
        SELECT OrderNumber
        FROM Orders
        WHERE Status = 'SUCCESS')
    AND OrderNumber NOT IN (
        SELECT OrderNumber
        FROM Certificates
        WHERE OrderStatus = 'CANCELLED') 
```

# azure - 使用 Windows Azure Active Directory 的 SSO

> ID：14623292
> 
> 赞同：0
> 
> 时间：2013-01-31T10:14:53.123
> 
> 标签：azure, single-sign-on, azure-acs, azure-active-directory

我对 Active Directory 和 SSO（单点登录）非常陌生。我对此知之甚少。

我需要有关如何在 azure 环境中使用活动目录启动 SSO 操作的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:03:38.503

Vittorio 的博客上有完整指南：[在 ACS 命名空间中将 Windows Azure Active Directory 租户配置为身份提供者](http://blogs.msdn.com/b/vbertocci/archive/2012/11/07/provisioning-a-directory-tenant-as-an-identity-provider-in-an-acs-namespace.aspx)

1.  创建租户
2.  将其添加为 ACS 中的身份提供者
3.  在 ASP.NET (MVC) 应用程序中添加 ACS 作为 STS

# jquery - JQuery 验证事件设置

> ID：14623301
> 
> 赞同：2
> 
> 时间：2013-01-31T10:15:18.430
> 
> 标签：jquery, jquery-validate

如何设置我的验证器，以便在更改此表单上任何输入的值时检查表单上的所有字段。我试过了

```
$("#form-user-edit").validate({
        keypress : true
    }); 
```

但它不起作用。

我做了一个 jsFiddle [http://jsfiddle.net/NickBunich/pDrTF/1/](http://jsfiddle.net/NickBunich/pDrTF/1/)

问题是，当您在第一个输入中输入某些内容时 - 其他输入变为启用状态，但如果您随后在第二个输入中输入某些内容，则将其擦除，然后在第一个输入中擦除文本 - 错误消息和突出显示将保留。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T16:39:49.310

以下答案演示了插件[内置回调事件函数的正确用法。](http://docs.jquery.com/Plugins/Validation/validate#toptions)外部回调函数的创建是多余且不必要的。

* * *

你的代码...

```
$("#form-user-edit").validate({
    keypress : true
}); 
```

你不能简单地“化妆”或“发明”`.validate()`选项。 `keypress:`不存在。[*有关唯一*](http://docs.jquery.com/Plugins/Validation/validate#options)[可用选项](http://docs.jquery.com/Plugins/Validation/validate#options)，请参阅[此页面](http://docs.jquery.com/Plugins/Validation/validate#options)*。*

 *> 如何设置我的验证器，以便在更改此表单上任何输入的值时检查表单上的所有字段。

已经有一个选项被调用`onkeyup`，默认情况下它是打开的。（这仅检查每个按键事件的活动输入。）

您可以修改`onkeyup`以满足您的需要。这将检查*每个*按键事件 的*整个*表单。

 *```
$(document).ready(function() {
    $("#form-user-edit").validate({
        // other rules and options,
        onkeyup: function (element, event) {
            if (event.which === 9 && this.elementValue(element) === '') {
                return;
            } else if (element.name in this.submitted || element === this.lastActive) {
                if($("#form-user-edit").valid()) {
                    $("#form-user-edit .error").removeClass('error');
                };
            }
        }
    });
}); 
```

**工作演示：http:** [//jsfiddle.net/CMT5r/](http://jsfiddle.net/CMT5r/)

工作演示包含修改为按要求运行的 OP 代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:05:19.053

例如，您必须：

*   指定检查规则

    ```
     $("#form-user-edit").validate({
           rules: {
             name: "required",
             email: {
               required: true,
               email: true
             }
           },
           messages: {
             name: "Please specify your name",
             email: {
               required: "We need your email address to contact you",
               email: "Your email address must be in the format of name@domain.com"
             }
           }
        }) 
    ```

本教程将为您提供有关验证的大量解释，[请参见此处](http://docs.jquery.com/Plugins/Validation/validate#toptions)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T12:08:17.387

您可以添加一个`change`事件处理程序来执行此操作

```
$("#form-user-edit").on('change', ':input', function(){
    if($("#form-user-edit").valid()) {
        $("#form-user-edit .error").removeClass('error')
    }
}) 
```

演示：[提琴手](http://jsfiddle.net/arunpjohny/pDrTF/6/)**

# jquery - jQuery svg，实现交互式对象

> ID：14623302
> 
> 赞同：1
> 
> 时间：2013-01-31T10:15:18.103
> 
> 标签：jquery, xml, svg

我有一个代码在我的 svg 文件中创建一个对象：

```
<![CDATA[
var canc=0;
var xmlns="http://www.w3.org/2000/svg"
function create(){
var C=document.createElementNS(xmlns,"circle")
C.setAttributeNS(null,"r",50)
document.documentElement.appendChild(C)
}
]]> 
```

我想实现一个函数，通过`mouseover`在其他元素中创建一个事件来删除这个元素。我该怎么做？谢谢！

* * *

```
<![CDATA[
var xmlns="http://www.w3.org/2000/svg"
function create(){
...
canc = C;
return canc;
} 

function remove(evt){
var node=evt.target
node.parentNode.removeChild(canc)
} 
```

# android - Android：异步任务超时

> ID：14623307
> 
> 赞同：2
> 
> 时间：2013-01-31T10:15:34.433
> 
> 标签：android, android-asynctask, timeout

是否可以执行将执行 HTTP 请求的启动画面，如果此请求执行时间过长，即 7-10 秒，则中止请求并跳转到主要活动？

下面的代码是我所做的，但它不起作用 - 超时不起作用，HTTP 请求和跳转正在起作用。据我了解，可以延迟使用`AsyncTask`'`get()`方法或处理程序。`Get()`方法应该在单独的线程中，但它不起作用。这个任务怎么做？

**编辑：**

```
public class SplashActivity extends Activity {
private static final String TAG = "SplashActivity";
private Handler handler = new Handler();
private Runnable r;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash_layout);

    if (Helpers.isNetworkConnected(getApplicationContext())) {
        Log.d(TAG, "Has Internet");
        final DownloadFAQ downloadFAQ = new DownloadFAQ();
        new Thread(new Runnable() {
            public void run() {
                try {
                    Log.d(TAG, "Timing...");
                    downloadFAQ.execute().get(1000, TimeUnit.MILLISECONDS);

                    SplashActivity.this.runOnUiThread(new Runnable() {
                        public void run() {
                            Log.d(TAG, "redirect");
                            redirect();
                        }
                    });
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } catch (ExecutionException e) {
                    e.printStackTrace();
                } catch (TimeoutException e) {
                    downloadFAQ.cancel(true);
                    Log.d(TAG, "Task has benn canceled");
                    if (downloadFAQ.isCancelled())
                        redirect();
                }
            }
        }).start();
    } else {

        r = new Runnable() {
            public void run() {
                redirect();
            }
        };
        handler.postDelayed(r, 2500);
    }
}

private class DownloadFAQ extends AsyncTask<Void, Void, Void> {
    @Override
    protected Void doInBackground(Void... params) {
        Log.d(TAG, "Execute task");
        ServerAPI server = new ServerAPI(getApplicationContext());
        server.serverRequest(ServerAPI.GET_FAQ, null);
        return null;
    }
}

private void redirect() {
    Intent i = new Intent(SplashActivity.this, TabsActivity.class);
    startActivity(i);
    finish();
}

@Override
protected void onDestroy() {
    super.onDestroy();
    handler.removeCallbacks(r);
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T10:34:47.453

因为您正在尝试在 AsyncTask`doInBackground`仍在运行时再次启动它。更改您的代码以使其正常工作：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash_layout);
    downloadFAQ = new DownloadFAQ();
    new Thread(new Runnable() {
            public void run() {
                try {
                    downloadFAQ.execute().get(2000, TimeUnit.MILLISECONDS);

                  SplashActivity.thisrunOnUiThread(new Runnable() {
                        public void run() {
                         // start Activity here
                          Intent i = new Intent(SplashActivity.this,
                                                      TabsActivity.class);
                          SplashActivity.this.startActivity(i);
                          SplashActivity.this.finish();
                       }
                  });
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (ExecutionException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (TimeoutException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }).start();
} 
```

并且您需要`downloadFAQ.get(2000, TimeUnit.MILLISECONDS);`从 doInBackground 方法中删除将您的 AsyncTask 更改为

```
private class DownloadFAQ extends AsyncTask<Void, Void, Void> {
    @Override
    protected Void doInBackground(Void... params) {
        ServerAPI server = new ServerAPI(getApplicationContext());
        server.serverRequest(ServerAPI.GET_FAQ, null);
        return null;
    }

    protected void onPostExecute(Void result) {

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:20:29.273

考虑使用 asyncTask 状态： [AsyncTask.Status](http://developer.android.com/reference/android/os/AsyncTask.Status.html)

# cocos2d-iphone - 如何使用 2 个（或更多）CCSpriteBatchNode 的实例

> ID：14623309
> 
> 赞同：0
> 
> 时间：2013-01-31T10:15:41.763
> 
> 标签：cocos2d-iphone, ccspritebatchnode

我决定对 BatchNodes 进行一些练习，但我被困在这里是一些代码：

```
[[CCSpriteFrameCache sharedSpriteFrameCache]addSpriteFramesWithFile:@"scene1atlas.plist"];
[[CCSpriteFrameCache sharedSpriteFrameCache]addSpriteFramesWithFile:@"CloudsAtlas.plist"];

        sceneSpriteBatchNode = [CCSpriteBatchNode batchNodeWithFile:@"scene1atlas.png"];
        cloudSpriteBatchNode = [CCSpriteBatchNode batchNodeWithFile:@"CloudsAtlas.png"];

[self addChild:sceneSpriteBatchNode z:20];
[self addChild:cloudSpriteBatchNode z:21];

SomeGameObject *gameObject = [[SomeGameObject alloc]
                         initWithSpriteFrameName:@"sv_anim_1.png"];
gameObject.texture=[sceneSpriteBatchNode texture];

[sceneSpriteBatchNode addChild:gameObject
                                     z:1000 tag:kGameObjectTagValue];

*** Assertion failure in -[GameObject setTexture:] 
```

如何正确设置纹理？

# forms - Ext.form.Basic 如何在 trackResetOnLoad 为真时重置字段？

> ID：14623313
> 
> 赞同：5
> 
> 时间：2013-01-31T10:15:48.677
> 
> 标签：forms, extjs, extjs4

我得到了一个`Ext.form.Basic`配置。[`trackResetOnLoad`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Basic-cfg-trackResetOnLoad)`:true`

当我调用一个字段时，它从表单方法中`reset()`获取它的值。*我现在如何重置我的字段？* 当我只是做表格时，将其标记为无效，因为该字段是必需的。`setValues()`
 *`field.setValue('')`*

 *提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T10:34:00.107

您必须手动重置所有`originValues`字段（以及其他字段）

这个剪断会做到这一点

```
var items = form.getForm().getFields().items,
    i = 0,
    len = items.length;
for(; i < len; i++) {
    var c = items[i];
    c.value = '';
    if(c.mixins && c.mixins.field && typeof c.mixins.field['initValue'] == 'function'){
        c.mixins.field.initValue.apply(c);
        c.wasDirty = false;
    }
} 
```

**[工作示例](http://jsfiddle.net/sran/sZR8M/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T22:10:49.510

对我有用的是在创建表单之后使用类似的方法获取值的副本，`var originalValues = myForm.getFieldValues();`然后我可以稍后使用`myForm.setValues(originalValues);`而不是调用来恢复这些值`myForm.reset(...);`*

# java - 在 Struts 中动态修改图块

> ID：14623326
> 
> 赞同：2
> 
> 时间：2013-01-31T10:16:38.707
> 
> 标签：java, jsp, struts, tiles, struts-1

我正在尝试根据`module`当前处于活动状态的页面来修改页面的外观。所以基本上，我有一组通用的 jsp 页面，需要根据模块更改图块。

我能够使用每个模块独立实现基本图块。这需要我在 jsp 中指定 tile 的定义。所以我的问题是，我怎样才能更改定义，从而使图块根据模块动态更改。

我正在使用带有 Struts 1.1 的 Tiles（不是我的选择，但要求是这样的），并且是这个框架的新手。

**编辑**：我试过浏览文档，浏览其他论坛和博客，但没有遇到类似的事情。有没有其他方法可以实现这一点，可能不需要切换磁贴定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:49:46.310

我从您的问题中了解到的是，您将在 tiles-defs.xml 文件中为 1 个 JSP 定义 2 个定义。像

```
<definition name="outputPage" extends="mainLayout">
    <put name="title" value="HELLO" />
    <put name="body"   value="/pages/Welcome.jsp" />
</definition>
<definition name="outputPage2" extends="mainLayout">
    <put name="title" value="HELLO2" />
    <put name="body"   value="/pages/tile2.jsp" />
</definition> 
```

我建议实现您的要求的一种方法是在属性中设置模块类型（例如`request.setAttribute("module", "module2");`）。

假设您将在 struts-config.xml 中为同一个 JSP 页面进行 2 次转发。

```
 <action
            path="/Welcome"
            forward="/pages/tileTest.jsp"/>  
<action
            path="/customerAction"
            type="xyz.actions.CustomerAction"
            name="customerForm"
            scope="request">

            <forward name="tile" path="/Welcome.do"></forward>
            <forward name="customer" path="/pages/customer.jsp"></forward>
       </action> 
```

然后在您的 JSP 页面（tileTest.jsp）中，这些图块将被定义为

```
 <%@page language="java" pageEncoding="shift-jis"%>
<%@ taglib uri="/tags/struts-bean" prefix="bean" %>
<%@ taglib uri="/tags/struts-html" prefix="html" %>
<%@ taglib uri="/tags/struts-logic" prefix="logic" %>
<%@ taglib uri="/tags/struts-tiles" prefix="tiles" %>
<logic:notEmpty name="module">
<logic:equal name="module" value="module1">
<tiles:insert definition="outputPage" flush="true" />
</logic:equal>
</logic:notEmpty>

<logic:notEmpty name="module">
<logic:equal name="module" value="module2">
<tiles:insert definition="outputPage2" flush="true" />
</logic:equal>
</logic:notEmpty>

<logic:empty name="module">
<tiles:insert definition="outputPage" flush="true" />
</logic:empty> 
```

# asp.net - 向 .aspx 页面发送 AJAX 请求并返回 JSON

> ID：14623327
> 
> 赞同：6
> 
> 时间：2013-01-31T10:16:41.500
> 
> 标签：asp.net, json, ajax, web-services, webforms

我知道可以向`.asmx`页面发送 AJAX 请求。而且我还知道`.asmx`页面通过网络方法处理 AJAX 请求。

是否也可以向`.aspx`页面发送 AJAX 请求？如果是这样，`.aspx`页面是否也通过 Web 方法处理 AJAX 请求？请注意，我想从`.aspx`页面返回 JSON 响应。这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T11:03:43.823

您可以在`.aspx`页面的代码隐藏中定义 Web 方法，然后调用它们：

```
[WebMethod]
public static string doSomething(int id)
{
    ...
    return "hello";
} 
```

然后，在 jQuery 代码中调用 Web 方法：

```
$.ajax({
    type: "POST",
    url: "YourPage.aspx/doSomething",
    data: "{'id':'1'}",
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function (data) {
        var returnedstring = data.d;
        var jsondata = $.parseJSON(data.d);//if you want your data in json
    }
}); 
```

[这](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)是一个很好的入门链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:20:34.607

如果我正确理解了问题，则 Aspx 与 HTML 相同。它将呈现为 HTML。但唯一的区别是服务器端和控件通过状态机制保留状态。

所以你可以做jquery`$.ajax()`功能。

```
$.ajax({
     url: UrlToGetData,
     dataType:'json',
     success:function(data){
             //do some thing with data. 
           }
}); 
```

或者，如果您想将 json 值写入响应，则`Response.ContentType` 首先使用任何 Javascript 序列化程序（JSON.NET），然后像这样设置 contentType。

```
Response.ContentType="application/json"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:48:07.113

```
 $.ajax({
            url: "(aspx page name/method to be called from the aspx.cs page)",
            type: "POST",
            dataType: "json",
            data: $.toJSON(jsonData),
            contentType: "application/json; charset=utf-8",
            success: function (data, textStatus, jqXHR) {
                 //TO DO after success
        }
}); 
```

试试上面的代码

# c++ - Plesk 管理面板 C/C++ API 示例

> ID：14623331
> 
> 赞同：0
> 
> 时间：2013-01-31T10:16:50.890
> 
> 标签：c++, c, plesk

我检查了整个互联网以找到任何 ANSI C 或 C++ Plesk RPC API 的示例，但我找不到。有任何想法吗？我只需要编写一个连接到我的 Plesk 面板并启用/禁用域的程序。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:20:22.297

XML-RPC 不依赖于语言。您需要创建有效的 xml 并发送到服务器（plesk https 服务器 8443 端口）接收她并解析它。例如，您可以使用开源库：libxml 和 curl。

文档 XML-RPC [http://download1.parallels.com/Plesk/PP11/11.0/Doc/en-US/online/plesk-api-rpc/](http://download1.parallels.com/Plesk/PP11/11.0/Doc/en-US/online/plesk-api-rpc/)

文档也有 C# 示例：http: [//download1.parallels.com/Plesk/PP11/11.0/Doc/en-US/online/plesk-api-rpc/33182.htm](http://download1.parallels.com/Plesk/PP11/11.0/Doc/en-US/online/plesk-api-rpc/33182.htm)

# openssl - 在 OpenSSL 中配置时如何指定私有 OID 值的语法？

> ID：14623335
> 
> 赞同：1
> 
> 时间：2013-01-31T10:16:58.973
> 
> 标签：openssl, asn.1, oid

我有以下与 OpenSSL Private OID 支持相关的问题：

1.  通过浏览互联网上的openssl配置和其他工件，我发现OpenSSL支持配置私有OID，但我不清楚如何为与这些OID关联的属性指定值的语法？
2.  我是否可以配置我配置的私有 OID 应仅用于证书的主题名称或颁发者名称，而不用于其他字段或任何其他对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T19:24:46.380

您可以像这样在 oid_section 内的 OID 上定义短名称`myOid = 1.2.3.4`

要定义您希望定义的 OID 采用什么形式，您可以在 openssl.cnf 文件的顶层添加定义（不在任何块内）。这些定义使用 OpenSSL 0.9.8 中添加的 mini-ASN.1 编译器。

`1.2.3.4=critical,ASN1:UTF8String:Some random data`

您还可以查看 mini-ASN.1 编译器的[语法](http://www.openssl.org/docs/crypto/ASN1_generate_nconf.html#)或有关生成[任意扩展](http://www.openssl.org/docs/apps/x509v3_config.html#ARBITRARY_EXTENSIONS)的 OpenSSL 文档。

我不熟悉阻止 OpenSSL 允许在任何地方使用定义的 OID 的方法，但请记住，您在 openssl.cnf 中定义的 OID 将对任何解析这些证书的依赖方显示为原始 OID，而不会受益于您的定义。

例如，如果您将 1.3.6.1.4.1.808808080.1 定义为“myOid”。在您配置的系统上使用主题 DN 中的证书解析证书时，它将显示为，`/CN=something/O=something else/myOid=myValue`而在其他系统上，它将显示为`/CN=something/O=something else/1.3.6.1.4.1.808808080.1=myValue`.

# cocos2d-x - 使用 Cocos2d-x 的陀螺仪

> ID：14623337
> 
> 赞同：0
> 
> 时间：2013-01-31T10:17:00.467
> 
> 标签：cocos2d-x, gyroscope

Cocos2d-x 是否支持使用陀螺仪？如果不是，那我该如何使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-25T17:21:19.520

不，Cocos2d-x 还不支持陀螺仪。只有加速度计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T15:40:16.123

是的，但您应该手动启用它。您也可以通过这种方式添加事件侦听器：

```
Device::setAccelerometerEnabled(true);
Device::setAccelerometerInterval(1 / 30.0);

auto accelerationListener = EventListenerAcceleration::create(CC_CALLBACK_2(GameplayLayer::onAcceleration, this));
_eventDispatcher->addEventListenerWithSceneGraphPriority(accelerationListener, this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:26:38.083

是的，您可以看到 CCAccelerometer 类。在 testcpp 样本中，有一个 AccelerometerTest

# c++ - 尝试与 typedef 交朋友时出现“详细类型引用 typedef”错误

> ID：14623338
> 
> 赞同：7
> 
> 时间：2013-01-31T10:17:00.390
> 
> 标签：c++, templates, typedef

假设我有以下代码（一个简单的 CRTP 类层次结构）。我想对基类类型进行 typedef 以节省自己的输入（在我的实际代码中，我不止一次使用基类类型，并且基类需要几个模板参数），并且我需要与基类成为朋友，因为我想保留实现私有。

```
template< class D >
class Base
{

public:

    void foo() { *static_cast< D * >(this)->foo_i(); }

};

template< class T >
class Derived : public Base< Derived< T > >
{

public:

    typedef class Base< Derived< T > > BaseType;

private:

    // This here is the offending line 
    friend class BaseType;

    void foo_i() { std::cout << "foo\n"; }

};

Derived< int > crash_dummy; 
```

铿锵声 说：

```
[...]/main.cpp:38:22: error: elaborated type refers to a typedef
    friend class BaseType;
             ^
[...]/main.cpp:33:44: note: declared here
    typedef class Base< Derived< T > > BaseType; 
```

我该如何解决？我注意到我可以简单地为朋友类声明输入整个内容并且它工作正常，但即使是一点点重复的代码也会让我感到有点不舒服，所以我正在寻找一个更优雅的“正确”解决方案.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-31T10:38:57.057

我相信这在 C++03 中是不可能的，但被[添加到 C++11](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1791.pdf)中，您可以在其中简单地省略`class`关键字：

```
friend BaseType; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T10:39:10.930

仅启用 C++11 并使用`friend BaseType`

您不能在 C++03 中的 typedef 上使用朋友类。

> 在类的友元声明中应使用详细类型说明符（101）
> 
> 101) 详细类型说明符的类键是必需的。

```
elaborated-type-specifier:

class-key ::opt nested-name-specifieropt identifier

class-key ::opt nested-name-specifieropt templateopt template-id

enum ::opt nested-name-specifieropt identifier

typename ::opt nested-name-specifier identifier

typename ::opt nested-name-specifier templateopt template-id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-14T17:35:35.747

实际上，您可以在 C++11 之前的 C++ 中做到这一点，但它需要一个相当复杂（哈哈）的解决方法，首先声明这个“助手”：

```
template< class T > struct ParamTypeStruct { typedef T ParamType; }; 
```

然后，你的朋友声明：

```
friend class ParamTypeStruct< BaseType >::ParamType; 
```

# sbt - 如何使用 sbt 构建“_2.10.0”工件？

> ID：14623341
> 
> 赞同：0
> 
> 时间：2013-01-31T10:17:09.657
> 
> 标签：sbt, scala-2.10

我正在使用 sbt 0.12.2 和 scala 2.10.0 构建一个项目（在 build.sbt 文件中使用 scalaVersion := "2.10.0" ）。构建的工件名为 xxx_2.10-xxx.jar，原始版本字符串中的尾部“.0”被截断。我想要的是 xxx_2.10.0-xxx.jar 之类的东西。但我不知道该怎么做。

# c# - 实体框架外键作为主键代码优先

> ID：14623342
> 
> 赞同：23
> 
> 时间：2013-01-31T10:17:16.377
> 
> 标签：c#, entity-framework, ef-code-first

我有两个代码优先模型，Foo 和 FooState，其中 Foo 有一个可选的 FooState。

```
public class Foo
{
    [Key]
    public int FooId { get; set; }

    public FooState FooState { get; set; }
}

public class FooState
{
    [Key]
    public int FooStateId { get; set; }

    [Required]
    public int State { get; set; }

    [Required]
    public Foo Foo { get; set; }
} 
```

但是当我尝试像这样将外键添加到 FooState 时，这很好用

```
public class FooState
{
    [Key]
    public int FooStateId { get; set; }

    [Required]
    public int State { get; set; }

    [ForeignKey("Foo")]
    [Required]
    public int FooId
    public Foo Foo { get; set; }
} 
```

这一切都失败了，因为 FooStateId 真的使用 FooId 作为它的主键。从数据库的角度来看，这是有道理的。

但是，我希望在保存 FooState 记录时不必填充 Foo 的实例，但仍保留所需的属性。

如果我想更改其状态，这将允许我在 dto 中发送一个 FooId 和状态，而不必从数据库中检索整个 Foo 对象。

我应该如何首先使用 EF 代码进行设置？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-01-31T10:17:16.377

我想我会试一试，效果很好。

```
public class FooState
{
    [Required]
    [Key]
    [ForeignKey("Foo")]
    public int FooStateId { get; set; }

    [Required]
    public int State { get; set; }

    public Foo Foo { get; set; }
} 
```

# ios - iOS UICollectionViewPerformance 问题

> ID：14623345
> 
> 赞同：0
> 
> 时间：2013-01-31T10:17:23.277
> 
> 标签：ios, resources, uicollectionview, uicollectionviewcell

我正在尝试使用具有`UIImageView`背景的自定义单元格创建一个简单的集合视图。它看起来像：

![在此处输入图像描述](../Images/cdf299839b0df83e1d4bdb9cbd1df684.png)

这是我的代码：

```
ViewController.m

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.collectionView registerClass:[MyCell class] forCellWithReuseIdentifier:@"MY_CELL"];
    leftInset = rightInset = 0;
    numberOfDays = 31;

    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 200;
}
- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section
{
    return numberOfDays;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath;
{
    MyCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"MY_CELL" forIndexPath:indexPath];

    if(indexPath.row < 10)
    cell.imageView.image = [UIImage imageNamed:@"no"];
    else if(indexPath.section%3==1)
    {
        cell.imageView.image = [UIImage imageNamed:@"ok"];
    }
    else if(indexPath.section%3==2)
    {
        cell.imageView.image = [UIImage imageNamed:@"sa"];
    }
    else{
        cell.imageView.image = [UIImage imageNamed:@"happy_vote"];
    }
    return cell;
}

#pragma mark – UICollectionViewDelegateFlowLayout

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath {

    return CGSizeMake(CELL_DIM, CELL_DIM);
}

- (UIEdgeInsets)collectionView:
(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section {
    // top left bottom right
    return UIEdgeInsetsMake(5, leftInset, 0, 0);
} 
```

我的细胞

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        NSLog(@"Init with frame!");
        self.imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0.0, 0.0, frame.size.width, frame.size.height)];

        [self.contentView addSubview:self.imageView];
        [self.imageView setBackgroundColor:[UIColor redColor]];
    }
    return self;
} 
```

它适用于集合视图中的大约 10 个部分。问题是当我想添加更多部分时，垂直滚动开始移动得很慢。我注意到所有单元格都是一次分配的。我正在寻找一种方法来使这对资源更加友好，并让滚动连续移动而不是缓慢和滞后。你能告诉我如何处理资源分配以避免这个问题吗？谢谢你。

PS：我尝试从单元格背景中删除图像视图，并在该方法中`cellForItemAtIndexPath:`为单元格设置背景颜色，但同样，在 10 个或更多部分之后，它的移动速度非常慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T06:09:18.463

为了提高性能，您可能想要做的是检查对象是否已经启动。您还可以单独实例化您的图像，这样就不必每次都从内存中读取它：

使 image1 成为视图控制器的属性：

```
- (void)viewDidLoad
{
    image1 = [UIImage imageNamed:@"image1"];
    image2 = [UIImage imageNamed:@"image2"];
    image3 = [UIImage imageNamed:@"image3"];
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath;
 {
     MyCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"MY_CELL" forIndexPath:indexPath];

     if(indexPath.row < 10)
     cell.imageView.image = [UIImage imageNamed:@"no"];
     else if(indexPath.section%3==1)
     {
         cell.imageView.image = image1;
     }
     else if(indexPath.section%3==2)
     {
         cell.imageView.image = image2;
     }
     else{
         cell.imageView.image = image3;
     }
     return cell;
} 
```

# r - 如何使用 'facet' 在 GGPLOT 中创建多个密度图

> ID：14623348
> 
> 赞同：14
> 
> 时间：2013-01-31T10:17:30.653
> 
> 标签：r, plot, ggplot2

我有以下动态创建的数据：

```
 > df <- data.frame( cbind(rnorm(200),rnorm(200, mean=.8),rnorm(200, mean=.9),rnorm(200, mean=1),rnorm(200, mean=.2),rnorm(200, mean=.3)),rnorm(200, mean=4),rnorm(200, mean=.5))
 > colnames(df) <- c("w.cancer","w.normal","x.cancer","x.normal","y.cancer","y.normal","z.cancer","z.normal")
 > df_log<-log2(df) # ignore the warning with NA
 > head(df_log) 
```

我想要做的是在一个面板中创建多个图，如下面的草图，使用'facet'。我该怎么办？

![在此处输入图像描述](../Images/ec6283841fc76493851eaf1d07ef5310.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-31T10:31:12.013

您必须先准备数据。我已经在你的身上说明了这一点，`data.frame df`因为它是一个适当的正态分布。

```
require(ggplot2)
require(reshape2)
df$id <- 1:nrow(df)

df.m <- melt(df, "id")
df.m$grp1 <- factor(gsub("\\..*$", "", df.m$variable))
df.m$grp2 <- factor(gsub(".*\\.", "", df.m$variable))

p <- ggplot(data = df.m, aes(x=value)) + geom_density(aes(fill=grp2), alpha = 0.4)
p <- p + facet_wrap( ~ grp1)
p + scale_fill_brewer(palette = "Set1") 
```

![ggplot2_facet_example](../Images/2f6ade568c250985d1ad97cae1b12b21.png)

通过替换`df`为`df_log`你做同样的事情会得到这样的东西：

```
require(ggplot2)
require(reshape2)
df_log$id <- 1:nrow(df_log)

df.m <- melt(df_log, "id")
df.m$grp1 <- factor(gsub("\\..*$", "", df.m$variable))
df.m$grp2 <- factor(gsub(".*\\.", "", df.m$variable))

p <- ggplot(data = df.m, aes(x=value)) + geom_density(aes(fill=grp2), alpha = 0.5)
p <- p + facet_wrap( ~ grp1)
p 
```

![ggplog2_facet_log](../Images/6160ea00dee8fc5aee4e27a125506304.png)

# javascript - HTML 表单中的多个动态添加的输入

> ID：14623351
> 
> 赞同：0
> 
> 时间：2013-01-31T10:17:32.900
> 
> 标签：javascript, html

我正在尝试使用 JavaScript 添加隐藏的输入字段，但我确实/没有达到预期的结果。

当用户从下拉列表中选择一个值时，我想将隐藏字段添加到表单中。此页面和其他类似页面中的下拉列表数量不一样，可能多于或少于两个。

当用户从第一个下拉列表中选择值时，我想添加一些隐藏字段，如果他从另一个下拉列表中选择另一个值，我想添加其他隐藏字段，并保存所有隐藏字段的值。

例子：

```
<select id="s1">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
</select> 
```

如果用户选择“2”，我想添加 2 个隐藏字段：

```
<select id="s2">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
</select> 
```

如果用户在第二个列表中选择“3”，我想添加三个额外的隐藏字段，但保存（保留）之前已经使用“s1”动态添加的两个隐藏字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:27:26.477

老实说，我不知道你在问什么......但快速修复可能是使用正确的 HTML 语法。

IE

```
<select id"s2"> 
```

改成

```
<select id="s2"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:52:42.453

jQuery 有一个非常有用的 change() 函数。所以你可能会写这样的东西：

```
$(document).ready(function(){
    $("#s1").change(function(){
        var field_value = $(this).val();

        // then perhaps:
        for(i = 0; i < field_value; i++){

        }

        // or
        if(field_value == 2){
             // do something 
        }
    });
}) 
```

希望那有一些用处。杜克兰也有一个很好的观点。

# c# - 使用异常处理（可能更改）库的错误代码

> ID：14623352
> 
> 赞同：11
> 
> 时间：2013-01-31T10:17:40.063
> 
> 标签：c#, c++, exception-handling, error-handling, libraries

假设您正在使用一个返回错误代码的库。您想为该库编写一个包装器，并且您想处理代码中出现异常的错误。

如果该库仍在由其他人开发，并且错误代码可能会更改（可能有新代码，可能有已弃用的代码，或者某些错误代码可能会稍微改变含义），您的解决方案是什么？

这就是我现在的情况。就我而言，该库是用 C++ 编写的，而我们使用的是 C#。图书馆的编码员说错误代码可能会改变，我必须找到一种方法来处理它。

我们最初的解决方案是：

1.  创建一个包含不同类别的错误代码（终端错误、输入错误等）的 XML 文件。
2.  Wrapper 在启动时获取这些错误代码。
3.  通过检查错误代码的类别引发适当的异常。

假设一个方法返回错误代码 100，然后包装器检查错误代码的类别。如果是*终端错误*，则抛出*终端错误异常*，如果是*用户输入错误*，则抛出*用户输入错误异常*。

这应该可行，但我觉得这不是最佳解决方案。我想知道编写好的企业软件如何处理错误代码的变化。

你会建议做什么？

**编辑：**我已经质疑错误代码将发生变化的事实，并且库的编码人员说代码正在开发中。这是一种算法，所以即使是算法的工作方式也会随着它的原始研究而改变（他正在为此撰写博士学位）。所以他说可能会有不同的错误，或者将来可能不相关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:13:36.590

考虑到具体情况，您正在采用的使用 XML 文件的数据驱动方法似乎是一种不错的方法。但是我会质疑为什么错误代码会发生变化 - 这表明没有为正在开发的库进行适当的设计。它的错误代码应该有一个明确定义的结构，而不是要求你不断改变对它们的解释。

您可能想尝试拥有一个整体的“库异常”异常类，并根据库错误的“类型”为要抛出的每种不同类型的异常对其进行子类化。至少这样，您可以捕获*所有*库错误，即使其中一种特定类型的异常漏网了。IE。`LibraryException`你会在尝试 catch 之后捕捉到类似的东西`TerminalErrorException`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T18:10:25.363

我想如果你稍微改变一下你对情况的看法，你会更容易解决这个问题：

1.  您正在处理框架，我们称其为外部框架。
2.  另一方面，您正在为框架编写一个包装器 - 内部框架。
3.  您的代码（客户端应用程序）使用内部框架，假设它提供用于问题域的功能。据我了解，并且我相信，客户端应用程序不应该对外部框架有任何想法。

现在，问题归结为以下一个问题：内部框架的功能是否明确概述并最终确定？还是这也在改变？

如果它正在改变（可能是因为外部框架），那么内部框架正在开发中。这意味着，客户端应用程序需要等到内部框架准备好宣布第一个版本准备就绪（可能在外部框架完成之后）。

**现在错误处理：**

应用程序中的错误就像**合同**一样。**函数的调用者只**期望特定的异常情况和特定类型的错误。每个可能的错误都由每个函数预定义和记录，类似于它的输入参数和返回值。

这对您意味着什么：

1.  定义内部框架的最终设计（越早越好）。
2.  决定内部框架的每个函数可以抛出什么样的错误。
3.  使用客户端应用程序的内部框架，只期望预期和记录的异常。不要尝试/捕获内部框架不期望的任何内容。*基本上，遵守合同。*
4.  如果错误代码发生变化，则不会改变内部框架中函数的概念。它仍然需要抛出它之前抛出的相同类型的错误（根据合同）。唯一需要更改的部分是，如何将新代码转换为预期的（约定的）错误之一。你可以用任何更好的方法来解决它。

为什么最后一个假设是好的？因为我们说过内部应用程序的设计是最终的，不会改变。错误合约也是最终设计的一部分。

**例子：**

```
//external.
int Say(char* message);

//internal.
///<summary>
/// can throw (CONTRACT): WrongMessageException, SessionTimeOutException
void Say(string message) {
    int errorCode = External.Say(message);
    //translate error code to either WrongMessageException or to SessionTimeOutException.
} 
```

不能翻译？当前的约定错误或外部框架有问题：也许您应该终止该过程？出事了，没想到！！！

```
//client.
...
try {
    Internal.Say("Hello");
}
catch (WrongMessageException wme) {
    //deal with wrong message situation.
}
catch (SessionTimeOutException stoe) {
    //deal with session timeout situation.
} 
```

让我知道是否有任何问题。

**将错误代码转换为异常：**

这显然是对每个错误代码的某种分类。类别可以是每个目的地异常，并且可以按功能对异常进行分类。这正是错误合约的含义：按功能对异常进行分类；并按异常对错误代码进行分类。

下面是一个伪配置。以此作为如何分类的初步想法：

```
category Say [can throw]: { WrongMessageException, SessionTimeOutException }
category WrongMessageException [by error code]: { 100, 101 }
category SessionTimeOutException [by error code]: { 102, 103, 104 } 
```

当然，您不需要为这种印象编写解析器（这是人类可读的伪配置）。您可以使用 XML 或任何类型的源存储类似的句子，这将帮助您配置错误翻译规则和函数契约。

**参考**

书籍：*Jeffrey Richter - CLR 通过 C#，第 3 版。第 20 章 - 异常和状态管理。子章 - 指南和最佳实践。Sub-Sub-Chapter - 隐藏实施细节以维护“合同”。*

本章将把异常描述为契约，并将解释如何对函数抛出的契约进行分类。这可以确认这里提供的解释的正确性和可信度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T21:46:16.847

那这个呢：

您说您已将错误类别存储在某个位置（DB 或 XML 文件）让我们有一些
**名为 ErrorCategory(Master) 和 ErrorDetail(Detail) 的主详细信息表**
我会建议在您的 Errorcategory 表中添加一个列（属性），称为**CustomExceptionType**，它将是一个文本属性，包含程序集的全名和指定异常的类名（例如：*CustomExceptions,CustomExceptions.TerminalError*）
**我们需要一个基类 4 我们所有的自定义异常**，让我们调用它`BaseCustomException calss`
**我们需要一个 ExceptionFactory 类**让我们调用它`CustomExceptionFactory class`
我们的 ExceptionFactory 将有一个名为 CreateException 的方法，类似于这样

```
Public BaseCustomException CreateException(EceptinCategory category, ExceptionDetail detail)
{
   var customException = Activator.CreateInstance(category.CustomExceptionType) as      BaseCustomException;
   customException.SetDetails(detail);
   return customException;
} 
```

因此在运行时，我们的 CustomExceptionFactory 对象将使用 CustomExceptionType 使用反射创建特定异常的实例。
我更喜欢 CustomExceptionFactory 和 BaseCustomException 在一个程序集中实现，所有派生的 CustomExceptions 在另一个程序集中实现，因此我们的主应用程序将与 CustomExceptions.Dll 不相关 将来
通过更改 C++ 工厂，我们的主应用程序将不需要重建，我们所有的需要在CustomExceptions.Dll 中改变表格和impementaion 的数据。（可以使用 XML 或配置文件来实现相同的解决方案，或者......）

跳这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-02T20:29:06.953

好的，如果您想要灵活并且不依赖于代码，我认为在您首次运行应用程序时使用反射生成自定义类是最好的。这是粗略的解释。如果你喜欢它，我可以进一步解释。C++ 代码的提供者应该创建一个包含所有错误代码的类 - 例如 public class Errors{public static readonly IOError = 100}。当您启动您的应用程序时，您将检查此类是否有修改，如果它被修改，您将为每个错误代码生成异常类。在上面的示例中，您将生成继承 Exception .net 类的类 IoException。之后，您可以在包装器中使用它并单独捕获每个异常。另一种可能的解决方案是修改您提到的 xml - 为每个错误代码添加异常类 - 使用错误代码 100 的示例，您将拥有 IoException 类。之后你需要实现这个类并使用它......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T20:39:13.790

最好折旧旧代码并保留其名称，而不是让您的代码名称不断变化。由于您的作者似乎对设计不感兴趣，请让他报告`stderr`您可以检索的流上的警告和错误。

此外，用代码字符串对构建 CSV 或 XML 似乎很简单，算法编写者可以自由编辑他认为合适的内容。*为不同类型*的错误保留一定范围的代码编号（1000s 用于输入错误，2000s 用于终端错误等）让您的包装器使用他编写的代码字符串对来解释返回代码。

然后根据错误类型抛出异常，由数字范围确定。

# haskell - 设置 SSL + Happstack 服务器示例失败并出现文件错误

> ID：14623354
> 
> 赞同：0
> 
> 时间：2013-01-31T10:17:49.797
> 
> 标签：haskell, ssl, web, happstack

我试图编写一个使用**SSL的简单****Happstack**应用程序。使用此源代码：

 **```
module Main where

import Happstack.Server( ok )
import Happstack.Server.SimpleHTTPS( TLSConf(..), nullTLSConf, simpleHTTPS )

conf :: TLSConf
conf = nullTLSConf{
  tlsPort = 8011
  , tlsCert = "server.crt"
  , tlsKey = "server.key"
  }

main :: IO ()
main = simpleHTTPS nullTLSConf $ ok "Hello, World!" 
```

它可以编译，但是，当我以普通用户身份运行时，我得到：

```
mytest: bind: permission denied (Permission denied) 
```

当我以*root*身份运行时，我得到：

```
mytest: user error (error:02001002:system library:fopen:No such file or directory) 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:41:59.943

我发现了错误：

它应该是：

```
main = simpleHTTPS conf $ ok "Hello, World!" 
```**

# sql - 带有实体框架或 linq 的 Sql Query 到 C#

> ID：14623358
> 
> 赞同：0
> 
> 时间：2013-01-31T10:17:54.733
> 
> 标签：sql, linq, entity-framework, sql-to-linq-conversion

我有这个 sql 表达式，我想使用实体框架或 linq 将其转换为代码语法

```
select [Key],name from products where [Key] not in (select distinct parent from products where parent is not null) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:22:03.577

我认为这会奏效。

```
var parents = products.Where(p => p.parent != null).Distinct();

var products = products.Where(p => !parents.Contains(p.Key))
                       .Select(p => new { p.Key, p.Name }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:31:39.860

试试这个，可能对你有帮助

```
var p = products.Where(p => p.parent != null).select(p=>p.parent).Distinct();

var pro = products.Where(p => !p.Contains(p.Key))
                   .Select(p => new { ProKey = p.Key, ProName.Name }); 
```

可能它会起作用，但你仍然有问题让我知道......

# java - 从 XML 获取属性的正确方法？

> ID：14623361
> 
> 赞同：0
> 
> 时间：2013-01-31T10:17:57.313
> 
> 标签：java, xml, nodelist

我有以下 XML 文件

```
 <requesting>
 <performing>
  <properties val1="foo"/>
  <properties val2="foo2"/>
 </requesting>
 </performing> 
```

获取此数据的正确 Java 方法是什么？我越来越困惑:)

我正在尝试以下..

将 xml 文件加载到 a`Document dom`后，我尝试执行以下操作：

```
NodeList nl = dom.getElementsByTagName("requesting").item(0).getOwnerDocument().
             getElementsByTagName("performing").item(0).getOwnerDocument().
             getElementsByTagName("properties"); 
```

我当然得到空值。

我错过了一些东西..我不知道是什么...请帮助我。

任何有关该问题的信息将不胜感激。

谢谢你

克菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:30:41.390

ok ok !! I found the solution to the problem!!

instead of getOwnerDocument() I needed to cast item(0) to Document.

means..

```
Document doc1 = (Document) dom.getElementsByTagName("requesting").item(0); 
```

and so on...

that's it :) simple as that

thanks for your help guys :)

# javascript - javascript中的正则表达式

> ID：14623363
> 
> 赞同：4
> 
> 时间：2013-01-31T10:17:57.427
> 
> 标签：javascript, regex

这是代码

```
var str = 'a girl is reading a book!';
var reg =  /\w*(?=ing\b)/g;
var res = str.match(reg);
console.log(res); 
```

结果是 ["read",""] 在 chrome 中。

我想问为什么结果中有“”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T10:22:57.387

这是预期的行为

First`read`被捕获，因为它后面跟着`ing`.Here`ing`仅匹配..它从不包含在结果中。

现在我们在`read`ie 之后的位置，我们将在`i`..here 再次`ing`匹配（*由于`\w*`*），它给出了一个**空结果**，因为read 和 ing**之间**没有任何内容。

您可以使用`\w+(?=ing\b)`来避免空结果

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:26:16.000

`/\w*(?=ing\b)/g`
在这里，您正在使用`*`这意味着没有或更多，因此它会在读取部分后`"read"ing`捕获两者。使用 + 表示一个或多个。`""ing``read`

# highslide - Highslide 自动关闭 iframe 弹出窗口

> ID：14623364
> 
> 赞同：0
> 
> 时间：2013-01-31T10:17:59.343
> 
> 标签：highslide

这是与此[问题 14591396](https://stackoverflow.com/questions/14591396/highslide-ajax-using-form-with-submit)相关的问题， 我可以在 3 秒内按下提交后自动关闭 iframe 弹出窗口吗？

问候，托比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:17:07.817

是的，您可以，请参阅[http://highslide.com/forum/viewtopic.php?f=4&t=3768](http://highslide.com/forum/viewtopic.php?f=4&t=3768)。

唯一的区别是您在用户提交表单时开始超时。

```
myForm.onsubmit = function () {
   setTimeout(function () {
      try {
         parent.window.hs.getExpander().close();
      } catch (e) {}
   }, 3000);
}); 
```

# html - CSS最后一行元素样式

> ID：14623371
> 
> 赞同：1
> 
> 时间：2013-01-31T10:18:36.550
> 
> 标签：html, css, css-selectors

```
<div class="archyvas-virselis">
    <a href="#"><img src="./img/virselis-archyvas.jpg" alt=""/></a>
    <a href="#"><img src="./img/virselis-archyvas.jpg" alt=""/></a>
    <a href="#"><img src="./img/virselis-archyvas.jpg" alt=""/></a>
    <a href="#"><img src="./img/virselis-archyvas.jpg" alt=""/></a>
    <a href="#"><img src="./img/virselis-archyvas.jpg" alt=""/></a>
    <a href="#"><img src="./img/virselis-archyvas.jpg" alt=""/></a>
    <a href="#"><img src="./img/virselis-archyvas.jpg" alt=""/></a>
    <a href="#"><img src="./img/virselis-archyvas.jpg" alt=""/></a>

</div> 
```

例如，在 1 行中有 4 个元素，我希望行的第 4 个元素`margin-right`是`0`，可以写那种样式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:26:41.167

```
 .archyvas-virselis a:nth-child(4n+4){ margin-right: 0} 
```

每 4 个元素

或者

```
 .archyvas-virselis a:nth-child(4){ margin-right: 0 } 
```

仅适用于 4 元素

请记住它仅适用于 ie9 及更高版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:26:57.080

我会去

```
a:nth-child(4n+4){
    margin-right:0;
} 
```

基于您可能希望第 4 个是右边距，但一行中可能有 4 个以上的元素（根据您的 HTML）

这是一个 css3 选择器，可能不适用于旧版浏览器 (IE)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:23:36.220

Jquery 是不修改 HTML 的唯一方法。你可以像这样实现它：

```
 jQuery('.archyvas-virselis a:nth-child(4n)').addClass('fourth-item'); 
```

并为类*第四项定义样式*

但假设你能做到这一点，主要的选择就是给它一个*class="fourth-item"*，然后做：

```
a.fourth-item { /* ... */ } 
```

# php - 将旧的 google php 列出的链接重定向到新的 .NET 站点

> ID：14623376
> 
> 赞同：1
> 
> 时间：2013-01-31T10:18:57.213
> 
> 标签：php, redirect

我在 .NET 中创建了一个新网站，替换了以前的 php 网站。我已经更新了 xml 站点地图和 404 错误页面，但希望当用户单击刚刚在 google 中列出的 php 页面时将用户定向到主页。当您单击 google 链接时，它会在页面上显示 No input file specified。

谢谢你的帮助

# java - 基于键的 Map 排序

> ID：14623379
> 
> 赞同：3
> 
> 时间：2013-01-31T10:19:04.227
> 
> 标签：java, hashmap, hashtable

这基本上不是如何`HashMap`根据键进行排序。为此，我可以`TreeMap`不眨眼直接使用 :)

我现在拥有的是

```
Map<String, Object> favoritesMap = new HashMap<String, Object>();
and its contents can be
["Wednesdays" : "abcd"]
["Mondays" : "1234"]
["Not Categorized" : "pqrs"]
["Tuesdays" : "5678"] 
```

我想根据键对 HashMap 进行排序，除此之外，我需要“未分类”作为最后一个检索。

所以在迭代 keySet 时预期的是

```
["Mondays", "Tuesdays", "Wednesdays", "Not Categorized"] i.e. sorted on keys and "Not Categorized" is the last one 
```

考虑`HashMap`在创建时进行并在最后添加`["Not Categorized" : "pqrs"]`但`HashMap`不保证顺序:)

解决方案的任何其他指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T10:28:54.747

`TreeMap`您是否出于某些外部原因而专门排除？如果不是，您显然可以使用`TreeMap`特制的`Comparator`.

你考虑过其他`SortedMap`的吗？

如果`TreeMap`肯定出局，我会扩展`HashMap`并使它看起来总是有一个条目，但这肯定不是一件微不足道的工作。`SortedMap`在走这条路之前，您应该有一个很好的理由不使用 a 。

**添加**

这是一个示例，说明如何使特定条目始终使用 a 排序到末尾`TreeMap`：

```
// This key should always appear at the end of the list.
public static final String AtEnd = "Always at the end";

// A sample map.
SortedMap<String, String> myMap =
        new TreeMap<>(
        new Comparator<String>() {
          @Override
          public int compare(String o1, String o2) {
            return o1.equals(AtEnd) ? 1 : o2.equals(AtEnd) ? -1 : o1.compareTo(o2);
          }
        });

private void test() {
  myMap.put("Monday", "abc");
  myMap.put("Tuesday", "def");
  myMap.put("Wednesday", "ghi");
  myMap.put(AtEnd, "XYZ");

  System.out.println("myMap: "+myMap);
  // {Monday=abc, Tuesday=def, Wednesday=ghi, Always at the end=XYZ}
} 
```

我想知道你是否正在寻找它的一些变体？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T10:22:16.603

您可以通过使用来实现这一点，`LinkedHashMap`因为它保证按插入顺序返回结果。

另请查看以下帖子以了解地图类型之间的差异。

> [HashMap、LinkedHashMap、TreeMap的区别](https://stackoverflow.com/questions/2889777/difference-between-hashmap-linkedhashmap-and-sortedmap-in-java)

或者只是创建一个自定义类，它拥有与值不同的键。根据该类的键进行排序。对于您的情况，使键值与当天相同，对于“未分类”情况，请确保其键启动时间晚于任何其他键，例如将其设置为“Z_Not Categorized”。

```
public ComplexKey
{
    String key;
    String value;
}

ComplexKey monday = new ComplexKey("monday", "monday");
ComplexKey notCategorized = new ComplexKey("Z_Not Categorized", "Not Categorized"); 
```

然后你可以编写一个自定义比较器，根据`complexKey`类的键对值进行排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:25:48.800

在你的情况下，我会使用 TreeMap：

```
Map<DayOfWeek, Object> favoritesMap = new TreeMap<>(); 
```

`DayOfWeek`你声明的类在哪里：

```
class DayOfWeek implements Comparable<DayOfWeek> { 
```

因为将几天的 wooks 排序为字符串并不方便。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T16:51:10.353

事实上，键总是被排序的。如果您将地图输出几次，您会发现结果保持不变。

### 首先，我将再次八卦散列：

原因是散列。每个对象都有`hashCode()`方法。散列空间就像一个大数组，其中包含所有可能的散列值作为索引。当一个新元素插入 a`HashSet`或一个新元素对放入 a`HashMap`时，根据其哈希码将其放入哈希空间。如果两个元素具有相同的哈希码，则将它们与`equals()`方法进行比较，如果不相等，则将新元素放在它旁边。

### 然后，如果您知道那里发生了什么，您可以实现如下代码：

```
import java.util.*;

class MyString {
    private String str;

    public MyString (String str) {
        this.str = str;
    }

    public String toString () {
        return str;
    }

    public boolean equals (Object obj) {
        if (obj.getClass().equals(MyString.class)) {
            return obj.toString().equals(str);
        }
        return false;
    }

    public int hashCode () {
        if (str.equalsIgnoreCase("Not Categorized")) {
            return Integer.MAX_VALUE;
        } else if (str.hashCode() == Integer.MAX_VALUE) {
            return 0;
        }
        return str.hashCode();
    }
}

public class Test {
    public static void main (String args[]) {
        Map<MyString, String> m = new HashMap<MyString, String>();
        m.put(new MyString("a"), "a");
        m.put(new MyString("c"), "c");
        m.put(new MyString("Not Categorized"), "NC");
        m.put(new MyString("b"), "b");
        Set<MyString> keys = m.keySet();
        for (MyString k : keys) {
            System.out.println(m.get(k));
        }
    }
} 
```

* * *

**结果是“未分类”总是最后出现。原因很简单：它的哈希值总是整数的最大值。**

我创建一个 String 包装类的原因是 String 类是最终的，它不能被扩展。所以通过这种方式，你的类结构会有一点改变，但不会太大。

* * *

### 可以使用 TreeMap，但效率会降低：

```
public static void main (String args[]) {
    Map<String, String> m = new TreeMap<String, String>(new Comparator<String>() {
        public int compare (String s1, String s2) {
            if (s1.equals(s2)) {
                return 0;
            }
            if (s1.equalsIgnoreCase("Not Categorized")) {
                return 1;
            }
            if (s2.equalsIgnoreCase("Not Categorized")) {
                return -1;
            }
            if (s1.hashCode() > s2.hashCode()) {
                return 1;
            } else if (s1.hashCode() < s2.hashCode()) {
                return -1
            } else {
                return 0;
            }
        }

        public boolean equals (Object obj) {
            return false;
        }
    });
    m.put("a", "a");
    m.put("c", "c");
    m.put("Not Categorized", "NC");
    m.put("b", "b");
    Set<String> keys = m.keySet();
    for (String k : keys) {
        System.out.println(m.get(k));
    }
} 
```

### 结果是一样的。它会对所有元素进行排序，但不会改变其他字符串的散列顺序，它只会确保“未分类”始终是最大的。

# java - 在 MacOSX10.6.8 上使用 java 小程序时出现非活动插件错误

> ID：14623380
> 
> 赞同：2
> 
> 时间：2013-01-31T10:19:05.987
> 
> 标签：java, macos, centos, osx-snow-leopard, webmin

我已经设置了 webmin，直到昨天它都运行良好。

我试图让它更安全。所以我尝试将带有基本密码认证的.htaccess 放到webmin 相关的目录中。

然而它根本没有用。所以我刚刚为 webmin 启用了 SSL。
这可能是问题。

但是现在，webmin 中的文件管理器将无法工作！它只显示“非活动插件”

我怎样才能让它再次工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T17:33:35.223

这是答案，如[Apple 讨论论坛](https://discussions.apple.com/thread/4761112?tstart=0)中所述：

> sudo /usr/libexec/PlistBuddy -c“删除：JavaWebComponentVersionMinimum”/System/Library/CoreServices/CoreTypes.bundle/Contents/Resources/XProtect.meta.plist

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:29:24.277

同样的错误，对我来说同样的解决方案。

谢谢乔尔布鲁纳 - 我一直在寻找这个答案半天了！

* * *

只是添加那个

*   您必须重新启动浏览器才能使其生效 - 如果您感到沮丧，这很明显但很容易出错。
*   您无需重新启动计算机。还要仔细检查您的浏览器和首选项窗格中是否启用了 Java。

请注意作为有用的指南，在您应用上述解决方案之前，以下内容不起作用：

更新 Java

删除缓存

更改首选项

从苹果网站重新安装 Java

通过终端重新激活完整的首选项窗格

苹果更新

重新启动浏览器或您的计算机

~mo~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T23:52:43.230

对于在 OS10.6 上处理 Java“非活动插件”问题的其他人：Apple 最近（2013 年 3 月 4 日）发布了 Java 更新：http: [//support.apple.com/kb/DL1573](http://support.apple.com/kb/DL1573)

# ajax - Spring控制器@RequestMapping在使用jQuery ajax时没有及时命中

> ID：14623384
> 
> 赞同：1
> 
> 时间：2013-01-31T10:19:17.947
> 
> 标签：ajax, spring

我使用 Spring MVC 和 jQuery ajax 开发了一个 Web 应用程序。有时我的 ajax 调用有问题；它没有达到指定的请求映射，但有时它没有任何问题。我不知道问题出在哪里。

# delphi - TCollectionItem 的后代事件

> ID：14623392
> 
> 赞同：2
> 
> 时间：2013-01-31T10:19:50.340
> 
> 标签：delphi, events, tcollectionitem

我写了简单的代码（见下文）：一个事件的后代`TCollectionItem`。但是当我在对象检查器中单击`OnDone`事件时，我收到消息：

> “无法为未命名的组件创建方法”。

这段代码有什么问题？

```
unit MainComponent2;

interface

uses Windows, SysUtils, Classes;

type
  TMyField = class(TCollectionItem)
  private
    FName: string;
    FOnDone: TNotifyEvent;
    FText: string;
  protected
    function GetDisplayName : String; override;
  public
    constructor Create(ACollection: TCollection);override;
    function GetNamePath: string;override;
  published
    property Name: string read FName write FName;
    property Text: string read FText write FText;
    property OnDone: TNotifyEvent read FOnDone write FOnDone;
  end;

  TMyFields = class(TOwnedCollection)
  private
    function GetItem(Index: Integer): TMyField;
    procedure SetItem(Index: Integer; const Value: TMyField);
  protected
    procedure Update(Item: TmyField);reintroduce;
  public
    constructor Create(AOwner: TComponent);
    function Add: TMyField;
    function Insert(Index: Integer): TMyField;
    property Items[Index: Integer]: TMyField read GetItem write SetItem; default;
  end;

  TMainComponent2 = class(TComponent)
  private
    FMyFields: TMyFields;
    function GetItem(index: integer): TMyField;
    procedure SetItem(index: integer; const Value: TMyField);
    procedure SetMyFields(const Value: TMyFields);
  public
    constructor Create(AOwner: TComponent);override;
    destructor Destroy;override;

    property Items[index: integer]: TMyField read GetItem write SetItem;
  published
    property MyFields: TMyFields read FMyFields write SetMyFields;
  end;

procedure Register;

implementation

{ TMainComponent2 }

constructor TMainComponent2.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  FMyFields := TMyFields.Create(AOwner);
end;

destructor TMainComponent2.Destroy;
begin
  FMyFields.Free;
  inherited;
end;

function TMainComponent2.GetItem(index: integer): TMyField;
begin
  result := FMyFields.Items[index] as TMyField;
end;

procedure TMainComponent2.SetItem(index: integer; const Value: TMyField);
begin
  FMyFields.Items[index] := Value;
end;

procedure TMainComponent2.SetMyFields(const Value: TMyFields);
begin
  FMyFields.Assign(Value);
end;

{ TMyField }

constructor TMyField.Create(ACollection: TCollection);
begin
  inherited Create(ACollection);
  FName := ClassName + IntToStr(ID);
end;

function TMyField.GetDisplayName: String;
begin
  result := FName;
end;

function TMyField.GetNamePath: string;
begin
  Result := Format('%s%d',['MyField', Index])
end;

{ TMyFields }

function TMyFields.Add: TMyField;
begin
  result := (inherited Add) as TMyField;
end;

constructor TMyFields.Create(AOwner: TComponent);
begin
  inherited Create(AOwner, TMyField);
end;

function TMyFields.GetItem(Index: Integer): TMyField;
begin
  result := (inherited GetItem(Index)) as TMyField;
end;

function TMyFields.Insert(Index: Integer): TMyField;
begin
  result := (inherited Insert(Index)) as TMyField;
end;

procedure TMyFields.SetItem(Index: Integer; const Value: TMyField);
begin
  inherited SetItem(Index, Value);
end;

procedure TMyFields.Update(Item: TmyField);
begin
  inherited Update(Item);
end;

procedure Register;
begin
  RegisterComponents('MyComponents', [TMainComponent2]);
end;

end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T11:00:15.060

您忘记包含以下的继承名称路径`TMyField`：

```
function TMyField.GetNamePath: string;
begin
  Result := inherited GetNamePath + Format('MyField%d',[Index]);
end; 
```

此外，您为该物业提供了错误的所有者`MyFields`。使用`Self`而不是`AOwner`. `AOwner`是您放置组件的表单。

```
constructor TMainComponent2.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  FMyFields := TMyFields.Create(Self);
end; 
```

顺便说一句，你为什么重新介绍`TMyFields.Update`？这打破了继承链。尽可能使用`override`，或添加其他方法。

# jsf - pe:inputNumber 所需的消息

> ID：14623395
> 
> 赞同：0
> 
> 时间：2013-01-31T10:19:53.887
> 
> 标签：jsf, primefaces, primefaces-extensions

我使用复合组件，它的基础是来自 Primefaces 扩展的 InputNumber。我已将 required 属性设置为 true 并且未显示消息。我也没有 * 标记，表示该字段是必需的。这是代码：

```
<p:outputLabel for="maxvrednost" value="#{resources['skale.maxvrednost']}" />
        <asw:inputDecimal id="maxvrednost" bean="#{attrsBean}" column="maxvrednost" required="true" disabled="#{tip == 'brisanje'}" value="#{dto.maxvrednost}"/>
        <p:message for="maxvrednost" display="icon" /> 
```

复合组件的代码是：

```
<cc:interface>
    <cc:attribute name="bean" required="true" type="asw.iis.common.ui.beans.CommonListBackingBean" />
    <cc:attribute name="column" required="true" type="java.lang.String" />
    <cc:attribute name="value" required="true" type="java.lang.Object" />       
    <cc:attribute name="disabled" default="false" required="false"  type="java.lang.Boolean" />
    <cc:attribute name="title" required="false" type="java.lang.String" default=""/>
</cc:interface>
<cc:implementation>
    <pe:inputNumber emptyValue="" style="text-align: right;" value="#{cc.attrs.value}" required="#{cc.attrs.required}"          
        decimalSeparator="#{applicationPropertiesBean.decimalSeparator}" disabled="#{cc.attrs.disabled}"
        decimalPlaces="#{cc.attrs.bean.findNumberOfDecimalPlaces(cc.attrs.column)}" title="#{cc.attrs.title}"
        thousandSeparator="#{applicationPropertiesBean.groupSeparator}">
    </pe:inputNumber>
</cc:implementation> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T18:45:53.920

不是 100% 正确的解决方案，但它对我有用：

```
<composite:interface >
    <composite:attribute name="value" required="false" type="java.lang.String" default=""></composite:attribute>
    <composite:attribute name="update" required="false" type="java.lang.String" default=""></composite:attribute>
    <composite:attribute name="process" required="false" type="java.lang.String" default=""></composite:attribute>
    <composite:attribute name="requiredMessage" required="false" type="java.lang.String" default=""></composite:attribute>
    <composite:attribute name="decimalPlaces" required="false" type="java.lang.Integer" default="0"></composite:attribute>
    <composite:editableValueHolder name="value" targets="num"></composite:editableValueHolder>
    <composite:

</composite:interface>
<composite:implementation>
<div id="#{cc.clientId}">
<pe:inputNumber id="num" roundMethod="S" decimalPlaces="#{cc.attrs.decimalPlaces}" symbol="#{applicationBean.currentCurrencySymbol}" 
    minValue="0" required="true" requiredMessage="#{cc.attrs.requiredMessage}" 
    value="#{cc.attrs.value}"></pe:inputNumber>
</div>
</composite:implementation> 
```

使用如下：

```
 <p:outputLabel value="Enter Amount" for="amt:num"></p:outputLabel>
        <p:message for="amt:num"></p:message>
        <comp:InputCurrency id="amt" roundMethod="S" decimalPlaces="0" symbol="#{applicationBean.currentCurrencySymbol}" 
            minValue="1" requiredMessage="#{loc._('Please enter amount to withdraw!')}"
            value="#{myBean.amount}"></comp:InputCurrency> 
```

请注意，“必需”属性被硬编码为“真”。如果我定义复合组件属性 'required' 并将值复制到 inputNumber 'required' 属性，它会按要求运行，但不会在标签上呈现 '*' 标记。发生这种情况是因为 inputNumber 的 'required' 属性在渲染时尚未设置，返回为 'false' - 不知道为什么，没有时间深入研究。

# windows-8 - 硬盘序列号在 Windows XP、Vista 和 7 中每 2 个字节翻转一次，但在 Windows 8 中不翻转

> ID：14623397
> 
> 赞同：15
> 
> 时间：2013-01-31T10:20:10.047
> 
> 标签：windows-8, ioctl, deviceiocontrol

我需要获取**HDD 序列号**才能将其用作*许可*软件的密钥。我在这个 url 中使用了**diskid32代码：http:** [//www.winsim.com/diskid32/diskid32.html](http://www.winsim.com/diskid32/diskid32.html) 它使用了**DeviceIoControl Win32 API 和****IOCTL_STORAGE_QUERY_PROPERTY**的 IO 控制代码。

有效。然而，当我仔细检查打印在硬盘本身上的实际序列号时，我发现每 2 个字节的数字被翻转。

一个简单的解决方案可能是简单地将字节**翻转回来。**它适用于 Windows XP、Vista 和 7，但在 Windows 8 中不需要翻转！

我想知道字节在 Windows XP、Vista 和 7 中翻转的确切原因，以及为什么在 Windows 8 中不翻转。**下一个 Windows**呢？

部分代码稍作改动：

```
 int drive = 0;
  HANDLE hPhysicalDriveIOCTL = 0;
  char driveName [256];
  sprintf (driveName, "\\\\.\\PhysicalDrive%d", drive);
  //  Windows NT, Windows 2000, Windows XP - admin rights not required
  hPhysicalDriveIOCTL = CreateFile (driveName, 0,
                           FILE_SHARE_READ | FILE_SHARE_WRITE, NULL,
                           OPEN_EXISTING, 0, NULL);
  if (hPhysicalDriveIOCTL != INVALID_HANDLE_VALUE)
  {
     _STORAGE_PROPERTY_QUERY query;
     DWORD cbBytesReturned = 0;
     char buffer [10000];

     memset ((void *) & query, 0, sizeof (query));
     query.PropertyId = StorageDeviceProperty;
     query.QueryType = PropertyStandardQuery;

     memset (buffer, 0, sizeof (buffer));

     if ( DeviceIoControl (hPhysicalDriveIOCTL, IOCTL_STORAGE_QUERY_PROPERTY,
               & query,
               sizeof (query),
               & buffer,
               sizeof (buffer),
               & cbBytesReturned, NULL) )
     {
         _STORAGE_DEVICE_DESCRIPTOR * descrip = (_STORAGE_DEVICE_DESCRIPTOR *) & buffer;
         char serialNumber [1000];
         char modelNumber [1000];
         char vendorId [1000];
         char productRevision [1000];

         flipAndCodeBytes (buffer,
                           descrip -> SerialNumberOffset,
                           1, serialNumber );

        ...
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-14T09:47:24.780

在 Windows 8 或更高版本时，只需使用 flibAndCodeBytes 函数的“翻转”标志关闭翻转即可。

```
bool shoulFlipBytes = true;
if(IsWin8OrLater()) shouldFlipBytes = false;

flipAndCodeBytes(buffer,
                 descrip->SerialNumberOffset,
                 shouldFlipBytes,
                 serialNumber); 
```

您可以使用它来检查 Windows 版本：

```
#include <windows.h>

bool IsWin8OrLater() {
    DWORD version = GetVersion();
    DWORD major = (DWORD) (LOBYTE(LOWORD(version)));
    DWORD minor = (DWORD) (HIBYTE(LOWORD(version)));

    return (major > 6) || ((major == 6) && (minor >= 2));
} 
```

根据[http://msdn.microsoft.com/en-us/library/ms724832%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms724832%28VS.85%29.aspx) （感谢 ChrisV[确定操作系统是否为 Windows 7](https://stackoverflow.com/questions/2102401/determine-if-o-s-is-windows-7)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-12T00:34:19.300

我在我的软件许可中使用相同的方法（和相同的代码）。是的，Windows 8 出于某种原因返回了此方法的翻转值，我无法说明原因（所以我无法回答您的问题）。

我的解决方案是您指出的那个：再次翻转值。因此，在调用“flipAndCodeBytes”之后，您可以测试是否是 Windows 8 操作系统，并翻转这些值。

就我而言，它现在可以工作了（我在 Windows XP/Vista/7 和 Windows 8 上得到了相同的值）。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-15T02:22:42.517

基本上，您所依赖的数据一开始并不严格可靠。驱动器可能会在计算机的整个生命周期内发生变化；始终获得正确的序列号对您的产品甚至都不重要。

我能想到的一个简单的技巧是规范化序列号，例如通过对数字进行排序；这将使更多驱动器看起来相似，但我怀疑它会成为一个问题。

另一种看待问题的方式是，应用程序应该提供序列号更改；用户可能会被告知许可问题（无论出于何种原因），并被要求使用生成的代码（不一定是序列号本身）联系支持部门。有了这个代码，支持人员就可以为客户创建一个新的许可证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-19T21:55:28.797

似乎您必须通过 API 检查 Windows 版本，如果版本足够高，则将 if() 分支添加到您的代码中

我的开发人员发现此方法存在其他问题 - 依赖于程序的 IOCtl 代码在 Win7\Win8+ 上以管理员权限运行。由于我们的软件，它是使用系统权限运行的服务和严格使用用户权限运行的客户端软件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-16T17:37:28.110

出于许可检查的目的，您真的不在乎。您需要知道的是，某些配置会导致翻转，而有些则不会，并且它可以在许可证的生命周期内更改。

所以接受这两种变体：

```
string serial = get_serial();
if (license_check(serial)) {
    licensed = true;
    return;
}
serial = swap_bytes(serial);
if (license_check(serial)) {
    licensed = true;
    return;
} 
```

（我看到雷蒙德在评论中提出了这个建议）

没有脆弱的操作系统检查，不用担心用户申请许可证时是否无法正确翻转。只是快乐的用户。

# c# - Linq，如何通过转换正确获取字符串

> ID：14623401
> 
> 赞同：0
> 
> 时间：2013-01-31T10:20:17.623
> 
> 标签：c#, linq, valueconverter

我在通过 linq 从文件中获取字符串时遇到问题。

**我的文件是：**

```
 LANG_FORM="nnd documents acceptance"
%>
            Response.Write "<SCRIPT LANGUAGE=javascript>alert('" & LN("KtśćóŻ") & "');</SCRIPT>" 
```

它是asp文件的一部分，但现在没关系了。

我必须在 LN 函数中获得价值。
**我像这样写 linq synatx：**

```
var LN = from place in File.ReadAllLines(item.file)
                                         where Regex.IsMatch(place, pattern)
                                         select new { place }; 
```

**在调试视图中，我的输出不正确：**

```
{ place =           Response.Write "<SCRIPT LANGUAGE=javascript>alert('" & LN("Kt���") & "');</SCRIPT>" } 
```

我的问题是，如何准备 linq 语法以正确获取输出（它们是波兰字母）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:24:53.987

我认为编码是错误的。

尝试[File.ReadAllLines(String, Encoding)](http://msdn.microsoft.com/en-us/library/bsy4fhsa.aspx)。

```
var LN = from place in File.ReadAllLines(item.file, Encoding.UTF8)
                                         where Regex.IsMatch(place, pattern)
                                         select new { place }; 
```

您可以使用所需的编码，而不仅仅是`Encoding.UTF8`.

# oracle - 用户如何连接 SysDBA？

> ID：14623402
> 
> 赞同：0
> 
> 时间：2013-01-31T10:20:17.857
> 
> 标签：oracle, security, audit, database-administration

我们在我们的数据库上启动 Oracle AUDIT 和 Onlogon 过程审计。我们很困惑，什么 SysDBA 可以连接到系统。SysDBA 是 Oracle 用户吗？在 SQL*Plus 中是否有此操作的命令？

我们的 On Logon PL/SQL 代码

```
CREATE OR REPLACE TRIGGER logon_audit_trigger AFTER LOGON ON DATABASE
...
   insert into logon_log
   (user_id       ,
     session_id    ,
     sid   ,
     serial#  ,
     host          ,
     ip_address  ,
     last_action   ,
     last_module   ,
     logon_day     ,
     logon_time    ,
     logoff_day    ,
     logoff_time   ,
     elapsed_minutes,
     elapsed_seconds)
   values(
     user,
     sys_context('USERENV','SESSIONID'),
     sys_context('USERENV','SID'),
     dbms_debug_jdwp.current_session_serial,
     sys_context('USERENV','HOST'),
     sys_context('USERENV','IP_ADDRESS'),
     action_name,
     module_name,
     lo_dt,
     to_char(lo_dt, 'hh24:mi:ss'),
     null,
     null,
     null,
     null
  ); 
```

选择 * 从 login_log

```
USER_ID          SESSION_ID     SID    SERIAL#  HOST          IP_ADDRESS         LAST_MODULE      LOGON_DAY
JOHN               393900       282    1186     ERO\APPS      192.168.1.103      frmweb.exe       1/31/2013 9:27:49 AM
JOHN               393903       189    1005     ERO\SECC      192.168.1.110      SQL*Plus         1/31/2013 9:28:12 AM
JOHN               393929       167    288      ERO\SECC      192.168.1.110      plsqldev.exe     1/31/2013 9:38:37 AM
JOHN               393930       198    858      ERO\SECC      192.168.1.110      plsqldev.exe     1/31/2013 9:38:37 AM
JOHN               393983       179    6066     ERO\SECC      192.168.1.110      frmbld.exe       1/31/2013 9:58:21 AM
JOHN               393987       182    231      ERO\SECC      192.168.1.110      frmbld.exe       1/31/2013 9:59:17 AM
JOHN               393941       278    1429     ERO\SECC      192.168.1.110      plsqldev.exe     1/31/2013 9:42:26 AM
JOHN               394060       305    1337     ERO\SECC      192.168.1.110      plsqldev.exe     1/31/2013 10:36:34 AM
JOHN               394129       261    5236     ERO\SECC      192.168.1.110      plsqldev.exe     1/31/2013 11:16:40 AM
JOHN               394196       269    783      ERO\SECC      192.168.1.110      SQL*Plus         1/31/2013 11:58:20 AM
JOHN               394199       309    701      ERO\APPS      192.168.1.103      frmweb.exe       1/31/2013 12:00:04 PM
JOHN               394240       196    578      ERO\SECC      192.168.1.110      SQL*Plus         1/31/2013 12:28:53 PM
JPHN               394243       248    702      ERO\SECC      192.168.1.110      frmbld.exe       1/31/2013 12:30:56 PM
SysDBA             394249       196    580      ERO\SECC      192.168.1.110                       1/31/2013 12:31:56 PM
JOHN               394252       248    704      ERO\SECC      192.168.1.110      frmbld.exe       1/31/2013 12:32:57 PM
JOHN               394259       248    706      ERO\SECC      192.168.1.110      frmbld.exe       1/31/2013 12:35:29 PM
JOHN               394263       196    587      ERO\SECC      192.168.1.110      SQL*Plus         1/31/2013 12:36:49 PM
SysDBA             394264       196    589      ERO\SECC      192.168.1.110                       1/31/2013 12:37:07 PM 
```

为什么 UserID 是 SysDBA？

附加数据：

```
Select * From DBA_USER

USERNAME               SysDBA
USER_ID                390
PASSWORD               BD40E271960C5535
ACCOUNT_STATUS         OPEN
LOCK_DATE   
EXPIRY_DATE 
DEFAULT_TABLESPACE     USERS
TEMPORARY_TABLESPACE   TEMP
CREATED                8/1/2012 10:28:51 AM
PROFILE                DEFAULT
INITIAL_RSRC_CONSUMER_GROUP     DEFAULT_CONSUMER_GROUP
EXTERNAL_NAME 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T14:55:07.060

你看到的并不完全是你的想法。您问“是 SysDBA Oracle 用户吗？”，答案是“否”。[`SYSDBA`是系统权限](http://docs.oracle.com/cd/E11882_01/server.112/e25494/dba006.htm#ADMIN11048)，不是[Oracle 提供的预定义用户帐户](http://docs.oracle.com/cd/E11882_01/server.112/e10575/tdpsg_user_accounts.htm#BABGEGFI)。授予该权限的用户可以使用管理权限进行连接，例如：

```
connect / as sysdba 
```

`SysDBA`这与您的用户如何连接是完全不同的：

```
connect "SysDBA"/sysdba 
```

该用户是由您组织中的某个人在您的数据库中创建的；它不是默认的 Oracle 帐户，它们完全不相关，尽管我想它也可以被授予`SYSDBA`特权，只是为了真正惹恼你。（是的，这确实是我担心的密码）。

另请注意，它是使用混合大小写创建的，这意味着在查询之外使用时需要引用它。你可以做：

```
select * from dba_users where username = 'SysDBA'; 
```

...但是如果您没有引用表列值，则必须引用它，如上所示，如下`connect`所示`alter user`：

```
alter user "SysDBA" account lock; 
```

看起来它可能是应用程序的内部帐户，并且没有`v$session.program`通过[`dbms_application_info`](http://docs.oracle.com/cd/E11882_01/appdev.112/e10577/d_appinf.htm#CHEJCFGG)调用设置模块（？） - 所以可能是内部应用程序。如果是这样，您可能会找出它为什么存在以及它在做什么，以及为什么它被赋予了一个令人困惑的名称，但是锁定它可能会给运行该应用程序的人带来问题。

# c - C 全局结构

> ID：14623404
> 
> 赞同：0
> 
> 时间：2013-01-31T10:20:24.217
> 
> 标签：c

我正在使用 C。我有一个主文件，它指向一个头文件。我将把前者称为“主要”，将后者的实现称为“补充”。现在，当我的 Main 文件运行时，它会从我的 Supplement 中调用一个函数。

该函数 malloc 并编辑了一个全局变量（在我的补充文件中）。继续前进，我再次从我的补充文件中调用另一个函数。

现在这就是问题所在，因为每当我这样做时都会收到分段错误。使用 gcc，我发现在我对 Supplement 的第二次函数调用期间，我编辑的全局变量似乎“消失了”（打印显示它位于 0x0 地址并且无法访问。）

我是 C 的新手，我知道全局变量不好，但这是一个赋值，因为我们不能编辑主文件，我只能在我的补充文件中使用一个全局变量来让它“记住”我的 var。

剪切代码：

```
Main:
  // call load
 // check

Supplement:

    typedef struct node
{
    bool is_word;
    struct node* children[27];
}node;

//Root Node
static node* root = NULL;

bool check(const char* word)
{
  //edits word and puts it into input[i](as int)
  for(int i=0;i<x;i++)
    { 
       //uses root[input[i]] -this is the problem. Apparently root is 0x0.
    }
}

bool load(const char* dictionary)
{
     //mallocs and edits root. Note that it is quite a handful. Do note that in the context of this function, gdb returns seems to know root. It's just on the check function call that it mysteriously disappears.

//current = root

node* cur = root;
root = malloc(sizeof(node));

//Check if opened
if(dict==NULL)
{
    return false;
}else
{
    int ch = getc(dict);
    while(ch!=EOF)
    {
        //if character is newline
        if(ch==10)
        {
            cur->is_word = true;
            cur = root;
            dSize++;
        }else{
            int value = (ch==APOST)? 26 : ch-ASCII;
            //if there are no nodes yet
            if(cur->children[value]==NULL)
            {
                //make a new node
                node* next = malloc(sizeof(node));
                //point children to node
                cur->children[value]= next;  
                //current becomes new node
                cur= next;
            }else{
            //else, use node
                cur=cur->children[value];
            }
        }
        ch = getc(dict);
    };
    return true;
}

} 
```

我实际上是在设置根变量。我不确定为什么我的代码会引起这样的评论。我也通过在 gdb 上打印 root 来确认这一点。唯一的问题是加载完成后，我正在运行检查，root 消失了。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:28:35.077

我不知道为什么您在特定情况下会出错，因为您没有显示代码。但是，*正确的*方法是：

主程序

```
#include "supp.h"
#include <stdio.h>

int main()
{
  set_x (5);
  printf("%d", get_x());
  return 0;
} 
```

支持.h

```
#ifndef SUPP_H
#define SUPP_H

void set_x (int n);
int  get_x (void);

#endif /* SUPP_H */ 
```

支持c

```
#include "supp.h"

static int x;

void set_x (int n)
{
  x = n;
}

int get_x (void)
{
  return x;
} 
```

此代码在 c 文件中使用“文件范围”静态变量。您不能直接从任何其他文件访问 x。这称为*私有封装*，这始终是良好的编程实践，也是面向对象程序设计概念的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:34:52.340

没有理由使用全局变量，您可以在 main() 中声明变量，然后将对该变量的引用提供给使用它的函数

```
bool load(node** root, const char* dictionary);
bool check(node* root, const char* word);

int main()
{
  node* root = NULL;

  load(&root, dictionary);

  ...
  if ( check(node,word) ) 
  {
  ...
  }
} 
```

# r - R包Ecdat停止工作

> ID：14623411
> 
> 赞同：0
> 
> 时间：2013-01-31T10:20:34.500
> 
> 标签：r, package

在（1 周前）R 包 Ecdat 工作之前，我没有更改任何内容，现在我尝试重新安装包，查看目录安装和它访问它的版本，但仍然无法找不到任何答案。

我已经尝试使用 RStudio 和 R 来解决这个问题。

```
library("Ecdat", lib.loc="C:/Users/Melonfarmer Johnes/Documents/R/win-library/2.15")
plot(Capm[,"rmrf"],Capm[,"rcon"])
Error in plot(Capm[, "rmrf"], Capm[, "rcon"]) : object 'Capm' not found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:46:06.757

我不认为这会奏效。缺少`data`加载数据集的说明：`Capm`

```
library(Ecdat)
data(Capm)
plot(...) 
```

# gcc - gcc/g++ 参数顺序

> ID：14623415
> 
> 赞同：7
> 
> 时间：2013-01-31T10:20:45.330
> 
> 标签：gcc, parameters, linker

我刚刚在我的新 ubuntu 12.10 服务器上编译 chironfs 并收到以下错误：

```
gcc  -Wall -W -Wmissing-prototypes -g -O2 -DFUSE_USE_VERSION=25 -D_FILE_OFFSET_BITS=64 -I/usr/local/include -g -O2 -lm -lfuse  -o chironfs chironfs.o chiron-conf.o chirondbg.o chironfn.o  
chironfs.o: In function `chiron_init':
/root/chironfs-1.1.1/src/chironfs.c:2000: undefined reference to `pthread_create'
chironfs.o: In function `get_rights_by_name':
/root/chironfs-1.1.1/src/chironfs.c:452: undefined reference to `fuse_get_context' 
```

pthread 错误告诉我 -lpthread 丢失，但 fuse 错误有点奇怪，因为正在使用 -lfuse

我在[这里](http://xinglin-system.blogspot.co.at/2012/03/undefined-reference-to-fusegetcontext.html)找到了一个解决方案，建议将库放在目标文件之后

所以我删除了 -lfuse 并在行尾添加了 -lfuse -lpthread

现在它编译没有错误，似乎这就是它应该的方式：目标文件之后的库

我的问题是：为什么参数顺序与 gcc/ld 相关？我认为 gcc 只是像其他应用程序一样解析参数，并可能将必要的参数转发给 ld 等

一般来说：任何人都知道 gcc 参数排序的事实或技巧，也许还有一些关于为什么需要这种方式的背景信息？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T12:07:57.707

对象和库的顺序与链接器相关（在创建可执行文件时由编译器隐式调用）。当链接器在其从左到右的扫描中发现使用了一个它不知道的名称时，它开始*从该点*开始寻找定义。如果定义通过，它不会记住它以供以后使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T12:07:32.023

GCC 本身以相对透明的方式将参数传递给 ld

您的问题实际上是关于 ld 链接器的工作原理。为简单起见并在没有无限循环的情况下处理循环引用，它只通过库列表一次，解析引用。因此，如果您的引用出现在某个地方并且它还没有看到包含它的库，那么这只是一个错误。

另请[阅读此](https://stackoverflow.com/questions/45135/linker-order-gcc)讨论，其中更详细地讨论了此问题。

# jsp - sharepoint 2013 中的上下文菜单 actionUrl - 调用 jsp

> ID：14623420
> 
> 赞同：0
> 
> 时间：2013-01-31T10:20:57.650
> 
> 标签：jsp, contextmenu, sharepoint-2013

我有一个解决方案，它为在 SP2010 中完美运行的文档库列表项应用共享点上下文菜单，但在 SP2013 中不运行 actionUrl（上下文菜单正确显示在站点列表中）。

我已经通过从 actionUrl 调用 javascript 警报验证了上下文菜单定义，并且这有效，所以我不明白为什么我试图调用的 jsp 不再被触发。我还检查了相应的 jsp 是否已部署到 SP2013 中的 15 个配置单元 - （是否可能缺少参考来告诉解决方案 jsp 的部署位置？）

这是上下文菜单定义；

```
<CustomAction Id="UserInterfaceLightUp.DocLibNewToolbar"
                            Description="Opens the document in Oracle AutoVue for viewing, applying markup and collaborating."
                            RegistrationType="ContentType"
                            RegistrationId="0x0101"
                            Rights="ManagePermissions"
                            Location="EditControlBlock"
                            Sequence="1"
                            Title="View in AutoVue"
                            FeatureId="100ecce9-2c74-4c3f-b1e9-0c54ade35490">

<UrlAction Url="javascript: showLaunchAutoVueDialog('{ItemUrl}', null, '{SiteUrl}');" />

</CustomAction> 
```

我的问题；首先，上面的 actionUrl 定义中的 jsp 函数调用是否存在明显错误？如果没有，我需要做一些不同的事情来注册/引用 jsp 以在 2013 解决方案中使用..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:16:46.703

尝试将调用包装在匿名函数中，例如：

```
<UrlAction Url="javascript: (function() { showLaunchAutoVueDialog('{ItemUrl}', null, '{SiteUrl}'); })();" /> 
```

那应该这样做。

# javascript - 如何组织jquery代码

> ID：14623421
> 
> 赞同：2
> 
> 时间：2013-01-31T10:21:00.167
> 
> 标签：javascript, jquery

我发现我的 jquery 代码是一团糟，现在它不遵循任何类型的逻辑构建。我的主 js 文件中有很多 ajax 调用、嵌套函数、dom 操作、插件调用。

在每一页上都会触发很多调用，这是禁止的，并且在几页上会出现未定义的错误，因为某些函数或调用会在每一页上触发，而这不是应该的。

如何组织代码？我已经阅读了很多关于原型和伪经典继承的文章，但它们只是解释了事情是如何工作的，比如你如何从“人类”继承“人”或类似的东西。我如何在现实生活中实际使用它？

# c# - 您将只能设置的标志称为什么？

> ID：14623423
> 
> 赞同：2
> 
> 时间：2013-01-31T10:21:05.947
> 
> 标签：c#, algorithm, design-patterns, math

这个幂等原语有正确的名称吗？

```
public class Flag
{
    public bool IsSet { get; private set; }

    public void Set()
    {
        IsSet = true;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:41:01.080

**tripSwitch**或者**onSwitch**怎么样？

**添加**

**[闩锁](http://en.wikipedia.org/wiki/Latching_switch)**可能几乎就是您要寻找的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T10:57:58.560

我认为在 ee 中，这是一个 Set Latch，而不是 Set-Reset (SR) Latch。

保险丝是否会是一个需要手动替换其数据库才能重置的持久版本？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T10:24:47.563

只能从类内部设置的标志将是外部的**只读标志。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T10:29:47.853

如果您假设只使用方法，您可以在 Java 中执行的操作是

```
class Component {
    private volatile boolean closed = false;

    public boolean isClosed() { return closed; }

    public void close() { closed = true; }
} 
```

该字段是易变的，`running`或者`closed`标志通常由不同的线程设置为使用它的线程。

注意：即使您创建一个字段`final`，您仍然可以使用反射更改值，因为它可以绕过安全模型（假设您的 SecurityManager 允许它，默认情况下它会这样做）

# django - 在 Django-Jython 中创建战争文件期间，“NoneType”对象不可订阅

> ID：14623424
> 
> 赞同：1
> 
> 时间：2013-01-31T10:21:07.607
> 
> 标签：django, tomcat, jython, war

我试图在我的本地机器上生成一个war文件，以便在Web服务器上部署Django应用程序。我出于同样的目的使用 Django-Jython。我正在使用 MySQL 数据库，并按照文档中的说明设置了 CLASSPATH 变量。我的 Django 项目的名称是“gui”，它位于 C:\

我运行以下命令：

> C:\gui> jython C:\gui\manage.py 战争 --include-java-libs=C:\mysql-connector-java-5.1.16-bin.jar

我收到以下错误：

> 回溯（最近一次调用）：文件“C:\gui\manage.py”，第 10 行，在 execute_from_command_line(sys.argv)
> 
> 文件“C:\jython2.5.3\Lib\site-packages\django-1.4.3-py2.5.egg\django\core\management__init__.py”，第 443 行，在 execute_from_command_line utility.execute()
> 
> 在执行 self.fetch_command(subcommand).run_from_argv(自我.argv)
> 
> 文件“C:\jython2.5.3\Lib\site-packages\django-1.4.3-py2.5.egg\django\core\management\base.py”，第 196 行，在 run_from_argv self.execute(*args, **选项。**字典**）
> 
> 文件“C:\jython2.5.3\Lib\site-packages\django-1.4.3-py2.5.egg\django\core\management\base.py”，第 217 行，在执行 translation.activate('en-我们'）
> 
> 文件“C:\jython2.5.3\Lib\site-packages\django-1.4.3-py2.5.egg\django\core\management\base.py”，第 217 行，在执行 translation.activate('en-我们'）
> 
> 文件“C:\jython2.5.3\Lib\site-packages\django-1.4.3-py2.5.egg\django\utils\translation__init__.py”，第 105 行，激活返回 _trans.activate(language)
> 
> 文件“C:\jython2.5.3\Lib\site-packages\django-1.4.3-py2.5.egg\django\utils\translation\trans_real.py”，第 194 行，激活 _active.value = translation(language )
> 
> 文件“C:\jython2.5.3\Lib\site-packages\django-1.4.3-py2.5.egg\django\utils\translation\trans_real.py”，第 183 行，翻译中 default_translation = _fetch(settings.LANGUAGE_CODE )
> 
> _fetch apppath = os.path.join 中的文件“C:\jython2.5.3\Lib\site-packages\django-1.4.3-py2.5.egg\django\utils\translation\trans_real.py”，第 161 行(os.path.dirname(app.file **)** , 'locale')
> 
> 文件“C:\jython2.5.3\Lib\ntpath.py”，第 207 行，在目录中 return split(p)[0] 文件“C:\jython2.5.3\Lib\ntpath.py”，第 164 行，在拆分中d, p = splitdrive(p) File "C:\jython2.5.3\Lib\ntpath.py", line 119, in splitdrive if p[1:2] == ':': TypeError: 'NoneType' object is unsubscriptable

# android - 从对话框调用异步任务

> ID：14623427
> 
> 赞同：1
> 
> 时间：2013-01-31T10:21:13.180
> 
> 标签：android, android-asynctask

我有一个按下按钮的类，它显示一个对话框。此框有两个按钮是，否。当我单击“是”时，我想调用异步任务来更新 DB 中的一些值。我试过这个，但它给了我 Looper.prepare() 错误。在 SO 和 GOogle 上进行了全面搜索，但没有解决方案。any1有什么想法吗？

谢谢

```
bttnSync.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            if (isOnline()) {
                AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                        MainPage.this);
                alertDialogBuilder.setTitle("Syncing all data....!!");
                alertDialogBuilder
                        .setMessage(
                                "Are you sure you want to Sync all the data?")
                        .setCancelable(false)
                        .setPositiveButton("Yes",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(
                                            DialogInterface dialog, int id) {

                                         //call();

                                        new CountDownTask().execute();

                                        MainPage.this.finish();
                                        Intent i = new Intent(
                                                "com.example.collegesoft.MainPage");
                                        startActivity(i);
                                    }
                                })
                        .setNegativeButton("No",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(
                                            DialogInterface dialog, int id) {
                                        dialog.cancel();
                                    }
                                });

                AlertDialog alertDialog = alertDialogBuilder.create();

                // show it
                alertDialog.show();
            } else {
                AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                        MainPage.this);
                alertDialogBuilder.setTitle("No Internet Connection!!");
                alertDialogBuilder
                        .setMessage(
                                "Device is not connected to the Internet or the connection is slow.")
                        .setCancelable(false)

                        .setNegativeButton("Cancel",
                                new DialogInterface.OnClickListener() {
                                    public void onClick(
                                            DialogInterface dialog, int id) {
                                        dialog.cancel();
                                    }
                                });

                AlertDialog alertDialog = alertDialogBuilder.create();

                // show it
                alertDialog.show();
            }

        }
    });

private class CountDownTask extends AsyncTask<Void, Integer, Void> {

    protected void onPreExecute() {
        progressDialog = ProgressDialog.show(MainPage.this, "Loading...",
                "Loading application , please wait...", false, false);

    }

    protected Void doInBackground(Void... params) {
        call();

        return null;
    }

    protected void onProgressUpdate(Integer... values) {
        progressDialog.setProgress(values[0]);
    }

    protected void onPostExecute(Void result) {
        progressDialog.dismiss();
    }

}

   01-31 10:41:37.575: E/AndroidRuntime(9038): FATAL EXCEPTION: AsyncTask #1
   01-31 10:41:37.575: E/AndroidRuntime(9038): java.lang.RuntimeException: An error   occured while executing doInBackground()
   01-31 10:41:37.575: E/AndroidRuntime(9038):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
     01-31 10:41:37.575: E/AndroidRuntime(9038):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
      01-31 10:41:37.575: E/AndroidRuntime(9038):   at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
     01-31 10:41:37.575: E/AndroidRuntime(9038):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
    01-31 10:41:37.575: E/AndroidRuntime(9038):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
     01-31 10:41:37.575: E/AndroidRuntime(9038):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
       01-31 10:41:37.575: E/AndroidRuntime(9038):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
     01-31 10:41:37.575: E/AndroidRuntime(9038):    at java.lang.Thread.run(Thread.java:856)
    01-31 10:41:37.575: E/AndroidRuntime(9038): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
     01-31 10:41:37.575: E/AndroidRuntime(9038):    at android.os.Handler.<init>(Handler.java:121)
     01-31 10:41:37.575: E/AndroidRuntime(9038):    at android.app.Activity.<init>(Activity.java:735)
     01-31 10:41:37.575: E/AndroidRuntime(9038):    at com.example.collegesoft.SyncData.<init>(SyncData.java:22)
     01-31 10:41:37.575: E/AndroidRuntime(9038):    at com.example.collegesoft.MainPage.call(MainPage.java:259)
     01-31 10:41:37.575: E/AndroidRuntime(9038):    at com.example.collegesoft.MainPage$CountDownTask.doInBackground(MainPage.java:284)
     01-31 10:41:37.575: E/AndroidRuntime(9038):    at com.example.collegesoft.MainPage$CountDownTask.doInBackground(MainPage.java:1)
       01-31 10:41:37.575: E/AndroidRuntime(9038):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
      01-31 10:41:37.575: E/AndroidRuntime(9038):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
   01-31 10:41:37.575: E/AndroidRuntime(9038):  ... 4 more
    01-31 10:41:43.966: E/WindowManager(9038): Activity  com.example.collegesoft.MainPage has leaked window  com.android.internal.policy.impl.PhoneWindow$DecorView@41753818 that was originally added  here
     01-31 10:41:43.966: E/WindowManager(9038): android.view.WindowLeaked: Activity com.example.collegesoft.MainPage has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@41753818 that was originally added here
     01-31 10:41:43.966: E/WindowManager(9038):     at android.view.ViewRootImpl.<init>(ViewRootImpl.java:383)
    01-31 10:41:43.966: E/WindowManager(9038):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:279)
    01-31 10:41:43.966: E/WindowManager(9038):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
  01-31 10:41:43.966: E/WindowManager(9038):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
    01-31 10:41:43.966: E/WindowManager(9038):  at android.view.Window$LocalWindowManager.addView(Window.java:537)
     01-31 10:41:43.966: E/WindowManager(9038):     at android.app.Dialog.show(Dialog.java:278)
   01-31 10:41:43.966: E/WindowManager(9038):   at android.app.ProgressDialog.show(ProgressDialog.java:116)
    01-31 10:41:43.966: E/WindowManager(9038):  at android.app.ProgressDialog.show(ProgressDialog.java:104)
     01-31 10:41:43.966: E/WindowManager(9038):     at com.example.collegesoft.MainPage$CountDownTask.onPreExecute(MainPage.java:278)
     01-31 10:41:43.966: E/WindowManager(9038):     at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
    01-31 10:41:43.966: E/WindowManager(9038):  at android.os.AsyncTask.execute(AsyncTask.java:511)
   01-31 10:41:43.966: E/WindowManager(9038):   at com.example.collegesoft.MainPage$3$1$1.run(MainPage.java:82)
       01-31 10:41:43.966: E/WindowManager(9038):   at android.os.Handler.handleCallback(Handler.java:605)
       01-31 10:41:43.966: E/WindowManager(9038):   at android.os.Handler.dispatchMessage(Handler.java:92)
    01-31 10:41:43.966: E/WindowManager(9038):  at android.os.Looper.loop(Looper.java:137)
      01-31 10:41:43.966: E/WindowManager(9038):    at android.app.ActivityThread.main(ActivityThread.java:4514)
   01-31 10:41:43.966: E/WindowManager(9038):   at java.lang.reflect.Method.invokeNative(Native Method)
   01-31 10:41:43.966: E/WindowManager(9038):   at java.lang.reflect.Method.invoke(Method.java:511)
  01-31 10:41:43.966: E/WindowManager(9038):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
   01-31 10:41:43.966: E/WindowManager(9038):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
     01-31 10:41:43.966: E/WindowManager(9038):     at dalvik.system.NativeStart.main(Native Method) 
```

我的 call() 方法....

```
protected void call() {
    Log.d(TAG,"Call Called");
    myDbHelper = new DatabaseHelper(MainPage.this);

    try {

        myDbHelper.openDataBase();

    } catch (SQLException sqle) {

        throw sqle;

    }

    Cursor c = myDbHelper.getAllStudentFromMainTable();

    Log.d(TAG, "Cursor : " + c.getColumnCount());

    //new CountDownTask().execute();
    new SyncData().sendJson(c, myDbHelper, MainPage.this);

    //c.close();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:26:59.527

您可以在您的活动中创建一个处理程序，然后使用它来发布您需要做的事情。

例子：

```
public void onAvatarChange(View v) {
   final Handler uiHandler = new Handler();

   //Build dialog....
   OnclickListener onYes = new OnClickListener {
       public void onClick(View v) {
            uiHanlder.post(new Runnable() {
                 public void run() {
                     //Do whatever you want here...
                     //You will have looper.prepare here, as it will run on main thread as soon as possible.
                 }
            }
       }
   }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:30:56.777

这怎么可能？

```
new CountDownTask().execute();

MainPage.this.finish();
Intent i = new Intent("com.example.collegesoft.MainPage");                                              
startActivity(i); 
```

我的意思是，在某一时刻，您正在执行 AsyncTask，同时您正在开始新的活动。所以它给你错误只是因为你在 CountDownTask 中显示了 ProgressDialog。

## 解决方案：

相反，建议的解决方案是在 CountDownTask() 的 onPostExecute() 方法中包含 startActivity() 代码：

```
protected void onPostExecute(Void result) {
  progressDialog.dismiss();

  MainPage.this.finish();
  Intent i = new Intent("com.example.collegesoft.MainPage");                                              
  startActivity(i);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:36:25.517

```
runOnUiThread(new Runnable() {
        @Override
        public void run() {

            // start your asynch task here

        }
    }); 
```

# python - Mongoengine - 如何执行“保存新项目或增加计数器”操作？

> ID：14623430
> 
> 赞同：7
> 
> 时间：2013-01-31T10:21:21.130
> 
> 标签：python, mongodb, mongoengine

我在一个网络抓取项目中使用 MongoEngine。我想跟踪我在所有抓取的网页上遇到的所有图像。

为此，我存储了图像`src`URL 和图像出现的次数。

MongoEngine 模型定义如下：

```
class ImagesUrl(Document):
    """ Model representing images encountered during web-scraping.

    When an image is encountered on a web-page during scraping,
    we store its url and the number of times it has been
    seen (default counter value is 1).
    If the image had been seen before, we do not insert a new document
    in collection, but merely increment the corresponding counter value.

    """

    # The url of the image. There cannot be any duplicate.
    src = URLField(required=True, unique=True)

    # counter of the total number of occurences of the image during
    # the datamining process
    counter = IntField(min_value=0, required=True, default=1) 
```

我正在寻找实现“保存或增加”过程的正确方法。

到目前为止，我正在以这种方式处理它，但我觉得可能有更好的内置方式来使用 MongoEngine：

```
def save_or_increment(self):
    """ If it is the first time the image has been encountered, insert
        its src in mongo, along with a counter=1 value.
        If not, increment its counter value by 1.

    """ 
    # check if item is already stored
    # if not, save a new item
    if not ImagesUrl.objects(src=self.src):
        ImagesUrl(
            src=self.src,
            counter=self.counter,
            ).save()
    else:
        # if item already stored in Mongo, just increment its counter
        ImagesUrl.objects(src=self.src).update_one(inc__counter=1) 
```

有更好的方法吗？

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T10:39:34.773

你应该能够做一个[upsert](https://mongoengine-odm.readthedocs.org/en/latest/apireference.html?highlight=upsert#mongoengine.queryset.QuerySet.update_one)例如：

```
 ImagesUrl.objects(src=self.src).update_one(
                                  upsert=True, 
                                  inc__counter=1, 
                                  set__src=self.src) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-09T05:54:32.633

`update_one`如@ross 回答结果是修改文档的计数（或更新的完整结果），它不会返回文档或新的计数器编号。如果你想拥有一个，你应该使用`upsert_one`：

```
images_url = ImagesUrl.objects(src=self.src).upsert_one(
                                              inc__counter=1,
                                              set__src=self.src)
print images_url.counter 
```

如果文档不存在，它将创建文档或对其进行修改并增加计数器编号。

# iphone - 在iphone外部单击时如何隐藏下拉列表

> ID：14623431
> 
> 赞同：2
> 
> 时间：2013-01-31T10:21:23.650
> 
> 标签：iphone, objective-c, xcode

在 iphone 外部单击时，我们如何以编程方式关闭或隐藏下拉列表？

```
-(void)RecommendDropDownSelect
{
dropDown=[[DropDownView alloc]initWithArrayData:arr_RecommendName  cellHeight:30 heightTableView:100 paddingTop:-100 paddingLeft:10 paddingRight:20 refView:txt_Recommend animation:BLENDIN openAnimationDuration:0.5 closeAnimationDuration:0.5];
dropDown.delegate=self;
[scr_View addSubview:dropDown.view];
[dropDown openAnimation];

btn_RecommendDropDown.enabled=NO;
}

-(void)dropDownCellSelected:(NSInteger)returnIndex
{
btn_RecommendDropDown.enabled=YES;
txt_Recommend.text=[arr_RecommendName objectAtIndex:returnIndex];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:40:16.707

除了 subclassing`UIView`和 override `touchesBegan`，如果你正在使用，使用`UITapGestureRecognizer`似乎更容易`UIViewController`

首先，为您的视图设置一个点击手势：

```
UITapGestureRecognizer *gestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(hideDropDown)];
[gestureRecognizer setCancelsTouchesInView:NO];
[self.view addGestureRecognizer:gestureRecognizer]; 
```

然后实现隐藏下拉菜单的方法：

```
- (void)hideDropDown
{
    if ((dropDown != nil) && (dropDown.view != nil))
    {
        [drdropDown.view removeFromSuperview];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:33:10.310

```
 -(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
         UITouch *touch = [touches  anyObject];
           if (touch.view==self.view) {
             [dropDown removeFromSuperView];
          }
      } 
```

或者

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [touches  anyObject];
      if (touch.view==self.view) {
           dropDown.alpha=0;
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:30:35.767

Try this:

```
-(void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event
{
   if(dropDown)
   {
      [drdropDown.view removeFromSuperView];
   }
} 
```

# jquery - jQuery AJAX 响应解析为 HTML 并在弹出窗口中打开

> ID：14623440
> 
> 赞同：1
> 
> 时间：2013-01-31T10:22:00.593
> 
> 标签：jquery

我使用 curl 进行跨浏览器脚本，我得到了 html 响应

```
var url= 'http://'+$('#host').val() + "user/autolog";
$.ajax({
        type: "POST",
        data:{username:$('#User_username').val()},
        url:url,
        dataType: "html",
        success:function(data){
            alert(data);
            $('#User_autolog').val("1");
        },
}); 
```

我得到 html 响应，如果我提醒它显示文本.. 我怎样才能将它转换为 html.. 所以它会像弹出窗口中的 html 表单？

我得到回应

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
 "http://www.w3.org/TR/html4/strict.dtd">
<html><head><title>Bandeau Agent - CCV</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script type="text/javascript">function popup_agent(connect_url) {
            var option = 'width=500,height=150,resizable=no,scrollbars=no,menubar=no,location=no,toolbar=no,status=no';  
            var pname = 'popup_agent_';
            var winp = window.open(connect_url + '?@secid@=KXpF6GFT7XCh7F-ZmB2VlsYteT8L18qE-aJDKIXt0pCv2QSHdNFN-4ixfasv9_Rc', pname, option );
        }
</script></head><body><script language="javascript" type="text/javascript">popup_agent('http://ccv-banner.viatelecom.com/bandeau.php');</script>
    <code>Votre popup agent doit s'afficher dans une nouvelle fenetre sur votre ecran. Si ce n'est pas le cas,<a href="#" onclick="popup_agent('http://ccv-banner.viatelecom.com/bandeau.php');">cliquez-ici</a>.</code>
</body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:31:46.713

我建议你看看那里打开一个'html form in popup'： [jquery ui modal form](http://jqueryui.com/dialog/#modal-form)

成功后，只需触发您的表单，并使用 ajax 答案更新它/您的字段。

如果您能给我们概述一下您的 ajax 答案，那将会更有帮助:)

# css - Twitter Bootstrap 自定义 CSS 包含

> ID：14623441
> 
> 赞同：1
> 
> 时间：2013-01-31T10:22:00.863
> 
> 标签：css, twitter-bootstrap, customization

当使用自定义 css 和覆盖某些样式的 Twitter Bootstrap 时，将自定义 css 链接放在引导响应 css 之前还是之后更好？

```
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/bootstrap-responsive.min.css">

<!-- Your custom css -->
<link rel="stylesheet" href="css/style.css"> 
```

或者

```
<link rel="stylesheet" href="css/bootstrap.min.css">
<!-- Your custom css -->
<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/bootstrap-responsive.min.css"> 
```

各自的优缺点是什么？

如果我在 bootstrap-responsive.css 之后编辑正文填充，如下所示：

```
<link rel="stylesheet" href="css/bootstrap.min.css">
<link rel="stylesheet" href="css/bootstrap-responsive.min.css">

/* Add padding for navbar-top-fixed */
body {
  padding-top: 60px;
  padding-bottom: 40px;
} 
```

然后我还必须使用媒体查询修复响应式布局，因为我已经覆盖了全局正文样式。

```
/* Fix to remove top padding for narrow viewports */
@media (max-width: 979px) {
  body {
    padding-top: 0;
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T10:33:04.950

通常最好将自定义 CSS 放在 Bootstrap CSS 之后。我想您希望自定义 CSS 覆盖 Bootstrap CSS。

The advantages of placing your custom styles after Bootstraps is that you can change anything that is set in Bootstraps CSS by using the same selectors that they do. Making it very easy to change minor things. If you use the same selector then the browser will use the last rules applied to an element.

I can't really see any advantages of placing the Bootstrap CSS after your custom CSS, it wouldn't really make much sense to write your own styles and then override them with Bootstrap's...

For example, this isn't bootstrap CSS, but it would work the same way, if you had the following in your head section:

```
<link href="framework.css" rel="stylesheet" type="text/css" />
<link href="custom-styles.css" rel="stylesheet" type="text/css" /> 
```

Then in `framework.css` you had the following:

```
div.row {
    border: 1px solid #eee;
    border-radius: 3px;
    margin-bottom: 50px;
    padding: 15px;
} 
```

But then you realised you wanted to add a red background (why oh why...) and change the border radius, you could have the following in `custom-styles.css`:

```
div.row {
    background-color: red;
    border-radius: 10px;
} 
```

The resulting CSS applied to the element would be this:

```
div.row {
    background-color: red;
    border: 1px solid #eee;
    border-radius: 10px;
    margin-bottom: 50px;
    padding: 15px;
} 
```

Because the styles from `custom-styles.css` override the existing ones in `framework.css` and the additional ones are applied too! :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:29:40.333

我认为如果您将 style.css 放在顶部，那么 bootstarp 样式将覆盖它。如果您将 style.css 放在底部，则引导样式将被您的自定义样式覆盖

# c# - 如何从 AJAX Tabcointainer 面板中的文本框获取值？

> ID：14623446
> 
> 赞同：0
> 
> 时间：2013-01-31T10:22:22.687
> 
> 标签：c#, asp.net, ajax

我有一个带有 3 个面板的选项卡容器，每个面板都有几个文本框和一个提交按钮。我想在按钮单击时将文本框的值存储在变量中。我在 fname = txt.text; 处得到空值异常；

资源：

```
 <body>
    <form id="form1" runat="server">
    <asp:ToolkitScriptManager ID="ToolkitScriptManager1"   runat="server">
        </asp:ToolkitScriptManager>
    <div>

        <asp:TabContainer ID="TabContainer1" runat="server" ActiveTabIndex="0" 
            style="margin-right: 38px"  Height="138px"  Width="402px">
            <asp:TabPanel runat="server" HeaderText="TabPanel1" ID="TabPanel1">

              <ContentTemplate>
<asp:UpdatePanel ID="updatePanel1" runat="server"><ContentTemplate><table><tr><td>First Name:</td><td><asp:TextBox ID="txtName" runat="server" /></td></tr><tr><td>Address:</td><td><asp:TextBox ID="txtAddress" runat="server" /></td></tr><tr><td><asp:Button ID="Button1" runat="server" Text="Submit" 
                                        onclick="Button1_Click1" /></td></tr></table></ContentTemplate></asp:UpdatePanel>
</ContentTemplate>

</asp:TabPanel>

            <asp:TabPanel ID="TabPanel2" runat="server" HeaderText="TabPanel2">
            <ContentTemplate>
                    Email: <asp:TextBox ID="txtEmail" runat="server" />

</ContentTemplate>

</asp:TabPanel>
            <asp:TabPanel ID="TabPanel3" runat="server" HeaderText="TabPanel3">
            <ContentTemplate>
                 <table>
               <tr> <td>User Name:</td><td><asp:TextBox ID="txtUser" runat="server" /></td></tr>
               <tr> <td>Password:</td><td><asp:TextBox ID="txtPass" runat="server" /></td></tr>

</ContentTemplate>

</asp:TabPanel>
        </asp:TabContainer>

    </div>
    </form>
</body>

 C# Code:

protected void Button1_Click1(object sender, EventArgs e)
{
    string fname = "";
    string address = "";
    Button btn = (Button)sender;

    TextBox txt = null;
    TextBox txt1 = null;

    txt = (TextBox)TabContainer1.Parent.FindControl("txtName");
    txt1 = (TextBox)TabContainer1.Parent.FindControl("txtAddress");
    fname = txt.Text;
    address = txt1.Text;
    DataTable dt = new DataTable();
    string q = "insert into tabtable (firstname,address) values('" + txt + "','" + txt1 + "')";
    dboperation dbo = new dboperation();
    dt = dbo.insert(q);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:34:18.633

您应该能够直接引用此控件，因为既没有`TabContainer`也没有`TabPanel`实现`INamingContainer`。因此`TextBox`，在页面顶部：

所以而不是

```
txt = (TextBox)TabContainer1.Parent.FindControl("txtName");
fname = txt.Text; 
```

只是

```
fname = this.txtName.Text; 
```

# php - 错误使用usort

> ID：14623451
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:22:38.147
> 
> 标签：php, sorting, usort

请您帮忙，我有以下**$events**数组，我想按 sort 的值对我的 events 数组中的 ' **cat ' 数组进行****排序**。

```
Array ( [0] => Array ( 
          [date] => 20130329 
          [title] => Run 
          [cats] => Array ( 
           [0] => Array ( 
             [name] => Cause 2
             [slug] => cause-2
             [sort] => 1) ) 
          )

        [1] => Array ( 
          [date] => 20130131
          [title] => Run2 
          [cats] => Array ( 
           [0] => Array ( 
            [name] => Abused Children 
            [slug] => abused-children 
            [sort] => 2 ) 
           [1] => Array ( 
            [name] => Animal Welfare 
            [slug] => animal-welfare
            [sort] => 3 ) 
           [2] => Array ( 
            [name] => Education 
            [slug] => education 
            [sort] => 1 ) 
            )  ) 
```

当我在 [cat] 上执行 foreach 时，我希望它按排序顺序进行迭代，例如。

```
Event: Run2
 Cat: Education
 Cat: Abused Children
 Cat: Animal Welfare 
```

在我的代码中，我有这样的东西

```
 usort($events, function($a, $b) {
 return $a['cats']['sort'] - $b['cats']['sort']; });

 foreach($events as $event) {
    foreach($event['cats'] as $cat) {
      echo $cat['name']
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:33:07.527

似乎您想对每个事件中的猫数组进行排序。在这种情况下，将排序函数移动到嵌套循环内：

```
foreach($events as $event) {
    usort($event['cats'], function ($a, $b) {
        return $a['sort'] - $b['sort'];
    });
    foreach($event['cats'] as $cat) {
        echo $cat['name']
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:42:10.140

好吧，当我发表评论时，我有点累了。所以这是一个解决方案，在输出之前将源数组调整为所需的顺序。

```
$events=array(array("date"=>"20130329","title"=>"Run","cats"=>array(array("name"=>"Cause 2","slug"=>"cause-2","sort"=>1))),array("date"=>"20130131","title"=>"Run2","cats"=>array(array("name"=>"Abused Children","slug"=>"abused-children","sort"=>2),array("name"=>"Animal Welfare","slug"=>"animal-welfare","sort"=>3),array("name"=>"Education","slug"=>"education","sort"=>1))));
$events=array_map(function($arr){
    usort($arr["cats"],function($a,$b){
        return $a["sort"]-$b["sort"];
    });
    return $arr;
},$events);
foreach($events as $event)
{
    echo "Event: ".$event["title"]."\n";
    foreach($event["cats"] as $cat)
    {
        echo "  Cat: ".$cat["name"]."\n";
    }
} 
```

上述输出：

```
Event: Run
  Cat: Cause 2
Event: Run2
  Cat: Education
  Cat: Abused Children
  Cat: Animal Welfare 
```

[活生生的例子](http://3v4l.org/0D1MH)

# api - 从 google plus 页面获取帖子

> ID：14623452
> 
> 赞同：5
> 
> 时间：2013-01-31T10:22:40.643
> 
> 标签：api, rss, feed, google-plus

我想从 google+ 页面获取内容（帖子）并将其作为提要发布到我的网站。有什么信息吗？

我读到当前的 API 不允许这样做，但这些主题来自去年。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-31T18:11:26.240

您可以通过从[API 控制台](https://code.google.com/apis/console)为创建的启用了 Google+ 服务的项目传递您的“简单”密钥来执行[activity.list](https://developers.google.com/+/api/latest/activities/list)，而无需进行身份验证。对 API 调用的访问仅限于您在项目中设置的授权来源。

创建项目后，在“简单 API 访问”部分中有一个 API 密钥。使用此密钥、您的客户端 ID 和客户端密码构建您的客户端：

```
<?
    $client = new Google_Client();
    $client->setDeveloperKey("YOUR_API_KEY");
    $plus = new Google_PlusService($client);
    $activities = $plus->activities->listActivities("+GooglePlusDevelopers", "public");
?>
<html><body><pre><? echo print_r($activities);?></pre></body></html> 
```

最后一点，请确保您使用[最新的 Google+ PHP 客户端](https://developers.google.com/+/downloads/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-16T10:25:02.067

更新正确答案，类名已更改为 Google_Service_Plus

```
<?php
    set_include_path(get_include_path() . PATH_SEPARATOR . __DIR__ .'/vendor/google/apiclient/src');
    require_once __DIR__.'/vendor/autoload.php';

    $client = new Google_Client();
    $client->setDeveloperKey("YOUR_API_KEY");
    $plus = new Google_Service_Plus($client);
    $activities = $plus->activities->listActivities("+GooglePlusDevelopers", "public");
?>

$items = $activities->getItems();
foreach($items as $item) {

   $object = $item->getObject();
?>

<div class="gpost">
   <p><?php echo $object->getContent(); ?></p>
   <a href="<?php echo $item['url']; ?>">Read more</a>
</div>

<?php } ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T12:16:03.757

一段时间后，我找到了它。

[http://code.google.com/p/google-plus-php-starter/](http://code.google.com/p/google-plus-php-starter/)

和这个

[https://developers.google.com/+/api/latest/activities/list](https://developers.google.com/+/api/latest/activities/list)

唯一的问题是您需要登录您的谷歌应用程序才能执行此操作。任何建议都会受到赞赏。

# java - 为什么我不能在 linux(centos) 上安装 netbeans？

> ID：14623455
> 
> 赞同：0
> 
> 时间：2013-01-31T10:22:47.023
> 
> 标签：java, linux, netbeans, centos

我下载了[netbeans](http://netbeans.org/downloads/)。我按照安装说明进行操作，但终端显示以下内容：

```
Configuring the installer...
Searching for JVM on the system...
Extracting installation data...

Installer file /home/jiangkai/netbeans-7.2.1-ml-linux.sh seems to be corrupted 
```

我遇到了什么问题？

我使用 CentOS(6.3) 并安装了`jdk7u11`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:02:26.820

如果您在 Windows 上下载了安装程序，然后通过 FTP 上传到您的 Linux 机器，那么我很确定问题是由这些平台使用的不同行尾引起的。

在 Windows 上，文本文件中的 de 行结尾是 CR/LF 对，而在 Linux 上，只有一个 LF 用于此目的。也许您的 FTP 客户端没有正确配置来转换行尾（例如，您将 FTP 传输设置为二进制模式）。

# android - 如何在 onPause 中保存 arrayList 并在 onResume 中取回它

> ID：14623470
> 
> 赞同：0
> 
> 时间：2013-01-31T10:23:49.660
> 
> 标签：android, storage

所以我想在 onPause 中保存一个字符串数组列表，然后在 onResume 中取回它，但问题是我不能使用 sharedPreferences 因为我的 API 级别是 8 并且我不能使用 putStringSet 函数。另外，我想避免通过文件系统将数据保存到用户的手机中。我已经在做其他几件事了。

有没有其他方法可以保存数据？我尝试将一个捆绑包放入 onPause 并将其放入 onResume 并没有奏效，我也尝试过实现 onSavedInstanceState 和 onRestoreInstanceState 但只有在活动被破坏时才会调用它们，我只是将它暂停最多的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:29:28.260

使该数组列表静态或为此创建一个单例类

类数据{

公共静态 ArrayList aa; }

现在有暂停功能

暂停（）{

数据.aa= }

这样你就可以维护它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:31:29.137

您可以使用 Modified Shared Preference 来存储您的 ArrayList。我正在尝试类似的方法，我得到了答案。链接在这里。[CustomSharedPreference](https://stackoverflow.com/questions/14501146/how-to-store-class-object-in-android-sharedpreference)

在这里，您可以使用 ArrayList 的 getter 和 setter 创建一个类，并将该类作为 Shared Preference 中的对象。

# continuous-integration - 是否可以防止构建链在 TeamCity 中被中断？

> ID：14623473
> 
> 赞同：2
> 
> 时间：2013-01-31T10:23:58.957
> 
> 标签：continuous-integration, teamcity, teamcity-7.1

我在 TeamCity 7.1.3 中有以下设置：

**项目A**

*   构建和部署
*   测试 A（快速）
*   测试 A（慢）
*   测试 A（非常慢）

**项目 B**

*   构建和部署 B
*   测试 B（快速）
*   测试 B（慢）

A 的所有测试都依赖于“Build & Deploy A”，B 的所有测试都依赖于“Build & Deploy B”。这些依赖项都是具有以下设置的快照依赖项：

*   如果有合适的版本，请不要运行新版本
*   仅使用来自合适的成功构建
*   在同一个代理上运行构建

所有测试都有 VCS 触发器。慢速测试仅在源代码管理中的特定文件夹发生更改时运行。当对项目 A 进行提交时，以下项目将添加到构建队列中：

*   构建和部署
*   测试 A（快速）
*   测试 A（慢）
*   测试 A（非常慢）

预提交构建在构建队列中以更高的优先级运行。因此，如果在“构建和部署 A”运行时对项目 B 进行预提交检查，则构建队列如下所示：

*   构建和部署 B
*   测试 B（快速）
*   测试 B（慢）
*   测试 A（快速）
*   测试 A（慢）
*   测试 A（非常慢）

这种设置的问题在于，这意味着 A 的测试是在项目 B 部署之后运行的。这是一个问题，因为项目 B 的部署覆盖了项目 A 所需的一些文件。被个人构建覆盖的文件是部署文件，它们不在 checkout 文件夹中，这就是它们不回滚的原因。有没有办法强制测试的构建链不被中断？

如果我从依赖项中删除“如果有合适的版本，则不运行新版本”设置，则每个测试都需要完整的构建和部署。较慢的测试不能依赖其他测试来建立线性链，因为有时会运行“测试 A（非常慢）”，但不会运行“测试 A（慢）”。

不幸的是，目前无法拆分构建和部署来创建人工制品。

有没有办法在 TeamCity 中有效地进行设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:34:53.027

这是我正在收集的内容：

*   A 和 B 应该被认为是互斥的。
*   A 的构建优先级应该总是低于 B，但是
*   一旦开始，A 不应该被打断。

可能有办法在这方面与 TeamCity 抗衡；我不知道。如果您愿意稍微改变您的流程，其中之一可能对您有用：

1.  *克隆您的环境，以便`A`可以`B`将其部署到不同的目标。* 这将允许它们完全独立地运行。使用多个构建代理（至少一个用于`A`和`B`），以允许更快、更高优先级`B`与更慢、更低优先级同时执行`A`。（我认为，这将是一个重要的好处。）
2.  *使您的流程更加原子化。* 将各种构建/部署/测试部分合并到一个配置中，从而确保`A`构建链的待处理部分不会被`B`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:58:19.887

我通过使“构建和部署”构建配置都将文本文件写入包含构建类型和构建号的部署文件夹来解决了这个问题。所有测试都将文本文件中的值与当前构建快照依赖项进行比较。如果它们的值不同，则重新触发构建（强制重新构建依赖项），然后取消当前构建。

通过调用取消构建：

```
http://teamcity.jetbrains.com/guestAuth/ajax.html?comment=<CommentMessage>&submit=Stop&buildId=<BuildId>&kill 
```

如何使用设置为重新构建的依赖项触发构建：

[通过 HTTP 触发时，是否可以强制 TeamCity 构建重建依赖关系？](https://stackoverflow.com/questions/14689474/is-it-possible-to-force-a-teamcity-build-to-rebuild-dependencies-when-triggered)

这意味着当测试运行不同步时，将重新触发部署，然后运行测试。

# amazon-ec2 - 使用 ec2-api-tools 向 EC2 快照添加标签

> ID：14623474
> 
> 赞同：1
> 
> 时间：2013-01-31T10:23:59.967
> 
> 标签：amazon-ec2, ec2-api-tools

我使用`ec2-api-tools`我的 AWS EC2 账户中的卷创建了一个快照。目前我有：

```
>> ec2addsnap vol-xxxxxxxx -d 'My-first-Snapshot'
SNAPSHOT snap-12345678 vol-xxxxxxxx pending 2013-01-30T17:09:35+0000 086018780037 8 My-first-Snapshot 
```

我想要做的是从响应中的 id`--tag Name='Name Tag'`向这个新创建的快照添加一个。`snap-12345678`

这有效>

```
>> ec2addtag snap-12345678 --tag Name='Name Tag' 
```

我怎样才能自动化呢？我已经开始编写一个简单的 shell 脚本 - 但我不确定如何查询初始响应`ec2addsnap`以获取新创建的快照 ID 以便应用`ec2addtag`？干杯（以为我在Serverfault中发布了这个-我很抱歉）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:03:33.197

我设法通过使用`awk`. 我的 Bash 脚本 =

```
today=$(date +"%d-%m-%Y")
tagname=$2
ec2addsnap vol-$1 -d $2'-'$today; 
ec2dsnap | grep $2'-'$today | awk -v tagname=$tagname '{print "Adding Tag too: " $2}; system("ec2addtag "$2" --tag Name=\""tagname"\"")'; 
```

# asp.net-mvc - 订阅数据库中的行更改，如果客户端有任何更改，则推送

> ID：14623475
> 
> 赞同：1
> 
> 时间：2013-01-31T10:24:04.260
> 
> 标签：asp.net-mvc, system.reactive, sqldependency, subscribe

我首先使用 EF 代码在 asp.net mvc 中构建在线拍卖应用程序，目前我每 5 秒通过 ajax 轮询一次更新最新的投标金额。有没有其他方法可以达到同样的效果

例如，订阅一个数据行，该数据行更新任何最新出价金额的 UI 元素。例子：

```
Bid bid = _bidService.GetLatestBid(auctionId)
bid.Subscribe();    
uielement.Update(bid.amount), 
```

我可以使用 SQLDependency 并且可能是 dotnet 响应式扩展吗？任何机构有任何示例代码或解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T06:39:52.920

首先启用对数据库的[sql 依赖](http://blogs.msdn.com/b/ashishme/archive/2008/08/28/enabling-sql-dependency-in-sql-server-database.aspx)。

接下来，从 SqlCommand创建[SqlDependency并使用](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)[Observable.FromEventPattern](http://www.introtorx.com/uat/content/v1.0.10621.0/04_CreatingObservableSequences.html#FromEvent)将事件转换为可观察的。

示例代码：

```
public class SqlDependencyObservable : ObservableBase<SqlNotificationEventArgs>
{
    private readonly SqlCommand _command;
    public SqlDependencyObservable(SqlCommand command)
    {
        _command = command;
    }

    protected override IDisposable SubscribeCore(IObserver<SqlNotificationEventArgs> observer)
    {
        SqlDependency dependency = new SqlDependency(_command);

        return Observable.FromEventPattern<OnChangeEventHandler, SqlNotificationEventArgs>
            (addHandler: handler => dependency.OnChange += handler, removeHandler: handler => dependency.OnChange -= handler)
            .Select(i => i.EventArgs)
            .Subscribe(observer);
    }
} 
```

# html - 负字母间距切断文本

> ID：14623493
> 
> 赞同：0
> 
> 时间：2013-01-31T10:25:31.590
> 
> 标签：html, css

我有以下文字：

![在此处输入图像描述](../Images/2fe71bde6ecf4c24b037584ee808be90.png)

每当我尝试`letter-spacing: -1px`正确添加文本时，它都会在右侧被削减几个像素。这发生在 Webkit 上。

![在此处输入图像描述](../Images/36e4e602f4c93f1cada1dfcebba84116.png)

我试图用边距和填充来调整它，但没有结果。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:28:07.443

尝试`overflow: scroll`确保它不是尺寸截止问题。

此外，使用 chrome 开发人员工具或 firebug 之类的工具来查看鼠标上的元素有助于解决视觉上隐藏的填充/边距/边框/大小问题。

# c# - 如何根据某些条件从 UNION 中获取唯一性

> ID：14623497
> 
> 赞同：1
> 
> 时间：2013-01-31T10:25:45.237
> 
> 标签：c#, sql, linq, datatable, informix

如果我在多个查询（例如 4 个）之间进行联合，我得到以下信息

结果 ：

```
id  name    num
13  task1   0
13  task1   7102 
```

* * *

如果 union 语句中有多个具有相同 id 的记录，如何仅获取num 大于 0的**唯一记录。**

* * *

```
foreach 
SELECT DISTINCT a.task_code,
                a.task_name ,
                0 AS cand_num INTO ll_task_code ,
                                   ls_task_name,
                                   ll_cand_num
FROM rmtask a,
     rmtaskstate b,
     rmstateuser c
WHERE (a.task_code = b.task_code)
  AND (b.state_code = c.state_code)
  AND (c.emp_num = al_emp_num)
  AND (al_new_flag = 0
       OR (al_new_flag = 1
           AND b.new_flag = 1))
UNION --candidate

SELECT DISTINCT a.task_code,
                a.task_name ,
                cand.emp_num
FROM rmtask a,
     rmtaskstate b,
     rmstateuser c ,
     rmcandidate cand
WHERE (a.task_code = b.task_code)
  AND (b.state_code = c.state_code)
  AND (c.emp_num = cand.emp_num)
  AND (al_new_flag = 0
       OR (al_new_flag = 1
           AND b.new_flag = 1))
  AND (cand.task_code = b.task_code)
  AND (cand.emp_num_candidate = al_emp_num)
  AND (cand.from_date <= DATE(CURRENT))
  AND (cand.to_date >= DATE(CURRENT)
       OR cand.to_date IS NULL)
UNION
SELECT DISTINCT a.task_code,
                a.task_name ,
                0 AS cand_num
FROM rmtask a,
     rmtaskstate b,
     rmstategroup c
WHERE (a.task_code = b.task_code) )
UNION --candidate

SELECT DISTINCT a.task_code,
                a.task_name ,
                cand.emp_num
FROM rmtask a,
     rmtaskstate b,
     rmstategroup c ,
     rmcandidate cand
WHERE (a.task_code = b.task_code)
  AND (b.state_code= c.state_code)
  AND (al_new_flag = 0
       OR (al_new_flag = 1
           AND b.new_flag = 1))
  AND (((c.group_type = 0))
       OR ((c.group_type = 1)
           AND (c.group_code =
                  (SELECT x.degree_code
                   FROM hr_l x
                   WHERE x.emp_num = cand.emp_num
                     AND x.degree_date =
                       (SELECT max(xx.degree_date)
                        FROM hm xx
                        WHERE xx.emp_num = x.emp_num))))
       OR ((c.group_type = 2)
           AND (c.group_code =
                  (SELECT y.title_code
                   FROM ht y
                   WHERE y.emp_num = cand.emp_num
                     AND y.title_date =
                       (SELECT max(yy.title_date)
                        FROM ht yy
                        WHERE yy.emp_num = y.emp_num))))
       OR ((c.group_type = 3)
           AND (1 = r_boss(cand.emp_num)))
       OR ((c.group_type = 4)
           AND (0 <
                  (SELECT count(*)
                   FROM ht x
                   WHERE x.emp_num = cand.emp_num
                     AND x.perm_flag = 1)))
       OR ((c.group_type = 5)
           AND (0 <
                  (SELECT count(*)
                   FROM hm x
                   WHERE x.emp_num = cand.emp_num
                     AND x.vac_flag = 1)))
       OR ((c.group_type = 6)
           AND (0 <
                  (SELECT count(*)
                   FROM hm x
                   WHERE x.emp_num = cand.emp_num
                     AND x.mission_flag = 1))))
  AND (cand.task_code = b.task_code)
  AND (cand.emp_num_candidate = al_emp_num)
  AND (cand.from_date <= DATE(CURRENT))
  AND (cand.to_date >= DATE(CURRENT)
       OR cand.to_date IS NULL) RETURN ll_task_code ,
                                       ls_task_name,
                                       ll_cand_num WITH resume ;
end foreach; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:47:39.500

如果只有一行`num != 0`，或者您只需要一个结果，则将现有查询放在子查询中并使用`GROUP BY`和聚合将被指示：

```
select id,name,MAX(num) as num
from
   (
       select id,name,num from abc
       union
       select id,name,num from def
       union
       select id,name,num from ghi
   ) as t
group by id,name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T06:08:35.083

1.  在 FROM 子句中使用 JOIN 表示法而不是逗号列表。
2.  我们集会不需要查看您的所有查询即可给出答案；工会的两个部分就足够了。
3.  您没有提到您正在使用的 Informix 版本，这可能会有所不同。
4.  如果您的示例输出与您编写的 SQL 相关联会更容易。您的示例输出使用`id`, `name`, `num`，但 SQL 似乎使用`task_code`,`task_name`和`cand_num`。
5.  您似乎想要给定任务代码和任务名称的最大候选数。

所以，写这样的查询：

```
SELECT u.task_code, u.task_name, MAX(u.cand_num)
  FROM (SELECT DISTINCT a.task_code, a.task_name, 0 AS cand_num
          FROM rmtask a
          JOIN rmtaskstate b ON a.task_code = b.task_code
          JOIN rmstateuser c ON b.state_code = c.state_code
         WHERE (c.emp_num = al_emp_num)
           AND (al_new_flag = 0 OR (al_new_flag = 1 AND b.new_flag = 1))
        UNION
        SELECT DISTINCT a.task_code, a.task_name, cand.emp_num
          FROM rmtask a
          JOIN rmtaskstate b ON a.task_code = b.task_code
          JOIN rmstateuser c ON b.state_code = c.state_code
          JOIN rmcandidate cand ON c.emp_num = cand.emp_num
         WHERE (al_new_flag = 0 OR (al_new_flag = 1 AND b.new_flag = 1))
           AND (cand.task_code = b.task_code)
           AND (cand.emp_num_candidate = al_emp_num)
           AND (cand.from_date <= DATE(CURRENT))
           AND (cand.to_date >= DATE(CURRENT) OR cand.to_date IS NULL)
       ) AS u
 GROUP BY u.task_code, u.task_name; 
```

显然，您可以在子查询中添加其他替代 UNION 分支。

# templates - joomla 组件到模块

> ID：14623499
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:25:46.770
> 
> 标签：templates, joomla, module, components

我想将组件转换为模块，除了使用插件之外还有任何处理它的过程。

（或者）

我们是否应该编写一些代码来使我的 mvc 组件成为模块。

（或者）

有没有可能让我的组件放置在我的模板中所需的模块位置

问候，高贵

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:13:11.510

您不能将组件转换为模块。组件、模块和插件都是 3 个不同的东西。显然，如果您的组件类似于一个简单的上传表单，那么它可以变成一个模块，但我非常怀疑它是否如此。

您也不能将组件放置在模块位置。

根据您的要求，我假设这是您自己的自定义组件，在这种情况下，您应该在制作它并集思广益您的确切要求之前进行一些思考并进行一些研究。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:44:20.513

第一件事您不能将组件转换为模块。您必须了解它们之间的区别

***组件***是它们中最大和最复杂的扩展；它们可以被视为迷你应用程序。大多数组件有两个部分：站点部分和管理员部分。每次加载 Joomla 页面时，都会调用一个组件来呈现主页正文。例如，Content (com_content) 是处理内容显示的组件；用户可以在您网站的前端查看，作为管理员，您可以编辑内容。组件是页面的主要部分，因为组件由菜单项驱动，每个菜单项都运行一个组件。

示例：内容 (com_content)、横幅 (com_banners)、联系人 (com_contact)、新闻源 (com_newsfeeds) 和 Web 链接 (com_weblinks)

***模块***是用于页面渲染的更轻量级和更灵活的扩展。这些模块通常被称为围绕组件排列的“盒子”，例如：登录模块。页脚是一个模块。为每个菜单项分配模块。因此，您可以根据用户正在查看的菜单项来决定显示或隐藏登录模块。有时模块会链接到组件，例如“最新消息”模块，该模块链接到 com_content 并显示指向最新内容项的链接。但是，模块不需要链接到组件，事实上它们甚至不需要链接到任何东西，可以只是静态 HTML 或文本。

示例：横幅 (mod_banners)、菜单 (mod_menu)、在线人物 (mod_whosonline)

[阅读更多](http://docs.joomla.org/Extension_types_%28general_definitions%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T12:04:45.553

如果您使用的是 Joomla 1.5，请参考这个插件，它完全符合您的要求。[http://extensions.joomla.org/extensions/2723/details](http://extensions.joomla.org/extensions/2723/details)

# c - 结构和指针

> ID：14623502
> 
> 赞同：1
> 
> 时间：2013-01-31T10:25:53.857
> 
> 标签：c, pointers, structure

我在将入口内存地址获取到结构的成员变量时遇到问题。我尝试了两种方法，其中一种不能正常工作。如果大家给我一些建议，那就太好了。

**首先**，我定义了一个名为 BITMAP_HEADER 的结构。

```
struct BITMAP_HEADER
{
    WORD    bfType ;
    DWORD   bfSize ; 
    WORD    bfReserved1 ;
    WORD    bfReserved2 ;
    DWORD   bfOffBits ;
} ; 
```

**其次**，我定义并初始化了一些变量。请在阅读下一行之前查看下面的代码。如果你问我为什么有一个字符指针，我需要访问整数 bfSize 的每个字节。

```
struct BITMAP_HEADER    bitmap_header ;
char*                   pSize = (char*)&bitmap_header.bfSize; 
```

**第三**，我以两种不同的方式获得了 bfSize 的内存地址并*打印了这些值*。

```
1\. printf("%X\n", *pSize) ;
2\. printf("%X\n", (unsigned char)*(((char*)&bitmap_header)+2)) ; 
```

(1) 直接拿到bitmap_header.bfSize的内存地址。

(2) 获得结构 BITMAP_HEADER 的内存地址，并将指向下一个的指针移动 2 个字节。

**最后**，这是结果。

```
2D
F6 
```

供您参考，这里是结构 BITMAP_HEADER 的十六进制数据。

```
42 4D / F6 C6 2D 00 / 00 00 / 00 00 / 36 00 00 00 
```

为什么第一种方法不起作用？我认为这两种方法完全相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:28:29.293

您在这里遇到了结构填充。`bfType`编译器在and字段之间插入两个字节的填充`bfSize`，以对齐`bfSize`4 个字节的大小，因为`bfSize`它是一个 DWORD。

一般来说，您不能依赖能够计算结构内的精确偏移量，因为编译器可能会在成员之间添加填充。您可以使用特定于编译器的位在某种程度上控制它；例如，在 MSVC 上，[pack pragma](http://msdn.microsoft.com/en-us/library/2e70t5y1%28v=vs.90%29.aspx)，但我不建议这样做。结构填充用于指定成员对齐限制，并且某些架构会在未对齐访问时出错。（其他人可能会手动修复对齐，但通常这样做会[相当缓慢](http://www.alexonlinux.com/aligned-vs-unaligned-memory-access)。）

另见：[http ://en.wikipedia.org/wiki/Data_structure_alignment#Data_structure_padding](http://en.wikipedia.org/wiki/Data_structure_alignment#Data_structure_padding)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:09:55.503

对于预先知道结构的原始数据，通常最好将其读取到数组中并使用定义的偏移量来访问所需的字段。这样您就不必担心编译器的行为（这通常可能与您的预期不同）。您的代码如下所示：

```
#define FIELD_TYPE  0
#define FIELD_SIZE  2
#define FIELD_RES1  6
#define FIELD_RES2  8
#define FIELD_OFF   10
#define SIZE_HEADER 14

static uint8_t header[SIZE_HEADER];

<...>
uint8_t * pheader = header;
DWORD offset_bits = (DWORD)*(pheader + FIELD_OFF); 
```

PS 为了使此代码可移植，必须考虑*WORD的大小和字节序，少数**#ifdef.. #else.. #endif*应该对此有所帮助。

PPS 最好使用手动逻辑运算和移位运算符而不是强制转换，但为了简洁起见，将其保留为这种方式。

# java - 应用程序在向 android 中的列表视图添加项目时崩溃

> ID：14623504
> 
> 赞同：1
> 
> 时间：2013-01-31T10:26:07.803
> 
> 标签：java, android, listview

我必须通过在 android 中使用 arrayadapter 将项目添加到列表视图中，所以完成了编码，如果我运行项目，应用程序会强制关闭，甚至在清单中提到了该活动，但仍然找不到崩溃的确切原因。

```
public class Jobs extends ListActivity {
 private TextView selection;

private static final String[] items={"Computer Hardware", "Featured", "Information    Technology", "Software", "Technical"

 };
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.jobs);
    selection = (TextView)findViewById(R.id.selection);
    ListView list = (ListView)findViewById(android.R.id.list);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            R.layout.jobs, items);
        setListAdapter(adapter);    

  }
public void onListItemClick(ListView parent, View v, int position, long id)
{
    selection.setText(items[position]);
}
 } 
```

清单.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
 package="com.rebuix.com"
 android:versionCode="1"
 android:versionName="1.0" >

<uses-sdk
android:minSdkVersion="9"
android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.INTERNET" />

 <application
android:icon="@drawable/rebuix"
android:label="@string/app_name"
android:theme="@style/AppTheme" 
android:background="#3D0909">
<activity
    android:name=".LoadingScreen"
    android:label="@string/title_activity_loading_screen" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />

        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity>
<activity
    android:name=".Rebuix"
    android:label="@string/title_activity_rebuix" >
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="com.rebuix.com.Rebuix" />
</activity>
<activity
    android:name=".com.rebuix.com.Jobs"
    android:label="@string/app_name" >

</activity>
<activity
    android:name=".Login"
    android:label="@string/title_activity_login" >
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="com.rebuix.com.Rebuix" />
</activity>
<activity
    android:name=".About"
    android:label="@string/title_activity_about" >
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="android.support.v4.app.FragmentActivity" />
</activity>
<activity
    android:name=".Home"
    android:label="@string/title_activity_home" >
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="android.support.v4.app.FragmentActivity" />
</activity>
<activity
    android:name=".Changepassword"
    android:label="@string/title_activity_changepassword" >
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="android.support.v4.app.FragmentActivity" />
</activity> 
```

堆栈跟踪

```
01-31 12:31:53.133: I/Tutorial(531): Starting task with url: www.google.co.uk
 01-31 12:32:03.972: D/dalvikvm(531): GC_EXTERNAL_ALLOC freed 64K, 52% free  2595K/5379K, external 1645K/2137K, paused 52ms
  01-31 12:32:04.102: D/dalvikvm(531): GC_EXTERNAL_ALLOC freed 2K, 52% free 2594K/5379K, external 2687K/3355K, paused 45ms
  01-31 12:32:08.083: D/AndroidRuntime(531): Shutting down VM
   01-31 12:32:08.083: W/dalvikvm(531): threadid=1: thread exiting with uncaught exc eption (group=0x40015560)
   01-31 12:32:08.103: E/AndroidRuntime(531): FATAL EXCEPTION: main
  01-31 12:32:08.103: E/AndroidRuntime(531): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.exm.com/com.exm.com.Jobs}; have you declared this activity in your AndroidManifest.xml?
  01-31 12:32:08.103: E/AndroidRuntime(531):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1405)
 01-31 12:32:08.103: E/AndroidRuntime(531):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1379)
 01-31 12:32:08.103: E/AndroidRuntime(531):  at android.app.Activity.startActivityForResult(Activity.java:2827)
  01-31 12:32:08.103: E/AndroidRuntime(531):  at android.app.Activity.startActivity(Activity.java:2933)
   01-31 12:32:08.103: E/AndroidRuntime(531):  at com.rebuix.com.Rebuix$4.onClick(Rebuix.java:69)
  01-31 12:32:08.103: E/AndroidRuntime(531):  at android.view.View.performClick(View.java:2485)
  01-31 12:32:08.103: E/AndroidRuntime(531):  at android.view.View$PerformClick.run(View.java:9080)
   01-31 12:32:08.103: E/AndroidRuntime(531):  at android.os.Handler.handleCallback(Handler.java:587)
   01-31 12:32:08.103: E/AndroidRuntime(531):  at android.os.Handler.dispatchMessage(Handler.java:92)
   01-31 12:32:08.103: E/AndroidRuntime(531):  at android.os.Looper.loop(Looper.java:123)
   01-31 12:32:08.103: E/AndroidRuntime(531):     at android.app.ActivityThread.main(ActivityThread.java:3683)
   01-31 12:32:08.103: E/AndroidRuntime(531):     at  java.lang.reflect.Method.invokeNative(Native Method)
   01-31 12:32:08.103: E/AndroidRuntime(531):  at java.lang.reflect.Method.invoke(Method.java:507)
   01-31 12:32:08.103: E/AndroidRuntime(531):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    01-31 12:32:08.103: E/AndroidRuntime(531):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    01-31 12:32:08.103: E/AndroidRuntime(531):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:33:05.773

在 ListActivity 中，您不需要在 Activity 中获取 ListView。它会自动从您的 xml 中获取。您只需为列表视图提供定义的 id，即 android:id="@android:id/list" 并且在适配器中您还可以提供预定义的 ID。你可以这样写你的程序：

工作.xml

```
 <?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
    android:layout_height="match_parent"
    >
  <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:clickable="true"
     />
   <TextView android:id="@+id/textSelected"
     android:layout_alignParentBottom="true"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
      />
    </RelativeLayout> 
```

在您的活动中：

```
 private TextView selection;

    private static final String[] items={"Computer Hardware", "Featured", "Information    Technology", "Software", "Technical"

     };
     @Override
     public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.jobs);
    selection=(TextView)findViewById(R.id.textSelected);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, items);
        setListAdapter(adapter);    

      }
     @Override
     public void onListItemClick(ListView parent, View v, int position, long                 id)
     {
    selection.setText(items[position]);
      }
  } 
```

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:31:32.497

你必须初始化你的`textview`in `onCreate()`。

```
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.jobs);
ListView list = (ListView)findViewById(R.id.list);

selection = (TextView)findViewById(R.id.selection);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:28:17.037

**您现在没有初始化选择，您正在使用其中包含 null。所以你得到了NPE。**

```
public void onListItemClick(ListView parent, View v, int position, long id)
{
    >>>>selection.setText(items[position]);
} 
```

尝试这个。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.jobs);
    selection = (TextView)findViewById(R.id.selection);  //Write this
    //Rest of code
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T10:31:22.887

```
public class Jobs extends ListActivity {
 private TextView selection;

private static final String[] items={"Computer Hardware", "Featured", "Information    Technology", "Software", "Technical"

 };
 @Override
 public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.jobs);
ListView listView = getListView(); //use defailt listview of android
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
        android.R.layout.jobs, items);
    setListAdapter(adapter);    

  }
  public void onListItemClick(ListView parent, View v, int position, long id)
 {
selection.setText(items[position]);
  }
  } 
```

使用列表活动时，您应该使用默认列表...不是自定义列表名称

# c++ - 动态 C 字符串访问

> ID：14623510
> 
> 赞同：0
> 
> 时间：2013-01-31T10:26:21.027
> 
> 标签：c++, c, string

> **可能重复：**
> [修改 C 字符串：访问冲突](https://stackoverflow.com/questions/1025927/modifying-a-c-string-access-violation)

```
int main()
    {   
        char str_1[7] = "string";
        char* str_2 = new char[7];
        str_2 = "string";
        str_1[2] = 'a'; //ok
        str_2[2] = 'a'; //error

        return 0;
    } 
```

我在这里收到“访问冲突”错误`str_2[2] = 'a';` 我不明白为什么我不能在这里通过索引访问动态字符串？（VS2010）谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:27:28.193

而是`str_2 = "string";`write `strcpy(str_2, "string")`，因为在您的情况下，您正在尝试修改字符串文字。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T10:27:44.447

分配内存

```
char* str_2 = new char[7]; 
```

忽略先前的分配（并导致内存泄漏），并`str_2`指向一个**不可变的字符串文字**：

```
str_2 = "string"; 
```

`str_2`现在实际上将指向 a `const char[]`，隐式转换`char*`为只是为了向后兼容。实际上它指向只读存储器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-31T10:28:12.990

你不能像你一样分配给一个字符串。而不是复制字符串内容，而是复制指针。因此`str_2`现在指向一个字符串文字并且不能被修改。要复制字符串的内容，请使用`strcpy`.

`str_2`更糟糕的是 - 在您的代码版本中，在您调用的行中分配的内存存在内存泄漏`new`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-31T10:37:44.777

问题是您不会在任何地方对内存单元进行任何“硬拷贝”，您只需将指针更改为指向不同的位置。字符串是数组，因此必须使用 strcpy 或 memcpy 函数进行复制。

`char* str_2 = new char[7];`分配动态内存。`str_2 = "string";`让指针 str_2 指向一个完全不同的内存单元，忘记它曾经指向分配的动态内存。由于没有对该内存的剩余引用，您知道内存泄漏错误是如何发生的。

`str_2`现在指向驻留在只读内存中 的*常量字符串文字“string”。*`str_2[2] = 'a';`尝试修改该内存，这是未定义的行为，您会崩溃。

要理解 str_1 案例为何有效，掌握编程概念*intialization*和*assignment*很重要。'str_1' 的情况有效，因为您分配了 7 个字节，然后将这些字节初始化为包含“字符串”。变量初始化是唯一`=`会导致从实际字符串文字“字符串”所在的只读内存硬拷贝到 RAM 中分配 str_1 的堆栈的地方。

# asp.net-mvc - 渲染和显示来自另一个控制器的视图

> ID：14623515
> 
> 赞同：0
> 
> 时间：2013-01-31T10:26:29.560
> 
> 标签：asp.net-mvc

如何从另一个控制器的操作中调用和呈现控制器视图。我有这个，产品控制器的一个动作：

```
 public ActionResult SortedLists(List<string> items, string ShopID)
    {
        //Do sth...

        db.SaveChanges();
        return RedirectToAction("Index", "ControlPanel", new { ID = ShopID });
    } 
```

而 Index 是 ControlPanel Controller 的操作（视图）：

```
public ActionResult Index(int ID)
    {
         ViewBag.theRelatedShopID = ID;     
         return View();
    } 
```

如何渲染索引并在浏览器中显示？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:53:06.187

```
public ActionResult SortedLists(List<string> items, string ShopID)
{
    //Do sth...
    db.SaveChanges();

    return View("~/ControlPanel/Index.cshtml", (object)ShopID);
} 
```

在这里，我们将`ShopId`as 模型传递给 Index 视图。如果这个视图被强类型化到某个模型，你应该传递这个模型：

```
MyViewModel model = ...
return View("~/ControlPanel/Index.cshtml", model); 
```

# c# - Windows Phone 8 - 序列化/反序列化 XML 时出错

> ID：14623516
> 
> 赞同：1
> 
> 时间：2013-01-31T10:26:33.880
> 
> 标签：c#, xml, silverlight, windows-phone

我有一个包含 A 类对象列表的 A 类和 B 类。

```
public class Item
{
    public string X{ get; set; }
    public string Y{ get; set; }
}
public class ItemCollection
{
    List<Item> items = new List<Item>();
    //Some methods
} 
```

我可以通过以下方式对其进行序列化：

```
IsolatedStorageFileStream ifs = new IsolatedStorageFileStream("myxml.xml", FileMode.Create, isfile);
DataContractSerializer ser = new DataContractSerializer(itemlist.items.GetType());
XmlWriter writer = XmlWriter.Create(ifs);
ser.WriteObject(writer, itemlist.items); 
```

但是在反序列化它时，我得到“......缺少根元素。” 错误。

```
IsolatedStorageFileStream ifs = new IsolatedStorageFileStream("myxml.xml", FileMode.Open, isfile);
DataContractSerializer ser = new DataContractSerializer(itemlist.Items.GetType());
XmlReader reader=XmlReader.Create(ifs);
itemlist.items= (List<Item>)ser.ReadObject(reader); 
```

有没有其他/更好的方法来序列化/反序列化一个包含另一个类的列表/集合的类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:01:59.257

在我看来，问题只是当您打开文件以进行反序列化时，您正在**擦除**`FileMode.Create`文件，通过. 所以*当然*缺少根元素：*它是空的*。您可能在序列化/反序列化之间有`FileMode.Create`和`FileMode.Open`反转。然后添加一些`using`以获得良好的衡量标准。

*序列化*应该使用`FileMode.Create`, 来截断或为新数据创建新文件。

*反序列*化应该使用`FileMode.Open`, 查看现有数据。

# jquery - jQuery + AJAX 附加淡入淡出

> ID：14623518
> 
> 赞同：2
> 
> 时间：2013-01-31T10:26:35.190
> 
> 标签：jquery, mysql, ajax, fadein

我遵循了以下教程： [http](http://technotip.com/2208/insert-data-into-mysql-jquery-ajax-php/) ://technotip.com/2208/insert-data-into-mysql-jquery-ajax-php/ 和 [http://technotip.com/2298/fetchextract-data-from-database -无刷新网页-jquery/](http://technotip.com/2298/fetchextract-data-from-database-without-refreshing-webpage-jquery/)

这些都很好用。

我的问题是，我该如何创建以下流程：

页面加载时，所有现有记录都正常出现在**ul**标签中。但是一旦页面加载完毕，任何新附加的**li**项目都会淡入。

```
function updates() {
 $.getJSON("pullsql.php", function(data) {
   $("ul").empty();
   $.each(data.result, function(){
    //$("ul").append("<li>Name: "+this['name']+"</li><li>Age: "+this['age']+"</li><br />");
    $('<div></div>').appendTo("ul").hide().append("<li>Name: "+this['name']+"</li><li>Age: "+this['age']+"</li><br />").fadeIn('slow');
   });
  });
 } 
```

到目前为止，我已经尝试将 updates() 函数更改为上面的函数（原始行已注释掉，在其下方更改了行）。

这导致整个**ul**列表每 200 毫秒（更新计时器）淡入，但我需要每个**li**只淡入一次。

提前感谢您的任何帮助，并很高兴被重定向到适当的教程来帮助我学习，而不仅仅是提供代码。

**********编辑****** ******

 **到目前为止，我认为以下功能导致答案出现问题：

```
 $(document).ready( function() {
 done();
});

function done() {
      setTimeout( function() { 
      updates(); 
      done();
      }, 200);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:10:58.097

我已经设法使用以下方法使其工作 - 感谢提供 .new 课程理念但后来删除了他的答案的人。这通过使用 MySQL 中的自动增量 id 来工作。对于 UPDATE 而不仅仅是 INSERT 的记录，我想我可以在更新时添加一个时间戳并将 var ulid = 添加到以前的记录时间戳

```
var ulid = 0;
function updates() {
  $.getJSON("pullsql.php", function(data) {
     $("ul").empty();
     $.each(data.result, function(){

     if (ulid >= this['id']){
        $("ul").append("<li>Name: "+this['name']+"</li><li>Age: "+this['age']+"</li><br />");
     } else {
        $("ul li").removeClass("new"); 
        $("ul").append('<li class="new">Name: '+this['name']+'</li><li class="new">Age: '+this['age']+'</li><br />');
        $("ul li.new").fadeIn('slow');
        ulid = this['id'];
    }
       });
 });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:33:41.963

你不能在`<div>`里面`<ul>`

试试这个

```
function updates() {
  $.getJSON("pullsql.php", function(data) {
     $("ul").empty();
     $.each(data.result, function(){
          var newli=  "<li>Name: "+this['name']+"</li><li>Age: "+this['age']+"</li><br />"; 
          $(newli).appendTo("ul").hide().fadeIn('slow');

   });
 });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:34:54.367

你应该试试这个：

```
var newLi = $("<li>Name: "+this['name']+"</li>
               <li>Age: "+this['age']+"</li><br />");

newLi.css('display','none').appendTo('ul');
$('ul li:last-child').fadeIn('slow'); 
```**

# java - Apache Commons 配置：将属性文件保存在 jar 中

> ID：14623523
> 
> 赞同：0
> 
> 时间：2013-01-31T10:26:45.533
> 
> 标签：java, apache-commons-config

打扰你了，万分抱歉。我对 apache commons 配置有疑问。我有一个属性文件，它位于我正在构建的应用程序的 src 文件夹中（使用 Eclipse）。当我运行应用程序并尝试从 eclipse 保存到属性文件中时，它可以工作。但是，当我将它导出为 jar 并尝试从 CLI 运行它时将其保存到文件中时，我收到以下错误：

无法保存到 URL rsrc:smpp-config.properties 并且跟踪显示：ava.net.UnknowServiceException：协议不支持输出。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:30:26.760

You cannot modify a file inside a jar file.

The only solution is to unzip the jar file using [ZipFile](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipFile.html) and then modify the file.

Also refer the following question dealing with the same issue
[Modifying a file inside a jar](https://stackoverflow.com/questions/1224817/modifying-a-file-inside-a-jar)
[Change file in jar](https://stackoverflow.com/questions/3550418/change-file-in-jar)

# c - 我可以使用正确的链接顺序和依赖项为 C 项目重新生成生成文件吗？

> ID：14623533
> 
> 赞同：5
> 
> 时间：2013-01-31T10:27:22.717
> 
> 标签：c, linux, unix, makefile

我有我最后一次在 90 年代后期 - 2000 年工作的源代码，并且除了 makefile 之外，它都备份了（是的，糟糕的备份几乎和没有备份一样好）：所以......我想知道是否有是否有任何自动生成生成文件的方法或快速分析依赖关系的好方法？

具体来说，我正在寻找：

*   一个可以分析依赖关系并为我更正链接顺序的工具。
*   如果不存在，那么非常感谢过去遇到过类似问题的人提供的有关如何最好地解决此问题的建议
*   如果上述两个选项中的任何一个都失败，我认为最好的方法是创建一个分析/生成文件创建工具，它可以自动生成链接的依赖顺序（我推迟了这种方法，因为时间总是紧缺在另一个项目中）。

寻求帮助/建议的原因是代码库是 300,000 行代码（不包括注释）并且跨越数百个 C/O 文件，而且我经常尝试手动创建一个 make-file，它令人沮丧和困惑，因此我最后一次尝试在这里寻求帮助和询问。

***供参考：****我过去曾尝试过[Cmake](http://www.cmake.org/)、AutoMake、[GenMake](http://www.robertnz.net/genmake.htm)和类似工具来生成 makefile，但都无济于事，因为依赖关系非常可怕。*

* * *

**通用 makefile 脚本**

由于它可能对其他人有用，这里是我通常用于不那么复杂的 C 和 C++ 项目的 makefile，因为它让我不必担心每次都创建一个新的：

```
$(VERBOSE).SILENT:
PROGRAMNAME = prog
CC = gcc
CC += -c
CPP = g++
CPP += -c
ASM = nasm
ASM += -f elf -d ELF_TYPE
LD = g++
OBJFILES = $(patsubst %.c,%.o,$(wildcard *.c))
OBJFILES += $(patsubst %.s,%.o,$(wildcard *.s))
OBJFILES += $(patsubst %.cpp,%.o,$(wildcard *.cpp))

all: $(PROGRAMNAME)

clean:
    @echo "Cleaning object files"
    @echo "    rm -f     *.o"
    rm -f *.o
    @echo "Cleaning backups"
    @echo "    rm -f     *~"
    rm -f *~
    @echo "Removing program file"
    @echo "    rm -f     "$(PROGRAMNAME)
    rm -f $(PROGRAMNAME)

%.o: %.s
    @echo "Assembling ASMs "$@
    @echo "    ASM       "$<
    $(ASM) $<

%.o: %.c
    @echo "(C)ompiling "$@
    @echo "    CC        "$<
    $(CC) $<

%.o: %.cpp
    @echo "(C++)ompiling "$@
    @echo "    CPP       "$<
    $(CPP) $<

$(PROGRAMNAME): $(OBJFILES)
    @echo "Get ready...."
    @echo "Linking "$@
    @echo "    LD        -o "$(PROGRAMNAME)"        "$(OBJFILES)
    $(LD) -o $(PROGRAMNAME) $(OBJFILES)
    @echo "Cry if it worked! Scream swear and cry if it did not..."

strip: $(PROGRAMNAME)
    @echo "Stripping "$(PROGRAMNAME)
    echo -n "Size of "$(PROGRAMNAME)" before stripping is "
    ls -sh $(PROGRAMNAME) | cut -d' ' -f1
    @echo "    Stripping     "$(PROGRAMNAME)
    strip $(PROGRAMNAME)
    echo -n "Size of "$(PROGRAMNAME)" after stripping is "
    ls -sh $(PROGRAMNAME) | cut -d' ' -f1

nothing:
    @echo "Nothing to do; see you later - I'm going home!!!"
    @echo "Hey, try some of these:"
    @echo "make all   - this would be the one you want"
    @echo "make strip - does not work in the real world, only in computers"
    @echo "make clean - will help clean your mind up" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T10:45:03.203

gcc & clang 可以生成依赖项，请参阅[Advanced Auto-Dependency Generation](http://mad-scientist.net/make/autodep.html)，这不会解决整个问题，但会帮助你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T11:11:20.943

您正在寻找来自 MIT 的经典 Unix 工具[makedepend](http://linux.die.net/man/1/makedepend)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T11:16:47.320

在 linux/unix 系统上：

`find . -name "*.c" -print > sources`将为您提供所有来源的列表。

`find . -name "*.c" -print|sed s/\.c/\.o > objects`应该给你一个列表，你可以在[也许手动添加一些换行符]前面加上“OBJECTS =”。

`cat sources|xargs gcc -M > myprog.deps``include myprog.deps`应该给你一个你可以在你的makefile中的头文件依赖列表。[1]

现在你所需要的就是 TARGET = myprog # 不管你怎么称呼你的程序！

```
OBJECTS = ... # from "objects" file above. 
SOURCES = ... # from "sources" file above

INCLUDES = -I subdir1 -I subdir2 ...     # include directories used by this product

CFLAGS = ... ${INCLUDES} # Some suitable settings
CC = gcc
LD = ${CC}
LDFLAGS =  ...    # I don't know what this needs to be - usually nothing complicated.

all: ${TARGET}

clean:
    rm -f ${TARGET} ${OBJECTS}

${TARGET}: ${OBJECTS}
    ${LD} -o $@ ${OBJECTS}

.c.o:
    ${CC} -o $@ $< 
```

这应该已经完成​​了大部分艰苦的工作，除非您必须构建内部工具，或者您的许多源文件当然不会实际生成最终的二进制文件 - 在后一种情况下，您可能必须搜索“main”并且对每个可执行文件执行上述步骤 - 您仍然可以使用顶级`Makefile`和`include`中间的。

[1] 您可以添加到 makefile - 特别是如果您的项目产生许多不同的可执行文件。

```
myprog.deps: ${SOURCES}
    ${CC} -MM ${SOURCES} > myprog.deps

include myprog.deps 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T12:52:56.853

感谢您的出色回应：简洁且信息丰富。根据答案，我现在混合使用手动工作和[**GNU AutoMake**](http://www.gnu.org/software/automake/)（makedepend 的现代继任者）来尝试重新编译，到目前为止似乎非常有效。

然后将出现在 C++ 中移植到 OO 代码的乐趣和游戏......这是我很乐意避免但需要必须完成的任务。

再次感谢！

# c# - adding an extra row at the end of datatable when binding with datagridview

> ID：14623537
> 
> 赞同：3
> 
> 时间：2013-01-31T10:27:24.347
> 
> 标签：c#, winforms, datagridview, datatable

Iam creating a datatable as

```
 DataTable dtVndDtl = new DataTable();            
        dtVndDtl.Columns.Add("prvn_Id");
        dtVndDtl.Columns.Add("vend_Name");
        dtVndDtl.Columns.Add("vend_Id");
        dtVndDtl.Columns.Add("prvn_Price"); 
```

and appending to datagridview as

```
 dgvPrdtRws.DataSource = dtVndDtl; 
```

I have set the datapropertynames too.. I am adding the rows to datagridview. when I click the save button, my data have to save from datatable to database. But I am getting an extraa empty row la tha last of all my rows. Why does it happening. I dont want to add that last row.. so please help me

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:32:47.267

The extra row that is getting added at the end will not get added in database,it is getting added in gridview. If you don't want that extra empty row to appear then you can set DataGridView.AllowUserToAddRows property to false. That extra row will not appear in gridView.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T19:29:08.393

I wouldn't really bother with finding out why this happens :). Why don't you just remove the last row manually before adding to database?

Other option is to implement RowCreated event handler and see when exactly this happens so you can do something about it.

# mongodb - 无法读取mongodb数据

> ID：14623540
> 
> 赞同：1
> 
> 时间：2013-01-31T10:27:28.023
> 
> 标签：mongodb, mongoose

**节省：**

```
 var pageListSchema = new Schema({
    pid:String,
    name:String,
    eName:String,
    pages:[{name:String,id:String,type:String}]
    });
    var pageList = db.model('pageList',pageListSchema);
    var p = new pageList({pid:getId,name:getName,eName:getEName,pages:[{name:"html",id:"0",type:"0"}]});
    p.save(); 
```

**读：**

```
pageList.find({pages:[{id:"0"}]},function(err,data){
    console.log(data);
});
pageList.find({pages:{$elemMatch:{id:"0"}}},function(err,data){
    console.log(data);
}); 
```

**结果：**

```
[ { _pid: '510a3e793f30c5980f000001'
name: 'cc',
eName: 'cc',
_id: 510a3e803f30c5980f000002,
__v: 0,
pages: [ '[object Object]' ] } ] 
```

有两种读取数据的方法，但是为什么我得到的是字符串而不是对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:05:52.200

`console.log`调用[`util.inpsect`](http://nodejs.org/api/util.html#util_util_inspect_object_showhidden_depth_colors)将传递的`data`对象格式化为字符串。默认情况下，该方法仅递归到对象深处的两个级别，因此`pages`元素的内容没有被格式化。

要获得所有级别的完整输出`data`：

```
console.log(util.inspect(data, false, null)); 
```

# asp.net-web-api - 具有 Web 托管和自托管的 Web Api

> ID：14623542
> 
> 赞同：3
> 
> 时间：2013-01-31T10:27:33.253
> 
> 标签：asp.net-web-api, web-hosting, self-hosting

是否有支持自托管和网络托管（同时）的最佳实践？

有很多问题我必须解决。在自托管下 autofac 无法正常工作，因为未设置 HttpContext.Current 并且在自托管中无法访问 GlobalConfiguration。

还有其他需要注意的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T14:07:11.973

看看这个答案：[https](https://stackoverflow.com/a/13285693/463785) ://stackoverflow.com/a/13285693/463785这向您展示了如何以与托管层无关的方式构建您的解决方案。

基本上，将您的 ASP.NET Web API 逻辑放入一个单独的项目中，并且正如 @DarrelMiller 建议的那样，不要在该项目中使用任何托管特定上下文。甚至不要`System.Web`在这个项目中引用不必要的程序集（例如：）。但是，您将有一些托管层特定的需求，例如获取消费者的 IP 地址（这无法通过 ASP.NET Web API 提供给您的方式来完成）。在这种情况下，在您的核心 API 和托管层之间使用某种契约。

例如，下面的一个是消息处理程序，它将为每个请求设置消费者的 IP 地址，我通过我的 WebHost 项目注册了这个消息处理程序：

```
public class UserHostAddressSetterHandler : DelegatingHandler {

    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken) {

        request.Properties[ApiCommonRequestKeys.UserHostAddressKey] = request.GetUserHostAddress();
        return base.SendAsync(request, cancellationToken);
    }
}

internal static class HttpRequestMessageExtensions {

    internal static HttpContextBase GetHttpContext(this HttpRequestMessage request) {

        return (HttpContextBase)request.Properties[Constants.MS_HttpContextKey];
    }

    internal static string GetUserHostAddress(this HttpRequestMessage request) {

        return request.GetHttpContext().Request.UserHostAddress;
    }
} 
```

然后，在API核心层，我知道托管层已经设置了IP地址，我可以随时通过`Properties[ApiCommonRequestKeys.UserHostAddressKey]`实例`HttpRequestMessage`访问它。

看看这个项目：[https](https://github.com/tugberkugurlu/PingYourPackage) ://github.com/tugberkugurlu/PingYourPackage这是一个很好的 ASP.NET Web API 项目，它以托管以后不可知的方式构建。可以给你一个提示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T16:23:09.410

您不应在任何 Web API 项目中使用 HttpContext.Current。您需要的一切都应该在 HttpRequestMessage.Properties 中。我不知道 Self-host 有任何 DI 问题，我知道您可以在 Self-host 中使用 Unity 没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-14T12:57:31.903

WebAPI 有不同的管道，它们使用 HTTPHandler。这是一个较低的水平。因此，使用 HTTPContext.Current 不是一个好主意。

# jmeter - 无法使用 JMeter 中的正则表达式提取器从 json 响应代码中读取令牌 ID

> ID：14623544
> 
> 赞同：0
> 
> 时间：2013-01-31T10:27:39.363
> 
> 标签：jmeter, performance-testing, jmeter-plugins

我必须对 ipad 应用程序进行性能测试。在某些情况下，我必须从响应中读取令牌 ID，并在我的下一个请求中使用此令牌 ID。我使用了正则表达式提取器，但是当我在下一个请求中使用变量时，即 ${tokenid}，它并没有被捕获的值替换。当我查看查看结果树时，它只是请求变量而不是令牌。这是正则表达式提取器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:47:21.693

至少有一个错误，您必须检查：

*   身体

而不是检查：

*   响应代码

在正则表达式提取器中

您可以使用查看结果来检查您的正则表达式：

![在此处输入图像描述](../Images/2c2cb93a89f331ed0c03131ba411ea1a.png)

最后正则表达式应该是：

```
"Token":"([^"]+?)" 
```

# c# - 将下拉列表值传递给控制器

> ID：14623550
> 
> 赞同：0
> 
> 时间：2013-01-31T10:27:59.263
> 
> 标签：c#, asp.net-mvc, html-select

我有显示数据库数据的下拉列表。我在下拉列表中获取数据库数据，但是在下拉列表中选择值后，我想在控制器中传递所选值，然后我想显示该所选值的所有详细数据。但是单击提交按钮，下拉列表的选定值不会传递给控制器​​。

这是我的代码

**查看：Index.aspx**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<ApricaCRMEvent.Models.CRM.DatabaseEntities.CRM_Doctor_Request>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    SearchIndex
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>SearchIndex</h2>

    <%--<div id = "SelectDoctors">
          <% Html.RenderPartial("SelectDoctors"); %> 
    </div>--%>
    <script type="text/javascript">
        function TestFun() {
            var mdlno = $("#ddlMDLNo").val();
//            $.getJSON("/SearchMDLNo/getMDLNoDetails/" + mdlno, null, function (data) {

//                alert(data.Request_For_Id);
//            });
            var txtmdlno = document.getElementById("Request_For_Id");
            txtmdlno.value = mdlno;
            alert(txtmdlno.value);
        }
</script>

<div>
<h2>Search by MDLNo</h2>
     <% using (Html.BeginForm())
        { %>

         <%: Html.ValidationSummary(true, "Profile Updation was unsuccessful. Please correct the errors and try again.") %>

        Select MDLno 

        <%= Html.DropDownList("ddlMDLNo", ViewData["MDLno"] as SelectList, "--Select One--", new { onchange = "TestFun()" })%> 
        <%: Html.TextBoxFor(m => m.Request_For_Id)%>       

         <input type="submit" value="search" name="SearchMDLNo" />    
    <% } %>
</div>

<div> <% Html.RenderPartial("ListDoctors"); %></div>

</asp:Content> 
```

**控制器：SearchMDLNoController.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using ApricaCRMEvent.Models.CRM.DataLayer;
using ApricaCRMEvent.Models.CRM.DatabaseEntities;

namespace ApricaCRMEvent.Controllers
{
    public class SearchMDLNoController : Controller
    {
        CRM_Doctor_Request mdlnoObj = new CRM_Doctor_Request();

        public ActionResult Index()
        {
            ViewData["MDLno"] = new SelectList(SearchMDLNoDL.getAllMDLno(), "Request_For_Id", "Request_For_Id");
            return View();
        }

        [HttpPost]
        public ActionResult Index(CRM_Doctor_Request model)
        {
            ViewData["MDLno"] = new SelectList(SearchMDLNoDL.getAllMDLno(), "Request_For_Id", "Request_For_Id");

            //CRM_Doctor_Request mdlnoObj = SearchMDLNoDL.getMDLData("GJ04_D023");
            //mdlnoObj = SearchMDLNoDL.getMDLData(model.Request_For_Id);
            return View();
        }
        public ActionResult getMDLNoDetails(string id)
        {
            mdlnoObj=SearchMDLNoDL.getMDLData(id);
            return View();
        }
        public ActionResult ListDoctors()
        {
            return View(mdlnoObj);
        }

    }
} 
```

这是部分视图，在此视图中选择下拉值 .. 将显示详细数据

**局部视图：ListDoctors.ascx**

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<ApricaCRMEvent.Models.CRM.DatabaseEntities.CRM_Doctor_Request>" %>

<div><%: Html.DisplayFor(m => m.Request_For_Id) %></div>

<div>
<table>
    <tr>
        <th>
            Request_For_Id
        </th>
        <th>
            Territory
        </th>
        <th>
            Estimated_Amount
        </th>
        <th>
            Actual_Amount
        </th>
        <th>
            Date_Created
        </th>
        <th>
            Compute_CRM_State
        </th>
        <th>
            Compute_Event_Type
        </th>

    </tr>

    <tr>
        <td>
            <%: Html.DisplayFor(m => m.Request_For_Id) %>
        </td>
        <td>
            <%: Html.DisplayFor(m => m.Territory) %>
        </td>
        <td>
            <%: Html.DisplayFor(m => m.Estimated_Amount) %>
        </td>
        <td>
            <%: Html.DisplayFor(m => m.Actual_Amount) %>
        </td>
        <td>
            <%: Html.DisplayFor(m => m.Date_Created) %>
        </td>
        <td>
            <%: Html.DisplayFor(m => m.Compute_Service_State) %>
        </td>
        <td>
            <%: Html.DisplayFor(m => m.Compute_Event_Type) %>
        </td>
      </tr>

</table>

</div> 
```

通过在下拉列表中选择值并单击提交按钮值未通过。在 Index.aspx 中，我尝试了一些 javascript 代码，但它不起作用。

* * *

我在代码中改变了一些东西。现在这正在起作用。

**查看：Index.aspx**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<ApricaCRMEvent.Models.CRM.DatabaseEntities.CRM_Doctor_Request>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    SearchIndex
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>SearchIndex</h2>

    <%--<div id = "SelectDoctors">
          <% Html.RenderPartial("SelectDoctors"); %> 
    </div>--%>
    <script type="text/javascript">
        function TestFun() {
            var mdlno = $("#ddlMDLNo").val();

            var txtmdlno = document.getElementById("Request_For_Id");
            txtmdlno.value = mdlno;
            alert(txtmdlno.value);

        }
</script>

<div>
<h2>Search by MDLNo</h2>
     <% using (Html.BeginForm())
        { %>

         <%: Html.ValidationSummary(true, "Profile Updation was unsuccessful. Please correct the errors and try again.") %>

        Select MDLno 

        <%= Html.DropDownList("ddlMDLNo", ViewData["MDLno"] as SelectList, "--Select One--", new { onchange = "TestFun()" })%> 
        <%: Html.TextBoxFor(model => model.Request_For_Id) %>

         <input type="submit" value="search" name="SearchMDLNo" />    
    <% } %>
</div>

<%--<div> <% Html.RenderPartial("ListDoctors"); %></div>--%>
<div>
    <fieldset>
    <legend>CRM_Doctor_Request</legend>

    <div class="display-label">Territory</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Territory) %>
    </div>

    <div class="display-label">CRM_Request_For_Type_Id</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.CRM_Request_For_Type_Id) %>
    </div>

    <div class="display-label">Request_For_Id</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Request_For_Id) %>
    </div>

    <div class="display-label">Requestor</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Requestor) %>
    </div>

    <div class="display-label">Division_Id</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Division_Id) %>
    </div>

    <div class="display-label">Suggester</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Suggester) %>
    </div>

    <div class="display-label">Estimated_Amount</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Estimated_Amount) %>
    </div>

    <div class="display-label">Actual_Amount</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Actual_Amount) %>
    </div>

    <div class="display-label">Priority</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Priority) %>
    </div>

    <div class="display-label">CRM_Service_Type_Id</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.CRM_Service_Type_Id) %>
    </div>

    <div class="display-label">Deadline</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Deadline) %>
    </div>

    <div class="display-label">Executed_Date</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Executed_Date) %>
    </div>

    <div class="display-label">Entry_Done_By</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Entry_Done_By) %>
    </div>

    <div class="display-label">Date_Created</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Date_Created) %>
    </div>

    <div class="display-label">Date_Modified</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Date_Modified) %>
    </div>

    <div class="display-label">Event_Type_Id</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Event_Type_Id) %>
    </div>

    <div class="display-label">Compute_Event_Type</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Compute_Event_Type) %>
    </div>

    <div class="display-label">CRM_State_Id</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.CRM_State_Id) %>
    </div>

    <div class="display-label">Compute_CRM_State</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Compute_CRM_State) %>
    </div>

    <div class="display-label">Service_State_Id</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Service_State_Id) %>
    </div>

    <div class="display-label">Compute_Service_State</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Compute_Service_State) %>
    </div>

    <div class="display-label">Is_Active</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Is_Active) %>
    </div>

    <div class="display-label">Comment</div>
    <div class="display-field">
        <%: Html.DisplayFor(model => model.Comment) %>
    </div>
</fieldset>

</div>
</asp:Content> 
```

**控制器：SearchMDLNoController.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using ApricaCRMEvent.Models.CRM.DataLayer;
using ApricaCRMEvent.Models.CRM.DatabaseEntities;

namespace ApricaCRMEvent.Controllers
{
    public class SearchMDLNoController : Controller
    {
        CRM_Doctor_Request mdlnoObj = new CRM_Doctor_Request();

        public ActionResult Index()
        {
            ViewData["MDLno"] = new SelectList(SearchMDLNoDL.getAllMDLno(), "Request_For_Id", "Request_For_Id");
            return View();
        }

        [HttpPost]
        public ActionResult Index(CRM_Doctor_Request model)
        {
            ViewData["MDLno"] = new SelectList(SearchMDLNoDL.getAllMDLno(), "Request_For_Id", "Request_For_Id");

            //CRM_Doctor_Request mdlnoObj = SearchMDLNoDL.getMDLData("GJ04_D023");
            //mdlnoObj = SearchMDLNoDL.getMDLData(model.Request_For_Id);
            mdlnoObj = SearchMDLNoDL.getMDLData(model.Request_For_Id);
            return View(mdlnoObj);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:42:10.603

试试这个 ：

```
$.getJSON("/SearchMDLNo/getMDLNoDetails",{id : mdlno}, function (data) {
         alert(data.Request_For_Id);
}); 
```

这应该适合你

* * *

```
<script type="text/javascript">
        function TestFun() {
            var mdlno = $("#ddlMDLNo").val();
            $.ajax({
              type: 'POST',
              dataType: 'json',
              data: {id: mdlno},
              success: function(result){
                      alert('success');
              }
            });
        }
</script> 
```

然后在你的控制器中改变它：

```
 [HttpPost]
    public ActionResult getMDLNoDetails(string id)
    {
        mdlnoObj=SearchMDLNoDL.getMDLData(id);
        return Json(true);
    } 
```

# django - Django Modelform：无法导入名称

> ID：14623551
> 
> 赞同：1
> 
> 时间：2013-01-31T10:28:01.280
> 
> 标签：django, django-forms

```
#### model using ModelForm: models.py
from django.db import models
from django.forms import ModelForm

class customers(models.Model):
    name = models.CharField(max_length=50)
    custAdd = models.TextField()

    class Meta:
            db_table = 'tb_amit_test'
            ordering = ['-name']
            verbose_name_plural = 'customers'

    def __unicode__(self):
            return self.name

    @models.permalink
    def get_absolute_url(self):
            return ('customers_customers', (), { 'customers_name': self.name })

class customerForm(ModelForm):
    class Meta:
            model=customers

#### View:views.py

from django.shortcuts import render_to_response
from mtcc_customer_db import customers
from mtcc_customer_db import customerForm
from django.template import RequestContext

def adddata(request):
    if request.method == 'POST':
            f=custform(request.POST)
            if f.is_valid():
                    newcust=f.save(commit=False)
                    newcust.save()
            return HttpResponseRedirect('/')
    return render_to_response('index.html',
context_instance=RequestContext(request))

#### URLs:
from django.conf.urls import patterns, include, url
from mtcc_customer_db import settings
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
# Uncomment the next line to enable the admin:
 url(r'^admin/', include(admin.site.urls)),)

urlpatterns +=patterns('mtcc_customer_db.customers.views',
(r'^customers/$', 'adddata'),)

### Template: customer.html

{% extends "base.html" %}

{% block site_wrapper %}
    <div id="main">
    {% include "tags/navigation.html" %}

    <a href="#content" class="skip_link">Skip to main content</a>
    <form action="." method="post">
    <input type="text" name="name" id="name" value="{{name}}">
     <input type="text" name="custAdd" id="custAdd" value="{{custAdd}}">
     <input type="submit" value="Submit">
    </form>.........
{% endblock %} 
```

我在浏览器中收到错误：

请求方法：GET 请求 URL：someaddress.customers/ Django 版本：1.4.3 异常类型：ImportError 异常值：

--->>无法导入名称customerForm

我哪里错了？？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:44:39.527

试试这个：

```
from your_module_name.models import customerForm 
```

在您的 views.py 文件中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:46:48.960

表格在 models.py (*) 中，所以你应该做`from mtcc_customer_db.models import customerForm`.

(*) 请注意，无论如何它可能应该在 forms.py 中，但仍然如此。

# java - 如何处理所有的 jframe 及其内容？

> ID：14623552
> 
> 赞同：0
> 
> 时间：2013-01-31T10:28:06.403
> 
> 标签：java

我想在 java 应用程序中具有注销功能，我在我的应用程序中使用了一些计时器。当我单击注销按钮时，我想处理所有 jframes 及其内容并停止所有计时器。按下注销按钮后，主 jframe 应该会消失，登录屏幕应该会出现新的记忆。

我试图处理我的 jframe 并使它们可见 false 并使登录屏幕可见。所有的东西都运行良好，但以前的计时器没有停止，应用程序正在使用更多的内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:43:53.303

一般来说，如果您想在注销后从头开始，您可以尝试在退出当前实例之前启动新的应用程序实例。在任何非平凡的程序中，自己显式清理所有内容都可能会出现问题。除了计时器之外，您还可能遇到各种其他类型的资源泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:10:21.113

如果您的应用程序中有多个框架，那么这是糟糕的设计。

但是，如果您想处置您的框架，您可能需要获取所有框架`Frames.getFrames()`并处置除您的主要/必需框架之外的所有其他框架。

如果你的模型有数据，那么清理它并清理其他东西。但这不是 AKJ 建议的泄漏方法。

# c - 指针或值

> ID：14623553
> 
> 赞同：0
> 
> 时间：2013-01-31T10:28:06.623
> 
> 标签：c, pointers, c99

当我打电话时：

```
write_byte((uint8_t*)0); 
```

它传递一个空指针。如何修改它以将指针传递给字面值 0？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:31:22.550

它传递一个 NULL 指针。

您不能获取常量 ( `&0`) 的地址。如果你想传递一个指向 value 的指针`0`，你必须先赋值`0`给一个变量。

```
uint8_t i = 0;
write_byte(&i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:09:27.493

使用复合文字：

```
write_byte(&(int) {0}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:30:33.013

它会发送一个`NULL`指针...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T10:46:19.817

在编译时无法获取文字的地址，因为文字不一定有地址。

例如，如果您编写类似 的代码`if(0)`，`0`则很可能不会在任何地方分配。编译器会将其转换为机器代码指令“如果为零则分支”（或更可能是“始终分支”，因为优化）。所以实际的零被嵌入到程序代码本身中。

因此，在编译时无法知道文字的存储位置。它可以集成到程序代码中，也可以驻留在只读存储器中。您无法知道是哪一个，因为编译器本身在将您的源代码翻译成机器代码之前并不知道。

（我相信您可能会将整数文字与始终有地址的字符串文字混淆。）

# c# - 切换到 VS 2012 后出现错误“必须声明一个主体，因为它没有标记为抽象”

> ID：14623556
> 
> 赞同：1
> 
> 时间：2013-01-31T10:28:13.563
> 
> 标签：c#, visual-studio

从 Visual Studio 2010 切换到 2012 后，我突然收到以下错误（很多错误）：“必须声明一个主体，因为它没有标记为抽象”

该代码在 2010 年运行良好，对我来说也正确：

一种此类属性的示例：

```
public string HttpMethod { get; set; } 
```

项目的.Net Framework设置为4.0

另一个有趣的事情是我在这个解决方案中有几个项目，但只有一个项目显示这些错误，尽管我在所有项目中都使用了自动实现的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:02:06.057

所以，我终于能够解决这个问题。我刚刚删除了项目，创建了一个新项目并再次包含所有源文件，突然错误消失了。我认为项目文件在某种程度上是错误/损坏的，仍然是一个非常奇怪的行为。

感谢您的所有支持和提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:34:29.250

检查您的项目所针对的 .NET 版本。自动属性仅随 .NET 3.0 提供

# version-control - 混合文件和二进制文件的项目管理

> ID：14623557
> 
> 赞同：0
> 
> 时间：2013-01-31T10:28:14.590
> 
> 标签：version-control, project-management

我们开发的软件还包含大量艺术资产（二进制文件）。我们希望对源代码进行版本控制，但不跟踪二进制文件的更改（艺术家单独工作并上传新的艺术资产）。但是，一次结帐应该产生完整的源和艺术树。这是必要的，因为我们想在之后运行持续集成系统（每晚构建、测试）。你能推荐什么？也许这些网络托管应用程序中的任何一个都允许这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:49:22.837

我建议将二进制文件存储在像[Nexus这样的](http://www.sonatype.org/nexus/)[工件存储库](http://www.sonatype.com/people/2009/04/what-is-a-repository/)中：它提供了一个基于文件系统的简单引用，以及基于命名约定的简单目录。 这很容易维护。

这样的模型通过*声明*过程链接到源代码控制：您在文件 ( `pom.xml`) 中声明您的特定代码版本需要哪个工件版本。
该`pom.xml`文件的管理方式与您的其他来源一样。

# javascript - 无法居中

> ID：14623565
> 
> 赞同：2
> 
> 时间：2013-01-31T10:28:31.473
> 
> 标签：javascript, html, css

我有这个动态 UL，我需要它在我的页面中居中。

***这是我的 HTML：***

```
<ul id="nav">
    <li><div class="tabquad">First</div>
        <ul>
            <li><a class="item" href="#"><div class="tabquad">One</div></a></li>
            <li><a class="item" href="#"><div class="tabquad">Two</div></a></li>
            <li><a class="item" href="#"><div class="tabquad">Three</div></a></li>
        </ul>
    </li>
    <li><div class="tabquad">Second</div>
        <ul>
            <li><a class="item" href="#"><div class="tabquad">One</div></a></li>
            <li><a class="item" href="#"><div class="tabquad">Two</div></a></li>
            <li><a class="item" href="#"><div class="tabquad">Three</div></a></li>
            <li><a class="item" href="#"><div class="tabquad">Four</div></a></li>
            <li><a class="item" href="#"><div class="tabquad">Five</div></a></li>
        </ul>
    </li>
    <li><div class="tabquad">Third</div>
        <ul>
            <li><a class="item" href="#"><div class="tabquad">One</div></a></li>
            <li><a class="item" href="#"><div class="tabquad">Two</div></a></li>
            <li><a class="item" href="#"><div class="tabquad">Three</div></a></li>
        </ul>
    </li>
</ul> 
```

***我的 CSS：***

```
.tabquad{
    color:white;
    margin:auto;
    position:relative;
    border:2px solid #000;
    border-color:rgb(82,115,154);
    width:200px;
    height:30px;
    text-align:center;
    padding-top:10px;
    top:25px;
    background-color:rgb(0,56,130);
}
.tabquad:hover{
    background-color:rgb(49,87,132);
    cursor: hand;
}

#nav, #nav ul {
    padding: 0;
    margin: 0;
    list-style: none;
}

#nav a {
    display: block;
    width: 15em;
}

#nav li {
    float: left;
    width: 15em;
}
#nav li ul {
    position: absolute;
    width: 15em;
    left: -999em;
}

.item{
    color:#0E4063;
    text-decoration:none;
}

#nav li:hover ul {
    left: auto;
}

#nav li:hover ul, #nav li.sfhover ul {
    left: auto;
} 
```

***我的 JS：***

```
sfHover = function() {
    var sfEls = document.getElementById("nav").getElementsByTagName("LI");
    for (var i=0; i<sfEls.length; i++) {
        sfEls[i].onmouseover=function() {
            this.className+=" sfhover";
        }
        sfEls[i].onmouseout=function() {
            this.className=this.className.replace(new RegExp(" sfhover\\b"), "");
        }
    }
}
if (window.attachEvent) window.attachEvent("onload", sfHover); 
```

我如何使整个事情居中？

在这里你可以找到关于[jsfiddle的测试](http://jsfiddle.net/6A7GM/2/)

编辑：我需要 3 列，全部以我的页面为中心。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-31T10:33:59.230

在您的第一个`#nav`定义之后添加：

```
#nav {
    width: 45em;
    margin: 0 auto;
} 
```

[http://jsfiddle.net/GeraldS/ZGLtn/2/](http://jsfiddle.net/GeraldS/ZGLtn/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:44:30.853

如果您不想为 ul 提供固定宽度，请添加一个外部并给`div`外部div`ul``text-align:center`

**HTML**

```
 <div class="wrap">
         ul goes here
     </div> 
```

**CSS**

```
.wrap{text-align:center} 
```

**[演示](http://jsfiddle.net/6A7GM/5/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:39:17.663

使用marginLeft 和marginRight 'auto' 以及UL 标签的宽度，以便自动获取左边距和右边距。例如，

```
ul{
  width: 300px;
  margin: 0 auto; /* This center aligns the ul horizontally */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T10:50:54.697

```
#nav {
    width: 45em;
    margin: 0px auto;
    padding: 0px;
    list-style: none;
} 
```

# iphone - iOS6.0如何打开键盘？

> ID：14623572
> 
> 赞同：3
> 
> 时间：2013-01-31T10:28:50.613
> 
> 标签：iphone, ios6, rotation, uikeyboard

我有一个纵向视图（隐藏状态栏），但我打开了它。然后键盘显示：

![在此处输入图像描述](../Images/115811d908ec6b12e0ce2d982426adfa.png)

我想要键盘转动和全屏。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:30:32.323

我看过评论。你不能让屏幕像这样横向。IOS 6 有一些新的东西，“应用程序的 appDelegate 总是以纵向启动” 你应该使用 IOS 6 自动旋转！这应该在 appDelegate 中：

```
 - (NSUInteger)application:(UIApplication*)application
supportedInterfaceOrientationsForWindow:(UIWindow*)window
{

    return (UIInterfaceOrientationMaskAll);
} 
```

在您的视图控制器中：

```
-(BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

在supportedInterfaceOrientations 中，您可以将其设置为仅横向

# jquery - 当光标已经在页面加载的元素上时，JQuery 悬停

> ID：14623578
> 
> 赞同：0
> 
> 时间：2013-01-31T10:29:09.893
> 
> 标签：jquery, hover, jquery-hover, mouseout

我有一个在页面加载时可见的元素。

理想世界中发生的事情如下：

如果并且当光标悬停在该元素上然后离开该元素时，该元素将淡出。

这在这种情况下可以正常工作，但是如果光标在页面加载时已经在元素上方并且光标很快从元素上移开，悬停功能并不总是运行 - 尽管如果您将鼠标悬停在元素外它可以正常工作更慢。

```
$(".myElement").hover(
  function () {
    $(this).fadeIn(250);
  },
  function () {
    $(this).fadeOut(250); // This does not happen if cursor already over element on page load and mouse out very quickly
  }
); 
```

问题似乎是，当光标快速移动元素时，页面不会首先记录它曾经在元素上方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:55:30.193

使用[停止（）](http://api.jquery.com/stop/)；

尝试这个

```
$(".myElement").hover(
  function () {
    $(this).stop(true, true).fadeIn(250);
  },
  function () {
     $(this).stop(true, true).fadeOut(250); // This does not happen if cursor already over element on page load and mouse out very quickly 
```

});

# spring - 如何在 Spring 3.1 xml 上下文中检索上下文参数

> ID：14623581
> 
> 赞同：2
> 
> 时间：2013-01-31T10:29:25.200
> 
> 标签：spring, tomcat, servlets, properties

It seems like there's been a few iterations of property support in spring it's hard to tell what's best practice and the manuals are written from the point of view of someone who is familiar with every other iteration. I feel like this should be a simple and common requirement but given how hard it's been please correct me if there's a more idiomatic way.

What I want is to pass an additional properties file to my spring web app based on a context property which the client is setting using a tomcat descriptor like so

```
<Context path="/foo" reloadable="true">
  <Parameter name="foo.config" value="file:${catalina.base}/conf/foo.properties"/>
</Context> 
```

In spring for the live profile I have this

```
<beans profile="live">
            <context:property-placeholder location="classpath:timetabling.live.properties,${timetabling.config}" 
    ignore-resource-not-found="true" />
</beans> 
```

So I'd assumed this doesn;t work because I'm trying to configure placeholder suppport with a placeholder. If I use a system property however then this works fine. I know that spring 3.1 has baked in support for system and environment properties so I guess my question is **how can I augment this support with something context aware before the placeholder is resolved?**

--Update--

looking at [http://blog.springsource.org/2011/02/15/spring-3-1-m1-unified-property-management/](http://blog.springsource.org/2011/02/15/spring-3-1-m1-unified-property-management/) particularly at footnote 1, I would expect to have a DefaultWebEnvironment which should already have aceess to context init params. Now I am more confused, can someone provide me with a concrete example of context property retrieval? At this point I feel like I've read every javadoc available and they are just not helpful.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:29:04.653

`<context:property-placeholder />`设置从 .properties、系统属性和环境变量读取的[PropertyPlaceholderConfigurer 。](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)然而， Tomcat`context.xml`设置了一个 servlet 上下文初始化参数。所以你需要的是一个[ServletContextPropertyPlaceholderConfigurer](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/context/support/ServletContextPropertyPlaceholderConfigurer.html)。

# java - 以编程方式为 JAX-RS 注册 POJO 支持或 JSON 提供程序

> ID：14623588
> 
> 赞同：3
> 
> 时间：2013-01-31T10:29:41.270
> 
> 标签：java, json, jersey, jackson, jax-rs

我正在为应用程序开发插件。这些插件基本上是 JAX-RS 端点。它们被打包并部署到运行 Jetty 并注册它们的应用程序的类路径中。例子：

```
@GET
@Path("/{id}")
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.APPLICATION_JSON)
public Product get(@PathParam("id") String id) {
    return Product.lookup(id);
} 
```

为了能够通过 JAX-RS 返回任意 POJO，我想启用 POJOMapping 或显式注册类似 Jackson Provider 的东西。

我知道如果我可以访问`web.xml`或通过`Client`配置 [ [Jersey JSON 文档](http://jersey.java.net/nonav/documentation/latest/json.html)]，我可以做到这一点。

不幸的是，鉴于插件架构，我无法访问这些方法。

有没有办法以任何其他方式注册像杰克逊这样的提供者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T11:46:17.197

您可以使用 JAX-RS`Application`类作为应用程序的一部分来注册 JSON 绑定提供程序。下面是将[**EclipseLink MOXy**](http://www.eclipse.org/eclipselink/moxy.php)注册为 JSON 提供程序的示例。

```
package org.example;

import java.util.*;
import javax.ws.rs.core.Application;
import org.eclipse.persistence.jaxb.rs.MOXyJsonProvider;

public class CustomerApplication  extends Application {

    @Override
    public Set<Class<?>> getClasses() {
        HashSet<Class<?>> set = new HashSet<Class<?>>(2);
        set.add(MOXyJsonProvider.class);
        set.add(CustomerService.class);
        return set;
    }
} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

# css - Safari - 仅在刷新时应用的样式（或悬停时的某些部分）

> ID：14623589
> 
> 赞同：0
> 
> 时间：2013-01-31T10:29:41.423
> 
> 标签：css, safari, cross-browser

我什至不知道从哪里开始。在我的项目的一个页面上，当您第一次进入该页面时，网站的某些部分会消失，而有些部分则没有样式（例如，border-radius 不起作用）。

首先，当您将鼠标悬停在链接上或选择某些文本（在选择之前实际上是不可见的）时，标题的某些部分会再次出现。当您刷新页面时，一切看起来都应该如此。

在我发现悬停或选择修复某些部分之前，我认为样式不会被应用或类似的东西。我什至尝试删除所有 @imports 并检查它是否有效。

这只发生在 Safari 中，样式被应用到适当的元素，但这些元素没有正确呈现并且不可见。

我什至不知道我应该在这里发布我的代码的哪些部分，因为它只是基本的 CSS，它在除 Safari 之外的任何地方都能完美运行。有任何想法吗？

@edit：这是一个问题示例（`your profile`显示链接，因为我将鼠标悬停在它上面） ![在此处输入图像描述](../Images/ce6eaed73ac0147c80df43aaf6776f78.png) 当您选择不可见文本的某些部分而不是取消选择时，它会显示： ![在此处输入图像描述](../Images/0e3a64ee0ca972f3eb23ab12c13914ad.png) 这是基于 Bootstrap 的站点，这是此代码警报：

```
<div class="alert">
    <button type="button" class="close" data-dismiss="alert">×</button>
    <strong>You are not connected to Stripe yet.</strong>
    <p>Other people will not be able to find or participate in your experiences until you connect to Stripe. Go to <a href="/profiles/1#stripe-connection">your profile</a> to connect to Stripe now.</p>
</div> 
```

关于样式，它基本上只是一些填充，显然是橙色渐变。在屏幕截图上，您可以看到边界半径，但有时它不存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:08:14.170

我的一个朋友的建议：`style`在你的文档中放置空标签有效！只需`<style></style>`在标题中放置行，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:32:45.583

查看 safari 开发者工具：[https ://developer.apple.com/technologies/safari/developer-tools.html](https://developer.apple.com/technologies/safari/developer-tools.html)

将个别问题的屏幕截图与 html 片段一起发布将有助于我们缩小问题范围。

# ms-access - How do I send user-defined parameters into Access to run a function in Access using VBScript?

> ID：14623594
> 
> 赞同：1
> 
> 时间：2013-01-31T10:30:20.167
> 
> 标签：ms-access, vbscript

I'm trying to run a tool created in Access through a VB Script, but it needs to receive 7 variables to run. I don't know how to send data to Access for it to use when running the tool, and all the other posts say to connect directly with the database, but the tool is too complex to do that efficiently.

Here's the code so far:

```
'initialise variables to hold the parameters passed in
Dim v_VBTOOL
Dim v_Procedure
Dim o_accessApp

'Assign the parameters to the variables
v_VBTOOL = WScript.Arguments(0)
v_Macro =WScript.Arguments(1)

Wscript.echo "The Database to open is " & v_VBTOOL
Wscript.echo "The Macro to run is " & v_Macro

'Create an MSAccess application Object 
'=================================================
Set o_accessApp = createObject("Access.Application")

'Open the required VBTestTool database
'=================================================
o_accessApp.OpenCurrentDataBase(v_VBTOOL)

'Now run the relevant Macro
'=================================================
o_accessApp.DoCmd.RunMacro(v_Macro)

If Err.Number > 0 Then
   ' There was an error.  Inform the user and halt execution
    strMsg = "The following error was encountered while compacting database:"
    strMsg = strMsg & vbCrLf & vbCrLf & Err.Description
    WScript.Echo strMsg

Else
    WScript.Echo "VBTOOL PROCEDURE WAS SUCCESSFUL"
    o_accessApp.Quit
    Set accessApp = nothing
End If 
```

Any help or tips would be appreciated!

# python - Python string split without common delimiter

> ID：14623605
> 
> 赞同：1
> 
> 时间：2013-01-31T10:30:45.327
> 
> 标签：python, regex, string, split

I am fairly new to Python. An external simulation software I use gives me reports which include data in the following format:

```
1    29 Jan 2013 07:33:19.273    29 Jan 2013 09:58:10.460          8691.186 
```

I am looking to split the above data into four strings namely;

```
'1', '29 Jan 2013 07:33:19.273', '29 Jan 2013 09:58:10.460', '8691.186' 
```

I cannot use str.split since it splits out the date into multiple strings. There appears to be four white spaces between 1 and the first date and between the first and second dates. I don't know if this is four white spaces or tabs.

Using `'\t'` as a delimiter on split doesn't do much. If I specify `' '` (4 spaces) as a delimiter, I get the first three strings. I also then get an empty string and leading spaces in the final string. There are 10 spaces between the second date and the number.

Any suggestions on how to deal with this would be much helpful!

Thanks!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T10:35:05.840

你可以用一个简单的正则表达式分割多个空格：

```
import re

multispace = re.compile(r'\s{2,}')  # 2 or more whitespace characters
fields = multispace.split(inputline) 
```

示范：

```
>>> import re
>>> multispace = re.compile(r'\s{2,}')  # 2 or more whitespace characters
>>> multispace.split('1    29 Jan 2013 07:33:19.273    29 Jan 2013 09:58:10.460          8691.186')
['1', '29 Jan 2013 07:33:19.273', '29 Jan 2013 09:58:10.460', '8691.186'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:38:42.147

If the data is fixed width you can use character addressing in the string

```
n=str[0]
d1=str[2:26]
d2=str[27:51]
l=str[52:] 
```

However, if Jan 02 is shown as Jan 2 this may not work as the width of the string may be variable

# git - git clone 很慢 - 我可以将现有的克隆复制到新目录吗？

> ID：14623609
> 
> 赞同：4
> 
> 时间：2013-01-31T10:30:58.197
> 
> 标签：git

我们有一个相当大的 git 存储库，但工作空间中实际存在的文件很少。由于它的大小和我们严格的防病毒设置，克隆需要相当长的时间，这使得使用许多小分支变得更加乏味（因为当 git 操作工作区中的 maven 项目时，Eclipse 会变得非常混乱）。

因此，我希望有一种更快的方法来创建一个新的 git checkout “next”到文件系统中的现有克隆（但完全独立于它）在完全相同的分支并提交与现有克隆一样，我想知道我是否可以简单地制作包含两个项目的文件夹的普通副本`.git`并继续独立工作。

（我还记得在本地文件系统上看到了一些关于 git 克隆和使用硬链接节省空间的内容。这并不重要，但如果它在 Windows 上工作可能会很好。）

那么，我可以简单地复制现有的 git 工作区（包括 .git）来获得与新工作区相同的结果`git clone`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T10:32:28.033

是的，您可以复制或移动 git 目录。没有什么可以阻止它。

如果您使用其他用户，或者想要使用不同的远程存储库，您可能希望在此`.git/config`之后更改文件中的内容，但仅此而已。

话虽如此，我不明白为什么复制存储库会比在本地克隆它更快。它应该是相反的，因为可以从目录重新创建工作`.git`目录（如果您只复制此目录，只需在`git reset --hard`之后执行）。

# symfony - 如何使用 Symfony2 liuggio Excel Bundle 创建 PDF

> ID：14623610
> 
> 赞同：0
> 
> 时间：2013-01-31T10:31:00.563
> 
> 标签：symfony, phpexcel

我有 liiggio Excel 包，用于在我的 symfony2 应用程序中创建 excel 文档。就像我想创建 PDF 文件一样。你能帮我创建PDF吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T00:38:14.510

liUggio excel bundle 只是 phpExcel 的一个 bundle，你应该看看 phpexcel 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-14T13:56:40.963

TCPdf库怎么样？我正在开发一个通过 TCPdf 生成 PDF 报告的 WebApp，效果很好。

问候， 明

# elasticsearch - 过滤的查询未显示正确的结果

> ID：14623611
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:31:10.697
> 
> 标签：elasticsearch

当我通过 curl 运行时，它也显示了正确的结果和统计方面，但是通过 java api 它不会显示正确的结果

```
 curl  http://localhost:9200/Data/my_data/_search?pretty=true -d '{
"fields" : ["price","total"],
 "query" : {
  "filtered": {
"query":{
 "bool": {
  "must": [
{"term" : { "empId" : "1" }},

{
 "range": {
  "datetime" : {"gte" : "2005-12-23T23:10:52Z", "lte" : "2005-12-23T23:10:56Z" }}
},
{
 "range": {
  "price" : {"gt" : 0 }}
},
{
 "range": {
  "total" : {"gt" : 0 }}
}
  ]
 }
}
  }
 },

 "facets" : {
  "stat1" : {
"statistical" : {
 "field" : "price"
}
  }
 }
}' 
```

以下是我的java代码：

```
QueryBuilder qb2 = boolQuery()
    .must(termQuery("empId", 1))
    .must(rangeQuery("price").gt(0))
    .must(rangeQuery("total").gt(0))
    .must(rangeQuery("datetime").gte("2005-12-23T23:10:52Z").lte("2005-12-23T23:10:56Z"));

SearchResponse respStats = client.prepareSearch(indexName)
            .setTypes(indexType)
            .setSearchType(SearchType.QUERY_THEN_FETCH)
            .setQuery(QueryBuilders.filteredQuery(qb2 ,null))
            .addFields("empId","price","datetime")
            .addFacet(statisticalFacet("FacetCountStats").field("price"))
            .setFrom(0)
            .setExplain(false)
            .execute()
            .actionGet(); 
```

但它显示我不想要的价格和总价值为零。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:45:34.640

只是想知道是否`termQuery("empId", 1)`不应该`termQuery("empId", "1")`？

# php - 在 php 中使用 echo 语句时出错？

> ID：14623613
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:31:11.280
> 
> 标签：php

我已经使用此代码显示数据库中的图像，但它显示语法错误.. 这是我的后端代码。

```
<?php
        echo ' <div id="ib-main-wrapper" class="ib-main-wrapper">';
        echo ' <div class="ib-main">';
        $sql_select = "select * from tbl_photo";
        $sql_select =  mysql_query($select_image);
        while($data = mysql_fetch_array($sql_select)){

                echo "<a href="#"><img src='".$path.$data['photo']."' data-largesrc='".$path.$data['photo']."' /><span>".$data['photo']."</span></a>";
        }
        echo '</div></div>';
        ?> 
```

它的静态代码是：

```
<a href="#"><img src="images/upload/Desert.jpg" data-largesrc="images/large/Desert.jpg" alt="image01"/><span>Crabbed Age and Youth</span></a> 
```

请给出答案。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:32:55.320

```
echo "<a href="#">
              ^----- here it is 
```

试试这个：

```
echo "<a href=\"#\"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:33:41.490

你的报价是错误的。

```
 echo '<a href="#"><img src="'.$path.$data['photo'].'" data-largesrc="'.$path.$data['photo'].'" /><span>"'.$data['photo'].'"</span></a>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:33:27.153

这是问题： `echo "<a href="#">`

这是解决方案

```
 echo ' <div id="ib-main-wrapper" class="ib-main-wrapper">';
    echo ' <div class="ib-main">';
    $sql_select = "select * from tbl_photo";
    $sql_select =  mysql_query($select_image);
    while($data = mysql_fetch_array($sql_select)){

            echo "<a href='#'><img src='".$path.$data['photo']."' data-largesrc='".$path.$data['photo']."' /><span>".$data['photo']."</span></a>";
    }
    echo '</div></div>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T10:34:52.333

改变

```
echo "<a href="#"><img src='".$path.$data['photo']."' data-largesrc='".$path.$data['photo']."' /><span>".$data['photo']."</span></a>"; 
```

至

```
echo '<a href="#"><img src="'.$path.$data['photo'].'" data-largesrc="'.$path.$data['photo'].'" /><span>'.$data['photo'].'</span></a>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T10:35:50.273

您可以使用`\`. 如果不转义这些字符，您将创建一个未终止的字符串文字。

```
echo "<a href=\"#\"><img src=\"".$path.$data['photo']."\" data-largesrc=\"".$path.$data['photo']."\" /><span>".$data['photo']."</span></a>"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-31T10:49:13.127

除了您可以使用*heredoc*和*newdoc语法（与**单引号*和*双引号*非常相似）来指定字符串文字这一事实之外，我建议在指定 HTML 代码时使用**单引号**，因为 HTML 中充满了*双引号*，而您不想逃避所有人。

当您使用*单引号*时，您不必在字符串文字中转义*双引号：*

```
echo 'This works "just fine"'; 
```

这种规范的缺点是变量不会像*双引号*文本一样被扩展，因此您必须用`.`（点）连接每个变量。

```
echo 'This works'.$justfine; 
```

使用*双引号*时，您可以执行以下操作：

```
echo "This works $justfine"; 
```

*这些是单引号和双引号*之间最重要的区别。如果您想了解更多信息，可以考虑阅读[PHP 中的字符串](http://php.net/manual/en/language.types.string.php)。最好把这些东西说清楚，因为你会经常用到它们。

# c++ - 带有 x264 编码的 FFMPEG

> ID：14623614
> 
> 赞同：1
> 
> 时间：2013-01-31T10:31:17.723
> 
> 标签：c++, ffmpeg, libx264

我正在尝试使用 ffmpeg + x264 将视频从 jpeg 图像集编码为 h264。我以这种方式初始化 AVCodecContext：

```
_outputCodec = avcodec_find_encoder(AV_CODEC_ID_H264);
_outputCodecContext = avcodec_alloc_context3(_outputCodec);
avcodec_get_context_defaults3(_outputCodecContext, _outputCodec);
_outputCodecContext->width                 = _currentWidth;
_outputCodecContext->height                = _currentHeight;
_outputCodecContext->pix_fmt               = AV_PIX_FMT_YUV420P;
_outputCodecContext->time_base.num         = 1;
_outputCodecContext->time_base.den         = 25;
_outputCodecContext->profile =FF_PROFILE_H264_BASELINE;
_outputCodecContext->level = 50; 
```

avcodec_open 没有返回错误，一切正常，但是当我调用 avcodec_encode_video2() 时，我收到这样的消息（我认为它来自 x264）：

```
using mv_range_thread = %d

%s

profile %s, level %s 
```

然后应用程序崩溃。使用 x264 && 时，编解码器上下文有更多必要的设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T01:58:08.470

如果没有完整版本的代码，很难看出实际问题是什么。

首先，这里是 FFMPEG 库将 RGB 帧编码为 H264 视频的工作示例：

[http://www.imc-store.com.au/Articles.asp?ID=276](http://www.imc-store.com.au/Articles.asp?ID=276)

您可以扩展此示例，使用 CImage 加载 JPG 并将 RGB 数据传递给 FFMPEG 类以编码为 H264 视频。

不过，对您的示例有一些想法：

*   你有没有像下面这样调用注册？

    ```
    avcodec_register_all();
    av_register_all(); 
    ```

*   另外，我会将您的代码重写为如下所示：

    ```
    AVStream *st;
    m_video_codec = avcodec_find_encoder(AV_CODEC_ID_H264);
    st = avformat_new_stream(_outputCodec, m_video_codec);
    _outputCodecContext = st->codec;
    _outputCodecContext->codec_id = m_fmt->video_codec;
    _outputCodecContext->bit_rate = m_AVIMOV_BPS;           //Bits Per Second 
    _outputCodecContext->width    = m_AVIMOV_WIDTH;         //Note Resolution must be a multiple of 2!!
    _outputCodecContext->height   = m_AVIMOV_HEIGHT;        //Note Resolution must be a multiple of 2!!
    _outputCodecContext->time_base.den = m_AVIMOV_FPS;      //Frames per second
    _outputCodecContext->time_base.num = 1;
    _outputCodecContext->gop_size      = m_AVIMOV_GOB;      // Intra frames per x P frames
    _outputCodecContext->pix_fmt       = AV_PIX_FMT_YUV420P;//Do not change this, H264 needs YUV format not RGB 
    ```

*   然后您需要使用 swscale 将 RGB JPG 图片转换为 YUV 格式，如 pogorskiy 所说。

看看链接的示例，我在 VC++2010 上对其进行了测试，它运行良好，您可以向它发送一个 RGB 字符数组。

# iphone - Twitter OAuth 重定向到我的回调 url

> ID：14623629
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:31:48.887
> 
> 标签：iphone, objective-c, twitter

我正在尝试使用[OAuth](https://github.com/bengottlieb/Twitter-OAuth-iPhone/)在我的 iphone 应用程序中连接到 twitter。我已经设置了所有内容并弹出登录弹出窗口，但是登录后，它重定向到我的回调 url。点击取消按钮只会重新打开登录屏幕。如何创建回调 url 以使应用关闭登录屏幕并允许用户发送推文？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:59:32.613

替换 SA_OAuthTwitterViewController.m 中的以下方法，它应该可以解决您的问题（注意，我是从 github 页面上报告的问题中得到的 :)）

```
- (void) webViewDidFinishLoad: (UIWebView *) webView {
    _loading = NO;
    //[self performInjection];
    if (_firstLoad) {
        [_webView performSelector: @selector(stringByEvaluatingJavaScriptFromString:) withObject: @"window.scrollBy(0,200)" afterDelay: 0];
        _firstLoad = NO;
    } else {
        // This else clause modified to work with twitter apps that have the callback URL set: https://dev.twitter.com/apps/
        // Bug details: https://github.com/bengottlieb/Twitter-OAuth-iPhone/issues/79
        [_engine requestAccessToken];

        if ([_delegate respondsToSelector: @selector(OAuthTwitterController:authenticatedWithUsername:)])
            [_delegate OAuthTwitterController: self authenticatedWithUsername: _engine.username];
        [self dismissModalViewControllerAnimated:YES];
    }

    [UIView beginAnimations: nil context: nil];
    _blockerView.alpha = 0.0;
    [UIView commitAnimations];

    if ([_webView isLoading]) {
        _webView.alpha = 0.0;
    } else {
        _webView.alpha = 1.0;
    }
} 
```

希望它能解决你的问题...

# jqgrid - Offval 属性自定义复选框格式化程序 jqGrid

> ID：14623630
> 
> 赞同：2
> 
> 时间：2013-01-31T10:31:51.647
> 
> 标签：jqgrid

我正在编写一个自定义复选框格式化程序，但我无法理解该`offval`属性的用途以及它的值应该是什么。

尤其是在设置了 editoptions 的值时。例如`editoptions: { value:"Yes:No" }`

我可以看到默认的复选框格式化程序总是`offval`将`no`. 这个[api 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules)说它也可以设置为`off`. 在代码中，我还看到该值可以设置为 editoptions 的第二个值。在示例的情况下，`No`但这可以是任何提供的值。

那么如何为我的复选框格式化程序实现 offval 属性呢？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:23:22.980

我认为您不需要`offval`在自定义复选框格式化程序中设置任何属性。如果使用，jqGrid 会自行设置属性`edittype: "checkbox"`（参见[代码部分](https://github.com/tonytomov/jqGrid/blob/v4.4.4/js/grid.common.js#L307-L330)）。因此，在我看来，如果您也创建了自[定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)，也不需要在[自定义编辑控件中](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acommon_rules#custom)**进行设置`offval`**。

顺便说一句，在我发布[格式化程序代码的时候：“clickableCheckbox”](https://github.com/OlegKi/jqGrid-plugins/blob/master/jQuery.jqGrid.clickableCheckbox.js)我和你有同样的问题。我不明白的意思，`offval`我只是包含`offval="no"`在代码中。:-)。我认为这没有任何意义，但要确保必须测试所有原因。

如果您编写多次使用的自定义格式化程序，我建议您使用

```
(function ($) {
    "use strict";
    $.extend($.fn.fmatter, {
        yourFormatterName: function (cellValue, options) {
            ....
        }
    });
    $.extend($.fn.fmatter.yourFormatterName, {
        unformat: function (cellValue, options, elem) {
            ...
        }
    });
}(jQuery)); 
```

as prototype of the formatter. In the way you will register new formatter "yourFormatterName" which you can use exactly like any other [predefined formatters](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3apredefined_formatter#predefined_format_types): you need just use `formatter: "yourFormatterName"` instead of `formatter: "checkbox"` in the column definition of the corresponding column. I find this way very practical.

# maven-3 - 使用 Maven AspectJ 插件配置转储目录

> ID：14623636
> 
> 赞同：2
> 
> 时间：2013-01-31T10:32:10.280
> 
> 标签：maven-3, aspectj

我们刚刚开始在基于 Maven 的多模块项目中使用 AspectJ Maven 插件 ( [http://mojo.codehaus.org/aspectj-maven-plugin/index.html )。](http://mojo.codehaus.org/aspectj-maven-plugin/index.html)这个插件在我们项目的根目录中生成核心转储文件。AspectJ 文档声称系统属性

```
org.aspectj.dump.directory 
```

可用于配置生成这些核心文件的位置。

有谁知道在使用 Maven 插件时如何设置此属性（或等效属性）？

# android - 重量的变化没有在布局中生效

> ID：14623643
> 
> 赞同：3
> 
> 时间：2013-01-31T10:32:28.460
> 
> 标签：android, layout, textview

我想我在这里缺少一些基本的东西。看看有没有人可以帮忙。

我有一个活动（activity_story1），我正在加载一些文本和一些其他控件。我布置所有组件的方式是将它们放在 LinearLayout 中的 RelativeLayout 组中，然后为这些 RelativeLayouts 分配权重。下面的示例 xml 以供参考。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".Story1Activity" 
android:id="@+id/StoryLinearLayout">

<TextView
        android:id="@+id/titleStory"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="0.05"/>

<TextView
        android:id="@+id/textViewStory1"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="0.90"/>

<LinearLayout
        android:id="@+id/footerStoryLinearLayout"
        android:layout_weight="0.05"
        android:layout_width="fill_parent"
        android:layout_height="0dip">
        <RelativeLayout
            android:id="@+id/footerStoryRelativeLayout"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
            <TextView
                android:id="@+id/PageCount"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_centerHorizontal="true"
                android:text="page count"/>
            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:layout_alignParentTop="true"
                android:onClick="addBookmark"
                android:clickable="true"/>

        </RelativeLayout>

</LinearLayout> 
```

我在 onCreate 上面的 textviews 中加载了一些文本。到目前为止，一切都很好。

现在我覆盖 onConfigurationChanged() 以便当用户更改屏幕对齐方式时，我的内容保持不变，并且不会调用 onCreate() 来重新加载 textviews 中的内容。在 onConfigurationChanged() 中，我还使用下面的代码来更改相对布局“titleStoryRelativeLayout”的权重。

```
//change the weight of the textview when screen alignment changes
    LayoutInflater inflater = LayoutInflater.from(this);
    LinearLayout ll = (LinearLayout)inflater.inflate(R.layout.activity_story1, null);
   LinearLayout yourRL = (LinearLayout)ll.findViewById(R.id.footerStoryLinearLayout);
   yourRL.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, 0, 0.1f)); 
```

但是，一旦我重新调整屏幕（即调用 onConfigurationChanged() 时），重量的变化似乎不会生效。我可以看到变量 yourRL 等正在被填充。我改变我的Relativelayout（它包含titleStory TextView）的重量的基本原因是因为当对齐方式改变时我希望我的titleStory textview 的高度改变（增加/减少）以便更好地查看。使用我在上面的 onConfigurationChanged() 中输入的代码，我期望权重会改变（从 0.05 到 0.01），因此 textview 的高度也应该改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:32:09.580

更新了我的 xml 以使用 LinearLayout（使用新 xml 更新的问题），然后使用下面的代码更新权重。我想我通过定义太多布局来复杂化。

```
LinearLayout yourRL = (LinearLayout)findViewById(R.id.footerStoryLinearLayout);
    yourRL.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, 0, 0.5f)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:48:05.507

由于此 xml 文件没有给出错误，这并不意味着您可以将这些属性（`weight`以及`orientation`在您的情况下`weight`与 LinearLayout 关联）与 RelativeLayout 一起使用。请先查看[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)的文档。因为你不会`android:layout_weight`像在[LinearLayout](http://developer.android.com/reference/android/widget/LinearLayout.html)中那样找到属性，你可以在 android 的文档中找到该属性。

不过，如果你想使用权重，你必须在具有 fill_parrent 高度和宽度的 RelativeLayout 中使用 LinearLayout。

我想你得到了我..

# java - 如何从码头日志中删除弹簧信息？

> ID：14623649
> 
> 赞同：2
> 
> 时间：2013-01-31T10:32:37.957
> 
> 标签：java, logging, jetty

我不断在我的日志文件中收到信息消息。

我正在使用码头和弹簧。

```
INFO org.springframework.remoting.support.RemoteInvocationTraceInterceptor - Processing of HessianServiceExporter remote call resulted in exception... 
```

我没有收到关于tomcat的消息。有没有办法关闭这些消息？

我也在使用 log4j slf4j 和 commons 日志记录。

当我调试 log4j 时，正在加载正确的配置文件。

不知何故，另一个日志记录正在将这些消息添加到文件中......

我认为因为 spring 使用公共日志记录，所以它使用 RemoteInvocationTraceInterceptor 制作信息消息。

不知何故，公共日志不会将其发送到 log4j，而只会写入信息，无论您在 log4j.xml 中设置什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:58:03.423

`INFO`您可以通过在中指定以下内容来关闭Spring 的级别日志`log4j.properties`

```
log4j.logger.org.springframework.remoting.support=ERROR 
```

包下的所有类`support`只写错误日志。如果您需要整个`springframework`，请指定为

```
log4j.logger.org.springframework=ERROR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:40:20.103

尝试`org.springframework.remoting.support.RemoteInvocationTraceInterceptor`从您的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T13:33:46.823

Spring 对 log4j 使用了一种奇怪的模式（恕我直言）：

例如，在“MyClass”类中，他们不写（这很常见）：

```
logger=LogFactory.getLog(MyClass.class); 
```

但他们写

```
logger=LogFactory.getLog(getClass()); 
```

所以如果派生类“MyDerived extends MyClass”使用其父类“MyClass”的方法，调用会被log4j根据类“MyDerived”过滤，而不是“MyClass”，这不直观，因为调用是在文件“MyClass.java”中

所以你可以在这种情况下过滤它

```
<logger name="MyDerived" additivity="false">
    <level value="fatal" />
</logger> 
```

或（.properties 格式）log4j.logger.MyDerived=ERROR

# amazon-ec2 - 如何处理亚马逊ec2的时钟漂移？

> ID：14623650
> 
> 赞同：18
> 
> 时间：2013-01-31T10:32:41.117
> 
> 标签：amazon-ec2, amazon, clock, drift

我们在亚马逊上有几个 ec2 实例，我们使用 amazon AIM Linux 进行设置。实例类型为 m1.medium。

直到本周，一切都很顺利。

我们从日志文件中发现会突然发生巨大的时钟漂移，有时会有5分钟的偏差。</p>

我想问一下有没有人遇到这个问题？如何处理？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-03T10:45:48.660

由于实例资源的过度使用，可能会发生时间漂移。我鼓励您检查您的 cloudwatch CPU 图表，以尝试确定您的 CPU 是否被过度使用。

如果您正在运行 amazon linux AMI，则默认安装 NTP。

要验证 NTP 是否正在运行，请运行

> sudo 服务 ntpd 状态

如果未安装，您可以运行以下命令进行安装：

> 须藤百胜安装ntp

如果NTPD 正在运行并且您的时钟时间已关闭，我会尝试重新启动它并查看它是否与您设置的NTP 服务器同步。您还可以通过编辑 /etc/ntp.conf 文件来添加更多 NTP 服务器。只需搜索 NTP 服务器即可找到要添加的服务器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T00:00:43.807

是的，最好不要相信系统时钟。只需安装和配置 NTP。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-11T16:57:55.310

2017 年，亚马逊推出了[亚马逊时间同步服务](https://aws.amazon.com/blogs/aws/keeping-time-with-amazon-time-sync-service/)。从该公告帖子中：

> 您可以通过链接本地 169.254.169.123 IP 地址访问该服务。这意味着您无需配置外部 Internet 访问，并且可以从您的私有子网中安全地访问该服务。

他们继续推荐[Chrony](https://chrony.tuxfamily.org/)而不是 ntpd。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T11:06:15.177

是的，即使我遇到了这个问题。最糟糕的是我使用 SES 发送电子邮件；并且电子邮件发送开始失败，并出现错误“时间不匹配”。所以，由于 AWS 的一个问题；另一个问题发生了。

重新启动服务器立即解决了该问题。此外，创建客户支持票并让他们知道。这是他们最后的一个错误。我认为这发生在他们的一些实例中。因为这个问题；我的生意受到了非常不利的影响，因此我什至得到了一些美元信贷。

# c++ - 输出变为 a2a3 而不是 a2b3

> ID：14623655
> 
> 赞同：1
> 
> 时间：2013-01-31T10:33:01.147
> 
> 标签：c++, multiple-inheritance

我的理解是，在 E 对象中，C 和 D 对象分别由 c 和 d 引用。但我无法理解为什么 d.set_c('b') 无法将 B.m_c 初始化为 'b'，因为 c.set_n(3) 能够将 A.m_n 的值更改为 3。

```
 #include <iostream>

    class A
    {
    public:
        A(int n = 2) : m_n(n) {}

    public:
        int get_n() const { return m_n; }
        void set_n(int n) { m_n = n; }

    private:
        int m_n;
    };

    class B
    {
    public:
        B(char c = 'a') : m_c(c) {}

    public:
        char get_c() const { return m_c; }
        void set_c(char c) { m_c = c; }

    private:
        char m_c;
    };

    class C
        : virtual public A
        , public B
    { };

    class D
        : virtual public A
        , public B
    { };

    class E
        : public C
        , public D
    { };

    int main()
    {
        E e;  //object of E is created
        C &c = e; //c is used to refrence C object in E Object 
        D &d = e; //c and d has same inheritance structure 
        std::cout << c.get_c() << d.get_n();

        c.set_n(3);
        d.set_c('b');
        std::cout << c.get_c() << d.get_n() << std::endl;

        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:49:13.893

让我们看看你的类结构，如果你创建一个 的实例`E`，你最终会得到一个像这样的对象层次结构：

```
 class B   class A   class B
     \       / \       /
      \     /   \     /
       \   /     \   /
      class C   class D
          \       /
           \     /
            \   /
           class E 
```

您会看到有两个实例`B`，但只有一个实例`A`。这是因为虚拟继承。两者都`C`继承`D`自`A`使用虚拟继承，因此`A`您的`e`.

现在让我们看看用户代码：

```
E e;
C &c = e; // reference C in the object hierarchy of E
D &d = e; // reference D in the object hierarchy of E

c.set_n(3); // set the value in the only instance of A in E
d.set_c('b'); // set the value of one of the two instances of B in your e

std::cout << c.get_c(); // print the value in the other instance of B in e
                        // not the one you set before
std::cout << d.get_n(); // print the value of the only instance of A in e
                        // this got changed before 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:50:13.693

类的对象`E`包含子对象，`C`而`D`子对象又包含一个`B`子对象。由于不涉及虚拟继承`B`，因此每个都`C`包含`D` *自己的`B`*.

`d.set_c()`then 指的是`B`contains in`D`并更新 that，while`c.get_c()`指的是`B`contains in `C`，它独立于 in `D`，因此没有改变。

对于类`A`及其成员`n`，由于使用了虚拟继承，因此没有此类问题。这确保了在类的最终对象中，每个人`E`都只`A`使用一个子对象，无论通过哪个“路径”访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:47:03.637

改变

```
, public B 
```

至

```
, virtual public B 
```

得到输出`a2b3`。

在您的示例中，`E`实例包含单独的`B`实例。

# c# - 如何访问 onRowDataBound 事件

> ID：14623660
> 
> 赞同：2
> 
> 时间：2013-01-31T10:33:11.947
> 
> 标签：c#, .net, wpf, listview, gridview

我正在使用`ListView`包含 a`GridView`来绑定数据。我想在数据绑定期间但在向 UI 显示完整数据之前对每一行做一些工作。

这通常在 asp.net 中按`OnRowDataBound`事件完成。

有没有`OnRowDataBound`我可以在 WPF 中使用的事件。如果是这样，我该如何使用它？是否有任何替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:55:27.513

您可以做的是首先通过 ValueConverter 作为中间步骤。它发生在数据绑定过程中，在源和 UIElement 之间。

在您的 GridView 和 GridViewColumn 中，您可以在其中定义源路径，只需添加一个与您要绑定的数据类型匹配的 ValueConverter，以及返回 Type..

然后在你的 valueConverter 的代码中，做你的更改。

# ruby-on-rails - 如何在命名范围内有多个条件？

> ID：14623668
> 
> 赞同：6
> 
> 时间：2013-01-31T10:33:28.050
> 
> 标签：ruby-on-rails, model, scope, named-scope, rails-models

我有一个用户模型。我可以通过执行来检查用户是否是管理员`a_user.try(:admin?)`。

我想定义一个命名范围，在最后 X 分钟内更新所有*非*管理员用户。到目前为止，我有：

```
scope :recent, lambda { { :conditions => ['updated_at > ?', 5.minutes.ago] } } 
```

这成功地在最后 5 分钟内更新了所有用户，但是如何合并管理员检查？我不知道如何调用`try()`范围内的用户实例...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-09-30T05:46:01.197

只是另一种可能性，可用于 Rails 4，

```
scope :recent, -> { where('updated_at > ?', 5.minutes.ago }
# If you were using rolify, you could do this
scope :non_admin, -> { without_role :admin }
# given the OP question,
scope :non_admin, -> { where(admin: false) }
scope :non_admin_recent, -> { non_admin.recent } 
```

这只是另一种可能的格式，并考虑到使用 Rolify gem 的可能性。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-31T10:41:01.973

如果 users 表中的 admin 列是布尔值，

```
scope :recent, lambda { :conditions => ['updated_at > ? AND admin != ?', 5.minutes.ago, true] } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-31T12:53:06.830

而不是 using `lambda`，我发现使用类方法更简洁。

```
def self.recent
  where('updated_at > ?', 5.minutes.ago)
end

def self.admin
  where(admin: true)
end

def self.recent_and_admin
  recent.admin # or where('updated_at > ?', 5.minutes.ago).where(admin: true)
end 
```

# windows - 注销 MSOXMLMF.DLL 的后果是什么

> ID：14623670
> 
> 赞同：1
> 
> 时间：2013-01-31T10:33:35.890
> 
> 标签：windows, debugging, ms-office, windbg

发生了一个奇怪的崩溃（访问冲突），其中在 MSOXMLMF 中“调用”了一个地址，而根据 windbg，在“调用”时没有（更多）加载该库。

注意：“调用”是对 MSOXMLMF 中曾经合法的返回地址的返回（此 office 2010 DLL 的符号信息不可下载）。

为了检查当 MSOXMLMF 不是问题时会发生什么，我们要注销此 DLL。这一行动可能会产生什么后果？

# android - 如何完全隐藏用于将输入类型更改为数字 SIP 的 EditText

> ID：14623672
> 
> 赞同：2
> 
> 时间：2013-01-31T10:33:39.120
> 
> 标签：android, input, android-edittext, sip, numeric

我遇到了 EditText 控件的问题，不知道如何使它完全隐藏。我的要求是使用 InputMethodManager 从 webview 控件显示数字 SIP，并且 showSoftInput 始终默认为字母数字键盘。所以我创建了一个隐藏的 EditText 控件并更改了该控件的输入类型，它工作正常，但问题是隐藏的控件仍然可以访问，并且它总是显示在左上角。有没有办法将隐藏的 EditTtext 与我正在编辑的控件完全移动/对齐并完全隐藏它。

```
InputMethodManager imm;
if (mWebEditText == null)
{
    mWebEditText = new WebEditText(Common.mainActivity.getApplicationContext(),view.getView());
}

mWebEditText.setInputType(InputType.TYPE_CLASS_NUMBER);
mWebEditText.setImeOptions(EditorInfo.IME_ACTION_DONE);

AbsoluteLayout webEditTextPanel = (AbsoluteLayout) Common.mainActivity.findViewById(R.id.editext_panel);
webEditTextPanel.removeAllViews();
RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(area.width(), area.height());
lp.leftMargin = area.left;
lp.topMargin = area.top;
webEditTextPanel.addView(mWebEditText, lp);

mWebEditText.setVisibility(View.VISIBLE); 
mWebEditText.setCursorVisible(false); 
mWebEditText.setBackgroundColor(0x00FFFFFF); // If I do this the bounding rectangle is hidden but if we tap on top/left corner then we can see the edit box
mWebEditText.requestFocus();
imm.showSoftInput(mWebEditText, 0); 
```

编辑文本定义：

```
<AbsoluteLayout android:id="@+id/editext_panel" android:layout_width="wrap_content"   android:layout_height="wrap_content" android:clickable="false"    android:focusableInTouchMode="false" android:visibility="visible">
</AbsoluteLayout> 
```

截屏：

![上/左角的边界矩形](../Images/d87a3ff21e0b30d826ed478623052a0c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:37:31.100

If you want to hide use `editText.setVisibility(View.INVISIBLE)` if you want that it is completely gone and no space is allotted to it in UI then use the command `editText.setVisibility(View.GONE)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:06:33.387

将控件移出屏幕效果很好。即控件被隐藏并且数字SIP 弹出很好。

```
AbsoluteLayout.LayoutParams lp = new AbsoluteLayout.LayoutParams(area.width(), area.height(), -200, -200); 
```

# java - 从 mysql db 获取数据并在 android 上显示

> ID：14623679
> 
> 赞同：0
> 
> 时间：2013-01-31T10:33:58.120
> 
> 标签：java, android, mysql

我必须开发一个 android 示例。

它执行从 mysql 数据库中获取数据并显示在 android 应用程序上。

我使用了以下网络服务代码：

```
public class EditProfile {
public String customerData(String Username,String Password,String Firstname,String Lastname,String Company,String Taxnumber,String Baddress,String Bcity,String Bstate,String Bcountry,String Bzipcode,String Saddress,String Scity,String Sstate,String Scountry,String Szipcode,String Email,String Phone,String Fax,String Url){

 String customerInfo = "";

try{

Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://10.0.0.75:3306/xcart432pro","root","");
 PreparedStatement statement =  con.prepareStatement("SELECT * FROM xcart_customers where login = '"+Username+"'");
 ResultSet result = statement.executeQuery();

while(result.next()){
            customerInfo = customerInfo + result.getString("login") + ":" +result.getString("password")+ ":" +result.getString("firstname")
    }

     }
     catch(Exception exc){
         System.out.println(exc.getMessage());
           }
        return customerInfo;
        } 
```

我使用了以下android代码：

```
 public class RetailerActivity extends Activity {
    private final String NAMESPACE = "http://xcart.com";
  private final String URL = "http://10.0.0.75:8085/XcartLogin/services/EditProfile?wsdl";
  private int i;
  private final String SOAP_ACTION = "http://xcart.com/customerData";
  private final String METHOD_NAME = "customerData";

  String str,mTitle;
  /** Called when the activity is first created. */
  @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
         try {
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
     SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

     envelope.setOutputSoapObject(request);

     HttpTransportSE ht = new HttpTransportSE(URL);

       ht.call(SOAP_ACTION, envelope);

         SoapPrimitive s = response;
        str = s.toString();
       String[] words = str.split(":");
       TextView tv = (TextView) findViewById(R.id.user);
        tv.setText(Username);

      EditText tv1 = (EditText) findViewById(R.id.pass);

        tv1.setText(words[1].toString());
      EditText tv2 = (EditText) findViewById(R.id.tf_userName);

         tv2.setText(words[2].toString());

          for (int i = 0, l = words.length; i < l; ++i) {
                }}

       catch (Exception e) {
          e.printStackTrace();
           }
            }} 
```

在这里我必须运行应用程序意味着从 mysql 数据库中获取数据并在 android 上显示数据。但我没有得到响应。我怎样才能得到它。

在这里我必须写出像静态这样的条件：

```
SELECT * FROM xcart_customers where login = 'mercy'"); means fetching the data from mysql database and display the data for that user.its successfully worked. 
```

但我已经动态编写代码意味着

```
"SELECT * FROM xcart_customers where login = '"+Username+"'"); means 
```

没有得到回应。请帮助我。

我如何开发这些。给我解决方案或想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:38:23.980

It could be that username variable doesn't hold a valid value, try to print it before you invoke the query, sayin that, i see you are using `PreparedStatement`, when using PreparedStatement you should use methods from `PreparedStatement API` along with the `place holders` in the query.

```
 PreparedStatement statement =  con.prepareStatement("SELECT * FROM xcart_customers where login = ?);
statement.setString(1, username);
 ResultSet result = statement.executeQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:41:56.983

不是真正的答案，但据我所知，基本上它是不好的做法，尝试与您的外部数据库创建 1on1 连接（通过 jdbc 或任何其他可以想到的方式）。

这并非旨在处理由于失去连接等而在您的设备上出现严重错误的所有事情。

您最好创建一个小（我建议使用 REST）Web 服务来公开您的数据库。

# javascript - AudioBufferSourceNode 连接后才开始播放

> ID：14623682
> 
> 赞同：2
> 
> 时间：2013-01-31T10:34:03.070
> 
> 标签：javascript, html, web-audio-api

在我的对象中，我有一个`AudioBufferSourceNode`对象`this.bSrc`（`this.audioDestination``AudioBuffer``this.audioBuffer`

如果`this.audioDestination`连接到音频上下文最终目的地并且我在我的对象 ( ) 上`this.mainContext.destination`调用该`start(0)`方法，它将正常播放。`AudioBufferSourceNode``this.bSrc`

相反，如果`this.audioDestination`尚未*连接*到 Audio Context 最终目的地，则缓冲区将不会播放（这没关系），但其播放将延迟到建立连接（从而使任何关于 AudioBufferSourceNode 何时完成播放的假设无效） .

我目前正在实现一个插件架构，其中每个插件都有其 audioDestination 增益节点，并且不（也不能）知道它是否间接连接到最终的音频上下文目标。在我看来合乎逻辑的是 AudioBufferSourceNode 应该立即“播放”并完成，即使它没有连接到最终的音频上下文目标。但它似乎不像这样工作。我是对的还是我弄错了？有没有办法改变这种行为？

代码：

```
/* Create the audio Context. */
this.mainContext = new webkitAudioContext;

/* Create an audio gain node */
this.audioDestination = this.mainContext.createGainNode();

/* [...] An AudioBuffer gets decoded and stored into this.audioBuffer*/

/* Create an AudioBufferSourceNode and try to play it immediately */
this.bSrc = this.audioContext.createBufferSource();
this.bSrc.connect (this.audioDestination);
this.bSrc.buffer = this.audioBuffer;
this.bSrc.start(0);

/* Create a callback for when the AudioBufferSourceNode finishes playing */
if (!this.bSrc.loop) {
       var pbTimer = setTimeout(function() {
            this.playFinishedCallback();
        }.bind(this), this.audioBuffer.duration * 1000 / this.bSrc.playbackRate.value);
    }

 /* Connect this.audioDestination to the final AudioContext destination */
 /* If this statement is executed after the previous ones, playback will start NOW */
 this.audioDestination.connect(this.mainContext.destination); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T22:22:20.357

这是当前在 Chrome 中实现 Web Audio API 的方式，以及其中使用的设计。有人说要改变它；实际上，我是您描述的“音频电缆模型”的支持者。:) 不过，这不是唯一理智的模型。在当前的实现中没有任何方法可以改变这种行为。

但是，有一个简单的解决方法 - 只需将一个归零的增益节点连接到 context.destination，并将所有 ABSN 连接到该节点，以及它们（最终）连接到 context.destination。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T13:34:05.747

这是有道理的。将 context.destination 视为标准输出。如果没有连接到 context.destination，音频就无处可去。如果您将最后一行（连接到 context.destination）移动到创建增益节点之后，我认为您不会有延迟。

# objective-c - 在 cellForRowAtIndexPath 从 CoreData 加载图像会减慢滚动速度

> ID：14623686
> 
> 赞同：10
> 
> 时间：2013-01-31T10:34:17.780
> 
> 标签：objective-c, uitableview

我正在开发一个与 iOS 的原生照片应用程序非常相似的 UITableView：它有很多行，每行有 4 个图像缩略图。（即每个 UITableViewCell 有 4 个 UIImageViews） 从 Core Data 加载的所有缩略图。

我已经多次修改了我的实现，我可以看到性能改进，但它仍然无法像照片应用程序那样流畅地滚动。

我需要有关如何正确缓存照片以获得最佳性能的建议。这是我尝试过的：

**1.我的第一次尝试（滚动时非常滞后）**

*   图像在 CoreData 中以 Transformable 类型存储。
*   在 cellForRow 函数中，每个图像都是从 CoreData 动态获取的。

**2\. 第二次尝试（更快，但滚动时仍然有点滞后）**

*   图像以二进制数据类型存储，CoreData 中勾选了“外部存储”选项。
*   在 cellForRow 函数中，每个图像首先从 Core Data 加载，然后存储到内存中的 NSCache 中，因此下次 cellForRow 触发时，如果可用，我们将直接使用 NSCache 中的 UIImage。

使用 NSCache 缓存从 CoreData 加载的图像后，滚动速度明显更快，但由于在 NSCache 中尚不可用时，仍需要从 CoreData 加载图像，因此滚动仍会不时出现抖动。

因此，必须有更好的方法，我可以将所有图像预加载到内存中，但由于可能有大量或多行图像，所以我根本不打算预加载图像。

我还能做些什么来更快地在 cellForRowAtIndexPath 中加载图像？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-31T11:40:51.600

无论数据来自何处，为了保持滚动顺畅，您需要在单独的线程上获取数据，并且仅当内存中有数据时才更新 UI。*Grand Central Despatch*是必经之路。这是一个框架，假设您有一个`self.photos`字典，其中包含对图像文件的文本引用。图像缩略图可能会或可能不会加载到实时字典中；可能在也可能不在文件系统缓存中；否则从在线商店获取。它可以使用 Core Data，但平滑滚动的关键是您无需等待数据来自*任何地方。*

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
    static NSString *CellIdentifier = @"Photo Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    //identify the data you are after
    id photo = [self.photos objectAtIndex:indexPath.row];
        // Configure the cell based on photo id

      dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //move to an asynchronous thread to fetch your image data
            UIImage* thumbnail = //get thumbnail from photo id dictionary (fastest)
            if (!thumbnail) {    //if it's not in the dictionary
                thumbnail =      //get it from the cache  (slower)
                                 // update the dictionary
                if (!thumbnail) {   //if it's not in the cache
                  thumbnail =       //fetch it from the (online?) database (slowest)
                                    // update cache and dictionary
                    }
                }
            }
            if (thumbnail) {  
                dispatch_async(dispatch_get_main_queue(), ^{
                //return to the main thread to update the UI
                    if ([[tableView indexPathsForVisibleRows] containsObject:indexPath]) {
                    //check that the relevant data is still required
                        UITableViewCell * correctCell = [self.tableView cellForRowAtIndexPath:indexPath];
                        //get the correct cell (it might have changed)
                        [[correctCell imageView] setImage:thumbnail];
                        [correctCell setNeedsLayout];
                    }
                });
            }
        });
    return cell;
    } 
```

如果您使用某种单例图像存储管理器，您会期望管理器处理缓存/数据库访问的细节，这简化了这个示例。

这部分

```
 UIImage* thumbnail = //get thumbnail from photo id dictionary (fastest)
            if (!thumbnail) {    //if it's not in the dictionary
                thumbnail =      //get it from the cache  (slower)
                                 // update the dictionary
                if (!thumbnail) {   //if it's not in the cache
                  thumbnail =       //fetch it from the (online?) database (slowest)
                                    // update cache and dictionary
                    }
                } 
```

将被替换为

```
 UIImage* thumbnail = [[ImageManager singleton] getImage]; 
```

（您不会使用完成块，因为当您返回主队列时，您实际上是在 GCD 中提供了一个完成块）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:34:55.520

我使用了一个名为[JMImageCache](https://github.com/jakemarsh/JMImageCache)的类将图像缓存到磁盘，然后只在 CoreData 中存储本地 URL（和远程 URL，如果你愿意的话）。您还可以生成一个缩略图，并将其保存到磁盘并将缩略图 URL 与图像 URL 一起存储在核心数据中，并在表视图中使用缩略图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-02T07:05:58.033

在核心数据中为图像添加一个 NSValueTransformer 的子类，

代码如下：

```
+ (BOOL)allowsReverseTransformation {
    return YES;
}
+ (Class)transformedValueClass {
    return [NSData class];
}
 - (id)transformedValue:(id)value {
    return UIImageJPEGRepresentation(value, 0.5);
 }
- (id)reverseTransformedValue:(id)value {
    return [[UIImage alloc] initWithData:value];
} 
```

# c++ - 用于查找 f(Xi) 最小值的索引的标准或增强算法

> ID：14623687
> 
> 赞同：2
> 
> 时间：2013-01-31T10:34:18.590
> 
> 标签：c++, algorithm, boost

我的问题如下：给定一个容器 X = {x [1] , x [2] , ...,x [n] } 和一个 function ，找到f(x [i] ) 达到最小值`f`的索引。`i`

当然，我可以从头开始实现它，但我有一种我发明了自行车的感觉，所以我正在寻找使用标准或增强算法的更短代码。我能得到的最好的是

```
template <typename Val>
Val f(Val)
{
.........
}

template <typename It>
It find_minimum(It begin, It end)
{
return std::min_element(begin, end, 
   [](typename It::value_type val1, typename It::value_type val2)
  {
  return f(val1) < f(val2);
  });
} 
```

但它存在`f`被评估 2N-1 次的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:48:52.403

就用这个算法（伪代码，没时间让模板正确）

```
It element= X.first()
Val min = f(element)
It min_el = element
while(element= element.next())
{
    Val temp = f(element);
    if( min > temp)
    {
        min_el = element;
        min = temp;
    }
}
return min_el 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T23:16:19.437

我能找到的简短答案使用 std::min_element 和 boost::transform_iterator：

```
return std::min_element(
  boost::make_transform_iterator(begin, f), 
  boost::make_transform_iterator(end, f)).base(); 
```

但是，它可能需要 2N-1 次函数调用，具体取决于 std::min_element 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:02:17.163

如果你知道 std::min_element 的实现，你可以使用带有状态*的*lambda

 `````
auto minElt = std::min_element(data.begin(), data.end(), [f](const int& a, const int& b)->bool
                               {
                                   static int minValCash = f(b);
                                   int v2 = f(a);
                                   bool result = v2 < minValCash;
                                   if(!result)
                                    std::swap(v2, minValCash);
                                   return result;
                               }); 
````  `* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T10:42:44.410

如何使用一个额外的步骤来计算和存储 all `f(x)`，然后寻找最小值？

另一种想法：迭代所有可能的 x 值并仅存储先前的最小值？``

# android - IntelliJ 上 Android 测试中源文件的 NoClassDefFoundError

> ID：14623692
> 
> 赞同：1
> 
> 时间：2013-01-31T10:34:29.667
> 
> 标签：android, intellij-idea, noclassdeffounderror, ormlite

**编辑**

经过更多调查，发现这个有*ant test*命令也不起作用，所以这不是 IntelliJ 的问题。

应用程序启动时有一些警告表明问题来自与 ormlite 框架的错误链接：

```
WARN/dalvikvm(22209)：类被意外的 DEX 解析：Lcom/example/android/app/noclassdef/module/dao/BaseBrowserDAO;(0x4051f5e8):0x98558 ref [Lcom/j256/ormlite/dao/Dao;] Lcom/j256 /ormlite/dao/Dao;(0x4051f5e8):0x97ec0

WARN/dalvikvm(22209)：（Lcom/example/android/app/noclassdef/module/dao/BaseBrowserDAO；在预验证期间使用了不同的 Lcom/j256/ormlite/dao/Dao；）

WARN/dalvikvm(22209): 类 'Lcom/example/android/app/noclassdef/module/dao/BaseBrowserDAO;' 的链接 失败的

```

但这仅发生在测试项目中，主项目没有问题。

我发现从 R17 开始，jar '真的' 需要在 libs 目录中，所以我想也许我应该将 jar 复制到测试项目 libs 目录中，但它没有改变任何东西。

**原来的**

我的 Android 测试项目无法在 Android 上运行，我收到以下错误：

```
java.lang.NoClassDefFoundError: com.mycompany.android.module.shop.database.MyDBHelper
在 com.mycompany.android.module.shop.dao.DAOFactory.(DAOFactory.java:51)
在 com.mycompany.android.module.shop.dao.DAOFactory.initSingleton(DAOFactory.java:58)
在 com.mycompany.android.app.shop.test.EShopBaseTestCase.setUp(EShopBaseTestCase.java:41)
在 android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
在 android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
在 android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)
在 android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1448)
引起：java.lang.ClassNotFoundException: com.mycompany.android.module.shop.database.MyDBHelper in loader dalvik.system.PathClassLoader[/system/framework/android.test.runner.jar:/data/app/com. mycompany.android.app.shop.test-1.apk:/mnt/asec/com.mycompany.android.app.shop-1/pkg.apk]
在 dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
在 java.lang.ClassLoader.loadClass(ClassLoader.java:551)
在 java.lang.ClassLoader.loadClass(ClassLoader.java:511)
... 12 更多

```

**测试在 Eclipse 上运行没有任何问题，所以我猜这是配置问题。**

**'missing' 类是 App 的源类，它不在 jar 中，也不在任何外部框架中。**

更让我困惑的是，查看堆栈跟踪 com.mycompany.android.module.shop.dao.DAOFactory 存在但不存在 com.mycompany.android.module.shop.database.MyDBHelper （它们在同一个项目中...... )

有人有想法吗？我已经坚持了一段时间了。这不是我第一次将测试项目与 IntelliJ 一起使用，所以我将我的配置与工作项目进行了比较，但我发现根本没有区别......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:17:41.927

好的，实际上重要的信息是

> [...] 使用了不同的 Lcom/j256/ormlite/dao/Dao；在预验证期间

这意味着我的 ormlite jars 在每个项目中复制而不是在主项目中正确导出。

只需检查 jar 上的“导出”复选框即可解决问题。

我得到了 FragmentActivity 的极大帮助，[无法通过 ActivityInstrumentationTestCase2 进行测试](https://stackoverflow.com/questions/5561353/fragmentactivity-can-not-be-tested-via-activityinstrumentationtestcase2)

# plugins - IncludePHP 插件在 joomla 1.5 中不起作用

> ID：14623694
> 
> 赞同：0
> 
> 时间：2013-01-31T10:34:42.837
> 
> 标签：plugins, joomla1.5

我在 joomla 中创建了一个网站，我使用 incudePHP 插件将 html 页面添加到内容中。它曾经完美地工作了很长时间.. 但现在我不知道为什么它显示代码：{htmlfile}tours/rafting.html{/htmlfile} 而不是该文件的内容。它看起来非常好，但它仍然不起作用！令人沮丧:(

知道可能出了什么问题吗？！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:22:56.243

对于任何对此问题感兴趣的人..这就是我所做的：显然这是插件的错！它只是不再起作用了，所以我改用了“DirectPHP 插件”，它就像魅力一样！我只需要将这段代码添加到我的所有链接中：“” ..内容显示得很好！:)

干杯

# xslt - 当我打印 sum 时，它会在 xsl 中打印 Nan

> ID：14623696
> 
> 赞同：0
> 
> 时间：2013-01-31T10:34:48.587
> 
> 标签：xslt

我试图打印总和，但它打印每个值的总和。我想得到总和。如何在 xsl 中使用全局变量

作为获取 sum 的示例，我们可以简单地写`sum = sum + value;`value 是我们得到的新值，而 sum 是已经存在的值。我注意到它总是在 xsl 中被覆盖。

这是我使用的代码

```
<xsl:template match="Top">
  <xsl:if test="position() &lt;= 10">

    <xsl:variable name="items"
             select="/TopHoldings/TopHoldingsEntry
             [@Type='Company Name||Co||Se||F Weight (%)||Benchmark weight (%)']
             [@Date='8/31/2011']" />

    <xsl:variable name="totalMarks" 
         select="format-number(substring(substring-after(@Value,'||||'),1,10),'#.#') + 
                 format-number(substring(substring-after(@Value,'||||'),1,10),'#.#')"/>
    <xsl:value-of select="$totalMarks" />

  </xsl:if>
</xsl:template> 
```

我在哪里做错了？xml代码

```
<TopHoldings Currency="xxx">
          <TopHoldingsEntry Type="CName||C||S||Fund Weight (%)||Benchmark weight (%)" Value="Ab||U||||1.2170000000000||" Date="8/31/2011" />
          <TopHoldingsEntry Type="CName||C||S||Fund Weight (%)||Benchmark weight (%)" Value="Acc||I||||1.2170000000000||" Date="7/31/2011" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:01:18.163

您正在考虑 sum=sum+value 的事实表明您正在尝试通过编写循环并更改变量的值来像在过程语言中那样执行此操作。好吧，XSLT 不是一种过程语言，因此您需要换一种方式思考。

在 XSLT 2.0 中，这很简单

```
format-number(
   sum(for $x in TopHoldingsEntry/@Type return number(substring-after('||||'))),
   ....) 
```

在 XSLT 1.0 中，这有点困难。我会使用“兄弟递归”来做到这一点：

```
<xsl:template match="TopHoldingsEntry">
  <xsl:param name="total" select="0"/>
  <xsl:choose>
    <xsl:when test="following-sibling::*">
      <xsl:apply-templates select="following-sibling::*[1]">
         <xsl:with-param name="total" select="$total + number(substring-after(....))"/>
      </xsl:apply-templates>
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$total"/>
    </xsl:otherwise>
  <xsl:choose>
</xsl:template> 
```

然后用`<xsl:apply-templates select="TopHoldingsEntry[1]"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:06:06.027

在格式化数字之前求和

```
<xsl:variable name="total">
    <xsl:value-of select="number(substring(substring-after(@Value,'||||'),1,10))+
       number(substring(substring-after(@Value,'||||'),1,10))"/>
</xsl:variable>
<xsl:variable name="totalMarks" select="format-number($total,1,10),'#.#')"/> 
```

# maven - 搜索maven项目中是否存在依赖项

> ID：14623697
> 
> 赞同：0
> 
> 时间：2013-01-31T10:34:51.087
> 
> 标签：maven, dependencies, pom.xml

对于我正在构建的脚本的一部分，我希望能够在 maven 项目中搜索某个依赖项。我已经查看`dependency`了 maven 的插件，但我找不到任何关于如何使用它的好教程，并且到目前为止使用它没有运气。

在 Maven 项目中搜索存在依赖项的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:45:27.750

最好的办法是使用[依赖插件](http://maven.apache.org/plugins/maven-dependency-plugin/examples/filtering-the-dependency-tree.html)本身，例如：

```
mvn dependency:tree -Dincludes=velocity:velocity 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:53:44.760

您可能希望将 maven 依赖插件与 shell 脚本结合使用。AFAIK 依赖插件不支持搜索特定工件。

这里有一个例子：

如果你跑`mvn org.apache.maven.plugins:maven-dependency-plugin:2.6:list`

输出可能类似于：

```
[INFO] The following files have been resolved:
[INFO]    junit:junit:jar:4.10:test
[INFO]    org.hamcrest:hamcrest-core:jar:1.1:test
[INFO]    commons-logging:commons-logging:jar:1.1.1:compile 
```

您将看到您的依赖项的完整列表。

现在，如果您在基于 linux 的系统上运行，您只需编写一个 bash 脚本来检查依赖项是否存在：

依赖存在=`mvn org.apache.maven.plugins:maven-dependency-plugin:2.6:list | grep "org.hamcrest:hamcrest"`

如果变量被填充，则依赖项存在，否则不存在。

# java - apache cxf 无法发送消息并读取超时

> ID：14623705
> 
> 赞同：18
> 
> 时间：2013-01-31T10:35:09.603
> 
> 标签：java, apache, timeout, cxf

可能是什么原因：

`org.apache.cxf.interceptor.Fault: Could not send Message.`

`Caused by: java.net.SocketTimeoutException: SocketTimeoutException invoking https://xxx.xxx.xxx.xxx:8443/services/test: Read timed out`

它通常发生在我向`ws`. 我正在使用`apache cxf`. 我完全确定它`ws`已启动并正在运行，因为在超时发生之前，客户端将再发送 2 个请求。超时发生在第三个肥皂请求中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-09-25T05:16:03.793

我的网络服务客户端也遇到了这个错误。对我有用的解决方案是在 CXF 配置文件 (cxf.xml) 中配置 http 客户端。

如[Apache CXF 文档](http://cxf.apache.org/docs/client-http-transport-including-ssl-support.html#ClientHTTPTransport%28includingSSLsupport%29-The%7B%7Bconduit%7D%7Delement)中所述：

1.添加http-conduit命名空间和xsd：

> ```
> <beans ...
>        xmlns:http-conf="http://cxf.apache.org/transports/http/configuration
>        ...
>        xsi:schemaLocation="...
>            http://cxf.apache.org/transports/http/configuration
>            http://cxf.apache.org/schemas/configuration/http-conf.xsd
>        ..."> 
> ```

2.添加 http-conduit 标记/元素并将 ReceiveTimeout/ConnectionTimeout 设置为 300000 毫秒：

> ```
> <http-conf:conduit name="*.http-conduit">
>       <http-conf:client 
>                       ConnectionTimeout="300000"
>                       ReceiveTimeout="300000"/>       
> </http-conf:conduit> 
> ```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-01T09:12:44.473

该错误消息意味着您的 Web 服务客户端试图通过网络从远程 Web 服务接收数据，但在特定时间段内没有收到数据，因此 Web 服务客户端停止等待接收数据。

可能的原因之一可能是`timeout`属性太低。默认分别为 30000 和 60000 毫秒的 cxf 默认值。这些可以根据您创建客户端的方式进行更改。

如果您使用 java 代码创建客户端，您可以使用：

```
//1 minute for connection
((BindingProvider) wsPort).getRequestContext().put("com.sun.xml.ws.connect.timeout", 1 * 60 * 1000); 

//3 minutes for request
((BindingProvider) wsPort).getRequestContext().put("com.sun.xml.ws.request.timeout", 3 * 60 * 1000); 
```

如果您使用的是 Spring，则可以使用如下映射：

```
<util:map id="jaxwsProperties">
    <entry key="com.sun.xml.internal.ws.request.timeout">
        <value type="java.lang.Integer">120000</value>
    </entry>
    <entry key="com.sun.xml.internal.ws.connect.timeout">
        <value type="java.lang.Integer">60000</value>
    </entry>
</util:map> 
```

然后将该地图设置到您的`<jaxws:client.../>`配置中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-02T13:22:37.643

配置超时的另一种方法（以编程方式）：

```
JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();
Object serviceClass = factory.create();
defineTimeouts(serviceClass);

static void defineTimeouts(Object serviceClass) {
    Client cxfClient = ClientProxy.getClient(serviceClass);
    HTTPConduit httpConduit = (HTTPConduit) cxfClient.getConduit();

    HTTPClientPolicy httpClientPolicy = new HTTPClientPolicy();
    httpClientPolicy.setConnectionTimeout(DEFAULT_CLIENT_CONNECTION_TIMEOUT);
    httpClientPolicy.setReceiveTimeout(DEFAULT_CLIENT_RECEIVE_TIMEOUT);
    httpConduit.setClient(httpClientPolicy);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-25T02:25:54.740

您可能希望从 Apache CXF src 更改 receiveTimeout 设置并替换服务器中现有的 cxf-rt-transports-http-version.jar。

简要说明：（从[Wildfly 8.2/undertow read time out](https://stackoverflow.com/questions/29303854/wildfly-8-2-undertow-read-time-out/29397727#29397727)获得说明）

1.  从apache下载CXF2.7.16 src
2.  将 maven/bin 添加到 PATH
3.  导出 MAVEN_OPTS=-Xmx512m 以修复 permgen 错误
4.  打开 ./rt/transports/http/src/main/resources/schemas/wsdl/http-conf.xsd 并将 ReceiveTimeout 从 60000 更改为例如所需的任何值。600000（10 分钟）
5.  运行 mvn -Pfastinstall
6.  从 ./rt/transports/http/target 文件夹中获取“已修补”的 cxf-rt-transports-http-2.7.16.jar
7.  替换服务器中的 cxf-rt-transports-http-2.7.16.jar。例如，对于 wildfly8.2，它位于 .//modules/system/layers/base/org/apache/cxf/impl/main 文件夹中，请记住更新同一文件夹中的 module.xml 以使用此修补的 cxf-rt -transsports-http-2.7.16.jar。

这应该解决由服务器中使用的底层 Apache CXF 引起的 SocketTimeoutException。

# javascript - CommonJS 中的内存泄漏

> ID：14623708
> 
> 赞同：1
> 
> 时间：2013-01-31T10:35:36.080
> 
> 标签：javascript, memory-leaks, commonjs

这是使用的JS代码：

```
//values stored in properties
    var CONFIG = (function() {
         var properties = {
             'property1': 'value1',
             'property2': 'value2'
         };

         return module.exports = {
            get: function(name) { return properties[name]; }
        };
    })(); 
```

这是我的配置全局对象，我正在以这种方式使用它作为我的其他文件。

```
var Model = (function() {   
    function checkData() {      
        var CONFIG = require('/library/utils/Constants');       
        Titanium.App.Properties.setString(CONFIG.get('property1'), "0");
        //Creating JsonClient
        var JsonClient = Titanium.Network.createHTTPClient();       
        JsonClient.onload = function() {
            Titanium.App.Properties.setString(CONFIG.get('property2'),'false');
        };
        JsonClient.onerror = function(e) {

        };
    };          
    return module.exports =  {
        checkData:checkData         
    }
})(); 
```

1.  我的模型类是否会导致内存泄漏，只是因为我在模型中使用了 CONFIG 对象？`JSON onload and Model Class.`
2.  如何跟踪内存泄漏或了解导致内存泄漏的原因？

# javascript - 在灯箱而不是弹出窗口中打开 FB.ui

> ID：14623712
> 
> 赞同：0
> 
> 时间：2013-01-31T10:35:49.637
> 
> 标签：javascript, facebook

我现在应该做什么：

```
FB.ui(
    {
        method: 'stream.share',
        display: 'iframe',
        u: url
    },
    function (response) {
        //console.log(response);
    }
); 
```

这正是我所需要的，但它会打开一个弹出窗口，而不是像窗口这样漂亮的灯箱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:34:42.463

使用方法`feed`而不是`stream.publish`. 示例代码：

```
var share = {
    method: "feed",
    name: "Lorem ipsum dolor sit amet!",
    link: "http://www.google.com/",
    picture: "http://placekitten.com/95/95",
    caption: "Claritas est etiam processus dynamicus.",
    description: "Claritas est etiam processus dynamicus, qui sequitur mutationem consuetudium lectorum. Mirum est notare quam littera gothica, quam nunc putamus parum claram."
};

FB.ui(share, function(response) {
    if (response && response.post_id) {
        console.log("Callback for FB share:", response);
    } else {
        console.log("Share was not made.");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T21:11:51.853

我有一个类似的问题。当你打电话`FB.init`一定要设置`status: true`。[在https://developers.facebook.com/docs/javascript/quickstart/v2.2](https://developers.facebook.com/docs/javascript/quickstart/v2.2)上有一些关于它的信息

设置`status: true`尝试在登录时获取有关用户的信息。我猜如果用户在调用它之前是已知的`FB.ui`，它将使用对话框而不是弹出窗口。我能够看到桌面应用程序的对话框，但不是我认为是设计使然的移动设备。

# xml - 如何选择节点属性为逗号分隔字符串（标记化）的所有节点

> ID：14623716
> 
> 赞同：1
> 
> 时间：2013-01-31T10:35:54.377
> 
> 标签：xml, xslt, xslt-2.0

在 php 中，我们这样做：

```
 $values =explode(',',"A,B,C,D");
 if(in_array($value,$values)){
  // Do sthing 
 } 
```

我们如何在 XSLT 中做类似的事情。我需要从 xml 文件中选择所有节点，该文件在 $commaSepartedString 中具有 @x 属性，该属性作为命令行参数提供

```
<xsl:for-each select="table[@name in $commaSeparatedString]">

</xsl:for-each> 
```

# 编辑

可选地，我想通过将默认值设置为参数来包括所有节点，例如

```
<xsl:param name="commaSeparatedString" select="'*'"/> 
```

所以像regx这样的东西似乎更合适

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:33:46.603

使用 XSLT 2.0，我也会使用`tokenize`，但随后进行简单的比较`=`就足够了，例如

```
<xsl:for-each select="table[@name = tokenize('A,B,C,D,E', ',')]">...</xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:47:13.230

你应该能够做到这一点：

```
<xsl:for-each 
   select="table[contains(concat(',', $commaSeparatedString, ','), 
                          concat(',', @name, ',')
                          )]">

</xsl:for-each> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T03:42:52.970

**使用 XSLT 2.0 使用**：

```
table[$commaSeparatedString eq '*'
     or @name = tokenize($commaSeparatedString, ',')
     ] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T12:00:47.030

如果您使用的是 XSLT2.0，则可以使用**tokenize**函数

```
<xsl:variable name="tokenizedValues" select="tokenize($values,',')"/> 
```

这会将逗号分隔的字符串拆分为值列表。然后，您可以通过检查列表中的**name**属性来查找**表**元素

 **```
<xsl:apply-templates select="table[index-of($tokenizedValues,@name)]"/> 
```

例如，考虑以下 XML

```
<tables>
<table name="A">1</table>
<table name="B">2</table>
<table name="C">3</table>
<table name="D">4</table>
<table name="E">5</table>
</tables> 
```

当您使用以下 XSLT

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="/*">
      <xsl:variable name="values">A,B,C,D</xsl:variable>
      <xsl:variable name="tokenizedValues" select="tokenize($values,',')"/>

      <xsl:apply-templates select="table[index-of($tokenizedValues,@name)]"/>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

然后输出如下

```
<table name="A">1</table>
<table name="B">2</table>
<table name="C">3</table>
<table name="D">4</table> 
```**

# hibernate - 休眠持久集未填充在一对多映射中

> ID：14623717
> 
> 赞同：3
> 
> 时间：2013-01-31T10:35:58.167
> 
> 标签：hibernate, hql, one-to-many

我正在尝试使用 Spring、Hibernate 和 JSF 创建一个用户管理系统。我创建了自己的用户类，它实现了 java.io.Serializable、org.springframework.security.core.userdetails.UserDetails 和 Roles 类。

**我的问题是 UserLoginDAOImpl 类的方法 loadUserByName(String name) 没有加载持久的角色集。**

我正在使用 Netbeans 7.3 beta IDE、Glassfish 服务器 3+ 作为 Web 服务器。

**这是调试快照。**[这是调试快照](http://www.flickr.com/photos/92753901@N07/8431485477/in/photostream)

**这是hbm查询的调试痕迹：**

```
INFO: Hibernate: select users0_.USERS_ID as USERS1_2_, users0_.USERS_USERNAME as USERS2_2_, users0_.USERS_PASSWORD as USERS3_2_, users0_.USERS_ENABLED as USERS4_2_, users0_.USERS_CREATED_DT as USERS5_2_, users0_.USERS_MODIFIED_DT as USERS6_2_, users0_.USERS_EMAIL as USERS7_2_ from ats.users users0_ where users0_.USERS_USERNAME='user'
INFO: Hibernate: select roleses0_.ROLES_USERNAME as ROLES2_1_, roleses0_.ROLES_ID as ROLES1_1_, roleses0_.ROLES_ID as ROLES1_1_0_, roleses0_.ROLES_USERNAME as ROLES2_1_0_, roleses0_.ROLES_ROLE_NAME as ROLES3_1_0_, roleses0_.ROLES_CREATED_DT as ROLES4_1_0_, roleses0_.ROLES_MODIFIED_DT as ROLES5_1_0_ from ats.roles roleses0_ where roleses0_.ROLES_USERNAME=? 
```

**用户和角色表架构：**

```
 CREATE TABLE `users` (
  `USERS_ID` int(11) NOT NULL AUTO_INCREMENT,
  `USERS_USERNAME` varchar(45) NOT NULL,
  `USERS_PASSWORD` varchar(255) NOT NULL,
  `USERS_ENABLED` varchar(5) NOT NULL,
  `USERS_CREATED_DT` varchar(45) NOT NULL,
  `USERS_MODIFIED_DT` varchar(45) DEFAULT NULL,
  `USERS_EMAIL` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`USERS_ID`),
  UNIQUE KEY `USERS_USERNAME_UNIQUE` (`USERS_USERNAME`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8$$

    CREATE TABLE `roles` (
  `ROLES_ID` int(11) NOT NULL AUTO_INCREMENT,
  `ROLES_USERNAME` varchar(45) NOT NULL,
  `ROLES_ROLE_NAME` varchar(45) NOT NULL,
  `ROLES_CREATED_DT` varchar(45) NOT NULL,
  `ROLES_MODIFIED_DT` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`ROLES_ID`),
  KEY `FK_ROLES_ID` (`ROLES_USERNAME`),
  CONSTRAINT `FK_ROLES_ID` FOREIGN KEY (`ROLES_USERNAME`) REFERENCES `users` (`USERS_USERNAME`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8$$ 
```

**这是我的 DAOImpl 类方法：**

```
 @Override
public Users loadUserByName(String name) {
    if (name != null && !name.equals("")) {
                Session session=hibernateTemplate.getSessionFactory().openSession();
                Transaction transaction=null;
                transaction=session.beginTransaction();

                 List<Users> user=session.createQuery("from Users where usersUsername='"+name+"'").list();

                   transaction.commit();
                    if (user.size() == 1) {

                     return user.get(0);
        } else {
            return null;
        }
    } else {
        return null;
    }
} 
```

**用户.hbl.xml**

```
<hibernate-mapping>
<class name="com.ats.customer.model.Users" table="users" catalog="ats">
    <id name="usersId" type="java.lang.Integer">
        <column name="USERS_ID" />
        <generator class="native" />
    </id>
    <property name="usersUsername" type="string">
        <column name="USERS_USERNAME" length="45" not-null="true" unique="true" />
    </property>
    <property name="usersPassword" type="string">
        <column name="USERS_PASSWORD" not-null="true" />
    </property>
    <property name="usersEnabled" type="string">
        <column name="USERS_ENABLED" length="5" not-null="true" />
    </property>
    <property name="usersCreatedDt" type="string">
        <column name="USERS_CREATED_DT" length="45" not-null="true" />
    </property>
    <property name="usersModifiedDt" type="string">
        <column name="USERS_MODIFIED_DT" length="45" />
    </property>
    <property name="usersEmail" type="string">
        <column name="USERS_EMAIL" length="50" />
    </property>
    <set name="roleses" table="roles" inverse="true" lazy="false" fetch="select">
        <key>
            <column name="ROLES_USERNAME" not-null="true" />
        </key>
        <one-to-many class="com.ats.customer.model.Roles" />
    </set>
</class>
  <sql-query name="getUserDetailsByUserNameProc">
<return alias="users" class="com.ats.customer.model.Users"/>
<![CDATA[CALL getUserDetailsByUserName(:username)]]>
</sql-query> 
```

**角色.hbl.xml**

```
<hibernate-mapping>
<class name="com.ats.customer.model.Roles" table="roles" catalog="ats">
    <id name="rolesId" type="java.lang.Integer">
        <column name="ROLES_ID" />
        <generator class="native" />
    </id>
    <many-to-one name="users" class="com.ats.customer.model.Users"  fetch="select">
        <column name="ROLES_USERNAME" not-null="true" />
    </many-to-one>
    <property name="rolesRoleName" type="string">
        <column name="ROLES_ROLE_NAME" length="45" not-null="true" />
    </property>
    <property name="rolesCreatedDt" type="string">
        <column name="ROLES_CREATED_DT" length="45" not-null="true" />
    </property>
    <property name="rolesModifiedDt" type="string">
        <column name="ROLES_MODIFIED_DT" length="45" />
    </property>
</class> 
```

**用户类：Users.java**

```
public class Users  implements java.io.Serializable,org.springframework.security.core.userdetails.UserDetails {

     private Integer usersId;
     private String usersUsername;
     private String usersPassword;
     private String usersEnabled;
     private String usersCreatedDt;
     private String usersModifiedDt;
     private String usersEmail;
     private Set<Roles> roleses = new HashSet();
     //private GrantedAuthority[] authorities = null;

    public Users() {
    }

    public Users(String usersUsername, String usersPassword, String usersEnabled, String usersCreatedDt) {
        this.usersUsername = usersUsername;
        this.usersPassword = usersPassword;
        this.usersEnabled = usersEnabled;
        this.usersCreatedDt = usersCreatedDt;
    }
    public Users(String usersUsername, String usersPassword, String usersEnabled, String usersCreatedDt, String usersModifiedDt, String usersEmail, Set<Roles> roleses) {
       this.usersUsername = usersUsername;
       this.usersPassword = usersPassword;
       this.usersEnabled = usersEnabled;
       this.usersCreatedDt = usersCreatedDt;
       this.usersModifiedDt = usersModifiedDt;
       this.usersEmail = usersEmail;
       this.roleses = roleses;
    }

    public Integer getUsersId() {
        return this.usersId;
    }

    public void setUsersId(Integer usersId) {
        this.usersId = usersId;
    }
    public String getUsersUsername() {
        return this.usersUsername;
    }

    public void setUsersUsername(String usersUsername) {
        this.usersUsername = usersUsername;
    }
    public String getUsersPassword() {
        return this.usersPassword;
    }

    public void setUsersPassword(String usersPassword) {
        this.usersPassword = usersPassword;
    }
    public String getUsersEnabled() {
        return this.usersEnabled;
    }

    public void setUsersEnabled(String usersEnabled) {
        this.usersEnabled = usersEnabled;
    }
    public String getUsersCreatedDt() {
        return this.usersCreatedDt;
    }

    public void setUsersCreatedDt(String usersCreatedDt) {
        this.usersCreatedDt = usersCreatedDt;
    }
    public String getUsersModifiedDt() {
        return this.usersModifiedDt;
    }

    public void setUsersModifiedDt(String usersModifiedDt) {
        this.usersModifiedDt = usersModifiedDt;
    }
    public String getUsersEmail() {
        return this.usersEmail;
    }

    public void setUsersEmail(String usersEmail) {
        this.usersEmail = usersEmail;
    }
    public Set<Roles> getRoleses() {
        return this.roleses;
    }

    public void setRoleses(Set<Roles> roleses) {
        this.roleses = roleses;
    }

    @Override
    public String getPassword() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public String getUsername() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public boolean isAccountNonExpired() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public boolean isAccountNonLocked() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public boolean isCredentialsNonExpired() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public boolean isEnabled() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }

    @Override
    public Collection<? extends GrantedAuthority> getAuthorities() {
        throw new UnsupportedOperationException("Not supported yet."); //To change body of generated methods, choose Tools | Templates.
    }
} 
```

**角色类：Roles.java**

```
public class Roles  implements java.io.Serializable {

     private Integer rolesId;
     private Users users;
     private String rolesRoleName;
     private String rolesCreatedDt;
     private String rolesModifiedDt;

    public Roles() {
    }

    public Roles(Users users, String rolesRoleName, String rolesCreatedDt) {
        this.users = users;
        this.rolesRoleName = rolesRoleName;
        this.rolesCreatedDt = rolesCreatedDt;
    }
    public Roles(Users users, String rolesRoleName, String rolesCreatedDt, String rolesModifiedDt) {
       this.users = users;
       this.rolesRoleName = rolesRoleName;
       this.rolesCreatedDt = rolesCreatedDt;
       this.rolesModifiedDt = rolesModifiedDt;
    }

    public Integer getRolesId() {
        return this.rolesId;
    }

    public void setRolesId(Integer rolesId) {
        this.rolesId = rolesId;
    }
    public Users getUsers() {
        return this.users;
    }

    public void setUsers(Users users) {
        this.users = users;
    }
    public String getRolesRoleName() {
        return this.rolesRoleName;
    }

    public void setRolesRoleName(String rolesRoleName) {
        this.rolesRoleName = rolesRoleName;
    }
    public String getRolesCreatedDt() {
        return this.rolesCreatedDt;
    }

    public void setRolesCreatedDt(String rolesCreatedDt) {
        this.rolesCreatedDt = rolesCreatedDt;
    }
    public String getRolesModifiedDt() {
        return this.rolesModifiedDt;
    }

    public void setRolesModifiedDt(String rolesModifiedDt) {
        this.rolesModifiedDt = rolesModifiedDt;
    }
} 
```

请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:41:55.280

在 Dao 类中尝试：

```
 List<Users> user=
     session.createQuery("from Users u where u.usersUsername= :username")
    .setParameter("username", name).list(); 
```

# klocwork - 使用 Klocwork 进行 .Net 静态代码分析

> ID：14623719
> 
> 赞同：0
> 
> 时间：2013-01-31T10:36:02.677
> 
> 标签：klocwork

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:32:53.493

Klockwork 不支持 VB.NET 而 Parasoft 支持，一般来说，Parasoft 是更好的 .NET 分析工具，具有更多的 .NET “检查器”和 Klockwork 所没有的动态分析功能。您需要将 Parasoft C++TEST 模块添加到您已经拥有的 dotTEST 模块中，然后您也可以检查 unmanged C++，在以前的版本中，dotTEST 支持托管 C++，但我不确定当前版本 9.5

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:12:49.650

Klocwork 当前（9.6 版）支持 .NET 的 C# 分析，最高支持 C# 3.0 规范。不支持 VB.NET、ASP.NET 和托管 C++。当前支持的 C# 检查器列表在这里： [http ://www.klocwork.com/products/documentation/current/C-sharp_checker_reference](http://www.klocwork.com/products/documentation/current/C-sharp_checker_reference)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-24T13:32:56.920

从 v. 6.00 开始 PVS-Studio 还支持 C# [http://www.viva64.com/en/b/0362/](http://www.viva64.com/en/b/0362/)。他们已经检查了 Roslyn 并发现了一些错误。

# java - 在构建之前编辑文件

> ID：14623721
> 
> 赞同：1
> 
> 时间：2013-01-31T10:36:11.010
> 
> 标签：java, maven, jenkins, jenkins-plugins

我在 Jenkins 有一份部署站点的工作。我希望这项工作能够使用另一个版本的依赖项临时构建以测试它是否有效。

为此，我有几个选择，

1.  我创建了我的主要项目的一个分支并设置了一个新的詹金斯工作
2.  我搜索允许我在“构建时间”编辑依赖项的 Maven 插件
3.  我搜索了一个 jenkins 插件，它允许我在“buildtime”之前编辑 pom.xml（或任何文件）。
4.  （搜索不成功后我在 Stack Overflow 上询问）

对我来说，能够在 Jenkins 构建中执行一些替换而无需更改版本控制系统中的任何内容似乎非常好。一个 maven 插件可能也不错，但是......它已经有点像 xml-hell 了，所以我宁愿尽量保持 pom.xml 尽可能薄。尤其是像这样的情况。

首选哪种方式？您可以推荐任何解决此类问题的现有插件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:51:08.370

拥有自己的分支将是一个好主意，因为您正在进行开发工作。如果你正在处理的事情没有成功，你可以随时删除分支。如果它确实有效，您可以随时将其合并回原始分支。

如果您使用正确的工具并遵循正确的原则，那么合并并不是什么大问题。

或者，您可以`<dependency>`在 a 中定义`<profile>`并使用 触发配置文件`mvn clean ... package -PmyProfile`。

我肯定会选择第一个选项，因为这更有意义并且更清洁。

# c# - MEF 2 无属性导入

> ID：14623724
> 
> 赞同：1
> 
> 时间：2013-01-31T10:36:18.837
> 
> 标签：c#, mef

我正在使用 MEF 2 开发一个应用程序。我想尝试无属性的插件设计方式，现在我试图弄清楚为什么我的一个对象似乎不满足其导入。下面是示例代码。

```
using System;
using System.ComponentModel.Composition;
using System.ComponentModel.Composition.Hosting;
using System.ComponentModel.Composition.Registration;
using System.Reflection;

namespace MEF2
{
    class Program
    {
        static void Main(string[] args)
        {
            var builder = new RegistrationBuilder();
            builder.ForType<ExporterClass>().Export<ExporterClass>();
            builder.ForType<ImporterClass>().Export().ImportProperties(p => p.Name == "Exporter");
            var catalog = new AssemblyCatalog(Assembly.GetExecutingAssembly(), builder);
            CompositionContainer container = new CompositionContainer(catalog);
            ImporterClass t = new ImporterClass();
            container.ComposeParts(t);
            t.ShowWalkers();
        }
    }

    public class ExporterClass
    {
        public void Write()
        {
            Console.WriteLine("Test");
        }
    }

    public class ImporterClass : IPartImportsSatisfiedNotification
    {
        //[Import]
        private ExporterClass Exporter { get; set; }

        public void ShowWalkers()
        {
            if (Exporter != null)
                Exporter.Write();
        }
        public void OnImportsSatisfied()
        {
            Console.WriteLine("IPartImportsSatisfiedNotification");
        }
    }
} 
```

`OnInputSatisfied`事件被触发，但 Exporter 属性仍然为空。如果我取消注释`[Import]`属性一切正常。

我应该怎么做才能导入没有属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T00:18:14.420

我不确定您是否可以将[CompositionContainer.ComposeParts](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.attributedmodelservices.composeparts.aspx)与 MEF 约定一起使用。我认为这仅适用于属性模型。

要使您的示例工作替换：

```
ImporterClass t = new ImporterClass();        
container.ComposeParts(t); 
```

和：

```
ImporterClass t = container.GetExportedValueOrDefault<ImporterClass>(); 
```

并将其更改`ImporterClass.Exporter`为`public`. `MEF Conventions`只允许在公共属性上导入。

# wpf - Using Hashtable as DataContext (for WPF/XAML Binding)

> ID：14623728
> 
> 赞同：3
> 
> 时间：2013-01-31T10:36:32.707
> 
> 标签：wpf, xaml, binding, hashtable, datacontext

In code I have a Hashtable named `MyHashtable`. This Hashtable contains an element with key=`"Value"`, value=`3`. I'm currently trying to bind this value to a textbox. This is my XAML code:

```
<TextBlock Margin="4" Text="{Binding MyHashtable[Value]}" />
<TextBlock Margin="4" DataContext="{Binding MyHashtable}" Text="{Binding [Value]}" /> 
```

**Q:** Why does the second binding not work, while the first binding works just great?

For the second binding I have tried other bindings for the text, such as: `Value`, `this[Value]` or even `Me[Value]`, but they all did not work.

* * *

Using `Item[Value]` gives me an interesting exception: `Parameter count mismatch.` ~~Does somebody understand this?~~ This is because of differences between C# and VB.NET. See [this question](https://stackoverflow.com/questions/14642503/binding-to-multiple-indexed-properties-in-net).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T22:21:36.557

对于第二个选项，您可以使用这个：

```
<TextBlock Margin="4" 
     DataContext="{Binding MyHashtable}" 
     Text="{Binding RelativeSource={x:Static RelativeSource.Self},
            Path=DataContext[Value]}" /> 
```

# python - 如何总结以下列表？

> ID：14623730
> 
> 赞同：0
> 
> 时间：2013-01-31T10:36:36.360
> 
> 标签：python, list

我有一个这样的列表：

```
a = ['1 MB', '2 MB'] 
```

我想总结 a 中的所有元素。

我想我首先必须创建整数列表并使用 sum() 函数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:38:57.507

使用内置`split`将数字与字符串的其余部分分开

```
>>> a = ['1 MB', '2 MB']
>>> sum([int(s.split(' ')[0]) for s in a])
3 
```

`s.split(' ')`创建列表`['1', 'MB']`

或者使用生成器表达式来避免列表推导创建的不需要的列表：

```
>>> a = ['1 MB', '2 MB']
>>> sum(int(s.split(' ')[0]) for s in a)
3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:39:31.767

假设所有元素都以 结尾`' MB'`，您可以这样做：

```
sum(map(int, (x[:-3] for x in a))) 
```

分解：

*   `(x[:-3] for x in a)`获取字符串的最后三个字符以外的所有字符。
*   `map(int, iterable)`将函数“映射”`int`到可迭代的每个元素。
*   `sum(iterable)`简单地将可迭代的元素相加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:41:28.227

你可以`regex`在这里使用：

```
In [19]: a = ['1 MB', '2 MB']

In [20]: sum(int(re.search(r'\d+',x).group()) for x in a)
Out[20]: 3 
```

where`re.search(r'\d+')`返回类似：

```
In [23]: [re.search(r'\d+',x).group() for x in a]
Out[23]: ['1', '2'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T11:31:27.383

这适用于不同的乘数：

```
import re
pattern = "(\d+)\s*(\w+)?"

a = ['1 MB', '2 MB', '3 K', '250' ]

multiplier = { None: 1, 'MB' : 1000000, 'K' : 1000 }

def multi(m):
    if m:
        return int(m.group(1)) * multiplier[m.group(2)]
    else:
        return 0

r = map(multi, [ re.search(pattern, x) for x in a])
print r

print sum(r) 
```

使用以下输出：

```
[1000000, 2000000, 3000, 250]
3003250 
```

# ios - UICollectionView Scroll particular column horizontally

> ID：14623731
> 
> 赞同：1
> 
> 时间：2013-01-31T10:36:37.450
> 
> 标签：ios, ipad, ios6, collectionview

I am using a `UIColectionView` in my app. I am using line layout that scroll column horizontally. I have multiple columns. I want columns that goes out of screen to be scrollable horizontally.

I have to make netflix or default ipad AppStore app like design.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T13:59:16.220

这不是集合视图的工作方式。

您必须使用一个表格视图，每个单元格都包含一个启用了水平滚动的滚动视图以及该单元格的所有内容。

# html - 在 HTML 中添加回车

> ID：14623732
> 
> 赞同：2
> 
> 时间：2013-01-31T10:36:39.960
> 
> 标签：html, grails

我需要每天向在我的页面中注册的人发送一封电子邮件（以 html 格式）。我使用 Grails 插件“邮件”来发送电子邮件。它发送没有问题。但是，邮件是在没有回车的情况下发送的，显然这会导致邮件几乎无法阅读。这是代码：

```
ArrayList users=User.findAllByRegistradaBetween(date-1,date)
String results="\r\n"
for (int i=0;i<users.size();i++){
results = results+users[i].mail+"\r\n"
mailService.sendMail {

    to  'destinationmail@gmail.com'
    from "sendermail@gmail.com"
    subject "A subject"
    html '<label>Users registered today: '+results+'</label></br>'
    } 
```

我尝试使用 \r\n ，但正如我所怀疑的那样，在 HTML 中不起作用。我怎样才能得到这样的东西？：

User1@mail.com

User2@mail.com

User3@mail.com

等等

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T10:39:15.017

您应该尝试使用 HTML 换行符`<br />`，电子邮件是 HTML，所以这应该可以正常工作。

`results = results+users[i].mail+"<br />"`

# raphael - raphael newbie：弹窗背景在跳跃

> ID：14623737
> 
> 赞同：1
> 
> 时间：2013-01-31T10:36:48.937
> 
> 标签：raphael, graphael

我尝试了以下代码 -

```
 var fin = function () {
   // this.flag = r.popup(this.bar.x, this.bar.y, this.bar.value || "0").insertBefore(this);
   this.flag = r.popup(this.bar.x, 280, this.bar.y || "0").insertBefore(this);
   };

  var fout = function () {
   this.flag.animate({opacity: 0}, 200, function () {this.remove();});
   };

. . .
r.barchart(10, 10, 900, 300, [[55, 20, 13, 32]], 0, {type: "sharp"}).hover(fin, fout); 
```

它在 raphael 示例页面中运行良好 - [http://g.raphaeljs.com/barchart2.html](http://g.raphaeljs.com/barchart2.html)

但在我的页面中，工具提示黑色背景是“跳跃”每个鼠标。[工具提示文本保持在正确的 x,y]

我使用了错误的库吗？我如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T16:22:09.610

这很令人费解。我不知道为什么会发生这种情况，但有一个更好的解决方案：为每个栏创建一次弹出窗口，然后在悬停/悬停时显示或隐藏它。

```
var r = Raphael(0, 0, 800, 500);

fin = function () {
    if (!this.hasOwnProperty("flag")) {
        this.flag = r.popup(this.bar.x, this.bar.y, this.bar.value || "0").insertBefore(this);
    }
    this.flag.attr("opacity", 1);
},
fout = function () {
    this.flag.animate({opacity: 0}, 300);
};

var bars = r.barchart(10, 10, 900, 300, [[55, 20, 13, 32]], 0, {type: "sharp"}).hover(fin, fout); 
```

[jsFiddle](http://jsfiddle.net/NfLWs/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T09:05:16.897

Raphael 2.1.2 似乎解决了这个问题

# graph - longest path in directed acyclic unweighted graph in linear time

> ID：14623738
> 
> 赞同：0
> 
> 时间：2013-01-31T10:36:56.560
> 
> 标签：graph, directed-acyclic-graphs

how can I find in linear time the longest path in a graph like this one:

3 -> 2

4 -> 3

2 -> 5

I know that the longest path here is 4 -> 3 -> 2 So it has 3 veticles but i dont know how to find it in O(N) time. Please help. thank you in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:54:32.990

对图进行顶部排序并按拓扑排序顺序选择顶点。

```
For each vertex u
    For each edge (u,v)
       if(d[v] < d[u] + weight(u,v))
          d[v] = d[u] + weight(u,v) 
```

其中，对于任何顶点 u，d[u] 是距源的最长距离。对于每个顶点 u，d[u] 被初始化为最小值并且 d[source]=0。

由于它是一个 DAG，因此我们只需要遍历和放松每个边一次。它基本上是简化了最长路径的贝尔曼福特算法。

# sharepoint-2007 - sharepoint 2007 search crawl

> ID：14623740
> 
> 赞同：0
> 
> 时间：2013-01-31T10:37:08.367
> 
> 标签：sharepoint-2007

My Problem is: I have sharepoint 2007 web application and windows server 2008 OS. I was doing search in sharepoint 2007 and it was working fine. Recently I've added a new website page but it didn't appear in the search result. I also looked up for it in the crawl log but I didn't find the page url.

[NEW INFO] when I switched to windows authentication everything was fine and the page was found in the search process.but switching back to form authentication will not make the webpage appear in the search result.

My Question is: how can I make the new page appear in the search result?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T13:51:42.547

在完全抓取或增量抓取完成之前，新创建的页面在搜索结果中不可用。.

您是否在创建页面后执行了爬网？

# php - user private photos system using mysql and php?

> ID：14623742
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:37:22.173
> 
> 标签：php, mysql

I have a site where users can request to see other users private photos. The whole system is set up using php and mysql.

The basic idea is that one user can request to see another's private photo collection. by default every user in the database is set to and enum value of 'o' and if they send a request to see pictures and the user accepts this their enum value changes to 1 and they can see the users private photos.

I have this working fine, however i have created a table called 'permissions' with three columns like so:

```
user_id     |     private_id     |   privilege 
   2                  4                  1
   5                  6                  0 
```

so by demonstration from the table above; user id 2 can now see user id 4's private pictures. However user id 5 can not see user id 6's photos.

Like i said the basic idea works but at the moment if a user doesn't have permission or an enum value of 1 then they're suppose to see template image(s) with a padlock.

At the moment only the users which are paired in this table can view the padlock images/template images.

so for instance if user_id = 2 and private_id = 1 - then user 2 will be able to see the padlock/template images.

But this is wrong because i want all users to be able to see the padlock images (when logged in) if they have an enum value of 0.

Can someone show me where i am going wrong? I have tried but i can't figure it out. thanks.

i think i should also mention that i have a table called 'users' which holds my main user_ids, with email, contact numbers etc, and the table 'permissions' user_id has just been setup as an additional table to manage the permissions, so this might need to = 'users.user_id' but I'm not too sure of this, because i am still learning mysql.

FUNCTION:

```
function account_perms() {
            global $connection;
            global $_SESSION;
            global $profile_id;
            $query = "SELECT ptb_permissions.user_id, ptb_permissions.private_id, ptb_permissions.privellages
                        FROM ptb_permissions
                        WHERE ptb_permissions.private_id = \"$profile_id\"
                        AND ptb_permissions.user_id = ".$_SESSION['user_id']." ";
            $account_perms = mysql_query($query, $connection);
            confirm_query($query, $connection);
            return $account_perms;
        } 
```

CODE:

```
 <div="tj_gallery">
<? if (logged_in()) { ?>
<?php include('includes/mod_profile/mod_photos/private.php'); ?>
<? } ?>  
</div> 
```

PRIVATE.PHP:

```
 <?php            
$photo = "data/private_photos/$profile[1]/pic1.jpg";
if (!file_exists($photo)) {
    $photo = "data/photos/0/_default.jpg";
}
$thumb = "data/private_photos/$profile[1]/thumb_pic1.jpg";
if (!file_exists($thumb)) {
    $thumb = "data/photos/0/_default.jpg";
}
 if (logged_in()) {
echo
"<li><a href=\"$photo\" rel=\"shadowbox\" title=\"<strong>$profile[2]'s Photo's</strong>\"><img src=\"$thumb\" width=\"90\" height=\"90\" alt=\"<strong>{$profile[2]}'s Photos</strong>\"  /></a></li>";

}
?>

<? } } ?>

<?

$account_perms = account_perms();

        while ($perms = mysql_fetch_array($account_perms)) {
             if ($perms['privellages'] == '0')  {

$photo = "data/private_photos/0/_default.jpg";
if (!file_exists($photo)) {
    $photo = "data/photos/0/_default.jpg";
}
$thumb = "data/private_photos/0/_default.jpg";
if (!file_exists($thumb)) {
    $thumb = "data/photos/0/_default.jpg";
}
 if (logged_in()) {
echo
"<li><a href=\"privileges.php\" rel=\"shadowbox;height=300;width=500\" title=\"<strong>Access Denied</strong>\"><img src=\"$thumb\" width=\"90\" height=\"90\" alt=\"<strong>{$profile[2]}'s Photos</strong>\"  /></a></li>";

 } 

?>

            <? } } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:53:42.647

您正在尝试在表中为默认状态添加一个条目。如果某人已获得许可，则仅添加一个条目可能会更容易（如果需要，您始终可以使用您的状态标志在其他地方或同一个表中记录被拒绝的请求）。

现在查找用户和收藏组合的记录，如果存在这样的记录，则用户具有权限并显示照片。否则进入默认状态并显示拒绝访问页面。

这样，您就可以避免当前的问题，即您没有未请求许可（因此未被拒绝或批准）的人的条目，并且您得到一个未处理的案例：没有挂锁图像出现。

# jquery - 为什么 setTimeout() 为 0 毫秒。影响我的功能

> ID：14623743
> 
> 赞同：3
> 
> 时间：2013-01-31T10:37:26.767
> 
> 标签：jquery, settimeout

在我的情况下，当悬停时`<div>`，在`<div>`

但是在某些 div 中，我想在悬停元素之后隐藏前置元素。

这是我的代码及其工作！

**HTML：**

```
<div class="one">
    <span class="content"></span>
</div>

<div class="two">
    <span class="content"></span>
</div> 
```

**jQuery :**

```
$("div.one > .content").on("hover" , function(){
    var this_ = $(this);
    this_.prev(".top").remove();
});

$("div.two > .content").on("hover" ,function(){
    var this_ = $(this);
    setTimeout(function(){this_.prev(".top").remove();})
}); 
```

`.one`两者`.two`都是相同的功能，但是我想知道为什么第二个功能在我使用时会影响`setTimeout()`并且时间为 0 毫秒，**为什么 0 毫秒会影响我的功能？**

**演示：http:** [//jsfiddle.net/nShCy/](http://jsfiddle.net/nShCy/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:47:10.473

不是 0 毫秒，而是[4 毫秒延迟](https://developer.mozilla.org/en/docs/DOM/window.setTimeout#Minimum_delay_and_timeout_nesting)。

答案很简单：mouseenter 在悬停后被触发，因此您试图删除尚不存在的元素。通过 4 毫秒的暂停和在 4 毫秒内完成的悬停回调，它按预期工作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-31T10:40:30.473

```
$(function(){

            $("div.one > .content").on("hover" , function(){
            var this_ = $(this);
            this_.prev(".top").remove();
        });

        $("div.two > .content").on("hover" ,function(){
            var this_ = $(this);
            setTimeout(function(){this_.prev(".top").remove();})
        });

}) 
```

# c# - Native Dynamic Linq (C#)

> ID：14623747
> 
> 赞同：3
> 
> 时间：2013-01-31T10:37:50.970
> 
> 标签：c#, dynamic

Is it possible to utilise the `dynamic` keyword in c# 5.0 (.Net 4.5) to create a dynamic LINQ query?

I know this is possible using third party libraries, but this is not viable right now.

The easiest way to illustrate my point is through an example:

```
 class test
    {
        public int i { get; set; }
    }

    void Foo()
    {
        var collection = new[] { new test() { i = 1 }, new test() { i = 2 } };
        Bar(collection);
    }

    void Bar<T>(IEnumerable<T> collection)
    {
        //this works
        foreach (dynamic item in collection)
            if (item.i == 2)
            {
                //do something
            }

        //this does not - although this is what id like to use
        foreach (dynamic item in collection.Where(a => a.i == 2))
        {
            //do something
        }
    } 
```

Edit per request: Produces a compiler error -

> 'T' does not contain a definition for 'i' and no extension method 'i' accepting a first argument of type 'T' could be found (are you missing a using directive or an assembly reference?)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:48:36.403

替换 T in Bar 声明以使用 dynamic ：

```
void Bar(IEnumerable<dynamic> collection)
{
    //this works
    foreach (dynamic item in collection)
        if (item.i == 2)
        {
            //do something
        }

    //this does compile
    foreach (dynamic item in collection.Where(a => a.i == 2))
    {
        //do something
    }
} 
```

# msbuild - Visual Studio - MSI Install project - Overwrite previous version

> ID：14623748
> 
> 赞同：0
> 
> 时间：2013-01-31T10:37:53.440
> 
> 标签：msbuild, windows-installer, versioning

I have an MSI installer project that installs a windows service.

For every release manually I have to change the Version number in the properties box.

`For Ex: 1.0.35.`

How do I change the same from the command line by passing a parameter instead of changing it in the solution file.

In the `.proj` file I use the following command to build by solution file.

`<Exec Command="&quot;C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe&quot; $(work_dir)\myproj\client\windows\msm32b\msm32b.sln /Build"/>`

This command packages the binaries such as `dll's`, `exe's`, `sys files` etc as a MSI file. Currently I am changing the Version number manually in the properties box. How do I change the version from the command line.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:32:23.300

我不确定这是否适用于 MSI 项目，或者该解决方案是否适合您，但可能值得研究：

如果您引用的版本号与程序集版本相同（可使用 property 访问`Application.ProductVersion`），您可以使其至少最后一部分在每次构建时自动递增。

打开文件`AssemblyInfo.cs`（`Properties`在解决方案资源管理器的文件夹下找到）。在该文件的底部，显示了版本号。它应该如下所示：

```
[assembly: AssemblyVersion("1.2.3.4")] 
```

如果你把它改成下面的，它的最后两部分会自动生成。

```
[assembly: AssemblyVersion("1.2.*")] 
```

# android - Reference a file stored in internal memory inside HTML of a webview

> ID：14623750
> 
> 赞同：0
> 
> 时间：2013-01-31T10:38:04.230
> 
> 标签：android, image, webview, storage, internal

I have a webview :

```
this.webview.loadUrl("file:///android_asset/html/test.html"); 
```

in test.html i would like to write this :

```
<img src="file:///data/data/com.myapp/myimage.jpg" /> 
```

I doesn't work for me so i found another topic saying i could use a contentProvider but i guess the purpose is different as i don't want to display only one image but i need references to images stored inside the interna memory to build a full designed HTML page ... is thre something i missed ? ( gotta try to root the device to check that the pictures are well written inside it).

Many thanks :)

# java - 使用Java验证WebDriver中DOB字段的闰年

> ID：14623752
> 
> 赞同：2
> 
> 时间：2013-01-31T10:38:07.793
> 
> 标签：java, webdriver, selenium-webdriver, testng, leap-year

我有一个文本字段，用于将出生日期（DOB）输入为“dd/mm/yyyy”格式。我喜欢使用 WebDriver 自动化测试，以检查该字段的闰年。我将 Java 和 TestNG 与 WebDriver (Selenium 2) 一起使用。我知道下面提到的闰年的公式/逻辑：

```
(year % 4 == 0 && year % 100 != 0) || year % 400 == 0) 
```

文本字段的 HTML 代码如下：

```
<input type="text" class="text-field" id="DOB" value="" name="field(DOB)"> 
```

我想验证特定年份范围内的闰年检查（例如 1900 - 2012 年）。我该如何为此设计和编写测试用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:45:04.217

以下 WebDriver Java 代码应该可以正常工作：

```
for(int year = 1900; year <= 2012; year++){
if((year % 4 == 0 && year % 100 != 0) || year % 400 == 0){
driver.findElement(By.id("DOB")).clear();
driver.findElement(By.id("DOB")).sendKeys("29/02/" + year);
}
} 
```

# apache-flex - 使用 Flex Mobile Project 打开 PDF

> ID：14623753
> 
> 赞同：0
> 
> 时间：2013-01-31T10:38:08.723
> 
> 标签：apache-flex, pdf, mobile, pdf-reader, flexpaper

我希望能够在 Flex 移动项目中阅读 PDF（我正在使用 Flash Builder 4.6 以及 Android 和 iPad）。

我已经成功尝试使用 stagewebview 从 Web 服务器加载 pdf：

```
webView = new StageWebView();

            webView.loadURL("http://<url>/Paper.pdf");

            webView.viewPort = new Rectangle(0, 100,this.stage.stageWidth, this.stage.stageHeight);
            webView.stage = this.stage; 
```

但我真正想要的是更直观的东西。我的意思是，您可以在其中创建翻书、转到第 X 页或类似内容。像这样的东西： [http ://devaldi.com/zine/NZ_Tourism_2007.php?ro=flash,html](http://devaldi.com/zine/NZ_Tourism_2007.php?ro=flash,html)

我已经尝试过 FlexPaper，但 Zine 不适用于 Flex Mobile Project。

你知道有什么办法吗？或者我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:44:43.830

最后，我使用了 FlexPaper，但没有将组件包含在 Flex 移动项目中，而是使用了他们的文档发布者，并在我的应用程序中加载了一个 url。

[http://flexpaper.devaldi.com/docs.htm](http://flexpaper.devaldi.com/docs.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:41:06.303

我找到了这个 Ane： [https ://github.com/memeller/vfrReaderNativeExtension](https://github.com/memeller/vfrReaderNativeExtension)

它只适用于 iOS 并且不是很“可视化”，但它是一些东西。

# iphone - 自定义注释上的按钮

> ID：14623755
> 
> 赞同：0
> 
> 时间：2013-01-31T10:38:20.480
> 
> 标签：iphone, xcode

我创建了一个自定义注释，右侧有一个按钮，左侧有一个标签。

它显示得很好，标签文本正在完美改变，但由于某种原因，当我单击按钮时它没有反应。我已将 IBAction 连接到它，它应该可以工作。但它只是不调用我的 IBAction。

有谁知道为什么这个按钮忽略了我的触摸？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:56:19.020

```
 (MKAnnotationView *)mapView:(MKMapView *)aMapView 
                  viewForAnnotation:(id)ann 
         { 

         NSString *identifier = @”myPin”; 
         MKPinAnnotationView *pin = (MKPinAnnotationView *) 
         [aMapView dequeueReusableAnnotationViewWithIdentifier:identifier]; 
         if (pin == nil) { 
              pin = [[[MKPinAnnotationView alloc] initWithAnnotation:ann 
                                                           reuseIdentifier:identifier] 
                      autorelease]; 
         } else { 
              pin.annotation = ann; 
         } 

         //---display a disclosure button on the right--- 
         UIButton *myDetailButton = 
         [UIButton buttonWithType:UIButtonTypeDetailDisclosure]; 
         myDetailButton.frame = CGRectMake(0, 0, 23, 23); 
         myDetailButton.contentVerticalAlignment = 
         UIControlContentVerticalAlignmentCenter; 
         myDetailButton.contentHorizontalAlignment = 
         UIControlContentHorizontalAlignmentCenter; 

         [myDetailButton addTarget:self 
                               action:@selector (checkButtonTapped:) 
                    forControlEvents:UIControlEventTouchUpInside]; 

         pin.rightCalloutAccessoryView = myDetailButton; 
         pin.enabled = YES; 
         pin.animatesDrop=TRUE; 
         pin.canShowCallout=YES; 

         return pin; 
    } 

    -(void) checkButtonTapped:(id) sender
      { 

       //---know which button was clicked; 
       // useful for multiple pins on the map--- 
       // UIControl *btnClicked = sender; 
       UIAlertView *alert = 
       [[UIAlertView alloc] initWithTitle:@”Your Current Location” 
                                       message :location 
                                      delegate:self 
                           cancelButtonTitle:@”OK” 
                           otherButtonTitles:nil]; 
       [alert show]; 
       [alert release]; 
       } 
```

我在我的项目中使用了这个代码，它对我来说很好，所以你可以试试这个。

# python - Download first N bytes of a file in python

> ID：14623762
> 
> 赞同：2
> 
> 时间：2013-01-31T10:38:51.330
> 
> 标签：python, http, ftp, download

I've got a large file somewhere (FTP/HTTP).

I want to

1.  Download first `N` bytes,
2.  Check its header which is embedded into the file (whether the version differs)
3.  Then decide whether to proceed with **or** abort the download.

It's definitely not such a straightforward task as I've imagined (to my surprise). Even calling `wget`/`curl` externally doesn't seem to be a good solution (Maybe I overlooked the right command line option).

How could this be done as simple as possible in Python?

I'm thinking about a custom handler for `ftp.retrbinary` which will raise an exception as soon as the sum of blocks will be above defined value, but it's overkill in my eyes. Python code is supposed to be elegant, right?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:41:26.610

如果您只想检查标头，请发送**[HTTP Head](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)**而不是 GET。它将返回与 GET 相同的标头，*没有消息正文。*

> HEAD 方法与 GET 相同，只是服务器不能在响应中返回消息体。响应 HEAD 请求的 HTTP 标头中包含的元信息应该与响应 GET 请求发送的信息相同。

HEAD 可以在[这里](https://stackoverflow.com/questions/107405/how-do-you-send-a-head-http-request-in-python)详细发送。

* * *

**编辑：**

如果确实需要前 N 个字节，则可以[`urllib2`](http://docs.python.org/2/library/urllib2.html)与[Range 标头结合使用。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35) `Range: bytes=0-N`.

# javascript - Tree View Checkbox Expand collapse

> ID：14623765
> 
> 赞同：0
> 
> 时间：2013-01-31T10:38:57.793
> 
> 标签：javascript, jquery

Am trying to add expand collapse effect , but its not working :(

```
Here is my fiddle 
```

[http://jsfiddle.net/Pervez/udc8f/6/](http://jsfiddle.net/Pervez/udc8f/6/)

EDIT:

I also want to place these 'li' side by side in two column

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:01:12.457

1.  你`id='chk_7''`有一个额外的`'`。您可以在 jsfiddle 语法突出显示中清楚地看到它。
2.  您最好将复选框包装在标签内（将使标签点击像复选框点击一样工作）
3.  它工作得更好一些，但只有当您单击`<li>`不是复选框时。

还有其他几个小错误，还有一些错误。您最好练习调试（即设置断点、单步执行代码等）。我将其更改为处理复选框点击和一些修复：http: [//jsfiddle.net/jjfaB/4/](http://jsfiddle.net/jjfaB/4/)。它仍然不完美，但您应该进行自己的调试...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:04:37.763

这是我为您制作的树视图的简单示例。它基本上向您展示了如何组织您的代码。如果你看不清楚，你怎么能操纵它。

超级简单的实现

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <meta charset="utf-8" />
      <title></title>
      <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
      <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
      <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>

      <script>
    $(document).ready(function(){
            $('.parent >ul').each(function(){ $(this).hide();});

            $('.parent >label').click(function(){

               $(this).parent().find('ul').each(function(){  
                  $(this).toggle();

               });
            });

    });
  </script>
</head>
<body>
<ul>
    <li class='parent'>
        <label value="*">*</label><input type="checkbox" value="" />
        <ul>
           <li><input type="checkbox" value="" class="child"/></li>
           <li><input type="checkbox" value="" class="child"/></li>
           <li><input type="checkbox" value="" class="child"/></li>
        </ul>
    </li>
    <li class='parent'>
        <label value="*">*</label><input type="checkbox" value="" />
        <ul>
            <li><input type="checkbox" value="" class="child"/></li>
            <li><input type="checkbox" value="" class="child"/></li>
        </ul>
    </li>
<ul>
</body>
</html> 
```

您可以增强到 n 级节点、动画、Id wise 检索、每个级别的不同颜色等等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-31T10:58:50.900

我在我的一个项目中使用了jstree。[http://luban.danse.us/jazzclub/javascripts/jquery/jsTree/reference/_examples/4_themes.html](http://luban.danse.us/jazzclub/javascripts/jquery/jsTree/reference/_examples/4_themes.html) ..检查它是否对你有帮助。

# java - 带有通配符参数的嵌套通用容器？

> ID：14623773
> 
> 赞同：0
> 
> 时间：2013-01-31T10:39:27.043
> 
> 标签：java, generics

为了理解 java 中的泛型，我编写了以下代码。

问题是 - 我应该如何参数化`myBox`以便它接受`FilterType <?> myFilterType`？

```
 public class Generics {

    /**
     * @param args
     */
    public static void main(String[] args) {

        Generics g = new Generics();
        Object myValue = "putThisIntoTheBox";

        FilterType<?> myFilterType3   = g.new FilterType<>(null); //works
        Box myBox3                      = g.create(myFilterType3, myValue); //fails - create won't accept myFilterType3
    }

    public <T> Box<T> create(FilterType<T> type, T value) {
        return new Box<T>(value);
    }

    //CLASSES

    public class FilterType<T>{
        T type;
        public FilterType(T type) {
            this.type = type;
        }
    }

    public class Box<T>{
        T value;
        public Box(T value) {
            this.value = value;
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:51:29.673

问题是该`create`方法需要一致的类型`FilterType<T> type`和`T value`参数。

这里的值被声明为一个`Object`实例，因此它期望类型 T 泛型也是一个 Object 实例。

声明`FilterType<Object> myFilterType3`解决了这个问题。

# facebook - 自定义 Facebook FOSFacebookBundle 登录按钮

> ID：14623778
> 
> 赞同：3
> 
> 时间：2013-01-31T10:39:36.833
> 
> 标签：facebook, symfony, fosuserbundle, fosfacebookbundle

有人知道如何自定义/更改 FosFacebook 登录按钮的图像吗？

```
{{ facebook_login_button({'autologoutlink': true}) }} 
```

并在整页 Facebook 登录上重定向，而不是在弹出窗口上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T12:12:51.163

这使用了一个 twig 助手并使用 facebook sdk js 渲染一个带有 '' 符号的模板。

如果您需要重定向到登录页面，请使用 html 链接，从 php facebook sdk 调用方法“getLoginUrl”

`'fos_facebook.api'`您可以通过 FOSFacebookBundle通过服务寄存器访问它

**更新了代码示例**

这是我用来登录 facebook 'frictionless' 的 javascript 代码

```
<script>
//scopes string stored as container parameter
var fb_scope='{{ facebook_scope }}';
//connected in sf2 app ?
{% if app.user %}
    var isLogged=true;
{% else %}
    var isLogged=false;
{% endif %}
//var to store fb status
var fb_connected = false;

function onFbInit() {

  if (typeof(FB) != 'undefined' && FB != null ) {

      // fetch the status on load
      FB.getLoginStatus(handleSessionResponse);

      //my facebook connect link
      $('a.facebook_connect').on('click', function(e) {
        FB.login(function(response) {
           if (response.authResponse) {
             checkAccount();
           } else {
              onAuthRefusal();
           }
         }, {scope: fb_scope});
        e.preventDefault();
      });
      //my logout link
      $('#logout').on('click', function(e) {
        FB.logout(null);
      });

      //want to distinguish three status states
      FB.Event.subscribe('auth.statusChange', handleSessionResponse);
  }
}

function handleSessionResponse(response) {
    if (response.status === 'connected') {
        // the user is logged in and has authenticated your
        // app, and response.authResponse supplies
        // the user's ID, a valid access token, a signed
        // request, and the time the access token
        // and signed request each expire
        var uid = response.authResponse.userID;
        var accessToken = response.authResponse.accessToken;
        var expiresIn = response.authResponse.expiresIn;

        //already logged in sf2 app
        if(!isLogged){
            checkAccount();
        }
        fb_connected = true;

      } else if (response.status === 'not_authorized') {
        // the user is logged in to Facebook,
        // but has not authenticated your app
         fb_connected = false;
      } else {
        // the user isn't logged in to Facebook.
          fb_connected = false;
      }
}

function checkAccount(){
   //route defined in your security.yml  ( check_path value in your fos_facebook firewall )
   top.location.href  = '{{ path('_security_check_facebook' ) }}';
}

function onAuthRefusal(){
 //message, special page ?
 console.log('refused authentification, message to display ?');
}

</script>

{{ facebook_initialize({'xfbml': true, 'fbAsyncInit': 'onFbInit();', 'frictionlessRequests' : 'true'} ) }} 
```

我还定义了一个重定向到 facebook auth 的路由（ /login/facebook ）

```
//controller action for /login/facebook pattern
function loginFacebookAction()
{
    //get facebook api service registered by FacebookBundle
    $api = $this->container->get('fos_facebook.api');
    //get scope provided in url or default
    $scope = $this->container->get('request')->get('scope', 'publish_stream');
    //generate call url that use facebook check_path (used by FacebookBundle for authentification)
    $callback = $this->container->get('router')->generate('_security_check_facebook',array(), true);
    $redirect_url = $api->getLoginUrl(array('scope' => $scope, 'redirect_uri' => $callback));

    return new RedirectResponse($redirect_url);
} 
```

就是这样！

# django - 访问api页面时发送通知

> ID：14623779
> 
> 赞同：1
> 
> 时间：2013-01-31T10:39:37.477
> 
> 标签：django, rest, tastypie

当用户向图像添加评论时，
包括图像作者在内的一些用户会通过推送通知得到通知。

我让它在常规视图中工作。
现在我采用了美味的框架，并转换了这个视图。

```
class CommentResource(ModelResource):

..
   def obj_create(....):
        #send notifications
        #actually create the comment object 
```

在 API 中感觉很奇怪`sending notifications`，所以我问这是否是一种很好的做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T02:37:40.530

你是对的，尽管这可行，但它可能不是最理想的。可能更好的是使用信号将 API 和通知解耦（这里是[有关信号的 Django 文档](https://docs.djangoproject.com/en/dev/topics/signals/)）

主要好处是将通知代码与 API 代码分离。信号侦听器不关心评论的创建者、方式或位置，它只是根据评论已创建这一事实而采取行动。同样适用于 API（信号发送器）。这允许您在不更改 API 的情况下更改通知代码，反之亦然。当然，这样代码也更简单、更干净——例如，如果你决定对评论做更多的事情，你只需添加更多的侦听器，而不是用更多与 API 本身无关的特性来膨胀你的 API 代码并使其更难维护。

您可以更进一步，开发一个异步版本（Django 信号是同步的，这意味着当您发送信号时，处理会被阻塞，直到信号侦听器完成）。这也很好，因为在发送信号后，您的 API 请求处理代码可以完成而无需等待发送通知。从消费者的角度来看，这将使 API 响应更快。这可以通过多种方式完成 - 使用线程、Celery 或 Greenlet/Gevent，如果您有兴趣，google 是您的朋友。

异步是否真正适合取决于您的确切要求，即您可能实际上对同步发送信号感兴趣，因为通知可能对您非常重要，即使它们使 API 响应变慢。

希望这会让你继续前进:) 祝你好运！

# cocoa - Mac OS X / Cocoa - 在 Retina 显示器上禁用 WebView 图像缩放

> ID：14623783
> 
> 赞同：0
> 
> 时间：2013-01-31T10:40:03.050
> 
> 标签：cocoa, webview, scaling, retina-display

我在我的 Cocoa/OS X 应用程序中使用 WebView 控件来显示屏幕截图。我只是将 JPEG 图像作为文档直接加载到 WebView 中。它适用于非 Retina 屏幕，但在 HiDPI 模式下，WebView 会自动放大加载的图像，这不是我需要的。我只需要按原样逐个像素地显示它。我花了半天时间在网上搜索如何轻松更改 WebView 行为，但由于某种原因没有成功。

# vba - 每次更新 Excel 单元格时调用 VBA 方法

> ID：14623792
> 
> 赞同：0
> 
> 时间：2013-01-31T10:40:31.983
> 
> 标签：vba, excel

我正在研究 Excel 和 VBA 中的交易算法。Excel 文档中的一个单元格会从交易者客户端更新剩余时间。每次该单元格更改其值时，我都想调用一个方法。这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:58:33.303

请参阅此页面上的解决方案：

[在单元格更改时自动执行 Excel 宏](https://stackoverflow.com/questions/409434/automatically-execute-an-excel-macro-on-a-cell-change)

要在单元格 A1 更改时触发事件，

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Intersect(Target, Target.Worksheet.Range("A1")) Is Nothing Then Macro
End Sub 
```

# android - Android 中的 Google 云端硬盘即服务

> ID：14623793
> 
> 赞同：1
> 
> 时间：2013-01-31T10:40:32.967
> 
> 标签：android, google-drive-api

我正在尝试通过谷歌驱动器中的某些服务将一些文件上传到谷歌驱动器到我的应用程序的多个用户的特定谷歌帐户。我该怎么做。

```
private void UploadToDrive(final String  filename){
     final GoogleAccountCredential credential;
     credential = GoogleAccountCredential.usingOAuth2(this, DriveScopes.DRIVE);

     Thread t = new Thread(new Runnable() {
          @Override
          public void run() {
             Drive service = new Drive.Builder(AndroidHttp.newCompatibleTransport(), new GsonFactory(), credential)
             .build();
             try {
              // File's binary content
              java.io.File fileContent = new java.io.File(filename);
              FileContent mediaContent = new FileContent("application/xml", fileContent);
              com.google.api.services.drive.model.File body = new com.google.api.services.drive.model.File();
              body.setTitle(fileContent.getName());
              body.setMimeType("application/xml");
            //  Log.v("GoogleVideo1",fileUri.getPath());    
              com.google.api.services.drive.model.File file = service.files().insert(body, mediaContent).execute();
         //     Log.v("GoogleVideo2",fileUri.getPath());
              if (file != null) {
              //  showToast("Photo uploaded: " + file.getTitle());
           //     startCameraIntent();
              }
            } catch (UserRecoverableAuthIOException e) {
                Log.v(TAG,"rECOVERABLE AUTH");
                e.printStackTrace();
//            startActivityForResult(e.getIntent(), 1);
            } catch (IOException e) {
             // Log.e("GoogleVideo",fileUri.getPath());
              System.out.println("HIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIIII");
              e.printStackTrace();
            }
          }
        });
        t.start();

 } 
```

但是当我执行服务的execute（）时，我得到了这个错误：

```
01-31 16:03:17.975: I/dalvikvm(23567): Could not find method com.google.android.gms.auth.GoogleAuthUtil.invalidateToken, referenced from method com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential$RequestHandler.handleResponse
01-31 16:03:17.975: W/dalvikvm(23567): VFY: unable to resolve static method 1536: Lcom/google/android/gms/auth/GoogleAuthUtil;.invalidateToken (Landroid/content/Context;Ljava/lang/String;)V
01-31 16:03:17.975: D/dalvikvm(23567): VFY: replacing opcode 0x71 at 0x0015
01-31 16:03:17.975: W/dalvikvm(23567): VFY: unable to resolve exception class 143 (Lcom/google/android/gms/auth/GooglePlayServicesAvailabilityException;)
01-31 16:03:17.975: W/dalvikvm(23567): VFY: unable to find exception handler at addr 0x25
01-31 16:03:17.975: W/dalvikvm(23567): VFY:  rejected Lcom/google/api/client/googleapis/extensions/android/gms/auth/GoogleAccountCredential$RequestHandler;.intercept (Lcom/google/api/client/http/HttpRequest;)V
01-31 16:03:17.975: W/dalvikvm(23567): VFY:  rejecting opcode 0x0d at 0x0025
01-31 16:03:17.980: W/dalvikvm(23567): VFY:  rejected Lcom/google/api/client/googleapis/extensions/android/gms/auth/GoogleAccountCredential$RequestHandler;.intercept (Lcom/google/api/client/http/HttpRequest;)V
01-31 16:03:17.980: W/dalvikvm(23567): Verifier rejected class Lcom/google/api/client/googleapis/extensions/android/gms/auth/GoogleAccountCredential$RequestHandler;
01-31 16:03:17.980: W/dalvikvm(23567): threadid=11: thread exiting with uncaught exception (group=0x40fc92a0)
01-31 16:03:17.995: E/AndroidRuntime(23567): FATAL EXCEPTION: Thread-2472
01-31 16:03:17.995: E/AndroidRuntime(23567): java.lang.VerifyError: com/google/api/client/googleapis/extensions/android/gms/auth/GoogleAccountCredential$RequestHandler
01-31 16:03:17.995: E/AndroidRuntime(23567):    at com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential.initialize(GoogleAccountCredential.java:124)
01-31 16:03:17.995: E/AndroidRuntime(23567):    at com.google.api.client.http.HttpRequestFactory.buildRequest(HttpRequestFactory.java:109)
01-31 16:03:17.995: E/AndroidRuntime(23567):    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:404)
01-31 16:03:17.995: E/AndroidRuntime(23567):    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
01-31 16:03:17.995: E/AndroidRuntime(23567):    at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449)
01-31 16:03:17.995: E/AndroidRuntime(23567):    at com.example.googledrivetest.LocationService$1.run(LocationService.java:183)
01-31 16:03:17.995: E/AndroidRuntime(23567):    at java.lang.Thread.run(Thread.java:856)
01-31 16:03:18.025: I/Process(23567): Sending signal. PID: 23567 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:30:28.053

在我看来，运行示例代码所需的依赖项似乎存在问题：

```
01-31 16:03:17.975: I/dalvikvm(23567): Could not find method com.google.android.gms.auth.GoogleAuthUtil.invalidateToken, referenced from method com.google.api.client.googleapis.extensions.android.gms.auth.GoogleAccountCredential$RequestHandler.handleResponse 
```

您是否包含了所有必需的依赖项？Google Drive 快速入门页面说您需要包含`google-play-services.jar`作为依赖 [项 https://developers.google.com/drive/quickstart-android#step_3_create_and_configure_an_android_project](https://developers.google.com/drive/quickstart-android#step_3_create_and_configure_an_android_project)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T19:55:27.137

*   您需要将`google-play-service` **库项目**（不仅仅是 jar）作为依赖项

**和**

*   在 google-play-services 项目中添加`lib/google-play-services.jar`到构建路径。
*   导出那个罐子。右键单击 > 构建路径 > 配置构建路径... Order and Export 选项卡 > 检查`google-play-services.jar`
*   清理两个项目

启动您的项目，现在应该可以了。

# asp.net - 如何在线查看、编辑和附加签名到放置在 Windows azure 存储中的文档

> ID：14623799
> 
> 赞同：1
> 
> 时间：2013-01-31T10:40:55.627
> 
> 标签：asp.net, azure, azure-storage, azure-blob-storage

我有一个示例应用程序，其中客户端 A 将一些示例文档上传到 Windows azure 存储，我想构建一个用户界面，客户端 B 在其中查看、编辑并将签名附加到文档并通知客户端 A，他们是否有任何内置文档查看编辑windows azure 提供的工具还是我应该编写帮助应用程序来实现此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:01:31.083

不，Windows Azure 不为您提供文档查看/编辑工具。我建议您看一下支持 Windows Azure（Blob 存储）的商业查看器/编辑器。以 Telerik 的 RadEditor 为例：

![在此处输入图像描述](../Images/11d6fb5e0daad7e59e2e2edce71482b5.png)

*   [内容提供程序示例](http://demos.telerik.com/aspnet-ajax/editor/examples/dbfilebrowsercontentprovider/defaultcs.aspx)
*   [Telerik 文件浏览器的 Azure 内容提供程序](http://azuretelerik.codeplex.com/releases/view/60657)

注意：此编辑器专注于 HTML，因此您可能需要检查将文档从/转换为 HTML 是否容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:48:54.950

您的问题陈述没有开箱即用的解决方案。您需要构建一个合适的基于 Web 或基于桌面的应用程序。

查看、编辑、操作等任务将通过访问 Blob 的 API 来完成，对于通知和东西，我建议你使用 Azure Queue。

实现：当用户 A 编辑 Blob-A 必须通知用户 B 时，为用户 B 设置一个队列并将一条消息加入队列`USER-A edited Blob-A`。当用户 B 登录时，只需从用户 B 的队列中读出所有消息。

# mysql - 检查mysql字段是否存在，如果不存在则创建

> ID：14623802
> 
> 赞同：0
> 
> 时间：2013-01-31T10:41:02.210
> 
> 标签：mysql, field, alter

我正在实施 geonames 网络服务，如下所示：

```
$( "#loc_from" ).autocomplete({
    source: function( request, response ) {
        $.ajax({
            url: "http://ws.geonames.org/searchJSON",
            dataType: "jsonp",
            data: {
                featureClass: "P",
                style: "full",
                maxRows: 12,
                name_startsWith: request.term,
                searchlang: 'ES'
            },
            success: function( data ) {
                response( $.map( data.geonames, function( item ) {
                    item.label = item.name + (item.adminName1 ? ", " + item.adminName1 : "") + ", " + item.countryName;
                    return item;
                }));
            }
        });
    },
    minLength: 2,
    select: function( event, ui ) {
         ui.item.task = 'new_city';
         $.post('/includes/router.php', ui.item , function(){

         });
         $('#id_loc').val(ui.item.gid);
         //alert(ui.item.gid);
    }
}); 
```

在 router.php 我有：

```
case 'new_city':
    /* comprobar si exite */
    $query = "SELECT geonameid FROM geonames";
    if(count(cache_query($query))>0){
        /* Its already in my database */
    }else{
        foreach ($_POST as $key => $value) {
                    check_field($key);
            echo $key.': '.$value.'<br>';
        }
    }
    /* si no existe, dar de alta*/
    break; 
```

因此，我希望该函数`check_field($key)`检查 geonames.$key 字段是否存在并更改表并添加它。

那可能吗？（另外，你推荐这个吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:52:40.827

我想你正在寻找这个

```
SELECT * 
FROM information_schema.COLUMNS 
WHERE TABLE_SCHEMA = 'db_name' 
AND TABLE_NAME = 'geonames' 
AND COLUMN_NAME = 'column_name' 
```

从 PHP 你可以做到这一点

```
function add_column_if_not_exist($db, $column, $column_attr = "VARCHAR( 255 ) NULL" ){
    $exists = false;
    $columns = mysql_query("show columns from $db");
    while($c = mysql_fetch_assoc($columns)){
        if($c['Field'] == $column){
            $exists = true;
            break;
        }
    }      
    if(!$exists){
        mysql_query("ALTER TABLE `$db` ADD `$column`  $column_attr");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:22:49.960

回答您的一个问题：动态扩展表从来都不是一个好主意恕我直言。

保持表静态的一个好方法是使用查找表。

例如：

表 1 包含以下字段：

```
id, name 
```

表 2 包含以下字段：

```
id, name_of_dynamically_added_item 
```

查找表如下所示：

```
id, id_table1, id_table2 
```

您可以向 table2 添加一行，而不是向任何表添加列。对于应该链接到 table1 中的一行的每个项目，您可以向查找表添加一行。

这样，您将永远不会创建包含不可预见数量的列的表。此外，您不会有大部分填充为 NULL 值的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T06:22:02.247

```
$sql= "SELECT * FROM users WHERE id='1'";
$query = mysqli_query($conn, $sql);
$row=mysqli_fetch_array($query, MYSQL_ASSOC);
if($row['id']=="" || NULL){
echo "id=5 do not exits";
//then create one
}
else{
echo "user exist";
} 
```

# android - 删除通知栏但不删除操作栏

> ID：14623805
> 
> 赞同：2
> 
> 时间：2013-01-31T10:41:09.750
> 
> 标签：android, android-actionbar

**有没有办法在不显示通知栏**（时钟、电池等）的情况下实现 ActionBar ？如果我设置`"@android:style/Theme.NoTitleBar.Fullscreen"`我无法使用 获取 ActionBar `getActionBar`，并且如果我使用该`requestFeature(Window.FEATURE_ACTION_BAR)`功能我会收到错误消息。

你能帮我么？

# php - 从 foreach 获取值

> ID：14623806
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:41:12.120
> 
> 标签：php, foreach-loop-container

我的代码是由我们组织中的前一位开发人员编写的，上面写着：

```
< ?php
foreach($response as $key => $value) {
?>      

<tr>

<td><?php echo $key; ?></td>
<td><?php echo $value; ?></td>
</tr>

<?php

}

?> 
```

我对 php 很陌生，我不知道如何从上面的代码中获取 $key[1]...$key[20] 和 $value[1]...$value[20] 的值，因为上面代码写入 20 行值

我不知道我是否能够正确地在你面前表达这个代码问题。对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:51:57.123

```
< ?php
$keysarray = array();
$valuesarray = array();
int i = 0;
foreach($response as $key => $value) {
?>      

<tr>

<td><?php $keysarray[i]= $key; echo $key; ?></td>
<td><?php $valuesarray[i]= $value; echo $value; ?></td>
</tr>

<?php
i++;
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:59:24.953

如果你的数组`$response`是`array("Peter"=>"35","Ben"=>"37","Joe"=>"43");`那么，

```
<?php

$response= array("Peter"=>"35","Ben"=>"37","Joe"=>"43");

foreach($response as $key => $value) {
?>      

<tr>

<td><?php echo $key; ?></td>
<td><?php echo $value; ?></td>
</tr>

<?php

} 
```

将输出，

```
Peter 35 
Ben 37 
Joe 43 
```

如果`$response`是`array("35","37","43");`

然后它会输出，

```
0 35 
1 37 
2 43 
```

在第一种情况下，密钥将如您所给。它被称为`Associative Arrays`. 其次，keys 将默认从 0 开始。它是`Numeric arrays`. 没什么大不了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:53:15.840

foreach 循环的整个想法是，您不需要访问数组中的各种索引。

在您的示例中， $response 是一个数组。

在每次迭代期间，数组的键/索引分配给 $key，值分配给 $value。

例如。

```
$response = array('hello', 'goodbye');
// which is essentially the same as:
$response = array(0 => 'hello', 1 => 'goodbye'); 
```

在 foreach 循环的第一次迭代期间：

```
// first item in the array has an index of 0 and value of 'hello'
$key == 0;
$value == 'hello'; 
```

在第二阶段：

```
$key == 1;
$value == 'goodbye'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T10:49:21.430

据我了解您的问题，您想要数字索引..？

```
$key = array_keys($response);
$value = array_values($response); 
```

然后你可以使用

> $key[1]...$key[20] & $value[1]...$value[20]

# google-app-engine - popupPanel 不显示在 Rich:dataTable 中

> ID：14623813
> 
> 赞同：0
> 
> 时间：2013-01-31T10:41:37.627
> 
> 标签：google-app-engine, datatable, richfaces, popuppanel

基于以下样本：

[http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=dataTable&sample=dataTableEdit&skin=blueSky](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=dataTable&sample=dataTableEdit&skin=blueSky)

我对 xhtml 页面和 CarBean 做了一些修改，以包含一个按钮来显示结果。结果按预期显示，但弹出面板不起作用（即没有弹出）。

我使用的软件版本：

Richface 4.3.0最终GAE 1.7.2

注意：它在我的本地笔记本上运行良好，并且上述问题在在线部署时适用。

这里是在线网址 [http://cloudenterpriseapps.appspot.com/public/test/testPopup5.jsf](http://cloudenterpriseapps.appspot.com/public/test/testPopup5.jsf)

有什么帮助吗？

[CarsBean.java] 包test.faces.bean；

```
import java.io.Serializable;
import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.Iterator;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.bean.ViewScoped;
import javax.faces.event.ValueChangeEvent;
import javax.faces.model.SelectItem;

import org.richfaces.demo.common.data.RandomHelper;
import org.richfaces.demo.tables.model.cars.InventoryItem;
import org.richfaces.demo.tables.model.cars.InventoryVendorItem;
import org.richfaces.demo.tables.model.cars.InventoryVendorList;

@ManagedBean(name = "carsBean2")
@SessionScoped
public class CarsBean2 implements Serializable {
   /**
    *
    */
   private static final long serialVersionUID = -3832235132261771583L;
   private static final int DECIMALS = 1;
   private static final int CLIENT_ROWS_IN_AJAX_MODE = 15;
   private static final int ROUNDING_MODE = BigDecimal.ROUND_HALF_UP;
   private List<InventoryItem> allInventoryItems = null;
   private List<InventoryVendorList> inventoryVendorLists = null;
   private int currentCarIndex;
   private InventoryItem editedCar;
   private int page = 1;

   private int clientRows;

   public void switchAjaxLoading(ValueChangeEvent event) {
       this.clientRows = (Boolean) event.getNewValue() ? CLIENT_ROWS_IN_AJAX_MODE : 0;
   }

   public void remove() {
       allInventoryItems.remove(allInventoryItems.get(currentCarIndex));
   }

   public void store() {      
       allInventoryItems.set(currentCarIndex, editedCar);
   }

   public List<SelectItem> getVendorOptions() {
       List<SelectItem> result = new ArrayList<SelectItem>();
       result.add(new SelectItem("", ""));
       for (InventoryVendorList vendorList : getInventoryVendorLists()) {
           result.add(new SelectItem(vendorList.getVendor()));
       }
       return result;
   }

   public List<String> getAllVendors() {
       List<String> result = new ArrayList<String>();
       for (InventoryVendorList vendorList : getInventoryVendorLists()) {
           result.add(vendorList.getVendor());
       }
       return result;
   }

   public List<InventoryVendorList> getInventoryVendorLists() {
       synchronized (this) {
           if (inventoryVendorLists == null) {
               inventoryVendorLists = new ArrayList<InventoryVendorList>();
               List<InventoryItem> inventoryItems = getAllInventoryItems();

               Collections.sort(inventoryItems, new Comparator<InventoryItem>() {
                   public int compare(InventoryItem o1, InventoryItem o2) {
                       return o1.getVendor().compareTo(o2.getVendor());
                   }
               });
               Iterator<InventoryItem> iterator = inventoryItems.iterator();
               InventoryVendorList vendorList = new InventoryVendorList();
               vendorList.setVendor(inventoryItems.get(0).getVendor());
               while (iterator.hasNext()) {
                   InventoryItem item = iterator.next();
                   InventoryVendorItem newItem = new InventoryVendorItem();
                   itemToVendorItem(item, newItem);
                   if (!item.getVendor().equals(vendorList.getVendor())) {
                       inventoryVendorLists.add(vendorList);
                       vendorList = new InventoryVendorList();
                       vendorList.setVendor(item.getVendor());
                   }
                   vendorList.getVendorItems().add(newItem);
               }
               inventoryVendorLists.add(vendorList);
           }
       }
       return inventoryVendorLists;
   }

   private void itemToVendorItem(InventoryItem item, InventoryVendorItem newItem) {
       newItem.setActivity(item.getActivity());
       newItem.setChangePrice(item.getChangePrice());
       newItem.setChangeSearches(item.getChangeSearches());
       newItem.setDaysLive(item.getDaysLive());
       newItem.setExposure(item.getExposure());
       newItem.setInquiries(item.getInquiries());
       newItem.setMileage(item.getMileage());
       newItem.setMileageMarket(item.getMileageMarket());
       newItem.setModel(item.getModel());
       newItem.setPrice(item.getPrice());
       newItem.setPriceMarket(item.getPriceMarket());
       newItem.setPrinted(item.getPrinted());
       newItem.setStock(item.getStock());
       newItem.setVin(item.getVin());
   }

   public String queryRec(){
       String result = "";
       synchronized (this) {
           getAllInventoryItems();
       }
       return result;
   }

   public String initQuery(){
       String result = "";
       synchronized (this) {
           allInventoryItems = null;
       }
       return result;
   }
   public List<InventoryItem> getInventoryItems() {
       return allInventoryItems;
   }

   public List<InventoryItem> getAllInventoryItems() {
       synchronized (this) {
           if (allInventoryItems == null) {
               allInventoryItems = new ArrayList<InventoryItem>();

               for (int k = 0; k <= 5; k++) {
                   try {
                       switch (k) {
                           case 0:
                               allInventoryItems.addAll(createCar("Chevrolet", "Corvette", 5));
                               allInventoryItems.addAll(createCar("Chevrolet", "Malibu", 8));
                               allInventoryItems.addAll(createCar("Chevrolet", "Tahoe", 6));

                               break;

                           case 1:
                               allInventoryItems.addAll(createCar("Ford", "Taurus", 12));
                               allInventoryItems.addAll(createCar("Ford", "Explorer", 11));

                               break;

                           case 2:
                               allInventoryItems.addAll(createCar("Nissan", "Maxima", 9));
                               allInventoryItems.addAll(createCar("Nissan", "Frontier", 6));

                               break;

                           case 3:
                               allInventoryItems.addAll(createCar("Toyota", "4-Runner", 7));
                               allInventoryItems.addAll(createCar("Toyota", "Camry", 15));
                               allInventoryItems.addAll(createCar("Toyota", "Avalon", 13));

                               break;

                           case 4:
                               allInventoryItems.addAll(createCar("GMC", "Sierra", 8));
                               allInventoryItems.addAll(createCar("GMC", "Yukon", 10));

                               break;

                           case 5:
                               allInventoryItems.addAll(createCar("Infiniti", "G35", 6));
                               allInventoryItems.addAll(createCar("Infiniti", "EX35", 5));

                               break;

                           default:
                               break;
                       }
                   } catch (Exception e) {
                       e.printStackTrace();
                   }
               }
           }
       }
       return allInventoryItems;
   }

   public List<InventoryItem> createCar(String vendor, String model, int count) {
       ArrayList<InventoryItem> iiList = null;

       try {
           int arrayCount = count;
           InventoryItem[] demoInventoryItemArrays = new InventoryItem[arrayCount];

           for (int j = 0; j < demoInventoryItemArrays.length; j++) {
               InventoryItem ii = new InventoryItem();

               ii.setVendor(vendor);
               ii.setModel(model);
               ii.setStock(RandomHelper.randomstring(6, 7));
               ii.setVin(RandomHelper.randomstring(17, 17));
               ii.setMileage(new BigDecimal(RandomHelper.rand(5000, 80000)).setScale(DECIMALS, ROUNDING_MODE));
               ii.setMileageMarket(new BigDecimal(RandomHelper.rand(25000, 45000)).setScale(DECIMALS, ROUNDING_MODE));
               ii.setPrice(new Integer(RandomHelper.rand(15000, 55000)));
               ii.setPriceMarket(new BigDecimal(RandomHelper.rand(15000, 55000)).setScale(DECIMALS, ROUNDING_MODE));
               ii.setDaysLive(RandomHelper.rand(1, 90));
               ii.setChangeSearches(new BigDecimal(RandomHelper.rand(0, 5)).setScale(DECIMALS, ROUNDING_MODE));
               ii.setChangePrice(new BigDecimal(RandomHelper.rand(0, 5)).setScale(DECIMALS, ROUNDING_MODE));
               ii.setExposure(new BigDecimal(RandomHelper.rand(0, 5)).setScale(DECIMALS, ROUNDING_MODE));
               ii.setActivity(new BigDecimal(RandomHelper.rand(0, 5)).setScale(DECIMALS, ROUNDING_MODE));
               ii.setPrinted(new BigDecimal(RandomHelper.rand(0, 5)).setScale(DECIMALS, ROUNDING_MODE));
               ii.setInquiries(new BigDecimal(RandomHelper.rand(0, 5)).setScale(DECIMALS, ROUNDING_MODE));
               demoInventoryItemArrays[j] = ii;
           }

           iiList = new ArrayList<InventoryItem>(Arrays.asList(demoInventoryItemArrays));
       } catch (Exception e) {
           e.printStackTrace();
       }

       return iiList;
   }

   public int getCurrentCarIndex() {
       return currentCarIndex;
   }

   public void setCurrentCarIndex(int currentCarIndex) {
       this.currentCarIndex = currentCarIndex;
   }

   public InventoryItem getEditedCar() {
       return editedCar;
   }

   public void setEditedCar(InventoryItem editedCar) {
       this.editedCar = editedCar;
   }

   public int getPage() {
       return page;
   }

   public void setPage(int page) {
       this.page = page;
   }

   public int getClientRows() {
       return clientRows;
   }

   public void setClientRows(int clientRows) {
       this.clientRows = clientRows;
   }
} 
```

[testPopup5.xhtml]

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

<ui:composition>
    <h:head>
        <title>RichFaces Showcase</title>
    </h:head>
    <h:body>
        <h:outputStylesheet>
        a.no-decor>img {
        border: none;
        }
    </h:outputStylesheet>
        <a4j:status onstart="#{rich:component('statPane')}.show()"
            onstop="#{rich:component('statPane')}.hide()" />

        <h:form>
            <h:panelGrid columns="2">
                <a4j:commandButton id="search" action="#{carsBean2.queryRec}"
                    value="Search" render="table" />
                <a4j:commandButton id="reset" action="#{carsBean2.initQuery}"
                    value="Reset" type="reset" render="table" />
            </h:panelGrid>
        </h:form>

        <h:form>
            <rich:dataTable value="#{carsBean2.inventoryItems}" var="car"
                id="table" rows="5">
                <rich:column>
                    <f:facet name="header">Model</f:facet>
                    <h:outputText value="#{car.model}" />
                </rich:column>
                <rich:column>
                    <f:facet name="header">Price</f:facet>
                    <h:outputText value="#{car.price}" />
                </rich:column>
                <rich:column>
                    <a4j:commandLink styleClass="no-decor" render="editGrid" 
                        execute="@this" oncomplete="#{rich:component('editPanel')}.show()">
                        <h:graphicImage value="/images/icons/common/edit.gif" alt="edit" />
                        <f:setPropertyActionListener target="#{carsBean2.editedCar}"
                            value="#{car}" />
                    </a4j:commandLink>
                </rich:column>
            </rich:dataTable>

            <rich:popupPanel id="statPane" autosized="true" rendered="true">
                <h:graphicImage value="/images/common/ai.gif" alt="ai" />
                Please wait...
            </rich:popupPanel>

            <rich:popupPanel header="Edit Car Details" id="editPanel">
                <h:panelGrid columns="3" id="editGrid">
                    <h:outputText value="Model" />
                    <h:outputText value="#{carsBean2.editedCar.model}" />
                    <h:panelGroup />
                    <h:outputText value="Price" />
                    <h:outputText value="#{carsBean2.editedCar.price}" />
                    <h:panelGroup />
                </h:panelGrid>
                <a4j:commandButton value="Cancel"
                    onclick="#{rich:component('editPanel')}.hide(); return false;" />                    
            </rich:popupPanel>
        </h:form>

    </h:body>
</ui:composition>
</html> 
```

使用萤火虫，我发现本地和在线 GAE 版本之间几乎没有差异。

1）editPanel @ local 将其样式阶段从“可见性隐藏”更改为“不显示”，然后单击编辑图标时“显示块”。
然而 editPanel @ GAE 仍然保持不变，“可见性隐藏”

[当地的]

```
<div id="j_idt9:editPanel" style="visibility: hidden;">
<div id="j_idt9:editPanel" style="display: none;">
<div id="j_idt9:editPanel" style="display: block;"> 
```

[盖伊]

```
<div id="j_idt9:editPanel" style="visibility: hidden;"> 
```

2) 下，本地版本包含表标签中的值

3）在firebug的脚本选项卡中显示，当点击编辑链接时，本地版本显示为：并跟随表格值。但是在线版本将其显示为和没有任何表值

p/s：在线：[http ://cloudenterpriseapps.appspot.com/public/test/testPopup5.jsf](http://cloudenterpriseapps.appspot.com/public/test/testPopup5.jsf)

顺便说一句，当页面首次加载时，GAE 会显示以下警告。不知道是不是和问题有关。[s~cloudenterpriseapps/0.365021621033424561].: SystemId 未知；第 57 行；第 31 列；调用 setMethod 方法失​​败

**[FireBug 脚本选项卡，本地。点击编辑链接]**

```
<?xml version='1.0' encoding='UTF-8'?>
<partial-response><changes><update id="j_idt9:editGrid"><![CDATA[<table id="j_idt9:editGrid">
<tbody>
<tr>
<td>Model</td>
<td>Corvette</td>
<td></td>
</tr>
<tr>
<td>Price</td>
<td>47405</td>
<td></td>
</tr>
</tbody>
</table>
]]></update><update id="javax.faces.ViewState"><![CDATA[H4sIAAAAAAEUTEh...EUXAkFAAA]]></update></changes><extension id="org.richfaces.extension"><complete>RichFaces.$('j_idt9:editPanel').show();</complete><render>j_idt9:editGrid</render></extension></partial-response> 
```

**[FireBug 脚本选项卡，GAE。点击编辑链接]**

```
<?xml version='1.0' encoding='UTF-8'?>
<partial-response><changes><update id="javax.faces.ViewState"><![CDATA[H4sIAAAAAAAAANVYbW....KBTUkFAAA]]></update></changes></partial-response> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T01:08:35.683

将 JSF api 和 implementation jar 从 2.0 升级到 2.1 后解决

# c4 - 掩蔽如何在 C4 中工作？

> ID：14623814
> 
> 赞同：2
> 
> 时间：2013-01-31T10:41:41.213
> 
> 标签：c4

我已经设置了一个形状和一个图像，我想用它来掩盖我的形状。我将它们的中心都设置在画布的中心，然后我写道：

```
shape.mask = img; 
```

但这给了我非常奇怪的结果。形状似乎被掩盖了......有点......唯一出现的部分是右下角，左半部分和上半部分被切断。

我还尝试了两个图像和两个形状。两者似乎都不起作用。
我错过了一步吗？也许我试图掩盖的图像没有任何 alpha 值（我猜这里，我看到它在另一个问题中提到它们必须是具有 alpha 值的图像并且他们提到了 .png 文件，所以这就是我用了）？

当我尝试使用两种形状时，我尝试将我想要遮罩的形状的填充的 alpha 值设置为 0.5 和 0.0，并且也只是将 fillColor 设置为 Nil ......仍然没有。

我也（在最后一次绝望的尝试中）尝试了这里描述的方法：[Mask a view in Objective-C](https://stackoverflow.com/questions/11502539/mask-a-view-in-objective-c)但我对 Objective-c 本身不是很好，所以这也不起作用。

在 C4 中屏蔽的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T18:49:06.840

你掩饰的方式是对的。

发生的事情是对象的掩码必须根据对象本身的坐标空间进行定位。当您将子视图添加到对象时，它会相对于对象的 {0,0} 定位。

以下代码将起作用并向您展示两件事。

首先，遮罩形状位于**对象的中心**，而不是画布的中心：

`s.center = CGPointMake(m.width/2,m.height/2);`

其次，当您触摸画布时，动画将触发遮罩移动到画布的“中心”坐标，但您会注意到它离得更远了。这是因为它从图像的原点开始计算其位置。

```
@implementation C4WorkSpace {
    C4Image *m;
    C4Shape *s;
}

-(void)setup {
    m = [C4Image imageNamed:@"C4Sky"];
    s = [C4Shape ellipse:CGRectMake(0, 0, m.height, m.height)];

    m.center = self.canvas.center;
    s.center = CGPointMake(m.width/2,m.height/2);
    m.mask = s;
    [self.canvas addImage:m];
}

-(void)touchesBegan {
    s.animationDuration = 1.0f;
    s.center = self.canvas.center;
}

@end 
```

# django - django-admin 和静态文件

> ID：14623815
> 
> 赞同：1
> 
> 时间：2013-01-31T10:41:47.333
> 
> 标签：django

我是 django 的新手，最近我正在按照[本教程](http://lightbird.net/dbe/todo_list2.html#interactive-toggle-boxes) 编写一个待办事项列表应用程序。在第 2 部分中，我应该自定义管理员的 change_list 模板并在其中添加图像。一开始我用

```
<img class='btn' src='static/img/on.png'> 
```

但事实证明它是无效的。任何人都可以找出问题所在吗？非常感谢。

这是我的文件夹结构

```
todo-list
   todo-app
        img
          ----on.png
          ----off.png
   templates
        admin
           ----change_list.html
   todo-list 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:53:01.863

您不能直接在 django 中访问静态文件（图像、css、js）

提供您需要使用的静态文件`{{ MEDIA_URL }}`或[如何在 Django 模板中包含图像文件](https://stackoverflow.com/questions/901551/how-do-i-include-image-files-in-django-templates)`{{STATIC_URL}}`？,[这个链接](https://docs.djangoproject.com/en/dev/howto/static-files/)

这将帮助你:)

# javascript - Ember.js“神奇地”将元素添加到集合中

> ID：14623817
> 
> 赞同：1
> 
> 时间：2013-01-31T10:41:56.097
> 
> 标签：javascript, ember.js

与以下相关的问题：[Ember.js：从集合中检索随机元素](https://stackoverflow.com/questions/14621481/ember-js-retrieve-random-element-from-a-collection)

我有两条路线：`randomThing`路线和`things`路线。

前者显示来自 API ( `GET /things/random`) 的随机事物（有一个“获取另一个随机事物”的按钮），后者：显示所有事物：( `GET /things`)。

问题是每次单击`Get another random thing`并显示新事物并进行`recipes`路由时，都会将这个新显示的随机事物添加到集合中...

获取随机事物的操作`find("random")`按照相关问题中的建议执行 a 并设置`this.content`为此值。

这里有什么问题？

**编辑：**

我正在使用`ember-data`，我的路线是这样的：

```
App.ThingsRoute = Ember.Route.extend({
  model: function() {
    return App.Thing.find();
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:18:24.953

> 问题是每次当我点击获取另一个随机事物并显示新事物并且我去食谱路线时，这个新显示的随机事物被添加到集合中......

这是预期的行为。`App.Thing.find()`不是简单的查询api并返回结果。取而代之的是 find() 返回一个包含 ember 所知道的所有事物的数组。它包括过去调用 find() 返回的对象、通过 App.Thing.createRecord() 在客户端创建的对象，当然还有通过`App.Thing.find('random')`. 返回此数组后，find() 并启动另一个 API 调用，如果返回其他记录，则将它们推送到数组中。

> 这里有什么问题？

听起来本身并没有什么问题。如果您想防止随机事物出现在 ThingsRoute 中，您需要将该路由的模型更改为过滤器，而不是只返回每个事物。例如：

```
App.ThingsRoute = Ember.Route.extend({
  model: function() {
    //Kick off query to fetch records from the server (async)
    App.Thing.find();

    //Return only non-random posts by applying a client-side filter to the posts array
    return App.Thing.filter(function(hash) {
      if (!hash.get('name').match(/random/)) { return true; }
    });
  }
}); 
```

有关工作示例，请参阅此[jsbin](http://jsbin.com/iyijaf/1/edit)

要了解有关过滤器的更多信息，我建议阅读 ember-data [store-model-filter](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/store_model_filter_test.js)集成测试

# performance - 在 C# 中打开 Excel - 加载时间

> ID：14623830
> 
> 赞同：0
> 
> 时间：2013-01-31T10:42:21.100
> 
> 标签：performance, excel, interop

如果我想打开一个 Excel 文件，我使用了以下代码：

```
Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
            Microsoft.Office.Interop.Excel.Workbook xlWorkBook = xlApp.Workbooks.Open(FilePath, 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
            Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet = (Microsoft.Office.Interop.Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
            Microsoft.Office.Interop.Excel.Range range = xlWorkSheet.UsedRange; 
```

它工作正常，但这需要很长时间，另一种可能性更快吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:51:14.803

是的，我会推荐 Microsoft 的 Open XML SDK。您可以打开 Excel 文档，而无需实际安装或使用 Excel。

# dotnetnuke-6 - 升级 DNN 版本 7

> ID：14623835
> 
> 赞同：1
> 
> 时间：2013-01-31T10:42:40.857
> 
> 标签：dotnetnuke-6

我有一个在 DNN 6.0 中运行的站点。我升级了 DNN 版本 7。升级设计后，网站完全一团糟，任何人都可以告诉我如何将 DNN 更新到版本 7。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T09:45:32.870

升级出错没有必要。可能您使用的某些模块与 DNN7 不兼容，或者您​​更改了某些核心页面或样式。

很难给出更准确的答案，因为“完全搞砸了”并没有真正说明问题所在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T07:46:15.313

如果您想要一个有用的答案，发布堆栈跟踪或错误消息会很有帮助。

通常“完全搞砸”是由于 dll 版本问题。

附带说明一下，我希望您在升级站点之前备份了数据库和网站文件。如果您添加了第 3 方模块，请检查它们与 DNN 7 的兼容性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T20:12:24.833

我也遇到了这个问题，你基本上需要更新皮肤以使用 Gravity（或除了 DarkKnight 之外的其他一些半体面的皮肤） - 现在，它可能正在使用旧的 DarkKnight 皮肤（我猜）而且我已经看到了尝试在 DNN 7.xx 中使用 DarkKnight 时遇到很多问题

尝试这个：

1.) 管理员\站点设置\基本设置\外观

2.) 将 Site Theme\Container 和 Edit Theme\Container 设置为 Gravity（除了 DarkKnight 之外的任何东西）

3.) 主机\主机设置\基本设置\外观

4.) 将 Host Theme\Container 和 Edit Theme Container 设置为 Gravity（除了 DarkKnight 之外的任何东西）

# javascript - 使用 JavaScript 三元运算符的 CSS 规则

> ID：14623838
> 
> 赞同：2
> 
> 时间：2013-01-31T10:42:47.600
> 
> 标签：javascript, jquery, css, ternary-operator

如何使用javascript三元运算符对div id的css规则进行洗牌，其中条件设置为jquery变量“my_color”

jQuery：

```
<script type="text/javascript">
  $(document).ready(function() {
      $("#my_div")
     .removeClass("horizontal vertical")
     .addClass( ['red', 'blue', 'green', 'gray'].indexOf(my_color) != -1 ? 'horizontal' : 'vertical');
});
</script> 
```

如上所述，对于`"my_color"`as 条件的特定颜色值，我的班级从水平到垂直洗牌。对于相同的条件，我想将列表项的浮动从with`left`到`horizontal`.my css 样式表包含列表项“#my_div li”。`none``vertical`

CSS：

```
#my_div li{float:left} 
```

以及如何使用相同的三元条件运算符对多个 css 进行洗牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:47:32.177

你的意思是这样*的吗？*

```
<style>
.float_left { float:left; }
.float_none { float:none; }
</style>
<script type="text/javascript">
  $(document).ready(function() {
      $("#my_div")
     .removeClass("horizontal vertical float_left")
     .addClass( ['red', 'blue', 'green', 'gray'].indexOf(my_color) != -1 ? 'horizontal float_left' : 'vertical float_none');
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:48:39.307

为什么不为此使用 CSS：

```
.horizontal li {
    float: left;
}
.vertical li {
    float: none;
} 
```

# weblogic - 当我们启动我们的应用程序+ weblogic错误时，我们收到了这个错误

> ID：14623841
> 
> 赞同：0
> 
> 时间：2013-01-31T10:42:59.650
> 
> 标签：weblogic

引起：java.sql.SQLException: [FMWGEN][SQLServer JDBC Driver][SQLServer]INTEGER ?? ？？？？？？？？？？？？？？？？？？？？？？？？？？？在 weblogic.jdbc.sqlserverbase.dda4.b（未知来源） 在 weblogic.jdbc.sqlserverbase.dda4.a（未知来源） 在 weblogic.jdbc.sqlserverbase.dda3.b（未知来源） 在 weblogic.jdbc.sqlserverbase.dda3 .a(Unknown Source) at weblogic.jdbc.sqlserver.tds.ddr.v(Unknown Source) at weblogic.jdbc.sqlserver.tds.ddr.a(Unknown Source) at weblogic.jdbc.sqlserver.tds.ddq.a （未知来源）在 weblogic.jdbc.sqlserver.tds.ddr.a（未知来源）在 weblogic.jdbc.sqlserver.ddj.m（未知来源）在 weblogic.jdbc.sqlserverbase.ddde.e（未知来源）在 weblogic .jdbc.sqlserverbase.ddde.a（未知来源）在 weblogic.jdbc.sqlserverbase.ddb9.a（未知来源）在 weblogic.jdbc.sqlserverbase.ddde。

我能知道deos“weblogic.jdbc.sqlserver.xxx”错误是什么意思吗？以及由错误引起的，我从未见过 INTEGER 错误..任何输入都会有所帮助。

谢谢，布里吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:00:08.600

如我所见，您使用 sql server 作为数据库。

检查 MS sql 服务器的 jdbc 驱动程序是否在服务器的类路径中。

检查您如何定义您的数据库数据源。

# database - 模拟和基准测试之间的区别

> ID：14623845
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:43:06.873
> 
> 标签：database, operating-system

任何帮助将是最受欢迎的......

谢谢你^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:48:22.420

[模拟](http://en.wikipedia.org/wiki/Simulation)是对真实世界过程或系统随时间的操作的模仿。[1](http://en.wikipedia.org/wiki/Simulation)模拟某事物的行为首先需要开发一个模型；该模型代表所选物理或抽象系统或过程的关键特征或行为。模型代表系统本身，而模拟代表系统随时间的运行。

[基准测试](http://en.wikipedia.org/wiki/Benchmarking)是将一个人的业务流程和绩效指标与其他行业的行业最佳或最佳实践进行比较的过程。通常衡量的维度是质量、时间和成本。在标杆管理过程中，管理层确定了他们所在行业或存在类似流程的另一个行业中最好的公司，并将研究的结果和流程（“目标”）与自己的结果和流程进行比较。通过这种方式，他们了解了目标的执行情况，更重要的是，了解了解释这些公司为何成功的业务流程。

# jquery - 如何向我的 IF 添加多个条件？

> ID：14623846
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:43:07.500
> 
> 标签：jquery

如何向我的 IF 添加多个条件？我尝试了这样的事情：

```
$('#ok').click(function(){
        if($('#accept-check:checked').length == 1 && #owner.length > 4 && #number.length == 8 ){
            $('#open-box').removeAttr('disabled');
            $('#open-box').attr('onclick','javascript:yourFunctionName();');
        }
        else{
            $('#open-box').removeAttr('onclick');
            $('#open-box').attr('disabled','disabled');

    }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:45:21.523

```
var acceptCheckLength=$('#accept-check:checked').length;
var numberCheckLength=$('#number').length;
var ownerLength=$('#owner').length; 
```

并使用这样的条件

```
if(acceptCheckLength == 1 && ownerLength> 4 && numberCheckLength == 8 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:45:31.003

您没有正确编写条件。试试这个：

```
 if($('#accept-check:checked').length == 1 && $('#owner').length > 4 && $('#number').length == 8 ){
//do stuff here
} 
```

# javascript - 如何在 Facebook 上发布包含 Javascript 的开放图形对象？

> ID：14623847
> 
> 赞同：1
> 
> 时间：2013-01-31T10:43:11.307
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-opengraph

有人对[https://stipple.com/](https://stipple.com/)如何在 Facebook 上发布交互式图像有任何想法吗？似乎他们的开放图形对象是用 JSON 定义的，并且包含一个包含 Javascript 的嵌入代码节点。这是我检索的来源：

```
{"id":4179463,"created_at":"2012/08/29 04:59:01 +0000","category":null,"copyright_holder_id":null,"copyright_holder_type":null,"image_url_small":"https://s3.amazonaws.com/assets.stippleit.com/photos/4179463/small/BMW-Zagato-Roadster-concept-214-626x382.jpg?1346216340","image_url_grid":"https://s3.amazonaws.com/assets.stippleit.com/photos/4179463/grid/BMW-Zagato-Roadster-concept-214-626x382.jpg?1346216340","image_url_large":"https://s3.amazonaws.com/assets.stippleit.com/photos/4179463/large/BMW-Zagato-Roadster-concept-214-626x382.jpg?1346216340","image_url_extra_large":"https://s3.amazonaws.com/assets.stippleit.com/photos/4179463/extra_large/BMW-Zagato-Roadster-concept-214-626x382.jpg?1346216340","image_height":382,"image_width":626,"metadata_date":null,"detail_url":"http://stipple.com/photos/4179463","embed_code":"<img width=\"626\" height=\"382\" src=\"https://s3.amazonaws.com/assets.stippleit.com/photos/4179463/original/BMW-Zagato-Roadster-concept-214-626x382.jpg?1346216340\" alt=\"stippled-photo\" data-stipple-photo-id=\"4179463\" />\n<script type=\"text/javascript\" async src=\"https://stipple.com/embed/4179463.js\"></script>\n","prototype":false,"headline":null,"abstract":null,"image_object_name":null,"city":null,"credit":null,"taken_at":null,"copyright_notice":null,"source_page":"http://blog.caranddriver.com/wp-content/uploads/2012/08/BMW-Zagato-Roadster-concept-214-626x382.jpg","iso":null,"focal_length":null,"aperture":null,"shutter_speed":null,"prototype_image_id":null,"photo_copy_group_id":null,"url":"http://blog.caranddriver.com/wp-content/uploads/2012/08/BMW-Zagato-Roadster-concept-214-626x382.jpg","caption":"","linked_caption":"","is_snaffled":true,"is_claimed":false,"is_photo_admin":null,"liked_by_current_user":false,"like_count":3,"reposted_by_current_user":false,"repost_count":0,"copyright_holder":null,"tagger":{"id":6380,"friendly_id":"auto","name":"Auto","avatar_url":"https://s3.amazonaws.com/stipple-avatars-production/users/6380/thumbnail/audi-rs8.jpg?1346351483","is_followed":null},"captioner":null,"photosets":[],"photosets_count":0,"likes":[{"id":2073,"name":"FailHarder","avatar_url":"https://s3.amazonaws.com/stipple-avatars-production/users/2073/thumbnail/DSC_0102_900px.jpg?1336524823"},{"id":6784,"name":"Daman","avatar_url":"https://s3.amazonaws.com/stipple-avatars-production/users/6784/thumbnail/IMG_20120805_152945.jpeg?1344641242"},{"id":6380,"name":"Auto","avatar_url":"https://s3.amazonaws.com/stipple-avatars-production/users/6380/thumbnail/audi-rs8.jpg?1346351483"}],"likes_count":3,"comments":{"models":[{"id":"80ed3086-4ae3-11e2-9744-b2c7ad5767bd:Photo-4179463","body":"It ain't easy to make a roadster this ugly.  Hats off to the team at BMW.","created_at":"2012/12/20 20:26:15 +0000","user_id":11347,"avatar_url":"https://s3.amazonaws.com/stipple-avatars-production/users/11347/thumbnail/delay-mugshot_normal.jpg?1355852303","name":"Grumpy Bastard","profile_url":"https://stipple.com/a#browse/user/11347","created_at_display":"December 20, 2012","linked_body":"It ain't easy to make a roadster this ugly.  Hats off to the team at BMW."}],"last_seen":"80ed3086-4ae3-11e2-9744-b2c7ad5767bd:Photo-4179463","per_page":10},"filter_user_id":"auto"} 
```

谢谢。

# webserver - 将服务器保持在用户提高站点/应用程序速度的同一区域

> ID：14623853
> 
> 赞同：0
> 
> 时间：2013-01-31T10:43:51.177
> 
> 标签：webserver

这似乎是一个愚蠢的问题，但我必须向我的老板回答这个问题，我不知道我应该告诉他什么？

目前我们的服务器在美国，但我们 90% 的用户来自印度。所以我的问题是，如果我们将服务器保留在印度，那么我们会获得更好的应用程序/站点速度吗？

请分享你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:53:43.337

当然，如果 Connection 没有遍及全球，您可以使用[treraceroute](http://networking.ringofsaturn.com/IP/traceroutedoc.php)客户端和服务器之间的连接来查看那里有多少节点以及它们位于哪里，并比较两个结果。

# jquery - 是否可以在 angularjs 应用程序中使用 jqueryaop？

> ID：14623859
> 
> 赞同：0
> 
> 时间：2013-01-31T10:43:58.193
> 
> 标签：jquery, angularjs, aop

我想在我的 AngularJS 应用程序上添加 AOP。通常我想检查之前和之后在服务、控件和指令中执行的每个函数。因此，我想为此选择 jQuery AOP。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T17:29:24.310

这是 AngularJS 的简单 AOP 库[https://github.com/mgechev/angular-aop](https://github.com/mgechev/angular-aop)

我想它可以扩展和改进，它仍处于开发的初始阶段。

# linux - 使用 dlopen() 访问 .so 库会引发未定义符号错误

> ID：14623873
> 
> 赞同：12
> 
> 时间：2013-01-31T10:45:01.347
> 
> 标签：linux, shared-libraries

我正在尝试将相机库 .so 文件动态加载到 Linux 可执行文件中，以访问简单的相机功能。

我试图通过以下方式做到这一点：

```
 if ( (newHandle = dlopen("./libCamera.so",RTLD_LAZY | RTLD_GLOBAL)) == NULL )
  {
     printf( "Could not open file : %s\n", dlerror() );   
     return 1;
  } 
```

但是这失败了，我收到以下输出：“无法打开文件：libCamera.so：未定义符号：*ZTVN10* _cxxabiv117__class_type_infoE”

我如何找出它所依赖的符号？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T10:52:38.110

最有可能的是，`libCamera.so`使用在共享库中定义的符号，而不*依赖*于该库。

1.  找到罪魁祸首。获取一个链接的真正可执行文件`libCamera.so`（并且它可以工作）。用 列出其依赖项`ldd /path/to/executable`。其中应该是一个库，它有一个定义`ZTVN10_cxxabiv117__class_type_infoE`（用于`grep`选择可能的候选者，`nm -D`肯定是在一个库上）。该库*不会*出现在 显示的列表中`ldd ./libCamera.so`。

2.  解决问题。首先加载在步骤 1 中找到的库`dlopen`（也在那里使用`RTLD_GLOBAL`）。

3.  如果另一个符号有问题，请转到步骤 1。

4.  如果新添加的库也有同样的问题，请转到步骤 1。

5.  告诉图书馆作者请修复他们的链接。

也可能发生`ldd ./libCamera.so`升级的先决条件之一并丢失符号定义（也许它是用一个名称不同的编译器重新编译的）。那么你就不会在步骤 1 中找到罪魁祸首了，没有解决办法，只能*再次*降级。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-31T10:48:49.010

该`ldd`命令可用于显示共享库依赖项。

```
ldd libCamera.so 
```

一旦你知道了依赖关系，你就可以用它`nm`来显示每个库中的符号。

```
nm -DC libCamera.so 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-05-01T08:23:50.690

我有一个类似的问题。这与一个`.a`图书馆有关，它应该链接到我的`.so`并静态链接到被遗漏的档案中。

我用（此处使用的 OP 对象名称）确定了这一点：

```
nm mylibrary.so | grep ZTVN10_cxxabiv117__class_type_infoE
0000ABC0 U ZTVN10_cxxabiv117__class_type_infoE 
```

这里的`U`意思[是](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/nm.html)符号是“未定义的”。您可以使用以下命令找到丢失对象的解构名称`--demangle`：

```
 $ nm --demangle mylibrary.so | grep 0000ABC0 
0000ABC0 U abi::class_type_info(params...) 
```

（或类似的东西）这应该可以帮助您确定缺少哪个库。

就我而言，即使在编译器行中包含库之后，我仍然遇到问题。最终，经过一番修改，我发现库文件 ( `.a`) 必须位于其依赖对象 ( `.o`) 文件之后，例如：

```
g++ -Wl,-E -g -m32 ... -fPIC myobjects1.o myobjects2.o missing_library.a -shared -o mylibrary.so 
```

现在我得到（不再`U`）：

```
 $ nm --demangle mylibrary.so | grep 0000ABC0 
0000ABC0 T abi::class_type_info(params...) 
```

最重要的是我不再收到错误了！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-22T09:36:34.860

在您的 libCamera.so 源代码中，您有未解析的外部符号。这意味着`type_infoE`在您的源代码中没有定义，应该解决。

# android - 监控 HTML5 iphone/android 应用程序中的网络活动？

> ID：14623879
> 
> 赞同：7
> 
> 时间：2013-01-31T10:45:28.387
> 
> 标签：android, iphone, html

我想为 iPhone 和 Android 创建一个基于 HTML5 应用程序框架的 HTML5 应用程序。该应用程序只会监控设备的网络活动（只有蜂窝网络而不是 WIFI）。

几个小时以来，我一直在寻找如何做到这一点，但无法找到如何做到这一点，或者即使它是否可能。

**是否可以在基于 HTML5 应用程序框架构建的 HTML5 应用程序中监控 iPhone/Android 网络活动？如果是这样，怎么办？**

（如果可能的话，我更愿意找到一个框架，将 iPhone 和 Android 的网络数据使用情况暴露给应用程序，而不是自己编写代码）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:31:55.383

如果您为您的 HTML5 应用程序构建了应用程序容器，那么可以使用新的 Safari Web Inspector，如果您在服务器上构建移动 html5 应用程序，这同样适用。

Chrome 也有类似的 Android 调试功能。

[http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-inspector-to-debug-mobile-safari/](http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-inspector-to-debug-mobile-safari/)

[https://developers.google.com/chrome-developer-tools/docs/remote-debugging](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)

# android - 通过安卓应用调用网络服务

> ID：14623886
> 
> 赞同：1
> 
> 时间：2013-01-31T10:45:53.920
> 
> 标签：android, web-services

我正在android中制作一个虚拟应用程序。此应用程序正在从 Web 服务调用一个方法。该方法用于添加数字。我提供两个整数输入，它应该返回一个整数值，但它给出 0 作为输出（无论输入是什么） . 请帮帮我。

下面是我的java代码

```
public class MainActivity extends Activity {

private static String SOAP_ACTION = "http://tempuri.org/Add";
private static String NAMESPACE = "http://tempuri.org/";
private static String METHOD_NAME = "Add";
private static String URL = "http://192.168.0.136/asmxfirst/Calculation.asmx?WSDL";

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final EditText editText1 = (EditText) findViewById(R.id.editText1);
    final EditText editText2 = (EditText) findViewById(R.id.editText2);
    final EditText editText3 = (EditText) findViewById(R.id.editText3);

    Button btn = (Button) findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("a", Integer.parseInt((editText1.getText().toString())));
            request.addProperty("b", Integer.parseInt((editText2.getText().toString())));   

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.setOutputSoapObject(request);
            envelope.dotNet = true;
            try {
             HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
             androidHttpTransport.call(SOAP_ACTION, envelope);
             Object result = envelope.getResponse();
             if(result != null)
             {
                  String[] results = (String[]) result;
                   editText3.setText(results[0]);
             }
             else
             {
                   Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
             }
            } 
            catch (Exception e) {
             e.printStackTrace();
                }

        }
    }) ;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:52:07.550

使用此链接[http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="vertical" >

<TextView
android:id="@+id/textView1"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Fahrenheit"
android:textAppearance="?android:attr/textAppearanceLarge" />

  <EditText
android:id="@+id/txtFar"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<requestFocus />
    </EditText>

     <TextView
android:id="@+id/textView2"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="Celsius"
android:textAppearance="?android:attr/textAppearanceLarge" />

         <EditText
android:id="@+id/txtCel"
android:layout_width="match_parent"
android:layout_height="wrap_content" />

     <LinearLayout
android:id="@+id/linearLayout1"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<Button
    android:id="@+id/btnFar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0.5"
    android:text="Convert To Celsius" />

<Button
    android:id="@+id/btnCel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0.5"
    android:text="Convert To Fahrenheit" />

 </LinearLayout>

  <Button
android:id="@+id/btnClear"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:text="Clear" />

 </LinearLayout>

    import org.ksoap2.SoapEnvelope;
    import org.ksoap2.serialization.SoapObject;
    import org.ksoap2.serialization.SoapSerializationEnvelope;
    import org.ksoap2.transport.HttpTransportSE;
    import android.app.Activity;
   import android.os.Bundle;
    import android.view.View;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.Toast;

     public class WebServiceDemoActivity extends Activity
     {
       /** Called when the activity is first created. */
   private static String SOAP_ACTION1 = "http://tempuri.org/FahrenheitToCelsius";
  private static String SOAP_ACTION2 = "http://tempuri.org/CelsiusToFahrenheit";
  private static String NAMESPACE = "http://tempuri.org/";
  private static String METHOD_NAME1 = "FahrenheitToCelsius";
   private static String METHOD_NAME2 = "CelsiusToFahrenheit";
   private static String URL ="http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";

   Button btnFar,btnCel,btnClear;
    EditText txtFar,txtCel;

    @Override
      public void onCreate(Bundle savedInstanceState)
     {
     super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

btnFar = (Button)findViewById(R.id.btnFar);
btnCel = (Button)findViewById(R.id.btnCel);
btnClear = (Button)findViewById(R.id.btnClear);
txtFar = (EditText)findViewById(R.id.txtFar);
txtCel = (EditText)findViewById(R.id.txtCel);

btnFar.setOnClickListener(new View.OnClickListener()
{
          @Override
          public void onClick(View v)
          {
                //Initialize soap request + add parameters
          SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);       

          //Use this to add parameters
          request.addProperty("Fahrenheit",txtFar.getText().toString());

          //Declare the version of the SOAP request
          SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

          envelope.setOutputSoapObject(request);
          envelope.dotNet = true;

          try {
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                //this is the actual part that will call the webservice
                androidHttpTransport.call(SOAP_ACTION1, envelope);

                // Get the SoapResult from the envelope body.
                SoapObject result = (SoapObject)envelope.bodyIn;

                if(result != null)
                {
                      //Get the first property and change the label text
                      txtCel.setText(result.getProperty(0).toString());
                }
                else
                {
                      Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
                }
          } catch (Exception e) {
                e.printStackTrace();
          }
          }
    });

btnCel.setOnClickListener(new View.OnClickListener()
{
          @Override
          public void onClick(View v)
          {
                //Initialize soap request + add parameters
          SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME2);       

          //Use this to add parameters
          request.addProperty("Celsius",txtCel.getText().toString());

          //Declare the version of the SOAP request
          SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

          envelope.setOutputSoapObject(request);
          envelope.dotNet = true;

          try {
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                //this is the actual part that will call the webservice
                androidHttpTransport.call(SOAP_ACTION2, envelope);

                // Get the SoapResult from the envelope body.
                SoapObject result = (SoapObject)envelope.bodyIn;

                if(result != null)
                {
                      //Get the first property and change the label text
                      txtFar.setText(result.getProperty(0).toString());
                }
                else
                {
                      Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
                }
          } catch (Exception e) {
                e.printStackTrace();
          }
          }
    });

btnClear.setOnClickListener(new View.OnClickListener()
{
          @Override
          public void onClick(View v)
          {
                txtCel.setText("");
                txtFar.setText("");
          }
    }); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:04:00.790

使用肥皂对象

```
SoapObject result = (SoapObject)envelope.bodyIn;

            if(result != null)
            {
                  //Get the first property and change the label text
                   editText3.setText(result.getProperty(0).toString());
            }
            else
            {
                  Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
            } 
```

# windows - 使用 sed 改变 对一个符号

> ID：14623887
> 
> 赞同：2
> 
> 时间：2013-01-31T10:45:58.773
> 
> 标签：windows, sed, gnuwin32

我正在使用 GnuWin32（sed 4.2.1 和核心实用程序 5.3.0）在 Windows Vista 上工作。也有 ActivePerl 5.14.2 包。

我有一个大的多记录文件。文件中每条记录的结尾用四个美元符号 ($$$$) 表示。每个逻辑记录内都有许多“CRLF”。

我想用一个符号替换所有 CRLF 实例，例如`|+|`. 然后我将替换`$$$$`为 CRLF。结果：每行一条记录用于导入 Excel 以进行进一步操作。

我尝试了几种转换`CRLF`为`|+|`但没有成功的方法。

例如，一种方法是：`sed -e "s/[\r\n]/|+|/g" source_file_in target_file_out`

`tr -d`用于删除的另一种方法`\r`，然后是第二条语句：`sed -e "s/\n/|+|/g" source_file_in target_file_out`

该`tr`声明有效；`sed`声明没有。

我已阅读以下文章，但不知道如何调整它们以替换`\r\n`为`|+|`.

[sed：如何将 CR 和/或 LF 替换为 "\r" "\n"，因此任何文件都将在一行中](https://stackoverflow.com/questions/5422162/sed-how-to-replace-cr-and-or-lf-with-r-n-so-any-file-will-be-in-one-line)

[替换包含 CRLF 的字符串？](https://stackoverflow.com/questions/11393616/replace-string-that-contains-crlf/11393990#11393990)

[如何使用 sed 替换换行符 (\n)？](https://stackoverflow.com/questions/1251999/sed-how-can-i-replace-a-newline-n)

`sed`如果使用(and )无法轻松解决此问题`tr`，那么如果有人告诉我如何使用，我将使用 Perl。

* * *

谢谢埃德的推荐。

awk 脚本尚未完全运行，因此我将添加一些缺失的细节，希望您可以微调您的建议。

首先，我正在运行 gawk v3.1.6.2962。我相信 awk 实现可能存在差异，所以这可能是一个有用的信息。

接下来，有关数据类型和数据来源的更多信息。

数据是关于化学品的（输入立体化学绘图程序的文本数据）。

化学文件为 .sdf 格式。

当我在 NotePad++ 中打开“133711.sdf”（使用查看/显示符号/显示所有字符）时，我看到屏幕截图中显示的数据： [https ://dl.dropbox.com/u/3094317/_master_1_screen_shot_.png](https://dl.dropbox.com/u/3094317/_master_1_screen_shot_.png)

如您所见，只有 LF - 没有 CR。我相信这意味着 .sdf 文件的来源是 UNIX 系统。

接下来，我运行 Windows 命令 COPY *.sdf _master_2_.txt。这会创建我想要解析为记录的非常大的文件文件。

_master_2_.txt 与 133711.sdf 具有相同的结构 - 仅 LF；没有CR。

然后，我在 .BAT 文件中运行您的 awk 建议。我需要用双引号替换你的单引号，因为微软让我。

awk -v FS="\r\n" -v OFS="|+|" -v RS="\$\$\$\$" -v ORS="\r\n" "{$1=$1}1" C:_master_2_.txt >C:\output.txt

我附上了 output.txt 的屏幕喊话： [https ://dl.dropbox.com/u/3094317/output.txt.png](https://dl.dropbox.com/u/3094317/output.txt.png)

如您所见，awk 命令没有成功将“\r\n”替换为“|+|”。

此外，Windows 使用 CRLF 创建了 output.txt。

它确实成功地将四个 $ 替换为 CRLF。

此信息是否足以更新您的 awk 建议以处理与 Windows 相关的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:14:05.750

用 GNU awk 试试这个：

```
awk -v FS='\r\n' -v OFS='|+|' -v RS='\\$\\$\\$\\$' -v ORS='\r\n' '{$1=$1}1' file 
```

我从您更新的问题中看到您使用的是 Windows。为避免荒谬的引用规则和问题，请将其放入名为“whatever.awk”的文件中：

```
BEGIN{FS="\r\n"; OFS="|+|"; RS="\\$\\$\\$\\$"; ORS="\r\n"} {$1=$1}1 
```

并将其运行为

```
awk -f whatever.awk file 
```

看看这是否符合您的要求。

# java - 使用 OO 观察者模式而不更新更改源自的对象

> ID：14623897
> 
> 赞同：1
> 
> 时间：2013-01-31T10:46:27.757
> 
> 标签：java, swing, oop, jtextfield, observer-pattern

我正在构建一个包含 GUI 和模型的应用程序。当模型中的字段发生更改时，我正在使用观察者模式（使用 java 的内置接口）来更新 GUI。

这通常工作正常，但我有一种情况，模型中的特定字符串变量（特别是文件的 url）可以由两个单独的 JTextField（swing）更改，其内容实际上反映了模型变量的值有问题。

我遇到的问题来自这样一个事实，即其中一个 JTextField 的更改需要更新模型的状态以及另一个 JTextField 的内容。我的模型确保仅在模型状态发生变化的情况下才向观察者发送通知。但是，修改 JTextFields 的过程涉及将其文本内容清空然后重置它。

无需赘述，其结果是更新/通知过程陷入无限循环。我通过为这个特定问题搁置观察者模式暂时解决了这个问题，但我想知道是否有人可以提出一种巧妙的方法来确保特定组件不会被源自同一组件的更改“更新”。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T11:21:03.707

[*正如在使用 MVC*](http://www.oracle.com/technetwork/articles/javase/mvc-136693.html)的 Java SE 应用程序设计中所讨论的，这是[*应用程序设计的几个问题*](http://www.oracle.com/technetwork/articles/javase/mvc-136693.html#5)之一。建议的方法依赖于 a `PropertyChangeListener`，如图[所示](https://stackoverflow.com/a/11832979/230513)。其中`PropertyChangeEvent`包括旧值和新值以供参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T12:36:41.123

这个关于双向观察者的[链接可能会对此提供一些帮助。](https://stackoverflow.com/questions/4267109/c-bi-directional-observer-pattern "关联")

在您的情况下，模型和视图似乎正在尝试相互更新。解决方案在于执行更新的方向。例如**内层**->**模型**->**视图**和**视图**->**模型**->**内层**。所以它并不是真正的观察者模式。

的`update(Observable o, Object arg)`方法`java.util.Observer`确实接受一个`Observable`（主题）对象。该对象可用于向模型提供提示，要求它向内而不是向视图传播更新。

我快速尝试了一下，发现设置双向观察者（使用 Java api）并不像我想象的那么简单。但你可以冒险一试。

# c# - 创建一个自定义异步函数（不调用另一个 .net 异步方法）

> ID：14623898
> 
> 赞同：2
> 
> 时间：2013-01-31T10:46:27.993
> 
> 标签：c#, .net

似乎所有异步示例最终都调用了 .net 异步方法，

是否可以创建`async`不调用 .net方法的自定义`async`方法？

这是我到目前为止的地方：

```
 [Test]
    public void Test()
    {
        TestAsync();
    }

    public async void TestAsync()
    {
        await DoStuffAsync(1);

        Task.Run(() => DoStuffAsync(73));

        await Task.WhenAll(DoStuffAsync(2), DoStuffAsync(3));
    }

    public async Task DoStuffAsync(int n)
    {
        Thread.Sleep(1000);
        Console.WriteLine("done stuff " + n);
    } 
```

唯一的问题是 VS 说 DoStuffAsync 中的 async 关键字没用（因为没有等待），但我不需要等待，我只需要等待这个方法的可能性

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:10:42.240

关键字的主要目的`async`是启用`await`关键字。没有an 的`async`方法没有`await`多大意义，因此会发出编译器警告。

您可以在没有 的情况下实现`Task`-returning 方法`async`，如下所示：

```
public Task DoStuffAsync(int n)
{
  return Task.Delay(1000);
} 
```

`Task`如果您想从头开始创建自己的s，请使用`Task.Run`or `TaskCompletionSource<T>`（或其快捷方式之一，例如`Task.FromResult`or `TaskFactory.FromAsync`）。

PS您通常要避免`async void`；改为使用`async Task`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:01:56.713

```
public async void TestAsync()
{
    await DoStuffAsync(1);

    await DoStuffAsync(73);

    await Task.WhenAll(DoStuffAsync(2), DoStuffAsync(3));
}

public async Task DoStuffAsync(int n)
{
    await Task.Delay(1000);
    Console.WriteLine("done stuff " + n);
} 
```

# java - SQLite 两张表，一张有效，另一张无效

> ID：14623904
> 
> 赞同：0
> 
> 时间：2013-01-31T10:46:56.820
> 
> 标签：java, android, sqlite

我在 Android 应用程序中有一个 SQLite 数据库。一个数据库有两个表。简单地读入一些文本并将其读出，但是，两个表中的第一个可以完美运行，而第二个表则不能并给出错误。我查看了我的代码，它似乎都是正确的。我敢于让任何人在下面的代码或 SQL 语句中发现错误。

对 SQL 语句特别感兴趣，因为据我所知，我的 SQL 代码对于这两个表来说都是完美的，但是在 LOGCAT 中说我没有为表 2 读入的表。

为什么我的一张桌子可以工作而另一张桌子不行？然而它们在同一个数据库中并且以相同的方式编写。

第一张表上的数据库操作；（完美运行）

```
 ourHelper = new DbHelper(ourContext);
 ourDatabase = ourHelper.getWritableDatabase();

 ContentValues cv = new ContentValues();
 cv.put(KEY_NAME, name);
 cv.put(KEY_HITS, hits);
 ourDatabase.insert(DATABASE_TABLE_1, null, cv);

 public String getData() {
     String[] columns = new String[] { KEY_ROWID, KEY_NAME, KEY_HITS };
     Cursor c = ourDatabase.query(DATABASE_TABLE_1, columns, null, null, null,
             null, null);
     String result = "";

     int iRow = c.getColumnIndex(KEY_ROWID);
     int iName = c.getColumnIndex(KEY_NAME);
     int iHits = c.getColumnIndex(KEY_HITS);

     for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
         result = result + c.getString(iRow) + " " + c.getString(iName)
                 + " " + c.getString(iHits) + "\n";
     }

     return result;
    }

 ourHelper.close(); 
```

第二张表上的数据库操作；（不工作，错误）

```
 ourHelper = new DbHelper(ourContext);
 ourDatabase = ourHelper.getWritableDatabase();

 ContentValues cv = new ContentValues();
 cv.put( KEY_RESULT, result);
 return ourDatabase.insert(DATABASE_TABLE_2, null, cv);

 public String getData2() {
     // TODO Auto-generated method stub
 String[] columns = new String[] { KEY_ROWID, KEY_RESULT, KEY_TABLET, KEY_DATE };
   Cursor c = ourDatabase.query(DATABASE_TABLE_2, columns, null, null, null,
             null, null);
     String result = "";

     int iRow = c.getColumnIndex(KEY_ROWID);
     int iResult = c.getColumnIndex(KEY_RESULT);
     int iTablet = c.getColumnIndex(KEY_TABLET);
     int iDate = c.getColumnIndex(KEY_DATE);

     for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
         result = result + c.getString(iRow) + " " + c.getString(iResult)
               + " " + c.getString(iTablet) + " " + c.getString(iDate) + "\n";
     }
     return result;
    }

    ourHelper.close(); 
```

LOGCAT 输出；

```
 01-31 19:33:01.670: E/AndroidRuntime(6420): FATAL EXCEPTION: main

01-31 19:33:01.670: E/AndroidRuntime(6420):
java.lang.RuntimeException: Unable to start activity ComponentInfo{DBView}:
android.database.sqlite.SQLiteException: no such column: date: , while compiling:
SELECT _id, game_result, tablet_winner, date FROM prizeTable 
```

更多细节代码；

```
public class PlayGame {

public static final String KEY_ROWID="_id";

// for table 1 gameTable
public static final String KEY_NAME="persons_name";
public static final String KEY_HITS="persons_hits";

// for table 2 prizesTable
public static final String KEY_RESULT="game_result";
public static final String KEY_TABLET="tablet_winner";
public static final String KEY_DATE="date";

private static final String DATABASE_NAME="PlayGamesdb";
private static final String DATABASE_TABLE_1="gameTable";
private static final String DATABASE_TABLE_2="prizeTable";
private static final int DATABASE_VERSION = 1;

private static final String CREATE_TABLE_1 = "CREATE TABLE " + DATABASE_TABLE_1 + " (" + KEY_ROWID
        + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_NAME + " TEXT NOT NULL, " + KEY_HITS + " TEXT NOT NULL);";

private static final String CREATE_TABLE_2 = "CREATE TABLE " + DATABASE_TABLE_2 + " (" + KEY_ROWID
        + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_RESULT + " TEXT NOT NULL, " + KEY_TABLET
        + " TEXT NOT NULL, " + KEY_DATE + "TEXT NOT NULL);";

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

  private static class DbHelper extends SQLiteOpenHelper{  

    public DbHelper(Context context){
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_TABLE_1);
        db.execSQL(CREATE_TABLE_2); 
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE_1 + "AND" + DATABASE_TABLE_2);
        onCreate(db);
    }
} 
```

<<< 编辑 >>>

Safime 的建议修复了崩溃，即在创建第二个表时在 KEY_DATE 和 TEXT 之间添加一个空格。

但是仍然是一个问题，不再崩溃，但是该`insert()`方法仍然无效。返回 -1 表明它没有插入任何内容，并且在向表中插入新行后，表 2 仍然为空。必须找出为什么它无法在表中创建任何新行。就像之前一样，表一工作正常，但表二仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:15:28.260

在创建第二个表时，您在 KEY_DATE 列之后和 TEXT 之前缺少一个空格。

(...) + KEY_DATE + " TEXT NOT NULL); (...)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:42:59.890

您正在使用 Constraint NOT NULL 并且只插入一列。您一定会遇到`SQLiteConstraintexception`异常。尝试插入所有列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:51:12.880

您的第二个表的创建表语句可能有问题。尝试使用 sqlite3 命令行工具打开您的 db 文件，并查看该表是否存在。如果不是，则问题出在 CREATE 语句中。

# c# - WebSocket 连接正在关闭

> ID：14623908
> 
> 赞同：0
> 
> 时间：2013-01-31T10:47:10.000
> 
> 标签：c#, javascript, websocket

我是 WebSocket API 的初学者。我正在尝试在本地连接到我的服务器，但我正在获取连接关闭消息。谁能告诉我我做错了什么？

那是我的代码：

**服务器**

```
using System.Net.Sockets;
using System.Net;
using System.IO;
using System;
class Program
{
    static void Main(string[] args)
    {
        var listener = new TcpListener(IPAddress.Loopback, 8181);
    listener.Start();
    while (true)
    {
        Console.WriteLine("Listening...");
        using (var client = listener.AcceptTcpClient())
        using (var stream = client.GetStream())
        using (var reader = new StreamReader(stream))
        using (var writer = new StreamWriter(stream))
        {

            string line = null, key = "", responseKey = "";
            string MAGIC_STRING = "258EAFA5-E914-47DA-95CA-C5AB0DC85B11";
            while (line != "")
            {
                line = reader.ReadLine();
                if (line.StartsWith("Sec-WebSocket-Key:"))
                {
                    key = line.Split(':')[1].Trim();
                }
            }

            if (key != "")
            {
                key += MAGIC_STRING;
                using (var sha1 = SHA1.Create())
                {
                    responseKey = Convert.ToBase64String(sha1.ComputeHash(Encoding.ASCII.GetBytes(key)));
                }
            }

            // send handshake to the client
            writer.WriteLine("HTTP/1.1 101 Web Socket Protocol Handshake");
            writer.WriteLine("Upgrade: WebSocket");
            writer.WriteLine("Connection: Upgrade");
            writer.WriteLine("WebSocket-Origin: http://localhost:8080");
            writer.WriteLine("WebSocket-Location: ws://localhost:8181/websession");
            if (!String.IsNullOrEmpty(responseKey))
                writer.WriteLine("Sec-WebSocket-Accept: " + responseKey);
            writer.WriteLine("");
            Console.ReadLine();
            writer.Flush();

        }//using
        Console.WriteLine("Finished");
    }//while

    }
} 
```

**客户端**

```
 <!DOCTYPE HTML>
       <html>
       <head><title></title>
          <script type="text/javascript">

       function WebSocketTest() {
          var msg = document.getElementById("msg");
            if ("WebSocket" in window) {
             msg.innerHTML="WebSocket is supported by your Browser!";
        // Let us open a web socket
        var ws = new WebSocket("ws://localhost:8181/websession");
        ws.onopen = function () {
            // Web Socket is connected, send data using send()
             msg.innerHTML="connection open";
            //ws.send("Message to send");
            //msg.innerHTML="Message is sent...";
        };
        ws.onclose = function () {
            // websocket is closed.
            msg.innerHTML = "Connection is closed...";
        };

        ws.onerror = function(error){
            console.log('Error detected: ' + error);
        };
        ws.onmessage = function (evt) {
            var received_msg = evt.data;
            msg.innerHTML="Message is received...";
        };

    }
    else {
        // The browser doesn't support WebSocket
        msg.innerHTML="WebSocket NOT supported by your Browser!";
    }
   }
   </script>
     </head>
       <body>
       <div id="sse">
        <a href="javascript:WebSocketTest()">Run WebSocket</a><br />
         <p id="msg"></p>
       </div>
        </body> 
           </html> 
```

任何解决方案将不胜感激，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:51:16.667

在任何规范下，这都不是有效的 web-socket 响应。初始的 web-socket 响应总是要求你处理一些数字作为响应头的一部分，以证明你是一个 web-socket 服务器。要读取和写入哪些标头，以及要执行什么操作，取决于 web-sockets 的版本（hibi/hixie 76/rfc）。*实际上，您的服务器*似乎正在使用*客户端*的标头。

例如，RFC6455 (13) 响应将开始：

```
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: {crunch some numbers} 
```

请注意，Hixie-76 响应是不同的，上面有一些我省略了。

来自[RFC6455 规范](https://www.rfc-editor.org/rfc/rfc6455)：

> 为了证明握手被接收，服务器必须获取两条信息并将它们组合起来形成响应。第一条信息来自|Sec-WebSocket-Key| 客户端握手中的头字段：
> 
> ```
>  Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ== 
> ```
> 
> 对于这个头域，服务器必须取值（在头域中，例如，base64 编码的 [RFC4648] 版本减去任何前导和尾随空格）并将其与全局唯一标识符（GUID，[RFC4122 ]) 字符串形式的“258EAFA5-E914-47DA-95CA-C5AB0DC85B11”，不太可能被不理解 WebSocket 协议的网络端点使用。然后在服务器的握手中返回此连接的 SHA-1 哈希（160 位）[FIPS.180-3]，base64 编码（参见 [RFC4648] 的第 4 节）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:41:33.400

在 javascript 代码连接到网络服务器之后。C# 运行所有 using 语句并将所有行打印到文件中，然后关闭所有 using 语句，从而释放生成的客户端，从而关闭连接。
一个快速（但肮脏）的解决方法是在 using 语句的末尾添加“Console.Readline”。不过要小心，你的进程会挂起！
有关 TcpClients 接受客户端的更多信息，请访问[msdn](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.accepttcpclient.aspx)。
请注意，那里的给定示例一次只允许一个连接。
最后一句话：存在像 Marc 建议的接受 websocket 连接的库。

# iphone - iPhone 中的嵌入视频可平滑过渡到 MPMoviePlayerController

> ID：14623911
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:47:13.250
> 
> 标签：iphone, ios, video, mpmovieplayercontroller, embedded-resource

在新的美国偶像应用程序中嵌入了视频，如果您点击它们，就会开始播放并显示“暂停”和“增强”按钮。当您点击增强按钮时，您会获得一个动画，该动画会顺利启动全屏 MPMoviePlayerController。你知道他们是怎么做到的吗？

![美国偶像官方](../Images/fd44982e52ec019d4ae96a5876bfd75a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:22:56.880

我通过在其上添加手势点击并实现手势逻辑来实现类似的功能。轻按一下，我添加了一个带有共享按钮的视图（在我的例子中）。对不起，我没有那个代码了。

# java - 如何从生成的代码（通过 XmlBeans）中获取 xml 标记名称？

> ID：14623912
> 
> 赞同：0
> 
> 时间：2013-01-31T10:47:12.810
> 
> 标签：java, xml, parsing, xsd, xmlbeans

1.  我有一个要解析的 xml 文件。
2.  我手动创建了与该 xml 文件相关的 xsd 文件。
3.  我通过该 xsd 文件创建了一个 jar 文件，以便 xml 文件中的所有标签都可以作为接口
4.  现在我有一个 jar 文件，其中 xml 文件的标签被视为具有各自实现类的接口。
5.  我的问题是我想要从那些实现类或那些接口中提取简单的 xml 标记名称。我正在寻找一些 API 或其他方式来做到这一点。
6.  我在这个过程中使用了 XmlBeans。

我希望这能恰当地解释我的问题。:)

# ruby-on-rails - Citier Gem 的 RSpec 测试失败 - 类表继承

> ID：14623916
> 
> 赞同：1
> 
> 时间：2013-01-31T10:47:27.660
> 
> 标签：ruby-on-rails, unit-testing, rspec, citier

我为联系人目录设置了以下模型

```
class Contact < ActiveRecord::Base
  acts_as_citier
end

class Company < Contact
  acts_as_citier
end

class Operator < Company
  acts_as_citier
end 
```

问题是联系人可以是一家公司，而运营商是一种添加了不同属性的公司。

由于单表继承不适用于这个特定的应用程序，我决定使用[citier](http://peterhamilton.github.com/citier/) gem。

最后，我为每个模型准备了三个表。因此，当我添加一个 Company 对象时，我得到了两个条目，即一个在 Contact 中只有名称属性和 Company 表中的其他属性在两个表中共享相同的 id，两个表的 type 字段都设置为 Company。如果我添加一个运算符，则生成三个整体，即每个表中的一个共享相同的 id，前两个表的 Type 字段设置为 Operator。

我的应用程序显然工作正常，但是我的所有测试都被破坏了，即那些与这些模型有关的测试 - 加上最糟糕的部分是堆栈级别太深，因为我收到以下所有错误测试的错误消息。

```
Failure/Error: Unable to find matching line from backtrace
     SystemStackError:
       stack level too deep
     # /home/ali/.rvm/gems/ruby-1.9.2-p318/bundler/gems/rails_sql_views-0cf1af369a5f/lib/rails_sql_views/connection_adapters/abstract_adapter.rb:23 
```

我`rails_sql_views/connection_adapters/abstract_adapter.rb`至少检查了文件中上述错误中的行号，它只有这一行：

```
 self.class.send(:alias_method, :tables, :original_tables_method) 
```

我在这里使用的是 postgresql 数据库。

那是大约 300 个测试都被相同的消息打破了:(

请注意，所有损坏的测试都是那些涉及对这些模型进行任何类型更改的测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T06:55:19.150

我做了一些摆弄，最后改变了我的 gemfile 中 rails_sql_views gem 的 git 源以读取`git://github.com/flwyd/rails_sql_views.git`

这摆脱了堆栈级别太深的东西，但是我遇到了一个全新的错误-尽管我的测试仍然失败-出于某种原因，它将我的视图视为表格。我将对此提出一个新问题

- - 更新 - - -

我让它工作了，我在我的 spec/spec_helper.rb 文件中做了一些改动，并注释掉了以下两行：

```
#config.use_transactional_fixtures = true # because I'm not using fixtures here

#DatabaseCleaner.strategy = :truncation 
```

出于某种原因`Database.strategy`，配置给了我一些问题——这是我修复它但并不真正知道它是如何修复的情况之一。我会做一些阅读。与此同时，我的测试现在运行良好！

# php - Symfony 表单，子/嵌入式表单

> ID：14623922
> 
> 赞同：1
> 
> 时间：2013-01-31T10:47:48.183
> 
> 标签：php, forms, symfony, symfony-2.1

我想更新多个实体，并通过更新添加一个名为“comment”的字段。该字段与实体无关；我会将评论保存在单独的表格中。

这是我尝试过的（下面的控制器代码） -*这只是代码示例*，但应该让我了解我正在尝试做什么：

```
$form = $this->createFormBuilder();

foreach (array(1,2,3) as $id) {
    $subform = $this->createFormBuilder()
        ->add('story', 'entity', array(
            'class' => 'AcmeDemoBundle:Story',
            'query_builder' => function($em) use ($id) {
                 $qb = $em->createQueryBuilder('s')
                 $qb->select(array('j'))
                     ->add('from', 'AcmeDemoBundle:Story')
                     ->addWhere('j.id = :id')
                     ->setParameter('id', $id);
                 return $qb;
            },
            'property' => 'id',
            'required' => true, 'expanded' => true, 'multiple' => true
        )
        ->add('comment', 'textarea');
}
$form->add($subform, '', array('label' => '');

...
// then I send the form to the template with $form->createView() 
```

我期望看到的是一个表单，每个实体（1,2,3）作为一个复选框，旁边是一个注释块。相反，我只得到一个复选框和一个注释，并且总是针对数组中的最后一个实体（在上述情况下，实体编号为 3）。似乎表单构建器忽略了我添加的所有子表单，只使用最后一个 - 在查看进入数据库的 SQL 时也是这种情况，只有一个选择 #3 而没有选择 1 和2.

鉴于生成的 html 支持我正在尝试做的事情，我希望上述内容能够正常工作：

```
<input type="checkbox" id="form_form_story_0" name="form[form][story][]" value="3">
<textarea id="form_form_comment"  name="form[form][comment] /> 
```

我也尝试为字段提供唯一名称 - 例如 ->add('story_' . $id) 等，但这并没有做任何事情。我还尝试给每个查询构建器一个唯一的名称 $em->createQueryBuilder('s'.$id) 但这也不起作用。

此外，如果我删除 query_builder （并且只使用该类），它也不起作用

**更新：**它似乎与实体没有任何关系，即使我尝试使用纯文本字段创建子表单，它也不起作用......

**如果子表单具有不同的名称，则**更新 2 ：****

 **```
$subForm = $this->get('form.factory')->createNamedBuilder("form$id"), 'form', array()) 
```

然后它工作。不幸的是，这意味着我无法遍历树枝内的子表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:09:03.120

它不能像上面所说/要求的那样工作。

```
->add 
```

覆盖该子项的先前副本，如下所示：

```
Symfony\Component\Form
...
public function add(FormInterface $child)
...
$this->children[$child->getName()] = $child; 
```

为了“解决”这个问题，我放弃了子表单的想法，并将每个项目分别命名，如下所示：

```
$form
...
->add("comment_$id", 'textarea') 
```

制作了一个实体数组，并在 twig 中呈现该实体的评论字段，如下所示：

```
{% for entity in entities %}
...
{% set child = "comment_" ~ entity.id %}{{ form_widget(form.children[child]) }}
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T16:38:00.197

1.  您的示例代码包含错误：您在循环*后添加 $subform，因此您仅显式添加最后生成的 $subform 对象。*

2.  注释行`$this->children[$child->getName()] = $child;`阻止了添加子表单构建器的“简单”方式，但有一种解决方法：

您可以使用显式名称创建 biulder，而不是为子表单调用`$this->createFormBuilder()`助手（这将给它命名为“form”）`$this->container->get('form.factory')->createNamedBuilder('sub_form_1')`。**

# php - 验证链接未激活帐户

> ID：14623923
> 
> 赞同：3
> 
> 时间：2013-01-31T10:47:48.833
> 
> 标签：php, mysql

所以我在注册后发送了一个链接来验证一个帐户，该链接包含用户的电子邮件地址和一个 32 个字符的代码，例如：

```
 $to      = $email;
                $subject = 'Signup | Verification';
                $message = '

                Thanks for signing up!
                Your account has been created, you can login with the following credentials after you have activated your account by pressing the url below.

                ------------------------
                Username: '.$username.'
                Password: '.$password.'
                ------------------------

                Please click this link to activate your account:
                localhost:8888/website/verify.php?email='.$email.'&hash='.$hash.'
                '; 

                $headers = 'From:myemail@email.com' . "\r\n"; 
                mail($to, $subject, $message, $headers); 
```

一切似乎都很好，我收到了带有如下链接的电子邮件：

```
http://localhost:8888/website/verify.php?email=myemail@email.com&hash=fe646d38bc2145ca6c3cf77d52820cd0 
```

当我点击链接并尝试激活帐户时，问题就来了。我需要很好地验证.php，但我不断收到无效的方法，我无法将验证设置为 1。

```
 <?php include "includes/base.php"; ?>

    <?php

        if(isset($_GET['Email']) && !empty($_GET['Email']) AND isset($_GET['Hash']) && !empty($_GET['Hash'])){
            $email = mysql_escape_string($_GET['Email']); 
            $hash = mysql_escape_string($_GET['Hash']); 
            $search = mysql_query("SELECT Email, Hash, Validation FROM users WHERE Email = '".$email."' AND Hash = '".$hash."' AND Validation = 0") or die(mysql_error()); 
            $match  = mysql_num_rows($search);

            if($match > 0){
                mysql_query("UPDATE users SET Validation = 1 WHERE Email = '".$email."' AND Hash = '".$hash."' AND Validation = 0") or die(mysql_error());
                echo "Your account has been activated, you can now login";
            }else{
                echo "The url is either invalid or you already have activated your account.";
            }

        }else{
            echo "Invalid approach, please use the link that has been sent to your email.";
        }

    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:55:26.587

1) 此代码不安全，因为它存在 SQL 注入问题。使用[准备好的语句](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php) 请记住**mysql_***函数不再受支持，它们已被[废弃](http://news.php.net/php.internals/53799)

2) 关于您的代码，我发现您的 GET 请求的 'email' 和 'hash' 全部小写，但在 PHP 代码中您使用 $_GET['Email'] 和 $_GET['Hash']。你需要改变这个：

```
 if(isset($_GET['Email']) && !empty($_GET['Email']) AND isset($_GET['Hash']) && !empty($_GET['Hash'])){
            $email = mysql_escape_string($_GET['Email']); 
            $hash = mysql_escape_string($_GET['Hash']); 
```

对此

```
 if(isset($_GET['email']) && !empty($_GET['email']) AND isset($_GET['eash']) && !empty($_GET['eash'])){
            $email = mysql_escape_string($_GET['email']); 
            $hash = mysql_escape_string($_GET['eash']); 
```

或将您的 GET 请求更改为下一个：

```
http://localhost:8888/website/verify.php?Email=myemail@email.com&Hash=fe646d38bc2145ca6c3cf77d52820cd0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:52:20.327

更改`Hash`为`hash`& 。`Email`_ `email`（大写，但不在您发送的链接中）

此外，您的代码容易受到 sql 注入攻击，因为您直接使用 url 中的值来查询数据库。请`mysql_real_escape_string`在进行查询之前使用并执行一些健全性检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:00:16.703

PHP中有大写字母，而链接中没有大写字母

```
$_GET['Email']

verify.php?email=myemail@email.com 
```

# java - JTable 链接的 JComboBoxes

> ID：14623925
> 
> 赞同：0
> 
> 时间：2013-01-31T10:47:56.140
> 
> 标签：java, swing, jtable, jcombobox

如果需要，我会发布 SSCCE。

我有一个带有 JComboBoxes @ First 和 Second Columns 的 JTable。

在一行的第一列 JComboBox 中进行选择后，我想更新该行的第二列 JComboBox。（链式选择 - 我知道如何使用普通的 JComboBoxes 来做到这一点，但 JTable 出了问题）

我尝试了 getValueAt(int row, int col) 方法来更改 CellEditor 并将值设置为空字符串（如无选择），但它不能正常工作。没有正确更新 JComboBox 并且不允许选择和其他一些奇怪的事情。

此外，为第一列 JComboBox 尝试了 ItemListener，但我找不到正确更新第二列 JComboBox 的方法。我尝试更改所选行的 CellEditor，但它似乎也与其他行混淆了，它更像是它记得以前选择的行或类似的东西。

在 JTable 中进行链式选择的正确方法是什么？我已经搞砸了将近一个星期..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:59:47.760

在您的情况下，您应该使用单元格编辑器（您的 JCombobox）。从编辑器中，您可以从 JCombobox 获取值并将此值设置为另一个 JCombobox。在我看来，您可以 1）获得选定的单元格；2）从单元格中你可以得到单元格编辑器；3）从编辑器（如果编辑器是JCombobox你可以得到文本字段组件，从这个组件你可以得到值，在这种情况下jCombobox必须是可编辑的）你可以得到值。

# dataframe - Pandas DataFrame - 基于列子集的计算列

> ID：14623935
> 
> 赞同：3
> 
> 时间：2013-01-31T10:48:43.657
> 
> 标签：dataframe, pandas, calculated-columns

我有以下数据框

```
 Qtr Premium      Claim     Rate

Type    Code                                           
A        3                  14  3552.77      100991.7  0.004017
         3                  15  5610.67      105763.6  0.004017
         3                  16  6463.22      107740.6  0.004017
         4                  17  6129.91      106967.7  0.005638
         4                  18  4688.65      103625.6  0.005638
         4                  19  2158.94      97759.66  0.005638
         4                  20  8540.77      89369.72  0.005638 
```

我有恒定的“c”

我希望使用 Qtr 和 Rate 中的相关值进行逐行计算，但会更新 Premium 和 Claim 的值。

例子：

```
Premium = Premium / (1+Rate)^(c-Qtr)
Claim = Claim / (1+Rate)^(c-Qtr) 
```

实际上，我有很多列需​​要进行此计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:31:38.030

使用 df 是您的数据框的名称，而 c 是您的常量，请尝试：

```
df['Premium'] = df.Premium / ( 1 + df.Rate ) ** (c - df.Qtr)
df['Claim'] = df.Claim / ( 1 + df.Rate ) ** ( c - df.Qtr ) 
```

更新评论，我确信有一种更 Pythonic 的方式可以做到这一点，但这有效：

```
columns = df.columns
subset_cols = columns.drop(['Rate','Qtr'])
for col in subset_cols:
    df[col] = df[col] / ( 1 + df.Rate ) ** (c- df.Qtr) 
```

第二次更新，您可以将计算提取到一个函数中并在列表理解中执行该过程

```
def calc(df, col, c):
    df[col] = df[col] / ( 1 + df.Rate ) ** ( c - df.Qtr )
[calc(df, col, c) for col in df.columns.drop(['Rate','Qtr'])] 
```

# c# - Windows Phone 8 项目中未生成本地化文件

> ID：14623942
> 
> 赞同：2
> 
> 时间：2013-01-31T10:49:14.857
> 
> 标签：c#, localization, windows-phone-8

我对 Windows Phone 8 SDK 有疑问。根据 MSDN，当我在项目属性（WMAppManifest）中检查其他语言时，应该自动创建新的本地化文件。所以当我检查斯洛伐克（斯洛伐克）时，应该在 AppResources.resx 旁边生成一个 AppResources.sk-SK.resx。这没有发生。当我手动创建文件时（就像我在 WP7 中所做的那样），它不起作用。

我尝试重新安装 Windows Phone 8 SDK，但没有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T12:26:24.043

不要依赖自动资源文件创建。只需在项目属性和应用清单中检查新语言。如果您正在为 WP7 开发应用程序，则必须手动编辑 csproj 文件 - 将支持的语言代码添加到此标签中：

```
<SupportedCultures>cs-CZ;de-DE;fr-FR;it-IT;es-ES;ru-RU;pt-PT;</SupportedCultures> 
```

然后您只需在主资源文件 AppResources.resx 旁边添加以您的案例 AppResources.sk-SK.resx 命名的本地化资源文件。

# web-audio-api - Web Audio API：如何仅在左声道或右声道中播放单声道源？

> ID：14623947
> 
> 赞同：7
> 
> 时间：2013-01-31T10:49:37.297
> 
> 标签：web-audio-api

有没有一种（简单的）方法可以获取单声道输入并仅在左声道或右声道中播放？我想我可以通过 ScriptProcessing 节点来做到这一点，但是如果有一个节点可以处理这种情况，我真的很想知道。API 有一个关于混合的部分，但我没有看到任何关于如何以这种方式自己操作通道的代码。

请注意，我已经尝试过 panner 节点，但它似乎并没有真正切断右声道的左声道，我不希望任何声音从一个声道流到另一个声道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T21:46:21.160

您确实想使用 ChannelSplitter，尽管在通道未连接时存在错误。请参阅此问题：[在单个通道中播放振荡](https://stackoverflow.com/questions/14464693/play-an-oscillation-in-a-single-channel/14470515#comment20230745_14470515)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T15:37:12.700

看一下拆分器节点：[https ://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#ChannelSplitterNode-section](https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html#ChannelSplitterNode-section)

> ChannelSplitterNode 的一个应用是在需要对每个通道进行单独增益控制的情况下进行“矩阵混合”。

（我还没试过，告诉我：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-04T02:58:49.610

您可以尝试使用`CreatePanner()`，然后`setPosition()`转到所需的频道。不要忘记将之前的节点连接到 panner 节点，并将 panner 连接到`context.destination`.

例如：

```
//Lets create a simple oscilator just to have some audio in our context
var oscillator = context.createOscillator();

//Now lets create the panner node
var pannerNode = context.createPanner();

//Connecting the nodes
oscillator.connect(pannerNode); //Connecting the oscillator output to the panner input
pannerNode.connect(context.destination); //Connecting the panner output to our sound output

//Setting the position of the sound
pannerNode.setPosition(-1, 0, 0);//If you want it to play on the left channel
pannerNode.setPosition(1, 0, 0);//If you want it to play on the right channel

//Playing the sound
oscillator.noteOn(0); 
```

那是你需要的吗？

# android - 适用于 Android 的 Facebook SDK 3.0 - “我的朋友”请求永远不会返回

> ID：14623949
> 
> 赞同：2
> 
> 时间：2013-01-31T10:49:45.117
> 
> 标签：android, facebook, facebook-graph-api, android-facebook

我已经开始升级到适用于 Android 的 Facebook SDK 3.0。我设法打开了一个活动会话（使用该`Session.openActiveSession(...)`方法）并获取当前用户的信息（使用该`Request.executeMeRequestAsync(...)`方法）。然而！当我尝试按如下方式获取当前用户的朋友列表时...

```
Request.newMyFriendsRequest(
    Session.getActiveSession(),
    new Request.GraphUserListCallback()
    {
      @Override
      public void onCompleted(List<GraphUser> users, Response response)
      {
        // never called
      }
    }); 
```

...`onCompleted(...)`回调永远不会被调用，我的用户永远挂着。我已经检查过了，我的访问令牌是有效的，我[很确定](http://developers.facebook.com/docs/reference/api/user/#friends)不需要额外的权限来获取当前用户的朋友列表。有什么想法吗？我被卡住了，Facebook 开发人员的错误报告被禁用了！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T18:40:40.320

调用 Request.newMyFriendsRequest 只是创建请求，它不会执行它。

您需要执行以下操作：

```
Request request = Request.newMyFriendsRequest(...);
request.executeAsync(); 
```

要不就

```
Request.newMyFriendsRequest(...).executeAsync(); 
```

# spring - 阻止与 Access Manager 的连接

> ID：14623950
> 
> 赞同：0
> 
> 时间：2013-01-31T10:49:53.510
> 
> 标签：spring, servlet-filters, web.xml, openam

GlassFish、策略代理、OpenAM、Spring 门户：

我有一项任务是阻止某些被阻止的用户访问访问管理器（用户通过使用门户被动态阻止），这样他们就无法连接到它并使 AM 过载。经过一番谷歌搜索后，我了解到我需要在 Policy Agent 步骤中阻止访问访问管理器（可能是我错了），我发现可以在 web.xml 中添加过滤器。

所以我添加了自定义过滤器，将被阻止的用户重定向到另一个页面：

```
<filter>
    <filter-name>denyBlockedUsers</filter-name>
    <filter-class>some.portal.servlets.DenyBlockedUsers</filter-class>
</filter>

<filter-mapping>
    <filter-name>denyBlockedUsers</filter-name>
    <url-pattern>/locked/*</url-pattern>
</filter-mapping> 
```

一切正常。

对于 AM，我有过滤器：

```
<filter>
    <filter-name>Agent</filter-name>
    <filter-class>com.sun.identity.agents.filter.AmAgentFilter</filter-class>
</filter> 
```

问题：在这个过滤器之前真的不会连接到访问管理器吗？我怎样才能检查它？日志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:16:23.000

筛选一个您可以执行以下操作。

如果请求来自被阻止的用户，则第一个过滤器本身可以转至另一个错误页面，如blockeduser.jsp，否则转至过滤器2（/agent/*）。

```
<filter>
    <filter-name>
      denyBlockedUsers
    </filter-name>
    <filter-class>
      some.portal.servlets.DenyBlockedUsers
    </filter-class>
  </filter>

  <filter>
    <filter-name>
      Agent
    </filter-name>
    <filter-class>
      com.filters.Filter2
    </filter-class>
  </filter>

  <!-- Map the filter to a Servlet or URL -->

  <filter-mapping>
    <filter-name>
      denyBlockedUsers
    </filter-name>
    <url-pattern>
      /locked/*
    </url-pattern>
  </filter-mapping>

  <filter-mapping>
    <filter-name>
      Agent
    </filter-name>
    <url-pattern>
      /agent/*
    </url-pattern>
  </filter-mapping> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:08:31.617

如果“Access Manager”是 OpenAM，那么 AgentFilter 不得在同一个容器中运行。

通常，“访问管理器”执行身份验证......所以你可以阻止你不认识的人吗？要知道某人的身份验证必须执行。

不过，您可以详细解释您的用例。

# java - 集群环境中的 Java 静态变量

> ID：14623951
> 
> 赞同：5
> 
> 时间：2013-01-31T10:49:56.887
> 
> 标签：java, static, cluster-computing

[为现实生活中的集群环境设计 J2EE 应用程序](http://onjava.com/pub/a/onjava/2004/07/14/clustering.html)

这篇文章说不能在集群环境中使用java静态变量，但是如果我们想使用静态变量之类的特性（集群应用程序中所有对象只共享一个值的副本）我们应该使用什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T10:54:05.773

一个静态变量只能被一个 Java 虚拟机访问，通过一个类加载器加载。如果您需要将此值共享给多个 JVM，您可以使用数据库、缓存（memcached、redis）或任何其他外部系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:50:46.847

您可以尝试`@Stateful`使用`@javax.enterprise.context.ApplicationScoped`.

我没有尝试过，但在我看来 GlassFish 3.1 应该支持它（至少文档不否认它）。

# android - 我在上传时一一调用多个网络服务。在这种情况下，我无法与应用程序交互

> ID：14623953
> 
> 赞同：0
> 
> 时间：2013-01-31T10:50:01.537
> 
> 标签：android, android-layout, android-asynctask

我的问题是，当我调用第一个 web 服务时，我正在显示 ProgressDialog 并带有 please wait... 消息。在这种情况下，我不能做其他事件，比如点击或其他。我必须等到所有网络服务完成。

我想在单个活动中调用多个 Web 服务。但我想在右上角显示进度条，如 android g+ 应用程序和许多其他应用程序。以这种方式我无法与应用程序交互。

请问您能给我一个完美的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T10:59:10.970

你的一个问题有多个答案。

```
I want to show progress bar in top right corner like android g+ app and many other apps 
```

对于上面的查询，您必须使用**自定义进度对话框**。网络上有许多资源可用于制作自定义对话框。

[请参阅示例和参考](https://stackoverflow.com/questions/13910028/using-custom-progressdialog-android)

```
Next, I call first webservice I am showing ProgressDialog with please wait... message. In this case I cant do other event like click or other.I have to wait until all webservices completed.I want to call multiple web services in single activity. 
```

对于此查询，您必须**管理 Thread**或**asynctask 任务**，以便管理您的 Web 服务。

[请参阅示例和参考](http://www.vogella.com/articles/AndroidPerformance/article.html)

# c# - 在单个 DataSet 中填充两个 DataTable

> ID：14623955
> 
> 赞同：0
> 
> 时间：2013-01-31T10:50:10.090
> 
> 标签：c#, .net, c#-4.0, datatable, dataset

我有一个`DataSet.xsd`文件，在这个文件中我有两个，`DataTable`一个是`Bill`，另一个是`BillInfo`现在，我正在编写这段代码

```
string qry = "Select * from BillInfo where [BillNumber]='" +txtbill.Text + "' and [Session]='"+CLS.ses+"'";
        OleDbDataAdapter da = bm.returnDataAdaptor(qry);
        DataSet ds1 = new DataSet();
        da.Fill(ds1);
        DataSets.Bill ds = new DataSets.Bill();
        da.Fill(ds);
        DataTable Dt1 = ds1.Tables[0];
        DataTable dt = ds.Tables.Add("BillInfo");
        dt.Columns.Add("BillNumber", Type.GetType("System.String"));
        dt.Columns.Add("CustomerName", Type.GetType("System.String"));
        dt.Columns.Add("City", Type.GetType("System.String"));
        dt.Columns.Add("Mobile", Type.GetType("System.String"));
        dt.Columns.Add("TotalAmount", Type.GetType("System.String"));
        dt.Columns.Add("Packing", Type.GetType("System.String"));
        dt.Columns.Add("Tax", Type.GetType("System.String"));
        dt.Columns.Add("Transport", Type.GetType("System.String"));
        dt.Columns.Add("Additional", Type.GetType("System.String"));
        dt.Columns.Add("PaybleAmount", Type.GetType("System.Int32"));
        dt.Columns.Add("Session", Type.GetType("System.String"));
        dt.Columns.Add("Date1", Type.GetType("System.DateTime"));
        dt.Columns.Add("Naration", Type.GetType("System.String"));
        dt.Columns.Add("AmountWord", Type.GetType("System.String"));
        dt.Columns.Add("Status", Type.GetType("System.String"));
        dt.Columns.Add("Balance", Type.GetType("System.Int32"));

        for (int i = 0; i < Dt1.Rows.Count; i++)
        {
            DataRow r = dt.NewRow();
            r["BillNumber"] = Dt1.Rows[i][0];
            r["CustomerName"] = Dt1.Rows[i][1];
            r["City"] = Dt1.Rows[i][2];
            r["Mobile"] = Dt1.Rows[i][3];
            r["TotalAmount"] = Dt1.Rows[i][4];
            r["Packing"] = Dt1.Rows[i][5];
            r["Tax"] = Dt1.Rows[i][6];
            r["Transport"] = Dt1.Rows[i][7];
            r["Additional"] = Dt1.Rows[i][8];
            r["PaybleAmount"] = Dt1.Rows[i][9];
            r["Session"] = Dt1.Rows[i][10];
            r["Date1"] = Dt1.Rows[i][11];
            r["Naration"] = Dt1.Rows[i][12];
            r["AmountWord"] = Dt1.Rows[i][13];
            r["Status"] = Dt1.Rows[i][14];
            r["Balance"] = Dt1.Rows[i][15];
            dt.Rows.Add(r);
        }
        string qry1 = "Select * from BillDetails where [BillNumber]='" + txtbill.Text + "'";
        OleDbDataAdapter da1 = bm.returnDataAdaptor(qry1);
        DataSet ds2 = new DataSet();
        da.Fill(ds2);
        da.Fill(ds);
        DataTable Dt2 = ds2.Tables[0];
        DataTable dt2 = ds.Tables.Add("Bill");
        dt2.Columns.Add("BillNumber", Type.GetType("System.String"));
        dt2.Columns.Add("ProductCode", Type.GetType("System.String"));
        dt2.Columns.Add("ProductName", Type.GetType("System.String"));
        dt2.Columns.Add("productSize", Type.GetType("System.String"));
        dt2.Columns.Add("ProductQuantity", Type.GetType("System.String"));
        dt2.Columns.Add("ProductWeight", Type.GetType("System.String"));
        dt2.Columns.Add("Unit", Type.GetType("System.String"));
        dt2.Columns.Add("ProductPrice", Type.GetType("System.String"));
        dt2.Columns.Add("Amount", Type.GetType("System.String"));
        dt2.Columns.Add("Date1", Type.GetType("System.DateTime"));
        for (int i = 0; i < Dt2.Rows.Count; i++)
        {
            DataRow r = dt.NewRow();
            r["BillNumber"] = Dt2.Rows[i][0];
            r["ProductCode"] = Dt2.Rows[i][1];
            r["ProductName"] = Dt2.Rows[i][2];
            r["productSize"] = Dt2.Rows[i][3];
            r["ProductQuantity"] = Dt2.Rows[i][4];
            r["ProductWeight"] = Dt2.Rows[i][5];
            r["Unit"] = Dt2.Rows[i][6];
            r["ProductPrice"] = Dt2.Rows[i][7];
            r["Amount"] = Dt2.Rows[i][8];
            r["Date1"] = Dt2.Rows[i][9];
            dt2.Rows.Add(r);
        } 
```

但在`r["ProductCode"] = Dt2.Rows[i][1];`它显示一个例外。那就是`Column 'ProductCode' does not belong to table BillInfo.`请解决我的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:58:27.780

代替

```
DataRow r = dt.NewRow(); 
```

和

```
DataRow r = dt2.NewRow(); 
```

您只是使用了没有列的错误表`ProductCode`。它必须是“Bill”而不是“BillInfo”。

除此之外：

**当您使用文本框作为 sql 查询的输入时，您可以进行 sql 注入。改用参数。**

[http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter.aspx](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparameter.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:02:59.573

答案很清楚`Column 'ProductCode' does not belong to table BillInfo`，相反我可以看到 Column 'ProductCode' is in `BillDetails`。

# c++ - 使用 make_pair(_Ty1&& _Val1, const _Ty2& _Val2) 在 C++11 中进行重大更改

> ID：14623958
> 
> 赞同：20
> 
> 时间：2013-01-31T10:50:22.077
> 
> 标签：c++, visual-c++, stl, c++11, g++

考虑以下 C++ 程序

```
#include<map>
#include<iostream>
int main() {
    int a = 5, b = 7;
    auto pair = std::make_pair<int, int>(a,b);
    return 0;
    } 
```

[在gcc-4.7.2](http://ideone.com/g3Wcne)中使用 VC11失败并出现不同的错误，尽管它似乎是相关的并且 VC11 错误消息更有意义

```
You cannot bind an lvalue to an rvalue 
```

我从这次失败中了解到的是

1.  VC11 和我想 gcc-4.7.2 只有一个 std::make_pair 实现，`make_pair(_Ty1&& _Val1, const _Ty2& _Val2)`它只能接受一个右值引用。之前的 VC++ 版本示例 VC10 有两个版本，一个接受左值，另一个接受右值引用
2.  右值引用不能用于初始化非 const 引用，即`int & a = b * 5`无效。
3.  我本可以用来`std::move`将其转换`lvalue`为`rvalue`引用并且调用会成功。
4.  由于`std::make_pair`每个参数接受两种不同的类型，因此模板参数解析在所有可能的情况下都可以解析参数的类型，并且不需要显式指定类型。

这种情况似乎微不足道，并且可以通过删除显式类型规范并将定义定义为轻松解决不兼容问题

```
auto pair = std::make_pair(a,b); 
```

*   现在，我的问题是，从库中删除左值实现的驱动因素是什么？
*   是否有可能知道以类似方式更改的任何其他库函数？
*   当我需要针对多个编译器（如 g++、CC、aCC、XL C++）而编译器尚未升级或编译器不支持右值引用和/或移动语义时，如何处理这些情况。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-31T10:58:16.813

`std::make_pair` 存在的唯一目的是利用类型推导来避免键入类型的名称。这就是为什么只有一个重载（它应该采用两个[通用引用](http://isocpp.org/blog/2012/11/universal-references-in-c11-scott-meyers)，而不是 VC 似乎认为的一个通用引用和一个对 const 的左值引用）。

```
template <class T1, class T2>
constexpr pair<V1, V2> make_pair(T1&& x, T2&& y); 
```

如果要显式键入类型，则可以使用 pair 构造函数。甚至更短...

```
auto pair = std::pair<int, int>(a,b); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-31T11:01:46.777

当你这样做时`std::make_pair<int, int>`，你将强制模板参数`T1`和`T2`都被推导出为`int`. 这为您提供了`std::pair<int,int> make_pair(int&&, int&&)`. 现在这些参数只能采用右值，因为它们是右值引用。

但是，当 和 的类型`T1`被`T2`模板类型推导推导时，它们充当“通用引用”。也就是说，如果他们收到一个左值参数，他们将是左值引用，如果他们收到一个右值参数，他们将是右值引用。这提供`make_pair`了进行完美转发的能力。

所以重点是，不要显式地给出模板类型参数。的全部意义`make_pair`在于它推断出类型本身。如果您命名类型，它就不能再进行完美转发，并且对于左值参数将失败。

# google-chrome - 在 Nexus 7 上将低延迟视频流式传输到 Chrome

> ID：14623963
> 
> 赞同：1
> 
> 时间：2013-01-31T10:50:52.427
> 
> 标签：google-chrome, video-streaming, html5-video, gstreamer, nexus-7

我们需要将实时视频流式传输到 Android 平板电脑，几乎没有延迟。我们更喜欢流式传输到 Web 应用程序，而不是编写 Android 应用程序。然而，到目前为止，我在 Nexus 7 上使用 gstreamer 和网络摄像头将视频流式传输到 Chrome 的努力被证明过于滞后，延迟大约为 5 秒。我一直在尝试使用 webm/vp8，但如果其他方法更好，我不会使用它。

也许有一些我没有使用的 gstreamer 选项？有更好的编解码器/格式/其他吗？

```
gst-launch-0.10 -q v4l2src device=/dev/video0 ! \
  'video/x-raw-yuv,framerate=30/1,width=320,height=240' ! \
  vp8enc max-latency=1 ! webmmux name='mux' streamable='true' ! fdsink fd=1 
```

是我一直在使用的gstreamer命令行，但gstreamer不是必需的。例如，如果我们必须编写自己的 C 代码来使用 webm 中的一些高级选项，那将不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-16T15:48:32.827

[尝试从这篇](https://stackoverflow.com/questions/12020430/look-for-fastest-video-encoder-with-least-lag-to-stream-webcam-streaming-to-ipad)文章的答案中获得的方法。

使用 libxh264 和 ffmpeg 遵循这些建议会导致非常小的延迟。

# android - (a)Smack：尝试使用 XMPP 登录时，TLS 套接字已关闭

> ID：14623967
> 
> 赞同：1
> 
> 时间：2013-01-31T10:51:09.603
> 
> 标签：android, ssl, xmpp, smack, asmack

我正在尝试将 asmack (Android Gingerbread) 连接到 google talk。我已经设置`connectionConfig.setTruststoreType("BKS")`- 所以我克服了证书问题。现在故障出在`XMPPConnection.proceedTLSReceived()`函数中，该函数在服务器为“starttls”请求发送“proceed”后调用。

这个函数应该初始化 TSL 套接字。它失败并出现异常“java.net.SocketException：Socket closed”。

```
// Verify certificate presented by the server
context.init(kms,
    new javax.net.ssl.TrustManager[]{new ServerTrustManager(getServiceName(), config)},
    //new javax.net.ssl.TrustManager[]{new OpenTrustManager()},
    new java.security.SecureRandom());
Socket plain = socket;
// Secure the plain connection
socket = context.getSocketFactory().createSocket(plain, plain.getInetAddress().getHostName(), plain.getPort(), false);
socket.setSoTimeout(0); ////// THIS LINE THROWS THE EXCEPTION 
```

有什么线索吗？

套接字描述为：SSL 套接字 over Socket[addr=talk.google.com/173.194.70.125,port=5222,localport=34840]

它在模拟器和我的 Galaxy S I9000 上失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:31:33.617

事实证明，SSL 连接存在超时问题。我的应用程序花了很多时间来生成 SSL 套接字（通过普通套接字），而对方只是放弃了......这个，或者有一个关键问题（但我没有收到任何身份验证错误）。

我通过以下方式解决了问题：

1.  移动到 API 级别 15 - 使用 AndroidCSStore，而不是 BKS（我用于 API 10）。
2.  [使用getAuthToken](http://developer.android.com/reference/android/accounts/AccountManager.html#getAuthToken%28android.accounts.Account,%20java.lang.String,%20android.os.Bundle,%20boolean,%20android.accounts.AccountManagerCallback%3Candroid.os.Bundle%3E,%20android.os.Handler%29)获取密码- 它实际上是一个令牌，但稍后在连接时用作密码。
3.  我没有空闲时间来真正深入了解问题。它现在可以工作了，这就是最重要的。

我在下面发布了我的代码。SASLXOAuth2机制完成。但是 Main 中的代码是有条不紊的，并不完整。我从这个网站上的其他答案中撕下了代码片段，我提前为我的抄袭道歉。

**Main.java - 启动 asmack**

```
// Init asmack, and register new mechanisms.
asmack = SmackAndroid.init(ctx);

SASLAuthentication.registerSASLMechanism("X-OAUTH2", SASLXOAuth2Mechanism.class);
SASLAuthentication.supportSASLMechanism("X-OAUTH2", 0);

ConnectionConfiguration connectionConfig = 
    new ConnectionConfiguration (getHost(), getPort(), getService());
connectionConfig.setSASLAuthenticationEnabled(true);
connectionConfig.setSecurityMode(true);
connectionConfig.setRosterLoadedAtLogin(true);
connectionConfig.setReconnectionAllowed(true);
connectionConfig.setSendPresence(false);
//connectionConfig.setCompressionEnabled(true);

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
        connectionConfig.setTruststoreType("AndroidCAStore");
        connectionConfig.setTruststorePassword(null);
        connectionConfig.setTruststorePath(null);
} /*else {
        connectionConfig.setTruststoreType("BKS");
        String path = System.getProperty("javax.net.ssl.trustStore");
        if (path == null)
            path = System.getProperty("java.home") + File.separator + "etc"
                + File.separator + "security" + File.separator
                + "cacerts.bks";
        connectionConfig.setTruststorePath(path);
        connectionConfig.setTruststorePassword("changeit");
 //} */

 XMPPConnection con = new XMPPConnection(connectionConfig); 
```

**SASLXOAuth2Mechanism.java - XOAuth2 机制**

```
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import org.jivesoftware.smack.SASLAuthentication;
import org.jivesoftware.smack.XMPPException;
import org.jivesoftware.smack.packet.Packet;
import org.jivesoftware.smack.sasl.SASLMechanism;
import org.jivesoftware.smack.util.Base64;

import de.measite.smack.Sasl;

public class SASLXOAuth2Mechanism extends SASLMechanism
{
    static final String AUTHENTICATOR_URL = "http://www.google.com/talk/protocol/auth";
    protected String authenticationText = null;
    static final String TAG = "SASLXOAuth2Mechanism";

    public SASLXOAuth2Mechanism(SASLAuthentication saslAuthentication) {
        super(saslAuthentication);
    }

    @Override
    protected String getName()
    {
        return "X-OAUTH2";
    }

    @Override
    public void authenticate(String username, String host, String password) throws IOException, XMPPException {
        this.password = password;
        this.authenticationId = username;

        StringBuilder credentials = new StringBuilder();
        credentials.append("\0");
        credentials.append(username);
        credentials.append("\0");
        credentials.append(password);
        authenticationText = Base64.encodeBytes(credentials.toString().getBytes("UTF-8"), Base64.DONT_BREAK_LINES);

        String[] mechanisms = { "PLAIN" };
        Map<String,String> props = new HashMap<String,String>();
        sc = Sasl.createSaslClient(mechanisms, username, "xmpp", host, props, this);
        authenticate();
    }

    protected void authenticate() throws IOException, XMPPException {
        // Send the authentication to the server
        getSASLAuthentication().send(new XOAuth2AuthMechanism(getName(), authenticationText));
    }

    /**
     * Initiating SASL authentication by select a mechanism.
     */
    public class XOAuth2AuthMechanism extends Packet {
        final private String name;
        final private String authenticationText;

        public XOAuth2AuthMechanism(String name, String authenticationText) {
            super();
            this.name = name;
            this.authenticationText = authenticationText;
        }

        public String toXML() {
            StringBuilder stanza = new StringBuilder();
            stanza.append("<auth mechanism=\"").append(name);
            stanza.append("\" xmlns=\"urn:ietf:params:xml:ns:xmpp-sasl\" auth:service=\"oauth2\" xmlns:auth=\"").append(AUTHENTICATOR_URL);
            stanza.append("\">");
            if (authenticationText != null) {
                stanza.append(authenticationText);
            }
            stanza.append("</auth>");
            return stanza.toString();
        }
    }
} 
```

# excel - 将数据从一个工作簿复制到另一个工作簿

> ID：14623971
> 
> 赞同：0
> 
> 时间：2013-01-31T10:51:15.663
> 
> 标签：excel, vba

我浏览了这个网站并得到了类似的代码。我的问题是代码正在打开文件但没有粘贴数据。我试图粘贴数据的工作簿是 TRY 5.xlsm，我粘贴的范围是 B3。我正在从 BAFD.xlsx 的工作簿副本中复制数据，范围为`V1:AF1`.

```
Sub CopyData()

    Dim wb1 As Workbook, wb2 As Workbook
    Dim ws1 As Worksheet, ws2 As Worksheet

    Set wb1 = Workbooks.Open("C:\Documents and Settings\43707844\Desktop\Change of weights\Svar\BAFD\Copy of BAFD.xlsx")
    Set wb2 = Workbooks.Open("C:\Documents and Settings\43707844\Desktop\Change of weights\Svar\BAFD\Practise\TRY 5.xlsm")

    Set ws1 = wb1.Sheets("Calib_30Nov")
    Set ws2 = wb2.Sheets("Calib29_30")

    With ws1.Range("V1:AF1").Select
    Range(Selection, Selection.End(xlDown)).Select
    Selection.Copy
    ws2.Range("B3").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, _
        SkipBlanks:=False, Transpose:=False

    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:22:20.387

您无需选择任何内容或使用该 With 语句 - 这行得通吗？

```
Sub CopyData()

Dim wb1 As Workbook, wb2 As Workbook
Dim ws1 As Worksheet, ws2 As Worksheet

Set wb1 = Workbooks.Open("C:\Documents and Settings\43707844\Desktop\Change of weights\Svar\BAFD\Copy of BAFD.xlsx")
Set wb2 = Workbooks.Open("C:\Documents and Settings\43707844\Desktop\Change of weights\Svar\BAFD\Practise\TRY 5.xlsm")

Set ws1 = wb1.Sheets("Calib_30Nov")
Set ws2 = wb2.Sheets("Calib29_30")

ws1.Range("V1:AF1", ws1.Range("V1:AF1").End(xlDown)).Copy
ws2.Range("B3").PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, _
    SkipBlanks:=False, Transpose:=False

End Sub 
```

* * *

编辑：好的，让我们采用不同的方法，我们将定义 2 个范围对象并以编程方式传输值，而不是使用复制/粘贴：

```
Sub CopyData()

Dim wb1 As Workbook, wb2 As Workbook
Dim ws1 As Worksheet, ws2 As Worksheet
Dim rngCopy As Range, rngPaste As Range

Set wb1 = Workbooks.Open("C:\Documents and Settings\43707844\Desktop\Change of weights\Svar\BAFD\Copy of BAFD.xlsx")
Set wb2 = Workbooks.Open("C:\Documents and Settings\43707844\Desktop\Change of weights\Svar\BAFD\Practise\TRY 5.xlsm")

Set ws1 = wb1.Sheets("Calib_30Nov")
Set ws2 = wb2.Sheets("Calib29_30")

Set rngCopy = ws1.Range("V1:AF1", ws1.Range("V1:AF1").End(xlDown))
Set rngPaste = ws2.Range("B3").Resize(rngCopy.Rows.Count, rngCopy.Columns.Count)
rngPaste.Value = rngCopy.Value

End Sub 
```

* * *

编辑 - 现在应该通过工作表并为每个工作表复制数据：

```
Sub CopyData()

Dim wb1 As Workbook, wb2 As Workbook
Dim ws1 As Worksheet, ws2 As Worksheet
Dim rngCopy As Range, rngPaste As Range
Dim strWs1 As String, strWs2 As String, i As Integer, arrSheets() As String
Dim blnExists1 As Boolean, blnExists2 As Boolean

Set wb1 = Workbooks.Open("C:\Documents and Settings\43707844\Desktop\Change of weights\Svar\BAFD\Copy of BAFD.xlsx")
Set wb2 = Workbooks.Open("C:\Documents and Settings\43707844\Desktop\Change of weights\Svar\BAFD\Practise\TRY 5.xlsm")

'Put all BAFD.xlsx worksheet names into a string array so we can check that they exist
ReDim arrSheets(wb1.Worksheets.Count)
For i = 1 To wb1.Worksheets.Count
    arrSheets(i) = wb1.Worksheets(i).Name
Next

'Loop through all sheets in TRY 5, identify numbers and transfer data across
For Each ws2 In wb2.Worksheets
    Debug.Print "WS2 Name: " & ws2.Name
    strWs1 = Mid(ws2.Name, 5, 2)
    strWs2 = Mid(ws2.Name, 8, 2)
    Debug.Print "WS2 1 Number: " & strWs1
    Debug.Print "WS2 2 Number: " & strWs2
    blnExists1 = False
    blnExists2 = False
    'Check that sheets exist in BAFD.xlsx
    For i = LBound(arrSheets) To UBound(arrSheets)
        If arrSheets(i) = "Calib_" & strWs1 Then blnExists1 = True
        If arrSheets(i) = "Calib_" & strWs2 Then blnExists2 = True
    Next

    Debug.Print "WS1 Exists: " & blnExists1
    Debug.Print "WS2 Exists: " & blnExists2

    'If both exist, copy the values across. If they don't, move on to the next one
    If blnExists1 = True And blnExists2 = True Then
        'Get first sheet details
        Set ws1 = wb1.Sheets("Calib_" & strWs1)
        Set rngCopy = ws1.Range("V1:AF1", ws1.Range("V1:AF1").End(xlDown))
        Set rngPaste = ws2.Range("B3").Resize(rngCopy.Rows.Count, rngCopy.Columns.Count)
        rngPaste.Value = rngCopy.Value
        'Get second sheet details
        Set ws1 = wb1.Sheets("Calib_" & strWs2)
        Set rngCopy = ws1.Range("V1:AF1", ws1.Range("V1:AF1").End(xlDown))
        Set rngPaste = ws2.Range("N3").Resize(rngCopy.Rows.Count, rngCopy.Columns.Count)
        rngPaste.Value = rngCopy.Value
    End If
Next

End Sub 
```

# java - 如何在 Wicket 中验证 PageableListView 中的所有项目？

> ID：14623973
> 
> 赞同：0
> 
> 时间：2013-01-31T10:51:23.533
> 
> 标签：java, listview, pagination, wicket

在表单中，我使用**PageableListView**来迭代 TextFields。但是当我提交表单时，它只验证 PageableListView 的当前页面。当我回到例如。第 1 页我填写的所有值都消失了。

当我将 PageableListView 更改为标准 ListView 时，一切正常——验证和提交。

我在 ListView 中设置：setReuseItems(true)。

如何验证 PageableListView 中的所有项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T10:56:31.373

您只能在屏幕上验证表单中的项目。如果您希望验证第一页上的内容，我认为您需要在分页控件上使用 (ajax)FormSubmittingBehavior，因此每次导航到另一个页面时都会提交您的表单。

如果您提交数据，如果没有验证错误，它也将被存储。

# sharepoint - 从 SharePoint Online 检索 Office 365 目录信息

> ID：14623975
> 
> 赞同：1
> 
> 时间：2013-01-31T10:51:28.043
> 
> 标签：sharepoint, office365

我想知道是否可以通过编程方式（例如通过工作流自定义操作）从 SharePoint Online 检索 Office 365 目录信息（即安全组成员身份）？顺便说一句，我不是要检索 Sharepoint 组成员信息。

我知道使用 SharePoint Online 的自定义开发非常有限，因为代码必须作为沙盒解决方案运行。是否有任何网络服务或任何其他可用的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:06:43.567

我一直在寻找有关这件事的信息，但我找不到任何东西，所以我想没有办法做到这一点。

在我们的例子中，有一个与 office 365 同步的活动目录。因此，我们将使用 powershell 脚本从 AD 读取数据并每天更新共享点列表。然后我们将能够使用自定义代码中的这些数据（如工作流自定义操作）。

# perl - 在 perl 中使用正则表达式匹配创建哈希

> ID：14623979
> 
> 赞同：3
> 
> 时间：2013-01-31T10:51:36.177
> 
> 标签：perl

可以说我有一个如下文件：

我想将所有十进制数字存储在哈希中。

```
hello world 10 20
world 10 10 10 10 hello 20
hello 30 20 10 world 10 
```

我在看[这个](http://theunixshell.blogspot.com/2013/01/capturing-all-regex-matches-into-array.html)

这很好用：

```
> perl -lne 'push @a,/\d+/g;END{print "@a"}' temp
10 20 10 10 10 10 20 30 20 10 10 
```

然后我需要计算每个正则表达式的出现次数。

为此，我认为将所有匹配项存储在哈希中并为每个键分配一个递增值会更好。

所以我尝试了：

```
perl -lne '$a{$1}++ for ($_=~/(\d+)/g);END{foreach(keys %a){print "$_.$a{$_}"}}' temp 
```

这给了我一个输出：

```
> perl -lne '$a{$1}++ for ($_=~/(\d+)/g);END{foreach(keys %a){print "$_.$a{$_}"}}' temp
10.4
20.7 
```

任何人都可以纠正我的错误吗？

我期望的输出是：

```
10.7
20.3
30.1 
```

虽然我可以在 awk 中做到这一点，但我**只想在 perl 中做到这一点**

输出的顺序也不是我关心的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T10:55:34.580

```
$a{$1}++ for ($_=~/(\d+)/g); 
```

这应该是

```
$a{$_}++ for ($_=~/(\d+)/g); 
```

并且可以简化为

```
$a{$_}++ for /\d+/g; 
```

这样做的原因是`/\d+/g`创建了一个匹配列表，然后由 迭代`for`。当前元素在`$_`. 我想`$1`会包含最后一场比赛留下的任何东西，但这绝对不是你想在这种情况下使用的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T11:09:35.027

另一种选择是：

```
$a{$1}++ while ($_=~/(\d+)/g); 
```

这就是我认为你期望你的代码做的事情：在匹配发生时循环每个成功的匹配。因此，这`$1`将是你认为的那样。

只是为了清楚区别：

Perl 中的单参数`for`循环意味着“为列表的每个元素做一些事情”：

```
for (@array)
{
    #do something to each array element
} 
```

因此，在您的代码中，首先构建了一个匹配列表，只有在找到整个匹配列表之后，您才有机会对结果进行处理。 `$1`在构建列表时在每个匹配项上重置，但是在您的代码运行时，它被设置为该行的最后一个匹配项。这就是为什么你的结果没有意义。

另一方面，while 循环的意思是“每次检查这个条件是否为真，并一直持续到条件为假”。因此，while 循环中的代码将在正则表达式的*每个*匹配项上执行，并`$1`具有该匹配项的值。

另一个在 Perl 中很重要的区别是文件处理。`for (<FILE>) { ... }`先把整个文件读入内存，比较浪费。建议`while (<FILE>)`改用，因为那样你会逐行浏览文件并只保留你想要的信息。

# php - 在目录结构中搜索应用程序配置文件是一个坏主意吗？

> ID：14623981
> 
> 赞同：0
> 
> 时间：2013-01-31T10:51:40.100
> 
> 标签：php

我有一个 php 应用程序，其根目录中有一个配置文件。如果我通过它的绝对路径包含它，那么当我将应用程序移动到其他地方时会出现问题。如果我通过相对路径包含它，那么当我移动包含配置的文件时会出现问题。所以，我想出了这样的东西来搜索目录结构中的应用程序配置文件。

```
$relative_path = "";
for ($i=0; $i<6; $i++) {
    if (file_exists($relative_path."config.php")) {
        require ($relative_path."config.php");
        break;
    } 
    $relative_path .= "../";
} 
```

这可能是个坏主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T11:02:26.840

这会增加一些安全风险。- 如果有人设法将配置文件放在“顶部”，您的脚本会首先找到它并包含/执行它......（这可能从配置操作到一些严重的攻击......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:54:24.413

我个人使用`dirname(__FILE__) . '/path/to/config.php';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T11:04:18.130

你为什么不尝试使用服务器全局变量？例如：

```
require($_SERVER['DOCUMENT_ROOT'].'/../config.php'); 
```

# jquery - 网页上可折叠集的jQuery移动宽度

> ID：14623982
> 
> 赞同：0
> 
> 时间：2013-01-31T10:51:39.927
> 
> 标签：jquery, jquery-mobile

我有一个可折叠集，可以在代表移动设备的狭窄网页上正常工作。当我增加页面的宽度时，集合会正确扩展 - 直到背景对象从顶部按钮后面弹出。这涵盖了通常高于显示中可折叠集的任何内容。

当页面宽度为 690 px (?)

这意味着显示在 iphone 上与预期的一样，但在 iPad 上损坏。

任何有关如何阻止这种情况发生的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:55:49.320

我找到了问题的原因。它不是可折叠的设置，而是页面上更高的滑块。当我移除滑块时，可折叠集正确展开而没有出现背景对象。我仍然不知道为什么会发生干扰，但我稍后会调查。

# smtp - 通过 PHP smtp 向 gmail 发送电子邮件，hotmail 工作正常吗？

> ID：14623984
> 
> 赞同：0
> 
> 时间：2013-01-31T10:51:53.783
> 
> 标签：smtp, gmail, laravel

我正在尝试使用 Swiftmailer 包从我的 Laravel 应用程序发送电子邮件。我的设置是

```
'transports' => array(

    'smtp' => array(
        'host'       => 'server.myserver.com',
        'port'       => 465,
        'username'   => 'info@mywebsite.co.uk',
        'password'   => 'XXXXXXXXX',
        'encryption' => 'ssl',
    ),

    'sendmail' => array(
        'command' => '/user/sbin/sendmail -bs',
    ),

    'mail',

), 
```

当我通过我的应用程序向 GMAIL 帐户发送邮件时，服务器说它发送，我的 WHM 电子邮件发送报告说它成功，但用户从未收到电子邮件。当我将它测试到 hotmail 帐户时，它工作正常。

我的服务器上有 mod_ssl 和 openssl，所以不能这样，并且它发送到 hotmail，所以我看不出为什么不是 gmail？

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T14:44:32.617

如果它适用于 hotmail，则基本的邮件程序正在运行。所以问题肯定出在邮件服务器上。在我看来，您的邮件被 gmail 和/或其他邮件服务归类为垃圾邮件，因此未送达。检查 SMTP 服务器是否设置了适当的 DKIM 和 SPF 记录。另外，检查 der 服务器日志。

但是，我可以推荐使用像**[postmark](http://postmarkapp.com)**这样的邮件 API 。没有更多的 SMTP 麻烦。有一个 laravel 邮戳包可用，这让发送邮件变得轻而易举。

# ajax - Jsf 2 - ajax 事件更新

> ID：14623988
> 
> 赞同：0
> 
> 时间：2013-01-31T10:52:10.880
> 
> 标签：ajax, jsf-2

我正在尝试更新先前下拉列表中值更改的下拉列表（以另一种形式，另一个 xhtml 文件）。这是目前使用的代码：

...

```
 <f:selectItems value="#{createbill.episodeSetting}"/>
<p:ajax event="change" update=":chargesForm:tab2:serviceSetting"></p:ajax> 
```

...

当此值更改时，我需要相同的值显示在另一个下拉列表中，该下拉列表采用不同的形式（chargesForm），位于不同的文件中。需要注意的重要一点是，两个下拉列表具有相同的值。

根据我上面提到的要求，此代码无法正常运行。请建议...

# python - 尝试打印复杂输出时出现语法错误

> ID：14623989
> 
> 赞同：-1
> 
> 时间：2013-01-31T10:52:11.480
> 
> 标签：python

谁能帮我纠正python中的语法。输出如下：

```
ip='180.211.134.66'
port='123'

print ({"http":"http://"+ip +":"+ port +"})" 
```

我想得到这样的输出：

```
({"http":"http://180.211.134.66:123"}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T10:55:12.960

尝试为此使用[str.format](http://docs.python.org/2/library/string.html#string.Formatter.format)：

```
ip='180.211.134.66'
port='123'
data = {"http":"http://{0}:{1}".format(ip, port)}
print '({0})'.format(data) 
```

在一行中：

```
print "({0})".format({"http": "http://{0}:{1}".format(ip, port)}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T10:54:24.623

最后两个双引号是不必要的。删除它们，你有：

```
ip='180.211.134.66'
port='123'

    data = { 'http' : 'http://' + ip + ':' + port }
    print str(data)

    # output like this ({"http":"http://180.211.134.66:123"}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:54:19.803

假设您希望整个输出为字符串...

您应该使用单引号来包含字符串或转义双引号。

用这个：

```
ip='180.211.134.66'
port='123'

print '({"http":"http://' + ip + ':' + port + '"})' 
```

或者

```
print "({\"http\":\"http://" + ip + ":" + port + "\"})" 
```

输出：

```
({"http":"http://180.211.134.66:123"}) 
```

# ruby-on-rails - 我如何在rails的每个数组中包含一个变量？

> ID：14623995
> 
> 赞同：1
> 
> 时间：2013-01-31T10:52:26.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有用户模型，我想要用户列表作为 json，我想要`length of name`每个用户的响应，但我不知道我该怎么做？我已经尝试如下所示，它导致了`double render`错误。如果我从循环中获取 response_to，那么它什么也不返回。所以请帮助我。

```
@users = User.all
   @users.each do |user|
      length = user.name.count
        respond_to do |format|
          format.json { render json: @users.to_json(:include => [:length]) }
        end
      end 
```

我希望回复像

> [{"user":{"name":asgd,"id":1,"length":"4"}},{"user":{"name":asdfg,"id":2,"length" :"5"}}]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:03:02.270

尝试：

```
@users = User.all
all_users = Array.new
@users.each do |user|
  all_users << {"id" => user.id, "name" => user.name,"length" => user.name.size}
end
respond_to do |format|
  format.json { render json: all_users.to_json }
end 
```