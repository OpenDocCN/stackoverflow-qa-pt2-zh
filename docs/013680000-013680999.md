# StackOverflow 问答 13680000-13680999

# mysql - MySQL查询多个AND

> ID：13680007
> 
> 赞同：1
> 
> 时间：2012-12-03T09:05:06.737
> 
> 标签：mysql, sql

假设我有一个 MySQL 表 (meta_table)，如下所示，其中包含以下数据：

```
meta_id,post_id,meta_key,meta_value
5,10,my_key1,value1
10,11,my_key2,value2
15,12,my_key3,value3
35,11,my_key4,value4 
```

如果 meta_value 是 value2 和 value4（答案应该是 11），我如何获得 post_id。我试过这个：

```
SELECT post_id from meta_table where meta_value='value2' and meta_value='value4' 
```

但它不会返回 11 作为 post_id。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:07:20.680

```
SELECT post_id
from meta_table 
where meta_value IN ('value2', 'value4')
GROUP BY post_id
HAVING COUNT(*) = 2; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/f9b30/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T09:08:46.607

加入：

```
SELECT a.post_id
FROM meta_table AS a
JOIN meta_table AS b ON a.post_id = b.post_id
WHERE a.meta_value = 'value2' AND b.meta_value = 'value4' 
```

[http://www.sqlfiddle.com/#!2/96d2b/4/0](http://www.sqlfiddle.com/#!2/96d2b/4/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T09:07:04.160

尝试使用`OR`

```
SELECT post_id from meta_table where meta_value='value2' OR meta_value='value4' 
```

或者你可以使用`IN`

```
SELECT post_id from meta_table where meta_value IN ('value2', 'value4') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:06:59.140

它应该是 ：

`SELECT post_id from meta_table where meta_value='value2' or meta_value='value4'`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T09:08:47.067

查询是： -

```
SELECT post_id from meta_table
where meta_value='value2' or meta_value='value4'
GROUP BY post_id 
```

# android - Android - 如何侦听 Wifi 配置的网络正在从 Wifi 设置中删除/移除

> ID：13680014
> 
> 赞同：2
> 
> 时间：2012-12-03T09:05:53.587
> 
> 标签：android, android-wifi

如果用户正在删除/删除已在 Wifi 设置中配置的网络，我该如何收听？

[wifi 设置 http://img820.imageshack.us/img820/7058/screenshot2012120316580.png](http://img820.imageshack.us/img820/7058/screenshot2012120316580.png)

例如，在上图中，用户单击“忘记网络”，我如何监听该事件？

是否有可用于该操作的广播？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T21:29:04.637

根据[http://code.google.com/p/android/issues/detail?id=38819](http://code.google.com/p/android/issues/detail?id=38819)，自 ICS 以来没有公共 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:20:30.063

尝试这个 ：：

此方法检查图像的 onclick() 是否已连接到 Internet。如果用户单击“忘记网络”，您可以按相反顺序设置布尔值以断开 Internet 希望这可以解决您的问题::

```
private boolean haveConnectedWifi;
private boolean haveConnectedMobile;

    img.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            haveNetworkConnection();
            if ((haveConnectedWifi)|| (haveConnectedMobile)){
                Toast.makeText(Activity1.this, "Internet is go!", 3000).show();
                Intent i = new Intent(Activity1.this, Activity2.class);
                startActivity(i);
            }
            else{
                Toast.makeText(Activity1.this, "No access to Internet..please try again", 3000).show();
            }
        }
    });

private boolean haveNetworkConnection() {
    haveConnectedWifi = false;
    haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;
} 
```

# windows-8 - Windows 8 应用程序中的必应地图

> ID：13680018
> 
> 赞同：1
> 
> 时间：2012-12-03T09:06:37.513
> 
> 标签：windows-8, microsoft-metro, bing-maps

我的问题类似于这个“ [https://bitly.com/UaQOC4](https://bitly.com/UaQOC4+) ”，但这个问题有点误导。

在我的 Windows 8 应用商店应用程序中，我有一个 Bing 地图引用到南非某处的特定位置。引用的位置将有多个引脚来表示应用程序用户感兴趣的关键区域，每个引脚都有一个信息窗口。

当用户单击图钉时，信息窗口将为他们提供更多信息，例如位置统计信息和应用程序内页面的链接，例如：/pages/nests/crowsnest.html。

我需要的是能够在单击信息窗口中的位置时将用户推送到此页面，但是，这似乎是不允许的。

据我了解，我们试图从应用程序范围之外（信息窗口 == iframe）强制从当前域空间（我们的应用程序）内加载页面，因为这不是网页，这似乎是不允许的。

我的假设是否正确，因为我们试图在这里破坏域策略？我不明白我们怎么做，因为我们只是将用户重定向到一个页面。

我已经尝试过 WinJS.Navigation.navigate("/pages/nests/crowsnets.html") 和事件一个正常的 -tag 但这些方法都没有让我成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-18T07:08:21.547

我仍然不确定您要达到什么目的。您可以在 Windows 8 应用程序中使用 Bing 地图控件，并且可以在其中固定任何图钉，您还可以处理用户点击任何图钉时的行为并在地图上显示更详细的信息。
[适用于 Windows 应用商店应用的 Bing 地图 SDK](http://visualstudiogallery.msdn.microsoft.com/bb764f67-6b2c-4e14-b2d3-17477ae1eaca)

# java - 如何为数组使用 setter 和 getter

> ID：13680020
> 
> 赞同：0
> 
> 时间：2012-12-03T09:06:38.997
> 
> 标签：java

好的，所以在我的类图上它显示

```
void setVegetable( String veg[] )
String veg[] getVegetables() 
```

只是想知道我将如何为此语句编写代码？

```
public void setVegetables( String veg[] )  
{  
} 
```

另外我将如何编写实例变量？
我还是把它写成

```
private string vegetables = ""; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:16:22.407

简单的答案是使用这样的成员定义：

```
private String[] vegetables; 
```

像这样的二传手：

```
public void setVegetables( String veg[] ) {  
    vegetables = veg;
} 
```

但是，您应该记住，数组是可修改的，这意味着如果您像上面描述的 setter 那样直接存储数组，调用者仍然可以修改数组的内容，因此如果您复制数组内容是一个好习惯想要更好的封装。尽管如果您操作大型数组，这将对性能产生影响。在这种情况下，setter 和 getter 看起来像这样

```
public void setVegetables( String veg[] ) {  
    vegetables = Arrays.copyOf(veg, veg.length);
}

public String[] getVegetables() {  
    return Arrays.copyOf(vegetables, vegetables.length);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:08:28.177

You would need something like

```
private String[] vegetables; 
```

and the setter method

```
public void setVegetables( String[] veg )  { this.vegetables = veg; ) 
```

or suffer a compile error - An array of `String`'s is *not* the same as a `String`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:10:18.207

它应该是这样的：

`public void setVegetables( String[] veg ) { }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:12:11.127

您可以在初始化时将值分配给局部变量，如下所示：

```
private String[] vegetables = new String[]{"Carrot", "Parsnip"}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T09:09:53.900

我会改变变量：

```
private String vegetables; 
```

到一个数组：

```
private String vegetables[]; 
```

然后通常使用 setter 和 getter 方法设置和获取实例数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T09:29:48.460

根据您的类图，您正在查看的实例变量是一个字符串数组。所以实例成员也必须是 String[] 。声明应该像

```
private String[] vegetables;
public void setVegetables( String vegetables[] ) {  
    this.vegetables = vegetables;
}

public String[] getVegetables() {  
    return vegetables;
} 
```

# jquery - Page Load Event in JQuery Mobile Page

> ID：13680027
> 
> 赞同：-1
> 
> 时间：2012-12-03T09:07:03.070
> 
> 标签：jquery, jquery-mobile

From docs [here](http://jquerymobile.com/test/docs/api/events.html):

```
Use $(document).bind('pageinit'), not $(document).ready() 
```

I have the ff in a JQM page:

```
$(document).bind('pageinit',function(event){
    //some code here
}); 
```

The page was loaded via ajax in JQM page, but it was NOT triggered at all. How to make it work?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:09:30.090

try this, it's from the doc

```
$( '#aboutPage' ).live( 'pageinit',function(event){
  alert( 'This page was just enhanced by jQuery Mobile!' );
}); 
```

# sugarcrm - Sugarcrm: remove file on uprades via manifest.php

> ID：13680028
> 
> 赞同：0
> 
> 时间：2012-12-03T09:07:03.257
> 
> 标签：sugarcrm

How can I remove file on loading upgrade of some sugarcrm module?

I can write 'copy' in upgrade section of manifest.php to copy new file. But how can I remove old (useless) file upon install of a newer version of the same module?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:30:37.647

通过“复制”命令安装的任何文件都应在卸载时自动删除/替换。无需其他命令即可使其工作。任何被替换的文件/目录的备份（如果有的话）都保存在上传目录中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T14:54:40.660

您可以使用 scripts/post_install.php 脚本并在其中插入逻辑以删除文件。

# c# - 在 C# 中构建一个数组

> ID：13680032
> 
> 赞同：1
> 
> 时间：2012-12-03T09:07:07.623
> 
> 标签：c#, arrays, list, for-loop, misuse

我无法让此代码为我工作：

```
List<String[]> campaigns = new List<String[]>();
for(int i = 0; i < C; i++){
    campaigns.Add(new String[]{
        weekYear = something[i], 
        campaign = info[i], 
        totalBids = Total1[i], 
        highestBid = Highest[i], 
    });
}
list = campaigns.ToArray(); 
```

我很确定我需要用其他东西替换 String[]，但是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:08:19.233

您需要使用一些具有所需数据类型的自定义数据类型（类），该类型具有属性、weekYear、campaign、totalBids、highestBid。

```
 List<YourDataType> campaigns = new List<YourDataType>();

   campaigns.Add(new YourDataType{
        weekYear = something[i], 
        campaign = info[i], 
        totalBids = Total1[i], 
        highestBid = Highest[i], 
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:28:58.580

```
string[] a1 = new string[] { "a1", "b1", "c1", "d1" };
string[] a2 = new string[] { "a2", "b2", "c2", "d2" };
string[] a3 = new string[] { "a3", "b3", "c3", "d3" };
List<String[]> campaigns = new List<String[]>();
for (int i = 0; i <4; i++)
        {
            campaigns.Add(new String[]{
        a1[i],a2[i],a3[i]});
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:14:48.447

要在这里做一个数组，您需要考虑的是您的初始`List`值将是什么**OF**。`List`将类型放在中间的类型参数`<>`就是您的列表的内容。有时，当你第一次开始做这类事情时，你应该在脑海中用字面的英文来思考。

所以如果你想把`Campaign`你的清单，我会说好的，我想要：

> 活动列表

代码中的哪个是`List<Campaign>`. 您正在以正确的方式添加列表，但您添加的类型不正确，因此希望我的回答能向您解释这一点。它不可避免地会成为一个对象列表，因此您可以拥有`List<Object>`然后将您喜欢的任何内容添加到此列表中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:16:53.110

编写一个包含所需成员的类，并创建一个`[]`该类型的数组（追加）。

或者使用匿名类型：

```
var list = Enumerable.Range(0, C).Select(i => new {
    weekYear = something[i], 
    campaign = info[i], 
    totalBids = Total1[i], 
    highestBid = Highest[i], 
    }).ToArray(); 
```

如果您想要`ToArray()`的只是一个`IEnumerable<>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T09:17:35.133

最好的办法是使用您尝试保存的属性创建一个活动类并创建一个列表

```
List<Campaign> campaigns = new List<Campaign>();
for(int i = 0; i < C; i++){
campaigns.Add(new Campaign{
    weekYear = something[i], 
    campaign = info[i], 
    totalBids = Total1[i], 
    highestBid = Highest[i], 
    });
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T09:18:20.667

您必须创建一个包含属性的类。如下：

```
class MyStrings
{
    public string WeekYear { get; set; }
    public string Campaign { get; set; }
    public string TotalBids { get; set; }
    public string HighestBid { get; set; }

} 
```

然后你可以像这样使用它：

```
 var campaigns = new List<MyStrings>();
        for (int i = 0; i < C; i++)
        {
            campaigns.Add(new MyStrings
            {
                WeekYear = something[i], 
                Campaign = info[i], 
                TotalBids = Total1[i], 
                HighestBid = Highest[i], 
            });
        } 
```

我不知道你为什么想要这个，因为我没有足够的上下文

```
 list = campaigns.ToArray(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-03T09:19:23.680

它不起作用，因为这不是您尝试添加的字符串数组

而是试试这个：

```
 List<dynamic> campaigns = new List<dynamic>();
  for (int i = 0; i < C; i++)
  {
    campaigns.Add(new {
      weekYear = "a", 
      campaign = "b", 
      totalBids = "c", 
      highestBid = "d", 
    });
  }
  dynamic[]  list = campaigns.ToArray(); 
```

# c# - 对其他视图发布的结果进行排序

> ID：13680039
> 
> 赞同：1
> 
> 时间：2012-12-03T09:07:25.627
> 
> 标签：c#, asp.net-mvc-3

我已经阅读了很多关于此的问题和教程，但我找不到与我类似的案例。

我有一个索引视图，其中有一个搜索表单来过滤我的数据库中可用的结果。

这是我的索引视图的控制器操作的简化版本：

```
[HttpPost]
    public ActionResult Index(String carMake, String carModel)
    {
        var cars = from d in db.Cars
                    select d;

        if (!String.IsNullOrEmpty(carMake))
        {
            if (!carMake.Equals("All Makes"))
            {
                cars = cars.Where(x => x.Make == carMake);
            }
        }

        if (!String.IsNullOrEmpty(carModel))
        {
            if (!carModel.Equals("All Models"))
            {
                cars = cars.Where(x => x.Model == carModel);
            }
        }

        cars = cars.OrderBy(x => x.Make);
        return View("SearchResult", cars);
    } 
```

如您所见，我从 Index 视图中获取数据并将其直接发布到我的 SearchResult 视图中，而无需使用任何`public ActionResult SearchResult(){...}`. 但我`public ActionResult SearchResult(){...}`的控制器中确实有方法。

现在，我正在尝试对结果进行排序。我怎样才能做到这一点？

我尝试了许多不同的方法将数据从我的 Index 方法传递到 Search Result 方法，例如 TempData 等。但是它们的问题是，当我单击排序按钮时，页面会重新加载，并且我从索引视图表单中获取的查询将全部为空，因为 TempData 仅用于在方法之间传递数据，并且在调用该方法时，数据将消失，全部为空。

我有一些解决方案，但我不确定它们是否会奏效，以及它们是否是可能提出的最佳/最简单的解决方案。它将我从索引页面获得的查询记录到一个表中（我认为这样做不是明智之举）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:39:13.100

与其返回视图，不如直接在控制器中调用搜索结果操作。

另一种方法是，如果您必须在流程之后强制调用 Index 操作

采用

```
 return SearchResult(cars); 
```

代替

```
 View("SearchResult", cars); 
```

问候， Pavan.G

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:08:52.803

我认为应该是这样；

```
[HttpPost]
public ActionResult Index(String carMake, String carModel)
{
   //Redirect to SearchResults. You can do this from client as well.
   return RedirectToAction("SearchResult",  
                new { make = carMake, model = carModel });
}

//Add your filter and order code here
public ActionResult SearchResult(String make, String model)
{
     var cars = from d in db.Cars
                select d;

    if (!String.IsNullOrEmpty(make))
    {
        if (!carMake.Equals("All Makes"))
        {
            cars = cars.Where(x => x.Make == make);
        }
    }

    if (!String.IsNullOrEmpty(model))
    {
        if (!carModel.Equals("All Models"))
        {
            cars = cars.Where(x => x.Model == model);
        }
    }

    cars = cars.OrderBy(x => x.Make);
    return View(cars);
} 
```

# ios - UIPinchGestureRecognizer 选择器未在 UIImageView 上被调用

> ID：13680045
> 
> 赞同：0
> 
> 时间：2012-12-03T09:07:53.180
> 
> 标签：ios, uiimageview, uigesturerecognizer, uipinchgesturerecognizer

几个小时以来，我一直试图弄清楚这一点，在这里完全不知所措。我正在尝试为`UIPinchGestureRecognizer`我的游戏中的一些自定义 UIImageViews 实现一个，但它不起作用。我研究过的所有东西都说它应该有效，但它没有。如果我将它添加到我的视图控制器或自定义 UIView，而不是 UIImageViews，则 Pinch 可以正常工作。我已经尝试了所有常见的修复和调整，但没有成功。我有`userInteractionEnabled`并`multipleTouchEnabled`设置为YES。我已经正确设置了委托和选择器。我已`shouldRecognizeSimultaneouslyWithGestureRecognizer`设置返回 YES。

手势识别器被添加到 UIImageView 中，稍后我可以在更新循环中访问它的属性，但是当我尝试捏合时，选择器中的 NSLog 永远不会被 UIImageView 调用。我已经调整了视图的 z 位置以确保它们在顶部但没有骰子。

我的 UIImageViews 存储在 NSMutableDictionary 中，并在游戏的每个更新循环期间通过循环进行更新。这会对不调用 UIPinchGestureRecognizer 产生影响吗？...我想不出其他任何东西，发布代码可能无济于事 - 因为相同的代码在用于 UIView 或视图控制器时有效。

我在视图控制器的 touchesBegan 和 touchMoved 事件中确实有触摸处理代码......但我已经关闭了它，但问题仍然存在，并且无论如何，捏对其他元素都有效。

有什么想法可以阻止手势选择器在 UIImageView 上触发？词典？与在游戏循环中不断更新有关吗？欢迎任何想法，这似乎很容易实现......

编辑：这是 UIImageView 的代码以及我正在用它做什么......不确定这是否有帮助。

扩展 UIImageView 类 Paper.m（prp 是`struct`用于初始化我的自定义变量的属性之一：

```
NSString *tName =  [NSString stringWithUTF8String: prp.imagePath];
UIImage *tImage = [UIImage imageNamed:[NSString stringWithFormat:@"%@.png",tName]];
self = [self initWithImage: tImage];
self.userInteractionEnabled = YES;
self.multipleTouchEnabled = YES;
self.center = CGPointMake(prp.spawnX, prp.spawnY);
if (prp.zPos != 0)  { self.layer.zPosition = prp.zPos; }
// other initialization excised 
```

然后我有一个名为 ObjManager 的自定义类，它包含 NSMutableDictionary 并像这样初始化所有 UIImageView 对象，其中在循环中调用 addObj 以添加每个对象：

```
- (ObjManager*) initWithBlank {
    // create an array for our objects
    self = [super init];
    if (self) {
        objects = [[NSMutableDictionary alloc] init];
        spawnID = 100;  // start of counter for dynamically spawned object IDs
    }
    return self;
}

- (void) addObj:(Paper *)paperPiece wasSpawned:(BOOL)spawned {
    // add each paper piece, assign spawnID if dynamically spawned
    NSNumber *newID;
    if (spawned) { newID = [NSNumber numberWithInt:spawnID]; spawnID++; }
    else         { newID = [NSNumber numberWithInt:paperPiece.objID]; }
    [objects setObject:paperPiece forKey:newID];
} 
```

我的视图控制器调用 ObjManager 的初始化（在我的 VC 中称为 _world）。然后它像这样循环遍历 _world：

```
// Populate additional object managers and add all subviews
for (NSNumber *key in _world.objects) {

    _eachPiece = [_world.objects objectForKey:key];

    // Populate collision object manager
    if (_eachPiece.collision) {
        [_world_collisions addObj:_eachPiece wasSpawned:NO];
    }

    // only add pinch gesture if the object flag is set
    if (_eachPiece.pinch) {  
        UIPinchGestureRecognizer *pinchGesture = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinchPaper:)];
        pinchGesture.delegate = self;
        [_eachPiece addGestureRecognizer:pinchGesture];
        NSLog(@"Added pinch recognizer scale: %@", pinchGesture.view.description);
    }

    // Add each object as a subview
    [self.view addSubview:_eachPiece];

} 
```

_eachPiece 是我的视图控制器中的一个对象，在 .h 文件中声明（与 _world 一样）：

```
@property (nonatomic, strong) ObjManager *world; 
@property (nonatomic, strong) Paper *eachPiece; 
```

然后我有一个 NSTimer 对象，它每帧更新 _world (ObjManager) 中的所有可移动 Paper 对象（UIImageViews），如下所示：

```
// loop through each piece and update
for (NSNumber *key in _world.objects) {

    eachPiece = [_world.objects objectForKey:key];

    // only update moveable pieces
    if ((eachPiece.moveType == Move_Touch) || (eachPiece.moveType == Move_Auto)) {

        CGPoint paperCenter;
        paperCenter = eachPiece.center;

        // a bunch of code to update paperCenter x & y for the object's new position based on velocity and user input

        // determine image direction and transformation matrix
        [_world updateDirection:eachPiece];
        CGAffineTransform transformPiece = [_world imageTransform:eachPiece];
        if (transformEnabled) {
            eachPiece.transform = transformPiece;
        }

        // finally move it
        [eachPiece setCenter:paperCenter];

    }

} 
```

和捏选择器：

```
- (void)pinchPaper:(UIPinchGestureRecognizer *)recognizer {
    NSLog(@"Pinch scale: %f", recognizer.scale);
    recognizer.view.transform = CGAffineTransformScale(recognizer.view.transform, recognizer.scale, recognizer.scale);
    recognizer.scale = 1;
} 
```

据我所知，捏应该起作用。如果我采用相同的捏合手势代码并将其设置为添加到视图控制器，它适用于整个视图。我还有一个自定义 UIView 类，它充当边框（只是在视图周围绘制一个矩形），并将捏合手势代码移动到该类允许我只捏合边框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T06:24:54.373

好吧，显然手势识别器不会在位置动画的视图上触发。因此，为了使其工作，我必须将识别器放在视图控制器上，然后执行命中测试并在触摸的视图上应用捏合/缩放，如果它是我想要捏合/缩放的视图。相关信息在这里：

[http://iphonedevsdk.com/forum/iphone-sdk-tutorials/100982-caanimation-tutorial.html](http://iphonedevsdk.com/forum/iphone-sdk-tutorials/100982-caanimation-tutorial.html)

对于我的特殊情况，我在视图控制器级别的变量/数组中跟踪我想要捏住的动画视图。然后我在选择器中使用了这段代码（基本上来自上面的链接，全部归功于他们）：

```
- (void)pinchPaper:(UIPinchGestureRecognizer *)recognizer {

    CALayer *pinchLayer;
    id layerDelegate;
    CGPoint touchPoint = [recognizer locationInView:self.view];

    pinchLayer = [self.view.layer.presentationLayer hitTest: touchPoint];
    layerDelegate = [pinchLayer delegate];

    //_pinchView is the UIView I want to pinch
    if (layerDelegate == _pinchView) {
        _pinchView.transform = CGAffineTransformScale(_pinchView.transform, recognizer.scale, recognizer.scale);
        recognizer.scale = 1;
    }
} 
```

唯一棘手的事情是，如果您在现有 UIView 动画中进行了其他缩放变换（例如我的方向更改），则必须通过在每个更新循环期间使用当前变换来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:37:26.023

要让任何手势识别器在 imageViews 上工作，必须在其上启用 userInteraction。

所以，应该是，

```
yourImageView.userInteractionEnabled = YES; 
```

或者，如果您正在使用情节提要，您也可以在情节提要的检查器窗口中检查该选项。

希望能帮助到你..：）

# wix - path in wix script

> ID：13680047
> 
> 赞同：0
> 
> 时间：2012-12-03T09:07:52.887
> 
> 标签：wix, wix3.6

The Wix script is in C drive. In the script I have

```
<File Id='asmx' Name='file1.asmx' DiskId='1' Source='..\folder1\folder2\file1.asmx' /> 
```

In which Drive it will look for this file. Actually the file is present in my D: drive.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:06:59.497

> 源='..\folder1\folder2\file1.asmx' />

`..\`告诉你上一步。所以它会从你的文件夹上移一个`project directory`并搜索`\folder1\folder2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:48:11.910

一切都取决于您指定的内容

目录 ID="TARGETDIR"

上面评论中提到的文章是要走的路。通读一遍。

# javascript - 将字符串与将整数传递给 JavaScript 函数作为一种好习惯？

> ID：13680056
> 
> 赞同：0
> 
> 时间：2012-12-03T09:08:33.027
> 
> 标签：javascript, javascript-framework

假设我有一个 JavaScript 函数，我想用它作为数字来计算。

但是，我可以直接传入字符串数字（然后转换为整数）或整数。考虑到我正在编写插件供其他用户使用并且他们不了解实现细节（当然我可以阅读函数签名以查看要传入哪个），哪一个是好的做法。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:10:12.260

处理函数体内的所有转换允许更大的灵活性。一个函数应该为你做事，而不是要求你做事。

从字符串转换为整数并不困难，如果传递的字符串不可解析，您可以抛出异常以防止静默失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T09:11:48.147

使用适合情况的任何东西。如果您正在编写一个将两个数字相加的函数，请输入数字而不是字符串。您始终可以选择处理有人传递字符串的情况，但是以防止失败。

**文档**是 3rd 方插件的关键。这将使您的用户知道他们应该传递什么、可用的功能以及如何使用它们。

# java - 使用 JSch 从 SFTP 服务器下载文件

> ID：13680057
> 
> 赞同：18
> 
> 时间：2012-12-03T09:08:35.633
> 
> 标签：java, sftp, jsch

我正在使用 jsch 从服务器下载文件，我的代码如下。

```
public static void downloadFile(TpcCredentialsDTO dto) {
        logger.trace("Entering downloadFile() method");

    Session session = null;
    Channel channel = null;
    ChannelSftp channelSftp = null;
    boolean success = false;

    try {
        JSch jsch = new JSch();
        session = jsch.getSession(dto.getUsername(), dto.getHost(),
                dto.getPort());
        session.setPassword(dto.getPassword());

        session.setConfig("StrictHostKeyChecking", "no");
        session.connect();
        logger.info("Connected to " + dto.getHost() + ".");

        channel = session.openChannel("sftp");
        channel.connect();
        channelSftp = (ChannelSftp) channel;

        List<String> filesToDownload = getFilesToDownload(dto,channelSftp);

        if (!filesToDownload.isEmpty()) {
            for (String fileDownloadName : filesToDownload) {
                success = false;
                OutputStream output = new FileOutputStream(
                    "C:\Download\BLT_03112012");

                channelSftp.get("BLT_03112012",output);
                success = true;
                if (success)
                    logger.info(ServerConstants.DOWNLOAD_SUCCESS_MSG
                                    + fileDownloadName);
                output.close();
            }

        }else {
            logger.info(ServerConstants.NO_FILES_TO_DOWNLOAD
                    + ServerUtils.getDateTime());
            success = true;
        }

    } catch (JSchException ex) {
        logger.error( ServerConstants.SFTP_REFUSED_CONNECTION, ex);
    } catch (SftpException ex) {
        logger.error(ServerConstants.FILE_DOWNLOAD_FAILED, ex);
    } catch (IOException ex) {
        logger.error(ServerConstants.FILE_NOT_FOUND, ex);
    }catch (Exception ex) {
        logger.error(ServerConstants.ERROR, ex);
    }finally {
        if (channelSftp.isConnected()) {
            try {
                session.disconnect();
                channel.disconnect();
                channelSftp.quit();
                logger.info( ServerConstants.FTP_DISCONNECT);
            } catch (Exception ioe) {
                logger.error(ServerConstants.FTP_NOT_DISCONNECT, ioe);
            }
        }
    }
    logger.trace("Exiting downloadFile() method");
}

sftpChannel.get(filename, outputstream) is throwing an error. 
```

> ```
>  2: File not found
>       at com.jcraft.jsch.ChannelSftp.throwStatusError(ChannelSftp.java:2629)
>       at com.jcraft.jsch.ChannelSftp._get(ChannelSftp.java:977)
>       at com.jcraft.jsch.ChannelSftp.get(ChannelSftp.java:946)
>       at com.jcraft.jsch.ChannelSftp.get(ChannelSftp.java:924)
>       at za.co.tpc.sftpserver.SftpConnection.downloadFile(SftpConnection.java:72)
>       at za.co.tpc.server.execute.FtpMtn.main(FtpMtn.java:44) 
> ```

相同的代码确实下载文本文档文件类型，但对于“文件”文件类型失败

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-03T09:18:01.287

尝试使用路径而不是流：

```
String destPath = "filename.txt";        

if (!filesToDownload.isEmpty()) {
    for (String fileDownloadName : filesToDownload) {
        success = false;
        sftpChannel.get(fileDownloadName , destPath); 
```

如果你想使用文件和流检查这个例子： http:
[//kodehelp.com/java-program-for-downloading-file-from-sftp-server/](http://kodehelp.com/java-program-for-downloading-file-from-sftp-server/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-30T11:05:42.493

请在以下包含文件**上传**和**下载**功能的代码示例中找到。**请从在lt;**中标记的字符串中提取相关详细信息；sftp.user.name **gt;** . 下载文件后，我将删除该文件，您可以根据您的要求拥有它。

我作为下载功能的一部分添加的**事件**和**语言环境参数是过滤文件；**您可以根据需要传递参数。

已检查以设置可根据需要使用的代理。

```
package com.util;

import com.jcraft.jsch.Channel;
import com.jcraft.jsch.ChannelSftp;
import com.jcraft.jsch.JSch;
import com.jcraft.jsch.ProxyHTTP;
import com.jcraft.jsch.Session;
import com.jcraft.jsch.SftpException;
import java.io.File;
import java.io.FileInputStream;
import java.util.Date;
import java.util.Properties;
import java.util.Vector;

/**
 *
 * @author Dinesh.Lomte
 */
public class SftpUtil {

    /**
     * 
     * @param fileName
     * @throws Exception 
     */
    public static void upload(String fileName)
    throws Exception {

        String method = "upload(String fileName)";
        Session session = null;
        Channel channel = null;
        ChannelSftp channelSftp = null;
        try {
            // Creating and instantiating the jsch specific instance
            JSch jsch = new JSch();
            // Fetching and setting the parameters like: user name, host and port 
            // from the properties file
            session = jsch.getSession("<sftp.user.name>",
                    "<sftp.host>",
                    Integer.valueOf("<sftp.port>"));
            // Fetching and setting the password as configured in properties files
            session.setPassword("<sftp.user.password>");
            // Setting the configuration specific properties
            Properties config = new Properties();
            config.put("StrictHostKeyChecking", "no");
            session.setConfig(config);            
            // Validating if proxy is enabled to access the sftp
            isSftpProxyEnabled(session);
            // Execution start time
            long lStartTime = new Date().getTime();
            System.out.println("Connecting to the sftp...");
            // Connecting to the sftp 
            session.connect();
            System.out.println("Connected to the sftp.");            
            // Execution end time
            long lEndTime = new Date().getTime();
            System.out.println("---------------------------------------------");
            System.out.println("Connected to SFTP in : " + (lEndTime - lStartTime));
            // Setting the channel type as sftp
            channel = session.openChannel("sftp");
            // Establishing the connection
            channel.connect();
            channelSftp = (ChannelSftp) channel;
            // Setting the folder location of the external system as configured
            channelSftp.cd("<sftp.output.folder.url>");
            // Creating the file instance
            File file = new File(fileName);
            // Creating an fileInputStream instance
            FileInputStream fileInputStream = new FileInputStream(file);
            // Transfering the file from it source to destination location via sftp
            channelSftp.put(fileInputStream, file.getName());
            // Closing the fileInputStream instance
            fileInputStream.close();
            // De-allocating the fileInputStream instance memory by assigning null
            fileInputStream = null;
        } catch (Exception exception) {
            throw exception;
        } finally {
            // Validating if channel sftp is not null to exit
            if (channelSftp != null) {
                channelSftp.exit();
            }
            // Validating if channel is not null to disconnect
            if (channel != null) {
                channel.disconnect();
            }
            // Validating if session instance is not null to disconnect
            if (session != null) {
                session.disconnect();
            }
        }
    }

    /**
     * 
     * @param session 
     */
    private static void isSftpProxyEnabled(Session session) {
        // Fetching the sftp proxy flag set as part of the properties file
        boolean isSftpProxyEnabled = Boolean.valueOf("<sftp.proxy.enable>");
        // Validating if proxy is enabled to access the sftp
        if (isSftpProxyEnabled) {
            // Setting host and port of the proxy to access the SFTP
            session.setProxy(new ProxyHTTP("<sftp.proxy.host>", 
                    Integer.valueOf("<sftp.proxy.port>");
        }
        System.out.println("Proxy status: " + isSftpProxyEnabled);
    }

    /**
     * 
     * @param folder
     * @param event
     * @param locale
     */
    public static void download(String folder, String event, String locale) {

        String method = "download(String folder, String event, String locale)";
        Session session = null;
        Channel channel = null;
        ChannelSftp channelSftp = null;
        try {
            // Creating and instantiating the jsch specific instance
            JSch jsch = new JSch();
            // Fetching and setting the parameters like: user name, host and port 
            // from the properties file
            session = jsch.getSession("<sftp.user.name>",
                    "<sftp.host>",
                    Integer.valueOf("<sftp.port>"));
            // Fetching and setting the password as configured in properties files
            session.setPassword("<sftp.user.password>");
            // Setting the configuration specific properties
            Properties config = new Properties();
            config.put("StrictHostKeyChecking", "no");
            session.setConfig(config);            
            // Validating if proxy is enabled to access the sftp
            isSftpProxyEnabled(session);
            // Execution start time
            long lStartTime = new Date().getTime();
            System.out.println("Connecting to the sftp...");
            // Connecting to the sftp 
            session.connect();
            System.out.println("Connected to the sftp.");            
            // Execution end time
            long lEndTime = new Date().getTime();
            System.out.println("---------------------------------------------");
            System.out.println("Connected to SFTP in : " + (lEndTime - lStartTime));
            // Setting the channel type as sftp
            channel = session.openChannel(SFTP);
            // Establishing the connection
            channel.connect();
            channelSftp = (ChannelSftp) channel;
            try {
                // Setting the folder location of the external system as configured 
                // to download the file from
                channelSftp.cd("<sftp.input.folder.url>");
            } catch (SftpException sftpException) {
                System.out.println("Failed to change the directory in sftp.");                
            }
            // Listing all the .csv file(s) specific to the source system, event type (download) and locale code
            Vector<ChannelSftp.LsEntry> lsEntries = channelSftp.ls(
                    new StringBuilder("*").append("<sys.code>").append("*").append(event)
                    .append("*").append(locale).append("*").append(".csv").toString());
            // Validating if files exist to process the request further
            if (lsEntries.isEmpty()) {
                System.out.println("No file exist in the specified sftp folder location.");
            }
            // Iterating the list of entries to download the file(s) from the sftp 
            for (ChannelSftp.LsEntry entry : lsEntries) {
                try {
                    // Downloading the specified file from the sftp to the specified folder path
                    channelSftp.get(entry.getFilename(), new StringBuilder(folder)
                            .append(File.separator).append(entry.getFilename()).toString());
                } catch (SftpException sftpException) {
                    System.out.println("Failed to download the file the sftp folder location.");                    
                }                
            }
            // Iterating the list of entries to delete the file(s) from the sftp 
            for (ChannelSftp.LsEntry entry : lsEntries) {
                try {
                    // Deleting the specified file from the sftp
                    channelSftp.rm(entry.getFilename());
                } catch (SftpException sftpException) {
                    System.out.println("Failed to delete the file from the sftp folder location.");                    
                }                
            }
        } catch (Exception exception) {
            System.out.println("Failed to download the file(s) from SFTP.");            
        } finally {
            // Validating if channel sftp is not null to exit
            if (channelSftp != null) {
                channelSftp.exit();
            }
            // Validating if channel is not null to disconnect
            if (channel != null) {
                channel.disconnect();
            }
            // Validating if session instance is not null to disconnect
            if (session != null) {
                session.disconnect();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-03T16:28:34.220

我以这种方式修复：

```
Vector<ChannelSftp.LsEntry> files = sftp.ls(remotePath);
String remotePath = properties.getFtpPath();
Vector<ChannelSftp.LsEntry> files = sftp.ls(remotePath);

for (ChannelSftp.LsEntry entry : files) {

    InputStream stream = sftp.get(remotePath + "/" + entry.getFilename());
    // Your business code here

} 
```

其中 remotePath 是远程 SFTP 文件夹名称。

# windows-7 - win 7 批处理文件 - NTFS 权限

> ID：13680058
> 
> 赞同：0
> 
> 时间：2012-12-03T09:08:39.130
> 
> 标签：windows-7, batch-file, permissions, command-prompt

我正在寻找有关通过批处理文件管理 NTFS 权限的批处理文件的帮助。

我创建了一个包含多个子文件夹的文件夹。主文件夹通过 NET SHARE 命令共享并且正在工作。现在我需要通过批处理文件中的命令行命令设置 NTFS 权限。

我需要删除除管理员和特定用户之外的任何用户的访问权限。

我可以通过添加特定用户`ICACLS C:\bruger2\jesper /grant:r jesper:f`

但删除部分不起作用

`ICACLS c:\bruger2\jesper /remove Users`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:10:35.677

Nvm伙计们，我找到了答案。

我需要包含**/inheritance:r**以删除继承的 NTFS 权限

```
ICACLS C:\bruger\jesper /inheritance:r /grant:r jesper:f Holms:f 
```

# xaml - How to let combobox only stretch down in windows8

> ID：13680059
> 
> 赞同：3
> 
> 时间：2012-12-03T09:08:43.807
> 
> 标签：xaml, combobox, windows-8, controls

When I click Combobox to select a item, if I select the first one, the combobox will stretch down, but if I select the other item, the combobox will strech up and down, it will cover the content above the combobox. How to let it only stretch down, likes in winform?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:46:29.103

您可能只是重新排列选项，以便始终将选择的任何内容移动为第一个选项。

# mysql - Insert multiple ids from table a into table b

> ID：13680063
> 
> 赞同：3
> 
> 时间：2012-12-03T09:08:48.237
> 
> 标签：mysql, sql, insert

I want to select all ids from an existing table and insert them into a newly created table, in this sort of fashion:

```
INSERT INTO product_extend (product_id) VALUES (SELECT product_id FROM products) 
```

Creating one new row per id. Can anyone show me how to do this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:09:26.643

Like this:

```
INSERT INTO product_extend (product_id) 
SELECT product_id FROM products; 
```

As explained in [`INSERT INTO ... SELECT ...`](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html) in MySQL Manual.

# python - 如果我不使用系统包，我是否还需要在 virtualenv 中安装 Django

> ID：13680064
> 
> 赞同：0
> 
> 时间：2012-12-03T09:08:49.780
> 
> 标签：python, django, virtualenv, pip

我已经安装了带有`--no-site-packages`选项的 virtualenv。

我有几个疑问

1.  如果我将 django 与 virtualenv 一起使用，那么这是否意味着我的 django 站点与系统包完全隔离。我的意思是系统站点包中安装的任何包都将不可用？

2.  我已经在 virtualenv 中安装了所有软件包，但没有安装 django。我还需要在 virtualenv 中安装 Django 吗？

3.  假设我有一些不在 virtualenv 中但在 main env 中可用的包，我可以从主包访问它还是一次只能运行一个环境？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:13:28.180

是的，您可以通过 pip 或从 Django 下载并运行设置来执行此操作。在这两种情况下，您都需要确保 virtualenv 处于活动状态，即 source ENV/bin/activate

1.  virtualenv 的重点是让你的主系统保持独立，你想这样做。

2.  是的。

3.  您应该将它们安装在您的 virtualenv 中，这是更好的做法。

关于 virtualenv 的一个非常好的事情是您可以为您的项目创建一个很好的完整环境。然后，一旦一切正常且稳定，您就可以冻结软件包并 git 代码，然后您就知道是否共享项目或移动系统，整个事情将很容易重新创建并且可以正常工作:)

--- 更新评论 --- 在命令行并假设 Linux 类型环境

```
$ cd 
$ virtualenv --no-site-packages --distribute ENV
$ source ENV/bin/activate 
$ pip install django 
$ pip install all_the_packages_you_need 
```

现在您可以进入您的 django 项目并正常运行 python 命令，它将使用您的 virtualenv "ENV" python 和站点包

# c++ - 包含头文件错误：多重定义

> ID：13680065
> 
> 赞同：3
> 
> 时间：2012-12-03T09:09:10.870
> 
> 标签：c++

我在程序中有一个非常简单的文件系统。

有：main.cpp，其中包括worker.h，worker.h和worker.cpp，其中包括worker.h

worker.h 具有 Header 保护并声明了一些 main.cpp 和 worker.cpp 都需要的变量，并且它具有一些函数声明。

```
#ifndef __WORKER_H_INCLUDED__
#define __WORKER_H_INCLUDED__

    bool x;
    int y;

    void somefunction( int w, int e );

#endif 
```

通过其他一些线程和谷歌结果，我了解到 Header 保护可以保护您免受单个源文件中的多个包含，而不是多个源文件。

所以我可以期待链接器错误。

我的问题是

1.  为什么只有变量而不是函数有多个定义错误？据我了解，这两者都只在头文件 worker.h 中声明而不定义

2.  如何在没有多定义链接器错误的情况下使 main.cpp 和 worker.cpp 都可以使用 a 变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:15:11.840

> 为什么只有变量而不是函数有多个定义错误？据我了解，这两者都只在头文件 worker.h 中声明而不定义

因为你定义了变量。这样他们只被声明：

```
extern bool x;
extern int y; 
```

但是您必须在 cpp 文件中定义它们。：

```
bool x = true;
int y = 42; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-07T08:06:17.273

[c++17](/questions/tagged/c%2b%2b17 "显示标记为“c++17”的问题")的更新答案。随着`inline`变量的引入，人们不再需要担心需要放置非常量命名空间范围变量的确切翻译单元。撇开关于使用全局变量的讨论，在现代 C++ 中修复 OP 的另一种方法是如下声明变量：

```
inline bool x; // Can add an initializer here too
inline int y; 
```

只要这是在标头中并且所有 TU 看到相同的确切定义，实现就会解决它并确保这些 TU 都引用完全相同的唯一对象。

# php - How to get input field value from a form using preg_match()

> ID：13680068
> 
> 赞同：1
> 
> 时间：2012-12-03T09:09:22.647
> 
> 标签：php, regex, curl, preg-match

I am not a expert in this field so please help me out and spare my ignorance if any. I am trying to curl through a page and want to get value of the hidden `<input>` field. I am not familiar with regexp. my code is as below:

```
 $page = curl_exec($ch);
}
curl_close($ch);

function parse_form_fields($page, $username, $password){
    preg_match("/<input id=\"signuptoken\" type=\"hidden\" value=\"(.+?)\" name=\"signuptoken\"/", $page, $m);

    $captchatoken = $m[1];

    $parameters[] = "newaccounttoken=" . urlencode($captchatoken);
} 
```

the form field is as below:

```
<input id="signuptoken" type="hidden" value="03AHJ_Vuv2ts6ev2LltAkZB91vjD6k-BsW3286bTC9QZYZLSHQUMNDQJFUaNmAQMAYb9FDhIkOFzAisafasfsTZuv_pl5KvkYNfsGUPcOAEX5YPlMaMOi7MZJq4ky0v_GyM60SmMgjPrtfZSJYE0hqw--GsfsafasmER0Sksr6OAvnLnBVAMsKcCi7uM" name="signuptoken"> 
```

I want to get the value out for this input field.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T14:07:50.870

你最好使用[DOMDocument](http://php.net/manual/en/class.domdocument.php)。例如：

```
$html = '<input id="signuptoken" type="hidden" value="03AHJ_Vuv2ts6ev2LltAkZB91vjD6k-BsW3286bTC9QZYZLSHQUMNDQJFUaNmAQMAYb9FDhIkOFzAisafasfsTZuv_pl5KvkYNfsGUPcOAEX5YPlMaMOi7MZJq4ky0v_GyM60SmMgjPrtfZSJYE0hqw--GsfsafasmER0Sksr6OAvnLnBVAMsKcCi7uM" name="signuptoken">';
$dom = new DomDocument();
$dom->loadHTML($html);

$signuptoken = $dom->getElementById("signuptoken");
echo $signuptoken->getAttribute('value'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T09:15:46.100

这应该可以帮助您找到价值：

```
<?php
$input  = '<input id="signuptoken" type="hidden" value="03AHJ_Vuv2ts6ev2LltAkZB91vjD6k-BsW3286bTC9QZYZLSHQUMNDQJFUaNmAQMAYb9FDhIkOFzAisafasfsTZuv_pl5KvkYNfsGUPcOAEX5YPlMaMOi7MZJq4ky0v_GyM60SmMgjPrtfZSJYE0hqw--GsfsafasmER0Sksr6OAvnLnBVAMsKcCi7uM" name="signuptoken">';

$result = preg_match('/<input id="signuptoken" type="hidden" value="(.*?)"/', $input, $matches);
if(!$result){
    // Could not find input
} else {
    // Input value found
    echo 'Value: '.$matches[1];
} 
```

然而，用正则表达式解析 HTML 并不完全有弹性，因为简单地改变示例标签中的`id`和的顺序就会破坏刮板。如果您确定 HTML 永远不会更改，那应该不是问题，但请注意 DOM 解析器在某些情况下可能更有用。`type``input`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T19:34:24.553

不要使用类似的东西`value=\"(.+?)\"`，在一些格式错误的 HTML 中你可能会遇到很多麻烦。使用更具限制性的东西，例如`value=\"([^\">]+?)\"`. 不同之处在于`.`匹配更多的实体，而不是`[^">]`，它总是以标签关闭或引用关闭结束。

您的问题可能是缺少多行匹配修饰符*s*， try `preg_match('/<input id="signuptoken" type="hidden" value="(.*?)"/s', $page, $m);`。

除此之外，我将支持使用 DOM。

此外，将页面 HTML 保存到文件中并在本地文件上测试您的 RegEx，而不是每次都调用该页面。

# checkbox - How can I add slickgrid checkboxes to specific rows depending on if a value is true or false, without adding it as a formatter?

> ID：13680072
> 
> 赞同：2
> 
> 时间：2012-12-03T09:09:33.787
> 
> 标签：checkbox, slickgrid

Does anyone know how I can add checkboxes only to specific rows in slickgrid without using the formatter approach?

Currently I've just done a columns.push(checkboxSelector.getColumnDefinition()); but that adds checkboxes to all the rows.

When I tried to use the formatter approach like this [https://groups.google.com/forum/?fromgroups=#!topic/slickgrid/uKq2aVU5luo](https://groups.google.com/forum/?fromgroups=#!topic/slickgrid/uKq2aVU5luo) I found that when I scrolled through the grid, it would not hold the 'check' that were already selected in the checkboxes of the rows?

Grateful for any help on this.

# sqlite - Accessing huge data from application

> ID：13680073
> 
> 赞同：3
> 
> 时间：2012-12-03T09:09:35.787
> 
> 标签：sqlite, sd-card

Before starting application, I just would like to know the feasibility here.

I have data around 15GB (text and some Images) stored in SQLite database of my SD Card, I need to access it from my application. Data will get increased on daily basis and may reach till 64 GB.

Can any one tell me limitations in accessing such huge database stored in SD card from the application?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:42:36.737

SQLite 本身支持该范围内的数据库，例如 16-32GB（它可能开始工作较慢，但它应该仍然可以工作）。

但是，您可能会遇到 FAT32 最大文件大小的限制，即 4GB - 这将很难克服。SQLite 允许使用附加数据库，允许您将其拆分为更小的块，但这确实很麻烦。

如果您可以将您的 SD 卡格式化为 ext4，或者使用内部存储为 ext4，那么您应该不会有大问题。

# python - AttributeError: XX instance has no attribute 'intitle'

> ID：13680074
> 
> 赞同：0
> 
> 时间：2012-12-03T09:09:40.303
> 
> 标签：python, html-parsing

The code is from: [Python if-statement based on content of HTML title tag](https://stackoverflow.com/questions/9335836/python-if-statement-based-on-content-of-html-title-tag)

```
from HTMLParser import HTMLParser

def titleFinder(html):
    class MyHTMLParser(HTMLParser):
        def handle_starttag(self, tag, attrs):
            self.intitle = tag == "title"
        def handle_data(self, data):
            if self.intitle:
                self.title = data

    parser = MyHTMLParser()
    parser.feed(html)
    return parser.title

>>> print titleFinder('<html><head><title>Test</title></head>'
                '<body><h1>Parse me!</h1></body></html>')
Test 
```

However, I got the following error message when the code below is run,

**AttributeError: MyHTMLParser instance has no attribute 'intitle'**

How can i fix the error message? Any ideas?

Code:

```
from HTMLParser import HTMLParser
import urllib2

def titleFinder(html):
    intitle = False
    class MyHTMLParser(HTMLParser):
        def handle_starttag(self, tag, attrs):
            self.intitle = tag == "title"
        def handle_data(self, data):
            if self.intitle:
                self.title = data

    parser = MyHTMLParser()
    parser.feed(html)
    return parser.title

response=urllib2.urlopen("https://stackoverflow.com/questions/13680074/attributeerror-xx-instance-has-no-attribute-intitle")
html= response.read()
print titleFinder(html) 
```

The trackback is:

```
Traceback (most recent call last):
  File "D:\labs\test.py", line 19, in <module>
    print titleFinder(html)
  File "D:\labs\test.py", line 14, in titleFinder
    parser.feed(html)
  File "C:\Python27\lib\HTMLParser.py", line 108, in feed
    self.goahead(0)
  File "C:\Python27\lib\HTMLParser.py", line 142, in goahead
    if i < j: self.handle_data(rawdata[i:j])
  File "D:\labs\test.py", line 10, in handle_data
    if self.intitle:
AttributeError: MyHTMLParser instance has no attribute 'intitle' 
```

**[UPDATE]**

I finally solved the problem! Thank you, Martijn Pieters!

```
from HTMLParser import HTMLParser
import urllib2

def titleFinder(html):
    class MyHTMLParser(HTMLParser):
        def __init__(self):
            HTMLParser.__init__(self)
            self.title = ''
            self.intitle = False  #!!!
        def handle_starttag(self, tag, attrs):
            self.intitle = tag == "title"
        def handle_data(self, data):
            if self.intitle:
                self.title = self.title+data #!!!

    parser = MyHTMLParser()
    parser.feed(html)
    return parser.title

response=urllib2.urlopen("https://stackoverflow.com/questions/13680074/attributeerror-xx-instance-has-no-attribute-intitle")

html= response.read()
print titleFinder(html) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:11:49.643

您的`handle_data`方法在被调用之前`handle_starttag`被调用，并且当时没有`intitle`设置属性。

只需添加`intitle = False`到您的班级：

```
class MyHTMLParser(HTMLParser):
    intitle = False

    # your methods 
```

`handle_data`为文档中的*所有*`handle_starttag`文本节点（包括空格）调用它，因此在之前调用它并不少见。

# android - 缩放地图视图丢失画线方向

> ID：13680075
> 
> 赞同：1
> 
> 时间：2012-12-03T09:09:53.130
> 
> 标签：android

我正在谷歌地图上从这一点到该点建立一个应用程序方向。我的代码运行成功，但是当我放大地图时，地图上的画线方向丢失了。缩小地图时，会出现我的画线。你能帮助我吗！这个源代码在两点之间画线！

```
class MyOverLay extends Overlay {

    private final List<GeoPoint> points;
    private boolean drawStartEnd;
    private int pathColor;

    public MyOverLay(List<GeoPoint> pointToDraw) {
        // TODO Auto-generated constructor stub
        this(pointToDraw, Color.BLUE, true);
    }

    public MyOverLay(List<GeoPoint> points, int pathColor,
            boolean drawStartEnd) {
        this.points = points;
        this.pathColor = pathColor;
        this.drawStartEnd = drawStartEnd;
    }

    private void drawOval(Canvas canvas, Paint paint, Point point) {
        Paint ovalPaint = new Paint(paint);
        ovalPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        ovalPaint.setStrokeWidth(3);
        ovalPaint.setColor(Color.BLUE);
        int _radius = 7;
        RectF oval = new RectF(point.x - _radius, point.y - _radius,
                point.x + _radius, point.y + _radius);
        canvas.drawOval(oval, ovalPaint);
    }

    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        Projection projection = mapView.getProjection();
        if (shadow == false && points != null) {
            Point startPoint = null, endPoint = null;
            Path path = new Path();
            // We are creating the path
            for (int i = 0; i < points.size(); i++) {
                GeoPoint gPointA = points.get(i);
                Point pointA = new Point();
                projection.toPixels(gPointA, pointA);
                if (i == 0) { // This is the start point
                    startPoint = pointA;
                    path.moveTo(pointA.x, pointA.y);
                } else {
                    if (i == points.size() - 1)// This is the end point
                        endPoint = pointA;
                    path.lineTo(pointA.x, pointA.y);
                }
            }

            Paint paint = new Paint();
            paint.setAntiAlias(true);
            paint.setColor(pathColor);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeWidth(8);
            paint.setAlpha(100);
            if (getDrawStartEnd()) {
                if (startPoint != null) {
                    drawOval(canvas, paint, startPoint);
                }
                if (endPoint != null) {
                    drawOval(canvas, paint, endPoint);
                }
            }
            if (!path.isEmpty())
                canvas.drawPath(path, paint);
        }
        return super.draw(canvas, mapView, shadow, when);
    }

    public boolean getDrawStartEnd() {
        return drawStartEnd;
    }

    public void setDrawStartEnd(boolean markStartEnd) {
        drawStartEnd = markStartEnd;
    }
} 
```

# spring - 如何开始使用服务器端 - Java - Spring Framework

> ID：13680077
> 
> 赞同：3
> 
> 时间：2012-12-03T09:09:52.680
> 
> 标签：spring, spring-mvc, server-side

我对服务器端编程很陌生，我想通过使用 java 和 Spring 框架来开发一些东西。过去两年我一直从事 Android 技术工作，我非常熟悉 Java 和 Eclipse IDE。

谁能给我一些有用的教程和示例的链接？哪个IDE会更适合我？Eclipse 还是 Netbeans？

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:25:36.433

这是一个非常模糊的问题，但我会给你我的意见：

*   [学习 Java EE](http://docs.oracle.com/javaee/6/tutorial/doc/) - 这包括：
*   JSP/JSF
*   小服务程序
*   网络
*   EJB 3

使用这些技术构建应用程序，只有在您熟悉它之后，才开始使用 spring。Spring 在幕后使用了很多这些技术，了解正在发生的事情很重要

关于 eclipse 与 netbeans - 我是 eclipse 的忠实粉丝，我认为它是一个很棒的工具，但是 netbeans 与 Glassfish（sun/oracle 应用程序服务器）和更好的 GUI 工具有更好的集成。所以这真的是一个品味问题。

至于网络/应用程序服务器：

1.  [Tomcat](http://tomcat.apache.org/download-70.cgi)是一个很棒的服务器，但由于它是一个 Web 服务器，它不支持 EJB。
2.  要使用 EJB，您需要像[Jboss](http://www.jboss.org/as7)或[glassfish](http://glassfish.java.net/)这样的应用程序服务器。

我会从 tomcat 开始，然后转到 glassfish。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T09:25:50.050

我认为 Eclipse 更适合，因为您已经了解 Eclipse（Eclipse 用于 android 项目）。

[http://static.springsource.org/spring/docs/3.0.0.RELEASE/spring-framework-reference/html](http://static.springsource.org/spring/docs/3.0.0.RELEASE/spring-framework-reference/html)

[http://static.springsource.org/docs/Spring-MVC-step-by-step/](http://static.springsource.org/docs/Spring-MVC-step-by-step/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T19:47:28.777

您习惯使用哪些 IDE？我建议您使用[STS - Spring Tool Suite](http://www.springsource.org/sts)，它是由 SpringSource 维护的基于 Eclipse 的 IDE。或者，[IntelliJ IDEA Ultimate](http://www.jetbrains.com/idea/)也为 Spring 项目提供了良好的支持。

# iphone - 在 UIScrollView 中呈现大量文本

> ID：13680082
> 
> 赞同：2
> 
> 时间：2012-12-03T09:10:03.710
> 
> 标签：iphone, objective-c, ios, calayer, catiledlayer

我有`UIView`一个`UIScrollView`。唯一的`UIScrollView`垂直滚动，不缩放。

在该`UIView's` `drawRect:`方法中，我尝试为背景着色并绘制一些文本。当文本相对较短时，两种操作都可以正常工作。然而，当文本变长时，它`UIView`变得如此之大，以至于两个操作都会默默地失败。长文本`CGContext`大约是 640x17278 设备像素，我猜这对于 GPU/任何东西来说都太大了。

`CALayer`将渲染分解为多个上下文的最佳方法是什么？

实际上，我之前处理过一个非常相似的问题`CATiledLayer`，但我记得使用它很痛苦，并且在瓷砖出现和渲染之间存在明显的延迟。我还有其他方法可以做吗？

文本在这个阶段已经布置好了，这只是一个调用`CGContextSetTextPosition`和`CTLineDraw`每一行的问题。

# c# - 如何检测word文档中的形状调整大小

> ID：13680096
> 
> 赞同：-1
> 
> 时间：2012-12-03T09:11:00.200
> 
> 标签：c#, interop, ms-word

有没有办法检测 Word 文档中的形状调整大小？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:58:04.203

[Word 对象模型](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.application_events.aspx)中没有任何事件提供此功能。但是您可以保存形状的大小，然后处理例如[DocumentBeforeSave](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.applicationevents4_event.documentbeforesave.aspx)，然后：

```
foreach (Microsoft.Office.Interop.Word.Shape shape in wordDoc.Shapes)
{ 
   if (shape.Width != oldShapeWidth || shape.Height != oldShapeHeight)
   {
   //...
   }
} 
```

# mongodb - MongoDB 修复命令失败

> ID：13680098
> 
> 赞同：2
> 
> 时间：2012-12-03T09:11:14.537
> 
> 标签：mongodb, ruby-on-rails-3, database

以前我的磁盘空间不足，mongodb 停止工作。然后我增加了磁盘大小，但 mongodb 没有开始工作。

虽然我启用了日记功能，但我执行了以下命令
sudo -u mongodb mongod --dbpath /var/lib/mongodb/ --repair

但是这个修复命令出现异常并停止修复然后退出。

```
 Fri Nov 30 13:29:36 [initandlisten] build index bd_production.news { _id: 1 }

    Fri Nov 30 13:29:36 [initandlisten]      fastBuildIndex dupsToDrop:0

    Fri Nov 30 13:29:36 [initandlisten] build index done.  scanned 2549 total
    records. 0.008 secs

    Fri Nov 30 13:29:36 [initandlisten]  bd_production.change_sets
    Assertion failure isOk() src/mongo/db/pdfile.h 360

  0x879d86a 0x85a9835 0x85e441e 0x84caa02 0x84c7d19 0x8229b5a 0x822bfd8
 0x875bd51 0x875f0c7 0x8760df4 0x83e6523 0x83b6c3b 0x8753b07 0x83b92bf
 0x8827ab7 0x882a53b 0x882d4bf 0x882d691 0x85ed280 0x81719dc

 mongod(_ZN5mongo15printStackTraceERSo+0x2a) [0x879d86a]

 mongod(_ZN5mongo10logContextEPKc+0xa5) [0x85a9835]
 ...
 ...
 ...
    ... some error msg 

    Fri Nov 30 13:29:36 [initandlisten] assertion 0 assertion
     src/mongo/db/pdfile.h:360 ns:bd_production.change_sets
    query:{}

     Fri Nov 30 13:29:36 [initandlisten] problem detected during query over
     bd_production.change_sets : { $err: "assertion
     src/mongo/db/pdfile.h:360" }

    Fri Nov 30 13:29:36 [initandlisten] query
    bd_production.change_sets ntoreturn:0 keyUpdates:0 exception:
    assertion src/mongo/db/pdfile.h:360  reslen:71 197ms

     Fri Nov 30 13:29:36 [initandlisten] exception in initAndListen: 13106
     nextSafe(): { $err: "assertion src/mongo/db/pdfile.h:360" }, terminating

     Fri Nov 30 13:29:36 dbexit:
    ...
    ... 
```

新闻集合已成功修复，但“change_set”未成功修复。

我怎样才能修复那个特定的集合（change_set）或数据库？

**更新：** 当我使用 --repair 为该 change_set 集合运行 mongodump 时，我收到以下错误消息：

```
Tue Dec  4 10:45:21 [tools]         backwards extent pass
Tue Dec  4 10:45:21 [tools]             extent loc: 5:1181e000
Tue Dec  4 10:45:21 [FileAllocator] allocating new datafile /home/suvankar/dd/bd_production.5, filling with zeroes...
Tue Dec  4 10:45:21 [FileAllocator] creating directory /home/suvankar/dd/_tmp
Tue Dec  4 10:45:21 [FileAllocator] done allocating datafile /home/suvankar/dd/bd_production.5, size: 511MB,  took 0.042 secs
Tue Dec  4 10:45:21 [tools]                 warning: Extent not ok magic: 0 going to try to continue
Tue Dec  4 10:45:21 [tools]                 length:0
Tue Dec  4 10:45:21 [tools]                     ERROR: offset is 0 for record which should be impossible
Tue Dec  4 10:45:21 [tools]                     wrote 1 documents
Tue Dec  4 10:45:21 [tools]             extent loc: 0:0
Tue Dec  4 10:45:21 [tools]                 ERROR: invalid extent ofs: 0
Tue Dec  4 10:45:21 [tools]                  5 objects
Tue Dec  4 10:45:21 dbexit: 
Tue Dec  4 10:45:21 [tools] shutdown: going to close listening sockets...
Tue Dec  4 10:45:21 [tools] shutdown: going to flush diaglog...
Tue Dec  4 10:45:21 [tools] shutdown: going to close sockets...
Tue Dec  4 10:45:21 [tools] shutdown: waiting for fs preallocator...
Tue Dec  4 10:45:21 [tools] shutdown: lock for final commit... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:29:06.557

如果`mongod`with repair 没有这样做，那么它就会遇到无法修复或解决的损坏级别，因为它无法启动一组有效且正确的数据库文件。

您可以[`mongodump`使用 repair](http://docs.mongodb.org/manual/reference/mongodump/#cmdoption-mongodump--repair)运行，这在尝试绕过损坏方面更具侵略性，并且不会启动`mongod`实例（因此不需要文件正确才能继续）。

```
mongodump --repair --dbpath /var/lib/mongodb/ <other options here> 
```

但请注意，由于它试图绕过损坏的方式，您最终可能会得到一个文档的多个副本。这[`mongorestore`](http://docs.mongodb.org/manual/reference/mongorestore/)不是问题，但根据损坏程度，您最终可能会得到比您预期大得多的转储文件。在一个非常极端的情况下，我曾经看到产生了 10 倍的数据，尽管那是例外而不是规则。

一旦您将所有内容都倾倒到您满意的程度，开始`mongod`清理并重新导入以恢复良好状态。

# java - 映射映射 JPA，休眠键

> ID：13680099
> 
> 赞同：0
> 
> 时间：2012-12-03T09:11:15.583
> 
> 标签：java, hibernate, jakarta-ee, jpa-2.0, hibernate-mapping

如何绘制地图？

我有这个：

```
private Map<Integer, Trip> trips = new HashMap<Integer, Trip>(); 
```

作为mapkey，我想要旅行ID..

Trip 实体持有对我的实体的引用。（该列在另一个表中）。这次旅行有一列指向我的参考 ID。

我怎样才能做到这一点？

就像是

```
@MapKeyTable(name="trips")
@MapKeyColumn(name="trip_id")
@OneToMany(joinTable......)
private Map<Integer, Trip> trips = new HashMap<Integer, Trip>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:37:54.437

如果trip id 是`Trip`（比如说`tripId`）的一个属性，那么您需要以下内容：

```
@MapKey(name = "tripId")
@OneToMany(...)
private Map<Integer, Trip> trips = new HashMap<Integer, Trip>(); 
```

其他注释适用于更复杂的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:37:56.657

像这样的东西：

```
@OneToMany(cascade = CascadeType.PERSIST)
@JoinTable(name = "jointableName", joinColumns = @JoinColumn(name = "this_id"), inverseJoinColumns = @JoinColumn(name = "trip_id"))
private Map<Integer, Trip> trips= new Hashtable<Integer, Trip>(); 
```

# concurrency - 如何查找特定 shell 命令的状态（阻塞或非阻塞）？

> ID：13680102
> 
> 赞同：0
> 
> 时间：2012-12-03T09:11:27.377
> 
> 标签：concurrency, pthreads, blocking, nonblocking

例如，如果我使用 ac 程序中的 system() 命令来调用 shell 命令，它是否会完成 shell 命令，然后它将继续执行程序，或者它会同时执行这两个命令

有哪些方法可以找到这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:53:27.170

您可以使用`fork()`or`exec()`进行非阻塞，但`system()`调用是阻塞的。这意味着它将等待您的 shell 命令完成，然后再继续执行您的 C 程序。

请注意，如果您希望它立即返回，您可以在其后面发出`system`命令，您的 C 程序将同时运行。`&`

顺序示例： `system("long_script.sh");`

并发示例： `system("long_script.sh &");`

# html - Windows Phone XML 和 HTML 元素

> ID：13680104
> 
> 赞同：1
> 
> 时间：2012-12-03T09:11:37.767
> 
> 标签：html, xml, parsing, windows-phone

我目前正在为一位朋友做一个练习项目，他要求我创建一个手机应用程序来查看某些网站新闻。现在，我通过拉取 RSS 完成了这项工作，这只是简单的 XML 解析，但是当一个 XML 元素具有 HTML 元素时，我遇到了一个小问题。像这样：

```
<description>  
Lorem ipsum Dolor Sit Amet <a href="http://www.facebook.com">Facebook</a>
</description> 
```

现在，我的 Listbox 上有 TextBlocks，它们绑定到类项目，并且我为此描述创建了一个，它基本上是新闻内容。

```
string description;
public string Description
{
  get { return description; }
  set { description = value; }
} 
```

和

```
<TextBlock Text="{Binding Description}" Width="430" TextWrapping="wrap" FontSize="20" /> 
```

一切都打印得很好，但是因为它是一个文本块，所以它以文本形式打印出这些 html 元素。我正在寻找如何从元素中删除所有这些 HTML 标记或在手机上打印出 HTML 元素的一般提示。我已经阅读了一些关于将其作为 WebBrowser 进行操作的内容，但是删除它的背景并且一切似乎都有些棘手，但是如果您有任何一般性提示，请将它们扔给我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:44:19.157

您无法在文本块中显示 html，因此没有真正的解决方法来启动此链接。您可以尝试使用正则表达式来抑制`<a></a>`元素

就像您说的，webBrowser 可能很棘手，但是如果您希望能够单击 FB 链接，我建议您这样做，并且您可以在背景中添加图像，有很多解决方法。

# php - 带有内置 websser 的输入文件

> ID：13680108
> 
> 赞同：0
> 
> 时间：2012-12-03T09:11:54.713
> 
> 标签：php, webserver

输入文件是否适用于 php5.4 内置网络服务器？

当我在本地测试机器上发布文件时，**$_FILES**数组为空。

这是我的表格：

```
<form name="publicite" enctype="multipart/form-data" class="form-horizontal" method="post" action="">
<div class="control-group">
    <label class="control-label" for="dynamique">Fichier Dynamique</label>
    <div class="controls">
        <div class="input-append">
            <input id="dynamique" type="file" />
        </div>
    </div>
</div>
<div class="control-group">
    <label class="control-label" for="img">Fichier Image</label>
    <div class="controls">
        <div class="input-append">
            <input id="img" type="file" />
        </div>
    </div>
</div>
<div class="control-group">
    <div class="controls">
        <button class="btn btn-primary" type="submit">Enregistrer</button>
        <button class="btn" type="button">Annuler</button>
    </div>
</div> 
```

在服务器端，我只是这样做：

```
var_dump($_FILES); 
```

它返回：

```
array (size=0) 
```

空的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:26:07.353

您应该从所有字段中取一个名称以访问它。

```
<input id="dynamique" type="file" name="dynamique" />
<input id="img" type="file" name="img"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:15:28.900

您应该为输入命名：

```
<input id="img" type="file" name="file1" /> 
```

然后**$_FILES**应该包含来自您输入的具有指定名称的数据。

# php - 标头位置重定向在 Web 服务器上不起作用

> ID：13680118
> 
> 赞同：1
> 
> 时间：2012-12-03T09:12:31.933
> 
> 标签：php, http-headers, http-post, http-redirect

我正在尝试使用

```
header("Location: index.php") 
```

在我的登录脚本中，但它不适用于我的实时服务器，只能在本地运行。我不知道为什么会有任何问题。

我也做了一些测试：

```
error_reporting(E_ALL);
ini_set('display_errors', 1);

// header('Location: test.php');

require_once 'class/functions.php';
$func = new Functions();
//$error = "";
if(isset($_POST['loginSubmitted'])) {
    $user = $func->loginUser($_POST);
    if($user == true) {
        session_start();
        $_SESSION['loggedin'] = true;
        header("Location: index.php");
        die('test');
    }
    else {
        $error = 'Login nicht erfolgreich.';
    }
} 
```

显示了 die() 函数的“测试”，因此似乎甚至没有发送标头。

（不，在 header 函数之前没有输出）

**编辑3：**

使用 get 而不是 post 工作。我真的很困惑。

**编辑2：**

我制作了一个缩小版本进行测试，甚至以下内容也不起作用。似乎是服务器问题（与 $_POST 结合使用？！）：

```
<?php 
if(isset($_POST['submitted'])) {
    header('Location: index2.php');
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Login</title>
</head>
<body>
    <form action="" method="post">
        <input type="text" name="name" />
        <input type="submit" name="submitted" value="senden" />
    </form>
</body>
</html> 
```

编辑：更新了代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:20:14.400

在尝试设置新标头之前，您可能已经发送了一些输出。必须在发送任何实际输出之前设置所有标头。

如果您尝试此操作，PHP 将触发警告，但您的错误报告设置可能会阻止它。暂时将它们设置为最大值以查看输出的发送位置：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);

echo 'Output!';

header('X-Test: Test'); 
```

产生：

```
Warning: Cannot modify header information - headers already sent by (output started at /test.php:6) in /test.php on line 8 
```

# jquery - 当div具有参数隐藏时，jQuery自定义内容滚动器不显示

> ID：13680120
> 
> 赞同：5
> 
> 时间：2012-12-03T09:12:44.490
> 
> 标签：jquery, hidden, mcustomscrollbar

我的网站上有 jQuery 自定义内容滚动器，位于`div`. 内容`div`有参数`("#content").hide()`。当`div`页面加载并且 jQuery 自定义内容滚动器完美运行时，它是可见的。

但是如果`div`页面加载时内容不可见，则 jQuery 自定义内容滚动条不可见且不起作用。我注意到，当您缩小或放大窗口时，会显示滚动条。我在这个网址上有一个小例子：[http ://www.frantatoulen.wz.cz/](http://www.frantatoulen.wz.cz/)

问题可能出在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T15:12:43.100

问题是当#content 被隐藏时，插件脚本无法计算内容长度（隐藏元素的维度为零）。因此，脚本假定内容不需要滚动条。

**解决方案 A：**

您需要在内容切换并可见后调用插件的*更新*方法（插件主页有使用方法和参数的信息和示例）。在您的 click 函数中，在末尾添加以下内容：

```
$("#tlacitko").click(function(){
    $("#content").toggle();
    $("#content").mCustomScrollbar("update");
}); 
```

*注意：当您调整浏览器大小时，滚动条会起作用，因为它会在窗口调整大小事件时自动调用更新方法。*

**解决方案 B：**

您可以简单地将*updateOnContentResize*选项参数设置为*true*。每次内容长度更改时，这都会自动调用*更新方法：*

```
$("#content").mCustomScrollbar({
    advanced:{
        updateOnContentResize:true
    }
}); 
```

# perl - (Perl) 在一个文件中搜索另一个文件中的文本

> ID：13680122
> 
> 赞同：1
> 
> 时间：2012-12-03T09:12:54.293
> 
> 标签：perl, file, search

我在这部分代码上花了几个小时，但仍然不知道如何使它工作，所以任何建议都会很棒！

* * *

我有 2 个文件，list1.txt 和 dictionary.txt。list1.txt 看起来像

```
rs1
rs2
rs4
rs5 
```

而 dictionary.txt 看起来像

```
rs1 1 A G
rs2 2 C T
rs3 3 A A
rs4 4 G G 
```

列由空格分隔 - 有四列。我想要做的是对于list1.txt 中的每个单词，在dictionary.txt 中搜索该单词，如果存在，将dictionary.txt 中的整行打印到第三个文件中。如果dictionary.txt 中不存在该单词，只需打印该单词即可。

因此，如果我要使用上面列出的文件运行下面的程序，我的结果应该如下所示

```
rs1 1 A G
rs2 2 C T
rs4 4 G G
rs5 
```

上述程序：

```
open(LIST1, '<', 'test_chr1_22.txt') or die "Could not open chr1_22.txt: $!";

open(OUTPUT, '>', 'test_chr1_22_all_info.txt');

foreach my $line1 (<LIST1>)
{
        foreach my $line (@DICT)
        {
            if ($line =~ m/"$line1"/)
            {
                print OUTPUT"$line\n";
            }
        }
} 
```

这是我现在拥有的代码。我知道它没有我的第二个条件，即如果字典中不存在该单词，则只需打印该单词。但是，我什至无法解决第一部分，如果单词在字典中，则打印该行。我从这个空白文本文件中得到什么。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:22:16.757

`m/"$line1"/`错误的原因有很多：

*   您匹配的所有字符串都不包含`"`，因此这永远不会匹配。
*   您不会转义 的内容`$line1`以从任意文本形成正则表达式。
*   如果在字符串的开头找到文本，您只想匹配。
*   如果文本是整个字段，您只想匹配。

无论如何，一旦您使用循环和哈希查找替换效率极低的嵌套循环，对正则表达式匹配的需求就消失了。

```
my %dict;
while (<$DICT>) {
   my ($key) = split;
   $dict{$key} = $_;
}

while (<$INPUT>) {
   my ($key) = split;
   print $dict{$key} // $_;
} 
```

# list - 逐步增长的细胞阵列类

> ID：13680124
> 
> 赞同：2
> 
> 时间：2012-12-03T09:13:00.983
> 
> 标签：list, matlab

我编写了以下类来在 matlab 中实现“渐进式”单元格数组：

```
classdef growinglist < handle 
    properties (GetAccess='private',SetAccess='private')
        inner_cells % inner pre-allocated cell array
    end
    properties (GetAccess='public',SetAccess='private')
        n_elements % current number of elements (index of last valid element in inner_cells)
    end
    methods
        %% constructor
        function self=growinglist(varargin)
            % you can pass the initial capacity of inner_cells to constructor
            if nargin == 1 
                self.inner_cells =cell(ceil(varargin{1}),1);
            else
                self.inner_cells =cell(4,1); % initial size is 4
            end
            self.n_elements = 0;
        end
        function add(self, element)
            % inner_cells is not enough, double it before adding
            if self.n_elements + 1 > size(self.inner_cells,1)
                n = floor(size(self.inner_cells,1) * 2) - size(self.inner_cells,1) + 1;
                self.inner_cells = [self.inner_cells; cell(n,1)];
            end
            self.n_elements = self.n_elements + 1;
            self.inner_cells{self.n_elements} = element;
        end
        function elements = get_elements(self)
            elements = self.inner_cells(1:self.n_elements,1);
        end
    end
end 
```

但是，它似乎并不像预期的那样快。

事实上，执行这些测试：

```
n = 30000;

%%%%%% concat everytime
tic
lst = {};
for i=1:n
    lst = [lst; 1:10];
end
disp('1 - concat everytime');
toc
%%%%%% exact pre-allocation
tic
lst = cell(n,1);
for i=1:n
    lst{i} = 1:10;
end
disp('2 - exact pre-allocation');
toc
%%%%%% "progressive" pre-allocation
tic
inner_cells = cell(4,1);
n_elements = 0;
for i=1:n
    if n_elements + 1 > size(inner_cells,1)
       n1 = floor(size(inner_cells,1) * 2) - size(inner_cells,1) + 1;
       inner_cells = [inner_cells; cell(n1,1)];
    end
    n_elements = n_elements+1;
    inner_cells{n_elements} = 1:10;
end
elements = inner_cells(1:n_elements,1);
disp('3 - "progressive" pre-allocation');
toc
%%%%%% using growing list class
tic
glst = growinglist();
for i=1:n
    glst.add(1:10);
end
elements = glst.get_elements();
disp('4 - using growing list class');
toc
%%%%%% using growing list class with exact allocation
tic
glst = growinglist(n);
for i=1:n
    glst.add(1:10);
end
elements = glst.get_elements();
disp('5 - use growing list class with exact allocation');
toc 
```

我得到以下结果：

```
1 - concat everytime
Elapsed time is 4.954054 seconds.
2 - exact pre-allocation
Elapsed time is 0.006791 seconds.
3 - "progressive" pre-allocation
Elapsed time is 0.099431 seconds.
4 - using growing list class
Elapsed time is 11.618202 seconds.
5 - use growing list class with exact allocation
Elapsed time is 12.774726 seconds. 
```

实际上，我预计测试 n.4 和 n.5 的经过时间更接近测试 n.3。但它们甚至比测试 n.1 还要慢（我预计会是最差的）。此外，奇怪的是，测试 n.5 比 n.4 慢。

也许每次设置或执行其他一些副本时都会复制 inner_cells 数组，但我不明白为什么，因为我从句柄类派生了我的类以支持可变性。

我在matlab中很新，所以可能我错过了一些重要的东西......
有什么见解吗？

提前致谢。

PS
我正在使用MATLAB 2011a。

* * *

**编辑 ：**

正如@Edric 所建议的，我使用分析器找到了瓶颈，我发现缓慢的罪魁祸首是`size(self.inner_cells,1)`方法内部调用的函数`Add()`（**不知道为什么**）。

以这种方式修改类（以减少 size() 调用）：

```
classdef growinglist < handle 
    properties (GetAccess='private',SetAccess='private')
        inner_cells
        inner_cells_size
    end
    properties (GetAccess='public',SetAccess='private')
        n_elements % current number of elements (index of last valid element in inner_cells)
    end
    methods
        % constructor
        function self=growinglist(varargin)
            % you can pass the initial capacity of inner_cells to constructor
            if nargin == 1 
                self.inner_cells =cell(ceil(varargin{1}),1);
                self.inner_cells_size = ceil(varargin{1});
            else
                self.inner_cells =cell(4,1); % initial size is 4
                self.inner_cells_size = 4;
            end
            self.n_elements = 0;
        end
        function add(self, element)
            % inner_cells is not enough, double it before adding
            if self.n_elements + 1 > self.inner_cells_size
                n = floor(size(self.inner_cells,1) * 2) - size(self.inner_cells,1) + 1;
                self.inner_cells = [self.inner_cells; cell(n,1)];
                self.inner_cells_size = self.inner_cells_size + n;
            end
            self.n_elements = self.n_elements + 1;
            self.inner_cells{self.n_elements} = element;
        end
        function elements = get_elements(self)
            elements = self.inner_cells(1:self.n_elements,1);
        end
    end
end 
```

测试现在产生：

```
1 - concat everytime
Elapsed time is 6.825776 seconds.
2 - exact pre-allocation
Elapsed time is 0.011783 seconds.
3 - "progressive" pre-allocation
Elapsed time is 0.088668 seconds.
4 - using growing list class
Elapsed time is 0.841975 seconds.
5 - use growing list class with exact allocation
Elapsed time is 0.818212 seconds. 
```

这更有意义。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:05:52.330

不幸的是，与内置功能相比，MATLAB 对象系统通常很慢 - 特别是当您运行数千个方法调用时，每个方法调用只执行微不足道的计算量，就像您在这种情况下一样。

可能有帮助的一件事是使用函数调用样式进行方法调用（不确定是否有更好的术语）。无论如何，它看起来像这样：

```
add(glst, 1:10); 
```

而不是

```
glst.add(1:10); 
```

这使 MATLAB 可以立即意识到您的意思是方法调用而不是字段引用。

# javascript - 谷歌图表上小数值的假数字

> ID：13680125
> 
> 赞同：1
> 
> 时间：2012-12-03T09:13:01.657
> 
> 标签：javascript, html, google-visualization

我正在使用这种谷歌图表： [https ://google-developers.appspot.com/chart/interactive/docs/gallery/combochart](https://google-developers.appspot.com/chart/interactive/docs/gallery/combochart)

折线图的值非常高，相比之下，条形图的值非常低。我想以两种类型都易于阅读的方式组合它们。

这是我的脚本：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load('visualization', '1', {packages: ['corechart']});
function drawVisualization() {
var chart = new google.visualization.ComboChart(document.getElementById('chart_incoming_actions'));
chart.draw(google.visualization.arrayToDataTable([
    ['Month', 'Votes', 'Views'],
    ['2012-12-03', 3, 9912],
    ['2012-12-02', 41, 85776],
    ['2012-12-01', 43, 85483],
    ['2012-11-30', 36, 77738],
    ['2012-11-29', 50, 84000],
    ['2012-11-28', 72, 102089],
    ['2012-11-27', 74, 89701]
]), {
    vAxis: {title: "Views / Votes"},
    hAxis: {title: "Month"},
    seriesType: "bars",
    series: {1: {type: "line"}}
});
}
google.setOnLoadCallback(drawVisualization);
</script> 
```

如您所见，这些数字相距甚远。是否可以显示当前数字，但要伪造条形的高度，例如它会乘以 1000？

提前谢谢， ryu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:37:41.957

没关系，我自己想通了。:)

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
google.load('visualization', '1', {packages: ['corechart']});
function drawVisualization() {
var chart = new google.visualization.ComboChart(document.getElementById('chart_incoming_actions'));
chart.draw(google.visualization.arrayToDataTable([
        ['Month', 'Votes', 'Views'],
        ['2012-12-03', 7, 19393],
        ['2012-12-02', 41, 85776],
        ['2012-12-01', 43, 85483],
        ['2012-11-30', 36, 77738],
        ['2012-11-29', 50, 84000],
        ['2012-11-28', 72, 102089],
        ['2012-11-27', 74, 89701]
    ]), {
    vAxis: {
        0: {logScale: false, title: "Votes"},
        1: {logScale: false, title: "Views"}
    },
    hAxis: {title: "Month"},
    seriesType: "bars",
    series: {
        0:{type: 'bar', targetAxisIndex:0},
        1:{type: 'line', targetAxisIndex:1}
    }
});
}
google.setOnLoadCallback(drawVisualization);
</script> 
```

# mysql - 简单的 Mysql 选择行不一致。我不知道为什么。是我还是mysql？

> ID：13680128
> 
> 赞同：1
> 
> 时间：2012-12-03T09:13:16.770
> 
> 标签：mysql, grails

我的 Grails 应用程序进行了一个非常简单的调用来查找登录用户的详细信息。基本上是这样的：

```
select id, username, password, firstname, lastname from Person where id=3; 
```

有时会得到结果，有时不会。我一直在分析正在发送的sql，这对我来说没有意义。一个请求会找到 Person，而后续请求则不会。下面的日志跟踪线程 ID、会话 ID 和登录用户。我知道让人们查看我的 sql 查询日志并不是一件好事，但我希望我已经设法在下面说明我所看到的。

```
2701 [INFO] 2012-12-03 02:19:02,136 audit [T-82] [23212190391C07976A2CC568F06A780A] [cb18b110954f4476b80c2@stratus5.com] 3\. 
Connection.prepareStatement(select person0_.id as id4_0_, person0_.version as version4_0_, 
person0_.account_expired as account3_4_0_, person0_.account_locked as account4_4_0_, 
person0_.created_date as created5_4_0_, person0_.email_hash as email6_4_0_, person0_.enabled as enabled4_0_, person0_.first_name as first8_4_0_, 
person0_.last_name as last9_4_0_, person0_.`password` as password10_4_0_, person0_.password_expired as password11_4_0_, person0_.tmp_password as tmp12_4_0_, 
person0_.username as username4_0_ from person person0_ where person0_.id=?)     

2702 [INFO] 2012-12-03 02:19:02,137 audit [T-82] [23212190391C07976A2CC568F06A780A] 
[cb18b110954f4476b80c2@stratus5.com] 3\. PreparedStatement.setLong(1, 1160)

2749 [DEBUG] 2012-12-03 02:19:02,278 SignUpApiController [T-82]
[23212190391C07976A2CC568F06A780A] [cb18b110954f4476b80c2@stratus5.com] 
user: com.stratus5.auth.Person : 1160

280 [INFO] 2012-12-03 02:15:32,143 audit [T-160] [23212190391C07976A2CC568F06A780A] [cb18b110954f4476b80c2@stratus5.com] 5\. Connection.prepareStatement(select person0_.id as id4_0_, person0_.version as version4_0_, 
 person0_.account_expired as account3_4_0_, 
 person0_.account_locked as account4_4_0_, 
 person0_.created_date as created5_4_0_, person0_.email_hash as email6_4_0_, 
 person0_.enabled as enabled4_0_, person0_.first_name as first8_4_0_, 
 person0_.last_name as last9_4_0_, person0_.`password` as password10_4_0_, 
 person0_.password_expired as password11_4_0_, person0_.tmp_password as tmp12_4_0_, 
 person0_.username as username4_0_ from person person0_ 
 where person0_.id=?) 

281 [INFO] 2012-12-03 02:15:32,143 audit [T-160] [23212190391C07976A2CC568F06A780A] 
[cb18b110954f4476b80c2@stratus5.com] 5\. PreparedStatement.setLong(1, 1160) 

313 [DEBUG] 2012-12-03 02:15:32,939 SignUpApiController [T-160] 
[23212190391C07976A2CC568F06A780A] [cb18b110954f4476b80c2@stratus5.com] 
Current user: null 
```

以下是一些代码摘录，以防它们有帮助：

```
def principalId = new Long(springSecurityService.getPrincipal().id)
def p = Person.get(principalId)
log.debug "Current user: $p" 
```

我一直在使用 springSecurityService.currentUser 并且看到了同样的错误。我只是根据问题可能出在 springSecurityService 中的假设来故意调用 Person.get，但现在看起来不太可能。

# javascript - Google 地方信息自动填充 - 修改结果

> ID：13680130
> 
> 赞同：3
> 
> 时间：2012-12-03T09:13:23.967
> 
> 标签：javascript, jquery, google-maps-api-3, autocomplete

我有一些标准的谷歌地方自动完成代码可以正常工作。当用户从列表中选择地址时，我想修改结果。

例如，其中一个结果是

'45 Alexandra Road Holiday Flats, Alexandra Road, 绍斯波特, 英国'

当用户从列表中选择它时，我希望以下值出现在文本框中

'45 Alexandra Road Holiday Flats, Alexandra Road, Southport, PR4 5JD'

即，我希望插入邮政/邮政编码并删除英国。

我可以在 place_changed 事件中执行此操作，邮政/邮政编码可用，我可以进行一些字符串操作并获得我想要的结果。

但是，当我将它分配给“place_changed”函数末尾的 txtBox 时，某些东西会在没有邮政/邮政编码的情况下将其更改回原始选定值。这是最近发生的变化，因为我的代码过去可以工作。将值分配/绑定到 txtBox 发生在 place_changed 事件之后，现在看起来。

```
var autoCompleteObject = new google.maps.places.Autocomplete(txtBox[0], GooglePlacesOptions);
// Autocomplete Listener
google.maps.event.addListener(autoCompleteObject, 'place_changed', function () {

    var place = autoCompleteObject.getPlace();

    txtBox.val('45 Alexandra Road Holiday Flats, Alexandra Road, Southport, PR4 5JD');

}); 
```

任何关于如何实现这一目标的想法将不胜感激。

非常感谢，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T07:27:09.263

作为参考，我发现以下有用的答案是一种有效的解决方法： [仅在 google.maps.event.addListener() 中显示街道地址](https://stackoverflow.com/questions/13524258/show-just-the-street-address-in-google-maps-event-addlistener)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:27:24.877

我决定不使用自动完成功能，而是使用 PlacesService.textSearch()。

非常简单，您可以更好地控制结果及其显示方式等。

所以问题仍然存在，但我的头不那么痛了:)

# c# - 将字符串与连字符进行比较

> ID：13680132
> 
> 赞同：1
> 
> 时间：2012-12-03T09:13:29.550
> 
> 标签：c#, sorting, compare, hyphen, string-comparison

我发现了很多关于此的帖子，但未能将它们与我的情况相匹配。

我在列表中有一些字符串

`List<string> list = new List<string>{ "100-1", "100-11", "100-3", "100-20" }`

[我使用以下代码对从该位置](https://stackoverflow.com/a/6397287/815600)挑选的内容进行排序

```
void Main()
{
    string[] things= new string[] { "100-1", "100-11", "100-3", "100-20" };

    foreach (var thing in things.OrderBy(x => x, new SemiNumericComparer()))
    {    
        Console.WriteLine(thing);
    }
}

public class SemiNumericComparer: IComparer<string>
{
    public int Compare(string s1, string s2)
    {
        if (IsNumeric(s1) && IsNumeric(s2))
        {
            if (Convert.ToInt32(s1) > Convert.ToInt32(s2)) return 1;
            if (Convert.ToInt32(s1) < Convert.ToInt32(s2)) return -1;
            if (Convert.ToInt32(s1) == Convert.ToInt32(s2)) return 0;
        }

        if (IsNumeric(s1) && !IsNumeric(s2))
            return -1;

        if (!IsNumeric(s1) && IsNumeric(s2))
            return 1;

        return string.Compare(s1, s2, true);
    }

    public static bool IsNumeric(object value)
    {
        try {
            int i = Convert.ToInt32(value.ToString());
            return true; 
        }
        catch (FormatException) {
            return false;
        }
    }
} 
```

我的输出是`100-1, 100-11, 100-20, 100-3`

我相信它正在接受`-`并`decimal`比较这些值。其实我期待的结果是 `100-1, 100-3, 100-11, 100-20`。我只是想知道它实际上是在什么基础上进行排序的。任何帮助表示赞赏。`100-2`甚至我希望它能够以不同的方式对待`100-20`。

就在飞行中，我在 Infragistic 控制网格中看到，在其中进行排序会产生与我在这里期望的结果相同的结果。

**编辑**

我在列表中有许多其他字符串值，有些是整数、双精度值等等。连字符只是这里提到的一个案例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:20:07.193

```
var sorted = things.Select(s => s.Split('-'))
                .OrderBy(x => double.Parse(x[0]))
                .ThenBy(x => double.Parse(x[1]))
                .Select(x=>String.Join("-",x))
                .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T09:21:07.427

这应该按预期工作：

```
string[] things= new string[] { "100-1", "100-11", "100-3", "100-20" };
IEnumerable<string> ordered = things
            .Select(s => new
            {
                str = s,
                firstPart = s.Split('-').ElementAtOrDefault(0),
                secondPart = s.Split('-').ElementAtOrDefault(1)
            })
            .OrderBy(x => int.Parse(x.firstPart))
            .ThenBy(x => int.Parse(x.firstPart))
            .Select(x => x.str);

foreach (string s in ordered)
    Console.WriteLine(s); 
```

尽管它假定您的数据是严格的，否则您可以接受例外情况，fe at `int.Parse(x.firstPart)`.

**演示**：http: [//ideone.com/UJ5Yt4](http://ideone.com/UJ5Yt4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T09:16:44.967

如果要按第二个数字（连字符之后）对项目进行排序，则需要将字符串解析为数字，然后使用它进行排序。你可以试试：

```
string[] things = new string[] { "100-1", "100-11", "100-3", "100-20" };
var test = things.OrderBy(r => int.Parse(r.Split('-')[1])).ToArray(); 
```

您当前代码不起作用的原因可能是因为它无法将字符串解析为`100-`整数值并且您的函数`IsNumeric`返回 false。

# c++ - 从命令行读取逻辑运算符

> ID：13680133
> 
> 赞同：1
> 
> 时间：2012-12-03T09:13:30.033
> 
> 标签：c++

我正在尝试从我的应用程序的命令行中读取**12|11|13 。**读取此字符串时出现错误“ **11 未被识别为内部命令”。**

如果我可以阅读完整的字符串或单个数字，我就可以了。

谁能建议如何阅读这个？

尼朋

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:22:27.780

您需要在引号 ex 之间传递参数：

```
myprog "11|12|14" 
```

因为如果不这样做，字符`|`（管道）用于将左侧程序的输出传递给符号右侧的程序。

# java - 关于Java初学者的问题

> ID：13680135
> 
> 赞同：-8
> 
> 时间：2012-12-03T09:13:40.153
> 
> 标签：java, scjp

怎么打电话？怎么做？

```
public class Test {
        public static void main(String[] args) {
            Test test = new Test();
            Animal a = new Animal("Animal");
            Dog d = new Dog(" BigDog ","yellow");
            Cat c = new Cat(" SmallCat ","black");
            test.f(a); test.f(d); test.f(c); //(1)
        }

        public void f(Animal a) {
            System.out.println("name :"+ a.name);

            if(a instanceof Dog) {
                Dog dog = (Dog)a;
                System.out.println("    "+ fursColor + "fur"); //!(2)!Error
            }
            else if(a instanceof Cat) {
                Cat cat = (Cat)a;
                System.out.println("  " + eyesColor + "eye"); //(3)!Error
            }
        }
    } 
```

问问题：

(1) 这是什么意思？

（2）“黄”怎么称呼？

（3）如何称呼“黑”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:18:49.207

对于 1_

您在这里拥有的是[子类型](http://en.wikipedia.org/wiki/Subtyping)多态性。Youu 传入 Animal 的子类

对于 2_ 和 3_

你需要将一些东西传递给他的方法。你可以传入一个对象。例如

```
System.out.println(dog.getColour()); 
```

这假设您`getColour`的对象中有一个方法。你没有提供你对动物的定义，所以我只能假设这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:19:14.167

> (1) 这是什么意思？

该方法`f`正在使用`instanceof`，因为它不使用多态方法来选择正确的类型。

你能更具体地了解你不明白的地方。

> （2）“黄”怎么称呼？

我假设您想要的是检索`String`字段中的字段，`dog`就像`dog.fieldNameNotShownInYourExample`获取`a.name`名称一样。

> (3) 怎么称呼“黑”？

我认为它应该是`"black"`但它与2相同）

# jquery - 在 Bootstrap data-toggle='modal' 之前编辑表单输入值

> ID：13680137
> 
> 赞同：1
> 
> 时间：2012-12-03T09:13:40.607
> 
> 标签：jquery, twitter-bootstrap

我有一个生成结果表，每个都带有一个编辑按钮。

```
<table>
    <tr>
      <td>Some Result 1</td><td><a href='#edit_tmp_form' data-toggle='modal' role='button' class='response-edit btn btn-warning'>Edit</a></td>
    </tr>
    <tr>
      <td>Some Result 2</td><td><a href='#edit_tmp_form' data-toggle='modal' role='button' class='response-edit btn btn-warning'>Edit</a></td>
    </tr>
</table> 
```

我有一个临时表格。

```
<div id="edit_tmp_form" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="form_label" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h4 id="form_label">Edit</h4>
    <form class="form-inline" method="post" action="/somewhere">
        <input type="text" id="add_name" class="input" placeholder="something" name="name">
        <button id='add_c' disabled="disabled" type="submit" class="btn">增加</button>
    </form>
  </div>
</div> 
```

到目前为止，一切正常。

但是，我正在尝试根据我要编辑的对象来编辑输入字段。

例如：如果我要单击“Some Result 1”旁边的编辑按钮，我希望输入字段预先填写“Some Result 1”。

我尝试使用 jQuery，然后导致了问题。

如果我要这样做：

```
$('.response-edit').click(function(){
   console.log('abc');
}); 
```

单击按钮时，代码未按预期运行。我假设引导数据切换在 onclick 事件侦听器之前运行，因此不阅读我的代码。

有没有办法解决？还是我的假设是错误的？如果我的假设是错误的，请引导我走正确的道路。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:41:51.197

根据引导代码（[https://github.com/twitter/bootstrap/blob/master/js/bootstrap-modal.js](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-modal.js)），引导使用点击事件并阻止默认浏览器行为。所以在这里，引导程序只是阻止浏览器在您单击锚点时导航。

但是引导程序不会阻止点击事件冒泡，所以你应该能够捕捉到它并做你想做的事。我只是尝试了一个小例子，在单击带有 a`data-toggle=modal`和简单模式的锚点时出现日志消息。它有效。

当您的元素不在这里时，也许您尝试绑定单击事件？

试试这个 ：

```
$('body').on('click', '.response-edit', function(){
   console.log('abc');
}); 
```

# visual-studio-2010 - 放入并进入 Visual Studio？

> ID：13680139
> 
> 赞同：1
> 
> 时间：2012-12-03T09:13:52.437
> 
> 标签：visual-studio-2010, dreamweaver

如何在 Microsoft Visual 2010 中从本地获取或放置文件到 ftp 服务器，Dreamweaver put/get 的等效选项？VS 中是否有上传和下载选项（在 DW ctrl + shift U/D 中）？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:22:52.897

右键单击 Web 项目并选择`Publish`. 有几种不同的选择。

有关详细信息，请参阅[如何：使用发布网站工具部署网站项目](http://msdn.microsoft.com/en-us/library/20yh9f1b.aspx)。

> 目标位置可以是本地或共享文件夹、**FTP 站点**或您使用 URL 访问的网站。您必须具有在目标位置创建和写入文件的权限。

（强调我的）

# c++ - 我如何将数组存储到C++中的队列中

> ID：13680140
> 
> 赞同：2
> 
> 时间：2012-12-03T09:14:03.303
> 
> 标签：c++, arrays, queue

```
queue < int* > qq;

for (int i = 0; i < N; i++) {
    int cc[2] = {i, i + 1};
    qq.push(cc);
} 
```

N 很大但不精确，所以我想使用队列。我想存储很多数组来排队，但是qq存储的数组是同一个。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T09:17:03.540

您的代码将无法正常工作。每个`cc`都在循环中具有相同的堆栈位置。

您需要`cc`在堆中分配数组，也许使用`int *cc = new int[2];`（但稍后您需要`delete`）。

更好的方法是`cc`声明为`std::vector`or`std::array`或`std::tuple`（在 C++11 中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T09:16:20.743

您所做的在*语法上*是正确的，但*在概念上*是错误的。您正在插入在每次迭代中创建并在迭代结束时销毁的本地数组；处于`qq`无法使用的状态。在循环之外，取消引用 of 的任何元素`qq`都会调用未定义的行为。

使用`std::vector`：

```
std::queue<std::vector<int>> qq;

for (int i = 0; i < N; i++) {
    std::vector<int> cc{i, i + 1};
    qq.push(cc);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:18:54.167

您每次推送相同的地址，即`cc`. 您需要定义一个包含这两个值的结构，如下所示：

```
struct CC {
    int x, y;
    CC(int _x, int _y) : x(_x), y(_y) {}
}

queue<CC> qq; 
```

进而..

```
qq.push(CC(i, i + 1)); 
```

# winapi - 修改win32本机exe中字符串表类型的资源

> ID：13680150
> 
> 赞同：1
> 
> 时间：2012-12-03T09:14:43.193
> 
> 标签：winapi, resources, exe, string-table

我想修改我的`exe`资源中的一些字符串。该资源类型是字符串表，但是当我使用`UpdateResource`函数时，我不知道必须将什么参数传递给它，因此它指向字符串表中的确切原始数据。

类型参数是`RT_STRING`，但我应该发送`MAKEINTRESOURCEW()`什么？

```
HANDLE hExeFile = BeginUpdateResource(L"d:\\m.exe", FALSE);
WCHAR mail[]={L"ddddddd@gmail.com"};
UpdateResource(hExeFile,RT_STRING,MAKEINTRESOURCEW(?????), MAKELANGID(LANG_ENGLISH, SUBLANG_ENGLISH_US), (LPVOID)mail, wcslen(mail)*2);
EndUpdateResource(hExeFile, FALSE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:23:07.477

exe 文件在运行时无法更新自己的资源。资源被操作系统锁定并且是只读的。但是，如果您可以更新资源，那么显然您必须知道资源的 ID 才能更新它。如果它是编译器生成的资源，那么除非您的编译器使用可预测的 ID 号，例如 1，否则您可能不走运。否则，使用 .rc 文件定义您自己的资源数据，然后您可以使用任何您想要的 ID .

# ruby - 为什么这个 enumerator.to_a 返回 []？

> ID：13680151
> 
> 赞同：2
> 
> 时间：2012-12-03T09:14:47.543
> 
> 标签：ruby, ruby-1.9

刚好遇到这段代码

```
Enumerator.new((1..100), :take, 5).to_a
# => [] 
```

有谁知道为什么它返回一个空数组而不是 5 个整数的数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:22:31.900

从文档中，[`Enumerator#new`](http://www.ruby-doc.org/core-1.9.3/Enumerator.html#method-c-new)：

```
new(obj, method = :each, *args) 
```

> 在第二种不推荐使用的形式中，生成的 Enumerator 使用给定的方法迭代给定的对象，并传递给定的参数。
> 
> 不鼓励使用此表格。请改用 Kernel#enum_for 或 Kernel#to_enum。

这第二种用法（根据文档，您不应该使用它）需要一个类似`each`的方法（就是这样，一个产生值的方法）。`take` *返回*值，但不*产生*它们，所以你得到一个空的枚举。

请注意，在 Ruby 2 中，执行 lazy 将非常简单`take`：

```
2.0.0dev> xs = (1..100).lazy.take(5)
#=> #<Enumerator::Lazy: #<Enumerator::Lazy: 1..100>:take(5)>
2.0.0dev> xs.to_a
#=> [1, 2, 3, 4, 5] 
```

# asp.net-web-api - WebApi：QueryString-Parameter 与路由相关

> ID：13680155
> 
> 赞同：3
> 
> 时间：2012-12-03T09:14:53.970
> 
> 标签：asp.net-web-api, query-string

我的网络 api 中有一个方法，如下所示：

```
public HttpResponseMessage Get(string path)
{
} 
```

这是对应的网址：

```
http://server/web/api/controller?path='param' 
```

但我希望这个查询字符串参数是可选的。我希望，如果没有查询字符串参数，字符串“路径”应该为空。

但这不起作用...我必须创建另一种方法（否则找不到“方法”）

```
public HttpResponseMessage Get() 
```

难道没有别的办法了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:20:02.263

尝试提供一个默认值并明确声明它来自 Uri。

```
public HttpResponseMessage Get([FromUri]string path = null)
{
} 
```

# jquery - jQuery mobile，如何将图钉添加到谷歌地图

> ID：13680156
> 
> 赞同：1
> 
> 时间：2012-12-03T09:15:02.283
> 
> 标签：jquery, mobile, maps

我正在使用 jQuery 文档中的示例代码

```
<div data-role="popup" id="popupMap" data-overlay-theme="a" data-theme="a" data-corners="false" data-tolerance="15,15">

    <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>

    <iframe src="map.html" width="480" height="320" seamless></iframe>

</div> 
```

和

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Map</title>
    <script>
        function initialize() {
            var myLatlng = new google.maps.LatLng( 51.520838, -0.140261 );
            var myOptions = {
                zoom: 15,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }
            var map = new google.maps.Map( document.getElementById( "map_canvas" ), myOptions );
        }
    </script>
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <style>
        html {
            height: 100%;
            overflow: hidden;
        }
        body {
            margin: 0;
            padding: 0;
            height: 100%;
        }
        #map_canvas { 
            height: 100%;
        }    
    </style>
</head>
<body onload="initialize()">

    <div id="map_canvas"></div>

</body>
</html> 
```

这会在屏幕的弹出窗口中打开谷歌地图。

但是，我怎样才能在特定位置放置一个大头针来完成这项工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:26:08.697

此代码将在 -25.363882、131.044922 的位置向您的地图添加一个标记：

```
function initialize() {
    var myLatlng = new google.maps.LatLng( 51.520838, -0.140261 );
    var myOptions = {
        zoom: 15,
        center: myLatlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    var map = new google.maps.Map( document.getElementById( "map_canvas" ), myOptions );
    var markerLatlng = new google.maps.LatLng(-25.363882,131.044922);
    var marker = new google.maps.Marker({
        position: markerLatlng,
        title:"Hello World!"
    });
    marker.setMap(map);
} 
```

我真的鼓励您阅读[Google Maps API 指南](https://developers.google.com/maps/documentation/javascript/overlays#AddingOverlays)

# android - 如何使用 view.playSoundEffect(SoundEffectConstants.CLICK); 使用默认的点击声音

> ID：13680163
> 
> 赞同：5
> 
> 时间：2012-12-03T09:15:33.813
> 
> 标签：android, android-mediaplayer

我想使用默认`TICK`声音，但我不知道如何或在哪里放置此代码

```
view.playSoundEffect(SoundEffectConstants.CLICK); 
```

我在另一篇文章中找到了这段代码。

这是我的代码：

```
 protected void onCreate(Bundle savedInstanceState)
        {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final MediaPlayer mp = MediaPlayer.create(this, R.raw.blah);

        Button Button01 = (Button)this.findViewById(R.id.Button01);
        Button01.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {
                mp.start();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onClick(View v){}

    public void disclaimerBTN (View v){
        Toast.makeText(this, "FAILED:      The remote object is " +
                            "not responding to this command",Toast.LENGTH_LONG).show();
    }
} 
```

那么我将把`view.play`.....代码放在哪里？非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T09:52:11.403

对于在按钮单击事件上使用[AudioManager.playSoundEffect ，您可以尝试如下：](http://developer.android.com/reference/android/media/AudioManager.html#playSoundEffect%28int,%20float%29)

```
AudioManager audioManager = 
            (AudioManager) this.getSystemService(Context.AUDIO_SERVICE);

 Button01.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {
                 audioManager.playSoundEffect(SoundEffectConstants.CLICK);   
                 //mp.start();
            }
        }); 
```

作为参考，您可以在 Google 源代码中查看此示例：

[http://code.google.com/p/android-traditional-chinese-ime/source/browse/trunk/src/com/googlecode/tcime/SoundMotionEffect.java?r=13](http://code.google.com/p/android-traditional-chinese-ime/source/browse/trunk/src/com/googlecode/tcime/SoundMotionEffect.java?r=13)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-11T08:26:15.030

您可以通过以下方式从每个视图播放声音：

```
Button01.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {
                 v.playSoundEffect(SoundEffectConstants.CLICK);   
            }
        }); 
```

请注意，如果默认情况下关闭触摸声音，则不会播放声音。这是在常规设备声音首选项中设置的（设置->声音->可听或在较新的操作系统上：选项>声音>触摸）

另外，如果设置了这个设置，大多数点击事件都会触发点击声音！

# java - 带循环的深度优先搜索

> ID：13680167
> 
> 赞同：1
> 
> 时间：2012-12-03T09:16:12.923
> 
> 标签：java, arrays, depth-first-search, maze, stack

我正在用java制作一个机器人迷宫，其中机器人使用深度优先搜索算法来遍历迷宫并到达目标。这在没有循环的迷宫中可以正常工作，但是当引入这些时，算法会失败。有没有办法让深度优先搜索与循环迷宫一起工作？如果是这样，如何去做呢？

我有这个迷宫的两个单独的实现 - 一个记录每个连接并将其存储在一个数组中，而另一个使用堆栈来推送一个新的连接并在完成探索该连接时将其弹出。使用这些实现中的任何一种的解决方案都是可以接受的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:20:10.233

您需要**标记访问过的节点**并将**它们视为“附加”墙壁**。

这样，您可以避免搜索循环。不过，它将不再找到最短路径。

有关详细信息，请参阅 Dijkstra 算法。如需更高级的定向版本，请查看 A* 搜索。在困难的迷宫中，它不应该给你带来很多好处。A* 对于开放区域更有趣。

# c - 长类型数组的 C printf 无法正常工作

> ID：13680176
> 
> 赞同：1
> 
> 时间：2012-12-03T09:16:54.960
> 
> 标签：c, arrays, loops

我的 C 有一种我不理解的行为。

我已经定义了一个数组如下

```
long gainT1[21]; 
```

*我对那个变量做了一些工作*（因此，不需要初始化），然后，我想显示它包含的值。问题来了：第二个 for 显示的第一个值不是预期的值！

```
printf("CHECKING: gainT1[0]=%ld\n", gainT1[0]);
{
    ptrdiff_t k;
    for(k = 0; k < 16; k++) printf("[%td]=%ld   ", k, gainT1[k]); printf("\n");
    for(k = 0; k < 17; k++) printf("[%td]=%ld   ", k, gainT1[k]); printf("\n"); // Here the for is going up to 16 instead of 15 previously
} 
```

此代码返回：

> 检查：**增益T1[0]=4207440**
> 
> **[0]=4207440** [1]=4207440 [2]=4294967295 [3]=139846275105333 [4]=16351504 [5]=0 [6]=139846268659528 [7]=139846277253568 [8]=16351504 [9]=3 [10]=128 [11]=139846277252304 [12]=4294967295 [13]=139846272645590 [14]=0 [15]=0
> 
> **[0]=2356216002** [1]=4207440 [2]=4294967295 [3]=139846275105333 [4]=16351504 [5]=0 [6]=139846268659528 [7]=139846277253568 [8]=16351504 [9] [10]=128 [11]=139846277252304 [12]=4294967295 [13]=139846272645590 [14]=0 [15]=0 [16]=6312008

我无法弄清楚我的代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:56:38.577

“*我用那​​个变量做一些工作*”是相当不确定的。如果在 for 循环中，您正在访问一个实际上仍未定义的元素，则任何事情都可能发生，包括出现的奇数值。

所以，最简单的就是这样做：

```
long gainT1[21] = { 0 }; 
```

任何非设定值将至少为零。

（注意：我知道这个数组初始化适用于 c99；不确定例如 c89 或 c90。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:30:56.483

如果您显示整个代码，那么很容易得到确切的错误，但是由于您提供的代码较少，所以我认为您应该尝试一下。

您可以使用`printf()`来显示`ptrdiff_t`. 根据 1999 C 标准，格式字符串应包含 t 长度修饰符和 d 或 i 转换说明符，如下所示：

```
ptrdiff_t d;
...
printf("%td", d); 
```

尽管说明`%d`符与 C 一样长，但`%t`修饰符还是相当新的。很少有 C 库支持它。如果您的编译器不支持`%td`，那么您应该尝试`%ld`，如下所示：

```
printf("%ld", (long)d); 
```

`ptrdiff_t`使用标准 C++库显示`iostream`a 与显示任何其他数字类型一样简单：

```
std::cout << d; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:35:26.787

当您帮助我理解问题一定出在其他地方时，我创建了一个新项目，删除了尽可能多的行，这似乎**是一个初始化问题**：由于数组未正确初始化，因此值不稳定。问题是否出现取决于编译选项，因此请记住，即使变量看起来无用，也要始终正确初始化变量。

# eclipse - 仅为一个视角添加菜单项

> ID：13680177
> 
> 赞同：0
> 
> 时间：2012-12-03T09:16:57.473
> 
> 标签：eclipse, eclipse-plugin, birt

我正在尝试通过插件将菜单项添加到 Eclipse 中的运行菜单。

但是，我只希望当我处于“报表设计”透视图（这是用于 BIRT）中时出现此项目。其次，（如果可能）我希望仅在打开文件的扩展名为 .rptdesign 时才启用菜单项。

**使用 plugin.xml 中的可见性**或**visibleWhen**元素我没有任何运气

任何提示表示赞赏，罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:02:02.263

终于明白了，这就是我必须做的......

创建命令

```
<extension
     point="org.eclipse.ui.commands">
  <command
        name="Deploy"
        icon="icons/deploy.gif"
        style="push"
        id="com.test.deployCommand">
  </command> 
```

为命令创建处理程序

```
<extension
     point="org.eclipse.ui.handlers">
  <handler
        commandId="com.test.deployCommand"
        class="com.test.DeployHandler">
  </handler> 
```

添加 BIRT 中可用的现有属性测试器（以测试文件类型） - 如果我更改命名空间参数将不起作用

```
<extension
    point="org.eclipse.core.expressions.propertyTesters">
 <propertyTester
       class="org.eclipse.birt.report.debug.internal.ui.script.ScriptDebuggerPropertyTester"
       id="com.test.propertyTester1"
       namespace="scriptdebug"
       properties="isRptdesign"
       type="org.eclipse.core.runtime.IAdaptable">
 </propertyTester> 
```

添加了两个定义

```
<extension point="org.eclipse.core.expressions.definitions">
  <definition id="com.test.inRptDesignPerspective">
    <with variable="activeWorkbenchWindow.activePerspective">
      <equals value="org.eclipse.birt.report.designer.ui.ReportPerspective"/>
    </with>
  </definition>
  <definition id="com.test.inRptDesignFile">
    <with variable="selection">
    <count value="1" />
    <iterate>
       <and>
         <test property="scriptdebug.isRptdesign" />
       </and>
     </iterate>
    </with>
  </definition>
</extension> 
```

On my menu extension, added a setting to the command, marking when its visible

```
<extension
     point="org.eclipse.ui.menus">
     <menuContribution locationURI="menu:org.eclipse.ui.main.menu" id="com.test.contribution2">
     <menu
          id="org.eclipse.ui.run"
          label="Run"
          path="additions">
        <groupMarker
             name="preview">
       </groupMarker>
        <command
              commandId="com.test.deployCommand"
              icon="icons/deploy.gif"
              id="com.test.deployCommand"
              menubarPath="org.eclipse.ui.run/preview"
              style="push"
              class="com.test.DeployHandler">
              <visibleWhen>
              <and>
                <reference definitionId="com.test.inRptDesignPerspective"/>
                <reference definitionId="com.test.inRptDesignFile"/>
              </and>
           </visibleWhen>
         </command>
       </menu>
     </menuContribution> 
```

# r - 如何计算多个文件的相关性？

> ID：13680179
> 
> 赞同：-1
> 
> 时间：2012-12-03T09:16:59.870
> 
> 标签：r, binary, correlation

dir1和dir2两个目录共有365个二进制文件，格式相同，byte，extend等...

下面给出的代码将 dir1 和 dir2 作为向量读取，然后计算相关性。基本上我想得到相关图，我们只计算每个网格像素的R值。假设我们要计算 dir1 和 dir2 之间的全局相关图，我们有来自 dir1 和 dir2 的每个像素的两列数据，可以计算该像素的 R 值，然后简单地对全局像素进行循环。

```
dir1 <- list.files("C:\\cor", "*.bin", full.names = TRUE)
dir2 <- list.files("C:\\cor2", "*.bin", full.names = TRUE)
results <- list()
    for (.files in dir1){
# read in the 365 files as a vector of numbers for dir1
    file1 <- do.call(rbind,(lapply(.files, readBin  , integer() , size = 2 ,
                                n = 360 * 720 , signed = T)))
    }
    for (.files in dir2){
    # read in the 365 files as a vector of numbers for dir2
    file2<- do.call(rbind,(lapply(.files, readBin  , integer() , size = 2 , 
                    n = 360 * 720 , signed = T)))
    }
    # calculate the  correlation so we will get a correlation map
for (.files in seq_along(dir1)){              
    results[[length(results) + 1L]]<- cor(file1 ,file2)
    } 
```

我收到了这个错误：`Error in cor(file1, file2) : allocMatrix: too many elements specified`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:15:02.687

如果您想计算每个 x,y 位置的时间相关性（看起来），我会将其读入具有维度的多维数组`(nx, ny, ntsteps, ndatasets)`，例如使用较小的示例数据集：

```
 # nx   ny   nsteps ndatasets
dat = runif(20 * 30 * 100 *  2)
dim(dat) = c(20, 30, 100, 2)
> str(dat)
num [1:20, 1:30, 1:100, 1:2] 0.969 0.482 0.974 0.682 0.856 ... 
```

现在我们利用了`apply`也适用于多维数组的事实，而不仅仅是矩阵：

```
cor_result = apply(dat, c(1,2), function(x) cor(x[,1], x[,2]))
> str(cor_result)
 num [1:20, 1:30] 0.06673 0.00943 -0.11265 -0.01157 -0.0024 ... 
```

我们使用`apply`迭代所有 x,y 对来计算时间相关性。

对于您的大数据集，加载它大约需要 1.4 Gb。R 中的经验法则是，您需要 3 倍于 RAM 的数据集大小才能使用它。因此，如果您有 8 Gb 的 RAM 和 64 位 R，这应该可以正常工作。或者，我经常分块进行这些计算，因为我只有 4 Gb。例如，您可以先处理前 5 行（y 坐标），然后再处理后 5 行，以此类推。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:38:38.580

我会用以下方式重写你的代码（假设我理解正确并且你想要做的是将每一行`file1`与每一行进行比较`file2`）：

```
dir1 <- list.files("C:\\cor", "*.bin", full.names = TRUE)
dir2 <- list.files("C:\\cor2", "*.bin", full.names = TRUE)
file1 <- do.call(rbind,lapply(dir1, readBin  , integer() , size = 2 ,
                                n = 360 * 720 , signed = T))
file2 <- do.call(rbind,lapply(dir2, readBin  , integer() , size = 2 ,
                                n = 360 * 720 , signed = T))
results <- apply(file1, 1, function(x){ apply(file2, 1, function(X){cor(x, X)})}) 
```

`results`将是一个矩阵 (365 x 365)，例如 file1 的第 x 行（因此，dir1 中的第 x 文件）和 file2 的第 y 行（因此，dir2 中的第 y 文件）之间的相关系数) 是`results[x,y]`。然后，您可以直接使用 function 将其绘制为热图`image(results)`。

**编辑：**澄清代码的最后一行：它完全对应于以下`for`循环：

```
results <- array(dim = c(length(file1), length(file2)))
for(i in 1:length(file1)){
    for(j in 1:length(file2)){
        results[i,j]<-cor(file1[i, ], file2[j, ])
        }
    } 
```

**根据评论编辑：** @PaulHiemstra 比我快，但实际上我正要提出类似的建议：

```
dir1 <- list.files("C:\\cor", "*.bin", full.names = TRUE)
dir2 <- list.files("C:\\cor2", "*.bin", full.names = TRUE)
file_tot<-array(dim=c(360,720,365,2))
for(i in 1:length(dir1)){
    file_tot[,,i,1] <- readBin(dir1[i], integer(), size = 2 ,n = 360 * 720 , signed = T)
    file_tot[,,i,2] <- readBin(dir2[i], integer(), size = 2 ,n = 360 * 720 , signed = T)
    }
results<-apply(file_tot,c(1,2),function(x){cor(x[,1],x[,2])}) 
```

# wpf - 围绕缩放/平移窗口的 ScrollViewer

> ID：13680183
> 
> 赞同：0
> 
> 时间：2012-12-03T09:17:08.610
> 
> 标签：wpf, scrollviewer

`ScrollViewer`可以为给定元素自动添加水平/垂直滚动条。现在，我有一个包含在缩放/平移控件中的图像。我想将滚动条添加到包含此缩放控件的视图中。当图像完全可见时，滚动条应该是不可见的。当图像的 10% 可见时，滚动条拇指应占据滚动条的 1/10（标准行为）。

这里的问题是我希望`ScrollViewer`占据缩放控件的区域，并使用该控件*内*的图像调整其值。也许这可以使用某种绑定到缩放控件的孩子来完成？或者也许使用两个`ScrollBar`实例来代替？

```
Zoomed out
+----------------+
|                |
|   +-------+    |
|   | image |    |
|   +-------+    |
|                |
+----------------+

Zoomed in
+----------------+
|                |
|  image         sc <- adapting to visibleHeight/imageHeight
|                ro
|                ll
|                |
+---- scroll ----+  <- adapting to visibleWidth/imageWidth 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:30:23.747

叹。使用`ScrollViewer`. 我不得不`CanContentScroll`将`True`...

# apache - htaccess 问题导致内部服务器错误太多重定向

> ID：13680185
> 
> 赞同：1
> 
> 时间：2012-12-03T09:17:13.653
> 
> 标签：apache, .htaccess, codeigniter, mod-rewrite

所以我正在使用 .htaccess 在我的 codeigniter 应用程序中拥有干净的 URL。

简而言之，我正在尝试：

1) 删除 urls 中的 index.php（永久重定向）

```
http://localhost/directory/index.php*
to
http://localhost/directory/*

http://my.domain.com/index.php*
to
http://my.domain.com/* 
```

**2) 将某些**控制器的请求重写为index.php/[controller_name]

```
http://localhost/directory/controller1* 
to 
http://localhost/directory/index.php/controller1*

http://my.domain.com/controller2* 
to 
http://my.domain.com/index.php/controller2* 
```

我的 htaccess 文件目前是这样的：

```
Options +FollowSymlinks

RewriteEngine On
#RewriteBase /

# Redirect index.php 
RewriteCond %{THE_REQUEST} ^GET.*index\.php [NC]
RewriteCond %{THE_REQUEST} !/system/.*
RewriteRule ^(.*)index\.php((/)(.*))?$ /$1/$4 [R=301,L] 
```

**第一个问题**：

这不适用于`http://localhost/dir/index.php/controller1`. 而是重定向到`http://localhost/dir/controller1`，它重定向到`http://localhost//controller1`（`$1`返回空字符串？）

```
# Rewrite CI certain controllers
RewriteCond %{THE_REQUEST} directory/(home|other_controller) [NC]
RewriteRule ^(.*)(home|other_controller)(.*)$ /$1index.php/$2$3 [NC,L] 
```

**第二个问题**：

这不适用于`http://localhost/dir/home`给出内部服务器错误（重定向太多）。但如果我测试添加`R=301`的代码，它会成功重定向到`http://localhost/dir/index.php/home`. 但这不是我要重定向的意图，我只需要重写它。

请指教.. ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:24:21.753

试试这个：

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ index.php/$1 [L] 
```

您可以将它放在引导文件 (index.php) 所在的目录中。

如果你有 FastCGI 实现，你需要在重写规则中添加一个问号：

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

# javascript - 检测任何网站上 youtube 视频的播放状态

> ID：13680188
> 
> 赞同：3
> 
> 时间：2012-12-03T09:17:17.030
> 
> 标签：javascript, google-chrome-extension, youtube, youtube-api

我想编写一个网络扩展程序，能够检测用户访问的**任何**youtube 视频的播放状态。我查看了 youtube API，但似乎我只能访问我自己嵌入的 youtube 视频。但是在这种情况下，我没有嵌入它们。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T07:12:35.737

自从有人问到这个问题后，我就对这个问题很感兴趣，今晚在我们当地的 GDG 上，我们举办了一个 Chrome 扩展程序黑客马拉松，在那里我进行了一些实验进行测试。这是我发现的。

A) 扩展沙箱真的很难；我尝试过的任何东西都无法获取编码到页面中的javascript（如果存在的话）。

B）在某些情况下效果很好的一种解决方案是使用内容脚本进行代码注入，并在现有的 iframe 嵌入上设置您自己的侦听器。像这样的工作：

```
var regex = /https?:\/\/(?:[0-9A-Z-]+\.)?(?:youtu\.be\/|youtube\.com\S*[^\w\-\s])([\w\-]{11})(?=[^\w\-]|$)(?![?=&+%\w]*(?:['"][^<>]*>|<\/a>))[?=&+%\w]*/ig;
var node, nodes = document.evaluate("(//iframe/@src)",document,null,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null);
var hasvid=false,vids = [];

while (node=nodes.iterateNext()) { // uses regex to run through DOM, looking for embeds
    if (regex.test(node.nodeValue)) {
       hasvid=true;
       vids.push(node.ownerElement);
    }
}
// Now inject a script that sets up a YT.player object and bind it to our extension's functions
if (hasvid) {
   playerlines=['function onYouTubePlayerAPIReady() {'];
   for (i=0;i<vids.length; i++) {
      playerlines.push('player = new YT.Player(\''+vids[i].id+'\', { events: {\'onStateChange\': onPlayerStateChange}});}');
    }
  callbacklines=['function onPlayerStateChange(event) {',
         'if (event.data == YT.PlayerState.ENDED) { alert(\'video is over\'); }',
         'else if (event.data == YT.PlayerState.PAUSED) { alert(\'player is paused\'); }',
         'else if (event.data == YT.PlayerState.PLAYING) { alert(\'player is playing\'); } }'];
  //  notify the background page to actually do the injecting of the script
  chrome.extension.sendRequest({}, function(response) {});
  codelines=playerlines.concat(callbacklines);
  var actualCode=codelines.join('\n');
  var script = document.createElement('script');
  script.textContent = actualCode;
  var jsapi = document.createElement('script');
  jsapi.src = "http://www.youtube.com/player_api";
  (document.head||document.documentElement).appendChild(jsapi);
  (document.head||document.documentElement).appendChild(script); 
```

有了这样的东西，您不仅可以运行警报，而且理论上可以将所有事件发送回您的后台页面，以便它可以根据事件的内容做它想做的事情。

C) 如果视频没有嵌入 iFrame，这是没有用的；当它是 or 元素时，我尝试使用类似的解决方案，虽然我可以很好地检测到它，但我无法设置侦听器来捕获事件。我可能忽略了某些东西，或者事件的触发方式不同，所以我无法获得所需的绑定。

D）一个不太有用的解决方法是操纵 DOM 并删除嵌入的视频，通过更直接的绑定和设置的侦听器自己重新嵌入（正如另一个答案所建议的那样）。但是，如果原始页面一直在使用 API 本身，则此类操作会破坏其侦听器，因此如果您看到的视频是基于 API 的 Web 应用程序的一部分，则可能会产生意想不到的后果。

希望这是有用的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T17:38:55.490

好吧，所以自己嵌入视频！您可以使用内容脚本在加载之前修改 youtube 框架，甚至更好...我不确定 youtube api 是如何工作的，但您可以使用[Chrome 的 Web 请求 API](http://developer.chrome.com/extensions/webRequest.html)拦截视频请求并更改请求数据以获取你想要什么。

如果您提供更多信息，我可以为您提供有关如何执行此操作的更多详细信息...

祝你好运！

# ajax - 动态ajax导航

> ID：13680192
> 
> 赞同：2
> 
> 时间：2012-12-03T09:17:45.340
> 
> 标签：ajax, jsf, jsf-2, navigation, uiinclude

假设我想在我的应用程序中导航，并动态包含不同的 facelet 页面。我有一个这样的commandLink：

```
<h:commandLink value="Link" action="#{navigation.goTo('someTest')}">
    <f:ajax render=":content" />
</h:commandLink> 
```

这就是我包含 facelet 的地方：

```
<h:form id="content">
    <ui:include src="#{navigation.includePath}" />
</h:form> 
```

导航类：

```
public class Navigation {
    private String viewName;

    public void goTo(String viewName) {
        this.viewName = viewName;
    }

    public String getIncludePath() {
        return resolvePath(viewName);
    }
} 
```

我见过类似的例子，但这当然行不通。与`ui:include`标记处理程序一样，包含发生在我的导航侦听器被调用之前很久。包括旧的 facelet，而不是新的。到目前为止，我明白了。

现在到头疼的部分：如何基于 actionListener 动态包含 facelet？我试图将 facelet 包含在 preRender 事件中，并在 RENDER_RESPONSE 之前包含一个 phaseListener。两者都有效，但是在事件侦听器中，我不能包含包含其他 preRender 事件的 facelet，并且在 phaseListener 中，在包含的 facelet 中单击一些后，我会得到重复的 Id。但是，检查组件树告诉我，根本没有重复的组件。也许这两个想法一点都不好..

我需要一个解决方案，其中带有 的页面`ui:include`或包含 facelet 的 Java 类不必知道将包含的页面，也不必知道确切的路径。以前有人解决过这个问题吗？我该怎么做？

* * *

我正在使用 JSF 2.1 和 Mojarra 2.1.15

* * *

重现问题所需的只是这个 bean：

```
@Named
public class Some implements Serializable {
    private static final long serialVersionUID = 1L;
    private final List<String> values = new ArrayList<String>();

    public Some() {
        values.add("test");
    }

    public void setInclude(String include) {
    }
    public List<String> getValues() {
        return values;
    }
} 
```

这在您的索引文件中：

```
<h:head>
    <h:outputScript library="javax.faces" name="jsf.js" />
</h:head>

<h:body>
    <h:form id="topform">
        <h:panelGroup id="container">
            <my:include src="/test.xhtml" />
        </h:panelGroup>
    </h:form>
</h:body> 
```

这在 text.xhtml 中

```
<ui:repeat value="#{some.values}" var="val">
    <h:commandLink value="#{val}" action="#{some.setInclude(val)}">
        <f:ajax render=":topform:container" />
    </h:commandLink>
</ui:repeat> 
```

这足以产生这样的错误：

```
javax.faces.FacesException: Cannot add the same component twice: topform:j_id-549384541_7e08d92c 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:55:48.393

对于[OmniFaces](http://omnifaces.org)，我也曾经通过创建`<o:include>`as[`UIComponent`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html)而不是在方法[`TagHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/TagHandler.html)中执行 a[`FaceletContext#includeFacelet()`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/FaceletContext.html#includeFacelet%28javax.faces.component.UIComponent,%20java.lang.String%29)的[`encodeChildren()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#encodeChildren%28javax.faces.context.FacesContext%29)方法来尝试过这一点。这样，在恢复视图阶段会记住正确包含的 facelet，并且包含的​​组件树仅在渲染响应阶段发生变化，这正是我们想要实现的构造。

这是一个基本的启动示例：

```
@FacesComponent("com.example.Include")
public class Include extends UIComponentBase {

    @Override
    public String getFamily() {
        return "com.example.Include";
    }

    @Override
    public boolean getRendersChildren() {
        return true;
    }

    @Override
    public void encodeChildren(FacesContext context) throws IOException {
        getChildren().clear();
        ((FaceletContext) context.getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY)).includeFacelet(this, getSrc());
        super.encodeChildren(context);
    }

    public String getSrc() {
        return (String) getStateHelper().eval("src");
    }

    public void setSrc(String src) {
        getStateHelper().put("src", src);
    }

} 
```

其中注册`.taglib.xml`如下：

```
<tag>
    <tag-name>include</tag-name>
    <component>
        <component-type>com.example.Include</component-type>
    </component>
    <attribute>
        <name>src</name>
        <required>true</required>
        <type>java.lang.String</type>
    </attribute>
</tag> 
```

这适用于以下视图：

```
<h:outputScript name="fixViewState.js" />

<h:form>
    <ui:repeat value="#{includeBean.includes}" var="include">
        <h:commandButton value="Include #{include}" action="#{includeBean.setInclude(include)}">
            <f:ajax render=":include" />
        </h:commandButton>
    </ui:repeat>
</h:form>

<h:panelGroup id="include">
    <my:include src="#{includeBean.include}.xhtml" />
</h:panelGroup> 
```

以及以下支持 bean：

```
@ManagedBean
@ViewScoped
public class IncludeBean implements Serializable {

    private List<String> includes = Arrays.asList("include1", "include2", "include3");
    private String include = includes.get(0);

    private List<String> getIncludes() {
        return includes;
    }

    public void setInclude(String include) {
        return this.include = include;
    }

    public String getInclude() { 
        return include;
    }

} 
```

*（此示例需要包含文件`include1.xhtml`，`include2.xhtml`并且`include3.xhtml`与主文件位于同一基本文件夹中）*

`fixViewState.js`可以在此答案中找到：h [:commandButton/h:commandLink 在第一次单击时不起作用，仅在第二次单击时起作用](https://stackoverflow.com/questions/11408130/jsf-commandbutton-works-on-second-click/11412138#11412138)。此脚本是强制性的，以修复[JSF 问题 790](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-790)，即当有多个 ajax 表单更新彼此的父级时，视图状态会丢失。

另请注意，这样每个包含文件都可以`<h:form>`在必要时拥有自己的文件，因此您不一定需要将其放在包含文件周围。

这种方法在 Mojarra 中运行良好，即使回发请求来自包含内的表单，但是它在 MyFaces 中很难失败，在初始请求期间已经出现以下异常：

```
java.lang.NullPointerException
    at org.apache.myfaces.view.facelets.impl.FaceletCompositionContextImpl.generateUniqueId(FaceletCompositionContextImpl.java:910)
    at org.apache.myfaces.view.facelets.impl.DefaultFaceletContext.generateUniqueId(DefaultFaceletContext.java:321)
    at org.apache.myfaces.view.facelets.compiler.UIInstructionHandler.apply(UIInstructionHandler.java:87)
    at javax.faces.view.facelets.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:49)
    at org.apache.myfaces.view.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:158)
    at org.apache.myfaces.view.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:57)
    at org.apache.myfaces.view.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:48)
    at org.apache.myfaces.view.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:394)
    at org.apache.myfaces.view.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:448)
    at org.apache.myfaces.view.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:426)
    at org.apache.myfaces.view.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:244)
    at com.example.Include.encodeChildren(Include.java:54) 
```

MyFaces 基本上在视图构建结束时释放 Facelet 上下文，使其在视图渲染期间不可用，从而导致 NPE，因为内部状态有几个无效的属性。但是，可以在渲染期间添加单个组件而不是 Facelet 文件。我真的没有时间调查这是我的错还是 MyFaces 的错。这也是为什么它还没有出现在 OmniFaces 中的原因。

如果您仍然在使用 Mojarra，请随意使用它。但是，我强烈建议在同一页面上对所有可能的用例进行彻底测试。Mojarra 有一些与状态保存相关的怪癖，在使用此构造时*可能会失败。*

# php - 如何在 Symfony2 中检索子表单（FormType）中的错误数

> ID：13680193
> 
> 赞同：0
> 
> 时间：2012-12-03T09:17:45.190
> 
> 标签：php, symfony, symfony-2.1

我的 UserBundle 中有一个 ProfileType 表单（从 SonataUserBundle 扩展），在 ProfileType 表单中我添加了一个子表单类型（AddressType（））。

**配置文件类型**

```
 /**
    * {@inheritdoc}
    */
   public function buildForm(FormBuilderInterface $builder, array $options)
   {
    $builder
        ->add('gender')
        ->add('firstname')
        ->add('lastname')
        ->add('middlename')
        ->add('dateOfBirth', 'birthday', array('required' => false))
        ->add('phone')
        ->add('address', new AddressType(), array('required' => false));
    ;
   }

  /**
   * {@inheritdoc}
   */
   public function setDefaultOptions(OptionsResolverInterface $resolver)
   {
       $resolver->setDefaults(array(
           'data_class' => $this->class,
           'validation_groups' => array('Profile', 'Address'),
           'cascade_validation' => true,
       ));
   } 
```

**地址类型**

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('postalcode')
        ->add('houseNumber')
        ->add('houseNumberAddition')
        ->add('street')
        ->add('city')
        ->add('country')
    ;
} 
```

在**edit_profile_html.twig 中，我想知道****AddressType**中是否有任何错误。但是 form.address.vars.errors 不会返回 AddressType 中无效元素的数量。如果我专门检查 AddressType 中某个元素的错误，它**确实会**返回正确的计数。

所以：form.address.vars.errors.length 为 0，但 form.address.postalcode.var.errors.length 有效。但我不想一一检查所有元素。

```
 <fieldset {% if form.address.vars.errors|length>0 %} class="warning" {% endif %} >
            <legend>{% trans %}vg.userbundle.form.address.legend{% endtrans %}</legend>
            {{ form_rest(form.address) }}
        </fieldset> 
```

**edit_profile_html.twig**

```
{% block subtitle %}{{ "title_user_account" | trans({}, 'SonataUserBundle') }} - {{      "title_user_edit_profile" | trans({}, 'SonataUserBundle') }}{% endblock %}
{% block content %}
  {% block fos_user_content %}
    <form novalidate action="{{ path('sonata_user_profile_edit') }}" method="POST">
        <fieldset {% if form.vars.errors|length>0 %} class="warning" {% endif %} >
            <legend>{% trans %}vg.userbundle.form.profile.legend{% endtrans %}</legend>
            {{ form_row(form.gender) }}
            {{ form_row(form.firstname) }}
            {{ form_row(form.lastname) }}
            {{ form_row(form.middlename) }}
            {{ form_row(form.dateOfBirth) }}
            {{ form_row(form.phone) }}
        </fieldset>

        <fieldset {% if form.address.vars.errors|length>0 %} class="warning" {% endif %} >
            <legend>{% trans %}vg.userbundle.form.address.legend{% endtrans %}</legend>
            {{ form_rest(form.address) }}
        </fieldset>
        <fieldset class="submit">
            <ul>
                <li><input type="submit" name="submit"
                           value="{{ 'sonata_user_submit'|trans({}, 'SonataUserBundle') }}"/></li>
            </ul>
        </fieldset>
    </form>

  {% endblock %}
{% endblock content %} 
```

那么检索“嵌入式”FormType 的无效元素数量的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T21:47:57.770

您可以使用“有效”变量（我猜这是您想要做的）检查表单及其所有元素是否有效（=没有错误）：

```
<fieldset {% if not form.address.vars.valid %} class="warning" {% endif %} > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T21:38:32.380

我想没有办法遍历对象地址并计算子项的错误。

```
{% for child in address %}
        {{ ...count errors... }}
{% endfor %} 
```

请注意，每个表单项都是一个对象，这意味着“地址”的每个子项也是一个对象。

# google-apps-script - 嵌入到 Google 站点中时，Google Apps 脚本小工具 URL 参数会被忽略

> ID：13680195
> 
> 赞同：2
> 
> 时间：2012-12-03T09:18:09.863
> 
> 标签：google-apps-script, google-sites

我正在尝试在 Google 站点中嵌入带有 URL 参数的 Apps 脚本小工具，但呈现的小工具会忽略 URL 参数。它只能检索 Google-site-url 参数。请[在此处查看](https://sites.google.com/site/appsdatepicker/home)。

小工具的 Apps 脚本代码是

```
function doGet(e){
  var app = UiApp.createApplication();

  if(e.parameter.page == 'hello') app.add(helloPanel_());
  else app.add(hiPanel_());

  return app;
}

function helloPanel_(){
  var app = UiApp.getActiveApplication();
  return app.createLabel('You are at hello panel');
}

function hiPanel_(){
  var app = UiApp.getActiveApplication();
  return app.createLabel('You are at hi panel');
} 
```

在使用新结构重新命名 Google Apps 脚本小工具 URL 之前，这种方法过去一直有效。

我想知道这是预期功能还是错误？如果有错误，我会报告它问题跟踪器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T19:38:14.870

从应用程序脚本 URL 本身传递参数的解决方法（嵌入 Google 站点）

更改 URL 使其看起来像这样： [https ://sites.google.com/macros/exec?service=Th3Fr3ak1nGL0NgIDg00g1eCr3aT3s¶m=1](https://sites.google.com/macros/exec?service=Th3Fr3ak1nGL0NgIDg00g1eCr3aT3s&param=1)

[问题跟踪器](https://code.google.com/p/google-apps-script-issues/issues/detail?can=2&start=0&num=100&q=&colspec=Stars%20Opened%20ID%20Type%20Status%20Summary%20Component%20Owner&groupby=&sort=&id=2148)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:41:52.047

我能够重现这一点 - 当您嵌入小工具时，站点编辑器似乎会删除整个查询字符串。所以这在网站编辑期间被打破，而不是网站渲染本身。

您知道这种行为何时改变吗？

请在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)中报告信息。

# android - 接收器中的多个活动

> ID：13680208
> 
> 赞同：0
> 
> 时间：2012-12-03T09:19:11.983
> 
> 标签：android

我想在 BroadcastReacevier 中运行多个活动。但它不起作用，只有两个活动正在开始。SMSRxDialog 每次都被调用，但 SaveMessages 和 ShowMessages 没有被调用。他们中的任何一个同时开始。其次是所谓的。如果我启动 SaveMessage 然后 showMessage 然后 sahow 消息开始但没有开始保存消息。或反之亦然。在开始另一个活动之前是否需要停止第一个活动。

提前致谢。

以下是代码：

```
package screenmagic.myfirstapp;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

public class MQTTMessageReceiver extends BroadcastReceiver  
{  
private static final String TAG = "MQTTMessageReceiver";
@Override   
public void onReceive(Context context, Intent intent)  
{  
    Bundle notificationData = intent.getExtras();  
    String newTopic = notificationData.getString(MQTTService.MQTT_MSG_RECEIVED_TOPIC);  
    String newData  = notificationData.getString(MQTTService.MQTT_MSG_RECEIVED_MSG);              
    Log.v("REG", "new Topic :" + newTopic);
    Log.v("REG", "new Data: "+ newData);

    Intent chatIntent = new Intent();
    chatIntent.setClass(context, SaveMessages.class);
    context.startActivity(chatIntent);  

    Intent di = new Intent();
    di.setClass(context, SMSRxDialog.class);
    di.putExtra(SMSRxDialog.SMS_FROM_ADDRESS_EXTRA, "MQTT");
    di.putExtra(SMSRxDialog.SMS_FROM_DISPLAY_NAME_EXTRA, newTopic);
    di.putExtra(SMSRxDialog.SMS_MESSAGE_EXTRA, newData);
    di.putExtra(SMSRxDialog.DIALOG_TITLE, "Chat Received");
    context.startActivity(di);  

    Intent msgIntent = new Intent();
    msgIntent.setClass(context, ShowMessages.class);
    context.startActivity(msgIntent);   

    }

} 
```

我在这里调用了三个活动，它们是：

```
package screenmagic.myfirstapp;

import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class ShowMessages extends Activity {
 DatabaseHandler db;
 private static final String TAG = "ShowMessages";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   db = new DatabaseHandler(this);
   Log.i("REGISTER", " Calling showChatMessages");
   showChatMessages();

}

public void showChatMessages(){
      Log.i(TAG, "Message recieved:  showChatMessages" );
        Log.d(TAG, "Getting data from database ..");
        Log.d("Reading: ", "Reading all contacts..");

      List<Messages> message = db.getAllMessages();       

        for (Messages msg : message) {
            String log = "Id: "+msg.getID()+"Topic: "+msg.getTopic()+" ,From Host: " + msg.getFrom() + " ,Message: " + msg.getMessage();
                // Writing Contacts to log
        Log.d("Record: ", log);
        Log.d(TAG, "Data retrieved from database ..");
        }

}
} 
```

另一个是：

```
package screenmagic.myfirstapp;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class SaveMessages extends Activity {
 DatabaseHandler db;
 private static final String TAG = "SaveMessages";

 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.i(TAG, " Creating  DatabaseHandler object");
    db = new DatabaseHandler(this);
    Log.i(TAG, "Created  DatabaseHandler object");
    saveChatMessage();

}

public void saveChatMessage(){
      Log.i(TAG, "Message recieved:  saveChatMessage" );
      Log.d("Insert: ", "Inserting ..");
      db.addMessage(new Messages(18,"txtbox.in123", "asmita","test MQTT message from Asmita"));
      Log.d("Insert: ", "Data inserted ..");

}
} 
```

第三次活动 ::

```
package screenmagic.myfirstapp;
import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.os.Bundle;
import android.speech.tts.TextToSpeech.OnInitListener;
//import android.speech.tts.TextToSpeech;
//import android.speech.tts.TextToSpeech.OnInitListener;

public class SMSRxDialog extends Activity implements OnInitListener {
 private static final String TAG = "SmsReceivedDialog";

    private static final int DIALOG_SHOW_MESSAGE = 1;

    public static final String SMS_FROM_ADDRESS_EXTRA = "com.example.android.apis.os.SMS_FROM_ADDRESS";
    public static final String SMS_FROM_DISPLAY_NAME_EXTRA = "com.example.android.apis.os.SMS_FROM_DISPLAY_NAME";
    public static final String SMS_MESSAGE_EXTRA = "com.example.android.apis.os.SMS_MESSAGE";
    public static final String DIALOG_TITLE = "screenmagic.myfirstapp.DIALOG_TITLE";

   // private TextToSpeech mTts;

    private String mFromDisplayName;
    private String mFromAddress;
    private String mMessage;
    private String mFullBodyString;
    private String mDialogTitle;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mDialogTitle = getIntent().getExtras().getString(DIALOG_TITLE);

        mFromAddress = getIntent().getExtras().getString(SMS_FROM_ADDRESS_EXTRA);
        mFromDisplayName = getIntent().getExtras().getString(SMS_FROM_DISPLAY_NAME_EXTRA);
        mMessage = getIntent().getExtras().getString(SMS_MESSAGE_EXTRA);

         mFullBodyString = String.format(
                getResources().getString(R.string.sms_speak_string_format),
                mFromDisplayName,
                mMessage);

        extracted();
        //mTts = new TextToSpeech(this, this);

    }

    private void extracted() {
        showDialog(DIALOG_SHOW_MESSAGE);
    }

    public void onInit(int status) {
    /*if (status == TextToSpeech.SUCCESS) {
            int result = mTts.setLanguage(Locale.US);
            if (result == TextToSpeech.LANG_MISSING_DATA
                    || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                Log.e(TAG, "TTS language is not available.");
            } else {
                mTts.speak(mFullBodyString, TextToSpeech.QUEUE_ADD, null);
            }
        } else {
            // Initialization failed.
            Log.e(TAG, "Could not initialize TTS.");
        }

        */
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DIALOG_SHOW_MESSAGE:
            return new AlertDialog.Builder(this)
                    .setIcon(android.R.drawable.ic_dialog_email)
                    .setTitle(mDialogTitle)
                    .setMessage(mFullBodyString)
                    .setNegativeButton(R.string.dismiss, new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            dialog.dismiss();
                            finish();
                        }
                    })
                    .setOnCancelListener(new DialogInterface.OnCancelListener() {
                        public void onCancel(DialogInterface dialog) {
                            finish();
                        }
                    }).create();
        }
        return null;
    }

} 
```

数据库代码是::

```
package screenmagic.myfirstapp;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DatabaseHandler extends SQLiteOpenHelper {

// All Static variables
// Database Version
private static final int DATABASE_VERSION = 1;

// Database Name
private static final String DATABASE_NAME = "SMSMAGIC2";

// Contacts table name
private static final String TABLE_NAME = "chatmessages";

// Contacts Table Columns names
private static final String KEY_ID = "id";
private static final String KEY_FROM = "fromHost";
private static final String KEY_TOPIC = "topic";
private static final String KEY_MESSAGE = "message";

public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

// Creating Tables
@Override
public void onCreate(SQLiteDatabase db) {

String CREATE_CONTACTS_TABLE = "CREATE TABLE " + TABLE_NAME + "("
            + KEY_ID + " INTEGER PRIMARY KEY," + KEY_FROM + " TEXT,"
            + KEY_TOPIC + " TEXT," +  KEY_MESSAGE + " TEXT )";
    Log.d("Insert: ", "Table create query:: "+CREATE_CONTACTS_TABLE);

    db.execSQL(CREATE_CONTACTS_TABLE);
    Log.d("Insert: ", "Table created ..");

}

// Upgrading database
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Drop older table if existed
    Log.d("Upgrade: ", "Called onUpgrade function"+TABLE_NAME);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);

    Log.d("Insert: ", "Dropped Table created .."+TABLE_NAME);
    onCreate(db);
}

/**
 * All CRUD(Create, Read, Update, Delete) Operations
 */

// Adding new contact
void addMessage(Messages message) {

    Log.d("Insert: ", "addMessage function  ..");

    ContentValues values = new ContentValues();

    values.put(KEY_MESSAGE, message.getMessage()); // message 
    values.put(KEY_TOPIC, message.getTopic()); // topic Name
    values.put(KEY_FROM, message.getFrom()); // from
    values.put(KEY_ID, message.getID()); //Id 

    Log.d("Insert: ", "Message :"+ message.getMessage());
    Log.d("Insert: ", "topic :"+ message.getTopic());
    Log.d("Insert: ", "from :"+ message.getFrom());
    Log.d("Insert: ", "id :"+ message.getID());

    Log.d("Insert: ", "values added to ContentValues.");
    SQLiteDatabase db = this.getWritableDatabase();
    Log.i("Insert: ", "Object Created from SQLiteDatabase.");

    try {
            db.insert(TABLE_NAME, null, values);
            Log.d("Insert: ", "Inserted Row..");
            db.close();
            Log.d("Insert: ", "Closing database connection.");
      } catch (Exception e) {
//           /   Toast.makeText(this, "misfunctioning open" + e.toString(),Toast.LENGTH_LONG).show();
            Log.d("Insert: ", "Exception Row.."+e.getMessage());

        }

}

// Getting All Contacts
public List<Messages> getAllMessages() {
    List<Messages> msgList = new ArrayList<Messages>();

    String selectQuery = "SELECT  * FROM " + TABLE_NAME;
    Log.d("Query :: ", "selectQuery ::"+selectQuery);
    SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to list
    if (cursor.moveToFirst()) {
        do {
            Messages message = new Messages();
            message.setID(Integer.parseInt(cursor.getString(0)));
            message.setTopic(cursor.getString(1));
            message.setFrom(cursor.getString(2));
            message.setMessage(cursor.getString(3));
            msgList.add(message);
        } while (cursor.moveToNext());
    }
    return msgList;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:44:18.437

从接收者那里开始 3 项活动没有意义，因为您不知道行为会是什么。

总是做 A -> B -> C -> D 而不是直接做 A-> B,C,D

where A is your Reciever and B,C,D are your activities

# tabcontrol - 为什么在 WPF 2010 中没有显示 TabControl 及其效果？

> ID：13680210
> 
> 赞同：0
> 
> 时间：2012-12-03T09:19:18.317
> 
> 标签：tabcontrol

为什么 TabControl 不显示其效果？您是否见过打开窗口时 TabControl 是如何显示的？它就像一张纸莎草纸。它适用于我的所有形式，但是，它现在确实可以正常工作。如何使 TabControl 正常工作？

```
<TabControl  Height=»420» HorizontalAlignment=”Left” Margin=”0,43,0,0”    Name=”TabControl1” VerticalAlignment=”Top” Width=”553” Grid.ColumnSpan=”2”&gt;
<TabItem Header=”Students” Name=”tabItem1”/>
</TabControl> 
```

它是一个窗口的代码：

```
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"

    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"

    Title="MainWindow" Height="350" Width="525" WindowStartupLocation=”CenterScreen”&gt; 
```

怎么做？

# git - 从 Git 存储中查找并提取文件

> ID：13680212
> 
> 赞同：16
> 
> 时间：2012-12-03T09:19:21.123
> 
> 标签：git

也许我使用 git stash 太频繁了，但是当我想扔掉我在项目中的实验时，我通常会这样做。

问题一：

*   我如何在我当前的所有存储中搜索文件名？

问题2：

*   如何将此文件提取到单独的文件夹中？

*   或其他选项：如何为该隐藏文件启动视觉差异工具？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-03T22:26:03.150

更重要的是要认识到这`refs/stash`是一个伪分支（ref）的reflog：

```
git rev-list --walk-reflogs stash # (long option)
git rev-list -g stash # (short option) 
```

所以你可以找到文件：

```
for sha in $(git rev-list -g stash); 
do 
     git ls-tree -r $sha:; 
done |
   grep "$SOMEFILENAME" | 
   sort --unique 
```

（唯一的排序是删除不同存储中相同版本的重复项）。

例如：

```
$ for sha in $(git rev-list -g stash); do git ls-tree -r $sha:; done | grep numeric.js | sort -u
100644 blob f1c9a61910ae1bbd562615444a45688b93e9d808    LSPO.Web/DaVinci/JScript/numeric.js 
```

因此，您可以使用例如启动视觉差异

```
kompare numeric.js <(git cat-file -p f1c9a61910ae1bbd562615444a45688b93e9d808) 
```

当然，如果您已经预感到哪个 reflog 包含不同的文件，这会容易得多：

```
git diff stash@{3} -- numeric.js 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-23T21:53:28.727

@sehe 的回答为问题 2 提供了很好的答案。

我来到这个页面是为了寻找比我目前使用的更好的问题 1 答案。我目前使用的是一个 shell 脚本`stashshowall.sh`，然后我 grep 输出。

我的答案的不同之处在于，虽然这里的其他答案会告诉您您要查找的文件是否已更改，但它们不会告诉您文件在哪个存储区，以防您想要存储该文件`apply`。

我的回答纯粹是使用“瓷器”git 命令，但它对我有用。

```
#!/bin/sh
#  stashshowall.sh
for stash in `git stash list | sed 's/\(\w*\)\:.*/\1/'`
do
    echo
    echo "$stash"
    git stash show $stash
done 
```

所以要回答问题 1，我运行

```
> stashshowall.sh | grep "stash\|some-file" 
```

这给了我

```
stash@{0}
stash@{1}
 .../some-dir/some-file     | 16 ++--
stash@{2}
stash@{3}
stash@{4}
 .../some-dir/some-file     | 2 ++--
stash@{5} 
```

这样我就知道我需要`apply`或进一步查看`stash{1}`或`stash{4}`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-24T02:03:20.200

**tl;博士**

grep stash 获取文件名：

```
git reflog stash -- '*fileglob*'
git log -g stash -- '*fileglob*' 
```

grep stash 内容：

```
git stash list -G<regex> 
```

* * *

## 搜索文件名的存储条目

从[git help stash](https://git-scm.com/docs/git-stash)：

> 您创建的最新存储存储在`refs/stash`; 较旧的存储可在此参考的 reflog 中找到，并且可以使用通常的 reflog 语法命名（例如`stash@{0}`...）

从[git help reflog](https://git-scm.com/docs/git-reflog)：

> `git reflog show`是一个别名`git log -g --abbrev-commit --pretty=oneline`

从[git 帮助日志](https://git-scm.com/docs/git-log#git-log--g)：

> **-g**
> **--walk-reflogs**
> 不是遍历提交祖先链，而是将 reflog 条目从最近的条目遍历到较旧的条目。

[git日志简介](https://git-scm.com/docs/git-log)：

```
git log [<options>] [<revision range>] [[\--] <path>...] 
```

从[git 修订规范](https://git-scm.com/docs/gitrevisions#gitrevisions-emltrefnamegtemegemmasterememheadsmasterememrefsheadsmasterem)：

> **`<refname>`，例如 master、heads/master、refs/heads/master**
> 一个符号 ref 名称。...
> 当模棱两可时， a`<refname>`通过采用以下规则中的第一个匹配来消除歧义：
> 
> 1.  如果`$GIT_DIR/<refname>`存在，这就是你的意思（这通常只对`HEAD`, `FETCH_HEAD`, `ORIG_HEAD`,`MERGE_HEAD`和有用`CHERRY_PICK_HEAD`）；
>     
>     
> 2.  否则，`refs/<refname>`如果存在；

现在我们把所有东西都放在一起了：

```
git reflog stash -- '*fileglob*'
git log -g stash -- '*fileglob*' 
```

所以我们`stash`将解析为`refs/stash`,`-g`并将导致整个分支被遍历，并且 `-- ' *fileglob* ' 将匹配该提交中的任何路径。

## 搜索存储内容

[git帮助藏匿](https://git-scm.com/docs/git-stash#git-stash-listltoptionsgt)：

> ...该命令采用适用于*git log*命令的选项来控制显示的内容和方式。请参阅[git-log](https://git-scm.com/docs/git-log)。

从[git 帮助日志](https://git-scm.com/docs/git-log#git-log--Gltregexgt)：

> **-G`<regex>`**
> 查找补丁文本包含匹配的添加/删除行的差异`<regex>`。

所以简单的命令是：

```
git stash list -G<regex> 
```

其他镐命令也应该工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-03T15:27:31.453

我用它在 stashes 中搜索文件

`git stash list | cut -d ":" -f 1 | xargs -L1 git diff --stat | grep <filename>`

您可以创建一个包含存储 ( `git checkout -b <new_branch> <stash>`) 的新分支，然后将文件复制到任何地方，然后将其合并回来。

您可以使用`git difftool`来查看您的差异。

编辑：要获得存储的提交以及文件名，您可以使用此 shell 脚本：

```
for i in $(git stash list | cut -d ":" -f 1 | xargs -L1 git show | grep commit |
  cut -d" " -f 2)
do
  if git show $i --oneline --stat | grep ht.h 
  then
    echo $i
  fi
done 
```

它将在文件名下打印提交。

# web-services - 从 adobe 进程调用 Webservice

> ID：13680214
> 
> 赞同：0
> 
> 时间：2012-12-03T09:19:25.337
> 
> 标签：web-services, adobe, livecycle, livecycle-designer

我正在从 adobe 进程调用 Webservice。我的 wsdl 包含将 Document 作为输入的 web 方法“storeDocument”。

```
<xs:element name="storeDocument">
<xs:complexType>
<xs:sequence>
<xs:element xmlns:java="java:org.w3c.dom" name="req" type="java:Document"/>
</xs:sequence>
</xs:complexType>
</xs:element>
<xs:element name="storeDocumentResponse">
<xs:complexType>
<xs:sequence>
<xs:element name="return" type="xs:string"/>
</xs:sequence>
</xs:complexType>
</xs:element> 
```

但是当我在网络服务设置中生成请求时。表明

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:res="http://resourceusage.resource.domain.services.nyss.ktv.tdc.com" xmlns:java="java:org.w3c.dom">
   <soapenv:Header/>
   <soapenv:Body>
      <res:storeDocument>
         <res:req>
            <java:XmlStandalone>?</java:XmlStandalone>
            <java:XmlVersion>?</java:XmlVersion>
            <java:StrictErrorChecking>?</java:StrictErrorChecking>
            <java:DocumentURI>?</java:DocumentURI>
         </res:req>
      </res:storeDocument>
   </soapenv:Body>
</soapenv:Envelope> 
```

我不知道如何调用这个服务，我试着给

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:res="http://resourceusage.resource.domain.services.nyss.ktv.tdc.com" xmlns:java="java:org.w3c.dom">
   <soapenv:Header/>
   <soapenv:Body>
      <res:storeDocument>
         <res:req>
            <java:StrictErrorChecking>false</java:StrictErrorChecking>
            <java:DocumentURI>{$ /process_data/@outputForm $}</java:DocumentURI>
         </res:req>
      </res:storeDocument>
   </soapenv:Body>
</soapenv:Envelope> 
```

但它不工作
它给了我错误

```
 <bea_fault:stacktrace xmlns:bea_fault="http://www.bea.com/servers/wls70/webservice/fault/1.0.0">com.bea.xml.XmlRuntimeException: java.lang.InstantiationException: org.w3c.dom.Document

    at com.bea.staxb.runtime.internal.ClassLoadingUtils.newInstance(ClassLoadingUtils.java:137)

    at com.bea.staxb.runtime.internal.ByNameRuntimeBindingType.createIntermediary(ByNameRuntimeBindingType.java:207)

    at com.bea.staxb.runtime.internal.AttributeUnmarshaller.unmarshal(AttributeUnmarshaller.java:36)

    at com.bea.staxb.runtime.internal.UnmarshalResult.unmarshalBindingType(UnmarshalResult.java:174)

    at com.bea.staxb.runtime.internal.UnmarshalResult.unmarshalType(UnmarshalResult.java:212)

    at com.bea.staxb.runtime.internal.UnmarshallerImpl.unmarshalType(UnmarshallerImpl.java:127)

    at weblogic.wsee.bind.runtime.internal.LiteralDeserializerContext.unmarshalType(LiteralDeserializerContext.java:70)

    at weblogic.wsee.bind.runtime.internal.BaseDeserializerContext.internalDeserializeType(BaseDeserializerContext.java:170)

    at weblogic.wsee.bind.runtime.internal.BaseDeserializerContext.deserializeType(BaseDeserializerContext.java:87)

    at weblogic.wsee.bind.runtime.internal.BaseDeserializerContext.deserializeWrappedElement(BaseDeserializerContext.java:133)

    at weblogic.wsee.codec.soap11.SoapDecoder.decodePart(SoapDecoder.java:407)

    at weblogic.wsee.codec.soap11.SoapDecoder.decodeParams(SoapDecoder.java:245)

    at weblogic.wsee.codec.soap11.SoapDecoder.decodeParts(SoapDecoder.java:164)

    at weblogic.wsee.codec.soap11.SoapDecoder.decode(SoapDecoder.java:117)

    at weblogic.wsee.codec.soap11.SoapCodec.decode(SoapCodec.java:139)

    at weblogic.wsee.ws.dispatch.server.CodecHandler.decode(CodecHandler.java:138)

    at weblogic.wsee.ws.dispatch.server.CodecHandler.handleRequest(CodecHandler.java:39)

    at weblogic.wsee.handler.HandlerIterator.handleRequest(HandlerIterator.java:127)

    at weblogic.wsee.ws.dispatch.server.ServerDispatcher.dispatch(ServerDispatcher.java:85)

    at weblogic.wsee.ws.WsSkel.invoke(WsSkel.java:80)

    at weblogic.wsee.server.servlet.SoapProcessor.handlePost(SoapProcessor.java:66)

    at weblogic.wsee.server.servlet.SoapProcessor.process(SoapProcessor.java:44)

    at weblogic.wsee.server.servlet.BaseWSServlet$AuthorizedInvoke.run(BaseWSServlet.java:173)

    at weblogic.wsee.server.servlet.BaseWSServlet.service(BaseWSServlet.java:92)

    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)

    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)

    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)

    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:283)

    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:175)

    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3231)

    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)

    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)

    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2002)

    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:1908)

    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1362)

    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)

    at weblogic.work.ExecuteThread.run(ExecuteThread.java:181)

Caused by: java.lang.InstantiationException: org.w3c.dom.Document

    at java.lang.Class.newInstance0(Class.java:335)

    at java.lang.Class.newInstance(Class.java:303)

    at com.bea.staxb.runtime.internal.ClassLoadingUtils.newInstance(ClassLoadingUtils.java:135)

    ... 36 more

Caused by: java.lang.InstantiationException: org.w3c.dom.Document

    at java.lang.Class.newInstance0(Class.java:335)

    at java.lang.Class.newInstance(Class.java:303)

    at com.bea.staxb.runtime.internal.ClassLoadingUtils.newInstance(ClassLoadingUtils.java:135)

    at com.bea.staxb.runtime.internal.ByNameRuntimeBindingType.createIntermediary(ByNameRuntimeBindingType.java:207)

    at com.bea.staxb.runtime.internal.AttributeUnmarshaller.unmarshal(AttributeUnmarshaller.java:36)

    at com.bea.staxb.runtime.internal.UnmarshalResult.unmarshalBindingType(UnmarshalResult.java:174) 
```

请帮忙..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T17:35:28.493

通过**LiveCycle Workbench**，您可以使用**WebServices 服务**来调用其他 Web 服务。

在这个网站[lctips.wordpress.com](http://lctips.wordpress.com/category/webservice/)上 ，您可以找到一些示例。

您还可以使用 javascript 或 dataconnection 从表单调用 web 服务。
[以编程方式调用网络服务](http://www.avoka.com/blog/2011/02/invoking-a-web-service-from-a-smartform-programmatically/)

# android - 单击可单击列表时显示列表视图项目选项

> ID：13680216
> 
> 赞同：1
> 
> 时间：2012-12-03T09:19:29.910
> 
> 标签：android, android-listview

我正在尝试为用户显示一条 toast 消息，以显示他选择的项目。我已将列表作为来自另一个类的意图传递，并在代码如下的类中接收到它：

```
public class ListViewDelete extends ListActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //setContentView(R.layout.activity_list_view_delete);

    final Intent intent = getIntent();
    final Bundle extras = getIntent().getExtras();    //gets the GWID

    final MySQLitehelper dbhelper = new MySQLitehelper(this);
    ArrayList<String> thelist = new ArrayList<String>(extras.getStringArrayList(SelectOptions.EXTRA_MESSAGE));
    setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,extras.getStringArrayList(SelectOptions.EXTRA_MESSAGE)));
}       

public void onListItemClick(ListView parent, View view, int position, long id)
{
    Toast.makeText(this, "You have selected", Toast.LENGTH_LONG).show();
}
} 
```

在最后一个 onListItemClick 中，如何在“您已选择”之后自定义它，我可以从上面定义的 arraylist 项中输入值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:28:29.257

```
 public void onListItemClick(ListView parent, View view, int position, long id)
{
Toast.makeText(this, "You have selected"+position, Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:47:13.373

如果你有你的索引和数组列表，那么你可以通过索引在集合中引用你的字符串：

```
public class ListViewDelete extends ListActivity {

    private ArrayList<String> thelist;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //setContentView(R.layout.activity_list_view_delete);

        final Intent intent = getIntent();
        final Bundle extras = getIntent().getExtras();    //gets the GWID

        final MySQLitehelper dbhelper = new MySQLitehelper(this);
        thelist = new ArrayList<String>(extras.getStringArrayList(SelectOptions.EXTRA_MESSAGE));
        setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,extras.getStringArrayList(SelectOptions.EXTRA_MESSAGE)));
    }       

    public void onListItemClick(ListView parent, View view, int position, long id)
    {
        Toast.makeText(this, "You have selected" + thelist.get(position), Toast.LENGTH_LONG).show();
    }
} 
```

请注意，我将 arrayList 设为一个字段，以便能够从其他方法中引用它。

# wordpress - 在主菜单中使用 Wordpress 的子菜单分类

> ID：13680217
> 
> 赞同：-1
> 
> 时间：2012-12-03T09:19:39.957
> 
> 标签：wordpress, wordpress-theming

我正在尝试将子菜单添加到我的 WordPress 网站的“主要”菜单中。

在此处查看设计截图：http: [//i.imgur.com/kKarj.jpg ?1](https://i.imgur.com/kKarj.jpg?1)![在此处输入图像描述](../Images/4a0cff05249688150eca0636b19e93eb.png)

我如何才能使用这些自定义分类法添加子菜单，我知道我可以使用 get_terms() 进行分类法，但我不确定如何在 WP Admin 中实现它。

有人可以帮忙吗？

谢谢，

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T19:36:44.427

通过制作带有子调用术语的静态菜单来解决。

# android - 保存微调器选定项目的值

> ID：13680219
> 
> 赞同：0
> 
> 时间：2012-12-03T09:20:01.793
> 
> 标签：android, android-layout, android-emulator, android-widget

如何保存当前选择的微调器值，这样当我重新打开应用程序时，默认情况下会自动选择保存的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:24:43.377

请在微调器上编写以下代码`onItemSelectedListener()`并将所选值存储到共享首选项中。

```
String mSpnValue=mSpinner1.getSelectedItem().toString();
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
SharedPreferences.Editor prefsEditor = myPrefs.edit();
prefsEditor.putString("Value", mSpnValue); 
```

使用下面的代码设置在微调器中选择的项目。

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
String myString = myPrefs.getString("Value","nothing"); // the value you want the

ArrayAdapter<String> myAdap = (ArrayAdapter<String>) mSpinner1.getAdapter();
int spinnerPosition = myAdap.getPosition(myString);

// set the default according to value
mSpinner1.setSelection(spinnerPosition); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:23:03.573

您可以在首选项中保存微调器位置，并在输入返回时使用`spinner.setSelection(position_from_preferences);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:32:11.820

以另一种方式设置值：---

```
 for(int i=0;i<adapter.getCount();i++){
            if(adapter.getItem(i).equals(your save preference value){
                spinner_timer.setSelection(i);      
                }
         } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:40:26.293

您还可以按位置引用微调器值。这样你只需要直接处理`ints`：

```
 SharedPreferences settings = getSharedPreferences("MYPREFS", 0);
    SharedPreferences.Editor editor = settings.edit();
    editor.putInt("VALUE", spinner.getSelectedItemPosition());
    editor.commit(); 
```

并加载：

```
spinner.setSelection(settings.getInt("VALUE", 0)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T09:23:13.920

您可以使用多种方法

例如，您可以使用数据库并保存在上面。

其他方法和最好的 IMO 使用 SharedPreferences [http://developer.android.com/intl/es/reference/android/content/SharedPreferences.html](http://developer.android.com/intl/es/reference/android/content/SharedPreferences.html)

[http://developer.android.com/intl/es/reference/android/app/backup/SharedPreferencesBackupHelper.html](http://developer.android.com/intl/es/reference/android/app/backup/SharedPreferencesBackupHelper.html)

# facebook - 从 facebook api 获取用户的所有评论？

> ID：13680223
> 
> 赞同：2
> 
> 时间：2012-12-03T09:20:06.607
> 
> 标签：facebook, facebook-graph-api

我找到了从对象中获取所有评论的文档。但是有可能从用户那里获得所有评论吗？

# asp.net-mvc-3 - 从不同父页面访问详细信息页面时如何记住返回页面

> ID：13680225
> 
> 赞同：0
> 
> 时间：2012-12-03T09:20:11.200
> 
> 标签：asp.net-mvc-3

我有一个列出对象集合的页面和对象详细信息的详细信息页面。列表中的每一行都有一个指向详细信息页面的链接。

在详细信息页面的底部，我有一个硬编码的 [Go back] 链接，它会将您带到您刚刚来自的列表页面。

到现在为止还挺好。

但现在我还想从一个新的仪表板页面链接到详细信息页面。

单击列表以转到详细信息页面时记住列表页面的智能方法是什么，以便我可以返回正确的列表页面？

我考虑了会话，或者我可以以控制器动作参数格式读取“来自”页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:22:31.593

除了要显示详细信息的对象的 id 之外，您还可以将*返回链接作为查询字符串参数传递给详细信息操作。*

```
public ActionResult Details(int id, string returnUrl)
{
    ...
} 
```

然后可以在相应的视图中使用 returnUrl 参数来生成*Go-Back*链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:35:08.173

公共 ActionResult 详细信息（int id，字符串 returnUrl）{ ... }

在视图中设置一个标签名称为“returnurl”的隐藏值。当用户点击按钮时，它会导航到该页面，您可以在 returnurl 中找到该值。

根据 returnurl 中的值，您可以导航到所需的页面。

问候， Pavan.G

# hadoop - 如何设置映射器的系统环境？

> ID：13680228
> 
> 赞同：2
> 
> 时间：2012-12-03T09:20:18.580
> 
> 标签：hadoop, environment-variables

首先我尝试[了如何从 Mapper Hadoop 设置系统环境变量？](https://stackoverflow.com/questions/10246301/how-to-set-system-environment-variable-from-mapper-hadoop)但`mapred.map.child.env`对我不起作用。

我正在使用 hadoop 0.20.1。我想将开始工作的类中的所有系统环境传递给映射器。这是我所做的：

```
 StringBuilder envStr = new StringBuilder();
    for (Entry<String, String> entry : System.getenv().entrySet()) {
        envStr.append(entry.getKey() + "=" + entry.getValue() + ",");
    }
    if (envStr.length() > 0) {
        envStr.deleteCharAt(envStr.length() - 1);
    }
    // System.out.println("Setting mapper child env to :" + envStr);
    getConf().set("mapred.map.child.env", envStr.toString()); 
```

但它不起作用。我也试过只设置一个系统值，但它也不起作用。在 Mapper 中， System.getenv 不包含该值。但是 job.xml 有关键和价值。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T22:47:07.243

看来你的hadoop太旧了。这是 hadoop 0.20 的错误。

请升级到 0.21 或更稳定的 1.0.x。

有关更多信息，请参阅[相关的 jira](https://issues.apache.org/jira/browse/HADOOP-5981)和[hadoop 0.21.0 发行说明](http://hadoop.apache.org/docs/r0.21.0/releasenotes.html)。

# user-controls - 如何在 HeaderTemplate WinRT XAML 中绑定用户控件的 DependencyProperty？

> ID：13680238
> 
> 赞同：3
> 
> 时间：2012-12-03T09:21:04.340
> 
> 标签：user-controls, windows-8, windows-runtime, datatemplate, winrt-xaml

我有一个 gridView，并为我的中心页面绑定了我的 ObservableCollection 不同的类项。将不同的类项绑定到gridView，并显示不同的项数据模板、表头模板。

我在gridview的标题模板中使用用户控件。我的标题模板，包括用户控件和用户控件，包括一些组合框。我想通过pageRoot对象上的参数将pageRoot datacontext集合绑定到headertemplate组合框中。

我正在创建一个用户控件并创建一些 DependencyProperty、组合框事件处理程序。但无法将 pageRoot DataContext 集合绑定到用户控件组合框中:(

我的英语很差，对这种情况感到抱歉；）感谢您的回答..

我的标题数据模板：

```
<DataTemplate x:Key="OrganizationFixtureHeaderTemplate">
    <Grid Margin="6">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0">
            <TextBlock Text="{Binding Title}" Style="{StaticResource TitleTextStyle}"/>
        </StackPanel>

        <UserControls:UcCbOrganizationFixtureSelections  
            Grid.Column="1"
            RootElement="pageRoot"
            PageOrganizationSource="{Binding PageOrganization, ElementName=pageRoot}"
            />

    </Grid>
</DataTemplate> 
```

我的用户控制代码：

```
<UserControl
    x:Class="Modern_UI.Common.UserControls.UcCbOrganizationFixtureSelections"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Modern_UI.Common.UserControls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <StackPanel Orientation="Horizontal">
        <ComboBox x:Name="cbOrgFixtureSeasons" 
                          ItemsSource="{Binding Path=DataContext.Seasons, ElementName=RootElement}"
                          SelectedValuePath="Id" 
                          DisplayMemberPath="Name"
                          SelectionChanged="CbOrgFixtureSeasons_OnSelectionChanged"
                          Width="Auto"
                          Height="Auto"
                         />
        <ComboBox x:Name="cbOrgFixtureStages" 
                          ItemsSource="{Binding Path=DataContext.FixtureStages, ElementName=RootElement}"
                          SelectedValuePath="Id" 
                          DisplayMemberPath="Name"
                          SelectionChanged="CbOrgFixtureStages_OnSelectionChanged"
                          Width="Auto"
                          Height="Auto"
                  />
        <ComboBox x:Name="cbOrgFixtureRounds" 
                     ItemsSource="{Binding Path=DataContext.FixtureRounds, ElementName=RootElement}"
                     SelectedValuePath="Id" 
                     DisplayMemberPath="Name"
                     SelectionChanged="CbOrgFixtureRounds_OnSelectionChanged"
                     Width="Auto"
                     Height="Auto"
                  />
    </StackPanel>
</UserControl> 
```

后面的用户控制代码：

```
namespace Modern_UI.Common.UserControls
{
    public sealed partial class UcCbOrganizationFixtureSelections : UserControl
    {  
        public DependencyProperty RootElementProperty = DependencyProperty.Register("RootElement",
                                                                                    typeof(string),
                                                                                    typeof(
                                                                                        UcCbOrganizationFixtureSelections
                                                                                        ),
                                                                                    null);

        public DependencyProperty PageOrganizationSourceProperty = DependencyProperty.Register("PageOrganizationSource",
                                                                                               typeof(Organization),
                                                                                               typeof(
                                                                                                   UcCbOrganizationFixtureSelections
                                                                                                   ),
                                                                                               null);

        public string RootElement
        {
            get { return this.GetValue(RootElementProperty) as string; }
            set { this.SetValue(RootElementProperty, value); }
        }

        public Organization PageOrganizationSource
        {
            get { return this.GetValue(PageOrganizationSourceProperty) as Organization; }
            set { this.SetValue(PageOrganizationSourceProperty, value); }
        }

        public UcCbOrganizationFixtureSelections()
        {
            this.InitializeComponent();
        }

        async private void CbOrgFixtureSeasons_OnSelectionChanged(object sender, SelectionChangedEventArgs e)
        {
          //loading root page parameter via "PageOrganizationSource" named DependencyProperty.
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:37:35.987

我解决了我的代码问题，并添加了一些代码。

1-绑定根页面DataContext的用户控件。因为gridview模板里面的用户控制。如果在数据模板中的控件内，则绑定数据模板项目源的默认数据上下文。我不想与 itemsource 数据上下文相关，绑定 rootpage 数据上下文。替换代码，在 DataTemplate 中：

```
<DataTemplate x:Key="OrganizationFixtureHeaderTemplate">
    <Grid Margin="6">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Column="0">
            <TextBlock Text="{Binding Title}" Style="{StaticResource TitleTextStyle}"/>
        </StackPanel>

        <UserControls:UcCbOrganizationFixtureSelections  
            Grid.Column="1"
            RootElement="pageRoot"
            DataContext="{Binding DataContext, ElementName=pageRoot}"     
            PageOrganizationSource="{Binding PageOrganization, ElementName=pageRoot}"
            />
    </Grid>
</DataTemplate> 
```

2-我在用户控件 xaml 代码中替换。用户控件的 Datacontext 现在属于 rootPage DataContext。在这种情况下，我可以将每个集合绑定到我的组合框。替换代码：

```
<UserControl
    x:Class="Lig_TV_Modern_UI.Common.UserControls.UcCbOrganizationFixtureSelections"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <StackPanel Orientation="Horizontal">
        <ComboBox x:Name="cbOrgFixtureSeasons" 
                          ItemsSource="{Binding Seasons}"
                          SelectedValuePath="Id" 
                          DisplayMemberPath="Name"
                          SelectionChanged="CbOrgFixtureSeasons_OnSelectionChanged"
                          Width="Auto"
                          Height="Auto"                             
                         />        
    </StackPanel>
</UserControl> 
```

感谢您思考这个问题。这种结构可以与每个元素进行通信，并且可以绑定每个集合而无需 datatemplate itemsource datacontext。如果使用数据模板并且需要控件的事件处理程序，可以使用用户控件。

编码良好的日子；）

# assembly - sscanf 在汇编中的表现如何

> ID：13680240
> 
> 赞同：0
> 
> 时间：2012-12-03T09:21:08.660
> 
> 标签：assembly, scanf

我已经阅读了汇编程序并看到了**msvcrt.sscanf**。我不知道运行 sscanf 后寄存器 eax 是如何变化的。请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:29:09.070

该`sscanf`函数的结果（ISO C 的一部分）是实际具有从正在解析的字符串中提供的值的格式字段的数量。在汇编级别，此值在某些体系结构（可能包括您的体系结构）中的 EAX 中返回。许多 C 程序员完全忽略了这个值——这是一种不好的做法，但很常见——但你*应该*检查一下。零表示无法解析任何内容，1 表示“一个字段可以满足”，等等。

编写一个好的格式并不是特别容易，但阅读它们并不太难（除非那里也有保护字段）。

# magento-1.7 - 在magento的list.phtml中显示yes/no类型的自定义属性，其值为yes

> ID：13680243
> 
> 赞同：0
> 
> 时间：2012-12-03T09:21:31.547
> 
> 标签：magento-1.7

我做了一些是/否类型的属性。现在我想在 list.phtml 中显示那些值为 yes 的属性

我尝试了很多代码，但未能解决这个问题。这是我最近的代码：

```
<?php $attributes = $_product->getAttributes();

   foreach ($attributes as $attribute) {
         $excludeAttr = array();echo $attribute->getIsVisibleOnFront() ;
        if ( !in_array($attribute->getAttributeCode(), $excludeAttr)) {
            $value = $attribute->getFrontend()->getValue($_product);echo $value;
        if (!$_product->hasData($attribute->getAttributeCode())) {
                $value = Mage::helper('catalog')->__('N/A');
            } elseif ((string)$value == '') {
                $value = Mage::helper('catalog')->__('No');
            } elseif ($attribute->getFrontendInput() == 'price' && is_string($value)) {
                $value = Mage::app()->getStore()->convertPrice($value, true);
            }

            if (is_string($value) && strlen($value)) {
                $data[$attribute->getAttributeCode()] = array(
                    'label' => $attribute->getStoreLabel(),
                    'value' => $value,
                    'code'  => $attribute->getAttributeCode()
                );
            }
        }
    }

 if($_additional = $data): ?>

<h2><?php echo $this->__('Additional Information') ?></h2>
<table class="data-table" id="product-attribute-specs-table">
    <col width="25%" />
    <col />
    <tbody>
    <?php foreach ($_additional as $_data): ?>
        <tr>
            <th class="label"><?php echo $this->htmlEscape($this->__($_data['label'])) ?></th>
            <td class="data"><?php echo $_helper->productAttribute($_product, $_data['value'], $_data['code']) ?></td>
        </tr>
    <?php endforeach; ?>
    </tbody>
</table>
<script type="text/javascript">decorateTable('product-attribute-specs-table')</script> 
```

但它显示了所有属性，但我只想显示值为 yes 的是/否类型的属性。当我使用此代码时，我还有一个问题：

```
 if ($attribute->getIsVisibleOnFront() && !in_array($attribute->getAttributeCode(), $excludeAttr)) { 
```

它返回假。它不明白为什么这个语句返回 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T04:54:10.197

最后我得到了解决方案。基本上我添加了这个条件

```
<?php if ($_product->getAttributeText($_data['code']) == "Yes"): ?> 
```

它开始工作

# c - C转到不同的功能

> ID：13680246
> 
> 赞同：5
> 
> 时间：2012-12-03T09:21:40.360
> 
> 标签：c, embedded, goto

我正在使用一个嵌入式系统，其中 exit() 调用似乎不存在。

我有一个调用 malloc 的函数，而不是让程序在失败时崩溃，我宁愿更优雅地退出。

我最初的想法是使用 goto，但是标签的范围似乎非常有限（我不确定，在“永远不要使用 GOTO ！！1 ！！”之前我从未使用过它们）。

我想知道是否可以转到另一个函数的一部分，或者是否有任何其他创造性的方法可以从任意函数退出 C 程序。

```
void main() {
  //stuff
  a();

  exit:
     return;
}

void a() {
   //stuff

   //if malloc failed
   goto exit;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T09:28:37.757

选项：

*   由于您的系统是非标准的（或者可能是标准但非托管的），请查看其文档以了解如何退出。
*   尝试`abort()`（警告：这不会调用 atexit 处理程序）。
*   检查您的系统是否允许您向自己发送会杀死自己的信号。
*   从`a()`指示错误返回一个值，并通过错误返回一直传播到`main`.
*   检查你的系统是否有`setjmp/longjmp`. 这些很难正确使用，但它们确实提供了您所要求的：从程序中的任何位置转移执行的能力（不一定包括信号/中断处理程序，但无论如何您可能不会调用`malloc`其中任何一个）到您`main`功能中的特定点。
*   如果您的嵌入式系统是这样的，您的程序是在其上运行的唯一代码，那么您可以调用一些进入错误状态的代码而不是退出：可能是一个无限循环，可能会闪烁 LED 或以其他方式表明错误已发生了。也许你可以引发重新启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T09:24:48.647

为什么不使用返回值

```
if malloc failed
  return 1;
else 
  return 0;

...........

if(!a())
   return; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T09:32:40.730

`goto`不可能跳转到另一个函数。

通常，建议**您不要使用 goto！**在这种情况下，您的要求是不可能的。

如何处理？解决方案很少。

*   检查有问题的函数的返回码或值并采取相应措施。

*   使用`setjmp`/ `longjmp`。这个建议应该被认为比使用它自己更邪恶`goto`，但它确实支持从一个函数跳转到另一个函数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-03T09:43:13.817

嵌入式系统很少有 exit() 的任何变体，因为该函数在给定的上下文中不一定有意义。电梯或烤面包机的控制器出口到哪里？

在多任务嵌入式系统中，可能会有一个系统调用来退出或终止一个进程，只留下一个空闲进程，它只是一个忙循环：`while (1);`或者在某些情况下调用特权指令进入节能模式：`while (1) { asm("halt") };`

在嵌入式系统中，从错误中“恢复”的一种可能方法是`asm("trap #0");`调用中断向量或任何等效方法，该方法通过将内核转储到闪存驱动器或向 UART 输出错误代码来实现系统正常关闭。

# android - 大尺寸 HTML5 应用

> ID：13680248
> 
> 赞同：1
> 
> 时间：2012-12-03T09:21:45.990
> 
> 标签：android, html, cordova, package, large-data

我正在开发一个**HTML5 应用程序**，它背后运行着许多**动画和逻辑。**应用程序中使用了
**大量****图像**和**音频文件**，以实现更好的 UI 和 UX。
我想当我完成这个应用程序时，它的大小将超过**250 mb**。
对于网络来说，这不会是任何问题，因为我将每个模块划分为几个 html 页面。
但是，如果我需要将它与**phoneGap** for **Android Tab**和**iPad一起****打包**怎么办。是否可以打包一个大尺寸的应用程序？

 ******有没有其他方法可以将它包装成更小的尺寸？

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:32:28.530

我在这里有一个超过 1GB 的 Cordova 应用程序。只要您保持在其他限制内，例如应用商店的最大 2GB，大小应该不是问题。

你当然需要在本地构建——PhoneGap Build 有一个硬文件大小限制，而云构建服务对于任何大的东西通常是不切实际的。

如果可能，请设置您的应用程序，使其无需大多数媒体即可轻松打包以进行调试 - 完整版本需要很长时间才能构建和部署。******

# mercurial - 将 --keep-changes 设置为 `hg qpush` 和 `hg qpop` 的默认值

> ID：13680251
> 
> 赞同：3
> 
> 时间：2012-12-03T09:22:00.640
> 
> 标签：mercurial, default, mq, mercurial-queue

Mercurial Queues 最近有了一个新功能，它允许在有本地更改时推送和弹出 mq 补丁，前提是补丁不与本地更改冲突。这是由`--keep-changes`标志控制的。我想将此行为设为默认行为。通常，我避免设置默认值，因为这意味着`hg`我的机器上的工作方式与其他机器上的不同，但在这种情况下，它似乎无害。

`hg help qpop`例如说

```
With --keep-changes, abort only if the uncommitted files overlap with
    patched files.
[...]
    --keep-changes tolerate non-conflicting local changes 
```

那么，有人能告诉我要放入什么，`.hgrc`以便`--keep-changes`默认为`qpush`and`qpop`吗？

请参阅错误 2780 - 如果本地更改和 mq 补丁与此功能的历史[无关，qpop 应该可以工作。](http://bz.selenic.com/show_bug.cgi?id=2780)可能没有选项可以设置它，在这种情况下它的用处不大。甚至没有一个字母的别名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:12:36.273

hgrc 的默认部分应该做你想做的（虽然未经测试）：

```
[defaults]
qpush = --keep-changes
qpop  = --keep-changes 
```

但是....默认值已“折旧”，鼓励人们改用别名。我不认为这意味着它们会消失，它会“破坏工作流程”，这是善变发展中的致命罪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:39:22.473

阅读[别名](http://www.selenic.com/mercurial/hgrc.5.html#alias)部分并特别注意本章中的注意事项

> ## 笔记
> 
> 可以创建与现有命令同名的别名，然后将覆盖原始定义。这几乎总是一个坏主意！

# iphone - 如何在objective-c上登录服务器并获取页面源？

> ID：13680255
> 
> 赞同：2
> 
> 时间：2012-12-03T09:22:14.473
> 
> 标签：iphone, objective-c, ios, httprequest

我正在尝试通过objective-c上的NSURLConnection通过POST方法发送我的用户名和密码来登录服务器，但我从我的NSLog中得到了这个

NS日志：

```
 NSLog:
    NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"%@",string); 
```

它写入控制台的内容：

```
 404 Not Found

# Not Found

Sorry!The page requested was not found. 
```

为什么会发生这种情况？为什么我得到未找到页面而不是索引页面？我做错了什么？顺便说一句，我正在尝试连接 https 而不是 http 我不知道这是源代码：

```
 @interface ProjectViewController ()
    @property NSURLConnection * urlConnection;
    @property NSMutableData * responseData;

    @end

    @implementation ProjectViewController

    @synthesize responseData =_responseData;

    - (IBAction)LoginButton:(UIButton *)sender {

        NSMutableURLRequest *request = nil;
        request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"https://loginpage.com"]];

        NSString *post = [NSString stringWithFormat:@"sid=%@&PIN=%@", @"username", @"password"];
        NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
        [request setValue:[NSString stringWithFormat:@"%d", [postData length]] forHTTPHeaderField:@"Content-Length"];
        [request setTimeoutInterval: 15];
        [request setHTTPMethod:@"POST"];
        [request setHTTPBody:postData];

        _urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
        [_urlConnection start];

        //[self performSegueWithIdentifier:@"LoginComplete" sender:self];
    }

    - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
        [self.responseData appendData:data];
        NSString *string = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
        NSLog(@"%@",string);
    }

    - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
        //Oops! handle failure here
    }
    - (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    }

    - (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
        if ([response isKindOfClass:[NSHTTPURLResponse class]]) {
            //NSDictionary *headerFields = [(NSHTTPURLResponse*)response allHeaderFields]; //This would give you all the header fields;
            //NSLog(@"%@",headerFields);
        }
    }
    @end 
```

我刚刚认识到的是，如果我将 POST 请求的一部分放入评论中，它会将页面源打印到控制台，但当然我不能将我的用户名和密码发送到服务器。我只是获取登录页面的源代码，但我想在登录后获取源代码。实际上我想通过使用这个会话重定向到另一个页面。

这部分：

```
 NSString *post = [NSString stringWithFormat:@"sid=%@&PIN=%@", @"username", @"password"];
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
    [request setValue:[NSString stringWithFormat:@"%d", [postData length]] forHTTPHeaderField:@"Content-Length"];
    [request setTimeoutInterval: 15];
    [request setHTTPMethod:@"POST"];
    [request setHTTPBody:postData]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:51:50.233

网站上使用的证书是自签名的吗？您是否尝试在 webview 中发出请求以查看它是否在那里工作？不在 nsurlrequest 中？

试试这个[回复](https://stackoverflow.com/questions/9122761/ios-5-nsurlconnection-to-https-servers)，也许它会给你一些提示。

# java - 尝试在 Eclipse 中以调试模式运行 ANT JUnit 目标

> ID：13680257
> 
> 赞同：11
> 
> 时间：2012-12-03T09:22:17.757
> 
> 标签：java, ant, junit

这是我的 ANT JUnit 目标

```
<target name="test" depends="compile" >
    <junit failureProperty="test.failure" >

        <jvmarg value="-Xdebug" />
        <jvmarg value="-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5432" />

        <classpath>
            <pathelement path="${basedir}\..\Core\lib\junit-4.10.jar"/>
            <pathelement path="${basedir}\..\Suggestion\lib\ssce.jar"/>
            <pathelement path="C:\Java\javamail-1.4.1\mail.jar"/>
            <pathelement path="C:\Java\commons-net-2.0\commons-net-ftp-2.0.jar"/>
            <pathelement path="${basedir}\WebContent\WEB-INF\lib\gson-2.2.1.jar"/>
            <pathelement path="${tomcatLibs}\servlet-api.jar"/>
        </classpath>
        <classpath>
            <pathelement path="${build}"/>
        </classpath>
        <formatter type="brief" usefile="false" />          
        <test name="com.server.junit.ServerTestSuite" />
        <test name="com.junit.DictionaryTestSuite" />   
        <test name="com.util.junit.SuggestionTestSuite" />              
    </junit>

    <fail message="Unit test failed" if="test.failure"/>
</target> 
```

如果通过 Eclipse 运行，我的单元测试可以通过，但如果我从 ANT 启动它们，则会失败。我希望它在单元测试的断点处停止。从文档中我知道我需要添加这些 jvmarg 但无法停止，所以我显然没有将它们放在正确的位置。另外，我认为我的端口不正确，但我应该使用哪个端口？通过eclipse调试JUnits时，我不必设置任何调试端口，它就可以了

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T09:36:03.810

您需要忘记可以从 Eclipse 中运行 JUnit 测试和 ANT 目标的时刻。您想要的是调试一个恰好具有主类`org.apache.tools.ant.Main`并且可以`ant`从命令行启动的 Java 应用程序。

您现在有两个选择：您可以创建一个调用的启动配置，`org.apache.tools.ant.Main`但设置起来非常复杂（您必须复制`ant`脚本在启动时所做的所有事情）。

另一种选择是`ant`正确配置。在您的情况下，测试在`ant`进程内运行，但我不知道传递`-Xdebug`给 Ant 本身的简单方法。因此，您必须在新进程中运行测试。将此添加到`junit`任务中：

```
<junit fork="yes" forkmode="once" ...> 
```

没有这个，`jvmarg`参数将被忽略。

下一步是在 Eclipse 中创建调试配置。[这篇文章](http://www.ibm.com/developerworks/java/library/os-eclipse-javadebug/index.html)详细解释了这一点。对你来说，只有“结论”之前的最后一部分很重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T09:29:20.253

详细说明：

1.  在 Eclipse 中，导航到运行 | 调试。
2.  选择左侧列中的远程 Java 应用程序。单击同一列底部的新建。
3.  在创建配置屏幕中，系统将提示您输入一些值。从一个有意义的名字开始。对于 Project，选择包含要调试的源代码的 Java 项目。将 Connection Type 保留为默认值，即 Standard (Socket Attach) 。对于主机，输入 localhost。如果要调试远程服务器，请输入其主机名或 IP 地址。对于端口，输入 5432。
4.  单击应用。
5.  确保您的测试在调试模式下运行。在同一屏幕中单击 Debug 。Eclipse 应该自动将您带到 Debug 透视图，并且您应该在 Debug 视图中看到堆栈跟踪。
6.  如果您没有自动转到 Debug 透视图，请选择 Window | 开放视角 | 其他然后单击调试。

取自[这里](http://www.eclipsezone.com/eclipse/forums/t53459.html)。

# windows - 远程机器 32 位还是 64 位？

> ID：13680260
> 
> 赞同：0
> 
> 时间：2012-12-03T09:22:28.927
> 
> 标签：windows, 32bit-64bit, remote-debugging

我使用 putty 通过我的 linux 机器将 ssh 连接到 Windows 机器。我如何确定我有 ssh 的机器是 64 位还是 32 位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:25:56.413

假设您的 Windows 主机上安装了 64 位版本的 OpenSSH，请检查是否有 C:\Windows\SysWow64 目录？

如果它是 OpenSSH 的 32 位版本，您可以执行相反的操作并检查*应该*在 C:\Windows\system32\ 中的系统文件，但不是因为您被无形地重定向到 C:\Windows\SysWow64 （例如，bcdedit.exe 在 system32 中，但不在 syswow64 中）。

# maven - 使用 ZK、IntelliJ 和 Maven 开发 Web 应用程序

> ID：13680263
> 
> 赞同：0
> 
> 时间：2012-12-03T09:22:48.333
> 
> 标签：maven, intellij-idea, zk

我想使用 Maven 和 IntelliJ IDE 创建一个带有 ZK 框架的 Web 应用程序。我找不到任何可以帮助我的教程。你有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T11:24:56.633

添加 zk 作为 maven 依赖项。
然后去[zk主页阅读文档](http://zkoss.org)。
但我想使用[Zk-Studio](http://www.zkoss.org/product/zkstudio)意味着使用 eclipse 是一个更好的主意。

# ios - ios 执行大数计算

> ID：13680267
> 
> 赞同：0
> 
> 时间：2012-12-03T09:23:03.757
> 
> 标签：ios

我只是在 ios 中乘以两个非常大的值。

```
 value 1 999999999999
            value 2 99999 
```

我将数据类型用作双长，即长长，这仅适用于太大的值，但不适用于像 10*23 这样的小值，我得到不同的答案示例

```
 10.0*111.5 actual value in calculator is 1115 but i wat i get is 1110 
```

请帮助我，我也想将我的答案四舍五入到 %.3f 之类的 3 个地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:30:11.453

这可能是你正在做的

```
long long left = 111.5; //Not good!  Will truncate to 111
long long right = 10.0; //10
long long result = left * right; //111 * 10 = 1110 
```

这是你应该做的

```
double left = 111.5;
double right = 10.0;
double result = left * right; //111.5 * 10.0 = 1115.0 
```

如果由于某种原因双倍还不够，你可以去`long double`。

# c# - 序列化类型化数据集、更新程序集、反序列化错误

> ID：13680273
> 
> 赞同：2
> 
> 时间：2012-12-03T09:23:26.790
> 
> 标签：c#, serialization, strongly-typed-dataset

我的项目使用类型化数据集来处理其数据。一些数据表中的某些列使用自定义程序集中的类型。当数据集被序列化时，它会像这样保存列和数据类型

```
<xs:element name="Mode" msdata:DataType="MyAssembly.Adapters.Mode, MyAssembly, Version=6.3.1.0, Culture=neutral, PublicKeyToken=dab9b4e6f12a95d2" type="xs:anyType" minOccurs="0" /> 
```

现在，当程序集 MyAssembly 更新时，此全名不再匹配，因此当程序重新运行并尝试反序列化 xml 时，会引发异常，指出它找不到版本 6.3.1.0 的程序集。

我尝试删除全名，如下所示，只保留类型，但这是不合法的。

```
<xs:element name="Mode" msdata:DataType="MyAssembly.Adapters.Mode" type="xs:anyType" minOccurs="0" /> 
```

有谁知道在使用更新的程序集类型时如何反序列化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-08T06:35:31.927

几年后我不得不重新审视，我对这个解决方案不满意，并被提醒这看起来就像[绑定重定向](https://msdn.microsoft.com/en-us/library/7wd6ex19%28v=vs.110%29.aspx)解决的问题。

将以下内容添加到主应用程序项目的配置文件中。它应该输出 app.exe.config。

```
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Assembly" publicKeyToken="token" culture="neutral" />
        <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

如果是 NUnit，则在 NUnit 项目中添加一个应用程序配置文件。它应该输出 Assembly.dll.config

现在不需要重写 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:48:11.380

我想出的解决方案是用最新的程序集版本号重写 xml。

在运行时，您可以找到您期望的程序集的版本号并进行正则表达式搜索和替换。

反序列化类型化数据集并引发异常的一个有趣注意事项是，您必须创建另一个新数据集以读取，因为在引发异常之前可能已经创建了表字段和关系。

IE

```
DataSet untypedds = new DataSet();
try {
    untypedds.ReadXml(xmlPath, XmlReadMode.ReadSchema);
}
catch (FileLoadException) {
    untypedds = new DataSet(); // Need the new DataSet here
    RewriteXml(xmlPath);
    untypedds.ReadXml(xmlPath, XmlReadMode.ReadSchema);
} 
```

# javascript - JQuery Slider：调用没有ID但有对象的函数

> ID：13680274
> 
> 赞同：2
> 
> 时间：2012-12-03T09:23:31.023
> 
> 标签：javascript, html, jquery, jquery-events, jquery-ui-slider

我正在用 JQuery 实现一个 Slider，我遇到了以下问题。

该函数在加载时调用，它会生成一个带有 div 元素的 Id 的滑块：

```
$(function() {
        $( "#slider" ).slider({
            value: 0,
            min: 0,
            max: 10,
            step: 1,
            slide: function( event, ui ) {
                $( "#value" ).val(ui.value );
            }
        });
        $( "#value" ).val( $( "#slider" ).slider( "value" ) );
    });

<div id="slider" > 
```

我宁愿在加载并传递对象时调用它 - 像这样：

```
function createSilder(object) {
        object.slider({
            value: 0,
            min: 0,
            max: 10,
            step: 1,
            slide: function( event, ui ) {
                $( "#value" ).val(ui.value );
            }
        });
        $( "#value" ).val( $( "#slider" ).slider( "value" ) );
}

<div id="slider" onload="createSlider(this)"> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:27:17.943

你试过你的代码吗？

可能没有问题，它只取决于插件的编码方式。

只是要小心传递 jQuery 对象：`<div id="slider" onload="createSlider($(this));">`。

# java - 将分离的对象重新附加到会话或重新查询？

> ID：13680277
> 
> 赞同：1
> 
> 时间：2012-12-03T09:23:42.903
> 
> 标签：java, hibernate

我有一个休眠会话并查询了一个对象。然后我提交事务并结束会话。我现在有一个分离的对象。如果我现在开始另一个会话和事务并且需要我的分离对象作为另一个查询的输入参数，我通常会这样做：

```
session.update(<detachedObject>) 
```

但是，当我的对象没有更改时，也会触发更新查询。我知道为什么 Hibernate 会这样做，我对此很好......

但是，在新会话中重新查询我的分离对象以用作我的查询的输入参数并因此也避免更新语句可能是更高效/最佳实践吗？或者有没有人对如何实现这种行为有更好的想法？

# ruby-on-rails - redirect_to 方法在嵌套路由中传播 DELETE http 操作

> ID：13680279
> 
> 赞同：2
> 
> 时间：2012-12-03T09:23:48.513
> 
> 标签：ruby-on-rails, nested-attributes

以上是删除评论的结果。请注意，当您删除评论时，评论的父帖子也会通过`redirect_to`

```
Started DELETE "/posts/19/comments/30" for 127.0.0.1 at 2012-12-03 01:10:43 -0800
Processing by CommentsController#destroy as JS
  Parameters: {"post_id"=>"19", "id"=>"30"}
  Comment Load (0.3ms)  SELECT "comments".* FROM "comments" WHERE "comments"."id" = ? LIMIT 1  [["id", "30"]]
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Post Load (0.1ms)  SELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1  [["id", "19"]]
  CACHE (0.0ms)  SELECT "comments".* FROM "comments" WHERE "comments"."id" = ? LIMIT 1  [["id", "30"]]
   (0.0ms)  begin transaction
  SQL (0.2ms)  DELETE FROM "comments" WHERE "comments"."id" = ?  [["id", 30]]
   (7.7ms)  commit transaction
Redirected to http://localhost:3000/posts/19
Completed 302 Found in 13ms (ActiveRecord: 8.4ms)

Started DELETE "/posts/19" for 127.0.0.1 at 2012-12-03 01:10:43 -0800
Processing by PostsController#destroy as JS
  Parameters: {"id"=>"19"}
  Post Load (0.1ms)  SELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1  [["id", "19"]]
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  CACHE (0.0ms)  SELECT "posts".* FROM "posts" WHERE "posts"."id" = ? LIMIT 1  [["id", "19"]]
   (0.0ms)  begin transaction
  Comment Load (0.1ms)  SELECT "comments".* FROM "comments" WHERE "comments"."post_id" = 19
  SQL (0.2ms)  DELETE FROM "posts" WHERE "posts"."id" = ?  [["id", 19]]
   (1.1ms)  commit transaction
Redirected to http://localhost:3000/
Completed 302 Found in 6ms (ActiveRecord: 1.7ms)

Started DELETE "/" for 127.0.0.1 at 2012-12-03 01:10:43 -0800
Processing by PagesController#home as JS
  Rendered pages/home.html.haml within layouts/application (0.1ms)
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 200 OK in 40ms (Views: 39.3ms | ActiveRecord: 0.2ms) 
```

* * *

路线.rb

```
resources :posts do
  member do
    put "soft_destroy"
  end

  resources :comments do
    member do
      get "reply"
      post "create_reply"
      put "soft_destroy"
    end
  end
end 
```

评论控制器

```
def destroy
  @post = Post.find(params[:post_id])
  @comment = Comment.find(params[:id])
  @comment.destroy
  redirect_to @post
end 
```

删除视图文件上的链接

```
= link_to "delete", [@post, comment], method: :DELETE, remote: true 
```

后模型

```
has_many :comments, dependent: :destroy
accepts_nested_attributes_for :comments 
```

评论模型

```
belongs_to :post 
```

DELETE html动词在posts控制器上传播是否有原因？而不仅仅是呼吁`show`采取行动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:57:25.470

问题是由删除视图文件上的链接引起的

```
= link_to "delete", [@post, comment], method: :DELETE, remote: true 
```

出于某种原因，使用 DELETE 方法的 ajax 请求似乎传播到了第一个 DELETE 请求之外。

我删除`remote: true`了，它现在向帖子发出 GET 请求而不是 DELETE 请求。

```
= link_to "delete", [@post, comment], method: :DELETE 
```

我仍然不明白为什么会这样。

# android - 动态选取框的文本

> ID：13680281
> 
> 赞同：5
> 
> 时间：2012-12-03T09:23:58.387
> 
> 标签：android, android-listview, textview, android-xml, android-scrollview

是否可以将列表视图的 java 编码中的文本添加到 Android 中的选取框滚动。如果是的话，你能告诉我怎么做吗？

如果需要，我将发布使用的代码。这是使用的列表视图的 XML 如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >
     <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
    </LinearLayout>
    <ListView
        android:id="@+id/audiolist_listView"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_gravity="bottom"
        android:layout_weight="1"
        android:background="@drawable/backgroundimg"
        android:divider="@drawable/gradient"
        android:dividerHeight="1dp"
        android:scrollbars="vertical" >
    </ListView>

</LinearLayout> 
```

listview的java类如下

```
public class Audiovediolist extends Activity implements OnItemClickListener {
    private ListView audioList;
    private Intent frmHome;
    private ArrayList<HashMap<String, String>> dataList;
    private HashMap<String, String> map;
    private HashMap<String, String> data;
    private int Screen_Id;
    private AdView adView;
    String name;
    String mSign[] = { "Aries-Mesam", "Taurus-Vrushabham", "Gemini-Midhunam",
            "Cancer-Karkatakam", "Leo-Simham", "Virgo-Kanya", "Libra-Tula",
            "Scorpio-Vruchikam", "Sagittarius-Dhanussu", "Capricorn-Makaram",
            "Aquarius-Kumbham", "Pisces-Meenam" };
    Integer mImages[] = { R.drawable.meshamu, R.drawable.vrushabhamu,
            R.drawable.medhunam, R.drawable.karkatakam, R.drawable.simham,
            R.drawable.kanya, R.drawable.tula, R.drawable.vruchikam,
            R.drawable.dhanussu, R.drawable.makaramu, R.drawable.kumbhamu,
            R.drawable.meenamu };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_RIGHT_ICON);
        setContentView(R.layout.list);
        frmHome = getIntent();
        getIntentValues();
        initUI();
        setUI();
        uiListener();
    }

    private void initUI() {
        audioList = (ListView) findViewById(R.id.audiolist_listView);
        dataList = new ArrayList<HashMap<String, String>>();
        adView = new AdView(this, AdSize.SMART_BANNER, "a150b89c23af3b2");
        LinearLayout layout = (LinearLayout) findViewById(R.id.linearLayout1);
        layout.setGravity(Gravity.TOP);
        layout.addView(adView);
        adView.loadAd(new AdRequest());
    }

    private void uiListener() {
        audioList.setOnItemClickListener(this);
    }

    private void getIntentValues() {
        String id = frmHome.getStringExtra("Activity_Id");
        Screen_Id = Integer.parseInt(id);
        if (Screen_Id == 1) {
            getWindow().setFeatureDrawableResource(Window.FEATURE_RIGHT_ICON,
                    R.drawable.audioo);
            this.setTitle(getResources().getString(R.string.audio));
            this.setTitleColor(getResources().getColor(R.color.Beige));
        } else {
            this.setTitle(getResources().getString(R.string.video));
            this.setTitleColor(getResources().getColor(R.color.Beige));
            getWindow().setFeatureDrawableResource(Window.FEATURE_RIGHT_ICON,
                    R.drawable.videoo);
        }
    }

    private void setAdapter() {
        SimpleAdapter adapter = new SimpleAdapter(this, dataList,
                R.layout.list_row, new String[] { "Image", "text" }, new int[] {
                        R.id.audiolist_row_img, R.id.audiolist_row_tv });
        audioList.setAdapter(adapter);
    }

    private void setUI() {
        for (int a = 0; a <= 11; a++) {
            map = new HashMap<String, String>();
            map.put("Image", "" + mImages[a]);
            map.put("text", mSign[a]);
            dataList.add(map);
            map = null;
        }
    }

    @Override
    protected void onStart() {
        super.onStart();
        setAdapter();
    }

    @Override
    public void onBackPressed() {
        super.onBackPressed();
        System.gc();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        adView.destroy();
    }

    /*
     * private class NextTask extends AsyncTask<Void,Void,Void> { ProgressDialog
     * progressDailog = new ProgressDialog(Audiovediolist.this);
     * 
     * @Override protected void onPreExecute() { super.onPreExecute();
     * progressDailog.setTitle("Please Wait");
     * progressDailog.setMessage("URL Data Loading ...");
     * progressDailog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
     * progressDailog.setCancelable(true); progressDailog.show(); }
     * 
     * @SuppressWarnings("static-access")
     * 
     * @Override protected Void doInBackground(Void... params) { return null; }
     * 
     * @Override protected void onPostExecute(Void result) {
     * progressDailog.dismiss(); } }
     */
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        data = dataList.get(position);
        //FinalConstants.AUDIO_VIDEO = "list";
        try {
            NetWorkCheck netWork = new NetWorkCheck();
            if (netWork.isNetWorkConnection(this)) {
                if (Screen_Id == 1) {
                    // new NextTask().execute();
                    Intent audioInt=new  Intent(getApplicationContext(),AudioView.class);
                     audioInt.setType(data.get("text"));

                     startActivity(audioInt);
                } else if (Screen_Id == 2) {
                    Intent vedioInt = new Intent(this, VideoPlayActivity.class);
                    vedioInt.setType(data.get("text"));
                    startActivity(vedioInt);
                }
            } else {
                netWork.alert();
            }
        } catch (Exception e) {
            e.printStackTrace();
            Toast.makeText(this, "Problem while ListItemClick",
                    Toast.LENGTH_SHORT).show();
        }
    }
} 
```

我需要选择滚动的文本的音频播放器代码如下

```
public class AudioView extends Activity implements OnClickListener {
    private MediaPlayer mMediaPlayer;
    private ImageView mPlay;
    private ImageView mPause;
    private ImageView mBack;
    private ImageView mFar;
    private ProgressBar myProgressBar;
    private boolean boolFlag = false;
    private boolean isPausedInCall = false;
    private String url;
    private TelephonyManager mTelephoneMgr;
    private NotificationManager mNotificationManager;
    private int SIMPLE_NOTFICATION_ID;
    private TextView tv;
    // private boolean serviceRunning;
    Notification notifyDetails;
    private AdView adView;

    @SuppressWarnings("deprecation")
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().requestFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        setContentView(R.layout.marquee);
        Toast.makeText(this,"please wait.........",Toast.LENGTH_LONG).show();
        url=getIntent().getType();
        initUI();
        uiListener();

        mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        notifyDetails = new Notification(R.drawable.mulug_icon, url,
                System.currentTimeMillis());
        mTelephoneMgr = (TelephonyManager) getSystemService(TELEPHONY_SERVICE);
        if (mTelephoneMgr != null) {
            mTelephoneMgr.listen(phoneStateListener,
                    PhoneStateListener.LISTEN_CALL_STATE);
        }
        /*if(FinalConstants.AUDIO_VIDEO=="listitem"){
        LoginProgress task = new LoginProgress();
        task.applicationContext = AudioView.this;
        task.execute();
    }*/
    }

    private void initUI() {
        tv = (TextView) findViewById(R.id.text);
        mBack = (ImageView) findViewById(R.id.back);
        mPlay = (ImageView) findViewById(R.id.play);
        mPause = (ImageView) findViewById(R.id.pause);
        mFar = (ImageView) findViewById(R.id.fwd);
        myProgressBar = (ProgressBar) findViewById(R.id.progressbar_Horizontal);
        myProgressBar.setProgressDrawable(getResources().getDrawable(
                R.drawable.green_progress));
        myProgressBar.setProgress(0);
        adView = new AdView(this, AdSize.BANNER, "a150b89c23af3b2");
        LinearLayout layout = (LinearLayout) findViewById(R.id.linearLayout1);
        layout.setGravity(Gravity.TOP);
        layout.addView(adView);
        adView.loadAd(new AdRequest());
        tv.setText(url + "more Deails Click on www.mulugu.com");
        tv.setSelected(true);
    }
    private void uiListener() {
        mPlay.setOnClickListener(this);
        mPlay.setOnClickListener(this);
        mPause.setOnClickListener(this);
        mPause.setVisibility(android.view.View.INVISIBLE);
        mBack.setOnClickListener(this);
        mFar.setOnClickListener(this);
    }

    private Thread myThread = new Thread() {
        public void run() {
            while (mMediaPlayer.getCurrentPosition() < mMediaPlayer
                    .getDuration()) {
                try {
                    myProgressBar
                            .setProgress(mMediaPlayer.getCurrentPosition());
                } catch (Throwable t) {
                }
            }
        }
    };

    @Override
    protected void onStart() {
        super.onStart();
        this.setProgressBarIndeterminateVisibility(true);
        try {
            if (boolFlag == false) {
                System.out.println(FinalConstants.URL + "mobile-audio/" + url+ ".mp3");
                mMediaPlayer = MediaPlayer.create(
                        this,
                        Uri.parse(FinalConstants.URL + "mobile-audio/" + url
                                + ".mp3"));
            }
            myProgressBar.setMax(mMediaPlayer.getDuration());
        } catch (Exception e) {
            Toast.makeText(getApplicationContext(), "Data not available",
                    Toast.LENGTH_SHORT).show();
            Log.e("ERRORS", "Data Not Exist in that Url...");
            super.onBackPressed();
            e.printStackTrace();
        }
    }

    @SuppressLint("NewApi")
    @Override
    public void onBackPressed() {
        super.onBackPressed();
        mMediaPlayer.stop();
        // myThread.stop();
        mNotificationManager.cancel(SIMPLE_NOTFICATION_ID);
        System.gc();
    }

    @Override
    protected void onDestroy() {
        adView.destroy();
        super.onDestroy();
        System.gc();
    }

    public PhoneStateListener phoneStateListener = new PhoneStateListener() {
        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            if (state == TelephonyManager.CALL_STATE_RINGING) {
                System.out.println("ringing state");
                if (mMediaPlayer != null) {
                    pauseMedia();
                    isPausedInCall = true;
                }
                notificationShow();
            }
            if (state == TelephonyManager.CALL_STATE_IDLE) {
                System.out.println("callState Idle");
                if (mMediaPlayer != null) {
                    if (isPausedInCall) {
                        isPausedInCall = false;
                        playMedia();
                    }
                }
            }
            if (state == TelephonyManager.CALL_STATE_OFFHOOK) {
            }
            super.onCallStateChanged(state, incomingNumber);
        }
    };

    private void pauseMedia() {
        mMediaPlayer.pause();
        changePlayerIcons(false);
    }

    private void playMedia() {
        mMediaPlayer.start();
        changePlayerIcons(true);
    }
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.play:
            if (!boolFlag) {
                try {
                    notificationShow();
                     mMediaPlayer.setLooping(false);
                     mMediaPlayer.prepareAsync();
                } catch (Exception e) {
                    Toast.makeText(this, "preparing", Toast.LENGTH_SHORT)
                            .show();
                }
                boolFlag = true;
                mMediaPlayer.start();
                myThread.start();
            } else {
                notificationShow();
                mMediaPlayer.getCurrentPosition();
                mMediaPlayer.start();
            }
            changePlayerIcons(true);
            myProgressBar.setProgress(mMediaPlayer.getCurrentPosition());
            mMediaPlayer.setOnCompletionListener(new OnCompletionListener() {
                @Override
                public void onCompletion(MediaPlayer arg0) {
                    changePlayerIcons(false);
                    myProgressBar.setProgress(0);
                    onStart();
                }
            });
            mMediaPlayer.setOnPreparedListener(new OnPreparedListener() {
                @Override
                public void onPrepared(MediaPlayer mp) {
                }
            });
            break;
        case R.id.pause:
            mMediaPlayer.pause();
            mPlay.setVisibility(android.view.View.VISIBLE);
            mPause.setVisibility(android.view.View.INVISIBLE);
            break;
        case R.id.back:
            int dur = mMediaPlayer.getCurrentPosition();
            int pos = (dur > 10000 ? dur - 5000 : 0);
            mMediaPlayer.seekTo(pos);
            break;
        case R.id.fwd:
            int curpos = mMediaPlayer.getCurrentPosition();
            int dur2 = mMediaPlayer.getDuration();
            int pos2 = (curpos + 5000 > dur2 ? dur2 : curpos + 5000);
            mMediaPlayer.seekTo(pos2);
            break;
        }
    }

    @SuppressWarnings("deprecation")
    private void notificationShow() {
        Context context = getApplicationContext();
        CharSequence contentTitle = "Mulugu Running";
        CharSequence contentText = url + " Weekly Predictions";

        Intent notifyIntent = new Intent(AudioView.this, AudioView.class);
        PendingIntent intent = PendingIntent.getActivity(AudioView.this, 0,
                notifyIntent, android.content.Intent.FLAG_ACTIVITY_CLEAR_TOP);
        notifyDetails.setLatestEventInfo(context, contentTitle, contentText,
                intent);
        mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails);
    }

    private void changePlayerIcons(boolean b) {
        if (b) {
            mPlay.setVisibility(android.view.View.INVISIBLE);
            mPause.setVisibility(android.view.View.VISIBLE);
        } else {
            mPlay.setVisibility(android.view.View.VISIBLE);
            mPause.setVisibility(android.view.View.INVISIBLE);
        }
    }

    /*public class LoginProgress extends AsyncTask<Void, Void, Void> {

        private ProgressDialog dialog;
        protected Context applicationContext;

        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            this.dialog.dismiss();
        }

        @Override
        protected void onPreExecute() {
            this.dialog = ProgressDialog.show(applicationContext, "Data Loading",
                    "Loading .....", true);
        }

        @Override
        protected Void doInBackground(Void... params) {
            LoadUrl();
            return null;
        }
        private void LoadUrl() {
            mMediaPlayer = new MediaPlayer();
            mMediaPlayer.reset();
            try {
                mMediaPlayer.setDataSource(AudioView.this,Uri.parse(FinalConstants.URL + "mobile-audio/" + getIntent().getType()+ ".mp3"));
                mMediaPlayer.setLooping(false); // Set looping
                mMediaPlayer.prepare();
                myProgressBar.setMax(mMediaPlayer.getDuration());
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }*/
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T16:37:56.683

如果您需要移动文本，也许这会有所帮助：

[http://developer.android.com/guide/topics/resources/animation-resource.html#translate-element](http://developer.android.com/guide/topics/resources/animation-resource.html#translate-element)

如果您有一个 TextView 的文本太大，并且您希望它四处移动以便人们可以阅读整个内容，请尝试`android:ellipsize="marquee"`在 .xml 文件或 Java 代码中： `textView.setEllipsize(TextUtils.TruncateAt.MARQUEE);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T07:07:31.973

如果 android 库不够用，您可以随时通过编码使用 java。创建一个线程类来获取视图并随时间改变条件。您可以创建一个意图来调用该类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T09:56:14.460

您可以使用**TextSwitcher**并在其上应用动画。

试试下面的代码：

```
public class TextSwitcherActivity extends Activity implements ViewSwitcher.ViewFactory,
    View.OnClickListener                    
  {
private TextSwitcher m_switcher;
private Button m_nextButton;
private int m_counter = 0;

@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    m_switcher = (TextSwitcher) findViewById(R.id.tsSwitcher);
    m_switcher.setFactory(this);

    Animation in = AnimationUtils.loadAnimation(this, android.R.anim.fade_in);
    Animation out = AnimationUtils.loadAnimation(this, android.R.anim.fade_out);
    m_switcher.setInAnimation(in);
    m_switcher.setOutAnimation(out);

    m_nextButton = (Button) findViewById(R.id.next);
    m_nextButton.setOnClickListener(this);
    updateCounter();
}

/**
 * Update counter value
 */
public void onClick(View v)
{
    m_counter++;
    updateCounter();
}

/**
 * Set text on textswitcher
 */
private void updateCounter()
{
    m_switcher.setText(String.valueOf(m_counter));
}

public View makeView()
{
    TextView t = new TextView(this);
    t.setGravity(Gravity.TOP | Gravity.CENTER_HORIZONTAL);
    t.setTextSize(36);
    return t;
} 
```

您可以定义自己的动画来获得选取框效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T13:50:41.103

这是示例

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TextView
    android:id="@+id/mywidget"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:lines="1"
    android:ellipsize="marquee"
    android:fadingEdge="horizontal"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:textColor="#ff4500"
    android:text="Simple application that shows how to use marquee, with a long text" /> 
```

在 java 中（如果您使用 Listview 并绑定适配器，则在 getview 中，当您膨胀 Layout 及其视图组件时，将所选标志设置为 true 到您的 TextView。）

```
tv = (TextView) this.findViewById(R.id.tv);  
    tv.setSelected(true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-28T15:39:15.990

通过使用以下方法，您可以将字符串值列表转换为单个字符串，

```
String listString = String.join(", ", list); 
```

这会将列表值转换为字符串，这样您就可以实现这一点。我知道这已经很晚了，但我发布了因为没有提供解决方案，这就是原因。

# c# - 如何在 C# 中使用窗口窗体创建动态下拉列表

> ID：13680283
> 
> 赞同：2
> 
> 时间：2012-12-03T09:24:06.053
> 
> 标签：c#, winforms, list, ms-access

我正在尝试为朋友的手机商店构建一个简单的库存程序，我想使用 C# 并访问数据库来存储数据

数据库将有 2 个主要列表：

1.  **设备**- 品牌、型号、颜色、价格、库存、min_stock
2.  **零件**- 品牌、型号、描述、库存、min_stock

GUI 将使用几个下拉列表品牌会给我：三星、HTC 等'.... 型号会给我：I9000、i9100 等...

当我尝试思考如何制作它时，我遇到的两个主要问题是：

*   每次出现新品牌和型号时，我都需要一个选项来将新型号/品牌添加到数据库中，然后更新下拉列表以自动拥有它们
*   下拉列表需要连接所以如果我选择品牌 A 只有品牌 A 模型会出现在模型下拉列表中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:31:11.433

首先：不要使用Access，使用SQL Server 2008 Express。但这只是个人口味。

你需要做什么来实现你想要的：在 Visual Studio 中创建一个类型化的数据集，其中包含一个品牌表和一个模型表。使用列上的关系关联两个表`brand`。

从数据库中读取两个表 - 首先是`brands`表，然后是`models`表。否则你会得到一个错误。

为两个列表创建主/详细信息绑定。为此，请将两个`BindingSource`实例拖放到您的表单中。将其中一个关联到“品牌”列表，将一个关联到“设备”列表。“brands”的数据源`BindingSource`必须设置为数据集中的`brands`表，另一个的数据源`BindingSource`必须设置为两个表之间的**关系。**所有这一切都可以在设计器中合而为一。

如果您在设置绑定时遇到问题，请在 Google 上搜索“C# 主从绑定数据集”。

**编辑**
另一个选项 - 如果数据库连接快速 - 将填充数据库中的品牌列表，并在选择品牌时，使用所选品牌名称从数据库中清除并重新填充模型列表。

# forms - 没有提交按钮验证 Magento 中的表单元素

> ID：13680284
> 
> 赞同：3
> 
> 时间：2012-12-03T09:24:10.157
> 
> 标签：forms, validation, magento

在提交表单之前添加多个步骤。喜欢：

注册页面：

*   第 1 步 - 输入名字、姓氏和电子邮件（单击下一步按钮验证并显示下一步）
*   第 2 步 - 输入密码和确认密码并提交

第 1 步和第 2 步是单独的 DIV（在下次单击时显示/隐藏）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T10:33:14.830

你可以试试这个 JS 片段：

```
var formToValidate = $('place the id of the form, that I want to validate');
var validator = new Validation(formToValidate);
if(validator.validate()) {
    /* The logic, that you want to execute if you pass the validation. */
    ......
    ......
} 
```

祝你好运！

# c++ - 抽象类成员变量

> ID：13680286
> 
> 赞同：0
> 
> 时间：2012-12-03T09:24:14.980
> 
> 标签：c++

我有一个抽象类 ，`CAbstract`并且希望在另一个类中拥有这种类型的成员，`CClass`。如果我让它成为一个指针，我将不得不自己处理删除，并且希望避免这种情况。

*   如果我把它作为参考，它会在`CClass`被删除时自动删除吗？
*   我可以把它做成一个`shared_ptr`吗？可以`shared_ptr`管理抽象类和指向派生类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:28:36.787

引用不会自动释放任何东西；`shared_ptr`做。只要您遵循 C++ 的规则，它就应该优雅地处理继承情况。更具体地说，由于默认情况下在引用计数降至零时`shared_ptr`调用 ' 的析构函数，因此您需要正确实现 ( ) 析构函数才能正常工作。`delete``virtual``shared_ptr`

# windows - 从 emacs 运行时，svn 版本控制身份验证失败

> ID：13680287
> 
> 赞同：4
> 
> 时间：2012-12-03T09:24:15.307
> 
> 标签：windows, svn, emacs, cygwin, basic-authentication

我在我的桌面[本机 Windows emacs 24.2 上使用配置为使用 cygwin bash](http://www.emacswiki.org/emacs/setup-cygwin.el)。

当我从 cygwin bash 运行 SVN 时，一切正常。它会记住我的授权凭据并连接到存储库。但是当我尝试从 emacs 中运行任何版本控制命令时，我总是会收到以下消息：

> svn：E170001：无法连接到 URL ' [https://address.to.repo](https://address.to.repo) ' svn：E170001：' [https://address.to.repo](https://address.to.repo) '的选项：授权失败：无法向服务器验证：**拒绝基本挑战**

我还尝试连接 PSVN 接口，但最终也出现相同的错误消息。奇怪的是，它与 cygwin 终端和 emacs 的工作方式不同。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T11:03:30.027

现在解决了。问题是 Emacs NT cygwin 集成仍然使用 windows HOME 路径而不是使用 cygwinized HOME 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T00:51:06.403

我认为完整的答案应该是这样的：

1.  SVN 依赖于 HOME 路径来查找每个用户的设置（与大多数 unix 程序一样）。
2.  在 cygwin 中，该变量具有类似“/home/pablo”的内容。
3.  "/home/pablo" 真的翻译成 "drive:\cygwin_dir\home\pablo"
4.  Emacs-nt 从 windows 环境中获取它的 HOME，因此它与 cygwin 的 HOME 不同
5.  emac 的 vc-svn 使用错误的路径来查找其设置。

所以有两种解决方案（也许更多）：

1.  让 emacs-nt 使用 cygwin 的 HOME（这就是 cygwin 化的意思！！:O），为此您需要 setup-cygwin，但特别需要一个依赖于 cygwin-mount 的脚本。所以emacs-nt可以理解cygwin的路径“风格”。
2.  （不推荐）反过来，这就是我所做的，使 cygwin 通过软 cygwin 链接使用窗口的 HOME。`ln -s /cygdrive/c/Users/pablo/Roaming/ /home/pablo`
3.  建立一个软链接，使 cygwin 的 subversion 目录指向 windows one`ln -s /cygdrive/c/users/pablo/AppData/Roaming/.subversion /home/pablo/.subversion`

第二种解决方案将导致 cygwin 的“.bashrc”未执行。所以那里定义的环境变量和别名不会被定义。我仍然认为可以做到，但我没有调整该解决方案所需的适当 cygwin 知识。所以现在我正在使用解决方案 3。

# actionscript-3 - 为什么 sprite graphics.drawRect 不能正常工作？

> ID：13680290
> 
> 赞同：0
> 
> 时间：2012-12-03T09:24:25.437
> 
> 标签：actionscript-3, flash

考虑下面的代码：

```
 package 
                {

                import flash.display.Sprite;
                import flash.display.BitmapData;
                import flash.display.Bitmap;
                import flash.events.Event; 

                public class SampleBitmap extends Sprite
                {
                public function SampleBitmap() {
                //生成两个BitmapData对象dataA, dataB
                //dataA是100×100的深绿色矩形
                var dataA:BitmapData = new BitmapData(100,100,true, 0xff669900);
                //dataB是100×100的橙黄色矩形
                var dataB:BitmapData = new BitmapData(100,100,true, 0xffFF9900);
                //分别生成三个位图显示对象
                var bitmapA:Bitmap = new Bitmap(dataA); 
                var bitmapB:Bitmap = new Bitmap(dataB);
                var bitmapC:Bitmap = new Bitmap(dataB.clone()); //将dataB复制了一份
                bitmapA.bitmapData = dataB; 
                //bitmapA:将dataB替换了dataA，此时bitmapA和bitmapB持有的都是dataB
                bitmapB.x = 200;
                bitmapC.x = 400;
                bitmapA.x = 500;
                bitmapA.y = 500;
                //加入显示列表 
                addChild(bitmapA); 
                addChild(bitmapB); 
                addChild(bitmapC); 

                trace(stage.width);
                //改变dataB的像素信息，把它中心20×20的像素都改成了红色 
                for (var i:int = 40; i<60; i++) {
                for (var j:int = 40; j<60; j++) {
                dataB.setPixel(i,j,0xFF0000);
                }
                } 
                trace(this.width);  //the output is 600
                trace(this.height);//the output is 600
                this.graphics.beginFill(0x00ff00);
                this.graphics.drawRect(0,0,this.width,this.height); //trace了一下,this.width,this.height都为600px
                this.graphics.endFill();
                }
                }
                } 
```

结果是： ![在此处输入图像描述](../Images/ce65522dfa9e79c88a416417f0725238.png)

并且：我的问题是：为什么绿色不覆盖所有三个黄色矩形？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:37:18.883

问题出在这一行：

```
this.graphics.drawRect(0,0,this.width,this.height) 
```

这里，**这**实际上是指容器（SampleBitmap 类的实例），其宽度由您添加到其中的三个框确定。

您可能正在寻找的（假设您希望覆盖整个舞台）是：

```
this.graphics.drawRect(0,0,stage.stageWidth,stage.stageHeight) 
```

![在此处输入图像描述](../Images/fc30c61f65b903313ed9660c61743828.png)

* * *

**编辑**

刚刚编译了您的代码和您的声明：

```
 trace(this.width);  //the output is 600
            trace(this.height); //the output is 600 
```

是假的，因为输出是 400 & 600

# java - 如何为按钮单击事件声明通用监听器？

> ID：13680291
> 
> 赞同：-1
> 
> 时间：2012-12-03T09:24:25.277
> 
> 标签：java, android

在为所有按钮单击事件的通用方法编码的android应用程序中，这里是代码，

```
public void onCreate(Bundle  savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.filter);
        btnOne = (Button)findViewById(R.id.btnone);
        btnTwo = (Button)findViewById(R.id.btntwo);
        btnThree = (Button)findViewById(R.id.btnthree);
        btnFour = (Button)findViewById(R.id.btnfour);
        btnFive = (Button)findViewById(R.id.btnfive);
        btnSix = (Button)findViewById(R.id.btnsix);
        btnSeven = (Button)findViewById(R.id.btnseven);
        btnEight = (Button)findViewById(R.id.btneight);
        btnNine = (Button)findViewById(R.id.btnnine);
        btnTen = (Button)findViewById(R.id.btnten);

    OnClickListener listener = new OnClickListener()
    {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            doAction(v);
        }

    };

}

public void doAction(View v)
    {
        Object tagObject = v.getTag();
        int tag = (Integer) v.getTag();
        String val = (String) d.get(tag);
        if(val.equals("off"))
        {
            //select(tagObject);
            //d.put(tag, "on");

        Toast.makeText(getBaseContext(), "Button"+tag+"select", Toast.LENGTH_LONG).show();
    }
    else if(val.equals("on"))
    {
        //unSelect(tagObject);
        //d.put(tag, "off");
        Toast.makeText(getBaseContext(), "Button"+tag+"unselect", Toast.LENGTH_LONG).show();
    }   
} 
```

这段代码对我不起作用。请给出任何想法.......在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:28:08.923

先声明你的听众然后调用`setOnClickListener`你的观点怎么样：

```
OnClickListener listener = new OnClickListener()
{

    public void onClick(View v) {
        // TODO Auto-generated method stub
        doAction(v);
    }

};
btnOne.setOnClickListener(listener);
btnTwo.setOnClickListener(listener);
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:28:34.540

您已经声明了侦听器，但您忘记为每个按钮设置侦听器。对所有按钮执行此操作：`btnOne.setOnClickListener(listener);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:28:24.400

您需要在按钮中设置监听器..

```
public void onCreate(Bundle  savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.filter);
    ...

OnClickListener listener = new OnClickListener()
{

    public void onClick(View v) {
        // TODO Auto-generated method stub
        doAction(v);
    }

};

btnOne.setOnClickListener();
btnTwo = (Button)findViewById(R.id.btntwo);
    ...

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:28:52.043

让你的班级实现`View.OnClickListener`，比如

```
public class MyActivity extends Activity implements View.OnClickListener {

    Button button1, button2, button3;

    @Override
    public void onCreate(Bundle bundle) {
        super.onCreate();

        ...

        button1 = (Button) findViewById(R.id.button1);
        button2 = (Button) findViewById(R.id.button2);
        button3 = (Button) findViewById(R.id.button3);

        button1.setOnClickListener(this);
        button2.setOnClickListener(this);
        button3.setOnClickListener(this);
   }

   @Override
   public void onClick(View v) {
       switch(v.getId()) {
           case R.id.button1:
           // do stuff;
           break;
           case R.id.button2:
           // do stuff;
           break;
       ...
   }
} 
```

# pdf - 将矢量 PDF 转换为与 myscript 兼容的 svg

> ID：13680292
> 
> 赞同：4
> 
> 时间：2012-12-03T09:24:26.323
> 
> 标签：pdf, svg

我经常做手写笔记，但无法在里面搜索。我遇到了 myscript studio，我的生活变得更轻松了。软件。但是，当我想用​​ iPhone 而不是数字笔做笔记时，问题就开始了。幸运的是，iPhone 应用程序（Neu.Notes+、Fas​​tFinga、HandyNotes 等）将这些手写笔记导出为包含矢量数据的 PDF。

我用谷歌搜索，但找不到任何有用的工具来将这些类型的 PDF 文件转换为 myscript 兼容的 svg 或其他文件，以便搜索手写文本功能。然后，我决定编写基于 Graham I Cummins 的小 Python 脚本，将矢量 PDF 转换为 svg。有更好的解决方案吗？

我的脚本可从[https://rapidshare.com/files/1754666267/Pdf2Svg.rar](https://rapidshare.com/files/1754666267/Pdf2Svg.rar)

# php - 如何使用 htaccess 文件在 php 中重写 URL。php代码有什么变化

> ID：13680295
> 
> 赞同：2
> 
> 时间：2012-12-03T09:24:35.413
> 
> 标签：php, .htaccess, mod-rewrite

我是 .htaccess 文件的新手。我在网上搜索，但我无法在 PHP 中更改和重写 URL...EG

显示网址喜欢：

> 本地主机/网站/站点/view_project.php?vp=14

我想显示我的网址

> 本地主机/网站/站点/项目/14/

在 php 中使用此代码

```
href="view_project.php?vp=<?php echo $c_id>" echo $c_project_title 
```

在我正在使用的 .htaccess 文件中

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^project/([0-9]+)/?$ /view_project.php?vp=1& [L,R] 
```

现在请告诉 PHP 代码和 HTACCESS 文件中需要更改的内容......我对此完全陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:39:06.027

将您的 PHP 代码更改为：

```
href="project/<?php echo $c_id>" echo $c_project_title 
```

然后通过启用 mod_rewrite 和 .htaccess`httpd.conf`然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^project/([0-9]+)/?$ /view_project.php?vp=$1 [L,QSA,NC] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T09:32:33.507

您需要使用 $1 而不是现在的 1，更多信息请参见此处：[https ://serverfault.com/questions/389684/how-can-i-store-request-uri-in-a-variable-manipulate -it-and-then-use-in](https://serverfault.com/questions/389684/how-can-i-store-request-uri-in-a-variable-manipulate-it-and-then-use-it-in)

# javascript - 如何正确做JS条件？

> ID：13680296
> 
> 赞同：-2
> 
> 时间：2012-12-03T09:24:38.100
> 
> 标签：javascript, jquery

我运行这个 jQuery (1.8.3) 代码，即使长度大于 1，也总是会收到“in”警报。

我正在做的是动态地将元素添加到菜单中，if 是为了确保该元素尚不存在。

我也试过`== 0`，`=== 0`但结果是一样的......

这是一个 JS 小提琴：http: [//jsfiddle.net/mHhwq/4/](http://jsfiddle.net/mHhwq/4/)

```
$(".sidebarit a.olink").click(function(event){
   iframe_url = $(this).attr("href");
   sidebar_id = '#' + iframe_url.replace(/[/.]/g, '');
   alert('sidebar_id: ' + sidebar_id);

   // create the sidebar if it doesn't exist
   if ($(sidebar_id).length < 1) {
      alert("in");
      $("#sidebar_nav ul").append('<li></li>');
      $("#sidebar_content").append('<div id="' + sidebar_id + '" style="display:none;"></div></div>');
   } else { alert("out"); }

   // don't follow the link
   event.preventDefault();
}); 
```

在 FireBug 中，我看到长度等于 1，但仍进入块。

我究竟做错了什么？

**更新：**

我的错误是我`#`在错误的地方添加了...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:40:07.373

您不能有多个具有相同 ID 的元素。在这种情况下，jQuery 只取第一个。

为了证明这有这样的HTML：

```
<div id="mydiv">hello</div>
<div id="mydiv">world</div> 
```

然后这段代码：

```
var myDiv = $("#mydiv");
alert("length: " + myDiv.length + ", contents: " + myDiv.html());​ 
```

[测试用例](http://jsfiddle.net/RPShg/)。

如果您有多个元素需要迭代，请改用 class，或者确保每个侧边栏都有唯一的 ID，并采用最接近单击元素的 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T09:43:31.340

尝试将 alert放入`if stmt`.`alert($(sidebar_id).length)`

`div`而且您在附加to 时犯了一个错误`$("#sidebar_content")`。

来自哪里`sidebar_id`的东西，你正在像那里一样附加，它应该在哪里（ id不需要符号）。`#test``sidebar_id = '#' + iframe_url.replace(/[/.]/g, '');``<div id= "#test"``<div id= "test"``#`

您的代码将产生如下结果

```
$("#sidebar_content").append('<div id="#test" style="display:none;"></div></div>'); 
```

改成

```
$("#sidebar_content").append('<div id="test" style="display:none;"></div></div>'); 
```

然后再试一次。

# java - JDBC SQL 服务器异常

> ID：13680297
> 
> 赞同：1
> 
> 时间：2012-12-03T09:24:42.810
> 
> 标签：java, sql-server, jdbc, classpath

我正在尝试连接 Java 程序，`MS SQL SERVER 2012`但 Java 抛出`exception: java.lang.ClassNotFoundException`.

我知道这个问题通常是因为`CLASSPATH`没有为驱动程序正确设置。我已经按照[Oracle](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/classpath.html)的指示添加了一个`CLASSPATH`，但我仍然遇到同样的异常。当我输入`“echo %CLASSPATH%"`命令提示符时，我得到了正确的响应。我错过了什么？

代码：

```
import java.sql.*;
public class JDBCTest {
    public static void main(String[ ] args) throws SQLException {
        try {
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver"); 
        } catch(Exception e) { 
            System.out.println("Can't find database driver: " + e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:34:47.837

您的应用程序的运行时环境可能不包含适当的 jar 文件。您检查的路径仅适用于您的控制台环境。应用程序类路径与此不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:38:26.717

试试这个

```
 public class connectURL {

        public static void main(String[] args) {

            // Create a variable for the connection string.
String  Connectionurl="jdbc:sqlserver://localhost:1433;DatabaseName=YourDBName;user=UserName;Password=YourPassword"

            // Declare the JDBC objects.
            Connection con = null;
            Statement stmt = null;
            ResultSet rs = null;

                try {
                    // Establish the connection.
                    Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
                        con = DriverManager.getConnection(connectionUrl);

                        String SQL = "";
                        stmt = con.createStatement();
                        rs = stmt.executeQuery(SQL);

                        while (rs.next()) {
                            ....
                        }
                }

            catch (Exception e) {
                e.printStackTrace();
            }

            finally {
                if (rs != null) try { rs.close(); } catch(Exception e) {}
                    if (stmt != null) try { stmt.close(); } catch(Exception e) {}
                    if (con != null) try { con.close(); } catch(Exception e) {}
            }
        }
    } 
```

确保下载驱动程序 jar 文件并将其放在正确的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:04:41.153

如果 Class.forName 失败，则是类路径的问题。

试试这个代码来检查你的类路径：

```
 String classPath = System.getProperty("java.class.path");
    String userDir = System.getProperty("user.dir");
    System.out.println("Working Directory:");
    System.out.println("\t"+userDir);
    System.out.println("Classpath:");
    String[] paths = classPath.split(";");
    for (String path : paths) {
        File pathFile = new File(path);
        String check = pathFile.exists()?"OK        ":"NOT-FOUND ";
        System.out.println("\t"+check+path);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T10:06:00.233

首先`sqljdbc4.jar`从下载[`here`](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)

把它`.jar`放在你的`/WEB-INF/lib`文件夹中。（如果没有，请检查此文件是否出现在您的 Eclipse 库中，然后刷新您的项目）![在此处输入图像描述](../Images/7f81f44fe3e92304452c9ec71203a655.png)

然后运行你的项目。

# cpu-registers - 基于寄存器+堆栈的虚拟机如何工作？

> ID：13680300
> 
> 赞同：6
> 
> 时间：2012-12-03T09:24:47.730
> 
> 标签：cpu-registers, register-allocation, vm-implementation, ssa, stack-based

我知道基于寄存器以及基于堆栈的虚拟机如何独立工作。我知道两者的优点和缺点。我想知道的是有没有人尝试过将两者合并？

我试图在网上搜索是否存在这样的虚拟机，但无济于事。我得到的最好结果是一篇关于混合虚拟机 ( [HyVM](http://www.cercs.gatech.edu/projects/HyVM/ "HyVM：混合虚拟机") ) 的文章。如果确实为编程语言创建了这样的虚拟机，我将有兴趣查看它的源代码以了解它的工作原理。

也许有人可以指出我找到这样一个虚拟机的正确方向，或者将我链接到详细阐述该主题的文章或博客文章。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T08:17:26.150

看看[Forth](http://en.wikipedia.org/wiki/Forth_%28programming_language%29)。它使用虚拟机，主要面向堆栈，但几乎可以按照您建议的方式存储值。

此外，VM 非常小，因此很容易探索和移植。

# ios - iOS 自动布局：相等的空间以适应超级视图的宽度

> ID：13680303
> 
> 赞同：12
> 
> 时间：2012-12-03T09:25:19.517
> 
> 标签：ios, cocoa-touch, autolayout

> **可能的重复：**
> [自动布局甚至间距](https://stackoverflow.com/questions/13075415/autolayout-even-spacing)

我正在尝试创建一个带有按钮的可滚动条（类似于 a `UISegmentedControl`）。超级视图是一个`UIScrollView`. 一旦按钮不适合滚动视图，滚动视图应该是可滚动的。到目前为止，几乎一切正常：

有很多按钮（向右滚动）：

![滚动视图](../Images/58eb2dbb0e716d0514a69531716f63ea.png)

没有那么多按钮：

![视图不滚动](../Images/f65fd47566e1f9a75b6304480f8d7caf.png)

现在，我的目标是，如果所有按钮都有空间，它们应该均匀分布在整个 320px 视图中。**如何为按钮之间的空间定义约束？**

现在，我正在使用以下约束（ self 是 a `UIScrollView`）：

```
UIView *firstButton = self.buttons[0];

[self.buttonConstraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"|-(5)-[firstButton]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(firstButton)]];

UIView *lastButton = [self.buttons lastObject];

[self.buttonConstraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"[lastButton]-(5)-|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(lastButton)]];

UIView *previousView = nil;

for (UIView *view in self.buttons) {
    if (previousView) {
        [self.buttonConstraints addObjectsFromArray:[NSLayoutConstraint constraintsWithVisualFormat:@"[previousView]-(5)-[view]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(previousView, view)]];
    }
    previousView = view;
} 
```

如果我将 superview 的类型从更改`UIScrollView`为 an `UIView`，我会得到以下结果，但仍然不是我想要的，但至少它会查找将其绑定到右边缘的最后一个按钮的约束（有道理，这不会滚动视图不会发生，因为内容大小是自动设置的）：

![UIView 作为父视图](../Images/db7682ce2868d202f9fd134acce3961b.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-16T19:31:14.167

```
- (void) viewWillLayoutSubviews {
    // UIButton *button1, *button2, *button3, *button 4 ;
    // NSMutableArray *constraintsForButtons ;

    float unusedHorizontalSpace = self.view.bounds.size.width - button1.intrinsicContentSize.width - button2.intrinsicContentSize.width - button3.intrinsicContentSize.width - button4.intrinsicContentSize.width ;
    NSNumber* spaceBetweenEachButton=  [NSNumber numberWithFloat: unusedHorizontalSpace / 5 ] ;

    [self.view removeConstraints:constraintsForButtons] ;
    [constraintsForButtons removeAllObjects] ;
    [constraintsForButtons addObjectsFromArray: [NSLayoutConstraint constraintsWithVisualFormat: @"H:|-(space)-[button1]-(space)-[button2]-(space)-[button3]-(space)-[button4]-(space)-|"
                                                                                        options: NSLayoutFormatAlignAllCenterY
                                                                                        metrics: @{@"space":spaceBetweenEachButton}
                                                                                          views: NSDictionaryOfVariableBindings(button1,button2,button3,button4) ] ] ;
    [constraintsForButtons addObjectsFromArray: [NSLayoutConstraint constraintsWithVisualFormat: @"V:|[button1]"
                                                                                        options: 0
                                                                                        metrics: nil
                                                                                          views: NSDictionaryOfVariableBindings(button1) ] ] ;
    [self.view addConstraints:constraintsForButtons] ;
} 
```

这不像你的那么漂亮，它假设有 4 个按钮，但它们的间距相等。也就是说，按钮之间的空白空间都具有相同的宽度。这并不意味着 button1 和 button2 的 NSLayoutAttributeLeading 之间的距离与 button2 和 button3 之间的距离相同。

![肖像](../Images/6bd0871cfa4cee027302c5afd8bf8a52.png) ![景观](../Images/51ee28541c82c0a6fb4a2cbeed123e27.png)

# ruby-on-rails-3 - ruby on rails 中的分页

> ID：13680304
> 
> 赞同：0
> 
> 时间：2012-12-03T09:25:24.340
> 
> 标签：ruby-on-rails-3, kaminari

我有一个任务要做分页。当我做分页时，我遇到了这些错误

```
NoMethodError in ProductsController#index

undefined method `page' for []:ActiveRecord::Relation

Rails.root: /home/nithinv/store
Application Trace | Framework Trace | Full Trace

app/controllers/products_controller.rb:4:in `index' 
```

这是我的控制器

```
 def index

       @products = Product.order(:name).page(params[:page]).per(2)

      respond_to do |format|
        format.html  #index.html.erb
        format.json { render :json=> @products }
      end
     end 
```

这是我的 index.html.erb

```
 <% title "Products" %>

<%= paginate @products %>

<% for product in @products %>
  <div class="product">
    <h2><%= link_to product.name, product %></h2>
    <div class="details">
      <%= number_to_currency(product.price) %> |
      Released <%= product.released_at.strftime("%B %e, %Y") %>
    </div>
  </div>
<% end %>

<p><%= link_to "New Product", new_product_path %></p> 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:40:13.627

参考[这个](https://github.com/amatsuda/kaminari)

我想你忘了在你的`gemfile`

```
gem 'kaminari' 
```

然后捆绑安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:58:24.000

我看起来问题与 kaminari gem 配置（不是你的代码）有关。我建议你做这个快速检查：

1.  跑`bundle install`
2.  重新启动服务器（因为更改可能尚未加载）
3.  检查您的 gemfile，因为 kaminari gem 可能放错了位置（在 :test 组下）

有点明显，但有时我也发现自己在忘记一些基本检查后浪费了时间。

# uinavigationbar - UITableView 部分标题在导航栏下爬行

> ID：13680314
> 
> 赞同：7
> 
> 时间：2012-12-03T09:26:15.243
> 
> 标签：uinavigationbar, uitableview, translucency, sectionheader

由于导航栏样式是半透明的，我将第一个部分标题（第 0 部分）隐藏在导航栏下。

我知道以前有人问过这个问题，解决方法是：

```
 self.navController.navigationBar.translucent = YES; 
```

这使有问题的视图正确 - 部分标题出现在导航栏下方而不是隐藏在它后面，这就是我想要的。

但是，这会使我的其他视图设计无效，并在所有这些视图中留下额外的空间，就在我的导航栏下方。

如何在正确的位置获取节标题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T04:54:33.490

Resolved:

*   Open storyboard file
*   select UITableView
*   Under attribute inspector -> Scroll view size -> Content insets, set Top = 44 (or whichever is your nav bar height).

See image below - it is under size section:

![enter image description here](../Images/df04207cf1467c0f1bb15e2bd20994bf.png)

[And here is](https://stackoverflow.com/questions/1543875/top-margin-on-uitableviewcontroller) how to fix it programmatically.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-04-15T20:55:44.357

在使用 SVPullToRefresh 时解决这个问题。我创建了下面的方法并代替 [self.tableView.pullToRefreshView stopAnimating];

```
-(void)stopPullToRefreshAnimation
{
    [self.tableView.pullToRefreshView stopAnimating]; // call to stop animation

    UIEdgeInsets inset = UIEdgeInsetsMake(44, 0, 0, 0);
    self.tableView.contentInset = inset;
    self.tableView.scrollIndicatorInsets = inset;
} //stopPullToRefreshAnimation 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-05T12:00:43.710

对于在使用 (SVPullToRefresh) 时遇到此问题的其他人。

它可以通过将 UIScrollView+SVPullToRefresh.m 中的 view.originalTopInset 更改为您希望标题开始的任何点来解决。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-16T03:34:33.597

最简单的解决方案：

```
tableView.tableHeaderView = UIView() 
```

# c# - 类型转换类

> ID：13680318
> 
> 赞同：1
> 
> 时间：2012-12-03T09:26:33.667
> 
> 标签：c#, class, casting

我在不同的命名空间中有两个类，我需要进行类型转换。

如何在另一个类中键入一个类的转换对象。这两个类具有相同的方法和属性。

反射会起作用吗？任何类的类型转换示例都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:31:36.160

您不能直接从一种类型转换为另一种类型，您可以执行以下操作：

1.  手动映射
2.  使用反射自动映射（因为属性名称相同）
3.  使用[自动映射器](http://automapper.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:31:36.460

除非它们以某种方式相关，否则您不能转换它们，例如，一个是另一个的基础。

您可以通过许多不同的方式从一个映射到另一个，一种是使用映射器，AutoMapper 是一个众所周知的

[https://github.com/AutoMapper/AutoMapper](https://github.com/AutoMapper/AutoMapper)

这将根据类成员名称从一个映射到另一个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:32:06.750

如果类不以*任何*方式相关，另一种解决方案（零件形式*映射*）可以使用. 事件如果这太危险了，但可以被视为可能的选项之一：*`dynamic`*

 *```
namepsace A {
    public class NotRelatedA() {
       public void Run() {}
    }
}

namepsace B {
    public class NotRelatedB() {
       public void Run() {}
    }
}

dynamic dyn = new A.NotRelatedA();
dyn.Run(); //Run A

dyn = new B.NotRelatedB();
dyn.Run(); //Run B, without changing and mapping anything 
```

重复一遍，这有点危险，当你离开安全的静态类型世界时，会跳入动态强大的混乱中，所以如果你使用它，请谨慎使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:49:59.690

这些类有多少属性？他们是“手写”类吗？

也许您不需要两个类并且可以删除其中一个并在任何地方使用另一个？

也许其中一个类可以从另一个派生？然后您只需要在基类中编写通用属性和方法。

如果您需要两个不同的类，并且都不从另一个派生（这是一个 msut 允许“普通”强制转换（参考转换强制转换）的情况），您有几个选择：

1.  为其中一个类编写一个构造函数重载，该类将另一个类的实例作为参数，或者
2.  编写一个静态方法，将一个类的实例“翻译”为另一种类型的新对象，或者
3.  你可以写一个`public static explicit operator ClassOne(ClassTwo ct)`做“翻译”的。这样，就可以使用标准的强制转换语法（即 say `(ClassOne)variable`），或者
4.  正如其他人所建议的那样，您可以使用映射工具，或者编写自己的反射代码来查找“看起来相似”的属性，并在它们之间进行转换。*

# c++ - 在 GMock Wrap 函数中设置值时内存损坏

> ID：13680320
> 
> 赞同：0
> 
> 时间：2012-12-03T09:26:38.987
> 
> 标签：c++, googletest, gmock

我有一个要求，我需要使用 GTest/GMock 模拟一个非虚拟函数。因此，我已经包装了该函数并将其链接到测试套件“tst_def”文件中。对于包装函数，一个整数通过引用传递，当我将包装函数内的任何值设置为该整数时，测试套件在执行期间“因内存损坏而崩溃”（分段错误）。

重要观察：
当我在包装函数中为该整数设置与创建期间分配的相同默认值时，不会发生此崩溃，但仅当我分配任何其他值时才会崩溃。

*编辑*：

考虑一下，传递给这个包装函数的 value1 的初始值为 0。

```
extern "C" {
int __wrap_function(int &value1)
{
    value1 = 3; //crashes
    value1 = 0; //didnt crash
    return 0;
}
} 
```

# java - 如何将 grails 中的 png/gif/jpg 转换为 jpg 以保持图像的高质量？

> ID：13680324
> 
> 赞同：1
> 
> 时间：2012-12-03T09:27:10.677
> 
> 标签：java, grails, image-processing, jpeg, image-resizing

我使用以下方法将图像转换为 jpg。我的解决方案的问题是它会大大降低质量。

在减小文件大小的同时保持图像质量的好方法是什么？

```
def convertToJpg(currentImage) {
    try {
         InputStream inStreamCrop = new ByteArrayInputStream(currentImage)
         BufferedImage bufferedImage = ImageIO.read(inStreamCrop)

         // create a blank, RGB, same width and height, and a white background
         BufferedImage newBufferedImage = new BufferedImage(bufferedImage.getWidth(),
               bufferedImage.getHeight(), BufferedImage.TYPE_INT_RGB);
         newBufferedImage.createGraphics().drawImage(bufferedImage, 0, 0, Color.WHITE, null);

         ByteArrayOutputStream baos=new ByteArrayOutputStream()
         // write to jpeg file
         ImageIO.write(newBufferedImage, "jpg", baos);
         baos.flush()
         def image = baos.toByteArray()
         baos.close()
         return image

    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:15:35.227

您可以通过获取[`ImageWriter`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/ImageWriter.html)对象并通过参数设置来控制JPEG的质量。例如：

```
import javax.imageio.stream.*
import javax.imageio.*

BufferedImage bufferedImage = ImageIO.read(new File("test.png"));
float quality = 0.9;
ImageWriter writer = ImageIO.getImageWritersByFormatName("jpg").next();
ImageWriteParam param = writer.getDefaultWriteParam();
param.setCompressionMode(ImageWriteParam.MODE_EXPLICIT);
param.setCompressionQuality(quality);
writer.setOutput(new FileImageOutputStream(new File("test.jpg")));
writer.write(null, new IIOImage(bufferedImage, null, null), param); 
```

质量参数的范围可以在 0 和 1 之间，其中 1 具有最小的压缩。尝试不同的值；我发现 0.9 是低压缩（但文件很大）的不错选择。

请注意，OpenJDK 不支持 JPEG 图像：[ImageIO not able to write a JPEG file](https://stackoverflow.com/questions/3432388/imageio-not-able-to-write-a-jpeg-file)

# jquery - 如何为多个 div id 绑定单个功能

> ID：13680327
> 
> 赞同：1
> 
> 时间：2012-12-03T09:27:24.030
> 
> 标签：jquery, css

我想对大量列表使用工具提示

我为每个 div 编写了一个 jquery，但我不知道为多个 div 项绑定一个功能

这是链接 [http://masterssoftware.in/tool_tip2.html](http://masterssoftware.in/tool_tip2.html) 和下面提到的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js" type="text/javascript"></script>
<script>
$(document).ready(function(){
    $("#a1_down").hover(function(){
        $("#tip1_down").toggle();
        });

    $("#a2_down").hover(function(){
        $("#tip2_down").toggle();
        }); 

        $("#a3_down").hover(function(){
        $("#tip3_down").toggle();
        }); 

    });

</script>
<style>
body{ background:#690;}
.tip{ width:500px; height:100px; padding:10px; background:#CFF; display:none; overflow:hidden; border-radius:5px 5px 5px 5px; z-index:200; position:absolute;}
.tip h4{ display:block; font-size:18px; text-transform:uppercase;}
.tip p{ font-size:14px;}
</style>
</head>

<body>
<ul>
   <li><a id="a1_down" href="#">aaaaaaaaaaa</a></li>
<div id="tip1_down" class="tip"> <h4>content of aaaaaaaa aaaaaaaaaaaaaa </h4>
 <p>content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa</p>
</div>

<li><a id="a2_down" href="#">aaaaaaaaaaa</a></li>
<div id="tip2_down" class="tip"> <h4>content of aaaaaaaa aaaaaaaaaaaaaa </h4>
 <p>content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa</p>
</div>
<li><a id="a3_down" href="#">aaaaaaaaaaa</a></li>
<div id="tip3_down" class="tip"> <h4>content of aaaaaaaa aaaaaaaaaaaaaa </h4>
 <p>content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa content of aaaaaaaa aaaaaaaaaaaaaa</p>
</div>
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:30:49.673

除了使用 ID，您还可以使用`parent`and`next`方法：

```
$(document).ready(function(){
    $("ul li a").hover(function(){
        $(this).parent().next().toggle()
    });
}); 
```

或使用类：

```
$(document).ready(function(){
    $("ul a.classname").hover(function(){
        $(this).parent().next('.tip').toggle()
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:31:56.397

使用一个类并将其放在每个 div 上

```
$(document).ready(function(){
  $(".toolTip").hover(function(){
    $(this).toggle();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:29:55.757

给锚点一个类并在选择器中使用它，或者定位选择器中的所有锚点，如下所示：

```
 $("ul li a").hover(function(){

    $(this).parent().find('.tip').toggle();

 }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:30:08.137

1.  选择所有 以 结尾的`a` 标签。`id``_down`
2.  将函数应用于从id`tip`获取的 + 索引。`a`

```
$("a[id$='_down']").hover(function(){
    $("#tip" + $(this).prop('id')[1] + "_down").toggle(); // modify it if more than 10 indexes exist
}); 
```

# yql - YQL 控制台工作不一致

> ID：13680330
> 
> 赞同：4
> 
> 时间：2012-12-03T09:27:43.110
> 
> 标签：yql, finance

我正在尝试制作一个金融应用程序，目前它可以提取股票报价。我的问题详细如下：

1.  在开发者控制台（http://developer.yahoo.com/yql/console/）上，我将点击右侧“数据表”下的“显示社区表”
2.  我为我的 YQL 语句输入 'select * from yahoo.finance.quotes where symbol="YHOO" '
3.  我单击 JSON 单选按钮
4.  我删除“cbfunc”并取消选中诊断复选框
5.  我单击“测试”，我想出现的内容出现：{“查询”：{“计数”：1，“创建”：“2012-12-03T09：11：12Z”，“语言”：“en-US” , "results": { "quote": { "symbol": "YHOO", "Ask": null, ... 等等
6.  在“其余查询”下，[它给了我一个链接，我可以用它来访问显示的内容](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.quotes%20where%20symbol=%22YHOO%22&format=json&env=store://datatables.org/alltableswithkeys)。我的程序调用的那个链接不起作用。相反，它会显示`{"query":{"count":0,"created":"2012-12-03T09:12:44Z","lang":"en-US","results":null}}`，但并非总是如此 - 有时它会起作用，有时它不会。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T00:47:32.897

您可能遇到了速率限制问题。

我将启用“诊断”选项 - 这将包括 YQL 调用的输出详细信息以及是否有任何返回的数据。这是您的示例查询的 YQL 控制台链接，启用了诊断：

[`select * from yahoo.finance.quotes where symbol="YHOO"`](http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20yahoo.finance.quotes%20where%20symbol%3D%22YHOO%22&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys)

# java - 在 Android 中创建自定义 ListView 时出现 UnsupportedOperationException

> ID：13680333
> 
> 赞同：2
> 
> 时间：2012-12-03T09:28:08.923
> 
> 标签：java, android, android-layout

我想要一个自定义的 listView 所以我这样做了：

创建了一个活动：

```
public class PRS_MainList_Act extends ListActivity {
    MainListAdapter mladp;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_prs__main_list_);
        ArrayList<MainMenuItem> menuItems = new ArrayList<MainMenuItem>();
        menuItems.add(new MainMenuItem(getResources().getString(R.string.main_list_connectivity), getResources().getString(R.string.main_list_connectivityDesc)));
        this.mladp = new MainListAdapter(this, R.layout.man_list_item, R.id.textView1, menuItems);
        setListAdapter(mladp);

    }
} 
```

为菜单项创建一个类：

```
public class MainMenuItem {

    private String itemText;
    private String itemDescription;
    private String itemIMG;
    private int itemWeight;
    private String itemAssociatedActivity;

    public MainMenuItem(String itemText, String itemDescription) {
        this.itemText = itemText;
        this.itemDescription = itemDescription;
    }

    public String getItemText() {
        return itemText;
    }
    public void setItemText(String itemText) {
        this.itemText = itemText;
    }
    public String getItemIMG() {
        return itemIMG;
    }
    public void setItemIMG(String itemIMG) {
        this.itemIMG = itemIMG;
    }
    public int getItemWeight() {
        return itemWeight;
    }
    public void setItemWeight(int itemWeight) {
        this.itemWeight = itemWeight;
    }
    public String getItemAssociatedActivity() {
        return itemAssociatedActivity;
    }
    public void setItemAssociatedActivity(String itemAssociatedActivity) {
        this.itemAssociatedActivity = itemAssociatedActivity;
    }

    public String getItemDescription() {
        return itemDescription;
    }

    public void setItemDescription(String itemDescription) {
        this.itemDescription = itemDescription;
    }

} 
```

自定义阵列适配器：

```
public class MainListAdapter extends ArrayAdapter<MainMenuItem> {

    ArrayList<MainMenuItem> menuItems;

    public MainListAdapter(Context context, int resource,
            int textViewResourceId, ArrayList<MainMenuItem> menuItems) {
        super(context, resource, textViewResourceId, menuItems);
        this.menuItems = menuItems;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        if (convertView == null) {
            LayoutInflater vi = (LayoutInflater) getContext().getSystemService(
                    Context.LAYOUT_INFLATER_SERVICE);
            view = vi.inflate(R.layout.man_list_item, parent);
        }
        MainMenuItem it = menuItems.get(position);
        if (it != null) {
            TextView titleTV = (TextView) view.findViewById(R.id.textView1);
            TextView descriptionTV = (TextView) view.findViewById(R.id.textView2);
            ImageView iconIV = (ImageView)view.findViewById(R.id.imageView1);
            if (titleTV != null) {
                titleTV.setText(it.getItemText());
            }
            if(descriptionTV != null){
                descriptionTV.setText(it.getItemDescription());
            }
            if(iconIV != null){
                if(it.getItemText().equals(getContext().getResources().getString(R.string.main_list_connectivity)))
                    iconIV.setImageResource(R.drawable.network_connections);
            }
        }
        return view;
    }

} 
```

这是我的活动布局和项目布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".PRS_MainList_Act" >
    <ListView android:id="@android:id/list"
        android:layout_height="match_parent"
        android:layout_width="match_parent"/>

</LinearLayout> 
```

物品布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:src="@drawable/ic_launcher" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:text="TextView" />

    </LinearLayout>

</LinearLayout> 
```

我收到此错误消息： java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T09:31:53.900

您不能使用此版本的`inflate`方法：

```
view = vi.inflate(R.layout.man_list_item, parent); 
```

因为这会将膨胀添加`View`到父级，这在`ListView`. 而是使用此版本：

```
view = vi.inflate(R.layout.man_list_item, parent, false); 
```

这将使视图膨胀，但不会将其添加到父级。这个版本很重要，因为它将`LayoutParams`为您的膨胀视图提供适当的。

# unit-testing - 如何在 Jenkins 中进行测试工作以将构建标记为稳定而不是不稳定？

> ID：13680334
> 
> 赞同：4
> 
> 时间：2012-12-03T09:28:12.420
> 
> 标签：unit-testing, junit, jenkins

目前我正在 Jenkins 中构建和测试我的应用程序。如果作业中的测试失败，则构建被标记为不稳定。即使测试失败，是否可以将构建标记为稳定？如果代码无法编译，则构建被标记为失败，这很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T14:05:21.467

有一个名为 Jenkins Text Finder 的插件：
[https ://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Text-finder+Plugin)

它允许在控制台日志中搜索正则表达式匹配，如果找到，它可以将构建设置为各种状态，包括将其设置为“成功”（即不稳定）。

构建成功后，只需在控制台输出中回显一个唯一的标签/行，并使用此插件查找该行。使用插件中的“ **Succeed if found ”选项来标记构建成功。**

# java - 如何在 Eclipse 中打开 Java src 存储库（然后构建它）

> ID：13680338
> 
> 赞同：0
> 
> 时间：2012-12-03T09:28:23.293
> 
> 标签：java, eclipse, ant, build

我正在`swingx-ws`为 Java 工作。源代码可以在这里找到：

[http://java.net/downloads/swingx-ws/releases/1.0/swingx-ws-1.0-src.zip](http://java.net/downloads/swingx-ws/releases/1.0/swingx-ws-1.0-src.zip)

该项目未维护，并且包包含一些过时的依赖项。根据[HERE](http://www.java.net/forum/topic/javadesktop/java-desktop-technologies/swinglabs/swingx-164-released#comment-824759)的建议，我想 (1) 在 Eclipse 中打开这个源代码，(2) 清理依赖项（根据该帖子“组织导入”，我希望/假设 Eclipse 可以以某种方式自动执行），并且然后 (3) 构建一个 JAR 文件。

但是，我什至似乎无法超越第一步（在 Eclipse 中打开它）。我尝试过“将现有项目导入工作区”和“从现有 Ant 构建文件中新建 Java 项目”，但似乎都不起作用。

编辑：这正是我对 Ant 所做的`build.xml`：我在元素末尾附近添加了以下行`project`（因为我的第一个错误与缺少 javac 元素有关）：

```
<javac executable="C:\eclipse\jdk1.7.0_07\bin\javac.exe"></javac> 
```

但是，现在我得到一个新的（而且非常模糊的）错误，简单地说：`java.lang.NullPointerException`

# ios - iTunesArtwork 图像在哪里显示？

> ID：13680340
> 
> 赞同：2
> 
> 时间：2012-12-03T09:28:31.503
> 
> 标签：ios, app-store, itunesartwork

我忘了用合适的替换 Cocos2D 默认的 iTunesArtwork 文件。但是当我尝试在 iTunes 应用程序和网站中浏览我的应用程序页面时，它似乎没有在任何地方使用此文件。所以我不知道我是否应该担心这个错误的文件，因为我不知道它会出现在哪里。

在此[技术问答](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)页面中，它说 iTunesArtwork 用于**Ad Hoc iTunes**。但那在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T09:34:24.977

iTunesArtwork 是 iTunesConnect 在商店中显示应用程序徽标时使用的文件。

它是可选的，大多数人选择保持他们的包尺寸较小，只是将艺术作品上传到 iTunesDirectly 而不是将其添加到他们的应用程序中。

[A Developer Q&A 1686](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)中描述了此图标和其他图标的格式和大小

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T09:33:37.063

来自[iOS 人机界面指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW2)

> **创建一个大版本的应用程序图标以在 App Store 中显示**。尽管让这个版本可以立即识别为您的应用程序图标很重要，但它可以更加丰富和详细。此版本的应用图标没有添加任何视觉效果。
> 
> 对于 App Store，为您的应用程序图标创建两种尺寸的大版本，以便在所有设备上看起来都不错：
> 
> 512 x 512 像素 1024 x 1024 像素（高分辨率）；推荐**请务必将这些版本的应用图标分别命名为 iTunesArtwork 和 iTunesArtwork@2x**。

# c# - 数据表 asp.net 中的 If 语句

> ID：13680342
> 
> 赞同：0
> 
> 时间：2012-12-03T09:28:34.807
> 
> 标签：c#, asp.net, datatable

我正在使用`DataTable`其中有一个总列，它将所有列相加以给出最终值。但我需要做到这一点，所以如果总数超过限制，它会给出一条消息，比如“你已经超出了你允许的范围”。所以它看起来像这样

```
if(dt.Column("Total") > 30)
{
   //Display message in label
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:38:07.350

您可以将“旧”[`DataTable.Compute`](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute.aspx)方法与列表达式一起使用，例如：

```
int total = (int) dt.Compute("SUM(Total)", null); // the second argument is the filter
if(total > 30)
{
     LblMessage.Text = "Total value exceeded maximum of 30!";
} 
```

这是“现代” [**Linq**](http://msdn.microsoft.com/en-us/library/bb386977.aspx)方法：

```
int total = dt.AsEnumerable().Sum(r => r.Field<int>("Total"));
// ... 
```

# c - 如何使用 bash 脚本将一个 C 程序的输出重定向到另一个 C 程序？

> ID：13680349
> 
> 赞同：1
> 
> 时间：2012-12-03T09:29:00.180
> 
> 标签：c, bash

我编写了两个程序（`Prog1.c`和） ，每个程序都采用一个命令行参数。`Prog2.c``C`

`Prog1.c`将文件名作为参数，从文件中读取内容并将其输出到`STDOUT`（标准输出）屏幕上。`Prog2.c`将数据作为参数并执行一些操作。我想将输出重定向`Prog1.c`为`Prog2.c`输入。

我尝试了以下 bash 脚本，这给了我错误

```
#!/bin/bash
prog2 "`prog1 file.txt`" 
```

我也试过不带引号，在这两种情况下，它都会给我以下错误。

```
Prog2:: argument list too long. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:33:52.860

要将命令的输出作为另一个命令的参数，您可以使用反引号：

```
prog2 "`prog1 file.txt`" 
```

或使用`$()`（我相信这是 bash 更优选的方式）：

```
prog2 "$(prog1 file.txt)" 
```

如果要将 prog1 的 STDOUT 用作 prog2 的 STDIN，请使用 | （管道）运算符：

```
prog1 | prog2 
```

注意：当你想使用管道时，你需要修改 prog2 的代码，因为它需要从 STDIN 而不是命令参数（函数`argv`的）读取。`main()`请参阅[如何从 C 中的控制台读取一行？](https://stackoverflow.com/questions/314401/how-to-read-a-line-from-the-console-in-c)有关如何执行此操作的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T09:32:29.857

管道！！！！

在命令行（或在您的脚本中）执行`prog1 file.txt | prog2`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T09:31:30.957

您必须在 prog1 之前和之后的两个地方都使用反引号

```
prog2 "`prog1 file.txt`" 
```

当您收到“参数列表太长”时，您已达到命令行的系统限制。然后，您必须找到另一种方式将数据发送到`prog2`. 您可以改为读取`stdin`，并将 prog1 的输出通过管道传输到 prog2

```
prog1 file.txt | prog2 
```

当您通过管道将数据从 prog1 传输到 prog2 时，您必须更改 prog2 并从 stdin 读取，而不是使用 argv。

逐行阅读示例：

```
char buf[1024];
while (fgets(buf, 1024, stdin)) {
    /* process line in buf */
} 
```

读取空格分隔单词的示例

```
char buf[1024];
while (scanf("%s", buf) != EOF) {
    /* process word in buf */
} 
```

# javascript - 如何在 JMeter 中设置通常通过 Javascript 设置的 cookie？

> ID：13680350
> 
> 赞同：4
> 
> 时间：2012-12-03T09:29:04.557
> 
> 标签：javascript, cookies, jmeter

我正在测试一个 Web 应用程序。
在主页面的导航菜单中，当一个节点被点击时，会调用一个javascript函数。我查了一下这个函数，页面会`document.cookie="current_moduleId=xxxx;path=/"`在重定向到目标页面之前设置。

那么如何在 JMeter 中为每个请求设置 cookie？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T13:35:34.413

创建以下平底锅：

![在此处输入图像描述](../Images/0cf40e77babe514cf020b4fc40e79316.png)

在 BeanShell 预处理器中，输入：

```
 import org.apache.jmeter.protocol.http.control.CookieManager;
  import org.apache.jmeter.protocol.http.control.Cookie;
  CookieManager manager = sampler.getCookieManager();
  Cookie cookie = new Cookie("toto","titi","localhost","/",false,0);
  manager.add(cookie); 
```

请注意，使用 JSR223 PreProcessor + Groovy + Caching 会更好地提高性能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T16:44:13.253

对于以后遇到这种情况的人，我不得不使用 0 或 -1 作为 cookie 的到期时间：

`Cookie cookie = new Cookie("toto","titi","localhost","/",false,-1);`

任何正整数似乎都没有设置 cookie

# android - 如何在 Android 中停用动画？

> ID：13680351
> 
> 赞同：0
> 
> 时间：2012-12-03T09:29:05.217
> 
> 标签：android, animation, android-activity, android-animation

我正在尝试停用 Android 的默认动画，我尝试了所有我知道的方式，但它总是返回。

我指的是显示活动何时发生变化的动画。我已经在我的所有意图中添加了这个：

```
Intent intent = new Intent(getApplicationContext(), conf1.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
startActivity(intent);
finish(); 
```

起初它工作，但后来五六个测试动画开始出现。我以为我改变了一些东西，所以我将它添加到我在 AndroidManifest 中的所有活动中。

```
android:windowAnimationStyle="@null" 
```

就像意图一样，起初它有效，但现在动画再次可见。你知道有什么解决办法吗？我在做坏事？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:39:51.083

在 startActivity 之后使用下面的行

```
overridePendingTransition(0,0); 
```

这将覆盖默认设备动画并且不执行动画。您还可以提供一些自定义动画，如下所示

```
overridePendingTransition(R.anim.fadein, R.anim.fadeout); 
```

# c++ - 在 C++ 中使用默认参数调用函数

> ID：13680354
> 
> 赞同：2
> 
> 时间：2012-12-03T09:29:15.717
> 
> 标签：c++, function, default-value

我有一个函数`Func(string str,int*i=NULL,int*j=NULL,bool ok=false);` ，我称之为`Func(some_string,false);`

程序崩溃了..因为我用--调用的顺序是错误的？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:30:38.323

如果您希望为 指定一个值`ok`，您还必须为其前面的所有参数指定值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:32:13.183

是的。第二个参数需要一个 int 值，而您正在传递一个 bool 值。第三个和第四个参数将分别取 NULL 和 false。

# ios - 手动或以编程方式添加 ScrollView

> ID：13680358
> 
> 赞同：0
> 
> 时间：2012-12-03T09:29:51.123
> 
> 标签：ios, uiscrollview, orientation, landscape, portrait

我有一个包含多个元素的现有视图，我正在考虑如何包含一个滚动视图来包含所有现有元素，而不必一一重新设计元素，

我的目标是，当我的方向变为横向时，后面的元素可以在当前显示键盘时特别滚动。

这可以手动或以编程方式完成，如何？或者这种场景有什么最好的方法吗？

*编辑（为清楚起见）

对于最初的问题不够明确，我深表歉意；

我有一个带有 3 个文本字段、一个按钮和 2 个开关的视图，最初我的应用程序只支持“纵向”方向，但是，最近我决定添加“横向”方向支持，我已经这样做了。现在我的问题是当我在横向视图元素被键盘覆盖时（特别是）。所以我在想我是否可以包含一个滚动视图并放置视图现有元素（对象）而不必重新设计笔尖，我已经做过了；

我将滚动视图拖到视图中，然后将所有现有元素作为滚动视图的子级，因此层次结构看起来像；

```
--view
  --scrollview
    --textfield
    --button 
```

我用这种方法得到的最终产品是所有元素都堆叠在一起，所以我失去了最初的设计。

所以这就是我要问的，无论如何，添加滚动视图而不必再次经历设计阶段。

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:19:12.730

如果您的视图是在 nib 中设计的，您可以从 IB 中选择视图的所有元素，然后从菜单中转到 Editor->Embed in->Scroll View。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:53:06.223

以下是步骤-

```
 1.Add the scrollview to the main view as subview.
 2.create a new view which contains all your elements for the scrollview.
 3.add the new view to the scrollview as subview.
 4.set the content size of the scrollview as the size of the new view. 
```

在方向上相应地更改 newView 的框架并重复步骤 4。

这就是你需要做的一切。。

# cakephp - Cakephp如何在特定字段上加入表格

> ID：13680362
> 
> 赞同：1
> 
> 时间：2012-12-03T09:30:01.257
> 
> 标签：cakephp, join

有人可以帮我解决这个问题吗？

如何在特定字段上加入表格？

我有 2 个表，我想像这样加入它们：Actus.user_id=>Follows.follower_id

* * *

**表 1 =>**

**关注**

id
user_id
follower_id

* * *

**表 2 =>**

**阿图斯**

id
user_id
内容
创建

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:38:21.183

强制加入是这样完成的（在我的头上）：

```
<?php 
    $results = $this->Actu->find('all',
        array('joins'=> array(
           'table'=>'followers',
           'type'=>'inner',
           'alias'=>'Follower',
           'conditions'=>array(
               'Follower.follow_id = Actu.user_id',
           )
         )
    )
?> 
```

**但是**您通常不需要强制连接。如果您的模型（Actu 和 Follower）被正确声明，CakePhp 可以为您构建它。建立`"Actu" hasMany "Follower"`关系呢？[看这里](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#hasmany)

**编辑 ：**

我会这样做（我不确定确切的型号名称，请仔细检查）：

```
<?php
class Actu extends AppModel {
    public $hasMany = array(
        'Follow'=> array(
            'className'     => 'Follow',
            'foreignKey'    => 'follower_id'
        )
    );
}
?> 
```

# c# - 为什么 Nhibernate 在我的 MVC 应用程序中跨多个请求共享会话？

> ID：13680363
> 
> 赞同：4
> 
> 时间：2012-12-03T09:30:06.020
> 
> 标签：c#, asp.net-mvc, nhibernate, fluent-nhibernate, structuremap

我们有一个 MVC 项目，它像这样通过 StructureMap 构建 NHibernate 依赖项

```
var sessionFactory = ConnectionRegistry.CreateSessionFactory<NHibernate.Context.WebSessionContext>();
For<ISessionFactory>().Singleton().Use(sessionFactory);
For<INHibernateSessionManager>().Singleton().Use<NHibernateWebSessionManager>(); 
```

ConnectionRegistry.CreateSessionFactory 看起来像这样

```
public static ISessionFactory CreateSessionFactory<T>() where T : ICurrentSessionContext
        {
            if (_sessionFactory == null)
            {
                lock (_SyncLock)
                {
                    if (_sessionFactory == null)
                    {
                        var cfg = Fluently.Configure()
                            .Database(MsSqlConfiguration.MsSql2005.ConnectionString(DataFactory.ConnectionString))
                            .CurrentSessionContext<T>()
                            .Mappings(m => m.FluentMappings.AddFromAssemblyOf<IInstanceFactory>())
                            .ExposeConfiguration(c => c.SetProperty("generate_statistics", "true"))
                            .ExposeConfiguration(c => c.SetProperty("sql_exception_converter", typeof(SqlServerExceptionConverter).AssemblyQualifiedName));

                        try
                        {
                            _sessionFactory = cfg.BuildSessionFactory();
                        }
                        catch (Exception ex)
                        {
                            Debug.Write("Error loading Fluent Mappings: " + ex);
                            throw;
                        }
                    }
                }
            }

            return _sessionFactory;
        } 
```

NHibernateWebSessionManager 看起来像这样

```
public ISession Session
        {
            get
            {               
                return OpenSession();
            }
        }

public ISession OpenSession()
        {
            if(CurrentSessionContext.HasBind(SessionFactory))
            _currentSession = SessionFactory.GetCurrentSession();
            else
            {
                _currentSession = SessionFactory.OpenSession();
                CurrentSessionContext.Bind(_currentSession);
            }
            return _currentSession;
        }

        public void CloseSession()
        {
            if (_currentSession == null) return;
            if (!CurrentSessionContext.HasBind(SessionFactory)) return;
            _currentSession = CurrentSessionContext.Unbind(SessionFactory);
            _currentSession.Dispose();
            _currentSession = null;
        } 
```

在 Application_EndRequest 中，我们这样做

```
ObjectFactory.GetInstance<INHibernateSessionManager>().CloseSession();
ObjectFactory.ReleaseAndDisposeAllHttpScopedObjects(); 
```

我们的控制器与持久性无关，并且操作调用查询模型提供者或命令处理器，它们注入了 sessionManager 并管理自己的事务。

例如：

```
public ActionResult EditDetails(SiteDetailsEditViewModel model)
{
    _commandProcessor.Process(new SiteEditCommand { //mappings }

    //redirect
} 
```

在命令处理器中：

```
public void Process(SiteEditCommand command)
        {
            using (var tran = _session.BeginTransaction())
            {
                var site = _session.Get<DeliveryPoint>(command.Id);
                site.SiteName = command.Name;
                //more mappings
                tran.Commit();
            }
        } 
```

我们还有一个 ActionFilter 属性，用于记录对每个控制器操作的访问。

```
public void OnActionExecuted(ActionExecutedContext filterContext)
{
    SessionLogger.LogUserActionSummary(session, _userActionType);
} 
```

SessionLogger 还通过注入的 SessionManager 管理自己的事务

```
public void LogUserActionSummary(int sessionId, string userActionTypeDescription)
        {

            using (var tx = _session.BeginTransaction())
            {
                //get activity summary
                _session.Save(userActivitySummary);
                tx.Commit();
            }
        } 
```

在我有两个浏览器访问该应用程序之前，所有这些都可以正常工作。在这种情况下，由于 (NHibernate) 会话已关闭，因此会引发间歇性错误。NHProfiler 显示从同一事务中的两个浏览器会话中的 CommandProcessor 方法和 SessionLogger 方法创建的 SQL 语句。

鉴于 WebSessionContext 范围，这怎么可能发生？我还尝试通过 structureMap 将 sessionManager 的范围设置为 HybridHttpOrThreadLocalScoped。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:31:25.230

问题是单例的组合：

```
For<INHibernateSessionManager>().Singleton().Use<NHibernateWebSessionManager>(); 
```

引用来自不同范围的对象（webrequest 上下文）

```
_currentSession = SessionFactory.GetCurrentSession(); 
```

这在多线程环境中无法正常工作（如在两个并发浏览器访问它的情况下所述）。第一个请求可能已经强制设置 field `_currentSession`，然后（一段时间）甚至用于第二个请求。第一个`Application_EndRequest`将关闭它...持久的将重新创建它...

当依赖 NHibernate 作用域时，完全遵循它：

```
return SessionFactory.GetCurrentSession(); // inside is the scope handled 
```

会话管理器.Open()

```
public ISession OpenSession()
{
  if(CurrentSessionContext.HasBind(SessionFactory))
  {
     return SessionFactory.GetCurrentSession();
  }
  // else  
  var session = SessionFactory.OpenSession();
  NHibernate.Context.CurrentSessionContext.Bind(session);
  return session;
} 
```

然后，即使单例返回正确的实例也应该可以工作。但是对于*SessionManager*我还是会使用`HybridHttpOrThreadLocalScoped`。

```
For<INHibernateSessionManager>()
  .HybridHttpOrThreadLocalScoped()
  .Use<NHibernateWebSessionManager>(); 
```

# javascript - 用javascript指向一个正方形

> ID：13680366
> 
> 赞同：0
> 
> 时间：2012-12-03T09:30:11.240
> 
> 标签：javascript, math, plot

AtomicRobot 在 stackoverflow 上为我提供了以下代码。

```
var x,y;

// amount of chairs
var totalChairs = 12;
// square size
var squareSize = 200;
var chairSize = 60;

// issues with 3,5,7,8,9,10,11

for(var i=0; i<totalChairs; i++){

    var angle = 2*Math.PI * i/totalChairs;

    if (angle > Math.PI/4 && angle <= Math.PI* 3/4){
        x = (squareSize/2) / Math.tan(angle);
        y = -squareSize/2 - chairSize/2;
    } else if (angle > Math.PI* 3/4 && angle <= Math.PI* 5/4){
        x = -squareSize/2 - chairSize/2;
        y = (squareSize/2) * Math.tan(angle);
    } else if (angle > Math.PI* 5/4 && angle <= Math.PI* 7/4){
        x = -(squareSize/2) / Math.tan(angle);
        y = -squareSize/2 + squareSize + chairSize/2;
    } else {
        x = -squareSize/2 + squareSize + chairSize/2;
        y = -(squareSize/2) * Math.tan(angle);
    }

    x -= Math.round(chairSize/2) - squareSize/2;
    y -= Math.round(chairSize/2) - squareSize/2;

    $("#square").append("<div class='chair' style='left:"+x+"px;top:"+y+"px;'></div>");
} 
```

这是用javascript在桌子周围绘制椅子，它适用于以下数量的椅子1、2、4、6、12，距离被平均绘制。

但是对于以下数量的椅子 3、5、7、8、9、10、11，似乎是由椅子宽度决定的。

他们的任何人都可以让我知道为什么会发生这种情况吗？数学不是我的强项，并且非常感谢您对此的帮助，您可以在此处看到一个带有 8 把椅子的示例。

[http://jsfiddle.net/Ld769/4/](http://jsfiddle.net/Ld769/4/)

谢谢

我一直在彻底改变我的工作方式，现在我已经真正了解了这个是怎么回事，并且可以扩展表格以适应对于某些人的数量仍然存在问题？？？？

```
 var x,y;

// amount of chairs
var totalChairs = 18;
var chairSize = 60;
// square size
var squareSize = Math.round(totalChairs/4) * chairSize;

//alert("squareSize: " + squareSize);
// issues with 5,9,13,17,21
// works with 1,2,4,6,12
var remainder = Math.round(totalChairs/4);

var s1 = 0;
var s2 = 0;
var s3 = 0;
var s4 = 0;

for(var i=0; i<totalChairs; i++){

    var iter = i;  
    if(iter+1 <= remainder){

         var s1i = s1++;
         console.log("s1i: " + s1i);

         x = s1i * chairSize;
         y = -chairSize;
         newr = remainder*2;

    } else if(iter+1 <= newr){
         var s2i = s2++;
         console.log("s2i: " + s2i);
         y = s2i * chairSize;
         x= squareSize;
         newe = remainder*3;

    } else if(iter+1 <= newe){

         var s3i = s3++;
         console.log("s3i: " + s3i);
         x =  - s3i * chairSize  + squareSize - chairSize;
         y = squareSize;

    }else{
         var s4i = s4++;
         console.log("s4i: " + s4i);
         y = - s4i * chairSize + squareSize - chairSize;
         x= -chairSize;

     }         

    $("#square").css({"width":(squareSize) + "px","height":(squareSize) + "px"});
    $("#square").append("<div class='chair' style='left:"+Math.round(x)+"px;top:"+Math.round(y)+"px;'><p>"+i+"<br/>x"+x+",y"+y+"</p></div>");
    $(".chair").css({"width":(chairSize) + "px","height":(chairSize) + "px"});
} 
```

​</p>

​ 可以在此处查看 jsfiddle 版本 [http://jsfiddle.net/isimpledesign/Ld769/19/](http://jsfiddle.net/isimpledesign/Ld769/19/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:51:33.827

我想知道有多少需要适合四个侧面之一。4*2 = 8, 不够, 4*3 = 12 OK!, 这意味着 3 边得到 3, 1 得到 2\. 这意味着最小宽度和高度必须与最拥挤的一面相同（以便坐姿适合舒服）

如果你想让它们均匀分开？算出椅子的数量，比如 11 把，分成 360 度来计算你的分离角度，然后把它投影到正方形上

# visual-studio - MSBuild 附加到 Visual Studio 项目构建

> ID：13680376
> 
> 赞同：0
> 
> 时间：2012-12-03T09:30:49.753
> 
> 标签：visual-studio, msbuild, project

我正在使用[YUICompressor.Net](http://yuicompressor.codeplex.com/)进行缩小。.proj 文件从 MSBuild 执行并且工作正常。

问题是如何将 MSBuild 操作附加到主项目的构建中？我知道有一些“构建后”事件，我该如何指出它们来执行我的附加 MSBuild。

如果它是相关的，这就是我的 MSBuild 文件的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/MsBuild/2003">

<UsingTask TaskName="CssCompressorTask" AssemblyFile="..\bin\Yahoo.Yui.Compressor.Build.MsBuild.dll" />
<UsingTask TaskName="JavaScriptCompressorTask" AssemblyFile="..\bin\Yahoo.Yui.Compressor.Build.MsBuild.dll" />
<Target Name="Minify">
 <ItemGroup>
  <CssFile_Common Include="../Styles/common.css"/>
  <CssFile_Plugins_All Include="../Styles/plugins.all.css"/>
 </ItemGroup>
<CssCompressorTask
      SourceFiles="@(CssFile_Common)"
      DeleteSourceFiles="false"
      OutputFile="../Styles/common.min.css"
      CompressionType="Standard"
      LoggingType="Info"
      PreserveComments="false"
      LineBreakPosition="-1"
   />
  <CssCompressorTask
      SourceFiles="@(CssFile_Plugins_All)"
      DeleteSourceFiles="false"
      OutputFile="../Styles/plugins.all.min.css"
      CompressionType="Standard"
      LoggingType="Info"
      PreserveComments="false"
      LineBreakPosition="-1"
   />
 </Target>
</Project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:43:56.900

假设您的示例文件名为 Minify.proj，您只需在主项目文件的底部添加如下内容：

```
 <Import Project="Minify.proj" />

  <Target Name="BeforeBuild" DependsOnTargets="Minify">
  </Target> 
```

# google-translate - 谷歌网站翻译器 - 502 Bad Gateway

> ID：13680379
> 
> 赞同：4
> 
> 时间：2012-12-03T09:30:55.250
> 
> 标签：google-translate

我的网站 (www.ancient.eu.com) 上有 Google 网站翻译器小部件。它曾经完美地工作，但现在我没有得到任何翻译。当我检查 Chrome 控制台时，我看到以下错误：

```
POST http://translate.googleapis.com/translate_a/t?anno=3&client=te&format=html&v=1.0&scid=e669185dd7423a09-043358cb90b67c5d-g813cc84edafdd3ce-12&logld=v10 502 (Bad Gateway 51001) element_main.js:248
XMLHttpRequest cannot load http://translate.googleapis.com/translate_a/t?anno=3&client=te&format=html&v=1.0&scid=e669185dd7423a09-043358cb90b67c5d-g813cc84edafdd3ce-12&logld=v10\. Origin http://www.ancient.eu.com is not allowed by Access-Control-Allow-Origin. 
```

有谁知道这里出了什么问题？

谢谢你的帮助。

简

# java - 一个带有 blob 的文件中的多个成员

> ID：13680381
> 
> 赞同：1
> 
> 时间：2012-12-03T09:31:04.470
> 
> 标签：java, sql, ibm-midrange, jt400

我想使用 jt400.jar 建模一个简单的“name->blob”结构，以便在 Java 中使用（本质上是在数据库中而不是在 IFS 中存储大的、不变的文件），这很容易通过

```
CREATE TABLE TRATEST/X (NAME VARCHAR (256 ) NOT NULL WITH
DEFAULT, BLOB BLOB NOT NULL WITH DEFAULT, BLOBPART INT NOT NULL 
WITH DEFAULT) 
```

（由于使用 F4 导致冗长），它创建了一个看起来像我想要的文件 X。

现在出于逻辑原因，我希望在 X 中有几个成员（如 A、B 和 C），每个成员都对其自己的文件集进行建模，但我无法运行 ADDPFM，因为我得到的错误是成员数超过了允许的最大值，并且我无法运行 CFGPF FILE(tratest/x) MAXMBRS(*nomax)，因为它报告的值无效。进一步阅读 CPD3213 表明这是因为该文件是作为 SQL 表创建的。

有没有办法得到我想要的东西 - 一个带有 blob 字段的文件和几个（编辑：特别命名的）我可以从 Java 访问的成员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:50:07.943

SQL 表不支持通常意义上的物理文件成员，但[分区](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/dbmult/partitionedtables.htm)是一种选择。

或者，您可以使用[DDS](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/dbp/rbafosetcom.htm)创建文件并仍然通过 SQL 访问它。但是，您将无法将 SQL 特定字段类型（包括 BLOB）添加到文件中。

将流文件的路径存储在表中，将实际的 blob 作为流文件存储在 IFS 中，并使用[集成的文件系统类](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzahh/rzahhintegrafilesysclass.htm)访问它们可能更有效。

# java - 寻找一种标准的 Java 方法（或者，如果需要，UDF）来检查一个哈希集是否是另一个哈希集的子集

> ID：13680383
> 
> 赞同：0
> 
> 时间：2012-12-03T09:31:09.917
> 
> 标签：java

如果一个 HashSet A 是另一个 HashSet B 的子集，它应该返回 true，否则返回 false。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:33:09.250

[`Set.containsAll()`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html#containsAll%28java.util.Collection%29)做你想做的事：

> 如果此集合包含指定集合的​​所有元素，则返回 true。如果指定的集合也是一个集合，如果它是这个集合的子集，则此方法返回 true。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T09:33:52.750

不确定它是否必须是一个严格的子集或者它可以相等。

```
Set a = ...
Set b = ... 
```

如果可以使用 containsAll

```
return b.containsAll(a); 
```

或者如果它必须是一个严格的子集

```
return b.size() > a.size() && b.containsAll(a); 
```

或者你可以

```
Set tmp = new HashSet(a);
tmp.removeAll(b);
return tmp.isEmpty(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T09:32:50.790

Set.containsAll 方法应该可以完成这项工作：

```
B.containsAll(A) 
```

# javascript - 在 Ti.paint Titan/android 中捕获像素的 X、Y 坐标

> ID：13680386
> 
> 赞同：0
> 
> 时间：2012-12-03T09:31:24.800
> 
> 标签：javascript, android, titanium, appcelerator, paint

这里我遇到了一个小问题，我使用的是钛加速器提供的 Ti.paint 模块。问题是我可以在某个事件侦听器上拥有所有 x 和 y 像素坐标吗？我用过这个

```
 var paintView = Paint.createPaintView({
    top : 0,
    right : 0,
    bottom : 80,
    left : 0,
    strokeColor : '#0f0',
    strokeAlpha : 255,
    strokeWidth : 10,
    eraseMode : false
});

paintView.addEventListener('touchmove', function(e) {

    Ti.API.info('listener called ' + e.x + ',' + e.y);
}); 
```

但它不会捕获所有 X、Y 坐标，它会跳过其中一些坐标。缓慢绘制将捕获几乎所有彩色像素坐标，但绘制速度很快，会跳过一些坐标坐标。请对此提供帮助。

阿里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:56:13.183

触摸移动事件受到限制，因此您的代码不会过载。

如果您绝对需要获得每一分，那么您需要跨入 Java 领域并根据您的需要自定义绘制模块。

该模块的源代码可在此处获得：[https ://github.com/appcelerator/titanium_modules/tree/master/paint/mobile/android](https://github.com/appcelerator/titanium_modules/tree/master/paint/mobile/android)

# layout - 2列灵活布局，列最大宽度

> ID：13680397
> 
> 赞同：0
> 
> 时间：2012-12-03T09:31:56.407
> 
> 标签：layout, css

我需要像这样创建一个 2 列布局：

当页面宽度很大（> 1000px）时，左列有 600px，右列填充所有剩余空间。

当页面宽度较小时，右列有 400px，左列缩小以适应。

如何使用 CSS 实现这一点？

# c# - 为什么我不能点击 ListView 中的 ImageButton？

> ID：13680403
> 
> 赞同：0
> 
> 时间：2012-12-03T09:32:13.350
> 
> 标签：c#, asp.net, listview, html-table, command-line-arguments

我想在我的 asp.net 应用程序中使用 listview 控件，并在 itemtemplate imagebuttons 中使用。如果我单击此按钮，我希望我可以使 div 块可见 = true 并用列表视图行中的数据填充控件。

我的列表视图：

```
 <asp:ListView runat="server" ID="myListView" OnItemCommand="myListView_ItemCommand"
            OnSelectedIndexChanging="myListView_SelectedIndexChanging">

                <LayoutTemplate>

                    <table id="UserList" border="1" cellpadding="0" cellspacing="0">
                        <tr style="background-color:#ccdaeb">
                            <th>
                               <span class="spanpading"><asp:Label ID="lblNameHeader" runat="server" Text="_Name"></asp:Label></span> </th>
                                <th>
                                  <span class="spanpading"><asp:Label ID="lblCompanyHeader" runat="server" Text="_Firma"></asp:Label></span></th>
                                    <th >
                                       <span class="spanpading"><asp:Label ID="lblVonHeader" runat="server" Text="_gültig ab"></asp:Label></span></th>
                                        <th >
                                            <span class="spanpading"><asp:Label ID="lblBisHeader" runat="server" Text="_gültig bis"></asp:Label></span></th>
                                            <th >
                                               <span class="spanpading"><asp:Label ID="lblErstellerHeader" runat="server" Text="_erstellt von"></asp:Label></span> </th>
                            <th align="left">
                                </th>
                            <th align="left">
                                </th>
                            <th align="left">
                              </th>
                        </tr>
                        <tr id="itemPlaceholder" runat="server"></tr>
                    </table>

                </LayoutTemplate>

                <ItemTemplate>
                    <tr onmouseover="this.style.backgroundColor='#87CEFA'"
                    onmouseout="this.style.backgroundColor='#ffffff'">
                        <td align="left"><span class="spanpading"><asp:Label ID="lblname" Text='<%# Eval("NAME") %>' runat="server"  /></span></td>
                        <td align="left"><span class="spanpading"><asp:Label ID="lblcompany" Text='<%# Eval("COMPANY") %>' runat="server"  /></span></td>
                        <td align="left"><span class="spanpading"><asp:Label ID="lblVon" Text='<%# Eval("TIMEFROM") %>' runat="server"  /></span></td>
                        <td align="left"><span class="spanpading"><asp:Label ID="lblBis" Text='<%# Eval("TIMETO") %>' runat="server"  /></span></td>
                        <td align="left"><span class="spanpading"><asp:Label ID="lblErsteller" Text='<%# Eval("CREATOR") %>' runat="server"  /></span></td>
                        <td align="left"><asp:ImageButton ID="imgDelete" runat="server" ToolTip="löschen" ImageUrl="images/delete.gif" /></td>
                        <td align="left"><asp:ImageButton ID="imgUpdate" runat="server" ToolTip="ändern" ImageUrl="images/edit.gif" CommandName="update" CommandArgument='<%# Container.DataItemIndex %>' /></td>
                        <td align="left"><asp:ImageButton ID="imgEmail" runat="server" ToolTip="Zugangsdaten senden" ImageUrl="images/send.gif" /></td>

                    </tr>
                </ItemTemplate>

                <EmptyDataTemplate>
                    <h4>Es wurden keine Einträge gefunden</h4><br/>

                </EmptyDataTemplate>

                <AlternatingItemTemplate>
                    <tr style="background-color: #E5EDF5;" onmouseover="this.style.backgroundColor='#87CEFA'"
                    onmouseout="this.style.backgroundColor='#E5EDF5'">
                        <td align="left"><span class="spanpading"><asp:Label ID="lblname" Text='<%# Eval("NAME") %>' runat="server"  /></span></td>
                        <td align="left"><span class="spanpading"><asp:Label ID="lblcompany" Text='<%# Eval("COMPANY") %>' runat="server"  /></span></td>
                        <td align="left"><span class="spanpading"><asp:Label ID="lblVon" Text='<%# Eval("TIMEFROM") %>' runat="server"  /></span></td>
                        <td align="left"><span class="spanpading"><asp:Label ID="lblBis" Text='<%# Eval("TIMETO") %>' runat="server"  /></span></td>
                        <td align="left"><span class="spanpading"><asp:Label ID="lblErsteller" Text='<%# Eval("CREATOR") %>' runat="server"  /></span></td>
                        <td align="left"><asp:ImageButton ID="imgDelete" runat="server" ToolTip="löschen" ImageUrl="images/delete.gif" /></td>
                        <td align="left"><asp:ImageButton ID="imgUpdate" runat="server" ToolTip="ändern" ImageUrl="images/edit.gif" CommandName="update" CommandArgument='<%# Container.DataItemIndex %>' /></td>
                        <td align="left"><asp:ImageButton ID="imgEmail" runat="server" ToolTip="Zugangsdaten senden" ImageUrl="images/send.gif" /></td>
                    </tr>
                </AlternatingItemTemplate>

            </asp:ListView> 
```

这是 commandItem 的 m< 代码：

```
 protected void myListView_SelectedIndexChanging(object sender, EventArgs e)
        {
            //
        }

        protected void myListView_ItemCommand(object sender, ListViewCommandEventArgs e)
        {
            if (e.CommandName == "update")
            {
                int index = Convert.ToInt32(e.CommandArgument);

                Label lbName = (Label)myListView.Items[index].FindControl("lblname");
                Label lbFirma = (Label)myListView.Items[index].FindControl("lblcompany");
                Label lbVon = (Label)myListView.Items[index].FindControl("lblVon");
                Label lbBis = (Label)myListView.Items[index].FindControl("lblBis");

                //Übergabe an die Div Update Box

                draggablebox.Visible = true; 
            }
        } 
```

这是错误消息：

![在此处输入图像描述](../Images/f1f1498097df803d86f43fc03bace75a.png)

# c++ - 如何在 lib curl 中使用带有私钥的自签名证书从 Windows azure blob 存储下载文件

> ID：13680410
> 
> 赞同：0
> 
> 时间：2012-12-03T09:32:35.427
> 
> 标签：c++, libcurl, azure-storage

我正在使用 libcurl 从 Windows azure 下载 blob，该 blob 已公开并能够通过 http 站点成功下载。但是，如果 azure blob 存储使用自签名证书和私钥设为私有，则文件下载失败并显示消息“指定的资源不存在”

代码如下

```
CURL *curl; 
    FILE *fp; 
    CURLcode res; 
    bool success = true;
    string CloudContainerPath = "https://MyTest.blob.core.windows.net/Mytest/";
    string path = CloudContainerPath+fileNameJsonVal.asCString();
    char *url = &path[0];  
    char *outfilename = (char *)fileNameJsonVal.asCString(); 
    char                errbuf[CURL_ERROR_SIZE];
    int length = 0;
    errbuf[0] = '\0';

static const char *pCACertFile = "D:\\LibCURL\\cacert.pem";
curl_easy_setopt(curl, CURLOPT_URL, url); 
                curl_easy_setopt(curl, CURLOPT_HEADER, 0); 
                * set the file with the certs vaildating the server */ 
                curl_easy_setopt(curl, CURLOPT_CAPATH,pCACertFile);
                curl_easy_setopt(curl,CURLOPT_CAINFO,pCACertFile);

                curl_easy_setopt(curl, CURLOPT_SSL_VERIFYPEER, 1L);
                curl_easy_setopt(curl, CURLOPT_SSL_VERIFYHOST, 1);
                curl_easy_setopt(curl, CURLOPT_ERRORBUFFER, errbuf);
                curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_data); 
                curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp); 

res = curl_easy_perform(curl); 
                curl_easy_cleanup(curl); 
                fclose( 
```

fp);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:17:35.870

Windows Azure 存储不使用基于证书的身份验证。它使用带有 HMAC 签名的共享密钥。请参阅[http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179428.aspx)。

# c# - 如何在选择特定文件的情况下打开资源管理器？

> ID：13680415
> 
> 赞同：65
> 
> 时间：2012-12-03T09:33:04.197
> 
> 标签：c#, winapi, vbscript

我想编写一个可以向其传递文件路径的函数，例如：

```
C:\FOLDER\SUBFOLDER\FILE.TXT 
```

它会使用包含该文件的文件夹打开 Windows 资源管理器，然后在该文件夹中选择该文件。（类似于许多程序中使用的“在文件夹中显示”概念。）

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2012-12-03T09:35:53.500

不使用 Win32 shell 函数的最简单方法是简单地使用`/select`参数启动 explorer.exe。例如，启动进程

`explorer.exe /select,"C:\Folder\subfolder\file.txt"`

将打开一个新的资源管理器窗口到 C:\Folder\subfolder 并选择 file.txt。

如果您希望在不启动新进程的情况下以编程方式执行此操作，则需要使用 shell 函数[`SHOpenFolderAndSelectItems`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762232%28v=vs.85%29.aspx)，这是`/select`explorer.exe 的命令将在内部使用的。请注意，这需要使用 PIDL，如果您不熟悉 shell API 的工作原理，它可以是真正的 PITA。

这是该方法的完整的程序化实现，`/select`感谢@Bhushan 和@tehDorf 的建议，通过路径清理：

```
public bool ExploreFile(string filePath) {
    if (!System.IO.File.Exists(filePath)) {
        return false;
    }
    //Clean up file path so it can be navigated OK
    filePath = System.IO.Path.GetFullPath(filePath);
    System.Diagnostics.Process.Start("explorer.exe", string.Format("/select,\"{0}\"", filePath));
    return true;
} 
```

参考：[Explorer.exe 命令行开关](https://ss64.com/nt/explorer.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-02-04T21:11:23.050

自Windows XP 以来*支持*的方法（即 Windows 2000 或更早版本不支持）是[**SHOpenFolderAndSelectItems**](https://docs.microsoft.com/en-us/windows/desktop/api/shlobj_core/nf-shlobj_core-shopenfolderandselectitems)：

```
void OpenFolderAndSelectItem(String filename)
{
   // Parse the full filename into a pidl
   PIDLIST_ABSOLUTE pidl;
   SFGAO flags;
   SHParseDisplayName(filename, null, out pidl, 0, out flags);
   try 
   {
      // Open Explorer and select the thing
      SHOpenFolderAndSelectItems(pidl, 0, null, 0);
   }
   finally 
   {
      // Use the task allocator to free to returned pidl
      CoTaskMemFree(pidl);
   }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-04T06:42:41.360

执行命令时，如果路径包含多个斜杠，则不会打开文件夹并正确选择文件 请确保您的文件路径应如下所示

**C:\a\b\x.txt**

代替

**C:\\a\\b\\x.txt**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-03T08:23:00.667

跟进@Mahmoud Al-Qudsi 的回答。当他说“启动流程”时，这对我有用：

```
// assume variable "path" has the full path to the file, but possibly with / delimiters
for ( int i = 0 ; path[ i ] != 0 ; i++ )
{
    if ( path[ i ] == '/' )
    {
        path[ i ] = '\\';
    }
}
std::string s = "explorer.exe /select,\"";
s += path;
s += "\"";
PROCESS_INFORMATION processInformation;
STARTUPINFOA startupInfo;
ZeroMemory( &startupInfo, sizeof(startupInfo) );
startupInfo.cb = sizeof( STARTUPINFOA );
ZeroMemory( &processInformation, sizeof( processInformation ) );
CreateProcessA( NULL, (LPSTR)s.c_str(), NULL, NULL, FALSE, 0, NULL, NULL, &startupInfo, &processInformation ); 
```

# android - 设置内容视图不起作用

> ID：13680418
> 
> 赞同：2
> 
> 时间：2012-12-03T09:33:11.107
> 
> 标签：android, achartengine

```
button.setOnClickListener(new View.OnClickListener(){

            public void onClick(View v){
                setContentView(R.layout.activity_chart);
            }

        }); 
```

嗨，我有上面的代码，其中在单击按钮时，我试图向它们显示活动 activity_chart。在那个活动中，我想显示一个图表。这里我调用了一个方法 createIntent()。但我的问题是图表没有被绘制出来。请帮助我是android的新手。

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        createIntent();

    }

    public Intent createIntent() 

     {

...

} 
```

我是否正确调用该方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:29:43.597

一个新的活动被调用：

`startActivity(new Intent(currentActivity.this, nextActivity.class));`

然后在您的新活动`onCreate(Bundle savedInstance)`方法中，您可以调用`setContentView(Layout layout);`以设置新布局。

因此，如果您想在单击按钮时更改 Activity，您必须执行以下操作：

```
button.setOnClickListener(new View.OnClickListener(){

            public void onClick(View v){
                startActivity(new Intent(currentActivity.this, nextActivity.class));
            }

        }); 
```

您当前仅在单击按钮时更改**当前Activity 的布局，而****不是**更改为另一个 Activity。

我希望我正确地理解了你。如果没有，请为我提供更多代码，以便我可以尝试了解您想要做什么。

# php - 如何在php中隐藏用户上传的图像对另一个用户？

> ID：13680420
> 
> 赞同：0
> 
> 时间：2012-12-03T09:33:23.600
> 
> 标签：php

我正在一个**销售眼镜的网站上**工作，该网站向用户提供**试戴功能**，以便用户可以在他的图像上试用规格。

现在，当用户上传图片时，他会尝试对他的照片进行规范，但如果任何其他用户上传他的照片，他也会找到其他用户上传的图片，如果第二个用户上传他的照片，那么第一个用户上传的图片将被删除.

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:11:37.140

为每个上传的文件生成一个唯一的随机名称（使用 eg `uniqid()`）并将其与用户会话 ID 或商店帐户相关联。这样，用户总能看到他们的照片（您可以在他下次访问时向他展示他的照片 - 如果他有帐户）。

# java - 在 Java 中的函数中实现 GUI

> ID：13680422
> 
> 赞同：1
> 
> 时间：2012-12-03T09:33:31.420
> 
> 标签：java, user-interface

我编写了一个函数，该函数接受`image_id`用户的输入并将该图像显示到 GUI。

但问题是我无法将我的 GUI 链接到我的函数：

*   我的功能正在运行。
*   我可以使用 GUI Builder 创建我的 GUI（并且我会想向它添加更多组件）

关于如何使这项工作的任何想法？

提前致谢。

```
public class SI  extends MainMenu {

     BufferedImage image=null ;

       final JPanel panel = new JPanel(){
            @Override
            protected void paintComponent(Graphics g){
                Graphics g2 = g.create();
                g2.drawImage(image, 3, 0,560,815,null);
                g2.dispose();
            }

            @Override
            public Dimension getPreferredSize(){
                return new Dimension(image.getWidth(), image.getHeight());
            }
       };

     public void  ImageReader(String image_id) throws IOException {  
     {  
        ////// To Read Tiff File /////////////////
         MainMenu mm= new MainMenu();
         mm.MainMenu();

         String TifFileReadPath="C:/BILAL/SearchImage/"+image_id+".TIF";  
         File inputFile = new File(TifFileReadPath);

         image= ImageIO.read(inputFile);  
         JFrame2.add(panel);
     }
     }

     public static void main(String[] args) throws IOException {
       SI si = new SI ();
       //String input = getTextfield().getText();

      MainMenu m = new MainMenu();
      String input= m.GetTextFiled();

      si.ImageReader(input);
     }
} 
```

# java - spring-roo 或 spring-web-mvc 中的只读字段

> ID：13680425
> 
> 赞同：3
> 
> 时间：2012-12-03T09:33:33.490
> 
> 标签：java, spring-mvc, spring-roo

我在 spring-mvc 中似乎是一个常见问题。我的几个域对象具有不可更新的字段，因此在我看来我没有绑定这些字段。 *出于竞争考虑，将这些从视图中排除的方法是编辑 spring-roo 脚手架视图，将参数上的渲染属性设置为 false。*

由于 spring-mvc 创建对象的新实例而不是更新现有对象，因此这些字段为空。然而，这意味着对象**在控件到达控制器之前验证失败**。

我的许多实体将具有在视图中**不可更新**的额外字段，因此我希望能够提出一个通用的解决方案，而不是一遍又一遍地不断地做同样的工作（违反 DRY）。

**如果视图中省略了字段，如何允许以一致的方式进行验证？**

```
 @RequestMapping(method = RequestMethod.PUT, produces = "text/html")
public String UserController.update(@Valid User user, BindingResult bindingResult, Model uiModel, HttpServletRequest httpServletRequest) {
    if (bindingResult.hasErrors()) {
        populateEditForm(uiModel, user);
        return "admin/users/update";
    }
    uiModel.asMap().clear();
    user.merge();
    return "redirect:/admin/users/" + encodeUrlPathSegment(user.getId().toString(), httpServletRequest);
} 
```

* * *

**可能的解决方案：**

## 从控制器中省略 @Valid 注释。

**优点**

*   易于实施。
*   容易理解。

**缺点**

*   意味着为每个对象的每次更新更改控制器方法。
*   验证与应用程序的所有其余部分不同。
*   没有简单的方法将绑定错误返回给视图（之后需要验证对象）

## 为需要省略字段的方法添加自定义验证器

**例子：**

```
@InitBinder
public void initBinder(WebDataBinder binder, HttpServletRequest request) {
    if (request.getMethod().equals("PUT")) {
        binder.setDisallowedFields("registrationDate", "password");
        Validator validator = binder.getValidator();
        Validator userUpdateValidator = new UserUpdateValidator();
        binder.setValidator(userUpdateValidator);
    }
} 
```

**优点**

*   清流。

**缺点**

*   深受 DRY 问题的困扰。这意味着如果域对象以任何方式更改，我需要重新验证。
*   保存时的字段验证与 Hibernate 验证不同。
*   省略验证和手动验证没有明显的好处。

**会考虑如果？**

*   自定义验证器可以委托给标准 JSR-303 验证器，但只是省略字段。

## 从域对象中删除 JSR-303 注释

**不是一个选项**，这意味着在保存之前没有对对象进行验证。更糟糕的是，我相信它会影响为数据库生成的 DDL，从而消除数据库本身的约束。**为了完整起见，只放在这里**

## 在验证发生之前查找域对象

这个解决方案的想法是在更新之前查找现有的域对象。从请求中将任何非空字段复制到旧对象。 **优点** - 验证可以通过正常周期。- 验证不需要根据您所暗示的方法而改变。

**缺点**

*   访问控制器之前的数据库访问有点**异味**。
*   我看不到任何实现这一点的方法。
*   不适用于在对象生命周期的其他阶段需要省略的字段。例如，如果在创建期间添加时间戳。

* * *

我想知道如何实现一个委托给标准 JSR-303 验证器的验证器，或者如何在修改它之前查找对象。或者如果有人有任何其他可能的解决方案？

这些解决方案中的任何一个都允许处理在多个对象上保持一致。

希望两者都允许添加注释，例如。@RooCreateOnly 这意味着域对象可以被注释为这样，将所有验证定义留在一个地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:45:41.373

最后一个选项可以通过`@ModelAttribute`注释来实现。

创建一个返回域对象的方法`@ModelAttribute`并向其添加注释。然后将相同的注释添加到要使用该对象的方法的域对象参数中。Spring 将首先从`ModelAttribute`方法中加载对象，然后将其与发布的数据合并。

例子：

```
@ModelAttribute("foobar")
public User fetchUser() {
    return loadUser();
}

   @RequestMapping(method = RequestMethod.PUT, produces = "text/html")
public String update(@ModelAttribute("foobar") @Valid User user, BindingResult bindingResult, Model uiModel, HttpServletRequest httpServletRequest) {
    return etc();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:30:28.980

我正在发布另一个与我之前的答案完全无关的答案。

还有另一种解决方案：将您的域对象包装到仅公开您要验证的字段的特殊表单对象中。

例子：

```
public class UserForm {
    private final User user = new User();

    // User has many fields, but here we only want lastName
    @NotEmpty // Or whatever validation you want
    public String getLastName() {
        return this.user.getLastName();
    }

    public void setLastName(String lastName) {
        this.user.setLastName(lastName);
    }

    public User getUser() {
        return this.user;
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T11:43:10.527

您可以将`disabled`属性用于文件中的输入标记，该`jspx`文件包含要标记为只读的字段的表单。

还要确保清除`z`与该字段相关的属性，以便 Roo 在以后对实体进行任何更改时将忽略该标记。

干杯!

# javascript - IE 上的 Javascript 奇怪行为

> ID：13680436
> 
> 赞同：1
> 
> 时间：2012-12-03T09:34:16.333
> 
> 标签：javascript, internet-explorer, ie-developer-tools

在执行 JavaScript 时，我注意到 IE（任何版本：7、8 甚至 9）的一个奇怪行为：拖放不起作用，但是当我按 F12 按钮两次时它可以正常工作（F12 开发人员工具）

在 Chrome 上，所有代码都能完美运行，但在 IE 中，我应该按两次 F12 才能让代码完美运行。

谁能解释这个错误是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T10:03:02.257

我猜是因为您在代码中使用了 console.log

在 IE 中打开开发者工具后，console.log 可用。使用try catch；

```
try{
    console.log('log')
}
catch(err){
} 
```

# visual-studio-2012 - visual studio 2012 - 在 VS 会话中保留多个解决方案资源管理器窗口

> ID：13680437
> 
> 赞同：12
> 
> 时间：2012-12-03T09:34:21.077
> 
> 标签：visual-studio-2012, solution-explorer

我找不到保留解决方案资源管理器窗口的方法（右键单击“基本”解决方案资源管理器窗口中的文件夹后，使用“新解决方案资源管理器视图”打开）。

这真的很烦人，因为例如在使用 mvc 应用程序时，每次启动 VS 时，我都需要为区域、视图、解决方案中的各种其他项目等重新创建解决方案资源管理器窗口，等等。

该应用程序不是ba.com，但也不是meandmydog.com，因此解决方案中有很多文件和文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-30T15:02:38.877

这似乎是项目规模的问题，而不是 VS。您应该只需要一个解决方案窗口，因为您一次只能打开一个解决方案。一个简单的解决方法是为您需要的每个“视图”创建一个*包含相关项目 (* .csproj/*.vbproj)的单独解决方案 ( .sln)。这是一个很好的方法，因为它可以帮助您查看您拥有的依赖项，还可以帮助您过滤哪些“应用程序”需要哪些项目。

我希望这有帮助。

# arrays - 从二维字符数组中打印所有可能的单词

> ID：13680440
> 
> 赞同：7
> 
> 时间：2012-12-03T09:34:33.630
> 
> 标签：arrays, algorithm, data-structures

最近偶然发现这个面试问题，

给定一个二维字符数组和一个可以及时搜索单词的字典`O(1)`。需要打印字典中存在的数组中的所有单词。单词可以在任何方向形成，但必须在数组的任何边缘结束。（不必太担心字典）

**输入：**

```
a f h u n
e t a i r
a e g g o
t r m l p 
```

**输出：**

```
after
hate
hair
air
eat
tea 
```

注意：这里的“egg”不是字典词，因为它没有在数组的边缘结束。

我以前见过类似的问题，但从来没有想到一个好的算法来解决这类问题。关于如何解决这类问题（从字符数组形成单词）的任何帮助都将非常有帮助。

（我能想到的唯一方法是在二维数组中找到所有可能的字符排列，并检查它是否在数组的边缘结束，并检查排列是否是 O(1) 中字典中的有效单词时间）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:57:53.283

将数组转换为图形，以便每个单元格`[i,j]` 都具有与其 4 个邻居中的每一个共享的边`[i+1,j], [i-1,j], [i,j+1], [i,j-1]`。然后在每个 array-edge-cell 上运行 DFS 并继续检查字典中是否有反向的单词。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:58:57.600

你没有提到一个字符只能使用一次 - 所以没有这个限制是“我们可以生成 k（或更多）不同的单词吗？”的问题。是**不可判定**的。¹ .

（由于每个元素的“访问”数量受到限制，存在有限数量的可能性，并且主张和证明当然不成立）。

**证明：**
众所周知，没有算法`A`可以决定终止算法是否返回`B`或更多不同的输入。（如果需要，稍后将查找此声明的引用，现在相信我）。`true``k`

我们将展示给定一个算法`A`，如果有`k`或更多生成的单词 - 我们可以决定是否有`k`或更多不同的输入产生“真”：

1.  让决定是否有`k`或更多生成词的（终止）算法为`M`。

2.  不失一般性 - 假设二进制字母（我们可以用它来表示一切）。

3.  让：

    ```
     array = 0 1 
             0 1 
    ```

    请注意，我们可以在此数组上行走时生成任何二进制字。

**算法 A：**
**输入：**算法 B，自然数 n
输出：当且仅当算法 B 对 n 个或更多不同的输入回答“真”时为真。
**算法**：
(1)`B(word)`用作黑盒字典 - 如果答案为真，则`word`在字典中。
(2)`array`用作数组。
(3) 在 (array,dictionary,n) 上运行 M，并像它一样回答。

请注意，如果 M 回答为真 -> 有`n`或更多接受的词 -> B 有`n`或更多不同的输入产生真（字典的定义，因为我们可以用数组生成每个输入） -> 问题的答案是真的.
（如果算法回答错误，则证明是相似的）。

**量子点**

**结论：**
如果我们可以重复数组中的一个字符而不是一次（或者准确地说 - 无限次） - 那么**如果没有字典上的任何信息，问题就无法解决。**

* * *

(1) 不可判定问题是没有算法可以在 100% 的情况下正确回答 TRUE/FALSE 的问题 - 对于每种算法，在某些情况下算法会“卡”在无限循环中（或给出错误的答案）。最常见的“不可判定”问题是[停止问题](http://en.wikipedia.org/wiki/Halting_problem)——它说——没有算法`A`可以采用任何算法并在停止某些输入`B`时回答。`B``w`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:53:26.493

我的解决方案是：

我想我有一个 M*N 数组，并且搜索单词没有限制。例如，“rood”和“door”是两个不同的词，因为它们是相互颠倒的。

从第一个字母开始（左，上）。在这种情况下，它是“a”。并检查字典中是否有单词（假设有以'ae'和'af'开头的单词）检查它们是否已经是单词并且最后一个字母的索引是0或M-1或N-1 . 如果没有，请将它们添加到队列中以便稍后查看。轮流检查所有排队的子字符串，并通过处理队列中的所有值来完成此阶段。然后检查第二个字母并继续到数组的最后一个成员。像这样，您将能够检查所有可能的单词。

它适用于我的一个这样的问题，但我不确定你是否也在寻找复杂性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-21T04:13:01.010

```
import java.util.HashSet;
import java.util.Set;

 /**
 * Given a 2-dimensional array of characters and a
 * dictionary in which a word can be searched in O(1) time.
 * Need to print all the words from array which are present
 * in dictionary. Word can be formed in any direction but
 * has to end at any edge of array.
 * (Need not worry much about the dictionary)
 */
public class DictionaryWord {
private static char[][] matrix = new char[][]{
        {'a', 'f', 'h', 'u', 'n'},
        {'e', 't', 'a', 'i', 'r'},
        {'a', 'e', 'g', 'g', 'o'},
        {'t', 'r', 'm', 'l', 'p'}
};
private static int dim_x = matrix.length;
private static int dim_y = matrix[matrix.length -1].length;
private static Set<String> wordSet = new HashSet<String>();

public static void main(String[] args) {
    //dictionary
    wordSet.add("after");
    wordSet.add("hate");
    wordSet.add("hair");
    wordSet.add("air");
    wordSet.add("eat");
    wordSet.add("tea");

    for (int x = 0; x < dim_x; x++) {
        for (int y = 0; y < dim_y; y++) {
            checkAndPrint(matrix[x][y] + "");
            int[][] visitedMap = new int[dim_x][dim_y];
            visitedMap[x][y] = 1;
            recursion(matrix[x][y] + "", visitedMap, x, y);
        }
    }
}

private static void checkAndPrint(String word) {
    if (wordSet.contains(word)) {
        System.out.println(word);
    }
}

private static void recursion(String word, int[][] visitedMap, int x, int y) {
    for (int i = Math.max(x - 1, 0); i < Math.min(x + 2, dim_x); i++) {
        for (int j = Math.max(y - 1, 0); j < Math.min(y + 2, dim_y); j++) {
            if (visitedMap[i][j] == 1) {
                continue;
            } else {
                int[][] newVisitedMap = new int[dim_x][dim_y];
                for (int p = 0; p < dim_x; p++) {
                    for (int q = 0; q < dim_y; q++) {
                       newVisitedMap[p][q] = visitedMap[p][q];
                    }
                }
                newVisitedMap[i][j] = 1;
                checkAndPrint(word + matrix[i][j]);
                recursion(word + matrix[i][j], newVisitedMap, i, j);
            }
        }
    }
} 
```

}

# powershell - 如何通过 PowerShell 向 TFS2010 项目添加贡献者？

> ID：13680441
> 
> 赞同：0
> 
> 时间：2012-12-03T09:34:33.387
> 
> 标签：powershell, tfs

如何通过 PowerShell 将贡献者添加到 TFS2010 项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:41:01.157

观看 powershell 文档（C:\Program Files (x86)\Microsoft Team Foundation Server 2010 Power Tools\Help\PowerShellCmdlets.mht），似乎没有将用户添加到 TFS 中的组的选项。但如果您安装了 TFS Power Tools，则可以在命令行中使用 tfssecurity 工具。

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC>tfssecurity /?
[...]
    /g+ groupIdentity memberIdentity (/collection:CollectionURI | /server:ServerURI)
        Adds a user or a group to an existing group.
[...]
Identity Specifiers:

    sid:sid - References the identity with the specified SID.
        Example:   sid:S-1-5-21-2127521184-1604012920-1887927527-588340

    n:[domain\]name - References the identity with the specified name. For Windows, name is the  logon name. If the referenced identity is in a domain, the domain name is required.  For application groups, name is the group display name and domain is the URI or GUID of the containing project. In this context, if domain is omitted, the scope is assumed to be collection-level.
        Example: To reference the identity of the user "John Peoples" in the domain "Datum1" at the fictitious company "A. Datum Corporation, you would use the following syntax:
            n:DATUM1\jpeoples
        Example: To reference application groups, you could use either of the following syntaxes:
            n:"Full-time Employees"
            n:00a10d23-7d45-4439-981b-d3b3e0b0b1ee\Vendors
[...] 
```

所以它看起来像：

```
tfssecurity /g+ [ProjectName]\Contributor Domain\UserName /collection:http://yourTfs:8080/ProjectCollection 
```

# java - Java中的Objective-C powf()等效函数

> ID：13680444
> 
> 赞同：0
> 
> 时间：2012-12-03T09:34:58.110
> 
> 标签：java, objective-c, function

是否有与 Objective-C 等效的 Java 函数`float powf(float, float)`？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:42:22.260

有两种选择

```
double d = Math.pow(a, b); 
```

或添加到 java 文件的开头

```
import static java.lang.Math.pow; 
```

并使用

```
double d = pow(a, b); 
```

顺便说一句，您的 IDE 通常可以进行此重构。

# heroku - 有没有办法在heroku上调试play2应用程序？

> ID：13680457
> 
> 赞同：2
> 
> 时间：2012-12-03T09:35:52.500
> 
> 标签：heroku, playframework-2.0

我正在尝试找到一种方法来在 heroku 上调试我的 play2 应用程序。我想将我的调试器（来自想法）连接到它，我可以检查发生了什么。我试图在调试模式下启动我的应用程序，但我不知道该怎么做。也许通过 Procfile ？

我还尝试在服务器上连接自己`heroku run bash`并找到播放命令来启动我的应用程序，`play debug run`但我无法这样做。那可能吗 ？

感谢您的时间 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:02:51.620

不，您不能，因为该端口将无法连接。

您唯一的机会是添加广泛的调试日志并启用`DEBUG`级别，`application.conf`以便您了解发生了什么。

# ios - 在 iOS 上更新应用后钥匙串数据丢失

> ID：13680459
> 
> 赞同：6
> 
> 时间：2012-12-03T09:35:57.320
> 
> 标签：ios, nsuserdefaults, keychain

我在钥匙串中保存了一些数据，但在每次应用程序更新后，这些数据都会丢失。当我在用户默认值中保存某些内容时，我遇到了同样的问题。这很重要，因为我使用它来存储创建的唯一标识符。有什么问题？感谢您的任何提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-30T21:51:18.370

我们最新的应用程序也有同样的问题。我们发现，如果较新的应用程序具有最低支持的 8.0 版本，Apple 显然正在从 Keychain 中擦除 iOS 8 之前的应用程序的数据。但是，如果将支持的最低版本设置为 iOS 7.0，则不会擦除钥匙串数据。

因此，显然所有使用 Keychain 的应用程序在将支持的最低版本设置为 iOS 8.0 并推送到 AppStore 时都会面临这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-23T06:45:40.433

钥匙串数据的丢失可能是由于`keychain-access-groups`权利的变化。

在新旧应用程序中保持此键的相同值将解决该问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-17T14:47:15.230

我面临同样的问题。我的部署目标是 iOS 10。

我将 JWT 令牌存储在钥匙串中，使用 -

```
A0SimpleKeychain().setString(token, forKey:"user-jwt") 
```

并使用以下内容将其取回 -

```
A0SimpleKeychain().string(forKey: key) 
```

我在生产日志中看到，对于某些用户来说，在应用升级后，令牌没有从钥匙串中获取。是iOS问题还是我在这里遗漏的任何东西。请建议。

最近在 iOS 12.4 上看到了这个问题。

我为此使用[简单的钥匙串。](https://github.com/auth0/SimpleKeychain)

# java - Java：从 System.in 读取时，InputStream 的 read() 方法在哪里实现

> ID：13680462
> 
> 赞同：1
> 
> 时间：2012-12-03T09:36:00.393
> 
> 标签：java, inputstream, system.in

抽象类`InputStream`说子类需要实现`read()`读取`one byte`然后将其转换为`unsigned int`.

`System.in`是一个`InputStream`，我可以这样做：

```
 int i = System.in.read(); 
```

我的问题是..这个方法在哪里实现？它是如何工作的？也许是一个奇怪的问题，但我试图找出幕后发生的事情，因为我使用的是 InputStream 类的对象而不是它的子类之一，所以我想知道实际方法在哪里实现以及它为什么起作用。 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:37:46.393

System.in 是一个 InputStream*的实现，*它实现了 read 方法。

如果您查看源代码，`System`您会发现它实际上是`FileInputStream`打开文件句柄 0（这是标准输入流）。但这并不重要。你唯一需要知道的是你可以从中阅读。如果它是 a `FileInputStream`， a`StringInputStream`或其他一些 native ，则无关紧要`InputStream`。这就是接口的全部意义所在。您几乎可以只针对接口进行编程，而不必担心具体的实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:42:45.640

幕后发生的事情是这样的：`in`类的属性`System`在运行时被分配了对某个类的对象的引用`X`。该类`X`extends `InputStream`，因此，它实现了该`read`方法。

你不能确定（意思是，它没有在任何地方指定）什么是类`X`；你所知道的是它扩展了`InputStream`。不同的 JDK 可能使用不同的类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T09:46:24.640

`InputStream`是 的类型`System.in`，而不是它的类（因为`InputStream`它是抽象的，所以不能直接实例化）。

考虑：

```
Object obj = "123"; 
```

变量的类型`obj`是`Object`，但引用的`obj`实例是 的实例`String`。何时`toString()`调用`obj`in`String`中的实现，而不是 .in 中的实现`Object`。

也是如此`System.in`。存储在那里的实际实例将是 的某个子类`InputStream`，它们将有自己的任何抽象方法的实现。如果您想知道存储在其中的实例的类，`System.in`则可以调用`System.in.getClass()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-14T15:09:21.453

什么是 System.in.read() ？

1)`System.in`退货`static InputStream in`

首先*`InputStream`*Class 是一个*`abstract class`*with its *`read method also abstract`*，这意味着 read 方法可能有 n 个实现。

**那么幕后发生了什么？**

*`System.in`*返回一个扩展 InputStream 的 ie 类的实例，*`InputStream class on runtime`*因为我们知道所有字节流类都扩展 InputStream ，所以它可以是任何扩展 InputStream 类的类。现在`read method is called from that class which it actually extending InputStream.`

您始终可以通过调用**System.in.getClass()检查为 InputStream 类提供的实例**

# php - 如何只允许登录用户访问linux服务器上文件夹中的文件

> ID：13680464
> 
> 赞同：0
> 
> 时间：2012-12-03T09:36:06.357
> 
> 标签：php, linux, wordpress

我创建了**.htaccess 文件**并将这段代码放入其中：

```
Order Deny,Allow
Deny from all 
```

这是我的**php 代码**，它在我的带有 WAMP SERVER 的 Windows 机器上运行良好：

```
 $path = $data['path']; // complete path to file

if (is_user_logged_in()) {
    //return $path;
    if (file_exists($path)) {
        header('Cache-Control: public');
        header('Content-Description: File Transfer');
        header('Content-Type: application/pdf');
        header('Content-Transfer-Encoding: binary');
        readfile($path);
    }
} else {
    return 'Welcome, visitor!';
} 
```

但是当我在服务器上运行它时，它根本不起作用。有一个锁定的文件夹，我在其中放置了`.htaccess`文件。在锁定文件夹下有许多子文件夹，我想将访问权限限制为仅登录用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:04:15.113

您的 .htaccess 文件是一种（缓慢）阻止任何人请求您的文件的方法。它不关心用户是否登录。

我会采取的方法是

a) 将您要授予登录访问权限的文件移出根目录。这样，没有人可以直接请求路径 - 他们必须使用您的 php 文件才能访问。

b) 在您的 php 文件中，测试您的用户是否已登录。如果没有，请根据需要向他们显示登录屏幕或错误消息。

c）当他们登录时，读取您要显示的文件**并回显内容**，（或读取数据并构建回复页面）。

# java - 如何使用 java-using 多线程或循环在 Oracle SQL 中多次更新表

> ID：13680465
> 
> 赞同：2
> 
> 时间：2012-12-03T09:36:05.820
> 
> 标签：java, sql, database, oracle

现在我必须将它更新到我的数据库中，问题是我不知道如何在数据库中多次更新它。

```
public void generate() {
    KpiMsg804 upd = createKpiMsg804();
    try {
          st = conn.createStatement();
          System.out.println("Updating Values");
          //Updating Values into DB
          String query = "insert into msg_new_to_bde("
              + "tablename,action,keyinfo1,keyinfo2) values(?, ?, ?, ?)";
          pstmt = conn.prepareStatement(query); // create a statement
          pstmt.setString(1,upd.getTableName());
          pstmt.setInt(2,upd.getAction()); // set value of staus of action
          pstmt.setString(3,upd.getKeyInfo1()); // set keyinfo value1
          pstmt.setString(4,upd.getKeyInfo2()); // set keyinfo value2
          int rows = pstmt.executeUpdate();
          System.out.println("Number of Rows Updated" +rows);
          // execute insert statement
    } catch (SQLException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T13:07:26.893

您可能想要使用 JDBC addBatch() 和 executeBatch() 功能：[JDBC 插入多行](https://stackoverflow.com/questions/12012592/jdbc-insert-multiple-rows)。这将让您将多行排队，然后将它们插入一组。

您的问题的另一种解释是：您需要关闭自动提交，然后使用 JDBC begin() 和 commit() 功能插入几个不同的表，它们都同时进入。

```
pstmt.executeUpdate(Table1);
pstmt.executeUpdate(Table2);
conn.commit(); 
```

这会将所有行作为一个事务插入，即一次。

# php - 使用 htaccess 或 php 更改 url 301 重定向

> ID：13680466
> 
> 赞同：0
> 
> 时间：2012-12-03T09:36:15.473
> 
> 标签：php, .htaccess, url, redirect, http-status-code-301

`example.com/a=process&b=5&b_id=5`

我怎样才能将其重定向到

```
example.com/a=process&b_id=5 
```

所以我可以为所有传入的 url 删除 b=5 。但是 "a" 、 "b" 和 "b_id" 可变的不是静态的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:01:03.817

如果要进行内部重定向，请使用以下代码：

```
RewriteEngine On

# The query variable b is comming first.
RewriteCond %{QUERY_STRING} ^b=[0-9]*&(.*)$
RewriteRule ^(.*)$ %2?%1 [L,NS]

# The query variable b is comming in middle.
RewriteCond %{QUERY_STRING} ^(.*)&b=[0-9]*&(.*)$
RewriteRule ^(.*)$ %3?%1&%2 [L,NS]

# The query variable b is comming last.
RewriteCond %{QUERY_STRING} ^(.*)&b=[0-9]*$
RewriteRule ^(.*)$ %2?%1 [L,NS] 
```

然后只需打印`print_r($_GET);`查询变量`b`将不在数组中。

如果要进行外部重定向，请使用以下代码：

```
RewriteEngine On

# The query variable b is comming first.
RewriteCond %{QUERY_STRING} ^b=[0-9]*&(.*)$
RewriteRule ^.*$ %{REQUEST_URI}?%1 [R,L,NS]

# The query variable b is comming in middle.
RewriteCond %{QUERY_STRING} ^(.*)&b=[0-9]*&(.*)$
RewriteRule ^.*$ %{REQUEST_URI}?%1&%2 [R,L,NS]

# The query variable b is comming last.
RewriteCond %{QUERY_STRING} ^(.*)&b=[0-9]*$
RewriteRule ^.*$ %{REQUEST_URI}?%1 [R,L,NS] 
```

查看[http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html)以了解 R、L、NS 等。

# python - 将 datetime.utcnow() 与 DjangoTables2 render_FOO 一起使用

> ID：13680468
> 
> 赞同：0
> 
> 时间：2012-12-03T09:36:37.353
> 
> 标签：python, django, python-2.7, django-1.4, django-tables2

我正在尝试使用 djangotables2 显示帖子的年龄（以小时为单位）。我的代码如下

```
class PostTable(tables.Table):
    current_Time = datetime.utcnow().replace(tzinfo=utc)
    published= tables.Column()
    def render_published(self, value,record):
        tdelta = self.current_Time - record.published
        #Some logic 
```

使用此代码，“current_Time”仅在 apache 服务器重新启动时更新。如果我将代码更改为

```
 tdelta = datetime.utcnow().replace(tzinfo=utc) - record.published 
```

它可以工作，但会为每一行计算 datetime.utcnow() ，但效率不高。我希望表的“current_Time”只更新一次。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:24:02.587

`__init__`尝试在表格的方法中设置当前时间。然后`self.current_Time`将在每次启动表时设置，而不是在定义表时设置。

```
class PostTable(tables.Table):
    def __init__(self, *args, **kwargs):
        super(PostTable, self).__init__(*args, **kwargs)
        self.current_Time =  datetime.utcnow().replace(tzinfo=utc)

    def render_published(self, value,record):
        tdelta = self.current_Time - record.published 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T10:18:12.883

`current_Time` 是你的类上的一个字段，在读入你的类定义时安装。这在你的类最初定义时发生一次。在您的情况下，这发生在服务器启动时。的值在`current_Time`那时且仅设置一次。

你会想`current_Time = datetime.utcnow().replace(tzinfo=utc)`搬进`def render_published(self, value,record):`

```
class PostTable(tables.Table):
    published= tables.Column()
    def render_published(self, value,record):
        current_Time = datetime.utcnow().replace(tzinfo=utc)
        tdelta = current_Time - record.published
        #Some logic 
```

这样，每次调用 render_published 方法时都会填充 current_Time。

# javascript - Javascript (ExtJS 4.1.1) TypeError: t is null

> ID：13680469
> 
> 赞同：1
> 
> 时间：2012-12-03T09:36:43.867
> 
> 标签：javascript, ajax, json, extjs

我正在尝试显示一个 extjs-4 树，后备存储中充满了来自 ajax 调用的 json（这似乎是成功的），但树没有显示。相反，我得到一个错误：

```
TypeError: t is null    ext-all.js (line 38) 
```

* * *

**编辑：**我现在正在使用`ext-dev.js`它给出错误： `TypeError: el is null`在该行：

`el = el.dom || Ext.getDom(el);`

* * *

除了第 38 行，我想知道我是否在我的 javascript 中犯了任何明显的错误......

```
Ext.require([
    'Ext.tree.*',
    'Ext.data.*'
]);

Ext.onReady(function() {

    Ext.define('pools', {
        extend: 'Ext.data.Model',
        fields: ['text', 'id']
    });

    var store = Ext.create('Ext.data.TreeStore', {
        autoLoad: true,
        model: 'pools',
        proxy: {
            type: 'ajax',
            url: 'get_all',
            reader: 'json'
        }
    });

    store.load();

    // create the Tree
    var tree = Ext.create('Ext.tree.Panel', {
        store: store,
        rootVisible: false,
        viewConfig: {
            plugins: [{
                ptype: 'treeviewdragdrop'
            }]
        },
        height: 350,
        width: 400,
        title: 'Directory Listing',
        renderTo: 'viewer',
        collapsible: true
    });
}); 
```

成功返回的json对象为：

```
{"text": ".", "children": [{"text": "pool1", "id": "pool1", "children": [{"text": "pool1/vol01", "leaf": "true", "id": "pool1/vol01"}]}, {"text": "pool5", "id": "pool5", "children": [{"text": "pool5/vol", "leaf": "true", "id": "pool5/vol"}, {"text": "pool5/vol2", "leaf": "true", "id": "pool5/vol2"}]}]} 
```

使用谷歌浏览器的堆栈跟踪显示：

```
Uncaught TypeError: Cannot read property 'dom' of null ext-dev.js:20437
Ext.define.doInsert ext-dev.js:20437
Ext.define.append ext-dev.js:17115
Ext.define.render Renderable.js:783
Ext.define.constructor AbstractComponent.js:1126
Base.implement.callParent ext-dev.js:6271
Ext.define.constructor Component.js:336
Base.implement.callParent ext-dev.js:6271
Ext.define.constructor Panel.js:144
constructor ext-dev.js:7459
(anonymous function)
Ext.ClassManager.instantiate ext-dev.js:8199
(anonymous function) ext-dev.js:3015
(anonymous function) viewer.js:26 <----------- from my javascript above (var tree=...)
(anonymous function) ext-dev.js:14498
Ext.util.Event.Ext.extend.fire ext-dev.js:14658
Ext.apply.readyEvent.event.fire ext-dev.js:14901
Ext.apply.fireReadyEvent ext-dev.js:14999
Ext.apply.onDocumentReady ext-dev.js:15023
fn ext-dev.js:10056
Ext.apply.triggerReady ext-dev.js:10042
Ext.apply.refreshQueue ext-dev.js:9540
Ext.apply.refreshQueue ext-dev.js:9541
Ext.apply.refreshQueue ext-dev.js:9541
Ext.apply.refreshQueue ext-dev.js:9541
Ext.apply.refreshQueue ext-dev.js:9541
Ext.apply.onFileLoaded ext-dev.js:9947
(anonymous function) ext-dev.js:3001
onLoadFn 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:21:14.753

将下面的 HTML 代码添加到页面正文：

```
<div id="viewer"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-12T12:18:57.527

从 javascript 迁移到 typescript 时，我遇到了类似的错误`TypeError: t() is null`：我添加了*index.tsx*但忘记删除旧的*index.js*。堆栈跟踪显示使用了旧的*index.js*。删除旧的 index.js 后问题就消失了。

# javascript - 一个 javascript 控制两个单独的浏览器窗口。

> ID：13680470
> 
> 赞同：2
> 
> 时间：2012-12-03T09:36:50.880
> 
> 标签：javascript

我正在使用 HTML5 画布元素构建一个所谓的随机艺术生成器。现在，我希望实时控制画布上的视觉动作的按钮位于单独的窗口中。有没有办法做到这一点？我想我需要一个 javascript 来控制两个单独的浏览器窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:44:28.343

只要您的两个页面来自同一来源（协议、主机名、端口），您就可以使用跨文档消息传递。这是这样做的：

在您应该发送信息（使用您的按钮）的页面上，您调用此：

```
window.postMessage(message, origin); 
```

这会将提供的消息发送到给定的来源（您的其他页面的网址）。

在您的接收页面上，您包含此功能：

```
window.addEventListener("message", yourfunction); 
```

where`yourfunction`需要一个参数，`e`. `e`属于 MessageEvent 类型并包含以下属性：

*   数据
*   起源
*   source（返回与发送脚本关联的窗口。）

这就是它的全部！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:43:55.877

您需要用于跨文档消息传递的通信 API。

您可以`postMessage`用来发送和接收消息。

```
//Post message
window.postMessage('Hello world...', 'http://example.com');

//Bind events
window.addEventListener('message', messageHandler, true); 
```

另外不要忘记检查浏览器支持：

```
if(typeof window.postMessage === "undefined"){
   alert('Your browser doesnt support this functionality');
} 
```

[本教程可能有用。](http://72lions.com/2011/05/cross-origin-communication-with-html5)

# wordpress - utils.php 是从哪里来的，TinyMCE hack

> ID：13680473
> 
> 赞同：6
> 
> 时间：2012-12-03T09:36:56.783
> 
> 标签：wordpress, tinymce

上周三，我管理的多个 WordPress 网站遭到黑客攻击，它们感染了伟哥链接（恶意软件非常原始）。

我注意到在 wp-includes 目录中有一个名为 utils.php 的文件（wp-includes/js/tinymce/utils/utils.php），它也是我的 general-template.php 的 get_footer 函数的补充。

这个hack似乎只影响网站的谷歌搜索结果，而不影响通过输入URL直接查看的网站，即你的缓存网站会显示恶意软件感染的混乱并失去排名，同时你会想知道为什么网站看起来很好看.

我的主机（TSO 主机）已经清理了网站，甚至不需要问，但我不知道感染是如何首先到达那里的。

所以我的问题是，除了通常的安全提示之外，有没有人知道违规是如何发生的以及我可以做些什么来防止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:42:58.407

这发生在我花了数周时间清理的网站上。我可以给你一些建议：

*   浏览 Wordpress 核心文件（在 wp-admin 和 wp-includes 下）并删除您在默认 wordpress 灌输中看不到的所有文件。我从未见过插件在这两个目录之一中创建文件。在此之后，最好重新安装 Wordpress，以防万一他们更改了任何现有文件。
*   之后，更改您的 Wordpress/FTP/SSH 密码，因为它们很可能已被破解。安装[WP 更好的安全性](http://wordpress.org/extend/plugins/better-wp-security/)。一开始看起来有点烦人，但你可以用它监控*一切*，更改登录信息，删除黑客可以用来查找安全漏洞的版本信息，将已知黑客列入黑名单等等。
*   最后，最后一个需要一些时间。谷歌你的主题和你的每个插件，看看 Wordpress 是否因为它们是一个安全漏洞而停止使用它们。你会惊讶于有多少插件有漏洞。尽量避免使用真正的新插件，并尝试在尽可能多的不同站点上使用相同的插件。如果您在同一台服务器上托管多个站点并且其中一个站点被黑客入侵，那么它们*都*被黑客入侵了。

这听起来像是一种痛苦，而且有一点点，但是当你完成后，你会感觉好多了，因为你知道你可以控制一切。相信我。

# c# - WPF：绑定后的Window SizeChanged事件

> ID：13680477
> 
> 赞同：1
> 
> 时间：2012-12-03T09:37:11.483
> 
> 标签：c#, wpf, events, xaml

各位程序员好，

我用数据绑定的数据网格和东西制作了一个相当复杂的 WPF 应用程序。由于内容会动态变化，因此窗口本身也会调整大小（正如它应该做的那样）。我做了一个功能，当尺寸改变时，窗口与主屏幕的中心对齐，如下所示：

```
this.SizeChanged += delegate
   {
       double screenWidth = SystemParameters.PrimaryScreenWidth;
       double screenHeight = SystemParameters.PrimaryScreenHeight;
       double windowWidth = this.Width;
       double windowHeight = this.Height;
       this.Left = ( screenWidth / 2 ) - ( windowWidth / 2 );
       this.Top = ( screenHeight / 2 ) - ( windowHeight / 2 );
   }; 
```

它就像我怀疑的那样工作。但是，由于内容是数据绑定的，因此内容可用大约需要 1/4 秒。到那时，上面的 SizeChanged 事件已经完成了它的工作，所以窗口根本没有居中。

我可以在触发事件之前实现某种超时而不锁定所有内容吗？

耐心等待您的回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:45:42.880

只是一个猜测，但其中一个可能有效

```
 this.SizeChanged += delegate
  {
      Dispatcher.BeginInvoke(DispatcherPriority.Background, (Action)delegate()
      {
          double screenWidth = SystemParameters.PrimaryScreenWidth;
          double screenHeight = SystemParameters.PrimaryScreenHeight;
          double windowWidth = this.Width;
          double windowHeight = this.Height;
          this.Left = (screenWidth / 2) - (windowWidth / 2);
          this.Top = (screenHeight / 2) - (windowHeight / 2);
      });
  };

  this.SizeChanged += delegate
  {
      ThreadPool.QueueUserWorkItem((o) =>
      {
          Thread.Sleep(100); //delay (ms)
          Dispatcher.Invoke(DispatcherPriority.Background, (Action)delegate()
          {
              double screenWidth = SystemParameters.PrimaryScreenWidth;
              double screenHeight = SystemParameters.PrimaryScreenHeight;
              double windowWidth = this.Width;
              double windowHeight = this.Height;
              this.Left = (screenWidth / 2) - (windowWidth / 2);
              this.Top = (screenHeight / 2) - (windowHeight / 2);
          });
      });
  }; 
```

就像我说的只是猜测，因为我没有设置来复制数据加载延迟

# git - 将新项目上传到 github 仓库？

> ID：13680478
> 
> 赞同：1
> 
> 时间：2012-12-03T09:37:13.260
> 
> 标签：git, github

我有一个 android 项目，我正在研究它，目前不驻留在任何类型的源代码控制上。

我已经创建了自己的 github 帐户并在那里创建了一个存储库，现在我想提交我的 android 项目并将其推送到该存储库中。

我怎么做？

我试过做一个 git checkout 但它不起作用，并说该项目不是 git repo。

```
fatal: Not a git repository (or any of the parent directories): .git 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T10:07:48.067

您需要一个可以先同步的本地 git 存储库。输入您的基本源文件夹并输入：

```
git init 
```

这会初始化一个新的 git 存储库。然后你需要提交你的代码。

```
git add *
git commit -m "Initial commit" 
```

现在你可以同步它了。为此，您必须将远程存储库添加到本地存储库。 [https://help.github.com/articles/adding-a-remote](https://help.github.com/articles/adding-a-remote)

```
git remote add origin https://github.com/user/repo.git 
```

完成此操作后，您可以使用以下命令推送本地文件：

```
git push origin master 
```

其中 origin 是远程存储库的名称，而 master 是分支的名称。

Ps.：您还必须同步 SSH 密钥才能正常工作。 [https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

编辑：如果您不确定这意味着什么，请直接前往 Github 训练营： [https ://help.github.com/categories/54/articles](https://help.github.com/categories/54/articles)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:38:52.283

你必须初始化你的文件夹

```
git init 
```

# amazon-s3 - 多少个 S3 存储桶（CloudFront Distribution）以获得最佳日志记录（收费）？

> ID：13680479
> 
> 赞同：0
> 
> 时间：2012-12-03T09:37:12.423
> 
> 标签：amazon-s3, amazon-cloudfront

我知道有很多服务和工具可以读取日志。

这是问题所在：

如果我打算按用户的使用量向他们收费，那么我应该为所有用户创建存储桶，还是可以为所有用户创建文件夹并记录文件夹带宽或使用情况等信息？

我也想使用云端分发。如果我为所有用户创建存储桶，那么我该如何管理云端分发呢？（所有分布都与特定的存储桶相关联？）

我想听听你的建议。

感谢您的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:55:32.487

每个 AWS 账户最多只能有 100 个存储桶，因此除非您计划拥有少于 100 个用户，否则您需要使用存储桶中的文件夹。

[http://docs.amazonwebservices.com/AmazonS3/latest/dev/BucketRestrictions.html](http://docs.amazonwebservices.com/AmazonS3/latest/dev/BucketRestrictions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T04:15:59.157

> 计划按我的用户的使用量收费

我认为您可以使用 Bucket Tagging，它也可以帮助 AWS 为客户账单分配成本。

[关于桶标记](http://aws.typepad.com/aws/2012/08/aws-cost-allocation.html)

# javascript - JavaScript 中的类似 Ruby on Rails 的框架

> ID：13680483
> 
> 赞同：3
> 
> 时间：2012-12-03T09:37:26.340
> 
> 标签：javascript, ruby-on-rails, node.js, model-view-controller, ember.js

我想使用一个包含 Ruby on Rails 等功能的框架，用 JavaScript 构建一个遵循 MVC 模式的应用程序。我非常了解Rails，并且拥有它的“JavaScript 端口”会很好。（当我说“JavaScript 端口”时，我的意思不是字面意思，只是类似的东西。）我想在客户端和服务器端都使用 JavaScript。我敢肯定，与 Rails 不同，客户端会更重，这很好。我想它的服务器端会在 Node 上运行，但我对其他想法持开放态度。

我的问题基本上是，最接近 Ruby on Rails 的 JavaScript 框架是什么？如果没有一种解决方案，那是什么组合？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T10:05:00.773

*2012**年**是[`Railway`](https://www.npmjs.com/package/railway)基于 ExpressJS 的 Node.JS MVC 框架，完全兼容 ExpressJS。它允许您以与 Ruby On Rails 类似的方式构建 Web 应用程序。*

现在有很好的框架，比如[`CompoundJS`](https://github.com/1602/compound)和[`Sails.JS`](http://sailsjs.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-08T23:26:28.993

在过去的几个月里，我在**客户端使用了 Joosy -** [http://joosy.ws](http://joosy.ws) 它非常容易集成到 Rails 中（它是为 RoR 设计的，您仍然可以继续使用 RoR 作为后端）。

从他们的网站：

..是一个javascript框架。作为 Rails 的一个和谐扩展，它将你喜欢的关于这个框架的所有内容直接引入你的浏览器。现成的约定集、广泛的 CoffeeScript、HAML 支持、Helper、无缝的后端集成、自动代码生成等等。

这里还有一个与 BackboneJs 和 EmberJs 的有趣比较：http: [//guides.joosy.ws/guides/basics/joosy-vs-x.html](http://guides.joosy.ws/guides/basics/joosy-vs-x.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T16:09:51.000

我会检查[Meteor.js](http://meteor.com/)。它是客户端和服务器端的 JS（使用 Node.js），而不是 MVC 框架，它使用 Web 套接字将您的模型绑定到您的视图，以便对服务器的更改被推送到客户端并且页面会立即更新。

因为它使用响应式模型而不是 MVC，所以它不太像 RoR，但这些框架确实具有生产力和开发人员友好性的共同点。Meteor 使用智能包（如 RubyGems），可以无缝地向您的应用程序添加功能，您可以让某些东西非常快速地运行，如果您选择将它放在meteor.com 上（并部署到您自己的服务器与部署任何其他应用程序没有太大区别）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-03T10:01:51.757

**服务器端（用于节点）：** Geddy 非常“有轨范” [http://geddyjs.org/](http://geddyjs.org/)

**客户端：** Ember.js：[http](http://emberjs.com/) ://emberjs.com/ 。还有 Rails 集成 gem。Yehuda Katz 和 Tom Dale 是主要的开发者，你可以从 Ruby 世界了解他们 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T09:43:54.223

你可以看看Backbone。我相信这是由 ROR 开发人员开发的，它不是 MVC 而是 MV。

[http://backbonejs.org](http://backbonejs.org)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T14:38:18.000

我没有使用过 Tower.js，但它宣传自己类似于您正在寻找的东西：

> 建立在 Node 的 Connect 和 Express 之上，以 Ruby on Rails 为蓝本。从头开始为客户端和服务器构建。

[http://towerjs.org/](http://towerjs.org/)

# javascript - 在 Windows 和 Ubuntu 机器之间开发 ROR

> ID：13680487
> 
> 赞同：0
> 
> 时间：2012-12-03T09:37:44.583
> 
> 标签：javascript, ruby-on-rails, windows, rubygems, ubuntu-12.04

我想在两台机器之间开发我的应用程序，工作（Windows）和家庭（Ubuntu）。我遇到的第一个问题是 windows 需要

```
gem libv8 
```

目前不会安装。进一步调查显示我需要安装

```
 ActivePython version 2.7.2.5 
```

然后运行：

```
gem install libv8 --version 3.11.8.0 
```

似乎 Ubuntu (Linux) 安装了自己的 JavaScript 运行时，因此不需要 Python 文件。

我的问题是，如果我安装 libv8 gem，当我合并两个平台之间完成的工作时，它会对我的 Ubuntu 设置有任何影响吗？

有没有人在同一个项目上使用两个平台时遇到任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:20:19.913

对于 RoR 开发来说，Windows 有时会有些痛苦。在您的 Windows 机器上，是否可以选择使用 Ubuntu 映像安装 Oracle VM VirtualBox？那是一个选择吗？如果您在家中和办公室使用 Ubuntu，也可能使您的开发环境更加一致......

我怀疑添加另一个 gem 会产生很大的不同 - 只要您在 Gemfile 中指定所有依赖项，它应该可以在您正在开发的任何平台上正常工作（假设您可以安装所有东西）

# java - 为倒计时添加声音

> ID：13680495
> 
> 赞同：0
> 
> 时间：2012-12-03T09:38:04.420
> 
> 标签：java, audio, javasound

如何在倒计时中添加声音？

```
timer = new Timer();
timer.schedule(new CountdownTask(), seconds*1000); 
```

稍后在程序中此代码将激活并且计时器将开始。有没有办法在计时器停止后结束的倒计时期间播放声音文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:55:19.230

我会加载一个带有声音的 javax.audio.sampled.Clip，并让计时器通过重复的重置和播放命令来触发它。剪辑播放应该在它自己的线程中。

[http://docs.oracle.com/javase/tutorial/sound/playing.html](http://docs.oracle.com/javase/tutorial/sound/playing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:41:46.313

可能这就是你要找的..

[Java 音频流](http://docs.oracle.com/javase/1.4.2/docs/api/javax/sound/sampled/AudioInputStream.html)

**更新 1：**

**如果您使用的是 Java 7，则可以通过Media 和 MediaPlayer**等受支持的类轻松完成

 **示例代码：

```
String mysound = "sound.mp3";
Media hit = new Media(mysound);
MediaPlayer mediaPlayer = new MediaPlayer(hit);
mediaPlayer.play(); 
```

需要进口

```
import javafx.scene.media.Media;
import javafx.scene.media.MediaPlayer; 
```

**更新 2：**

要在 Eclipse 中下载 JavaFX 插件，请使用此链接[JavaFX for eclipse](http://download.java.net/general/openjfx/plugins/eclipse/site.xml)

下载插件后，您需要**在项目的构建路径中添加 JavaFX 库。**

在配置构建路径中，转到添加库，然后到用户库并选中复选框。

就是这样！！..快乐编码..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:48:26.167

有几种方法可以做到这一点..还取决于您正在制作什么样的应用程序

如果您只想在程序中添加哔声，可以使用此链接： [http ://www.roseindia.net/java/example/java/awt/Beep.shtml](http://www.roseindia.net/java/example/java/awt/Beep.shtml)

要添加外部音频剪辑，您可以使用以下内容。：

```
Button logout = new JButton( "Logout" );
logout.addActionListener( new ActionListener()
{
   public void actionPerformed( ActionEvent evt )
   {
      // play a sound before loging out
      try
      {
         java.applet.AudioClip clip = 
            java.applet.Applet.newAudioClip(new java.net.URL( "file:/logout.wav"));
         clip.play();

         // loging out.....
      }
       catch( Exception e ) {}
   }
}); 
```

这是一个带有源代码链接的在线视频教程，您也可以在其中学习在 java 中播放声音。 [http://www.youtube.com/watch?v=ietKf_9GQ2o](http://www.youtube.com/watch?v=ietKf_9GQ2o)

享受..**

# jquery - 在视口中保留绝对定位的元素（jquery）

> ID：13680501
> 
> 赞同：4
> 
> 时间：2012-12-03T09:38:26.480
> 
> 标签：jquery, position, tooltip

我现在正在一个有很多工具提示的网站上工作。我想确保工具提示将始终完全显示在视口中。

我知道有用于工具提示的插件，但它们对我不起作用，因为工具提示是通过 css 完成的（而且我不能全部更改！）。您想要获得工具提示的任何元素都被赋予一个位置：相对，并且紧随其后的是一个带有 class='tooltip' 的元素 - 这是 css 代码：

```
.tooltip{
    display:none;
    color: #262626;
    background-color: #FEFEE0;
    padding: 5px 12px;
    position: absolute;
    box-shadow: 0 0 5px #A6A6A6;
    margin-top:-8px;
    z-index: 1000;
}
*:hover + .tooltip {
    display:block ! important;
}
.tooltip:hover{
    display:block;
} 
```

我想做的是，每次显示工具提示（或每次悬停工具提示之前的元素）时，运行一个函数来计算偏移量并确保它适合屏幕（或者移动它，如果不是） .

我现在唯一能想到的但我还没有尝试过的是运行类似的东西：

```
$("*:hover").each(function(e){
  if ($(this).next().hasClass('tooltip')
    //run some positioning function
} 
```

好的，所以我不是 jquery 专家，可能是上面的错误，我还没有尝试过，但你明白了。但这有意义吗？它会影响性能（以一种糟糕的方式）吗？

我已经花了好几个小时在这上面工作，结果却一无所获。任何想法都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:42:23.270

您的问题有一个更简单的解决方案。您可以使用`position:fixed;`根据视口定位元素。据我所知，它只会在 Internet Explorer 7 中失败，所以如果你关心这个，你需要使用 IE7 技巧来模拟固定定位。此外，`*`选择器和您在那里所做的事情无疑会对性能产生影响。 [这](http://perfectionkills.com/)是阅读 CSS 和 JS 分析的好地方。请注意，它非常详细，但绝对值得一读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:43:49.730

我检查了[tooltipsy 插件](http://tooltipsy.com/)，发现它们按照您提到的方式定位工具提示。[你可以在这里](http://tooltipsy.com/samples.html)查看样品。

为工具提示定义一个 html 元素类型并监听它们的悬停事件，而不是监听所有元素。因此，您可以在每个元素中设置标题内容数据，而不是为所有可能的数据创建工具提示元素。

```
<a href="#" class="see-tooltip" title="Title-1" content="Content-1">Hover Me!</a> 
```

并将悬停事件分配给“显示工具提示”类。

```
var $tooltip = $('#tooltip'); //select the early created tooltip element here
$('a.show-tooltip').hover(function() {
   var title = $(this).attr('title');
   var content = $(this).attr('content');
   //set title and content to $tooltip here
   //calculate and set positioning here
   $tooltip.show(); //show tooltip after setting it's new position
}, function() {
    $tooltip.hide(); //hide tooltip when hover ends
); 
```

# performance - jvm在负载下更快吗？

> ID：13680503
> 
> 赞同：2
> 
> 时间：2012-12-03T09:38:36.183
> 
> 标签：performance, jvm

大量的个人经验、轶事证据和一些初步分析表明，Java 服务器（通常运行 Oracle 的 1.6 JVM）在负载相当大的情况下具有更快的响应时间（显然仅在一定程度上）。

我不认为这纯粹是热点，因为当流量减少时响应时间会再次变慢。

在许多情况下，我们可以通过平均来自服务器日志的响应时间来证明这一点……在某些情况下，它的平均速度高达 20%，并且标准偏差更小。

谁能解释为什么会这样？这可能是真正的影响，还是平均值只是误导？多年来，我已经通过几份工作看到了这一点，并且倾向于将其陈述为事实，但没有解释原因。

谢谢，埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:50:15.103

**编辑**一个相当大的措辞编辑，并在整个过程中添加更多细节。

一些想法：

1.  当一段代码的执行次数明显多于其他部分（这是程序的热点）时，热点就会启动。从那时起，这使得那段代码（对于正常路径）明显更快。热点编译后的调用率并不重要，所以我认为这不会导致您提到的效果。

2.  效果是真的吗？用统计数据欺骗自己很容易。不是说你是，但要确保你*所有*的运行都包含在结果中，并且所有其他效果（如其他程序、活动*和你的监控程序*在所有情况下都是相同的。我有不止一个有我的监控程序，例如 top，*会导致*行为不同）。*有一次，当数据库*上的缓存预热时，应用程序的性能显着提高- 同一数据库实例上的其他应用程序存在内存压力。

3.  很可能涉及操作系统和/或 CPU。当主程序从主要运行变为主要等待 I/O 时，操作系统和 CPU 都会主动和被动地做一些事情来提高主程序的响应能力，反之亦然，包括：

    1.  操作系统在不使用时将内存分页到磁盘，并在程序运行时将内存分页到 RAM
    2.  操作系统将缓存经常使用的磁盘块，这又可以提高应用程序的性能
    3.  CPU 指令和内存缓存填充活动程序的指令和数据

Java 应用程序对内存分页效果特别敏感，因为：

1.  典型的 Java 应用程序服务器会将几乎所有空闲内存预分配给 Java。大内存使应用程序天生对内存效应更敏感
2.  用于管理 Java 内存的分代垃圾收集器最终会在大量页面上创建新对象，因此对应用程序的每个请求都需要比其他语言更多的页面请求。（这主要适用于没有经过多次垃圾回收的“新”对象。提升到永久代的对象实际上存储得非常紧凑）
3.  由于系统上分配了大部分可用的物理内存，因此内存总是存在压力，并且最大、最近运行最少的应用程序是页面输出的完美候选者。

考虑到这些因素，与内存需求较小的环境相比，页面丢失的可能性更大，因此性能受到影响。这些在 Java 闲置一段时间后尤其明显。

如果您使用 Solaris 或 Mac，出色的[dTrace](http://en.wikipedia.org/wiki/DTrace)可以跟踪特定于应用程序的内存和磁盘分页。JVM 有许多 dTrace 挂钩，可用作启动和停止页面监控的触发器。

在 Solaris 上，您可以使用大内存页面（甚至超过 1GB 大小）并将它们固定到 RAM，这样它们就永远不会被分页。这应该可以消除上述内存页面问题。请记住为磁盘缓存和其他系统/维护/备份/管理应用程序留出大量可用内存。我确信其他操作系统也支持类似的功能。

**TL/DR：**现代操作系统中当前正在运行的程序在几秒钟后会显得运行得更快，因为操作系统会将程序和数据页面从磁盘带回，将经常使用的磁盘页面放在磁盘缓存中，并且操作系统指令和数据缓存将对主程序来说往往是“温暖的”。这种效果并不是 JVM 独有的，但由于典型 Java 应用程序的内存需求和垃圾收集内存模型，这种效果更加明显。

# php - php shell_exec 在浏览器中不起作用，但在终端中起作用

> ID：13680504
> 
> 赞同：1
> 
> 时间：2012-12-03T09:38:36.010
> 
> 标签：php, shell-exec

我正在研究 shell_exec，它不在浏览器中运行，但在终端中运行。这是我的代码：

```
<?php
    echo 1;

    shell_exec ("gpg --output /home/datafeeding/testing/sampledick.xls.gpg --encrypt --recipient rtalplacido@yahoo.com /opt/jasperserver-3.5.0/apache-tomcat/webapps/JavaBridge/reports/sampledick.xls");

    echo 2;
    echo "<br>";

?> 
```

它`echo 2`，它只是通过 shell exec

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:40:44.630

[http://php.net/manual/en/function.shell-exec.php](http://php.net/manual/en/function.shell-exec.php)

> 注意：当 PHP 在安全模式下运行时，此功能被禁用。

另外，添加 gpg 二进制文件的完整路径 - /usr/bin/gpg

看到这篇文章：[GPG 错误代码 2](https://stackoverflow.com/questions/6350442/gpg-error-code-2)

# c++ - 如何确定线程模拟级别

> ID：13680505
> 
> 赞同：0
> 
> 时间：2012-12-03T09:38:39.413
> 
> 标签：c++, c, winapi

我正在调试一个在`SYSTEM`帐户下运行的 Windows 服务进程中模拟当前登录用户的线程。如何以编程方式或使用 Visual Studio 调试器或其他工具确定当前的模拟级别（如是否使用*模拟*或*委托）？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:48:13.773

最简单的方法是通过 Visual Studio[`$user`伪变量](http://msdn.microsoft.com/en-us/magazine/dd252945.aspx)。

# haskell - 为什么 cabal 不构建 Eval.hs？

> ID：13680506
> 
> 赞同：0
> 
> 时间：2012-12-03T09:38:46.387
> 
> 标签：haskell, xmonad

我下载了 xmonad-extras-0.10.1.2 并运行以下命令：xmonad-extras.cabal：[http ://hpaste.org/78707](http://hpaste.org/78707)

```
$cabal configure
Resolving dependencies...
Configuring xmonad-extras-0.10.1.2...

$cabal build
Building xmonad-extras-0.10.1.2...
Preprocessing library xmonad-extras-0.10.1.2...
In-place registering xmonad-extras-0.10.1.2...

It seems ok but there is no compiled Eval.

$find . -name "*.o"
./dist/build/XMonad/Util/WindowPropertiesRE.o
./dist/build/XMonad/Prompt/MPD.o
./dist/build/XMonad/Actions/Volume.o
./dist/build/HSxmonad-extras-0.10.1.2.o

$find . -name "Eval*"
./XMonad/Prompt/Eval.hs
./XMonad/Actions/Eval.hs

Then i tried use Setup.lhs directly:
$runghc Setup.lhs configure
Configuring xmonad-extras-0.10.1.2...
Setup.lhs: At least the following dependencies are missing:
X11 >=1.4.3, mtl -any, xmonad ==0.10.*, xmonad-contrib ==0.10.*

$ghc-pkg list|grep -i xmonad
xmonad-0.10
xmonad-contrib-0.10 
```

很奇怪，任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:48:15.163

一眼看去，似乎只有`with_hint`在配置包时设置标志时才会构建 Eval 模块。

```
$ cabal configure -f with_hint 
```

# css - 图像与其他组件不在一条线上

> ID：13680508
> 
> 赞同：0
> 
> 时间：2012-12-03T09:38:54.173
> 
> 标签：css, image

我知道在 html 中对齐有时很复杂。但这让我感到困惑。我有带有文本、按钮和图像的 div，没有其他选项。

```
<div class="div-filter">

 <input type="text" value="Hladaj"/>
 <input type="submit" value="Hladaj"/>
 <img alt="image" id = "ShowOrHideImage" /> 
```

![在此处输入图像描述](../Images/021e7743757b715b633f324039fa5abd.png)

为什么图像是 cca 5px 高？没有图像，文本和按钮上就没有填充。当我把图像放在那里时......

要清楚：

```
<style>
.div-filter
{
    background-color:rgb(235, 235, 98);
    width:100%;        
    border-bottom-width: 1px;   
    border-top-width: 1px;  
    border-left-width: 1px;  
    border-right-width: 1px; 
    border-bottom-color: black;   
    border-top-color: black;  
    border-left-color: black;  
    border-right-color: black;  
    border-bottom-style: solid;   
    border-top-style: solid;  
    border-left-style: solid;  
    border-right-style: solid;  
} 
```

我可以用 table 和 tableRow 解决它，但这对我不利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:04:31.337

这是因为图像与字体基线对齐。

您可能想要添加该规则：

```
.div-filter img {
    vertical-align: bottom;
} 
```

[http://jsfiddle.net/QgBcU/](http://jsfiddle.net/QgBcU/)

# php - 调试 AJAX 调用的潜在网络瓶颈

> ID：13680511
> 
> 赞同：0
> 
> 时间：2012-12-03T09:39:07.413
> 
> 标签：php, javascript, ajax, performance

我在学校的[VLE](http://www.frogteacher.com/)上写了一些 JS 脚本。

它使用[UWA Widget 格式](http://dev.netvibes.com/)并与本地托管的 PHP 脚本通信，它使用代理和 AJAX 请求。

最近，我们将前面提到的本地托管服务器从可怕的基于 XP 的 WAMP 服务器迁移到了运行 IIS 和 FastCGI PHP 的虚拟 Server 2008 发行版。

从那时起 - 或者可能是以前，我只是没有注意到 - 我的 AJAX 调用开始花费超过 1 秒的时间来运行。

![萤火虫输出](../Images/ad355c0f71ed5705797bd679c5868ac5.png)

*   我已经在 PHPMyAdmin 上运行了相关的 PHP 脚本查询，例如，相关的`getCategories`SQL 需要`0.00023s`运行，所以我认为问题不存在。
*   我已经编辑了服务器，并且对于相对较小规模的网络上的本地网络服务器`ping`，它始终如一地返回。`<1ms`VLE 位于同一网络上。

我的问题是：我可以采取哪些步骤来确定“瓶颈”可能在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:30:51.970

首先，测试你的脚本实际运行了多长时间： [分析 PHP 脚本的最简单方法](https://stackoverflow.com/questions/21133/simplest-way-to-profile-a-php-script)

其次，您应该检查服务器上的磁盘活动。如果它在可用 RAM 量的情况下运行太多 FastCGI 进程，它将交换并且速度会非常慢。如果磁盘活动非常频繁，那么您就知道自己找到了罪魁祸首。通过减少 fastcgi 进程的最大数量或增加服务器 RAM 量来解决它。

# c++ - 无休止的While循环会占用CPU资源吗？

> ID：13680512
> 
> 赞同：26
> 
> 时间：2012-12-03T09:39:11.010
> 
> 标签：c++, c, linux, daemon

据我了解，您编写的 Linux 守护程序在无限循环中侦听请求。
就像是..

```
int main() {
    while(1) {
        //do something...
    }
} 
```

参考：[http ://www.thegeekstuff.com/2012/02/c-daemon-process/](http://www.thegeekstuff.com/2012/02/c-daemon-process/)

我读到睡眠程序会使其进入等待模式，因此它不会占用资源。

1.如果我希望我的守护进程每 1 秒检查一次请求，以下是否会消耗资源？

```
int main() {
    while(1) {
        if (request) {
            //do something...
        }
        sleep(1)
    }
} 
```

2.如果我取消睡眠，是否意味着CPU消耗会增加100％？

3.不吃资源可以无限循环吗？说..如果它什么都不做，只是循环自己。或者只是睡觉（1）。

无尽的循环和 CPU 资源对我来说是个谜。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-03T14:34:12.533

`poll`and调用（Basile Starynkevitch 在评论中`select`提到）或信号量（Als 在答案中提到）是等待请求的正确方法，具体取决于具体情况。`poll`在没有or的操作系统上`select`，应该有类似的东西。

`sleep`, `YieldProcessor`, 也不是`sched_yield`正确的方法，原因如下。

`YieldProcessor`并且`sched_yield`只是将进程移动到可运行队列的末尾，但让它保持可运行状态。结果是它们允许具有相同或更高优先级的其他进程执行，但是，当这些进程完成时（或者如果没有），调用`YieldProcessor`或`sched_yield`继续运行的进程。这会导致两个问题。一是较低优先级的进程仍然不会运行。另一个原因是这会导致处理器始终运行，使用能量。我们希望操作系统能够识别何时不需要运行任何进程并将处理器置于低功耗状态。

`sleep`可能允许这种低功耗状态，但它会在下一个请求到来之前玩多长时间的猜测游戏，它会在不需要时反复唤醒处理器，并且它会降低进程对请求的响应，因为即使有需要服务的请求，进程也会继续休眠直到请求的时间到期。

`poll`and`select`调用正是针对这种情况而设计的。他们告诉操作系统，这个进程想要处理一个从它的 I/O 通道进来的请求，但是没有工作要做。这允许操作系统将进程标记为不可运行，并在合适的情况下将处理器置于低功耗状态。

使用信号量提供了相同的行为，除了唤醒进程的信号来自另一个进程引发信号量，而不是在 I/O 通道中产生的活动。当做一些工作的信号以这种方式到达时，信号量是合适的；只需使用`poll`更适合您情况的信号量或信号量。

`poll`, `select`, 或信号量导致内核模式调用的批评是无关紧要的，因为其他方法也会导致内核模式调用。进程不能自己休眠；它必须调用操作系统来请求它。同样，`YieldProcessor`向`sched_yield`操作系统发出请求。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-03T09:41:36.250

> **是否可以在不消耗资源的情况下运行无限循环？说..如果它什么都不做，只是循环自己。或者只是睡觉（1）。**

有一个更好的选择。
您可以只使用**semaphore**，它在循环开始时保持阻塞，并且您可以在希望循环执行时向 semaphore 发出信号。
请注意，这不会吃掉任何资源。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-03T09:45:14.783

简短的回答是肯定的——移除睡眠会提供 100% 的 CPU——但答案确实取决于一些额外的细节。它消耗了它可以获得的所有CPU，除非......

1.  循环体是微不足道的，并且被优化掉了。
2.  循环包含一个阻塞操作（如文件或网络操作）。您提供的链接建议避免这种情况，但在发生相关事情之前阻止通常是个好主意。

**编辑：**对于您的情况，我支持@Als 提出的建议。

**编辑2：**我希望这个答案已经收到-1，因为我声称阻塞操作实际上是一个好主意。[如果你 -1，你应该在评论中留下一个动机，这样我们都可以学到一些东西。]

当前流行的想法是，非阻塞（基于事件的）IO 是好的，阻塞是坏的。这个观点过于简单了，因为它假设所有执行 IO 的软件都可以通过使用非阻塞操作来提高吞吐量。

*什么？* 我真的建议使用非阻塞 IO 实际上会降低吞吐量吗？是的，它可以。当一个进程服务于单个活动时，实际上使用阻塞 IO 会更好，因为阻塞 IO 只会消耗进程存在时已经支付的资源。

相比之下，非阻塞 IO 可以比简单的阻塞 IO 承载更大的固定开销。如果进程不能提供可以交错的额外 IO，那么支付非阻塞设置就没有任何好处。（在实践中，不适当的非阻塞 IO 的最大成本仅仅是增加了代码复杂性。除此之外，这个主题在很大程度上是一个思考练习。）

在阻塞 IO 下，我们依靠操作系统来调度那些可以取得进展的进程。这就是操作系统的设计目的。

在非阻塞 IO 下，我们有更大的设置成本，但可以在交错工作之间共享进程及其线程的资源。因此，非阻塞 IO 非常适合任何服务于多个独立活动的进程，例如 Web 服务器。获得的吞吐量大大优于非阻塞 IO 的固定成本开销。

# jquery-ui - 如何实现 $(this).stop(); 在 jqueryUI 中

> ID：13680515
> 
> 赞同：1
> 
> 时间：2012-12-03T09:39:21.813
> 
> 标签：jquery-ui

如何实现 $(this).stop(); 在 jqueryUI 中

```
graph.hover(function() {
    wrap
    $(this).stop();
        .animate( { height: "hide" }, 2000, name )

},
function() {
    wrap
    $(this).stop();
    .animate( { height: "show" }, 2000, name );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:06:13.147

像这样 ：

```
graph.hover(function() {
    $(this).stop().animate( { height: "hide" }, 2000, function(){//Callback})

},
function() {
    $(this).stop().animate( { height: "show" }, 2000, function(){//Callback});
}); 
```

# regex - 条件正则表达式 [球拍]

> ID：13680517
> 
> 赞同：0
> 
> 时间：2012-12-03T09:39:32.190
> 
> 标签：regex, racket

我在 Racket 的手册中看到[了](http://docs.racket-lang.org/reference/regexp.html)以下结构：

```
(?‹tst›‹pces›|‹pces›) = Match 1st ‹pces› if ‹tst›, else 2nd ‹pces› 
```

以及以下示例：

```
(regexp-match #rx"(?(?<=c)a|b)+" "cabal") 
```

我不明白。这种正则表达式在哪种情况下可能有用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:37:47.300

`conditional expression`这在 perl 中被调用。更清楚地写成

```
(?(condition)yes-pattern|no-pattern) 
```

`yes-pattern`如果`condition`产生真值则匹配，否则`no-pattern`匹配。缺失的模式总是匹配的。[在此处](http://perldoc.perl.org/perlre.html)查看 perl 文档以获取更多信息。（在此页面中搜索“条件”）此页面提供了几乎所有有用的谓词，但不包括示例。

另一个例子可以在[这里](http://www.silverstones.com/thebat/RegexPt4.html#cond)找到。有两个示例，英语/欧洲日期格式和一个关于邮件标题的示例。

而这个来自[gnome 开发者文档](http://developer.gnome.org/glib/2.28/glib-regex-syntax.html)。（在此页面中搜索“条件子模式”）这里有几个示例。括号示例是经典示例，也可以在[perl regexp 详细手册](http://www.wellho.net/regex/perlre.html)中找到。

# mysql - SQL 中的主键 - 默认值

> ID：13680518
> 
> 赞同：1
> 
> 时间：2012-12-03T09:39:33.403
> 
> 标签：mysql, sql

我正在使用这个数据库，它是我尝试构建的第一个数据库之一：

[http://sqlfiddle.com/#!2/38ef8](http://sqlfiddle.com/#!2/38ef8)

当我尝试添加这一行时：

```
Insert Into country (name) values ('US'); 
```

它说字段“id”没有默认值。我正确地做我的主键吗？我见过有人在他们的主键上使用“auto_incrment”，比如这个例子：

[http://sqlfiddle.com/#!2/c807a/2](http://sqlfiddle.com/#!2/c807a/2)

那是我应该使用的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:44:10.263

如果您没有指定`PRIMARY KEY`column as`AUTO_INCREMENT`那么您必须手动提供值，例如：

```
INSERT INTO Country(id, name) values(1, 'US'); 
```

用`AUTO_INCREMENT`不用就看你自己了。有很多理由这样做，也有很多不这样做：

*   [“每张桌子”上自动增量键的优缺点](https://stackoverflow.com/questions/1997358/pros-and-cons-of-autoincrement-keys-on-every-table)
*   [每个表都应该有一个主键吗？](https://stackoverflow.com/questions/840162/should-each-and-every-table-have-a-primary-key)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:09:01.997

有 PRIMARY 键的属性 1：不能为 NULL 2：不能重复

现在，当您选择 AUTO_INCREMENT 时，每次使用查询时

```
Insert Into country (name) values ('US'); 
```

它会自动生成一个数字，递增表中存在的主键列的最大值

但是当您不将主键设置为 AUTO_INCREMENT 时，

```
Insert Into country (name) values ('US'); 
```

此查询将在除给定列之外的行的每一列中输入 NULL 值，在这种情况下，您的 PRIMARY_KEY 也会获得一个空值，这显然与 PRIMARY_KEY 的定义相矛盾。这就是为什么你得到错误

我希望解释有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T09:46:11.413

如果您没有将主键设置为自动增量，则必须在查询中手动插入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:49:40.397

主键应设置为 AUTO_INCREMENT，如果不是，则必须手动设置。尽管您仍然可以在将主键设置为 AUTO_INCREMENT 后插入特定值，但前提是该键尚不存在：D

# ruby-on-rails - 为什么在 Rails 的生产（Heroku）和开发环境中需要不同的负载？

> ID：13680519
> 
> 赞同：0
> 
> 时间：2012-12-03T09:39:33.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我试图要求一个位于 lib 中的文件（在我的 Rails 应用程序中）。

在开发中，这条线没有任何问题。

```
require "km" 
```

但是，在 Heroku 中，我收到“没有要加载的此类文件”错误。

通过 Heroku 控制台，我在指定文件路径方面尝试了许多变体。例如：

```
require "lib/km"
require "./lib/km.rb" 
```

等等。这是基于这些问题的答案，这表明问题是指定文件的路径。

[Rails，Heroku 不加载我的库](https://stackoverflow.com/questions/5477431/rails-heroku-does-not-load-my-lib)

[Heroku 控制台没有在 /lib 中加载文件？](https://stackoverflow.com/questions/10648525/heroku-console-not-loading-file-in-lib)

我也尝试过添加这里建议的自动加载行，这似乎并没有解决它。

```
config.autoload_paths += Dir["#{config.root}/lib/**/"] 
```

[http://www.williambharding.com/blog/technology/rails-3-autoload-modules-and-classes-in-production/](http://www.williambharding.com/blog/technology/rails-3-autoload-modules-and-classes-in-production/)

我如何告诉 Rails 找到 lib 文件？为什么需要在开发和生产中的行为有所不同？

更新：

这个问题原来与git有关。原来的文件名是“KM.rb”，后来改成了“km.rb”。但是，git 没有接受大小写更改，因此更改从未被推送到 Heroku 环境中。

一个关键步骤是在 Heroku 控制台中使用 Ruby Dir 命令来调查文件结构并确认 Heroku 环境中的文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-11-28T04:17:06.477

我收到“没有要加载的文件”错误，并发现我在 require 语句中的大小写错误

```
 require_relative './place/Places.rb' 
```

当实际文件名`places.rb` 在 Windows 上运行良好时，因为它不区分大小写

# perl - 强制 Perl Dancer 使用 HTTP/1.1

> ID：13680520
> 
> 赞同：1
> 
> 时间：2012-12-03T09:39:34.403
> 
> 标签：perl, http, dancer

如何设置 Perl Dancer 默认使用 HTTP/1.1 回答？我刚刚启动了一个 hello world 应用程序，使用 HTTP/1.1 触发了我的 curl，它使用 HTTP/1.0 进行响应。

```
foo@deathstar:~/MyWeb-App/lib/MyWeb$ curl -v http://localhost:3000

About to connect() to localhost port 3000 (#0)
> *   Trying 127.0.0.1... connected
> * GET / HTTP/1.1
> User-Agent: curl/7.22.0 (i686-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1 zlib/1.2.3.4 libidn/1.23 librtmp/2.3
>  Host: localhost:3000
> Accept: */*
> HTTP 1.0, assume close after body < HTTP/1.0 200 OK < Server: Perl Dancer 1.311 < Content-Length: 5601 < Content-Type: text/html;
> charset=utf-8 < X-Powered-By: Perl Dancer 1.311 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T22:07:01.090

看起来 HTTP 协议在 HTTP::Server::Simple::PSGI 中是硬编码的，这是 Dancer 在独立模式下运行时使用的。

[https://metacpan.org/module/Dancer::Deployment](https://metacpan.org/module/Dancer::Deployment)详细介绍了部署应用程序的选项。

作为一个快速测试，我做了`plackup -s Starman -a ./hello_world.pl`，它回答了 HTTP/1.1 而不是 HTTP/1.0。

# c++ - Visual C++ 2010 在调试时拒绝显示 std::string 值。节目

> ID：13680523
> 
> 赞同：8
> 
> 时间：2012-12-03T09:39:48.553
> 
> 标签：c++, string, debugging, std

我有一种奇怪的感觉，好像这是最近的问题，并且发生在两台不同的计算机上。

当我调试并尝试从 STL 查看 std::string 的值时，它显示为值。它说它的大小是 15，容量是一些乱码。

数组值本身都说 CXX0030：错误：无法评估表达式。

这非常令人沮丧，如果我在字符串上调用 c_str 并将其分配给 char * 或在需要时使用 watch 表达式，我仍然可以在调试时访问字符串值，但这非常乏味，并且在调试复杂问题时会变得非常困难连续3天。

其他 STL 容器的内容显示得很好。

这发生在两台不同计算机上的多个项目上，我很确定我已经为项目设置了所有调试选项。没有优化，并且肯定会生成调试信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-25T11:51:28.093

有同样的问题并通过更改 autoexp.dat 中的可视化工具来修复它。它位于：“C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\Packages\Debugger\autoexp.dat”或类似的地方，具体取决于您的 Visual Studio 和 Windows 版本。

“std::basic_string”的变化：

替换 $e._BUF_SIZE

通过 sizeof($e._Bx._Buf)/sizeof(char)

或 sizeof($e._Bx._Buf)/sizeof(wchar_t)

[https://connect.microsoft.com/VisualStudio/feedback/details/677683/std-string-incorrectly-displayed-in-debugger](https://connect.microsoft.com/VisualStudio/feedback/details/677683/std-string-incorrectly-displayed-in-debugger)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-01T22:16:47.867

[这可能是Microsoft 确认](http://connect.microsoft.com/VisualStudio/feedback/details/640602/vs2010-debugger-watching-std-string-with-iterator-debug-level-0-does-not-work)的与自定义迭代器调试级别相关的错误（不幸的是，在 VS2010 中未修复）的一个实例。我自己刚刚碰到这个问题，据我的测试显示，这个错误是由使用默认的“多线程调试 DLL”运行时定义 _HAS_ITERATOR_DEBUGGING=0 引起的（需要 VC redist 在其他 PC 上运行你的 exe） .

如果确实如此，那么至少有两种方法可以修复它（升级到 VS2012 的不足）——在我的情况下都经过测试和工作：

1) 删除 _HAS_ITERATOR_DEBUGGING=0 定义。如果您在时间关键代码中大量使用 STL，这可能会显着降低调试构建的性能。由于默认情况下不存在这样的定义，我想添加它的人这样做是有充分理由的（就像我一样）。

2) 切换您的调试配置以使用“多线程调试”运行时（即静态链接 CRT）。由于您可能仅将调试配置用于开发和内部调试，因此这不会导致任何问题。您可以保留共享运行时以进行发布配置（因为您可能无论如何都无法正确调试它）。

请注意，这两种解决方案还需要调整所有依赖项（静态/动态库）中的相应设置并重建它们，否则您将无法再链接到它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:58:45.773

听起来像是工作中的小字符串优化。VS2010 最多 16 个字符。在这种情况下，没有指向字符串开头的指针，也没有容量成员，而是这些字节用于字符串内容本身。

# android - 在 Android 的画布中查找文本 x,y 位置

> ID：13680527
> 
> 赞同：0
> 
> 时间：2012-12-03T09:39:57.150
> 
> 标签：android

我目前正在做这种类型的项目。我的要求是如何找到在画布上书写文本时使用的总 x,y 位置。

例如 ：

显示在图像中，显示在字母上，我想找到用于制作 A 的总 x,y 点。

![在此处输入图像描述](../Images/8f41dc163ba4b96c2baaa06591daf610.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:53:38.523

我不知道你为什么需要这样做，但这里有一些粗鲁的解决方案：

```
Map<Integer, Integer> result = new HashMap<Integer, Integer>();
for (int x = 0; x < bitmap.getWidth(); x++) {
    for (int y = 0; y < bitmap.getHeight(); y++) {
        int color = bitmap.getPixel(x, y);
        if (color != BACKGROUND_COLOR) {
            result.put(x, y);
        }
    }
} 
```

您只需遍历您的位图并将每个像素的颜色与背景颜色进行比较。如果不同，则将当前像素添加到结果图中。

如果您不知道如何从中检索，请参阅[此帖子](https://stackoverflow.com/questions/4013725/converting-a-canvas-into-bitmap-image-in-android)`Bitmap``Canvas`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:46:45.233

创建自定义类

```
public class CustomCanvas extends Canvas {

    private Rect rect;

    @Override
    public void drawPicture(Picture picture, Rect dst) {
        rect =dst;      
        super.drawPicture(picture, dst);
    }

    public Rect getRect() {
        return rect;
    }

} 
```

调用 CustomCanvas 矩形

```
@Override
    public boolean onTouchEvent(MotionEvent event) {
        canvas.getRect().intersect((int)event.getX(),(int)event.getY(),0,0);
        return super.onTouchEvent(event);
    } 
```

# iphone - 如何将数据传递到 iphone 电子邮件正文中的 html 表中

> ID：13680532
> 
> 赞同：0
> 
> 时间：2012-12-03T09:40:12.517
> 
> 标签：iphone, ios, mfmailcomposer

我可以创建表。但无法将值传递给表。

```
 - (IBAction)openMail:(id)sender {
    if ([MFMailComposeViewController canSendMail])
    {
        MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];
        mailer.mailComposeDelegate = self;
        [mailer setSubject:@"Shopping Cart "];

        NSArray *toRecipients = [NSArray arrayWithObjects:@"fisrtMail@example.com", @"secondMail@example.com", nil];
       [mailer setToRecipients:toRecipients];
       NSString *e=self.phone;
       NSString *f=self.cost;
      //NSString *emailBody = [NSString stringWithFormat:@"%@%@%@%@",e,@"  ",f,@"  has been purchased successfully"];

    NSString *emailBody=@"<html> <table border=1>      <thead><tr><td>Item</td><td>Name</td><td>Qty</td><td>Price</td></tr></thead><tbody><tr><td>1</td><td>1</td><td>One</td><td>One</td></tr><tr><td>2</td><td>Two</td><td>Two</td><td>Two</td></tr><tr><td>3</td><td>Three</td><td>Three</td><td>Three</td></tr><tr><td>4</td><td>Four</td><td>Four</td><td>Four</td></tr></tbody></table> </html> ";

    [mailer setMessageBody:emailBody isHTML:YES];
    [self presentModalViewController:mailer animated:YES];
    //[mailer release];
} 
```

我需要将上面提到的值“e”和“f”传递给html中的表格。怎么做？你能回复一下吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:00:06.670

看：

```
NSString *body = [[NSString alloc] initWithFormat:@"<html><body><yourHtmlcode />%@ %@</body></html>", yourVar1, yourVar2]; 
```

您还可以使用循环和连接动态创建 HTML 正文。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:49:17.273

```
NSString *emailBody=[NSString stringWithFormat:@"<html> <table border=1>      <thead><tr><td>Item</td><td>Phone</td><td>%@</td><td>Cost</td><td>%@><td>Name</td><td>Qty</td><td>Price</td></tr></thead><tbody><tr><td>1</td><td>1</td><td>One</td><td>One</td></tr><tr><td>2</td><td>Two</td><td>Two</td><td>Two</td></tr><tr><td>3</td><td>Three</td><td>Three</td><td>Three</td></tr><tr><td>4</td><td>Four</td><td>Four</td><td>Four</td></tr></tbody></table> </html> ",e,f]; 
```

在上面的代码中，我将 e 和 f 设置为 Phone 和 cost 的值，请参见代码...

我希望这对你有帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:49:38.913

根据我的理解，您需要在“emailBody”中传递您的 var(s) 值。如果我是对的，那么您只需像这样格式化您的字符串：

让我们说；

```
NSString *myHTMLString = @"some value you need to pass";
NSString *emailBody = [NSString stringWithFormat:@"<html><body><table><tr><td>%@</td><tr></table></body>",myHTMLString]; 
```

请根据您的 HTML 格式使用上面的内容。这里，我只是给你一个例子。

希望这就是你要找的。:)

# iphone - (iPhone) AFNetworking 使用相同的共享客户端进行不同的操作？

> ID：13680533
> 
> 赞同：0
> 
> 时间：2012-12-03T09:40:14.840
> 
> 标签：iphone, ios, httpclient, afnetworking

基本上我浏览了一段时间的堆栈溢出来了解 AFNetworking 框架。我决定使用 AFHTTPClient，通过制作扩展 AFHTTPClient 的单例类。我见过的一些代码是这样的：

```
 (InspectionClient*) sharedClient {

static InspectionClient *client = nil;
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    client = [[InspectionClient alloc] initWithBaseURL: [NSURL URLWithString:kServerName]];
});

return client; 
```

}

```
- (id) initWithBaseURL:(NSURL *)url {
self = [super initWithBaseURL:url];
if (self) {

    // register operation class
    [self registerHTTPOperationClass:[AFJSONRequestOperation class]];
}
return self;
} 
```

我注意到在创建新的客户端实例时，您必须注册操作类。如果您只是不想发送 JSON 文件，那似乎没问题。但我希望我的客户更通用，所以他可以将图片和 JSON 发布到服务器。为此我需要取消注册操作类并注册新类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:30:46.193

我正在使用的子类，`AFHTTPClient`并且我没有在实例中注册操作类。`registerHTTPOperationClass` [您可以在此处](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ)找到有关使用的更多信息 。

我也推荐阅读源码中的注释，`AFNetworking`了解寄存器操作类的用法：

```
/**
 Attempts to register a subclass of `AFHTTPRequestOperation`, 
 adding it to a chain to automatically generate request operations from a 
 URL request.

 @param operationClass The subclass of `AFHTTPRequestOperation` to register

 @return `YES` if the registration is successful, `NO` otherwise. 
 The only failure condition is if `operationClass` is not a subclass of
  `AFHTTPRequestOperation`.

 @discussion When `enqueueHTTPRequestOperationWithRequest:success:failure` 
 is invoked, each registered class is consulted in turn to see if it can 
 handle the specific request. The first class to return `YES` when sent a
 `canProcessRequest:` message is used to create an operation using 
 `initWithURLRequest:` and do `setCompletionBlockWithSuccess:failure:`. 
 There is no guarantee that all registered classes will be consulted. 
 Classes are consulted in the reverse order of their registration. 
 Attempting to register an already-registered class will move it to the 
 top of the list.
 */ 
```

# mysql - 多个INSERT sql查询，错误抱怨我的值不是字段

> ID：13680534
> 
> 赞同：1
> 
> 时间：2012-12-03T09:40:18.777
> 
> 标签：mysql, sql, insert

我确信这只是一个语法错误，但是看过手册后，我看不出我哪里出错了：

```
INSERT INTO 
`2012`(country_name) 
VALUES 
(`Afghanistan`),(`Algeria`),(`Botswana`),(`Burkina Faso`) 
```

country_name 是我数据库中的一列。但是，在提交查询时，我得到：

> 错误代码：1054。“字段列表”中的未知列“阿富汗”

但阿富汗并不意味着要成为一个领域，而是一个价值！我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T09:41:07.993

值应该用**单引号括起来**，而不是反引号

```
INSERT INTO 
`2012`(country_name) 
VALUES 
('Afghanistan'),('Algeria'),('Botswana'),('Burkina Faso') 
```

反引号用于转义 MySQL 中保留关键字的 columnNames 和 tableNames。前任，

```
INSERT INTO `table` (`unique`, `from`, `to`) VALUES ('','','') 
```

# php - 如何检查（在 php 或 cakephp 中）郊区的特定纬度/经度位于特定状态？

> ID：13680536
> 
> 赞同：0
> 
> 时间：2012-12-03T09:40:25.820
> 
> 标签：php, cakephp, geolocation, google-api, latitude-longitude

我有

1.  特定州的纬度/经度
2.  特定郊区的纬度/经度

我想要的是 ：

我想知道

1.  特定州的地区
2.  特定郊区位于哪个州

我已经尝试过的：

1.  [如何检查经度/纬度点是否在坐标范围内？](https://stackoverflow.com/questions/11510326/how-do-i-check-if-a-longitude-latitude-point-is-within-a-range-of-coordinates) -> 但不幸的是没有进入 php
2.  [https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding](https://developers.google.com/maps/documentation/geocoding/#ReverseGeocoding)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:55:17.873

您可以使用我的 Lib 类和行为对这两件事进行地理编码：http: [//www.dereuromark.de/2012/06/12/geocoding-with-cakephp/](http://www.dereuromark.de/2012/06/12/geocoding-with-cakephp/)

然后你得到了他们两个的坐标，你可以使用这些信息来得到你的结果。

所以

*   将 lat/lng 字段添加到您的表格（州和郊区）
*   为每个人运行 save() 以对地址字段进行地理编码（名称可能在这里）
*   使用现在存储的 lat/lng 字段来确定距离等

PS：您很可能会获得已经告诉您郊区位于哪个州的地理编码结果。因此您可能希望沿途提取此信息。这将比尝试使用距离更准确，尤其是在较小的州，距离会给您带来错误的结果。

# c++ - 在 VC++ 中使用 try/catch 来理解异常的类型

> ID：13680539
> 
> 赞同：0
> 
> 时间：2012-12-03T09:40:41.380
> 
> 标签：c++, visual-c++, exception, exception-handling, try-catch

> **可能重复：**
> [在捕获异常后确定异常类型？](https://stackoverflow.com/questions/561997/determining-exception-type-after-the-exception-is-caught)

我知道 C# 中的异常处理：

```
try{
// code causing exception
}
catch(System.Exception e){
// Here e variable holds the information about the actual exception that has occured in try block.
} 
```

但是，我想在 VC++（在 VS 2008 上）中实现相同的目标。我们如何捕获**VC++ 中 try 块中发生的异常类型**，因为我们在 VC++ 中没有包的概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:16:16.090

c++ 中的所有异常都没有一个基类，因此唯一的选择是指定要处理的内容

```
try
{
}
catch (const std::exception& e)
{
}
catch (const my_base_exception& e)
{
}
catch (const some_library_base_exception& e)
{
}
catch (...)
{
// ups something unknown
} 
```

但请记住，如果您`my_base_exception`的派生自`std::exception`，它将被 拦截`catch (const std::exception& e)`，因此如果是这种情况，请交换这两个捕获。也一样`some_library_base_exception`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:41:02.807

在 C++ 中，您通常*指定*可以捕获的类型`catch`，而不是检查类型。

如果你想记录一个被捕获的最派生类型`std::exception`，那么你可以通过 获取该信息`typeid`，因为`std::exception`它是一种多态类型。

如果您对记录标准异常类型层次结构之外的异常类型感兴趣，那么一个好方法是通用捕获（使用`...`）并调用一个通用的重新抛出函数，该函数知道可能的非标准异常并重新抛出和`catch`es 那些。这集中了逻辑。但很可能您的问题不是关于这种有点先进和罕见的技术（仅与使用非良好行为库有关），而是关于 C++ 中异常处理的简单误解，答案是，指定相关类型在每个`catch`子句中，您准备好捕捉。

# spring - 字段自动装配失败异常

> ID：13680540
> 
> 赞同：2
> 
> 时间：2012-12-03T09:40:42.327
> 
> 标签：spring, hibernate, model-view-controller, javabeans, portlet

我正在使用 Spring MVC Portlet，但遇到了问题。我的应用程序在它有一个 bean 时工作正常。如果我想在下面添加另一个 bean，则会发生错误。

错误日志在这里；

```
ERROR [org.springframework.web.portlet.DispatcherPortlet] - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'addSinifController': Autowiring of fields failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.project.service.SinifService com.project.controller.AddSinifController.sinifService; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mySinifService' defined in file [/tmp/1-sample_BookCatalog/WEB-INF/classes/com/project/service/SinifService.class]: Instantiation of bean failed; nested exception is java.lang.ExceptionInInitializerError
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessAfterInstantiation(AutowiredAnnotationBeanPostProcessor.java:280)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1011)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:511)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:450)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:289)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:286)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:188)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:543)
    at 
... 
```

我的 application-context.xml ；

```
<context:annotation-config/>

<context:component-scan base-package="sample.code.listing" />
<context:component-scan base-package="com.project.controller" />
<context:component-scan base-package="com.project.domain" />
<context:component-scan base-package="com.project.service" />

<bean
    class="org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="webBindingInitializer">
        <bean
            class="org.springframework.web.bind.support.ConfigurableWebBindingInitializer">
            <property name="propertyEditorRegistrars">
                <list>
                    <ref bean="myPropertyEditorRegistrar" />
                </list>
            </property>
        </bean>
    </property>
</bean>

<bean id="myPropertyEditorRegistrar" class="sample.code.listing.utils.MyPropertyEditorRegistrar"/>

<bean id="messageSource"
    class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basenames">
        <list>
            <value>content.Language-ext</value>
        </list>
    </property>
</bean>

<bean id="viewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean> 
```

我的 AddSinifController 在这里：

```
@Controller(value="addSinifController")
@RequestMapping(value="VIEW")
@SessionAttributes(types=Sinif.class)
public class AddSinifController {

    @Autowired
    @Qualifier("mySinifService")
    private SinifService sinifService;

    public SinifService getSinifService() {
        return sinifService;
    }

    public void setSinifService(SinifService sinifService) {
        this.sinifService = sinifService;
    }

    private Logger logger = Logger.getLogger(AddSinifController.class);

    @RenderMapping(params = "myaction=addsinif")
    public String showAddSinifForm(RenderResponse response,ModelMap model){
        return "addSinifForm";
    }

    @RenderMapping(params = "myaction=home")
    public String showhome(RenderResponse response,ModelMap model) {    
        return "home";      
    }

    @InitBinder
    public void initBinder(WebDataBinder binder) {
        binder.registerCustomEditor(Long.class, new LongNumberEditor());

    }
    @ModelAttribute("sinif")
    public Sinif getCommandObject(){
        return new Sinif("sinif");
    }
    @ModelAttribute(value = "myaction=siniflar")
    public List<Sinif> getCommandObject2(){
        return sinifService.getSiniflar();
    }
    @ActionMapping(params="myaction=addSinif")
    public void addSinif(@ModelAttribute Sinif sinif,
            BindingResult bindingResult, ActionResponse response,
            SessionStatus sessionStatus){
            Kademe kademe = new Kademe("kademe");
            kademe.setId((long) 6);
            sinif.setKademe(kademe);
 }          
            sinifService.addSinif(sinif);
            response.setRenderParameter("myaction", "addsinif");
            sessionStatus.setComplete();

        if(!bindingResult.hasErrors()){
            System.out.println("hata yok");
            sinifService.addSinif(sinif);
            response.setRenderParameter("myaction", "addsinif");
            sessionStatus.setComplete();
        }else{
            response.setRenderParameter("myaction", "home");
        }
    }

} 
```

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:17:00.130

给出相同的注释

```
@Qualifier("mySinifService") 
```

到实现您要实例化的 SinifService 接口的类。基本上，这里的问题是，当您要求 Spring 在 AddSinifController 类中自动装配 SinifService 接口时，当您有多个实现您的接口的类时，Spring 不知道要实例化接口的哪个实现。通过提供 @Qualifier 注释，您指的是要实例化的特定 bean。

# c# - C# static void Main 不应该公开？

> ID：13680541
> 
> 赞同：3
> 
> 时间：2012-12-03T09:40:42.530
> 
> 标签：c#

我在阅读 Microsoft C# 指南，感到很困惑。

[http://msdn.microsoft.com/en-us/library/acy3edy3(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/acy3edy3(v=vs.100).aspx)

在此页面上，声明说 Main 不应该公开？

> Main 在类或结构中声明。Main 必须是静态的，并且不应该是公共的。（在前面的示例中，它接收默认访问私有。）封闭类或结构不需要是静态的。

我感到很困惑，因为我可以编译和运行

> 公共静态无效主要

而且在我对 C++、Java 的一般理解中，Main 可以是公开的。
MSDN 文章有错字吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:41:57.317

> 我感到很困惑，因为我可以编译和运行

它是指导方针而不是规则，因此编译器与它无关。

# objective-c - 如何在 Xcode 4.5.2 中使用 Storyboard 删除 UItableview 中的特定行

> ID：13680544
> 
> 赞同：0
> 
> 时间：2012-12-03T09:40:54.487
> 
> 标签：objective-c, xcode, uitableview, nsmutablearray, storyboard

我不知道代码中发生了什么。我需要帮助我的代码，我需要一个错误的原因。

我在 ListViewController 中选择项目列表以将项目链接添加到 ChooseViewController。我需要删除项目。但我不能删除它。它有调试。

ListViewController.h

```
#import <UIKit/UIKit.h>

@interface ListViewController : UITableViewController<UITableViewDelegate, UITableViewDataSource,       UISearchBarDelegate>{

}
@property (strong, nonatomic)NSArray *nameCompany;
@property (strong, nonatomic)NSArray *imageCompany;

- (IBAction)backPage:(id)sender;

@property (strong, nonatomic)IBOutlet UISearchBar *MyPsearch;
@property (strong, nonatomic)IBOutlet UITableView *MyPtableView;

-(NSMutableArray  *)nameCom;
-(NSMutableArray *)nameImage;
-(int ) getArrayCount;
-(void)setcheck :(int )index;

@end 
```

列表视图控制器.m

```
#import "ListViewController.h" 
#import "ChooseViewController.h"
//#define ALPHA @"ABCDEFGHIJKLMNOPQRSTUVWXYZ"
@interface ListViewController ()

@end

@implementation ListViewController
int checkArray[3];
@synthesize MyPsearch;
@synthesize MyPtableView;
@synthesize nameCompany =_nameCompany;
@synthesize imageCompany =_imageCompany;

NSMutableArray *coms;
NSMutableArray *Imagecoms;

NSMutableArray *totalString;
NSMutableArray *filteredString;

BOOL isFiltered;
int check;
UIButton *additem;

-(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText{
    if (searchText.length == 0) {
        isFiltered = NO;
    }
    else{
        isFiltered = YES;
        filteredString = [[NSMutableArray alloc]init];

        for (NSString *str in totalString) {
            NSRange stringRange = [str rangeOfString:searchText options:NSCaseInsensitiveSearch];
            if (stringRange.location != NSNotFound) {
                [filteredString addObject:str];
            }
        }
    }
    [self.MyPtableView reloadData];
}

-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
    [searchBar resignFirstResponder];
}

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.MyPsearch.delegate = self;
    self.MyPtableView.delegate = self;
    self.MyPtableView.dataSource = self;

    totalString = [[NSMutableArray alloc]initWithObjects:@"UOB Bank", @"US airways", @"Bank of America", nil];
    self.nameCompany = [[NSMutableArray alloc]initWithArray:totalString];
    self.imageCompany = [[NSMutableArray alloc]initWithObjects:@"UOB.png", @"us-airways.png", @"bank-of-america.png", nil];

    if (check == 0) {
        coms = [[NSMutableArray alloc]init];
        Imagecoms = [[NSMutableArray alloc]init];
        check = 1;
    }

        //[self.createSectionList:wordarray];
    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}
-(void)addNewItem:(UIButton *)sender{
    //การadd Item เก็บค่าไว้
    [sender setHidden:YES];
    [coms addObject:[totalString objectAtIndex:sender.tag-100]];
    [Imagecoms  addObject:[_imageCompany objectAtIndex:sender.tag-100]];

    checkArray[sender.tag-100]= 1;

}

-(NSMutableArray *)nameCom{
    return coms;
}

-(NSMutableArray  *)nameImage{
    return Imagecoms;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
//#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
//#warning Incomplete method implementation.
    // Return the number of rows in the section.
    if (isFiltered) {
        return [filteredString count];
    }
    return [totalString count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    //static NSString *CellIdentifier = @"ListCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ListCell"];
    //if (!cell) {
      //  cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    //}
    if (!isFiltered) {

        cell.textLabel.text = [totalString objectAtIndex:[indexPath row]];
        cell.imageView.frame = CGRectMake(0, 0, 54, 33);
        UIImage *PlacePhoto3 = [UIImage imageNamed:[self.imageCompany objectAtIndex:[indexPath row]]];
        cell.imageView.image = PlacePhoto3;
        //ปุ่ม บวก
        if (checkArray[indexPath.row] == 0) {
        additem = [UIButton buttonWithType:UIButtonTypeContactAdd];
        additem.frame = CGRectMake(275, 11, 29, 29);
        additem.tag = 100+indexPath.row;
        [additem addTarget:self action:@selector(addNewItem:) forControlEvents:UIControlEventTouchUpInside];

        [cell addSubview:additem];
        }

    }else{
        cell.textLabel.text = [filteredString objectAtIndex:[indexPath row]];
        cell.imageView.frame = CGRectMake(0, 0, 54, 33);
        UIImage *PlacePhoto3 = [UIImage imageNamed:[self.imageCompany objectAtIndex:[indexPath row]]];
        cell.imageView.image = PlacePhoto3;

        //ปุ่มบวก
        additem =[UIButton buttonWithType:UIButtonTypeContactAdd];
        additem.frame = CGRectMake(275, 11, 29, 29);
        additem.tag = 100+indexPath.row;
        [additem addTarget:self action:@selector(addNewItem:) forControlEvents:UIControlEventTouchUpInside];

       [cell addSubview:additem];

    }

    return cell;
}

-(void)setcheck :(int )index{
    checkArray[index] = 0;
}

- (IBAction)backPage:(id)sender {
    ChooseViewController *cvc = [[ChooseViewController alloc]init];
    [cvc viewDidLoad];
} 
```

选择视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ChooseViewController : UITableViewController
@property (strong, nonatomic) IBOutlet UITableView *tableView;

@end 
```

选择视图控制器.m

```
#import "ChooseViewController.h"
#import "ListViewController.h"
#import "MultiViewController.h"

@interface ChooseViewController ()

@end

@implementation ChooseViewController
NSMutableArray *Imagename;
NSMutableArray *namecoms;
int tableCount;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization

    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    tableCount = 0 ;

    self.navigationItem.leftBarButtonItem = self.editButtonItem;
    Imagename = [[NSMutableArray alloc]init];
    namecoms = [[NSMutableArray alloc]init];

    ListViewController *list = [[ListViewController alloc]init];

    Imagename = [[NSMutableArray alloc]initWithArray:[list nameImage]];
    namecoms = [[NSMutableArray alloc]initWithArray:[list nameCom]];
    tableCount = namecoms.count;

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
//#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
//#warning Incomplete method implementation.
    // Return the number of rows in the section.
    return tableCount;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CellChoose"];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"CellChoose"];
    }

    cell.textLabel.text = [namecoms objectAtIndex:indexPath.row];
    UIImage *Photo3 = [UIImage imageNamed:[Imagename objectAtIndex:indexPath.row]];
    cell.imageView.image = Photo3;

    return cell;
}

// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{

    // Request table view to reload

    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source ฟังชั่น delete cell  ออก

        //[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]withRowAnimation:YES];

        NSLog(@"%@",[namecoms objectAtIndex:indexPath.row]);
        //[Imagename removeObject:namecoms];
        //[namecoms removeObject:Imagename];
        //ListViewController *objList = [[ListViewController alloc]init];
       // [objList setcheck:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
            [Imagename removeObjectAtIndex:indexPath.row];
            [namecoms removeObjectAtIndex:indexPath.row];
        [tableView reloadData];

}
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }
}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if ([segue.identifier isEqualToString:@"chooseMulti"])
    {
    MultiViewController *MTC = [[MultiViewController alloc]init];
    MTC = [segue destinationViewController];
    NSIndexPath *path = [self.tableView indexPathForSelectedRow];
    NSString *placename = [namecoms objectAtIndex:[path row]];
    MTC.comnumber = path.row;
    MTC.companyName = placename;
    }
}

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

跑！回复......

```
#import <UIKit/UIKit.h>

#import "CTASIAAppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([CTASIAAppDelegate class]));
    }
} 
```

**谢谢你。帮帮我。:)**

* * *

我做到了。同样的错误

```
#import <UIKit/UIKit.h>

#import "CTASIAAppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([CTASIAAppDelegate class]));
    }
} 
```

发生了什么事？...................... (TT)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:50:44.113

在您的代码中：

```
[tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
[tableView reloadData];
[Imagename removeObjectAtIndex:indexPath.row];
[namecoms removeObjectAtIndex:indexPath.row]; 
```

首先删除对象，然后重新加载数据。

```
[tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
[Imagename removeObjectAtIndex:indexPath.row];
[namecoms removeObjectAtIndex:indexPath.row];
[tableView reloadData]; 
```

在从数据中删除对象之前重新加载数据，代码就会崩溃。

# java - 拦截并重定向到另一个端口的 Servlet

> ID：13680545
> 
> 赞同：0
> 
> 时间：2012-12-03T09:41:02.187
> 
> 标签：java, web-applications, servlets, port, servlet-filters

我有一台运行两台服务器的机器：-

*   一个*Java Web 容器*( `Weblogic`)，以及
*   非*Java Web 服务器*

显然在两个不同的端口`7001`和`15000`.

服务器（及其网络）的安全策略限制只允许我们`Java web container`远程访问（只有它的端口是可访问的）。

我需要在我的 Java Web 容器上部署一个 servlet 或过滤器，它将某些请求重定向到非 Java Web 服务器并返回它们的结果。

有没有可用的`Servlet`或者`filter`哪个可以做到这一点？

我可以将文件上传到*非 Java Web 应用程序*（从同一台机器访问时）。是否可以通过*端口映射 Servlet*启用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:05:32.043

如果只有一台服务器是公开可用的，那么重定向将无济于事，因为浏览器将无法访问他被重定向到的端口。在这种情况下，您需要的是 WebLogic 中的代理。例如[Jetty Proxy Servlet](http://docs.codehaus.org/display/JETTY/Asynchronous+Proxy+Servlet)，但我不知道它的可移植性如何，它也可能需要 servlet 3.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:06:27.103

没有*标准*的方法可以做到这一点。换句话说，JavaEE 规范中没有任何内容要求容器提供此类功能。

你必须自己写。为此，我会使用过滤器而不是 Servlet。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:10:42.223

你不能重定向，因为重定向是客户端的，你需要做最简单的代理。您可以创建一个接受一些 param=web-url 的 servlet，然后使用 URLConnection 或 commons http 客户端连接到此 URL，然后您只需将进入的页面写入 servletResponse。根据页面内容，您可能还需要传递一些 http 标头，但在最简单的情况下，架构就像我描述的那样

# php - 我可以使用 php Web 服务将 android(Eclipse) 连接到 SQL Server(2005) 吗？

> ID：13680546
> 
> 赞同：4
> 
> 时间：2012-12-03T09:41:04.810
> 
> 标签：php, android, sql, eclipse, json

我已经阅读了这个网站本身关于从 android 访问 db 的一些问题。但我仍然无法确定是否可以使用 php Web 服务将 android(Eclipse) 连接到 SQL Server(2005)？

我需要将 Android 应用程序连接到 SQL Server，并且我熟悉使用 JSON 和 PHP Web 服务连接到 MySQL Server。

大多数网站建议使用B4A和ASP.Net连接到SQL Server，我不知道。使用Eclipse和ASP.Net怎么样（嗯，这需要我学习ASP.Net）？

连接到 SQL 服务器和连接到 MySQL 服务器有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T14:23:41.347

连接到 MySQL 服务器和 MSSQL 服务器应该只是在 PHP 中使用不同的数据库驱动程序。例如 mysql 将使用 mysql_connect 而 mssql 将使用 mssql_connect。您用于数据库的内容对于您的 android 应用程序而言应该无关紧要。除非您想在手机上使用 SQLlite 之类的数据库，否则您的 android 应用程序在您的手机上是隔离的。对于您的情况，您将需要创建一个您的 android 应用程序可以调用的 restful API。我在自己的连接到 RESTful api 的 android 应用程序中做了同样的事情。我使用 json 来回传递数据，你也可以使用 XML。我只是发现 json 更容易使用。那时不需要 SOAP Web 服务。将 Web 服务视为您设置为执行一组 php 命令然后返回结果的位置，就这么简单。

# android - Android：如何获取系统偏好值

> ID：13680551
> 
> 赞同：0
> 
> 时间：2012-12-03T09:41:22.970
> 
> 标签：android, android-preferences

如何获取 Android 系统偏好/设置的值（即不是我自己定义的），例如手机当前是否处于静音模式？

我一直在尝试寻找系统偏好键列表，但找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:45:33.500

[Settings.System](http://developer.android.com/reference/android/provider/Settings.System.html)包含系统设置列表以及设置和获取其值的方法。

# java - Java3D离屏渲染内存泄漏

> ID：13680558
> 
> 赞同：2
> 
> 时间：2012-12-03T09:41:58.857
> 
> 标签：java, memory-leaks, rendering, java-3d, off-screen

为了能够保存我的 3d 画布的快照，我`Canvas3D`以以下方式进行了扩展：

```
class OffScreenCanvas3D extends Canvas3D {
    OffScreenCanvas3D(GraphicsConfiguration graphicsConfiguration, boolean offScreen) {
        super(graphicsConfiguration, offScreen);
    }

    public BufferedImage doRender(int width, int height) {      
        BufferedImage bImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
        ImageComponent2D buffer = new ImageComponent2D(ImageComponent.FORMAT_RGBA, bImage);
        setOffScreenBuffer(buffer);
        renderOffScreenBuffer();
        waitForOffScreenRendering();
        bImage = getOffScreenBuffer().getImage(); 
        setOffScreenBuffer(null);
        return bImage;
    }

    public void postSwap() {}
} 
```

我将它添加为宇宙的视图。这里描述了一个主要策略：[http ://www.java2s.com/Code/Java/3D/PrintCanvas3D.htm](http://www.java2s.com/Code/Java/3D/PrintCanvas3D.htm)

问题在于内存泄漏。我的应用程序开始崩溃，当我尝试分析时，我发现一个实例`OffScreenCanvas3D` 占用了将近**50MB**，其中大部分来自两个`ArrayList`s。较小的包含 的实例，`javax.media.j3d.RenderMolecule`较大的包含 Object 的实例，每个实例都包含`javax.media.j3d.RenderAtomListInfo`和`javax.media.j3d.RenderMolecule`。

任何人都可以建议我，我做错了什么？

### 更新

我想澄清的是，即使`doRender`根本没有调用（例如，应用程序已启动并且没有采取更多操作），内存仍在累积。下面我将添加可以更好地显示情况的图像。

第一个是空闲运行应用程序的内存图。 ![记忆力](../Images/3af5ca5cbdd9e2fcd59f562f99fb8abe.png)

第二个是对象占用内存的饼图。这`(a)`是为 的实例分配的内存`OffScreenCanvas3D`，`(b)`是所有其他对象占用的内存。 ![内存饼图](../Images/bdecb19487834271b9cf612360b51e41.png)

同样在下面，您可以看到`dirtyDlistPerRinfoList`并`dirtyRenderMoleculeList`占用大部分空间。*任何带有dirty*前缀的东西都给我一种代码不好的感觉，我不知道为什么 ![在此处输入图像描述](../Images/06f97c20c6273e7372af2b08c3fd343a.png)

### 更新2

看来问题出在接下来的部分：

1.  的对象`dirtyDlistPerRinfoList`被添加到类的`updateCanvasResource`方法中`RenderBin`。这发生在所有画布上。
2.  `dirtyDlistPerRinfoList``updateDirtyDisplayLists`在类的方法中被清除`RenderBin`。
3.  `updateDirtyDisplayLists`对于每个正在渲染的 Canvas3D，在类中从`doWork`（可怕的 1300 行方法）调用。`Renderer`

事情是offScreen画布不是一直在渲染，而是在图像将要保存的那一刻。是的，保存图像后，所有累积的内存`dirtyDlistPerRinfoList`都会被释放。

所以接下来的主要问题是：

> 的数据`dirtyDlistPerRinfoList`不断添加到未渲染的画布中，因此不会删除内存。这是我的Java3D错误的错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:05:47.380

没有什么。Java 3D 应用程序至少需要 25+ MB 内存以及在 RenderMolecule 和 RenderAtomListInfo 类中存储模型所需的内存。请注意，BufferedImages 也会根据它们的大小消耗大量内存。不时调用 System.gc() 可能会有所帮助。BufferedImages 不是那么容易删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T13:29:25.620

在被调用之后，您`OffScreenCanvas3D`恰好是该方法的主题。您可以通过覆盖来证明这一点。添加：`doRender``Renderer.doWork``preRender()`

```
@Override
public void preRender() {
    System.out.println("OffScreenCanvas3D preRender !!!!!!!!!!!!!!!");
} 
```

实例的脏列表将在之后被清除（如上所述）并在下一个快照时重新使用。

有时名称可能会产生误导。带有前缀“dirty”的列表包含强制下一个渲染循环进行必要更新的对象。

Java 3D 肯定会创建大量冗余数据来将场景图数据与渲染数据分开。您的好处之一是您可以随时在任何用户线程上调用（几乎）任何 Java 3D API 方法。无需将 Java 3D 代码封装在`Runnable`s 中，因为 Swing 和 JavaFX 交互或其他构造需要它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-10T10:38:23.290

JDK 工具 JConsole 允许监视应用程序的内存使用情况。您可以执行垃圾收集器 (GC) 并检查内存是否已释放。

在你的程序中调用“java.lang.System.gc()”会产生同样的效果。

Java 3D 应用程序本身没有内存泄漏。在撰写这篇文章时，4-Canvas3D 示例程序 PropellerUniverse 正在运行并由 JConsole 监控。每隔几秒钟，JRE 就会自动启动垃圾收集。堆内存使用量为 25 MB，非堆内存使用量为 34 MB。该程序现在运行 25 分钟。[http://www.interactivemesh.org/testspace/j3dmeetsswing.html#heavyweight](http://www.interactivemesh.org/testspace/j3dmeetsswing.html#heavyweight)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T14:33:55.633

尝试消除每一步，直到找到仍然存在问题的示例。仅执行以下操作时是否仍然出现问题？

```
// Moved this to be a field
BufferedImage bImage = new BufferedImage(width, height, BufferedImage.TYPE_INT_ARGB);
ImageComponent2D buffer = new ImageComponent2D(ImageComponent.FORMAT_RGBA, bImage);

OffScreenCanvas3D(GraphicsConfiguration graphicsConfiguration, boolean offScreen) {
    super(graphicsConfiguration, offScreen);
    // set this just once
    setOffScreenBuffer(buffer);
}

public BufferedImage doRender(int width, int height) {
    renderOffScreenBuffer();
    waitForOffScreenRendering();

    // not necessary, image does not change
    // bImage = getOffScreenBuffer().getImage(); 
    // why is this necessary?
    // setOffScreenBuffer(null);

    return bImage;
} 
```

# ajax - 为什么 .NET MVC 无法将 AJAX 上传的文件绑定到 HttpPostedFileBase？

> ID：13680562
> 
> 赞同：2
> 
> 时间：2012-12-03T09:42:20.897
> 
> 标签：ajax, asp.net-mvc-3, file-upload, httppostedfilebase

在 .NET MVC 3 项目中，我一直在为 AJAX 文件上传而苦苦挣扎，并且在研究过程中发现了几个问题。

首先，Stack Overflow 上似乎有很多问题表明无法通过 AJAX 上传文件。我认为所有这些答案都来自 XMLHttpRequest Level 2 规范之前的时间，但现在更新它们可能是个好主意。

考虑到我当前的问题，我正在尝试管理上传到我的控制器中，但是我遇到了很大的困难，因为我无法使用 HttpPostedFileBase 加载上传的文件（就像我在普通表单文件上所做的那样上传）。

我的问题是……为什么会这样？我的意思是...当您通过 AJAX 发送文件时，发送到服务器的 POST 包含与通过表单发送文件时相同的信息，不是吗？并且文件仍然在 Request.Files 中，然后......为什么控制器不能将该信息绑定到作为参数传递给控制器​​的 HttpPostedFileBase 实例？

编辑：我按照评论中的建议添加了 AJAX 上传代码示例：

```
$("#uploadButton").click(function () {
    if (window.FormData) {
        var theFile = $('input[type="file"]').get(0).files[0];
        var formData = new window.FormData();
        formData.append("importedFile", theFile);
        $.ajax({ async: false,
            url: $.url("Courses/Import/"),
            type: "POST",
            data: formData,
            cache: false,
            processData: false,
            contentType: "multipart/form-data",
            success: function (res) {
                $("#response").innerHTML = res;
            }
        });
        return false;
    }
}); 
```

在服务器端，控制器：

```
[HttpPost]
public ActionResult Import(HttpPostedFileBase importedFile) {
    //Here importedFile is null, however Request.Files[0] contains the uploaded file.
} 
```

# javascript - 受键盘大小影响的列表

> ID：13680565
> 
> 赞同：0
> 
> 时间：2012-12-03T09:42:24.113
> 
> 标签：javascript, html, css, cordova

我在移动设备上显示一个`HTML`列表。`phonegap`当键盘打开时，我显示动态列表，但在键盘关闭后，列表仅显示在顶部区域，没有键盘的大小，**list（height）-keyboard（height）。**

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:30:06.937

我在 Galaxy Nexus 4.0.4 上遇到了同样的问题。在配备 4.1 的 Galaxy S2 上，它工作正常。我想过尝试 android:windowSoftInputMode="adjustPan"。但是这个解决方案的问题是，键盘覆盖了一些内容。

# javascript - json 到 Highstocks 系列数据的问题，仅导航器仅显示某些缩放级别的数据

> ID：13680567
> 
> 赞同：0
> 
> 时间：2012-12-03T09:42:28.170
> 
> 标签：javascript, jquery, arrays, highcharts, highstock

问题：我成功查询了 Yahoo Finance API，我想将一个多维数组输出到 Highstock 图表。但是，数据仅在导航器中呈现，而不是某些缩放级别的主图表。

问题：谁能告诉我哪里出错了，或者这是一个错误？

注意：Highstocks 在 series.data 中需要这样的数据：[http](http://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback=) ://www.highcharts.com/samples/data/jsonp.php?filename=aapl-c.json&callback= ？

这是一个现场演示：[http ://stevebrown.co/highstock/](http://stevebrown.co/highstock/)

```
var quoteData = [];

$(function() {

    var url = "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.historicaldata%20where%20symbol%20%3D%20%22YHOO%22%20and%20startDate%20%3D%20%222009-09-11%22%20and%20endDate%20%3D%20%222010-03-10%22&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=";

    $.getJSON(url, function(

        $.each(data.query.results.quote, function(index, value) {
            var theTime = value.Date;
            var milliTime = new Date(theTime);
            milliTime = milliTime.getTime();

            var results = [milliTime, parseFloat(value.Low), parseFloat(value.High)];

            quoteData.push(results);

        })

    });

    setTimeout("createChart()", 1000);

});

        function createChart() {

        console.log('quoteData', quoteData);

        // Create the chart
        window.chart = new Highcharts.StockChart({
            chart : {
                renderTo : 'container'
            },

            rangeSelector : {
                selected : 1
            },

            title : {
                text : 'AAPL Stock Price'
            },

            series : [{
                name : 'AAPL',
                data : quoteData,
                tooltip: {
                    valueDecimals: 2
                }
            }]
        });

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T19:20:52.070

问题是你的月经是从`2010-03-10`到`2009-09-11`，应该是从`2009-09-11`到`2010-03-10`。
所以，你只需要反转你的数据数组。
以下行将解决此问题。

`quoteData = quoteData.reverse();`

# jquery - 尝试设置 jQuery File Upload 以显示刚刚上传的图片

> ID：13680570
> 
> 赞同：0
> 
> 时间：2012-12-03T09:42:35.833
> 
> 标签：jquery, ruby-on-rails, paperclip

我正在关注 Railscasts Episode #381 来设置 jQuery File Upload 以将文件上传到 Rails 3 上的服务器。

是的，我使用 jQuery File Upload + Paperclip 使其功能齐全。

工作正常。但我不太明白如何在不重新加载页面的情况下显示刚刚上传的图片。

RailsCast 的作者说“只需更改控制器，使其看起来像这样”

```
 def create
    @picture = Picture.create(params[:picture])
  end 
```

（做过某事）

“然后使用以下代码创建一个 create.js.erb 模板”

```
<% if @picture.new_record? %>
    alert("Failed to upload picture");
<% else %>
    $("body").append("<% j render(@picture) %>");
<% end %> 
```

（我不明白我必须把它放在哪个文件夹中。尝试进入 app/views/pictures/ 但它没有被触发）。

所以我想问题是 - 提交新图片时如何触发“create.js.erb”。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:22:51.237

像这样解决它：

```
<% if @picture.new_record? %>
    alert("Failed to upload picture");
<% else %>
    $("table").append('<tr><td><%= image_tag @picture.file.url(:small) %></td></tr>');
<% end %> 
```

# javascript - 重定向后获取

> ID：13680571
> 
> 赞同：0
> 
> 时间：2012-12-03T09:42:36.190
> 
> 标签：javascript, form-submit, reload

我正在使用`javascript`方法重新加载/刷新页面`document.location.reload()`。我收到警报消息：

```
The browser needs to resend the information 
```

如何避免此警报消息并重新加载我的页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:50:41.193

您是否需要进行完整的重新加载，包括将之前发布的数据发送到服务器？如果您需要“重新加载” POST 的结果，那么如果没有警告消息，您将无法执行此操作，但是如果您只想再次获取同一页面，您可以使用`window.location = window.location;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:49:09.803

你不能。由于表单帖子，几乎所有浏览器在重新加载时都会发出类似的警报。

如果购买是在网上进行的，它很可能会使用表格。如果该表格被重新提交，可能会导致再次付款。这就是为什么我们会从浏览器中收到警告，以阻止我们意外地重新提交表单。

我建议，在您成功提交表单后，将您的页面重定向到自身而不重新提交表单。然后你可以重新加载你的心内容。

# python - Cron jobbin'一个python脚本：中途停止

> ID：13680572
> 
> 赞同：0
> 
> 时间：2012-12-03T09:42:41.820
> 
> 标签：python, cron

我正在尝试 cronjob 我的 python 脚本。我通过 cPanel 设置它，我的 python 脚本生成一个 html 文件，就像它应该的那样，所以我知道它正确的命令（只是“python /path”对吗？）

但是，我生成的 html 中途停止（在第二个 f.write() 之后，当我的 for 循环应该开始时）。

当我在本地执行这个脚本时，我没有遇到任何问题，什么给出了？

```
from SearchPhone import SearchPhone

phones = ["Iphone 3", "Iphone 4", "Iphone 5","Galaxy s3", "Galaxy s2", "LG Lucid", "LG Esteem", "HTC One S", "Droid 4",
          "Droid RAZR MAXX", "HTC EVO", "Galaxy Nexus", "LG Optimus 2", "LG Ignite",
          "Galaxy Note", "HTC Amaze", "HTC Rezound", "HTC Vivid", "HTC Rhyme", "Motorola Photon",
          "Motorola Milestone", "myTouch slide", "HTC Status", "Droid 3", "HTC Evo 3d", "HTC Wildfire",
          "LG Optimus 3d", "HTC ThunderBolt", "Incredible 2", "Kyocera Echo", "Galaxy S 4g",
          "HTC Inspire", "LG Optimus 2x", "Samsung Gem", "HTC Evo Shift", "Nexus S", "LG Axis", "Droid 2",
          "G2", "Droid x", "Droid Incredible" 
          ]

f = open('celly.html','w')

f.write("""<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Celly Blue Book</title>
</head>

<body>
</body>
</html>
""")

#table
f.write('<table width="100%" border="1">')
for x in phones:
    y = SearchPhone(x)
    f.write( "\t<tr>")
    f.write( "\t\t<td>" + str(y[0]) + "</td>")
    f.write( "\t\t<td>" + str(y[1]) + "</td>")
    f.write( "\t\t<td>" + str(y[2]) + "</td>")
    f.write( "\t\t<td>" + str(y[3]) + "</td>")
    f.write( "\t\t<td>" + str(y[4]) + "</td>")
    f.write( "\t</tr>"

f.write('</table>')

f.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:45:28.797

1.  for 循环的最后一行有语法错误：

    `f.write( "\t</tr>"`

2.  您可能没有生产服务器的写入权限。试试这个。

`f = open('/tmp/celly.html','w')`

如果这有效，那么它是一个写权限问题。检查 `celly.html`当前文件夹中文件的权限。它应该是可写的。

# objective-c - 使设备振动

> ID：13680575
> 
> 赞同：-1
> 
> 时间：2012-12-03T09:42:59.357
> 
> 标签：objective-c, ios

我想通过代码振动 iOS 设备。

我使用了以下方法。但我无法做到这一点。

*   1)`AudioServicesPlayAlertSound(kSystemSoundID_Vibrate);`

*   2)`AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);`

当我在 ipod 或 ipad 上运行我的游戏时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-30T11:20:34.547

iPad 不支持物理振动。您只能在 iPhone 和更新版本的 iPod 中使用这些代码。

# html - 如何使用css在表格中创建垂直列

> ID：13680578
> 
> 赞同：1
> 
> 时间：2012-12-03T09:43:09.200
> 
> 标签：html, css

我想以下面的格式创建一个 html 表格。

![在此处输入图像描述](../Images/057d5f77bcc6069ebe3391e303aa056d.png)

我无法找到一种方法来做到这一点。谁能帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T09:48:48.490

我不认为你可以有一个完全跨浏览器的解决方案，无论如何试试这个：

```
.verticalText {
  -webkit-transform: rotate(-90deg);
  -moz-transform: rotate(-90deg);
  -ms-transform: rotate(-90deg);
  -o-transform: rotate(-90deg);
  transform: rotate(-90deg);
  filter: progid: DXImageTransform.Microsoft.BasicImage(rotation=3);
}
```

```
<table border="1">
  <tbody>
    <tr>
      <td rowspan="4">
        <div class="verticalText">one</div>
      </td>
      <td>One</td>
      <td>Other</td>
    </tr>
    <tr>
      <td>One</td>
      <td>Other</td>
    </tr>
    <tr>
      <td>One</td>
      <td>Other</td>
    </tr>
    <tr>
      <td>One</td>
      <td>Other</td>
    </tr>
  </tbody>
</table>
```

在 HTML 部分，您使用属性“rowspan”来告诉单元格 (td) 跨越 n 行；您必须在随后的“跨区”单元格中删除相对单元格声明。属性“colspan”在水平方向上也是如此。此类属性的默认值为 1，并且是隐式的。

CSS 部分尝试垂直渲染图像中的文本，但它还不是 CSS 标准，因此您必须在各种浏览器中尝试。如果您无法实现完全兼容，如果文本不是动态的，您可能会被迫按图像呈现该文本。

编辑 HTML 以包含文本容器，如注释中所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:37:46.343

使用这里`rowspan`查看[**演示**](http://jsfiddle.net/ARFpj/4/)

`rowspan`添加新行时需要更改数字。

# mysql - MYSQL SELECT max(ID) WHERE Onderdeel_ID=$Onderdeel_ID

> ID：13680580
> 
> 赞同：0
> 
> 时间：2012-12-03T09:43:14.180
> 
> 标签：mysql, select

> $result = mysql_query("SELECT max(Cardex_ID) FROM cardex WHERE Onderdeel_ID=$Onderdeel_ID"); if (!$result) { die('无法查询：' . mysql_error()); }

```
 $Cardex_ID = mysql_result($result, 0, 'Cardex_ID');

    echo $Cardex_ID;

    mysql_query("UPDATE cardex SET PADate=$PAdate, PAhours=$PAhours, PAcycles=$PAcycles, PAlanding=$PAlanding WHERE Cardex_ID=$Cardex_ID"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:51:24.917

我建议您使用[PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)连接到您的数据库，而不是使用该通用连接。此外，如果 $Onderdeel_ID 是一个数字，则您不需要`""`

```
 $db = new PDO ('mysql:host=localhost;dbname=DB_NAME','DB_USER','DB_PASS');
    $sql = 'SELECT max(Cardex_ID) FROM cardex WHERE Onderdeel_ID='. $Onderdeel_ID;
    $result = $db->query($sql)->fetch(PDO::FETCH_ASSOC);
    echo 'SELECT';
    if (!$result) {
      echo 'RESULT';
    } 
```

注意：同样有效和首选的是使用该语句`prepare`来防止 SQL 注入：

```
 $db = new PDO ('mysql:host=localhost;dbname=DB_NAME','DB_USER','DB_PASS');
    $db->prepare ( 'SELECT max(Cardex_ID) FROM cardex WHERE Onderdeel_ID=:Onderdeel_ID');
    $result = $db->execute( array( ':Onderdeel_ID' => $Onderdeel_ID ) ); 
```

此外，如果您一直遇到问题，请检查您`$Onderdeel_ID`是否已通过。一个简单的`var_dump($Onderdeel_ID);`就可以了

# java - 如何使用 JPDA 调试 jmeter-server？

> ID：13680582
> 
> 赞同：0
> 
> 时间：2012-12-03T09:43:17.720
> 
> 标签：java, jmeter, jmeter-plugins

我正在为 JMeter 开发插件，我想在运行时从 Intellij IDEA 连接到 jmeter-server。我在 jmeter.bat 中添加了以下字符串：

```
set JVM_ARGS=-Xdebug -Xrunjdwp:server=y,transport=dt_socket,address=1099, suspend=n 
```

但是当我尝试连接时，我收到以下错误：

```
Listening for transport dt_socket at address: 1099
java.lang.NoClassDefFoundError: suspend=n
Caused by: java.lang.ClassNotFoundException: suspend=n
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: suspend=n.  Program will exit.
Exception in thread "main" errorlevel=1 
```

我已经在同一台机器上启动了 jmeter 和 jmeter-server，但是为 jmeter-server 指定了端口。你能解释一下，我做错了什么吗？

正如我被告知的那样，我试图删除 JVM_ARGS 中的额外空间，但仍然出现错误：

```
 Found ApacheJMeter_core.jar
Listening for transport dt_socket at address: 1099
Created remote object: UnicastServerRef [liveRef: [endpoint:[192.168.56.1:50900](local),objID:[-6928e8c:13b637ed53e:-7fff, 6493737834091623438]]]
Problem creating registry: java.rmi.server.ExportException: Port already in use: 1099; nested exception is: 
    java.net.BindException: Address already in use: JVM_Bind
Continuing...
Server failed to start: java.rmi.RemoteException: Cannot start. See server log file.; nested exception is: 
    java.rmi.ConnectIOException: error during JRMP connection establishment; nested exception is: 
    java.io.EOFException
An error occurred: Cannot start. See server log file.; nested exception is: 
    java.rmi.ConnectIOException: error during JRMP connection establishment; nested exception is: 
    java.io.EOFException
Debugger failed to attach: timeout during handshake 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:00:52.170

参数前有一个额外的空格`suspend`，导致 JVM 将其解释为第一个非选项参数（即主类名）。

尝试将上面的行替换为：

```
set JVM_ARGS=-Xdebug -Xrunjdwp:server=y,transport=dt_socket,address=1099,suspend=n 
```

# java - Spring - Path 的工厂方法

> ID：13680584
> 
> 赞同：6
> 
> 时间：2012-12-03T09:43:35.127
> 
> 标签：java, spring, factory, factory-method

我正在尝试生成一个表示`java.nio.file.Path`使用静态方法的 bean `Paths.get(String path)`。我当前的 Spring 设置如下所示：

```
<bean id="myPath" class="java.nio.file.Paths" factory-method="get">
    <constructor-arg value="c:\\tmp\\" />
</bean> 
```

但它回来了一个 excpetion `No matching factory method found: factory method 'get'`。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T10:03:14.813

java.nio.file.Paths.get 需要 URI。此外，这是 xml 而不是 java 不要使用 \\

试试看

```
file:/C:/tmp/ 
```

如果您对 URI 语法有疑问，请访问[http://en.wikipedia.org/wiki/File_url](http://en.wikipedia.org/wiki/File_url)

# django - 如何在 Settings.py 中将默认时区配置为新加坡

> ID：13680586
> 
> 赞同：0
> 
> 时间：2012-12-03T09:43:37.127
> 
> 标签：django, timezone

我正在尝试将 settings.py 中的默认时区配置为“亚洲/新加坡”

但是，在我这样做之后，页面没有加载，我被发送到错误页面。

目前我正在通过将 TIME_ZONE 设置为 None 来处理它

![在此处输入图像描述](../Images/cee0c3e9d162b6aa32ea8b168d2f9bbd.png)

![在此处输入图像描述](../Images/2683ac3791aa842cb1ac62060a59fb14.png)

杂项：我下载了 python pytz

我想显示服务器时间（网站上的+8 GMT新加坡时间）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:26:34.423

我试过你的 django 和 pytz 版本。一切正常。然后我尝试了其他版本的 django 和 pytz。它也工作得很好。所以我只发现了关于这个问题的两个想法：

1）也许是关于输入 'Asia/Singapore' 的方法。您的键盘是否有两种输入符号的方式，例如 a？所以你看，我的名字是'Павел Тявин'，它有一个西里尔字母'а'，与拉丁语'a'非常相似，但可以对python产生影响

2）也许您的 ../pytz/zoneinfo 目录无权从 django 中查看？您可以使用`chmod`命令更改用户权限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:14:28.570

请安装[pytz](http://pytz.sourceforge.net/)。如果您安装了 setuptools，它就像运行一样简单`easy_install --upgrade pytz`

我正在运行安装了 pytz 的 Python 2.7.3，我可以将时区设置为 `TIME_ZONE = 'Asia/Singapore'`没有问题。

# c++ - 使用 std::function 移动语义

> ID：13680587
> 
> 赞同：23
> 
> 时间：2012-12-03T09:43:40.697
> 
> 标签：c++, c++11, standards

`std::function`从右值 ref 提供构造函数。按照标准，移动的函数对象会发生什么？它会是空的，因此再次调用它没有效果吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-03T15:36:10.657

围绕这个问题有太多的困惑。我会尽量把事情说清楚...

本节描述标准定义对象的移出状态：

17.6.5.15 [lib.types.movedfrom]

> C++ 标准库中定义的类型的对象可以从 (12.8) 中移出。移动操作可以显式指定或隐式生成。除非另有说明，否则此类移出的对象应置于有效但未指定的状态。

这是什么意思？这意味着给定一个标准定义的移动对象，您可以对该对象执行任何操作，而无需先验地了解该对象的状态。不需要对当前状态的先验知识的动作类别是那些没有先决条件的动作。

例如，您可以调用`clear()`move-from，`vector`因为在 上没有先决条件`vector::clear()`。但是你不能打电话`pop_back()`，因为那确实有先决条件。

特别看一下以下的呼叫操作员`function`：

20.8.11.2.4 [func.wrap.func.inv]

```
R operator()(ArgTypes... args) const 
```

> 效果：INVOKE(f, std::forward(args)..., R) (20.8.2)，其中 f 是 *this 的目标对象 (20.8.1)。
> 
> 返回：如果 R 为 void，则返回无，否则返回 INVOKE (f, std::forward(args)..., R) 的值。
> 
> 抛出：bad_function_call if !*this; 否则，包装的可调用对象引发的任何异常。

请注意，没有前置条件或 Requires 子句。这意味着调用`function`移动源的调用运算符`function`不是未定义的行为。无论处于何种状态`function`，您都不会在此调用中违反任何先决条件。

请注意，在任何情况下，规范都没有说调用无效。所以没有效果是不可能的。

该调用将调用包装函数，或抛出一个`bad_function_call`. 这是仅有的两个选择。它的行为取决于`function`对象的状态。并且`function`对象的状态是未指定的（[lib.types.movedfrom]）。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-03T09:48:01.347

`function(function &&f)`在20.8.11.2.1p6 下，*`f`处于未指定值的有效状态*。

空状态是有效状态，因此您应该期望移出的函数对象可以为空。

因为`function`执行类型擦除，并且函数对象可能非常昂贵，所以将移动对象留空的优化是有意义的：

```
std::function<void()> g{std::bind{f, std::array<int, 1000>{}}};
std::function<void()> h{std::move{g}}; 
```

在`h`通过 move from 构建之后`g`，人们会期望包含的内容`bind`已经从`g`to转移`h`而不是复制，因此`g`将留空。

对于以下程序，gcc 4.5.1 打印`empty`：

```
#include <functional>
#include <iostream>
void f() {}
int main() {
    std::function<void()> g{f}, h{std::move(g)};
    std::cout << (g ? "not empty\n" : "empty\n");
} 
```

这不一定是最佳行为；内联小型可调用对象（例如函数指针）会造成复制可调用对象比移动它并清空移出对象更有效的情况，因此另一个实现可能会`g`处于非空可调用状态。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-03T09:55:32.517

> 按照标准，移动的函数对象会发生什么？

它将处于有效状态（因此可以使用该对象），但它所处的实际状态是未指定的。最后一部分意味着调用任何需要对象处于*特定*状态的函数不一定会起作用。

> 它会是空的，因此再次调用它没有效果吗？

你*不能*假设它会。调用该函数需要它实际上有一个要调用的函数。这是其状态的一部分。并且由于状态是未指定的，调用它的结果是未指定的。

如果您想再次以某种有意义的方式使用该对象，只需创建一个新对象`function`并将其分配给它：

```
function<...> old;
function<...> new_ = std::move(old);
old = function<...>(...); //Reset to known state.
old(...); //Call is well-defined. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T09:49:58.393

[func.wrap.func.con]：

```
function(function&& f);
template <class A> function(allocator_arg_t, const A& a, function&& f); 
```

> 效果：如果 !f，*this 没有目标；否则，将 f 的目标移动构造成 *this 的目标，使 f 处于未指定值的有效状态。

# c# - MVC3 自定义 VirtualPathProvider 不呈现 Razor

> ID：13680588
> 
> 赞同：1
> 
> 时间：2012-12-03T09:43:48.687
> 
> 标签：c#, asp.net-mvc-3

我试图在[这里复制这个例子](https://stackoverflow.com/questions/3367106/pulling-a-view-from-a-database-rather-than-a-file/13668845#13668845)。

我所做的唯一更改是更改它将输出的文本：

```
public override System.IO.Stream Open() 
{
    return new System.IO.MemoryStream(System.Text.ASCIIEncoding.ASCII.GetBytes("@inherits System.Web.Mvc.WebViewPage\r\n@{ViewBag.Title = \"About Us\";}\r\n"));
} 
```

但我似乎无法说服它评估 Razor 加价。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:05:50.100

Gah，正是这个，但数据库中的数据似乎可以工作：我认为这可能与我手动插入的回车有关......哦，好吧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:36:59.070

尝试使用 UTF8 编码而不是 ASCII

# objective-c - 复制图标 Photos.app

> ID：13680590
> 
> 赞同：1
> 
> 时间：2012-12-03T09:43:51.993
> 
> 标签：objective-c, ios, uibutton, popover, uipasteboard

我正在实现像 Photos.app （使用 UIPasteboard）这样的图像复制功能。像 Photos.app 我想显示一个“复制”弹出按钮：

![在此处输入图像描述](../Images/fb0eec04b38cd0c46c464f8f4788cf23.png)

是否有官方 API 来创建这个按钮，还是我必须自己做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:47:59.803

您可以使用`UIMenuController`.

# java - 是否可以在 Java 中使用正则表达式在 + 和 - 之间切换？

> ID：13680594
> 
> 赞同：6
> 
> 时间：2012-12-03T09:43:57.363
> 
> 标签：java, regex, replace

```
6*x + 7 = 7*x + 2 - 3*x 
```

当我们将等式的右侧移动到左侧时，我们需要将运算符符号从 + 翻转到 - ，反之亦然。

使用 java regex `replaceAll`，我们可以将所有 + 替换为 -。结果，所有的操作符都变成了 -'s，使得我们无法恢复所有的 +'s。

作为一种解决方法，我遍历字符串并在遇到一个时将 + 更改为 - ，反之亦然。但我仍然想知道是否有办法在 Java 中使用正则表达式在布尔值对之间翻转？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T09:46:10.733

你可以使用这个技巧：

```
String equation = "<Your equation>"
equation = equation.replaceAll("+","$$$");
equation = equation.replaceAll("-","+");
equation = equation.replaceAll("$$$","-"); 
```

假设 $$$ 不在您的等式中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:19:17.940

在 PHP 中，可以执行以下操作：

```
function swap($m) {
    return ($m[0]=='-')?'+':'-';
}
echo preg_replace_callback( '(\+|\-)', 'swap', '1 + 2 - 3 + 4 - 5'); 
```

# javascript - 第一次打开内容时，ColorBox 的大小太小

> ID：13680596
> 
> 赞同：0
> 
> 时间：2012-12-03T09:44:08.047
> 
> 标签：javascript, jquery, colorbox

根据此[常见问题解答](http://www.jacklmoore.com/colorbox/faq#faq-img)，我的问题发生在 ColorBox 测量框大小之前未完成加载图像的情况。第二次它将从缓存中加载，因此 ColorBox 将知道图像大小。

常见问题中建议的分辨率是提前设置图像大小。

我的问题是我的图像的宽度和长度各不相同，而且我事先也不知道图像的大小。这种情况有什么已知的解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:54:03.187

`jQuery.colorbox.resize()`渲染后尝试调用。
它会`colorbox`重新计算它的高度和宽度。

# jquery - 如何使用 jQuery 创建一个 div

> ID：13680603
> 
> 赞同：-4
> 
> 时间：2012-12-03T09:44:39.403
> 
> 标签：jquery, html, button

早晨 ：）

我试图在每次使用 jQuery 按下一个按钮时创建一个 div。

```
$('#button_submit').click(function() 
{
//create a div inside a already existing div (<div id="save"></div>) with this parametres:
/*
<h3>Title</h3>
<div>
<p>
Some text
</p>
</div>
*/
}

<div id="save"></div> 
```

有什么帮助吗？:) 干杯

编辑：

```
//newArray is defined.
$("<button id=saved>").click(function() {
drawChart.apply(null, newArray);
}).text("click me") 
```

这个按钮也应该在新的 div 中。我可以轻松整合吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:53:31.730

我建议使用 show()-hide() 机制来实现您正在尝试的任何事情。

将标记放在原始 html 中，但将其设为“display:none”。当您需要将它“添加”到页面时 - “显示（）”它。它几乎总是更优越、更清洁。这样你就不需要用 javascript 构造 div。

但是如果必须动态添加元素，请使用[append](http://api.jquery.com/append/)

编辑：

我不太确定你的结构是什么，但如果你需要在里面设置按钮，请考虑以下选项：

1.  在原始标记中添加另一个按钮（如果您遵守我关于使用 show()-hide() 的建议）
2.  绝对定位按钮，然后将其移动到您想要的位置
3.  使用 jquery [appendTo](http://api.jquery.com/appendTo/)

请注意，其中一些选项可能不合适，具体取决于您的标记的其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T09:46:21.263

```
$('#button_submit').click(function(){
$('<h3>Title</h3><div><p>Some text</p></div>').appendTo('#save');
}); 
```

这会在 Save 中创建您想要的内容

**编辑更新**

```
$(document).ready(function(){
      function newFunction(){ 

         /*This is the new function*/

      }

$('#button_submit').click(function(){
        $('<h3>Title</h3><div><p>Some text</p></div><input type="button" value="saved" id="saved" onclick="newFunction()"/>').appendTo('#save');
      });
}); 
```

# css - 即使调整大小，如何使高度保持 100%？

> ID：13680604
> 
> 赞同：0
> 
> 时间：2012-12-03T09:44:42.633
> 
> 标签：css, height

我有一个高度为 100% 的 div，但是当我查看响应式布局并向下滚动时，100% 高 div 的背景颜色在我滚动后立即停止。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:15:09.040

高度的百分比测量基于页面高度。滚动是因为您的内容不适合高度为 100% 的块。但是为什么要将高度设置为 100%？尝试`height: auto;`

检查这个：http: [//jsfiddle.net/MzZt4/1/](http://jsfiddle.net/MzZt4/1/)

如果您想确保您的 div 不会比您的页面短，您可以尝试添加`min-height: 100%`：

# ios - 为什么在iOS中使用核心图形绘制的线的关节处会出现点？

> ID：13680607
> 
> 赞同：0
> 
> 时间：2012-12-03T09:44:51.683
> 
> 标签：ios, core-graphics

我正在使用下面的代码来绘制多边形。我得到的图像如下：

![在此处输入图像描述](../Images/44ec7cf577074ead37ab6f406d93533c.png)

我用于绘制正方形的代码如下：

```
CGContextRef currentContext = UIGraphicsGetCurrentContext();
[topLeftBoxBorderColor set];
CGContextSetLineWidth(currentContext, 1.0f);
CGContextSetLineJoin(currentContext,kCGLineJoinMiter);
CGContextMoveToPoint(currentContext, originXOfSubviews, originYOfSubviews);
CGContextAddLineToPoint(currentContext, originXOfSubviews+widthOfBox, originYOfSubviews);
CGContextAddLineToPoint(currentContext, originXOfSubviews+widthOfBox, originYOfSubviews+heightOfBox);
CGContextAddLineToPoint(currentContext, originXOfSubviews, originYOfSubviews+heightOfBox);
CGContextAddLineToPoint(currentContext, originXOfSubviews, originYOfSubviews);
CGContextStrokePath(currentContext); 
```

在所有角落的两条线的交界处都有一个白点。有什么办法可以避免这个点？

**更新 1：**

我知道以下解决方案：根据线宽，可以更改线的起点并达到我的期望。但是还有其他解决方案吗？

更新 2：

我正在使用下面的代码来绘制多边形

当我将 lineWidth 设置为 1 或小于该值时，会发生同样的问题。如果我将其设置为 2 或更高，则不会出现问题。

```
CGContextRef context = UIGraphicsGetCurrentContext();

    CGContextSetLineWidth(context, 2.0);

    CGContextSetStrokeColorWithColor(context, topLeftBoxBorderColor.CGColor);

    CGRect rectangle = CGRectMake(originXOfSubviews,originYOfSubviews,widthOfBox,heightOfBox);

    CGContextAddRect(context, rectangle);

    CGContextStrokePath(context); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:48:41.880

它是两条线（水平线和垂直线）的交点。

您可以做的是使这条线比您现在使用的总长度小几个像素/点。它不会相交，也不会出现点。

编辑：

或者你可以画正方形，而不是画线

```
- (void)drawSquare:(CGRect)rect{
    //Get the CGContext from this view
    CGContextRef context = UIGraphicsGetCurrentContext();
    //Draw a rectangle
    CGContextSetFillColorWithColor(context, [UIColor redColor].CGColor);
    //Define a rectangle
    CGContextAddRect(context, rect);
    //Draw it
    CGContextFillPath(context); 
} 
```

# macos - 解释 dtruss 输出，如“psynch_cvwait(...) = -1 Err#316”

> ID：13680614
> 
> 赞同：19
> 
> 时间：2012-12-03T09:45:14.460
> 
> 标签：macos, wait, system-calls, dtrace, darwin

`dtruss``strace`似乎是一个有用的工具来分析 OS X 上应用程序的（错误）行为。我在 linux 上找到了我心爱的人。但是解释它的输出需要理解它所引用的系统调用，有时还需要理解它们可能产生的错误条件。以这条线为例

```
psynch_cvwait(0x6BE38D54, 0x100000100, 0x0)      = -1 Err#316 
```

我对一个文档源感兴趣，它可以让我找出这个系统调用的目的，它的参数意味着什么，以及这个错误代码代表什么。就像我对 libc 函数手册页所期望的一样。我要求提供描述上述*和类似*系统调用的参考，以及上述*和类似*的错误。因此，只需以该行作为我希望能够理解的输出类型的示例。

**什么是合适的参考文档来了解像这样的 OS X 系统调用？**

您的参考资料涵盖的系统调用越多越好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T13:57:25.470

根据[Randy Howard](https://stackoverflow.com/users/2159730/randy-howard)[的回答](https://stackoverflow.com/a/15419241/1468366)，我查看了[XNU 源代码](http://www.opensource.apple.com/source/xnu/)。该文件包含所有系统调用的列表。该文件描述了这样的签名：[`syscalls.master`](http://www.opensource.apple.com/source/xnu/xnu-1699.32.7/bsd/kern/syscalls.master)`psynch_cvwait`

```
uint32_t
psynch_cvwait(
  user_addr_t cv,
  uint64_t cvlsgen,
  uint32_t cvugen,
  user_addr_t mutex,
  uint64_t mugen,
  uint32_t flags,
  int64_t sec,
  uint32_t nsec) 
```

这似乎与`dtruss`问题中引用的输出没有太大相似之处。但是，实际的实现[`pthread_support.c`](http://www.opensource.apple.com/source/xnu/xnu-1699.32.7/bsd/kern/pthread_support.c)更有用：

```
/*
 *  psynch_cvwait: This system call is used for psynch cvar waiters to block in kernel.
 */
int
psynch_cvwait(__unused proc_t p,
              struct psynch_cvwait_args * uap,
              uint32_t * retval) 
```

这至少给出了关于打印的参数是什么的想法`dtruss`。看起来第二个可能是一个结构，其成员由`syscalls.master`文件描述。所以地址几乎没有用，实际成员显然根本不是由 dtruss 打印的。调整`dtruss`它也许有可能获得该结构的成员，尽管我对此帐户还不确定，并且想知道为什么还没有人这样做。

`Err#316`在尝试将任何含义与该输出相关联时，我不太幸运。即使对 316 的十进制和十六进制表示形式的整个 XNU 源代码进行 grep，我也没有发现不包含其他数字的事件。错误代码当然没有在其`psynch_cvwait`自身的实现中提及，但该实现确实从它调用的其他函数转发错误代码。人们真的需要一个内核调试器来解开它并跟踪该值的实际来源。

总的来说，我现在离理解输出更近了一小步`dtruss`，但还有很多工作要做。因此，仍然非常感谢您提供适当的参考文档以及对该错误代码来源的任何见解。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T20:11:22.097

这可能是一个很好的起点，只是为了熟悉 dtrace 操作。 [http://www.mactech.com/articles/mactech/Vol.23/23.11/ExploringLeopardwithDTrace/index.html](http://www.mactech.com/articles/mactech/Vol.23/23.11/ExploringLeopardwithDTrace/index.html)

至于系统调用，您可以从这里开始。 [http://www.opensource.apple.com/source/xnu/xnu-1504.3.12/bsd/kern/syscalls.master](http://www.opensource.apple.com/source/xnu/xnu-1504.3.12/bsd/kern/syscalls.master)

[http://developer.apple.com](http://developer.apple.com)和[http://www.opensource.apple.com](http://www.opensource.apple.com)是查找更多详细信息的地方。

以书的形式，Amit Singh 的“Mac OS X Internals -- A Systems Approach”是另一个有用的东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-05-22T18:04:11.413

我在这方面找到的唯一文档是代码本身。

它是 pthread_cond_wait() 和 pthread_cond_timedwait() 的内核端。

在这种情况下，是后者，因为错误代码是#316。psync_cvcontinue 在错误代码中设置两个位来指示等待超时（0x100）还是没有等待者（0x200）。错误 #316 (0x13C) 是超时按位与 ETIMEDOUT (60) 或运算。

[https://github.com/apple/darwin-libpthread/blob/master/kern/kern_synch.c#L1216](https://github.com/apple/darwin-libpthread/blob/master/kern/kern_synch.c#L1216) [https://github.com/apple/darwin-xnu/blob/master/bsd/sys/errno.h #L179](https://github.com/apple/darwin-xnu/blob/master/bsd/sys/errno.h#L179)

# c# - XmlWriter ':' 字符，十六进制值 0x3A，不能包含在名称中

> ID：13680615
> 
> 赞同：0
> 
> 时间：2012-12-03T09:45:19.043
> 
> 标签：c#, xml, xmlwriter

我正在使用 XmlWriter 并收到以下错误：

```
Invalid name character in 'news:news'. The ':' character, hexadecimal value 0x3A, cannot be included in a name. 
```

有谁知道是什么原因造成的？这是我的代码：

```
using (XmlWriter writer = XmlWriter.Create("moo.xml"))
            {               

                writer.WriteStartDocument();
                writer.WriteStartElement("urlset", "http://www.sitemaps.org/schemas/sitemap/0.9");
                writer.WriteAttributeString("xmlns", "news", null, "http://www.google.com/schemas/sitemap-news/0.9");

                writer.WriteStartElement("url");
                writer.WriteElementString("loc", "http://www.monkeys.co.uk");

                writer.WriteStartElement("news:news");
                writer.WriteEndElement();

                writer.WriteEndElement();

                writer.WriteEndElement();
                writer.WriteEndDocument();

            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:52:50.037

您需要使用[`WriteStartElement`](http://msdn.microsoft.com/en-us/library/7579ed08.aspx)带有两个参数的重载：

```
writer.WriteStartElement("news", "http://www.google.com/schemas/sitemap-news/0.9");
//               Tag   ----^       ^--- Namespace 
```

# jquery - Richfaces数据滚动器上的JQuery绑定单击事件

> ID：13680616
> 
> 赞同：0
> 
> 时间：2012-12-03T09:45:20.143
> 
> 标签：jquery, jsf-2, richfaces

我有一个带有数据滚动器的richfaces 数据表。我想要的是在数据滚动按钮上绑定一个“onclick”事件。此操作的目的是根据 javascript 中定义的某些标准对通过 datascroller 的每个页面更改操作为行着色。

下面是我的 JQuery 函数：

```
$(document).ready(function() {
    $('#paketler a').live('click', function() {
        stopajRenklendir();
    });
}); 
```

我的数据表简化了：

```
 <rich:dataTable rendered="#{not empty sigortaFaturaPaketiSorgulamaBean.paketProvizyonListModel}" rows="2" 
                    value="#{sigortaFaturaPaketiSorgulamaBean.paketProvizyonListModel}" var="item" border="1" cellspacing="3"
                    styleClass="teminatTablosu" headerClass="teminatTablosuHeader" footerClass="teminatTablosuFooter" rowKeyVar="idx"
                    id="paketler">
                    <f:facet name="footer">
                        <h:outputText
                            value="Paket Sayısı: #{sigortaFaturaPaketiSorgulamaBean.paketProvizyonListModel.rowCount == -1 ? 0 : sigortaFaturaPaketiSorgulamaBean.paketProvizyonListModel.rowCount  }"
                            style="float:left" />
                            <h:panelGroup styleClass="pagingWrapper">
                        <rich:dataScroller fastStep="2" page="#{sigortaFaturaPaketiSorgulamaBean.page}" maxPages="2" id="paging" />
                        </h:panelGroup>
                    </f:facet>
                </rich:dataTable> 
```

该脚本按预期工作，为我想要的行着色，但在着色表后再次呈现，这使得该过程无用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T12:45:36.977

您可以使用 rich:dataScroller 的“oncomplete”：

```
 <rich:dataScroller oncomplete="stopajRenklendir();" ... /> 
```

如果你想调用一个动作或者渲染另一个组件，你可以在 rich:dataScroller 的 oncomplete 中使用 a4j:jsFunction ：

```
 <rich:dataScroller oncomplete="myJavascript()" ... />

    <a4j:jsFunction name="myJavascript" render="paketler" action="#{sigortaFaturaPaketiSorgulamaBean.myAction}" ... /> 
```

# android - android rest servicehelper 单例

> ID：13680617
> 
> 赞同：3
> 
> 时间：2012-12-03T09:45:24.317
> 
> 标签：android, rest, service

谁能向我解释一下，为什么[Google I/O 上 Virgils 演示文稿](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)中第一个设计模式中的 ServiceHelper应该是单例的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T18:22:30.077

在[接下来](http://www.youtube.com/watch?feature=player_detailpage&v=xHXn3Kg2IQE#t=1782s)的 30 秒左右的视频中，Virgil 为给出答案的助手提供了一个示例功能，我想。

> 您可以实现一个映射，从请求 id 到这个意图。您总是可以首先询问服务：这个特定的请求 ID 是否仍在等待处理？...

应该只有一个地方保存这些信息，因此您不能创建多个此帮助程序的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T23:39:00.177

主要原因是跨活动共享服务。如果有一天您尝试在活动之间共享“复杂”数据而不将数据保存在数据库中。你proabvly使用了singelton。

# c# - 在 IIS 中运行的 C# 网站中添加新的 .cs 文件

> ID：13680620
> 
> 赞同：5
> 
> 时间：2012-12-03T09:45:38.830
> 
> 标签：c#, .net, web-services, iis, proxy

我有一个在 IIS 中运行的 C# 网站。我在 App_code 目录下有几个 .cs 文件。我可以在所有 *.aspx.cs 和 *.ascx.cs 文件中引用它们。我没有 Visual Studio，我需要手动进行更改。

我现在需要使用 .aspx.cs 文件中的 Web 服务。我使用 wsdl.exe 生成了一个代理类，并将其放在 App_code 目录下。但我无法在我的 aspx.cs 文件中引用该文件。我得到错误

> 编译器错误消息：CS0246：找不到类型或命名空间名称“TestSearchProxy”（您是否缺少 using 指令或程序集引用？）

代理没有定义任何命名空间，我假设它是默认命名空间。我没有在 aspx.cs 文件中添加任何“使用** ”。*

有人可以帮我解决这个问题吗？

我尝试的另一种方法是：

我使用 csc 命令从代理文件生成了一个 dll，并将该 dll 放在 bin 目录下。我仍然无法访问代理类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T12:29:56.453

关于第一次尝试：

*   检查 TestSearchProxy 的命名空间并明确使用它：NameSpace.TestSearchProxy
*   如果这不起作用，请尝试从生成的代理代码中删除命名空间。
*   尝试擦除 asp.net 临时目录，这将使它从头开始重新编译 app_code 目录。（这通常是您尝试的第一件事，因为 IIS 热部署机制有点不稳定）
    1.  停止 IIS 服务
    2.  DEL /S "C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files*.*"
*   检查代理代码中的编译错误，特别是如果您使用的 wsdl.exe 可能来自比目标平台中部署的 IIS/.net 框架更新的框架版本。

关于第二次尝试，（将dll放在bin目录中）：

*   您需要添加对它的引用，您可以从您的 aspx 网站根目录中的 web.config 文件中执行此操作：

    <组件>

    <add assembly="AssemblyName , Version=1.0.0.0, Culture=neutral, PublicKeyToken=123456789ABCD1"/>

    </程序集>

    或者只是将其添加到 GAC (gacutil -i dllname.dll)。

*   您还应该检查 dll 是否使用正确的 .net 版本和正确的架构 (x86/x64) 编译以避免冲突，因为这可能是旧系统（仅限 4.0 clr/32 位）。

# java-native-interface - 阻塞操作在 Jni 层函数调用中不起作用

> ID：13680621
> 
> 赞同：0
> 
> 时间：2012-12-03T09:45:41.897
> 
> 标签：java-native-interface

我已经使用 jni 层写下了 C++ 到 java 调用。在 java 中，我必须在开始时使用 dom4j 加载一些大尺寸的 xml。当它进行加载时，进程返回到 C++ 代码，而不加载 xml；Jni 是否不适用于阻塞操作，任何输入都是可观的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:00:14.213

我找到了根本原因，不是阻塞操作，而是其他原因。:)

# css - CSS 允许/不允许的字符

> ID：13680625
> 
> 赞同：1
> 
> 时间：2012-12-03T09:46:01.433
> 
> 标签：css

是否可以将 CSS 中的某些字符列入白名单/黑名单？例如，如果我想从文本块中省略所有非字母数字字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:47:16.590

不，这在 CSS 中是不可能的。CSS 仅用于布局/样式设计。

如果要限制字符，则需要使用 javascript 或服务器端语言，具体取决于内容的来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T09:47:36.183

这是不可能的。

CSS 是一种用于定义页面显示方式的语言。它并不打算实际修改元素的内容。（请注意，这对于`content`属性是可能的，但有很大的限制。有关更多信息，请参阅[http://reference.sitepoint.com/css/content](http://reference.sitepoint.com/css/content)。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:50:57.787

不，你不能，CSS 是一种样式语言。尝试使用 javascript 并提取任何非字母数字

# php - jquery-validate - php 嵌入的 html 表单

> ID：13680630
> 
> 赞同：2
> 
> 时间：2012-12-03T09:46:19.790
> 
> 标签：php, javascript, jquery, html, jquery-validate

有人可以帮我解决这个问题吗？我一直在使用 jquery-validate 来解决 html 表单的问题，直到遇到嵌入在 php.ini 中的 HTML 表单的问题。

下面的示例使用 jquery 和 jquery-validate。Form1 正在验证电子邮件字段。然而，Form3 没有验证数字字段（form3 嵌入在 php 中）。

我试图注释掉所有 form1 验证，以确保不是多个表单导致问题。

我还尝试从 javascript 中为 form3 注释掉 submitHandler，这阻止了 form3 提交，所以这告诉我某些东西正在工作，它只是没有验证 form3 中的数字字段。

```
<script>
$(document).ready(function() {
    $("#form1").validate( {
        errorPlacement: function(error, element) {
            error.appendTo( element.parent("span").next("div") );
        },

        debug:true,
        wrapper: "li", 
        submitHandler: function(){
            form.submit();
        },
        rules: {                
            email: {required:false, email:true},
        },

        messages: {
            email: "Enter a valid email address",
        }
    })

    $("#form3").validate( {
        errorPlacement: function(error, element) {
            error.appendTo( element.parent("span").next("div") );
        },

        debug:true,
        wrapper: "li", 
        submitHandler: function(){
            form3.submit();
        },

        rules: {                
            quotaLimit: {required:true, number:true},
        },

        messages: {
            quotaLimit: "Enter a valid quota limit",
        }
    })
});
</script>

<br>

<div class="tab-button-row" style="position:relative;">
<a href="#" class="tab-button" onclick="toggleTab('editUserContent', 'details');">User Details</a>
<a href="#" class="tab-button" onclick="toggleTab('editUserContent','quotas');">Quota and Limits</a>
</div>
<br>

<div id="editUserContent">
<div id="details">
    <form id=form1 method=POST
          action="index.php?function=edituser&command=save&username=<?php echo $user->{"username"}; ?>"
          name=form>

        <?php
        if ($user->{'authenticationType'} == 0) {
            $visible = "";
        } else {
            $visible = "style='display:none;'";
        }
        ?>

        <table class="list">
            <tr>
                <td colspan=5><b>Edit Details</td>
                </td>
                <td width=25%><input type=submit value=save></td>
            </tr>

            <tr>
                <td>First Name:</td>
                <td>
                    <input name="fname" value="<?php echo $user->{"fname"};?>">
                </td>
                <td>Last Name:</td>
                <td>
                    <input name="lname" value="<?php echo $user->{"lname"};?>">
                </td>
                <td>Email:</td>
                <td>
                    <span>
                    <input name="email" value="<?php echo $user->{"email"};?>" class='validate'>
                    </span>
                <div></div>
                </td>
            </tr>
        </table>

        <br>
        <table class="list" <?php echo $visible; ?>>
            <tr>
                <td colspan=5><b>Password Settings</td>
                </td>
                <td width=25%><input type=submit value=save></td>
            </tr>
            <tr>
                <td>Set Password</td>
                <td><input type=checkbox name=change_password></td>
                <td>New Password:</td>
                <td><input name="password" type=password></td>
                <td>Re-enter Password:</td>
                <td><input name="re_password" type=password></td>
            </tr>
        </table>
    </form>
</div>

<div id="quotas">
    <?php
    $table = new Table();
    $name = new Column("Quota Period");
    $name->render = function($data, $id)
    {
        echo $data->{'period'};
    };

    $desc = new Column("Quota Limit(MB)");
    $desc->render = function($data, $id)
    {
        echo $data->{'quotaLimit'};
    };

    $owner = new Column("Group Owner");
    $owner->render = function($data, $id)
    {
        if (isset($data->{'owner'})) {
            echo "<a href=index.php?function=editgroup&group=" . $data->{'ownerid'} . ">" . $data->{'owner'} . "</a>";
        }
    };

    $reached = new Column("Quota Reached");
    $reached->render = function($data, $id)
    {
        if ($data->{'exceeded'} == true) {
            echo "true";
        } else {
            echo "false";
        }
    };

    $ops = new Column("Operations");
    $ops->render = function($data, $id)
    {
        if (!isset($quotas[$i]->{'owner'})) {
            echo "<a href=index.php?function=edituser&command=deletequota&username=" . $_GET['username'] . "&period=";
            echo $data->{'period'} . "&quotaLimit=" . $data->{'quotaLimit'} . ">delete</a>";
        }
    };

    $table->addColumn($name);
    $table->addColumn($desc);
    $table->addColumn($owner);
    $table->addColumn($reached);
    $table->addColumn($ops);
    $table->setData($quotas);
    $table->footerMethod = function($footerArgs)
    {
        echo" <form id=form3 method=POST action=index.php?function=edituser&command=addquota&username=" . $_GET['username'] . ">";
        echo "<tr><td>";
        echo "<select name='period'>";
        echo "<option>NONE</option>";
        echo "<option>DAY</option>";
        echo "<option>WEEK</option>";
        echo "<option>MONTH</option>";
        echo "</select>";
        echo "</td>";

        echo "<td>";
        echo "<span><input name=quotaLimit class='validate' /></span><div></div>";
        echo "</td>";

        echo "<td></td>";
        echo "<td></td>";
        echo "<td><input type=submit value='Add/Set'></td></tr>";
        echo "</form>";
    };

    $table->render();
    ?>

</div>
</div>

<script type="text/javascript">
initToggleTab("editUserContent", "details");
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T03:55:19.123

谢谢您的帮助。设法通过将表格标签移动到由 php 呈现的位置来解决问题：

```
 $table->footerMethod = function($footerArgs)
    {
        echo "<tr><td>";
        echo "<select name='period'>";
        echo "<option>NONE</option>";
        echo "<option>DAY</option>";
        echo "<option>WEEK</option>";
        echo "<option>MONTH</option>";
        echo "</select>";
        echo "</td>";

        echo "<td>";
        echo "<span><input name=\"quotaLimit\" class=\"validate\" type='text' /></span><div></div>";
        echo "</td>";

        echo "<td></td>";
        echo "<td></td>";
        echo "<td><input type=submit value='Add/Set'></td></tr>";
    };

    echo" <form id=form3 method=POST action=index.php?function=edituser&command=addquota&username=" . $_GET['username'] . ">";
    $table->render();
    echo "</form>"; 
```

# css - sencha touch 2 中的可点击面板

> ID：13680635
> 
> 赞同：1
> 
> 时间：2012-12-03T09:46:34.120
> 
> 标签：css, sencha-touch, sencha-touch-2

我正在开发 sencha touch 2。我有一个面板和一些图像。我想在面板的水龙头上触发一个动作。图像放置在面板的顶部。这些图像仅用于样式目的。当我点击面板时，我可以使用以下方式触发操作：

```
{
   xtype : 'panel',
   listeners:{
     painted:function(ele){
           ele.element.on('tap',function(){
               console.log('you clicked panel');
         });
   }
  }
}, 
```

但是由于此面板顶部有图像，因此我必须点击没有图像的位置来触发此操作。

```
 {
                     xtype : 'img',
                     src : 'resources/images/landingImages/a1.png',
                     id : 'a1Image',
                     mode : 'element',
                     width:220,
                     height:240,
                     top:0,
                     left:60

                }, 
```

即使图像在面板上重叠，是否有任何方法可以触发此事件。由于相同的图像分布在 2 个不同的面板上，我无法在图像点击时再次调用该函数。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:42:27.437

如果我正确理解你的问题

您可以为图像添加点击甚至处理程序，并在其中

你可以打电话 `event.preventDefault();`

这会做什么？

如果事件可取消，则取消该事件，而不停止事件的进一步传播。

意味着您的面板可以处理此事件。

使用事件代表也有一种不同的方法，请通过下面的链接

@sencha[中的事件委托](http://www.sencha.com/blog/event-delegation-in-sencha-touch)

谢谢

# ldap - 如何搜索从 ldap 导入 Plone 的用户

> ID：13680636
> 
> 赞同：3
> 
> 时间：2012-12-03T09:46:34.360
> 
> 标签：ldap, plone

将用户和组从 ldap 导入 plone 后，在站点控制面板中，用户和组，如果在搜索字段中使用部分名称，则不会被搜索。我怎样才能让它工作？我必须重新索引吗？我该怎么做？

# objective-c - 编码和解码 3D MPO 文件 Objective-C

> ID：13680637
> 
> 赞同：0
> 
> 时间：2012-12-03T09:46:37.857
> 
> 标签：objective-c, ios, image, 3d, jpeg

MPO 文件是包含两个静止图像的文件，通常由 3D 相机使用。

我想将两个 jpg 图像转换为一个 MPO 文件，并且反之亦然。

我的平台是 iOS（目标 C）。

我已经找到了这个： [Decoding an mpf exif block in an MPO stereo image file](https://stackoverflow.com/questions/3746272/decoding-an-mpf-exif-block-in-an-mpo-stereo-image-file) ，但它或多或少是这种 MPO 文件的二进制结构。有谁知道在 iOS 中使用的现有转换器或实现这种转换器的任何提示？

问候西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:26:40.650

没有现有的转换器可以这样做，但是使用 pavel 发布的信息可以让您将两个图像拼接在一起。遗憾的是，由于工作变动，在那之后我没有机会深入研究它。我最近才回到它。

要将两个图像拼接在一起，您需要获取两个现有的 jpeg，获取它们的数据，并创建 MPO 标头（实际上很少说明，只是有多少图像以及它们的作用），以及显示图像之间分离的数据图像，这是我和帕维尔在我们之间展示的。

制作 iOS 应用程序的其他复杂情况是，您无法从 SD 中自动打开 MPO，因为您无权访问它，或者无法像在 OSX 上那样将自己注册为 MPO 的处理程序。

# jboss7.x - JBoss 7.0.2 上的部署错误

> ID：13680640
> 
> 赞同：1
> 
> 时间：2012-12-03T09:46:40.943
> 
> 标签：jboss7.x, jbpm

我正在尝试在 Jboss 7.0.2 上部署我的 JBpm 应用程序。

我已经为 jbpm 和我的业务实体定义了一个持久性单元。我用 Spring 3.1.3 配置了事务管理器。

在 Tomcat 7.0 上一切正常，但是当我在 Jboss 7.0.2 上部署时，我得到一个 javax.persistence.PersistenceException。

为了修复该错误，我在持久性单元中添加了以下元素：

```
<mapping-file>META-INF/ProcessInstanceInfo.hbm.xml</mapping-file> 
```

但后来我得到另一个关于我的业务实体的异常：

```
[...]
Caused by: java.lang.IllegalArgumentException: Not an managed type: class     eu.publications.ceres.persistence.domain.Registration
[...] 
```

你知道为什么在tomcat上一切正常而在JBoss上不行吗？JBoss在幕后是什么？

谢谢

持久性.xml：

```
<persistence-unit name="ceres2013.persistence.unit">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <mapping-file>META-INF/JBPMorm.xml</mapping-file>

    <class>org.drools.persistence.info.SessionInfo</class>
    <class>org.drools.persistence.info.WorkItemInfo</class>
    <class>org.jbpm.process.audit.ProcessInstanceLog</class>
    <class>org.jbpm.process.audit.NodeInstanceLog</class>
    <class>org.jbpm.process.audit.VariableInstanceLog</class>

    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
        <property name="hibernate.show_sql" value="false" />
        <property name="hibernate.max_fetch_depth" value="4" />
        <property name="hibernate.hbm2ddl.auto" value="validate" />
    </properties>
</persistence-unit> 
```

应用程序上下文.xml：

```
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="persistenceUnitName" value="ceres2013.persistence.unit" />
</bean> 
```

堆栈跟踪：

```
[...]
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: ceres2013.persistence.unit] Unable to build EntityManagerFactory
      at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:900) [hibernate-entitymanager-3.5.4-Final.jar:]
      at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:74)     [hibernate-entitymanager-3.5.4-Final.jar:]
      [...]
Caused by: org.hibernate.HibernateException: Errors in named queries: ProcessInstancesWaitingForEvent
      at org.hibernate.impl.SessionFactoryImpl.<init>(SessionFactoryImpl.java:437) [hibernate-core-3.5.4-Final.jar:] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T10:41:38.503

几周前我找到了解决方案。你的评论是对的。我必须在持久性单元中添加我的所有域实体，因为 JBoss 不查找 @Entity 注释（Tomcat 会）。我最终得到了类似的东西：

```
<persistence-unit name="org.jbpm.persistence.jpa" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <mapping-file>META-INF/JBPMorm.xml</mapping-file>
    <mapping-file>META-INF/ProcessInstanceInfo.hbm.xml</mapping-file>

    <class>...</class>
    ...
    <class>...</class>

    <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
        <property name="hibernate.show_sql" value="false" />
        <property name="hibernate.max_fetch_depth" value="4" />
        <property name="hibernate.hbm2ddl.auto" value="validate" />
    </properties>

</persistence-unit> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:45:30.060

您收到的错误与您的一个实体有关，是否映射在 persistence.xml 文件中？

有关原因的错误：org.hibernate.HibernateException：命名查询中的错误：ProcessInstancesWaitingForEvent

可能是因为您将 ProcessInstanceInfo 类映射为您正在使用的休眠版本的错误映射。

干杯

PS：顺便问一下，你是用 5.4.0.Final 测试的吗？

# ftp - SublimeText + FTPSync：上传新行

> ID：13680642
> 
> 赞同：3
> 
> 时间：2012-12-03T09:46:44.183
> 
> 标签：ftp, sublimetext2

（我不知道这是否是正确的地方）

使用 FTPSync 包保存/自动上传后，远程文件每行都有新行。所以行号不匹配，本地/远程文件不匹配。我该如何解决？谢谢

![在此处输入图像描述](../Images/8d68823a9274a8217912216612ade785.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T17:16:10.290

尝试这个：

在`Preferences > Settings - Default`

寻找：`"default_line_ending"`

调整该设置并保存并重新上传您的文件。

如果您的行尾是 windows (CRLF)，则可以将其解释为两个换行符，而不是在基于 unix 的系统中的一个换行符（仅使用 LF 作为行尾）。

一些 FTP 程序会自动转换行尾以避免这种情况。您还可以查看您的 ftp 插件选项，看看是否有办法削弱它并保留您的编辑器设置。

如果您使用的是项目工作流程，您还可以修改项目的行尾，并保留全局选项，就像现在一样。查看[本教程](http://code.tutsplus.com/tutorials/sublime-text-2-project-bliss--net-27256)的第 5 步，了解有关操作特定项目的设置的更多详细信息，同时为在该项目之外打开的其他文件保持全局设置不变。

如果有多个人接触文件，也会发生这种情况。例如，如果您对其进行修改、保存并重新上传，然后其他人也这样做，然后您再次打开它，如果其他人使用不同的系统或编辑器，您会看到额外的换行符。

# c++ - 重载 C++ 算术运算符

> ID：13680643
> 
> 赞同：1
> 
> 时间：2012-12-03T09:46:44.717
> 
> 标签：c++, oop

我正在尝试创建一些使用继承类的重载算术运算符，如下所示：

```
class Block {
    public:
        Block() {}
        virtual double Value() {};
};

class Constant : public Block {
    public:     
        Constant(double v) { value = v; }
        virtual double Value() { return value; }
    private:
        double value;       
};

class Add : public Block {
    public:
        Add(Block &a, Block &b) { value1 = &a; value2 = &b; }
        virtual double Value() { return value1->Value() + value2->Value(); }
    private:
        Block *value1;
        Block *value2;          
};

Block operator + (Block &a, Block &b) {
    return new Add(a, b);
}

int main() {
    Constant a(5.0);
    Constant b(6.0);
    printf("%.3f", (a+b).Value());
} 
```

但我得到以下信息：`error: conversion from 'Add*' to non-scalar type 'Block' requested`

这是我第一次在 C++ 中使用 OOP，所以我的想法是否可行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T10:06:24.693

作为一般规则，运算符重载和继承不能很好地协同工作，因为在 C++ 中，运算符通常具有值语义。然而，有一个主要的例外，如果你的`Add`类的所有实例实际上都是你的`operator+`（临时）的返回值，那么你已经有效地实现了编译时表达式评估——一种非常重要的优化技术。（在现代 C++ 中，这通常是使用模板完成的，而不是继承，但原理是一样的。）

因为运算符具有值语义，所以它们应该返回值，而不是指针。这意味着没有`new`。不使用的另一个原因`new`是任何被`new`ed 的东西都必须显式删除，并且在大多数情况下，没有办法显式删除作为表达式的一部分返回的指针。并且这样的指针也必须被取消引用。

编辑：

我似乎忘记了重要的一点：运算符的声明返回值*必须*是您返回的实际类型，因为您的返回表达式将被复制到该类型中。因此：

```
Add
operator+( Block const& lhs, Block const& rhs )
{
    return Add( lhs, rhs );
} 
```

也请注意`const`. 没有它，你不能在临时工上使用操作符；eg`a + b + c`将是非法的（假设 `a`,`b`和`c`属于 类型`Block`，或者是从它派生的某种类型）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T09:49:16.527

由于您没有提及导致错误的代码的特定部分，因此让我指出：

```
Block operator + (Block &a, Block &b) {
    return new Add(a, b);
} 
```

这里到底发生了什么？好吧，您承诺返回 a `Block`，但实际上您正在返回`new Add(a, b)`，即 a `Add*`。这就是编译器所抱怨的。

> 这是我第一次在 C++ 中使用 OOP

可以从所有的指针、新闻和虚拟变量中看出。您的代码存在严重的生命周期问题。

我强烈建议您忘记您的 C++ OOP 知识并阅读[一本很好的 C++ 入门书籍](https://stackoverflow.com/questions/388242/)。

# scala - 列出任何类型排序

> ID：13680645
> 
> 赞同：3
> 
> 时间：2012-12-03T09:47:01.060
> 
> 标签：scala

我有一个清单。但类型是任何。

```
// list: List[List[Any]] = List(List(b, 50), List(a, 25), List(i, 60))
val list = List( List("b", 50), List("a", 25), List("i", 60))

// sort should be list(0)(0) "String" sort
("a", 25), ("b", 50), ("i", 60)

// or  list(0)(1) "Integer" sort
("a", 25), ("b", 50), ("i", 60) 
```

我要排序。我能怎么做？先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T10:07:43.697

尝试像这样对列表进行排序本质上是不安全的，因为编译器无法保证内部列表的元素具有正确的类型。也许最安全的方法是使用 a`match`来转换特定元素，并引发异常是数据不是应该的。

```
list.sortBy(x =>
  x(0) match {
    case s: String => s
    case _ => sys.error("not a string")
  })                                            
//> res0: List[List[Any]] = List(List(a, 25), List(b, 50), List(i, 60))

list.sortBy(x =>
  x(1) match {
    case i: Int => i
    case _ => sys.error("not an integer")
  })                                            
//> res1: List[List[Any]] = List(List(a, 25), List(b, 50), List(i, 60)) 
```

也就是说，听起来你*真正*需要的是一个`(String, Int)`元组列表。这样编译器就可以保证安全：

```
val list2 = List(("b", 50), ("a", 25), ("i", 60))                                                  
//> list2  : List[(java.lang.String, Int)] = List((b,50), (a,25), (i,60)) 
```

请注意，编译器知道内部元素的类型。所以排序更容易，*更安全*：

```
list2.sortBy(_._1)                              
//> res2: List[(java.lang.String, Int)] = List((a,25), (b,50), (i,60))
list2.sortBy(_._2)                              
//> res3: List[(java.lang.String, Int)] = List((a,25), (b,50), (i,60)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:07:40.757

要按第一个和第二个元素排序，请使用以下命令：

```
scala> list.sortBy{
     |   case (s: String) :: (i: Int) :: Nil => s -> i
     |   case _ => sys.error("error")
     | }
res0: List[List[Any]] = List(List(a, 25), List(b, 50), List(i, 60)) 
```

您可以使用`case (s: String) :: _ => s`按第一个元素`case _ :: (i: Int) :: _ => i`排序或按第二个元素排序。

# ruby-on-rails - 从 Rails 引擎在主应用程序中附加一个常量数组

> ID：13680648
> 
> 赞同：0
> 
> 时间：2012-12-03T09:47:02.253
> 
> 标签：ruby-on-rails, constants, rails-engines

是的，我想附加一个常数，

我有一个数组作为常量存储在 mainapp 中，例如

```
class FOO
  ABILITY = [["xxxx","XX"],["yy","YYY"]]
end 
```

以上常量以各种方式在整个 mainapp 中使用。

现在，我有一个扩展 mainapps 能力的 Rails 引擎，并且想在主应用程序中扩展 ABILITY 数组，所以如果我在哪里做

```
ABILITY.each 
```

我会多买一双。

不假思索地做了一个

```
class BAR
  FOO::ABILITY << ["zzzz","ZZZZ"]
end 
```

当然，这并没有做任何事情。

我从来没有考虑过附加一个常量，这本身似乎是一件坏事，但考虑到 RailsEngine 的目的，因为它感觉是一个足够的想法，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:10:10.980

```
class FOO
  ABILITY = [["xxx","XX"],["yy","yyyy"]]
end

class BAR
  T= FOO::ABILITY << ["zzz","ZZ"]
end

BAR::T
=> [["xxx", "XX"], ["yy", "yyyy"], ["zzz", "ZZ"]] 
```

你的能力数组中缺少一个“，”。这有帮助吗？

# c++ - Hadoop C++ WordCount 示例编译问题

> ID：13680655
> 
> 赞同：1
> 
> 时间：2012-12-03T09:47:31.957
> 
> 标签：c++, hadoop

我正在尝试`C++`使用以下编译命令编译 Hadoop wordCout 示例（）

```
g++ -o a -L/home/pc/run/hadoop-install/hadoop/lib/native -lhadooppipes -lhadooputils -lpthread -I/home/pc/run/hadoop-install/hadoop/include wordCount.cpp -Wall 
```

Hadoop 版本是 0.23.5。

操作系统是 Ubuntu 12.04

但是，我收到如下链接错误：

```
g++ -o a -L/home/pc/run/hadoop-install/hadoop/lib/native -lhadooppipes -lhadooputils -lpthread -I/home/pc/run/hadoop-install/hadoop\
  /include wordCount.cpp -Wall
 6/tmp/cc3Cte9z.o: In function `main':
 7wordCount.cpp:(.text+0x26): undefined reference to `HadoopPipes::runTask(HadoopPipes::Factory const&)'
 8/tmp/cc3Cte9z.o: In function `WordCountMap::map(HadoopPipes::MapContext&)':
 9wordCount.cpp:(.text._ZN12WordCountMap3mapERN11HadoopPipes10MapContextE[WordCountMap::map(HadoopPipes::MapContext&)]+0x2e): undefin\
  ed reference to `HadoopUtils::splitString(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, char const\
  *)'
10/tmp/cc3Cte9z.o: In function `WordCountReduce::reduce(HadoopPipes::ReduceContext&)':
11wordCount.cpp:(.text._ZN15WordCountReduce6reduceERN11HadoopPipes13ReduceContextE[WordCountReduce::reduce(HadoopPipes::ReduceContext\
  &)]+0x26): undefined reference to `HadoopUtils::toInt(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&\
  )'
12wordCount.cpp:(.text._ZN15WordCountReduce6reduceERN11HadoopPipes13ReduceContextE[WordCountReduce::reduce(HadoopPipes::ReduceContext\
  &)]+0x5b): undefined reference to `HadoopUtils::toString(int)'
13collect2: ld returned 1 exit status
14make: *** [a] Error 1 
```

有谁知道哪里出了问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:50:12.277

检查系统中的 g++ 版本，> 版本 4，源文件的名称放在库链接的前面。因此，在您的系统中，正确的顺序可能是：

“g++ wordCount.cpp -oa -L/home/pc/run/hadoop-install/hadoop/lib/native -lhadooppipes -lhadooputils -lpthread -I/home/pc/run/hadoop-install/hadoop/include -Wall”

希望这可以帮助

/乐国岛

# jquery - 如何使用 jQuery 以编程方式显示 last.fm 上的最后一首歌曲？

> ID：13680657
> 
> 赞同：1
> 
> 时间：2012-12-03T09:47:34.050
> 
> 标签：jquery, json, last.fm

我正在使用 jQuery 在[我的网站](http://joao.pt/#recently)上显示 last.fm 数据。在这种情况下，我尝试使用以下代码在我的 last.fm 个人资料中显示我的最后一首歌：

```
$.getJSON('http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=joaoramos&api_key=a72cc897d849cfbff9a677871699e3f2&limit=1&format=json&callback=?', function(data) {

    track = data.recenttracks.track[0];

    var artist  = track.artist['#text'],
        song    = track.name,
        url     = track.url,
        src     = track.image[3]['#text'];

    if (src == '' || src == null || src == 'undefined') {
        var src = 'http://joao.pt/wp-content/themes/joaoramos/img/music.jpg';
    }

    $('#lastfm a').attr('href', url);
    $('#lastfm a').attr('title', 'Last song scrobbed on Last.fm: <em>'+song+'</em> by '+artist);
    $('#lastfm a img').attr('alt', song+' by '+artist);
    $('#lastfm a img').attr('src', src);

}); 
```

我可能没有在 JSON 对象中使用正确的路径（有时我会收到`Uncaught TypeError: Cannot read property 'artist' of undefined`控制台错误，但并非总是如此），因为大多数情况下，我网站上三个圆圈中的第三个圆圈上没有显示任何内容（即第一个Dribbble 上的最后一个镜头，Flickr 上的第二个镜头，last.fm 上的最后一首歌）。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:51:45.790

您正在检索`jsonp`，`json`因此您需要使用`$.ajax`正确的`dataType`设置。尝试这个：

```
$.ajax({
    url: 'http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=[USERNAME]&api_key=[APIKEY]&limit=1&format=json&callback=?', 
    dataType: 'jsonp',
    success: function(data) {
        // your current code here...    
    });
}); 
```

# javascript - 将内容插入 Wordpress 帖子编辑器

> ID：13680660
> 
> 赞同：3
> 
> 时间：2012-12-03T09:47:56.287
> 
> 标签：javascript, wordpress, tinymce

我正在制作一个 Wordpress 插件，用于在帖子中添加图像映射。目前我已经将图像映射实现为自定义帖子类型。但是，我在将它们添加到帖子中时遇到了一些麻烦。

我在媒体插入/上传窗口中创建了一个名为 Image map 的新选项卡。当您单击选项卡中的图像映射时，将触发此函数：

```
function insertImageMap() {
    tinyMCE.execInstanceCommand('mceInsertContent', false, 'content',
    'some text or html code'
    );
    window.parent.tb_remove();
} 
```

然而，tinyMCE 编辑器中没有添加任何内容。该函数被触发，但即使我使用 tinyMCE.getInstanceById('content')，tinyMCE 编辑器的实例也未定义。有没有办法访问帖子编辑器页面的编辑器？

我在我的插件中包含了 tinyMCE 脚本，它没有显示为未定义。

我发现一个较旧的问题问同样的问题，但答案不是很有帮助： [自定义 Wordpress 插件 - 如何在帖子编辑器上插入弹出窗口中的内容？](https://stackoverflow.com/questions/6457162/custom-wordpress-plugin-how-do-i-insert-content-from-popup-on-post-editor)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T10:52:15.450

评论中找到的解决方案：

```
function insertImageMap() {
    window.parent.send_to_editor('any text');
    window.parent.tb_remove();
} 
```

# php - 抓取数据并将其作为数组变量放在 PHP 中

> ID：13680663
> 
> 赞同：0
> 
> 时间：2012-12-03T09:48:09.350
> 
> 标签：php, jquery

我用源代码找到了这个工具

演示：

```
http://googlesuggest-jquery.googlecode.com/svn/trunk/demo.html 
```

资源：

```
http://googlesuggest-jquery.googlecode.com/svn/trunk/ 
```

该演示建议相关的关键字和功能，就像谷歌搜索框自动建议功能一样。

```
<script>
$.each("web youtube recipe products news images books".split(" "), function(i, v){
  var div = $("<div>").appendTo("#inputs")
    , input = $("<input>").appendTo(div)
    , span = $("<label>").text(v).appendTo(div);
  input.googleSuggest({ service: v });
});
</script> 
```

根据上面的代码，我如何抓取建议的数据并将其另存为，`array`以便我可以将其显示为列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:56:43.980

使用源代码:)

该插件显然非常简单：[Source Code](http://googlesuggest-jquery.googlecode.com/svn/trunk/jquery.googleSuggest.js)

它进行 ajax 调用并处理返回数据以将它们放入`span`（它似乎使用来自 jQuery UI 的标准自动完成）。您在源代码中需要的位在这里：

```
success: function(data) {
  response($.map(data[1], function(item){
    return { value: $("<span>").html(item[0]).text() };
  }));
} 
```

只需在那里做任何你需要的事情（最好在`response(...)`保持功能的部分之上）。

# php - PHP比较两个数组中的项目？

> ID：13680664
> 
> 赞同：-2
> 
> 时间：2012-12-03T09:48:10.007
> 
> 标签：php, compare

我尝试了很多次比较但没有工作。

我也尝试过使用 array_diff 或 array_intersect 但是......

```
 $a = array(
            array('1','11'),
            array('2','22'),
            array('3','33'),
            array('4','44'),
    );

$b = array(
    array('2','22'),
    array('3','33')
);

for($j = 0;$j < count($a);$j++) {
    for($v = 0;$v < count($b);$v++) {
        if($b[$v][0] == $a[$j][0]) {
           echo 1.' ';
        } else {
            echo 0.' ';
        }
    }
} 
```

结果：

> 0 1 1 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:01:27.453

您当前的脚本返回

```
 0 0 1 0 0 1 0 0 
```

要获得所需的输出，您应该尝试：

```
foreach ($a as $v)
{
    in_array($v, $b) ? print("1 ") : print("0 ");
} 
```

输出

```
0 1 1 0 
```

[观看现场演示](http://codepad.org/MC6h5cFM)

# r - 数据集的插值

> ID：13680666
> 
> 赞同：0
> 
> 时间：2012-12-03T09:48:10.873
> 
> 标签：r, dataset, interpolation

我正在开发一个 linux 内核模块，我想在其中评估电池供电的水平。我在充电期间测量了电池上的电压。结果，我收到[了实验依赖](https://gist.github.com/4193923)，例如：

```
10:28:15    7898
10:29:15    7902
10:30:15    7908
10:31:15    7913
10:32:15    7918
10:33:15    7921 
```

![在此处输入图像描述](../Images/82b04cc2eb1674ebb48e09a51889861a.png)

现在我需要用二次多项式对结果图进行插值。

如何使用 R 编程语言做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:58:46.510

用于`lm`将线性模型拟合到数据：

```
> x <- 0:9
> y <- 1+2*x+3*x^2
> fit <- lm( y ~ x + I(x^2) )
> fit

Call:
lm(formula = y ~ x + I(x^2))

Coefficients:
(Intercept)            x       I(x^2)  
          1            2            3 
```

但是您可能应该重新考虑此数据的二次模型。

# linux - 哪个 Linux 头文件包含“struct iface”的定义？

> ID：13680680
> 
> 赞同：0
> 
> 时间：2012-12-03T09:48:50.693
> 
> 标签：linux, linux-kernel, linux-device-driver

在`/usr/include/net/if.h`linux 上，struct iface 被称为`ifaddr`结构中接口的后向指针，但我无法获取定义此结构的头文件。

有知道的请帮帮我！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:40:24.550

`struct ifaddr`是不完整的类型，这意味着代码可以编译，但是如果您取消引用指向 的指针`struct iface`或进行任何其他分配，则会出错。如前所述，`struct iface`仅出于遗留原因保留在主结构中。

```
struct ifaddr
  {
    struct sockaddr ifa_addr;   /* Address of interface.  */
    union
      {
        struct sockaddr ifu_broadaddr;
        struct sockaddr ifu_dstaddr;
      } ifa_ifu;
    struct iface *ifa_ifp;      /* Back-pointer to interface.  */
        struct manav p[8];
    struct ifaddr *ifa_next;    /* Next address for interface.  */
  }; 
```

另请参阅：[取消引用指向不完整类型的指针](https://stackoverflow.com/questions/2700646/dereferencing-pointer-to-incomplete-type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T09:51:19.803

好吧，看起来它只是保留在结构中以保持其结构的遗留代码。

# r - 用于 mclapply 的半全局变量

> ID：13680683
> 
> 赞同：3
> 
> 时间：2012-12-03T09:49:04.653
> 
> 标签：r, mclapply

在一个函数中，我需要`mclapply`按列表中的每个项目运行，它还应该使用半全局变量`var.1`。我不想添加`var.1`到每个列表项中，因为它会占用太多内存。这是说明问题的代码：

```
library(parallel)

list.1 <- list(1,2,3,4)

myInnerFunction <- function(xx) {
  return(xx+var.1)
}

myOuterFunction <- function(list.x) {
  var.1 <- 17
  tmp.1 <- mclapply(list.x, myInnerFunction, mc.cores=6)
  return(tmp.1)
}

results <- myOuterFunction(list.x=list.1)
[1] "Error in FUN(X[[1L]], ...) : object 'var.1' not found\n"
results[[1]] # This should be 18 
```

我怎样才能传递`var.1`给`mclapply`？`var.1`必须在里面声明`myOuterFunction`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:00:21.130

您可以为函数创建第二个 ( `var.1`) 参数`myInnerFunction`：

```
myInnerFunction <- function(xx, var.1) {
  return(xx+var.1)
} 
```

现在可以`myInnerFunction`在命令中传递函数的第二个参数`mclapply`：

```
myOuterFunction <- function(list.x) {
  var.1 <- 17
  tmp.1 <- mclapply(list.x, myInnerFunction, var.1, mc.cores=6)
  return(tmp.1)
} 
```

结果：

```
results <- myOuterFunction(list.x=list.1)

[[1]]
[1] 18

[[2]]
[1] 19

[[3]]
[1] 20

[[4]]
[1] 21 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T09:56:26.707

你想要一个函数闭包吗？

创建一个函数`f`，接受`var.1`作为参数，并返回`myInnerFunction`

```
f = function(var.1) {
    var.1 = var.1
    myInnerFunction <- function(xx)  return(xx+var.1)
} 
```

然后`myOuterFunction`是：

```
myOuterFunction <- function(list.x) {
    var.1 <- 17
    my = f(var.1)
    tmp.1 <- mclapply(list.x, my, mc.cores=6)
    return(tmp.1)
} 
```

和

```
myOuterFunction(list.x=list.1) 
```

按预期工作。

# rmagick - rmagick 保存为 jpeg 时不会导致数据丢失

> ID：13680692
> 
> 赞同：2
> 
> 时间：2012-12-03T09:49:48.427
> 
> 标签：rmagick

我想用 rmagick 编写一个脚本，将图像重新保存 x 次以演示 jpeg 引起的数据丢失。

不幸的是，第一次保存时只有数据丢失。在所有其他时间，图像似乎没有被进一步压缩。

我试图将对象设置为 null，以便在每个循环后启动垃圾收集器，但这一切都没有效果。图像仅压缩一次。

我在下面发布我的代码。获得如何执行此操作的任何提示以及在每个保存周期中压缩图像都会非常有帮助。

```
$i = 1
$j=$i+1

$num = 700

while $i < $num  do

   puts $i

   erstes="%03d" % $i
   puts erstes
   ziel="%03d" % $j
   puts ziel
img = Image.read(o#{erstes}.jpeg").first
img.rotate!(90)
img.write("o#{ziel}.jpeg"){ self.quality = 50 }
img.destroy!
img = nil
GC.start

$i +=1
$j=$i+1
end 
```

# linux - 如何在 Linux 上开发 windows 程序集

> ID：13680695
> 
> 赞同：1
> 
> 时间：2012-12-03T09:49:51.880
> 
> 标签：linux, windows, assembly, wine

作为我大学课程的一部分，我需要使用汇编语言进行开发。我们学习x86，我们在windows环境下开发。我在家里的电脑上运行 Linux，不想每次都去 CS 实验室。

如何在 Linux 中调试和开发完整的 windows 代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:44:43.600

为了获得完全的兼容性，我会选择 VM 选项。VirtualBox 对这种类型的使用是免费的（上次我检查过），如果你能买得起你的课本，你当然应该买得起一个 Windows 许可证。:-) 然后为您的汇编程序查看 MASM32。

# php - 阻止用户使用其他计算机或设备登录

> ID：13680697
> 
> 赞同：1
> 
> 时间：2012-12-03T09:49:57.683
> 
> 标签：php, security

我一直在尝试解决这个问题一段时间。

我已经构建了一个在我们客户的服务器上运行的应用程序。客户必须为每个用户购买许可证才能使用该系统。因此，每个用户在他/她的计算机上都有一个链接，可以仅使用该计算机访问应用程序。每台计算机都必须为每个用户注册并存储在数据库中。

所以我必须限制用户使用另一台计算机/设备访问应用程序。我的问题是如何使用 php（或任何其他语言）从每台计算机捕获唯一信息，以便每次用户尝试登录时都可以检查此信息。我了解到您只能使用 php 获取浏览器信息。所以我正在寻找一些可以引导我走向正确方向的想法。

我尝试的是在每台 PC 中存储唯一的 cookie，并将它们注册到数据库中。但问题是我们总是遇到一些用户清除他们的 cookie 从而无法访问应用程序的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T10:13:34.857

将用户链接到计算机不是一个好主意。为什么要先创建一个 Web 应用程序的独立性和灵活性（假设它是一个 Web 应用程序，因为它是 PHP，或者您实际上有命令行用户？），然后将其限制在单个设备上，这可能会中断，被盗……也许公司没有为每位用户设置固定的工作地点，但它为大量兼职员工使用较少数量的计算机，因此每个用户每天可能使用不同的计算机。

如果你真的想要这样的限制，你最好只限制每个用户的会话数。即：在表中记录会话 ID 和这些会话的用户名。在每个请求上，更新表以存储请求日期时间，以便您可以检查过期会话。使用 MySQL，您可以制作存储类型的表，该表`MEMORY`速度快，对于会话信息非常有用。当您重新启动数据库服务器时，数据将消失，但这通常不是此类信息的问题。

现在，有继续的可能性：

1.  如果用户在另一台 PC 或浏览器上再次登录，它将收到一个新的会话 ID。在这种情况下，在登录过程中，您可以查看会话表以查看用户是否打开了另一个会话 ID。如果是这样，请阻止登录。

    如果会话超时，例如超过 15 分钟，您可以允许登录并删除旧会话。

    缺点是如果浏览器或 PC 崩溃，用户必须等待超时时间才能继续在另一个位置工作。这在任何工作环境中可能都是不可接受的。

2.  更好的解决方案可能是：用户只能有一个“活动”会话。如果用户从另一个工作区登录，他们将自动获得一个新会话。如果发生这种情况，您可以只接受新会话并删除旧会话 ID。如果他们继续使用旧会话，您可以看到该会话不再在会话表中，需要他们再次登录。

    使用该解决方案，用户将能够在工作区之间快速切换，而无需等待，但如果两个用户同时使用相同的用户名，则几乎每个请求都必须重新登录。

但我真的会三思而后行：你到底为什么想要这个限制？如果一家公司愿意使用超过允许的用户数量的软件，他们也愿意只是更改您的 PHP 代码以删除此检查，这将是微不足道的。

此外，如果您使用软件太烦人，他们可能会决定根本不使用它并寻找替代方案。我认为最好相信你的客户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:13:20.353

我不认为你可以只使用 PHP 来归档它。PHP 在服务器上运行，您可以从那里检索的唯一客户端信息是 IP，它不起作用，因为它可以是动态的，或者如果所有用户在同一个 LAN 中，则它们都相同。

想法是使用在客户端中运行的东西，然后 javascript 作为一个好主意弹出，但它有一个问题：用户可以看到它，他可以看到它如何检查或检索信息，所以操纵它的行为是相当的简单的。即使您要从 javascript 中检索用户的 MAC，它也不起作用，因为 MAC 可以更改。

我认为您应该在客户端中安装某种类型的 exe（例如 C、C++、C#、java），以确保它们无法从任何其他计算机或设备登录。当然，这应该在用户使用 Web 应用程序之前安装并通知用户。

另一方面，你为什么要做一个只能在 1 台 PC 上运行的网络应用程序？我的意思是网络应用程序的一大优点是它们几乎可以在任何 PC/设备中使用。

# perl - 通过 apache 从 perl-CGI 脚本运行超级用户命令

> ID：13680699
> 
> 赞同：1
> 
> 时间：2012-12-03T09:50:04.590
> 
> 标签：perl, apache, cgi

我确实有一个脚本，我可以在其中运行本机操作系统命令（非超级用户命令）

```
#!/usr/bin/perl
print "Content-type: text/html\n\n";
system("ls -lrt"); 
```

这很好用。系统命令输出显示在网页上..

但是，我将自己的二进制“get_stats”（具有超级用户权限）放在 /sbin 目录中。但是网页显示为空白，网页上不显示系统命令输出。

```
#!/usr/bin/perl
print "Content-type: text/html\n\n";
system("get_stats"); 
```

在 apache config 或 /etc/sudoers 中需要进行哪些更改？

谢谢阿布舍克

# c - 让我知道以下有关 USB 调制解调器插件和插入通知处理程序 API 或 Linux 中的系统调用的信息

> ID：13680702
> 
> 赞同：1
> 
> 时间：2012-12-03T09:50:17.257
> 
> 标签：c, linux, linux-kernel, embedded, linux-device-driver

请让我知道以下有关 USB 调制解调器插件和插入通知处理程序 API 或 Linux 系统调用的信息：

在我的应用程序中，我必须编写一个函数，它将在以下情况下接收通知：

1.  当插入 USB 调制解调器时，我希望收到插入 USB 调制解调器的通知，任何 Linux 系统调用或 Linux 内核 API 都可以发送这些通知，以及如果我收到有关该设备的其他信息的通知，网络速度等，那会很好

2.  当 USB 调制解调器被拔出时，我想收到一个 USB 调制解调器被拔出的通知，任何 Linux 系统调用或 Linux 内核 API 都可以发送这些通知，如果我收到其他信息，我也会收到通知好的

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:55:39.563

现代 Linux 发行版上的硬件热插拔通知由**udev**直接[通过 udevd](http://www.reactivated.net/writing_udev_rules.html#external-run)或[通过 D-Bus](https://stackoverflow.com/a/5111493/20862)处理。

# java - 从 db2 blob 字段中检索 p7m 文件

> ID：13680704
> 
> 赞同：1
> 
> 时间：2012-12-03T09:50:23.393
> 
> 标签：java, pdf, servlets

我需要检索存储在 blob 字段中的 p7m pdf 文件，并通过指向特定的 url 将其直接下载。

现在我正在使用以下代码检索和发布 pdf，但是打开使用查看数字签名工具保存的文件，签名无效并且 pdf 似乎已损坏。

```
public byte[] getPdfOrdini(String xxx, String tipo) throws Exception, SQLException {
    Blob pdf;
    byte[] pdfData = null;
    Connection conn = new test().getConnectionOrdini();
    PreparedStatement pstmt = null;

    // Query
    if(tipo.equalsIgnoreCase("pnf"))
        pstmt = conn.prepareStatement("Select ... From .. Where ..");
    if(tipo.equalsIgnoreCase("pf"))
        pstmt = conn.prepareStatement("Select ... From .. Where .. = ?");
    pstmt.setString(1, xxx);
    ResultSet rset = pstmt.executeQuery();

    if(tipo.equalsIgnoreCase("pnf")){

        while (rset.next()) {
            pdf = rset.getBlob(1);
            pdfData = pdf.getBytes(1, (int) pdf.length());
        }

        //System.out.println("dimensione blob --> " + pdfData.length);
    }else{
        while (rset.next()) {
            pdf = rset.getBlob(1);
            pdfData = pdf.getBytes(1, (int) pdf.length());
        }
    }
    rset.close();
    pstmt.close();

    return pdfData;
} 
```

以及用于发布 pdf 以供下载的代码：

```
<jsp:useBean id="PDF" class="pdf.test" scope="session" />
<%
Connection conn = null;

if ( request.getParameter("protocollo") != null )
{

String protocollo = request.getParameter("xxx") ;
String tipo = request.getParameter("type");   

try
{  
   String downloadFileName = "O" + xxx + ".pdf.p7m";
   conn = new pdf.test().getConnection();
   conn.setAutoCommit (false);  

   // get the image from the database
   byte[] pdfData = PDF.getPdfOrdini(xxx, tipo);   
   // display the image

   File pdf = new File(downloadFileName);
   FileOutputStream fos = new FileOutputStream(pdf);
   fos.write(pdfData);
   fos.flush();
   fos.close();

   response.setContentType( "application/x-download" );
   response.setHeader( "Content-Disposition", "attachment; filename=" + downloadFileName );
   conn.close();
}
catch (IllegalStateException il){
}
catch (Exception e)
{
  e.printStackTrace();
  throw e;
}
finally
{

}  
}
%> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:14:47.217

您的两个 while 阅读块是相同的，但无论如何它应该可以工作。
你可以试试这个，在 DB2 上一直为我工作：

```
byte[] pdfData = null;
ResultSet rset = pstmt.executeQuery();
if (rset.next())
{
  pdfData = rset.getBytes(1);
}
conn.close();
return pdfData; 
```

补充：
接下来的事情是，我没有看到您在 JSP 中将数据写入浏览器。
像这样的东西：

```
byte[] pdfData = PDF.getPdfOrdini(xxx, tipo);
char[] data = new char[pdfData.length];
for (int i = 0; i < pdfData.length; i++) {
    data[i] = (char) pdfData[i];
    }
response.setContentType( "application/x-download" );
response.setHeader( "Content-Disposition", "attachment; filename=" + downloadFileName );
response.setHeader("Content-length", Integer.toString(data.length));
out.write( data, 0, data.length);
out.flush(); 
```

# google-sheets - Google Spreadsheet API v3 - 如何按 id 获取单个电子表格

> ID：13680708
> 
> 赞同：3
> 
> 时间：2012-12-03T09:50:37.180
> 
> 标签：google-sheets

因此，这些示例向您展示了如何获取在驱动器上获取所有电子表格的电子表格提要。

设置query.Uri的格式是什么？如果我使用 entry.SelfUrl 或以下代码，我会收到 400 错误请求

```
SpreadsheetQuery query = new SpreadsheetQuery();
query.Uri = new Uri(string.Format("{0}/{1}", DocumentsListQuery.documentsBaseUri, entry.ResourceId)); //400
// query.Uri = entry.SelfUri.Content; //also a 400 
```

我还尝试了许多不同形式的提要 url，尤其是一页 API 文档建议的那种（用 替换`key`，`ResourceId`这实际上返回了一个空提要，而不是 400）：

```
https://spreadsheets.google.com/feeds/worksheets/key/private/full 
```

如何只获取一个文件？

相反，我必须获取所有并查询客户端：

```
 var feed = SpreadsheetFeedFor(query);
 var spreadsheet = (SpreadsheetEntry)feed.Entries.Single(e => e.SelfUri == resourceUri); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T18:06:58.557

那么，除了 Worksheets 集合之外，电子表格是什么？显然，从电子表格的角度来看，没有什么是离散的——带有文件名的东西，你可以通过 Docs API 得到它......所以，为了得到一个电子表格，我使用了获取给定电子表格的工作表的示例代码（通过其驱动器的 ResourceId / 键）：

```
 /// <summary>
        /// fetch a worksheet feed for a given spreadsheet
        /// </summary>
        /// <param name="resourceId"></param>
        /// <returns></returns>
        protected WorksheetFeed WorksheetsFor(string resourceId)
        {
            var path = "https://spreadsheets.google.com/feeds/worksheets/{0}/private/full".Substitute(resourceId);
            WorksheetQuery query = new WorksheetQuery(path);
            WorksheetFeed feed = SpreadsheetsService.Query(query);
            return feed;
        } 
```

# oracle - 如何向 C++ 应用程序获取数据库通知

> ID：13680712
> 
> 赞同：0
> 
> 时间：2012-12-03T09:50:46.593
> 
> 标签：oracle, visual-c++, oracle10g, oracle11g, oledb

我们正在开发一个 C++ 服务器，它将基于基于时间的事件进行处理。例如，如果特定用户配置了必须在特定时间处理的特定任务，则需要将事件或通知从数据库发送到 C++ 服务器，以启动任务。定时配置存储在数据库中，C++服务器不应该间隔轮询数据库，但应该在配置的定时从数据库通知事件。

我们正在使用 odatabase 和 odynaset 库来连接和访问 oracle 数据库 11g。

请您为上述问题提供解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:16:51.397

一种方法是使用[Oracle 的 Advanced Queuing](http://docs.oracle.com/cd/E11882_01/server.112/e11013/toc.htm)。为此，您需要设置一个队列（和一个队列表）并编写一个等待队列中下一条消息的 PL/SQL 过程。

然后，C++ 端调用 PL/SQL 过程，该过程在下一个事件发生时返回。

在 Oracle 方面，您将需要使用[DBMS_SCHEDULER](http://docs.oracle.com/cd/B28359_01/appdev.111/b28419/d_sched.htm)或类似工具来*创建事件*，即在适当的时间将新消息插入队列。

它仍然是一种投票方式。但是，两个事件之间绝对没有活动。

**更新：**

这是一些示例代码。

队列的初始设置（消息包含一个数字和一个文本值）：

```
grant AQ_ADMINISTRATOR_ROLE to appuser;
grant EXECUTE ON DBMS_AQ to appuser;
grant EXECUTE ON DBMS_AQ to appuser;

CREATE TYPE sample_payload_type AS OBJECT
(
  cmd  VARCHAR2(20),
  id   NUMBER
);

BEGIN
  DBMS_AQADM.CREATE_QUEUE_TABLE (
    queue_table        => 'sample_queue_table',
    queue_payload_type => 'sample_payload_type',
    sort_list          => 'ENQ_TIME',
    compatible         => '10.0'
  );
END;
/

BEGIN
  DBMS_AQADM.CREATE_QUEUE (
    queue_name         => 'sample_queue',
    queue_table        => 'sample_queue_table'
  );

  DBMS_AQADM.START_QUEUE (
    queue_name         => 'sample_queue'
  );
END;
/ 
```

包头：

```
create or replace package sample_queue_pkg
as

  procedure get_next_msg(
    i_max_wait      number
   ,o_cmd      out  varchar2
   ,o_id       out  number
  );

  procedure put_msg(
    i_cmd           varchar2
   ,i_id            number
  );

end sample_queue_pkg;
/ 
```

包体：

```
create or replace package body sample_queue_pkg
as

  procedure get_next_msg(
    i_max_wait      number
   ,o_cmd      out  varchar2
   ,o_id       out  number
  )
  is
    dequeue_options dbms_aq.dequeue_options_t;
    message_properties dbms_aq.message_properties_t;
    message_handle RAW(16);
    message sample_payload_type;

    NO_MESSAGE_RECEIVED EXCEPTION;
    PRAGMA EXCEPTION_INIT(NO_MESSAGE_RECEIVED, -25228);

  begin
    dequeue_options.wait := i_max_wait;
    DBMS_AQ.DEQUEUE (
      queue_name => 'appuser.sample_queue',
      dequeue_options => dequeue_options,
      message_properties => message_properties,
      payload => message,
      msgid => message_handle
    );

    o_cmd := message.cmd;
    o_id := message.id;

  exception
    when NO_MESSAGE_RECEIVED then
      o_cmd := null;
      o_id := null;

  end get_next_msg;

  procedure put_msg(
    i_cmd           varchar2
   ,i_id            number
  )
  is
    enqueue_options dbms_aq.enqueue_options_t;
    message_properties dbms_aq.message_properties_t;
    message_handle RAW(16);
    message sample_payload_type;
    message_id NUMBER;

  begin
    message := sample_payload_type(i_cmd, i_id);
    DBMS_AQ.ENQUEUE(
      queue_name => 'appuser.sample_queue',
      enqueue_options => enqueue_options,
      message_properties => message_properties,
    payload => message,
      msgid => message_handle
    );
  end put_msg;

end sample_queue_pkg;
/ 
```

数据库服务器可以使用以下代码发送消息：

```
sample_queue_pkg.put_msg('run_task', 8234);
commit; 
```

C++ 服务器可以等待消息（并接收它们）调用存储的`sample_queue_pkg.get_next_msg`. 该参数`i_max_wait`指定等待下一条消息的最长时间（以秒为单位）。您可能希望实现一个循环，等待下一条消息并处理它，直到它接收到服务器即将退出的信号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:27:40.160

一种方法是使用 dbms_pipe 或 dbms_alert。即你从你的C++服务器会话连接到数据库（PRO C）并调用dbms_pipe/alert，这将阻塞直到数据库，在另一个会话中将数据发送到c++服务器将读取然后处理的管道。例如，如果它是一个简单的“GO RUN NOW！” 你想发送，那么 dbms_alert 就可以了。

例如：

```
SQL> declare
  2    v_name  varchar2(200);
  3    v_msg   varchar2(200);
  4    v_sts   number; -- 0 = alert occured, 1 = timeout
  5  begin
  6    dbms_alert.register('RUN_PROGRAM_A');
  7    dbms_alert.register('RUN_PROGRAM_B');
  8
  9    loop
 10      dbms_alert.waitany(v_name,
 11                         v_msg,
 12                         v_sts,
 13                         dbms_alert.maxwait);
 14
 15      if (v_sts = 0)
 16      then
 17        dbms_output.put_line('i got alert: ' ||v_name);
 18        dbms_output.put_line(' with assoc message: ' ||v_msg);
 19      end if;
 20      if (v_name  = 'RUN_PROGRAM_B')
 21      then
 22        exit;
 23      end if;
 24    end loop;
 25  end;
 26  /
i got alert: RUN_PROGRAM_A
with assoc message: whatever you want to transmit.
i got alert: RUN_PROGRAM_A
with assoc message: whatever you want to transmit.
i got alert: RUN_PROGRAM_B
with assoc message: whatever you want to transmit.

PL/SQL procedure successfully completed. 
```

数据库控制会话在哪里发出这个：

```
SQL> exec dbms_alert.signal('RUN_PROGRAM_A', 'whatever you want to transmit.');

PL/SQL procedure successfully completed.

SQL> commit;

Commit complete.

SQL> exec dbms_alert.signal('RUN_PROGRAM_A', 'whatever you want to transmit.');

PL/SQL procedure successfully completed.

SQL> commit;

Commit complete.

SQL> exec dbms_alert.signal('RUN_PROGRAM_B', 'whatever you want to transmit.');

PL/SQL procedure successfully completed.

SQL> commit;

Commit complete.

SQL> 
```

另一种方法是调度程序方法`dbms_queue`（

# php - 使用 PHP 脚本运行 CLI 命令

> ID：13680716
> 
> 赞同：1
> 
> 时间：2012-12-03T09:51:02.887
> 
> 标签：php, ubuntu, terminal, avcodec

我想使用**avconv将****flv**文件转换为**mpg** ，它是使用终端连续运行的。我的问题是使用 php 脚本运行命令。我写了一个代码，但我没有得到结果。我的代码如下

 **```
<?php
$cmd="avconv -i http://localhost/test3/a.flv http://localhost/test3/intermediate1.mpg";
$results = shell_exec($cmd.'2>&1');
?> 
```

我也尝试了以下代码但没有运气

```
<?php
$cmd="avconv -i /home/elby/workspace/test3/a.flv /home/elby/workspace/test3/intermediate1.mpg";
$results = shell_exec($cmd.'2>&1');
echo $results;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:45:39.230

首先，第一个执行示例是无意义的，根据[手册`avconv`](http://manpages.ubuntu.com/manpages/precise/man1/avconv.1.html)它需要2个参数：

```
avconv [global options] [[infile options][-i infile]]... {[outfile options] outfile}... 
```

而且您不能只告诉程序将文件保存到`http`这样的协议。

第二次调用......有几个可能的问题：

*   您是从 Web 还是从 CLI 运行脚本？网络服务器可能（并且可能会）使用不同的用户，这些用户不能访问文件夹
*   PHP 脚本有[超时（默认 30 秒）](http://php.net/manual/en/function.set-time-limit.php)并且视频转换需要更多时间
*   PHP 可能已[`shell_exec`禁用](http://php.net/manual/en/function.shell-exec.php)
*   PHP 可能已[`safe_mode`](http://php.net/manual/en/features.safe-mode.php)打开
*   PHP可能环境变量有问题`PATH`，尝试使用绝对路径
*   禁用后[`error_reporting`](http://php.net/manual/en/function.error-reporting.php)，您可能已经记录了错误但未显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:02:36.983

```
$cmd="avconv -i /home/elby/workspace/test3/a.flv /home/elby/workspace/test3/intermediate1.mpg";
$results = shell_exec($cmd.' 2>&1');
echo $results; 
```

使用 avconv 的绝对路径。**

# java - Grails：log4j 日志记录总是在 SLF4JLog 类中返回 locationInfo

> ID：13680717
> 
> 赞同：0
> 
> 时间：2012-12-03T09:51:08.213
> 
> 标签：java, grails, log4j, slf4j

我以这种方式在 Config.groovy 中配置了 log4j：

```
log4j {
    appenders {
         console name:'stdout', 
             layout: pattern(conversionPattern: '%d{yyyy-MM-dd HH:mm:ss} %-5p %C.%M(%L): %m%n'),
             locationInfo: true
    }
} 
```

控制器和服务调用很明显`log.trace('message')`，并且日志也出现在控制台中。**但总是在`SLF4JLog`类**内有错误的位置信息，就像这样：

```
2012-12-03 10-30-04 TRACE org.apache.commons.logging.impl.SLF4JLog.trace(104): message 
```

根据[SLF4J 文档](http://www.slf4j.org/legacy.html#jclOverSLF4J)，看起来 Grails 使用了可能没问题的遗留`commons-logging`桥，并且位置信息应该（？）通过.`jcl-over-slf4j`[`LocationAwareLogger`](http://www.slf4j.org/api/org/slf4j/spi/LocationAwareLogger.html)

如何配置 Grails 日志记录以获得正确的日志记录位置信息？

我应该使用另一种日志方法而不是内置方法`log.trace(...)`吗？

谢谢

# windows-phone-8 - windows phone 8中是否有任何启动完成事件

> ID：13680719
> 
> 赞同：1
> 
> 时间：2012-12-03T09:51:11.983
> 
> 标签：windows-phone-8

windows phone 8 中是否有任何启动完成触发事件？我在谷歌上搜索了很多，但在 windows phone 8 中我无法获得任何有关启动触发事件的信息。

我想在手机重启后启动一个后台进程，为此任何启动完成意图或启动完成触发事件，以便我可以启动后台进程。如果可能的话，请告诉我实现它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T21:41:26.110

[WP7/WP8 不允许完整的多任务处理](https://stackoverflow.com/questions/13514064/how-to-run-application-in-background-in-windows-phone/13520869#13520869)。作为其中的一部分，您不能选择特定的操作系统事件来触发您的代码。操作系统通过您可以利用的各种方式公开了固定的可扩展性点。例如，PeriodicBackgroundAgents 按 30 多分钟的计划启动，持续 10 秒。IntensiveResourceBackgroundAgent 在手机连接到 WiFi 和电池时启动。但是，目前还没有操作系统可扩展点用于向 3rd 方应用程序公开的启动。

如果您想查看此功能，请使用您的用例打开一个新的[wpdev uservoice](http://wpdev.uservoice.com)请求。请注意，电池寿命、内存和处理能力方面的整体设备健康状况始终是一个问题。所以让你的用例大放异彩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:42:37.583

Sorry, there is no such trigger in Windows Phone 8\. Your Background Agent just have to wait to be regularly scheduled after phone is restarted.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:15:03.110

当操作系统完成启动时，您无法触发操作。您只能创建一个后台代理，它将由操作系统每 30 分钟左右自动启动一次。

# php - 使用 MYSQL 数据库创建 JSON 文件的 PHP API

> ID：13680723
> 
> 赞同：-2
> 
> 时间：2012-12-03T09:51:23.620
> 
> 标签：php, mysql, json

我想通过使用 MySQL 创建 JSON 文件来编写 PHP API。

假设我有一个表“A”，我有 2 列`FILENAME`并`FILETYPE`插入了 10 行。

我必须编写一个 PHP 代码，它将创建一个 JSON 文件并从表 A（即 10 行）中获取数据，并将有效 JSON 格式的值打印到 JSON 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:55:00.093

只需选择数据，然后执行：

```
file_put_contents('your/json/file.x',json_encode($theData)); 
```

[阅读文档](http://www.php.net/json_encode)以查看输出将是什么。
如果你需要更多的花里胡哨，有[一个 Zend_Json 对象](http://framework.zend.com/manual/1.12/en/zend.json.html)，除其他外（只是谷歌的“PHP JSON 类”），看看结果

# c++ - 我不明白为什么这个模板专业化在 VS 2010 中失败了

> ID：13680725
> 
> 赞同：0
> 
> 时间：2012-12-03T09:51:25.403
> 
> 标签：c++, templates

```
template<typename T>
T foo(std::string key, T &def_value) {return def_value;}

template<>
std::string foo<std::string>(std::string key, std::string &def_value) {return def_value;} 
```

> 致命错误 LNK1169：找到一个或多个多重定义的符号

如果我删除第二个定义，它编译得很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T10:00:27.233

全特化不再是一个模板，而是一个普通的函数。

如果它包含在多个翻译单元中，则必须声明`inline`。

# javascript - 从客户端计算机加载图像并确定其主要色调

> ID：13680726
> 
> 赞同：0
> 
> 时间：2012-12-03T09:51:28.487
> 
> 标签：javascript, image, colors, filesystems

我有两个问题：

1.  有没有一种方法可以使用文件输入从访问者的计算机加载图像并使其可以从 JavaScript 访问以对其执行操作？（必须至少与 IE 7 兼容）

2.  浏览器是否提供了像 PHP 库 GD 那样分析图片的功能，或者是否有库可以做到这一点？(getColorAt(x, y) 等)

在将壁纸放入画廊之前，我需要确定壁纸的主要色调。大多数免费的网络托管服务只允许每个用户使用 16 兆字节的 RAM，因此必须在客户端完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:10:51.903

> 1) 有没有一种方法可以使用文件输入从访问者的计算机加载图像并使其可以从 JavaScript 访问以对其执行操作？（必须至少与 IE 7 兼容）

您需要使用 IE7 不支持的[File API](http://caniuse.com/#search=file%20api)或插件（例如 Java 小程序）。

> 2) 浏览器是否提供分析图片的功能，如 PHP 库 GD 所做的，或者是否有库可以做到这一点？(getColorAt(x, y) 等)

可以通过[canvas](http://caniuse.com/#search=canvas)获取颜色数据，但同样不支持旧 IE。

# javascript - 使用 blueimp-tmpl javascript 插件

> ID：13680728
> 
> 赞同：1
> 
> 时间：2012-12-03T09:51:37.937
> 
> 标签：javascript, jquery, templates, file-upload

我正在使用 jQuery File Upload Plugin，更具体地说，我正在使用[java klaalo 示例](https://github.com/klaalo/jQuery-File-Upload-Java)。我面临的问题是我想`jquery.fileupload-ui.js`在我的`main.js`脚本文件中使用由文件使用和加载的 javascript 模板插件。在`jquery.fileupload-ui.js`文件中加载 javascript 模板，如下所示：

```
(function (factory) {
'use strict';
if (typeof define === 'function' && define.amd) {
    // Register as an anonymous AMD module:
    define([
        'jquery',
        'tmpl',
        'load-image',
        './jquery.fileupload-fp'
    ], factory);
} else {
    // Browser globals:
    factory(
        window.jQuery,
        window.tmpl,
        window.loadImage
    );
} 
```

我无法在 main.js 中使用 tmpl 函数，我应该再次加载它吗？我可以在不干扰 jquery-file-upload 插件的情况下进行操作吗？

在此先感谢您的帮助 DeiviT

# scala - 这是 maven scala 插件的最新版本吗？

> ID：13680729
> 
> 赞同：12
> 
> 时间：2012-12-03T09:51:38.883
> 
> 标签：scala, maven

这是 maven scala 插件的最新版本吗：http: [//scala-tools.org/mvnsites/maven-scala-plugin/](http://scala-tools.org/mvnsites/maven-scala-plugin/)

它声明“© 2010 Scala Tools”，所以必须在另一个位置有更高版本？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-03T10:02:59.343

最后一个版本位于[http://davidb.github.com/scala-maven-plugin/index.html](http://davidb.github.com/scala-maven-plugin/index.html)

该插件已重命名为 scala-maven-plugin 以尊重插件的新 maven 命名策略。（即只有maven核心插件前缀为maven）

# php - PHP/curl/file_get_image：如何在放置到服务器之前检查文件的有效性和大小

> ID：13680733
> 
> 赞同：0
> 
> 时间：2012-12-03T09:51:45.820
> 
> 标签：php, image, url, copy

> **可能重复：**
> [确定 URL 是否是 PHP 中的图像的最佳方法](https://stackoverflow.com/questions/676949/best-way-to-determine-if-a-url-is-an-image-in-php)

编辑：

我有一个脚本，它使用 file_get_contents （我的主机允许）将远程文件复制到我的服务器，让用户共享图片。但是，为了避免滥用，我需要代码来检查文件的大小、有效性（以及在我的服务器上允许它们之前的恶意代码。到目前为止，我一直无法找到一个强大的解决方案。其他人指出的旧文章，例如这个：

```
https://stackoverflow.com/questions/676949/best-way-to-determine-if-a-url-is-an-image-in-php 
```

建议可能的方法——检查文件扩展名、mime 类型并在文件在服务器上之后使用 GD，但请注意，没有一个是万无一失的。然而，无数站点允许远程上传文件，这表明必须有一些更好的方法来处理安全问题。

File_get_upload 是最基本的。卷曲很粗糙，但可能具有更多功能。如果文件不是图像，GD 的 get_image_size 函数将返回 false，如下所示：

```
$imginfo_array = getimagesize($tempFile); 
```

但是，我的理解是 GD 无法远程处理文件。

这是此阶段使用 file_get_contents 的简单代码：

```
$url = 'http://example.com/image.php';
$img = '/my/folder/flower.gif';
file_put_contents($img, file_get_contents($url)); 
```

这是卷曲版本：

```
$ch = curl_init('http://example.com/image.php');
$fp = fopen('/my/folder/flower.gif', 'wb');
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_exec($ch);
curl_close($ch);
fclose($fp); 
```

有谁知道在您的服务器上检查文件大小和有效性的最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:47:20.020

我真的不认为使用`stream_get_meta_data`, `header information`or , `extension`or`mime information`是最好的解决方案......**为什么？**

已经创建了[一个假的 PNG 图像](https://i.stack.imgur.com/wbSmq.png)，你会看到

*   假哑剧
*   假创作日期
*   假修改日期
*   假文件扩展名

缺少功能

*   假输出
*   假尺寸

**情况1**

```
$fake = "http://i.stack.imgur.com/wbSmq.png";
$meta = stream_get_meta_data(fopen($fake, 'rb'));
var_dump($meta); 
```

输出

```
array (size=10)
  'wrapper_data' => 
    array (size=12)
      0 => string 'HTTP/1.0 200 OK' (length=15)
      1 => string 'Accept-Ranges: bytes' (length=20)
      2 => string 'Cache-Control: max-age=315360000' (length=32)
      3 => string 'Content-Type: image/png' (length=23)
      4 => string 'Date: Mon, 03 Dec 2012 10:41:08 GMT' (length=35)
      5 => string 'ETag: "add48f1871182328f5d8ebe74c1df32d"' (length=40)
      6 => string 'Expires: Thu, 31 Dec 2037 23:58:38 GMT' (length=38)
      7 => string 'Last-Modified: Mon, 03 Dec 2012 10:29:40 GMT' (length=44)
      8 => string 'Server: ECAcc (cdg/44CF)' (length=24)
      9 => string 'X-Cache: HIT' (length=12)
      10 => string 'Content-Length: 167' (length=19)
      11 => string 'Connection: close' (length=17)
  'wrapper_type' => string 'http' (length=4)
  'stream_type' => string 'tcp_socket/ssl' (length=14)
  'mode' => string 'rb' (length=2)
  'unread_bytes' => int 167
  'seekable' => boolean false
  'uri' => string 'http://i.stack.imgur.com/wbSmq.png' (length=34)
  'timed_out' => boolean false
  'blocked' => boolean true
  'eof' => boolean false 
```

从上面的输出**中没有任何迹象表明图像是假的**？

**案例2**

> 据我所知，我不能直接在远程 url 上使用 GD。

这不是真的[getImageSize](http://php.net/manual/en/function.getimagesize.php)是一个 GD 函数可以与远程 URL 一起使用，并且它更可靠地识别假图像。

```
$fake = "http://i.stack.imgur.com/wbSmq.png";
$meta = getimagesize($fake);
var_dump($meta); 
```

输出

```
array (size=6)
  0 => int 1                     |
  1 => int 1                     |=----------------- Looks Fake
  2 => int 3                     |
  3 => string 'width="1" height="1"' (length=20)
  'bits' => int 1   <------------------------------- fake
  'mime' => string 'image/png' (length=9) ---------- mime may be correct 
```

如果`The goal here is to let users share valid pictures up to a certain size`正如您所提到的使用`getImagesize`更可靠的解决方案

# android - 完成后关闭活动

> ID：13680738
> 
> 赞同：-1
> 
> 时间：2012-12-03T09:52:00.647
> 
> 标签：android

在我单击按钮转到 updateprofile 后，我在 android 中有问题，例如，我如何关闭以前的活动

```
x.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent activity2 = new Intent(getApplicationContext(),
                    updateprofile.class);
            startActivity(updateprofile);

        }
    }); 
```

我可以调用哪种方法来关闭以前的活动你能帮我吗谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:53:22.807

通过调用`finish()`当前活动，..

```
x.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent activity2 = new Intent(yourActivity.this,
                    activity2.class);
            startActivity(activity2);
            finish();

        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:09:49.423

```
x.setOnClickListener(new OnClickListener() 
{
    @Override
    public void onClick(View v) 
    {
                Intent activity2 = new Intent(mainActivity.this, secondActivity.class);
                finish();
                startActivity(activity2);
    }
}); 
```

# typo3 - 从当前图像中获取文件名

> ID：13680742
> 
> 赞同：1
> 
> 时间：2012-12-03T09:52:32.003
> 
> 标签：typo3, typoscript

谁能告诉我如何获得当前的图像文件名。我必须链接当前图像才能在灯箱中打开它。

我的代码：

```
15 = TEXT
    15 {
      field = image
      split {

        token = ,
        cObjNum = 1 || 3 || 3

        //ignore
        1....

        3 {
          10 = IMAGE
          10.file.import.current = 1
          10.file.import = uploads/pics/
          10.file.maxW = 270
          10.params = class="hidden"

          10.imageLinkWrap = 1
          10.imageLinkWrap {
            enable = 1
            typolink.parameter = TEXT
            typolink.parameter.field = image
            typolink.parameter.listNum.splitChar = ,

            typolink.parameter.listNum = // <- Need current image number
            typolink.parameter.wrap = /uploads/pics/| 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:23:17.457

您应该在 img mainpulation 期间设置一些特殊的变量。来自 TYPO3 维基

IMG_RESOURCE：在渲染 img_resource 时，TYPO3 设置 TSFE:lastImgResourceInfo，它是图像信息的数字数组

```
TSFE:lastImgResourceInfo|0 contains the width (after scaling) of the image
TSFE:lastImgResourceInfo|1 contains the height (after scaling) of the image
TSFE:lastImgResourceInfo|2 contains the image file extension
TSFE:lastImgResourceInfo|3 contains the path to the (scaled) image file
TSFE:lastImgResourceInfo|origFile contains the name (path?) of the original file
TSFE:lastImgResourceInfo|origFile_mtime contains the the last modification time of the original file 
```

因此，您可以将它们与数据一起使用

```
10 = TEXT
10.data = TSFE:lastImgResourceInfo|3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:02:32.103

[http://wiki.typo3.org/TSref/stdWrap#current](http://wiki.typo3.org/TSref/stdWrap#current) http://www.typo3wizard.com/de/snippets/general-config/bild-aus-media-feld.html

字段“图像”

```
lib.images=TEXT
lib.images.data= levelmedia: 2,slide
lib.images.wrap=<div id="bilder">|</div>
lib.images.split{
token=,
cObjNum=1
1.10=IMAGE
1.10.file{
 import.current=1
 import=uploads/media/
 width = 270
 height= 300
}
} 
```

# java - Java中的星星金字塔

> ID：13680746
> 
> 赞同：-3
> 
> 时间：2012-12-03T09:52:51.547
> 
> 标签：java, string-formatting

我怎样才能在java中做到这一点？：

```
    * * * * * * *
       * * * * *
          * * *
             *
          * * *
       * * * * *
    * * * * * * *

```

这是我的答案^_^

```
for (int i=7;i>=1;i-=2 ) {
for (int j=i;j<7;j++ ) {
System.out.print(" " );
}for (int k=1;k<i+1;k++) {
System.out.print(" *" );
}System.out.println( );
 }   
for (int i=3;i<=7;i+=2 ) {
for (int j=7;j>i;j--) {
System.out.print(" " );
}for (int k=1;k<=i;k++ ) {
System.out.print(" *" );
}System.out.println( );

} 
```

我也想知道如何做到这一点：

```
    * *
    * * * *
    * * * * * *
    * * * * * * *
    * * * * * *
    * * * *
    * *

```

我现在正在尝试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:37:46.563

想想一个 7 行的正方形，如果`*`.

然后，你所做的是：

![在此处输入图像描述](../Images/2c7d45549c44e5b31c1ea8ad36488dc5.png)

你需要做的是：

![在此处输入图像描述](../Images/79bafbb609480b84c03fcb6f4e58d723.png)

将您之前所做的红线区域转换为空格并将*添加到空白区域

**自己编写自己的代码，将来会对您有所帮助:)**

**编辑**：好的，仅供参考：

```
 for (int i=0;i<4;i+=1 ) {
            for (int j=0;j<7;j++ ) {
                if(j>i&&j<(7-(i+1))){
                    System.out.print("  ");
                }
                else
                    System.out.print(" *" );
            }
            System.out.println( );
        }  
        for (int i=4;i<7;i+=1 ) {
            for (int j=7;j>0;j-- ) {
                if(j<(i+1)&&j>(7-(i))){
                    System.out.print("  ");
                }
                else
                    System.out.print(" *" );
            }
            System.out.println( );
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:25:23.953

一种方法是使用 2 个循环，一个用于上半部分，一个用于底部。在两个处理星星和/或另一个处理空格的循环中嵌套一个 for 循环。

还有更多，我将不得不编写代码:)

一旦你得到这个，你将能够做第二个。

这个问题更多的是逻辑而不是语言技能的测试。如果您*因为*它的 java 而遇到问题，那么我建议您更多地关注语言基础知识，然后尝试编写代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:40:34.053

```
for (int i = 1, j = 7; i <= 7 && j >= 0; i++, j--) {
    for (int i2 = 0; i2 < i - 1; i2++) {
        System.out.print(" ");
    }
    for (int m = i - 1; m < j; m++) {
        System.out.print("*");
    }

    for (int j2 = j; j2 > 0; j2--) {
        System.out.print(" ");
    }
    System.out.println();
} 
```

只是为了上半部分给你一些方向，它可能不是有效的解决方案，它只是为了工作目的

# linux - Linux Makefile - CXX 未定义

> ID：13680749
> 
> 赞同：0
> 
> 时间：2012-12-03T09:53:07.320
> 
> 标签：linux, makefile, gnu

> **可能重复：**
> [makefile 中 CXX 的值从何而来？](https://stackoverflow.com/questions/11394659/where-does-the-value-of-cxx-in-a-makefile-come-from)

我目前正在处理遗留项目的生成文件。使用 Makefile 成功构建项目。

在检查 Makefile 时，我注意到它使用`${CXX}`宏来调用编译器。但是，makefile 中没有定义 CXX，并且没有包含其他 makefile。

我试图看看 CXX 是否是一个环境变量，它不是。

CXX 有默认值吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:54:43.443

它在[手册](http://www.gnu.org/software/make/manual/html_node/Implicit-Variables.html)中：

```
CXX
    Program for compiling C++ programs; default ‘g++’. 
```

# javascript - 使用开始和结束位置javascript从输入中删除字符

> ID：13680750
> 
> 赞同：0
> 
> 时间：2012-12-03T09:53:19.147
> 
> 标签：javascript, input, position, selection

我正在尝试通过以下方式从输入中删除文本，但它在 Mozilla 中不起作用，有人可以帮忙吗？
在 IE 中它工作正常。

```
var start = txt.selectionStart;
var end = txt.selectionEnd;  
var selectedStr = txt.value.toString().substring(start, end);
txt.value = txt.value.toString().replace(selectedStr, ""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:58:44.140

Mozilla（和其他浏览器）使用不同的实现[`document.selection`](https://developer.mozilla.org/en-US/docs/DOM/Selection)，[`window.getSelection()`](https://developer.mozilla.org/en-US/docs/DOM/window.getSelection)因此您需要根据这些方法/属性和旧支持表调整您的代码。您可以使用许多库来为您标准化。

这是一个适用于 webkit 的代码示例：

```
var selectedStr = '';
if (window.getSelection) {
    var selectedText = window.getSelection().toString()
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:35:34.847

看起来好像您正在尝试删除文本输入中的选定文本。您将需要两种不同的方法：一种用于 IE < 9，另一种用于支持`selectionStart`和`selectionEnd`属性的其他浏览器。就是这样：

演示：http: [//jsfiddle.net/hwG7f/1/](http://jsfiddle.net/hwG7f/1/)

代码：

```
function deleteSelected(input) {
    input.focus();
    if (typeof input.selectionStart == "number") {
        var start = input.selectionStart,
            end = input.selectionEnd,
            val = input.value;
        if (start != end) {
            input.value = val.slice(0, start) + val.slice(end);
            input.setSelectionRange(start, start);
        }
    } else if (typeof document.selection != "undefined") {
        document.selection.createRange().text = "";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:01:57.067

替换值不是解决此问题的正确方法。尝试在选择之前和之后获取字符串块：

```
var start = txt.selectionStart;
var end = txt.selectionEnd;
txt.value = txt.value.substring(0,start) + txt.value.substring(end); 
```

这是一个演示：http: [//jsfiddle.net/BuMUu/1/](http://jsfiddle.net/BuMUu/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T10:12:44.493

SelectionStart 仅适用于 IE9+。

对不起，但你为什么不直接将它设置为“”。

* * *

```
<input type="text" id="txt" />
<input type="button" value="Clear" id="clear" />​

function clear() {
    var txt = document.getElementById('txt');
    txt.value = "";
}
$('#clear').click(function(){clear()});​ 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-03T10:03:23.087

```
var str = "yourString"
str = str.substring(1,str.length-1) 
```

# graph - 任何带有 SPARQL 查询编辑器或浏览器的优秀 rdf 图形可视化工具？

> ID：13680756
> 
> 赞同：0
> 
> 时间：2012-12-03T09:53:36.790
> 
> 标签：graph, rdf, sparql

根据我的问题，我很好奇社区中是否有人知道任何有用的工具可以完成此任务，即您有 sparql 查询编辑器，它允许您编写和保存查询并以类似图形的格式检索结果?

希望这是有道理的。

我知道有一些很好的工具，例如 Protege、VisualDataWeb 可以很好地用于实现相同的目标。但我真的想知道那里还有什么可用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:20:29.747

[Topbraid Composer](http://www.topquadrant.com/products/TB_Composer.html)是我所知道的这个领域中最完整的工具。

请注意，SELECT 结果是表格的，而不是图形的，尽管您可以将原始查询视为“gappy graph”并将结果绑定到它。（[RDFAuthor](http://danbri.org/words/2005/09/22/136) [使用了这种技术](http://rdfweb.org/people/damian/RDFAuthor/Tutorial/Tutorial2/)）

# c++ - 如何比较/排序包含自定义 typedef 的列表容器的元素？

> ID：13680757
> 
> 赞同：3
> 
> 时间：2012-12-03T09:53:36.973
> 
> 标签：c++, list, stl, compare, containers

我想使用`std::list`STL 容器来对包含的项目应用订单。但是，我要使用的项目是`typedef`由自定义类型和`double`表示重量的 a 组成的自定义项。如何确保可以根据元素的权重对结果列表进行排序？

```
typedef std::pair<linearVariable*, double> weightedVariable; 
```

[...]

```
std::list<weightedVariable> tmp; 
```

我必须做些什么来确保列表根据对的第二部分（重量）进行排序？有没有更好的方法来维护自定义类型的顺序？在我的情况下，重量不是 的属性`linearVariable`，但可以计算出来。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T10:00:30.217

您可以使用[`std::list::sort`](http://en.cppreference.com/w/cpp/container/list/sort)自定义比较功能：

```
inline bool comp(const weightedVariable& lhs, const weightedVariable& rhs)
{
  return lhs.second < rhs.second;
}

tmp.sort(comp); 
```

另一种选择是提供`bool operator<`并使用`std::list::sort()`：

```
inline bool operator < (const weightedVariable& lhs, const weightedVariable& rhs)
{
  return lhs.second < rhs.second;
}

tmp.sort(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-06T08:49:41.433

从[C++11](https://en.wikipedia.org/wiki/C%2B%2B11)开始，您还可以使用[lambda 表达式](http://en.cppreference.com/w/cpp/language/lambda)而不是定义比较函数或运算符：

```
#include <list>
#include <iostream>
using namespace std;

int main()
{
    typedef void linearVariable;  // Dummy to make the code compile.
    typedef pair<linearVariable*, double> weightedVariable;
    list<weightedVariable> tmp;

    tmp.emplace_back(make_pair(nullptr, 0.4));
    tmp.emplace_back(make_pair(nullptr, 0.8));
    tmp.emplace_back(make_pair(nullptr, 0.2));

    tmp.sort([](const weightedVariable& a, const weightedVariable& b) {
        return a.second < b.second;
    });

    for (auto const &wv : tmp)
        cout << wv.second << endl;

    return 0;
} 
```

输出：

> 0.2
> 0.4
> 0.8

[Ideone 上的代码](https://ideone.com/whmueo)

# android - 带有联系人图像的 Android 自定义 ListView

> ID：13680762
> 
> 赞同：-1
> 
> 时间：2012-12-03T09:53:44.677
> 
> 标签：android, android-contacts, android-custom-view

我需要在我的自定义 ListView 中显示用户的联系人图片。我可以通过 AsyncTask 获取图像，但我无法设置图像，因为在 AsyncTask 完成之前列表视图已经被加载。我正在为列表视图的每一行调用 AsycTask。AsyncTask 完成后，我手头有 Image Uri。请就如何做到这一点提供一些想法。

我正在使用自定义基本适配器来执行此操作。如果我使用 AsyncTask().get() 方法，我可以填充 ImageView，但它会阻塞 UI 线程并使 AsyncTask 的目的无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:01:13.990

`onPostExecute()`您可以在AsyncTask的方法中加载 ListView 。这样，您将保证 Async 任务将在加载 ListView 之前完成。

您可以在 AsyncTask 执行时显示[ProgressDialog](https://developer.android.com/reference/android/app/ProgressDialog.html)以让用户知道正在获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:10:36.757

这取决于`ListAdapter`您使用的，但例如，如果您使用的是`ArrayAdapter`，我*认为*您可以调用`ArrayAdapter.notifyDataSetChanged()`它，它会重新加载您使用的所有（可见）视图`ArrayAdapter.getView()`。

一个更复杂的选项是保存对`ImageView`s 的引用，但这会有点棘手，因为列表只保留可见列表行的视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T06:47:43.033

最后我找到了问题所在。我的 AsyncTask 类的 onPostExecute() 方法在 doInBackground() 之后没有被执行。不调用它的原因是它只能接受 Object 参数，例如 onPostExecute(Object.. args)。我所有的图像设置代码都写在 onPostExecute() 中。

# php - sql insert 在某些记录后不插入

> ID：13680763
> 
> 赞同：0
> 
> 时间：2012-12-03T09:53:51.273
> 
> 标签：php, mysql, sql-insert

我已经成功插入数据库，但它没有插入任何东西，从那时起我实际上没有更改代码。

可能是什么原因？

```
while ($row = mysql_fetch_array($new_entries)){
    $anzeigen_id = $row[0];
    $firma_id = $row[1];
    $xml_filename = "xml/".$anzeigen_id.".xml";
    $dom = new DOMDocument();
    $dom->load($xml_filename);
    $value = $dom->getElementsByTagName('FormattedPositionDescription');
    foreach($value as $v){
        $text = $v->getElementsByTagName('Value');
        foreach($text as $t){
            $anzeige_txt = $t->nodeValue;
            $anzeige_txt = utf8_decode($anzeige_txt);
            $sql = "INSERT INTO testing (`firmen_id`,`anzeige_id`,`anzeige_txt`) VALUES ('$firma_id','$anzeigen_id','$anzeige_txt')";
            $sql_inserted = mysql_query($sql);
            if($sql_inserted){
                echo "'$anzeigen_id' from $xml_filename inserted<br />";
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:12:51.673

好吧，我会发布一个答案，因为问你一些代码示例等会更清楚。

首先，当你遇到这样一个莫名其妙的情况时：**你应该调试！**

在您的情况下，您会在查询成功时显示一条消息。但是如果查询失败怎么办？您应该处理一条错误消息以查看发生了什么。像这样的东西：

```
if($sql_inserted)
{
  echo "'$anzeigen_id' from $xml_filename inserted<br />";
}
else
{
  throw new Exception(mysql_error() . '. SQL: '.$sql);
} 
```

查询失败时会出现异常。您将看到错误消息 ( `mysql_error()`) 和失败的查询 ( `$sql`)。

可能是一个问题，是您没有转义您在查询中输入的值。因此，如果`'`变量内部有一个，它将破坏查询。你应该逃避它们：

```
$firma_id    = mysql_real_escape_string($firma_id);
$anzeigen_id = mysql_real_escape_string($anzeigen_id);
$anzeige_txt = mysql_real_escape_string($anzeige_txt); 
```

所以你会得到一个像这样的最终代码：

```
foreach($text as $t)
{
  $firma_id    = mysql_real_escape_string($firma_id);
  $anzeigen_id = mysql_real_escape_string($anzeigen_id);
  $anzeige_txt = mysql_real_escape_string(utf8_decode($t->nodeValue));

  $sql = "INSERT INTO testing (`firmen_id`,`anzeige_id`,`anzeige_txt`) VALUES ('$firma_id','$anzeigen_id','$anzeige_txt')";
  $sql_inserted = mysql_query($sql);

  if($sql_inserted)
  {
    echo "'$anzeigen_id' from $xml_filename inserted<br />";
  }
  else
  {
    throw new Exception(mysql_error() . '. SQL: '.$sql);
  }
} 
```

**顺便说一句**，正如我告诉你的[**，不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:19:52.977

它不起作用的原因是您未能清理输入。考虑：

```
$anzeigen_id = mysql_real_escape_string($row[0]);
$firma_id = mysql_real_escape_string($row[1]);
....
$anzeige_txt = mysql_real_escape_string(utf8_decode($t->nodeValue)); 
```

您应该了解 SQL 注入的风险以及如何防止它。

您还应该在代码中进行适当的错误检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:42:06.670

试试这个.....

```
$sql = "";
$comma = "";
while ($row = mysql_fetch_array($new_entries)){
    $anzeigen_id = $row[0];
    $firma_id = $row[1];
    $xml_filename = "xml/".$anzeigen_id.".xml";
    $dom = new DOMDocument();
    $dom->load($xml_filename);
    $value = $dom->getElementsByTagName('FormattedPositionDescription');
    foreach($value as $v){
        $text = $v->getElementsByTagName('Value');
        foreach($text as $t){
            $anzeige_txt = $t->nodeValue;
            $anzeige_txt = utf8_decode($anzeige_txt);
            $sql .= "$comma ('$firma_id','$anzeigen_id','$anzeige_txt')";
            $comma = ", ";

        }
    }
}
$sql = "INSERT INTO testing (`firmen_id`,`anzeige_id`,`anzeige_txt`) VALUES $sql";
$sql_inserted = mysql_query($sql); 
```

# ruby-on-rails-3 - 在 Heroku 上以“http”而不是“https”运行应用程序

> ID：13680768
> 
> 赞同：5
> 
> 时间：2012-12-03T09:54:17.087
> 
> 标签：ruby-on-rails-3, heroku

我已经将 Michael Hartl 的教程代码的演示应用程序部署到 heroku 上，以查看它的工作情况。[该应用程序在https://some-app-name.herokuapp.com](https://some-app-name.herokuapp.com)中打开。我如何让它以 http 而不是 https 打开？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-21T17:27:32.390

有同样的问题。您必须更改应用程序的 ssl 设置。

`environments/production.rb`必须有以下配置`config.force_ssl = false`，默认情况下设置为 true 。

必须重置 Firefox 才能生效。其他浏览器正常。

# python - 计算文件中前两个“字符串”出现之间的跳转（行数）

> ID：13680769
> 
> 赞同：2
> 
> 时间：2012-12-03T09:54:22.017
> 
> 标签：python, string, readline, readfile

我有一个巨大的数据文件，其中包含在定义的行数后重复的特定字符串。

计算前两个“排名”出现之间的跳跃。例如，文件如下所示：

```
 1 5 6 8 Rank                     line-start
  2 4 8 5
  7 5 8 6
  5 4 6 4
  1 5 7 4 Rank                     line-end  
  4 8 6 4
  2 4 8 5
  3 6 8 9
  5 4 6 4 Rank 
```

您会注意到字符串 Rank 每隔 3 行重复一次。因此，对于上面的示例，块中的行数为 4。我的问题是如何使用 python readline() 获取行数。

我目前遵循这个：

```
data = open(filename).readlines()
count = 0
for j in range(len(data)):
  if(data[j].find('Rank') != -1): 
    if count == 0: line1 = j
    count = count +1 
  if(count == 2):
    no_of_lines = j - line1
    break 
```

欢迎任何改进或建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T09:59:23.933

`.readlines()`当一个简单的生成器表达式计算行数`Rank`就足够时，不要使用：

```
count = sum(1 for l in open(filename) if 'Rank' not in l) 
```

`'Rank' not in l`足以测试字符串`'Rank'`是否不存在于字符串中。循环打开的文件就是循环所有的行。该`sum()`函数会将所有`1`s 相加，这些 s 是为不包含 的每一行生成的`Rank`，为您提供不包含`Rank`它们的行数。

如果你需要数从`Rank`to的行数`Rank`，你需要一点`itertools.takewhile`魔法：

```
import itertools
with open(filename) as f:
    # skip until we reach `Rank`:
    itertools.takewhile(lambda l: 'Rank' not in l, f)
    # takewhile will have read a line with `Rank` now
    # count the lines *without* `Rank` between them
    count = sum(1 for l in itertools.takewhile(lambda l: 'Rank' not in l, f)
    count += 1  # we skipped at least one `Rank` line. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:12:45.463

计算前两次`'Rank'`出现之间的跳跃：

```
def find_jumps(filename):
    first = True
    count = 0
    with open(filename) as f:
        for line in f:
            if 'Rank' in line:
                if first:
                    count = 0 
                    #set this to 1 if you want to include one of the 'Rank' lines.
                    first = False                    
                else:
                    return count
            else:
                count += 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T10:25:02.010

7行代码：

```
count = 0
for line in open("yourfile.txt"):
    if "Rank" in line: 
        count += 1
        if count > 1: break 
    elif count > 0: count += 1
print count 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T10:25:20.930

我假设您想查找块中的行数，其中每个块以包含“排名”的行开头，例如，您的示例中有 3 个块：第一个有 4 行，第二个有 4 行，第三个有 1 行：

```
from itertools import groupby

def block_start(line, start=[None]):
    if 'Rank' in line:
       start[0] = not start[0]
    return start[0]

with open(filename) as file:
     block_sizes = [sum(1 for line in block) # find number of lines in a block
                    for _, block in groupby(file, key=block_start)] # group
print(block_sizes)
# -> [4, 4, 1] 
```

如果所有块的行数相同，或者您只想在以 开头的第一个块中查找行数`'Rank'`：

```
count = None
with open(filename) as file:
     for line in file:
         if 'Rank' in line:
             if count is None: # found the start of the 1st block
                count = 1
             else: # found the start of the 2nd block
                break
         elif count is not None: # inside the 1st block
             count += 1
print(count) # -> 4 
```

# boost - 从 boost 线程在主线程上运行一个函数并将参数传递给该函数

> ID：13680770
> 
> 赞同：1
> 
> 时间：2012-12-03T09:54:22.710
> 
> 标签：boost, boost-asio, boost-thread, boost-bind

我有一些在 boost 线程中运行的代码，它修改了主线程处理的东西，这些东西不起作用，这是有道理的。

在android上，我将拥有`Handler`一个消息队列，它将在主线程上执行我的代码，并且我可以将我想要的任何参数传递给这个处理程序。

我想对 boost 做同样的事情

所以在我的主线程上，我执行以下操作：

```
boost::thread workerThread(boost::bind(&SomeClass::pollService, this)); 
```

我的 pollService 方法：

```
SomeClass::pollService()
{
     //get some stuff from a web service
     //parse the json response
     //NEEDED part: call a function to be executed on the main thread and hand it some functions
} 
```

PS我看过很多`io_service.post`例子，但我仍然不知道该怎么做，而且我读了一个说可以使用`asio` `strand`但我也无法理解的答案。

有人可以为我哑巴吗？请不要写太抽象的东西，我不会理解，我没有这方面的经验。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T11:00:24.673

是的，`io_service::post()`将函子从一个线程发布到另一个线程是一种方便的工具，但目标线程应该执行`io_service::run()`，这是阻塞函数（它是一种`io_service`“消息循环”）。因此，假设您的主线程如下所示：

```
int main()
{
  // do some preparations, launch other threads...
  // ...
  io_service io;
  io.run();
} 
```

...并假设您可以访问在另一个线程中运行的`io`对象`pollService`，您可以执行以下操作：

```
SomeClass::pollService()
{
  // do something...
  // ...
  io.post([=] { doStuffThatShoudRunInMainThread(); });
} 
```

如果您的编译器不支持 c++11 lambda，请使用`bind`-- 但请注意，它`post`需要空函数，即不接受参数的函数对象。

# ruby - 在 Sprockets 编译任务中禁用文件摘要

> ID：13680773
> 
> 赞同：3
> 
> 时间：2012-12-03T09:54:42.897
> 
> 标签：ruby, rack, sprockets

**我没有使用 Rails。**

我正在使用 sprockets 的内置编译器任务**SprocketsTask**。来源可以在[这里](https://github.com/sstephenson/sprockets/blob/master/lib/rake/sprocketstask.rb#L8-L14)找到。

我想禁用附加到每个文件的文件摘要。所以*application-e7aa01ce5sdf9e6sdfdssd8sdfds8bb.css*将变成*application.css*。

似乎没有我可以找到的文档，并且我已经大量查看了源代码。我知道我可以在创建文件后删除摘要，但我想我会先看看是否有人有更好的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:52:46.087

# 耙文件

```
require "sprockets"

assets = Sprockets::Environment.new
assets.append_path "app/assets/javascripts"

task :assets do
    assets["application.js"].write_to "output/assets"
end 
```

$ 耙资产

**带过滤器**

# 耙文件

```
require "sprockets"

assets = Sprockets::Environment.new
assets.append_path "app/assets/javascripts"
LOOSE_APP_ASSETS = lambda do |path, filename|
 filename !~ %r~app/assets~  && !%w[.js .css].include?(File.extname(path))
end
precompile = [LOOSE_APP_ASSETS, /(?:\/|\\|\A)application\.(css|js)$/]

task :assets do
    assets.each_logical_path(*precompile).each {|path|
        assets[path].write_to "output/assets/#{path}"
    }
end 
```

# datetime - Groovy - 获取德语月份的短名称

> ID：13680775
> 
> 赞同：3
> 
> 时间：2012-12-03T09:54:52.953
> 
> 标签：datetime, groovy, monthcalendar

我尝试用 groovy 获得月份的简称，但是用德语......（Jan，Feb，Mrz，Apr......）

我可以用简单的语句用英文得到它：

```
mydate='2012-11-23 02:26:55.983'
origDate=new Date().parse('yyyy-MM-dd H:mm:ss.S',mydate).format('MMM') 
```

但是用德语？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T10:19:27.243

使用简单日期格式：

```
import java.text.SimpleDateFormat

String mydate = '2012-03-23 02:26:55.983'

SimpleDateFormat sdf = new SimpleDateFormat( 'MMM', Locale.GERMANY )

assert sdf.format( Date.parse( 'yyyy-MM-dd H:mm:ss.S', mydate ) ) == 'Mrz' 
```

更长的例子：

```
def months = new SimpleDateFormat( 'MMM', Locale.GERMANY ).with { sdf ->
  (1..12).collect { month ->
    sdf.format( Date.parse( 'MM', "$month" ) )
  }
}
println months 
```

印刷：

```
[Jan, Feb, Mrz, Apr, Mai, Jun, Jul, Aug, Sep, Okt, Nov, Dez] 
```

# php - 在php中使用mysql查询输出作为变量

> ID：13680779
> 
> 赞同：-1
> 
> 时间：2012-12-03T09:55:08.187
> 
> 标签：php, mysql, sql, web, lamp

我正在尝试使用 SQL 查询的输出（在这种情况下，输出将类似于 26 "http://www.google.com"

我想在 php 的进程中使用 id 和地址，但除了回显它之外，似乎无法对查询的输出做任何事情。

最终，如果我最终可以使用 $id 和 $pos 作为我可以使用的变量，那就太好了。

```
<?php
$con = mysql_connect("localhost","root","root");
if (!$con) {
die('Could not connect: ' . mysql_error());
}
mysql_select_db("movieCol", $con);
$query = "SELECT * FROM `movie_collection` ORDER BY `id` DESC LIMIT 1";
$result = mysql_query($query) or die(mysql_error());
$row = mysql_fetch_array($result) or die(mysql_error());
echo $row['id']. " ". $row['poster'];
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:58:07.103

如果您希望它们作为单独的变量，那么：

```
$query = "SELECT id, poster FROM `movie_collection` ORDER BY `id` DESC LIMIT 1";

...

list($id, $pos) = mysql_fetch_row($result);

echo $id. " ". $pos; 
```

尽管从功能上讲，这不会比使用您已经拥有的数组元素带来更多或更少的好处。

您还可以使用[`extract()`](http://php.net/manual/en/function.extract.php)which 用数组元素填充单个变量：

```
$row = mysql_fetch_array($result) or die(mysql_error());
extract($row);
echo $id. " ". $pos . " " . $director; // access all variables 
```

虽然不建议提取，但使用数组元素确实没有任何好处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:09:09.967

只需将值分配给变量： `$id=$row['id'];` 和 `$pos=$row['poster'];`

现在您可以在任何需要的地方使用变量 $id 和 $pos。

我希望这是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:22:56.247

你在寻找这样的东西吗？

```
<?php
$con = mysql_connect("localhost","root","root");
if (!$con) {
die('Could not connect: ' . mysql_error());
}
mysql_select_db("movieCol", $con);
$query = "SELECT * FROM `movie_collection` ORDER BY `id` DESC LIMIT 1";
$result = mysql_query($query) or die(mysql_error());
$row = mysql_fetch_array($result) or die(mysql_error());

$whatYouWant = $row['id']. " ". $row['poster'];

mysql_close($con);
?><html>
<head><title><?=$whatYouWant?></title></head>
<body><h1><?=$whatYouWant?></h1></body></html> 
```

当然，所有关于 mysql_* 被弃用的警告仍然有效。如果您的 SQL 包含来自 PHP 脚本之外的任何内容，它们就会变得有风险，如下所示：

**永远不要这样做：**

```
$value=$_REQUEST['item_id'];
$query = "SELECT * FROM `movie_collection` WHERE `id`=$value DESC LIMIT 1"; 
```

正如其他人所建议的那样考虑 PDO 或 mysqli 等（或至少记住每次都正确过滤 $value）。

# xml - 如何使用 Stax 编写 @xml:space="preserve"

> ID：13680781
> 
> 赞同：0
> 
> 时间：2012-12-03T09:55:13.417
> 
> 标签：xml, xml-serialization, stax

我使用 stax 编写一个 XML 文件。

我的问题是如何将属性添加`xml:space="preserve"`到我的元素中？

*   我需要声明`xml`前缀吗？AFAIK，通常没有必要。
    *   如果我不声明，stax 会抱怨首选前缀不能是`null`（ javax.xml.stream.XMLStreamException: Prefix cannot be null）
    *   `setPrefix("xml", "http://www.w3.org/1998/xml")`如果我在 my 上声明前缀`XMLStreamWriter`，它似乎没有效果。在调试模式下，我看到 XMLStreamWriter 的 nsmap 没有“xml”条目
*   当我用`writeAttribe("http://www.w3.org/1998/xml", "space", "preserve")`. 有没有具体的方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:41:58.667

我找到了解决方法：

```
writeAttribute("xml:space", "preserve") 
```

但这是无意义的，因为`xml:space`不是本地名称，是吗？

# java - 如何使用通知播放多个警报？

> ID：13680784
> 
> 赞同：4
> 
> 时间：2012-12-03T09:55:22.327
> 
> 标签：java, android, alarm, repeat

我使用通知开发了一个警报项目。我使用通知 ID 作为唯一的，并每分钟设置一次警报，即下午 2:45、下午 2:46、下午 2:47，但警报仅在最后一个触发，即下午 2:47。

为什么？

```
 int dayofweek;
 int notify;
 int notifyid=0;
 Cursor notifyvalue=db.getnotifyid();
 if (notifyvalue.moveToPosition(0))
 notifyid =notifyvalue.getInt(notifyvalue.getColumnIndex("notifyvalue"));

 if(notifyid==0)
 {
  db.InsertNotifyId(2600);
 }

                                Calendar calNow = Calendar.getInstance();
                                Calendar calSet = (Calendar) calNow.clone();

                                calSet.set(Calendar.HOUR_OF_DAY,22);
                                calSet.set(Calendar.MINUTE, 10);
                                calSet.set(Calendar.SECOND, 0);
                                calSet.set(Calendar.MILLISECOND, 0);

                            int notify1 = 0;
                            if(repeateddayname.equalsIgnoreCase("Everyday"))
                            {

                                   Cursor notifyvalue1=db.getnotifyid();
                                   if (notifyvalue1.moveToPosition(0))
                                      notify1=notifyvalue1.getInt(notifyvalue1.getColumnIndex("notifyvalue"));
                                   setAlarm(calSet, true,notify1+1,SplitAlramVoice[1]);
                                   db.InsertNotifyId(notify1+1);
                            }

                            else
                            {
                                String splitrepeateddayname[]=repeateddayname.split(",");

                                for(int i=0; i < splitrepeateddayname.length; i++)
                                {
                                    if(splitrepeateddayname[i].equalsIgnoreCase("Sunday"))
                                    {
                                        dayofweek=1+(7-calSet.DAY_OF_WEEK);
                                        Cursor notifyvalue1=db.getnotifyid();
                                         if (notifyvalue1.moveToPosition(0))
                                        notify1=notifyvalue1.getInt(notifyvalue1.getColumnIndex("notifyvalue"));
                                        setAlarm(calSet, false,notify1+1,SplitAlramVoice[1]);
                                         db.InsertNotifyId(notify1+1);
                                    }
                                    else if(splitrepeateddayname[i].equalsIgnoreCase("Monday"))
                                    {
                                        dayofweek=2+(7-calSet.DAY_OF_WEEK);
                                        Cursor notifyvalue1=db.getnotifyid();
                                        if (notifyvalue1.moveToPosition(0))
                                        notify1=notifyvalue1.getInt(notifyvalue1.getColumnIndex("notifyvalue"));
                                        setAlarm(calSet, false,notify1+1,SplitAlramVoice[1]);
                                         db.InsertNotifyId(notify1+1);
                                    }
                                    else if(splitrepeateddayname[i].equalsIgnoreCase("Tuesday"))
                                    {
                                        dayofweek=3+(7-calSet.DAY_OF_WEEK);
                                        Cursor notifyvalue1=db.getnotifyid();
                                        if (notifyvalue1.moveToPosition(0))
                                        notify1=notifyvalue1.getInt(notifyvalue1.getColumnIndex("notifyvalue"));
                                        setAlarm(calSet, false,notify1+1,SplitAlramVoice[1]);
                                         db.InsertNotifyId(notify1+1);
                                    }
                                    else if(splitrepeateddayname[i].equalsIgnoreCase("Wednesday"))
                                    {
                                        dayofweek=4+(7-calSet.DAY_OF_WEEK);
                                        Cursor notifyvalue1=db.getnotifyid();
                                        if (notifyvalue1.moveToPosition(0))
                                        notify1=notifyvalue1.getInt(notifyvalue1.getColumnIndex("notifyvalue"));
                                        setAlarm(calSet, false,notify1+1,SplitAlramVoice[1]);
                                         db.InsertNotifyId(notify1+1);
                                    }
                                    else if(splitrepeateddayname[i].equalsIgnoreCase("Thursday"))
                                    {
                                        dayofweek=5+(7-calSet.DAY_OF_WEEK);
                                        Cursor notifyvalue1=db.getnotifyid();
                                        if (notifyvalue1.moveToPosition(0))
                                        notify1=notifyvalue1.getInt(notifyvalue1.getColumnIndex("notifyvalue"));
                                        setAlarm(calSet, false,notify1+1,SplitAlramVoice[1]);
                                         db.InsertNotifyId(notify1+1);
                                    }   
                                    else if(splitrepeateddayname[i].equalsIgnoreCase("Friday"))
                                    {
                                        dayofweek=6+(7-calSet.DAY_OF_WEEK);
                                        Cursor notifyvalue1=db.getnotifyid();
                                        if (notifyvalue1.moveToPosition(0))
                                        notify1=notifyvalue1.getInt(notifyvalue1.getColumnIndex("notifyvalue"));
                                        setAlarm(calSet, false,notify1+1,SplitAlramVoice[1]);
                                         db.InsertNotifyId(notify1+1);
                                    }   
                                    else if(splitrepeateddayname[i].equalsIgnoreCase("Saturday"))
                                    {
                                        dayofweek=7+(7-calSet.DAY_OF_WEEK);
                                        Cursor notifyvalue1=db.getnotifyid();
                                        if (notifyvalue1.moveToPosition(0))
                                        notify1=notifyvalue1.getInt(notifyvalue1.getColumnIndex("notifyvalue"));
                                        setAlarm(calSet, false,notify1+1,SplitAlramVoice[1]);
                                         db.InsertNotifyId(notify1+1);
                                    }   
                                }
                            } 
```

设置报警功能：

```
 Intent intent = new Intent(getBaseContext(), AlarmReceiver.class);
            intent.putExtra("NotifID", notifyid);
            intent.putExtra("Audio", AlarmAudio);
            PendingIntent pendingIntent = PendingIntent.getBroadcast(getBaseContext(), RQS_1, intent, PendingIntent.FLAG_CANCEL_CURRENT);
            AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
//          alarmManager.set(AlarmManager.RTC_WAKEUP, targetCal.getTimeInMillis(), pendingIntent);

    if(repeat)
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, targetCal.getTimeInMillis(),AlarmManager.INTERVAL_DAY,pendingIntent);
    else
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,targetCal.getTimeInMillis(),dayofweek*24*60*60*1000,pendingIntent); 
```

警报接收器类：

```
int notifID = intent.getExtras().getInt("NotifID");
     String foraudio= intent.getExtras().getString("Audio");

      NotificationManager nm;
      nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);        
      CharSequence from = "My Dua";
      CharSequence message = "Cheking By Ismail";
      PendingIntent contentIntent = PendingIntent.getActivity(context, 0,new Intent(), 0);
      Notification notif = new Notification(R.drawable.ic_launcher,"Mohamed Ismail", System.currentTimeMillis());
      notif.setLatestEventInfo(context, from, message, contentIntent);

      Uri audio=Uri.parse("mnt/sdcard/sounds/"+foraudio+".mp3");
      notif.sound=audio;
      nm.notify(notifID++, notif); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:13:17.630

为通知创建一个唯一的 id 并传递如下：

```
 Intent intent = new Intent(getBaseContext(), AlarmReceiver.class);
        intent.putExtra("NotifID", notifyid);
        intent.putExtra("Audio", AlarmAudio);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(getBaseContext(), notifyid, intent, PendingIntent.FLAG_one_shot);
        AlarmManager alarmManager = (AlarmManager)getSystemService(Context.ALARM_SERVICE); 
```

# django - IndexMissingException - django haystack 与 elasticsearch

> ID：13680786
> 
> 赞同：7
> 
> 时间：2012-12-03T09:55:32.780
> 
> 标签：django, elasticsearch, django-haystack

我正在尝试使用 elasticsearch 后端设置 haystack 搜索我收到以下错误：

```
./manage.py rebuild_index
 ...
Failed to clear Elasticsearch index: (404, u'IndexMissingException[[haystack] missing]') 
```

但是，以下命令有效：

```
curl -XPUT http://33.33.33.1:9200/haystack
{"ok":true,"acknowledged":true}
curl -XGET http://33.33.33.1:9200/haystack/test/something
{"_index":"haystack","_type":"test","_id":"something","exists":false} 
```

现在，运行后

```
./manage.py rebuild_index
...
Failed to clear Elasticsearch index: (404, u'IndexMissingException[[haystack] missing]') 
```

再次，突然按预期工作的命令现在给出以下错误：

```
curl -XGET http://33.33.33.1:9200/haystack/test/something
{"error":"IndexMissingException[[haystack] missing]","status":404} 
```

正如其他地方所建议的那样，我也尝试过：

```
from django.core import management
from haystack import connections
backend = connections['default'].get_backend()
backend.setup_complete = False
backend.existing_mapping = None
management.call_command('rebuild_index', interactive=False, verbosity=0) 
```

结果相同：

```
{"error":"IndexMissingException[[haystack] missing]","status":404} 
```

我正在运行 Django 1.4.2，来自 github 的 django-haystack HEAD 和来自 github 的 pyelasticsearch HEAD

配置：

```
HAYSTACK_CONNECTIONS = {
  'default': {
    'ENGINE': 'haystack.backends.elasticsearch_backend.ElasticsearchSearchEngine',
    'URL': 'http://33.33.33.1:9200/',
    'INDEX_NAME': 'haystack',
  },  
} 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T12:44:43.170

愚蠢的我。我没有按照 haystack 2 的要求从**index.Indexable**扩展我的 Index 类。因此 haystack 根本没有拾取我的索引并正确完成，无需另行通知。错误消息有些误导。如果您调用rebuild_index，Haystack 似乎总是给出它，无论索引是否已经存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T09:46:06.730

通过 curl 创建索引而不是重建索引使用 ./manage.py update_index 只是为了节省时间。

# php - php 中的可扩展供应协议工具

> ID：13680790
> 
> 赞同：0
> 
> 时间：2012-12-03T09:55:50.720
> 
> 标签：php

我正在寻找用 php 编写的 EPP（可扩展供应协议）工具。

我找到了“https://www.centralnic.com/registry/labs/preppi”，它位于 Linux 和 unix 系统的 perl 中。

我找到了“https://epptool-ctld.verisign-grs.com/epptool/”，但它支持有限的 tld。

我想要这个工具，这样我就不需要编码了。如果我提供输入假设用于域注册。应创建 epp 请求并将其发送到特定的 epp 服务器。

对基于 php 的 EPP 工具的任何建议表示赞赏。或基于 PHP 的 API。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:17:00.930

> 我找到了“https://www.centralnic.com/registry/labs/preppi”，它位于 Linux 和 unix 系统的 perl 中。

这不是真的[CentralNic](https://www.centralnic.com)有[PERL](http://code.google.com/p/perl-net-epp/)和[PHP](https://github.com/centralnic/php-epp)版本，如果你在 windows 或 unix 上都安装了[PEAR](http://pear.php.net/)，它非常容易使用

例子

```
require ('Net/EPP/Client.php');
$client = new Net_EPP_Client();
$host = 'epp.nominet.org.uk';
$port = 700;
$timeout = 10;
$ssl = true;
$greeting = $client->connect($host, $port, $timeout, $ssl);
echo $greeting; 
```

输出

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<epp xmlns="urn:ietf:params:xml:ns:epp-1.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.nominet.org.uk/epp/xml/epp-1.0 epp-1.0.xsd">
  <greeting>
    <svID>Nominet EPP server epp.nominet.org.uk</svID>
    <svDate>2008-08-23T16:24:51Z</svDate>
    <svcMenu>
      <version>1.0</version>
      <lang>en</lang>
      <objURI>http://www.nominet.org.uk/epp/xml/nom-account-1.0</objURI>
      <objURI>http://www.nominet.org.uk/epp/xml/nom-domain-1.0</objURI>
      <objURI>http://www.nominet.org.uk/epp/xml/nom-contact-1.0</objURI>
      <objURI>http://www.nominet.org.uk/epp/xml/nom-ns-1.0</objURI>
    </svcMenu>
    <dcp>
      <access><all/></access>
      <statement>
        <purpose><admin/><prov/></purpose>
        <recipient><ours/></recipient>
        <retention><indefinite/></retention>
      </statement>
    </dcp>
  </greeting>
</epp> 
```

# c# - 如何处理 WCF 服务中的静态方法？

> ID：13680791
> 
> 赞同：0
> 
> 时间：2012-12-03T09:55:50.290
> 
> 标签：c#, wcf, static, singleton

我是 WCF 的初学者。我正在尝试使设备驱动程序网络可访问。我现在的代码，简化：

## A.cs

```
public class A {
    public int source;
} 
```

## 驱动程序.cs

```
public class Driver {
    // some fields here
    A a;

    // singleton class
    private Driver() {
        a = null;
        // some more code
    }

    // static methods
    public static Driver OpenDevice(int n) {
        Driver d = null;
        // some code
        i = GetBoardNumber();
        // some native code to actually open driver ONLY IF it wasn't already opened!
        d = new Driver();
        return d;
    }
    public static int GetDeviceNumber() {
        // some native code get device number
        return someInt;
    }

    // some non static methods which use native code
    // example:
    public int ResetDevice(){
        // some code
        // call native i_ResetDevice() method
        return code;
    }
} 
```

## DLLImport.cs

```
public class DllImport {
    // some code to import method definitions from dll
    // example:
    [DllImport("MyDeviceDriverProvidedForWindows.dll")]
        public static extern int i_ResetDevice();
    // some more code
} 
```

这个驱动程序对我来说很好用。在控制设备的示例中，我只是简单地添加了对这个驱动程序的引用，并使用驱动程序的方法来控制设备。

```
MyService d = Driver.OpenDevice(0);
d.ControlDevice(); 
```

我的工作是让这个驱动程序*可以远程*访问，我选择使用 WCF 来完成。

因为，我已经实现了，所以我提取了一个接口，并通过放置 OperationContracts 和适当的位置将其转换为有效的 WCF 服务合同。这个提取的接口没有 OpenDevice 和 GetDeviceNumber 方法，因为它们是静态的。

* * *

我遇到的问题是：

1) 打开 WSDL 文件告诉我在客户端中使用类似这样的代码：

```
MyServiceClient client = new MyServiceClient();
// access client operations
// close client
client.Close(); 
```

这是什么`MyServiceRefernce.MyServiceClient`（`MyServiceReference`是我添加到客户端的服务引用的名称）？为什么它在服务器上调用 MyService 类的私有构造函数？

2）我怎样才能在客户端做这样的事情？

```
MyServiceReference.Driver d = MyServiceRefernce.Driver.OpenDevice(0); 
```

我已经阅读过`InstanceContextMode`但不确定如何在我的情况下使用它。

我知道很难理解我在问什么，但我也很难解释！我希望我身边有一个非常了解 WCF 的人。

* * *

我使用的实际驱动程序源位于[此文件](http://bit.ly/UaVhF8)的 Assembly 文件夹中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:04:17.770

通常 WCF 没有会话，因此所有调用都是相互独立的。因此，您应该将 Driver 函数封装到可服务的方法中。因此，一种方法将为设备提供一个工作单元，该设备将在每次调用时打开 -> 工作 -> 关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:09:01.677

您不会通过使服务类成为单例来使 WCF 服务使用单个实例。您需要配置 WCF 服务，使其仅使用单个实例。您还可以创建基于会话的 WCF 服务。例如，[请参](http://soumya.wordpress.com/2010/05/26/wcf-simplified-part-8-sessions-instance-management-and-concurrency/)见此。

# ruby-on-rails - 如何在 Rails 中为另一个模型的字段添加值？

> ID：13680792
> 
> 赞同：0
> 
> 时间：2012-12-03T09:55:57.017
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个`user model`，`language model`其中语言模型包含语言列表，用户模型包含用户的信息。在用户模型中有一个`field`调用`language`，用户应该从语言模型中选择一种语言。对于所有这些，我没有表格，我想`id`在创建新用户时传递语言，它应该为用户保存语言。我`curl`用来创建和更新。

所以请告诉我我该怎么做？请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:09:48.280

我认为嵌套属性是您所需要的。您可以在此处了解更多信息： [Active Record 嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

此外，对于使用 curl 模拟嵌套属性调用，您可以查看这篇文章：

[使用 curl 模拟带有嵌套资源数组的表单帖子](https://stackoverflow.com/questions/4996290/simulate-a-form-post-with-nested-resources-arrays-using-curl)

# java - REST 服务：如何使用 XML + XSLT 生成人类可读的输出？

> ID：13680793
> 
> 赞同：2
> 
> 时间：2012-12-03T09:56:01.740
> 
> 标签：java, xml, xslt

我有一个使用 Jersey 在 GlassFish 中实现的 REST 服务。我有使用 JSON 输出的服务，现在我也想提供一些人类可读的输出。JSON 输出中缺少的最重要的事情是我希望将统计信息中的某些字段转换为可点击的链接，这将显示相​​关的统计信息（使用另一个 REST 调用）。

由于我想将格式和内容分开，我不想直接生成 HTML。我虽然使用 xml + xslt 可能是一种明智的方法。我可以使用 org.w3c.dom 生成 XML 文档，但我看不出如何将 xslt 附加到它。

这大概是我现在所做的：

```
@GET
@Path("history_id")
@Produces("application/xml")
public Document history(@QueryParam("id") String idText) throws ParserConfigurationException
{
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = factory.newDocumentBuilder();
        Document doc = docBuilder.newDocument();
        Element root = doc.createElement("root");
        doc.appendChild(root);
        Element el = doc.createElement(name);
        el.setTextContent(value);
        root.appendChild(el);
        return doc; 
```

我希望以下指令出现在生成的 XML 中：

```
<?xml-stylesheet type="text/xsl" href="history.xsl"?"> 
```

如何指定要附加到 XML 的 xslt？还是我的方法可能从根本上是错误的，而这通常以其他方式完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:16:07.467

该“指令”在 XML 世界中称为“处理指令”。您可以使用 DOM API 创建一个：

```
 DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder docBuilder = factory.newDocumentBuilder();
    Document doc = docBuilder.newDocument();
    doc.appendChild(doc.createProcessingInstruction("xml-stylesheet", "type=\"text/xsl\" href=\"history.xsl\"")); 
```

然后，如果您将 XML 文档发送到支持客户端 XSLT 的浏览器/用户代理，它会将样式表应用于 XML。

# objective-c - 在 iOS 5 上播放 MPMoviePlayerController 后 AVAudioRecorder 失败 recordForDuration

> ID：13680794
> 
> 赞同：1
> 
> 时间：2012-12-03T09:56:04.090
> 
> 标签：objective-c, ios5, mpmovieplayercontroller, record, avaudiorecorder

我在 iOS5 上有奇怪的问题，在 iOS6 上它工作得很好:)

我可以使用 AVAudioRecorder 尽可能多地录制，但是如果我使用 MPMoviePlayerController 进行任何播放，录制会失败。准确地说，当我调用recordForDuration（播放后）它返回NO。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:02:07.430

如果有人遇到这样的事情，我找到了解决方案:) 在录制之前，您需要创建 AVAudioSession

```
AVAudioSession *audioSession = [AVAudioSession sharedInstance];
NSError *err;
[audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:&err];
if (err)
{
    NSLog(@"%@ %d %@", [err domain], [err code], [[err userInfo] description]);
}
err = nil;
[audioSession setActive:YES error:&err];
if (err)
{
    NSLog(@"%@ %d %@", [err domain], [err code], [[err userInfo] description]);
} 
```

它应该可以正常工作:)

# objective-c - 静态库私有头文件 - 库内导入

> ID：13680795
> 
> 赞同：1
> 
> 时间：2012-12-03T09:56:06.423
> 
> 标签：objective-c, xcode, static-libraries

我有一个静态库，其中包含公共文件 first.h 和私有文件 second.h。在文件 first.hi 中想 #import "second.h"，但我不能（错误：找不到 first.h 文件）。问题是如何处理这种情况？

我不想公开 second.h，因为我不希望它在框架之外使用，但我想在框架内使用它。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T00:28:12.387

在 first.m 中导入 second.h。您的 first.h/.m 如下所示。

```
//First.h

@interface First : NSObject

@end

//First.m

#import "Second.h"
@implementation 

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T08:57:45.933

不能导入静态库的私有文件。为此，必须在库项目设置中将文件从私有移动到公共，或者使用另一个类来实现目标。

# java - 二进制 pdf byte[] 到 com.lowagie.text.Document

> ID：13680800
> 
> 赞同：0
> 
> 时间：2012-12-03T09:56:22.110
> 
> 标签：java, itext

我有一个二进制pdf（字节[]）。我想将其转换为 com.lowagie.text.Document。无论如何可以在不丢失任何信息的情况下对其进行转换。谢谢

这是我尝试过的，但不确定如何进一步移动。

```
 Document  document  = new Document();
                PdfWriter writer =  PdfWriter.getInstance(document, out);
                document.open();
                PdfReader  reader = new PdfReader(byteBuffer); 
```

# android - Android ArrayAdapter 只工作一次

> ID：13680801
> 
> 赞同：1
> 
> 时间：2012-12-03T09:56:21.847
> 
> 标签：android, android-listview, fragment, android-arrayadapter

我有一个带有自定义 ArrayAdapter 的 Listview，该自定义 ArrayAdapter 设置在片段内。仅设置 ListView 中的第一行。

这可能是在使用带有片段的 ListViews 时的常见问题，因为我一直按照关于自定义 ArrayAdapters 的教程进行操作[（](http://sogacity.com/how-to-make-a-custom-arrayadapter-for-listview/)据我所知）。

**我的片段：**

```
public class MyFragment extends Fragment {

public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View v = inflater.inflate(R.layout.fragment, container, false);

    ListView myListView = (ListView) v.findViewById(R.id.custom_listview);

    ArrayList<CustomRow> customList = new ArrayList<CustomRow>();
    customList.add(new CustomRow("Test A", "A", "AA");
    customList.add(new CustomRow("Test B", "B", "BB");
    customList.add(new CustomRow("Test C", "C", "CC");

    CustomAdapter customAdapter = new CustomAdapter(getActivity(), R.layout.listitem_custom, customList);
    myListView.setAdapter(customAdapter);

    //Inflate the layout for this fragment
    return v;

} 
```

}

因此，即使将三行添加到列表中，也只有第一个 ListItem 显示“Test A”、“A”、“AA”。最后两行只是保持布局中定义的文本（即文本实际上从未设置为任何内容，甚至没有设置为空）

**自定义 ArrayAdapter**

```
public class CustomAdapter extends ArrayAdapter<CustomRowItem> {

Context context;
ArrayList<CustomRowItem> rowList;

public CustomAdapter(Context context, int textViewResourceId, ArrayList<CustomRowItem> rowList) {
    super(context, textViewResourceId, rowList);
    this.context = context;
    this.rowList = rowList;
}

public static class ViewHolder {
    public TextView tvText1;
    public TextView tvText2;
    public TextView tvText3;
}

public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder;

    // called when listview is not instantiated yet (first run)
    if (convertView == null) {

        // assigns the layout custom_row.xml as the listitem (a single row)
        LayoutInflater alarmInflater = (LayoutInflater) context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        convertView = alarmInflater.inflate(R.layout.listitem_custom, null);

        holder = new ViewHolder();
        holder.tvText1 = (TextView) convertView.findViewById(R.id.textview1);
        holder.tvText2 = (TextView) convertView.findViewById(R.id.textview2);
        holder.tvText3 = (TextView) convertView.findViewById(R.id.textview3);

        convertView.setTag(holder);

    // called when list view is already instantiated and we are updating the fields
    } else {

        holder = (ViewHolder) convertView.getTag();

        CustomRowItem newRow = rowList.get(position);

        if (newRow != null) {

            holder.tvText1.setText(newRow.getText1());
            holder.tvText2.setText(newRow.getText2());
            holder.tvText3.setText(newRow.getText3());

        }

    }

    return convertView;
} 
```

}

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:13:24.433

您中的 else 语句`getView()`具有比应有的更多代码。应该是这样的：

```
public View getView(int position, View convertView, ViewGroup parent) {

    ViewHolder holder;

    // called when listview is not instantiated yet (first run)
    if (convertView == null) {

        // assigns the layout custom_row.xml as the listitem (a single row)
        LayoutInflater alarmInflater = (LayoutInflater) context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        convertView = alarmInflater.inflate(R.layout.listitem_custom, null);

        holder = new ViewHolder();
        holder.tvText1 = (TextView) convertView.findViewById(R.id.textview1);
        holder.tvText2 = (TextView) convertView.findViewById(R.id.textview2);
        holder.tvText3 = (TextView) convertView.findViewById(R.id.textview3);

        convertView.setTag(holder);

        // called when list view is already instantiated and we are updating the fields
    } else {
        holder = (ViewHolder) convertView.getTag(); // <-- that's all for here
    }

    CustomRowItem newRow = rowList.get(position);
    if (newRow != null) {
        holder.tvText1.setText(newRow.getText1());
        holder.tvText2.setText(newRow.getText2());
        holder.tvText3.setText(newRow.getText3());
    }

    return convertView;
} 
```

# c# - 使用自定义绑定的 C# 带宽限制？

> ID：13680802
> 
> 赞同：0
> 
> 时间：2012-12-03T09:56:25.380
> 
> 标签：c#, web-services, .net-4.0

我正在使用服务引用在我的客户端 (C#) 和我的服务器之间进行通信。我经常想通过此 Web 服务传输大量数据（> 2 MB），这非常有效，但是对于一些上传量很小的客户来说，这个过程非常缓慢，并且在有限的时间内完成了上传。

我正在寻找一种方法来限制客户端使用的带宽，以确保有一些可供客户本身使用的上传。

我找到了油门流的各种解决方案，但是否可以在 Web 服务调用中使用油门？也许使用自定义绑定？

# eclipse - 我可以用什么在 Eclipse 中创建数据库方案？

> ID：13680806
> 
> 赞同：6
> 
> 时间：2012-12-03T09:56:48.180
> 
> 标签：eclipse

我想在 Eclipse 中创建数据库方案，但不知道我可以使用什么。我尝试 ERMaster [http://ermaster.sourceforge.net/content/manual/en/index.html#3.1](http://ermaster.sourceforge.net/content/manual/en/index.html#3.1)。. 但它看起来很可怕。你能告诉我简单的eclipse插件什么可以导入db并显示它的方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T10:02:39.797

用于 Eclipse[的 ER 图编辑器](http://sourceforge.net/projects/eclipse-erd/)

Eclipse[的 DB-schema-viewer](http://sourceforge.net/projects/dbschemaviewer/)

[这](http://www.myeclipseide.com/module-htmlpages-display-pid-16.html)也不错，但不是 Eclipse 的插件或扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:05:28.720

[Jailer](http://jailer.sourceforge.net/)不是 Eclipse 插件，但它非常适合可视化数据库表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-02T08:51:29.870

我希望以下步骤能解决您的要求。

1.  [从这里](https://sourceforge.net/projects/eclipse-erd/)下载 jar 文件。

2.  将其复制到 Eclipse 插入文件夹（示例路径：C:\eclipse\dropins）。

3.  重启日食。

4.  然后通过***File->New->Other->ERMaster***并创建 ER 文件。

    这是我的参考[链接](http://nverma-tech-blog.blogspot.com/2015/03/ermaster-creating-entity-relationship.html)

# r - 如何在 plot.TukeyHSD 中编辑主标题？

> ID：13680808
> 
> 赞同：1
> 
> 时间：2012-12-03T09:56:50.253
> 
> 标签：r, plot

TukeyHSD 函数打印一个标题“alpha% family-wise confidence level”，它包含在`title`函数中。因此，使用`main = ""`删除标题的方法会给出错误消息：

```
x <- rnorm(20,5,6)
y <- factor(c(rep("d", 5), rep("i",5), rep("t",5), rep("l",5)))

z <- aov(x ~ y)

plot(TukeyHSD(z), main = "")

Error in plot.default(c(xi[, "lwr"], xi[, "upr"]), rep.int(yvals, 2),  : 
  formal argument "main" matched by multiple actual arguments 
```

[Joris Meys 建议将其`main = ""`](https://stat.ethz.ch/pipermail/r-devel/2012-March/063455.html)放入`plot.TukeyHSD` 函数中。但是，如果我尝试手动编辑该函数，我也会收到一条错误消息：

```
tukey.edit <- function (x, ...) 
{
    for (i in seq_along(x)) {
        xi <- x[[i]][, -4, drop = FALSE]
        yvals <- nrow(xi):1
        dev.hold()
        on.exit(dev.flush())
        plot(c(xi[, "lwr"], xi[, "upr"]), rep.int(yvals, 2), 
            type = "n", axes = FALSE, xlab = "", ylab = "", main = "", # changed main = NULL to main = ""
            ...)
        axis(1, ...)
        axis(2, at = nrow(xi):1, labels = dimnames(xi)[[1L]], 
            srt = 0, ...)
        abline(h = yvals, lty = 1, lwd = 0.5, col = "lightgray")
        abline(v = 0, lty = 2, lwd = 0.5, ...)
        segments(xi[, "lwr"], yvals, xi[, "upr"], yvals, ...)
        segments(as.vector(xi), rep.int(yvals - 0.1, 3), as.vector(xi), 
            rep.int(yvals + 0.1, 3), ...)
        title(xlab = paste("Differences in mean levels of", 
            names(x)[i])) # removed main from here
        box()
    }
}

tukey.edit(z)

Error in x[[i]][, -4, drop = FALSE] : incorrect number of dimensions 
```

我做错了什么以及如何删除情节中的标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:03:34.150

嗯，这就有点尴尬了。我没有`TukeyHSD`在绘图功能内部使用。这有效：

```
tukey.edit(TukeyHSD(z)) 
```

# vsto - 部署移动 Powerpoint 插件的最佳方式

> ID：13680810
> 
> 赞同：0
> 
> 时间：2012-12-03T09:56:57.087
> 
> 标签：vsto, powerpoint

你们有谁知道部署移动 Powerpoint 插件的最佳方法是什么？

我开发了一个插件，可以记录教师切换幻灯片的时间，并将所有幻灯片导出为单独的 JPEG 文件。这是必要的，因为我们还将演示文稿录制在视频中，并希望使用第二个屏幕将两者结合起来。这背后的整个后端已经完成并且正在工作（但我们需要手动输入“幻灯片”的位置。所以我们认为我们可以自动化这个）。

加载项需要运行的用户没有任何管理员权限，我们也无权访问管理员帐户（这是在教育环境中）。但是我们确实需要启动一个已经安装了插件的 Powerpoint 应用程序，这样我们就可以录制演示文稿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:49:54.247

您可以在 HKEY_CurrentUser 中向注册表写入一些条目吗？具体来说：

HKEY_CURRENT_USER\Software\Microsoft\Office\14.0\PowerPoint\AddIns\YourAddinName

在此之下，添加一个新的

字符串：路径 = 加载项 PPA/PPAM 文件的完整路径 DWORD：自动加载 = ffff ffff hex

这将导致 PPT 在启动时自动加载您的加载项。

# ember.js - 如何循环遍历 Handlerbars.js 中的索引数组？

> ID：13680813
> 
> 赞同：0
> 
> 时间：2012-12-03T09:57:25.150
> 
> 标签：ember.js, handlebars.js

我有一个索引数组。如何使用 Handlebars 循环遍历它？我正在使用 #each /each for 循环，但哪个变量是块内分配的值。

我的数据循环是这样的。

```
{
            id: "12424",
            title: "Chit Chat with Kimberly Bauer",
            description: "Discuss about what's going to happen to Jack Bauer in Season 9 of 24",
            from: "12/16/2012 9:00am EST",
            to: "12/16/2012 10:00am EST",
            duration: "1:00 hr",
            invitees: [
                "kim@24.com",
                "jack@24.com",
                "nina@24.com",
                "tony@24.com",
                "all@no.one"
            ]
        } 
```

我想显示所有受邀者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:01:01.937

我找到了答案。它被分配给 。（点）

它可以用作`{{.}}`

# jquery - 使用 javascript datepicker 时未触发 .change 函数

> ID：13680815
> 
> 赞同：0
> 
> 时间：2012-12-03T09:57:47.043
> 
> 标签：jquery, ajax

我有`.change`jQuery 函数。除了一个文本字段外，所有内容都在工作。该文本字段将从包含日历的小弹出窗口接收输入。它实际上是一个日期选择器。但是，当我单击任何特定日历时，该功能似乎没有检测到更改。但是，如果我手动输入日期，它就可以工作。我尝试阅读 jQuery 文档，但找不到答案。是因为`.change`仅在我们仅使用键盘输入时才触发该功能吗？

提前谢谢各位。

我的jQuery代码

```
$(document).ready(function(){

    $(".edit_tr").click(function(){

        var ID=$(this).attr('id');

        $("#first_"+ID).hide();
        $("#first_input_"+ID).show();
        var first=$("#first_input_"+ID).val();
        alert('content: '+first);

    }).change(function(){
        alert('change');
        });
  }); 
```

我的html代码：

```
<tr id = "<?php echo $id; ?>_6" bgcolor='#f2f2f2' class='edit_tr'>
    <td><span class="pro_text-form"><font color="red">*</font> Date of Birth </span></td>
    <td class="edit_td">
    <span id="first_<?php echo $id; ?>_6" class="text"><?php echo $dob; ?></span>
    <input type="hidden" value="<?php echo $dob; ?>" class="editbox" id="hidden_first_input_<?php echo $id; ?>_6" />
    <input type="text" class="editbox" name="open_date" id="first_input_<?php echo $id; ?>_6" value="<?=$dob?>" size="10" />
    <a href="javascript:NewCal('first_input_<?php echo $id; ?>_6','ddmmyyyy')"><img src="images/cal.gif" width="16" height="16" border="0" alt="Pick a date"></a>
   </td>
</tr> 
```

各位，我的问题解决了！我决定更改为 jquery 日历，它真的很好用。正是我正在寻找的。但请记住，确保 jquery.js 没有冲突。我遇到了这个问题，我的日历没有显示。干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:59:33.257

是的，当值更改时，模糊会触发更改。jQuery 的 datepicker 有一个类似的 change 事件可以绑定。

[http://api.jqueryui.com/datepicker/#option-onSelect](http://api.jqueryui.com/datepicker/#option-onSelect)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:02:25.023

尝试`onSelect`在 JqueryUI 中使用 datepicker 触发的事件。

```
$("#myPicker").datepicker({
  onSelect: function(dateText) {
    alert(dateText);
  }
}); 
```

[http://api.jqueryui.com/datepicker/#option-onSelect](http://api.jqueryui.com/datepicker/#option-onSelect)

# c# - 在 ASP.NET 页面中传递值

> ID：13680817
> 
> 赞同：-2
> 
> 时间：2012-12-03T09:57:56.700
> 
> 标签：c#, asp.net, .net, parameter-passing

我正在使用 asp.net 和 C# 开发一个 Web 应用程序。我有个问题

有没有什么方法可以在不使用`QueryString`或`Session`值或`Cookies`或上一页的情况下在 asp 页面中传递值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:59:47.850

您可能会看到：[ASP.NET 状态管理概述](http://msdn.microsoft.com/en-us/library/75x4ha6s%28v=vs.100%29.aspx)

**配置文件属性**

> 您可以使用： ASP.NET 提供了一种称为配置文件属性的功能，它允许您存储用户特定的数据。此功能类似于会话状态，不同之处在于用户会话到期时配置文件数据不会丢失。配置文件属性功能使用 ASP.NET 配置文件，该配置文件以持久格式存储并与单个用户相关联。ASP.NET 配置文件允许您轻松管理用户信息，而无需您创建和维护自己的数据库。此外，配置文件使用强类型 API 使用户信息可用，您可以从应用程序的任何位置访问该 API。您可以在配置文件中存储任何类型的对象。ASP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:00:02.997

您可以使用[**asp.net 缓存**](http://msdn.microsoft.com/en-us/library/ff919782%28v=vs.100%29.aspx)或将数据从一个页面保存到某个页面，`persistent medium`从该介质读取的其他页面可能是`database or xm`l 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:05:22.433

除了您的要求（不使用`QueryString`或`Session`值或`Cookies`）是的，您可以使用`public`类似的属性

```
public String YourProperty
{
    get
    {
        return "Return What you want to pass";
    }
} 
```

查看此[MSDN](http://msdn.microsoft.com/en-us/library/6c3yckfw%28v=vs.100%29.aspx)文章以获取完整代码

# jquery - 自动完成文本框：如何减少文本大小？

> ID：13680823
> 
> 赞同：0
> 
> 时间：2012-12-03T09:58:30.723
> 
> 标签：jquery, jquery-ui

我在页面中放置了一个自动完成框，代码如下：

```
 $(function() {
    var availableTags = ["Recharge",

        "Tea",
        "Coffee"

    ];
    $( ".extra" ).autocomplete({
        source: availableTags
    }); 
```

当我在文本框中输入 T 或 C 时，它会提供非常大的文本大小的自动完成选项。如何更改自动完成中的字体大小？如何为其添加悬停颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:31:43.650

找到这是 jQuery UI CSS（~第 156-157 行）：

```
.ui-menu .ui-menu-item a { 
```

将您喜欢的字体大小添加到那里。

对于 Hover，只需将此行添加到 CSS 中：

```
.ui-menu .ui-menu-item a:hover { color: red !important; } 
```

但我个人更喜欢 jQuery UI [Themeroller](http://jqueryui.com/themeroller/)从他们的 UI 下载和编辑

Ps：Chrome 的“检查元素”或 firefox 的（也在 chrome 上）[萤火虫](http://getfirebug.com/)是你的朋友 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:32:47.857

jQuery UI 只使用类创建一个`ul`列表`ui-autocomplete`。所以你只需要通过 CSS 调整字体。

# javascript - 谷歌地球截图并另存为图片

> ID：13680824
> 
> 赞同：-1
> 
> 时间：2012-12-03T09:58:37.397
> 
> 标签：javascript

如何使用 JavaScript/PHP 将 Google 地球当前视图的屏幕截图作为图像。或者，如果有可用于屏幕截图的 API，我可以在其中提供纬度和经度，它应该是图像。我尝试了 html 的 GEWebBrowser 和 canvas 元素来保存已加载到 div 或 img 元素中的 Google 地球视图（两者都尝试过），但没有获得任何成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:08:45.240

此链接显示如何根据纬度/经度值生成 Google 地图图像：

[https://developers.google.com/maps/documentation/imageapis/](https://developers.google.com/maps/documentation/imageapis/)

```
<img src="https://maps.googleapis.com/maps/api/staticmap?center=-15.800513,-47.91378&zoom=11&size=200x200&sensor=false"> 
```

![](../Images/afd120cbbcce7195f19758a6ababb697.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:09:48.923

你可以看看[PhantomJS](http://phantomjs.org/)。您可以在此页面上有一个示例代码：[https](https://github.com/ariya/phantomjs/wiki/Screen-Capture) ://github.com/ariya/phantomjs/wiki/Screen-Capture 。

# android - 在android中导出图表时出现空指针

> ID：13680826
> 
> 赞同：0
> 
> 时间：2012-12-03T09:58:41.380
> 
> 标签：android

电子邮件适用于小图表，但大图表无法导出并给出空指针异常。
案例邮箱：

```
try {

  new LoadAllData().execute();
  pDialog.setMessage("Please wait..");

             doExport();

            } catch (IOException e) {
                e.printStackTrace();

                dialog = new Dialog(testActivity.this);
                dialog.setContentView(R.layout.description);
                dialog.show();
                dialog.setTitle("Access Denied!");
                description = (TextView) dialog.findViewById(R.id.descriptionText);
                description.setText("Cannot export Chart: " +    e.getMessage());
                description.setTextColor(0xFFFFFFFF);
                okButton = (Button) dialog.findViewById(R.id.okButton);
                okButton.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {
                        dialog.cancel();
                    }
                });
            } 
```

出口代码

```
 private void doExport() throws IOException {
    final Intent sendIntent = new Intent(Intent.ACTION_SEND);
    final Image image = chart.getExport().getImage()
            .image(chart.getWidth(), chart.getHeight());

    File file;
    final FileOutputStream stream;

    file = new File("/sdcard/test.png");
    stream = new FileOutputStream(file);

    image.save(stream);
    stream.flush();
    stream.close();

    sendIntent.setType("image/png");
    sendIntent.putExtra(Intent.EXTRA_STREAM,Uri.parse("file:///sdcard/test.png"));

    startActivity(Intent.createChooser(sendIntent, "Export"));
} 
```

这是日志猫

```
 12-03 13:59:32.174: E/AndroidRuntime(11871): java.lang.NullPointerException
  12-03 13:59:32.174: E/AndroidRuntime(11871): at    com.sympo.test.android.testActivity.doExport(testActivity.java:8261)
 12-03 13:59:32.174: E/AndroidRuntime(11871):   at com.sympo.test.android.testActivity.MenuItemSelectedEvent(testActivity.java:8215)
 12-03 13:59:32.174: E/AndroidRuntime(11871):   at com.sympo.test.android.CustomMenuListener$1.onClick(CustomMenuListener.java:166)
 12-03 13:59:32.174: E/AndroidRuntime(11871):   at android.view.View.performClick(View.java:4101)
 12-03 13:59:32.174: E/AndroidRuntime(11871):   at android.view.View$PerformClick.run(View.java:17078)
 12-03 13:59:32.174: E/AndroidRuntime(11871):   at android.os.Handler.handleCallback(Handler.java:615)
 12-03 13:59:32.174: E/AndroidRuntime(11871):   at android.os.Handler.dispatchMessage(Handler.java:92)
 12-03 13:59:32.174: E/AndroidRuntime(11871):   at android.os.Looper.loop(Looper.java:155)
 12-03 13:59:32.174: E/AndroidRuntime(11871):   at android.app.ActivityThread.main(ActivityThread.java:5485)
 12-03 13:59:32.174: E/AndroidRuntime(11871):   at java.lang.reflect.Method.invokeNative(Native Method)
 12-03 13:59:32.174: E/AndroidRuntime(11871):   at java.lang.reflect.Method.invoke(Method.java:511)
 12-03 13:59:32.174: E/AndroidRuntime(11871):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1028) 
```

我在 doExport() 方法上遇到空指针异常。我怀疑可能是图表太大了，因为代码可以完美地与其他小图表一起使用，任何人都知道如何去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:27:51.027

我通过导出包含我想通过电子邮件发送的内容的整个布局来解决它。请注意，您可以通过电子邮件发送您希望的任何布局...享受！！！！

```
 private void doExport() throws IOException {

RelativeLayout rl =(RelativeLayout)findViewById(R.id.testlayout);
    Bitmap b = Bitmap.createBitmap(rl.getWidth(), rl.getHeight(),Bitmap.Config.ARGB_8888);

    int weight,height;

    weight =  rl.getWidth();

    height =  rl.getHeight();

    Bitmap cs = Bitmap.createBitmap(weight, height, Bitmap.Config.ARGB_8888);

    Canvas c = new Canvas(cs);

 c.drawBitmap(b,0,0,null);

  rl.draw(c); 

  File file1 = new File("/sdcard/test.png");
   FileOutputStream fos = new FileOutputStream(file1);

  if (fos != null) {

         cs.compress(Bitmap.CompressFormat.PNG, 90, fos);

       fos.close();
   }
 Intent picMessageIntent = new Intent(android.content.Intent.ACTION_SEND);
 picMessageIntent.setType("message/rfc822");

 picMessageIntent.putExtra(Intent.EXTRA_STREAM,Uri.parse("file:///sdcard/test.png"));

        startActivity(Intent.createChooser(picMessageIntent, "Export"));
   } 
```

# drupal - 如何显示父类下的所有内容？

> ID：13680828
> 
> 赞同：0
> 
> 时间：2012-12-03T09:58:44.450
> 
> 标签：drupal

```
category 1
       subcategory 1
       subcategory 2 
```

现在，当我单击 `category 1`它时，它会显示子类别 1 和子类别 2 下的所有内容。谢谢。

但在默认的drupal中。尽管当我单击**类别 1时****，子类别 1 和子类别 2**下有一些内容 。它显示没有内容....

 **如何调用所有子类别下的所有内容。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T01:39:14.663

如果您使用的是 Drupal 6，有一种相当简单的方法可以完成您想要的：

> 如果您使用分层分类法，并且希望所有标记有子术语的节点也显示出来，您可以创建一个 URL 链接，如 taxonomy/term/2/2 其中第二个参数是树将递归到的深度，或 taxonomy/term/2/all 用于所有子术语。

（来自[关于分类](http://drupal.org/node/774892)页面）

但它在 Drupal 7 中不起作用：

> 在 D7 中，您不能再指定诸如“taxonomy/term/1,2”、“taxonomy/term/1+2”、“taxonomy/term/2/2”或“taxonomy/term/2/all”之类的路径. 函数 taxonomy_term_page (D7) 不会像在 D6 中那样解析字符串。

因此，使用 Drupal 7，您应该使用[Views](http://drupal.org/project/views)模块 - 您可以启用和自定义预先创建的“分类术语”视图（在启用 Views 模块后立即在页面上可用`admin/structure/views`），或者从头开始创建自己的视图。

此外，还有一种我以前使用过的技巧，但只有在您管理一个相当小的网站并且您只是可以添加内容的人时才应该使用它 - 只允许从您的词汇表中选择两个项目，并且在创建节点时，不仅要选择子术语，还要选择父术语。**

# php - 使用 .NET 在 SugarCRM 中实现 oauth

> ID：13680830
> 
> 赞同：7
> 
> 时间：2012-12-03T09:58:50.770
> 
> 标签：php, asp.net, oauth, sugarcrm

我有一个在 .net 框架中开发的 Web 应用程序。我正在尝试在 SugarCRM 中实现 Oauth，以便将其与我的应用程序集成。

SugarCRM 提供的 Oauth 机制是使用 PHP [Click Here](http://support.sugarcrm.com/02_Documentation/04_Sugar_Developer/Sugar_Developer_Guide_6.5/06_Oauth) ... 其中，我的应用程序是用 ASP 设计的。

我正在尝试找出解决方案（例如将 php 代码转换为 asp 或在我的应用程序中实现相同的机制）但没有得到解决方案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T16:06:15.307

在经历了很多痛苦之后，我的 .Net 代码在 SugarCRM 上工作......

这就是我所做的......一切都在我的控制台应用程序中。这是一个概念证明，所以现在一切都是硬编码的！

Daniel Crenna 使用 Nuget 安装 OAuth

## 第 1 步：建立消费者密钥

进入 SugarCRM 上的 Admin -> OAuth Keys 部分并创建一个新记录，我使用了 Key & Secret。

## 第 2 步：创建请求令牌

```
private static void CreateRequestToken()
{
    // Creating a new instance directly
    OAuthRequest client = new OAuthRequest
    {
        Method = "GET",
        Type = OAuthRequestType.RequestToken,
        SignatureMethod = OAuthSignatureMethod.HmacSha1,
        ConsumerKey = "Key",
        ConsumerSecret = "Secret",
        RequestUrl = "http://localhost/service/v4/rest.php",
        Version = "1.0",
        SignatureTreatment = OAuthSignatureTreatment.Escaped
    };

    // Using URL query authorization
    string auth = client.GetAuthorizationQuery(new Dictionary<string, string>() { { "method", "oauth_request_token" } });

    var request = (HttpWebRequest)WebRequest.Create("http://localhost/service/v4/rest.php?method=oauth_request_token&" + auth);
    var response = (HttpWebResponse)request.GetResponse();

    NameValueCollection query;
    using (StreamReader sr = new StreamReader(response.GetResponseStream()))
    {
        string result = sr.ReadToEnd();

        query = HttpUtility.ParseQueryString(result);
    }

    Console.WriteLine(query["authorize_url"]);
    Console.WriteLine(query["oauth_token"]);
    Console.WriteLine(query["oauth_token_secret"]);
} 
```

这是我花了很长时间才弄清楚的棘手部分，请注意 requesturl 在客户端中没有查询部分，并且您已将其添加到 GetAuthorizationQuery 调用和实际的 WebRequest url。

记下为第 4 步准备的 3 个项目。

## 步骤 3 批准请求令牌

访问上面的 url "authorize_url" 并添加 &token="oauth_token"。为此：

```
http://localhost/index.php?module=OAuthTokens&action=authorize&token=adae15a306b5 
```

授权令牌并记录令牌授权码。

## 步骤 4 请求访问令牌

```
private static void RequestAccessToken()
{
    OAuthRequest client = new OAuthRequest
    {
        Method = "GET",
        Type = OAuthRequestType.AccessToken,
        SignatureMethod = OAuthSignatureMethod.HmacSha1,
        ConsumerKey = "Key",
        ConsumerSecret = "Secret",
        RequestUrl = "http://localhost/service/v4/rest.php",
        Version = "1.0",
        SignatureTreatment = OAuthSignatureTreatment.Escaped,
        Token = "adae15a306b5",
        TokenSecret = "e1f47d2a9e72",
        Verifier = "33e2e437b2b3"
    };

    // Using URL query authorization
   string auth = client.GetAuthorizationQuery(new Dictionary<string, string>() { { "method", "oauth_access_token" } });

   var request = (HttpWebRequest)WebRequest.Create("http://localhost/service/v4/rest.php?method=oauth_access_token&" + auth);
   var response = (HttpWebResponse)request.GetResponse();

   NameValueCollection query;
   using (StreamReader sr = new StreamReader(response.GetResponseStream()))
   {
       string result = sr.ReadToEnd();
       query = HttpUtility.ParseQueryString(result);
   }

   Console.WriteLine(query["oauth_token"]);
   Console.WriteLine(query["oauth_token_secret"]);
} 
```

Token 和 TokenSecret 来自第 2 步，Verifier 是第 3 步中的 Auth Code。

## 步骤 5 使用访问令牌

我只是使用文档推荐的会话 ID，因此要获取 sessionId

```
private static void GetSessionId()
{
    OAuthRequest client = new OAuthRequest
    {
        Method = "GET",
        Type = OAuthRequestType.ProtectedResource,
        SignatureMethod = OAuthSignatureMethod.HmacSha1,
        ConsumerKey = "Key",
        ConsumerSecret = "Secret",
        RequestUrl = "http://localhost/service/v4/rest.php",
        Version = "1.0",
        SignatureTreatment = OAuthSignatureTreatment.Escaped,
        Token = "adae15a306b5",
        TokenSecret = "2d68ecf5152f"
     };

     string auth = client.GetAuthorizationQuery(new Dictionary<string, string>() 
     { 
        { "method", "oauth_access" }, 
        { "input_type", "JSON" },
        { "request_type", "JSON" },
        { "response_type", "JSON" } 
     });

     var request = (HttpWebRequest)WebRequest.Create("http://localhost/service/v4/rest.php?method=oauth_access&input_type=JSON&request_type=JSON&response_type=JSON&" + auth);
     var response = (HttpWebResponse)request.GetResponse();

     dynamic o;
     using (StreamReader sr = new StreamReader(response.GetResponseStream()))
     {
         string result = sr.ReadToEnd();
         o = Newtonsoft.Json.JsonConvert.DeserializeObject(result);
     }

     Console.WriteLine("SessionId: {0}", o.id);
} 
```

这里我使用 JSON.Net 将 Json 解析为动态对象，以便于访问 id。

## 第 6 步让它做一些事情....

交给你了！

相当痛苦的经历，但至少它对我有用......

蒂姆

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T11:36:01.797

我不明白您以 SugarCRM 方式实施的意思。但是如果你不能使用**dotnetopenauth ，你可以使用**[RestSharp](http://restsharp.org)或[Hammock](https://github.com/danielcrenna/vault/tree/master/hammock/src)旋转你自己的 OAuth

# jsf-2 - JSF / Primefaces 3.4.1 / SelectOneMenu / Pojo / Pre select pojo 值不起作用

> ID：13680833
> 
> 赞同：1
> 
> 时间：2012-12-03T09:58:55.660
> 
> 标签：jsf-2, primefaces

这个预选的 autoCompleteBean.selectedPlayer1 不起作用！！

这是从 primefaces 网站展示中提取的示例：[https ://www.primefaces.org/showcase/ui/input/oneMenu.xhtml](https://www.primefaces.org/showcase/ui/input/oneMenu.xhtml)

```
<p:selectOneMenu value="#{autoCompleteBean.selectedPlayer1}" converter="player"> 
    <f:selectItems value="#{autoCompleteBean.players}" var="player" 
                   itemLabel="#{player.name}" itemValue="#{player}"/>
</p:selectOneMenu> 
```

在 bean 中，我放了以下几行：

```
private Player selectedPlayer1;
private List players;

/* AutoCompleteBean - constructor */ 

public AutoCompleteBean() {

players = new ArrayList<Player>();

players.add(new Player("Messi", 10, "messi.jpg", "CF"));
players.add(new Player("Bojan", 9, "bojan.jpg", "CF"));

selectedPlayer1 = players.get(1);
} 
```

变量 autoCompleteBean.selectedPlayer1，包含您在打开 jsp 之前指定的值。但是，这不是预先选择的。只出现总是选中arraylist的第一个元素。为什么 ？？

只有我需要 p:selectOneMenu，在列表中预选 de 值。

提前致谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T16:15:33.983

好吧，实际上您可以预先选择一个值，或者换句话说，通过执行以下操作默认选择一个值：

```
<p:selectOneMenu value="#{autoCompleteBean.selectedPlayer1}" effect="fade" converter="player">  
    <f:selectItem itemLabel="autoCompleteBean.selectedPlayer1.name" itemValue="autoCompleteBean.selectedPlayer1" />  
    <f:selectItems value="#{autoCompleteBean.players}" var="player" itemLabel="#{player.name}" itemValue="#{player}"/>  
</p:selectOneMenu> 
```

唯一的问题是它会重复默认选择的值，如下所示：

![在此处输入图像描述](../Images/173746d65ccdf52e3a8e661bec31592f.png)

而你，我猜你想要这样的东西：

![在此处输入图像描述](../Images/dca66ad6b591648bff3dbd0b9bf16e9d.png)

所以对于这个问题，我会推荐你​​使用数组播放器：

```
itemValue="#{player}" 
```

但是从这个数组中删除预选的选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:40:26.497

你的播放器类有 hashCode() 和 equals() 函数吗？

如果它们丢失，primefaces 无法在它们之间产生差异。

类似的问题： [primefaces selectOneMenu 在应该的时候不起作用](https://stackoverflow.com/questions/10726716/primefaces-selectonemenu-doesnt-working-when-it-should)

# php - 在 php 和 mysql 中使用 highcharts

> ID：13680836
> 
> 赞同：0
> 
> 时间：2012-12-03T09:59:26.917
> 
> 标签：php, mysql, highcharts

有人用过 hightchart 吗？我想用 hightchart 来表示从 mysql 数据库中检索的数据。我试着看看这个例子，这是完整的例子：

```
 <script type="text/javascript">
     $(function() {
var seriesOptions = [],
    yAxisOptions = [],
    seriesCounter = 0,
    names = ['MSFT', 'AAPL', 'GOOG'],
    colors = Highcharts.getOptions().colors;

$.each(names, function(i, name) {

$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename='+ name.toLowerCase() +'-c.json&callback=?',   function(data) {

        seriesOptions[i] = {
            name: name,
            data: data
        };

        // As we're loading the data asynchronously, we don't know what order it will arrive. So
        // we keep a counter and create the chart when all the data is loaded.
        seriesCounter++;

        if (seriesCounter == names.length) {
            createChart();
        }
    });
});

// create the chart when all data is loaded
function createChart() {

    chart = new Highcharts.StockChart({
        chart: {
            renderTo: 'container'
        },

        rangeSelector: {
            selected: 4
        },

        yAxis: {
            labels: {
                formatter: function() {
                    return (this.value > 0 ? '+' : '') + this.value + '%';
                }
            },
            plotLines: [{
                value: 0,
                width: 2,
                color: 'silver'
            }]
        },

        plotOptions: {
            series: {
                compare: 'percent'
            }
        },

        tooltip: {
            pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',
            valueDecimals: 2
        },

        series: seriesOptions
    });
}

    });
    </script> 
```

问题是他们使用此链接（“http://www.highcharts.com/samples/data/jsonp.php?filename='+ name.toLowerCase() +'-c.json&callback=?”）来获取数据以及我无法查看它们如何显示数据的示例.. 我不知道链接“http://www.highcharts.com/samples/data/jsonp.php”的样子，以及它们如何代表数据..我想制作我自己的页面，从数据库中检索数据并用我自己的 php 页面替换上面的链接..这是工作示例...http://www.highcharts.com/stock/demo/compare

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-06T17:05:55.323

# 解决了------------下面的索引文件

```
 <!DOCTYPE HTML>
        <html>
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
                <title>Highcharts Example</title>

                <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
                <script type="text/javascript">
        $(function () {
            var chart;
            $(document).ready(function() {
                $.getJSON("map2.php", function(json) {
                chart = new Highcharts.Chart({
                        chart: {
                            renderTo: 'container',
                            type: 'line',
                            marginRight: 130,
                            marginBottom: 25
                        },
                        title: {
                            text: 'Revenue vs. Overhead',
                            x: -20 //center
                        },
                        subtitle: {
                            text: '',
                            x: -20
                        },

                        yAxis: {
                            title: {
                                text: 'Amount'
                            },
                            plotLines: [{
                                value: 0,
                                width: 1,
                                color: '#808080'
                            }]
                        },

                        tooltip: {
                            formatter: function() {
                                    return '<b>'+ this.series.name +'</b><br/>'+
                                    this.x +': '+ this.y;
                            }
                        },
                        legend: {
                            layout: 'vertical',
                            align: 'right',
                            verticalAlign: 'top',
                            x: -10,
                            y: 100,
                            borderWidth: 0
                        },
                        series: json
                    });

                });

            });

        });
                </script>
            </head>
            <body>
          <script src="http://code.highcharts.com/highcharts.js"></script>
          <script src="http://code.highcharts.com/modules/exporting.js"></script>

        <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

            </body>
        </html> 
```

# 下面的ajax文件

```
 <?php
    $con = mysql_connect("localhost","username","password");
    if (!$con) {
    die('Could not connect: ' . mysql_error());
    }mysql_select_db("cakephp", $con);
    $sth = mysql_query("SELECT revenue FROM highcharts2");
    $rows = array();
    $rows['name'] = 'revenue';
    while($r = mysql_fetch_array($sth)) {
     $rows['data'][] = $r['revenue'];
    }
    $sth = mysql_query("SELECT overhead FROM highcharts2");
    $rows1 = array();
    $rows1['name'] = 'overhead';
    while($rr = mysql_fetch_assoc($sth)) {
    $rows1['data'][] = $rr['overhead'];
    }$result = array();
    array_push($result,$rows);
    array_push($result,$rows1);
    print json_encode($result, JSON_NUMERIC_CHECK);
    mysql_close($con);
    ?> 
```

# 创建数据库如下

```
CREATE TABLE IF NOT EXISTS `highcharts2` (
  `id` int(10) NOT NULL auto_increment,
  `month` varchar(225) NOT NULL,
  `revenue` varchar(225) NOT NULL,
  `overhead` varchar(255) NOT NULL,
  PRIMARY KEY  (`id`)
)
INSERT INTO `highcharts2` (`id`, `month`, `revenue`, `overhead`) VALUES
(1, 'jan', '23987', '21990'),
(2, 'Feb', '24784', '22363'),
(3, 'Mar', '25899', '21987'),
(4, 'Apr', '25569', '22369'),
(5, 'May', '25599', '22698'),
(6, 'jun', '25577', '21999'),
(7, 'Jul', '24111', '2599'),
(8, 'Aug', '25555', '21988'),
(9, 'sep', '25444', '21981'),
(10, 'oct', '25599', '21988'),
(11, 'nov', '24559', '20142'),
(12, 'dec', '25111', '22222'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:34:18.793

您必须创建要填充的数据数组。[然后使用json_encode](http://php.net/manual/en/function.json-encode.php)将 php 数组编码为 json 格式。回显该 json 字符串。
这是一个示例代码

```
$a[] = 1133740800000;
$a[] = 1133740800000;
$a[] = 1133740800000;
$a[] = 1133740800000;
$a[] = 1133740800000;
$b[] = 405.85;
$b[] = 405.85;
$b[] = 405.85;
$b[] = 405.85;
$b[] = 405.85;

foreach($a as $i => $v)
{
    $cordinates[]= array($v,$b[$i]); 
}

echo (json_encode($cordinates)); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:07:25.047

使用firebug，可以查看ajax的响应，应该是json对象

# iphone - 使 iOS 应用程序具有启用和禁用声音的选项

> ID：13680844
> 
> 赞同：4
> 
> 时间：2012-12-03T09:59:50.370
> 
> 标签：iphone, ios

我想让 iOS 应用程序在每个按钮点击时播放声音，我可以从设置屏幕禁用/启用声音。谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:15:50.133

好的，试试这段代码

在您的设置屏幕 .h 文件中

```
@interface SettingScreen : UIViewController<AVAudioPlayerDelegate,AVAudioSessionDelegate>
{
    AVAudioPlayer *audioplayer;
} 
```

在 .m 文件中

```
-(void)viewDidLoad
{
    NSString* BS_path_blue=[[NSBundle mainBundle]pathForResource:@"Click" ofType:@"mp3"];
    audioplayer =[[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:BS_path_blue]  error:NULL];
    audioplayer.delegate=self;
    [audioplayer prepareToPlay];

    UISwitch *soundsOnOffButton = [[UISwitch alloc]initWithFrame:CGRectMake(180, 8, 130, 27)];
    [self.view addSubview:soundsOnOffButton];
    [soundsOnOffButton addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchUpInside];

     soundsOnOffButton.on = [[NSUserDefaults standardUserDefaults] boolForKey:@"sound"];
}

-(void)buttonAction:(UIButton *)sender
{
    if (soundsOnOffButton.on)
    {

        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"sound"];
        [[NSUserDefaults standardUserDefaults] synchronize];
        if ([[NSUserDefaults standardUserDefaults] boolForKey:@"sound"]==YES)
        {
            [audioplayer play];
        }
    }
    else
    {
        [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"sound"];
        [[NSUserDefaults standardUserDefaults] synchronize];
    }
} 
```

这是设置屏幕。现在，如果您想为另一个屏幕中的任何按钮播放声音，请将代理和前四行添加到您的该文件中，然后将此行添加到他们的操作中。

```
-(void)buttonAction:(UIButton *)sender
{
    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"sound"]==YES)
    {
         [audioplayer play];
     }

    // other code
} 
```

有问题就回复我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:12:08.460

在播放任何声音之前检查设置..？

```
// pseudo code
- (void)playSound:(NSInteger)soundID;
{
  if(settings.soundEnabled) {
    [SoundPlayer playSoundWithID:soundID];
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:07:15.567

您无法更改设备声音（应用程序将被拒绝）如何设置音量通过分配 0 到 1 之间的一些值。如果用户选择禁用，则在设置选项中将其设置为 0。在此处查看 sam 的答案：[如何禁用 iOS系统声音](https://stackoverflow.com/questions/6284402/how-to-disable-ios-system-sounds/)

# objective-c - AFNetworking 后台任务

> ID：13680848
> 
> 赞同：1
> 
> 时间：2012-12-03T10:00:11.867
> 
> 标签：objective-c, ios, afnetworking

我目前正在用[AFNetworking替换](http://afnetworking.com/)[ASIHTTP](http://allseeing-i.com/ASIHTTPRequest/)代码。我有一个场景，我有多个文件要与服务器同步。我希望此任务在后台继续进行，并且我注意到当我在后台时下载正在进行中。如果我需要做任何额外的电话来支持后台下载，我只是好奇和困惑。

我在一个线程上找到了以下内容。

```
__block UIBackgroundTaskIdentifier backgroundTaskIdentifier = [application   beginBackgroundTaskWithExpirationHandler:^(void) {
    [application endBackgroundTask:backgroundTaskIdentifier];
    [[NordecaAFAPIClient sharedClientWithBaseURL:[ECUserDefaults getNordecaApiURL]].operationQueue cancelAllOperations] ;
}]; 
```

为了支持后台下载，我真正需要写什么？

我的另一个问题是，在 ? 中找到的 shouldResume 标志是什么意思`AFDownloadRequestOperation`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T06:32:04.437

如[AFNetworking 有后台支持吗？](https://stackoverflow.com/questions/7800614/does-afnetworking-have-backgrounding-support), AFURLConnectionOperation 现在已经支持`setShouldExecuteAsBackgroundTaskWithExpirationHandler:`，它基本上为你做后台下载管理，因为它的性能和正常的 UIBackgroundTaskIdentifier 代码`applicationDidEnterBackground`一样，就像你在问题中写的一样。

而关于`shouldResume`in `AFDownloadRequestOperation`，它是一个符号，表示当文件临时下载到“不完整”文件夹中时，这是一个临时路径，所以在计算已经下载的数据大小以便知道从哪里恢复下载时，它将返回正确的范围。

# jquery - 按 jquery 键值对 json 进行排序

> ID：13680860
> 
> 赞同：1
> 
> 时间：2012-12-03T10:00:43.480
> 
> 标签：jquery, json, sorting, key

> **可能重复：**
> [对 JavaScript 对象进行排序](https://stackoverflow.com/questions/1359761/sorting-a-javascript-object)

我有这样的json数据

```
[
  {
    "name":"anand",
    "type":"0"
  },
  {
    "name":"bajaj",
    "type":"0"
  },
  {
    "name":"cat",
    "type":"1"
  }
] 
```

我将这些数据填充到带有标题、名称和类型的表中。

我已将这些数据存储在 javascript 全局数组中。现在我必须根据键对该全局数组进行排序。

例如，当我单击名称时，它必须根据名称和类型进行排序。

我已经尝试了很多东西，但它给出的排序不是函数错误。

```
var data_obj= [];  // declared a global variable 

 $.ajax({url: url,
         type:"post",
         data: "folder="+folder,
         success: function(data){
             data_obj = data // here i store returned json data in a global variable 
         }  
 }); 
```

一个简单的排序函数

```
 data_obj.sort(function(a, b){
     return [a.name] < [b.name] ? -1 : 1;
 }); 
```

但它给我排序不是一个功能。请帮我按键排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:05:18.407

推测服务器发送回 JSON 时带有错误的 Content-Type（编写 PHP 的人通常会忘记用 覆盖默认的 HTML 内容类型`header('Content-Type: application/json');`）。

这将导致`data`成为 HTML DOM 而不是从 JSON 膨胀的 Array，因此它没有`sort`方法。

# javascript - jQuery Mobile Listview 按钮不可见

> ID：13680861
> 
> 赞同：1
> 
> 时间：2012-12-03T10:00:44.900
> 
> 标签：javascript, jquery, listview, jquery-mobile

我在 HTML 文件中直接硬编码了 Div 中的 jQuery Mobile 按钮，它可以正确显示。请在下面找到图片

![在此处输入图像描述](../Images/9a7f645d09341c49c13c5a3738046d0e.png)

但是当我通过 JavaScript 修改它时，这两个按钮就不见了。不知道为什么。请在下面找到图片

![在此处输入图像描述](../Images/90e8950fc779835faff39be391465b61.png)

难道是因为jQuery Mobile Listview动态删除了一些样式的东西？？

这是 HTML

```
<div data-role="content" data-theme="c">    
<div id="ListOfCals">
<ul data-role="listview">
<li data-icon='false'>
<div id='ColorCodeDiv' style='background-color:#FFF;'></div>
Calendar 2
<p style='margin-top:2px'><strong><font size='2' color='#006600'>Active</font></strong></p>
<div id='calendarListView'>
<a name='del' data-role='button' href='#' data-icon='delete' data-theme='g' data-iconpos='notext' data-inline='true' data-bttype='delete'></a>
<a name='del' data-role='button' href='#' data-icon='gear' data-theme='e' data-iconpos='notext' data-inline='true' data-bttype='edit'></a>
</div>
</li>
</ul>
</div> 
```

这是使用的 JavaScript 代码

```
var strCalList = "<ul data-role='listview'>";
var ListOfCals = JSON.parse(data.d);
$(ListOfCals).each(function(){

strCalList +="<li data-icon='false'>";
strCalList += "<div id='ColorCodeDiv' style='background-color:"+$.trim(this.ColorCode)+"'></div>"
strCalList += this.CalendarName;
if(this.Active==true){
strCalList +="<p style='margin-top:2px'><strong><font size='2' color='#006600'>Active</font></strong></p>" ;
}
else if(this.Active==false){
strCalList +="<p style='margin-top:2px'><strong><font size='2' color='#FF0000'>Inactive</font></strong></p>";
}

strCalList +="<div id='dvBtn'>";
strCalList += "<a name='del' data-role='button' href='#' data-icon='gear' data-theme='e' data-iconpos='notext' data-inline='true' data-bttype='edit' ></a>";
strCalList +="<a name='del' data-role='button' href='#' data-icon='delete' data-theme='g' data-iconpos='notext' data-inline='true' data-bttype='delete'></a>";

strCalList +="</div>";
strCalList +="</li>";

});

strCalList = strCalList+"</ul>";
$('#ListOfCals').html(strCalList);
$('#ListOfCals ul').listview(); 
```

有人能弄清楚为什么吗？提前感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:12:38.403

我刚刚尝试了您的示例，对我来说，使用 Windows 7 和 Firefox Nightly 可以正常工作，请参见[此处](http://jsfiddle.net/L83Gf/)。您是否仅对特定配置有问题？

![在此处输入图像描述](../Images/90c6867bccb78dc34c9f20da6b1897f6.png)

```
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Test</title>
  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
  <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>

<body>
  <div data-role="page">
    <div data-role="content" data-theme="c">
      <div id="ListOfCals">
        <ul data-role="listview">
          <li data-icon='false'>
            <div id='ColorCodeDiv' style='background-color:#FFF;'></div>
            Calendar 2
            <p style='margin-top:2px'><strong><font size='2' color='#006600'>Active</font></strong></p>
            <div id='calendarListView'>
              <a name='del' data-role='button' href='#' data-icon='delete' data-theme='g' data-iconpos='notext' data-inline='true' data-bttype='delete'></a>
              <a name='del' data-role='button' href='#' data-icon='gear' data-theme='e' data-iconpos='notext' data-inline='true' data-bttype='edit'></a>
            </div>
          </li>
       </ul>
     </div>

     <script>
     $(document).on("mobileinit", function(){
       var strCalList = "<ul data-role='listview'>";
       var ListOfCals = JSON.parse(data.d);
       $(ListOfCals).each(function(){

         strCalList +="<li data-icon='false'>";
         strCalList += "<div id='ColorCodeDiv' style='background-color:"+$.trim(this.ColorCode)+"'></div>"
         strCalList += this.CalendarName;
         if(this.Active==true){
         strCalList +="<p style='margin-top:2px'><strong><font size='2' color='#006600'>Active</font></strong></p>" ;
         }
         else if(this.Active==false){
           strCalList +="<p style='margin-top:2px'><strong><font size='2' color='#FF0000'>Inactive</font></strong></p>";
         }

         strCalList +="<div id='dvBtn'>";
         strCalList += "<a name='del' data-role='button' href='#' data-icon='gear' data-theme='e' data-iconpos='notext' data-inline='true' data-bttype='edit' ></a>";
         strCalList +="<a name='del' data-role='button' href='#' data-icon='delete' data-theme='g' data-iconpos='notext' data-inline='true' data-bttype='delete'></a>";

         strCalList +="</div>";
         strCalList +="</li>";
       });

       strCalList = strCalList+"</ul>";
       $('#ListOfCals').html(strCalList);
       $('#ListOfCals ul').listview();
     });
     </script>
  </div>
</body>
</html> 
```

# java - Java ProcessBuilder 和 Windows 系统变量

> ID：13680866
> 
> 赞同：0
> 
> 时间：2012-12-03T10:00:58.313
> 
> 标签：java, windows, processbuilder

我想使用由自定义系统变量（“CHROME”）定义的路径在 Java 中执行程序。

```
new ProcessBuilder("CHROME").start(); 
```

Win7：工作正常（指向 AppData\Local）

Win Vista：什么都不做（指向程序文件）

我需要做什么才能让它与 Vista 一起运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:32:35.960

如果我理解正确，CHROME 是一个包含应用程序路径的系统变量。如果是这样，您可以尝试

```
String path = System.getenv("CHROME");
new ProcessBuilder(path).start(); 
```

或者

```
Runtime.getRuntime().exec(path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:19:17.417

在[这个问题](https://stackoverflow.com/a/11198858/315306)中建议从运行程序`cmd.exe`，即

```
new ProcessBuilder("cmd.exe", "%CHROME%"); 
```

只要`%CHROME%`在主 Java 程序传递给子进程的环境中，这应该可以工作。

# c++ - 限制对接口的访问的正确方法？

> ID：13680867
> 
> 赞同：5
> 
> 时间：2012-12-03T10:00:58.863
> 
> 标签：c++

假设我有一个代表打印作业的类：`CPrintingJob`. 它对正在打印的文档一无所知，只知道作业状态 - 作业是否排队、拒绝、继续等。

这个想法是每当需要进行一些打印时实例化这个类的一个对象，然后将其与其他数据一起传递给打印模块，然后作业的创建者检查其状态以查看打印情况。

假设`CPrintingJob`继承了两个接口：

```
class IPrintingJob // this one is to check the job state
{
    virtual TState GetState() const = 0;
    // ... some other state-inquiring methods

    class ICallback // job's owner is notified of state changes via this one
    {
        virtual void OnStateChange( const IPrintingJob& Job ) = 0; 
    };
}; 
```

和

```
class IPrintingJobControl // this one is for printing module to update the state
{
    virtual void SetState( const TState& NewState ) = 0;
    // ... some other state-changing methods
}; 
```

问题是，创建`CPrintingJob`对象的类不应该有权访问`IPrintingJobControl`，但是传递给的打印模块`CPrintingJob`必须能够更改其状态，因此可以访问该接口。

我想这正是应该使用朋友的情况，但我一直避免将它们视为天生有缺陷的机制，因此不知道如何正确使用它们。

那么，我该如何正确地做到这一点呢**？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:15:28.303

使用工厂并让工厂返回 IPrintingJob 的实例（最好包装在 smart_ptr 中）。例如：

```
 struct PrintingFactory {
   static auto create() -> std::unique_ptr<IPrintingJob> {
     return std::unique_ptr<IPrintingJob>(new CPrintingJob());//as there is currently no std::make_unique..
   }
 } 
```

一旦你必须使用 JobControl，你可以简单地通过 std::dynamic_pointer_cast 投射指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:46:47.503

经过深思熟虑，我决定：

1.  这整件事绝对是麻烦多于其价值；

2.  MFH 上述答案的（稍作修改）版本是唯一的，因此也是最好的方法。

感谢大家的投入，它确实很有启发性。

# sql - 使用聚合对行求和 SQL

> ID：13680874
> 
> 赞同：1
> 
> 时间：2012-12-03T10:01:15.540
> 
> 标签：sql, oracle

好的，我很抱歉标题含糊，因为我不知道该怎么说。这是我的问题。

```
CREATE TABLE dwd_temp (con VARCHAR2(10),line_no VARCHAR2(10),wgt NUMBER,pallet     VARCHAR2(10));
insert INTO  dwd_temp VALUES('a','1',10,NULL);
insert INTO  dwd_temp VALUES('b','1',11,'x');
insert INTO  dwd_temp VALUES('b','2',12,'x');
insert INTO  dwd_temp VALUES('b','3',13,'y'); 
```

现在我的要求是“替换”最后具有相同“托盘”的行'。所以我的结果应该是

```
 a           1          10           null
 b           1          23            x
 b           3          13            y 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:10:32.327

VARCHAR2 建议您使用 Oracle db。

```
select 
  con, min(line_no), sum(wgt), pallet
from dwd_temp
group by pallet, con; 
```

或者

```
select 
  min(con), min(line_no), sum(wgt), pallet
from dwd_temp
group by pallet; 
```

[SQLFiddle](http://www.sqlfiddle.com/#!4/fef78/3)

答案将取决于您想要什么分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:06:52.543

```
select con, min(line_no), sum(wgt), pallet
from dwd_temp 
group by con, pallet 
```

# android - android - 邀请朋友参加 Facebook 上创建的活动

> ID：13680875
> 
> 赞同：1
> 
> 时间：2012-12-03T10:01:17.453
> 
> 标签：android, facebook, events, invite

我有已经在 facebook 上创建事件的代码。我也想邀请朋友。经过这么多研究，我在 facebook 开发者网站上发现了一些编码。它说：

您可以通过向 /EVENT_ID/invited/USER_ID 发出 HTTP POST 来邀请用户参加活动。您可以通过向 /EVENT_ID/invited?users=USER_ID1,USER_ID2,USER_ID3 发出 HTTP POST 来邀请多个用户。这两个都需要 create_event 权限，如果邀请成功则返回 true。

请告诉我如何使用此编码邀请朋友。

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T21:17:17.757

使用新的 3.0 SDK，您将使用以下内容：

```
String eventId = "EVENT_ID";
Bundle params = new Bundle();
params.putString("users", "USER_ID1,USER_ID2,USER_ID3");
Request inviteFriendsRequest = new Request(Session.getActiveSession(),
    eventId + "/invited",
    params,
    HttpMethod.POST,
    new Request.Callback() {
        @Override
        public void onCompleted(Response response) {
            // Handle response
        }
    }
);
Request.executeAsync(inviteFriendsRequest); 
```

用您自己的值替换事件 ID 和朋友列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T07:29:12.080

我首先将响应作为 JSON 响应获取，然后将结果存储在哈希数组中，并将选定的好友 ID 输入到如下所示的数组中：

```
private void inviteFriends()
    {
        try
        {
            Bundle params = new Bundle();
            mAsyncRunner2.request("me/friends" , params , "GET", new RequestListener()
            {

                @Override
                public void onMalformedURLException(MalformedURLException e, Object state)
                {

                }

                @Override
                public void onIOException(IOException e, Object state)
                {

                }

                @Override
                public void onFileNotFoundException(FileNotFoundException e, Object state)
                {

                }

                @Override
                public void onFacebookError(FacebookError e, Object state)
                {

                }

                @Override
                public void onComplete(String response, Object state)
                {
                    try
                    {
                        JSONObject responseJsonObject = new JSONObject(response);
                        Log.d("InviteFriends.inviteFriends().new RequestListener() {...}:onComplete", "FB Response =>"+ responseJsonObject);
                        //event_id = event.getString("id");

                        //JSONObject responseJsonObject = new JSONObject(eventResponse);
                        JSONArray jsonArray = responseJsonObject.getJSONArray("data");

                        for (int i = 0; i < jsonArray.length(); i++)
                        {
                            HashMap<String, String> map = new HashMap<String, String>();
                            JSONObject e = jsonArray.getJSONObject(i);

                            map.put("id",    e.getString("id"));
                            map.put("name",  e.getString("name"));
                            mylist.add(map);

                            userIds = e.getString("id");
                            userName = e.getString("name");
                            Log.d("MainActivity:getAllEvents", "Friend ID, Name:" +  userIds + "," + userName);

                        }
                    }
                    catch (Exception e)
                    {
                        Log.e("log_tag", "Error parsing data "+e.toString());
                    }

                    runOnUiThread(new Runnable() {
                        public void run(){

                            ListAdapter adapter = new SimpleAdapter(getApplicationContext(), mylist , R.layout.friends_main,
                                new String[] {"name" },
                                new int[] {R.id.item_title});

                            Log.d(
                                "InviteFriends.inviteFriends().new RequestListener() {...}.onComplete(...).new Runnable() {...}:run",
                                "Friends->" + mylist.size());

                            setListAdapter(adapter);

                            final ListView lv = getListView();
                            lv.setTextFilterEnabled(true);
                            lv.setOnItemClickListener(new OnItemClickListener() {
                                public void onItemClick(final AdapterView<?> parent, View view, int position, long id) {
                                    @SuppressWarnings("unchecked")
                                    HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);
                                    String selectedName = o.get("name");
                                    String selectedId = o.get("id");
                                    Toast.makeText(InviteFriends.this, "Your friend " + selectedName + " was selected.", Toast.LENGTH_SHORT).show();

                                    selectedFriendsIDs.add(selectedId);
                                    selectedFriendsNames.add(selectedName);
                                    selectedFriendsCount = selectedFriendsIDs.size();

                                    btnSendInvites.setText(selectedFriendsCount + " friends selected");

                                    Log.d("Selected IDs ", "" + selectedFriendsIDs);
                                    Log.d("Selected Names ", "" + selectedFriendsNames);  

                                   //make list null

                                }
                            });
                        }
                    });

                }
            }, null);

        }
        catch (Exception e)
        {

        } 
```

然后我邀请朋友，在下面的 for 循环中一一邀请：

```
public void inviteSelectedFriends()
    {
        try
        {

            String createdEventID = CreateFbEvent.eventID.toString();

            Log.d("InviteSelectedFriends:inviteSelectedFriends", "size -> " + InviteFriends.selectedFriendsIDs.size());

            for(int i = 0; i < selectedFriendsIDs.size(); i++){

            String inputParm = createdEventID + "/invited/" + selectedFriendsIDs.get(i);
            Log.d("InviteSelectedFriends:inviteSelectedFriends", "inputParm"+inputParm);
            Bundle params = new Bundle();
            mAsyncRunner2.request(inputParm, params, "POST", new RequestListener()
            {

                @Override
                public void onMalformedURLException(MalformedURLException e, Object state)
                {

                }

                public void onIOException1(IOException e, Object state)
                {

                }

                @Override
                public void onFileNotFoundException(FileNotFoundException e, Object state)
                {

                }

                @Override
                public void onFacebookError(FacebookError e, Object state)
                {

                }

                @Override
                public void onComplete(String response, Object state)
                {
                    try
                    {
                        JSONObject eventResponse = new JSONObject(response);
                        //event_id = event.getString("id");
                        Log.i(tag, "Event Response => " + eventResponse);
                        //Log.w("myapp", inputParm);
                        //Log.d("InviteSelectedFriends:inviteSelectedFriends", "INPUT PARAM->"+ inputParm.toString());

                    }
                    catch (Exception e)
                    {

                    }
                }

                @Override
                public void onIOException(IOException e, Object state)
                {
                    // TODO Auto-generated method stub

                }
            }, null);
          }
        }
        catch (Exception e)
        {

        }
    } 
```

希望这可以帮助！

# android - 这段代码有什么问题？我正在尝试更改图像按钮的图像

> ID：13680877
> 
> 赞同：2
> 
> 时间：2012-12-03T10:01:18.167
> 
> 标签：android, imagebutton

```
public class AccountSetupActivity extends Activity implements OnClickListener {
    ImageButton fbButton;

    @Override
    public void onClick(View v) {
        Toast.makeText(this, "FB clicked", Toast.LENGTH_SHORT).show();
        Drawable fbLight = getResources().getDrawable(R.drawable.fborange);
        fbButton.setBackgroundDrawable(fbLight);
        // fbButton.setBackgroundResource(0);
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.setupaccounts);
        fbButton = (ImageButton) findViewById(R.id.fbButton);
        fbButton.setOnClickListener(this);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:29:59.380

试试这条线来设置图像：

```
 fbButton.setImageDrawable(fbLight); 
```

我认为您打算设置最前面的图像，但正在设置背景图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:47:52.240

试试这个：

`fbButton.setImageResource(R.drawable.fborange)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:08:17.637

尝试这个

```
 buttonName.setBackgroundResource(R.drawable.imageName); 
```

# c# - 文本更改仅在回发后可见

> ID：13680878
> 
> 赞同：0
> 
> 时间：2012-12-03T10:01:22.690
> 
> 标签：c#, asp.net, webpage, lifecycle, page-lifecycle

我有一种方法可以更改我网站上控件的文本。
当用户加载页面时，这些更改应该是可见的。
但是在下一次回发之后，这些变化首先是可见的。

我试图在`Page_PreInit`,`Page_Init`和[此处](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)`Page_PreLoad`描述的所有其他方法中调用它。 但他们都没有工作。

一些代码：
具有方法的类：（部分）

```
 namespace MyNamespace {
        public class ControlTextCorrection {

            Page _page;

            public ControlTextCorrection(Page page) {
                _page = page;
            }

            public void Correct() {
                HtmlEncodeControls(_page);
            }

            private void HtmlEncodeControls(Page page) {
                Control control = (Control)page;
                HtmlEncodeControls(control);
            }

            private void HtmlEncodeControls(Control parentControl) {
                if (!parentControl.HasControls()) {
                    return;
                }
                foreach (Control control in parentControl.Controls) {
                    if (control.HasControls()) {
                        HtmlEncodeControls(control);
                    }
                    if (control is Label) {
                        Label label = (Label)control;
                        label.Text = HtmlTextCorrection(label.Text);
                    }
                    else if (control is CheckBox) {
                        CheckBox checkBox = (CheckBox)control;
                        checkBox.Text = HtmlTextCorrection(checkBox.Text);
                    }
                    //Correction for more controls...
                }
            }

            protected string HtmlTextCorrection(string text) {
                bool encode = true;
                while (encode) {
                    string newText = _page.Server.HtmlDecode(text);
                    if (newText == text) {
                        encode = false;
                    }
                    text = newText;
                }
                text = _page.Server.HtmlEncode(text);
                return text;
            }
        }
    } 
```

调用方法示例：

```
 protected void Page_PreLoad(object sender, EventArgs e) {
        ControlTextCorrection correction = new ControlTextCorrection(this.Page);
        correction.Correct();
    } 
```

那么，我应该在哪里（*何时*）调用它，以便在看到网站的第一眼就可以看到更改？

# url - PHP - 如何避免在 url 中传递参数

> ID：13680880
> 
> 赞同：-2
> 
> 时间：2012-12-03T10:01:25.613
> 
> 标签：url, session, parameters, onclick

假设我有一个用户列表，并且每一行都有一个 id。每行都有一个编辑按钮。单击编辑按钮后，我想显示用户信息。现在我在 url 中将 id 作为参数传递。出于安全原因，我想避免这种情况，因为并非所有人都应该查看所有 ID。我在想我应该能够在单击编辑按钮时设置一个会话变量，这样当我的视图加载时，它就可以从会话中加载 id。单击编辑按钮时如何设置会话变量的任何想法。有更好的选择吗？

提前致谢。SK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:07:26.683

在 URL 中传递 id 不是安全问题。**不检查当前用户是否被允许访问给定的 id**是一个安全问题。您需要一个*身份验证*系统。如果不允许访问特定 id 的人尝试这样做，您会以`403 Forbidden`HTTP 状态拒绝请求并且不输出信息。

即使会话中有服务器端状态（这严重破坏了 HTTP 请求的幂等性），您*仍然*需要这样的系统，因为您需要以某种方式在会话中设置 id，并且需要验证是否允许用户设置会话到某个 id。

# extjs - Ext.require 是必需的

> ID：13680885
> 
> 赞同：1
> 
> 时间：2012-12-03T10:01:44.277
> 
> 标签：extjs, extjs4

我在 extjs 4 中启动我的应用程序，使用

```
Ext.Loader.setConfig({enabled: true}); 
```

但是当使用我的自定义控件时，我总是需要明确要求这个控件：

```
Ext.require('App.controls.CoCheckbox');

Ext.define('App.view.atendimento.FormAgenda', {
    extend: 'App.controls.CoForm',
... 
```

我的控制：

```
Ext.define('App.controls.CoCheckbox',{
    extend: 'Ext.form.field.Checkbox',
    alias: 'widget.cocheckbox',
    inputValue: true
}); 
```

为什么我需要明确声明这些要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:02:03.450

在 Extjs 中，您将代码组织在文件中，然后您的 App.view.atendimento.FormAgenda 在一个文件中，而您的 App.controls.CoCheckbox 在另一个文件中。我假设 App.view.atendimento.FormAgenda 至少使用一个 App.controls.CoCheckbox 实例，因此，当 extjs 需要创建一个 App.view.atendimento.FormAgenda 实例时，它需要下载 App.controls.CoCheckbox 所在的文件定义。

基本上，extjs 没有其他方法可以知道组件的依赖关系。你有明确的他们。

# asp.net - 从我的 VS2010 IDE 调试托管在共享服务器上的 ASP.NET 应用程序

> ID：13680889
> 
> 赞同：0
> 
> 时间：2012-12-03T10:01:56.940
> 
> 标签：asp.net, remote-debugging

我有网站，它托管在共享服务器 ORCSWEB 上。现在，当我在本地测试一个页面时，我发现它运行良好，但是当我测试放置我们的实时站点 url 的同一页面时，我发现它无法正常工作。所以我想从现场测试，但从我自己的 VS2010 IDE 并想设置断点。我只是不知道这是否可能，但由于缺乏访问权限，我无法在那里安装任何远程调试器。

我访问此网址获取指导[http://www.codeproject.com/Articles/38132/Remote-IIS-Debugging-Debug-your-ASP-NET-Applicatio](http://www.codeproject.com/Articles/38132/Remote-IIS-Debugging-Debug-your-ASP-NET-Applicatio)

但我无法帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:07:32.147

我不是 Orcsweb 客户，但除非目标机器上正在运行 VS Remote Debugger 服务，否则您无法进行远程调试。如果我是共享虚拟主机，那么我不会向我的客户提供这项服务，因为这是一项巨大的安全责任。

出于好奇，您为什么不能根据现在生成的任何异常报告来修复它？

# java - 如何读取共享位置上的文件/文件夹列表？

> ID：13680893
> 
> 赞同：1
> 
> 时间：2012-12-03T10:02:14.860
> 
> 标签：java, file, groovy

```
String sharedLocation = "\\\\hostname" 
```

`new File(sharedLocation).list()`返回空值。`exists()`也返回`false`。我不知道这是否与权限有关。我在 Windows 上运行脚本。

相反，当我通过**Windows -> 运行**打开并输入 \\hostname 时，共享文件夹在运行窗口下拉列表中列为自动完成的一部分。为什么我不能对我的 java/groovy 脚本做同样的事情？有没有办法做到这一点？

编辑：请原谅错字。反斜杠已经被转义了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:11:30.593

字符串中的反斜杠解析为`\hostname`. 如果你想得到`\\hostname`，你必须有两个反斜杠并正确地转义它们

```
String sharedLocation = "\\\\hostname" 
```

[`File`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html)用于现有文件，但`\\hostname`不是文件或目录，而只是其中的一部分。使用时`\\hostname\share`，您可以`list()`共享此共享中的所有文件。

对于列出共享，您可以查看此答案[https://stackoverflow.com/a/8480995/1741542](https://stackoverflow.com/a/8480995/1741542)，它建议使用[Java CIFS 客户端库](http://jcifs.samba.org/)。

[`listRoots`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listRoots%28%29)您可以看到已经安装的共享。

# iphone - iOS - 在没有实际推送的情况下显示推送弹出窗口并播放推送声音

> ID：13680894
> 
> 赞同：1
> 
> 时间：2012-12-03T10:02:22.810
> 
> 标签：iphone, ios, push-notification, push

我想要我的应用程序中的功能，它将向用户展示推送的外观。所以我想显示推送通知并从应用程序代码播放声音，即使没有互联网连接。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:04:27.393

使用[本地通知](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)有帮助吗？这类似于推送通知，但不需要服务器。

除此之外，你可以自己做，但你必须做所有的绘图代码！

# validation - 使用 Symfony2 验证 POPO

> ID：13680900
> 
> 赞同：1
> 
> 时间：2012-12-03T10:02:40.920
> 
> 标签：validation, symfony

我正在尝试使用 Json-RPC 验证参数。通过 Symfony2 验证，我可以做到这一点：

```
$expense = new Expense;
$expense->setAmount(1);
$validator = $this->get('validator');
$errors = $validator->validate($expense); 
```

但我不想用`setFoo()`方法手动指定每个参数。无论如何绑定数据类似于 Symfony`Form`库的工作方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:59:44.037

事实证明这对于 Symfony2 是不可能的。您必须自己绑定数据。我创建了一个类似于这样的绑定方法：

```
$params = array('amount' => 1);

foreach($params as $key => $value) {
    try {
        $path = new PropertyPath($key);
        $path->setValue($obj, $value);
    } catch (\Exception $e) {
        // parameter does not exist in POPO
    }
} 
```

将参数绑定到 POPO 对象后，即可正常验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:40:45.683

如果我理解你的问题，我`$errors = $validator->validate($user)`会做这项工作。请参阅[使用验证器服务](http://symfony.com/doc/2.0/book/validation.html#using-the-validator-service)文档。

# css - 溢出-x 在 IE8 中不起作用

> ID：13680901
> 
> 赞同：3
> 
> 时间：2012-12-03T10:02:44.647
> 
> 标签：css, internet-explorer, internet-explorer-8

我`overflow-x:hidden`在 IE 中遇到问题。所有其他浏览器似乎都接受它，但 IE 创建`overflow-x:hidden`（x 和 y）。

有人对 IE 修复有任何提示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T11:53:30.317

由于 -ms-overflow-x 正在工作，因此您的 DOCTYPE 声明可能存在问题。

看[这里](http://msdn.microsoft.com/en-us/library/ie/ms530826%28v=vs.85%29.aspx)

> 评论
> 
> Windows Internet Explorer 8。-ms-overflow-x 属性是 CSS 的扩展，在 IE8 标准模式下可以用作 overflow-x 的同义词。
> 
> 在 Microsoft Internet Explorer 6 及更高版本中，当您使用 !DOCTYPE 声明指定符合标准的模式时，此属性适用于 html 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-03T01:30:37.810

通过添加以下内容，我能够解决我在 IE8 中遇到的相同问题：

```
 position: relative; 
```

到需要overflow-x: hidden 功能的div。

如果没有 div 上的相对定位，即使我设置了 overflow-x: hidden，我的内容也会显示在 div 之外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-20T05:47:31.463

**Svbaker**的答案也是正确的。试试这个对我有用。

```
 <div style="overflow: auto;
                overflow-y: hidden;
                -ms-overflow-y: hidden;
                white-space: nowrap;
                position:relative;
                ">
                 ...somecodes..
    </div> 
```

-ms-溢出-y：隐藏；- 这适用于 IE8 只需记住添加 position:relative 因为overflow-y/x 适用于 CSS3 并且适用于更高版本的浏览器。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-12-03T10:42:28.130

是的，溢出-x 和 y 是 css3 规范。

尝试使用像[http://baijs.nl/tinyscrollbar/这样的 jquery 插件](http://baijs.nl/tinyscrollbar/)

否则我猜你想隐藏元素的“宽度”？为什么不 1\. 将元素的宽度设置为特定大小 2\. 设置溢出：隐藏 3\. 将高度设置为自动

# jquery - 弹出窗口 - 通过鼠标滚轮滚动

> ID：13680903
> 
> 赞同：1
> 
> 时间：2012-12-03T10:02:56.873
> 
> 标签：jquery, scrollbar, mousewheel

我有一个隐藏的 div，并通过单击链接像模式弹出窗口一样打开它。div 内容是可滚动的，但我无法绑定鼠标滚轮滚动。

我已经从 jquery.mousewheel.js 尝试了这段代码：

```
$('#previewFrame').mousewheel(function(event, delta, deltaX, deltaY) {
    console.log(delta, deltaX, deltaY);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:06:17.333

尝试这个

```
$('#previewFrame').bind('mousewheel', function(event, delta, deltaX, deltaY) {
    console.log(delta, deltaX, deltaY);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:07:50.493

这应该为您解决问题：

```
$(document).ready(function(){

    $('#previewFrame').bind('mousewheel', function(e){
        if(e.wheelDelta/120 > 0) {
            $(this).text('scrolling up');
        }
        else{
            $(this).text('scrolling down');
        }
    });
}); 
```

工作[**演示**](http://jsfiddle.net/5t2MN/160/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:29:57.563

我找到了这样的解决方案：在包含内容的 div 上方放置另一个带有“overflow:scroll”的透明 div，它将捕获的事件传递给 jScrollPane

```
// transfer mousewheel events to jScrollPaneContainer
$('#previewHider').mousewheel(function(event, delta, deltaX, deltaY) {
    $(this).next().find('div.jScrollPaneContainer').eq(0).trigger('mousewheel', delta);
}); 
```

# sql - SQL Server：使用 IIf 查询缺少的 FROM 子句

> ID：13680913
> 
> 赞同：0
> 
> 时间：2012-12-03T10:03:18.577
> 
> 标签：sql, iif, ms-query

我需要使用`IIf`语句通过 Microsoft Query 接口运行 T-SQL 查询。

当我运行查询时，我得到了错误`Missing FROM clause`。这很奇怪，因为该`FROM`子句就在那里。它失败了，`IIf`但我不知道为什么。

编码：

```
SELECT 
    TABLE1.NUMBER, 
    TABLE1.TEXT, 
    TABLE1.INT, 
    IIf(
        (
            (
                ((TABLE2.INT1-TABLE2.INT2) -TABLE2.INT3) -TABLE2.INT4
            ) > 0
        ), 
        (
            1
        ),  0) 
        as NEWCOL
FROM 
    DB.TABLEX TABLE1, 
    DB.TABLEY TABLE2
WHERE 
    TABLE2.NUMBER = TABLE1.NUMBER 
    AND TABLE1.NUMBER='991208000192' 
```

数据库不是我的，所以我必须尽我所能。有谁知道可能导致问题的原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:32:30.617

[http://enos.itcollege.ee/~priit/(I216)%20Ab-de%20administreerimine/SQLBase%20admin%20juhendid/LANG.PDF](http://enos.itcollege.ee/~priit/(I216)%20Ab-de%20administreerimine/SQLBase%20admin%20juhendid/LANG.PDF)中的 SQLBase 参考（由@twoleggedhorse 提供）在 SQLBase 中没有函数 IIF。它有一个函数 IF，其语法与您的 IIF 相似。

尝试在 SQL 中使用 @IF(CONDITION, TRUE_VAL, FALSE_VAL)。

# enums - Java API 中枚举的使用

> ID：13680916
> 
> 赞同：4
> 
> 时间：2012-12-03T10:03:23.133
> 
> 标签：enums, java

您能否指出一个类，来自官方 Java API，它很好地使用了 enums ？我找不到任何特定的课程。

Java API 是否在其类中包含枚举？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T10:06:57.177

JRE 7 中定义了 328 个枚举类。我建议你阅读[枚举类型教程](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

我使用的一个简单的方法是[java.nio.AccessMode](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/nio/file/AccessMode.java)。

一个值得理解的枚举是[Thread.State](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.State.html)

一个更有趣的是[java.util.concurrent.TimeUnit](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/concurrent/TimeUnit.java)

`enum`恕我直言但早于它们的类的一个示例是[ByteOrder](http://www.docjar.org/html/api/java/nio/ByteOrder.java.html)请参见上面的 Joachim 评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:59:02.753

Collection API 中很少有直接使用 Enum 的：EnumSet、EnumMap

# php - 调用未定义的函数 sqlite_libversion()

> ID：13680917
> 
> 赞同：3
> 
> 时间：2012-12-03T10:03:31.937
> 
> 标签：php, sqlite

我真的不明白为什么我会收到这个错误，我有

```
extension=php_sqlite.dll
extension=php_sqlite3.dll 
```

我正在使用 php 版本 5.4.3 的 wamp

我收到以下错误调用未定义函数 sqlite_libversion()

我有代码

```
 echo sqlite_libversion(); 
```

我已经尝试过其他论坛和主题，但所有这些都是关于忘记启用模块，为什么我仍然有问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-01T19:25:54.907

您似乎在 Sqlite3 中寻找的方法是：

`<?php print_r(SQLite3::version()); ?>`

哪个应该返回：

`Array ( [versionString] => 3.5.9 [versionNumber] => 3005009 )`

根据[http://php.net/manual/en/sqlite3.version.php](http://php.net/manual/en/sqlite3.version.php)上的文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T11:08:03.600

此函数是（旧）SQLite 2 扩展的一部分，PHP 5.4 不支持该扩展 - 您只能使用 SQLite3。

# android - 在替换片段之前保存 Listview 状态

> ID：13680919
> 
> 赞同：2
> 
> 时间：2012-12-03T10:03:37.380
> 
> 标签：android, android-listview, android-fragments

我在片段中有一个自定义列表。然后我用另一个列表替换片段。

我想当我回到我以前的列表（由于替换片段而被破坏）时恢复列表的最后状态（如选中的项目或微调器选定的项目）。我知道我必须使用`onSaveInstanteState`并将列表的最后一个状态放入其中，然后从`onActivityCreated`bundle 中获取它们。问题是我的列表很复杂，并且有一个 bean 类和 CustomAdapter。我想我可以使用下面的代码：

（我用过`private List<NameBean> items;`）：

```
@Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        StringBuffer sb = new StringBuffer();
        // Retrive Data from list
        for (NameBean bean : items) {
            /* bean gets the orders values from NamesAdapters and MainActivity.
        But the orders like "isSelected" (value of a boolean which is defined here in upper block) or
        "IsSelected" and "SetSelected" which gets and sets the value of the boolean "selected" in 
        NameBean.java (Setters and getters) in conditional (boolean) format (true or false).
        We can access them in MainActivity and NamesAdapter   */
            if (bean.isSelected()) {
                sb.append(bean.getName() + ": " + bean.getSpinnerItem());
                sb.append("\n");
            }
        }
        showAlertView(sb.toString().trim());
    } 
```

我的 NameBean 类如下：

```
public class NameBean {

private String name;
private String spinnerItem;
private SpinnerAdapter spinnerAdapter;
private boolean selected;

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public boolean isSelected() {
    return selected;
}

public void setSelected(boolean selected) {
    this.selected = selected;
}

public SpinnerAdapter getSpinnerAdapter() {
    return spinnerAdapter;
}

public void setSpinnerAdapter(SpinnerAdapter spinnerAdapter) {
    this.spinnerAdapter = spinnerAdapter;
}

public String getSpinnerItem() {
    return spinnerItem;
}

public void setSpinnerItem(String spinnerItem) {
    this.spinnerItem = spinnerItem;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:57:51.850

我发现答案既简单又棘手！

在替换片段之前没有理由（在我的情况下）保存复杂列表。我只是动态定义了片段并将标签设置为片段。然后不是替换它们，而是隐藏一个并显示另一个。此代码在主要活动中：

```
FragmentManager fm = getFragmentManager();
    WebViewerFragment firstfragment = new WebViewerFragment();
    WebViewerFragment_II secondfragment = new WebViewerFragment_II();
    fm.beginTransaction()
    .add(R.id.detail_fragment, firstfragment, "1")
    .add(R.id.detail_fragment, secondfragment, "2")
    .hide(secondfragment)
    .addToBackStack(null)
    .commit(); 
```

（我被迫添加第二个片段，因为这是向片段动态添加标签的唯一方法！我需要这个标签来响应更改片段的操作）。然后我通过切换它们的可见性来更改片段内容：

```
FragmentManager fms = getFragmentManager();
        Fragment firstFragment = getFragmentManager().findFragmentByTag("1");
        Fragment secondFragment = getFragmentManager().findFragmentByTag("2");
        fms.beginTransaction()
        .hide(secondFragment)
        .show(firstFragment)
        .addToBackStack(null)
        .commit(); 
```

我希望我能帮助遇到这个问题的人，因为它几乎让我发疯了。很明显，无论何时，您都可以通过诸如替换或删除（多个片段）之类的事务操作来处理它们（用于获取默认视图），并且`.commit();`在事务结束时添加将同时对所有更改执行操作。

# android - 微调器弹出对话框未在屏幕旋转时调整其宽度

> ID：13680920
> 
> 赞同：5
> 
> 时间：2012-12-03T10:03:43.933
> 
> 标签：android, spinner, screen-orientation

我正在使用`Spinner`with `android:spinnerMode="dropdown"`。我还设置`android:configChanges="orientation|keyboardHidden|screenSize"`了防止我`Activity`被重新创建。当我处于`Landscape`模式并单击`Spinner`它时，它会弹出下方`Spinner`并且与按钮的宽度相同`Spinner`，现在当我将屏幕旋转到纵向模式时，`Spinner`按钮宽度会根据屏幕尺寸减小，但弹出对话框不会相应地减小其宽度.

纵向模式屏幕： ![在此处输入图像描述](../Images/873e2549459e6128619998d526a6cf30.png)

风景模式屏幕 ![在此处输入图像描述](../Images/133a908ed1f755ca31e635eb68d9936c.png)

我想过关闭弹出窗口并在屏幕方向上重新打开它，但我没有找到任何关闭弹出对话框的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T18:21:42.397

我也有这个问题。我最终调用`notifyDatasetChanged()`了 spinnerAdapter`onConfigurationChanged()`并且它起作用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T23:04:54.937

在`onConfigurationChanged()`方法调用上`spinner.invalidate();`

# .net - 如何通过 IMAP 可靠地确定原始电子邮件收件人是谁？

> ID：13680921
> 
> 赞同：1
> 
> 时间：2012-12-03T10:03:57.580
> 
> 标签：.net, email, imap

我们正在将一些应用程序整合到我正在编写的新应用程序中。每个应用程序都有一个（或多个）用于处理电子邮件的电子邮件地址。我们想做的是将每个原始电子邮件地址转发到一个新的、集中的地址，然后根据最初发送的位置以不同的方式处理电子邮件。

我们连接的服务器是 Exchange 2003，我使用 IMAP (AE.Net.Email) 来获取电子邮件。

似乎我可以浏览标题并查找 Received 标题，但我不确定这是否可靠。我知道一些邮件系统专门为此添加了一个标题，但它似乎不像我们的那样。

那么有什么我可以通过 IMAP 检查但我没有看到的东西吗？我们可以在 Exchange 中做些什么来确保添加标头吗？或者将电子邮件发送到不同的文件夹？有没有办法做一个类似于GMail的用户名+关键字@host.com？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:24:09.197

一般情况下，您无法判断电子邮件何时被重定向、别名、转发或在邮箱之间移动。在 SMTP 世界中，将电子邮件向前移动到其目的地的每个操作或多或少等同于修改或重写 SMTP 信封收件人地址。此类操作可以是从电子邮件别名到通过邮件列表传递到用户配置的转发规则的任何操作。一些 MTA 的架构甚至使这一事实非常明确：例如，Sendmail 配置文件中最重要的部分不过是一组基于模式匹配和替换的规则，这些规则指定电子邮件的信封收件人如何以文本方式迭代重写。

话虽如此，当电子邮件通过系统时，可能会在标题中留下痕迹，从而为信封收件人在此过程中的早期状态提供线索。但是这里没有标准，也没有保证。

如您所知， MTA 通常将一些信息放在`Received`可以派上用场的标头中，但并不总是采用可预测的格式。一些本地投递代理（链中的最后一步，将电子邮件投递到实际邮箱中）`Delivered-To`在将邮件放入邮箱之前将邮件头附加到邮件中，但这取决于投递代理。邮件列表会添加这样的标题`List-Id`，说明在将邮件重新发送给各个订阅者之前，电子邮件被发送到了哪个邮件列表。

没有一个地方可以看。您能做的最好的事情是找到在您的特定场景中始终相同的东西并使用它，或者如果没有任何东西，请安排您用来转发消息的任何脚本/功能以添加自己的面包屑踪迹在标题中。

# android - 在 android 中访问 SalesForce 帐户

> ID：13680924
> 
> 赞同：0
> 
> 时间：2012-12-03T10:04:04.800
> 
> 标签：android, salesforce

嗨朋友们，任何人都在为 Android 移动 SDK 工作过如何在 android 上访问它任何教程请建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:03:51.900

[http://wiki.developerforce.com/page/Getting_Started_with_the_Mobile_SDK_for_Android](http://wiki.developerforce.com/page/Getting_Started_with_the_Mobile_SDK_for_Android)是从教程开始的好地方。

# php - 读取多个 PHP 文件以生成 html 表的交替行

> ID：13680935
> 
> 赞同：0
> 
> 时间：2012-12-03T10:04:46.100
> 
> 标签：php

我必须创建多个交替行，其中包含来自不同文本文档的不同数据集。我可以阅读文本文件，我只是不知道如何使用一个 html 表中的不同查询来执行交替行。

我曾考虑将数据存储在数据库中，这是否比每次加载页面时都读取文本文件更好？

还有什么其他方法可以实现输出，我目前查看了以前的线程[从两个表中选择交替记录，](https://stackoverflow.com/questions/13419264/selecting-alternating-records-from-two-tables)但它似乎不适用，因为它使用数据库来产生结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:36:51.803

记录您正在处理的行并使用模数运算符：

```
$LineNumber = 1;
while ()
{
    if (($LineNumber % 2) == 1) // Is odd
        $SecondaryTable .= "<td>I feel odd</td>";
    else
        $PrimaryTable .= "<td>hello</td>";

    $LineNumber++;
}

// ... Finish off the tables here

echo $PrimaryTable;
echo $SecondaryTable; 
```

# iis - iis 端口 80 阻止子网上的服务器

> ID：13680939
> 
> 赞同：2
> 
> 时间：2012-12-03T10:05:01.540
> 
> 标签：iis

我有一个问题，端口 80 被某些东西阻塞了。我的设置是

```
- Server 1 win2008 (44.246) Server 2 win2008 R2 (40.219)
- Server 1 is running iis 7
- When I try to access http://server1:80 from server2 the connection times out
- The firewalls are off for both servers 1 and 2
- On server 1 running "netstat -ano | find ":80"" i can see server 2 trying to connect but it just stays on SYN_RECEIVED. Wireshark also shows the connection coming in.
- running "nmap -sT -p 80 --traceroute 192.168.44.246" shows "80/tcp filtered http"
- when i create another website on port 1234 or 9898 everything works correctly.
- port 80 on server 1 is accessible via the internet and works
- port 80 on another server that's on the 44 range works correctly i.e (http://server3:80 (44.231)) 
```

我知道有 3 个端口存在相同的连接问题。端口是 1111,5555 和 80

我还能用什么来查看阻塞这些端口的原因？

谢谢

# sql - GETDATE() 仅返回日期部分，时间为 00:00:00.000

> ID：13680940
> 
> 赞同：0
> 
> 时间：2012-12-03T10:05:16.603
> 
> 标签：sql, sql-server-2008-r2

我有一个近 100 列、超过 1.000.000 行的表，最后一列是：

```
[RecTime] AS DATETIME 
```

我存储每一行​​的日期时间。此列有：

```
... CONSTRAINT [DF_ZHMIA1A_RecTime]  DEFAULT (getdate()) FOR [RecTime] 
```

一切正常，例如，新行获取当前日期时间。

```
'2012-12-03 11:23:46.126' 
```

但有时在插入新行后 [RecTime] 仅存储日期部分，例如

```
'2012-12-03 00:00:00.000' 
```

有什么想法吗 ？

这是一个插入示例：

```
INSERT INTO [ZHMIA1A] (
    RefID
    , Col_1
    , Col_2
    , Col_3
    ...
    ...
    ...
    , Col_120
    , Col_121
    , Col_122
)
VALUES (
    '19455642'
    , 'A'
    , 'A'
    , 'B'
    ...
    ...
    ...
    , 'A'
    , 'J'
    , 'T'
) 
```

# jquery - 在 Dribbble 上检索最后一次投篮需要太长时间

> ID：13680945
> 
> 赞同：0
> 
> 时间：2012-12-03T10:05:28.550
> 
> 标签：jquery, httprequest

我正在使用 jQuery 在[我的网站](http://joao.pt/#recently)上显示 Dribbble 数据。在这种情况下，我试图在我的 Dribbble 个人资料上显示我的最后一个镜头，使用下面的代码：

```
$.getJSON('http://api.dribbble.com/players/joaotiago/shots?per_page=1&callback=?', function(data) {

    url = data.shots[0].short_url;
    title = data.shots[0].title;
    src = data.shots[0].image_teaser_url;

    $('#dribbble a').attr('href', url);
    $('#dribbble a').attr('title', 'Last shot on Dribbble: '+title);
    $('#dribbble a').css({
        'background' : 'url('+src+')',
        'background-size' : 'contain'
    });      
}); 
```

大多数情况下，我的最后一个镜头会在 20 秒后出现（在我网站上显示的三个圆圈中的第一个），有时我什至会得到 502。请注意：`Uncaught TypeError: Cannot read property 'artist' of undefined`来自控制台的错误是由另一个[不相关的问题](https://stackoverflow.com/posts/13680657)引起的我有。关于为什么这么慢，有时甚至超时的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T12:09:35.880

嗯......这可能只是他们的 API 非常缓慢（而且看起来如此）。我不认为你可以做很多事情......

作为检查，尝试`http://api.dribbble.com/players/joaotiago/shots?per_page=1`直接从您的浏览器地址栏进入，您会注意到它需要相当长的时间才能显示出来。

唯一的选择似乎是编写它们并让它们的 API 更快地工作，或者将结果缓存在您身边并异步刷新：

1.  显示缓存结果（理论上很快）
2.  从 API 获取结果（需要时间，这里不急：我们已经展示了一些东西）
3.  如果没有改变，停止（获利）
4.  如果更改，请保存新结果（并可能将页面上显示的结果与新结果交换......不是很好的体验，但它只会影响第一个访问者）

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-03T11:23:00.590

我尝试了一些在我的最后工作正常的请求 url。虽然最后一次拍摄仍然需要一些时间，但在任何网站上都是第一次。在这里查看 [设置限制的运球投篮](https://stackoverflow.com/questions/29681181/get-data-from-github-is-possible-get-data-from-dribbble-doesnt-work/33495304#33495304)

> I have used it in a beautiful [Multi social tabs](http://joomla30.webkul.com/multi-social-tabs.html) module of Joomla by [Webkul](http://webkul.com/), have a look at it by following the [link](http://joomla30.webkul.com/multi-social-tabs.html) then simply check dribble tab there

# python - 我需要以root身份安装python包吗

> ID：13680947
> 
> 赞同：4
> 
> 时间：2012-12-03T10:05:35.537
> 
> 标签：python

> **可能重复：**
> [python 中的站点包是什么，如果您不是 root，您可以安装/使用它们吗？](https://stackoverflow.com/questions/10291922/what-are-site-packages-in-python-and-can-you-install-use-them-if-you-arent-root)

```
sudo apt-get install pip

creating /usr/local/lib/python2.7/dist-packages/boto

error: could not create '/usr/local/lib/python2.7/dist-packages/boto': Permission denied 
```

`pip install boto`修改 Ubuntu 框中的软件包`/usr/local/bin`。这是它应该工作的方式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T11:32:27.887

您可以在`--user`通过 pip 或 setup.py 安装 python 包时使用该标志。通过为当前用户安装软件包，这绕过了对 root 访问的需要。

某些软件包，例如`virtualenv`需要由 root 安装，但这不是一个常见的要求。以防万一，最好检查软件包文档以了解安装要求。

更多详情见：

[如何在没有 pip/easy_install 的情况下手动安装 pypi 模块？](https://stackoverflow.com/questions/13270877/how-to-manually-install-a-pypi-module-without-pip-easy-install/13271241#13271241)

[如何使用 pip 在我的 $HOME 文件夹中安装软件包？](https://stackoverflow.com/questions/7143077/use-pip-and-install-packages-at-my-home-folder)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T10:18:14.407

您应该以 root 身份安装的唯一软件包是[virtualenv](http://pypi.python.org/pypi/virtualenv)：

```
 #pip install virtualenv 
```

然后，您可以像普通用户一样在虚拟环境中工作。它允许您在不破坏系统中所有内容的情况下进行实验：

```
 $virtualenv myproject
 $cd myproject/
 $./bin/pip install boto 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:17:49.557

您安装的每个 python 包都将安装在根目录中，除非您使用[virtualenv](http://pypi.python.org/pypi/virtualenv)。因此，您将需要 root 访问权限才能修改安装文件夹中的文件。尝试使用`sudo pip install boto`.

# xcode - VSTGUI 4.0.1 XCODE 4.5 和 MacOSX 10.8 故障

> ID：13680948
> 
> 赞同：2
> 
> 时间：2012-12-03T10:05:42.007
> 
> 标签：xcode, xcode4.5, vst

那是我第一次使用堆栈溢出，因为我在 MacOSX 10.8 上使用 GUI 开发 VST 插件时遇到问题。我是 mac 开发的新手，我不知道为什么我会因为使用 VSTGUI 4.0.1 编译和链接我的产品而出现以下错误。

```
/Users/christianschragen/Downloads/samples/vst2.x/mac/aeffguieditor.cpp:115:34: 'createDrawContext' is deprecated
/Users/christianschragen/Downloads/samples/vst2.x/mac/aeffguieditor.cpp:182:10: 'TickCount' is deprecated: first deprecated in Mac OS X 10.8
/Users/christianschragen/Downloads/samples/vst2.x/mac/aeffguieditor.cpp:237:27: Conversion from string literal to 'char *' is deprecated
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/cview.cpp
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/cview.cpp:661:22: No matching function for call to 'make_pair'
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/macfileselector.mm
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/macfileselector.mm:239:5: 'beginSheetForDirectory:file:types:modalForWindow:modalDelegate:didEndSelector:contextInfo:' is deprecated
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/macfileselector.mm:244:21: 'runModalForDirectory:file:types:' is deprecated
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/macfileselector.mm:255:5: 'beginSheetForDirectory:file:modalForWindow:modalDelegate:didEndSelector:contextInfo:' is deprecated
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/macfileselector.mm:260:21: 'runModalForDirectory:file:' is deprecated
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewframe.cpp
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewframe.cpp:493:4: Use of undeclared identifier 'GetPortBounds'
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewframe.cpp:524:2: Use of undeclared identifier 'GetPortBounds'
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewframe.cpp:539:24: Use of undeclared identifier 'QDSwapPort'
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewframe.cpp:542:3: Use of undeclared identifier 'QDSwapPort'
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewframe.cpp:634:124: Non-constant-expression cannot be narrowed from type 'CCoord' (aka 'double') to 'CGFloat' (aka 'float') in initializer list
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewframe.cpp:747:13: Enumeration value 'kError' not handled in switch
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewframe.cpp:808:24: Use of undeclared identifier 'NewRgn'
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewframe.cpp:822:5: Use of undeclared identifier 'DisposeRgn'
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewframe.cpp:1016:17: Use of undeclared identifier 'kQDRegionToRectsMsgParse'
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewframe.cpp:1117:37: Use of undeclared identifier 'kQDParseRegionFromTopLeft'
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewoptionmenu.cpp
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewoptionmenu.cpp:107:17: 'UniqueID' is deprecated: first deprecated in Mac OS X 10.8
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewtextedit.cpp
/Users/christianschragen/Downloads/samples/vst2.x/mac/lib/platform/mac/carbon/hiviewtextedit.cpp:111:3: Use of undeclared identifier 'GetFNum' 
```

有什么想法有什么问题吗？

谢谢

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T08:37:07.970

我有一种强烈的感觉，VSTGUI 还不支持 10.8。您应该在 Xcode 构建设置中将目标 SDK 设置为 10.7（或者可能是 10.6），这可能涉及通过 Xcode 从 Apple 下载一个巨大的 DMG。

此外，联系 VSTGUI 开发人员寻求他们的支持可能不会有什么坏处。

# php - php和html表逻辑

> ID：13680950
> 
> 赞同：0
> 
> 时间：2012-12-03T10:05:45.193
> 
> 标签：php

所以我有一个包含数据库值的表：

```
$result=mysql_query("SELECT * FROM database WHERE date = '$period'") or die (mysql_error());
while ($row_result = mysql_fetch_array($result) {
  $article = $row_result['article'];
  ...
  //It shows something like this:

id  |  article |  some more data |
4   |  1234    |  data           |
8   |  654     |  data           |
9   |  654     |  data           | 
```

显示了每一行，但现在我想做的是在每篇文章之后显示另一行，总结一些值，但如果文章编号相同，则在例如这两个之后显示一行。我现在不知道有多少货号是相同的，但是如果它们在表格中一个接一个地显示并且它们具有相同的值，那么我想在它们之后显示一行。

首先我做了这样的事情：

```
 $article2 = "";
 if ($article2 != $article) {
    <td>...</td>
       .....  
 }
 $article2 = $article; 
```

但这对于独特的文章很有用，它在一篇文章之后显示一个额外的行，但是如果我有 5 行与同一篇文章一样，它会在第一篇文章之后显示额外的行。像这样：

```
 id  |  article |  some more data |
    4   |  1234    |  data           |
extra   |  1234    |  sum data       |
    8   |  654     |  data           |
extra   |  654     |  sum data       |
    9   |  654     |  data           | 
```

我需要某种逻辑方面的帮助，以了解额外的行仅显示在每个不同的文章编号之后。我希望你们理解我正在尝试做的事情:) 我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:21:55.520

确保它`$article2="";`在循环之外，如下所示：

```
$article2="";
while ($row_result = mysql_fetch_array($result) {
  $article = $row_result['article'];
  //...
  if ($article2 != ($article || "")) {
    print "<td>...</td>";
    print "  .....  ";
  }
  $article2 = $article;
  //...
} 
```

并且您还使用`!= ""`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:30:31.393

！更新了您的评论。

```
$result=mysql_query("SELECT * FROM database WHERE date = '$period' ORDER BY ABS(machine),shift,id,article ASC");

$currentArticle = 0;
while ($row = mysql_fetch_array($result)) {
    if ($row['article']!=$currentArticle) {  //check1
        if ($currentArticle != 0) { //check2
            //show extra row for article > $currentArticle
            //your query doesnt contain this article, but I guess that is correct?
            $result_kogus = mysql_query("SELECT SUM(amount), SUM(reject), SUM(work) FROM database WHERE date = '$periood' AND machine = '".$row['machine']."' AND order = '".$row['order']."'") or die (mysql_error());

            //print row
        }

        $currentArticle = $row['article'];
    }
    //show regular row
}

if ($currentArticle != 0) { //check 3 > print summary after last row
    $result_kogus = mysql_query("SELECT SUM(amount), SUM(reject), SUM(work) FROM database WHERE date = '$periood' AND machine = '".$row['machine']."' AND order = '".$row['order']."'") or die (mysql_error());

    //print row
}

//What would happen on your example data:
//id  |  article |  some more data |
//4   |  1234    |  data           |
//8   |  654     |  data           |
//9   |  654     |  data           |

//round 1, article 1234
//check1 = true (1234!=0)
//check2 = false (0!=0)
//currentArticle is changed to 1234
//regular row printed

//round2, article 654
//check1 = true (654!=1234)
//check2 = true (1234!=0)
//query is executed
//summary is printed for 1234
//currentArticle is changed to 654
//regular row printed

//round3, article 654
//check1 = false (654!=654)
//regular row printed

//loop ends

//check3 = true (654!=0)
//query is executed
//summary is printed for 654 
```

# wpf - 将可见性绑定到 Text.Length

> ID：13680951
> 
> 赞同：3
> 
> 时间：2012-12-03T10:05:51.117
> 
> 标签：wpf, xaml

我实现了一个小的视觉指示器（只是一个带边框的文本块），如果目前没有要显示的文本，它应该被隐藏。文本绑定到`Indicator`属性，数据上下文似乎设置正确。

到目前为止我得到的是这个（指示文本出现，隐藏/显示不起作用）：

```
<Border>
    <Border.Style>
        <Style TargetType="{x:Type Border}">
            <Setter Property="Visibility" Value="Visible"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=Indicator.Length}" Value="0">
                    <Setter Property="Visibility" Value="Hidden"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Border.Style>
    <TextBlock Text="{Binding Indicator}" />
</Border> 
```

我的问题是，如果文本长度为零，则元素*不会隐藏。*

你发现我的错误了吗？

指示器是相应视图模型的一部分：

```
public string Indicator
{ get; set;} 
```

* * *

**更新**

如果我将上面的属性更改为此，它会起作用：

```
public const string IndicatorPropertyName = "Indicator";
private string _indicator = "";
public string Indicator
{
    get
    { return _indicator;}

    set
    {
        if (_indicator == value) { return;}

        RaisePropertyChanged(IndicatorPropertyName);
    }
} 
```

**如果我引发 PropertyChanged 事件，为什么它只起作用？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T10:37:37.830

我认为顾名思义，触发器仅在事件发生时执行或检查其状态。在 DataTrigger 的情况下，它是`PropertyChanged`interface的 -Event `INotifyPropertyChanged`。

如果不引发事件，DataTrigger 不知道他必须检查绑定以及值是否满足触发条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T11:36:07.940

您的源绑定是`Indicator`一个普通的 CLR 属性。

WPF 在很大程度上基于数据绑定。当绑定源更改时，绑定对象会自动更新，因为在后台会引发更改通知。当绑定到依赖属性（即只有 WPF 才能理解的属性类型）时，您已经为绑定对象内置了更改通知。不需要额外的工作。

您也可以绑定到普通的 CLR 属性，但在这种情况下，绑定对象没有内置的更改通知。您需要以编程方式实现更改通知。这是通过引发`PropertyChanged`事件来完成的。绑定到该 CLR 属性的对象将收到值更改通知，并将自行更新。

简而言之，如果您希望 CLR 属性更新目标绑定，则需要实现`INotifyPropertyChanged`并引发 PropertyChanged 事件。

# android - Green DAO vs ORM lite vs Active Android

> ID：13680954
> 
> 赞同：60
> 
> 时间：2012-12-03T10:06:09.320
> 
> 标签：android, ormlite, greendao, activeandroid, droidparts

哪个是适用于 Android 的最佳 ORM 工具？

我看到 ORMlite 和 ActiveAndroid 是讨论最多的，我的一个朋友建议我使用 GreenDAO。因此，正在寻找一些可以帮助我进行决策的知识资源？

我希望判断的功能是免费提供的（开源）、良好的文档、活跃的论坛、可用的稳定版本等，这些都是开发人员所需要的。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-03T11:28:10.453

我建议 ORMlite 它的开源免费软件和良好的文档也支持 java 和 android。

它具有良好的开发人员支持和许多在 ORMlite 上运行的应用程序（包括我开发的 :)）。

查看ORMLite 和 Green DAO 的[比较以供参考。](http://software-workshop.eu/content/comparing-android-orm-libraries-greendao-vs-ormlite)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-25T16:56:20.480

ORMLite 和 GreenDAO 之间的区别在于注释的使用。虽然 ORMLite 使用注释，但 GreenDAO 没有，如此处[所述](http://greendao-orm.com/documentation/faq/)。

ORMLite 使用的注释依赖于反射，这可能会对性能产生负面影响，尤其是在较慢的 Android 设备上。看看比较 ORMLite 和 GreenDAO 的基准会很有趣。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-30T20:33:43.357

我使用的许多库的一个问题是它们要求它们的初始化发生在 android.app.Application.onCreate() 中。我更喜欢库允许我在辅助线程、服务中或在我完成显示用户界面之后进行初始化。

我相信 Active Android 有这个“问题”，而 ORMLite 没有。我不确定GreenDAO。

这是否真的是一个问题取决于您的应用程序，但我会注意到[onCreate() 的文档](http://developer.android.com/reference/android/app/Application.html#onCreate%28%29)说“实现应该尽可能快（例如使用状态的延迟初始化），因为在此函数中花费的时间直接影响在流程中启动第一个活动、服务或接收器的性能。”

与此无关，我注意到 ActiveAndroid 使用注释，如 ORMlite，但与使用代码生成的 GreenDAO 不同。

# java - KDC - 我们从哪里得到服务器？

> ID：13680959
> 
> 赞同：2
> 
> 时间：2012-12-03T10:06:21.620
> 
> 标签：java, active-directory, ldap, kerberos, gssapi

我正在尝试使用 java 执行 kerberos 身份验证。

我启用了调试。

当尝试使用 tgt 连接到 LDAP 时，我得到了（服务器名称已更改）：

```
getRealmFromDNS: trying srv1.myserver.com
getRealmFromDNS: trying srv2.myserver.com
getRealmFromDNS: trying srv1.myserver.com
getRealmFromDNS: trying srv2.myserver.com
Found ticket for user@SUB.MYSERVER.COM to go to krbtgt/SUB.MYSERVER.COM@SUB.MYSERVER.COM expiring on Sat Dec 01 02:11:14
Entered Krb5Context.initSecContext with state=STATE_NEW
Service ticket not found in the subject
getRealmFromDNS: trying srv1.myserver.com
getRealmFromDNS: trying srv2.myserver.com
>>> Credentials acquireServiceCreds: same realm
default etypes for default_tgs_enctypes: 16 3 1.
>>> CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType
>>> EType: sun.security.krb5.internal.crypto.ArcFourHmacEType
>>> KdcAccessibility: reset
getKDCFromDNS using UDP
>>> KrbKdcReq send: kdc=server123.myserver.com. UDP:88, timeout=30000, number of retries =3, #bytes=1542
>>> KDCCommunication: kdc=server123.myserver.com. UDP:88, timeout=30000,Attempt=1, #bytes=1542
SocketTimeOutException with attempt: 1
>>> KDCCommunication: kdc=server123.myserver.com. UDP:88, timeout=30000,Attempt=2, #bytes=1542
SocketTimeOutException with attempt: 2
>>> KDCCommunication: kdc=server123.myserver.com. UDP:88, timeout=30000,Attempt=3, #bytes=1542
SocketTimeOutException with attempt: 3
>>> KrbKdcReq send: error trying server123.myserver.com.
java.net.SocketTimeoutException: Receive timed out
        at java.net.DualStackPlainDatagramSocketImpl.socketReceiveOrPeekData(Native Method)
        at java.net.DualStackPlainDatagramSocketImpl.receive0(Unknown Source)
        at java.net.AbstractPlainDatagramSocketImpl.receive(Unknown Source)
        at java.net.DatagramSocket.receive(Unknown Source)
        at sun.security.krb5.internal.UDPClient.receive(Unknown Source)
        at sun.security.krb5.KdcComm$KdcCommunication.run(Unknown Source)
        at sun.security.krb5.KdcComm$KdcCommunication.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at sun.security.krb5.KdcComm.send(Unknown Source)
        at sun.security.krb5.KdcComm.send(Unknown Source)
        at sun.security.krb5.KdcComm.send(Unknown Source)
        at sun.security.krb5.KrbTgsReq.send(Unknown Source)
        at sun.security.krb5.KrbTgsReq.sendAndGetCreds(Unknown Source)
        at sun.security.krb5.internal.CredentialsUtil.serviceCreds(Unknown Source)
        at sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(Unknown Source)
        at sun.security.krb5.Credentials.acquireServiceCreds(Unknown Source)
        at sun.security.jgss.krb5.Krb5Context.initSecContext(Unknown Source)
        at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)
        at sun.security.jgss.GSSContextImpl.initSecContext(Unknown Source)
        at com.sun.security.sasl.gsskerb.GssKrb5Client.evaluateChallenge(Unknown Source)
        at com.sun.jndi.ldap.sasl.LdapSasl.saslBind(Unknown Source)
        at com.sun.jndi.ldap.LdapClient.authenticate(Unknown Source)
        at com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)
        at com.sun.jndi.ldap.LdapCtx.<init>(Unknown Source)
        at com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)
        at com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)
        at com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)
        at com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)
        at javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
        at javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
        at javax.naming.InitialContext.init(Unknown Source)
        at javax.naming.ldap.InitialLdapContext.<init>(Unknown Source)
        at myApp.JndiAction.performJndiOperation(MyTest.java:577)
        at myApp.JndiAction.run(MyTest.java:551)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Unknown Source)
        at myApp.MyTest.main(MyTest.java:489)
>>> KdcAccessibility: add server123.myserver.com. 
```

我的回答是：

1.  从哪里获得 kdc 服务器 (server123.myserver.com)？

2.  我可以改变它吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:18:51.370

如果您不在 Windows 平台上，请搜索 krb5.conf 文件。有一个`[realms]`部分提供了域和关联的 KDC。

```
[realms]
        YOURDOMAIN.com = {
                kdc = dc1.yourdomain.com
        } 
```

正如 Michael-O 所指出的，在 Windows 平台上，存在特定的 DNS 记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:51:55.093

这是来自 DNS（`SRV`Kerberos 的记录）。如果可能，请您的管理员检查故障服务器并更正 DNS 条目。这不是 Java 问题。

# asp.net - UpdatePanel 中带有 TextBoxes 的 ListView 在 OnTextChanged 之后不返回值

> ID：13680962
> 
> 赞同：0
> 
> 时间：2012-12-03T10:06:31.340
> 
> 标签：asp.net, ajax, listview, textbox, updatepanel

我有一个带有**TextBoxes的****ListView**。当我在 TextBox 中输入一个值时，AI 希望在 TextBox B 中显示一个计算值。我在 CodeBehind 中执行此操作。在我将 ListView 放在**UpdatePanel**之前，这很有效。

 ****在**OnTextChanged**上，我想做一些计算/数据库操作（在下面的示例中，我只是将插入的值乘以 2）。由于我不想在每次输入值时都执行完整的**PostBack ，因此我插入了一个 UpdatePanel。**也因为我想保持在相同的滚动位置。

**我第一次**输入一个值时，OnTextChanged 方法会做所有事情，但**第二次**UpdatePanel 似乎删除了所有计算值并且只返回第一个插入的值。

在调试模式下一切正常，在 IE8 中也是如此，但在 FireFox、Chrome 或 IE9 中则不行。我假设我没有像我应该那样使用 UpdatePanel？

页面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master" AutoEventWireup="true" CodeFile="Testing.aspx.cs" Inherits="Sales_NewOrderPOS" ClientIDMode="AutoID"%>

<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" Runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server">

<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>

<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>

 <asp:ListView ID="ListView1" runat="server" DataSourceID="ObjectDataSource1">
    <LayoutTemplate>
        <table>
        <asp:PlaceHolder runat="server" ID="itemPlaceholder"></asp:PlaceHolder>
        </table>
    </LayoutTemplate>

    <ItemTemplate>
        <tr>
            <td>
                <asp:Label ID="lblItemNo" Text='<%# Eval("ItemNo") %>'  runat="server"></asp:Label>
            </td>
            <td>
                <asp:Label ID="lblItemDecription" Text='<%# Eval("ItemDescription") %>'  runat="server"></asp:Label>
            </td>
            <td>
                <asp:TextBox ID="txtPalletQuantity" runat="server" Width="30px" OnTextChanged="TextChangedPallet" AutoPostBack="true" ></asp:TextBox>
            </td>
            <td>
                <asp:TextBox ID="txtUnitQuantity" runat="server" Width="30px"></asp:TextBox>
            </td>
        </tr> 
   </ItemTemplate>
</asp:ListView>

</ContentTemplate>
</asp:UpdatePanel>

<asp:ObjectDataSource ID="ObjectDataSource1" runat="server" SelectMethod="SP_SelectItems" TypeName="ItemClass">
</asp:ObjectDataSource>

</asp:Content> 
```

代码背后：

```
protected void Page_Load(object sender, EventArgs e)
{

}

protected void TextChangedPallet(object sender, EventArgs e)
{
    TextBox txtPalletQuantity = (TextBox)sender;
    ListViewItem item = (ListViewItem)txtPalletQuantity.NamingContainer;
    TextBox txtUnitQuantity = (TextBox)item.FindControl("txtUnitQuantity");
    txtUnitQuantity.Text = ((Convert.ToDecimal(txtPalletQuantity.Text) * 2)).ToString();
} 
```****

# cloud - 我可以使用 RMI 来测试云调度算法吗？

> ID：13680963
> 
> 赞同：0
> 
> 时间：2012-12-03T10:06:34.337
> 
> 标签：cloud, rmi, scheduling, simulator

我有一个新的-small-提出的云调度算法，我需要模拟云环境并测试这个作业调度算法。

我的医生为我建议了 RMI，但她不确定我如何收集和分析结果。

我的问题是：

*   RMI 是一个很好的解决方案来完成我的工作吗？
*   由于 OPNET 是我买不起的东西，你有没有推荐的好模拟器？

希望能找到帮助..谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:32:36.733

由于您有一位教授，我猜您是在学术环境中工作，在这种情况下，大概一个开源工具会很有用——您看过[CloudSim](http://www.cloudbus.org/cloudsim/)吗？我不知道它是否完全符合您的要求，但如果它是开源的，至少您可以根据需要对其进行调整。

至于 RMI，它在一定程度上取决于您计划收集哪些数据以及如何收集 - 我可能会考虑在模拟期间简单地记录日志，然后在中央某处整理日志，以便可以通过您想要的任何工具对其进行分析。这不会为您提供实时反馈，但可以让您以多种不同的方式评估您的数据，从长远来看，这可能会提供更多信息。

# .net - WPF 应用程序 .net 4.0 - 4.5 中的 OCX

> ID：13680967
> 
> 赞同：1
> 
> 时间：2012-12-03T10:06:50.310
> 
> 标签：.net, wpf, .net-4.0, .net-4.5, ocx

我必须在 WPF 应用程序中使用 ocx。如果我在 .net 框架 4.5 下创建一个新项目，它可以完美运行。

但是，如果我尝试在任何其他 .net 框架中创建应用程序，VisualStudio 会给出错误“类未注册（来自 HRESULT 的异常：0x80040154（REGDB_E_CLASSNOTREG））”我试图用 regsvr32 修复它，但它仍然不起作用。

我该如何解决这个问题，以便我可以制作一个 .net 4.0 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:24:15.613

好的，我解决了这个问题，我唯一要做的就是将调试/发布模式更改为 x86。

# c# - SharePoint 2010：Linq to Objects，检查用户是否在另一个列表中并使用当前项目

> ID：13680972
> 
> 赞同：1
> 
> 时间：2012-12-03T10:07:08.173
> 
> 标签：c#, linq, sharepoint-2010

我的用例：我有 2 个 SPList，让我们称一个事件，其他与会者。我想要什么：根据当前用户显示“注册”或“取消注册”按钮（在事件列表显示的可视 Web 部件中）可以位于当前事件的与会者列表中。因此，如果当前用户注册了该事件，page_load 应该显示“取消注册”按钮或“注册”按钮，如果他没有。

我通过以下方式获取当前项目

`currEventItem = (SPListItem)SPContext.Current.Item;`

而当前用户通过

`currentUser = website.CurrentUser; userString = currentUser.ID.ToString() + ";#" + currentUser.LoginName.ToString();`

现在我想使用 System.Linq (Linq to Objects) 来执行以下查询 (pseudo-sqlsyntax)：

`select * from AttendeeList where userString equals attendeeList.Name AND currEventItem.Title equals AttendeeList.EventTitle`

AttendeeList 中的 Name-Field 是一个用户（个人或组，这里使用德语版本，所以我希望这是实际的翻译）字段。

我的问题和实际问题：我没有让 linq 语法起作用。有人可以帮我吗？会很好！

编辑：稍后，我想根据结果是 NULL 还是非 NULL 显示相应的按钮。希望这有效吗？如果这不是要走的路，将不胜感激另一个解决方案:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:12:23.747

这将为您提供真或假，您可以将其应用于您的复选框？：

```
Boolean exists = (AttendeeList.Where(m=> m.Name == userString)
                 .Where(m=> m.EventTitle == currEventItem.Title).Count() > 0); 
```

# django - 注册期间在 Django 中临时上传个人资料图片？

> ID：13680974
> 
> 赞同：2
> 
> 时间：2012-12-03T10:07:14.853
> 
> 标签：django, django-registration, django-profiles, django-uploads

在 Django 应用程序中，在注册过程中，我希望用户能够看到他/她选择的个人资料图像，而不是仅仅看到纯粹使用 django 表单完成的路径（例如，我想查看[pinterests 注册表单](http://pinterest.com/join/register/)） . 我认为它应该涉及一些 ajax 上传，并且应该暂时存储在某个地方，因为即使上传了个人资料图片，用户也可能选择不继续注册，在这种情况下，应该删除上传的图片。

我想知道处理这个的最好方法是什么？您可以指出任何例子吗？

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:05:10.783

**选项1**

您可以使用 HTML5 FileAPI 在用户上传之前[显示用户选择的图像的缩略图。](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications#Example.3A_Showing_thumbnails_of_user-selected_images)

**选项 2**

您可以使用 AJAX 上传文件，然后发回缩略图供他们预览

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:11:15.133

您是正确的，需要 AJAX 上传。

无论上传是临时的还是永久的，在您的实施中事情不会发生太大变化。在这两种情况下，您都需要将图像上传到 Web 服务器上的目录。在临时情况下，您可以在短时间内删除它。

这是一个 Django AJAX 上传器：[https ://github.com/GoodCloud/django-ajax-uploader](https://github.com/GoodCloud/django-ajax-uploader)

# html - 如何在 HTML 页面中加载 SVG 节点？

> ID：13680976
> 
> 赞同：2
> 
> 时间：2012-12-03T10:07:16.950
> 
> 标签：html, svg

我有一个 HTML5 页面和多个声明 SVG 图像的节点（元素）的文件。文件如下所示：

```
<g class="background">
    <g class="bg_path_a">
        <path d="M0 40 L21 40" />
    </g>
    <g class="bg_path_b">
        <path d="M42 21 L63 0 100 0 M23 40 L48 15" />
    </g>
    <g class="bg_path_c">
        <path d="M53 40 L100 40 M21 40 L53 40" />
    </g>
    <g class="bg_lockpath">
        <path d="M21 40 L33 40" />
    </g>
    <g class="bg_label">
        <rect x="0" y="20" width="10" height="10" />
    </g>
</g> 
```

没有 xmlns，DTD 被声明，它们应该保持这样。现在我希望能够加载这些文件，但在 HTML5 页面中将它们显示为 SVG 图像，所有这些都应该在客户端运行，不允许服务器端脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:45:19.640

```
<script>
function createXMLHttpRequest()
{
  if (window.XMLHttpRequest) // Firefox and others
  {
   return new XMLHttpRequest();
  }
  else if (window.ActiveXObject) // Internet Explorer
  {
    return new ActiveXObject("Microsoft.XMLHTTP");
  }
  else
  {
    alert("XMLHttpRequest not supported");
    return null;
  }
}

function fixSVG()
{
    var svgElement, xmlHTTP, svgDoc
    xmlHTTP = createXMLHttpRequest();
    xmlHTTP.open("GET", "BadSVG.svg", false);
    xmlHTTP.send();
    svgDoc = xmlHTTP.responseText;
    svgElement = document.getElementById("yuck");
    svgElement.outerHTML = "<svg xmlns='http://www.w3.org/2000/svg'" +
            " width='" + svgElement.width + 
            "' height='" + svgElement.height + "'>" +
            svgDoc + "</svg>";
}
</script>
[...]
<body onLoad="fixSVG()">
[...]
<embed id="yuck" src="" type="image/svg+xml"
    width="500" height="500" wmode="transparent"/> 
```

仅在 Firefox 中测试...

如您所示，如果您的文件很小，则文件的同步加载应该不是问题。

[编辑] 小改进：避免两次加载文件（标签`src`中为空），并在声明中使用元素的尺寸。`embed``embed`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:58:35.023

主要问题似乎是将 SVG 片段放入 SVG 命名空间。您可以使用 XSLT 来“完成” SVG（添加周围的 svg 元素）并将所有内容放在正确的命名空间中：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns="http://www.w3.org/2000/svg" version="1.0">

  <!-- The dimension can be supplied using a parameter.
       This defaults to 100%. -->
  <xsl:param name="width"  select="'100%'"/>
  <xsl:param name="height" select="'100%'"/>

  <xsl:template match="/">
    <svg version="1.1" width="{$width}" height="{$height}">
      <xsl:apply-templates/>
    </svg>
  </xsl:template>

  <xsl:template match="*">
    <xsl:element name="{local-name()}" namespace="http://www.w3.org/2000/svg">
      <xsl:apply-templates select="node()|@*"/>
    </xsl:element>
  </xsl:template>

  <xsl:template match="@*|text()">
    <xsl:copy-of select="."/>
  </xsl:template>
</xsl:stylesheet> 
```

您必须使用 AJAX 加载样式表和 SVG 片段

使用 AJAX 获取 SVG 片段，例如：

```
var loadXML = function(fileName,mime) {
  xmlHttpRequest = new XMLHttpRequest()
  xmlHttpRequest.open("GET",fileName,false);
  xmlHttpRequest.send("");
  return xmlHttpRequest.responseXML;
}
var svgSnippet = loadXML(snippetURL,"image/svg+xml")
var xslt = loadXML(xsltURL,"application/xslt+xml")
var xsltProcessor = new XSLTProcessor();
xsltProcessor.importStylesheet(xslt);
// You can override the default width/height parameters here
xsltProcessor.setParameter(null,"width","150px")
xsltProcessor.setParameter(null,"width","90px")
// In the document there must be some element to append the SVG
documentGetElementById("svgContainer").appendChild(xsltProcessor.transformToFragment(svgSnippet,document).firstChild) 
```

这一切都未经测试，但也许可以开始。如果您还需要 XLink 命名空间，这当然是不完整的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T10:20:24.447

如果您乐于使用 jQuery，您可能需要查看[Keith Wood 的 SVG 插件](http://keith-wood.name/svg.html)。我以前用过它，它非常通用。

如果您查看文档页面上的“加载”选项卡，它描述了如何加载外部文件并将其添加到现有 SVG。

# c# - 将标头信息添加到我的 Web 服务引用请求

> ID：13680981
> 
> 赞同：1
> 
> 时间：2012-12-03T10:07:32.147
> 
> 标签：c#, .net, web-services

我想将标头信息添加到我使用 Visual Studio 2012 中的基本向导创建的 Web 服务中。

我只需单击“添加服务参考”，提供我的链接，VS 自己创建了代码。我必须使用哪个类来传递我的请求的标头信息？我是否必须覆盖 VS 自动创建的代码？

还有一点需要注意：如果您知道另一种向 Web 服务添加标头的方法，我也想使用它。我不必使用自动创建的代码。（尽管使用它们很方便。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-05T09:46:28.033

.Net Framework 在后台自行创建和修补标头，所以我应该做的是在 web.config 上添加用户名密码标头值，而不是将其绑定到帖子本身。

```
<client>
    <endpoint address="http://ServiceAdd/FService" binding="basicHttpBinding"
     bindingConfiguration="FServiceSoapBinding" contract="MyReference.MService_"
     name="FServicePort" >
        <headers>
            <Account>
                <username>user</username>
                <password>password</password>
            </Account>
        </headers>
    </endpoint>
</client> 
```

# google-chrome-extension - chrome 扩展：在内容脚本和后台脚本之间共享一个对象

> ID：13680985
> 
> 赞同：8
> 
> 时间：2012-12-03T10:07:46.003
> 
> 标签：google-chrome-extension

我正在开发一个在内容脚本中使用 jQuery/Zepto 的 chrome 扩展。现在，该扩展程序旨在在每个网站上运行，这意味着用户打开的每个选项卡上都会加载 jQuery/Zepto 的副本。

有没有办法在各种内容脚本之间共享 jQuery/Zepto 对象？

我知道内容脚本可以与后台脚本通信。我希望能够让后台脚本能够访问 jQuery 对象并返回对它的引用，以及对每个内容脚本的引用。但我意识到只有 JSON 消息可以在内容和后台脚本之间传递。

有什么方法可以实现我想要的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T13:40:06.550

不同选项卡中的内容脚本也无法访问彼此的 JavaScript 对象。

Chrome 通过[`chrome.runtime.sendMessage`](https://developer.chrome.com/extensions/runtime#method-sendMessage)+支持内容脚本和/或背景页面之间的通信[`.onMessage`](https://developer.chrome.com/extensions/runtime#event-onMessage)。因为所有消息都是 JSON 序列化的，所以 JavaScript 对象不能以这种方式“泄露”到其他上下文。

所以：不，您不能与其他选项卡（内容脚本中的）共享对象，例如 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:38:15.207

[内容脚本](https://developer.chrome.com/extensions/content_scripts.html)的[执行环境](https://developer.chrome.com/extensions/content_scripts.html#execution-environment)确保内容脚本可以相互通信

**前任：**

```
"content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["myscript.js","myscript1.js"]
    }
  ]
} 
```

注入内容脚本的[Individual DOM Environment](https://developer.chrome.com/extensions/content_scripts.html#host-page-communication)确保可以访问 的所有内容*（函数、变量）*，但这会阻止两个[Individual DOM Environment](https://developer.chrome.com/extensions/content_scripts.html#host-page-communication)的通信。`["myscript.js","myscript1.js"]``myscript1.js`*`myscript.js`*

 *[话虽如此，您在内容脚本](https://developer.chrome.com/extensions/content_scripts.html)中看到的什么限制\要求要求**[消息传递](https://developer.chrome.com/extensions/messaging.html)**需要[后台页面](https://developer.chrome.com/extensions/background_pages.html)来访问[注入页面的 DOM 的](https://developer.chrome.com/extensions/content_scripts.html#host-page-communication)要求？

请详细说明*

# macos - Mac 上的 Monodevelop: `Mono.framework MDK is missing`

> ID：13680987
> 
> 赞同：3
> 
> 时间：2012-12-03T10:07:48.400
> 
> 标签：macos, monodevelop, monomac, dmg

在 Monodevelop 中，如果启用该`Include the Mono runtime in the application bundle`复选框，则会在构建时收到此错误：

```
Merging Mono Runtime into app bundle
/Applications/MonoDevelop.app/Contents/MacOS/lib/monodevelop/AddIns/MonoDevelop.MonoMac/mmp -nolink "-minos=10.6" -o "/Users/Kizumi/src/CmisSync/SparkleShare/Mac/bin/Debug" -n "SparkleShare" -a "/Users/Kizumi/src/CmisSync/bin/SparkleLib.dll" -a "/Users/Kizumi/src/CmisSync/bin/SparkleLib.Cmis.dll" -a "/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.dll" -a "/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Xml.dll" -a "/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Core.dll" -a "/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Drawing.dll" -a "/Applications/MonoDevelop.app/Contents/MacOS/lib/monodevelop/AddIns/MonoDevelop.MonoMac/MonoMac.dll" -a "/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Net.dll" -a "/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/Mono.Posix.dll" "/Users/Kizumi/src/CmisSync/SparkleShare/Mac/bin/Debug/SparkleShare.exe"
Mono.framework MDK is missing. Please install the MDK for your Mono.framework version from http://mono-project.com/Downloads
mmp exited with code 252 
```

我遵守[http://www.mono-project.com/MonoMacPackager](http://www.mono-project.com/MonoMacPackager)的所有要求：

*   在 Snow Leopard 上，我安装了 XCode 3.2.6（在 Snow Leopard 上运行的最后一个 XCode 版本），最低要求是 XCode 3.2.5
*   `Application Tools`自 3.2.6 起似乎包含在 XCode 中，所以我不需要安装另一个包。
*   我安装了 Mono 2.10.9
*   我安装了 Monodevelop 3.0.5
*   我在 Monodevelop 中启用了 MonoMac 3.0.5

我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:11:55.743

问题是尽管有 Monodevelop 我只有`Mono MRE`.

正如错误消息所建议的那样，解决方案是安装`Mono MDK`，可以在此处的 MRE 旁边找到：[http ://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html)

# android - 如何在多个活动中显示相同的对话框？

> ID：13680992
> 
> 赞同：1
> 
> 时间：2012-12-03T10:08:02.387
> 
> 标签：android, dialog, android-asynctask

我在活动中创建了一个对话框。使用异步任务，我将定期显示该对话框。当我移动到另一个活动时是否可以显示对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:34:54.803

我过去以两种不同的方式做到了这一点。

1）创建一个用作对话框的布局（在每个活动布局中导入并隐藏），我在需要时显示（您也可以创建一个“空”活动，仅弹出该对话框并且如果您想要消息。

2）创建一个CustomDialog类并使用它（我用它来处理自定义字体，但我只会在这段代码中放一次）。

```
//main Activity:
     DialegError da = new DialegError(this);
     da.crearDialeg("APP ERROR", "this is an error"); 
```

* * *

```
//Error class
public class DialegError {
    private Activity a = null;

    public DialegError(Activity activity){
            a=activity;
    }

    /**
     * Default NO-MESSAGE errorDialog
     */
    public void crearDialeg(String titol){
        AlertDialog dialog = new AlertDialog.Builder(a)
            .setTitle( titol )
//          .setIcon(R.drawable.)
            .setPositiveButton( a.getString(R.string.button_aceptar), new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    return;
                }
            })
            .show();
    }

    /**
     * Default errorDialog
     */
    public void crearDialeg(String titol, String cos){
        AlertDialog dialog = new AlertDialog.Builder(a)
            .setTitle( titol )
            .setMessage( cos )
//          .setIcon(R.drawable.)
            .setPositiveButton( a.getString(R.string.button_aceptar), new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    return;
                }
            })
            .show();

     //Personalized font. No way to deal with the title text.
     Typeface font=Typeface.createFromAsset(a.getAssets(),"fonts/font_name.ttf");
     TextView textView = (TextView)dialog.findViewById(android.R.id.message);
     textView.setTypeface(font);
     textView =  (TextView)dialog.findViewById(android.R.id.button1);
     textView.setTypeface(font);
    }

    /**
     * Error Dialog that closes the invoker activity.
     */
    public void crearDialegError(String titol, String cos, int err){
        final Activity activitat = a;
        final int error = err;
        AlertDialog dialog = new AlertDialog.Builder(activitat)
            .setTitle( titol )
            .setMessage( cos )
//          .setIcon(R.drawable.)
            .setPositiveButton( activitat.getString(R.string.button_aceptar), new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    activitat.setResult(error, new Intent());
                    activitat.finish();
                }
            })
            .show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:31:34.953

您可以制作一个显示对话框的按钮，在事件 onclick 显示对话框的任何代码时，您可以设置按钮单击周期。

```
public void getRunningClick(){
     new Handler().postDelayed(new Runnable() {
            public void run() {
                  //your code showing dialog
            }
        },(2*1000));
} 
```

希望对你有帮助

# actionscript-3 - 该属性在 validateProperties 中仍然具有旧值

> ID：13680993
> 
> 赞同：0
> 
> 时间：2012-12-03T10:08:03.570
> 
> 标签：actionscript-3, apache-flex, flex3, itemrenderer

我有一个自定义渲染器（继承自`AdvancedDataGridItemRenderer`），并且我正在覆盖`validateProperties`并使用该`width`属性的值，但我每次都得到旧值！提交属性后不`validateProperties`应该执行（我正在调用超级）？这是我的代码：

```
public override function validateProperties():void
{
    super.validateProperties();
    if ((AdvancedDataGrid(listData.owner).columns[listData.columnIndex].
            showDataTips)&&(textWidth>width))
        toolTip=listData.label;
    else toolTip=null;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T21:21:53.323

您应该在项目渲染器的数据设置器中执行此操作：

```
public override function set data(val:Object):void{
    super.data=val;
    if ((AdvancedDataGrid(listData.owner).columns[listData.columnIndex].
                showDataTips)&&(textWidth>width))
            toolTip=listData.label;
        else toolTip=null;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:50:14.993

最好覆盖宽度设置器或处理“textFieldWidthChange”事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T18:54:24.507

我解决了。诀窍是`validateSize`用于`width`属性。`validateProperties`用于不属于任何其他有专用`validateX`功能的组的属性（例如`validateSize`、`validateList`等）。

# android - 在android自定义适配器中更新图像

> ID：13680994
> 
> 赞同：0
> 
> 时间：2012-12-03T10:08:05.520
> 
> 标签：android, android-listview, android-arrayadapter, custom-adapter

我需要更新自定义适配器中的第三个图像，我尝试使用 getView 方法但没有成功

```
RelativeLayout rl = (RelativeLayout) rowView.getParent();
ImageView image = (ImageView) rowView.findViewById(R.id.photo);
myCustomAdapter.getView(2, image, rl);              
image.setImageBitmap(bitmap);
myCustomAdapter.notifyDataSetChanged(); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:21:52.950

`getView()`是一个`abstract`类（即在类中没有实现`Adapter`，您需要实现它以更改`View`从适配器返回以填充`View`）。您应该在自定义适配器中实现它并检查该位置值以更改图像。

基本上，每次您`Adapter`从数据中获取一个项目时会发生什么，将其传递给将在该行中使用的数据`getView`填充。`View`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:09:18.410

```
//ListView list
View view = list.getChildAt(position);

((ImageView)view.findViewById(R.id.list_image)).setImageBitmap(bitmap); 
```

R.id.list_image 是 xml 中定义的自定义列表行中图像的 ID。

虽然这是一个临时解决方案，因为当列表滚动时，此项目稍后将由您的自定义适配器重绘。为此，您需要更改提供给自定义适配器的数组以设置项目。为此，您可能需要 Uri。

# c# - 将 SharpKit 的 JsObject 翻译成 TypeScript

> ID：13680996
> 
> 赞同：0
> 
> 时间：2012-12-03T10:08:14.120
> 
> 标签：c#, javascript, typescript

我想知道如何以最好的方式`SharpKit.JavaScript.JsObject`翻译`TypeScript`。

如果我有：

```
JsObject<string, bool> vars = new JsObject<string, bool>(); 
```

我将其翻译为：

```
var vars: { [key: string]: bool; } = {}; 
```

但是当我有这些时我很困惑：

```
JsObject<string> vars = new JsObject<string>(); 
```

和：

```
JsObject vars = new JsObject(); 
```

任何人都可以帮助我吗？

**[编辑]**
我猜是

```
JsObject<string> vars = new JsObject<string>(); 
```

只是？？？

```
var vars: { [key: string]: Object; } = {}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T01:22:39.670

`var vars: { [key: string]: Object; } = {};`

除非您打算在对该对象的成员进行任何访问期间强制进行强制转换，否则此代码可能应该是：

`var vars: { [key: string]: any; } = {};`

这实际上只是另一种说法

`var vars = {};`