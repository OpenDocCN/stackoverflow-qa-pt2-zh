# StackOverflow 问答 13579000-13579999

# sorting - “赋值中的 nonL 值”错误 C++ 对链表进行排序

> ID：13579001
> 
> 赞同：0
> 
> 时间：2012-11-27T07:03:35.463
> 
> 标签：sorting, compiler-errors, linked-list

嘿伙计们，我正在尝试对链接列表进行排序，但遇到了这个错误的问题，我不明白你们是否可以提供帮助……该错误仅发生在我的 if 语句中的 3 行中……我在下面标记了它们。

```
void MovieInventory::sortInventory()
{

MovieNode *first;
MovieNode *second;
MovieNode *temp;
    Movie m;
first = movieList;

while (first != NULL)
{
    second = first->next;
    while (second!=NULL)
    {
        if (first->m.getSku() < second->m.getSku() )
                {
            temp->m.getSku()=first->m.getSku(); //error 
            first->m.getSku()=second->m.getSku(); //error
            second->m.getSku()=temp->m.getSku(); //error
            delete temp;
                }
        second = second->next;
    }
    first = first->next;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:19:31.377

L 值是您可以为其分配值的东西。在您的示例中，您不能为`m.getSku()`调用的返回值赋值，这是编译器抱怨的。

我相信你的意思是写这样的东西：

```
if (first->m.getSku() < second->m.getSku() )
            {
        temp->m.setSku(first->m.getSku());
        first->m.setSku(second->m.getSku());
        second->m.setSku(temp->m.getSku());
        delete temp;
            } 
```

这当然取决于你对`Movie`虽然的定义。

# python - 等到几个greenlets之一完成

> ID：13579005
> 
> 赞同：1
> 
> 时间：2012-11-27T07:03:51.940
> 
> 标签：python, gevent, greenlets

我有两个函数从两个不同的连接接收数据，我应该在从其中一个连接获得结果后关闭这两个连接。

```
def first():
    gevent.sleep(randint(1, 100))  # i don't know how much time it will work
    return 'foo'

def second():
    gevent.sleep(randint(1, 100))  # i don't know how much time it will work
    return 'bar' 
```

然后我生成每个函数：

```
lst = [gevent.spawn(first), gevent.spawn(second)] 
```

`gevent.joinall`阻塞当前的greenlet，直到两个greenlet`lst`都准备好。

```
gevent.joinall(lst)  # wait much time
print lst[0].get(block=False)   # -> 'foo'
print lst[1].get(block=False)   # -> 'bar' 
```

我想等到第一个或第二个greenlet准备好：

```
i_want_such_function(lst)  # returns after few seconds
print lst[0].get(block=False)  # -> 'foo' because this greenlet is ready
print lst[1].get(block=False)  # -> raised Timeout because this greenlet is not ready 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T09:40:37.650

您可以使用 gevent.event.Event（或 AsyncResult）和 Greenlet 的 link() 方法，如下所示：

```
...
ready = gevent.event.Event()
ready.clear()

def callback():
    ready.set()

lst = [gevent.spawn(first), gevent.spawn(second)]
for g in lst:
    g.link(callback)

ready.wait()
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-11T14:42:11.430

回调接收 gevent 子进程，您可以从中获取例如返回值

```
...

cars = []

def _callback(job):
    cars.append(job.value)

for car in xml_all_cars:
    print "creating jobs"
    g_parse = Greenlet.spawn(myMainFunction)
    g_parse.start()
    g_parse.link(_callback)
    jobs.append(g_parse)

print "starting all jobs"
gevent.joinall(jobs)
print "jobs done"

return cars 
```

汽车将具有 myMainFunction 返回的所有值的列表（对于每辆车）

# php - ajax返回未定义，firebug中的控制台只响应一行数据

> ID：13579007
> 
> 赞同：0
> 
> 时间：2012-11-27T07:03:53.090
> 
> 标签：php, ajax

嘿伙计们，我试图通过 json_encode 获取我的 ajax 的值并使用 $.each 来迭代每个结果，但是每个输入都从我的 php 返回未定义的值这里是 ajax

```
var counter_sub = 0 ;
var html;
          $.ajax({
                    type:'POST',
                    url:'add_subject.php',
               dataType:'json',
                   data:{'func_numbr':'2'},
                success:function (data){
                   $.each(data, function(i, item) {

                    html = "<tr>";
                    html += "<td><lable>Subject: </label><input type='text' name='subject["+counter_sub+"]' value='"+data[i].subj_name+"'></td>";
                    html += "<td><input type='button' id='activate' name='active' class='button' value='Active'> ";
                    html += "<input type='button' id='inactivate' name='active' class='button' value='Inactive'></td>";
                    html += "</tr>";
           $('#curr-elem-tble').append(html);

           counter_sub = counter_sub +1;
          });
                }     
         }); 
```

和PHP

```
<?php
include_once('DBconnect.php'); 
$func_num = $_POST['func_numbr'];

switch ($func_num) {
case 1:
    insert_new_subject();
    break;
case 2:     
    get_elementary_subjects();  
    break;
 }

function insert_new_subject(){
 $level = $_POST['year_level'];
 $subjct_name =$_POST['subjct_name'];
 $units_nmber = $_POST['subjct_units'];

 $insert_subject = "INSERT INTO subjects (subject_name,level,status,subject_units)     VALUES('$subjct_name','$level','1','$units_nmber')";

                if(@!mysql_query($insert_subject)){
                    die('error insert'.mysql_error());

                    }
                    else{
                        $return ['error'] = false;
                    }

echo json_encode($return);                  
}

  function get_elementary_subjects(){

$select_subjects_elem = "SELECT subject_name,subject_id,status FROM subjects WHERE   level='elementary' "; 

    $connect = mysql_query($select_subjects_elem) or die(mysql_error());
    $data[]=array();

    while($row = mysql_fetch_array($connect)){
        $data= array(
            'subj_name' =>$row['subject_name'], 
            'subj_id'=>$row['subject_id'],
            'subj_status'=>$row['status'],
            );
    }

    echo json_encode($data);
}
?> 
```

我将每个 td 切成不同的 html 行并用 += 连接它仍然无法弄清楚为什么它返回未定义。我用firebug检查了它，控制台只返回1行数据，尽管它遍历所有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:11:20.123

您只得到一行，因为在您的 while 循环中，您覆盖了整个数组而不是附加到它。将数组声明更改为：

```
 $data = array(); 
```

和循环中的代码：

```
 $data[] = array(
        'subj_name' =>$row['subject_name'], 
        'subj_id'=>$row['subject_id'],
        'subj_status'=>$row['status'],
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:12:49.023

试试这个代码，

```
function get_elementary_subjects(){

    $select_subjects_elem = "SELECT subject_name,subject_id,status FROM subjects WHERE   level='elementary' "; 

    $connect = mysql_query($select_subjects_elem) or die(mysql_error());

    $data = array(); //<---changed $data[] to $data

    while($row = mysql_fetch_array($connect)){

        //change $data to $data[] 
        $data[] = array(
            'subj_name' =>$row['subject_name'], 
            'subj_id'=>$row['subject_id'],
            'subj_status'=>$row['status']  //<---removed comma here

        );
    }

    echo json_encode($data);
    exit; //<---Added exit here
} 
```

在上面的代码中查看我的评论

# ssis - 如何导入具有自我关系的表

> ID：13579015
> 
> 赞同：2
> 
> 时间：2012-11-27T07:04:29.840
> 
> 标签：ssis, referential-integrity, self-reference, self-referencing-table

我有下表：

EntityId - PK
标签
ParentEntityId - FK

ParentEntityId 连接到同一张表的 EntityId。现在我在使用 SSIS 将数据导入此表时遇到问题，因为尚未导入父实体的实例，因此我遇到了 FK 约束违规。我可能遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:03:41.920

您可以在加载数据之前禁用外键，然后在加载完成后重新启用它，两者都使用 T-SQL。

例如 - 禁用 -`ALTER TABLE yourTableName NOCHECK CONSTRAINT yourConstraintName`

重新启用 -`ALTER TABLE yourTableName WITH CHECK CHECK CONSTRAINT yourConstraintName`

# android - 点击安卓通知

> ID：13579022
> 
> 赞同：0
> 
> 时间：2012-11-27T07:04:46.013
> 
> 标签：android, notifications

我在我的某些应用程序中的 android 设备上显示通知。每次触发通知时，bundle 都会保存该值，然后在单击通知时会打开一个带有 bundle 中 id 的新活动。

现在我遇到了一个问题，当一个通知带有 id ：A 并且同时如果用户收到带有 id 的通知：B。现在它将导致捆绑值 - B。现在如果单击任何通知，那么该页面将使用新的通知值打开。这是 id 更新的主要问题。

我要求在通知点击右侧页面应始终打开

发送通知

```
 connection.addPacketListener(new PacketListener() {

            @Override
            public void processPacket(Packet packet) {
                // TODO Auto-generated method stub
                Message message = (Message) packet;
                senderName = packet.getFrom();

                // new code
                mMessageItem = new MessageItemDataClass();
                mMessageItem.isSendMessage = false;
                mMessageItem.messageText = message.getBody();

                int alphaPOS = senderName.indexOf("@");
                String subSenderName = senderName.substring(0, alphaPOS);

                refinedID = refineFromjId(packet.getFrom());

                Random rand = new Random();
                int randNotificationVal = rand.nextInt(1000);
                String notificationID = ""+randNotificationVal;

                while(idMap.containsValue(notificationID)){

                    randNotificationVal = rand.nextInt(1000);
                    notificationID = ""+randNotificationVal;

                }

                if(!idMap.containsKey(refinedID)){

                    saveNotificationID(refinedID, notificationID);
                }

                if (UserChatActivity.checkPresence == true) {

                    if (packet.getFrom().equalsIgnoreCase(
                            refineFromjId(UserChatActivity.frienduserID)
                                    + "/Smack")) {

                        UserChatActivity.messages.add(mMessageItem);
                    } else {
                        notificationforChat(
                                subSenderName + ": " + message.getBody(),
                                packet.getFrom().toString(), Integer.parseInt(idMap.get(refinedID))
);
                    }
                } else {
                    notificationforChat(
                            subSenderName + ": " + message.getBody(), packet
                                    .getFrom().toString(),  Integer.parseInt(idMap.get(refinedID))
);

            }

public void notificationforChat(CharSequence message, String toJid,
            int notificationID) {

        int notificationCount = 1;
        String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);
        int icon = R.drawable.ic_launcher;
        CharSequence tickerText = message;
        long when = System.currentTimeMillis();
        Notification notification = new Notification(icon, tickerText, when);
        //notification.number = notificationCount++;
        Context context = getApplicationContext();

        CharSequence contentTitle = "Chat";
        CharSequence contentText = message;
        Intent notificationIntentforChat = new Intent(this,
                UserChatActivity.class);
        notificationIntentforChat.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                | Intent.FLAG_ACTIVITY_NEW_TASK);

        notificationIntentforChat.putExtra("userNameVal", toJid);
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
                notificationIntentforChat, PendingIntent.FLAG_UPDATE_CURRENT);
        notification.setLatestEventInfo(context, contentTitle, contentText,
                contentIntent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        notification.defaults = Notification.DEFAULT_ALL;
        mNotificationManager.notify(notificationID, notification);
    } 
```

检查捆绑包的 UserChatActivity

```
try {
            Bundle bundle = getIntent().getExtras();
            if (bundle.getString("userNameVal") != null) {
                frienduserID = bundle.getString("userNameVal");         
                int index_of_Alpha = frienduserID.indexOf("@");
                String subID = frienduserID.substring(0, index_of_Alpha);
                mtvChatTitle.setText(subID);
                //System.out.println("TRY == "+frienduserID);
            }
        } catch (Exception e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
            //System.out.println(""+frienduserID);
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:25:36.403

我找到了解决方案，

下载这个库并添加你的项目，

[https://github.com/JakeWharton/NotificationCompat2/downloads](https://github.com/JakeWharton/NotificationCompat2/downloads)

```
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

import com.example.notification.R.id;
import com.jakewharton.notificationcompat2.NotificationCompat2;

public class MainActivity extends Activity {
    Button btn;
    int i = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        btn = (Button) findViewById(id.button1);

        btn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                // Click button 3-4 times and there will be natification and
                // click one of them

                notificationforChat("Message" + i,"sender" + i,i);
                //notificationforChat("sender" + i, "Message" + i, i);
                i++;
            }
        });

    }

    public void notificationforChat(String message, String sender,int notificationID) {
        Bundle bundle = new Bundle();
        bundle.putString("key", message);

        NotificationManager notifManager = (NotificationManager) this
                .getSystemService(this.NOTIFICATION_SERVICE);
        int uniqueInteger = notificationID;// create a unique Integer
        int icon = R.drawable.ic_launcher;

        NotificationCompat2.Builder mNotification = new NotificationCompat2.Builder(
                this).setSmallIcon(icon).setContentTitle(sender)
                .setContentIntent(getPendingIntent(bundle, uniqueInteger));

        mNotification.setDefaults(Notification.DEFAULT_LIGHTS
                | Notification.DEFAULT_SOUND | Notification.DEFAULT_VIBRATE);
        mNotification.setAutoCancel(true);
        notifManager.notify(uniqueInteger, mNotification.build());
    }

    private PendingIntent getPendingIntent(Bundle bundle, int rc) {
        Intent notificationIntent = new Intent(MainActivity.this, UserChatActivity.class);
        notificationIntent.putExtras(bundle);
        return PendingIntent.getActivity(this, rc, notificationIntent,
                PendingIntent.FLAG_UPDATE_CURRENT);
    }
} 
```

然后在 userChatActivity 上，

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;

public class UserChatActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main2);

        Intent intent = getIntent();        
        String key = intent.getStringExtra("key");      

        Log.v("notifica",key);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T19:48:14.693

看来最新的总是要打开的，这不是你想要的吗？

您是否希望在您描述的情况下有 2 个单独的通知？一个用于：A，一个用于：B？

# c# - 正则表达式：将相同的字符串匹配到 2 个命名组中

> ID：13579027
> 
> 赞同：1
> 
> 时间：2012-11-27T07:05:03.567
> 
> 标签：c#, .net, regex

我有以下 C# 代码：

```
string MyString = "<a href=\"magnet:?xt=urn:btih:7f3befa467c4cac0787286c87ea264a0606066f5&dn=some.file.name.zip&tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&tr=udp%3A%2F%2Ftracker.publicbt.com%3A80&tr=udp%3A%2F%2Ftracker.istole.it%3A6969&tr=udp%3A%2F%2Ftracker.ccc.de%3A80\" title=\"Download this torrent using magnet\">...</a>[Some unwanted stuff here]<a href=[Another]>";

MatchCollection MyMatches = Regex.Matches(MyString, "(?<URL>magnet:\\?.*?)(?:\"|')");           
foreach(Match MyMatch in MyMatches)
{
    MessageBox.Show(MyMatch.Groups["URL"].Value);
} 
```

我的问题是：我怎样才能也放入`&dn=some.file.name.zip`一个名为的命名组`<File>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:21:54.220

```
string MyString = "<a href=\"magnet:?xt=urn:btih:7f3befa467c4cac0787286c87ea264a0606066f5&dn=some.file.name.zip&tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&tr=udp%3A%2F%2Ftracker.publicbt.com%3A80&tr=udp%3A%2F%2Ftracker.istole.it%3A6969&tr=udp%3A%2F%2Ftracker.ccc.de%3A80\" title=\"Download this torrent using magnet\">...</a>[Some unwanted stuff here]<a href=[Another]>";

MatchCollection MyMatches = Regex.Matches(MyString, "(?<URL>magnet:\\?.*(&dn=(?<File>[^&]+)).*?)(?:\"|')");           
foreach(Match MyMatch in MyMatches)
{
    MessageBox.Show(MyMatch.Groups["URL"].Value);
    MessageBox.Show(MyMatch.Groups["File"].Value);
} 
```

# c# - 当 AutoGenerateColumns = True 时如何重命名 DataGrid 列？

> ID：13579034
> 
> 赞同：18
> 
> 时间：2012-11-27T07:05:37.683
> 
> 标签：c#, wpf, wpfdatagrid, rename, autogeneratecolumn

我有一个简单的数据结构类：

```
public class Client {
    public String name {set; get;}
    public String claim_number {set; get;}
} 
```

我正在喂一个`DataGrid`：

```
this.data_grid_clients.ItemSource = this.clients; 
```

我想更改列标题。即：claim_number 为“索赔号”。我知道当您通过执行以下操作手动创建列时可以做到这一点：

```
this.data_grid_clients.Columns[0].Header = "Claim Number" 
```

但是，`Columns`自动生成列时该属性为空。有没有办法重命名列，还是我必须手动生成列？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-27T07:31:08.890

您可以使用[DisplayNameAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.displaynameattribute.aspx)并更新代码的某些部分来实现您想要的。

您要做的第一件事是`[DisplayName("")]`在 Client 类中添加一个 to 属性。

```
public class Client {
    [DisplayName("Column Name 1")]
    public String name {set; get;}

    [DisplayName("Clain Number")]
    public String claim_number {set; get;}
} 
```

更新您的 xaml 代码，将事件处理程序添加到 AutoGenerationColumn 事件。

```
<dg:DataGrid AutoGenerateColumns="True" AutoGeneratingColumn="OnAutoGeneratingColumn">
</dg:DataGrid> 
```

最后，在代码隐藏中添加一个方法。

```
private void OnAutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
    var displayName = GetPropertyDisplayName(e.PropertyDescriptor);

    if (!string.IsNullOrEmpty(displayName))
    {
        e.Column.Header = displayName;
    }

}

public static string GetPropertyDisplayName(object descriptor)
{
    var pd = descriptor as PropertyDescriptor;

    if (pd != null)
    {
        // Check for DisplayName attribute and set the column header accordingly
        var displayName = pd.Attributes[typeof(DisplayNameAttribute)] as DisplayNameAttribute;

        if (displayName != null && displayName != DisplayNameAttribute.Default)
        {
            return displayName.DisplayName;
        }

    }
    else
    {
        var pi = descriptor as PropertyInfo;

        if (pi != null)
        {
            // Check for DisplayName attribute and set the column header accordingly
            Object[] attributes = pi.GetCustomAttributes(typeof(DisplayNameAttribute), true);
            for (int i = 0; i < attributes.Length; ++i)
            {
                var displayName = attributes[i] as DisplayNameAttribute;
                if (displayName != null && displayName != DisplayNameAttribute.Default)
                {
                    return displayName.DisplayName;
                }
            }
        }
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-01-05T22:44:45.203

# 不错的答案

您可以在事件中修改[`Header`](https://msdn.microsoft.com/en-US/library/system.windows.controls.datagridcolumn.header.aspx)自动生成的[`DataGridColumn`](https://msdn.microsoft.com/en-US/library/system.windows.controls.datagridcolumn.aspx)标头[`AutoGeneratingColumn`](https://msdn.microsoft.com/en-US/library/system.windows.controls.datagrid.autogeneratingcolumn.aspx)，您可以在其中访问[`DisplayNameAttribute`](https://msdn.microsoft.com/en-US/library/system.componentmodel.displaynameattribute.aspx)

**客户端.cs**

```
public class Client
{
    [DisplayName("Name")]
    public String name { set; get; }

    [DisplayName("Claim Number")]
    public String claim_number { set; get; }
} 
```

**.xaml**

```
<DataGrid ItemSource="{Binding Clients}"
          AutoGenerateColumns="True"
          AutoGeneratingColumn="DataGrid_AutoGeneratingColumn" /> 
```

**.xaml.cs**

v1

```
// This snippet can be used if you can be sure that every
// member will be decorated with a [DisplayNameAttribute]
private void DataGrid_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
    => e.Column.Header = ((PropertyDescriptor)e.PropertyDescriptor)?.DisplayName ?? e.Column.Heaader; 
```

v2

```
// This snippet is much safer in terms of preventing unwanted
// Exceptions because of missing [DisplayNameAttribute].
private void DataGrid_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
    if (e.PropertyDescriptor is PropertyDescriptor descriptor)
    {
        e.Column.Header = descriptor.DisplayName ?? descriptor.Name;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T07:29:22.563

您可以使用 AutoGeneratingColumns 事件。

```
private void dataGridAutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
  if (e.PropertyName.StartsWith("MyColumn")
    e.Column.Header = "Anything I Want";
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-02T08:13:58.117

## MVVM 答案

为了使这与 MVVM 模式保持一致并避免使用可怕的代码隐藏，您可以使用 Sytem.Windows.Interactivity 中的自定义行为（在 nuget 上找到的 Expression Blend SDK 的一部分）。您还需要在创建行为的项目中使用 Windows.Base.dll。

**XAML**

```
<DataGrid AutoGenerateColumns="True">
    <i:Interaction.Behaviors>
        <behaviours:ColumnHeaderBehaviour/>
    </i:Interaction.Behaviors>
</DataGrid> 
```

**行为类**

```
public class ColumnHeaderBehaviour : Behavior<DataGrid>
{
    protected override void OnAttached()
    {
        AssociatedObject.AutoGeneratingColumn += OnGeneratingColumn;
    }

    protected override void OnDetaching()
    {
        AssociatedObject.AutoGeneratingColumn -= OnGeneratingColumn;
    }

    private static void OnGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs eventArgs)
    {
        if (eventArgs.PropertyDescriptor is PropertyDescriptor descriptor)
        {
            eventArgs.Column.Header = descriptor.DisplayName ?? descriptor.Name;
        }
        else
        {
            eventArgs.Cancel = true;
        }
    }
} 
```

行为非常有用，不必与视图在同一个项目中定义，这意味着您可以创建行为库并在许多应用程序中使用它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-05T23:02:16.380

# 简短的回答

您可以在事件中修改[`Header`](https://msdn.microsoft.com/en-US/library/system.windows.controls.datagridcolumn.header.aspx)自动生成的[`DataGridColumn`](https://msdn.microsoft.com/en-US/library/system.windows.controls.datagridcolumn.aspx)标头。[`AutoGeneratingColumn`](https://msdn.microsoft.com/en-US/library/system.windows.controls.datagrid.autogeneratingcolumn.aspx)

**.xaml**

```
<DataGrid ItemSource="{Binding Clients}"
          AutoGenerateColumns="True"
          AutoGeneratingColumn="DataGrid_AutoGeneratingColumn" /> 
```

**.xaml.cs**

```
private void DataGrid_AutoGeneratingColumn(object sender, DataGridAutoGeneratingColumnEventArgs e)
{
    switch (e.Name)
    {
        case nameof(Client.name):
            e.Column.Header = "Name";
            break;

        case nameof(Client.claim_number):
            e.Column.Header = "Claim Number";
            break;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-01T10:42:23.220

我将 Ekk 的答案重构为更短且与 Resharper 兼容的解决方案：

```
public static string GetPropertyDisplayName(object descriptor)
{
   var propertyDescriptor = descriptor as PropertyDescriptor;
   if (propertyDescriptor != null)
   {
      var displayName = propertyDescriptor.Attributes[typeof(DisplayNameAttribute)] as DisplayNameAttribute;
      if (displayName != null && !Equals(displayName, DisplayNameAttribute.Default))
      {
         return displayName.DisplayName;
      }
   }
   else
   {
      var propertyInfo = descriptor as PropertyInfo;
      if (propertyInfo != null)
      {
         var attributes = propertyInfo.GetCustomAttributes(typeof(DisplayNameAttribute), true);
         foreach (object attribute in attributes)
         {
            var displayName = attribute as DisplayNameAttribute;
            if (displayName != null && !Equals(displayName, DisplayNameAttribute.Default))
            {
               return displayName.DisplayName;
            }
         }
      }
   }
   return null;
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-05-25T04:40:50.573

# 另一种生成列标题的方法

添加其他人在附加到 OnAutoGeneratingColumn 方法的上下文中所说的内容；我发现以下方法很有用。

它将确保它使用来自视图模型属性的 DisplayName 属性，就像其他人一样，但是如果未设置该名称，它将使用正则表达式来获取 Pascal 大小写名称并将其转换为漂亮的列标题。

```
 //Note that I cleaned this up after I pasted it into the Stackoverflow Window, I don't
 //think I caused any compilation errors but you have been warned.
 private void InvoiceDetails_OnAutoGeneratingColumn(object sender,
                                                    DataGridAutoGeneratingColumnEventArgs e)
 {
     if (!(e.PropertyDescriptor is PropertyDescriptor descriptor)) return;

     //You cannot just use descriptor.DisplayName because it provides you a value regardless to it 
     // being manually set.  This approach only uses a DisplayName that was manually set on a view
     // model property.  
     if (descriptor.Attributes[typeof(DisplayNameAttribute)] 
                    is DisplayNameAttribute displayNameAttr
                    && !string.IsNullOrEmpty(displayNameAttr.DisplayName))
     {
         e.Column.Header = displayNameAttr.DisplayName;
         return;
     }

     //If you only wanted to display columns that had DisplayName set you could collapse the ones
     // that didn't with this line.
     //e.Column.Visibility = Visibility.Collapsed;
     //return;

     //This alternative approach uses regular expressions and does not require 
     //DisplayName be manually set.  It will Breakup Pascal named variables 
     //"NamedLikeThis" into nice column headers that are "Named Like This".
     e.Column.Header = Regex.Replace(descriptor.Name,
             @"((?<=[A-Z])([A-Z])(?=[a-z]))|((?<=[a-z]+)([A-Z]))",
             @" $0",
             RegexOptions.Compiled)
            .Trim();

 } 
```

# linux - Apache Tomcat 是否安装？

> ID：13579036
> 
> 赞同：-1
> 
> 时间：2012-11-27T07:05:47.463
> 
> 标签：linux, tomcat

如何检查我的远程 linux 机器中是否安装了 Apache Tomcat。我正在使用腻子连接机器。有什么命令可以找到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:13:44.127

您提到您正在运行 Ubuntu。Ubuntu是基于Debian的，所以你会使用`dpkg`

```
dpkg -l | grep tomcat 
```

这将首先列出所有已安装的软件包，然后搜索包含 tomcat 的内容。如果出现tomcat，则说明它已安装。

有关更多有用的命令，请参阅[此博客文章](http://www.cyberciti.biz/tips/linux-debian-package-management-cheat-sheet.html)。

# .net - 将 log4net 日志存储在自定义表中

> ID：13579037
> 
> 赞同：0
> 
> 时间：2012-11-27T07:05:49.043
> 
> 标签：.net

我已阅读[http://logging.apache.org/log4net/release/config-examples.html](http://logging.apache.org/log4net/release/config-examples.html)并了解我们可以使用以下表定义将日志存储在 SQL Server 数据库中。但我的情况不同。我有许多应用程序使用的现有表（ExceptionLog）。它的列有些不同。

是否可以将 log4Net 配置为使用此现有表？我们怎么能做到这一点？

Log4Net 表滞留：

```
CREATE TABLE [dbo].[Log] (
[Id] [int] IDENTITY (1, 1) NOT NULL,
[Date] [datetime] NOT NULL,
[Thread] [varchar] (255) NOT NULL,
[Level] [varchar] (50) NOT NULL,
[Logger] [varchar] (255) NOT NULL,
[Message] [varchar] (4000) NOT NULL,
[Exception] [varchar] (2000) NULL
) 
```

现有表：

```
CREATE TABLE [dbo].[ ExceptionLog] (
[ExceptionLogId] [int] NOT NULL,
[Date] [datetime] NOT NULL,
[Exception] [varchar] (2000) NOT  NULL,
[IsInternalApp] [varchar] (1) NOT NULL,
[Operation] [varchar] (1000) NOT NULL
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:56:19.810

您可能正在寻找允许登录数据库表的[.AdoNetAppender 。](http://logging.apache.org/log4net/release/sdk/log4net.Appender.AdoNetAppender.html)

此外，如果这不是您想要的，请查看[所有 appenders 的概述](http://logging.apache.org/log4net/release/sdk/log4net.Appender.html)。

最后，您可以实现自己的。以下是示例：[如何使用 log4net 将日志存储在数据库中](http://sadi02.wordpress.com/2008/09/15/how-to-store-log-in-database-using-log4net/)或[为 log4net 编写 Appender](http://www.alteridem.net/2008/01/10/writing-an-appender-for-log4net/)

# .net - 从扩展生成内容类型标头

> ID：13579045
> 
> 赞同：0
> 
> 时间：2012-11-27T07:06:16.543
> 
> 标签：.net, mime-types, content-type, file-extension

有没有办法可以`Content-Type`在 .NET 中自动生成标头？

我正在开发一个系统，用户可以上传多种格式的文件，我唯一可用的元数据是文件扩展名。

我的一个表单有一个指向`ashx`将文件写入响应的资源的链接。我宁愿设置适当的内容类型标头，以便浏览器知道如果用户想直接打开它而不是保存它，如何处理该文件。

如果没有任何可用的预制件，我将不得不开始自己编译内容类型标头映射的扩展，但我宁愿不必做不必要的工作。

这个[答案](https://stackoverflow.com/a/1633462/1726343)与 Java 有类似的东西，但我找不到任何适用于 .NET 的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T13:28:20.523

我最终使用[这个文件](http://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types)来填充一个具有 MIME 类型到扩展映射的表，并且我的脚本在提供文件时引用它。工作得很好。

# python - Gnuplot-Py 中的换行符？

> ID：13579046
> 
> 赞同：0
> 
> 时间：2012-11-27T07:06:32.830
> 
> 标签：python, gnuplot, data-visualization

我正在使用[GnuplotPy](http://gnuplot-py.sourceforge.net/)接口从 Python 内部使用 Gnuplot。我发现当我在 GnuplotPy 调用中有换行符时，GnuplotPy 会抱怨。例如：

```
import Gnuplot
gp = Gnuplot.Gnuplot(persist = 1)
gp('set title "My plot title is very long, \n so it needs two lines"')
...
gp.plot(...) 
```

上面的代码在运行时会抛出以下错误：

```
gnuplot> so it needs two lines
     ^
     line 0: invalid command 
```

并且，上面的代码输出了一个只显示标题第一行的图，但该图在其他方面是正确的。如果我删除行`\n`中的`gp('set title...')`，那么错误就会消失。

* * *

根据[这个 Gnuplot tutorial](http://www.sunsite.ualberta.ca/Documentation/Gnu/gnuplot-3.7.1/html_node/gnuplot_245.html)，`\n`确实是在 Gnuplot 中做多行标签的有效方法。例如，本教程建议这样做：

```
set title "This is the title\n\nThis is the x2label" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:10:03.077

gnuplot 和 python 都将 2 字符序列 ( `\n`) 作为换行符。正在发生的事情是，python 正在拦截您`\n`并将其转换为 gnuplot 阻塞的文字换行符。尝试使用原始字符串：

```
gp(r'set title "My plot title is very long, \n so it needs two lines"')
#  ^ The leading r makes it a raw string. 
```

这将防止 python 拦截你的换行符。

# celery - 芹菜花 饰演 Daemon

> ID：13579047
> 
> 赞同：14
> 
> 时间：2012-11-27T07:06:37.513
> 
> 标签：celery, tornado, flower

我用redis后端运行芹菜。我想在 centos 6.2 上将芹菜花作为守护进程运行。

我知道花是一个 Tornado 应用程序，所以我应该使用一个进程来运行一个 Tornado 应用程序作为一个守护进程。

通常要开始花我使用这个命令：

> 芹菜花 --broker=redis://localhost

我在下面的链接中读到我需要这样创建一个 python 脚本：http: [//www.charleshooper.net/blog/python-starting-tornado-apps-at-boot-using-upstart/](http://www.charleshooper.net/blog/python-starting-tornado-apps-at-boot-using-upstart/) (Startflower.py)

```
import tornado.ioloop
import tornado.web
import tornado.httpserver 

if __name__ == "__main__":
    http_server = tornado.httpserver.HTTPServer(application)
    http_server.listen(port)
    tornado.ioloop.IOLoop.instance().start() 
```

但是，我不确定将什么放入“应用程序”变量中。我尝试了“芹菜花--broker=redis://localhost”和“芹菜花”，但都没有奏效

我需要做什么才能让它作为守护进程工作？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2017-10-03T16:12:13.890

最好使用 systemd 将flower 作为守护进程运行。Supervisord 与 Python3 不兼容已成为新的[最佳实践](http://docs.python-guide.org/en/latest/starting/which-python/#the-state-of-python-3-2)。此外，systemd 是大多数现代 Linux 发行版的[标准进程管理器。](https://www.linuxvoice.com/linux-101-get-the-most-out-of-systemd/)

我在 Ubuntu 16.04 中使用 systemd 作为花的守护进程。尽管我相信其他发行版的设置不会有太大不同。

1.  创建一个 systemd 配置文件，例如，`flower.service`. 就我而言，它位于`/etc/systemd/system`文件夹中。它应该包含：

    ```
    [单元]
    描述=花芹菜服务

    [服务]
    用户=您的用户
    组=www-数据
    工作目录=/var/www/project-working-directory
    ExecStart=/home/user/miniconda3/envs/virtualenv/bin/flower --port=5555 --loglevel=info -A yourproject
    重启=失败
    类型=简单

    [安装]
    WantedBy=多用户.target

    ```

基本上，您可以像在终端中一样设置所有可用选项。顺便说一下，你应该在[虚拟环境](https://conda.io/docs/user-guide/overview.html)下使用flower 。确保您的用户对工作目录具有权限。

2.  重新加载 systemd 守护进程 `sudo systemctl daemon-reload`

3.  启动花守护进程 `sudo systemctl start flower`

就这样！[这个](https://eklitzke.org/production-tornado-deployment-with-systemd)不错的教程帮助我完成了配置过程。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-27T21:09:47.090

您可以将其保留为命令行程序并在[supervisord](http://supervisord.org/)守护程序下运行。这是 python 世界中常见的解决方案（尽管 supervisord 可以使用任何命令，而不仅仅是 python），我一直都在使用它。

Supervisord 使程序认为它仍在终端中运行。有很多如何使用 supervisord 的示例，但我可以在[此处](http://jorgenmodin.net/index_html/archive/2010/11/30/novnc-vnc-screen-sharing-in-the-web-browser)找到我用于 python 代理服务器的示例，向下滚动到“将代理服务器安装为服务”。

# sql - Oracle：从另一个大于 4000 个字符的表中更新 CLOB

> ID：13579051
> 
> 赞同：2
> 
> 时间：2012-11-27T07:06:49.553
> 
> 标签：sql, oracle, sql-update, clob

我怎样才能做到这一点？

```
UPDATE 
    My_Table SET my_clob = (
        SELECT 
            other_clob
        FROM 
            other_table
        WHERE 
            my_table.id = other_table.id
    ); 
```

错误：

> ORA-22835: 缓冲区太小，无法进行 CLOB 到 CHAR 或 BLOB 到 RAW 转换

编辑：

哦，男孩，sry 伙计们。我发现该列实际上是我正在测试的测试系统中的一个 varchar(4000)（在 prod 中它应该是一个 clob）。有点让你想知道我是不是第一个真正使用测试系统的人......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:40:56.997

据称这已[在 oracle 10.2 中修复](http://www.dba-oracle.com/t_ora_22835_buffer_too_small.htm)。它当然适用于[oracle 11g R2](http://www.sqlfiddle.com/#!4/c3d5f/1)

如果无法升级，请尝试使用一些 PL/SQL：

```
begin
  for rec in (select id, other_clob from other_table) loop
    update my_table set my_clob = rec.other_clob where id = rec.id;
  end loop;
end;
/ 
```

# regex - 如何使用核心数据模型编辑器内置的正则表达式验证输入的电子邮件地址在核心数据中是否有效？

> ID：13579056
> 
> 赞同：1
> 
> 时间：2012-11-27T07:06:59.740
> 
> 标签：regex, core-data

我想验证仅当它是有效的电子邮件地址时才将字符串插入核心数据。对不起，我误解了正则表达式。在为要验证的字段提供的正则表达式字段中给出有效的正则表达式就足够了。

# sql-server - SQL Server 将两个 xml 合并为第三个

> ID：13579063
> 
> 赞同：1
> 
> 时间：2012-11-27T07:07:50.043
> 
> 标签：sql-server, xml, xquery

我在 SQL Server 2008 中工作。我有两个 xml 变量中的 xml 显式查询的输出。我的 SP 必须将这两个 xml 组合成一个格式良好的第三个 xml。下面给出的插图。不涉及复杂的处理。

我喜欢将两个 xml 变量中存在的两个 xml 合并为一个 xml

假设第一个 XML (@x)

```
<Student>
<Name>Lawy</Name>
<class>form1</class>
</Student>
<Student>
<Name>Vina</Name>
<class>form2</class>
</Student> 
```

第二个 XML (@y)

```
<Dept>
<DeptName>Social</DeptName>
<centre>AOS</centre>
</Dept>
<Dept>
<DeptName>Bio</DeptName>
<centre>RJS</centre>
</Dept> 
```

我想要的结果是 (@z)

```
<sp>
  <Student>
   <Name>Lawy</Name>
   <class>form1</class>
  </Student>
  <Student>
   <Name>Vina</Name>
   <class>form2</class>
  </Student>
  <Dept>
   <DeptName>Social</DeptName>
   <centre>AOS</centre>
  </Dept>
  <Dept>
   <DeptName>Bio</DeptName>
   <centre>RJS</centre>
  </Dept>
</sp> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:11:55.297

```
declare @x xml
declare @y xml

select @x = '<Student>
<Name>Lawy</Name>
<class>form1</class>
</Student>
<Student>
<Name>Vina</Name>
<class>form2</class>
</Student>'

select @y = '<Dept>
<DeptName>Social</DeptName>
<centre>AOS</centre>
</Dept>
<Dept>
<DeptName>Bio</DeptName>
<centre>RJS</centre>
</Dept>'

select @x, @y for xml path('sp') 
```

**更新：**如果你需要你的 sp 中的属性，你可以这样做

```
select 2 as [@id], @x, @y for xml path('sp') 
```

# android - android与服务器的安全连接不起作用

> ID：13579064
> 
> 赞同：0
> 
> 时间：2012-11-27T07:07:53.080
> 
> 标签：android, ssl-certificate

我正在开发一个应用程序，我必须在其中与服务器建立安全连接。服务器有 jks 密钥库和使用 java 开发的服务器端，我在我的应用程序中作为 bks 导入。

这是我用来将证书从 jks 导入 bks 的命令

keytool -importkeystore -srckeystore trust.jks -destkeystore newcertificate.bks -srcstoretype JKS -deststoretype BKS -srcstorepass "password" -deststorepass "mycert" -provider org.bouncycastle.jce.provider.BouncyCastleProvider -providerpath bcprov-jdk16-144.jar

并按照以下所有步骤 [与 android 中的 httpclient 进行安全连接](https://stackoverflow.com/questions/8943915/secure-connection-with-httpclient-in-android)

但它不工作。我收到 ioexception 消息为“No peer cerrifate”。

任何人都可以尝试这样的事情。任何代码片段都会很有用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:41:19.393

我按照此处提到的步骤进行操作。并解决了..

[为服务器和客户端生成自签名密钥的步骤](http://blog.callistaenterprise.se/2011/11/24/creating-self-signed-certificates-for-use-on-android/)

该链接解释了所有内容。它工作得很好...

# ssis - dtsconfig 文件存储在 SQL 服务器的什么位置？

> ID：13579067
> 
> 赞同：3
> 
> 时间：2012-11-27T07:08:10.477
> 
> 标签：ssis, sql-server-2008-r2

我知道我可以在 msdb.dbo.sysssispackages 下找到包 (XML)，但是 dtsconfig 文件在哪里？

谢谢

* * *

编辑：我使用 BIDS 创建 SSIS 和 XML 配置。在我构建项目之后，它在 deploy/bin 下创建了一个清单文件。单击它后，我选择了数据库服务器作为目标，然后它为我部署了 SSIS 并部署了 dtsconfig。我可以在 msdb.dbo.sysssispackages 下找到 SSIS，但找不到 dtsconfig 文件。

它不能仍然在我的本地文件系统下，这不是一个部署，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:10:11.890

配置文件 (XML) 由您通过指定使用 XML 文件进行配置来创建。您可以在此处阅读有关如何设置的详细文章：[http ://www.simple-talk.com/sql/ssis/xml-configuration-files-in-sql-server-integration-services/](http://www.simple-talk.com/sql/ssis/xml-configuration-files-in-sql-server-integration-services/)

因此，从本质上讲，dtsconfig 文件的“位置”是您想要存储它的位置，无论是文件系统还是某个数据库。

**编辑：**

需要明确的是：即使您将包部署到 SQL Server 目标，您的包配置也不一定会以相同的方式部署。设置包配置时再次检查，尤其是在第 13 步时使用***“选择配置类型”***。在这里，您将指定是否要将配置作为 XML 文件，或者作为数据库某处的 SSIS-Config 样式表中的行。有关如何使用数据库而不是文件进行配置的说明，请参见此处。[http://www.mssqltips.com/sqlservertip/1405/sql-server-integration-services-ssis-package-configuration/](http://www.mssqltips.com/sqlservertip/1405/sql-server-integration-services-ssis-package-configuration/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T01:05:53.610

好的，经过几次测试，我想我已经弄清楚了它在清单部署中是如何工作的。

当您单击清单文件时，它会询问部署目标。

可以选择远程SQL server，没问题，SSIS包会部署到数据库中（默认在master下，msdb.dbo.sysssispackages，除非修改了远程SQL server中的MsDtsSrvr.ini.xml文件）。

但是，如果您的 SSIS 包使用任何 dtsconfig 文件，那么清单部署就有点傻了。

首先，它通过询问您一个新的系统文件路径来尝试变得聪明，以便它复制您的本地 dtsconfig 文件。是的，dtsconfig 文件不会与您的 SSIS 包一起存储，即使您选择将 SSIS 包部署到数据库。它必须存储在系统文件目录下。我的默认设置是 C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Packages[源文件夹名称]。

清单部署很智能，因为如果您的 SSIS 包配置为使用来自任何路径（本地或远程）的 dtsconfig 文件，它可以通过将旧路径替换为您刚刚指定的新路径来更新您的 SSIS 包。但它不是那么聪明，因为如果您使用默认值（即 C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Packages\MySSISProject），则此路径表示您的 C:\，而不是 C:\远程 SQL 服务器（即使您在第一步中已指定部署到远程 SQL 服务器）。但与此同时，您在远程 SQL 服务器中部署的 SSIS 包正在更新到此文件路径，该文件路径本质上指向远程 SQL 服务器中的 C:\...

最后，您将不得不使用远程桌面将 dtsconfig 文件实际复制到远程 SQL Server 系统文件目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-27T05:46:26.283

我有另一个解决方案：

您可以使用表中的配置文件将您的配置设置存储在表上，并将该表用于包配置。

# javascript - uiwebview iphone中的javascript注入

> ID：13579072
> 
> 赞同：1
> 
> 时间：2012-11-27T07:08:24.250
> 
> 标签：javascript, iphone, ios5, uiwebview, ios6

我创建了一个使用 uiwebview 的应用程序。

我在 uiwebview 完成加载后使用 JavaScript 注入。

```
document.getElementsByTagName('body').item[0].font = 'custom font'; 
```

自定义字体已添加到项目中。

该代码在 iOS5 上运行良好，它将整个网页字体更改为自定义字体。

问题：

1) 在iOS6 uiwebview 上不能改变15% 的网页文本。我不明白为什么。因为iOS6。但是为什么它可以在 iOS5 上运行呢？

请给我任何建议，
谢谢你的帮助。

# android - Android Eclipse 错误日志不见了？

> ID：13579086
> 
> 赞同：4
> 
> 时间：2012-11-27T07:09:36.477
> 
> 标签：android, eclipse, error-log

我已经使用 Eclipse for Android 快一年了。

最近我更新到 Eclipse Juno。这并不顺利，所以我删除了 Android ADT 捆绑包并重新安装了所有内容。一切正常，它构建并运行。AVD 也可以。

但是“Windows -Show View-Error log”中缺少 Eclipse 中的错误日志（不是可以的 LogCat）。我查看了“其他”并使用该窗口中的搜索框进行了搜索。Alt+Shift+Q 也没有列出它，Alt+shift+Q+L 也没有打开它。

日志在 .../.metadata/.log 下 - 并得到更新但不在 UI 中？

我还在一台从未安装过 Eclipse 的机器上安装了 SDK，结果相同。

# xcode - 如何从 CLGeocoder 解析地标以仅显示城市

> ID：13579088
> 
> 赞同：1
> 
> 时间：2012-11-27T07:09:49.977
> 
> 标签：xcode, parsing, mkmapview, core-location, clgeocoder

我正在使用以下代码从 CLGeocoder 接收地标，并且我只想在同一视图控制器上的另一个文本视图中显示城市。我将如何从这个数组中解析出城市？它不是 NSDictionary 或任何东西，所以我不知道该怎么做。

```
CLGeocoder *geocoder = [[CLGeocoder alloc] init];

[geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error) {
    NSLog(@"reverseGeocodeLocation:completionHandler: Completion Handler called!");
    if (error){
        NSLog(@"Geocode failed with error: %@", error);
        return;
    }
    NSLog(@"Received placemarks: %@", placemarks);
}]; 
```

我的给定地标的日志如下：

<__NSArrayM 0x1a0b3810>( 937–961 Sunnyvale Saratoga Rd, 937–961 Sunnyvale Saratoga Rd, Sunnyvale, CA 94087, United States @ <+37.35984860,-122.03235910> +/- 100.00m )

或者

<__NSArrayM 0x19576ac0>( 5600 Van Nuys Blvd, 5600 Van Nuys Blvd, Van Nuys, CA 91401-4602, United States @ <+34.17257000,-118.44794450> +/- 100.00m, 区域（标识符 <+34.17257044> 半径 -118\. 57.64) <+34.17257001,-118.44794464> 半径 57.64m)

我怎样才能让 Sunnyvale 或 Van Nuys 部分显示为字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T08:30:15.703

采用`CLPlacemark's` `properties`

```
CLGeocoder * geoCoder = [[CLGeocoder alloc] init];
[geoCoder reverseGeocodeLocation:yourLocation completionHandler:^(NSArray *placemarks, NSError *error) {
  CLPlacemark *placemark = [placemarks objectAtIndex:0];
  NSString *strCity = [placemark locality];
  NSLog(@"%@",strCity);
}]; 
```

# linux-kernel - 在 Linux 环境中调用 Start_Kernal 之前会发生什么

> ID：13579089
> 
> 赞同：0
> 
> 时间：2012-11-27T07:09:54.650
> 
> 标签：linux-kernel, linux-device-driver

我刚刚开始阅读设备驱动程序并阅读 Start_kernal 函数是与体系结构无关的代码的一部分，并且已从与体系结构相关的部分调用。我想知道在此 start_Kernal 例程调用内核启动时的意思之前实际发生了什么。

我很想知道当 newtork 设备或 USB 设备与这个依赖于架构的代码交互时会发生什么（相信架构依赖是第一个与硬件交互的软件）。

与体系结构相关的代码是否负责获取附加到系统的硬件设备的 MAC 地址、供应商 ID 等信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T02:04:42.843

早期的内核代码专注于：

*   初始化内存，设置MMU和虚拟内存；
*   初始化时钟和定时器；
*   初始化中断子系统；
*   关键 GPIO 引脚的配置
*   检索与体系结构相关的数据，例如 ARM *ATAG*信息。

请注意，与体系结构相关的初始化不会一下子发生。可以在内核启动之后但在驱动程序初始化之前调用板初始化函数。

> newtork 设备或 USB 设备与此体系结构相关的代码进行交互

网络和 USB 主机和小工具设备由比早期内核代码更晚初始化的设备驱动程序表示。“交互”是最小的，并且符合已建立的内核驱动程序接口。应编写设备驱动程序以删除所有特定于板的依赖项，并用配置选项替换它们。如果不是，那么该驱动程序代码应该在*平台*或*mach*源代码目录中，而不是在*驱动程序*目录中。

> 依赖于架构的代码是否负责获取诸如...之类的信息

MAC 地址可以在内核命令行中传递，或者由引导加载程序安装（供设备驱动程序检索）。
Vendor ID、board ID 和其他数据可以是架构相关的代码。对于 ARM，内核在带有[ATAG](http://www.simtec.co.uk/products/SWLINUX/files/booting_article.html#d0e428)的内存缓冲区中接收此信息。

# java - 从 Eclipse 部署到 Tomcat

> ID：13579092
> 
> 赞同：1
> 
> 时间：2012-11-27T07:10:08.820
> 
> 标签：java, eclipse, tomcat

我正在使用 Maven、Eclipse 和 Tomcat 开发一个由不同模块组成的 Web 应用程序。当我使用 Maven 构建项目时，我会为每个模块获取一个战争文件。我的问题是如何将生成的模块从 Eclipse 部署到 Tomcat 服务器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:37:53.773

将此war文件放到tomcat中的webapps目录下，只需将文件名重命名为Root.war并运行tomcat即可

[参考](https://stackoverflow.com/questions/715506/tomcat-6-how-to-change-the-root-application/6093662#6093662)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:51:18.737

正如您所说，您在那里有不同的模块，它们将被命名为 XXXDAO、XXXcommon 等，

选项1：只需尝试右键单击每个模块，您就会看到该选项

```
right click on prject --> Run As --> Run on Server 
```

在所有模块中，只有一个模块会显示此选项，这是您的实际战争，将使用所有其他战争文件

选项2：如果您知道该模块，那么只需将该战争放在tom cat 的web 应用程序文件夹中并启动tomcat。

如果对您没有帮助，请显示您的项目的项目和目录结构。

**注意：** 您的应用程序的 Pom.xml 将帮助/指导您很多。尝试使用它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T07:31:11.460

仅使用 Maven 的一个好方法是使用[cargo-maven-plugin](http://cargo.codehaus.org/Maven2+plugin)。这也使得部署与容器无关，并提供了其他一些好处。

# java - 控制器层中的 AOP 和异常问题

> ID：13579093
> 
> 赞同：0
> 
> 时间：2012-11-27T07:10:15.120
> 
> 标签：java, spring, controller, aop

我们的应用程序具有以下层和交互：

View (JSP) -> Ajax calls -> MyController (implements Spring Controller) -> 通过自定义服务查找 -> MyService (implements Base Service) -> My DAOimpl

我们的想法是使用 AOP 来记录异常。为了保持 AOP 拦截简单，我们决定在控制器上定义切割。控制器有一些方法，如 onLoad、onUpdate（与 CRUD 操作相关），它们是从 handleRequest 方法调用的，我们想为 poitncut 定义这些方法。即，服务层或更低层的任何异常都会冒泡并到达控制器。AOP 切入点定义为拦截 throws 异常并将异常详细信息记录到日志中。随后，错误代码将被发送回正确显示错误消息的视图。

问题： - AOP 不拦截对 onLoad 等方法的调用。我们理解这是因为从handleRequest 对这些方法的调用被视为Controller 上的自调用，因此AOP 不会拦截它们。- 为了规避上述问题，我们创建了一个接口，其中包含 onLoad、onUpdate 方法和一组实现 onLoad 等方法的 util 类。控制器将这些实用程序作为成员。切入点将在这些工具而不是控制器上定义。执行此操作时，AOP 仅当 AOP 配置存在于 spring-servlet xml 中而不存在于用于 AOP 声明的自定义 xml 中时才有效。此观察仅适用于控制器。如果在服务层上定义了 AOP 切割，则声明按预期工作（在自定义 xml 中）。

需要的建议： - 我们是否应该为控制器定义 AOP？这应该只在服务层定义吗？在控制器上，异常将被“捕获”，错误消息将被发送到适当的查看。想检查原始方法中是否存在任何基本问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:09:58.410

我们在产品中做了类似的事情，我们在服务层捕获异常并进行翻译。这个翻译有两个方面。一个当然是与I18N有关。另一种翻译是确保没有低级别的异常出现在产品之外。相反，此类异常被转换为通用异常，从而防止异常泄漏。

我认为在服务层捕获异常是一种很好的做法，因为这样可以使较低层免于异常处理（如果他们选择不这样做）。此外，它让我们有机会进行翻译和/或任何其他操作。

谢谢，拉古

# ajax - 使用 formdata 时，图像上传功能在 Internet Explorer 中不起作用

> ID：13579094
> 
> 赞同：1
> 
> 时间：2012-11-27T07:10:15.983
> 
> 标签：ajax

如果我使用 multipart/form-data 获取图像数据，为什么图像上传功能在 Internet Explorer9 中不起作用。如何在 Internet Explorer 中上传图片。

这是我用来上传图片的代码。

```
 var formData = new FormData($('form')[1]);

    var onclick_attr=$('#Upload').attr('onclick');
     $.ajax({
            url: '${pageContext.servletContext.contextPath}/UploadImage',
            data: formData,
            type: 'POST',
            cache: false,
            contentType: false,
            processData: false,
            beforeSend: function(xhr) {
                $('#process-img-div').hide();
                $('#uploading-img').show();
                $('#Upload').attr('onclick','').css('opacity','0.5');
                $('#loader-imgforlogo').show();
            },
            success: function(xhr) {

                var str = xhr.split('&');
                for(var i=0; i<str.length; i++) {
                    var keys = str[i].split(':');
                    if(keys[0]=='Name')
                        fileName = keys[1];
                    else if(keys[0]=='Width')
                        imgWidth = keys[1];
                    else if(keys[0]=='Height')
                        imgHeight = keys[1];
                    else if(keys[0]=='Path')
                        filePath = keys[1];
                    }

                $('#preview').attr({
                               'src':'${pageContext.servletContext.contextPath}/uploads/'+fileName
                });

                $('#process-img-div').show();
                $('#uploading-img').hide();
            },
            complete:function(jqXHR, textStatus){
                $('#Upload').attr('onclick',onclick_attr).css('opacity','1');
                $('#loader-imgforlogo').hide();
                $.fancybox.close(); 

            },
            error: function(xhr) {

            }
    });
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:08:42.517

在 IE10 之前，Internet Explorer 不支持 FormData 对象。IE9 不支持 FormData 对象。所以它不适用于 IE9 检查FormData Object[支持的浏览器](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)

另请查看另一个类似的问题 [FormData not working in Internet Explorer？](https://stackoverflow.com/questions/9573607/formdata-not-working-in-internet-explorer)

对于不支持 FormData 对象的旧版浏览器，您可以先在此处检查浏览器是否支持[如何检查浏览器是否支持 HTML5 文件上传（FormData 对象）？](https://stackoverflow.com/questions/7296426/how-can-i-check-if-the-browser-support-html5-file-upload-formdata-object)

如果浏览器不支持，可以遍历表单dom元素，创建一个json对象，设置为$.ajax方法数据属性值。如果您要上传任何文件，请查看[iframe 上传解决方案](http://www.jainaewen.com/files/javascript/jquery/iframe-post-form.html)

# android - 写入另一个应用程序的内存

> ID：13579104
> 
> 赞同：0
> 
> 时间：2012-11-27T07:11:06.070
> 
> 标签：android

我有 2 个具有不同包名称的应用程序。例如 App1 和 App2。

App1 需要将一些文件写入 App2 的内存，以便上传到后端。

我在 App1 中使用了以下内容：

```
filePath = getPackageManager().getPackageInfo("app2.package.name", 0).applicationInfo.dataDir; 
```

我可以获得正确的路径，但无法写入。我检查了logcat，它显示“权限被拒绝”。

我错过了什么吗？还需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:55:46.663

我在 Android 清单中使用了 android:sharedUserId，现在可以跨应用程序的内部存储器进行写入。

由于我唯一的目的是编写文本文件（不涉及共享等），我发现这是最容易实现的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T07:17:30.233

您不能直接访问其他应用程序的内部存储器。只有在您的设备上具有 root 访问权限，您才能这样做。

但是为什么你的应用程序要写入另一个应用程序的内存呢？如果您必须在 2 个应用程序之间进行一些通信，还有其他方法可以做到这一点。即使用服务、内容提供商或广播意图并通过您的其他应用程序接收它。

# php - 使用 strpos 在 PHP 中查找字符串

> ID：13579107
> 
> 赞同：0
> 
> 时间：2012-11-27T07:11:17.123
> 
> 标签：php

我正在尝试使用 PHP 在另一个字符串中查找一个字符串（我尝试使用 strpos，但没有得到任何结果）。这是我尝试过的：

```
$assignedBuildings = " , building 1, building 2, building 3";
$buildingName = "building 1";
$assArray = array_map('trim', explode(',', $assignedBuildings));
print_r($assArray);
echo("Looking for: " . $buildingName . " in " . $assignedBuildings);
$pos = in_array($buildingName, $assArray); 
```

print_r 给我这个：

```
Array
(
    [0] => 
    [1] => Test Chapter
    [2] => Test 2 Chapter
    [3] => Test 3 Chapter
) 
```

当我回显 $pos 时，我什么也得不到（如“”）。

让我们假设 $buildingName 是“Test 3 Chapter”。我如何在 $assArray 中找到它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:13:40.217

你有一个错字。

改变

```
$pos = strpos($assingedBuildings, $buildingToLookFor); 
```

到

```
$pos = strpos($assignedBuildings, $buildingToLookFor); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T07:28:26.360

如果分配的建筑物列表是逗号分隔的列表，我建议将其分解，然后在结果数组中检查您的值。所以，像这样：

```
$assignedbuildings = explode(",",",building 1,building 2,building 3");
$buildingToLookFor = "building 1";
$buildingfound = in_array($buildingtolookfor,$assignedbuildings); 
```

注意事项：

1.  您需要确保列表中不在搜索字符串中的项目周围没有空格
2.  如果您希望搜索不区分大小写，请在两个字符串周围添加 strtolower。
3.  使用 strpos 函数是有问题的，因为它不会分隔各个条目。因此，如果您的列表包含“Building 10”，strpos 将为“Building 10”和“Building 1”返回一个值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T07:14:32.833

$assingedBuildings 中的错字让您感到困惑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T07:15:25.307

您可以使用[strstr()](http://php.net/manual/en/function.strstr.php)进行区分大小写的搜索，对于不区分大小写的搜索，使用[strstr()](http://www.php.net/manual/en/function.stristr.php) 它返回布尔值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T07:22:45.060

您必须更改`$assingedBuildings`为`$assignedBuildings`:)[在此处](http://phpfiddle.org/main/code/icw-fg0)查看演示。

# asp.net - 每个 HTTP 请求的 DbContext，但避免依赖于数据层中的 HttpContext

> ID：13579108
> 
> 赞同：0
> 
> 时间：2012-11-27T07:11:19.410
> 
> 标签：asp.net, entity-framework, httpcontext, dbcontext, data-layer

我一直在考虑如何在分层应用程序中使用`DbContext`per的一个实例。`HttpRequest`我想出的解决方案之一是创建一个在事件处理程序`HttpModule`中初始化上下文的实例，然后在事件处理程序中处理它。`HttpContext.Current.Items``BeginRequest``EndRequest`

不过，上述方法带来了一个问题：我需要在我的数据层和业务层中引用 System.Web 以获取存储的`DbContext`实例。这可能没问题，但我宁愿避免走那条路。如果我想从非 Web 应用程序中引用和使用我的数据层和业务层怎么办？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:19:27.367

您可以使用依赖注入。只需`IContextHolder`使用方法创建接口以获取上下文并将实例从 Web 应用程序注入到您的较低层。对于不同类型的应用程序，此接口的实现会有所不同——它将为您的上下文实例包装对真实存储的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:23:32.693

最简单的解决方案之一是将对数据上下文的访问包装在外观/网关类的静态属性中。

这样，在 Web 应用程序中，属性可以访问`HttpContext.Current.Items`并存储上下文。另一方面，如果缺少 http 上下文，您可以为非 Web 应用程序实施任何其他生命周期管理策略。

```
public static TheDbContext Current {
  get {
     if ( HttpContext.Current != null ) {
        // lifetime management for a web app
        // e.g. with the Items container
     }
     else {
        // lifetime management for a non-web app
     }
  }
} 
```

外观本身不必是数据层的一部分，因此您不必`System.Web`在数据层中引用。

# java - Joda Time 没有得到预期的结果

> ID：13579114
> 
> 赞同：0
> 
> 时间：2012-11-27T07:11:30.430
> 
> 标签：java, datetime, jodatime

我有一个格式的日期字符串`MM/dd/yyyy`，我正在使用它来解析`SimpleDateFormat`

现在说`startDateString`是`11/26/2012`下面给出的代码。我将时区设置为**America/New_York**

```
SimpleDateFormat df=new SimpleDateFormat("MM/dd/yyyy");

Date st = df.parse(startDateString);

Calendar startDate = Calendar.getInstance(TimeZone.getTimeZone("America/New_York"));

System.out.println("BEFORE : Start Date :"+startDate.getTime());

startDate.setTime(st);

System.out.println("AFTER : Start Date :"+startDate.getTime());

DateTimeZone timezone = DateTimeZone.forID("America/New_York");

DateTime actualStartDate = new DateTime(startDate,timezone);

System.out.println("JODA DATE TIME "+ actualStartDate); 
```

上面的代码片段的outout：

```
BEFORE : Start Date :Tue Nov 27 12:26:51 IST 2012

AFTER : Start Date :Mon Nov 26 00:00:00 IST 2012 //ok it sets date to 26th
                                                 //with all time parameters as 0.

JODA DATE TIME 2012-11-25T13:30:00.000-05:00 // here the date and 
                                             // time parameter are changed 
```

当我`actualStartDate`像这样创建我的问题时，我的问题是：

```
DateTime actualStartDate = new DateTime(startDate,timezone); 
```

日期更改为 25，时间更改为 13:00:00
我认为这是因为印度和美国之间的时区差异（从 IST 印度时间开始总计 -10:30）

我想要的是`JODA DATE TIME 2012-11-26T00:00:00.000-05:00`

我是否手动将`startDate`日历实例中的时间参数设置为`0`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:19:43.437

我怀疑问题是您正在*解析*默认时区。这：

```
AFTER : Start Date :Mon Nov 26 00:00:00 IST 2012 
```

表明您使用的时间是*IST*午夜- 而不是纽约或 UTC 的午夜。目前 IST 是 UTC 时间 18:30，因此您代表的时间是 25-11-25T18:30:00Z。

当您将其转换为纽约时间时，您最终会得到 2012-11-25T13:30:00-05:00，这正是 Joda Time 正在做的事情。

我强烈建议：

*   您完全避免使用 Java 库（这就是所有问题的根源——无论是在解析方面，还是让`Date.toString()`您感到困惑的结果）
*   您`LocalDate`用来表示日期，而不是`DateTime`. 毕竟，您试图代表一个*日期，而不是一个瞬间。*这完全绕过了时区，因为日期没有*时*区。

示例代码：

```
import java.util.*;

import org.joda.time.*;
import org.joda.time.format.*;

public class Test {
    public static void main (String[] args) {
        String text = "11/26/2012";
        DateTimeFormatter formatter =
            DateTimeFormat.forPattern("MM/dd/yyyy")
                          .withLocale(Locale.US);

        LocalDate date = formatter.parseLocalDate(text);
        System.out.println(date);
    }    
} 
```

一旦你*有了*，`LocalDate`如果你想找出特定时区的那一天开始的时刻，你可以使用[`LocalDate.toDateTimeAtStartOfDay(DateTimeZone)`](http://joda-time.sourceforge.net/api-release/org/joda/time/LocalDate.html#toDateTimeAtStartOfDay%28org.joda.time.DateTimeZone%29).

# qt - QTextEdit shift-tab 错误行为

> ID：13579116
> 
> 赞同：2
> 
> 时间：2012-11-27T07:11:47.627
> 
> 标签：qt, qtextedit, qplaintextedit

shift+tab 表现为 QTextEdit/QPlainTextEdit 中的选项卡。

看起来像一个没有好的解决方案的常见问题。

当 tab 增加缩进级别而 shift-tab 降低缩进级别时，是否有任何“经典”方式来启用此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-03T11:21:58.223

这是一个老问题，但我明白了。您只需要使用您自己的继承自它的类重新实现 QPlainTextEdit（或 QTextEdit），并覆盖 keyPressEvent。

默认情况下，选项卡会插入一个制表位，但下面的代码会捕获一个`Qt.Key_Backtab`事件，据我所知，这是您按下`Shift`+时发生的事件`Tab`。

我尝试并未能捕捉`Qt.Key_Tab`到一个`Qt.Key_Shift`or`Qt.Key_Tab`和一个 Shift 修饰符，所以这必须是这样做的方法。

```
import sys
from PyQt4 import QtCore, QtGui

class TabPlainTextEdit(QtGui.QTextEdit):
    def __init__(self,parent):
        QtGui.QTextEdit.__init__(self, parent)

    def keyPressEvent(self, event):
        if event.key() == QtCore.Qt.Key_Backtab:
            cur = self.textCursor()
            # Copy the current selection
            pos = cur.position() # Where a selection ends
            anchor = cur.anchor() # Where a selection starts (can be the same as above)

            # Can put QtGui.QTextCursor.MoveAnchor as the 2nd arg, but this is the default
            cur.setPosition(pos) 

            # Move the position back one, selection the character prior to the original position
            cur.setPosition(pos-1,QtGui.QTextCursor.KeepAnchor)

            if str(cur.selectedText()) == "\t":
                # The prior character is a tab, so delete the selection
                cur.removeSelectedText()
                # Reposition the cursor with the one character offset
                cur.setPosition(anchor-1)
                cur.setPosition(pos-1,QtGui.QTextCursor.KeepAnchor)
            else:
                # Try all of the above, looking before the anchor (This helps if the achor is before a tab)
                cur.setPosition(anchor) 
                cur.setPosition(anchor-1,QtGui.QTextCursor.KeepAnchor)
                if str(cur.selectedText()) == "\t":
                    cur.removeSelectedText()
                    cur.setPosition(anchor-1)
                    cur.setPosition(pos-1,QtGui.QTextCursor.KeepAnchor)
                else:

                    # Its not a tab, so reset the selection to what it was
                    cur.setPosition(anchor)
                    cur.setPosition(pos,QtGui.QTextCursor.KeepAnchor)
        else:
            return QtGui.QTextEdit.keyPressEvent(self, event)

def main():
    app = QtGui.QApplication(sys.argv)
    w = TabPlainTextEdit(None)
    w.show()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main() 
```

我仍在完善它，但[其余代码在 GitHub 上](https://gist.github.com/LegoStormtroopr/6146161)。

# c# - c#应用程序的密钥存储在哪里

> ID：13579119
> 
> 赞同：3
> 
> 时间：2012-11-27T07:12:08.690
> 
> 标签：c#, encryption

有类似的问题 [How to Manage Key in a Symmetric Algorithm](https://stackoverflow.com/questions/4165084/how-to-manage-key-in-a-symmetric-algorithm) [在哪里存储要在 SHA-1 哈希中使用的密钥？](https://stackoverflow.com/questions/7135080/where-to-store-a-secret-key-to-use-in-a-sha-1-hash)

我的问题是一样的，但我想问不同的问题

我有 C# 应用程序。我正在加密应用程序中的一些数据。对于加密，我使用密钥或密码。解密也需要同样的东西。

在哪里/如何在应用程序中存储此密钥或密码？它很容易从反射中查看字符串密码。我可能会使用一些组合来生成密码，但一些聪明的人可以通过一些努力猜到。

是否有任何安全的方法来存储或管理应用程序中用于加密数据的秘密密码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T07:36:17.563

我怀疑是否有任何安全的方式来存储密钥。最终，您的程序必须获得密钥的访问权，破解者可以通过逆向工程轻松计算出这是如何发生的，并将该字符串重定向到他们想要的任何地方。

您最好的选择是：

*   尽可能混淆密钥。这使得访问“密钥”变得更加困难，但并不意味着不可能（见上文）。与其将其存储为字符串，不如使用函数生成它，或者使用种子并将其传递给函数以获取秘密字符串。

*   如果您的用例允许，请使用公钥/私钥对。只有当您希望您的应用程序加密数据、将其发送到您的服务器，然后您想对其进行解密时，它才有效。在这种情况下，您将公钥嵌入到应用程序中（不管破解者是否发现），并将私钥保存给您自己或您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:36:36.250

如果您将密钥存储为应用程序设置，并加密应用程序设置，那么我认为您非常省钱。

您可以使用以下代码来加密 app.config 的各个部分。

```
using System;
using System.Configuration;

public static class ConfigurationEncryptor {
    [Flags]
    public enum ConfigurationSectionType {
        ConnectionStrings = 1,
        ApplicationSettings = 2
    }

    /// <summary>
    /// Encrypts the given sections in the current configuration.
    /// </summary>
    /// <returns>True is the configuration file was encrypted</returns>
    public static bool Encrypt(ConfigurationSectionType section) {
        bool result = false;

        Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
        if (config == null)
            throw new Exception("Cannot open the configuration file.");

        if (section.HasFlag(ConfigurationSectionType.ConnectionStrings)) {
            result = result || EncryptSection(config, "connectionStrings");
        }

        if (section.HasFlag(ConfigurationSectionType.ApplicationSettings)) {
            result = result || EncryptSection(config, "appSettings");
        }

        return result;
    }

    /// <summary>
    /// Encrypts the specified section.
    /// </summary>
    /// <param name="config">The config.</param>
    /// <param name="section">The section.</param>
    private static bool EncryptSection(Configuration config, string section) {
        ConfigurationSection currentSection = config.GetSection(section);
        if (currentSection == null)
            throw new Exception("Cannot find " + section + " section in configuration file.");
        if (!currentSection.SectionInformation.IsProtected) {
            currentSection.SectionInformation.ProtectSection("DataProtectionConfigurationProvider");
            config.Save();

            // Refresh configuration
            ConfigurationManager.RefreshSection(section);

            return true;
        }
        return false;
    }
} 
```

并像这样使用它（例如在您的 Main() 方法中）：

```
ConfigurationEncryptor.Encrypt(
    ConfigurationEncryptor.ConfigurationSectionType.ApplicationSettings |
    ConfigurationEncryptor.ConfigurationSectionType.ConnectionStrings
); 
```

# ruby-on-rails - ERB -- content_for_with_default

> ID：13579121
> 
> 赞同：0
> 
> 时间：2012-11-27T07:12:24.420
> 
> 标签：ruby-on-rails, erb

我试图在 ERB 模板中使用以下模式减少重复代码：

```
<% if content_for(some_key) %>
  <%= yield(some_key) %>
<% else %>
  Some default values here
<% end %> 
```

我尝试过定义以下方法，`ApplicationHelper`但可以理解的是它没有按预期工作；

```
def content_for_with_default(key, &block)
  if content_for?(key)
    yield(key)
  else
    block.call
  end
end 
```

这是我尝试使用它的方式：

```
<%= content_for_with_default(some_key) do %>
  Some default values here
<% end %> 
```

如何编写`content_for_with_default`帮助程序以使其具有预期效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:14:53.957

你的助手应该是这样的：

```
def content_for_with_default(key, &block)
  if content_for?(key)
    content_for(key)
  else
    capture(&block)
  end
end 
```

`capture(&block)`编辑：和之间的区别`block.call`

erb 文件编译后，块将是一些 ruby​​ 代码，如下所示：

```
');@output_buffer.append=  content_for_with_default('some_key') do @output_buffer.safe_concat('
');
@output_buffer.safe_concat('  Some default values here
'); end 
```

您会看到，块中的字符串连接到 output_buffer 并`safe_concate`返回整个 output_buffer。

结果，`block.call`也返回整个 output_buffer。但是，`capture(&block)`在调用块之前创建一个新缓冲区并且只返回块的内容。

# android - 使用 wifi 从手机与 PC 共享文件

> ID：13579124
> 
> 赞同：1
> 
> 时间：2012-11-27T07:12:31.973
> 
> 标签：android, android-wifi

在我的应用程序中，我必须使用 WiFi 与 PC 共享手机 SD 卡中的文件。我搜索但找不到解决方案。请帮帮我？

# c# - 无法处理 System.Data.SqlTypes.SqlNullValueException

> ID：13579127
> 
> 赞同：6
> 
> 时间：2012-11-27T07:12:42.680
> 
> 标签：c#, asp.net, sql-server-2008, null, sqlexception

我有以下代码：

```
public string getFinalCon(string desid)
        {
            string finalConId = null;
            try
            {
                query = "select finalConID from discussions where desid=@did";
                com = new SqlCommand(query, con);
                com.Parameters.AddWithValue("@did", desid);
                con.Open();
                sdr = com.ExecuteReader();
                while (sdr.Read())
                {
                    if (sdr.GetString(0).Equals("none") == false && sdr.GetString(0)!=null)
                    {
                        finalConId = sdr.GetString(0);
                        break;
                    }
                }
                con.Close();
            }
            catch (Exception)
            {
            }
            return finalConId;
        } 
```

如您所见，我正在捕获“异常”，即全局异常。但问题是，每当执行finalConId=sdr.GetString(0)这行代码时，系统就会抛出System.Data.SqlTypes.SqlNullValueException。是的，只要相应字段的数据库中有 NULL 值，它肯定会抛出它。但我想要的是这个异常应该被 catch 块捕获，并且函数应该返回 finalConId 的默认值，即函数开始时声明的 NULL。但这并没有发生，而是显示了我的错误页面。我这样调用这个函数：

```
string conid = getFinalCon(Request["id"].ToString());

if (conid == null)
{ /*---some code---*/}
else
{/*---some code---*} 
```

请任何人告诉我如何处理此异常。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T07:17:09.547

不要在不需要时捕获异常。正确的方法是`sdr.IsDBNull(0)`在调用之前进行测试`sdr.GetString(0)`。如果[`IsDBNull()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.isdbnull.aspx)返回 true，那么`GetString()`将抛出一个异常并且你不应该调用它。

在不指示某种错误的情况下吞下所有异常 也是**非常糟糕的做法。**`catch { }`或者`catch (Exception) { }`在几乎所有情况下都应该避免。如果发生灾难性事件（例如，数据库连接断开），您希望允许该异常传播。否则，调用者如何区分“该列中的空值”和“数据库连接死亡”的情况？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T07:15:46.017

最好像这样使用 DBNull.Value 或 IsDBNull() 检查值

```
if (reader.IsDBNull(0) && sdr.GetString(0).Equals("none") == false)
          //sdr.GetString(0)!=DBNull.Value) 
```

如果你想在异常时返回 null 而不是这样

```
string conid;
try
{
  conid = getFinalCon(Request["id"].ToString());
}
Catch(Exception ex)
{
  conid =null;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-24T17:12:31.133

你得到一个 System.Data.SqlTypes.SqlNullValueException 因为程序试图从数据库中读取一些东西是 NULL。您可以通过在阅读之前检查该值是否为 NULL 来解决此问题。

试试下面的代码：

```
query = "select finalConID from discussions where desid=@did";
com = new SqlCommand(query, con);
com.Parameters.AddWithValue("@did", desid);
con.Open();
sdr = com.ExecuteReader();
while (sdr.Read())
{
    if (sdr.GetString(0).Equals("none") == false && !sdr.IsDBNull(0) )
    {
        finalConId = sdr.GetString(0);
        break;
    }
}
con.Close();
enter code here 
```

sdr.IsDBNull(0) 将检查您要读取的值是否为 NULL。这将解决您的错误:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-08T00:17:49.743

您可以在“while”循环中使用以下结构（考虑是否使用基于 ADO 连接的数据访问层）。

```
 if (reader["X"]is DBNull)
                { a = "N/A";}
                else
                { a = reader.GetString(reader.GetOrdinal("X")); } 
```

其中`X`是您的数据库的别名或行名的名称，并且`a`是您将该阅读器链接到的对象。

在我的示例中，要考虑的一件事`X`是字符串。

如您所见，您正在处理该特定的 Null 引用。

# sql - SQL Server 2008 列出不在表中的项目

> ID：13579131
> 
> 赞同：1
> 
> 时间：2012-11-27T07:12:57.610
> 
> 标签：sql, sql-server, sql-server-2008

一个简单的查询，应该查看`systemSoftware`表格和软件表格，并只显示`softwareId`不在`systemSoftware`表格内的内容。

到目前为止，这是我的查询...

```
SELECT s.softwareId AS 'Software ID',
    s.softwareDescription AS 'Software Description',
    sv.vendorName AS 'Vendor Name',
    c.cityName AS 'City Name'
FROM software AS s
JOIN systemSoftware AS ss
ON s.softwareId = ss.softwareId
JOIN softwareVendor AS sv
ON s.vendorId = sv.vendorId
JOIN city AS c
ON sv.zipCode = c.zipCode
WHERE s.softwareId NOT IN (ss.softwareId)
ORDER BY s.softwareId
GO 
```

当我删除 NOT 时，它会`softwareId`显示`systemSoftware`.

问题是我想要相反的。那些不在`systemSoftware`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:16:20.487

你需要一个左外连接：

```
SELECT ss.softwareId AS 'Software ID',
    s.softwareDescription AS 'Software Description',
    sv.vendorName AS 'Vendor Name',
    c.cityName AS 'City Name'
FROM software AS s
left outer JOIN systemSoftware AS ss
ON s.softwareId = ss.softwareId
left outer JOIN softwareVendor AS sv
ON s.vendorId = sv.vendorId
left outer JOIN city AS c
ON sv.zipCode = c.zipCode
WHERE ss.softwareId is NULL
ORDER BY s.softwareId 
```

我还更改了`ORDER BY`, 因为按不存在的列排序是没有意义的。

# sockets - 如何让不同的进程使用不同的网络接口？

> ID：13579134
> 
> 赞同：4
> 
> 时间：2012-11-27T07:13:20.297
> 
> 标签：sockets, networking, network-programming

我在客户端。有多个网络接口。如何让不同的进程使用不同的网络接口进行通信？由于我想连接到同一台服务器，路由似乎在这里不起作用。此外，`connect()`没有参数来指定本地地址或接口`bind()`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T07:24:21.567

如果您的目标是通过并行使用多个网络接口来增加服务器的带宽，那么这可能不是您可以（或不应该）在应用程序级别做的事情。相反，您应该研究[Link Aggregation](http://en.wikipedia.org/wiki/Link_aggregation)，然后配置您的计算机和网络堆栈以使用它。一旦正常工作，您将自动获得所需的并行化加速，而客户端应用程序无需执行任何特殊操作即可启用它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T10:42:44.700

> “bind() 系统调用经常被误解。它用于绑定到特定的 IP 地址。只有发往该 IP 地址的数据包才会被接收，并且任何传输的数据包都将以该 IP 地址作为其源。bind() 确实对传输数据包的路由没有任何控制。例如，如果您绑定到 eth0 的 IP 地址，但您将数据包发送到内核的最佳路由到 eth1 的目的地，它会很高兴地将数据包发送到 eth1 并带有eth0 的源 IP 地址。这对于 TCP/IP 非常有效，其中数据包可以在到达目的地的途中穿越不相关的网络。

更多信息，例如[这里](http://codingrelic.geekhold.com/2009/10/code-snippet-sobindtodevice.html)。

这就是为什么您可能误解了 bind() 调用。

绑定到物理拓扑（到某些特定接口）的适当方法是使用`SO_BINDTODEVICE`套接字选项。这是通过`setsockopt()`调用完成的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T17:28:33.100

`Source Policy Routing`可能会有所帮助。

尝试以下步骤：

*   用于`iptables`为来自不同进程的数据包赋予不同的标记。
*   用于`iproute2`将具有不同标记的数据包路由到不同的表。
*   在不同的表中，将默认路由设置为不同的上行链路。

整个过程需要对linux网络有一定的了解。

下面是一个示例，展示了如何通过一个特定的上行链路为用户路由所有流量：http: [//www.nifiestsoftware.com/2011/08/28/making-all-network-traffic-for-a-linux-user-使用特定网络接口/](http://www.niftiestsoftware.com/2011/08/28/making-all-network-traffic-for-a-linux-user-use-a-specific-network-interface/)

您可以尝试通过使用不同的用户运行不同的进程并将流量从一个用户路由到一个上行链路来遵循类似的方法。

您还可以让进程与具有不同端口的服务器通信，并按端口标记流量。

# c++ - 编辑控件边框和WM_CTLCOLOREDIT？

> ID：13579136
> 
> 赞同：0
> 
> 时间：2012-11-27T07:13:26.020
> 
> 标签：c++, winapi, user-interface

我尝试执行以下操作，但没有显示框架/边框。我尝试了 FrameRect 和 Rectangle。任何想法，为什么这不起作用？

```
case WM_CTLCOLOREDIT: 
          {
              HDC hdC = (HDC)wParam;

              SetTextColor( hdC, RGB(112,112,112) );

              SetBkMode( hdC, TRANSPARENT );

                RECT rect;
                GetClientRect( (HWND)lParam, &rect );                    
                HBRUSH hBrush = CreateSolidBrush( RGB(209,209,209) );
                   //FrameRect( hdC, &rect, hBrush );
                   Rectangle( hdC, (int)rect.left, (int)rect.top, (int)rect.right, (int)rect.bottom );
                DeleteObject( hBrush );

              LOGBRUSH lb;
              lb.lbStyle = BS_SOLID;
              lb.lbColor = RGB(249,249,249);
              lb.lbHatch = 0;
              return (LRESULT)CreateBrushIndirect(&lb);
          }
          break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:44:55.647

好的，开始工作了。上面代码的问题是当 WM_CTLCOLOREDIT 返回时，系统用返回的画笔绘制编辑控件，所以任何绘制都被清除了。因此，不要返回使用 CreateBrushIndirect 创建的画笔，而是返回 NULL 画笔，方法是从 GetStockObject(NULL_BRUSH) 获取它。

Rectangle 函数绘制一个矩形。矩形使用当前笔勾勒出轮廓，并使用当前画笔填充。所以这行得通。

# java - ArrayList 在迭代期间拾取最后一项

> ID：13579141
> 
> 赞同：1
> 
> 时间：2012-11-27T07:13:47.660
> 
> 标签：java, json, rest, arraylist, jersey

创建了一个简单的 Web 服务，其中包含一个包含 Car 类列表的 Person 类。

人物类：

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Person {
       private String lastName;
       private String firstName;    
       private List<Car> cars;

     // Getters & Setters 
} 
```

车类：

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Car {
       private String year;
       private String make;
       private String model;

       // Getters & Setters
} 
```

创建了一个不同的对象来存储我的查询。

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class ResponseOutput {

       private String year;
       private String make;
       private String model;

       // Getter and Setters
} 
```

这是我的实际客户（基于 Jersey 的 Restful Web 服务）：

```
@Path("")
public class MyWebService {
       @GET
       @Path("showPerson")
       @Produces(MediaType.APPLICATION_JSON)
       public Person getPerson {
              Person person = new Person();
              person.setFirstName = "John";
              person.setLastName = "Doe";

              Car car1 = new Car();
              car1.setYear("2012");
              car1.setMake("Toyota");
              car1.setModel("Corolla");

              Car car2 = new Car();
              car2.setYear("2011");
              car2.setMake("Ford");
              car2.setModel("Focus");

              List<Car> cars = new ArrayList<Car>();
              cars.add(car1);
              cars.add(car2);

              person.setCars(cars);
              return person;
     }

     @GET
     @Path("{name}")
     @Produces(MediaType.APPLICATION_JSON) 
     public ResponseOutput getCar(@PathParam("name") String name) 
     {
            ResponseOutput output = new ResponseOutput();
            Person person = getPerson();

            List<Car> cars = person.getCars();

            for (Car car : cars) {
              if (name.equals(car.getMake())); {
                   System.out.println("\n\tcar.getMake(): " + "\n");
                   output.setMake(car.getMake());
              }         
            }
            return output;
     }
} 
```

当我按如下方式调用 getPerson() 方法时：

```
curl -X GET http://localhost:8080/myapp/showPerson 
```

它返回一个 201 包含这个 JSON 对象（这是我想要的）：

```
{"cars":[{"make":"Toyota","model":"Corolla","year":"2012"},
{"make":"Ford","model":"Focus","year":"2011"}],"firstName":"John","lastName":"Doe"} 
```

但是，当我按如下方式调用 getCar 方法（）时：

```
curl -X GET http://localhost:8080/myapp/toyota 
```

我得到以下 JSON 对象（添加了 ArrayList 中的第二项！）：

```
{ "make":"Ford", "model":"null", "year":"null" } 
```

我希望它是丰田而不是福特。

如果你能说出来，我打印出 car.getMake() 字符串的值，并在控制台/外壳内，它的方式是这样说的：

```
car.getMake(): Toyota

car.getMake(): Ford 
```

所以，似乎它遍历列表但添加了最后一项（或只是下一项）？

我可能做错了什么？感谢您抽出时间来阅读...

# sql - 如何在 DB2 中透视表？

> ID：13579143
> 
> 赞同：9
> 
> 时间：2012-11-27T07:13:54.943
> 
> 标签：sql, db2

我有下面的表 A，其中对于每个唯一 ID，有三个具有某些值的代码。

```
 ID    Code    Value
---------------------
 11       1       x
 11       2       y
 11       3       z
 12       1       p
 12       2       q
 12       3       r
 13       1       l
 13       2       m
 13       3       n 
```

我有第二个表 B，格式如下：

```
Id   Code1_Val   Code2_Val    Code3_Val 
```

这里每个唯一 ID 只有一行。我想为第一个表中的每个 id 从第一个表 A 填充第二个表 B。

对于上面的第一个表 A，第二个表 B 应为：

```
Id   Code1_Val   Code2_Val    Code3_Val
---------------------------------------------
11       x          y             z
12       p          q             r
13       l          m             n 
```

如何在单个 SQL 查询中实现这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-04-21T23:03:29.760

```
 select Id,                                              
      max(case when Code = '1' then Value end) as Code1_Val,  
      max(case when Code = '2' then Value end) as Code2_Val,  
      max(case when Code = '3' then Value end) as Code3_Val   
      from TABLEA                                     
      group by Id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T19:37:48.353

如果你的版本没有`DECODE()`，你也可以使用这个：

```
INSERT INTO B (id, code1_val, code2_val, code3_val)  
WITH Ids (id) as (SELECT DISTINCT id
                  FROM A) -- Only to construct list of ids

SELECT Ids.id, a1.value, a2.value, a3.value
FROM Ids -- or substitute the actual id table
JOIN A a1
     ON a1.id = ids.id
        AND a1.code = 1
JOIN A a2
     ON a2.id = ids.id
        AND a2.code = 2
JOIN A a3
     ON a3.id = ids.id
        AND a3.code = 3 
```

（适用于我的 V6R1 DB2 实例，并有一个[SQL Fiddle Example](http://sqlfiddle.com/#!1/46c18/1)）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-06T12:22:07.250

```
SELECT Id,
max(DECODE(Code, 1, Value)) AS Code1_Val,
max(DECODE(Code, 2, Value)) AS Code2_Val,
max(DECODE(Code, 3, Value)) AS Code3_Val
FROM A
group by Id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T07:23:07.400

这是一个[SQLFiddle 示例](http://sqlfiddle.com/#!3/67506/5)

```
insert into B (ID,Code1_Val,Code2_Val,Code3_Val)
select Id, max(V1),max(V2),max(V3) from
(
select ID,Value V1,'' V2,'' V3 from A where Code=1
union all
select ID,'' V1, Value V2,'' V3 from A where Code=2
union all
select ID,'' V1, '' V2,Value V3 from A where Code=3
) AG
group by ID 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T07:27:05.763

您想要透视您的数据。由于 DB2 没有数据透视函数，所以您可以使用 Decode（基本上是一个 case 语句。）

语法应该是：

```
SELECT Id,
   DECODE(Code, 1, Value) AS Code1_Val,
   DECODE(Code, 2, Value) AS Code2_Val,
   DECODE(Code, 3, Value) AS Code3_Val
FROM A 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-20T06:55:47.430

这是 SQL 查询：

```
insert into pivot_insert_table(id,code1_val,code2_val, code3_val) 
select * from (select id,code,value from pivot_table)
pivot(max(value) for code in (1,2,3)) order by id ; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-06T12:31:27.797

```
 WITH Ids (id) as 
 (
  SELECT DISTINCT id FROM A
  )
 SELECT Ids.id, 
 (select sub.value from A sub where Ids.id=sub.id and sub.code=1 fetch first rows only) Code1_Val,

 (select sub.value from A sub where Ids.id=sub.id and sub.code=2 fetch first rows only) Code2_Val,

 (select sub.value from A sub where Ids.id=sub.id and sub.code=3 fetch first rows only) Code3_Val
 FROM Ids 
```

# sencha-touch-2 - Sencha构建生产错误

> ID：13579147
> 
> 赞同：1
> 
> 时间：2012-11-27T07:14:24.770
> 
> 标签：sencha-touch-2, production

我已成功创建生产版本。当我尝试从 chrome 访问生产版本时，我遇到了错误

> 错误：[Ext.Loader] 无法通过 XHR 同步加载：'src/field/Select.js'；请验证该文件是否存在。XHR 状态码：404

我已经`Ext.field.Select`根据需要在 app.js 中包含了。

请告诉我我现在该怎么办

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T18:29:43.110

在您的脚本开始之前，即在 app.js 中。尝试添加`Ext.Loader.setConfig({ enabled: true });` [检查这个](http://docs.sencha.com/touch/2-0/#!/api/Ext.Loader)

或者

另外，在 app.js 产品环境目录中设置 sdk 的 src：[Ext.Loader](http://docs.sencha.com/touch/2-0/#!/api/Ext.Loader-cfg-paths)

# iphone - drawRect中的多个CGContextRef

> ID：13579149
> 
> 赞同：0
> 
> 时间：2012-11-27T07:14:31.197
> 
> 标签：iphone, objective-c, ios, ipad, cocoa-touch

在覆盖 UIView drawRect 时，我使用`CGContextDrawImage`. 在它上面我需要绘制另一个图像（使用多重混合模式），所以我实际上需要*在*它上面绘制。

第二张图片需要准备，因为它是动态生成的（它必须被屏蔽，可能大小不同等等），所以最后我需要生成它。如何获得第二个上下文，我可以在将第二个图像应用到主图像**之前绘制和遮罩它？**如果我在当前上下文上绘制，它会在我屏蔽它之前直接绘制而不是主要的。

```
- (void) drawRect:(CGRect)rect
{
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    CGContextDrawImage(ctx, CGRectMake(0, 0, rect.size.width, rect.size.height), [UIImage imageNamed:@"actionBg.png"].CGImage);

    // prevent the drawings to be flipped
    CGContextTranslateCTM(ctx, 0, rect.size.height);
    CGContextScaleCTM(ctx, 1.0, -1.0);

    // generate the overlay
    if ([self isActive] == NO && self.fullDelay != 0) { // TODO: remove fullDelay check!
        int segmentSize = (ACTION_SIZE / [self fullDelay]);

        for (int i=0; i<[self fullDelay]; i++) {
            float alpha = 0.9 - (([self fullDelay] * 0.1) - (i * 0.1));
            [[UIColor colorWithRed:120.0/255.0 green:14.0/255.0 blue:14.0/255.0 alpha:alpha] setFill];

            if (currentDelay > i) {
                CGRect r = CGRectMake(0, i * segmentSize, ACTION_SIZE, segmentSize);
                CGContextFillRect(ctx, r);
            }
            [[UIColor colorWithRed:1 green:1 blue:1 alpha:0.3] setFill];
            CGRect line = CGRectMake(0, (i * segmentSize) + segmentSize - 1 , ACTION_SIZE, 1);
            CGContextFillRect(ctx, line);
        }

        UIImage *overlay = UIGraphicsGetImageFromCurrentImageContext();
        UIImage *overlayMasked = [TDUtilities maskImage:overlay withMask:[UIImage imageNamed:@"actionMask.png"]];
    }
} 
```

这里的 overlayMasked 现在包含正确的图像，但由于我已经使用主要上下文准备了它，所以它并不是一团糟。谢谢

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:27:01.693

您可以使用[`UIGraphicsBeginImageContextWithOptions`](http://developer.apple.com/library/ios/documentation/2DDrawing/Conceptual/DrawingPrintingiOS/HandlingImages/Images.html#//apple_ref/doc/uid/TP40010156-CH13-SW8)或来创建位图上下文[`CGBitmapContextCreate`](http://developer.apple.com/library/ios/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-CJBHBFFE)。在位图上下文中完成绘制后，您可以使用`UIGraphicsGetImageFromCurrentImageContext`or `CGBitmapContextCreateImage`（根据需要）获取图像，然后使用`UIGraphicsEndImageContext`or释放上下文`CGContextRelease`。

# php - 花式框和提交按钮

> ID：13579152
> 
> 赞同：0
> 
> 时间：2012-11-27T07:14:55.150
> 
> 标签：php, javascript, jquery, fancybox

我在 Fancy 框中有一个提交按钮，但是当我按下它时它没有提交。这是我的标记。

```
<?php print \Fuel\Core\Form::open('user/search/find/constructor'); ?>
<ul class="other-region">
    /* bunch of forms inputs and selections */
</ul>

/*The submit form outside the fancy box modal*/
<?php print \Fuel\Core\Form::submit('Submit', '絞り込む',
        array('class'=>'redBtn positionRight','title'=>'絞り込む')); ?>

<!-- Start Hidden Divs for Modal -->
<div id="buildersMoreDetails" style="display: none;">
    <h2>詳細条件</h2>
        <table class="moreDetails">
                /* Also a bunch of input forms that are inside the modal */
                <tr>
                /* Submit button inside the Modal */
            <td colspan="2">
                    <?php print \Fuel\Core\Form::submit('Submit2', '検索',
                            array('class'=>'redBtn f-right','title'=>'検索')); ?>
                </td>
        </tr>
    </table>
</div>
<?php print Fuel\Core\Asset::js('jquery.fancybox.js'); ?>
<?php print Fuel\Core\Asset::css('jquery.fancybox.css'); ?>
<?php print \Fuel\Core\Form::close(); ?>
<script type="text/javascript">
$(document).ready(function() {
    $('.fancybox').fancybox({
        closeBtn: false,
        helpers : {
            title : null            
        }     
    });
});
</script> 
```

模式中必须有一些东西可以取消提交按钮。我想在不使用 Ajax 的情况下做到这一点，因为模态内部和外部的提交按钮的目的是相同的。

# c++ - 在 OpenCV 中显式复制像素值时出现空白帧

> ID：13579156
> 
> 赞同：0
> 
> 时间：2012-11-27T07:15:21.837
> 
> 标签：c++, video, opencv, video-processing

我一直在使用 OpenCV 2.4.3 将一些视频处理代码移植到 C++。以下测试程序密切模仿我的代码如何从视频中读取每一帧，对其内容进行操作，然后将新帧写入新的视频文件。

奇怪的是，当单独设置像素时，输出帧完全是黑色的，但在克隆整个帧时却正确写入**。**

在实践中，我会使用这两个宏来访问和分配所需的值，但示例中使用的顺序扫描更清楚地显示了这个想法。

有谁知道我要去哪里错了？

`test.cpp`：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>
#include <string>
using namespace std;
using namespace cv;

#define RGB_REF(PR,NC,R,C,CH) (*((PR) + ((3*(NC)*(R)+(C))+(CH))))
#define GRAY_REF(PR,NC,R,C) (*((PR) + (NC)*(R)+(C)))

int main(int argc, char* argv[])
{
    string video_path(argv[1]);
    cerr << "Video path is " + video_path + "\n";
    VideoCapture capture(video_path);
    if ( !capture.isOpened() )
    {
        cerr << "Input file could not be opened\n";
        return 1;
    } else
    {
        string output_path(argv[2]);
        VideoWriter output;
        int ex = (int)capture.get(CV_CAP_PROP_FOURCC);
        Size S = Size((int) capture.get(CV_CAP_PROP_FRAME_WIDTH),
                (int) capture.get(CV_CAP_PROP_FRAME_HEIGHT));
        output.open(output_path,ex,capture.get(CV_CAP_PROP_FPS),S,true);
        if ( !output.isOpened() )
        {
            cerr << "Output file could not be opened\n";
            return 1;
        }
        unsigned int numFrames = (unsigned int) capture.get(CV_CAP_PROP_FRAME_COUNT);
        unsigned int m = (unsigned int) capture.get(CV_CAP_PROP_FRAME_HEIGHT);
        unsigned int n = (unsigned int) capture.get(CV_CAP_PROP_FRAME_WIDTH);
        unsigned char* im = (unsigned char*) malloc(m*n*3*sizeof(unsigned char));
        unsigned char* bw = (unsigned char*) malloc(m*n*3*sizeof(unsigned char));
        Mat frame(m,n,CV_8UC3,im);
        Mat outputFrame(m,n,CV_8UC3,bw);
        for (size_t i=0; i<numFrames; i++)
        {
            capture >> frame;
            for (size_t x=0;x<(3*m*n);x++)
            {
                bw[x] = im[x];
            }
            output << outputFrame; // blank frames
//            output << frame;  // works
//            output << (outputFrame = frame); // works
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:49:35.380

当您从 VideoCapture 中查询帧时`capture >> frame;`，`frame`会修改。比如说，它有一个新的数据缓冲区。所以`im`不再指向`frame`.
尝试
`bm[x] = frame.ptr()[x];`

# iphone - 如何在屏幕游戏中移动圆圈

> ID：13579157
> 
> 赞同：2
> 
> 时间：2012-11-27T07:15:24.193
> 
> 标签：iphone, box2d, box2d-iphone

> **可能重复：**
> [使用 Box2d (iOS) 拖放 UIView](https://stackoverflow.com/questions/8886827/drag-and-drop-uiviews-with-box2d-ios)

在屏幕底部创建圆圈 如果我触摸圆圈，它将进入屏幕顶部，如果我触摸，它会下降到屏幕底部。我怎样才能创建这种类型的游戏？任何人都有一些关于这类游戏的教程，然后给我教程。在此先感谢

# asp.net - Matrix RDLC 中的内存不足异常

> ID：13579160
> 
> 赞同：1
> 
> 时间：2012-11-27T07:15:25.247
> 
> 标签：asp.net, rdlc

我正在处理 RDLC 报告，其中我使用矩阵来显示数据。

但问题是当大量数据正在加载时，报告没有打开，而是显示错误`System.Outofmemoryexception.`

没有包含大量数据的矩阵的报告运行良好。

我试图加载的记录大约是 80,000 条记录。有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:02:28.807

当以下一种或多种情况为真时，计算机没有足够的内存来完成请求的操作：

*   报告太大或太复杂。
*   其他正在运行的进程的开销非常高。
*   计算机的物理内存太小。

报告分两个阶段处理。这两个阶段是执行和渲染。此问题可能发生在执行阶段或呈现阶段。

如果在执行阶段出现这个问题，很可能是因为查询结果返回的数据占用了过多的内存。此外，以下因素会影响执行阶段的内存消耗：

*   分组
*   过滤
*   聚合
*   排序
*   自定义代码

如果在渲染阶段出现这个问题，原因与报表显示什么信息以及报表如何显示信息有关。

解决方案：

1.  将 SQL Server 配置为使用超过 2 GB 的物理内存
2.  安排报告在内存限制较低的非工作时间运行。
3.  相应地调整 MemoryLimit 设置。
4.  升级到 64 位版本的 Microsoft SQL Server 2005 Reporting Services。
5.  重新设计报表，例如在报表查询中返回更少的数据。对报表查询的 WHERE 子句使用更好的限制。将复杂聚合移动到数据源。
6.  将报告导出为其他格式。您可以通过使用不同的格式来显示 Excel、PDF 等报告来减少内存消耗
7.  简化报表设计，例如在报表中包含更少的数据区域或控件，或使用钻取报表来显示详细信息。

# qml - IntValidator-使用qml

> ID：13579161
> 
> 赞同：1
> 
> 时间：2012-11-27T07:15:26.387
> 
> 标签：qml

我是qml的新手。在我的文本输入框中，它仅使用 9 位数字`intValidator`。10位以上怎么读？？？

谁能帮帮我吗。

代码在这里

```
TextInput 
{       
    id: uid  
    maximumLength: 100                      
    width: maximumLength * 20    
    focus: true     
    validator: IntValidator{bottom:0; top:9999999999}   
    KeyNavigation.down: bioSelector    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T12:59:48.803

**你可以这样做：**

```
validator: RegExpValidator { regExp: /\d+/ } 
```

# css - 如何使用 CSS 在单击按钮时创建不可点击的屏幕

> ID：13579164
> 
> 赞同：-2
> 
> 时间：2012-11-27T07:15:46.463
> 
> 标签：css

我想通过使用 CSS 在按钮的单击事件上在屏幕上传播任何颜色的透明层来使屏幕不可点击。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:20:52.830

使用 jQuery 和 CSS，您可以定义一个类 .spread ：

```
.spread {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: white;
    opacity: 0.5;
    z-index: 200;
} 
```

当您单击按钮时：

```
$('body').append("<div class='spread'></div>"); 
```

这会将 div 添加到正文中，并且 div 会将自身定位在左上角。您可能还需要输入：

```
body {
    margin: 0;
} 
```

示例：http: [//jsfiddle.net/jcolicchio/TuP2A/](http://jsfiddle.net/jcolicchio/TuP2A/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:29:21.147

应该超级简单

HTML

```
<body>
   some code here
   <div class=overlay><div>
</body> 
```

CSS

```
.overlay {
   position: fixed;
   z-index:100;
   top:0;right:0;bottom:0;left:0;
   background: rgba(0,0,0,.0);
} 
```

# c# - textBox 中的值未插入数据库

> ID：13579166
> 
> 赞同：1
> 
> 时间：2012-11-27T07:15:51.983
> 
> 标签：c#, asp.net, database, textbox

这是我从文本字段插入数据库的代码。

```
SqlConnection Connection = new SqlConnection("Data Source=ESHA\\SQLEXPRESS;Initial Catalog=Gen_Lic;User ID=sa;Password=sa@");           

SqlCommand Command = Connection.CreateCommand();

try
{
// Open Connection             
Connection.Open();
////Console.WriteLine("Connection Opened");
// Create INSERT statement with named parameters             
Command.CommandText = "INSERT  INTO Gen_Lic(Lic_No, UserID, Org, UserName, SolType, Version, Lic_Type, Meap_Supp, Lic_From, Lic_To, Supp_From, Supp_To, Max_User, Max_Mach, Mach_IP, Mach_MAC) VALUES (@Lic_No, @UserID, @Org, @UserName, @SolType, @Version, @Lic_Type, @Meap_Supp, @Lic_From, @Lic_To, @Supp_From, @Supp_To, @Max_User, @Max_Mach, @Mach_IP, @Mach_MAC)";
// Add Parameters to Command Parameters collection  

Command.Parameters.AddWithValue("@Lic_No", txtLNo.Text);
Command.Parameters.AddWithValue("@UserID", txtUID.Text);
Command.Parameters.AddWithValue("@Org", txtOrg.Text);
Command.Parameters.AddWithValue("@UserName", txtUName.Text);
Command.Parameters.AddWithValue("@SolType", txtSType.Text);
Command.Parameters.AddWithValue("@Version", txtVer.Text);
Command.Parameters.AddWithValue("@Lic_Type", drpLType.SelectedItem.Text);
Command.Parameters.AddWithValue("@Meap_Supp", rdoMeapSupport.SelectedValue.ToString());
Command.Parameters.AddWithValue("@Lic_From", lblLFrom.Text);
Command.Parameters.AddWithValue("@Lic_To", lblLTo.Text);
Command.Parameters.AddWithValue("@Supp_From", lblSuppFrom.Text);
Command.Parameters.AddWithValue("@Supp_To", lblSuppTo.Text);
Command.Parameters.AddWithValue("@Max_User", txtMaxUsr.Text);
Command.Parameters.AddWithValue("@Max_Mach", txtMaxMach.Text);
Command.Parameters.AddWithValue("@Mach_IP", txtMachIP.Text);
Command.Parameters.AddWithValue("@Mach_MAC", txtMachMac.Text);

Connection.Close();

} 
```

现在的问题是代码工作正常，但值没有插入到数据库中。此外，当我在连接形成开始时应用断点时，会打开一个新的空白 IE 窗口。

有人可以指导我哪里出错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T07:18:32.830

我认为，您缺少以下内容：

```
Command.ExecuteNonQuery(); 
```

之前`Connection.Close()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:18:45.917

请在数据库中再次运行此查询

```
Command.ExecuteNonQuery(); 
```

在关闭连接之前

# asp.net - 网格视图中的下拉列表未触发 selectedindex 更改事件

> ID：13579167
> 
> 赞同：1
> 
> 时间：2012-11-27T07:16:02.440
> 
> 标签：asp.net, gridview

我在不触发 gridview 中下拉列表的选定索引更改事件时遇到问题。我经历了[SO Thread](https://stackoverflow.com/questions/485390/why-isnt-the-selectedindexchanged-event-firing-from-a-dropdownlist-in-a-gridvie)。它并不完全适合我。我有如下实现。

**.ASPX**

```
<asp:DropDownList ID="DDL1" runat="server" AutoPostBack="true"   OnSelectedIndexChanged="DDL1_SelectedIndexChanged">
  <asp:ListItem Text="Review" Value="Review" Selected="True">Review</asp:ListItem>
  <asp:ListItem Text="Level1" Value="lvl1">Send Back to Level1</asp:ListItem>
</asp:DropDownList> 
```

**。CS**

```
protected void Page_Load(object sender, EventArgs e)
  {
   if(!Page.IsPostBack)
  {
    // Bind the GridView to something.
       DataBindGrid();
  }
 else {
    // Bind the GridView again to maintain previous entered data in the gridview
       DataBindGrid();
  }
  }

  protected void DDL1_SelectedIndexChanged(object sender, EventArgs e)
  {
      this.lblCity.Text = ((DropDownList)sender).SelectedValue;
  }

protected void grdPoll_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if(Page.IsPostBack)
  {
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
      DropDownList ddl = e.Row.FindControl("DDL1") as DropDownList;
      if(ddl != null)
      {
        ddl.SelectedIndexChanged += new EventHandler(DDL1_SelectedIndexChanged);
      }
    }
  }
} 
```

当我 `if(!Page.IsPostBack)`只保留块时，它工作正常。但我也想`else`阻止。执行有什么问题。你能建议解决方案吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:33:43.820

问题是 !Page.IsPostBack 块之后的块，这不是您所说的其他事件部分。您在回发时再次绑定网格，这会导致事件丢失。您不必再次绑定它以在网格中进行更改。

删除此代码。

```
{
   // Bind the GridView again to maintain previous entered data in the gridview
   DataBindGrid();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:51:15.820

试试这个：

```
protected void Page_Load(object sender, EventArgs e)
{
   if(!Page.IsPostBack)
  {
    // Bind the GridView to something.
       DataBindGrid();
  }
 else {
    // Bind the GridView again to maintain previous entered data in the gridview
       //DataBindGrid(); //remove DataBindGrid(); from else
  }
}

protected void DDL1_SelectedIndexChanged(object sender, EventArgs e)
{
     this.lblCity.Text = ((DropDownList)sender).SelectedValue;
     DataBindGrid();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-27T09:36:24.577

将事件名称“Page_Load”替换为“Page_PreRender”

# php - CDataProvider 列长度

> ID：13579169
> 
> 赞同：0
> 
> 时间：2012-11-27T07:16:13.433
> 
> 标签：php, yii, dataprovider

我有网格

```
<?php $this->widget('bootstrap.widgets.TbGridView',array(
    'id'=>'products-grid',
    'htmlOptions'=>array('class'=>'grid-view table-striped',),
    'dataProvider'=>$model->search(),
    'columns'=>$columns,
)); ?> 
```

$模型->搜索（）

```
return new CActiveDataProvider($this, array(
            'criteria' => $criteria,
            'pagination' => array('pageSize' => 50)
        )); 
```

我需要限制每列的长度。例如，如果第 1 列有值

> “你好世界”

第一列的配置变量是 7，然后我需要渲染

> “你好W……”

我想，我可以用行为来解决我的问题，对吗？请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:18:53.967

将您的搜索功能更改为此..不确定它是否最快

```
public function search(){
$returnarray = array();
$dataset =  new CActiveDataProvider($this, array(
            'criteria' => $criteria,
            'pagination' => array('pageSize' => 50)
        ));
    foreach($dataset as $ds){
        $returnarray['your_table_index'] = (strlen($ds->your_element) > 8) ? substr($ds->your_element,0,7).'...' : $ds->your_element;
    }
   return $returnarray;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:05:04.297

[CDataColumn 值选项](http://www.yiiframework.com/doc/api/1.1/CDataColumn#value-detail)对我有帮助

```
foreach($columns as &$column)
{
    if($column['name'] == 'number')
    {
         $column['value'] = 'strlen($data->number) > 14 ? substr($data->number, 0, 14)."..." : $data->number';
    }
} 
```

# mysql - 插入后触发更新另一个表中的一条记录

> ID：13579174
> 
> 赞同：0
> 
> 时间：2012-11-27T07:16:23.803
> 
> 标签：mysql, triggers, phpmyadmin

我正在尝试在 phpMyadmin (MySQL) 中创建触发器

我有两个表，成员和订阅。订阅有一个日期字段（订阅到期的日期），成员也是如此。这两个表有一个共同的 member.ID 字段。

插入新订阅记录时，我想更新成员表中的到期日期字段。

触发器设置在表订阅上，插入后更新

这是我在 phpmyadmin 中的创建触发器对话框中输入的内容：

```
UPDATE members
SET members.mbrshp_expiry_date = subscriptions.expiry_date
WHERE  members.mbrshp_number = subscriptions.mbrshp_number 
```

当此代码触发时，它会返回错误。未找到子句中引用的两个订阅字段。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:37:49.703

可以使用 NEW 前缀在触发器中引用字段。

```
UPDATE members 
SET members.mbrshp_expiry_date = NEW.expiry_date 
WHERE members.mbrshp_number = NEW.mbrshp_number 
```

这功能正确:)

# php - MySQL“分组依据”限制组返回

> ID：13579177
> 
> 赞同：1
> 
> 时间：2012-11-27T07:16:32.357
> 
> 标签：php, mysql, sql

如果我在使用 group by 选择时应用了限制，则该限制适用于返回的组数或行数？

我自己，我想限制返回的组。

这是我的试验：

```
select * from orders group by customer_email limit 0,2 
```

从此表：

```
id customer_email
0 a@a.com
1 a@a.com
2 a@a.com
3 b@b.com
4 c@c.com
5 c@c.com
6 d@d.com 
```

我想要返回行 0,1,2,3,4,5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:00:03.463

您的问题有点模棱两可：建议的查询限制为 2 个组，您似乎想要`customer_email`前 3 个组中包含的所有相等的行。

无论如何，就我正确理解您的问题而言，这是我的答案:)

```
SELECT *
FROM orders
INNER JOIN (
    SELECT customer_email
    FROM orders
    GROUP BY customer_email
    LIMIT 0,3
) AS temp
ON orders.customer_email = temp.customer_email 
```

子查询`select customer_email from orders group by customer_email limit 0,3`选择前 3 个组，然后选择`order`包含与`customer_email`前 3 个组相同的所有行，这将为您提供第 0、1、2、3、4、5 行。

# openerp - 一个模块字段在其他模块中使用

> ID：13579178
> 
> 赞同：0
> 
> 时间：2012-11-27T07:16:43.373
> 
> 标签：openerp

我正在尝试在“机会”中使用“工作职位”的某些字段，我们可以将其称为合并字段。但我无法完成这项任务。我对 Python 语言一无所知。

我创建了一个用户定义的字段，并通过开发人员选项的 XML 编码在机会中使用它。我知道这很容易，因为用户定义的字段具有“crm.lead”命名模块，在机会上是相同的。

但是现在当我想在“hr.job”中使用这个字段时，它会给我错误“未找到字段”。我知道这个字段不在当前模块中，它是“crm.lead”而不是“hr.job”的一部分。

是否可以在另一个模块中使用一个模块字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:34:33.713

是的，你可以这样做。首先，您必须为此创建一个对象，然后浏览记录并获取所需字段的值。
例如创建一种方法，然后浏览 crm.lead 记录：

```
crm_obj = self.pool.get('crm.lead')
crm_brw = crm_obj.browse(cr, uid, crm_rec_id, context=context)
print "my field value::  ", crm_brw.your_field 
```

这里，“crm_rec_id”是crm.lead对象的记录id

插件中有很多例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T11:58:55.950

是的，您可以通过_inherits 来完成。例如。hr 模块中的 hr_job 。

```
class hr_job(osv.osv):
    _name = "hr.job"
    _description = "job position"
        _columns = {
        'name': fields.char('job name', size=64)

      } 
```

crm 模块中的 crm_lead。

```
class crm_lead(osv.osv):
    _name = "crm.lead"
   _inherits = {'hr.job': 'job_id'}
    _description = "Lead/Opportunity"
        _columns = {
        'partner_id': fields.many2one('res.partner', 'Partner')

      } 
```

在 crm 的 xml 文件中创建表单视图。

```
<record id="crm_lead_form" model="ir.ui.view">
        <field name="name">crm.lead</field>
        <field name="model">crm.lead</field>
        <field name="arch" type="xml">
            <form>
             <field name="name"/> # job name from hr_job
             <field name="partner_id"/> # partner_id from crm.lead
           </form>
       </field>
 </record> 
```

不要忘记添加依赖项。

# c# - 加号时如何处理结转？

> ID：13579181
> 
> 赞同：0
> 
> 时间：2012-11-27T07:17:13.373
> 
> 标签：c#, singly-linked-list

我正在编写一段 C# 代码，该代码添加存储在单链表中的数字。我创建了一个包含 11 11 8 的缓冲区单链表。最终列表必须看起来像 1 2 9 。每个大于 10 的元素都必须将结转传递到下一个数字，并且 %10 的结果将传递到将创建 1 2 9 的最终列表。如何处理从每个数字开始的结转从左到右？

我创建了以下逻辑，但显然我忽略了一些东西。

```
 for (int i = 0; i < bufferList.Size(); i++)
 {
     int mostLeftValue = Convert.ToInt32(bufferList.GetValue(i));
     if (mostLeftValue >=10  && i + 1 < bufferList.Size())
     {
         int nextLeftValue = Convert.ToInt32(bufferList.GetValue(i + 1))+1;
         int modedNextValue = nextLeftValue % 10;
         finalList.InsertAtTail(modedNextValue);           
     }

     int moddedValue =  mostLeftValue %10 ;
     finalList.InsertAtFront(moddedValue); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:34:43.933

看起来您没有将*任何东西*从一个值传递到下一个值。此外，您正在添加到输出列表的两端，这似乎很可疑。

这是一个简单的实现`List<int>`- 它基本上完成了您手动添加两个数字时所做的事情，只是没有实际添加。取当前数字，加上携带的数字，存储“单位”，将“十”带到下一列。

```
Number      11   11    8
Carry        0 ┌─ 1 ┌─ 1 ┌─ 0
Sum         11 │ 12 │  9 │
Store        1 │  2 │  9 │  stop
Carry over  1 ─┘ 1 ─┘ 0 ─┘ 
```

您应该能够针对链表（`[i] -> .GetValue(i)`、`.Add -> .InsertAtTail`或`.Count -> .Size()`类似名称）对其进行修改：

```
int carry = 0;
for (int i = 0; i < input.Count; i++)
{
    int sum = carry + input[i]; // add previous carry
    output.Add(sum % 10);       // store the "units"
    carry = sum / 10;           // carry the "tens"
}
while (carry > 0)               // anything left carried?
{
    output.Add(carry % 10);     // store the "units"
    carry = carry / 10;         // carry the "tens"
} 
```

# php - 检查字符串中是否存在单词数组

> ID：13579182
> 
> 赞同：2
> 
> 时间：2012-11-27T07:17:14.440
> 
> 标签：php, performance, find, substring

我们在 PHP 中有一个函数[`in_array`](http://php.net/manual/en/function.in-array.php)，它检查给定值是否存在于数组中。我想我想反其道而行之。我有一组字符串：

```
$words = array("hello", "world"); 
```

而且，我想检查给定字符串是否包含这些单词，方法是提供参数是否`all`为`any`.

```
$string = "Hello, World!";
$second = "Hello and Welcome!";
in_string($words, $string, "all");
in_string($words, $string, "any"); 
```

我现在拥有的是，使用[`stripos()`](http://php.net/manual/en/function.stripos.php). 我不想用`regex`.

### 当前代码：

```
<?php
    /**
    * Checks if the given words is found in a string or not.
    * 
    * @param Array $words The array of words to be given.
    * @param String $string The string to be checked on.
    * @param String $option all - should have all the words in the array. any - should have any of the words in the array
    * @return boolean True, if found, False if not found, depending on the $option
    */
    function in_string ($words, $string, $option)
    {
        if ($option == "all")
            foreach ($words as $value)
                $isFound = $isFound && (stripos($string, $value) || false);
        else
            foreach ($words as $value)
                $isFound = $isFound || (stripos($string, $value) || false);
        return $isFound;
    }
?> 
```

### 我的问题是，这可以改进吗？有什么想法吗？

* * *

### 更新 #1：当前代码更新：

```
/**
* Checks if the given words is found in a string or not.
* 
* @param Array $words The array of words to be given.
* @param String $string The string to be checked on.
* @param String $option all - should have all the words in the array. any - should have any of the words in the array
* @return boolean True, if found, False if not found, depending on the $option
*/
function in_string ($words, $string, $option)
{
    if ($option == "all")
    {
        $isFound = true;
        foreach ($words as $value)
            $isFound = $isFound && (stripos($string, $value) !== false);
        return $isFound;
    }
    else
    {
        $isFound = true;
        foreach ($words as $value)
            if (stripos($string, $value) !== false) return true;
        return $isFound;
    }
} 
```

现在该功能按预期工作。但我需要在`foreach()`部分和所有方面有更好的表现。有什么可以改进的地方吗？

* * *

### 更新 #2：增加了改进

```
<?php
    /**
    * Checks if the given words is found in a string or not.
    * 
    * @param Array $words The array of words to be given.
    * @param String $string The string to be checked on.
    * @param String $option all - should have all the words in the array. any - should have any of the words in the array
    * @return boolean True, if found, False if not found, depending on the $option
    */
    function in_string ($words, $string, $option)
    {
        if ($option == "all")
        {
            foreach ($words as $value)
                if (stripos($string, $value) === false)
                    return false;
            return true;
        }
        else
        {
            foreach ($words as $value)
                if (stripos($string, $value) !== false)
                    return true;
            return false;
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T07:49:35.693

```
<?php
/**
* Checks if the given words is found in a string or not.
* 
* @param Array $words The array of words to be given.
* @param String $string The string to be checked on.
* @param String $option all - should have all the words in the array. any - should have any of the words in the array
* @return boolean True, if found, False if not found, depending on the $option
*/
function in_string ($words, $string, $option)
{
    if ($option == "all") {
        $isFound = true;
        foreach ($words as $value) {
            $isFound = $isFound && (stripos($string, $value) !== false); // returns boolean false if nothing is found, not 0
            if (!$isFound) break; // if a word wasn't found, there is no need to continue
        }
    } else {
        $isFound = false;
        foreach ($words as $value) {
            $isFound = $isFound || (stripos($string, $value) !== false);
            if ($isFound) break; // if a word was found, there is no need to continue
        }
    }
    return $isFound;
}
?> 
```

和我下面的人一样的代码，带中断；添加。我显然没有足够的代表发表评论

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:39:56.237

划分逻辑，您将在每个函数中获得更简单的代码，更好的性能，每个函数将解决具体任务。

```
<?php
function in_string_all ($string, $words) {
    $isFound = true;
    foreach ($words as $value) {
        $isFound = $isFound && stripos($string, $value) !== false;
        if (!$isFound) 
            break;
    }
    return $isFound;
}

function in_string_any ($string, $words) {
    foreach ($words as $value) 
        if (stripos($string, $value) !== false)
            return true;
    return false;
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-08T15:17:52.250

使用 strpos 不起作用，因为它会为部分字符串匹配返回 true。在“insersection”中搜索“in”的示例会导致误报。这是从目标字符串中提取单词并在数组之间进行交集的替代方法。

```
/**
 * Checks if a array of given words is found in a string.
 * 
 * @param array $words The array of words to be given.
 * @param string $string The string to be checked on.
 * @param boolean $exactMatch true - should have all the words in the array. false - should have any of the words in the array
 * @param boolean $insensitive true to compare insensitive. false to compare sensitive
 * @return boolean True, if found, False if not found, depending on the $option
 */
private function arrayInString (array $words, $string, $exactMatch = true, $insensitive = true)
{
    $stringArr = explode(" ", preg_replace('/[^a-z0-9]+/i', ' ', $string));
    if ($insensitive) {
        $words = array_map('strtolower', $words);
        $stringArr = array_map('strtolower', $stringArr);
    }
    $intersectionCount = count(array_intersect($words, $stringArr));
    if ($exactMatch && $intersectionCount == count($words)) {
        return true;
    }
    if (!$exactMatch && $intersectionCount > 0) {
        return true;
    }

    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T07:43:23.917

您需要初始化`$isFound`，`stripos()`用于不区分大小写的搜索，并检查`stripos()`返回`false`，而不是 0。（0 表示以`$string`开头`$value`）

```
function in_string ($words, $string, $option)
{
if ($option == "all") {
    $isFound = true;
    foreach ($words as $value) {
        $isFound = $isFound && (stripos($string, $value) !== false);
    }
} else {
    $isFound = false;
    foreach ($words as $value) {
        $isFound = $isFound || (stripos($string, $value) !== false);
    }
}
return $isFound;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T07:24:07.687

使用[`strpos()`](http://uk1.php.net/manual/en/function.strpos.php)代替[`substr()`](http://uk1.php.net/manual/en/function.substr.php)或[`strstr()`](http://uk1.php.net/manual/en/function.strstr.php)因为您只关心存在的单词，您不需要解析任何内容。根据文档，它更快。

从[手册](http://php.net/manual/en/function.strstr.php)：

> 如果您只想确定某个特定的针是否出现在 haystack 中，请改用更快且内存占用更少的函数 strpos()。

# hibernate - 获取 org.hibernate.util.JDBCExce ptionReporter

> ID：13579183
> 
> 赞同：0
> 
> 时间：2012-11-27T07:17:18.753
> 
> 标签：hibernate, openjpa, c3p0

我有一个使用休眠和 OpenJPA 进行数据库连接的 Web 应用程序。但是当应用程序空闲超过 8 小时时，我在日志文件中收到以下错误。

`24 Nov 2012 05:54:28 1206290820 [http-8080-20] ERROR org.hibernate.util.JDBCExce ptionReporter - The last packet successfully received from the server was 118,4 45,988 milliseconds ago. The last packet sent successfully to the server was 11 8,445,989 milliseconds ago. is longer than the server configured value of 'wait_ timeout'. You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for cli ent timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem. 24 Nov 2012 05:54:28 1206290820 [http-8080-20] DEBUG org.hibernate.ejb.AbstractE ntityManagerImpl - mark transaction for rollback 24 Nov 2012 05:54:28 1206290820 [http-8080-20] ERROR root - org.hibernate.excep tion.JDBCConnectionException: could not execute query`

我有以下 persistence.xml 条目

`<property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/> <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/> <property name="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property> <property name="hibernate.connection.url" value="jdbc:mysql://xxx.xxx.xxx.xxx:3306/lbs?autoReconnect=true"/> <property name="hibernate.c3p0.min_size" value="5"/> <property name="hibernate.c3p0.max_size" value="20"/> <property name="hibernate.c3p0.timeout" value="1800"/> <property name="hibernate.c3p0.max_statements" value="50"/> <property name="hibernate.c3p0.idle_test_period" value="1800"/> <property name="c3p0.idleConnectionTestPeriod" value="1810"/>`

在其他[问题](https://stackoverflow.com/questions/3350483/when-should-we-close-the-entitymanagerfactory)之一！在 Stackoverflow 论坛上，他们说我们应该每次都关闭 EntityManager 对象。

在我的应用程序中，我正在为 EntityManager 做以下事情

我正在创建 EntityManager 作为我在整个应用程序中使用的单例类。

我错过了什么吗？

**更新**

c3p0 初始化的日志条目是：

`INFO org.hibernate.connection.ConnectionProviderFactory - Initializing connection provider: org.hibernate.connection.C3P0ConnectionProvider`

`INFO org.hibernate.connection.C3P0ConnectionProvider - C3P0 using driver: com.mysql.jdbc.Driver at URL: jdbc:mysql://xxx.xxx.xxx.xxx:3306/lbs?autoReconnect=true`

`INFO org.hibernate.connection.C3P0ConnectionProvider - Connection properties: {user=****, password=****, autocommit=true, release_mode=auto}`

`INFO org.hibernate.connection.C3P0ConnectionProvider - autocommit mode: true`

`WARN org.hibernate.connection.C3P0ConnectionProvider - Both hibernate-style property 'hibernate.c3p0.idle_test_period' and c3p0-style property 'c3p0.idleConnectionTestPeriod' have been set in hibernate.properties. Hibernate-style property 'hibernate.c3p0.idle_test_period' will be used and c3p0-style property 'c3p0.idleConnectionTestPeriod' will be ignored!`

`INFO com.mchange.v2.log.MLog - MLog clients using log4j logging.`

`INFO com.mchange.v2.c3p0.C3P0Registry - Initializing c3p0-0.9.1 [built 16-January-2007 14:46:42; debug? true; trace: 10]`

`DEBUG com.mchange.v2.c3p0.management.DynamicPooledDataSourceManagerMBean - MBean: com.mchange.v2.c3p0:type=PooledDataSource[2ryrhz8rc8xlpn1l7vn76|1b15828] registered.`

`DEBUG com.mchange.v2.c3p0.management.DynamicPooledDataSourceManagerMBean - MBean: com.mchange.v2.c3p0:type=PooledDataSource[2ryrhz8rc8xlpn1l7vn76|1b15828] unregistered, in order to be reregistered after update.`

`DEBUG com.mchange.v2.c3p0.management.DynamicPooledDataSourceManagerMBean - MBean: com.mchange.v2.c3p0:type=PooledDataSource[2ryrhz8rc8xlpn1l7vn76|1b15828] registered.`

`INFO com.mchange.v2.c3p0.impl.AbstractPoolBackedDataSource - Initializing c3p0 pool... com.mchange.v2.c3p0.PoolBackedDataSource@a340a84b [ connectionPoolDataSource -> com.mchange.v2.c3p0.WrapperConnectionPoolDataSource@454eed4 [ acquireIncrement -> 3, acquireRetryAttempts -> 30, acquireRetryDelay -> 1000, autoCommitOnClose -> false, automaticTestTable -> null, breakAfterAcquireFailure -> false, checkoutTimeout -> 0, connectionCustomizerClassName -> null, connectionTesterClassName -> com.mchange.v2.c3p0.impl.DefaultConnectionTester, debugUnreturnedConnectionStackTraces -> false, factoryClassLocation -> null, forceIgnoreUnresolvedTransactions -> false, identityToken -> 2ryrhz8rc8xlpn1l7vn76|8010fe, idleConnectionTestPeriod -> 1800, initialPoolSize -> 5, maxAdministrativeTaskTime -> 0, maxConnectionAge -> 0, maxIdleTime -> 1800, maxIdleTimeExcessConnections -> 0, maxPoolSize -> 20, maxStatements -> 50, maxStatementsPerConnection -> 0, minPoolSize -> 5, nestedDataSource -> com.mchange.v2.c3p0.DriverManagerDataSource@f50d6507 [ description -> null, driverClass -> null, factoryClassLocation -> null, identityToken -> 2ryrhz8rc8xlpn1l7vn76|1233a8e, jdbcUrl -> jdbc:mysql://xxx.xxx.xxx.xxx:3306/lbs?autoReconnect=true, properties -> {user=******, password=******, autocommit=true, release_mode=auto} ], preferredTestQuery -> null, propertyCycle -> 0, testConnectionOnCheckin -> false, testConnectionOnCheckout -> false, unreturnedConnectionTimeout -> 0, usesTraditionalReflectiveProxies -> false; userOverrides: {} ], dataSourceName -> null, factoryClassLocation -> null, identityToken -> 2ryrhz8rc8xlpn1l7vn76|1b15828, numHelperThreads -> 3 ]`

`DEBUG com.mchange.v2.resourcepool.BasicResourcePool - incremented pending_acquires: 1 DEBUG com.mchange.v2.resourcepool.BasicResourcePool - incremented pending_acquires: 2 DEBUG com.mchange.v2.resourcepool.BasicResourcePool - incremented pending_acquires: 3 DEBUG com.mchange.v2.resourcepool.BasicResourcePool - incremented pending_acquires: 4 DEBUG com.mchange.v2.resourcepool.BasicResourcePool - incremented pending_acquires: 5`

`DEBUG com.mchange.v2.resourcepool.BasicResourcePool - com.mchange.v2.resourcepool.BasicResourcePool@1148d7f config: [start -> 5; min -> 5; max -> 20; inc -> 3; num_acq_attempts -> 30; acq_attempt_delay -> 1000; check_idle_resources_delay -> 1800000; mox_resource_age -> 0; max_idle_time -> 1800000; excess_max_idle_time -> 0; destroy_unreturned_resc_time -> 0; expiration_enforcement_delay -> 450000; break_on_acquisition_failure -> false; debug_store_checkout_exceptions -> false]`

`DEBUG com.mchange.v2.resourcepool.BasicResourcePool - acquire test -- pool size: 0; target_pool_size: 5; desired target? 1`

`DEBUG com.mchange.v2.resourcepool.BasicResourcePool - awaitAvailable(): [unknown] DEBUG com.mchange.v2.resourcepool.BasicResourcePool - trace com.mchange.v2.resourcepool.BasicResourcePool@1148d7f [managed: 0, unused: 0, excluded: 0]`

# android-ui - 如何根据其可见性将侦听器添加到 imageview？

> ID：13579185
> 
> 赞同：3
> 
> 时间：2012-11-27T07:17:35.933
> 
> 标签：android-ui

我想将侦听器添加到 ImageView，当它的可见性不可见时。是否可以在图像视图处于不可见状态时添加侦听器？请帮我。提前致谢。

# mysql - 查询多个表

> ID：13579189
> 
> 赞同：1
> 
> 时间：2012-11-27T07:17:46.133
> 
> 标签：mysql, sql, select, union

```
SELECT keyword 
FROM
(
    SELECT tutor_Name AS keyword FROM t
    UNION
    SELECT subject_name AS keyword FROM s
    UNION
    SELECT institute_name AS keyword FROM i
) s
WHERE keyword LIKE '%$queryString%' 
LIMIT 10 
```

此查询根据关键字显示包含主题、导师姓名、城市的列表。现在我需要用更多的值修改这个查询。例如，列表中有一个导师姓名，我想显示他/她当前的城市、他/她的个人资料图像等。所以我需要从我的城市表、地址表、tutorImages 表中获取这些值。所以任何人都可以帮我做这个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:33:40.167

试试这个它会工作：

```
$q = "SELECT keyword, col, city_name, image_name, tutor_code 
            FROM (
                SELECT tutor_name AS keyword, 'Tutors' AS col, IFNULL(c1.city_name, '') city_name, IFNULL(ti.image_name, '') image_name, tutor_code FROM tutors AS t
                LEFT JOIN address a ON t.address_id = a.address_id
                LEFT JOIN city c1 ON a.city_id = c1.city_id 
                LEFT JOIN tutor_images ti ON t.tutor_id = ti.tutor_id and ti.image_type = 'profile'
                UNION
                SELECT subjects AS keyword, 'Subject' AS col, '' city_name, '' image_name, '' tutor_code FROM subject
                UNION
                SELECT city_name AS keyword, 'City' AS col, '' city_name, '' image_name, '' tutor_code FROM city
                UNION
                SELECT institute_name AS keyword, 'Institute' AS col, '' city_name, '' image_name, '' tutor_code FROM institutes
            ) s
          WHERE keyword LIKE '%$queryString%' 
          LIMIT 10"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:36:35.473

第一个查询的问题是，您获取未过滤的每个表的所有结果，合并它们，区分它们，然后过滤结果。这在查询时间和资源方面是非常无效的。

您在这里需要的是 JOIN。要了解连接的工作原理，请阅读此内容

[http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

和这个

[http://dev.mysql.com/doc/refman/5.5/en/join.html](http://dev.mysql.com/doc/refman/5.5/en/join.html)

为了让您了解查询的外观：重构旧的

```
SELECT 
```

给我一点时间，从手机切换到电脑。一边阅读文章；)

抱歉，时间有点长。我看到你同时找到了一个解决方案，所以我不会费心深入研究这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T07:36:44.037

尝试这个：

```
SELECT keyword, city_name, image_name
FROM (
SELECT tname AS keyword, IFNULL(c1.city_name, '') city_name, IFNULL(ti.image_name, '') image_name FROM t 
LEFT JOIN address a ON t.address_id = a.address_id
LEFT JOIN city c1 ON a.city_id = c1.city_id 
LEFT JOIN tutorImages ti ON t.tutor_id = t1.tutor_id 
UNION
SELECT sname AS keyword, '' city_name, '' image_name FROM sub
UNION
SELECT cname AS keyword, '' city_name, '' image_name FROM c
UNION
SELECT iname AS keyword, '' city_name, '' image_name FROM i ) s
WHERE keyword LIKE '%$queryString%' 
LIMIT 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T07:30:17.403

尝试加入。

```
SELECT table1.field, table2.field, table3.field 
FROM table1 
JOIN table2 ON table1columnToMatch = table2columnToMatch
JOIN table3 ON table2columnToMatch = table3columnToMatch
WHERE tableWithKeyword.keyword = $keyword 
```

# c# - 为什么 FileStream.Length 是 long 类型，但 FileStream.Read 参数 - offset 的长度较短？

> ID：13579190
> 
> 赞同：11
> 
> 时间：2012-11-27T07:17:58.253
> 
> 标签：c#

为什么 FileStream.Length 是 long 类型，但 FileStream.Read 参数 - offset 的长度较短？

布莱恩

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T07:28:28.010

参数告诉从`offset`哪里开始在数组中写入数据，`array`参数。它没有指出文件数据中的偏移量。

> *offset*参数给出了*数组*（缓冲区索引）中开始读取的字节的偏移量， *count*参数给出了要从此流中读取的最大字节数。返回值是实际读取的字节数，如果到达流的末尾则为零。如果读取操作成功，则流的当前位置提前读取的字节数。如果发生异常，则流的当前位置不变。

来源：[FileStream.Read](http://msdn.microsoft.com/en-us/library/system.io.filestream.read.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T07:30:07.720

偏移量是放置数据的字节数组的索引。您不能分配大于 2 GB 的数组，因此偏移量不需要更大的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T07:29:21.877

我假设您指的是从基类覆盖的[这个](http://msdn.microsoft.com/en-us/library/system.io.filestream.read.aspx)`Stream`方法。

偏移量是`array`参数中放置字节的位置，而不是从`FileStream`. `array`参数的类型不能`byte[]`超过`int.MaxValue`元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T07:31:48.607

作为 mike z 答案的补充，为什么 byte[] 的索引不能超过 int.MaxValue - 类 Array 用`object this[int index] { get; set; }`方法实现 IList，因此索引只能是整数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T07:37:19.897

FileStream.Length 获取流的字节长度，FileStream.Read 从流中读取一个字节块。因此，从逻辑上讲，您将拥有比该字节块更多的单个字节。我假设出于这个原因 FileStream.Length 需要长类型。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-02T13:01:50.037

FileStream 扩展 Stream，

Stream 可以处理多个 byte[int.MaxValue] 数组，并且它们一起具有很长的长度。

但是当你使用 Read 时，你可以用 int.MaxValue 将它的一部分读到一个字节数组中。

考虑一下，如果您想从磁盘读取大于 2G = int.MaxValue 的文件，则需要以 byte[int.MaxValue] 块的形式读取它

（：

# windows-8 - 将视频文件从独立存储保存到媒体库

> ID：13579192
> 
> 赞同：0
> 
> 时间：2012-11-27T07:18:07.463
> 
> 标签：windows-8, microsoft-metro

是否可以将录制的视频从隔离存储保存到媒体库，以便无需应用程序即可访问（例如与 PC 同步）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:55:18.413

是的，一点没错。您要么需要通过清单访问视频库，要么让用户通过文件选择器保存对话框将其保存到视频库。

# c# - 泛型类型中的强制转换异常

> ID：13579193
> 
> 赞同：0
> 
> 时间：2012-11-27T07:18:12.613
> 
> 标签：c#, generics

```
public class clsA<T, T1>
    where T : class
    where T1 : class
{
    public T GetEntity()
    {
        return (T) new clsB<T1>();            
    }
} 
```

> 我收到错误**无法将类型转换`clsB<T1>`为 T**

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:20:41.297

那是因为`T`可以是任何东西——`string`例如，这会导致演员阵容失败。如果`T`不能是变量类型，则不要将其包含在泛型参数列表中。

如果您想允许`T`是`clsB<T1>`或任何子类型，并且您想构造该类的实例，那么请改为：

```
public class clsA<T, T1>
    where T : clsB<T1>, new()
    where T1 : class
{
    public T GetEntity()
    {
        return new T();
    }
} 
```

然后，给定类型：

```
public class clsC : clsB<string> { } 
```

调用`GetEntity()`类型的对象`clsA<clsC, string>`将构造并返回`clsC`.

# c# - 在 c# winforms 中显示加载或进度条

> ID：13579196
> 
> 赞同：1
> 
> 时间：2012-11-27T07:18:27.287
> 
> 标签：c#, winforms, progress-bar, backgroundworker

我有 Windows 应用程序，我需要在其中将数据保存到数据库中，并在保存数据后加载水晶报告以显示报告，这一切都发生在单击保存按钮时。

我有**`btn_Submit`**在单击此数据时命名的按钮被保存并显示报告，同时保存它需要时间，所以我想显示进度条平均时间，以便用户知道数据正在处理中。我如何使用这个 Windows 应用程序。

我浏览了这个链接[http://www.codeproject.com/Tips/83317/BackgroundWorker-and-ProgressBar-demo](http://www.codeproject.com/Tips/83317/BackgroundWorker-and-ProgressBar-demo) 但没有得到我想要的。

我知道后台工作人员，但从未使用过它。

我已经使用了上面链接中给出的后台工作人员和进度条，但是进度条一旦启动就不会停止。

任何人都可以帮助我吗？你能给出任何示例或链接来演示场景吗？

我在 Dowork() 上添加的这段代码；

```
private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
   PrintData arg = (PrintData)e.Argument;
   SalesMaster sm = arg.SalesData;
   BrokerMaster bm = arg.Broker;
   CustomerMaster ctm = arg.Customer;
   CompanyMaster cm = arg.Company;
   ArrayList hb = arg.Arrardata;
   int totunit = arg.totunit;
   decimal globalamt = arg.golbamt;
   SalesReport sreport = new SalesReport(sm, ctm, cm, bm, hb, totunit, glb_totalamt);

   sreport .MdiParent = arg.parentf;

   sreport .WindowState = FormWindowState.Maximized;
   sreport .Show();
} 
```

我在此行 **sreport .MdiParent = arg.parentf;上收到错误**

这个错误：

```
Cross-thread operation not valid: Control 'frmParent' accessed from a thread other than the thread it was created on. 
```

这里应该做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:17:30.657

订阅`DoWork`和`RunWorkerCompleted`事件和

```
void btn_Submit_Click(object sender, EventArgs e)
{
    btn_Submit.Enabled = false; // disable button while saving report        
    lbl_Status.Text = "Please wait..";        
    backgroundWorker.RunWorkerAsync(); 
}

void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
    // save report here
}

void backgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    btn_Submit.Enabled = true; // enable button
    lbl_Status.Text = "Report saved";
} 
```

`PictureBox`您可以使用微调器等待图像显示，而不是使用标签。我不喜欢看到进度条，它不显示任务的百分比 - 我希望当进度条被填满时，任务就会完成。如果您真的想使用进度条，那么我会使用计时器组件（将计时器的间隔设置为所需的刷新率）：

```
void btn_Submit_Click(object sender, EventArgs e)
{
    btn_Submit.Enabled = false; // disable button while saving report       
    timer.Start();
    progressBar.Visible = true;
    //  backgroundWorker.RunWorkerAsync(new object[] { "Foo", 42 });  
    //  backgroundWorker.RunWorkerAsync(new CustomType("Foo", 42));   
    backgroundWorker.RunWorkerAsync(new { Foo = "Foo", Bar = 42 }););      
}

void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
    // object[] args = (object[])e.Argument;
    // CustomType arg = (CustomType)e.Argument;
    dynamic arg = (dynamic)e.Argument;
    string foo = arg.Foo;
    int bar = arg.Bar;
    // save report here
}

void backgroundWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    btn_Submit.Enabled = true; // enable button
    timer.Stop();
    progressBar.Visible = false;   
}

void timer_Tick(object sender, EventArgs e)
{
    if (progressBar.Value == progressBar.Maximum)
    {
        progressBar.Value = progressBar.Minimum;
        return;
    }

    progressBar.PerformStep();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:14:05.063

Try to reset the ProgressBar's Value property to 0, like in the code below:

```
Worker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(Worker_RunWorkerCompleted); 
```

Implemented event handler:

```
void Worker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    progressBar1.Value = 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T07:36:00.573

要停止或隐藏进度条，请使用后台工作人员的已完成事件。

# ios - UILabel TEXT 的两种颜色

> ID：13579209
> 
> 赞同：4
> 
> 时间：2012-11-27T07:19:25.773
> 
> 标签：ios, iphone, uilabel, nsattributedstring, uicolor

我想为`UILabel's`文本设置两种颜色。我试过`TTTRegexAttributedLabel`了，但它抛出了未知类型错误。

我也尝试了以下代码。但它在 settext 时崩溃了。

```
 NSMutableAttributedString *str = [[NSMutableAttributedString alloc] initWithString:@"Hello. That is a test attributed string."];
    [str addAttribute: @"Hello" value:[UIColor yellowColor] range:NSMakeRange(3,5)];
    [str addAttribute:@"That" value:[UIColor greenColor] range:NSMakeRange(10,7)];
    [str addAttribute:@"Hello" value:[UIFont fontWithName:@"HelveticaNeue-Bold" size:20.0] range:NSMakeRange(20, 10)];

[syncStatusLabel setText:(NSString *)str]; 
```

有没有其他方法可以为单个 UILabel 文本设置多种颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:27:42.783

您可以使用以下图案图像设置文本颜色..

```
 [yourLable setTextColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"yourImageName"]]]; 
```

并用下面的代码设置不同的颜色..请与详细的伙伴一起查看教程..

```
NSString *test = @"Hello. That is a test attributed string.";

 CFStringRef string =  (CFStringRef) test;
    CFMutableAttributedStringRef attrString = CFAttributedStringCreateMutable(kCFAllocatorDefault, 0);
    CFAttributedStringReplaceString (attrString,CFRangeMake(0, 0), string);

    /*
     Note: we could have created CFAttributedStringRef which is non mutable, then we would have to give all its
     attributes right when we create it. We can change them if we use mutable form of CFAttributeString.
     */

    //Lets choose the colors we want to have in our string
    CGColorRef _orange=[UIColor orangeColor].CGColor;
    CGColorRef _green=[UIColor greenColor].CGColor;
    CGColorRef _red=[UIColor redColor].CGColor;
    CGColorRef _blue=[UIColor blueColor].CGColor;    

    //Lets have our string with first 20 letters as orange
    //next 20 letters as green
    //next 20 as red
    //last remaining as blue
    CFAttributedStringSetAttribute(attrString, CFRangeMake(0, 20),kCTForegroundColorAttributeName, _orange);
    CFAttributedStringSetAttribute(attrString, CFRangeMake(20, 20),kCTForegroundColorAttributeName, _green);
    CFAttributedStringSetAttribute(attrString, CFRangeMake(40, 20),kCTForegroundColorAttributeName, _red);    
    CFAttributedStringSetAttribute(attrString, CFRangeMake(60, _stringLength-61),kCTForegroundColorAttributeName, _blue); 
```

有关更多信息，请参阅本教程....

[coretext-tutorial-for-ios-part](http://soulwithmobiletechnology.blogspot.in/2011/06/coretext-tutorial-for-ios-part-1.html)

我希望这可以帮助你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:26:41.457

`NSAttributedString`必须使用`UILabel`'`attributedText`属性设置。例如`[syncStatusLabel setAttributedText:str]`在你的情况下。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-23T10:25:13.223

快速尝试一下（使用以下扩展名执行代码）

```
extension NSMutableAttributedString {

    func setColorForText(textToFind: String, withColor color: UIColor) {
        let range: NSRange = self.mutableString.range(of: textToFind, options: .caseInsensitive)
        self.addAttribute(NSAttributedStringKey.foregroundColor, value: color, range: range)
    }

} 
```

尝试使用 UILabel 进行扩展：

```
self.view.backgroundColor = UIColor.blue.withAlphaComponent(0.5)
let label = UILabel()
label.frame = CGRect(x: 40, y: 100, width: 280, height: 200)

let stringValue = "Hello. That is a test attributed string."  // or direct assign single string value like "firstsecondthird"
label.textColor = UIColor.lightGray
label.numberOfLines = 0
let attributedString: NSMutableAttributedString = NSMutableAttributedString(string: stringValue)
attributedString.setColorForText(textToFind: "Hello", withColor: UIColor.yellow)
attributedString.setColorForText(textToFind: "That", withColor: UIColor.green)

label.font = UIFont.systemFont(ofSize: 26)
label.attributedText = attributedString
self.view.addSubview(label) 
```

这是结果：

![在此处输入图像描述](../Images/9476668e2d346afcd67688cb519865ad.png)

# jquery - 如何在 asp.net updatepanel 中使用动画 jQuery Counter？

> ID：13579210
> 
> 赞同：0
> 
> 时间：2012-11-27T07:19:28.457
> 
> 标签：jquery, asp.net, updatepanel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:24:25.390

我不认为你可以这样做，因为 updatepanel 正在刷新其中的所有内容，所以如果你在面板中有一些 javascript 代码，它会在用户在更新面板中进行一些操作后重新设置

# jquery - jQuery ajax 调用在移动解决方案中给出状态 0

> ID：13579212
> 
> 赞同：0
> 
> 时间：2012-11-27T07:19:34.967
> 
> 标签：jquery, jquery-mobile

我一直在研究基于客户端-服务器的应用程序的跨平台移动解决方案。我正在使用 ajax 调用对服务器进行 Web 服务调用。大多数 Web 服务工作正常，但是当需要根据请求在服务器端进行一些计算并且响应存在延迟时，我将状态 0 作为响应。尝试使用超时选项，但没有用。添加一些相同的代码片段供您参考。

```
$.ajax({
        type: "POST",
        url: wsUrl,
        contentType: "text/xml",
        dataType: "xml",
        timeout: 300000,
        data: soapRequest,
        success: processSuccess,
        error: processError
});

function processSuccess(data, status, req)
{
}

function processError(data, status, req) 
{
   console.log(data+'---------   '+status+'-------- '+req);
} 
```

有时，如果服务器响应很快，我们会得到预期的响应，但大多数时候，我们会收到状态 0 错误。通常在 2 分钟后我收到此错误。在本机 android 应用程序中尝试相同的代码可以正常工作，没有任何问题。是否有任何选项可以确保在从服务器获取完整响应之前请求不会中断。可能是我错了，但如果不是，在进行 Web 服务调用时是否有任何选项可以设置周转时间？由于这是一个基于移动浏览器的应用程序，如果响应时间超过 2 分钟，浏览器是否可以选择以状态 0 响应取消请求。甚至没有收到错误消息。如果您需要任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:28:28.070

长 ajax 连接 - 对服务器性能非常不利。每隔一段时间检查一次状态怎么办？您可以使用`setInterval`制作计时器的功能。并且每个时间段您都会检查任务的状态。

# batch-file - 用于查找和替换路径字符串中第一次出现的字符串的批处理脚本

> ID：13579214
> 
> 赞同：0
> 
> 时间：2012-11-27T07:19:41.707
> 
> 标签：batch-file

我想替换路径字符串中第一次出现的特定字符串，而不是全部出现。

例如：

```
set strpath=D:\Temp\Test\projects\Test
set strreplace=Test
set strpath=%strpath:%strreplace%=MyProjects%        
echo strpath = %strpath% 
```

但它会替换所有出现的情况，例如 strpath = D:\Temp\MyProjects\projects\MyProjects

我需要像这样的输出

```
 D:\Temp\MyProjects\projects\Test 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:26:08.493

我为你的问题做了一个函数：

```
@Echo OFF
SETLOCAL Enabledelayedexpansion

:: By Elektro H@cker

set "strpath=D:\Temp\Test\projects\Test"

REM Call :REPLACE_FIRST "Variable" "word" "to replace word"
Call :REPLACE_FIRST "%strpath%" "Test" "Anything"
Echo %replaced_str%
Pause&Exit

:REPLACE_FIRST
Set "str=%~1"
Set "word_before=%~2"
Set "word_after=%~3"
Set "splited_str=%str:\= \ %"

FOR %%# in (%splited_str%) do (
    IF "%%#" EQU "!word_before!" (
        Set "replaced_str=!replaced_str!!word_after!"
        Set "word_before="
    ) ELSE (
        Set "replaced_str=!replaced_str!%%#"
    )
)

GOTO:EOF 
```

输出：

```
D:\Temp\Anything\projects\Test 
```

# javascript - 使用 jQuery 寻找分面搜索

> ID：13579222
> 
> 赞同：-1
> 
> 时间：2012-11-27T07:20:41.500
> 
> 标签：javascript, jquery, search

我正在寻找一个能够开发多面搜索的 JavaScript 库。也就是说，我有超过 600 个用户可以搜索的数据集，并且我想提供几个“分组”，例如“主题”、“区域”、“分辨率”，以便用户可以轻松煮沸列出几个数据集。

不确定这是否必须使用 AJAX；但我想应该。

到目前为止，我已经找到了[filters.js ，还有](http://blog.joshsoftware.com/2011/09/28/filter-js-client-side-search-filtering-using-json-and-jquery/)[这个](http://eikes.github.com/facetedsearch/). 但仅此而已。Drupal 和 Solr 有很多东西。但这不是我正在做的事情。

如果您对可以在“正常”HTML/JavaScript 环境中轻松适应的库有任何建议，我将非常感谢任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:01:19.630

我终于和[这个](http://www.9lessons.info/2009/06/autosuggestion-with-jquery-ajax-and-php.html)一起去了。

它很容易被采用，因此我现在有多个复选框，可以更深入地研究可用的数据集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T15:28:24.830

[VisualSearch](http://documentcloud.github.com/visualsearch/)库怎么样？

# java - 长的Java按位表示是否有所不同？

> ID：13579225
> 
> 赞同：3
> 
> 时间：2012-11-27T07:20:49.367
> 
> 标签：java, arrays, bit-manipulation, long-integer, fill

我想填充一个长的Java数组，以便它的所有位都设置为1。我发现[相应的长值是-1](https://stackoverflow.com/questions/8573762/how-to-create-a-long-value-with-all-bits-1/8573797#8573797)，或“0xFFFFFFFFFFFFFFFFl”：

```
long l = -1L;
System.out.println(Long.toBinaryString(l));

"1111111111111111111111111111111111111111111111111111111111111111" 
```

所以我用`Arrays.fill()`1 填充数组：

```
final long allBitsOn = -1L;
long[] bits = new long[arrayLength];
Arrays.fill(bits, allBitsOn); 
```

这个数组是一个主要项目的基础架构，我想完全确定 long 有 64 位，并且`long(-1)`在所有 VM 实现和 Java 的未来版本中，它的所有位总是设置为 1。

这个假设安全吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:23:08.990

是的，假设是安全的。从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2)：

> 4.2\. 原始类型和值
> 
> 整数类型为`byte`, `short`, `int`, and **`long`**，其值分别为 8 位、16 位、32 位和**64 位有符号二进制补码整数**，以及 char ，其值是表示 UTF-16 的 16 位无符号整数代码单元（§3.1）。

在[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)中，`-1`由全为 1 的位模式表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T07:22:23.137

> 这个假设安全吗？

是的，它由 Java 语言规范[第 4.2 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2)定义：

> 整数类型为`byte`、`short`、`int`和`long`，其值分别为 8 位、16 位、32 位和 64 位有符号二进制补码整数...

您所描述[的是二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)整数如何工作，-1 是“所有位”。

# c - 如何在 c 中使用 Winrt API 来创建库？

> ID：13579228
> 
> 赞同：0
> 
> 时间：2012-11-27T07:20:55.310
> 
> 标签：c, windows-8

我有一个使用 Win32 API 的现有 C 库，但 Windows 8 Metro 商店应用程序不支持它。我尝试调用 WinRT API 但失败了，所以有什么办法可以在 C 中使用 WinRT api。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:15:20.430

由于这个问题虽然非常笼统，但似乎是**专门**针对`SHGetSpecialFolderPath()`的，`WinRT`我将解决这个问题：

正如您发现的那样，WinRT (Metro) 应用程序在沙盒环境中运行，该环境仅支持有限的 win32 api 子集。

SHGetSpecialFolderPath 在 MSDN 上已正式[弃用](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762181%28v=vs.85%29.aspx)，并且它的功能不适用于 WinRT 应用程序。最接近的等价物是[ApplicationData](http://msdn.microsoft.com/library/windows/apps/BR241587)类。不幸的是，调用它`C`很复杂。我建议编写一个`C++`您的库可以调用的助手。

# sharepoint - searchresults.aspx 页面正在获取旧版本的母版页

> ID：13579232
> 
> 赞同：0
> 
> 时间：2012-11-27T07:21:19.613
> 
> 标签：sharepoint, wss, wss-3.0, sharepoint-search, wss-3.0-sp2

我们有一个名为 custom.master 的母版页。我们将 searchresults.aspx 页面的母版页更改为此母版页：

```
MasterPageFile="custom.master" 
```

我们打开位于 C:\Program Files\Common Files\microsoft shared\Web Server Extensions\12\TEMPLATE\ 中的 searchresults.aspx 页面并编辑了该页面。

现在问题是我们创建的其他 aspx 页面正在使用相同的母版页。但 searchresults.aspx 呈现的是旧版本的 custom.master 母版页。

我们通常使用共享点设计器来编辑 custom.master 页面。

知道如何获取旧版本的母版页吗？如何更新旧版本的母版页以反映 custom.master 页面中可用的新更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:29:28.317

好的，找到了页面。站点页面和应用程序页面的母版页都列在站点的 _catalogs/masterpage/Forms/AllItems.aspx 页面上。

可以在 Sharepoint 设计器中找到一个母版页（连接到站点后），另一个位于 C:\Program Files\Common Files\microsoft shared\Web Server Extensions\12\TEMPLATE\LAYOUTS\ 文件夹中。

# python - 选择多个文件。Python

> ID：13579235
> 
> 赞同：1
> 
> 时间：2012-11-27T07:21:35.590
> 
> 标签：python, file, select

我创建了这个搜索和替换程序。但我想对其进行更改，因此我可以一次搜索和替换多个文件。现在，有没有办法让我可以从我选择的任何文件夹或目录中一次选择多个文件。

下面给出了帮助我使用文件对话框窗口选择文件的代码，但给出了错误。你能帮我改正吗？完整的回溯错误是：

```
Traceback <most recent call last>:
 File "replace.py", line 24, in <module>
 main()
File "replace.py", line 10, in main
 file = tkFileDialog.askopenfiles(parent=root,mode='r',title='Choose a file')
File "d:\Python27\lib\lib-tk\tkFileDialog.py",line 163, in askopenfiles
   ofiles.append(open(filename,mode))
IOError: [Errno 2] No such file or directory: u'E' 
```

这是代码：我终于得到了这个代码，我将'file'更改为'filez'，将'askopenfiles'更改为askopenfilenames'。我能够替换我选择的文件中的单词。唯一的问题是当我选择 2 个文件时它不起作用。也许我应该添加一个循环以使其适用于多个文件。但是，这是一种反复试验，我希望能够真正知道它为什么起作用。有没有一本书或其他东西可以帮助我完全理解这个 tkinter 和文件对话框的东西？无论如何，我已经更改了下面的代码以显示现在的工作代码：

```
#replace.py
import string
def main():
    #import tkFileDialog
    #import re
    #ff = tkFileDialog.askopenfilenames()
    #filez = re.findall('{(.*?)}', ff)
    import Tkinter,tkFileDialog
    root = Tkinter.Tk()
    filez = tkFileDialog.askopenfilenames(parent=root,mode='r',title='Choose a file')
#filez = raw_input("which files do you want processed?")
f=open(filez,"r")
data=f.read()
w1=raw_input("what do you want to replace?")
w2= raw_input("what do you want to replace with?")
print data
data=data.replace(w1,w2)
print data
f=open(filez,"w")
f.write(data)
f.close()

main() 
```

编辑：下面的回复之一给了我关于文件对话框窗口的想法，现在我可以使用 tkinter 窗口选择多个文件，但我无法继续进行替换。它给出了错误。我尝试了不同的方式来使用文件对话框，不同的方式给出了不同的错误。我没有删除其中一种方式，而是在前面放了一个井号，以便发表评论，所以你们可以看看哪个更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:29:50.773

也许你应该看看[glob 模块](http://docs.python.org/2.7/library/glob.html)，它可以很容易地找到所有匹配一个简单模式（例如`*.txt`）的文件。

或者，更简单但对用户不太友好，您当然可以将输入文件名`filez`视为一个列表，用空格分隔文件名：

```
for fn in filez.split():
  # your code here, replacing filez with fn 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:25:05.443

我宁愿使用命令行而不是输入。

```
#replace.py

def main():
    import sys
    w1 = sys.argv[1]
    w2 = sys.argv[2]
    filez = sys.argv[3:]
    # ***
    for fname in filez:
        with open(fname, "r") as f:
            data = f.read()
            data = data.replace(w1, w2)
            print data
        with open(fname, "w") as f:
            f.write(data)
if __name__ == '__main__':
    main() 
```

所以你可以调用你的程序

```
 replace.py "old text" "new text" *.foo.txt 
```

或者

```
 find -name \*.txt -mmin -700 -exec replace.py "old text" "new text" {} + 
```

如果您想到一个对话框窗口，您可以在 的位置插入以下内容`***`：

```
if not filez:
    import tkFileDialog
    import re
    ff = tkFileDialog.askopenfilenames()
    filez = re.findall('{(.*?)}', ff) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T07:41:59.087

您可能想看看 glob 模块。

在您的输入中处理“*”的示例：

```
#replace.py
import string
import glob

def main():
    filez = raw_input("which files do you want processed?")
    filez_l = filez.split()
    w1=raw_input("what do you want to replace?")
    w2= raw_input("what do you want to replace with?")
    # Handle '*'  e.g. /home/username/* or /home/username/mydir/*/filename
    extended_list = []
    for filez in filez_l:
        if '*' in filez:
           extended_list += glob.glob(filez)
        else:
           extended_list.append(filez)
    #print extended_list
    for filez in extended_list:
        print "file:", filez
        f=open(filez,"r")
        data=f.read()
        print data
        data=data.replace(w1,w2)
        print data
        f=open(filez,"w")
        f.write(data)
        f.close()
main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-24T06:33:17.807

在 python 中逐行打开大文件的一个好技巧：

```
contents =  map(lambda x: x.next().replace("\n",""),map(iter,FILES)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T07:25:58.253

为什么不将程序放入 for 循环：

```
def main():
    files = raw_input("list all the files do you want processed (separated by commas)")
    for filez in files.split(','):
        f=open(filez,"r")
        data=f.read()
        f.close()
        w1=raw_input("what do you want to replace?")
        w2= raw_input("what do you want to replace with?")
        print data
        data=data.replace(w1,w2)
        print data
        f=open(filez,"w")
        f.write(data)
        f.close()

main() 
```

# twitter-bootstrap - 来自 url 的 div 上的活动类

> ID：13579238
> 
> 赞同：3
> 
> 时间：2012-11-27T07:21:36.353
> 
> 标签：twitter-bootstrap, carousel

我有一个 twitter Bootstrap Carousel，我试图从外部页面链接到它的单独幻灯片。我需要使用 url 来完成。

等等

```
http://www.example.com/carousel.html#item3:active 
```

将第三张幻灯片设置为活动

有没有办法我可以做到？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:59:43.810

这是完全可能的。您可以通过 获取`#`当前 URL 中之后的部分`document.location.hash`，并且可以使用 链接到特定幻灯片`$('.some-carousel').carousel(slideNr)`。放在一起，您的代码可能如下所示：

```
$(function () {
  var slide = document.location.hash.match(/^slide-(\d+)$/);
  if (slide) {
    $('.some-carousel').carousel(parseInt(slide[1], 10));
  }
}); 
```

# postgresql - 1小时后postgresql更新

> ID：13579248
> 
> 赞同：5
> 
> 时间：2012-11-27T07:22:23.940
> 
> 标签：postgresql

```
CREATE TABLE em_user
(
  user_id character(10),
  last_attempt integer,
  last_unsuccessfull_login timestamp with time zone,
  is_locked boolean DEFAULT false);

UPDATE em_user
SET is_locked = TRUE
           WHERE last_attempt >3 AND last_unsuccessfull_login=last_unsuccessfull_login+'2 minutes'; 
```

我想在 postgresql 中 1 小时后更新我的表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:41:36.803

pgAgent 是你需要的。看看这里：[http ://www.pgadmin.org/docs/1.8/pgagent.html](http://www.pgadmin.org/docs/1.8/pgagent.html)

您可以创建每小时、每 15 分钟等执行的作业。

**编辑：**

在您的特定情况下，最好在多次登录失败后立即通过触发器锁定用户。

下一步是每 15 分钟运行一次 pgAgent 作业。通过这项工作，您可以再次解锁此帐户，这些帐户已锁定超过 15 分钟。因此，您可以防止想要锁定所有用户的 DoS 攻击。

# knockout.js - foreach:$data 并更改 $data

> ID：13579251
> 
> 赞同：0
> 
> 时间：2012-11-27T07:22:31.720
> 
> 标签：knockout.js

我有一个arrayList，例如 BallonColor = {red,Green} 所以我需要创建 2 次下拉框，如果我有 5 种颜色，那么我需要有 5 个下拉列表，其中所有 5 个项目作为所有下拉列表中的选项

如何在淘汰赛中实现

我尝试了以下代码..采用 foreach:$data （即每个项目）但是在更改下拉列表的值时，绑定的 $index 和 $data 没有改变

```
<div data-bind = "foreach:$data" class="row">
                <div class="col">  
                    <select id ="SELECT" data-bind="options:$parent, optionsText: 'AttributeName', optionsValue: 'Id', optionsCaption: 'Select Attribute...',value : SelectedAttribute"></select>
                    <div data-bind="template: { name: function() { return templateName($parent,$data,SelectedAttribute) } }"></div>
                    <div>
                        <span>with any of the following values:</span>
                    </div>
                    <div class="option">
                        <a href="#"  id = "List"   class="link">List</a> | <a href="#"  id= "Range" class="link">Range</a>
                    </div>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:50:24.807

这个问题类似于我已经回答的这个问题（可能） [。](https://stackoverflow.com/questions/13267662/place-the-dropdown-list-in-for-each-of-ko-databind/13515179#13515179)
请看看这个，让我知道结果。

谢谢。

# c# - 如何在 C# 中模拟用户输入

> ID：13579252
> 
> 赞同：-1
> 
> 时间：2012-11-27T07:22:35.747
> 
> 标签：c#, location, user-input

如何在第三方程序的窗口中设置光标位置（不是屏幕位置，我需要它作为窗口位置）？

我怎样才能将（Ctrl + V）东西粘贴到这个窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:27:53.090

我建议阅读一些关于编码用户界面测试的内容。它们实际上很容易在基本层面上实现。[http://msdn.microsoft.com/en-us/library/dd286726.aspx](http://msdn.microsoft.com/en-us/library/dd286726.aspx)

# sql-server-2008 - 在 sql server 2008 中

> ID：13579253
> 
> 赞同：1
> 
> 时间：2012-11-27T07:22:39.507
> 
> 标签：sql-server-2008

```
select  tblProductMaster.*,AVG(tblReviewMaster.Rating) from tblProductMaster 
    left join tblReviewMaster 
    on tblProductMaster.ProductID = tblReviewMaster.ProductID       
Group By tblProductMaster.ProductID 
```

此查询返回错误：

> *列 'tblReviewMaster.ReviewID' 在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。*

它不允许我有任何带有 AVG 功能的列......如果我写

```
select AVG(tblReviewMaster.Rating) from tblProductMaster ... 
```

然后它工作正常

那么如何获取产品详细信息`tblProductMaster`呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:29:18.867

错误消息显示“列 'tblReviewMaster.ReviewID' 在选择列表中无效，因为**它不包含在聚合函数或 GROUP BY 子句中。** ”

这意味着除了聚合函数（AVG）中的列之外的所有列都应该是 Group By Clause 的一部分。因此，如果 * 表示（第 1 列、第 2 列......等），那么所有这些列都必须出现在 GroupBy 子句中。

所以你的查询是

```
select  tblProductMaster.*,AVG(tblReviewMaster.Rating) from tblProductMaster 
    left join tblReviewMaster 
    on tblProductMaster.ProductID = tblReviewMaster.ProductID       
Group By tblProductMaster.* 
```

*，我的意思是写所有代表 * 的列。* 在这里不起作用。

请在[MSDN上找到更多详细信息](http://msdn.microsoft.com/en-us/library/ms177673.aspx)

# ios5 - NSPredicate 不会在 iOS 5 中过滤长值数据

> ID：13579262
> 
> 赞同：0
> 
> 时间：2012-11-27T07:23:14.463
> 
> 标签：ios5, nsarray, filtering, nspredicate

我正在尝试使用 NSPredicate 从数组中过滤数据。我的数组（arrLikes）包含来自服务器的以下数据

```
{
    "id":17,
    "likes":[
        {
        "likedBy":
            {
             "firstName":"Bob",
             "lastName":"Builder",
             "id":1
            }
        }],
    "comments":[]
} 
```

我正在尝试从数组中过滤数据，如下所示

```
long loggedInUserId = [[dictUserInfo objectForKey:@"id"] longValue];
NSPredicate *likePredicate = [NSPredicate predicateWithFormat:@"id == %ld", loggedInUserId ];
NSArray *filteredLikeArray  = [arrLikes filteredArrayUsingPredicate:likePredicate]; 
```

即使我的 loggedInUserId 为 1，filteredLikeArray 计数也会返回 0。上面的代码有什么问题？任何形式的帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:46:55.513

您是否尝试将 long 转换为 NSString 如下？

```
long loggedInUserId = 17;
NSString *stringUserId = [NSString stringWithFormat:@"%ld", loggedInUserId];
NSPredicate *likePredicate = [NSPredicate predicateWithFormat:@"id == %@", stringUserId];
NSArray *filteredLikeArray  = [arrLikes filteredArrayUsingPredicate:likePredicate]; 
```

# php - 如何使用 Shopify API 取消订单和退款？

> ID：13579263
> 
> 赞同：0
> 
> 时间：2012-11-27T07:23:14.280
> 
> 标签：php, curl, shopify

我一直在尝试使用 php 中的 shopify API 取消并退款我的一个订单。当我向 Shopify API 发送 curl 请求时，它的响应是空白的。

这是我的代码：

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://3de0c1f89e936d4f52b29aXXXXXXX:8ae242d39b8fde6b0f8fe04fXXXXXXXX@ABC-XYZ.myshopify.com/admin/orders/145785434/cancel.json?amount=45.5");
curl_setopt($ch, CURLOPT_HEADER, false); 
curl_setopt($ch, CURLOPT_HTTPGET, true);

curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Accept: application/json'));
$response = curl_exec($ch);
$result = json_decode($response);
curl_close($ch);
echo '<pre>';
print_r($result);
echo '</pre>';
?> 
```

我错过了什么。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:10:54.990

这不是代码的问题。这是您尝试访问的地址（或介于两者之间的任何地址）的问题。您需要自己调试问题。首先，启用标头输出并查看您收到的响应。

```
curl_setopt($ch, CURLOPT_HEADER, true); 
```

在将接收到的数据传递给 JSON 解码器之前，将其回显，以查看它是否损坏或空白。

```
echo $response; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-01T14:02:06.883

**取消**Shopify API 函数应通过 POST 方法发送。 [![在此处输入图像描述](../Images/ad3f3de31efb1bebbd884df720adb748.png)](https://i.stack.imgur.com/5uZrT.png)

我分享我用来取消订单的代码：

```
 $url = "https://API_KEY:API_PASS@YOUR_SHOP.myshopify.com/admin/api/2021-01/orders/$orderId/cancel.json";

    $curl = curl_init();

    $data = new stdClass();
    $data->reason = 'declined';

    $jsonData = json_encode($data);

    //Set the URL that you want to GET by using the CURLOPT_URL option.
    curl_setopt($curl, CURLOPT_URL, $url); 
    curl_setopt($curl, CURLOPT_HTTPHEADER, array(
        'Content-type: application/json'
    ));
    //curl_setopt($curl, CURLOPT_HEADER, true);

    curl_setopt($curl, CURLOPT_POST, true);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $jsonData);

    //Set CURLOPT_RETURNTRANSFER so that the content is returned as a variable.
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
    //additional options
    curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 20);
    curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false);
    curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);

    //Set CURLOPT_FOLLOWLOCATION to true to follow redirects.
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);

    //Execute the request.
    $result = curl_exec($curl); 
```

如果要发送更多参数，请将它们添加到**$data**变量中。例子：

```
$data->amount = '45.5';
$data->currency = 'USD'; 
```

检查货币是否是发送金额时所需的字段。[在Shopify 订单 API 文档](https://shopify.dev/docs/admin-api/rest/reference/orders/order#index-2021-01)中查看更多信息

# input - 如何在 Rust 中读取用户输入？

> ID：13579266
> 
> 赞同：54
> 
> 时间：2012-11-27T07:23:23.470
> 
> 标签：input, io, rust

我打算做一个标记器。我需要阅读用户键入的每一行，并在用户按下`Ctrl`+后停止阅读`D`。

我四处搜索，只发现[一个](http://rusttutorial.blogspot.ca/2012/09/command-line-user-input-stdin.html)关于 Rust IO 的示例，它甚至无法编译。我查看了`io`模块的文档，发现该`read_line()`函数是`ReaderUtil`接口的一部分，但`stdin()`返回的是 a `Reader`。

我想要的代码在 C++ 中基本上如下所示：

```
vector<string> readLines () {
    vector<string> allLines;
    string line;

    while (cin >> line) {
        allLines.push_back(line);
    }

    return allLines;
} 
```

> [这个问题指的是 Rust 1.0 之前的部分 Rust，但一般概念在 Rust 1.0 中仍然有效。]

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-07-09T11:10:54.307

Rust 1.x（参见[文档](https://doc.rust-lang.org/std/io/index.html#iterator-types)）：

```
use std::io;
use std::io::prelude::*;

fn main() {
    let stdin = io::stdin();
    for line in stdin.lock().lines() {
        println!("{}", line.unwrap());
    }
} 
```

Rust 0.10–0.12（参见[文档](http://doc.rust-lang.org/0.12.0/std/io/index.html)）：

```
use std::io;

fn main() {
    for line in io::stdin().lines() {
        print!("{}", line.unwrap());
    }
} 
```

Rust 0.9（参见[0.9 文档](http://static.rust-lang.org/doc/0.9/std/io/index.html)）：

```
use std::io;
use std::io::buffered::BufferedReader;

fn main() {
    let mut reader = BufferedReader::new(io::stdin());
    for line in reader.lines() {
        print(line);
    }
} 
```

锈 0.8：

```
use std::io;

fn main() {
    let lines = io::stdin().read_lines();
    for line in lines.iter() {
        println(*line);
    }
} 
```

锈 0.7：

```
use std::io;

fn main() {
    let lines = io::stdin().read_lines();
    for lines.iter().advance |line| {
        println(*line);
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-04-17T22:37:59.507

截至 2015 年 4 月 17 日，来自`mdcox`Firefox Rust [IRC](https://en.wikipedia.org/wiki/Internet_Relay_Chat)频道。

```
use std::io;

fn main() {
    let mut stdin = io::stdin();
    let input = &mut String::new();

    loop {
        input.clear();
        stdin.read_line(input);
        println!("{}", input);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-20T20:20:44.473

在 Rust 1.0 及更高版本中，您可以[`lines`](https://doc.rust-lang.org/std/io/trait.BufRead.html#method.lines)在任何实现[`std::io::BufRead`](https://doc.rust-lang.org/std/io/trait.BufRead.html)trait 的东西上使用该方法来获取输入中行的迭代器。您也可以使用[`read_line`](https://doc.rust-lang.org/std/io/trait.BufRead.html#method.read_line)，但使用迭代器更可能是您想要的。这是使用迭代器的问题中函数的一个版本；有关更详细的说明，请参见下文。（[游乐场链接](https://play.rust-lang.org/?gist=84712f10131b11a07030a4f4585cccc4&version=stable)）

```
use std::io;
use std::io::prelude::*;

pub fn read_lines() -> Vec<String> {
    let stdin = io::stdin();
    let stdin_lock = stdin.lock();
    let vec = stdin_lock.lines().filter_map(|l| l.ok()).collect();

    vec
} 
```

这是一个更像问题中的 C++ 版本的版本，但在 Rust （[操场](https://play.rust-lang.org/?gist=d1fd3aa77f8a1475e4b4a3b1487e6645&version=stable)）中并不是真正的惯用方式：

```
use std::io;
use std::io::prelude::*;

pub fn read_lines() -> Vec<String> {
    let mut vec = Vec::new();
    let mut string = String::new();

    let stdin = io::stdin();
    let mut stdin_lock = stdin.lock();

    while let Ok(len) = stdin_lock.read_line(&mut string) {
        if len > 0 {
           vec.push(string);
           string = String::new();
        } else {
            break
        }
    }

    vec
} 
```

要获得实现的东西，`BufRead`需要调用`lines()`or `read_line()`，您调用[`std::io::stdin()`](https://doc.rust-lang.org/std/io/fn.stdin.html)以获得标准输入的句柄，然后调用[`lock()`](https://doc.rust-lang.org/std/io/struct.Stdin.html#method.lock)其结果以获得对标准输入流的独占控制（您必须具有独占控制才能获得`BufRead`,因为否则如果两个线程同时从标准输入读取，缓冲可能会产生任意结果）。

要将结果收集到 中`Vec<String>`，您可以使用[`collect`](https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.collect)迭代器上的方法。`lines()`在 上返回一个迭代器`Result<String>`，因此我们需要处理无法读取行的错误情况；对于这个例子，我们只是忽略了错误`filter_map`，只是跳过了任何错误。

类似 C++ 的版本使用`read_line`，它将读取的行附加到给定的字符串，然后我们将字符串推送到我们的`Vec`. 因为我们将字符串的所有权转移到`Vec`我们这样做的时候，并且因为`read_line`否则会继续附加到`string`，我们需要为每个循环分配一个新字符串（这似乎是问题中原始 C++ 版本中的一个错误，在共享相同的字符串，因此将继续累积每一行）。我们习惯于[`while let`](https://doc.rust-lang.org/book/first-edition/if-let.html#while-let)继续读取，直到遇到错误，如果我们读取表示输入结束的零字节，我们就会中断。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-02T13:53:51.297

问题是从标准输入中读取行并返回一个向量。在 Rust 1.7 中：

```
fn readlines() -> Vec<String> {
    use std::io::prelude::*;
    let stdin = std::io::stdin();
    let v = stdin.lock().lines().map(|x| x.unwrap()).collect();
    v
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-10-29T02:08:30.430

我能想到的方法很少。

将所有输入读入单个`String`

```
let mut input = String::new();
io::stdin().read_to_end(&mut input); 
```

将行读入`Vector`. `panic`当读取一行失败时，这个不会。相反，它会跳过失败的行。

```
let stdin = io::stdin();
let locked = stdin.lock();
let v: Vec<String> = locked.lines().filter_map(|line| line.ok()).collect(); 
```

此外，如果你想解析它：

将其读入字符串后执行此操作。您可以将其解析为实现`FromIterator`. 集合中包含的元素也必须实现`FromStr`。只要满足特征约束，就可以将 Vec 更改为 any `Collection:FromIterator`, `Collection<T: FromStr>`：

```
let v: Vec<i32> = "4 -42 232".split_whitespace().filter_map(|w| w.parse().ok()).collect(); 
```

此外，您可以在以下设备上使用它`StdinLock`：

```
let vv: Vec<Vec<i32>> = locked
    .lines()
    .filter_map(|l|
        l.ok().map(|s|
            s.split_whitespace().filter_map(|word| word.parse().ok()).collect()
        )
    )
    .collect(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-27T08:12:59.577

呃……经过多次尝试和错误，我找到了解决方案。

我仍然希望看到更好的解决方案，所以我不会接受我自己的解决方案。

下面的代码准确地打印出用户输入的内容。

```
mod tokenizer {

    pub fn read () -> ~[int] {
        let reader = io::stdin();
        let mut bytes: ~[int] = ~[];

        loop {
            let byte: int = reader.read_byte();
            if byte < 0 {
                return bytes;
            }
            bytes += [byte];
        }
    }
}

fn main () {
    let bytes: ~[int] = tokenizer::read();
    for bytes.each |byte| {
        io::print(#fmt("%c", *byte as char));
    }
} 
```

> [这个答案早于 Rust 1.0。请参阅现代解决方案的其他答案。]

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-11-28T09:50:49.893

在 Rust 0.4 中，使用`ReaderUtil`trait 来访问`read_line`函数。请注意，您需要将值显式转换为特征类型，例如`reader as io::ReaderUtil`：

```
fn main() {
    let mut allLines = ~[];
    let reader = io::stdin();

    while !reader.eof() {
            allLines.push((reader as io::ReaderUtil).read_line());
    }

    for allLines.each |line| {
            io::println(fmt!("%s", *line));
    }
} 
```

> [这个答案早于 Rust 1.0。请参阅现代解决方案的其他答案。]

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-16T19:04:53.497

从*[处理猜测](https://doc.rust-lang.org/book/ch02-00-guessing-game-tutorial.html#processing-a-guess)*

```
use std::io;

fn main() {
    println!("Guess the number!");

    println!("Please input your guess.");

    let mut guess = String::new();

    io::stdin().read_line(&mut guess).expect("Failed to read line");

    println!("You guessed: {}", guess);
} 
```

虽然在 Rust 中有许多不同的方法可以做到这一点，但我认为这是最简单的实现方式。

```
use std::io;
// ...
    let mut input = String::new();
    io::stdin().read_line(&mut input).expect("Failed to read line");

    println!("Your input was `{}`", input);
// ... 
```

# java - 构造函数和方法中数组的内容不同

> ID：13579268
> 
> 赞同：1
> 
> 时间：2012-11-27T07:23:45.447
> 
> 标签：java, list, constructor, arraylist

我有自己的课程`Event`，其中很少有变量，例如**主题**、**开始**和**结束**时间。然后我`Day`上课有这些`Events`。但是，当我初始化`Day`它时，它会在构造函数中获得正确的`Event`列表，然后我将该列表存储在本地列表中，然后尝试以其他方法返回它，但它为同一列表提供了不同的内容。

这是澄清事情的代码：

```
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;

public class Day {

    private String date;
    private ArrayList<Event> events = new ArrayList<Event>();
    private SimpleDateFormat dayDotMonth = new SimpleDateFormat("dd.MM EEEE");

    public Day(int date, ArrayList<Event> newEvents){
        this.events = newEvents;

        System.out.println("FROM Constructor:");
        for (Event event : this.events) {
            System.out.println(event.getSubject()); // CORRECT LIST
        }

        Calendar cal = Calendar.getInstance();
        cal.setTimeInMillis(date*1000L);
        this.date = dayDotMonth.format(cal.getTime());

    }

    public String getDate(){
        return this.date;
    }

    public ArrayList<Event> getEvents(){

        System.out.println("FROM getEvents():");
        for (Event event : this.events) {
            System.out.println(event.getSubject()); // INCORRECT LIST
        }
        return this.events;
    }

    public int getAmountOfEvents(){
        return this.events.size();
    }
} 
```

当我在构造函数中打印列表时，我得到了正确的列表。但是，当我在方法中打印列表时，`getEvents()`它只给了我 1 个事件，它可能存在也可能不存在`Day`。

这是我的事件类：

```
 public class Event {

        private int start, end;
    private String subject, eventId, description;

    public Event(int start, int end, String subject, String eventId, String description) {
        this.start = start;
        this.end = end;
        this.subject = subject;
        this.description = description;
        this.eventId = eventId;

    }

    public int getStart() {
        return this.start;
    }

    public int getEnd() {
        return this.end;
    }

    public String getSubject() {
        return this.subject;
    }

    public String getEventId() {
        return this.eventId;
    }

    public String getDescription() {
        return this.description;
    }
} 
```

这是我的调用代码：

```
 private void getObjects(String url) throws JSONException, Exception {
            JSONObject jsonObject = new JSONObject(new NetTask().execute(url).get());
            JSONArray job1 = jsonObject.getJSONArray("events");
            ArrayList<Event> events = new ArrayList<Event>();
            Calendar calPrev = Calendar.getInstance();
            int prevDate = 0;
            boolean first = true;

            for (int i = 0; i < job1.length(); i++) {
                JSONObject myJsonObject = job1.getJSONObject(i);
                int start = myJsonObject.getInt("start");
                int end = myJsonObject.getInt("end");
                String subject = myJsonObject.getString("subject");
                String eventId = myJsonObject.getString("eventid");
                String description = myJsonObject.getString("description");

                if(first){
                    prevDate = start;
                    calPrev.setTimeInMillis(start*1000L);
                    events.add(new Event(start,end,subject,eventId,description));
                    first = false;
                }else{
                    Calendar calCur = Calendar.getInstance();
                    calCur.setTimeInMillis(start*1000L);

                    if(calPrev.get(Calendar.YEAR) == calCur.get(Calendar.YEAR) && calPrev.get(Calendar.DAY_OF_YEAR) == calCur.get(Calendar.DAY_OF_YEAR)){
                        events.add(new Event(start,end,subject,eventId,description));
                        calPrev.setTimeInMillis(start*1000L);
                    }else{
                        calPrev.setTimeInMillis(start*1000L);
                        this.days.add(new Day(prevDate,events));
                        prevDate = start;
                        events.clear();
                        events.add(new Event(start,end,subject,eventId,description));
                    }
                }
            }
            this.days.add(new Day(prevDate,events));

System.out.println("Last day added to list\nPrinting events from days:");
        for (Day day : this.days){
            ArrayList<Event> events = day.getEvents();
            for(Event event : events){
            System.out.println(event.getSubject());
            }
        }
        } 
```

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:37:54.563

您尚未显示调用构造函数的内容，但您只是复制对集合的*引用*这一事实意味着，如果集合随后发生更改，您将看到这些更改。例如：

```
ArrayList<Event> events = new ArrayList<Event>();
events.add(new Event(0, 1, "id", "subject", "description"));
Day day = new Day(0, events);
events.clear();
System.out.println(day.getEvents().size()); // 0 
```

我的猜测是在您的调用代码中发生了类似的事情 - 那是您`Day`使用相同的填充每个`ArrayList`，然后您正在更改。如果您可以发布调用代码，我们可以验证。

您可以在`Day`构造函数中获取防御性副本，更改以下内容：

```
this.events = newEvents; 
```

对此：

```
this.events = new ArrayList<Event>(newEvents); 
```

此外，我建议您将`ArrayList`变量和参数更改为类型`List<Event>`- 通常，更喜欢对接口进行编程。也完全不清楚事件中的内容`start`和`end`含义，并且您的代码当前正在使用系统的默认时区 - 它是这样的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:37:22.807

您好，没有错，我用字符串数组列表测试了它，它工作正常。

但是我们不知道您如何填充您的数组列表并将其传递给您的班级，如果如下所示，它应该可以正常工作。

public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main);

```
 ArrayList<String> arr = new ArrayList<String>();
        arr.add("1");
        arr.add("2");
        arr.add("3");
        arr.add("4");
        arr.add("5");
        arr.add("6");

        Day d = new Day(1, arr);
        d.getStrings();

    }

package com.talha.examples;    
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;

public class Day {

    private String date;
    private ArrayList<String> Strings = new ArrayList<String>();
    private SimpleDateFormat dayDotMonth = new SimpleDateFormat("dd.MM EEEE");

    public Day(int date, ArrayList<String> newStrings){
        this.Strings = newStrings;

        System.out.println("FROM Constructor:");
        for (String s : this.Strings) {
            System.out.println(s); // CORRECT LIST
        }

        Calendar cal = Calendar.getInstance();
        cal.setTimeInMillis(date*1000L);
        this.date = dayDotMonth.format(cal.getTime());

    }

    public String getDate(){
        return this.date;
    }

    public ArrayList<String> getStrings(){

        System.out.println("FROM getStrings():");
        for (String s : this.Strings) {
            System.out.println(s); // INCORRECT LIST
        }
        return this.Strings;
    }

    public int getAmountOfStrings(){
        return this.Strings.size();
    }
} 
```

# java - 使用任何 Java 模拟框架模拟聚合

> ID：13579269
> 
> 赞同：1
> 
> 时间：2012-11-27T07:23:53.333
> 
> 标签：java, testing, mockito, easymock, powermock

是否有任何模拟框架可以对每个孩子进行“全面”模拟？例如。

```
final Report report = createMock(Report.class);
expect(report.getReportSides().get(0).getSideGroup().get(1)).andStubReturn(createSomething()); 
```

我希望在我不必做任何其他事情的情况下模拟带有这些索引的调用，并且在我开始编写大量测试代码之前......这在任何框架中是否可行，EasyMock、PowerMock、Mockito 等？

（类示例是从客户 XML 自动生成的遗留类，因此类结构怪异，并且没有域服务层）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:34:25.643

我相信你知道强烈建议不要模拟值，但是对于遗留的东西可能会有时髦的东西。

无论如何，以下声明可能会起到很大的作用：

```
mock(Report.class, RETURNS_DEEP_STUBS) 
```

但是，您似乎在您的聚合中有集合`report.getReportSides().get(0).getSideGroup().get(1)`，并且由于类型泛型擦除 Mockito 或其他框架无法推断应该在集合中的运行时类型，因此`RETURNS_DEEP_STUBS`answer 将创建一个与通过反射读取的返回类型匹配的模拟，并将`Object`在 java 集合的情况下，当然是自己的模拟。所以你必须手动处理它。

附带说明一下，mockito 主干中的泛型类型已经取得了进展，它可以检索嵌入在类中的更多泛型信息，它显然不接近任何具有运行时自省的东西（对于当前版本的 Java 是不可能的），但它更接近给它。升级后`RETURNS_DEEP_STUBS`，您可以执行以下操作：

```
public interface A<K extends MyKeyType> extends Map<K, MyValueType> {}

deepStubMock.entrySet().iterator().next()
    .getValue().someValueTypeMethod().eventuallyFollowedByAnotherMethod(); 
```

*编辑：看起来大卫在评论中回答了我之前的问题：）*

# php - 将圆角添加到 jpeg 文件

> ID：13579272
> 
> 赞同：3
> 
> 时间：2012-11-27T07:24:07.397
> 
> 标签：php, rounding, background-color, imagick

我正在尝试向 jpeg 文件添加圆角，但问题是添加圆角后，我得到了黑色背景色。不知何故，我无法将其更改为任何其他颜色（白色、透明、红色）。它只是简单地显示图像具有圆角的黑色背景。

我正在使用的代码是：

```
<?php

    $image = new Imagick('example.jpg');
    $image->setBackgroundColor("red");
    $image->setImageFormat("jpg");
    $image->roundCorners(575,575);
    $image->writeImage("rounded.jpg");
    header('Content-type: image/jpeg');
    echo $image;

?> 
```

我不能使用 png，因为 jpeg 文件很大，大约 5 MB，所以如果我使用 png，文件大小将达到 26 MB，即使 png 添加了透明圆角。

我使用的 IMagick 版本也是：

```
ImageMagick 6.6.2-10 2010-06-29 Q16 http://www.imagemagick.org 
```

输出（生成的图像）​​也将被打印，所以我不知道 css 是否可以在这里工作。

抱歉，我正在尝试从已经存在的没有圆角的 jpeg 文件创建一个带有圆角的新 jpeg 文件，这实际上是从相机拍摄的照片，所以颜色有多种/太多，所以我可以'也不要使用 gif。

此外，我的网站只会生成圆角图像，然后由网站管理员使用 FTP 程序下载，然后使用系统软件打印，所以简而言之，我的网站不会打印图像，而是只生成它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T21:58:55.480

Try this:

```
<?php 
$input = 'example.jpg';
$size = getimagesize($input);
$background = new Imagick();
$background->newImage($size[0], $size[1], new ImagickPixel('red'));
$image = new Imagick($input);
$image->setImageFormat("png");
$image->roundCorners(575,575);
$image->compositeImage($background, imagick::COMPOSITE_DSTATOP, 0, 0);
$image->writeImage("rounded.jpg");
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T07:32:03.240

我可能会被否决，但我说让 css 处理角落并减轻你的服务器的一些负载:)

[CSS 圆角。](http://www.css3.info/preview/rounded-border/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T07:38:27.590

JPG 在其调色板中没有透明颜色（Alpha 通道）。

输出图像必须使用 PNG 或 GIF（或其他支持 Alpha 通道的图像格式）。

如果您想要不透明的背景，[setImageBackgroundColor是另一种选择。](http://www.php.net/manual/en/imagick.setimagebackgroundcolor.php)

* * *

*编辑*

您的评论提醒我您可以尝试使用命令行；`shell_exec()`将从 PHP 运行命令行参数。您需要从 ImageMagick API 中的命令开始`convert example.jpg`，然后您可以使用所需的各种参数传递标志。

由于 ImageMagick 已经安装，它会立即工作。您可能需要将系统指向`PATH`所有可执行文件所在的 ImageMagick 目录。

有很多问题和论坛专门针对这种方法的圆角，所以我将把它留给你。

不过这里有一个有用的提示 - 该命令有一个愚蠢的混淆`convert`，因为 Windows 也有一个`convert.exe`很少使用的，但会混淆你的命令行，所以确保你调用正确的`convert`. ;) 要测试它是否正常工作，请尝试`convert example.jpg example.gif`（这应该将您的示例转换为 gif）。

要从命令行获取输出，请完成所有`2>&1`将`cmd` [输出返回 PHP](https://stackoverflow.com/questions/818255/in-the-shell-what-is-21)的命令。

# c# - 在 C# 中不使用循环更改数据表列中的 DATETIME 格式

> ID：13579276
> 
> 赞同：2
> 
> 时间：2012-11-27T07:24:32.307
> 
> 标签：c#, datetime, datatable

我有一个数据表，其中有一列“subscribeDate”，其中包含 MM/dd/yyyy hh:mm:ss 格式的日期。我想将此列中的所有日期更改为 MM-dd-yyyy hh:mm:ss 格式。有没有一种方法可以在不运行循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:31:48.293

我希望 中的值`DataTable`是 type`DateTime`或`DateTimeOffset`. 假设是这种情况，它们没有*格式*。它们只是日期和时间。如何将它们转换为字符串取决于您。

如果它们*尚未*采用适当的数据类型，则应尝试更改获取数据的方式。尽可能早地将其从字符串格式转换为更合适的数据类型，并且仅在真正需要时将其转换*回字符串。*

您还没有解释如何显示`DataTable`，但我知道的大多数方式都允许您指定格式字符串 -*这是*您指定`MM-dd-yyyy HH:mm:ss`格式的地方。（注意`HH`而不是`hh`, 以获得 24 小时。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T07:31:56.003

如果您的应用程序中没有一些文化限制（我不知道您的应用程序是如何工作的），您应该能够做到这一点。像这样的东西：

```
myTable.Columns["Date"].Convert(
    val => DateTime.Parse(val.ToString()).ToString("dd/MMM/yyyy")); 
```

您可以在哪里找到转换功能是否可以[格式化数据表的日期列？](https://stackoverflow.com/questions/3209829/is-it-possible-to-format-a-date-column-of-a-datatable)

# mongodb - MongoDB索引问题

> ID：13579279
> 
> 赞同：2
> 
> 时间：2012-11-27T07:24:34.747
> 
> 标签：mongodb, indexing

MongoDB 可以将具有不同字段的文档存储在一个集合中。那么索引将如何工作？如果我在不是所有文档中都存在的字段上创建索引，那么没有索引的文档不会被索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:40:03.517

索引中没有该字段的文档将被索引为该字段没有值。您可能想查看此内容： http: [//docs.mongodb.org/manual/core/indexes/](http://docs.mongodb.org/manual/core/indexes/)

如果您不想在索引中包含没有键的文档，可以使用稀疏索引：[http ://docs.mongodb.org/manual/administration/indexes/#sparse-indexes](http://docs.mongodb.org/manual/administration/indexes/#sparse-indexes)

# android - android中的logcat显示只是关闭VM？

> ID：13579284
> 
> 赞同：1
> 
> 时间：2012-11-27T07:25:15.857
> 
> 标签：android, android-emulator, garbage-collection, stack-trace, android-logcat

昨天它运行良好，但今天显示一条消息“不幸的是应用程序已停止”，并且 logcat 显示“正在关闭 VM”。

此应用程序的堆栈跟踪..

```
11-27 13:24:17.035: W/Trace(806): Unexpected value from nativeGetEnabledTags: 0
11-27 13:24:17.455: W/Trace(806): Unexpected value from nativeGetEnabledTags: 0
11-27 13:24:17.485: W/Trace(806): Unexpected value from nativeGetEnabledTags: 0
11-27 13:24:17.485: D/AndroidRuntime(806): Shutting down VM
11-27 12:30:51.683: D/AndroidRuntime(734): Shutting down VM
11-27 12:30:51.943: D/dalvikvm(734): GC_CONCURRENT freed 137K, 9% free 2625K/2880K,paused23ms+7ms, total 230ms
11-27 12:37:12.259: D/dalvikvm(878): newInstance failed: p0 i0 [0 a1
11-27 12:37:12.259: D/AndroidRuntime(878): Shutting down VM
11-27 12:43:22.839: D/dalvikvm(939): newInstance failed: p0 i0 [0 a1
11-27 12:43:22.878: D/AndroidRuntime(939): Shutting down VM 
```

这是程序..

```
package com.raghuram.simplecalculator;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.Toast;

public abstract class CalculatorActivity extends Activity 
{

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_calculator);
        OnClickListener addlisten= new OnClickListener()
        {
            public void onClick(View v) 
                {
                    EditText tx1=(EditText) findViewById(R.id.editText1);
                    EditText tx2=(EditText) findViewById(R.id.editText2);
                    EditText tx3=(EditText) findViewById(R.id.editText3);
                    Float res=Float.parseFloat(tx1.getText().toString()) + Float.parseFloat(tx2.getText().toString());                  
                    tx3.setText(Float.toString(res));

                }
        };

        ImageButton a=(ImageButton) findViewById(R.id.imageButton1);
        a.setOnClickListener(addlisten);

        OnClickListener sublisten= new OnClickListener()
        {
            public void onClick(View v) 
                {
                    EditText tx1=(EditText) findViewById(R.id.editText1);
                    EditText tx2=(EditText) findViewById(R.id.editText2);
                    EditText tx3=(EditText) findViewById(R.id.editText3);                   
                    Float res1=Float.parseFloat(tx1.getText().toString()) - Float.parseFloat(tx2.getText().toString());                 
                    tx3.setText(Float.toString(res1));

                }
        };

        ImageButton s=(ImageButton) findViewById(R.id.imageButton2);
        s.setOnClickListener(sublisten);

        OnClickListener mullisten= new OnClickListener()
        {
            public void onClick(View v) 
                {
                    EditText tx1=(EditText) findViewById(R.id.editText1);
                    EditText tx2=(EditText) findViewById(R.id.editText2);
                    EditText tx3=(EditText) findViewById(R.id.editText3);                   
                    Float res1=Float.parseFloat(tx1.getText().toString()) * Float.parseFloat(tx2.getText().toString());                 
                    tx3.setText(Float.toString(res1));

                }
        };

        ImageButton m=(ImageButton) findViewById(R.id.imageButton3);
        m.setOnClickListener(mullisten);

        OnClickListener divlisten= new OnClickListener()
        {
            public void onClick(View v) 
                {
                    EditText tx1=(EditText) findViewById(R.id.editText1);
                    EditText tx2=(EditText) findViewById(R.id.editText2);
                    EditText tx3=(EditText) findViewById(R.id.editText3);
                    Float x=Float.parseFloat(tx2.getText().toString());

                        if(x>0)
                        {
                            Float res1=Float.parseFloat(tx1.getText().toString()) / Float.parseFloat(tx2.getText().toString());                 
                            tx3.setText(Float.toString(res1));
                        }
                        else
                        {

                            Context context = getApplicationContext();
                            CharSequence text = "Invalid number.";
                            int duration = Toast.LENGTH_SHORT;

                            Toast toast = Toast.makeText(context, text, duration);
                            toast.show();

                        }

                }

        };

        ImageButton d=(ImageButton) findViewById(R.id.imageButton4);
        d.setOnClickListener(divlisten);

        ImageButton e=(ImageButton) findViewById(R.id.imageButton5);        
        e.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v) 
            {

                System.exit(0);
            }

        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_calculator, menu);
        return true;
    }

} 
```

它昨天显示了确切的结果，但现在它强制关闭了..如何管理内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:01:21.983

删除`abstract`您的班级名称之前的。

`finish()`并且通过调用而不是真正停止您的活动`System.exit(0)`。

# ruby-on-rails - 根据表单选择验证一个表单域或另一个表单域，但不能同时验证两者

> ID：13579288
> 
> 赞同：0
> 
> 时间：2012-11-27T07:25:36.437
> 
> 标签：ruby-on-rails

如何在选择 PAYMENT_TYPE 检查时仅验证检查，并在选择 PAYMENT_TYPE 信用卡时仅验证信用卡？

```
 class Order < ActiveRecord::Base
    attr_accessible :check, :creditcard
    PAYMENT_TYPES = [ "Check", "Credit card" ]
    validates :creditcard, :presence => { :if => :creditcard? }
    validates :check, :presence => { :if => :check? }

     def creditcard?
     check == nil
     end

     def creditcard?
     creditcard == nil
     end
   end 
```

形式

```
 <%= form_for(@order) do |f| %> 
```

...

```
 <div class="field">
      <%= f.label :pay_type %><br />
      <%= f.select :pay_type, Order::PAYMENT_TYPES,
      prompt: 'Select a payment method' %>
    </div>
    <div id="creditcard">
      <%= f.label :creditcard, class: "creditcard" %><br />
      <%=  f.text_field :creditcard, class: "creditcard" %>
    </div>
    <div id="check">
      <%= f.label :check, class: "check" %><br />
      <%=  f.text_field :check, class: "check" %>
    </div> 
```

...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:58:31.733

见下文。你的检查应该是 on `pay_type`。

```
 class Order < ActiveRecord::Base
    attr_accessible :check, :creditcard, :pay_type
    PAYMENT_TYPES = [ "Check", "Credit card" ]
    validates :creditcard, :presence => true, :if => :creditcard_selected?
    validates :check, :presence => true, :if => :check_selected?

     def check_selected?
        pay_type == "CHECK"
     end

     def creditcard_selected?
        pay_type == "Credit Card"
     end
  end 
```

# file - 通过 F_SETFL 更改文件权限

> ID：13579289
> 
> 赞同：0
> 
> 时间：2012-11-27T07:25:39.193
> 
> 标签：file, unix

我最近开始学习unix，我正在尝试一些与文件相关的简单程序。我正在尝试使用函数 F_SETFL 通过代码更改文件的访问权限。我创建了只有写权限的文件，现在我正在尝试通过代码更新权限。但是所有的权限都被重置了。

```
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <sys/types.h>
#include <sys/stat.h>

int main(void) {

int fd =0;
int fileAttrib=0;

/*Create a new file*/

fd = creat("/u01/TempClass/apue/file/tempfile.txt",S_IWUSR);

fileAttrib = fcntl(fd,F_GETFL,0);
if(fileAttrib < 0 ) {
    perror("An error has occurred");
}

printf("file Attribute is %d \n",fileAttrib);

switch(fileAttrib) {

case O_RDONLY:
    printf("Read only attribute\n");
    break;
case O_WRONLY:
    printf("Write only attribute\n");
    break;
case O_RDWR:
    printf("Read Write Attribute\n");
    break;
default:
    printf("Somethng has gone wrong\n");
}

int accmode = 0;

//accmode = fileAttrib & O_ACCMODE;
accmode = 777;

fileAttrib = fcntl(fd,F_SETFL,accmode);
if(fileAttrib < 0 ) {
    perror("An error has occurred while setting the flags");
}

printf("file Attribute is %d \n",fileAttrib);

/*Print the new access permissions*/

switch(fileAttrib) {

case O_RDONLY:
    printf("New Read only attribute\n");
    break;
case O_WRONLY:
    printf("New Write only attribute\n");
    break;
case O_RDWR:
    printf("New Read Write Attribute\n");
    break;
default:
    printf("New Somethng has gone wrong\n");
}

exit(0);
} 
```

这是我的输出

文件属性为 1

只写属性

文件属性为 0

新的只读属性

有人可以告诉我设置更新标志的正确方法吗？我参考了文档，但仍然不太清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:19:17.430

您应该使用 chmod 或 fchmod 来更改文件的许可。chmod 与 argu 文件的路径和 fchmod 与 fd。

fcntl 的标志 F_SETFL 只能设置 O_APPEND、O_ASYNC、O_DIRECT、O_NOATIME 和 O_NONBLOCK 标志。

F_SETFL (long) 将文件状态标志设置为 arg 指定的值。arg 中的文件访问模式（O_RDONLY、O_WRONLY、O_RDWR）和文件创建标志（即 O_CREAT、O_EXCL、O_NOCTTY、O_TRUNC）被忽略。在 Linux 上，此命令只能更改 O_APPEND、O_ASYNC、O_DIRECT、O_NOATIME 和 O_NONBLOCK 标志。

# r - 如何在多级层次结构中使用“hts”？

> ID：13579292
> 
> 赞同：6
> 
> 时间：2012-11-27T07:25:55.030
> 
> 标签：r, hierarchy, time-series, forecasting

我正在预测大量时间序列（5,000+）。如果我在更高级别进行预测，然后将预测分配到每个 SKU，我想使用分层方法来做到这一点。我认为有必要这样做以便放大较低的地理细节级别，同时在更高级别（自上而下）上进行预测。

例如，您可以在下面看到我正在考虑的结构示例。

```
Total
  => Europe
     => Netherlands
        => RegionA
           => Client_A_in_Netherlands
              => SKU1
              => SKU2
              => SKU3
           => Client_Q_in_Netherlands
              => SKU15
     => Germany1
        => (...)
           => ClientY_in_Germany
              => SKU89
  => Africa
     => South Africa
        => (...)
           => Client_Z_in_SouthAfrica
              => SKU792 
```

我想在大陆级别（即欧洲或非洲）级别进行自上而下的预测。然后将适当的份额分配给各个国家/地区，然后分配给该国家/地区的客户，然后分配给 SKU。

在“hts”包的文档中，有一个关于如何使用两级层次结构执行此操作的示例。我想知道是否有人可以建议如何使用多级层次结构来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-09T13:02:32.887

`nodes`我们在包 (v4+) 中引入了一个新概念`hts`来替换旧的`gmatrix`. 为了说明 的用法`nodes`，这是一个具有 4 个级别（不包括总数）和 24 个底部时间序列的层次结构示例。

```
bts <- ts(matrix(rnorm(240), nrow = 10, ncol = 24)) 
nodes <- list(2, rep(2, 2), rep(2, 4), rep(3, 8))
hts(bts, nodes = nodes) 
```

的每个元素`nodes`指定每个节点在该级别具有的子节点数。

树形图如下所示：

```
=> A
  => AA
    => AAA
      => 3 bottom time series
    => AAB
      => 3 bottom time series
  => AB
    => ABA
      => 3 bottom time series
    => ABB
      => 3 bottom time series
=> B
  => BA
    => BAA
      => 3 bottom time series
    => BAB
      => 3 bottom time series
  => BB
    => BBA
      => 3 bottom time series
    => BBB
      => 3 bottom time series 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T08:13:51.990

文档有点简洁，但您可以在定义时使用多级层次结构`hts`

[在 'hts' 包的参考手册的 pdf 文件链接中](http://cran.r-project.org/web/packages/hts/hts.pdf)，您将找到该论文的参考。具体来说，在 pdf 的第 7 页上，其中引用了*htseg1*：

R. J Hyndman、RA Ahmed、G. Athanasopoulos 和 HL Shang (2011) 分层时间序列的最优组合预测。*计算统计和数据分析*，**55（9），2579–2589**。 [http://robjhyndman.com/papers/hierarchical/](http://robjhyndman.com/papers/hierarchical/)

该链接（作为工作文件的免费在线版本）具有 3 个级别的示例，这与您的大陆|国家|客户示例非常相似。 [http://robjhyndman.com/papers/Hierarchical6.pdf](http://robjhyndman.com/papers/Hierarchical6.pdf)（参见第 14 页第 6 节，标题为数值模拟）

希望有帮助。

# android - AnimationSet setInterpolator() 在使用 Nineoldandroids 库时无法正常工作

> ID：13579296
> 
> 赞同：7
> 
> 时间：2012-11-27T07:26:10.413
> 
> 标签：android, animation, interpolation

我正在使用 Jake Wharton 的 Nineoldandroids 库来实现与预 Honeycomb 设备兼容的动画。库： http: [//nineoldandroids.com/](http://nineoldandroids.com/)

出于某种原因，设置 AnimationSet 插值器似乎不起作用。我用谷歌搜索了它，我没有找到任何关于将 setInterpolator() 与 Nineoldandroids 一起使用的参考（没有任何确认或否认 setInterpolator() 支持）

有谁知道它是否支持？如果是，是否有某种方法我应该使用它来使其工作？

代码示例：

```
AnimatorSet set = new AnimatorSet();
set.setInterpolator(new BounceInterpolator());

set.playTogether(
        ObjectAnimator.ofFloat(view, "translationX", 100f)
);

set.setDuration(1000).start(); 
```

我设置什么插值器并不重要，它总是使用 AccelerateDecelerateInterpolator

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-12T01:48:00.967

迟到了，但我遇到了同样的问题。

`setInterpolator()`您必须在添加动画（之后或类似）后调用`playTogether()`，因为它只会将插值器应用于 AnimationSet 中的动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T15:19:09.160

也许有点晚了，但我尝试在每个 ObjectAnimator 上设置插值器并且它起作用了。当我尝试在 AnimatorSet 上设置它时，它没有。

# apache - 使用 apache 浏览到 IP/WebApp

> ID：13579298
> 
> 赞同：0
> 
> 时间：2012-11-27T07:26:14.323
> 
> 标签：apache, suse

我有当前的设置

1.  OpenSuSE 12.1
2.  阿帕奇 2.2

请注意，我根本不是网络开发人员或网络管理员。

我已经安装了 redmine 来测试并让一切正常运行。

我可以使用 xxxx:3000 在本地机器和网络上浏览 redmine

1.  listen.conf - 添加了 Listen 3000
2.  httpd.conf - DocumentRoot /srv/www/htdocs/redmine/public> 命令允许，拒绝 全部允许 AllowOverride all
3.  在防火墙上打开了 3000 端口。

我真正想做的是通过以下方式访问 redmine：

xxxx/redmine

我已尝试阅读此内容，但我对 apache 的技能水平还没有达到标准。

我可以为此阅读任何指示、想法或清晰的文件吗？

亲切的问候，

尼尔

更新 1

对于任何可能遇到这篇文章的人，我得到了它的工作。

先说一些信息

1.  rails -v - Rails 3.2.8
2.  ruby -v - ruby​​ 1.8.7 (2011-12-28 补丁级别 357) [i586-linux]
3.  redmine 安装在 /webapps/redmine

然后，

1.  添加符号链接：

    ln -s /webapps/redmine/public/ /srv/www/redmine

2.  /etc/apache2/httpd.conf

`<VirtualHost *>`

```
ServerName serverName
DocumentRoot "/srv/www/"
Alias /redmine "/webapps/redmine/public"
ErrorLog /webapps/redmine/errorlog.log"
RailsEnv production
<Directory "/webapps/redmine/public">
    Order allow,deny
    Allow from all
    AllowOverride all
    Options Indexes FollowSymLinks +ExecCGI
</Directory>
RailsBaseURI /redmine 
```

`</VirtualHost>`

1.  /webapps/redmine/公共：

    cp dispatch.fcgi.example dispatch.cgi

2.  哪个红宝石 - /usr/bin/ruby

3.  /webapps/redmine/public/dispatch.cgi

    从哪个命令的结果编辑第一行到目录

这就是我为使其正常工作所做的工作，因此希望它可以帮助其他人。

问候

尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T07:41:53.920

对于任何可能遇到这篇文章的人，我得到了它的工作。

先说一些信息

```
rails -v - Rails 3.2.8
ruby -v - ruby 1.8.7 (2011-12-28 patchlevel 357) [i586-linux]
redmine is installed at /webapps/redmine 
```

然后，

```
Add a symbolic link:

ln -s /webapps/redmine/public/ /srv/www/redmine
/etc/apache2/httpd.conf 
```

ServerName serverName DocumentRoot "/srv/www/" Alias /redmine "/webapps/redmine/public" ErrorLog /webapps/redmine/errorlog.log" RailsEnv 生产 Order allow,deny Allow from all AllowOverride all Options Indexes FollowSymLinks +ExecCGI RailsBaseURI /redmine

```
/webapps/redmine/public:

cp dispatch.fcgi.example dispatch.cgi

which ruby - /usr/bin/ruby

/webapps/redmine/public/dispatch.cgi

Edit First line to directory from result of which command 
```

这就是我为使其正常工作所做的工作，因此希望它可以帮助其他人。

问候

尼尔

# java - 列出目录中的所有子目录和文件

> ID：13579300
> 
> 赞同：-2
> 
> 时间：2012-11-27T07:26:20.430
> 
> 标签：java, file, list, directory

我知道这是一个重复的问题：[列出 Java 中目录和子目录中的所有文件，](https://stackoverflow.com/questions/3008043/list-all-files-from-directories-and-subdirectories-in-java)但我在显示目录的子目录时遇到问题。我已经有一个文件夹类：

```
class Folder
{
bool isFile;
String folderName;
list<Folder> subFolders;
} 
```

现在使用这个类，我需要显示指定文件夹中的子目录和文件的列表......

我尝试使用此代码：

```
class FCheck
{
public static void main(String args[])
{
Folder obj=new Folder();
obj.folderName="C:\hello";
if(obj.folderName.isDirectory())
{

} 
```

我应该在 if 条件循环中做什么？我需要使用`<list> folder subfolders`数据！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:42:03.980

```
public class ListFoldersAndFiles {
    public static void main(String[] args)
    {
        ListFoldersAndFiles obj1= new ListFoldersAndFiles();
        obj1.go();
    }

    public void go()
    {
        File [] fileNames;
        File file=new File("c:/test");
        if(file.isDirectory()){
            fileNames= file.listFiles();
            for(File temp:fileNames){
                System.out.println(temp.getName());
            }
        }
    }
} 
```

# java - 为什么不推荐使用 buildSessionFactory()？

> ID：13579301
> 
> 赞同：9
> 
> 时间：2012-11-27T07:26:26.310
> 
> 标签：java, hibernate

为什么被`buildSessionFactory()`替换`buildSessionFactory(ServiceRegistry)`？ServiceRegistry的重要性是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T20:21:22.643

原因在 Hibernate 的 Jira 上有解释

[https://hibernate.onjira.com/browse/HHH-2578](https://hibernate.onjira.com/browse/HHH-2578)

> 目前，SessionFactory 是通过将一堆东西扔到 Configuration 对象中，搅拌它，让它沸腾，然后取出 SessionFactory 来构建的。严肃地说，我们目前在配置中的操作方式以及我们如何使用它来构建 SessionFactory 存在一些问题： 没有“生命周期”来确定何时各种信息可用的普遍问题。这在许多方面是一个重要的遗漏：1）考虑模式生成。目前，在确定大量 db 对象名称时，我们甚至不知道方言。这会很好，因为它可以让我们透明地处理表/列名，例如，它们也是方言中的关键字/保留词。2) 类型的静态性和类型映射。因为我们目前没有任何东西可以确定它们的范围。理想情况下，类型实例会知道它绑定到的 SessionFactory。相反，我们现在要做的是在相当多的时间更改 API 方法，以便在发现需要时将 SessionFactory 作为传递参数添加。3）此外，Hibernate 中的大多数（全部？）“静态”配置参数目前都需要这样做，因为它们在这些静态类型中使用；因此，范围类型将允许我们对这些配置参数（如字节码提供者、二进制流的使用等）进行范围界定。理想情况下，我看到的情况是用户自己构建 org.hibernate.cfg.Settings（或类似的东西）实例的方案。此外，他们会将元数据应用于某种注册表（现在我们称之为 MetadataRegistry）。然后为了构建 SessionFactory，他们将提供这两条信息（通过 ctor？通过 builder？）。重要的方面是 MetadataRegistry 中的信息直到那个时间点才会被处理，这将允许我们保证解析模式对象名称、类型等可以访问运行时设置（特别是方言）

您还可以阅读对此的评论：[https](https://hibernate.onjira.com/browse/HHH-7580) : //hibernate.onjira.com/browse/HHH-7580 复制粘贴太多了，我猜 Jira 不会失败，所以这个答案应该是有效的。

# matlab - 在 Matlab 中使用 xlsread 命令出错

> ID：13579306
> 
> 赞同：2
> 
> 时间：2012-11-27T07:26:59.397
> 
> 标签：matlab

我在我的matlab程序中写过：

```
EnergyfromSun = xlsread('C:\Homa\Thesis\Matlab\SC\ASTMG173num.xls'); 
```

但我收到了这条消息：

```
??? No appropriate method, property, or field UsedRange for class
Interface.Microsoft_Excel_14.0_Object_Library._Chart.

Error in ==> xlsread at 302
        DataRange = Excel.ActiveSheet.UsedRange;

Error in ==> T2011 at 10
EnergyfromSun = xlsread('C:\Homa\Thesis\Matlab\SC\ASTMG173num.xls');

>> 
```

这个excel表有2列和2002行，我使用的是matlab 7.11.0版本请帮助我，我太困惑了。谢谢霍玛

>

> 我做到了，但我得到了同样的按摩：

```
??? No appropriate method, property, or field UsedRange for class
Interface.Microsoft_Excel_14.0_Object_Library._Chart.

Error in ==> xlsread at 302
        DataRange = Excel.ActiveSheet.UsedRange;

Error in ==> T2011 at 10
[~,~,EnergyfromSun] = xlsread('C:\Homa\Thesis\Matlab\SC\ASTMG173num.xls');

>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:51:41.110

1- 我打开 MS-EXCEL 并制作了一个包含 2002 行的两列 2- 在桌面上将其保存为 Book1.xls 3- f = xlsread('Book1.xls'); 4- 数据在 f

我的 MATLAB 是 2012a 和 MS-EXCEL 2007。可能与您的地址（您的 excel 文件的路径）或您保存 xls 文件的格式有关。你能测试一个简单的xls文件吗，格式正常，放在桌面上

并注意这一点：它对我很有效：在带有 Microsoft Excel 软件的 Windows 系统上，xlsread 读取您的 Excel 版本识别的任何文件格式。如果您的系统没有 Excel for Windows，xlsread 以基本导入模式运行，并且仅读取 XLS、XLSX、XLSM、XLTX 和 XLTM 文件。

# android - Android 应用内计费：保护购买令牌

> ID：13579309
> 
> 赞同：2
> 
> 时间：2012-11-27T07:27:03.830
> 
> 标签：android, security, in-app-purchase, in-app-billing, subscription

我正在我的 android 应用程序中实现订阅。假设我的服务名称是 FOO。人们使用 FOO 用户名登录 FOO，他们可以订阅一些高级 FOO 服务。

[`purchaseToken`](http://developer.android.com/guide/google/play/billing/billing_subscriptions.html#implementing)我从 Google Play 获得的信息是我存储在本地数据库中的一个重要元素，并通过 HTTPS 连接将其发送到我的远程服务器。我的远程服务器将调用[get API](https://developers.google.com/android-publisher/v1/purchases/get)来验证购买的收据，并根据结果为该 FOO 用户名激活一组高级服务。

现在我的问题是，如果用户试图破解并`purchaseToken`从 DB 获取或通过嗅探数据包，他可以验证它是否为不同的 FOO 用户名。不是吗？我怎样才能确保它始终是安全的？

我可以想到几个选项，但我不确定哪一个是最好、最安全和万无一失的。

首先，在存储时进行混淆/加密。它仍然只是可再生能源。稍加努力，它就可以破解了。

其次，确保它们`purchaseTokens`在服务器端是唯一的。尽管对我来说似乎没问题，但我有点偏执，我不确定这是否会导致其他问题。

你怎么看？

# oracle - 选择 pkg_name.function_name

> ID：13579312
> 
> 赞同：0
> 
> 时间：2012-11-27T07:27:14.393
> 
> 标签：oracle, plsql

这个查询有效吗？如果包（具有正确的定义和主体）和功能存在并且工作正常。

```
Select "JK" As Name, 
       pckg_name1.function_name1(number1,number2) 
from dual 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:55:47.513

函数调用很好（假设函数返回 SQL 数据类型 - 您不能使用 PL/SQL 特定的数据类型，例如布尔值），但是您对**JK**的引用是错误的。您必须使用单引号而不是双引号：

```
Select 'JK' As Name, 
       pckg_name1.function_name1(number1,number2) 
from dual 
```

# crystal-reports - 如何使用水晶报表用户定义的页面大小？

> ID：13579315
> 
> 赞同：0
> 
> 时间：2012-11-27T07:27:33.453
> 
> 标签：crystal-reports

我用

并设置 .rpt 的页面设置 - 我检查了无打印机选项和分离格式化页面大小 - 我在下拉列表中选择了用户定义的大小 - 我以像素为单位设置单位（水平：1200px，垂直：816px）

但是报表查看器仍然显示字母大小，并且未显示剩余的列...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:23:00.480

有趣的问题！

我建议通过 javascript 强制页面中元素的宽度。

像这样的脚本应该可以工作（元素的名称可能会改变，检查你的 HTML），

```
//execute when page is displayed on screen
$(document).ready(function () {

    $("#CrystalReportViewer1_toptoolbar").css("width", 1200); 
    $("#CrystalReportViewer1__UI").css("width",1200));
} 
```

不要忘记添加 jquery

```
<asp:ScriptManager  ID="ScriptManager1" EnableScriptGlobalization="true" EnableScriptLocalization="true" runat="server" AllowCustomErrorsRedirect="true">
  <Scripts>
    <asp:ScriptReference Path="~/Scripts/jquery.js" ScriptMode="Auto" />
  </Scripts>
 </asp:ScriptManager> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:48:11.593

您可以在水晶报表上使用[交叉表](http://www.urbainczyk.de/juri/crosstabs_in_crystal_reports.pdf)，以便页面宽度会根据列数自动调整。

# ios - 在 iPad 上的特定位置创建弹出框

> ID：13579317
> 
> 赞同：-1
> 
> 时间：2012-11-27T07:27:36.403
> 
> 标签：ios, uipopovercontroller

让我先说我在 iOS 开发方面完全是个菜鸟，并决定直接潜入学习

我已经使用 Master-Detail 视图应用程序模板启动了我的应用程序，并且在 DetailView 中有一个 UIWebView。

我希望在任意位置显示一个弹出框以响应[此类](https://stackoverflow.com/a/6627366/2592)事件，但是我在执行此操作时遇到了麻烦。我用谷歌搜索的所有内容要么将弹出窗口附加到按钮上，要么不使用情节提要。

我希望得到一些关于如何解决这个问题的指导

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:34:17.427

使用下面的代码并将 CGRectMake(0, 0, 100, 100) 更改为您喜欢的任何位置。

```
FirstViewController *firstViewController = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
UINavigationController *modalNavigationController = [[UINavigationController alloc] initWithRootViewController:firstViewController];
UIPopoverController *popoverControllerTemp = [[UIPopoverController alloc] initWithContentViewController:modalNavigationController];
self.popoverController = popoverControllerTemp;
[self.popoverController presentPopoverFromRect:CGRectMake(0, 0, 100, 100) inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:32:34.927

如果你不介意使用开源项目，你可以使用[这个](http://www.cocoacontrols.com/controls/fwtpopover?utm_source=Cocoa%20Controls&utm_campaign=366a400187-Cocoa_Controls_Weekly_Roundup_2012_09_26&utm_medium=email).

# jquery - jQuery 验证。将 javascript 逻辑 (OR) 应用于自定义规则

> ID：13579320
> 
> 赞同：0
> 
> 时间：2012-11-27T07:27:56.730
> 
> 标签：jquery, jquery-validate

我为 jQuery Validation 编写了以下简单规则：

```
 jQuery.validator.addMethod("notEqual", function(value, element, param) 
        {
          return this.optional(element) || value != param;
        }, "This field is required"); 
```

这样我可以说：

```
 $("#form").validate({
                rules: 
                {
                    field1: {notEqual: "Please Select", required: true},
                    field2: {notEqual: "Year", required: true}
                },
                messages: 
                {
                    field1: {
                            notEqual: "This field is required", 
                            required: "This field is required"
                            }
                    field2: {
                            notEqual: "This field is required", 
                            required: "This field is required"
                            }
                },

                submitHandler: function(form) {
                form.submit();
            }
        }); 
```

但是我想说任何一个字段都不允许等于多个事物，例如

```
field1: {notEqual: "Please Select" || "Year" || "Some Value", required: true}, 
```

但是我已经尝试过这种语法以及其他一些排列“ÖR”运算符的方法，但它们都不起作用。任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:15:15.643

您可以将 JavaScript 数组作为参数传递给验证方法，如对[jQuery Validation 插件自定义方法的回答中所述。多个参数](https://stackoverflow.com/questions/1366858/jquery-validation-plugin-custom-method-multiple-parameters)

例如

```
field1: {notEqual: ["Please Select", "Year", "Some Value"], required: true}, 
```

然后让你的自定义方法像这样

```
 jQuery.validator.addMethod("notEqual", function(value, element, param) 
 {
  var result = value != param[0] && value != param[1] && value != param[2]; 
  return this.optional(element) || result;
 }, "This field is required"); 
```

# winforms - 避免淡入效果

> ID：13579322
> 
> 赞同：0
> 
> 时间：2012-11-27T07:28:11.803
> 
> 标签：winforms, fade, effects

在 Vista 及更高版本中，默认情况下 WinForm 淡入：当我显示它时，它不是“Bamm，这里是”，但默认情况下它有一个温和的淡入。如何避免/关闭每个窗口的淡入效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:25:18.797

您是否尝试`Opacity=1`在构造函数中设置？这只是一个想法，我没有尝试过

# c - 如何使用 C 调用 Web 服务？

> ID：13579325
> 
> 赞同：1
> 
> 时间：2012-11-27T07:28:18.803
> 
> 标签：c, axis2, axis, axis2c

我下载了 Axis c++ 并创建了一个 C 存根。现在我必须调用网络服务。如何调用网络服务？我应该使用哪种方法？Axis C++ 是否为此提供任何示例代码？这里有没有人更早地实现过它，或者你能用一些代码片段指导进一步进行吗？

# java - Android 和 .Net 中的 AES 128 加密，带有自定义密钥和 IV

> ID：13579326
> 
> 赞同：3
> 
> 时间：2012-11-27T07:28:19.697
> 
> 标签：java, android, asp.net, aes

我的`android`应用程序中有一个密码字符串。我需要使用网络服务通过`.net`网络服务（即以 结尾`.aspx`）发送密码`SOAP`。在发送密码之前，我需要`AES 128`使用自定义密钥和 IV 加密密码。

他们在 .net 中有一个带有自定义密钥和 Iv 的加密/解密工具。该工具要求一个 16 位和 IV 8 位的自定义密钥。如果给出字符串，它会生成加密字符串。例子

例子：

```
Key : 1234567812345678
IV : 12345678
String : android
Encrypted string : oZu5E7GgZ83Z3yoK4y8Utg== 
```

我不知道如何在android中做到这一点。需要帮忙。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T09:53:23.837

一个完整的例子可以帮助你：

加密/解密函数，使用 IV

```
public static byte[] encrypt(byte[] data, byte[] key, byte[] ivs) {
    try {
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        SecretKeySpec secretKeySpec = new SecretKeySpec(key, "AES");
        byte[] finalIvs = new byte[16];
        int len = ivs.length > 16 ? 16 : ivs.length;
        System.arraycopy(ivs, 0, finalIvs, 0, len);
        IvParameterSpec ivps = new IvParameterSpec(finalIvs);
        cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, ivps);
        return cipher.doFinal(data);
    } catch (Exception e) {
        e.printStackTrace();
    }

    return null;
}

public static byte[] decrypt(byte[] data, byte[] key, byte[] ivs) {
    try {
        Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        SecretKeySpec secretKeySpec = new SecretKeySpec(key, "AES");
        byte[] finalIvs = new byte[16];
        int len = ivs.length > 16 ? 16 : ivs.length;
        System.arraycopy(ivs, 0, finalIvs, 0, len);
        IvParameterSpec ivps = new IvParameterSpec(finalIvs);
        cipher.init(Cipher.DECRYPT_MODE, secretKeySpec, ivps);
        return cipher.doFinal(data);
    } catch (Exception e) {
        e.printStackTrace();
    }

    return null;
} 
```

您可以按如下方式使用它：

```
 String dataToEncryptDecrypt = "android";
    String encryptionDecryptionKey = "1234567812345678";
    String ivs = "12345678";

    byte[] encryptedData = encrypt(dataToEncryptDecrypt.getBytes(), encryptionDecryptionKey.getBytes(),
            ivs.getBytes());
    // here you will get the encrypted bytes. Now you can use Base64 encoding on these bytes, before sending to your web-service

    byte[] decryptedData = decrypt(encryptedData, encryptionDecryptionKey.getBytes(), ivs.getBytes());
    System.out.println(new String(decryptedData)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T08:58:14.377

我不知道AES算法在使用中的细节（即模式和填充方法），大致应该是这样的：

```
public static byte[] encrypt(byte[] data, byte[] key) {
try {
    Cipher cipher = Cipher.getInstance("AES/CBC/ZeroBytePadding");
    SecretKeySpec secretKeySpec = new SecretKeySpec(key, "AES");
    byte[] empty = new byte[16]; // For better security you should use a random 16 byte key!!!
    IvParameterSpec ivps = new IvParameterSpec(empty);
    cipher.init(Cipher.ENCRYPT_MODE, secretKeySpec, ivps);
    return cipher.doFinal(data);
} catch (Exception e) {
    // ...
}

return null;
} 
```

上面的函数可以这样使用：

```
String data = "android";
String key = "1234567812345678";
byte encrypted  = encrypt(data.getbytes("UTF-8"), key.getbytes("UTF-8")); 
```

# linux - 在调用 cron 作业时获取用户名

> ID：13579337
> 
> 赞同：3
> 
> 时间：2012-11-27T07:29:08.553
> 
> 标签：linux, ubuntu, cron, crontab

作为 root，我可以添加用户特定的 cron 作业`crontab -u user1 -e`。在那里我可以提到一个 shell 脚本说`runbackup.sh`要被执行。

由于`runbackup.sh`脚本用于许多用户，因此脚本需要知道用户名（此处`user1`）才能执行一些特定于用户的操作。

当 cron 作业调用 runbackup.sh 时，它如何获取用户名？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T07:51:52.140

在你的脚本 runbackup.sh 中使用“whoami”将显示谁在执行 shell。

每个用户的 cron 作业都会启动一个 shell 进程。所以每个 whoami 都会显示正在运行的用户的名字。

请注意：所有用户都有权访问 runbackup.sh 中提到的文件。

# xmpp - Dart 有 XMPP api 吗？

> ID：13579344
> 
> 赞同：1
> 
> 时间：2012-11-27T07:29:32.673
> 
> 标签：xmpp, dart, facebook-chat

我正在使用 DART 实现 facebook 聊天客户端。据我所知，我需要使用 XMPP 协议。

飞镖有 XMPP api 吗？

*   如果是的话，你能引导我找到来源吗？
*   如果没有，是否有任何好的（对于协议完全陌生的）源，以便我可以实现一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:30:00.117

我不知道 Dart 中的任何内容，尤其是因为它是一种新语言，但XMPP 页面上有一个[库列表。](http://xmpp.org/xmpp-software/libraries/)也许你能找到一个你喜欢的？

这个问题指出了 Javascript 中的一些好的库：[XMPP library for facebook chat](https://stackoverflow.com/questions/3598900/xmpp-library-for-facebook-chat)

有关协议规范，请参见[此处](http://xmpp.org/xmpp-protocols/)。即使你找到了一个好的库来转换，你可能还是想看看规范以真正理解它是如何工作的。

# javascript - 如何在 Express/Node.js 中将内联 javascript 与动态生成的内容分开？

> ID：13579349
> 
> 赞同：6
> 
> 时间：2012-11-27T07:30:13.723
> 
> 标签：javascript, node.js, refactoring, express, pug

对于有几年 Web 开发经验的人来说，这是一个有点菜鸟的问题，但是在*Programmer Stack Exchange*或*Google*都没有找到答案后，我决定在这里问它。

我正在为*Node.js使用***Express** Web 框架，但这个问题并不特定于任何 Web 框架或编程语言。

 *这是从数据库中查询的游戏列表。每个游戏实体都是一个表行，使用*for 循环*生成：

```
 table.table
      tbody
        for game in games
          tr
            td.span2
              img.img-polaroid(src='/img/games/#{game.largeImage}')   
              // continues further 
```

![在此处输入图像描述](../Images/e2aa2041f6e1d724475033db6d999891.png)

每个**Rating**块，以及每个**Buy**按钮/模态对话框都是由 for 循环生成的，其 id 与游戏匹配。例如，刺客信条的**购买按钮将具有***id="price-assassins-creed"*。**#{variable}** - 是您在 Jade 中引用从服务器传入的变量的方式。

```
button.btn.btn-primary.btn-mini(id='price-#{game.slug}', href='#buyModal', role='button', data-toggle='modal') 
```

和

```
.modal.hide.fade(id='modal-#{game.slug}', tabindex='-1', role='dialog', aria-labelledby='myModalLabel', aria-hidden='true')
            .modal-header
              span.lead Game Checkout
                img.pull-right(src='/img/new_visa_medium.gif')
            .modal-body
              label
                i.icon-user
                |  Name on Card
              input.input-medium(type='text')
              label
                i.icon-barcode
                |  Card Number
              input.input-medium(type='text', placeholder='•••• •••• •••• ••••', maxlength=16)

              label
                i.icon-time
                |  Expiration Date
              input.input-mini(type='text', placeholder='MMYY', maxlength=4)
              label
                i.icon-qrcode
                |  Card Code
              input.input-mini(type='text', placeholder='CVC', maxlength=4)
            .modal-footer
              button.btn(data-dismiss='modal', aria-hidden='true') Cancel
              button.btn.btn-primary(id='#{game.slug}') Buy 
```

和

```
script(type='text/javascript')
  $('#_#{game.slug}').raty({
    path: '/img',
    round : { down: .25, full: .6, up: .76 },
    score: #{game.rating}/#{game.votes},
    readOnly: true
  }); 
```

将其乘以游戏数量，这就是我在一页上有多少内联脚本。

更糟糕的是，我必须考虑以下情况：

*   *用户未登录*：以只读模式显示以上评分脚本。
*   *用户已登录，但尚未投票*：

...在这种情况下，请使用以下脚本：

```
script(type='text/javascript')
                    $('#_#{game.slug}').raty({
                      path: '/img',
                      round : { down: .25, full: .6, up: .76 },
                      score: #{game.rating}/#{game.votes},
                      readOnly: false,
                      click: function (score, event) {
                        var self = this;
                        $.meow({
                          message: 'Thanks for voting. Your rating has been recorded.',
                          icon: 'http://png-3.findicons.com/files/icons/1577/danish_royalty_free/32/smiley.png'
                        });
                        $.ajax({
                          type: 'POST',
                          url: '/games/rating',
                          data: {
                            slug: $(self).attr('id').slice(1),
                            rating: score
                          },
                          success: function () {
                            console.log('setting to read-only');
                            $(self).raty('readOnly', true);
                          }
                        });
                      }
                    }); 
```

*   *用户已登录但未评级：复制并粘贴此特定**if-else*条件的另一个只读脚本。

长话短说，试图在我的**.jade**模板文件中维护所有这些 JavaScript 已成为维护的噩梦，而且我的标记看起来脏得令人无法接受。

有什么解决方案？这似乎是 CRUD 应用程序的常见场景。理想情况下，我想将所有 javascript 移动到单独的**.js**文件中。但是，如果我可以删除一些重复的代码，那也很棒。

问题是如果我将内联 javascript 移动到单独的文件中，我怎么知道我在评价哪个游戏？我如何知道用户点击了哪个购买按钮？

现在没有歧义，因为对于**N**个游戏，我有 N 个购买按钮、**N**个模态对话框和**N**个评分脚本。不管任何人如何看待这种编程风格，它都是一种糟糕的代码维护方式。

请与菜鸟分享一些见解！

先感谢您。

这是我的 games.jade 文件的完整代码片段：

```
extends layout

block content
  br
  ul.nav.nav-pills
    if heading === 'Top 25'
      li.active
        a(href='/games') Top 25
    else
      li
        a(href='/games') Top 25

    if heading === 'Action'
      li.active
        a(href='/games/genre/action') Action
    else
      li
        a(href='/games/genre/action') Action

    if heading === 'Adventure'
      li.active
        a(href='/games/genre/adventure') Adventure
    else
      li
        a(href='/games/genre/adventure') Adventure

    if heading === 'Driving'
      li.active
        a(href='/games/genre/driving') Driving
    else
      li
        a(href='/games/genre/driving') Driving

    if heading === 'Puzzle'
      li.active
        a(href='/games/genre/puzzle') Puzzle
    else
      li
        a(href='/games/genre/puzzle') Puzzle

    if heading === 'Role-Playing'
      li.active
        a(href='/games/genre/role-playing') Role-Playing
    else
      li
        a(href='/games/genre/role-playing') Role-Playing

    if heading === 'Simulation'
      li.active
        a(href='/games/genre/simulation') Simulation
    else
      li
        a(href='/games/genre/simulation') Simulation

    if heading === 'Strategy'
      li.active
        a(href='/games/genre/strategy') Strategy
    else
      li
        a(href='/games/genre/strategy') Strategy

    if heading === 'Sports'
      li.active
        a(href='/games/genre/sports') Sports
    else
      li
        a(href='/games/genre/sports') Sports

  if games.length == 0
    .alert.alert-warning
      | Database query returned no results.
  else
    table.table
      tbody
        for game in games
          .modal.hide.fade(id='modal-#{game.slug}', tabindex='-1', role='dialog', aria-labelledby='myModalLabel', aria-hidden='true')
            .modal-header
              span.lead Game Checkout
                img.pull-right(src='/img/new_visa_medium.gif')
            .modal-body
              label
                i.icon-user
                |  Name on Card
              input.input-medium(type='text')
              label
                i.icon-barcode
                |  Card Number
              input.input-medium(type='text', placeholder='•••• •••• •••• ••••', maxlength=16)

              label
                i.icon-time
                |  Expiration Date
              input.input-mini(type='text', placeholder='MMYY', maxlength=4)
              label
                i.icon-qrcode
                |  Card Code
              input.input-mini(type='text', placeholder='CVC', maxlength=4)
            .modal-footer
              button.btn(data-dismiss='modal', aria-hidden='true') Cancel
              button.btn.btn-primary(id='#{game.slug}') Buy
          tr
            td.span2
              img.img-polaroid(src='/img/games/#{game.largeImage}')
            td
              a(href='/games/#{game.slug}')
                strong
                  = game.title
              | &nbsp;

              if user.userName
                button.btn.btn-primary.btn-mini(id='price-#{game.slug}', href='#modal-#{game.slug}', role='button', data-toggle='modal')
                  i.icon-shopping-cart.icon-white
                  =  game.price
                if user.purchasedGames && user.purchasedGames.length > 0
                  for mygame in user.purchasedGames
                    if mygame.game.slug == game.slug
                      script(type='text/javascript')
                        $('#price-#{game.slug}').removeAttr('href');
                        $('#price-#{game.slug}').html('<i class="icon-shopping-cart icon-white"></i> Purchased');

              div
                span(id='_' + game.slug)
                span(id='votes', name='votes')
                |  (#{game.votes} votes)
              div
                small.muted
                  div #{game.releaseDate} | #{game.publisher}
                  div #{game.genre}
              p
                =game.description

          // logged-in users
          if user.userName
            if game.votedPeople.length > 0
              for voter in game.votedPeople
                if voter == user.userName || user.suspendedRating
                  script(type='text/javascript')
                    $('#_#{game.slug}').raty({
                      path: '/img',
                      round : { down: .25, full: .6, up: .76 },
                      score: #{game.rating}/#{game.votes},
                      readOnly: true
                    });
                else
                  script(type='text/javascript')
                    $('#_#{game.slug}').raty({
                      path: '/img',
                      round : { down: .25, full: .6, up: .76 },
                      score: #{game.rating}/#{game.votes},
                      readOnly: false,
                      click: function (score, event) {
                        var self = this;
                        $.meow({
                          message: 'Thanks for voting. Your rating has been recorded.',
                          icon: 'http://png-3.findicons.com/files/icons/1577/danish_royalty_free/32/smiley.png'
                        });
                        $.ajax({
                          type: 'POST',
                          url: '/games/rating',
                          data: {
                            slug: $(self).attr('id').slice(1),
                            rating: score
                          },
                          success: function () {
                            console.log('setting to read-only');
                            $(self).raty('readOnly', true);
                          }
                        });
                      }
                    });
            else
              if (user.suspendedRating)
                script(type='text/javascript')
                  $('#_#{game.slug}').raty({
                    path: '/img',
                    round : { down: .25, full: .6, up: .76 },
                    score: #{game.rating}/#{game.votes},
                    readOnly: true
                  });
              else
                script(type='text/javascript')
                  $('#_#{game.slug}').raty({
                        path: '/img/',
                        round : { down: .25, full: .6, up: .76 },
                        score: #{game.rating}/#{game.votes},
                        readOnly: false,
                        click: function (score, event) {
                          var self = this;
                          $.meow({
                            message: 'Thanks for voting. Your rating has been recorded.',
                            icon: 'http://png-3.findicons.com/files/icons/1577/danish_royalty_free/32/smiley.png'
                          });
                          $.ajax({
                            type: 'POST',
                            url: '/games/rating',
                            data: {
                              slug: $(self).attr('id').slice(1),
                              rating: score
                            },
                            success: function () {
                              console.log('setting to read-only');
                              $(self).raty('readOnly', true);
                            }
                          });
                        }
                      });
          else
            script(type='text/javascript')
              $('#_#{game.slug}').raty({
                path: '/img',
                round : { down: .25, full: .6, up: .76 },
                score: #{game.rating}/#{game.votes},
                readOnly: true
              });

          script(type='text/javascript')
            $('##{game.slug}').click(function() {
              var game = this;
              $.ajax({
                type: 'post',
                url: '/buy',
                data:  {
                  slug: $(game).attr('id')
                }
              }).success(function () {
                $('#price-#{game.slug}').attr('disabled', 'true');
                $('#modal-' + $(game).attr('id')).modal('hide');
                humane.log('Your order has been submitted!');
              });
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:37:36.897

读起来太长了。无论如何，我想我明白你在说什么，并会使用这样的格式：

```
<div id="some_container">
    <!-- The following div would be generated in each iteration of the for loop you speak of -->
    <div class="item-container" data-game-name="Your game name" data-game-id="23">
        <span class="button delete-button">X</span>
    </div>
</div> 
```

而且您的脚本将具有委托（以大大减少绑定的数量）：

```
$(document).ready(function () {
    $("#some_container").on("click", ".delete-button", function () {
        var $this = $(this);
        var $container = $this.closest(".item-container");
        var game_name = $container.data("game-name");
        var game_id = $container.data("game-id");
        // Do whatever with the above 2 variables
    });
}); 
```

至于模态的东西，您可以创建一个`<div>`具有“模板”的“模板”，用于显示什么。然后，当您单击任何按钮时，您使用上述逻辑（获取第一个父`.item-container`项以获取项目的详细信息，他们用此信息填写模式中的“模板”。然后，“确定”按钮不需要一百万个硬编码的东西 - 只需一个 - 从模板中获取信息并进行任何调用或提交表单。*

# c - 二叉搜索树 malloc 没有为以下节点提供足够的内存

> ID：13579354
> 
> 赞同：2
> 
> 时间：2012-11-27T07:30:37.560
> 
> 标签：c, memory, malloc, binary-search-tree

我遇到了一个问题，即在第一个节点之后，我没有为节点提供足够的内存，例如，`firstNode = (node)malloc(sizeof(node))`. 下面是*node的结构和使用malloc函数的insert函数。

```
typedef struct treeNode *node;

struct treeNode {
    node left;
    node right;
    int data;
};

node firstN;
node secondN;

node insert(int a, node t){
    if(t==NULL){
        t = (node)malloc(sizeof(node));
        t->data = a;
        t->left = NULL;
        t->right = NULL;
    } else {
        if(a < t->data){
            t->left = insert(a, t->left);
        }else if(a > t->data){
            t->right = insert(a, t->right);
        }
    }
    return t;
} 
```

这是我用malloc测试插入过程的main（）（我没有使用上面定义的插入函数，因为我还在main中逐行测试）。

```
firstN=(node)malloc(sizeof(node)*10);
firstN->data=1;
firstN->right=NULL;
firstN->left=NULL;
firstN->right=(node)malloc(sizeof(node)*10); 
```

对我来说有趣的是，虽然上述方法有效，但通常执行 (node)malloc(sizeof(node)) （没有乘以 10）对于第二个实例 firstN->right 不起作用。

我想知道为什么代码没有提供足够的内存，如果这是正确的情况。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T07:36:34.863

这：

```
t = (node)malloc(sizeof(node)); 
```

错了，你没有分配足够的内存来保存结构，只是指向它的指针，因为它`node`是“指针`struct treeNode`”的别名。

你需要：

```
t = malloc(sizeof *t); 
```

请注意这有多简单？[演员表是个坏主意](https://stackoverflow.com/a/605858/28169)，因此应该将其删除。而且大小是错误的，所以让编译器计算它。

对于将结果存储在某个指针中`p`的许多（许多）分配，值`sizeof *p`是`malloc()`. *如果您当然要分配数组*，则这不成立，那么它通常`n * sizeof *p`用于某些表达式`n`。

此外，`typedef`在 C 中使用隐藏指针通常不是一个好主意，因为指针很*重要*，而且很快就会变得混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:31:49.387

```
typedef struct treeNode {
    struct treeNode *left;
    struct treeNode *right;
    int data;
}node;

node *firstN;
node *secondN;

node *insert(int a, node *t){
    if(t==NULL){
        t = malloc(sizeof(node));
        t->data = a;
        t->left = NULL;
        t->right = NULL;
    } else {
        if(a < t->data){
            t->left = insert(a, t->left);
        }else if(a > t->data){
            t->right = insert(a, t->right);
        }
    }
    return t;
}

int main(void) {

    firstN = malloc(sizeof(node)); /* allocating ROOT Node */
    firstN->data = 1;
    firstN->right = NULL;
    firstN->left = NULL;

    /* why are you allocating RIGHT, it will automatically be allocated when you insert Node */
    //firstN->right = (node)malloc(sizeof(node)*10);
} 
```

# ruby-on-rails - 使用包含验证数组元素包含：{ in: array }

> ID：13579357
> 
> 赞同：3
> 
> 时间：2012-11-27T07:30:54.553
> 
> 标签：ruby-on-rails

我使用gem 在这样的模型`acts-as-taggable-on`上填充用户兴趣`User`

```
# User.rb
acts_as_taggable
acts_as_taggable_on :interests 
```

当我填充`interest_list`数组时，我需要检查给定值是否与常量数组匹配，以确保这些是可接受的值，如下所示

```
VALID_INTERESTS = ["music","biking","hike"]
validates :interest_list, :inclusion => { :in => VALID_INTERESTS, :message => "%{value} is not a valid interest" } 
```

上面的代码返回以下错误

```
@user = User.new
@user.interest_list = ["music","biking"]
@user.save
=> false …. @messages={:interest_list=>["music, biking is not a valid interest"]} 
```

我可以看到包含没有意识到它应该迭代数组元素而不是 s 考虑作为一个普通字符串，但我不知道如何实现这一点。任何的想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T07:55:23.937

标准包含验证器不适用于此用例，因为它会检查所讨论的属性是否是给定数组的成员。您想要检查数组的*每个元素（属性）是否是给定数组的成员。*

为此，您可以创建一个自定义验证器，如下所示：

```
VALID_INTERESTS = ["music","biking","hike"]
validate :validate_interests

private

def validate_interests
  if (invalid_interests = (interest_list - VALID_INTERESTS))
    invalid_interests.each do |interest|
      errors.add(:interest_list, interest + " is not a valid interest")
    end
  end
end 
```

通过取这两个数组的差异，我得到了`interest_list`not in的元素。`VALID_INTERESTS`

我实际上没有尝试过这段代码，所以不能保证它会起作用，但我认为解决方案看起来像这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-20T04:55:55.667

这是一个很好的实现，但我忘记了模型描述中的一个。

```
serialize : interest_list, Array 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-29T08:30:06.300

您可以实现自己的`ArrayInclusionValidator`：

```
# app/validators/array_inclusion_validator.rb
class ArrayInclusionValidator < ActiveModel::EachValidator
  def validate_each(record, attribute, value)
    # your code here

    record.errors.add(attribute, "#{attribute_name} is not included in the list")
  end
end 
```

在模型中它看起来像这样：

```
# app/models/model.rb
class YourModel < ApplicationRecord
  ALLOWED_TYPES = %w[one two three]
  validates :type_of_anything, array_inclusion: { in: ALLOWED_TYPES }
end 
```

可以在这里找到示例：

*   [https://github.com/sciencehistory/kithe/blob/master/app/validators/array_inclusion_validator.rb](https://github.com/sciencehistory/kithe/blob/master/app/validators/array_inclusion_validator.rb)
*   [https://gist.github.com/bbugh/fadf8c65b7f4d3eaa55e64acfc563ab2](https://gist.github.com/bbugh/fadf8c65b7f4d3eaa55e64acfc563ab2)

# jquery - 数组中的jQuery数组

> ID：13579359
> 
> 赞同：0
> 
> 时间：2012-11-27T07:30:56.703
> 
> 标签：jquery, arrays, jqplot

大家好，我有一个关于数组中的数组以及如何调用它的小问题...... EX：

```
var plotName = ['bearShevaPlot', 'haifaPlot', 'tiberiasPlot', 'kfarSabaPlot', 'netanyaPlot', 'rishonLezionPlot', 'rehovotPlot', 'telAvivPlot'];
var chartName = ['bearShevaCity', 'haifaCity', 'tiberiasCity', 'kfarSabaCity', 'netanyaCity', 'rishonLezionCity', 'rehovotCity', 'telAvivCity']; 
```

要调用所有数组并在每个数组上执行一个函数，我将使用 .each jQuery 函数。

```
$.each(plotName,function(cName,pName){
     chartName[cName];
     var pName = $.jqplot(''+chartName[cName]+'', [/* another var */], {
          //my code here
     });
}); 
```

现在因为我需要有一个 3rd var 我想在一个数组中有一个数组，例如：

```
var plotName = [['bearShevaPlot', 'bearSheva'], ['haifaPlot', 'haifa'], ['tiberiasPlot', 'tiberias'], ['kfarSabaPlot', 'kfarSaba'], ['netanyaPlot', 'netanya'], ['rishonLezionPlot', 'rishonLezion'], ['rehovotPlot', 'rehovot'], ['telAvivPlot', 'telAviv']]; 
```

我的问题是如何调用“bearSheva”，它是数组内第一个数组的第二个 val。

感谢您的帮助，对不起我的英语不好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:39:26.653

`firstPlot`&`secondPlot`将具有所需的值。

```
var chartName = ['bearShevaCity', 'haifaCity', 'tiberiasCity', 'kfarSabaCity', 'netanyaCity', 'rishonLezionCity', 'rehovotCity', 'telAvivCity'];
var plotName = [['bearShevaPlot', 'bearSheva'], ['haifaPlot', 'haifa'], ['tiberiasPlot', 'tiberias'], ['kfarSabaPlot', 'kfarSaba'], ['netanyaPlot', 'netanya'], ['rishonLezionPlot', 'rishonLezion'], ['rehovotPlot', 'rehovot'], ['telAvivPlot', 'telAviv']];

$.each(plotName,function(cName,pName){
     var chart = chartName[cName];
     var firstPlot = pName[0];
     var secondPlot = pName[1];
     var pName = $.jqplot(''+chartName[cName]+'', [/* another var */], {
          //my code here
     });
}); 
```

希望能帮助到你。

# c# - Windows 应用商店应用程序 (Windows 8 Metro) 中 GridView 中的空数据模板

> ID：13579364
> 
> 赞同：2
> 
> 时间：2012-11-27T07:31:12.560
> 
> 标签：c#, wpf, windows-store-apps

我为 Windows 8 Metro 风格（Windows 商店应用程序）编写了一个程序。我有一个分组数据源，其中几个组为空，我正在寻找一种在组为空时设置模板的方法。我尝试了一些 WPF 解决方案，但没有任何进展。

# perl - 加速 foreach 循环中的 perl 哈希和更好的算法

> ID：13579366
> 
> 赞同：1
> 
> 时间：2012-11-27T07:31:36.877
> 
> 标签：perl, hash, foreach

我有 2 个哈希 -> `%a`和`%b`. 哈希`%a`来自`temp.txt`

```
my %a = map{
  my $short = substr($_,12);
  $count++ => {$short => $_};
  } @a;

my %b = map {
   $_ => $_;
  } @b;

%a = (
    '1' =>  {'We go lunch' => 'We go lunch 9 pm'},
    '2' =>  {'We go break' => 'We go break 8 pm'},
    '3' =>  {'We go lunchy' => 'We go lunchy 8 pm'}
);

%b = (
    'We go lunch' => 'We go lunch',
    'We go break' => 'We go break',
    'We go lunchy' => 'We go lunchy'
);

foreach my $key (keys %a){
  foreach my $key2 (keys %{$a{$key}}){
      if(exists $b{$key2}){
      delete $a{$key}{$key2};
      delete $a{$key};
  }
  }
}

my @another;
foreach my $key ( sort {$a<=>$b} keys %a) {
   foreach my $key2 (keys %{$a{$key}}){
      $another[$count] = $a{$key}{$key2};
      $count++;
   }
} 
```

我怎样才能加快速度？我的哈希值很奇怪吗？`@another`输出25144 行单词用时30 秒`temp.txt`。

是否有必要对哈希进行哈希处理`%a`？原因是我希望删除任何`%b{$key}`值。`%a`如果你们有更好的方法来做这件事，我还在学习 Perl，非常感谢，可能使用 map 和 grep？和更好的算法？

**以前的解决方法**

如果您看到每个@b 都比每个@a 都短，但仍在@a 内。我曾尝试使用

```
foreach (@b) { 
my $source = $_; 
@another = grep !(/$source/i), @a;} 
```

但它仍然不起作用。我很困惑，因此在 %a 中出现了这个哈希值，并从 @b 中生成哈希 %b 只是为了摆脱 @a 中 @b 的每个实例值。结果是奇怪的哈希。哈哈

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:52:46.977

这里有一些未知数 -`%b`例如如何构建。否则，有一些观察：

您应该使用另一个数组而不是`%a`：

```
 my @c = map{
    { "".substr($_,12) => $_}
   } @a; 
```

如果您已经`%b`定义，您可以通过以下方式进一步优化它：

```
my @another = grep !exists $b{ substr($_,12) }, @a; 
```

希望这可以帮助

另外，不要忘记**总是** 在程序开始时。`use strict;``use warnings;`

**说明：**

您的代码将所有内容放入`%a`，遍历它并消除不应该存在的内容。我认为您可以简单地`grep`将所需结果保存在数组中。

优化后的代码应该变成：

```
use strict;
use warning;

my %b = (
    'We go lunch' => 'We go lunch',
    'We go break' => 'We go break',
    'We go lunch' => 'We go lunch'
);

#add code that initially fills @a

my @another = grep { !exists $b{ substr($_,12) } } @a; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:09:07.987

看来你很困惑。首先，`substr $_, 12`返回字符串中第 12 位*之后*的所有字符，因此不会创建您所说的数据结构。其次，您使用 hash of hashes`%a`作为*arrays 的数组*，因为键是序列中没有间隙的整数，而您存储的值是一个简单的字符串对。

对我们来说最大的问题是你没有在这一切中解释你的*目标*。

它看起来是你想要结束的数组`@another`包含所有`temp.txt`不以任何字符串开头的行`@b`。这对吗？

我会通过从 array 构建正则表达式`@b`，并在读取文件时检查文件中的每一行来做到这一点。

这个程序演示。我已将数组重命名为`@b`，`@exclude`因为前者是一个*可怕*的变量名称。正则表达式是通过在数组的每个元素前面加上`^`以将正则表达式锚定在字符串的开头，并附`\b`加以强制单词边界来构建的（例如，`lunch`不匹配`lunchy`）。*然后使用交替运算符将所有*元素连接在一起`|`，从而生成一个匹配以.*`@exclude`*

 *之后，通读文件是一件简单的事情，根据正则表达式检查每一行，然后推送到`@another`那些不匹配的行。

请注意，就目前而言，程序从`DATA`文件句柄中读取，以便我可以在源中包含一些测试数据。您应该通过取消注释该`open`行并删除该行来更改它`my $fh = *DATA`。

```
use strict;
use warnings;

#open my $fh, '<', 'temp.txt' or die $!;
my $fh = *DATA;

my @exclude = (
  'We go lunch',
  'We go lunchy',
  'We go break',
);

my $exclude_re = join '|', map "^$_\\b", @exclude;

my @another;
while (my $line = <$fh>) {
  chomp $line;
  push @another, $line unless $line =~ $exclude_re;
}

print "$_\n" for @another;

__DATA__
We go breakfast 6 am
We go lunch 9 pm
We go break 8 pm
We go lunchy 8 pm
We go supper 7 pm 
```

**输出**

```
We go breakfast 6 am
We go supper 7 pm 
```*

# android - 我在哪里可以找到模拟器上的内部存储

> ID：13579372
> 
> 赞同：0
> 
> 时间：2012-11-27T07:32:01.640
> 
> 标签：android, macos

在我的 os x 笔记本电脑上，我将 android sdk 安装到 /Users/user/dv/android-sdk-utd 中。但是哪里有模拟器的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:37:19.340

```
/Users/user/dv/android-sdk-utd 

and press AVD Manager.exe file its open all avd emulator and also u create 
and for system-image

/Users/user/dv/android-sdk-utd/system-images

ok 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:39:42.963

您可以使用文件浏览器来显示您的模拟器的内容。即使您可以从模拟器中提取或推送文件。请点击此链接

你可以看到模拟器的目录结构和手机一样。你可以探索模拟器的内部和外部存储。

[http://www.coderzheaven.com/2011/03/24/how-to-add-files-like-images-inside-your-emulator-in-android/](http://www.coderzheaven.com/2011/03/24/how-to-add-files-like-images-inside-your-emulator-in-android/)

谢谢

# php - 使用php在paypal自动重定向中的任何可能

> ID：13579376
> 
> 赞同：0
> 
> 时间：2012-11-27T07:32:07.470
> 
> 标签：php, api, paypal, payment-gateway

如果有任何可能重定向贝宝而不点击“返回商店”链接使用php脚本？不在贝宝账户中。仅使用 PHP 脚本或 JavaScript。

因为我在感谢页面 url 中发送了更多参数。

请指教。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:37:59.713

使用网站付款，您可以。

要设置自动返回：

1.  登录并单击“我的帐户”下的“个人资料”子选项卡。
2.  单击销售偏好下的网站支付偏好链接。
3.  单击打开单选按钮以启用自动返回。
4.  输入返回 URL。注意：您必须满足退货 URL 要求才能设置自动退货。

**[文档在这里](https://www.paypal.com/cgi-bin/webscr?cmd=p/mer/express_return_summary-outside)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:38:50.020

使用标准支付按钮或基本的 HTML 结帐，您将不得不依靠他们的自动退货系统或用户点击链接。

如果您想对此进行更多控制，可以使用[Express Checkout API](https://www.x.com/developers/paypal/development-and-integration-guides#ec)，在这种情况下，始终保证用户在完成结帐流程之前返回您的站点，因此您可以直接在该流程中处理任何预付款或付款后处理。

由于您使用的是 PHP，我建议您查看我[的 PayPal 类库](http://www.angelleye.com/overview-of-php-class-library-for-paypal/)。它会让你轻松搞定，如果你在设置方面需要帮助，我可以提供 30 分钟的免费培训，这通常足以让你熟悉这个库并将几乎任何你想要的 PayPal API 集成到你的项目中(s)。

# hadoop - Map side join 可以加入的最大路径数？

> ID：13579379
> 
> 赞同：1
> 
> 时间：2012-11-27T07:32:23.663
> 
> 标签：hadoop

Map 侧连接实际可以连接的最大路径数是多少？

我有**n 个**文件夹 - path/to/folder1 ， path/to/folder2 ， path/to/folder3 ....so on path/to/folder in HDFS

path/to/folder1 包含 3 个文件，例如 part-1、part-2、part-3。同样，所有其余文件夹中的每个文件夹都有 3 个文件，每个文件的名称与 folder1 中的相同。

我想使用地图侧连接加入这些文件夹，如下所示

pathsToJoin <- path/to/folder1 , path/to/folder2 , path/to/folder3 ....so on path/to/folder* *n* *

String joinStmt = CompositeInputFormat.compose("outer",TextInputFormat,pathsToJoin);

conf.set("mapred.join.expr", joinStmt);

由于每个文件夹中有 3 个文件，因此该作业将产生 3 个映射任务（所有第 1 部分文件的内容加入到一个映射器，所有第 2 部分文件的内容到第 2 个映射器，所有第 3 部分文件的内容到第 3 个映射器) 但我想知道这里**n**的最大值是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:51:07.253

CompositeInputFormat 的源代码中似乎没有硬性限制，路径被附加到描述连接的字符串表达式，然后解析为拆分。你可能受到内存的限制，但我想你可以列出 100 个，如果不是 1000 个，没有任何问题

# java - JDK7 文件.copy

> ID：13579380
> 
> 赞同：3
> 
> 时间：2012-11-27T07:32:31.510
> 
> 标签：java, file, stream, inputstream, java-7

在 OpenJDK7 项目[java.nio.file.Files](http://www.docjar.com/src/api/java/nio/file/Files.java)中，有如下函数。我的问题是，while 循环条件应该是 >= 而不是 >？这是因为 source.read javadoc 说当到达 EOF 时，它将返回 -1 而不是 0。

```
/**
 * Reads all bytes from an input stream and writes them to an output stream.
 */
private static long copy(InputStream source, OutputStream sink)
    throws IOException
{
    long nread = 0L;
    byte[] buf = new byte[BUFFER_SIZE];
    int n;
    while ((n = source.read(buf)) > 0) {
        sink.write(buf, 0, n);
        nread += n;
    }
    return nread;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:40:24.587

您正在查看错误的读取功能。InputStream 的读取函数接受一个字节数组，将返回已复制到缓冲区的字节数。因此，您可以知道可以从中复制多少字节。

```
 * @return     the total number of bytes read into the buffer, or
 *             <code>-1</code> if there is no more data because the end of
 *             the stream has been reached. 
```

所以它确实涵盖了两种情况：到达流的结尾（-1）或由于任何其他原因没有字节读入缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:56:03.743

这是否是错误取决于函数的意图。

通常这将完全按照您的预期工作，因为调用`read`将阻塞，直到至少一个字节的数据可用。但是，如果输入流是非阻塞的，则当*当前*没有更多可用数据时，`read`调用将返回 0 。此状态与主动关闭的流不同。

 *换句话说，有人可能会争辩这是否是一个错误，这取决于您在面对调用该方法时没有可用数据的非阻塞流时期望它做什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T15:30:45.660

一样，因为`InputStream.read(byte[])`这里不会返回 0。来自 javadoc

> 至少读取一个字节*

# twitter-bootstrap - Twitter Bootstrap：保持侧边栏宽度

> ID：13579383
> 
> 赞同：0
> 
> 时间：2012-11-27T07:32:36.237
> 
> 标签：twitter-bootstrap

我是 Twitter 引导程序的新手，如何使用 Twitter 引导程序实现像这个网站的流畅布局一样的布局？ [http://www.smashingmagazine.com/](http://www.smashingmagazine.com/)

我需要的是侧边栏在特定媒体类型中的长度相同。我试过了

```
<div class="container-fluid">

    <div class="row-fluid">

      <div class="span9">...</div>

      <div class="span3">  
        <div class="sidebar">...</div>
      </div>

    </div>

</div> 
```

我该怎么做才能使`span3`长度始终保持在 300px

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:41:23.833

我不确定你的查询..

您可以尝试将此附加到您的代码中，看看它是否适合您。

```
<style>
  .row-fluid .span3 .sidebar {
    width: 300px;
  } 
</style> 
```

# node.js - 如何制作 euc-kr 文本文件？

> ID：13579385
> 
> 赞同：1
> 
> 时间：2012-11-27T07:32:48.183
> 
> 标签：node.js, file-io, encoding

```
fs.writeFile("test.txt", content, function(err) {

if(err) {
    console.log(err);
} else {
    console.log("The file was saved!");
}
}); 
```

内容为 euk-kr 文本。
如何制作 euc-kr 文本文件？

# android - 开启和关闭按钮无法正常工作

> ID：13579387
> 
> 赞同：1
> 
> 时间：2012-11-27T07:32:50.480
> 
> 标签：android, button

我编写了一个 Android 应用程序，其中有两个按钮，一个用于静音`music_player`，另一个用于取消静音。但是当我按两次静音按钮以增加媒体音量时，我需要按两次取消静音按钮。如何避免这种情况？无论我将媒体音量静音多少次，我都想取消媒体音量静音。我使用了以下代码：

**沉默的：**

```
AudioManager am = (AudioManager)MainActivity.this.getSystemService(Context.AUDIO_SERVICE);
am.setStreamMute(AudioManager.STREAM_MUSIC, true); 
```

**取消静音：**

```
AudioManager am = (AudioManager)MainActivity.this.getSystemService(Context.AUDIO_SERVICE);
am.setStreamMute(AudioManager.STREAM_MUSIC, false); 
```

*编者按：上面的两个代码段是相同的。那可能是不正确的。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:55:17.770

您可以指定一个`boolean`标志`isMute`并使用它通过一个按钮来切换静音，就像这样：

```
boolean isMute = false;
Button mMuteButton;

...

mMuteButton.setOnclickListener(
   new OnClickListener {
      public void onClick(View v) {
         AudioManager am = (AudioManager)MainActivity.this.getSystemService(Context.AUDIO_SERVICE);
         am.setStreamMute(AudioManager.STREAM_MUSIC, !isMute);
         isMute = !isMute;
      }
   }); 
```

或者如果您非常想使用两个按钮，那么只需在静音或取消静音后禁用一个

# c# - 如何编写只匹配数字、文本、空格和两个特殊字符的正则表达式

> ID：13579390
> 
> 赞同：0
> 
> 时间：2012-11-27T07:33:20.653
> 
> 标签：c#, asp.net

如何编写只匹配数字、文本和这两个特殊字符的正则表达式 # 和 - [a-zA-Z0-9#-\s]+ 其他任何内容都应该被拒绝

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:43:07.300

您可以使用类似于此的正则表达式

```
^(\d|[a-z]|[A-Z]|#|-)*$ 
```

在我用于检查 c# 中的正则表达式的代码下方：

```
string input = @"343243-2df---ds#SFD#FD";
string pattern = @"^(\d|[a-z]|[A-Z]|#|-)*$";

Console.WriteLine(Regex.Match(input, pattern).Success);
Console.ReadLine(); 
```

此外，对于未来的参考资料，您可以查看这个正则表达式站点：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T08:31:17.357

我相信以下模式适用于 C#：

```
string pattern = @"^[a-zA-Z\d\s#-]*$"; 
```

我刚刚在 C# 交互中尝试了几个测试用例：

```
Regex.Match("", pattern).Success
> true
Regex.Match("asdf 2F#-#-", pattern).Success
> true
Regex.Match("asdf~asdf", pattern).Success
> false 
```

如果您不想接受空字符串，只需将模式中的 * 更改为 +。此外，您没有声明要在问题中匹配空格，但您的示例模式确实匹配空格。如果您不想匹配空格，请删除 \s。

**更新**：根据 Rawling 的建议进行编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T07:38:27.110

试试这个：

```
^([a-z]|[A-Z]|[#]|[0-9]|[-])+$ 
```

# c++ - Radix Sort base 256 性能

> ID：13579392
> 
> 赞同：0
> 
> 时间：2012-11-27T07:33:38.017
> 
> 标签：c++, sorting, radix-sort

我正在尝试使用列表实现基数为 256 的基数排序。排序工作正常，但对大数组进行排序需要很长时间，此外复杂性应该是线性的，O(n)，但我没有得到那个结果，因为我正在对输出中的排序进行计时。这是我的代码：

插入功能：

```
//insert to the back of the list element pointed to by x
void insert(Item * ls, Item * x)
{
    x->prev = ls->prev;
    ls->prev->next=x;
    x->next=ls;
    ls->prev=x;
} 
```

删除功能：

```
//delete link in list whose address is x
void delete_x(Item * x)
{
    x->prev->next = x->next;
    x->next->prev = x->prev;
    delete [] x;
} 
```

Radix_Sort 函数：

```
void radix_sort_256(unsigned int *arr,unsigned int length)
//Radix sort implementation with base 256
{

    int num_of_digits=0,count=0,radix_num=0;
    unsigned int base=0,largest=0;

    Item List [256];             //Creating 256 Nodes ( Base 256 )
    for(int j=0; j<256;j++)      // Sentinel Init for each Node
    {
        List[j].key=0;
        List[j].next=&List[j];
        List[j].prev=&List[j];
    }

    for(unsigned int i=0; i<length ; i++)     //Finding the largest number in the array
    {
        if(arr[i]>largest)
            largest = arr[i];
    }

    while(largest != 0 )        //Finding the total number of digits in the bigest number( "largest" ) of the array.
    {
        num_of_digits++;
        largest = largest >> 8;
    }
    for(int i=0; i<num_of_digits; i++)
    {
        Item *node;
        for(unsigned int j=0; j<length; j++)
        {
            node = new Item;                      //Creating a new node(Total 256 nodes) and inserting numbers from the array to each node
            node->next = NULL;                    // with his own index.
            node->prev = NULL;
            node->key = arr[j];
            radix_num = ( arr[j] >> (8*i) ) & 0xFF;
            insert(&List[radix_num],node);
        }

        for(int m=0 ; m<256 ; m++)              //checking the list for keys // if key found inserting it to the array in the original order
        {
            while( List[m].next != &List[m] )
            {
                arr[count]=List[m].next->key;
                delete_x(List[m].next);             //deleting the Item after the insertion
                count++;
            }
        }
        count=0;
    }
} 
```

主要的：

```
void main()
{
    Random r;
    int start,end;
    srand((unsigned)time(NULL));

    // Seting up dinamic array in growing sizes,
    //  filling the arrayes with random
    for(unsigned int i=10000 ; i <= 1280000; i*=2)
    {
        // numbers from [0 to 2147483646] calling the radix
        //  sort function and timing the results
        unsigned int *arr = new unsigned int [i];
        for(int j=0 ; j<i ; j++)
        {
            arr[j] = r.Next()-1;
        }
        start = clock();
        radix_sort_256(arr,i);
        end = clock();
        cout<<i;
        cout<<"               "<<end-start;
        if(Sort_check(arr,i))
            cout<<"\t\tArray is sorted"<<endl;
        else
            cout<<"\t\tArray not sorted"<<endl;

        delete [] arr;
    }
} 
```

谁能看到，也许我正在做一些需要大量时间执行的不必要的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:10:16.610

复杂性是一种难以掌握的野兽，因为它是多态的。

当我们谈到一个算法的复杂性时，我们一般都会把它简化，按照我们**认为**的*瓶颈操作*来表达。

例如，在评估排序算法时，复杂度表示为*比较次数*；但是，如果您的内存是磁带¹而不是 RAM，那么真正的瓶颈是内存访问，因此快速排序 O(N log N) 最终会比冒泡排序 O(N ** 2) 慢。

在这里，您的算法可能是*最佳*的，它的实现似乎缺乏：例如，正在进行大量的内存分配/释放。因此，很可能是您没有正确识别瓶颈操作，并且所有关于线性复杂性的讨论都没有实际意义，因为您没有测量正确的事物。

¹因为磁带从一个单元移动到另一个单元所花费的时间与这些单元之间的距离成正比，因此不断在内存中跳跃的快速排序算法最终会做很多来回操作，而冒泡排序算法只运行磁带 N 次（最大）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-04T10:35:43.303

基数为 256 的基数排序很容易看起来像这样。

```
void sort(int *a, int n)
{

     int i, *b, exp = 1, max = 0;
        for (i = 0; i < n; i++) {
            if (a[i] > max)
               max = a[i];
        }

      b = (int*)malloc(n * sizeof(int));
        while (max / exp > 0) {
            int box[256] = {0};
            for (i = 0; i < n; i++)
               box[a[i] / exp % 256]++;
            for (i = 1; i < 256; i++)
               box[i] += box[i - 1];
            for (i = n - 1; i >= 0; i--)
               b[--box[a[i] / exp % 256]] = a[i];
            for (i = 0; i < n; i++)
               a[i] = b[i];
            exp *= 256;
        }
   free(b);
} 
```

# ios - 将 UINavigationController 与 UITabBarController 结合使用

> ID：13579394
> 
> 赞同：2
> 
> 时间：2012-11-27T07:33:43.193
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我正在开发一个 iOS 应用程序，它要求用户在使用该功能之前登录或注册。流量是；该应用程序显示一个带有 2 个按钮的屏幕 1) 登录 2) 注册 单击任一按钮后，应用程序使用 UiNavigationController 将用户导航到不同的视图控制器。成功登录后，用户将被定向到一个主视图控制器，该控制器在视图底部显示一个选项卡栏，在视图顶部显示一个 UiNavigationController 的顶部栏。

为了实现这一点，我将 UINavigationViewController 设置为 AppDelegate 文件中的根视图控制器。

用户通过身份验证后，我使用以下代码将标签栏控制器推送到 UiNavigationController 上。

```
 FirstViewController *firstViewController = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    [firstViewController setTabBarItem:[[UITabBarItem alloc] initWithTitle:@"1st" image:[UIImage imageNamed:@"1st.png"] tag:101]];

    SecondViewController *secondViewController = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    [secondViewController setTabBarItem:[[UITabBarItem alloc] initWithTitle:@"2nd" image:[UIImage imageNamed:@"2nd.png"] tag:102]];

    ThirdViewController *thirdViewController = [[ThirdViewController alloc]initWithNibName:@"ThirdViewController" bundle:nil];
    [thirdViewController setTabBarItem:[[UITabBarItem alloc] initWithTitle:@"3rd" image:[UIImage imageNamed:@"3rd.png"] tag:104]];

    UITabBarController *tabController = [[UITabBarController alloc] init];
    [tabController setViewControllers:[NSArray arrayWithObjects:firstViewController, secondViewController,thirdViewController, nil]];

    [self.navigationController pushViewController:tabController animated:YES]; 
```

这是正确的方法吗？刚才有人说使用标签栏控制器作为根视图控制器将是一个更好的方法。我怎样才能将标签栏控制器设置为根视图控制器，因为我不想在登录/注册屏幕上显示标签栏......

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:56:18.173

只需创建一个协议，您就可以在登录名`UIViewController`和`AppDelegate`. 登录完成后，您可以更改`rootViewController`. 您还可以通过执行以下操作来获取对 AppDelegate 的引用：

```
MyAppDelegate *appDelegate = (MyAppDelegate *)[[UIApplication sharedApplication] delegate]; 
```

虽然我更喜欢使用协议在不同对象之间进行通信。

# android - Android 将 SQLite 数据库中的数据加载到下一个活动中

> ID：13579400
> 
> 赞同：0
> 
> 时间：2012-11-27T07:34:10.137
> 
> 标签：android, listview

我有一个从 SQLite 数据库加载数据的 listView，现在我想在列表中实现一个 onclicklistener。当用户点击列表时，它应该将他们带到下一个活动并将相应的数据加载到 TextView 中。我的问题是我将如何传递列表的数据，例如它是“主题”列表，用户单击“我的家”主题。我想将主题“我的家”传递给下一个活动，以便我知道分别要检索哪些相应的数据。

我该怎么做？我是否“将Extras”添加到新意图？或者还有另一种方法。以下是我显示列表视图的部分代码：

```
ListView listContent = (ListView) findViewById(R.id.contentlist);
        mySQLiteAdapter = new SQLiteAdapter(this);
        mySQLiteAdapter.openToRead();

        Cursor cursor = mySQLiteAdapter.queueAll();
        startManagingCursor(cursor);

        String[] from = new String[] { SQLiteAdapter.KEY_CONTENT };
        int[] to = new int[] { R.id.text };

        SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, R.layout.listrow, cursor, from, to);

        listContent.setAdapter(cursorAdapter);

        mySQLiteAdapter.close();

        //Onclick ListView setlistener
        listContent.setTextFilterEnabled(true);
        listContent.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                Intent summaryIntent = new Intent(DocumentListActivity.this, ViewDocumentActivity.class);
//              summaryIntent.putExtra("SummTopic", value);
            }
        }); 
```

已编辑：这部分是关于下一个活动的。

```
Intent i = getIntent();
        extraTopic = i.getStringExtra("SummTopic");

        mydb = openOrCreateDatabase(DBNAME, Context.MODE_PRIVATE,null);
        Cursor allrows  = mydb.rawQuery("SELECT * FROM "+  TABLE + " WHERE topic = \" " + extraTopic + " \" " , null);

        Integer cindex = allrows.getColumnIndex("topic");
        Integer cindex1 = allrows.getColumnIndex("text1");
        Integer cindex2 = allrows.getColumnIndex("text2"); 
```

从数据库检索时出现错误：

```
android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 0 
```

请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:54:33.983

```
 public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            Intent summaryIntent = new Intent(DocumentListActivity.this, ViewDocumentActivity.class);
            Cursor c = (Cursor)parent.getItemAtPosition(position);
            summaryIntent.putExtra("SummTopic", c.getString(c.getColumnIndex(SQLiteAdapter.KEY_CONTENT)));
            startActivity(summaryIntent);
        } 
```

或者您可以通过此行的`id`( `summaryIntent.putExtra("SummTopicId", id);`) 并在具有此 ID 的主题的下一个活动中“询问 db”

编辑：

```
protected void onCreate(Bundle savedInstanceState){
    Intent i = getIntent(); 
    String extraTopic = i.getStringExtra("SummTopic"); 
    //or long extraTopic = i.getLongExtra("SummTopic"); if you put id there (which is better)
        mydb = openOrCreateDatabase(DBNAME, Context.MODE_PRIVATE,null);
    String[] args = new String[] { extraTopic };
    //or String[] args = new String[] { Long.toString(extraTopic) }; with id version
        Cursor singleRow  = mydb.rawQuery("SELECT * FROM "+  TABLE + " WHERE topic=?" , args);
    //args is better then escaping special chars in query
    //and it should be single row so we've changed var name :)
    if(singleRow.moveToFirst()){ //we should do moveToFirst before we can use Cursor
        Integer cindex = allrows.getColumnIndex("topic");
        Integer cindex1 = allrows.getColumnIndex("text1");
        Integer cindex2 = allrows.getColumnIndex("text2");
        //setup views and stuff ....
    }else{
        Toast.makeText(this, "Oops we did not find topic, detail activity was closed", Toast.LENGTH_SHORT).show();
        finish();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:43:30.280

您可以为此使用 Intent。

```
Intent intent= new Intent(context,classname.class);
intent.putExtra("name",string); 
```

您可以使用`intent.getextra()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T07:46:11.503

使用后，`setContentView(...)`您需要引用您的字符串并获取文本，例如...

```
EditText et = (EditText) findViewById(R.id.my_edit_text);
String theText = et.getText().toString(); 
```

要将其传递给另一个 Activity，您需要使用 Intent。例子...

```
Intent i = new Intent(this, MyNewActivity.class);
i.putExtra("text_label", theText);
startActivity(i); 
```

在新的 Activity ( `in onCreate()`) 中，您获取 Intent 并检索字符串...

```
public class MyNewActivity extends Activity {

    String uriString;

    @Override
    protected void onCreate(...) {

        ...

        Intent i = getIntent();
        uriString = i.getStringExtra("text_label");

    }
} 
```

**编辑：**

要从 Listview 获取字符串，您可以应用以下代码并获取 ITEM 字符串并将其传递给下一个活动：

```
 listContent.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
    String ITEM=listContent.getItemAtPosition(position);
                //Intent summaryIntent = new Intent(DocumentListActivity.this, // ViewDocumentActivity.class);
//              summaryIntent.putExtra("SummTopic", value);
            }
        }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-27T08:31:19.480

我猜您正在使用适配器来用一些数据填充您的列表。因此，您需要在适配器中覆盖 getItem(int position) 方法：

```
 @Override
    public Object getItem(int position) {
       //Note that return type should be the same you you use to initilise items oof the adapter. E.g. String or some custom Topic class
       Object someObject = mObjects[position];

       return someObject;    
    } 
```

然后你需要为你的列表设置一个项目点击监听器

```
mListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {
                Object someObject = adapterView.getItemAtPosition(i);

                Intent i = new Intent(this, MyNewActivity.class);
                i.putExtra("text_label", someObject.toString());
                startActivity(i);
            }
        }); 
```

# ruby-on-rails - Postgresql 模式和 Delayed::Job

> ID：13579404
> 
> 赞同：1
> 
> 时间：2012-11-27T07:34:24.347
> 
> 标签：ruby-on-rails, postgresql, delayed-job, multi-tenant

我正在使用 Postgresql 模式设置多租户 Rails 应用程序。

如何确定 Delayed::Job 的数据库搜索路径范围？

这会起作用：

```
initializers/dj_config.rb:

Delayed::Job.class_eval do
 connection.schema_search_path = ["#{current_tenant}", "public"].join(",")
end 
```

...但我需要一种方法来传递当前租户，这似乎很难，因为 DJ 工作人员与设置“current_tenant”的进程不同。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:07:27.773

我遇到了类似的问题，最终使用`perform`设置 current_tenant 的方法创建了自定义作业类。我只是将 current_tenant 传递给构造函数：

```
Delayed::Job.enqueue CustomJob.new(current_tenant) 
```

# css - 为什么背景图片被长文本覆盖

> ID：13579406
> 
> 赞同：0
> 
> 时间：2012-11-27T07:34:25.757
> 
> 标签：css, internet-explorer, background-image

我有该字段的文本字段和背景图像样式。以下是应用的样式：

```
.leftPaneContent INPUT {
    background-color: #FFFFFF;
    background-image: url("../images/icon-search-large.png");
    background-position: 4px 3px;
    background-repeat: no-repeat;
    border: 1px solid #D1D1D1;
    height: 14px;
    margin: 5px 0 5px 3px;
    overflow: hidden;
    padding: 2px 10px 4px 23px;
    width: 85%;
} 
```

即使我在文本字段中输入长值，图像也会在 FF 中正确显示。而图像在 IE 中被覆盖为 long 值。

问题可以在 IE 中的下图中看到

![在此处输入图像描述](../Images/f911b99745a1a13128653e7037b423d7.png)

有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:47:02.973

text-indent 没有解决 IE 中的问题。因此，我不得不将图像移出文本字段并将其包装在 div 中:)

# c# - 如何在 C# 的后台工作人员中使用 Web 浏览器对象

> ID：13579407
> 
> 赞同：0
> 
> 时间：2012-11-27T07:34:27.873
> 
> 标签：c#, browser, backgroundworker

我对下面的代码有疑问。有人可以告诉为什么它在 BackgroundWorker 中不起作用，我该如何解决这个问题

```
 string address = "My URL";
            webBrowser.Navigate(new Uri(address));
            do
            {
                Application.DoEvents();
            } while (webBrowser.ReadyState != WebBrowserReadyState.Complete); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:36:03.713

不！！

您最好打开一个新线程并从那里指示 WebBrowser

`Application.DoEvents()`有点[邪恶](https://stackoverflow.com/a/5183623/245495)。

这是您可以开始的方法

```
System.Threading.Thread t = new System.Threading.Thread(() =>
{
    yourWebBrowser.Navigate("http://Google.com");
});

t.ApartmentState = System.Threading.ApartmentState.STA;
t.Start(); 
```

要获得页面已加载的通知，您可以订阅 DocumentCompleted 事件，如下所示：

```
yourWebBrowser.DocumentCompleted += WebBrowserDocumentCompleted;

void WebBrowserDocumentCompleted(object sender, System.Windows.Forms.WebBrowserDocumentCompletedEventArgs e)
{
    throw new NotImplementedException();
} 
```

# vb.net - Graphics.RotateTransform() 不旋转我的图片

> ID：13579409
> 
> 赞同：0
> 
> 时间：2012-11-27T07:34:37.253
> 
> 标签：vb.net, rotation, transform, picturebox

我有以下代码的 Graphics.RotateTransfrom() 问题：

```
 Dim newimage As Bitmap
    newimage = System.Drawing.Image.FromFile("C:\z.jpg")
    Dim gr As Graphics = Graphics.FromImage(newimage)
    Dim myFontLabels As New Font("Arial", 10)
    Dim myBrushLabels As New SolidBrush(Color.Black)
    Dim a As String

    '# last 2 number are X and Y coords.
    gr.DrawString(MaskedTextBox2.Text * 1000 + 250, myFontLabels, myBrushLabels, 1146, 240) 
    gr.DrawString(MaskedTextBox2.Text * 1000, myFontLabels, myBrushLabels, 1146, 290)
    a = Replace(Label26.Text, "[ mm ]", "")

    gr.DrawString(a, myFontLabels, myBrushLabels, 620, 1509)
    a = Replace(Label5.Text, "[ mm ]", "")

    gr.DrawString(a, myFontLabels, myBrushLabels, 624, 548)

    gr.RotateTransform(90.0F)

    gr.DrawString(a, myFontLabels, myBrushLabels, 0, 0)

    PictureBox1.Image = newimage 
```

我不知道为什么，但我在 pictureBox1 中的图像没有旋转。有人知道解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:21:40.630

手头的问题是 RotateTransform 方法不适用于现有图像。

相反，它适用于图形对象的变换矩阵。基本上，变换矩阵会修改用于添加新项目的坐标系。

尝试以下操作：

```
 Dim gfx = Graphics.FromImage(PictureBox1.Image)

    gfx.DrawString("Test", Me.Font, Brushes.Red, New PointF(10, 10))
    gfx.RotateTransform(45)
    gfx.DrawString("Rotate", Me.Font, Brushes.Red, New PointF(10, 10)) 
```

第一个字符串是正常绘制的，而第二个字符串是旋转绘制的。

因此，您需要做的是创建一个新的图形对象，应用您的旋转，将源图像绘制到图形（graphics.DrawImage）上，然后绘制所有文本：

```
 ' Easy way to create a graphisc object
    Dim gfx = Graphics.FromImage(PictureBox1.Image)

    gfx.Clear(Color.Black)
    gfx.RotateTransform(90) ' Rotate by 90°

    gfx.DrawImage(Image.FromFile("whatever.jpg"), New PointF(0, 0))
    gfx.DrawString("Test", Me.Font, Brushes.Red, New PointF(10, 10))
    gfx.DrawString("Rotate", Me.Font, Brushes.Red, New PointF(10, 10)) 
```

但是要注意旋转，你会发现你需要改变你绘制图像的坐标（或者改变图形的RenderingOrigin属性，将其设置为图像的中心更容易处理旋转），否则你的图片将不可见（它将被绘制，但在图形的可见部分之外）。

希望有帮助

# xml - 试图通过excel从网站检索xml数据

> ID：13579410
> 
> 赞同：2
> 
> 时间：2012-11-27T07:34:41.510
> 
> 标签：xml, excel, vba, import, createobject

我正在编写一个用于名为 Eve Online 的游戏的 Excel 电子表格。我的电子表格需要通过名为 eve-marketdata.com 的数据提供商网站自动检索数据。在 eve-marketdata 的开发者页面上：[http](http://eve-marketdata.com/developers/item_history2.php) ://eve-marketdata.com/developers/item_history2.php它提供了一些关于如何通过 http 发送“发布”请求来请求数据的说明。

例如：用于市场历史请求的 url 将是：[http:](http://api.eve-marketdata.com/api/item_history2.xml?char_name=venoushka) //api.eve-marketdata.com/api/item_history2.xml?char_name= venoushka patel 然后，假设我想检索项目的 45 天数据id 34，来自区域 10000002。我将在 url 的末尾放置：item_id=34、days=45 和 region_ids=10000002，每个都由 & 符号分隔，用于：api.eve-marketdata.com/api/ item_history2.xml?char_name=venoushka patel&type_ids=34®ion_ids=10000002&days=45（由于本站发布规定删除了http://）

所以，我需要某些单元格来使用电子表格中的信息，例如项目 ID、区域 ID 等，以一起解析适当的 url，将 url 提交到站点，然后只获取我正在寻找的信息并放置它进入一个单元格。目前这在 google docs 而不是 excel 上要容易得多，因为它们的“importxml”功能利用了 xpath。但是，谷歌文档将每个电子表格的 xml 调用次数限制为 50，而我的电子表格将有几千个，所以我必须使用 excel。

不，我不会使用“从 Web 导入”或“将 xml 映射”到 Excel 中的单元格功能，因为我在电子表格中有数千个这些功能要做，而不是节省时间或资源。

有人告诉我，这可以使用以下 vba 代码来完成：

```
Set objHTTP = CreateObject("MSXML2.ServerXMLHTTP")
URL = "http://www.somedomain.com"
objHTTP.Open "POST", URL, False
objHTTP.setRequestHeader "User-Agent", "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)"
objHTTP.send ("") 
```

问题是，虽然我非常擅长编写 excel 电子表格，但我以前从未使用过 VBA。我知道如何打开 Visual Basic 编辑器，但仅此而已。首先：

我如何将它粘贴到 vba 编辑器中，然后在我的工作簿中调用它？我相信我必须在开头加上 function () 之类的东西，在结尾加上 end 函数，对吧？

我如何在我的工作表中调用这个函数来做我需要它做的事情？

有人可以解释上述代码的作用，以及我需要如何修改它来执行我的任务吗？

在此之前，我真的很感谢在这方面收到的任何帮助，并且社区中有很大一部分（成千上万的人）也需要一种方法来做到这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:56:46.203

你不会那样做的。首先，请求是 GET 而不是 POST，因此会有所改变。您可以使用以下内容：

```
 Function ImportData(sUrl As String) As Variant
        Dim oDoc As Object
        Dim oAttr As Object
        Dim oRow As Object
        Dim x As Long: x = 1
        Dim y As Long: y = 1
        Dim vData() As Variant

        Set oDoc = CreateObject("MSXML2.DOMDocument")
        With oDoc
            .Load sUrl
            Do: DoEvents: Loop Until .readystate = 4
            ReDim vData(1 To .getElementsByTagName("row").Length, 1 To 8)
            For Each oRow In .getElementsByTagName("row")
                For Each oAttr In oRow.Attributes
                    vData(x, y) = oAttr.Text
                    y = y + 1
                Next oAttr
                y = 1
                x = x + 1
            Next oRow
        End With

        ImportData = vData

    End Function

    Public Sub Test()
        Dim g
        'g = ImportData("http://api.eve-marketdata.com/api/item_history2.xml?char_name=venoushka%20patel&type_ids=34&region_ids=10000002&days=45")
        'or
        g = ImportData(Sheets(1).range("a1").Value)
        Sheets(1).Cells(2, 1).Resize(UBound(g), UBound(g, 2)).Value = g
    End Sub 
```

您可以通过将其放入普通模块中然后运行宏来测试它，`Test`您可以看到您将 url 放在哪里。不过我不得不承认，你可能会在这个过程中经历一段陡峭的学习曲线，它不会是最容易让你的 VBA 咬牙切齿的项目

# php - Jquery从列表中淡出后滑动到位置效果

> ID：13579412
> 
> 赞同：1
> 
> 时间：2012-11-27T07:34:56.410
> 
> 标签：php, javascript, jquery, html

目前，我正在为我的网站上的列表设置自动滚动功能。

但是，在列表中的第一项消失后，第二项是第一项的“跳入位置”。我想知道是否可以让第二个项目滑入 jquery 中的位置，我该怎么做？以下是javascript代码和html。感谢您提前提供任何帮助。

Javascript：

```
 <script>
    var ad_refresh=setInterval(function(){
        var $target=$("div.manufacturer_list ul li:eq(1)");
        var position_1 = $target.position();
        $target.fadeOut('slow', function(){
            $target.appendTo('div.manufacturer_list ul').show();
        });
    },5000);
    </script> 
```

生成的 HTML（示例）：

```
 <div class="manufacturer_list">  
    <ul>
       <li style="float:left;width:200px">Item 1</li>
       <li style="float:left;width:200px">Item 2</li>
       <li style="float:left;width:200px">Item 3</li>
       <li style="float:left;width:200px">Item 4</li>
       <li style="float:left;width:200px">Item 5</li>
            ...
            ...
            ...
    </ul>
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:03:15.340

您想将垂直菜单项滚动/旋转到左侧吗？

[http://jsbin.com/welcome/53677](http://jsbin.com/welcome/53677)

```
<!DOCTYPE HTML>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
    var ad_refresh=setInterval(function(){
        var $target=$("div.manufacturer_list ul li:first");
        $target.animate({
            marginLeft: -200,
            opacity: 0,
        }, function(){
            $target.css({
                marginLeft: 200
            }).appendTo('div.manufacturer_list ul').animate({
                marginLeft: 0,
                opacity: 1
            })
        });
    },1000);
    </script>

    <style type="text/css">
        .manufacturer_list {
          width: 800px;
          height: 40px;
          overflow: hidden;
        }
        .manufacturer_list li {
            float:left;
            width: 200px;
        }

    </style>
</head>
<body>
<div class="manufacturer_list">
    <ul>
        <li>foo1</li>
        <li>foo2</li>
        <li>foo3</li>
        <li>foo4</li>
        <li>foo5</li>
    </ul>
</div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:50:53.893

我想你可以用 CSS 中的转换属性来做到这一点。请让我知道它是否适合您

```
transition-property: all;
transition-duration: 0.5s;
-moz-transition-property: all; /* Firefox 4 */
-moz-transition-duration: 0.5s; /* Firefox 4 */
-webkit-transition-property: all; /* Safari and Chrome */
-webkit-transition-duration: 0.5s; /* Safari and Chrome */
-o-transition-property: all; /* Opera */
-o-transition-duration: 0.5s; /* Opera */ 
```

# ruby-on-rails - 是否可以使用 Rails 和 Paperclip 远程上传图像？

> ID：13579413
> 
> 赞同：0
> 
> 时间：2012-11-27T07:34:57.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我想知道是否可以使用 Rails 和回形针 gem 远程提交上传图像表单。

这是一个示例表格

```
 = semantic_form_for @material.images.build, :url => images_path(@article), :html => {:multipart => true, :class => "image-upload-form form-inline"}, :remote => true do |f|
     = f.input :file
     = f.input :credit
     = f.submit "Upload Image" 
```

这是创建操作：

```
 def create
    #some code to handle create
    respond_to do |format|
      format.json
      format.js
      format.html {redirect_to @article}
    end
 end 
```

我可以让提交工作以进行 html 提交，但还不能用于远程提交。所以，我想知道 - 是否可以在 Rails 中远程上传图像？我使用回形针，但如果回形针不可能，我通常也对 rails 图像上传 gem 感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:07:11.027

在 Rails 中还有另一个可供上传的宝石：[carrierwave](https://github.com/jnicklas/carrierwave#uploading-files-from-a-remote-location)。我认为它能够做到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:12:41.240

Try to use `remotipart` gem ( [https://github.com/leppert/remotipart](https://github.com/leppert/remotipart) )

# sql - Oracle 在评估 rownum 之前是否获取所有行？

> ID：13579414
> 
> 赞同：0
> 
> 时间：2012-11-27T07:34:58.763
> 
> 标签：sql, oracle, oracle11g, rownum

我有一张将有数百万条记录的表。

我想确保只要 Oracle 找到第一个匹配项，它就会停止查找。

```
select * from table1
where table1.column1 = 'somevalue' 
  AND table2.column2 = 'somevalue' 
  AND rownum = 1 
```

我听说 Oracle 将获取所有符合 column1 和 column2 条件的行，然后只应用 rownum 过滤器来获取第一行，这违背了目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T08:58:16.067

对查询运行一个解释计划，你会发现你听错了——只要一行被识别为基于查询的其余部分的结果集的一部分，Oracle 就会应用 rownum 谓词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:59:37.397

除非 101% 确定没有其他方法可以达到结果，否则一般**不建议**`/*+ FIRST_ROWS(<integer>) */`使用查询提示（记住关于过早优化的引用非常重要！！！），但为此目的，有一个提示是提示 Oracle 优化执行计划以尽可能快地获取第一条记录。

```
select * /*+ FIRST_ROWS(1) */ from table1
where table1.column1 = 'somevalue' 
  AND table2.column2 = 'somevalue' 
  AND rownum = 1 
```

**推荐阅读：**

*   [甲骨文提示](http://psoug.org/reference/hints.html)

**永远记住：**使用提示并不总是积极的，优化器本身就非常聪明......通过应用提示可以使查询慢得多。此外，如果提示现在有效，例如随着表的增长，将来可能会受到伤害......此外，提示是黑魔法，所以除非你是 DBA，否则你应该尽量避开它们，或者至少寻求经验丰富的 DBA 的帮助。（不是在这个非常简单的情况下，但它可能有助于重新考虑查询本身。）

# maven - 如何将 Jbehave Test 转换为 Maven 目标？

> ID：13579419
> 
> 赞同：0
> 
> 时间：2012-11-27T07:35:18.817
> 
> 标签：maven, bdd, jbehave

我已经用 Jbehave 编写了测试用例，我用 Junit 运行它，现在我需要将它转换为 Maven 目标。

怎么做？

我应该在 pom.xml 中添加哪些行以使其工作？

编辑：

如何将其作为 Maven 目标运行？我应该使用哪些命令？

如果我在 Eclipse 中使用 Junit 单独运行它，我有一个可以正确运行的测试......然后我
在 pom.xml 中添加了以下行

```
<plugin>

<groupId>org.jbehave</groupId>

<artifactId>jbehave-maven-plugin</artifactId>

<executions>
<execution>

  <id>run-scenarios</id>

  <phase>integration-test</phase>

  <configuration>
    <scenarioIncludes>

      <scenarioInclude>**/*Story.java</scenarioInclude>

    </scenarioIncludes>
    <ignoreFailureInStories>true</ignoreFailureInStories>
    <ignoreFailureInView>false</ignoreFailureInView>
    <outputDirectory> ${project.build.directory}/jbehave/view</outputDirectory> 
    </configuration>

  <goals>
    <goal>run-scenarios</goal>

  </goals>
  </execution>

  </executions>
  </plugin> 
```

并尝试通过右键单击 Pom.xml 将 pom.xml 作为“Maven 包”运行……但它没有显示任何内容，甚至没有任何错误/失败……确切地说，没有迹象表明我在 pom.xml 中引用了测试。 ..

我错过了什么？

我怎么知道测试是否运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:04:15.597

如果它只是一个 JUnit，您可以直接使用 Maven，因为 maven-surefire-plugin 将运行单元测试。但是[关于 JBehave 的文档](http://jbehave.org/reference/preview/maven-goals.html)显示了带有 jbehave-maven-plugin 的示例。

# pdf - Automator & AppleScript：如何将笔记和提醒的文本导入为 PDF 和 RTF？

> ID：13579425
> 
> 赞同：0
> 
> 时间：2012-11-27T07:35:45.753
> 
> 标签：pdf, applescript, osx-mountain-lion, rtf, automator

我想将 Notes and Reminders 文档或文本导入并保存为 PDF 和 RTF，保留或保留 Notes 或 Reminders 的格式和背景，但 Notes 没有选项。

我想知道是否可以使用 Automator 和 AppleScript 将笔记和提醒作为 PDF 和 RTF 导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:32:00.883

If you have a Gmail account, you can move your notes to it in Notes and then move them to some other folder in Gmail's web interface. You can then select the notes in Mail and save them as plain text or rich text (but not PDF).

If you just need a list of reminders as plain text, Reminders has support for AppleScript.

```
set output to ""
tell application "Reminders"
    repeat with l in lists
        set output to output & linefeed & "## " & name of l & linefeed & linefeed
        repeat with r in reminders of l
            set l to "- " & name of r
            set output to output & l & linefeed
            -- properties of r
        end repeat
    end repeat
end tell
-- set the clipboard to output 
```

# iphone - 动态命名标签 -ios

> ID：13579443
> 
> 赞同：0
> 
> 时间：2012-11-27T07:36:48.600
> 
> 标签：iphone, html, objective-c, ios, text

我在故事板中动态创建了标签。现在我想命名这些标签。我不知道我该怎么做。这是我的代码：

```
<label opaque="NO" clipsSubviews="YES" userInteractionEnabled="NO" contentMode="left" text="Data Updated on  July 7, 2012" textAlignment="right" lineBreakMode="tailTruncation" minimumFontSize="10" id="ovU-eL-SMN">
                               <rect key="frame" x="313" y="961" width="444" height="30"/>
                               <autoresizingMask key="autoresizingMask" flexibleMinX="YES" flexibleMaxX="YES" flexibleMinY="YES" flexibleMaxY="YES"/>
                               <fontDescription key="fontDescription" type="system" pointSize="16"/>
                               <color key="textColor" red="0.047058823530000002" green="0.0" blue="0.35294117650000001" alpha="1" colorSpace="calibratedRGB"/>
                               <color key="highlightedColor" cocoaTouchSystemColor="darkTextColor"/>
                           </label> 
```

在这里，我在 storyboard 中使用 html 代码。我从数据库中获取值并将这些值作为标签文本。我只需要命名它，并且必须在 appdelegate 中传递值这是 mainstoryboard 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:23:05.457

您可以设置每个标签的标签属性，例如 10 、 11 、 12 ，就像您拥有的标签一样多。

然后

```
for(int i=10 ;i<last_label_Tag;i++)
{
UILabel *lbl=(UILabel*)[self.view viewWithTag:i];
lbl.text=@"Define text for the labels"// or you can use separate Labels without loop.
} 
```

# sql - SQL Server 在触发器中引发错误“触发器中的事务注定失败。批处理已中止。”

> ID：13579445
> 
> 赞同：0
> 
> 时间：2012-11-27T07:36:53.723
> 
> 标签：sql, sql-server, sql-server-2008

```
insert into tuseractivitytrack (TrackIndustryId,tracktype) values(null,'news') 
```

当我向列中插入空值时，它现在给出错误我所做的我已经将子字符串的代码放在 try catch 块中，但是如果生成错误，它仍然会生成错误并且不会插入行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:39:46.947

您需要在触发器而不是事务中使用保存点。你能提供代码吗

[http://msdn.microsoft.com/en-us/library/ms187844(v=SQL.90).aspx](http://msdn.microsoft.com/en-us/library/ms187844(v=SQL.90).aspx)

[TSQL：触发器中的 Try-Catch 事务](https://stackoverflow.com/questions/884334/tsql-try-catch-transaction-in-trigger)

# asp.net-mvc - Asp.net Mvc jquery ajax？

> ID：13579456
> 
> 赞同：1
> 
> 时间：2012-11-27T07:37:34.790
> 
> 标签：asp.net-mvc, jquery, partial-views

我有如下链接。

```
<a href="/Customer/_EditCustomer?CustomerId=2" class="customer_details">Deneme Müşteri 2</a>
<a href="/Customer/_EditCustomer?CustomerId=3" class="customer_details">Deneme Müşteri 2</a> 
```

我想像这样使用 jquery ajax 帖子：

```
$(".customer_details").click(function () {
    $.ajax({
        url: $(this).attr("href"),
        type: 'POST',
        beforeSend: function () {

        },
        complete: function () {

        },
        success: function (result) {
            $("#customer_operations_container").html(result);
        },
        error: function (result) {
            alert("Hata!");
        }
    });   //end ajax
}); 
```

或这个：

```
$(".customer_details").click(function () {
    $("#customer_operations_container").load($(this).attr("href"));
}); 
```

和行动方法

```
public ActionResult _EditCustomer(int CustomerId)
{
    // get customer from db by customer id.
    return PartialView(customer);
} 
```

但我不能做我想做的事。当我单击链接时，PartialView 不会加载。它作为没有父页面的新页面打开。我试过 prevent.Default 但结果是一样的。

如何将 partialView 加载到 div 中？

注意：如果我使用这样的链接，`<a href="#">`它可以工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:09:57.890

问题是当您单击链接时，您已经开始导航到它。所以只需使用`e.preventDefault()`or `return false`from`click`方法来防止默认行为

```
$(".customer_details").click(function (e) {
    e.preventDefault();
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:19:41.570

也许问题出在 actionresult 上，尝试使用 Content 看看是否会改变任何东西。

```
public ActionResult _EditCustomer(int CustomerId)
{
    // get customer from db by customer id.
    return Content(customer.ToString());
} 
```

尝试其中之一...

```
$(".customer_details").click(function (e) {
    e.preventDefault()
    $.ajax({
        url: $(this).attr("href"),
        //I think you want a GET here? Right?
        type: 'GET',
        beforeSend: function () {

        },
        complete: function () {

        },
        success: function (result) {
            $("#customer_operations_container").html(result);
        },
        error: function (result) {
            alert("Hata!");
        }
    });   //end ajax
}); 
```

或者

```
$(".customer_details").click(function (e) {
    e.preventDefault();
    $("#customer_operations_container").load($(this).attr("href"));
}); 
```

或者

```
 $(".customer_details").click(function (e) {
    e.preventDefault();
    $.get($(this).attr("href"), function(data) {
          $("#customer_operations_container").html(data);
    });
}); 
```

如果这些都不起作用，请检查是否有任何 js 错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T08:22:55.467

这应该可以帮助您：

```
 $.ajax({
                url: $(this).attr("href"),
                type: 'POST',
                beforeSend: function () {

                },
                complete: function () {

                },
                success: function (result) {
                    $("#customer_operations_container").html(result);
                },
                error: function (result) {
                    alert("Hata!");
                }
            });   //end ajax
            return false; 
```

您唯一缺少的是防止 A 标签工作。通过返回`false`您的自定义事件被调用并且默认事件不被执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T08:33:06.617

试试这个

```
$(function(){
    $(".customer_details").click(function (e) {
        e.preventDefault();
    });
}); 
```

使用`ready`事件

演示：http: [//jsfiddle.net/hdqDZ/](http://jsfiddle.net/hdqDZ/)

# jquery - 使用旁边的按钮提醒动态输入

> ID：13579460
> 
> 赞同：0
> 
> 时间：2012-11-27T07:37:49.920
> 
> 标签：jquery, ajax

我制作了一个 ajax，它将制作一个输入表，值将来自 php，带有一个活动和活动按钮

```
 var counter_sub = 0 ;

     var html;
              $.ajax({
                        type:'POST',
                        url:'add_subject.php',
                   dataType:'json',
                       data:{'func_numbr':'2'},
                    success:function (data){
                       $.each(data, function(i, item) {

                        html = "<tr>";

                        html += "<td><lable>Subject: </label><input type='text' name='subject["+counter_sub+"]' value='"+data[i].subj_name+"'></td>";
                        html += "<td><input type='button' id='activate' name='active' class='button active' value='Active'> ";
                        html += "<input type='button' id='inactivate' name='active' class='button' value='Inactive'></td>";
                        html += "</tr>";
               $('#curr-elem-tble').append(html);

               counter_sub = counter_sub +1;
              });
                    }     
             }); 
```

我做了一个点击事件，它会提醒它旁边的输入值

```
$('.active').click(function (){

          var prev = $(this).parent().prev().find('input[type=text]');

            var val = $(prev).val();

          alert(val);
     }); 
```

但是当我单击它旁边的活动按钮时没有任何反应

继承人的html

```
 <div id="curr-elem-content">
                  <table id="curr-elem-tble">

                  </table>
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:45:55.970

`click()`将绑定到加载时所有存在的元素。请注意，如果您想使用 click() 动态添加元素，则必须使用 jQuery 的 live() 或 on() 方法...所以将代码更改为

```
$('.active').live('click', function (){

          var prev = $(this).parent().prev().find('input[type=text]');

            var val = $(prev).val();

          alert(val);
     }); 
```

[现场](http://api.jquery.com/live/)看这里

# java - 可以使用 OpenJPA 将一个实体持久化到多个持久化单元吗？

> ID：13579468
> 
> 赞同：3
> 
> 时间：2012-11-27T07:38:28.013
> 
> 标签：java, persistence, openjpa

我正在尝试将一个实体一个接一个地保存到两个单独的持久性单元中。我可以成功地将实体保存到第一个单元，然后将其与该单元分离，重置`@Id`值并保留到第二个单元，但似乎该对象仍然具有可能无法设置的关联 ID？我认为它被称为oid？错误：

```
Caused by: <openjpa-2.2.0-r422266:1244990 nonfatal store error> 
org.apache.openjpa.persistence.EntityNotFoundException: The instance 
of type "class za.co.core.ejb.entities.Address" with oid "4" no longer 
exists in the data store.  This may mean that you deleted the instance 
in a separate transaction, but this context still has a cached version. 
```

我知道我可以创建一个全新的对象并复制我想要的值，但我想在不了解对象本身太多的情况下一般地执行此操作。

我的代码如下所示：

```
 @PersistenceContext(unitName = "puOpenJPA_MSSQL", 
      type = PersistenceContextType.TRANSACTION)
   private EntityManager entityManager;

   @PersistenceContext(unitName = "puOpenJPA_MSSQLaudit", 
      type = PersistenceContextType.TRANSACTION)
   private EntityManager auditManager;

   ...

   entityManager.persist(entity);
   entityManager.detach(entity);

   entity.setId(null); //this sets the @id property of the entity to null
   auditManager.persist(entity); //exception thrown 
```

这是persistence.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <persistence version="2.0"
       xmlns="http://java.sun.com/xml/ns/persistence"         
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
       http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
       <persistence-unit name="puOpenJPA_MSSQL" transaction-type="JTA">
           <provider>
              org.apache.openjpa.persistence.PersistenceProviderImpl
           </provider>
           <jta-data-source>
              java:jboss/datasources/mySqlSandbox
           </jta-data-source>
           <class>
              za.co.core.ejb.entities.AuditableEntity
           </class>
           <class>za.co.core.ejb.entities.Address</class>
           <properties>
               <property name="openjpa.jdbc.SynchronizeMappings" 
                 value="buildSchema(ForeignKeys=true)" />
               <property name="jboss.as.jpa.providerModule" 
                 value="org.apache.openjpa" />
               <property name="openjpa.DynamicEnhancementAgent" 
                 value="false"/>
       </properties>
   </persistence-unit>

   <persistence-unit name="puOpenJPA_MSSQLaudit" transaction-type="JTA">
       <provider>
         org.apache.openjpa.persistence.PersistenceProviderImpl
       </provider>
       <jta-data-source>
          java:jboss/datasources/mySqlSandboxAudit
       </jta-data-source>
       <class>za.co.core.ejb.entities.AuditableEntity</class>
       <class>za.co.core.ejb.entities.Address</class>

       <properties>
           <property name="openjpa.jdbc.SynchronizeMappings" 
             value="buildSchema(ForeignKeys=true)" />
           <property name="jboss.as.jpa.providerModule" 
             value="org.apache.openjpa" />
           <property name="openjpa.DynamicEnhancementAgent" 
             value="false" />
       </properties>
   </persistence-unit>

</persistence> 
```

谢谢，

肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:05:38.153

理论上是的，因为实体是“普通的旧 Java 对象”，但在实践中，为了使所有这些神奇工作，持久性提供程序代理它的一部分，如集合成员。一旦你坚持它，它就不再是“你的”实体——它是提供商簿记的一部分。

如果您想多次保存同一个实体，请多次克隆它并保存每个单独的副本。

# windows - 如何在 Windows 中故意将进程置于不间断状态？

> ID：13579471
> 
> 赞同：1
> 
> 时间：2012-11-27T07:38:47.927
> 
> 标签：windows, debugging

我需要将一个进程置于一个不间断的状态，该状态将保持很长一段时间。

据我了解，我需要找到不允许被中断的系统调用，然后将其停止，使其无限期地保持在无法杀死的状态。

有什么方法可以做到这一点？

# css - 我可以给标题标签一个颜色和不同的字体吗？

> ID：13579477
> 
> 赞同：10
> 
> 时间：2012-11-27T07:39:28.830
> 
> 标签：css, html, tags, title

我想知道是否有办法在页面选项卡中为页面标题提供不同的颜色和字体。就像是：

```
title{ color: red; font: 12px tahoma;} 
```

只是觉得添加到网站会很有趣。我尝试了上述方法，但它在我的 CSS 文件中不起作用。还尝试给它`class="title"`一个 CSS 样式，`.title{ color: red; font: 12px tahoma;}`但这也不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T07:40:36.493

答案是`NO`你不能以任何方式这样做......你不能将任何样式应用于页面标题，顺便说一句你可以闪烁标题

[闪烁的标题](http://www.hscripts.com/scripts/JavaScript/title-blink.php)

有关您正在使用的 CSS 的更多信息：

如果您要声明这样的内容

```
title{ color: red; font: 12px tahoma;} 
```

您不需要定义任何类，因为您针对的是整个文档中只有 1 的特定标题标签

如果你正在使用`.title`你的 CSS 应该是

```
.title{ color: red; font: 12px tahoma;} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-05-10T15:36:40.767

以前的答案是正确的，但是，如果它们是在 unicode 中定义的，您可以获得不同的字体。我不知道如何探索这个，但是，例如，有一个经常写的词`javascript`，然后是我从 reddit.com/r/javascript 源代码中处理的这个标题：`- 注意它们是如何略有不同的。`

 `没有代码分隔符的常规：javascript

没有代码分隔符的 Reddits 标题：

您可以在任何地方复制这些字符，它们看起来会有所不同，因为它们在技术上是_不同的字符。有一个然后有 - 我从我之前粘贴的 javascript 单词中抓取了这个。

我不知道这些角色是从哪里来的。我不知道如何输入它们。我不知道从哪里可以复制粘贴它们。

但这证明了一个有趣的观点——任何表情符号都可以在这些标题中使用，你可以从[https://www.emojicopy.com/复制粘贴](https://www.emojicopy.com/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T08:01:55.740

如果您正在谈论该`<title></title>`部分**，那么不，您不能对其进行样式设置。**

如果您正在谈论页面标题，例如 h1 或 h2 之类的标题标签，那么是的，您可以使用普通的 CSS 样式技术设置这些样式，例如

```
.title { color: #1A1A1A }

<h1 class="title">My Awesome Title</h1> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-14T14:24:23.283

您可以设置标签的样式`<title>`，只需向其添加“display:block”或“display:inline”。

```
title {
    display:block;
    color:red;
    font:12px tahoma, serif;
} 
```

例如，这样它就应该出现在您的页面中，并与浏览器上的选项卡内容相同。

至于页面标题，我已经看到可以以某种方式对其进行样式设置。可能是shadow dom。`

# operating-system - 所有操作系统都支持的压缩格式

> ID：13579487
> 
> 赞同：1
> 
> 时间：2012-11-27T07:40:09.750
> 
> 标签：operating-system, compression, visitors

我将为网站访问者提供一个压缩文件（用于画廊图像）。 **所有操作系统都支持的压缩格式是什么？**

访问者可能有任何操作系统，如 windows、mac、linux 等。我希望所有访问者（没有技术知识）下载压缩文件并查看图像，而无需安装任何额外的压缩工具。

希望我解释了我需要什么。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:46:40.653

几乎所有操作系统都不支持压缩格式。有些操作系统甚至没有磁盘 I/O 或网络 I/O。

话虽如此，使用`.zip`as that 是 Windows 原生支持的，它是最流行的格式，也是其他几种文件格式的核心，包括 Open Document Format 和 Java Archive ( `jar`)。*所有*能够运行 Java 的操作系统在*技术上*都能够解压缩 zip 文件。我还假设几乎所有现代操作系统都支持解压缩内置的 .zip 文件。

如果您也想支持古老的 Unix 机器，请`.tar.gz`在旁边提供`.zip`. 即便如此，古老的 Unix 机器也应该能够解压`.zip`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T07:46:32.123

拉链，放下手。内置支持 OSX 和 Windows XP 及更高版本。Linux 太多样化了，无法做出任何假设。

# javascript - 如何在js中为多个函数存储一个dom var？

> ID：13579490
> 
> 赞同：0
> 
> 时间：2012-11-27T07:40:44.030
> 
> 标签：javascript, mootools

有几个函数必须得到 dom $$('.box')[0] ，我不想让 box 成为一个 glabal var，我不想让 js 每次都寻找 dom . 当用户不运行这些功能时，我不想运行 $$('.box')[0] 。如何存储盒子变量？ ![在此处输入图像描述](../Images/d1de323e514c5dc4ca127eb59808f6b0.png)

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-yui-compressed.js"></script>
<script type="text/javascript">
    /* ------- 
        there are several function will have to get the dom $$('.box')[0] ,
        I don't want to let box to be a glabal var, and I don't want to let js seek the 
        dom every time . and I don't want to run $$('.box')[0] when user not run these functions.
        how to store the box var?
    ------- */
    function a(){
        var box = $$('.box')[0];
        //...
    }
    function b(){
        var box = $$('.box')[0];
        //...
    }
    //...
</script>
<div class="box"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:49:44.070

我不知道这是否有帮助，但是您可以将获取它的方法分离到一个函数中，并且只允许它执行一次。我忘记了从哪里得到这个函数，但是它对于只允许一个函数运行一次很有用（并且每隔一次调用它，只返回值）：

```
function once(func) {
    // Function wrapper to only allow a function, *func*, to be called once.

    var ran = false, ret = undefined;
    return function () {
        if (ran) {
            return ret;
        }
        ran = true;
        ret = func.apply(this, arguments);
        return ret;
    };
} 
```

所以我会像这样使用它：

```
var getBox = once(function () {
    return $$('.box')[0];
}); 
```

并且总是`getBox()`在你想要获取元素时使用。只有第一次调用它时才会搜索 DOM。每次之后，它都会返回盒子。

虽然这可能“有帮助”，但它与创建全局变量一样好，所以我不确定您期望的解决方案是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T07:51:15.403

尝试创建一个伪命名空间，并在其中创建一个应用程序缓存

```
var mySpace = (function(){
    var appcache = {};
    function a(){
        var box = appcache.box0 
                   || (appcache.box0 = $$('.box')[0], appcache.box0);
        //...
    }
    function b(){
        var box = appcache.box0 
                   || (appcache.box0 = $$('.box')[0], appcache.box0);
        //...
    }
    return {a: a, b: b};
}());
// usage: you can call a or b like
mySpace.a();
mySpace.b(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T07:50:46.280

`box`将您的变量声明在函数范围之外

```
var box = "";

function a(){
      if(box != "" || box != undefined || box != 'undefined')
        alert(box +" from a");
      else
        box = $$('.box')[0];       
    }

function b(){
      if(box != "" || box != undefined || box != 'undefined')
        alert(box + " from b");
      else
        box = $$('.box')[0];        
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T16:37:02.060

那么你真的应该使用闭包。

```
(function(scope){

    var box = box document.getElement('.box'); // same as $$()[0], returns first match

    scope.a = function(){
        return box;
    };

    scope.b = function(){
        box;
    };

}(this)); // whatever object, eg, window or a namespace

box; // reference error.
this.a(); // box element object 
```

盒子将保持私有并且是静态的，即它不会再被刷新。

您可以这样做，以便在需要时对其进行引用和缓存一次：

```
(function(scope){
    var box;

    scope.a = function(){
        box = box || document.getElement('.box');
        return box;
    };

    scope.b = function(){
        // alt syntax;
        box || (box = document.getElement('.box'));
        return box;
    };

}(this)); // whatever object, eg, window or a namespace 
```

这样，调用任一方法都会缓存框并使其可用于闭包中的任何方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T07:52:06.070

如果您担心性能，只需给您的盒子一个 id 并使用它调用它

```
var  element = null;

function myFun(){
if(!element)
    element = $('#myId');
//Do logic
} 
```

# c# - 如何创建大量相同形式的实例

> ID：13579502
> 
> 赞同：0
> 
> 时间：2012-11-27T07:42:13.737
> 
> 标签：c#, winforms

我有一个表格，我需要将其复制 200 次，以便他们一起进行处理。我的表单只是对网站进行截图，我想多次克隆它以获得更快的结果。有可能还是最好的方法是什么？我应该继续搜索重复的表格还是应该找到打开 exe 文件 200 次的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:10:14.160

我会创建另一个项目，它只不过是一个循环，它启动了这个过程的 200 个实例。

```
for (int i = 0; i < 200; i++)
     Process.Start(@"C:\path\to\webcrawler.exe"); 
```

如果您需要将一些数据传递给它，请让 webcrawler 接受一些命令行参数并启动一个命令行进程，而不是传递它“webcrawler.exe args”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:02:26.567

如果您的代码使用该`WebBrowser`控件打开页面然后抓取屏幕截图（正如我假设您所做的那样），我建议您多次打开您的 .exe，然后并行运行这些实例。这至少为每个浏览器控件提供了一个单独的进程，因此所有这些实例只会竞争网络资源，而其余的将在单独的进程中。

运行 200 个实例几乎肯定是个坏主意 - 带有控件的 200 个表单将使用大量系统资源。除非你有一台非常强大的计算机，否则你会遇到问题。运行大约 50 个实例可能会更好（您可能必须尝试找到一个最佳位置 - 它可能超过 50 个，我只是在猜测）。

无论如何，这都不是一个优雅的解决方案，但我认为这是针对实用程序，而不是针对最终用户。

# java - Raspberry Pi 的 Keytool 命令

> ID：13579503
> 
> 赞同：1
> 
> 时间：2012-11-27T07:42:24.633
> 
> 标签：java, debian, raspberry-pi, change-password

我正在使用 Raspberry Pi (Debian 3.1.9+ armv6l linux) 和 javaSE 7，我正在尝试通过 keytool 更改我的信任密码，但 keytool 命令不起作用所以你能告诉我如何在这种环境下更改我的信任密码.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T11:17:27.007

我使用适用于 ARM 的 Oracle Java SE 8 进行了测试，它没有任何问题。首先，如果您还没有这样做，请创建一个密钥库：

```
keytool -genkey -keyalg rsa -alias tstkey 
```

设置密钥库后，您可以使用更改密码

```
keytool -storepasswd 
```

如果在修改密码的时候看到如下错误信息，说明之前没有创建过keystore，必须使用`keytool -genkey ...`创建：

```
pi@raspberrypi ~ $ keytool -storepasswd
keytool error: java.lang.Exception: Keystore file does not exist: /home/pi/.keystore 
```

# css - 位置：固定 - Firefox 和 chrome 的区别

> ID：13579505
> 
> 赞同：3
> 
> 时间：2012-11-27T07:42:39.143
> 
> 标签：css, menu, css-position, sticky, skeleton-css-boilerplate

我正在使用[Skeleton 样板](http://www.getskeleton.com/)来创建响应式设计。

这是它分别在 Chrome 和 Firefox 中的外观

铬：[http ://screensnapr.com/v/iaXYDS.jpg](http://screensnapr.com/v/iaXYDS.jpg)

火狐：[http ://screensnapr.com/v/EW6HZM.jpg](http://screensnapr.com/v/EW6HZM.jpg)

如您所见，应该是菜单的灰色条在 chrome 中看起来很好。我想要实现的是一个粘性菜单，它在其父级中相对固定。

这是#menu的CSS（灰色条）

```
#menu {
    z-index: 1000;
    background: #666;
    position: fixed;
} 
```

这是使用 Skeleton 样板的#menu 类。

```
<div id="menu" class="sixteen columns"> 
```

这将为#menu提供以下样式

```
.container .sixteen.columns {
    width: 940px;
}

.container .column, .container .columns {
    float: left;
    display: inline;
    margin-left: 10px;
    margin-right: 10px;
} 
```

您可以通过此网址进行测试

[http://home.piratelufi.com/sticky/](http://home.piratelufi.com/sticky/)

并下载源代码（对不起，杂乱的文件）

[http://home.piratelufi.com/sticky/sticky.zip](http://home.piratelufi.com/sticky/sticky.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:45:33.427

**在**你的 CSS**`display : inline`中**删除****

 ****```
.container .column, .container .columns{
display:inline; // remove this line 
} 
```

因为**你定义** `float:left;`****

# jquery - jquery - 如何删除其他 div 类

> ID：13579513
> 
> 赞同：0
> 
> 时间：2012-11-27T07:43:22.263
> 
> 标签：jquery, removeclass

假设我有 5 个 div 类`.content`在一个 id 的 div 中命名`#container`。我想删除前 4 个，只留下最后一个。我想如何在 jquery 中做到这一点？

```
<div id="container">
    <div class="content"> </div>
    <div class="content"> </div>
    <div class="content"> </div>
    <div class="content"> </div>
    <div class="content"> </div>
</div> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:45:16.473

使用`.slice`：

```
$('#container').children('.content').slice(0, 4).remove() 
```

或在中使用选择器`.children()`：

```
​$('#container').children('.content:lt(4)').remove()​​​​​​​​​​​​​​ 
```

**更新**

要删除除最后一个孩子以外的所有孩子：

```
$('#container').children('.content').slice(0, -1).remove() 
```

using`slice()`的优点是您可以通过使用`(0, -2)`作为范围轻松选择最后两个孩子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T07:47:33.053

您也可以使用适当的选择器。

```
$(".content:not(:last-child)").remove(); 
```

意思`.content`是除了父母的最后一个孩子之外的每个div。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:40:57.650

我相信这是最好的方法。

> $(".content:not(:last-child)").removeClass("content");

# c# - 在单元测试中使用 Moq 模拟经过身份验证的用户

> ID：13579519
> 
> 赞同：10
> 
> 时间：2012-11-27T07:43:53.997
> 
> 标签：c#, asp.net-mvc, unit-testing, moq

我们如何使用 Moq 框架模拟经过身份验证的用户。使用表单身份验证。

我需要为以下操作编写单元测试

```
public PartialViewResult MyGoals()
{
    int userid = ((SocialGoalUser)(User.Identity)).UserId;
    var Goals = goalService.GetMyGoals(userid);
    return PartialView("_MyGoalsView", Goals);
} 
```

我需要在这里模拟 userid 的值

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-27T10:34:15.023

我用过类似的东西，也许它可以帮助你：

```
var controllerContext = new Mock<ControllerContext>();
var principal = new Moq.Mock<IPrincipal>();
principal.Setup(p => p.IsInRole("Administrator")).Returns(true);
principal.SetupGet(x => x.Identity.Name).Returns(userName);
controllerContext.SetupGet(x => x.HttpContext.User).Returns(principal.Object);
controller.ControllerContext = controllerContext.Object; 
```

# pca - 用 PCA 决定降维

> ID：13579526
> 
> 赞同：0
> 
> 时间：2012-11-27T07:44:31.873
> 
> 标签：pca, dimensionality-reduction

我有二维数据（我有一个零均值归一化数据）。我知道它的协方差矩阵、特征值和特征向量。我想决定是否将维度减少到 1（我使用主成分分析，PCA）。我该如何决定？有什么方法论吗？

我在找…… 就像如果你看这个比率，如果这个比率很高，那么继续降维是合乎逻辑的。

**PS 1：** PoV（变化比例）是否代表它？

**PS 2：**这是一个答案：[https](https://stats.stackexchange.com/questions/22569/pca-and-proportion-of-variance-explained) ://stats.stackexchange.com/questions/22569/pca-and-proportion-of-variance-explained它是测试它的标准吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T20:03:44.513

PoV（变化比例）表示相对于使用所有数据，数据的信息量将保留多少。它***可以***用于该目的。如果 POV 高，则丢失的信息会更少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-14T08:34:16.080

您想按大小对特征值进行排序，然后选择最高的 1 或 2 个值。可以考虑排除具有非常小的相对值的特征值。然后，您可以转换数据值并仅使用前 1 或 2 个特征向量，您将获得用于绘制结果的维度。这将给出 PCA 拆分的可视化表示。另请查看 scikit-learn 以了解有关 PCA 的更多信息。精度、召回率、F1 分数会告诉你它的效果如何

来自[http://sebastianraschka.com/Articles/2014_pca_step_by_step.html](http://sebastianraschka.com/Articles/2014_pca_step_by_step.html) ...

第 1 步：3D 示例

“对于我们的简单示例，我们将 3 维特征空间缩减为 2 维特征子空间，我们将两个具有最高特征值的特征向量组合起来构建我们的 d×kd×k 维特征向量矩阵 WW。

```
matrix_w = np.hstack((eig_pairs[0][1].reshape(3,1),
                  eig_pairs[1][1].reshape(3,1)))
print('Matrix W:\n', matrix_w)

>>>Matrix W:
[[-0.49210223 -0.64670286]
[-0.47927902 -0.35756937]
[-0.72672348  0.67373552]]" 
```

第 2 步：3D 示例

" 在最后一步中，我们使用刚刚计算的 2×32×3 维矩阵 WW 通过方程 y=W^T×x 将我们的样本转换到新的子空间

```
transformed = matrix_w.T.dot(all_samples)
assert transformed.shape == (2,40), "The matrix is not 2x40 dimensional." 
```

# ios - 仅限 iPad 应用的 info.plist 设置

> ID：13579529
> 
> 赞同：6
> 
> 时间：2012-11-27T07:44:31.943
> 
> 标签：ios, ipad, info.plist

我想通过 iTunes 提交仅限 iPad 的应用程序。我已经进行了以下配置更改。

*   在摘要下，我设置了`Active Target Device : iPad`
*   在 Build Settings 下，Valid Architectures 设置为`armv7`

虽然，这将确保构建不会在非 iPad 设备上运行，但我还想确保在 App Store 结果中，用户不会在 iPhone 应用程序下看到此应用程序。

在阅读 iOS 开发者门户文档时，Apple 提到您必须包含密钥`UIRequiredDeviceCapabilities`以指示允许在哪些设备上运行此应用程序。

1.  UIRequiredDeviceCapabilities 是确保我的应用只出现在 iPad 结果中的正确方法吗？
2.  它的值应该设置为多少？手臂v7？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:55:12.390

如果您设置`Active Target Device : iPad`iPhone 用户将不会在设备上的 App Store 中看到该应用程序。

由于 iPhone/iPod Touch 无法运行 iPad 应用程序，而 iPad 可以运行 iPhone 应用程序，因此您的应用程序不会出现在设备上的 App Store 中。

# c# - NetworkInterface.GetIPv4Statistics().BytesReceived - 它返回什么？

> ID：13579530
> 
> 赞同：3
> 
> 时间：2012-11-27T07:44:44.347
> 
> 标签：c#, .net, networking, ip

该特定字段返回什么？我想要每秒接收的字节数。我应该依靠这个吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T07:58:55.773

我认为你可以这样使用它：

```
long beginValue = NetworkInterface.GetIPv4Statistics().BytesReceived;
DateTime beginTime = DateTime.Now;

// do something

long endValue = NetworkInterface.GetIPv4Statistics().BytesReceived;
DateTime endTime = DateTime.Now;

long recievedBytes = endValue - beginValue;
double totalSeconds = (endTime - beginTime).TotalSeconds;

var bytesPerSecond = recievedBytes / totalSeconds; 
```

定期更新的代码片段

```
private object _lockObj;
private long bytesPerSecond = 0;
private Timer _refreshTimer = new Timer { Interval = 1000 };

// do in ctor or some init method
_refreshTimer.Tick += _refreshTimer_Tick;
_refreshTimer.Enabled = true;

private void _refreshTimer_Tick(object sender, EventArgs e)
{
  ThreadPool.QueueUserItem(callback => 
  {
    long beginValue = NetworkInterface.GetIPv4Statistics().BytesReceived;
    DateTime beginTime = DateTime.Now;

    Thread.Sleep(1000);

    long endValue = NetworkInterface.GetIPv4Statistics().BytesReceived;
    DateTime endTime = DateTime.Now;

    long recievedBytes = endValue - beginValue;
    double totalSeconds = (endTime - beginTime).TotalSeconds;

    lock(_lockObj)
    {
      bytesPerSecond = recievedBytes / totalSeconds;
    }
  });

} 
```

您可以将此与一些跟踪相结合，以记录一段时间内收到的字节数

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T07:53:55.383

```
NetworkInterface.GetIPv4Statistics().BytesReceived 
```

将显示给定接口接收到的总字节数。

我认为您不能完全使用它来获取每秒接收的字节数。

检查[这个](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ipv4interfacestatistics.bytesreceived.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:26:33.263

[http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ipv4interfacestatistics.bytesreceived.aspx](http://msdn.microsoft.com/en-us/library/system.net.networkinformation.ipv4interfacestatistics.bytesreceived.aspx)

根据 MSDN（正如其他人也指出的那样），它*获取在接口上接收到的字节数。*

例如，如果网络接口断开并重新连接（例如，网络电缆被拔出或无线连接断开），它将如何表现。

如果您想要一种更可靠的方法来捕获数据包、过滤它们、剖析它们并只计算重要的数据包，那么请查看[http://sourceforge.net/projects/sharppcap/](http://sourceforge.net/projects/sharppcap/)

# php - AJAX 在提交时淡出

> ID：13579533
> 
> 赞同：0
> 
> 时间：2012-11-27T07:44:55.843
> 
> 标签：php, javascript, jquery, ajax

我有一个关于这个淡出 div 的快速问题。我使用facebox，提交后，它显示一个错误，它会显示这个：

[http://puu.sh/1uPnF](http://puu.sh/1uPnF)

但是，在他们收到该消息后，我希望它消失。在我的提交表单的 AJAX 处理程序上，这是 PHP 代码：

```
<?php
require_once('....');

$form_name = $_GET['form_name'];
$form_comment = $_GET['form_comment'];
$date = date('Y-n-j');
$ip = $_SERVER['REMOTE_ADDR'];

 if($form_name == '') {
    echo("<div class='alert alert-error-x'>Don't forget to enter a name, as we need to identify who's commenting on this article!</div>");

} else if($form_comment == '') {
    echo("<div class='alert alert-error-x'>Please do not leave the comment field blank, we want to know what you're saying!</div>");

} else {
mysql_query("INSERT INTO comment (id, articleid, name, comment, date, ip) VALUES (NULL,'{$_GET['id']}','{$form_name}','{$form_comment}','{$date}','{$ip}')");

    // output comment
    echo "<div class='alert alert-success-x'>Posted by <strong>$form_name</strong> on     <strong>{$date}</strong>$form_comment</div>";
}

?> 
```

这是 article.php 上将提交的内容的输出：

```
 <?php

$amount_get = mysql_query("SELECT * FROM comment WHERE articleid='" . mysql_real_escape_string($_GET['id']) . "'"); $comments = mysql_num_rows($amount_get);

$grab = mysql_query("SELECT * FROM comment WHERE articleid='" . mysql_real_escape_string($_GET['id']) . "'");

if (mysql_num_rows($grab)==0) {

    echo "<div class='alert alert-note-x'>Sorry, it looks like their are no comments to be displayed, check back later!</div>";
}

    while($row = mysql_fetch_array($grab)){

    ?>

 <div id="new_comment"></div>
 <div class="article-comment">
 Posted by <b><?php echo $row['name'] ?></b> on <b><?php echo $row['date'] ?></b>  
 <br />  
 <?php echo $row['comment'] ?>
 </div>
   <?php } ?>         
</div>
</body>
</html> 
```

现在我尝试在 core.js 文件中添加以下代码，该文件位于我的网站 krissales.com

```
$(window).bind("load", function() { 
$('#new_comment').fadeOut(4000);
}); 
```

然而它没有用。如果您想测试演示，请访问：[http](http://www.krissales.com/#/media/30.This-is-a-new-article-for-Testing) ://www.krissales.com/#/media/30.This-is-a-new-article-for-Testing ！

请问我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:03:34.263

如果您使用 AJAX，我建议您使用 jquery 的`ajax`方法 ( [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) ) 来调用您的 PHP 文件。

然后，使用该`success`方法的回调函数来显示正确的响应。然后可以通过淡出 div 来隐藏响应（如果需要，可以延迟）。

```
if ($('#new_comment').length > 0)
{
    $('#new_comment').delay(4000).fadeOut();
} 
```

您现在正尝试在窗口加载时淡出消息，但由于您使用的是 AJAX，因此不会发生页面重新加载。

希望这对你有帮助！

# java - 在struts ActionError验证（）方法中转发到输入页面失败

> ID：13579535
> 
> 赞同：2
> 
> 时间：2012-11-27T07:45:13.260
> 
> 标签：java, struts, web-application-design

## 在 struts-config.xml 中：

```
<action path="/PackageUpdateFilesSubmit"
    type="com.biscom.fds.action.PackageAction" scope="request"
    name="packageForm" validate="true" 
    input="/packages/packageUpdateFiles.jsp" parameter="method"
    roles="SENDER">

    <forward name="success" path="/PackageView.do?method=view" />
    <forward name="warning" path=".fdsApp.message" />
    <forward name="failure" path=".fdsApp.message" />
</action> 
```

## 在 PackageForm.java 中（扩展 ActionForm 类）

```
@Override
    public ActionErrors validate(ActionMapping mapping, HttpServletRequest request) {
        // TODO Auto-generated method stub

        ActionErrors errors = super.validate(mapping, request); 
        // Only need crossfield validations here 
        if (filename3 == null) { 
            errors.add(ActionMessages.GLOBAL_MESSAGE, new  
                  ActionMessage("page.externalAuthSource.list.error.empty"));//add("error",        
                  new ActionError("error.custform")); 
        } 
        return errors;
    } 
```

## 我期望什么：

发生错误时重定向到“/packages/pUF.jsp”页面。

## 怎么了：

发生 HTTP 错误 500。

注意：在我的控制器中，属性“inputForward”的设置值为 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T12:05:48.227

你是对的，直到表单验证控制永远不会进入 Action 类。所以这个问题与 Action 类没有任何关系。我可以建议只是检查您的资源包文件/属性文件，以确保您将相关的错误消息值放在那里，并且您正在将 ActionForm 类扩展到 ValidatorActionForm/DynaValidatorActionForm 类。

# iphone - xcode：连续生成沿一个方向移动的图像

> ID：13579539
> 
> 赞同：0
> 
> 时间：2012-11-27T07:45:23.783
> 
> 标签：iphone, xcode

我制作了一个程序，可以在屏幕顶部的随机 x 坐标处生成图像。然后图像下降到底部。但是，我想每隔几秒钟就不断地生成新的图像（同一图像的），这样就好像同一图像的这些副本不断地从顶部“下雨”。（注意：最终，随着我继续开发这个应用程序，我需要随时回忆每个图像的位置，所以我相信我需要每个生成的图像成为数组的一部分。我也相信我必须移动每个图像一步一步，所以我不能依赖动画）。

问题是：如何让所有这些代码每 0.5 秒重复一次，以便每个新生成的图像都有自己的 moveObject 计时器。就像雨滴从高处落下一样。

```
@implementation ViewController {

    UIImageView *_myImage;

}

- (void)viewDidLoad
{
    srand(time(NULL));e
    int random_x_coordinate = rand() % 286;
    CGRect myImageRect = CGRectMake(random_x_coordinate, 0.0f, 40.0f, 40.0f);
    UIImageView *myImage = [[UIImageView alloc] initWithFrame:myImageRect];
    [myImage setImage:[UIImage imageNamed:@"flake.png"]];
    myImage.opaque = YES;
    [self.view addSubview:myImage];
    _myImage = myImage;

    //FALLING BIRDS TIMER
    moveObjectTimer = [NSTimer scheduledTimerWithTimeInterval:0.001 target:self selector:@selector(moveObject) userInfo:nil repeats:YES];

}
    //FALLING BIRDS MOVER
-(void) moveObject {        // + means down and the number next to it is how many pixels y moves down per each tick of the TIMER above
        _myImage.center = CGPointMake(_myImage.center.x, _myImage.center.y +1);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:11:23.253

你有不同的解决方案：

*   只有 1 个计时器，您可以在其中更新 UIImageView 数组（我更喜欢这个）
*   子类 Imageview 并将计时器放在类中，以便每个人都有自己的计时器
*   也许您可以使用`[UIView animateWithDuration...`而不是计时器，但不确定是否可以同时使用多个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:16:08.230

> 问题是：如何让所有这些代码每 0.5 秒重复一次，以便每个新生成的图像都有自己的 moveObject 计时器。

看看 Core Animation 的粒子效果——它们不仅仅适用于烟、雾和火。通过设置粒子发射器并使用图像创建粒子单元，您可以让 Core Animation 负责整个操作。我没有看到太多关于该主题的官方文档，但您可以阅读[CAEmitterLayer](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CAEmitterLayer_class/Reference/Reference.html#//apple_ref/doc/uid/TP40008315)的参考页面以了解其工作原理，然后查看 raywenderlich.com 上[的教程](http://www.raywenderlich.com/6063/uikit-particle-systems-in-ios-5-tutorial)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:23:47.063

将其`function`用于每个`raindrop` `object`.Just 提供`point`给`move`：

```
-(void)raindropAnimation:(CGPoint)dropPoint
{
  raindrop.frame = CGRectMake(dropPoint.x,0,raindrop.frame.size.width,raindrop.frame.size.height) //here y is 0 ie topmost
  [UIView animateWithDuration:2.0 
                      delay:0.0 
                    options:UIViewAnimationCurveEaseInOut 
                 animations:^ {
                      raindrop.frame = CGRectMake(dropPoint.x,dropPoint.y,raindrop.frame.size.width,raindrop.frame.size.height) //will move to point
                 } 
                 completion:^(BOOL finished) {
                     [self perfromSelector:@selector(raindropAnimation:CGPointMake(xnewpointhere,ynewpointhere))];
                 }]; 
```

# python - 动态颜色设置按钮

> ID：13579544
> 
> 赞同：0
> 
> 时间：2012-11-27T07:45:47.433
> 
> 标签：python, user-interface, python-2.7, pyqt, pyqt4

如何动态创建按钮以设置 Windows 游戏 Sapper 中的蓝色？这是代码的一部分

```
 self.buttons = []
    for i in xrange(self.HeightOfField):
        l=[]
        for j in xrange(self.WidthOfField):
            b=QtGui.QPushButton()
            b.setFixedSize(40,30)
            l.append(b)
            self.gridLayout.addWidget(b, i, j)
            self.gridLayout.setColumnMinimumWidth(j, 40)
        self.buttons.append(l)
        self.gridLayout.setRowMinimumHeight(i, 26) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:31:37.613

对我来说，设置按钮颜色的最简单方法是使用[样式表](http://doc.qt.digia.com/qt/stylesheet-syntax.html)，使用[`.setStyleSheet`](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qwidget.html#setStyleSheet).

```
b.setStyleSheet('background-color: blue;') 
```

您可以使用 RGB 颜色，但使用 HTML 关键字名称更容易。看看W3C 的[这张表](http://www.w3.org/TR/SVG/types.html#ColorKeywords)。

# ruby - 扫描并拆分字符串

> ID：13579545
> 
> 赞同：2
> 
> 时间：2012-11-27T07:45:49.613
> 
> 标签：ruby

如何从字符串中获取扫描和拆分结果 - 正匹配和负匹配？相当于

```
def scan_and_split(string, regexp)
  string.split(regexp).zip(string.scan(regexp))
end

scan_and_split("{T}: Add {W} or {U} to your mana pool. Adarkar Wastes deals 1 damage to you.", /\{[^ ]+\}/) 
```

预期输出：

```
[["", "{T}"], [": Add ", "{W}"], [" or ", "{U}"], [" to your mana pool. Adarkar Wastes deals 1 damage to you.", nil]] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:52:13.637

`split`与捕获一起使用。

```
"ababab".split(/(a)/)
# => ["", "a", "b", "a", "b", "a", "b"]

"{T}: Add {W} or {U} to your mana pool. Adarkar Wastes deals 1 damage to you.".split(/(\{[^ ]+\})/)
# => ["", "{T}", ": Add ", "{W}", " or ", "{U}", " to your mana pool. Adarkar Wastes deals 1 damage to you."] 
```

如果您想要每个`split`/的子数组`match`，则应用于`each_slice(2).to_a`结果。

```
"ababab".split(/(a)/).each_slice(2).to_a
# => [["", "a"], ["b", "a"], ["b", "a"], ["b"]]

"{T}: Add {W} or {U} to your mana pool. Adarkar Wastes deals 1 damage to you.".split(/(\{[^ ]+\})/).each_slice(2).to_a
# => [["", "{T}"], [": Add ", "{W}"], [" or ", "{U}"], [" to your mana pool. Adarkar Wastes deals 1 damage to you."]] 
```

# vba - 拆分（“文本”，“+”或“-”，2）

> ID：13579546
> 
> 赞同：3
> 
> 时间：2012-11-27T07:45:50.260
> 
> 标签：vba, split

我需要用 Visual Basic 分隔一个字符串。

缺点是我有不止一个分隔符。

一个是`"+"`，另一个是`"-"`。

我需要代码来检查字符串是否`"+"`是字符串中的那个然后使用`"+"`

如果`"-"`在字符串中，则`"-"`用作分隔符。

我可以这样做吗？

例如：`Split( "TEXT" , "+" OR "-" ,2)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:13:08.327

最简单的方法是替换第二个字符，然后只拆分一个：

```
Dim txt As String, updTxt As String
Dim splitTxt() As String

updTxt = Replace(txt, "-", "+")

splitTxt = Split(updTxt, "+") 
```

或更复杂。下面返回拆分后的部分集合。如果您需要，允许您进一步自定义返回数据：

```
Dim txt As String, outerTxt As Variant, innerTxt As Variant
Dim splitOuterTxt() As String
Dim allData As New Collection

    txt = "test + test - testing + ewfwefwef - fwefwefwf"

    splitOuterTxt = Split(txt, "+")

    For Each outerTxt In splitOuterTxt

        For Each innerTxt In Split(outerTxt, "-")

            allData.Add innerTxt

        Next innerTxt

    Next outerTxt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T07:57:49.067

你所描述的似乎很简单。只需检查文本是否包含 a`+`来决定您应该使用哪个分隔符。

试试这个代码：

```
dim separator as String

separator = Iif(InStr(txt, "+") <> 0, "+", "-")

splitResult = Split(txt, separator, 2) 
```

该代码假定您要拆分的文本在`txt`变量中。

*请注意，我这里没有 VBA，也无法实际运行代码。如果您有任何错误，请告诉我。*

# memory-management - lucene：如何管理内存分配？

> ID：13579550
> 
> 赞同：0
> 
> 时间：2012-11-27T07:46:13.243
> 
> 标签：memory-management, lucene

我是 lucene 的新手。我对lucene的管理内存有些疑惑。

*   Lucene 是否需要用户确定它可以使用的内存大小？
*   或者如果不需要，如何在lucene中根据机器内存大小自动管理内存分配？

呃，这个问题不限于lucene，大家可以告诉我一些关于内存管理的一般建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T22:16:37.193

两个有趣的、与内存相关的 Lucene 项目：

1.  [MMapDirectory](http://blog.thetaphi.de/2012/07/use-lucenes-mmapdirectory-on-64bit.html) - 使用操作系统缓存将部分 lucene 索引加载到内存中，以便更快地查找。
2.  [DEFAULT_RAM_BUFFER_SIZE_MB](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/index/IndexWriterConfig.html#DEFAULT_RAM_BUFFER_SIZE_MB) - 设置内存缓冲区大小，在存储到磁盘之前，写入索引时 - 较大的值通常意味着更好的写入性能（如果您受 I/O 限制）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T17:39:22.453

看一下 IndexWriter 配置 API： http: [//lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/index/IndexWriterConfig.html](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/index/IndexWriterConfig.html)

设置java堆空间当然有帮助，见： [http ://rimuhosting.com/knowledgebase/linux/java/-Xmx-settings](http://rimuhosting.com/knowledgebase/linux/java/-Xmx-settings)

然后您管理索引的实践和政策将产生影响。减少非常昂贵的操作是有帮助的，例如优化，或者大批量的插入或删除等。

如果您真的在寻找一般管理内存的方法，我会引导您访问以下资源： [https](https://stackoverflow.com/faq#dontask) ://stackoverflow.com/faq#dontask （这里只是[整](http://www.buy.com/prod/memory-management/31027492.html?listingId=-1&s_kwcid=) [本书](https://www.google.com/shopping/product/3174967917264424199?q=memory%20management%20book&hl=en&bav=on.2,or.r_gc.r_pw.r_qf.&bpcl=38897761&biw=1044&bih=854&sa=X&ei=d_q0UPuhH8q5igKSo4CYDw&ved=0CFkQ8wIwAQ)的几个例子）

# java - 在 JFrame 中从一个地方移动到另一个地方的标签或任何组件

> ID：13579552
> 
> 赞同：1
> 
> 时间：2012-11-27T07:46:33.793
> 
> 标签：java, swing, jframe, jlabel, event-dispatching

我正在尝试使用`setLocation`方法将标签/图标和按钮从一个地方移动到另一个地方，但由于某种原因，对象正在移动但没有运动。因此，如果有人知道如何做这件事，请告诉我。

如何在 JFrame 中创建从一个地方移动到另一个地方的标签或任何组件？

下面我展示了代码：

```
jl = JLabel
jf = JFrame

    public void actionPerformed(ActionEvent e) 
    {
        if(e.getSource()==jbtn)
        {
            for(int i=0;i<=30;i++)
            {
                jl.setLocation(100,100+i);
                jl.repaint();
                jf.repaint();
                try
                {
                    Thread.sleep(50);
                }
                catch(Exception ae)
                {
                    ae.printStackTrace();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T07:57:57.157

本质上，您正在阻塞负责绘制更新的线程（事件调度线程）

您可能想阅读[java timer change delay with button](https://stackoverflow.com/questions/13577707/java-timer-change-delay-with-button/13577984#13577984)和[是否显示 Java GUI 需要一些特殊处理？](https://stackoverflow.com/questions/13577451/does-displaying-java-gui-requires-some-special-treatment/13577506#13577506)它展示了摇摆动画并讨论了 EDT 的重要性。

# extjs - 如何制作动态表格

> ID：13579554
> 
> 赞同：4
> 
> 时间：2012-11-27T07:46:45.130
> 
> 标签：extjs, extjs4.1

我想保存数据（结果），但三个字段具有相同的名称。当一个被启用时，其他人被禁用。这个对我有用。但问题是，当我从网格中编辑它时，两个 ,, 添加了值............ [在 extjs 4 mvc 中]

## 这是我的看法

```
Ext.define('Ext4Example.view.employee.Education' ,{
extend: 'Ext.window.Window',
alias : 'widget.education',
modal:true,
autoShow: true,
bodyPadding: 5,

initComponent: function () {

this.items = [
            {
            xtype: 'form',
            id:'form',
            bodyStyle: {
                        background: 'none',
                        padding: '10px',
                        border: '0'
                       },
            items: [
                {
                    xtype: 'fieldcontainer',
                    items: [                

                        {
                            xtype: 'combobox',
                            fieldLabel: 'Result Type',
                            emptyText:'Select Result Type',
                            displayField:'type',
                            valueField:'id',
                            store: 'TypeStocks',
                            name: 'type',
                            id:'type',
                            width: 265,                                
                            allowBlank:false,
                            anchor:'95%',
                            listeners : {
                                'select': {
                                    fn: function (combo, value) {
                                    var value=combo.getValue();
                                    if(value =='1'){
                                    Ext.getCmp('cgpa').hide();
                                    Ext.getCmp('jak').hide();
                                    Ext.getCmp('sc').hide(); 
                                    Ext.getCmp('range').hide();
                                    Ext.getCmp('range').disable();
                                    Ext.getCmp('cgpa').disable();
                                    Ext.getCmp('division').enable();
                                    Ext.getCmp('division').show();
                                      }
                                    else if(value =='2'){
                                    Ext.getCmp('division').disable();
                                    Ext.getCmp('division').hide();
                                    Ext.getCmp('cgpa').enable();
                                    Ext.getCmp('cgpa').show(); 
                                    Ext.getCmp('jak').show(); 
                                    Ext.getCmp('sc').show(); 
                                    Ext.getCmp('range').enable();
                                          Ext.getCmp('range').show();                                                                              
                                    }
                                  }
                              }
                           }
                        },
                        {
                            xtype:'combobox',
                            fieldLabel: 'Division',
                            name: 'result',
                            emptyText:'Select Result',                            
                            store: Division,
                            id:'division',
                            width: 265,
                            anchor:'95%',
                            allowBlank:false
                        },
                        {
                        xtype:'fieldcontainer',
                        layout: 'hbox',
                        items:[  
                          {
                            xtype:'label',
                            text:'Score',
                            hidden: true,
                            id:'sc'
                           },
                         {
                            xtype:'textfield',
                            name: 'result',
                            hidden: true,
                            width: 68,
                            margin:'0 0 0 75',
                            id:'cgpa',
                            anchor:'95%',
                            emptyText:'Score',
                            vtype : 'radius',
                            allowBlank:false
                        },
                        {
                            xtype:'textfield',
                            name: 'result',
                            hidden: true,
                            width: 68,
                            margin:'0 0 0 75',
                            id:'gpa',
                            anchor:'95%',
                            emptyText:'Score',
                            vtype : 'radiuss',
                            allowBlank:false
                        },
                           {
                           xtype:'label',
                           text:'of',
                           hidden: true,
                           margin:'0 5 0 5',
                           id:'jak'
                           },
                        {
                            xtype: 'combobox',
                            emptyText:'Range',
                            store: range,
                            name: 'range',
                            id: 'range',
                            margin:'0 5 0 5',
                            width: 65,
                            hidden: true,
                            anchor:'95%',
                            allowBlank:false,
                            listeners : {
                                'select': {
                                    fn: function (combo, value) {
                                    var value=combo.getValue();
                                 if(value =='5.00'){ 
                                    Ext.getCmp('outOf').setValue(1);
                                    Ext.getCmp('cgpa').enable();
                                    Ext.getCmp('cgpa').show();
                                    Ext.getCmp('gpa').setValue('');
                                    Ext.getCmp('gpa').disable();
                                    Ext.getCmp('gpa').hide();
                                  }
                                  else if(value =='4.00'){
                                    Ext.getCmp('outOf').setValue(0);
                                    Ext.getCmp('gpa').enable();
                                    Ext.getCmp('gpa').show();
                                    Ext.getCmp('cgpa').setValue('');
                                    Ext.getCmp('cgpa').disable();
                                    Ext.getCmp('cgpa').hide();                                       
                                    }          
                               }
                            }
                          }
                        }]                            
                        },

                        {
                     xtype: 'button',
                     text: 'SAVE',                                                   
                     iconCls: 'savee',
                     handler: function () {                                  
                            var form = this.up('form').getForm(),
                            values = form.getValues(); 

                      var education = Ext.create('Ext4Example.model.EducationModel',values);
                      // if (form.isValid()) {  
                          education.save({
                          success: function(education) {
                              var store = Ext.data.StoreManager.get('EducationStocks');
                              store = !store ? Ext.create("EducationStocks") : store;                                   
                              store.load();

                          },
                          failure: function(education){                                 
                                Ext.Msg.alert('Failed', 'Data already exits');
                          }

                           });
                      //  }

                    }
                },
                {
                     xtype: 'button',
                     text: 'Cancel',
                     margin:'0 0 0 5',
                     scope: this,
                     handler: this.close
                }]  
         }]

}];
    this.callParent(arguments);
} 
```

});

```
 --------------- 
```

## 模型

```
Ext.define('Ext4Example.model.EducationModel', {
extend: 'Ext.data.Model',
idProperty: 'id',
fields: [                   
    {name: 'result', mapping:'result', type: 'string'} ,
    {name: 'outOf', mapping:'outOf', type: 'int'} 

],
 proxy: {
    type: 'ajax',
    noCache: false,
    api: {
        create  : '${createLink(controller:'education', action: 'create')}'
    },
    actionMethods: {
        create : 'POST'            
    },        
    reader: {
        type: 'json',
        root: 'data',
        totalProperty   : 'total',
        successProperty : 'success',
        messageProperty : 'message',
        implicitIncludes: true
    },
    writer: {
      type: 'json',
      root: 'data',
      writeAllFields: true 
    },
    simpleSortMode: true
},
belongsTo: [{model:'Ext4Example.model.ExamModel', name:'exams'}] 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T09:11:39.507

如果多个字段中的两个具有相同的名称，则在提交表单时，将具有相同名称的字段组合成一个数组然后提交。因此，如果您检查提交给服务器的参数，它们将是：

```
type : typeValue
result : [resultFromCombo, resultFromTextField1, resultFromTextField2]
range : rangeValue 
```

所以在服务器中，我认为您是直接将结果数组转换为字符串并保存。在将结果数组转换为字符串时，它将转换为`resultFromCombo, resultFromTextField1, resultFromTextField2`. 因此，您在网格中得到了 2 个逗号。

# android - 用于列表视图的 Android SearchView 过滤器

> ID：13579559
> 
> 赞同：4
> 
> 时间：2012-11-27T07:46:55.700
> 
> 标签：android, android-listview, actionbarsherlock, searchview

我有一个活动，顶部有一个带有搜索视图的操作栏。此外，我正在使用自定义列表视图，并希望从在搜索视图中输入的关键词中进行过滤，应该与列表视图项中的特定文本视图相关联。

![在此处输入图像描述](../Images/25882d1bc89acbd2382584ebe713caf3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T05:34:09.360

在侦听器的 onQueryTextChange(String Text) 方法中使用： adapter.getFilter().filter(Text.toString()); 并在您的 BaseAdapter 类中实现您的过滤器。这是示例代码：

```
 @Override
        public Filter getFilter() 
        {
             return filter;
        }

     private GameFilter filter;

     private class GameFilter extends Filter 
     {
         public GameFilter() { }
            @Override
                  protected FilterResults performFiltering(CharSequence constraint) {
                       FilterResults oReturn = new FilterResults();
                      ArrayList<ItemDetails> results = new ArrayList<ItemDetails>();
                    if (orig == null)
                      orig = itemDetailsrrayList;                    
                      if (constraint != null)
                   {
                        if (orig != null && orig.size() > 0) {
                          for (ItemDetails g : orig) {
                                  if (g.getName().toLowerCase().contains(constraint.toString().toLowerCase()))
                                 results.add(g);
                        }
                   }
                       oReturn.values = results;
                    }
                     return oReturn;
                  }

                 @SuppressWarnings("unchecked")
                 @Override
                protected void publishResults(CharSequence constraint, FilterResults results)
                 {
                     itemDetailsrrayList = (ArrayList<ItemDetails>)results.values;
                   notifyDataSetChanged();
                 }
            } 
```

# android - 通过谷歌推送通知接收来自额外密钥的旧值

> ID：13579560
> 
> 赞同：0
> 
> 时间：2012-11-27T07:47:10.527
> 
> 标签：android, push-notification, google-cloud-messaging

我在接收谷歌推送通知时面临以下问题。我正在从 PHP 提交以下通知，并添加一个标签 data.notificationID 以在 android GCMBaseIntentService 中接收唯一 ID。

```
 $data = array(
            'registration_id' => $deviceToken,
            'collapse_key' => $collapseKey,
            'data.message' => $messageText ,
            'data.notificationID' => $yourKey 
            ); 
```

通知正确发送，但我首先推送**的通知 ID 值较旧。**它不是链接。但是我已经发送了新的data.message消息字符串。

php中的推送通知代码为：

```
 <?php       
            $Key    =   "0000000";
            $deviceToken    =   "sdfsjdfljsd";
            $collapseKey    =   1;
            $messageText    =   "Hi welcome";
            //$yourKey      =   100;
            $yourKey        =   101;

        $headers = array('Authorization:key=' . $Key);
        $data = array(
            'registration_id' => $deviceToken,
            'collapse_key' => $collapseKey,
            'data.message' => $messageText ,
            'data.notificationID' => $yourKey 
            );

        $ch = curl_init();

        curl_setopt($ch, CURLOPT_URL, "https://android.googleapis.com/gcm/send");
        if ($headers)
            curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
        curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
        curl_setopt($ch, CURLOPT_POST, true);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

        $response = curl_exec($ch);
        $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
        if (curl_errno($ch)) {
            return false;
        }
        if ($httpCode != 200) {
            return false;
        }
        curl_close($ch);
    ?> 
```

在 Android GCMIntentService 实现中：

```
 import android.app.IntentService;
    import android.app.Notification;
    import android.app.NotificationManager;
    import android.app.PendingIntent;
    import android.content.Context;
    import android.content.Intent;
    import android.graphics.Color;
    import android.os.Bundle;
    import android.util.Log;
    import android.widget.Toast;

    import com.google.android.gcm.GCMBaseIntentService;
        public class GCMIntentService extends GCMBaseIntentService {

        @SuppressWarnings("hiding")
        private static final String TAG = "GCMIntentService";

        public GCMIntentService() {
            super("XXXXXXXXXX");
        }

        /**
         * Issues a notification to inform the user that server has sent a message.
         */
        private static void generateNotification(Context context, String message , String notificationID ) {
            long when = System.currentTimeMillis();
            NotificationManager notificationManager = (NotificationManager) context
                    .getSystemService(Context.NOTIFICATION_SERVICE);
            Notification notification = new Notification(R.drawable.ic_launcher,
                    message, when);

            String title = context.getString(R.string.app_name);
            Intent notificationIntent = new Intent(context, ViewNotification.class);
            //notificationIntent.removeExtra("notificationID");
            notificationIntent.putExtra("notificationID", notificationID);
            // set intent so it does not start a new activity
            notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP
                    | Intent.FLAG_ACTIVITY_SINGLE_TOP);
            PendingIntent intent = PendingIntent.getActivity(context, 0,
                    notificationIntent, 0);
            notification.setLatestEventInfo(context, title, message, intent);
            notification.flags = Notification.FLAG_SHOW_LIGHTS | Notification.FLAG_AUTO_CANCEL;
            notification.ledARGB = Color.BLUE;
            notification.ledOnMS = 1000;
            notification.ledOffMS = 300;

            notificationManager.notify( 1 , notification);
        }

        @Override
        protected void onError(Context arg0, String arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        protected void onMessage(Context arg0, Intent arg1) {

            Log.d("GCM", "RECIEVED A MESSAGE");

            generateNotification(arg0, arg1.getStringExtra("message") , arg1.getStringExtra("notificationID") );

            //generateNotification(arg0, arg1.getStringExtra("key1"));
        }

        @Override
        protected void onRegistered(Context arg0, String arg1) {
            // TODO Auto-generated method stub

        }

        @Override
        protected void onUnregistered(Context arg0, String arg1) {
            // TODO Auto-generated method stub

        }

    } 
```

在下面的行中，我的通知 ID 越来越旧，但每次我提交新 ID 时。

generateNotification(arg0, arg1.getStringExtra("message") , arg1.getStringExtra("notificationID") );

如果有，请帮助我找出错误。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T08:06:36.267

这是一个常见的问题，挂起的意图没有被更新，只需像这样更改：

```
PendingIntent intent = PendingIntent.getActivity(context, 0,
                    notificationIntent,  PendingIntent.FLAG_UPDATE_CURRENT); 
```

# magento - 使用 store_id 和 option_id 删除自定义选项

> ID：13579561
> 
> 赞同：1
> 
> 时间：2012-11-27T07:47:18.350
> 
> 标签：magento, magento-1.7, magento-1.6

当给定的 store_id 和 option_id 相同时，我想删除自定义选项。

目前磁电机有这个代码

```
foreach ($product->getOptions() as $option) 
{       

    $option->getValueInstance()->deleteValue($option->getId());
    $option->deletePrices($option->getId());
    $option->deleteTitles($option->getId());
    $option->delete();
} 
```

我尝试使用此代码进行删除

```
foreach ($product->getOptions() as $option) 
{       
    $allStores = Mage::app()->getStores();
    foreach ($allStores as $_eachStoreId => $val)
    {
        if($_storeCode = Mage::app()->getStore($_eachStoreId)->getCode() == $importData['store'])
        {
                $option->getValueInstance()->deleteValue($option->getId());
                $option->deletePrices($option->getId());
                $option->deleteTitles($option->getId());
                    $option->delete();
            }
        }
} 
```

但它会在相同时删除所有自定义选项`option_id`并且不检查`store_id`

所以请帮助我如何在特定的 store_id 和 option_id 删除自定义选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:46:28.263

我已经稍微改变了你的代码。它现在应该可以更快，更正常地工作。所以检查一下：

```
$allStores = Mage::app()->getStores(false,true);
foreach ($product->getOptions() as $option) 
{           
    foreach ($allStores as $_eachStoreCode => $val)
    {
        if(strcasecmp($_eachStoreCode,$importData['store']) == 0)
        {
                $option->getValueInstance()->deleteValue($option->getId());
                $option->deletePrices($option->getId());
                $option->deleteTitles($option->getId());
                    $option->delete();
            }
        }
} 
```

看来[此链接](http://www.magentocommerce.com/boards/viewthread/43313/#t254127)可能对您也有帮助。

# javascript - 由于我已将 mouseover 和 mouseout 事件附加到 HTML 中的每个元素，如何防止在几个 HTML 元素上发生相同事件？

> ID：13579563
> 
> 赞同：3
> 
> 时间：2012-11-27T07:47:23.553
> 
> 标签：javascript, jquery, html

```
$('body').on('mouseover mouseout', '*:not(.printToolBar)', function (e) {
    if (this === e.target) {
        (e.type === 'mouseover' ? setMenuBox(e.target) : removeMenuBox(e.target));
    }
   }); 
```

我也尝试过`.on`方法`.off`，但无法获得预期的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:03:58.847

只需从原始绑定中排除不需要的元素：

```
$('body').on('mouseover mouseout', '*:not(.undesiredelements)', function (e) {
    if (this === e.target) {
        $(e.target).css('border', (e.type === 'mouseover' ? '1px solid blue' : ''));
    }
}); 
```

“删除某些元素的绑定”相当于更改触发处理程序的选择器条件。如果您在使用了松散选择器（如 ）后需要更改绑定`*`，您可以简单地取消绑定原始处理程序并重新绑定到所需的元素。

请注意，这里只发生了*一个*事件处理程序绑定（即到`body`元素）

# java - ON DELETE CASCADE 未在 DB 中设置

> ID：13579566
> 
> 赞同：0
> 
> 时间：2012-11-27T07:47:34.360
> 
> 标签：java, mysql, hibernate, jpa

我正在尝试使用 OneToOne 关系创建域对象。A是父母，B是孩子。

我尝试了许多不同的方法来将删除从 A 级联到 B，但是当我查看数据库创建时，它并没有在 DELETE CASCADE 上设置。

有人能看到我做错了什么吗

A：

```
@Entity    
@Table(name = "financeaccountcurrencymapping")
    public class FinanceAccountCurrencyMapping implements Serializable {

        @Id
        @GeneratedValue
        private long id;

        @OneToOne(cascade = CascadeType.ALL, optional = false, orphanRemoval = true, mappedBy = "financeAccountCurrencyMapping")
        private FinanceAccount financeAccount; 
```

我知道 CascadeType.ALL 或 orphanRemoval 应该可以解决问题，但他们没有。

乙：

```
@Entity
@Table(name = "financeaccount")
public class FinanceAccount implements Serializable {

    @OneToOne(optional = true)
    private FinanceAccountCurrencyMapping financeAccountCurrencyMapping; 
```

有人可以看到为什么它不会级联删除吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:18:40.457

我解决了它，但不是用 JPA

我在孩子身上设置了@OnDelete(action = OnDeleteAction.CASCADE)

# java - Java 从另一个或其他替代方案中引用一个开关案例

> ID：13579567
> 
> 赞同：0
> 
> 时间：2012-11-27T07:47:35.177
> 
> 标签：java, switch-statement

这个问题更多的是关于良好的编程实践和设计决策，但它集中在`switch`构造函数中。

想法是以各种方式处理默认行为。默认构造函数 ( `Const()`) 处理最简单或最常见的情况，参数化构造函数 ( `Const(int type)`) 用于`switch`枚举其他特定情况。

为了保存一些代码，我可以定义默认构造函数，比如说`case: 0`，然后我可以像这样从基本构造函数中引用它：（`Const() { this(0); }`否则我不能这样做（即从 switch case 中引用基本构造函数），因为编译器只需要一个一个对另一个构造函数的引用作为第一条语句）。

但我也希望能够处理参数化构造函数中的不正确输入，并将`default:`case 发送到`case: 0`（可能结合错误消息，如“Invalid case. Using default case (0) instead.”），反之亦然，以使其更健壮.

我在这里搜索并阅读了其他问题（例如，请参阅[this](https://stackoverflow.com/questions/7484660/jumping-from-one-case-to-the-default-case-in-switch-statement)和[that](https://stackoverflow.com/questions/4653887/java-switch-case-default-vs-explicit-enumeration)），并且我可以看到可以使用某种扭曲的开关直通方案在哪里完成，但为了语义和清晰度，我想保留首先是默认情况，或者另一方面，是否可以通过构造函数（例如`this.Const(default)`或排序）引用默认语句？可以做到吗？如果可以，从哲学上讲，解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T07:50:49.580

如何以单独的方法处理每个案例？

然后你可以这样做：

```
case 0: handleCase0(); break;
default: complainThatThisShouldntHappen(); handleCase0(); break; 
```

请注意，当您使用 an`Enum`而不是整数作为开关时，编译器的类型安全检查应该使默认大小写过时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T20:17:20.153

虽然这个问题仍然代表学术目的，但这是我处理这个问题的方式。在我使用基于类型变量的 switch 语句创建对象的构造函数之前（这可能会更好地处理特定的 Enum 类）。我的每个案例都加载了图像以与对象关联，这使得它非常麻烦。我现在所做的要简单得多：

```
// Default constructor for most common uses.
ClassName() {
    this(0);
}

// Parametrized constructor
ClassName(int type) {
    this.type = type;
} 
```

现在图像通过负责 GUI 的类加载（从而分离职责），其中一个方法返回一个图像数组，该数组根据对象的类型进行索引，然后在 draw 方法中使用：

```
public draw (Graphics page, BufferedImage[] backgrounds) {
    // Misc. calculations.
    page.draw(backgrounds[type], getX(), getY(), null);
} 
```

因此，它提供了更优雅的解决方案。

# php - 通过 PHP 导出为 CSV 并显示超链接单元格

> ID：13579570
> 
> 赞同：0
> 
> 时间：2012-11-27T07:48:13.587
> 
> 标签：php, mysql, csv, export

我不知道这是否正在发生。无论如何，我的问题是

我的网站有日志功能，管理员可以从中查看或访问最终用户访问过的位置。--> 这是简单的 PHP

现在，如果他想导出日志，他可以，但导出的 CSV 没有指向 loations 的链接。

希望你得到。

我正在为您的参考发布代码：

```
$contents="Sr.No,User_Type,Location\n";

$add = "select * from log_table order by id";
$user_query = mysql_query($add);

while($row  = mysql_fetch_array($user_query))
{
$contents.=$row[log_id].",";
$contents.=$row[Type].",";
$contents.="<a href='$row[location]'>".$row[location]."</a>\n";
}
Header("Content-Disposition: attachment; filename=export.csv");
print $contents; 
```

我曾尝试在位置周围放置标签。但它不起作用。

我期待的是 ![在此处输入图像描述](../Images/b8f9847c78247618269cbf91e03ff7dd.png)

我得到的是 ![在此处输入图像描述](../Images/fb0e4d21f986429b4635bcdf9ae0ea84.png)

提前谢谢=）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:09:13.903

Excel 不够聪明，无法处理 CSV 链接。但它足够聪明，可以处理常规的 HTML 表格。

只需将如下内容输出到名为 output.xls 的文件中：

```
<table border=1>
<tr>
    <td>1</td>
    <td>employee</td>
    <td><a href='http://www.example.com'>example</a></td>
</tr>
</table> 
```

Excel 会通知您该文件不是预期的格式，但如果您确认要打开它，就会得到您想要的。额外的好处是您还可以使用颜色、宽度/高度等。对于管理员来说可能就足够了。

另一个好处是您不必担心某些 CSV 需要的不同 excel 语言环境；和其他人需要，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T07:51:38.587

CSV 不支持这种格式。也就是说，CSV 是纯文本。Microsoft Excel 不会自动将链接转换为可点击。

如果你想要这个，你将不得不使用 XLS Builder 或类似的软件来打开它。

* * *

另外，不要尝试编写自己的 CSV。如果您要继续使用 CSV 格式，请使用[fputcsv() 。](http://php.net/manual/en/function.fputcsv.php)

# c++ - “char *”和“char * = new char[]”之间的 C++ 区别

> ID：13579572
> 
> 赞同：1
> 
> 时间：2012-11-25T08:06:02.710
> 
> 标签：c++, pointers, memory, dynamic, heap-memory

所以，如果我想声明一个字符数组，我可以这样

```
char a[2];
char * a ;
char * a = new char[2]; 
```

忽略第一个声明，其他两个使用指针。据我所知，第三个声明存储在堆中，并使用 delete 运算符释放。第二个声明是否也将数组保存在堆中？这是否意味着如果某些内容存储在堆中并且未释放，则可以在文件中的任何位置使用，例如具有文件链接的变量？我在一个函数中尝试了第三个和第二个声明，然后在另一个函数中使用了该变量，但它不起作用，为什么？第二个和第三个声明之间还有其他区别吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T08:54:11.313

*   在第一种情况下，`a[2]`在堆栈上存储 2 个字符。
*   在第二种情况下，根本没有分配 -`a`是一个未初始化的指针。
*   在第三种情况下，堆上分配了 2 个字符。

您认为堆分配的变量可以在您的进程中共享是正确的，但是，您需要确保传递分配的堆内存的位置 - 例如通过`a`从您的方法或函数返回，或者通过增加`a`例如到类范围的范围。

`delete`将释放堆分配。在您的情况下，`delete`应该只在场景 3 中使用，因为在 #1 中，堆栈变量在超出范围时被清理，而在 #2 中，您没有分配任何内存。

因为上述情况很容易导致堆分配所有权转移期间的混乱，所以可以使用智能指针（如boost`auto_ptr`的[shared_ptr）](http://www.boost.org/doc/libs/1_52_0/libs/smart_ptr/shared_ptr.htm)来简化生活。

# extjs - Sencha CMD 构建过程应用于现有的 ExtJs 4.1 应用程序

> ID：13579574
> 
> 赞同：4
> 
> 时间：2012-11-27T07:48:20.720
> 
> 标签：extjs, extjs4.1, sencha-command

我正在尝试将 sencha CMD 的构建环境改造为现有的 EXTjs 4.1 应用程序。遵循[http://docs.sencha.com/ext-js/4-1/#!/guide/command_code](http://docs.sencha.com/ext-js/4-1/#!/guide/command_code)中提到的所有编码约定。但是我在编译阶段卡住了一个`java.lang.OutOfMemoryError: GC overhead limit exceeded`错误。

我怀疑它可能是一个循环依赖，但不能确定。有没有人尝试在现有的 Ext 应用程序上使用 sencha CMD？你能告诉我如何增加 Ant 运行构建过程所使用的内存吗？

非常感谢任何提示或指向更多信息的指针

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T03:01:09.627

我遇到类似问题的时间和你差不多。看起来这是 Sencha CMD 3.0 和 64 位 JVM 的问题。您需要将堆空间增加一倍。此链接有增加堆大小的答案：[http ://www.sencha.com/forum/showthread.php?251529-Java-Heap-Size](http://www.sencha.com/forum/showthread.php?251529-Java-Heap-Size)

我会说，如果您最初没有使用“sencha generate app”命令生成您的应用程序，那么您将度过一段非常艰难的时期。目录结构非常脆弱，必须与 Sencha CMD 实用程序所期望的完全匹配。

我希望这有帮助。祝你好运！

# objective-c - 如何从字符串格式化日期时间

> ID：13579575
> 
> 赞同：0
> 
> 时间：2012-11-27T07:48:28.780
> 
> 标签：objective-c, ios

我有一个像“2012 12 12 12:12”这样的字符串，如何格式化为日期？

我试试这个但不工作

```
-(NSDate *)stringToDate:(NSString *)date
{
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    NSTimeZone *timeZone = [NSTimeZone localTimeZone];

    [formatter setTimeZone:timeZone];
    [formatter setDateFormat : @"yyyy MM dd HH:mm"];

    NSString *stringTime = date;

    NSDate *dateTime = [formatter dateFromString:stringTime];
    [formatter release];
    return dateTime;
} 
```

更新：当我改变格式化程序的位置时，它也不能通过：

```
NSLog(@"%@", stringToDate(@"2012 12 12 12:12")); 
```

它输出“null”，但它适用于字符串格式，如“2012-12-12 12:12”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:49:53.040

改变这个，

```
[formatter setDateFormat : @"yyyy MM dd HH:mm"];
[formatter release];
NSString *stringTime = date;
NSDate *dateTime = [formatter dateFromString:stringTime]; 
```

至

```
[formatter setDateFormat : @"yyyy MM dd HH:mm"];
NSString *stringTime = date;
NSDate *dateTime = [formatter dateFromString:stringTime];
[formatter release]; 
```

在完成从字符串到日期的转换之前，不要发布格式化程序。在您的代码中，您在转换本身之前释放它。

**更新：**

您需要将其用作，

```
NSLog(@"%@", [self stringToDate:@"2012 12 12 12:12"]); 
```

你不能`stringToDate(@"2012 12 12 12:12")`在objective-c中使用。这里等效的是`[self stringToDate:@"2012 12 12 12:12"]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T07:56:22.267

你可以使用这个：

```
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease]; 
```

而不是这两行：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
...
[formatter release]; 
```

如果您使用 ARC，那么内存管理对您没有任何麻烦。

编辑：但是请阅读一些内存管理规则和指南，这是每个在 cococa 工作的人必须的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T07:51:22.067

您`NSDateFormatter`在使用前释放

使用此代码：-

```
-(NSDate *)stringToDate:(NSString *)date
{
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    NSTimeZone *timeZone = [NSTimeZone localTimeZone];

    [formatter setTimeZone:timeZone];
    [formatter setDateFormat : @"yyyy MM dd HH:mm"];

    NSString *stringTime = date;

    NSDate *dateTime = [formatter dateFromString:stringTime];
    [formatter release];

    return dateTime;
} 
```

# html - HTML表格给我带来了麻烦

> ID：13579576
> 
> 赞同：0
> 
> 时间：2012-11-27T07:48:31.210
> 
> 标签：html, css

我尝试使用 2 个并排的表格（每个表格 300 宽度和 300 宽度）创建下表，但是，由于布局的原因，如果我将它创建为一个表格，这是我想要实现的，左右高度因为左边的单元格延伸到右边单元格的高度，所以一切都混乱了。

我怎样才能做到这一点（它是用于 HTML 电子邮件通讯，所以没有 div）？

![在此处输入图像描述](../Images/21dd68c033d3f2d3bbd797a6af21dc09.png)

**我更喜欢在一张桌子上做的两张桌子布局**

```
 <table cellpadding="0" cellspacing="0" border="0" bgcolor="#FFFFFF" width="300" style="float: left; display: inline-block; border-collapse: collapse; mso-table-lspace: 0; mso-table-rspace: 0;">
<tr><td style="border-collapse: collapse;">
<img align="top" border="0" src="images/content-top-left.png" width="300" height="74" style="outline: none; text-decoration: none; -ms-interpolation-mode: bicubic;">
</td></tr>
<tr><td height="163" style="border-collapse: collapse;vertical-align: top;">
<p class="l1" style="margin-left: 25px; margin-bottom: 0; margin-right: 0; margin-top: 0; color: #ed1c24; font-family: arial, serif; font-size: 26.5px; line-height: 26.5px;">Content left</p>
</td></tr>
<tr><td valign="top" style="border-collapse: collapse;">
<img style="vertical-align: top; outline: none; text-decoration: -ms-interpolation-mode: bicubic;" border="0" src="images/content-bottom-left.png" width="300" height="75">
</td></tr>
<tr><td valign="top" style="background-color: #a4000f; height: 148px; border-collapse: collapse;" bgcolor="#a4000f">
<img border="0" src="images/content-bottom-left-2.png" width="300" height="146" style="vertical-align: top; outline: none; text-decoration: none; -ms-interpolation-mode: bicubic;">
</td></tr>
</table>

<table cellpadding="0" cellspacing="0" border="0" bgcolor="#FFFFFF" width="300" style="float: right; display: inline-block; border-collapse: collapse; mso-table-lspace: 0; mso-table-rspace: 0;">
<tr><td style="border-collapse: collapse;"><img border="0" align="top" src="images/right.png" height="162" width="300" style="outline: none; text-decoration: none; -ms-interpolation-mode: bicubic;"></td></tr>
<tr><td style="border-collapse: collapse;">
<img align="top" border="0" src="images/content-bottom-right.png" width="300" height="138" style="outline: none; text-decoration: none; -ms-interpolation-mode: bicubic;">
</td></tr>
<tr><td width="292" height="158" valign="top" style="background-color: #a4000f; padding-top: 0; padding-left: 0; padding-bottom: 0; padding-right: 8px; height: 160px; border-collapse: collapse;margin-top:0;" bgcolor="#a4000f">
<p class="c1" style="margin-left: 0; margin-bottom: 0.5em; margin-right: 0; text-align: left; color: #fff; font-family: arial, serif; font-size: 15px; line-height: 15px; font-weight: 500;" align="left">The right content<span style="font-size: 10px; line-height: 10px; vertical-align: text-top;">*</span></p>
</td></tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:04:28.980

我会简单地使用一个包含一行和两个单元格的表格，每列一个。堆叠每个单元格中的所有内容。

如果您需要在每个单元格内嵌套另一个表格以在文本周围放置填充，这很容易做到。

举个例子（在我脑海中，我很久没有这样做了！）

单表：

```
<table width="600">
  <tr>
    <td width="300">
      <img src="top_left.png"><br>
      Text goes here<br>
      <img src="left.png"><br>
      <img src="bottom_left.png">
    </td>
    <td width="300">
      <img src="top_right.png"><br>
      <img src="right.png"><br>
      More text goes here
    </td>
  </tr>
</table> 
```

或有两个表：

```
<table width="600">
  <tr>
    <td width="300">
      <table>
        <tr><td><img src="top_left.png"></td></tr>
        <tr><td style="padding: 20px;">text goes here</td></tr>
        <tr><td><img src="left.png"></td></tr>
        <tr><td><img src="bottom_left.png"></td></tr>
      </table>
    </td>
    <td width="300">
      <table>
        <tr><td><img src="top_right.png"></td></tr>
        <tr><td><img src="right.png"></td></tr>
        <tr><td style="padding: 20px;">more text goes here<td></tr>
      </table>
    </td>
  </tr>
</table> 
```

（当然，我省略了所有其他 HTML 电子邮件技巧，例如`display:block`所有图像的宽度和高度，但您可以填写）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:00:03.330

我想你也许可以使用`div`标签。但是对于 html 表，请检查下表，其中包含 5 行 2 列，所有行的高度相同。

```
<table>
    <tr height="20%">
        <td width="50%"></td>
        <td width="50%"></td>
    </tr>
    <tr height="20%">
        <td></td>
        <td></td>
    </tr>
    <tr height="20%">
        <td></td>
        <td></td>
    </tr>
    <tr height="20%">
        <td></td>
        <td></td>
    </tr>
    <tr height="20%">
        <td></td>
        <td></td>
    </tr>
</table> 
```

如果需要，您还可以提供一般对齐或特定单元格的选项。

## 编辑

您不能为同一行中的 2 个单元格指定不同的高度。我想这`rowspan`在这里会有所帮助。

### 相同代码

```
<table>
    <tr>
        <td>Content</td>
        <td rowspan="2">Content</td>
    </tr>
    <tr>
        <td>Content</td>
    </tr>
</table> 
```

根据您的需要进行调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:04:12.287

包含 2 列内容堆叠的 1 个表的示例：

```
<table cellpadding="0" cellspacing="0" border="0">
    <tr>
        <td valign="top" width="300">
            <div>
                <img align="top" border="0" src="images/content-top-left.png" width="300" height="74"
                    style="outline: none; text-decoration: none; -ms-interpolation-mode: bicubic;" />
            </div>
            <div>
                <p class="l1" style="margin-left: 25px; margin-bottom: 0; margin-right: 0; margin-top: 0;
                    color: #ed1c24; font-family: arial, serif; font-size: 26.5px; line-height: 26.5px;">
                    Content left</p>
            </div>
            <div>
                <img style="vertical-align: top; outline: none; text-decoration: -ms-interpolation-mode: bicubic;"
                    border="0" src="images/content-bottom-left.png" width="300" height="75" />
            </div>
            <div>
                <img border="0" src="images/content-bottom-left-2.png" width="300" height="146" style="vertical-align: top;
                    outline: none; text-decoration: none; -ms-interpolation-mode: bicubic;" />
            </div>
        </td>
        <td valign="top" width="300">
            <div>
                <img border="0" align="top" src="images/right.png" height="162" width="300" style="outline: none;
                    text-decoration: none; -ms-interpolation-mode: bicubic;" />
            </div>
            <div>
                <img align="top" border="0" src="images/content-bottom-right.png" width="300" height="138"
                    style="outline: none; text-decoration: none; -ms-interpolation-mode: bicubic;" />
            </div>
            <div>
                <p class="c1" style="margin-left: 0; margin-bottom: 0.5em; margin-right: 0; text-align: left;
                    color: #fff; font-family: arial, serif; font-size: 15px; line-height: 15px; font-weight: 500;"
                    align="left">
                    The right content<span style="font-size: 10px; line-height: 10px; vertical-align: text-top;">*</span></p>
            </div>
        </td>
    </tr>
</table> 
```

# php - 重定向后引荐丢失

> ID：13579577
> 
> 赞同：4
> 
> 时间：2012-11-27T07:48:45.563
> 
> 标签：php, javascript, google-analytics

我有一个网站 ( [www.accent.jobs](http://www.accent.jobs) )，其中包含 www 上的语言选择工具。子域。选择语言时，会设置一个 cookie，因此用户只会看到一次语言选择页面，下次会自动以正确的方式重定向。

我在 Analytics 中注意到的是，从 www 到子域（例如 be.accent.jobs）的流量被视为推荐流量。

我在 www 上做什么。子域：

*   用户单击链接。
*   Javascript 对设置 cookie 的 PHP 文件执行 AJAX 请求。
*   用户通过 JavaScript 使用`window.location`.

当用户返回 www. 子域，重定向是通过 PHP 使用 302 完成的，没有页面渲染。

关于如何从 www 获得流量的任何想法。到不被处理为分析中的引荐流量的子域？我想保留原始推荐人（引用 www.accent.jobs 的网站）作为 Analytics 中的推荐人。

这是 www 和 be 上的跟踪代码。子域：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-xxxxxx-xx']);
_gaq.push(['_trackPageview']);
_gaq.push(['_setDomainName', 'accent.jobs']);
_gaq.push(['_addIgnoredRef', 'accent.jobs']);
_gaq.push(['_addIgnoredRef', 'be.accent.jobs']);
_gaq.push(['_addIgnoredRef', 'nl.accent.jobs']);
_gaq.push(['_addIgnoredRef', 'ro.accent.jobs']);
_gaq.push(['b._setAccount', 'UA-xxxxxx-x']);
_gaq.push(['b._trackPageview']);
_gaq.push(['b._setDomainName', 'accent.jobs']);
_gaq.push(['b._addIgnoredRef', 'accent.jobs']);
_gaq.push(['b._addIgnoredRef', 'be.accent.jobs']);
_gaq.push(['b._addIgnoredRef', 'nl.accent.jobs']);
_gaq.push(['b._addIgnoredRef', 'ro.accent.jobs']);      
(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); 
```

PS：我正在跟踪多个 UA 帐户以将数据也保存在旧帐户中，因此使用了“双重”跟踪代码。

**尝试**

*   尝试用 PHP 中的服务器端 302 标头重定向替换 JavaScript 重定向，但没有成功。
*   还尝试仅使用 JavaScript 重定向，但仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:33:30.610

你的`_setDomainName`用法是正确和充分的。但它的价值永远不会发送给 Analytics：您必须在之前使用它`_trackPageview`。

然后`_addIgnoredRef`就没用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:23:55.170

将`_trackPageview`呼叫移到`_setDomainName`和`_addIgnoredRef`呼叫之后。

_setDomainName 为 GA cookie 设置域，这些 cookie 在 _trackPageview 期间设置。通过在 _trackPageview 之后设置 _setDomainName，使用默认的 cookie 域，导致两组不同的 cookie，并且数据不会在域/子域之间传输。

# c# - 使用 WPF 在 C# 中绘制 UniformGrid

> ID：13579579
> 
> 赞同：1
> 
> 时间：2012-11-27T07:49:02.833
> 
> 标签：c#, wpf, animation

我对 C# 比较陌生，我正在尝试创建一个带有动态数量的相同大小正方形网格的窗口。然后这些方块将通过一个过程改变它们的颜色。

我目前正在努力生成正方形网格。每当我运行该应用程序时，它似乎都在消耗资源，我不知道为什么。

我使用的代码如下：

```
private void Window_Loaded(object sender, RoutedEventArgs e) {

    //create a blue brush
    SolidColorBrush vBrush = new SolidColorBrush(Colors.Blue); 

    //set the columns and rows to 100
    cellularGrid.Columns = mCellAutomaton.GAME_COLUMNS; 
    cellularGrid.Rows = mCellAutomaton.GAME_ROWS;

    //change the background of the cellular grid to yellow
    cellularGrid.Background = Brushes.Yellow;

    //create 100*100 blue rectangles to fill the cellular grid
    for (int i = 0; i < mCellAutomaton.GAME_COLUMNS; i++) {
        for (int j = 0; j < mCellAutomaton.GAME_ROWS; j++) {

            Rectangle vRectangle = new Rectangle();

            vRectangle.Width = 10;
            vRectangle.Height = 10;
            vRectangle.Fill = vBrush;

            cellularGrid.Children.Add(vRectangle);

        }
    }
} 
```

如果我想要一个可修改的正方形网格，这甚至是我想要采取的方法吗？

谢谢你的帮助，

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:28:30.080

这似乎执行得很快

```
 <Window x:Class="WpfApplication6.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" Height="350" Width="350" Name="UI">
        <Grid Name="Test">
            <UniformGrid Name="UniGrid" />
        </Grid>
    </Window>

/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        Loaded += new RoutedEventHandler(MainWindow_Loaded);
    }

    void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        AddRows(new Size(10, 10));
    }

    private void AddRows(Size recSize)
    {
        UniGrid.Columns = (int)(UniGrid.ActualWidth / recSize.Width);
        UniGrid.Rows = (int)(UniGrid.ActualHeight / recSize.Height);
        for (int i = 0; i < UniGrid.Columns * UniGrid.Rows; i++)
        {
            UniGrid.Children.Add(new Rectangle { Fill = new SolidColorBrush(Colors.Yellow), Margin = new Thickness(1) });
        }
    }
} 
```

# php - codeigniter 中的 URL 路由必须包含“？” 去工作

> ID：13579581
> 
> 赞同：2
> 
> 时间：2012-11-27T07:49:09.287
> 
> 标签：php, apache, codeigniter

因此，我使用默认配置安装了 CI，并输入了 [示例代码] [https://www.codeigniter.com/user_guide/tutorial/static_pages.html](https://www.codeigniter.com/user_guide/tutorial/static_pages.html)。

我尝试通过 localhost/codeigniter/index.php/pages/view 访问该页面，而 apache 给了我“找不到 - 找不到您请求的 URL”错误。

但是如果我输入 localhost/codeigniter/ **index.php？**/pages/view，它有效！

我尝试将 application/config/config.php 中的基本 url 更改为空白、“ [http://localhost/](http://localhost/) ”和“ [http://localhost/codeigniter/](http://localhost/codeigniter/) ”，但仍然没有效果。

我用谷歌搜索并查看了用户指南，但仍然没有找到解决方案。

我必须在哪里看，我错过了什么？我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:58:10.977

如果[`AcceptPathInfo`](http://httpd.apache.org/docs/2.2/mod/core.html#acceptpathinfo)在 Apache 中关闭，可能会发生这种情况。尝试检查您的 Apache 配置以获取该指令，或者手动将其设置为`On`.

# jquery - 如何在 Twitter bootstrap 的 DateRangePicker 中设置结束日期不少于开始日期？

> ID：13579582
> 
> 赞同：0
> 
> 时间：2012-11-27T07:49:22.007
> 
> 标签：jquery, twitter-bootstrap, datepicker, jquery-ui-datepicker, daterangepicker

我正在使用 twitter bootstrap 的 daterangepicker ......我有一个开始日期和一个结束日期......这里的问题是......每次我选择一个日期范围......开始日期可以大于结束日期（反之亦然）选择日期...如果这种情况成真，有没有办法在选择期间禁用日期？谢谢。顺便说一句，日期选择器验证 onSelect 在这里不起作用，因为我使用的是 DateRangePicker 库:)

```
 $('#rangeFrom, #rangeTo').daterangepicker(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:12:48.100

尝试使用[Dan Grossman 的 daterangepicker 插件](http://github.com/dangrossman/bootstrap-daterangepicker)。它具有开箱即用的这种日期验证功能。

他还发布了一个[演示和几个使用示例](http://www.dangrossman.info/2012/08/20/a-date-range-picker-for-twitter-bootstrap/)。

# java - 将 JFrame 打印到 Java 页面

> ID：13579584
> 
> 赞同：0
> 
> 时间：2012-11-27T07:49:29.233
> 
> 标签：java, swing, printing, jframe, java-2d

你将如何在java中打印一个jFrame？

例如

```
JFrame myJFrame = new JFrame("Window");
printClass.print(myJFrame); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T07:54:08.270

请阅读（并尝试代码示例）

*   [来自 Oracle 教程 2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)

*   课程[印刷](http://docs.oracle.com/javase/tutorial/2d/printing/index.html)

*   如果要打印到文件，请参阅[BufferedImage](http://docs.oracle.com/javase/tutorial/2d/images/index.html)

# joomla - Joomla中多个相同的用户名但密码不同

> ID：13579588
> 
> 赞同：0
> 
> 时间：2012-11-27T07:49:45.783
> 
> 标签：joomla, joomla1.5

有多个相同的用户名但密码不同，这在joomla中可能吗？如果是，我该怎么做。

```
e.g
username | password
one        123
one        456
one        789 
```

谢谢 ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T01:03:57.853

Joomla! 的用户模型需要唯一的身份（即每个用户唯一的用户名）。

这是访问控制的一个基本方面： 1 每个用户的唯一用户身份。

您可以想象为 Joomla 创建一个扩展！这将通过组合用户名和密码来模拟您试图实现的目标。当然，这要么必须阻止用户更改他们的密码，要么提供一种复杂的机制来确保他们的新密码的哈希不会与具有相同用户名的另一个用户冲突。

当然，拒绝这样的密码尝试会泄露其他用户帐户访问的详细信息......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:12:09.633

我认为不可能使用相同的用户名和不同的密码`Joomla`。

# ruby-on-rails - 使用 html_safe 或 raw 遍历数组返回转义的 html

> ID：13579589
> 
> 赞同：0
> 
> 时间：2012-11-27T07:49:46.853
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3

我的视图文件中有一个数组。数组中的每个值都包含 html。我想通过数组而不是转义 html。但是，每当我运行`html_safe`or`raw`时，数组都会以非转义的 html 显示。以下是我尝试过的一些方法，但证明是失败的。

这将返回带有转义 html 的数组...

```
<%= @posts.each { |x| puts raw(x) } %> 
```

这将数组中的每个值返回为零...

```
<%= @posts.map { |x| puts raw(x) } %> 
```

最后，inspect 返回带有转义 html 的数组...

```
<%= @posts.inspect { |x| puts x.html_safe } %> 
```

这也返回 nil ......

```
<%= @posts.map { |x| puts x.html_safe } %> 
```

这是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T07:55:00.283

您的问题在于`<%=`每个示例的开头 - 这将输出表达式的结果，它`@posts`本身就是。

替换它，`<%`看看你的表现如何。

编辑：第一个示例是我将使用的示例，每个示例都是原始示例。

再次编辑： puts 在视图中确实不是典型的 - 尝试以下操作：

```
<% @posts.each do |post| %>
  <%= post %>
<% end %> 
```

# jsf - JSF-调用BackingBean方法两次维护inputFileUpload的值

> ID：13579590
> 
> 赞同：0
> 
> 时间：2012-11-27T07:49:48.207
> 
> 标签：jsf

我对 JSF 很陌生。我有以下要求：单击命令按钮时，调用支持 bean 方法以检查是否存在满足条件的某些数据。如果是，请用户确认是否覆盖。如果用户说OK，调用相同的backing bean方法并设置一些参数来告诉程序覆盖数据。

我正在做的是：将 commandButton 的操作作为方法名称。在 backing bean 方法中，检查我们是否带有某些条件，检查数据是否已经存在。如果是，请返回页面并要求确认。如果确认，调用按钮的click方法。

问题是，当我回到页面时，页面上的 inputFileUpload 组件失去了它的价值。

我能做些什么来实现这一目标？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:30:02.537

这完全符合 HTML 规范，完全不受 JSF 控制。出于安全原因，HTML 规范不能（重新）显示带有来自服务器端的值的 HTML 输入文件字段的值。[否则，可能会出现此答案](https://stackoverflow.com/questions/1696877/how-to-set-a-value-to-a-file-input-in-html/1696884#1696884)中所示的危险情况。

您需要重新设计表单，使输入文件字段在确认期间不更新。您可以为此使用 JavaScript/ajax 等：只需通过 ajax 提交表单并确保输入文件字段未在 ajax 响应上更新。

# ios5 - 体系结构 i386 的未定义符号

> ID：13579591
> 
> 赞同：-2
> 
> 时间：2012-11-27T07:49:48.817
> 
> 标签：ios5

虽然我正在尝试构建我的 iOS 项目，但我正在使用故事板。在我的项目中也使用过渡和动画类。

架构 i386 的未定义符号：“_OBJC_CLASS_$_FooterView”，引用自：WallViewController.o 中的 objc-class-ref “_OBJC_CLASS_$_FullScreenView”，引用自：WallViewController.o 中的 objc-class-ref “_OBJC_CLASS_$_HeaderView”，引用自: objc-class-ref in WallViewController.o "_OBJC_CLASS_$_LayoutViewExtention"，引用自：objc-class-ref in WallViewController.o "_OBJC_CLASS_$_MessageModel"，引用自：objc-class-ref in WallViewController.o "_OBJC_CLASS_$_TitleAndTextView "，引用自：WallViewController.o 中的 objc-class-ref "_RGBACOLOR"，引用自：WallViewController.o 中的 -[WallViewController showViewInFullScreen:withModel:] -[WallViewController animationEnd:finished:context:] 在 WallViewController.o -[AFKPageFlipper initFlip] 在 AFKPageFlipper.o ld：未找到架构 i386 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:09:15.377

如果没有您的项目，很难分析这些问题。但是由于它们是链接器错误，并且您似乎使用了最新的 Xcode 之一，并且 WallViewController 不是标准的 UIKit 类（据我所知（没有“UI”前缀）），我猜您包含的文件不正确。
尝试删除对 WallViewController 文件的引用，然后通过右键单击要放置它们的组然后“添加文件...”将它们再次添加到项目中（我的 xcode 不喜欢拖动，原因不明）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:49:34.350

请看一下[链接](https://stackoverflow.com/questions/6984368/undefined-symbols-for-architecture-i386-objc-class-skpsmtpmessage-refere)。选择项目并转到**构建阶段**并添加缺少的文件“WallViewController.m”以**编译源代码**。

# android - 使用kso ap2解析android中的soap响应？

> ID：13579594
> 
> 赞同：-1
> 
> 时间：2012-11-27T07:49:56.457
> 
> 标签：android, ksoap2

我正在连接到在线网络服务并且能够得到响应。我需要使用 ksoap2 解析这个响应。我尝试使用 SAX 解析器，我能够解析它。请帮助我了解如何使用 ksoap2 解析 xml

这是我的回复 xml

```
<string xmlns="http://www.webserviceX.NET/">
<StockQuotes>
<Stock>
<Symbol>M</Symbol>
<Last>39.86</Last>
<Date>11/26/2012</Date>
<Time>4:02pm</Time>
<Change>-1.87</Change>
<Open>41.00</Open>
<High>41.09</High>
<Low>39.65</Low>
<Volume>7968614</Volume>
<MktCap>15.765B</MktCap>
<PreviousClose>41.73</PreviousClose>
<PercentageChange>-4.48%</PercentageChange>
<AnnRange>30.38 - 42.17</AnnRange>
<Earns>3.227</Earns>
<P-E>12.93</P-E>
<Name>Macy's Inc Common</Name>
</Stock>
</StockQuotes>
</string> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:01:57.837

我向您粘贴了一个示例代码，用于解析来自使用 .NET Web 服务的 Ksoap2 的结果。我希望它有所帮助。

创建一个具有如下数据类型的类：

```
import org.ksoap2.serialization.KvmSerializable;
import org.ksoap2.serialization.PropertyInfo;

public class Provincias implements KvmSerializable {

    public int GCPRV;
    public String GDPRV;
    public int GFCTB;

    public Provincias(){}
    public Provincias(int gcprv, String gdprv, int gfctb)
    {
        this.GCPRV=gcprv;
        this.GDPRV=gdprv;
        this.GFCTB=gfctb;       
    }

    @Override
    public Object getProperty(int arg0) {
          switch(arg0)
            {
            case 0:
                return GCPRV;
            case 1:
                return GDPRV;
            case 2:
                return GFCTB;
            }

            return null;
    }

    @Override
    public int getPropertyCount() { 
        return 3;
    }

    @Override
    public void getPropertyInfo(int index, Hashtable arg1, PropertyInfo info) {
          switch(index)
            {
            case 0:
                info.type = PropertyInfo.INTEGER_CLASS;
                info.name = "GCPRV";
                break;
            case 1:
                info.type = PropertyInfo.STRING_CLASS;
                info.name = "GDPRV";
                break;
            case 2:
                info.type = PropertyInfo.INTEGER_CLASS;
                info.name = "GFCTB";
                break;
            default:break;
            }

    } 
```

获得 SoapObject 响应后，您只需要查询它的属性并将它们绑定到您的类，如下所示：

```
 Provincias[] prov = new Provincias[ObjetoSoap.getPropertyCount()];
                for (int i = 0; i < prov.length; i++) {
                    SoapObject pii = (SoapObject)ObjetoSoap.getProperty(i);
                    Provincias provincia = new Provincias();      
                    provincia.GCPRV=Integer.parseInt(pii.getProperty(0).toString());
                    provincia.GDPRV =pii.getProperty(1).toString();
                    provincia.GFCTB=Integer.parseInt(pii.getProperty(2).toString());                
                    prov[i] = provincia;
           } 
```

编辑：这里有方法描述：

```
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <Cargar_Provincias_JavaResponse xmlns="http://tempuri.org/">
      <Cargar_Provincias_JavaResult>
        <Provincias_Class>
          <GCPRV>int</GCPRV>
          <GDPRV>string</GDPRV>
          <GFCTB>int</GFCTB>
        </Provincias_Class>
        <Provincias_Class>
          <GCPRV>int</GCPRV>
          <GDPRV>string</GDPRV>
          <GFCTB>int</GFCTB>
        </Provincias_Class>
      </Cargar_Provincias_JavaResult>
    </Cargar_Provincias_JavaResponse>
  </soap:Body>
</soap:Envelope> 
```

# mysql - MySQL查询以删除具有相同名字和姓氏的Joomla用户

> ID：13579596
> 
> 赞同：4
> 
> 时间：2012-11-27T07:50:20.977
> 
> 标签：mysql, joomla

我知道这是不正确的，但这基本上是我想要做的：

```
delete FROM jos_users WHERE name like '<firstname>=<lastname>' 
```

在 Joomla 中，名称`field`是一个输入，并且有很多具有相同名字和姓氏的垃圾邮件帐户 - 例如 Uzhuzaio Uzhuzaio - 我想删除它们。

所以总而言之，我需要一个查询来删除字段`jos_users`中`name`包含 2 个相同单词的用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:56:51.030

我觉得

```
DELETE FROM jos_users WHERE SUBSTRING_INDEX(name, '=', 1 ) = SUBSTRING_INDEX(name, '=', -1 ) 
```

应该做的伎俩，你试过吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:03:01.987

您可以使用[SUBSTRING_INDEX](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring-index)，它在分隔符出现一定次数之前或之后返回子字符串。
在下面的示例中，空格是分隔符，计数为 1 将返回第一个空格左侧的所有内容，计数为 -1 将返回第一个空格右侧的所有内容。

```
DELETE FROM jos_users WHERE 
       SUBSTRING_INDEX(name, " ", 1)=SUBSTRING_INDEX(name, " ", -1) 
```

但是，我会先执行 SELECT，以查看那里没有合法用户（很少见，但可能会发生）

重要提示：这仅适用于名称格式为 的情况`<name> <surname>`。多个空格会造成问题。在多个空格（例如`<composite name> <composite name>`）的情况下，您应该使用不同的计数值（`2;-2` `3;-3`等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T07:57:45.197

默认情况下，Joomla 没有名字和姓氏的单独字段。很可能您将它们用某个符号分隔。我建议定义它并编写一个简单的 PHP 代码。至少这是我会做的。

# signalr - 安装signalR后，signalR MVC站点无限期加载

> ID：13579598
> 
> 赞同：1
> 
> 时间：2012-11-27T07:50:35.510
> 
> 标签：signalr, signalr.client

我创建了一个全新的 MVC4 应用程序。从 NuGet 安装新的 signalR 包：

```
Install-Package Microsoft.AspNet.SignalR –pre 
```

每当我运行它时，它都会无限期地加载。我知道这是由安装期间添加的 SignalR => App_Start/RegisterHubs 引起的，因为`RouteTable.Routes.MapHubs();`在调试时它永远不会通过“”行。

在几台运行 windows 7 和 Vs2012 和 IIS Express 的机器上尝试过

是什么赋予了？？

谢谢

```
UPDATE: 
```

我刚在我家的电脑上试了一下。创建了一个全新的 MVC4 应用程序，运行 nuget 包安装并且**它工作正常！**: )（相同的设置 vs2012、win7、IIS express）**。**

这很奇怪，因为在我安装新版本的 signalR 之前，我办公室的一切工作都很好。

*   会不会是在工作中我们在*代理后面*？
*   -为什么会有所作为？
*   -如何在工作中安装nuget期间检查所有文件是否正确安装？我应该寻找/检查什么？

还有一件事：当我安装了**以前/旧**版本的 signalR（没有 RegisterHubs 文件）时，一切正常。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T11:44:36.660

并且，对于在 IIS Express 上运行站点时的无限加载时间，请从控制面板->程序和功能->打开或关闭 Windows 功能->Internet 信息服务检查您的 IIS。检查是否在IIS下的万维网服务中分配了所有相关功能。我遇到了同样的问题。，我激活了相关功能。，现在，没有无限期加载..，:)希望它对您或某人有所帮助。

谢谢，山提尼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T06:22:23.000

找到了解决方案：

从 IIS Express 更改为 VS 开发服务器或本地 IIS 有所帮助。现在一切正常。在 IIS Express 上使用代理运行站点时，不确定是什么导致加载时间无限期。

谢谢

# opengl - 在纹理顶部绘制程序线，避免 glsl 中的混叠

> ID：13579603
> 
> 赞同：1
> 
> 时间：2012-11-27T07:51:01.543
> 
> 标签：opengl, graphics, 3d, glsl, pointer-aliasing

我的目标是在柏油路上画白线。由于道路的特性发生了变化，不可能只有一个纹理同时代表沥青和白线。当前的方法是应用沥青纹理并在其他两个纹理坐标中编码一些信息。在像素着色器中，读取这些坐标，我决定该片段是否应该是白色的。

这会导致高水平的混叠。这就是我想尝试解决的问题。

我一直在改变应用 smothsetp 或线性插值的线条的“白度”。我还根据与相机的距离更改了宽度和颜色。这有点帮助，但在很远的距离，仍然有难看的锯齿线。

你将如何继续这样做？有一个表示平滑白线并访问纹素的纹理会更好吗？我应该实现一个访问相邻纹素的双线性过滤器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:08:43.583

您应该简单地使用具有 2 个坐标的 2 个纹理。

1.  小无缝沥青纹理平铺在道路多边形上。
2.  使用您将放置在此多边形中间的 alpha 标记纹理（使用纹理坐标偏移）

或者，您可以在道路中间创建额外的多边形作为标记以避免任何锯齿。

为了让这一切看起来真实，您可以使用带有污垢和裂缝的[纹理轰炸。](http://http.developer.nvidia.com/GPUGems/gpugems_ch20.html)

# matlab - 如何访问在 MATLAB 的另一个回调函数中加载的变量？

> ID：13579610
> 
> 赞同：0
> 
> 时间：2012-11-27T07:51:34.170
> 
> 标签：matlab, user-interface

我想用一个按钮加载一个神经网络对象文件，并在其他按钮的回调函数中使用它。

我没有使用 GUIDE，而是以编程方式创建 GUI。这是我的代码：

```
function ASR()

figure('Name','Automatic Isolated Speech Rcognition System',.......
   'Menubar','none',........
   'Color',[1 1 1]);

Rcrd_and_Recog =uicontrol('Style','pushbutton',....
                           'Units','normalized',....
                           'Position',[0.75 0.75 0.20 0.05],....
                           'String','START',....
                           'Callback',@Record_Recog);

LD_net = uicontrol('Style','pushbutton',....
                            'Units','normalized',....
                            'Position',[0.75 0.65 0.20 0.05],....
                            'String','LOAD THE NET',....
                            'Callback',@load_net);

function load_net(varargin)
    [file path]=uigetfile('*.mat','Select the M-file');
    if ~isequal(file, 0)
        L=load(fullfile(path,file));
        Net=fieldnames(L);
        net=Net{1};
        handles.net=net;
    end

 function Record_Recog(varargin)
     fs=16000;
     y=wavrecord(1*fs,fs,1,'double');

     if length(y)<1157
         result=sim(net0,cat(1,y,zeros(1157-length(y),1)))
     else
         result=sim(net0,y)
     end
 end 
```

我加载了`net`变量，但无法从`Rcrd_and_Recog`. 我怎样才能达到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:16:37.627

我看不到 net0 是在哪里声明的。如果你想在不同的函数之间共享它们，你应该使用全局变量

# java - 如何仅在 gwt 平台中的某些事件上显示其父级中的演示者小部件/演示者？

> ID：13579611
> 
> 赞同：0
> 
> 时间：2012-11-27T07:51:36.647
> 
> 标签：java, gwt, gwt-platform, gwtp

我正在 GWT-Platform 中做一个应用程序。我已经使用停靠布局布局了我的主页。在码头布局的西部，我会有一些链接 ( `Anchor`)。根据我单击的内容，我必须在中心显示`PresenterWidget`/ `presenter` 。

我怎样才能做到这一点？我和主持人一起试过这样

```
@UiHandler("myAnchor")
public void onClicked(ClickEvent event) {
    mainContent.clear();
    mainContent.add(newPageinCenter);
} 
```

在父演示者视图中，我已用于`SimpleLayoutPanel`停靠中心

```
<g:center>
<g:SimpleLayoutPanel ui:field="mainContent">        
</g:SimpleLayoutPanel>
</g:center> 
```

在孩子中，我再次使用docklayout面板向它的侧面添加更多自定义小部件，例如

```
<g:DockLayoutPanel>
    <g:north size='60' unit='EM'>
        <g:SimpleLayoutPanel>
            <widgets:CustWid1 ui:field="policySelPane" />
        </g:SimpleLayoutPanel>
    </g:north>
    <g:center>
        <g:VerticalSplitPanel>
            <widgets:CustWid2 ui:field="createPolicyPane" />
            <widgets:CustWid3 ui:field="stackPane" />
        </g:VerticalSplitPanel>
    </g:center>
    <g:south size='60'>
        <g:FlowPanel>
            <g:Button ui:field="computePremium">Compute Premium</g:Button>
        </g:FlowPanel>
    </g:south>
</g:DockLayoutPanel> 
```

但我只能看到北方而且我`RevealRootLayoutContentEvent`在我的孩子身上使用`Presenter`也是我的错误

# ruby-on-rails - 用于搜索关键路径的元程序 Squeel

> ID：13579613
> 
> 赞同：2
> 
> 时间：2012-11-27T07:51:51.330
> 
> 标签：ruby-on-rails, ruby, activerecord, arel, squeel

### 问题

我正试图围绕 arel 和 squeel 展开思考，但我觉得我缺乏向 Google 询问我在寻找什么的词汇。

TL;DR：有谁知道如何`Model.where{related.objects.field.matches string}`从组合对象中模仿 Squeel 的语法`Squeel::Node`？

### 问题

[这个问题](https://stackoverflow.com/questions/11641802/squeel-evaluating-a-string-as-a-keypath-for-joins)演示了如何从字符串构建 Squeel KeyPath，如下所示：

```
search_relation = 'person.pets'
User.joins{Squeel::Nodes::KeyPath.new(search_relation.split('.'))}
# Mimics User.joins{person.pets} 
```

[在这篇文章](http://www.tumblr.com/tagged/squeel?before=1318573080)中，情节变得更加深入，在那里我学习了如何对多列的搜索进行元编程。使用记录在案的[Squeel 技巧](https://github.com/ernie/squeel/wiki/Tips-and-tricks)（页面上的最后一行）进行清理，它看起来像这样：

```
search_columns = %w[first_name last_name]
search_term = 'chris'
User.where{
  search_columns.map do |column|
    column_stub = Squeel::Nodes::Stub.new(column)
    Squeel::Nodes::Predicate.new(column_stub, :matches, "%#{search_term}%")
  end.compact.inject(&:|)
}
# Mimics User.where{(last_name.matches '%chris%') | (first_name.matches '%chris%')} 
```

我想要的是能够将两者结合起来，模仿

```
User.joins{person.pets}.where{person.pets.name.matches '%polly%'} 
```

通过自己构建 squeel 对象。

第一部分很简单，在第一个示例中进行了演示。第二部分我可以直接对正在查询的表上的列进行操作，如第二个示例所示。

但是，我不知道如何对表中加入的列执行第二部分。我想我需要使用第一个示例中的对象来确定第二个示例中`KeyPath`的对象范围`Predicate`。该`Predicate`对象似乎仅适用于`Stub`表示单个表上的单个列的对象，而不是`KeyPath`.

### 以前的尝试

假设

```
search_relation = 'key.path'
search_column = 'field'
search_term = '%search%'
keypath = Squeel::Nodes::KeyPath.new(search_relation.split('.') << search_column) 
```

我尝试`matches`在 KeyPath 上调用该方法：

```
Model.where{keypath.matches search_term}
#=> NoMethodError: undefined method `matches' for Squeel::Nodes::KeyPath 
```

我试过使用匹配运算符，`=~`：

```
Model.where{keypath =~ search_term}
#=> TypeError: type mismatch: String given 
```

我试过`Predicate`手动构建，传入一个`:matches`参数：

```
Model.where{Squeel::Nodes::Predicate.new(keypath, :matches, search_term)}
#=> ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column
#=>   'model.key.path.field' in 'where clause':
#=>   SELECT `model`.* FROM `model`
#=>     INNER JOIN `key` ON `key`.`id` = `model`.`key_id`
#=>     INNER JOIN `path` ON `path`.`id` = `key`.`path_id`
#=>     WHERE `model`.`key.path.field` LIKE '%search%' 
```

在这里，它成功生成了 SQL（使用`Model.joins{search_relation}`上面的方法正确连接，为便于阅读而省略），然后假定它`KeyPath`是一个字段而不是遍历它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:19:10.157

克里斯，

你在正确的轨道上。只需在 KeyPath 对象上调用matches 方法，就会创建一个matches 谓词，其中keypath 在左侧，matches 的参数在右侧。Squeel 的访问者将遍历左侧的键路径，到达有问题的属性，并针对它构建匹配的 ARel 谓词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T18:06:28.510

虽然`KeyPath`第一个示例中的 足以连接表，但`KeyPath`要在`WHERE`子句中使用的 a 需要更仔细地构造，确保最后一个值确实是 a `Stub`。

```
search_relation = 'key.path'
search_column = 'field'
search_stub = Squeel::Nodes::Stub(search_column)
search_term = '%search%'
keypath = Squeel::Nodes::KeyPath.new(search_relation.split('.') << search_stub)

Model.where{Squeel::Nodes::Predicate.new(keypath, :matches, search_term)}
#=> SELECT `model`.* FROM `model`
#=>   INNER JOIN `key` ON `key`.`id` = `model`.`key_id`
#=>   INNER JOIN `path` ON `path`.`id` = `key`.`path_id`
#=>   WHERE `path`.`field` LIKE '%search%' 
```

# python - paramiko 服务器模式端口转发

> ID：13579616
> 
> 赞同：6
> 
> 时间：2012-11-27T07:52:04.277
> 
> 标签：python, paramiko

我需要使用 paramiko 实现一个 ssh 服务器，它只处理像这样的“-R”端口转发请求：

```
ssh -N -T -R 40005:destination_host:22 user@example.com 
```

到目前为止，据我了解，我必须实现 ServerInterface.check_port_forward_request 并在之后的某个时间创建一个套接字并监听指定的端口。通过 Channel/Connection 传来的任何数据都分别进入 Connection/Channel

```
class Server (paramiko.ServerInterface):
    .
    .
    .
    def check_port_forward_request(self, address, port):
        'Check if the requested port forward is allowed'
        ...
        return port

def handler(chan, port):
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.bind(('', port))
    sock.listen(1)
    conn, addr = s.accept()    

    while True:
        r, w, x = select.select([conn, chan], [], [])
        if conn in r:
            data = conn.recv(1024)
            if len(data) == 0:
                break
            chan.send(data)
        if chan in r:
            data = chan.recv(1024)
            if len(data) == 0:
                break
            conn.send(data)
    chan.close()
    conn.close()
    verbose('Tunnel closed from %r' % (chan.origin_addr,))

thr = threading.Thread(target=handler, args=(chan,server_port))
thr.setDaemon(True)
thr.start() 
```

这是实现服务器端 paramiko ssh 端口转发的总体思路吗？我应该在 check_port_forward_request 还是其他地方启动线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-03T18:00:05.593

这是来自 Paramiko 的反向端口转发来源的一个工作示例：

[https://github.com/paramiko/paramiko/blob/master/demos/rforward.py](https://github.com/paramiko/paramiko/blob/master/demos/rforward.py)

# ruby-on-rails-3.2 - Omniauth YouTube 帮助解析响应

> ID：13579618
> 
> 赞同：1
> 
> 时间：2012-11-27T07:52:13.153
> 
> 标签：ruby-on-rails-3.2, youtube-api, omniauth

我正确设置了omniauth，并且能够解析其他几个提供商的响应，包括YouTube用户的一些属性，但我无法获取YouTube用户到他们频道的链接。这是响应的样子，我正在尝试获取最后一行的链接：

```
--- !ruby/hash:OmniAuth::AuthHash
provider: youtube
uid: http://gdata.youtube.com/feeds/api/users/DLjkduRouoiweRktkkl
info: !ruby/hash:OmniAuth::AuthHash::InfoHash
  uid: http://gdata.youtube.com/feeds/api/users/DLjkduRouoiweRktkkl
  nickname: Example User
  email: exampleuser@gmail.com
  first_name: Example
  last_name: User
  image: http://lh3.googleusercontent.com/-7vCkdsSDAfsU/AAAAAAAAAAA/kjRe3kjk/s88-c-k/photo.jpg
  description: 
  location: Example City CA, US
  channel_title: Example User
  subscribers_count: '66'
credentials: !ruby/hash:Hashie::Mash
  token: kh58.lkjASDF93-W2-ADFJkjfdo498_W8IWnjWTWY
  expires_at: 1354004818
  expires: true
extra: !ruby/hash:Hashie::Mash
  user_hash: !ruby/hash:Hashie::Mash
    xmlns: http://www.w3.org/2005/Atom
    xmlns$media: http://search.yahoo.com/mrss/
    xmlns$gd: http://schemas.google.com/g/2005
    xmlns$yt: http://gdata.youtube.com/schemas/2007
    id: !ruby/hash:Hashie::Mash
      $t: http://gdata.youtube.com/feeds/api/users/DLjkduRouoiweRktkkl
    published: !ruby/hash:Hashie::Mash
      $t: '2012-02-14T23:39:43.000Z'
    updated: !ruby/hash:Hashie::Mash
      $t: '2012-11-27T06:07:22.000Z'
    category:
    - !ruby/hash:Hashie::Mash
      scheme: http://schemas.google.com/g/2005#kind
      term: http://gdata.youtube.com/schemas/2007#userProfile
    title: !ruby/hash:Hashie::Mash
      $t: Example User
      type: text
    content: !ruby/hash:Hashie::Mash
      $t: Example user channel description
      type: text
    link:
    - !ruby/hash:Hashie::Mash
      rel: alternate
      type: text/html
      href: http://www.youtube.com/channel/kljasdSDAF98324
      .
      .
      . 
```

通过在我的用户模型中执行此操作，我可以在顶部找到“昵称”之类的内容：

```
def add_omniauth(auth)
  user.name = auth["info"]["nickname"]
end 
```

但是我到底如何才能到达最底部的那个 URL？我试过了：

```
user.link = auth["extra"]["user_hash"]["link"]["href"] 
```

但无济于事。作为 rails 和 ruby​​ 新手，我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:12:51.983

好的，事实证明，链接：在 youtube 响应中是一个数组。您可以判断，因为它没有在旁边列出为哈希。我是在和我这里的一个朋友交谈后才知道的。因此，为了在响应底部获得该链接：

```
self.url = auth["extra"]["user_hash"]["link"].first["href"] 
```

# apache-flex - 如何从 adobe air 应用程序在本地计算机上执行 .bat 文件？

> ID：13579621
> 
> 赞同：1
> 
> 时间：2012-11-27T07:52:37.647
> 
> 标签：apache-flex, air, window, adobe

我正在使用 flex4.6，我想从 ma air 应用程序运行一个 .bat 文件，有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:30:43.500

你可以使用`NativeProcess`类。 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/NativeProcess.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/desktop/NativeProcess.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T08:05:44.203

试试这个

这个类可能对你有帮助 my_command.bat echo "Hello Native Process"

在运行应用程序 (Projectname-app.xml) 之前检查supportedProfiles 标签

桌面扩展桌面移动设备扩展移动设备

到

扩展桌面

```
package
{

  import flash.desktop.NativeProcess;
import flash.desktop.NativeProcessStartupInfo;
import flash.events.ProgressEvent;
import flash.filesystem.File;

import mx.controls.Alert;

public class PlatformPackaging
{
    private var nativeProcess:NativeProcess;
    private var isErrorOccured:Boolean;

    private var batFile:File;
    private var cmdFile:File;

    private function get isWindows():Boolean
    {
        return true;
    }

    public function PlatformPackaging()
    {
    }

    public function start(targetPlatform:String):void
    {
        if(isWindows)
        {
            batFile = File.applicationDirectory.resolvePath("publish/my_command.bat");
            cmdFile = new File("c:\\Windows\\System32\\cmd.exe");
        } 

        proceedToPackaging();
    }

    private function proceedToPackaging():void {

        var processArgs:Vector.<String> = new Vector.<String>;

        processArgs.push("/c");
        processArgs.push(batFile.nativePath);

        var workingDirectory:File = File.applicationDirectory.resolvePath("publish/");
        var nativeProcessStartupInfo:NativeProcessStartupInfo = new NativeProcessStartupInfo();

        nativeProcessStartupInfo.arguments = processArgs;
        nativeProcessStartupInfo.executable = cmdFile;
        nativeProcessStartupInfo.workingDirectory = workingDirectory;

        nativeProcess = new NativeProcess();
        nativeProcess.addEventListener(ProgressEvent.STANDARD_ERROR_DATA,onStandardErrorOutputDataHandler);
        nativeProcess.addEventListener(ProgressEvent.STANDARD_OUTPUT_DATA,onStandardOutputDataHandler);
        nativeProcess.start(nativeProcessStartupInfo);
    }

    private function onStandardErrorOutputDataHandler(event:ProgressEvent) : void
    {
        var certResponse:String = nativeProcess.standardError.readUTFBytes(nativeProcess.standardError.bytesAvailable);

        trace(certResponse);
        nativeProcess.removeEventListener(ProgressEvent.STANDARD_ERROR_DATA,onStandardOutputDataHandler);
        nativeProcess.exit();
    }

    Alert.show(certResponse,'Error');
}

protected function onStandardOutputDataHandler(event:ProgressEvent):void
{
    var status:String = nativeProcess.standardOutput.readUTFBytes(nativeProcess.standardOutput.bytesAvailable);

    Alert.show(status)
}
 }
} 
```

请让我知道任何澄清。

# ios - 为什么我的 iOS 应用程序仅在首次运行时正确检测到当前语言？

> ID：13579623
> 
> 赞同：25
> 
> 时间：2012-11-27T07:52:46.103
> 
> 标签：ios, xcode4, localization

我正在本地化我的 iOS 应用程序，并且在模拟器中它每次都能以我选择的语言正确运行。

在我的 iPhone 5 上进行测试时，它只会在应用程序第一次运行时正确检测到语言。每隔一次我在设备上重新编译和运行我的应用程序时，它都会检测到“en”作为语言，即使我正在选择 Español（“es”）进行测试。

我使用以下方法检测语言：

`[[[NSBundle mainBundle] preferredLocalizations] objectAtIndex:0]`

我也用过：

`[[NSLocale preferredLanguages] objectAtIndex:0]`

结果相同。

如果我在第一次运行后终止应用程序，然后在设备上重新启动它，它会继续正确检测语言。

但是，如果我终止应用程序，然后在初始运行后通过 Xcode 重新编译/重新启动，它将加载检测到“en”（英文）。

之后，除非我完全删除该应用程序并通过 Xcode 重新编译/重新安装/运行该应用程序，否则杀死并重新启动该应用程序会不断检测为英语。然后循环重复......随后的重建/重新启动而不首先从设备中删除应用程序会导致错误检测。

我设备上的所有其他应用程序始终以西班牙语显示。整个用户界面以西班牙语显示。

**更新：**我现在已经在运行 iOS 6 的 iPad（第 3 代）上进行了测试，并且遇到了相同的行为。

**更新 2：**

在 didFinishLaunchingWithOptions 中，我有这段代码来检测语言：（语言是 NSString*）：

`language = [[NSLocale preferredLanguages] objectAtIndex:0];`

接下来是这个调试语句，比较我得到的值，以及检测它的稍微不同的方式，只是为了调试：

`NSLog(@"Detected language: %@ / %@", language, [[[NSBundle mainBundle] preferredLocalizations] objectAtIndex:0]);`

当应用程序在西班牙语模式下正常工作时，输出显示为“检测到的语言：es / es”，然后在没有时显示为“检测到的语言：en / en”。仍然不知道为什么它有时决定加载为英语......

**更新4：**感谢大家的回答，我尝试了各种建议。不幸的是，我无法授予**+100 赏金**，因为似乎没有任何建议可以解决问题。如果有人最终找到了适合我的解决方案，届时我将再奖励他们 +50 赏金。

**更新 5：**我已经从 Xcode 4.5 更新到 4.5.2，并且遇到了同样的问题。

**更新 6：**我现在从头开始创建了一个新的测试项目，它工作得非常好！显然，我的项目布局方式或其中一个数据文件中一定有问题。我想我的下一个旅程将是从头开始重新创建项目，一个一个地复制文件数据......

**更新 7（几个月后）：**可悲的是，在通过煞费苦心地重新创建我的项目暂时解决它（似乎）之后，我再次面临这个问题。在第一次加载时，语言会正确呈现，但在后续加载时，它会恢复为英语。

**已解决请参阅**[下面](https://stackoverflow.com/a/14074916/650558)的最终解决方案。感谢大家的帮助。我可能会发放一些赏金，因为无论如何它都会浪费掉。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-28T19:48:16.417

**几个月后我终于解决了这个问题！感谢所有人的帮助（我还通过开发渠道与 Apple 开发人员进行了一些很好的交流）。**

**TL;DR：**我不小心使用我的应用程序的 iCloud 键值存储（通过 MKiCloudSync）在设备之间同步语言首选项（以及许多其他意想不到的事情）！继续阅读...

我正在使用一个名为 MKiCloudSync 的第三方类，它有助于同步`[NSUserDefaults standardUserDefaults]`到我的应用程序的 iCloud 键值存储。当我开始使用它时，我的意图是让它在后台处理一些用户收藏的同步。

但是，不了解它是如何`standardUserDefaults`工作的，我没有意识到`standardUserDefaults`除了我自己的自定义应用程序设置之外，还有很多其他的东西被写入！

所以发生的事情是这样的：

1.  首次启动应用程序。新鲜`standardUserDefaults`，并且根据当前设备选择，存储有序语言首选项列表的内部“AppleLanguages”键是正确的。

2.  应用程序以指定的语言正确显示。

3.  在后台，MKiCloudSync 将 ALL 同步`standardUserDefaults`到 iCloud。相反，如果您在其他地方运行此应用程序，例如使用英语设备，该设备也会将其语言设置同步到 iCloud。所以现在这个当前正在运行的应用程序实际上已经覆盖了它的语言首选项。

4.  BOOM ...下次运行应用程序时，无论您在设备上选择了什么，它都是从 iCloud 中拉出的任何内容，将用作默认语言！

**我打算通过下一次应用更新来解决这个问题：**

1.  使用[MKiCloudSync 的分支版本，它只](https://github.com/rastersize/MKiCloudSync)允许同步列入白名单的密钥名称。

2.  添加将进行一次性清理的代码，首先清理我的应用程序的 iCloud 密钥库，然后（[基于此 SO 答案](https://stackoverflow.com/a/6824738/650558)），调用此代码以重置用户默认值：

    NSString *appDomain = [[NSBundle mainBundle] bundleIdentifier]; [[NSUserDefaults standardUserDefaults] removePersistentDomainForName:appDomain];

在我到目前为止的测试中，这种解决了问题......不幸的是，用户必须重新启动应用程序才能启动语言修复。但是，我的猜测是大多数用户都没有遇到这个问题，因为他们不太可能使用具有不同默认语言的多个设备。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T08:44:58.563

在设置->通用->国际中，有一个选项可以设置位置语言等。如果您将其设置为您尝试测试的语言，那么如果您的代码正确，它将起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T10:36:44.630

尝试使用以下代码：

本地化系统.h===

```
#import <Foundation/Foundation.h>

#define AMLocalizedString(key, comment) \
[[LocalizationSystem sharedLocalSystem] localizedStringForKey:(key) value:(comment)]

#define LocalizationSetLanguage(language) \
[[LocalizationSystem sharedLocalSystem] setLanguage:(language)]

#define LocalizationGetLanguage \
[[LocalizationSystem sharedLocalSystem] getLanguage]

#define LocalizationReset \
[[LocalizationSystem sharedLocalSystem] resetLocalization]

@interface LocalizationSystem : NSObject {
    NSString *language;
}

+ (LocalizationSystem *)sharedLocalSystem;

//gets the string localized
- (NSString *)localizedStringForKey:(NSString *)key value:(NSString *)comment;

//sets the language
- (void) setLanguage:(NSString*) language;

//gets the current language
- (NSString*) getLanguage;

//resets this system.
- (void) resetLocalization;

@end 
```

LocalizationSystem.m===

```
#import "LocalizationSystem.h"

@implementation LocalizationSystem

//Singleton instance
static LocalizationSystem *_sharedLocalSystem = nil;

//Current application bundle to get the languages.
static NSBundle *bundle = nil;

+ (LocalizationSystem *)sharedLocalSystem{
    @synchronized([LocalizationSystem class])
    {
        if (!_sharedLocalSystem){
            [[self alloc] init];
        }
        return _sharedLocalSystem;
    }
    // to avoid compiler warning
    return nil;
}

+(id)alloc{
    @synchronized([LocalizationSystem class])
    {
        NSAssert(_sharedLocalSystem == nil, @"Attempted to allocate a second instance of a singleton.");
        _sharedLocalSystem = [super alloc];
        return _sharedLocalSystem;
    }
    // to avoid compiler warning
    return nil;
}

- (id)init{
    if ((self = [super init])) 
    {
        //empty.
        bundle = [NSBundle mainBundle];
    }
    return self;
}

// Gets the current localized string as in NSLocalizedString.

- (NSString *)localizedStringForKey:(NSString *)key value:(NSString *)comment{
    return [bundle localizedStringForKey:key value:comment table:nil];
}

// If this function is not called it will use the default OS language.
// If the language does not exists y returns the default OS language.
- (void) setLanguage:(NSString*) l{
    NSLog(@"preferredLang: %@", l);

    NSString *path = [[ NSBundle mainBundle ] pathForResource:l ofType:@"lproj" ];

    if (path == nil)
        //in case the language does not exists
        [self resetLocalization];
    else
        bundle = [[NSBundle bundleWithPath:path] retain];

    [[NSUserDefaults standardUserDefaults] setObject: [NSArray arrayWithObjects:l, nil] forKey:@"AppleLanguages"];
}

// Just gets the current setted up language.
// returns "es","fr",...
//
// example call:
// NSString * currentL = LocalizationGetLanguage;
- (NSString*) getLanguage{

    NSArray* languages = [[NSUserDefaults standardUserDefaults] objectForKey:@"AppleLanguages"];

    NSString *preferredLang = [languages objectAtIndex:0];

    return preferredLang;
}

// Resets the localization system, so it uses the OS default language.
//
// example call:
// LocalizationReset;
- (void) resetLocalization{
    bundle = [NSBundle mainBundle];
}

@end 
```

正如您所提到的，此代码可以完美运行。它对我有用，如果你想检查（HueShapes），该游戏现在在应用商店上线。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T21:45:04.060

我在 iPhone 5 上测试了您的步骤，没有出现任何问题。这让我认为这里还有其他东西在起作用：很可能有一些东西干扰了您读取语言环境值的方式。

我建议您采取的帮助您调试此问题的步骤是：

1.  发布您获取首选语言值的方法的完整代码。确保每次运行应用程序时都执行该方法。
2.  确保您发布的代码包含您用于测试语言设置的 NSLog 指令的位置。
3.  第一次运行后，您是否将首选语言存储在其他地方？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-30T09:13:00.327

您是否偶然使用 NSUserDefaults 来保存与语言相关的内容？

查看您的模拟器应用程序目录 -> 库 -> 首选项 ->`<YourAppBundleName>.plist`

请参阅：[如何强制 NSLocalizedString 使用特定语言](https://stackoverflow.com/questions/1669645/how-to-force-nslocalizedstring-to-use-a-specific-language)来描述设置语言的 NSUserDefaults 方法。

也许您只是保存您的语言，因此检测只返回保存的值。

# symfony - Symfony2 原则多对多不存在

> ID：13579627
> 
> 赞同：2
> 
> 时间：2012-11-27T07:53:01.750
> 
> 标签：symfony, orm, doctrine-orm, many-to-many, relation

大家好，我又来求助了。

我的问题是两个相关的 ORM 实体没有被存储。

我运行以下单元测试，但它失败了：

```
public function testCategoryRelation()
{
    $doctrine = $this->client->getContainer()->get('doctrine');
    $itemRepo = $doctrine->getRepository("AppBundle:Item");
    $item = $itemRepo->find(230045);
    $this->assertTrue($item instanceof \Acme\TestBundle\Entity\Item);

    $categories = $item->getCategories();
    $this->assertGreaterThan(0, $categories->count());
    foreach ($categories as $category) {
        $this->assertTrue($category instanceof \Acme\TestBundle\Entity\Category);
    }

    $count = $categories->count();
    $categoryRepo = $doctrine->getRepository("AppBundle:Category");
    $categories = $categoryRepo->findBy(array(), null, 2);
    $this->assertEquals( 2, count($categories) );

    foreach ($categories as $category) {
        $this->assertTrue($category instanceof \Acme\TestBundle\Entity\Category);
        $category->addItem($item);
        $item->addCategory($category);
    }
    $this->assertGreaterThan($count, $item->getCategories()->count());

    $em = $doctrine->getManager();
    foreach ($categories as $category) {

        $em->persist($category);
    }
    $em->persist($item);
    $em->flush();
    $em->clear($item);

    $item = $itemRepo->find(230045);
    $categories = $item->getRelatedItems();
    $this->assertGreaterThan($count, $categories->count()); /* Here it fails */
} 
```

我不知道为什么最后一次测试失败了。你能帮我找出我的错误吗？

我运行 Symfony 2.1.4 和 Doctrine 2.3

我有两个 ORM 对象。

## 1.项目

```
namespace Acme\TestBundle\Entity;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Table(name="item")
 */
class Item
{

  /**
   * @ORM\ManyToMany(targetEntity="Category", mappedBy="items")
   */
  private $categories;

  public function __construct()
  {
      $this->categories = new \Doctrine\Common\Collections\ArrayCollection();
  }

  /**
   * @param \Acme\TestBundle\Entity\Category $category
   */
  public function addCategory(\Acme\TestBundle\Entity\Category $category)
  {
      $this->categories[] = $category;
      return $this;
  }

  /**
   * @return \Doctrine\Common\Collections\Collection
   */
  public function getCategories()
  {
      return $this->categories;
  }
} 
```

## 2\. 类别

```
namespace Acme\TestBundle\Entity;
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Table(name="category")
 * @ORM\Entity(repositoryClass="Acme\TestBundle\Repository\CategoryRepository")
 */
class Category
{
  /**
   * @var \Doctrine\Common\Collections\ArrayCollection
   *
   * @ORM\ManyToMany(targetEntity="Item", inversedBy="categories")
   * @ORM\JoinTable(name="category_item",
   *   joinColumns={
   *     @ORM\JoinColumn(name="cat_id", referencedColumnName="id")
   *   },
   *   inverseJoinColumns={
   *     @ORM\JoinColumn(name="item_id", referencedColumnName="id")
   *   }
   * )
   */
  private $items;

  /**
   * @param \Acme\TestBundle\Entity\Item $item
   * @return Category
   */
  public function addItem(\Acme\TestBundle\Entity\Item $item)
  {
      $this->items[] = $item;
      return $this;
  }

  /**
   * @return \Doctrine\Common\Collections\Collection
   */
  public function getItems()
  {
      return $this->items;
  }
} 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:37:51.563

Hm, `$categories = $item->getRelatedItems();`. Maybe it is better to write `$categories = $item->getCategories();`?

The other suggestion is to add __construct method to Category entity class and initialize $items with `new ArrayCollection`

# c# - 如何获取使用 facebook 登录到我的应用程序的电子邮件 ID 等用户数据？

> ID：13579628
> 
> 赞同：1
> 
> 时间：2012-11-27T07:53:10.767
> 
> 标签：c#, facebook, xamarin.ios, monotouch.dialog

海我正在使用我的 monotouch 应用程序的 facebook 选项登录，我想访问这些用户的**电子邮件**ID，这可能吗？

请任何人帮助我....在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T22:12:55.173

当您执行代码的 Facebook Auth 部分时，您需要`email`在`scope`. 一旦用户授予您，您可以通过此端点查询他们的电子邮件地址 - [https://graph.facebook.com/me?fields=email&access_token=TOKEN](https://graph.facebook.com/me?fields=email&access_token=TOKEN)。

[此页面](https://developers.facebook.com/docs/concepts/login/)上有更详细的 FB 登录流程说明。

# java - Java EE 计划任务

> ID：13579631
> 
> 赞同：6
> 
> 时间：2012-11-27T07:53:20.470
> 
> 标签：java, jakarta-ee, ejb, weblogic, scheduled-tasks

我需要安排一个任务在 Weblogic 10.3 服务器上定期运行（例如每 6 小时，或者每天中午 12 点）。该任务基本上从数据库中检索一些数据并使用它执行一些业务逻辑。

实现这一目标的最佳方法是什么？我搜索了互联网，并找到了一些解决方案，例如：

*   使用定时器服务。
*   工作经理。
*   EJB 定时器。

顺便说一句，我还在学习 JavaEE，所以这可能是一个基本问题，或者我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T08:11:30.987

在 JavaEE 容器下运行时，应避免使用 JDK 的标准 Timer 功能。您应该改用 EJB 计时器；比任何专有解决方案更喜欢那些（我认为工作管理器是 WebLogic 专有的）。

从这里开始：http: [//docs.oracle.com/javaee/6/tutorial/doc/bnboy.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:11:07.430

考虑 `javax.ejb.Schedule`注释

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:07:55.800

```
Timer timer = new Timer();
timer.schedule(new MyTask(), 1000, 2000); 
```

# android - Android：日期（年、月、日）

> ID：13579632
> 
> 赞同：9
> 
> 时间：2012-11-27T07:53:43.920
> 
> 标签：android, date, calendar, gettime

我想将日期作为*年、月、日*而不用小时或分钟或其他任何东西，我不想单独获得年和月和日。因为作为一个完整的日期，我需要它来与另一个日期进行比较

例如今天`28.11.2012`并将其与`11.12.2011` 今天减去`11.12.2011`超过 280 天进行比较我想执行一些代码

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T08:01:38.647

你可以使用`SimpleDateFormat`.

获取当前日期的基础知识

```
DateFormat df = new SimpleDateFormat("MMM d, yyyy");
String now = df.format(new Date()); 
```

或者

```
DateFormat df = new SimpleDateFormat("MM/dd/yy");
String now = df.format(new Date()); 
```

**编辑：** 首先你有字符串格式的日期。你必须转换成日期甲酸盐。尝试下面的代码来做到这一点。您对 String **strThatDay**和**strTodaDay**都应用了相同的方法，您将获得两者的日历对象。

```
String strThatDay = "2012/11/27";
  SimpleDateFormat formatter = new SimpleDateFormat("yyyy/MM/dd");
  Date d = null;
  try {
   d = formatter.parse(strThatDay);//catch exception
  } catch (ParseException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  } 

  Calendar thatDay = Calendar.getInstance();
  thatDay.setTime(d); 
```

之后尝试下面的代码从两个 Date 获取 Day ：

```
long diff = today.getTimeInMillis() - thatDay.getTimeInMillis(); //result in millis

long days = diff / (24 * 60 * 60 * 1000); 
```

试试看。希望它会帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T07:59:20.493

始终使用**Simpledateformat(yyyy/mm/dd)**进行比较..

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");                           
String currentDateandTime = sdf.format(new Date()); 
```

使用此 currentDateandTime 与其他日期进行比较。

我认为这可能是一个解决方案。你必须获得 2 个日历的实例（1 个用于当前日期，另一个用于比较日期。

```
 Calendar cal1=Calendar.getInstance();   
   Date dt=null;                                                     
   try{
   dt = sdf.parse(currentDateandTime);
   cal1.setTime(dt);
   }catch (ParseException e){
     e.printStackTrace();
   }                                                
   int currentDaycmp= cal1.get(Calendar.DAY_OF_MONTH);
   int currentMonthcmp=cal1.get(Calendar.MONTH);
   int currentYearcmp=cal1.get(Calendar.YEAR);

    Calendar cal2=Calendar.getInstance();   
    Date dtend=null;                                                     
    try{
    dtend = sdf.parse(comparedate);
    cal2.setTime(dtend);
    } catch (ParseException e) {
    e.printStackTrace();
    }                                               
     int currentDayend= cal2.get(Calendar.DAY_OF_MONTH);
     int currentMonend=cal2.get(Calendar.MONTH);
     int currentyearend=cal2.get(Calendar.YEAR); 
```

现在找到不同之处

currentDaycmp-currentDayend(你的条件)..然后执行你的块..

你试试这个..可能符合你的要求..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T09:57:01.087

您可能需要为此使用[Joda-Time](http://joda-time.sourceforge.net)：

```
final DateTimeFormatter formatter = DateTimeFormat.forPattern("dd.MM.yyyy");

LocalDate first = LocalDate.parse("28.11.2012", formatter);
// LocalDate first = new LocalDate(2012, 11, 28);
// LocalDate first = LocalDate.now();
LocalDate second = LocalDate.parse("11.12.2011", formatter);

int daysBetween = Days.daysBetween(first, second).getDays(); 
```

您应该知道，`daysBetween`如果第二个日期早于本例中的第一个日期，则这是一个负值。

对于给定的示例`daysBetween`是`-353`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T09:04:33.973

```
 Calendar todayCalendar = new GregorianCalendar();
         Calendar pickedDateCalendar = new GregorianCalendar();

         todayCalendar.set(currentYear,currentMonth,currentDay); 
         pickedDateCalendar.set(birthDayDatePicker.getYear(),birthDayDatePicker.getMonth(),birthDayDatePicker.getDayOfMonth());

         System.out.println("Days= "+daysBetween(todayCalendar.getTime(),pickedDateCalendar.getTime()));

         int Days = daysBetween(todayCalendar.getTime(),pickedDateCalendar.getTime());
public int daysBetween(Date d1, Date d2){
         return (int)( (d2.getTime() - d1.getTime()) / (1000 * 60 * 60 * 24));
         } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T08:12:00.993

您可以使用 compareTo 方法。首先，确保您使用的两个日期具有相同的格式。也就是说，如果一个是 YYYY,DD,MM，那么另一个将是相同的。

```
SimpleDateFormat sdf = new SimpleDateFormat("YYYY-MM-dd");
Date firstDate = sdf.parse("2012-11-27");
System.out.println(sdf.format(firstDate)); 
```

然后你会做一个 firsDate.compareTo(SecondDate);

```
if firstDate.compareTo(SecondDate) < 280 {
...
} 
```

# perl - Perl 6 会很快包含在所有 Linux 发行版中吗？

> ID：13579635
> 
> 赞同：1
> 
> 时间：2012-11-27T07:54:03.200
> 
> 标签：perl, raku

Perl 6 会很快包含在所有 Linux 发行版中并将取代 Perl 5 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T07:55:37.277

不会。Perl6 永远不会取代 Perl5。它们是不同的语言。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-27T09:08:29.220

它不会。Perl 5 和 Perl 6 都是不同的语言。

您可能想阅读 perlmonks 上有关该主题的相关讨论：[Perl 6 会取代 Perl 5 吗？](http://www.perlmonks.org/?node_id=815428)

# php - php str_replace 十六进制颜色

> ID：13579641
> 
> 赞同：0
> 
> 时间：2012-11-27T07:54:39.973
> 
> 标签：php, str-replace

如何将此字符串替换`*#ff00ff Hello World *000000`为`<span style='color:#ff00ff'> Hello World </span>`使用 str_replace？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T07:59:42.073

```
$string = '*#ff00ff Hello World *000000';

$string = preg_replace('/\*#([a-f\d]{6})(.*)\*[a-f\d]+/', "<span style='color:$1'>$2</span>", $string);

echo $string; 
```

也可以这样做：

```
$string = '*#ff00ff Hello World *000000';

$string = preg_replace('/\*#([[:xdigit:]]{6})(.*)\*[[:xdigit:]]+/', "<span style='color:$1'>$2</span>", $string);

echo $string; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:10:30.823

```
$str = '*#ff00ff Hello World *000000';
preg_match('/(#[0-9a-f]{6})/i', $str, $matches);
echo "<span style='color:{$matches[1]}'> Hello World </span>"; 
```

# android - 如何在 EditText 的帮助下在分隔的 ListView 中搜索？

> ID：13579643
> 
> 赞同：1
> 
> 时间：2012-11-27T07:54:59.193
> 
> 标签：android, listview, search

我需要借助 EditText 在分离的列表视图中执行搜索功能。我使用了 edittext.addTextChangedListener() 方法，我得到了解决方案。但是 EditText 框只接受一个字符，当我尝试输入第二个字符时，它会导致强制关闭。

我使用了以下代码。

```
edtSearch.addTextChangedListener(new TextWatcher() {
    public void afterTextChanged(Editable s) {
        // Abstract Method of TextWatcher Interface.
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // Abstract Method of TextWatcher Interface.
    }

    public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
        // TODO Auto-generated method stub
        sAdapter.clear();
        textlength = edtSearch.getText().length();   //getting text from EditText
        Log.e("textlength",""+textlength);
        array_name.clear(); array_friendid.clear(); array_status.clear(); array_image.clear();array_thumb.clear();

        for (int i = 0; i < fullname.length; i++) {
            if (textlength <= fullname[i].length()) {
                if(edtSearch.getText().toString().equalsIgnoreCase((String)fullname[i].subSequence(0,textlength))) {
                    Log.e("arrayname",fullname[i]);

                    array_name.add(fullname[i]);       

                    array_friendid.add(friendid[i]);
                    array_status.add(status[i]);
                    array_image.add(imageurl[i]);
                    array_thumb.add(thumbnailurl[i]);
                    array_header.add(fullname[i].substring(0, 1));
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:17:26.273

我认为您可以利用 Filter 类来实现您想要的。只需覆盖列表适配器的 getFilter() 方法。这是示例代码：

```
@Override
    public Filter getFilter() {

        if(mFilter == null){
            mFilter = new Filter() {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {                
            FilterResults filterResults;

            //Do your search and initialize filterResults
              ...

            return filterResults;
        }

        @Override
        protected void publishResults(CharSequence constraint, FilterResults results) {

            if(results != null && results.values != null) {

              notifyDataSetChanged();
          }                    
        }
      };
    }

    return mFilter;
} 
```

[Filter](http://developer.android.com/reference/android/widget/Filter.html)类的优点是它在单独的线程上执行过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:00:45.313

你可以在下面放一个控件，

```
if(textlength > 3) 
for (int i = 0; i < fullname.length; i++)
        { 
```

# android - Phonegap - 在三星galaxy S3上进行测试

> ID：13579657
> 
> 赞同：1
> 
> 时间：2012-11-27T07:55:54.093
> 
> 标签：android, cordova, samsung-mobile

之前使用我的 HTC Desire 研究 phonegap 测试时（我已经研究过它，然后被转移了一年，现在再次寻找），我只是连接了我的设备，在 eclipse 中单击 run as android 然后它会自动运行应用程序通过我的设备。

但是在尝试我的新手机（SGS3）时，我得到了

```
[2012-11-27 07:48:18 - name] Android Launch!
[2012-11-27 07:48:18 - name] adb is running normally.
[2012-11-27 07:48:18 - name] Performing com.thing.name.name activity launch
[2012-11-27 07:48:18 - name] No active compatible AVD's or devices found. Relaunch this configuration after connecting a device or starting an AVD. 
```

我已经安装了我能想到的所有驱动程序，甚至安装了 Kies 和 AllShare，以防它们附带任何其他驱动程序，但仍然相同。

有没有其他人遇到过这个或知道如何解决？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:04:09.357

搜索开发人员选项并启用`USB Debugging`并确保`Unknown Sources`已激活，除非您已经这样做了。

**安卓4.2**

要使开发人员选项出现在 Android 4.2 中，您必须转到菜单“关于电话”并敲击内部版本号几次，直到吐司告诉您您现在是开发人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:05:54.723

除了@dan 的回答，您还需要确保设备处于 USB MTP 模式。（不是相机 USB 模式。）

# objective-c - 旋转在另一个视图内部的视图

> ID：13579666
> 
> 赞同：0
> 
> 时间：2012-11-27T07:56:21.903
> 
> 标签：objective-c, xcode, rotation, viewcontroller, addsubview

今天，在实施我的程序时，我遇到了一个问题。我有三种视图（小视图）。从他们那里我提出了另一种看法。（模板）当我添加到视图控制器全视图时。正如我所想，willAnimateToRotation... 对于小视图将无法正常工作，因为它们在模板内。以及 ViewController 中的模板。当应用程序旋转时，我需要更改小视图的框架。我该怎么办？如何在旋转中执行换帧？

视图正在使用 addSubview 和模板添加到模板到 VC。我将数据从模板传递到小视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:42:38.570

我会将其翻译为 ViewController 包含问题。您需要在整个视图层次结构中转发旋转消息，否则它永远不会到达您的小视图。

最好的办法是查看这里的文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

转到“实现容器视图控制器”子标题以获取描述，并转到“管理子视图控制器”子标题以获取相关代码。

# java - 使用 Open CSV 阅读器跳过第一行

> ID：13579670
> 
> 赞同：23
> 
> 时间：2012-11-27T07:56:49.580
> 
> 标签：java, opencsv

这是我目前使用的线路

```
File booleanTopicFile;
// booleanTopicFile is csv file uploaded from form
CSVReader csvReader = new CSVReader(new InputStreamReader(new FileInputStream(booleanTopicFile), "UTF-8")); 
```

想要跳过包含标题的 csv 的第一行。我不想使用任何分隔符，除了默认构造函数中已经可用的默认逗号（，）。在参数化构造函数中，有一个选项可以跳过 no。行数，但如何处理构造函数的第二个和第三个参数。

```
CSVReader csvReader = new CSVReader(new InputStreamReader(Reader reader, char c, char c1, int index); 
```

- 谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-01T08:45:03.353

CSVReader 类的构造函数将在读取文件时跳过 csv 的第一行。

```
CSVReader reader = new CSVReader(new FileReader(file), ',', '\'', 1); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-11-25T11:35:15.147

至少从 3.8 版开始，您可以使用`CSVReaderBuilder`并将其设置为跳过第一行。

例子：

```
CSVReader reader = new CSVReaderBuilder(inputStreamReader)
                .withFieldAsNull(CSVReaderNullFieldIndicator.EMPTY_SEPARATORS)
                // Skip the header
                .withSkipLines(1)
                .build(); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-01-14T14:32:49.870

我发现这个问题和回答很有帮助，我想扩展[Christophe Roussy 的评论](https://stackoverflow.com/questions/13579670/skip-first-line-using-open-csv-reader#comment29232819_14642507)。在最新的 opencsv（撰写本文时为 2.3）中，实际的代码行是：

```
new CSVReader( new StringReader(csvText), CSVParser.DEFAULT_SEPARATOR,
               CSVParser.DEFAULT_QUOTE_CHARACTER, 1); 
```

请注意，它使用 CSVParser 而不是 CSVReader。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-09-02T11:24:31.393

使用最新版本的 opencsv 版本 -

`CSVReader csvReader = new CSVReaderBuilder(new FileReader("book.csv")).withSkipLines(1).build()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-01T13:18:57.250

```
watFileCsvBeans = new CsvToBeanBuilder<ClassType>(isr)
  .withType(ClassType.class)
  .withIgnoreLeadingWhiteSpace(true)
  // CsvToBeanFilter with a custom allowLine implementation
  .withFilter(line -> !line[0].equals("skipme"))
  .build()
  .parse(); 
```

这对我来说很有用。相反，“withSkipLines”对我不起作用。opencsv 版本：5.5.2

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-10-10T13:12:08.323

您还可以使用`withFilter`：

```
watFileCsvBeans = new CsvToBeanBuilder<ClassType>(isr)
  .withType(ClassType.class)
  .withIgnoreLeadingWhiteSpace(true)
  // CsvToBeanFilter with a custom allowLine implementation
  .withFilter(line -> !line[0].equals("skipme"))
  .build()
  .parse(); 
```

# sql - 如何调用以 SYS_REFCURSOR 作为 OUT 参数的 Oracle 函数

> ID：13579672
> 
> 赞同：0
> 
> 时间：2012-11-27T07:57:09.433
> 
> 标签：sql, oracle, call, sql-function

```
create or replace
FUNCTION test_fun (
p_ref_cur               OUT SYS_REFCURSOR,
p_a_code            IN  NUMBER                                  DEFAULT 0,
p_category          IN  package.category%TYPE           DEFAULT NULL,
p_name              IN  package.name%TYPE           DEFAULT NULL,
p_display_name      IN  package.display_name%TYPE   DEFAULT NULL,
p_rowid             IN  package."rowid"%TYPE                DEFAULT NULL,
p_flg               IN  package.flg%TYPE                DEFAULT '1',
p_mod_dat           IN  package.mod_dat%TYPE            DEFAULT SYSTIMESTAMP,
p_mod_usr           IN  package.mod_usr%TYPE            DEFAULT NULL
)
RETURN NUMBER
AS 
```

如何在以 SYS_REFCURSOR 作为 OUT 参数的 oracle 中调用此函数？

**更新：** **test_fun** 将从另一个函数调用，比如**caller()**，其中要执行的完整函数将从数据库中获取并使用 execute immediate 命令执行。

```
SELECT command into cmd from data_table where id=p_id;
execute immediate (cmd); 
```

**cmd**值会像

`test_fun(v_cv1,0, 'pp', 'np123', 'np', NULL, 1, NULL, 'testuser');`

**注意：**我们可以控制**caller()**函数和要执行的**cmd**，但无法控制**test_fun()**

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:22:20.820

只需在调用块中声明一个 SYS_REFCURSOR 类型的变量，然后调用您的函数，例如从 SQL/Plus：

```
 set autoprint on;
 var cur refcursor;

 declare
      FUNCTION test_fun (
        p_ref_cur               OUT SYS_REFCURSOR)
      RETURN NUMBER is
      begin
        open p_ref_cur for select * from dual;
        return 1;
      end;

 begin
     dbms_output.put_line(test_fun(:cur));
 end;
 / 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T07:06:22.870

这个程序很神奇

```
 PROCEDURE executecmd(cmd_in IN VARCHAR2)
          AS
          v_cv1 SYS_REFCURSOR;
          BEGIN
                 dbms_output.put_line('Executing cmd: '|| cmd);

                 execute immediate 'declare
                    result number;
                   BEGIN
                    result:='||cmd_in||';'||
                   'END;'
                   USING v_cv1;
          END; 
```

# c++ - FFT 2D 内核运行时 = OpenCL 中的 0

> ID：13579673
> 
> 赞同：2
> 
> 时间：2012-11-27T07:57:11.057
> 
> 标签：c++, vector, opencl, gpgpu

我正在做一个家庭作业项目，比较快速傅立叶变换在 CPU 和 GPU 上的性能。我已经完成了 CPU 部分，但是对于 GPU，我遇到了问题。

麻烦的是内核运行时间为零，输入与输出图像相同。我在带有 AMD APP SDK 的 win7 上使用 VS2010。这是主机[**代码**](http://pastebin.com/LXNPGd7V)、[**内核**](http://pastebin.com/SGrJuUac)、处理**[图像](http://cosmin.users.sourceforge.net/testing/lena_16g_lin.pgm)**的附加**[标头](http://pastebin.com/HcwtKhpS)** ，它们可以在 The OpenCL Programming Book (Ryoji Tsuchiyama...) 中找到

我猜错误是在我们将值从图像像素传递到`cl_float2 *xm`（主机代码中的第 169-174 行）的阶段。我也无法访问向量组件来检查它，编译器不接受，`.sX`或者`.xy`抛出一个错误。其他部分 - 内核，标题...... - 对我来说看起来不错。

```
for (i=0; i < n; i++) {  
    for (j=0; j < n; j++) {  
        ((float*)xm)[(2*n*j)+2*i+0] = (float)ipgm.buf[n*j+i];   //real
        ((float*)xm)[(2*n*j)+2*i+1] = (float)0; //imag
    }   
} 
```

所以希望大家帮帮我。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T06:52:37.480

OpenCL 提供了许多不同的错误代码。
您已经通过`ret = clInstruction();`在每次通话中执行操作来检索它们，但您没有对其进行分析。

如果此值等于 ，请检查每次调用`CL_SUCCESS`。
内存不足、硬件已在使用中或源代码中存在简单错误可能总是会发生。返回值会告诉你。

另外：请检查您的`cl_context`,`cl_program`等以获取`NULL`值。

# c#-4.0 - Visual Studio - Mono 的目标包？

> ID：13579674
> 
> 赞同：1
> 
> 时间：2012-11-27T07:57:15.460
> 
> 标签：c#-4.0, mono, visual-studio-2012

有没有什么地方可以下载 Mono 框架的定位包？到目前为止我唯一发现的是这个博客：

[http://erictummers.wordpress.com/2012/01/25/target-mono-from-visual-studio/](http://erictummers.wordpress.com/2012/01/25/target-mono-from-visual-studio/)

虽然这种方法确实有效（注意版本编号） - 如果有最新的目标包可供下载，那就太好了 - 而不必去更改注册表。

非常感谢

标记。

# css - Z-index 不适用于定位

> ID：13579675
> 
> 赞同：1
> 
> 时间：2012-11-27T07:57:26.143
> 
> 标签：css, position, z-index

我已经搜索了这个主题，但似乎没有什么能帮助我解决我的问题。

我有一个搜索功能，当您开始输入时它会下降，但它会下降到隐藏搜索结果的菜单栏后面。我玩过 z-indexes，但没有任何帮助。

我读到 z-index 不适用于某些位置。这是真的？如果是这样，我怎样才能让结果显示在菜单栏上？

如果我改变位置，我的菜单就会跳出位置。

结果的css：

```
#results {
z-index: 10000;
position: absolute;
width: 400px;
float: right;
background-color: #FFF;
text-align: left; 
```

菜单的CSS：

```
.menu {
position: relative;
float: left;
width: 900px;
height: 40px;
margin-top: 17px;
z-index: 3;
margin-left: 40px;
margin-bottom: 6px; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:31:31.497

由于`.menu2`有一个`z-index`of `3`，`.banner`（谁是您的搜索下拉列表的父级）需要有一个更高`z-index`的（类名来自[Collegesa.co.za](http://collegesa.co.za/)）。

尝试设置`z-index`为`4``.banner`

```
.banner {
    z-index: 4;
} 
```

# nginx - 为什么 nginx 会返回带有某些查询字符串的错误 324？

> ID：13579676
> 
> 赞同：0
> 
> 时间：2012-11-27T07:57:30.480
> 
> 标签：nginx

我有两台服务器，具有相同的最低配置（据我所知！）。

在服务器 A 上，查询 [http://xxx.yyy.zzz.A/](http://xxx.yyy.zzz.A/) 返回默认的 nginx index.html 页面

在服务器 B 上，查询 [http://xxx.yyy.zzz.B/](http://xxx.yyy.zzz.B/) 返回默认的 nginx index.html 页面

在服务器 A 上，查询 [http://xxx.yyy.zzz.A/?%2F](http://xxx.yyy.zzz.A/?%2F) 返回默认的 nginx index.html 页面

在服务器 B 上，对 [http://xxx.yyy.zzz.B/?%2F](http://xxx.yyy.zzz.B/?%2F)的查询 返回错误 324 (net::ERR_EMPTY_RESPONSE)

%2F 是一个 CGI 编码的正斜杠，这就是我发现这个问题的方式。它似乎也发生在 %2G、%2H 和 %2I 上。我在这里停止了测试。

324 请求不会显示在访问或错误日志中。

相关的 nginx.conf 是

```
server {
  listen      80 default_server;
  server_name "";
  location / {
    root   html;
    index  index.html index.htm;
  }
} 
```

可能是什么问题，或者我如何进一步追踪它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:25:49.623

通常，诸如“嘿，这有一半的时间”或“这在服务器 A 上有效但在服务器 B 上无效”之类的问题是负载平衡/代理问题。

您是否检查了负载均衡器的配置？很有可能那里出了点问题，并且错误记录在那里。

# c++ - C 编程 fwrite 跳转到文件末尾

> ID：13579682
> 
> 赞同：3
> 
> 时间：2012-11-27T07:58:02.997
> 
> 标签：c++, c, fwrite, fseek, ftell

我正在编写一个 C 模块，但遇到了一个以前从未见过的有趣问题。

```
// Many other operations before this point
fseek(samples_file, 0, SEEK_SET);
printf("ftell A1 %llu\n", ftell(samples_file));
count = fwrite(channel_buffer+chan_type.size*set_index, 1, chan_type.size, samples_file);
printf("count %llu\n", count);
printf("ftell A2 %llu\n", ftell(samples_file));
// Many more operations to come after this point 
```

当我运行模块时，我得到如下打印输出：

```
ftell A1 0
count 8
ftell A2 6018 
```

我已将文件指针设置为文件的开头。当我写一些数据时，它应该在我寻找的位置写出数据，然后用写入的字节数（在本例中为 8）增加文件位置。但是，当我执行 ftell 时，位置似乎突然跳到了 6018（恰好是文件的原始大小加 8）。

为什么会发生这种情况以及如何防止这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T07:59:34.980

听起来文件已以附加模式打开。检查`"a"`第二个参数中是否没有`fopen()`.

# android - 在破译 NFC AAR 代码方面需要帮助

> ID：13579684
> 
> 赞同：0
> 
> 时间：2012-11-27T07:58:15.227
> 
> 标签：android, uri, nfc, ndef, android-applicationrecord

我已经开始了解更多关于 AAR 和 NFC 的知识，并发现这段简洁的代码可以正常工作。但是，我很难理解它的真正作用以及它是否已经将 AAR 添加到 NDEF 消息中。有人可以指导我哪一行代码做什么？非常感谢！

```
private NdefMessage getTagAsNdef() {  
    boolean addAAR = false;  
    String uniqueId = "ichatime.com";      
    byte[] uriField = uniqueId.getBytes(Charset.forName("US-ASCII"));  
    byte[] payload = new byte[uriField.length + 1];       //add 1 for the URI Prefix  
    payload[0] = 0x01;                        //prefixes http://www. to the URI  
    System.arraycopy(uriField, 0, payload, 1, uriField.length); //appends URI to payload  
    NdefRecord rtdUriRecord = new NdefRecord(  
    NdefRecord.TNF_WELL_KNOWN, NdefRecord.RTD_URI, new byte[0], payload);  
    if(addAAR) {  
        // note: returns AAR for different app (nfcreadtag)  
        return new NdefMessage(new NdefRecord[] {  
               rtdUriRecord, NdefRecord.createApplicationRecord("com.example.ponpon")  
             });   
    } else {  
       return new NdefMessage(new NdefRecord[] {  
                       rtdUriRecord});  
    }  
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:06:42.557

AAR 是外部类型记录的一种形式，您可以从 nfc-forum.org 下载其规范。外部类型由三部分数据组成：

*   领域
*   类型
*   价值

我编写了一个库[项目](http://code.google.com/p/ndef-tools-for-android/)，它提供高级 NDEF 记录对象，其中还包括外部类型记录。

还有一个模板用于在您可能感兴趣的活动中使用 NFC :-)

# telerik - 如何计算具有特定值的 Telerik Grid 行？

> ID：13579687
> 
> 赞同：0
> 
> 时间：2012-11-27T07:58:30.060
> 
> 标签：telerik, grid

我的 asp.net 应用程序上有一个 Telerik 网格，它有两列（ExitTime、EntryTime）显示时间值。我要数：

1.  ExitTime 中具有空值的项目总数。
2.  EntryTime 中具有空值的项目总数。
3.  ExitTime 中具有时间值的项目总数。
4.  EntryTime 中具有时间值的项目总数。
5.  EntryTime 有时间值但 ExitTime 没有值（空）的项目总数。
6.  EntryTime 和 ExitTime 都没有值（null）的项目总数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:11:16.557

这确实应该使用来自数据源的数据进行聚合，而不是从网格中的行进行解释。

# html - 标签高度问题

> ID：13579692
> 
> 赞同：0
> 
> 时间：2012-11-27T07:59:24.603
> 
> 标签：html, css, alignment

我希望我的标签与其中的文本大小完全相同，上下部分没有任何额外的空格，就像它在图像中显示的那样（我的意思是红色矩形）![在此处输入图像描述](../Images/bcd3cae2e55baf77145f87dc32fd1371.png)

这是标记

```
<ul>
    <li><a href="#">content</a></li>
    <li><a href="#">content</a></li>
    <li><a href="#">content</a></li>
</ul> 
```

这是我的[JSFiddle](http://jsfiddle.net/EGDuU/10/)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:04:00.053

我知道的唯一方法是根据行高设置高度：

```
li, a {
    line-height: 12px;
} 
```

[http://jsfiddle.net/EGDuU/12/](http://jsfiddle.net/EGDuU/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:14:24.980

这只能通过与所使用的特定字体和特定文本内容相关的设置来实现。

如果将文本设置为实心，即`line-height: 1`，在大多数字符上方和大多数字符下方仍有空间。大多数拉丁字母位于文本基线上，并且在其下方有一些空间用于下降（以及字符下的变音符号）。另一方面，一些字符，如“j”和“Å”可能会稍微超出字体高度的边缘。

对于特定示例“内容”和 Arial 字体，合适的设置似乎是

```
li { line-height: 0.6; }
a { position: relative; bottom: 0.02em; } 
```

当然，这样的样式会非常脆弱，并且使文本碰到边框会降低易读性和美观性。

# php - php 在 PHP 中添加日期

> ID：13579693
> 
> 赞同：-2
> 
> 时间：2012-11-27T07:59:30.407
> 
> 标签：php

我想根据动态值添加或删除一天（或更多天）。有时我想删除/添加 4 天，下一次可能是 9 天。我怎么能在 PHP 中做到这一点？我希望有我的时间戳解决方案，所以我可以使用秒数。

示例：2012-04-21 + 86400 // 添加一天

有什么好的解决方案吗？还是有其他好的方法可以使用动态值来删除或添加我想要的任意天数。

请随时提出建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:02:48.647

看看 strtotime()

[http://fr2.php.net/manual/en/function.strtotime.php](http://fr2.php.net/manual/en/function.strtotime.php)

```
$unix_time = strtotime("+1 day", strtotime("2012-11-01"));
echo date("Y-m-d H:i:s", $unix_time); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:03:00.270

你可以使用 strtotime

```
$new_date = date('Y-m-d', strtotime($old_date . ' +1 day')); 
```

# vb.net - dnn 在自定义模块中加载可用的皮肤

> ID：13579696
> 
> 赞同：0
> 
> 时间：2012-11-27T07:59:52.597
> 
> 标签：vb.net, dotnetnuke, skins

我想在自定义模块内的下拉列表中加载所有可用的皮肤。做这个的最好方式是什么？

VB 代码表示赞赏。

谢谢， 阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:30:56.153

Amith，皮肤通常位于 Portals/XXX/Skins 中，其中 XXX 可以是 _default，也可以是数字或 Portal 的名称。

我不记得是否所有的皮肤路径都存储在数据库中。您可能需要查看 SQL Server 中的数据库并查看一下。

否则只需编写一些 VB 来查看该区域的文件系统，查找 Skins 文件夹，并且 skins 文件夹中的任何文件夹名称都是一个皮肤包。该文件夹中的任何 .ascx 文件都是可用的皮肤。

可能会有所帮助：

[http://www.developerfusion.com/code/3681/list-files-in-a-directory/](http://www.developerfusion.com/code/3681/list-files-in-a-directory/)

[http://www.thescarms.com/dotnet/ListFiles.aspx](http://www.thescarms.com/dotnet/ListFiles.aspx)

[http://forums.eukhost.com/f15/visual-basic-how-list-files-directory-list-view-15722/](http://forums.eukhost.com/f15/visual-basic-how-list-files-directory-list-view-15722/)

# asp.net - 从 aspx 异步调用方法

> ID：13579700
> 
> 赞同：-1
> 
> 时间：2012-11-27T08:00:02.613
> 
> 标签：asp.net, c#-4.0, asynchronous

我正在使用 .net4.0 框架我正在使用 c# 处理 Web 项目我想发出一些请求，该请求将预先填充缓存中的一些项目。

前任。用户来到应用程序的主页。[我将在主页（.ASPX）中编写一些代码，它将调用一些方法，该方法将从磁盘读取一些文件并将它们放入缓存中，尽管我不需要主页上的缓存......此时读取文件从磁盘操作会有点冗长......我会完全加载主页而不等待方法的响应（它将从磁盘读取文件）] 像

```
function page_load{

CacheGenerator.CreateCache();//this is going to be heavy operation..i don't want                           to wait for this operation to complete
repose.write("Hello world:); // this statement should run moment after above function is called
} 
```

还有一件事我们可以在不使用线程的情况下做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:06:26.423

任何异步都是以一种或另一种方式“使用线程”。

更重要的是，您不应该从页面启动任何异步操作。该页面仅在请求期间存在于内存中。当页面不再存在于内存中后，您的异步操作可能会完成。

您可以使用`Task`该类从 global.asax 中的 Application_Start 事件启动异步操作。

# javascript - 不能使用 javascript 来运行 html 单选按钮

> ID：13579702
> 
> 赞同：0
> 
> 时间：2012-11-27T08:00:05.967
> 
> 标签：javascript, forms, radio-button

我的 <head> 中有这个脚本：

```
<script>
var rad = document.getElementsByName('search_type');
alert(rad[1]);
var prev = null;
for (var i = 0; i < rad.length; i++) {
    rad[i].onclick = function() {
        (prev)? console.log(prev.value):null;
        if(this !== prev) {
            prev = this;
        }
        console.log(this.value)
        alert(this.value);
    };
}
</script> 
```

这是我的表格：

```
<form name="search_form" action="<?php echo $_SERVER['PHP_SELF']?>" method="post"> 
    <table border="0"> 
        <tr>
            <td class="input">
                <input type="radio" name="search_type" value="search_code" checked>1st type<br>
                <input type="radio" name="search_type" value="search_title">2nd type<br>
                <input type="radio" name="search_type" value="search_filter">3rd type<br>
            </td>
        <tr/>
    </table> 
</form> 
```

但所有警报都不起作用。我在控制台中没有错误。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T08:05:02.587

在解析单选按钮的 HTML 代码之前，您正在运行脚本。

将脚本放在表单下方，或在加载事件中运行代码：

```
window.onload = function() {

  var rad = document.getElementsByName('search_type');
  alert(rad[1]);
  var prev = null;
  for (var i = 0; i < rad.length; i++) {
    rad[i].onclick = function() {
      (prev)? console.log(prev.value):null;
      if(this !== prev) {
        prev = this;
      }
      console.log(this.value)
      alert(this.value);
    };
  }

}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:12:18.277

你可以用一些 jQuery 来简化你的代码：

```
$(document).ready(function() {
    var rad = $('[name="search_type"]');
    console.log(rad);
    var prev = null;
    rad.click(function() {
        console.log(prev, $(this).is(':checked'));
        if (this !== prev) {
            prev = this;
        }
        console.log(prev, $(this).is(':checked'));
    });
}); 
```

[http://jsfiddle.net/f2aDK/](http://jsfiddle.net/f2aDK/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T08:25:03.940

在表单之后移动它的脚本。在浏览器解析 DOM 元素之前，javascript 无法读取 DOM。

```
<form name="search_form" action="<?php echo $_SERVER['PHP_SELF']?>" method="post"> 
    <table border="0"> 
        <tr>
            <td class="input">
                <input type="radio" name="search_type" value="search_code" checked>1st type<br>
                <input type="radio" name="search_type" value="search_title">2nd type<br>
                <input type="radio" name="search_type" value="search_filter">3rd type<br>
            </td>
        <tr/>
    </table> 
</form>

<script>
var rad = document.getElementsByName('search_type');
alert(rad[1]);
var prev = null;
for (var i = 0; i < rad.length; i++) {
    rad[i].onclick = function() {
        (prev)? console.log(prev.value):null;
        if(this !== prev) {
            prev = this;
        }
        console.log(this.value)
        alert(this.value);
    };
}
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T08:15:31.100

首先添加jquery库

```
 $(document).ready(function () {
             $('[name="search_type"]').live('click', function (event) {
                     var rad = document.getElementsByName('search_type');
                        alert(rad[1]);
                       var prev = null;
                       for (var i = 0; i < rad.length; i++) {
                           rad[i].onclick = function() { 
                               (prev)? console.log(prev.value):null;
                               if(this !== prev) {
                                prev = this;
                                }
                              console.log(this.value)
                              alert(this.value);
                            };
                        }
    });
    }); 
```

# http - java.io.IOException: 42-J2me 中的 HTTP 操作错误

> ID：13579704
> 
> 赞同：1
> 
> 时间：2012-11-27T08:00:09.910
> 
> 标签：http, java-me

我正在 J2me 中为诺基亚 Asha 305 开发一个移动应用程序，它将连接一个 web 服务（WCF RESTful 服务）。

从 SIM 2 连接工作正常，但是当我尝试连接 SIM 1 时，它会引发以下异常

```
java.io.IOException: 42-Error in HTTP operation 
```

# php - 根据多个mysql表的左连接获取行数

> ID：13579707
> 
> 赞同：0
> 
> 时间：2012-11-27T08:00:19.563
> 
> 标签：php, mysql, left-join

我有一个疑问：

```
SELECT students.rollno, students.name, COUNT( sp.paperid ) AS papers
FROM sps sp
LEFT JOIN students ON students.studentid = sp.studentid
LEFT JOIN str st ON st.studentid = sp.studentid
LEFT JOIN iars ir ON ir.paperid = sp.paperid
LEFT JOIN attndata at ON at.iarsid = ir.id
LEFT JOIN hedata he ON he.iarsid = ir.id
LEFT JOIN assigndata asg ON asg.iarsid = ir.id
WHERE sp.studentid = at.studentid
AND sp.studentid = asg.studentid
AND sp.studentid = he.studentid
AND students.course =4
AND st.semesterid =1
AND st.sessionid =12
AND students.status = 'Regular'
GROUP BY students.rollno 
```

我有一个数据库，其中有学生数据，即他们的论文、个人数据、出勤率、作业、考试数据。我想计算表中有数据的论文数量，例如 attndata 即出勤，assigndata 即分配和 hedata 即考试，sps 表具有学生正在学习的 paperid，str 表与学生学期相关。请帮助获得正确的论文数量。

谢谢。

# python - 是否可以在不保存的情况下在 Django 中处理文件？

> ID：13579708
> 
> 赞同：0
> 
> 时间：2012-11-27T08:00:28.020
> 
> 标签：python, django

我`pdftk`用于处理 PDF 文件。

```
new_doc.save()
url = "/docs/" +settings.MEDIA_URL + new_doc.pdf_file.name
command = 'pdftk '+url+" dump_data_fields" 
```

问题是我必须使用`new_doc.save`before `pdftk`。

有没有办法`pdftk`在不保存的情况下处理文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:36:26.913

使用[`subprocess.Popen()`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen)with[`subprocess.PIPE`](http://docs.python.org/2/library/subprocess.html#subprocess.PIPE)作为`stdin`and`stdout`参数。因为`pdftk`可以从`stdin`您那里获取输入，然后可以直接将文件“写入”`pdftk`而不是文件系统：

```
import subprocess

command = ['pdftk', '-', 'dump_data_fields']
p = subprocess.Popen(command, stdin=subprocess.PIPE, stdout=subprocess.PIPE)
output, errorout = p.communicate(input=new_doc_data) 
```

该[`Popen.communicate()`方法](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.communicate)返回`stdout`和`stderr`结果。

请注意，`input`参数 to`.communicate()`必须是字符串。如果`new_doc`是某种文件对象，则必须传入`new_doc.read()`或类似的结果；在上面的示例中，我使用变量名称`new_doc_data`来指示您将数据`new_doc`作为字符串传递，因为我不知道您可以在这些对象上使用什么 API。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T09:26:17.747

最好的选择是使用 StringIO

我假设在某些时候 new_doc 来自模板并且它是某种文本。在这种情况下，你可以做这样的事情。

```
from StringIO import StringIO
new_doc = 'foobar'
doc = StringIO(new_doc)
doc.seek(0)
doc.read() 
```

输出将是“foobar”

第一行 import StringIO（对于更快的版本，请执行 From cStringIO import StringIO）。然后我们创建一个字符串并用它实例化一个 StringIO 对象。从那里它几乎就像一个

# php - 如何在 JSON 响应中捕获错误？

> ID：13579712
> 
> 赞同：1
> 
> 时间：2012-11-27T08:00:52.080
> 
> 标签：php, json, wordpress, api, twitter

我正在使用 wordpress 函数 wp_remote_get 从 twitter 获取 json 数据，如下所示：

```
$response = wp_remote_get('http://api.twitter.com/1/statuses/user_timeline.json?screen_name=twitter');
$json = json_decode($response['body']); 
```

它工作正常。但是，如果 twitter 返回一些错误，它完全会在我的页面上产生问题。在这种情况下，我页面上的内容在该错误部分之后不会加载。那么，只有在没有错误的情况下，我才能捕获错误并继续。

例如，如果 twitter 限制超出，它会返回以下响应：

```
{"request":"\/1\/statuses\/user_timeline.json?screen_name=twitter","error":"Rate limit exceeded. Clients may not make more than 150 requests per hour."} 
```

从上面的响应中，我怎么能得到错误。我正在尝试关注，但它不起作用（我的页面根本没有加载）

```
if (!isset($json['error']){
    //continue
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T08:05:06.927

它不起作用，因为您试图`$json`作为数组访问，但事实并非如此。这是一个对象，所以使用：

```
if (!isset($json->error){
    //continue
} 
```

您的页面无法加载，因为它会导致致命错误，进而产生 500 内部服务器错误。如果您检查错误日志，您会发现：

> 致命错误：不能在 .... 中使用 stdClass 类型的对象作为数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:11:18.077

您需要使用 json_decode 在对象中“转换”您的“json 字符串”。

```
$j = json_decode($json);
echo $j->{'error'} 
```

在这里你会找到你需要知道的关于 json_decode 的一切：http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

# sql - 替换函数以停止解码我的 html 标签 SQL

> ID：13579713
> 
> 赞同：1
> 
> 时间：2012-11-27T08:00:58.737
> 
> 标签：sql, xml, tags

我有这个代码：

```
DECLARE @body nvarchar(max)

    DECLARE @Query nvarchar(max)
    SET @Query = 'SELECT TOP 1 @body = sbdp.bdParameters from P'+@InternalEntityID+'..SchedulerBatchDetailParameters sbdp with(NoLock) WHERE sbdp.fileID=@FileID'

    DECLARE @result as nvarchar(max)
    exec sp_executesql @Query, N'@body varchar(max) output, @FileID as Int', @FileID = @FileID, @body = @result output

--Set bdParameters to XML
    DECLARE @xmltemp xml
    DECLARE @message nvarchar(max)
    SELECT @xmltemp = @result

--Set @message to attribute @emailMsg
    SELECT @message = a.b.value('@emailMsg', 'nvarchar(max)')
    FROM @xmltemp.nodes('/root/row') as a(b)

if @message is not null 
    begin
        if @message <> ''
        begin
            set @EmailBodyTemplate = replace(@EmailBodyTemplate, 'You are receiving this notification because you have agreed to receive specific community and account notifications via e-mail. &lt;br /&gt;Please view the attachment for our latest communication to you.', ''+@message+''); 
        end
    end 
```

我正在从 bdParameters 表中选择一个主体。正文包含类似的值

`&lt;BOLD&gt;Hello!&lt;/BOLD&gt;` 但函数替换后，值变为`<BOLD>Hello!</BOLD>`

我希望它停止这样做。我希望值保持编码。如何？

# spring-integration - Spring Integration：使用 ftp:outbound-adapter 创建动态目录

> ID：13579728
> 
> 赞同：3
> 
> 时间：2012-11-27T08:02:34.187
> 
> 标签：spring-integration

我们希望能够在创建通道后更改通道上的 FTP 目录。在我们的特定用例中，FTP put 的子目录是在运行时确定的。例如：我们有用户上传的每日报告。它应该存储在 ftp 服务器中的每日文件夹中。例如：`test/reports/27-11-2012/abc.pdf`等`test/reports/28-11-2012/abc.pdf`。

像这样

```
<int-ftp:outbound-channel-adapter id="ftpOutbound" channel="ftpChannel" remote-directory="remoteDirectoryPath" 
   session-factory="ftpClientFactory" /> 
```

remoteDirectoryPath - 它应该附加运行时

请问有人可以给我们解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:31:24.443

利用`remote-directory-expression`

@beanName.method() 当前在此表达式中不可用；您将需要使用 SpEL 来生成目录...

```
"'test' + T(java.io.File).separator + new java.text.SimpleDateFormat('yyyyMMDD').format(new java.util.Date())" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T13:10:20.323

您可以在运行时将目录/路径分配给 ftp:outbound-channel-adapter。我在这里处理数据。你可以看看这个。这对我有用。

**xml端：**

```
<int-ftp:outbound-channel-adapter id="ftpOutboundAdapter" session-factory="ftpSessionFactory"
    channel="sftpOutboundChannel"
    remote-directory-expression="@targetDir.get()"
    remote-filename-generator="fileNameGenerator"/>

<bean id="targetDir" class="java.util.concurrent.atomic.AtomicReference">
    <constructor-arg value="D:\PATH\"/>
</bean> 
```

在此块中...`remote-directory-expression="@targetDir.get()"` 用于在运行时设置目录/路径。

**Java端：**

```
AtomicReference<String> targetDir = (AtomicReference<String>)appContext.getBean("targetDir", AtomicReference.class);
    targetDir.set("E:\PATH\"); 
```

通过，你可以设置你的路径。

# django - django中ajax的成功函数

> ID：13579729
> 
> 赞同：0
> 
> 时间：2012-11-27T08:02:40.010
> 
> 标签：django, jquery, django-views

在意见中：

```
return render_to_response("main.html", RequestContext(request, {'form':form, "result":result})) 
```

在模板中我有这个 jquery 函数：

```
$('#submitButton').click(function(e) {
            e.preventDefault();
            var dataPosted = $("#mainSubmit").serialize();
            $.ajax({
                type: "POST",
                data: dataPosted,
                url: 'main/',
                success: function(data) {
                    $("#mainDiv").html(data);
                    $(".response").html({{ result }});
                    $(".response").show();
                }
            });
        });
    });

<div id="mainDiv" class="part">
    <form id="mainSubmit" action="main/" method="POST" name="submitForm">
        {% csrf_token %}       
            {{ form.non_field_errors }}
            {{ form.as_p }}
        <input type="submit" value="Submit" id="submitButton"/>
        <div class="response"  style="display: none;"></div>
    </form>
</div> 
```

但似乎无法将数据分配给这样的响应 div（似乎未定义数据）。所以我不知道将数据发送到模板的方式是什么。如果我`Httpresponse(result)`在视图中使用，那么我不能刷新我的表单，只有我可以显示我从视图发送的响应 div 数据。那么方法是什么？

编辑：这是我的看法。之前，我没有为条件 if form.is_valid(): 设置 else ，但我在这里使用，因为我认为如果我不这样做，可能会导致一些可能性。我不知道什么是最好的方法。

```
def mainFunc(request):
    if request.is_ajax():        
        if request.method == 'POST':
           form = mainForm(request.POST)
              if form.is_valid():             
                 // process the form     
                 result = "successful"
                 to_json = {'form':form, 'result':result}
                 return HttpResponse(json.dumps(to_json), mimetype='application/json')
              else:
                  result = ""
                  to_json = {'form':form, 'result':result}
                  return HttpResponse(json.dumps(to_json), mimetype='application/json')
        else:
            form = mainForm()
            return render_to_response('main.html', RequestContext(request, {'form':form}))
    else:
        return render_to_response("ajax.html", {}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:11:46.217

您需要以 JSON 等格式返回响应

您可以使用[此代码段](http://djangosnippets.org/snippets/154/)或更简单的代码，如下所示：

```
from django.utils import simplejson
to_json = {'form':form, "result":result}
return HttpResponse(simplejson.dumps(to_json), mimetype='application/json') 
```

然后你就可以在你的JS代码中使用`data.result`and了。`data.form`

如果您对 ajax 和非 ajax 调用使用相同的视图，则可以使用`request.is_ajax()`

此外，您将无法在 JS 回调中使用模板标签和过滤器。因此，您需要在通过 JSON 发送表单之前预渲染表单

所以最后的代码：

```
to_json = {'form':form, "result":result}
if request.is_ajax():
    to_json['form'] = to_json['form'].as_p()
    return HttpResponse(simplejson.dumps(to_json), mimetype='application/json')
else:
    render_to_response("main.html", RequestContext(request, {'form':form, "result":result})) 
```

**编辑**我假设这`ajax.html`是整个页面`main.html`的模板，并且是`mainDiv`部分页面的模板

因此，在`is_ajax()`您的部分视图中，您可以像这样返回数据。

```
to_json = {}
to_json['form'] = render_to_string('main.html', {'form': form}, context_instance=RequestContext(request))
to_json['result'] = result
return HttpResponse(json.dumps(to_json), mimetype='application/json') 
```

对于 GET 和 POST AJAX 调用，您总是会返回这样的数据

在 JS 中你会得到这样的数据：

```
$("#mainDiv").html(data.form);
$(".response").html(data.result);
$(".response").show(); 
```

# css - 如何使用关键帧动画分别为多个 CSS 变换属性设置动画

> ID：13579730
> 
> 赞同：17
> 
> 时间：2012-11-27T08:02:44.153
> 
> 标签：css, animation, transform, css-animations

我想使用这样的关键帧动画分别为两个（或更多）CSS变换属性设置动画：

```
@keyframes translatex {
    100% {
        transform: translateX(100px);
    }
}
@keyframes rotatez {
    100% {
        transform: rotateZ(80deg);
    }
} 
```

HTML：

```
<div class="rect"></div> 
```

动画应以`translatex`0 秒延迟开始并持续 5 秒。动画应以`rotatez`1 秒延迟开始并持续 3 秒。元素开始移动，`.rect`1 秒后开始旋转，3 秒后停止旋转，再过 1 秒后完成移动。

应用动画：

```
.rect {
    animation-name: translatex, rotatez;
    animation-duration: 5s, 3s;
    animation-timing-function: ease, ease-in-out;
    animation-delay: 0s, 1s;
    animation-direction: forward, forward;
} 
```

问题是只`rotatez`应用了动画。

有没有办法只使用 CSS 来实现动画，例如关键帧动画或过渡，还是我需要 JavaScript 和`requestAnimationFrame`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-27T08:30:12.680

是的，有可能。与其调用两个动画名称，不如只创建一个包含两个动作的动画：

```
@keyframes translateXandZ {
    100% {
        transform: translateX(100px) rotateZ(80deg);
    }
} 
```

查看 Google 的“[动画您的 HTML5](http://animateyourhtml5.appspot.com/pres/index.html?lang=en#12) ”演示文稿。

这是一个解决方法，即使它有点粗略：

```
@-webkit-keyframes translateXandZ {
    0% {-webkit-transform: translateX(0px) rotateZ(0deg);}
    2% {-webkit-transform: translateX(1px) rotateZ(0deg);}
    5% {-webkit-transform: translateX(3px) rotateZ(0deg);}
    20% {-webkit-transform: translateX(20px) rotateZ(0deg);}
    80% {-webkit-transform: translateX(80px) rotateZ(80deg);}
    95% {-webkit-transform: translateX(97px) rotateZ(80deg);}
    98% {-webkit-transform: translateX(99px) rotateZ(80deg);}
    100% {-webkit-transform: translateX(100px) rotateZ(80deg);}
} 
```

您的动画是线性的，但为了使其轻松进出，我播放了动画的开头和结尾。它仍然不完美，但这是我看到你如何得到你想要的东西的唯一方法。

# r - 为数据框中的某些值添加前导空格

> ID：13579733
> 
> 赞同：0
> 
> 时间：2012-11-27T08:02:58.487
> 
> 标签：r

我有以下数据框，对于每个正数（是的，它们需要存储为字符串）我想添加一个前导空格。

```
d <- data.frame(c1 = c("4", "-1.5", "5", "-3"))

> d
    c1
1    4
2 -1.5
3    5
4   -3 
```

到目前为止，我使用 grep 和 invert 只返回我想添加前导空格的正数：

```
d$c1[grep("-", d$c1, invert = TRUE)] 
```

但是，我不确定如何进行。我认为我宁愿使用索引而不是实际数字。并且可能包含gsub？是对的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:34:38.653

这是一种使用`formatC()`. 使用 可以实现类似的结果`sprintf()`。请注意，我不只是添加一个空格。相反，这种方法将每个字符串填充到最大宽度。

```
d <- data.frame(c1 = c("4", "-1.5", "5", "-3"), stringsAsFactors = FALSE)
d <- transform(d, d2 = formatC(c1, width = 4), stringsAsFactors = FALSE)

R> d
    c1   d2
1    4    4
2 -1.5 -1.5
3    5    5
4   -3   -3
R> str(d)
'data.frame':   4 obs. of  2 variables:
 $ c1: chr  "4" "-1.5" "5" "-3"
 $ d2: chr  "   4" "-1.5" "   5" "  -3" 
```

如果您不提前知道`width`参数应该是什么，请从以下位置计算`d$c1`：

```
R> with(d, max(nchar(as.character(c1))))
[1] 4 
```

或者直接内联使用

```
d <- transform(d, d2 = formatC(c1, width = max(nchar(as.character(c1)))),    
               stringsAsFactors = FALSE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:07:08.510

`paste(' ',d[d[,1] > 0,])`这看起来像你想要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T21:11:55.323

s的`print`方法`data.frame`具有很好的自动填充功能。通常，字符串在左侧用空格填充以确保右对齐（默认情况下）。您可以通过捕获打印输出来利用这一点。例如，使用您的`d`：

```
> print(d, print.gap = 0, row.names = FALSE)
  c1
   4
-1.5
   5
  -3 
```

该参数`print.gap = 0`确保最长的字符串前面没有额外的填充空格。`row.names = FALSE`防止打印行名。

这种情况有几个特殊之处：列名比数据中最长的字符串短，并且`data.frame`只有一列。概括地说，您可以对数据进行子集化`unname`：

```
myChar <- unname(d[, 1, drop = FALSE]) 
```

然后，您可以使用以下方法捕获`print`ed 对象`capture.output`：

```
> (dStr <- capture.output(print(myChar, print.gap = 0, row.names = FALSE)))
[1] "  NA" "   4" "-1.5" "   5" "  -3" 
```

由于还打印了列名，因此您可以对对象进行子集化：

```
> dStr[-1]
[1] "   4" "-1.5" "   5" "  -3" 
```

这样，您不必知道最长的字符串有多长，并且可以处理大多数数据类型，而不仅仅是字符。

# sql-server - SQL Server：如何在查询中使用“case when”？

> ID：13579750
> 
> 赞同：0
> 
> 时间：2012-11-27T08:04:33.323
> 
> 标签：sql-server, database, sql-server-2008-r2, case-when

我尝试`case when`使用`null`并`not null`设置为值`ErrorCode`字段。

**前任。**

```
EmpNo|ChkDate                |ChkIn                  |ChkOut                 |ErrorCode
00001|2012-10-01 00:00:00.000|2012-10-01 07:21:00.000|2012-10-01 17:05:00.000|0
00002|2012-10-01 00:00:00.000|2012-10-01 22:17:00.000|2012-10-01 00:00:00.000|6
00003|2012-10-01 00:00:00.000|2012-10-01 00:00:00.000|2012-10-01 19:30:00.000|6
00004|2012-10-01 00:00:00.000|NULL                   |NULL                   |7
00005|2012-10-01 00:00:00.000|2012-10-01 07:10:00.000|2012-10-01 12:00:00.000|0
00006|2012-10-01 00:00:00.000|2012-10-01 13:50:00.000|2012-10-01 19:20:00.000|0 
```

**但我需要输出（错误代码）**

```
EmpNo|ChkDate                |ChkIn                  |ChkOut                 |ErrorCode
00001|2012-10-01 00:00:00.000|2012-10-01 07:21:00.000|2012-10-01 17:05:00.000|0
00002|2012-10-01 00:00:00.000|2012-10-01 22:17:00.000|2012-10-01 00:00:00.000|6
00003|2012-10-01 00:00:00.000|2012-10-01 00:00:00.000|2012-10-01 19:30:00.000|6
00004|2012-10-01 00:00:00.000|NULL                   |NULL                   |7
00005|2012-10-01 00:00:00.000|2012-10-01 07:10:00.000|2012-10-01 12:00:00.000|8
00006|2012-10-01 00:00:00.000|2012-10-01 13:50:00.000|2012-10-01 19:20:00.000|8 
```

**ChkIn 和 ChkOut 中的值是半天。我需要设置值 = 8。但我尝试 = 0。**

**此代码：**

```
SELECT
   tf.EmpNo, tf.ChkDate, tf.ChkIn, tf.ChkOut,
   CASE
      WHEN ChkIn is not null and Convert(nvarchar(10), ChkOut,108) != '00:00:00'
         THEN 0
      WHEN ChkIn is not null and Convert(nvarchar(10) ,ChkOut,108) = '00:00:00'
         THEN 6
      WHEN Convert(nvarchar(10),ChkIn,108) = '00:00:00' and ChkOut is not null
         THEN 6
      WHEN Convert(nvarchar(10),ChkOut,108) <= '12:00:00'
         OR Convert(nvarchar(10),ChkOut,108) >= '12:00:01' Then 8
      WHEN ChkIn is null and ChkOut is null THEN 7 
   END as 'ErrorCode'
FROM filesTA tf
WHERE tf.ChkDate = '2012-10-01' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:11:13.977

问题似乎是您的条件“重叠”。我的意思是早期条件适用（在您的情况下：第一个条件），后面的条件也适用，但`case`语句在第一次匹配时结束。

您需要做的是重新表述您的条件，以便它们唯一地识别每个案例。

你的第一个条件是`ChkIn`不应该也不`null`应该`ChkOut`等于`00:00:00`。虽然对于您期望结果为 的行，此条件也为真，但语句`8`应用了第一个“匹配” 。`case`

**编辑**
但是，我确实不太了解您对预期输出时间`0`和预期时间的要求`8`。也许您可以进一步解释应该返回哪个值的确切条件。我无法理解*ChkIn 中的值，而 ChkOut 是半天。我需要设置值 = 8。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:18:14.167

您必须在您的案例陈述中提供不会错误地返回 true 的条件。您可以尝试以下方法将计算移到 8 之前：

```
SELECT
   tf.EmpNo, tf.ChkDate, tf.ChkIn, tf.ChkOut,
   CASE
      WHEN Convert(nvarchar(10),ChkOut,108) <= '12:00:00'
         OR Convert(nvarchar(10),ChkOut,108) >= '12:00:01' Then 8
      WHEN ChkIn is not null and Convert(nvarchar(10), ChkOut,108) != '00:00:00'
         THEN 0
      WHEN ChkIn is not null and Convert(nvarchar(10) ,ChkOut,108) = '00:00:00'
         THEN 6
      WHEN Convert(nvarchar(10),ChkIn,108) = '00:00:00' and ChkOut is not null
         THEN 6
      WHEN ChkIn is null and ChkOut is null THEN 7 
   END as 'ErrorCode'
FROM filesTA tf
WHERE tf.ChkDate = '2012-10-01' 
```

但这只会使 0 永远不会出现。事实是你的愿望并不明确。为什么 EmpNo 1 得到代码 0，而 EmpNo 5 和 6 得到 8？你如何定义全天和半天？如果没有某种经过时间计算，您将无法区分那些，而且我无法从您现有的查询中判断逻辑应该是什么。请更清楚地解释何时应将值 0、6、7 和 8 应用于一行。

# javascript - 如何使用 Mechanize 提交 javascript 表单？

> ID：13579753
> 
> 赞同：1
> 
> 时间：2012-11-27T08:04:55.040
> 
> 标签：javascript, asp.net, python, mechanize

我有完成登录的机械化脚本。登录后。页面首先显示重定向，然后进入主登录页面。

执行 redirect() 让我回到登录页面。为什么？

执行 login() 给我这个页面 w/c 是正确的，但仍然需要继续到主页。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title></head>
<body>
     <form name="form1" method="post" action="tmp.aspx" id="form1">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwULLTE2MTY2ODcyMjlkZCOgyU+AdP30f85W4DdUIV6LnCqa" />
</div>

      <script type="text/javascript">
          top.location.href = document.location.href;
          document.forms["form1"].submit();
      </script>
          &nbsp;&nbsp;</form>
      </body>
</html> 
```

我真的不知道该怎么做，因为我是新手。

如何使用第一次登录时提供的已验证数据提交此类表单？

另外如何与经过身份验证的用户一起提交更多 POST 数据？

到目前为止我的代码：

```
import re
import mechanize

login_url = 'login.aspx'

def login(id, username, password):
    br = mechanize.Browser()
    br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]
    br.open(login_url)
    br.select_form(nr=0)
    br.form.set_all_readonly(False)
    br["__EVENTTARGET"] = "TransactBtn"
    br["AccountID"] = id
    br["UserName"] = username
    br["Password"] = password   
    response = br.submit()
    return response.geturl()
    #after submitting this it goes to the redirect portal page then to the main page

def redirect(url): 
    #after login we submit the redirect portal to see the main page
    br = mechanize.Browser()
    br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]
    br.open(url)
    br.select_form(nr=0)
    response = br.submit()
    return response.read() #to the main

def dostuff():
    #this will submit some data as POST with the authenticated user.

print redirect(login('myid', 'myusername', 'mypassword')) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T09:06:18.623

我认为您遇到了这个问题，因为您正在为任何请求创建新的 mechanise 实例。Mechanise 有点像浏览器，带有 cookie 存储等。重新创建它的对象就像清除浏览器中的所有数据一样。

因此，您必须在所有请求中共享一个 Browser 类实例。

`login`功能看起来像做你需要的，尝试打印`br._ua_handlers['_cookies'].cookiejar`以确保所有cookie都由服务器上的登录处理程序设置，然后使用相同的浏览器实例来拉取你需要的页面。

我认为最重要的是创建一个类并将 Browser 设置为类变量。

```
class MyWorker(object):
    def __init__(self):
        self._br = mechanize.Browser()
        self._br.addheaders = [('User-agent', 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.1) Gecko/2008071615 Fedora/3.0.1-1.fc9 Firefox/3.0.1')]

    def login(self):
        self._br.open(login_url)
        self._br.select_form(nr=0)
        self._br.form.set_all_readonly(False)
        self._br["__EVENTTARGET"] = "TransactBtn"
        self._br["AccountID"] = id
        self._br["UserName"] = username
        self._br["Password"] = password   
        self._br.submit() 
```

我可能是错的，但看起来这里的 Javascript 并不重要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:10:02.570

机械化不支持 JavaScript。你应该看看[Selenium](http://pypi.python.org/pypi/selenium)，它和 mechanize 做的事情几乎一样，但处理的是 javascript。

# c# - 用新对象替换列表视图中的对象？

> ID：13579760
> 
> 赞同：0
> 
> 时间：2012-11-27T08:05:15.750
> 
> 标签：c#, winforms

我有`listview`几个项目。我正在使用 foreach 循环来检查是否有匹配项。我正在使用的代码如下所示：

```
foreach (ListViewItem test in listView1.Items)
{
   if (test.SubItems[1].ToString() == item.SubItems[1].ToString())
   {
      test.Tag = item.Tag;
   }
} 
```

我想做的是，检查第二个索引，如果有匹配项，用新的“项目”替换旧项目“测试”。

显然列表视图没有变化。我替换对象的方式是否错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:40:17.063

您可以克隆该项目并直接分配给列表视图项目。但是您需要将 foreach 循环更改为 for 循环。

```
for (int i = 0; i < listView1.Items.Count; i++)
{
    if (listView1.Items[i].SubItems[1].ToString() == item.SubItems[1].ToString())
    {
        listView1.Items[i] = (ListViewItem)item.Clone();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:21:37.840

您只更新了*标签*。您需要更改 test.SubItems[0], test.SubItems[1],... 以查看更改。

或者您可以使用`listView1.Items.Remove(...)`or`listView1.Items.RemoveAt(...)`和删除旧项目并插入新项目`listView1.Items.Insert(...)`。但是如果您需要考虑性能，您应该使用第一个算法（更改 test.SubItems[i]）。

# sql - SQL查询以'yy年mm月dd日'格式查找员工的经验

> ID：13579763
> 
> 赞同：1
> 
> 时间：2012-11-27T08:05:31.617
> 
> 标签：sql, sql-server

我想要查询以“yy 年 mm 月 dd 天”格式查找员工的经验。

```
SELECT EMPID, EMPNAME, DEPARTMENT, DESIGNATION, DATEDIFF(YEAR, DOJ, GETDATE()) AS EXPERIENCE, 
       EMPSTATUS AS JOB_STATUS 
FROM EMPLOYEE 
```

DOJ - 数据库中用于保存员工“加入日期”的字段。这是仅返回年经验的查询。如何修改它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:24:40.727

```
SELECT 
    EMPID, EMPNAME, DEPARTMENT, DESIGNATION, 

    convert(varchar(3),DATEDIFF(MONTH, DOJ, GETDATE())/12) +' years '+
    convert(varchar(2),DATEDIFF(MONTH, DOJ, GETDATE()) % 12)+ ' months' 
    AS EXPERIENCE, 

    EMPSTATUS AS JOB_STATUS 
FROM EMPLOYEE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-24T08:30:25.647

将 Emp_joiningDate 视为列

SELECT DATEDIFF(year, Emp_joiningDate, GETDATE()) AS Years,

```
 DATEDIFF(month, Emp_joiningDate, GETDATE()) - DATEDIFF(year, '1/2/1999', GETDATE()) * 12 AS Months,

    DATEDIFF(day, Emp_joiningDate, getdate())- DATEDIFF(month, '1/2/1999', 

            GETDATE()) - DATEDIFF(year, '1/2/1999', GETDATE()) * 365 as Days 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:30:08.820

用于测试的[SQL Fiddle](http://www.sqlfiddle.com/#!3/45bb5/3/0)

```
SELECT EMPID, EMPNAME, DEPARTMENT, DESIGNATION,
       cast(floor(experience / 365) as varchar) + ' years ' +
       cast(floor(experience % 365 / 30) as varchar) + ' months ' +
       cast(experience % 30 as varchar) + ' days' as experience,
       EMPSTATUS AS JOB_STATUS 
FROM (select *, datediff(DAY, doj, getdate()) as experience
      from employee) t 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-21T10:49:52.857

```
DECLARE @FromDate DATETIME = '2013-12-01 23:59:59.000', 
        @ToDate   DATETIME = '2016-08-30 00:00:00.000',
         DECLARE @MONTHS INT

        SET @Months = DATEDIFF(MM,@FROMDATE,@TODATE)

        IF (DATEPART(MM,@FromDate) <=  (DATEPART(MM,@TODATE))+1)
            BEGIN
                    SELECT CAST(DATEDIFF(YY,@FROMDATE,@TODATE) AS VARCHAR(5)) + ' Years '+ CAST( (DATEPART(MM,@TODATE)-DATEPART(MM,@FROMDATE)) AS VARCHAR(5))+1 +' Month'
            END 
        ELSE
            BEGIN
                    SELECT CAST(DATEDIFF(YY,@FROMDATE,@TODATE)-1 AS VARCHAR(5)) +' Years '+ CAST(12-(DATEPART(MM,@FROMDATE)) + DATEPART(MM,@TODATE)+1  AS VARCHAR(5) ) +' Month'
            END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-06T05:31:13.907

创建 FUNCTION [dbo].[fn_getEmployePeriod] (@dateofbirth DATETIME) 返回 VARCHAR(100) 开始声明 @currentdatetime DATETIME；声明@years INT；声明@months INT；声明@days INT；声明@currentMonthdays INT；声明@result VARCHAR(100); SET @currentdatetime = GETDATE();--当前日期时间

```
 IF ( @dateofbirth <= GETDATE() )
        BEGIN
            SELECT  @years = DATEDIFF(YEAR, @dateofbirth, @currentdatetime); -- To find Years
            SELECT  @months = DATEDIFF(MONTH, @dateofbirth,
                                       @currentdatetime) - ( DATEDIFF(YEAR,
                                                          @dateofbirth,
                                                          @currentdatetime)
                                                          * 12 );
            SELECT  @days = DATEPART(d, @currentdatetime) - DATEPART(d,
                                                          @dateofbirth);-- To Find Days
            SELECT  @currentMonthdays = ( SELECT    DAY(DATEADD(DD, -1,
                                                          DATEADD(mm,
                                                          DATEDIFF(mm, 0,
                                                          GETDATE()), 0)))
                                        );
            IF ( @months < 0 )
                BEGIN
                    SET @months = 12 + @months;
                    SET @years = @years - 1;
                END;
            IF ( @days < 0 )
                BEGIN
                    SET @days = @currentMonthdays + @days;
                     IF(@months<>0)
                    begin
                    SET @months = @months - 1;
                    END
                    ELSE
                    BEGIN
                    SET @years = @years - 1;
                    SET @months = 11;
                    end
                END; 
```

-- 查找月份

```
 SET @result = CAST(@years AS VARCHAR(3)) + ' years,   '
                + CAST(@months AS VARCHAR(3)) + ' months,   '
                + CAST(@days AS VARCHAR(3)) + ' days'; 

        END;
    ELSE
        BEGIN
            SET @result = 'Invaild date of birth';
        END;
    RETURN @result;
END; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-09-26T10:38:11.620

```
SELECT convert(varchar(3),DATEDIFF(MONTH, '2015-01-01', GETDATE())/12) +' years '+
    convert(varchar(2),DATEDIFF(DD, '2016-09-21', GETDATE()) % 12)+ ' months' 
    AS EXPERIENCE 
```

# file-upload - Webmatrix 文件上传错误

> ID：13579765
> 
> 赞同：0
> 
> 时间：2012-11-27T08:05:43.037
> 
> 标签：file-upload, razor, webmatrix

我正在尝试创建一个上传页面，在其中上传 .swf 文件，然后将文件名添加到我的数据库中。以前我已经能够做到这一点，但是，现在它似乎给了我错误“索引超出范围。必须是非负数并且小于集合的大小。参数名称：索引”我的代码如下：

```
@{
Page.Title = "Add Game";

//Variables
var GameName = "";
var Tags = "";
var Gamefile = "";

//Required fields
Validation.RequireField("Name", "Please give the game a name.");
Validation.RequireField("file", "Please upload a file.");
//Maximum name length
Validation.Add("Name",
    Validator.StringLength(
        maxLength: 100,
        errorMessage: "Name must be less than 100 characters")
        );
//SWF file validation
Validation.Add("file",
    Validator.Regex(@"^.*\.(swf|SWF)$", "Invalid filetype, you must upload a .swf flash file")
    );

    if (IsPost && Validation.IsValid()) {
    var db = Database.Open("Surgestuff");
    var gCat = "";
    var fileData = Request.Files[0];
    var fileName = Guid.NewGuid().ToString() + ".swf";
    var fileSavePath = Server.MapPath("~/upload/" + fileName);
    var AddBy = WebSecurity.CurrentUserName;
    gCat=Request["formCat"];
    Gamefile = fileName;
    fileData.SaveAs(fileSavePath);
    var SQLINSERT = "INSERT INTO Games (Name, file_path, Category, AddBy) " + "VALUES (@0, @1, @2, @3)";
    db.Execute(SQLINSERT, GameName, Gamefile, gCat, AddBy);
    Response.Redirect("~/Games");

    }
} 
```

出于某种原因，即使我提交了文件，

`var fileData = Request.Files[0];`给我那个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:25:28.107

Web Pages 2 验证帮助程序不能与`input type="file"`. 它们仅适用于集合中包含的元素`Request.Form`。文件上传出现在`Request.Files`集合中。

您可以采用几种方法来验证文件上传。您可以使用模型状态：

```
if(IsPost && Request.Files[0].ContentLength == 0){
    ModelState.AddError("file", "You must choose a file");
}

if (IsPost && Validation.IsValid() && ModelState.IsValid) {
    // etc 
```

Or you can add a hidden field, and when the form is submitted, populate its value with that of the file upload via JavaScript. Then you can use the new Validation helpers as you are currently trying to do, but on the hidden field instead.

# core-data - 保存具有多个不同关系的相同类型的各种核心数据实体？

> ID：13579767
> 
> 赞同：0
> 
> 时间：2012-11-27T08:05:56.233
> 
> 标签：core-data

我一直在尝试调试这个 2 小时，必须睡觉。首先，我用他们的关键字搜索并发现了许多类似的帖子：许多实体相同类型，而这个： [核心数据：两个具有相同类型的关系的反向关系](https://stackoverflow.com/questions/4985075/core-data-inverse-relationship-for-two-relationships-with-same-type)

但无济于事。这是发生了什么：我有一个有两种类型的数据模型。例如，我有一个人，那个人可以有 4 个电子邮件列表。电子邮件类型是它自己的东西，所以我让 person 为每个列表存储 4 个不同的集合（关系）。

基本上，当我检索一组时，它会抓住所有这些。现在所有 4 个列表都是 1，我如何设置倒数似乎并不重要。实际上，这些更改以某种方式导致整个东西不保存任何东西，下载时所有 nil 对象。在此之前，它工作得很好（除了将所有 4 个列表推到一组之外）。我更新的只是关系的数据模型。我可能以错误的顺序导出了文件，但不知道这是否相关。

我根本找不到关键字组合来查找是否有人以前问过这个问题。我不明白它怎么会出现，我正在做的是基本的抽象。我一直在想我忽略了一个盒子。

总而言之，我有一个人，一个人有 2 个列表。我添加它们类似于： person.friendEmailsList = updatedEmailsFromFriends; person.businessEmailsList = 下载的商业电子邮件；

所以后来，我访问 person.friendEmailsList （当然，使用正确的核心数据调用），而不是只得到朋友，我得到了一切......朋友，企业一切

任何建议，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:24:46.567

有两种可能的解决方案。

首先，您可以使用您使用的方法。只需确保您还具有来自其他实体的相应反向关系。因此，如果您与同一个实体有 2 个关系，则该实体需要返回 2 个不同的关系。例如

```
Person.friendsLists --->> List
Person.businessLists --->> List

List.friendPerson ---> Person
List.businessPerson ---> Person 
```

更灵活的方法是让列表有一个额外的属性`type`（可以是某种数字`enum`）。

```
typedef enum {Friend = 1, Business } ListType; 
```

你可以把它放到你的`List.h`文件中。现在，要访问好友列表，您可以这样做：

```
NSSet *friendList = [person.lists filteredSetUsingPredicate:
       [NSPredicate predicateWithFormat:@"type = %@", @(Friend)]]; 
```

这可能有点多，因此您可以通过将访问器方法放入您的 Person.m 来简化（在 .h 中声明它）：

```
-(NSSet*)friendsLists {
    return [person.lists filteredSetUsingPredicate:
       [NSPredicate predicateWithFormat:@"type = %@", @(Friend)]];
} 
```

现在您可以使用通常方便的方式访问列表`person.friendsLists`。

# android - 我的应用程序的 mp3 文件不是通过 gmail 发送的

> ID：13579773
> 
> 赞同：2
> 
> 时间：2012-11-27T08:06:53.727
> 
> 标签：android

我有一个问题，我正在尝试将 mp3 文件发送到 gmail。

到目前为止，我的代码适用于 whatsapp、hotmail、蓝牙……但它不适用于 gmail

这是我的代码：

```
File sdCard = Environment.getExternalStorageDirectory();
String path = sdCard.getAbsolutePath() + "/" +"miApp"+"/tono.mp3";

Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("audio/mp3");
intent.putExtra(Intent.EXTRA_SUBJECT, "Asunto");
intent.putExtra(Intent.EXTRA_TEXT, "Prueba");
intent.putExtra(Intent.EXTRA_STREAM,Uri.parse("file:///" + path));
startActivity(intent); 
```

我尝试使用各种类型的 mime，但结果相同

*   “音频/x-mpeg-3”
*   “视频/mpeg”
*   “视频/x-mpeg”
*   “音频/mpeg”

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:12:11.777

这对我有用

```
Intent i = new Intent(Intent.ACTION_SEND);
i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
i.setType("audio/mp3");
i.putExtra(Intent.EXTRA_STREAM, Uri.parse("file:///sdcard/miApp/tono.mp3"));
startActivity(i); 
```

# objective-c - iOS 进程信息 (pid, uid, cpu, mem, ...)

> ID：13579775
> 
> 赞同：3
> 
> 时间：2012-11-27T08:06:58.360
> 
> 标签：objective-c, ios, jailbreak

我正在 Mac 中编写类似 System Activity 的应用程序。[我使用了这个主题](https://stackoverflow.com/questions/11573822/get-the-bundle-id-of-app-from-pid-in-ios)中修改过的 darwin.h 和 darwin.c 。但它似乎只为某些字段显示正确的信息（前段时间它显示了所有正确的信息，但只针对当前进程 - 这个应用程序），对于其他所有内容，它只显示正确的 pid、进程名称、组/所有者。其他所有内容，如 cpu/mem/disk 使用情况均无效。我认为这可能与沙盒或安全有关。试图将应用程序移动到 /Applications 并设置 root/wheel 755 但它不起作用，仍然将值归零。

这是我的输出：[点击](http://pastebin.com/7YLx5DdJ)

darwin.c 中更改的代码：[click](http://pastebin.com/0QEucecj)，在大量注释 printf 行之后编写

还有一个在 AppStore 中获得批准的免费应用程序，例如 SystemInfo (com.lymbilesoft.systeminfoliteforiphone)，它显示有关磁盘和进程的详细信息，那么它是如何工作的？尝试 nm-ing 它是二进制的，但没有找到有用的东西。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T22:50:46.973

我不确定这是否是**唯一**的问题，但肯定有可能您的应用程序需要运行`root`才能正常工作。

但是，只需`/Applications`将`chown root.wheel`应用`chmod 755`程序**安装**在`root`. 它仍将以用户身份运行`mobile`。

为了让应用程序**运行**，`root`请[参阅此答案](https://stackoverflow.com/a/8796556/119114)

我已经成功地使用了这种技术，如果你有一部越狱的手机，你可以导航到`/Applications/Cydia.app`这个*启动脚本*并看到Cydia 也是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T17:36:25.920

我`ps aux`从终端/命令行使用。这给了我所有我需要的东西，关于你的担忧。

# javascript - 如何在我使用 jquery 动态创建的 HTML 元素上附加事件？

> ID：13579784
> 
> 赞同：0
> 
> 时间：2012-11-27T08:08:02.303
> 
> 标签：javascript, jquery, html

```
var li = $("<li>").attr({
    id: "print",
    click: function(e){
     alert(this);
     console.log(this);
    }
 }); 
```

我已经尝试过这段代码，但它会更快地调用代码生成 HTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:11:33.143

```
var li = $("<li>",{
    id: "print"            //the second parameter accepts properties as an object
}).on('click',function(e){ //.on() binds the event to that element
    console.log(this);
}); 
```

或者：

```
var li = $("<li>",{
    id: "print"            //the second parameter accepts properties as an object
    click: function(e){    //attach the event as part of the properties
        console.log(this);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:11:19.400

试试这个：

```
var li = $('<li>').attr({
    id: "print"
}).click(function() {
    alert(this);
    consol.log(this);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:11:44.047

您可以使用 .on() 将事件绑定到标签

一个例子：

```
$('li#print').on('click',function(e){
  alert("Something" + $(this));

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T08:12:03.680

使用“点击”方法。

```
var li = $("<li>").attr({
   id: "print"
}).click(function(e) {
   alert(this);
   console.log(this);
}); 
```

或者，如果您想将事件附加到动态生成的元素，请使用`$.live`函数。如果您使用 jQuery mobile，我必须说另一个答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T08:12:21.883

您可以使用事件冒泡并将委托的事件侦听器附加到父节点。这样做，您可以在将元素实际添加到 DOM 之前附加事件侦听器。

或者，您可以在尝试附加事件侦听器之前将元素附加到 DOM：

```
$("<li>")
    .attr({ id: "print"})
    .appendTo("body") // Or wherever you want to put it
    .on("click", function(e){
       alert(this);
       console.log(this);
    }); 
```

# chef-infra - 如何获取应用于 Chef 节点的食谱列表？

> ID：13579785
> 
> 赞同：9
> 
> 时间：2012-11-27T08:08:24.270
> 
> 标签：chef-infra

我想知道给定的配方是否已应用于管理给 Chef 的 N 个节点的列表。我怎样才能轻松做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-19T22:17:18.897

您可以使用刀轻松完成此操作（刀是您的朋友！）。

要获取所有节点的列表：

```
knife node list 
```

要获取给定环境中所有节点的列表：

```
knife node list --environment <ENVIRONMENT> 
```

有了节点列表，您可以使用以下命令显示节点的详细信息：

```
knife node show <NODE_ID> 
```

刀节点秀，会显示：

```
Node Name:   
Environment: 
FQDN:        
IP:          
Run List:    
Roles:       
Recipes:     
Platform:    
Tags: 
```

*Recipes:*行是已应用于节点的配方列表。

使用*刀搜索*，您可以搜索一组满足特定条件的节点。使用它，您可以找到应用或不应用特定配方的节点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-26T20:38:40.787

我怀疑你正在寻找这样的东西：

```
knife search node "recipes:<recipe_name>" 
```

这将适用于显式运行列表以及扩展（隐式）运行列表。

这里有关于刀具搜索的更详细的文档：

[http://docs.opscode.com/knife_search.html](http://docs.opscode.com/knife_search.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T02:54:47.880

如果您的意思是在食谱中，您可以使用[search](https://docs.chef.io/chef_search.html)，例如

```
ruby_nodes = search(:node, "recipes:ruby_build") 
```

为了解决您的实际问题，您可以执行以下操作：

```
['192.168.1.2'].include?(ruby_nodes.map{|node| node[:ipaddress]}) 
```

# cuda - CUDA 5.0 中的 cudaprof 以及如何在 linux 系统上使用它

> ID：13579787
> 
> 赞同：1
> 
> 时间：2012-11-27T08:08:27.373
> 
> 标签：cuda, profiler

我想在我的代码上运行分析器。我安装了 CUDA 5.0 并使用 CentOS 6.0 作为我的操作系统。首先，我在系统上的任何地方都找不到 cudaprof。我在互联网上搜索并知道可以使用 nvprof 从命令行进行分析。因此，我使用 -g 和 -G 选项编译了我的代码，并使用以下命令运行它：

```
nvprof -o profileOutput -s ./exe args. 
```

但我收到以下错误：

```
terminate called after throwing an instance of 'thrust::system::system_error'
  what():  unspecified launch failure
======== Warning: Application received signal 6
======== Error: failed to read result file 
```

我不明白我做错了什么。

另外，安装了 CUDA 5.0 的 Linux 系统上 cudaprof 的位置是什么？

# model - rails]简单查询两个模型之间的引用

> ID：13579788
> 
> 赞同：0
> 
> 时间：2012-11-27T08:08:29.497
> 
> 标签：model, relation

我有 Post 和 Comment 模型，现在我想创建 User 模型。用户 has_many 帖子，并且 post belongs_to 用户。当我使用生成器创建评论模型时，我使用了*post:references，*所以我需要手动**将 user_id 列添加到 Post 模型吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T00:45:58.543

是的。

```
rails generate migration AddUserIdToPosts user_id:integer 
```

并手动将 *belongs_to user* 放入 Post 模型中。

# c# - 如何创建动态 WPF 数据网格？

> ID：13579790
> 
> 赞同：0
> 
> 时间：2012-11-27T08:08:42.883
> 
> 标签：c#, wpf, linq, datagrid

我有一个动态数据库，数据库中的数据将在一分钟内更新。现在，我在我的 WPF 项目中创建了一个数据网格，我想显示数据库中的所有数据。当我运行我的项目时，数据网格将只显示静态数据（项目运行前的数据）。我如何确保我的数据网格在运行后会保持**更新？**顺便说一句，我在我的 WPF 项目中使用 linq to sql 和 C#。

我的数据网格的代码片段：

```
<DataGrid AutoGenerateColumns="False" Name="MyDataGrid" VerticalAlignment="Top" Width="185" >
     <DataGrid.Columns>
          <DataGridTextColumn Header="Date"  Width="60" Binding="{Binding Date}" />
          <DataGridTextColumn Header="Time" Width="55" Binding="{Binding Time}"/>
          <DataGridTextColumn Header="Id" Width="69" Binding="{Binding id}" />
    </DataGrid.Columns>
</DataGrid> 
```

我后面的代码的代码片段：

```
public  MainWindow()
{
        InitializeComponent();

        using (MyDummyDataContext db = new MyDummyDataContext())
        {
            var query = from p in db.Ids
                        orderby p.Id descending
                        select new 
                        { 
                            Date = p.Date,
                            Time = p.Time,
                            id = p.Id
                        };
            MyDataGrid.ItemsSource = query;
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:24:50.487

这是我的 2 美分：

1.  将 DataGird 的 ItemsSource 绑定到 ObservableCollection。
2.  在加载的事件处理程序上初始化集合。
3.  添加一个计时器，在计时器的回调中，您可以刷新数据库中的集合。注意：如果您使用的是 .NET 4.5，则支持更新 ObservableCollection 表单后台线程。否则，您需要手动处理线程同步。

这是在后台更新数据的链接，可能不完全适合您的问题，但您可以得到一些想法：

[Observable Collection 跨线程变更通知](http://10rem.net/blog/2012/01/16/wpf-45-observable-collection-cross-thread-change-notification)

编辑：

我只是写了一个例子（为简单起见，我使用 DispatcherTimer 更新 UI 线程中的集合。要在后台线程中更新数据，您需要使用 System.Timers.Timer 代替，并使用链接中的方法。）：

应用程序.xaml.cs：

```
using System.Windows;

namespace DataGridTest
{
/// <summary>
/// Interaction logic for App.xaml
/// </summary>
public partial class App : Application
{
    protected override void OnStartup(StartupEventArgs e)
    {
        var vm = new MainWindowViewModel();
        var mainWindow = new MainWindow { DataContext = vm };
        mainWindow.Show();
    }
}
} 
```

主窗口.xaml

```
<Window x:Class="DataGridTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <DataGrid AutoGenerateColumns="False" Name="MyDataGrid" VerticalAlignment="Top" Width="185"
              ItemsSource="{Binding Persons}">
        <DataGrid.Columns>
            <DataGridTextColumn Header="Id"  Width="60" Binding="{Binding Id}" />
            <DataGridTextColumn Header="Name" Width="55" Binding="{Binding Name}"/>
        </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

主窗口.cs：

```
using System.Windows;

namespace DataGridTest
{
using System;
using System.ComponentModel;
using System.Windows.Threading;

public class Person : INotifyPropertyChanged
{
    private int _id;

    private string _name;

    public int Id
    {
        get
        {
            return _id;
        }

        set
        {
            if (this._id == value)
                return;

            this._id = value;
            this.OnPropertyChanged("Id");
        }
    }
    public string Name
    {
        get
        {
            return _name;
        }

        set
        {
            if (this._name == value)
                return;

            this._name = value;
            this.OnPropertyChanged("Name");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
}

/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    private readonly DispatcherTimer _timer = new DispatcherTimer();

    public MainWindow()
    {
        InitializeComponent();

        _timer.Interval = TimeSpan.FromSeconds(1);
        _timer.Tick += this._timer_Tick;
        _timer.Start();
    }

    private void _timer_Tick(object sender, EventArgs e)
    {
        var vm = this.DataContext as MainWindowViewModel;
        if(vm != null)
            vm.Refresh();
    }
}
} 
```

MainWindowViewModel.cs

```
namespace DataGridTest
{
  using System.Collections.ObjectModel;
  using System.ComponentModel;

public class MainWindowViewModel : INotifyPropertyChanged
{
    private readonly ObservableCollection<Person> _persons = new ObservableCollection<Person>();

    private static int _id = 3;

    public ObservableCollection<Person> Persons
    {
        get
        {
            return _persons;
        }
    }

    public MainWindowViewModel()
    {
        _persons.Add(new Person { Id = 1, Name = "A" });
        _persons.Add(new Person { Id = 2, Name = "B" });
        _persons.Add(new Person { Id = 3, Name = "C" });  
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public void Refresh()
    {
        _persons.Add(new Person() { Id = ++_id, Name = _id.ToString() });
    }

} 
```

}

# c - 逗号表达式的左操作数无效

> ID：13579801
> 
> 赞同：4
> 
> 时间：2012-11-27T08:09:54.117
> 
> 标签：c

```
for (count = index, packet_no = 0; 
     count < TOTAL_OBJ, packet_no < TOTAL_PKT; 
     count++, packet_no++) 
```

`=>`逗号表达式的左侧操作数无效。

我发现上面的代码是正确的，不明白为什么会出现这个错误。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T08:11:13.663

这就是逗号运算符的工作方式，您要做的是使用**OR**或**AND**（在您的情况下可能是 AND）：

```
// the condition for resuming the loop is that one of the conditions is true
count < TOTAL_OBJ || packet_no < TOTAL_PKT
// the condition for resuming the loop is that both conditions are true
count < TOTAL_OBJ && packet_no < TOTAL_PKT 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T08:32:39.890

`for`在语句的三个术语中的每一个中都有三个逗号运算符。警告是针对第 2 学期的。

术语 1 和 3 的两个表达式都按预期执行。

术语 2 的左操作仅被评估为 void，不参与`for`条件，因此会导致您的警告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T09:30:57.763

带有逗号运算符的条件表达式的条件语句（for、while 或 if），最后一个表达式的值是条件语句的条件值（True 或 False）。例如。

```
int i = 1;
int j = 0;
int k = 1;
if(i, j, k) {
   printf("Inside");
}else {
   printf("Outside");
} 
```

打印“Outside”，因为逗号运算符是从左到右计算的，并且 k 是 if 语句中计算的最后一个返回 false 的表达式。

```
int i, j;
if(i = 0 , j = 1) {
   printf("Inside");
}else {
   printf("Outside");
} 
```

上面印有“里面”。j = 1 是 if 语句中最后一个具有真值的表达式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-11T17:38:05.143

```
int i = 1;
int j = 0;
int k = 1;
if(i, j, k) {
   printf("Inside");
}else {
   printf("Outside");
} 
```

对上面的更正：此代码将打印“Inside”，因为逗号运算符是从左到右计算的，并且 k 是 if 语句中计算的最后一个表达式，它返回 true，因为 k = 1。

# java - 如何在Java中进行类型转换之前检查类型

> ID：13579802
> 
> 赞同：2
> 
> 时间：2012-11-27T08:09:53.803
> 
> 标签：java, casting, type-conversion, typechecking

我将我的字符串变量转换为整数和双精度。我想检查 String 变量在运行时是否包含有效的 Integer 或 Double 值。

我遵循代码，但它不适用于我。

```
String var1="5.5";
String var2="6";
Object o1=var1;
Object o2=var2;
if (o1 instanceof Integer)
{
    qt += Integer.parseInt( var1);// Qty
}
if (o2 instanceof Double)
{
    wt += Double.parseDouble(var2);// Wt
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T08:13:20.210

尝试解析 int 并在失败时捕获异常：

```
String var1="5.5";

try {
 qt += Integer.parseInt( var1);
}    
catch (NumberFormatException nfe) {
// wasn't an int
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-27T08:24:33.797

首先，您的`if`条件肯定会失败，因为`object`引用实际上指向一个 String 对象。因此，它们不是任何`integer`or的实例`double`。

要检查字符串是否可以转换为`integer`or `double`，您可以按照@Bedwyr 的答案中的方法，或者如果您不想使用`try-catch`，正如我从您那里的评论中所假设的那样（实际上，我不明白您为什么不'不想使用它们），你可以使用一点点`pattern matching`： -

```
String str = "6.6";
String str2 = "6";

// If only digits are there, then it is integer
if (str2.matches("[+-]?\\d+")) {  
    int val = Integer.parseInt(str2);
    qt += val;
}

// digits followed by a `.` followed by digits
if (str.matches("[+-]?\\d+\\.\\d+")) {  
    double val = Double.parseDouble(str);
    wt += val;
} 
```

但是，请理解这一点，`Integer.parseInt`并且`Double.parseDouble`是正确的方法。这只是一种替代方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T08:24:36.410

您可以使用模式来检测字符串是否为整数：

```
 Pattern pattern = Pattern.compile("^[-+]?\\d+(\\.\\d+)?$");
  Matcher matcher = pattern.matcher(var1);
  if (matcher.find()){
      // Your string is a number  
  } else {
      // Your string is not a number
  } 
```

您必须找到正确的模式（我有一段时间没有使用它们），或者有人可以用正确的模式编辑我的答案。

****编辑*****：为您找到了一个模式。编辑了代码。我没有对其进行测试，但它取自 java2s 站点，该站点还提供了一种更加优雅的方法（从该站点复制）：

```
 public static boolean isNumeric(String string) {
      return string.matches("^[-+]?\\d+(\\.\\d+)?$");
  } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-27T08:28:07.510

也许正则表达式可以满足您的需求：

```
public static boolean isInteger(String s) {
    return s.matches("[-+]?[0-9]+");
}

public static boolean isDouble(String s) {
    return s.matches("[-+]?([0-9]+\\.([0-9]+)?|\\.[0-9]+)");
}

public static void main(String[] args) throws Exception {
    String s1 = "5.5";
    String s2 = "6";
    System.out.println(isInteger(s1));
    System.out.println(isDouble(s1));
    System.out.println(isInteger(s2));
    System.out.println(isDouble(s2));
} 
```

印刷：

```
false
true
true
false 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-27T08:20:53.123

`Integer.parseInt`并`Double.parseDouble`返回`String`. 如果`String`不是有效数字，该方法将抛出`NumberFormatException`.

```
String var1 = "5.5";

try {
    int number = Integer.parseInt(var1); // Will fail, var1 has wrong format
    qt += number;
} catch (NumberFormatException e) {
    // Do your thing if the check fails
}

try {
    double number = Double.parseDouble(var1); // Will succeed
    wt += number;
} catch (NumberFormatException e) {
    // Do your thing if the check fails
} 
```

# mysql - 如何将文本文件中的数据导入mysql数据库

> ID：13579810
> 
> 赞同：62
> 
> 时间：2012-11-27T08:10:23.217
> 
> 标签：mysql, import, text-files

我有一个名为 350MB 的文件`text_file.txt`，其中包含此制表符分隔的数据：

```
345868230   1646198120  1531283146  Keyword_1531283146  1.55    252910000
745345566   1646198120  1539847239  another_1531276364  2.75    987831000
... 
```

MySQL 数据库名称：`Xml_Date`

数据库表：`PerformanceReport`

我已经创建了包含所有目标字段的表。

我想将此文本文件数据导入 MySQL。我用谷歌搜索并发现了一些类似的命令，`LOAD DATA INFILE`并且对如何使用它感到非常困惑。

如何导入此文本文件数据？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-11-27T08:17:33.173

它应该像...一样简单

```
LOAD DATA INFILE '/tmp/mydata.txt' INTO TABLE PerformanceReport; 
```

默认情况下`LOAD DATA INFILE`使用制表符分隔，每行一行，所以应该接受它就好了。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2014-01-03T01:50:38.040

**使用 MySQL 的 LOAD DATA 命令的演练：**

1.  创建你的表：

    ```
    CREATE TABLE foo(myid INT, mymessage VARCHAR(255), mydecimal DECIMAL(8,4)); 
    ```

2.  创建制表符分隔文件（注意列之间有制表符）：

    ```
    1   Heart disease kills     1.2
    2   one out of every two    2.3
    3   people in America.      4.5 
    ```

3.  使用加载数据命令：

    ```
    LOAD DATA LOCAL INFILE '/tmp/foo.txt' 
    INTO TABLE foo COLUMNS TERMINATED BY '\t'; 
    ```

    如果您收到无法运行此命令的警告，则必须启用`--local-infile=1`此处描述的参数：[How can I correct MySQL Load Error](https://stackoverflow.com/questions/16285864/how-can-i-correct-mysql-load-error)

4.  行被插入：

    ```
    Query OK, 3 rows affected (0.00 sec)
    Records: 3  Deleted: 0  Skipped: 0  Warnings: 0 
    ```

5.  检查它是否有效：

    ```
    mysql> select * from foo;
    +------+----------------------+-----------+
    | myid | mymessage            | mydecimal |
    +------+----------------------+-----------+
    |    1 | Heart disease kills  |    1.2000 |
    |    2 | one out of every two |    2.3000 |
    |    3 | people in America.   |    4.5000 |
    +------+----------------------+-----------+
    3 rows in set (0.00 sec) 
    ```

**如何指定将文本文件列加载到哪些列：**

像这样：

```
LOAD DATA LOCAL INFILE '/tmp/foo.txt' INTO TABLE foo
FIELDS TERMINATED BY '\t' LINES TERMINATED BY '\n'
(@col1,@col2,@col3) set myid=@col1,mydecimal=@col3; 
```

文件内容被放入变量@col1、@col2、@col3。myid 获取第 1 列，mydecimal 获取第 3 列。如果运行此命令，它将省略第二行：

```
mysql> select * from foo;
+------+-----------+-----------+
| myid | mymessage | mydecimal |
+------+-----------+-----------+
|    1 | NULL      |    1.2000 |
|    2 | NULL      |    2.3000 |
|    3 | NULL      |    4.5000 |
+------+-----------+-----------+
3 rows in set (0.00 sec) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-27T11:24:12.013

如果您的表格由制表符以外的其他人分隔，则应将其指定为...

```
LOAD DATA LOCAL 
    INFILE '/tmp/mydata.txt' INTO TABLE PerformanceReport 
    COLUMNS TERMINATED BY '\t'  ## This should be your delimiter
    OPTIONALLY ENCLOSED BY '"'; ## ...and if text is enclosed, specify here 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-08T13:33:38.647

LOAD DATA INFILE 语句以非常高的速度将文本文件中的行读取到表中。

```
LOAD DATA INFILE '/tmp/test.txt' 
INTO TABLE test
FIELDS TERMINATED BY ','
LINES STARTING BY 'xxx'; 
```

如果数据文件如下所示：

```
xxx"abc",1
something xxx"def",2
"ghi",3 
```

结果行将是 ("abc",1) 和 ("def",2)。文件中的第三行被跳过，因为它不包含前缀。

```
LOAD DATA INFILE 'data.txt'
INTO TABLE tbl_name
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\r\n' 
```

您还可以使用 mysqlimport 实用程序加载数据文件；它通过向服务器发送 LOAD DATA INFILE 语句来操作

```
mysqlimport -u root -ptmppassword --local test employee.txt

test.employee: Records: 3  Deleted: 0  Skipped: 0  Warnings: 0 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-17T12:45:52.033

您应该设置选项：

```
local-infile=1 
```

进入 my.cnf 文件的 [mysql] 条目或使用 --local-infile 选项调用 mysql 客户端：

```
mysql --local-infile -uroot -pyourpwd yourdbname 
```

您必须确保在 [mysqld] 部分中也定义了相同的参数，以启用“本地 infile”功能服务器端。

这是一个安全限制。

```
LOAD DATA LOCAL INFILE '/softwares/data/data.csv' INTO TABLE tableName; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-11-17T07:16:17.140

1.  确保您的 Local-Infile 变量设置为 True (ON)

    > ```
    > mysql> show global variables like 'local_infile';
    > +---------------+-------+
    > | Variable_name | Value |
    > +---------------+-------+
    > | local_infile  | OFF   |
    > +---------------+-------+
    > 1 row in set (0.04 sec)
    > 
    > mysql> set global local_infile=true;
    > Query OK, 0 rows affected (0.01 sec) 
    > ```

2.  找到正确的路径来存储 txt 文件以加载到 SQL 表中

    > ```
    > mysql>  SELECT @@GLOBAL.secure_file_priv;
    > +------------------------------------------------+
    > | @@GLOBAL.secure_file_priv                      |
    > +------------------------------------------------+
    > | C:\ProgramData\MySQL\MySQL Server 8.0\Uploads\ |
    > +------------------------------------------------+
    > 1 row in set (0.00 sec) 
    > ```

3.  使用路径中的数据 infile 加载（在路径中使用反斜杠）

> ```
> mysql>  load data infile 'C:/ProgramData/MySQL/MySQL Server
> 8.0/Uploads/text_file.txt' into table TABLE_NAME fields terminated by '\t' lines terminated by '\n'; 
> ```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-07T11:27:20.337

[![在此处输入图像描述](../Images/e9570f2ecd28ea367871b3819df5bc30.png)](https://i.stack.imgur.com/V6GTp.png)

对我来说，只需添加“本地”关键字就可以了，请参阅附图以获得更简单的解决方案。

我附加的图像包含两个用例：

(a) 我在哪里得到这个错误。(b) 只需添加“Local”关键字即可解决错误。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-07-27T17:57:31.037

```
LOAD DATA INFILE '/home/userlap/data2/worldcitiespop.txt' INTO TABLE cc FIELDS TERMINATED BY ','LINES TERMINATED BY '\r \n' IGNORE 1 LINES; 
```

*   IGNORE 1 LINES 跳过包含列名的初始标题行
*   FIELDS TERMINATED BY ',' 是读取逗号分隔的文件
*   如果您在 Windows 系统上生成了文本文件，则可能必须使用 LINES TERMINATED BY '\r\n' 来正确读取文件，因为 Windows 程序通常使用两个字符作为行终止符。某些程序（例如写字板）在写入文件时可能会使用 \r 作为行终止符。要读取此类文件，请使用 LINES TERMINATED BY '\r'。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-16T21:40:43.417

**1.如果是制表符分隔的txt文件：**

LOAD DATA LOCAL INFILE 'D:/MySQL/event.txt' INTO TABLE 事件

由 '\r\n' 终止的行；

**2\. 否则：**

LOAD DATA LOCAL INFILE 'D:/MySQL/event.txt' INTO TABLE 事件

由 'x' 终止的字段（这里 x 可以是逗号 ','、制表符 '\t'、分号 ';'、空格 ' '）

由 '\r\n' 终止的行；

# .net - 值类型的堆栈大小

> ID：13579811
> 
> 赞同：1
> 
> 时间：2012-11-27T08:10:24.847
> 
> 标签：.net, value-type, stack-size, stack-memory

都说值类型存储在堆栈中。但是**存储值类型的堆栈的大小是**多少？没有人解释它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:53:54.603

计算方法的堆栈帧大小是抖动的工作。这是方法中所有局部变量大小之和的非常直接的相加。所有小值类型占用 4 个字节，long 和 double 占用 8 个字节，decimal 占用 16 个字节，struct 占用其对齐成员的总大小。引用类型引用在 32 位模式下占用 4 个字节，在 64 位模式下占用 8 个字节。

进一步的改进是，抖动优化器可以将局部变量移动到 CPU 寄存器中，从而加快代码速度并减少所需的堆栈帧存储（如果不必溢出）。

嵌套方法调用的堆栈帧大小的总和，加上保存的 cpu 寄存器、返回地址和方法参数的开销，不能超过分配的堆栈大小。默认情况下，1 MB 用于 32 位代码，4 MB 用于以 x64 作为目标编译的代码。或者 Thread 类构造函数的*maxStackSize*参数。超过分配的大小会产生此站点命名的致命异常。

实际结果很大程度上取决于所使用的抖动，x86 vs x64 vs ARM。以及是否使用 Debug 或 Release 构建。因此，您应该认为这是一个完整的实现细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:19:13.247

堆栈大小是可配置的，并且[可以通过几种不同的方式进行设置](http://www.atalasoft.com/cs/blogs/rickm/archive/2008/04/22/increasing-the-size-of-your-stack-net-memory-management-part-3.aspx)。

[默认情况下](http://msdn.microsoft.com/en-us/library/ms686774.aspx)，它设置为`1 MB`。对于 ASP.NET 应用程序，它是`256 KB`（[更多信息在这里](http://support.microsoft.com/kb/932909/en-us?fr=1)）。

# iphone - 从移动浏览器启动相机

> ID：13579814
> 
> 赞同：2
> 
> 时间：2012-11-27T08:10:40.540
> 
> 标签：iphone, ipad, cocoa-touch, camera, mobile-safari

我想从我的 iPhone 中的移动浏览器（Safari）启动相机。有没有办法

它。我想`iOS 6`我可以做到，但我不知道如何完成我的任务。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T15:44:38.613

在 iOS6 中，如果您想要完成的是设置一个网页，该网页将从 safari 中打开相机，您可以尝试以下操作。

```
<input type="file" accept="image/*" capture="camera">
<input type="file" accept="video/*" capture="camera"> 
```

它将像常规文件上传一样，但相反，它将打开 iPhone 相机并上传图片或视频。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:20:26.687

您可以从移动浏览器打开相机。为此，您需要使用一些已经可用的 Javascript API。就像我们在 PhoneGAP 框架中一样。[您可以在此链接](http://docs.phonegap.com/en/1.0.0/phonegap_camera_camera.md.html)中查看示例。

# qt - 使用 qkeyevent 在 qt 中获取 shift+数字键

> ID：13579815
> 
> 赞同：1
> 
> 时间：2012-11-27T08:10:41.430
> 
> 标签：qt, qkeyevent

我正在使用 QKeyEvent 来获取 Shift+数字键，但它返回我的 ascii 为“！” 而不是“1”所以我的问题是，是否有任何方法或技术来获取实际数值的 ascii 而不是“！”的 ascii （特殊字符）。我也关注了这个线程：

[使用 shift 修饰符从键码中获取键字符（值）](https://stackoverflow.com/questions/3337188/get-key-char-value-from-keycode-with-shift-modifier)

但这似乎并不能帮助我摆脱这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:04:02.997

我相信至少从 4.8 版开始，没有标准方法可以获取数字 ascii 值。您可以尝试类似于您链接的线程的蛮力方法。

```
if (e->modifiers() & Qt::ShiftModifier) {
    switch(e->text()) {
        case '!': 
            trans_key = '1';
        break;
    }
} 
```

# ruby-on-rails - 如何使用 Railsinstaller 将 Ruby 从 1.9.3-p125 升级到 1.9.3-p327？

> ID：13579816
> 
> 赞同：6
> 
> 时间：2012-11-27T08:10:44.800
> 
> 标签：ruby-on-rails

railsinstaller 工作正常，但我不知道如何将 Ruby 升级到 1.9.3-p327，同时保持其他所有工作正常。我是这项技术的新手，所以如果这个问题的答案非常明显，我深表歉意。

环境：Windows 7 Home Premium - Service Pack 1 - 64 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:32:37.253

如果您不想更改操作系统，我建议您使用 mint/ubuntu 对 ruby​​ 进行编程非常容易，您可以使用 pik ( [https://github.com/vertiginous/pik](https://github.com/vertiginous/pik) )。我在 Windows 7 Professional 64bit 上使用它已经有很多年了。

安装 pik 后，它会检测到您当前安装的 rubies。之后，您可以下载新的 ruby​​，将它们添加到 pik 并在每个命令行上选择 ruby​​。

```
pik use 193 # to select the current ruby 1.9.3 
```

该功能没有 rvm 大，但如果您需要在 Windows 上工作，它是一种替代方案，因为它是办公室中的常用操作系统。

# java - 在java中将泛型类型作为参数传递？

> ID：13579817
> 
> 赞同：10
> 
> 时间：2012-11-27T08:10:47.250
> 
> 标签：java, generics

是否可以将类型保存在变量中，
以便实例化这种类型的列表？

```
//something like that
Type type = Boolean;
List<type> list = new List<type>();
list.add(true); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T08:13:14.633

For the first requirement, you are looking for [`Class`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html):

```
Class type = Boolean.class; 
```

However, I don't think the seconds requirement is feasible, since generic types only exist at compile time:

```
List<type> list = new List<type>(); // invalid code 
```

You can, however, work with `List<Object>`. It will accept `Boolean` objects. Whether this will buy you anything untlimately depends on your use case.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:15:15.803

Generic is a compile time feature, not run time, so you cannot use variable to determine the generic type, even using NPE's note (using `Class`) will not compile:

```
Class<?> type = Boolean.class;
// can't do that...
List<type> list = new List<type>();
list.add(true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T08:51:20.187

在第二种情况下，当类型未知时，为什么要使用泛型？您可以更好地使用非泛型数组列表（在 jdk 5 之前使用）。

```
 List a = new ArrayList();
   a.add(object); 
```

更高版本仍然支持这种样式，甚至泛型样式在编译后也会转换为这种形式。您将在上面的代码中收到可以禁止的警告。

# python - IronPython 是否支持元类？

> ID：13579818
> 
> 赞同：1
> 
> 时间：2012-11-27T08:10:48.030
> 
> 标签：python, ironpython, metaclass

IronPython 是否完全支持 Python 元类和类工厂？如果我有一个包含这些东西的功能代码（在 CPython 2.7 中），是否可以在 IronPython 中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:48:00.913

最好的方法是简单地尝试一下。IronPython 和 CPython 的创建方式不同，并且有不同的优化。像元类这样的基本东西应该可以正常工作，但可能还有其他问题。如果您尝试编写同时支持 CPython 和 IronPython 的代码，那么您应该在这两个平台上进行测试。即，当您运行测试套件时，在两种环境（以及您打算支持的任何其他环境）中运行它。我不确定[tox](http://tox.testrun.org/latest/)是否支持 IronPython，但它可能会帮助您进行设置。

# php - 用于下拉值问题的 Javascript onchange

> ID：13579819
> 
> 赞同：4
> 
> 时间：2012-11-27T08:10:48.467
> 
> 标签：php, javascript, html, onchange

我有 2 帧 php 文件，首先调用 topFrame，底部调用 mainFrame。在 topFrame 我有一个带有下拉值的 php 文件，onchange 我想用另一个 php 文件重新加载这个框架。

下面是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>RATEMASTER</title>

<script type="text/javascript">

function showsupli(sta)
{

alert ("sta");
if (sta == 'Yes')
{
window.open('ratesupli.php,'topFrame');
}
}

</script>

</head>
<body>
<?
echo "<form name='f1'>";

echo "<table width='730' border='0' align='center' cellpadding='0' cellspacing='1'>";
echo "  <tr>";
echo "    <td><span class='style3'>Suplimentry Invoice</span></td>";

echo "    <td>";
echo "<select name='supli' onchange=\"showsupli(this.value);\"><option value=0>No</option>";
  echo "<option value=1>Yes</option>";
echo "</select>";// Closing of list box
echo "</td>";
echo "  </tr>";

echo "</table>";

echo "</form>";
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:15:36.287

问题是您的选项值是`1`and `0`，但是在您的 Javascript 中您要查找`Yes`。

改成：

```
if (sta == '1') 
```

a 的选定值`<select>`是 selected `<option>` `value`，而不是文本。

您还有一个语法错误，您忘记在 之后关闭引号`ratesupli.php`，请使用：

```
window.open('ratesupli.php','topFrame'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T06:44:19.667

html 更改

```
<option value='0'>No</option>
<option value='1'>Yes</option> 
```

Javascript 更改

```
function showsupli(sta)
{

alert ("sta");
if (sta == '1')
{
window.open('ratesupli.php','topFrame');
}
} 
```

# jquery - 在 C# 中使用 scriptmanager 调用 jquery 方法

> ID：13579820
> 
> 赞同：0
> 
> 时间：2012-11-27T08:10:49.323
> 
> 标签：jquery, scriptmanager

我添加了一个 Web 用户控件，并在客户端的 jquery 中创建了一个名为“ButtonClick”的 Web 用户控件上的函数。并在循环中使用 ScriptManager.RegisterStartupScript 从后面的代码中调用此方法。但它只运行一次，而它应该运行循环次数。

请帮帮我......代码示例在这里

```
 var q = (from p in obj.Pinny_ShowOffer where (p.OfferID == objOffer.OfferID) select p).ToList();
    if (q.Count > 0)
    {
        Rdbtnoffersetup.Items.FindByValue("2").Selected = true;
        ScriptManager.RegisterStartupScript(Page, Page.GetType(), "ShowDIv", "ShowDiv(2,2);", true);
        Int32 k = 0;
        for (Int32 i = 0; i < q.Count; i++)
        {
            ScriptManager.RegisterStartupScript(Page, Page.GetType(), "ButtonClick",
                                                                        "ButtonClick('btn" + q[i].Weekday + "','" + q[i].Weekday + "');", true);
            if (q[i].StartTime == "07:00" && q[i].EndTime == "11:00")
            {
                ScriptManager.RegisterStartupScript(Page, Page.GetType(), "select value", "SelectValueoFDropDown('drpStart" + q[i].Weekday + k + "','1');", true);
            }
            k++;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:44:51.990

它只触发一次的原因是因为您正在复制它们`ButtonClick`在您的`RegisterStartupScript`呼叫中的键。

从[文档](http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx)中：

> 客户端脚本由其密钥和类型唯一标识。**具有相同键和类型的**脚本被认为是重复的。页面中只能注册一个具有给定类型和密钥对的脚本。尝试注册已注册的脚本不会创建该脚本的副本。

* * *

你可以尝试这样的事情来保持它的独特性：

```
ScriptManager.RegisterStartupScript(Page, Page.GetType(), "ButtonClick" + i.toString(),"ButtonClick('btn" + q[i].Weekday + "','" + q[i].Weekday + "');", true); 
```

# email - 确定电子邮件字符集

> ID：13579821
> 
> 赞同：0
> 
> 时间：2012-11-27T08:10:52.027
> 
> 标签：email, unicode, asp-classic, pop3

我的老板分配给我一项任务，即在我们的前端网站上运行的电子邮件服务器上正确显示所有国际字符。该网站使用asp-classic。

我查看了我们的 mail_body.asp 代码，以了解服务器如何处理从 POP3 接收的文本文件，这就是我发现的：

```
Set bobj = Server.CreateObject("Basp21")
If InStr(UCase(filecontent),"?UTF-8?") > 0 or InStr(UCase(filecontent),"CHARSET=""UTF-8""" ) > 0 Then
    bobj.CodePage = 65001
ElseIf  InStr(UCase(filecontent),"EUC-KR") or InStr(UCase(filecontent),"KS_C_5601-1987") > 0 or InStr(UCase(filecontent),"CONTENT-TRANSFER-ENCODING: BASE64") > 0 Then
    bobj.CodePage = 949
    'response.Write "euc-kr"
    'response.Write "UTF-8"
ElseIf InStr(UCase(filecontent),"CHARSET=JOHAB") > 0 Then
    bobj.CodePage = 1361
    'response.Write "JOHAB"
ElseIf InStr(UCase(filecontent),"CHARSET=X-MAC-KOREAN") > 0 Then
    bobj.CodePage = 10003   
    'response.Write "X-MAC-KOREAN"
ElseIf InStr(UCase(filecontent),"CHARSET=X-EBCDIC-KOREANEXTENDED") > 0 Then
    bobj.CodePage = 20833   
    'response.Write "X-EBCDIC-KOREAN"
ElseIf InStr(UCase(filecontent),"CHARSET=ISO-2022-KR") > 0 Then
    bobj.CodePage = 50225
    'response.Write "ISO-2022-KR"   
ElseIf InStr(UCase(filecontent),"CHARSET=""GB2312""") > 0 or InStr(UCase(filecontent),"CHARSET=GB2312") Then
    bobj.CodePage = 936
Else
    bobj.CodePage = 65001
End If

...
outarray=bobj.ReadMail(contents,"subject:to:from:date:X-OriginalArrivalTime:",dirname) 
```

我认为可以肯定地说上面的代码一点也不优雅，但它在很大程度上完成了工作。这是一个韩国网站，因此代码正在寻找非 unicode 但用韩语编写的标头。否则，它假定收到的电子邮件是 UTF-8。

因此，每当邮件的字符集不是 UTF-8 以及代码中定义的任何韩语代码页时，解析的文本都会变得混乱。

因为我的老板要求我“让电子邮件内容显示所有国际字符”，所以我能想到的唯一解决方案是[彻底检查此处列出的所有标题可以包含的字符集](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317756%28v=vs.85%29.aspx)并适当地设置代码页但是这个似乎不是一个好的解决方案。

我想知道这里将采取什么实际方法。许多电子邮件服务（如 hotmail 和 gmail）在显示国际字符时没有问题，所以如果可能的话，我想知道他们是如何解决这类问题的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:20:47.650

实际的做法是解析出内容的值`charset=*`并将内容转换为某种统一的内部编码。伪代码（因为我根本不是 ASP 人）：

```
charset  = parseMailHeaders(mail.headers, 'charset')  // e.g. 'ISO-2022-KR'
mailBody = convertEncoding(charset, 'UTF-16', mail.body) 
```

假设从适当的邮件头`parseMailHeaders`中提取 的值。`charset=*`根据您的假设`convertEncoding`函数接受的值，您可能需要对提取的`charset`值进行一些标准化，但基本上就是这样。从那时起，您就知道内容是 UTF-16 编码的，并且可以这样处理。

# php - 需要在来自数据库结果的谷歌地图上显示大约 20,000 个图钉

> ID：13579824
> 
> 赞同：-3
> 
> 时间：2012-11-27T08:10:54.833
> 
> 标签：php, mysql, json, google-maps, google-maps-api-3

我必须在谷歌地图上将用户显示为大头针。我从数据库中获取了用户记录，现在大约有 20,000 条。我现在正在做的是做一个 ajax 请求以从数据库中获取所有用户，一旦加载了文档并创建了地图。但问题是，当我用大约 20,000 条记录的 json 结果响应 ajax 调用时，我的浏览器卡住了。有时需要 20 分钟才能加载结果并将它们显示为谷歌地图上的图钉。我确信这是错误的方法。

谁能指导我将数据库结果加载为谷歌地图上的图钉的最佳方法。请记住，每个请求的结果集可能不同（基于登录用户的城市 - 想法是显示附近的用户）。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:33:30.110

有这么大的数据量，尝试绘制 20,000 个图钉会很慢。

看看类似集群的东西 - [http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/1.0/examples/advanced_example.html](http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/1.0/examples/advanced_example.html)

或者，如果你只显示附近的用户，你真的有 20,000 个附近的用户吗？根据用户的当前位置缩小返回的用户列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:49:03.237

我真的很想把它保持在 100 个引脚以下 - 对于处理能力低的设备来说，20,000 个引脚太多了。

如果您确定需要渲染所有引脚，那么您需要仔细考虑如何将信息提供给用户。您是要在页面加载时预加载所有信息，以便可以重复使用信息，还是希望在信息发生更改时重新加载信息。

无论如何，如果您以 XML 格式输出结果以供 Javascript 读取，则较小的 XML 文件会提供更快的加载时间。如果您使用的是 XML，则可以将其从...减少

```
<records>
    <record id="1">
        <name>blah</name>
        <longatude>blah</longatude>
        <latitude>blah</latitude>
    </record>
        <record id="2">
        <name>blah</name>
        <longatude>blah</longatude>
        <latitude>blah</latitude>
    </record>
</records> 
```

至：

```
<records>
    <record id="1" n="blah" lat="bah" lon="blah" />
    <record id="2" n="blah" lat="bah" lon="blah" />
    <record id="3" n="blah" lat="bah" lon="blah" />
</records> 
```

如果您确定所有标记都是必需的，我会使用[此处](https://developers.google.com/maps/articles/toomanymarkers)提到的 Google Maps Clustering，这将减少任何时候在页面上呈现的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:59:10.623

我认为您可能必须避免使用客户端。我还没有尝试过，但 Fusion Table Layers 似乎是您所追求的，它将处理保留在 googles 服务器上，您可以使用类似 sql 的查询。每个表和 5 个表限制为 100,000 行。

我不确定表格的设置，但它可能是一个有趣的替代方案。

[https://developers.google.com/maps/documentation/javascript/layers#FusionTables](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)

# php - 带有 sql 查询和 $REQUEST 的 php array_diff

> ID：13579825
> 
> 赞同：-1
> 
> 时间：2012-11-27T08:11:04.693
> 
> 标签：php, sql, arrays

我想使用`array_diff`mysql 查询的结果，`$REQUEST`这里的结果是我尝试过的：

```
while($resultarray3 = mysql_fetch_array($result3)) 
{
$Bestand = $resultarray3['Bestand']
}
$Ergebnis = array_diff($_REQUEST['Menge'], $Bestand); 
```

我通过使用它得到了这个错误：`Warning: array_diff(): Argument #2 is not an array in /var/www/html/lager_management/warenkorb.php on line 143`

数组 $Bestand 的示例：

```
Array ( [0] => 20 [1] => 250 [2] => 90 ) 
```

数组 $Menge 的示例：

```
Array ([0] => 10 [1] => 45 [3] => 80 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:13:39.973

use the array, not simple var

```
$Bestand[] = $resultarray3['Bestand']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:13:47.427

You are replacing the varible each time in loop. Try this

`$Bestand =array(); while($resultarray3 = mysql_fetch_array($result3)) { $Bestand[] = $resultarray3['Bestand'] } $Ergebnis = array_diff($_REQUEST['Menge'], $Bestand);`

Need to change/Modify

```
$Bestand=array() 
```

and

```
$Bestand[] = $resultarray3['Bestand'] 
```

# ruby-on-rails - 通过键数组获取 ruby 哈希值

> ID：13579827
> 
> 赞同：7
> 
> 时间：2012-11-27T08:11:09.687
> 
> 标签：ruby-on-rails, ruby, arrays, hash

我的目标是创建一个用哈希初始化的对象，然后查询该对象以从该哈希中获取值。为了让事情更清楚，这里有一个粗略的例子来说明我的意思：

```
class HashHolder
  def initialize(hash)
    @hash = hash
  end

  def get_value(*args)
    # What are my possibilities here?
  end
end

holder = HashHolder.new({:a => { :b => { :c => "value" } } } )
holder.get_value(:a, :b, :c) # should return "value" 
```

我知道我可以在参数列表上执行迭代，如下所示：

```
def get_value(*args)
  value = @hash
  args.each do |k|
    value = value[k]
  end
  return value
end 
```

但是，如果我打算大量使用这种方法，那么当我只想访问一个哈希值时，这将大大降低我的性能。

对此有何建议？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-05-03T01:17:55.537

## 自从被问到已经有一段时间了，要更新答案。

（*在 ruby​​ 2.3.1 中测试*）

**你有一个像这样的哈希：**

```
my_hash = {:a => { :b => { :c => "value" } } } 
```

**问题问：**

```
my_hash.get_value(:a, :b, :c) # should return "value" 
```

**答案：使用 'dig' 而不是 get_value，如下所示：**

```
my_hash.dig(:a,:b,:c) # returns "value" 
```

* * *

由于问题的标题具有误导性（它应该类似于：如何在带有键数组的嵌套哈希中获取值），这里是实际提出的问题的答案：

> 通过键数组获取 ruby​​ 哈希值

**准备：**

```
my_hash = {:a => 1, :b => 3, :d => 6}
my_array = [:a,:d] 
```

**回答：**

```
my_hash.values_at(*my_array) #returns [1,6] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T08:15:20.513

```
def get_value(*args)
  args.inject(@hash, &:fetch)
end 
```

* * *

如果您想避免在查找时进行迭代（我认为没有必要），那么您需要展平要存储的哈希：

```
class HashHolder
  def initialize(hash)
    while hash.values.any?{|v| v.kind_of?(Hash)}
      hash.to_a.each{|k, v| if v.kind_of?(Hash); hash.delete(k).each{|kk, vv| hash[[*k, kk]] = vv} end}
    end
    @hash = hash
  end
  def get_value(*args)
    @hash[args]
  end
end 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-27T09:02:17.233

如果您知道哈希的结构始终采用该格式，您可以这样做：

```
holder[:a][:b][:c] 
```

...返回“价值”。

# python - 我被困在TT的一部分中，有人可以帮助我吗？

> ID：13579839
> 
> 赞同：-4
> 
> 时间：2012-11-27T08:11:47.747
> 
> 标签：python

我正在创建一个测验...并且我想确保人们可以选择他们想要回答多少个问题.. 为一个应用程序编写一个程序，让用户托管一个测验游戏。该应用程序将包含一系列带有简短答案的问题。程序应该询问用户他们想为他们的游戏提出多少问题。然后它将以随机顺序询问许多问题。当用户输入答案时，它会根据正确答案检查答案，并跟踪他们答对的问题数量。它永远不会两次问同一个问题。当所有的问题都被问完，或者用户已经退出（通过输入“quit”作为答案），程序将打印分数和提出的问题总数

```
from random import *   #random is a library. we need the randint function from it

    def Main() : 
        Questions = []  # list of all the  questions
        Answers = []    # list of all the answers 
        setup(Questions, Answers)

        while True :
            target = int(input("How many questions do you want to answer? more than 1 and less than 11 "))
            if target <= len(Questions) :
                break
            print("Sorry, I only have ", len(Questions), " in my databank")

      #  alternate version:
      #  target = int(input("How many questions do you want to answer? "))
      #  while target > len(Questions) :
      #  print("Sorry, I only have ", len(Questions), " in my databank")
      #  target = int(input("How many questions do you want to answer? "))
      # 

        score = 0
        numberAsked = 0
        while len(Questions) > 0 :
            qnNum = randint(0, len(Questions)-1)
            correct = askQuestion(Questions[qnNum], Answers[qnNum])
            numberAsked = numberAsked + 1
            if correct == "quit" :
                break
            elif correct :
                score=score+1
            del Questions[qnNum]
            del Answers[qnNum]
        reportScore(score, numberAsked)

    def reportScore(sc, numAsked) :
        print("Thanks for trying my quiz, Goodbye", sc, " questions right out of ", numAsked)

    #asks the user a question, and returns True or False depending on whether they answered correctly.
    # If the user answered with 'q', then it should return "quit"
    def askQuestion (question, correctAnswer):
        print(question)
        answer = input("your answer: ").lower()
        if answer == "quit" :
            return "quit"
        elif answer == correctAnswer.lower() :
            print("Well done, you got it right!")
            return True
        else :
            print("You got it wrong this time!. The correct answer is ", correctAnswer)
            return False

    #  Sets up the lists of questions
    def setup(Questions, Answers) : 
        Questions.append("The treaty of Waitangi was signed in 1901")
        Answers.append("FALSE")
        Questions.append("Aotearoa commonly means Land of the Long White Cloud")
        Answers.append("TRUE") 
        Questions.append("The Treaty of Waitangi was signed at Parliament")
        Answers.append("FALSE")
        Questions.append("The All Blacks are New Zealands top rugby team")
        Answers.append("TRUE")
        Questions.append("Queen Victoria was the reigning monarch of England at the time of the Treaty")
        Answers.append("TRUE")
        Questions.append("Phar Lap was a New Zealand born horse who won the Melbourne Cup")
        Answers.append("TRUE")
        Questions.append("God Save the King was New Zealand’s national anthem up to and including during WWII")
        Answers.append("TRUE")
        Questions.append("Denis Glover wrote the poem The Magpies")
        Answers.append("TRUE")
        Questions.append("Te Rauparaha is credited with intellectual property rights of Kamate!")
        Answers.append("FALSE")
        Questions.append("Kiri Te Kanawa is a Wellington-born opera singer")
        Answers.append("FALSE")

    Main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:21:30.243

主要问题在于您的`while`循环-您没有对 做任何事情`target`，这应该控制所问问题的数量。不要对建议的修改过于疯狂，尝试用以下代码替换`while`循环周围的代码：

```
score = 0
numberAsked = 0
while numberAsked < target:
    qnNum = randint(0, len(Questions))
    correct = askQuestion(Questions[qnNum], Answers[qnNum])
    numberAsked = numberAsked + 1
    if correct == "quit" :
        break
    elif correct :
        score=score+1
    del Questions[qnNum]
    del Answers[qnNum] 
```

这将循环 while`numberAsked`小于`target`。您当前的问题是您的循环由`Questions`列表的长度控制，该长度从 10 开始，每次迭代减少 1。因此，无论您`target`是什么，循环都会遍历所有问题。

# javascript - 替换多个空格

> ID：13579841
> 
> 赞同：0
> 
> 时间：2012-11-27T08:12:01.067
> 
> 标签：javascript, jquery

```
var firefoxIngs = myText.replace(/ /g,"&nbsp;"); 
```

这是我的字符串：

```
"h  a"//it has two empty spaces between h and a 
```

代码后变成：

```
"h&nbsp;a"//it has one empty spaces between h and a 
```

我希望它是

```
"h&nbsp;&nbsp;a" 
```

为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:14:53.613

它按预期工作

```
console.log("h  a".replace(/ /g,"&nbsp;")); 
```

在字符串上，您可能缺少一个空格。

## 结果：

```
h&nbsp;&nbsp;a 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/kMerT/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:19:19.740

这也有效

```
<script type="text/javascript">
 function validate(){
  str=document.getElementById("input").value;

str= str.replace(/\s/g, '  ');
console.log(str);
}
</script>
    <input id="input" type="text"/>
<input type="button" onclick="validate()" /> 
```

# qt - Environment for a Qt Program

> ID：13579846
> 
> 赞同：0
> 
> 时间：2012-11-27T08:12:12.027
> 
> 标签：qt, debugging, shared-libraries, strace, ldd

I have a Qt executable file. When this program runs on a Ubuntu 11.04 virtual machine, the GUI is ugly though you can still tell it is the GUI that you want. When it runs on Ubuntu 12.04 of my laptop, however, everything goes well. Thus I guess there might be something wrong with the environment of the virtual machine.

To find out whether the problem lies in the libraries, I ran the command

```
ldd filename 
```

I got library dependencies as following:

```
% Below is the output on the virtual machine    
linux-gate.so.1 =>  (0x00cc8000)
libQtGui.so.4 => /opt/qt-4.7.1x86/lib/libQtGui.so.4 (0x00cc9000)
libQtCore.so.4 => /opt/qt-4.7.1x86/lib/libQtCore.so.4 (0x00110000)
libpthread.so.0 => /lib/i386-linux-gnu/libpthread.so.0 (0x003b6000)
libstdc++.so.6 => /usr/lib/i386-linux-gnu/libstdc++.so.6 (0x003cf000)
libm.so.6 => /lib/i386-linux-gnu/libm.so.6 (0x004ba000)
libgcc_s.so.1 => /lib/i386-linux-gnu/libgcc_s.so.1 (0x004e0000)
libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0x004fc000)
libXext.so.6 => /usr/lib/i386-linux-gnu/libXext.so.6 (0x00686000)
libX11.so.6 => /usr/lib/i386-linux-gnu/libX11.so.6 (0x00695000)
libdl.so.2 => /lib/i386-linux-gnu/libdl.so.2 (0x0065d000)
librt.so.1 => /lib/i386-linux-gnu/librt.so.1 (0x007b0000)
/lib/ld-linux.so.2 (0x00668000)
libxcb.so.1 => /usr/lib/i386-linux-gnu/libxcb.so.1 (0x00a96000)
libXau.so.6 => /usr/lib/i386-linux-gnu/libXau.so.6 (0x009ed000)
libXdmcp.so.6 => /usr/lib/i386-linux-gnu/libXdmcp.so.6 (0x008a8000)

% Below is the output on Ubuntu 12.04 of my laptop
linux-gate.so.1 =>  (0xb776f000)
libQtGui.so.4 => /usr/lib/i386-linux-gnu/libQtGui.so.4 (0xb6c8a000)
libQtCore.so.4 => /usr/lib/i386-linux-gnu/libQtCore.so.4 (0xb69ad000)
libpthread.so.0 => /lib/i386-linux-gnu/libpthread.so.0 (0xb6991000)
libstdc++.so.6 => /usr/lib/i386-linux-gnu/libstdc++.so.6 (0xb68ac000)
libm.so.6 => /lib/i386-linux-gnu/libm.so.6 (0xb6880000)
libgcc_s.so.1 => /lib/i386-linux-gnu/libgcc_s.so.1 (0xb6862000)
libc.so.6 => /lib/i386-linux-gnu/libc.so.6 (0xb66bd000)
libfontconfig.so.1 => /usr/lib/i386-linux-gnu/libfontconfig.so.1 (0xb6688000)
libaudio.so.2 => /usr/lib/i386-linux-gnu/libaudio.so.2 (0xb666f000)
libglib-2.0.so.0 => /lib/i386-linux-gnu/libglib-2.0.so.0 (0xb6576000)
libpng12.so.0 => /lib/i386-linux-gnu/libpng12.so.0 (0xb654c000)
libz.so.1 => /lib/i386-linux-gnu/libz.so.1 (0xb6536000)
libfreetype.so.6 => /usr/lib/i386-linux-gnu/libfreetype.so.6 (0xb649b000)
libgobject-2.0.so.0 => /usr/lib/i386-linux-gnu/libgobject-2.0.so.0 (0xb644c000)
libSM.so.6 => /usr/lib/i386-linux-gnu/libSM.so.6 (0xb6443000)
libICE.so.6 => /usr/lib/i386-linux-gnu/libICE.so.6 (0xb6429000)
libXi.so.6 => /usr/lib/i386-linux-gnu/libXi.so.6 (0xb6419000)
libXrender.so.1 => /usr/lib/i386-linux-gnu/libXrender.so.1 (0xb640e000)
libXext.so.6 => /usr/lib/i386-linux-gnu/libXext.so.6 (0xb63fc000)
libX11.so.6 => /usr/lib/i386-linux-gnu/libX11.so.6 (0xb62c8000)
libdl.so.2 => /lib/i386-linux-gnu/libdl.so.2 (0xb62c3000)
librt.so.1 => /lib/i386-linux-gnu/librt.so.1 (0xb62ba000)
/lib/ld-linux.so.2 (0xb7770000)
libexpat.so.1 => /lib/i386-linux-gnu/libexpat.so.1 (0xb628f000)
libXt.so.6 => /usr/lib/i386-linux-gnu/libXt.so.6 (0xb6233000)
libXau.so.6 => /usr/lib/i386-linux-gnu/libXau.so.6 (0xb622f000)
libpcre.so.3 => /lib/i386-linux-gnu/libpcre.so.3 (0xb61f3000)
libffi.so.6 => /usr/lib/i386-linux-gnu/libffi.so.6 (0xb61ec000)
libuuid.so.1 => /lib/i386-linux-gnu/libuuid.so.1 (0xb61e5000)
libxcb.so.1 => /usr/lib/i386-linux-gnu/libxcb.so.1 (0xb61c4000)
libXdmcp.so.6 => /usr/lib/i386-linux-gnu/libXdmcp.so.6 (0xb61bd000) 
```

Then I am wondering how can they be different? Can I find out what is wrong by tools such as strace?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:35:53.377

I can see that Qt is installed in /opt on your 11.04\. I guess that means you've built it yourself? Two solutions here:

1.  Install Qt from Ubuntu's repository instead. It comes with the needed Gtk style. (Note that 11.04 also has Qt available; it's just that 12.04 installs it by default while 11.04 doesn't.)

2.  When you build Qt, make sure to enable the Gtk style by passing the "-gtkstyle" option to the configure script. You will probably need to have all needed development packages for Gtk installed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:19:57.280

程序中文字的显示太难看，简直是风格问题。但问题确实出在构建Qt的过程中。当我运行时`./configure`，我将配置信息输出到一个日志文件中，发现类似

```
 88 Xinerama support ....... no
  89 Xcursor support ........ no
  90 Xfixes support ......... no
  91 Xrandr support ......... no
  92 Xrender support ........ no
  93 Xi support ............. no 
```

[此外，我在这里](http://doc.qt.digia.com/4.7-snapshot/requirements-x11.html)找到了 X11 的 Qt 要求。因此我得出结论，问题在于缺乏这样的库。幸运的是，安装它们后一切正常。

# datasource - KendoUI: programmatically setting a datasource model

> ID：13579851
> 
> 赞同：3
> 
> 时间：2012-11-27T08:12:46.520
> 
> 标签：datasource, kendo-ui

I would like to set programmatically the model of my datasource. Something like:

```
var ds = new kendo.data.DataSource({ //... });

var mod = kendo.data.Model.define({
    fields: data 
});

ds.model = mod; 
```

Is it possible? How? Thank you.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T08:59:07.417

当然，但是您必须在`DataSource`字段中进行设置`schema.model`（请参阅[schema.model 参考](http://docs.kendoui.com/api/framework/datasource#schemamodel-objectkendodatamodel)）

如本页所示，您将拥有如下内容：

```
// Definition of your model
var Product = kendo.data.Model.define({
    id: "ProductID",
    fields: {
         ProductID: {
            //this field will not be editable (default value is true)
            editable: false,
            // a defaultValue will not be assigned (default value is false)
            nullable: true
         },
         ProductName: {
             validation: { //set validation rules
                 required: true
             }
         },
         UnitPrice: {
           //data type of the field {Number|String|Boolean|Date} default is String
           type: "number",
           // used when new model is created
           defaultValue: 42,
           validation: {
               required: true,
               min: 1
           }
       }
   }
});

// Map this model to your DataSource object
var dataSource = new kendo.data.DataSource({
    schema: {
        model: Product // Use the existing Product model
    }
}); 
```

# php - AWS S3 PHP SDK Error - PHP Fatal error: Class 'RequestCore' not found

> ID：13579853
> 
> 赞同：0
> 
> 时间：2012-11-27T08:12:57.767
> 
> 标签：php, amazon-s3, amazon-web-services

I keep getting this error from AWS S3 API when checking if object exists in my S3 bucket.

The code looks something like that :
First file :

```
<?php 
require_once 'sdk-1.5.17/sdk.class.php';
require_once 'ReportHandler.php';

$report_handler = new ReportHandler();
$report_handler->generateWeeklyTotalsReport();
?> 
```

Second file :

```
<?php
class ReportHandler {
     private $s3;

     public function __construct() {
          $this->s3 = new AmazonS3(); 
     }
     public function generateDailyTotalsReport() {
     ....
          if($this->s3->if_object_exists(BUCKET_NAME,OBJECT_NAME) {
     ....
    }
?> 
```

**Details** :
**EC2 IMAGE** : ami-49ec5a20
**SDK** : sdk-1.5.17
**PHP Version** : 5.3.15
**Log** :

```
Mon Nov 26 17:30:29 2012 error http://client 10.195.122.171 PHP Fatal error: Class   'RequestCore' not found in /var/www/html/sdk-1.5.17/utilities/request.class.php on line 30  
Mon Nov 26 17:30:29 2012 error http://client 10.195.122.171 PHP Stack trace:  
Mon Nov 26 17:30:29 2012 error http://client 10.195.122.171 PHP 1\. {main}()   /var/www/html/WeeklyReport.php:0  
Mon Nov 26 17:30:29 2012 error http://client 10.195.122.171 PHP 2\. ReportHandler-  >generateWeeklyTotalsReport() /var/www/html/WeeklyReport.php:16  
Mon Nov 26 17:30:29 2012 error http://client 10.195.122.171 PHP 3\. ReportHandler-  >findOrCreateReport() /var/www/html/ReportHandler.php:111  
Mon Nov 26 17:30:29 2012 error http://client 10.195.122.171 PHP 4\. AmazonS3-  >if_object_exists() /var/www/html/ReportHandler.php:148  
Mon Nov 26 17:30:29 2012 error http://client 10.195.122.171 PHP 5\. AmazonS3-  >get_object_headers() /var/www/html/sdk-1.5.17/services/s3.class.php:2264  
Mon Nov 26 17:30:29 2012 error http://client 10.195.122.171 PHP 6\. AmazonS3->authenticate()   /var/www/html/sdk-1.5.17/services/s3.class.php:1559  
Mon Nov 26 17:30:29 2012 error http://client 10.195.122.171 PHP 7\. CFLoader::autoloader()   /var/www/html/sdk-1.5.17/services/s3.class.php:0  
Mon Nov 26 17:30:29 2012 error http://client 10.195.122.171 PHP 8\. require_once()   /var/www/html/sdk-1.5.17/sdk.class.php:1428 
```

**Am I doing something wrong?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:41:09.083

好的。我犯了一个愚蠢的错误。

从 SDK 中删除文档和示例目录时，我还删除了包含所有重要类的 lib 目录（我这样做的时候已经很晚了 :)）。

退货后一切正常。

# c# - rdlc report in vs2010, how do i repeat tables header on every page?

> ID：13579856
> 
> 赞同：0
> 
> 时间：2012-11-27T08:13:05.797
> 
> 标签：c#, visual-studio-2010, rdlc

Hi all I am making rdlc report.

In report I am using more than one dataset.

Also, I am using more than one tables.

Different tables having diff dataset.

I need to repeat all those tables in second page for second record.

How can I achieve this thing?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:26:09.907

选择您创建的 tablix -> `Properties`-> 在该部分中`Column Header`检查选项`Repeat header columns on each page` 如果您有行标题，您可以对行标题执行相同操作

# iphone - The method - (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView isn't called

> ID：13579860
> 
> 赞同：0
> 
> 时间：2012-11-27T08:13:16.733
> 
> 标签：iphone, uiscrollview, zooming

> **Possible Duplicate:**
> [The zoom for uiscrollview isn’t working](https://stackoverflow.com/questions/13567887/the-zoom-for-uiscrollview-isnt-working)

I posted a question yesterday, because the zoom for the UIScrollView isn't working. When pressing on a button, a UIScrollView appears, that contains an UIImage, but the problem is that I can't zoom by clicking or double-clicking on the image. I made a debug and the method

```
 - (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView 
```

doesn't get called. The question can be found [here](https://stackoverflow.com/questions/13567887/the-zoom-for-uiscrollview-isnt-working/13576137#13576137)

Sorry for asking the same question again. Thank you in advance. I wish you all the best!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:16:31.700

尝试将图像视图的属性 UserInteractionEnabled 更改为 YES。可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:29:35.993

你是否设置了scrollview的委托。首先检查一次......如果委托返回nil，则没有任何反应......所以首先设置UIScrollview的委托。

# jquery - 为什么在 Ruby on Rails 中没有使用 jQuery AJAX 执行 respond_to js？

> ID：13579867
> 
> 赞同：2
> 
> 时间：2012-11-27T08:13:42.730
> 
> 标签：jquery, ruby-on-rails

我正在向我的服务器运行一个简单的 AJAX 帖子，并且`respond_to`.js 块作为 200 成功返回，但未执行。我是否在配置或执行返回 js 代码的代码中遗漏了某些内容？我正在使用 Ruby on Rails 3.2.9。

javascript:

```
 $("#test-submit").on("click",function(event){
      $.ajax({
        type: "POST",
        url: '/users',
        dataType: 'json',
        data: {
          "test" : "test-data"
        }
      });
      event.preventDefault();
    }); 
```

控制器动作：

```
 def create
    user = User.find(current_user)

    respond_to do |format|
      format.js { }
    end
  end 
```

用户 create.js.erb：

```
alert('hai'); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T08:29:25.530

```
...
dataType: 'json',
... 
```

您期望 JSON 数据，而不是可执行脚本。尝试将此行更改为

```
dataType: 'script', 
```

# java - Eclipse stops console from clearing

> ID：13579869
> 
> 赞同：23
> 
> 时间：2012-11-27T08:13:46.323
> 
> 标签：java, eclipse, maven, console

I'm having problems with Eclipse automatically clearing the console after doing Maven builds. This doesn't seem to happen all the time, but because of this I can't see the results. Does anybody know how to change this behavior?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-09-02T13:32:50.750

阻止 Eclipse 控制台清除如下：

1.  选择**Window » Preferences**以显示**Preferences**对话框
2.  展开**运行/调试**
3.  选择**控制台**
4.  取消选中**限制控制台输出**
5.  单击**确定**接受新的首选项并关闭对话框

![在此处输入图像描述](../Images/d21772fe1e9421fbd5f181dff47a530b.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-27T08:52:31.127

有不同类型的控制台。你有一个`Console`包含 Java 程序的输出，还有一个`Maven console`包含 Maven 插件的输出。

![在此处输入图像描述](../Images/d6c6aa35ae6e8918ac384322e7a923fe.png)

此外还有其他控制台类型，例如 SVN 控制台...

要保留控制台输出，您可以将应用程序的输出重定向到文件。您可以在选项卡`Run Configurations`上的对话框中执行此`Common`操作。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-27T09:27:48.910

我自己找到了解决方案，我在程序的一部分中启用了 ant-builder，这导致控制台消失。

右键单击项目 => 属性 => 构建器 => 禁用 ant 构建器

# wordpress - Jquery autocomplete not working on Wordpress post edit screen, (conflict with tinymce scripts)

> ID：13579871
> 
> 赞同：2
> 
> 时间：2012-11-27T08:13:48.867
> 
> 标签：wordpress, jquery-ui, tinymce, jquery-autocomplete

TOday i did a lot of googling to find the solution to my jquery autocomplete issue. Finaly i am here to find help... The issue is...

On my wordpress admin side (on post edit screen) I am using jquery autocomplete (jquery-ui) library. which gives me following error...

```
"widget.extend is not a function" 
```

this error is located in code at

```
_createWidget: function( options, element ) {
element = $( element || this.defaultElement || this )[ 0 ];
this.element = $( element );
this.uuid = uuid++;
this.eventNamespace = "." + this.widgetName + this.uuid;
this.options = $.widget.extend( {},
    this.options,
    this._getCreateOptions(),
    options );

this.bindings = $();
this.hoverable = $();
this.focusable = $(); 
```

I am sure about following....

1.It's not version issue, i tried various google hosted and self hosting jquery-ui.js version. but the issue is same. 2.the same code works on all other admin side pages (i added in footer so can test in all admin side pages), but only gives error on post/page edit page where tinymce is loaded...

on these page, where it gives error i found following code in page source which i think is tinymce related....

```
<script type='text/javascript' src='http://wp.mindstien.com/wp-admin/load-scripts.php?c=1&amp;load=admin-bar,hoverIntent,common,jquery-color,schedule,wp-ajax-response,autosave,wp-lists,quicktags,jquery-query,admin-comments,suggest,jquery-ui-core,jquery-ui-widget,jquery-ui-mouse,jquery-ui-sortable,postbox,post,thickbox,media-upload,word-count,editor,jquery-ui-resizable,jquery-ui-draggable,jquery-ui-button,jquery-ui-position,jquery-ui-dialog,wpdialogs,wplink,wpdialogs-popup,wp-fullscreen&amp;ver=3.4.2'></script> 
```

this code is located in footer of the page.

Can anyone guide me how can i solve this issue ? Or Can anyone knows the proper way to use autocomplete on wordpress admin page where tinymce scripts are also loaded ?

Thanks.

# android - why content uri is not working in this case

> ID：13579874
> 
> 赞同：0
> 
> 时间：2012-11-27T08:14:03.183
> 
> 标签：android

```
Uri sare_sms = Uri.parse("content://contacts/");    
Cursor c = getContentResolver().query(sare_sms, null, null, null, null);

TextView txt = ( TextView ) findViewById (R.id.txt);
txt.setText( new Integer(c.getColumnCount()).toString()); 
```

this code is not working

but

```
Uri sare_sms = Uri.parse("content://sms/inbox/");
Cursor c = getContentResolver().query(sare_sms, null, null, null, null);

TextView txt = ( TextView ) findViewById (R.id.txt);
txt.setText( new Integer(c.getColumnCount()).toString()); 
```

and this working correctly why ?

& i have included

```
uses-permission android:name="android.permission.READ_SMS" 
uses-permission android:name="android.permission.READ_CONTACTS" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:22:34.873

你应该`content://contacts/people`用来获取联系人信息

# c# - Clear the cache and add the cache at a specific time

> ID：13579877
> 
> 赞同：1
> 
> 时间：2012-11-27T08:14:05.043
> 
> 标签：c#, asp.net, caching

I have a process which runs at midnight which send birthday notification mails.This only needs to run once a day, here is my code in Global.asax file

```
private const string DummyPageUrl = "http://localhost:4865/automatic/dummy.aspx";
private const string DummyCacheItemKey = "dummmmyyy";
void Application_Start(object sender, EventArgs e)
{
    RegisterCacheEntry();

}
private void RegisterCacheEntry()
{
    if (null != HttpContext.Current.Cache[DummyCacheItemKey]) return;
    HttpContext.Current.Cache.Add(DummyCacheItemKey, "Test", null,       Cache.NoAbsoluteExpiration,
       TimeSpan.FromHours(1), CacheItemPriority.NotRemovable,
        new CacheItemRemovedCallback(CacheItemRemovedCallback));
}
public void CacheItemRemovedCallback(string key, object value, CacheItemRemovedReason reason)
{
    DoWork();
    HitPage();
}
private void HitPage()
{
    System.Net.WebClient client = new System.Net.WebClient();
    client.DownloadData(DummyPageUrl);
}
private void DoWork()
 {

}
protected void Application_BeginRequest(object sender, EventArgs e)
{
    if (HttpContext.Current.Request.Url.ToString() == DummyPageUrl)
    {
        RegisterCacheEntry();
    }
} 
```

# c++ - boost asio udp socket async_receive_from 不调用处理程序

> ID：13579879
> 
> 赞同：7
> 
> 时间：2012-11-27T08:14:17.137
> 
> 标签：c++, sockets, boost, udp, boost-asio

我想创建一个自治线程，专门用于使用 boost 库（asio）从 UDP 套接字接收数据。这个线程应该是由UDP socket接收到的一些数据触发的无限循环。在我的应用程序中，我需要使用异步接收操作。

如果我使用同步函数 receive_from 一切都按预期工作。

但是，如果我使用 async_receive_from，则永远不会调用处理程序。由于我使用信号量来检测已接收到一些数据，因此程序锁定并且永远不会触发循环。

我已经验证（使用网络分析器）发送方设备在 UDP 套接字上正确发送数据。

我已在以下代码中隔离了问题。

```
#include <boost\array.hpp>
#include <boost\asio.hpp>
#include <boost\thread.hpp>
#include <boost\interprocess\sync\interprocess_semaphore.hpp>

#include <iostream>

typedef boost::interprocess::interprocess_semaphore Semaphore;

using namespace boost::asio::ip;

class ReceiveUDP
{
public:

    boost::thread*  m_pThread;

    boost::asio::io_service         m_io_service;
    udp::endpoint                   m_local_endpoint;
    udp::endpoint                   m_sender_endpoint;

    udp::socket                     m_socket;

    size_t      m_read_bytes;
    Semaphore   m_receive_semaphore;

    ReceiveUDP() :
        m_socket(m_io_service),
        m_local_endpoint(boost::asio::ip::address::from_string("192.168.0.254"), 11),
        m_sender_endpoint(boost::asio::ip::address::from_string("192.168.0.11"), 5550),
        m_receive_semaphore(0)
    {
        Start();
    }

    void Start()
    {
        m_pThread = new boost::thread(&ReceiveUDP::_ThreadFunction, this);
    }

    void _HandleReceiveFrom(
        const boost::system::error_code& error,
        size_t                                  received_bytes)
    {
        m_receive_semaphore.post();

        m_read_bytes = received_bytes;
    }

    void _ThreadFunction()
    {
        try
        {
            boost::array<char, 100> recv_buf;

            m_socket.open(udp::v4());
            m_socket.bind(m_local_endpoint);
            m_io_service.run();

            while (1)
            {
#if 1 // THIS WORKS

                m_read_bytes = m_socket.receive_from(
                    boost::asio::buffer(recv_buf), m_sender_endpoint);

#else // THIS DOESN'T WORK

                m_socket.async_receive_from(
                    boost::asio::buffer(recv_buf),
                    m_sender_endpoint,
                    boost::bind(&ReceiveUDP::_HandleReceiveFrom, this,
                    boost::asio::placeholders::error,
                    boost::asio::placeholders::bytes_transferred));

                /* The program locks on this wait since _HandleReceiveFrom
                is never called. */
                m_receive_semaphore.wait();

#endif

                std::cout.write(recv_buf.data(), m_read_bytes);
            }

            m_socket.close();
        }
        catch (std::exception& e)
        {
            std::cerr << e.what() << std::endl;
        }
    }
};

void main()
{
    ReceiveUDP  receive_thread;

    receive_thread.m_pThread->join();
} 
```

信号量上的 timed_wait 是首选，但是出于调试目的，我在上面的代码中使用了阻塞等待。

我错过了什么？我的错误在哪里？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T09:46:42.990

您的呼叫`io_service.run()`正在退出，因为没有工作`io_service`要做。然后代码进入`while`循环并调用`m_socket.async_receive_from`. 此时`io_service`它没有运行，因此它永远不会读取数据并调用您的处理程序。

您需要在调用 io_service 运行之前安排工作：

IE：

```
// Configure io service
ReceiveUDP  receiver;

m_socket.open(udp::v4());
m_socket.bind(m_local_endpoint);
m_socket.async_receive_from(
    boost::asio::buffer(recv_buf),
    m_sender_endpoint,
    boost::bind(&ReceiveUDP::_HandleReceiveFrom, receiver,
    boost::asio::placeholders::error,
    boost::asio::placeholders::bytes_transferred)); 
```

处理函数将执行以下操作：

```
// start the io service
void HandleReceiveFrom(
    const boost::system::error_code& error,
    size_t received_bytes)
{
    m_receive_semaphore.post();

    // schedule the next asynchronous read
    m_socket.async_receive_from(
        boost::asio::buffer(recv_buf),
        m_sender_endpoint,
        boost::bind(&ReceiveUDP::_HandleReceiveFrom, receiver,
        boost::asio::placeholders::error,
        boost::asio::placeholders::bytes_transferred));

    m_read_bytes = received_bytes;
} 
```

然后，您的线程只需等待信号量：

```
while (1)
{
    m_receive_semaphore.wait();
    std::cout.write(recv_buf.data(), m_read_bytes);
} 
```

笔记：

1.  你真的需要这个额外的线程吗？处理程序是完全异步的，boost::asio 可用于管理线程池（参见：[think-async](http://think-async.com/Asio/Recipes)）
2.  请不要在变量/函数名称中使用下划线后跟大写字母。它们是保留的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T09:50:24.687

`m_io_service.run()`立即返回，因此没有人调度完成处理程序。请注意，这`io_service::run`是一种基于 asio 的应用程序的“消息循环”，只要您希望 asio 功能可用，它就应该运行（这有点简化了描述，但对于您的情况来说已经足够了）。

此外，您不应在循环中调用 async.operation。相反，在前一个的完成处理程序中发出后续的 async.operation - 以确保 2 个 async.reads 不会同时运行。

查看 asio 示例以了解典型的 asio 应用程序设计。

# java - Netbeans, JButton appear after a delay

> ID：13579884
> 
> 赞同：0
> 
> 时间：2012-11-27T08:14:28.190
> 
> 标签：java, animation, jbutton

Can any one tell me how a JButton appears[Fade in], after a short delay.I am working with Netbeans - drag and drop concept for all components.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:58:30.240

就个人而言，我会考虑制作一个扩展您的 JButton 并覆盖paint方法的类。使用 JTimer 随时间更改“setComposite()”（在 graphics2D 类中找到）方法的值。

在java中更改复合的示例：

```
AlphaComposite newComposite = 
    AlphaComposite.getInstance(AlphaComposite.SRC_OVER, .5f)

g2d.setComposite(newComposite); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:33:09.847

这是我发现上述问题起作用的代码。

```
 import java.awt.Color;
  import java.util.Timer;
  import java.util.TimerTask;

  public class delay extends javax.swing.JFrame {
      Timer timer;

      public delay(int seconds) {
          initComponents();
          jButton1.setVisible(false);
          getContentPane().setBackground(Color.red);
          timer = new Timer();
          timer.schedule(new RemindTask(), seconds*1000);
      }

      class RemindTask extends TimerTask{
          public void run() {
              jButton1.setVisible(true);
              timer.cancel();        
          }
      }

      public static void main(String args[]) {
          java.awt.EventQueue.invokeLater(new Runnable() {

              public void run() {
                  new delay(5).setVisible(true);
              }
          });
      }
  } 
```

# javascript - jQuery : How to animate a span and show?

> ID：13579887
> 
> 赞同：1
> 
> 时间：2012-11-27T08:14:44.567
> 
> 标签：javascript, jquery

I have a function that checks mail on every 10 secods, if there is a new email, it make a bubble notification and show the total number of mail.

```
jQuery("#bubble_mate").text(responseText.totalmail);
jQuery("#bubble_mate").addClass('animating').show(); 
```

It animates the bubble, first time I load the page, but this function is set on an interwal, so it should animate the bubble each time there is new mail, but it Doesn't

My animation and other functions are perfect.. it is just it Doesn't animate when it is being called in set interval. it ads the number of total mail.. but no animation.

Please help me. Regards

**Added**

This is animating class and css

```
.animating{
            -webkit-animation: animate 1s cubic-bezier(0,1,1,0);
            -moz-animation: animate 1s cubic-bezier(0,1,1,0);
            -ms-animation: animate 1s cubic-bezier(0,1,1,0);
            -o-animation: animate 1s cubic-bezier(0,1,1,0);
            animation: animate 1s cubic-bezier(0,1,1,0);            
}

        @-webkit-keyframes animate{
            from {
                -webkit-transform: scale(1);
            }
            to {
               -webkit-transform: scale(1.7);
            }
        }

        @-moz-keyframes animate{
            from {
                -moz-transform: scale(1);
            }
            to {
               -moz-transform: scale(1.7);
            }
        }

        @-ms-keyframes animate{
            from {
                -ms-transform: scale(1);
            }
            to {
               -ms-transform: scale(1.7);
            }
        }

        @-o-keyframes animate{
            from {
                -o-transform: scale(1);
            }
            to {
               -o-transform: scale(1.7);
            }
        }

        @keyframes animate{
            from {
                transform: scale(1);
            }
            to {
               transform: scale(1.7);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:41:19.063

动画完成后，您需要删除该类，并在需要再次使用它时重新添加它。

```
setInterval(function() {
    $("#bubble_mate").addClass('animating');

        setTimeout(function() {
            $("#bubble_mate").removeClass('animating');        
        }, 1000); // This is the time specified in your CSS

}, 3000); // Example interval time 
```

**[​JSFiddle](http://jsfiddle.net/sZfDY/)** .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:27:07.647

要显示向下滑动效果，您首先要隐藏 div！

```
$("#simulate").on("click", function() { 
  console.log("mail in");
  $("#bubble_mate").text("10 new mail");
  $("#bubble_mate").addClass('animating').hide();
  $("#bubble_mate").slideDown(500);
}); 
```

试试这个小提琴 [http://jsfiddle.net/jQmJr/32/](http://jsfiddle.net/jQmJr/32/) ​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:15:31.580

尝试：

```
jQuery("#bubble_mate").hide().show('normal'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T08:17:30.530

如果您正在使用关键帧动画，您可能需要删除该类，然后等待 1 毫秒并重新添加该类。多次添加该类不会多次为其设置动画。

```
$('#test').addClass('animated');
setInterval(function(){
    $('#test').removeClass('animated');
    setTimeout(function(){
        $('#test').addClass('animated')
    }, 1);
}, 3000); 
```

将给测试元素类'animated'，这将启动动画，每3秒，它将删除该类，暂停1毫秒，然后重新添加它，这将重新启动动画。

来源：http: [//jsfiddle.net/jcolicchio/eV7ET/](http://jsfiddle.net/jcolicchio/eV7ET/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T09:45:58.417

我自己解决了。。

在 beforeSend 函数中我添加了这个：

```
beforeSend:function (){
jQuery("#bubble_mate").removeClass('animating');
}, 
```

然后成功：

```
success:function(responseText)
{
if(responseText.mails=='yes')
 {
jQuery("#bubble_mate").text(responseText.totalmail);
jQuery("#bubble_mate").addClass('animating').show();
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T10:05:08.577

我使用了 webkitEndAnimation 事件来移除动画类和动画的结束。

这是现场[示例](http://jsfiddle.net/nameIsNull/eV7ET/1/)

代码：

```
$(document).ready(function(){
    setInterval(function(){
        $('#test').show().addClass('animated');
    }, 3000);

    $('#test').on('webkitAnimationEnd', function () { 
    $(this).removeClass('animated').hide();
    });  
});​ 
```

如果这对您有用，您应该考虑一种根据用户浏览器获取正确事件名称的方法

# wpf - 具有自定义值的 WPF 图表工具包轴刻度

> ID：13579889
> 
> 赞同：0
> 
> 时间：2012-11-27T08:14:59.113
> 
> 标签：wpf, charts

目前我正在尝试使用 WPF 图表工具包制作图表，
要求 Y 轴应如下图所示：
![Y轴](../Images/66794441c37300a973ff5b8da3b27c86.png)

其中描述
*0~84 是 D 级
*85~99 是 B 级
...

我不确定图表工具包是否可以制作这种类型的 Y 轴刻度。
如果图表工具包不支持以上内容，我将尝试将 TextBox 控件直接放入画布中以获取“Level *”标签，但我仍然有问题如何仅将 85、100、115 显示为 Y 轴的比例。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T16:01:07.377

您可以尝试使用转换器作为图表的轴标签。像这样的东西：XAML

```
<chartingToolkit:Chart Name="chart1"  >
 <chartingToolkit:Chart.Resources>
  <HideConverter x:Key="HideConverter1" />
 </chartingToolkit:Chart.Resources>
 <chartingToolkit:Chart.Axes>
  <chartingToolkit:LinearAxis Orientation="Y" ShowGridLines="False"  Interval="5" Minimum="0" Maximum="150" >
   <chartingToolkit:LinearAxis.AxisLabelStyle>
    <Style TargetType="chartingToolkit:AxisLabel">
     <Setter Property="Template">
      <Setter.Value>
       <ControlTemplate TargetType="chartingToolkit:AxisLabel">
        <TextBlock DataContext="{TemplateBinding FormattedContent}" Text="{Binding Converter={StaticResource HideConverter1}}" />
       </ControlTemplate>
      </Setter.Value>
     </Setter>
    </Style>
   </chartingToolkit:LinearAxis.AxisLabelStyle>
  </chartingToolkit:LinearAxis>
 </chartingToolkit:Chart.Axes>
</chartingToolkit:Chart> 
```

在您的代码隐藏中，转换器是

```
public class HideConverter : IValueConverter
{

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        // value is the current tick on the Y axis
        int x = int.Parse(value.ToString());
        switch (x)
        {
            case 85:
            case 100:
            case 115:
                return value;
            case 40: // I set 40 to be in the middle between 0 and 85
                return "Level D";
            case 90:
                return "Level C";
            case 110:
                return "Level B";
            case 130:
                return "Level A";
            default:
                return null;;
        }
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

高温高压

# c++ - Apple C 模块进入 Xcode 工具链是否有时间表？

> ID：13579892
> 
> 赞同：5
> 
> 时间：2012-11-27T08:15:22.110
> 
> 标签：c++, objective-c, c, module

Apple的[Doug Gregor 介绍](http://llvm.org/devmtg/2012-11/Gregor-Modules.pdf)了 C、C++ 和 Objective-C 中的新模块功能。很明显，这个功能最终会出现在 Xcode 工具链中。是否有路线图、时间表或至少一些附加信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:26:48.533

*这都是猜测*

在正式被 C++ 标准采用之前，它可能会出现在 clang 中。如果没有实施，Apple（或任何人）将如何获得关于模块工作好/差的经验？

Apple 是否会发布启用此功能的 Xcode 尚不清楚。

下一个版本的 C++ 标准最早不会出现在 2014 年之前。

H2CO3：我同意 Apple 不是向后兼容的忠实拥护者。恕我直言，他们认为这很好，但没有必要。当收益（如他们所见）超过成本时，他们愿意打破向后兼容性。

然而，从 Doug 的演讲来看，这个（模块）看起来像是一个添加，而不是一个变化。我不认为 Apple 希望突然打破其平台上现有的 C/C++ 代码的每一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T17:17:49.900

下一个 C++ 标准目前称为 C++14，表示 2014 年发布目标。也没有迹象表明它将是 Apple 的版本，Clang 似乎正在对其进行一些开发，甚至还有[一个支持模块的分支](http://llvm.org/viewvc/llvm-project/cfe/trunk/test/Modules/)，当然它的早期开发。

显然 C++14 只是一个真正的错误修复，所以不知道像模块这样的大特性是否会进入，尽管它的工作在 C++11 之前就开始了，所以这是可能的。垃圾收集将在类似的船上（尽管这更复杂）。

然后还有下一个，C++17。

# authentication - yii 中基于模块的登录和用户级别访问系统

> ID：13579898
> 
> 赞同：1
> 
> 时间：2012-11-27T08:15:43.330
> 
> 标签：authentication, module, yii, role

我已经通过 update 2 方法从 [这里](http://www.yiiframework.com/wiki/89/module-based-login/)实现了基于模块的登录 ，它对我来说很好。现在需要以不同的角色访问这个模块，我实现了对这个模块的用户级访问，如此[处所述](http://www.yiiframework.com/wiki/191/implementing-a-user-level-access-system/)

我将 LevelLookUp 类添加到 EWebUser。当我现在尝试登录时出现 CException

“CWebUser 及其行为没有名为“isAdmin”的方法或闭包。”

显示。这意味着模块仍在使用 CWebUser，但我创建了自己的 EWebUser 并将其放置到 module/components/EWebUser.php 和模块配置文件 init 方法中的代码

```
$this->setImport(array(
    'bgadmin.models.*',
    'bgadmin.components.*',
));

$this->setComponents(
    array(
        'errorHandler' => array(
            'errorAction' => 'bgadmin/default/error'),
        'user' => array(
            //'class' => 'CWebUser',
            'class' => 'EWebUser',
            'loginUrl' => Yii::app()->createUrl('bgadmin/default/index'),
        )
)); 
```

问题 - 1.在哪里放置 LevelLookUp 类 2.为什么模块仍在使用 CWebuser 而不是 EWebUser ？

重试------------ 当我改变

```
$this->setComponents( 
```

至

```
Yii::app()->setComponents( 
```

然后它访问 EwebUser 但不是我登录时的 loginurl 但现在有 2 个问题 1.`'expression'=>'Yii::app()->user->isAdmin()'`不起作用但在 EwebUser 类中它返回flase。2.注销时出现错误“未定义属性“BgadminModule.user”。”注销代码是

```
Yii::app()->user->logout(false);
        $this->redirect(Yii::app()->getModule('bgadmin')->user->loginUrl); 
```

在以前的情况下注销工作正常。请帮我 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T09:11:07.940

当您在模块中调用**$this->setComponents()**时，实际上您为模块设置了一个新组件，因此要访问模块的用户组件，您必须编写以下语句

**Yii::app()->getModule('bgadmin')->user->isAdmin()**或 **Yii::app()->getModule('bgadmin')->user->id**

对于您的管理模块中的注销，您已经以这种方式调用它

**Yii::app()->user->logout(false);** 如果您使用**$this->setComponents()**方法，这将正常工作。

如果'class' => 'EWebUser'，不调用你的类，然后尝试将路径更改为

**'class' => 'application.modules.bgadmin.components.EWebUser',**

这应该适用于您的 bgadmin 模块

# php - 条件放在图像上

> ID：13579900
> 
> 赞同：0
> 
> 时间：2012-11-27T08:16:01.003
> 
> 标签：php, html, image

我想对来自目录的图像设置一个条件，如果图像计数为 1，则显示此 div。但是在对其应用条件后，条件无法正常运行。请帮我解决这个问题：我的代码如下：

```
 <?php

    $id = 115; 
    $path_image = "pageimage/".$id."/";
            if(file_exists($path_image)){ 
            $dir =  dir($path_image);

    //List files in images directory
    while (($file =  $dir->read()) !== false){
   if($file>=1){  
    ?>
    <div id="middleimg" style="background:url(<?php echo $path_image.$file; ?>); background-repeat:no-repeat;">

      <div id="nav">
        <div id="navinner">
          <ul>
            <?php
                                    foreach($pageMenu as $pmenu){
                                    $url = generateURL($pmenu->custom_url, $pmenu->page_friendlyname, $pmenu->page_title, $pmenu->page_id);?>
            <li><a href="<?php echo $url; ?>"><?php echo $pmenu->page_name; ?> </a> </li>
            <?php } ?>
            <!--<li><a href="index.php">HOME</a></li>
            <li><a href="aboutus.php">ABOUT</a></li>
            <li><a href="menu.php">MENU</a></li>
            <li><a href="#">LOCATION</a></li>
            <li><a href="deliverly.php">DELIVERY</a></li>
            <li><a href="#">SPECIAL OFFER</a></li>
            <li><a href="#">CONTACT</a></li>-->
          </ul>
        </div>
      </div>
      <div id="banner-containerhome">
        <div id="promoBanner">
          <!--<div id="pizza">-->
          <div id="wowslider-container1">
        <div class="ws_images">
    <span><img src="data1/images/banner.jpg" alt="" title="" id="wows0"/></span>
    <span><img src="data1/images/banner.jpg" alt="" title="" id="wows0"/></span>
    </div>
    <div class="ws_bullets"><div>
    <a href="#wows0" title=""><img src="data1/tooltips/banner.jpg" alt=""/>1</a>
    <a href="#wows1" title=""><img src="data1/tooltips/chrysanthemum.jpg" alt=""/>2</a>
    </div></div>
        <div class="ws_shadow"></div>
        </div>
        <script type="text/javascript" src="engine1/script.js"></script>

         <!-- </div>-->

        </div>
          <div class="rightcontents">
          <?php 

     echo $page_content[1]->page_content;

          ?>
          </div>
      </div>
    </div>
    <?php }}} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:35:48.763

有几件事...

1.- read() 将目录作为迭代器读取，返回文件名，你试过`echo $file;`吗？

`if($file >= 1)`永远不会是真的，因为 $file 总是一个字符串，而不是一个整数，你在那里比较：`if("myfilename.ext" >= 1)`。

要计算文件总数，您应该在整个目录中执行一段时间并使用计数器，为每个文件增加它。

或者您可以使用`scandir("myPath")`函数，获取指定为数组的路径中的所有文件。例如：

```
$dir = scandir("myDir");
$total = count($dir); // this gives you the lenght of the array, therefore the files. 
```

计数时，请记住父目录和根目录也被视为“文件”，并且在某些方法中，thumbs.db(windows) 或 DS_store(osx) 是隐藏文件，用于存储有关您如何对文件夹进行排序的信息，文件夹图标和东西也会被计算在内，所以记得添加一个 If 语句来跳过它们。

# javascript - MySQL PHP的日期格式以小时和分钟转换

> ID：13579902
> 
> 赞同：0
> 
> 时间：2012-11-27T08:16:19.763
> 
> 标签：javascript, datetime

我有一个日期，我需要从中提取小时和分钟。日期以“2012-11-27 13:36:00”格式显示。所以我只需要 13:36。我做了这样的事情

```
var currTime = this.event_start;
alert(currTime);
var jsFormat = new Date(currTime);
alert(jsFormat); 
```

currtime 给出正确的日期，而 jsFormat 提醒未定义的日期。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:28:26.130

你总是可以用简单的方法做到这一点:)

```
<script>
var currTime = "2012-11-27 13:36:00";
var t1 = currTime.split(' ');
var t2 = t1[1].split(':');
var h = t2[0];
var m = t2[1];

alert(h+':'+m);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:25:18.643

在 PHP 中使用[ISO8601](http://www.w3.org/TR/NOTE-datetime)日期：

```
 $date = date("c"); 
```

JavaScript 逐字理解它们（在 Firebug 控制台中）：

```
 >>> a = "2012-11-27T13:36:00+0200";
 >>> d = new Date(a);
 Date {Tue Nov 27 2012 12:36:00 GMT+0100 (CET)} 
```

然后，您可以轻松获取所有部分：

```
 >>> d.getMinutes()
 36 
```

（注：我发现Android 2.2在默认浏览器的JavaScript中不支持ISO8601日期正确）

# web-services - 如何保护地理定位 Web 服务？

> ID：13579903
> 
> 赞同：1
> 
> 时间：2012-11-27T08:16:19.677
> 
> 标签：web-services, rest, cordova, sencha-touch-2

我目前正在使用 Sencha Touch 2 和 Phonegap 开发一个移动应用程序。这是一款您可以在某些地方“签到”并在每次成功时获得一些积分的游戏（如在 Foursquare 中）。

我想让一个聪明的人（例如，反编译我的 apk 的人）无法使用他的计算机或任何计算机执行 REST Web 服务（例如，mywebservice/checkin?access_token=abcde&latitude=12345&longitude=6789）应用程序之外的其他设备。

你知道我怎么能做到这一点吗？

非常感谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:24:54.807

绝对而言，您要查找的内容是不可能的 - 如果设备上的应用程序包含发送有效消息所需的密钥和代码，并且设备允许用户反编译应用程序，那么理论上任何人都可以对其进行逆向工程并发送任何内容他们想要的消息。

但实际上，这并不值得担心 - 没有人会为此付出太多努力，而且您可能可以相当容易地检测到具有可疑活动的帐户。只需使用 https 和来自应用程序代码的简单令牌来阻止任何可以看到网络活动但不会深入研究应用程序代码的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:32:43.667

几个选项（取决于您的具体情况）：

*   将用户信息和应用程序密钥烘焙到安全 API 密钥中。这将确保只有有效的帐户持有人才能使用 API。看看 OAuth
*   监控每个帐户或每个连接服务活动并查找任何可疑模式。例如，如果应用程序在用户思考时间内运行，那么您预计每秒的调用次数会很少。

# ios - 具有每个图像反射的 iCarousel

> ID：13579905
> 
> 赞同：0
> 
> 时间：2012-11-27T08:16:23.557
> 
> 标签：ios, icarousel

如何为从图像中反射的每个图像添加反射到卡片流？

或者

如何为具有各种宽高比的图像添加共同反射。

* * *

我可以理解反射是从可重用视图的背景图像中获取的，但我需要为每个项目进行一些设置。

我发现了一些其他类似的问题，但在那里我看不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:15:54.110

[该库的github](https://github.com/nicklockwood/iCarousel)上有一个示例，底部的常见问题解答中也提到了该示例。

> 问：我希望我的轮播项目有真实的反射，但示例中的反射只是绘制了。如何动态渲染反射？
> 
> A. iCarousel 没有内置反射支持，但您可以使用一些额外的库来执行此操作。查看*动态视图反射*和 *动态图像效果*示例。

# collections - 如何在 drools guvnor 中使用集合？

> ID：13579906
> 
> 赞同：1
> 
> 时间：2012-11-27T08:16:24.353
> 
> 标签：collections, drools, guvnor

我想知道如何在 LHS 中使用规则的集合（用于包含、成员），可以在包含大元素列表（可能是数万）的 Guvnor 中进行管理。以黑名单匹配为例，如何非常有效地维护 guvnor 中的大黑名单？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:50:53.323

模型是这样的：

```
declare MyItem
end 
```

和

```
declare MyList extends ArrayList 
end 
```

您需要使用该字段的公式。单击列表，然后单击新公式并编写

```
this contains myItem 
```

或者在使用 memberOf 时。现在再次对 MyItem 使用公式

```
this memberOf myList 
```

您可以将每个黑名单项插入工作内存中。这比使用 memberOf 或 contains 更有效。它还使使用 Guvnor 编写规则变得更加容易。如果列表包含字符串，您可以这样做：

```
declared ListItem 
  name:String 
end 
```

您可以使用 Drools 从列表中插入规则（您也可以在触发 Java 代码中的规则之前执行此操作）：

```
rule "Just to empty the list" 
 when 
   list:List() 
 then 
   for(String name:list) 
     insert(Item(name)); 
end 
```

现在您可以针对黑名单项目编写规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:53:48.497

首先，我建议您在开始优化应用程序设计之前对此进行测试。这可能是一个完全没有问题的！

但是，如果您有一个庞大的黑名单，那么将其插入工作内存可能是一个缓慢的步骤。事实插入将导致它通过 Rete 网络传播，并且取决于有多少规则取决于其内容，这可能是一个缓慢的过程。Rete 网络更新后，后续评估应该很快。

因此，根据您的规则/会话的运行方式，优化性能的一种技术可能是创建一个长时间运行的会话并在启动时插入黑名单。有了这个，您可以插入一个“请求”事实并查看触发了什么，然后撤回请求，以便工作内存为下一个请求做好准备。

不幸的是，这确实引发了其他一些问题。例如，根据您的规则，您可能需要同步对会话的访问，而不是共享它。这会导致响应速度很快，但也必须彼此等待完成，这可能是一个可扩展性问题。如果这是一个问题，您可以创建一个会话池来支持多个用户同时查询。

# database - WordPress URL 提交时更改

> ID：13579910
> 
> 赞同：0
> 
> 时间：2012-11-27T08:16:41.810
> 
> 标签：database, wordpress, url-rewriting, phpmyadmin

我目前有一个我正在开发的网站，我已经从另一个人那里接管了，我将他的 SQL 文件转储到我的数据库中，除了一件事之外，一切似乎都很好。每当我尝试登录后端或尝试去其他地方时，它都会在地址栏中添加一个额外的 .co.uk，如下所示：

从： www.domain.co.uk 到 www.domain.co.uk.co.uk

我已经在数据库中进行了挖掘，但我真的找不到任何东西，而且我以前从未遇到过这个问题，有人能帮我解释一下吗？也许只是让我知道我可以在数据库中查找问题的位置，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:18:24.947

查看根文件夹中的 .htaccess 文件，该文件是隐藏的，可能包含重写规则。

另外，我建议您使用此插件进行迁移：

[http://wordpress.org/extend/plugins/wp-migrate-db/](http://wordpress.org/extend/plugins/wp-migrate-db/)

每当我从本地主机移动到实时站点时，我都会使用它，反之亦然。它还将确保您的小部件得到保留，因为进行查找替换会导致 WordPress 使用的对象序列化语法中断。

迁移后，您需要访问设置 > 永久链接，以便可以根据新 URL 更新 .htaccess 文件以进行重写。

# memory-address - 如果一个 DRAM 实体有一个 12 位地址输入和 16 位数据输入/输出，每个地址是指一位还是一个 16 位字？

> ID：13579911
> 
> 赞同：2
> 
> 时间：2012-11-27T08:16:41.013
> 
> 标签：memory-address

我有一个图表，其中 DRAM 实体的地址总线为 12 位，数据输入/输出为 16 位。

- 这意味着它是一个“2^12 * 16”的内存？

- 这是我感到困惑的地方，我的教科书显示了 16 位 DRAM 的位级组织，其中 4 位地址的前 2 位表示行，最后 2 位表示列。

- 在那个教科书的例子中，每个地址都指一个位，所以在上面描述的图表中，如果我将 DRAM 位排列成一个方阵，它将有 2^6 行可寻址，2^6 列可寻址，对吗？

-现在，每个列地址是指 1 位，还是每个列地址是指 1、16 位字？

-例如，如果我将内存地址“000001000011”输入图表中的实体，数据所在的行将是“000001”行，而“000011”列将保存我的数据？而这一列是指 1 位还是 1、16 位字？

# python - Django中的分区MySQL表

> ID：13579913
> 
> 赞同：1
> 
> 时间：2012-11-27T08:16:50.747
> 
> 标签：python, mysql, django, django-models

是否可以在 Django 中创建分区的 MySQL 表？这方面的任何例子都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T02:34:15.257

我使用 django 的 sql hook 如下所示：

1.  使用 'python manager.py sql' 获取 django 生成的 SQL 语句
2.  复制需要修改的表的create和alter table SQL语句
3.  您的应用程序下的 mkdir 'sql'
4.  在 sql 文件夹中创建 .sql 文件
5.  添加 SQL 语句，如下所示

yourmodelname.sql 文件：

```
DROP TABLE <table name>;

CREATE TABLE `<table name>` (
      `id` integer AUTO_INCREMENT NOT NULL PRIMARY KEY,
      `testcase_id` integer NOT NULL,
      `databytes` integer NOT NULL,
      `direction` integer NOT NULL,
      `seconds` integer NOT NULL
) PARTITION BY LINEAR KEY (id) PARTITIONS 4;

COMMIT; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:29:46.823

您根本不需要涉及 Django。只需[在普通 mysql 中进行表分区](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)

# javascript - 调用 2 个函数 onClick 事件

> ID：13579914
> 
> 赞同：-1
> 
> 时间：2012-11-27T08:16:53.703
> 
> 标签：javascript

我有一个带有 PLUS + 按钮的文本字段来增加文本字段的值，同时我想要（0 - 100）的限制。我不希望任何一个增加值超过 100 或小于 0。

我尝试以下仅适用于添加功能的代码

```
<script type="text/javascript">
function add(){
document.getElementById("name").value++;
}
function limit(){
document.getElementById('name').value;
      if(this.value > 200){
           this.value = 200;
      }
      if(this.value < 10){
           this.value = 10;
      }
}
</script>

<form name="quiz" >
<input type='text' name='name' id='name'/>
<input type='button' name='plus' onclick="add();limit();" value='+'/>
</form> 
```

是否可以将值增加 5 即而不是 value++ 我们可以使用 value+5 吗（我尝试过但不工作）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:23:10.213

您可以简单地将代码更改为仅调用一个函数（组合`add()`and `limit()`），如下所示：

```
<script type="text/javascript">
    function add() {
        var name = document.getElementById("name"); // Get the input (store in local var).
        var value = parseInt(name.value) + 5; // Store the new value locally.

         if(value > 100){
              value = 100;
         }
         else if(value < 10){
              value = 10;
         }

         name.value = value; // Set the new value.
    }
</script> 
```

然后只需调用`add()`：

```
<input type='text' name='name' id='name' value="0"/>
<input type='button' name='plus' onclick="add();" value='+'/> 
```

此外，您可以使其更具动态性并发送要作为参数添加的值：

```
function add(numberToAdd) {
    var name = document.getElementById("name");
    var value = parseInt(name.value) + numberToAdd; // Use the parameter
    .... 
```

然后这样称呼它：

```
<input type='button' name='plus' onclick="add(5);" value='+'/> 
```

这样您就可以拥有更多具有不同值的按钮：

```
<input type='button' name='plus1' onclick="add(1);" value='+1'/> <!-- Will add +1 -->
<input type='button' name='plus2' onclick="add(2);" value='+2'/> <!-- Will add +2 -->
<input type='button' name='plus3' onclick="add(3);" value='+3'/> <!-- Will add +3 --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:23:17.437

```
 function add(){
x=document.getElementById("name").value;
x=Number(x);
x=x+5
document.getElementById("name").value=x;
}

    function limit(){
x=document.getElementById("name").value;
x=Number(x);
      if(x > 100){
           document.getElementById("name").value = 100;
      }
      if(x < 50){
           document.getElementById("name").value = 0;
      } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T08:23:58.950

如果您现在调用 add 函数，它会将您的值增加 5 仅当您的当前值低于 200 且超过 10 时才会这样做

```
function add() {
    var val = document.getElementById("name").value;
    if(val < 200 && val > 10) {
        document.getElementById("name").value += 5;
    }
} 
```

有了这个解决方案，就不需要第二个功能（例如限制）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T08:23:46.487

```
function add(howMuch){
  document.getElementById("name").value = document.getElementById("name").value+5;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T08:23:57.697

简单地做这个

```
function add(){
document.getElementById("name").value++;
limit();
} 
```

是的，您可以增加 5。只需这样做：

```
document.getElementById("name").value+=5; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-27T08:26:04.757

你的情况的简单解决方案是只使用一个函数来完成你想要的一切......希望它会帮助你:)

```
function add() {
   var limit = document.getElementById("name").value();
   if (limit < 200 || limit > 0) {
     document.getElementById("name").value++;
     //or use this
     //document.getElementById("name").value = limit + 5;
   }
   else
     //anything here.
} 
```

# php - Postgresql - 从 jQuery Mobile 中删除行

> ID：13579915
> 
> 赞同：0
> 
> 时间：2012-11-27T08:17:13.273
> 
> 标签：php, postgresql, jquery-mobile

我正在为我的客户当前网站制作一个 jQuery 移动应用程序版本。他们有一个 postgres 数据库来存储用户最喜欢的地址，并且他们希望用户也能够删除应用程序中保存的地址。

我研究了许多解决方案，但不确定最好的方法是什么，希望有人能给我一些反馈。

我最初想以某种方式将保存的名称从数据库中拉到下拉列表中，并将唯一 id 拉到列表中每个选项的 id 中，并在下面有一个删除按钮。但是我不能刷新页面，因为表单中的所有数据都会丢失。

我的下一个想法是尝试设置一个 CRUD 表，并仅显示保存的名称列和旁边的删除按钮。但是它们都设置为与 MySQL 一起使用，是否很难让它与 Postgres 数据库链接？

[这](http://lightswitchhelpwebsite.com/Blog/tabid/61/EntryId/126/A-Full-CRUD-LightSwitch-JQuery-Mobile-Application.aspx)几乎正​​是我所需要的，但我正在做的网站托管在 Linux 服务器上。

我基本上是在关于我应该如何看待这样做的一些反馈和想法之后，非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T13:40:32.893

首先，您需要在这里考虑几个问题：

I. 你将如何与你的网站沟通？

您可以使用 ajax 和 JSON/JSONP 与您的 Web 服务器进行通信。您需要在服务器端创建一个轻量级 Web 服务（JSON，而不是 SOAP 协议）。考虑您的移动应用程序的哪些功能，并考虑您需要传输/接收什么样的数据。

[JSONP](http://en.wikipedia.org/wiki/JSONP)在这里仅用于跨域通信。如果您要创建移动应用程序（android 和 iPhone），那么您可以使用其他一些协议，但这需要一些本机编码（如果您不喜欢/了解 JAVA 或 Objective C，请跳过这部分，JSON 就足够了） .

二、现在客户端的故事。您可以创建一个对象并将所有服务器端数据存储到其中，也可以使用 CRUD 表。CRUD 表是最快的选择（如果你做得正确也是最快的选择）。[jTable](http://www.jtable.org/GettingStarted)是一个优秀的 CRUD 框架。它不关心您的服务器端数据库类型。服务器端将查询所有需要的数据并以 JSON 格式发送。当您在客户端拥有所有数据时，将其加载到 jTable 框架中并随心所欲地使用它。完成客户端编辑后，仅发回增量数据（仅数据修改前后的差异）。这将降低您的数据大小。

三、如果您要同时删除多个地址信息，您对选择框和删除按钮的想法非常棒。无需刷新页面，因为 jQuery 和 jTable 无需刷新即可完成。当您从选择框中删除/添加元素时，只需执行以下操作：

```
$('#selectBox').create('refresh'); 
```

它将刷新您的选择框并对其应用新的 CSS 格式。如果你想删除它一买一最好使用列表视图，它会看起来好多了。

四。还有一件事，您需要考虑 jQM 列表和选择框（下拉框）不是为处理大量数据而构建的。可以容纳很多，但在大型数据集上创建（'刷新'）会冻结你的应用程序。所以考虑分页。

# c# - 如何合并 2 个简单的正则表达式？

> ID：13579917
> 
> 赞同：0
> 
> 时间：2012-11-27T08:17:24.483
> 
> 标签：c#, .net, regex

我有以下 C# 代码用空格替换`.`'s 和's：`+`

```
string MyString = "this.is.just+an++example--here!are$more characters";
MessageBox.Show(Regex.Replace(MyString, @"[\.\+]", " ")); 
```

有时这可能会导致多余的空格（如 in、between`an`和`example`）。

我怎样才能将以下 RegEx 添加到我现有的 RegEx 中，所以只有一个 RegEx 调用？

```
Regex.Replace(MyString, @"[ ]{2,}", " "); 
```

这将删除多余的空格。所有其他字符应保持不变。

也欢迎任何替代解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:38:40.230

你应该试试这个。`.`如果它在字符类中，则无需转义

```
[.\+]+|[ ]{2,} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:24:14.877

也许您应该首先匹配多个字符。将正则表达式更改为`"[\.\+]+"`以匹配一个或多个`.`or`+`符号。例如，`"a...++b"`会导致`"a b"`

```
MessageBox.Show(Regex.Replace(MyString, @"[\.\+]+", " ")); 
```

# java - 从 Android 中的 SQLite 检索数据计数

> ID：13579925
> 
> 赞同：1
> 
> 时间：2012-11-27T08:17:52.813
> 
> 标签：java, android, mysql, sqlite

在尝试提出计算级别“2”中字母“B”数量的命令时，我遇到了一些麻烦。

```
_id|letter|level
0   A      1
1   A      1
2   B      1
3   A      2
4   B      2
5   A      2
6   B      2
7   B      2
8   B      2
9   B      2 
```

这是迄今为止我在 DBAdapter 中的“代码”。

```
public long getNumberCorrect() {
        int i = 0;
        String query = "SELECT **NUMBER OF LETTER B** FROM table WHERE level = 2";
        Cursor  cursor = mDb.rawQuery(query,null);
        if (cursor.moveToFirst()) {
                 while (cursor.isAfterLast() != true) {

                  }
        }
        return i;

    } 
```

理想情况下，上面的代码将返回 5，但我不知道用什么替换“ **NUMBER OF LETTER B** ”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:21:28.667

你试过使用`count(*)`吗？

```
Something like:
String query = "SELECT count(*) FROM table WHERE level = 2 and letter='B'";
Cursor  cursor = mDb.rawQuery(query,null);
if (cursor.getCount() >0 && cursor.moveToFirst()) {
   i = cursor.getInt(1);
}
return i; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:23:45.933

你可以这样做 ：

```
String sqlite = "SELECT count(_id) AS _lCount FROM table WHERE level = 2 and letter='B'";
Cursor  cursor = mDb.rawQuery(query,null);
if(cursor != null){
  if(cursor.getCount() > 0){
    cursor.moveToFirst();
    int count = cursor.getInt(cursor.getColumnIndex("_lCount"));

  }
} 
```

这应该可以解决问题。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:20:05.107

尝试这个 ：：

```
SELECT count(*) FROM table WHERE level = 2 and letter='B' 
```

或者你可以

```
SELECT count(id) FROM table WHERE level = 2 and letter='B' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T08:20:12.003

这是一个很好的要求：

```
select count(*) from table where level=2 AND letter like 'B' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T08:20:22.257

编写以下查询

```
String query = "SELECT COUNT(*) FROM table WHERE level = 2 AND letter='B'"; 
```

# asp.net - 延长会话到期时间

> ID：13579927
> 
> 赞同：0
> 
> 时间：2012-11-27T08:17:56.707
> 
> 标签：asp.net, session, iis-7, session-state

我正在运行一个讨论网站。即将出现的问题是，在某个时间后会话会自动过期。我在共享服务器上托管我的网站，并且无法访问 IIS 中延长到期时间的设置。那么有什么方法可以使用 web.config 做到这一点吗？

而且我在服务器上启用了基本身份验证并在我的网站中使用默认身份验证，这意味着我没有在配置文件中提供任何身份验证模式。那么它们是一样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:23:13.507

您可以使用 web.config 管理会话超时

会话状态超时属性以分钟为单位。

在 webconfig 文件中...

```
 <system.web>
<sessionState timeout="1440"></sessionState>
</system.web> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:21:16.233

是的，这是可能的：

```
<configuration>
    <system.web>
        <sessionState timeout="x" />
    <system.web>
</configuration> 
```

其中 x 是以分钟为单位的所需会话超时。

# linux - 如何使用 sed\awk 从文件中删除行？

> ID：13579929
> 
> 赞同：7
> 
> 时间：2012-11-27T08:18:09.300
> 
> 标签：linux, bash, sed, awk, freebsd

我有文件，带有行，包含带有网络掩码 abcd/24 wxyz/32 等的 IP 如何删除删除特定行？我在用着

```
sed -ie "s#a.b.c.d/24##g" %filname% 
```

但删除后是文件中的空字符串。

它应该在脚本中运行，以 ip 作为参数，并且也可以在 sh 下的 freebsd 中运行。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-27T08:22:46.000

### sed解决方案

```
 sed -i '/<pattern-to-match-with-proper-escape>/d' data.txt 
```

`-i`选项将更改原始文件。

### awk 解决方案

```
awk '!/<pattern-to-match-with-proper-escape>/' data.txt 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-27T08:30:31.147

使用 sed：

```
sed -i '\|a.b.c.d/24|d' file 
```

**命令行参数：** 对于作为命令行参数的输入，例如第一个参数（$1）：

```
sed -i "\|$1|d" file 
```

根据您的情况，将 $1 替换为适当的参数编号。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T08:27:13.177

您应该使用 d（删除）而不是 g。也不要使用 s（替换）。

```
sed -ie '/a.b.c.d\/24/d' %filename% 
```

在脚本中，您应该以这种方式使用它

```
IP=$1
IPA=${IP////\\/}
sed -i /"${IPA}"/d %filename% 
```

并且脚本参数应该这样调用：

```
./script.sh a.b.c.d/24 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T11:05:23.683

```
perl -i -lne 'print unless(/a.b.c.d\/24/)' your_file 
```

或者如果您不想进行就地编辑，则在 awk 中：

```
 awk '$0!~/a.b.c.d\/24/' your_file 
```

# java - 使用手绘图撤消和移动功能

> ID：13579930
> 
> 赞同：0
> 
> 时间：2012-11-27T08:18:11.750
> 
> 标签：java, swing, animation, graphics, paintcomponent

我目前正在尝试编写一个 Java 应用程序，该应用程序允许徒手绘图，然后可以移动和删除每个绘制的曲线。

我猜我最好的选择是让每次单击并拖动创建一个单独的实体，但我不知道如何实现这一点。到目前为止，我只有一个小的 JFrame，它将在 Oracle 教程的帮助下显示一个“画笔”，但甚至没有这个画笔绘制的线条。

```
class MyPanel extends JPanel {

    private int ovalX = 50;
    private int ovalY = 50;

    public MyPanel() {
        setBorder(BorderFactory.createLineBorder(Color.black));

        addMouseListener(new MouseAdapter() {
            public void mousePressed(MouseEvent e) {
                moveSquare(e.getX(),e.getY());
            }
        });

        addMouseMotionListener(new MouseAdapter() {
            public void mouseDragged(MouseEvent e) {
                moveSquare(e.getX(),e.getY());
            }
        });
    }

    private void moveSquare(int x, int y) {
        int OFFSET = 1;
        if ((ovalX!=x) || (ovalY!=y)) {
            ovalX=x;
            ovalY=y;
            repaint();
        } 
    }

    public Dimension getPreferredSize() {
        return new Dimension(250,200);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);       

        g.setColor(Color.BLACK);
        g.fillOval((ovalX - 5),(ovalY - 5),10,10);
    }  
} 
```

我不确定我该如何继续。我应该先阅读一些通用教程吗？如果是这样，在什么主题上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:32:24.507

关于不同主题的内容很少有帮助。一些核心/基本的将包括

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

我建议你需要欣赏

我将抛出[使用 JFC/Swing 创建 GUI](http://docs.oracle.com/javase/tutorial/uiswing/)，因为它讨论了诸如键绑定和鼠标侦听器之类的事情。

我也会熟悉使用[图像](http://docs.oracle.com/javase/tutorial/2d/images/index.html)，因为毫无疑问你也会想要保存和加载图像

# c# - c++ dll结构到c#

> ID：13579932
> 
> 赞同：0
> 
> 时间：2012-11-27T08:18:17.863
> 
> 标签：c#, c++, dll, struct

> **可能重复：**
> [将 C++ 结构数组编组为 C#](https://stackoverflow.com/questions/188299/marshal-c-struct-array-into-c-sharp)

我有一个 C++ .dll，我必须将它与 C# 一起使用，但存在一些问题。首先，这是其中之一。

在这里，为了使用 C++ .dll 文件，我必须将 C++ 结构下面的内容重新更改为 C# 结构。请帮帮我。

***C++结构***：

```
typedef struct USMC_Devices_st{
      DWORD NOD;             // Number of the devices ready to work

      char **Serial;        // Array of 16 byte ASCII strings
      char **Version;       // Array of 4 byte ASCII strings
} USMC_Devices; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:40:11.477

struct USMC_DEVICES_st 将转换为类似于：

```
using System.Runtime.InteropServices;

[StructLayout(LayoutKind.Sequential)]
    struct USMC_DEVICES_st
    {
        public UInt32 NOD;

        public IntPtr serial;

        public IntPtr Version;
    } 
```

可以使用以下代码访问序列号和版本：

```
IntPtr ser;

for (var i = 0;
     (ser = Marshal.ReadIntPtr(um.serial, i)) != IntPtr.Zero;
     i += Marshal.SizeOf(ser))
{
    var serial = Marshal.PtrToStringAnsi(ser);
} 
```

**编辑**- 在您的评论之后是访问结构成员的更详细示例：

```
static void PrintDevices(USMC_DEVICES_st um)
        {
            const int serialSize = 16;
            const int verSize = 4;
            int j = 0;
            for (var i= 0; i < um.NOD; i++, j+= IntPtr.Size)
            {
                var ser = Marshal.ReadIntPtr(um.serial, j);
                var ver = Marshal.ReadIntPtr(um.Version, j);
                // ensure we check for null pointers - just in case
                if (ver == IntPtr.Zero || ser == IntPtr.Zero) break;

                Console.WriteLine("Device {0}, \tSerial number {1}",
                                    Marshal.PtrToStringAnsi(ser, serialSize),
                                    Marshal.PtrToStringAnsi(ver, verSize));
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:37:18.800

首先，如果您有 C++ dll，那么您可以将这些 dll 用于 C# 项目。遵循以下方法

1.  打开 Visual Studio 命令提示符（以管理员身份运行）
2.  更改 dll 所在的路径（cd C:/User/Douments/Visual Studio 2010/）
3.  输入命令

**tlbimp .dll /transform:dispret /out:**

你会得到如下结果。

Microsoft (R) .NET Framework 类型库到程序集转换器 4.0.30319.1 版权所有 (C) Microsoft Corporation。版权所有。

TlbImp : 导入到 C:\Users\082043\Desktop\Interop.CACDirect.dll 的类型库

C:\用户\082043\桌面>

# scala - 为什么String与Scala中的Int，Boolean，Byte ...不同？

> ID：13579934
> 
> 赞同：6
> 
> 时间：2012-11-27T08:18:20.803
> 
> 标签：scala

因为我对 Java 有一点了解，所以我试图在每个 Scala 代码中使用一些 Java 类型，比如`java.lang.Integer`, `java.lang.Character`, `java.lang.Boolean`... 等等。现在人们告诉我“不！Scala 中的所有东西都有自己的类型，Java 的东西可以工作——但你应该总是更喜欢 Scala 类型和对象”。

好的，现在我明白了，Scala 中的所有内容都在 Java 中。不知道为什么最好使用例如 Scala Boolean 而不是 Java Boolean，但很好。如果我查看我看到的类型`scala.Boolean`， ... `scala.Int`，`scala.Byte`然后我查看 String，但它不是`scala.String`，（它甚至不会`java.lang.String` *混淆*）它只是一个 String。但我认为我应该使用直接来自 scala 的所有内容。也许我不正确理解scala，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-27T11:03:47.293

首先，“好吧，它甚至不是 java.lang.String”的说法并不完全正确。普通`String`名称来自`Predef`对象中定义的类型别名：

```
type String = java.lang.String 
```

和 insides`Predef`在每个 Scala 源中都导入，因此您使用`String`而不是 full `java.lang.String`，但实际上它们是相同的。

`java.lang.String`是JVM以特殊方式对待的非常特殊的类。正如@pagoda_5b 所说，它被声明为`final`，无法扩展它（这实际上很好），因此Scala 库提供了一个包装器 ( `RichString`)，其中包含额外的操作和`String -> RichString`默认情况下可用的隐式转换。

`Integer`但是，`Character`,等的情况略有不同`Boolean`。你看，即使`String`被 JVM 特殊处理，它仍然是一个普通类，其实例是普通对象。从语义上讲，它与类没有什么不同`List`。
原始类型还有另一种情况。Java `int`, `char`,`boolean`类型不是类，这些类型的值也不是对象。但是 Scala 是完全面向对象的语言，没有原始类型。可以`java.lang.{Integer,Boolean,...}`在需要相应类型的任何地方使用，但是由于装箱，这将非常低效。
因此，Scala 需要一种方法来在面向对象的设置中呈现 Java 原始类型，因此`scala.{Int,Boolean,...}`类被介绍了。这些类型通过 Scala 编译器进行特殊处理 - scalac 在遇到这些类之一时生成使用原语的代码。它们还扩展了`AnyVal`类，这会阻止您将`null`其用作这些类型的值。这种方法解决了效率问题，`java.lang.{Integer,Boolean,...}`在您真正需要装箱的地方留下了可用的类，并且还提供了优雅的方式来使用另一个主机系统的原语（例如 .NET 运行时）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T09:27:28.820

我只是在这里猜测

如果您查看文档，您可以看到原语的 scala 版本为您提供了适用于数字类型或布尔类型的所有预期运算符，以及合理的转换，而无需像`java.lang`包装器那样使用装箱拆箱。

我认为做出这个选择是为了统一和自然地访问原始类型的预期，同时使它们`Objects`与任何其他 scala 类型一样。

我想这`java.lang.String`需要一种不同的方法，`Object`已经是一种方法，并且`final`在其实施中。因此，“痛苦最小的路径”是围绕它创建一个隐式 Rich 包装器，以获取对 String 的缺失操作，同时保持其余部分不变。

换个角度看，`java.lang.String`已经足够好了，是不可变的，还有什么。

值得一提的是，scala 中的其他“原始”类型都有自己的 Rich 包装器，可提供额外的合理操作。

# gwt - GWT-CheckBox：圆角边缘

> ID：13579937
> 
> 赞同：2
> 
> 时间：2012-11-27T08:18:27.177
> 
> 标签：gwt, smartgwt, gwt2

如何使用 css 将弯角添加到 gwt 复选框？

```
.gwt-CheckBox {
    border-radius: 5px 5px 5px 5px;
} 
```

这不起作用！！！！

我也试过这个。但没有变化。

```
.gwt-CheckBox > input {
    border-radius: 5px 5px 5px 5px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:25:51.250

拼写检查 -`border-redius must be border-radius` 通过 CSS 的复选框的弧形角仅适用于 firefox/chrome 而不是 IE8 浏览器。

你在哪个浏览器上测试？除了 IE 之外，其他人可以根据您的浏览器尝试 -moz-border-radius 或 -webkit-border-radius 等。

参考链接获取 IE 信息[- 支持 IE 中的“border-radius”](https://stackoverflow.com/questions/635851/support-for-border-radius-in-ie)

# c++ - Qt 多页 TIFF

> ID：13579938
> 
> 赞同：6
> 
> 时间：2012-11-27T08:18:30.220
> 
> 标签：c++, qt, tiff, libtiff

我需要从我的程序中保存一个多页 TIFF，但似乎[Qt 不支持多页 TIFF](http://comments.gmane.org/gmane.comp.lib.qt.general/23954)。不过，我需要这样做。从我的程序中执行此操作的最佳方法是什么？

到目前为止，我正在考虑使用 ImageMagick 的命令行实用程序从我创建的许多 JPEG 文件创建多页 TIFF，或者将 libtiff 添加到我的项目并尝试使用它，或者使用 GDI+（至少在 Windows 上）生成 TIFF .

我可能错过的任何其他想法？

如果可能的话，我想避免使用外部 EXE 或 DLL，也就是说，如果我可以将一个库直接添加到我的项目的源代码中，那将是最好的。

另外，如果您知道已经完成的项目，请发布指向它的链接，我宁愿不重新发明轮子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-25T18:11:10.323

只是想添加我关于类似主题的信息。我最终只是从最新的（4.0.3）源构建 libTiff。我的项目都在 x64 中，但这很容易：

1.  下载并解压 libTIFF 源
2.  为 x64（或 x32）cmd 打开 VS2010（或其他）
3.  cd 到步骤 1 中解压缩的文件夹
4.  类型：nmake /f makefile.vc
5.  从 /libtiff 文件夹中获取文件并添加到您的项目中

下面是一个读取 16 位 TIFF 数据的示例：

```
 TIFF *MultiPageTiff = TIFFOpen("C:\\MultiPageTiff.tif", "r");

std::vector<unsigned short*> SimulatedQueue;

//Read First TIFF to setup the Buffers and init
//everything
int Width, Height;
//Bit depth, in bits
unsigned short depth;

TIFFGetField(MultiPageTiff, TIFFTAG_IMAGEWIDTH, &Width);
TIFFGetField(MultiPageTiff, TIFFTAG_IMAGELENGTH, &Height);
TIFFGetField(MultiPageTiff, TIFFTAG_BITSPERSAMPLE, &depth); 

//This should be Width*(depth / sizeof(char))
tsize_t ScanlineSizeBytes = TIFFScanlineSize(MultiPageTiff);

if(MultiPageTiff){
    int dircount = 0;
    do{
        dircount++;

        //I'm going to be QQueue'ing these up, so a buffer needs to be
        //allocated per new TIFF page
        unsigned short *Buffer = new unsigned short[Width*Height];

        //Copy all the scan lines
        for(int Row = 0; Row < Height; Row++){
            TIFFReadScanline(MultiPageTiff, &Buffer[Row*Width], Row, 0);
        }

        SimulatedQueue.push_back(Buffer);

    }while(TIFFReadDirectory(MultiPageTiff));

    TIFFClose(MultiPageTiff);
} 
```

资料来源：从 VS 构建 libTIFF - [http://www.remotesensing.org/libtiff/build.html#PC](http://www.remotesensing.org/libtiff/build.html#PC)

多页 TIFF 示例 - [http://www.remotesensing.org/libtiff/libtiff.html](http://www.remotesensing.org/libtiff/libtiff.html)

杂项。Tiff 手册 - h​​ttp: [//www.remotesensing.org/libtiff/man/](http://www.remotesensing.org/libtiff/man/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T08:51:35.990

Qt 使用[libtiff](http://libtiff.org/)来读写 TIFF。所以我会使用同一个库，只是不那么头疼。其次：查看[http://qt.gitorious.org/qt/qt/blobs/4.8/src/gui/image/qtiffhandler.cpp](http://qt.gitorious.org/qt/qt/blobs/4.8/src/gui/image/qtiffhandler.cpp)以了解 Qt 如何编写 QImage。要支持多个页面，我认为您需要使用`TIFFSetField()`（请参阅[此处](http://www.libtiff.org/man/TIFFSetField.3t.html)，TIFFTAG_PAGENAME 和 TIFFTAG_PAGENUMBER）。我将开始扩展[write() 函数](http://qt.gitorious.org/qt/qt/blobs/4.8/src/gui/image/qtiffhandler.cpp#line404)或编写类似的内容，您可以在其中：

*   TIFFClientOpen();
*   遍历 QImages 列表
    *   设置每个 QImage 的页面
    *   做 QTiffHandler::write() 做的事情
*   TIFF关闭（）；

另见：[http ://code.google.com/p/multiphoton/source/browse/MatroxImagingLibrary.cpp?#1628](http://code.google.com/p/multiphoton/source/browse/MatroxImagingLibrary.cpp?#1628)

# google-maps-api-3 - 谷歌地图覆盖的鼠标光标

> ID：13579940
> 
> 赞同：5
> 
> 时间：2012-11-27T08:18:43.830
> 
> 标签：google-maps-api-3

我正在创建一个基于 google maps api v3 的游戏，玩家必须通过点击地图上的正确区域来猜测某些区域。但是当我创建一个不可见的覆盖时，鼠标光标仍然从张开的手变为指向手，但它不应该改变。是否有可能为覆盖设置鼠标光标？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T11:27:24.933

这对我有用

```
...
var imageBounds = new google.maps.LatLngBounds(
    new google.maps.LatLng(35,25),
    new google.maps.LatLng(42,45)
);
var overlayOpts = {
    clickable: false
}
historicalOverlay2 = new google.maps.GroundOverlay(
    'image.png',
    imageBounds,
    overlayOpts
);
... 
```

# heroku - Heroku 工具带问题

> ID：13579941
> 
> 赞同：0
> 
> 时间：2012-11-27T08:18:53.607
> 
> 标签：heroku, download, installation, fault

刚刚下载了工具带（OS x 10.7）并安装它以供“这台计算机的所有用户”使用，我一直试图找到/打开它，但在我的计算机上的任何地方都没有它的迹象......随机的，但是，请指教。谢谢，帕特里克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T20:33:41.317

它应该在`/usr/local/heroku`. 确保`/usr/local/heroku/bin`在您的`$PATH`.

# google-maps - 如何创建一些位置的矢量图

> ID：13579943
> 
> 赞同：1
> 
> 时间：2012-11-27T08:18:58.617
> 
> 标签：google-maps, maps, vector-graphics

我想在矢量图中标记一些位置。并且想将地图保存为具有单独图层的 pdf 格式。我尝试了 arcgis，但地图在线无法将其导出到文件。我能知道使用 vecotr 地图表示数据的常用和标准方法是什么吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-07T07:34:49.160

先试试这个矢量地图，他们有免费版本，它可能很有用：[ [http://vectormap.info/free-maps-for-all-designers-and-mappers][1]](http://vectormap.info/free-maps-for-all-designers-and-mappers][1])这对你来说也可能更容易

# php - 使用 jquery load 加载 php 表单后提交按钮不起作用

> ID：13579944
> 
> 赞同：0
> 
> 时间：2012-11-27T08:19:03.377
> 
> 标签：php, jquery, html

我有这个网站正在建设中。 [http://www.orangewebscape.com/](http://www.orangewebscape.com/)

问题出在包页面中。当您单击包菜单项时，jquery 加载会加载一个名为 wrap2.php 的 php 文件。wrap2 页面有一个很大的表单，其中包含许多复选框、3 个文本框和一个提交按钮。提交按钮在 chrome 中运行良好，但在所有其他可用浏览器（IE9、opera、mozilla）中都无法运行。虽然它适用于 IE8。甚至 css 样式也不适用于表单和提交按钮。

**jQuery 加载**

```
 $('#tabs li').click(function(){
     $("#loading").show();

     $('#container').load('views/'+$(this).attr("class")+'.php', function(){  

setTimeout( "jQuery('#dloading').hide();",2000 );
     });
        return false;
    }); 
```

**wrap2.php**

```
<div id="wrap2" >

&nbsp&nbsp&nbsp&nbsp

<h1>&nbsp&nbsp&nbsp&nbsp<span id="packtop">Build Your Order</span></h1><br><br>
<div id="buildtext"> We have choices and options for everybody. Please pick as many you like and   submit a query. We assure you of an instant reply.</div>
<div class="servcont">
<form name="packages" action="core/orderplace.php" method="POST"       onsubmit="xmlhttpPost3('core/orderplace.php', 'packages', 'MyResult4', '<img src=\'pleasewait.gif\'>'); return false;">
<br>
<div class="plancont">
<div id="plantit">Biz Launch Pack</div> 

<div id="planbody">
<ul>
<li><img src="styles/images/2.jpg" width="10" height="10" /> Web Presence Pack <span id="price">INR 6717*</span></li>

<hr>
<li>Responsive Website Dev<span id="price"> 2499</span></li>
<li>Web Hosting <span id="price"> 2499</span></li>
<li>Email id's (pro+) <span id="price"> 1320</span></li>
<li>Domain name <span id="price"> 398</span></li>
<li>Customised Blog <span id="price"> Free</span></li>
</ul>
<ul>
<br>
<li><img src="styles/images/2.jpg" width="10" height="10" /> Print & Design Pack <span id="price">INR 1196*</span></li>

<hr>
<li>Logo Design<span id="price"> 298</span></li>
<li>Business card <span id="price"> 198</span></li>
<li>Brochure design<span id="price"> 498</span></li>
<li>Tshirt Design<span id="price"> 198</span></li>

</ul><br>
<ul>
<li><img src="styles/images/2.jpg" width="10" height="10" /> Stationary design Pack <span id="price">INR 896*</span></li>

<hr>
<li>Letter Head<span id="price"> 198</span></li>
<li>Envelope Deisgn<span id="price"> 198</span></li>
<li>Folder design<span id="price"> 298</span></li>
<li>CD Cover design<span id="price"> 198</span></li>

</ul>
<div id="totprice">Total = INR <span id="str">8800</span>*</div>
</div>

<div id="finalpricefoot">Offer Price - <b>INR 7800</b>* </div>
<div id="cartbt"><br><br><br> <input type="checkbox" name="pack[]" value="Business Pack" /> Select This Package</div>
</div>

<div class="plancont"> 
<div id="plantit">Bands ,Events  & Gigs</div> 

<div id="planbody">
<ul>
<li><img src="styles/images/2.jpg" width="10" height="10" /> Web Presence Pack <span id="price">INR 5397*</span></li>

<hr>
<li>Responsive Website Dev<span id="price"> 2499</span></li>
<li>Web Hosting <span id="price"> 2499</span></li>
<li>Domain name <span id="price"> 398</span></li>
<li>Customised Blog <span id="price"> Free</span></li>
<br>
</ul>
<ul>
<br>
<li><img src="styles/images/2.jpg" width="10" height="10" /> Print & Design Pack <span id="price">INR 1393*</span></li>

<hr>
<li>Logo Design<span id="price"> 298</span></li>
<li>Flyer Design <span id="price"> 199</span></li>
<li>Poster design<span id="price"> 499</span></li>
<li>Banner Design<span id="price"> 199</span></li>
<li>Tshirt Design<span id="price"> 198</span></li>

</ul><br>
<ul>
<li><img src="styles/images/2.jpg" width="10" height="10" /> Creative Pack <span id="price">99*</span></li>

<hr>
<li>Mascot Design<span id="price"> Variable</span></li>

<li>FB timeline cover<span id="price"> 99</span></li>

</ul><br>

<div id="totprice">Total = INR <span id="str">6889</span>*</div>
</div>

<div id="finalpricefoot">Offer Price - <b>INR 5889</b>* </div>
<div id="cartbt"><br><br><br><input type="checkbox" name="pack[]" value="Band,Events,Gigs,Package" /> Select This Package</div>
</div>
<div class="plancont"><div id="plantit">Individuals / Professionals</div> 

<div id="planbody">
<ul>
<li><img src="styles/images/2.jpg" width="10" height="10" /> Web Presence Pack <span id="price">INR 5397*</span></li>

<hr>
<li>Responsive Website Dev<span id="price"> 2499</span></li>
<li>Web Hosting <span id="price"> 2499</span></li>
<li>Domain name <span id="price"> 399</span></li>
<li>Customised Blog <span id="price"> Free</span></li>
<br>
</ul>
<ul>
<br>
<li><img src="styles/images/2.jpg" width="10" height="10" /> Print & Design Pack <span id="price">INR 497*</span></li>

<hr>
<li>Logo Design<span id="price"> 298</span></li>
<li>Business card <span id="price"> 199</span></li>
<li>Book Cover Design<span id="price"> Variable</span></li>
<br>
</ul><br>
<ul>
<li><img src="styles/images/2.jpg" width="10" height="10" /> Stationary design Pack <span id="price">INR 896*</span></li>

<hr>
<li>Letter Head<span id="price"> 198</span></li>
<li>Envelope Deisgn<span id="price"> 198</span></li>
<li>Folder design<span id="price"> 298</span></li>
<li>CD Cover design<span id="price"> 198</span></li>

</ul>
<div id="totprice">Total = INR <span id="str">6790</span>*</div>
</div>

<div id="finalpricefoot">Offer Price - <b>INR 5790</b>* </div>
<div id="cartbt"><br><br><br><input type="checkbox" name="pack[]" value="Individual & Professionals"> Select This Package</div>

</div>

<br><br><br><br>

</div><br><br>
<h1><br><br>&nbsp&nbsp&nbsp&nbspIndividual Picks</h1><br>
<div id="itemcont">

<div id="indiitem">
<div id="inditext"> Web Presence Pack</div>
<div id="indibody">Website + Email+ Hosting + Domain+Blog <br><br>   
<div id="indiprice"><input type="checkbox" name="pack[]" value="Webpack subscription">INR 6717*</div>

</div>
</div>
<div id="indiitem">
<div id="inditext"> Website Development</div>
<div id="indibody">Responsive Website + CSS3 + amazing stuff<br><br>   
<div id="indiprice"><input type="checkbox" name="pack[]" value="Website development">INR 2499*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext"> Business Card Design</div>
<div id="indibody">High Quality & Innovative cards. 1 or 2 Sided<br><br>   
<div id="indiprice"><input type="checkbox" name="pack[]" value="business card Designing">INR 198*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext">Logo Designing</div>
<div id="indibody">Highly creative logo designing<br><br><br>      
<div id="indiprice"><input type="checkbox" name="pack[]" value="Logo Designing">INR 298*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext"> Brochure Designing</div>
<div id="indibody">Various Types of Brochures. 2,3 <br>& 4 fold.<br><br>   
<div id="indiprice"><input type="checkbox" name="pack[]" value="Brochure Designing">INR 498*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext">T-shirt Designing</div>
<div id="indibody">Simplistic or innovative designs<br><br>   <br>   
<div id="indiprice"><input type="checkbox" name="pack[]" value="T-shirt Designing">INR 198*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext">Flyer Designing</div>
<div id="indibody">Flyers for parties, events, gigs & shows. HQ<br><br>   
<div id="indiprice"><input type="checkbox" name="pack[]" value="Flyer Designing">INR 199*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext">Poster Designing</div>
<div id="indibody">Poster for anything.<br><br>   <br>   
<div id="indiprice"><input type="checkbox" name="pack[]" value="Poster Designing">INR 499*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext"> Banner Designing</div>
<div id="indibody">Simplistic or High Quality Banner designing.<br><br>   
<div id="indiprice"><input type="checkbox" name="pack[]" value="Banner Designing">INR 399*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext">Letter Head</div>
<div id="indibody">Part of Corporate Branding<br><br>   <br> 
<div id="indiprice"><input type="checkbox" name="pack[]" value="letter Head Designing">INR 199*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext">Envelope Design</div>
<div id="indibody">Creative and Awe-inspiring designs<br><br>   <br> 
<div id="indiprice"><input type="checkbox" name="pack[]" value="Envelope Designing">INR 199*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext">Folder Design</div>
<div id="indibody">Simple and eye catching deisgns for folders.<br><br>   
<div id="indiprice"><input type="checkbox" name="pack[]" value="Folder Design">INR 299*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext">CD Cover Design</div>
<div id="indibody">CD covers.<br><br>   <br> 
<div id="indiprice"><input type="checkbox" name="pack[]" value="CDcover Designing">INR 199*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext">App Icon & Buttons Design</div>
<div id="indibody">Icons & Buttons for websites & Apps<br><br>   
<div id="indiprice"><input type="checkbox" name="pack[]" value="Application Icon Designing">INR 199*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext">Books Cover Design</div>
<div id="indibody">Book covers.<br><br>   <br> 
<div id="indiprice"><input type="checkbox" name="pack[]" value="Book Cover Designing">INR 499*</div>
</div>
</div>
<div id="indiitem">
<div id="inditext">Mascot Designing</div>
<div id="indibody">Highly Creative Thinking<br><br><br> 
<div id="indiprice"><input type="checkbox" name="pack[]" value="Mascot Designing">Variable</div>
</div>
</div>
</div>

<div id="formel">Name *</div>
<div id="formel"><input type="text" name="fname" id="fname" size="20" ></div>
<div id="formel">Email * </div>
<div id="formel"><input type="text" name="fmail" id="fmail" size="20" ></div><br><br>
<div id="formel">Phone No </div>
<div id="formel"><input type="text" name="phone2" id="phone2" size="20" ></div>
<div id="formel">Country *</div>
<div id="formel"><input type="text" name="country" id="country" size="20" ></div>

<input type="submit" id="formsent" value="Order" name="forpackages" />
<div id="MyResult4" ></div>

</form>
<br>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:46:58.747

~~看起来 HTML 标记是不平衡的。**在个人选择**`</div>`部分之前似乎有一个额外的部分。不同的浏览器会尝试从不同的错误中恢复。在这种情况下，额外的结束标记可能会导致在**Name ***之前的行上结束，即在解析按钮之前，因此按钮未连接到任何表单。**`<form>``</div>`**~~

# ruby-on-rails - 修改 CarrierWave 图片上传器的数据结构

> ID：13579949
> 
> 赞同：0
> 
> 时间：2012-11-27T08:19:13.737
> 
> 标签：ruby-on-rails, json, gem, carrierwave

我正在使用 ruby​​ gem CarrierWave 来处理我的 rails 应用程序上的图像，这是一个移动后端 API。有没有办法将图像 url 和 thumb url 直接存储在父对象上？

这是默认行为，显示在 post 对象的 json 中。注意嵌套的 JSON：

```
{
created_at: "2012-11-17T18:24:04Z",
description: "this is the content",
id: 6,
user_id: 1,
picture: {
url: "/uploads/entry/picture/6/wtf_llama.jpeg",
  thumb: {
    url: "/uploads/entry/picture/6/thumb_wtf_llama.jpeg"
    }
  },
updated_at: "2012-11-26T08:16:43Z"
} 
```

我想看到的：

```
{
created_at: "2012-11-17T18:24:04Z",
description: "this is the content",
id: 6,
user_id: 1,
picture_url = "/uploads/entry/picture/6/wtf_llama.jpeg",
thumb_url = "/uploads/entry/picture/6/thumb_wtf_llama.jpeg"
updated_at: "2012-11-26T08:16:43Z"
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:26:30.193

为什么将这些路径存储在模型中？改进响应（视图或控制器），而不是持久层（模型）。[我相信使用as_json](http://apidock.com/rails/ActiveModel/Serializers/JSON/as_json)最容易实现。添加`picture_url`方法来建模或将其他条目合并到最终哈希中。

# r - 如何粘贴 100000 而不会缩短为 1e+05？

> ID：13579953
> 
> 赞同：27
> 
> 时间：2012-11-27T03:24:22.433
> 
> 标签：r, r-faq

**问题**：我怎样才能使用`paste`而不`100000`成为`1e+05`？

如果这个问题看起来很无聊（但它导致了我的代码中的错误），请提前抱歉。我使用 R 调用外部脚本，所以当我说例如`paste("abc",100000)`我希望它输出`"abc 100000"`而不是`"abc 1e+05"`.

这是我屏幕上的示例：

```
> paste("abc",100000)
[1] "abc 1e+05"
> paste("abc",100001)
[1] "abc 100001" 
```

这导致我的脚本适用于输入“100001”而不是“100000”的奇怪行为。

我意识到我可以创建一个脚本来将数字转换为我喜欢的字符串，但是如果有内部方法可以做同样的事情，我觉得我不应该这样做（我怀疑我缺少一些“方法”） .

[如果有帮助，我在 Ubuntu 12.04.1 LTS（“精确”）上，在终端中运行 R 版本 2.14.1（2011-12-22）。]

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-27T03:26:25.140

见`?options`，特别是`scipen`：

```
R> paste("abc", 100000)
[1] "abc 1e+05"
R> options("scipen"=10)    # set high penalty for scientific display
R> paste("abc", 100000)
[1] "abc 100000"
R> 
```

或者，通过以下方式严格控制格式`sprintf()`：

```
R> sprintf("%s %6d", "abc", 100000)
[1] "abc 100000"
R> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-27T08:45:11.633

或者，您可以使用不以科学计数法打印的整数。你可以指定你的数字是一个整数，方法是在它后面加上一个“L”，或者做 as.integer。

```
> paste("abc",100000L)
[1] "abc 100000"
> paste("abc",as.integer(1000000000))
[1] "abc 1000000000" 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-04-09T22:22:36.367

或者`format`可能比`sprintf`特别是当您想要更改小数的显示方式时更简单：

```
> paste("abc",format(100000, scientific = FALSE))
[1] "abc 100000"
> paste("abc",format(0.1234567, scientific = FALSE, digits = 4))
[1] "abc 0.1235" 
```

# android - 如何强制调用 onServiceDisconnected()？

> ID：13579965
> 
> 赞同：4
> 
> 时间：2012-11-27T08:20:29.257
> 
> 标签：android, service

在我通过调用绑定服务之后：

```
bindService(new Intent(IBumpAPI.class.getName()), connection, Context.BIND_AUTO_CREATE); 
```

我需要出于调试目的来调用 onServiceDisconnected() 。

我知道 Android 系统会在与服务的连接意外丢失时调用它，例如当服务崩溃或被终止时，并且在客户端解除绑定时不会调用它。

所以我的问题是如何强制 onServiceDisconnected() 在我想要的时候被调用，以便我可以完成测试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-27T08:30:28.700

您需要启动服务，然后使用 Context.BIND_NOT_FOREGROUND 标志绑定，然后停止它。这将导致 onServiceDisconnected 被调用。这是 MainActivity 的代码（假设您定义了 TestService 服务），其中两个按钮链接到调用 doBind 和 doUnbind 方法：

```
package com.example.servicetest;

import android.app.Activity;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.ServiceConnection;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.view.Menu;
import android.view.View;

public class MainActivity extends Activity {
    private static final String TAG = "MainActivity";

    private ServiceConnection connection = new ServiceConnection() {

        @Override
        public void onServiceDisconnected(ComponentName name) {
            Log.d(TAG, "Service disconnected: " + name);
        }

        @Override
        public void onServiceConnected(ComponentName name, IBinder service) {
            Log.d(TAG, "Service connected: " + name);
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void doBind(View v) {
        Intent i = new Intent(this, TestService.class);
        startService(i);
        bindService(i, connection, Context.BIND_NOT_FOREGROUND);
    }

    public void doUnbind(View v) {
        Intent i = new Intent(this, TestService.class);
        stopService(i);
    }

} 
```

当您单击按钮时，此代码提供以下日志：

```
11-27 09:21:57.326: D/MainActivity(10724): Service connected: ComponentInfo{com.example.servicetest/com.example.servicetest.TestService}
11-27 09:21:58.099: D/MainActivity(10724): Service disconnected: ComponentInfo{com.example.servicetest/com.example.servicetest.TestService} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:31:04.523

您可能只是取消绑定您的服务

```
public void openService {
mConnection = new ServiceConnection() {
            @Override
            public void onServiceConnected(ComponentName name, IBinder service) {
                mService = IService.Stub.asInterface(service);
            }
            @Override
            public void onServiceDisconnected(ComponentName cn) {
                mService = null;
            }
        };
         bindService(service, mConnection, Context.BIND_AUTO_CREATE);   
    }
}

public void closeService() {
    unbindService(mConnection);
    stopService(new Intent(this, Service.class));
} 
```

# ruby-on-rails - 记录对象添加到 has_many 集合的日期

> ID：13579967
> 
> 赞同：0
> 
> 时间：2012-11-27T08:20:34.313
> 
> 标签：ruby-on-rails, ruby

我网站上的每个用户都有一个列表，其中包含不同类型的用户。我正在使用 has_many through 关系来执行此操作，如下所示：
List.rb：

```
class List < ActiveRecord::Base
  belongs_to :company
  has_many :list_applicants
  has_many :applicants, through: :list_applicants
end 
```

申请人.rb：

```
class Applicant < ActiveRecord::Base
  has_many :list_applicants
  has_many :lists, through: :list_applicants
end 
```

ListApplicant.rb

```
class ListApplicant < ActiveRecord::Base
  attr_accessible :applicant_id, :list_id
  belongs_to :applicant
  belongs_to :list
end 
```

公司.rb:

```
 class Company < ActiveRecord::Base
   has_one :list
 end 
```

当用户将另一个用户添加到他们的列表中时，我想记录添加用户的日期，以便他们可以按添加日期对用户列表进行排序。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:23:53.303

您可以使用模型的`created_at`字段（`ListApplicant`如果有）。如果没有，您可以手动添加一个类似的字段。

更新：

您可以通过指定申请人和列表来访问该字段，如下所示：

```
@applicant.list_applicants.where(list_id: @list.id).first.created_at 
```

# java - Android ListActivity 编译错误

> ID：13579968
> 
> 赞同：0
> 
> 时间：2012-11-27T08:20:33.860
> 
> 标签：java, android, android-listview

我对 java android 编程很陌生，我有一个可能很容易回答的问题，但我不知道 eclipse 编译错误消息意味着什么。

该类运行良好，除非我删除下面**onContextItemSelected**代码中的块注释，否则会出现以下编译错误：

**new View.OnCreateContextMenuListener(){} 类型的方法 onContextItemSelected(MenuItem) 必须覆盖或实现超类型方法**

我在做什么错或在这里失踪？谢谢。

**代码**

```
public class ListTest<registerForContextMenu> extends ListActivity  
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        this.setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, values));
        listView = getListView();

        // I populate the list view here

        listView.setOnCreateContextMenuListener(new OnCreateContextMenuListener() {

            @Override
            public void onCreateContextMenu(android.view.ContextMenu menu, View v, android.view.ContextMenu.ContextMenuInfo menuInfo) {
                menu.setHeaderIcon(R.drawable.ic_launcher);
                menu.setHeaderTitle(R.string.context_menu_options);
                menu.add(0, 0, 0, R.string.context_menu_reply);
                menu.add(0, 0, 0, R.string.context_menu_delete);
                menu.add(0, 0, 0, R.string.context_menu_cancel);
            };

            /*
            @Override
            public boolean onContextItemSelected(MenuItem item) {
                AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
                int index = info.position;
                return true;
            };
            */                      
       });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:26:30.157

根据文档，`onContextItemSelected`不是`OnCreateContextMenuListener`. 这意味着您不能覆盖它。

`onContextItemSelected`是一种方法`Activity`。在你的`Activity`.

# javascript - Webkit 中的 Socket.IO 和 Websockets 每消息压缩

> ID：13579970
> 
> 赞同：1
> 
> 时间：2012-11-27T08:20:42.957
> 
> 标签：javascript, webkit, websocket, socket.io, zlib

如何在[Socket.IO](http://socket.io/)库中启用对“Sec-Websocket-Extension：x-webkit-deflate-frame”的支持以进行消息压缩？它[于 2012 年 3 月](http://www.ietf.org/mail-archive/web/hybi/current/msg09463.html)在 Webkit 中实现，但我找不到在 Socket.IO 中启用它的方法。如果还不支持，是否有一些[RFC1979](http://www.ietf.org/rfc/rfc1979.txt) Javascript 实现可用于此目的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:40:39.800

当前版本的 Socket.IO (0.9.13) 不支持它 AFAIK。我刚刚在这里打开了一个问题：

*   [https://github.com/LearnBoost/socket.io/issues/1148](https://github.com/LearnBoost/socket.io/issues/1148)

# android - 我的代码是否足以防止 MediaPlayer 泄漏？

> ID：13579974
> 
> 赞同：2
> 
> 时间：2012-11-27T08:20:53.920
> 
> 标签：android, media-player, android-activity, android-mediaplayer, activity-lifecycle

在我的活动中，我有以下内容：

```
private Set<MediaPlayer> mediaPlayers;

public void onSomeEventInMyActivity()
{
    // play sound
    MediaPlayer mediaPlayer = MediaPlayer.create(this, R.raw.my_sound);
    mediaPlayers.add(mediaPlayer);
    mediaPlayer.setOnCompletionListener(new OnCompletionListener()
    {
        @Override
        public void onCompletion(MediaPlayer mp)
        {
            mp.release();
            mediaPlayers.remove(mp);
        }
    });
    mediaPlayer.start();
}

@Override
protected void onStart()
{
    super.onStart();

    mediaPlayers = new HashSet<MediaPlayer>();
}

@Override
protected void onStop()
{
    super.onStop();

    for (MediaPlayer mediaPlayer : mediaPlayers)
    {
        if (mediaPlayer.isPlaying())
        {
            mediaPlayer.stop();
        }
        mediaPlayer.release();
    }
} 
```

此代码是否足够或会导致 MediaPlayer 泄漏？我的实现是必要的`onStop`，`onStart`还是只能依靠调用？`release``onCompletion`

我这样做是因为我假设`onStop()`可以在 MediaPlayer 播放时调用我的代码，所以我需要调用`release`因为`onCompletion`还不会被调用。我只是猜测这是对的，如果我错了，请纠正我。

我还读到了`onStop`在内存不足的情况下不调用的内容-那该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:00:37.327

`onStop()`如果 mediaPlayer 预计在活动变得不可见时停止，则需要一个例程。否则， mediaPlayer 会继续播放。在较旧的操作系统、Gingerbread 和更早的版本上，活动可以执行`onPause()`——比如，当一个电话到来时——并且在极端情况下，可以在不执行的情况下被销毁`onStop()`。我不知道正在运行的 mediaPlayer 会发生什么。但是，如果有电话打进来，最好停止 mediaPlayer `onPause()`！后来的操作系统总是`onStop()`在销毁 Activity 之前通过。在停止 mediaPlayer 之后调用`mp.release()`它，无论是`onPause()`还是`onStop()`，都是正确的。

还希望删除对保存在 中的玩家的引用`mediaPlayers`，这在上面的 onStop() 中不会发生。就像是：

```
 @Override public void onCompletion(MediaPlayer mp) {
        mp.stop();   // It's always safe to call stop()
        mp.release();  // release resources internal to the MediaPlayer
        mediaPlayers.remove(mp); // remove reference to MediaPlayer to allow GC
    } 
```

进而

```
@Override public void onPause() {
     for (Object mediaPlayer : mediaPlayers.toArray()) {
          onCompletion((MediaPlayer) mediaPlayer); // stop, release, and free for GC, each mp.
     } 
     super.onPause();
} 
```

（我最初`for (Object mediaPlayer : mediaPlayers) {}`在上面的代码中，但 omfeddf345mnof32nisd45fgoq2t 指出我会在迭代时修改一个集合。感谢您的更正！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T10:03:03.317

只有保证被调用的回调是 onPause()，所以在某些情况下你可能会泄漏这个媒体播放器。如果在活动暂停时停止播放器是不可接受的，您应该使用服务，并注意某些事件（如来电等）

# javascript - 如何使用 javascript 从 iframe 中添加价值？

> ID：13579975
> 
> 赞同：0
> 
> 时间：2012-11-27T08:20:58.183
> 
> 标签：javascript

我有一个示例代码：在 index.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns:fb="http://ogp.me/ns/fb#">
<head>  
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
<title>index</title>  
</head>  
<body>
<input type="text" value="" name="test" id="text_input">
<iframe src="iframe.html">
</body> 
</html> 
```

和 iframe.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns:fb="http://ogp.me/ns/fb#">
<head>  
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />  
<title>iframe</title>  
<script>
function getValue(text) {
    document.getElementById('text_input').value = text;
}
</script>
</head>  
<body>
<a href="#" onclick="getValue('test');">Click</a>
</body> 
</html> 
```

单击标签时，无法传递值“文本” `from iframe to index.html`，如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:23:28.510

用于`parent`获取`iframe`. 尝试这个

```
function getValue(text) {
    parent.document.getElementById('text_input').value = text;
} 
```

# sharepoint - Sharepoint 事件接 收器和 linq 到 sharepoint

> ID：13579977
> 
> 赞同：1
> 
> 时间：2012-11-27T08:21:09.070
> 
> 标签：sharepoint, sharepoint-2010, event-receiver, linq-to-sharepoint, sandbox-solution

我有一个沙盒解决方案并使用 Linq-to-Sharepoint 访问一些列表。现在我将一个事件接收器附加到列表类型`101`，因为我必须限制一些上传到图片库的文件。这工作正常。

但是现在，当我尝试将新项目插入列表时，我的 Linq-to-Sharepoint 会引发错误（仅使用 Linq，如果我通过常规用户界面在该列表上创建新项目，它可以正常工作）。

错误`0x81020089`与消息`The sandboxed code execution request was refused because the Sandboxed Code Host Service was too busy to handle the request.`有关，但消息只是默认值，因为主机服务不太忙，0x81020089 是事件接收器的问题。

如果我不附加事件接收器，一切正常，但是当我这样做时会发生错误 - 即使事件接收器中根本没有代码。

有任何想法吗？

* * *

**错误信息**

0x81020089 沙盒代码执行请求被拒绝，因为沙盒代码宿主服务太忙，无法处理请求。

**服务器堆栈跟踪**

*   在 Microsoft.SharePoint.SPGlobal.HandleComException（COMException comEx）
*   在 Microsoft.SharePoint.Library.SPRequest.AddOrUpdateItem（字符串 bstrUrl，字符串 bstrListName，布尔 bAdd，布尔 bSystemUpdate，布尔 bPreserveItemVersion，布尔 bUpdateNoVersion，Int32 和 plID，字符串和 pbstrGuid，Guid pbstrNewDocId，布尔 bHasNewDocId，字符串 bstrVersion，对象和 pvarAttachmentNames，对象和 pvarAttachmentContents，对象和 pvarProperties、布尔 bCheckOut、布尔 bCheckin、布尔 bMigration、布尔 bPublish、字符串 bstrFileName、ISP2DSafeArrayWriter pListDataValidationCallback、ISP2DSafeArrayWriter pRestrictInsertCallback、ISP2DSafeArrayWriter pUniqueFieldCallback)
*   在 Microsoft.SharePoint.SPListItem.AddOrUpdateItem（布尔 bAdd，布尔 bSystem，布尔 bPreserveItemVersion，布尔 bNoVersion，布尔 bMigration，布尔 bPublish，布尔 bCheckOut，布尔 bCheckin，Guid newGuidOnAdd，Int32 和 ulID，对象和 objAttachmentNames，对象和 objAttachmentContents，布尔抑制AfterEvents，字符串文件名)
*   在 Microsoft.SharePoint.SPListItem.UpdateInternal（布尔 bSystem、布尔 bPreserveItemVersion、Guid newGuidOnAdd、布尔 bMigration、布尔 bPublish、布尔 bNoVersion、布尔 bCheckOut、布尔 bCheckin、布尔 suppressAfterEvents、字符串文件名）
*   在 Microsoft.SharePoint.SPListItem.Update()
*   在 Microsoft.SharePoint.SPListItem_SubsetProxy.Update__Inner()
*   在 System.Runtime.Remoting.Messaging.StackBuilderSink._PrivateProcessMessage(IntPtr md, Object[] args, Object server, Int32 methodPtr, Boolean fExecuteInContext, Object[]& outArgs)
*   在 System.Runtime.Remoting.Messaging.StackBuilderSink.SyncProcessMessage（IMessage 消息，Int32 methodPtr，布尔 fExecuteInContext）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T20:03:34.870

将以下内容放入注册表：

**HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows NT\RPC**

该密钥必须存在。你不需要一个值。此外，您必须将该密钥放在运行沙盒代码主机服务的每个注册表中。一旦你这样做，我建议你重新启动机器。

这是一篇关于这个问题的很棒的博客文章。 [http://blogs.msdn.com/b/sharepointdev/archive/2011/02/08/error-the-sandboxed-code-execution-request-was-refused-because-the-sandboxed-code-host-service-太忙了，无法处理请求.aspx](http://blogs.msdn.com/b/sharepointdev/archive/2011/02/08/error-the-sandboxed-code-execution-request-was-refused-because-the-sandboxed-code-host-service-was-too-busy-to-handle-the-request.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-06T19:53:21.387

我遇到了同样的问题，问题是 ItemUpdating 事件接收器上发生的错误（对象引用未设置为对象的实例）。调试应该告诉你缺少什么。

当您使用 linq to sharepoint 时，AfterProperties 只是由代码更改的属性，这与 UI 更新不同，其中所有属性都将被视为已更改

# arrays - 如何解决 ArrayList 大小的 Java 堆空间异常？

> ID：13579981
> 
> 赞同：3
> 
> 时间：2012-11-27T08:21:34.563
> 
> 标签：arrays, multidimensional-array, arraylist, java

当我运行以下程序时，它显示给定数组的子集，其中数组大小为 <=19 ，它工作正常。但如果数组大小 >19，则会引发 Java 堆空间异常。如何克服这个问题以获得数组大小> 19的子集？

```
import java.lang.*;
import java.util.*;
class def
{
    static List<List<Integer>> subset(int ele,List<List<Integer>>  w)
    {
        if(w.size()==0)
        {
            List<Integer> temp=new ArrayList<Integer>();
            temp.add(ele);
            w.add(temp);
        }
        else
        {
            int i,len=w.size();
            for(i=0;i<len;i++)
            {
                List<Integer> temp=new ArrayList<Integer>();
                for(Integer agh:w.get(i))
                {
                    temp.add(agh);
                }
                temp.add(ele);
                w.add(temp);
            }
            List<Integer> ghi=new ArrayList<Integer>();
            ghi.add(ele);
            w.add(ghi);
        }
        return w;
    }
    static void sub(int set[])
    {
        List<List<Integer>> ints = new ArrayList<List<Integer>>();
        int len=set.length,i;
        for(i=0;i<len;i++)
        {
            ints=subset(set[i],ints);
        }
        int count=0;
        for(List<Integer> temp:ints)
        {
            System.out.println("SET---"+count++);
            for(Integer agh:temp)
            {
                System.out.println(agh);
            }
        }

    }
    public static void main(String args[])
    {
        int a[]={3,4,9,14,15,19,28,37,47,50,54,56,59,61,70,73,78,81,92,95,97,99};
        sub(a); 
    }
} 
```

这是一个例外：C:\Program Files (x86)\Java\jdk1.6.0_07\bin>javac def.java

```
C:\Program Files (x86)\Java\jdk1.6.0_07\bin>java def
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space
    at java.util.Arrays.copyOf(Arrays.java:2760)
    at java.util.Arrays.copyOf(Arrays.java:2734)
    at java.util.ArrayList.ensureCapacity(ArrayList.java:167)
    at java.util.ArrayList.add(ArrayList.java:351)
    at def.subset(def.java:22)
    at def.sub(def.java:39)
    at def.main(def.java:55) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T08:36:55.027

您收到堆错误的原因是您正在创建数十亿个列表。不要创建子列表，只是显示它们。

```
public static void sub(int[] input){
    sub(new int[0],input);
}

public static void sub(int[] current, int[] remaining){
    System.out.println(Arrays.toString(current));
    int[] newCurrent = Arrays.copyOf(current, current.length+1);

    for(int i = 0;i < remaining.length;i++){
        newCurrent[newCurrent.length-1] = remaining[i];
        sub(newCurrent , Arrays.copyOfRange(remaining, i + 1, remaining.length));
    }

} 
```

否则，您将需要一个比列表列表更智能的数据构造器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:34:39.783

看来您正在制作太多的 ArrayList 实例。您可以增加堆大小。但我认为您可以对代码进行一些小修改

```
else
    {
        int i,len=w.size();
        List<Integer> temp=new ArrayList<Integer>();   ///reuse this arraylist
        for(i=0;i<len;i++)
        {

            for(Integer agh:w.get(i))
            {
                temp.add(agh);
            }
            temp.add(ele);
            w.add(temp);
            temp.clear();
        }
        List<Integer> ghi=new ArrayList<Integer>();
        ghi.add(ele);
        w.add(ghi);
    }
    return w; 
```

虽然这可能无法完全解决您的问题。但显然它会帮助垃圾收集器休息一下。:D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T08:37:24.387

为了减少内存消耗，您可以将集合存储为位字段，例如带有元素的集合`3, 9, 14`将表示为`10110000000000000000`- 因此对于每个子集，您只需要一个`int`

# flutter - 如何创建自定义异常并在 dart 中处理它

> ID：13579982
> 
> 赞同：73
> 
> 时间：2012-11-27T08:21:36.137
> 
> 标签：flutter, dart, exception, try-catch

我编写了这段代码来测试自定义异常在 dart 中的工作方式。

我没有得到想要的输出有人可以向我解释如何处理它吗？

```
void main() 
{   
  try
  {
    throwException();
  }
  on customException
  {
    print("custom exception is been obtained");
  }

}

throwException()
{
  throw new customException('This is my first custom exception');
} 
```

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-11-27T08:38:22.703

您可以查看[*A Tour of the Dart Language*](http://www.dartlang.org/docs/dart-up-and-running/ch02.html#exceptions)[的Exception 部分](http://www.dartlang.org/docs/dart-up-and-running/ch02.html#exceptions)*。*

 *以下代码按预期工作（`custom exception has been obtained`显示在控制台中）：

```
class CustomException implements Exception {
  String cause;
  CustomException(this.cause);
}

void main() {
  try {
    throwException();
  } on CustomException {
    print("custom exception has been obtained");
  }
}

throwException() {
  throw new CustomException('This is my first custom exception');
} 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2020-01-09T10:46:49.923

如果您不关心异常的类型，则不需要异常类。只需触发这样的异常：

```
throw ("This is my first general exception"); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2021-01-23T02:58:40.363

Dart 代码可以抛出和捕获异常。与 Java 相比，Dart 的所有异常都是未经检查的异常。方法不声明它们可能抛出哪些异常，并且您不需要捕获任何异常。

Dart 提供`Exception`和`Error`类型，但你可以抛出任何非空对象：

```
throw Exception('Something bad happened.');
throw 'Waaaaaaah!'; 
```

处理异常时使用`try`、`on`和`catch`关键字：

```
try {
  breedMoreLlamas();
} on OutOfLlamasException {
  // A specific exception
  buyMoreLlamas();
} on Exception catch (e) {
  // Anything else that is an exception
  print('Unknown exception: $e');
} catch (e) {
  // No specified type, handles all
  print('Something really unknown: $e');
} 
```

该`try`关键字的工作方式与大多数其他语言一样。使用`on`关键字按类型过滤特定异常，使用`catch`关键字获取对异常对象的引用。

如果不能完全处理异常，使用`rethrow`关键字传播异常：

```
try {
  breedMoreLlamas();
} catch (e) {
  print('I was just trying to breed llamas!.');
  rethrow;
} 
```

要执行代码（无论是否引发异常），请使用`finally`：

```
try {
  breedMoreLlamas();
} catch (e) {
  // ... handle exception ...
} finally {
  // Always clean up, even if an exception is thrown.
  cleanLlamaStalls();
} 
```

**代码示例**

下面实现`tryFunction()`。它应该执行一个不可信的方法，然后执行以下操作：

*   如果`untrustworthy()`抛出`ExceptionWithMessage`，则使用异常类型和消息调用`logger.logException`（尝试使用`on`and `catch`）。
*   如果`untrustworthy()`抛出异常，`logger.logException`使用异常类型调用（尝试使用`on`这个）。
*   如果`untrustworthy()`抛出任何其他对象，请不要捕获异常。
*   在一切都被捕获和处理之后，调用`logger.doneLogging`（尝试使用`finally`）。

.

```
typedef VoidFunction = void Function();

class ExceptionWithMessage {
  final String message;
  const ExceptionWithMessage(this.message);
}

abstract class Logger {
  void logException(Type t, [String msg]);
  void doneLogging();
}

void tryFunction(VoidFunction untrustworthy, Logger logger) {
  try {
    untrustworthy();
  } on ExceptionWithMessage catch (e) {
    logger.logException(e.runtimeType, e.message);
  } on Exception {
    logger.logException(Exception);
  } finally {
    logger.doneLogging(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-12T21:19:13.580

您还可以创建一个抽象异常。

*灵感来自包（阅读[Dart API](https://api.dart.dev/stable/dart-async/TimeoutException-class.html)和[Dart SDK](https://github.com/dart-lang/sdk/blob/a1e2432679f4d68cfb629c17d42d5018be6f370b/sdk/lib/async/future.dart#L905)`TimeoutException`上的代码）。`async`*

```
abstract class IMoviesRepoException implements Exception {
  const IMoviesRepoException([this.message]);

  final String? message;

  @override
  String toString() {
    String result = 'IMoviesRepoExceptionl';
    if (message is String) return '$result: $message';
    return result;
  }
}

class TmdbMoviesRepoException extends IMoviesRepoException {
  const TmdbMoviesRepoException([String? message]) : super(message);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-22T06:12:03.097

```
 Try this Simple Custom Exception Example for Beginners 

   class WithdrawException implements Exception{
  String wdExpMsg()=> 'Oops! something went wrong';
}
void main() {   
   try {   
      withdrawAmt(400);
   }   
  on WithdrawException{
    WithdrawException we=WithdrawException();
    print(we.wdExpMsg());
  }
  finally{
    print('Withdraw Amount<500 is not allowed');
  }
}    
void withdrawAmt(int amt) {   
   if (amt <= 499) {   
      throw WithdrawException();   
   }else{
     print('Collect Your Amount=$amt from ATM Machine...');
   }   
} 
```*

# mysql - 只返回一个元组的 SQL 查询结果

> ID：13579993
> 
> 赞同：1
> 
> 时间：2012-11-27T08:22:23.147
> 
> 标签：mysql, sql

我想做一个查询

```
select * from chr2; 
```

但只有 MySQL 返回第一个元组（或任意一个）元组而不是所有元组。

我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T08:25:03.693

使用[`LIMIT`](http://dev.mysql.com/doc/refman/5.1/en/select.html#id907989)子句：

```
SELECT * FROM chr2 LIMIT 1; 
```

如果您想要返回任意行，则必须按这样的随机列对行进行排序（[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_rand)）：

```
SELECT * FROM chr2 
ORDER BY RAND()
LIMIT 1; 
```

但是，在大型表上，您可能会遇到性能问题，因为必须为每一行创建一个随机值，并且必须根据该列对表进行排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T08:25:16.707

试试这个 ：：

```
select * from chr2 limit 1 
```

# javascript - 在javascript中访问隐藏字段值

> ID：13579995
> 
> 赞同：3
> 
> 时间：2012-11-27T08:22:28.960
> 
> 标签：javascript, asp.net, vb.net, hidden-field

我的表单中有一个隐藏字段，我正在服务器上设置隐藏字段的值并尝试从 javascript 访问该值，

我收到错误：无法获取属性“值”的值：对象为空或未定义

如果我查看源，则设置隐藏字段值，并且隐藏字段的 ID 与我正在调用的 ID 相同。

ASPX

```
 var v = document.getElementById('hxValue').value;
            <asp:HiddenField ID="hxValue" runat="server"/> 
```

VB

```
 hxValue.Value = "Value1" 
```

我记得以前这样做过，它应该相对简单，但由于某种原因，我没有做对。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T08:46:51.790

您的代码将起作用。对于简单的表格，只需添加

```
<asp:HiddenField ClientIDMode="static" ID="hxValue" runat="server"/> 
```

或者

您需要使用

```
'<%=hxValue.ClientID%>' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T09:04:00.717

好的，在脚本运行之前似乎没有设置我的隐藏字段的值，因此接收到一个空值。我曾假设在服务器页面加载上放置断点并且脚本将确定是否在脚本运行之前设置了控件，但似乎没有。

固定如下：

```
 <html xmlns="http://www.w3.org/1999/xhtml" >
            <head>

            <title></title>

            <script type="text/javascript">
                function GetHiddenValues() {
                    var v = document.getElementById('<%= hxValue.ClientID %>').value;
                }
            </script>
            </head>

            <body onload="GetHiddenValues() ;">

            <form runat="server">

            <asp:HiddenField ClientIDMode="static" ID="hxValue" runat="server"/>

            </form>
            </body>
            </html> 
```

感谢所有的帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T08:24:59.040

您可以使用`innerText`not`value`来检索 hxValue 的值。

```
var v = document.getElementById('hxValue').innerText 
```

如果你正在使用`jQuery`你也可以做

```
var v = $("#hxValue").val(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T08:30:58.727

尝试这个

```
var v = document.getElementById('<%= hxValue.ClientID %>').value; 
```

问题是隐藏字段是服务器端控件，而您提供的 ID 是服务器端 ID，您必须获取该控件的客户端 ID 才能在客户端 JavaScript 或 Jquery 中引用它。

**更新**

将此脚本放在页面末尾，就在`</body>`类似这样的内容之前

```
<script type="text/javascript" language="javascript">
  var v = document.getElementById('<%= hxValue.ClientID %>').value;
</script>
</body> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T08:27:00.563

尝试`<asp:HiddenField ID="hxValue" runat="server" Value=""/>`
然后通过 id 调用它并设置值

# xml - 如何从 xml 文件创建 R 数据框

> ID：13579996
> 
> 赞同：10
> 
> 时间：2012-11-27T08:22:32.303
> 
> 标签：xml, r

我有一个 XML 文档文件。该文件的部分如下所示：

```
-<attr>  
     <attrlabl>COUNTY</attrlabl>  
     <attrdef>County abbreviation</attrdef>  
     <attrtype>Text</attrtype>  
     <attwidth>1</attwidth>  
     <atnumdec>0</atnumdec>  
    -<attrdomv>  
        -<edom>  
            <edomv>C</edomv>  
            <edomvd>Clackamas County</edomvd>  
            <edomvds/>  
         </edom>  
        -<edom>  
            <edomv>M</edomv>  
            <edomvd>Multnomah County</edomvd>  
            <edomvds/>  
         </edom>  
        -<edom>  
            <edomv>W</edomv>  
            <edomvd>Washington County</edomvd>  
            <edomvds/>  
         </edom>  
     </attrdomv>  
 </attr> 
```

从这个 XML 文件中，我想创建一个包含 attrlabl、attrdef、attrtype 和 attrdomv 列的 R 数据框。请注意 attrdomv 列应包括类别变量的所有级别。数据框应如下所示：

```
attrlabl    attrdef                attrtype    attrdomv  
COUNTY      County abbreviation    Text        C Clackamas County; M Multnomah County; W Washington County 
```

我有一个这样的不完整代码：

```
doc <- xmlParse("taxlots.shp.xml")  
dataDictionary <- xmlToDataFrame(getNodeSet(doc,"//attrlabl")) 
```

你能完成我的R代码吗？我很感激任何帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-27T09:19:55.827

假设这是正确的`taxlots.shp.xml`文件：

```
<attr>  
     <attrlabl>COUNTY</attrlabl>  
     <attrdef>County abbreviation</attrdef>  
     <attrtype>Text</attrtype>  
     <attwidth>1</attwidth>  
     <atnumdec>0</atnumdec>  
    <attrdomv>  
        <edom>  
            <edomv>C</edomv>  
            <edomvd>Clackamas County</edomvd>  
            <edomvds/>  
         </edom>  
        <edom>  
            <edomv>M</edomv>  
            <edomvd>Multnomah County</edomvd>  
            <edomvds/>  
         </edom>  
        <edom>  
            <edomv>W</edomv>  
            <edomvd>Washington County</edomvd>  
            <edomvds/>  
         </edom>  
     </attrdomv>  
 </attr> 
```

你几乎在那里：

```
doc <- xmlParse("taxlots.shp.xml")
xmlToDataFrame(nodes=getNodeSet(doc1,"//attr"))[c("attrlabl","attrdef","attrtype","attrdomv")]
  attrlabl             attrdef attrtype                                             attrdomv
1   COUNTY County abbreviation     Text CClackamas CountyMMultnomah CountyWWashington County 
```

但是最后一个字段不是您想要的格式。为此，需要一些额外的步骤：

```
step1 <- xmlToDataFrame(nodes=getNodeSet(doc1,"//attrdomv/edom"))
step1
  edomv            edomvd edomvds
1     C  Clackamas County        
2     M  Multnomah County        
3     W Washington County  

step2 <- paste(paste(step1$edomv, step1$edomvd, sep=" "), collapse="; ")
step2
[1] "C Clackamas County; M Multnomah County; W Washington County"

cbind(xmlToDataFrame(nodes= getNodeSet(doc1, "//attr"))[c("attrlabl", "attrdef", "attrtype")],
      attrdomv= step2)
  attrlabl             attrdef attrtype                                                      attrdomv
1   COUNTY County abbreviation     Text C Clackamas County; M Multnomah County; W Washington County 
```

# c++ - 两个进程访问临界区时出错

> ID：13579998
> 
> 赞同：0
> 
> 时间：2012-11-27T08:22:34.733
> 
> 标签：c++, c, fork

有人可以告诉我如何解决这个编译错误：

```
tarek.c: In function ‘main’:
tarek.c:33: warning: incompatible implicit declaration of built-in function ‘exit’
/tmp/ccAEGS6k.o: In function `main':
tarek.c:(.text+0x45): undefined reference to `pthread_mutexattr_init'
tarek.c:(.text+0x56): undefined reference to `pthread_mutexattr_setpshared'
collect2: ld returned 1 exit status 
```

当我编译这个程序时（两个进程使用临界区共享相同的值）：

```
#include <sys/types.h>
#include <pthread.h>
#include <sys/mman.h>
#include <stdio.h>
#include <fcntl.h>
#include <sys/stat.h>
#include <unistd.h>

int main () {

int stat;

pthread_mutex_t *mutex = (pthread_mutex_t*)mmap (0, sizeof (pthread_mutex_t) + sizeof (long),PROT_READ | PROT_WRITE,
                            MAP_SHARED ,-1, 0);

long *data = (long*)(&mutex[1]); /* map 'data' after mutex */
int pid;

pthread_mutexattr_t attr;
pthread_mutexattr_init (&attr);
pthread_mutexattr_setpshared (&attr, PTHREAD_PROCESS_SHARED);
pthread_mutex_init (mutex, &attr);

*data = 0;

pid = fork ();

pthread_mutex_lock (mutex);
(*data)++;
pthread_mutex_unlock (mutex);

if (!pid) /* child exits */
exit (0);
else
waitpid (pid, &stat, 0);
printf ("data is %ld\n", *data);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T08:29:05.993

明确提及`-pthread`library 。

像这样编译：

```
gcc -Wall program.c -o program -pthread 
```

它会解决你的

```
`tarek.c:(.text+0x45): undefined reference to `pthread_mutexattr_init'
tarek.c:(.text+0x56): undefined reference to `pthread_mutexattr_setpshared'` 
```

对于`exit()`包括`#include <stdlib.h>`

对于`waitpid()`包括`#include <sys/wait.h>`

更多[man exit()](http://linux.die.net/man/3/exit) 和[man waitpid()](http://linux.die.net/man/2/waitpid)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T08:28:49.280

当您构建时添加`-lpthread`您的链接命令

```
gcc -o program program.c -lpthread 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T08:35:55.980

要解决`exit()`您需要的错误`#include <stdlib.h>`

# php - 正则表达式查找以 /* 开头的行

> ID：13579999
> 
> 赞同：1
> 
> 时间：2012-11-27T08:22:42.193
> 
> 标签：php, regex, preg-match-all

我需要一个正则表达式来查找所有以开头的行`/*`

```
$num_queries =  preg_match_all(
    'REG_EXP',
    file_get_contents(__DIR__ . DIR_PLANTILLAS . '/' . 'temp_template.sql')
); 
```

我试试这个`'^\/\*.*'` ，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:34:36.940

如果你`/^\/\*.*/`在[`preg_match()`](http://php.net/manual/en/function.preg-match.php)函数中使用这个字符串：它会起作用。此模式匹配`/*`后跟*一些*文本。
确保将在每一行上执行正则表达式。我建议您首先用换行符分割字符串（文件内容）。您可以使用该功能[`preg_split()`](http://php.net/manual/en/function.preg-split.php)来执行此操作。

如果您不想先按每一行拆分文件内容，则可以使用以下模式：`/(^|\n)\/\*(.*)/`. 该模式首先匹配字符串的开头或换行符，然后是`/*`，然后*可能*是一些文本。

请注意，在模式中和`/^\/\*.*/`用作分隔符。这意味着必须避免进一步发生。`/(^|\n)\/\*(.*)/``/``/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:29:20.877

尝试这个。

```
^\/\*+[^\n]*$ 
```

编辑：更正转义`/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T08:40:03.857

请注意，您处理的是多行内容，但 ^ 表示内容的开头，而不是行的开头。尝试`(\/[^\r\n]+)[\r\n$]+`