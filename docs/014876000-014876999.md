# StackOverflow 问答 14876000-14876999

# html - 在 webkit 和 Mozilla 中具有不同效果的元素百分比定位

> ID：14876002
> 
> 赞同：0
> 
> 时间：2013-02-14T13:33:06.320
> 
> 标签：html, css, webkit, mozilla, absolute

Safari 和 Chrome (webkit) 都以与 firefox 不同的方式呈现绝对定位的元素。

[http://jsfiddle.net/9uswM/5/](http://jsfiddle.net/9uswM/5/)

```
<head></head>

<body>
    <div id="container">
        <div id="one"></div>
        <div id="two"></div>
    </div>
</body> 
```

```
div#container {
    width: 600px;
}
div#one {
    height: 30%;
    width: 20%;
    background: green;
    margin-left: 13.5%;
    margin-top: 4%;
    position: absolute;
}
div#two {
    height: 30%;
    width: 20%;
    background: blue;
    margin-left: 3%;
    margin-top: 10%;
    position: absolute;
} 
```

恕我直言，问题在于 %-margin-top （根据定义）应该与宽度有关。这在 Firefox 中正确完成，但在基于 webkit 的浏览器中却没有。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:26:01.397

这是 webkit 中的一个已知错误：[https ://bugs.webkit.org/show_bug.cgi?id=54613](https://bugs.webkit.org/show_bug.cgi?id=54613)

> 绝对定位元素的基于百分比的 margin-top 根据视口的高度错误地计算。

由于它的状态是*RESOLVED FIXED*我认为它不会很快成为问题。

# c++ - 在高度优化的代码中计算代码运行时间

> ID：14876003
> 
> 赞同：1
> 
> 时间：2013-02-14T13:33:10.413
> 
> 标签：c++, optimization, iar

我正在研究 Cortex M3 并使用 IAR EWARM。我使用`DWT_DYCCNT`时间计算。问题是当我优化代码以提高速度时（使用编译器选项），我`DWT_DYCCNT`在调试时失去了价值。代码使用 C 和 C++ 编写。我还尝试使用打印变量的值，`printf`但这也会返回错误。

我尝试制作变量`volatile`，但这也无济于事。

在调试时，我总是得到`unknown value`这个变量。

我想知道如何计算已针对速度进行了优化的代码中的代码时序，并且不会丢失变量的值。如何强制编译器保留这些变量的值？

编辑：

```
 volatile int count = 0;
        volatile unsigned int *DWT_CYCCNT = (unsigned int *)0xE0001004; //address of the register
        volatile unsigned int *DWT_CONTROL = (unsigned int *)0xE0001000; //address of the register
        volatile unsigned int *SCB_DEMCR = (unsigned int *)0xE000EDFC; //address of the register

        *SCB_DEMCR = *SCB_DEMCR | 0x01000000;
        *DWT_CYCCNT = 0; // reset the counter
        *DWT_CONTROL = *DWT_CONTROL | 1 ; // enable the counter

_DO_SOMETHING_HERE_

count = *DWT_CYCCNT;
         printf("\n COUNT!!!! = %d",*DWT_CYCCNT); 
```

调试代码时， 的值`count`“丢失”。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T07:37:33.667

如果要测量一段时间，可以使用示波器。只需在输入要测量其时序的代码部分时将引脚设置为 HIGH，然后在该部分结束时将引脚设置为 LOW。

这是在嵌入式中测量时序的最准确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T11:17:09.213

If your _DO_SOMETHING_HERE_ is not external operation not it contains volatile operations compiler is allowed to move it before/after volatile operations if it does not change program result.

Only volatile operations are ordered.

I use similar code for benchmarking, but i prefer global volatile for count (it worked for me with arm-none-eabi-gcc 4.6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-27T06:01:21.360

如果你用`__root`（双下划线）声明一个变量，那么 IAR 不会优化它。

```
__root volatile int count = 0; 
```

您可能还有其他问题。您的`_DO_SOMETHING_HERE_`代码仍然可以优化。您可能还需要`__root`用于其他声明。

我经常看到的另一个问题是调试器在使用优化时有时不会显示局部变量值。您将需要打开 Disassemble 窗口 Registers 窗口并查看使用哪个寄存器（介于两者之间`R0-R12`）来存储`count`. 一个万无一失的方法是让一个函数返回您的计数值。ARM Cortex`R0`用于返回值，所以函数完成后的值`R0`就是 count 的值。不幸的是，这是您在使用优化进行调试时必须做的事情。

# java - Java Web Start 应用程序无法从快捷方式更新

> ID：14876006
> 
> 赞同：3
> 
> 时间：2013-02-14T13:33:22.127
> 
> 标签：java, deployment, javafx, updates, java-web-start

我已经使用 Java Web Start 部署了一个 Java(FX) 桌面应用程序。更新工作正常，但只有当我手动运行下载的 JNLP 时，它们才不能从安装到桌面和菜单的快捷方式中工作。

这是我的 JNLP：

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp codebase="http://192.168.1.85/deploy/" spec="1.0" xmlns:jfx="http://javafx.com" href="Companyapp.jnlp">

    <information>

        <title>Companyapp</title>
        <vendor>Media Citizens</vendor>
        <description>Companyapp Presentation Desktop</description>
        <homepage href="http://192.168.1.85/deploy/"/>

        <offline-allowed/>

        <shortcut online="false" install="true">
            <desktop />
            <menu submenu="Companyapp"/>
        </shortcut>

        <icon kind="shortcut"   href="http://192.168.1.85/deploy/icons/32x32.gif"           width="32"      height="32"     />
        <icon kind="shortcut"   href="http://192.168.1.85/deploy/icons/64x64.gif"           width="64"      height="64"     />
        <icon kind="splash"     href="http://192.168.1.85/deploy/icons/splash_screen.jpg"   width="1024"    height="768"    />
    </information>

    <update check="always" policy="always" />

    <security>
        <all-permissions/>
    </security>

    <resources>
        <jfx:javafx-runtime version="2.2+" href="http://javadl.sun.com/webapps/download/GetFile/javafx-latest/windows-i586/javafx2.jnlp"/>
    </resources>

    <resources>
        <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/>

        <jar href="http://192.168.1.85/deploy/Companyapp.jar" main="true"                                   download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/async-http-client-1.7.8.jar"             size="477791"   download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/commons-codec-1.7.jar"                       size="259600"   download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/commons-io-2.4.jar"                          size="185140"   download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/commons-lang3-3.1.jar"                       size="315805"   download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/commons-logging-1.1.jar"                 size="52915"    download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/json-simple-1.1.1.jar"                       size="23737"    download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/slf4j-api-1.7.2.jar"                     size="26083"    download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/sqlite-jdbc-3.7.15-SNAPSHOT.jar"         size="3702257"  download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/ws-commons-util-1.0.2.jar"                   size="34407"    download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/xmlrpc-client-3.1.3.jar"                 size="58573"    download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/xmlrpc-common-3.1.3.jar"                 size="109131"   download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/zt-zip-1.5.jar"                              size="33059"    download="eager"    />
        <jar href="http://192.168.1.85/deploy/libs/javaws.jar"                                  size="893738"   download="eager"    />
    </resources>

    <jfx:javafx-desc  width="0" height="0" main-class="com.mediacitizens.companyapp.presentation.desktop.Main"  name="Company App" />
    <application-desc main-class="com.mediacitizens.companyapp.presentation.desktop.Main" />
</jnlp> 
```

以防万一，这是我的程序中安装快捷方式的部分：

```
// install shortcuts
try
{
    IntegrationService is = null;
    try
    {
        is = (IntegrationService) ServiceManager.lookup("javax.jnlp.IntegrationService");
    }
    catch (UnavailableServiceException use)
    {
        throw new ApplicationError(use.getLocalizedMessage());
    }

    if (!is.hasDesktopShortcut())
    {
        if (!is.requestShortcut(true, true, "Companyapp"))
        {
            throw new ApplicationError("Integration failed.");
        }
    }
    else
    {
        //initialController.dialog("Shortcuts exist", "Go away!", null);
    }
}
catch (ApplicationError e)
{
    initialController.dialog("Failed to integrate a shortcut on your computer.\nCause: " + e.getLocalizedMessage(), "I understand", null);
} 
```

* * *

## 更新 1

我删除`<offline-allowed />`了，现在它从快捷方式更新，但我无法离线启动应用程序。所以显然我应该能够？它给了我这个错误：

![在此处输入图像描述](../Images/0334b4775780afd8c6aac9fec27fc2fa.png)

公平地说，我确实尝试在启动时连接到服务器，但这不会导致此错误：它有 2 秒超时，看起来像这样：

```
try
{
    isOffline = !(InetAddress.getByName(Config.domain + "." + Config.serverDomain).isReachable(2000));
}
catch (IOException e)
{
    e.printStackTrace();
} 
```

无论如何，我的代码没有在错误中引用，所以我想如果我没有，我根本无法`<offline-allowed />`离线运行应用程序？这是真的？如果是的话，这对于使用 JWS 进行部署来说是一个大问题，我可能会完全放弃它......

* * *

## 更新 2

我想我可能会遇到这个问题：[http](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7121086) ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7121086有人知道解决方法吗？

在它说的错误中

> 获取用作扩展的每个 jnlp 的 rif。意思是混合在一起。在这种情况下有效

所以我应该将 JavaFX 作为 jar 混合到我的 JNLP 中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T11:55:37.547

我设法在不删除的情况下解决了问题`<offline-allowed />`，这是 JNLP：

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp spec="6.0+" codebase="http://192.168.1.85/deploy/" href="Companyapp.jnlp">

    <information>
        <title>Companyapp</title>
        <vendor>Media Citizens</vendor>
        <description>Companyapp Presentation Desktop</description>
        <homepage href="http://192.168.1.85" />

        <shortcut online="true" install="true">
            <desktop />
            <menu submenu="Companyapp" />
        </shortcut>

        <offline-allowed />

        <icon kind="shortcut" href="http://192.168.1.85/deploy/icons/32x32.gif" width="32" height="32" />
        <icon kind="shortcut" href="http://192.168.1.85/deploy/icons/64x64.gif" width="64" height="64" />
        <icon kind="splash" href="http://192.168.1.85/deploy/icons/splash_screen.jpg" width="1024" height="768" />
    </information>

    <update check="always" policy="prompt-update" />

    <security>
        <all-permissions />
    </security>

    <resources>
        <jfx:javafx-runtime version="2.2+" href="http://javadl.sun.com/webapps/download/GetFile/javafx-latest/windows-i586/javafx2.jnlp" />
    </resources>

    <resources>
        <j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se" />

        <jar href="http://192.168.1.85/deploy/Companyapp.jar" main="true" />
        <jar href="http://192.168.1.85/deploy/libs/async-http-client-1.7.8.jar" size="477791" download="eager" />
        <jar href="http://192.168.1.85/deploy/libs/commons-codec-1.7.jar" size="259600" download="eager" />
        <jar href="http://192.168.1.85/deploy/libs/commons-io-2.4.jar" size="185140" download="eager" />
        <jar href="http://192.168.1.85/deploy/libs/commons-lang3-3.1.jar" size="315805" download="eager" />
        <jar href="http://192.168.1.85/deploy/libs/commons-logging-1.1.jar" size="52915" download="eager" />
        <jar href="http://192.168.1.85/deploy/libs/json-simple-1.1.1.jar" size="23737" download="eager" />
        <jar href="http://192.168.1.85/deploy/libs/slf4j-api-1.7.2.jar" size="26083" download="eager" />
        <jar href="http://192.168.1.85/deploy/libs/sqlite-jdbc-3.7.15-SNAPSHOT.jar" size="3702257" download="eager" />
        <jar href="http://192.168.1.85/deploy/libs/ws-commons-util-1.0.2.jar" size="34407" download="eager" />
        <jar href="http://192.168.1.85/deploy/libs/xmlrpc-client-3.1.3.jar" size="58573" download="eager" />
        <jar href="http://192.168.1.85/deploy/libs/xmlrpc-common-3.1.3.jar" size="109131" download="eager" />
        <jar href="http://192.168.1.85/deploy/libs/zt-zip-1.5.jar" size="33059" download="eager" />
        <jar href="http://192.168.1.85/deploy/libs/javaws.jar" size="893738" download="eager" />
    </resources>

    <application-desc main-class="com.mediacitizens.companyapp.presentation.desktop.Main" />
</jnlp> 
```

为了确保服务器正确处理更新，请安装`mod_expires`Apache 并将其放在`.htaccess`JNLP 和 JAR 所在的文件夹中：

```
DirectoryIndex index.html

AddType application/x-java-jnlp-file .jnlp
AddType application/x-java-archive .jar
AddType application/x-java-archive-diff .jardiff

<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresDefault "modification"
</IfModule> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T12:42:15.443

> 是什么让它以前不能工作，你更新的 jnlp 是什么让它工作的？

问题出在 JNLP 标记中：

快捷方式容器具有属性：online="false"。

这会导致配置桌面快捷方式，以便它使用 -offline 参数运行 javaws，从而使用缓存的 jnlp 运行。

即使您更正服务器上的 jnlp，问题仍然存在，因为本地缓存的 jnlp 仍在被快捷方式使用。

最好的解决方案是指示用户再次从浏览器启动应用程序，因为这将导致 javaws 将客户端上的快捷方式更新为正确的参数设置 - 假设您已修复服务器上的 jnlp。

实际上，没有理由指定此属性，因为默认值为“true”，这将导致预期的行为，但 web 使用 jnlp 标记将其设置为 false。此外，几乎没有关于此属性的文档，这使问题变得更糟。

每

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T13:42:49.147

`<offline-allowed/>`从 JNLP 文件中删除。

> 如果指定了offline-allowed，则应用程序可以通过Java Application Cache Viewer 离线启动，并且可以创建用于离线启动应用程序的快捷方式。
> 
> 如果应用程序离线启动，它不会检查更新，API 调用 BasicService.isOffline() 将返回 true。
> 
> offline-allowed 元素还控制 Java Web Start 如何检查应用程序的更新。如果未指定该元素（即应用程序需要在线运行），Java Web Start 将始终在启动应用程序之前检查更新的版本。如果找到更新，则会下载并启动新应用程序。因此，可以保证用户始终运行最新版本的应用程序。但是，该应用程序必须在线运行。
> 
> 如果指定了offline-allowed，Java Web Start 还将检查是否有可用的更新。但是，如果应用程序已下载，则检查将在几秒钟后超时，在这种情况下，将启动缓存的应用程序。给定一个相当快的服务器连接，通常会运行最新版本的应用程序，但不能保证。但是，该应用程序可以脱机运行。

来源：[http ://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/syntax.html](http://docs.oracle.com/javase/1.5.0/docs/guide/javaws/developersguide/syntax.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-15T09:28:11.977

即使遵循所有建议，这个问题对我来说仍然存在（在 Windows 上使用 Java 8 运行时）。

我通过确保为 JNLP 文件提供服务的网络服务器添加 Last-Modified 标头来解决了这个问题。（我使用了一个嵌入式 Jetty 实例，显然 Jetty 的 ResourceHandler 没有这样做）。我还为 jnlp 添加了过去的到期日期，但我不确定这是否有必要。

我的旧答案可能会有所帮助：我还按照此处的建议将更新标签放在安全标签[之后](https://stackoverflow.com/questions/20220293/jnlp-is-not-updated-even-though-there-is-update-always-policy-always?rq=1)

这样做后，问题似乎暂时消失了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-05T00:37:30.100

我遇到这个问题只是因为我没有让应用程序打开足够的时间来完成更新。

如果您有此选项：在您的 JNLP 中**更新 check="background"**，请等待一段时间，然后关闭应用程序以允许更新（在后台运行）完成。

# c# - 从 ZIP 文件中读取目录

> ID：14876008
> 
> 赞同：1
> 
> 时间：2013-02-14T13:33:26.863
> 
> 标签：c#, sharpziplib

您将如何读取 ZIP 文件中的目录并使用 ICShaZipLib 将其作为本地路径返回？甚至可能吗？

我知道如何从 ZIP 文件中的文件制作流式阅读器，但在那之后我有点卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:47:11.297

也许这可以帮助，

> [SharpZipLib 检查并选择 ZIP 文件的内容](https://stackoverflow.com/questions/8313791/sharpziplib-examine-and-select-contents-of-a-zip-file)

* * *

最近我切换到[DotNetZip](http://dotnetzip.codeplex.com/)，我发现它是一个更容易使用的库。他们有一个广泛[的 C# 示例列表](http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples)。

# java - 想要更新或刷新列表视图

> ID：14876009
> 
> 赞同：0
> 
> 时间：2013-02-14T13:33:30.937
> 
> 标签：java, android, listview

我有如下所示的列表视图

![在此处输入图像描述](../Images/5f468cf21a55c13c01bac3face52d02a.png)

它是一种基于无线电的应用程序

因为当用户点击图像时，将调用 AsyncTask 并播放音乐并获取一些信息，这些信息将替换为 AMIT SIDDHPURA 文本

下面是我的代码

```
 holder.imgPlay.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {

                    new MetadataTask2().execute(holder.txtMetadata);

                            }

    class StreamHolder {
        TextView txtStreamName;
        TextView txtStream;
        TextView txtMetadata;
        ImageView imgPlay;
    } 
```

MetaDataTask2 类代码如下

```
 class MetadataTask2 extends AsyncTask<TextView, Void, IcyStreamMeta> {
    String title_artist;
    TextView txtView;

    @Override
    protected com.example.xmlparsingex.IcyStreamMeta doInBackground(TextView... arg0) {
        txtView = arg0[0];

        return streamMeta;
    }

    @Override
    protected void onPostExecute(IcyStreamMeta result) {
        try {
            txtView.setText("Hiiiiiiiiiii............");
            MCObjectMetadata.cancel();
            MCObjectMetadata = new MyCounterMetadata(10000, 1000);
            MCObjectMetadata.start();

            **adapter.notifyDataSetChanged();
            mainListView.setAdapter(adapter);
            mainListView.invalidate();**

            startService(new Intent(CompaniesList.this, NotifyService.class));

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        try {
            PD = ProgressDialog.show(CompaniesList.this, "Tuning...", "Please Wait...");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

但问题是 listview 没有更新意味着在 listview 中显示的橙色文本没有替换为**Hiiiiiii**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:15:08.660

您实际上需要重新创建适配器而不是调用`notifyDataSetChanged()`. 有关解释，请参阅[此先前的 SO 答案](https://stackoverflow.com/a/5092342/475217)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:57:26.687

如果它是一个 ListView，我更愿意在适配器的 getView() 方法中更改 textview...或者如果列表是光标支持的，那么在 bindView() 中......我不确定你的方法。

# iphone - 媒体声音有时仅在带有 phonegap 的 iphone 上播放

> ID：14876011
> 
> 赞同：2
> 
> 时间：2013-02-14T13:33:39.187
> 
> 标签：iphone, ios, objective-c, cordova, core-audio

我的应用程序在 Android 上完美运行，现在我使用 Adob​​e 的构建来编译应用程序以获取 iPhone 应用程序。我明白了，但有时会重现声音。我关闭应用程序并再次启动，所有声音都正常工作，但其他时候我启动应用程序并再现任何声音。我使用下一个代码：

```
media = new Media(path+'sound.m4a', play, error);                       
media.play(); 
```

我对此感到头疼。请帮帮我。

# php - 简单（可能）PHP 问题

> ID：14876012
> 
> 赞同：-1
> 
> 时间：2013-02-14T13:33:40.517
> 
> 标签：php, image, wordpress, custom-fields

我正在尝试用 PHP 实现几件事，但作为一个相对新手，我有点困惑。

我有一些我想要的自定义字段：

1.  如果它是真的，在它的旁边添加一个图标（例如数字旁边的一个小电话）
2.  确保任何超链接都不会出现在他们的自定义字段表单中，而是作为锚文本，例如 www.site.com 变成超链接文本“网站”。

到目前为止 1\. 我有这样的事情：

```
<?php
$value = get_post_meta( get_the_ID(), 'ecpt_phone', true );
if( $value == 'True' ) {
    echo '<img src="/wp-content/uploads/2013/02/image.png">';
    echo get_post_meta( get_the_ID(), 'ecpt_phone', true );
?> 
```

到目前为止 2\. 结合了这两个问题我有这样的事情：

```
<?php $value = get_post_meta( get_the_ID(), 'ecpt_wesbite', true );
    if ($ecpt_phone, true) {
?>
<h4>
  '<img src="/wp-content/uploads/2013/02/image.png">'
  <a href="'ecpt_website'">Visit Website</a>
</h4>
<?php } else { ?>

    { echo 'display:none;'; }

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:52:47.967

这是一团糟：

*   [`get_post_meta`](http://codex.wordpress.org/Function_Reference/get_post_meta)返回值，因此将其与`'True'`第一个示例中的字符串进行比较没有任何意义；
*   在您的第二个示例中，您正在混合 css 和 html；
*   在您的第二个示例中，您`'`在不应该拥有它们的地方都有字符，例如`'<img src="/wp-content/uploads/2013/02/image.png">'`；
*   在您的第二个示例中，您根本没有在 html 输出中使用元值，它应该类似于`<a href="<?php echo get_post_meta( get_the_ID(), 'ecpt_wesbite', true ); ?>">Visit Website</a>`.

没有冒犯，但你真的应该阅读基本的 html、css 和 php。

# objective-c - UIScrollView 无法正常工作（它返回顶部并且不显示任何滚动条

> ID：14876013
> 
> 赞同：0
> 
> 时间：2013-02-14T13:33:41.090
> 
> 标签：objective-c, uiview, uiscrollview, interface-builder

我正在做一个 iphone 应用程序，其中有几个 UILabel、UITextfields 和 UIButtons。我需要在一个高度为 480px 的屏幕上显示它们，所以我将它们引入到 UIView 中。后来，我创建了一个 UIScroller 来展示它们。

它在接口生成器中的结构是：

*   视图控制器
    *   ---> 查看（不可调整大小，可能是强制性的）
        *   ---> 滚动视图
            *   ---> 查看
                *   ---> 标签
                *   ---> 文本字段

我在“Identity Inspector”（在 Interface Builder 上）中的“User Defined Runtine Attributes”下方设置了 UIScrollView contentsize 和 UIView 框架，并在应用程序运行时在控制台日志中显示它们。似乎没问题，但是当我向下滚动 UIScrollView 并且它的滚动没有显示时，它总是回到顶部。

我在这个论坛上搜索了很多，但没有找到任何解决方案。

有谁能够帮助我？谢谢！

编辑：我在我的代码中添加了这个来显示它们定义的值（uploadView 是 scrollView 中的视图）

```
- (void) viewDidLoad {
//....  
[super viewDidLoad];
    CGSize size = scrollView.contentSize;
CGRect viewrect = uploadView.frame;
CGSize viewsize = viewrect.size;
NSLog (@"size of scrollView: height= %f and width= %f", size.height, size.width);
NSLog (@"size of uploadView: height= %f and width= %f", viewsize.height, viewsize.width); 
```

}

输出是：

```
size of scrollview: height= 600.000000 and width= 320.0000000
size of uploadview: height= 600.000000 and width= 320.0000000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:05:51.490

如果没有任何代码，很难准确判断您的问题是什么，但您可以尝试在代码中设置内容大小：

> scrollView.contentSize = view.size

view 是滚动视图中的 UIView

```
•---> Scrollview 
    •---> View 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T13:12:49.460

好吧，我一直在寻找任何答案，并且找到了解决方案。

[我无法使用“圆形矩形按钮”或标签等对象正确滚动滚动视图](https://stackoverflow.com/questions/14417858/i-cant-get-my-scrollview-to-scroll-correctly-with-objects-such-as-round-rect-b)

总结一下，使用 viewDidAppear 方法

```
- (void)viewDidAppear:(BOOL)animated {
  [super viewDidAppear:animated];

  [scrollview setScrollEnabled:YES];
  [scrollview setContentSize:CGSizeMake(320, 600)];
} 
```

# html - iOS6 Web 应用程序的最大缓存大小是多少，如何扩展它？

> ID：14876018
> 
> 赞同：6
> 
> 时间：2013-02-14T13:33:50.193
> 
> 标签：html, ios6, html5-appcache, cache-manifest

我正在为 iPad（运行 iOS 6+）构建一个 web 应用程序，显示公司的产品集合。

这一切都使用 HTML5 的“cache.manifest”文件完美运行。但由于缓存已增长到大约 50MB，iPad 不再保存应用程序数据。根据 Safari 设置，缓存大小现在是 0.1KB，而不是 50MB。

那么 Safari 对 Web 应用程序缓存的实际限制是多少？有没有办法扩大应用程序缓存的最大数量？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T18:27:29.207

2014 年 6 月 2 日编辑：iOS7.1 上的最大缓存大小为 300Mb。

最近一个客户问了我这个确切的问题，所以我进行了调查。

**根据 IOS6**（我所有的测试都在**iOS6.1**上完成），这是两件不同的事情：

*   使用 .manifest 的网站，可通过移动 Safari 访问
*   从网站创建的主屏幕上的 webapp

带有 .manifest 的网站可以使用最多 50mb 的缓存，但需要用户许可。它不能使用更多。这个值可以在settings/safari/advanced中找到并清除。如果您尝试在缓存中填充更多内容，`error`则会触发一个事件并且该事件将变为`window.applicationCache.status`空闲状态。

**webapp 与其网站不共享相同的缓存。**清除缓存设置/safari/advanced 不会为您的主屏幕 webapp 做任何事情。它会在没有用户输入的情况下接受超过 50mb 的缓存，但我不知道具体有多少（我用 60mb 测试成功，完全可以离线访问。*编辑：用 83mb 尝试，成功）我不知道这些数据在哪里可以在 iOS 设置中看到。估计无处可去。

[在我找到规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html)之前，测试这是一个痛苦的 *** 。有一个在 iOS6 上完美运行的 API。
您应该检查一下`window.applicationCache.status`，它会告诉您应用程序的状态是什么，以及以下事件（从我的代码中剪切和粘贴，因此使用他们的侦听器）：

```
window.applicationCache.addEventListener('checking', onChecking);
window.applicationCache.addEventListener('noupdate', onNoupdate);
window.applicationCache.addEventListener('downloading', onDownloading);
window.applicationCache.addEventListener('progress', onProgress);
window.applicationCache.addEventListener('cached', onCached);
window.applicationCache.addEventListener('updateready', onUpdateready);    
window.applicationCache.addEventListener('obsolete', onObsolete);
window.applicationCache.addEventListener('error', onError); 
```

所有人都在 iOS 6.1 上工作，即使`progress`是`event.loaded`和`event.total`

Web 应用程序首先检查，然后`noupdate`在 .manifest 相同时触发。状态为`IDLE`。

如果 .manifest 更改，状态为`DOWNLOADING`，`progress`则为清单中的每个文件触发事件，然后状态为`UPDATEREADY`并`updateready`触发。

如果您处于离线状态，则会触发一个`error`事件并且状态为`IDLE`。

您可以使用以下命令测试在线/离线状态

```
var online = navigator.onLine ? 'online' : 'offline'; 
```

它有效，但规格说它不可靠。

还有三件事要完成：

*   我的清单被命名为 cache.manifest 并像这样声明`<html manifest="cache.manifest">`
*   我的 .htaccess 有`AddType text/cache-manifest manifest`和`ExpiresByType text/cache-manifest "access plus 0 seconds"`
*   我的应用有`<meta name="apple-mobile-web-app-capable" content="yes">`

使用此 API，可以更轻松地了解幕后发生的事情。不过一定要自己做测试，我不能 100% 确定这个结果，或者他们可以使用新的 iOS 版本。我将进一步测试最大尺寸。

# jquery - JQuery Validate - 使用函数重置表单，resetForm() 不起作用

> ID：14876019
> 
> 赞同：1
> 
> 时间：2013-02-14T13:33:55.633
> 
> 标签：jquery, jquery-validate

我正在使用 JQuery Validator，我在 stackoverflow 中看到了许多解决方案，将所有验证放在“var”中，然后使用这个“var”.resetForm() 重置对象，但这不起作用，这是我的[JSFiddle](http://jsfiddle.net/markuspxpx/NhWHX/)以我为例。

**我后来的打算：**使用相同的表单，两种类型的块，里面有不同的输入，当其中一个块发生变化时，我调用一个方法来重置验证，这样我可以在尝试提交时再次重用验证。

```
 var validate = $('#cad_principal').validate({
      errorLabelContainer: $('.form_validate_message'),
      wrapper:'li',
      rules:{
        cad_pf_cpf:{required:true, minlength:11}
      },
      messages:{
        cad_pf_cpf:{required:"O campo CPF precisa ser preenchido.", minlength:"O campo CPF deve conter no mínimo 11 caracteres."}
      },
      submitHandler: function(form) {
        $(form).submit();
      }
  });

function cancelForm(){
    validate.resetForm();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:52:11.180

您尝试调用的函数 ( `cancelForm()`) 不存在。尝试这个：

```
$(function() {  
    var validate = $('#cad_principal').validate({
        errorLabelContainer: $('.form_validate_message'),
        wrapper:'li',
        rules:{
            cad_pf_cpf:{required:true, minlength:11}
        },
        messages:{
            cad_pf_cpf:{required:"O campo CPF precisa ser preenchido.", minlength:"O campo CPF deve conter no mínimo 11 caracteres."}
        },
        submitHandler: function(form) {
            $(form).submit();
        }
    });

    $('#cad_principal a').click(function() { validate.resetForm(); });
}); 
```

基本上，您需要将代码包装在 DOMReady 事件中，然后使用事件绑定来连接表单。请记住，`validate`只有当 DOM 准备好时才会包含一个变量。这是一个[**有效的 jsFiddle**](http://jsfiddle.net/NhWHX/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:52:40.747

*   如前所述，`cancelForm()`尚不存在。将所有内容包装在 DOM 就绪事件处理函数中。

*   其次，您使用的是 jQuery，因此内联 JavaScript 可以简单地替换为`click`使用 jQuery 的[`.on()`方法](http://api.jquery.com/on/)的处理程序。

*   最后，您不需要`form.submit()`在`submitHandler`. 这是多余的，因为通过省略您的自定义`submitHandler`回调，您将获得`submit()` [插件默认的](http://docs.jquery.com/Plugins/Validation/validate#toptions).

我还在处理程序中添加了一个`$('form').get(0).reset();`以`cancel` `click`清除表单内容。 [根据文档](http://docs.jquery.com/Plugins/Validation/Validator/resetForm)，`resetForm()`这需要另一个插件...

> 重置受控表单。
> **将输入字段重置为其原始值（需要表单插件）**，删除指示无效元素的类并隐藏错误消息。

* * *

尝试这个：

**jQuery** :

```
$(document).ready(function () {

    var validate = $('#cad_principal').validate({
        errorLabelContainer: $('.form_validate_message'),
        wrapper: 'li',
        rules: {
            cad_pf_cpf: {
                required: true,
                minlength: 11
            }
        },
        messages: {
            cad_pf_cpf: {
                required: "O campo CPF precisa ser preenchido.",
                minlength: "O campo CPF deve conter no mínimo 11 caracteres."
            }
        }
    });

    $('#cancel').on('click', function (e) {
        e.preventDefault();
        validate.resetForm();
        $('form').get(0).reset();
    });

}); 
```

**HTML**：

```
<div class="form_validate_message"></div>
<form id="cad_principal" method="post">
    <input type="text" name="cad_pf_cpf" />
    <input type="submit" />
    <br />
    <a id="cancel" href="#">cancel</a>
</form> 
```

**工作演示：http: [//jsfiddle.net/rnryw/](http://jsfiddle.net/rnryw/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-17T12:56:29.020

如果没有任何效果，请尝试这种方法（特别是用于清除数据目的）：

1-表单html：

```
<input type='reset' class="button_grey resetForm" value='Reset'> 
```

2-jQuery 验证

```
// you can add error fields
var validator = $("#cad_principal").validate({
      focusCleanup: true
}); 
```

3- 重置表格

```
$('[type="reset"]').on('click', function(){ 
      $("#cad_principal").closest('form').find("input[type=text], textarea").val(""); 
      $('input:checkbox').removeAttr('checked'); 
      validator.resetForm(); 
      return false;
}); 
```

# html - 适合不同高度的浮动div？

> ID：14876020
> 
> 赞同：0
> 
> 时间：2013-02-14T13:33:56.913
> 
> 标签：html, css, layout, multiple-columns

我在这里有一个简单的演示来说明我的问题。

[http://www.ttmt.org.uk/forum/index.html](http://www.ttmt.org.uk/forum/index.html)

这是 div 的响应式布局，浮动以创建 3 列。

div 有不同的高度，所以当一个 div 出现在一个更高的 div 之后时，它会被向下推到下一列，例如。页眉 3 和页眉 4。

是否可以将不同高度的div组合在一起。

我在这里有图像来说明所需的布局。只要它们组合在一起，div 的顺序就无关紧要。

[http://www.ttmt.org.uk/forum/1.png](http://www.ttmt.org.uk/forum/1.png)

提前感谢蚂蚁的帮助。

```
 <!DOCTYPE html>
    <html>
      <meta charset="UTF-8">
      <title>Title of the document</title>

      <style type="text/css">
        *{
          margin:0;
          padding:0;
        }

        body{
            font:10px 'Source Sans Pro', sans-serif;
            font-size:100%;
            font-size:1.02em;
            color:#555;
        }
        #pageWrap{
            max-width:1135px;
            margin:0 auto;
            border-left:40px solid white;
            border-right:40px solid white;
        }

        /*---------------------
            sec-sevice
        ----------------------*/    
        #sec-service{
            padding:0 0 230px 3.52422907488987%;
            margin:30px 0 0 0;
        }

        #sec-service .service{
            float:left;
            width:29.68036529680365%;
            background:#ccc;
            margin:0 3.65296803652968% 6px 0;
        }
        .service h3{
            font-weight:700;
            font-size:1.1em;
            padding:10px 0;
        }
        .service p{
            padding:0 0 10px 0;
            margin:0 0 10px 0;
        }

        /*---------------------
            Media queries
        ----------------------*/
        @media only screen and (max-width:880px){

            #sec-intro p,
            #sec-service .service{
                width:100%;
                float:none;
            }
        }

      </style>

      </head>

    <body>

      <div id="pageWrap">

        <section id="sec-service" class="group">

          <div id="serviceText" class="group">

            <div class="service">
              <h3>Heading 1</h3>
              <p>
               Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
               Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
              </p>
            </div>

            <div class="service">
              <h3>Heading 2</h3>
              <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure 
              </p>
            </div>

            <div class="service">
              <h3>Heading 3</h3>
              <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure 

              </p>
            </div>

            <div class="service">
              <h3>Heading 4</h3>
              <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

              </p>
            </div>

            <div class="service">
              <h3>Heading 5</h3>
              <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
              </p>
            </div>

            <div class="service">
              <h3>Heading 6</h3>
              <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

              </p>
            </div>

            <div class="service">
              <h3>Heading 7</h3>
              <p>
                Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in 
              </p>
            </div>

          </div>

        </section>  

      </div><!-- #pageWrap -->

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:15:37.293

正如 Aspiring Aqib 所提到的，您可以使用 Masonry jQuery 插件。

但是你也可以用一个简单的 CSS 模式来做到这一点：

**HTML**

```
<div class="column">
    <div class="box">1 Lorem Ipsum</div>
    <div class="box">4 Lorem Ipsum Lorem</div>
    <div class="box">7 Lorem Ipsum</div>
</div>
<div class="column">
    <div class="box">2 Lorem Ipsum Lorem Ipsum</div>
    <div class="box">5 Lorem Ipsum</div>
    <div class="box">8 Lorem Ipsum</div>
</div>
<div class="column">
    <div class="box">3 Lorem Ipsum</div>
    <div class="box">6 Lorem Ipsum</div>
</div> 
```

**CSS**

```
.box { 
    width: 50px;
    min-height: 50px;
    background: #ccc;
    margin: 3px;
    padding: 3px;
    float: left;
}
.column {
    width:60px;
    float: left;
} 
```

[在这里工作 jsFiddle](http://jsfiddle.net/krish/YmU6J/2/)

# java - 如何识别纯对等系统中的节点？

> ID：14876029
> 
> 赞同：0
> 
> 时间：2013-02-14T13:34:22.517
> 
> 标签：java, networking, p2p

有一个问题我找不到解决方案：

> 如何识别纯对等系统中都运行相同应用程序 Foobar 的节点？

![在此处输入图像描述](../Images/22e1488849e33c6d2b295328284bdd1b.png)

在上图中，我们假设所有节点都运行同一个基于*[纯对等网络](http://en.wikipedia.org/wiki/Peer-to-peer#Architecture_of_P2P_systems)的应用程序。*

*注意：*我在 Java 中标记了这个，因为这是我想要使用的语言。而不是引用已经这样做的库的名称，请解释我如何进行搜索的算法/方式。我想了很多但不知道如何进行搜索？为了了解什么是纯 p2p 系统，我想编写一个基于反映纯 p2p 系统的小应用程序。它可以是一个简单的聊天应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:46:14.743

如果您询问如何找到节点，那么这就是目录服务的用途 - 节点在这些服务器上注册自己。

如果您询问应如何命名节点 - GUID 可以正常工作，或者您可以再次使用目录服务进行命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T12:46:40.943

如上所述，目录服务在种子网络等 p2p 网络中很受欢迎。

对于更“纯”的 p2p，您可以阅读有关[Gnutella](https://en.wikipedia.org/wiki/Gnutella)项目的信息。

> ...在初始启动时，客户端软件必须引导并找到至少一个其他节点。为此使用了各种方法，包括软件附带的可能工作节点的预先存在的地址列表、使用已知节点的更新 Web 缓存（称为 Gnutella Web 缓存）、UDP 主机缓存，甚至很少使用 IRC。

其他一些解决方案可能涉及同一网络 p2p 的*多播*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:45:00.620

这取决于您的应用程序的规模。在 LAN 上，这很简单：您广播您的存在（通常通过预先确定的多播地址）。

在更大的 Internet 上，路由器会阻止广播和多播流量，因此无法宣布您的存在。相反，您需要至少一个对等点作为种子，以发现其他对等点。随着每个对等方了解其他人，它与他们交换知识。

# wpf - 在 WPF 树视图中按年、月和日期对日期进行分组

> ID：14876032
> 
> 赞同：0
> 
> 时间：2013-02-14T13:34:44.933
> 
> 标签：wpf, treeview

我有以下课程：

```
public class BankingEntry
{
    private DateTime entryDate;
    public DateTime EntryDate { get { return entryDate; } }
} 
```

我想将 ObservableCollection<BankingEntry> 对象绑定到 WPF TreeView 的 ItemsSource 并让项目显示在以下树结构中：

- -年

- - - 月

- - - - -天

因此，如果我的收藏有 3 个条目的条目日期分别为 2012-12-30、2012-12-31 和 2013-01-01，如果将获得以下树视图结构：

---2012

------12

---------30

---------31

---2013

------01

---------01

理想情况下，我希望树视图在从集合中添加或删除项目时自动更新。对象的日期永远不会改变，所以我不必担心更新。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T00:47:26.460

有点老的问题，但有同样的问题，这就是我最终做的

*创建了一个 IHierarchy 界面*

```
interface IHierarchy<T>
{
    T Value { get; set; }

    IEnumerable<IHierarchy<T>> Children { get; set; }

    int Level { get; set; }
} 
```

*然后是日期的层次结构的实现*

```
private class DateHierarchy : IHierarchy<DateTime>
{
    public DateTime Value { get; set; }

    public IEnumerable<IHierarchy<DateTime>> Children { get; set; }

    public int Level { get; set; }
} 
```

*一种从日期列表构建日期的方法*

```
private void BuildDates()
{
    var start = new DateTime(2010, 01, 01);

    var end = new DateTime(2015, 12, 31);

    var dates = new List<DateTime>();

    for (var date = start; date <= end; date = date.AddDays(1))
    {
        dates.Add(date);
    }

    var d = from date in dates
            group date by date.Year into year
            select new DateHierarchy
            {
                Level = 1,
                Value = new DateTime(year.Key, 1, 1),
                Children = from date in year
                            group date by date.Month into month
                            select new DateHierarchy
                            {
                                Level = 2,
                                Value = new DateTime(year.Key, month.Key, 1),
                                Children = from day in month
                                            select new DateHierarchy
                                            {
                                                Level = 3,
                                                Value = day,
                                                Children = null
                                            }
                            }
            };

    Dates = new ObservableCollection<IHierarchy<DateTime>>(d);
} 
```

*最后在`xaml`*

```
<TreeView ItemsSource="{Binding Dates}"
          SelectedItemChanged="TreeView_SelectedItemChanged">
    <TreeView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding Children}">
            <TextBlock x:Name="Date" />
            <HierarchicalDataTemplate.Triggers>
                <DataTrigger Binding="{Binding Level}" Value="1">
                    <Setter TargetName="Date" Property="Text" Value="{Binding Value, StringFormat=yyyy}" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Level}" Value="2">
                    <Setter TargetName="Date" Property="Text" Value="{Binding Value, StringFormat=MMMM}" />
                </DataTrigger>
                <DataTrigger Binding="{Binding Level}" Value="3">
                    <Setter TargetName="Date" Property="Text" Value="{Binding Value, StringFormat=dd/MM/yy}" />
                </DataTrigger>
            </HierarchicalDataTemplate.Triggers>
        </HierarchicalDataTemplate>
    </TreeView.ItemTemplate>
</TreeView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-01T21:40:47.453

TI 的上述答案很棒，为我节省了很多时间。像我一样，为任何可能需要方法语法而不是查询语法的人发布更新。

```
var d = dates.GroupBy(date => date.Year)
            .Select(year => new DateHierarchy
            {
                Level = 1,
                Value = new DateTime(year.Key, 1, 1),
                Children = year.GroupBy(date => date.Month)
                    .Select(month => new DateHierarchy
                    {
                        Level = 2,
                        Value = new DateTime(year.Key, month.Key, 1),
                        Children = month.GroupBy(date => date.Day)
                            .Select(day => new DateHierarchy
                            {
                                Level = 3,
                                Value = new DateTime(year.Key, month.Key, day.Key),
                                Children = null
                            })
                    })
            }); 
```

我还需要按星期几对项目进行分组。为此，您可以使用*CultureInfo.CurrentCulture.Calendar.GetWeekOfYear()*以及*ISOWeek.ToDateTime()*，如下所示。

```
var d = dates.GroupBy(date => date.Year)
            .Select(year => new DateHierarchy
            {
                Level = 1,
                Value = new DateTime(year.Key, 1, 1),
                Children = year.GroupBy(date => date.Month)
                    .Select(month => new DateHierarchy
                    {
                        Level = 2,
                        Value = new DateTime(year.Key, month.Key, 1),
                        Children = month.GroupBy(date => CultureInfo.CurrentCulture.Calendar.GetWeekOfYear(date, CalendarWeekRule.FirstDay, DayOfWeek.Sunday))
                            .Select(week => new DateHierarchy
                            {
                                Level = 3,
                                Value = ISOWeek.ToDateTime(year.Key, week.Key, DayOfWeek.Sunday),
                                WeekOfYear = week.Key,
                                Children = week.GroupBy(date => date.Day)
                                    .Select(day => new DateHierarchy
                                    {
                                        Level = 4,
                                        Value = new DateTime(year.Key, month.Key, day.Key),
                                        Children = null
                                    })
                            })
                    })
            }); 
```

现在要正确构建和显示，您需要在*DateHierarchy*类中添加*WeekOfYear*属性，并在 xaml中添加适当的*DataTrigger*

# android - 背景尺寸：封面在 Android 平板电脑上无法纵向工作

> ID：14876035
> 
> 赞同：51
> 
> 时间：2013-02-14T13:34:56.460
> 
> 标签：android, css, google-chrome, cover, background-size

我正在将该`background-size`属性用于全宽和全高背景图像，但在纵向视图的 Nexus7 平板电脑上的 Chrome 中无法完全覆盖它。它只覆盖宽度而不是高度，即`200px`它下面大约有空白区域。但是，当我在桌面 Chrome（或其他任何东西）和垂直显示器上查看该站点以模拟纵向尺寸时，它没有任何问题。

有人有解决方案吗？

**CSS：**

```
html { 
    background: url(/images/post_bg.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
    -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/images/post_bg.jpg', sizingMethod='scale')";
} 
```

**纵向屏幕截图：**

![](../Images/13eb41ae1140c25d1e501c765d465dc6.png)

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-10-18T14:47:04.347

我相信您可以通过在 CSS 中定义 html 和 body 标签的高度来修复它，如下所示：

```
html{
 height:100%;
 min-height:100%;
 }
body{
 min-height:100%;
 } 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-10-25T16:02:07.787

我知道这个问题已经很久没有问过了，但我只是找到了我认为的答案。对我来说，如果你在后台 CSS 指令中省略了“fixed”，那么 background-size:cover 可以在 Android 浏览器和 Android Chrome 中使用。经过一些测试，它适用于我将图像作为 DIV 的背景：

```
#yourDivSelectorHere { 
width: 100%;
height: 100%;  
position: fixed;
top: 0;
left: 0;
z-index: 0; 
background-image: url(/img/backgrounds/1.jpg) ;
background-repeat:no-repeat;
background-position: center center;
/* background-attachment: fixed; removed for Android */
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover; 
```

}

DIV 本身的位置是固定的（与背景图像相反），宽度和高度为 100%，并且放置在所有内容的后面。与仅将背景图像添加到 HTML 或 BODY 相比，这需要付出一些额外的努力，但对我来说，它适用于我迄今为止测试过的所有浏览器（FF、Chrome、IE8、IE9、Safari）、iPad2 和 Android Chrome 以及安卓浏览器。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-15T12:29:09.127

我将提供我找到的解决方案，以防将来有人遇到这种情况。我没有使用背景图片，而是使用了`<img>`：

**HTML：**

```
<img id="full_bg" src="/images/post_bg.jpg" alt="Post your project on CustomMade"> 
```

**CSS：**

```
#full_bg {
    height: auto;
    left: 0;
    min-height: 100%;
    min-width: 1024px;
    position: fixed;
    top: 0;
    width: 100%;
}

@media screen and (max-width: 1024px) {
    #full_bg {
        left: 50%;
        margin-left: -512px;
    }
} 
```

这适用于跨浏览器和移动设备。我在[这里](http://css-tricks.com/perfect-full-page-background-image/)找到了解决方案。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-09-01T17:52:29.580

好吧，我可以想出另一个解决方案：我将它添加到正文中，您需要注意的是， background-attachment:fixed 是最后一条规则：

作品：

```
body {
        height:100%;
        width:100%;
        background-size:cover;
        background-repeat:no-repeat;
        background-position: center center;
        background-attachment:fixed;
} 
```

不工作：

```
body {
            height:100%;
            width:100%;
            background-size:cover;
            background-attachment:fixed;
            background-repeat:no-repeat;
            background-position: center center;
} 
```

真的很遗憾，电话浏览器一般来说有点儿马车......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-20T18:44:47.127

使用 HTML 背景而不是正文并给出“高度：100%”

```
html {
    height:100%;
    background: url(bg.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-24T06:28:48.493

我发现了另一种使用 jquery 东西的解决方案。该修复基于我们使用横向尺寸/比例的图像作为背景的假设。

step1：比较“窗口高度”和“页面内容高度”

step2：如果“窗口高度”小于“页面内容高度”

step3：将此应用于body标签

**HTML** {

```
<body style="background-size: auto 'page content height'; background-attachment: scroll;"> 
```

}

**脚本**

```
var wHeight = $(window).height();
    var bodyHeight = $('page-content-element').height();
    if(wHeight < bodyHeight){
        $('body').attr('style', 'background-size: auto '+ (bodyHeight*1.1) +'px;background-attachment: scroll;');
    }
    else{
        $('body').removeAttr('style');
    } 
```

在页面加载和窗口调整大小时调用它

# c++ - 无法在 C++ 中遍历我的链表

> ID：14876036
> 
> 赞同：0
> 
> 时间：2013-02-14T13:35:00.910
> 
> 标签：c++, linked-list, singly-linked-list

我已经为此工作了一段时间，但我似乎无法弄清楚如何正确地遍历我的链表。现在，我可以运行程序，它运行了，但我没有从链表中得到任何结果。这是我到目前为止的代码，这是应该发生的。![在此处输入图像描述](../Images/7e7f998ae2a82c4e64456f87a9f045ba.png)

这是我的结果。![在此处输入图像描述](../Images/0830362620cb9ccf94a5cde764c728dc.png)但这也立即崩溃

```
#ifndef LList_h
#define LList_h

#include <iostream>
#include "node.h"

class LList
{
public:
    LList(void);            //constructor
    LList(const LList &);   //copy constructor
    ~LList();           //destructor

    LList *next;            //points to next node
    void push_back(const string &str);
    void push_front(const string &str);
    friend ostream& operator<<(ostream& out, const LList& llist);
    LList &operator=(const LList &l);       
private:
    Node *_head;
    Node *_tail;

    string _str;
};

inline LList::LList(void) {
    cerr << "head = tail = 0 at 0024f8d0\n";

    _head = 0;
    _tail = 0;
}

inline void LList::push_back(const string &_str) {
    Node *p = new Node(_str);
    if (_tail == 0) {
        _tail = p;
    } else {
        _tail ->next(p);
        _tail = p;
    }        
}

inline void LList::push_front(const string &_str) {
    Node *p = new Node(_str);

    if (_head == 0) {
        _head  = p;
    } else {
        _head ->next(p);
        _head = p;
    }
}

ostream &operator <<( ostream &out, const LList & llist ) {
    for( LList *p = llist.front; p != 0; p = p -> next )
        out << p;

    return out;
}

LList & LList::operator=(const LList &l) {
    _head = 0;
    _tail = 0;

    return *this;
}
#endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:39:24.757

看来您的原始代码可能存在多个问题。鉴于上面的讨论和一些回应，我建议从更简单的开始。让它发挥作用，然后逐渐扩展它，直到你拥有最初的目标。

我将首先实现一个非常简单的单链表而不使用类。定义一个结构，其中包含一个指向相同类型结构的指针和一个数据字段（可能只是一个整数）。

创建此结构的三个左右变量并将它们链接在一起，以便第一个指向第二个，第二个指向第三个，第三个指向 NULL（通过它可以识别列表的末尾）。

然后演示遍历列表。C中一个非常常见的习语如下：

```
for (ptr = &first; ptr; ptr = ptr->next)
{
   printf("%p %d\n", ptr, ptr->data);
} 
```

确保你理解它为什么起作用，并用它来熟悉指针和链表是如何工作的。练习使用调试器单步执行您的列表，并确保您了解当您到达列表末尾时循环如何终止。

一旦你对此感到满意，一定要把它包装在一个类中，并添加诸如 push_back() 和 push_front() 之类的方法，并重载一些运算符。

但请确保您首先掌握了基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:08:27.517

函数有什么`Node::next(Node *p)`作用？如果它将下一个字段设置为`this`to ，那么您的函数中`p`的这段代码可能是错误的：`push_front`

```
else
{
    _head ->next(p);
    _head = p;
} 
```

而是应该：

1.  设置`p.next`为`_head`. （头现在跟随`p`）
2.  设置`_head`为`p`. （新头是`p`）

# jquery - 将第一个子元素设置为非活动状态

> ID：14876037
> 
> 赞同：0
> 
> 时间：2013-02-14T13:35:00.957
> 
> 标签：jquery

嗨，有这个代码，我想关闭第一个手风琴。关于如何使其工作的任何意见？

```
jQuery(document).ready(function() {
jQuery('.accordion .container').hide();
jQuery('.accordion .trigger:first-child').addClass('active').next().show();

jQuery('.accordion .trigger').click(function() {
    if(jQuery(this).next().is(':hidden')) {
        jQuery(this).parent().find(".trigger").removeClass('active').next().slideUp('fast');
        jQuery(this).toggleClass('active').next().slideDown('fast');
    }
    return false;
}); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:36:25.553

改变这个：

```
jQuery('.accordion .trigger:first-child').addClass('active').next().show(); 
```

到：

```
jQuery('.accordion .trigger').first().removeClass('active').hide().next().addClass('active').show(); 
```

# routes - 文字和段路由有什么区别？

> ID：14876043
> 
> 赞同：12
> 
> 时间：2013-02-14T13:35:10.147
> 
> 标签：routes, zend-framework2

我在 zend 框架 2 中工作，我对所有路由都使用了段类型，但我注意到在 zend 骨架应用程序中使用了文字路由类型。这些是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-25T04:31:47.793

我猜 Umair 真正要问的是，当分段路由已经涵盖此功能时，字面路由的目的是什么。

用几句话来解释它；段路由使用生成的正则表达式对输入进行相当复杂的匹配，而文字路由将进行简单的字符串比较。这使它更快，并且在不需要参数匹配时应该是首选。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-21T03:10:08.143

文字路线似乎适用于一次性页面，如下面的基本示例：

```
'router' => array(
    'routes' => array(
        'home' => array(
            'type' => 'Literal',
            'options' => array(
                'route' => '/home',
                'defaults' => array(
                    'controller' => 'homeController',
                    'action' => 'index',
                )
            )
        )
    )
) 
```

对于那些不熟悉分段路线的人。这些是动态的，并将 URL 段传递给控制器​​。这个例子来自 Zend Framework 2 Getting Started Tutorial

```
'router' => array(
    'routes' => array(
        'album' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/album[/:action][/:id]',
                'constraints' => array(
                    'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                    'id'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Album\Controller\Album',
                    'action'     => 'index',
                ),
            ),
        ),
    ),
), 
```

该`action`段将转到具有该名称的控制器中的函数。所以一个类似的URL`/album/edit/2`将转到`editAction()`. 可以在控制器中通过多种方式访问`AlbumController`​​。`id`

```
$id = $this->params()->fromRoute('id'); 
```

或者

```
$id = $this->getEvent()->getRouteMatch()->getParam('id'); 
```

# android - ListView（Android）中的标签混乱

> ID：14876046
> 
> 赞同：0
> 
> 时间：2013-02-14T13:35:28.273
> 
> 标签：android, listview, baseadapter, custom-adapter

我正在尝试实现一个片段，该片段包含一个绑定到自定义适配器的 ListView。基本上，一行如下所示： TextViewName ButtonPlus TextViewMarker ButtonMinus ButtonRemove 加号和减号按钮改变 TextViewMarker 显示的数字。ButtonRemove 从列表中删除一行。最后，有一个按钮可以在列表中添加新项目。一切似乎都很好，因为我可以在运行时添加和删除项目并更改标记的数量。不幸的是，如果我删除一个项目，列表中的下一个项目将采用已删除项目的标记数。就像 ViewHolder 仍然在同一个地方并且下一个项目刚刚更改了他的标签一样。当列表为空时我遇到同样的问题，如果我添加一个新项目，它将显示列表中最后一个项目的标记数......

这是代码：

```
public class MarkerFragment extends Fragment
{
    private MarkerAdapter mAdapter = null;
    private EditText mAddItemEditText = null;
    private MainActivity mParent = null;

    public MarkerFragment(MainActivity parent){mParent = parent;}

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        View view = inflater.inflate(R.layout.fragment_marker, null);

        Button b = (Button) view.findViewById(R.id.buttonAddItem);
        b.setOnClickListener(new ClickListener(this));

        mAddItemEditText = (EditText) view.findViewById(R.id.editTextItem);

        mAdapter = new MarkerAdapter(this, mParent);
        ListView listView = (ListView) view.findViewById(R.id.markerList);
        listView.setAdapter(mAdapter);

        return view;
    }

    public void addItem(String name)
    {
        mAdapter.addItem(name);
    }

    public void removeItem(int position)
    {
        mAdapter.removeItem(position);
    }

    static class ViewHolder
    {
        TextView name;
        TextView markers;
        int position = -1;
    }

    private class MarkerAdapter extends BaseAdapter
    {
        private MarkerFragment mParent;
        private LayoutInflater mInflater;
        private ArrayList<String> mList;

        public MarkerAdapter(MarkerFragment parent, Context context)
        {
            super();

            this.mParent = parent;
            mInflater = LayoutInflater.from(context);

            mList = new ArrayList<String>();
            mList.add("item1");
            mList.add("item2");
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent)
        {
            ViewHolder holder;

            if(convertView == null)
            {
                convertView = mInflater.inflate(R.layout.marker_row, null);
                holder = new ViewHolder();

                holder.name = (TextView) convertView.findViewById(R.id.textViewRowName);
                holder.markers = (TextView) convertView.findViewById(R.id.textViewMarker);

                holder.markers.setText("0");

                Button b = (Button) convertView.findViewById(R.id.buttonPlus1Marker);
                b.setRotation(180);
                b.setOnClickListener(new ClickListener(this.mParent));

                b = (Button) convertView.findViewById(R.id.buttonMinus1Marker);
                b.setOnClickListener(new ClickListener(this.mParent));

                b = (Button) convertView.findViewById(R.id.buttonRemoveMarker);
                b.setOnClickListener(new ClickListener(this.mParent));

                convertView.setTag(holder);
            }
            else
            {
                holder = (ViewHolder) convertView.getTag();
            }

            holder.name.setText(mList.get(position));
            holder.position = position;

            return convertView;
        }

        public void addItem(String name)
        {
            mList.add(name);
            this.notifyDataSetChanged();
        }

        public void removeItem(int position)
        {
            mList.remove(position);
            this.notifyDataSetChanged();
        }

        @Override
        public int getCount()
        {
            return mList.size();
        }

        @Override
        public Object getItem(int position)
        {
            return mList.get(position);
        }

        @Override
        public long getItemId(int position)
        {
            return position;
        }
    }

    private class ClickListener implements OnClickListener
    {
        private StringBuilder sb = new StringBuilder();
        private MarkerFragment mParent = null;

        public ClickListener(MarkerFragment parent)
        {
            mParent = parent;
        }

        @Override
        public void onClick(View v)
        {
            switch(v.getId())
            {
            case R.id.buttonAddItem:
                addItem();
                break;
            case R.id.buttonMinus1Marker:
                alterMarkerNumber(v, -1);
                break;
            case R.id.buttonPlus1Marker:
                alterMarkerNumber(v, 1);
                break;
            case R.id.buttonRemoveMarker:
                removeItem(v);
                break;
            default:
                break;
            }
        }

        private void alterMarkerNumber(View v, int point)
        {
            View row = (View) v.getParent();
            ViewHolder holder = (ViewHolder) row.getTag();
            int markers = Integer.parseInt(holder.markers.getText().toString()) + point;
            sb.delete(0, sb.capacity()).append(markers);
            holder.markers.setText(sb.toString());
            mAdapter.notifyDataSetChanged();
        }

        private void addItem()
        {
            String name = mAddCardEditText.getText().toString();
            if(name.length() > 0)
            {
                name = name.replace("'", " ").replace("\"", " ");
                mAddItemEditText.setText("");
                this.mParent.addItem(name);
            }
        }

        private void removeItem(View v)
        {
            View row = (View) v.getParent();
            ViewHolder holder = (ViewHolder) row.getTag();
            if(holder.position != -1)
            {
                this.mParent.removeItem(holder.position);
            }
        }
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T09:38:22.213

通过实现 ArrayAdapter 而不是 BaseAdapter，问题就消失了。

# ios - 如何在Objective C中获取运行时正在执行的行号

> ID：14876048
> 
> 赞同：0
> 
> 时间：2013-02-14T13:35:31.453
> 
> 标签：ios, objective-c

我正在开发一个应用程序，其中我需要当前在运行时执行的方法的行号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:44:33.697

你没有说为什么你想要行号，但由于 Objective-C 是 C 的超集，你可以使用`__LINE__`预定义的宏（对预定义的宏很有用`__FILE__`）来执行诸如日志记录之类的事情：

```
NSLog(@"Hi!  I'm at %s:%u", __FILE__, __LINE__); 
```

您可能还会发现`__FUNCTION__`预定义的宏也很有用：

```
NSLog(@"Hi!  I'm in method %s at %s:%u", __FUNCTION__, __FILE__, __LINE__); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:37:06.070

如果我理解正确：构建分析，然后分析（仪器应该启动）然后使用 Apple 的`System Trace`工具！祝你好运！

# dynamics-crm-2011 - 强制为 Dynamics CRM 2011 中的查阅字段创建新记录

> ID：14876051
> 
> 赞同：0
> 
> 时间：2013-02-14T13:35:46.973
> 
> 标签：dynamics-crm-2011

在 N:1 关系中，我在 N 侧有一个查找字段，有没有办法强制用户创建新记录而不是从查找视图中选择一个？

本质上，我尝试使用 N:1 实现 1:1 关系，并且不希望用户链接已链接的现有记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:47:17.897

您可以隐藏`Add Existing`功能区中的按钮。

[功能区编辑器](http://crmvisualribbonedit.codeplex.com/)非常值得下载（编辑功能区对我来说仍然是不必要的繁琐）

但是您也可以尝试[有关该主题的几个博客之一](http://mscrmshop.blogspot.co.uk/2011/07/step-by-step-hiding-add-existing-button.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T19:36:36.173

您始终可以创建一个新视图并将其设置为查找。（不要忘记禁用实体表单中的视图选择）

在视图的过滤条件中，您可以在“最后 x 小时”中查找“创建于”的那些，其中 x 可以是 1。

# vb.net - 从 vb.net 字符串到 DB2 时间戳的转换

> ID：14876054
> 
> 赞同：0
> 
> 时间：2013-02-14T13:35:55.257
> 
> 标签：vb.net, db2

我现在真的很沮丧，因为我无法将 VB.NET 手动创建的 DATE 数据类型放入具有 TIMESTAMP 数据类型的 DB2 列中。

我尝试了几种不同的方法来处理这个问题，但无论我做什么，我总是得到错误“SQL0180N：日期时间值的字符串表示的语法不正确”。

我的应用程序中处理从 String 到 DATE 的转换的部分就在这里：

```
Dim neuesDatum As Date
neuesDatum = CDate(jahr & "-" & "0" & monat & "-01 00:00:00") 
```

转换的字符串如下所示：2013-01-01 00:00:00

我还尝试了日期的德语格式（01.01.203），尝试使用没有最后一部分的字符串（00:00:00），但无论我做什么，它总是以相同的方式结束。

我使用存储过程将数据插入表中。日期作为参数“SollMonat”提供。

```
CREATE OR REPLACE PROCEDURE "ADDON21C"."STP_BEITRAGSSATZ_ADD"
(
        IN @Id BIGINT,
        IN @Typ VARCHAR(100),
        **IN @SollMonat TIMESTAMP,**
        IN @G VARCHAR(100),
        IN @F VARCHAR(100),
        IN @H VARCHAR(100),
        IN @U1 VARCHAR(100),
        IN @U2 VARCHAR(100),
        IN @U1erhoeht VARCHAR(100),
        IN @U1ermaessigt VARCHAR(100),
        IN @RV VARCHAR(100),
        IN @ALV VARCHAR(100),
        IN @P VARCHAR(100),
        IN @RVgf VARCHAR(100),
        IN @KVgf VARCHAR(100),
        IN @ZusatzKV VARCHAR(100),
        IN @ZusatzPV VARCHAR(100),
        IN @Inso VARCHAR(100),
        OUT @result BIGINT
)
LANGUAGE SQL
SPECIFIC SQL12080109131643
BEGIN

        IF @Id IS NULL OR @Id = 0
        THEN
                INSERT INTO "ADDON21C".BS
                (Typ, Sollmonat, G, F, H, U1, U2, U1erhoeht, U1ermaessigt)
                VALUES
                (@Typ, @SollMonat, @G, @F, @H, @U1, @U2, @U1erhoeht, @U1ermaessigt);
                 SET @result = IDENTITY_VAL_LOCAL();
        END IF;

END 
```

数据表中“Sollmonat”的数据类型也是 TIMESTAMP。

伙计们，如果你能在这里帮助我，我会很高兴的。我完全没有想法，不，我无法将日期保存为表中的 VARCHAR。保存为数据库中的 DATE 可能是可能的，但我相信我在那里会遇到同样的问题。

提前致谢！

@Steve这只会让整个事情变得更加混乱，因为我自己构建了一些类，允许我将类映射到数据表中，但请放心，这不是搞砸的。当我使用非手动创建的日期时，例如 Date.Now，它可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:04:23.847

您可以尝试以下几种方法。一个是专门说您的参数是时间戳，并传入`Date`类型：

```
cmdDB2.Parameters.Add("@SollMonat", DB2Type.Timestamp).Value = neuesDatum 
```

另一种可能性是定义日期的正确字符串表示，然后使用`.ToString()`. 下面是几个格式字符串，使用与您的数据库数据类型匹配的格式字符串。

```
Private Const DB2_TSTAMP = "yyyy-MM-dd-HH.mm.ss.ffffff"
Private Const DB2_DATE = "MM/dd/yyyy"

cmdDB2.Parameters.Add("@SollMonat", neuesDatum.ToString(DB2_TSTAMP)) 
```

这些选项过去对我有用。时间戳格式字符串应该一直有效（它是时间戳的 ODBC 标准），但日期格式字符串可能因位置而异，请查看[信息中心中的这篇文章](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0008474.html)。

# html - 滚动导致的列对齐问题

> ID：14876059
> 
> 赞同：0
> 
> 时间：2013-02-14T13:36:15.100
> 
> 标签：html, scroll, html-table, cross-browser

我必须制作某种仪表板。它基本上是一张桌子，有很多数字（那些 a、b、cs 都是数字，可能最多 3 位数字）

![这就是我想做的](../Images/0c4991cdf19aa6bad3af6a33659e7492.png)

我的问题是，正如您在图片中看到的，我有几个部分是动态的（如：我不知道有多少记录），因此，我需要为这些部分添加滚动条.

由于滚动条，我不能将所有内容都放在一个表中（或者我可以吗？），这可能会导致同一列可能不会一直对齐。它必须在基本上所有最新版本的浏览器中工作，我害怕向左或向右丢失一个像素。

我想要实现的基本上是这样的：（请注意，我故意将 DIV 添加到错误的位置）

```
<table>
<tr>
    <td>a</td>
    <td>b</td>
</tr>
<div id="div2" style="overflow-y: auto; overflow-x:hidden; height: 60px;>
<tr>
    <td>a</td>
    <td>b</td>
</tr>
</div>
<tr>
    <td>a</td>
    <td>b</td>
</tr>
</table> 
```

不确定这是否重要，但我想使用在鼠标悬停时显示的滚动条。[像这个。](https://stackoverflow.com/questions/7125185/hide-scrollbar-and-show-on-hover-like-facebooks-new-chat-sidebar)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:41:01.833

在编码之前，您需要知道需要使用的所有标签。

1.  `<div>`小时候不能直接来`<table>`。改为使用`<tbody>`。即使您是故意添加的，我还是建议您这样做。:)
2.  将标题包裹起来`<thead>`并提供正确的填充。

因此，最终，您的代码应如下所示：

```
<table>
    <thead>
        <tr>
            <td>a</td>
            <td>b</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>a</td>
            <td>b</td>
        </tr>
        </div>
        <tr>
            <td>a</td>
            <td>b</td>
        </tr>
    </tbody>
</table> 
```

你的 CSS 像：

```
tbody {overflow-y: auto; overflow-x:hidden; height: 60px;} 
```

* * *

**对于您的问题...**

1.  **由于滚动条，我不能把所有东西都放在一张桌子上（或者我可以吗？）**

    是的！`<tbody>`您可以通过将它们附加在标签内来将它们放在一个表中。另请注意，`<tbody>`一张表内可以有许多标签。

2.  **我想使用在鼠标悬停时显示的滚动条。**

    您可以使用简单的 CSS 来做到这一点。

    ```
    tbody {overflow: hidden;}
    tbody:hover {overflow: auto;} 
    ```

    如果您希望滚动条的样式像 Facebook 那样，您需要使用一个名为[**jScrollPane**](http://jscrollpane.kelvinluck.com/)的插件。

    [![](../Images/3abb7f3f241bca01b4178cb000543acd.png)](https://i.stack.imgur.com/V0urI.jpg)
    [（来源：[tympanus.net](http://cdn.tympanus.net/codrops/wp-content/uploads/2011/09/ScrollbarVisibility.jpg?84cd58)）]

3.  如果您觉得需要对表格数据进行更出色的效果，请选择[DataTables](https://www.datatables.net/)，这是 jQuery Javascript 库的插件。它是一个高度灵活的工具，基于渐进增强的基础，它将向任何 HTML 表格添加高级交互控件。

    [![](../Images/368b06cb5032d5f6f22cae5f4f1f9e3d.png)](https://i.stack.imgur.com/6B2fr.gif)
    [（来源：[webresourcesdepot.com](http://www.webresourcesdepot.com/wp-content/uploads/image/datatables.gif)）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T13:45:36.363

我最终使用了固定宽度，这是我想避免的，但我不能

Praveen Kumar 的回答对我不起作用

# ajax - 在 jquery ajax 中传递嵌套对象

> ID：14876061
> 
> 赞同：8
> 
> 时间：2013-02-14T13:36:30.007
> 
> 标签：ajax, jquery, object

我想使用 jquery 在 ajax 中传递以下嵌套对象：

```
{
   "parent_param1" : [
      {
         "sub_param1" : "sub_val1",
         "sub_param2" : "sub_val2"
      },
      {
         "sub_param1" : "sub_val1",
         "sub_param2" : "sub_val2"
      },
      {
         "sub_param1" : "sub_val1",
         "sub_param2" : "sub_val2"
      }
   ],
   "parent_param2" : "par_val2",
   "parent_param3" : "par_val3"
} 
```

我试图像下面的例子一样传递它：

```
var url = encodedURL;
var data = 'Above Object';

$.ajax({            
    type:'POST',
    url:url,
    dataType:'json',
    data:data,
        success:function(res){                      
              alert('success');                         
    },
    error:function(e){
      alert('error');   
    }                   
}); 
```

我收到运行时错误作为响应。我想确保这是使用 jQuery 在 AJAX 中传递嵌套对象的正确方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T13:46:10.060

现在您只是将一个对象传递给服务器，没有密钥。您需要将数据作为 JSON 字符串传递。

```
console.log(typeof data); //object
console.log(typeof JSON.stringify(data)); //string 
```

为了读取服务器端的数据，您需要将数据作为带有键和值的对象文字传递。像这样的东西：

```
data: { dto: JSON.stringify(data) }, 
```

在服务器端，您可以根据语言以不同的方式访问对象。

PHP：

```
$dto = $_POST['dto']; 
```

ASP.NET：

```
var dto = HttpContext.Current.Request.Form['dto']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:46:22.123

我相信您遇到的问题是您正在尝试发布对象本身。您需要将值作为字符串发布，然后在服务器端的对象上解码。这里有一个类似的问题：

[jQuery $.post() JSON 对象](https://stackoverflow.com/questions/7137464/jquery-post-json-object)

[JQuery 将 JSON 对象发布到服务器](https://stackoverflow.com/questions/10110805/jquery-post-json-object-to-a-server)

# iphone - 如何在 PDFPage 的屏幕上进行突出显示、添加注释和捕获/共享文本

> ID：14876063
> 
> 赞同：1
> 
> 时间：2013-02-14T13:36:43.827
> 
> 标签：iphone, ios, objective-c, ipad

谁能告诉我任何免费的第三方 sdk 或源代码，我可以使用它们突出显示、添加注释和捕获/共享屏幕上的文本，如 iBooks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:39:39.377

一个好的起点是 PPDFPage 的 OCR，我推荐 Tesseract
[http://code.google.com/p/tesseract-ocr/](http://code.google.com/p/tesseract-ocr/)
[https://github.com/nolanbrown/Tesseract-iPhone-Demo](https://github.com/nolanbrown/Tesseract-iPhone-Demo)

然后你想寻找代码来“添加注释”到 UITextView，突出显示可以通过 UITextView 完成，捕获/共享可以通过 CoreGraphics 和任何你想要使用的内置共享方法完成。

# c# - 混合的用途是什么

> ID：14876064
> 
> 赞同：1
> 
> 时间：2013-02-14T13:36:50.443
> 
> 标签：c#, expression-blend

混合软件有什么用，当所有工作编码和设计都可以在 Visual Studio 中很好地完成，甚至 Intellisence 不能在 c# 的混合中工作时

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:38:07.257

Blend 针对简单而强大的用户界面设计进行了优化，而 Visual Studio 是一个 IDE。您可以将 Blend 提供给对编程一无所知但可以轻松为您的应用程序绘制 GUI 的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:41:54.650

Microsoft blend 是 Microsoft 最强大的设计工具，主要用于控件的模板编辑

是的，智能在 Blend 中不起作用，但您可以在 Blend 中安装获取智能利润的 resharper 7

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:41:19.037

使用视觉工作室，您可以做任何事情，但混合让一切变得容易。您是打算用记事本制作一个完整的网页，还是要使用 Dreamweaver？Blend 使制作 GUI 和复杂的 silverlight 动画变得容易。它还可以快速为所有这些元素创建布局和故事板。试试看。

# tsql - 如何在 SELECT 或 UPDATE 语句中使用 T-SQL UDF？

> ID：14876067
> 
> 赞同：1
> 
> 时间：2013-02-14T13:36:56.570
> 
> 标签：tsql, sql-server-2000, user-defined-functions

上下文：SQL Server 2000

我写了一个UDF，它给了我两个其他文本之间的文本，即

```
CREATE FUNCTION dbo.StrBetween 
(
    @Text nvarchar(4000),
    @Lhs nvarchar(4000),
    @Rhs nvarchar(4000)
)
RETURNS nvarchar(4000)
AS
BEGIN
    DECLARE @LhsOffset INT;
    DECLARE @RhsOffset INT;
    DECLARE @Result NVARCHAR(4000);

    SET @LhsOffset = CHARINDEX( @Lhs, @Text );
    IF @LhsOffset = 0 
    BEGIN
        RETURN @Text;
    END
    SET @Result = SUBSTRING( @Text, @LhsOffset+1, LEN(@Text)-LEN(@Lhs));
    SET @RhsOffset = CHARINDEX( @Rhs, @Result );
    IF @RhsOffset = 0 
    BEGIN
        RETURN @Result;
    END
    SET @Result = SUBSTRING( @Result, 1, @RhsOffset - 1 );
    RETURN @Result;
END 
```

如果我有，这在 SQL 查询分析器中可以正常工作，比如说，

```
SELECT dbo.StrBetween('dog','d','g') 
```

但是，当我将一列作为第一个参数的值传递时，我没有得到任何响应。例如，

```
SELECT [TEST].[dbo].StrBetween(Referrer,'//', '/') as tst FROM tblTest 
```

Referrer 被声明为一个 nvarchar 字段。我是 T-SQL 的新手。我没有看到什么明显的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:41:53.783

这不是调用的问题 - 这是一个逻辑问题，而且您的`@Rhs`价值是价值的一部分`@Lhs`。

```
SET @Result = SUBSTRING( @Text, @LhsOffset+1, LEN(@Text)-LEN(@Lhs)); 
```

这是删除字符串的*第一个*字符`@Lhs`。但是，由于第二个字符是`/`，这就是您的`@Rhs`匹配项正在搜索的内容，它会立即在位置 1 找到它，因此您会得到一个空字符串。

相反，请尝试：

```
SET @Result = SUBSTRING( @Text, @LhsOffset+LEN(@Lhs), 4000); 
```

您不必精确计算长度。如果您要求 4000 个字符，而字符串只有 12 个字符长，`SUBSTRING`最多会给您 12 个字符。所以不要费心计算新的长度。

# maven - 通过 maven-assembly-plugin 打包在 jar 中包含 spring xml

> ID：14876076
> 
> 赞同：0
> 
> 时间：2013-02-14T13:37:19.727
> 
> 标签：maven, jar, maven-3, executable-jar, pom.xml

我正在尝试创建一个可执行 jar 及其所有依赖项以及 spring 的配置 xml 文件。

这是 pom.xml 中 maven-assembly-plugin 的定义：

```
<plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <configuration>
        <archive>
            <manifest>
                <mainClass>service.coucou.Main</mainClass>
            </manifest>
        </archive>
        <descriptorRefs>
            <descriptorRef>jar-with-dependencies</descriptorRef>
        </descriptorRefs>
        <descriptors>
                     <descriptor>assembly.xml</descriptor>
                 </descriptors>
    </configuration>
</plugin> 
```

这是程序集.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">
    <id>jar-with-dependencies</id>
    <formats>
        <format>jar</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>
    <dependencySets>
        <dependencySet>
            <outputDirectory>/</outputDirectory>
            <useProjectArtifact>true</useProjectArtifact>
            <unpack>true</unpack>
            <scope>runtime</scope>
        </dependencySet>
    </dependencySets>
    <fileSets>
        <fileSet>
            <includes>
                <include>/src/main/resources/cxf.xml</include>
            </includes>
        </fileSet>
    </fileSets>
</assembly> 
```

我正在尝试`/src/main/resources/cxf.xml`在创建的 jar 中包含文件。但它不包括xml。我怎样才能将它包含在 jar 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:05:05.860

替换为`<fileSets/>`：

```
<fileSet>
  <directory>${basedir}/src/main/resources</directory>
  <includes>
    <include>cxf.xml</include>
  </includes>
</fileSet> 
```

# android - Android：屏幕方向问题

> ID：14876078
> 
> 赞同：-3
> 
> 时间：2013-02-14T13:37:28.227
> 
> 标签：android, android-orientation

我有一个应用程序，当用户按下主页按钮或切换到其他应用程序或只是当应用程序进入后台时，会显示登录屏幕。但我不希望在屏幕方向改变时显示登录屏幕。

有什么建议应该通过实现 onConfigurationChanged 或其他方式来完成吗？

非常感谢您的建议或示例。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:55:57.220

首先，我还没有看到你的代码，所以这只是理论上的。

观看：http: [//2.bp.blogspot.com/-xeMDielmiUo/UOU6lxU5LXI/AAAAAAAAArA/xw4LV_gzjDk/s1600/activity_lifecycle.png](http://2.bp.blogspot.com/-xeMDielmiUo/UOU6lxU5LXI/AAAAAAAAArA/xw4LV_gzjDk/s1600/activity_lifecycle.png)

当您更改方向时，您调用方法 OnPause 和 onCreate（我认为），它们会显示您的登录屏幕。

使用它来了解应用程序何时发生方向变化： [如何在 Android 中检测布局中的方向变化？](https://stackoverflow.com/questions/5726657/how-to-detect-orientation-change-in-layout-in-android)

成功检测到它后，您将能够引发更改。添加一个变量，帮助您了解 onCreat/onResume 是否在方向更改时被调用。然后，在 onCreat/onResume 上使用此变量来帮助您决定是否显示登录屏幕。希望它有所帮助：P

# sql-server-2008 - 通过 Service Broker 通知的 SqlCacheDependency - 仅在特定列上选择敏感

> ID：14876079
> 
> 赞同：0
> 
> 时间：2013-02-14T13:37:28.497
> 
> 标签：sql-server-2008, sql-server-2008-r2, service-broker, sqlcachedependency

是否可以在 SELECT 上定义通知，但是以这种方式：仅当 select 中写入的列发生更改时，代理才会重置缓存。所以列敏感的方法。如果表中某些不重要的列被更改，我不希望缓存重置。我将有一个带有 INNER JOIN 的 SELECT。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:51:00.447

理论认为，如果您将 SELECT 列限制为仅包含感兴趣的列，则只有在这些列发生更改时才应通知您。然而，[当查询通知发生时的理解](http://msdn.microsoft.com/en-us/library/ms188323%28v=sql.105%29.aspx)有这个警告：

> 请注意，SQL Server 可能会生成查询通知以响应不更改数据的事件，或者响应实际上不影响查询结果的更改。例如，当 UPDATE 语句更改查询返回的行之一时，即使对该行的更新没有更改查询结果中的列，通知也可能会触发。

所以你**会**得到误报。

# .htaccess - .htaccess 重定向问题，在参数上苦苦挣扎

> ID：14876080
> 
> 赞同：1
> 
> 时间：2013-02-14T13:37:33.200
> 
> 标签：.htaccess, mod-rewrite

我正在努力解决 url/参数问题。

我网站的主要 index.php 页面以前用于例如

`www.domain.com/index.php?site=3&word=21`和

`www.domain.com/index.php?site=3`

但现在我已经改变了这些东西，但在谷歌中仍然列出了 URL。所以我需要将上面所有类型的页面重定向到`main page/domain www.domain.com`.

我相信 .htaccess 重定向是正确的使用方法，对吗？

我需要什么类型的代码将它们重定向到主域。只是带有参数的url`index.php?`等等，而不是其他目录，例如`www.domain.com/sunshine/`

如果有人可以帮助我，那就太好了。我相信这实际上是一个快速修复，但我未能正确获取代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:51:56.887

您可以将其添加到站点根目录中的 .htaccess 中：

`RedirectMatch permanent ^/index.php* http://www.domain.com/`

但是，如果您的新索引页面也命名为 index.php，请小心，因为您可能会遇到重定向循环。

# debian - 如何安装用于 at 命令的软件包？

> ID：14876082
> 
> 赞同：2
> 
> 时间：2013-02-14T13:37:41.270
> 
> 标签：debian

在我的 debian 框中，我想使用 at 命令，但得到了这个：

> -bash：在：找不到命令

我应该安装哪个软件包？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T13:45:18.160

该包称为“at”。

[Debian 软件包详情在这里](http://packages.debian.org/wheezy/at)

# rack-pow - 启动应用程序时偶尔出现 pow 错误（未收到响应）

> ID：14876086
> 
> 赞同：2
> 
> 时间：2013-02-14T13:38:00.863
> 
> 标签：rack-pow

我在 pow 中收到此错误，可能是 30 或 50 个请求中的一个：

启动应用程序时出错

当 Pow 尝试运行您的 Rack 应用程序时，它引发了异常。

```
Error: Response was not received
  at Client._finishRequest (/Users/duarte/Library/Application
Support/Pow/Versions/0.4.0/node_modules/nack/lib/client.js:77:27)
  at Client.<anonymous> (/Users/duarte/Library/Application
Support/Pow/Versions/0.4.0/node_modules/nack/lib/client.js:38:21)
  at Client.emit (events.js:88:20)
  at Array.0 (net.js:335:10)
  at EventEmitter._tickCallback (node.js:190:38) 
```

我在用：

*   导轨 (3.2.11)
*   ruby 1.9.3p362（2012-12-25 修订版 38607）[x86_64-darwin12.2.1]
*   rbenv
*   Anvil（用于管理 pow 符号链接的 mac 应用程序）

我没有任何自定义版本的 ruby​​ 集。我已经有这个大约一个月了。当我收到错误时，我会重新加载几次，它通常会在一分钟内自行消失。有时我只是启动 WEBrick 就可以了。我尝试通过自制软件和 npm 安装节点。我已经重新安装了 pow 几次，但没有运气！

这似乎是节点的问题或安装错误的东西，但我无法弄清楚它可能是什么！这是一台新笔记本电脑，自从我第一次设置所有内容以来，我从一开始就遇到了错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:13:47.470

对于任何有同样问题的人：通过重新安装 gcc 和重建 ruby​​ 解决了这个问题。

# triggers - ClearCase 触发器可以被另一个 ClearCase 触发器抑制吗？

> ID：14876087
> 
> 赞同：1
> 
> 时间：2013-02-14T13:38:06.360
> 
> 标签：triggers, clearcase

我有一个 ClearCase 触发器，它在`checkin`执行操作后运行脚本。
当用户签入新元素版本或将新元素添加到源代码管理时，它会起作用。

但是，当删除文件时，我不希望触发触发器（或者至少我不希望与其关联的脚本运行），但我知道它会因为删除元素后，文件夹不可避免地入住。

操作触发器是否可以以某种方式`rmelem`抑制`checkin`操作触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:51:51.487

你可以这样做：

*   定义一个 preop 触发器，在`rmelem`该触发器上设置一个标志（就像任何客户端都可以访问的某个地方写入的文件）
*   修改您的 postop 触发器`checkin`，如果​​该文件存在，将删除它并且*不*执行触发器的其余部分。

但我的观点是：据我所知，这些触发器是相互独立的，因此您需要提出一种外部*协调*机制，以便一个触发器影响另一个触发器。

您也可以使用环境变量（如果设置了某个 EV，则 postop trigger 取消设置它并且不执行自身），但我不确定您是否可以在不同触发器的不同执行中设置*和持久化 EV。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-03T14:19:17.110

我不确定是否必须为所有元素类型运行触发器。

您可以使用环境变量 CLEARCASE_ELTYPE 在脚本中区分元素是目录还是文件元素。也许这有帮助？

另一点是 env var PPID - 精美的手册说：您可以使用 CLEARCASE_PPID 环境变量来帮助同步多个触发 ...##

# c# - 为什么未使用的事件参数需要赋值？

> ID：14876089
> 
> 赞同：1
> 
> 时间：2013-02-14T13:38:08.957
> 
> 标签：c#, events, delegates, event-handling, arguments

根据[C# 参考](http://msdn.microsoft.com/en-us/library/edakx9da.aspx)

> “null 关键字是表示空引用的文字，它不引用任何对象。null 是引用类型变量的默认值”

我惊讶地发现以下应用程序代码中的
Commenting`e=null`行（取自文章[“C# 中的事件和委托之间的差异”](http://softwarecafeblog.blogspot.ru/2012/06/difference-between-events-and-delegates.html)）导致编译错误：

```
Use of unassigned local variable 'e' 
```

而没有评论它被编译并运行。

我不明白：

*   变量在哪里`e`使用？
*   是否可以在不将变量分配给哑巴的情况下强制应用程序运行`null`？

F

```
using System;   
class Program   
{   
  static void Main(string[] args)   
  {   
    DelegatesAndEvents obj = new DelegatesAndEvents();   
    obj.Execute();  
  }  
}  
public class DelegatesAndEvents  
{
  public event EventHandler MyEvent;
  internal void Execute()
  {
    EventArgs e;
//Commenting the next line results in compilation error
//Error 1   Use of unassigned local variable 'e'
    e = null;
    int sender = 15;
    MyEvent += MyMethod;
    MyEvent += MyMethod2;
    MyEvent(sender, e);
  }
  void MyMethod(object sender, EventArgs e)
  {
    Console.WriteLine(sender);
  }
  void MyMethod2(object sender, EventArgs e)
  {
    Console.WriteLine(sender);
    Console.ReadLine();
  }
} 
```

**更新（或对所有答案的评论）：**
所以，我从来不知道，有一种空值 - 一个是分配的，另一个是未分配的......有趣......

他们可能应该有不同的类型，用于检查：
if typeof(unassigned-null) then do this;
如果 typeof(assigned_null) 则执行此操作；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:40:08.363

局部变量不使用它们的默认值初始化，而字段是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:46:58.910

要回答您的问题：

*   问题：变量e在哪里使用？

答：它用于将它传递给 MyEvent(sender, **e** );

*   问题：是否可以强制应用程序在没有哑巴将变量分配为 null 的情况下运行？

回答：不，这并不愚蠢，因为您通过将*e*传递给另一个方法来使用它。您只是没有直接使用它 - 但您仍在使用它。

实际上，您不需要在任何地方声明*e* - 您可以直接将 null 传递给 MyEvent：

```
MyEvent(sender, null); 
```

然后你不需要做任何多余的变量声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T13:48:24.697

编译器无法知道在编译`Execute`哪些事件处理程序注册到`MyEvent`. （其他人可能在被调用之前已经注册过`Execute`，他们可能会尝试使用`e`）。因此，它不会尝试对其*可能*知道已注册的任何处理程序进行任何分析。所以，既然你想通过`e`，它必须被初始化。

如果你想通过`null`，为什么要介绍`e`呢？只要有

```
MyEvent(sender, null); 
```

这至少使您的意图明确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T13:54:55.883

您正在使用`e`而没有为其分配值。使用`e = null;`，您正在为变量 e 赋值，因为**null 也是一个值**。

此外，根据 C# 引用，引用类型的默认值为 null，但这里`e`是一个变量。变量不是默认的，在使用之前必须有“明确的赋值”。

# eclipse - Eclipse 自动提示和填写变量名

> ID：14876090
> 
> 赞同：10
> 
> 时间：2013-02-14T13:38:09.023
> 
> 标签：eclipse

好的，所以我的问题是当我创建一个变量时，例如当我输入“o”时说“Object o”，它会建议像“object”这样的东西。没关系，但是当我按空格时，它会自动填写新名称。基本上我不想关闭自动完成我只想禁用空间自动填充建议。即使禁用变量命名建议也可以。

我正在使用 Eclipse Juno Service Release 1。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2020-01-06T09:02:01.560

我知道这是一个老问题，但由于这里的答案对我没有用，而且这个问题也让我很烦恼，所以我正在添加对我有帮助的解决方案。

在您的 Eclipse 中转到：Window/Preferences/Java/Editor/Content Assist

并启用：

禁用除“Enter”之外的插入触发器

[屏幕/拍摄](https://i.stack.imgur.com/frUfO.png)

希望这对每个人都有效！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-28T22:31:25.437

由于还没有任何明确的解决方案，我发现最好的方法是禁用触发器中的字母字符：

Windows > Preferencees > Java > Editor > Content Assist > Java 的自动激活触发器

这意味着没有类名/类型完成，但是当您按下点时仍然会建议方法名称完成，但是至少 Eclipse 停止弄乱我的变量名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:28:30.333

转到`Window/Preferences/Java/Editor/Content Assist`并选择适合您的设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-09-23T20:36:02.233

我意识到这是一个 3 岁的帖子，但是......

据我所知，没有禁用此功能的选项，它已硬编码到内容辅助功能中。但是有一个插件可以从[这个](https://stackoverflow.com/a/27224710/2716305)堆栈溢出问题的答案中下载，它将禁用此功能

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-14T22:26:56.703

**Window -> Preferences -> Java -> Editor -> Content Assist -> Advanced** 我关闭了 Java Type Proposals 并确保打开了 Java Proposals。顺便说一句，这是在 Spring Tool Suite 中，我没有使用 eclipse 检查过。

# javascript - Knockoutjs 不更新视图

> ID：14876091
> 
> 赞同：0
> 
> 时间：2013-02-14T13:38:09.877
> 
> 标签：javascript, html, knockout.js, signalr

当触发 Javascript (Signalr) 函数时，我使用 knockoutjs 更新我的 Html 视图。`producthub.client.showOnlineUser`但是视图在调用时不会更新。当我每次应用绑定时，表格多次具有相同的内容。我怎样才能更新knockoutjs中的视图？

html:

```
<table id="usersTable">
    <thead>
        <tr>
            <th>Name</th>
            <th>Mail</th>
        </tr>
    </thead>
    <tbody data-bind="foreach: seats">
        <tr>
            <td data-bind="text: NameFirst"></td>
            <td data-bind="text: Mail"></td>
        </tr>
    </tbody>
</table> 
```

Javascript：

```
$(document).ready(function () {
     var applied = false;
     var model;
     producthub.client.showOnlineUser = function (userOnlineOnUrl, msg1) {
        function ReservationsViewModel() {
            var self = this;
            self.seats = ko.observableArray(userOnlineOnUrl);
        }

        model  = new ReservationsViewModel();
        if (!applied) {
            ko.applyBindings(model);
            applied = true;
        }

    };
}); 
```

`userOnlineOnUrl`是一个 JSON 数组，它会在每个函数调用中更改它的数据。视图（表）未使用其数据进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:47:17.373

尽量不要每次都调用模型，只需用函数更新它

```
 $(document).ready(function () {
          var applied = false;
          var model;
          function ReservationsViewModel() {
                    var self = this;
                    self.seats = ko.observableArray();
                }
          model = new ReservationsViewModel();
          ko.applyBindings(model);
          applied = true;

          producthub.client.showOnlineUser = function (userOnlineOnUrl, msg1) {                   
                model  = new ReservationsViewModel();
                //remove the previous data in array
                model.seats.removeAll();
                //Add new data to array 
                model.seats(userOnlineOnUrl);

                $('#onlineUsers').append(msg1);
            };
        }); 
```

# unit-testing - 可维护的模拟

> ID：14876093
> 
> 赞同：2
> 
> 时间：2013-02-14T13:38:12.280
> 
> 标签：unit-testing, mocking, maintainability

模拟对象引入了一种对某些程序单元进行深度行为测试的好方法。您只需将模拟的依赖项传递给被测单元并检查它是否像应做的那样与依赖项一起工作。

让你有2个A类和B类：

```
public class A
{
    private B b;

    public A(B b)
    {
        this.b = b;
    }

    public void DoSomething()
    {
        b.PerformSomeAction();
        if(b.State == some special value)
        {
            b.PerformAnotherAction();
        }
    }
}

public class B
{
    public BState State { get; private set; }

    public void PerformSomeAction()
    {
        //some actions

        State = some special value;
    }

    public void PerformAnotherAction()
    {
        if(State != some special value)
        {
           fail();  //for example throw new InvalidOperationException();
        }
    }
} 
```

想象一下 B 类正在使用单元测试 TestB 进行测试。

要对类 A 进行单元测试，我们可以将 B 传递给它的构造函数（进行基于状态的测试）或将 B 的模拟传递给它（进行基于行为的测试）。

假设我们选择了第二种方法（例如，我们不能直接验证 A 的状态而可以间接验证）并创建了单元测试 TestA（不包含对 B 的任何引用）。

所以我们将引入一个接口 IDependency 和类将如下所示：

```
public interface IDependency
{
    void PerformSomeAction();
    void PerformAnotherAction();
}

public class A
{
    private IDependency d;

    public A(IDependency d)
    {
        this.d = d;
    }

    public void DoSomething()
    {
        d.PerformSomeAction();
        if(d.State == some special value)
        {
            d.PerformAnotherAction();
        }
    }
}

public class B : IDependency
{
    public BState State { get; private set; }

    public void PerformSomeAction()
    {
        //some actions

        State = some special value;
    }

    public void PerformAnotherAction()
    {
        if(State != some special value)
        {
           fail();  //for example throw new InvalidOperationException();
        }
    }
} 
```

和单元测试 TestB 类似于：

```
[TestClass]
public class TestB
{
    [TestMethod]
    public void ShouldPerformAnotherActionWhenDependencyReturnsSomeSpecialValue()
    {
        var d = CreateDependencyMockSuchThatItReturnsSomeSpecialValue();
        var a = CreateA(d.Object);

        a.DoSomething();

        AssertSomeActionWasPerformedForDependency(d);
    }

    [TestMethod]
    public void ShouldNotPerformAnotherActionWhenDependencyReturnsSomeNormalValue()
    {
        var d = CreateDependencyMockSuchThatItReturnsSomeNormalValue();
        var a = CreateA(d.Object);

        a.DoSomething();

        AssertSomeActionWasNotPerformedForDependency(d);
    }
} 
```

好的。这对开发人员来说是一个快乐的时刻 - 一切都经过测试，所有测试都是绿色的。万事皆安。

但！

当有人修改 B 类的逻辑时（例如将 if(State != some special value) 修改为 if(State != another value) ）只有 TestB 失败。

这家伙修复了这个测试，并认为一切都恢复正常了。

但是，如果您尝试将 B 传递给 A 的构造函数，A.DoSomething 将会失败。

它的根本原因是我们的模拟对象。它修复了 B 对象的旧行为。当 B 改变其行为时，模拟并没有反映出来。

所以，我的问题是**如何让 B 的模拟跟随 B 的行为变化**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:44:50.203

这是一个观点问题。通常，您模拟一个*接口*，而不是一个具体的类。在您的示例中，B 的模拟是 IDependency 的实现，就像 B 一样。每当 IDependency 的行为发生更改时，B 的模拟必须更改，并且您可以通过在更改 IDependency 的定义行为时查看 IDependency 的所有实现来确保这一点。

因此，执行是通过代码库中应遵循的 2 个简单规则：

1.  当一个类实现一个接口时，它必须在修改后实现接口的所有定义行为。
2.  当您更改接口时，您必须调整所有实现者以实现新接口。

理想情况下，您有针对 IDependency 的已定义行为进行测试的单元测试，这些测试适用于 B 和 BMock 并捕获违反这些规则的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T06:53:09.973

我与另一个答案不同，它似乎提倡将真实实现和（手工制作的？）模拟都接受一组合同测试——这些测试指定了角色/界面的行为。我从来没有见过模拟练习的测试——尽管可以。

通常你不会手工制作模拟——而是使用模拟框架。所以在你的例子中，我的客户端测试会有内联语句

```
new Mock<IDependency>().Setup(d => d.Method(params)
                       .Returns(expectedValue) 
```

您的问题是，当合同发生变化时，我如何保证客户端测试中的内联期望也会随着依赖项的更改而更新（甚至标记）？

编译器在这里无济于事。测试也不会。您所拥有的是客户端和依赖项之间缺乏共享协议。您必须手动查找和替换（或使用 IDE 工具查找对接口方法的所有引用）并修复。

出路是不要鲁莽地定义很多细粒度的 IDependency 接口。大多数问题都可以通过最少数量的具有明确定义的非易失性行为的块状**角色（实现为接口）来解决。**您可以尝试最小化角色级别的更改。最初，这也是我的一个症结所在——但[与交互测试专家的讨论](http://tech.groups.yahoo.com/group/testdrivendevelopment/message/32748)和实践经验成功地赢得了我的支持。如果这种情况确实经常发生，那么快速回顾一下变化无常的界面的原因应该会产生更好的结果。

# nsis - NSIS 在静默模式下自动接受对话框

> ID：14876098
> 
> 赞同：2
> 
> 时间：2013-02-14T13:38:16.860
> 
> 标签：nsis

我有一个带有自定义对话框的 nsis 安装程序，其中有一个接受按钮，但是当我在静默模式下运行它时，它不接受该对话框。如何让它自动点击接受静默？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:18:52.807

*   如果您的对话框是标准的`MessageBox`，只需将`/SD button_id_to_use`参数添加到[`MessageBox`指令](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.4.15)中，以告诉 NSIS 在静默模式下使用什么选项：

    ```
    MessageBox MB_YESNO "Accept?" /SD IDNO IDNO Skipped 
    ```

*   如果您的对话框是自定义页面，则问题是在静默模式下，根本不涉及任何页面（甚至隐藏），并且不会触发页面回调。您需要单独检查`IfSilent`和调用由 Accept 按钮触发的逻辑，与 或 部分分开`.onInit`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:53:15.147

```
IfSilent Accepted
MessageBox MB_YESNO "Accept?" IDNO Skipped
Accepted:
// some code when accepted

Skipped: 
```

# installation - P2 配置文件不包括通过 p2 Operations API 安装的捆绑包

> ID：14876102
> 
> 赞同：2
> 
> 时间：2013-02-14T13:38:34.083
> 
> 标签：installation, equinox, p2

我们有一个 Eclipse 产品，在启动时使用标准 p2 操作 API 或“p2 静默更新”实现了“检查可用更新”的更新机制。这工作得很好，更新操作可以解决所有的依赖关系，比如安装了哪些更新，哪些没有，如果有新的更新可用，它将正确下载它们。

我在启动时使用相同的操作 API 或“p2 静默安装”实现了类似的“检查可用新安装”功能。我的代码如下所示：

```
InstallOperation install = new InstallOperation(provisioningSession, toInstall); 
IStatus status = install.resolveModal(null);
if (status.getSeverity() == IStatus.OK) {
    Job job = operation.getProvisioningJob(null);
    job.schedule();
} 
```

问题是，在我安装了新的捆绑包后（仅在重新启动应用程序后可见），我需要检查它们是否已经安装，为此我使用标准 API：

```
IProfileRegistry profileRegistry = (IProfileRegistry) provisioningAgent.getService(IProfileRegistry.SERVICE_NAME);
IProfile profile = profileRegistry.getProfile(IProfileRegistry.SELF);
Collection<IInstallableUnit> alreadyInstalled = profile.available(QueryUtil.ALL_UNITS, null).toUnmodifiableSet(); 
```

问题是已安装单元的列表不包括我新安装的捆绑包。另一个奇怪的观察是，我的应用程序会一直尝试安装相同的包，因为 InstallOperation 解析为 OK，就好像这些包从未安装过一样（我认为这是因为它们实际上并未包含在当前 p2 配置文件中，与我得到的结果相同列出当前配置文件中所有已安装的捆绑包时，请参见上面的代码）。

我想知道这是否是一个错误或是否存在另一个单独的 p2 配置文件，其中包括通过 Operations API 安装的捆绑包，以及为什么它们没有注册为当前配置文件的一部分（即使我可以看到它们被复制并安装在我的应用程序正确）。

操作 API：

[http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fp2_api_overview.htm](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Fguide%2Fp2_api_overview.htm)

# facebook - Facebook的graph api“limit”参数的限制

> ID：14876105
> 
> 赞同：16
> 
> 时间：2013-02-14T13:38:44.760
> 
> 标签：facebook, facebook-graph-api

我正在使用 Facebook 的 Graph API 从公共页面获取大量评论。
默认情况下，facebook 每个响应返回 25 条评论，并使用分页。这导致需要多个请求，因为我知道前面会有很多评论，这是 uneccesery。

我阅读了有关“限制”参数的信息，您可以传递该参数以要求每个响应提供一定数量的项目。

我想知道，该参数的限制是什么？我假设我不能通过 &limit=10000。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-11T08:25:17.907

获取评论有另一种方式：

```
https://graph.facebook.com/<PAGE_ID>_<POST_ID>/comments?limit=500 
```

限制参数的最大值为 500。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-14T13:58:10.093

是的，使用限制参数，您可以在一次调用中传递您想要的特定资源数量。默认限制为 25。

例如。如果您想在一次调用中对具有 id 的帖子发表 100 条评论`POST_ID`，您可以这样查询：

```
https://graph.facebook.com/POST_ID?fields=comments.limit(100) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-26T18:10:43.533

I think they have changed this. For /feed? I only get 200-225 posts back but for comments I get as many as 2000 back

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-24T22:04:31.173

老问题，但这是在当前的 Facebook 文档中，以防有人通过搜索找到这个问题（强调我的）：

> 出于性能原因，某些边缘也可能具有最大限制值。**在所有情况下，API 都会返回正确的分页链接。**

换句话说，即使您指定了超出端点允许的限制，“pagination.previous”和“pagination.next”元素将始终提供正确的 URL 以从中断处继续。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-28T11:53:51.017

我建议您改用 FQL。

FQL 提供了一种更灵活的方法，您可以根据需要组合数据类型（帖子、用户、页面等）。您还可以查询属于故事列表的评论，而不仅仅是一个限制您的请求数量的评论。

但是有几个缺点：
1\. 有 5000 条评论的限制。在这里，您将使用类似于以下内容的查询：“SELECT id, ...... FROM comments, ... WHERE parent_id in (1,2,3....) ORDER BY time LIMIT 0, 5000”。即使您使用“LIMIT 0, 1000”、“LIMIT 1000, 1000”、LIMIT 2000、1000 等将其拆分为多个查询，但您永远不会得到超过 5000 条评论（“LIMIT 5000, 1000”将返回空的）。
2\. 在 Facebook 的服务器上发出的所有真实请求都算作一次请求。您可以发送实际上是请求组合的内容，这将被视为多个请求。
3\. Facebook 不喜欢繁重的请求。您最终可能会在更短的时间内被阻止（分钟 -> 小时，而不是几天）。如果发生这种情况，

# javascript - AngularJS：$observe 和 $watch 方法之间的区别

> ID：14876112
> 
> 赞同：382
> 
> 时间：2013-02-14T13:39:00.587
> 
> 标签：javascript, angularjs

我知道这两者`Watchers`都是在 AngularJS 发生变化时`Observers`立即计算的。`$scope`但无法理解两者之间究竟有什么区别。

我最初的理解是`Observers`为角度表达式计算的，这些表达式是在`Watchers`执行`$scope.$watch()`函数时执行的 HTML 端的条件。我在想正确吗？

* * *

## 回答 #1

> 赞同：613
> 
> 时间：2013-02-16T06:54:22.357

**[$observe()](https://docs.angularjs.org/api/ng.$compile.directive.Attributes#$observe)**是[Attributes](http://docs.angularjs.org/api/ng.$compile.directive.Attributes)对象上的一个方法，因此，它只能用于观察/观察 DOM 属性的值变化。它仅在指令内部使用/调用。当您需要观察/观察包含插值的 DOM 属性（即 {{}} 的）时，请使用 $observe。
例如，`attr1="Name: {{name}}"`, 然后在指令中：`attrs.$observe('attr1', ...)`.
（如果你尝试`scope.$watch(attrs.attr1, ...)`它不会工作，因为 {{}}s - 你会得到`undefined`。）使用 $watch 做其他事情。

**[$watch()](http://docs.angularjs.org/api/ng.$rootScope.Scope#$watch)**更复杂。它可以观察/观察“表达式”，其中表达式可以是函数或字符串。如果表达式是字符串，则将其[$parse](http://docs.angularjs.org/api/ng.$parse) 'd（即，评估为[Angular 表达式](http://docs.angularjs.org/guide/expression)）到函数中。（每个摘要循环都会调用此函数。）字符串表达式不能包含 {{}}。$watch 是[Scope](http://docs.angularjs.org/api/ng.$rootScope.Scope)对象上的一个方法，因此可以在您可以访问范围对象的任何地方使用/调用它，因此在

*   控制器——任何控制器——通过 ng-view、ng-controller 或指令控制器创建的控制器
*   指令中的链接函数，因为它也可以访问范围

因为字符串被评估为 Angular 表达式，所以当你想观察/观察模型/范围属性时，经常使用 $watch。例如，`attr1="myModel.some_prop"`，然后在控制器或链接函数中：`scope.$watch('myModel.some_prop', ...)`或`scope.$watch(attrs.attr1, ...)`（或`scope.$watch(attrs['attr1'], ...)`）。
（如果你尝试`attrs.$observe('attr1')`你会得到 string `myModel.some_prop`，这可能不是你想要的。）

正如对@PrimosK 答案的评论中所讨论的，所有 $observes 和 $watches 都会在每个[摘要循环](http://docs.angularjs.org/guide/concepts)中检查。

具有隔离范围的指令更复杂。如果使用 '@' 语法，您可以 $observe*或 $watch*包含插值的 DOM 属性（即 {{}} 的）。（它与 $watch 一起工作的原因是因为 '@' 语法为我们做了[插值](http://docs.angularjs.org/api/ng.$interpolate)，因此 $watch 看到一个没有 {{}} 的字符串。）为了更容易记住何时使用哪个，我建议使用$observe 也适用于这种情况。

为了帮助测试所有这些，我编写了一个定义两个指令的[Plunker 。](http://plnkr.co/edit/HBha8sVdeCqhJtQghGxw?p=preview)一个 ( `d1`) 不创建新范围，另一个 ( `d2`) 创建隔离范围。每个指令都有相同的六个属性。每个属性都是 $observe'd 和 $watch'ed。

```
<div d1 attr1="{{prop1}}-test" attr2="prop2" attr3="33" attr4="'a_string'"
        attr5="a_string" attr6="{{1+aNumber}}"></div> 
```

查看控制台日志，可以看到 $observe 和 $watch 在链接函数中的区别。然后单击链接，查看单击处理程序所做的属性更改触发了哪些 $observes 和 $watches。

请注意，当链接函数运行时，尚未评估任何包含 {{}} 的属性（因此，如果您尝试检查属性，您将得到`undefined`）。查看插值的唯一方法是使用 $observe（如果使用带有 '@' 的隔离范围，则使用 $watch）。因此，获取这些属性的值是一个*异步*操作。（这就是我们需要 $observe 和 $watch 函数的原因。）

有时你不需要$observe 或$watch。例如，如果您的属性包含一个数字或一个布尔值（不是字符串），只需评估一次：`attr1="22"`，然后在您的链接函数中：`var count = scope.$eval(attrs.attr1)`。如果它只是一个常量字符串——`attr1="my string"`那么只需`attrs.attr1`在你的指令中使用（不需要 $eval()）。

另请参阅[Vojta](https://groups.google.com/d/msg/angular/TbRQhG-G14I/bYcipV1OYwcJ)关于 $watch 表达式的 google 群组帖子。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-14T14:23:19.073

如果我正确理解您的问题，您会问如果您使用注册侦听器回调`$watch`或使用`$observe`.

注册的回调在执行`$watch`时被触发`$digest`。

`$observe`当包含插值的属性的值更改时调用注册的回调（例如`attr="{{notJetInterpolated}}"`）。

* * *

在指令内部，您可以以非常相似的方式使用它们：

```
 attrs.$observe('attrYouWatch', function() {
         // body
    }); 
```

或者

```
 scope.$watch(attrs['attrYouWatch'], function() {
         // body
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-30T20:32:00.327

我认为这很明显：

*   $observe 用于指令的链接功能。
*   $watch 在作用域上用于观察其值的任何变化。

*请记住*：两个函数都有两个参数，

```
$observe/$watch(value : string, callback : function); 
```

*   **value**：始终是对被监视元素的字符串引用（范围变量的名称或要监视的指令属性的名称）
*   **callback** : 表单要执行的函数`function (oldValue, newValue)`

我已经做了一个[`plunker`](http://plnkr.co/edit/n4h0wjcRZDSQBeN2RyyG?p=preview)，所以你实际上可以掌握它们的使用情况。我使用了变色龙的类比来使其更容易描绘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-05T16:59:30.987

为什么 $observe 与 $watch 不同？

watchExpression 在每个 digest() 循环中被评估并与前一个值进行比较，如果 watchExpression 值发生变化，则调用 watch 函数。

$observe 专门用于观察插值。如果指令的属性值被插值，例如`dir-attr="{{ scopeVar }}"`，则仅在设置插值时调用观察函数（因此当 $digest 已经确定需要进行更新时）。基本上已经有一个插值的观察者，并且 $observe 函数捎带了它。

参见[compile.js中的 $observe 和 $set](https://github.com/angular/angular.js/blob/a8dedf7a015e5a3c2b74e66225a43e820a58518c/src/ng/compile.js)

# mongodb - 一次更新两个子数组

> ID：14876116
> 
> 赞同：0
> 
> 时间：2013-02-14T13:39:11.010
> 
> 标签：mongodb, atomic

是否可以通过一次更新来更新文档的两个子数组（无需检索文档，并使用乐观并发更新它）？

假设我有以下文件：

```
{ "_id" : 2,
  "arr1" : [
             { "Id" : 10, "Value" : "abc" },
             { "Id" : 20, "Value" : "abc" },
             { "Id" : 30, "Value" : "abc" }, 
             { "Id" : 40, "Value" : "abc" },
             { "Id" : 50, "Value" : "abc" }
           ],
  "arr2" : [
             { "Id" : 12, "Text" : "abc" },
             { "Id" : 22, "Text" : "abc" },
             { "Id" : 32, "Text" : "abc" }, 
             { "Id" : 42, "Text" : "abc" },
             { "Id" : 52, "Text" : "abc" }
           ]
} 
```

我试图这样做，但它似乎没有修改正确的子文档：

```
db.col.update(
    { "_id": 2, arr1: { $elemMatch: { Id: 30 } }, arr2: { $elemMatch: {Id: 42} } },
    { $set: {
        "arr1.$.Value": "Changed First",
        "arr2.$.Text": "Changed Second"
      }
    }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:08:08.827

在我看来，如果您的数据看起来像这样，您将能够轻松地执行更新：

```
{ 
  "_id" : 2,
  "arr1" : {
    "10": "abc",
    "20": "abc",
    "30": "abc",
    "40": "abc",
    "50": "abc"

  }
} 
```

# hyperlink - ImageMapster - 在文本链接悬停时显示图像地图区域

> ID：14876118
> 
> 赞同：1
> 
> 时间：2013-02-14T13:39:12.077
> 
> 标签：hyperlink, hover, imagemap, imagemapster

我有一个使用 ImageMapster.js 的带有悬停效果的图像映射...图像旁边是一个文本链接列表，它们引用图像映射区域的某些区域。当我将鼠标悬停在文本链接上时，是否可以突出显示图像地图区域？

例如：

```
<img src="map.png" usemap="#ch" style="width:100%;">
<map id="usa_image_map" name="usa>
<area href="http://ab.com" state="ab" shape="poly" coords="259,256,275,257,..."><area href="http://xy.com" state="xy" shape="poly" coords="332,421,329,416,...">
</map>
<div id="links">
<a href="http://ab.com">ab</a><a href="http://xy.com">xy</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T08:55:33.963

尝试这个：

```
 $("a", "#links").hover(
      function () {
        var state = $( this ).text();
        $( 'area[state="' + state +'"]').mapster('select');

    }); 
```

当您将链接列表悬停在`id="links"`. var state 保存悬停链接的文本，因此当您 hover 时`<a href="ab.com">ab</a>`，状态为`ab`. 使用选择器`$('area[state="' + state +'"]')`，您可以找到地图的 area 元素，其 state 属性等于悬停链接的文本。`mapster('select')`最后突出显示地图区域。

# android - 不使用接口方法的方法映射

> ID：14876119
> 
> 赞同：0
> 
> 时间：2013-02-14T13:39:15.540
> 
> 标签：android, xml

Android 的视图对象如何在我的活动中调用方法？例如，当您动态生成视图（如按钮）时，您必须添加一个单击侦听器，然后您的活动将实现单击侦听器，然后按钮对象将通过接口引用您的活动。

我的问题是，当您在 XML 文件中创建按钮时，您可以指定一个属性“onClick”，然后给出一个自定义方法名称，例如`public void button1pushed(View v)`如果我的活动没有实现任何东西，按钮对象如何引用我的活动？

# ruby-on-rails-3 - 确定我在使用 Railties 时使用的 Rails 版本

> ID：14876120
> 
> 赞同：1
> 
> 时间：2013-02-14T13:39:31.157
> 
> 标签：ruby-on-rails-3, rubygems, railtie

愚蠢的问题：

我正在使用 Railties 3.2.3 版，并希望检查它运行的 Rails 版本是什么（最近出现了多少安全问题）。我查看了 gem 的代码，但似乎无法处理它。也许我很愚蠢，rails 版本与房地产版本相匹配？

无论哪种方式，我都会很感激这方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:42:37.130

`Rails::VERSION::STRING`在您的应用程序中使用时返回当前运行的 Rails 版本。

# entity-framework - 编码类型为 char(36) 的第一列

> ID：14876121
> 
> 赞同：9
> 
> 时间：2013-02-14T13:39:37.770
> 
> 标签：entity-framework, data-annotations, entity-framework-5

所以我有一个 UserProfile 模型类作为 SimpleMembership 的一部分。在其中，我需要存储存在于另一个类型的数据库中的旧标识符`char(36)`。我很想把它改成更合理的东西，比如 uniqueIdentifier ，但这超出了今天的活动范围。

我当前的注释创建了一列`nvarchar(36)`

```
[StringLength(36)]
public string UserIdentifier{ get; set; } 
```

我想要一列`char(36)`代替。这可能吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-17T23:11:25.043

如果您想保留数据注释，那么只需使用：

```
[StringLength( 36 )]
[Column( TypeName = "char" )]
public string UserIdentifier{ get; set; } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-14T14:05:21.757

行。我自己找到了答案。

如果我为我的 UserProfile 创建以下配置类：

```
class UserProfileConfiguration:EntityTypeConfiguration<UserProfile>
{
    public UserProfileConfiguration()
    {
        this.Property(p => p.UserIdentifier)
            .HasMaxLength(36)
            .IsFixedLength()
            .IsUnicode(false);
    }
} 
```

`OnModelCreating`然后在 my中覆盖`DbContext`以添加此配置：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Configurations.Add(new UserProfileConfiguration());
    } 
```

然后我在做生意，我得到一个`char(36)`专栏。耶。

# oracle - oracle调度程序重命名间隔分区

> ID：14876122
> 
> 赞同：0
> 
> 时间：2013-02-14T13:39:37.903
> 
> 标签：oracle, dbms-scheduler

我得到一些奇怪的行为。我有一个更改表中分区名称的过程。我创建了一个作业，它每 2 分钟运行一次此程序进行测试。第一次运行非常顺利，到目前为止没有任何错误。但是，从第二次运行我收到以下错误

```
"ORA-00054: resource busy and acquire with NOWAIT  specified or timeout expired
       ORA-06512: at "CDS_USER.RENAMING_PARTITIONS", line 17" 
```

是的，我的桌子是实时的。但是当我在没有调度程序的情况下明确运行我的程序时，它运行得非常好。没有问题。而且调度器的每一次第一次运行也是完美的。

这是调度程序的代码

```
 begin
    bms_Scheduler.create_job(
    job_name => 'drop_user1' ,
    job_action => 'RENAMING_PARTITIONS' 
    job_action => 'DROP_PARTITIONS' 
    ,start_date => SYSDATE ,
     repeat_interval => 'freq=hourly;INTERVAL=7',bysecond=0;' ,
     enabled => TRUE ,
     comments => 'schduling drop job.');
     END; 
```

这是程序的代码

```
 create or replace PROCEDURE RENAMING_PARTITIONS
   AS
   hv varchar2(9);
   max_part VARCHAR2(9);
   begin
   select  max(partition_position)  into max_part from user_tab_partitions where  table_name='DEMO'; 
  for x in (select partition_name, high_value, partition_position
          from user_tab_partitions
          where table_name = 'DEMO' and partition_name  like 'SYS%')
 loop
 if x.partition_position  <> max_part THEN

       execute immediate 'select to_char('||x.high_value||'-1,''YYYYMMDD'') from dual' into hv;
partition '||x.partition_name
                   --||' to DATE_'||hv);
       execute immediate('alter table DEMO rename partition '||x.partition_name
                  ||' to DATE_'||hv);   
end if;
end loop;   
 end; 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:01:01.023

不要这样做。我知道 Oracle 不会为系统创建的间隔分区遵循预定义的分区命名模式很不方便（将来可能会增强），但是每 2 分钟更改一次表并不是一个好的选择。

幸运的是，您实际上只需要在查询中指定分区名称时提前知道它。典型的查询类似于：

```
select * from my_table partition (blah); 
```

在 11g 中，您可以使用“partition for”子句来解决系统生成的名称，如下所示（间隔 DATE 分区的示例）：

```
SQL> set display on
SQL> set linesize 200
SQL> drop table test_data
Table dropped.
SQL> create table test_data (
   start_date        DATE,
   store_id          NUMBER,
   inventory_id      NUMBER,
   qty_sold          NUMBER
)
PARTITION BY RANGE (start_date)
INTERVAL(NUMTOYMINTERVAL(1, 'MONTH'))
(
   PARTITION part_01 values LESS THAN (TO_DATE('20130101','YYYYMMDD'))
)
Table created.
SQL> insert into test_data values (to_date('20121231', 'YYYYMMDD'), 1, 2, 1)
1 row created.
SQL> commit
Commit complete.
SQL> SELECT table_name, partition_name, high_value
FROM   user_tab_partitions
WHERE table_name = 'TEST_DATA'
ORDER BY table_name, partition_name

TABLE_NAME                     PARTITION_NAME                 HIGH_VALUE                                        
------------------------------ ------------------------------ --------------------------------------------------
TEST_DATA                      PART_01                        TO_DATE(' 2013-01-01 00:00:00', 'SYYYY-MM-DD HH24:
                                                              MI:SS', 'NLS_CALENDAR=GREGORIAN')                 

1 row selected.
SQL> insert into test_data values (to_date('20130101', 'YYYYMMDD'), 1, 5, 8)
1 row created.
SQL> insert into test_data values (to_date('20130115', 'YYYYMMDD'), 2, 4, 5)
1 row created.
SQL> insert into test_data values (sysdate, 2, 3, 2)
1 row created.
SQL> commit
Commit complete.
SQL> SELECT table_name, partition_name, high_value
FROM   user_tab_partitions
WHERE table_name = 'TEST_DATA'
ORDER BY table_name, partition_name

TABLE_NAME                     PARTITION_NAME                 HIGH_VALUE                                        
------------------------------ ------------------------------ --------------------------------------------------
TEST_DATA                      PART_01                        TO_DATE(' 2013-01-01 00:00:00', 'SYYYY-MM-DD HH24:
                                                              MI:SS', 'NLS_CALENDAR=GREGORIAN')                 

TEST_DATA                      SYS_P67                        TO_DATE(' 2013-02-01 00:00:00', 'SYYYY-MM-DD HH24:
                                                              MI:SS', 'NLS_CALENDAR=GREGORIAN')                 

TEST_DATA                      SYS_P68                        TO_DATE(' 2013-03-01 00:00:00', 'SYYYY-MM-DD HH24:
                                                              MI:SS', 'NLS_CALENDAR=GREGORIAN')                 

3 rows selected.
SQL> -- get data for January partition only
SQL> select * from test_data partition for (to_date('20130101', 'YYYYMMDD'))

START_DATE    STORE_ID INVENTORY_ID   QTY_SOLD
----------- ---------- ------------ ----------
01-JAN-2013          1            5          8
15-JAN-2013          2            4          5

2 rows selected. 
```

# assembly - 汇编中“和”的目的

> ID：14876125
> 
> 赞同：0
> 
> 时间：2013-02-14T13:39:41.257
> 
> 标签：assembly, x86, dos

有人可以在汇编中定义我`and`关键字的确切用途吗？我在这里提供了一个代码，有人可以解释一下`and`这段代码的作用吗？顺便说一句，`and`它位于下面的某个地方，`begin`只是为了让您轻松找到它。

```
code segment
assume cs:code;ds:code
org 100h

begin:

mov ah, 09
mov dx, offset msg1
int 21h

mov ah,01h ;ask user
int 21h
and al,01h
jz EVENn
mov ah, 09 ;display string
mov dx, offset oddmsg
int 21h
jmp ENDd

EVENn:

mov ah, 09 ;display string
mov dx, offset evenmsg
int 21h

ENDd:
int 20h

msg1:db 'enter a number: $'
evenmsg:db 0ah,0dh, 'EVEN $'
oddmsg:db 0ah,0dh, 'ODD$'

code ends
end begin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:47:54.743

运算符执行`and`逻辑与运算。

在这种情况下，它用于屏蔽值中的单个位。例如，如果您`6Dh`在`al`（从 STDIN 读取的字符`m`）中获取值，则该操作仅留下最低有效位：

```
6Dh  01101101
01h  00000001
--------------- and
     00000001 
```

偶数字符代码给出结果`00h`，奇数字符代码给出结果`01h`。

# c# - 如何使用 OAuth 2 - OAuth 2 C# 示例

> ID：14876126
> 
> 赞同：17
> 
> 时间：2013-02-14T13:39:41.300
> 
> 标签：c#, oauth, oauth-2.0, dotnetopenauth

我必须弄清楚如何使用 OAuth 2 才能使用 Deviantart api。

我得到了 client_id 和 client_secret 部分

这里他们提供的信息

端点

您需要使用 OAuth 2.0 向我们进行身份验证的唯一信息是您的应用程序的`client_id`和`client_secret`值，以及下面显示的端点。

OAuth 2.0 草案 10：

[https://www.deviantart.com/oauth2/draft10/authorize](https://www.deviantart.com/oauth2/draft10/authorize) [https://www.deviantart.com/oauth2/draft10/token](https://www.deviantart.com/oauth2/draft10/token)

OAuth 2.0 草案 15：

[https://www.deviantart.com/oauth2/draft15/authorize](https://www.deviantart.com/oauth2/draft15/authorize) [https://www.deviantart.com/oauth2/draft15/token](https://www.deviantart.com/oauth2/draft15/token)

安慰剂呼叫

第一个依赖 OAuth 2.0 身份验证的 API 调用是安慰剂调用。在进行可能很长的真正 API 调用（如文件上传）之前检查访问令牌是否仍然有效很有用。您可以使用以下端点之一调用它（必须提供访问令牌）：

[https://www.deviantart.com/api/draft10/placebo](https://www.deviantart.com/api/draft10/placebo) [https://www.deviantart.com/api/draft15/placebo](https://www.deviantart.com/api/draft15/placebo)

您需要使用与您获得令牌的 OAuth 2.0 草案对应的端点。

它总是返回以下 JSON：`{status: "success"}`

我在网上搜索并找到了这个很棒的库。

DotNetOpenAuth v4.0.1

[http://www.dotnetopenauth.net/](http://www.dotnetopenauth.net/)

将其添加为参考，但不知道下一步该做什么。即使是一个非常小的例子也对如何使用 OAuth 2 非常有用

```
using DotNetOpenAuth;
using DotNetOpenAuth.OAuth2; 
```

这里是deviantart提供信息的页面

[http://www.deviantart.com/developers/oauth2](http://www.deviantart.com/developers/oauth2)

好的，到目前为止我得到了什么但没有工作

```
public static WebServerClient CreateClient() {
    var desc = GetAuthServerDescription();
    var client = new WebServerClient(desc, clientIdentifier: "myid");
    client.ClientCredentialApplicator = ClientCredentialApplicator.PostParameter("mysecret");
    return client;
}

public static AuthorizationServerDescription GetAuthServerDescription() {
    var authServerDescription = new AuthorizationServerDescription();
    authServerDescription.AuthorizationEndpoint = new Uri(@"https://www.deviantart.com/oauth2/draft15/authorize");
    authServerDescription.TokenEndpoint = new Uri(@"https://www.deviantart.com/oauth2/draft15/token");
    authServerDescription.ProtocolVersion = ProtocolVersion.V20;
    return authServerDescription;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T13:41:32.250

现在要做的最简单的事情是获取 Visual Studio 2013 并创建一个新的 ASP.NET Web 应用程序，选择“个人用户帐户”作为您的身份验证类型。那里有一个开箱即用的 OAuth 2 实现（在 App_Start\Startup.Auth.cs 中配置），您可以将其切出然后适应您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-05T13:39:28.127

在 ASP.NET Core 安全项目中，现在有一个现成的解决方案：

Nuget 包：[AspNet.Security.OAuth.DeviantArt](https://www.nuget.org/packages/AspNet.Security.OAuth.DeviantArt/)

# java - 由文本文件中的字符和行读取

> ID：14876128
> 
> 赞同：6
> 
> 时间：2013-02-14T13:39:54.243
> 
> 标签：java, file-io

对于一个非常基本的 RPG（好吧，目前是自上而下在游戏中四处走动），我想创建一个读取“保存”文件并将其存储在内存中的方法（稍后会进行保存。）我希望这个保存文件通过有一种方法使其某些行不被该方法读取，从而使用户友好，以便我可以对修改它等进行说明。目前，计划是让它不读取前面带有 % 的行，但如果 % 导致问题，这可能会改变。

我希望在一个压缩块中保存格式本身——一个或两个字母数字字符表示单个“图块”的内容。我不想简单地为每个屏幕区域设置 169 行，我宁愿将它们放在 13*13 的压缩块中（再次，为了用户友好。）

本质上，我怎么能a）检测一行是否以 % b）如果是，跳到下一行 c）如果不是，一次读取两个字符复制到字符串数组 d）跳过空白行

我了解 BASIC IO，但我无法找到一种按字符和按行阅读的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:48:47.537

Personally, I would use a `BufferedReader` to read the file line by line into individual `String` objects, and inspect the contents. You can check if a line starts with a comment character by using the cunningly named `String.startsWith("%")` method, and get at individual characters in the line using `String.charAt(index)`, or double characters using `String.substring(start, start+2)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:43:17.910

看看扫描仪类[http://docs.oracle.com/javase/tutorial/essential/io/scanning.html](http://docs.oracle.com/javase/tutorial/essential/io/scanning.html)它应该能够完成大部分工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:47:59.560

我会用扫描仪逐行阅读，解析前几个字符，如果需要，继续。例子：

```
Scanner lineReader = new Scanner(new FileReader(filename));
Scanner parser;
while (scanner.hasNextLine()){
  parser = new Scanner(scanner.nextLine());
  if(parser.hasNext())){ //checks for blank line
    String firstWord = parser.next();
    if(/*Check for %*/)
      continue;
    else
      //parse as you will
  }
} 
```

# android - 无法为 facebook 打开会话

> ID：14876133
> 
> 赞同：1
> 
> 时间：2013-02-14T13:40:08.607
> 
> 标签：android, android-facebook

我已经使用[这个教程制作了 FBLogin 演示](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

代码在这里 //MainActivity.java

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // start Facebook Login
    Session.openActiveSession(this, true, new Session.StatusCallback() {

        // callback when session changes state
        @Override
        public void call(Session session, SessionState state,
                Exception exception) {

            Log.v("log_tag", "Token=" + session.getAccessToken());
            Log.v("log_tag", "Token=" + session.isOpened());

            if (session.isOpened()) {

                // make request to the /me API
                Request.executeMeRequestAsync(session,
                        new Request.GraphUserCallback() {

                            // callback after Graph API response with user
                            // object
                            @Override
                            public void onCompleted(GraphUser user,
                                    Response response) {
                                if (user != null) {
                                    TextView welcome = (TextView) findViewById(R.id.welcome);
                                    welcome.setText("Hello "
                                            + user.getName() + "!");
                                }
                            }
                        });
            }
        }
    });

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode,
            resultCode, data);
}
} 
```

//AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.fbdemo"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="8" />

<uses-permission android:name="android.permission.INTERNET" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.fbdemo.MainActivity"
        android:label="@string/app_name" >
         <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name="com.facebook.LoginActivity" />

    <meta-data
        android:name="com.facebook.sdk.ApplicationId"
        android:value="@string/app_id" />
</application>

</manifest> 
```

输出`log_cat`是这样的

```
02-14 19:08:25.251: V/log_tag(1558): Token=
02-14 19:08:25.251: V/log_tag(1558): Token=false
02-14 19:08:38.834: V/log_tag(1558): Token=
02-14 19:08:38.834: V/log_tag(1558): Token=false 
```

请告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-18T09:41:59.590

问题在于生成的哈希键。有时可能会生成错误的键。因此，请检查密钥并重试。当我更改密钥时，问题为我解决了。

# extjs - 在标签面板中添加按钮 [extjs 3.2]

> ID：14876138
> 
> 赞同：3
> 
> 时间：2013-02-14T13:40:21.610
> 
> 标签：extjs, extjs3, extends, tabpanel

![在此处输入图像描述](../Images/00118d102b323c1b47e52782253a3040.png)

我想在标记的地方添加一个按钮。请任何人都可以帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T16:50:32.417

您可以在那里添加自定义组件，但必须扩展 TabPanel 类。您可以在此处找到示例：[左侧](http://jsfiddle.net/hNhjR/6/)和[右侧](http://jsfiddle.net/remy/hNhjR/3/)。

```
var scrollMenu = this.header.insertFirst({
    cls: 'x-tab-tabmenu-right'
}); 
```

以及 Button 的 css 样式：

```
.x-tab-scroller-right-over {
    background-position: -18px 0;
}

.x-tab-tabmenu-right {
    background: transparent url(http://dev.sencha.com/deploy/ext-3.4.0/examples/tabs/tab-scroller-menu.gif) no-repeat 0 0;
    border-bottom: 1px solid #8db2e3;
    width:18px;
    position:absolute;
    right:0;
    top:0;
    z-index:10;
    cursor:pointer;
}
.x-tab-tabmenu-over {
    background-position: -18px 0;
}
.x-tab-tabmenu-disabled {
    background-position: 0 0;
    opacity:.5;
    -moz-opacity:.5;
    filter:alpha(opacity=50);
    cursor:default;
} 
```

# jquery - 基于文本选择的jQuery多选

> ID：14876139
> 
> 赞同：0
> 
> 时间：2013-02-14T13:40:30.983
> 
> 标签：jquery, text, multi-select, attr, selected

试图让以下工作，但无法真正找到阻止选择发生的错误。

```
<select multiple="multiple" class="inputbox" name="keywords[]" id="keywords">
<option value="4">4</option>
<option value="11">Car</option>
<option value="8" selected="selected">Cat</option>
<option value="9">Elephant</option>
<option value="6">Man</option>
<option value="10">Mouse</option>
<option value="1">One person</option>
<option value="2">People</option>
<option value="5">Woman</option>
</select>
<input type="text" class="inputbox" value="" id="keywords_new" name="keywords_new">
<a href="#" id="addkeyword">Add keyword</a> 
```

jQuery

```
$(document).ready(function(){
    $('#addkeyword').click(function (event) {
    event.preventDefault();
    var newkeyword = $('#keywords_new').val();
    var keyselect = $('#keywords');
    keyselect.each(function () {
        alert(newkeyword);
        if ($(this).text() == newkeyword){
                alert(newkeyword);
            $(this).attr("selected", "selected").multiselect("refresh");
        }
    });
});
}); 
```

[在http://jsfiddle.net/SwmN6/58/](http://jsfiddle.net/SwmN6/58/)上进行测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:46:54.613

```
var keyselect = $('#keywords') 
```

不应该是这个吗？

```
var keyselect = $('#keywords option') 
```

# java - Java ZK ListBox listModel 排序后不同步

> ID：14876142
> 
> 赞同：0
> 
> 时间：2013-02-14T13:40:38.910
> 
> 标签：java, listbox, zk

嘿伙计们，我是 ZK 框架的新手，稍后我在视图中对列表框进行排序，我将列表框传递给控制器​​，我需要用户选择的项目，但在模型中，项目与排序同步，但在 getSelection数组未与使用原始数据插入的排序同步这里是代码。

```
public void createPDFFromModel(Listbox list,String ref){                
    BindingListModelList model = (BindingListModelList)list.getModel();
    for(int i=0;i<model.size();i++){
        System.out.println((((ZamoraListitemAdapter)model.get(i)).getName()));
    }  
    System.out.println("-------------------------------------------");
    //Data Printed OK.
    java.util.ArrayList<ZamoraListitemAdapter>selections = new java.util.ArrayList<ZamoraListitemAdapter>(model.getSelection());
    for(int i=0;i<selections.size();i++){
        ZamoraListitemAdapter clazz = (ZamoraListitemAdapter)selections.get(i);
        System.out.println(clazz.getName());
        //Out of sync with model and with sorting 
    } 
```

我的问题是如何在 getSelection 模型中排序后获得项目的顺序。我正在使用 ZK 5.2.8

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:22:46.070

您可以在创建后[进行排序。](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29) 也许还有其他/更好的解决方案，但是如果 您需要更多帮助，您必须写下您尝试实现的目标。`selections`

## 回复评论

我的意思是

```
ArrayList<ZamoraListitemAdapter>selections = 
new ArrayList<ZamoraListitemAdapter>(model.getSelection());
Collections.sort(selections); 
```

`selections`您选择的所有项目也是如此`List`，只要
您以相同的方式比较这些项目，它们的顺序就应该正确

### 如果您的意思是重新排序而不是排序...

对我来说，排序意味着它是自动的，由算法完成。
例如，重新排序意味着您拖动对象。

如果您的意思是重新排序，而您`Model`无法知道是否
选择了某个项目，那么您可能做错了什么。
Cos zk 有两个类[`ListModelList`](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zul/ListModelList.html)， 它们实现了选择行为所需的所有方法，如果程序员想要一个可选的，其中一个固有的，自定义应该， 因为这是最简单的方法。[`AbstractListModel`](http://www.zkoss.org/javadoc/latest/zk/org/zkoss/zul/AbstractListModel.html)

`Model``Model`

你也应该阅读[这个](http://books.zkoss.org/wiki/ZK%20Developer%27s%20Reference/Performance%20Tips/Listbox,%20Grid%20and%20Tree%20for%20Huge%20Data/Implement%20ListModel%20and%20TreeModel)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T18:26:23.307

```
model.getSelection() 
```

返回一个集合（无顺序），而不是使用

```
model.getInnerList() 
```

返回 ListModeList

# facebook - 无法通过喜欢按钮跟踪 Facebook 分享

> ID：14876145
> 
> 赞同：1
> 
> 时间：2013-02-14T13:40:45.157
> 
> 标签：facebook, facebook-like, share, tracking

我目前正在尝试在参考 Facebook 文档的页面上跟踪一些事件：[https ://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

点赞按钮是使用 HTML5 版本实现的，没有额外的发送按钮。

```
<div class="fb-like" data-href="xxx" data-send="false" data-layout="button_count" data-width="auto" data-show-faces="false" data-font="arial"></div> 
```

跟踪适用于通常的“like/edge.create”事件，但是否可以跟踪对喜欢页面后出现的框中的“发布到 facebook”按钮的点击？

我尝试了“message.send”事件，但它似乎不起作用。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T03:05:49.970

目前，如实施，没有没有。由于点赞而在“点赞”按钮下方弹出的“发布到 Facebook”框是“相对”新的（以至于许多社交小部件不小心将其隐藏在其实现中）。

我怀疑 Facebook 开发人员正在努力更新事件以支持这种遗漏。作为一种变通方法，我一直鼓励我们的客户使用`FB.ui({method:'feed',...})`具有回调机制的共享来实现。

希望我能尽快更新这个答案，以便更好地支持“赞”按钮的操作。

# java - 使用 HtmlUnit 或其他 java 工具抓取 flash

> ID：14876147
> 
> 赞同：2
> 
> 时间：2013-02-14T13:40:56.573
> 
> 标签：java, flash, htmlunit

我正在使用 HtmlUnit 从站点中删除日期，但登录后，所有数据都使用 adobe flash player 作为 swf 对象显示，我不知道有任何方法可以从此类页面中删除数据。

有没有办法从 Flash 页面中提取数据，如果有，请帮助我，使用 HtmlUnit 或任何其他 java 工具。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:47:02.117

您无法使用 HtmlUnit 与 Flash 小程序进行交互。您可以尝试使用[selenium](http://docs.seleniumhq.org/)；我从未使用过它，但看起来有一些插件可以启用 Flash 通信，如[Flash Selenium](http://code.google.com/p/flash-selenium/)

就个人而言，我认为测试用户界面的唯一方法是，当他们有这样的陷阱时，聘请一个测试人员（一个很好的人），并教开发人员在每次更改 GUI 时深入测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-30T03:47:50.560

似乎为时不晚，[我](https://stackoverflow.com/questions/24995989/how-to-enable-flash-to-htmlunit)回答了我的问题。你需要做的就是

1.  即时创建您自己的浏览器
2.  注入“stockwave flash”插件
3.  用新的浏览器实例实例化 htmlunit。

希望它会帮助你。

# probability - 我可以制作与弦 MRF 等效的非弦 MRF 吗？

> ID：14876149
> 
> 赞同：0
> 
> 时间：2013-02-14T13:41:08.300
> 
> 标签：probability, bayesian-networks, markov, probability-theory, markov-models

这里通过等价我的意思是，在这两种情况下分布（整个表）是否相等？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T20:12:18.383

您始终可以添加边以将非弦 MRF 转换为弦（但随后您的因子会变大）。

# jquery - 如何使用 jQuery/javascript 应用多个 CSS 背景属性？

> ID：14876151
> 
> 赞同：1
> 
> 时间：2013-02-14T13:41:16.183
> 
> 标签：jquery, css, background, gradient

我需要动态生成 CSS 模式，为此我需要将几个`linear-gradient`或`radial-gradient`应用于客户端的 CSS`background`属性。而且我需要同时动态改变这些渐变的参数。

如果我使用它，则只有一个渐变应用于背景：

```
var color1;
var color2;
var color3;
var color4;
var direction1;
var direction2;
var direction3;
var direction4;
var size;

$("body").css({
    background: 'linear-gradient('+direction1+', '+color1+' 25%, transparent 25%) '+size+'/2 0,
                 linear-gradient('+direction2+', '+color2+' 25%, transparent 25%) '+size+'/2 0,
                 linear-gradient('+direction3+', '+color3+' 25%, transparent 25%),
                 linear-gradient('+direction4+', '+color4+' 25%, transparent 25%)'
}); 
```

同样的事情也发生在这里，因为每个属性都会覆盖另一个：

```
$("body").css('background','linear-gradient('+direction1+', '+color1+' 25%, transparent 25%) '+size+'/2 0)');
$("body").css('background','linear-gradient('+direction2+', '+color2+' 25%, transparent 25%) '+size+'/2 0)');
$("body").css('background','linear-gradient('+direction3+', '+color3+' 25%, transparent 25%)');
$("body").css('background','linear-gradient('+direction4+', '+color4+' 25%, transparent 25%)'); 
```

我试过使用`LessCSS`，但它的 CPU 太密集了，因为每次 css 属性更改时，即每次鼠标移动时，它都需要渲染一个新的样式表（这是一个要求）。

请注意，我需要一次应用所有渐变，而不是让浏览器决定使用哪一个。

**问题 1：** 知道如何更有效地做到这一点吗？

**问题 2：** 我还注意到，当我在一个声明中声明多个属性时（即在一个属性中也`width`和`height`旁边，或者甚至只是和使用该属性）只有第一个被应用。如何解决这个问题？`linear-gradient``background``width``height``background-size`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:28:21.277

尝试这样的事情：

```
$("body").css({
    'backgroundImage': 'linear-gradient('+direction1+', '+color1+', transparent), 
        linear-gradient('+direction2+', '+color2+', transparent), 
        linear-gradient('+direction3+', '+color3+', transparent),  
        linear-gradient('+direction4+', '+color4+', transparent)'
    }) 
```

# java - Java aligning 3 panels using grouplayout

> ID：14876159
> 
> 赞同：4
> 
> 时间：2013-02-14T13:41:39.750
> 
> 标签：java, swing, layout-manager, grouplayout

I can't get my 3 panels to align properly. I basically have 1 big panel and 2 smaller (not necesarily identical) ones. The big one is on the left and the 2 smaller ones on the right, with one above the other. The components should remain dynamically resizeable.

What I want is this( 9's is the big one, 1 is one of the small one, 2 is the other small one):

```
999999 111
999999 111
999999 111
999999 222
999999 222 
```

What I get is this:

```
999999 111
999999 111
999999 111
999999 
999999 
       222
       222 
```

My code is as follows with graphsimscrollpane big one and workpanel and informationpanel the smaller ones:

```
 private void createLayout(GroupLayout groupLayout) {
    groupLayout.setHorizontalGroup(
            groupLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(graphSimScrollPane,  0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap(20, Short.MAX_VALUE)
                .addGroup(groupLayout.createParallelGroup(Alignment.CENTER)
                        .addComponent(workPanel, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(informationPanel, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        groupLayout.setVerticalGroup(
            groupLayout.createSequentialGroup()
                .addGroup(groupLayout.createParallelGroup(Alignment.CENTER)
                    .addComponent(graphSimScrollPane,  0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(workPanel, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addComponent(informationPanel, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        guiFrame.getContentPane().setLayout(groupLayout);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:15:42.810

The basic structure of your GroupLayout would be similar to this code :

```
 JPanel pnl = new JPanel();
    GroupLayout l = new GroupLayout(pnl);
    pnl.setLayout(l);

    JButton b1 = new JButton("1");
    JButton b2 = new JButton("2");
    JButton b3 = new JButton("3");

    l.setHorizontalGroup(
            l.createSequentialGroup()
                .addComponent(b1)
                .addGroup(l.createParallelGroup()
                    .addComponent(b2)
                    .addComponent(b3)));

    l.setVerticalGroup(
            l.createParallelGroup()
                .addComponent(b1)
                .addGroup(l.createSequentialGroup()
                    .addComponent(b2)
                    .addComponent(b3)));

    JFrame f = new JFrame("test");
    f.setContentPane(pnl);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setSize(1024, 768);
    f.setVisible(true); 
```

In plain english, the constraint on the horizontal axis reads "b1, then b2 and b3 in parallel". The constraint on the vertical axis reads "b1 in parallel with a group composed of b1 then b2".

Obviously, the resizability properties are mising, here. You need to give more details on how you want the component to behave regarding their size.

One possibility would be to give the two small components the whole vertical space, but to give them only their prefered horizontal space. And of course, give the big component the remaining space.

```
 l.setHorizontalGroup(
            l.createSequentialGroup()
                .addComponent(b1, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(l.createParallelGroup()
                    .addComponent(b2, 0, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                    .addComponent(b3, 0, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)));

    l.setVerticalGroup(
            l.createParallelGroup()
                .addComponent(b1, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(l.createSequentialGroup()
                    .addComponent(b2, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(b3, 0, GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))); 
```

Note that the structure is the same than the first code, only the size parameters were added.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T15:13:42.277

I really don't know, how to use `GroupLayout`, though if you are willing to do the task using `GridBagLayout`, then this example code might can do that task for you. Please do have a look :

```
import javax.swing.*;
import java.awt.*;
import java.util.Random;

/**
 * Created with IntelliJ IDEA.
 * User: Gagandeep Bali
 * Date: 2/14/13
 * Time: 8:18 PM
 * To change this template use File | Settings | File Templates.
 */
public class GridBagExample
{
    private GridBagConstraints gbc;
    private Random random;
    private JPanel largePanel;
    private JPanel smallPanel;
    private JPanel superSmallPanel;

    public GridBagExample()
    {
        gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;

        random = new Random();
    }

    private void displayGUI()
    {
        JFrame frame = new JFrame("GridBagLayout Example");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = getPanel();
        contentPane.setLayout(new GridBagLayout());

        largePanel = getPanel();
        contentPane.add(largePanel, getConstraints(
                    GridBagConstraints.BOTH, 0, 0, 1, 2, 0.7f, 1.0f));
        smallPanel = getPanel();
        contentPane.add(smallPanel, getConstraints(
                    GridBagConstraints.BOTH, 1, 0, 1, 1, 0.3f, 0.7f));
        superSmallPanel = getPanel();
        contentPane.add(superSmallPanel, getConstraints(
                    GridBagConstraints.BOTH, 1, 1, 1, 1, 0.3f, 0.3f));

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    private JPanel getPanel()
    {
        JPanel panel = new JPanel();
        panel.setOpaque(true);
        panel.setBackground(getColor());
        panel.setBorder(BorderFactory.createCompoundBorder(
                BorderFactory.createLineBorder(getColor(), 5),
                    BorderFactory.createEmptyBorder(5, 5, 5, 5)));

        return panel;
    }

    private Color getColor()
    {
        return (new Color(
                random.nextFloat(), random.nextFloat()
                , random.nextFloat(), random.nextFloat()));
    }

    private GridBagConstraints getConstraints(
                int filler, int x, int y, int w, int h
                                 , float weightx, float weighty)
    {
        gbc.fill = filler;
        gbc.gridx = x;
        gbc.gridy = y;
        gbc.gridwidth = w;
        gbc.gridheight = h;
        gbc.weightx = weightx;
        gbc.weighty = weighty;

        return gbc;
    }

    public static void main(String... args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new GridBagExample().displayGUI();
            }
        });
    }
} 
```

# iphone - 重复间隔设置为每小时时 UILocalNotification 应用程序崩溃

> ID：14876160
> 
> 赞同：1
> 
> 时间：2013-02-14T13:41:42.560
> 
> 标签：iphone, ios, ipad, uilocalnotification, repeat

其他重复间隔工作正常，但是当我将通知设置为每小时重复一次并且计时器关闭时，应用程序会冻结，并且在我清除所有本地通知之前无法重新打开应用程序。

```
switch(repeatType) {
            case kRepeatHourly:
                notif.repeatInterval = NSHourCalendarUnit;
                break;
            case kRepeatDaily:
                notif.repeatInterval = NSDayCalendarUnit;
                break;
            case kRepeatWeekly:
                notif.repeatInterval = NSWeekCalendarUnit;
                break;
            case kRepeatMonthly:
                notif.repeatInterval = NSMonthCalendarUnit;
                break;
            case kRepeatAnnually:
                notif.repeatInterval = NSYearCalendarUnit;
                break;
            default:
                break;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:48:16.147

```
- (void)scheduleNotification {

    [reminderText resignFirstResponder];
    [[UIApplication sharedApplication] cancelAllLocalNotifications];

    Class cls = NSClassFromString(@"UILocalNotification");
    if (cls != nil) {

        UILocalNotification *notif = [[cls alloc] init];
        notif.fireDate = [datePicker date];
        notif.timeZone = [NSTimeZone defaultTimeZone];

        notif.alertBody = @"Did you forget something?";
        notif.alertAction = @"Show me";
        notif.soundName = UILocalNotificationDefaultSoundName;
        notif.applicationIconBadgeNumber = 1;

        NSInteger index = [scheduleControl selectedSegmentIndex];
        switch (index) {
            case 1:
                notif.repeatInterval = NSMinuteCalendarUnit;
                break;
            case 2:
                notif.repeatInterval = NSHourCalendarUnit;
                break;
            case 3:
                notif.repeatInterval = NSDayCalendarUnit;
                break;
            case 4:
                notif.repeatInterval = NSWeekCalendarUnit;
                break;
            default:
                notif.repeatInterval = 0;
                break;
        }

        NSDictionary *userDict = [NSDictionary dictionaryWithObject:reminderText.text
                                                forKey:kRemindMeNotificationDataKey];
        notif.userInfo = userDict;

        [[UIApplication sharedApplication] scheduleLocalNotification:notif];
        [notif release];
    }
} 
```

有关更多详细信息，请在此处下载源代码表格[参考链接](http://useyourloaf.com/blog/2010/09/13/repeating-an-ios-local-notification.html)

# python - 两个“np.longdouble”的总和会产生很大的数值误差

> ID：14876165
> 
> 赞同：3
> 
> 时间：2013-02-14T13:42:01.110
> 
> 标签：python, numpy, long-double

早上好，

我正在从 FITS 文件中读取两个数字（表示单个数字的整数和浮点部分），将它们转换为长双精度数（在我的机器中为 128 位），然后将它们相加。

结果并不像使用 128 位浮点数所期望的那样精确。这是代码：

```
a_int = np.longdouble(read_header_key(fits_file, 'I'))
print "I %.25f" % a_int, type(a_int)
a_float = np.longdouble(read_header_key(fits_file, 'F'))
print "F %.25f" % a_float, a_float.dtype
a = a_int + a_float
print "TOT %.25f" % a, a.dtype 
```

这是我得到的答案：

```
I 55197.0000000000000000000000000 <type 'numpy.float128'>
F 0.0007660185200000000195833 float128
TOT 55197.0007660185219720005989075 float128 
```

结果与我所期望的（55197.0007660185200000000195833）相差11个十进制数字（总共16个有效数字）。我希望 128 位浮点数的精度更高。我究竟做错了什么？

此结果在 Mac 机器和 Linux 32 位机器上重现（在这种情况下，dtype 为 float96，但值完全相同）

在此先感谢您的帮助！

马泰奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:50:17.460

我的猜测是`%f`修饰符从您的 longdouble 对象构造一个浮点数，并在创建格式字符串时使用它。

```
>>> import numpy as np
>>> np.longdouble(55197)
55197.0
>>> a = np.longdouble(55197)
>>> b = np.longdouble(0.0007660185200000000195833)
>>> a
55197.0
>>> b
0.00076601852000000001958
>>> a + b
55197.00076601852
>>> type(a+b)
<type 'numpy.float128'>
>>> a + b == 55197.00076601852
False 
```

作为旁注，甚至`repr`没有打印足够的数字来重建对象。这仅仅是因为你不能有一个足以传递给你的浮点文字`longdouble`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T13:52:21.590

问题在于您打印的`np.longdouble`. 当您使用 格式化时`%f`，Python 在打印之前将结果转换为浮点数（64 位）。

这里：

```
>>> a_int = np.longdouble(55197)
>>> a_float = np.longdouble(76601852) / 10**11
>>> b = a_int + a_float
>>> '%.25f' % b
'55197.0007660185219720005989075'
>>> '%.25f' % float(b)
'55197.0007660185219720005989075'
>>> b * 10**18
5.5197000766018519998e+22 
```

`longdouble`请注意，在我的机器上，与普通`double`（小数点后 20 位而不是 15 位）相比，我只获得了更高的精度。因此，可能值得看看该`Decimal`模块是否更适合您的应用程序。`Decimal`处理任意精度的十进制浮点数而不会损失精度。

# javascript - 如何在类似于'this'的jquery函数中使用“arguments”对象？

> ID：14876174
> 
> 赞同：3
> 
> 时间：2013-02-14T13:42:28.923
> 
> 标签：javascript, jquery, backbone.js

我需要`arguments`在 jQuery 函数中使用参数作为我自己的元素，而不是默认元素。我的代码：我应该调用骨干超类`$(window).load`：

```
 MyController.__super__.scroll.apply(this, arguments); 
```

我做了这样的事情：

```
 var context = this;
 var contextArgs= arguments;
 $(window).load(
   function(){
   MyController.__super__.scroll.apply(context , contextArgs);  //call backbone superclass
 }); 
```

我不想创建新的参数“context”和“contextArgs”。我只能阻止创建 var context = this; 通过使用 Jquery.proxy：

```
 var contextArgs= arguments;
 $(window).load(
     $.proxy(function() {
         MyController.__super__.scroll.apply(this , contextArgs);
     },this)
 ); 
```

如何防止创建另一个参数 `var contextArgs= arguments;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:47:40.843

您可以将其他参数传递给`proxy`，它们将作为函数中的参数提供：

```
$(window).load(
    $.proxy(function(contextArgs){
        MyController.__super__.scroll.apply(this , contextArgs);
    },this, arguments)
); 
```

# objective-c - 双向KVO：控制器更新模型，通知控制器

> ID：14876178
> 
> 赞同：0
> 
> 时间：2013-02-14T13:42:51.980
> 
> 标签：objective-c, model-view-controller, key-value-observing

我目前正在为 iOS 重写一个表单控制器。它是一个绑定到模型的自定义对象，并处理编辑表单字段、跳转到上一个/下一个字段、处理自定义键盘、验证数据......

第一个版本基于用于存储表单值的 plist，表单控制器本身保存所有数据。现在我想将存储（模型）与表单控制器分离，因此我已经决定使用 KVO。

为简单起见，让我们假设我有一个设计用于编辑缺勤时间跨度的表单。所以它有两个字段：`leaveDate`和`returnDate`.

我的模型如下：

```
@interface Absence
    @property (strong, nonatomic) NSDate *leaveDate;
    @property (strong, nonatomic) NSDate *returnDate;
    @property (readonly, nonatomic) BOOL isValid;
@end 
```

我的表单控制器有一个`model`指向该对象的属性。

当用户点击我的 XIB 中的“离开日期”文本字段时，表单控制器会根据我的模型的当前值提交并显示一个日期选择器`leaveDate`。当用户选择其他日期时，表单控制器使用`setValue:forKey:`.

该`isValid`属性被声明为受`leaveDate`and `returnDate`（使用`+keyPathsForValuesAffectingIsValid`）影响，并且表单控制器已注册以监视此属性的更改，以动态启用/禁用提交按钮。

到目前为止，一切都像一个魅力。现在，对于扭曲的部分：

我希望我的表单控制器能够在模型打开时处理模型中的更改。示例：我在模型中有一条规则，即“缺勤必须至少持续 3 天”。当用户更改休假日期时，如果总时长不超过 3 天，则自动调整返回日期。

所以我的表单控制器还必须注册以监听所有属性的变化。问题是它既改变了属性，又监听了变化。

这样，当用户更改时`leaveTime`，表单控制器会使用`setValue:forKey:`更新模型，但会立即收到 KVO 通知，告知其刚刚所做的更改。这是不必要的并且可能有害（我只是自己进行了更改，不需要告诉我我刚刚完成了）。

到目前为止，我发现的唯一方法是在设置新值之前取消注册，然后立即重新注册，如下所示：

```
[self.model removeObserver:self forKeyPath:self.currentField.key];
[self.model setValue:newValue forKey:self.currentField.key];
[self.model addObserver:self forKeyPath:self.currentField.key options:NSKeyValueObservingOptionNew context:nil]; 
```

它正在工作，但它很丑陋，而且在性能方面我怀疑它是否很棒。

有人对如何做得更好有解释吗？

# TL;博士

`ControllerA`是 的注册 KVO 观察员`Model`。

`ControllerB`更新`Model`==>`ControllerA`收到 KVO 通知。没关系。

`ControllerA`更新`Model`==>`ControllerA`收到 KVO 通知。我不要这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T12:37:39.993

你似乎很关心性能。我不会的。绘图由主运行循环合并，因此设置`textField.text = @"foo";`不应导致绘图、图像处理等在线发生。通常，像这样的设置器会设置它的值，然后调用`[self setNeedsDisplay]`它只设置一个标志（非常便宜），然后在运行循环结束时，绘图系统将触发一次重绘。你可以设置`textField.text`一千次，仍然应该只有一次绘制操作。

正如评论者所建议的那样，您应该这样做，以便您的控制器能够容忍多次更新。如果您正在与 setter 一起进行大量工作，请不要这样做。二传手应该是“愚蠢的”。他们应该设置该值，并在必要时设置一个标志（如`setNeedsDisplay`）。在这种情况下，你应该避免在 setter 中做“真正的工作”。

正如另一位评论者所建议的那样，您也可以不费心在线更新 UI，而让 KVO 将更改传播给所有观察者，*包括*导致更改的控制器。

确实，这些方法中的任何一种都可以，但我怀疑您的性能问题是没有根据的。如果存在性能问题，问题不在于有多个更新，而在于您在每次更新期间都在做真正的工作，此时您应该设置一个标志并稍后再做工作。

# php - php无法加载动态库mssql无法在centos上打开共享对象文件

> ID：14876182
> 
> 赞同：1
> 
> 时间：2013-02-14T13:43:04.037
> 
> 标签：php, installation, 32-bit, centos5

我在 centos 5 32 位，php 版本 5.2.4 上编译

配置选项：

```
'./configure' '--program-prefix=' '--prefix=/usr' '--exec-prefix=/usr' '--bindir=/usr/bin' '--sbindir=/usr/sbin' '--sysconfdir=/etc' '--datadir=/usr/share' '--includedir=/usr/include' '--libdir=/usr/lib' '--libexecdir=/usr/libexec' '--localstatedir=/var' '--sharedstatedir=/var/lib' '--mandir=/usr/share/man' '--infodir=/usr/share/info' '--cache-file=../config.cache' '--with-libdir=lib' '--with-config-file-path=/etc' '--with-config-file-scan-dir=/etc/php.d' '--disable-debug' '--with-pic' '--disable-rpath' '--with-bz2' '--with-exec-dir=/usr/bin' '--with-freetype-dir=/usr' '--with-png-dir=/usr' '--with-xpm-dir=/usr' '--enable-gd-native-ttf' '--without-gdbm' '--with-gettext' '--with-gmp' '--with-iconv' '--with-jpeg-dir=/usr' '--with-openssl' '--with-pcre-regex=/usr' '--with-zlib' '--with-layout=GNU' '--enable-exif' '--enable-ftp' '--enable-magic-quotes' '--enable-sockets' '--enable-sysvsem' '--enable-sysvshm' '--enable-sysvmsg' '--with-kerberos' '--enable-ucd-snmp-hack' '--enable-shmop' '--enable-calendar' '--with-libxml-dir=/usr' '--enable-xml' '--with-apxs2=/usr/sbin/apxs' '--without-gd' '--disable-dom' '--disable-dba' '--without-unixODBC' '--without-pspell' '--disable-wddx' '--disable-posix' '--disable-sysvmsg' '--disable-sysvshm' '--disable-sysvsem' '--with-mysqli=/usr/bin/mysql_config' '--with-mysql' '--enable-mbstring' '--with-mysql=/usr/bin/mysql_config'  '--with-pdo-mysql=/usr/bin/mysql_config' '--enable-zip' '--enable-soap' '--with-gd=/usr' '--with-ldap' '--prefix=/usr/local/freetds' '--with-mssql=/usr/local/freetds' 
```

[我使用本指南](http://forums.cpanel.net/f354/adding-mssql-support-php-66644.html)安装了 freetds

我仍然收到错误

```
[root@portal-test php]# /usr/bin/php -v
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/20060613/mssql.so' - /usr/lib/20060613/mssql.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib/20060613/pdo.so' - /usr/lib/20060613/pdo.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP 5.2.4 (cli) (built: Feb 14 2013 12:47:23) 
Copyright (c) 1997-2007 The PHP Group
Zend Engine v2.2.0, Copyright (c) 1998-2007 Zend Technologies 
```

模块不存在

```
[root@portal-test php-5.2.4]# ll /usr/lib/20060613/mssql.so
ls: /usr/lib/20060613/mssql.so: No such file or directory 
```

一个发现向我展示了以下内容

```
[root@portal-test php-5.2.4]# find / -type f -name "mssql.so"
/usr/src/redhat/BUILD/php-5.2.4/build-cgi/ext/mssql/.libs/mssql.so
/usr/src/redhat/BUILD/php-5.2.4/build-cgi/modules/mssql.so
/usr/src/redhat/BUILD/php-5.2.6/build-cgi/ext/mssql/.libs/mssql.so
/usr/src/redhat/BUILD/php-5.2.6/build-cgi/modules/mssql.so 
```

使用的符号链接

```
[root@portal-test php-5.2.4]# cd /usr/lib
[root@portal-test lib]# ln -s /usr/src/redhat/BUILD/php-5.2.4/build-cgi/ext/mssql/.libs/ 20060613 
```

我现在收到以下错误：

```
PHP Warning:  mssql_connect(): Unable to connect to server:  172.16.0.71 in /opt/invload/include/config.php on line 3 
```

# asp.net-mvc - SaveChanges() 在抛出异常之前不起作用

> ID：14876184
> 
> 赞同：0
> 
> 时间：2013-02-14T13:43:19.910
> 
> 标签：asp.net-mvc, openaccess

对不起我的英语，我会尽我所能。

我有实体“Usuario”，它从 rbacManager 接收对象，调用 Login 方法（见下文）。如您所见，此方法在无法同时匹配用户和密码时引发异常。在这种情况下，我必须增加属性 Intentos，以允许用户只有 3 次失败的机会。

问题如下： SaveChanges 方法没有保存在 Usuario 中修改的值。我认为 SaveChanges 方法由于异常而失败，但我不确定。我在网上找不到任何帮助。

这是操作方法登录：

```
using(EntitiesModel dbContext = new EntitiesModel())
        {
            try
            {
                string hPassword = FormsAuthentication.HashPasswordForStoringInConfigFile(model.Password, "SHA1");

                Usuario usuario = this.rbacManager.Login(model.UserName, hPassword);

                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);

                if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\"))
                {
                    return Redirect(returnUrl);
                }
                else
                    return RedirectToAction("Index", "Home");

            }
            catch (LoginIncorrectoException)
            {
                dbContext.SaveChanges();
                ViewData["Message"] = "User incorrect.";
            }
            catch (UsuarioBloqueadoException)
            {
                ViewData["Message"] = "User locked";
            }

            return View(model);
        } 
```

第四行的方法 Login 抛出异常：

```
using (EntitiesModel context = new EntitiesModel())
        {
            Usuario usuario = this.GetUsuario(username);

            if (usuario == null)
                throw new LoginIncorrectoException();

            if (!usuario.EstaActivo())
            {
                throw new UsuarioBloqueadoException();
            }

            if (usuario.Password != password)
            {
                usuario.Intentos++;

                if (usuario.Intentos >= 3)
                {
                    usuario.Activo = false;
                    context.SaveChanges();
                    throw new UsuarioBloqueadoException();
                }
                else
                {
                    context.SaveChanges();
                    throw new LoginIncorrectoException();
                }
            }

            usuario.Intentos = 0;

            return usuario;
        } 
```

**编辑：**我复制 GetUsuario 方法。

```
 private Usuario GetUsuario(string username)
    {
        using (EntitiesModel context = new EntitiesModel())
        {
            List<Usuario> Usuarios = context
               .Usuarios
               .Where(x => x.Username == username)
               .ToList();

            if (Usuarios.Count == 1)
                return Usuarios.First();
            else
                throw null;
        }
    } 
```

任何人都知道为什么 SaveChanges 不起作用？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:35:03.927

您的问题在于每个方法都在创建和处理自己的 DbContext。因此，当 GetUser 调用返回 User 对象时，它会从 DbContext 中分离出来，因为您已经处理了它。现在不会保存对该用户对象的更改。最直接的解决方法是将在 Login 方法中创建的 EntitiesModel 传递给 GetUser 方法。当然，您应该研究和实施更好的工作单元模式，但这应该可以帮助您克服直接的障碍。您还可以将 GetUser 调用返回的 User 对象附加到在 Login 调用中创建的 EntitiesModel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:21:40.860

'GetUsuario' 方法正在创建它自己的上下文，并且 'Login' 方法中的上下文没有挂起的更改，因为 'Usuario' 对象由另一个上下文（已被释放）管理。

您应该确保在最初用于获取对象的同一上下文实例上调用“SaveChanges”。

# jsf - 绕过客户端验证以检查服务器端验证

> ID：14876185
> 
> 赞同：0
> 
> 时间：2013-02-14T13:43:22.340
> 
> 标签：jsf, facelets

我读过很多书，甚至我的观点是客户端验证使用起来不可靠。这就是为什么我总是更喜欢使用服务器端验证和客户端验证。因此，我想知道是否有任何方法可以手动绕过客户端验证，以便检查我的服务器端验证是否正常工作。我将 JSF 与 Facelets 一起用作视图技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:55:57.057

有太多的库和工具。
这里我提供两个解决方案：

## 1）如果您使用的是 linux，则 curl 命令：

```
curl --data "year=1905&month=7"  http://yoursite.com/page.php 
```

## 2) 蟒蛇

```
import urllib2
import urllib

urllib2.install_opener(urllib2.build_opener(urllib2.ProxyHandler()))

the_url = "http://jira-host/jira/secure/CreateWorklog.jspa"

random_user_agent = 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.1; Trident/6.0)'

'HTTP POST fields
values = {'inline'  : 'true',
    'decorator' : 'dialog',
    'worklogId' : '',
    'id'    : '1027231',
    'timeLogged'    : '1d',
    'startDate' : fdate,
    'adjustEstimate'    : 'auto',
    'comment'   : '',
    'commentLevel': ''}

data = urllib.urlencode(values)

req = urllib2.Request(the_url, data, {
    'Accept': 'text/html, */*; q=0.01',
    'X-Requested-With': 'XMLHttpRequest',
    'User-Agent': random_user_agent,
    'Accept-Language': 'fr-FR,fr;q=0.8,en-US;q=0.6,en;q=0.4',
    'Referer':  'http://jira/jira/browse/TICK-216',
    'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',
    'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:10:15.860

（直到现在）有一些可能性可以使用 Java 为托管 bean 编写测试：

*   [阿奎利安](http://arquillian.org/guides/getting_started/)。它是一个测试 Java EE 组件的框架。
*   [JSFUnit](http://www.jboss.org/jsfunit)，一个帮助您为 JSF 托管 bean 编写单元测试的框架。
*   [使用Apache HttpClient](http://hc.apache.org/)编写单元测试，它将向您的页面发送请求。就个人而言，我不建议这样做，因为您应该专门做很多工作来了解在您的请求中发送到页面的参数（是的，我知道您可以使用 Firebug 或 Chrome 控制台检查 HTTP 流量，但它仍然不是一个好主意）。

# css - html元素对齐

> ID：14876188
> 
> 赞同：1
> 
> 时间：2013-02-14T13:43:26.553
> 
> 标签：css, select, html, input, label

我有以下html元素：

```
<fieldset style="margin:20px;border:5px solid red;padding:0;">

        <label class="offset widget" >Title goes here</label>   
        <input class="offset widget" style="padding:0" type="text" name="fname">
        <div class="offset" style="position:relative;width:120px;display:inline-block;">
            <select class="widget" style="position: absolute; left:0;top:0;">
               <option value="en_KW">English</option>
               <option value="ar_KW">Arabic</option>            
             </select>
        </div>
</fieldset> 
```

和CSS样式：

```
 .offset{
            margin-left:40px;
            margin-right:0;
        }
        .widget{
            width:120px;
            height:16px;
            text-align:right;
            text-height:16px;
            font-size:11px;
            font-family:arial;
            border:2px solid black;
            float:left;
            padding:0;
        } 
```

同样在 jsfiddle：http: [//jsfiddle.net/tPzqG/5/](http://jsfiddle.net/tPzqG/5/)

1）为什么如果我将div显示设置为内联边距不考虑？标签和文本输入元素也是内联元素，并考虑了边距。（在 chrome 中，不在 firefox 中）

2）为什么选择高度小于标签和文本输入的高度，尽管为它们三个指定了高度并且它是相同的？

3）文本对齐确实适用于标签，但不适用于选择（仅在 chrome 中）。是否可以在没有方向的情况下解决此问题：rtl？

4）为什么如果在 div 显示为 inline-block 时未指定 div 高度，那么 div 会移动到字段集下方？（仅在 jsfiddle 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:20:06.667

1) 正如您在 Chrome 上的开发人员工具中看到的，div 元素的尺寸为 0x0。这是因为您将块元素放入内联元素。这是不正确的。请记住，当您将浮动或绝对定位到元素时，它会自动成为块元素。

2）我再次链接到 Chrome 开发者工具。在开发人员工具中，您可以看到浏览器引擎在计算选择元素的高度时略有不同。它需要包括边界高度。

在正常情况下：实际高度 = 高度 + 边框顶部、底部高度 + 填充顶部、底部高度

在这种情况下：实际高度 = 高度 - 边框顶部，底部高度 + 边框顶部，底部高度

3) 样式选择不起作用 - 这是正常情况。重新编辑选择元素，它与浏览器兼容，浏览器不允许这样做。当然也有例外，但在每个浏览器中是不同的

4）我认为这与第一点相同。浏览器布局过程变得疯狂并计算错误的元素偏移量。

我建议您阅读有关浮动、定位、选择样式和 arictle 的内容：http: [//www.html5rocks.com/en/tutorials/internals/howbrowserswork/](http://www.html5rocks.com/en/tutorials/internals/howbrowserswork/)

# c# - 捕捉流视频的任何错误 (VLC ActiveX)

> ID：14876189
> 
> 赞同：2
> 
> 时间：2013-02-14T13:43:34.823
> 
> 标签：c#, .net, events, activex, vlc

我已经调查了我们必须通过 VLC Player ActiveX 的 C# 代码或 JavaScript 使用的所有方法，如果播放某些流视频时出现任何错误，我看不到任何现有或工作方法来帮助获取信息。

我已经使用`Playing`属性来查看在播放过程中关闭互联网连接时它会显示什么并且它总是显示`true`。：（ 哇！

为了清楚起见，我只需要控制 VLC Player ActiveX 的任何流式传输错误，以便在自动出现错误时重新启动流式传输，但似乎所有 API 都已完成以仅接受直接用户输入。

此链接[http://wiki.videolan.org/.Net_Interface_to_VLC](http://wiki.videolan.org/.Net_Interface_to_VLC)没有帮助。

我的问题：是否有任何方法/属性表明流视频错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T11:06:15.187

AFAIK 在将 VLC 用于流式传输部分时，无法实现您所要求的...

有一些商业选项允许严格控制，包括错误处理/通知：

如果可以选择商业图书馆，请查看[http://www.visioforge.com/media-player-sdk-net.html](http://www.visioforge.com/media-player-sdk-net.html)

另一个商业选择是 Leadtools MultIMedia SDK - 请参阅[http://www.leadtools.com/sdk/multimedia.htm#+cp_playback](http://www.leadtools.com/sdk/multimedia.htm#+cp_playback)

# android - android应用程序开发简单的消息应用程序

> ID：14876193
> 
> 赞同：0
> 
> 时间：2013-02-14T13:44:01.080
> 
> 标签：android

我使用以下`main.xml`代码，但我只能看到一个编辑文本框

我需要关于为什么会发生这种情况的帮助？我尝试了很多次，但我看不到正确的编辑框和所有其他组件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"

    android:text="ENTER THE PHONE NUMBER HERE" />

<EditText 
    android:id="@+id/txtPhoneNo"  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"        
    />
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"         
    android:text="Message"
    />     
<EditText 
    android:id="@+id/txtMessage"  
    android:layout_width="fill_parent" 
    android:layout_height="150dp"
    android:gravity="top"         
    />          
<Button 
    android:id="@+id/btnSendSMS"  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
    android:text="Send SMS"
    /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:46:38.253

这是因为您没有为您的方向设置方向，`LinearLayout`默认为水平方向。由于您将所有视图宽度设置为`fill_parent`，因此其他视图没有空间

你有几个选择。您可以设置

`android:orientation="vertical"`

在您的根目录中`LinearLayout`，或者您可以更改这些视图的宽度

```
android:layout_width="wrap_content" 
```

显然，还有其他方法，但这些是您所拥有的最简单的修复方法

[线性布局文档](http://developer.android.com/reference/android/widget/LinearLayout.html)

**另请注意**：

> FILL_PARENT（在 API 级别 8 及更高版本中重命名为 MATCH_PARENT），这意味着视图希望与其父级一样大（减去填充）

[布局参数](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html)

**边注**

我看到您在 xml 中使用硬编码字符串。Eclipse 会对此发出警告，如果您不习惯使用该`strings.xml`文件夹并使用`android:text="@string/string_name"`

[字符串](http://developer.android.com/guide/topics/resources/string-resource.html#String)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:47:16.850

在您的 LinearLayout 上检查方向=垂直

# linux - linux ll 输出解释

> ID：14876202
> 
> 赞同：0
> 
> 时间：2013-02-14T13:44:34.290
> 
> 标签：linux, ll

这是 ll 命令的常规输出

```
drwxr-xr-x 2 something     root 4096 2008-11-04 16:58 something 
```

我想问一下这个输出是不是这样的，

```
crwxr-xr-x 2 something     root 4096 2008-11-04 16:58 something 
```

“c”是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T13:50:30.357

引用自[OS X ls 手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/ls.1.html)：

```
 b     Block special file.
       c     Character special file.
       d     Directory.
       l     Symbolic link.
       s     Socket link.
       p     FIFO.
       -     Regular file. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:53:16.987

`c`代表字符设备。这是一种特殊类型的设备，它不是对块进行操作，而是对字符（技术上大小为 1 的块）进行操作。

可悲的是，`ls`Linux 上的手册页对此并没有多说。但是， ls 的[FreeBSD 手册页](http://www.freebsd.org/cgi/man.cgi?query=ls)可以。

尽管如此，这应该在超级用户堆栈交换中被问到。

# c# - 中继器中链接按钮的工作

> ID：14876203
> 
> 赞同：0
> 
> 时间：2013-02-14T13:44:36.653
> 
> 标签：c#, repeater, asp.net-4.5

我在中继器中使用了一个链接按钮，单击它会在标签中显示数据。现在我希望再次单击相同的链接按钮隐藏该数据，这意味着用于显示和隐藏数据的相同按钮。有一个包含问题描述、日期、子表的数据库。通过和回答。
在页面加载时仅出现问题。

现在这是设计代码：

```
protected void Repeater1_ItemCommand(object source, RepeaterCommandEventArgs e)
       {  
            if (e.CommandName == "showanswers")  
            {  
                Control control;  
                control = e.Item.FindControl("date");
                if(control!=null)
                control.Visible = true;
                control = e.Item.FindControl("subby");
                if(control!=null)
                control.Visible = true;
                control = e.Item.FindControl("ans");
                if(control!=null)
                control.Visible = true;
            } 
```

这是我使用的 html 代码：

```
<asp:Repeater ID="Repeater1" runat="server"  
            onitemcommand="Repeater1_ItemCommand">

            <ItemTemplate>
                <table>
                        <b>Question<%#Container.ItemIndex + 1%>:</b><%#Eval("qstdsc") %><br />
                        <asp:linkbutton ID="Button1" Text="Ans." commandname="showanswers" runat ="server" /><br />
                    </table>
                <table>
                        <asp:Label id="date" Text='<%# Eval("qstdat")%>' Visible="false" runat="server"/>
                    </table>
                    <table>    
                    <asp:Label id="subby" runat="server" Text='<%# Eval("qstsubby")%>' Visible="false" />
                       </table>
                <table>
                         <asp:Label id="ans" runat="server" Text='<%# Eval("qstans")%>' Visible="false" />
                </table>

             </ItemTemplate>
        </asp:Repeater> 
```

但我不知道如何再次单击相同的链接按钮隐藏数据。可以用一个按钮吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:48:45.127

是什么阻碍了您检查标签是否可见并相应地隐藏/显示它？

```
protected void lnkBtnShowDataLabel_Click(Object sender, EventArgs e)
{
    lblData.Visible = !lblData.Visible;
} 
```

# oauth-2.0 - 错误：在 PHP 快速启动五分钟后出现 invalid_client

> ID：14876204
> 
> 赞同：5
> 
> 时间：2013-02-14T13:44:37.867
> 
> 标签：oauth-2.0, google-drive-api, google-oauth

我正在尝试“五分钟快速入门”（[https://developers.google.com/drive/](https://developers.google.com/drive/)），并已按照步骤 4“运行示例”的所有说明进行操作。（我已经在示例 php 代码中更改了客户端 ID 和密码 - 我已按照文本中的说明并观看了视频以确保我没有错过任何内容）。当我从命令行运行脚本时，确实为我提供了一个链接，例如：

[https://accounts.google.com/o/oauth2/auth?response_type=code&redirect_uri=http%3A%2F%2Flocalhost&client_id=938259907386.apps.googleusercontent.com&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth% 2Fdrive&access_type=offline&approval_prompt=force](https://accounts.google.com/o/oauth2/auth?response_type=code&redirect_uri=http%3A%2F%2Flocalhost&client_id=938259907386.apps.googleusercontent.com&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&access_type=offline&approval_prompt=force)

但是当我将浏览器指向那里（登录到 Google 控制台）时，我一直收到一个错误：

错误：invalid_client ...详细信息是：

```
response_type=code
scope=https://www.googleapis.com/auth/drive
redirect_uri=http://localhost
access_type=offline
approval_prompt=force
client_id=938259907386.apps.googleusercontent.com 
```

我尝试删除客户端 ID 并重新创建，但我一直遇到同样的错误。关于可能出现问题的任何建议？谢谢。

# sharepoint - Sharepoint 2010 - MS Word 内容控件编辑

> ID：14876212
> 
> 赞同：0
> 
> 时间：2013-02-14T13:45:07.473
> 
> 标签：sharepoint, sharepoint-2010, ms-word

我在 SP2010 中有一个使用内容控件更新 Word 模板的工作流。这一切正常，直到有人想要编辑内容控件中的文本。虽然他们可以添加和删除它，但他们无法编辑从 Sharepoint 传入的实际文本。

我该怎么做才能使此内容可编辑？可以删除和添加但不能编辑它似乎很奇怪——我最初的想法是这是一个权限问题，但如果是这样的话，添加和删除也会被阻止。

我错过了什么吗？

# database - 我应该使用 mock 还是 dbunit 来测试访问数据库的方法？

> ID：14876214
> 
> 赞同：1
> 
> 时间：2013-02-14T13:45:13.227
> 
> 标签：database, unit-testing, testing, mocking, dbunit

我有一个方法，它使用一些 DAO 对数据库进行一些调用。

我应该使用模拟机制来避免管理数据库（因此模拟所有 DAO 方法）还是应该使用 dbunit（或其他等效方法）通过在内存中加载和初始化数据库（如 hsqldb）来进行测试？

这些对每种方法（模拟与 dbunit）有什么优缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:54:23.290

你想测试数据库。我看不出在这种情况下 mock 有什么意义。一旦您知道 DAO 正在工作，那么将模拟注入到使用它们的服务中就很合适了。

同时，请测试您的数据库。您可以创建一个临时测试数据库，也可以使所有测试都具有事务性：设置测试工作单元、执行它、验证它、回滚它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:54:59.997

我会推荐使用模拟对象，一般来说数据库访问不是很高效并且花费很多时间，我们有一个包含 4000 多个单元测试的项目，运行完整的测试需要 3 个多小时，特别是考虑到设置和撕裂在每次测试前后访问数据库。

关于 dbunit 我使用了它，所以我不能说它是否好，但正如我所说的我会避免在单元测试中访问数据库，它应该仅限于逻辑单元。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T13:49:26.140

这是一个很难明确回答的问题；但是，我的建议和我通常更喜欢的是针对嵌入式数据库或外部测试数据库（作为集成测试）测试 DAO 本身，以便您了解 DAO 针对某种读取数据库的正确功能。

然后对于使用 DAO 的组件，您可以模拟它以将您的测试与必须显式使用数据库分离。

这种方法的缺点是您必须有某种嵌入式或其他可用于测试的数据库。

你可以模拟你的 DAO 单元测试；但是，您并不能完全确定您的模拟将是数据库将提供什么的真实表示。

希望这可以帮助。

# windows - 为什么我收到 ENOTEMPTY 错误？

> ID：14876219
> 
> 赞同：3
> 
> 时间：2013-02-14T13:45:39.037
> 
> 标签：windows, meteor

所以我创建了一个默认的流星应用程序。它运行良好。现在我在启动函数中添加一个简单的插入。它现在给了我例外。

这是我的 app.js 代码：

```
Book = new Meteor.Collection("book");

if (Meteor.isClient) {
  Template.hello.greeting = function () {
    return "Welcome to app_01.";
  };

  Template.hello.events({
    'click input' : function () {
      // template data, if any, is available in 'this'
      if (typeof console !== 'undefined')
        console.log("You pressed the button");
    }
  });
}

if (Meteor.isServer) {
  Meteor.startup(function () {
    if (Book.find().count() === 0) {
      var names = ["Ada Lovelace",
                   "Grace Hopper",
                   "Marie Curie",
                   "Carl Friedrich Gauss",
                   "Nikola Tesla",
                   "Claude Shannon"];
      for (var i = 0; i < names.length; i++)
        Book.insert({name: names[i], score: Math.floor(Math.random()*10)*5});
    }
  });
} 
```

这是我得到的例外：

```
No dependency info in bundle. Filesystem monitoring disabled.
Errors prevented startup:
Exception while bundling application:
Error: ENOTEMPTY, directory not empty 'C:\Users\Office\Workspace\Code\Meteor\app_01\.meteor\local\build\server'
    at Object.fs.rmdirSync (fs.js:456:18)
    at Object.module.exports.rm_recursive (C:\Program Files (x86)\Meteor\app\lib\files.js:256:10)
    at C:\Program Files (x86)\Meteor\app\lib\files.js:254:15
    at Array.forEach (native)
    at Function._.each._.forEach (C:\Program Files (x86)\Meteor\lib\node_modules\underscore\underscore.js:79:11)
    at Object.module.exports.rm_recursive (C:\Program Files (x86)\Meteor\app\lib\files.js:252:9)
    at _.extend.write_to_directory (C:\Program Files (x86)\Meteor\app\lib\bundler.js:493:11)
    at Object.exports.bundle (C:\Program Files (x86)\Meteor\app\lib\bundler.js:685:12)
    at exports.run.restart_server (C:\Program Files (x86)\Meteor\app\meteor\run.js:615:26)
    at C:\Program Files (x86)\Meteor\app\meteor\run.js:726:9

Please fix the problem and restart. 
```

控制台根本没有给我任何有用的信息。

更多信息：我正在使用 windows 版本的流星 0.5.4 我的代码同时包含制表符和空格作为缩进（这应该是个问题吗？）

* * *

增加我的困惑：如果我运行排行榜示例，它运行完美。

当我使用修改后的启动代码运行默认项目时，出现异常。>.<

* * *

更多信息：当服务器崩溃时，mongod 服务仍在 windows 中运行。在我无限的智慧中，我想我会杀了它，也许尝试重新启动它。

现在我得到一个新错误：

```
PS C:\Users\Office\Workspace\Code\Meteor\app_01> meteor
[[[[[ C:\Users\Office\Workspace\Code\Meteor\app_01 ]]]]]

Unexpected mongo exit code 100\. Restarting.
Unexpected mongo exit code 100\. Restarting.
Unexpected mongo exit code 100\. Restarting.
Can't start mongod

MongoDB had an unspecified uncaught exception.
Check to make sure that MongoDB is able to write to its database directory. 
```

* * *

编辑：现在删除了 .meteor/local/db 内容。我们现在回到 ENOTEMPTY 错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:05:32.677

这是因为在捆绑操作期间目录没有被删除。

因此，当发生这种情况时，请使用 . 停止您的服务器`ctrl + c`。

然后删除`.meteor\local\db`目录以及目录的内容并使用命令`.meteor\local\builds`再次运行服务器。`meteor`

不是一个理想的方式，但它的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T13:57:26.117

刚刚在我的 Mac 和我的 Windows 机器上测试了这个，它对我来说很好。（将您的代码复制并粘贴到 app.js 中，在其他任何地方都没有更改，因为我知道这就是您所做的）。

有两种方法可以继续：

1.  你试试`meteor reset`。**警告：**这将清空您在此应用程序中拥有的所有数据库，但我认为目前那里没有任何重要的东西？
2.  您删除应用程序并使用创建一个新应用程序`meteor create appname`，然后将上面的源代码复制到 app.js 中。

我认为投入太多时间和精力是不值得的，因为它不是一个接近生产阶段的应用程序。但是，如果创建一个新应用程序会导致同样的问题，它会变得有趣 =)

**编辑：**刚刚四处搜索，发现了这个：[https](https://github.com/TomWij/meteor/issues/18) ://github.com/TomWij/meteor/issues/18 向下滚动到答案；显然，它可能是您的防病毒扫描程序阻止 Meteor 重建它。那可能吗？另外，你是从 cmd.exe 以外的任何东西启动 Meteor 吗？我刚刚在 GitHub 上阅读了这个问题，当使用 cmd.exe 以外的任何东西（例如 GitHub Bash Shell）时，事情似乎很棘手

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T13:44:11.493

一旦我的拉取请求进入，这个问题应该得到解决：

[https://github.com/TomWij/meteor/pull/56](https://github.com/TomWij/meteor/pull/56)

# oracle - 从 oracle 获取函数列表和过程签名

> ID：14876221
> 
> 赞同：0
> 
> 时间：2013-02-14T13:45:41.530
> 
> 标签：oracle, stored-procedures, plsql

是否有任何查询可以为我提供函数/过程的签名详细信息。我正在查看返回类型、函数名、参数类型，是否是 IN/OUT/INOUT。

我知道[这个](https://stackoverflow.com/questions/1819447/get-a-list-of-all-functions-and-procedures-in-an-oracle-database)线程，但它只提供名称

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T14:08:31.130

你可以试试：

```
SELECT object_name, argument_name, in_out, data_type
FROM user_arguments; 
```

或[all_arguments](http://docs.oracle.com/cd/B19306_01/server.102/b14237/statviews_1014.htm#i1573843)，如果您有权限

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T20:13:25.110

这是一个生成 PL/SQL 函数原型的小脚本：

```
DECLARE 
  -- Local variables here
  strPrev_object          VARCHAR2(30);
  strReturn_type          VARCHAR2(30);
  strProcedure_definition VARCHAR2(32767);
BEGIN
  -- This dumps out subprogram definitions.  It doesn't try to build
  -- package scripts; instead, it dumps the package procedures as though they were defined
  -- individually, with package name preceding subprogram name.

  FOR aRow IN (SELECT *
                 FROM USER_ARGUMENTS a
                 INNER JOIN (SELECT PACKAGE_NAME, OBJECT_NAME, MAX(SEQUENCE) AS MAX_SEQUENCE
                               FROM USER_ARGUMENTS
                               GROUP BY PACKAGE_NAME, OBJECT_NAME)
                   USING (PACKAGE_NAME, OBJECT_NAME)
                 WHERE PACKAGE_NAME IS NULL AND
                       OBJECT_NAME = '<your package, procedure, or function>'
                 ORDER BY PACKAGE_NAME, OBJECT_NAME, SEQUENCE)
  LOOP
    strProcedure_definition := NULL;

    IF strPrev_object IS NOT NULL AND
       strPrev_object <> aRow.OBJECT_NAME 
    THEN
      IF strReturn_type IS NULL THEN
        DBMS_OUTPUT.PUT_LINE('     );');
      ELSE
        DBMS_OUTPUT.PUT_LINE('     ) RETURN ' || strReturn_type || ';');
      END IF;

      DBMS_OUTPUT.PUT_LINE('');
    END IF;

    IF aRow.SEQUENCE = 1 THEN
      IF aRow.ARGUMENT_NAME IS NULL THEN
        strProcedure_definition := 'FUNCTION ';
        strReturn_type := aRow.DATA_TYPE;
      ELSE
        strProcedure_definition := 'PROCEDURE ';
        strReturn_type := NULL;
      END IF;

      IF aRow.PACKAGE_NAME IS NOT NULL THEN
        strProcedure_definition := strProcedure_definition || aRow.PACKAGE_NAME || '.' || aRow.OBJECT_NAME || '(';
      ELSE
        strProcedure_definition := strProcedure_definition || aRow.OBJECT_NAME || '(';
      END IF;

      DBMS_OUTPUT.PUT_LINE(strProcedure_definition);
    END IF;

    IF aRow.ARGUMENT_NAME IS NOT NULL THEN
      DBMS_OUTPUT.PUT_LINE('     ' || aRow.ARGUMENT_NAME || '  ' ||
                           CASE aRow.IN_OUT WHEN 'IN/OUT' THEN 'IN OUT' ELSE aRow.IN_OUT END || '  ' ||
                           aRow.DATA_TYPE || CASE WHEN aRow.SEQUENCE <> aRow.MAX_SEQUENCE THEN ',' ELSE '' END
                           );
    END IF;

    strPrev_object := aRow.OBJECT_NAME;
  END LOOP;  -- aRow

  IF strReturn_type IS NULL THEN
    DBMS_OUTPUT.PUT_LINE('     );');  
  ELSE
    DBMS_OUTPUT.PUT_LINE(') RETURN ' || strReturn_type || ';');
  END IF;
END; 
```

分享和享受。

# local-storage - 在 localStorage 中存储多个选项以进行测验

> ID：14876222
> 
> 赞同：0
> 
> 时间：2013-02-14T13:45:42.280
> 
> 标签：local-storage

我正在尝试使用 localstorage 为 ipad 应用程序创建测验。我已经成功创建了一个可以记住您单击的选项的测验，我可以检查答案是否正确。

但是，对于某些问题有多个答案，我希望能够将多个答案存储为该问题的数组。

我的测验当前将答案存储在由父 div 的类命名的键下。答案取决于您单击哪个 LI。请参阅下面的代码。

我想要能够为每个问题存储多个答案的选项，我将如何根据我拥有的代码执行此操作？我对javascript很陌生。

```
 <!DOCTYPE HTML>
    <html>
    <head>
    <meta charset="utf-8">
    <title>test</title>

    <style type="text/css">

    body{
        text-align: center;
    }

    #questions{
        margin: 0 auto;
        width: 802px;
        height: 602px;
    }

    /*look for any class that has the word slide in it*/
    [class*="slide"]{
        padding: 20px;
        background: #666;
        width: 760px;
        height: 560px;
        border: 1px dashed #333;
    }
    [class*="slide"]:nth-child(odd){
        background: #999;
    }

    b{
        position: absolute;
        top: 10px;
    }

    </style>

    </head>

    <body>
        <div id="questions">
            <div class="slide1">
                <h1>What is h2o?</h1>
                <ul>
                    <li>A Pencil</li>
                    <li>Liquid water</li>
                    <li>A mobile phone network</li>
                    <li>Paper</li>
                </ul>
                <p>check</p>
            </div>
            <div class="slide2">
                <h1>What is 2 + 2?</h1>
                <ul>
                    <li>1</li>
                    <li>2</li>
                    <li>3</li>
                    <li>4</li>
                </ul>
                <p>check</p>
            </div>
            <div class="slide3">
                <h1>What is a whale?</h1>
                <ul>
                    <li>A mammal</li>
                    <li>A fish</li>
                    <li>A bird</li>
                    <li>A country</li>
                </ul>
            </div>
            <div class="slide4">
                <h1>What phone do you prefer?</h1>
            <ul>
                    <li>iPhone 4s</li>
                    <li>iPhone 5</li>
                </ul>
            </div>
            <div class="slide5">
                <h1>What is 5 + 5?</h1>
                <ul>
                    <li>10</li>
                    <li>7</li>
                </ul>
            </div>
            <div class="slide6">
                <h1>What is the capital city of England?</h1>
                <ul>
                    <li>London</li>
                    <li>Staines</li>
                    <li>Bognor Regis</li>
                    <li>Luton</li>
                </ul>
            </div>
            <div class="slide7">
                <h1>What colour is a red phone box?</h1>
                <ul>
                    <li>Blue</li>
                    <li>Red</li>
                    <li>Pink</li>
                    <li>Mauve</li>
                </ul>
            </div>
        </div>
        <b></b>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

    <script type="text/javascript">

    $(document).ready(function() {

        /*
        //
        //  quiz storer and answer checker
        //  Author: Tjobbe Andrews
        //  v1.0, 13/02/2013
        //  - keeps a record in localStorage of the answers you chose, then checks them on an ad hoc basis
        //
        */

        //on clicking the answers in the li's..
        $("li").click(function(){
            //..create a variable called answer based on the content of that li..
            var answer = $(this).html();
            //..and create a variable called question based on the class of the parent div
            var question = $(this).parent().parent().attr("class");
            //then store the key value pair of question and answer
            localStorage.setItem(question, answer);
            //just makes sure that it's writing to the LS db
            $("b").html(localStorage.getItem(question));
        });

        //click the p tag to check what we've got stored for this div - ad hoc
        $('p').click(function(){
            var slideNumber = $(this).closest('div').attr('class');
            var answer = localStorage.getItem(slideNumber);
            if(answer !== "Liquid water"){
                alert('wrong');
            }
            else if(answer == "Liquid water"){
                alert("right");
            }
        });

    });
    </script>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:21:56.997

要在 localStorage 中存储多个值，您可以将它们放入一个对象中，并将`JSON.stringify`其作为 localStorage 的值：

```
 var answersObject = {
      answer1: 'yes',
      answer2: 'no',
      answer3: 'maybe'
    };

    localStorage.setItem(question, JSON.stringify(answersObject)); 
```

要从 localStorage 中取回它们，您应该使用`JSON.parse`

```
 storedObject = JSON.parse(localStorage.getItem(question)); 
```

现在你可以得到你的答案`storedObject.answer1`，`storedObject.answer2`等等。

# wpf - 选定行的 WPF DataGrid RowStyle 不改变背景和前景色

> ID：14876223
> 
> 赞同：7
> 
> 时间：2013-02-14T13:45:47.827
> 
> 标签：wpf, datagrid, background-color

我在 Windows 7 上使用 Visual Studio 2012。我需要知道为什么 Grid 所选行的以下样式不适用于背景和前景色，但适用于 BorderBrush 和 BorderThickness 等其他属性？虽然当鼠标悬停在网格行上时我可以看到它们发生变化。

```
<Style x:Key="gridRowStyle" TargetType="{x:Type DataGridRow}">
    <Style.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background" Value="PeachPuff"/>
            <Setter Property="Foreground" Value="BlueViolet"/>
        </Trigger>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Background" Value="PeachPuff"/>
            <Setter Property="Foreground" Value="BlueViolet"/>
            <Setter Property="BorderBrush" Value="BlueViolet" />
            <Setter Property="BorderThickness" Value="2" />

        </Trigger>
    </Style.Triggers>
</Style> 
```

这是我在网格上的使用方式。

```
<DataGrid RowStyle="{StaticResource gridRowStyle}"> 
```

我强调要知道“为什么”而不是解决问题，因为如果我使用网格单元格样式而不是如下行样式，我已经有了问题的解决方案：

```
<Style x:Key="gridCellStyle" TargetType="{x:Type DataGridCell}">
    <Style.Triggers>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Background" Value="PeachPuff"/>
            <Setter Property="Foreground" Value="BlueViolet"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-05T13:02:48.207

在具有以下默认样式触发器的 DataGridCell 的默认样式中。

```
<Trigger Property="IsSelected" Value="True">
    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.HighlightTextBrushKey}}"/>
    <Setter Property="BorderBrush" Value="{DynamicResource {x:Static SystemColors.HighlightBrushKey}}"/>
</Trigger> 
```

因此，如果您为 DataGridRow 编写触发器，那么它将仅适用于在可视树中放置在 DataGridCell 之前的元素。

因此，要在选择时更改背景和前景，您必须以 DataGridCell 样式编写触发器或从样式中删除默认触发器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T08:21:45.743

只需在数据网格中的行级别删除此属性，它们优先于触发的属性。

内扎克

# css - div 重叠但仅在 Firefox 中

> ID：14876226
> 
> 赞同：3
> 
> 时间：2013-02-14T13:45:59.567
> 
> 标签：css, firefox, html

我一直在创建一个网站，结果在 Chrome、IE9、Opera 和 Safari 中都很好，但在 Firefox 中，一些 div 似乎重叠。

以下是该网站在 Chrome 和 Firefox 中的非常精简版本的一些屏幕截图，分别为：

[http://i.imgur.com/VrYoB93.png?1](http://i.imgur.com/VrYoB93.png?1)

[http://i.imgur.com/QKCM8KN.png?1](http://i.imgur.com/QKCM8KN.png?1)

如果您能看一下并告诉我我做错了什么，我将不胜感激。到目前为止的完整来源在这里：

**HTML：**

```
<body>
<div class="container">
    <div class="header">
        <a href=""><img src="../Images/test.png"/></a>
        <a href=""><img src="../Images/Twitter1.png" class="headerlink"/></a>
        <a href=""><img src="../Images/YouTube2.png" class="headerlink"/></a>
        <a href=""><img src="../Images/Ask.fm.png" class="headerlink"/></a>
    </div>
    <div> <!-- Links -->
        <table align="center" width="900" cellspacing="0" border="0">
            <td align="center" class="linkbarselected">Example link</td>
            <td align="center" class="linkbar"><a href="">Example link</a></td>
            <td align="center" class="linkbar"><a href="">Example link</a></td>
            <td align="center" class="linkbar"><a href="">Example link</a></td>
            <td align="center" class="linkbar"><a href="">Example link</a></td>
        </table>
    </div>
    <div class="sidebar">
        Example text in sidebar.
    </div>
    <div class="main">
        <div class="content">
            <span style="font-size:2em; color:red;">Good day!</span><p>
            Example text blah blah blah<p>
    </div>
</div>
</body>

</html> 
```

**CSS：**

```
}
.container {
    width: 900px;
    margin: 0 auto;
}
.header {
    background: transparent;
    float: left;
}
.linkbar {
    border-top-left-radius: 15px;
    border-top-right-radius: 15px;
    background-color: #333333;
    color: #FFFFFF;
    height: 15px;
}
.main {
    height: 200px;
    background-color: #CCCCCC;
    border-bottom-left-radius: 15px;
    border-bottom-right-radius: 15px;
    padding-left: 20px;
    padding-top: 30px;
    padding-bottom: 30px;
}
.content {
    width: 600px;
    float: left;
    background-color: #FFFFFF;
    border-radius: 15px;
    padding: 10px 10px;
}
.sidebar {
    float: right;
    width: 230px;
    padding-right: 20px;
    padding-top: 30px;
    padding-bottom: 30px;
}
.headerlink {
    height: 70px;
    width: 70px;
    border-radius: 10px;
    position: relative;
    bottom: 30px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:59:37.740

这是浮动错误。看看我做了什么。

jsfiddle.net/pJZ6F/1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:50:32.393

给头类一个属性

```
overflow:hidden; 
```

希望能帮助到你！！

# c# - 如何按特定条件过滤列表中的元素，然后使用 Linq 更改它们的属性？

> ID：14876227
> 
> 赞同：0
> 
> 时间：2013-02-14T13:46:02.030
> 
> 标签：c#, linq

我有`List`，例如：

```
 public class User
        {    
            public string Name { get; set;}
            public bool IsShow { get; set;}
        }

    List<User> myList = new List<User>();
    myList.Add(new User(){Name = "FUser", IsShow = true});
    myList.Add(new User(){Name = "FUser2", IsShow = true});
    myList.Add(new User(){Name = "FUser3", IsShow = true});
    myList.Add(new User(){Name = "BUser", IsShow = true});
    myList.Add(new User(){Name = "FUser4", IsShow = true}); 
```

如何按特定条件过滤列表中的元素，然后使用 Linq 更改它们的属性？

我过滤元素：

```
myList.AsEnumerable().Where(u => u.Name.Contains("/" + F + "/"); 
```

所以，我想要, ,和的属性`IsShow = true`。`"FUser"``"FUser2"``"FUser3"``"FUser4"``IsShow = false``BUser`

没有循环，Linq 可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:49:39.783

`List<T>'`s ForEach 方法（实际上不是 Linq 的一部分）怎么样：

```
myList.ForEach(u => { u.IsShow = u.Name.Contains("..."); }); 
```

请注意，Linq 是关于*查询*数据，而不是修改它。（语言综合**查询**）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T13:54:06.633

```
void Main()
{
    List<User> myList = new List<User>();
    myList.Add(new User(){Name = "FUser", IsShow = true});
    myList.Add(new User(){Name = "FUser2", IsShow = true});
    myList.Add(new User(){Name = "FUser3", IsShow = true});
    myList.Add(new User(){Name = "BUser", IsShow = true});
    myList.Add(new User(){Name = "FUser4", IsShow = true});

    // the magic happens here
    var results = myList.Select(p=> new User { Name = p.Name, IsShow=p.Name.First()=='F'});
}
    public class User
        {    
            public string Name { get; set;}
            public bool IsShow { get; set;}
        }

// Define other methods and classes here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T13:49:36.430

> 没有循环，Linq 可以吗？

这种问题被问了很多。“没有循环”的意思是 - 没有枚举集合。我认为 Linq.Enumerable 可以以某种方式在您的列表中使用神奇生成的索引来查找您正在寻找的内容，而无需查看整个列表，这是一个祈祷。不幸的是，这种情况并非如此。Linq.Enumerable 在您的列表中没有神奇的索引，它通过枚举列表来工作 - 与您可能编写的 foreach 循环相同。

所以 - 问题的答案是“不”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T14:04:16.903

当您创建列表时，您应该使用集合初始值设定项。另外，在此处设置 Ienumerable。

```
IEnumerable<User> myList = new List<User>
      {
         new User() {Name = "FUser", IsShow = true},
         new User() {Name = "FUser2", IsShow = true},
         new User() {Name = "FUser3", IsShow = true},
         new User() {Name = "BUser", IsShow = true},
         new User() {Name = "FUser4", IsShow = true}
      }; 
```

然后做你所要求的，你必须做：

```
string parameter = "F";
foreach (var s in myList.Where(s => s.Name.Contains == parameter))
        {
            s.IsShow = true;
        } 
```

或者

```
string parameter = "BUser";
foreach (var s in myList.Where(s => s.Name == parameter))
        {
            s.IsShow = false;
        } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T14:53:36.990

您实际上可以使用以下代码更改源列表的对象：

```
List<User> myList = new List<User>();
myList.Add(new User() { Name = "FUser", IsShow = true });
myList.Add(new User() { Name = "FUser2", IsShow = true });
myList.Add(new User() { Name = "FUser3", IsShow = true });
myList.Add(new User() { Name = "BUser", IsShow = true });
myList.Add(new User() { Name = "FUser4", IsShow = true });

myList
    .Where(user => user.Name.StartsWith("F"))
    .Select(user => 
    { 
        user.IsShow = true; 
        return user; 
    }); 
```

当您使用 foreach 语句循环结果列表时，这可以为您节省额外的“周期”。

# functional-programming - OCaml 中奇怪的模块加载问题

> ID：14876228
> 
> 赞同：1
> 
> 时间：2013-02-14T13:46:02.187
> 
> 标签：functional-programming, ocaml

我有两个文件：`myUnionFind.ml`和`myUnionFind_test.ml`. 这两个文件都在`same directory`.

## 我的UnionFind.ml

```
open Batteries

module type MyUnionFindSig = 
sig

  type union_find

  val print_array : 'a array -> unit
  val create_union : int -> union_find
  val union_weighted : union_find -> int -> int -> unit
  val is_connected_weighted : union_find -> int -> int -> bool
end;;

module MyUnionFind : MyUnionFindSig =
struct 
  let print_array ary = print_endline (BatPervasives.dump ary);;

  type union_find = {id_ary : int array; sz_ary : int array};;

  let create_union n = {id_ary = Array.init n (fun i -> i); 
            sz_ary = Array.make n 1};;

(* weighted quick union find *)

  let find_root ary i = 
    let rec find j =
      if ary.(j) = j then j
      else  find ary.(j)
    in
    find i;;

  let union_weighted {id_ary;sz_ary} p q = 
    let root_p = find_root id_ary p in
    let root_q = find_root id_ary q in
    if sz_ary.(root_p) < sz_ary.(root_q) then begin
      id_ary.(root_p) <- id_ary.(root_q);
      sz_ary.(root_q) <- sz_ary.(root_q) + sz_ary.(root_p)
    end 
    else begin
      id_ary.(root_q) <- id_ary.(root_p);
      sz_ary.(root_p) <- sz_ary.(root_p) + sz_ary.(root_q)
    end;;

let is_connected_weighted {id_ary;_} p q = (find_root id_ary p) = (find_root id_ary q);;

end 
```

## 我的UnionFind_test.ml

```
open Batteries

let uf2 = MyUnionFind.create_union 10;;

MyUnionFind.union_weighted uf2 0 3;;
MyUnionFind.union_weighted uf2 1 4;;
MyUnionFind.union_weighted uf2 4 3;;
MyUnionFind.union_weighted uf2 2 8;;

MyUnionFind.print_array uf2.MyUnionFind.id_ary;;

BatPervasives.print_bool (MyUnionFind.is_connected_weighted uf2 0 3);; 
```

* * *

我试过

`ocamlfind ocamlc -package batteries -c myUnionFind.ml`. 它起作用了，我可以看到`myUnionFind.cmi`并且`myUnionFind.cmo`.

然后我尝试通过`myUnionFind_test.ml`编译

`ocamlfind ocamlc -package batteries -c myUnionFind_test.ml`.

它给出了这个错误：

> 文件“myUnionFind_test.ml”，第 3 行，字符 10-34：错误：未绑定值 MyUnionFind.create_union

* * *

**我不知道为什么。我已经`create_union`在 module中定义了`MyUnionFind`，但是为什么找不到呢？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:52:09.650

您在模块中定义一个模块（您的 myUnionFind.ml 是一个模块）。

所以在你的测试文件中，你必须像这样打开你的模块：

```
open Batteries
open MyUnionFind (* Here !*)
let uf2 = MyUnionFind.create_union 10;;

MyUnionFind.union_weighted uf2 0 3;;
MyUnionFind.union_weighted uf2 1 4;;
MyUnionFind.union_weighted uf2 4 3;;
MyUnionFind.union_weighted uf2 2 8;;

MyUnionFind.print_array uf2.MyUnionFind.id_ary;;

BatPervasives.print_bool (MyUnionFind.is_connected_weighted uf2 0 3);; 
```

或为每个呼叫添加前缀，例如：

```
let uf2 = MyUnionFind.MyUnionFind.create_union 10;; 
```

如果您只是在 myUnionFind.ml 中定义一个模块并且您不想像以前那样拥有两个模块，您可以像这样创建一个 .ml 和 .mli 文件：

```
 (* myUnionFind.mli *)
 type union_find  = {id_ary : int array; sz_ary : int array}

 val print_array : 'a array -> unit
 val create_union : int -> union_find
 val union_weighted : union_find -> int -> int -> unit
 val is_connected_weighted : union_find -> int -> int -> bool

 (* myUnionFind.ml *)
 type union_find = {id_ary : int array; sz_ary : int array};;

 let print_array ary = (* ... *)
 let create_union n =  (* ... *)
 let union_weighted r p q = (* ... *)
 let find_root ary i = (* ... *) 
```

**注意，如果你有对`id_ary`字段的引用，你必须把它放在模块签名中**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T19:58:55.870

OCaml 为每个文件免费提供一个级别的模块。所以你`myUnionFind.ml`在这个免费模块中有一个模块。为避免这种情况，请在文件的顶层声明所有内容。然后你只有一个模块，与文件同名。

# asp.net - 由 asp.net 提供支持的平面文件博客引擎

> ID：14876238
> 
> 赞同：0
> 
> 时间：2013-02-14T13:46:30.860
> 
> 标签：asp.net, flat-file, blog-engine

关于博客引擎，是否有满足以下所有条件的博客引擎？

1.  存在于 asp.net 生态系统中
2.  平面文件
3.  将文件编辑为原始 html 的选项（不是降价）
4.  积极维护的项目

我遇到过[AtomSite](http://atomsite.net/)和[DasBlog](http://dasblog.codeplex.com/)，但这些项目似乎并不特别活跃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:11:04.290

ASP.NET 中的选项数量似乎有限，到目前为止我遇到的最接近的选项是[BlogEngine.NET](http://blogengine.codeplex.com/)。

**2014 年 4 月 16 日更新**
[MiniBlog](https://github.com/madskristensen/miniblog)可能是要走的路。（汉塞尔曼在[这里](http://www.hanselman.com/blog/ExploringASPNETWebPagesAFullyfeaturedMiniBlogUsingJustRazor.aspx)写了。）

# xml - 在xsl中创建给定长度的整数数组

> ID：14876241
> 
> 赞同：0
> 
> 时间：2013-02-14T13:46:38.887
> 
> 标签：xml, xslt

我必须创建一个长度为整数的数组`$lung`。数组的元素从 1 到`$limit`升序变化。也就是说，第一个元素的值必须为 1，第二个元素的值必须为 2 `$limit`，之后它再次从值 1 开始到`$limit`。这是我的代码草稿：

```
<xsl:variable name="limit" select="count(documen('./db/list.xml')/root_list/list"/> 
<xsl:variable name="lung" select="(6) div (./lunghezza)"/>
<xsl:variable name="array" as="xs:integer">
    <Item>1</Item>
    <Item>2</Item>
      ... 
    <Item>$limit</Item>
    <Item>1</Item>
      ...
    <Item>$limit</Item>
</xsl:variable> 
```

如何加载数组？我是初学者。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:07:15.047

那么 XSLT 没有`arrays`. XSLT 1.0 有节点集，2.0 有序列（节点或原子值）。因此，使用 XSLT 2.0，您可以创建一个整数值序列，`1 to $limit`例如`<xsl:variable name="array" select="1 to $limit, 1 to $limit"/>`创建一个`2 * $limit`值序列。

[编辑] 也许

```
<xsl:variable name="array" select="(for $n in 1 to (xs:integer(ceiling($lung div $limit))) return (1 to $limit))[position() le $lung]"/> 
```

是你想要的，它创建一个长度整数值序列，`$lung`其中包含从`1 to $limit`最后一个子序列被截断的子序列，以确保长度精确`$lung`。

# android - 按钮按下方法未读取最新的 EditText 数据

> ID：14876246
> 
> 赞同：0
> 
> 时间：2013-02-14T13:46:53.523
> 
> 标签：android, variables, methods, android-edittext

我正在研究`EditText`用户需要在其中插入 8 位数字的位置`EditText`，当他插入时，应用程序会显示一个对话框，以确认他可以接受或取消它的位置。

问题是，对于这个对话框消息，它只需要第一次插入的数字，所以如果用户更改数字，对话框总是相同的。

例如：用户介绍 12345678，对话消息显示“...12345678”。但是，如果用户现在更改数字，例如 98765432，则消息仍然是“...12345678”。

这是代码：

```
public void onCreate(Bundle icicle)
   {
      super.onCreate(icicle);
      setContentView(R.layout.identificacion);
      Button bSiguiente = (Button) findViewById(R.id.btn_siguiente);
     dniText = (EditText) findViewById(R.id.dni_candidato);

bSiguiente.setOnClickListener(new View.OnClickListener() {
    public void onClick(View arg0) {

  //  try{

   //     catch (NumberFormatException e)
   //   //  {
        //  }
   user = Integer.parseInt(dniText.getText().toString());
     String longitud = dniText.getText().toString();
     DNIWord(user);

     if(longitud.length()==8){
         showDialog(DIALOG_CONFIRMAR_CANDIDATO);
     }
     else{
         showDialog(DIALOG_ERROR_DNI);

     }

    } 
```

});

}

```
protected Dialog onCreateDialog (int id){

     switch (id) {
     case DIALOG_CONFIRMAR_CANDIDATO:
           return new AlertDialog.Builder(this)
               .setIcon(R.drawable.icon_warning)
               .setTitle(R.string.confirmardni)
               .setMessage("Tu DNI es "  +DNIWord(user)+  " ?")
               .setPositiveButton(R.string.alert_dialog_ok, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int whichButton) {
                       Intent i = new Intent(Ident.this,Autorizacion.class);
                     startActivity(i);
                    }
               })
               .setNegativeButton(R.string.alert_dialog_cancel, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int whichButton) {

                   }
               })

               .create();

     case DIALOG_ERROR_DNI:
           return new AlertDialog.Builder(this)
               .setIcon(R.drawable.ic_error)
               .setTitle(R.string.error)
               .setMessage(R.string.errordni)
               .setPositiveButton(R.string.alert_dialog_ok, new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int whichButton) {

                    }
               })

               .create();
}

    return null;

}
 public static String DNIWord(int user) {
     user = Integer.parseInt(dniText.getText().toString());
      return (String.valueOf(user)   + "-"+   NIF_STRING_ASOCIATION.charAt(user % 23));

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:17:45.120

onCreateDialog(int id) 仅在创建特定 id 的对话框时调用一次。一旦创建了对话框，就永远不会为相同的 id 调用该方法。

为了解决您的问题，您必须另外覆盖 onPrepareDialog(int id, Dialog dialog) 方法。每次显示对话框之前都会调用该方法。

[http://developer.android.com/reference/android/app/Activity.html#onPrepareDialog(int](http://developer.android.com/reference/android/app/Activity.html#onPrepareDialog(int) , android.app.Dialog)

您可以按如下方式修改您的代码。

```
@Override
protected void onPrepareDialog(int id, Dialog dialog) {
    super.onPrepareDialog(id, dialog);
    if (id == DIALOG_CONFIRMAR_CANDIDATO) {
        ((AlertDialog)dialog).setMessage("MESSAGE TO BE SHOWN");
    }
} 
```

希望这有效。

# flowplayer - Flowplayer：禁用播放列表中每个剪辑的居中播放按钮

> ID：14876250
> 
> 赞同：2
> 
> 时间：2013-02-14T13:46:59.400
> 
> 标签：flowplayer

我想禁用播放列表中每个剪辑在视频屏幕上居中的播放按钮。

可以使用 play 属性全局禁用该按钮：

```
flowplayer("player", "flowplayer.swf", {
  // stuff
  play: null, // or play: {opacity: 0}
  // more stuff
}); 
```

因为我无法访问 flowplayer 配置，但播放列表中的条目我需要它。

这是否也可以通过特定条目的播放列表以某种方式实现？

# java - 性能改进：toString()

> ID：14876251
> 
> 赞同：4
> 
> 时间：2013-02-14T13:46:59.923
> 
> 标签：java, performance, tostring

我们正在开发相当大的服务器应用程序。每个动作都由日志跟踪。调用 toString 方法的日志很多。不幸的是，我们需要其中的大部分，另一方面，我们无法跟踪 prod 上发生的情况。尝试改进 toString 方法有意义吗？例如，将 toString 的结果放入内存中，如果某些字段被更新，则更新。

```
example of my toString
public classs InMessage{
//declared 20+ fields
     @Override
      public String toString() {
       StringBuilder builder = new StringBuilder(this.getClass().getSimpleName());
       builder.append(": [");
       builder.append(super.toString());
       builder.append("; updateTime: ");
       builder.append(updateTime);
       //forexample 20 fields here
       builder.append(";]");
       return builder.toString();
     }}
then we process InMessage in some way and log each action
     log.debug("We received inMessage: {}", inMessage); 
```

经过这次讨论，我们决定尽可能减少日志数量，仅此而已。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T13:53:49.333

除非您经常遇到性能或内存问题，否则不要担心。有用的日志可以极大地帮助产品诊断，您需要权衡它与可能永远不会发生的假设性能担忧。

（并不是说你在这里肯定会没有问题，只是不要优化那些不是*真正*问题的东西......）

编辑：相信你自己的判断，你是否记录了“太多”；如果单个 UI 或服务操作生成 20 页的附带/调试级别信息，即使在 INFO 级别日志记录中，您可能需要优化内容以使其真正有用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T13:57:22.643

这种纳米优化通常以无用的努力结束，除了从以秒或有时以分钟为单位处理的时间中减去一些毫秒之外，不会增加任何整体价值。视情况而定，但您的情况可能是每一点都很重要的情况之一。

根据数据确定优化需求，不要预先优化，尤其是使用此类方法。我敢打赌，还有其他方法可以证明比质疑`toString`like 的使用更有价值，例如，改进常用算法的顺序或减少操作的负载（更少的调用，但重要的调用）。

只需将 的用法`toString`与您想到的解决方案进行比较，您正在实现一种观察者模式，如果字段发生更改，它会更新中央字符串存储库？那是在每个 setter 上执行代码（如果您使用这种方法）。

# json - 主干从json文件中获取特定对象，而不是渲染

> ID：14876257
> 
> 赞同：0
> 
> 时间：2013-02-14T13:47:14.903
> 
> 标签：json, parsing, backbone.js, fetch

好的，我试图在 2 个单独的视图/集合中显示来自 json 文件的数据有点疯狂。

我将在这里粘贴我的整个代码并尝试解释我现在在哪里，以及我需要做什么。它可能是我只需要做的一件很小的事情才能让它工作，但我看不到它..

这是我的页面现在的屏幕截图，您可以看到正在加载数据，我只是无法将其正确放入视图中..

![在此处输入图像描述](../Images/1e8d2a8663d4c6665d3dd33fff8814ec.png)

在我的 Collection 类中，我调用 parse：

```
parse:function(response, options) {
   return options.parseField ? response[options.parseField] : response;
}, 
```

我打电话给同步：（不确定它是否需要）

```
sync: function(method, model, options) {
options.contentType = "application/json";
options.cache = false;
options.dataType = "json";
return Backbone.sync(method, model, options);
}, 
```

然后在底部附近，我创建了 2 个新集合并使用 fetch 来获取每个集合所需的特定 json 数据，如下所示：

```
var links = new App.Collections.Links();
links.fetch({
  parseField: 'links_1',
  success: function () {
    console.log(links.toJSON());
            return links.toJSON();
  }
});

var links2 = new App.Collections.Links();
links2.fetch({
  parseField: 'links_2',
  success: function () {
    console.log(links2.toJSON());
            return links2.toJSON();
  }
}); 
```

我做了console.log，可以看到我的json数据加载得很好，但它没有被渲染？

我在这里做错了什么..

为了调试和理解，我在下面包含了我的整个 js 文件。

```
(function() {

// Helper functions

// Defining namespacing rules
window.App = {
    Models: {},
    Collections: {},
    Views: {}
};

// Setting global template function, for simpel declaration later on by setting template('name'); for the built in template function.
window.template = function(id) {
    return _.template( $('.' + id).html() );
};

// Capitalize first letter in a link by adding .capitalize(); to the string.
String.prototype.capitalize = function() {
    return this.charAt(0).toUpperCase() + this.slice(1);
};

// Extending Backbone 

//Modellen
App.Models.Link = Backbone.Model.extend({
    defaults: {
        navn : 'i haz a name!',
        link : 'http://www.lolcats.com/',
        counter : 0
    }
});

//Collection
App.Collections.Links = Backbone.Collection.extend({ 

    model: App.Models.Link,
    url: 'data1.json',

    parse:function(response, options) {
        return options.parseField ? response[options.parseField] : response;
    },

    sync: function(method, model, options) {
        options.contentType = "application/json";
        options.cache = false;
        options.dataType = "json";
        return Backbone.sync(method, model, options);
    },

    // Sort the models 'highest first'
    comparator: function(link) {
    return -link.get('counter');
    }       
});

//Singel view
App.Views.LinkView = Backbone.View.extend({
    tagnavn: 'li',

    template: template('Links'),

    initialize: function() {
        this.model.on('change', this.render, this);
        this.model.on('destroy', this.remove, this);
    },

    events: {
    'click .edit' : 'retLink',
    'click .delete' : 'destroy',
    'click .LinkUrl' : 'addCounter'
    },

    retLink: function() {
        var newLinkNavn = prompt('What should the new name be?', this.model.get('navn'));

        if ( !newLinkNavn ) return;

        newLinkNavn = newLinkNavn.capitalize();
        this.model.set('navn', newLinkNavn);

        var newLinkUrl = prompt('What should the new url be?', this.model.get('link'));
        if ( !newLinkUrl ) return;
        this.model.set('link', newLinkUrl);
    },      

    destroy: function() {
        this.model.destroy();

    },

    // Increment the counter then user clicks it
    addCounter: function(e) {
        e.preventDefault();
        var newCounter = this.model.get('counter');
        this.model.set('counter', newCounter + 1);
    },

    remove: function() {
        this.$el.remove();
    },

    render: function()  {
        this.$el.html(this.template(this.model.toJSON()) );
        return this;
    }
});

//Collection View
App.Views.LinksView = Backbone.View.extend({
    tagName: 'ul',
    className: 'liste',

    initialize: function() {
        _.bindAll(this);
        this.collection.on('add', this.addOne, this);
        this.collection.on('reset', this.render);

        // Render view when a user has changed a model          
        this.collection.bind('change', this.render, this); 

        $('.navnClass').focus();
        this.load();
        this.render();

    },

    load: function() {
        this.collection.fetch({
          add: true,
          success: this.loadCompleteHandler,
          error: this.errorHandler
        });     
    },

    loadCompleteHandler : function(){
        this.render();
    },

    errorHandler : function(){
        throw "Error loading JSON file";
    },

    render: function() {
        // Empty the UL before populating it with the new models and sorting it.
        this.$el.empty();
        this.collection.sort();

        this.collection.each(this.addOne, this);
        return this;
    },

    addOne: function(link) {
        var linkView = new App.Views.LinkView({ model: link });
        this.$el.append(linkView.render().el);
    }
});

// Create link view 
App.Views.AddLink = Backbone.View.extend({
    el: '#addLink',

    events: {
        'submit' : 'submit'
    },

    submit: function(e) {
        e.preventDefault();
        var linkNavn = $(e.currentTarget).find('.navnClass').val(),
             linkNum =  $(e.currentTarget).find('.linkClass').val();

        // Tildel link navn en værdi, hvis det er tomt   
        if ( ! $.trim(linkNavn)) {
                linkNavn = 'I haz a name!';
        }

        // Tildel link url en værdi, hvis det er tomt    
        if( ! $.trim(linkNum)) {
                linkNum = 'http://www.lolcats.com/';
        }

        // Tilføj http:// foran værdi, hvis den ikke indeholder det i forvejen.
        if( linkNum.indexOf( "http://" ) == -1 ) {
             addedValue = 'http://',
             linkNum = addedValue + linkNum;
        }

        // nulstil og sæt fokus på link navn feltet.
        $(e.currentTarget).find('.navnClass').val('').focus();
        $(e.currentTarget).find('.linkClass').val('');
        this.collection.add({ navn:linkNavn, link: linkNum });
    }

});

// new links collection
// populate collection from external JSON file
// change navn to match the link heading

var links = new App.Collections.Links();
links.fetch({
  parseField: 'links_1',
  success: function () {
    console.log(links.toJSON());
            return links.toJSON();
  }
});

var links2 = new App.Collections.Links();
links2.fetch({
  parseField: 'links_2',
  success: function () {
    console.log(links2.toJSON());
            return links2.toJSON();
  }
}); 

// new collection view (add)
var addLinkView = new App.Views.AddLink({ collection: links });

// new collection view
var linksView = new App.Views.LinksView({ collection: links });
$('.links').html(linksView.el);

// new collection view
var linksView2 = new App.Views.LinksView({ collection: links2 });
$('.links2').html(linksView2.el);   

})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:40:33.480

你能试试这个：

```
var links2 = new App.Collections.Links();
links2.on("reset", function(collection){
   console.log("reset event", collection);
}
links2.fetch({
  parseField: 'links_2',
  wait:true, #wait for the server to respond
  success: function (collection, response) {
    console.log(collection, response);
  }
}); 
```

成功调用中的返回不执行任何操作（它将返回到 $.ajax 对象）。我添加了一个等待，因为如果它通过客户端验证，它会立即调用successcall（你没有，所以它总是首先调用success）。

你说它不会渲染任何东西。但是要渲染一些东西，你需要一个视图。我在您的代码中没有看到视图。

这是视图的一个简单示例：

```
var Link = new Backbone.View.extends({
    el: $('body'),
    initialize: function(){
       this.listenTo(this.collection, 'reset', this.render, this)
    },
    render: function(){
     this.$el.empty();
     this.collection.each(function(item){
        this.$el.append(item.get('id') + '<br />');
     });

    }
})
var view = new Link({collection: links2}); 
```

# android - GoogleMaps v2 - 将叠加层添加到 Activity 或 FragmentActivity

> ID：14876260
> 
> 赞同：-1
> 
> 时间：2013-02-14T13:47:17.303
> 
> 标签：android, google-maps, google-maps-api-2, google-maps-android-api-2

请告诉我，我有很多小时无法理解。

我有一张地图。我想按照你的方式画。

问题是所有的例子都是mapView，而我有一个片段。

我不明白如何绘制路线？

如何创建活动？

所以

```
public class TravelMapActivity extends Activity implements OnClickListener {
    private GoogleMap map;
    private ToggleButton travelOnOffButton;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.travel_map_activity);
        init();
        map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();

        travelOnOffButton = (ToggleButton) findViewById(R.id.travel_start_stop);
        travelOnOffButton.setOnClickListener(this);
    } 
```

或者？

```
public class TravelMapActivity extends FragmentActivity implements OnClickListener {
    private GoogleMap map;
    private ToggleButton travelOnOffButton;
    private SupportMapFragment mMapFragment;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mMapFragment = new SupportMapFragment();
        try {
            MapsInitializer.initialize(this);
        } catch (GooglePlayServicesNotAvailableException e) {
            // TODO handle error
            e.printStackTrace();
        }
        getSupportFragmentManager().beginTransaction().add(android.R.id.content, mMapFragment).commit();

        travelOnOffButton = (ToggleButton) findViewById(R.id.travel_start_stop);
        travelOnOffButton.setOnClickListener(this);
    } 
```

在这种情况下它已经在线 setOnClickListener - 抛出 NullPointerException。

并作为一个例子。

```
class RouteOverlay extends Overlay {

    private Projection projection;

    public RouteOverlay() {
    }

    public void draw(Canvas canvas, MapView mapv, boolean shadow) {
        super.draw(canvas, mapv, shadow);

        Paint mPaint = new Paint();
        mPaint.setDither(true);
        mPaint.setColor(Color.RED);
        mPaint.setStyle(Paint.Style.FILL_AND_STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(2);

        GeoPoint gP1 = new GeoPoint(19240000, -99120000);
        GeoPoint gP2 = new GeoPoint(37423157, -122085008);

        Point p1 = new Point();
        Point p2 = new Point();
        Path path = new Path();

        projection.toPixels(gP1, p1);
        projection.toPixels(gP2, p2);

        path.moveTo(p2.x, p2.y);
        path.lineTo(p1.x, p1.y);

        canvas.drawPath(path, mPaint);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:51:31.440

要在 Maps V2 上绘制路线，请在[中](https://developers.google.com/maps/documentation/android/lines)[添加`Polyline``GoogleMap`](https://developers.google.com/maps/documentation/android/lines)：

```
PolylineOptions line=
      new PolylineOptions().add(new LatLng(40.70686417491799,
                                           -74.01572942733765),
                                new LatLng(40.76866299974387,
                                           -73.98268461227417),
                                new LatLng(40.765136435316755,
                                           -73.97989511489868),
                                new LatLng(40.748963847316034,
                                           -73.96807193756104))
                           .width(5).color(Color.RED);

  map.addPolyline(line); 
```

（取自[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/Poly)的代码）

# ios - UICollectionView 呈现比故事板更高

> ID：14876262
> 
> 赞同：3
> 
> 时间：2013-02-14T13:47:25.453
> 
> 标签：ios, xcode, storyboard, uicollectionview, uicollectionviewlayout

我在故事板（iPad）中有一个 UICollectionView。我没有以编程方式设置任何属性（边距、大小等）——我的委托只实现了强制方法（部分和项目的数量，cellForItemAtIndexPath）。我使用的是标准流布局，水平滚动（1 行），没有顶部/底部插图。我有一个自定义单元格类，但同样没有什么花哨的（只是一些标签的 IBOutlets 和一个 imageView）。我的单元格是 100x100 像素。collectionView 的高度设置为 100px，IB 将其显示为这样。

![属性检查器](../Images/6c7481d9aa1adc16982d07d4bd616101.png) ![尺寸检查员](../Images/33fc8cc81b3183c5b58fe8e353bbb992.png)

但是，当我运行该应用程序时，我将 collectionView 呈现为 140 像素的高度（单元格上方和下方的边距为 20 像素）。我为所有属性（包括最小间距）使用了不同的值，但无法使视图更短——我只能通过更改插图来使其更高。

这是一个错误还是我错过了一些我无法规避的逻辑，例如标准布局将强制包括其内容上方和下方的一些最小间距？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T12:22:53.740

对我来说，解决方案是在具有集合视图的视图控制器上禁用“调整滚动视图插图”。

# ruby - 从一个数组替换另一个数组的值

> ID：14876266
> 
> 赞同：1
> 
> 时间：2013-02-14T13:47:49.480
> 
> 标签：ruby

我有两个数组：

```
array1 = [3, 4, 4, 5, 6, 7, 8, 8]
array2 = [4, 5, 8, 8] 
```

我想删除 中的那些元素`array1`，`array2`但仅在一个实例中。结果数组 ,`array3`必须是这样的：

```
array3 = [3, 4, 6, 7] 
```

我试过：

```
array3 = array1 - array2 
```

但结果并不理想：

```
array3 -> [3, 6, 7] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:07:07.047

这可能不是做你想做的最有效的方法，但它有效：

```
array1 = [3, 4, 4, 5, 6, 7, 8, 8]
array2 = [4, 5, 8, 8]
array2.each do |item|
    index = array1.index item
    array1.delete_at index if index
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:04:54.670

一个非命令式只是为了展示其他的做事方式。使用 Facets（只是为了方便获取直方图），我会写这个。在）：

```
require 'facets'

array3 = array1.reduce([array2.frequency, []]) do |(h, output), x|
  if h[x] && h[x] > 0
    [h.update(x => h[x] - 1), output]
  else
    [h, output << x] 
  end
end[1]
#=> [3, 4, 6, 7] 
```

要使代码片段纯粹是功能性的，您可以使用 Hash#merge/Array#+ 而不是 Hash#update/Array:<<，但由于这些数据结构的性质，它的效率会非常低。

# android - Intent 和 Bundle 的简单示例

> ID：14876273
> 
> 赞同：29
> 
> 时间：2013-02-14T13:48:03.677
> 
> 标签：android, android-intent, bundle

我是 android 新手，对 Java 和 XML 几乎一无所知。我正在通过我在网上获得的 pdf 来学习它。我了解了 Toast，了解了一些 Intents，但我对 Bundles 一无所知。我知道它们用于将数据从一个活动传递到另一个活动，但我无法实现这一点。

请举一个简单的例子来实现相同的。

例如，我刚刚创建了两个活动，即 Main_Activity 和 Other_Activity，我还没有对它们做任何事情。

请举一个最简单的例子，以便我可以学习实现。

提前致谢！！

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-02-14T13:57:03.927

例如 ：

在 MainActivity ：

```
Intent intent = new Intent(this, OtherActivity.class);
intent.putExtra(OtherActivity.KEY_EXTRA, yourDataObject);
startActivity(intent); 
```

在其他活动中：

```
public static final String KEY_EXTRA = "com.example.yourapp.KEY_BOOK";

@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);

  String yourDataObject = null;

  if (getIntent().hasExtra(KEY_EXTRA)) {
      yourDataObject = getIntent().getStringExtra(KEY_EXTRA);
  } else {
      throw new IllegalArgumentException("Activity cannot find  extras " + KEY_EXTRA);
  }
  // do stuff
} 
```

更多信息在这里：http: [//developer.android.com/reference/android/content/Intent.html](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-14T13:58:52.300

试试这个：如果你需要在你使用这个的活动之间传递值......

这是 Main_Activity 的代码，将值放入意图

```
 String name="aaaa";
 Intent intent=new Intent(Main_Activity.this,Other_Activity.class);
 intent.putExtra("name", name);
 startActivity(intent); 
```

此代码用于 Other_Activity 并从意图中获取值

```
 Bundle b = new Bundle();
    b = getIntent().getExtras();
    String name = b.getString("name"); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-14T13:59:51.473

基本上这是你需要做的：
在第一个活动中：

```
Intent intent = new Intent();
intent.setAction(this, SecondActivity.class);
intent.putExtra(tag, value);
startActivity(intent); 
```

在第二个活动中：

```
Intent intent = getIntent();
intent.getBooleanExtra(tag, defaultValue);
intent.getStringExtra(tag, defaultValue);
intent.getIntegerExtra(tag, defaultValue); 
```

根据您传递的数据类型，其中一个 get 函数将为您返回值。

# css - 我应该如何划分 CSS 文件以支持多个设备？

> ID：14876274
> 
> 赞同：3
> 
> 时间：2013-02-14T13:48:05.463
> 
> 标签：css, responsive-design, media-queries, device-orientation

我正在为我们的网站重写 CSS，因为前一个变得非常臃肿（其中一个 CSS 文件大约有 180kb）。这正常吗？

我有兴趣找出为网站存储 CSS 代码的最有效和最有效的方式。由于当今设备的性质，我认为不可能编写针对设备的媒体查询（例如 responsive.smartphone.landscape、responsive.tablet.portrait 等）。此外，使用断点方法，许多媒体查询将重叠。

我正在考虑通过媒体查询编写 CSS 文件，并为重叠的媒体查询使用单独的文件。当只有一小部分文件代码与设备本身相关时，如何减少臃肿且不必将 200kb CSS 文件发送到智能手机或平板电脑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:06:37.063

对于智能手机等，您可以将媒体查询从 css 文件中的内部移动到链接元素，如下所示。这样，您只需为每个加载一个 css 文件。

```
<link rel='stylesheet' media='screen and (max-width: 320px)' href='css/mobile.css' />
<link rel='stylesheet' media='screen and (min-width: 321px) and (max-width: 768px)' href='css/tablet.css' />
<link rel='stylesheet' media='screen and (min-width: 769px)' href='css/desktop.css' /> 
```

我不认为 IE8 或更低版本将支持这样的媒体查询，因此您还应该提供一个后备：

```
<!--[if lte IE 8]>
<link rel='stylesheet' media='screen' href='css/desktop.css' />
<![endif]--> 
```

# python - 在不同主机上并行和后台执行 Fabric 功能

> ID：14876275
> 
> 赞同：3
> 
> 时间：2013-02-14T13:48:10.123
> 
> 标签：python, parallel-processing, fabric

已经提出了类似的问题，但没有解决我的问题。

我有类似的东西：

```
from fabric.api import *
env.rolesdefs = {'server1' : [me@312312], 'server2' : [me@978978]}

@roles('server1')
def run_task1():
    do_stuff_forever

@roles('server2')
def run_task2():
    do_other_stuff_forever 
```

因为 *_forever 行为，我不能连续运行它们。server2 上的 task2 永远不会启动。如何在两个不同的服务器上同时启动它们？我试过了：

```
def run_all():
    execute(run_task1)
    execute(run_task2) 
```

@parallel 装饰器不起作用。我尝试了此处给出的建议[fabric FAQ](http://docs.fabfile.org/en/1.2.2/faq.html#why-can-t-i-run-programs-in-the-background-with-it-makes-fabric-hang)。只有屏幕可用，我不知道如何同时启动两个屏幕会话。我想，在后台运行第一个可以解决我的问题吗？如何可靠地将 task1 置于后台？运行 fabric 1.4 和 pytho n2.6

谢谢您的帮助。

PS：我想避免在 bkg 中分别运行两个任务的 shell 脚本进行明显的破解：

```
#! /bin/bash
fab run_task1 &
fab run_task2 & 
```

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-15T14:43:32.307

如果你设置

```
env.parallel = True 
```

这有帮助吗？

# jquery - jQuery在noConflict环境中声明函数

> ID：14876276
> 
> 赞同：0
> 
> 时间：2013-02-14T13:48:15.733
> 
> 标签：jquery

有没有办法在声明的函数内使用 $ 而不是 jQuery，在 noConflict 时不在 jQuery(document).ready 内？

示例代码：

```
jQuery(document).ready(function($){
    $('.button').click(function(e) {
        e.preventDefault();
        some_function($(this));
        return false;
    });
});

function some_function(el) {
    var id = jQuery(el).attr('href');
} 
```

我很想在 some_function 中使用 $ 而不是 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T13:49:21.043

```
function some_function(el) {
    var $ = jQuery;
    var id = $(el).attr('href);
} 
```

但以这样的速度，为什么要打扰`$.noConflict`？

# laravel - laravel fluent更新两个表

> ID：14876283
> 
> 赞同：2
> 
> 时间：2013-02-14T13:48:49.543
> 
> 标签：laravel

我有两个表我想用一个查询更新，但我找不到如何做到这一点？

```
 $update = DB::table('users')
        ->join('addresses', 'users.id', '=', 'addresses.user_id')
        ->where('id', '=', Auth::user()->id)
        ->update(array(
            'firstname' =>  $userDetails['firstname'],
            'lastname'  =>  $userDetails['lastname'],
            'email'     =>  $userDetails['email'],
            'password'  =>  $userDetails['password'],
            'addresses.add_line1'       =>  $userDetails['addl1'],
            'addresses.add_line2'       =>  $userDetails['addl2'],
            'addresses.town'            =>  $userDetails['town'],
            'addresses.county'      =>  $userDetails['county'],
            'addresses.post_code'       =>  $userDetails['postcode']

        ));

    dd($update); 
```

但我得到这个返回

```
 SQLSTATE[42S22]: Column not found: 1054 Unknown column 'add_name_no' in 'field list' 
```

有人有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:27:20.437

除了使用 DB::raw(); 编写自定义查询之外，恐怕没有简单的方法可以解决这个问题。

即使您添加了 JOIN 方法，laravel 更新时也不会在查询中包含 join。我不是 100% 确定原因，但这与不同数据库引擎之间的差异有关。

更新

虽然看起来 laravel 4 会有这个功能[https://github.com/laravel/framework/commit/57e11e392447206f60d77b33c0646229842315a3](https://github.com/laravel/framework/commit/57e11e392447206f60d77b33c0646229842315a3)

刚刚将它添加到我的 laravel 应用程序中，它很有效！

# java - 使用 XSD 进行 Java HTML 5 验证 / trang HTML 5 Relax NG 到 XSD 转换

> ID：14876285
> 
> 赞同：2
> 
> 时间：2013-02-14T13:49:08.530
> 
> 标签：java, html, validation, xsd, relaxng

我的目标是在 java 中使用 XSD 模式进行独立的 HTML 5 标记验证。

在下文中，我描述了我的方法。任何帮助表示赞赏 - 如果有替代或更好的方法来做到这一点。

[WHATTF](http://whattf.org)发布了针对 HTML 5的[Relax NG/Schematron 模式](http://syntax.whattf.org)。

Trang [3] 是一个用于不同 XML 模式语言的开源转换器，应该能够从 Relax NG 转换为 XSD。使用 WHATTF 模式，可以如下进行 trang 转换器调用：

```
$ java -jar ./trang.jar ./whattf/syntax/relaxng/html5.rnc html5.xsd 
```

但是，trang 会在不正确的类型转换时产生以下许多警告：

```
whattf/syntax/relaxng/applications.rnc:265:51: warning: cannot convert datatype library "http://whattf.org/datatype-draft"; using datatype "string"
[...] 
```

我认为要使 trang 正常工作，需要将 pluggable-datatypes [4] 传递给 jing。Jing [5] 是一个 Relax NG 验证器，我认为它被 trang 使用。

在 whattf/syntax/relaxng/datatype 文件夹中，提供了这些可插入数据类型的 java 实现。因此，我创建了一个 html5-datatypes.jar 并将其添加到 trangs 类路径中，如下所示：

```
$ java -cp ./html5-datatypes.jar  -jar ./trang.jar ./whattf/syntax/relaxng/html5.rnc html5.xsd 
```

但是，这会导致相同的错误。

除此之外，使用创建的 XSD 文件`javax.xml.validation.Validator`如下：

```
SchemaFactory schemaFactory = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
Schema schema = schemaFactory.newSchema( new File("html5.xsd") );
Validator validator = schema.newValidator();
validator.validate( new StreamSource( new File("example.html") ) ); 
```

产生异常：

```
org.xml.sax.SAXParseException: cos-element-consistent: Error for type 'time.inner'. Multiple elements with name 'script', with different types, appear in the model group.
at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
at org.apache.xerces.util.ErrorHandlerWrapper.error(Unknown Source)
at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
at org.apache.xerces.impl.xs.XSConstraints.reportSchemaError(Unknown Source)
at org.apache.xerces.impl.xs.XSConstraints.fullSchemaChecking(Unknown Source)
at org.apache.xerces.impl.xs.XMLSchemaLoader.loadGrammar(Unknown Source)
at org.apache.xerces.impl.xs.XMLSchemaLoader.loadGrammar(Unknown Source)
at org.apache.xerces.jaxp.validation.XMLSchemaFactory.newSchema(Unknown Source)
at javax.xml.validation.SchemaFactory.newSchema(SchemaFactory.java:594)
at javax.xml.validation.SchemaFactory.newSchema(SchemaFactory.java:610) 
```

[3] thaiopensource.com/relaxng/trang.html

[4] thaiopensource.com/relaxng/pluggable-datatypes.html

[5] thaiopensource.com/relaxng/jing.html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:32:42.650

Web 中似乎有一些 XHTML 5 XSD。例如，在以下位置有一个开源 XHTML 5 Schema：[http ://www.xmlmind.com/xmleditor/download.shtml](http://www.xmlmind.com/xmleditor/download.shtml)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T17:54:46.957

来自 html5 规范的第 8.2 节

[http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html](http://www.w3.org/TR/2011/WD-html5-20110113/parsing.html)

> 虽然本规范中描述的 HTML 语法与 SGML 和 XML 非常相似，但它是一种具有自己解析规则的独立语言。
> 
> 一些早期版本的 HTML（特别是从 HTML2 到 HTML4）基于 SGML 并使用 SGML 解析规则。然而，很少（如果有的话）Web 浏览器实现了对 HTML 文档的真正 SGML 解析；历史上，唯一将 HTML 作为 SGML 应用程序严格处理的用户代理是验证器。由此产生的混乱——验证器声称文档具有一种表示，而广泛部署的 Web 浏览器可互操作地实现不同的表示——浪费了数十年的生产力。因此，这个版本的 HTML 返回到非 SGML 基础。
> 
> 鼓励有兴趣在其创作管道中使用 SGML 工具的作者使用 XML 工具和 HTML 的 XML 序列化。

因此，除非您正在编写 xml 格式的 html5，否则您不能使用 XSD 来验证 html5。

# varnish - Varnish 对象的可能属性

> ID：14876286
> 
> 赞同：5
> 
> 时间：2013-02-14T13:49:11.863
> 
> 标签：varnish

我一生都找不到任何关于清漆（版本 3）对象的可能属性的文档。

我们知道（通过谷歌搜索，varnish 文档只是含糊不清，让您更加沮丧）例如，请求对象具有 url 属性 (req.url) 并且它具有 req.http.X-Forwarded-For。但是有没有人以任何方式找到……比如说……一份清单？

谢谢！

/乔金

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T21:30:09.037

您无法真正给出完整的列表，例如`req.http.X-Forwarded-For`HTTP`req.http.*`标头。`Cookie`请求的标头将是`req.http.Cookie`，`User-Agent`标头将是`req.http.User-Agent`。有很多标准标题，但您可以设置任意标题，它会显示在`req.http.___________`. 您可以在 中查看 HTTP**响应**的标头`resp.http.*`。中的后端响应相同`beresp.http.*`。

此处列出了所有其他属性：[https ://www.varnish-cache.org/docs/3.0/reference/vcl.html#variables](https://www.varnish-cache.org/docs/3.0/reference/vcl.html#variables)

# java - 如何为阿拉伯语添加语言环境

> ID：14876287
> 
> 赞同：4
> 
> 时间：2013-02-14T13:49:16.293
> 
> 标签：java, internationalization, multilingual

我正在尝试使用[本教程使用 JSF 2.0 构建多语言网站](http://www.mkyong.com/jsf2/jsf-2-internationalization-example/)

但我正面临着这条线

```
countries.put("English", Locale.ENGLISH);
countries.put("Chinese", Locale.SIMPLIFIED_CHINESE);
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

我想把它写成`Arabic`，但`Locale.XXXXXXX`不支持阿拉伯国家。我得到的是一些国家，但没有阿拉伯国家。

任何想法，我该怎么做才能拥有阿拉伯国家？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-14T13:55:24.973

你必须使用这个

```
countries.put("Arabic", new Locale("ar", "DZ"));
//or just language name for generic Arabic
new Locale("ar"); 
```

其中第一对字母表示语言，第二对是国家（地区） - 在这种情况下为阿尔及利亚。您可以使用[此](http://www.roseindia.net/tutorials/i18n/locales-list.shtml)链接作为可用国家和地区列表的参考（我知道，Roseindia 很烂，但在我看来这个列表非常有用）。

# amazon-web-services - 合并多个 AWS 开发人员账户？

> ID：14876291
> 
> 赞同：0
> 
> 时间：2013-02-14T13:49:26.797
> 
> 标签：amazon-web-services, amazon-ec2

我正在为两个不同的雇主工作，从事一个目标相似的项目。两者都使用 Amazon EC2 作为他们的服务器，并且都给了我一个帐户来访问他们的实例，具有不同的用户 ID 和密码对，是否可以让这两个帐户成为另一个帐户的子集？所以我可以从该主帐户轻松地从一个帐户切换到另一个帐户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:56:27.430

不，除非您希望超集账户也承担子账户的计费责任。我很确定您和您的两个雇主中的任何一个都不会因为两者的复合 EC2 使用而被收费......

但是，从工作实践的角度来看，您可以使用任意数量的不同帐户配置来配置[ElasticFox](http://sourceforge.net/projects/elasticfox/)，并通过单击下拉菜单在它们之间进行切换。

# fortran90 - fortran中读取文件的格式

> ID：14876292
> 
> 赞同：0
> 
> 时间：2013-02-14T13:49:28.507
> 
> 标签：fortran90

fortran中以下数据集的读取格式应该是什么。第 1 列和第 2 列之间有 6 个空格，第 1 列的边距没有空格。

```
1911.01.01     2.42873702403226
1911.01.02     3.5057043827303
1911.01.03     2.73602527398387
1911.01.04     6.07213767208333
1911.01.05     6.94818901068145
1911.01.06     3.66986589769583
1911.01.07     1.94565994542339
1911.01.08     2.39384275272177
1911.01.09     3.05526130775417
1911.01.10     2.69990836499194
1911.01.11     6.08406263835833
1911.01.12     7.34200241064516
1911.01.13     2.42873702403226
1911.01.14     3.5057043827303
1911.01.15     2.73602527398387
1911.01.16     6.07213767208333
1911.01.17     6.94818901068145
1911.01.18     3.66986589769583
1911.01.19     1.94565994542339
1911.01.20     2.39384275272177
1911.01.21     3.05526130775417
1911.01.22     2.69990836499194
1911.01.23     6.08406263835833
1911.01.24     7.34200241064516
1911.01.25     2.42873702403226
1911.01.26     3.5057043827303
1911.01.27     2.73602527398387
1911.01.28     6.07213767208333
1911.01.29     6.94818901068145
1911.01.30     3.66986589769583
1911.01.31     1.94565994542339 
```

我试过.....格式`(i4,i2,i2,6x,d9.14)`

但它没有用

提前致谢

酶联免疫吸附试验

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:36:52.853

所以试试

```
(i4,a1,i2,a1,i2,6x,d16.14) 
```

我认为你犯了两个错误：

1.  不考虑`.`日期中的字符，我认为它们不会自动被视为字段分隔符（如`,`或空格）。显然你会想忽略它们。
2.  在您的`d`编辑描述符中，十进制位数，即 之后的数字`.`应该不大于总字段宽度，*即*.之前的数字`.`。

# jquery - Microsoft JScript 运行时错误：对象不支持属性或方法“自动完成”

> ID：14876293
> 
> 赞同：-1
> 
> 时间：2013-02-14T13:49:34.377
> 
> 标签：jquery, asp.net-mvc-3, autocomplete

我正在使用自动完成框来搜索州名目的。但是我收到了以下错误。

`Microsoft JScript runtime error: Object doesn't support property or method 'autocomplete`

我应该为此需要什么所有脚本。请在下面找到我的代码：

```
 $(function () {
                    $('#txtBState').autocomplete({
                        source: function (request, response) {
                        if (request.term in cache) {
                            response($.map(cache[request.term].d, function (item)
                            { return { value: item.State, value: item.ChargeID, value: item.ShippingCharge} }))
                        }

                        $.ajax({
                            url: "../Billing/AutocompleteState",
                            dataType: "json",
                            data: {
                                SearchText: $('#txtBState').val(),
                                SearchText: request.term
                            },
                            contentType: "application/json; charset=utf-8",
                            dataFilter: function (data) { return data; },
                            success: function (data) {
                                response(data.slice(0, 5));
                            }
                        });
                    },
                    minLength: 2,
                    select: AutoCompleteSelectHandlerState
                });
                function AutoCompleteSelectHandlerState(event, ui) {
                    var selectedObj = ui.item;

                    $('#txtChargeIDs').val(ui.item.ChargeID);
                    $('#txtChargeAmts').val(ui.item.ShippingCharge);
                }
                }); 
```

**我在视图中使用了三种类型的脚本**

*不支持所有三种格式的脚本。*

```
 1)<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="http://dev.jquery.com/view/trunk/plugins/autocomplete/jquery.autocomplete.js"></script>

    <link rel="stylesheet" href="http://dev.jquery.com/view/trunk/plugins/autocomplete/demo/main.css"type="text/css" />
    <link rel="stylesheet" href="http://dev.jquery.com/view/trunk/plugins/autocomplete/jquery.autocomplete.css" type="text/css" />
    2)
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
    <script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js" type="text/javascript"></script>
    3)
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.1/jquery-ui.min.js" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:21:05.567

我的第一个猜测是您的数据格式不正确或有其他错误阻止自动完成方法执行。如果您使用的是 Firebug 或 Chrome，您应该能够查看控制台日志以获得更好定义的错误

# c# - 如何检测流媒体源是否存活？

> ID：14876295
> 
> 赞同：0
> 
> 时间：2013-02-14T13:49:39.423
> 
> 标签：c#, .net, streaming, protocols

假设有一些类型的流媒体源，例如：

> [http://mysite.com/sources/1.flv](http://mysite.com/sources/1.flv)
> 
> rtsp://mysite.com//sources/channel1
> 
> [http://mysite.com//sources/1.mp4](http://mysite.com//sources/1.mp4)
> 
> 彩信：//mysite.com/channel2

有没有一种简单的方法来检测它们是否在 C# 中还活着？

PS如果你投了反对票，请解释一下。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:43:20.757

嗯......我面临的唯一一个解决方案是实现一些 DLL，通过不同的方式检查所有这些 URL：

**(1) 检查 http/https 我们可以使用**

```
HttpWebRequest WebReq = (HttpWebRequest)WebRequest.Create("http://content.bitsontherun.com/videos/bkaovAYt-52qL9xLP.mp4");
WebReq.Method = "GET";
HttpWebResponse WebResp = (HttpWebResponse)WebReq.GetResponse();
Console.WriteLine(WebResp.StatusCode); // Server Code 
```

所以如果`StatusCode`是`OK`链接是活的。

(2)**检查我们可以使用的 mms**

**WPF Mediaelement**及其事件

```
public MainWindow()
        {
            InitializeComponent();
            Loaded += MainWindow_Loaded;
        }

        void MainWindow_Loaded(object sender, RoutedEventArgs e)
        {
            try
            {
                MediaElement me = new MediaElement();
                me.MediaEnded += me_MediaEnded;
                me.MediaFailed += me_MediaFailed;
                me.MediaOpened += me_MediaOpened;

                me.Source = new Uri("mms://95.0.159.131/TRTBELGESEL");

                mainGrid.Children.Add(me);
            }
            catch (Exception ex)
            {                
            }
        }

        void me_MediaOpened(object sender, RoutedEventArgs e)
        {
            Debug.WriteLine("OPENED"); //  It means OK!
        }

        void me_MediaFailed(object sender, ExceptionRoutedEventArgs e)
        {
            Debug.WriteLine("FAILED");
        }

        void me_MediaEnded(object sender, RoutedEventArgs e)
        {
            Debug.WriteLine("ENDED");
        } 
```

**(3) 并检查 rtsp 链接，我们可以使用另一个很棒的库**

[http://net7mma.codeplex.com/](http://net7mma.codeplex.com/)

我找到了这个：

```
static void TestRtspClient()
        {

            Console.WriteLine("Test #1\. Press a key to continue. Press Q to Skip");
            if (Console.ReadKey().Key != ConsoleKey.Q)
            {

                //Make a client
                //This host uses Udp but also supports Tcp if Nat fails
                Rtsp.RtspClient client = new Rtsp.RtspClient("rtsp://178.218.212.102:1935/live/Stream1");
            StartTest:
                //Assign some events (Could log each packet to a dump here)
                client.OnConnect += (sender, args) => { Console.WriteLine("Connected to :" + client.Location); };
                client.OnRequest += (sender, request) => { Console.WriteLine("Client Requested :" + request.Location + " " + request.Method); };
                client.OnResponse += (sender, request, response) => { Console.WriteLine("Client got response :" + response.StatusCode + ", for request: " + request.Location + " " + request.Method); };
                client.OnPlay += (sender, args) =>
                {
                    //Indicate if LivePlay
                    if (client.LivePlay)
                    {
                        Console.WriteLine("Playing from Live Source");
                    }

                    //Indicate if StartTime is found
                    if (client.StartTime.HasValue)
                    {
                        Console.WriteLine("Media Start Time:" + client.StartTime);

                    }

                    //Indicate if EndTime is found
                    if (client.EndTime.HasValue)
                    {
                        Console.WriteLine("Media End Time:" + client.EndTime);
                    }
                };
                client.OnDisconnect += (sender, args) => { Console.WriteLine("Disconnected from :" + client.Location); };

                try
                {
                    //Try to StartListening
                    client.StartListening();
                }
                catch (Exception ex)
                {
                    Console.BackgroundColor = ConsoleColor.Red;
                    Console.WriteLine("Was unable to StartListening: " + ex.Message);
                    Console.BackgroundColor = ConsoleColor.Black;
                }

                //If We are connected
                if (client.Connected && client.Client != null)
                {

                    //Add some more events once Listening
                    client.Client.RtpPacketReceieved += (sender, rtpPacket) => { Console.WriteLine("Got a RTP packet, SequenceNo = " + rtpPacket.SequenceNumber + " Channel = " + rtpPacket.Channel + " PayloadType = " + rtpPacket.PayloadType + " Length = " + rtpPacket.Length); };
                    client.Client.RtpFrameChanged += (sender, rtpFrame) => { Console.BackgroundColor = ConsoleColor.Blue; Console.WriteLine("Got a RTPFrame PacketCount = " + rtpFrame.Count + " Complete = " + rtpFrame.Complete); Console.BackgroundColor = ConsoleColor.Black; };
                    client.Client.RtcpPacketReceieved += (sender, rtcpPacket) => { Console.WriteLine("Got a RTCP packet Channel= " + rtcpPacket.Channel + " Type=" + rtcpPacket.PacketType + " Length=" + rtcpPacket.Length + " Bytes = " + BitConverter.ToString(rtcpPacket.Payload)); };
                    client.Client.RtcpPacketReceieved += (sender, rtcpPacket) => { Console.BackgroundColor = ConsoleColor.Green; Console.WriteLine("Sent a RTCP packet Channel= " + rtcpPacket.Channel + " Type=" + rtcpPacket.PacketType + " Length=" + rtcpPacket.Length + " Bytes = " + BitConverter.ToString(rtcpPacket.Payload)); Console.BackgroundColor = ConsoleColor.Black; };

                    Console.WriteLine("Waiting for packets... Press Q to exit");

                    //Ensure we recieve a bunch of packets before we say the test is good
                    while (Console.ReadKey().Key != ConsoleKey.Q) { }

                    try
                    {
                        //Send a few requests just because
                        var one = client.SendOptions();
                        var two = client.SendOptions();
                        Console.BackgroundColor = ConsoleColor.Green;
                        Console.WriteLine("Sending Options Success");
                        Console.WriteLine(string.Join(" ", one.GetHeaders()));
                        Console.WriteLine(string.Join(" ", two.GetHeaders()));
                        Console.BackgroundColor = ConsoleColor.Black;

                        //Print information before disconnecting
                        Console.BackgroundColor = ConsoleColor.Green;
                        Console.WriteLine("RtcpBytes Sent: " + client.Client.TotalRtcpBytesSent);
                        Console.WriteLine("Rtcp Packets Sent: " + client.Client.TotalRtcpPacketsSent);
                        Console.WriteLine("RtcpBytes Recieved: " + client.Client.TotalRtcpBytesReceieved);
                        Console.WriteLine("Rtcp Packets Recieved: " + client.Client.TotalRtcpPacketsReceieved);
                        Console.WriteLine("Rtp Packets Recieved: " + client.Client.TotalRtpPacketsReceieved);
                        Console.BackgroundColor = ConsoleColor.Black;
                    }
                    catch
                    {
                        Console.BackgroundColor = ConsoleColor.Red;
                        Console.WriteLine("Sending Options Failed");
                        Console.BackgroundColor = ConsoleColor.Black;
                    }

                    //All done with the client
                    client.StopListening();
                }

                //All done
                Console.WriteLine("Exiting RtspClient Test");

                //Perform another test if we need to
                if (client.Location.ToString() != "rtsp://fms.zulu.mk/zulu/a2_1")
                {
                    //Do another test
                    Console.WriteLine("Press a Key to Start Test #2 (Q to Skip)");
                    if (System.Console.ReadKey().Key != ConsoleKey.Q)
                    {

                        //Try another host (this one uses Tcp and forces the client to switch from Udp because Udp packets usually never arrive)
                        //We will not specify Tcp we will allow the client to switch over automatically
                        client = new Rtsp.RtspClient("rtsp://fms.zulu.mk/zulu/a2_1");
                        //Switch in 5 seconds rather than the default of 10
                        client.ProtocolSwitchSeconds = 5;
                        Console.WriteLine("Performing 2nd Client test");
                        goto StartTest;
                    }
                }

            }
        } 
```

所以我们可以使用

```
 if (client.Connected && client.Client != null) 
```

最后，我们必须将所有这些东西结合在一起，仅此而已。

享受！！！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:30:09.547

我相信您正在寻找 FileWebRequest 类，尝试下载几个字节的流应该告诉您它们是否处于活动状态。我不认为这个类只是http，但添加对其他协议的支持应该是微不足道的。[http://msdn.microsoft.com/en-us/library/239dwksc.aspx](http://msdn.microsoft.com/en-us/library/239dwksc.aspx)

**更新评论**

好吧，您可以更深入地使用 TcpClient 类，而无需做太多工作，它可以告诉您服务器是否至少在侦听 http、rtsp 和 mms 端口。 [http://msdn.microsoft.com/en-us/library/aa329754(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa329754(v=vs.71).aspx)

# php - PHP GD 库，Symfony 中图像的路径

> ID：14876298
> 
> 赞同：0
> 
> 时间：2013-02-14T13:50:02.157
> 
> 标签：php, symfony, gd

我在 Surgery/PatientBundle/Controller/RegistrationPatientBundleController 和 Surgery/PatientBundle/Resources/public/images/test.jpg 中有控制器，我有一张图片。该图像的路径如何？我在我的控制器中尝试了这段代码

```
public testAction(){

     header ( 'Content-Type: image/jpeg' );
     $image = imagecreatefromjpeg("../Resources/public/images/test.jpg");
     imagejpeg($image); 
```

但是找不到文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:56:19.097

尝试 ：

```
$image => imagecreatefromjpeg(__DIR__.'/../Resources/public/images/test.jpg'); 
```

# javascript - JavaScript：将长按事件转换为右键单击事件

> ID：14876301
> 
> 赞同：4
> 
> 时间：2013-02-14T13:50:13.597
> 
> 标签：javascript, jquery, events, touch

如何自动将长按事件转换为右键单击事件？由于许多触摸设备（如 iPad）不提供在网站上进行右键单击的方法，这将非常方便，因为不需要调整网站的代码。

例如，此代码是为具有鼠标支持的桌面浏览器设计的：

```
<html>
    <head><title>Long tap to right click test</title></head>
    <body>
        <img src="dummy.png" oncontextmenu="alert('Hi!'); return false;" width="20" height="20" />
    </body>
</html> 
```

目标是在不修改代码的情况下将长按事件转换为右键单击事件。（当然，只是加载一些 JavaScript。）

如果已经看到[https://github.com/furf/jquery-ui-touch-punch/](https://github.com/furf/jquery-ui-touch-punch/)对 jQuery 小部件的拖放支持做了类似的事情。但是这个插件不支持长按。

此外[http://code.google.com/p/jquery-ui-for-ipad-and-iphone/](http://code.google.com/p/jquery-ui-for-ipad-and-iphone/)确实执行了所需的翻译，但它会阻止滚动，因此对于需要滚动支持的常规网站来说毫无用处。

任何帮助表示赞赏 - 谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T14:13:04.037

您可以编写简单的插件来处理此类事件。让我们称之为 longTap 事件。例子：

```
$.fn.longTap = function(options) {

    options = $.extend({
        delay: 1000,
        onRelease: null
    }, options);

    var eventType = {
        mousedown: 'ontouchstart' in window ? 'touchstart' : 'mousedown',
        mouseup: 'ontouchend' in window ? 'touchend' : 'mouseup'
    };

    return this.each(function() {
        $(this).on(eventType.mousedown + '.longtap', function() {
            $(this).data('touchstart', +new Date);
        })
        .on(eventType.mouseup + '.longtap', function(e) {
            var now = +new Date,
                than = $(this).data('touchstart');
            now - than >= options.delay && options.onRelease && options.onRelease.call(this, e);
        });
    });
}; 
```

显然，您想更改`mousedown`并更改`mouseup`为iPad`touchstart`的`touchend`情况。

用法：http: [//jsfiddle.net/dfsq/RZgxT/1/](http://jsfiddle.net/dfsq/RZgxT/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:04:35.890

您可以为此使用超时：

```
var timeoutLongTouch;
var $mydiv = $j('#myDiv');

// Listen to mousedown event
$mydiv.on('mousedown.LongTouch', function () {
    timeoutLongTouch = setTimeout(function () {
        $mydiv.trigger('contextmenu');
    }, 1000);
})
// Listen to mouseup event
.on('mouseup.LongTouch', function () {
    // Prevent long touch 
    clearTimeout(timeoutLongTouch);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-09T11:50:38.917

所有解决方案均不适用于桌面浏览器。您还应该调整 'click' 处理程序的行为，因为所有 'longtap' 事件也应该跟随 'click' 事件。

在这种情况下，代码如下：

```
itemEl.click(function(event){

    if ($(this).data('itemlongtouch')){
        $(this).data('itemlongtouch', false);
    }else{
        //some work
    }
});

itemEl.longTap(function(event){
    $(this).data('itemlongtouch', true);
    //some work
}); 
```

# ruby-on-rails - 如何从 Spree 的结帐流程中删除注册的第一步？

> ID：14876302
> 
> 赞同：3
> 
> 时间：2013-02-14T13:50:14.067
> 
> 标签：ruby-on-rails, checkout, spree

我想从结帐过程中删除注册步骤。我在网上搜索并得到了一些线索，但我没有得到，我到底需要做什么。：

在 github 上的狂欢指南中，我读过这个......

默认结帐步骤

Spree 结账流程包括以下步骤（除了 Registration 步骤，每个步骤都对应 Spree::Order 对象的一个​​状态）：

**注册（可选 - 仅当使用 spree_auth_devise 扩展时，可以通过配置设置切换）**

地址信息

交货选项（运输方式）

支付

确认

这个怎么改，求大神帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-15T05:46:47.377

我已经解决了。

我们可以通过更改**app/config/initializers/spree.rb来跳过它**

```
Spree::Auth::Config[:registration_step] = false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T12:58:16.780

您问“我想从结帐过程中删除注册步骤”

因此，只需从您的 Gemfile 中删除“spree_auth_devise”gem，然后运行捆绑安装。现在在结帐过程之前将没有注册步骤。

# java - SVG 图像改变颜色

> ID：14876304
> 
> 赞同：0
> 
> 时间：2013-02-14T13:50:20.423
> 
> 标签：java, svg

我是 SVG 新手，我需要制作一个 SVG，在 1 秒内将其颜色从白色变为红色，然后再保持红色 2 秒。我知道如何在 1 秒内更改颜色，但在重新启动之前我找不到任何方法来设置红色。

这是我的形象。

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
  <!-- The icon can be used freely in both personal and commercial projects with no attribution       required, but always appreciated. 
  You may NOT sub-license, resell, rent, redistribute or otherwise transfer the icon without express written permission from iconmonstr.com -->

<svg
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:cc="http://creativecommons.org/ns#"
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:svg="http://www.w3.org/2000/svg"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
  xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
  version="1.1"
  x="0px"
  y="0px"
  width="512px"
  height="512px"
  viewBox="0 0 512 512"
  enable-background="new 0 0 512 512"
  xml:space="preserve"
  id="svg2"
  inkscape:version="0.48.4 r9939"
  sodipodi:docname="alarm_animate.svg"><metadata
  id="metadata10"><rdf:RDF><cc:Work
   rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
     rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs
  id="defs8" /><sodipodi:namedview
  pagecolor="#ffffff"
  bordercolor="#666666"
  borderopacity="1"
  objecttolerance="10"
  gridtolerance="10"
  guidetolerance="10"
  inkscape:pageopacity="0"
  inkscape:pageshadow="2"
  inkscape:window-width="1920"
  inkscape:window-height="1024"
  id="namedview6"
  showgrid="false"
  inkscape:zoom="1.84375"
  inkscape:cx="178.41033"
  inkscape:cy="264.79565"
  inkscape:window-x="-4"
  inkscape:window-y="-4"
  inkscape:window-maximized="1"
  inkscape:current-layer="svg2" />

  <animateColor
     id="a1"
     attributeName="fill"
     from="#FFFFFF"
     to="#FF0000"
     dur="1s"
     repeatCount="indefinite" />

  <path
     id="warning-6-icon"
     d="m 237.939,231.352 36.121,0 0,97.421 -36.121,0 z M 256,381.019 c -9.574,0 -19.334,-9.761       -19.334,-19.334 0,-9.574 9.76,-19.335 19.334,-19.335 9.573,0 19.334,9.761 19.334,19.335 0,9.573       -9.761,19.334 -19.334,19.334 z M 256,74.07 46,438.873 l 420,0 z m 0,88 132.718,230.803 -265.436,0 z"
     inkscape:connector-curvature="0"
     sodipodi:nodetypes="cccccssssscccccccc" />

  </svg> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:12:32.700

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
  <!-- The icon can be used freely in both personal and commercial projects with no attribution       required, but always appreciated. 
  You may NOT sub-license, resell, rent, redistribute or otherwise transfer the icon without express written permission from iconmonstr.com -->

<svg
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:cc="http://creativecommons.org/ns#"
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:svg="http://www.w3.org/2000/svg"
  xmlns="http://www.w3.org/2000/svg"
  xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
  xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
  version="1.1"
  x="0px"
  y="0px"
  width="512px"
  height="512px"
  viewBox="0 0 512 512"
  enable-background="new 0 0 512 512"
  xml:space="preserve"
  id="svg2"
  inkscape:version="0.48.4 r9939"
  sodipodi:docname="alarm_animate.svg"><metadata
  id="metadata10"><rdf:RDF><cc:Work
   rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
     rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs
  id="defs8" /><sodipodi:namedview
  pagecolor="#ffffff"
  bordercolor="#666666"
  borderopacity="1"
  objecttolerance="10"
  gridtolerance="10"
  guidetolerance="10"
  inkscape:pageopacity="0"
  inkscape:pageshadow="2"
  inkscape:window-width="1920"
  inkscape:window-height="1024"
  id="namedview6"
  showgrid="false"
  inkscape:zoom="1.84375"
  inkscape:cx="178.41033"
  inkscape:cy="264.79565"
  inkscape:window-x="-4"
  inkscape:window-y="-4"
  inkscape:window-maximized="1"
  inkscape:current-layer="svg2" />

  <animate
     id="a1"
     attributeName="fill"
     from="#FFFFFF"
     to="#FF0000"
     dur="1s"
     begin="0s; a2.end" />

  <animate
     id="a2"
     attributeName="fill"
     from="#FF0000"
     to="#FF0000"
     dur="2s"
     begin="a1.end"
     fill="freeze" />

  <path
     id="warning-6-icon"
     d="m 237.939,231.352 36.121,0 0,97.421 -36.121,0 z M 256,381.019 c -9.574,0 -19.334,-9.761       -19.334,-19.334 0,-9.574 9.76,-19.335 19.334,-19.335 

9.573,0 19.334,9.761 19.334,19.335 0,9.573       -9.761,19.334 -19.334,19.334 z M 256,74.07 46,438.873 l 420,0 z m 0,88 132.718,230.803 -265.436,0 z"
     inkscape:connector-curvature="0"
     sodipodi:nodetypes="cccccssssscccccccc" />

  </svg> 
```

# c# - 如何首先使用 EF 代码对混合实体的集合进行建模

> ID：14876306
> 
> 赞同：0
> 
> 时间：2013-02-14T13:50:23.450
> 
> 标签：c#, ef-code-first, entity-framework-5

我在 VS2010 中使用 EF5。我有两种类型的工作示例：人员，业务我想添加一个集合，例如

```
DbSet<Customer> Customers 
```

客户中的对象可以是个人或企业。在我的应用程序中，我希望能够执行以下操作：

```
mycontext.Customers.Add(new Person());
mycontext.Customers.Add(new Business()); 
```

我认为客户表可能看起来像

```
id (id of Person or Business)
discriminator 
```

如何通过代码先实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:54:47.273

创建具有 ID 属性的基类**客户**并从*客户派生***个人**和**业务**？

# java - Java：ProGuard 没有完全混淆堆栈跟踪

> ID：14876307
> 
> 赞同：3
> 
> 时间：2013-02-14T13:50:23.857
> 
> 标签：java, obfuscation, proguard

我目前正在学习如何使用 ProGuard。到目前为止我做得很好，我创建了一个小型测试应用程序，它打印“Hello”并进行异常堆栈跟踪。

但是，我找不到解决问题的方法：堆栈跟踪没有完全混淆。它看起来像这样：

```
 Java.lang.Exception: test
at newPack.test.main(SourceFile: 12) 
```

我应该在“ProGuard 4.8 gui”中检查什么选项才能混淆“at newPack.test.main”部分（括号内的部分看起来应该如此）？

我的 proguard 配置如下所示：

```
 -injars 'testProguard_fat.jar'
-outjars 'testProguard_fatO.jar'

-libraryjars 'C:\Program Files\Java\jre6\lib\rt.jar'

-dontskipnonpubliclibraryclassmembers
-overloadaggressively
-useuniqueclassmembernames
-keepattributes SourceFile,LineNumberTable
-renamesourcefileattribute SourceFile

# Keep - Applets. Keep all extensions of java.applet.Applet.
-keep public class * extends java.applet.Applet

# Also keep - Enumerations. Keep the special static methods that are required in
# enumeration classes.
-keepclassmembers enum  * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

# Also keep - Database drivers. Keep all implementations of java.sql.Driver.
-keep class * extends java.sql.Driver

# Also keep - Swing UI L&F. Keep all extensions of javax.swing.plaf.ComponentUI,
# along with the special 'createUI' method.
-keep class * extends javax.swing.plaf.ComponentUI {
    public static javax.swing.plaf.ComponentUI createUI(javax.swing.JComponent);
}

# Keep names - Native method names. Keep all native class/method names.
-keepclasseswithmembers,allowshrinking class * {
    native <methods>;
}

# Remove - System method calls. Remove all invocations of System
# methods without side effects whose return values are not used.
-assumenosideeffects public class java.lang.System {
    public static long currentTimeMillis();
    static java.lang.Class getCallerClass();
    public static int identityHashCode(java.lang.Object);
    public static java.lang.SecurityManager getSecurityManager();
    public static java.util.Properties getProperties();
    public static java.lang.String getProperty(java.lang.String);
    public static java.lang.String getenv(java.lang.String);
    public static java.lang.String mapLibraryName(java.lang.String);
    public static java.lang.String getProperty(java.lang.String,java.lang.String);
}

# Remove - Math method calls. Remove all invocations of Math
# methods without side effects whose return values are not used.
-assumenosideeffects public class java.lang.Math {
    public static double sin(double);
    public static double cos(double);
    public static double tan(double);
    public static double asin(double);
    public static double acos(double);
    public static double atan(double);
    public static double toRadians(double);
    public static double toDegrees(double);
    public static double exp(double);
    public static double log(double);
    public static double log10(double);
    public static double sqrt(double);
    public static double cbrt(double);
    public static double IEEEremainder(double,double);
    public static double ceil(double);
    public static double floor(double);
    public static double rint(double);
    public static double atan2(double,double);
    public static double pow(double,double);
    public static int round(float);
    public static long round(double);
    public static double random();
    public static int abs(int);
    public static long abs(long);
    public static float abs(float);
    public static double abs(double);
    public static int max(int,int);
    public static long max(long,long);
    public static float max(float,float);
    public static double max(double,double);
    public static int min(int,int);
    public static long min(long,long);
    public static float min(float,float);
    public static double min(double,double);
    public static double ulp(double);
    public static float ulp(float);
    public static double signum(double);
    public static float signum(float);
    public static double sinh(double);
    public static double cosh(double);
    public static double tanh(double);
    public static double hypot(double,double);
    public static double expm1(double);
    public static double log1p(double);
}

# Remove - Number method calls. Remove all invocations of Number
# methods without side effects whose return values are not used.
-assumenosideeffects public class java.lang.* extends java.lang.Number {
    public static java.lang.String toString(byte);
    public static java.lang.Byte valueOf(byte);
    public static byte parseByte(java.lang.String);
    public static byte parseByte(java.lang.String,int);
    public static java.lang.Byte valueOf(java.lang.String,int);
    public static java.lang.Byte valueOf(java.lang.String);
    public static java.lang.Byte decode(java.lang.String);
    public int compareTo(java.lang.Byte);
    public static java.lang.String toString(short);
    public static short parseShort(java.lang.String);
    public static short parseShort(java.lang.String,int);
    public static java.lang.Short valueOf(java.lang.String,int);
    public static java.lang.Short valueOf(java.lang.String);
    public static java.lang.Short valueOf(short);
    public static java.lang.Short decode(java.lang.String);
    public static short reverseBytes(short);
    public int compareTo(java.lang.Short);
    public static java.lang.String toString(int,int);
    public static java.lang.String toHexString(int);
    public static java.lang.String toOctalString(int);
    public static java.lang.String toBinaryString(int);
    public static java.lang.String toString(int);
    public static int parseInt(java.lang.String,int);
    public static int parseInt(java.lang.String);
    public static java.lang.Integer valueOf(java.lang.String,int);
    public static java.lang.Integer valueOf(java.lang.String);
    public static java.lang.Integer valueOf(int);
    public static java.lang.Integer getInteger(java.lang.String);
    public static java.lang.Integer getInteger(java.lang.String,int);
    public static java.lang.Integer getInteger(java.lang.String,java.lang.Integer);
    public static java.lang.Integer decode(java.lang.String);
    public static int highestOneBit(int);
    public static int lowestOneBit(int);
    public static int numberOfLeadingZeros(int);
    public static int numberOfTrailingZeros(int);
    public static int bitCount(int);
    public static int rotateLeft(int,int);
    public static int rotateRight(int,int);
    public static int reverse(int);
    public static int signum(int);
    public static int reverseBytes(int);
    public int compareTo(java.lang.Integer);
    public static java.lang.String toString(long,int);
    public static java.lang.String toHexString(long);
    public static java.lang.String toOctalString(long);
    public static java.lang.String toBinaryString(long);
    public static java.lang.String toString(long);
    public static long parseLong(java.lang.String,int);
    public static long parseLong(java.lang.String);
    public static java.lang.Long valueOf(java.lang.String,int);
    public static java.lang.Long valueOf(java.lang.String);
    public static java.lang.Long valueOf(long);
    public static java.lang.Long decode(java.lang.String);
    public static java.lang.Long getLong(java.lang.String);
    public static java.lang.Long getLong(java.lang.String,long);
    public static java.lang.Long getLong(java.lang.String,java.lang.Long);
    public static long highestOneBit(long);
    public static long lowestOneBit(long);
    public static int numberOfLeadingZeros(long);
    public static int numberOfTrailingZeros(long);
    public static int bitCount(long);
    public static long rotateLeft(long,int);
    public static long rotateRight(long,int);
    public static long reverse(long);
    public static int signum(long);
    public static long reverseBytes(long);
    public int compareTo(java.lang.Long);
    public static java.lang.String toString(float);
    public static java.lang.String toHexString(float);
    public static java.lang.Float valueOf(java.lang.String);
    public static java.lang.Float valueOf(float);
    public static float parseFloat(java.lang.String);
    public static boolean isNaN(float);
    public static boolean isInfinite(float);
    public static int floatToIntBits(float);
    public static int floatToRawIntBits(float);
    public static float intBitsToFloat(int);
    public static int compare(float,float);
    public boolean isNaN();
    public boolean isInfinite();
    public int compareTo(java.lang.Float);
    public static java.lang.String toString(double);
    public static java.lang.String toHexString(double);
    public static java.lang.Double valueOf(java.lang.String);
    public static java.lang.Double valueOf(double);
    public static double parseDouble(java.lang.String);
    public static boolean isNaN(double);
    public static boolean isInfinite(double);
    public static long doubleToLongBits(double);
    public static long doubleToRawLongBits(double);
    public static double longBitsToDouble(long);
    public static int compare(double,double);
    public boolean isNaN();
    public boolean isInfinite();
    public int compareTo(java.lang.Double);
    public <init>(byte);
    public <init>(short);
    public <init>(int);
    public <init>(long);
    public <init>(float);
    public <init>(double);
    public <init>(java.lang.String);
    public byte byteValue();
    public short shortValue();
    public int intValue();
    public long longValue();
    public float floatValue();
    public double doubleValue();
    public int compareTo(java.lang.Object);
    public boolean equals(java.lang.Object);
    public int hashCode();
    public java.lang.String toString();
}

# Remove - String method calls. Remove all invocations of String
# methods without side effects whose return values are not used.
-assumenosideeffects public class java.lang.String {
    public <init>();
    public <init>(byte[]);
    public <init>(byte[],int);
    public <init>(byte[],int,int);
    public <init>(byte[],int,int,int);
    public <init>(byte[],int,int,java.lang.String);
    public <init>(byte[],java.lang.String);
    public <init>(char[]);
    public <init>(char[],int,int);
    public <init>(java.lang.String);
    public <init>(java.lang.StringBuffer);
    public static java.lang.String copyValueOf(char[]);
    public static java.lang.String copyValueOf(char[],int,int);
    public static java.lang.String valueOf(boolean);
    public static java.lang.String valueOf(char);
    public static java.lang.String valueOf(char[]);
    public static java.lang.String valueOf(char[],int,int);
    public static java.lang.String valueOf(double);
    public static java.lang.String valueOf(float);
    public static java.lang.String valueOf(int);
    public static java.lang.String valueOf(java.lang.Object);
    public static java.lang.String valueOf(long);
    public boolean contentEquals(java.lang.StringBuffer);
    public boolean endsWith(java.lang.String);
    public boolean equalsIgnoreCase(java.lang.String);
    public boolean equals(java.lang.Object);
    public boolean matches(java.lang.String);
    public boolean regionMatches(boolean,int,java.lang.String,int,int);
    public boolean regionMatches(int,java.lang.String,int,int);
    public boolean startsWith(java.lang.String);
    public boolean startsWith(java.lang.String,int);
    public byte[] getBytes();
    public byte[] getBytes(java.lang.String);
    public char charAt(int);
    public char[] toCharArray();
    public int compareToIgnoreCase(java.lang.String);
    public int compareTo(java.lang.Object);
    public int compareTo(java.lang.String);
    public int hashCode();
    public int indexOf(int);
    public int indexOf(int,int);
    public int indexOf(java.lang.String);
    public int indexOf(java.lang.String,int);
    public int lastIndexOf(int);
    public int lastIndexOf(int,int);
    public int lastIndexOf(java.lang.String);
    public int lastIndexOf(java.lang.String,int);
    public int length();
    public java.lang.CharSequence subSequence(int,int);
    public java.lang.String concat(java.lang.String);
    public java.lang.String replaceAll(java.lang.String,java.lang.String);
    public java.lang.String replace(char,char);
    public java.lang.String replaceFirst(java.lang.String,java.lang.String);
    public java.lang.String[] split(java.lang.String);
    public java.lang.String[] split(java.lang.String,int);
    public java.lang.String substring(int);
    public java.lang.String substring(int,int);
    public java.lang.String toLowerCase();
    public java.lang.String toLowerCase(java.util.Locale);
    public java.lang.String toString();
    public java.lang.String toUpperCase();
    public java.lang.String toUpperCase(java.util.Locale);
    public java.lang.String trim();
}

# Remove - StringBuffer method calls. Remove all invocations of StringBuffer
# methods without side effects whose return values are not used.
-assumenosideeffects public class java.lang.StringBuffer {
    public <init>();
    public <init>(int);
    public <init>(java.lang.String);
    public <init>(java.lang.CharSequence);
    public java.lang.String toString();
    public char charAt(int);
    public int capacity();
    public int codePointAt(int);
    public int codePointBefore(int);
    public int indexOf(java.lang.String,int);
    public int lastIndexOf(java.lang.String);
    public int lastIndexOf(java.lang.String,int);
    public int length();
    public java.lang.String substring(int);
    public java.lang.String substring(int,int);
}

# Remove - StringBuilder method calls. Remove all invocations of StringBuilder
# methods without side effects whose return values are not used.
-assumenosideeffects public class java.lang.StringBuilder {
    public <init>();
    public <init>(int);
    public <init>(java.lang.String);
    public <init>(java.lang.CharSequence);
    public java.lang.String toString();
    public char charAt(int);
    public int capacity();
    public int codePointAt(int);
    public int codePointBefore(int);
    public int indexOf(java.lang.String,int);
    public int lastIndexOf(java.lang.String);
    public int lastIndexOf(java.lang.String,int);
    public int length();
    public java.lang.String substring(int);
    public java.lang.String substring(int,int);
} 
```

# ember.js - 如何手动创建控制器并附加 ember 视图？

> ID：14876308
> 
> 赞同：1
> 
> 时间：2013-02-14T13:50:26.963
> 
> 标签：ember.js

我试图通过阅读源代码和单元测试各种组件来了解更多关于 ember 的核心。目前，我正在尝试连接一个简单的视图/控制器/模板组合，以查看是否可以针对使用给定模型和模板呈现的视图（实际 html 输出）进行断言。

我的第一个有效测试看起来像这样

```
it ("template will render given output", function(){
    var view = Ember.View.create({
        template: Ember.Handlebars.compile('bar')
    });
    Ember.run(function() {
        view.appendTo("#body");
    });
    expect(Ember.$.trim(view.$().text())).toEqual("bar");
  }); 
```

但这不是用模型或控制器做任何动态的事情。我的下一次尝试目前失败了，因为我似乎无法在视图中连接（连接到给定的控制器）。

```
 it ("model property is output when view bound", function(){
    var speaker = CodeCamp.Speaker.createRecord({id: 1, name: 'foobar'});
    var view = Ember.View.create({
        template: Ember.Handlebars.compile('{{#each foo in controller}}{{foo.name}}{{/each}}')
    });
    var controller = Ember.ArrayController.create({                                                                                    
        content: []
    });
    get(controller, 'content').push(speaker);
    var x = get(controller, 'content');
    var len = get(get(controller, 'content'), 'length');
    expect(len).toEqual(1);
    set(controller, 'view', view);
    Ember.run(function() {
        view.appendTo("#body");
    });
    expect(Ember.$.trim(view.$().text())).toEqual("foobar");
}); 
```

但就目前而言，断言失败了

> 预期 '' 等于 'foobar'。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:11:17.367

这是由这一行引起的：

```
set(controller, 'view', view); 
```

它一定要是：

```
set(view, 'controller', controller); 
```

**摘要：**视图必须知道它的控制器。在您的情况下，视图没有查找属性的上下文，因此不起作用。你不小心弄反了。

**注意：**这适用于 Ember-pre4。我成功地测试了这个修复程序。（我相信查看设置的方法最近发生了变化）

# javascript - 如何在 Ember.js 中正确加载分页路径？

> ID：14876313
> 
> 赞同：4
> 
> 时间：2013-02-14T13:50:49.670
> 
> 标签：javascript, ember.js, handlebars.js, ember-router

我有一条`#/posts`用于显示帖子第一页的帖子的路线，以及一条`#/posts/:page_id`显示您请求的任何页面的分页路线。我的路由器是这样的：

```
App.Router.map(function(match) {
  //...
  this.route('posts');
  this.resource('postsPage', { path: '/posts/:page_id' });
}); 
```

这些路线看起来像这样：

```
App.PostsRoute = Em.Route.extend({
  model: function(params) {
    return App.store.find(App.Post, { 'page': params.page_id });
  }
});

App.PostsPageRoute = Em.Route.extend({
  renderTemplate: function() {
    this.render('posts');
  },
  model: function(params) {
    return App.store.find(App.Post, { 'page': params.page_id });
  }
}); 
```

在我实施它大约一个月后，它工作得很好，但它最近停止了对`#/posts`路线以外的任何东西的工作。即使我的 REST API 返回正确的 JSON，页面也不会加载。

Fiddle [here](http://jsfiddle.net/davissorenson/tkPxX/)
`#/posts` route [here](http://jsfiddle.net/davissorenson/tkPxX/show/#/posts)
`#/posts/1` route [here](http://jsfiddle.net/davissorenson/tkPxX/show/#/posts/1)（请注意，即使发送了 JSON，它也不会加载内容）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:17:46.533

默认情况下，postsPageRoute 将设置 postsPage 控制器。您需要告诉它设置帖子控制器。

```
App.PostsPageRoute = Em.Route.extend({
  setupController: function(controller, model) {
    this.controllerFor('posts').set('content', model)
  },
  renderTemplate: function() {
    this.render('posts');
  },
  model: function(params) {
    return App.store.find(App.Post, { 'page': params.page_id });
  }
}); 
```

# python - 如何在python中检查字符串是否为空

> ID：14876316
> 
> 赞同：19
> 
> 时间：2013-02-14T13:51:03.313
> 
> 标签：python, string, null

我有一个使用 Python 从 POST 调用返回的值 cookie。
我需要检查该`cookie`值是空还是空。因此，我需要一个 if 条件的函数或表达式。我怎样才能在 Python 中做到这一点？例如：

```
if cookie == NULL

if cookie == None 
```

PS`cookie`是存储值的变量。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-14T14:00:38.030

试试这个：

```
if cookie and not cookie.isspace():
    # the string is non-empty
else:
    # the string is empty 
```

以上考虑了字符串是`None`或一系列空格的情况。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T14:00:39.803

在python中，`bool(sequence)`如果`False`序列为空。由于字符串是序列，这将起作用：

```
cookie = ''
if cookie:
    print "Don't see this"
else:
    print "You'll see this" 
```

# scheduler - 计划的定期 Crystal Reports 延迟运行

> ID：14876317
> 
> 赞同：0
> 
> 时间：2013-02-14T13:51:03.377
> 
> 标签：scheduler, crystal-reports-2008, business-objects

突然间，所有计划的报告都会延迟一小时运行。这和夏令时有关系吗？环境为：Crystal Report Server 2008、Tomcat 和 Business Objects Enterprise 12.0

细节：这开始发生在上周末，当时巴西的夏令时应该结束。服务器错误地调整了夏令时结束的时间。（这里的夏令时日期不是默认的（例如：从 10 月的第三个星期六开始，到 2 月的第二个星期六结束）。由于政治原因，每年都会发生变化）。

无论如何，我们再次将时区设置为夏令时（实际上将在 2 月 17 日结束 - 本周末）。重新启动服务器，但在 Crystal Management Console 上，所有报告都错误地安排了 +1 小时。（例如：如果报告应该在下午 12:00 交付，那么它在下午 1:00 执行）

有没有人遇到过这个问题？我在网络研究中没有发现任何与我的问题相关的内容；这个问题有解决方法吗？应该进行任何时区配置（在哪里？）？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:40:48.283

时区结束后，调度报告再次在正确的时间运行。Crystal Server 调整时间有延迟，因为只有在服务器空闲时才会这样做。

# jgit - JGit fetch() 不更新标签

> ID：14876321
> 
> 赞同：1
> 
> 时间：2013-02-14T13:51:12.900
> 
> 标签：jgit

我的远程存储库将标签移至新提交。我跑：

```
git.fetch().setTagOpt(TagOpt.FETCH_TAGS)
   .setRemote("remoteURL")
   .setRefSpecs(new RefSpec("+refs/heads/*:refs/remotes/origin/*"))
   .call(); 
```

`FetchResult`包括`REJECTED`更新。等效的 cli`git -t ...`不会以这种方式运行。

不想争论 cli 与 JGit，但想知道如何获取更新标签？

似乎我必须接受`org.eclipse.jgit.storage.file.RefUpdate`，`force=true`但不知道如何......并且不想复制所有 FetchProcess 代码:'(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:17:21.420

这是在 JGit 3.0 中修复的已知问题，请参阅[错误 388095](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388095)。

至于适用于早期版本的解决方案，为标签添加显式 refspec 有助于：

```
+refs/tags/*:refs/tags/* 
```

# c# - 将 ADO.NET 与设计模式结合使用的最佳实践？

> ID：14876326
> 
> 赞同：0
> 
> 时间：2013-02-14T13:51:27.117
> 
> 标签：c#, ado.net

我有类似的东西

```
...
public DataTable GetList()
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();      
        // select from table 
    }
}

public void Insert()
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();      
        // Insert into table
    }
}

... 
```

有没有办法将连接字符串定义为全局变量，并在操作后处理它？

```
// connection open

...

public DataTable GetList()
{
    // use global connection
}

public void Insert()
{
    // use global connection
}

...

// connection close 
```

我怎样才能做到这一点？我可以使用哪种设计模式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:08:04.737

这是可能的

```
 public class MyClass:IDisposable
{
    SqlConnection myCon;

    public MyClass() 
    {
        myCon = new SqlConnection(connectionString);
    }

    public DataTable GetList()
    {
        // use global connection
    }

    public void Insert()
    {
        // use global connection
    }

    public void Dispose()
    {
        myCon.Close();
    }
} 
```

使用：

```
 using (MyClass myclass = new MyClass())
        {
           DataTable dt = myclass.GetList();
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T13:56:40.217

好吧，由于您使用的是 SQL Server，因此保持连接处于打开状态并不是一种好的做法。

ADO.Net 提供了一个称为 ConnectionPooling 的功能。打开连接后，它将检查池。如果可以找到具有相同连接字符串的现有连接，则将其从池中返回，因此设置时间*非常*短。

当您关闭连接时，它会返回到池中。

这非常有效，并且可以非常快速地连接到数据库。

编辑

这是有关该主题的 MSDN 文章。[http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)

# c# - 范围不适用于开关盒，需要很好的替代品

> ID：14876328
> 
> 赞同：1
> 
> 时间：2013-02-14T13:51:35.700
> 
> 标签：c#, switch-statement, range

我正在尝试为我正在制作的基于文本的 RPG 创建一个调平系统。我遇到的问题是范围似乎不适用于开关盒。这是我所拥有的：

```
int exp = 0, level = 1, hp = 10, hpmax = 10;

if (exp >= 262144) exp = 262144;

switch (exp)            
{
case (4 - 15):
    level = 2;
    hp = 12;
    hpmax = 12;
    break;

case (16 - 63):
    level = 3;
    hp = 14;
    hpmax = 14;
    break;

case (64 - 255):
    level = 4;
    hp = 16;
    hpmax = 16;
    break;

case (256 - 1023):
    level = 5;
    hp = 18;
    hpmax = 18;
    break;

case (1024 - 4095):
    level = 6;
    hp = 20;
    hpmax = 20;
    break;

case (4096 - 16383):
    level = 7;
    hp = 20;
    hpmax = 20;
    break;

case (16384 - 65535):
    level = 8;
    hp = 22;
    hpmax = 22;
    break;

case (65536 - 262143):
    level = 9;
    hp = 24;
    hpmax = 24;
    break;

case (262144 - 999999999):
    level = 10;
    hp = 26;
    hpmax = 26;
    break; 
```

是的，我意识到这并没有达到我想要的效果。我对找到的替代方案不太满意。我正在寻找最简单的解决方案。我是编程新手，因此将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:59:29.280

注意如果`hpmax`总是 = `hp`，你可以在最后设置它，你不需要在所有的`case`s 中都有它。

**使用 if-else：**

```
if (4 <= exp && exp <= 15)
{
  level = 2;
  hp = 12;
}
else if (16 <= exp && exp <= 63)
{
  level = 3;
  hp = 14;
}
else if ...

hpmax = hp; // set hpmax afterwards 
```

**简化上述内容：**

```
if (exp < 4) // 0-3
  ; // do nothing
else if (exp < 16) // 4-15
  ...
else if (exp < 64) // 16-63
  ... 
```

**或者用函数简化：（**类似于 utnapistim 的建议）

```
bool in(int exp, int start, int end) { return start <= exp && exp <= end; };

if (in(exp, 4, 15)) // 4-15
  ...
else if (in(exp, 16, 63)) // 16-63
  ... 
```

**使用 log-base-2：**

```
switch((int)(Math.Log(exp)/Math.Log(2)))
{
  case 2: case 3: // 4-15
    level = 2;
    hp = 12;
    break;
  case 4: case 5: // 16-63
    ...
  default: // 262144-999999999
    ...
}
hpmax = hp; 
```

**数学（更短的）解决方案：（**不适用于所有情况，只是从中得出解决方案的东西）

```
int log = (int)(Math.Log(exp)/Math.Log(2));
level = 1+log/2;
hp = hpmax = 10+level*2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:53:17.393

这就是我最终使用的：

静态无效级别系统（）

```
 {
        if ((4 <= exp) && (exp <= 15))
        {
            level = 2;
            hpmax = 12;
        }

        else if ((16 <= exp) && (exp <= 63))
        {
            level = 3;
            hpmax = 14;
        }

        else if ((64 <= exp) && (exp <= 255))
        {
            level = 4;
            hpmax = 16;
        }

        else if ((256 <= exp) && (exp <= 1023))
        {
            level = 5;
            hpmax = 18;
        }

        else if ((1024 <= exp) && (exp <= 4095))
        {
            level = 6;
            hpmax = 20;
        }

        else if ((4096 <= exp) && (exp <= 16383))
        {
            level = 7;
            hpmax = 20;
        }

        else if ((16384 <= exp) && (exp <= 65535))
        {
            level = 8;
            hpmax = 22;
        }

        else if ((65536 <= exp) && (exp <= 262143))
        {
            level = 9;
            hpmax = 24;
        }

        else if ((262144 <= exp) && (exp <= 999999998))
        {
            level = 10;
            hpmax = 26;
        }
        else if (exp >= 999999999)
        {
            exp = 999999999;
            level = 99;
            hp = 999999999;
            hpmax = 999999999;
        }
    } 
```

我为以后的测试目的做了这个荒谬的数字，但我把它全部放在一个方法中，这样我就可以在需要检查 exp 时调用它。我对此进行了测试，它完全按照我的意愿工作。

感谢大家的帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:02:44.563

我认为您应该使用定义数组和连续 if 的组合来找到字符的正确级别，我将向您展示一个具有随机（和更少）值的样本......

```
<?php
// Definition of experience needed per level, and hp given
$levelsData = array( 1 => array( "exp" => 0,
                                 "hp" => 10),
                     2 => array( "exp" => 4,
                                 "hp" => 12),
                     3 => array( "exp" => 15,
                                 "hp" => 16),
                     4 => array( "exp" => 27,
                                 "hp" => 34),
                     5 => array( "exp" => 500,
                                 "hp" => 120));

// Finding user level, giving $exp as current exp
foreach ($levelsData as $level => $data) {
    if ($exp < $data['exp']) {
        break;
    }
}

// Setting data, we already have $level as the actual level+1
$level--;
$data = $levelsData[$level];
$hp = $data['hp'];
$maxHp = $hp;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T14:00:42.630

您可能正在寻找 if-then-else 语句：

```
 int exp = 0, level = 1, hp = 10, hpmax = 10;

            if ((4 >= exp) && (exp <= 15)){
                level = 2;
                hp = 12;
                hpmax = 12;
            } elseif ((16 >= exp) && (exp <= 63)){
                level = 3;
                hp = 14;
                hpmax = 14;
            } elseif ((64 >= exp) && (exp <= 255)){
                level = 4;
                hp = 16;
                hpmax = 16;
            } elseif ((256 >= exp) && (exp <= 1023)){
                level = 5;
                hp = 18;
                hpmax = 18;
            } elseif ((256 >= exp) && (exp <= 1023)){

             .... etc, you know what do paste here, etc ....

            } elseif ((262144 >= exp) && (exp <= 999999999)){
                level = 10;
                hp = 26;
                hpmax = 26;
            } else {
                ... you probably don't need anything here ...
                ... you already set defaults in the init up top...
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T13:58:19.880

从概念上讲，您可以使用函数进行检查。

使用 C++ 的示例：

```
inline bool in_range(int min, int max, int value)
{ return min <= value && value <= max; }

// ....

        int exp = 0, level = 1, hp = 10, hpmax = 10;

        if (exp >= 262144) exp = 262144;

        if (in_range(0, 15, exp)) {
            level = 2;
            hp = 12;
            hpmax = 12;
        } else if (in_range(16, 63, exp)) {
            level = 3;
            hp = 14;
            hpmax = 14;
        } else if ... 
```

# asp.net - 以非常简单的方式重写 ASP.NET URL

> ID：14876329
> 
> 赞同：0
> 
> 时间：2013-02-14T13:51:38.303
> 
> 标签：asp.net, url-rewriting

我想知道如何为网页制作 SEF URL。经过一番谷歌搜索，我发现了许多技术，但所有技术都非常复杂。我不需要它们。有什么方法可以制作很容易实现的 SEF URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:51:38.303

首先下载[这个参考](http://www.urlrewriting.net/155/de/downloads.html)。

然后将其导入您的网站。

在`<configuration>`节点类型下：

```
<configSections>
    <section name="urlrewritingnet" requirePermission="false" type="UrlRewritingNet.Configuration.UrlRewriteSection, UrlRewritingNet.UrlRewriter"/>
</configSections> 
```

下一步是在`<system.web>`节点下键入以下代码：

下一个是将以下行放在`</configuration>`标记之前：

```
<urlrewritingnet configSource="RewriteRules.config"/> 
```

**我们快完成了！**

创建一个与标签的 configResource 参数匹配的新 .config 文件。我更喜欢“RewriteRules.config”。

然后是时候在 RewriteRules.config 文件上创建重写规则了：

```
<urlrewritingnet rewriteOnlyVirtualUrls="true" contextItemsPrefix="QueryString" defaultPage="Default.aspx" xmlns="http://www.urlrewriting.net/schemas/config/2006/07">
    <rewrites>
        <add name="DetailPageRule" virtualUrl="^~/VirtualDetailPageName/(.*)/(.*).aspx" rewriteUrlParameter="ExcludeFromClientQueryString" destinationUrl="~/RealDetailPage.aspx?param1=$1&amp;param2=$2" ignoreCase=" true"/>
    </rewrites>
</urlrewritingnet> 
```

如果您有更多或更少的参数，您可以更改 (. *) 的计数。这里只有两个参数（param1 和 param2），所以只有两个 (.* ) 字符串。

最后一步是根据您创建的规则提供链接。

它简单快捷。但我不知道是否有缺点或任何安全问题。

# c# - 将 Linq 返回到列表中的 SQL 关联对象

> ID：14876333
> 
> 赞同：1
> 
> 时间：2013-02-14T13:51:54.733
> 
> 标签：c#, linq-to-sql

我有以下 Linq to SQL 结构：我有“文章”和“用户”类。每篇文章都有一个卖家（即用户），每个用户都有许多文章。我通过协会解决了这个问题。

![在此处输入图像描述](../Images/cbd3f270ad440694feab54e995c00b69.png)

然后我有一个方法 Read()，它获取所有文章并在列表中返回它。

```
public static List<Article> Read()
    {
        using (DataContext dbx = new DataContext())
        {    
            return dbx.Article.ToList();
        }
    } 
```

所以，现在的问题是：当我在程序中的任何地方使用列表并且我想访问 article.Seller 时，我得到以下异常：

> 无法访问已处置的对象

好的，这似乎是合法的，因为我返回了列表，然后处理了 DataContext。如果我想访问卖方，它将从数据库中加载，并且不再使用已处置的 DataContext。

所以我通过延迟加载解决了这个问题，并将**DeferredLoadingEnabled**属性设置为 false。为了加载卖方，我使用了**DataLoadOptions**。

```
public static List<Article> Read()
    {
        using (DataContext dbx = new DataContext())
        {
            dbx.DeferredLoadingEnabled = false;
            DataLoadOptions options = new DataLoadOptions();
            options.LoadWith<Article>(a => a.Seller);
            dbx.LoadOptions = options;

            return dbx.Article.ToList();
        }
    } 
```

好的，到目前为止有效，但仅限于一个级别。现在我可以访问 article.Seller，但是如果我想获取该卖家的其他文章（article.Seller.Articles），我会得到 null。只需加载`options.LoadWith<User>(u => u.Articles);`我认为的卖方的文章，但这也是不可能的，因为它会无穷无尽。

文章 -> 卖家 -> 文章 -> 每篇文章一个卖家 -> 文章 -> 再次卖家 -> ...

我得到了例外

> LoadOptions LoadWith 类型图中不允许循环。

我想要的是一种获取所有具有正确关联对象的文章的方法，如我的第一个方法所示。关联对象应始终可访问，但仅在访问时从数据库加载。

如果我在程序中需要列表的任何地方都使用 DataContext，然后只在 DataContext 中使用列表，这将是可能的。但这将非常费力。

你们知道如何访问关联对象，而无需在我需要列表的程序的任何地方编写我的 Read() 方法的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:03:30.667

我过去也遇到过这种情况。`Dispose()`一般的做法是，如果要允许延迟加载，则不要调用。事实上，调用`Dispose()`并不是真正需要的。

有很多关于是否调用`Dispose()`DataContext 的文章。您必须对其进行筛选，但这里有一篇不错的[文章](http://leedumond.com/blog/about-disposing-the-datacontext/)。基本上，因为 DataContext 自己管理它的连接，所以它实际上没有任何需要显式处理的连接。

# javascript - 遍历输入元素并获取所有以 'value_' 开头的 id

> ID：14876340
> 
> 赞同：0
> 
> 时间：2013-02-14T13:52:25.567
> 
> 标签：javascript, javascript-events

```
var inputs = document.getElementsByTagName("input");

for (var i = 0; i < inputs.length; i++)
{
    if (document.getElementById("value_[0-9]"))
    {
        alert('found: ' + inputs[i].value);
    }
    else
    {
        alert(inputs[i].value);
    }
} 
```

我正在使用该条件仅获取以**value_开头的输入 ID**

```
if (document.getElementById("value_[0-9]")) 
```

但是当我的表单中有 5 个或更多 ID 时，一切都不是真的。即 value_1、value_2、value_3 等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T13:53:52.693

你为此使用了错误的方法。只需检查`id`列表中某个元素的属性：

```
for (var i = 0, len = inputs.length; i < len; i++) {
    if (inputs[i].id.indexOf("value_") === 0) {
        // alert("Found: " + inputs[i].value);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:55:36.740

```
[].map.call(document.getElementsByTagName( 'input' ), function( input ) {
    return input.id.indexOf( 'value_' ) === 0;
}).forEach(function( input ) {
    // do whatever here
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T13:56:42.470

结合使其成为[`document.querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)一个*数组*[`Array.prototype.slice`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice)

 *```
Array.prototype.slice.call(document.querySelectorAll('input[id^="value_"]')); 
```

从这里你可以做你最喜欢的循环，例如[`Array.prototype.forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)*

# php - 发生错误时如何防止 ob_start() 输出？

> ID：14876342
> 
> 赞同：0
> 
> 时间：2013-02-14T13:52:33.267
> 
> 标签：php, buffer

请考虑以下示例：

**模板.php：**

```
<?php

echo $vars['arr'];

echo " -------- ";

echo $vars['obj'];

?> 
```

**测试.php：**

```
<?php
$file = "template.php";
$vars = array( 'arr' => array(), 'obj' => new StdClass() );  

var_dump( json_encode($vars)  );  

function loadFile($file, $vars)
{
    try 
    {
        if (is_array($vars) && !empty($vars)) {
            extract($vars);
        }

        ob_start();
        include $file;
        return ob_get_clean();
    } 
    catch (Exception $e) 
    {
        return false;
    }
}

loadFile($file, $vars);

?> 
```

此代码将输出：

```
string(19) "{"arr":[],"obj":{}}"
PHP Catchable fatal error:  Object of class stdClass could not be converted to string in template.php 
```

这里的问题是，在 template.php 中，我认为 $vars 是一个 array() 但是其中 1 个元素是一个 Object，正如您从 json 输出中看到的那样。

在模板中添加一个简单的检查来验证 ekement 是否是一个数组可以解决问题，但是我需要这个到多个元素，元素，所以，不是很好 =) 所以，我试图找到一种方法防止在绑定模板和 $vars 时出错。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:03:28.250

解析时只需关闭 error_reporting：

```
$old_level = error_reporting(0); // no errors, preserve old error reporting level
ob_start();
include $file;
$content = ob_get_clean();
error_reporting($old_level); // reset error reporting level
return $content; 
```

**注意：**这只会*隐藏*不是很严重的错误。

为了捕获可捕获的**致命错误**，请参阅以下问题：[如何在 PHP 类型提示中捕获“可捕获的致命错误”？](https://stackoverflow.com/questions/2468487/how-can-i-catch-a-catchable-fatal-error-on-php-type-hinting)

[您需要使用set_error_handler](http://php.net/set_error_handler)注册错误处理程序：

```
function handleError($errno, $errstr, $errfile, $errline) {
  // handle error

  // return true, so the normal php handler doesn't get called
  return true;
}
set_error_handler('handleError'); 
```

如果您想将您的处理程序干净地集成到也设置 error_handlers 的其他代码中，您可以考虑使用[restore_error_handler恢复错误处理程序](http://php.net/restore_error_handler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:31:42.433

您可以尝试先检查值是否为对象，然后使用 PHP 函数转换为数组。

请注意，这部分代码：

```
if (is_array($vars) && !empty($vars)) {
    extract($vars);
} 
```

之后，如果我正确阅读了您的代码，您就有一个可能称为 $vars 的变量，它可能是一个对象。所以，你可以这样做：

```
if (is_object($vars)) {
    $vars = get_object_vars($vars);
} 
```

那应该将其转换为您需要的。当然，您可能需要进行一些试验以确保它适合您的场景。谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T20:18:16.457

您可以在类中使用 __toString() 方法来避免错误。您可以使用所需的任何值设置 __toString() 方法，也许返回一个数组。 [http://www.php.net/manual/en/language.oop5.magic.php#object.tostring](http://www.php.net/manual/en/language.oop5.magic.php#object.tostring)

另一种选择是使用 array_walk ：

```
function checkObj(&$vars){ 
if (is_object($vars)) {
    $vars = get_object_vars($vars);
}
} 
array_walk($vars, "checkObj"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T03:47:46.840

由于您使用的是 ob_start()，因此您可以向它传递一个回调来检查任何错误。它甚至可以处理致命错误。在你的回调中使用类似“error_get_last”的东西来检查任何错误，如果它不为空，则返回 false，如下所示：

警告：我没有测试过这段代码，但我自己使用了类似的东西。

```
<?php
    $file = "template.php";
    $vars = array( 'arr' => array(), 'obj' => new StdClass() );

    var_dump( json_encode($vars)  );

    function loadFile($file, $vars)
    {
        try
        {
            if (is_array($vars) && !empty($vars)) {
                extract($vars);
            }

            ob_start('errorHandler');
            include $file;
            return ob_get_clean();
        }
        catch (Exception $e)
        {
            return false;
        }
    }

    function errorHandler($pBuffer)
    {
        $lastError = error_get_last();
        // Uh-oh, an error has occurred.
        if ($lastError !== NULL)
        {
            return FALSE;
        }
        // No problems.
        return $pBuffer;
    }

    loadFile($file, $vars);

?> 
```

# pyqt4 - 用于像素绘图的最佳 PyQt/PySide 小部件？

> ID：14876344
> 
> 赞同：1
> 
> 时间：2013-02-14T13:52:39.740
> 
> 标签：pyqt4, pyside

我正在自学诸如 astar 算法之类的东西，并使用小型矩阵。为此，我希望有一种直接的方式将我发送到函数中的矩阵播种，并且我认为一个允许进行有限颜色逐像素绘制的小应用程序会很棒。

基本上是这样的：[http ://www.youtube.com/watch?v=19h1g22hby8](http://www.youtube.com/watch?v=19h1g22hby8)

作为像素本身和它们的画布，什么是一个好的小部件？我对 QPushButtons 之类的东西很满意，但我不习惯图形场景。这是要走的路吗？

我猜想有些东西有内置的方法来检测嘴何时悬停在上面，并且会快速改变颜色......但这让它看起来像一个带有扁平 QPushButtons 的巨大 QGridLayout 可能会起到作用，但它似乎方式不理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T12:26:12.153

带有底层[QGraphicsScene](http://doc.qt.digia.com/stable/qgraphicsscene.html)的[QGraphicsView](http://doc.qt.digia.com/stable/qgraphicsview.html)将是完美的。我将从向 QGraphicsScene 添加一大堆[QGraphicsRectItem](http://doc.qt.digia.com/stable/qgraphicsrectitem.html)实例开始。

Qt 已经完成了 QGraphicsRectItem 实例的绘制、移动和选择。[您可以通过覆盖mouseMoveEvent()](http://doc.qt.digia.com/stable/qgraphicsitem.html#mouseMoveEvent)和其他事件来捕获其他事件，或更改默认处理（例如禁用移动） 。

# c# - 使用 SendMessage 模拟鼠标点击

> ID：14876345
> 
> 赞同：4
> 
> 时间：2013-02-14T13:52:46.793
> 
> 标签：c#, click, mouse, simulate

## 我需要的

**在不移动光标的情况下**模拟消息（主要是鼠标，但也包括键盘）。消息转到焦点窗口（起初，我想要最小化窗口，但我没有找到如何做到这一点，所以我用`SetForegroundWindow`它来聚焦它）。

## 我发现了什么

在[这个](https://stackoverflow.com/questions/7315196/performing-mouse-click-without-moving-cursor)问题上，我发现我需要使用 pInvoked from `user32.dll`。我还发现了一个小代码示例，但它没有用。

我也发现[了这个](https://stackoverflow.com/questions/4204566/sending-a-mouse-click-to-a-specific-position-without-moving-the-mouse)类似的问题。这家伙使用`mouse_event`，但它已被弃用。此函数采用米奇中的 X 和 Y 坐标。我试图转换我的坐标（使用`SendMessage`），但我失败了。

## 伊坎哈兹举个例子？

当然。已`notepad.exe`打开，我需要右键单击位于 (1210, 460) 的按钮。

## 我试过的

根据我在这里找到的示例，我执行了以下代码：

```
IntPtr hWnd = (IntPtr)FindWindow("notepad.exe", null);
SetForegroundWindow(hWnd);

var screenPoint = this.PointToScreen(new Point(1210, 460));
var handle = WindowFromPoint(screenPoint);

if (handle != IntPtr.Zero)
{
    //Right Button Down
    SendMessage(handle, 0x0204, IntPtr.Zero, IntPtr.Zero);
    //Right Button Up
    SendMessage(handle, 0x0205, IntPtr.Zero, IntPtr.Zero);
} 
```

我也尝试在 中使用我以前的句柄`hWnd`，`SendMessage`但效果不佳。您可以在[这里](http://pastebin.com/2zBzkQEw)找到完整的代码。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T19:37:01.373

如果我正确理解，您想在应用程序中注入点击事件而无需移动鼠标，就像游戏机器人一样，所以用户看不到总和正在使用他的鼠标和键盘......

如果我是对的，那么看看这个链接的回复，它可能是你想要的......

它在 c++ 中，但我猜这不是什么大问题......

[http://social.msdn.microsoft.com/Forums/en-SG/vcgeneral/thread/e0071733-286a-4b4d-b294-685f8a788fb8](http://social.msdn.microsoft.com/Forums/en-SG/vcgeneral/thread/e0071733-286a-4b4d-b294-685f8a788fb8)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T15:26:34.447

这是我年轻时制作的一些鼠标和键盘处理程序，用于在游戏屏幕上找到颜色并单击||右键单击+选项：P

也许有些代码可能对你有帮助，即使它是法语的......

```
 using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;
namespace Abyte0
    {
        public partial class ClavierVirtuel
        {
            [DllImport("user32.dll", EntryPoint = "FindWindow")]
            private static extern int FindWindow(string _ClassName, string _WindowName);

            [DllImport("user32.dll", EntryPoint = "SetForegroundWindow")]
            private static extern int SetForegroundWindow(int hwnd);

            //int handle = FindWindow(null, "Facebook - Windows Internet Explorer");

            //Give focus to the screen with the wanted name
            public static void DonnerFocus(string pNomFenetre)

    {
            //Get the handle of the app you want to send keys to
            int handle = FindWindow(null, pNomFenetre);

            //Set it to the foreground
            SetForegroundWindow(handle);
        }

        //write the string
        public static void Ecrire(string pPhrase)
        {
            //Send the keys on over
            SendKeys.SendWait(pPhrase);
        }

        //write a string and press enter
        public static void ecrire_Enter(string pPhrase)
        {
            foreach (char lettre in pPhrase)
            {
                SendKeys.SendWait(lettre.ToString());
            }
            System.Threading.Thread.Sleep(10);
            SendKeys.SendWait("{ENTER}");
        }
    }
} 
```

和

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.InteropServices;
using System.Threading;

namespace Abyte0
{
    static class MouseHandler
    {
        [DllImport("user32.dll", CharSet = CharSet.Auto)]
        public static extern bool SetCursorPos(int X, int Y);

        [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
        public static extern void mouse_event(long dwFlags, long dx, long dy, long cButtons, long dwExtraInfo);

        private const int MOUSEEVENTF_LEFTDOWN = 0x02;
        private const int MOUSEEVENTF_LEFTUP = 0x04;
        private const int MOUSEEVENTF_RIGHTDOWN = 0x08;
        private const int MOUSEEVENTF_RIGHTUP = 0x10;

        public static void moveMouse(ref int currentx, ref int currenty, string whattodo, int pNombre)
        {
            switch (whattodo)
            {
                case "addX":
                    for (int i = 0; i < pNombre; i++)
                    {
                        currentx++;
                        SetCursorPos(currentx + Form1.m_Border_x, currenty + Form1.m_Border_y);
                    }
                    break;
                case "addY":
                    for (int i = 0; i < pNombre; i++)
                    {
                        currenty++;
                        SetCursorPos(currentx + Form1.m_Border_x, currenty + Form1.m_Border_y);
                    }
                    break;
                case "remX":
                    for (int i = 0; i < pNombre; i++)
                    {
                        currentx--;
                        SetCursorPos(currentx + Form1.m_Border_x, currenty + Form1.m_Border_y);
                    }
                    break;
                case "remY":
                    for (int i = 0; i < pNombre; i++)
                    {
                        currenty--;
                        SetCursorPos(currentx + Form1.m_Border_x, currenty + Form1.m_Border_y);
                    }
                    break;
                default:
                    break;
            }
        }
        #region Mouse Left, Right1, Right2 Clicks
        public static void DoMouseLeftClick(int nx, int ny)
        {
            Random objRandom = new Random();
            SetCursorPos(nx + Form1.m_Border_x, ny + Form1.m_Border_y);
            mouse_event(MOUSEEVENTF_LEFTDOWN, nx + Form1.m_Border_x, ny + Form1.m_Border_y, 0, 0);
            Thread.Sleep(objRandom.Next(1, 332));
            mouse_event(MOUSEEVENTF_LEFTUP, nx + Form1.m_Border_x, ny + Form1.m_Border_y, 0, 0);
           // Thread.Sleep(objRandom.Next(objRandom.Next(10, objRandom.Next(180, 600)), objRandom.Next(objRandom.Next(666, 4000), 5102)));
            Handler.getFocus();
        }

        public static void DoMouseLeftClick(int[] pTab)
        {
            int nx = pTab[0];
            int ny = pTab[1];
            Random objRandom = new Random();
            SetCursorPos(nx + Form1.m_Border_x, ny + Form1.m_Border_y);
            mouse_event(MOUSEEVENTF_LEFTDOWN, nx + Form1.m_Border_x, ny + Form1.m_Border_y, 0, 0);
            Thread.Sleep(objRandom.Next(1, 332));
            mouse_event(MOUSEEVENTF_LEFTUP, nx + Form1.m_Border_x, ny + Form1.m_Border_y, 0, 0);
          //  Thread.Sleep(objRandom.Next(objRandom.Next(10, objRandom.Next(180, 600)), objRandom.Next(objRandom.Next(666, 4000), 5102)));
            Handler.getFocus();
        }

        public static void DoMouseRightClickOp1(int nx, int ny)
        {
            Random objRandom = new Random();
            SetCursorPos(nx + Form1.m_Border_x, ny + Form1.m_Border_y);
            mouse_event(MOUSEEVENTF_RIGHTDOWN, nx + Form1.m_Border_x, ny + Form1.m_Border_y, 0, 0);
            Thread.Sleep(objRandom.Next(6, 237));
            mouse_event(MOUSEEVENTF_RIGHTUP, nx + Form1.m_Border_x, ny + Form1.m_Border_y, 0, 0);
            Handler.getFocus();
            Thread.Sleep(objRandom.Next(1, 332));
            moveMouse(ref nx, ref ny, "addY", 20);
            DoMouseLeftClick(nx, ny);
        }

        public static void DoMouseRightClickOp2(int nx, int ny)
        {
            Random objRandom = new Random();
            SetCursorPos(nx + Form1.m_Border_x, ny + Form1.m_Border_y);
            mouse_event(MOUSEEVENTF_RIGHTDOWN, nx + Form1.m_Border_x, ny + Form1.m_Border_y, 0, 0);
            Thread.Sleep(objRandom.Next(6, 237));
            mouse_event(MOUSEEVENTF_RIGHTUP, nx + Form1.m_Border_x, ny + Form1.m_Border_y, 0, 0);
            Handler.getFocus();
            Thread.Sleep(objRandom.Next(1, 332));
            moveMouse(ref nx, ref ny, "addY", 25);
            DoMouseLeftClick(nx, ny);
        }
        #endregion

        public static void DoSimpleClickNoFocus(int x,int y)
        {
            Random objRandom = new Random();
            SetCursorPos(x,y);
            mouse_event(MOUSEEVENTF_RIGHTDOWN, x, y, 0, 0);
            Thread.Sleep(objRandom.Next(7, 258));
            mouse_event(MOUSEEVENTF_LEFTUP, x,y, 0, 0);
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T14:00:00.127

Raymond Chen 专门为你写了一篇博文：[你不能用 PostMessage 模拟键盘输入](http://blogs.msdn.com/b/oldnewthing/archive/2005/05/30/423202.aspx)。我知道您需要鼠标，而不是键，并且您使用的是 Send 而不是 Post，但完全相同的问题也适用于您。阅读链接。幸运的是，它还包含解决方案：使用[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)函数。

> 合成击键、鼠标动作和按钮点击。

# .net - 为什么 Windows 8 兼容性 Shim 错误地检测到安装后需要 .Net 3.5？

> ID：14876348
> 
> 赞同：3
> 
> 时间：2013-02-14T13:52:56.703
> 
> 标签：.net, windows-8, driver, installshield, installshield-2010

我有一个我们开发的产品，我们只是在 Windows 8 和 Server 2012 上进行测试。问题是，在 Win 8 / 2012 上安装完成后，兼容性垫片（据我目前了解）弹出出现一个对话，说该应用程序需要 .Net 3.5 才能正常运行。请看下面的截图：

![.net 所需的对话](../Images/af6257a3827b3cbf62c1aac00ed67895.png)

由于我们的产品是本机打印机驱动程序，我认为这不太可能！Win 8 / 2012 的唯一先决条件是 Visual c++ 可重新分发的版本。

如果有帮助，我还使用 install shield 2010 创建安装程序。

有没有其他人看到 Win 8 错误地提示应用程序需要 .net 3.5？有谁知道定义兼容性垫片如何确定应用程序是否需要 .net 3.5 的任何可靠来源？

谢谢！

安迪

** 更新 **

找到这篇 msdn 博客文章：http: [//blogs.technet.com/b/askcore/archive/2012/05/14/windows-8-and-net-framework-3-5.aspx](http://blogs.technet.com/b/askcore/archive/2012/05/14/windows-8-and-net-framework-3-5.aspx)。简而言之，可以通过以下方式触发对话：

*   您尝试使用可从 Microsoft 下载的可再发行包安装 .Net 2.0、3.0 或 3.5。
*   应用程序尝试在其自己的安装过程中安装所需版本的可再发行包之一。
*   需要旧版本的应用程序无需预安装所需版本即可执行。

不幸的是，这些似乎都不能解释为什么我会看到它！

** 更新 **

~~明确地说，我没有托管库或 exe，只有纯原生 c 和 c++，一些使用 Visual Studio 编译器（没有 clr 标志）构建，一些使用 DDK。~~

... 多么尴尬！...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T02:14:01.743

我认为您正在查看误报。这是您链接的博客中的另一句话：

> 经典的“您的里程可能会有所不同”免责声明在这里适用，因为我们真的不知道所有应用程序将如何对拦截安装尝试的垫片作出反应。此外，一些应用程序会查找某些文件的存在以验证所需 .Net 版本的安装。如果预装了 .Net 3.5，此类应用程序安装可能会失败，因为旧版本中以前存在的一些文件在 Windows 8 中已被弃用。然而，我们正在测试许多常用应用程序，并且在某些情况下会引入应用程序前填充程序（如果它们检测到 . NET 不当。
> 
> 为避免需要它的应用程序出现问题，最好在安装应用程序之前启用新的 .Net 3.5 功能。

翻译：这是一个完整的黑客。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T13:24:43.270

我对“失败”安装触发的 PCA 消息更有经验。对于那些您绝对可以通过编辑InstallShield\support 文件夹中名为(level is or or ) 的模板[应用程序清单](http://msdn.microsoft.com/en-us/library/windows/desktop/hh848036.aspx)来使事情变得更好，在这些情况下，您可以为您声称支持的每个其他操作系统添加一个元素 - 例如通过添加for视窗 8。`setupexe.<level>.manifest``invoker``highest``admin``supportedOS``<supportedOS Id="{4a2f28e3-53b9-4441-ba9c-d69d4a4a6e38}"/>`

可能值得从它开始看看它是否有助于 .NET 检测案例。我不会屏住呼吸，但这将有助于解决有人在完成安装之前点击取消的情况。

（请注意，对于我们在给定目标操作系统上测试过的代码，您应该升级到实际测试过的 InstallShield 版本，但在许多情况下，复制正确的`supportedOS`元素就足够了。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:25:56.223

嗯，这有点尴尬……

...原来有一个用 CLR 2 编译的 .net 库，它在安装程序内的一些 InstallScript 中运行。（在我的辩护中，安装程序相当大！！）

因此，对于任何认为这真的是一个谜的人表示歉意，对话有点正确！此外，向第一次猜对并随后删除他的帖子的人道歉。它在这个主题上提供了很多信息。随时重新添加它，我会标记为答案！:)

安迪。

# iphone - 如何向 iOS 应用程序添加蓝牙键盘支持？

> ID：14876349
> 
> 赞同：2
> 
> 时间：2013-02-14T13:53:01.330
> 
> 标签：iphone, ios, ipad, keyboard

如何向 iOS 应用程序添加蓝牙键盘支持？按下任何键时如何捕捉事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:22:17.000

这对您开始很有用。

[外接键盘](https://stackoverflow.com/questions/2893267/how-can-i-detect-if-an-external-keyboard-is-present-on-an-ipad)

# html - 使用 html 或 php 将图像添加到画布

> ID：14876351
> 
> 赞同：0
> 
> 时间：2013-02-14T13:53:06.010
> 
> 标签：html, canvas, image-loading

我尝试了很长时间如何将图像添加到 html 或 php 中的画布只有我得到了图像路径我需要将图像加载到 html 或 php 中的画布，我不需要通过 jquery 或 javascript 添加图像

在html中我试试这个。

```
<canvas id="myCanvas" width="500" height="500" style="border:1px solid #000000;">
<img src="" alt="Resized Image" height="200px"     
width="200px"></canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:04:02.327

有几种方法可以做到这一点。

首先，通过在 css 中设置背景图像，有一种稍微骇人的方法，如下所示：

```
<canvas id="myCanvas" width="500" height="500" style="border:1px solid #000000;background-image:url('path/to/your/image.ext')">
</canvas> 
```

如果您只想显示图像，这将正常工作，但是，我假设您想要实际操作它。在这种情况下，请查看[此答案](https://stackoverflow.com/questions/9253911/html-5-canvas-image-rendering)。

# java - 表单加载但过程不会停止

> ID：14876352
> 
> 赞同：0
> 
> 时间：2013-02-14T13:53:06.960
> 
> 标签：java, javascript, jsp, servlets

我在从 JSP 页面中的数组列表中查看我的记录时遇到问题。每次我通过 javascript onload 事件自动加载我的 JSP 页面时，都会显示数据，但进程不会停止。

`Categoria`班级：

```
package proyecto.modelo;

public class Categoria {

    private int idcategoria;

    public int getIdcategoria() {
        return idcategoria;
    }

    public void setIdcategoria(int idcategoria) {       
        this.idcategoria = idcategoria;
    }
} 
```

`BaseDAO`班级：

```
package proyecto.dao;

import java.sql.CallableStatement;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

public class BaseDAO {

    protected void cerrarConexion(Connection con) throws RuntimeException {
        try {
            if (con != null && !con.isClosed()) {
                con.close();
            }
        } catch (SQLException se) {
            System.err.println("Error: cerrarConexion: " + se);
        }
    }

    protected void cerrarResultSet(ResultSet rs) throws RuntimeException {
        try {
            if (rs != null) {
                rs.close();
            }
        } catch (SQLException se) {
            System.err.println("Error: cerrarResultSet: " + se);
        }
    }

    protected void cerrarStatement(PreparedStatement stmt)
            throws RuntimeException {
        try {
            if (stmt != null) {
                stmt.close();
            }
        } catch (SQLException se) {
            System.err.println("Error: cerrarStatement: " + se);
        }
    }

    protected void cerrarCallable(CallableStatement callstmt)
            throws RuntimeException {
        try {
            if (callstmt != null) {
                callstmt.close();
            }
        } catch (SQLException se) {
            System.err.println("Error: cerrarCallable: " + se);
        }
    }
} 
```

`CategoriaDAO`班级：

```
package proyecto.dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.Collection;

import proyecto.excepcion.DAOExcepcion;
import proyecto.modelo.Categoria;
import proyecto.util.ConexionBD;

public class CategoriaDAO extends BaseDAO {

    public Collection<Categoria> listarIdCat() throws DAOExcepcion{

        Collection<Categoria> = new ArrayList<Categoria>();
        String query = "SELECT id_categoria from categoria ";
        Connection con = null;
        PreparedStatement stmt = null;
        ResultSet rs = null;

        try {
            con=ConexionBD.obtenerConexionDirecta();
            stmt=con.prepareStatement(query);
            rs=stmt.executeQuery();

            while(rs.next()) {
                Categoria vo=new Categoria();
                vo.setIdcategoria(rs.getInt("id_categoria"));
                c.add(vo);
            }

        } catch (SQLException e) {
            System.err.println(e.getMessage());
            throw new DAOExcepcion(e.getMessage());
        } finally {
            this.cerrarStatement(stmt);
            this.cerrarResultSet(rs);
            this.cerrarConexion(con);
        }

        return c;
    }

} 
```

`CategoriaNegocio`班级：

```
package proyecto.negocio;

import java.util.Collection;
import java.util.List;

import proyecto.dao.CategoriaDAO;
import proyecto.excepcion.DAOExcepcion;
import proyecto.modelo.Categoria;

public class CategoriaNegocio {

    public Collection<Categoria> listarIdCat() throws DAOExcepcion {
        CategoriaDAO dao = new CategoriaDAO();
        Collection<Categoria> lista = dao.listarIdCat();
        return lista;
    }

} 
```

小服务程序`doPost()`方法：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    CategoriaNegocio negocio = new CategoriaNegocio();

    try {
        Collection<Categoria> lista = negocio.listarIdCat();
        request.setAttribute("IDCATEGORIA", lista);
    } catch (DAOExcepcion e) {
        System.out.println(e.getMessage());
    }

    RequestDispatcher rd = request.getRequestDispatcher("listar_idcat.jsp");
    rd.forward(request, response);
} 
```

JSP：

```
<%@page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"   %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<html>
    <head>
        <script type="text/javascript">
            window.onload = function() {
                document.formulario.submit()
            };
            document.close();
        </script>
    </head>
    <body>
        <form action="ListarIdCatServlet" method="post" name="formulario"></form>
        <table>
            <c:forEach items="${IDCATEGORIA}" var="c">
                <tr>
                    <td>${c.idcategoria}</td>
                </tr>
            </c:forEach>
        </table>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:44:26.073

您似乎想在 GET 请求上调用 servlet。你以错误的方式接近这个。您不应该在加载页面时提交 POST 表单。您应该在`doGet()`servlet 的方法中执行该工作并直接调用它。

您需要进行以下更改：

1.  将 servlet 的 URL 模式更改为`/listar_idcat`.

2.  `doPost`将servlet 的方法重命名为`doGet`.

3.  将`listar_idcat.jsp`文件移动到`/WEB-INF`文件夹中（这可以防止最终用户直接访问）。

4.  `getRequestDispatcher("listar_idcat.jsp");`将 servlet 中的调用更改为`getRequestDispatcher("/WEB-INF/listar_idcat.jsp");`.

5.  `<script>`从 JSP 中删除整个。

6.  `<form>`从 JSP 中删除整个。

现在，`http://localhost:8080/context/listar_idcat`改为打开 JSP（是的，没有`.jsp`扩展名！它将直接调用 servlet `doGet()`）。

### 也可以看看：

*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- Hello World #2。

# android - 如何使用 android 或 Windows Phone 设备（无模拟器）在 localhost:port 中测试我自己的 ASP.NET Web API

> ID：14876356
> 
> 赞同：0
> 
> 时间：2013-02-14T13:53:20.003
> 
> 标签：android, asp.net, .net, windows-phone-7, asp.net-web-api

我正在尝试按照本[指南](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api)使用 ASP.NET 开发我的第一个 REST 服务。我想使用我的 android 和 wp 设备在 localhost 中测试我的服务，而不使用 android 和 WP 模拟器（太慢）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:59:34.617

如果您在 IIS 上部署 ASP.NET 应用程序，只要手机连接在同一网络上（例如通过 Wifi），就可以访问这些服务。只需使用服务器的 IP 地址而不是`localhost`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:22:09.327

Another idea is to use fiddler's proxy option. (This also assumes you have set up your app in IIS). Check out [this article](http://conceptdev.blogspot.co.uk/2009/01/monitoring-iphone-web-traffic-with.html?m=1).

This approach is especially useful if you want to test using custom host headers over SSL.

With this approach you can simulate production dns (by altering hosts file on the fiddler host) rather than using IP addresses and machine names from the mobile device.

# tabs - FragmentTabHost 显示重叠的片段

> ID：14876358
> 
> 赞同：2
> 
> 时间：2013-02-14T13:53:25.640
> 
> 标签：tabs, android-fragments, android-tabhost, overlap

我在一个 FragmentActivity 中使用一个 FragmentTabHost，它有 3 个选项卡。如果我从每个选项卡的第一页更改选项卡，它工作正常，但如果我在一个选项卡内导航扔片段然后更改选项卡，它会显示新片段与旧片段重叠。有人可以帮助我吗？

这是 FragmentActivity (fragments_tab.xml) 的布局：

```
 <?xml version="1.0" encoding="UTF-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:src="@drawable/background_gradient">

    <ImageView
        android:contentDescription="@string/app_name"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:src="@drawable/background_gradient" />

    <android.support.v4.app.FragmentTabHost
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <LinearLayout
            android:id="@+id/realtabcontent"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"/>

    </LinearLayout>
    </android.support.v4.app.FragmentTabHost>
    </RelativeLayout> 
```

我的 FragmentActivity 的代码：

```
 public class MainActivity extends FragmentActivity {

        private FragmentTabHost mTabHost;

        @Override   
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setDB();
            setContentView(R.layout.fragments_tab);

            mTabHost = (FragmentTabHost)findViewById(android.R.id.tabhost);

            mTabHost.setup(this, getSupportFragmentManager(), R.id.realtabcontent);

            mTabHost.addTab(mTabHost.newTabSpec("Home").setIndicator("Home",      getResources().getDrawable(R.drawable.ic_menu_home)),
                    HomeFragment.class, null);

            mTabHost.addTab(mTabHost.newTabSpec("Map").setIndicator("Map", getResources().getDrawable(R.drawable.ic_menu_mapmode)),
                    MapMenuFragment.class, null);
            mTabHost.addTab(mTabHost.newTabSpec("Info").setIndicator("Info", getResources().getDrawable(R.drawable.ic_menu_info_details)),
                    InfoFragment.class, null);
        }
} 
```

每个片段都是这样创建的：

```
public class InfoFragment extends Fragment {

    @Override
    public void onActivityCreated(Bundle savedInstanceState) 
    {
        super.onActivityCreated(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        View view = inflater.inflate(R.layout.fragment_info, container, false);
        return view;
    } 
```

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:51:27.983

我找到了我的问题的解决方案。在我的项目中，每个片段都是扩展类片段的不同类。当 FragmentTabHost 尝试分离旧片段时，它找不到 Fragment 对象，因此它没有删除任何东西。

我不是那么专家，我相信有一种更简单的方法，但是经过许多头痛后，我发现这个解决方案有效。这就是我所做的：

*   我将每个选项卡的当前片段保存到活动中的 Object 变量中。
*   我将 FragmentTabHost 的代码复制到自己的类中，并在调用分离或附加时更改了方法 doTabChanged。

（我有 3 个选项卡“主页”、“地图”和“信息”）

分离：

```
//ft.detach(mLastTab.fragment);
if(mLastTab.tag == "Home") ft.detach((Fragment) tabHomeFragment);
else if(mLastTab.tag == "Info") ft.detach((Fragment) tabInfoFragment);
else ft.detach((Fragment) tabMapFragment); 
```

附：

```
//ft.attach(newTab.fragment);
if(newTab.tag == "Home") ft.attach((Fragment) tabHomeFragment);
else if(newTab.tag == "Info") ft.attach((Fragment) tabInfoFragment);
else ft.attach((Fragment) tabMapFragment); 
```

tabHomeFragment、tabMapFragment 和 tabInfoFragment 包含每个选项卡的当前片段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-29T14:08:39.720

我知道这是一个很老的问题，但无论如何我都会提供我的解决方案，所以它对任何阅读这个问题的人都有用。我有同样的问题，我意识到问题是由调用引起的

```
mTabHost.setup(this, getSupportFragmentManager(), R.id.realtabcontent); 
```

因为进行此调用，tabhost 将使用`mTabHost.addTab`方法中指定的所有片段初始化此 FrameLayout

我解决了我的问题

```
mTabHost.setup(this, getSupportFragmentManager(), R.id.tabcontent); 
```

这样，FrameLayout R.id.tabcontent 将被隐藏（宽度=0，高度=0），然后，只需实现`OnTabChangeListener`，您就可以做到这一点

```
@Override
    public void onTabChanged(String tabId) {
        FragmentTransaction t = getSupportFragmentManager().beginTransaction();
        if (tabId.equals(Frament1.TAG)) {
            t.replace(R.id.realtabcontent, Fragment1.newInstance());
        } else if (tabId.equals(Frament2.TAG)) {
            t.replace(R.id.realtabcontent, Fragment2.newInstance());
        } else if (tabId.equals(Frament3.TAG)) {
            t.replace(R.id.realtabcontent, Fragment3.newInstance());
        }
        //optional
        t.addTobackStack();

        t.commit()
    } 
```

它应该工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T13:48:14.623

出现问题是因为 TabHost 无法正确管理您添加的片段。

我曾经遇到过同样的问题，并通过 Fragment Container 模式解决。

FragmentContainer 是从 Fragment 扩展而来的自定义类。您可以使用容器初始化每个选项卡。

每个 Container 通过 getChildFragmentManager() 管理自己的子 Fragment。您可以根据需要添加、替换、删除任何内容。

Tab改变的时候，容器也切换了，没有重叠的问题。

这是我写过的一个简单容器： [https ://stackoverflow.com/a/15903349/1695108](https://stackoverflow.com/a/15903349/1695108)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-27T06:52:41.753

我遇到过类似的情况，以下对我有用。

检查 savedInstanceState 是否不为空，在这种情况下，不要进行片段事务。它将解决这个问题。

```
if (homeFragment == null) {
    if (savedStateInstance != null) {
    homeFragment = (HomeFragment) fragmentManager.findFragmentByTag(HOME_FRAGMENT);
    return;
}
// tie new fragment
homeFragment = new HomeFragment();
homeFragment.setArguments(bundle);
FragmentTransaction transaction = fragmentManager.beginTransaction();
transaction.add(homeFragment, HOME_FRAGMENT);
transaction.commit();
} 
```

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T01:45:08.557

我实际上有一个类似的问题。我在 ListFragment 中选择项目，然后创建一个新片段并替换选项卡布局中的原始列表片段。我发现当我切换到其他选项卡时，我会遇到多个片段同时显示、相互重叠的问题，或者我会有应该显示的片段消失的问题。我的解决方案是在选择新选项卡时清除后台堆栈，尝试将此代码添加到 TabListener 中的 onTabSelected() 方法

```
FragmentManager manager = getSupportFragmentManager();

    if(manager.getBackStackEntryCount() > 0)
    {
        manager.popBackStack(null, 
                             FragmentManager.POP_BACK_STACK_INCLUSIVE);
    } 
```

这样做为我解决了这个问题。

# ios - iOS应用程序进入后台后套接字连接被终止

> ID：14876359
> 
> 赞同：6
> 
> 时间：2013-02-14T13:53:35.000
> 
> 标签：ios, iphone, multitasking

我正在使用 iPhone 应用程序聊天使用套接字连接与服务器进行通信。当应用程序移至后台时，我可以看到服务器能够与应用程序通信约 5 分钟。但是在这个时间之后，套接字连接被破坏了。但是应用程序一进入后台就停止执行。为什么套接字连接保持5分钟而不是应用程序执行。苹果是否指定了保持连接的确切时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T16:41:17.630

通过在 applicationDidEnterBackground 中使用以下代码，您可以获得 600 秒（10 分钟）的最大时间：

```
if ([[UIDevice currentDevice] respondsToSelector:@selector(isMultitaskingSupported)]) { //Check if our iOS version supports multitasking I.E iOS 4
if ([[UIDevice currentDevice] isMultitaskingSupported]) { //Check if device supports mulitasking
    UIApplication *application = [UIApplication sharedApplication]; //Get the shared application instance
    __block UIBackgroundTaskIdentifier background_task; //Create a task object
    background_task = [application beginBackgroundTaskWithExpirationHandler: ^ {
        [application endBackgroundTask: background_task]; //Tell the system that we are done with the tasks
        background_task = UIBackgroundTaskInvalid; //Set the task to be invalid
        //System will be shutting down the app at any point in time now
    }];
    //Background tasks require you to use asyncrous tasks
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //Perform your tasks that your application requires
        NSLog(@"\n\nRunning in the background!\n\n");
        [application endBackgroundTask: background_task]; //End the task so the system knows that you are done with what you need to perform
        background_task = UIBackgroundTaskInvalid; //Invalidate the background_task
    });
  }
} 
```

文档可以在这里找到[http://disanji.net/iOS_Doc/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html](http://disanji.net/iOS_Doc/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html)

我刚刚实现了 backgroundTaskIdentifier 对象并使 background_task 无效以检查时间，应用程序处于活动状态并且正在运行 600 秒。你甚至可以使用这个来获得剩余时间

```
NSLog(@"Time remaining: %f", application.backgroundTimeRemaining); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:36:18.900

来自 Apple 的[IOS 编程指南](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/BackgroundExecution/BackgroundExecution.html)

> 大多数进入后台状态的应用程序都会在此后不久进入挂起状态。在此状态下，应用程序不会执行任何代码，并且可能随时从内存中删除。向用户提供特定服务的应用程序可以请求后台执行时间以提供这些服务。

这至少解释了为什么应用程序停止执行。为什么您的服务器仍然能够与您的应用程序通信 5 分钟可能是因为您设置了一个额外的超时时间并且没有在您的应用程序进入后台时明确关闭套接字连接。

# css - 图像在 Chrome 中使用 css 过渡调整悬停大小时会抽搐

> ID：14876360
> 
> 赞同：0
> 
> 时间：2013-02-14T13:53:39.277
> 
> 标签：css, google-chrome, css-transitions

我有一个图片链接。在悬停时，图像在 css 过渡的帮助下平滑缩放。当图像开始/结束以进行缩放时，它会抽搐。有人对如何消除这种抽搐有一些建议吗？

在 FF 中一切正常。

```
<a href="#"><img src="image.jpg"></a>

a img {
    ...
    max-height: 100px;
    max-width: 100px;
    transition: all .2s;
}

a:hover img {
    max-height: 200px;
    max-width: 200px;
} 
```

[jsfiddle 中的示例](http://jsfiddle.net/kUKsm/2/)

# jquery - toggleClass（如果不存在则添加）

> ID：14876361
> 
> 赞同：1
> 
> 时间：2013-02-14T13:53:46.143
> 
> 标签：jquery, toggleclass

如果存在则切换类的最简单方法是什么，否则如果不存在则添加一个？

目前我正在使用：

```
if ($(e.target).hasClass('clicked-odd')) {
  $(e.target).removeClass('clicked-odd');
  $(e.target).addClass('clicked-even');
} else {
  $(e.target).removeClass('clicked-even');
  $(e.target).addClass('clicked-odd');
} 
```

...这似乎有点长。

你会认为这会起作用：

```
$(e.target).toggleClass('clicked-even', 'clicked-odd') 
```

但它似乎只在存在类的情况下切换一个类，但如果两个类都不存在，则不添加“clicked-odd”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:53:24.463

如果其中一个类已经存在，toggleClass 只会以您希望的方式工作

我能想到的最简单的方法是

```
$(e.target).is('.clicked-even, .clicked-odd') ?
    $(e.target).toggleClass('clicked-even clicked-odd') : $(e.target).addClass('clicked-odd'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:42:20.477

`toggleClass`调用切换类确定。

但是要使用它并让它按您的意愿工作，您需要首先在您的目标上安装该类，如果没有，则两个类都将在第一次切换时添加，并在第二次调用时删除。

如果您想从目标上没有类开始，则需要`if`第一次插入一个。

# csv - 如何将 csv 文件导出到 LibreOffice' Calc？

> ID：14876365
> 
> 赞同：0
> 
> 时间：2013-02-14T13:53:53.440
> 
> 标签：csv, libreoffice, calc

假设我创建了一个 csv 文件并将其保存在某处。我将如何以编程方式（如果可能，使用 C++ 或我可以从 C++ 调用的东西）打开 Calc 并将该 csv 文件导出到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:56:38.467

尝试[`system`](http://www.cplusplus.com/reference/cstdlib/system/)：

```
 system("/path/to/calc /path/to/your/csv"); 
```

[http://www.cplusplus.com/reference/cstdlib/system/](http://www.cplusplus.com/reference/cstdlib/system/)

# android - 在 Android 中播放视频时 VideoView 不覆盖整个屏幕

> ID：14876367
> 
> 赞同：3
> 
> 时间：2013-02-14T13:53:55.443
> 
> 标签：android, media-player

我开发了一个使用 VideoView 播放视频的媒体播放器。它工作正常，但存在播放视频底部有空白区域的问题。您可以查看我的代码和播放器的屏幕截图。请在这方面帮助我，我将非常感谢你。提前致谢。

![在此处输入图像描述](../Images/7a074466adb2166415cc88f938fa9b65.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    >

    <VideoView 
        android:id="@+id/video_view" 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
    />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T14:00:04.953

这应该可以，它将拉伸您的视频以填满整个屏幕：

```
<?xml version="1.0" encoding="utf-8"?>
  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

  <VideoView android:id="@+id/videoViewRelative"
       android:layout_alignParentTop="true"
       android:layout_alignParentBottom="true"
       android:layout_alignParentLeft="true"
       android:layout_alignParentRight="true"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent">
  </VideoView>

</RelativeLayout> 
```

# select - SQLite 非常慢的 SELECT 时间

> ID：14876371
> 
> 赞同：1
> 
> 时间：2013-02-14T13:54:15.887
> 
> 标签：select, sqlite, inner-join

我的程序出现了一些奇怪的行为，也许你可以给它带来一些启示。

今天我开始测试一些代码，并意识到一个特定的查询真的很慢（大约需要 2 分钟）。

这里选择：

```
select distinct table1.someName
from table1
INNER JOIN table2 ON table2.id = table1.t2_id
INNER JOIN table3 ON table1.id = table3.t1_id
INNER JOIN table4 ON Table3.id = table4.t3_id 
INNER JOIN table5 ON table5.id = table4.t5_id 
INNER JOIN table6 ON table4.id = table6.t4_id 
where t4_name = 'whatever'
and t2_name = 'moarWhatever'

and timestamp_till is null 

order by someName 
```

所以问题是，结果是大约 120 条记录。s将每条记录`INNER JOIN`的检查数量减少`timestamp_till is null`到大约 20 条记录。

最让我烦恼的是，我已经测试过将整个表`table6`插入到一个新创建的表中并重命名`timestamp_till`为`ende`. 在该表上，选择在大约 0.1 秒内完成......

timestamp_till 是 SQLite3 的某种保留名称吗？这可能是 SQLite 引擎中的错误吗？是我的错吗？oO

编辑：添加`EXPLAIN QUERY PLAN`输出...

当用`and timestamp_till is null`他查询时：

```
0|0|4|SEARCH TABLE table5 USING COVERING INDEX sqlite_autoindex_table5 (t4_name=?) (~1 rows)
0|1|3|SEARCH TABLE table4 USING INDEX table4.fk_table4_1_idx (t5_id=?) (~10 rows)
0|2|2|SEARCH TABLE table3 USING INTEGER PRIMARY KEY (rowid=?) (~1 rows)
0|3|0|SEARCH TABLE table1 USING INTEGER PRIMARY KEY (rowid=?) (~1rows)
0|4|1|SEARCH TABLE table2 USING INTEGER PRIMARY KEY (rowid=?) (~1 rows)
0|5|5|SEARCH TABLE table6 USING INDEX table6.fk_table6_ts_till (timestamp_till=?) (~2 rows)
0|0|0|USE TEMP B-TREE FOR GROUP BY
0|0|0|USE TEMP B-TREE FOR DISTINCT 
```

最快的是：

```
 select distinct table1.someName
    from table1
    INNER JOIN table2 ON table2.id = table1.t2_id
    INNER JOIN table3 ON table1.id = table3.t1_id
    INNER JOIN table4 ON Table3.id = table4.t3_id 
    INNER JOIN table5 ON table5.id = table4.t5_id 
    INNER JOIN table6 ON table4.id = table6.t4_id 
    where t4_name = 'whatever'
    and t2_name = 'moarWhatever'    
    order by someName 
```

及其结果：

```
0|0|4|SEARCH TABLE table5 USING COVERING INDEX sqlite_autoindex_table5_1 (t4name=?) (~1 rows)
0|1|3|SEARCH TABLE table4 USING INDEX table4.fk_table4_1_idx (t5_id=?) (~10 rows)
0|2|2|SEARCH TABLE table3 USING INTEGER PRIMARY KEY (rowid=?) (~1 rows)
0|3|0|SEARCH TABLE table1 USING INTEGER PRIMARY KEY (rowid=?) (~1rows)
0|4|1|SEARCH TABLE table2 USING INTEGER PRIMARY KEY (rowid=?) (~1 rows)
0|5|5|SEARCH TABLE table6 USING COVERING INDEX sqlite_autoindex_table6_1 (id=?) (~10 rows)
0|0|0|USE TEMP B-TREE FOR GROUP BY
0|0|0|USE TEMP B-TREE FOR DISTINCT 
```

带有作为副本的测试表`table6`

```
0|0|4|SEARCH TABLE table5 USING COVERING INDEX sqlite_autoindex_table5_1 (name=?) (~1 rows)
0|1|3|SEARCH TABLE table4 USING INDEX table4.fk_t5_idx (t5_id=?) (~10 rows)
0|2|2|SEARCH TABLE table3 USING INTEGER PRIMARY KEY (rowid=?) (~1 rows)
0|3|0|SEARCH TABLE table1 USING INTEGER PRIMARY KEY (rowid=?) (~1rows)
0|4|1|SEARCH TABLE table2 USING INTEGER PRIMARY KEY (rowid=?) (~1 rows)
0|5|5|SEARCH TABLE test USING INDEX test.fk_test__idx (id=?) (~2 rows)
0|0|0|USE TEMP B-TREE FOR GROUP BY
0|0|0|USE TEMP B-TREE FOR DISTINCT 
```

* * *

为`test`

```
CREATE TABLE "test"(
  "id" INTEGER NOT NULL,
  "t12_id" INTEGER NOT NULL,
  "value" DECIMAL NOT NULL,
  "anfang" INTEGER NOT NULL,
  "ende" INTEGER DEFAULT NULL,
  PRIMARY KEY("id","t12_id","anfang"),
  CONSTRAINT "fk_test_t12_id"
    FOREIGN KEY("t12_id")
    REFERENCES "table12"("id"),
  CONSTRAINT "fk_test_id"
    FOREIGN KEY("id")
    REFERENCES "id_col"("id"),
  CONSTRAINT "fk_test_anfang"
    FOREIGN KEY("anfang")
    REFERENCES "ts_col"("id"),
  CONSTRAINT "fk_test_ende"
    FOREIGN KEY("ende")
    REFERENCES "ts_col"("id")
);
CREATE INDEX "test.fk_test_idx_t12_id" ON "test"("t12_id");
CREATE INDEX "test.fk_test_idx_id" ON "test"("id");
CREATE INDEX "test.fk_test_anfang" ON "test"("anfang");
CREATE INDEX "test.fk_test_ende" ON "test"("ende"); 
```

苏龙仔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T18:10:58.487

第一个注意事项：SQLite 将在其查询中仅使用 1 个索引。再也不会（使用当前版本）。

因此，这就是 SQLite 正在做的事情：

*   慢查询：使用索引`timestamp_till`
*   快速查询（无 timestamp_till）：在`table6.id`.

我看到了两种解决方法。

您可以使用子查询：

```
select distinct SomeName FROM
(
   select table1.someName as "SomeName", timestamp_till
   from table1
   INNER JOIN table2 ON table2.id = table1.t2_id
   INNER JOIN table3 ON table1.id = table3.t1_id
   INNER JOIN table4 ON Table3.id = table4.t3_id 
   INNER JOIN table5 ON table5.id = table4.t5_id 
   INNER JOIN table6 ON table4.id = table6.t4_id 
   where t4_name = 'whatever'
   and t2_name = 'moarWhatever'
) Q
where timestamp_till is null 
order by SomeName; 
```

`timestamp_till`或者，如果您在其他地方不需要它，您可以将索引放在 上。

通过重新排序连接可能还可以提高速度。通常最小的表首先更快，但这可能会有很大差异。

# css - 视网膜媒体查询上的 LESS 编译错误

> ID：14876376
> 
> 赞同：4
> 
> 时间：2013-02-14T13:54:33.683
> 
> 标签：css, less

我无法编译我的 LESS 文档，因为它为此返回了一个编译错误：

```
@media only screen and (-webkit-min-device-pixel-ratio: 2), only screen and (min--moz-device-pixel-ratio: 2), only screen and (-o-min-device-pixel-ratio: 2/1), only screen and (min-device-pixel-ratio: 2), only screen and (min-resolution: 192dpi), only screen and (min-resolution: 2dppx) { 
```

任何人都可以看到发生这种情况的任何原因吗？我在代码中看不到任何错误。

**更新**

我正在使用 SimpleLESS 进行编译。我刚刚检查过，它使用 LESS 1.3.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T10:24:50.440

这似乎是一个版本问题。[在此处](http://less2css.org/)检查各种版本时， LESS 1.3.1+***没有问题***。然而，对于 1.3.0，它似乎在三个点上窒息：

```
@media only screen and (-webkit-min-device-pixel-ratio: 2), 
  only screen and (min--moz-device-pixel-ratio: 2), 
  only screen and (-o-min-device-pixel-ratio: 2/1), //<-HERE on the 2/1
  only screen and (min-device-pixel-ratio: 2), 
  only screen and (min-resolution: 192dpi), //<-HERE on the dpi
  only screen and (min-resolution: 2dppx) //<-HERE on the dppx
{ 
  .test { color: red;}
} 
```

# c# - 容器和数据库的区别？

> ID：14876377
> 
> 赞同：-1
> 
> 时间：2013-02-14T13:54:36.900
> 
> 标签：c#, database, collections

我试图了解字典或列表等容器与 SQL 数据库之间的区别。

如果这是一个愚蠢的问题，我很抱歉，但我试图了解每个问题何时是必要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:56:24.083

集合（对象/值容器的最常见名称）通常将对象/值存储在内存中，而数据库将信息持久保存到磁盘驱动器，将其存储直到它被删除。

# image-processing - 如果图像边不能被 8 整除，如何管理 bmp 到 jpeg 的转换？

> ID：14876387
> 
> 赞同：0
> 
> 时间：2013-02-14T13:55:24.980
> 
> 标签：image-processing, jpeg, bmp

在将 bmp 转换为 jpeg 时，我们对图像的 8 X 8 离散单元进行 DCT。假设我们有一个高度和宽度不能被 8 整除的图像，那么我们将在图像的两侧留下一些像素。

我们如何管理它？

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:22:57.707

答案是零填充。零填充图像，使其宽度和高度可被 8 整除应用 DCT，然后删除填充

# actionscript-3 - as3鼠标滚轮反转

> ID：14876389
> 
> 赞同：0
> 
> 时间：2013-02-14T13:55:25.560
> 
> 标签：actionscript-3, flash, mouse, mouseevent, mousewheel

嘿，我建立了自定义滚动框。当我在此框上向上滚动时，滚动元素正在向下滚动，而当我向下滚动时-滚动元素正在向上滚动；）。我想扭转这种机制。我该怎么做 ？在我的鼠标代码下方

```
import flash.events.MouseEvent;

function handleMouseWheel(event:MouseEvent):void {
    if ((event.delta > 0 && box_mc.y < 171) || (event.delta < 0 && box_mc.y > 135)) 
    {

        box_mc.y = box_mc.y + (event.delta * 3);
        sb.thumb.y = sb.thumb.y + (event.delta * 13);

        trace(box_mc.y);
        trace(event.delta);

    }
}
stage.addEventListener(MouseEvent.MOUSE_WHEEL, handleMouseWheel); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:22:16.143

您需要做的就是反转 delta 值（或滚动的方向）：

```
if ((event.delta > 0 && box_mc.y < 171) || (event.delta < 0 && box_mc.y > 135)) 
{

    box_mc.y = box_mc.y + (-event.delta * 3);
    sb.thumb.y = sb.thumb.y + (-event.delta * 13);

    trace(box_mc.y);
    trace(event.delta);

} 
```

*请注意，我所做的只是在event.delta*值前面放了一个减号。

# jquery-mobile - 当使用 jquery mobile 使用 ajax 拉入页面时，AngularJS 没有响应，如何让 Angular 与后续的 jqm 页面一起工作？

> ID：14876392
> 
> 赞同：1
> 
> 时间：2013-02-14T13:55:31.127
> 
> 标签：jquery-mobile, angularjs

使用 jquery mobile 和 angularjs 我正在使用单页模板。在第一页中，角度按预期工作，但在随后的页面中，好像角度没有注册。

当我更改为使用多页策略时，它的工作原理。

我试图让 Angular 在 pageinit 上工作：

```
$(document).delegate("#Page2", "pageinit", function () {
    angular.bootstrap($("#Page2"), ['APP']);
}); 
```

我还尝试了如何在没有运气[的情况下重新初始化 angularjs 应用程序的建议。](https://stackoverflow.com/questions/12022831/how-to-reinitialize-an-angularjs-application)

我正在使用 jqm 1.3.0-rc.1 并且 jquery-mobile-angular-adapter 不能很好地使用它。有什么方法可以让我在后续页面上工作。

# git - 使用 git COLA 恢复以前版本的项目

> ID：14876395
> 
> 赞同：2
> 
> 时间：2013-02-14T13:55:41.097
> 
> 标签：git, version-control, git-cola

使用 GIT COLA GUI 提交项目后如何获取项目的先前版本。

我在项目中有一个 C++ 文件。我在 2 月 13 日创建了该文件。我在 2 月 14 日对该文件进行了更改并保存了它。现在我想回到 2 月 13 日保存的版本。那么如何使用 GIT COLA 做到这一点。该项目位于 GIT 存储库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-15T10:53:25.557

使用“View > DAG...”窗口显示整个项目中的所有提交。这个窗口被称为“DAG”窗口。您还可以通过运行“git dag”或“git cola dag”来独立启动 DAG。

在 DAG 窗口中，您可以右键单击任何提交并将您的分支和/或工作树“重置”为任何先前的提交。

您还可以使用“抓取文件...”上下文菜单操作从任何提交中抓取任何文件的旧版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:08:03.203

我似乎没有直接通过[Git Cola](http://git-cola.github.com/share/doc/git-cola/html/tools.html)找到该选项。

不要忘记，在命令行中，按日期结帐非常容易：

```
git checkout master@{1 days ago} -- /path/to/file
git checkout master@{2013-02-13 01:00} -- /path/to/file 
```

如果您只是在谈论以前的修订版

```
git checkout HEAD^ -- /path/to/file 
```

我应该提到，正如[这篇博文中所详述的那样](http://www.bramschoenmakers.nl/en/node/645)，`@{a date}`refspec 并不总是有效：

> （并不总是有效），因为它使用[reflog](http://git-scm.com/docs/git-reflog)（一段时间后过期）。
> 
> 诀窍（如[在 Nabble 上找到的](http://n2.nabble.com/checking-out-by-date-td2147497.html)）是在特定日期查找修订并检查该修订。这可以在一个命令中完成：

```
git checkout `git rev-list -n 1 --before="2013-02-13 23:59" master` -- /path/to/file 
```

# vb.net - Webbrowser1 不断在新窗口中打开 pdf

> ID：14876400
> 
> 赞同：0
> 
> 时间：2013-02-14T13:55:53.773
> 
> 标签：vb.net, pdf, browser

我正在使用以下代码打开一个pdf

```
WebBrowser1.Navigate("file://C:\test.pdf") 
```

但是，它并没有在浏览器中打开，而是继续启动 adobe acrobat reader 并在其中打开 PDF，而 webbrowser1 保持不变。

这不是我想要的；我希望我的 PDF 在我的网络浏览器中打开

我可能做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T01:24:20.307

您的代码的问题是“文件”语句。

尝试这个

WebBrowser1.Navigate("C:\test.pdf")

您会看到该文件在您的网络浏览器控件中打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:10:58.640

我刚刚解决了这个问题。您需要做的是将您的 pdf 文档拖到您的解决方案资源管理器中，然后从那里打开它。

```
Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    WebBrowser1.Navigate("c:\users\Fake.Name\documents\visual studio 2010\Projects\SO\SO\test.pdf")
End Sub 
```

我正在研究解决方案'SO'，所以我将 pdf 放入解决方案并将 pdf 拖到我的代码中，它生成了它的位置。

另外，看看[这个](http://www.ehow.com/how_6814313_enable-pdf-browser.html)

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-10T09:40:46.203

在项目属性中检查“首选 32 位”。当然，这可能会带来其他问题（如我的情况），所以这不是一个完美的解决方案。

# c# - WebClient - DownloadFileCompleted wenn 访问 404 URL

> ID：14876405
> 
> 赞同：0
> 
> 时间：2013-02-14T13:56:00.637
> 
> 标签：c#, .net, webclient

我使用私人无效完成

```
public void DonwloadFile()
{
    WebClient webClient = new WebClient();
    webClient.DownloadFileCompleted += new AsyncCompletedEventHandler(Completed);
    webClient.DownloadFileAsync(new Uri("resource to download"), reportFileName );
}
   private void Completed(object sender, AsyncCompletedEventArgs e)
        {

            //do some stuff
        } 
```

这可行，但如果“要下载的资源”不可用（返回 404），则会在“reportFileName”处创建一个空文件。我当然可以签`AsyncCompletedEventArgs` 入 Completed 并查看异常，但是已经创建了空文件。

有没有办法以不创建空文件的方式处理 404？

# iphone - 在 UINavigation 从一个视图到同一类的另一个视图发生崩溃，如何解决？

> ID：14876410
> 
> 赞同：0
> 
> 时间：2013-02-14T13:56:18.063
> 
> 标签：iphone, ios, uinavigationcontroller

在我的项目中，有大约 10 个视图控制器。在其中一个视图控制器中，我在 xib 中添加了一个视图控制器以提供额外的功能（一个实际视图 + 为单个类添加了视图控制器）。当我尝试将 ie.navigate 从其实际视图移动到添加的视图控制器时，第一次它的导航很好，也回到了实际的视图。但是如果我再去那个添加的视图控制器，我的应用程序就会崩溃。这是显示的错误。

```
"Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Pushing the same view controller instance more than once is not supported (<UIViewController: 0xc09e460>)'
First throw call stack:
(0x30da012 0x28b4e7e 0xb9c5b0 0xb9c098 0xa7f3f 0xab327 0x28c86b0 0x5fcfb 0x28c86b0 0x706035 0x305df3f 0x305d96f 0x3080734 0x307ff44 0x307fe1b 0x33127e3 0x3312668 0xaa265c 0x719d 0x2685) 
libc++abi.dylib: terminate called throwing an exception" 
```

而我在代码中使用的方法动作是

```
- ( void ) move {
    [self.navigationController pushViewController:addedviewController animated:YES];
} 
```

我还添加了屏幕截图...![在此处输入图像描述](../Images/f55af1992eca03c0a6ce7e826d7c0b8e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:12:53.703

您不能添加已经在堆栈上的 viewcontroller 实例。在获得 addedViewController 实例之前，为什么不将控制器从堆栈中弹出？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:06:25.953

如果你创建另一个对象？

```
AddedviewControllerClass *addedviewControllerTemp = [[AddedviewControllerClass alloc] initWithNibName:@"yourXib.xib"];

[self.navigationController pushViewController:addedviewControllerTemp animated:YES];

[addedviewControllerTemp release] //if not ARC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:14:51.160

用于添加您的`ViewController`

```
[self presentViewController:yourView animated:YES completion:nil]; 
```

去除

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

# php - 使用 FileReader 和 php 上传大文件

> ID：14876412
> 
> 赞同：3
> 
> 时间：2013-02-14T13:56:22.683
> 
> 标签：php, javascript, html

我目前正在为非常大的文件（比服务器允许的更大）开发一个上传模块，其中包含进度和所有这些东西。请参阅下面的代码。它适用于文本文件、图像，甚至 doc 和 pdf 文件。对于任何其他文件类型，它都会崩溃。有人有什么建议吗？

```
var fr = new FileReader;
chunkSize = 524288;
//chunkSize = window.maxPost;
var chunks = Math.ceil(file.size / chunkSize);
var chunk = 0;
function SendSlice() {
    var start, end;
    start = chunk * chunkSize;
    if (start > file.size) {
        start = end + 1;
    }
    end = start + (chunkSize - 1) >= file.size ? file.size : start + (chunkSize - 1);
    status = chunk == 0 ? "start" : (chunk == chunks ? "end" : "progress");
    if (status == 'start') {
            $("#upload-area").append("<p>Upload started for file " + file.name + "</p>");
    }
    fr.onload = function(e) {
        var sliceData = e.target.result;
        $.ajax({
            type : "POST",
        url : "uploader.php",
        data : {
            filename : file.name,
            status : status,
            slice : sliceData
        }
        }).success(function(data) {
            if (++chunk <= chunks) {
                SendSlice();
                var progress = (chunk / chunks) * 100;
                $("#progress-text").html(progress.toFixed(2) + "%");
                $("#progress").css({
                    width : progress + "%"
                });
            } else {
                $("#upload-area").append("<p>File " + file.name + " uploaded succesfully. Download file <a target='_blank' href='uploads/" + file.name + "'>here</a></p>");
            }
        });
    };
    fr.readAsDataURL(file.slice(start, end));
}
SendSlice(); 
```

和PHP代码：

```
 if($_POST['status'] == 'start') {
if (file_exists("uploads/" . $_POST['filename'])) {
    unlink("uploads/" . $_POST['filename']);
}
 }
 $data = explode(",", $_POST['slice']);
 $data = $data[1];
 $data = base64_decode($data);
 file_put_contents("uploads/" . $_POST['filename'], $data, FILE_APPEND); 
```

另外，我尝试过使用 readAsBinaryString，但我不知道如何在 PHP 中处理结果。请指教

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:42:55.930

这只是在黑暗中拍摄，但查看 file.slice API ( [http://www.w3.org/TR/FileAPI/#dfn-slice](http://www.w3.org/TR/FileAPI/#dfn-slice) )，它说：

> “切片方法返回一个新的 Blob 对象，其字节范围从可选的 start 参数到但不包括可选的 end 参数，并且类型属性是可选的 contentType 参数的值。”

但是，在使用它之前从“end”中减去 1 - 这是否意味着您在每个字节中都省略了 1 个字节`chunk`（因为无论如何都不包括结束字节）？

此外，您`$_POST['filename']`在使用之前会进行消毒 - 不是有人放在`"../yourscript.php"`那里吗？

# magento - 使用 Magento API 将付款方式设置为购物车

> ID：14876423
> 
> 赞同：3
> 
> 时间：2013-02-14T13:56:44.963
> 
> 标签：magento

我正在使用 Magento API 创建订单。当我想将付款方式添加到购物车时，我的代码失败：

```
$paymentMethod = array(
    “method” => “paypal_standard”
);

$resultPaymentMethod = $proxy->call(
    $sessionId,
    “cart_payment.method”,
    array(
        $shoppingCartId,
        $paymentMethod
    )
); 
```

我收到以下错误：不允许使用付款方式。

在系统->配置->贝宝的管理部分，我设置了网站支付标准，但我没有在系统->配置->支付方法中启用任何选项，因为没有可用于贝宝的选项。当我打电话时：

```
$proxy->call($session, 'cart_payment.list') 
```

我得到一个空数组，因为没有设置任何可用的付款方式。有人知道贝宝付款设置在 Magento 中的保存方式和位置吗？

如果我设置了另一种付款方式，例如“checkmo”，那么订单就创建好了。问题是我只需要允许 Paypal 标准付款。

所以我的问题是：如何将付款方式设置为 PayPal 到购物车，以便成功创建我的订单？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-15T17:25:40.027

我也面临这个问题并找到原因。

$method->canUseInternal() 用于支付方式 api。当我们在支付方法 api 中使用 paypal 或其他可重定向的方法时，在这种情况下 $method->canUseInternal() 它会得到错误的值。

因此，对于这种类型的情况，我们需要创建自己的自定义编码。

api函数参考：

```
protected function _canUsePaymentMethod($method, $quote){
        if (!($method->isGateway() || $method->canUseInternal())) {
            return false; }

        if (!$method->canUseForCountry($quote->getBillingAddress()->getCountry())) {
            return false;
        }

        if (!$method->canUseForCurrency(Mage::app()->getStore($quote->getStoreId())->getBaseCurrencyCode())) {
            return false;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T20:02:13.017

要使用 Paypal 付款，您需要将您的客户重定向到 Paypal。因此，您可能无法通过 API 使用此付款方式。我建议您查看付款方式的 isAvailable() 以自定义此行为。

# javascript - 在我的日期验证中加入前导零

> ID：14876425
> 
> 赞同：0
> 
> 时间：2013-02-14T13:56:51.030
> 
> 标签：javascript, validation, date

这是我当前的日期验证功能：

```
 isValidDate = function(day,month,year) {
    var dteDate;
    dteDate=new Date(year,month,day);
    return ((day.toString()===dteDate.getDate().toString()) && (month.toString()===dteDate.getMonth().toString()) && (year.toString()===dteDate.getFullYear().toString()));
  } 
```

然后我检查了这些字段：

```
checkFields = function() {
  var iDate = $("inspect_date").value;
  if(iDate.length > 0) {
    var a = iDate.split("/"); 
    if(isValidDate(a[0],a[1]-1,a[2]) == false){
      alert("You have entered an invalid date. Please amend!");
      return false;
    } 
```

所以目前它不接受我想要的 dd/mm/yyy 格式的日期 - 该函数不喜欢前导零。

我试图以这种方式修复它：

```
isValidDate = function(day,month,year) {
  var dteDate;
  dteDate=new Date(year,month,day);

  var day = dteDate.getDate();
  var month = dteDate.getMonth() + 1;
  var year = dteDate.getFullYear();

  var formatted =
      (day < 10 ? "0" : "") + day + "/"  +
      (month < 10 ? "0" : "") + month + "/"  +
      year;

  return ((day.toString()===dteDate.getDate().toString()) && (month.toString()===dteDate.getMonth().toString()) && (year.toString()===dteDate.getFullYear().toString()));
} 
```

但是现在我的“返回”部分在进行比较时包含错误的值。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:12:52.467

对于示例日期`"02/04/2012"`，您的函数的第一个变体作为参数传递`"02", 3, "2012"`。然后，您的函数会尝试`"02"`与`"2"`明显“不相等”的函数进行比较。

您应该将数字作为数字进行比较。一元`+`运算符是将字符串转换为数字的快捷方式（`+"01"`yield `1`；您也可以使用`parseInt`）：

```
return
    +day === dteDate.getDate() && 
    +month === dteDate.getMonth() &&
    +year === dteDate.getFullYear(); 
```

这是使用 RegRx 和 JavaScript Date 对象[验证日期的另一种方法。](https://stackoverflow.com/a/14693731/87015)

# selenium - Selenium 中的数据驱动框架使用什么，Excel 或数据库？

> ID：14876429
> 
> 赞同：1
> 
> 时间：2013-02-14T13:57:06.917
> 
> 标签：selenium, automated-tests, selenium-webdriver

我正在使用 WebDriver 进行 Selenium 自动化。它是关键字和数据驱动的方法。我正在处理来自 Microsoft Excel 的对象、数据和测试配置的所有输入。

现在客户想使用数据库。他在问我在框架中使用哪个更好。是数据库还是 Microsoft Excel 实用程序？我必须用有效的分数回复他。

哪一个在框架中更好用，为什么第二个不好用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T21:42:42.353

这个问题确实需要一个固执己见的答案，但因为其中一个或另一个有一些重要的好处，我仍然会回答它！

使用 Excel，非技术测试人员可以轻松访问数据。它具有良好的排序能力，并且可以以非常直观的方式组织数据。但是，您不能在测试期间轻松添加或更改数据（我知道您可以这样做，但我认为这太过分了）。这意味着数据必须事先组织好并针对测试要求。

在数据库中，数据可以来自查询并随时更改。如果在数据库中找不到所需数据，您可以编写辅助函数来填充所需数据。这意味着测试可以运行而不必担心数据库中当前有哪些数据（在一定程度上），并且可以缓解一些项目问题。但是，使用数据库可能会出现导入/导出问题，并且可能会产生大量编码开销。此外，显然非技术测试人员会发现很难更改数据。

正如我所说，这最终确实是一种意见，并且在很大程度上是一个项目决策。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-07T02:34:52.860

以我的经验，比较这些方法，效率也起着不可或缺的作用。与 Excel 工作表不同，使用数据库往往会降低性能。使用文件（excel）可以提高效率。在我们公司的自动化套装中，我们很少使用数据库。相反，会将数据推送到文件中并将它们用作存储库。

# iphone - 弃用 Graph API 功能后在朋友墙上发帖的解决方法

> ID：14876430
> 
> 赞同：1
> 
> 时间：2013-02-14T13:57:13.757
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我的 iOS 应用程序正在尝试发布到朋友的时间线。我正在使用 Graph API，但从我在[Platform Updates: Operation Developer Love of February](https://developers.facebook.com/blog/)中读到的内容似乎已被弃用，您无法使用它在朋友墙上发帖。如果没有此功能，我的应用程序的社交部分将非常薄弱。所以，我做了一些研究，发现使用一些不推荐使用的标题你仍然可以在朋友提要上发布（[http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/](http://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/)）。完成所有代码后，我只是遗漏了一个在任何地方都找不到的小部分，即如何为这个 Facebook 对话框设置默认文本？或者，如果有人在不使用这些已弃用的东西的情况下有另一种方法，请分享...

谢谢

```
// Put together the dialog parameters
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               friendID,@"to",
                               @"Facebook SDK for iOS", @"name",
                               @"Build great social apps and get more installs.", @"caption",
                               @"The Facebook SDK for iOS makes it easier and faster to develop Facebook integrated iOS apps.", @"description",
                               @"https://developers.facebook.com/ios", @"link",
                               @"https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png", @"picture",
                               nil];

// Invoke the dialog
[self.facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

# zend-framework2 - 在模型类中使用 ServiceManager 的最佳方式？

> ID：14876432
> 
> 赞同：8
> 
> 时间：2013-02-14T13:57:24.830
> 
> 标签：zend-framework2

我正在尝试在我的实体类上使用 Service Manager，但我不知道最好的方法。

在控制器上这很容易，因为我们可以调用服务管理器： $this->getServiceLocator();

但是，在我的实体类中，即使我实现了 ServiceLocatorAwareInterface 我也可以检索 ServiceManager 因为我的实体类没有被服务管理器调用：

那么最好的方法是什么：

1 - 从我的控制器传递我的实体类中的 serviceManager 2 - 使用 ServiceManager 构建我的实体类 3 - ...？

为了更好地理解我的问题，这是我的代码不起作用：

我的实体类：

```
class Demande extends ArraySerializable implements InputFilterAwareInterface {
/../
    public function getUserTable() {
    if (! $this->userTable) {

        $sm = $this->getServiceLocator();//<== doesn't work !
        $this->userTable = $sm->get ( 'Application\Model\UserTable' );
    }
    return $this->userTable;
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-14T14:56:19.370

我不会将 ServiceManager 注入您的模型（尽管您可以）。我宁愿让 ServiceManager 为您构建模型，并将您需要的任何东西直接注入模型中。

服务配置：

```
'factories' => array(
    'SomethingHere' => function($sm) {
        $model= new \My\Model\Something();

        return $model;
    },
    '\My\Model\Demande' => function($sm) {
        $model= new \My\Model\Demande();
        /**
         * Here you use the SM to inject any dependencies you need
         * into your model / service what ever..
         */
        $model->setSomething($sm->get('SomethingHere'));

        return $model;
    },
    /**
     * Alternatively you can provide a class implementing
     * Zend\ServiceManager\FactoryInterface
     * which will provide an instance for you instad of using closures
     */
    '\My\Model\DemandeDefault' => '\My\Model\DemandeFactory', 
```

将您的任何依赖项放在服务管理器配置中，然后使用它为您将任何依赖项注入您的模型、服务等。

如果您想使用工厂方法而不是闭包，则可以使用示例工厂类：

需求工厂.php

```
use Zend\ServiceManager\FactoryInterface;
use Zend\ServiceManager\ServiceLocatorInterface;

class DemandeFactory implements FactoryInterface
{
    /**
     * Create a new Instance
     *
     * @param ServiceLocatorInterface $serviceLocator
     * @return Demande
     */
    public function createService(ServiceLocatorInterface $serviceLocator)
    {
        $config = $serviceLocator->get('Config'); // if you need the config..
        // inject dependencies via contrustor
        $model = new \My\Model\Demande($serviceLocator->get('SomethingHere'));
        // or using setter if you wish.
        //$model->setSomething($serviceLocator->get('SomethingHere'));

        return $model;
    }
} 
```

您尝试通过服务管理器实例化的示例模型。

需求.php

```
class Demande
{
    protected $_something;

    /**
     * You can optionally inject your dependancies via your constructor
     */
    public function __construct($something)
    {
        $this->setSomething($something);
    }

    /**
     * Inject your dependencies via Setters
     */
    public function setSomething($something)
    {
        $this->_something = $something;
    }

    // Something will be injected for you by the Service Manager
    // so there's no need to inject the SM itself.
} 
```

在您的控制器中：

```
public function getDemande() 
{
    if (! $this->_demande) {
        $sm = $this->getServiceLocator();
        $this->_demande = $sm->get ('\My\Model\Demande');
    }
    return $this->_demande;  
} 
```

您可以将 SergiceManager/ServiceLocator 注入您的模型，但您的模型将依赖于 ServiceLocator。

# linux - Linux自由命令含义

> ID：14876436
> 
> 赞同：-2
> 
> 时间：2013-02-14T13:57:30.433
> 
> 标签：linux, free-command

我有一些关于 linux 的研究要做。问题之一如下：

'在运行的系统上，free 列中命令 free 的输出是否可能与前 2 行相同？你怎么能强迫这个？

我搜索了一下，我相信我已经找到了这些值的含义。如果我将缓冲区和缓存一起添加，并将其添加到 free 中，它会为我提供缓冲区和缓存的 free 值。这意味着，如果需要，应用程序可以使用的内存。

所以，我想这 2 行的值可能是相同的，这取决于使用情况。但是，我不知道我怎么能

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:26:15.443

第一行和第二行的区别在于，第一行是不计算*空闲*列下的缓存和缓冲区，而第二行是。这是一个例子：

```
 total       used       free     shared    buffers     cached
[1]    Mem:       4028712    2972388    1056324          0     315056     835360
[2]    -/+ buffers/cache:    1821972    2206740

used[2] = used[1] - buffers - cached
free[2] = free[1] + buffers + cached 
```

**因此，您的问题的答案是**：这两行可能相同（或至少彼此非常接近），但在真实系统上不太可能，因为它需要您释放/耗尽所有缓存。如果您愿意尝试，请尝试一些有关[如何删除缓存](https://unix.stackexchange.com/questions/53930/drop-caches-doesnt-drop-caches)或编写消耗所有可用 RAM 的程序的建议。

# android - 优化 php json_encode 后 android 解析 json

> ID：14876440
> 
> 赞同：1
> 
> 时间：2013-02-14T13:57:51.203
> 
> 标签：android, json

数组中有数组：

```
Array 
(
 [0] => Array (  [0] => v1  [1] => v2  [2] => v3 )
 [1] => Array (  [0] => v1  [1] => v2  [3] => v3 )
 [2] => Array (  [0] => v1  [1] => v2  [10] => v3 )
 [4] => Array (  [0] => v1  [1] => v2  [3] => v3 )
) 
```

在`json_encode`andorid之后，我得到以下信息：

```
{
 «0»: [ «v1», «v2», «v3» ],
 «1»: { «0»:«v1», «1»:«v2», «3»:«v3», },
 «2»: { «0»:«v1», «1»:«v2», «10»:«v3» },
 «4»: { «0»:«v1», «1»:«v2», «3»:«v2» }
}

JSONArray jList = jb.getJSONArray(response); //exception is not array 
```

有没有像`Array[Array[]]`在Android上一样解析这个的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:32:53.153

发生这种情况是因为您有不连续的索引。如果您使用“重新编号”数组

```
$a = array_values($a); 
```

你将会有

```
Array 
(
    [0] => Array (  [0] => v1  [1] => v2  [2] => v3 )
    [1] => Array (  [0] => v1  [1] => v2  [3] => v3 )
    [2] => Array (  [0] => v1  [1] => v2  [10] => v3 )
    [3] => Array (  [0] => v1  [1] => v2  [3] => v3 )
) 
```

结果`json_encode`将创建

```
[ ["v1", "v2", "v3"], { "0": "v1", ...}, ... ] 
```

如果您也想拥有内部数组，则必须确保内部数组也具有连续的索引。

如果您无法更改 PHP 代码，唯一的方法是将其解析为 JSON 对象，然后使用[`keys()`](http://developer.android.com/reference/org/json/JSONObject.html#keys%28%29)并单独选择值来迭代属性。

# javascript - chrome等中的文本选择

> ID：14876442
> 
> 赞同：1
> 
> 时间：2013-02-14T13:57:58.427
> 
> 标签：javascript

```
function getPosition () {

    if ($.browser.msie)
    {
        var textPosition = document.selection.createRange().duplicate();
    }
    else($.browser.mozilla || $.browser.opera || $.browser.safari) {
        var textPosition = window.getSelection();
    }
}

<div><textarea rows="3" cols="50" name="textarea1" id="textarea1" onChange="javascript:storeCursorPosition();" onClick="javascript:getPosition();" onKeyPress="javascript:getPosition();" onFocus="javascript:getPosition();"></textarea></div>

<input type="Button" onclick="javascript:if(textPosition.text == null){alert('No position selected')}else{alert('position selected')};"> 
```

我有上面的代码，它在 Chrome、Safari 等中不起作用。我一直收到“未选择位置”警报，除了 IE。在 IE 中，我收到“位置”警报。

知道为什么除了 IE 之外它不起作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:01:37.363

`textPosition``getPosition()`在函数之外没有范围。将其添加为`window`应该可以工作的变量，但并不理想：

```
var textPosition = null;

function getPosition () {

    if(!window.getSelection)
    {
        textPosition = document.selection.createRange().duplicate();
    }
    else 
    {
        textPosition = window.getSelection();
    }
} 
```

# axapta - 在 AX 中使用环境变量

> ID：14876443
> 
> 赞同：1
> 
> 时间：2013-02-14T13:58:00.223
> 
> 标签：axapta, dynamics-ax-2009

是否有可能在 AX 中使用 windows-environment-variables？

**示例**：

`NormalImage`上的财产`MenuItem`。我想用某事。像 %USERNAME% 而不是显式用户名。例如，在类中，我可以使用`WINAPI`宏并引用用户文件夹变量，例如`CSIDL_MYPICTURES`，访问每个用户的路径。在 AOT-object-properties 中，不可能引用宏...

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:26:29.420

是的，您可以使用 .Net 框架来获取环境变量，也可以使用内置的 AX 函数。请看我输入的这个例子：

```
static void Job85(Args _args)
{
    System.String   systemString;
    str             marshalString;
    ;

    // Built in AX function
    info(strfmt("%1, %2, %3", xUserInfo::find().networkAlias, xUserInfo::find().networkDomain, xUserInfo::find().name));

    // .Net Framework
    systemString = System.Environment::GetEnvironmentVariable('username');
    marshalString = systemString; // Marshal it
    info(strfmt("%1", marshalString));
} 
```

请参阅[http://msdn.microsoft.com/en-us/library/system.environment.getenvironmentvariable.aspx](http://msdn.microsoft.com/en-us/library/system.environment.getenvironmentvariable.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T14:17:10.310

不，您不能在 AOT 上执行此操作。您可以通过 X++ 代码在运行时更改某些属性，但据我所知，您不能动态更改 MenuItem 上的图像。

您可以使某些菜单项可见/不可见。可能可以模拟您尝试以这种方式执行的操作，尽管这与 AX 设计模式并不完全一致。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-26T16:55:02.223

获取客户端名称和机器名称的示例

```
static void testGetClientMachineName(Args _args)
{
    str localClientname, terminalServerName;
    ;
    localClientname = System.Environment::GetEnvironmentVariable('CLIENTNAME') ;
    info(localClientname);

    terminalServerName = System.Environment::get_MachineName();
    info(terminalServerName);

} 
```

# android - Android 通过 USB 和 UART 读取数据

> ID：14876445
> 
> 赞同：0
> 
> 时间：2013-02-14T13:58:02.777
> 
> 标签：android

我是学生，目前正在为我的大学做一个项目。我正在尝试编写一个能够通过使用 TUSB3410（[http://www.ti.com/product/tusb3410](http://www.ti.com/product/tusb3410)）及其 USB 将其与 C2500（[http://www.ti. com/product/cc2500](http://www.ti.com/product/cc2500) ) 通过 UART 连接。USB转串口之类的东西。

我可以从 TUSB3140 中获取信息，例如其供应商 ID 或端点，因此我可以使用普通的 USB API。但是接收cc2500的信息比较麻烦。我不知道我应该使用哪些方法或哪个参数是正确的。因此，也许您知道 controlTransfer() 等方法的外观。

我希望你能帮我解决这个问题！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T02:24:20.387

恐怕答案并不那么简单。

根据链接的数据表和相关文档，TUSB3410 不是固定功能器件。它基本上是一侧的 USB 设备，另一侧的 UART，以及中间的 MCU 应用处理器。为了让该芯片做任何有用的事情，它必须加载一个固件应用程序来控制数据如何从一侧移动到另一侧。因此**，您**可以在固件中定义数据如何通过 USB 移动（中断传输、批量传输等），这将控制 Android 应用程序如何与其交互。

此外，该芯片似乎不支持烧录固件，它总是从 I2C EEPROM 或 USB 主机外部加载固件。如果您的设备设置上还没有 EEPROM，您可能会遇到困难，因为 Android USB API 并没有真正让您的应用程序在枚举过程中访问设备，这是固件需要的时候如果从主机下载，则发送。它还需要您检测您的设备两次（一次使用标准引导代码 VID/PID，一次在固件文件接管并且设备重新连接到总线后）。

如果您只是在寻找一个简单的嵌入式实现来将 UART、SPI 等数据输入到 Android 应用程序中，那么您最好使用 FTDI FT311 之类的东西，它实现了 Open Accessory 协议并附带库代码来帮助您从等式的两边开始：http: [//www.ftdichip.com/Products/ICs/FT311D.html](http://www.ftdichip.com/Products/ICs/FT311D.html)

**编辑：根据您的评论**

所以如果你的设备符合CDC USB Device Class，那么基本上有3个关注点：

*   每个设备都有一个用于配置的“端点 0”，并且可以在 Android API 中使用该`controlTransfer()`方法进行访问。CDC 设备使用此端点来更改波特率、停止位等项目。
*   像 VCP 这样的 CDC 设备有两个接口，一个用于通信，一个用于数据。数据接口（通常枚举为第二个）有两个批量端点（一进一出），通常在其中传输串行数据。`bulkTransfer()`您可以使用该方法或使用异步在这些端点上来回传输数据`UsbRequest`。

作为起点，不妨看看这个开源项目的源代码，它使用主机 API 实现了 CDC 基础知识。您应该能够很好地了解如何从那里滚动您自己的驱动程序（特别是 CdcAcmSerialDriver）：

[http://code.google.com/p/usb-serial-for-android/](http://code.google.com/p/usb-serial-for-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T10:53:43.423

我想除了使用AOA协议的FT311D，你也可以考虑使用FT231X，通过FT231X，你可以使用在google search/google play中很容易找到的android超级终端的APK。这是通过OTG方法使用的。你也可以看看。

# android - 获取设备位置的方法有哪些？

> ID：14876446
> 
> 赞同：0
> 
> 时间：2013-02-14T13:58:01.613
> 
> 标签：android, android-location

我创建了位置管理器服务。有了它，我想捕捉瞬间的位置变化。我创建了一个服务类并在其中`LocationListener locationListener = new LocationListener() {@Override public void onLocationChanged(Location newLocation) {`。但是，听众的反应似乎很慢。我正在努力改进定位服务等级。出于这个原因，捕捉位置变化的最快、时间、方法和其他方法是什么？

也许，上面的问题对某人来说是荒谬的。一般来说，我想了解“获取设备位置的方法是什么？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:46:40.527

我写了一个简单的类可以做到这一点：

```
public class GPSPosition {

private double latitude;

private double longitude;

private String date;

public GPSPosition()
{
    LocationManager service = (LocationManager)Minipark.getAppContext().getSystemService(Context.LOCATION_SERVICE);
    boolean isEnabled = service.isProviderEnabled(LocationManager.GPS_PROVIDER);
    Location location = service.getLastKnownLocation(LocationManager.GPS_PROVIDER);
    if (isEnabled)
    {
        if (location != null)
        {

            this.longitude = location.getLongitude();
            this.latitude = location.getLatitude();

            Date locDate = new Date(location.getTime());
            DateFormat df = new SimpleDateFormat("z yyyy.MM.dd. HH:mm:ss");
            df.setTimeZone(TimeZone.getTimeZone("GMT+1"));
            String gmtTime = df.format(locDate);
            int position = gmtTime.indexOf(" ");
            gmtTime = "GMT+1" + gmtTime.substring(position, gmtTime.length());
            this.date = gmtTime; //GMT+1 time
        }
        else
        {
            this.longitude = -100000;
            this.latitude = -100000;
            this.date = "-100000";
        }
    }
    else 
    {
        this.longitude = -100000;
        this.latitude = -100000;
        this.date = "-100000";

    }
} 
```

然后我有一个计时器，它每 X 秒实例化 GPSPosition 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:01:14.330

您可以使用 GPS 和 Internet 地理位置获取用户位置。这是我找到的最好的教程。完美工作并通过打开的选项获取位置，如果没有启用任何选项，请您转到设置。

[http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/](http://www.androidhive.info/2012/07/android-gps-location-manager-tutorial/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:01:48.700

如果您想自己获取位置更改，您应该启动一个线程，每隔一段时间获取一次位置，请记住 GPS 会消耗大量设备电池。

干杯

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T14:05:01.917

将 GPS_PROVIDER 分配给您的位置管理器可能需要一些时间才能得到修复。如果您不需要准确性，则将 NETWORK_PROVIDER 分配给您的 LocationManger 像这样

```
mLocationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 0, 0,
                mLocationListener); 
```

或者您可以根据所花费的时间在两者之间切换......

# java - 什么可能导致全球 Tomcat/JVM 减速？

> ID：14876447
> 
> 赞同：45
> 
> 时间：2013-02-14T13:58:09.533
> 
> 标签：java, performance, tomcat7

我在 Tomcat 7/Java 7 上运行 Java EE-ish Web 应用程序（Hibernate 4+Spring+Quartz+JSF+Facelets+Richfaces）的几个（大约 15 个）实例时遇到了一个奇怪但严重的问题。

系统运行得很好，但是在经过很长一段时间后，应用程序的所有实例同时突然出现响应时间增加的问题。基本上该应用程序仍然可以工作，但响应时间大约高出三倍。

这是两个图表，显示了两个示例实例的两个特定短工作流/操作（登录、研讨会访问列表、ajax-refresh 此列表、注销；下一行只是 ajax 刷新的请求时间）的响应时间应用程序：

![上下文 1 的响应时间](../Images/58d1109e869c40e8efb3dbd81e1a7a5c.png) ![上下文 2 的重新计算时间](../Images/ce9ced722fc5a8feffd6c582ab6fa343.png)

如您所见，应用程序的两个实例同时“爆炸”并保持缓慢。重启服务器后一切恢复正常。应用程序的所有实例同时“爆炸”。

我们将会话数据存储到数据库中，并将其用于集群。我们检查了会话大小和数量，两者都相当低（这意味着在具有其他应用程序的其他服务器上，我们有时会拥有更大和更多的会话）。集群中的另一个 Tomcat 通常会快速保持几个小时，并且在这个随机的时间之后它也“死亡”。我们用 jconsole 检查了堆大小，主堆保持在 2.5 到 1 GB 大小之间，db 连接池基本上都是空闲连接，还有线程池。最大堆大小为 5 GB，还有大量可用的 perm gen 空间。负载不是特别高；主 CPU 上只有大约 5% 的负载。服务器不交换。这也不是硬件问题，因为我们另外将应用程序部署到问题仍然存在的 VM 上。

我不知道在哪里看了，我没有想法。有人知道在哪里看吗？

## 2013-02-21 更新：新数据！

我向应用程序添加了另外两个时序跟踪。至于测量：监控系统调用一个执行两个任务的servlet，测量服务器上每个任务的执行时间，并将所用时间写为响应。这些值由监控系统记录。

我有几个有趣的新事实：应用程序的热重新部署导致当前 Tomcat 上的单个实例发疯。这似乎也会影响原始 CPU 计算性能（见下文）。这种个体语境爆炸不同于随机发生的整体语境爆炸。

现在来看一些数据：

![图 3](../Images/6f3ec2bcc9baecbea10fd98244401227.png) ![图4](../Images/8abb07f80ba23d2ee3d41109c68d5e4e.png)

首先是单行：

1.  浅蓝色是小工作流的总执行时间（详情见上文），在客户端测量
2.  红色是浅蓝色的“一部分”，是执行该工作流程的特殊步骤所花费的时间，在客户端上测量
3.  深蓝色在应用程序中测量，包括通过 Hibernate 从数据库读取实体列表并迭代该列表，获取惰性集合和惰性实体。
4.  Green 是一个使用浮点和整数运算的小型 CPU 基准测试。据我所知，没有对象分配，所以没有垃圾。

现在来看爆炸的各个阶段：我用三个黑点标记了每张图像。第一个是或多或少只有一个应用程序实例中的“小”爆炸——在 Inst1 中它会跳跃（尤其是在红线中可见），而 Inst2 下面或多或少保持平静。

在这个小爆炸之后，发生了“大爆炸”，并且该 Tomcat 上的所有应用程序实例都爆炸了（第 2 个点）。请注意，这种爆炸会影响所有高级操作（请求处理、数据库访问），但**不会**影响CPU 基准测试。它在两个系统中都保持在低位。

之后，我通过触摸 context.xml 文件热重新部署了 Inst1。正如我之前所说，这个实例从爆炸到现在完全被摧毁（浅蓝色线不在图表中 - 它大约在 18 秒处）。注意 a) 这种重新部署根本不影响 Inst2 和 b) Inst1 的原始 DB 访问也没有受到影响 - 但是 CPU*似乎突然变得更慢了！*. 这太疯狂了，我说。

**更新更新** 当应用程序被取消部署时，Tomcat 的防泄漏监听器不会抱怨陈旧的 ThreadLocals 或 Threads。显然似乎存在一些清理问题（我认为这与大爆炸没有直接关系），但 Tomcat 对我没有任何提示。

## 2013-02-25 更新：应用环境和石英时间表

应用环境不是很复杂。除了网络组件（我不太了解这些），基本上还有一个应用程序服务器（Linux）和两个数据库服务器（MySQL 5 和 MSSQL 2008）。主要负载在 MSSQL 服务器上，另一个仅用作存储会话的地方。

应用程序服务器运行 Apache 作为两个 Tomcat 之间的负载平衡器。所以我们有两个 JVM 在同一个硬件上运行（两个 Tomcat*实例*）。我们使用这种配置并不是为了真正平衡负载，因为应用程序服务器能够很好地运行应用程序（多年来一直如此），而是在不停机的情况下启用小型应用程序更新。有问题的 Web 应用程序被部署为不同客户的单独*上下文*，每个 Tomcat 大约有 15 个上下文。（我似乎在我的帖子中混淆了“实例”和“上下文” - 在办公室里，它们经常被用作同义词，我们通常神奇地知道同事在说什么。我的错，我真的很抱歉。）

**为了用更好的措辞澄清这种情况**：我发布的图表显示了同一应用程序在同一 JVM 上的两个不同上下文的响应时间。大爆炸会影响一个 JVM 上的所有上下文，但不会在另一个 JVM 上发生（顺便说一句，Tomcat 爆炸的顺序是随机的）。热重新部署后，一个 Tomcat 实例上的一个上下文变得疯狂（具有所有有趣的副作用，例如该上下文的 CPU 似乎较慢）。

系统的整体负载相当低。它是一个内部核心业务相关软件，同时拥有大约 30 个活跃用户。特定于应用程序的请求（服务器接触）目前约为每分钟 130 个。单个请求的数量很少，但请求本身通常需要对数据库进行数百次选择，因此它们相当昂贵。但通常一切都是完全可以接受的。该应用程序也不会创建大型无限缓存 - 一些查找数据被缓存，但只缓存很短的时间。

上面我写道，能够运行应用程序的服务器可以正常运行几年。我知道找到问题的最佳方法是准确找出第一次出现问题的时间，并查看在此时间范围内发生了什么变化（在应用程序本身、相关的库或基础设施中），但问题是我们不知道问题是什么时候出现的。让我们称之为次优（在不存在的意义上）应用程序监控......：-/

我们排除了某些方面，但该应用程序在过去几个月中已多次更新，因此我们不能简单地部署旧版本。最大的更新不是功能更改是从 JSP 到 Facelets 的转换。但是，“某事”一定是所有问题的原因，但我不知道为什么 Facelets 会影响纯 DB 查询时间。

### 石英

至于 Quartz 时间表：总共有 8 个作业。它们中的大多数每天只运行一次，并且与大容量数据同步有关（绝对不是“大数据”中的“大”；这只是普通用户在日常工作中看到的更多）。但是，这些工作当然是在夜间运行，而问题发生在白天。我在这里省略了详细的工作清单（如果有帮助，我当然可以提供更多细节）。作业的源代码在过去几个月中没有更改。我已经检查了爆炸是否与工作一致——但结果充其量是不确定的。我实际上会说它们没有对齐，但是由于每分钟都有几项工作在运行，所以我还不能排除它。在我看来，每分钟运行的实际工作重量都很轻，

但是，我目前正在启用单个作业执行的日志记录，以便我可以准确地看到每个单个作业执行的开始和结束时间戳。也许这提供了更多的洞察力。

## 2013-02-28 更新：JSF 阶段和时序

我手动向应用程序添加了一个 JSF phae 侦听器。我执行了一个示例调用（ajax 刷新），这就是我所得到的（左：正常运行的 Tomcat 实例，右：Big Bang 之后的 Tomcat 实例 - 这些数字几乎同时从两个 Tomcat 中获取，以毫秒为单位）：

1.  RESTORE_VIEW：17 对 46
2.  APPLY_REQUEST_VALUES：170 与 486
3.  PROCESS_VALIDATIONS：78 对 321
4.  UPDATE_MODEL_VALUES：75 对 307
5.  RENDER_RESPONSE：1059 与 4162

ajax 刷新本身属于搜索表单及其搜索结果。在应用程序的最外层请求过滤器和 web 流开始工作之间还有另一个延迟：有一个`FlowExecutionListenerAdapter`用于测量 web 流某些阶段所花费的时间。此侦听器报告“已提交请求”（据我所知是第一个 Web 流事件）的 1405 毫秒，而未爆炸的 Tomcat 上的完整请求总共需要 1632 毫秒，因此我估计大约有 200 毫秒的开销。
但是在爆炸的 Tomcat 上，它报告的请求提交时间为 5332 毫秒（这意味着所有 JSF 阶段都发生在这 5 秒内），而总请求持续时间为 7105 毫秒，因此对于提交的 Web 流请求之外的所有内容，我们最多有 2 秒的开销.
在我的测量过滤器下方，过滤器链包含一个`org.ajax4jsf.webapp.BaseFilter`，然后调用 Spring servlet。

## 2013-06-05 更新：最近几周发生的所有事情

一个小而相当晚的更新......应用程序性能在一段时间后仍然很糟糕，并且行为仍然不稳定。剖析还没有太大帮助，它只是产生了大量难以剖析的数据。（尝试在生产系统上查看性能数据或配置文件...叹息）我们进行了几次测试（删除软件的某些部分，取消部署其他应用程序等），实际上进行了一些影响整个应用程序的改进。我们的默认刷新模式`EntityManager`是`AUTO`在视图渲染期间发出大量的获取和选择，始终包括检查是否需要刷新。
所以我们构建了一个 JSF 阶段监听器，将刷新模式设置为`COMMIT`during `RENDER_RESPONSE`。*这大大提高了*整体性能*并且似乎在一定程度上缓解了这些问题。*

 *然而，我们的应用程序监控在某些 tomcat 实例的某些上下文中不断产生完全疯狂的结果和性能。就像一个应该在一秒钟内完成的动作（实际上是在部署后完成的），而现在需要超过四秒钟。（这些数字由浏览器中的手动计时支持，因此导致问题的不是监控）。

例如看下图：
![图表](../Images/fa359141750906305da361d52b5d54e1.png)

此图显示了两个运行相同上下文的 tomcat 实例（意味着相同的数据库、相同的配置、相同的 jar）。同样，蓝线是纯 DB 读取操作（获取实体列表，迭代它们，延迟获取集合和相关数据）所花费的时间。绿松石色和红线分别通过渲染几个视图和进行 ajax 刷新来测量。由绿松石色和红色的两个请求呈现的数据与蓝线查询的数据基本相同。

现在在实例 1（右）的 0700 左右，纯 DB 时间大幅增加，这似乎也影响了实际的渲染响应时间，但仅在 tomcat 1 上。Tomcat 0 基本上不受此影响，因此它不是由 DB 引起的服务器或网络，两个 tomcat 都运行在相同的物理硬件上。它必须是 Java 域中的软件问题。

在我上次的测试中，我发现了一些有趣的事情：所有响应都包含标题“X-Powered-By: JSF/1.2, JSF/1.2”。有些（WebFlow 产生的重定向响应）甚至在其中包含 3 次“JSF/1.2”。
我追踪了设置这些标头的代码部分，第一次设置此标头时，它是由此堆栈引起的：

```
... at org.ajax4jsf.webapp.FilterServletResponseWrapper.addHeader(FilterServletResponseWrapper.java:384)
at com.sun.faces.context.ExternalContextImpl.<init>(ExternalContextImpl.java:131)
at com.sun.faces.context.FacesContextFactoryImpl.getFacesContext(FacesContextFactoryImpl.java:108)
at org.springframework.faces.webflow.FlowFacesContext.newInstance(FlowFacesContext.java:81)
at org.springframework.faces.webflow.FlowFacesContextLifecycleListener.requestSubmitted(FlowFacesContextLifecycleListener.java:37)
at org.springframework.webflow.engine.impl.FlowExecutionListeners.fireRequestSubmitted(FlowExecutionListeners.java:89)
at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:255)
at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
at org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174)
at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:920)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:827)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
... several thousands ;) more 
```

此标头第二次由

```
at org.ajax4jsf.webapp.FilterServletResponseWrapper.addHeader(FilterServletResponseWrapper.java:384)   
at com.sun.faces.context.ExternalContextImpl.<init>(ExternalContextImpl.java:131)   
at com.sun.faces.context.FacesContextFactoryImpl.getFacesContext(FacesContextFactoryImpl.java:108)   
at org.springframework.faces.webflow.FacesContextHelper.getFacesContext(FacesContextHelper.java:46)   
at org.springframework.faces.richfaces.RichFacesAjaxHandler.isAjaxRequestInternal(RichFacesAjaxHandler.java:55)   
at org.springframework.js.ajax.AbstractAjaxHandler.isAjaxRequest(AbstractAjaxHandler.java:19)   
at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.createServletExternalContext(FlowHandlerAdapter.java:216)   
at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:182)   
at org.springframework.webflow.mvc.servlet.FlowController.handleRequest(FlowController.java:174)   
at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)   
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:925)   
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)   
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:920)   
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:827)   
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641) 
```

我不知道这是否表明存在问题，但我没有注意到在我们的任何服务器上运行的其他应用程序，所以这也可以提供一些提示。我真的不知道该框架代码在做什么（诚然我还没有深入研究它）......也许有人有想法？还是我陷入了死胡同？

### 附录

我的 CPU 基准代码包含一个循环，该循环计算 Math.tan 并使用结果值修改 servlet 实例上的某些字段（那里没有 volatile/同步），然后执行几个原始整数计算。这不是很复杂，我知道，但是……它似乎在图表中显示了一些东西，但是我不确定它显示了什么。我进行字段更新以防止 HotSpot 优化掉我所有宝贵的代码；）

```
 long time2 = System.nanoTime();
    for (int i = 0; i < 5000000; i++) {
        double tan = Math.tan(i);
        if (tan < 0) {
            this.l1++;
        } else {
            this.l2++;
        }
    }

    for (int i = 1; i < 7500; i++) {
        int n = i;
        while (n != 1) {
            this.steps++;
            if (n % 2 == 0) {
                n /= 2;
            } else {
                n = n * 3 + 1;
            }
        }
    }
    // This execution time is written to the client.
    time2 = System.nanoTime() - time2; 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-09-19T20:07:07.817

# 解决方案

增加代码缓存的最大大小：

```
-XX:ReservedCodeCacheSize=256m 
```

# 背景

我们使用的是在 Tomcat 7 和 Java 1.7.0_15 上运行的 ColdFusion 10。我们的症状和你一样。有时，服务器上的响应时间和 CPU 使用率会无缘无故地大幅增加。好像 CPU 变慢了。唯一的解决方案是重新启动 ColdFusion（和 Tomcat）。

## 初步分析

我首先查看内存使用情况和垃圾收集器日志。那里没有任何东西可以解释我们的问题。

我的下一步是每小时安排一次堆转储，并使用 VisualVM 定期执行采样。目标是获取减速前后的数据，以便进行比较。我设法做到了。

抽样中有一个突出的函数：coldfusion.runtime.ConcurrentReferenceHashMap 中的 get()。与之前相比，在经济放缓之后花费了大量时间。我花了一些时间来了解该函数的工作原理，并提出了一个理论，即哈希函数可能存在问题，从而导致了一些巨大的桶。使用堆转储我可以看到最大的桶只包含 6 个元素，所以我放弃了这个理论。

## 代码缓存

当我阅读“Java 性能：权威指南”时，我终于走上了正轨。它有一个关于 JIT 编译器的章节，其中讨论了我以前没有听说过的代码缓存。

## 编译器禁用

在监视执行的编译次数（使用 jstat 监视）和代码缓存的大小（使用 VisualVM 的 Memory Pools 插件监视）时，我看到大小增加到最大大小（在我们的环境中默认为 48 MB - - 默认值因 Java 版本和 Java 编译器而异）。当代码缓存变满时，JIT 编译器被关闭。我读过“CodeCache 已满。编译器已被禁用。” 发生这种情况时应该打印，但我没有看到该消息；也许我们正在使用的版本没有该消息。我知道编译器已关闭，因为执行的编译次数停止增加。

## 继续去优化

JIT 编译器可以取消优化以前编译的函数，这将导致解释器再次执行该函数（除非该函数被改进的编译替换）。可以对未优化的函数进行垃圾收集以释放代码缓存中的空间。

由于某种原因，即使没有编译任何东西来替换它们，函数也会继续被优化。越来越多的内存将在代码缓存中变得可用，但 JIT 编译器没有重新启动。

当我们遇到减速时，我从未启用 -XX:+PrintCompilation，但我很确定当时我会看到 ConcurrentReferenceHashMap.get() 或它所依赖的函数被取消优化。

## 结果

自从我们将代码缓存的最大大小增加到 256 MB 后，我们没有看到任何减速，而且我们还看到了总体性能提升。我们的代码缓存中目前有 110 MB。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-24T10:46:15.583

首先，让我说您在抓住问题的详细*事实*方面做得非常出色；我真的很喜欢你如何清楚地说明你知道什么和你在推测什么——这真的很有帮助。

**编辑 1**上下文与实例更新后的大规模编辑

我们可以排除：

*   GC（这会影响 CPU 基准服务线程和主 CPU 峰值）
*   Quartz 作业（会影响 Tomcat 或 CPU 基准测试）
*   数据库（会影响两个 Tomcat）
*   网络数据包风暴和类似的（会影响两个 Tomcat）

我相信您正在遭受JVM 中某处**延迟的增加。**延迟是线程正在（同步）等待来自某个地方的响应的地方 - 它增加了您的 servlet 响应时间，但对 CPU 没有任何成本。典型的延迟是由以下原因引起的：

*   网络通话，包括
    *   JDBC
    *   EJB 或 RMI
    *   JNDI
    *   域名系统
    *   文件共享
*   磁盘读写
*   穿线
    *   读取（有时写入）队列
    *   `synchronized`方法或块
    *   `futures`
    *   `Thread.join()`
    *   `Object.wait()`
    *   `Thread.sleep()`

**确认问题是延迟**

我建议使用商业分析工具。我喜欢 [JProfiler]（[http://www.ej-technologies.com/products/jprofiler/overview.html](http://www.ej-technologies.com/products/jprofiler/overview.html)，提供 15 天试用版），但StackOverflow 社区也推荐[YourKit 。](https://www.yourkit.com/features/)在本次讨论中，我将使用 JProfiler 术语。

在运行良好时附加到 Tomcat 进程，并感受它在正常条件下的外观。特别是，使用高级 JDBC、JPA、JNDI、JMS、servlet、套接字和文件探测来查看 JDBC、JMS 等操作需要多长时间（[截屏](https://www.ej-technologies.com/blog/2012/01/profiling-jpa-hibernate/)。当服务器出现问题时再次运行并进行比较。希望你会看到到底是什么被放慢了。在下面的产品截图中，你可以看到使用 JPA Probe 的 SQL 计时：

[![JPA 热点](../Images/9aba12c1b160fc11045df335c23e8566.png)](https://i.stack.imgur.com/lHcgo.png)
[（来源：[ej-technologies.com](http://static-aws.ej-technologies.com/SanJPN2pU9HB3g30N03BZsAwd77YzUtpXAsZoe9VUCi.png)）]

但是，探针可能没有隔离问题 - 例如，它可能是一些线程问题。转到应用程序的线程视图；这显示了每个线程的状态运行图，以及它是在 CPU 上执行，在一个 中`Object.wait()`，是在等待进入一个`synchronized`块还是在等待网络 I/O。当您知道哪个或哪些线程出现问题时，转到 CPU 视图，选择线程并使用线程状态选择器立即深入查看昂贵的方法及其调用堆栈。[Screencast](( [screencast](http://blog.ej-technologies.com/2009/07/thread-states-in-cpu-profiling-views.html) )。您将能够深入了解您的应用程序代码。

这是可运行时间的调用堆栈：

![在此处输入图像描述](../Images/008c8d674e5f38645e978a011f84ae73.png)

这是同一个，但显示了网络延迟：

![在此处输入图像描述](../Images/13f4f29bc4a9276d1ee4476b3eabf0cd.png)

当你知道*什么*是阻塞时，希望解决的路径会更清晰。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-01T11:54:15.077

我们遇到了同样的问题，运行在 Java 1.7.0_u101（Oracle 支持的版本之一，因为最新的公共 JDK/JRE 7 是 1.7.0_u79），运行在 G1 垃圾收集器上。我无法确定问题是否出现在其他 Java 7 版本或其他 GC 中。

我们的过程是运行 Liferay Portal 的 Tomcat（我相信 Liferay 的确切版本在这里不感兴趣）。

这是我们观察到的行为：使用 5GB 的 -Xmx，启动后的初始代码缓存池大小约为 40MB。一段时间后，它下降到大约 30MB（这很正常，因为在启动期间有很多代码在运行，这些代码将永远不会再次执行，因此预计会在一段时间后从缓存中逐出）。我们观察到有一些 JIT 活动，因此 JIT 实际上填充了缓存（与我稍后提到的大小相比，似乎相对于整体堆大小的小缓存大小对 JIT 提出了严格的要求，这使得后者相当紧张地驱逐缓存）。然而，过了一段时间，再也没有编译过，JVM 变得非常缓慢。我们不得不时不时地杀死我们的 Tomcat 以恢复足够的性能，

JDK 7 JVM 中似乎有几个错误导致它无法重新启动 JIT（请查看此博客文章：[https](https://blogs.oracle.com/poonam/entry/why_do_i_get_message) ://blogs.oracle.com/poonam/entry/why_do_i_get_message ），即使在 JDK 7 中，在紧急刷新（博客提到 Java 错误 8006952、8012547、8020151 和 8029091）。

这就是为什么手动将代码缓存增加到不太可能发生紧急刷新的级别“修复”问题（我猜 JDK 7 就是这种情况）。

在我们的例子中，我们没有尝试调整代码缓存池的大小，而是选择升级到 Java 8。这似乎已经解决了这个问题。此外，代码缓存现在似乎相当大（启动大小约为 200MB，巡航大小约为 160MB）。正如预期的那样，在闲置一段时间后，缓存池大小会下降，如果某个用户（或机器人或其他任何东西）浏览我们的站点，缓存池会再次恢复，从而导致执行更多代码。

希望以上数据对您有所帮助。

忘了说：我发现这篇文章的阐述、支持数据、推理逻辑和结论非常非常有帮助。谢谢你，真的！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T14:44:09.933

> 有人知道在哪里看吗？

1.  问题可能出在 Tomcat/JVM 之外——您是否有一些批处理作业会启动并像公共数据库一样对共享资源施加压力？

2.  进行线程转储，看看当应用程序响应时间爆炸时 Java 进程在做什么？

3.  如果您使用的是 Linux，请使用**strace 之**类的工具并检查 java 进程在做什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T15:14:35.533

你检查过 JVM GC 时间吗？一些 GC 算法可能会“暂停”应用程序线程并增加响应时间。

您可以使用[jstat](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/share/jstat.html)实用程序来监控垃圾收集统计信息：

```
jstat -gcutil <pid of tomcat> 1000 100 
```

上面的命令将每 1 秒打印 100 次 GC 统计信息。查看 FGC/YGC 列，如果数字不断增加，则说明您的 GC 选项有问题。

如果您想保持较低的响应时间，您可能需要切换到 CMS GC：

```
-XX:+UseConcMarkSweepGC 
```

[您可以在此处](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#available_collectors.selecting)查看更多 GC 选项。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-23T03:03:29.450

在您的应用程序运行缓慢一段时间后会发生什么，它会恢复正常运行吗？如果是这样，那么我会检查此时是否有任何与您的应用程序无关的活动。诸如防病毒扫描或系统/数据库备份之类的东西。

如果没有，那么我建议使用分析器（JProfiler、yourkit 等）运行它。这个工具可以很容易地将你指向你的热点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-22T15:28:52.057

您正在使用 Quartz，它管理定时进程，这似乎发生在特定时间。

发布您的 Quartz 时间表并让我们知道是否符合要求，如果符合，您可以确定哪个内部应用程序进程可能会启动以消耗您的资源。

或者，您的应用程序代码的一部分可能最终被激活并决定将数据加载到内存缓存中。您正在使用休眠；检查对数据库的调用，看看是否有任何重合。*

# c# - 让两个按钮执行相同的功能 - 如何确定哪一个？

> ID：14876448
> 
> 赞同：0
> 
> 时间：2013-02-14T13:58:10.437
> 
> 标签：c#, xaml, button, windows-runtime

我在 MSDN 和这里搜索过，但似乎没有答案。假设我有 XAML 代码：

```
<button Name="button1" Click="ButtonHandler">
    some other stuff
</button>

<button Name="button2" Click="ButtonHandler">
    some other stuff
</button> 
```

在 CS 代码中，您有一个简单的处理程序：

```
private void ButtonHandler(object sender, RoutedEventArgs e)
{

} 
```

我试图弄清楚如何为每个由帧数据动态创建的按钮提供一个处理程序并能够唯一标识自己（可能是名称？）。然后使用Handler能够整理出Unique identifier来为Click事件执行一个动作。

我没有找到太多，但这可能意味着我错过了明显的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T13:59:59.627

您的方法的`sender`参数`ButtonHandler`将是被单击的按钮。从中您可以获得名称或其他标识符。这还不足以满足您的要求吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:01:22.813

像这样：

```
private void ButtonHandler(object sender, RoutedEventArgs e)
{
   if (sender == button1)
   {
      //do stuff for btn 1
   }
   else
   {
      //do stuff for btn 2
   }
} 
```

//编辑：从这里开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:00:52.840

您可以将对象发送者转换为按钮并获取它的所有属性。

这是另一个问题：

[哪个按钮甚至引发了onclick？](https://stackoverflow.com/questions/5916224/which-button-has-raised-onclick-even)

# android - 使用带有 Asp.net 服务器的 GCM 推送通知

> ID：14876457
> 
> 赞同：1
> 
> 时间：2013-02-14T13:58:43.667
> 
> 标签：android, google-cloud-messaging

如果我的设备在服务器发送推送消息时离线或关闭，那么当它上线（活动）时，它应该会收到所有待处理的通知。它没有收到我的应用程序的推送通知。可能是什么原因？？？？请帮我解决这个问题。

我从服务器端（Asp.net 服务器）发布到 GCM 服务器的字符串：

String postdata= "collapse_key=score_update"+i+"&time_to_live=2419200&delay_while_idle=1&data.message=‌​"+ message + "&data.time=" + System.DateTime.Now.ToString() + "®istration_id=" + deviceToken + " ";

也尝试使用 delay_while_idle=0，但面临同样的问题。其中“i”是我附加到折叠键的增量值。

# sql - SELECT 'TABLE_NAME' AS TEMP 是如何工作的？

> ID：14876464
> 
> 赞同：1
> 
> 时间：2013-02-14T13:58:54.563
> 
> 标签：sql, oracle11g

我在我维护的一些代码中发现了这个（工作）语句：

```
SELECT 'TABLE_NAME' AS TEMP
FROM TABLE_NAME
WHERE ROWNUM = 1 
```

虽然我熟悉`AS`表格**列**的使用，例如

```
USE mydatabase;

SELECT day_of_order AS "Date", 
customer As "Client", 
product, 
quantity
FROM orders; 
```

我找不到将*整个表的名称用作列的*文档。

这是如何运作的？这种声明的预期用途是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:11:31.430

看起来他们正在选择表名的文字字符串，并将其放在名为`TEMP`. 它只会返回一行，因为`WHERE ROWNUM = 1`. 他们本可以很容易地做到：

```
SELECT 'TABLE_NAME' AS TEMP FROM DUAL 
```

至于你会用它来做什么......这是一个很好的问题。:)

# mysql - SQL：从另一个表更新一个表

> ID：14876467
> 
> 赞同：4
> 
> 时间：2013-02-14T13:59:17.153
> 
> 标签：mysql, sql, sql-update

我有两个表（带有示例数据）：

**tblZone**

```
[ZoneNo]  [Zone]

-----1------Zone1
-----2------Zone2
-----3------Zone3 
```

**tblPointsClient**

```
[PolygonID] [Zone Name]

-----0------------Zone1
-----0------------Zone1
-----0------------Zone1
-----0------------Zone2
-----0------------Zone2
-----0------------Zone2
-----0------------Zone3
-----0------------Zone3
-----0------------Zone3 
```

基本上，使用 MySQL，我试图通过 tblZone 中区域的 ZoneNo 来更新 tblPointsClient 中的 PolygonID（如果有意义的话）。

因此，当我运行此更新时，它应该将 PolygonID 更改为：

```
[PolygonID] [Zone Name]

-----1------------Zone1
-----1------------Zone1
-----1------------Zone1
-----2------------Zone2
-----2------------Zone2
-----2------------Zone2
-----3------------Zone3
-----3------------Zone3
-----3------------Zone3 
```

我尝试了以下方法：

```
UPDATE tblPointsClient 
SET tblPointsClient.PolygonID = (
   SELECT ZoneNo FROM tblZones WHERE tblPointsClient.ZoneNo = tblZones.Zone
                                ) 
```

但这使得所有的 PolygonID`0`

如果有人可以提供帮助，那将不胜感激！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:00:45.967

```
UPDATE  tblPointsClient a
        INNER JOIN tblZone b
            ON a.`Zone Name` = b.Zone
SET     a.PolygonID = b.ZoneNo 
```

为了获得更快的性能，请在 table和on table上添加一个`INDEX`on 列。`Zone Name``tblPointsClient``Zone``tblZone`

**更新 1**

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/cf9bd/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T14:07:27.940

您可以使用子查询来实现此目标：

```
UPDATE tblPointsClient 
SET PolygonID = (SELECT TOP 1 ZoneNo FROM tblZone WHERE Zone = [Zone Name])
WHERE PolygonID = 0 
```

我创建了只更新行的代码`PolygonID = 0`

# android - 致命例外：HTC Salsa 中的 GLThread 10

> ID：14876468
> 
> 赞同：1
> 
> 时间：2013-02-14T13:59:20.333
> 
> 标签：android, opengl-es, coverflow

嗨朋友们，我在这个应用程序中创建了一个应用程序，我使用封面流来显示书籍图像。我从这边使用opengl coverflow。[获取源代码。](https://github.com/jackfengji/glcoverflow)我在我的应用程序中使用此代码并在所有设备上成功创建了coverflow.witch 工作。我得到的输出看起来像这样。![在此处输入图像描述](../Images/4adb17016e536d03e4bf7f0b805e5271.png)

在我的设备中。我使用下面设备中的应用程序。 **索尼 Xperia mt27I、Kindle Fire、三星 Gallexy Tab 2、Micromax Funbook p275 和 HTC Salsa**

我的问题是我的coverflow应用程序中的所有设备都成功运行。只有**HTC Salsa**我得到了以下错误。

```
02-14 19:14:02.522: E/AndroidRuntime(15302): FATAL EXCEPTION: GLThread 10
02-14 19:14:02.522: E/AndroidRuntime(15302): java.lang.IllegalArgumentException: No config chosen
02-14 19:14:02.522: E/AndroidRuntime(15302):    at android.opengl.GLSurfaceView$BaseConfigChooser.chooseConfig(GLSurfaceView.java:774)
02-14 19:14:02.522: E/AndroidRuntime(15302):    at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:919)
02-14 19:14:02.522: E/AndroidRuntime(15302):    at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1264)
02-14 19:14:02.522: E/AndroidRuntime(15302):    at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1118). 
```

我不知道是什么问题。如果关于应用程序版本，我会检查这个问题。但关于应用程序版本没有问题。

请任何人有任何想法然后给我答案。谢谢。

# mysql - 在perl错误处理中加载数据infile mysql语句

> ID：14876473
> 
> 赞同：1
> 
> 时间：2013-02-14T13:59:37.997
> 
> 标签：mysql, perl

下面是我的 perl 代码，我参考了以下链接[http://www.tol.it/doc/MySQL/chapter6.html](http://www.tol.it/doc/MySQL/chapter6.html)。如果有更好的请留言。使用Mysql；

```
my $db = Mysql->connect($mysqlhost, $mysqlDB, $mysqlUser, $mysqlPassword);
$db->selectdb("$mysqlDB");
my $loadQuery="LOAD DATA INFILE '$filename' INTO TABLE $pageURLTable FIELDS TERMINATED  BY '\\t' LINES TERMINATED BY '\\n'";
print "Executing $loadQuery";       
my $loadresult=$db->query($loadQuery);      
if(!$loadresult){
  print "Error: MySQl Load failed.System error message:$!.";
  return -1;
}
print "Info:".$loadresult->info"; ## this raises error MySQL::Statement info not loadable; 
```

怎么了 ？您能否建议一种更好的编码方式，以便更好地捕获加载数据文件错误？

谢谢，尼特什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:34:32.023

尝试使用 ->do 方法而不是 ->query。确保在您的数据库中启用了 Load Data Inline。如果以上不起作用，您可以使用 system(mysql -e "LOAD DATA INFILE...")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-05T13:50:59.517

我一般使用[DBI 食谱](http://www.perlmonks.org/?node_id=284436)。“执行 sql 语句”我喜欢做类似 $rows = $sth->execute(); 通过最后一条语句给出受影响的行，如果在加载 csv 文件后行 >0，我知道我已经成功地将数据加载到数据库中。

```
my $sth = $dbh->prepare($sql)
  or die "Can't prepare SQL statement: ", $dbh->errstr(), "\n";
$rows = $sth->execute();
if ($rows>0)
{
    print "Loaded $rows rows\n" if ($Debug);
}
else {
    print "Can't execute SQL statement: ", $sth->errstr(), "\n";
} 
```

# java - 如何在不重新编译的情况下覆盖 servlet 的 @WebInitParam？

> ID：14876483
> 
> 赞同：3
> 
> 时间：2013-02-14T13:59:57.590
> 
> 标签：java, jakarta-ee, servlets, servlet-3.0

我有一个带有以下`@WebServlet`注释的 Java Servlet：

```
@WebServlet(urlPatterns={"/GetInfo"},
            initParams={
                @WebInitParam(name="directory.path", value="/appli/PdlInfo")}) 
```

如何在`@WebInitParam`不重新编译 servlet 的情况下更改 的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:41:29.290

在 Servlet 3.0 中，注释只提供默认值。只需使用 web.xml 文件（或部署时容器上可用的工具），您就可以更改它。无论哪种情况，您都需要给 servlet 一个有意义的名称：

```
 @WebServlet(
            name="GetInfo"
            urlPatterns={"/GetInfo"},
            initParams={@WebInitParam(name="directory.path",value="/appli/PdlInfo")}
    ) 
```

对于 web.xml，这里有一个片段：

```
 <servlet>
    <servlet-name>GetInfo</servlet-name>
    <init-param>
        <param-name>directory.path</param-name>
        <param-value>/other/path</param-value>
    </init-param>
  </servlet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:38:36.883

是否可以在不重新编译类的情况下覆盖“directory.path”变量。将一个`web.xml`文件添加到您的`WEB-INF`文件夹中，该文件定义了一个新的 init 参数。

将 更改为`servlet-class`您正在使用的实际 servlet 类。

为了考虑更改，需要重新启动容器，但不需要重新编译/重建。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <servlet>
        <servlet-name>MyServletLinkName</servlet-name>
        <servlet-class>your.path.to.servlet.YourServlet</servlet-class>
        <init-param>
            <param-name>directory.path</param-name>
            <param-value>/new/path</param-value>
        </init-param>
    </servlet>
    <servlet-mapping>
        <servlet-name>MyServletLinkName</servlet-name>
        <url-pattern>/GetInfo</url-pattern>
    </servlet-mapping>
</web-app> 
```

**编辑：**

如果您想使用在应用程序运行时更改的动态参数，您可以使用由线程监视并以 X 秒间隔检查的属性文件。

您可以使用包含文件位置的上下文参数以及上下文初始化的侦听器。监听器创建一个观察者线程来更新一些公共变量，所有的 servlet 都可以访问它。

# ms-access - 我在哪里可以看到 MSysIMEXSpecs 中的“包括第一行作为标题”？

> ID：14876485
> 
> 赞同：0
> 
> 时间：2013-02-14T13:59:59.883
> 
> 标签：ms-access, vba, export-to-excel, ms-access-2010

如这篇文章所述：

[如何使用 SQL 在 Access 中的表中列出字段的名称](https://stackoverflow.com/questions/11548697/how-to-list-fields-name-in-table-in-access-using-sql/11553147#11553147)

您可以使用名为 MSysIMEXSpecs 和 MSysIMEXColumns 的系统表来更改 Access 中的导入或导出定义。

但是，当我使用导出指南时，我可以将**“包括第一行作为标题”**设置为是，但是之后我在 MSysIMEXSpecs 和 MSysIMEXColumns 中找不到该设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:22:47.143

找到另一个解决方案：

当您在 VBA 代码中调用**DoCmd.TransferText acExportDelim**函数时，您只需在代码的 [HasFieldNames] 位置添加一个“True”。

像这样：

DoCmd.TransferText acExportDelim, "ExportDefinitionName", _ "t_Receive_Transactions_LastImport_AllFiles", "Q:\t_Receive_Transactions_LastImport_AllFiles.csv", True

# c# - What's the best way to merge strings?

> ID：14876489
> 
> 赞同：2
> 
> 时间：2013-02-14T14:00:02.647
> 
> 标签：c#, string, coding-style

Let's say I have a foreach-loop with strings like this:

```
String newStr='';
String str='a b c d e';
foreach(String strChar in str.split(' ')) {
  newStr+=strChar+',';
} 
```

the result would be something like: `a,b,c,d,e,` but what I want is `a,b,c,d,e` without the last comma. I normally split the last comma out but this seems ugly and overweight. Is there any lightweight way to do this?

Additional to this question: Is there any easy solution to add an "and" to the constellation that the result is something like: `a, b, c, d and e` for user output?

p.s.: I know that I can use the replace-method in the example but this is not what I'm looking because in most cases you can't use it (for example when you build a sql string).

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-14T14:01:25.090

I would use `string.Join`:

```
string newStr = string.Join(",", str.Split(' ')); 
```

Alternatively, you could add the separator at the *start* of the body of the loop, but *not* on the first time round.

I'd suggest using `StringBuilder` if you want to keep doing this by hand though. In fact, with a `StringBuilder` you could just unconditionally append the separator, and then decrement the length at the end to trim that end.

You also wrote:

> for example when you build a sql string

It's very rarely a good idea to build a SQL string like this. In particular, you should absolutely **not** use strings from user input here - use parameterized SQL instead. Building SQL is typically the domain of ORM code... in which case it's usually better to use an existing ORM than to roll your own :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T15:12:13.183

you're characterizing the problem as appending a comma after every string except the last. Consider characterizing it as prepending a comma before every string but the first. It's an easier problem.

As for your harder version there are several dozen solutions on my blog and in this question.

[Eric Lippert's challenge "comma-quibbling", best answer?](https://stackoverflow.com/questions/788535/eric-lipperts-challenge-comma-quibbling-best-answer)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T14:01:57.673

[`string.Join`](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx) may be your friend:

```
String str='a b c d e';
var newStr = string.Join(",", str.Split(' ')); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T14:05:41.380

Here's how you can do it where you have "and" before the last value.

```
var vals = str.Split(' ');
var ans = vals.Length == 1 ?
          str :
          string.Join(", ", vals.Take(vals.Length - 1))) + ", and " + vals.Last(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T14:02:19.827

```
newStr = String.Join(",", str.split(' ')); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-14T14:04:38.177

You can use `Regex` and replace whitespaces with commas

```
string newst = Regex.Replace(input, " ", ","); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-14T14:02:51.787

First, you should be using a StringBuilder for string manipulations of this sort. Second, it's just an if conditional on the insert.

```
System.Text.StringBuilder newStr = new System.Text.StringBuilder("");
string oldStr = "a b c d e";

foreach(string c in oldStr.Split(' ')) {
    if (newStr.Length > 0) newStr.Append(",");
    newStr.Append(c);
} 
```

# xml - 文本/xml中的Restkit响应

> ID：14876495
> 
> 赞同：4
> 
> 时间：2013-02-14T14:00:24.093
> 
> 标签：xml, restkit, mime-types

我有一个返回 plist 的 WS。
我正在使用 Restkit，我想映射响应。

所以首先我像这样初始化我的 ObjectManager：

```
sharedInstance.manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:ROOT_URL]]; 
```

我接受文本/xml：

```
[[RKObjectManager sharedManager] setAcceptHeaderWithMIMEType:RKMIMETypeTextXML]; 
```

我提出了我的要求：

```
NSMutableURLRequest *request = [[RKObjectManager sharedManager] requestWithObject:nil method:RKRequestMethodPOST path:@"/foo/foo" parameters:nil];
RKManagedObjectRequestOperation *operation = [[RKObjectManager sharedManager] managedObjectRequestOperationWithRequest:request managedObjectContext:[BddManager sharedInstance].manager.managedObjectStore.mainQueueManagedObjectContext success:^(RKObjectRequestOperation *operation, RKMappingResult *result) {
    NSLog(@"Loading mapping result: %d", result.count);
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    NSLog(@"Fail!");
}];
[operation start]; 
```

最后我得到这个错误：

```
NSLocalizedDescription=Expected content type {(
"application/x-www-form-urlencoded",
"application/json"
)}, got text/xml, 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T17:41:36.683

RestKit 0.20.0rc1 在主存储库中不包含 XML 序列化程序，但您可以在此处找到一个：[RKXMLReaderSerialization](https://github.com/RestKit/RKXMLReaderSerialization)。

通过 cocoapods 安装：（或将源文件添加到您的项目中）

```
pod 'RKXMLReaderSerialization', :git => 'https://github.com/RestKit/RKXMLReaderSerialization.git', :branch => 'master' 
```

导入初始化 RestKit 的标头。

```
#import "RKXMLReaderSerialization.h" 
```

最后，向 RestKit 注册序列化类。在初始化对象管理器之后和设置接受标头之前插入它。

```
sharedInstance.manager = [RKObjectManager managerWithBaseURL:[NSURL URLWithString:ROOT_URL]];
[RKMIMETypeSerialization registerClass:[RKXMLReaderSerialization class] forMIMEType:@"application/xml"];
[[RKObjectManager sharedManager] setAcceptHeaderWithMIMEType:RKMIMETypeTextXML]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T21:40:08.587

1) 您需要告诉 RKObjectManager 如何处理加载过程后正在序列化的数据。

```
[objectManager setRequestSerializationMIMEType:RKMIMETypeTextXML]; 
```

**编辑：**

刚刚看到您在谈论一个请求，但是您使用通过 POST 将对象发送到您的 WS 的方法。

要从服务器获取对象，请使用 RestKit 示例应用程序中提供的以下方法。

```
[[RKObjectManager sharedManager] getObjectsAtPath:@"yourPath" parameters:nil success:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    // Success
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    // Error
    RKLogError(@"Load failed with error: %@", error);
}]; 
```

# javascript - 如何在不修改全局范围的情况下执行一些 javascript？

> ID：14876496
> 
> 赞同：1
> 
> 时间：2013-02-14T14:00:24.873
> 
> 标签：javascript

我想调用一些出于自身目的需要定义一些变量的javascript代码，但我想将其隔离，以免污染全局范围。所以我将所有内容包装在一个匿名函数对象中，立即调用它，并且不将它或结果分配给任何东西：

```
function() {
    var myInnerHelperFunction = function(object) {
        //do some work
    };

    var anObject = ...;

    myInnerHelperFunction(anObject);
}(); 
```

但我得到一个语法错误：`SyntaxError: Unexpected token (`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T14:01:47.830

您不能调用函数声明。你需要把它变成一个表达式。实现这一点的最常见技术是将函数包装在括号中：

```
(function() {
    var myInnerHelperFunction = function(object) {
        //do some work
    };

    var anObject = ...;

    myInnerHelperFunction(anObject);
}()); 
```

但是，请注意，任何一元运算符也可以工作（任何导致构造被[解析为表达式](http://es5.github.com/#A.3)，而不是声明）：

```
~function example() {
    console.log("example");
}(); 
```

为了进一步扩展这一点，您的代码实际上会引发语法错误，因为您的函数缺少标识符。“程序”只能包含语句和函数声明。因此，您的代码必须被解析为函数声明。函数声明必须有标识符。你的没有，所以你的程序是无效的。

当您在函数周围加上括号时，解析树是不同的。括号被解析为“表达式语句”，它可以包含一个表达式。由于函数可以被解析为表达式或声明，取决于它们出现的上下文，这是合法的，并且函数被解析为表达式。由于可以立即调用函数表达式，因此这是可行的。

# winforms - VS 2010 安装项目有条件地显示表单

> ID：14876503
> 
> 赞同：0
> 
> 时间：2013-02-14T14:00:49.427
> 
> 标签：winforms, visual-studio-2010, installation, conditional-statements, setup-project

我正在为我的应用程序创建一个设置。该应用程序由一个`main application`和一个`AddIn to Outlook`。如果应该安装 Outlook 插件，我希望用户能够通过复选框进行选择。我的问题是，如果未安装 Outlook，我不想显示/启用该复选框。我怎样才能做到这一点？我可以`install dialog`根据一些代码有条件地显示，我会在哪里检查是否安装了 Outlook？或者我可以根据某些代码禁用此复选框吗？请帮忙，非常感谢！问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T10:50:40.363

首先，要确定是否安装了 Outlook，您需要在 MSI 包中定义搜索。

然后，要根据条件显示对话框，您需要编辑周围对话框中几个按钮（返回和下一步）的已发布事件。

要在对话框中有条件地显示控件，您需要使用控件条件。

在 VS 安装项目中，所有这些都是不可能的。如果您正在寻找更好的免费替代品，我建议您切换到 WiX ( [http://wix.sourceforge.net/ )，它也可以与 VS 集成。](http://wix.sourceforge.net/)我会从 VS Setup 项目切换，因为 Microsoft 决定停止将它包含在 VS 2012 中，所以你将被迫停止使用它。

如果你现在不想去 WiX，在 VS 中做你需要做的唯一方法是添加一个构建后事件来改变 MSI 表并[插入你想要的更改](http://msdn.microsoft.com/en-us/library/aa368568%28VS.85%29.aspx)，即搜索，控制条件， ETC...

# ios - 在 xCode for iOS 上编译 Speex

> ID：14876504
> 
> 赞同：4
> 
> 时间：2013-02-14T14:00:49.973
> 
> 标签：ios, xcode, speex

我正在尝试为 iPhone 应用程序编译和使用 Speex 编解码器。我使用了几个教程： [http ://codeforfun.wordpress.com/2010/04/29/compile-speex-for-iphone/](http://codeforfun.wordpress.com/2010/04/29/compile-speex-for-iphone/)

还尝试用这个建议编译它： [Cross -Compiling speex library for ios](https://stackoverflow.com/questions/12033437/cross-compiling-speex-library-for-ios)

并将“SDKROOT”更改为“iphoneos”

所有这些都让我遇到了一个问题，即我无法真正创建二进制文件。我想我什么都试过了！我认为问题在于缺少makefile。我已将原始 Makefile.in 更改为“makefile”，现在 xCode 可以找到它，但它仍然无法正常工作。

我得到的错误是：d：警告：找不到选项'-L ... / CSource / libspeex / .libs'的目录架构armv7s的未定义符号：“_speex_nb_mode”，引用自：MainViewController中的-[MainViewController viewDidLoad]。 ○

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-26T21:07:51.350

我还没有测试过，但这里是为 iOS 预编译的 Speex 库：[https ://github.com/iosdevzone/IDZPrecompiledSpeex](https://github.com/iosdevzone/IDZPrecompiledSpeex)

# java - 解析 Hibernate Man.hbm.xml 时出错

> ID：14876506
> 
> 赞同：2
> 
> 时间：2013-02-14T14:01:13.760
> 
> 标签：java, hibernate

我无法运行我的休眠应用程序。我不断收到此错误：

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/C:/Users/MAG/.m2/repository/org/slf4j/slf4j-jdk14/1.7.2/slf4j-jdk14-1.7.2.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/C:/Users/MAG/.m2/repository/org/slf4j/slf4j-log4j12/1.5.8/slf4j-log4j12-1.5.8.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.
SLF4J: Actual binding is of type [org.slf4j.impl.JDK14LoggerFactory]
2013-02-14 14:49:05 org.hibernate.cfg.Environment <clinit>
INFO: Hibernate 3.3.0.SP1
2013-02-14 14:49:05 org.hibernate.cfg.Environment <clinit>
INFO: hibernate.properties not found
2013-02-14 14:49:05 org.hibernate.cfg.Environment buildBytecodeProvider
INFO: Bytecode provider name : javassist
2013-02-14 14:49:05 org.hibernate.cfg.Environment <clinit>
INFO: using JDK 1.4 java.sql.Timestamp handling
2013-02-14 14:49:05 org.hibernate.cfg.Configuration configure
INFO: configuring from resource: /hibernate.cfg.xml
2013-02-14 14:49:05 org.hibernate.cfg.Configuration getConfigurationInputStream
INFO: Configuration resource: /hibernate.cfg.xml
2013-02-14 14:49:05 org.hibernate.cfg.Configuration addResource
INFO: Reading mappings from resource : model/man/Man.hbm.xml
2013-02-14 14:49:06 org.hibernate.util.XMLHelper$ErrorLogger error
SEVERE: Error parsing XML: XML InputStream(25) Attribute "name" must be declared for element type "many-to-many".
2013-02-14 14:49:06 org.hibernate.util.XMLHelper$ErrorLogger error
SEVERE: Error parsing XML: XML InputStream(33) Attribute "name" must be declared for element type "many-to-many".
2013-02-14 14:49:06 org.hibernate.util.XMLHelper$ErrorLogger error
SEVERE: Error parsing XML: XML InputStream(38) The content of element type "set" must match "(meta*,subselect?,cache?,synchronize*,comment?,key,(element|one-to-many|many-to-many|composite-element|many-to-any),loader?,sql-insert?,sql-update?,sql-delete?,sql-delete-all?,filter*)". 
```

我的程序的想法是： **Man**是**Owner**和**Renter**的超级类。
业主可以拥有多个单位，但单位可以拥有一个业主。
Renter 可以有许多 RenterBills，但 RenterBill 可以有一个 Renter。
承租人可以有很多单位，单位可以有很多承租人。

我的 Man.hbm.xml：

```
<class name="Man" table="MEN">
    <id name="id" column="MAN_ID">
        <generator class="native" />
    </id>
    <property name="pesel" column="MAN_PESEL" />
    <property name="idNumber" column="MAN_ID_NUMBER" />
    <property name="email" column="MAN_EMAIL" />
    <property name="name" column="MAN_NAME" />
    <property name="surname" column="MAN_SURNAME" />
    <property name="telephoneNumber" column="MAN_TELEPHONE_NUMBER" />
    <many-to-one name="address" column="ADDRESS_ID" not-null="true" />

    <joined-subclass name="Owner" table="OWNERS">
        <key column="MAN_ID" />
        <property name="password" column="OWNER_PASSWORD" not-null="true" />
        <property name="seed" column="OWNER_SEED" not-null="true" />
        <set name="flats" table="OWNER_FLATS">
            <key column="MAN_ID" />
            <many-to-many name="flats" column="FLAT_ID" class="Flat" />
        </set>
    </joined-subclass>

    <joined-subclass name="Renter" table="RENTERS">
        <key column="MAN_ID" />
        <set name="flats" table="RENTER_FLATS">
            <key column="MAN_ID" />
            <many-to-many name="flats" column="FLAT_ID" class="Flat" />
        </set>
        <set name="bills" table="RENTER_BILLS">
            <key column="MAN_ID" />
            <many-to-one name="bills" column="RENTER_BILL_ID" class="RenterBill" />
        </set>
    </joined-subclass>
</class> 
```

Java 类：Man.java

```
package model.man;
import model.addresses.Address;
public abstract class Man {

    private int id;
    private String pesel;
    private String idNumber;
    private String email;
    private String name;
    private String surname;
    private String telephoneNumber;
    private Address address;

       /* getters setters */
} 
```

所有者.java

```
package model.man;

import java.util.Iterator;
import java.util.Set;

import model.flat.Flat;

public class Owner extends Man implements Iterable<Flat> {

    private String password;
    private String seed;
    private Set<Flat> flats;

    /* getters setters */
} 
```

出租人.java

```
package model.man;

import java.util.HashSet;
import java.util.Set;

import model.bills.RenterBill;
import model.flat.Flat;

public class Renter extends Man {

    private Set<Flat> flats = new HashSet<Flat>();
    private Set<RenterBill> bills = new HashSet<RenterBill>();

                /* getters setters */
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:08:21.940

```
SEVERE: Error parsing XML: XML InputStream(25) Attribute "name" must be declared for element type "many-to-many".
2013-02-14 14:49:06 org.hibernate.util.XMLHelper$ErrorLogger error
SEVERE: Error parsing XML: XML InputStream(33) Attribute "name" must be declared for element type "many-to-many".
2013-02-14 14:49:06 org.hibernate.util.XMLHelper$ErrorLogger error
SEVERE: Error parsing XML: XML InputStream(38) The content of element type "set" must match "(meta*,subselect?,cache?,synchronize*,comment?,key,(element|one-to-many|many-to-many|composite-element|many-to-any),loader?,sql-insert?,sql-update?,sql-delete?,sql-delete-all?,filter*)". 
```

尝试从多对多标签中删除“名称”属性。

**更新**

您也有一个映射为多对一的集合。这通常在 Java POJO 中显示为引用类的单个实例。您可能打算在那里使用一对多标签。

# android - 我应该为具有多个屏幕的应用程序使用多个活动吗？

> ID：14876508
> 
> 赞同：0
> 
> 时间：2013-02-14T14:01:18.947
> 
> 标签：android

我是 Android 新手，我正在构建一个简单的应用程序。它由一个具有三个屏幕的客户端组成。在第一个屏幕中，提示用户输入 IP 以连接到服务器（我使用 EditText 和按钮）。如果成功建立连接，将从服务器检索一些数据，客户端将在空白屏幕上显示数据（我使用 TextView）。这将是第二个屏幕。然后，用户可以向服务器询问有关从服务器检索到的任何数据的详细信息，这将是第三个屏幕（我再次使用 TextView）。

问题是我不知道最好的方法是什么。我目前有一个活动和一个 XML 文件，其中包含视图的所有组件（EditText、按钮、TextView）。到目前为止，我一直在`setVisibility(View.GONE);`根据用户所在的屏幕隐藏某些组件。（例如，在第一个屏幕中，我必须隐藏两个 TextView）。

我面临的一个问题是，当我将手机放在水平位置时，我隐藏的组件再次出现。我不知道隐藏视图是否适合我的目的。

我想也许我应该使用不止一项活动，不是吗？

我非常感谢您可以帮助我构建我的第一个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:22:19.957

似乎这种情况出现了很多。`Activity`Android 会在配置更改时销毁并重新创建。屏幕旋转是方向的一部分。为了避免这种情况，Activity 负责保留状态。为此给出的机制是`onCreate`和`onSaveInstanceState`。在您的示例中，您可以执行以下操作：

```
int uiPhase = 1;

@Override
void onCreate( Bundle data ) {
    uiPhase = data.getInt( "uiPhase", 1 );
    // inflate layout
    setPhase( uiPhase );
}

// invoke the following each time your screen changes
void setPhase( int newPhase ) {
    uiPhase = newPhase;
    switch( uiPhase ) {
        case 1: // show UI elements for first screen, hide others
            break;
        case 2: // show UI elements for second screen, hide others
            break;
        case 3: // show UI elements for third screen, hide others
            break;
    }      
}

@Override
void onSaveInstanceState( Bundle data ) {
    data.put( "uiPhase", uiPhase );
} 
```

我不想把上面的模式复杂化太多，但是设置可见性的一个好方法如下：

```
phase1view.setVisibility( uiPhase == 1 ? View.VISIBLE : View.GONE );
phase2view.setVisibility( uiPhase == 2 ? View.VISIBLE : View.GONE );
phase3view.setVisibility( uiPhase == 3 ? View.VISIBLE : View.GONE ); 
```

这将`setPhase`方法中的重复拉到了一起。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:23:30.173

我肯定会建议将您的应用程序拆分为多个活动/片段。取决于每个屏幕的逻辑有多大，你会很高兴你后来这样做了，因为每个活动只有一个责任。

例如，查看您的邮件应用程序。您的 List Activity 向您显示所有邮件，然后当您选择一个时，它会启动 Detail Activity 向您显示邮件的内容。每个 Activity 只负责一件事，这使得每个 Activity 更易于编写和维护。

它还简化了您的布局定义，因为每个定义只包含相关部分。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T14:04:42.420

将按钮可见性设置为[GONE](http://developer.android.com/reference/android/view/View.html#GONE)（按钮将被完全“移除”——按钮空间将可用于其他小部件）或 [INVISIBLE](http://developer.android.com/reference/android/view/View.html#INVISIBLE)（按钮将变为“透明”——其空间将不可用于其他小部件）：

使用代替

```
setVisibility(View.GONE) 
```

改成

```
setVisibility(View.INVISIBLE) and try 
```

# java - java.sql.BatchUpdateException：如果请求太大，则通信链接失败

> ID：14876523
> 
> 赞同：0
> 
> 时间：2013-02-14T14:01:59.343
> 
> 标签：java, mysql

当我的 Java 应用程序尝试执行一个非常大的更新（大约 100K 行）时，它会收到以下错误：

```
connection 1 failed: java.sql.BatchUpdateException: Communications link failure

Last packet sent to the server was 2008 ms ago. 
```

如何确定 MySQL 对客户端施加的限制？限制是基于行数还是基于字节？

以及如何确定批量更新的大小？

# image - 防止ImageView中的Image在拖出RelativeLayout时被调整大小

> ID：14876529
> 
> 赞同：0
> 
> 时间：2013-02-14T14:02:16.087
> 
> 标签：image, resize, imageview

我没有在其他主题中找到我的问题的答案。

我有一个带有背景可绘制对象的 ImageView。这个 ImageView 上有一个 onTouchListener，可以拖动它。我现在想向这个视图添加一个 ImageResource（连同一个填充）。图像应始终位于（方形）ImageView 的中间。现在的问题是：如果我将整个 ImageView 拖出显示器，则 ImageView 中的 Image 开始缩小/调整大小。当我将它拖回窗口时，它开始再次增长到允许的大小（因为有填充）。

拖出窗口时，如何防止调整此图像的大小？

```
RelativeLayout layout = (RelativeLayout) findViewById(R.id.layout);
ImageView i = new ImageView(this);
i.setPadding(10);
i.setImageResource(R.drawable.image);
i.setBackgroundDrawable(getResources().getDrawable(R.drawable.bg));
i.setPositionAndSize(0, 0); // creates layout params and positions
                            // it with margins in relative layout
i.setOnTouchListener(touch);
layout.addView(i); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T11:43:46.070

如果此相对布局在 layout_width 或 height 上具有 WrapContent 属性，则这些属性将动态更改。

添加视图时，您正在修改其内容，等等这些属性。

您需要像这样将布局属性设置为此 imageView。你要设置的positionAndSize，必须在layout params的属性中设置：

```
 RelativeLayout.LayoutParams lyp = new  RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,RelativeLayout.LayoutParams.WRAP_CONTENT);
ImageView i = new ImageView(this);
            (the properties you want the parent of the view (layout) to receive must be setted here in "lyp"). 
i.setLayoutParams(lyp);
layout.addView(i,lyp); 
```

请记住，如果您在相对布局上添加某些内容，则这些属性是必需的。

相对布局旨在使内容适合 FIXED 高度和宽度，因此请尝试在布局中修复这些属性。

希望有帮助！！

# wordpress - Wordpress 复选框进入自定义注册表单

> ID：14876530
> 
> 赞同：0
> 
> 时间：2013-02-14T14:02:18.220
> 
> 标签：wordpress, checkbox, registration

我有自己的自定义注册表单，它允许人们注册，除了一个小问题：复选框不做任何事情。当我检查数据库中的 meta_key 字段时，它们不存在。其他一切都还可以。

当勾选复选框时，我试图将“comps”和“newsletter”添加到 meta_key 字段（值为 1）。我的表格如下所示：

```
<form id="form" action="<?php echo site_url('wp-login.php?action=register', 'login_post') ?>" method="post">
<fieldset>
    <label for="user-login">Username<br />
    <input type="text" name="user_login" id="user-login" class="input" value="" size="20" tabindex="10" />

    <label for="user-email">Email address<br />
    <input type="text" name="user_email" id="user-email" class="input" value="" size="25" tabindex="20" />

    <label for="comps">Competitions<br />
    <input type="checkbox" name="comps" id="comps" class="" value="1" tabindex="30" /></label>                        

    <label for="newsletter">Newsletter<br />
    <input type="checkbox" name="newsletter" id="newsletter" class="" value="1" tabindex="40" /></label>                        

    <input type="hidden" name="redirect_to" value="<?php echo get_settings('home'); ?>/registration-succeeded"/>

    <input type="submit" name="wp-submit" class="button" value="Register Me!" tabindex="100" />

</fieldset> 
```

我需要在我的主题的functions.php中做些什么来让这些meta_fields在用户注册时（当然当复选框被勾选时）进入数据库？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:49:07.530

我已经解决了。只需要注册这些额外的字段以供元数据使用：

```
function at_register_custom_fields( $user_id, $password = "", $meta = array() )  {

// custom fields
$fields = array(
    'comps',
    'newsletter',
);
    // cleans and updates the custom fields
foreach ( $fields as $field ) {
    $value = stripslashes( trim( $_POST[$field] ) ) ;
    if ( ! empty( $value ) ) {
     update_user_meta( $user_id, $field, $value );
    }
  }
}
add_action( 'user_register', 'at_register_custom_fields' ); 
```

# facebook-graph-api - Graph Api > 搜索帖子如何工作？

> ID：14876531
> 
> 赞同：0
> 
> 时间：2013-02-14T14:02:19.190
> 
> 标签：facebook-graph-api, search

我有几个关于 Graph Api > Search Posts 功能（[http://developers.facebook.com/docs/reference/api/search/](http://developers.facebook.com/docs/reference/api/search/)）的问题：

1.  QUERY 参数接受哪些运算符？通常搜索引擎接受 AND、OR、完全匹配（“红苹果”）和 NOT/排除。我对这些运营商如何为 Facebook 运作感到困惑。

2.  它究竟搜索了什么？有时我会看到与搜索查询完全不匹配的结果。它是搜索帖子的消息，还是搜索帖子的评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:53:10.470

查询参数只接受字符串而不接受运算符。您也应该指定一个`type`，以便您可以在用户、帖子等之间进行过滤。取决于您要搜索的内容，您将需要一个有效的用户 access_token。

如果您正在搜索帖子，它只会在帖子本身中搜索，而不是在评论中搜索。

# jquery - JQGrid 计算组中的行数

> ID：14876536
> 
> 赞同：1
> 
> 时间：2013-02-14T14:02:27.853
> 
> 标签：jquery, jqgrid

我有一个 JQGrid，它显示按特定列分组的一些数据。我希望在组名旁边显示行数。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:51:11.143

您可以使用[GroupText](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3agrouping&s%5B%5D=grouptext)字段来指示计数：

> 一个数组，用于定义将在网格中显示的组级别的分组标题文本。默认情况下，如果定义了值 if {0}，则表示将显示组值名称。可以指定另一个值 {1}，这意味着也将显示该组的总数。可以在此处设置任何有效的 html 内容。

例子：

```
groupingView: {
     groupField:['GroupField'],
     groupText: ['<b>{0} - {1} Item(s)</b>']
} 
```

# html - 如何在中间设置文本（水平和垂直）？

> ID：14876537
> 
> 赞同：0
> 
> 时间：2013-02-14T14:02:31.273
> 
> 标签：html, css

![在此处输入图像描述](../Images/0a171edb69edb2671061821c857d77bc.png)

这是我的 html 和 css

```
<div id="name">
<p>TEST TEST TEXT</p>
</div>

#name{
  width: 200px;
  height: 50px;
  background: #019fde;
  border-radius: 10px;
} 
```

如何在中间设置文本（水平和垂直）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:05:25.790

如果它只是一条线，您可以使用`line-height`. 设置`line-height`为与元素相同的高度（在本例中为 50px），您的文本将位于中间。

要居中对齐文本，只需使用`text-align:center;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:10:50.590

这将做到：

```
 text-align: center;
  display: table-cell;
  vertical-align: middle; 
```

[http://jsfiddle.net/Z8S8H/](http://jsfiddle.net/Z8S8H/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:09:34.983

您也不必费心将`p`a包裹起来`div`，只需`p`在顶部和底部为标签提供一致的填充，这将在设置`text-align:center`.

# javascript - 替换 Javascript 中正则表达式匹配的结果

> ID：14876539
> 
> 赞同：0
> 
> 时间：2013-02-14T14:02:37.483
> 
> 标签：javascript, regex, replace, match

我阅读了很多相关的问题，但我找不到我需要的东西。这是我的问题：

```
inputStr = "<a b c> <c f a> <h a d>"; 
```

我只想抓住每个元素的第一个元素`<...>`

```
OutputStr = "a c h"; 
```

我尝试了类似的东西

```
mychar.replace(/<[a-z](.*)>/g, '$1'); 
```

但`$1`唯一给了我`<a b c>`

有人有想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T14:05:02.813

你的正则表达式是错误的。您需要匹配第一个字母，但不是匹配它之后的所有内容。并且不要忘记`?`当前情况下的惰性匹配：

```
"<a b c> <c f a> <h a d>".replace(/<([a-z]).*?>/g, "$1");  // "a c h" 
```

**参考：** [https ://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:10:03.310

```
inputStr = "<a b c> <c f a> <h a d>";

OutputStr = inputStr.replace(/<([a-z]).*?>/g, "$1"); 
```

# android - 模拟器找不到缩略图文件

> ID：14876540
> 
> 赞同：0
> 
> 时间：2013-02-14T14:02:38.467
> 
> 标签：android, gallery, jpeg, thumbnails, image

并感谢您的帮助。

我在我的模拟器上推送了一些 Jpg，我从 Media Provider 工具运行 SDCard Scan，所以推送的图片在图库中正确显示。

我有一个查询“MediaStore.Images.Thumbnails”的活动

光标正常工作，并找到缩略图的路径。

但是当我运行应用程序时，Logcat 向我显示他实际上无法打开路径中的文件：

```
02-14 13:45:08.015: E/BitmapFactory(931): Unable to decode stream:    java.io.FileNotFoundException: /mnt/sdcard/DCIM/.thumbnails/1360429937982.jpg: open failed:    ENOENT (No such file or directory)
02-14 13:45:08.046: E/BitmapFactory(931): Unable to decode stream: java.io.FileNotFoundException: /mnt/sdcard/DCIM/.thumbnails/1360503332805.jpg: open failed: ENOENT (No such file or directory)
02-14 13:45:08.076: E/BitmapFactory(931): Unable to decode stream: java.io.FileNotFoundException: /mnt/sdcard/DCIM/.thumbnails/1360525871295.jpg: open failed:   ENOENT (No such file or directory)
02-14 13:45:08.095: E/BitmapFactory(931): Unable to decode stream: java.io.FileNotFoundException: /mnt/sdcard/DCIM/.thumbnails/1360525870839.jpg: open failed: ENOENT (No such file or directory)
02-14 13:45:08.135: E/BitmapFactory(931): Unable to decode stream: java.io.FileNotFoundException: /mnt/sdcard/DCIM/.thumbnails/1360525870385.jpg: open failed: ENOENT (No such file or directory) 
```

非常感谢您的帮助非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:32:49.423

好的，问题解决了，当我重新启动模拟器时，我要求“擦除用户数据”；而不是再次从媒体提供程序工具运行 DCard Scan，目前一切正常。

不管怎么说，还是要谢谢你！！！

# less - SCSS 规则继承与 LESS 的比较

> ID：14876545
> 
> 赞同：1
> 
> 时间：2013-02-14T14:02:53.410
> 
> 标签：less, sass

我习惯使用 LESS，但我目前正在使用 SCSS。

在 Less 中，我可以执行以下操作：

```
.sidebar_styles { background: red; border: 1px solid blue; }
aside[role="complementary"] { .sidebar_styles; } 
```

SCSS 等价物是：

```
.sidebar_styles { background: red; border: 1px solid blue; }
aside[role="complementary"] { @extend .sidebar_styles; } 
```

我问，因为我正在使用 Foundation 框架，并且我试图不在 html 中使用表示类。我注意到 Chrome 运行缓慢并打开了检查器。某些元素的匹配 CSS 规则非常庞大。

以下是 Chrome 挂起之前我可以从其中一个元素复制的大约 5%。 `.row.collapse .column, body.full_width div[role="main"] form .row.collapse .column, body.two_columns div[role="main"] form .row.collapse .column, body.homepage div[role="main"] .hero_container form .row.collapse .column, .row form .collapse.top_bar .column, .top_bar form .collapse.top_bar .column, header[role="banner"] form .collapse.top_bar .column, footer[role="contentinfo"] form .collapse.top_bar .column, body.full_width div[role="main"] form .collapse.top_bar .column, body.two_columns div[role="main"]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T06:46:19.047

`@extend`将 css 选择器组合在逗号分隔列表中。如果您在 之后添加其他规则`@extend`，它将保留这些规则作为它自己的选择器。

**scss**

```
.sidebar_styles {
    background: red;
    border: 1px solid blue;
}

aside[role="complementary"] {
    @extend .sidebar_styles;
    color: black;
} 
```

**css 输出**

```
.sidebar_styles, aside[role="complementary"] {
    background: red;
    border: 1px solid blue;
}

aside[role="complementary"] {
    color: black;
} 
```

如果您想保持规则分开，那么您可以使用 mixin 并将其包含在规则中。

**scss**

```
@mixin test {
    background: red;
    border: 1px solid blue;
}

.sidebar_styles {
    @include test;
}

aside[role="complementary"] {
    @include test;
} 
```

**css 输出**

```
.sidebar_styles {
    background: red;
    border: 1px solid blue;
}

aside[role="complementary"] {
    background: red;
    border: 1px solid blue;
} 
```

# mongodb - 在 MongoDB 中，如何根据嵌入对象中的属性对文档进行排序？

> ID：14876547
> 
> 赞同：4
> 
> 时间：2013-02-14T14:03:01.323
> 
> 标签：mongodb, sorting

在我的产品集合中，我可以找到在“GB”区域发布的所有产品：

```
> db.products.find({'release.region':'GB'}).pretty();

{
        "_id" : "foo",
        "release" : [
                {
                        "region" : "GB",
                        "date" : ISODate("2012-03-01T00:00:00Z")
                },
                {
                        "region" : "US",
                        "date" : ISODate("2012-09-01T00:00:00Z")
                }
        ]
}
{
        "_id" : "bar",
        "release" : [
                {
                        "region" : "FR",
                        "date" : ISODate("2010-07-01T00:00:00Z")
                },
                {
                        "region" : "GB",
                        "date" : ISODate("2012-05-01T00:00:00Z")
                }
        ]
}
{
        "_id" : "baz",
        "release" : [
                {
                        "region" : "GB",
                        "date" : ISODate("2011-05-01T00:00:00Z")
                },
                {
                        "region" : "NZ",
                        "date" : ISODate("2012-02-01T00:00:00Z")
                }
        ]
} 
```

如何使用 GB 发布日期按日期升序对结果进行排序？(例如顺序应该是baz, foo, bar)

请注意，我无法在客户端进行排序。

或者，我怎样才能更好地组织数据以使这成为可能。

编辑：我更改了“bar”的 FR 发布日期，以说明 vivek 的解决方案不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T13:44:53.453

因为除了来自“GB”区域的元素之外你不需要`release`元素，你可以这样做`aggregate`：

```
db.products.aggregate(
    // Filter the docs to just those containing the 'GB' region
    { $match: {'release.region': 'GB'}},
    // Duplicate the docs, one per release element
    { $unwind: '$release'},
    // Filter the resulting docs to just include the ones from the 'GB' region
    { $match: {'release.region': 'GB'}},
    // Sort by release date
    { $sort: {'release.date': 1}}) 
```

输出：

```
{
  "result": [
    {
      "_id": "baz",
      "release": {
        "region": "GB",
        "date": ISODate("20110501T00:00:00Z")
      }
    },
    {
      "_id": "foo",
      "release": {
        "region": "GB",
        "date": ISODate("20120301T00:00:00Z")
      }
    },
    {
      "_id": "bar",
      "release": {
        "region": "GB",
        "date": ISODate("20120501T00:00:00Z")
      }
    }
  ],
  "ok": 1
} 
```

# java - Apache poi - 千位分隔符

> ID：14876548
> 
> 赞同：6
> 
> 时间：2013-02-14T14:03:05.717
> 
> 标签：java, format, apache-poi

您知道如何设置千位分隔符并设置像这样格式化的值吗？`403.000`

我将 apache-poi 3.8 与 Java 一起使用。我用谷歌搜索了很多，但我没有找到答案。我不能使用字符串值，因为我的公式没有以这种方式正确评估。有什么帮助吗？谢谢！

我试过这样的事情：

```
cellStyle.setDataFormat(creationHelper.createDataFormat().getFormat("#.##0")); 
```

但它不起作用..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T16:44:30.690

You can do this:

```
 final HSSFCell dataCell = dataRow.createCell(1);
 dataCell.getCellStyle().setDataFormat(HSSFDataFormat.getBuiltinFormat("#,##0"));
 dataCell.setCellValue(123456); 
```

You'll have a cell with the number display like this: 123.456 The thousand separator depends of the locale and perhaps of the language of excel.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T18:15:33.953

为可能有同样问题的其他人回答我自己的问题。

找到它：格式必须是：`"#,##0"`

`dataCell.getCellStyle().setDataFormat(HSSFDataFormat.getBuiltinFormat("#,##0"));`

# ios - 在节的最后一行添加一个表格视图单元格

> ID：14876550
> 
> 赞同：2
> 
> 时间：2013-02-14T14:03:13.117
> 
> 标签：ios, uitableview, nsfetchedresultscontroller

我正在尝试在部分的最后一行添加一个表格视图单元格。我在网上搜索，找不到适合我的问题的解决方案。

我的应用程序基于 Master-Detail 应用程序。

当我添加一个新单元格时，我希望位于最后一行，但它总是发生在该部分的第一行。

问题是由于以下方法，因为它具有已定义行的 newIndexPath，通常它位于第 0 行。我无法追踪分配 newIndexPath 的来源并调用此方法。

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
   atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
  newIndexPath:(NSIndexPath *)newIndexPath 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:16:22.740

这对我插入一个部分来说很好：

```
[self.tableView insertRowsAtIndexPath:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:[mydataarray count] inSection:[SECTION_NUMBER]] withRowAnimation:..] 
```

所以 count 指定了我想把它放在哪个部分，当然 SECTION_NUMBER 是你的部分。抱歉，如果这不是您要找的。

# drupal - Drupal 7 LDAP 授权不会将 ldap 组映射到 drupal 角色

> ID：14876556
> 
> 赞同：2
> 
> 时间：2013-02-14T14:03:31.520
> 
> 标签：drupal, ldap, authorization, roles, usergroups

在我们公司，我们最近从 Drupal 6 迁移到了 Drupal 7，我在配置 LDAP 时遇到了麻烦。身份验证工作正常，但 ldap 组未创建为 drupal 角色。

使用 Drupal 6 和 LDAP 集成，配置很容易：选中“组作为 LDAP 条目存在，其中多值属性包含成员的 CN”+ 将组 DN 设置为“ou=Groups,dc=htrueta,dc=intranet”和“属性持有组成员：”到“memberUid”。

宽度 Drupal 7 我已经激活了模块“LDAP 授权”和“LDAP 授权 - Drupal 角色”（此处的配置：http: [//dl.dropbox.com/u/171128/Configuration.txt](http://dl.dropbox.com/u/171128/Configuration.txt)）。我已经激活了调试日志，我附上了系统日志和看门狗日志以成功登录：[http](http://dl.dropbox.com/u/171128/logSyslog.txt) ://dl.dropbox.com/u/171128/logSyslog.txt + [http://dl.dropbox.com/u/ 171128/logWatchdog.txt](http://dl.dropbox.com/u/171128/logWatchdog.txt)。

奇怪的是，我可以在日志中查看 Drupal 在“ou=Groups,dc=htrueta,dc=intranet”搜索库和过滤器“(&(objectClass=posixgroup)(memberuid=12345678Z))”中搜索的日志. 没关系！我在 Apache Directory 中尝试，搜索返回用户组。

有谁能够帮我？这是一个错误吗？

# javascript - 铬分机。带有 Youtube API v3 的 OAuth 2.0

> ID：14876561
> 
> 赞同：0
> 
> 时间：2013-02-14T14:03:41.030
> 
> 标签：javascript, google-chrome-extension, youtube-api, oauth-2.0

我正在构建一个具有 Youtube API 访问权限的 Chrome 扩展程序。但我没有得到针对 Youtube 的认证。看起来没有最新的源代码或样本。此处的[教程](http://developer.chrome.com/extensions/tut_oauth.html)使用 2010 年的一些 chrome-oauth 库，此处的另一个[源](https://code.google.com/p/google-api-javascript-client/wiki/Samples)使用不同的库，我猜它对基于浏览器的身份验证和 API 访问很有用。我有一个开发密钥、一个已安装应用程序的客户端 ID（类型：Chrome）、YT API 密钥（简单 API 访问）。

我的 Chrome 应用程序使用以下清单：

```
{
    "name": "Youtube Chrome Ext",
    "version": "1.0",
    "manifest_version": 2,
    "description": "Youtube Chrome Ext",
    "app": {
        "launch": {
            "local_path": "main.html",
            "container":"tab"
        }
    },

    "options_page": "settings.html",
    "background": {
        "page": "background.html"
    },
    "permissions": [
        "tabs",
        "http://gdata.youtube.com/",
        "https://www.google.com/accounts/OAuthGetRequestToken",
        "https://www.google.com/accounts/OAuthAuthorizeToken",
        "https://www.google.com/accounts/OAuthGetAccessToken",
        "https://www.googleapis.com/auth/youtube"
    ]
} 
```

使用以下 backgroundHandler.js 文件通过 oAuth2.0 使用 Youtube 进行身份验证：

```
(function(global){

    global.backgroundHandler = {

        initBackground : function(){
            var self = this;
            var oauth = ChromeExOAuth.initBackgroundPage({
                'request_url'     : 'https://www.google.com/accounts/OAuthGetRequestToken',
                'authorize_url'   : 'https://www.google.com/accounts/OAuthAuthorizeToken',
                'access_url'      : 'https://www.google.com/accounts/OAuthGetAccessToken',
                'consumer_key'    : 'anonymous',
                'consumer_secret' : 'anonymous',
                'scope'           : 'http://gdata.youtube.com',
                'app_name'        : 'YouTube Ext'
            });

            oauth.authorize(this.onAuthorized());
        },

        onAuthorized : function() {
            //I'm not authorized - no window with grant access was displayed ...
        }

    };
})(window);

document.addEventListener('DOMContentLoaded', function () {
    backgroundHandler.initBackground();
}); 
```

注意 Youtube 不使用消费者密钥和秘密。

背景.html：

```
 <!DOCTYPE html>
    <html>
      <head>
        <script type="text/javascript" src="js/oAuth/chrome_ex_oauthsimple.js"></script>
        <script type="text/javascript" src="js/oAuth/chrome_ex_oauth.js"></script> 
        <script type="text/javascript" src="js/handler/backgroundHandler.js"></script>
      </head>
      <body>
      </body>
    </html> 
```

我最大的问题是以某种方式完成 OAuth 并对 Youtube 执行经过身份验证的请求。对我来说，整个 www 上没有最新的来源。

如果有人可以帮助我，我会很高兴。

BR，迈贝克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T23:38:51.477

我做了一个小实验，并测试了这个库：

[https://github.com/borismus/oauth2-extensions](https://github.com/borismus/oauth2-extensions)

我按照作者指示的步骤更改了 popup.html 和 popup.js 文件，尝试为当前用户显示 YouTube 视频推荐

popup.html：

```
<head>
  <title>YouTube Recommendations</title>
  <script src="oauth2/oauth2.js"></script>
  <script src="popup.js"></script>
  <style>
    #success { display: none; }
  </style>
</head>

<div id="loading">
Loading...
</div>
<div id="success">
  <ul id="activities"></ul>
</div> 
```

popup.js：

```
var google = new OAuth2('google', {
  client_id: '{YOUR_CLIENT_ID}',
  client_secret: '{YOUR_CLIENT_SECRET}',
  api_scope: 'https://www.googleapis.com/auth/youtube'
});

google.authorize(function() {

  var YOUTUBE_ACTIVITIES_URL = 'https://www.googleapis.com/youtube/v3/activities?part=id%2Csnippet%2CcontentDetails&home=true&maxResults=50&key=AIzaSyCx1xab1VHU7NdT6d2_x8i3p9RIZrtgR8k';

  var loading = document.getElementById('loading');
  var success = document.getElementById('success');
  var activities = document.getElementById('activities');

  // Make an XHR that retrieve activities with YouTube Data API
  var xhr = new XMLHttpRequest();
  xhr.onreadystatechange = function(event) {
    if (xhr.readyState == 4) {
      if(xhr.status == 200) {
        // Great success: parse response with JSON
        var activitiesResponse = JSON.parse(xhr.responseText);
        var items = activitiesResponse.items;
        for (var i=0; i<items.length; i++) {
          // Iterates over activities
          var activity = items[i];
          if ((activity.snippet.type == 'recommendation')&&(activity.contentDetails.recommendation.resourceId.videoId)){
            activities.innerHTML += '<li><a href="http://www.youtube.com/watch?v=' + activity.contentDetails.recommendation.resourceId.videoId + '" target="_blank">' + activity.snippet.title + '</a></li>';
          }
        }

        loading.style.display = 'none';
        success.style.display = 'block';

      } else {
          // Request failure: something bad happened
      }
    }
  };

  xhr.open('GET', YOUTUBE_ACTIVITIES_URL, true);

  xhr.setRequestHeader('Content-Type', 'application/json');
  xhr.setRequestHeader('Authorization', 'OAuth ' + google.getAccessToken());

  xhr.send();

}); 
```

# asp.net - 如何从 asp 应用程序更新 Google 日历事件？

> ID：14876562
> 
> 赞同：0
> 
> 时间：2013-02-14T14:03:45.263
> 
> 标签：asp.net, .net, api

我想将事件的主键插入 Google 日历，然后在 EventQuery 调用后检索它以更新该事件

我没有在 Evententry 类中找到任何属性来分配主键，然后再检索以更新该事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T07:34:36.293

可以使用以下方法使用 ExtendedProperty 来完成

```
1.Assign an ID (same as you set in your DB) to each event you add through
  ExtendedProperty . 
2.When updating / deleting you pass the ID and use Query to fetch it for you
3.If the event is found you can delete / update the specific event

Google.GData.Calendar.EventEntry Entry = new Google.GData.Calendar.EventEntry();

//create the ExtendedProperty and add the EventID in the new event object, 
//so it can be deleted / updated later
ExtendedProperty oExtendedProperty = new ExtendedProperty();
oExtendedProperty.Name = "EventID";
oExtendedProperty.Value = GoogleAppointmentObj.EventID;
Entry.ExtensionElements.Add(oExtendedProperty);

string ThisFeedUri = "http://www.google.com/calendar/feeds/" + CalendarID 
+ "/private/full";
Uri postUri = new Uri(ThisFeedUri);

//create an event query object and attach the EventID to it in Extraparameters
EventQuery Query = new EventQuery(ThisFeedUri);
Query.ExtraParameters = "extq=[EventID:" + GoogleAppointmentObj.EventID + "]";
Query.Uri = postUri;

//Find the event with the specific ID
EventFeed calFeed = CalService.Query(Query);

//if search contains result then delete
if (calFeed != null && calFeed.Entries.Count > 0)
{
   foreach (EventEntry SearchedEntry in calFeed.Entries)
   {
      SearchedEntry.Delete();
      //To update comment the code above and uncomment the code below 
      //CalService.Update(SearchedEntry);
      break;
   }
}
else
{
    InsertedEntry = CalService.Insert(postUri, Entry);
} 
```

# php - PHP查询输出页面

> ID：14876563
> 
> 赞同：0
> 
> 时间：2013-02-14T14:03:45.933
> 
> 标签：php, output

表单页面**place_events**上的操作调用**event_list**并为我提供请求的查询输出。如果您键入指向**event_list**页面的链接，它将使用表单中的值填充一个新查询。有没有办法阻止用户这样做，或者如果这样做了，我可以将他们重定向回**venue_events**页面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:09:32.877

在您的目标网页中，您必须检查您是否有正确的查询或正确的数据来构建您的查询。如果没有，例如因为用户直接输入了 url，如果您之前没有回显任何内容，您可以使用`header('Location: http://www.mysite.com/my_form_page.php');`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:06:35.200

如果我理解正确，您应该在查询数据库**之前验证这些值。**如果没有有效值，您可以使用[javascript](https://stackoverflow.com/questions/7070699/using-javascript-to-redirect-a-page/7070718#7070718)或 html 中的元重定向或使用以下方法启动重定向：

```
header('Location: http://www.domain.com/site.php'); 
```

`header()`那只是在命令之前没有输出的情况下工作。此外，您还可以检查是否从数据库中返回了一些结果。如果不是这种情况，您也可以启动重定向。

我对您的评论的建议：

```
<?php
// Was a search term passed?
if (isset($_POST['search']) && !empty($_POST['search'])){
  $sql=" SELECT * FROM venue_event "; 
  $search_term = mysql_real_escape_string($_POST['AAC']); 
  $sql .= "WHERE venue = '{$search_term}' "; 
  $sql .= "AND state = '{$search_term2}'"; // $search_term2 isn't defined in your code at all...
  $sql .= "ORDER BY startdate ASC";

  $result=mysql_query($sql) or die(mysql_error());
}else{
  // Do redirection here
}
?> 
```

# algorithm - 递归生成所有长度为 n 的二进制字符串的最佳方法是什么？

> ID：14876564
> 
> 赞同：4
> 
> 时间：2013-02-14T14:03:51.850
> 
> 标签：algorithm, recursion, language-agnostic, binary

我正在寻找一种好的（易于实现、直观等）**递归**方法来生成所有长度为 的二进制字符串`n`，其中`1 <= n <= 35`.

我会很感激关于伪代码算法的想法（没有特定于语言的技巧）。

LE: 好吧，我确实超出了上限。我的意图是避免使用从`1`to计数器的二进制表示的解决方案`1 << n`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T14:15:28.943

这是 C++ 中的递归示例。

```
vector<string> answer;

void getStrings( string s, int digitsLeft )
{
   if( digitsLeft == 0 ) // the length of string is n
      answer.push_back( s );
   else
   {
      getStrings( s + "0", digitsLeft - 1 );
      getStrings( s + "1", digitsLeft - 1 );
   }
}

getStrings( "", n ); // initial call 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-30T09:46:40.633

根据 Divide et Impera 范式，生成所有长度为 n 的二进制字符串的问题可以分为两个子问题：打印所有长度为 n-1 且前面有 0 的二进制字符串的问题和打印所有长度为 n-1 的二进制字符串的问题。长度 n-1 前面是 1。所以下面的伪代码解决了这个问题：

```
generateBinary(length, string)

if(length > 0)
    generateBinary(length-1, string + "0")
    generateBinary(length-1, string + "1")
else
    print(string) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-28T03:19:00.287

```
def genBins(n):
    """
       generate all the binary strings with n-length
    """
    max_int = '0b' + '1' * n
    for i in range(0, int(max_int, 2)+1, 1):
        yield str(format(i, 'b').zfill(n))

if __name__ == '__main__':

    print(list(genBins(5))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-30T13:46:48.120

您遇到的问题可以通过[回溯](https://en.wikipedia.org/wiki/Backtracking)算法来解决。

**这种算法的伪代码**是：

```
fun(input, n) 
    if( base_case(input, n) ) 
        //print result
    else
        //choose from pool of choices
        //explorer the rest of choices from what's left
        //unchoose 
```

**执行：**

*   基本情况：我们希望在其大小等于**n时打印我们的结果字符串**
*   递归案例：
    *   我们的选择池由**0**和**1组成**
    *   在这种情况下选择意味着取 0 或 1 并将其作为最后一个字符添加到**输入中**
    *   通过递归探索，我们从选择步骤传递新的**输入**值，直到达到基本情况
    *   在这种情况下取​​消选择意味着删除最后一个字符

```
function binary(n) {
  binaryHelper('', n);
}

function binaryHelper(str, n) {
  if (str.length === n) {
    //base case
    console.log(str); //print string
  } else {
    for (let bit = 0; bit < 2; bit++) {
      str = str + bit; // choose
      binaryHelper(str, n); // explore
      str = str.slice(0, -1); // un-choose
    }
  }
}

console.log('Size 2 binary strings:');
binary(2);
console.log('Size 3 binary strings:');
binary(3);
```

您可以像这样重写上面的代码，通过从一个循环迭代到另一个循环迭代的无状态转换来选择和取消选择。不过，这不太直观。

```
function binary(n) {
  binaryHelper('', n);
}

function binaryHelper(str, n) {
  if(str.length === n) {
    console.log(str);
  } else {
    for(let bit = 0; bit < 2; bit++) {
      binaryHelper(str+bit, n);
    }
  }
}

console.log('Size 2 binary strings:');
binary(2);
console.log('Size 3 binary strings:');
binary(3);
```

# performance - 了解数据分布对散列的影响

> ID：14876565
> 
> 赞同：1
> 
> 时间：2013-02-14T14:03:53.573
> 
> 标签：performance, hash, distribution, non-uniform-distribution

所以我已经阅读了关于[哈希函数](http://en.wikipedia.org/wiki/Hash_function#Hashing_uniformly_distributed_data)的维基百科页面，因为我目前正在玩一些。在该页面和我读过的其他来源中都提到数据的分布会影响散列函数。

尽管有一些解释，但我仍然不清楚这些影响到底是什么，也许是为什么。所以我的问题：

1.  只是为了确保我做对了，当他们提到分布时，这是输入数据集中每个单词的频率吗？
2.  输入数据的分布对散列函数有什么影响？特别令人感兴趣的是散列函数的性能，在散列算法产生的输出的速度和均匀性方面。

**编辑 1：** 我正在特别考虑维基百科英语语料库与来自更动态来源的数据，例如 Twitter 的推文。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:31:25.870

通常你没有尽可能多的输入数据集。因此，分布更多的是一种概率，即会选择具有某些特征的某个输入。（基本上与您所说的相同，但每个单词的 p<1 而不是某些计数 n>1）例如，如果您知道输入的第一位将始终为 1，则数据不是均匀分布的。

如果您的哈希非常简单，例如。如果只将第一个字节作为“哈希”，那么这种不均匀的分布将导致比预期更多的冲突。（即使您希望获得 256 个不同的值，也只有 128 个值是可能的）

您可能通过名称知道的大多数（加密）哈希函数都足够好，因此您不必关心这一点。对于密码学来说，它甚至是一个明确的条件：您不能仅通过查看哈希值的差异来判断输入中有多少位发生了变化。但这并不意味着这是不可能的。我隐约记得一篇论文指出，当只对 ascii 字母和数字进行哈希处理时，md5 的冲突率会增加。我现在找不到它，所以请小心地享受这条信息——但即使我混淆了一些东西，这种情况也很容易发生。而且不管是md5还是其他算法，如果你真的有这样的关系，那么你输入数据集的分布肯定又是相关的。

# entity-framework - C++/CLI 和实体框架 5

> ID：14876570
> 
> 赞同：3
> 
> 时间：2013-02-14T14:04:07.480
> 
> 标签：entity-framework, c++-cli, entity-framework-5

我想我会尝试在 VS2012 中将 EF 5 与 C++/CLI 一起使用，这样我就可以尝试 Code First。包通过 NuGet 下载很好，但对解决方案不可见。

在调查时，包管理器说该包与解决方案使用的框架版本不兼容，需要 4.0 或 4.5...但是项目的配置（一个普通的 Win32 控制台应用程序）说它正在使用v4.5。

有没有人遇到过这个问题并找到解决方法？

# mongodb - 使用 c# 反序列化 Mongo db 类的属性时发生错误

> ID：14876571
> 
> 赞同：0
> 
> 时间：2013-02-14T14:04:09.073
> 
> 标签：mongodb, c#-4.0

我编写了一个具有字段名称、Reg_No 等的类。

```
 public int Reg_No { get; set; }
    public string Name { get; set; } 
```

我的情况 reg no 将类似于 mongo db 中的“1”、“be01”字段类型将为值 1 的 int32 和 be01 的字符串

在我的课堂上，我尝试了字符串和 int 数据类型，但我面临以下错误。反序列化 Mongo_Studentattendance 类的 Reg_No 属性时出错：输入字符串格式不正确。

请帮助我解决这个问题并指导我进一步进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-12T12:37:56.350

只需将属性 Reg_No 的数据类型更改为动态即可。您的 reg_no 属性应如下所示

```
 public dynamic Reg_No { get; set; } 
```

# c# - 映射单个孩子

> ID：14876575
> 
> 赞同：1
> 
> 时间：2013-02-14T14:04:17.780
> 
> 标签：c#, entity-framework, automapper

下面的映射有效，但我想知道是否可以用更少的配置来完成。我试过玩`ForAllMembers`，`ForSourceMember`但到目前为止我还没有找到任何有用的东西。

**课程**

```
public class User
{
    [Key]
    public int ID { get; set; }

    public string LoginName { get; set; }

    public int Group { get; set; }

    ...
}

public class UserForAuthorisation
{
    public string LoginName { get; set; }

    public int Group { get; set; }
}

public class Session
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public Guid ID { get; set; }

    public virtual User User { get; set; }

    ...
} 
```

**配置**

```
Mapper.CreateMap<Session, UserForAuthorisation>()
    .ForMember(u => u.LoginName, m => m.MapFrom(s => s.User.LoginName))
    .ForMember(u => u.Group, m => m.MapFrom(s => s.User.Group)); 
```

**询问**

```
UserForAuthorisation user = this.DbContext.Sessions
    .Where(item =>
        item.ID == SessionID
        )
    .Project().To<UserForAuthorisation>()
    .Single(); 
```

* * *

**编辑**这适用于相反的情况。

```
Mapper.CreateMap<UserForAuthorisation, User>();

Mapper.CreateMap<UserForAuthorisation, Session>()
    .ForMember(s => s.User, m => m.MapFrom(u => u));

var source = new UserForAuthorisation()
{
    Group = 5,
    LoginName = "foo"
};
var destination = Mapper.Map<Session>(source); 
```

不幸的是，`Reverse()`这不是一个简单的解决方案，映射不起作用。

```
Mapper.CreateMap<UserForAuthorisation, User>().ReverseMap();

Mapper.CreateMap<UserForAuthorisation, Session>()
    .ForMember(s => s.User, m => m.MapFrom(u => u)).ReverseMap();

var source = new Session()
{
    User = new User()
    {
        Group = 5,
        LoginName = "foo"
    }
};
var destination = Mapper.Map<UserForAuthorisation>(source); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:10:56.413

我只能看到一个选项来减少配置。您可以通过将[类](https://github.com/AutoMapper/AutoMapper/wiki/Flattening)的属性重命名`UserForAuthorisation`为：

```
public class UserForAuthorisation
{
    public string UserLoginName { get; set; }
    public int UserGroup { get; set; }
} 
```

在这种情况下，嵌套`User`对象的属性将在没有任何额外配置的情况下被映射：

```
Mapper.CreateMap<Session, UserForAuthorisation>(); 
```

# c# - PropertyInfo 列表上的 LINQ 查询

> ID：14876577
> 
> 赞同：0
> 
> 时间：2013-02-14T14:04:21.007
> 
> 标签：c#, linq

我有一个子类，它是从两个级别的基类“派生的”（正确的词）。我有一个此类中所有属性的列表（因此包括来自父级的属性和父级的父级）。我想要的只是DeclaringType 是“CrazyNinjaBadger”的属性（即只有我的子类中的属性）。

我试过这个说法：

```
PropertyInfo[] properties = type.GetProperties().Select(x => x.DeclaringType.ToString() == "CrazyNinjaBadger"); 
```

但我只是得到

> “无法将类型‘System.Collections.Generic.IEnumerable’隐式转换为‘System.Reflection.PropertyInfo[]’。

请问有人可以提出一个可行的声明吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:06:33.163

用于`Where`过滤属性，并将结果转换为数组：

```
PropertyInfo[] properties = type.GetProperties()
             .Where(x => x.DeclaringType.ToString() == "CrazyNinjaBadger")
             .ToArray(); 
```

另外我相信你想使用这样的类型名称`x.DeclaringType.Name == "CrazyNinjaBadger"`。顺便说一句`Select`，在您的情况下，运算符将属性投影到布尔值序列。因此，您的查询实际上返回`IEnumerable<bool>`了与 CrazyNinjaBadger 的字符串比较类型的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:05:31.547

`ToArray()`在行尾添加

```
PropertyInfo[] properties = type.GetProperties()
    .Select(x => x.DeclaringType.ToString() == "CrazyNinjaBadger")
    .ToArray(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:06:01.677

你得到那个错误是因为`Select()`总是返回一个 IEnumerable。

只需`.ToArray()`在行尾添加即可使其正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T14:06:09.573

```
PropertyInfo[] properties = type.GetProperties()
                   .Select(x => x.DeclaringType.ToString() == "CrazyNinjaBadger")
                   .ToArray(); 
```

需要添加 ToArray() 才能转换为 Array...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-14T14:07:44.423

你快到了！Select 返回一个 IEnumerable，但您正在尝试设置 PropertyInfo 数组的值。您只需要额外调用 ToArray 即可！

```
PropertyInfo[] properties = type.GetProperties().Select(x => x.DeclaringType.ToString() == "CrazyNinjaBadger").ToArray() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-14T14:09:15.617

```
PropertyInfo[] properties = type.GetProperties().Select(x => x.DeclaringType.ToString() == "CrazyNinjaBadger"); 
```

`Select(...)`返回 的实现`IEnumerable<T>`。编译器错误非常明确。

另一点是您要过滤属性。`.Select(...)`用于将枚举投影到另一个相同或其他类型的枚举中。

例如：

```
IEnumerable<string> strings = new string[] { "0", "1" };

// Converting the string enumerable to an enumerable of integers:
IEnumerable<int> integers = strings.Select(some => int.Parse(some)); 

// Also, convert each strings into an anonymous object!
IEnumerable<object> whoKnows = strings.Select(some => new { Value = some }); 
```

为了过滤一个枚举**，你需要使用`.Where(...)`**.

另一方面，`x.DeclaringType.ToString() == "CrazyNinjaBadger"`是正确的，但应该是正确的`x.DeclaringType.Name == "CrazyNinjaBadger"`（您不需要将类型转换为字符串，因为`Type`它具有属性`Name`）。

最后我认为你不需要将结果设置在数组中，你可以这样做：

```
IEnumerable<PropertyInfo> properties = 
       type.GetProperties()
          .Where(x => x.DeclaringType.Name == "CrazyNinjaBadger"); 
```

# c# - 如何保存在图片框上创建的图形？

> ID：14876582
> 
> 赞同：0
> 
> 时间：2013-02-14T14:04:33.040
> 
> 标签：c#, graphics

我正在使用`pictureBox.CreateGraphics()`方法创建一个图形对象。我正在使用图片框加载图像并通过在其上绘图来编辑它。我想将“新”图像（已编辑的图像）保存到新文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:33:34.663

[很难](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.save.aspx)。_ 但棘手的部分是你如何“画图”。

# powershell - 以不同用户身份从 PowerShell 打开远程位置

> ID：14876584
> 
> 赞同：2
> 
> 时间：2013-02-14T14:04:36.747
> 
> 标签：powershell, permissions, active-directory

我需要打开一些远程文件夹很多次，我通常`start`在powershell中使用这种方式

```
start \\myserverXXX\some_hidden_drive$\some_folder 
```

有时我需要使用管理员帐户，并且我希望系统提示我插入不同的凭据，但我得到了一个错误。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:16:55.570

使用凭证选项如下

```
start \\myserverXXX\some_hidden_drive$\some_folder -Credential $(Get-Credential) 
```

这将提示您输入不同的凭据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T15:59:58.183

您是否尝试过使用这些凭据映射驱动器，然后打开它？我暂时没有地方测试这个。

```
New-PsDrive -Name X -PSProvider Filesystem -Root \\myserverXXX\some_hidden_drive$\some_folder -credential $(get-credential);
Invoke-Item X: 
```

# jquery - 如何禁用浏览器抖动？

> ID：14876589
> 
> 赞同：1
> 
> 时间：2013-02-14T14:04:47.547
> 
> 标签：jquery, html, css

我有一个带有选项卡式导航的页面，我想停止浏览器抖动（页面加载指示器），因为我已经自定义了我自己的并且当它们都开始旋转时效果不好，所以我想关闭浏览器中的抖动并只留下我在我的页面中显示的这个。我在 Twitter 上看到了相同的方法，但我在网络上没有找到任何解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:35:43.817

无法通过 javascript 或其他方式本地访问控制浏览器的加载元素。

您应该问自己的问题是：*为什么我的页面需要这么长时间才能加载？*

如果浏览器加载指示器运行的时间过长，您真正停止它的唯一方法是**优化您的页面**。

就您而言，这将采取什么措施是不确定的，因为您没有提供我们可以调查并为您提供优化建议的链接。

# vba - Access VBA - 更新宏中的运行时错误

> ID：14876591
> 
> 赞同：1
> 
> 时间：2013-02-14T14:04:53.673
> 
> 标签：vba

我对 vba （和这个网站 - 如果我发布不正确，请道歉），以前是 SQL 开发人员，但不幸的是我的新工作只涉及在 access 2010 中工作。我正在尝试构建一个将运行各种更新语句的 vba 宏。我已经在访问中构建了查询，我正在尝试在 vba 中调用查询。我曾尝试使用一个访问查询来执行此操作，但我遇到了运行时错误 - UPDATE 语句中的语法错误。查询在访问中运行良好，但 vba 函数因运行时错误而失败。

以下是我的 vba 函数：

```
Public Function TestUpdate1()
Dim cmdT As ADODB.Command
Dim cnn As ADODB.Connection
Dim prmT As ADODB.Parameter

Set cnn = Application.CurrentProject.Connection
Set cmdT = New ADODB.Command
Set cmdT.ActiveConnection = cnn
cmdT.CommandText = "Update Table 1"
cmdT.CommandType = adCmdText

'Set prmT = cmdT.Parameters("Acc_Date")
'prmT.Value = #12/31/2012#
cmdT.Execute

'Set cmdT = Nothing
'
'If Err <> 0 Then
' cmdT.ActiveConnection.RollbackTrans
'Else
' cmdT.ActiveConnection.CommitTrans
'End If
End Function 
```

当我调试函数时，错误发生在 cmdt.Execute 行。

它正在执行的sql查询（更新表1）如下：

```
UPDATE Table_1 SET Product = IIf(Contract Like "*budget*amt*","BUDGET Annual",
IIf(Contract Like "*CLASSIC*AMT*","CLASSIC Annual",
IIf(Contract Like "*essential*AMT*","ESSENTIAL Annual",
IIf(Contract Like "*P*PLUS*AMT*","Premier Plus Annual",
IIf(Contract Like "*SELECT*AMT*","SELECT Annual",
IIf(Contract Like "*prestige*AMT*","PRESTIGE Annual",
IIf(Contract Like "*GAP*","GAP Productl",
IIf(Contract Like "*SINGLE*TRIP*","SINGLE TRIP",
IIf(Contract Like "*premier*","PREMIER Annual",
IIf(Contract Like "*standard*","STANDARD Annual",
IIf(Contract Like "*EVAC*","European VAC","???"))))))))))), End_Date =  Depart_Date+Days; 
```

您可以就上述内容提供的任何帮助将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:29:44.603

此代码正在尝试执行 SQL 语句：*更新表 1*

```
cmdT.CommandText = "Update Table 1"
cmdT.CommandType = adCmdText
cmdT.Execute 
```

要执行名为*Update Table 1的***查询**，您需要以下代码：

 *```
Docmd.OpenQuery "Update Table 1" 
```

如果您不想要关于即将更新的行数的警告，

```
With DoCmd
     .SetWarnings False
     .OpenQuery "Update Table 1"
     .SetWarnings True
End With 
```

这是我使用访问项目和 ADODB 运行参数化查询的代码

```
Dim cmdl As ADODB.Command
Dim StrCon As New ADODB.Connection
Dim rsRecSet As New ADODB.Recordset

StrCon.Open CurrentProject.Connection

'Set CONNECTION timeout property
StrCon.CommandTimeout = 0

'Create a new command object to process the stored proc
Set cmdl = New ADODB.Command

With cmdl
    .ActiveConnection = StrCon
    'set COMMAND timeout property - query can time out on either the connection OR the command
    .CommandTimeout = 0
    .CommandText = "spCrossTabRun"
    .CommandType = adCmdStoredProc
    .Parameters.Refresh
    .Parameters(1).value = "MyValue1"
    .Parameters(2).value = "MyValue2"
    .Parameters(3).value = "MyValue3"
    Set rsRecSet = .Execute()
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T23:57:25.300

我有几个集中的函数来返回对 adodb 记录集的只读或读/写访问权限。喜欢：

```
Public Function dbWrite(SQLQuery As String, Optional blDynamic As Boolean) As ADODB.Recordset
'Centralized function to read data from db, return a EDITABLE recordset
Dim r As New ADODB.Recordset

If blDynamic = True Then
    r.Open SQLQuery, CurrentProject.Connection, adOpenDynamic, adLockOptimistic, dbSQLPassThrough
Else
    r.Open SQLQuery, CurrentProject.Connection, adOpenForwardOnly, adLockOptimistic, dbSQLPassThrough
End If

Set dbWrite = r

Exit Function
End function 
```

所以在一个新函数中调用它：

```
Public Function SomeFunction
Dim r As New ADODB.Recordset
Dim s As String
set r = dbwrite("SELECT * FROM TABLE;")
s = "My Parameterized Value"
r.AddNew
     r![Fieldname] = s
     r.Update
r.Close
set r = nothing
End function 
```

拥有 dbWrite 函数使事情变得容易，并且一次解析出一个字段名使得调用另一个函数、简单的 IF 或诸如此类变得容易。*

# java - Java JAX-WS Webmethod 参数继承

> ID：14876593
> 
> 赞同：1
> 
> 时间：2013-02-14T14:04:58.110
> 
> 标签：java, web-services, jax-ws

我的 jax-WS 网络服务如下所示：

```
@WebService
@SOAPBinding(style = Style.RPC)
public interface SampleServer {

@WebMethod void doIt1(@WebParam Event event);

@WebMethod void doIt2(String aString);
} 
```

Event 类是抽象的，有一些简单的方法。例如： public abstract class Event { private int param; ... getter / setter ...}

我编写了一个客户端，它可以毫无错误地调用 doIt2，但我找不到一个好的解决方案来创建对 doIt1 的调用。

如果我在 Event 上指定带有子类的“@XMLSeeAlso”，它可以正常工作，但我认为这是一个愚蠢的解决方案，因为 Web 服务不应该在 Event 类型的特定客户端类上工作。我想将客户端和服务器类分开。

欢迎任何提示。谢谢。

# c# - 在 Azure 上使用 Web API 缓存 GET 请求

> ID：14876594
> 
> 赞同：4
> 
> 时间：2013-02-14T14:04:59.910
> 
> 标签：c#, azure, asp.net-web-api

我正在 Azure 平台上开发 Web API RESTful 服务。

我认为默认的客户端缓存行为是缓存 GET 请求（因为 GET 是幂等的）。

令我惊讶的是，当我将服务部署到 Azure 时，所有响应都带有`Cache-Control: private`标头或其他不允许缓存的标头发送。

我尝试了[这个问题](https://stackoverflow.com/questions/11547618/output-caching-for-an-apicontroller-mvc4-web-api)中建议的解决方案，它确实在 IIS 中本地工作，但一旦我们部署到 Azure 就无法工作。我在文档中找不到任何关于此功能的内容，我认为这在 RESTful 服务中非常基本，我真的希望我遗漏了一些明显的东西，在 MVC 中这很容易。

**tl;博士**

使用 Azure 和 Web API 时，我们需要`GET`在客户端缓存请求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T23:05:44.380

我不相信 Azure 在这方面对您有任何影响。您需要准确指定资源所需的缓存属性。

使用 WebAPI，您可以控制响应具有哪些缓存属性，这些属性[`CacheControlHeaderValue`](http://msdn.microsoft.com/en-us/library/system.net.http.headers.cachecontrolheadervalue.aspx)可通过`myHttpResponseMessage.Headers.CacheControl`属性访问。

假设您有这样的控制器操作：

```
public Foo Get(int id)
{
    Foo myFoo = LoadSomeFooById(id);

    return myFoo;
} 
```

你需要做这样的事情来明确控制缓存：

```
public HttpResponseMessage Get(int id)
{
    Foo myFoo = LoadSomeFooById(id);

    HttpResponseMessage myHttpResponseMessage = this.Request.CreateResponse(HttpStatusCode.OK, myFoo)

    CacheControlHeaderValue cacheControlHeaderValue = new CacheControlHeaderValue(); 
    cacheControlHeaderValue.Public = true;    
    cacheControlHeaderValue.MaxAge = TimeSpan.FromMinutes(30);

    myHttpResponseMessage.Headers.CacheControl = cacheControlHeaderValue;

    return myHttpResponseMessage;
} 
```

您期望的与缓存相关的许多其他属性也可以在`CacheControlHeaderValue`该类中使用，这只是最基本的示例。

另外，请记住，我的示例非常暴力/简单，因为所有缓存行为/逻辑都在 action 方法中。一个更简洁的实现可能是拥有一个[`ActionFilterAttribute`](http://msdn.microsoft.com/en-us/library/system.web.http.filters.actionfilterattribute%28v=vs.108%29.aspx)包含所有基于属性设置的缓存逻辑并将其应用于`HttpResponseMessage`. 然后您可以恢复到更以模型为中心的操作方法签名，因为在这种情况下，您将不再需要`HttpResponseMessage`在该级别访问。像往常一样，给猫剥皮的方法有很多，您必须确定哪种方法最适合您的特定问题域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T09:22:17.670

看看这个[http://forums.asp.net/post/4939481.aspx](http://forums.asp.net/post/4939481.aspx)它实现了缓存作为修改 HTTP 响应的属性。

免责声明：我没有尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T16:22:36.823

I would recommend this [https://github.com/filipw/AspNetWebApi-OutputCache](https://github.com/filipw/AspNetWebApi-OutputCache)

Simple, quick and has various options to cache.

Hope that helps

# javascript - 将 topojson 文件加载到 d3

> ID：14876600
> 
> 赞同：2
> 
> 时间：2013-02-14T14:05:21.720
> 
> 标签：javascript, maps, d3.js

我正在将 geojson 形状文件加载到 d3 中（我是这个设计背景的新手。）我有一张由军械调查局提供的英国投票选区地图。我已经设法将其转换为带有 WG8 投影的简化 shapefile，并将其与 Mike Bostock 教程一起使用，类似于这个[http://bl.ocks.org/2206590](http://bl.ocks.org/2206590)。我几乎已经完成了这项工作。问题是形状文件很大，5.2MB，所以我试图把它变成一个 topojson 格式。我已经尝试按照[http://bost.ocks.org/mike/map/](http://bost.ocks.org/mike/map/)上的标题进行操作，但遇到了一些问题

1.  我的 Mac 上没有 Homebrew，而且我不会很快得到它。我们机器上的访问权限被锁定得非常严密，技术人员不会为我们安装任何软件。我通过将我的形状文件放在[http://www.shpescape.com/](http://www.shpescape.com/)的翻译器中绕过了这一点，但我认为它生成的 topojson 文件的形状文件并不完全具有我正在使用的教程的语法我不知道如何改变它。它的一个样本看起来像这样

    {“objects”：{“pcon_gb_2010_area 1”：{“type”：“GeometryCollection”，“geometries”：[{“type”：“Polygon”，“arcs”：[[0, 1, 2, 3, 4, 5, 6, 7, 8,9, 10]]}, {"type": "Polygon", "arcs": [[11,12, 13, 14, 15, 16, 17, 18,19, 20, 21, 22]]}, {"type": "Polygon", "arcs": [[23, 24, 25, 26, 27, 28,29, 30, 31]]}, {"type": "Polygon ", "弧线": [[32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44]]}, {"type": "多边形", "弧线": [[45, 46, 47, 48,49, 50, 51, 52, 53, 54, 55, 56]]}, {"type": "Polygon", "arcs": [[57, 58,59, 60、61、62、63、64、65、66、67、68、69、70]]}

我使用的代码看起来像这样

```
d3.json("assets/test21.json", function(error, uk) {
    console.log(uk);

    var width = 960,
    height = 1160;

    var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

    d3.json("uk.json", function(error, uk) {svg.append("path")
              .datum(topojson.object(uk, uk.objects.subunits))
              .attr("d", d3.geo.path().projection(d3.geo.mercator())); 
```

该对象似乎加载正常，我可以在控制台日志中检查它，但我收到此错误

NS_ERROR_DOM_BAD_URI：对受限 URI 的访问被拒绝 [中断此错误]

.../apis.google.com/ */abc-static/* /js/gapi/iframes,googleapis_client/rt=j/ver=GyFIW...

我正在使用 d3 形状文件而不是加载 .svg 文件，因此我可以稍后执行一些转换。形状文件是使用 Illustrator 的 MacPublisher 插件生成的。

感激地收到任何帮助

# php - 转换大量数据导入

> ID：14876601
> 
> 赞同：0
> 
> 时间：2013-02-14T14:05:21.430
> 
> 标签：php, mysql

我有一个关于导入长 csv 表然后转换为两个表以提高效率的最佳方法的问题。这是一个非常缩小的版本，但为此目的适合：

每一行都是唯一的记录，但前三列包含大量行的非常一致的数据。

我认为管理这些数据的最佳方法是构建两个表：

第一个是自动增量 id 字段和前三列的 group by。

这为我的数据的主要分组提供了一个很好的紧凑表。

第二个表是每一行，但不是保存所有重复的数据，而是只保存可变数据列 d、e 和 f 以及我在导入第一个表时生成的自动增量 id 字段。

我的问题实际上是如何从第一个表中获取 id - 是我重新查询该表以找到 id 然后插入到第二个表中的唯一方法吗？

```
a,b,c,d,e,f

09/02/2013,A1,1,18503112043123,11,2.1219
09/02/2013,A1,1,44102576116476,73,14.0817
09/02/2013,A1,1,66918345446536,134,25.8486
09/02/2013,A1,2,62009507978229,10,1.929
09/02/2013,A1,2,92278593945574,55,10.6095
09/02/2013,B1,1,50474606002324,90,17.361
09/02/2013,B1,1,59697581427675,7,1.3503
09/02/2013,B1,1,86298530583467,51,9.8379
09/02/2013,B1,2,34885481077847,80,15.432
09/02/2013,B1,2,25479347211047,164,31.6356
09/02/2013,B1,3,56270556524425,6,1.1574
09/02/2013,C1,1,57680166803098,24,4.6296
09/02/2013,C1,1,72778510788287,77,14.8533
09/02/2013,C1,1,26084111080146,140,27.006
09/02/2013,C1,1,31435464483578,361,65.5937
09/02/2013,C1,2,29457756254473,492,89.3964
09/02/2013,C1,2,68414218104066,293,53.2381 
```

编辑

我有两个查询： 1：我的父表具有自动增量插入到 parent_table 选择 null，a，b，c 从表组中由 a，b，c

1.  我的子表是我所有的数据行，但包含父表中相应的自动增量 ID。

当我将数据输入到子表中时，我不明白如何在不查询父表的情况下再次拉回 id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:11:20.360

您可以使用[`PDO::lastInsertId`](http://www.php.net/manual/en/pdo.lastinsertid.php)或[`mysqli::$insert_id`](http://php.net/manual/de/mysqli.insert-id.php)来检索

> 上次查询中使用的自动生成的 ID。

只需执行插入，然后获取 id

```
$sth = $pdo->prepare("insert into first_table (a, b, c) values (?, ?, ?)");
$sth->execute(array('2013-02-09', 'A1', 1));
$id = $pdo->lastInsertId(); 
```

还有 MySQL [`LAST_INSERT_ID()`](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_last-insert-id)。你可以测试

```
insert into second_table (first_table_id, d, e, f) values (LAST_INSERT_ID(), ...) 
```

但我自己从未尝试过。

# django - django 模型对象...为什么我不必创建对象？

> ID：14876608
> 
> 赞同：0
> 
> 时间：2013-02-14T14:05:32.967
> 
> 标签：django

我注意到 django 中的模型对象可以做到：

```
MyModel.objects.all() 
```

我可以在不创建新的 MyModel 对象的情况下做到这一点。这如何/为什么起作用？

编辑了问题：我不是在询问基础 Model 类，而是在谈论一个名为 MyModel 的模型，它从基础 Model 类扩展而来

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:40:37.373

## 什么是 Model.objects

模型类，有一个[Manager 类](https://docs.djangoproject.com/en/dev/topics/db/managers/)，你可以像这样得到它：

```
YourModel.objects 
```

Manager 是进行 SQL 查询的人，例如，这将返回一个[QuerySet](https://docs.djangoproject.com/en/dev/ref/models/querysets/)：

```
YourModel.objects.all() 
```

QuerySet 的[行为](https://docs.djangoproject.com/en/dev/ref/models/querysets/)主要类似于普通的 python 列表，除了它在第一次[评估](https://docs.djangoproject.com/en/dev/ref/models/querysets/#when-querysets-are-evaluated)时会进行 SQL 查询。

## 基本模型类没有经理！

所以你不能`Model.objects.all()`像你说的那样做：

```
In [1]: from django.db.models import Model

In [2]: Model.objects
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
/home/jpic/env/local/lib/python2.7/site-packages/django/core/management/commands/shell.pyc in <module>()
----> 1 Model.objects

AttributeError: type object 'Model' has no attribute 'objects' 
```

## 如果表不存在，QuerySet 将失败！

它将抛出一个 DatabaseError：

```
 50     def execute(self, query, args=None):
     51         try:
---> 52             return self.cursor.execute(query, args)
     53         except Database.IntegrityError, e:
     54             raise utils.IntegrityError, utils.IntegrityError(*tuple(e)), sys.exc_info()[2]

DatabaseError: relation "formapp_testmodel" does not exist
LINE 1: SELECT "formapp_testmodel"."id" FROM "formapp_testmodel" LIM... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:41:17.490

如果你定义一个模型`class MyModel(models.Model)`然后运行`python manage.py syncdb`，django 将创建一个数据库表`yourapp_mymodel`。您可以针对该数据库表运行不返回元组的查询，因此您可以创建一个不包含结果的查询集 - 例如`MyModel.objects.none()`.

如果每次运行没有返回结果的查询时它都会抛出异常，那么 queryset api 将非常绝望。

（我假设你的意思是问为什么你可以做`MyModel.objects.all()`而不是`Model.objects.all()`。正如 jpic 在他的回答中显示的那样，你不能做`Model.objects.all()`。

# css - 使用 drupal_get_css 打印默认 CSS 文件的原始内容

> ID：14876610
> 
> 赞同：0
> 
> 时间：2013-02-14T14:05:50.383
> 
> 标签：css, drupal, module, drupal-7

我有一个自定义 Drupal 7 模块，它打印出表单的内容，解析它并用等效的 div 替换所有表单元素，然后使用`DOMDocument()`.

然后通过[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)运行以生成 PDF。我也有一点`preg_replace`可以将所有出现的 转换`textarea/input`为`.div-textarea/.div-input`某些内联 CSS 中的。

然而，问题是默认的 Drupal CSS 文件和包含在自定义主题中的 CSS 文件无法被这个正则表达式处理，因为该`drupal_get_css()`函数返回`<link>`标签和 CSS 的`@import`规则。

所以问题是：你知道我怎样才能让 Drupal 的主题输出打印 HTML 中 CSS 文件的实际原始内容而不是这些样式表链接，以便我可以在它上面运行替换功能吗？

或者有没有更好的方法将 CSS 规则从一个元素/类复制到另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:29:53.103

我使用 php 函数做到了这一点：[file_get_contents](http://php.net/manual/en/function.file-get-contents.php)

然后你的代码看起来像：

```
$css = file_get_contents(drupal_get_path('theme', 'my_theme') . 'css/my_css.css'); 
```

然后您可以在任何模板中打印该 css 或附加到任何字符串以获取输出。

编辑：

要获取所有 css 文件的列表，请运行：`$css_list = drupal_add_css();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T21:43:52.173

将 CSS 作为字符串加载后（请参阅@danielson317 的回答，了解如何执行此操作的一个很好的示例），使用[`drupal_add_html_head()`](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_add_html_head/7).

如果添加第二个`key`参数，则可以使用[`hook_html_head_alter()`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_html_head_alter/7).

# sql - 将动态列名传递给临时表不起作用？

> ID：14876614
> 
> 赞同：1
> 
> 时间：2013-02-14T14:05:48.860
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我有这个`Sql`难题，我正在使用 Sql server 2005

以下查询工作正常

```
 DECLARE @query VARCHAR(200)
 DECLARE @colname varchar(50) 
     CREATE TABLE #temp (ID INT IDENTITY PRIMARY KEY , value VARCHAR(50))
       INSERT INTO #temp VALUES ('first')
       SET @colname = 'myCol'
       SET @query = 'SELECT value AS' + @colname + ' FROM #temp'
        EXEC(@query)
     DROP TABLE #temp 
```

**但**

如果我这样做

```
 SET @colname = (SELECT value FROM tablename WHERE id = 12) --valid selection 
```

或者

```
 SELECT @colname = value FROM tablename WHERE id = 12 --valid selection 
```

我没有得到任何结果，我收到一条消息说：

```
 (1 row(s) affected) 
```

和错误消息：

```
 Msg 102, Level 15, State 1, Line 1
  Incorrect syntax near '1'. 
```

任何人都知道这件事是怎么回事谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:20:51.393

根据评论，您需要防止该值是`NULL`因为没有分配任何内容或列名是无效的 SQL Server 标识符。

`@@ROWCOUNT`您可以通过在分配后检查来执行前者，而通过使用第二个来执行`QUOTENAME`

```
DECLARE @query VARCHAR(200)
DECLARE @colname VARCHAR(50)

CREATE TABLE #temp
  (
     ID    INT IDENTITY PRIMARY KEY,
     value VARCHAR(50)
  )

INSERT INTO #temp
VALUES      ('first')

SELECT @colname = QUOTENAME(value)
FROM   tablename
WHERE  id = 12

IF @@ROWCOUNT <> 1
  BEGIN
      RAISERROR('Unexpected rowcount',16,1)

      RETURN
  END

SET @query = 'SELECT value AS ' + @colname + ' FROM #temp'

EXEC(@query)

DROP TABLE #temp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:16:39.763

你的`#temp`表有标识列，你的查询只插入到`#temp`表中一次。所以你只有`ID = 1`. `ID = 12`不存在。

该查询将给出结果。

```
 DECLARE @query VARCHAR(200)
 DECLARE @colname varchar(50) 
 CREATE TABLE #temp (ID INT IDENTITY PRIMARY KEY , value VARCHAR(50))
       INSERT INTO #temp VALUES ('first')
       SELECT @colname = value FROM #temp WHERE id = 1
       SET @query = 'SELECT value AS' + @colname + ' FROM #temp'
        EXEC(@query)
 DROP TABLE #temp 
```

# php - jQuery UI 可排序和更新 mysql 数据库

> ID：14876618
> 
> 赞同：0
> 
> 时间：2013-02-14T14:06:06.780
> 
> 标签：php, javascript, jquery, mysql

我做错了什么，这让我发疯，因为我无法弄清楚。使用 jQuery ui sortable 对我页面上的 div 进行排序。排序部分有点工作，但它不会更新数据库。

我唯一能想到的就是页面内清晰，但如果我把它放在 div 上，它的作用就不那么流畅了。

**PHP**

```
<div id="page">
    <div id="listItem_'.$id.'" class="a bunch of random classes">
        <div class="handle"></div>
    </div>
    <div id="listItem_'.$id.'" class="this one has some other classes">
        <div class="handle"></div>
    </div>
    <div class="clear"></div>
    <div id="listItem_'.$id.'" class="a bunch of some other">
        <div class="handle"></div>
    </div>
</div> 
```

**Javascript**

```
$(document).ready(function(){
    $("#page").sortable({ 
      handle : '.handle', 
      update : function () { 
        var order = $('#page').sortable('serialize');
            $(document).load("sort.php?"+order); 
        }
    });
}); 
```

**排序文件**

```
<?php
    session_start();
    require('connect.php');

    if($_SERVER['REQUEST_METHOD'] == 'GET' && isset($_SESSION['USERNAME'])){
        $i=1;
        foreach ($_GET['listItem'] as $position => $item){
            $sql = "UPDATE table SET position = ".$i." WHERE id = ".$item;
            $res = mysql_query($sql);
            $i++;
        } 
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:22:00.767

`var_dump('got here');`通过在 PHP 脚本中放置（或其中一个变量）开始调试。在 Firefox 中使用 Firebug（它是一个附加组件）中的控制台来查看输出。逐步进行，直到找到失败的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:15:44.310

是否应将 $i 替换为 $position：

```
$sql = "UPDATE table SET position = ".$i." WHERE id = ".$item;
$sql = "UPDATE table SET position = ".$position." WHERE id = ".$item; 
```

在任何情况下......如果它不更新数据库大概你得到一个错误？

而且，我假设您的表格实际上并未称为“表格”，否则您可能应该反引号它..

# ruby-on-rails - 在 Rails Helper 中获取记录时出错

> ID：14876619
> 
> 赞同：0
> 
> 时间：2013-02-14T14:06:06.923
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rails-activerecord

当我尝试在我的帮助程序中验证时，如果我的数据库有记录，则验证程序会停止并出现此错误：

```
ActiveRecord::RecordNotFound in FinancesController#index

Couldn't find Place with id=5 
```

我使用这个助手：

```
 def get_acc_name(acc_id)
    @var = Place.find(acc_id)
    if @var.kind_of?(Array)
    @var = @var.place 
    else
    @var = "(Deletado)"
    end
    return @var
  end 
```

问题是脚本在第一行停止并且字体生成一个 if else，我不知道我该如何解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:20:24.933

您可以使用 where 而不是 find。如果找不到记录， find 会引发异常。所以，改用这个：

```
@var = Place.where(:id => acc_id).first 
```

或者

```
@var = Place.find_by_id(acc_id) 
```

他们不会引发异常。:)

# objective-c - OS X 相当于 resizableImage

> ID：14876621
> 
> 赞同：0
> 
> 时间：2013-02-14T14:06:07.370
> 
> 标签：objective-c, cocoa, uiimage, nsimage

在 MacOS X 上是否有与 iOS 方法`-[UIImage resizableImageWithCapInsets:]`和`-[UIImage resizableImageWithCapInsets:resizingMode:]`for等效的方法？`NSImage`

我查看了`NSImage`文档，但什么也看不到。

# c++ - 来自模板函数的未定义引用 (C++)

> ID：14876623
> 
> 赞同：-2
> 
> 时间：2013-02-14T14:06:08.523
> 
> 标签：c++, templates, undefined, linker-errors, definition

```
main.o: In function `main':
main.cpp:(.text+0x2f): undefined reference to `Foo<int>::display(int)'
collect2: ld returned 1 exit status 
```

引起的

```
g++ -c *.cpp && g++ *.o -o foo 
```

与`foo.hpp`：

```
#ifndef FOO_H_
#define FOO_H_

template<typename T>
class Foo {
  private:
    T ft_;
  public:
    Foo(const T & ft) : ft_(ft) { }
    Foo display(T x);
};

#endif 
```

`foo.cpp`：

```
#include "foo.hpp"
#include<iostream>
using namespace std;

template<typename T>
Foo<T> Foo<T>::display(T x) {
  // do some stuff - not too relevant
  cout << "[" << x << "]";
  Foo<T> res(x);
  return res;
} 
```

和`main.cpp`：

```
#include<iostream>
#include "foo.hpp"
using namespace std;

int main() {
  Foo<int> f(42);
  Foo<int> g = f.display(39);
  return 0;
} 
```

为什么？！

*PS 适用于内联函数定义。每当函数的声明和定义被分成两个文件时，麻烦就来了……*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:08:24.970

在 C++ 中，您需要将模板化方法和函数的定义放入头文件中。

# linux - awk sum up multiple files 显示没有出现在两组文件中的行

> ID：14876624
> 
> 赞同：3
> 
> 时间：2013-02-14T14:06:08.603
> 
> 标签：linux, bash, shell, sorting, awk

我一直在用awk总结多个文件，这是用来总结服务器日志解析值的，确实加快了最终的总计数但是我遇到了一个小问题和我遇到的典型示例网络没有帮助。

这是示例：

```
cat file1
aa 1
bb 2
cc 3
ee 4

cat file2
aa 1
bb 2
cc 3
dd 4

cat file3
aa 1
bb 2
cc 3
ff 4 
```

和脚本：

```
cat test.sh 
#!/bin/bash

files="file1 file2 file3"

i=0;
oldname="";
for names in $(echo $files); do
        ((i++));
        if [ $i == 1 ]; then
                oldname=$names
                #echo "-- $i $names"
                shift;
        else
               oldname1=$names.$$
        awk  'NR==FNR { _[$1]=$2 } NR!=FNR { if(_[$1] != "") nn=0; nn=($2+_[$1]); print $1" "nn }' $names $oldname> $oldname1
        if [ $i -gt 2 ]; then
            rm $oldname;
        fi
                oldname=$oldname1

    fi
done
echo "------------------------------ $i"
cat $oldname 
```

当我运行它时，相同的列会被添加，但仅出现在其中一个文件中的列不会

```
./test.sh 
------------------------------ 3
aa 3
bb 6
cc 9
ee 4 
```

ff dd 没有出现在列表中，从我在 NR==FR 中看到的

我遇到过这个：

[http://dbaspot.com/shell/246751-awk-comparing-two-files-problem.html](http://dbaspot.com/shell/246751-awk-comparing-two-files-problem.html)

```
you want all the lines in file1 that are not in file2,
awk 'NR == FNR { a[$0]; next } !($0 in a)' file2 file1

If you want only uniq lines in file1 that are not in file2,
awk 'NR == FNR { a[$0]; next } !($0 in a) { print; a[$0] }'
file2
file1 
```

但这只会在尝试时使当前问题进一步复杂化，因为许多其他字段被重复

**发布问题后 - 更新内容......和测试......**

我想坚持使用 awk，因为它似乎是实现结果的更短的方法，但仍然存在问题..

```
awk '{a[$1]+=$2}END{for (k in a) print k,a[k]}'  file1 file2 file3
aa 3
bb 6
cc 9
ee 4
ff 4
gg 4
RESULT_SET_4 0
RESULT_SET_3 0
RESULT_SET_2 0
RESULT_SET_1 0
$ cat file1 
RESULT_SET_1
aa 1
RESULT_SET_2
bb 2
RESULT_SET_3
cc 3
RESULT_SET_4
ff 4
$ cat file2
RESULT_SET_1
aa 1
RESULT_SET_2
bb 2
RESULT_SET_3
cc 3
RESULT_SET_4
ee 4 
```

文件内容并没有像原来那样保留，即结果不在标题下，我原来的方法确实保持原样

**更新了预期输出 - 正确上下文中的标题**

```
cat file1 
RESULT_SET_1
aa 1
RESULT_SET_2
bb 2
RESULT_SET_3
cc 3
RESULT_SET_4
ff 4

cat file2 
RESULT_SET_1
aa 1
RESULT_SET_2
bb 2
RESULT_SET_3
cc 3
RESULT_SET_4
ee 4

cat file3
RESULT_SET_1
aa 1
RESULT_SET_2
bb 2
RESULT_SET_3
cc 3
RESULT_SET_4
gg 4
test.sh awk line to produce above is :

awk -v i=$i 'NR==FNR { _[$1]=$2 } NR!=FNR { if (_[$1] != "") { if  ($2 ~ /[0-9]/)   { nn=($2+_[$1]); print $1" "nn; } else { print;} }else { print; } }' $names $oldname> $oldname1

./test.sh 
------------------------------ 3
RESULT_SET_1
aa 3
RESULT_SET_2
bb 6
RESULT_SET_3
cc 9
RESULT_SET_4
ff 4 
```

有效但破坏了所需的格式

```
 awk '($2 != "")  {a[$1]+=$2};  ($2 == "") {  a[$1]=$2 } END {for (k in a) print k,a[k]} '  file1 file2 file3
    aa 3
    bb 6
    cc 9
    ee 4
    ff 4
    gg 4
    RESULT_SET_4 
    RESULT_SET_3 
    RESULT_SET_2 
    RESULT_SET_1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:14:17.327

```
$ awk '{a[$1]+=$2}END{for (k in a) print k,a[k]}' file1 file2 file3 | sort
aa 3
bb 6
cc 9
dd 4
ee 4
ff 4 
```

**编辑：**

这有点像黑客，但它可以完成工作：

```
$ awk 'FNR==NR&&!/RESULT/{a[$1]=$2;next}($1 in a){a[$1]+=$2}END{for (k in a) print k,a[k]}' file1 file2 file3 | sort | awk '$1="RESULTS_SET_"NR"\n"$1'
RESULTS_SET_1
aa 3
RESULTS_SET_2
bb 6
RESULTS_SET_3
cc 9
RESULTS_SET_4
ff 4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T14:27:27.783

您可以`awk`按照 sudo_O 的建议在 中执行此操作，但您也可以在纯 bash 中执行此操作。

```
#!/bin/bash

# We'll use an associative array, where the indexes are strings.
declare -A a

# Our list of files, in an array (not associative)
files=(file1 file2 file3)

# Walk through array of files...
for file in "${files[@]}"; do
  # And for each file, increment the array index with the value.
  while read index value; do
    ((a[$index]+=$value))
  done < "$file"
done 

# Walk through array. ${!...} returns a list of indexes.
for i in ${!a[@]}; do
  echo "$i ${a[$i]}"
done 
```

结果：

```
$ ./doit
dd 4
aa 3
ee 4
bb 6
ff 4
cc 9 
```

如果你想对输出进行排序......你可以通过`sort`. :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T15:53:54.230

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk File1 File2 File3 
```

内容`script.awk`：

```
sub(/RESULT_SET_/,"") {

    i = $1
    next
}

{
    a[i][$1]+=$2
}

END {
    for (j=1;j<=length(a);j++) {

        print "RESULT_SET_" j

        for (k in a[j]) {
            print k, a[j][k]
        }
    }
} 
```

结果：

```
RESULT_SET_1
aa 3
RESULT_SET_2
bb 6
RESULT_SET_3
cc 9
RESULT_SET_4
ee 4
ff 4
gg 4 
```

或者，这是单线：

```
awk 'sub(/RESULT_SET_/,"") { i = $1; next } { a[i][$1]+=$2 } END { for (j=1;j<=length(a);j++) { print "RESULT_SET_" j; for (k in a[j]) print k, a[j][k] } }' File1 File2 File3 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-15T09:51:45.333

使用此修复基本上它会遍历每个文件，如果条目存在于另一侧，它将将该条目添加到近似行号为 0 值，以便它可以总结内容 - 一直在我当前的输出上进行测试，似乎工作得很好

```
#!/bin/bash

 files="file1 file2 file3 file4 file5 file6 file7 file8"
RAND="$$"
i=0;
oldname="";
for names in $(echo $files); do
        ((i++));
        if [ $i == 1 ]; then
                oldname=$names
                shift;
        else
               oldname1=$names.$RAND
        for entries in $(awk -v i=$i 'NR==FNR { _[$1]=$2 } NR!=FNR { if (_[$1] == "") { if  ($2 ~ /[0-9]/)   { nn=0; nn=(_[$1]+=$2);  print FNR"-"$1"%0"} else { } } else { } }' $oldname $names); do
                line=$(echo ${entries%%-*})
                content=$(echo ${entries#*-})
                content=$(echo $content|tr "%" " ")

edit=$(ed -s $oldname  << EOF
$line
a
$content
.
w
q
EOF 
)

$edit  >/dev/null 2>&1

done

                awk -v i=$i 'NR==FNR { _[$1]=$2 } NR!=FNR { if (_[$1] != "") { if  ($2 ~ /[0-9]/)   { nn=0; nn=($2+_[$1]); print $1" "nn; } else { print $1;} }else { print; } }' $names $oldname> $oldname1
        oldname=$oldname1
    fi
done

cat $oldname
#rm file?.* 
```

# c# - 将用户从 Web 表单中的文本框添加到数据库

> ID：14876627
> 
> 赞同：0
> 
> 时间：2013-02-14T14:06:15.297
> 
> 标签：c#, asp.net, webforms

单击按钮后，我试图将用户名保存到数据库中，`Add User`但是遇到了麻烦，这就是我所拥有的：

```
 private void btnAddUser_Click(object sender, EventArgs e)
    {
        using (var db = new DocMgmtDataContext())
        {
            User user = new User()
            {
                FullName = (NewUserName.Text as User).ID
            };
            db.Users.InsertOnSubmit(user);
            db.SubmitChanges();
        }
        UpdateUserLists();
    } 
```

它不喜欢这个`as User`部分。

**我的解决方案**

`FullName = NewUserName.Text, ID = Guid.NewGuid()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:08:34.407

`NewUserName.Text`可能是类型`String`，您正试图将其转换为`User`. 这肯定行不通。

试试这个：

```
 FullName = NewUserName.Text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:08:17.520

改变这个

```
 FullName = (NewUserName.Text as User).ID 
```

对此

```
 FullName = NewUserName.Text 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:08:49.947

我假设`NewUserName Textbox`您想从您那里获得用户`FullName`，因此将您的代码更改为：

```
private void btnAddUser_Click(object sender, EventArgs e)
{
    using (var db = new DocMgmtDataContext())
    {
         User user = new User()
         {
                FullName = NewUserName.Text //fix
         };
         db.Users.InsertOnSubmit(user);
         db.SubmitChanges();
    }
} 
```

# cmake - 在 CMake 中，是否可以构建从构建树导入的依赖项？

> ID：14876628
> 
> 赞同：5
> 
> 时间：2013-02-14T14:06:18.557
> 
> 标签：cmake, build-process, build-automation

我正在尝试使用 CMake 功能从构建树中导出/导入目标（请参阅[此 wiki 页面](http://www.cmake.org/Wiki/CMake/Tutorials/Exporting_and_Importing_Targets#Exporting_from_a_Build_Tree)）。我有这个`dependency`库：

```
add_library(dependency SHARED dependency.cpp)
export(TARGETS dependency FILE dependency-targets.cmake) 
```

一个可执行文件在另一个项目中使用这个库：

```
include(${DEPENDENCY_PATH}/dependency-targets.cmake)

add_executable(main-app main.cpp)
target_link_libraries(main-app dependency) 
```

这工作正常。虽然我确实理解这种导出/导入机制“仅”提供了一种方便的方式来引用外部二进制文件，但我想知道在运行时是否可以`dependency`编译？使用导入机制（我怀疑）还是使用另一种？`make``main-app`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:19:18.253

您可以查看“超级构建”模式和[ExternalProject](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#module%3aExternalProject)。

这个想法的要点是你建立一个只使用`ExternalProject_Add()`命令的“超级构建”项目；这将设置您的真实项目及其所有依赖项。

# ruby - Ruby 的 attr_accessor 魔术方法定义

> ID：14876635
> 
> 赞同：2
> 
> 时间：2013-02-14T14:06:42.163
> 
> 标签：ruby

为了更好地理解 Ruby，我决定重新创建 attr_accessor 方法。成功。我现在明白了它是如何工作的，除了一个关于 Ruby 语法糖的细节。这是我创建的 attr_accessor 方法：

```
def attr_accessor(*attributes)
  attributes.each do |a|
    # Create a setter method (obj.name=)
    setter = Proc.new do |val|
      instance_variable_set("@#{a}", val)
    end

    # Create a getter method (obj.name)
    getter = Proc.new do
      instance_variable_get("@#{a}")
    end

    self.class.send(:define_method, "#{a}=", setter)
    self.class.send(:define_method, "#{a}", getter)
  end
end 
```

在我看来，我只是定义了两个方法，`obj.name`作为 getter 和`obj.name=`作为 setter。但是当我在 IRB 中执行代码并调用`obj.name = "A string"`它时，它仍然有效，即使我定义了没有空格的方法！

我知道这只是定义 Ruby 的魔力的一部分，但究竟是什么让它起作用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:47:01.490

When the ruby interpreter sees `obj.name = "A string`, it will ignore the space between `name` and `=` and look for a method named `name=` on your `obj`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T14:45:37.237

没关系，'A string' 是一个非常好的消息名称，试试

```
obj.send "A string" # ^_^ 
```

你甚至可以使用数字：

```
o = Object.new
o.define_singleton_method "555" do "kokot" end
o.send "555" 
```

# magento - 产品导出csv的文件路径是什么

> ID：14876636
> 
> 赞同：-3
> 
> 时间：2013-02-14T14:06:44.183
> 
> 标签：magento, csv, path

我只想知道文件的路径，我可以根据需要自定义产品导出 csv 的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:55:48.847

在根目录上创建 export.csv ..编写代码来导出 csv 新的事情是您必须在产品路径中硬编码基本 url..

例如..现有路径类别/产品/

基本网址/类别/产品/

但请记住保持代码正确..

# oracle - 数据泵从大端到小端的转换

> ID：14876637
> 
> 赞同：0
> 
> 时间：2013-02-14T14:06:47.310
> 
> 标签：oracle, datapump

我在单个转储文件中有带有表的 Oracle DataPump。它们是从 Big Endian 系统 (Solaris) 导出的，现在我需要将它们导入到 Little Endian 系统 (Windows)。

如果我尝试在不进行转换的情况下导入，我的表格中有不可读的 cyrillyc 符号。

我曾尝试使用 rman convert，但它似乎只适用于 Oracle 使用的数据文件，而不是 DataPumps。

我没有选择使用传输所需的表创建表空间并对其进行转换。

这怎么可能解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-11T03:07:28.420

嗨，您应该改用 TTS，但我似乎不完全支持它。

例如：如何在跨平台或跨 32 位和 64 位服务器传输数据时使用导出和导入（文档 ID 277650.1）

或者

12C - 使用跨平台增量备份减少可传输表空间停机时间（文档 ID 2005729.1）

# java - Java：无论我使用哪种方法，我都无法将双精度数舍入到小数点后 4 位

> ID：14876648
> 
> 赞同：0
> 
> 时间：2013-02-14T14:07:27.767
> 
> 标签：java, rounding

我需要将一些双精度数舍入到小数点后 3 到 4 位。我尝试了 3 种不同的方法，它们都不起作用。

对于我拥有的大多数双打，它都有效，但无论如何我仍然拥有这样的双打：

*   0.12919999999999998
*   0.12365000000000001
*   36371.922099999996

到目前为止，我尝试了以下方法：

```
-- 1
(double) Math.round(someDouble * 10000) / 10000

-- 2
DecimalFormat twoDForm = new DecimalFormat("0.0000");
twoDForm.format(someDouble);

-- 3
BigDecimal bd = new BigDecimal(someDouble);
bd = bd.setScale(4, BigDecimal.ROUND_HALF_UP); 
```

有没有人有我正在寻找的神奇解决方案:)？

谢谢 ！

注意：这是完整的代码：

```
// Processing
        long start = System.nanoTime();

        for (int i = 0; i < loopSize; i++) {
            process();
        }
        // end timer
        long absTime = System.nanoTime() - start;
        double absTimeMilli = absTime * 1e-6;

        DecimalFormat t = new DecimalFormat("###.####");

        context.setTotalTime(Double.valueOf(t.format(absTimeMilli)));
        context.setUnit(TimeUnit.SECONDS);
        context.setMeanTime(Double.valueOf(t.format(absTimeMilli / Const.BENCH_LOOP_COUNT)));
        context.setExecPerTimeUnit(Double.valueOf(t.format(loopSize / (absTimeMilli*1e-3)))); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:16:12.597

如果您将结果存储**回**一个`double`类型（您的第一个示例暗示您是），那么这将发生。Double 不能存储一些数字。

舍入后，将结果存储在 a`BigDecimal`或 a`String`中。

**更新 - 请参阅下面的评论**

可能误解了您的评论，但类似这样。

```
// this.totalTime += (1.0/someInteger)*myValue

BigDecimal 比率 = BigDecimal.ONE.divide(new BigDecimal(someInteger));
totalTime = totalTime.add(ratio.multiply(myValue));

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:11:04.423

```
double val = 2.33333333;
DecimalFormat df2 = new DecimalFormat("###.####"); 
```

试试这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:21:16.083

由于浮点表示的限制，双精度不能表示所有可能的十进制值（有关更多信息，请参见[http://en.wikipedia.org/wiki/Floating_point](http://en.wikipedia.org/wiki/Floating_point)或只是谷歌“浮点精度问题”）。因此，如果您需要处理舍入值，只需将它们存储在 BigDecimal 中，将其舍入并继续使用它而不是返回到双精度值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T11:47:17.220

到目前为止，这是我所知道的...要舍入双精度，您应该像这样使用 BigDecimal：

```
double yourDouble = 0.123456789;
int scale = 3;
double yourRoundedDouble = new BigDecimal(yourDouble).setScale(scale, RoundingMode.HALF_UP).doubleValue(); 
```

结果将是：`0.123`。

请注意，“比例”是您希望在该点之后拥有的位数。希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-27T05:56:28.107

我不确定你在找什么，我做这样的计算

```
double p=36371.922099999996;

p=Math.round(p *10000.0000)/10000.0000;

System.out.println(p); 
```

我得到 36371.9221

尝试一下

# mysql - MySQL.Cluster (NDB) 的外键

> ID：14876649
> 
> 赞同：1
> 
> 时间：2013-02-14T14:07:32.707
> 
> 标签：mysql, foreign-keys, database-cluster

从 7.3 版开始，MySQL Cluster 应该能够进行外键约束。但这是发生的事情：

```
DROP TABLE IF EXISTS t2;
DROP TABLE IF EXISTS t1;

CREATE TABLE t1 (
id INT PRIMARY KEY
) ENGINE='InnoDB';

CREATE TABLE t2 (
id INT PRIMARY KEY,
t1id INT
) ENGINE='InnoDB';

ALTER TABLE t2
ADD CONSTRAINT t2t1 FOREIGN KEY (t1id) REFERENCES t1 (id) 
ON DELETE CASCADE ON UPDATE CASCADE; 
```

这是使用 InnoDB 并且一切正常。现在用 NDB 试试：

```
DROP TABLE IF EXISTS t2;
DROP TABLE IF EXISTS t1;

CREATE TABLE t1 (
id INT PRIMARY KEY
) ENGINE='NDB';

CREATE TABLE t2 (
id INT PRIMARY KEY,
t1id INT
) ENGINE='NDB';

ALTER TABLE t2
ADD CONSTRAINT t2t1 FOREIGN KEY (t1id) REFERENCES t1 (id) 
ON DELETE CASCADE ON UPDATE CASCADE;

-- ERROR 150 (HY000): Cannot add foreign key constraint 
```

现在奇怪的部分：

```
DROP TABLE IF EXISTS t2;
DROP TABLE IF EXISTS t1;

CREATE TABLE t1 (
id INT UNIQUE KEY
) ENGINE='NDB';

CREATE TABLE t2 (
id INT PRIMARY KEY,
t1id INT
) ENGINE='NDB';

ALTER TABLE t2
ADD CONSTRAINT t2t1 FOREIGN KEY (t1id) REFERENCES t1 (id) 
ON DELETE CASCADE ON UPDATE CASCADE; 
```

工作得很好。

是否有任何规则说“使用 NDB 存储引擎，您不能在外键约束中引用主键列”或“使用 NDB，您必须在外键约束中引用 UNIQUE KEYS”？

让事情变得更奇怪：

如果将 t1 的定义替换为

```
CREATE TABLE t1 (
id INT UNIQUE KEY NOT NULL
) ENGINE='NDB'; 
```

你得到同样的错误。

我认为这`PRIMARY KEY`意味着`NOT NULL`问题不在于前者，而在于后者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T10:43:35.930

从我从 MySQL 网站和 Dev 博客中收集到的信息：

> 与 InnoDB 中的外键实现的一个重要区别是**MySQL 集群不支持从数据节点本身更新主键**- 而是**使用 DELETE 后跟 INSERT 操作模拟 UPDATE**。因此，如果父引用使用主键，则 UPDATE 操作将返回错误，除非使用 CASCADE 操作，在这种情况下，删除操作将导致子表中的相应行被删除。**工程团队计划在随后的预览版中改变这种行为**。

*   [MySQL 集群中的外键](http://www.clusterdb.com/mysql-cluster/foreign-keys-in-mysql-cluster/)
*   [新的 MySQL Cluster 7.3 预览](https://dev.mysql.com/tech-resources/articles/cluster-7.3-dmr.html)
*   [MySQL Cluster 7.3 Labs 发布 - 外键在！](https://blogs.oracle.com/MySQL/entry/mysql_cluster_7_3_labs)
*   [最近的 MySQL 集群帖子](https://blogs.oracle.com/MySQL/category/Oracle/MySQL+Cluster)

尚未确认是否支持此类操作。

# php - 最快的写法

> ID：14876653
> 
> 赞同：3
> 
> 时间：2013-02-14T14:07:41.507
> 
> 标签：php, keyboard-shortcuts, echo, sublimetext2, php-shorttags

关于是否应该使用`<?php echo ?>`或的堆栈交换有很多问题`<?= ?>`。

我已经决定使用`<?php echo ?>`，但想知道是否有一种创建快捷方式的好方法可以节省编写本文的时间。

目前我使用默认设置的 Sublime Text 2，没有安装任何插件或任何东西，我不是“超级用户”。但我确实知道，如果我输入 php 然后按 tab 它输出：`<?php ?>`。

有没有办法在其中获得回声，这样做是个好主意吗？有人已经这样做了吗？

PS我应该补充一点，我并不总是希望出现回声，因为我并不总是需要回声。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:24:07.393

您可以将片段绑定到击键。

```
<snippet>
    <content>
        <![CDATA[<?php echo ${1:What to echo}; ?>]]>
    </content>
    <description>Basic echo</description>
</snippet> 
```

将上述内容另存为 echo.sublime-snippet 在您的 Packages/User 文件夹中，然后编辑**Default（*您在此处选择的操作系统*）.sublime-keymap**并添加

`{ "keys": ["command+e"], "command": "insert_snippet", "args": {"name": "Packages/User/echo.sublime-snippet" } }`

将 command-e 替换为您要使用的任何组合键。现在，当你点击命令 & e Sublime 会 `<?php echo ;?>`为你添加并将插入光标放在 ; 为您服务 - 然后您可以开始输入需要回显的内容。

您也可以替换`${1:What to echo}`为，当您突出显示文本并点击命令 & e 时，Sublime 将用&`$TM_SELECTED_TEXT`包裹您选择的文本。`<?php echo``;?>`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T14:16:51.080

只需重新决定并使用速记语法：

```
 <?= ?> 
```

它不仅打字快而且占用空间小

`<?php`每次你需要一个控制结构时，一个宏都会破坏你 -`foreach`等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-14T22:01:08.593

`php`, TAB, `e`, TAB 然后写下你想要回显的文本。

### 笔记

为了使自动完成工作，文档语法必须是 PHP。如果不是这种情况，请执行`CTRL`++打开命令托盘，输入 PHP 并`Shift`选择`P``Set Syntax: PHP`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T14:10:33.810

您可以在工具 > 片段下查看可用的片段。我相信有一个内置的 echo 片段，它很简单`echo`，然后通过 tab 来产生`<?php echo ?>`

要创建新片段，请转到工具 > 新片段

[SublimeText2 文档中的片段](http://sublimetext.info/docs/en/extensibility/snippets.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T14:15:31.933

查看[http://docs.sublimetext.info/en/latest/extensibility/completions.html](http://docs.sublimetext.info/en/latest/extensibility/completions.html)

查看现有的 PHP 完成文件，您应该能够插入一个新的，如下所示：

```
{ "trigger": "?pe", "contents": "<?php  echo ?>" } 
```

那么你会做`?pe<tab>`- 但请注意我不是一个崇高的文本 2 用户 =P

# string - Powershell concat字符串和变量内联？

> ID：14876654
> 
> 赞同：3
> 
> 时间：2013-02-14T14:07:43.503
> 
> 标签：string, powershell, cmdlet

我想做以下事情：

```
New-WebVirtualDirectory -Site "Site1" -Name "XX_$args[0]" -physicalPath "c:\sites\XX_$args[0]" 
```

其中“XX_”是一个静态字符串，而 $args[0] 是传递给脚本的第一个参数。现在我知道我可以通过创建两个变量然后将这些变量传递给 cmdlet (New-WebVirtualDirectory) 来“解决”这个问题，但是有什么方法可以串联静态字符串和变量 ($args[0])不加两个变量？

我尝试将它们包含在 ( ) 中（例如 -Name ("XX_" + $args[0]) ）但没有成功。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T14:13:06.433

尝试：

```
"XX_$($args[0])" 
```

$(..) 在字符串中以正确的方式扩展数组变量或变量属性的值。

# mongoose - 获取 mongoose 在包含 ObjectId 的 find() 回调中返回的数组中的元素数

> ID：14876656
> 
> 赞同：0
> 
> 时间：2013-02-14T14:07:52.957
> 
> 标签：mongoose

我想计算数组中元素的数量。

问题是`.length`在这种特定情况下使用 mongoose 方法不起作用`find()`：

我在文档上阅读了这个`find()`方法返回一个数组（我只选择`_id`我`find()`调用的字段）。

返回的数组完全符合语法：`[{ _id: 51153212835b351826000001 }]`

该`.length`方法适用于它 return `undefined`。我用 node 做了一些测试，它也不起作用，因为没有`quotes`封装`_id`.

此值的类型`ObjectId`由 提供`mongoose`。我可以通过这种方式`Doc.id`毫无问题地访问它。

问题是，这是`find()`mongoose 方法返回的格式，有没有办法获取回调中找到的元素数量？

我没有在文档中找到它，回调看起来像`function(err, Doc)`，但猫鼬确实在更新回调中提供了这个值，`function(error, numAffected)` 所以我想知道也许我们也可以使用`find()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T10:09:20.073

因为这个，我终于使用了`count`猫鼬方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:14:20.067

您在此处显示的语法不是有效的数组文字。更准确地说，这个数组中唯一的元素是一个对象，并且这个对象不是有效的对象字面量，因为 的值`_id`不是数字。不是`b`在值范围内。因此，不仅该`length`属性不起作用，而且该字符串无法评估为有效的 JS 对象。`_id`需要引用的值。

# c# - 是否可以将数据网格绑定到对象

> ID：14876676
> 
> 赞同：0
> 
> 时间：2013-02-14T14:08:38.493
> 
> 标签：c#, wpf, data-binding, wpfdatagrid, observablecollection

我想将 DataGrid 绑定到一个对象，而不是对象的集合，

我的情况是，

我在数据库中有一条记录，其中包含用户将不断更新的几列，
出于 UI 设计目的，我们希望用户通过具有单行的 DataGrid 来更新它。作为一种解决方法，我创建了一个 ObserverbaleCollection 并添加了该记录，但我想以正确的方式进行操作，所以请有人指导我。

谢谢

ps按要求如下

这是我尝试的数据网格的xaml

```
<DataGrid CanUserAddRows="False" IsReadOnly="False" AutoGenerateColumns="False" ItemsSource="{Binding FacilityDefaults}">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Price " Binding="{Binding Price,UpdateSourceTrigger=LostFocus}"/>
        <DataGridTextColumn Header="Default Temperature" Binding="{Binding DefaultTemperature,UpdateSourceTrigger=LostFocus}"/>
    </DataGrid.Columns>
</DataGrid>` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:23:03.250

首先，使用 Datagrid 作为单个记录的编辑机制似乎是错误的选择。Datagrid 用于处理项目的集合，而不是真正的单个项目。但是，如果您坚持以这种方式使用它，那么绑定到仅包含一条记录的集合是使其工作的最简单方法。DataGrid 的 ItemsSource 需要一个 IEnumerable ( [MSDN](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid%28v=vs.95%29.aspx) )，因此将其绑定到单个对象至少可以说是尴尬的。

# vb.net - 在 Visual Basic 中使用复选框启用和禁用 TextBox

> ID：14876677
> 
> 赞同：-2
> 
> 时间：2013-02-14T14:08:43.253
> 
> 标签：vb.net, checkbox, textbox

我有 6 个文本框和 6 个复选框。现在我想用 CheckBox1 禁用 TextBox1 并用 Same CheckBox 重新激活它。怎么能做到？

编辑1 15.55 14/02/2013

我这样做是为了解决我的问题！

> `Private Sub CheckBox1_CheckedChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles CheckBox1.CheckedChanged
> If CheckBox1.Checked = True Then
> TextBox1.Enabled = False
> ElseIf CheckBox1.Checked = False Then
> TextBox1.Enabled = True End If End Sub` `

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T16:02:47.230

这将起作用，只需为其他复选框添加更多

```
Private Sub CheckBox1_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles CheckBox1.CheckedChanged
        If CheckBox1.Checked = True Then
            TextBox1.Enabled = True
        Else
            TextBox1.Enabled = False
        End If
End Sub 
```

这是做什么的：如果 checkbox1 被选中，checked_changed 事件触发并且里面的代码被运行。if 语句查看复选框是否被选中。如果选中，则将 textbox1 设置为启用，否则将其设置为禁用。确保在创建程序时将 enabled 属性设置为启用或禁用。如果您希望从一开始就启用它，这是默认设置....否则在其属性视图中将其设置为禁用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:29:41.130

```
Private Sub CheckBox1_CheckedChanged(sender As Object, e As EventArgs) Handles CheckBox1.CheckedChanged
    TextBox1.Enabled = CheckBox1.Checked
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:14:54.613

看看下面的这个教程。之后，查看复选框控件的事件并选择最合适的一个。您将在文本框上更改的属性是**Enabled**。

[http://www.youtube.com/watch?v=4PbUryXqZ50](http://www.youtube.com/watch?v=4PbUryXqZ50)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-15T16:05:54.613

如果您有一个内置的层，您可以将对象发送到后面（因此隐藏事物），则此方法有效。我使用它作为使文本框和其他项目根据其他选择出现和消失的一种方式。

```
Private Sub checkbox_Click()
    If (checkbox = True) Then

    ActiveSheet.Shapes("textbox").ZOrder msoSendToFront
    ActiveSheet.Shapes("textbox").ZOrder msoSendToFront

    Else

    ActiveSheet.Shapes("textbox").ZOrder msoSendToBack
    ActiveSheet.Shapes("textbox").ZOrder msoSendToBack

    End If

End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-02T20:59:01.207

这对我有用：

```
Public Class Form1
    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

        TextBox1.Enabled = False

        If Not TextBox1.Enabled Then
            TextBox1.BackColor = Color.White
        End If
    End Sub
    Private Sub CheckBox1_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles CheckBox1.CheckedChanged
        If CheckBox1.Checked = True Then
            TextBox1.Enabled = True
        Else
            TextBox1.Enabled = False
        End If
    End Sub
End Class 
```

# arel - 使用 Arel 的无表选择

> ID：14876678
> 
> 赞同：0
> 
> 时间：2013-02-14T14:08:45.477
> 
> 标签：arel

如何仅使用 Arel 函数编写以下 SQL 查询？

```
select array_to_string(array(select name from tags, taggings where tags.id=taggings.id), ', ') 
```

警告：这是一个 SQL 片段，它应该是更大的相关子查询的一部分 - 孤立它可能没有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T04:56:40.573

Arel（至少 3-0-stable）对命名函数没有最大的支持，所以它看起来很丑。下面的代码使用连接生成一个版本

```
tags_tbl = Arel::Table.new("tags")
taggings_tbl = Arel::Table.new("taggings")
arel = Arel::Nodes::NamedFunction.new(:array_to_string, [
  Arel::Nodes::NamedFunction.new(:array, [
    Arel.sql(
      tags_tbl.project(
        tags_tbl[:name]
      ).join(
        taggings_tbl
      ).on(
        tags_tbl[:id].eq(taggings_tbl[:id])
      ).to_sql
    )
  ])
])
arel.to_sql # => array_to_string(array(SELECT "tags"."name" FROM "tags" INNER JOIN "taggings" ON "tags"."id" = "taggings"."id")) 
```

# jquery - 使用 url 将可配置产品添加到购物车

> ID：14876680
> 
> 赞同：1
> 
> 时间：2013-02-14T14:09:00.337
> 
> 标签：jquery, magento, url-parameters

我正在尝试使用 url 参数将可配置的产品添加到购物车，但我仍然收到“请指定产品的选项”。当我尝试使用 url 将产品添加到购物车时：

```
/myConfigurableProduct.html?options=cart&product=6&related_product=&super_attribute[146]=60&super_attribute[147]=67&super_attribute[145]=57&super_attribute[144]=49&super_attribute[148]=69&super_attribute[149]=75&super_attribute[150]=80&qty=1 
```

我查看了 Magento 文档以找到解决方案，发现可以使用 购物车页面完成此操作`/cart/add?`，但我正在尝试从产品视图页面执行此操作。

选择的 url super_attributes 使用表单提交时不显示错误，但使用 url 时失败。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:21:26.210

只是为了解释一些事情，假设您希望产品页面上有一个链接，该链接以特定配置的方式将产品添加到购物车。例如，让我们使用“T 恤”的旧备用。属性可能有颜色和大小。还假设您销售具有尺寸和颜色的“裤子”，但您希望用户能够使用裤子的下拉菜单并有 T 恤的按钮。

按钮将预先配置，裤子将允许任何选择

您将在 app/designt/frontend/YOURTHEME/default/template/catalog/product/view.phtml 中执行以下操作

寻找

```
<?php if ($_product->isSaleable() && $this->hasOptions()):?>
    <?php echo $this->getChildChildHtml('container2', '', true, true) ?>
<?php endif;?> 
```

并用这样的东西替换它

```
 <?php 
    if ($_product->isSaleable() && $this->hasOptions())
    {
        $attSetName = "TSHIRT";
        $product = Mage::registry('current_product');
        $attributeSetModel = Mage::getModel("eav/entity_attribute_set");
        $attributeSetModel->load($product->getAttributeSetId());
        $attributeSetName  = $attributeSetModel->getAttributeSetName();

        // Its only going to work on Tshirts that are configurable products
        // All others (PANTS) will fall to the default magento functionality
        if (strtoupper($attributeSetName)== $attSetName && $product->getTypeId() == "configurable")
        {
            // Here is where you will add the cart links to set up products directly to the cart
            // It *MAY* make more sense to set these up as custom variables, but for simplicity's sake, lets just hard code them in here for now

            $productA = "/?super_attribute[146]=60&super_attribute[147]=67&super_attribute[145]=57&super_attribute[144]=49&super_attribute[148]=69&super_attribute[149]=75&super_attribute[150]=80&qty=1";
            $productB = "/?super_attribute[146]=60&super_attribute[147]=67&super_attribute[145]=57&super_attribute[144]=49&super_attribute[148]=69&super_attribute[149]=75&super_attribute[150]=80&qty=1";

            echo '<div id="YOURATTRIBUTESETNAMEcustomProducst">';
            echo '<a href="/checkout/cart/add/product/' . $_product->getId() . $productA . '" />Buy Custom Option A</a>';
            echo '<a href="/checkout/cart/add/product/' . $_product->getId() . $productB . '" />Buy Custom Option B</a>';
            echo '</div>';
        }
    }
    else
    {
        // Do the default magento action
        // *not sure if container1 or container2\. Each section does its own thing so
        // just experiment. Mine was container2
        echo $this->getChildChildHtml('container2', '', true, true);
    }

?> 
```

此代码未经测试。我在运行中对其进行了编码，并且我坚信这是找到一个好的解决方案的良好基础！祝你好运。

# c++ - How to make 8-bit bitmap appear as monochrome in C++?

> ID：14876685
> 
> 赞同：3
> 
> 时间：2013-02-14T14:09:23.953
> 
> 标签：c++, image, bitmap, gdi

When I set up and create a 24-bit bitmap like this:

```
 //fileheader
    BITMAPFILEHEADER* bf = new BITMAPFILEHEADER;
    bf->bfType = 0x4d42;
    bf->bfSize = 6054400 + 54;
    bf->bfOffBits = 54;

    //infoheader
    BITMAPINFOHEADER* bi = new BITMAPINFOHEADER;
    bi->biSize = 40;
    bi->biWidth = 2752;
    bi->biHeight = -733;
    bi->biPlanes = 1;
    bi->biBitCount = 24;
    bi->biCompression = 0;
    //bi->biSizeImage = 6054400;
    bi->biXPelsPerMeter = 2835;
    bi->biYPelsPerMeter = 2835;
    bi->biClrUsed = 0;
    bi->biClrImportant = 0;

    pFrame->GetImage(m_imageData);

    //
    //create bitmap...
    //(hbit is a global variable)

    BITMAPINFO* bmi;
    bmi = (BITMAPINFO*)bi; 
    HDC hdc = ::GetDC(NULL);

    hbit = CreateDIBitmap(hdc, bi, CBM_INIT, m_imageData, bmi, DIB_RGB_COLORS); 
```

I get an output image like this: ![image1](../Images/ae5c86c21bd9681f4e8d343c55256733.png)

But when I change bitcount from 24 to 8 (which also allows for 3x image size, allowing me to go from 733 width to the image's natural width of 2200), I get an image like this (along with a lot of instability):

![image2](../Images/92dee57b530fede81194bb7fea915ebf.png)

My output looks like this:

```
 BITMAP* bi = new BITMAP;
    CBitmap bmp;
    bmp.Attach(hbit);
    CClientDC dc(pWnd);
    CDC bmDC;
    bmDC.CreateCompatibleDC(&dc);
    CBitmap *pOldbmp = bmDC.SelectObject(&bmp);
    bmp.GetBitmap(bi);
    dc.BitBlt(384,26,bi->bmWidth/3,bi->bmHeight,&bmDC,0,0,SRCCOPY);
    //note: if bitcount is 8, height and width need to be /3, 
          //if 24, only width gets /3 
    bmDC.SelectObject(pOldbmp);

    //explicitly delete everything just to be safe
    delete bi;
    DeleteObject(bmp);
    DeleteObject(dc);
    DeleteObject(pOldbmp);
    DeleteObject(bmDC); 
```

**So my questions are:**

*   Why is this happening when I switch from 24 to 8?
*   Is there an easy way to output the image as monochrome rather than color?

**One last thing:**

My coworker wrote this function a long time ago for a similar issue, but he said I may be able to use it. I can't get it to work, unfortunately:

```
void CopyMono8ToBgrx(byte* pDestBlue, byte* pDestGreen, byte *pDestRed, byte* pDestAlpha)
    {
        byte*               pSrc;
        byte*               pSrcEnd;

        pSrc = ( byte* ) m_imageData;
        pSrcEnd = pSrc + ( 2752*2200 );

        while ( pSrc < pSrcEnd )
        {
            byte data = *pSrc;

            *pDestBlue  = data;
            *pDestGreen = data;
            *pDestRed   = data;
            *pDestAlpha = 255;  // alpha is always 255 (fully opaque)

            pSrc++;
            pDestBlue   += 4;
            pDestGreen  += 4;
            pDestRed    += 4;
            pDestAlpha  += 4;
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T15:01:40.640

You should create a color pallete. Try this:

```
struct BITMAPINFO256 {
    BITMAPINFOHEADER bmiHeader;
    RGBQUAD bmiColors[256];
} bmi;
memset(&bmi, 0, sizeof(BITMAPINFO256));
bmi.bmiHeader.biSize = 40;
bmi.bmiHeader.biWidth = 2752;
bmi.bmiHeader.biHeight = -733;
bmi.bmiHeader.biPlanes = 1;
bmi.bmiHeader.biBitCount = 8;
bmi.bmiHeader.biCompression = 0;
bmi.bmiHeader.biXPelsPerMeter = 2835;
bmi.bmiHeader.biYPelsPerMeter = 2835;
bmi.bmiHeader.biClrUsed = 256;
bmi.bmiHeader.biClrImportant = 0;
for (unsigned int i = 0; i < 256; i++) {
    bmi.bmiColors[i].rgbRed   = i;
    bmi.bmiColors[i].rgbGreen = i;
    bmi.bmiColors[i].rgbBlue  = i;
} 
```

And then when you call `CreateDIBitmap` it will become:

```
hbit = CreateDIBitmap(hdc, &bmi.bmiHeader, CBM_INIT, m_imageData, (BITMAPINFO*)&bmi, DIB_RGB_COLORS); 
```

Also note that you should be careful to also increase the offset in your `BITMAPFILEHEADER` so that it it expresses that there is color pallete defined before the actual pixels data (yesterday I was having hard time because of this, see [Creating 8bpp bitmap with GDI and saving it as a file](https://stackoverflow.com/questions/14859138/creating-8bpp-bitmap-with-gdi-and-saving-it-as-a-file)):

```
bf->bfOffBits = 54 + sizeof(RGBQUAD)*256; 
```

And to that function that your coworker wrote: It's better to use [Luminance](http://www.songho.ca/dsp/luminance/luminance.html) to convert colors to gray-scale equivalents: ![enter image description here](../Images/da7bcb3b1d72f263802c12424f3522c5.png)

Hope this helps :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T14:24:39.587

8 bit per pixel images are assuming a color palette following `BITMAPINFOHEADER` structure (see [`BITMAPINFO::bmiColors`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183375%28v=vs.85%29.aspx)). If you make the palette to be 256 gray shades, the image is going to me 8 bpp grayscale. Now it's color with random colors on it.

The function `CopyMono8ToBgrx` you quoted creates full color bitmap, with gray individual pixels (R=G=B).

# c - connman1.11 无法获取所有服务和技术

> ID：14876686
> 
> 赞同：2
> 
> 时间：2013-02-14T14:09:22.170
> 
> 标签：c, linux

我是新来使用 connman。我已经安装了 connman1.11，`UBUNTU11.10`它在 ORACLE VM virtual Box 中运行。

在客户端下运行`connmanctl`时，如果我请求获取服务，我只会得到有线服务，而不是 Wifi 等其他服务。如果我请求技术，我会收到以下错误：

> *接口“net.connman.Manager”上带有签名“”的方法“GetTechnologies”不存在*

同样对于连接，扫描等请提供帮助，我必须进行哪些更改

# jquery - 检查 li 是否存在于 ul 中

> ID：14876692
> 
> 赞同：2
> 
> 时间：2013-02-14T14:09:43.957
> 
> 标签：jquery

我有一个 ul 叫：id = `listProjectRelated`

在文档准备好的 if 条件下，我需要添加 li 元素，其 id 将是：`liProfessionalMemberships`

如果 ul 元素中不存在 li 项，我想添加它。我怎样才能做到这一点？

```
 if ($('#hdnValueProMembershipSoid').val() != "0") {
     btnAddMore.show();
     $('#listProjectRelated').empty();
     $('#listProjectRelated').append("<li id='liProfessionalMemberships'>Professional Membership</li>");
 } 
```

我需要添加几乎 6 个不同的 li 元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:11:29.737

`$('#listProjectRelated li').length`应该做的伎俩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:11:32.907

你的意思是如果id为“liProfessionalMemberships”的元素不存在，那么添加它不是吗？

```
if (!$('#liProfessionalMemberships').length) {
    // ok to add stuff
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:11:46.027

检查是否`$("#liProfessionalMemberships").length`为 0。如果是，则将 li 添加到页面。

如果您有多个列表项，您可以将它们放在一个列表中，其中包含各自的 id 和标题（可见文本）：

```
var lis = [
     {id: "liProfessionalMemberships", title: "Professional Membership"},
     {id: "...", title: "..."}
];

for (var i=0;i<lis.length;i++)
{
    var li = lis[i];
    if ($("#" + li.id).length === 0)
    {
        $('#listProjectRelated').append("<li id='" + li.id + "'>" + li.title + "</li>");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T14:16:41.587

```
 if($('#liProfessionalMemberships').length == 0)
    {
        $('#listProjectRelated').append("<li id='liProfessionalMemberships'>Professional Membership</li>");
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T14:20:35.093

您可以执行以下操作：

```
if($("#listProjectRelated #liProfessionalMemberships").length) {
       $("#listProjectRelated ul").append('<li id="liProfessionalMemberships">Professional Membership</li>');
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T14:11:45.213

您需要`length`对象的属性：

```
if($('#hdnValueProMembershipSoid').val() != "0") 
{
    btnAddMore.show();
    $('#listProjectRelated').empty();

    if($('#liProfessionalMemberships').length == 0)
    {
        $('#listProjectRelated').append("<li id='liProfessionalMemberships'>Professional Membership</li>");
    }
} 
```

# javascript - 从 Javascript 中查找 HTML 元素像素尺寸

> ID：14876693
> 
> 赞同：2
> 
> 时间：2013-02-14T14:09:39.870
> 
> 标签：javascript, css, dom, cross-browser

我正在寻找一种可靠的跨浏览器方法来从 Javascript 中找到以下计算尺寸：

*   内容矩形：最里面的内容区域
*   客户矩形：内容区域 + 填充
*   完整的矩形：内容+填充+边框+边距

它不必完全是那个分组，我只是在寻找足够的信息来将任何框完全分解为 content->padding->border->margin 段。

（我可能不必关心滚动条，但如果它们也有明确定义的行为，我不介意知道这一点）

我希望能够将这些作为*像素*值获取，无论它们是如何从 CSS 中设置的。因此，即使在 eg`margin-left: auto`或的情况下`width: 50%`，我也希望能够以像素为单位提取计算结果。

请不要使用 jQuery 解决方案，我正在寻找 vanilla Javascript + DOM 答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T15:43:41.830

这可能会有所帮助：

```
<style>
  body { 
    margin: 10%;
    padding:10px 0 0;
    border:1px solid #000;
  }
</style>

var elem = document.body;

var computedStyle = window.getComputedStyle ? getComputedStyle(elem, '') : elem.currentStyle;

var marginTop = computedStyle.marginTop;
var borderTop = computedStyle.borderTopWidth;
var paddingTop = computedStyle.paddingTop;
console.log(marginTop);
console.log(borderTop);
console.log(paddingTop); 
```

// 对我来说返回 168px, 1px, 10px

但它返回 IE < 9 的百分比。对于旧版本，您应该将百分比转换为像素（您可以在此处找到更多信息[http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291](http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:12:48.543

jQuery 的做法是调用 .outerWidth() 或 .outerHeight()。在无法使用 jQuery 的情况下，您可以查看[jQuery 源代码](http://docs.jquery.com/Source_Code)以了解它们是如何实现这一点的。

或者，这里有一些答案会产生相同的结果。例如：[没有 jquery](https://stackoverflow.com/questions/5195402/outerwidth-without-jquery)的 YUI和outerWidth[中的 jQuery outerHeight() 等价物是什么](https://stackoverflow.com/questions/12680638/what-is-the-jquery-outerheight-equivalent-in-yui/12753203#12753203)。

从后者：

```
document.getElementById('container').offsetWidth; // "Outer" Width
document.getElementById('container').clientWidth; // "Inner" Width 
```

使用 .offsetHeight 和 .clientHeight 分别表示高度。

# java - 使 JFormattedTextField 接受超过 3 位的十进制

> ID：14876695
> 
> 赞同：2
> 
> 时间：2013-02-14T14:09:50.427
> 
> 标签：java, swing, jformattedtextfield

我有一个`JFormattedTextField`应该能够接受超过 3 个十进制数字的双数。它接受条目`0.1`, `0.01`，`0.001`但拒绝`0.0001`带有更多小数位数的数字。

这就是我的代码现在的工作方式：

```
DecimalFormat decimalFormat = new DecimalFormat("0.0E0");
JFormattedTextField txtfield = new JFormattedTextField(decimalFormat.getNumberInstance(Locale.getDefault())); 
```

如何让我的文本字段接受超过 3 个十进制数字的数字？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T14:21:20.403

> 它接受条目 0.1、0.01、0.001，但拒绝 0.0001 和具有更多小数位数的数字。

这应该可以在 [NumberFormat](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html) / [DecimalFormat （在你的情况下）中](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)`setMinimumFractionDigits(int)`通过和`setMaximumFractionDigits(int)`/或 设置`setRoundingMode(RoundingMode.Xxx)`，更多[关于格式化的 Oracle 教程](http://docs.oracle.com/javase/tutorial/i18n/format/index.html)

例如

```
final JFormattedTextField textField1 = new JFormattedTextField(new Float(10.01));
    textField1.setFormatterFactory(new AbstractFormatterFactory() {

        @Override
        public AbstractFormatter getFormatter(JFormattedTextField tf) {
            NumberFormat format = DecimalFormat.getInstance();
            format.setMinimumFractionDigits(2);
            format.setMaximumFractionDigits(2);
            format.setRoundingMode(RoundingMode.HALF_UP);
            InternationalFormatter formatter = new InternationalFormatter(format);
            formatter.setAllowsInvalid(false);
            formatter.setMinimum(0.0);
            formatter.setMaximum(1000.00);
            return formatter;
        }
    });
} 
```

# ruby - 如何将 unicode 字符串转换为 Ruby 中的符号字符？

> ID：14876702
> 
> 赞同：2
> 
> 时间：2013-02-14T14:10:23.113
> 
> 标签：ruby, unicode, encoding

我有以下字符串：

```
Ruby :: \u041D\u043E\u0432\u0438\u043D\u0438 
```

我的问题是如何将其转换为 utf8 字符（在我的情况下是西里尔字母）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T14:29:50.693

在 Ruby 1.9 中：

```
"\u041D\u043E\u0432\u0438\u043D\u0438".encode("UTF-8")
=> "Новини" 
```

# apache-flex - 将孩子绑定到 s:TileGroup

> ID：14876703
> 
> 赞同：0
> 
> 时间：2013-02-14T14:10:25.597
> 
> 标签：apache-flex, binding, mxml

当我的 MXML 在`TileGroup`.

```
<s:TileGroup width="90%">
    <admin:MyComponent width="300" height="150" serviceID="101" />
    <admin:MyComponent width="300" height="150" serviceID="102" />
    <admin:MyComponent width="300" height="150" serviceID="103" />
</s:TileGroup> 
```

我想做的是提供一个`Array`子元素，然后将元素绑定到`TileGroup`：

```
[Bindable]
private function get arrayOfChildren() :Array{
    return [
        new MyComponent(),
        new MyComponent(),
        new MyComponent(),
    ];
} 
```

如何绑定`arrayOfChildren`到容器中？

# php - Json对象与android集成

> ID：14876704
> 
> 赞同：2
> 
> 时间：2013-02-14T14:10:25.187
> 
> 标签：php, android, json

我已将此代码 [http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/) 用于 GCM 。但是每当我单击查看或创建新的生产按钮时都会遇到问题。我已经检查了教程下面描述的解决方案，但这并没有解决我的问题。这是我的

```
02-14 20:06:09.775: W/KeyCharacterMap(738): No keyboard for id 0
02-14 20:06:09.775: W/KeyCharacterMap(738): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
02-14 20:06:13.105: E/JSON Parser(738): Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject
02-14 20:06:13.105: W/dalvikvm(738): threadid=9: thread exiting with uncaught exception (group=0x40015560)
02-14 20:06:13.115: E/AndroidRuntime(738): FATAL EXCEPTION: AsyncTask #1
02-14 20:06:13.115: E/AndroidRuntime(738): java.lang.RuntimeException: An error occured while executing doInBackground()
02-14 20:06:13.115: E/AndroidRuntime(738):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
02-14 20:06:13.115: E/AndroidRuntime(738):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
02-14 20:06:13.115: E/AndroidRuntime(738):  at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
02-14 20:06:13.115: E/AndroidRuntime(738):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
02-14 20:06:13.115: E/AndroidRuntime(738):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
02-14 20:06:13.115: E/AndroidRuntime(738):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
02-14 20:06:13.115: E/AndroidRuntime(738):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
02-14 20:06:13.115: E/AndroidRuntime(738):  at java.lang.Thread.run(Thread.java:1019)
02-14 20:06:13.115: E/AndroidRuntime(738): Caused by: java.lang.NullPointerException
02-14 20:06:13.115: E/AndroidRuntime(738):  at com.example.androidhive.AllProductsActivity$LoadAllProducts.doInBackground(AllProductsActivity.java:130)
02-14 20:06:13.115: E/AndroidRuntime(738):  at com.example.androidhive.AllProductsActivity$LoadAllProducts.doInBackground(AllProductsActivity.java:1)
02-14 20:06:13.115: E/AndroidRuntime(738):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
02-14 20:06:13.115: E/AndroidRuntime(738):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
02-14 20:06:13.115: E/AndroidRuntime(738):  ... 4 more
02-14 20:06:14.213: E/WindowManager(738): Activity com.example.androidhive.AllProductsActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405375e0 that was originally added here
02-14 20:06:14.213: E/WindowManager(738): android.view.WindowLeaked: Activity com.example.androidhive.AllProductsActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@405375e0 that was originally added here
02-14 20:06:14.213: E/WindowManager(738):   at android.view.ViewRoot.<init>(ViewRoot.java:258)
02-14 20:06:14.213: E/WindowManager(738):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
02-14 20:06:14.213: E/WindowManager(738):   at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
02-14 20:06:14.213: E/WindowManager(738):   at android.view.Window$LocalWindowManager.addView(Window.java:424)
02-14 20:06:14.213: E/WindowManager(738):   at android.app.Dialog.show(Dialog.java:241)
02-14 20:06:14.213: E/WindowManager(738):   at com.example.androidhive.AllProductsActivity$LoadAllProducts.onPreExecute(AllProductsActivity.java:117)
02-14 20:06:14.213: E/WindowManager(738):   at android.os.AsyncTask.execute(AsyncTask.java:391)
02-14 20:06:14.213: E/WindowManager(738):   at com.example.androidhive.AllProductsActivity.onCreate(AllProductsActivity.java:57)
02-14 20:06:14.213: E/WindowManager(738):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-14 20:06:14.213: E/WindowManager(738):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-14 20:06:14.213: E/WindowManager(738):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-14 20:06:14.213: E/WindowManager(738):   at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-14 20:06:14.213: E/WindowManager(738):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-14 20:06:14.213: E/WindowManager(738):   at android.os.Handler.dispatchMessage(Handler.java:99)
02-14 20:06:14.213: E/WindowManager(738):   at android.os.Looper.loop(Looper.java:123)
02-14 20:06:14.213: E/WindowManager(738):   at android.app.ActivityThread.main(ActivityThread.java:3683)
02-14 20:06:14.213: E/WindowManager(738):   at java.lang.reflect.Method.invokeNative(Native Method)
02-14 20:06:14.213: E/WindowManager(738):   at java.lang.reflect.Method.invoke(Method.java:507)
02-14 20:06:14.213: E/WindowManager(738):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-14 20:06:14.213: E/WindowManager(738):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-14 20:06:14.213: E/WindowManager(738):   at dalvik.system.NativeStart.main(Native Method)
02-14 20:06:25.245: I/Process(738): Sending signal. PID: 738 SIG: 9 
```

这是我的异步任务代码---

```
/**
     * Background Async Task to Load all product by making HTTP Request
     * */
    class LoadAllProducts extends AsyncTask<String, String, String> {

        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(AllProductsActivity.this);
            pDialog.setMessage("Loading products. Please wait...");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(false);
            pDialog.show();
        }

        /**
         * getting All products from url
         * */
        protected String doInBackground(String... args) {
            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            // getting JSON string from URL
            JSONObject json = jParser.makeHttpRequest(url_all_products, "GET", params);

            // Check your log cat for JSON reponse
            Log.d("All Products: ", json.toString());

            try {
                // Checking for SUCCESS TAG
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // products found
                    // Getting Array of Products
                    products = json.getJSONArray(TAG_PRODUCTS);

                    // looping through All Products
                    for (int i = 0; i < products.length(); i++) {
                        JSONObject c = products.getJSONObject(i);

                        // Storing each json item in variable
                        String id = c.getString(TAG_PID);
                        String name = c.getString(TAG_NAME);

                        // creating new HashMap
                        HashMap<String, String> map = new HashMap<String, String>();

                        // adding each child node to HashMap key => value
                        map.put(TAG_PID, id);
                        map.put(TAG_NAME, name);

                        // adding HashList to ArrayList
                        productsList.add(map);
                    }
                } else {
                    // no products found
                    // Launch Add New product Activity
                    Intent i = new Intent(getApplicationContext(),
                            NewProductActivity.class);
                    // Closing all previous activities
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog after getting all products
            pDialog.dismiss();
            // updating UI from Background Thread
            runOnUiThread(new Runnable() {
                public void run() {
                    /**
                     * Updating parsed JSON data into ListView
                     * */
                    ListAdapter adapter = new SimpleAdapter(
                            AllProductsActivity.this, productsList,
                            R.layout.list_item, new String[] { TAG_PID,
                                    TAG_NAME},
                            new int[] { R.id.pid, R.id.name });
                    // updating listview
                    setListAdapter(adapter);
                }
            });

        }

    } 
```

在做了本所说的事情之后......错误的长度减少了......现在只有这个错误 -

```
02-14 20:39:06.094: E/JSON Parser(1182): Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject
02-14 20:39:06.094: W/dalvikvm(1182): threadid=9: thread exiting with uncaught exception (group=0x40015560)
02-14 20:39:06.104: E/AndroidRuntime(1182): FATAL EXCEPTION: AsyncTask #1
02-14 20:39:06.104: E/AndroidRuntime(1182): java.lang.RuntimeException: An error occured while executing doInBackground()
02-14 20:39:06.104: E/AndroidRuntime(1182):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
02-14 20:39:06.104: E/AndroidRuntime(1182):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
02-14 20:39:06.104: E/AndroidRuntime(1182):     at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
02-14 20:39:06.104: E/AndroidRuntime(1182):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
02-14 20:39:06.104: E/AndroidRuntime(1182):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
02-14 20:39:06.104: E/AndroidRuntime(1182):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
02-14 20:39:06.104: E/AndroidRuntime(1182):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
02-14 20:39:06.104: E/AndroidRuntime(1182):     at java.lang.Thread.run(Thread.java:1019)
02-14 20:39:06.104: E/AndroidRuntime(1182): Caused by: java.lang.NullPointerException
02-14 20:39:06.104: E/AndroidRuntime(1182):     at com.example.androidhive.AllProductsActivity$LoadAllProducts.doInBackground(AllProductsActivity.java:137)
02-14 20:39:06.104: E/AndroidRuntime(1182):     at com.example.androidhive.AllProductsActivity$LoadAllProducts.doInBackground(AllProductsActivity.java:1)
02-14 20:39:06.104: E/AndroidRuntime(1182):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
02-14 20:39:06.104: E/AndroidRuntime(1182):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
02-14 20:39:06.104: E/AndroidRuntime(1182):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:14:03.300

这是主要错误：

```
Caused by: java.lang.NullPointerException at 
com.example.androidhive.AllProductsActivity$LoadAllProducts.doInBackground(AllProductsActivity.java:130) 
```

无论您的 doInBackground 方法的第 130 行发生了什么，都会导致 nullPointer。

请指出您的代码中哪一行是 130。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T18:34:12.107

1）查找IP地址：在命令提示符下输入ipconfig：

![查找 IP 地址](../Images/d01890e1e22addd6a9e72764d9b10674.png)

2) 通过在浏览器中输入您的 IP 地址/android_connect/get_all_products.php 来确保它可以正常工作。例如，对我来说它是“<a href="http://192.168.1.79/android_connect/get_all_products.php" rel="nofollow noreferrer">http://192.168.1.79/android_connect/get_all_products.php” 如果它有效，你应该看到这个：

![PHP 正确消息](../Images/e393ccc6e3d16aa6c9c92fb6ad851c78.png)

如果你和我一样，你会看到： ![PHP 错误信息](../Images/8fdfa1375bfec9e5d00fdf5e9f3618e2.png)

因此，错误消息将与 JSON 文件一起发回，并导致 Android 代码中出现 NullPointerException。

3) 如果您收到 PHP 错误消息，请关闭错误消息报告。

要更改 PHP 设置以便不返回错误消息，请转到此处。从任务栏-> 右键单击​​ WAMP-> PHP-> php.ini

![php.ini](../Images/c17e9b4846af5c26c7d48ce8e57047e9.png)

将文本“display_errors= On”更改为“display_errors= Off”</p>

![PHP 设置](../Images/3de4b1090136edb14275256055ab2f69.png)

# ruby - UTF-8 中的无效字节序列

> ID：14876706
> 
> 赞同：0
> 
> 时间：2013-02-14T14:10:36.647
> 
> 标签：ruby

我使用[https://github.com/ging/linkser](https://github.com/ging/linkser)加载 url ：

```
1.9.3p374 :001 > require 'linkser'
 => true 
1.9.3p374 :002 > l = Linkser.parse 'http://sports.163.com/nba/'
 => #<Linkser::Objects::HTML:0x007f92019e99c8 @url="http://sports.163.com/nba/", @last_url="http://sports.163.com/nba/", @head=#<Net::HTTPOK 200 OK readbody=true>, @options={}> 
1.9.3p374 :003 > l.title
encoding error : input conversion failed due to input error, bytes 0xC4 0x4E 0x42 0x41
 => "NBA,NBAֱҥ,\xD7钭ㄒ档" 
```

是否可以将字节序列转换为正确的 utf8 字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:19:12.510

页面的实际编码是GBK，也就是gb2312。快速浏览[链接器源代码](https://github.com/ging/linkser/tree/master/lib)显示没有处理编码，因此留给 Net::HTTP，它有一个[长期存在的错误](http://bugs.ruby-lang.org/issues/2567)，针对 Ruby 2.0.0。

# c++ - 在我的情况下，静态铸造是一个好的设计吗？

> ID：14876707
> 
> 赞同：0
> 
> 时间：2013-02-14T14:10:45.503
> 
> 标签：c++, oop, casting, game-engine

[我从这里](http://gamedevgeek.com/tutorials/managing-game-states-in-c/)使用游戏状态管理器（介绍、主菜单、游戏玩法等）。然而有一个问题。一个非常简约的例子：

```
class cApp //manages the states and gives them access to window
{
public:
cApp (RenderWindow & ref) : window(ref) {}
void changeState(cState *);     //these function realy doesn't matter
void update();
void draw();

RenderWindow & window; //the same as in the article, this class not only manages state but gives them access to window etc

private:
std::vector <cState *> states;
} 
```

状态：

```
class cState
{
public:
cState(cApp * ptr) : app(ptr) {}
virtual void update() = 0;
virtual void draw() = 0;
protected:
cApp * app;
} 
```

到目前为止一切都很好。问题是这是基本框架的一部分。所以 cApp 只是非常基本的，只允许访问窗口。然而，可能存在用户想要在他的游戏中使用网络的情况。网络引擎不是单一状态的一部分，因此它必须处于更全局的（即 cApp）级别。

所以用户这样做：

```
class cNetworkedApp : public cApp
{
public:
cNetworkedApp(RenderWindow & ref1, NetworkEngine & ref2)
: networking(ref2), cApp(ref1)
NetworkEngine & networking; //initialized in cNetworkedApp constructor
}

class CharacterCreationState : public cState
{
 CharacterCreationState(cApp * ptr) : cState(ptr) {}
 //implement pure virtual functions
 void draw()
 {}
 void update()
  {
      //THE PROBLEM
      //the state needs to access the network engine so casting is required
      cNetworkedApp * ptr = static_cast<cNetworkedApp*>(app))
      ptr->networking.sendSomething();
  }
} 
```

唯一明显的解决方案是在 cApp 中包含所有可能的内容，但是正如我所说，这是一个框架。当然，像物理引擎或声音引擎这样的引擎是你放入状态的东西，所以这不是问题，但是像网络系统这样的东西必须是所有状态都可用的一个对象。并不是每个应用程序都使用它。

我需要重新设计此代码还是可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:27:14.313

您`cApp`可能会保留一个多态类型的命名列表`Engine`，即`map<string,Engine*>`，然后，您的用户可能会询问`cApp`它是否具有给定的引擎。

`NetworkEngine`将是纯抽象的子类`Engine`。

## 更新

当处理一个我确定它是给定的专用类型的指针时，你应该使用`static_cast`，当你想查询指针是否可以转换为你应该使用的类型时`dynamic_cast`。

对于第一种情况，我自己有一种更安全的方法，我使用断言来保证可以强制转换类型并使用`static_cast`普通代码：

```
Engine* fetchedEngine = cApp.fetch("network");
assert( dynamic_cast<NetworkEngine*>(fetchedEngine) != NULL );
NetworkEngine* network = static_cast<NetWorkEngine*>(fetchedEngine); 
```

只有一个类型的对象`NetworkEngine`应该放在“网络”名称上，但也许有人错误地放了别的东西，这`assert`将使我们更安全而无需担心开销。

# macos - Mac：架构 x86_64 的未定义符号：“QApplication::palette()”，引用自：

> ID：14876713
> 
> 赞同：3
> 
> 时间：2013-02-14T14:10:58.613
> 
> 标签：macos, qt

编译我们的 Qt 项目时，我收到以下链接器错误。我们不使用 qmake。我们使用 autoconf 和 automake .. 现在移植到 Mac 会带来以下错误：我尝试使用 Qt-SDK 并自己编译 Qt ......两者都不起作用:(

也许有人有想法？

```
 /bin/sh ../../libtool --tag=CXX   --mode=link clang++  -g -O2  -Wl,-rpath - 

    Wl,/space/dev-libs/instantclient_10_2  -Wl,-rpath -Wl,/space/dev-libs/boost_1_53/lib -v  -o showtime showtime-application_resources.o showtime-main.o cmdline.o ../../atcaf/atcafgui/libatcafgui.la 
libtool: link: clang++ -g -O2 -Wl,-rpath -Wl,/space/dev-libs/instantclient_10_2 -Wl,-rpath -Wl,/space/dev-libs/boost_1_53/lib -v -o showtime showtime-application_resources.o showtime-main.o cmdline.o -Wl,-bind_at_load  ../../atcaf/atcafgui/.libs/libatcafgui.a -L/usr/local/Qt-5.0.1/lib /usr/local/Qt-5.0.1/lib/libQt5Widgets.dylib /usr/local/Qt-5.0.1/lib/libQt5Gui.dylib /usr/local/Qt-5.0.1/lib/libQt5Sql.dylib /usr/local/Qt-5.0.1/lib/libQt5Xml.dylib /usr/local/Qt-5.0.1/lib/libQt5XmlPatterns.dylib /usr/local/Qt-5.0.1/lib/libQt5Network.dylib /usr/local/Qt-5.0.1/lib/libQt5Core.dylib -L/space/dev-libs/log4cxx-dfs/lib /space/dev-libs/log4cxx-dfs/lib/liblog4cxx.dylib -L/usr/lib -laprutil-1 -lexpat -liconv -lpq -lsqlite3 -lldap -llber -lapr-1 -lpthread -L/space/dev-libs/boost_1_53/lib -lboost_python -lpython2.6 -L/space/dev-libs/instantclient_10_2 -lclntsh -lz
Apple clang version 3.1 (tags/Apple/clang-318.0.58) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.2
Thread model: posix
 "/usr/bin/ld" -demangle -dynamic -arch x86_64 -macosx_version_min 10.7.4 -o showtime -lcrt1.10.6.o -L/usr/local/Qt-5.0.1/lib -L/space/dev-libs/log4cxx-dfs/lib -L/usr/lib -L/space/dev-libs/boost_1_53/lib -L/space/dev-libs/instantclient_10_2 -rpath /space/dev-libs/instantclient_10_2 -rpath /space/dev-libs/boost_1_53/lib showtime-application_resources.o showtime-main.o cmdline.o -bind_at_load ../../atcaf/atcafgui/.libs/libatcafgui.a /usr/local/Qt-5.0.1/lib/libQt5Widgets.dylib /usr/local/Qt-5.0.1/lib/libQt5Gui.dylib /usr/local/Qt-5.0.1/lib/libQt5Sql.dylib /usr/local/Qt-5.0.1/lib/libQt5Xml.dylib /usr/local/Qt-5.0.1/lib/libQt5XmlPatterns.dylib /usr/local/Qt-5.0.1/lib/libQt5Network.dylib /usr/local/Qt-5.0.1/lib/libQt5Core.dylib /space/dev-libs/log4cxx-dfs/lib/liblog4cxx.dylib -laprutil-1 -lexpat -liconv -lpq -lsqlite3 -lldap -llber -lapr-1 -lpthread -lboost_python -lpython2.6 -lclntsh -lz -lstdc++ -lSystem /usr/bin/../lib/clang/3.1/lib/darwin/libclang_rt.osx.a

Undefined symbols for architecture x86_64:

  "QApplication::palette()", referenced from:
      _main in showtime-main.o
  "QApplication::commitData(QSessionManager&)", referenced from:
      vtable for Application in libatcafgui.a(libatcafgui_la-Application.o)
  "QApplication::saveState(QSessionManager&)", referenced from:
      vtable for Application in libatcafgui.a(libatcafgui_la-Application.o)
  "QAbstractItemView::dataChanged(QModelIndex const&, QModelIndex const&)", referenced from:
      vtable for LogTableWWU in libatcafgui.a(libatcafgui_la-moc_LogTableWWU.o)
  "QWidget::styleChange(QStyle&)", referenced from: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:15:08.447

`QApplication::commitData()`从 Qt 4 移植到 Qt 5 时，我遇到了类似的问题。和缺少函数`QApplication::saveState()`。

`QApplication`我在我更改的头文件中派生了一个类

```
#include <QtGui/QApplication> 
```

至

```
#include <QApplication> 
```

这解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T12:08:51.973

我遇到了同样的问题，尽管我的问题与 QWidget 函数（例如*QWidget::styleChange(QStyle&)*或*QWidget::fontChange(QFont const&)*）而不是 QApplication 有关。

正如**koan**所建议的，我查找了所有出现的

```
#include <QtGui/ 
```

在我的项目中并将它们替换为

```
#include < 
```

这解决了这个问题。我使用 clang 和 g++ 版本（5.0.1 和 5.0.2）对此进行了测试，它们似乎都可以工作。

**笔记：**

在网上找到的一些解决方案建议添加

```
QT += widgets 
```

到 qmake 项目 (.pro) 文件，因为这可能与现有错误有关。虽然我不认为添加这是一个问题，但它并没有解决这个特定问题。

# c# - DataGridView 选择特定行并将所有列值检索到对象数组

> ID：14876716
> 
> 赞同：0
> 
> 时间：2013-02-14T14:11:01.517
> 
> 标签：c#, winforms, datagridview

我想在按钮单击事件上执行操作，将 Grid Currentrow 整个数据传递给对象数组

我试图通过以下链接进行搜索：

[DataGridView 选择特定行并检索其值](https://stackoverflow.com/questions/13464766/datagridview-selecting-a-specific-row-and-retrieving-its-values)

[从选定的datagridview行和哪个事件获取数据？](https://stackoverflow.com/questions/11260843/getting-data-from-selected-datagridview-row-and-which-event)

但他们在谈论特定的单元格值

我试图用代码执行

```
DataRowView currentDataRowView = (DataRowView)grdGLSearch.CurrentRow.DataBoundItem;
DataRow row1 = currentDataRowView.Row; 
```

但是 currentDataRowView 正在检索 null

我的一位资深人士成功创建了一个通用属性 GetSelectedRow()

它是这样工作的：

```
 var object =grdGLSearch.GetSelectedRow<T>(); 
```

它有定义

```
public T GetSelectedRow<T>()
        {
            if (this.CurrentRowIndex == -1)
            {
                return default(T);
            }
            return (base.DataSource as BindingList<T>)[this.CurrentRowIndex];
        } 
```

但它只绑定到一个主网格，我也想将此属性用于另一个网格

我不想要特定列的数据，我想要整行数据..并且不希望执行任何迭代......是否有任何单一的线性操作？请建议我是否缺少任何链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:19:22.873

由于您只显示 2 行代码，我真的不确定到底发生了什么。首先，当您单击某个按钮时，我让您想要整行。但是，您永远不会说明当前行是如何被选择的。

为了获得完整的选定行，您必须有一个选定的单元格。MSDN 文档在 DataGridView.SelectedRow 的页面上说明了这一点。所以我假设用户会点击一个单元格，而你想要整行。我会创建一个变量来保存您选择的行。然后当用户单击单元格时，自动选择行并保存。然后，当单击按钮时，只需检索已保存的行。

```
private DataGridViewRow selectedRow { get; set; } 
```

然后在用户单击单元格时设置事件

```
private void grdGLSearch_CellClick(object sender, DataGridViewCellEventArgs e)
{
    selectedRow = grdGLSearch.Rows[e.RowIndex];
} 
```

最后是按钮点击事件

```
private void SubmitBtn_ItemClick(object sender, ItemClickEventArgs e)
{
    // to target the specific data
    var cellVal1 = selectedRow.Cells["SpecificCell1"].Value;
    var cellVal2 = selectedRow.Cells["SpecificCell2"].Value;
} 
```

# php - 使用 PHP Curl 发布 JSON

> ID：14876725
> 
> 赞同：0
> 
> 时间：2013-02-14T14:11:42.157
> 
> 标签：php, curl

我正在尝试在我的本地服务器上以 PHP 发布一些 JSON 数据。我在下面有以下代码，但它不起作用。我错过了重要的事情吗？

```
 $url = 'http://localhost/mmcv/chart1.php';

    //open connection
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL,$url);        
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
    curl_setopt($ch, CURLOPT_POSTFIELDS, $json);                                                                  
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);                                                                      
    curl_setopt($ch, CURLOPT_HTTPHEADERS,array('Content-Type: application/json'));  

    $result = curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:15:28.937

```
curl_setopt($ch, CURLOPT_HTTPHEADERS,array('Content-Type: application/json')); 
```

即使您发布 json，您仍然必须以 url 编码形式发送数据，所以发送它就像

```
curl_setopt($ch, CURLOPT_HTTPHEADERS,array('Content-Type: application/x-www-form-urlencoded')); 
```

并使用

```
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data); 
```

代替

```
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");                                                                     
    curl_setopt($ch, CURLOPT_POSTFIELDS, $json); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:44:16.400

也许您的问题出在接收脚本中。在“mmcv/chart1.php”中尝试以下操作：

```
$rawInput = file_get_contents('php://input');

if(is_string($rawInput)) {
    if(!is_null($jsonInput = json_decode($rawInput, true)))
        $_POST = $jsonInput;
} 
```

# linux - 致命：/home/trx/.gitconfig 中的错误配置文件第 1 行

> ID：14876728
> 
> 赞同：13
> 
> 时间：2013-02-14T14:11:47.823
> 
> 标签：linux, git, ubuntu

我知道这个问题已经被问了一百万次了，但是我的 ~/.gitconfig 只包含两行，这在教程中是正确的。

```
git config --global user.name "trx"
git config --global user.email chazx@live.com 
```

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-14T14:13:47.180

这是我的 ~/.gitconfig：

```
[user]
    name = Luigi R. Viggiano
    email = luigi.viggiano@...
[color]
    ui = true
[merge]
    tool = p4merge
[diff]
    tool = p4merge
[push]
    default = simple 
```

您`~/.gitconfig`的格式不正确。

您不需要输入命令：

```
git config --global user.name "trx"
git config --global user.email chazx@live.com 
```

在文件中...您需要在终端上键入它们。

如教程中所述，使用终端上的命令删除`~/.gitconfig`并操作它。`git config`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T14:16:14.777

这些`git config`行是您应该运行的命令，而不是配置文件的内容。

# php - php使用eval获取对象属性值

> ID：14876729
> 
> 赞同：0
> 
> 时间：2013-02-14T14:11:55.227
> 
> 标签：php

我正在尝试设置一个函数，该函数将动态更新数据库中的对象属性，而无需更新整个对象。

```
$sql = "UPDATE " . self::$table_name . " SET ";
$sql .= "$attribute = '" . eval("\$this->$attribute;") . "'";
$sql .= " WHERE ..."; 
```

我似乎无法让这个 *eval("\$this->$attribute;")*产生对象属性值。属性中有一个值，它是一个公共属性。

谢谢

$attribute 是一个函数 var，它将包含一个像 'address_id' 这样的字符串，所以我想要 UPDATE table_name SET address_id = '11' WHERE user_id='1' 这是一个简单的例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:15:49.613

您不需要使用 eval 执行此操作。PHP 支持变量变量： http: [//php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)

所以这会做：

```
$this->$attributes 
```

注意第二个`$`标志。这基本上意味着 $attributes 的值用作属性名称。如果你想让它写得更清楚一点，你可以使用括号来做到这一点：

```
$this->{$attributes} 
```

如果您想使用数组执行此操作，或者如果您想使用多个变量来构建变量名称，则需要此括号：

```
$this->{$var1}_{$array[0]}_{$var2} 
```

这可能超出了这个问题的范围，但很高兴知道什么是可变变量。但我不推荐使用它们，因为它使代码不可读且难以理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:16:34.177

没有必要使用`eval()`：

```
$sql = "UPDATE " . self::$table_name . " SET ";
$sql .= "$attribute = '" . $this->attribute . "'";
$sql .= " WHERE ..."; 
```

如果`attribute`是变量，请使用：

```
$this->$attribute 
```

你确定`$this->attribute`消毒正确吗？

# iphone - wifi网络更改时的iPhone通知

> ID：14876733
> 
> 赞同：8
> 
> 时间：2013-02-14T14:12:08.597
> 
> 标签：iphone, ios, wifi, jailbreak

这是一个*调整*，所以目标是越狱设备，而*不是*应用商店。我曾尝试在其中挂钩不同的方法，`SBWiFiManager`但它们要么在 wifi 强度变化（如此连续）时被调用，要么在网络变化后相当延迟后被调用。

有没有其他方法可以获取通知（或其他方法来挂钩）wifi 网络更改？

我知道您现在可以通过公共 API 获取当前的 SSID，但是当它发生变化时需要告知我。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-15T09:00:19.937

一种方法是`com.apple.system.config.network_change`从 Core Foundation Darwin 通知中心监听事件。

报名参加活动：

```
CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), //center
                                NULL, // observer
                                onNotifyCallback, // callback
                                CFSTR("com.apple.system.config.network_change"), // event name
                                NULL, // object
                                CFNotificationSuspensionBehaviorDeliverImmediately); 
```

这是一个示例回调：

```
static void onNotifyCallback(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo)
{
    NSString* notifyName = (NSString*)name;
    // this check should really only be necessary if you reuse this one callback method
    //  for multiple Darwin notification events
    if ([notifyName isEqualToString:@"com.apple.system.config.network_change"]) {
        // use the Captive Network API to get more information at this point
        //  https://stackoverflow.com/a/4714842/119114
    } else {
        NSLog(@"intercepted %@", notifyName);
    }
} 
```

例如，请参阅我对如何使用 Captive Network API 获取当前 SSID 的[另一个答案的链接。](https://stackoverflow.com/a/4714842/119114)

请注意，虽然我测试过的手机已经越狱（iOS 6.1），但我认为这不需要越狱才能正常工作。它当然不需要将应用程序安装在普通沙盒区域之外 ( `/var/mobile/Applications/*`)。

PS我没有对此进行足够详尽的测试，无法知道此事件是否会产生任何*误报*（基于您对网络更改的定义）。然而，只要存储一些状态变量就足够简单了，等于最后一个网络的 SSID，并在此事件发生时将其与当前的 SSID 进行比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-04T15:20:26.523

**SWIFT 4.1 版本**

我用这个函数扩展了我的可达性类：

```
let notificationName = "com.apple.system.config.network_change"

func onNetworkChange(_ name : String) {
    if (name == notificationName) {
        // Do your stuff
        print("Network was changed")
    }
}

func registerObserver() {
    let observer = UnsafeRawPointer(Unmanaged.passUnretained(self).toOpaque())
    CFNotificationCenterAddObserver(CFNotificationCenterGetDarwinNotifyCenter(), observer,
                                    { (nc, observer, name, _, _) -> Swift.Void in
                                        if let observer = observer, let name = name {
                                            let instance = Unmanaged<Reachability>.fromOpaque(observer).takeUnretainedValue()
                                            instance.onNetworkChange(name.rawValue as String)
                                        } },
                                    notificationName as CFString, nil, .deliverImmediately)
}

func removeObserver() {
    let observer = UnsafeRawPointer(Unmanaged.passUnretained(self).toOpaque())
    CFNotificationCenterRemoveObserver(CFNotificationCenterGetDarwinNotifyCenter(), observer, nil, nil)
} 
```

在 init 上注册观察者并在 deinit 上删除。不幸的是，没有关于具体更改内容的其他信息，但我们有机会测试当前的 SSID。希望这对某人有帮助）

# c# - .NET 中的包程序集

> ID：14876734
> 
> 赞同：0
> 
> 时间：2013-02-14T14:12:21.313
> 
> 标签：c#, .net

我想拥有这种带有 .NET 程序集的体系结构：

我想将通用程序集 (.dll) 存储在共享区域（只读）中，任何应用程序都可以访问该特定文件以使用包含的实用程序。

一个实际的例子是通用程序包将包含实用程序，例如：审计、数据库连接、安全实用程序、通用实用程序。

我希望所有这些都打包为一个单独的项目，以便更容易参考和跟踪。除此之外，我们希望各个实用程序可以具有不同的版本号，这可能是棘手的部分。因此，如果一个特定的人正在使用版本 1，那么另一个人可能想要使用版本 2。所有这一切，而一切都在同一个“包”中。

这种情况可以通过在 Java 中使用 MAVEN 来实现，但我不确定在使用 .NET 时该往哪个方向发展。

感谢您的反馈和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:14:37.143

公共区域...像GAC？当然，它不会将它们打包为单个项目，但它旨在为您包含和管理程序集版本，毫无意义地重新发明轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:15:50.067

我认为您正在寻找的是[Nuget](http://nuget.org/)。您可以在本地文件系统或某个远程位置创建自己的包存储库，所有客户端都可以通过此包存储库获取所需的 dll。

[这个问题](https://stackoverflow.com/questions/652583/is-there-a-maven-alternative-or-port-for-the-net-world)中提到的 .Net 世界中还有其他 Maven 替代品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:21:20.537

您可以使用名为 ILMerge 的工具将多个程序集合并为一个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T16:06:12.940

Maven 有一个用于 .NET 的插件，以前称为 NMaven，但现在称为 NPaday。可在[http://incubator.apache.org/npanday/](http://incubator.apache.org/npanday/)获得。

# actionscript-3 - AS3 - 可拖动方块从数组生成

> ID：14876739
> 
> 赞同：0
> 
> 时间：2013-02-14T14:12:31.510
> 
> 标签：actionscript-3, flash

早上好，我有一个网格 ( `bankgrid`) 由一个使用`var bankArray:Array`Array 的值生成的网格 ( ) 由 gotoAndStop(那个数字 ( `f`)) 显示一个彩色网格。所有方块都是来自同一个 MovieClip( ) 的子元素，在数组中`TBank`一个接一个地生成水平 ( `i`) 和垂直 ( ) 位置。`j`我试图让方块可拖动......徒劳无功：

```
var bankgrille:MovieClip = new MovieClip();
var bankList:Vector.<TBank> = new Vector.<TBank>();

var bankArray:Array = [
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,1,0,0,0,0,0],
                     [0,0,2,0,1,0,0,0],
                     [0,2,2,2,2,0,0,0],
                     [0,1,2,2,1,0,0,0],
                     [0,2,1,1,2,1,1,0]
                     ];
var bankstock:Array = [
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0]
                     ];

function colorBank():void {
    for (var i:int=0; i<8; i++){                                    // boucle sur les 20 colonnes
        for (var j:int=0; j<8; j++){                                // boucle sur les 15 lignes de chaque colonne
            var f:int = bankArray[j][i]                             // valeur de la case

            if(f > 0)
            {                                                       // si la valeur de la case est supérieure à 0
                var tBank:TBank = new TBank()
                bankList.push(tBank);
                // création du modèle
                tBank.x = 320+i*20;                                     // position sur X
                tBank.y = 100+j*20;                                     // position sur Y
                tBank.gotoAndStop(f);
                bankgrille.addChild(tBank); 

            }

            else 
            {
                bankstock[j][i] = []                                
            }

        }
    }
}
colorBank();
addChild(bankgrille); 
```

*我未来的项目（也许让我的问题更有意义）：'在那之后，我想允许将方块拖到另一个阵列上以更改第二个颜色'*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T15:00:32.523

`startDrag()`在拖动影片剪辑时，这是一个很好的起点。

您可以将`MouseEvent`侦听器分配给整个网格并使用以下方法拖动特定元素`event.currentTarget`：

```
bankgrille.addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);
bankgrille.addEventListener(MouseEvent.MOUSE_UP, onMouseUp);

function onMouseDown(e:MouseEvent):void
{
  e.currentTarget.startDrag();
}

function onMouseUp(e:MouseEvent):void
{
  e.currentTarget.stopDrag();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T20:08:28.393

瞧！再次感谢西姆！

```
var bankgrille:MovieClip = new MovieClip();
var bankList:Vector.<TBank> = new Vector.<TBank>();

var bankArray:Array = [
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,1,0,0,0,0,0],
                     [0,0,2,0,1,0,0,0],
                     [0,2,2,2,2,0,0,0],
                     [0,1,2,2,1,0,0,0],
                     [0,2,1,1,2,1,1,0]
                     ];
var bankstock:Array = [
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0],
                     [0,0,0,0,0,0,0,0]
                     ];

function colorBank():void {
    for (var i:int=0; i<8; i++){                                    // boucle sur les 20 colonnes
        for (var j:int=0; j<8; j++){                                // boucle sur les 15 lignes de chaque colonne
            var f:int = bankArray[j][i]                             // valeur de la case

            if(f > 0)
            {                                                       // si la valeur de la case est supérieure à 0
                var tBank:TBank = new TBank()
                bankList.push(tBank);
                // création du modèle
                tBank.x = 320+i*20;                                     // position sur X
                tBank.y = 100+j*20;                                     // position sur Y
                tBank.gotoAndStop(f);
                bankgrille.addChild(tBank); 

            }

            else 
            {
                bankstock[j][i] = []                                
            }

        }
    }
}
colorBank();
addChild(bankgrille);

draggable();
function draggable()
{
    for each(var t:TBank in bankList)
    {
t.addEventListener(MouseEvent.MOUSE_DOWN, clik);
t.addEventListener(MouseEvent.MOUSE_UP, lache);
var posX=t.x;
  if (t.x != posX)
  {
      t.x = posX;
  }
function clik(e:MouseEvent):void
{
  e.currentTarget.startDrag();
}

function lache(e:MouseEvent):void
{
  e.currentTarget.stopDrag();  
}
}
} 
```

# eclipse - IllegalArgumentException：名为 [WrongServlet2] 和 [Wrong] 的 servlet 都映射到不允许的 url 模式 [/Wrong]

> ID：14876744
> 
> 赞同：1
> 
> 时间：2013-02-14T14:12:42.327
> 
> 标签：eclipse, tomcat, servlets, mapping

嗨，我意识到有很多关于 Tomcat 和 eclipse 的帖子，但没有一个有帮助。如果有任何帮助，我在这里有控制台对话框。非常感谢您提前提供的帮助。

```
Feb 14, 2013 1:46:23 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in  production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\WIDCOMM\Bluetooth Software\;C:\Program Files\WIDCOMM\Bluetooth Software\syswow64;C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\QuickTime\QTSystem\;c:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\Tools\Binn\;c:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\Java\jdk1.7.0_02\bin;C:\Program Files\MySQL\MySQL Server 5.1\bin;C:\Program Files\MiKTeX 2.9\miktex\bin\x64\;.
Feb 14, 2013 1:46:23 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:sandwiches' did not find a matching property.
Feb 14, 2013 1:46:23 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:MinkProject' did not find a matching property.
Feb 14, 2013 1:46:24 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Feb 14, 2013 1:46:24 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Feb 14, 2013 1:46:24 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1283 ms
Feb 14, 2013 1:46:24 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Feb 14, 2013 1:46:24 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.35
Feb 14, 2013 1:46:24 PM org.apache.tomcat.util.digester.Digester endElement
SEVERE: End event threw exception
java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.tomcat.util.IntrospectionUtils.callMethodN(IntrospectionUtils.java:911)
at org.apache.catalina.startup.CallMethodMultiRule.end(WebRuleSet.java:1021)
at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1051)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
at org.apache.catalina.startup.ContextConfig.parseWebXml(ContextConfig.java:1879)
at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1259)
at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.IllegalArgumentException: The servlets named [WrongServlet2] and [Wrong] are both mapped to the url-pattern [/Wrong] which is not permitted
at org.apache.catalina.deploy.WebXml.addServletMapping(WebXml.java:335)
... 33 more

Feb 14, 2013 1:46:24 PM org.apache.catalina.startup.ContextConfig parseWebXml
SEVERE: Parse error in application web.xml file at jndi:/localhost/sandwiches/WEB-INF/web.xml
org.xml.sax.SAXParseException; systemId: jndi:/localhost/sandwiches/WEB-INF/web.xml; lineNumber: 53; columnNumber: 21; Error at (53, 21) : The servlets named [WrongServlet2] and [Wrong] are both mapped to the url-pattern [/Wrong] which is not permitted
at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2687)
at org.apache.tomcat.util.digester.Digester.createSAXException(Digester.java:2719)
at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1054)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Unknown Source)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
at org.apache.catalina.startup.ContextConfig.parseWebXml(ContextConfig.java:1879)
at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1259)
at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.IllegalArgumentException: The servlets named [WrongServlet2] and [Wrong] are both mapped to the url-pattern [/Wrong] which is not permitted
at org.apache.catalina.deploy.WebXml.addServletMapping(WebXml.java:335)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.tomcat.util.IntrospectionUtils.callMethodN(IntrospectionUtils.java:911)
at org.apache.catalina.startup.CallMethodMultiRule.end(WebRuleSet.java:1021)
at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1051)
... 26 more

Feb 14, 2013 1:46:24 PM org.apache.catalina.startup.ContextConfig parseWebXml
SEVERE: Occurred at line 53 column 21
Feb 14, 2013 1:46:24 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/MinkProject]]
at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
at java.util.concurrent.FutureTask.get(Unknown Source)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/MinkProject]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
... 7 more
Caused by: java.lang.IllegalArgumentException: The servlets named [minkServlet] and [com.mink.web.minkServlet] are both mapped to the url-pattern [/minkServlet] which is not permitted
at org.apache.catalina.deploy.WebXml.addServletMapping(WebXml.java:335)
at org.apache.catalina.startup.ContextConfig.processAnnotationWebServlet(ContextConfig.java:2412)
at org.apache.catalina.startup.ContextConfig.processAnnotationsStream(ContextConfig.java:2125)
at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2080)
at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2073)
at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2073)
at org.apache.catalina.startup.ContextConfig.processAnnotationsFile(ContextConfig.java:2073)
at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1300)
at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5179)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more

Feb 14, 2013 1:46:24 PM org.apache.catalina.startup.ContextConfig configureStart
SEVERE: Marking this application unavailable due to previous error(s)
Feb 14, 2013 1:46:24 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error getConfigured
Feb 14, 2013 1:46:24 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/sandwiches] startup failed due to previous errors
Feb 14, 2013 1:46:24 PM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
at java.util.concurrent.FutureTask$Sync.innerGet(Unknown Source)
at java.util.concurrent.FutureTask.get(Unknown Source)
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:800)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more

Feb 14, 2013 1:46:24 PM org.apache.catalina.startup.Catalina start
SEVERE: Catalina.start: 
org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.startup.Catalina.start(Catalina.java:684)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:456)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 7 more
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 9 more
Caused by: org.apache.catalina.LifecycleException: A child container failed during start
at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
... 11 more

Feb 14, 2013 1:46:24 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 740 ms 
```

然后我恢复一条消息，告诉我启动时间超过 45 秒。再次感谢并为大量控制台转储感到抱歉。乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:04:01.250

如果您使用“创建 Servlet”向导而不是“创建类”向导创建了一个 serverlet，则创建的 servlet 类最终可能会带有一个 @WebServlet 注释，该注释复制了您在 web.xml 中可能放置的任何内容。

要么创建一个普通类并在 web xml 中输入映射，要么使用 @WebServlet 注释，但不是两者都存在重复映射（如果您告诉 Eclipse 生成部署描述符）。

文森特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:14:52.837

似乎 xml 配置包含两个具有相同 URL 映射的 servlet，正如堆栈跟踪所说“名为 [WrongServlet2] 和 [Wrong] 的 servlet 都映射到不允许的 url 模式 [/Wrong]”

你调查过吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:17:24.453

> 名为 [minkServlet] 和 [com.mink.web.minkServlet] 的 servlet 都映射到不允许的 url 模式 [/minkServlet]

几乎不言自明。

您可能有两个 servlet 映射到同一个 url

# xml - 迭代并将一个值与另一个值进行比较

> ID：14876749
> 
> 赞同：1
> 
> 时间：2013-02-14T14:12:58.033
> 
> 标签：xml, xslt, xpath

我有以下 XML 数据：

```
<Product>
  <item>
   <ProductVariant>
     <item>
        <VariantType>1</VariantType>
     </item>
     <item>
        <VariantType>2</VariantType>
     </item>
     <item>
        <VariantType>3</VariantType>
     </item>
   </ProductVariant>
   <ChosenVariantType>2</ChosenVariantType>
  </item>
</Product> 
```

比我有一个 xsl 转换：

```
<xsl:for-each select="Product/item/ProductVariant">
    <xsl:if test="(item/VariantType = ../ChosenVariantType)">
        <xsl:value-of name="test" select="item/VariantType"/>
        <xsl:text>-</xsl:text>
        <xsl:value-of name="testChosen" select="../ChosenVariantType"/>
    </xsl:if>   
</xsl:for-each> 
```

打印出来：1-2

所以问题是如果 VariantType 为 1 且 ChosenVariantType 为 2 ，为什么 'if' 评估为真？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:31:28.767

您正在迭代您的 XML 中只有一个的**ProductVariant 。**当您执行**xsl:if**条件时，您所测试的只是当前**ProductVariant**下是否有任何**项目**具有匹配的**VariantType**。在你的情况下，有。但是当您执行**xsl:value-of**时，它将输出第一**项**的值，无论它是否与变体类型匹配。

 ******您可以将**xsl:value-of**更改为：

```
<xsl:value-of name="test" select="item[VariantType = ../ChosenVariantType]/VariantType"/> 
```

（尽管这毫无意义，因为您知道 VariantType 与 ChosenVariantType 匹配）。

或者您可能需要在这里迭代**项目**元素？

```
<xsl:for-each select="Product/item/ProductVariant/item">
    <xsl:if test="(VariantType = ../../ChosenVariantType)">
        <xsl:value-of name="test" select="VariantType"/>
        <xsl:text>-</xsl:text>
        <xsl:value-of name="testChosen" select="../../ChosenVariantType"/>
    </xsl:if>   
</xsl:for-each> 
```******

# c# - Application_Error 未记录错误

> ID：14876752
> 
> 赞同：7
> 
> 时间：2013-02-14T14:13:00.993
> 
> 标签：c#, asp.net, .net

我有一个`Asp.Net 4.0 Web Forms`应用程序在某些时候会引发以下错误

> “'/MySiteDev' 应用程序中的服务器错误”。

这个错误只是偶尔出现。并且此错误不会触发`Application_Error`中处理的事件`Global.asax`。

由于这不会触发 Application_Error，那么还有哪些其他可能的地方会记录此错误事件？除了事件查看器还有什么可用的？

有什么方法可以找出 ASP.Net 框架处理的异常？

注意：`customErrors mode="Off"`。还`runAllManagedModulesForAllRequests="true"`

**更新**

参考[如何：处理应用程序级错误](http://msdn.microsoft.com/en-us/library/24395wz3(v=vs.100).aspx)

> Global.asax 文件中定义的错误处理程序将仅捕获在 ASP.NET 运行时处理请求期间发生的错误。例如，如果用户请求在您的应用程序中没有出现的 .aspx 文件，它将捕获错误。但是，如果用户请求不存在的 .htm 文件，它不会捕获错误。对于非 ASP.NET 错误，您可以在 Internet 信息服务 (IIS) 中创建自定义处理程序。服务器级错误也不会调用自定义处理程序。
> 
> 您不能直接输出来自 Global.asax 文件的请求的错误信息；您必须将控制权转移到另一个页面，通常是 Web 窗体页面。将控制权转移到另一个页面时，使用 Transfer 方法。这会保留当前上下文，以便您可以从 GetLastError 方法获取错误信息。
> 
> 处理错误后，您必须通过调用 Server 对象（HttpServerUtility 类）的 ClearError 方法来清除它。

**代码**

```
 protected void Application_Error(object sender, EventArgs e)
    {
        //Get the exception object
        Exception exception = Server.GetLastError().GetBaseException();

        //Get the location of the exception
        string location = Request.Url.ToString();
        if (!String.IsNullOrEmpty(location))
        {
            string[] partsOfLocation = location.Split('/');
            if (partsOfLocation != null)
            {
                if (partsOfLocation.Length > 0)
                {
                    location = partsOfLocation[partsOfLocation.Length - 1];
                }
            }

            //Maximum allowed length for location is 255
            if (location.Length > 255)
            {
                location = location.Substring(0, 254);
            }
        }

        string connectionString = ConfigurationManager.ConnectionStrings[UIConstants.PayrollSQLConnection].ConnectionString;
        ExceptionBL exceptionBL = new ExceptionBL(connectionString);

        exceptionBL.SubmitException(exception.Message, location);
        Log.Logger.Error(exception.Message);

    } 
```

**配置**

```
<system.web>

<compilation debug="true" targetFramework="4.0" />
<pages validateRequest="false"></pages>
<httpRuntime requestValidationMode="2.0" />
<customErrors mode="Off"/>
<authentication mode="Windows"></authentication>
<identity impersonate="true" userName="domain\xxxx" password="xxxx"/>

</system.web>

<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
<httpErrors errorMode="Detailed" />
</system.webServer> 
```

**更新的参考文献**

1.  [Application_Error 未触发](http://forums.iis.net/t/1193207.aspx/1)
2.  [Global.asax 事件 Application_Error 未触发](http://www.codeproject.com/Questions/416647/Global-asax-event-Application_Error-is-not-firing)
3.  [Application_Error 不会触发？](https://stackoverflow.com/questions/5604144/application-error-does-not-fire)
4.  [如何：处理应用程序级错误](http://msdn.microsoft.com/en-us/library/24395wz3(v=vs.100).aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:15:16.767

检查事件查看器中的日志，它应该记录服务器级别和应用程序级别的错误。

应用程序错误处理程序可能没有处理该事件，因为它发生在您的应用程序成功启动并创建上下文之前。因此，似乎有应用程序配置或服务器配置停止处理请求。

或者，应用程序在请求生命周期中足够早地遇到问题，即使在启动之后，它也会“挂起”，直到服务器决定终止进程（例如，可能以@MikeSmithDev 提到的 StackOverflowException 的形式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T10:17:27.627

这是一个`load balanced`带有 A 和 B 框的环境。

部署 Web 应用程序的团队确认，在其中一个框中，配置文件未正确复制。

我认为，该应用程序在击中 A 框并在 B 框失败时运行良好。我认为，由于配置不存在，因此无法调用`Application_Error`.

请告诉您是否有不同的意见。

注意：重新部署时问题不存在

# css - 相当于 HTML5Boilerplate 的 .visuallyhidden 的引导程序

> ID：14876754
> 
> 赞同：9
> 
> 时间：2013-02-14T14:13:06.330
> 
> 标签：css, twitter-bootstrap, html5boilerplate

是否有相当于 HTML5Boilerplate 的 .visuallyhidden 非语义辅助类的 Twitter Bootstrap？我在 CSS 文件中看不到任何类似的东西。.visuallyhidden 类的目的是在视觉上隐藏它，但使文本对屏幕阅读器可用。是否有不同的 Bootstrappy 方法来实现相同的目标？

```
// HTML5Boilerplate's non-semantic helper class
.visuallyhidden {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
} 
```

相关的 Bootstrap 非语义辅助类没有达到同样的效果：

```
// Some of Twitter Bootstrap's non-semantic helper classes
.hide {
    display: none;
}

.invisible {
    visibility: hidden;
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-10-12T23:39:05.940

`.sr-only`您可以在 HTML（非语义）中或作为 mixin使用 Bootstrap 类。这是定义：

```
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0 0 0 0);
  border: 0;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-15T09:52:28.313

出色地，

```
.text-hide {
    background-color: transparent;
    color: transparent;
    border: 0;
    font: 0/0 a;
    text-shadow: none;
} 
```

**编辑 2013-11-25**：在 Bootstrap v3.0.1 中（正如 Dean 在下面的评论中正确指出的那样）`.text-hide`，您可以部分满足您的需求。在 Bootstrap v3 之前，类名是`.hide-text`.
它最初用于图像替换，因此它使“显示”属性保持不变。

有关此规则中所有属性的完整说明，请参阅[https://github.com/h5bp/html5-boilerplate/commit/aa0396eae757](https://github.com/h5bp/html5-boilerplate/commit/aa0396eae757)`0/0 a` ，例如CSS 验证器的绝妙解决方法。

关于课程的进一步阅读`.hide-text`：
[https ://github.com/twitter/bootstrap/issues/2362#issuecomment-4501223](https://github.com/twitter/bootstrap/issues/2362#issuecomment-4501223)

您的问题在 Bootstrap 中还有一个问题： [https ://github.com/twitter/bootstrap/issues/6452](https://github.com/twitter/bootstrap/issues/6452)

# jquery - 需要帮助使用 Twitter Bootstrap 构建此布局

> ID：14876757
> 
> 赞同：1
> 
> 时间：2013-02-14T14:13:12.063
> 
> 标签：jquery, html, twitter-bootstrap

我试图弄清楚如何使用 HTML(5) 和 Twitter Bootstrap 构建这样的布局：

![小样](../Images/4a1ece2a882861b4870c2436fd1e43e9.png)

它不需要在 IE < 9（虽然 8 会很好）或旧版本的 Firefox/Chrome 中得到支持。然而，它应该在移动设备上很好地呈现，尽管我们知道固定的左侧菜单在非常小的显示器上是一个问题。它的主要用途是台式机和平板电脑。

我一直在尝试修改诸如[this](https://stackoverflow.com/questions/9350818/fixed-sidebar-navigation-in-fluid-twitter-bootstrap-2-0)、[this](http://twitter.github.com/bootstrap/examples/sticky-footer.html)和[this](http://attributerouting.net/)之类的示例/相似性，但没有运气。

你知道我可以找到这样的布局的任何例子，或者你知道如何制作吗？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:26:36.160

以下是一个简单的示例，但应该满足您的要求。

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">

        /* Don't include the * reset just for demonstration purposes only */
        * {
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
        }

        #sidebar {
            background: green;
            height: 100%;
            position: absolute;
                left: -260px;
                top: 0;
            width: 260px;
        }

        #container {
            background: blue;
            margin: 0 0 0 260px;
            min-height: 100%;
            position: relative;
        }

        #footer {
            background: red;
            height: 60px;
            position: fixed;
                bottom: 0;
            width: 100%;
        }

    </style>

</head>
<body>
    <div id="container">
        <div id="sidebar">
        sidebar
        </div>

        container
    </div>
    <div id="footer">
        I am a footer
    </div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:29:59.013

这可能有效：

**HTML**

```
<div id="wrapper">
    <div id="left-column"></div>
    <div id="right-column"></div>
</div>
<div id="footer">
</div> 
```

**CSS**

```
body, html {height:100%; padding:0; margin:0;}
#wrapper {height:100%; padding:0 0 60px 260px; box-sizing:border-box; -moz-box-sizing:border-box;}
#left-column {width:260px; margin-left:-260px; float:left; height:100%; background-color:red; overflow-y:scroll;}
#right-column {width:100%; float:left; height:100%; background-color:blue; overflow-y:scroll;}
#footer {height:60px; position:fixed; bottom:0; left:0; width:100%; background-color:green;} 
```

[http://jsfiddle.net/rGBAt/1/](http://jsfiddle.net/rGBAt/1/)

目前它的溢出-y 设置为滚动，但您可能希望使用 jquery 添加他，因此它并不总是在 chrome 等浏览器中添加滚动条，我不确定它是否与 Twitter 引导程序兼容

此版本在内容变得太大时添加溢出：

[http://jsfiddle.net/rGBAt/7/](http://jsfiddle.net/rGBAt/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:41:55.253

对于页脚，您是否考虑过使用引导导航栏？您可以使用该类`navbar-fixed-bottom`将其固定到底部。它将始终可见。

```
<div class="navbar navbar-fixed-bottom">
    <div class="navbar-inner">
        <ul class="nav">
            <li><a href="#">footer</a></li>
        </ul>
    </div>
</div> 
```

由于您使用的是引导程序，因此您应该考虑左侧 div 的[Affix](http://twitter.github.com/bootstrap/javascript.html#affix)菜单选项。这将允许您在滚动时将菜单保留在屏幕上。

# python - 如何解决这个 django 错误页面未找到 (404)

> ID：14876763
> 
> 赞同：3
> 
> 时间：2013-02-14T14:13:57.403
> 
> 标签：python, django

我正在使用教程创建这个 django 应用程序，我已经完成第 4 部分[https://docs.djangoproject.com/en/dev/intro/tutorial04/](https://docs.djangoproject.com/en/dev/intro/tutorial04/)

该应用程序显示一个基本民意调查，当您单击它时，它会显示一些选项和一个投票按钮。![在此处输入图像描述](../Images/ad862e794921ff6de6e62bf551f439c6.png)

问题是当我点击 vote 时。它显示页面未找到。我认为问题在于重定向，但我不知道在哪里确定问题所在。第一页是显示问题的 index.html，然后是显示选项和问题的 detail.html。我知道当我点击 vote 时，它​​会返回到应用程序 URLconf，然后 urlconf 执行视图函数，视图函数执行结果。

我的 detail.html 是

```
 <h1>{{ poll.question }}</h1>

 {% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

 <form action="/myapp/{{ poll.id }}/vote/" method="post">
 {% csrf_token %}
 {% for choice in poll.choice_set.all %}
     <input type="radio" name="choice" id="choice{{ forloop.counter }}" value="{{ choice.id }}" />
     <label for="choice{{ forloop.counter }}">{{ choice.choice_text }}</label><br />
 {% endfor %}
 <input type="submit" value="Vote" />
 </form> 
```

我在 myapp 中的 urls.py 是：

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
from django.conf import settings

from django.conf.urls import patterns, include, url

urlpatterns = patterns('myapp.views',
    url(r'^$', 'index'),
    url(r'^(?P<poll_id>\d+)/$', 'detail'),
    url(r'^(?P<poll_id>\d+)/results/$', 'results'),
    url(r'^(?P<poll_id>\d+)/vote/$', 'vote'),
) 
```

我的views.py是：

```
from django.http import HttpResponse
from myapp.models import Poll ,choice
from django.template import Context, loader
from django.http import Http404
from django.shortcuts import render_to_response, get_object_or_404
from django.template import RequestContext

def index(request):
    latest_poll_list = Poll.objects.all().order_by('-pub_date')[:5]
    return render_to_response('myapp/index.html', {'latest_poll_list': latest_poll_list})

def results(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    return render_to_response('myapp/results.html', {'poll': p})

def vote(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    try:
        selected_choice = p.choice_set.get(pk=request.POST['choice'])
    except (KeyError, Choice.DoesNotExist):
        # Redisplay the poll voting form.
        return render_to_response('myapp/detail.html', {
            'poll': p,
            'error_message': "You didn't select a choice.",
        }, context_instance=RequestContext(request))
    else:
        selected_choice.votes += 1
        selected_choice.save()
    # Always return an HttpResponseRedirect after successfully dealing
    # with POST data. This prevents data from being posted twice if a
    # user hits the Back button.
        return HttpResponseRedirect(reverse('myapp.views.results', args=(p.id,)))

def detail(request, poll_id):
    p = get_object_or_404(Poll, pk=poll_id)
    return render_to_response('myapp/detail.html', {'poll': p},
                           context_instance=RequestContext(request)) 
```

我的 results.html 是：

```
<h1>{{ poll.question }}</h1>

<ul>
{% for choice in poll.choice_set.all %}
    <li>{{ choice.choice_text }} -- {{ choice.votes }} vote{{ choice.votes|pluralize }}</li>
{% endfor %}
</ul>

<a href="/myapp/{{ poll.id }}/">Vote again?</a> 
```

感谢你们对我的帮助 。如果我能让它发挥作用，这将是我的第一个突破性应用程序。

我的主要 URLconf 是：

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
from django.conf import settings
# Uncomment the next two lines to enable the admin:
# from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^polls/', include('myapp.urls')),
    url(r'^admin/', include(admin.site.urls)),
) 
```

![在此处输入图像描述](../Images/919a7d2e204fd742594706019141309e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T14:45:06.267

## 不要硬编码网址

您不应该**在**任何地方硬编码 URL - 就像文件系统路径一样。你不仅会杀死小猫，还会让你的代码变得不那么可靠！

## 反向网址 instaed ！

阅读关于开胃菜的[反向 url](https://docs.djangoproject.com/en/dev/topics/http/urls/#reverse-resolution-of-urls)，[使用命名的 url](https://docs.djangoproject.com/en/1.4/topics/http/urls/#naming-url-patterns)作为主菜，以及关于[{% url %} 模板](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#url)标签的甜点。

在消化的时候，你将成为 Django url 系统的高手 B)

## 阅读教程

在您链接的教程中，他们没有硬编码网址：

```
{% url 'polls:vote' poll.id %} 
```

这就是要走的路！

确保您的模板中没有硬编码的网址，您的问题就会消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T14:16:44.847

松开表单操作的 myapp 位。

它应该是

```
<form action="polls/{{poll.id}}/vote" method="post"> 
```

这与您的 urls.py 文件中的正则表达式匹配 -

```
url(r'^polls/', include('myapp.urls')), 
```

然后在 myapp.urls -

```
url(r'^(?P<poll_id>\d+)/vote/$', 'vote'), 
```

该`include`函数表示 django 正在尝试匹配`^polls/(?P<poll_id>\d+)/vote/$`

如果您查看错误页面，您可以看到 django 尝试匹配的 url（它们都不包含“myapp”，它应该是民意调查）。

**重要的**

当您进一步了解本教程时，您会发现您不应该在模板中对 url 进行硬编码（正如 jpic 正确指出的那样）。在这个阶段，您需要将表单操作换成`{% url 'polls:vote' poll.id %}`.

# javascript - 如果是全局窗口参数，为什么要传输全局窗口参数

> ID：14876765
> 
> 赞同：0
> 
> 时间：2013-02-14T14:13:58.140
> 
> 标签：javascript, jquery

我们有`jQuery`使用包装代码的基本脚本，它使用传输的全局`window`参数进行初始化。有必要传递这个参数吗？`window`是一个全局参数，无论是否传输，都可以在函数内部使用它。

这是什么原因？

```
(function (window, undefined) {
    var jQuery = (function () {

        //Define a local copy of jQuery
        var jQuery = function (selector, context) {
            // The jQuery object is actually just the init constructor 'enhanced'
            return new jQuery.fn.init(selector, context, rootjQuery);
        },  
    //some code
    //...
    //...
    //...

    window.jQuery = window.$ = jQuery;
})(window); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:16:10.607

缩小后文件大小更小。

如果您`window`在任何地方使用，缩小器会将每个引用保留为`window`. 如果你通过一个闭包传递它，压缩器会将它转换为类似的东西`a`，如果多次使用，这将节省字节数`window`。

# tridion - 使用带有 Razor 的 XPM 模板的多个 RenderComponentPresentations

> ID：14876769
> 
> 赞同：2
> 
> 时间：2013-02-14T14:14:12.000
> 
> 标签：tridion, tridion-2011, experience-manager

您可能已经知道，我正在努力使用 Razor 制作一些 XPM 模板。我遇到了另一个问题，这次是关于在模板中渲染组件以使它们可站点编辑。

以下我不确定。我有一个组件，它有一个名为“Title”的标题字段，以及由具有标题、描述和图像的组件组成的多值组件链接字段。我们暂时称它为“链接的 USP”。

目前，这是由一个名为“页面横幅”的模板呈现的，它只是用一些 If 循环遍历字段以确定它的呈现方式，尤其是对于标题。为了让 XPM 工作，这个模板需要渲染“Linked USP”的组件表示。所以我们创建了一个名为“[XPM] USP ITEM”的模板。- 此组件模板添加了“启用内容编辑 TBB”。

现在，当我想让标题也可编辑时，问题就出现了。听起来很简单，不是吗？不是真的 - 因为当父模板添加了“启用内容编辑”TBB 时，它会将`<span>`标签添加到所有可编辑字段，但在此模板中调用的模板也将具有`<span>`-tags，有效地膨胀 html 并使其由于重复`<span>`s ，无法编辑 RenderComponentPresentation 中的字段。

一些代码供您娱乐并说明我的问题：

```
<h1>@RenderComponentField("Title", 0)</h1>

@Foreach(var linkedUSP in Fields.USPS){
     @RenderComponentPresentation("linkedUSP.ID", "tcm:10-1076-32")
} 
```

此模板添加了启用内容编辑 TBB。

现在，对于上面提到的 RCP，在其 [XPM] 模板中：

```
<div class="title">@RenderComponentField("Title", 0)</div>
    <p>@RenderComponentField("Description", 0)</p>
    <tcdl:ComponentField name="img">
         <img src="@img" alt="img.MetaData.alt">
    </tcdl:ComponentField> 
```

这一个还添加了“启用内容编辑”TBB。在前端会发生这种情况：

```
<div class="title"><span><span>Men</span></span></div> 
```

因为父模板还向字段添加跨度。

所以我的问题是：我该如何解决这个问题？上面提到的 Title 字段必须在父模板内，但我不能为它创建一个特殊的模板，因为它没有组件链接。我无法将 TBB 从我的 RCP 模板中取出，因为那样无法对其进行编辑。有趣吧？

我不能以某种方式禁用模板构建器中的跨度吗？

# spring - Cloudfoundry 上的“打开的文件太多”错误

> ID：14876774
> 
> 赞同：0
> 
> 时间：2013-02-14T14:14:28.607
> 
> 标签：spring, cloud-foundry

运行我的应用程序大约 5 分钟后，我收到可怕的“打开的文件过多”错误。这对我来说是一个展示者。我知道有 256 个打开文件的限制。如果我有泄漏，我运行 lsof 来追踪。我发现许多打开的句柄只是 Tomcat 和其他进程必须建立的简单连接。“nginx”进程似乎是唯一一个波动的进程，但它仍然只能达到 81 左右的最大值。我的应用程序似乎没有泄漏文件描述符。我非常喜欢 Cloud Foundry。这是第一个不需要我重构我的应用程序来使事情正常运行的 PAAS。文件限制什么时候提高？我使用 Micro Cloud Foundry 进行测试，但我想尽快在 Hosted Cloud Foundry 上运行。我在两个版本中都收到此错误。有没有解决的办法？我尝试修改 Micro Cloud 实例的限制，但我收到错误消息，提示我无权进行此类更改。对此有任何帮助或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T23:01:04.840

新的文件描述符配额在以下数据库迁移中：

[https://github.com/cloudfoundry/cloud_controller_ng/blob/master/db/migrations/20130131184954_new_initial_schema.rb](https://github.com/cloudfoundry/cloud_controller_ng/blob/master/db/migrations/20130131184954_new_initial_schema.rb)

185 号线。

直到 4 月我们从 beta 状态出现并且我们的“下一代”组件投入生产时，此特定设置才会在我们的[http://cloudfoundry.com上生效。](http://cloudfoundry.com)

如果您运行自己的 Cloud Foundry 版本，则可以运行此迁移，假设您使用的是 cloud_controller_ng。

我们在内部用于开发的 Micro Cloud Foundry 中确实有新的云控制器。您可以在此处阅读我们如何为自己的目的运行它：

随着我们弃用遗留位并转向这些 NG 组件，我们正处于一个过渡期。为故障道歉，但它们值得付出代价。谢谢你的耐心。

最好的，

Matt Reider 产品经理 Cloud Foundry

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:41:21.810

我以 root 用户身份登录。我修改了 /var/vcap/packages/dea/dea/lib/dea/agent.rb 文件和 /etc/security/limits.conf 文件。

对于 agent.rb 文件，我按照此处的说明进行操作：http: [//mdahlman.wordpress.com/2012/04/20/micro_cloud_foundry/](http://mdahlman.wordpress.com/2012/04/20/micro_cloud_foundry/)

对于limits.conf文件，我按照这里的说明操作：http: [//myadventuresincoding.wordpress.com/2010/10/09/ubuntu-increasing-the-maximum-number-of-open-files/](http://myadventuresincoding.wordpress.com/2010/10/09/ubuntu-increasing-the-maximum-number-of-open-files/)

我不确定哪个修复有帮助，或者是否需要修改这两个文件。该应用程序现在似乎正在运行，所以我继续前进。如果有人有更好的解决方案，我会很高兴听到。

这仅允许我在自托管的微型云代工厂上运行我的应用程序。如果有人有托管版本的解决方案会更好。不幸的是，我必须找到一些方法来限制我的应用程序使用 256 个文件描述符，而这不太可能发生。

# vb.net - 将日期作为字符串插入以使用 DAO 记录集进行访问

> ID：14876782
> 
> 赞同：1
> 
> 时间：2013-02-14T14:15:03.787
> 
> 标签：vb.net, ms-access, datetime, dao, recordset

我正在使用在旧的 C# 帖子中找到的一些代码来使用 VB.net 将 DAO 插入到 Access 中。我运行代码来插入数字，它运行良好。但是，当我尝试`date`在哈希之间插入一个字符串时，我得到一个`Data type conversion error`. 我看了一下，但看不到如何更改记录集字段的数据类型以接受字符串/日期。

这是代码：

```
 Dim dbEngine As New dao.DBEngine
    Dim db As dao.Database = dbEngine.OpenDatabase(DataDirectoryName & DatabaseName)
    Dim rs As dao.Recordset = db.OpenRecordset(TableName)

    Dim myFields As dao.Field() = New dao.Field(FieldNames.Count - 1) {}
    For k As Integer = 0 To FieldNames.Count - 1
        myFields(k) = rs.Fields(FieldNames(k))
    Next

    dbEngine.BeginTrans()
    For i As Double = 0 To Data.Rows - 1
        rs.AddNew()
        For k As Integer = 0 To FieldNames.Count - 1
            rs.Fields(k).Value = Data.Value(k, i)
            rs.Fields(FieldNames(k)).Value = Data.Value(k, i)
            myFields(k).Value = Data.Value(k, i)
        Next
        rs.Update()
    Next
    dbEngine.CommitTrans()
    rs.Close()
    db.Close() 
```

这是一行数据：

```
(0) = "74"
(1) = "#01 February 2012 00:02:00#"
(2) = "40"
(3) = "130"
(4) = "60" 
```

'Data' 是一个自定义类，它是一个`list (of list (of string))`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:47:02.920

虽然 VBA 将接受您的字符串上的日期分隔符，例如 #11 February 2013 20:23:11# 似乎 VB.Net 不会，但是它确实接受 MS Access 更新。

```
 rs.Fields("adate").Value = CDate("11 February 2013 20:23:11") 
```

# compression - 压缩具有小差异的排序数据

> ID：14876783
> 
> 赞同：1
> 
> 时间：2013-02-14T14:15:03.700
> 
> 标签：compression, sorted

我已经对整数的数据序列进行了排序。2 个数字之间的最大差值为 3。因此数据看起来像这样：

```
Data: 1 2 3 5 7 8 9 10 13 14
Differences: (start 1) 1 1 2 2 1 1 1 3 1 
```

有没有比保存差值更好的方法来存储（压缩）这种类型的序列？因为如果我使用基于字典的方法，由于数字 1,2 和 3 的随机性，它无法压缩。如果我使用“PAQ”样式压缩，结果会更好，但仍然不太令人满意。霍夫曼和算术编码器比基于字典的方法差。

有什么方法可以预测吗？

例如，对原始数据使用回归而不是存储差异（可能更小或更一致）

或者使用某种基于差异直方图的预测？

或者完全不同的东西......或者根本不可能（在我看来，这是真正的答案:)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:30:07.547

由于您在评论中说您已经在每个字节存储了四个差异，因此您可能不会做得更好。如果差异 0、1、2 和 3 是随机且均匀分布的，那么就没有办法做得更好了。

如果它们分布不均匀，那么使用霍夫曼或算术代码可能会做得更好。例如，如果 1 比 0 更常见，而 0 比 2 和 3 更常见，那么您可以将 1 存储为 0、0 存储为 10、2 存储为 110、3 存储为 111。或者如果 0 从未发生，则将 1 存储为 0、2和 3 作为 10 和 11。对于您引用的 1 出现 80% 的时间的情况，您可以使用算术代码做得更好。或者一个穷人的算术代码，通过编码符号对。例如：

```
11 0
13 100
21 101
12 110
31 1110
22 111100
23 111101
32 111110
33 111111 
```

将是 1 80%、2 10%、3 10% 的好代码。（这并不能完全处理奇数差异的情况，但您可以在开始时只用一点表示偶数或奇数，如果奇数在最后再增加几位。）

可能有比之前的值更好的预测器。这将是*n 个*先前值的函数，而不仅仅是一个先前值。然而，这将高度依赖数据。例如，您可以假设当前值可能落在前两个值所形成的线上。或者它落在前面三个值所形成的抛物线上。或者一些其他函数，例如具有某种频率的正弦曲线，如果数据如此有偏差的话。

# c# - WCF 异步模式 + 任务 .Factory.FromAsync = ContextSwitchDeadlock

> ID：14876793
> 
> 赞同：1
> 
> 时间：2013-02-14T14:15:34.310
> 
> 标签：c#, .net, wcf, task-parallel-library

我试图通过使用 Task.Factory.FromAsync 将调用包装到客户端的任务中来简化对 WCF 异步操作的调用。但是当我 Start() 包装的任务时，对 Start() 的调用会阻塞客户端，直到调试器报告 ContextSwitchDeadlock。但是，服务器端操作被正确调用。我错过了什么？

WCF 合同：

```
[ServiceContract(Namespace = "urn:test/test")]
public interface ITestContract
{
    [OperationContract(AsyncPattern=true)]
    IAsyncResult BeginGetResult(AsyncCallback callback, object state);

    int EndGetResult(IAsyncResult result);
} 
```

客户端代码：

```
var task = Task<int>.Factory.FromAsync(
    (callback, state) => service.BeginGetResult(callback, state),
    (result) => service.EndGetResult(result)
);
task.Start(); // blocks until ContextSwitchDeadlock gets reported 
```

编辑：为了完整起见：不，我不能使用 .NET 4.5 async / await 模式，因为 .NET 4.0（即 Windows XP 和 Server 2003 支持）是我项目的硬性要求。

编辑2：

`Start()`无论如何都不需要调用 to 。真正的问题是`BeginGetResult`在我调用之前不会在服务器端调用`Start()`，`Wait()`或者`Result`- 这与同步调用相同。

正如我发现的那样，这与任务完全无关。如果我执行以下操作，我会得到相同的结果：

```
var asyncResult = service.BeginGetResult(null, null); // BeginGetResult NOT invoked on server side!
asyncResult.AsyncWaitHandle.WaitOne(); // Now BeginGetResult actually gets invoked 
```

编辑3：

原来这一切都只是我的一个误会。我希望`BeginGetResult`在客户端调用会*立即*调用服务器端的相应调用`BeginGetResult`，即`BeginGetResult`客户端会阻塞，直到服务器实际收到请求，但情况似乎并非如此。显然请求是在后台线程中发送的，因此客户端和服务器端调用`BeginGetResult`. 我想这种行为是可以预料的，所以一切都很好:-)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:29:36.867

您不需要调用`Start`created `Task`by `FromAsync`。`Start`仅适用于有代码的任务，而`FromAsync`任务没有任何代码。

# xml - VBA - 从 XML 显示每个节点及其值

> ID：14876802
> 
> 赞同：4
> 
> 时间：2013-02-14T14:15:51.780
> 
> 标签：xml, vba, excel, recursion, xmldom

我有一个简单的 XML，如下所示，我需要显示每个节点的名称及其值。任何元素都不会有任何属性。

```
<?xml version="1.0" encoding="UTF-8"?>
<ResponseEnvelope xmlns="http://www.nwabcdfdfd.com/messagin" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <ResponseHeader>
      <RequestId>directv_99e0857d-abf3-461c-913e-3ab59c6b5ef6</RequestId>
      <ResponseId>1162969</ResponseId>
      <MessageVersion>1.10</MessageVersion>
      <RequestTimestamp>2013-02-12T17:26:28.172Z</RequestTimestamp>
      <ResponseTimestamp>2013-02-12T17:26:50.409Z</ResponseTimestamp>
      <SenderId>CarePortal2</SenderId>
      <ProgramName />
      <TestProdFlag>P</TestProdFlag>
      <ResultCode>9</ResultCode>
      <Locale>en_US</Locale>
      <Errors>
         <Error>
            <ErrorCode>9</ErrorCode>
            <ErrorNumber>90001</ErrorNumber>
            <ErrorMessage>System error occurred</ErrorMessage>
            <ErrorFieldId />
         </Error>
      </Errors>
   </ResponseHeader>
   <ResponseBody xsi:type="CPSingleSignOnResponse">
      <PortalUserID>45497</PortalUserID>
      <PartyID>1858186</PartyID>
      <WarrantyItemName>DTV ABC WOLE HE P</WarrantyItemName>
      <WarrantyInventoryItemId>138677</WarrantyInventoryItemId>
      <ClientWarrantySku>202</ClientWarrantySku>
      <ClientWarrantyDescription>DV Plan</ClientWarrantyDescription>
      <ContractNumber>4003564</ContractNumber>
      <IsPortalUserCreated>N</IsPortalUserCreated>
      <IsPartyCreated>N</IsPartyCreated>
      <IsContractUpdated>N</IsContractUpdated>
      <IsFootPrintUpdated>N</IsFootPrintUpdated>
      <Customer>
         <PartyId>185812386</PartyId>
         <Salutation />
         <FirstName>Tejas</FirstName>
         <LastName>Tanna</LastName>
         <AddressList>
            <Address>
               <PartySiteId>3617490</PartySiteId>
               <Type>BILTO</Type>
               <Address1>CASCADES</Address1>
               <Address2>202</Address2>
               <Address3>RIDGE HEAVEN</Address3>
               <Address4 />
               <City>STERLING</City>
               <State>VA</State>
               <PostalCode>20165</PostalCode>
               <County>LOUDOUN</County>
               <Province />
               <Country>US</Country>
               <Urbanization />
               <AddressStyle>US</AddressStyle>
            </Address>
            <Address>
               <PartySiteId>3613791</PartySiteId>
               <Type>SHIP_T</Type>
               <Address1>CASADS</Address1>
               <Address2>22</Address2>
               <Address3>RIE HEEN</Address3>
               <Address4 />
               <City>STELI</City>
               <State>VA</State>
               <PostalCode>2065</PostalCode>
               <County>LOUUN</County>
               <Province />
               <Country>US</Country>
               <Urbanization />
               <AddressStyle>US</AddressStyle>
            </Address>
         </AddressList>
         <PhoneList>
            <Phone>
               <ContactPointId>2371717</ContactPointId>
               <Type>HOME PNE</Type>
               <PhoneNumber>51-62-7464</PhoneNumber>
               <Country>1</Country>
               <PrimaryFlag>Y</PrimaryFlag>
            </Phone>
         </PhoneList>
         <EmailList>
            <Email>
               <ContactPointId>237516</ContactPointId>
               <EmailAddress>a.abc@abc.com</EmailAddress>
               <PrimaryFlag>Y</PrimaryFlag>
            </Email>
         </EmailList>
      </Customer>
   </ResponseBody>
</ResponseEnvelope> 
```

这里唯一的挑战是可能有一些元素可能在它自己的子元素中，例如**地址**所以代码需要有一个递归函数。

此外，不应显示没有像**Address4 这样的文本的元素（它只有子元素）**。此外，不应显示**省**等元素。

我尝试了以下代码但没有工作..

```
Sub Driver()
    Range("4:" & Rows.Count).ClearContents
    Set xmlDoc = CreateObject("Microsoft.XMLDOM")

    i = 4
    xmlDoc.LoadXML (Range("A2"))
    Set oParentNode = xmlDoc.DocumentElement.SelectNodes("ResponseBody")(0)
    Call List_ChildNodes(oParentNode, i, "A", "B")
End Sub

Sub List_ChildNodes(oParentNode, i, NameColumn, ValueColumn)
    For Each oChildNode In oParentNode.ChildNodes
        If oChildNode.ChildNodes.Length > 1 Then
            Call List_ChildNodes(oChildNode, i, NameColumn, ValueColumn)
        Else
            Cells(i, NameColumn) = oChildNode.tagname
            Cells(i, ValueColumn) = oChildNode.Text
            i = i + 1
        End If
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:34:14.123

假设您的 XML 在单元格“A2”中，第一个问题是您的行

```
 Set oParentNode = xmlDoc.DocumentElement.SelectNodes("ResponseBody")(0) 
```

退货`nothing`。将其更改为

```
 Set oParentNode = xmlDoc.DocumentElement 
```

并且代码至少会有一些东西要处理。

> 编辑 1&2

另一个问题是 node-inside-a-node 不会给出正确的输出。为了解决这个问题，你需要`List_ChildNodes`稍微改变你的功能。第一个修改适用于您提供的示例，但不适用于后一个，因为我之前提供的代码无法正确解析它。所以我添加了一个错误陷阱，以确保即使这个 XML 也被正确读取（我相信是这样）。使用的技巧`On Error Resume Next`本质上是一个`Try ... Catch`语句的 VBA 等效项（除了“catch”是：“如果有错误，请将 L 设置为零。我们实际上是先将 L 设置为零，并且不要在错误时覆盖它。同样的事情，不同的顺序。他们在学校不教的那些技巧之一！）

```
Sub List_ChildNodes(oParentNode, i, NameColumn, ValueColumn)
Dim L As Integer
    For Each oChildNode In oParentNode.ChildNodes
        L = 0
        Err.Clear
        On Error Resume Next
        L = oChildNode.ChildNodes(0).ChildNodes.Length
        If L > 0 Then
            Call List_ChildNodes(oChildNode, i, NameColumn, ValueColumn)
        Else
            If Not oChildNode.Text = "" Then
                Cells(i, NameColumn) = oChildNode.tagName
                Cells(i, ValueColumn) = oChildNode.Text
                i = i + 1
            End If
        End If
    Next
End Sub 
```

我已经使用您提供的更大的 XML 片段测试了最新版本，它似乎可以毫无故障地解析。我不打算逐行检查...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:14:40.300

Excel 有一个内置的 .xml 导入器。你不需要自己写（除非你想做一些不寻常的事情）。[http://office.microsoft.com/en-us/excel-help/import-xml-data-HP010206405.aspx#BMimport_an_xml_file_as_an_xml_list_wit](http://office.microsoft.com/en-us/excel-help/import-xml-data-HP010206405.aspx#BMimport_an_xml_file_as_an_xml_list_wit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-16T02:28:38.023

试试这个版本。

笔记：

*   使用 MSXML2.DOMDocument.6.0 而不是非常过时的 Microsoft.XMLDOM
*   使用 Option Explicit 并且所有变量都用适当的类型声明
*   为方便起见从文件加载，但您显然可以将其更改回从范围读取
*   通过声明默认命名空间的前缀并在任何 XPath 查询中使用该前缀，避免了 MSXML2 中常见的 XPath 默认命名空间问题
*   让文本节点负责打印自己的文本
*   使用 Function 而不是 Sub 以便我们知道何时打印出节点名称

这是代码：

```
Option Explicit

Sub Driver()

Dim i As Long
Dim xmlDoc As Object
Dim oParentNode As Object
Dim bDiscard As Boolean

Range("4:" & Rows.Count).ClearContents
i = 4

Set xmlDoc = CreateObject("MSXML2.DOMDocument.6.0")
xmlDoc.Load "foo.xml"
xmlDoc.setProperty "SelectionNamespaces", "xmlns:r='http://www.nwabcdfdfd.com/messagin'"

Set oParentNode = xmlDoc.selectSingleNode("//r:ResponseBody")
bDiscard = listChildNodes(oParentNode, i, "A", "B")

End Sub

Function listChildNodes(oParentNode As Object, i As Long, NameColumn As String, ValueColumn As String) As Boolean

Dim oChildNode As Object
Dim bResult As Boolean

If (oParentNode.nodeType = 3) Then 'i.e. DOMNodeType.NODE_TEXT
    Cells(i, ValueColumn).Value = oParentNode.Text
    listChildNodes = True
Else
    For Each oChildNode In oParentNode.childNodes
        bResult = listChildNodes(oChildNode, i, NameColumn, ValueColumn)

        If (bResult) Then
            Cells(i, NameColumn).Value = oParentNode.nodeName
            i = i + 1
        End If
    Next oChildNode
    listChildNodes = False
End If

End Function 
```

# ruby-on-rails-3 - 升级 Rails 时出现语法错误：意外的 ','，需要 tASSOC (SyntaxError)

> ID：14876805
> 
> 赞同：1
> 
> 时间：2013-02-14T14:15:55.347
> 
> 标签：ruby-on-rails-3

我一直在使用一个名为[ajaxful-rating](https://github.com/edgarjs/ajaxful-rating/blob/master/lib/axr/model.rb)的 gem 。现在，当我升级到 Rails 3.1 时，我收到以下错误：

```
/Users/nn/.rvm/gems/ruby-1.9.2-p290/gems/ajaxful_rating-2.2.9.1/lib/axr/model.rb:23: 
    syntax error, unexpected ',', expecting tASSOC (SyntaxError)
/Users/nn/.rvm/gems/ruby-1.9.2-p290/gems/ajaxful_rating-2.2.9.1/lib/axr/model.rb:27: syntax error, unexpected keyword_do_block, expecting keyword_end
          options[:dimensions].each do |dimension| 
```

原始代码在上面的链接中，但相关部分如下：

```
def ajaxful_rateable(options = {})
  has_many :rates_without_dimension, :as => :rateable, options.merge(:class_name => 'Rate'),
    :dependent => :destroy, :conditions => {:dimension => nil}
  has_many :raters_without_dimension, :through => :rates_without_dimension, :source => :rater

  options[:dimensions].each do |dimension|
    has_many "#{dimension}_rates", :dependent => :destroy,
      :conditions => {:dimension => dimension.to_s}, :class_name => 'Rate', :as => :rateable
    has_many "#{dimension}_raters", :through => "#{dimension}_rates", :source => :rater
  end if options[:dimensions].is_a?(Array) 
```

是什么导致了这个问题，我该如何解决？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T06:04:03.367

您必须更改哈希语法，如下所示：

`:conditions => {:dimension => nil}` 到`:conditions => [:dimension => nil]`

你可以试试上面的。

意味着您必须更改 HASH 语法。

# jquery - 在页面宽度增加/缩小时保持 div 居中

> ID：14876811
> 
> 赞同：0
> 
> 时间：2013-02-14T14:16:13.327
> 
> 标签：jquery, html, center

我有一个浮动的左 div，以便它包装内容。我想把这个 div 居中。不幸的是，由于我不知道这个 div 的确切宽度，我不能使用`margin: 0 auto;`. 所以，我决定使用 jQuery 来使 div 居中。我能够通过使用正确地做到这一点`.outerWidth()`。问题是，我希望 div 在页面增长/缩小时保持居中。我认为将 设置`margin-left`为百分比可以完成此操作，但事实并非如此。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:23:56.457

您不需要 div 的确切宽度来使其居中。你可以在这里看到它的工作 jsfiddle.net/GkGBT

CSS

```
body{
    text-align:center;
 }
.centerdiv{
   background:blue;  
   display:inline-block;
   margin-left:auto;margin-right:auto;
   text-align:left;
 } 
```

HTML

```
<div class="centerdiv"></div> 
```

# c# - 使用 InteractionRequests 设计“忙碌”对话框

> ID：14876815
> 
> 赞同：2
> 
> 时间：2013-02-14T14:16:28.940
> 
> 标签：c#, mvvm, prism, prism-4, interaction

我目前正在使用 Prism`InteractionRequest`来显示新窗口。我将它们用于简单的确认以及显示带有自定义视图/视图模型的窗口窗口，按照[此处的示例](http://blogs.southworks.net/dcherubini/2012/05/24/popupwindowaction-using-custom-views-instead-of-windows-in-wpf-and-prism/)。无论如何，在所有这些情况下，我都会显示窗口，并且窗口上的某个按钮负责关闭它。我想显示一个窗口并让调用它的对象负责关闭它。

这是我的实现：

**动作通知**

```
public abstract class ActionNotification: Notification, INotifyPropertyChanged, IPopupWindowActionAware
{
    public event PropertyChangedEventHandler PropertyChanged;

    // IPopupWindowActionAware 
    public System.Windows.Window HostWindow { get; set; } // Set when the "action" in the view is triggered
    public Notification HostNotification { get; set; } // Set when the "action" in the view is triggered

    public ActionNotification(string content)
    {
        this.Content = content;
    }

    public void CompleteAction()
    {
        if (this.HostWindow != null)
        {
            this.HostWindow.Close();
        }
    }

    // INotifyPropertyChange implementation
    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

**调用方法**

```
/// <summary>
/// Pushes a unit of work onto a separate thread and notifies the view to display an action notification
/// </summary>
/// <param name="actionNotification">The notification object for the view to display</param>
/// <param name="act">The unit of work to perform on a separate thread</param>
private void DoWorkAndRaiseAction(ActionNotification actionNotification, Action act)
{
    Task.Factory.StartNew(() =>
    {
        try
        {
            act();
        }
        finally
        {
            Application.Current.Dispatcher.Invoke((Action)(() => actionNotification.CompleteAction()));
        }
    });

    ActionInteractionReq.Raise(actionNotification);
} 
```

这一切都很好，但如果“工作”在我能够提高`InteractionRequest`. 任何人都可以向 GUARANTEE 提供一些建议，要么在提出请求之前工作尚未完成，否则不要突袭请求？

**编辑：**我应该补充一点，窗口显示为模式，因此在提出请求后不执行任何代码，这就是为什么我将工作推到一个单独的任务上

**EDIT2：**这是视图与请求交互的方式：

```
<i:Interaction.Triggers>
    <prism:InteractionRequestTrigger SourceObject="{Binding Path=ActionInteractionReq, Mode=OneWay}">
        <int_req:PopupWindowAction IsModal="True" CenterOverAssociatedObject="True" WindowStyle="None" WindowHeight="150" WindowWidth="520">
            <int_req:PopupWindowAction.WindowContent>
                <int_req:ZActionNotificationView/>
            </int_req:PopupWindowAction.WindowContent>
        </int_req:PopupWindowAction>
    </prism:InteractionRequestTrigger>
</i:Interaction.Triggers> 
```

调用时`Raise`，会触发 PopupWindowAction 并创建一个新窗口。然后它`ShowDialog`在那个窗口上。

**EDIT3：**根据评论的建议，我已经将`PopupWindowAction`. 为了简洁起见，我删除了一些不相关的代码

```
public class PopupWindowAction : TriggerAction<FrameworkElement>
{
    /*      
       Here is where a few dependency properties live that dictate things like Window size and other stuff, e.g.

        /// <summary>
        /// Determines if the content should be shown in a modal window or not.
        /// </summary>
        public static readonly DependencyProperty IsModalProperty =
            DependencyProperty.Register(
                "IsModal",
                typeof(bool),
                typeof(PopupWindowAction),
                new PropertyMetadata(null));        
    */

    /* 
        Here is where the accessors live for the DPs, e.g.

        /// <summary>
        /// Gets or sets if the window will be modal or not.
        /// </summary>
        public bool IsModal
        {
            get { return (bool)GetValue(IsModalProperty); }
            set { SetValue(IsModalProperty, value); }
        }
    */

    #region PopupWindowAction logic

    /// <summary>
    /// Displays the child window and collects results for <see cref="IInteractionRequest"/>.
    /// </summary>
    /// <param name="parameter">The parameter to the action. If the action does not require a parameter, the parameter may be set to a null reference.</param>
    protected override void Invoke(object parameter)
    {
        var args = parameter as InteractionRequestedEventArgs;
        if (args == null)
        {
            return;
        }

        // If the WindowContent shouldn't be part of another visual tree.
        if (this.WindowContent != null && this.WindowContent.Parent != null)
        {
            return;
        }

        var wrapperWindow = this.GetWindow(args.Context); // args.Context here is the Notification object I'm passing to the InteractionRequest

        var callback = args.Callback;
        EventHandler handler = null;
        handler =
            (o, e) =>
            {
                wrapperWindow.Closed -= handler;
                wrapperWindow.Owner = null;
                wrapperWindow.Content = null;
                callback();
            };
        wrapperWindow.Closed += handler;

        if (this.IsModal)
        {
            wrapperWindow.ShowDialog();
        }
        else
        {
            wrapperWindow.Show();
        }
    }

    /// <summary>
    /// Checks if the WindowContent or its DataContext implements IPopupWindowActionAware and IRegionManagerAware.
    /// If so, it sets the corresponding values.
    /// Also, if WindowContent does not have a RegionManager attached, it creates a new scoped RegionManager for it.
    /// </summary>
    /// <param name="notification">The notification to be set as a DataContext in the HostWindow.</param>
    /// <param name="wrapperWindow">The HostWindow</param>
    protected void PrepareContentForWindow(Notification notification, Window wrapperWindow)
    {
        if (this.WindowContent == null)
        {
            return;
        }

        // We set the WindowContent as the content of the window. 
        wrapperWindow.Content = this.WindowContent;

        /* Code removed for brevity */

        // If the WindowContent implements IPopupWindowActionAware, we set the corresponding values.
        IPopupWindowActionAware popupAwareContent = this.WindowContent as IPopupWindowActionAware;
        if (popupAwareContent != null)
        {
            popupAwareContent.HostWindow = wrapperWindow;
            popupAwareContent.HostNotification = notification;
        }

        // If the WindowContent's DataContext implements IPopupWindowActionAware, we set the corresponding values.
        IPopupWindowActionAware popupAwareDataContext = this.WindowContent.DataContext as IPopupWindowActionAware;
        if (popupAwareDataContext != null)
        {
            popupAwareDataContext.HostWindow = wrapperWindow;
            popupAwareDataContext.HostNotification = notification;
        }
    }

    #endregion

    #region Window creation methods

    /// <summary>
    /// Returns the window to display as part of the trigger action.
    /// </summary>
    /// <param name="notification">The notification to be set as a DataContext in the window.</param>
    /// <returns></returns>
    protected Window GetWindow(Notification notification)
    {
        Window wrapperWindow;

        if (this.WindowContent != null)
        {
            wrapperWindow = new Window();
            wrapperWindow.WindowStyle = this.WindowStyle;
            // If the WindowContent does not have its own DataContext, it will inherit this one.
            wrapperWindow.DataContext = notification;
            wrapperWindow.Title = notification.Title ?? string.Empty;               

            this.PrepareContentForWindow(notification, wrapperWindow);
        }
        else
        {
            wrapperWindow = this.CreateDefaultWindow(notification);
            wrapperWindow.DataContext = notification;
        }

        return wrapperWindow;
    }

    private Window CreateDefaultWindow(Notification notification)
    {
        return new DefaultNotificationWindow 
        { 
            NotificationTemplate = this.ContentTemplate, 
            MessageBoxImage = GetImageFromNotification(notification as ZBaseNotification) 
        };
    }        

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:10:55.893

这里的根本问题是启动异步操作的代码和显示窗口的代码只是不合作。基于`IPopupWindowActionAware`恕我直言的设计不是很好；在常见情况下推送属性值是可以的，但在这里它开始显示其局限性。

让我们首先考虑一个适用于当前代码的本地化解决方案：

```
public Window HostWindow { /* call OnPropertyChanged! */ }

public void CompleteAction()
{
    if (this.HostWindow != null)
    {
        this.HostWindow.Close();
    }
    else
    {
        this.PropertyChanged += (o, e) => {
            if (e.PropertyName == "HostWindow" && this.HostWindow != null)
            {
                var hostWindow = this.HostWindow; // prevent closure-related bugs

                // kill it whenever it appears in the future
                hostWindow.Loaded += (o, e) => { hostWindow.Close(); };

                // kill it right now as well if it's been shown already
                // (we cannot assume anything)
                if (hostWindow.IsLoaded)
                {
                    hostWindow.Close();
                }
            }
        };
    }
} 
```

这不是很优雅，但它完成了工作：如果`CompleteAction`在窗口已知之前调用，那么当窗口已知时，我们附加一个处理程序，该处理程序在它显示时立即关闭它。双深事件处理程序分配是必要的，因为在我们知道窗口时可能不会显示窗口。

# javascript - 如何从参数动态构建 JavaScript 指令？

> ID：14876823
> 
> 赞同：0
> 
> 时间：2013-02-14T14:16:50.860
> 
> 标签：javascript

我想动态构建javascript指令

原来的指令是：

```
 var chou = eval('(' + returnResult + ')').attribute; 
```

我想将属性作为变量传递是否可能？

我努力了 ：

```
 var chou = eval('(' + returnResult + ')').eval(baseentity); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:21:21.650

我会很乐观，并假设这`returnResult`是 JSON。

然后你可以做

```
var chou = JSON.parse(returnResult)[baseentity]; 
```

如果它不完全是 JSON，但您足够信任源以使用 eval，那么您可以这样做

```
var chou = eval('(' + returnResult + ')')[baseentity]; 
```

# html - HTML表格中长行的垂直滚动

> ID：14876825
> 
> 赞同：0
> 
> 时间：2013-02-14T14:16:51.867
> 
> 标签：html, css, html-table

我想在网页中显示带有行号的源代码。（不幸的是，我不能使用现有的高亮组件，如[google-code-prettify](http://code.google.com/p/google-code-prettify/)，因为我必须使用自己的语法解析器。）

为了防止行号与源代码一起复制和粘贴，我使用了一个包含一行和两个单元格的表格：在第一个单元格中有行号，在第二个单元格中是源代码：

```
<html><body>
<table>
  <tr>
    <td>1<br/>2<br/>3</td>
    <td>
      <pre>int main() {
    println("I am a very looooooooooooooooog source code line.")
  }</pre>
    </td>
  </tr>
</table>
</body></html> 
```

这行得通，但我有长源代码行的问题：表格变得很宽。如果我打破长线，左侧的行号不再正确。

最好的解决方案是用户可以滚动宽行的表格，就像[GitHub 第 88 行的这个示例](https://github.com/jquery/jquery/blob/master/Gruntfile.js)一样。我尝试了各种 CSS 参数，例如`overlay`, `width`，`white-space`但我没有从 GitHub 获得结果。

**如何在没有滚动条的表格中滚动垂直长线？**

（或者有没有更好的解决方案来显示没有表格的行号的代码？我见过使用有序列表或文本区域的解决方案，但它们也有问题。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:25:38.317

您需要为表格提供 CSS`table-layout:fixed;`以使其他属性生效。

但是，我不确定如何在不显示滚动条的情况下使其滚动。但是无论如何，您的行号是否不会在它们自己的表格单元格中（因此即使代码行跨越多行，数字仍然会匹配）？

编辑：[JSFiddle](http://jsfiddle.net/8BRY2/1/)。您可以尝试以某种方式隐藏滚动条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:28:14.920

尝试设置您的代码表单元格：

```
<td>
  <div class="scrollable">
    <pre>int main() {
         println("I am a very looooooooooooooooog source code line.")
         }</pre>
  </div>
</td> 
```

并上课：

```
.scrollable {
  overflow: scroll;
} 
```

请参阅[如何创建溢出时滚动的表格单元格](https://stackoverflow.com/questions/5662357/css-a-table-cell-with-intern-scroll)

# java - 为单个字符串参数传递多个值

> ID：14876827
> 
> 赞同：2
> 
> 时间：2013-02-14T14:17:01.490
> 
> 标签：java

我正在研究一个已经在 Selenium 中创建的框架。它是一个关键字驱动的框架。All 关键字将单个数据值作为参数。如何在关键字中为该单个字符串参数传递多个值。关键字只有一个字符串参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:19:01.400

如果您没有除单个字符串之外的任何参数，那么您可以将分隔字符串传递给该方法，例如

```
val1,val2,val3 
```

然后在方法内部使用 String#split 将传递的字符串拆分为数组或列表。

PS：只要确保所选的分隔符不会出现在字符串值中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:42:24.143

如果您想更改方法的签名以接受多个关键字，您可以[使用可变参数](http://docs.oracle.com/javase/7/docs/technotes/guides/language/varargs.html)来保持与现有代码的向后兼容性。

所以改变：

```
public void someMethod(String keyword) {
   //keyword is a String
} 
```

至

```
public void someMethod(String... keywords) {
   //keywords is a String[]
} 
```

当`someMethod`使用单个参数调用时`keywords`是一个长度为 1 的字符串数组。

# ipad - iOS 6 的 UIWebView 问题

> ID：14876833
> 
> 赞同：0
> 
> 时间：2013-02-14T14:17:26.893
> 
> 标签：ipad, ios6, uiwebview

我在应用商店中有一个正在运行的应用程序，其中包含 UIWebView。在 iOS 6.0 之前它工作得非常好。在 OS 6 中，一些超链接不起作用，但当我在 iPad 上的 iOS 中使用 safari 浏览器时，同样的事情工作正常。

我是否需要添加一些额外的委托方法才能使其正常工作？目前我正在使用以下代码：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:kAuthenticationURL]];
[request setValue:[NSMutableURLRequest userAgentRequests] forHTTPHeaderField:@"User-Agent"];
[request setHTTPMethod:@"POST"];
[request setHTTPShouldHandleCookies:YES];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];

NSData *postData = [[NSString stringWithFormat:@"username=%@&code=%@", username, password]
                             dataUsingEncoding:NSASCIIStringEncoding];
[request setHTTPBody:postData]; 
```

我使用过的代表：

1)

```
- (void)webViewDidStartLoad:(UIWebView *)webView 
```

2)

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
```

在此方法中，我使用以下方法加载数据：

```
[self.webView stringByEvaluatingJavaScriptFromString:@"window.location.reload = function(){};"]; 
```

3)

```
- (BOOL)webView:(UIWebView *)webViewshouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType` 
```

我是否需要实现一些额外的东西才能使其在 iOS 6 中工作？

任何帮助都会得到帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T11:57:05.877

也许您遇到与此处所述相同的问题：[stringByEvaluatingJavaScriptFromString is not working in iOS 6](https://stackoverflow.com/questions/12704593/stringbyevaluatingjavascriptfromstring-is-not-working-in-ios-6)或这里[iOS 6 - UIWebView loadHTMLString not working proper](https://stackoverflow.com/questions/12466993/ios-6-uiwebview-loadhtmlstring-not-working-properly)

似乎 iOS 6 加载和呈现页面的方式不同，可能比 5 更严格

您可以尝试抑制 iOS6 的增量渲染，如此[处所述](https://stackoverflow.com/questions/12466993/ios-6-uiwebview-loadhtmlstring-not-working-properly)

> ### 抑制增量渲染
> 
> ```
> A Boolean value indicating whether the web view suppresses content rendering 
> until it is fully loaded into memory.
> @property(nonatomic) BOOL suppressesIncrementalRendering 
> ```

* * *

您也可以尝试使用您的 mac 进行调试，如下[所述](https://stackoverflow.com/a/12705041/672989)：

> 附加提示：要在 iOS6 上调试 javascript 错误，一个新功能使它变得非常简单：
> 
> *   转到iPhone中的“设置”应用程序，输入“Safari”设置并点击底部的“高级”，然后从那里启用“WebKit Inspector”
> *   在屏幕上显示要调试的页面（即启动您的应用程序并转到包含 WebView 以使其可见的屏幕）
> *   通过 USB 数据线将 iPhone 插入 Mac
> *   在 Mac 上打开 Safari.app，进入“开发”菜单*(1)*，选择带有您 iPhone 名称的菜单项，然后在子菜单中选择您的应用程序。
> 
> 然后，您将能够使用 Mac 中强大的 Web Inspector 调试 iPhone 中显示的网页，并可以查看 javascript 控制台、DOM 树等。
> 
> *(1) 如果您的 Mac 上没有 Safari 中的“开发”菜单，您可以在 Safari 应用程序的“高级”首选项选项卡中启用它。*

有关远程调试的更多信息，请参见[此处](http://www.mobilexweb.com/blog/iphone-5-ios-6-html5-developers)（一直向下滚动到“远程调试”）或[此处](https://developer.apple.com/videos/wwdc/2012/?id=600)（WWDC 视频会话：“在 iOS 上调试 UIWebViews 和网站”）

# android - Android 最大共享库大小

> ID：14876835
> 
> 赞同：4
> 
> 时间：2013-02-14T14:17:30.617
> 
> 标签：android, memory-management, shared-libraries

我正在尝试将一些 Linux 代码移植到 Android。我意识到代码将涉及多个 jni 引用的 .so 共享库，大小远远超过 20 mb。

我想知道每个 .so 是否有最大大小？

另外，我的应用程序可以拥有的 .so 文件是否有最大总大小，因为 .so 文件实际上是内存映射的？

我用谷歌搜索了这个，几乎什么也没找到，所以描述这个的资源会很有帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T14:28:03.837

据我所知，.so 文件的大小没有限制。我见过几个使用超过 20MB 的共享库的 Android 应用程序。

但是，在 Android 中，您的进程中加载​​的 .so 文件的数量存在限制。该限制通常设置为 128。请参阅[http://androidxref.com/4.2_r1/xref/bionic/linker/linker.cpp#286](http://androidxref.com/4.2_r1/xref/bionic/linker/linker.cpp#286)。

确切的数字可能因设备制造商而异，因为他们经常更改常数。您可能认为这个数字已经足够大了，但请注意，您的进程中加载​​了许多内置共享库，即使您没有加载自己的任何共享库。

我不能告诉你 20 个共享库会或不会超过限制。它取决于设备。如果您担心，您可以将这 20 个库合并为一个巨大的库文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-03T09:40:30.740

这是对 Android 动态链接器的共享库数量的限制。但我发现最近从 4.3 开始取消了限制。在 4.2.2 中，有一个 SO_MAX，请参见[4.2.2 中的 linker.cpp 注释](http://androidxref.com/4.2.2_r1/xref/bionic/linker/linker.cpp#63)。但在 4.3 中，删除了 SO_MAX，请参阅[4.3 中的 linker.cpp 注释](http://androidxref.com/4.3_r2.1/xref/bionic/linker/linker.cpp#59)。

# spring - jar 内的文件对于 spring 不可见

> ID：14876836
> 
> 赞同：136
> 
> 时间：2013-02-14T14:17:42.780
> 
> 标签：spring, jar, classpath

全部

我创建了一个 jar 文件，其中包含以下 MANIFEST.MF：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.3
Created-By: 1.6.0_25-b06 (Sun Microsystems Inc.)
Main-Class: my.Main
Class-Path: . lib/spring-core-3.2.0.M2.jar lib/spring-beans-3.2.0.M2.jar 
```

在它的根目录中有一个名为 my.config 的文件，它在我的 spring-context.xml 中被引用，如下所示：

```
<bean id="..." class="...">
    <property name="resource" value="classpath:my.config" />
</bean> 
```

如果我运行 jar，一切看起来都很好，除了加载该特定文件：

```
Caused by: java.io.FileNotFoundException: class path resource [my.config] cannot be resolved to absolute file path because it does not reside in the file system: jar:file:/D:/work/my.jar!/my.config
        at org.springframework.util.ResourceUtils.getFile(ResourceUtils.java:205)
    at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:52)
    at eu.stepman.server.configuration.BeanConfigurationFactoryBean.getObject(BeanConfigurationFactoryBean.java:32)
    at eu.stepman.server.configuration.BeanConfigurationFactoryBean.getObject(BeanConfigurationFactoryBean.java:1)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
    ... 22 more 
```

*   类是从 jar 内部加载的
*   spring 和其他依赖项是从单独的 jar 中加载的
*   spring 上下文已加载（新 ClassPathXmlApplicationContext("spring-context/applicationContext.xml")）
*   my.properties 被加载到 PropertyPlaceholderConfigurer ("classpath:my.properties")
*   如果我将 .config 文件放在文件系统之外，并将资源 url 更改为“file:”，一切似乎都很好......

有小费吗？

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2013-02-14T14:24:58.503

如果您的 spring-context.xml 和 my.config 文件位于不同的 jar 中，那么您将需要使用`classpath*:my.config`?

更多信息[在这里](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#resources-classpath-wildcards)

另外，确保从 jar 文件中加载时使用`resource.getInputStream()`not 。`resource.getFile()`

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2017-01-26T16:05:00.883

我知道这个问题已经被回答了。但是，对于那些使用 Spring Boot 的人，这个链接帮助了我 - [https://smarterco.de/java-load-file-classpath-spring-boot/](https://smarterco.de/java-load-file-classpath-spring-boot/)

但是，`resourceLoader.getResource("classpath:file.txt").getFile();`导致此问题和 sbk 的评论：

> 就是这样。java.io.File 代表文件系统上的一个文件，在一个目录结构中。Jar 是一个 java.io.File。但是该文件中的任何内容都超出了 java.io.File 的范围。就java而言，在解压之前，jar文件中的类与word文档中的单词没有什么不同。

帮助我理解为什么要使用它`getInputStream()`。它现在对我有用！

谢谢！

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2018-07-02T08:24:27.977

在 spring jar 包中，我使用 new `ClassPathResource(filename).getFile()`，它会抛出异常：

> 无法解析为绝对文件路径，因为它不驻留在文件系统中：jar

但是使用`new ClassPathResource(filename).getInputStream()`会解决这个问题。原因是jar中的配置文件在操作系统的文件树中不存在，所以必须使用`getInputStream()`.

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-11-06T16:04:22.823

错误消息是正确的（如果不是很有帮助）：我们尝试加载的文件*不是*文件系统上的文件，而是 ZIP 中 ZIP 中的一大块字节。

通过实验（Java 11，Spring Boot 2.3.x），我发现它可以在不更改任何配置甚至通配符的情况下工作：

```
var resource = ResourceUtils.getURL("classpath:some/resource/in/a/dependency");
new BufferedReader(
  new InputStreamReader(resource.openStream())
).lines().forEach(System.out::println); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-11-24T12:49:32.353

我在使用 Tomcat6.x 时遇到了类似的问题，我发现的任何建议都没有帮助。最后我删除`work`了（Tomcat的）文件夹，问题就消失了。

我知道这是不合逻辑的，但出于文档目的......

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-18T16:18:46.607

我在 Spring 应用程序中递归加载资源时遇到问题，发现问题是我应该使用`resource.getInputStream`. 这是一个示例，展示了如何递归地读取文件中的所有`config/myfiles`文件`json`。

## Example.java

```
private String myFilesResourceUrl = "config/myfiles/**/";
private String myFilesResourceExtension = "json";

ResourceLoader rl = new ResourceLoader();

// Recursively get resources that match. 
// Big note: If you decide to iterate over these, 
// use resource.GetResourceAsStream to load the contents
// or use the `readFileResource` of the ResourceLoader class.
Resource[] resources = rl.getResourcesInResourceFolder(myFilesResourceUrl, myFilesResourceExtension);

// Recursively get resource and their contents that match. 
// This loads all the files into memory, so maybe use the same approach 
// as this method, if need be.
Map<Resource,String> contents = rl.getResourceContentsInResourceFolder(myFilesResourceUrl, myFilesResourceExtension); 
```

### 资源加载器.java

```
import java.io.IOException;
import java.io.InputStream;
import java.nio.charset.Charset;
import java.util.HashMap;
import java.util.Map;
import org.springframework.core.io.Resource;
import org.springframework.core.io.support.PathMatchingResourcePatternResolver;
import org.springframework.core.io.support.ResourcePatternResolver;
import org.springframework.util.StreamUtils;

public class ResourceLoader {
  public Resource[] getResourcesInResourceFolder(String folder, String extension) {
    ResourcePatternResolver resolver = new PathMatchingResourcePatternResolver();
    try {
      String resourceUrl = folder + "/*." + extension;
      Resource[] resources = resolver.getResources(resourceUrl);
      return resources;
    } catch (IOException e) {
      throw new RuntimeException(e);
    }
  }

  public String readResource(Resource resource) throws IOException {
    try (InputStream stream = resource.getInputStream()) {
      return StreamUtils.copyToString(stream, Charset.defaultCharset());
    }
  }

  public Map<Resource, String> getResourceContentsInResourceFolder(
      String folder, String extension) {
    Resource[] resources = getResourcesInResourceFolder(folder, extension);

    HashMap<Resource, String> result = new HashMap<>();
    for (var resource : resources) {
      try {
        String contents = readResource(resource);
        result.put(resource, contents);
      } catch (IOException e) {
        throw new RuntimeException("Could not load resource=" + resource + ", e=" + e);
      }
    }
    return result;
  }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-05T08:56:42.790

在我看来，@sbk 的答案是我们应该在 spring-boot 环境中执行此操作的方式（除了@Value("${classpath*:})）。但在我的场景中，如果从独立执行它就不起作用jar ..可能是我做错了什么。

但这可能是另一种方式，

```
InputStream is = this.getClass().getClassLoader().getResourceAsStream(<relative path of the resource from resource directory>); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-29T08:50:48.837

我遇到了一个更复杂的问题，因为我有多个同名文件，一个位于主 Spring Boot jar 中，其他位于主 fat jar 中的 jar 中。我的解决方案是获取所有具有相同名称的资源，然后获取我需要按包名称过滤的资源。获取所有文件：

```
ResourceLoader resourceLoader = new FileSystemResourceLoader();
final Enumeration<URL> systemResources = resourceLoader.getClassLoader().getResources(fileNameWithoutExt + FILE_EXT); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-10-07T20:54:51.763

对于 kotlin 用户，我是这样解决的：

```
val url = ResourceUtils.getURL("classpath:$fileName")
val response = url.openStream().bufferedReader().readText() 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-03T10:40:36.147

我遇到了同样的问题，最终使用了更方便的[Guava Resources](https://guava.dev/releases/21.0/api/docs/com/google/common/io/Resources.html)：

```
Resources.getResource("my.file") 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-10T13:46:05.193

虽然这是一个非常古老的线程，但我在 Spring Boot 应用程序中添加 FCM 时也遇到了同样的问题。

在开发中，文件被打开并且没有错误，但是当我将应用程序部署到 AWS Elastic beanstalk 时，错误`FileNotFoundException`被抛出并且 FCM 无法正常工作。

所以这是我的解决方案，可以让它在开发环境和 jar 部署生产中工作。

我有一个组件类 FCMService，它的方法如下：

```
 @PostConstruct
  public void initialize() {

    log.info("Starting FCM Service");
    InputStream inputStream;

    try {

      ClassPathResource resource = new ClassPathResource("classpath:fcm/my_project_firebase_config.json");
      URL url = null;
      try {
        url = resource.getURL();
      } catch (IOException e) {

      }

      if (url != null) {
        inputStream = url.openStream();
      } else {
        File file = ResourceUtils.getFile("classpath:fcm/my_project_firebase_config.json");
        inputStream = new FileInputStream(file);
      }

      FirebaseOptions options = FirebaseOptions.builder().setCredentials(GoogleCredentials.fromStream(inputStream))
          .build();
      FirebaseApp.initializeApp(options);

      log.info("FCM Service started");

    } catch (IOException e) {
      log.error("Error starting FCM Service");
      e.printStackTrace();
    }

  } 
```

希望这可以帮助寻求快速解决实施 FCM 的人。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-11T18:55:45.347

在 Spring boot 1.5.22.RELEASE Jar 包装中，这对我有用：

```
InputStream resource = new ClassPathResource("example.pdf").getInputStream(); 
```

“example.pdf”在 src/main/resources 中。

然后将其读取为 byte[]

```
FileCopyUtils.copyToByteArray(resource); 
```

# c++ - 类模板、函数成员定义

> ID：14876840
> 
> 赞同：1
> 
> 时间：2013-02-14T14:17:48.580
> 
> 标签：c++, templates

我正在学习如何使用类模板。我已经阅读了一些例子，但我仍然有一些问题。

我的标题中有以下模板类`foo.h`：

```
template<typename T>
class Foo
{
 public:
    bool addKey(const std::string& key);
    bool addValue(const std::string& key, const T& value);

private:
    std::map<std::string, T> mapping;
}; 
```

这是实现文件`foo.cpp`：

```
template <typename T>
bool Foo<T>::addKey(const string& key)
{
    if (key.empty()) 
        return false;

    pair<map<string, T>::iterator, bool> response; // to store the pair returned by insert()
    response = mapping.insert(pair<string, T>(key, T()));

    return response.second;
} 
```

以下是编译错误（Kdevelop内的g++）

```
error: type/value mismatch at argument 1 in template parameter list for ‘template<class _T1, class _T2> struct std::pair’
error:   expected a type, got ‘std::map<std::basic_string<char>, T>::iterator’
error: invalid type in declaration before ‘;’ token
error: request for member ‘second’ in ‘response’, which is of non-class type ‘int’ 
```

所以看起来`std::pair`无法处理`T`类型？

如果我不保存`std::pair`返回的 by `insert()`，编译工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:19:39.080

在这种情况下`iterator`是一个从属名称，您应该使用`typename`关键字对其进行限定：

```
 pair<typename map<string, T>::iterator, bool> 
```

有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:22:16.663

尝试编写 pair< **typename** map::iterator。迭代器是一种依赖于模板参数的类型，编译器需要一点帮助来识别它。

# c# - 在页面之前加载用户控件

> ID：14876841
> 
> 赞同：0
> 
> 时间：2013-02-14T14:18:01.437
> 
> 标签：c#, asp.net

我的站点有 3 个部分，站点主控、用户控制（在站点主控内）和常规页面。

当用户登录时，他们将被重定向到常规页面。用户控件是不同帐户（自动选择第一个帐户）的下拉列表，这些帐户获取他们的用户名并运行存储过程以将他们的信息拉入`SiteID`会话变量中。

然后在“常规”页面中，我将所有标签设置为用户信息。使用此代码。

```
 if (Session["SiteID"] != null)
        {
            SiteID = int.Parse(Session["SiteID"].ToString());
            PopulateAccountData();
            PopulateAccountInformation2();
            PopulateSiteNodes();
            PopulateSiteMap();
        }

        else
        {
            LabelSiteName.Text = "No Site Selected";

        } 
```

问题是当页面第一次加载时它没有`Session["SiteID"]`，我必须点击刷新才能加载所有内容。

我是 ASP.net 的新手，所以我不确定我是否做对了，但我如何让所有内容第一次加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:25:11.757

用途：IsPostBack

看：//www.java-samples.com/showtutorial.php?tutorialid=1083

# javascript - 将 Canvas 图像作为文件流 HTML5 发送

> ID：14876842
> 
> 赞同：1
> 
> 时间：2013-02-14T14:18:11.460
> 
> 标签：javascript, canvas, video-streaming, base64, html5-canvas

我正在开发一个系统，在浏览器中访问移动设备摄像头，并将摄像头流帧同步发送到另一端。发送的帧在另一侧进一步处理。我已经将帧绘制到画布上，时间间隔如下代码所示。我如何将访问的帧发送到另一端，以便进一步处理帧以同步发生？在画布上绘制的每一帧都将被发送到另一侧，以便在每个图像帧上进行进一步的处理。另一端代码是本地语言。

```
$<!DOCTYPE html>
<html>
<h1>Simple web camera display demo</h1>
<body>
<video autoplay  width="480" height="480" src=""></video>

<canvas width="600" height="480" style="" ></canvas>
<img src="" width="100" height="100" ></img>

<script type="text/javascript">
var video = document.getElementsByTagName('video')[0], 
heading = document.getElementsByTagName('h1')[0];

if(navigator.getUserMedia) {
navigator.getUserMedia('video', successCallback, errorCallback);
function successCallback( stream ) {
video.src = stream;
}
function errorCallback( error ) {
heading.textContent = 
"An error occurred: [CODE " + error.code + "]";
}
} else {
heading.textContent = 
"Native web camera streaming is not supported in this browser!";
}
draw_interval = setInterval(function() 
{
var canvas = document.querySelector('canvas');
var ctx = canvas.getContext('2d');
var frames = document.getElementById('frames');
ctx.drawImage(document.querySelector("video"), 0, 0);
}, 33)
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:01:09.613

我不太清楚你说的“另一面”和“母语”是什么意思。

但是，您可以使用 AJAX 将画布图像发送到服务器。

服务器接收画布图像作为 base64 编码的图像数据。

例如，假设：

1.  您将图像发送到 php 服务器 (yourOtherSide.php) – 当然这可以是任何接受 ajax 帖子的服务器。

2.  您有一个对包含框架的 canvas 元素的引用：canvas

3.  您的 ajax 有效负载包含正在发送的帧的 ID 号 (ID) 和图像数据 (imgData)。

4.  （可选）你从服务器得到一些响应——即使它只是“OK”：anyReturnedStuff

那么你的ajax帖子将是：

```
$.post(“yourOtherSide.php”,  { ID:yourFrame ID, imgData: canvas.toDataURL(‘image/jpeg’) })
.done( function(anyReturnedStuff){  console.log(anyReturnedStuff);  } ); 
```

**[编辑以包括从 ajax 帖子创建图像的服务器端]**

这些代码示例将接收 ajax base64 imageData 并创建一个图像供您使用 c-image-processing-library 进行处理。

如果您使用的是 PHP 服务器：

```
$img = imagecreatefromstring(base64_decode($imageData));
// and process $img with your image library here 
```

或者如果您使用的是 asp.net：

```
byte[] byteArray = System.Convert.FromBase64String(imageData);
Image image;
using(MemoryStream s=new MemoryStream(byteArray){
    image=Image.FromStream(ms);
    // and process image with your image library here
} 
```

# performance - Java 是否将 new HashSet(someHashSet).contains() 优化为 O(1)？

> ID：14876844
> 
> 赞同：1
> 
> 时间：2013-02-14T14:18:16.520
> 
> 标签：performance, complexity-theory, java

此类是出现问题的示例：

```
public class ContainsSet {
    private static HashSet<E> myHashSet;

    [...]

    public static Set<E> getMyHashSet() {
        return new HashSet<E>(myHashSet);
    }

    public static boolean doesMyHashSetContain(E e) {
        return myHashSet.contains(e);
    }
} 
```

现在想象两个可能的功能：

```
boolean method1() {
    return ContainsSet.getMyHashSet().contains(someE);
}
boolean method2() {
    return ContainsSet.doesMyHashSetContain(someE);
} 
```

现在是我的问题，方法 1 在 Java 优化后是否具有与方法 2 相同的时间复杂度。（我使用`HashSet`而不是仅仅`Set`强调`myHashSet.contains(someE)`具有复杂性`O(1)`。）

没有优化就不会。虽然`.contains()`有复杂性`O(1)`，但`new HashSet<E>(myHashSet)`有复杂性`O(n)`，这会给方法1带来复杂性`O(n) + O(1) = O(n)`，这与心爱的人相比是可怕的`O(1)`。

导入此问题的原因是，如果您不允许外部类更改其内容，我被教导不要返回列表或集合。退回副本是一个显而易见的解决方案，但它可能非常耗时。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T14:24:37.113

不，`javac`不会（也不能）优化它。需要将您在源代码中描述的字节码发送到此级别。而且 JVM 还不够智能，无法将其优化掉。它太可能有副作用来证明。

`HashSet`如果您想要不变性，请不要返回副本。将其包装在不可修改的包装器中：`Collections.unmodifiableSet(myHashSet)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:24:24.833

我能在这里说什么，但是创建一个新的 HashSet 并通过构造函数填充它是昂贵的！

Java 不会“优化”这项工作：即使您和我都知道它会给出与“通过” contains() 调用相同的结果，但 java 无法知道这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T14:37:11.367

不，这超出了优化范围。您返回了一个新对象，您可以在其他地方使用它，Java 不应该忽略它。将创建一个新的 HashSet。

退回副本不是一个好习惯。这不仅费时，而且费空间。正如肖恩所说，您可以使用 unmodifiableSet 进行包装，也可以将其包装在您自己的类中。

你可以试试这个：

```
public static Set<E> getMyHashSet() {
    return Collection.unmodifiableSortedSet(myHashSet);
} 
```

注意：使用该方法将返回您的集合的视图，而不是副本。

# c++ - 使用 Node.js 作为解释器

> ID：14876845
> 
> 赞同：1
> 
> 时间：2013-02-14T14:18:19.187
> 
> 标签：c++, node.js

我想在我的应用程序中嵌入 NodeJS。我想使用 NodeJS 而不仅仅是直接使用 V8 的原因是因为 NodeJS 存在扩展。为此，我知道我需要用 GYP 编译 NodeJS。知道了。但是我该如何使用它呢？是否有要链接的静态库？如何启动它？说我想为它提供一个 V8 上下文，我该如何传递它？

这里有点不知所措。希望得到帮助。

注意 - 我想从我的 C++ 代码中激活 nodejs，而不是相反。我理解扩展，这不是我想要的。

问候，盖尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:35:37.710

正如我从这个[问题](https://stackoverflow.com/questions/15977901/how-to-build-nodejs-as-a-shared-library-from-source-code)中得到的那样，与 node.js 立即链接的问题仍未解决。实际上，解决方法可能是在一个单独的进程中运行它，就像一个普通的命令行应用程序一样。您可以将脚本保存到文件中，将其作为 cmdline 参数传递，然后从 node.js 可执行文件中获取 std 输出。

# iphone - 在 iPhone (m4a) 上连接声音文件失败

> ID：14876846
> 
> 赞同：3
> 
> 时间：2013-02-14T14:18:24.813
> 
> 标签：iphone, avassetexportsession

我正在尝试通过连接几个较小的声音文件来制作一个长声音文件 - 都是 m4a 格式，结果也应该是 m4a 格式。

这是代码（audFiles 数组包含要加入的声音文件的名称）。注意我只打印文件大小是为了让您安心...

```
CMTime nextClipStartTime = kCMTimeZero;
AVMutableComposition *combinedSounds = [AVMutableComposition composition];
NSString *tempDir = NSTemporaryDirectory();
NSArray *audFiles;

for (int i = 0; i < [audFiles count]; i++)
{
    NSString *addSound = [tempDir stringByAppendingString:audFiles[i]];
    if ([[NSFileManager defaultManager] fileExistsAtPath:addSound] == YES)
    {
        NSDictionary *fileAttributes = [[NSFileManager defaultManager] attributesOfItemAtPath:addSound error:nil];
        if (fileAttributes != nil)
        {
            NSString *fileSize = [fileAttributes objectForKey:NSFileSize];
            NSLog(@"file %@ %@", addSound, fileSize);
            NSURL *assetURL = [[NSURL alloc] initFileURLWithPath:addSound];

            AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:assetURL options:nil];
            if (asset != nil)
            {
                CMTimeRange timeRange = CMTimeRangeMake(kCMTimeZero, asset.duration);
                NSLog(@"asset %d length %lld", i, asset.duration.value);
                if (asset.duration.value > 0)
                {
                    AVAssetTrack *audTrack = [asset tracksWithMediaType:AVMediaTypeAudio][0];
                    AVMutableCompositionTrack *audioTrack = [combinedSounds addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
                    if ([audioTrack insertTimeRange:timeRange ofTrack:audTrack atTime:nextClipStartTime error:nil] == NO)
                    {
                        NSLog(@"insertTimeRange %d FAILED", i);
                    }
                    nextClipStartTime = CMTimeAdd(nextClipStartTime, asset.duration);
                    nextClipStartTime = CMTimeAdd(nextClipStartTime, CMTimeMake(0.1, 1));
                    NSLog(@"nextClipStartTime %lld", nextClipStartTime.value);
                }
            }
        }
    }
}

NSString *finalSound = [tempDir stringByAppendingString:@"result.m4a"];
AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:combinedSounds presetName:AVAssetExportPresetPassthrough];

 NSString *exported = [tempDir stringByAppendingString:finalSound];
[[NSFileManager defaultManager] removeItemAtPath:exported error:nil];
NSURL *exportedURL = [[NSURL alloc] initFileURLWithPath:exported];
exportSession.outputURL = exportedURL;
exportSession.shouldOptimizeForNetworkUse = YES;
exportSession.outputFileType = AVFileTypeAppleM4A;

[exportSession exportAsynchronouslyWithCompletionHandler:^{
    switch (exportSession.status)
    {
        case AVAssetExportSessionStatusFailed:
        {
            NSLog(@"exportSession FAIL");
            break;
        }
        case AVAssetExportSessionStatusCompleted:
        {
            NSLog(@"exportSession SUCCESS");
        }
    }
}]; 
```

报告“exportSession SUCCESS”，导出的文件存在，可以播放，但只包含第一个组成文件。

任何想法我做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T13:18:52.433

`Step 1 :`在您的项目中添加`AVFoundation.Framework`和`CoreMedia.Framework`

`Step 2 :` `#import <AVFoundation/AVFoundation.h>`在你的`.h`文件中

`Step 3 :` `Write following method in your .m file`

`Step 4 :` `Call this function from ViewDidAppear to create Merged Audio file.`

```
// Get Asset Detail
- (AVAsset *)getAvAssetForFile:(NSString *)fileName andType:(NSString *)fileType
{
    NSString *URLPath = [[NSBundle mainBundle] pathForResource:fileName ofType:fileType];
    NSURL *assetURL = [NSURL fileURLWithPath:URLPath];
    AVAsset *asset = [AVAsset assetWithURL:assetURL];
    return asset;
}

- (void)mergeAudioFiles
{
    // `An Array with List of Audio Clips to be Merged, they could be of different type also`
    NSMutableArray *listOfAudio = [[NSMutableArray alloc] initWithCapacity:0];

    // `Create AVAsset Object from your audio files and add to array`

    [listOfAudio addObject:[self getAvAssetForFile:@"audioFile1" andType:@"caf"]];
    [listOfAudio addObject:[self getAvAssetForFile:@"audioFile2" andType:@"caf"]];
    [listOfAudio addObject:[self getAvAssetForFile:@"audioFile3" andType:@"aiff"]];

    AVMutableComposition *composition = [AVMutableComposition composition];
    CMTime current = kCMTimeZero;
    NSError *compositionError = nil;
    for(AVAsset *asset in listOfAudio) {
        BOOL result = [composition insertTimeRange:CMTimeRangeMake(kCMTimeZero, [asset duration])
                                           ofAsset:asset
                                            atTime:current
                                             error:&compositionError];
        if(!result) {
            if(compositionError) {
                // manage the composition error case                
                NSLog(@"Error in Merging : %@",[compositionError debugDescription]);
            }
        } else {
            current = CMTimeAdd(current, [asset duration]);
        }
    }

    AVAssetExportSession *exporter = [[AVAssetExportSession alloc]
                                      initWithAsset: composition
                                      presetName: AVAssetExportPresetAppleM4A];

    exporter.outputFileType = @"com.apple.m4a-audio";

    // Set Output FileName
    NSString *fileName = @"myAudioTrack";
    NSString *exportFile = [DOC_DIR_PATH stringByAppendingFormat: @"/%@.m4a", fileName];

    // set up export
    NSURL *exportURL = [NSURL fileURLWithPath:exportFile];
    exporter.outputURL = exportURL;

    // do the export
    [exporter exportAsynchronouslyWithCompletionHandler:^{
        int exportStatus = exporter.status;
        switch (exportStatus) {
            case AVAssetExportSessionStatusFailed: NSLog (@"AVAssetExportSessionStatusFailed: %@", exporter.debugDescription); break;
            case AVAssetExportSessionStatusCompleted: NSLog (@"AVAssetExportSessionStatusCompleted"); break;
            case AVAssetExportSessionStatusUnknown: NSLog (@"AVAssetExportSessionStatusUnknown"); break;
            case AVAssetExportSessionStatusExporting: NSLog (@"AVAssetExportSessionStatusExporting"); break;
            case AVAssetExportSessionStatusCancelled: NSLog (@"AVAssetExportSessionStatusCancelled"); break;
            case AVAssetExportSessionStatusWaiting: NSLog (@"AVAssetExportSessionStatusWaiting"); break;
            default:  NSLog (@"didn't get export status"); break;
        }
    }];    
} 
```

# sql - SQL Server - SQL Server 中的过程执行数据类型

> ID：14876847
> 
> 赞同：0
> 
> 时间：2013-02-14T14:18:25.780
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我想在 SQL Server 中执行数据类型。你知道我要做什么吗？

```
USE [MO]
GO

DECLARE @return_value int

EXEC    @return_value = [dbo].[SBC]
        @UserId = 1,

SELECT  'Return Value' = @return_value
GO 
```

返回值：

```
Name  ID
----------
Adam  1
Jhon  2 
```

例如`ID`是`int`或`bigint`？我只能执行现有的程序，这是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T15:06:17.383

该“返回值”是一个执行状态指示器，并且是一个整数。它并不意味着传回数据。标准值为 0 表示成功，1 表示失败，但您可以在 SP 中传回任何整数以反映许多不同的状态。

从 SQL Server 帮助文件：

> @return_status 是一个可选的整数变量，用于存储模块的返回状态。此变量必须在批处理、存储过程或函数中声明，然后才能在 EXECUTE 语句中使用。
> 
> 当用于调用标量值用户定义函数时，@return_status 变量可以是任何标量数据类型。

如果您想传回不同的数据类型（并且能够查询这些数据的“类型”），请使用“输出参数”。输出参数可以是任何数据类型，一旦 SP 存在，您可以查询 sys.parameters 系统表，传入您的 SP 的 object_id（或仅加入 sys.procedures 上的 object_id 和过滤过程名称），加入 sys .parameters 到 sys.types（在 user_type_id 上）获取每个参数的 sql 数据类型名称，包括输出参数

例如

```
DECLARE @Param3 bigint
exec dbo.MySPName @Param1, @Param2, @Param3 output
SELECT @Param3 --gives you output value

--This will give you the names and data types of all output parameters in this SP
SELECT p.name, t.name as [type], p.max_length, is_output 
FROM sys.parameters p 
JOIN sys.types t ON p.user_type_id = t.user_type_id 
WHERE p.object_id = OBJECT_ID(N'MySPName') 
AND p.is_output = 1 
```

对于标量值函数，对参数和类型表的相同查询将返回一个无名参数（p.name 是一个空字符串/空白） - 这表示 UDF 的返回值，包括数据类型。但是存储过程只能有“返回状态”整数。

# twitter-bootstrap - ckEditor 删除 Bootstrap图标

> ID：14876848
> 
> 赞同：1
> 
> 时间：2013-02-14T14:18:28.027
> 
> 标签：twitter-bootstrap, ckeditor

我们有一个基于 Bootstrap 的网站。

某些 HTML 模块由 CkEditor 维护。

我们根据标准语法使用 Bootstrap 图标，例如：`<i class="icon-envelope"></i>`.

我们的问题：CkEditor 将该语法解释为一个空标记集（即，`<i></i>`）并将其删除。

因此，我们目前无法在使用 CkEditor 维护的任何 HTML 模块中使用 Bootstrap 图标。

有什么解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-23T13:44:26.740

将此粘贴到 CKEditor 配置文件中：

```
// allow i tags to be empty (for font awesome)
CKEDITOR.dtd.$removeEmpty['i'] = false 
```

# sql-server-2008 - 为什么将 PK 列为在其索引中包含包含列？

> ID：14876850
> 
> 赞同：1
> 
> 时间：2013-02-14T14:18:35.790
> 
> 标签：sql-server-2008, primary-key, indexing

我一直在研究使用 Adventureworks2008R2 的索引，并被告知运行此查询。

```
SELECT s.name AS SchemaName,
       OBJECT_NAME(i.object_id) AS TableOrViewName,
       i.name AS IndexName,
       c.name AS ColumnName
FROM sys.indexes AS i
INNER JOIN sys.index_columns AS ic
  ON i.object_id = ic.object_id 
INNER JOIN sys.columns AS c
  ON ic.object_id = c.object_id
AND ic.column_id = c.column_id 
INNER JOIN sys.objects AS o
  ON i.object_id = o.object_id
INNER JOIN sys.schemas AS s
  ON o.schema_id = s.schema_id 
WHERE ic.is_included_column <> 0
  AND s.name <> 'sys'
ORDER BY SchemaName, TableOrViewName, i.index_id, ColumnName; 
```

输出如下所示：

```
 SchemaName     TableorViewName   IndexName                          ColumnName
1   Production     Productreview     PK_ProductReview_ProductReviewID   Comments
2   Production     Productreview     IX_ ProductReview_ProductId_Name   Comments 
```

我理解为什么它列出了 IX_ProductReview_ProductId_Name，但无法弄清楚为什么它显示 PK_ProductReview_ProductReviewID。

注释通过解释的方式说“*根据定义，聚集索引中的所有列都已包含在内。* ”在这种情况下，为什么只显示 Comments 列，为什么没有列出所有 PK？

我怀疑我真的很愚蠢，但是。. . TIA

**--Edit** 似乎表上具有包含列的非聚集索引的所有 PK 都显示为具有相同的包含列。那是回答的“如何”，但我仍然希望回答“为什么”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:39:25.043

这些连接条件中的至少一个似乎不足。两者[`sys.indexes`](http://msdn.microsoft.com/en-gb/library/ms173760.aspx)和[`sys.index_columns`](http://msdn.microsoft.com/en-gb/library/ms175105.aspx)都可以为同一个定义多个索引`object_id`。

尝试：

```
FROM sys.indexes AS i
INNER JOIN sys.index_columns AS ic
  ON i.object_id = ic.object_id AND
    i.index_id = ic.index_id 
```

换句话说，我认为其中一行是由这个不正确的连接产生的幻象。您看到它是因为它恰好是同一张表上的另一个索引。

* * *

而且，顺便说一句，过滤掉系统对象的更好方法（通常）是包含[`OBJECTPROPERTY(object_id,N'IsMSShipped') = 0`](http://msdn.microsoft.com/en-us/library/ms176105.aspx)在您的`WHERE`子句中，而不是查询对象所属的模式。

# c# - 从 Outlook 获取文件夹时按大小排序

> ID：14876852
> 
> 赞同：0
> 
> 时间：2013-02-14T14:18:42.140
> 
> 标签：c#, visual-studio-2010, outlook

我使用以下代码从 Outlook 检索所有文件夹：

```
 public void getFolderPath()
    {
        try
        {
            OutLook.Application oApp = new OutLook.Application();
            OutLook.NameSpace oNS = (OutLook.NameSpace)oApp.GetNamespace("MAPI");
            oNS.Logon(Missing.Value, Missing.Value, false, true);

            foreach (MAPIFolder folder in oNS.Folders)
            {
                GetFolders(folder);
            }

            Marshal.ReleaseComObject(oApp);

        }
        catch (System.Exception ex)
        {
            MessageBox.Show(ex.ToString());
        }
    } 
```

这显示了 OutLook 中列出的从上到下的所有文件夹，有没有一种方法可以显示它们或通过它们按大小升序排列。

类似于：

```
foreach (MAPIFolder folder in oNS.Folders.sortbysize())
        {
            GetFolders(folder);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:39:49.970

不，Outlook 中的文件夹集合不可排序。
即使您要使用 Extended MAPi（仅限 C++ 或 Delphi）或[Redemption](http://www.dimastr.com/redemption)（任何语言），在 PR_MESSAGE_SIZE 属性上排序文件夹也不起作用：PST 提供程序不会公开它，并且 Exchange 倾向于为所有文件夹返回 0。
您可以按 PR_CONTENT_COUNT 属性（文件夹中的邮件数）排序，但不能按大小排序。以下脚本 (Outlook VBA) 使用[Redemption](http://www.dimastr.com/redemption)按 PR_CONTENT_COUNT 对文件夹进行排序：

```
set Session = CreateObject("Redemption.RDOSession")
Session.MAPIOBJECT = Application.Session.MAPIOBJECT 
set Folders = Session.Stores.DefaultStore.IPMRootFolder.Folders
Folders.MAPITable.Sort "http://schemas.microsoft.com/mapi/proptag/0x36020003", true
for each Folder in Folders
  Debug.print Folder.Name & " (" & Folder.Fields("http://schemas.microsoft.com/mapi/proptag/0x36020003") & ")"
next 
```

一个更快的版本（它不打开子文件夹并使用 ExecSQL 方法）将是

```
set Session = CreateObject("Redemption.RDOSession")
Session.MAPIOBJECT = Application.Session.MAPIOBJECT 
set Folders = Session.Stores.DefaultStore.IPMRootFolder.Folders
set MAPITable = Folders.MAPITable
MAPITable.Sort "http://schemas.microsoft.com/mapi/proptag/0x36020003", true
set Recordset = MAPITable.ExecSQL("SELECT ""http://schemas.microsoft.com/mapi/proptag/0x3001001E"" AS PR_DISPLAY_NAME, " & _
                                  " ""http://schemas.microsoft.com/mapi/proptag/0x36020003"" AS PR_CONTENT_COUNT " & _
                                  " from Table")
while not Recordset.EOF
    Debug.Print Recordset.Fields("PR_DISPLAY_NAME").Value & " (" & Recordset.Fields("PR_CONTENT_COUNT").Value & ")"
    Recordset.MoveNext
wend 
```

# scala - 简单的 scala 宏

> ID：14876856
> 
> 赞同：3
> 
> 时间：2013-02-14T14:19:03.857
> 
> 标签：scala, scala-macros, scala-2.10

我想要一个执行以下操作的 scala 宏：当我编写时：

```
myCreateCityMacro("paris")
myCreateCityMacro("vallorbe") 
```

我想得到：

```
val paris = new City("paris")
val vallorbe = new City("vallorbe") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-25T09:56:04.753

这可以使用 scala 动态特性来解决：

```
import scala.language.dynamics

object Cities extends App {
    var c = new DynamicMap[String, City]()
    createCity("Paris")
    createCity("Vallorbe")
    println(c.Paris, c.Vallorbe)

    def createCity(name: String) {
        c.self.update(name, new City(name))
    }
}

class City(name: String) {
    override def toString = s"-[$name]-"
}

class DynamicMap[K, V] extends Dynamic {
    val self = scala.collection.mutable.Map[K, V]()
    def selectDynamic(key: K) = self(key)
} 
```

执行时：

```
(-[Paris]-,-[Vallorbe]-) 
```

# matlab - 数组Matlab的长度

> ID：14876857
> 
> 赞同：0
> 
> 时间：2013-02-14T14:19:09.000
> 
> 标签：matlab

我正在将 .csv 文件导入 matlab。该文件有 5 列，我想获得第 3 列的长度，即中间一列。

我试过`length(B,3)`B 是文件的位置。

`B = importdata(fileName,delimiterIn,headerlinesIn);`

我无法让它工作，因为它每次都返回 1。

任何帮助都会非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:24:20.170

第三列的大小可以通过

```
size( B( :, 3 ) ) 
```

但是，大小`B`是一个矩阵，所有列必须具有相同的大小！
所以，你也可以输入

```
size( B, 1 ) 
```

获取矩阵中的行数`B`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:50:50.457

csv 文件通常由 csvread 函数导入，即：

```
B = csvread(fileName); 
```

但是，这将为您提供一个矩阵，因此所有列的长度都相同。事实上，根据定义（[rfc4180](https://www.rfc-editor.org/rfc/rfc4180)）：

> 每行应包含整个文件中相同数量的字段

# javascript - 如何从 javascript 中的 FormData 获取数据？

> ID：14876858
> 
> 赞同：5
> 
> 时间：2013-02-14T14:19:18.710
> 
> 标签：javascript, qunit, form-data

我需要从 FormData 中读取数据吗？我尝试阅读类似`someFormatData["valueName"]`但它不起作用的东西。 `options["fileId"]`或`options["file"]`不起作用。我也尝试`options.fileId`相同的结果：

```
function upload(file, fileId, callback) {
    var formData = new FormData();
    formData.append("file", file);
    formData.append("fileID", fileId);

    $.ajax({
        url: '/url',
        type: 'POST',
        data: formData,
        processData: false,
        contentType: false,
        success: function(response) {
            callback(response);
        }
    });
}

asyncTest("test upload chunk", function() {
    var blob = new Blob(["Hello world!"], { type: "text/plain" }),        
        options = null,
        fileID ="someFileID",
        response;

    jQuery.ajax = function(param) {
        options = param;   // THIS is FormData object 
        // how to read fileId and file from here
    };

    upload(blob, fileID, function (data) {
        response = data;  
    });

    options.success({
        someProp: 'responseFromServer'
    });

    setTimeout(function() {
        QUnit.equal(options, "dataTosend", "parameters is OK");
        QUnit.equal(response["someProp"], "responseFromServer", "Response ok");
        start();
    },1000);
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-01T04:34:32.167

如果你拿你的`FormData`对象，你可以在它上面使用几种不同的方法……你要找的是

```
formData.get() 
```

或者

```
formData.getAll() 
```

[https://developer.mozilla.org/en-US/docs/Web/API/FormData](https://developer.mozilla.org/en-US/docs/Web/API/FormData)

请注意，`get()`并非所有浏览器都完全支持该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-16T07:05:18.173

您可以使用此阅读

```
formData.get('fileId') // to read Id
formData.get('file') // to read the file 
```

# php - Jquery Tagit - 如何将键入的标签传递回 PHP

> ID：14876862
> 
> 赞同：2
> 
> 时间：2013-02-14T14:19:29.310
> 
> 标签：php, jquery, jquery-plugins, jquery-post, tag-it

我正在使用以下 tagit 插件 [http://webspirited.com/tagit/](http://webspirited.com/tagit/)

这是我试图测试这个插件的 html 页面的代码片段 - 用户在其中键入标签

```
<input class="text_field" type="text" size="72" id="question_title"/>
<textarea id="question"></textarea>

<ul id="demo3" class="tagit">
<li class="tagit-choice">apple orange<a class="tagit-close">x</a></li>
<li class="tagit-new"><input class="tagit-input ui-autocomplete-input" type="text" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true"></li>
<ul class="ui-autocomplete ui-menu ui-widget ui-widget-content ui-corner-all" role="listbox" aria-activedescendant="ui-active-menuitem" style="z-index: 1; top: 0px; left: 0px; display: none;"></ul></ul>

<input id="question_submit" type="submit" value="Ask Question"/> 
```

现在，当用户单击“提问”按钮时 - 会发生以下 ajax 调用

```
$("#question_submit").live('点击',function(e) {            
        e.preventDefault();     
        var question_val = $("#question").val();
        var question_title = $("#question_title").val();

        var tags = $("#demo3").tagit("tags");
        var s ='';
        for（标签中的变量 i）
            s += tags[i].label + " : " + tags[i].value + "\r\n";
        警报；

            $.post('/course/ask-question', {question: question_val,question_title: question_title,tags:tags}, function(data) {
                如果（data.success=="ok"）
                {
                    $("div#wall").prepend(data.question);
                }                   
            },"json");

    });

```

所以在这个函数中我可以得到标签

```
var tags = $("#demo3").tagit("tags");
```

并遍历它们并打印每个标签的标签和值。

现在，当我尝试通过 $.post 将它传递给我的 PHP 控制器时 - 它不起作用 - 我的意思是如果我在调用 ask-question 函数时删除数据标签：标签它工作正常 - 但是当我添加它时 -好像没有调用该函数一样。

有没有一种特殊的方法可以将此标签对象传递给 PHP ？

编辑在 Chrome 开发人员工具中 - 当我提交表单同时保留标签：数据中的标签时 - 我收到以下错误

```
未捕获的类型错误：非法调用 jquery-1.6.4.min.js:4
e jquery-1.6.4.min.js:4
通过 jquery-1.6.4.min.js:2
通过 jquery-1.6.4.min.js:2
通过 jquery-1.6.4.min.js:2
通过 jquery-1.6.4.min.js:2
通过 jquery-1.6.4.min.js:2
通过 jquery-1.6.4.min.js:2
通过 jquery-1.6.4.min.js:2
（匿名函数）jquery-1.6.4.min.js:2
e.extend.each jquery-1.6.4.min.js:2
通过 jquery-1.6.4.min.js:2
f.extend.param jquery-1.6.4.min.js:4
f.extend.ajax jquery-1.6.4.min.js:4
f.（匿名函数）jquery-1.6.4.min.js:4
（匿名函数） course-feed.js:51
l jquery-1.6.4.min.js:2
f.event.handle jquery-1.6.4.min.js:3
i.handle.k

```

感谢您的帮助 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-06T17:01:56.330

有两种简单的方法可以解决这个问题：

1-将选项“fieldName”设置为“tags[]”

```
$("#myTags").tagit({
    fieldName: 'tags[]'
}); 
```

2-（较少推荐）将 js 文件更改为始终将“[]”附加到文件名：

更改每个：

```
name="' + this.options.fieldName + '" 
```

为了：

```
name="' + this.options.fieldName + '[]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:26:39.453

从您正在使用的插件的文档中，`tags`将是一个数组。如果您需要使用 Array，请尝试更改`tags: tags`以`'tags[]':tags`查看它是否有效？

# ef-code-first - 代码优先，自定义连接表

> ID：14876870
> 
> 赞同：1
> 
> 时间：2013-02-14T14:20:02.153
> 
> 标签：ef-code-first, entity-framework-5

[我正在尝试使用此处](https://stackoverflow.com/questions/7289160/ef-code-first-additional-column-in-join-table-for-ordering-purposes)显示的类似代码在多对多关系中创建联结表。它使用我想要的其他列创建我的连接表。我的问题是它使用多对多关系中的表中的键创建另一个表。

# pdf - ABCpdf 损坏 PDF 文件

> ID：14876871
> 
> 赞同：1
> 
> 时间：2013-02-14T14:20:04.460
> 
> 标签：pdf, abcpdf

我正在尝试用 ABCpdf 做一些非常简单的事情。我的目标是为现有的 PDF 添加页码（通过 Telerik 生成 - PDF 导出）。

我遇到的问题是，在阅读 PDF 然后保存后，文件损坏了。

我的代码：

```
Doc pdfDocument = new Doc();
pdfDocument.Read(path);            
MemoryStream outputMemoryStream = new MemoryStream();            
pdfDocument.Save(outputMemoryStream);
pdfDocument.Clear();
Response.BinaryWrite(outputMemoryStream.ToArray());
outputMemoryStream.Close(); 
```

任何建议将不胜感激。

我正在使用 ABCpdf 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:16:47.757

看看我的答案[将页码添加到 Pdf 文档](https://stackoverflow.com/questions/12817017/add-page-numbers-to-a-pdf-document-with-abc-pdf/13702604#13702604)

这解释了如何将页码添加到 pdf 链中。

查看您的代码，问题接缝是您正在重写内存中的当前文件。尝试在创建具有添加页码的新文件时读取文件，然后如果需要，删除第一个文档并重命名第二个文档。

# java - 日历 primefaces 列过滤器

> ID：14876873
> 
> 赞同：2
> 
> 时间：2013-02-14T14:20:18.170
> 
> 标签：java, jsf-2, filter, primefaces, datatable

我在 Primefaces 3.3 中有一个数据表。其中一列是日期。我想要一个日历过滤器字段而不是 Primefaces 提供的常规过滤器字段，以便用户可以搜索列表中具有该特定日期的所有项目。

# concurrency - sqlite3 并发写入

> ID：14876877
> 
> 赞同：0
> 
> 时间：2013-02-14T14:20:30.643
> 
> 标签：concurrency, sqlite

我得到一个包含 100 行数据的表。（Sqlite3 和 Linux）

这些行中的每一个都由几个进程更新。由于同一行不能被修改两次（一个进程“拥有”一行并且只有一个），你认为我真的需要使用事务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:57:43.913

SQLite 没有并发写入。只要一个进程正在写入数据库文件，其他想要写入的进程就必须等待。

SQLite*总是*使用事务。如果你没有显式地执行`BEGIN`/`COMMIT`命令，每一个命令都会被自动包装在一个事务中。

所以你的程序应该可以正常工作。

# dns - 发送 DNS 数据：先 MSB 还是先 LSB？

> ID：14876886
> 
> 赞同：1
> 
> 时间：2013-02-14T14:21:13.390
> 
> 标签：dns, protocols, communication, network-protocols, endianness

我在 c# 中实现了一个 DNS（实际上是多播 DNS）。

我只想知道我是否必须用左侧的 LSB 或左侧的 MSB 对我的 uint/int/ushort/... 进行编码。在全球范围内，我怎么能知道这一点？其中之一是标准？

因为我在 IETF 描述中没有找到任何内容。我发现了很多东西（每个标题字段长度，位置），但我没有找到这个。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:01:43.133

答案在 RFC 1035（2.3.2\. 数据传输顺序）

这是链接：[http ://www.ietf.org/rfc/rfc1035.txt](http://www.ietf.org/rfc/rfc1035.txt)

而有趣的部分

> 2.3.2\. 数据传输顺序
> 
> 本文档中描述的报头和数据的传输顺序被解析到八位字节级别。每当图表显示一组八位字节时，这些八位位组的传输顺序就是用英语阅读它们的正常顺序。例如，在下图中，八位字节按编号顺序传输。
> 
> ```
>  0                   1
>  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |       1       |       2       |
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |       3       |       4       |
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |       5       |       6       |
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
> ```
> 
> 每当一个八位位组表示一个数字量时，图中最左边的位是高位或最高有效位。也就是说，标记为 0 的位是最高有效位。例如，下图表示值 170（十进制）。
> 
> ```
>  0 1 2 3 4 5 6 7
> +-+-+-+-+-+-+-+-+
> |1 0 1 0 1 0 1 0|
> +-+-+-+-+-+-+-+-+ 
> ```
> 
> 类似地，每当一个多字节字段表示一个数字量时，整个字段的最左边的位是最高有效位。当传输多字节数量时，首先传输最重要的八位字节。

# mvvm - 在 MVVM 中将 ObservableCollection 绑定到数据网格

> ID：14876893
> 
> 赞同：1
> 
> 时间：2013-02-14T14:21:25.830
> 
> 标签：mvvm, binding, datagrid, observablecollection

我是 XAML 的新手，我正在尝试将 ObservableCollection 绑定到 MVVM 中的数据网格。我想在 CollectionChanged 时收到通知。但它抛出空异常。

当我出错时请告诉我。提前致谢。

以下是 viewModel 背后的代码：

```
public class MainwindowViewModel : INotifyPropertyChanged
{
    MyObject myObj;
    ObservableCollection<MyObject> _ocObj;

    public MainwindowViewModel()
    {
        _ocObj = new ObservableCollection<MyObject>();
        myObj = new MyObject();
        myObj.ID = 0;
        myObj.Name = "Name";
        _ocObj.Add(myObj);
        _ocObj.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(_ocMyobj_CollectionChanged);
    }

    void _ocMyobj_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        System.Windows.MessageBox.Show("propeties changed @ " + e.NewStartingIndex.ToString()
            + " old items starting @ " + e.OldStartingIndex + " olditems count " + e.OldItems.Count.ToString()
            + " action " + e.Action.ToString());
    }

    public ObservableCollection<MyObject> ocObj
    {
        get { return _ocObj; }
        set
        {
            PropertyChanged(this, new PropertyChangedEventArgs("ocMyobj"));
        } 
    }

    public string Name
    {
        get { return myObj.Name; }
        set
        {
            if (value !=null)
            {
                myObj.Name = value;
                PropertyChanged(this, new PropertyChangedEventArgs("Name"));
            }
        }
    }

    public int ID
    {
        get { return myObj.ID; }
        set
        {
            if (myObj.ID != value)
            {
                myObj.ID = value;
                PropertyChanged(this, new PropertyChangedEventArgs("ID"));
            }
        }
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion
}

public class MyObject
{
    public string Name { get; set; }
    public int ID { get; set; }
} 
```

下面是 XAML：

```
<Window.Resources>
    <vm:MainwindowViewModel x:Key="someObj"/>
</Window.Resources>
<DataGrid ItemsSource="{Binding ocObj}" DataContext="{Binding Source={StaticResource someObj}}" AutoGenerateColumns="True"  /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:56:47.207

[查看NotifyCollectionChangedEventArgs 类](http://msdn.microsoft.com/en-us/library/system.collections.specialized.notifycollectionchangedeventargs.aspx)的文档。请注意，OldItems 对象仅“获取受替换、删除或移动操作影响的项目列表”。这意味着*对于其他操作，OldItems 将为空。*

因此，如果对您的 ObservableCollection 执行添加操作，则 OldItems 为空（且有效）。只需在您的代码中对其进行检查，例如：

```
 System.Windows.MessageBox.Show("propeties changed @ " + e.NewStartingIndex.ToString()
                + " old items starting @ " + e.OldStartingIndex + " olditems count " + 
                (e.OldItems == null ? "0" : e.OldItems.Count.ToString())
                + " action " + e.Action.ToString()); 
```

# php - Joomla 中的 TCPDF 库。表格超出页面宽度？

> ID：14876894
> 
> 赞同：0
> 
> 时间：2013-02-14T14:21:25.863
> 
> 标签：php, joomla, tcpdf

我正在构建 Joomla 组件，我想使用使用 TCPDF 库的 Joomla PDF 文档类将生成的管理表保存为 PDF 文件。

现在我已经设法获取表格内容，并将其保存为 PDF，但由于某种原因，表格宽度超过了页面宽度。

我已经尝试了一切，外部 css，内联 css，但它根本不读取我的样式并输出没有样式的表格。该表有 5 列，即使在每列中只写一个字符，我也只能看到前 3 列。

这是我试图输出为 PDF 的 html：

```
<table style="width:300px;">
<tr style="height:120px;">
    <td style="border:1px solid #000000;width:200px;color:red;">1</td>
    <td>2</td>
    <td>3</td>
    <td>4</td>
    <td>5</td>
</tr>
</table> 
```

我在输出 PDF 中得到的只是： 1 2 3 所以值 4 和 5 在页面之外。

请帮助我过去几个小时一直在努力解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:40:41.117

不知道这是否有资格作为答案。

我已经通过上传最新版本的TCPDF库解决了这个问题，但是joomla 1.5似乎有一些问题我没有使用Joomla PDF库（它实际上只是扩展了具有有限选项的TCPDF），而是我直接加载了TCPDF库在我的代码中，一切都很好。

# ios - 如何使 CvVideoCamera 不自动旋转？

> ID：14876895
> 
> 赞同：10
> 
> 时间：2013-02-14T14:21:38.610
> 
> 标签：ios, objective-c, opencv

我的`CvVideoCamera`自动旋转，我不希望它。[这已在 bugtracker 上提出](http://code.opencv.org/issues/2673)，但有一段时间没有活动。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-14T14:21:38.610

子类`CvVideoCamera`，只需删除轮换代码。我希望我的方向始终是纵向的，所以这很简单：

### MyCvVideoCamera.h

```
#import <opencv2/highgui/cap_ios.h>

@interface MyCvVideoCamera : CvVideoCamera

- (void)updateOrientation;
- (void)layoutPreviewLayer;

@property (nonatomic, retain) CALayer *customPreviewLayer;

@end 
```

### MyCvVideoCamera.m

```
#import "MyCvVideoCamera.h"

@implementation MyCvVideoCamera

- (void)updateOrientation;
{
    // nop
}
- (void)layoutPreviewLayer;
{
    if (self.parentView != nil) {
        CALayer* layer = self.customPreviewLayer;
        CGRect bounds = self.customPreviewLayer.bounds;
        layer.position = CGPointMake(self.parentView.frame.size.width/2., self.parentView.frame.size.height/2.);
        layer.bounds = bounds;
    }
}
@end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-01T23:42:01.080

为了使它起作用，我必须添加：

```
@protocol CvVideoCameraDelegateMod <CvVideoCameraDelegate>
@end 
```

到上面描述的 MyCvVideoCamera.h

和

```
@synthesize customPreviewLayer = _customPreviewLayer; 
```

到 MyCvVideoCamera.m

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-01-27T07:38:15.980

快速修复在初始化 CVVideoCamera 之前添加这些行

NSNumber *value = [NSNumber numberWithInt:UIInterfaceOrientationPortrait]; [[UIDevice currentDevice] setValue:value forKey:@"orientation"];

self.videoCamera = [[CvVideoCamera alloc] initWithParentView:self.previewImage]; self.videoCamera.delegate = self;

# c# - 网格控件返回值

> ID：14876899
> 
> 赞同：-1
> 
> 时间：2013-02-14T14:21:49.007
> 
> 标签：c#, winforms

我想从弹出表单接收返回值。弹出窗体上有一个gridControl，需要在父窗体gridControl中插入哪些值。

我称之为弹出表单：

```
 private void label14_Click(object sender, EventArgs e)
    {
        frmSelectInvoice selectInvoice = new frmSelectInvoice();
        selectInvoice.ShowDialog();            
    } 
```

这是弹出表单源：

```
 public partial class frmSelectInvoice : DevExpress.XtraEditors.XtraForm
{

    public ValinorEntities valinor;
    public BindingSource src;

    public frmSelectInvoice()
    {
        InitializeComponent();

        using (this.valinor = new ValinorEntities())
        {
            this.valinor = new ValinorEntities();
            this.src = new BindingSource(valinor.invoices_head, null);
            gridControl1.DataSource = src;
            src.DataSource = valinor.invoices_head;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {

        this.Close();
    }
} 
```

弹出表单中的返回值应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:35:52.777

使用静态类；

```
public static class MyClass
{
    public static object myValue;
}

private void label14_Click(object sender, EventArgs e)
{
    frmSelectInvoice selectInvoice = new frmSelectInvoice();
    selectInvoice.ShowDialog();  
    //Get value before close
    object value = MyClass.myValue;
}

public partial class frmSelectInvoice : DevExpress.XtraEditors.XtraForm
{
    public ValinorEntities valinor;
    public BindingSource src;

    public frmSelectInvoice()
    {
        InitializeComponent();

        using (this.valinor = new ValinorEntities())
        {
            this.valinor = new ValinorEntities();
            this.src = new BindingSource(valinor.invoices_head, null);
            gridControl1.DataSource = src;
            src.DataSource = valinor.invoices_head;
        }
    }

private void button1_Click(object sender, EventArgs e)
{
    //Set value after close
    MyClass.myValue = "value";
    this.Close();       
} 
```

}

# java - 比较 Java 和 matlab 中的 Mersenne Twister

> ID：14876901
> 
> 赞同：5
> 
> 时间：2013-02-14T14:21:52.230
> 
> 标签：java, matlab, random, mersenne-twister

我正在比较 Java 和 matlab 中的 mersenne twister。我在两者中都使用相同的种子。我的问题是，当我从每个数字生成器（分别在 Java 和 Matlab 中运行的 Mersenne Twister）打印出十个数字时，结果输出似乎不匹配。Matlab 版本的输出数据每隔一秒从 Java 程序中打印出一个数字。

Java 打印：

> 0.417、0.997、0.720、0.932、0.0001..

Matlab 打印：

> 0.417、0.720、0.0001..

谁能指出我正确的方向来弄清楚为什么会发生这种情况？

爪哇：

```
public class TestRand {
    static MersenneTwister r = new MersenneTwister(1);

    public static void main(String[] args) {

        int ant = 10;
        float[] randt = new float[ant];

        for (int i = 0; i < ant; i++){
            randt[i] = r.nextFloat()*1;
            System.out.println(randt[i]);    
        }
        System.out.println("------------twist");
    }
} 
```

MATLAB：

```
s = RandStream('twister','Seed',1)
RandStream.setGlobalStream(s);

r = 1 .* rand(1,10); 
```

我在 MatLab 中使用 Mersenne Twister 的标准实现，我使用的 Java 版本可以在[这里找到](http://www.cs.gmu.edu/~sean/research/mersenne/MersenneTwister.java)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T23:05:38.373

Matlab`rand()`结果是 64 位`double`值。但是您调用`nextFloat()`的是从 Java 获取 32 位值`MersenneTwister`。检查 Java 源代码是否`nextDouble`使用了两倍的随机性`nextFloat`，两次调用`next()`. 在您的Java 代码中替换`nextFloat()`为，您的结果应该会更好。`nextDouble()``TestRand`

# blackberry-10 - QML 预览兼容性检查失败。QML 预览被禁用

> ID：14876907
> 
> 赞同：1
> 
> 时间：2013-02-14T14:22:05.760
> 
> 标签：blackberry-10

我在 Mac 10.8.2 上，我的机器上同时安装了 java 1.6（启用 32/64 位）和 java 1.7，并且 JAVA_HOME 指向 java 1.6，但是每当我尝试在我的 Momentics IDE 中启用 QML 预览时（QNX® Momentics ® IDE for BlackBerry® 10 Native SDK，版本：10.0.9），我收到标题中的错误。查看了workspace/.metadata/.log下的日志，它记录了以下内容：

*!MESSAGE QML 预览兼容性检查日志。错误：此 Java 实例不支持 32 位 JVM。*

如何让 ide 指向 java 1.6？我可以更改应用程序启动脚本中的某个位置吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:13:32.237

QNX Momentics 基于 Eclipse，因此您应该能够通过编辑 IDE 的 .ini 文件来更改使用的 JVM。如果您的 Momentics 安装在默认位置，请在 Finder 中导航至：

`/Applications/bbndk/ide/macosx/x86/eclipse/`

1.  右键单击`qde.app`（如果您隐藏了扩展，它可能只是`qde`带有动态图标）并选择**Show Package Contents**。
2.  在TextEdit 中`/Contents/MacOS/`编辑文件。`qde.ini`
3.  在文件顶部，在`-vmargs`添加以下内容之前：

    ```
    -vm
    /path/to/your/java/jvm/here 
    ```

    IE。

    ```
    -vm
    /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home/bin/java 
    ```

4.  保存文件并启动 Momentics，它现在应该使用您指定的 JVM。启动后检查您`workspace/.metadata/.log`的确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T21:12:45.657

我遇到了同样的问题，我尝试了@nonesuchnick 的答案，但不幸的是这对我不起作用。

我的环境与您相似：我的 Mac (10.8.2) 上安装了 Java 1.7（Oracle 版本）和 1.6（Apple 版本）。

我通过这种方式解决了我的问题：

1.  完全删除 Java 1.7
2.  检查您的 NDK 安装程序的 md5 以确保您获得了正确的 md5。

要完全删除 Java 1.7，您需要删除 jdk1.7 文件夹下

`/Library/Java/JavaVirtualMachines/`

`JavaAppletPlugin.plugin`并删除下的互联网插件

`/Library/Internet Plug-Ins`

然后打开终端并输入`java -version`以确保您的 PATH 变量正确设置为您的 java 1.6 路径（我的意思是 Apple 路径）。

完成此操作后，您可以尝试卸载 BB10 NDK 并重新安装它，然后尝试启用 QML Preview，这一次它应该可以工作了。

参考： [如何为我的 Mac 卸载 Java 7？](http://www.java.com/en/download/help/mac_uninstall_java.xml)

# sql - 将数据类型 varchar 转换为 bigint 时出错

> ID：14876914
> 
> 赞同：2
> 
> 时间：2013-02-14T14:22:22.213
> 
> 标签：sql, sql-server, tsql

我有一个包含数据的表，其中一列包含一个存储为文本的数字。当应用程序更新它时，它会`_BAK`在数字后面写入 + 日期时间戳。

我现在正试图通过删除`_BAK`数字列中不能删除最新记录的所有记录来清理数据库。

```
id     sitenummer                  
28376  1441_BAK20130213151952032    
28377  1441_BAK20130214142314705 
```

在这种情况下，ID 为 28376 的行是最旧的，必须删除。

我创建了一个应该这样做的查询：

```
;with sel1 AS (
select t1.ID,t1.sitenummer, CONVERT(BIGint,SUBSTRING(t1.sitenummer,CHARINDEX('_',t1.sitenummer,0)+4,50)) as Stamp1    
from vdfkraan as t1
where t1.sitenummer like '%_BAK%' and (SELECT COUNT(SUBSTRING(t2.sitenummer,0,CHARINDEX('_',t2.sitenummer,0))) FROM vdfkraan as t2 
                                      where SUBSTRING(t1.sitenummer,0,CHARINDEX('_',t1.sitenummer,0))=SUBSTRING(t2.sitenummer,0,CHARINDEX('_',t2.sitenummer,0))) > 1
group by t1.id,t1.sitenummer)

, sel2 AS (
select t3.id, t3.sitenummer, t3.stamp1, 
      (select TOP(1) t4.stamp1 from sel1 as t4
        WHERE SUBSTRING(t4.sitenummer,0,CHARINDEX('_',t4.sitenummer,0)) =SUBSTRING(t3.sitenummer,0,CHARINDEX('_',t3.sitenummer,0))
        order by t3.Stamp1 DESC) AS stamp2 from sel1 as t3)

, sel3 AS (select id from sel2 where Stamp1=stamp2)

--delete FROM vdfkraan
--where id IN (SELECT t1.id FROM sel3 as t1)

--select * from sel2 
```

如果我取消注释最后一行（从 sel2 中选择 *），它会生成下表：

```
id     sitenummer                 stamp1             stamp2
28376  1441_BAK20130213151952032  20130213151952032  20130213151952032
28377  1441_BAK20130214142314705  20130214142314705  20130213151952032 
```

表`sel3`包含一列的一条记录`id = 28376`。

所以这似乎就像我想要的那样工作。

现在我注释选择行并取消注释删除行。

现在我收到以下错误：

> `Msg 8114, Level 16, State 5, Line 2`
> `Error converting data type varchar to bigint.`

所以没有删除行，一切都很好，没有错误，但是有了它，我得到了这个错误。我查了资料，应该没有问题。

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:00:19.360

试试这个：

```
SELECT  v.ID
        , v.sitenummer
        , ROW_NUMBER() OVER (PARTITION BY LEFT(v.sitenummer, PATINDEX('%_BAK%', v.sitenummer) - 1) ORDER BY v.id DESC) num
INTO    #temp
FROM    vdfkraan v
WHERE   PATINDEX('%_BAK%', v.sitenummer) > 0

DELETE  vdfkraan
FROM    #temp t
JOIN    vdfkraan v ON v.id = t.id
AND     t.num <> 1

SELECT  *
FROM    vdfkraan 
```

这是一个**[SQL 小提琴](http://sqlfiddle.com/#!3/4ea18/1/0)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T12:55:22.173

我认为您可以使用分组而不是窗口函数：

```
SELECT  max(id), max(sitenummer)
FROM    vdfkraan
group by left(sitenummer,charindex('_BAK',sitenummer)); 
```

# visual-studio-2010 - 水晶报表错误

> ID：14876916
> 
> 赞同：1
> 
> 时间：2013-02-14T14:22:24.130
> 
> 标签：visual-studio-2010, crystal-reports, web-config, crystal-reports-2010

我继承了一个我负责维护的网络应用程序。该应用程序有十几个水晶报告，但我无法打开它们（嗯，我 - 可以 - 但它们本质上主要是数字）。

我安装了这个：[http ://scn.sap.com/people/coy.yonce/blog/2010/11/12/crystal-reports-for-visual-studio-2010-production-release-now-available](http://scn.sap.com/people/coy.yonce/blog/2010/11/12/crystal-reports-for-visual-studio-2010-production-release-now-available)

然后，我可以正确打开它们。我对其中一些进行了必要的调整，保存并尝试在本地进行测试。在安装水晶报告（上图）之前，我在本地运行了应用程序，它运行良好。

**问题：**现在我已经安装了它并进行了更改（非常小的东西，只针对 rpts，而不是任何 aspx 文件），我收到了这个错误：

**解析器错误消息：无法加载文件或程序集“System.Web.Extensions，版本=1.0.61025.0，文化=中性，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。**

**源错误：[没有相关的源行]**

这是我在 Web.config 中与 Crystal Reports 相关的内容：

```
 <assemblies>
            <add assembly="CrystalDecisions.Shared, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
            <add assembly="CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
            <add assembly="CrystalDecisions.ReportSource, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/>
            <add assembly="CrystalDecisions.CrystalReports.Engine, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/>
            <add assembly="CrystalDecisions.ReportAppServer.ClientDoc, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"/> 
```

此处的版本与参考属性中的版本相匹配。

除了应用程序自己的 dll 之外，bin 文件夹中没有 dll。

有以下“Crystal”相关参考：CrystalDecisions.CrystalReports.Engine、CrystalDecisions.ReportSource、CrystalDecisions.Shared、CrystalDecisions.Web

我研究过这个问题，有人说我需要添加一个ajax dll。哪一个？另外，这有什么关系？

这应该是一个微小的调整，现在它变成了一件大事。非常感谢您提供的任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:34:17.893

问题与`System.Web.Extensions`dll 相关，不是 Crystal Reports 问题。

尝试删除`System.Web.Extensions`web.config 中的行。

# c - 是否可以将 C11 支持添加到 Xcode 4.6？

> ID：14876925
> 
> 赞同：0
> 
> 时间：2013-02-14T14:22:47.580
> 
> 标签：c, xcode4.6, c11

我只是想知道是否有一个插件允许在 Xcode 4.6 中支持 C11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T10:07:54.070

如果你可以在它下面安装 gcc 4.7，它支持 -std=c11。

# template-engine - 如何防止 thymeleaf 替换 HTML 属性值中的特殊字符？

> ID：14876926
> 
> 赞同：6
> 
> 时间：2013-02-14T14:22:48.687
> 
> 标签：template-engine, thymeleaf

我将 Thymeleaf 与 js 微模板例程结合使用，这会导致属性值中出现特殊字符。在运行 Thymeleaf 时

```
<a style="display:<%= x ? 'block' : 'none' %>;"> 
```

它创建

```
<a style="display:&lt;%= x ? &#39;block&#39; : &#39;none&#39; %&gt;;"> 
```

虽然我希望得到与我放入处理器中的完全相同的结果。如何在 HTML 属性值中使用特殊字符？非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2016-02-16T20:41:15.393

试着玩

```
th:utext="#{unescaped text}"> 
```

请参阅 Thymeleaf 文档未[转义文本](http://www.thymeleaf.org/doc/tutorials/2.1/usingthymeleaf.html#unescaped-text)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-19T14:04:30.667

有一些变体需要审查：

*   如上所述使用`LEGACYHTML5`选项`templateResolver`
*   Underscore.js 中的覆盖`template`方法

我更喜欢第二种方法。将此代码放在初始化脚本中：

```
var original = _.template;
_.template = function(content) {
    // fix operators escaped by Thymeleaf HTML5 validator
    content = content.replace(/&#39;/g, "'");
    content = content.replace(/&lt;/g, "<");
    content = content.replace(/&gt;/g, ">");
    return original.call(this, content);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T22:50:45.370

我不确定其他模板模式，但我知道 html5 和 xml 不会让您这样做，因为将生成的文档 thymeleaf 不会针对 doctype 进行验证。所以至少在那些模式下，我认为这是不可能的。（也许使用自定义方言？）

那么为什么要在同一页面上使用两个模板工具呢？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T12:51:01.637

您可以尝试用 CDATA 块包围您的代码。

[http://www.w3schools.com/xml/xml_cdata.asp](http://www.w3schools.com/xml/xml_cdata.asp)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-14T13:23:26.143

正如 hubbardr 已经建议的那样，使用 LEGACYHTML5 作为模板模式可能会对您有所帮助。

# embedded-linux - 在哪里或如何在梭子鱼网络服务器中指定日志文件？

> ID：14876927
> 
> 赞同：0
> 
> 时间：2013-02-14T14:22:49.630
> 
> 标签：embedded-linux, embeddedwebserver

我有一个实时逻辑的梭子鱼应用服务器托管在基于 m68k 的嵌入式 linux 系统上。当我在其中启用 https 时，我得到异常并且它会杀死应用程序。我想知道异常将在哪里记录在梭子鱼网络服务器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T18:22:21.097

文件名是Httptrace，应该是在服务器当前目录下创建的吧？

# python - 你如何在cherrypy中监听会话过期事件？

> ID：14876929
> 
> 赞同：0
> 
> 时间：2013-02-14T14:22:56.670
> 
> 标签：python, cherrypy

我已经完成了会话超时的设置：

`'tools.sessions.timeout': 30 'tools.sessions.on': True`

一切正常，但是，只有在刷新当前页面后，我才会重定向到登录页面。

有没有办法监听会话过期事件并在发生这种情况时自动进行重定向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:22:09.943

您可以在会话超时之前使用 javascript 和 setTimeout 进行重定向。

```
<body onload="setTimeout('window.location = \'www.yourdomain.com\';', 1700000);"> 
```

希望这可以帮助。

安德鲁

# c# - 如何在 C# 中设置 SQLITE_MAX_COMPOUND_SELECT？

> ID：14876931
> 
> 赞同：1
> 
> 时间：2013-02-14T14:22:58.647
> 
> 标签：c#, sqlite, limit

我编写了一个小型 C# 应用程序，它通过 Mono 在 Linux 上运行，并使用 SQLite 将从磁盘读取的日志文件存储在数据库中。

我面临的瓶颈是，因为每个日志文件可以有 222000+ 个条目（有时一次有 1000 个日志文件），所以我的数据库上的写操作占用了程序运行的大部分时间。

有没有办法增加 SQLite 的 SQLITE_MAX_COMPOUND_SELECT 限制？因为我一次可以写入数据库的最大条目数是 500（我已经在使用）。

我知道有一个 C 接口 ( `sqlite3_limit(db,SQLITE_LIMIT_COMPOUND_SELECT,size)`)，但我宁愿通过 C# 设置它，而不是进入 C 来做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:09:04.247

由于它只是一个 C 例程，因此您可以通过 pInvoke 从 C# 调用它：

```
[DllImport("sqlite3.dll")]
static extern int sqlite3_limit(IntPtr dbHandle, int id, int newVal); 
```

然后，您需要获取您的 dbHandle，在 Mono.Data.Sqlite 中，我相信它位于：

SqliteConnection._sql.handle。

要做到这一点，你需要反思。

我没有测试过这个（我没有 Mono 或 sqlite），但我相信这会做到：

```
private void SetLimit(SqliteConnection conn, int newLimit)
{
   object sqlVar = conn.GetType().GetProperty("_sql", BindingFlags.Instance | BindingFlags.NonPublic).GetValue(conn);
   IntPtr dbHandle = (IntPtr) sqlVar.GetType().GetProperty("handle", BindingFlags.Instance | BindingFlags.NonPublic).GetValue(sqlVar);
   sqlite3_limit(dbHandle, 4, newLimit);
} 
```

4 是 SQLITE_LIMIT_COMPOUND_SELECT 常量的硬编码值。

**更新**

我相信，当您调用此连接时，连接将需要打开，并且它只会持续连接的持续时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T15:42:26.640

为了提高写入数据库的性能，我已从复合选择语句切换到预准备语句。这大大提高了执行速度。

如果在一个 100Mb 大小的日志文件之前需要 1 分 30 秒才能将其写入数据库，那么现在处理该文件只需要 30 秒。虽然这对其他人来说不能保证，但在我的情况下就足够了。

为了做到这一点，我使用[了这个链接。](http://petesbloggerama.blogspot.nl/2007/02/sqlite-adonet-prepared-statements.html)虽然古老，但今天仍然适用。

# asp.net-mvc - 添加 ELMAH 并更改 elmah.mvc.route 后，旧路由仍然可用

> ID：14876935
> 
> 赞同：8
> 
> 时间：2013-02-14T14:23:07.850
> 
> 标签：asp.net-mvc, asp.net-mvc-4, web-config, routes, elmah

我已将 ELMAH 添加到我的 ASP.NET MVC 4 .Net 4 Web 应用程序中。

集成很简单，而且效果很好。

我已将 web.config 的应用程序设置中的“elmah.mvc.route”值更改为“Admin/SiteLog”路由 - elmah 日志现在显示在此路由上

但是，由于某种原因，它仍然显示在“/elmah”中（没有 css 样式，但内容相同）。

如何禁用默认的 elmah 路由？

使用[Elmah.MVC](http://nuget.org/packages/Elmah.MVC/) nuget 包进行集成

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-05-10T11:27:33.437

我自己刚刚解决了这个问题，最新版本似乎有几个应用程序设置可以很好地解决这个问题。

```
<add key="elmah.mvc.IgnoreDefaultRoute" value="true" />
<add key="elmah.mvc.route" value="admin/elmah" /> 
```

可能还值得了解其他人，因此请查看默认安装。

```
<add key="elmah.mvc.disableHandler" value="false" />
<add key="elmah.mvc.disableHandleErrorFilter" value="false" />
<add key="elmah.mvc.requiresAuthentication" value="false" />
<add key="elmah.mvc.allowedRoles" value="*" />
<add key="elmah.mvc.allowedUsers" value="*" /> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-28T22:24:52.803

发生这种情况是因为默认路由（假设您有一个）仍将匹配 Elmah.Mvc.ElmahController。

```
routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }); 
```

无论您是否愿意，路由的“{controller}”部分都会找到匹配的控制器。在这种情况下，这显然是有问题的。

[您可以使用此处](http://stephenwalther.com/archive/2008/08/07/asp-net-mvc-tip-30-create-custom-route-constraints.aspx)概述的 IRouteConstraint 在您的路线上添加约束。NotEqual 约束实际上非常有用。

```
using System;
using System.Web;
using System.Web.Routing;

public class NotEqual : IRouteConstraint
{
    private string _match = String.Empty;

    public NotEqual(string match)
    {
        _match = match;
    }

    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        return String.Compare(values[parameterName].ToString(), _match, true) != 0;
    }
} 
```

因此，然后使用以下命令从默认路由中排除 ElmahController。

```
routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new { controller = "Home", action = "Index", id = UrlParameter.Optional },
        new { controller = new NotEqual("Elmah") }); 
```

这将使对“/elmah”的请求返回 404。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T17:06:19.667

`httpHandlers`您可以通过更新web.config 部分中的路径来指定位置

```
 <httpHandlers>
        <add verb="POST,GET,HEAD" path="admin/elmah.axd" type="Elmah.ErrorLogPageFactory, Elmah"/>
    </httpHandlers> 
```

# php - PHP在Codeigniter中使用get_where子句不传递数据

> ID：14876941
> 
> 赞同：1
> 
> 时间：2013-02-14T14:23:35.490
> 
> 标签：php, codeigniter, activerecord, where-clause

大家好，我是 Codeigniter 的新手，我正在尝试获取与从前一页传递的 account_id 相关的所有数据。

我传递了 account_id，但没有传递与 account_id 关联的名称字段。名称字段为空白。

我收到一个错误：

这是我的控制器代码：

```
function input($account_id = '', $name = ''){
   if((int)$account_id > 0){
      $query = $this->db->select('name', $name);
      $query = $this->db->get_where('db_accounts', array('account_id' => $account_id));

      $data['account'] = $query;
      $data['fname']['value']   = $name;
      $data['faccount_id']['value'] = $account_id;
      $data['name']        = '';
      $data['account_id']  = '';
  }

  $this->load->view('manage/input',$data);      
} 
```

这是我的输入视图表单：

```
<?php

   $data = array(
          'name'  => $fname['value'],
          'account_id' => $faccount_id['value']
        );

echo '<form action="/manage/edit" method="post" accept-charset="utf-8">';
echo form_hidden($data);

echo $account_id .' Account ID'.
    form_input($faccount_id); 
echo $name .' Name'.
    form_input($fname); 

$data = array('name' => 'submit', 'value' => 'Update Account', 'class' => 'submit');
echo form_submit($data);

  ?>
 <?php echo form_close(); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T14:25:15.533

我相信`get_where`只是准备您的查询

`$query->row_array()`应该将您的结果作为数组返回

```
$query = $this->db->get_where('db_accounts', array('account_id' => $account_id));
$result = $query->row_array(); 
```

对于您问题的第二部分，似乎发生了很多事情。`$name`你的函数中的价值是什么`input`？您实际上是否将值传递给`input`？确保在您的`input`函数中设置了该名称，否则它将只是一个空字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-15T05:12:00.207

从文档中占用：

> $this->db->select() 接受可选的第二个参数。如果您将其设置为 FALSE，CodeIgniter 将不会尝试使用反引号保护您的字段或表名。如果您需要复合选择语句，这很有用。

所以更换

```
$query = $this->db->select('name', $name); 
```

和

```
$this->db->select('name', $name); // No need to assign it to a variable 
```

然后`$this->db->get_where();`执行查询并返回您需要从中获取结果的整个查询对象。

```
$query = $this->db->get_where('db_accounts', array('account_id' => $account_id));
$result = $query->row_array(); //For single row
$result = $query->result_array(); //For more than one row 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T15:14:09.830

在 djjjuk 的帮助下找到了解决方案。

```
 $query = $this->db->get_where('db_accounts', array('account_id' => $account_id));
   if ($query->num_rows() > 0)
   {
     $row = $query->row_array();

   } 

  $data['account'] = $row;

  $data['fname']['value']   = $row['name'];
  $data['faccount_id']['value'] = $account_id;
  $data['name']        = '';
  $data['account_id']  = '';
}

  $this->load->view('manage/input',$data);      

 } 
```

# c# - 更改子类子集合中通用集合属性的元素

> ID：14876942
> 
> 赞同：0
> 
> 时间：2013-02-14T14:23:38.907
> 
> 标签：c#, generics, inheritance, collections

我有一个简单的接口 ElementContainer （它也是一个元素），其中包含一个包含 Elements 的列表：

```
interface IElementContainer : IElement 
{
    List<Element> Elements { get; }
} 
```

现在我有一个实现这个接口的类：

```
class ConcreteContainer : IElementContainer
{
    List<IElement> Elements { get; private set; }
} 
```

但我不希望该类成为所有元素的容器，而只是其中的一个子集，比如SpecificElement，但是这是不可能的（当然）：

```
class SpecificElementContainer : IElementContainer
{
    List<SpecificElement> Elements { get; private set; }
} 
```

因此我想到了类似的东西：

```
class SpecificElementContainer : IElementContainer
{
    List<IElement> Elements { get; private set; }
    List<SpecificElement> SpecificElements
    {
       get 
       {
          return return Elements.FindAll(el => el is T).Select<IElement, T>(el => (T)el).ToList<T>();
       }
 } 
```

但是这种方式我不能做类似的事情：`SpecificContainer.SpecificElements.Add(...)`因为它没有添加到元素中。除此之外......这样做闻起来很腥。

任何线索如何以理智的方式重组它？

***在乔恩斯基特的回答之后编辑***

阅读 Jons 的评论，我的问题实际上比我上面显示的要复杂一些，但我忘记了一些非常重要的信息。

当我有一个实现上述接口的类并且元素列表填充如下：

```
Elements = { ConcreteElementA, ConcreteElementA, ConcreteElementC, ConcreteElementB } 
```

我想要的是我可以这样做`ConcreteContainer.ConcreteElementCs.Add(new ConcreteElementC())`，这将导致：

```
Elements = { ConcreteElementA, ConcreteElementA, ConcreteElementC, ConcreteElementB, ConcreteElementC } 
```

**附加编辑**

经过一番困惑，我想将我的问题改写如下：我有一个集合`List<Element> OriginalCollection`。我想创建一个包含实现 Element、ConcreteElement 的元素的子集集合，并以一种也被修改`List<ConcreteElement> Subset`的方式添加到该集合中。`OriginalCollection`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:25:36.330

听起来您的`ElementContainer`界面应该是通用的：

```
interface ElementContainer<T> : Element where T : Element
{
    List<T> Elements { get; }
} 
```

然后：

```
class SpecificElementContainer : ElementContainer<SpecificElement>
{
    List<SpecificElement> Elements { get; private set; }
} 
```

# c# - 订阅 DataTemplate 中控件事件的最佳实践？

> ID：14876953
> 
> 赞同：0
> 
> 时间：2013-02-14T14:24:13.633
> 
> 标签：c#, wpf, xaml

我有`ControlTemplate`一个自定义控件，它看起来像这样（简化）：

```
<ControlTemplate TargetType="CustomControl">
    <Grid>
        <Grid.Resources>
            <DataTemplate TargetType="CustomClassA">
                <TextBlock Text={Binding ClassASpecificProperty}" />
            </DataTemplate>

            <DataTemplate TargetType="CustomClassB">
                <TextBlock Text={Binding ClassBSpecificProperty}" />
            </DataTemplate>
        </Grid.Resources>

        <ContentControl Content="{TemplateBinding Content}" />
    </Grid>
</ControlTemplate> 
```

这样做的美妙之处在于，特定的`Content`，取决于其类型（A 或 B），以不同的方式显示，由`DataTemplate`为每种类型定义的 s 引起。

然而。有时不只是`TextBlock`s。想象一下这些数据模板中有按钮。有时您想`Click`使用某些方法订阅事件。但是这些控件模板通常在 . 中`ResourceDictionary`，因此没有*代码*用于放置相应`Click`处理程序的方法。

我看到了三种不同的解决方案：

*   创建带有附加文件代码的 CustomResourceDictionary
*   覆盖`OnApplyTemplate`方法（不过我不太明白）并以编程方式订阅事件
*   在“ViewModel”中处理附加消息并处理 UI 逻辑。*丑陋的！*

实现这一目标的最佳实践是什么？还是有什至“更好”的解决方案？那么性能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:01:02.983

您可以使用[DelegateCommand](http://wpftutorial.net/DelegateCommand.html)将您的按钮和诸如此类的东西绑定到 ViewModel 中的命令。

```
<Button Command="{Binding MyCommand}"/> 
```

视图模型：

```
public DelegateCommand MyCommand {get;set;} //INotifyPropertyChanged, etc.

private void ExecuteMyCommand()
{
    //Do stuff here.
}

public MyViewModel()
{
    MyCommand = new DelegateCommand(ExecuteMyCommand);
} 
```

# objective-c - 可可 NSTextView 文本未显示

> ID：14876956
> 
> 赞同：1
> 
> 时间：2013-02-14T14:24:26.910
> 
> 标签：objective-c, cocoa

我的头文件中有一个`IBOutlet`设置。我的窗口里也有一个`NSTextField`对象。我尝试使用以下方法对其进行编辑：

```
[_chapterContent insertText:@"Hi"]; 
```

我有一个运行它的功能，但它没有出现。为什么？我错过了什么吗？

在我的头文件中，我有：

```
@property (unsafe_unretained) IBOutlet NSTextView *chapterContent; 
```

在我的实现文件中：

```
[_chapterContent insertText:@"Hi"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:29:27.123

尝试：

`[self.chapterContent insertText:@"Hi"]`

代替

`[_chapterContent insertText:@"Hi"]`.

希望它有所帮助

# javascript - 获取 mongoDB 中相邻文档之间的差异

> ID：14876959
> 
> 赞同：4
> 
> 时间：2013-02-14T14:24:37.670
> 
> 标签：javascript, mongodb, mongodb-query

如何使用javascript获取mongoDB中相邻记录之间的差异？例如，如果我在一个集合中有以下三个文档：

```
{
    "_id" : ObjectId("50ed90a55502684f440001ac"),
    "time" : ISODate("2013-02-13T15:45:41.148Z")
}

{
    "_id" : ObjectId("50ed90a55502684f440001ad"),
    "time" : ISODate("2013-02-13T15:45:42.148Z")
}

{
    "_id" : ObjectId("50ed90a55502684f440001ae"),
    "time" : ISODate("2013-02-13T15:45:45.148Z")
} 
```

我想取相邻值之间“时间”字段的差异来获得：

```
{
    "_id" : ObjectId("50ed90a55502684f440001ac"),
    "time" : ISODate("2013-02-13T15:45:41.148Z"),
    "time_difference" : null
}

{
    "_id" : ObjectId("50ed90a55502684f440001ad"),
    "time" : ISODate("2013-02-13T15:45:42.148Z"),
    "time_difference" : 1
}

{
    "_id" : ObjectId("50ed90a55502684f440001ae"),
    "time" : ISODate("2013-02-13T15:45:45.148Z"),
    "time_difference" : 3
} 
```

关于如何在 javascript/mongoDB 中有效地做到这一点的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-03-09T08:31:54.617

我不知道七年前问这个问题的时候是不是真的，但这完全可以在聚合框架内解决。假设集合名称为`AdjacentDocument`，则以下聚合将获得您要查找的结果：

```
db.AdjacentDocument.aggregate(
    {$sort: {time: 1}},
    {$group: {_id: 0, document: {$push: '$$ROOT'}}},
    {$project: {documentAndPrevTime: {$zip: {inputs: ['$document', {$concatArrays: [[null], '$document.time']}]}}}},
    {$unwind: {path: '$documentAndPrevTime'}},
    {$replaceWith: {$mergeObjects: [{$arrayElemAt: ['$documentAndPrevTime', 0]}, {prevTime: {$arrayElemAt: ['$documentAndPrevTime', 1]}}]}},
    {$set: {time_difference: {$trunc: [{$divide: [{$subtract: ['$time', '$prevTime']}, 1000]}]}}},
    {$unset: 'prevTime'}
); 
```

# 聚合管道演练

首先，文档从最旧到最新排序。它们被分组到一个文档中，文档存储在有序数组字段中：

```
{$sort: {time: 1}},
{$group: {_id: 0, document: {$push: '$$ROOT'}}}

/*
{
    "_id" : 0,
    "document" : [
        {
            "_id" : ObjectId("50ed90a55502684f440001ac"),
            "time" : ISODate("2013-02-13T15:45:41.148Z")
        },
        {
            "_id" : ObjectId("50ed90a55502684f440001ad"),
            "time" : ISODate("2013-02-13T15:45:42.148Z")
        },
        {
            "_id" : ObjectId("50ed90a55502684f440001ae"),
            "time" : ISODate("2013-02-13T15:45:45.148Z")
        }
    ]
}
*/ 
```

接下来，将之前的时间压缩到文档数组中，创建一个数组`[document, previousTime]`：

```
{$project: {documentAndPrevTime: {$zip: {inputs: ['$document', {$concatArrays: [[null], '$document.time']}]}}}}

/*
{
    "_id" : 0,
    "documentAndPrevTime" : [
        [
            {
                "_id" : ObjectId("50ed90a55502684f440001ac"),
                "time" : ISODate("2013-02-13T15:45:41.148Z")
            },
            null
        ],
        [
            {
                "_id" : ObjectId("50ed90a55502684f440001ad"),
                "time" : ISODate("2013-02-13T15:45:42.148Z")
            },
            ISODate("2013-02-13T15:45:41.148Z")
        ],
        [
            {
                "_id" : ObjectId("50ed90a55502684f440001ae"),
                "time" : ISODate("2013-02-13T15:45:45.148Z")
            },
            ISODate("2013-02-13T15:45:42.148Z")
        ]
    ]
}
*/ 
```

接下来，展开文档和时间数组，为每个初始文档创建一个文档：

```
{$unwind: {path: '$documentAndPrevTime'}}

/*
{
    "_id" : 0,
    "documentAndPrevTime" : [
        {
            "_id" : ObjectId("50ed90a55502684f440001ac"),
            "time" : ISODate("2013-02-13T15:45:41.148Z")
        },
        null
    ]
}
{
    "_id" : 0,
    "documentAndPrevTime" : [
        {
            "_id" : ObjectId("50ed90a55502684f440001ad"),
            "time" : ISODate("2013-02-13T15:45:42.148Z")
        },
        ISODate("2013-02-13T15:45:41.148Z")
    ]
}
{
    "_id" : 0,
    "documentAndPrevTime" : [
        {
            "_id" : ObjectId("50ed90a55502684f440001ae"),
            "time" : ISODate("2013-02-13T15:45:45.148Z")
        },
        ISODate("2013-02-13T15:45:42.148Z")
    ]
}
*/ 
```

接下来，我们将文档替换为文档数组元素的值，并与上一个时间元素合并（如果它是初始索引，则使用 null）：

```
{$replaceWith: {$mergeObjects: [{$arrayElemAt: ['$documentAndPrevTime', 0]}, {prevTime: {$arrayElemAt: ['$documentAndPrevTime', 1]}}]}}

/*
{
    "_id" : ObjectId("50ed90a55502684f440001ac"),
    "time" : ISODate("2013-02-13T15:45:41.148Z"),
    "prevTime" : null
}
{
    "_id" : ObjectId("50ed90a55502684f440001ad"),
    "time" : ISODate("2013-02-13T15:45:42.148Z"),
    "prevTime" : ISODate("2013-02-13T15:45:41.148Z")
}
{
    "_id" : ObjectId("50ed90a55502684f440001ae"),
    "time" : ISODate("2013-02-13T15:45:45.148Z"),
    "prevTime" : ISODate("2013-02-13T15:45:42.148Z")
}
*/ 
```

`time_difference`最后，我们通过将 设置为两个时间字段的差异并删除临时字段来更新文档`prevTime`。由于两个日期之间的差异以毫秒为单位，并且您的示例使用秒，因此我们通过除以 1000 并截断来计算秒数。

```
{$set: {time_difference: {$trunc: [{$divide: [{$subtract: ['$time', '$prevTime']}, 1000]}]}}},
{$unset: 'prevTime'}

/*
{
    "_id" : ObjectId("50ed90a55502684f440001ac"),
    "time" : ISODate("2013-02-13T15:45:41.148Z"),
    "time_difference" : null
}
{
    "_id" : ObjectId("50ed90a55502684f440001ad"),
    "time" : ISODate("2013-02-13T15:45:42.148Z"),
    "time_difference" : 1
}
{
    "_id" : ObjectId("50ed90a55502684f440001ae"),
    "time" : ISODate("2013-02-13T15:45:45.148Z"),
    "time_difference" : 3
}
*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T14:45:13.087

您需要在此处确保的一件事是您对要用于装饰记录的查询进行了排序。如果不使用排序，它实际上将使用查找顺序，这不是`$natural`顺序。

查询之间的查找顺序可能不同，因此如果您在 2 分钟内运行两次查询，您可能会发现它们不会返回相同的顺序。但是，您的查询似乎会在逻辑上排序`tiem_difference`。

还应该注意，这是不可能通过正常查询实现的。我也看不到通过聚合框架执行此操作的简单方法。

因此，似乎下一个可行的方法是使用多个查询或客户端处理。使用上面@Marlon 定义的函数，客户端处理可能会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T14:32:23.010

有一件事，我想澄清你。与 MYSQL 不同，MongoDB 不保证该位置。我的意思是，MongoDB 会在不同的时间给你不同的排序。因此，在每次阅读时比较相邻文件可能会给出不同的结果。

如果您对此感到满意并且想要进行比较，请尝试使用 MongoDB 的 MapReduce [http://docs.mongodb.org/manual/applications/map-reduce/](http://docs.mongodb.org/manual/applications/map-reduce/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T14:42:59.183

假设这 3 个对象在一个数组中通过，您可以执行以下操作：

```
var prevTime;
var currentTime;

for(var i = 0; i < records.length; i++)
{
    currentTime = new Date(records[i].time).getTime();
    records[i].time_difference = currentTime - prevTime;
    prevTime = currentTime;
} 
```

当然，您需要交换位以使其使用来自 mongo 的记录。

如果您需要进行更复杂的日期计算，我强烈建议您查看[datejs](http://www.datejs.com/)（如果需要，您可以获取节点包装器）。

# zebra-printers - 斑马打印机 LP 2824 不打印

> ID：14876961
> 
> 赞同：0
> 
> 时间：2013-02-14T14:24:41.247
> 
> 标签：zebra-printers

我有 Zebra LP2824 打印机。它在 Windows XP 上工作正常，但在 Windows 7 上工作不正常。在 Windows 7 上，它在打印机属性上打印测试页，但在我的应用程序中没有打印。看来，它找不到端口，打印机正在使用。在同一个应用程序上，但在 Windows XP 上它正在打印。我正在用 USB 连接打印机。
有谁知道似乎是什么问题？

提前感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T05:06:24.967

我通常必须共享打印机才能让它接受打印作业。我认为在 Win 7 中共享有点不同 - 可能不止一步。打开打印机队列并暂停它，然后向它发送打印作业 - 查看它是否显示（然后取消暂停）如果它没有显示在队列中，则可能存在共享/权限问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:30:38.873

我今天刚刚管理它在另一台斑马 USB 打印机上打印。

使用这篇文章：http: [//support.microsoft.com/kb/322091/nl](http://support.microsoft.com/kb/322091/nl)

注意面团样本有一个小错误，所以去这个函数

```
 public static bool SendFileToPrinter( string szPrinterName, string szFileName )
    ...
    .. 
```

在那里转到该函数的末尾并添加我在下面提到的行

```
 Marshal.FreeCoTaskMem(pBytes);
    fs.close(); // <-- add that or it will crash with locked files errors.
    return true; 
```

Zebra 打印机的工作方式很大程度上取决于您尝试打​​印的内容以及程序的工作方式，例如记事本和 edlin 以及写字板和 dos PRINT 的工作方式都不同。一些程序直接打印 RAW（如 url 代码所做的那样），另一些程序则尊重打印机首选项 > 仍然生成包含 ZPL 命令的原始 TXT 文件打印将否决打印机设置..

ZPL 本身就是一场噩梦 如果你需要剪纸 你将需要 ^MMC

你不会在他们的手册中找到这样的解释。（因为我认为他们出售自己的标签打印设计软件..）

# data-structures - 不可变数据结构中的循环引用

> ID：14876962
> 
> 赞同：0
> 
> 时间：2013-02-14T14:24:43.497
> 
> 标签：data-structures, immutability

我正在尝试创建一个不可变的 dat 结构，它是任务列表。我希望每个任务都有对列表的引用，并且列表将返回所有任务并具有当前任务属性。

问题是如何从任务到列表以及从列表到任务的循环引用并且仍然具有不可变的数据结构？

如果我首先创建任务，我将无法引用列表，因为它还不存在，如果我采用另一种方式 - 首先创建列表，我将不得不更改它以便将任务添加到其中。

谢谢你，伊多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:31:04.823

我很确定您可以创建列表，并在构造函数中构造列表项，同时将列表作为参数传递给它们。

伪代码：

```
List constructor:
  List()
  {
    for each item to add
      add(new Item(this));
  }

Item constructor:
  Item(List list)
  {
    this.list = list;
  } 
```

然而，这有点破坏模块化，因为列表构造函数必须处理所有逻辑来创建项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:31:14.677

您不能同时创建列表和任务，因此您必须先创建一个。在某些时候，您会从一个空列表开始（例如，在列表的构造函数中，或其他地方）。

给定空列表，您可以创建任务：例如在列表的构造函数中，或者在列表中的方法中。您可以将对列表的引用传递给任务的构造函数。然后将任务添加到列表中，因此列表将引用该任务。

# sql - 清除 Oracle 数据库记录

> ID：14876965
> 
> 赞同：0
> 
> 时间：2013-02-14T14:25:02.530
> 
> 标签：sql, oracle, database-administration, purge

考虑这张表：

```
Table: ORDER [Columns: ID (PK), Order_Num, etc...]
Child Tables: ORDER_ITEMS, ORDER_TRANSACTIONS, ORDER_PAYMENTS, ORDER_TRANSPORT, and many more etc. 
```

所有子表都有指向 ORDER 表主键的外键。而且数据量很大。

现在，我必须清除一些订单。虽然我删除了正确顺序中的记录，即先删除子表，然后再删除订单表——运行这个特定的查询需要非常非常长的时间（15 分钟）（对于单个订单 ID）：

```
DELETE FROM ORDER WHERE ID='whatever' 
```

DBA 说这可能是因为子表依赖项 - （FK 检查），并且子表本身包含大量记录 -​​ 因此需要时间（即使最终会满足所有依赖项 - 因为子记录被预先明确删除）。

我有什么选择：

1.  我可以在主 ORDER 表上执行 DELETE 之前禁用子表中的 FK 关系吗？我怎样才能轻松做到这一点。

2.  还有其他方法告诉 Oracle 不检查依赖项吗？
    还是有其他想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:37:49.033

这很可能是因为您有[未索引的外键](https://stackoverflow.com/questions/1327190/oracle-delete-query-taking-too-much-time)。

您首先删除了子表，但同时其他一些事务可能已经插入了数据，因此当您从父表中删除时，Oracle 必须再次检查。

如果外键没有与索引配对，Oracle 必须锁定整个子表，以确保没有其他并发未提交事务插入潜在的孤儿。

获取此锁可能需要很长时间，即使在小型繁忙表上也是如此。

[添加索引](http://tkyte.blogspot.fr/2009/10/httpasktomoraclecomtkyteunindex.html)解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:33:07.443

[如何使索引不可用然后在索引中重建](https://stackoverflow.com/questions/8534114/how-to-make-index-unusable-and-then-rebuilt-in-index)

据我所知，此链接应该可以帮助您使索引无法使用，停止 oracle 以检查约束。所以它可能会帮助你。使您的索引不可用，删除记录，然后重建索引。

# java - Lambda 和 putIfAbsent

> ID：14876967
> 
> 赞同：7
> 
> 时间：2013-02-14T14:25:09.050
> 
> 标签：java, lambda, java-8

[我在这里](https://stackoverflow.com/a/14851827/823393)发布了一个答案，其中代码演示了read`putIfAbsent`方法的使用：`ConcurrentMap`

```
ConcurrentMap<String, AtomicLong> map = new ConcurrentHashMap<String, AtomicLong> ();

public long addTo(String key, long value) {
  // The final value it became.
  long result = value;
  // Make a new one to put in the map.
  AtomicLong newValue = new AtomicLong(value);
  // Insert my new one or get me the old one.
  AtomicLong oldValue = map.putIfAbsent(key, newValue);
  // Was it already there? Note the deliberate use of '!='.
  if ( oldValue != newValue ) {
    // Update it.
    result = oldValue.addAndGet(value);
  }
  return result;
} 
```

这种方法的主要缺点是您必须创建一个新对象以放入地图中，无论它是否会被使用。如果物体很重，这可能会产生重大影响。

我突然想到这将是一个使用 Lambdas 的机会。我还没有下载 Java 8，或者直到它正式发布（公司政策）之前我才能下载，所以我无法对此进行测试，但这样的东西是否有效？

```
public long addTo(String key, long value) {
  return map.putIfAbsent( key, () -> new AtomicLong(0) ).addAndGet(value);
} 
```

我希望使用 lambda 来延迟对 的评估，`new AtomicLong(0)`直到它实际确定应该创建它，因为它在地图中不存在。

如您所见，这更加简洁和实用。

基本上我想我的问题是：

1.  这行得通吗？
2.  还是我完全误解了 lambda？
3.  有一天这样的事情可能会奏效吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-16T17:59:36.460

**更新 2015-08-01**

[Java SE 8](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html#computeIfAbsent-K-java.util.function.Function-)`computeIfAbsent`中确实添加了如下所述的方法。语义似乎非常接近预发布版本。

此外，界面`computeIfAbsent`中还添加了一大堆新的默认方法。`Map`当然，地图一般不支持原子更新，但新方法为 API 增加了相当大的便利。

* * *

您尝试做的事情非常合理，但不幸的是它不适用于当前版本的`ConcurrentMap`. 然而，增强功能正在进行中。新版本的并发库包括`ConcurrentHashMapV8`其中包含一个新方法`computeIfAbsent`。这几乎可以让你做你想做的事。使用这种新方法，您的示例可以重写如下：

```
public long addTo(String key, long value) {
    return map.computeIfAbsent( key, () -> new AtomicLong(0) ).addAndGet(value);
} 
```

有关 的更多信息`ConcurrentHashMapV8`，请参阅 Doug Lea在并发兴趣邮件列表上的[初始公告线程。](http://cs.oswego.edu/pipermail/concurrency-interest/2011-August/008176.html)线程中的几条消息是[后续消息](http://cs.oswego.edu/pipermail/concurrency-interest/2011-August/008193.html)，它显示了一个与您尝试执行的操作非常相似的示例。（但请注意旧的 lambda 语法。该消息毕竟来自 2011 年 8 月。）这里是[最近的 javadoc](http://gee.cs.oswego.edu/dl/jsr166/dist/jsr166edocs/jsr166e/ConcurrentHashMapV8.html#computeIfAbsent%28K,%20jsr166e.ConcurrentHashMapV8.Fun%29) for `ConcurrentHashMapV8`.

这项工作旨在集成到 Java 8 中，但据我所知还没有。此外，这仍在进行中，名称和规格可能会更改等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T14:58:45.150

`AtomicLong`并不是真正的重物。对于较重的对象，我会考虑使用惰性代理，并在需要时为该代理提供 lambda 以创建对象。

```
class MyObject{
    void doSomething(){}
}

class MyLazyObject extends MyObject{
    Funktion create;
    MyLazyObject(Funktion create){
        this.create = create;
    }
    MyObject instance;
    MyObject getInstance(){
        if(instance == null)
            instance = create.apply();
        return instance;
    }
    @Override void doSomething(){getInstance().doSomething();}
}

public long addTo(String key, long value) {
  return map.putIfAbsent( key, new MyLazyObject( () -> new MyObject(0) ) );
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T14:36:00.193

不幸的是，这并不那么容易。您勾勒出的方法有两个主要问题： 1\. 映射的类型需要从 to 更改`Map<String, AtomicLong>`（`Map<String, AtomicLongFunction>`其中`AtomicLongFunction`一些函数接口具有一个不带参数并返回的单一方法`AtomicLong`）。2\. 当您从地图中检索元素时，您需要每次都应用该功能才能`AtomicLong`摆脱它。这将导致每次检索它时都会创建一个新实例，这可能不是您想要的。

不过，拥有一个按需运行函数来填充缺失值的地图的想法是一个不错的想法，事实上，谷歌的 Guava 库有一个地图可以做到这一点。看看他们的[MapMaker](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/MapMaker.html)。事实上，代码将从 Java 8 lambda 表达式中受益：而不是

```
 ConcurrentMap<Key, Graph> graphs = new MapMaker()
       .concurrencyLevel(4)
       .weakKeys()
       .makeComputingMap(
           new Function<Key, Graph>() {
             public Graph apply(Key key) {
               return createExpensiveGraph(key);
             }
           }); 
```

你可以写

```
 ConcurrentMap<Key, Graph> graphs = new MapMaker()
       .concurrencyLevel(4)
       .weakKeys()
       .makeComputingMap((Key key) -> createExpensiveGraph(key)); 
```

或者

```
 ConcurrentMap<Key, Graph> graphs = new MapMaker()
       .concurrencyLevel(4)
       .weakKeys()
       .makeComputingMap(this::createExpensiveGraph); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-02T04:06:41.020

请注意，使用 Java 8`ConcurrentHashMap`完全没有必要拥有`AtomicLong`值。您可以安全地使用[ConcurrentHashMap.merge](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html#merge-K-V-java.util.function.BiFunction-)：

```
ConcurrentMap<String, Long> map = new ConcurrentHashMap<String, Long>();

public long addTo(String key, long value) {
    return map.merge(key, value, Long::sum);
} 
```

它更简单，也更快。

# ruby-on-rails-3 - Mongoid 动态查询

> ID：14876970
> 
> 赞同：2
> 
> 时间：2013-02-14T14:25:21.030
> 
> 标签：ruby-on-rails-3, mongoid

这一定很简单，但我被困住了......所以我将 Rails#3 与 Mongoid 一起使用，并希望动态构建取决于传递参数的查询，**然后**执行 find()。就像是

```
def select_posts
    query = :all # pseudo-code here
    if (params.has_key?(:author))
        query += where(:author => params[:author]) # this is pseudo-code again
    end

    if (params.has_key?(:post_date))
        query += where(:create_date => params[:post_date]) # stay with me
    end

    @post_bodies = []
    Post.find(query).each do |post| # last one
        @post_bodies << post.body
    end

    respond_to do |format|
        format.html
        format.json { render :json => @post_bodies }
    end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-16T12:22:26.620

您有几个不同的选项可供选择 - 取决于您的实际应用程序将变得多么复杂。直接使用您的示例-您最终可能会得到以下结果：

```
query = Post.all
query = query.where(:author => params[:author]) if params.has_key?(:author)
query = query.where(:create_date => params[:post_date]) if params.has_key?(:post_date)
@post_bodies = query.map{|post| post.body} 
```

之所以有效，是因为 Mongoid 中的查询（标准）是可链接的。

* * *

或者，如果您要拥有更多希望利用的字段，您可以执行以下操作：

```
query = Post.all
fields = {:author => :author, :post_date => :create_date}
fields.each do |params_field, model_field|
  query = query.where(model_field => params[params_field]) if params.has_key?(params_field)
end
@post_bodies = query.map{|post| post.body} 
```

* * *

最后，您可以更进一步并正确嵌套表单参数，并命名参数以使它们与您的模型匹配，以便您的`params`对象看起来像这样：

```
params[:post] = {:author => "John Smith", :create_date => "1/1/1970", :another_field => "Lorem ipsum"} 
```

然后你可以这样做：

```
@post_bodies = Post.where(params[:post]).map{|post| post.body} 
```

当然，对于最后一个示例，您需要清理输入字段 - 以防止恶意用户篡改行为。

# android - 方法get(类 ) 在 ObjectGraph 类型中不适用于参数

> ID：14876972
> 
> 赞同：0
> 
> 时间：2013-02-14T14:25:25.460
> 
> 标签：android, dagger

我试图在我的 android 项目中添加一些依赖注入，所以下面的例子我发现我创建了我的模块

```
@Module(entryPoints = {MyActivity.class})

public class MyModule {

    private final Context context;

    public MyModule (Context context) {
        this.context = context.getApplicationContext();
    }

    @Provides
    @Singleton
    Context applicationContext() {
        return context;
    }

    @Provides
    @Singleton
    EventBus provideEventBus() {
        return EventBusFactory.create();
    }
} 
```

我有我的申请：

```
public class MyApplication extends Application{

    private ObjectGraph objectGraph;

    @Override
    public void onCreate() {
        super.onCreate();
        objectGraph = ObjectGraph.get(new MyModule(this));
    }

    public ObjectGraph getObjectGraph() {
        return objectGraph;
    }
} 
```

和活动

```
public class MyActivity extends Activity {

    @App
    MyApplication application;

    @Inject
    EventBus eventBus;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ObjectGraph objectGraph = application.getObjectGraph();
        objectGraph.inject(this);
    .... 
```

我不确定我做错了什么或错过了什么，但我的日食显示错误：

> ObjectGraph 类型中的方法 get(Class) 不适用于参数 (MyModuleModule)

在这一行`objectGraph = ObjectGraph.get(new MyModule(this));`

当我尝试构建时，我得到：

> my.android.app.MyActivity 不需要为 my.android.lib.EventBus 绑定 my.android.app.MyModule

有谁可以告诉我我做错了什么以及我忘记了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T14:33:18.623

ObjectGraph 类的实例可以通过调用 create() 静态方法获得。

尝试

```
objectGraph = ObjectGraph.create(new MyModule(this)); 
```

对于绑定错误，您必须将 EventBus 库添加到您的构建类路径中。

# java - Spring Security：需要 HTTPS 时重定向到不同的主机

> ID：14876973
> 
> 赞同：0
> 
> 时间：2013-02-14T14:25:30.600
> 
> 标签：java, spring, web-applications, spring-security, mod-jk

我对 Spring Security HTTPS 重定向策略有疑问。首先是配置：

1.  Spring 3 Java Web 应用程序
2.  apache与jk连接后的tomcat
3.  弹簧安全 3

使用客户端直接连接到 tomcat 的配置（即没有 jk），我看到 https 是通过配置 security.xml 文件使用安全端口重定向管理的，如下所示：

```
<http>
   <intercept-url pattern="/secure/**" access="ROLE_USER" requires-channel="https"/>
   ...
</http> 
```

现在，问题来了：在 apache (with jk) 之后使用 tomcat 安全部分位于不同的主机上，因此我有以下内容

*   http（非安全主机）：www.myhost.com
*   https（安全主机）：ssl.myhost.com

我想知道是否可以配置 spring security 以在需要 https 的情况下重定向到安全主机。我看到有一个端口映射配置可用，但我没有看到主机的类似配置。

```
<http>
  ...
  <port-mappings>
    <port-mapping http="9080" https="9443"/>
  </port-mappings>
</http> 
```

提前致谢。

PS。双重主机配置是由托管服务强加的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:53:30.090

默认行为的实现是一个简单的重定向到具有 https 前缀的相同 URI，这是`RetryWithHttpsEntryPoint`由`SecureChannelProcessor`. 您可以通过编写`AbstractRetryEntryPoint`不仅更改协议而且更改主机名的自定义来轻松实现所需的行为。

实现该类后`ChannelProcessingFilter`，根据其 javadoc 中给出的示例对其进行配置：http: [//static.springsource.org/spring-security/site/docs/3.1.3/apidocs/org/springframework/安全/web/access/channel/ChannelProcessingFilter.html](http://static.springsource.org/spring-security/site/docs/3.1.3/apidocs/org/springframework/security/web/access/channel/ChannelProcessingFilter.html)

# jquery - 如何使 jQuery 等列脚本在窗口调整大小时运行？

> ID：14876974
> 
> 赞同：1
> 
> 时间：2013-02-14T14:25:34.617
> 
> 标签：jquery, resize, window-resize, equal-heights

我正在运行一个 jQuery 脚本来在多行中连续设置相等高度的 div。

这是我正在使用的代码摘录的链接[http://jsfiddle.net/F8QHd/2/](http://jsfiddle.net/F8QHd/2/)

对于脚本，我在 CSS Tricks [http://css-tricks.com/equal-height-blocks-in-rows/的这篇文章中使用了该技术](http://css-tricks.com/equal-height-blocks-in-rows/)

谁能告诉我如何修改脚本，以便在调整窗口大小时它仍然可以工作？目前，它适用于页面加载，但我不知道如何根据窗口调整大小来触发它。该脚本使用`$(window).resize(function() {} );`，所以我不确定为什么这不起作用？

任何帮助将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-14T14:30:00.880

我看不出它不起作用。您将设置调整大小然后触发它，以便它在加载时工作而不复制该指令。

```
$(window).resize(function() {
    columnConform();
}).trigger('resize'); 
```

只需注意一点 - 均衡元素会导致窗口改变大小，当它在它稳定之前递归几次时你会遇到问题。我通过在等高函数上添加超时来解决这个问题。

我已经为 jquery 编写了一个类似的扩展。如果您有兴趣，这里 [是流体宽度元素的等高行](https://stackoverflow.com/questions/14167277/equal-height-rows-for-fluid-width-elements/14167351#comment20553141_14167351)

# php - Symfony2 和 FormBuilder：如何获取在构建器中添加的元素编号

> ID：14876977
> 
> 赞同：0
> 
> 时间：2013-02-14T14:25:41.123
> 
> 标签：php, symfony, controller, twig

我有一个表单构建器，我在其中添加了来自实体的一些值：

```
$builder->add('affiliation', 'entity', array(
    'class' => 'SciForumVersion2Bundle:UserAffiliation',
    'multiple' => true,
    'expanded' => true,
    'query_builder' => function(EntityRepository $er) use ($author,$user) {
     return $er->createQueryBuilder('ua')
        ->where("ua.user_id = {$user->getId()}")
        ->andWhere("ua.affiliation_id not in ( select pa.affiliation_id FROM SciForumVersion2Bundle:PersonAffiliation pa where pa.person_id = {$author->getPersonId()} )");
     },
     'required'  => true,
)); 
```

在我的控制器中，我想检查我的表单中是否有东西。如果有东西，我会显示一个视图，如果没有，我会显示另一个视图。

这可能吗？如果可以，怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:06:33.310

简单地尝试一下：

```
$data = $form->getData() 
```

[函数 getData() 文档书](http://symfony.com/doc/current/book/forms.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T13:05:43.457

如果您想在您的表单类型中获取当前数据（仅在呈现表单之后），您可以`builder`按标准使用每种表单类型中提供的数据。

它与正常的表单响应完全相同，因此您可以使用：

`$builder->getData();`

并使用 if 子句根据您要生成的内容添加不同的字段。

# javascript - Backbone LayoutManager 重新渲染子视图

> ID：14876978
> 
> 赞同：3
> 
> 时间：2013-02-14T14:25:42.160
> 
> 标签：javascript, backbone.js, backbone-views, backbone-boilerplate, backbone-layout-manager

我将 BBB 与出色的 LayoutManager 一起用于视图。不幸的是，我找不到重新渲染特定子视图的方法。这是我的设置：

```
Home.Views.Layout = Backbone.Layout.extend({
    template: "home/home",
    el: "#main",
    views: {
        "#left-menu-container": new Home.Views.Leftmenu(),
        "#searchbox": new Home.Views.Searchbox(),
        "#content": new Home.Views.Content()
    }
});

Home.HomeView = new Home.Views.Layout();
Home.HomeView.render();

Home.Views.AddEditPatient = Backbone.View.extend({
    template: "......",
    events: {
        'click .dosomething': 'dosomething'
    },
    dosomething: function(){
        // [dosomething]

        // Only Render Sub-View, e.g. #content here...
   }
}); 
```

我不想重新渲染整个布局，再次调用 Home.HomeView.render() 会发生什么，但是我如何才能在此设置中仅渲染子视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:33:57.287

我想你想用backbone.layoutmanager添加做这样的事情

`thisLayout.setView("#content", new View()).render();`

骨干网.layoutmanager v0.6.6 文档可能会有所帮助 [http://documentup.com/tbranyen/backbone.layoutmanager/#usage/nested-views](http://documentup.com/tbranyen/backbone.layoutmanager/#usage/nested-views)

另请查看 [http://vimeo.com/32765088](http://vimeo.com/32765088)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T14:58:30.170

如果我正确理解您的问题，您可以在 dosomething 函数中执行此操作：

```
this.$("#divToRenderTo").html(new subView().render().$el); 
```

一定要“return this”；在子视图的渲染功能结束时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-13T00:38:23.357

我通常使用 layoutmanager 执行此操作有两种方法：

1.  在初始化函数中实例化视图，然后将它们放入 beforeRender 中的视图中。这使您的视图可以访问子视图，以便您可以直接渲染它。

    ```
    initialize: function() {
        this.subview = new SubView();
    },
    beforeRender: function() {
        this.insertView(this.subview);
    },
    doSomething: function() {
        this.subview.render();
    } 
    ```

2.  您可以使用`view.getView(#selector)`返回嵌入的视图，然后在其上调用渲染。

    ```
    doSomething: function() {
        this.getView('#content').render();
    } 
    ```

# nuget - Nuget 包还原不尊重我的存储库路径配置？

> ID：14876981
> 
> 赞同：5
> 
> 时间：2013-02-14T14:26:08.173
> 
> 标签：nuget

我的解决方案中有以下设置`.nuget/Nuget.Config`：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <solution>
    <add key="disableSourceControlIntegration" value="true" />
  </solution>
  <config>
    <add key="repositoryPath" value="C:\Xos\packages\" />
  </config>
</configuration> 
```

这样做的目的是尝试使 Nuget 包恢复易于管理，并在我们的许多解决方案中共享包。然后我进入我当前解决方案的包目录并删除了所有包（因此他们会将它们恢复到`C:\Xos\packages`）。然后我关闭了 VS 2012 并重新加载了解决方案并重新构建。

但是，我的所有包都在我的解决方案的包目录中恢复，而不是在 repositoryPath 配置中指定的目录。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-03T07:32:39.423

我对 VS2015 RC 也有同样的问题。有两件事之一突然使它起作用：

（1）我从源代码管理中签出项目文件，并**完全关闭**了Visual Studio（不仅仅是解决方案）。

(2) 我编辑了 csproj 文件并注意到 for 的条目`packages.config`有一个`<SubType>Designer</SubType>`内部标记，我将其删除。

我怀疑这是 Visual Studio 的关闭...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T14:53:11.460

这似乎是[一个错误](http://nuget.codeplex.com/workitem/1990)，已在 2.3 中修复（似乎尚未发布）。

`Nuget.Targets`在那之前，我按照那个错误中的描述修改了我的，现在就使用它。

# magento - 从后端将 Wiget 实例添加到右列

> ID：14876985
> 
> 赞同：0
> 
> 时间：2013-02-14T14:26:33.873
> 
> 标签：magento, magento-1.7

我是 Magento 的新手，正在定制 Modern 模板，因为它接近我的终极设计。但是我注意到由于某种原因，3 列模板中的第 3 列被注释掉了：

**/frontend/default/modern/template/page/3columns.phtml** *[第 43-55 行]*

```
<div class="main-container col2-left-layout">
        <div class="main">
            <?php echo $this->getChildHtml('breadcrumbs') ?>
            <?php /*<div class="col-wrapper">*/ ?>
                <div class="col-main">
                    <?php echo $this->getChildHtml('global_messages') ?>
                    <?php echo $this->getChildHtml('content') ?>
                </div>
                <div class="col-left sidebar"><?php echo $this->getChildHtml('left') ?></div>
            </div>
            <?php /*<div class="col-right sidebar"><?php echo $this->getChildHtml('right') ?></div>*/ ?>
        <?php /*</div>*/ ?>
    </div> 
```

我将其复制到我自己的主题中，并对其进行了如下修改：

**/frontend/my_package/my_theme/template/page/3columns.phtml**

```
<div class="main-container col3-layout"> <-------
        <div class="main">
            <?php echo $this->getChildHtml('breadcrumbs') ?>
           <div class="col-wrapper"> <-------
                <div class="col-main">
                    <?php echo $this->getChildHtml('global_messages') ?>
                    <?php echo $this->getChildHtml('content') ?>
                </div>
                <div cla/ss="col-left sidebar"><?php echo $this->getChildHtml('left') ?></div>
            </div>
            <div class="col-right sidebar"><?php echo $this->getChildHtml('right') ?></div> <-------
       </div> <-------
    </div>
    <?php echo $this->getChildHtml('footer') ?>
    <?php echo $this->getChildHtml('before_body_end') ?>
</div> 
```

在后端，我用纯文本创建了一个静态块，并尝试将其添加到“所有页面”、“右栏”；但它没有出现。如果我将它添加到“所有页面”、“左栏”，它*会*显示出来。

我猜测 Right Column 引用在 Magento 中不正确，但我什至不知道从哪里开始寻找修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:53:10.653

您应该在您的`page.xml`（或您的自定义`local.xml`）中引用右列以使其正常工作。

查看这篇 Classylama 文章，了解如何以正确的方式实现它：

[http://www.classyllama.com/development/magento-development/the-better-way-to-modify-magento-layout](http://www.classyllama.com/development/magento-development/the-better-way-to-modify-magento-layout)

# iphone - 核心数据：UIManagedDocument 或 AppDelegate 设置核心数据堆栈？

> ID：14876988
> 
> 赞同：5
> 
> 时间：2013-02-14T14:26:39.480
> 
> 标签：iphone, ios, objective-c, core-data, sdk

我对在哪里设置我的核心数据堆栈有点困惑。在 Appdelegate 中或使用 UIManagedDocument 的共享实例，描述在这里？：[http ://adevelopingstory.com/blog/2012/03/core-data-with-a-single-shared-uimanageddocument.html](http://adevelopingstory.com/blog/2012/03/core-data-with-a-single-shared-uimanageddocument.html)

现在，我在 AppDelegate 中设置了核心数据堆栈，并且在视图控制器之间传递了我的 MOC。但是迁移到 UIManagedDocument 并创建一个共享实例会更好，这样我就不必一直传递 MOC 了吗？还因为它更新？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T14:38:40.373

`UIManagedDocument`用于将数据（通常是文件）同步到 iCloud。它仅与核心数据相干。

Core Data 设置通常在 中完成，`AppDelegate`因此您在那里所做的没有任何问题。事实上，如果你使用 Core Data 创建一个新项目，Xcode 模板就是这样做的。

您通常不需要`ManagedObjectContext`从 viewcontroller 传递到 viewcontroller。最好创建一个可以在应用程序的任何位置提供上下文的单例数据访问层。在某些情况下，您可能希望为视图控制器使用私有 MOC，但并不经常这样做。

下面是一些创建单例 DataAccessLayer 的代码：

数据访问层.h

```
@interface DataAccessLayer : NSObject

   //Saves the Data Model onto the DB
   - (void)saveContext;

   //DataAccessLayer singleton instance shared across application
   + (id) sharedInstance;
   + (void)disposeInstance;
   // Returns the managed object context for the application.
   // If the context doesn't already exist, it is created and bound 
   // to the persistent store coordinator for the application.
   + (NSManagedObjectContext *)context;
@end 
```

数据访问层.m

```
#import "DataAccessLayer.h"

//static instance for singleton implementation
static DataAccessLayer __strong *manager = nil;

//Private instance methods/properties
@interface DataAccessLayer ()

// Returns the managed object context for the application.
// If the context doesn't already exist, it is created and 
// bound to the persistent store coordinator for the application.
@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;

// Returns the managed object model for the application.
// If the model doesn't already exist, it is created from the application's model.
@property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;

// Returns the persistent store coordinator for the application.
// If the coordinator doesn't already exist, it is created and the application's 
// store added to it.
@property (readonly,strong,nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;

// Returns the URL to the application's Documents directory.
- (NSURL *)applicationDocumentsDirectory;
@end

@implementation DataAccessLayer

@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

//DataAccessLayer singleton instance shared across application
+ (id)sharedInstance
{
    @synchronized(self) 
    {
        if (manager == nil)
            manager = [[self alloc] init];
    }
    return manager;
}

+ (void)disposeInstance
{
    @synchronized(self)
    {
        manager = nil;
    }
}

+(NSManagedObjectContext *)context
{
    return [[DataAccessLayer sharedInstance] managedObjectContext];
}

//Saves the Data Model onto the DB
- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    if (managedObjectContext != nil) 
    {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) 
        {
            //Need to come up with a better error management here.
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        } 
    }
}

// Returns the managed object context for the application.
// If the context doesn't already exist, it is created and 
// bound to the persistent store coordinator for the application.
- (NSManagedObjectContext *)managedObjectContext
{
    if (__managedObjectContext != nil)
        return __managedObjectContext;

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) 
    {
        __managedObjectContext = [[NSManagedObjectContext alloc] init];
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    }
    return __managedObjectContext;
}

// Returns the managed object model for the application.
// If the model doesn't already exist, it is created from the 
// application's model.
- (NSManagedObjectModel *)managedObjectModel
{
    if (__managedObjectModel != nil) 
        return __managedObjectModel;

    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"Model" 
                                               withExtension:@"momd"];
    __managedObjectModel = [[NSManagedObjectModel alloc] 
                         initWithContentsOfURL:modelURL];
    return __managedObjectModel;
}

// Returns the persistent store coordinator for the application.
// If the coordinator doesn't already exist, it is created and the 
// application's store added to it.
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil) 
        return __persistentStoreCoordinator;

    NSURL *storeURL = [[self applicationDocumentsDirectory] 
                         URLByAppendingPathComponent:@"MyData.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc]
                                     initWithManagedObjectModel:[self managedObjectModel]];

    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                           configuration:nil URL:storeURL options:nil error:&error]) 
    {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    return __persistentStoreCoordinator;
}

// Returns the URL to the application's Documents directory.
- (NSURL *)applicationDocumentsDirectory
{
    return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory
                                         inDomains:NSUserDomainMask] lastObject];
}

@end 
```

任何时候你需要上下文，你可以使用：

```
NSManagedObjectContext *context = [DataAccessLayer context]; 
```

这种设计通常效果很好。`NSManagedObjectContext`是一个非常轻量级的对象，因此保留它并没有真正的性能损失。但是，如果您需要在其他线程上执行 Core Data 的工作，则需要对设计进行一些更改。来自[Apple 的文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html)：

> 您必须在将使用它的线程上创建托管上下文。如果您使用 NSOperation，请注意它的 init 方法是在与调用者相同的线程上调用的。因此，您不能在队列的 init 方法中为队列创建托管对象上下文，否则它与调用者的线程相关联。相反，您应该在 main（对于串行队列）或 start（对于并发队列）中创建上下文。
> 
> 使用线程限制，您不应在线程之间传递托管对象或托管对象上下文。要跨线程边界从一个上下文“传递”另一个托管对象，您可以：
> 
> *   传递其对象 ID (objectID) 并在接收托管对象上下文中使用 objectWithID: 或 existingObjectWithID:error:。必须保存相应的托管对象——您不能将新插入的托管对象的 ID 传递给另一个上下文。
> *   在接收上下文上执行 fetch。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-12T00:36:52.617

上面的单例方法非常灵巧。一个更简单的方法是将 appDelegate 视为一个单例，它就是这样。在您的 appDelegate 中创建属性，然后以下行的一个版本将检索您想要的那个。例如检索 moc

```
self.managedObjectContext = [(MyAppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
```

# c# - 如何读取 BitmapSource 四个角的像素？

> ID：14876989
> 
> 赞同：5
> 
> 时间：2013-02-14T14:26:39.813
> 
> 标签：c#, .net, wpf, bitmapsource

我有一个 .NET [BitmapSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapsource.aspx)对象。我想读取位图角落的四个像素，并测试它们是否都比白色更暗。我怎样才能做到这一点？

编辑：我不介意将此对象转换为具有更好 API 的另一种类型。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T15:45:00.450

BitmapSource 有一个[CopyPixels](http://msdn.microsoft.com/en-us/library/ms616042.aspx)方法，可用于获取一个或多个像素值。

在给定像素坐标处获取单个像素值的辅助方法可能如下所示。请注意，它可能需要扩展以支持所有必需的像素格式。

```
public static Color GetPixelColor(BitmapSource bitmap, int x, int y)
{
    Color color;
    var bytesPerPixel = (bitmap.Format.BitsPerPixel + 7) / 8;
    var bytes = new byte[bytesPerPixel];
    var rect = new Int32Rect(x, y, 1, 1);

    bitmap.CopyPixels(rect, bytes, bytesPerPixel, 0);

    if (bitmap.Format == PixelFormats.Bgra32)
    {
        color = Color.FromArgb(bytes[3], bytes[2], bytes[1], bytes[0]);
    }
    else if (bitmap.Format == PixelFormats.Bgr32)
    {
        color = Color.FromRgb(bytes[2], bytes[1], bytes[0]);
    }
    // handle other required formats
    else
    {
        color = Colors.Black;
    }

    return color;
} 
```

你会使用这样的方法：

```
var topLeftColor = GetPixelColor(bitmap, 0, 0);
var topRightColor = GetPixelColor(bitmap, bitmap.PixelWidth - 1, 0);
var bottomLeftColor = GetPixelColor(bitmap, 0, bitmap.PixelHeight - 1);
var bottomRightColor = GetPixelColor(bitmap, bitmap.PixelWidth - 1, bitmap.PixelHeight - 1); 
```

# c# - 如何在 C# 中将重复条目添加到哈希表

> ID：14876990
> 
> 赞同：-3
> 
> 时间：2013-02-14T14:26:43.430
> 
> 标签：c#, hashtable

我有一个 xml ...其中有一些重复的条目，如何在 Hashtable 中添加这些条目

```
 <hashdata>
        <data key="A" value="A1"/>
        <data key="B" value="B1"/>
        <data key="C" value="C1"/>
        <data key="D" value="D1"/>
        <data key="E" value="E1"/>
        <data key="F" value="F1"/>
        <data key="A" value="A2"/>
        <data key="D" value="D2"/>
        <data key="F" value="F2"/>
        </hashdata>

        XmlDocument xmldoc = new XmlDocument();
        xmldoc.Load(@"test.xml");
        XmlNodeList xnode = xmldoc.SelectNodes("/hashdata/data");
        Hashtable hst = new Hashtable();
        for (int iCount = 0; iCount < xnode.Count; iCount++)
        {
            hst[xnode[iCount].Attributes["key"].Value.ToString()] = xnode[iCount].Attributes["value"].Value.ToString();
        } 
```

如何解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T14:40:19.263

这是设计使然 - a 中的每个键`Hashtable`都是唯一的，并且在使用索引运算符时将值分配给已存在的键将覆盖该值`[]`。

我建议进行一些更改：

首先，`Hashtable`尽可能避免完全使用，而是使用其中一个通用集合，例如`Dictionary<,>`.

如果实际上每个键确实需要多个值，则可以使用以下几行：

```
var dict = new Dictionary<string, List<string>>();
foreach (XmlNode node in xnode)
{
    var key = node.Attributes["key"].Value;
    List<string> values;
    if (!dict.TryGetValue(key, out values))
    {
        values = new List<string>();
        dict.Add(key, values);
    }
    values.Add(node.Attributes["value"].Value);
} 
```

或者要使用 Linq 来构造字典，你可以使用类似的东西：

```
var dict = xnode.Cast<XmlNode>()
                .GroupBy(n => n.Attributes["key"].Value, n => n.Attributes["value"].Value)
                .ToDictionary(g => g.Key, g => g.ToList()); 
```

如果您绝对必须使用`Hashtable`，则可以按如下方式调整上述内容：

```
var hash = new Hashtable();
foreach (XmlNode node in xnode)
{
    var key = node.Attributes["key"].Value;
    var values = (List<string>)hash[key];
    if (values == null)
    {
        values = new List<string>();
        hash.Add(key, values);
    }
    values.Add(node.Attributes["value"].Value);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T14:38:57.650

你不能，Hashtable Key 是唯一的。 [微软](http://msdn.microsoft.com/en-us/library/system.collections.hashtable.aspx)

尝试列表等。

# php - 使用 autoconf 对 phpize 脚本进行故障排除。尝试在 PHP 中配置 mssql 扩展时出错

> ID：14876995
> 
> 赞同：0
> 
> 时间：2013-02-14T14:27:10.840
> 
> 标签：php, osx-mountain-lion

我正在运行 Mac OS 10.8.2 并且正在运行开发 PHP (5.3.15) Web 服务器 (Apache 2.2)。我需要访问一个项目的 MSSQL 数据库。我已经成功配置并安装了 FreeTDS。我只需要“phpize”MSSQL 扩展并将其配置为与 FreeTDS 一起运行。当我导航到终端中的 MSSQL 目录并尝试“phpize”时，我收到此错误：

```
Username-MacBook-Pro:mssql user$ phpize
Configuring for:
PHP Api Version:         20090626
Zend Module Api No:      20090626
Zend Extension Api No:   220090626
Cannot find autoconf. Please check your autoconf installation and the
$PHP_AUTOCONF environment variable. Then, rerun this script. 
```

这是一个常见的 OSX 错误吗？有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:49:07.913

检查这个解决方案，它对我有用：[http ://recensus.com/blog/technical/installing-autoconf-and-fixing-phpize-on-osx-10-8/](http://recensus.com/blog/technical/installing-autoconf-and-fixing-phpize-on-osx-10-8/)

# c# - 在c#和sql中循环性能更新记录

> ID：14876997
> 
> 赞同：3
> 
> 时间：2013-02-14T14:27:13.893
> 
> 标签：c#, sql, performance, foreach

我需要从我的 C# 应用程序更新数据库中的 100 条记录。

我使用了一个 foreach 语句并调用了一个存储过程来更新每个记录，如下所示：

```
foreach (var record in recordList)
{  
    dbWatch.Start();
    DbService.UpdateRecord(Id, ProcessDate, MessageID, task.Result.Email.TryTimes);
    dbWatch.Stop();
    LogMessage(string.Format("Single database row update toke:{0}",dbWatch.Elapsed));
} 
```

一切正常，除了开始时，更新每条记录大约需要 00:00:00.00123343，但随着更新越来越多，它需要的时间越来越长。在将近 1000 条记录之后，更新每条记录大约需要 00:00:04 秒。

我想知道为什么会这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-14T14:34:59.207

我认为这只是一个不正确的测量。您的循环不会重新启动`StopWatch`，它只是连续启动和停止它。所以`Elapsed`会一直增加。

如果要测量整个时间：

```
dbWatch.Start();
foreach (var record in recordList)
{  
    DbService.UpdateRecord(Id, ProcessDate, MessageID, task.Result.Email.TryTimes);
}
dbWatch.Stop();
LogMessage(string.Format("All updates took:{0}",dbWatch.Elapsed)); 
```

如果要测量每次迭代的时间，请使用[`StopWatch.Restart`](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.restart.aspx)：

```
foreach (var record in recordList)
{  
    dbWatch.Restart();
    DbService.UpdateRecord(Id, ProcessDate, MessageID, task.Result.Email.TryTimes);
    dbWatch.Stop();
    LogMessage(string.Format("Single database row update took:{0}",dbWatch.Elapsed));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T14:34:27.210

如果要测量每次更新的时间，则必须`dbWatch.Reset()`在循环结束或开始时调用。`Restart()`我假设它是一个`System.Diagnostics.Stopwatch`. 请参阅[MSDN - 秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch_methods.aspx)。

# spring - Spring：记住我 cookie 未设置

> ID：14876998
> 
> 赞同：0
> 
> 时间：2013-02-14T14:27:17.363
> 
> 标签：spring, cookies, spring-security

我似乎无法获得记忆会话的春季 cookie，也没有`persistent_logins`填充数据源的表。为什么客户端收不到cookie？

应用程序上下文 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<bean:beans>
    <http>
...
        <remember-me data-source-ref="dataSource"
            user-service-ref="userService" />
    </http>

    <authentication-manager alias="authenticationManager">
        <authentication-provider user-service-ref="userService">
            <password-encoder hash="md5" ref="passwordEncoder">
                <salt-source ref="saltSource" />
            </password-encoder>
        </authentication-provider>
    </authentication-manager>
...
</bean:beans> 
```

登录方式：

```
@Service
public class AServiceImpl extends RemoteServiceServlet implements AService {
    @Override
    public boolean login(String username, String password, boolean remember) {
         Collection<GrantedAuthority> auths = userDetailsService.getGrantedAuthorities(user);
         auth = new UsernamePasswordAuthenticationToken(username, password, auths);
         Authentication result = authenticationManager.authenticate(auth);
         SecurityContextHolder.getContext().setAuthentication(result);
         getThreadLocalRequest().getSession().setAttribute(HttpSessionSecurityContextRepository.SPRING_SECURITY_CONTEXT_KEY,SecurityContextHolder.getContext());
         rememberMeServices.loginSuccess(getThreadLocalRequest(),getThreadLocalResponse(), auth);
     }
} 
```

# grails - Grails 插件项目 - 当我离线时找不到 groovy jar

> ID：14876999
> 
> 赞同：0
> 
> 时间：2013-02-14T14:27:18.447
> 
> 标签：grails, groovy, dependency-management

我正在使用 GGTS 3.1、Grails 2.1.1 和 Groovy 1.8.6

我创建了一个新工作区，并创建了一个新的 Grails 插件项目。直到昨天我旅行时一切都很好，我做了一个刷新依赖项。它失败了，因为在本地找不到 groovy.jar。我花了很长时间试图弄清楚发生了什么，但我做不到。我在我的任何应用程序项目上刷新都没有问题，只是我的（第一个）插件项目。这是日志的摘录：

```
Host repo1.maven.org not found. url=http://repo1.maven.org/maven2/org/codehaus/groovy/groovy/%5B1.5,1.7%5D/groovy-%5B1.5,1.7%5D.jar
    module not found: org.codehaus.groovy#groovy;[1.5,1.7]
==== grailsPlugins: tried
  -- artifact org.codehaus.groovy#groovy;[1.5,1.7]!groovy.jar:
  E:\workspaces\GGTS_310\SchemaMigrationPlugin\SchemaMigration/lib/groovy-[revision].jar
  [all-1.8.8]     C:\Users\JohnO\.grails\2.1.1\projects\SchemaMigration\plugins\database-migration-1.3.2/lib/groovy-[revision].jar
  C:\Users\JohnO\.grails\2.1.1\projects\SchemaMigration\plugins\release-2.0.3/lib/groovy-[revision].jar   C:\Users\JohnO\.grails\2.1.1\projects\SchemaMigration\plugins\rest-client-builder-1.0.2/lib/groovy-[revision].jar
  C:\Users\JohnO\.grails\2.1.1\projects\SchemaMigration\plugins\tomcat-2.1.1/lib/groovy-[revision].jar
==== grailsHome: tried
  C:\Apps\GGTS310\grails-2.1.1/lib/org.codehaus.groovy/groovy/ivy-[revision].xml
  -- artifact org.codehaus.groovy#groovy;[1.5,1.7]!groovy.jar:
  C:\Apps\GGTS310\grails-2.1.1/lib/org.codehaus.groovy/groovy/jars/groovy-[revision].jar
  C:\Apps\GGTS310\grails-2.1.1/lib/org.codehaus.groovy/groovy/bundles/groovy-[revision].jar
==== grailsHome: tried
  C:\Apps\GGTS310\grails-2.1.1\src\libs/groovy-[revision].xml
  -- artifact org.codehaus.groovy#groovy;[1.5,1.7]!groovy.jar:
  C:\Apps\GGTS310\grails-2.1.1\src\libs/groovy-[revision].jar
==== grailsHome: tried
  C:\Apps\GGTS310\grails-2.1.1\dist/groovy-[revision].xml
  -- artifact org.codehaus.groovy#groovy;[1.5,1.7]!groovy.jar:
  C:\Apps\GGTS310\grails-2.1.1\dist/groovy-[revision].jar
==== grailsHome: tried
  C:\Users\JohnO\.grails\2.1.1\cached-installed-plugins/groovy-[revision].xml
  -- artifact org.codehaus.groovy#groovy;[1.5,1.7]!groovy.jar:
  C:\Users\JohnO\.grails\2.1.1\cached-installed-plugins/groovy-[revision].jar
==== grailsHome: tried
  -- artifact org.codehaus.groovy#groovy;[1.5,1.7]!groovy.jar:
  C:\Apps\GGTS310\grails-2.1.1/plugins/groovy-[revision].jar
==== grailsCentral: tried
.....
.....
==== localMavenResolver: tried
  C:\Users\JohnO/.m2/repository/org/codehaus/groovy/groovy/[revision]/groovy-[revision].pom
  -- artifact org.codehaus.groovy#groovy;[1.5,1.7]!groovy.jar:
  C:\Users\JohnO/.m2/repository/org/codehaus/groovy/groovy/[revision]/groovy-[revision].jar
    ::::::::::::::::::::::::::::::::::::::::::::::
    ::          UNRESOLVED DEPENDENCIES         ::
    ::::::::::::::::::::::::::::::::::::::::::::::      
    :: org.codehaus.groovy#groovy;[1.5,1.7]: not found
    :::::::::::::::::::::::::::::::::::::::::::::: 
```

我不熟悉语法：“ *org.codehaus.groovy#groovy;[1.5,1.7]!groovy.jar:* ”，但我最好的猜测是它正在寻找一个介于 1.5 和 1.7 之间的版本。如果是这样，为什么？我该如何治愈这个？

Groovy 编译器的 GGTS 首选项设置为 1.8.6.xx-20....

Groovy jar 安装在：

C:\Apps\GGTS310\grails-2.1.1\lib\org.codehaus.groovy\groovy-all\jars\groovy-all-1.8.8.jar

%GRAILS_ROOT%\ivy-cache\org.codehaus.groovy\groovy-all\jars 包含 groovy-all-1.8.6.jar 和 groovy-all.1.8.8.jar

%GRAILS_ROOT%\ivy-cache\org.codehaus.groovy\groovy\jars\groovy-1.7-rc-2.jar

正如我所说，对于我的任何 Grails 项目，我都没有从本地资源中刷新这个问题，只是插件项目。

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:43:23.570

你的插件[依赖](http://grails.org/doc/2.2.x/guide/conf.html#ivy)于 org.codehaus.groovy:groovy，[版本范围](http://docs.codehaus.org/display/MAVEN/Dependency+Mediation+and+Conflict+Resolution#DependencyMediationandConflictResolution-DependencyVersionRanges)为[1.5,1.7]。
请注意，这与 org.codehaus.groovy:groovy-all 不同。
您提到的所有选项都没有回答这种依赖关系。[您可以通过运行Grails dependency-report 命令](http://grails.org/doc/2.2.x/ref/Command%20Line/dependency-report.html)
来跟踪此依赖项的来源