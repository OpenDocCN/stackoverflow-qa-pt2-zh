# StackOverflow 问答 13896000-13896999

# php - 如何使用 PHP 和 MySQL 将一些字段分组并显示在行中

> ID：13896005
> 
> 赞同：-2
> 
> 时间：2012-12-15T20:40:10.463
> 
> 标签：php, mysql, group-by, categories

我在 MySQL 中有这些字段：

```
rpt_id, rpt_entrydate, rpt_exitdate, rpt_date 
```

这些字段的值如下：

```
1, 2012-11-02, 2012-11-03, 2011-11-26
2, 2011-11-23, 2012-11-16, 2011-11-26
3, 2011-11-25, 2012-11-26, 2011-11-26
4, 2011-10-14, 2012-10-17, 2011-10-13
5, 2011-10-05, 2012-10-09, 2011-10-13
6, 2011-10-15, 2012-10-18, 2011-10-13 
```

我希望我的结果看起来像这样，但它不起作用：

```
2011-11-25, 2012-11-26, 2011-11-23, 2012-11-16, 2012-11-02, 2012-11-03, 2011-11-26
2011-10-15, 2012-10-18, 2011-10-05, 2012-10-09, 2011-10-14, 2012-10-17, 2011-10-13 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:05:15.367

您似乎正在尝试将与每个`rpt_date`组关联的所有日期串在一起。您可以使用 a`GROUP_CONCAT()`和几个[`CONCAT_WS()`concatenations](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)来做到这一点。

内部`CONCAT_WS()`将一对组合`rpt_entrydate, rpt_exitdate`成逗号分隔的字符串，外部将字符串与其组`CONCAT_WS()`配对。`GROUP_CONCAT()``rpt_date`

```
SELECT
  CONCAT_WS(', ',
    GROUP_CONCAT(
      CONCAT_WS(', ', rpt_entrydate, rpt_exitdate)
    ),  rpt_date
  ) AS datestring
FROM yourtable
GROUP BY rpt_date 
```

[http://sqlfiddle.com/#!2/9a07a/5](http://sqlfiddle.com/#!2/9a07a/5)

# java - java - 从字节数组中获取密钥

> ID：13896007
> 
> 赞同：0
> 
> 时间：2012-12-15T20:40:26.067
> 
> 标签：java, public-key, cryptoapi

我有一个使用随机生成的密钥加密文件内容的 java 程序。该密钥使用 RSA 加密并保存到文本文件中。

现在，我有一个 java 程序，它给出了文件和存储 RSA 密钥的密钥库，需要首先解密加密的密钥，然后用密钥解密文件。

这是我到目前为止所拥有的：

```
// Fetch the other public key and decrypt the file encryption key
java.security.cert.Certificate cert2 = keystore.getCertificate("keyForSeckeyDecrypt");
Key secKeyPublicKey = cert2.getPublicKey();
Cipher cipher = Cipher.getInstance(secKeyPublicKey.getAlgorithm());
cipher.init(Cipher.DECRYPT_MODE, secKeyPublicKey);
keyFileFis = new FileInputStream(keyFile);
byte[] encryptedKey = new byte[128];
keyFileFis.read(encryptedKey);
byte[] realFileKey = cipher.doFinal(encryptedKey, 0, encryptedKey.length);
Key realKey = //  THE PROBLEM!!!;
keyFileFis.close(); 
```

简而言之，我从密钥文本文件中获取加密密钥并对其进行解密，现在我将解密密钥作为字节数组，我将如何再次将其设为 Key 变量？

我以这种方式生成了密钥：

```
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
KeyGenerator keyGen = KeyGenerator.getInstance("AES");
Key secKey = keyGen.generateKey();
cipher.init(Cipher.ENCRYPT_MODE, secKey); 
```

并以这种方式加密：

```
KeyPairGenerator kpg = KeyPairGenerator.getInstance("RSA");
kpg.initialize(1024);
KeyPair kp = kpg.genKeyPair();
PrivateKey privateKey = kp.getPrivate();
Cipher keyCipher = Cipher.getInstance("RSA");
keyCipher.init(Cipher.ENCRYPT_MODE, privateKey);
byte[] encryptedKey = keyCipher.doFinal(secKey.getEncoded());
FileOutputStream keyStream = new FileOutputStream("key.txt");
keyStream.write(encryptedKey);
keyStream.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:53:04.773

我还没有尝试过，但是通过单击 API [SecretKeySpec](http://docs.oracle.com/javase/7/docs/api/javax/crypto/spec/SecretKeySpec.html)可能是您正在寻找的。

```
SecretKeySpec(byte[] key, String algorithm) 
```

> 它可用于从字节数组构造 SecretKey，而无需通过（基于提供者的）SecretKeyFactory。
> 
> 此类仅对可以表示为字节数组且没有与之关联的密钥参数的原始密钥有用，例如 DES 或三重 DES 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:07:38.260

如果我做对了，这应该可以工作..

```
Key privateKey = keyStore.getKey("youralias", "password".toCharArray());
PublicKey publicKey = keyStore.getCertificate("youralias").getPublicKey();

KeyGenerator keyGen = KeyGenerator.getInstance("AES");
Key secKey = keyGen.generateKey();

Cipher keyCipher = Cipher.getInstance("RSA");
keyCipher.init(Cipher.ENCRYPT_MODE, privateKey);
byte[] encryptedKey = keyCipher.doFinal(secKey.getEncoded());

// Write & Read to/from file!

Cipher decryptCipher = Cipher.getInstance("RSA");
decryptCipher.init(Cipher.DECRYPT_MODE, publicKey);
byte[] decryptedKey = decryptCipher.doFinal(encryptedKey);

boolean equals = Arrays.equals(secKey.getEncoded(), new SecretKeySpec(decryptedKey, "AES").getEncoded());
System.out.println(equals?"Successfull!":"Failed!"); 
```

# html5-canvas - 画布图像从灰度/反转等恢复到原始图像？

> ID：13896008
> 
> 赞同：0
> 
> 时间：2012-12-15T20:40:32.423
> 
> 标签：html5-canvas

我遇到的每一篇文章都写了关于对图像进行灰度化的内容。但是从来没有人谈论过从灰度或变亮/反转等调整中返回。应该如何扭转效果才能恢复原状？我可以重置我原来的 img src，但这会影响很多其他的事情。如果我早先裁剪了图像，将其重置为原始图像并不是一个好主意！

注意：我知道如何灰度/变亮/调整伽玛等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:58:34.930

灰度转换是一种有损操作，您将丢失所有 RGB 信息。因此，您无法将其恢复为原始形式。

至于变亮/反转，您可以再次变暗/反转以恢复原始状态。

# django - 查询 ElasticSearch 以最后排序空字符串

> ID：13896012
> 
> 赞同：2
> 
> 时间：2012-12-15T20:40:56.807
> 
> 标签：django, elasticsearch, django-haystack

我正在使用 Django、Haystack 和 ElasticSearch。我想对我的搜索结果进行排序，以便排序字段值为空（“”）的结果排在不为空的结果之后。我在 Haystack 中找不到可以执行此操作的 API。发送到 ElasticSearch 的请求如下所示：

```
{
   "sort":[
      {
         "version":{
            "order":"asc"
         }
      }
   ],
   "query":{
      ...
   }
} 
```

有没有办法重写这个 ElasticSearch 查询，以便“version”为空字符串的结果将出现在“version”存在的结果之后？

我在 Python 中实现了这一点：

```
sorted(sqs, key=lambda x: getattr(x, 'version') == '') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:18:08.943

此查询将 1.0 的 _score 分配给所有具有非空版本的记录，将 2.0 的 _score 分配给所有具有空版本的记录。然后它按 _score 升序排序，然后按 version 升序排序。结果，所有版本为空的记录都被推到列表的底部。

```
{
    "query": {
        "custom_filters_score" : {
            "query" : {
                "constant_score": {
                    "query": {
                        .... your original query ....                        
                    }
                }
            },
            "filters" : [
                {
                    "filter" : { "missing" : { "field" :  "version"} },
                    "boost" : "2"
                }
            ]
        }        
    },
    "sort": [
        {
            "_score": {"order":"asc"}
        },
        {
            "version": {"order":"asc"}
        }
    ]
} 
```

# java - 在 libGDX 中将四元数应用于相机

> ID：13896013
> 
> 赞同：2
> 
> 时间：2012-12-15T20:41:12.727
> 
> 标签：java, android, opengl-es, libgdx, quaternions

我正在尝试使用`Quaternion`libGDX 中的 a 来旋转我的相机。我有一个`Quaternion`创建并被操纵，但我不知道如何将它应用到相机上，我尝试过的一切都没有移动相机。

这是我设置旋转的方式`Quaternion`：

```
 public void rotateX(float amount) {
        tempQuat.set(tempVector.set(1.0f, 0.0f, 0.0f), amount * MathHelper.PIOVER180);
        rotation = rotation.mul(tempQuat);
    }

    public void rotateY(float amount) {
        tempQuat.set(tempVector.set(0.0f, 1.0f, 0.0f), amount * MathHelper.PIOVER180);
        rotation = tempQuat.mul(rotation);
    } 
```

这是我尝试更新相机的方式（与原始 libGDX 版本相同的更新方法，但我在顶部添加了有关旋转矩阵的部分）：

```
 public void update(boolean updateFrustum) {
        float[] matrix = new float[16];
        rotation.toMatrix(matrix);
        Matrix4 m = new Matrix4();
        m.set(matrix);

        camera.view.mul(m);
        //camera.direction.mul(m).nor();
        //camera.up.mul(m).nor();

        float aspect = camera.viewportWidth / camera.viewportHeight;
        camera.projection.setToProjection(Math.abs(camera.near), Math.abs(camera.far), camera.fieldOfView, aspect);
        camera.view.setToLookAt(camera.position, tempVector.set(camera.position).add(camera.direction), camera.up);
        camera.combined.set(camera.projection);
        Matrix4.mul(camera.combined.val, camera.view.val);

        if (updateFrustum) {
            camera.invProjectionView.set(camera.combined);
            Matrix4.inv(camera.invProjectionView.val);
            camera.frustum.update(camera.invProjectionView);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:12:35.050

我必须评论关于您的代码的两件事：

1.  您不能在调用 setToLookAt 之前修改视图矩阵，因为该方法重新计算孔矩阵是没有用的。
2.  update() 的前几行是相当浪费的。避免创建不必要的对象（特别是如果您计划在每个周期更新您的相机）。要将旋转应用于矩阵，您只需调用 [matrix].rotate(quaternion)。

最后，有很多方法可以旋转你的相机，所以我不能真正解决你的问题，但如果你想看到旋转的东西，只需在 camera.view.setToLookat 之后调用 camera.view.rotate(rotation)。可能你应该旋转其他东西（例如方向向量、向上向量等），但你可以从这个开始：

```
//protected float[] matrix = new float[16];//unused!

public void update(boolean updateFrustum) {

        float aspect = camera.viewportWidth / camera.viewportHeight;
        camera.projection.setToProjection(Math.abs(camera.near), Math.abs(camera.far), camera.fieldOfView, aspect);
        camera.view.setToLookAt(camera.position, tempVector.set(camera.position).add(camera.direction), camera.up);

        camera.view.rotate(q); // THIS IS THE ONLY REAL CHANGE TO YOUR CODE!

        camera.combined.set(camera.projection);
        Matrix4.mul(camera.combined.val, camera.view.val);

        if (updateFrustum) {
            camera.invProjectionView.set(camera.combined);
            Matrix4.inv(camera.invProjectionView.val);
            camera.frustum.update(camera.invProjectionView);
        }
    } 
```

快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:29:07.510

我猜`Quaternion.mul()`是乘法？我认为你需要做的不仅仅是一个乘法来进行旋转。这是我用于围绕轴角（四元数）旋转矢量或点的代码：

```
private double[] vecQuat = new double[4];
private double[] resQuat = new double[4];
private double[] thisQuat = new double[4];

private double[] conj = new double[4];

/**
 * Rotates a vector (or point) around this axis-angle
 * 
 * @param vectorX the x component of the vector (or point)
 * @param vectorY the y component of the vector (or point)
 * @param vectorZ the z component of the vector (or point)
 * @param outputArray the array in which the results will be stored
 */
public void RotateVector(double vectorX, double vectorY, double vectorZ, double[] outputArray){

    vecQuat[0] = 0.0f;
    vecQuat[1] = vectorX;
    vecQuat[2] = vectorY;
    vecQuat[3] = vectorZ;

    thisQuat[0] = w;
    thisQuat[1] = x;
    thisQuat[2] = y;
    thisQuat[3] = z;

    getConjugate(conj);
    Multiply(vecQuat,conj,resQuat);
    Multiply(thisQuat,resQuat,vecQuat);

    outputArray[0] = vecQuat[1];
    outputArray[1] = vecQuat[2];
    outputArray[2] = vecQuat[3];

}

public void getConjugate(double[] outputArray){

    outputArray[0] = w;
    outputArray[1] = -x;
    outputArray[2] = -y;
    outputArray[3] = -z;

}

public void Multiply(double[] aq, double[] rq, double[] outputArray){

    outputArray[0] = aq[0] * rq[0] - aq[1] * rq[1] - aq[2] * rq[2] - aq[3] * rq[3];
    outputArray[1] = aq[0] * rq[1] + aq[1] * rq[0] + aq[2] * rq[3] - aq[3] * rq[2];
    outputArray[2] = aq[0] * rq[2] + aq[2] * rq[0] + aq[3] * rq[1] - aq[1] * rq[3];
    outputArray[3] = aq[0] * rq[3] + aq[3] * rq[0] + aq[1] * rq[2] - aq[2] * rq[1];

} 
```

我不知道 libgdx，但也许看看它是否有像上面那样的旋转功能。如果没有，您可能可以将其添加到

* * *

编辑：

我不知道你想用相机做什么，但这里有一个例子，我使用四元数来设置太空中的 RTS 游戏（想想 homeworld）。宇宙飞船有一个`direction vector`（它们行进的方向），用于在每个滴答声中更新它们的运动并将它们旋转到朝向行进方向（在`draw()`函数中）。他们还有一个`target vector`: 在船的位置和它的当前目的地之间。船只能以`turningCircle`弧度转动一秒钟。因此，在每个刻度更新运动后，我将方向/目标向量的叉积作为旋转轴，并`turningCircle`作为角度，创建一个四元数。我通过四元数旋转船舶方向矢量以“转动”船舶。

最终的结果是船经过了许多滴答声，以优美的弧线转弯，直到它朝着正确的方向前进。

同样的过程也可以在战斗飞行模拟器中使用，以模拟人工智能飞机的转弯。使用四元数还可以避免“万向节锁定”，这是真正的飞机会遇到的问题！

然而，使用四元数，你的 AI 飞机可能会发现倒挂飞行一半时间更方便，所以你可能不得不让飞机沿着机身轴（即 z 轴）进行一些额外的缓慢旋转，以模拟飞行员将自己定位到“向上”。这实际上很容易做到，只需在正向（方向）向量上添加一个直角的向上和向右向量

这是代码（减去向上矢量位的定向）：

```
/**
 * The current position of the spaceship
 */
private Vertex3D currentPosition;

/**
 * The target position of the spaceship
 */
private Vertex3D targetPosition;

/**
 * The current direction in which the spaceship is travelling
 */
private Vector directionVector;

/**
 * The vector towards which the spaceship is turning
 */
private Vector targetVector;

/**
 * The right orientation vector
 */
private Vector rightOrientationVector;

/**
 * The up orientation vector
 */
private Vector upOrientationVector;

/**
 * Angle in radians by which directionVector turns towards TargetVector every tick
 */
private double turningCircle = 0.05f;

public Spaceship(Vertex3D target){

    currentPosition = new Vertex3D(0,0,0);

    // right hand coordinate system: ship is facing "away" from the camera
    directionVector = new Vector(currentPosition, 0,0,-1);
    rightOrientationVector = new Vector(currentPosition, 1,0,0);
    upOrientationVector = new Vector(currentPosition, 0,1,0);

    targetPosition = target;

}

    protected void tick(){
        incrementPosition();
        turn();
        draw();
    }

    protected void incrementPosition(){

        // get movement
        double velocity = getVelocity();

        // move
        currentPosition.mX(currentPosition.mX + directionVector.mX * velocity);
        currentPosition.mY(currentPosition.mY + directionVector.mY * velocity);
        currentPosition.mZ(currentPosition.mZ + directionVector.mZ * velocity);
    }

    private double[] cross = new double[3];
    private double[] newDir = new double[3];
    private Quaternion quat;

    protected void turn(){

        // update target vector relative to new position
        setTargetVector();

        // turn direction vector towards target vector
        MathsExtras.crossProduct(directionVector.mX, directionVector.mY, directionVector.mZ, targetVector.mX, targetVector.mY, targetVector.mZ, cross); 

        quat = new Quaternion(cross[0], cross[1], cross[2], turningCircle);

        quat.RotateVector(directionVector.mX, directionVector.mY, directionVector.mZ, newDir); 

        directionVector.mX = newDir[0];
        directionVector.mY = newDir[1];
        directionVector.mZ = newDir[2];

        direction.normalise();

        // update right orientation
        MathsExtras.crossProduct(direction.mX, direction.mY, direction.mZ, upOrientationVector.mX, upOrientationVector.mY, upOrientationVector.mZ, cross);

        rightOrientationVector.mX = cross[0];
        rightOrientationVector.mY = cross[1];
        rightOrientationVector.mZ = cross[2];

        rightOrientationVector.normalise();

        // update up orientation
        MathsExtras.crossProduct(rightOrientationVector.mX, rightOrientationVector.mY, rightOrientationVector.mZ, direction.mX, direction.mY, direction.mZ, cross);

        upOrientationVector.mX = cross[0];
        upOrientationVector.mY = cross[1];
        upOrientationVector.mZ = cross[2];

        upOrientationVector.normalise();

    }

    protected void setTargetVector(){
        targetVector.mX = targetPosition.getmX() - currentPosition.getmX();
        targetVector.mY = targetPosition.getmY() - currentPosition.getmY();
        targetVector.mZ = targetPosition.getmZ() - currentPosition.getmZ();
        targetVector.normalise();
    } 
```

因此，如果您想使用相同的代码来说明在第一人称射击游戏中转动相机以查看对象，您可以将方向向量设置为玩家正在注视的方向，并将 currentPosition 设置为玩家/相机位置，目标作为目标对象，而 turningCirlce 为角度/您希望相机转动的速度。在`draw()`你只会使用`lookAt(directionVector.mX + currentPosition.mX, directionVector.mY + currentPosition.mY, directionVector.mZ + currentPosition.mZ)`

# php - 添加 PHP 字符串以包含（file.php）

> ID：13896018
> 
> 赞同：-3
> 
> 时间：2012-12-15T20:41:39.373
> 
> 标签：php, string, include

我有以下代码，我无法工作来挽救我的生命！我忘记了什么？

```
 include('$fs_url/gallery/mysql.php'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T20:43:30.167

替换`'`为`"`：

```
include("$fs_url/gallery/mysql.php"); 
```

`'$var'`不评估，`"$var"`是

* * *

为了弄清楚会发生什么：

```
$x = 123;
echo "$x " . '$x'; 
```

产量：

> 123 $x

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T20:50:51.573

你可以试试`include("./" . $fs_url . "/gallery/mysql.php");`

# xaml - LongListSelector 日期分组列表

> ID：13896020
> 
> 赞同：3
> 
> 时间：2012-12-15T20:41:52.993
> 
> 标签：xaml, windows-phone-8, longlistselector

Windows Phone 8 SDK 问题使用`LongListSelector`日期分组。我熟悉[对字母进行分组](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj244365%28v=vs.105%29.aspx)的 AlphaKeyGroup 辅助方法。

有没有人做过/看过类似的类似语言环境的日期的文章？（数字也将是一个加号）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-21T16:46:20.370

所以我也有点挣扎，因为你提到的 MSDN 中的 AlphaKeyGroup 示例由于本地化而比它需要的更复杂。您要做的是创建一个新的 List 对象，该对象具有一个额外的属性，即 Key。此 Key 属性是您分组的名称。在 AlphaKeyGroup 示例中，它是您所在地区字母表中的每个字母。因此，创建您自己的继承自 List 的组对象。

```
public class TimeKeyGroup<T> : List<T>
{
    /// <summary>
    /// The Key of this group.
    /// </summary>
    public string Key { get; private set; }

    public TimeKeyGroup(string key)
    {
        Key = key;
    }
} 
```

现在创建一个名为 CreateGroups 的方法，该方法接受您要分组的对象的 IEnumerable，并返回您刚刚创建的自定义列表对象的列表。在我的实现中，我将具有 TimeStamp 属性的 Workout 对象分组。在此方法中，为您想要的每种类型的组键名称创建组对象，例如“过去 7 天”或“过去 6 个月”。然后通过循环遍历传入的 IEnumerable 组并评估每个组以确定它们应该分组的位置来填充每个组。最后将每个分组列表添加到主组列表并返回。这是我的方法：

```
public static List<TimeKeyGroup<Workout>> CreateGroups(IEnumerable<Workout> workouts)
    {
        // Create List to hold each item
        List<TimeKeyGroup<Workout>> groupedWorkouts = new List<TimeKeyGroup<Workout>>();

        // Create a TimeKeyGroup for each group I want
        TimeKeyGroup<Workout> LastSeven = new TimeKeyGroup<Workout>("Last Seven Days");
        TimeKeyGroup<Workout> LastTwoWeeks = new TimeKeyGroup<Workout>("Last Two Weeks");
        TimeKeyGroup<Workout> LastMonth = new TimeKeyGroup<Workout>("Last Month");
        TimeKeyGroup<Workout> LastSixMonths = new TimeKeyGroup<Workout>("Last Six Months");
        TimeKeyGroup<Workout> LastYear = new TimeKeyGroup<Workout>("Last Year");
        TimeKeyGroup<Workout> AllTime = new TimeKeyGroup<Workout>("All Time");

        // Fill each list with the appropriate workouts
        foreach (Workout w in workouts)
        {
            if (w.TimeStamp > DateTime.Now.AddDays(-7))
            {
                LastSeven.Add(w);
                continue;
            }
            else if (w.TimeStamp > DateTime.Now.AddDays(-14))
            {
                LastTwoWeeks.Add(w);
                continue;
            }
            else if (w.TimeStamp > DateTime.Now.AddMonths(-1))
            {
                LastMonth.Add(w);
                continue;
            }
            else if (w.TimeStamp > DateTime.Now.AddMonths(-6))
            {
                LastSixMonths.Add(w);
                continue;
            }
            else if (w.TimeStamp > DateTime.Now.AddMonths(-12))
            {
                LastYear.Add(w);
                continue;
            }
            else
            {
                AllTime.Add(w);
            }
        }

        // Add each TimeKeyGroup to the overall list
        groupedWorkouts.Add(LastSeven);
        groupedWorkouts.Add(LastTwoWeeks);
        groupedWorkouts.Add(LastMonth);
        groupedWorkouts.Add(LastSixMonths);
        groupedWorkouts.Add(LastYear);
        groupedWorkouts.Add(AllTime);

        return groupedWorkouts;
    } 
```

现在你有一个很好的分组列表列表。惊人的！剩下的只是将 LongListSelector 的 itemssource 属性连接到这个新列表并定义 JumpListStyle 和 GroupedHeaderTemplate。您引用的原始文章包含所有这些信息。

祝你好运，快乐的 Windows Phone 开发！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T08:11:26.613

在我被困在与您现在相同的示例之后，我在[MSDN](http://code.msdn.microsoft.com/wpapps/PhotoHub-Windows-Phone-8-fd7a1093)的这个示例上取得了成功。Group.cs 文件包含一个组的实现，可以自由地与字符串一起使用。我的猜测是，您可以轻松添加 DateTime 的另一个属性，然后您可以尝试按日期分组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-11T06:46:17.690

好吧，我使用了 AlphaKeyGroup 的修改版本。我将这个新类称为 StringKeyGroup 并根据项目的第一个字符创建组。因此，只需将 AlphaKeyGroup 替换为 StringKeyGroup 即可。

这个新功能可以像这样使用：

```
myLonglistSelector.ItemSource = GroupedItems(myCollection);
....

public ObservableCollection<StringKeyGroup<myClass>> GroupedItems(IEnumerable<myClass> source)
    {
        return StringKeyGroup<myClass>.CreateGroups(source,
            System.Threading.Thread.CurrentThread.CurrentUICulture, 
            s => s.Name, true);
    } 
```

这是 StringKeyGroup.cs 的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Collections.ObjectModel;
using System.Globalization;

namespace MyNameSpace

{
public class StringKeyGroup<T> : ObservableCollection<T>
{
    public delegate string GetKeyDelegate(T item);
    public string Key { get; private set; }
    public StringKeyGroup(string key)
    {
        Key = key;
    }
    public static ObservableCollection<StringKeyGroup<T>> CreateGroups(IEnumerable<T> items, CultureInfo ci, GetKeyDelegate getKey, bool sort)
    {
        var list = new ObservableCollection<StringKeyGroup<T>>();

        foreach (var item in items)
        {
            var itemKey = getKey(item).Substring(0, 1).ToLower();

            var itemGroup = list.FirstOrDefault(li => li.Key == itemKey);
            var itemGroupIndex = itemGroup != null ? list.IndexOf(itemGroup) : -1 ;

            if (itemGroupIndex == -1)
            {
                list.Add(new StringKeyGroup<T>(itemKey));
                itemGroupIndex = list.Count - 1;
            }
            if (itemGroupIndex >= 0 && itemGroupIndex < list.Count)
            {
                list[itemGroupIndex].Add(item);
            }
        }

        if (sort)
        {
            foreach (var group in list)
            {
                group.ToList().Sort((c0, c1) => ci.CompareInfo.Compare(getKey(c0), getKey(c1)));
            }
        }

        return list;
    }
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-26T01:22:21.283

要将 LongListSelector 与数字一起使用，让我们尝试按年龄分组人员列表，而不是按他们名字的第一个字母（[在 MSDN PeopleHub 示例中](http://code.msdn.microsoft.com/wpapps/PeopleHub-Windows-Phone-80-88abe94d)）

他们使用神秘的 AlphaKeyGroup，这是**一个名字以相同字母开头的人的列表**（该字母成为 AlphaKeyGroup 的键）。AlphaKeyGroups 的人可能如下所示：

*   Key = A：Amber、Amelia（其中两个 People 对象的名称都以 A 开头）
*   Key = B：Bob，Brian（其中两个 People 对象的名称都以 B 开头）
*   键= C：等

我们将使用 IntegerKeyGroup，这是**一个具有相同年龄的人的列表**。IntegerKeyGroups 的人可能如下所示：

*   键 = 23：Jennifer、Ryan（两个 People 对象都是 23 岁）
*   键 = 26：Amber、Megan（两个 People 对象都是 26 岁）
*   键 = 34：等

所以要遵循 GentryRiggen 的框架，我们必须首先定义 IntegerKeyGroup，然后将人们粘在他们所属的年龄组中。我把这些放在 ViewModel 文件中。

```
public class IntegerKeyGroup<T> : List<T>
{
    public int Key { get; private set; }

    public IntegerKeyGroup(int key)
    {
        Key = key;
    }
} 
```

请注意，IntegerKeyGroup 只是一个 List，但具有一个称为 Key 的特殊整数成员。这意味着我们可以*将年龄整数标记为 Key 的人员列表*。

现在我们需要将我们未排序的大列表排序为不同年龄的 IntegerKeyGroups，最后将所有这些 IntegerKeyGroups 组合在一起。这个**IntegerKeyGroups 组合列表是 LongListSelector 接受显示的内容**。

```
public static List<IntegerKeyGroup<Person>> CreateGroups(IEnumerable<Person> UnsortedPeopleList)
{
    // Create combined list of IntegerKeyGroups
    List<IntegerKeyGroup<Person>> CombinedPeopleList = new List<IntegerKeyGroup<Person>>();

    // Create a IntegerKeyGroup for each age group I want,
    // The constructor parameters sets the Key to the IntegerKeyGroup
    IntegerKeyGroup<Person> Age23s = new IntegerKeyGroup<Person>(23);
    IntegerKeyGroup<Person> Age26s = new IntegerKeyGroup<Person>(26);
    IntegerKeyGroup<Person> Age34s = new IntegerKeyGroup<Person>(34);

    // Populate each IntegerKeyGroup with the appropriate Persons
    foreach (Person p in UnsortedPeopleList)
    {
        switch (p.Age)
        {
            case 23: Age23s.Add(p); continue;
            case 26: Age26s.Add(p); continue;
            case 34: Age34s.Add(p); continue;
            default: continue; // we don't support ages other than the 3 above 
        }
    }

    // Add each IntegerKeyGroup to the overall list
    CombinedPeopleList.Add(Age23s);
    CombinedPeopleList.Add(Age26s);
    CombinedPeopleList.Add(Age34s);

    return CombinedPeopleList;
} 
```

仍然在 ViewModel 文件中，使用 CreateGroups 函数使 IntegerKeyGroups 列表可公开访问。

```
 public List<IntegerKeyGroup<Person>> AgeGroupedPeople
    {
        get
        {
            return CreateGroups(UnsortedPeople);
        }
    } 
```

[现在在 XAML 中，对MSDN PeopleHub 示例](http://code.msdn.microsoft.com/wpapps/PeopleHub-Windows-Phone-80-88abe94d)中的原始代码进行 1 处更改 ：

```
<phone:LongListSelector Name="peopleLongListSelector"   
     ItemsSource="{Binding AgeGroupedPeople}" <!-- Change is in this line! -->
     JumpListStyle="{StaticResource LongListSelectorJumpListStyle}"  
     ListHeaderTemplate="{StaticResource LongListSelectorHeaderTemplate}"
     GroupHeaderTemplate="{StaticResource LongListSelectorGroupHeaderTemmplate}"
     ItemTemplate="{StaticResource LongListSelectorItemTemplate}"
     HideEmptyGroups ="true" IsGroupingEnabled ="true" LayoutMode="List">
 </phone:LongListSelector> 
```

这应该按整数对人进行分组，在这种情况下是年龄。

# wordpress - 如何在 Wordpress Pod 中显示表单数据输入错误

> ID：13896025
> 
> 赞同：0
> 
> 时间：2012-12-15T20:42:27.003
> 
> 标签：wordpress, podscms

我想向用户显示表单输入错误，例如唯一性错误。我希望错误显示在表单上方的通知框中。

目前，pods 以 javascript 消息框的形式提供数据输入错误，如下所示：

![](../Images/bc7f638248d6b555abc6f8b91be7b32d.png)

我想显示这些类似于成功消息的错误消息：

![](../Images/9395da3a7fa03ee188abc8f570ab1205.png)

```
<div id="message" class="pods-form-front-success">Form submitted successfully</div> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:30:23.490

Pods 使用 AJAX 提交表单，我们还没有在表单字段本身上提供基于 HTML 的自定义错误。[要获得更强大的表单解决方案，请尝试使用 Gravity Forms (http://gravityforms.com/)，您可以使用我们的 API http://pods.io/docs/add/](http://pods.io/docs/add/)将您的表单提交映射到 Pod 中

# c++ - 宽字符和 Windows 函数的 cpp 问题

> ID：13896026
> 
> 赞同：0
> 
> 时间：2012-12-15T20:42:41.900
> 
> 标签：c++

```
static void GetFilesFromDir(std::string dir, std::vector<std::string>& items)
{
    WIN32_FIND_DATA findData;
    HANDLE hFind=FindFirstFile((dir+"\\*").c_str(), &findData); //1 error
    do
    {
        if(hFind != INVALID_HANDLE_VALUE)
        {
            std::string sFileName = findData.cFileName; //2 error
            LPCSTR lp(sFileName.c_str());

            if(sFileName == "." || sFileName == "..")
            {} //do nothing
            else if (findData.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)
                GetFilesFromDir(dir+"\\"+sFileName, items);
            else
                items.push_back(dir+"\\"+sFileName);
        }

    }   while (FindNextFile(hFind, &findData));
} 
```

所以这是我刚刚从另一个项目复制到新项目的简单函数。它会无缘无故地抛出错误，尤其是因为它在其他项目中也有效......

```
1>c:\users\prog\documents\visual studio 2010\projects\vampire stealth\vampire    stealth\smallfunctions.h(22): error C2664: 'FindFirstFileW' : cannot convert parameter 1 from 'const char *' to 'LPCWSTR'
1>          Types pointed to are unrelated; conversion requires reinterpret_cast, C-style cast or function-style cast

1>c:\users\prog\documents\visual studio 2010\projects\vampire stealth\vampire stealth\smallfunctions.h(27): error C2440: 'initializing' : cannot convert from 'WCHAR [260]' to 'std::basic_string<_Elem,_Traits,_Ax>'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>          No constructor could take the source type, or constructor overload resolution was ambiguous 
```

有人对出了什么问题有任何想法吗？我对此一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:49:30.080

第一个错误：

```
...(dir+L"\\*").c_str()... 
```

第二个错误：

```
std::wstring wFileName = findData.cFileName; 
```

我想你已经为项目设置了 UNICODE 标志，所以你需要使用宽字符。wchar_t 而不是 char 和 wstring 而不是字符串。

# c++ - 关于带有模板的 c++ typedef

> ID：13896032
> 
> 赞同：1
> 
> 时间：2012-12-15T20:43:54.660
> 
> 标签：c++, typedef

我试图理解以下 typedef 的含义

```
class A;

typedef bool (*TempType) (shared_ptr<A> s); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T20:46:03.100

`TempType`是一个接受`shared_ptr<A>`参数并返回的函数指针类型`bool`。

例如，您可以这样使用它：

```
bool my_func(shared_ptr<A> s)
{
    return false;
}

// Variable x is of type TempType: A function pointer with a known signature.
TempType x = &my_func; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T20:52:34.397

声明反映使用。您正在定义一个名为`TempType`. 从声明中，您可以看到它将被用作，如果是函数`bool (*TempType)(shared_ptr<A> s)`，它看起来就像一个函数调用`*TempType`。if`*TempType`是一个函数，并且声明反映了使用，我们的使用`TempType`是用解引用操作符解引用它；`TempType`指向函数的指针也是如此。它指向什么类型的函数？一个将 a`shared_ptr<A>`作为参数（所述参数名为`s`），并返回一个布尔值。

一般来说，“声明反映使用”是弄清楚这些类型定义的秘诀，同时需要记住你定义的类型和引用的类型。我尽量避免在定义中包含两个未绑定的名称（在本例中为`TempType`和`s`），因为除了可能引起混淆之外，它并没有增加太多；`typedef bool (*TempType) (shared_ptr<A> s);`并且`typedef bool (*TempType) (shared_ptr<A>);`具有相同的含义。

# google-chrome - Chrome 和 Mocha 全球泄漏

> ID：13896034
> 
> 赞同：0
> 
> 时间：2012-12-15T20:44:15.037
> 
> 标签：google-chrome, google-chrome-extension, mocha.js, chai

我有以下*非常简单*的Mocha / Chai 测试：

```
describe('main tests', function () {
  var expect = chai.expect, something = null;

  before(function () {
    something = 0;
  });

  it('should equal 0', function () {
    expect(something).to.equal(0);
  });
}); 
```

这在 chrome 中失败，输出如下：

> 错误：检测到全局泄漏：css、cssFile、cssRule

在 Firefox 和 Safari 中，它都可以顺利通过。

Google 自己的[Screen Capture](https://chrome.google.com/webstore/detail/screen-capture-by-google/cpngackimfmofbokmjmljamhdncknpmg?hl=en)扩展定义了另一个全局变量。禁用该扩展后，Mocha 仅抱怨`css`,`cssFile`和`cssRule`是全局泄漏。

我检查了这些变量并没有在 Safari 或 Firefox 中定义，所以显然 Chrome 或我的一个 Chrome 扩展程序中的某些东西正在定义这三个变量。有没有办法找出哪个扩展定义了这些变量，而不是按顺序禁用和重新启用所有这些变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:13:43.963

您的问题的最佳解决方案不是一些 JavaScript 片段，而是您安装的扩展程序的源代码。

1.  访问您的[Chrome 个人资料](http://www.chromium.org/user-experience/user-data-directory)`Extensions`的子目录（以下位置）。
2.  使用工具递归搜索该术语。
    例如，使用`grep`命令：（`grep -r 'cssFile'`适用于 Linux、Mac 甚至 Windows）。

## 您个人资料的 Chrome 扩展程序的默认位置

```
Windows XP:
  Chrome  : %AppData%\..\Local Settings\Application Data\Google\Chrome\User Data\Default\Extensions\
  Chromium: %AppData%\..\Local Settings\Application Data\Chromium\User Data\Default\Extensions\

Windows Vista/7/8:
  Chrome  : %LocalAppData%\Google\Chrome\User Data\Default\Extensions\
  Chromium: %LocalAppData%\Chromium\User Data\Default\Extensions\

Linux:
  Chrome  : ~/.config/google-chrome/Default/Extensions/
  Chromium: ~/.config/chromium/Default/Extensions/

Mac OS X:
  Chrome  : ~/Library/Application Support/Google/Chrome/Default/Extensions/
  Chromium: ~/Library/Application Support/Chromium/Default/Extensions/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:10:38.183

Well, I just did the disable all extensions thing. [Chrome Sniffer](https://chrome.google.com/webstore/detail/chrome-sniffer/homgcnaoacgigpkkljjjekpignblkeae) appears to be the culprit. Specifically in the following code (`detector.js`):

```
for (t in cssClasses) {
    // snipped for brevity
    for(css in cssClasses[t]) {
        // snipped for brevity
        for(cssFile in document.styleSheets) {
            for(cssRule in document.styleSheets[cssFile].cssRules) {
                // snipped for brevity
            }
        }
    }
} 
```

That will leak `t`, `css`, `cssFile`, and `cssRule` into global scope. Looks like I'm not the first to notice this: [https://github.com/nqbao/chromesniffer/pull/51](https://github.com/nqbao/chromesniffer/pull/51)

If anybody wants to answer with how I could have avoided the manual process I will accept your answer.

# java - 运行时布尔值变化

> ID：13896040
> 
> 赞同：0
> 
> 时间：2012-12-15T20:45:11.693
> 
> 标签：java, eclipse, graphics, boolean

只需要一点帮助就可以在我的代码中找到错误（？），将布尔 avtive 的默认值设置为 false 但是当我运行代码时，它神秘地变为 true

```
 import javax.swing.*;
    import java.awt.*;
    import java.net.URL;

    @SuppressWarnings("serial")
    public class openScreenBuild extends JPanel{
    String picPath = "pictures/";
    String[] fileName = { "openScreen.png", "playButtonPress.png",
    "playButtonRelease.png", "playButtonInactive.png" };
    ClassLoader cl = openScreenBuild.class.getClassLoader();
    URL imgURL[] = new URL[4];
    Toolkit tk = Toolkit.getDefaultToolkit();
    Image imgBG, imgPlayPress, imgPlayRelease, imgPlayInactive;
    Boolean active=false, playPress = false;

    public openScreenBuild() throws Exception {
        for (int x = 0; x < 4; x++) {
            imgURL[x] = cl.getResource(picPath + fileName[x]);
        }
        imgBG = tk.createImage(imgURL[0]);
        imgPlayPress = tk.createImage(imgURL[1]);
        imgPlayRelease = tk.createImage(imgURL[2]);
        imgPlayInactive = tk.createImage(imgURL[3]);
    }
    public void updateScreen(){
        repaint();
    }
    public void paintComponent(Graphics g) {
        g.drawImage(imgBG, 0, 0, 600, 460, 0, 0, 600, 460, this);
        if (active=true){
            if (playPress == false)
                g.drawImage(imgPlayRelease, 410, 355, 590, 450, 0, 0, 163, 87, this);
            else if (playPress == true)
                g.drawImage(imgPlayPress, 410, 355, 590, 450, 0, 0, 163, 87, this);
            System.out.println("Active");
        }
        else if(active=false){
            g.drawImage(imgPlayInactive, 410, 355, 590, 450, 0, 0, 163, 87, this);
            System.out.println("Inactive");
        }
        g.setColor(Color.WHITE);
        g.drawString("ABOUT PROGRAM STUFF", 25, 375);
    }
    public void checkCoord(Point point){
        int xPos=(int)point.getX();
        int yPos=(int)point.getY();
        if (active==true){
            if ((yPos>=355)&&(yPos<=450)&&(xPos>=410)&&(xPos<=590))
                playPress=true;
        }
        updateScreen();
    }
    public void resetScreen(){
        playPress=false;
        updateScreen();
    }
} 
```

如您所见，如果 active 为 false，则应显示非活动的播放按钮图像，但如果为 true，则显示单击/释放图像。如果它处于活动状态或不活动状态，它也会在系统框中输出（？）（不确定它叫什么）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T20:46:30.673

```
 if (active=true) 
```

将 active 分配给 true。你要：

```
 if (active==true) 
```

# java - 使用 getInt(String) 时出现 NullPointerException

> ID：13896041
> 
> 赞同：0
> 
> 时间：2012-12-15T20:45:12.887
> 
> 标签：java, android, timertask

我是android初学者，所以请放轻松。我正在做一些“练习”，我正在编写简单的应用程序，它将告诉家庭 wifi 网络的 RSSI 强度。得到这个数字很容易，但是更新它并在屏幕上显示它就像我想的那样复杂一点。

首先这是我的 onCreate 活动。在此活动中，我将启动另一个 android 组件 - 服务。因为代码将在后台运行（我知道我可以使用线程或其他东西，但这是为了“练习”，我有一些想法如何处理这个应用程序，同时运行服务而不与 UI 交互）

```
public class MainActivity extends Activity {
    TextView wifi_check;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        referenceViews();

        startService(new Intent(this, CheckingWifiService.class));
        //wifi_check.setText(""+getIntent().getExtras().getInt("RSSI"));
    }

    private void referenceViews() {

        wifi_check = (TextView) findViewById(R.id.wifiCheck_TV);
    }
} 
```

因为我的代码将每隔一秒左右运行一次，所以我将为此使用 TimerTask。这是我的 TimerTask 类，其中包括 run() 方法和用于在内部执行的代码

```
public class TimerTsk extends TimerTask {
    Context act;
    WifiManager wifiMan;
    WifiInfo info;
    Bundle sendInfo;
    Intent intent;
    int rssi;

    public TimerTsk(Context context) {
        act = context;
    }

    @Override
    public void run() {
        intent = new Intent();  
        sendInfo = new Bundle();

        wifiMan = (WifiManager) act.getSystemService(Activity.WIFI_SERVICE);

        info = wifiMan.getConnectionInfo();
        rssi = info.getRssi();
        Log.d("WORKED", "RUNNING SUCESSFULLY");

        // i want to send info to my activity

        sendInfo.putInt("RSSI", rssi);
        intent.putExtras(sendInfo);
    }
} 
```

从这个类中，我想将 RSSI 的结果发送到我的活动，然后更新文本。但是当我在下面调用这段代码时，在活动中我总是得到 NullPointerException。

```
wifi_check.setText(""+getIntent().getExtras().getInt("RSSI")); 
```

老实说，我很难弄清楚代码的哪一部分抛出了异常。而且我发现更准确地说，这部分代码正在抛出异常。

> getInt("RSSI")

总的来说，我看到该服务正在运行，因为在我的 LOGCAT 中，我看到了我在 TimerTsk 类中使用 Log.d 创建的消息。

任何想法为什么会发生这种情况？

这是我的服务类：

```
public class CheckingWifiService extends Service{

int rssi;
Timer time;
TimerTsk ttsk;

@Override
public IBinder onBind(Intent intent) {

    return null;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {

time = new Timer();
time.schedule(new TimerTsk(getApplicationContext()), 500);

    return START_STICKY;
} 
```

}

这是我的 LogCat：

![在此处输入图像描述](../Images/4830581c6b42fd43708021618cf86d0b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T20:50:19.687

我看到一个常见的错误。不要这样做：

```
sendInfo.putInt("RSSI", rssi);
intent.putExtras(sendInfo); // This adds a Bundle to your existing Bundle! 
```

您正在创建一个 Intent，带有一个 Bundle 的附加功能，一个 Bundle 包含`rssi`. 省去这个不必要的 Bundle：

```
intent.putExtras("RSSI", rssi); 
```

现在在您的下一个活动中，您可以使用：

```
getIntent().getIntExtra("RSSI", 0); 
```

但是，您应该始终检查以确保没有任何意外`null`变量：

```
Intent in = getIntent();
if(in != null) {
    int rssi = in.getIntExtra("RSSI", -1);
    if(rssi < 0)
        wifi_check.setText(""+rssi);
    else
        wifi_check.setText("Unknown");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T20:57:42.240

你的活动开始了吗？我没有看到对 startActivity() 的任何调用。在 Sam 提到的任何情况下，您只需要调用 putExtra 即可。别忘了打电话

你的活动开始了吗？我没有看到对 startActivity() 的任何调用。在 Sam 提到的任何情况下，您只需要调用 putExtra 即可。别忘了打电话

```
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

从后台启动活动时，您需要放置此标志

# intellij-idea - JProfiler 在 IntelliJ 12 中不起作用（JProfiler 可执行文件为空）

> ID：13896044
> 
> 赞同：3
> 
> 时间：2012-12-15T20:45:39.127
> 
> 标签：intellij-idea, jprofiler

我正在尝试分析我的 Android 应用程序。我通过安装 JProfiler 插件

> IntelliJ IDEA --> 首选项 --> 插件

这是插件描述的屏幕截图：

![JProfiler 插件说明](../Images/160695af684cfaebc3b0625167175093.png)

当我尝试运行探查器时，什么也没有发生，我收到这条消息说 JProfiler 可执行文件为空：

![在此处输入图像描述](../Images/b384873b41c0d907b818333872e534a2.png)

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T20:37:03.603

您需要设置或重新设置 JProfiler 可执行文件。请执行下列操作：

*   从“运行”下拉菜单中选择“编辑配置”
*   在对话框中的“默认值”下选择“应用程序”（或任何现有的运行配置）
*   选择“启动/连接”选项卡
*   在列表中选择“JProfiler”
*   单击“选择 JProfiler 可执行文件”按钮
*   选择 JProfiler 可执行文件，即

    > *   [JProfiler 安装目录]\bin\jprofiler.exe on Windows
    > *   【JProfiler 安装目录】Linux/Unix 上的/bin/jprofiler
    > *   [JProfiler 安装目录]/bin/macos/jprofiler.sh on Mac OS X

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-17T20:32:44.767

你必须先安装 JProfiler，你可以[在这里](http://www.ej-technologies.com/download/jprofiler/files)下载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T20:30:09.653

您需要拥有与 IntelliJ IDEA 12 [http://www.ej-technologies.com/download/jprofiler/changelog.html#7.2.2集成的 JProfiler 7.2.2（或更新版本）](http://www.ej-technologies.com/download/jprofiler/changelog.html#7.2.2)

首先，在文件浏览器中检查是否有 plugins 文件夹，如果没有，请创建它，所以它看起来像这样

```
C:\Users\[username]\.IntelliJIdea12\config\plugins 
```

如果运行 IntelliJ IDEA 12，请将其关闭。

在 JProfiler 里面去

```
Session -> IDE Integrations 
```

并选择`IntelliJ IDEA 12.x`并单击`Proceed`按钮

选择你的`.IntelliJIdea12`文件夹

```
C:\Users\[username]\.IntelliJIdea12 
```

你已经完成了，你应该看到一个新按钮旁边`Run [class#method] with Coverage`说`Profile [class#method]`

# ajax - 在 div 中加载 Wordpress 页面，无需重新加载页面，同时更改 url

> ID：13896045
> 
> 赞同：0
> 
> 时间：2012-12-15T20:45:47.753
> 
> 标签：ajax, wordpress, sidebar

我正在为一个客户编写一个网站，他们要求因为他们在一个父级下有很多侧边栏页面，所以当点击页面链接时，它每次都加载到同一区域而无需重新加载页面。他们还要求在重新加载时更改 URL，并且您可以通过转到该特定 URL 来访问每个页面。不幸的是，我不知道该怎么做。我发现了很多教程和片段，但它们没有提供确切的功能。

例如，如果你去这里： http: [//lookseewatch.com/independentinsurance/commercial-insurance/](http://lookseewatch.com/independentinsurance/commercial-insurance/)

您会看到他们提供的不同类型商业保险的长边栏。当您单击“汽车”或任何与此相关的链接时，该页面应加载到侧边栏右侧的 div 区域中。然后 URL 应更改以反映此更改为[http://lookseewatch.com/independentinsurance/commercial-insurance/automobile/](http://lookseewatch.com/independentinsurance/commercial-insurance/automobile/)。所有这些页面在 Wordpress 中都是独立且动态的。

谁能给我一些帮助？这是当前生成侧边栏的方式：

```
wp_list_pages('title_li=&child_of='.$post->ID.''); 
```

如果您需要我提供的任何其他代码或对功能有任何疑问，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:28:41.977

这有点复杂。有很多方法可以捕获用户事件、停止默认行为并在其上运行自定义代码。例如，您可以收听锚点点击并返回 0 以不加载它们的链接。

但是如果你在浏览器地址栏中更改URL，据我所知，JS无法控制它，因为它在网页域之外，从外部网页控制浏览器组件会打开很多安全漏洞。

这看起来他们想避免横幅加载以减少点击次数：P 如果性能是问题，首先您可以使用缓存插件，它将所有数据库查询存储在 HD 中，并在未来的页面加载中使用这些文件，而不是制作新的查询。

您还可以将完整的侧边栏构建到 PHP 变量中，将其缓存为 HD 并从那里读取，而不是每次都构建整个代码。这就像添加静态 HTML 片段一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:18:04.157

这可以通过结合 AJAX 的称为 pushstate 的技术来完成。有一个很棒的 jQuery 插件叫做 PJAX 来实现这个。[http://pjax.heroku.com/](http://pjax.heroku.com/)

我刚刚发布了一个名为 WP-PJAX 的插件，它使整个 wordpress 站点 PJAX 驱动。我不确定这是否能解决您的问题，但它可能适合您。 [https://github.com/pelmered/wp-pjax](https://github.com/pelmered/wp-pjax)

# css - css在表格单元格内移动边框

> ID：13896047
> 
> 赞同：2
> 
> 时间：2012-12-15T20:45:57.313
> 
> 标签：css, border

我有表格单元格，我将各种图像设置为边界，单元格周围没有边距。有没有办法在图像内放置一个彩色边框，将边框推入单元格而不是边缘？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-09-28T08:59:00.707

如果您可以使用 CSS3，请查看`outline`属性。此示例在表格单元格内制作 2px 的蓝色边框。

CSS：

```
td.bordred {
    outline: solid 2px #377bb5;
    outline-offset: -2px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T20:51:56.570

你试过玩`border-style: inset;`吗？

# tree - erlang中的双链接数据结构

> ID：13896048
> 
> 赞同：5
> 
> 时间：2012-12-15T20:45:59.887
> 
> 标签：tree, erlang

嗨，我想制作一棵在父子之间保持双向引用的树。但似乎不可能实现，因为当我创建第一个对象时，我没有另一个对象，因此无法引用它。这是一些示例代码。

```
-record(node,{name,children,root}).

main()->
    A = #node{name="node-A",
          children=[B], %variable B is  unbound
          root=nil},
    B = #node{name="node-B",
          children=[],
          root=A},
    Tree = A. 
```

这个问题的另一个例子是实现一个双向链表（http://en.wikipedia.org/wiki/Doubly_linked_list）

```
-record(node,{prev,name,next}).

main()->
    A = #node{prev=nil,
          name="node-A",
          next=B}, % variable B is unbound
    B = #node{prev=A,
          name="node-B",
          next=nil},
    LinkedList = A. 
```

有没有办法实现这种结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T21:15:57.110

当您有“链接”（如指针）时，您可以创建双向链表。在erlang中你没有这样的链接，你甚至没有真正的变量，你不能改变它们。以下是循环列表的一些示例，但应谨慎实施：[Can Circular Lists are defined in Erlang?](https://stackoverflow.com/questions/8884615/can-circular-lists-be-defined-in-erlang)

也许您可以告诉我们为什么需要双向链接树？也许在erlang中有更好的解决方案。

编辑：您可以使用[digraph](http://www.erlang.org/doc/man/digraph.html)。您的树可以表示为循环图，其中您有从 A 到 B 和从 B 到 A 的顶点。具有根节点 A 和子节点 B 和 C 的树示例：

```
main()->
    Tree = digraph:new([cyclic]),
    A = digraph:add_vertex(Tree,"vertexA"),
    B = digraph:add_vertex(Tree,"vertexB"),
    C = digraph:add_vertex(Tree,"vertexC"),
    digraph:add_edge(Tree, A, B),
    digraph:add_edge(Tree, B, A),
    digraph:add_edge(Tree, A, C),
    digraph:add_edge(Tree, C, A),
    digraph:get_path(Tree, B, C). 
```

结果：`["vertexB","vertexA","vertexC"]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T07:52:54.200

您可以检查这在 ferd 的 zippers 库中是如何[实现](https://github.com/ferd/zippers)的

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T15:30:10.157

您可以定义一条记录，例如

-record(my_node,{leftchild,rightchild,parent,value}.

并将您的树存储在 ets 表中，

```
ets:new(my_tree,[named_table, ordered_set, public]),
... 
```

然后您可以使用表键作为“指针”来管理链接

```
Root = {make_ref(),#my_node{value=somevalue}}
ets:insert(my_tree,Root),
A_child = {make_ref(),#my_node{value=othervalue}},
addchild(Root,A_child,left),
...

addchild(Parent={Pref,Pval},Child={Cref,Cval},left) ->
    ets:insert(my_tree,{Pref,Pval#my_node{leftchild=Cref}}),
    ets:insert(my_tree,{Cref,Cval#my_node{parent=Pref}});
addchild(Parent={Pref,Pval},Child={Cref,Cval},right) ->
    ets:insert(my_tree,{Pref,Pval#my_node{rightchild=Cref}}),
    ets:insert(my_tree,{Cref,Cval#my_node{parent=Pref}}). 
```

但也许您应该查看更多“erlang 风格”的数据表示来解决您的问题。我提出的解决方案还有一个问题，如果有多个进程访问树，因为树的更新不是原子的。在这种情况下，您应该使用 mnesia，它是 ets 之上的一个数据库层，它将为您带来原子事务。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-17T00:34:22.640

不，没有直接的方法在 Erlang 中实现双向链表，因为所有数据都是不可变的。即使你可以设置它（你不能），你也无法对所有数据不可变**做任何事情。**此处介绍的其他解决方案向您展示了通过构建以双向链表方式运行的数据结构来解决此问题的方法。但不是。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-16T07:47:00.893

如果你*真的*需要做类似的事情，你可以使用某种 ID 来引用你的节点。例如

```
A = #node{name="node-A",
      children=["node-B"],
      parent=nil},
B = #node{name="node-B",
      children=[],
      parent="node-A"},
NodeDict = dict:from_list([{A#node.name, A}, {B#node.name, B}]),
Tree = #tree{root=A#node.name, nodes=NodeDict}. 
```

# php - 使用 cURL 登录其他网站？

> ID：13896049
> 
> 赞同：1
> 
> 时间：2012-12-15T20:46:01.727
> 
> 标签：php, curl

我正在尝试使用 PHP cURL 登录[https://www.iwgac.com/](https://www.iwgac.com/)，然后检索网站的产品价格。一开始我尝试登录然后回显主页看价格是否可见（产品价格只有登录后可见）。

该网站似乎不接受登录（尽管 cookie.txt 文件发生了变化）。这是代码，基于我在stackoverflow上找到的其他答案：

```
class Curl {

    public $cookieJar = "";

    // Make sure the cookies.txt file is read/write permissions
    public function __construct($cookieJarFile = 'cookie.txt') {
        $this->cookieJar = $cookieJarFile;
    }

    function setup() {
        $header = array();
        $header[0]  = "Accept: text/xml,application/xml,application/xhtml+xml,";
        $header[0] .= "text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5";
        $header[]   = "Cache-Control: max-age=0";
        $header[]   = "Connection: keep-alive";
        $header[]   = "Keep-Alive: 300";
        $header[]   = "Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7";
        $header[]   = "Accept-Language: en-us,en;q=0.5";
        $header[]   = "Pragma: "; // browsers keep this blank.

        curl_setopt($this->curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.2; en-US; rv:1.8.1.7) Gecko/20070914 Firefox/2.0.0.7');
        curl_setopt($this->curl, CURLOPT_HTTPHEADER, $header);
        curl_setopt($this->curl, CURLOPT_COOKIEJAR, $this->cookieJar);
        curl_setopt($this->curl, CURLOPT_COOKIEFILE, $this->cookieJar);
        //curl_setopt($this->curl, CURLOPT_AUTOREFERER, true);
        curl_setopt($this->curl, CURLOPT_FOLLOWLOCATION, true);
        curl_setopt($this->curl, CURLOPT_RETURNTRANSFER, true);
    }

    function get($url) {
        $this->curl = curl_init($url);
        $this->setup();

        return $this->request();
    }

    function getAll($reg, $str) {
        preg_match_all($reg, $str, $matches);
        return $matches[1];
    }

    function postForm($url, $fields, $referer = '') {
        $this->curl = curl_init($url);
        $this->setup();
        curl_setopt($this->curl, CURLOPT_URL, $url);
        curl_setopt($this->curl, CURLOPT_POST, 1);
        curl_setopt($this->curl, CURLOPT_REFERER, $referer);
        curl_setopt($this->curl, CURLOPT_POSTFIELDS, $fields);
        return $this->request();
    }

    function getInfo($info) {
        $info = ($info == 'lasturl') ? curl_getinfo($this->curl, CURLINFO_EFFECTIVE_URL) : curl_getinfo($this->curl, $info);
        return $info;
    }

    function request() {
        return curl_exec($this->curl);
    }
}

$curl = new Curl();

$url = "http://www.iwgac.com/index.php";
$fields = "form_name='main_login_form'&return_url='index.php'&user_login='**'&password='**'&remember_me='Y'&dispatch[auth.login]='Sign in'";

$html = $curl->postForm($url, $fields, $referer);
$html = curl_init();
curl_setopt($html, CURLOPT_COOKIE, 'cookie.txt');
curl_setopt($html, CURLOPT_COOKIEFILE, 'cookie.txt');
curl_setopt($html, CURLOPT_URL, 'http://www.iwgac.com');
$html = curl_exec($html);
echo $html; 
```

有关解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:46:43.913

一如既往，基本：

1.  放`curl_setopt($this->curl, CURLOPT_AUTOREFERER, true);`
2.  提交表单前访问登录页面

和高级：使用像HttpFox这样的浏览器插件：

1.  查看提交的确切标题和发布数据。javascript通常会添加隐藏值以防止您正在做的事情
2.  查看确切的 cookie。它们可以由页面本身加载后加载的文件分配，我怀疑您请求 curl 包含的所有文件。

# c++ - 为什么我的程序在每次出现另一个字母后尝试插入一个字母时会崩溃？

> ID：13896055
> 
> 赞同：0
> 
> 时间：2012-12-15T20:46:58.823
> 
> 标签：c++, string

仅这一部分就使我的程序崩溃。这是为什么？这是在字符串中的每个“p”之后添加一个“u”。

```
for(int i=0;i<s.size();i++)
{
    if((s[i]=='p'))
    {
        s.insert(i,1,'u');
    }
}
cout<<"after adding u after each p: "<<s; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T20:54:53.360

（您在代码中写了 'u' 而不是 'h'。）

假设您的字符串只是“p”。所以 s[0] == 'p'。现在您在 0 处插入 'h'，因此字符串现在是“hp”（h 在 p 之前，而不是在您想要的之后）。在下一次迭代中 i 是 1 并且有 ap （它刚刚移到那里），因此将插入另一个 h 。这种情况一直持续到内存不足。

尝试：

```
s.insert(i + 1, 1, 'h'); 
```

# python - 如何使用python删除推文/字符串中的用户提及和网址

> ID：13896056
> 
> 赞同：2
> 
> 时间：2012-12-15T20:47:12.930
> 
> 标签：python

所以我想删除推文/字符串中的所有用户提及和网址。

例如，如果我有这样的推文：

```
@username1: some tweet here, http://www.url.com, aaaaa @username2 
```

我想得到这样的东西：

```
some tweet here, aaaaa 
```

我想使用正则表达式，但我对 python 很陌生，不知道该怎么做。

此外，推文存储在 JSON 文件（字典列表）中，每条推文（字典）都有一个名为“entities”的键，它以如下格式存储有关“user_mentions”、“urls”和“hashtags”的信息以下：

```
{u'user_mentions': [{u'indices': [3, 18],
                     u'screen_name': u'username1',
                     u'id': 1234567,
                     u'name': u'user name 1',
                     u'id_str': u'1234567'},

                    {u'indices': [108, 116],
                     u'screen_name': u'username2',
                     u'id': 112233,
                     u'name': u'user name 2',
                     u'id_str': u'112233'}],

 u'hashtags': [],
 u'urls': [{u'url': u'http://www.url.com',
            u'indices': [83, 103],
            u'expanded_url': u'http://www.url.com',
            u'display_url': u'http://www.url.com'}]
} 
```

有谁知道如何删除用户提及和网址？非常感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-15T22:04:39.550

```
from itertools import chain

result = []
for text, entries in ((t["text"], t["entries"]) for t in tweets):
    urls = (e["url"] for e in entries["urls"])
    users = ("@"+e["screen_name"] for e in entries["user_mentions"])
    text = reduce(lambda t,s: t.replace(s, ""), chain(urls, users), text)
    result.append(text) 
```

或使用正则表达式（它还删除尾随的非空白字符）：

```
text = re.sub(r"(?:\@|https?\://)\S+", "", text) 
```

或者两种方法的组合：

```
text = re.sub(r"(?:%s)\S*" % "|".join(map(re.escape, chain(urls, users))), "", text) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-29T16:03:45.703

您也可以将其组合到单行上，但这里是步骤的分解：

```
text = '@username1: some tweet here, http://www.url.com, aaaaa @username2'
processed_text = re.sub(r"(?:\@|http?\://|https?\://|www)\S+", "", text)
processed_text = " ".join(processed_text.split())
print(processed_text) 
```

输出：

```
some tweet here, aaaaa 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-21T14:21:43.970

我认为第一个答案应该是“实体”而不是“条目”。此外，如果您也尝试排除媒体中的网址，请不要忘记它。

[https://dev.twitter.com/overview/api/entities-in-twitter-objects](https://dev.twitter.com/overview/api/entities-in-twitter-objects)

对于 Python 3，也去除媒体 URL：

```
 from itertools import chain
    from functools import reduce

    result = []
    for text, entities in ((t["text"], t["entities"]) for t in user_timeline):
        urls = (e["url"] for e in entities["urls"])
        users = ("@" + e["screen_name"] for e in entities["user_mentions"])
        media_urls = ()
        if 'media' in entities:
            media_urls = (e["url"] for e in entities["media"])
        text = reduce(lambda t, s: t.replace(s, ""), chain(urls, media_urls, users), text)
        result.append(text) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-01T15:44:10.650

首先，我希望您能够访问推文>>>

```
import json
import glob
for filename in glob.glob('*.json'):
with open("plain text - preprocess.txt",'a') as outfile ,open(filename, 'r') as f:
    for line in f:
        if line=='\n':
            pass
        else:
            tweet = json.loads(line) 
            ###NOW DO SOMETHING WITH tweet['text'] 
```

使用 Regex 删除推文中不需要的 # 或 http 链接。这是我的做法>>>

```
import re
stringwithouthash = re.sub(r'#\w+ ?', '', tweet['text'])
stringwithoutlink = re.sub(r'http\S+', '', tweet['text']) 
```

\S 接受除空格以外的所有字符。

\w 包含 AZ,az,0-9

有关正则表达式的更多信息，请参阅[此链接](https://docs.python.org/3/library/re.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-29T11:05:17.800

```
test = "@username1: some tweet here, http://www.url.com, aaaaa @username2" 
```

```
import re
clean_text = re.sub(r'@\w+', '', text) 
```

输出将是

```
: some tweet here, http://www.url.com, aaaaa 
```

# sql - SQL Query-Find 百分比改进，或两个表值之间的百分比下降

> ID：13896060
> 
> 赞同：0
> 
> 时间：2012-12-15T20:47:51.220
> 
> 标签：sql, sql-server, tsql, sql-server-2000

我有两个临时表，它们为我提供了应用程序的特定作业运行时间。我想报告每个月的平均工作时间。然后注意差异。

第一个构建临时表的查询将输出第一个月的平均工作时间，第二个临时表包含第二个月的平均工作时间。

我想比较每个工作的百分比差异，衡量第二个月与第一个月之间的差异。

这是构建两个临时表的示例查询：

--二月份工作时间的临时表

```
CREATE TABLE #JobTimings_FEB(jobtime int, PRCSINSTANCE int ,
PRCSNAME char (30), PRCSTYPE char (30), RUNSTATUS char (30), 
OPRID char (30), RUNCNTLID char (30), BEGINDTTM char (30) , 
ENDDTTM char (30))--, #Executions char (10))
;
INSERT INTO #JobTimings_NEWSERV (jobtime, PRCSINSTANCE, 
PRCSNAME , PRCSTYPE, RUNSTATUS, OPRID, RUNCNTLID, BEGINDTTM, ENDDTTM)

SELECT DATEDIFF(ss,BEGINDTTM,ENDDTTM) AS jobtime, 
PRCSINSTANCE, PRCSNAME, PRCSTYPE, RUNSTATUS, OPRID, 
RUNCNTLID, BEGINDTTM, ENDDTTM
FROM PSPRCSRQST WHERE BEGINDTTM BETWEEN '2012-02-01 00:00:00.000' 
AND '2012-02-28 23:59:09.837' 
ORDER BY BEGINDTTM 
```

--一月份工作时间的临时表

```
CREATE TABLE #JobTimings_JAN(jobtime int, PRCSINSTANCE int , 
PRCSNAME char (30), PRCSTYPE char (30), RUNSTATUS char (30), 
OPRID char (30), RUNCNTLID char (30), BEGINDTTM char (30) , 
ENDDTTM char (30))--, #Executions char (10))
;
INSERT INTO #JobTimings_OLDSERV (jobtime, PRCSINSTANCE, 
PRCSNAME , PRCSTYPE, RUNSTATUS, OPRID, RUNCNTLID, BEGINDTTM, ENDDTTM)

SELECT DATEDIFF(ss,BEGINDTTM,ENDDTTM) AS jobtime, 
PRCSINSTANCE, PRCSNAME, PRCSTYPE, RUNSTATUS, OPRID, 
RUNCNTLID, BEGINDTTM, ENDDTTM
FROM PSPRCSRQST WHERE BEGINDTTM BETWEEN '2011-12-04 00:00:00.000' 
AND '2011-12-17 23:59:09.837' 
ORDER BY BEGINDTTM 
```

如上所述，我想找到两个月之间每个工作的查询百分比差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:30:38.163

您需要根据一些共同的值将两个表连接在一起。如果 PRCSINSTANCE 正在识别工作，那么查询将类似于：

```
SELECT m1.PRCSINSTANCE ,m1.PRCSNAME , --other static columns here
100 * (m2.jobtime - m1.jobtime) / m1.jobtime AS JobtimePercentChange
-- other calculations here 
FROM #JobTimings_JAN AS m1
JOIN #JobTimings_Feb AS m2
ON m1.PRCSINSTANCE = m2.PRCSINSTANCE; 
```

有关如何在 SQL Server 中使用联接的更多信息，请查看我的联接系列：http: [//sqlity.net/en/1146/a-join-a-day-introduction/](http://sqlity.net/en/1146/a-join-a-day-introduction/)

# java - 解析顶部元素包含对象列表的 XML 文档

> ID：13896065
> 
> 赞同：1
> 
> 时间：2012-12-15T20:48:24.023
> 
> 标签：java, xml, jaxb, jersey

我必须查询返回包含一张发票或发票列表的 XML 文件的多个 URL（我知道哪些 URL 将返回一个列表，哪些将只返回一个发票）。

单张发票格式（简体）：

```
<?xml version="1.0" encoding="UTF-8"?>
  <invoice>
    <invoice-id>1</invoice-id>
</invoice> 
```

发票清单的格式：

```
<?xml version="1.0" encoding="UTF-8"?>
<invoices>
  <invoice>
    <invoice-id>1</invoice-id>
  </invoice>
  <invoice>
    <invoice-id>2</invoice-id>
  </invoice>
</invoices> 
```

Jersey 可以自动处理第一个 xml 片段并将其转换为 Java 类：

```
@XmlRootElement
public class Invoice {
    @XmlElement(name="invoice-id")  
    Integer invoiceId;
} 
```

这是通过以下代码完成的：

```
GenericType<JAXBElement<Invoice>> invoiceType = new GenericType<JAXBElement<Invoice>>() {};
Invoice invoice = (Invoice) resource.path("invoice_simple.xml").accept(MediaType.APPLICATION_XML_TYPE).get(invoiceType).getValue(); 
```

以上作品。

现在我想要一个 InvoiceList 对象，如下所示：

```
@XmlRootElement
public class InvoiceList {
    @XmlElementWrapper(name="invoices")
    @XmlElement(name="invoice")
    List<Invoice> invoices; 
} 
```

这是我遇到问题的地方；InvoiceList.invoices 在以下情况下保持为空：

```
GenericType<JAXBElement<InvoiceList>> invoicesType = new GenericType<JAXBElement<InvoiceList>>() {};
InvoiceList invoices = (InvoiceList) resource.path("invoices_simple.xml").accept(MediaType.APPLICATION_XML_TYPE).get(invoicesType).getValue();      
// now invoices.invoices is still null! 
```

我知道 Jersey/JAXB 可以处理对象列表，但如果顶部元素包含列表，它似乎将不起作用。

所以，我的问题是：如何指示 Jersey 解析包含发票对象列表的 xml 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T15:45:34.267

第一个答案是

放在. `nillable = true`_`@XmlElement`

```
@XmlElement(name = "invoice", nillable = true)
List<Invoice> invoices; 
```

我会这样做。（您不必包装已经包装的集合。）

```
@XmlRootElement
public class Invoices {

    public List<Invoice> getInvoices() {
        if (invoices == null) {
            invoices = new ArrayList<Invoice>();
        }
        return invoices;
    }

    @XmlElement(name = "invoice", nillable = true)
    private List<Invoice> invoices; 
} 
```

一些 JAX-RS 示例是这样的

```
@GET
@Path("/invoices")
public Invoices readInvoices() {
    // ...
}

@GET
@Path("/invoices/{invoice_id: \\d+}")
public Invoice readInvoice(@PathParam("invoice_id") final long invoiceId) {
    // ...
} 
```

# ruby-on-rails - Rails - 遗留数据库集成

> ID：13896066
> 
> 赞同：0
> 
> 时间：2012-12-15T20:48:39.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有一个带有本机 Rails 数据库和旧数据库的 Rails 应用程序。

我很好地查询了这些遗留表，但我也必须在其中插入记录。

但是Legacy table 不符合rails 约定WRT 的关键。Legacy Key 不是一个自动递增的整数，而是一个字符串（总是数字字符 0-9，但仍然是 DB 中的字符串属性）。Legacy 数据库有一个存储当前索引值的表，插入操作需要从“current_index”表中读取当前索引值，将其递增 1，并将该值保存回“index_table”，然后返回新的value，在插入语句中用于新键值。

现在我有手工制作的 SQL 来插入分散在各种控制器中的记录。我想清理它，并将其移动到模型中。

目前我这样做：

legacy_table.db：

```
class LegacyTable < Ldb
  self.table_name = "legacyTableName"
  self.primary_key "legacyKeyName"
end 
```

在控制器中：

```
def insert_legacy_record(attrs)
  result = Ldb.connection.exec_query("
      DECLARE @key int;
      EXEC dbo.getKeyField @key OUTPUT, 'RecordKey';
      SELECT @key as ref_key;
    ")
    newkey = result.first['ref_key']

  result = Ldb.connection.exec_query("
    INSERT INTO legacyTableName 
    (legacyKeyName,foo,...) 
    VALUES 
    ('#{newkey}','#{attrs[:foo]}',...)
  ")
end 
```

这很痛苦，因为我必须手动维护表属性列表及其作为 attrs 输入的相应值。

我可以只覆盖 activeRecord 的索引生成部分吗？这样我就可以做到这一点：

选项1

```
@item = LegacyTable.new
@item.attributes(data)
@item.save  <=== somehow override new index value generation 
```

还是我应该重写新方法，让它返回它生成的新键值？

选项2

```
newkey = LegacyTable.new(data)
@new = LegacyTable.find(newkey) 
```

我知道如何做 OPTION2，OPTION1 可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:57:43.277

在你的模型中覆盖`create`方法怎么样：`LegacyTable`

```
 def create
   # new_id = The code you use to get/set a new id for insertion
   self.id = new_id
   super # continue as normal
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:14:20.370

您可以创建一个初始化程序：

```
module Extensions
  module LegacyModelId
    extend ActiveSupport::Concern

    included do
      before_create :generate_legacy_id

      def generate_legacy_id
        result = Ldb.connection.exec_query("
          DECLARE @key int;
          EXEC dbo.getKeyField @key OUTPUT, 'RecordKey';
          SELECT @key as ref_key;
        ")

        self.id = result.first['ref_key']
      end
    end
  end
end 
```

在您的每个旧模型中：

```
class LegacyModelFoo < ActiveRecord::Base
  include Extensions::LegacyModelId

  ...
end 
```

这将在`before_create`您包含扩展的每个模型上添加回调，使其执行查找并分配新的 id。

# ruby - # 未定义的方法“大小” （无方法错误）

> ID：13896067
> 
> 赞同：2
> 
> 时间：2012-12-15T20:48:49.697
> 
> 标签：ruby

这是我正在运行的代码，它运行良好，直到我到达第 15 行。我运行的命令是：`ruby ex16.rb text.txt`. 这是我正在编写的一个练习示例，它旨在成为一个简单的小文本编辑器：

```
filename = ARGV.first
script = $0

puts "We're going to erase #{filename}."
puts "if you don't want that, hit CTRL-C (^C)."
puts "If you do want that, hit RETURN."

print "? "
STDIN.gets

puts "Opening the file..."
target = File.open(filename, 'w')

puts "Truncating the file. Goodbye!"
target.truncate(target.size)

puts "Now I'm going to ask you for three lines."

print "line 1: "; line1 = STDIN.gets.chomp()
print "line 2: "; line2 = STDIN.gets.chomp()
print "line 3: "; line3 = STDIN.gets.chomp()undefined method 'size'

puts "I'm going to write these to the file."

target.write(line1)
target.write("\n")
target.write(line2)
target.write("\n")
target.write(line3)
target.write("\n")

puts "And finally, we close it."
target.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T21:43:46.270

的行为`size`在版本之间发生了变化！它是 1.8 中的类方法和 1.9 中的类和实例方法。

```
print '-----File.instance_methods'; p File.instance_methods.sort.grep(/^si/)
print '-----File.singleton_methods'; p File.singleton_methods.sort.grep(/^si/)

case RUBY_VERSION
when '1.8.6'
    puts '1.8.6 '; p File.size('t.rb')
when '1.9.2'
    puts '1.9.2 '; p File.open('t.rb').size
    puts '1.9.2 '; p File.size('t.rb')
else
    puts 'not for this version'
end

$ ruby -v
ruby 1.8.6 (2010-09-02 patchlevel 420) [i686-darwin12.2.0]
$ ruby -w t.rb
-----File.instance_methods["singleton_methods"]
-----File.singleton_methods["size", "size?"]
1.8.6 
334 
```

```
$ ruby -v
ruby 1.9.2p320 (2012-04-20 revision 35421) [x86_64-darwin12.2.0]
$ ruby -w t.rb
-----File.instance_methods[:singleton_class, :singleton_methods, :size]
-----File.singleton_methods[:size, :size?]
1.9.2 
334
1.9.2 
376 
```

PS：有人否决了您的问题，可能是因为它太长了。下次只发布错误的行和理解有问题的行所必需的行。

# java - 字符串对象创建的微妙之处：别名和垃圾

> ID：13896068
> 
> 赞同：0
> 
> 时间：2012-12-15T20:49:01.490
> 
> 标签：java, string, string-literals, garbage, aliases

练习题：

```
Consider the following code:

String entree = new String (“chicken”);
String side = “salad”;
entree = “turkey”;
String dessert;
entree = side;
String extra = entree + side;
dessert = “pie”;

How many String objects were created, and how many are accessible at the end?
How many aliases are present, and is there any garbage? 
```

我的逻辑：创建了 3 个文字，一个带有 new 运算符的字符串，以及一个连接主菜和边，所以总共 5 个对象。

甜点和额外是 2 个对象，侧面和主菜的第三个分配。因此，在创建的 5 个对象中可以访问 4 个对象。

1别名，entre指side。

垃圾，主菜失去了对“火鸡”和“鸡肉”的提及。

你能帮我评估一下我对这个问题的思考过程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:59:08.350

如果尚未创建这四个文字，则将创建它们。

可以创建一个或两个新对象，`new String`因为 String 包含`char[]`

在卸载类之前，不会释放字符串文字。

当使用 String 时`+`， a `StringBuilder`、 one 或 two`char[]`和 a`String`被创建。

```
String extra = entree + side; 
```

可以翻译成

```
String extra = new StringBuilder().append(entree).append(side).toString(); 
```

这意味着有一个新的 StringBuilder/String 和一个`char[]`。

这意味着最多有 6 个对象可以被垃圾回收。

# c# - 将字符串写入 UTF-8 文件（无 BOM）时的奇怪行为 - 返回 ANSI 文件

> ID：13896070
> 
> 赞同：2
> 
> 时间：2012-12-15T20:49:16.613
> 
> 标签：c#, filesystems, .net-4.5

我正在尝试将 C# 字符串数据写入没有字节顺序标记 (BOM) 的 UTF-8 文件，但正在创建一个 ANSI 文件。

```
using (StreamWriter objStreamWriter = new StreamWriter(SomePath, false, new UTF8Encoding(false)))
{
objStreamWriter.Write("Hello world - Encoding no BOM but actually returns ANSI");
objStreamWriter.Close();
} 
```

根据UTF8Encoding类构造函数的[文档，将](http://msdn.microsoft.com/en-us/library/s064f8w2.aspx)*encoderShouldEmitUTF8Identifier*参数设置为 false 应该会禁止字节顺序标记。

我在我的英国 (en-gb) 计算机上使用 .NET Framework 4.5。下面是 ScreenWriter 对象的屏幕截图，显示了*UTF8Encoding*到位。

![StreamWriter 对象](../Images/553b0bcca07e7737c3cd5d49e5310d82.png)

那么为什么我从这个操作中得到一个 ANSI 文件（用 Notepad++ 检查）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:52:00.660

您写入文件的示例字符串仅包含 ASCII 范围内的字符。ASCII 范围由 ASCII、UTF-8 和大多数（全部？）ANSI 代码页共享。因此，鉴于没有 BOM，Notepad++ 没有指示是 UTF-8 还是 ANSI，并且显然默认为 ANSI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T20:53:17.320

如果没有 BOM 且没有 unicode 字符，您如何期望 Notepad++ 将其识别为 UTF-8？UTF-8、ANSI 和 ASCII 对于您发出的字符都相同吗？

（即使您包含一些 unicode 字符，Notepad++ 也可能难以猜测正确的编码。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T20:52:29.600

在“Hello world - Encoding no BOM but 实际上返回 ANSI”中，UTF8 和 ANSI 中没有任何字符的编码方式不同。由于没有 BOM，Notepad++ 显示文件以 ANSI 编码，因为没有“特殊字符”。尝试在文件中添加“é, à, ê”字符，Notepad++ 会将其显示为以 UTF8 编码而没有 BOM。

# git - Git：从裸机或非裸机导入

> ID：13896085
> 
> 赞同：3
> 
> 时间：2012-12-15T20:51:13.790
> 
> 标签：git, repository, git-bare

我一直在我的家庭本地服务器（Mac Mini）中托管裸存储库。

它的执行速度非常慢（可能是由于缺乏对大文件的 git 优化）

所以为了解决这个问题，我正在考虑将我的裸仓库移动到 BitBucket 私有仓库。只是为了试一试。

当我尝试从我的裸存储库导入 bitbucket 时。它有很多问题，比如它只导入我的暂存分支。

当我这样做的时候

```
git branch 
```

在 git bare repo 目录上，它只在我的分支列表中显示我的暂存。然后我做`git fsck --full`。它显示了许多与包相关的错误。另一个问题是，在 git bare repo 目录中，我发现了另一个与 repo 目录本身同名的文件夹。例如：我的 repo 目录名称是 repo.git/。这继续 repo.git/repo.git/repo.git/repo.git。

从这些问题来看，我认为我把我的裸存储库搞砸了。所以我正在考虑删除这个裸存储库并从我的正常/非裸存储库中导入到 bitbucket。

所以我的问题是：从裸存储库导入和从非裸存储库导入有什么区别，即使是很小的区别？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T02:26:09.567

> 从裸存储库导入和从非裸存储库导入是否有任何区别，甚至任何微小的差异？

不，前提是您的裸仓库拥有所有分支。

[这里解释了](https://confluence.atlassian.com/display/BITBUCKET/Importing+code+from+an+existing+project)从（非裸）repo 推送：

> 如果需要，您可以一次将多个分支推送到您的 Bitbucket 存储库。为此，请执行以下操作：

*   列出所有分支以确保您拥有所需的内容：
    `git branch -a`
*   确保`origin`本地存储库中的远程指向 Bitbucket。
    例如，如果您将 ssh 与 Bitbucket 一起使用，您将使用以下内容：
    `git remote set-url origin ssh://git@bitbucket.org/youraccount/reponame.git`
*   然后将所有分支推送到 Bitbucket: `git push -u origin --all`。

# sqlite - SQLite LIKE 参数无效

> ID：13896086
> 
> 赞同：0
> 
> 时间：2012-12-15T20:51:17.853
> 
> 标签：sqlite

我有以下内容：

```
sqlite3_prepare_v2(db, "SELECT c FROM t WHERE r LIKE ?", -1, &stmt, NULL);
int error = sqlite3_bind_text(stmt, 0, "test%", -1, SQLITE_STATIC); 
```

执行此操作时，`error`变为`SQLITE_RANGE`（“第二个参数`sqlite3_bind`超出范围”），但是当我使用`=`而不是`LIKE`.

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T20:57:04.273

从[文档](http://www.sqlite.org/c3ref/bind_blob.html)中：

第二个参数是要设置的 SQL 参数的索引。最左边的 SQL 参数的索引为 1。

# vb6 - 如何在使用 VB6 和 CDO 1.2.1 的 win7-32 和 Outlook 2003 中抑制 Outlook 的安全警告

> ID：13896087
> 
> 赞同：1
> 
> 时间：2012-12-15T20:51:18.067
> 
> 标签：vb6, outlook, cdo.message

我们有使用 CDO 1.2.1 在 Win XP 和 Outlook 2003 中工作的 VB6 代码。现在我们迁移到 Win7 32 位，我们收到了 Outlook 安全警告（不是 UAC），表明应用程序正在尝试访问特定的 Outlook 功能。我已经搜索了几个小时没有成功。我正在寻找具体的指导，而不是对我的代码本身进行更正。如果您有特定的代码在所述环境中显示通讯录，那就太好了！顺便说一句，建立一个本地地址列表而不是调用地址簿（因此需要 CDO）被拒绝，因此不是一个选择。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:41:40.313

您可以使用 Outlook Redemption 来完成您想要的，而不会出现安全警告。

[http://www.dimastr.com/redemption/home.htm](http://www.dimastr.com/redemption/home.htm)

# windows-8 - How to change the "Fullscreen in browser" for the Snapped view (Windows 8 apps - Construct 2)

> ID：13896088
> 
> 赞同：0
> 
> 时间：2012-12-15T20:51:35.013
> 
> 标签：windows-8, winjs, construct-2

I'm working on a **Windows 8 application** using **Construct 2**.

I set the `Fullscreen in browser` to `Letterbox scale`, and I want to change it to `Scale` for the Snaped view.

I found the `Windows8 on view state Snapped` event, but I didn't found the action that change the `Fullscreen in browser`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:02:29.457

I found a solution that works for me.

First I export the windows 8 application from construct 2 without minifying the script (uncheck Minify script), and then under VS2012 I added to the end of `c2runtime.js` this lines:

```
window.addEventListener("resize", onResize);
function onResize() {
    window.location.reload();
} 
```

and I changed the line **18068**, that contains the mode number to :

```
(Windows.UI.ViewManagement.ApplicationViewState.snapped == Windows.UI.ViewManagement.ApplicationView.value)?2:3 
```

Which means when the state view change, I set the **Fullscreen in browser** to `2` or `3` depending on `Windows.UI.ViewManagement.ApplicationView.value`

*PS : 0 = off, 1 = crop, 2 = scale, 3 = letterbox scale, 4 = integer letterbox scale*

The last part of the `c2runtime.js` :

```
 "media/",
    false,
    768,
    1366,
    (Windows.UI.ViewManagement.ApplicationViewState.snapped == Windows.UI.ViewManagement.ApplicationView.value)?2:3,
    true,
    true,
    true,
    "1.0",
    2,
    false,
    0,
    false
];
};

window.addEventListener("resize", onResize);
function onResize() {
    window.location.reload();
} 
```

# java - 将 JLabel 属性添加到匿名变量类型？

> ID：13896089
> 
> 赞同：0
> 
> 时间：2012-12-15T20:51:41.020
> 
> 标签：java, swing, user-interface, jlabel

我正在尝试为 JLabels 添加边框，但我没有它们的名称，它们是在循环中创建的，并且“this”关键字不能满足我的要求。

```
for(int i = 1; i < first; i++){
        this.setBorder(BorderFactory.createLineBorder(Color.black));
        dayBoxes.add(new JLabel(""));   
    } 
```

我希望空白的 JLables 具有除了没有文本之外的属性。

如果 JLabels 都有名称，我可以轻松地使用 name.setBorder ，但这里不是这种情况，我认为将它们全部命名在一个数组中会非常低效。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T20:56:43.093

```
for(int i = 1; i < first; i++) {
    JLabel label = new JLabel("");
    label.setBorder(BorderFactory.createLineBorder(Color.black));
    dayBoxes.add(label);   
} 
```

# performance - 计算一系列角度的余弦和正弦

> ID：13896093
> 
> 赞同：0
> 
> 时间：2012-12-15T20:51:54.867
> 
> 标签：performance, comparison, trigonometry

我应该创建一个程序来计算一系列角度 k*α 的余弦和正弦，其中 k 是一个不断增长的自然数（即 0、1、2、...），α 是一个介于 0 之间的常数角和π。我想让这个程序尽可能快。

因此，我想先计算每个角度的余弦，然后计算相关的正弦`sqrt(1-cos(k*α)^2)`。问题是正弦的符号，应该由角度k*α在实线上的位置来确定。

我想知道如何尽可能快地实现这种动态比较，或者最快的方法是否也是直接计算正弦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T16:52:46.817

一段时间后，我再次思考这个问题，我找到了一个非常简单的解决方案：

```
n = floor(k*alpha/pi);

if (n % 2 == 0)

    sin_alpha = +sqrt(1-pow(cos(k*alpha,2)));

else

    sin_alpha = -sqrt(1-pow(cos(k*alpha,2))); 
```

问题解决了。:)

# c# - 如何以编程方式为使用 ServiceStack Markdown 呈现的 html 设置模板？

> ID：13896095
> 
> 赞同：1
> 
> 时间：2012-12-15T20:51:57.823
> 
> 标签：c#, razor, markdown, servicestack

我正在使用来自 ServiceStack 的 Razor/Markdown 引擎，并且在将我自己的自定义模板/布局应用于一些渲染的 Markdown 时遇到了一些困难。Markdown 内容呈现完美，我只想将其注入到我选择的模板/布局文件中。

目前我有这个（效果很好）：

```
var rootPath = HttpContext.Current.Server.MapPath("~/");
var markdownPath = Path.Combile(rootPath, "NotFound.md");
var format = new MarkdownFormat();
var markdownContent = File.ReadAllText(markdownPath);
const string pageTitle = "Not Found";
var page = new MarkdownPage(format, rootPath, pageTitle, markdownContent);
format.AddPage(page);
var scopeArgs = new Dictionary<string, object>();
var html = format.RenderDynamicPageHtml(pageTitle, scopeArgs); 
```

现在我有一个我希望使用的布局文件位于“~/ErrorLayout.cshtml”，但是我不知道如何注入它。起初我想将 MarkdownPage 上的 Template 变量设置为我的布局文件的路径，但这不起作用。然后我尝试调用 format.AddLayout() ，不幸的是引发了异常。

任何帮助将不胜感激，如果我没有明确我想要做的事情，请随时要求我自己进一步澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:40:54.087

所以我已经解决了这个问题，但是我不确定我所做的是否是正确的方法，但是它可以工作并且没有抛出异常。如果我做错了，也许有更多知识的人可以纠正我（所以我会在接受我的答案之前让这个问题开放几天）。

我创建了一个实现 IVirtualPathProvider 接口的新类，并将其命名为 PathProvider

我还创建了一个实现 IVirtualFile 接口的类，并将其命名为 VirtualFile

然后，我将 MarkdownFormat 实例中的 VirtualPathProvider 设置为 PathProvider 的新实例。然后，我将我的 Markdownpage 实例上的 Template 变量设置为我想要使用的 cshtml 布局/模板文件的相对路径，并且在我之前提到的两个类中，在请求时返回此模板的相关内容这样做。

我的代码现在看起来像这样（以防其他人和我有同样的问题）：

```
var rootPath = HttpContext.Current.Server.MapPath("~/");
if (contents == null)
{
    var notFoundPath = Path.Combine(rootPath, "NotFound.md");
    contents = File.ReadAllText(notFoundPath);
}
var format = new MarkdownFormat
{
    VirtualPathProvider = new PathProvider()
};
const string pageTitle = "Not Found";
var page = new MarkdownPage(format, rootPath, pageTitle, contents)
{
    Template = "~/_Layout.cshtml"
};
 format.AddPage(page);
var view = new Dictionary<string, object>();
var html = format.RenderDynamicPageHtml(pageTitle, view); 
```

我的 PathProvider 类如下所示：

```
public class PathProvider : IVirtualPathProvider
{
    public IVirtualDirectory RootDirectory { get; private set; }
    public string VirtualPathSeparator { get; private set; }
    public string RealPathSeparator { get; private set; }
    public string CombineVirtualPath(string basePath, string relativePath)
    {
        throw new NotImplementedException();
    }

    public bool FileExists(string virtualPath)
    {
        throw new NotImplementedException();
    }

    public bool DirectoryExists(string virtualPath)
    {
        throw new NotImplementedException();
    }

    public IVirtualFile GetFile(string virtualPath)
    {
        return new VirtualFile(this, virtualPath);
    }

    public string GetFileHash(string virtualPath)
    {
        throw new NotImplementedException();
    }

    public string GetFileHash(IVirtualFile virtualFile)
    {
        throw new NotImplementedException();
    }

    public IVirtualDirectory GetDirectory(string virtualPath)
    {
        throw new NotImplementedException();
    }

    public IEnumerable<IVirtualFile> GetAllMatchingFiles(string globPattern, int maxDepth = 2147483647)
    {
        throw new NotImplementedException();
    }

    public bool IsSharedFile(IVirtualFile virtualFile)
    {
        throw new NotImplementedException();
    }

    public bool IsViewFile(IVirtualFile virtualFile)
    {
        throw new NotImplementedException();
    }
} 
```

最后是我的 VirtualFile 类：

```
public class VirtualFile : IVirtualFile
{
    public IVirtualDirectory Directory { get; private set; }
    public string Name { get; private set; }
    public string VirtualPath { get; private set; }
    public string RealPath { get; private set; }
    public bool IsDirectory { get; private set; }
    public DateTime LastModified { get; private set; }
    public IVirtualPathProvider VirtualPathProvider { get; private set; }
    public string Extension { get; private set; }

    public VirtualFile(IVirtualPathProvider virtualPathProvider, string filePath)
    {
        VirtualPathProvider = virtualPathProvider;
        VirtualPath = filePath;
        RealPath = HttpContext.Current.Server.MapPath(filePath);
    }

    public string GetFileHash()
    {
        throw new NotImplementedException();
    }

    public Stream OpenRead()
    {
        throw new NotImplementedException();
    }

    public StreamReader OpenText()
    {
        throw new NotImplementedException();
    }

    public string ReadAllText()
    {
        return File.ReadAllText(RealPath);
    }
} 
```

# javascript - jquery 1.7.1 的下拉兼容性问题

> ID：13896099
> 
> 赞同：0
> 
> 时间：2012-12-15T20:52:29.693
> 
> 标签：javascript, jquery, html, css

我遇到了 jquery 1.7.1 的兼容性问题

```
// menu-nav
$('#nav-menu ul ul').each(function() {
    $(this).children('li:first').addClass('first');
    $(this).children('li:last').addClass('last');
});
$('#nav-menu ul li.expanded').hover(
    function(){
        $(this).children('a').addClass('hover');
        $('ul:first',this).stop().css({height: 'auto', overflow:'', paddingTop: '2px'}).slideDown(250);
    },
    function(){
        $('ul:first',this).stop().slideUp(150, function() 
    {$(this).parent('li').children('a').removeClass('hover');}).css({height:'auto'}); 
```

[JS小提琴](http://jsfiddle.net/ZEk6X/)

我不确定我应该怎么做才能让它再次工作。

# java - 在java中关闭ResultSet后不允许操作

> ID：13896106
> 
> 赞同：0
> 
> 时间：2012-12-15T20:53:12.517
> 
> 标签：java, mysql, jsp, jdbc, resultset

我有一个名为数据库的课程。

```
 public class Database {
    public Connection connect = null;
    public Statement st = null;
    public PreparedStatement ps = null;
    public ResultSet rs = null;

    public boolean connectDB() throws Exception {
      try {

      Class.forName("com.mysql.jdbc.Driver");

      connect = DriverManager
        .getConnection("jdbc:mysql://localhost/ots?"
              + "user=root&password=mongolia");
    } catch (Exception e) {
      System.out.println(e);
    }
    return true;
   }

    public void disconnectDB() {
    try {
      if (rs != null) {
        rs.close();
      }

      if (st != null) {
        st.close();
      }

      if (connect != null) {
        connect.close();
      }
    } catch (Exception e) {

    }
    }

     } 
```

和名为用户的类，它正在扩展数据库类

```
public class User extends Database {
    public ResultSet fetchTable(){
        try{
            connectDB();            
            st = connect.createStatement();
            rs = st.executeQuery("SELECT * FROM user");         
        }catch(Exception e){
            System.out.println(e);
        }finally{
            disconnectDB();
        }
        return rs;
    }
  }
//Inside JSP page
  User user = new User();
  ResultSet data = user.fetchTable();

  //getting exception in the data.next() function
  //java.sql.SQLException: Operation not allowed after ResultSet closed

  while(data.next()){
        out.println("<p>"+data.getInt(0)+"</p>");
   }

//getting exception in the data.next() function
//java.sql.SQLException: Operation not allowed after ResultSet closed 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T20:57:56.700

例外是完全可以预料的。您正在连接数据库、获取结果集、关闭数据库和结果集，然后尝试访问已关闭的结果集。

这不是 JDBC 应该如何工作的。

您需要`List<User>`在检索结果集后直接将其映射到 a ，然后关闭结果集并返回`List<User>`。

对于一些具体的例子，前往这个问题的答案：[JDBC driver throws "ResultSet Closed" exception on empty ResultSet](https://stackoverflow.com/questions/1813858/sqlite-3-jdbc-driver-throws-resultsset-closed-exception-on-empty-resultset)

* * *

**与具体问题无关**，代码中还有其他严重问题。其中，您已将 和 声明为实例变量`Connection`，而不是方法局部变量。当多个线程之间共享同一个实例时，这将很难失败（当两个或多个用户同时访问您的 Web 应用程序时可能会发生这种情况）。我也会解决这个问题。`Statement``ResultSet`

* * *

**更新**：到目前为止发布的其他答案建议删除`disconnectDB()`调用或仅在迭代其他方法中的结果集后调用它。这是**错误**的。你不应该*把*方法传出`ResultSet`去。您的代码仍将是线程不安全的，并且在发生异常时您仍会冒资源泄漏的风险。您应该在同一个方法块中创建、使用和关闭它。这是从上述问题复制粘贴的正确方法：

```
public List<User> list() throws SQLException {
    Connection connection = null;
    PreparedStatement statement = null;
    ResultSet resultSet = null;
    List<User> users = new ArrayList<User>();

    try {
        connection = database.getConnection();
        statement = connection.prepareStatement("SELECT id, username, email, age FROM user");
        resultSet = statement.executeQuery();
        while (resultSet.next()) {
            users.add(new User(
                resultSet.getLong("id"),
                resultSet.getString("username"),
                resultSet.getString("email"),
                resultSet.getInteger("age")));
        }
    } finally {
        close(resultSet, statement, connection);
    }

    return users;
} 
```

# android - SearchView 作为查询 JSON

> ID：13896109
> 
> 赞同：1
> 
> 时间：2012-12-15T20:53:53.077
> 
> 标签：android, android-actionbar

因此，我想在 Actionbar中对`JSON`with进行查询，但顾名思义是针对 Search 的。`"SearchView"``SearchView`

我的意思是在将项目分配给变量 ( `EditText`, `Button`)后获得符号外观和从它们传输数据的可能性

我在网上搜索了这个主题，但一无所获。

我有这个视图的基本布局：

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
       android:id="@+id/menu_search"
       android:actionViewClass="android.widget.SearchView"
       android:icon="@drawable/action_search"
       android:showAsAction="always|collapseActionView"
       android:title="Search"/>
</menu> 
```

爪哇：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
           MenuInflater inflater = getMenuInflater();
           SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();
           inflater.inflate(R.menu.search_in_menu, menu);
           return true;
    } 
```

有什么建议么？

（我是初学者）

# php - 如何节省我将数据发送到其中的数据库的时间？

> ID：13896114
> 
> 赞同：0
> 
> 时间：2012-12-15T20:54:43.610
> 
> 标签：php, mysql, time

今天是个好日子！

一般来说，我的问题是关于 php/mysql 中的时间函数，我如何在 mysql 数据库中节省时间？对于日期，我在数据库中选择了“日期类型”来保存 $date，我在 php 中编写了这段代码：

`$date=date("y-m-d");`

这是我关于那部分的全部代码：

```
<?php 
include_once ("connection.php");
$name=$_POST['sent_by'];
$id=$_POST['hidden_id'];
$id2=$_POST['hidden_id2'];
$message=$_POST['message'];
$submit= $_POST['submit'];
$date=date("y-m-d");
$time=time('yyyy-mm-d hh:mm:ss');

if($submit){

$place="INSERT INTO comments VALUES('','$name','$message','$id','$id2','$date','$time')";
$run = mysql_query("$place");
die("Your message have been sent Successfully !! <a href='member.php'>click here to return to your page</a>");
}

?> 
```

**有时间我必须使用什么功能？我必须在数据库中选择哪种类型？**

请帮我！

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:00:33.197

我的建议是您使用时间戳或日期时间类型而不是日期类型，因为您需要日期和时间组件。时间戳类型有一些您需要注意的特殊属性，但如果您可以选择使用时间戳，那么从存储的角度来看这是更可取的。有关更多信息，请参阅[此](http://www.gizmola.com/blog/archives/93-Too-much-information-about-the-MySQL-TIMESTAMP.html)。

您还应该简单地让数据库设置插入时的时间，这可以使用时间戳自动完成，也可以使用 NOW() 手动完成。

根据您的代码执行此操作的一种方法是将您的查询更改为：

```
$place="INSERT INTO comments VALUES('','$name','$message','$id','$id2', NOW())"; 
```

请注意，您不再需要或不需要 php 来创建日期变量。您的 DATETIME 或 TIMESTAMP 列的值将设置为 mysql 数据库服务器的系统时间。

# rdf - 如何在 SPARQL 中验证日期时间对象？（Virtuoso 22007 错误 DT006）

> ID：13896118
> 
> 赞同：4
> 
> 时间：2012-12-15T20:55:02.747
> 
> 标签：rdf, sparql, freebase, dbpedia, virtuoso

我收到以下错误。

```
Virtuoso 22007 Error DT006: Cannot convert -0359 to datetime : Incorrect month field length

SPARQL query:
define sql:big-data-const 0 
#output-format:text/html
define sql:signal-void-variables 1 select ?item  bif:year(xsd:dateTime( str(?dob))) as ?m{
?item <h://f.cm/ns/common/topic/notable_types> <h://f.cm/ns/people/person> .
?item <h://f.cm/ns/people/person/date_of_birth> ?dob 
} limit 675 
```

如果我将限制更改为`674`，它可以工作。

我怀疑是某个日期时间字段在某处出错并打印出来`?dob`，这表明其中一个值是`-0359`.

`bif`解决方案是在应用函数之前验证值。

但是，我们如何在 SPARQL 中验证日期时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T17:07:14.993

好吧，我通过谷歌找到了这个问题，因为我遇到了同样的问题。在其他地方寻求帮助，我找到了以下解决方案：

```
SELECT * {

  ?s ?p ?o

  FILTER ( datatype(?o) = xsd:datetime )
  FILTER ( coalesce(xsd:datetime(str(?o)), '!') != '!')

} 
```

这对我有用。

请注意，我在[SemanticWeb](https://web.archive.org/web/20150111120450/http://answers.semanticweb.com:80/questions/20825/how-to-get-data-that-dont-match-their-datatype-in-sparql#20828 "answers.semanticweb.com")找到了答案。

# javascript - 本地主机上的 WebRTC 会话

> ID：13896121
> 
> 赞同：1
> 
> 时间：2012-12-15T20:55:24.650
> 
> 标签：javascript, xampp, webrtc

在此处使用 PeerConnection 演示 1：[https](https://webrtc-demos.appspot.com/html/pc1.html) : //webrtc-demos.appspot.com/html/pc1.html 是否支持在 Localhost 上的 XAMPP 服务器上运行它并能够将两台 PC 连接在一起？看起来会有支持，但我无法让它工作。任何 Javascript/HTML 专家都知道我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:33:31.627

您链接的演示仅适用于我的 Chrome Canary。

尝试使用这个：[http](http://simpl.info/peerconnection/) ://simpl.info/peerconnection/和[https://apprtc.appspot.com](https://apprtc.appspot.com)。

Adapter.js（在 apprtc 链接中使用）支持跨浏览器使用，并在从 api 中删除前缀时轻松转换 - 非常容易实现。

我都在本地 MAMPP 服务器上运行，只有后者需要一些编辑才能使本地视频正常工作。为我的本地 apprtc 实现交换会话描述是我希望很快完成的事情！

# javascript - 检查referrer并找到指向它的href，然后使用javascript触发点击

> ID：13896128
> 
> 赞同：0
> 
> 时间：2012-12-15T20:55:42.403
> 
> 标签：javascript, wordpress

我正在开发一个使用 AJAX 加载帖子内容的 WP 单页组合。我读到 WP 不需要`#!`URL 来使其可被 Googlebot 抓取。如果我理解正确，由于 Googlebot 不会解释 ajax，它只会跟随链接并索引文章页面。

所以我`#!`从我的 URL 中删除了，当一个帖子打开时，我用`.pushState`.
它工作正常，但如果我按 F5 或尝试加载特定 URL（不是主页），我会进入帖子页面（single.php）。

为了防止这种情况，我在 single.php 中添加了一个 javascript 重定向，将用户引导到主页。然后我需要在首页打开文章的内容。

这是我网站的地址：（`http://www.youpiemonday.com/`重定向尚未上线）。

我如何告诉浏览器“如果你来自这个页面（引用者），触发点击对应的href的缩略图”（点击将加载内容）？

我正在研究这个，但我不知道如何正确定位缩略图......

```
<script type="text/javascript">
    $referer = document.referrer; // where we come from
    $LinktoRef = $('.ProjectWrap').find("a").href; // the href in the thumbnail

    console.debug($LinktoRef); // still undefined...

        if ( $LinktoRef == $referer ){
            find("a").trigger('click');
        }
</script> 
```

这是 html 标记的样子：

```
<div id="portfolio-list">

    <div class="ProjectWrap">
           <a href="<?php the_permalink(); ?>"><?php the_post_thumbnail(); ?></a>
           <a href="<?php the_permalink(); ?>">
                <div class="contentProject">
                    <h4 class="ProjectTitle"><?php the_title(); ?></h4>
                </div>
           </a>
    </div>

    <div class="ProjectWrap">//same as above</div>
    <div class="ProjectWrap">//same as above</div>
    // and the list goes on...

</div> 
```

我不是真正的程序员，所以任何帮助将不胜感激。如果您可以评论您的代码，那对我来说将是无价的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:08:13.447

Because you are probably trying to reference the element before it is rendered on the page. Use document ready or window onload and reference the link there.

# android - Android BitmapFactory.decodeStream 无法解码某些 URL

> ID：13896129
> 
> 赞同：0
> 
> 时间：2012-12-15T20:55:49.633
> 
> 标签：android, bitmap, stream

我有一个奇怪的问题，我已经尝试解决了几个小时。问题是下面的代码可以解码所有图像，除了名称中第一个字母小的图像。例如，它适用于 Dog.png 或 123.png，但不适用于 dog.png、cat.png 或任何其他首字母较小的文件。它只是为它们显示一些随机颜色。我很困惑。有任何想法吗？

```
 Bitmap bitmap = null;

    options.inJustDecodeBounds = false;
    try {
        bitmap =  BitmapFactory.decodeStream((InputStream)new URL(imagePath).getContent(), null, options);
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    image.setImageBitmap(bimage); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T09:21:43.543

我找到了解决方案。来自这些 URL 的图片可以被解码，但问题是它太大了，所以它显示得非常大，看起来好像没有显示。

首先，我们需要像这样捕获图像的描述：

```
options.inJustDecodeBounds = true;
BitmapFactory.decodeStream((InputStream)new URL(url).getContent(), null, options); 
```

然后将其缩放到所需的宽度/高度，reqHeight/reqWidth 是想要的大小参数：

```
int height = options.outHeight;
int width = options.outWidth;
int inSampleSize;

if (height > reqHeight || width > reqWidth) {
if (width > height) {
inSampleSize = Math.round((float)height / (float)reqHeight);
} 
else {
inSampleSize = Math.round((float)width / (float)reqWidth);
}
} 
```

之后，只需重复问题中的代码：

```
Bitmap bitmap = null;

options.inJustDecodeBounds = false;
try {
    bitmap =  BitmapFactory.decodeStream((InputStream)new URL(imagePath).getContent(), null, options);
} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

现在我们可以将它保存到某个目录：

```
File file = new File(some_path\image.png);

    if (!file.exists() || file.length() == 0) {
            file.createNewFile();
            FileOutputStream fos = new FileOutputStream(file);
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
            fos.close();
            fos.flush(); 
```

现在保存的图像，我们可以抓取它并显示在名为 image 的 ImageView 中：

```
Bitmap bitmap = BitmapFactory.decodeFile(some_path\image.png);
image.setImageBitmap(bitmap); 
```

# javascript - 在列表中选择图片时获取列表项的存储记录

> ID：13896132
> 
> 赞同：0
> 
> 时间：2012-12-15T20:56:04.703
> 
> 标签：javascript, sencha-touch, sencha-touch-2

所以我有一个论坛格式的帖子列表，现在我希望能够在单击用户的头像图像时访问商店帖子的 posterID 属性。我已将选择侦听器附加到图像，但我不确定如何访问图像的父存储。我试过浏览 sencha 的文档，但搜索失败了。

```
store: 'topicStore',
itemTpl:
    '<div class="post">' +
        '<div class="header">' +
            '<img id="avatar" src="{avatar}" width=48 height=48>' +
            '<h2>{displayName}</h2>' +
            '<div class="date">on {postDate:date("m/d/Y")}</div>' +
        '</div>' +
        '<div class="body">' +
            '{message}' +
        '</div>' +
        '<tpl if="signature">' +
            '<hr />' +

            '<div class="signature">' +
            '{signature}' +
            '</div>' +
        '</tpl>' +
        '</div>',
    listeners: {
      select: function() { return false;},
        tap: {
            fn: function(event, el, record){
                tempElement = el.src;
                if (el.id != 'avatar'){
                    tempElement = tempElement.replace('_th.jpg', '_mid.jpg');
                    var logo = Ext.create( 'Ext.Img', {
                        src: tempElement,
                        id: 'logo',
                        mode: 'element'
                    });
                    app.fireEvent('forum-onimgview',logo);
                }
                else if (el.id == 'avatar'){
                    console.log(record);
                }
            },
            element: 'element',
            delegate: 'img'
        }
    } 
```

有谁知道如何获取所选项目的父商店？侦听器返回的所有获取都是图像和 dom 元素。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T11:12:29.483

尝试使用 itemTap 监听器，它会给你列表的参考。

我这样使用它：

```
listeners: {
        itemtap: function (list, index, element, record)
        {
            /* Put your logic here*/
        }
} 
```

更多细节可以在这里找到：[http ://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.DataView-event-itemtap](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.DataView-event-itemtap)

# image - 非彩色图像之间的相似性

> ID：13896136
> 
> 赞同：2
> 
> 时间：2012-12-15T20:57:10.320
> 
> 标签：image, image-processing, similarity

我想找到未着色图像之间的百分比相似度。具体来说，我想将自己的绘图与图像进行比较。这是一个示例图像：

![示例图片](../Images/734781100df41e2375ec092122b01fa6.png)

我对图像处理一无所知。可以使用哪些算法来实现我的目标？任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T11:58:14.787

如果您的图像都是黑白的，则可以计算[Hausdorff 距离](http://en.wikipedia.org/wiki/Hausdorff_distance)。简单来说，每个黑色像素就是一个点。对于图像 A 的每个点，您计算图像 B 的最近点。您将获得距离列表。Hausdorff 距离，是这个列表的最大值。它越小，您的图像就越相似。
您必须计算两个图像之间的几个相对位置/角度/纵横比，以便找到最匹配的位置。

您可以通过计算边缘将此方法扩展到任何非黑白图像。

# php - 在php中添加一个字符串和一个整数

> ID：13896143
> 
> 赞同：2
> 
> 时间：2012-12-15T20:57:49.420
> 
> 标签：php

我正在尝试在我的二进制代码前面添加一个 1 ，这就是我要做的事情：`0101`例如，如果我有 ，那么我会添加一个带有 4 个零的数字，比如 10000 所以它会变成 10101 .这是我的代码：

```
$fill = strlen($string);
$number = '1';
$add = str_pad($number, $fill, '0', STR_PAD_RIGHT);
$m1 = $string + $add; 
```

问题是输出类似于`1.random number e+Random number`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:05:51.270

假设`$string`是你的`"0101"`字符串，你可以这样做`$m1 = '1'.$string;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:08:39.560

My previous answer was wrong because the length of the string is potentially variable and `str_pad` requires you to know the length. This will work, but it doesn't look so elegant:

```
if (strpos($string, '0') === 0) {
   $string = '1' . $string;
} 
```

# c# - 想要在 Windows.Window 关闭时跟踪某些内容？

> ID：13896148
> 
> 赞同：0
> 
> 时间：2012-12-15T20:58:10.013
> 
> 标签：c#

我有一个继承自 Windows.Window 的类：

```
public partial class MainWindow : Window 
```

我想在它关闭时记录一些东西（logger.log（“Closing Application”））（无论如何 - 除了进程被杀死或当然）。

有没有办法让我超越或捕捉课堂上的事件或某些事情，让我能够做到这一点，而不会对正确关闭我的窗户产生负面影响？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:03:36.303

当然，你可以重写 OnClosed 方法并在那里添加你的东西：

```
protected override void OnClosed(EventArgs e)
{
    logger.log("Closing Application")
    base.OnClosed(e);
} 
```

[http://msdn.microsoft.com/en-us/library/system.windows.window.onclosed.aspx](http://msdn.microsoft.com/en-us/library/system.windows.window.onclosed.aspx)

# java - Android listarray 全局变量

> ID：13896152
> 
> 赞同：0
> 
> 时间：2012-12-15T20:58:41.527
> 
> 标签：java, android, arrays, global-variables, lifecycle

我有一项活动可以启动\停止我的服务。在服务中有alarmManager，每x分钟启动我的BroadcastReceiver。我需要在每个 BroadcastReceiver 的 ArrayList 中保留一些数据，并在下一个 BroadcastReceiver 中再次使用（添加/删除）它。我尝试在我的服务中创建静态 ArrayList，但是当我停止（重新启动）它时 - 我丢失了我的数据。当我再次开始我的主要活动时 - 由于生命周期，我丢失了数据......

所以我需要可以在 BroadcastReceiver 中访问的全局数组列表。从 onBoot 事件到手机死机，这个数组应该一直可用；）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:07:30.030

您可以为您的数据使用数据库，在开始时读取并在停止时写入。Andorid 教程介绍了如何处理数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:09:48.360

您必须在服务之外创建静态数组，例如在新类中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T21:35:44.980

确保当你停止 - 你不终止虚拟机 - 只是`finish()`活动。
如果您需要持久性，请使用共享首选项（最简单）或数据库。

# javascript - Jquery：加载时自动滚动页面的功能

> ID：13896155
> 
> 赞同：0
> 
> 时间：2012-12-15T20:59:09.293
> 
> 标签：javascript, jquery, html, css

我需要一个 jquery 函数，它将页面（从用户当前所在的位置）滚动 100 像素。请注意，此功能不是从顶部滚动，而是从当前位置滚动。到目前为止，我有：

```
 <script type="text/javascript"> 
  $(document).ready(function() {
     $(window).scrollTop($(window).scrollTop()+100);
  });
 </script> 
```

它什么也没做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T21:16:29.767

感谢@HirstoYankov 提供部分帮助。

下面是修复它的代码：

```
<script type="text/javascript">
   $(window).load(function () {
  $(window).scrollTop($(window).scrollTop()+1);
    });
</script> 
```

它重要的是使用`$(window).load`而不是`$(document).ready`

# c# - 使用 iPhone Apple Push Notification Provider (apns-sharp) 时出现 X509Certficate2 问题

> ID：13896161
> 
> 赞同：1
> 
> 时间：2012-12-15T20:59:36.377
> 
> 标签：c#, asp.net, x509certificate2, apns-sharp

在 Rackspace 云站点上的 .Net Web 服务中使用 APNS-Sharp。

实例化新的 X509 时，我完全没有反应。使用 apns-sharp 它是这一行：

```
public ApplePushChannelSettings(bool production, byte[] certificateData, string certificateFilePwd)
: this(production, new X509Certificate2(certificateData, certificateFilePwd,
X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.PersistKeySet | X509KeyStorageFlags.Exportable)) { }
g.log("APNSPush clientCertificate success - NEVER GETS HERE"); 
```

我也尝试过使用这条线的不同方法，但同样的悬挂响应......

```
clientCertificate = new X509Certificate2(certificatePath, certificatePassword, X509KeyStorageFlags.MachineKeySet | X509KeyStorageFlags.PersistKeySet | X509KeyStorageFlags.Exportable);
g.log("APNSPush clientCertificate success - NEVER GETS HERE"); 
```

奇怪的是没有发现任何错误，所以我不确定发生了什么。我曾怀疑这是试图获取我正在使用的证书（p12）的私钥的密钥存储访问问题，但我只是不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:42:00.890

原来，Rackspace 刚刚通知我这是由于在云站点环境中访问密钥存储的限制，我必须升级到云服务器才能使用此功能

# c++ - 将临时派生对象传递给需要基础对象引用的方法/函数

> ID：13896162
> 
> 赞同：1
> 
> 时间：2012-12-15T20:59:50.853
> 
> 标签：c++, polymorphism

前言：我希望能够存储来自派生（具体）类类型的对象的（抽象）基类引用，以便以后可以将其返回并转换为相同的派生（具体）类，而无需求助于指针并不断拥有担心所有权、内存泄漏和悬空指针/错误引用。

使用下面的层次结构，尝试的构造函数调用：`A(/* Other variables */, Bar(/* Bar variables */));`失败并显示 `Warning 3 warning C4239: nonstandard extension used : 'argument' : conversion from 'Bar' to 'Foo&' (Visual Studio 2010 SP1)

将 更改`class O`为包含 a`Foo* _foo`和构造函数初始化会`/*...*/, _foo(&foo)`导致悬空指针，因为在构造函数完成时临时对象被销毁。

**有没有办法将一个临时对象传递给一个需要引用的类并且不会让代码变得疯狂？**

`

```
/* ABSTRACT BASE CLASS */
class Foo {
    //...
};

/* DERIVED, CONCRETE CLASS */
class Bar : public Foo {
    //...
};

class O {
    O(/* Other variables */, Foo& foo) : /* Other member variable initializations */, _foo(foo) { }

    //...Other member variables here...
    Foo& _foo;
    friend class A;
};

class A {
    public:
        A(/* Other individual variables used to fully construct object 'O' */, Foo& foo) : /*...*/, _foo(foo) { }
    private:
        O _o

}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T21:07:34.767

> 有没有办法将一个临时对象传递给一个需要引用的类并且不会让代码变得疯狂？

不。当您处理引用时，您不必担心所有权的真正原因是所有权在其他地方处理 - 特别是在拥有被引用变量的级别。

当被引用的对象超出范围时，引用就变得无效（是的，引用也可以悬空）。只要对它的引用处于活动状态，被引用的对象就必须一直存在。这就是为什么你不能让临时对象很好地与引用一起使用：临时对象很快就会超出范围，从而使对它们的引用变得无用。

# php - 返回站点时触发弹出窗口

> ID：13896166
> 
> 赞同：0
> 
> 时间：2012-12-15T21:00:39.750
> 
> 标签：php, jquery

我正在尝试考虑当一个人由于单击 PayPal 的“取消并返回 thatsite.com”而重新进入该站点时如何触发弹出消息。

在所使用的 PHP/Jquery 购物车脚本中，以下代码会将它们发送回网站上的特定位置：

```
'&cancel_return='.$config['woowp'].'#order-cancelled/'.$ppl; 
```

我必须有一种简单的方法来触发 w/jquery 的弹出窗口，如（伪代码）：

```
IF hash/url = www.site.com/#order-cancelled
THEN fadeIn('slow') div#popup; 
```

我希望这个特定的 URL 有一个与之关联的弹出窗口。换句话说，当他们单击“取消并返回 thatsite.com”时，他们将被带到 www.thatsite.com/#order-cancelled，几秒钟后会出现一个弹出窗口。

我可以处理弹出 div 的标记，但如何触发它？（希望使用 jquery，因为我对 PHP 完全没用。）谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:04:18.117

```
if (window.location.hash == '#order-cancelled') {
   setTimeout(function () { $("#popup").show(); }, 2000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:04:25.947

您可以签`window.location.hash`入javascript并检查它是否等于`#order-cancelled`

# php - Jquery每10秒加载一次php脚本

> ID：13896171
> 
> 赞同：-4
> 
> 时间：2012-12-15T21:01:46.490
> 
> 标签：php, jquery, ajax

我如何让 jquery 每 10 秒加载一个 php 脚本，直到 php 脚本返回一个不为空的值？（然后它应该停止加载 php 脚本）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:06:43.970

[`setInterval()`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)会为你解决这个问题。

# php - 获取文档中的单词数

> ID：13896173
> 
> 赞同：0
> 
> 时间：2012-12-15T21:02:09.953
> 
> 标签：php, pdf, ms-word, rtf, word-count

我即将制作一个翻译网站（使用 PHP），人们可以在其中订购翻译来翻译他们的文档。人们可以从该站点上传他们的文件，然后将其连接到该站点的翻译/成员。问题是我如何制作一个从文档中计算价格的应用程序。

评价翻译价格的最常用方法是按字数计算。所以我需要知道客户上传的文档中有多少字。我认为必须有可能从文本文件（如 word 文档）中计算单词。但是，我找不到任何方法来获取 ms word 2003 文档 (.doc) 的确切数量。我找到了一种方法来计算 .docx，但不是 .doc。并且会有更多的文件，例如 PDF 或 rtf。

我见过另一种只计算文件大小的方法，但我认为它不会对不同的文档格式给出相同的结果。或者它是？我能想到的简单方法是要求访问者将他们的文本复制/粘贴到文本区域，但我认为这不是最好的方法。

有人会给我一个建议，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:08:00.363

If you're running your site on a *nix server, you might want to try the following:

```
$word_count = system("wc -w " . $filename); 
```

And, yes, I've been lead to believe that it works with .doc and .docx documents. PDF's are a whole other story. I'll have to research that one.

# rtp - 当 MPEG2 流通过 RTP 进入 MPEG-TS 容器时，如何找到帧结束？

> ID：13896174
> 
> 赞同：0
> 
> 时间：2012-12-15T21:02:14.750
> 
> 标签：rtp, multimedia, mpeg2-ts

我正在通过 RTP 接收 MPEG2-TS 流。但我无法找到特定帧的结尾。当只有 MPEG2 流通过 RTP 时，当任何帧结束时，RTP 标头中的标记位设置为 1，但在这种情况下，标记位始终为 0。谁能帮助我，我怎样才能找到帧结尾以防万一MPEG2-TS？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T06:18:28.303

根据 RFC 2250 M 位应指示在 mpeg-ts 的情况下帧的结束。（3.3 RTP Fixed Header for MPEG ES encapsulation）但是很多解码器可能没有把它放在头中。

找到帧开始的唯一其他方法是解码 188 字节 mpeg-ts 数据包的标头。mpeg-ts 包含“有效负载单元开始指示符”。

所以你的算法会像

1.  RTP 数据包含整数个 mpeg-ts 数据包。
2.  每个数据包以 0x47 开头
3.  检查每个数据包的“有效负载单元开始指示器”字段
4.  if "payload unit start indicator == 1" 检查 PES 或 PSI
5.  如果 PSI 则忽略数据包并继续步骤 1，否则转到下一步
6.  对于 PES 数据包检查“Stream id”，如果它的视频你击中了一个新的帧。

# html - 强制 IE8 或 IE9 文档模式为标准

> ID：13896176
> 
> 赞同：2
> 
> 时间：2012-12-15T21:02:37.317
> 
> 标签：html, cross-browser, internet-explorer-9, ie8-browser-mode

好吧，很抱歉在这里直言不讳，但过去 2 年我一直在 IE 8 和 IE9 上进行开发，但似乎无法做到这一点。我在abhor公司工作并为他们的网站开发。出于某种原因，IE8 或 IE9 默认为较低的文档模式，如 ie7 或 ie8。我已经尝试了一切...

1) 放置 HTML 5 doctype，仅此而已。根据微软的说法，这应该足够了 2) 将 html5 doctype 和 x-ua-compatible 元标记放在页面标题下的第一个位置，并分别设置为 edge 或 IE8 或 IE9。

我的页面看起来像这样

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7">
<![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-  ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <!     [endif]-->
<!--[if gt IE 8]> <html class="no-js"> <!   [endif]-->

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible"    content="IE=edge,chrome=1"> 
```

这真的令人沮丧，因为我读到的所有内容都说它应该有效。微软声称这会起作用，甚至只是设置 HTML 5 doctype 会起作用。我听说要设置一个 http 标头来修复，但老实说，微软是认真的吗？我很难相信开发人员需要更改他们的 apache 设置以添加 http 标头以使页面呈现我是标准模式

有人可以在这里帮助我吗？我错过了什么？？？我真的开始更讨厌微软了！！！！！！

**更新：：**

我最近发现我的公司已选中“在兼容性视图中显示 Intranet 站点”，如果我取消选中它，它看起来会正常工作。但是，这不是解决方案！在我阅读的所有地方，我看到如果您看到 X-UA 兼容的元标记或 http 标头，它应该优先。好吧，这完全是个谎言。其他人有答案吗？？我知道外部用户会很好，但是我的业务正在对此进行测试，他们提出问题是因为它们是内部的，很难说服他们并告诉他们取消选中该框。这并没有给他们很好的感觉。另外，我不能让桌面工程团队删除它，因为它已经到位，因为内部较旧的应用程序不是为了支持 IE8,9 而编写的，所以他们需要这个。

任何帮助表示赞赏。谢谢！

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T16:21:39.633

我们的 Intranet 也被锁定，所有 Intranet 站点都使用 Compatibility View，并使用 IE 8，因为它们都是 Windows XP。

我发现，一旦 IE 8 开始处理标准样板条件注释（以确定要附加到`<html>`标签的类），游戏就结束了：IE 决定此时它在兼容模式 (IE 7) 下运行，而我什么也做不了做会恢复的情况。

我发现通过将`<meta>`标签紧跟在`<!DOCTYPE>`标签之后，它的工作原理完全符合预期：

```
<!DOCTYPE HTML>
<meta http-equiv="x-ua-compatible" content="IE=Edge"> 
```

在我看来，这似乎不是很“标准”，但它确实有效。我喜欢这样做的任何替代方法，在我尝试了几个小时的情况下，`<meta>`可以将标签放入其中。`<head>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:15:26.280

您的代码的第 5 行和第 6 行有错误，正如 @JaredFarrish 在评论中所说，导致页面在 IE 上显示为空白。

在第 5 行的末尾，删除空格

```
<!     [endif]--> 
```

在第 6 行末尾，更改

```
<!--<!   [endif]--> 
```

至

```
<![endif]--> 
```

在您的实际页面上，稍后的代码中可能有一些内容可以阻止格式错误的构造在 IE 上导致的跳过。

目前还不清楚是什么让 IE 进入了 Quirks 模式。需要更多信息来解决这个问题。它甚至可能取决于页面所在的域，因此披露 URL 可能会有所帮助。有关一般性，请参阅[IE8 和 IE9 并发症](http://hsivonen.iki.fi/doctype/#ie8)（在设置浏览器模式中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T07:08:07.790

拉尔夫培根的回答只是为我解决了这个问题。我们使用的 html5 样板文件没有任何问题。如果你的 Intranet 使用的是兼容模式，那么你应该把这个

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

之后

```
<!DOCTYPE HTML> 
```

所以总的来说，你的标题应该是这样的：

```
<!DOCTYPE html>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]--> 
```

# ruby-on-rails - 将分页和索引操作的问题

> ID：13896177
> 
> 赞同：0
> 
> 时间：2012-12-15T21:02:42.113
> 
> 标签：ruby-on-rails, ruby

在我的索引操作控制器中，我有；

```
def index
  @documents = current_user.documents.all if current_user
end 
```

我在 current_user 末尾添加的任何内容都会出错。例如，我尝试添加 will_paginate ，它只是添加`.paginate(:per_page => 5, :page => params[:page])`到索引操作的末尾并添加`<%= will_paginate @documents %>`到视图中。

一旦我添加`.paginate(:per_page => 5, :page => params[:page])`到索引方法的末尾，就像这样；

```
def index
  @documents = current_user.documents.all if current_user.paginate(:per_page => 5, :page => params[:page])
end 
```

我得到一个`NoMethodError`. 有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:24:52.417

尝试

```
def index
  @documents = current_user.documents.paginate(:per_page => 5, :page => params[:page]) if current_user
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:23:15.280

您在错误的对象上调用该方法，这是正确的：

```
@documents = current_user.documents.paginate(:per_page => 5, :page => params[:page]) if current_user 
```

# c# - 如何在c#中将子表单添加到表单中

> ID：13896178
> 
> 赞同：0
> 
> 时间：2012-12-15T21:02:41.077
> 
> 标签：c#, .net, winforms, subforms

我有两个小问题要问您：如何在 C# 中将多个子表单添加到表单中，如下图所示：

![http://i.stack.imgur.com/ag1WD.jpg](../Images/8494f64ced4cfb2cb0fac9ed3e344127.png) [级联]

![http://i.stack.imgur.com/SzBGH.jpg](../Images/a6e1d53c01c60f0cb04c664ece9af0e5.png) [瓦]

第二个是如何管理他们的位置（Cascade、Tile 等）。感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T21:09:46.970

This is a [Multiple Document Interface (MDI)](http://msdn.microsoft.com/en-us/library/xyhh2e7e.aspx) form but, as Robert Harvey mentioned in a comment, there's probably a better way to build your UI.

To layout the child forms you will use the [LayoutMdi](http://msdn.microsoft.com/en-us/library/x9fhk181.aspx) method of the parent.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T21:09:49.280

It's called MDI (Multiple Document Interface). To do that, you need to change the `IsMdiContainer` property of the MainForm to `true`. And then you need to change the `MdiParent` property of the child Forms to your MainForm instance.

You can have a method in your MainForm class like:

```
public void MakeChildForm(Form childForm)
{
    childForm.MdiParent = this;
} 
```

# jquery - 如何在jQuery中选择一个元素

> ID：13896181
> 
> 赞同：1
> 
> 时间：2012-12-15T21:03:27.537
> 
> 标签：jquery, html, css

我正在为我的申请试验一种不同类型的审查系统。我有 5 个值从 1 到 5 的单选按钮，每个值都代表一种颜色。

如果用户要评论电影“蝙蝠侠：黑暗骑士”，它看起来像这样：

![在此处输入图像描述](../Images/f81b528302498cd1267b66900ba59c79.png)

当用户单击一个值时，它会更改背景颜色。我正在使用 jQuery 来控制它。

**问题是：**用户应该只能选择一个值，并且只有那个值应该改变背景颜色，现在你改变点击任何值，它就会改变它的背景颜色。

*我怎么能在 jQuery 中做到这一点，欢迎任何提示或想法！*

这是 jsfiddle 中的一个示例：http: [//jsfiddle.net/puWJZ/](http://jsfiddle.net/puWJZ/)

**HTML：**

```
<label class="input-check ch1">
 <input id="#rb1" type="radio" value="1"   name="reviewbutton" /> Bad
</label>
<label class="input-check ch2">
 <input id="#rb2" type="radio" value="2"   name="reviewbutton" /> Acceptable
</label>
<label class="input-check ch3">
 <input id="#rb3" type="radio" value="3"   name="reviewbutton" /> Good
</label>
<label class="input-check ch4">
 <input id="#rb4" type="radio" value="4"   name="reviewbutton" /> Very good
</label>
<label class="input-check ch5">
 <input id="#rb5" type="radio" value="5"   name="reviewbutton" /> Excellent
</label>
<div class="box">POP UP!</div> 
```

**CSS：**

```
.input-check {
    display: block;
    height:20px;
    padding:10px;
    width:90px;
    color:#EEEEEE;
    font-weight: 600;
    text-align: center;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
    border-radius: 3px;
    background-color: #333333;
    margin:10px;
    cursor: pointer;
}
input {
    display:none;
}
.ch1:hover{background-color: #ba0012; cursor: pointer;}
.ch2:hover{background-color: #ba0099; cursor: pointer;}
.ch3:hover{background-color: #00ba88; cursor: pointer;}
.ch4:hover{background-color: #0bbdf0; cursor: pointer;}
.ch5:hover{background-color: #f0b10b; cursor: pointer;} 
```

**jQuery：**

```
$(document).ready(function(){
    $('.box').hide();
    /* Bad */
    $('.ch1').click(function(){
        $(this).css({'background-color' : '#ba0012'});
        $('.box').show();
    });
    /* Acceptable */
    $('.ch2').click(function(){
        $(this).css({'background-color' : '#ba0099'});
        $('.box').show();
    });
    /* Good */
    $('.ch3').click(function(){
        $(this).css({'background-color' : '#00ba88'});
        $('.box').show();
    });
    /* Very good */
    $('.ch4').click(function(){
        $(this).css({'background-color' : '#0bbdf0'});
        $('.box').show();
    });
    /* Excellent */
    $('.ch5').click(function(){
        $(this).css({'background-color' : '#f0b10b'});
        $('.box').show();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:05:33.633

要重置其余元素的颜色，只需添加：

```
$('.input-check').css('background-color',""); 
```

给你所有的事件处理程序。

这是一个演示：http: [//jsfiddle.net/puWJZ/1/](http://jsfiddle.net/puWJZ/1/)

或者，您可以将此事件侦听器添加到代码的末尾：

```
$('.input-check').click(function(){
    $('.input-check').not(this).css('background-color',"");
}); 
```

这是替代方法的演示：http: [//jsfiddle.net/puWJZ/3/](http://jsfiddle.net/puWJZ/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:11:06.157

I don't really like the way that you are doing it, you don't need to create a function for each label. But I think that what you want to do is use the [jQuery `not` selector](http://api.jquery.com/not-selector/) Let me propose you a better way to do this:

```
$(document).ready(function(){
    var myColors=new Array('#ba0012', '#ba0099', '#00ba88', '#0bbdf0', '#f0b10b');
    $('.box').hide();
    $('.input-check').click(function(){        
        $(this).css({'background-color' : myColors[$('.input-check').index($(this))]});
        $('.input-check').not($(this)).css({'background-color' : ''});
        $('.box').show();
    });
}); 
```

[http://jsfiddle.net/puWJZ/7/](http://jsfiddle.net/puWJZ/7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T21:21:09.530

我会完全删除内联 CSS 并在你的按钮上切换一个类。您已经拥有`:hover`样式中的所有 css 颜色，只需添加选择器以包含一个`active`类会使其更简洁，因为删除类比存储和恢复内联 css 要简单得多

CSS 示例

```
.ch1:hover, .ch1.selected {background-color: #ba0012; cursor: pointer;} 
```

JS改变类：

```
$('.input-check').click(function(){
   $('.input-check.selected').removeClass('selected');
   $(this).addClass('selected');

     /* other code when clicked*/
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T21:13:40.547

正如其他答案所提到的，绝对要使用一段代码来处理所有按钮的单击事件。在这里，我将**bgcolor**作为自定义属性添加到每个单选按钮：

```
<input id="#rb1" type="radio" value="1"   name="reviewbutton" bgcolor="#ba0012"/> Bad 
```

我还在所有输入标签上添加了一个类：

```
<label class="input-check ch1 rating_item"> 
```

然后我们检查任何这些元素的点击，从自定义属性中获取 bgbolor 并将其设置在点击的元素上（并重置所有其他元素）

```
$(document).ready(function(){
    $('.box').hide();
    $('.rating_item').click(function(){
        $('.rating_item').each(function(){
            $(this).css("background-color","#333333");
        });
        var this_bg_color = $(this).children().attr("bgcolor");
        $(this).css('background-color',this_bg_color);
        $('.box').show();
    });
}); 
```

[http://jsfiddle.net/UxyWq/3/](http://jsfiddle.net/UxyWq/3/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T21:15:16.960

这是将所有其他颜色更改回其原始颜色的非常基本的方法。

`$('.ch2, .ch3, .ch4, .ch5').css({'background-color' : '#333'});`

[http://jsfiddle.net/puWJZ/5/](http://jsfiddle.net/puWJZ/5/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-15T21:39:50.280

使用类标记标签并将该类设置为与悬停 css 中相同

CSS：

```
.ch1:hover,.ch1.checked{background-color: #ba0012; cursor: pointer;}
.ch2:hover,.ch2.checked{background-color: #ba0099; cursor: pointer;}
.ch3:hover,.ch3.checked{background-color: #00ba88; cursor: pointer;}
.ch4:hover,.ch4.checked{background-color: #0bbdf0; cursor: pointer;}
.ch5:hover,.ch5.checked{background-color: #f0b10b; cursor: pointer;} 
```

js：

```
$(document).ready(function() {
    $('.box').hide();
    $('label.input-check input').click(function(e) {
        e.stopPropagation();
        $('label.input-check').removeClass('checked');
        //the reason for next string it is just to make same code compatible with checkboxes
        //if not needed it ok to set $(this).parent().addClass('checked');
        $('label.input-check input:checked').parent().addClass('checked');
    });
    $('label.input-check').click(function(e) {
        var $t = $(this);
        if ($t.attr('type') == 'radio') {
            return true;
        }
        $t.children().first().click();
    });
});​ 
```

[演示](http://jsfiddle.net/oceog/puWJZ/13/)

* * *

解决它的另一种方法是使输入与父级大小相同并将不透明度设置为0：

js：

```
$(document).ready(function() {
    $('.box').hide();
    $('label.input-check input').click(function(e) {
        $('label.input-check').removeClass('checked');
        //the reason for next string it is just to make same code compatible with checkboxes
        //if not needed it ok to set $(this).parent().addClass('checked');
        $('label.input-check input:checked').parent().addClass('checked');
    });

});​​ 
```

在 css 中删除输入并设置：

```
label.input-check input {
    width: 100%;
    height: 100%;
    opacity: 0;
    position: absolute;
}
.ch1:hover,.ch1.checked{background-color: #ba0012; cursor: pointer;}
.ch2:hover,.ch2.checked{background-color: #ba0099; cursor: pointer;}
.ch3:hover,.ch3.checked{background-color: #00ba88; cursor: pointer;}
.ch4:hover,.ch4.checked{background-color: #0bbdf0; cursor: pointer;}
.ch5:hover,.ch5.checked{background-color: #f0b10b; cursor: pointer;} 
```

[演示2](http://jsfiddle.net/oceog/puWJZ/14/)

# java - Java列表集方法

> ID：13896191
> 
> 赞同：0
> 
> 时间：2012-12-15T21:03:51.483
> 
> 标签：java

好的，我有一个问题，我的代码似乎可以工作，但我没有特别好地测试它。

我正在尝试在 ArrayList 中设置一个元素。

```
ArrayList<StringBuilder> g=new ArrayList<StringBuilder>();
//set the array contents
g.get(2).append("Something"); 
```

我知道做类似的事情

```
StringBuilder q=g.get(2);
q.append("something else?");
g.set(2,q); 
```

有效，并且可能是正确的方法，但是这样做似乎很长。

我这样做对吗，如果不是，那么我提到的第二种方法是唯一的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:08:23.047

如果您有一个已`StringBuilder`就地修改的列表，那么第一种方法就可以了。如果你有一个不可变类型的列表（比如`String`），那么由于你不能改变你得到的对象，你必须使用第二种方法的变体，因为结果不是同一个对象。

例如

```
List<StringBuilder> widgets = new ArrayList<StringBuilder>();
// ...
StringBuilder widget = widgets.get(0);
widget.append(" version 2"); 
```

对比

```
List<String> widgets = new ArrayList<String>();
// ...
String widget = widgets.get(0);
widgets.set(2, widget + " version 2"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:10:04.393

调用 List#get() 方法时，您正在检索对 StringBuilder 对象的引用。StringBuilder 是一个可变对象。因此，如果您想在索引 2 处修改 StringBuilder 的内容，则在修改后无需再次设置引用。因此，以下内容就足够了：

```
g.get(2).append("Something"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T21:09:14.170

`g.get(2).append("Something");`如果您使用`StringBuilder`实例初始化列表值，则可以使用。否则你会得到一个`NullPointerException`.

请注意，在您的代码中，您定义了一个`ArrayList`of 类型`StringBuilder`，但随后您尝试为其分配一个`ArrayList`of 类型`Integer`，这不起作用

# magento - 如何为 Magento 的多语言 SEO URL 重写 Nginx

> ID：13896194
> 
> 赞同：0
> 
> 时间：2012-12-15T21:04:23.183
> 
> 标签：magento, url, nginx, seo

我正在使用 fastcgi 在 Nginx 上开发多语言 Magento。一切正常，除了我似乎无法像使用 Apache 那样获得 URL。

我想从 url 中删除 index.php。例子：

/es/index.php/category.html 到 /es/category.html

也用英文 /index.php/category.html 到 /category.html

就这样。

**附加信息：**

我试图在管理中将“使用 Web 服务器重写”设置为**yes**。这有效，但仅适用于英语，即默认值，但随后我得到西班牙语*的 404，除了主页*！

如果我在管理中将 "Use Web Server Rewrites" 设置为**no**，那么除了将 index.php 添加到 URL 之外，一切正常。但是，如果我从 URL 中手动删除 index.php，页面仍然会转到 404。

此外，在 Magento 管理中，我有这样的基本 URL 设置：[https](https://www.examplesite.com/es/) : //www.examplesite.com/es/ 和 {{secure_base_url}}../skin/ 等。

我的根目录 /es/ 中有一个文件夹，其中包含 index.php 的副本，如下所示：

```
/* Store or website code */
$mageRunCode = isset($_SERVER['MAGE_RUN_CODE']) ? $_SERVER['MAGE_RUN_CODE'] : '';

/* Run store or run website */
$mageRunType = isset($_SERVER['MAGE_RUN_TYPE']) ? $_SERVER['MAGE_RUN_TYPE'] : 'store';

Mage::run('es'); 
```

这是我的 Nginx 配置：

```
worker_processes  1;

error_log                           /mba/nginx/logs/error.log;
pid                                 /mba/nginx/logs/nginx.pid;

events {
    worker_connections              2048;
}
http {
    include                         mime.types;
    default_type                    application/octet-stream;
    server_names_hash_bucket_size   64;
    open_file_cache                 max=100 inactive=1m; 
    open_file_cache_valid           20s;
    open_file_cache_min_uses        1;
    open_file_cache_errors          on;
    fastcgi_buffers                 256 4k; 
    ignore_invalid_headers          on; 
    client_header_buffer_size       1k;
    client_body_buffer_size         64k;
    large_client_header_buffers     4 8k;
    client_body_timeout             60;
    client_header_timeout           60;
    keepalive_requests              100;    
    keepalive_timeout               300 300;
    keepalive_disable               msie6;
    send_timeout                    60; 
    max_ranges                      1;  
    reset_timedout_connection       on; 
    sendfile        on; 
    sendfile_max_chunk              512k;
    server_tokens                   off; 
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request "'
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';
    access_log                      /mba/nginx/logs/access.log  main;

    autoindex off;
    map $scheme $fastcgi_https { ## Detect when HTTPS is used
        default off;
        https on;
    }

    gzip                            on;
    gzip_static                     on;
    gzip_disable                    "MSIE [1-6]\.";
    gzip_vary                       on;
    gzip_comp_level                 2;
    gzip_min_length                 0;
    gzip_proxied                    any;
    gzip_types                      text/plain image/x-icon image/bmp text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript;
    proxy_buffering on;
    #proxy_cache_path               /mba/nginx/proxy levels=1:2 keys_zone=one:15m inactive=7d max_size=1000m;
    proxy_buffer_size               4k;
    proxy_buffers                   100 16k;
    proxy_connect_timeout           60;
    proxy_send_timeout              60;
    proxy_read_timeout              60;
    #include                         /mba/nginx/conf.d/*.conf;

    ##
    # SSL Support
    ##
    map $scheme $fastcgi_https {
    default off;
        https on;
    }

server {
    listen                          80;
    #listen                         443 default ssl;
    expires                         max;
    add_header                      Cache-Control public;   
    #ssl_certificate                /openssl/ssl/www_mybelovedangels_com.crt;
    #ssl_certificate_key            /openssl/ssl/www_mybelovedangels_com.key;
    #access_log                     /mba.nginx.1/mba/nginx/logs/access_log;
    root                            /mba.nginx.1/mba/www;

location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
    expires                         +60d;
    log_not_found                   off;
    } 
location / {
    index index.html index.php;
    try_files $uri $uri/ @handler;
    expires +30d;
    deny    192.168.1.1;
    allow   192.168.1.0/24;
    allow   127.0.0.1;
    allow   2620:100:e000::8001;
    deny    all;
    }

    # Deny access to specific directories no one
    # in particular needs access to anyways.
    location /app/ { deny all; }
    location /includes/ { deny all; }
    location /lib/ { deny all; }
    location /media/downloadable/ { deny all; }
    location /pkginfo/ { deny all; }
    location /report/config.xml { deny all; }
    location /var/ { deny all; }

    # Allow only those who have a login name and password
    # to view the export folder. Refer to /etc/nginx/htpassword.
    location /var/export/ {
        auth_basic "Restricted";
        auth_basic_user_file htpasswd;
        autoindex on;
    }

    # Deny all attempts to access hidden files
    # such as .htaccess, .htpasswd, etc...
    location ~ /\. {
         deny all;
         access_log off;
         log_not_found off;
    }

    # This redirect is added so to use Magentos
    # common front handler when handling incoming URLs.
    location @handler {
        rewrite / /index.php;
    }

    # Forward paths such as /js/index.php/x.js
    # to their relevant handler.
    location ~ .php/ {
        rewrite ^(.*.php)/ $1 last;
    }

    # Handle the exectution of .php files.
    location ~ .php$ {
        if (!-e $request_filename) {
            rewrite / /index.php last;
        }
        expires off;
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_param HTTPS $fastcgi_https;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param MAGE_RUN_CODE en;
        fastcgi_param MAGE_RUN_TYPE store;
        include fastcgi_params;
    }
  }
} 
```

我希望这不是太多信息，但可能需要它。我在网上到处都找不到我找不到的地方，我对如何做到这一点一无所知。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:29:53.713

编辑此域的**虚拟主机**配置文件并添加以下内容：

```
location / {
    try_files $uri $uri/ /index.php?$query_string;
} 
```

然后确保将 Magento 设置为从 url 中排除 index.php，这在您启用**Use Web Server Rewrites时应该发生**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T09:56:18.977

我已经创建了一个虚拟主机并像这样更改了我的配置：

```
#user              nginx;
worker_processes  1;
error_log         /mba/nginx/logs/error.log;
pid               /mba/nginx/logs/nginx.pid;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;
 server_names_hash_bucket_size   64;
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request "'
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';
    access_log  /mba/nginx/logs/access.log  main;

    sendfile        on;
    autoindex off;
    map $scheme $fastcgi_https { ## Detect when HTTPS is used
        default off;
        https on;
    }

    keepalive_timeout  10;

    gzip  on;
    gzip_comp_level 2;
    gzip_proxied any;
    gzip_types      text/plain text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript;

    # Load config files from the /etc/nginx/conf.d directory
    include /mba/nginx/conf.d/*.conf;

} 
```

和我的虚拟文件，如：

```
server {
    listen 80;
    server_name myexamplesite.com;
    rewrite / $scheme://www.$host$request_uri permanent; ## Forcibly prepend a www
}

server {
    listen 80 default;
## SSL directives might go here
    server_name www.myexamplesite.com *.myexamplesite.com; ## myexamplesite is here twice so server_name_in_redirect will favour the www
    root /mba/www/myexamplesite.com;

    location / {
        index index.html index.php; ## Allow a static html file to be shown first
        try_files $uri $uri/ @handler; ## If missing pass the URI to Magento's front handler
        expires 30d; ## Assume all files are cachable
    }

    ## These locations would be hidden by .htaccess normally
    location ^~ /app/                { deny all; }
    location ^~ /includes/           { deny all; }
    location ^~ /lib/                { deny all; }
    location ^~ /media/downloadable/ { deny all; }
    location ^~ /pkginfo/            { deny all; }
    location ^~ /report/config.xml   { deny all; }
    location ^~ /var/                { deny all; }

    location /var/export/ { ## Allow admins only to view export folder
        auth_basic           "Restricted"; ## Message shown in login window
        auth_basic_user_file htpasswd; ## See /etc/nginx/htpassword
        autoindex            on;
    }

    location  /. { ## Disable .htaccess and other hidden files
        return 404;
    }

    location @handler { ## Magento uses a common front handler
        rewrite / /index.php;
    }

    location ~ .php/ { ## Forward paths like /js/index.php/x.js to relevant handler
        rewrite ^(.*.php)/ $1 last;
    }

    location ~ .php$ { ## Execute PHP scripts
        if (!-e $request_filename) { rewrite / /index.php last; } ## Catch 404s that try_files miss

        expires        off; ## Do not cache dynamic content
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_param  HTTPS $fastcgi_https;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        fastcgi_param  MAGE_RUN_CODE en; ## Store code is defined in administration > Configuration > Manage Stores
        fastcgi_param  MAGE_RUN_TYPE store;
        include        fastcgi_params; ## See /etc/nginx/fastcgi_params
    }
} 
```

此配置的问题是单击它们时链接“下载”并且不更改页面。NginX、PHP、Magento 系统或数据库日志中没有错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T02:44:09.340

我有点迷失在你的设置中，但是好的，你必须在 nginx 中动态映射你的商店代码，但现在你已经硬编码了“en”。只需包装所有配置、备份并重新开始。nginx 有点乱，不要继续创建硬错误的非标准配置。让它变得简单，就像按照 magento 手册一样，但要一步一步来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T19:48:16.437

ADM

我的新配置是这样工作的：

```
#user  www-data;
worker_processes  1; ## = CPU qty

error_log  /mba/nginx/logs/error.log;
#error_log  /mba/nginx/logs/error.log  notice;
#error_log  /mba/nginx/logs/error.log  info;

pid        /mba/nginx/logs/nginx.pid;

events {
    worker_connections  1024;
#    use epoll;
       }

http   {
    index index.html index.php; ## Allow a static html file to be shown first
    include      mime.types;
    default_type  application/octet-stream;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    #log_format error403  '$remote_addr - $remote_user [$time_local] '
    #                 '$status "$request"  "$http_x_forwarded_for"';                      

    server_tokens       off;
    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;

    gzip                on;
    gzip_vary           on;
    gzip_proxied        any;
    gzip_types          text/css application/x-javascript;
    gzip_buffers        16 8k;
    gzip_comp_level     8;
    gzip_min_length     1024;

    keepalive_timeout   15;

    ## Use when Varnish in front
    #set_real_ip_from 127.0.0.1;
    #real_ip_header X-Forwarded-For;

    ## Multi domain configuration
    #map $http_host $storecode { 
       #www.myexamplesite.com 1store_code; ## US main
       #www.myexamplesite.net 2store_code; ## EU store
       #www.domain3.de 3store_code; ## German store
       #www.domain4.com 4store_code; ## different products
       #}

server {   
    listen 80; ## change to 8080 with Varnish
    #listen 443 ssl; 
    server_name www.myexamplesite.com *.myexamplesite.com; ## Domain is here
    root /mba/www;

    access_log  /mba/nginx/access.log  main;

    ## Nginx will not add the port in the url when the request is redirected.
    #port_in_redirect off; 

       ## SSL directives go here
       ##ssl_certificate = cat server.crt bundle.ca.crt >> www_server_com.chained.crt
       #ssl_certificate     /etc/ssl/certs/www_server_com.chained.crt; 
       #ssl_certificate_key /etc/ssl/certs/server.key;

       #ssl_session_cache shared:SSL:15m;
       #ssl_session_timeout 15m;

       #ssl_protocols             SSLv3 TLSv1;
       #ssl_ciphers               HIGH:!ADH:!EXPORT56;
       #ssl_prefer_server_ciphers on;

    ## Server maintenance block. insert dev ip 1.2.3.4 static address www.whatismyip.com
    #if ($remote_addr !~ "^(1.2.3.4|1.2.3.4)$") {
        #return 503;
        #}

        #error_page 503 @maintenance;
        #error_page 403 /403.html;  

    #location @maintenance {
        #rewrite ^(.*)$ /error_page/503.html break;
        #internal;
        #access_log off;
        #log_not_found off;
        #}

    #location = /403.html {
        #root /var/www/html/error_page;
        #internal;
        #access_log   /var/log/nginx/403.log  error403;
        #}

    location / {
        try_files $uri $uri/ @handler;
        }

    ## These locations would be hidden by .htaccess normally
    location ~ (/(app/|includes/|/pkginfo/|var/|errors/local.xml)|/\.svn/|/.hta.+) {
        deny all;
        #internal;
        }

    ## Protecting /admin/ and /downloader/   1.2.3.4 = static ip addresses (www.whatismyip.com)
    #location /downloader    { allow 1.2.3.4; allow 1.2.3.4; deny all; rewrite ^/downloader/(.*)$ /downloader/index.php$1;} 
    #location /admin         { allow 1.2.3.4; allow 1.2.3.4; deny all; rewrite / /@handler;}   

    location ~* \.(js|css|png|jpg|jpeg|gif|ico)$ {
        expires max;
        log_not_found off;
        }

    location @handler {
        rewrite / /index.php;
        }

    location ~ .php/ { ## Forward paths like /js/index.php/x.js to relevant handler
        rewrite ^(.*.php)/ $1 last;
        }

    location ~ .php$ { ## Execute PHP scripts
        add_header X-Config-By 'MagenX -= www.magentomod.com =-';
        fastcgi_pass   127.0.0.1:9000;
        fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
        #fastcgi_param  MAGE_RUN_CODE $storecode; ## Store code with multi domain
        fastcgi_param  MAGE_RUN_CODE en; 
        fastcgi_param  MAGE_RUN_TYPE store;
        include        fastcgi_params; ## See /etc/nginx/fastcgi_params
        }
    }
} 
```

在**MAGE_RUN_CODE**我仍然必须添加“en”，因为它不适用于“default”

我打算使用这个：[Zoom Full-Page Cache](http://www.magentocommerce.com/magento-connect/zoom-full-page-cache-1742.html)，因为我试过了，它确实大大提高了我的页面速度。他说它可以配置为多语言。它弄乱了我的一些页面上的一些小地方。我确定这只是因为我没有正确地“打孔”:)。我安装了很多额外的扩展。

我提到它的原因是我不确定我是否应该先安装 Zoom，因为在他的网站上，他提供了一些代码来添加到您的 NginX 配置中。那是我了解 NginX 的地方。所以我想我会卸载他的 Zoom 并正确设置所有内容然后重新安装它。真不知道。

无论如何，我在这个新配置中注意到：

```
#map $http_host $storecode { 
   #www.myexamplesite.com 1store_code; ## US main
   #www.myexamplesite.net 2store_code; ## EU store
   #www.domain3.de 3store_code; ## German store
   #www.domain4.com 4store_code; ## different products
   #} 
```

看起来我可能必须为每种语言设置一个新域名？

# sip - 使用 SIP 和 WebRTC 来电

> ID：13896198
> 
> 赞同：9
> 
> 时间：2012-12-15T21:05:05.590
> 
> 标签：sip, voip, webrtc

我正在研究实现一个基于浏览器的 VOIP 解决方案，该解决方案使用 SIP 和 WebRTC 并连接到 PTSN。基本上，用户给我他们的 SIP 凭证，我使用 WebRTC 访问他们的麦克风和扬声器。在页面上，我计划运行一个 SIP 客户端。

如何实现来自 PTSN 的来电？我是否需要某种连接到用户的 SIP 服务器的侦听器？

我知道这是一个广泛的问题，但是在网上做了一些研究之后，我仍然对传入呼叫的​​ SIP 实现有些困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-13T19:57:18.973

也许为此刷新是值得的。

[WebRTC](https://webrtc.org/)现在在 Firefox 和 Chrome 中实现（在 IE、Edge 和 Safari 中缺失）。

对于旧版 SIP 到 WebRTC，需要进行一些转换。使用 WebRTC，您可以使用任何通常通过 WebSocket 发送信号的东西。您可以实现您的专有协议，但是如果您正在寻找 SIP 兼容性，那么最自然的选择是[WebSocket 到 SIP 协议](https://www.rfc-editor.org/rfc/rfc7118)。

WebRTC 以 DTLS/SRTP 对媒体进行编码，因此您也必须以清晰的 RTP 对其进行解码。这意味着在服务器端，您将使用内置 WebRTC 支持的软交换机或 WebRTC 到 SIP 网关。确保选择具有完整媒体转码支持的软交换机/网关。WebRTC 目前支持 G.711、G.722 和 Opus。对于旧版 SIP 网络，您的服务器通常只选择 G.711，一切都很完美。在某些情况下，您可能需要将媒体转换为其他流行的编解码器，例如 G.729、G.723 或 GS​​M。

通常你有以下协议覆盖：

*   信令（这很简单）：TLS 中基于 WebSocket 的 SIP -> 通过 UDP/TCP 清除 SIP
*   媒体（这个比较复杂）：DTLS/SRTP 编码 RTP with PCMU -> clear RTP with PCMU

支持 WebRTC 的软交换：

*   [星号](http://www.asterisk.org/)（适用于 Linux）
*   [自由开关](https://freeswitch.org/)（Linux 和 Windows）
*   [mizuvoip](https://www.mizu-voip.com/Software/VoIPServer.aspx)（适用于 Windows）
*   [kamailio](http://www.kamailio.org)（适用于 Linux）

WebRTC 到 SIP 网关：

*   [豆瓣](https://github.com/DoubangoTelecom/webrtc2sip/)
*   [过量](http://www.oversip.net/)
*   [mrtc](https://www.mizu-voip.com/Software/WebRTCtoSIP.aspx)
*   [杰纳斯](https://janus.conf.meetecho.com/siptest.html)
*   [甲骨文](http://www.oracle.com/us/products/applications/communications/web-rtc-session-controller/overview/index.html)

支持 SIP (RFC 7118) 的 WebRTC 客户端：

*   [Simpl5](https://www.doubango.org/sipml5/)（来自杜邦戈）
*   [Jssip](http://www.jssip.net/)（老好）
*   [Sip.js](http://sipjs.com/)（Jssip 的继承者）
*   [网络电话](https://www.mizu-voip.com/Software/WebPhone.aspx)（也适用于 IE 和 Edge）
*   [jscommunicator](http://jscommunicator.org/)（带有drupal插件）

你也应该部署和使用你自己的 STUN 和 TURN 服务器（一些服务器/网关有这些内置的，否则使用[coturn rfc5766-turn-server](https://github.com/coturn/rfc5766-turn-server)）。

服务器端启动并运行后，您可以基于上述 webrtc 客户端轻松创建自定义客户端解决方案，因为它们每个都有一个简单易用的 JavaScript API。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-24T20:53:18.217

理论上，您可以使用开源软交换（FreeSWITCH、Asterisk）项目部署 SIP 服务器，并购买“SIP 中继”服务来获取电话号码并路由到/来自 PSTN 的呼叫。然后，您可以配置 WebRTC SIP 客户端以使用您的服务器。有开源 JavaScript 库（SIP.js、JsSIP、sipML5）。

如果您在小规模工作并且非常习惯于运行电信基础设施和购买中继，这可能是您的最佳选择。在实践中，运行 PSTN 到 WebRTC 呼叫可能很困难——很多质量问题。我也不知道您希望构建应用程序的规模，但超过 100 个同时连接到您的 SIP 服务器，您需要处理扩展问题。如果您想要一个托管解决方案来减少电信麻烦，您可以使用 SIP.js 并注册 OnSIP（支持[SIP.js](http://sipjs.com)的公司），这是一种即用即付服务，可让您购买电话数字，只需对您的客户进行编码。SIP.js 用户代理结构如下所示：

```
var userAgent = new SIP.UA({
  uri: 'bob@example.onsip.com',
  wsServers: ['wss://sip-ws.example.com'],
  authorizationUser: sipUsername,
  password: sipPassword
}); 
```

如果您选择 OnSIP（托管），则这些凭据由服务提供并在 OnSIP 中注册。如果您选择部署自己的 SIP 服务器，您将相应地进行更改。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-15T23:49:21.897

您需要一个实现 SIP-WebRTC 网关的服务器。网关将能够通过 SIP 接收来自 SIP 提供商（其本身将通过转换 ISDN-SIP、SS7-SIP 等充当 SIP-PSTN 网关）的来电，然后使用 WebRTC 将呼叫转发到基于浏览器的客户端.

换句话说，您的服务器需要是 SIP 服务器和 HTTP 服务器的组合，并且 HTTP 服务器需要支持 Web 套接字和 WebRTC API。

如果您还没有看过[Phono SDK](http://phono.com/webrtc)，这是一个很好的起点。

**更新：**

自从我上次查看 WebRTC 以来，事情发生了一些变化。现在似乎在 javascript 实现中确实存在一些 SIP，它们利用新的 WebRTC API 来处理媒体方面的事情。使用 SIP-javascript 堆栈的浏览器应用程序不需要任何额外的服务器，并且可以直接连接到现有的 SIP 服务器。我发现的一个例子是[sip-js](http://code.google.com/p/sip-js/)，但我相信周围还有其他的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-14T12:29:04.553

您的问题的解决方案是：

*   Webrtc 其自身工作为 rtpengine.so 使用 sip 凭据，您可以使用 wss 或 ws 将您自己注册到 sip 服务器。然后您可以调用其他 sip 用户或出站。
*   呼叫将从那里打到 sip 服务器 sip 服务器决定天气它的呼入或呼出

# asp.net-mvc - ASP.NET MVC Entity Framework - 访问参数模型上的导航属性

> ID：13896200
> 
> 赞同：0
> 
> 时间：2012-12-15T21:05:14.980
> 
> 标签：asp.net-mvc, entity-framework, model, asp.net-web-api, navigation-properties

我正在使用 ASP.NET WebAPI，在我的控制器中，我有一个名为 的方法`PostAddToGroup`，它采用参数`int id`和`Group group`. 在我的`Group`实体上，我有一个名为`Members`.

我想做的是这样的

```
public HttpResponseMessage PostAddToGroup(int id, Group group) {
    group.Members.Add(id);
    db.SaveChanges();
} 
```

代替

```
Group _group = db.Groups.Include(x => x.Members).Single(x => 
    x.PosterID == group.PosterID && x.Type == group.Type);
_group.Members.Add(id);
db.SaveChanges(); 
```

这可能吗，如果没有，是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:24:32.993

没关系，我自己想出来的。我所要做的就是将模型攻击到 DbContext，如下所示：`db.Groups.Attach(group).Members.Add(id);`

# sql - 在 Select 查询中使用存储过程

> ID：13896208
> 
> 赞同：4
> 
> 时间：2012-12-15T21:06:05.107
> 
> 标签：sql, sql-server, tsql, stored-procedures

我有一个存储过程，我想在`SELECT`下面使用，但出现错误。

存储过程的输出是一个包含一列类型的表`int`

```
select * from users where resCode in (EXEC getUserResselers 1)

-- stored procedure
create procedure getUserResselers
    @userCode int
as
    ;WITH Directories AS (SELECT  code FROM Resseler WHERE code =(select resselerCode from Users where code=@userCode)
    UNION ALL SELECT d.code FROM Resseler d INNER JOIN Directories p ON  d.parent = p.code)
        SELECT  * FROM    Directories d 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:25:09.753

不支持从存储过程中直接选择。但是，这种类型的操作非常适合[表值用户定义函数](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)，它可能看起来像：

^(*请注意，您拼错了“经销商”。我留下了拼写错误，以便您可以使用现有架构进行测试。*)

```
CREATE FUNCTION getUserResselers
(
    @UserCode INT
)
RETURNS TABLE AS
RETURN(
    WITH Directories AS (

       SELECT  code FROM Reseller WHERE code = (select resselerCode from Users where code=@userCode)
       UNION ALL SELECT d.code FROM Resseler d INNER JOIN Directories p ON  d.parent = p.code
    )
    SELECT  * FROM   Directories
) 
```

然后，您可以在查询中包含对该函数的连接，或者您可以继续使用`IN`，它应该类似于：

```
select * from users where resCode in (SELECT Code FROM getUserResselers(1)); 
```

# php - R在while循环中求和

> ID：13896209
> 
> 赞同：-3
> 
> 时间：2012-12-15T21:06:15.030
> 
> 标签：php

我有循环并显示这一行

```
<? 
  if ($objResult["cashier_trans_Type"]=="out" || 
      $objResult["cashier_trans_Type"]=="debit to customer" ||
      $objResult["cashier_trans_Type"]=="debit") { 
      echo "0.00"; 
  } else {
      echo $Dofaa=number_format($objResult["cashier_trans_Value"],2); 
  } 
?> 
```

现在我想使用一个while循环来对所有列进行求和：`$Dofaa`

我怎样才能通过php做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:19:49.267

你不需要一个新的循环。只需将每个`else`循环添加到总数中即可。

```
<?
$Dofaa_total = 0; // create a total variable
...
  if ($objResult["cashier_trans_Type"]=="out" || 
  $objResult["cashier_trans_Type"]=="debit to customer" ||
  $objResult["cashier_trans_Type"]=="debit") { 
  echo "0.00"; 
} else {
  echo $Dofaa=number_format($objResult["cashier_trans_Value"],2);
     $Dofaa_total += $Dofaa;  // add to the total variable
 } 
...
echo $Dofaa_total;  // echo the total variable
?> 
```

# python - python3的开源跨平台IDE，带有调试器和代码完成

> ID：13896214
> 
> 赞同：1
> 
> 时间：2012-12-15T21:07:15.210
> 
> 标签：python, linux, ide, python-3.x, editor

什么是具有调试器和代码完成功能的优秀跨平台 python3 IDE？我找到了一些，但没有一个同时具备 4 个特性：支持 python3 语法、代码完成、集成调试器和免费。唯一拥有它们的是 eclipse 的 python 插件，但不幸的是，我的电脑上的 eclipse 太慢了（你知道：*敲敲*“谁在那儿？” *3 秒的沉默*“java”），所以我想要一些不同的东西。但我只是找不到任何免费的并且可以轻松地在 linux 上运行的东西。希望您能够帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:34:49.380

试试[Cloud9 IDE](https://c9.io/)。如果您有浏览器，则可以使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:48:39.790

[Eric5](http://eric-ide.python-projects.org/)是一个功能齐全的 Python 和 Ruby 编辑器和 IDE，用 python 编写。它基于跨平台的 Qt gui 工具包，集成了高度灵活的 Scintilla 编辑器控件。它被设计为可用作日常快速而肮脏的编辑器，也可用作专业的项目管理工具，集成了 Python 为专业编码人员提供的许多高级功能。eric4 包含一个插件系统，它允许使用可从网络下载的插件轻松扩展 IDE 功能。

其他几个...

[科莫多编辑](http://www.activestate.com/komodo_edit/)

[PyScripter](http://code.google.com/p/pyscripter/)

# php - PHP: How to echo object attributes

> ID：13896215
> 
> 赞同：1
> 
> 时间：2012-12-15T21:07:25.343
> 
> 标签：php, meta-tags

How do I echo an object attribute

Is it possible to echo `value='$embed"` of the `$video_data` object below?

My goal is to make a description meta tag for [http://perfecthealthmap.com/video-library/1](http://perfecthealthmap.com/video-library/1) that populates with this information for the selected video.

```
<meta name="description" content="<?php echo($video_data->$embed);?>" /> 
```

Doesn't work.

Below is the information I am trying to echo into the description tag. Please help.

```
$video_data .= $embed;
$video_data .= "<br><table width='100%' border=0 cellpadding=2 cellspacing=2><tr><td width='50'>URL:</td><td><input type='text' style='font-family: verdana; font-size: 8pt; border: 1px solid #EAEAEA; width: 300px; height: 20px;' onclick='select()' value='http://".$_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'] . "'></td></td></tr><tr><td width='50'>Embed:</td><td><input type='text' style='font-family: verdana; font-size: 8pt; border: 1px solid #EAEAEA; width: 300px; height: 20px;' onclick='select()' value='$embed'></td></td></tr></table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:13:15.947

如果它是一个公共成员变量，那么您可以通过以下方式访问它：

```
echo $video_data->embed; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:33:13.147

如果属性的名称是“$embed”，则必须将对象转换为关联数组并像这样回显您的新变量

```
echo $ObjectCastInArray['$embed']; 
```

除非对象来自 json_decode，否则您可以直接将 json 字符串转换为关联数组，将 json_decode 函数中的第二个参数设置为 true

```
json_decode ($yourJsonString, true); // will return an associative array 
```

我希望这个能帮上忙！

# asp.net-mvc - Specify a folder for scaffolding

> ID：13896219
> 
> 赞同：1
> 
> 时间：2012-12-15T21:07:34.367
> 
> 标签：asp.net-mvc, asp.net-mvc-4

Is there a way to specify an output folder for scaffolding? In the example below I would like the generated context file placed in the "DataAccess" folder

```
Scaffold DbContext Product WebAPIContext -Folder DataAccess 
```

This returns the following error:

```
Invoke-Scaffolder : A parameter cannot be found that matches parameter name 'Folder'.At line:1 
char:49
+ Scaffold DbContext Product WebAPIContext -Folder <<<<  DataAccess
+ CategoryInfo          : InvalidArgument: (:) [Invoke-Scaffolder], ParameterBindingException
+ FullyQualifiedErrorId : NamedParameterNotFound,T4Scaffolding.Cmdlets.InvokeScaffolderCmdlet 
```

Is this supported?

# django - 在 Heroku 上提供 Django 静态文件

> ID：13896222
> 
> 赞同：0
> 
> 时间：2012-12-15T21:08:02.803
> 
> 标签：django, heroku, django-staticfiles

将我的 Django 站点从开发服务器移植到 Heroku 时，我遇到了一个奇怪的问题。我知道我不应该使用 django 直接提供静态文件，但我现在只是在测试一个想法。

我试过使用：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
    urlpatterns += staticfiles_urlpatterns() 
```

也：

```
from django.conf import settings
    urlpatterns += patterns(
        (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}),) 
```

但是无论使用哪种解决方案，我的 .css 文件都可以正常使用，但我的 .png 图像文件却没有。这些文件在 Django 和 Heroku 处理它们的方式上会有所不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T02:17:03.003

这是大写小写的问题。事实证明，文件名的大写字母比 html 文件中的引用多一个……当我从 Mac OS 转移到区分大小写的 Unix 时，这总是一个问题。

# android - osmdroid, Maps API v2, and fragments

> ID：13896230
> 
> 赞同：6
> 
> 时间：2012-12-15T21:09:08.473
> 
> 标签：android, actionbarsherlock, android-maps, osmdroid, google-maps-android-api-2

Ok. You'd think this would be relatively simple, but nope.

I am using Open street maps on my website, as the data is free to use, edit, and update - my project follows this mantra, and alongside googles API usage restrictions/saving data restrictions, google maps simply was not suitable for me.. at least on the web.

Given this I thought i'd follow suit with my android app, and so I setup osmdroid utilizing open street maps data.

I can have a nice map in my activity.. I also followed a tutorial, and it seemed to work at least such that I can have a map view in a fragment within a tabhost/viewpager. What i really want however (for tablets), is a list of establishments in a fragment on the left, and a map fragment on the right showing where these establishments are.

Simple enough i would have thought, but hours and hours of research suggest this is not possible unless you use some complex code and some deprecated methods..

So.. the fragment (containing a map view) loads and runs perfectly in a tabhost.. i can access methods within the fragment from my activity etc.. yet nothing to just simply have two fragments side by side.

Now.. I know google have just come out with their API v2.. I installed it and had a play.. not really knowing how osmdroid works, I thought i could update so I have MapFragment instead of SherlockFragment (I use ABS).. this then just threw up logcat errors asking for API keys etc.. and given that I dont want to use google map data, I assumed that I had gone wrong.

So.. could anyone advise on how I can get a list fragment, and a map fragment side by side using anything that is available on the market, but preferably utilizing Open source map data such that their are no usage restrictions.

I'm sure an overall overview of "what is available, and how it works" would be very much appreciated by loads of users.. so if anyone could advise it would be amazing !

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T00:25:18.530

在新的 Google Maps API 出现之前，我被迫使用 OSMDroid 来实现我的目的。然而，在不得不多次挖掘源代码以弄清楚它为什么会这样做（通常是错误的）之后，我渴望一个新的库。

幸运的是，新的 Google Maps API 符合要求。您可以在您的应用程序中使用 Google Maps API v2，而不必使用 Google 的底图，但是是的，很遗憾，您必须先获取 API 密钥。

我假设您想使用 OpenStreetMap 作为在线地图源，因此下面的代码将为此量身定制。

```
GoogleMap map = <get-map-instance>;

map.setMapType(GoogleMap.MAP_TYPE_NONE);

TileOverlayOptions options = new TileOverlayOptions();

options.tileProvider(new UrlTileProvider(256, 256) {
    @Override
    public URL getTileUrl(int x, int y, int z) {
        try {
            String f = "http://tile.openstreetmap.org/%d/%d/%d.png";
            return new URL(String.format(f, z, x, y));
        }
        catch (MalformedURLException e) {
            return null;
        }
    }
});

map.addTileOverlay(options); 
```

您可以在我的 Google Maps API v2 附加组件库中找到此代码的更正式[版本](https://github.com/cocoahero/android-gmaps-addons/blob/master/src/com/cocoahero/android/gmaps/addons/osm/OpenStreetMapTileProvider.java)。

此外，如果您的目标是 pre-Fragment Android 版本，我相信您是基于您使用 ABS，而不是使用 MapFragment，请确保您使用 SupportMapFragment。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T21:37:40.910

The [Sample Code](https://developers.google.com/maps/documentation/android/intro#sample_code) delivered with [Google Maps Android API v2](https://developers.google.com/maps/documentation/android/) contains the class com.example.mapdemo.TileOverlayDemoActivity. I little update to this class will show OpenStreetMap tiles within the new v2 framework. Cool! No need to use osmdroid or sherlock-fragments anymore. However... the tiles are not cached :(

Anyway, all additions/updates to the TileOverlayDemoActivity class are shown below:

```
private static final String OPEN_STREET_MAP_URL_FORMAT =
        "http://tile.openstreetmap.org/%d/%d/%d.png";

private void setUpMap() {
    mMap.setMapType(GoogleMap.MAP_TYPE_NONE);
    mMap.setMyLocationEnabled(true);

    TileProvider tileProvider = new UrlTileProvider(256, 256) {
        @Override
        public synchronized URL getTileUrl(int x, int y, int zoom) {
            String s = String.format(Locale.US, OPEN_STREET_MAP_URL_FORMAT, zoom, x, y);
            URL url = null;
            try {
                url = new URL(s);
            } catch (MalformedURLException e) {
                throw new AssertionError(e);
            }
            return url;
        }
    };

    mMap.addTileOverlay(new TileOverlayOptions().tileProvider(tileProvider));
} 
```

# google-visualization - How to remove hyphen from Google Charts I-bar?

> ID：13896235
> 
> 赞同：1
> 
> 时间：2012-12-15T21:09:27.970
> 
> 标签：google-visualization

Is it possible to remove these hyphens (circled red in image)? ![Valid XHTML](../Images/cf94aa0b267d34827f4c8e460ddc565b.png)

edit: Chart above is Line Chart with 2 series marked as interval.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T11:05:07.343

可能为时已晚，但对其他人可能有用：我使用 jquery 来满足类似的需求。它并不完美，但它有效：

```
function changeIBar(){
    var iBar = $( '#divChart g path');
    iBar.each(function(index) {
        var d = $( this ).attr('d');
        var M = d.substring(d.indexOf('M')+1, d.indexOf(','));
        var L = d.substring(d.indexOf('L')+1, d.indexOf(',', d.indexOf(',')+1));
        if ( M != L){
            $( this ).remove()
        }
    });
} 
```

更改包含图表的 div 元素的 ID。我不知道为什么，但谷歌图表 api 在选择、onmouseover 和 onmouseout 事件后重新初始化 i-bars。所以我在这些事件中的每一个之后以及显然在准备好的事件之后调用这个函数。

# expressionengine - 表达式引擎将 javascript 添加到头部

> ID：13896242
> 
> 赞同：1
> 
> 时间：2012-12-15T21:10:23.710
> 
> 标签：expressionengine

我已经为此苦苦挣扎了一段时间，并且卡住了我正在为 Expression Engine 2（不是模块）编写扩展，并且需要在页面的标题中添加一个脚本标记。

我试过了：

```
$script = "<script type='text/javascript'>alert('added');</script>";
$this->EE->cp->add_to_head($script); 
```

但我猜这只有在它是一个模块时才有效，我也试过：

```
$this->EE->cp->load_package_js('file'); 
```

但我收到以下错误：

```
Call to a member function plugin() on a non-object in expressionengine/libraries/Cp.php on line 766 
```

我也尝试过使用`cp_js_end`加载文件的钩子，但它在其他所有内容之后加载，因此它不能按预期工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:03:38.493

我想[Low 有你的答案](http://ellislab.com/expressionengine/user-guide/development/usage/cp.html#9192)。总之，你需要在你的包目录`file`中的一个目录中。`javascript`

# git - Reset Git to commit without changing HEAD to detached state

> ID：13896246
> 
> 赞同：21
> 
> 时间：2012-12-15T21:10:54.677
> 
> 标签：git

I'd like to restore the files of the git working copy to a given commit, without setting that commit as the HEAD commit.

If I git checkout to a given commit I obtain a detached HEAD, and after commiting changes, the commit tree would look something like:

```
A
|
B
|
C  
| \
D  E 
```

While the behaviour I'd like to obtain is:

```
A
|
B
|
C
|
D
| <- git command so my files are restored to C, but my HEAD still points to D
E 
```

Thanks

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-16T01:31:15.833

这应该这样做：

```
git reset --hard C
git reset --soft D 
```

首先，您将`HEAD`、 index 和 worktree 重置为`C`.
然后你重置`HEAD`（并且只有`HEAD`，如“[实际用途`git reset --soft`？](https://stackoverflow.com/questions/5203535/practical-uses-of-git-reset-soft/5203843#5203843) ”中所述）到`D`.

请注意，此时的提交将创建一个带有内容的*新*提交`C`，替换`D`为. 这改变了历史，与简单的.`D'``C`
`git reset --hard C`

另一个选项将`git revert C`在 之上`D`，但`D`仍会在历史记录中可见，这可能是您不想要的。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-08-01T01:31:50.883

VonC 答案要求您进行往返。您可以使用单个“git checkout”来实现相同的目标

`git checkout C ./`

请注意，您必须提供，`./`否则 git 将实际签出指定的分支或提交。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-12-22T15:35:12.900

为此（对于编写此类脚本的任何人）的管道命令是：

```
git read-tree C
git checkout-index -f -a 
```

虽然由于某种原因我无法理解，但当我从脚本运行它时，我还必须在上述命令之后执行以下操作，否则我会收到有关补丁程序不适用于索引的错误：

```
git update-index -q --refresh 
```

# jquery - Count number of clicks on radio button

> ID：13896249
> 
> 赞同：0
> 
> 时间：2012-12-15T21:11:08.780
> 
> 标签：jquery

I have group of radio buttons like this: `<form> <input class="answer" name="answer" value="10" type="radio">ans0<br> <input class="answer" name="answer" value="11" type="radio">ans1<br> </form>` And I have place on page where I write how many times did you click on any radio button.

`<p>Clicked:</p> <p id="clicked">0</p>`

I need jquery to count all those clicks. Can you help me?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:14:36.913

将单击事件侦听器附加到您的单选按钮。然后在回调中读取元素中单击 id 的当前数字，将其解析为数字，加 1，然后将新值写入元素。

像这样的东西：

```
// Attach a click-event listener to your radio-buttons​
$("input[type='radio']")​.on("click", function () {
    // Cache the element
    var elm = $("#clicked");
    // Read the current value
    var count = parseInt(elm.text(), 10);
    // Update the element with the new value
    elm.text(count + 1);    
});​​​​​​​​ 
```

[**演示**](http://jsfiddle.net/A8tZd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:14:10.207

您可以使用该`click`功能来捕获点击。

```
var counter = 0
$('input[name=answer]').click(function() {
  counter++
  $('#clicked').text(counter); // update text
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T21:17:45.350

尝试..

```
$(function(){
    var clicked = 0,
        radios = $('form input[type="radio"]'),
        clickBlock = $('#clicked');

    radios.click(function(){
        clicked++;
        clickBlock.html(clicked);
    });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T21:18:46.457

这是[关于 jsFiddle 的一个工作示例](http://jsfiddle.net/kZuca/)，我在单选框 html 中放置了一个额外的属性来存储点击次数。如果这对您来说是一个选项，我认为它可以生成有效的干净代码，那么只需编写一个代码块来处理单击事件并显示每个单选按钮的单击 - 无论您有多少单选按钮

```
<input class="answer" name="answer" value="10" type="radio" data-clicked="0">ans0<br>
<input class="answer" name="answer" value="11" type="radio" data-clicked="0">ans1<br>​

$(function(){
    $('.answer').click(function(){
       var numOfClicks = $(this).attr('data-clicked');
       numOfClicks = (numOfClicks * 1) + 1;
       $(this).attr('data-clicked', numOfClicks);
       alert(numOfClicks);
    });    
});​ 
```

# objective-c - Accessing variable in ViewController

> ID：13896250
> 
> 赞同：0
> 
> 时间：2012-12-15T21:11:39.000
> 
> 标签：objective-c, cocoa, variables, view, controller

Hello I am working on a web view based application, I have a WebController within that I have a variable which holds the current URL.

I have recently added code to launch a view, this works fine, this view also holds another web view, this web view works fine if I load a site into it such as this:

```
[[mywebview mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:
               [@"http://www.google.com/search?hl=en&q=" stringByAppendingString:@"test"]]]]; 
```

However I am trying to access the variable which holds the current URL like this:

```
 [[mywebview mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:
               [@"http://www.google.com/search?hl=en&q=" stringByAppendingString:currentURL]]]]; 
```

However when doing this by linking to the WebController the currentURL seems to equal nothing, however this works perfectly fine when doing it from the first responder (except of course the view no longer shows)

My question is how can I get my currentURL variable working when linked from the WebController?

I am relatively new to cocoa so I am sorry if this is easy question!

**EDIT: added from comments**

In the method `initWithWindowController` `currentURL` is set to `@""`, and in `dealloc` to `nil`. The currentURL comes from the other web view see here:

```
- (void)webView:(WebView *)wv didStartProvisionalLoadForFrame:(WebFrame *)frame {
    if (frame != [self.webView mainFrame]) 
        return; 
    self.currentUrl = [[[[frame provisionalDataSource] request] URL] absoluteString];
    [self retain]; 
} 
```

I am declaring currentURL in the WebController.h

```
@interface WebController : NSObject <DOMEventListener>
 { 
   IBOutlet NSString *currentURL; 
 } 
@property (nonatomic, copy) IBOutlet NSString *currentURL; 
@end 
```

I am trying to use the currentURL in the WebController.m in the DisplayInView function.

```
-(IBAction) DisplayInView:(id) sender 
{      
if ([siteview isInFullScreenMode])           
 {                
  [siteview exitFullScreenModeWithOptions:nil];           
 }      
else           
 {                
  [[mywebview mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:                [@"google.com/search?hl=en&q="stringByAppendingString:currentURL]]]];                siteview enterFullScreenMode:[[siteview window] screen] withOptions:nil];           
 } 
} 
@synthesize siteview; 
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:50:34.650

我不知道这是您的问题，还是复制和粘贴错误，但您发布的代码是：

```
[@"google.com/search?hl=en&q="; stringByAppendingString:currentURL]]]]; 
```

它的中间有一个杂散的分号。那甚至不应该编译。

# javascript - HTML5：当我擦除图像时，抗锯齿会留下痕迹

> ID：13896252
> 
> 赞同：3
> 
> 时间：2012-12-15T21:12:02.650
> 
> 标签：javascript, html, canvas, sprite, antialiasing

我想在画布上移动一个小部件，出于各种原因，我不想使用精灵。我正在使用最新版本的 Chrome。为了移动小部件，我“取消绘制”它，然后在另一个地方重新绘制它。'undraw'，我的意思是我只是在同一个地方绘制相同的图像，但用与背景相同的颜色绘制它，所以在我绘制新的之前，小部件完全消失了。问题是当我“取消绘制”时，原始图像的痕迹仍留在画布上。我在这里探讨了相关问题，但没有找到任何有用的东西。我了解绘制单像素线并获得抗锯齿的问题，因此我将线宽设置为 2（以及其他各种非整数值），但无济于事。有人有想法么？这是一个[小提琴演示](http://jsfiddle.net/cMVSA/11/)，这是执行更新的函数：

```
function draw(){
    if(previousX !== null) {
        ctx.lineWidth = 1;
        ctx.fillStyle = '#ffffff';
        ctx.strokeStyle = '#ffffff';
        drawCircle(previousX, previousY, 20);
    }

    ctx.lineWidth = 1;
    ctx.fillStyle = '#000000';
    ctx.strokeStyle = '#000000';
    drawCircle(x, y, 20);

        console.log('drew circle (' + x + ', ' + y + ')');

    previousX = x;
    previousY = y;
} 
```

PS我只是一个业余爱好者，在图形方面没有丰富的经验，所以如果可能的话，请稍微降低你的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T22:28:22.330

当您使用抗锯齿绘制形状时，您正在对一些像素进行实心覆盖，但仅对边缘像素进行部分覆盖。问题是像素（暂时忽略液晶面板）是不可分割的单位。那么我们如何部分覆盖像素呢？我们使用 Alpha 通道来实现这一点。

Alpha 通道（和 Alpha 混合）将圆形边缘的颜色与其下方的颜色组合在一起。当圆圈仅部分覆盖像素时会发生这种情况。这是一个可视化此问题的快速图表。

![在此处输入图像描述](../Images/b2aebbda3a04d62db0665b7d5857d523.png)

颜色的混合会导致永久性的变化，通过在背景色中再次绘制圆圈并不能消除这种变化。原因：颜色混合再次发生，但这只是导致效果软化。

简而言之，重绘只会覆盖全覆盖的像素。边缘像素不完全是圆的一部分，因此您无法掩盖边缘效果。

如果您需要擦除圆圈，请考虑恢复原来的位置。您大概可以复制原始内容，然后绘制圆圈，然后当您要移动圆圈时，恢复原始内容并重复该过程。

[This previous SO question](https://stackoverflow.com/questions/2041148/what-is-the-fastest-way-to-move-a-rectangular-pixel-region-inside-a-html5-canv)可能会给您一些关于复制画布区域的想法。它使用 drawImage 方法。最好的解决方案是结合 getImageData 和 putImageData 方法。我已经[修改了您的 Fiddle 示例](http://jsfiddle.net/255t8/)，以向您展示如何执行此操作。您可以尝试以下代码：

```
var x, y, vx, vy;
var previousX = null, previousY = null;
var data = null;

function draw(){
    ctx.lineWidth = 2.5;
    ctx.fillStyle = '#000000';
    ctx.strokeStyle = '#FF0000';

    drawCircle(x, y, 20);

    previousX = x;
    previousY = y;
}

function drawCircle(x, y, r){
  // Step 3: Replace the stuff that was underneath the previous circle
  if (data != null)
  {
    ctx.putImageData(data, previousX - r-5, previousY - r-5);
  }

  // Step 1: Copy the region in which we intend to draw a circle
  data = ctx.getImageData(x - r-5, y - r-5, 2 * r + 10, 2 * r + 10);

  // Step 2: Draw the circle
  ctx.beginPath();
  ctx.arc(x, y, r, 0, Math.PI*2, true);
  ctx.closePath();
  ctx.stroke();
  ctx.fill();
} 
```

# mysql - Order by not picking up the right indexes

> ID：13896255
> 
> 赞同：0
> 
> 时间：2012-12-15T21:12:19.680
> 
> 标签：mysql

I have projects table and each project has multiple categories assigned. The category mapping is stored in the `project_category` table. I want to list all recent projects that are not expired. Here is the schema, indexes and query.

## Schema

```
Create table projects (
   project_id Bigint UNSIGNED NOT NULL AUTO_INCREMENT,
   project_title Varchar(300) NOT NULL,
   date_added Datetime NOT NULL,
   is_expired Bit(1) NOT NULL DEFAULT false,
Primary Key (project_id)) ENGINE = InnoDB;

Create table project_category (
   project_category_id Int UNSIGNED NOT NULL AUTO_INCREMENT,
   cat_id Int UNSIGNED NOT NULL,
   project_id Bigint UNSIGNED NOT NULL,
Primary Key (project_category_id)) ENGINE = InnoDB; 
```

## Indexes

```
CREATE INDEX project_listing (is_expired, date_added) ON projects;
Create INDEX category_mapping_IDX ON project_category (project_id,cat_id); 
```

Query

```
mysql> EXPLAIN
  SELECT P.project_id
  FROM projects P
  INNER JOIN project_category C USING (project_id)
  WHERE P.is_expired=false
    AND C.cat_id=17
  ORDER BY P.date_added DESC LIMIT 27840,10;
+----+-------------+-------+--------+--------------------------------------------+---------+---------+-------------------------+--------+---------------------------------+
| id | select_type | table | type   | possible_keys                              | key     | key_len | ref                     | rows   | Extra                           |
+----+-------------+-------+--------+--------------------------------------------+---------+---------+-------------------------+--------+---------------------------------+
|  1 | SIMPLE      | C     | ref    | project_id,cat_id,category_mapping_IDX     | cat_id  | 4       | const                   | 185088 | Using temporary; Using filesort |
|  1 | SIMPLE      | P     | eq_ref | PRIMARY,is_expired_INX,project_listing_IDX | PRIMARY | 8       | freelancer.C.project_id |      1 | Using where                     |
+----+-------------+-------+--------+--------------------------------------------+---------+---------+-------------------------+--------+---------------------------------+ 
```

I am wondering why MySQL isn't using the index on `project_category`, and why it is doing a full sort?

I also tried the following query just to avoid file sorting, but it is not working either.

```
mysql> EXPLAIN
  SELECT P.project_id
  FROM projects P,
  (
    SELECT P.project_id 
    FROM projects P
    INNER JOIN project_category C USING (project_id)
    WHERE C.cat_id=17
  ) F
  WHERE F.project_id=P.project_id
    AND P.is_expired=FALSE
  LIMIT 10;

+----+-------------+------------+--------+--------------------------------------------+---------+---------+-------------------------+--------+-------------+
| id | select_type | table      | type   | possible_keys                              | key     | key_len | ref                     | rows   | Extra       |
+----+-------------+------------+--------+--------------------------------------------+---------+---------+-------------------------+--------+-------------+
|  1 | PRIMARY     | <derived2> | ALL    | NULL                                       | NULL    | NULL    | NULL                    | 110920 |             |
|  1 | PRIMARY     | P          | eq_ref | PRIMARY,is_expired_INX,project_listing_IDX | PRIMARY | 8       | F.project_id            |      1 | Using where |
|  2 | DERIVED     | C          | ref    | project_id,cat_id,category_mapping_IDX     | cat_id  | 4       |                         | 185088 |             |
|  2 | DERIVED     | P          | eq_ref | PRIMARY                                    | PRIMARY | 8       | freelancer.C.project_id |      1 | Using index |
+----+-------------+------------+--------+--------------------------------------------+---------+---------+-------------------------+--------+-------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:32:23.250

你的问题在这里：

```
Create INDEX category_mapping_IDX ON project_category (project_id,cat_id); 
```

当您尝试子选择单个 cat_id 时，此索引没有用，因为 cat_id 不是索引的第一部分。将索引想象成一个串联的字符串，您就会明白为什么不能使用它。交换顺序：

```
Create INDEX category_mapping_IDX ON project_category (cat_id, project_id); 
```

# java - Initializing variable

> ID：13896257
> 
> 赞同：0
> 
> 时间：2012-12-15T21:12:39.570
> 
> 标签：java

The program basically ask user to input their BMR, and gender. Then they're ask to choose an activity level ( If they choose the wrong one, I need to print" Please enter a valid choice"). Female and male have different activity factor. I'm encountering an error of " Variable ActivityFactor must be initialized." How can I fix my code? Thanks

```
 iBMR = new Scanner(System.in);
        Scanner iGender = new Scanner(System.in);
        Scanner iActivity = new Scanner(System.in);
        String AcFactor;
        double ActivityFactor ;
        double TDEE;
        //User Input
        System.out.println("Please enter your name: ");
        String inName = iName.next(); 
        System.out.println("Please enter your BMR: ");
        String inBMR = iBMR.next();
        double nBMR = Double.parseDouble(inBMR);
        System.out.println("Please enter your Gender");
        String inGender = iGender.next();

        System.out.println("Select Your Activity Level");
        System.out.println("[A] Resting (Sleeping,Reclining)");
        System.out.println("[B] Sedentary (Minimal Movement)");
        System.out.println("[C] Light (Sitting, Standing)");
        System.out.println("[D] Moderate (Light Manual Labor, Dancing, Riding Bike)");
        System.out.println("[E] Very Active (Team Sports, Hard Manual Labor)");
        System.out.println("[F] Extremely Active (Full-time Athlete, Heavy Manual Labor)");
        System.out.println("Enter the letter corrresponding to your activity level: ");
        String inActivity = iActivity.next();

        //CalculationFemale
        if(inActivity.equalsIgnoreCase("A")&& inGender.equalsIgnoreCase("F"))
        {
            ActivityFactor = 1.0;
        }
        else if(inActivity.equalsIgnoreCase("B")&& inGender.equalsIgnoreCase("F"))
        {
           ActivityFactor = 1.3;
        }
        else if(inActivity.equalsIgnoreCase("C")&& inGender.equalsIgnoreCase("F"))
        {
           ActivityFactor = 1.5;
        }
        else if(inActivity.equalsIgnoreCase("D")) && (inGender.equalsIgnoreCase("F"))
        {
           ActivityFactor = 1.6;
        }
        else if(inActivity.equalsIgnoreCase("E")&& inGender.equalsIgnoreCase("F"))
        {
           ActivityFactor = 1.9;
        }
        else if(inActivity.equalsIgnoreCase("F")&& inGender.equalsIgnoreCase("F"))
        {
           ActivityFactor = 2.2;
        }
        else
        {

            System.out.println("Please enter a valid choice!");
        }

        //CalculationMale
        if(inActivity.equalsIgnoreCase("A")&& inGender.equalsIgnoreCase("M"))
        {
            ActivityFactor = 1.0;
        }
        else if(inActivity.equalsIgnoreCase("B")&& inGender.equalsIgnoreCase("M"))
        {
           ActivityFactor = 1.3;
        }
        else if(inActivity.equalsIgnoreCase("C")&& inGender.equalsIgnoreCase("M"))
        {
           ActivityFactor = 1.6;
        }
        else if(inActivity.equalsIgnoreCase("D")&& inGender.equalsIgnoreCase("M"))
        {
           ActivityFactor = 1.7;
        }
        else if(inActivity.equalsIgnoreCase("E")&& inGender.equalsIgnoreCase("M"))
        {
           ActivityFactor = 2.1;
        }
        else if(inActivity.equalsIgnoreCase("F")&& inGender.equalsIgnoreCase("M"))
        {
           ActivityFactor = 2.4;
        }
        else
        {

           System.out.println("Please enter a valid choice!");
        }

        //TDEE
        double TD(ActivityFactor * BMR); 
```

**Thanks you for all the answer. I do realize that if all the if/if else conditions do not go through, the " else" won't have a value for ActivityFactor. Thanks to all the reply, I now realize my way of pursuing this won't work. Could someone give me an outline of how I can code such a program that ask for the user name/gender/bmr then ask to select a activity level and assign an activity factor depending on whether the user is a male/female and their selection of activity level ?Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:14:38.060

您只需将 ActivityFactor 设置为某个虚拟值以确保它已初始化：

```
double ActivityFactor = -1; 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:19:27.923

Java 编译器确定您正在使用可能未初始化的变量：

```
double TD(ActivityFactor * BMR); 
```

这是因为您有允许此变量保持未初始化的代码路径：

```
else
{

   System.out.println("Please enter a valid choice!");
} 
```

所以，有两种选择：在声明它的地方初始化这个变量：

```
 double ActivityFactor = 0.0; 
```

或者制作所有代码路径，以便在使用该变量之前必须对其进行初始化。在您的情况下，这意味着您需要将 init 添加到以下`else`块中：

```
else
{
   ActivityFactor = 0.0;
   System.out.println("Please enter a valid choice!");
} 
```

我建议你第一个选择去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T21:19:50.043

您必须在 if-else 语句之前给出一个值 ActivityFactor。如果您的任何 'if' 没有操作，java 无法知道 ActivityFactor 在

```
double TD(ActivityFactor * BMR); 
```

陈述。

像这样声明和初始化：

```
double ActivityFactor = 0.0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T21:20:00.210

ActivityFactor 必须在使用前进行初始化。您的代码不能保证这一点。最简单的方法是在声明中添加默认值：

```
double ActivityFactor = 10.0; 
```

# c++ - CUDA Debugging: "No value at target location", I clearly set a value

> ID：13896259
> 
> 赞同：2
> 
> 时间：2012-12-15T21:12:47.290
> 
> 标签：c++, cuda

I am getting a very frustrating error where a variable in my code does "not have a value". Here is a picture of my code with the debugger information at the bottom.

My original code only has the red squares, but I added in the blue square "Xmax = 40" just to see if i could force a value into the variable. Obviously you can see there is still a problem. Any insight into why I am getting this error?

![enter image description here](../Images/8de44af67ace71175e94deb51b1b9718.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T02:34:55.973

您遇到的问题很可能是由于变量的生存范围。大多数编译器在编译用于调试的代码时会将变量的有效范围扩展为等于变量的范围。

NVCC 编译器不会扩展变量的有效范围。此外，即使未指定优化标志，NVCC 编译器也会执行一些优化。这会导致消除用户指定的变量。扩展变量的有效范围是 CUDA 调试器功能请求列表中的首要项目之一，但我无法告诉您此问题将在哪个版本中得到解决。

我建议您通过 CUDA 注册开发人员计划[提交有关该问题的错误。](https://developer.nvidia.com/rdp/bugs/cudagpu-bug-reporting)

# ant - sunjce_provider.jar in jre for standalone javafx application

> ID：13896261
> 
> 赞同：2
> 
> 时间：2012-12-15T21:13:13.053
> 
> 标签：ant, javafx-2, netbeans-7

I need to include the sunjce_provider.jar into the JRE for a JavaFX standalone application. The problem I'm having is that I have to do it manually after Netbeans creates the bundle image, but that does not include the file in the msi or exe installers.

Is there an Ant target/task that I can override somehow to copy the file automatically?

Thanks in advance!

# vb.net - 键“attachdbfilename”的值无效。为网站设置 Twitter 登录

> ID：13896264
> 
> 赞同：1
> 
> 时间：2012-12-15T21:13:24.287
> 
> 标签：vb.net, twitter, login, web, webforms

嗨，我正在使用 Visual Studio Ultimate 2012 VB.NET

我正在尝试使用 Visual Studio Web 表单设置我网站的新部分。我希望用户能够使用 Twitter id 登录。所以我创建了我的 Twitter 登录应用程序并将我的 2 个密钥“Consumer key”和“Consumer secret”密钥插入到我的“AuthConfig.vb”文件中

然后我使用 Visual Studios 设置我的数据库“连接到数据库”它成功连接到我的数据库。我知道这一点，因为在弹出一条消息告诉我“连接成功”之后。然后我就可以使用 Visual Studio 在我的数据库上设置一个表。我确认该表是通过登录到我的 GoDaddy 服务器并检查正在显示的数据库表来创建的，并且确实如此。（所以这证实了 VS 可以连接到数据库。

所以这就是发生的事情，我转到我刚刚在 VS 中创建的新页面，这是一个 [http://mastersworldofcomputing.com/basic-learning/Default.aspx](http://mastersworldofcomputing.com/basic-learning/Default.aspx)

然后我点击“登录”，这会将我带到下面的这个页面。 [http://mastersworldofcomputing.com/basic-learning/Account/Login.aspx](http://mastersworldofcomputing.com/basic-learning/Account/Login.aspx)

然后我点击我们刚刚创建的“Twitter 按钮”（这应该让我使用 Twitter id 登录）然后我被带到 Twitter 登录页面，所以我输入用户名和密码并点击“登录”。然后我得到一个闪屏，告诉我它正在将我重定向到我的页面，但几秒钟后它把我带到一个错误页面。下面显示信息。

```
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.ArgumentException: Invalid value for key 'attachdbfilename'.

Source Error:

Line 90:         ' User has logged in with provider successfully
Line 91:         ' Check if user is already registered locally
Line 92:         If OpenAuth.Login(authResult.Provider, authResult.ProviderUserId, createPersistentCookie:=False) Then
Line 93:             RedirectToReturnUrl()
Line 94:         End If

Source File: D:\hosting\7560507\html\basic-learning\Account\RegisterExternalLogin.aspx.vb    Line: 92 
```

堆栈跟踪：

```
[ArgumentException: Invalid value for key 'attachdbfilename'.]
System.Data.SqlClient.SqlConnectionString.VerifyLocalHostAndFixup(String& host, Boolean enforceLocalHost, Boolean fixup) +907262
System.Data.SqlClient.SqlConnectionString..ctor(String connectionString) +4116
System.Data.SqlClient.SqlConnectionFactory.CreateConnectionOptions(String connectionString, DbConnectionOptions previous) +24
System.Data.ProviderBase.DbConnectionFactory.GetConnectionPoolGroup(String connectionString, DbConnectionPoolGroupOptions poolOptions, DbConnectionOptions& userConnectionOptions) +150
System.Data.SqlClient.SqlConnection.ConnectionString_Set(String value) +59
System.Data.SqlClient.SqlConnection.set_ConnectionString(String value) +4
           System.Data.Entity.Internal.LazyInternalConnection.InitializeFromConnectionStringSetting(ConnectionStringSettings appConfigConnection) +122
System.Data.Entity.Internal.LazyInternalConnection.TryInitializeFromAppConfig(String name, AppConfig config) +32
System.Data.Entity.Internal.LazyInternalConnection.Initialize() +131
System.Data.Entity.Internal.LazyInternalConnection.get_ProviderName() +13
System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +332
System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType) +18
System.Data.Entity.Internal.Linq.InternalSet`1.Initialize() +56
System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext() +15
System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider() +37
System.Linq.Queryable.Where(IQueryable`1 source, Expression`1 predicate) +63  
Microsoft.AspNet.Membership.OpenAuth.EFOpenAuthMembershipDatabase.GetMembershipUserName(String providerName, String providerUserId, Boolean updateLastUsed) +891
Microsoft.AspNet.Membership.OpenAuth.OpenAuthManager.Login(HttpContextBase context, String providerName, String providerUserId, Boolean createPersistentCookie) +105
Microsoft.AspNet.Membership.OpenAuth.OpenAuth.Login(String providerName, String providerUserId, Boolean createPersistentCookie) +95
Account_RegisterExternalLogin.ProcessProviderResult() in D:\hosting\7560507\html\basic-learning\Account\RegisterExternalLogin.aspx.vb:92
Account_RegisterExternalLogin.Page_Load(Object sender, EventArgs e) in D:\hosting\7560507\html\basic-learning\Account\RegisterExternalLogin.aspx.vb:48
System.Web.UI.Control.OnLoad(EventArgs e) +91
System.Web.UI.Control.LoadRecursive() +74
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2207 
```

**我的 web.config 文件看起来像**

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
<configSections>
<!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
 <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
</configSections>
<connectionStrings>
<add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-WebSite17-20121215190635;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-WebSite17-20121215190635.mdf" />
</connectionStrings>
<system.web>
<compilation debug="true" strict="true" explicit="true" targetFramework="4.0" />
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
  </authentication>
  <profile defaultProvider="DefaultProfileProvider">
  <providers>
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
  </profile>
  <membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
  </membership>
  <roleManager defaultProvider="DefaultRoleProvider">
  <providers>
    <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" applicationName="/" />
  </providers>
 </roleManager>
  <sessionState mode="InProc" customProvider="DefaultSessionProvider">
  <providers>
    <add name="DefaultSessionProvider" type="System.Web.Providers.DefaultSessionStateProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" />
  </providers>
</sessionState>
</system.web>
<system.webServer>
 <modules runAllManagedModulesForAllRequests="true" />
</system.webServer>
<entityFramework>.

<defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="v11.0" />
  </parameters>
 </defaultConnectionFactory>
 </entityFramework>
 </configuration> 
```

有没有人可以让我在这里走上正确的轨道，这样我就可以克服这个问题。我必须阅读一百个线程，却无处可寻。如果还有其他可能有用的信息，请告诉我感谢您的阅读。

# c# - 取消任务

> ID：13896269
> 
> 赞同：6
> 
> 时间：2012-12-15T21:14:01.023
> 
> 标签：c#, .net, task-parallel-library

我尝试运行一个简单的示例来取消如下所示的任务

```
CancellationTokenSource tokenSource2 = new CancellationTokenSource();

CancellationToken token2 = tokenSource2.Token;

Task task2 = new Task(() =>
{
    for (int i = 0; i < int.MaxValue; i++)
    {
        token2.ThrowIfCancellationRequested();
        Thread.Sleep(100);
        Console.WriteLine("Task 2 - Int value {0}", i);
    }
}, token2);

task2.Start();

Console.WriteLine("Press any key to cancel the task");
Console.ReadLine();

tokenSource2.Cancel();
Console.WriteLine("Task 2 cancelled? {0}", task2.IsCanceled); 
```

我预计 `Console.WriteLine("Task 2 cancelled? {0}", task2.IsCanceled);`会打印`**"Task 2 cancelled? True"**`，但它打印了**"False"**。

你可知道发生了什么？这是预期的行为吗？谢谢。

编辑：确保在调用取消请求之前任务尚未完成。我添加了`Console.ReadLine()`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T22:34:13.807

首先，也许你误解了什么`IsCanceled`意思？这并不意味着“这`Task`是等待取消，所以它应该很快完成”，它的意思是“这`Task`已经被取消了，现在已经完成了”。

如果您没有误解这一点，请考虑一下事件的确切顺序。会发生什么：

1.  `ThrowIfCancellationRequested()`被调用，但令牌还没有被取消，所以它不会抛出。
2.  `Thread.Sleep()`被调用，所以运行`Task`睡眠的线程。
3.  `Cancel()`叫做。
4.  `IsCanceled`被检查。中的代码`Task`没有机会意识到令牌已被取消，因此它仍在运行，因此`IsCanceled`返回`false`。
5.  `ThrowIfCancellationRequested()`再次调用，这次它抛出，实际上取消了`Task`.

这就是为什么`ISCanceled`回到`false`你身边。如果你想让它返回，你可以在检查之前`true`添加类似的东西，或者更好的是，实际上等待完成。`Thread.Sleep(150)``IsCanceled``Task`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T21:20:48.193

任务在您要求取消之前已结束，请查看以下内容，这可能有助于进一步了解如何解决您的问题

通过从这里阅读[http://social.msdn.microsoft.com/Forums/da-DK/parallelextensions/thread/9f88132a-f8bd-4885-ab63-645d7b6c2127](http://social.msdn.microsoft.com/Forums/da-DK/parallelextensions/thread/9f88132a-f8bd-4885-ab63-645d7b6c2127)似乎令牌用于在任务之前取消任务“真的”开始了，但在排队之后。

> 这更像是一种取消计划发生但尚未开始的任务的方法。一旦任务运行，取消它的唯一方法是通过您自己在方法中的检查来合作。没有这个，你必须总是启动任务，然后在内部检查它，这会增加很多额外的、不必要的开销

您甚至可以从[Task 构造函数中的 Cancellation 标记中读取它：为什么？](https://stackoverflow.com/questions/3712939/cancellation-token-in-task-constructor-why)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T21:34:21.360

这不是答案，但太长了，无法在评论中写

```
CancellationTokenSource cancellationTokenSource = new CancellationTokenSource();
CancellationToken cancellationToken = cancellationTokenSource.Token;

Task task = new Task(() =>
{
    for (int i = 0; i < int.MaxValue; i++)
    {
        cancellationToken.ThrowIfCancellationRequested();
        Console.WriteLine("Task 2 - Int value {0}", i);
    }
}, cancellationToken);

task.Start();

cancellationTokenSource.Cancel();
try
{
    task.Wait();
}
catch (AggregateException ae)
{
    if(ae.InnerExceptions.Single() is TaskCanceledException)
        Console.WriteLine("Caught TaskCanceledException");
    else
        Console.WriteLine("Did not catch canceled");
}
Console.WriteLine("Task 2 cancelled? {0}", task.IsCanceled); 
```

*   上面的代码打印了预期的内容，我从来没有打印过“任务 2 - Int value {0}”，所以我认为它在取消之前没有完成。
*   请注意，取消任务会在我的示例中引发异常
*   有一些[`patterns for handling exceptions using tasks`](http://msdn.microsoft.com/en-us/library/dd997415.aspx)可以很好地阅读。

# c++ - 如何在 C++ 和 R 中使用完全相同的数字格式？

> ID：13896280
> 
> 赞同：3
> 
> 时间：2012-12-15T21:16:03.890
> 
> 标签：c++, r, formatting

我正在用 R 为 C++ 中的程序编写[功能测试。](http://en.wikipedia.org/wiki/Functional_testing)典型的输出文件有一些列为“字符串”，其他列为“双”。然后，我想将`diff`R 返回的预期输出文件与 C++ 返回的观察到的输出文件进行比较。

在伪 C++ 中，我只是这样做：

```
stringstream ssTxt;
ssTxt.precision (7);
ssTxt.setf (ios::scientific);
for(i=0; i<10; ++i){
  ssTxt << names[i] << " " << values[0][i] << " " << values[1][i] << " " << values[2][i] << endl;
  // write in file and clear ssTxt
} 
```

这是一个典型的输出：

```
item1 2.8200000e-01 500 4.1846912e-04 
```

在 R 中，我这样做：

```
results <- data.frame(name="item1", val1=0.282, val2=500, val3=0.00041846912873)
write.table(x=format(results, digits=8, nsmall=7, scientific=TRUE), file=...) 
```

这是对应于相同数据的输出：

```
item1 2.82e-01 500 4.1846912e-04 
```

如您所见，它几乎可以工作，但 R 不会在“2.82”之后添加尾随 0。我更喜欢更改 R 代码而不是 C++ 代码。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T21:51:37.917

你试过了吗
`sprintf`？`formatC`

具体来说，我认为

```
sprintf("%e", 2.82e-01) 
```

should do the trick but as mentioned above have a look at help(sprintf), which describes the various formatting capabilities of this function ...

# windows - 我的应用无法接收 wm_timer 消息

> ID：13896283
> 
> 赞同：2
> 
> 时间：2012-12-15T21:16:54.083
> 
> 标签：windows, winapi

创建窗口后，我启动了一个计时器来做某事。像这样的代码：

```
SetTimer(hWnd, 1, 40, NULL);  //tick each 40 ms. 
```

我追踪了最后一个错误，即 0。但我无法接收 wm_timer！像这样的代码：

```
case WM_TIMER:
{
     //...
} 
```

我的IDE是VS2010，操作系统是Windows7，那么我使用的环境有什么特殊情况吗？

PS 好吧，我提供了更多代码，它是一个 win32 应用程序，所以在 WinMain 中：

```
HWND hWnd = CreateWindow(...);  //style : WS_POPUP | WS_VISIBLE , return is good
SetTimer(hWnd, 1, 40, NULL);    //return is good too.
while (GetMessage(&msg, NULL, 0, 0))
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
} 
```

和 WndProc：

```
switch(message)
{
case WM_TIMER:
{
    DebugBreak();  //no reaction
}
break;
.......
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T23:30:06.830

`WM_TIMER`如果您未能使用其他消息，则不会触发，因为它们将优先。例如，其中一个原因是未正确处理`WM_PAINT`消息（您必须`BeginPaint()`/ `EndPaint()`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T10:21:44.287

据我所知，问题源于您过早调用 SetTimer 的事实。将它放在 WM_CREATE 中。

```
switch(message)
{
    case WM_CREATE:
    {
        SetTimer(hWnd, 1, 40, NULL);
    }
    case WM_TIMER:
    {
        DebugBreak();  //no reaction
    }
    break;
    .......
} 
```

我没有看到任何其他原因导致这应该发生故障。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-03T02:58:02.193

我也有同样的问题。如果我将“ `SetTimer()`”放在该`WM_CREATE`部分中，则它不会启动。但是，如果我创建一个需要单击的菜单选项，并将“ `SetTimer()`”功能放在那里，它就可以工作。

```
 case WM_CREATE:
    {
        SetTimer(hWnd, 1, 1000, NULL); // does not work here
        return 0:
    }
    case ID_TIMER_START:
    {
       SetTimer(hWnd, 1, 1000, NULL); // works here
       return 0;
    } 
```

# java - 升级到 Spring 3.2 后出现 HttpMediaTypeNotAcceptableException

> ID：13896286
> 
> 赞同：9
> 
> 时间：2012-12-15T21:17:26.350
> 
> 标签：java, spring, spring-mvc, spring-3

将我的 Spring MVC 应用程序升级到 Spring 3.2 后，访问我的一些 URL 时出现以下异常：

```
org.springframework.web.HttpMediaTypeNotAcceptableException: Could not find acceptable representation
    at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.handleNoMatch(RequestMappingInfoHandlerMapping.java:203) ~[spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:272) ~[spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:212) ~[spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:55) ~[spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:297) ~[spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1091) ~[spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1076) ~[spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:896) ~[spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856) ~[spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:915) [spring-webmvc-3.2.0.RELEASE.jar:3.2.0.RELEASE]
(...) 
```

此异常会导致 HTTP 406 NOT ACCEPTABLE。

我设法创建了一个带有我无法访问的 URL 的简化控制器：

```
@RequestMapping(value = "/resources/foo.js", produces = "text/javascript")
@ResponseBody
public String foo() throws Exception {
    return "";
} 
```

由于我使用的是带有 -header 的普通浏览器`*/*`，`Accept`所以我不明白为什么我应该获得 HTTP 406。更奇怪的是，这段代码适用于 Spring 3.1.2，但不适用于 Spring 3.2\. 这是为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-15T21:17:26.350

[Spring 在 3.2 中进行内容协商的](http://static.springsource.org/spring-framework/docs/3.2.x/spring-framework-reference/html/new-in-3.2.html#new-in-3.2-webmvc-content-negotiation)方式发生了一些变化。其中一项更改是现在可以根据 URL 中的文件后缀来进行内容协商。默认情况下启用此功能。在 Spring 3.2 之前的版本中，HTTP 接受标头用于内容协商。当浏览器访问您的 URL 时，内容协商很少成为问题，因为浏览器总是发送`Accept:(...)*/*`.

Spring 有一个后缀 => 媒体类型的映射。对于“.js”，默认媒体类型是“application/x-javascript”。当 Spring 尝试查找对 /resources/foo.js 的请求的处理程序映射时，它不会匹配您的`foo()`-method，因为它会产生错误的媒体类型。

我不确定 Spring 团队是否考虑过这个案例。至少有点奇怪，它允许您创建一个`@RequestMapping`无法访问的对象（因为 .js-media 类型与在生产字段中设置的内容不兼容）。

有几种方法可以解决此问题。一种是将生产参数更改为“application/x-javascript”。另一个是将“.js”的媒体类型更改为“text/javascript”（[请参阅​​如何执行此操作的文档](http://static.springsource.org/spring-framework/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-config-content-negotiation)）。第三种可能性是关闭基于后缀的内容协商（同样，[请参阅如何做的文档](http://static.springsource.org/spring-framework/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-config-content-negotiation)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-02T08:13:30.210

我现在通过根据请求路径的扩展禁用获取媒体类型来使其工作。这可以通过以下方式完成：

```
 <mvc:annotation-driven content-negotiation-manager="contentNegotiationManager"/>
<bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
    <!-- Turn off working out content type based on URL file extension, should fall back to looking at the Accept headers -->
    <property name="favorPathExtension" value="false" />
</bean> 
```

并为所有 xsd 模式位置指定版本 3.2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T14:31:02.210

您需要为`MessageConverter`您的配置添加一个正确的，以及您可能已经为 Jackson 拥有的一个。

例如在您的子类中`WebMvcConfigurerAdapter`：

```
@Override
public void configureMessageConverters(final List<HttpMessageConverter<?>> converters) {
    converters.add(new StringHttpMessageConverter());
} 
```

当您仍然打开该`favorPathExtension`选项时，您也不需要`produces`参数，您的控制器将返回`application/javascript`.

当我遇到同样的问题时，Aleksanders 回答中的提示实际上并没有帮助我摆脱 406。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-08T16:56:16.513

我有一个类似的问题，其中对控制器的休息调用具有路径变量，其中包含路径值中的 .au。由于 Spring Content Negotiation，Spring 正在读取 .au 作为文件扩展名

**REST GET 调用是** [http://localhost:8080/api/forgot-password/kk@kudeta.com.au](http://localhost:8080/api/forgot-password/kk@kudeta.com.au) 由于路径变量中的 .au Spring 抛出 org.springframework.web.HttpMediaTypeNotAcceptableException

我们通过关闭基于内容的协商解决了这个问题

```
@Configuration
public class ContentNegotiationConfig extends WebMvcConfigurerAdapter{
    @Override
    public void configureContentNegotiation(final 
     ContentNegotiationConfigurer configurer) {
        // Turn off suffix-based content negotiation
        configurer.favorPathExtension(false);
    }

} 
```

# java - DAO 中的结果集问题

> ID：13896288
> 
> 赞同：0
> 
> 时间：2012-12-15T21:17:37.933
> 
> 标签：java, dao, resultset

*请原谅我在正确命名这个问题时缺乏创造力。*

嗨，我花了过去 3 个小时试图解决这个问题，我想我已经解决了，但它的解决方案仍然让我望而却步。我有这个非常简单的代码。

```
 Statement stmt = db.getStatement();
    ResultSet queryResult = stmt.executeQuery("SELECT * FROM users");

    while(queryResult.next()) {
        username = queryResult.getString("username");
        password = queryResult.getString("password");
        privilege = queryResult.getInt("privilege");

        queryResult = stmt.executeQuery("SELECT * FROM division");
        while(queryResult.next()) {}

        users.add(new User(username, password, privilege));
    } 
```

现在，这段代码被简化以说明我的代码中的问题所在。显然，我没有一个什么都不包含的while循环。

我开始意识到，每当我想从数据库中获取一些东西时，我只能在一个循环中使用结果集。如果我写一个“嵌套结果集循环”，我会得到“操作...结果集关闭”、“找不到列'用户名'”或其他一些错误。

我的 DAO 代码中有很多这些嵌套的结果集循环，用于从数据库中获取所有内容。由于我在 MySQL 方面不是那么强，所以这是一个简单的解决方案（我**只剩**下很少的时间来做这个程序）......因为我曾经在 PHP 中做过类似的事情。

我并不是说这段代码是好的设计，但是因为时间的关系，我现在**真的**不太关心好的类设计。因此，无论设计选择如何，您想到的任何解决方案都受到欢迎。

另一种解决方案是将所有内容拆分为单个循环，因为这往往会起作用（非常简单）。但这意味着要修改很多代码，我希望这是备用计划。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T21:21:33.407

您不能像这样交错结果集，请参阅[API 文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html)：

> 默认情况下，每个 Statement 对象只能同时打开一个 ResultSet 对象。因此，如果一个 ResultSet 对象的读取与另一个 ResultSet 对象的读取交错，则每个对象都必须由不同的 Statement 对象生成。Statement 接口中的所有执行方法都会隐式关闭语句的当前 ResultSet 对象（如果存在打开的对象）。

如果您为不同的查询创建单独的语句，我认为您会没事的。我看到的通常做法是为每个查询使用单独的 DAO 方法，以使 DAO 方法尽可能简单和可重用。（这意味着 DAO 不负责事务划分，但更高级别的组件，如服务，控制事务中的内容。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:21:44.680

要解决您的问题 - 不要将嵌套循环的值分配给相同的 ResultSet

# math - 查找偏差/元素列表的标准偏差

> ID：13896289
> 
> 赞同：1
> 
> 时间：2012-12-15T21:17:40.167
> 
> 标签：math, statistics, standard-deviation

我有一个集合列表和每个集合的一些基本统计数据（项目数、最小值、最大值、平均值、标准差）。我想为所有组合计算相同的统计数据。计算总计数、最小值最大值和平均值很容易，但我不确定如何计算总标准差。

数据如下所示：

```
Count        Max      Min      Mean      Stddev
1,027,671    781      68       57.8      32.79
  839,473    552      54       61.3      48.53
3,012,102    890      41       64.9      41.92 
```

一起生成所有集合的统计信息：

```
4,879,246    890      41       62.8      ??? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:37:58.330

我假设您正在编写维护分布的代码，而不仅仅是使用一些已经计算出标准偏差的数据。标准开发不是为计算机维护的真正自然参数。相反，您应该维护项目的数量、总和以及项目总和的平方，然后您可以轻松地从这 3 条原始信息中计算分布的均值和标准差。我在此代码中使用此策略。add 操作支持合并两个分布。注意它的实现是多么简单。[http://github.com/rrenaud/dominionstats/blob/master/stats.py#L17](http://github.com/rrenaud/dominionstats/blob/master/stats.py#L17)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:30:38.833

我认为不可能从您拥有的数据中准确计算出这一点。问题是标准偏差取决于组合数据集的平均值，该平均值不一定与单个平均值相同，还取决于每个点与该平均值的距离，您没有精确（但可能是近似值）使用权。

# javascript - 我应该让 NHibernate 为创建的实体生成 GUID，还是在客户端生成 GUID 是否安全？

> ID：13896292
> 
> 赞同：0
> 
> 时间：2012-12-15T21:18:30.367
> 
> 标签：javascript, guid

我正在尝试提高应用程序的响应能力。用户表示他们想要将 Song 对象添加到播放列表。为此，我创建了一个新的 Song 对象，将其保存到我的服务器以设置其 ID，然后，当服务器成功响应时，我将 Song 对象添加到播放列表中。

这样做的副作用是让用户在他们的操作和应用程序的响应之间产生尴尬的延迟。

我想知道是否可以为我的实体客户端生成 GUID，而不是将具有空 GUID 的对象传递给 NHibernate（然后在使用我的 Sql Server DB 时设置它。）

我将使用[此方法生成 GUID](https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript)：

```
'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
    return v.toString(16);
}); 
```

不过，我担心碰撞。我可以做？还是客户端和服务器端生成的 GUID 大多相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:24:40.950

在客户端生成 ID 时，您不能保证唯一的 ID，因为客户端 JavaScript 代码可以由精通的用户修改（或者可以修改发送到服务器的请求）。所以你应该在服务器端生成要保存的 GUID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:43:26.240

您提到的生成GUID的方法绝对不安全，迟早会导致冲突。您绝对应该在服务器端生成 GUID。

你有什么理由创建新的 Song 对象吗？
您是在复制现有对象还是创建全新对象？
如果是副本，您应该考虑将原件链接到播放列表（此时您不必等待 GUID）。

# mercury - 创建确定性有限自动机 (DFA) - Mercury

> ID：13896296
> 
> 赞同：2
> 
> 时间：2012-12-15T21:18:51.713
> 
> 标签：mercury

我想在 Mercury 中模拟一个确定性有限自动机 (DFA)。但我在几个地方都很讨厌。

形式上，DFA 具有以下特征：

*   一组状态 S，
*   输入字母 E <-- 求和符号，
*   一个转换函数：S × E --> S，
*   一个 startState s € S,
*   一个 setOfAcceptableFinalStates F =C S。

    DFA 将始终以启动状态启动。然后 DFA 会一一读取输入中的所有字符。根据当前输入的字符和当前状态，将有一个新的状态。这些转换在转换函数中定义。当 DFA 处于其可接受的最终状态之一时，在读取最后一个字符后，DFA 将接受输入，如果不接受，则输入将被拒绝。

    图中显示了一个 DFA 接受的字符串，其中零的数量是三个的复数。条件1是初始状态，也是唯一可接受的状态。对于每个输入字符，对应的弧是跟随到下一个状态。

[链接到图](http://i48.tinypic.com/ibetuh.png)

**必须做什么**

1.  代表状态的类型“mystate”。每个州都有一个用于识别的编号。

2.  表示状态之间可能的转换的类型“转换”。每个转换都有一个 source_state、一个 input_character 和一个 final_state。

3.  一种表示整个 DFA 的“状态机”类型。在解决方案中，DFA 必须具有以下属性：

    *   所有状态的集合，
    *   输入字母，
    *   一个转换函数，表示为一组可能的转换，
    *   一组接受的最终状态，
    *   DFA 的当前状态
4.  一个谓词“init_machine(状态机::out)”将他的参数与DFA统一起来，如图所示。DFA的当前状态设置为其初始状态，即1。DFA的输入字母由字符'0'和'1'组成。

5.  用户可以输入由 DFA 控制的文本。程序将继续运行，直到用户键入 Ctrl-D 并模拟 EOF。如果用户使用了不允许进入 DFA 的输入字母表的字符，则会出现错误消息结束程序将关闭。（预先要求）

**例子**

```
Enter a sentence: 0110
String is not ok!
Enter a sentence: 011101
String is not ok!
Enter a sentence: 110100
String is ok!
Enter a sentence: 000110010
String is ok!
Enter a sentence: 011102
Uncaught exception Mercury:
Software Error: Character does not belong to the input alphabet! 
```

* * *

**我有的东西。**

```
 :- module dfa.
 :- interface.
 :- import_module io.
 :- pred main(io.state::di, io.state::uo) is det.

 :- implementation.
 :- import_module int,string,list,bool. 
```

**1**

```
:- type mystate ---> state(int). 
```

**2**

```
:- type transition 
            ---> trans(
                    source_state::mystate, 
                    input_character::bool, 
                    final_state::mystate
                   ). 
```

**3**（错误、finale_state 和 current_state 和 input_character）

```
:- type statemachine 
                  ---> dfa(
                        list(mystate),
                        list(input_character),
                        list(transition),
                        list(final_state),
                        current_state(mystate)
                       ). 
```

**4**错过很多

```
:- pred init_machine(statemachine :: out) is det.

%init_machine(statemachine(L_Mystate,0,L_transition,L_final_state,1)) :- <-probably fault 
```

**5**不完美

```
main(!IO) :-
        io.write_string("\nEnter a sentence: ", !IO),
        io.read_line_as_string(Input, !IO),
        (
                Invoer = ok(StringVar),
                S1 = string.strip(StringVar),
                (if S1 = "mustbeabool" then

                        io.write_string("Sentenceis Ok! ", !IO)
                else
                        io.write_string("Sentence is not Ok!.", !IO)),
                main(!IO)
        ;
                Invoer = eof
        ;
                Invoer = error(ErrorCode),
                io.format("%s\n", [s(io.error_message(ErrorCode))], !IO)
        ). 
```

希望你能帮我

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:41:43.370

当您编写诸如 mystate 之类的类型时：

```
:- type transition ---> trans(source_state::mystate, input_character::bool, final_state::mystate). 
```

不要全部写在一行上，很难阅读。

```
:- type transition
    --->    trans(
                source_state     :: mystate,
                input_character  :: bool,
                final_state      :: mystate
            ). 
```

现在它更容易阅读。我们还可以看到类型和字段名称的环绕方式错误。尝试：

```
:- type transition
    --->    trans(
                mystate  :: source_state,
                bool     :: input_character,
                mystate  :: final_state
            ). 
```

# c# - 如何修复子动作不允许执行重定向动作，其他答案不修复

> ID：13896307
> 
> 赞同：1
> 
> 时间：2012-12-15T21:20:02.747
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-2

ASP.NET MVC2 视图：

```
<%@ Page Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<MvcMusicStore.ViewModels.PaymentViewModel>" %>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    ...
    <form action="<%= Html.Action("PaymentByBankTransfer", "Checkout") %>" >
    <input type="submit" value="Payment by bank transfer" />
    </form> 
```

结帐控制器：

```
 public ActionResult PaymentByBankTransfer()
    {
        var order = Session["Order"] as Order;
        ExecCommand(@"update dok set confirmed=true where order={0}", order.OrderId);
        return CheckoutCompleteOK();

        var cart = ShoppingCart.GetCart(HttpContext);
        cart.EmptyCart();
        // https://stackoverflow.com/questions/1538523/how-to-get-an-asp-net-mvc-ajax-response-to-redirect-to-new-page-instead-of-inser?lq=1
        return JavaScript("window.location = '/Checkout/CompleteOK'");
    }

    // common method called from other controller methods also
    public ActionResult CheckoutCompleteOK()
    {
        var cart = ShoppingCart.GetCart(HttpContext);
        cart.EmptyCart();
        // prevent duplicate submit if user presses F5
        return RedirectToAction("Complete");
    }

   public ActionResult Complete()
    {
        var order = Session["Order"] as Order;
        SendConfirmation(order);
        return View("PaymentComplete", order);
     } 
```

按下表单提交按钮会导致异常

```
Child actions are not allowed to perform redirect actions 
```

由于代码显示了最受好评的答案

[如何获得 ASP.NET MVC Ajax 响应以重定向到新页面，而不是将视图插入 UpdateTargetId？](https://stackoverflow.com/questions/1538523/how-to-get-an-asp-net-mvc-ajax-response-to-redirect-to-new-page-instead-of-inser?lq=1)

试图修复它，但这会导致其他错误：浏览器尝试打开 url`window.location = '/Checkout/CompleteOK'`

如何解决此异常？一切看起来都不错，没有其他答案中描述的部分视图。我也尝试在表单中使用 method='post' 属性，但问题仍然存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-12-23T10:58:09.097

**不使用 javascript 进行重定向：** 如果将表单放在子视图中，有时如果在 Beginform 帮助器（子视图内部）中指定操作名称和控制器名称，则不会发生此问题。例如，我像这样更改了我的子操作视图：

前 ：

```
@using (Html.BeginForm())
{
 ...
} 
```

后 ：

```
 @using (Html.BeginForm("InsertComment", "Comments", FormMethod.Post, new { id = "commentform" })) 
{
 ...
} 
```

现在，您可以将 RedirectAction 命令放入“InsertComment”操作中，一切都会正常进行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T15:09:18.853

而不是调用`public ActionResult CheckoutCompleteOK()`发布，删除该操作并为`public ActionResult PaymentByBankTransfer()`.

然后`RedirectToAction("Complete");`在 PaymentByBankTransfer 发布方法中返回。

我认为这会解决你的问题。

# facebook - 关于 Facebook 打开图

> ID：13896310
> 
> 赞同：-2
> 
> 时间：2012-12-15T21:20:12.580
> 
> 标签：facebook, facebook-opengraph

我可以知道当我们按下按钮在 Facebook 上发布时，我们可以更改 META 字段上的 url、图像、类型、标题字段吗？例如：

```
 <meta property="og:type"   content="" /> 
 <meta property="og:url"    content="" /> 
 <meta property="og:title"  content="" /> 
 <meta property="og:image"  content="" /> 
```

当用户进入网站时它是空的，如果你按下“提交”按钮，信息将被填写，我知道 jquery 可以做到这一点，但我可以知道 facebook Open graph 接受这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:58:31.100

不，它不是那样工作的。

Facebook 的抓取工具将访问 OG 对象 URL 并提取元数据——因此数据必须由您的服务器根据与您的用户目前在浏览器中看到的内容无关的请求交付，并且抓取工具将也不执行任何 JavaScript。

# php - 使用 date() 函数的天到小时

> ID：13896313
> 
> 赞同：2
> 
> 时间：2012-12-15T21:20:51.950
> 
> 标签：php, date, datetime

我有几分钟的时间，我想知道它是多少小时。但是使用附加代码，1600 分钟，我得到 2 小时 40 分钟。我需要 26:40:00 的格式。感谢帮助。

```
$my_time = 1600;
echo date("H:i:s", $my_time); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T21:28:42.973

尝试使用[`DateInterval`](http://php.net/manual/en/class.dateinterval.php)专门用于处理时间间隔的对象：

```
$interval = new DateInterval('M1600');
echo $interval->format('%H:%i:%s'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:25:29.073

`date`真的不适合这个。相反，试试这个：

```
echo sprintf("%s:%2s:%2s",floor($my_time/3600),floor($my_time/60)%60,$my_time%60); 
```

（这是假设您`$my_time`以秒为单位，而不是分钟。乘以`60`前面以获得以秒为单位的时间）

# ruby-on-rails - 多个用户的rails twitter gem

> ID：13896314
> 
> 赞同：1
> 
> 时间：2012-12-15T21:20:54.750
> 
> 标签：ruby-on-rails, twitter-gem

使用 twitter gem 我想获得经过身份验证的用户的所有关注者。不过，我只获得了应用程序的注册 twitter id 的关注者。

我在初始化程序中有一个 twitter.rb，它使用 twitter 上注册应用程序的消费者密钥/秘密

```
Twitter.configure do |config|
    config.consumer_key = '****'
    config.consumer_secret = '****'
end 
```

当您登录时，您可以通过 Devise 登录。然后在用户配置文件中，用户可以使用 Twitter 进行身份验证，此时我存储令牌和秘密。

```
def create
    auth = request.env["omniauth.auth"]
    currentAuthentication = Authentication.find_by_provider_and_uid(auth['provider'], auth['uid'])
    if currentAuthentication
        flash[:notice] = "Logged in successfully."
    else
        current_user.authentications.create(:provider => auth['provider'], :uid => auth['uid'], :token => auth['credentials']['token'], :secret => auth['credentials']['secret'])
        flash[:notice] = "Authentication successful."
    end

    redirect_to authentications_url
end 
```

然后在稍后阶段，我使用我存储的信息对该用户进行身份验证，并希望获得他的追随者。

```
 def getwords
    # authenticate at twitter
    authenticationDetails = current_user.authentications.first()
    wordClient = Twitter::Client.new(
        :oauth_token => authenticationDetails.token,
        :oauth_token_secret => authenticationDetails.secret
        )

    # get the users followers
    #wordClient.update("I'm tweeting using the Twitter Gem.")
    cursor = "-1"
    followerIds = []
    while cursor != 0 do
      followers = wordClient.follower_ids

      cursor = followers.next_cursor
      followerIds+= followers.ids
      sleep(2)
    end

    return followerIds
  end 
```

当我执行 wordClient.update 时，我从已注册的应用程序中发送了一条推文，并且还获得了已注册应用程序的关注者。

我期待发送一条推文并获得经过身份验证的用户的关注者？我哪里错了？我能找到的所有例子都是基于一个用户的 twitter。

# php - Wordpress，我如何将 ← 以前的条目更改为页码

> ID：13896315
> 
> 赞同：-1
> 
> 时间：2012-12-15T21:21:07.480
> 
> 标签：php, wordpress

我想知道如何将“← 以前的条目”更改为喜欢页数，例如 1、2、3、4、5 等等。

我怎么能只用 PHP 代码来做到这一点，我在谷歌上真的找不到任何东西。也许我总是搜索错误的名字，但我已经尝试了 30 分钟，这是我最后一次拍摄！

你可以在这里看到我的 Wordpress 页面，这是一个自行设计的网站。[http://codingdaily.net/freebies](http://codingdaily.net/freebies)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T21:33:34.183

我认为您所指的称为分页。

[Wordpress Codex 参考](http://codex.wordpress.org/Function_Reference/paginate_links)
[WPtuts 分页教程](http://wp.tutsplus.com/tutorials/wordpress-pagination-a-primer/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:37:48.627

这取决于主题。您可以使用 next_posts_link 和 previous_posts_link 函数进行自定义。

在主题专业中，您可以查看 wp-content 文件夹中的主题，查找您的主题，然后查找名为 loop.php 的文件。

搜索上面的那些函数，你会看到它是如何工作的。

# android - 简历出错，mjpeg 查看应用程序

> ID：13896317
> 
> 赞同：0
> 
> 时间：2012-12-15T21:21:13.953
> 
> 标签：android, mjpeg

我在我的 android 设备上检查了[这个链接](https://stackoverflow.com/questions/10550139/android-ics-and-mjpeg-using-asynctask)以显示 mjpeg。

我测试了两个链接。一个是示例代码中的示例链接。另一个是我的 cam (APM-H804-WS) 链接。问题仅发生在使用我的 cam 链接时。

第一次执行效果很好。关闭屏幕，或按主页按钮将使示例应用程序停用。问题发生在这里。

我看到凸轮停止的其他屏幕。如果什么都不做并等待，它会断开连接。如果我通过类似任务杀手杀死示例应用程序，屏幕将重新开始移动。即使恢复应用程序，它的工作原理也是一样的。不会发生问题的唯一方法是快速重新加载应用程序并希望它连接良好。（带有日志 2。请求完成，状态 = 200）

使用示例链接时没有问题。使用“IP Camera viewer lite”也没有问题。

我不知道我应该在哪里修复它...

# c# - 以编程方式从垃圾箱中删除 N2 CMS 节点

> ID：13896322
> 
> 赞同：0
> 
> 时间：2012-12-15T21:22:03.330
> 
> 标签：c#, n2cms

在 N2 CMS 中，有没有办法以编程方式从垃圾箱中删除节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T10:02:48.037

我想到了。在此示例中，TargetDetailModel 类型的模型将从 N2 CMS 垃圾箱中永久删除。

```
var trash = new ItemList<TrashContainerItem>(N2.Find.RootItem.Children, new TypeFilter(typeof(TrashContainerItem))).FirstOrDefault();
if (trash != null)
{
  var detailToPermDelete = new ItemList<TargetDetailModel>(trash.Children, new TypeFilter(typeof(TargetDetailModel)));
  for (int permDeleteCount = 0; permDeleteCount < detailToPermDelete.Count; permDeleteCount++)
  {                            
    N2.Context.Current.Persister.Delete(detailToPermDelete.ElementAt(permDeleteCount));
  }
} 
```

# c++ - 在 VIsual Studio 2010 Express 中使用 GLEW、SDL 和 OpenGL 无法解析的外部符号

> ID：13896324
> 
> 赞同：7
> 
> 时间：2012-12-15T21:22:21.863
> 
> 标签：c++, opengl, sdl, glew

我正在使用[这个](http://imgur.com/a/vFGqN)OpenGL 教程。我使用 SDL 来创建我的窗口，现在我需要使用 glew（请参阅教程底部的另一件事部分）。但无论我链接、包含、复制或定义什么，我得到的都是未解决的外部符号错误。

我有：

*   将我的项目链接到 GLEW Lib 文件夹
*   将包含文件夹添加到我的包含路径
*   将 include、bin 和 lib 文件复制到相应映射中的 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\
*   将 glew32.dll 和 glew32mx.dll 复制到我的 system32 文件夹
*   包含和定义不同的文件（见截图 2）

我会让截图来说话，我忘记了什么？

截图：

应该去这里，但由于新的用户规则，我不能把它们包括在这里。[这是一个链接](http://imgur.com/a/vFGqN)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-03T23:44:34.507

我认为您需要链接到 glew32sd.lib 或 glew32s.lib（取决于调试或发布构建配置），因为您已经定义了 GLEW_STATIC。

这是我们最近完成的 win32 glew 应用程序上预编译头文件的片段。它显示了我们链接到的库：

```
#pragma comment( lib, "OpenGL32.lib")
#pragma comment( lib, "GLu32.lib")
#pragma comment( lib, "freeglut_static.lib")

#define GLEW_STATIC

#if defined _DEBUG
    #pragma comment(lib, "glew32sd.lib")
#else
    #pragma comment(lib, "glew32s.lib")
#endif

#include <GL\glew.h>
#include <gl\GL.h>
#include <gl\GLU.h> 
```

请注意，我们使用了 glew32s.lib 和 glew32sd.lib（调试等效项），我认为这是 glew 的静态库。

如果您正确引用了库并包含文件夹，我能想到的唯一另一个问题是您*可能*需要将 dll 文件复制到项目的输出文件夹中。

例如，如果您的项目构建到 c:\MyProject\Debug\MyProject.exe，请将 dll 复制到 c:\MyProject\Debug。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T17:41:25.057

这可能无法解决您眼前的问题，但可能会帮助您稍后躲避其他传入的问题。我不知道。我提供的只是对另一种资源的推荐，用于学习如何做你所问的事情。

现在，我认为您的第一个链接已损坏，因为它链接到我的屏幕截图。我正要查看教程，但因此无法查看。

无论如何，我一直在使用一本名为[OpenGL SuperBible 5th ed 的书；](http://www.starstonesoftware.com/OpenGL/ "试试看！")这是很容易消化的。

它开始期望您对 3D 图形、如何包含库、为您的系统创建窗口等一无所知。但是，它非常详细，而且很长一段时间都不会太难阅读。我在两周内完成了这本书（好吧，在假期里，什么都不做）。

我与书主没有任何关系，我只是非常喜欢它，在我看来，你正在努力解决的问题已经被它优雅地处理了。

# web-services - 如何运行 ssl EJB Web 服务？

> ID：13896326
> 
> 赞同：0
> 
> 时间：2012-12-15T21:22:33.597
> 
> 标签：web-services, security, jakarta-ee, glassfish, jax-ws

我使用 metro 和 glassfish 3.1.2(b5) 创建了一个 Ejb 端点 WebService (.EAR)。wsdl 文件通过 https 发布和访问。我从安全 url 生成了客户端工件，当我运行客户端时，我收到此错误（服务器端）：

```
ATTENTION: Invalid request scheme for Endpoint my_web_service. Expected https . Received http 
```

这就是我配置安全连接的方式：

```
<glassfish-ejb-jar>
    <enterprise-beans>

        <ejb>
            <ejb-name>my_web_service</ejb-name>
            <webservice-endpoint>
                <port-component-name>my_web_service</port-component-name>
                <transport-guarantee>CONFIDENTIAL</transport-guarantee>
            </webservice-endpoint>
        </ejb>  

    </enterprise-beans>
</glassfish-ejb-jar> 
```

如果我将实现更改为 servlet 端点（.war），一切运行正常，所以我认为我在配置中遗漏了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T15:06:05.050

要完成这项工作，您需要将 glassfish 中 grizzly 的捆绑版本更新到 1.9.55 。

# android - 有没有办法设置Android相机的焦距？

> ID：13896328
> 
> 赞同：2
> 
> 时间：2012-12-15T21:23:07.067
> 
> 标签：android, android-camera, android-camera-intent

在 Android 相机 API 中，似乎有一些相关功能可能暗示我可以设置相机的焦距：

```
Camera.setParameters(Camera.Parameters params)
Camera.Parameters.getFocusDistances(float[] output) 
```

和静态值：

```
Camera.Parameters.FOCUS_MODE_FIXED 
```

我希望能够以编程方式实际设置焦距，但我无法弄清楚参数是什么。有谁知道我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:53:49.060

不，没有 API 方法可以将焦点设置到特定距离。这些只是告诉你已经找到的焦点，也许是自动对焦。

# html - 相邻显示两个或多个无序列表

> ID：13896331
> 
> 赞同：6
> 
> 时间：2012-12-15T21:23:40.520
> 
> 标签：html, html-lists, inline, css

首先，我要澄清一下，我不是试图内联显示列表项。我知道你可以通过使用 css 来做到这一点：

> `li { display: inline; }`.

我想要做的是使用相对位置将两个 ul 放置在彼此相邻的位置，但它也应该在没有相对位置的情况下工作。
我试过了

> `ul { display: inline; }`

但它不起作用。它们不会出现在同一行。有趣的是，我尝试显示内联的所有其他块元素，例如 div、li 都可以正常工作。我已经做了很多实验，以确保元素的宽度可以彼此相邻，并将 ul 放在显示内联的 div 中。所以我的问题是， ul 是不可能内联显示的标签吗？

PS 如果不可能，我可能会使用绝对位置将它们排列在一起，也许我也可以使用浮动，但浮动在我的网页布局中效果不佳。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T21:30:17.303

使用`inline-block`. 见[小提琴](http://jsfiddle.net/orig/2r5ER/1/)

```
ul { display: inline-block; } 
```

PS我使用了@jmeas评论中的小提琴，但假设你想继续`display: block`使用`li`

# .htaccess - .htcaccess 排除文件夹

> ID：13896332
> 
> 赞同：0
> 
> 时间：2012-12-15T21:23:45.223
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我试图从 mod_rewrite 中排除一些文件夹，我已经搜索并尝试了所有这些文件夹。但是，它没有用。我在本地主机上使用它。这就是我的 .htaccess 文件的样子。

```
RewriteRule ^$ index.php?/ [QSA,L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule (.*) index.php?/$1 [QSA,L] 
```

我已经尝试了这几个建议，但它并没有解决问题。有人可以帮助我吗？假设我要排除的目录是文件夹。

```
RewriteCond %{REQUEST_URI} !^/folder/.*$
RewriteRule ^/folder($|/) - [L]
RewriteRule ^folder($|/) - [L]
RewriteCond %{REQUEST_URI} !^/folder/
RewriteCond %{REQUEST_URI} !^/(folder|folder/.*)$
RewriteRule ^(folder)($|/) - [L]
RewriteCond %{REQUEST_URI} !^/?(folder)/ 
```

我想，我只是用完了选项，因为我已经尝试了所有选项？有什么错误吗，我在这里做的？我尝试重写根目录以及一个子目录..所以我想排除该目录。

# python - 使用 Python 进行图像旋转

> ID：13896334
> 
> 赞同：2
> 
> 时间：2012-12-15T21:24:08.493
> 
> 标签：python, image, rotation, matplotlib, scipy

我的问题如下：我在图像中有两个点，我得到这两个点之间的角度并将图像旋转这个角度。我需要获取图像中这些点的新位置，但是当我尝试使用具有相同角度的旋转矩阵来旋转这些点时，这些点不会一致，下面的代码有什么问题？

```
def rotMat(angle):
  return asarray([[cos(angle), -sin(angle)],[sin(angle),cos(angle)]])

for i in batch2:
  figure(1)
  filename = "../imagens/" + i[-1]
  outputFile = "./output/" + i[-1]
  x1 = float(i[22]) # x coordinate of first point
  y1 = float(i[23]) # y coordinate of first point
  x2 = float(i[34]) # x coordinate of second point
  y2 = float(i[35]) # y coordinate of second point

  # angle of rotation
  angle = arctan((y1-y2)/(x1-x2))

  im = imread(filename)
  im = ndimage.rotate(im, angle*180/pi, reshape=False)

  imshow(im)
  p1 = asarray([x1,y1])
  p2 = asarray([x2,y2])    

  # Rotating the points 
  # [512,680] is the center of the image
  p1n = (p1-[512,680]).dot(rotMat(angle)) + [512,680]

  p2n = (p2-[512,680]).dot(rotMat(angle)) + [512,680]

  print p1n, p2n

  plot(p1n[0],p1n[1],'d')
  plot(p2n[0],p2n[1],'d')

  savefig(outputFile)
  clf() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T22:33:43.610

我不明白你在做什么 100%。但是，您是否考虑过图像中的 y 轴从顶部的 0 到较低点的正值。因此，与通常的数学定义相比，方向是相反的。您`rotMat`以通常的方式定义，但您必须将其用于在相反方向运行的图像定义中更改的 y 轴。

# java - 使用带有帧缓冲区的 Swing

> ID：13896335
> 
> 赞同：1
> 
> 时间：2012-12-15T21:24:09.620
> 
> 标签：java, swing, user-interface, headless

> **可能重复：**
> [为自定义驱动程序创建 GraphicsDevice](https://stackoverflow.com/questions/13895614/create-graphicsdevice-for-custom-driver)

我正在为我的 Kobo Touch 编写 Swing 应用程序。不幸的是，Kobo 上的 Java 无法识别默认屏幕`/dev/fb0`，而是告诉我我处于无头环境中。这意味着我不能使用`java.awt.Window`或其后代。我也问了一个相关但不同的问题：[Create GraphicsDevice for custom driver](https://stackoverflow.com/questions/13895614/create-graphicsdevice-for-custom-driver)。

我应该提到我正在使用 Java，因为我无法设置我的笔记本电脑进行交叉编译，所以很遗憾我无法编写自己的 C++ 驱动程序。

谁能告诉我如何通知 Swing 屏幕可用`/dev/fb0`？

# arm - 由 ARM Cortex-A9 制成的 SoC 的典型 L1 和 L2 访问延迟

> ID：13896336
> 
> 赞同：5
> 
> 时间：2012-12-15T21:24:11.427
> 
> 标签：arm, cpu-cache, tegra, omap

我正在寻找由 ARM Cortex-A9 处理器（例如具有多个 ARM A9 处理器的 Nvidia Tegra 2 和 Tegra 3）制成的 SoC 的 L1 访问延迟和 L2 访问延迟。

我可以找到有关这些架构的 L1 和 L2 大小的一些信息，但我找不到有关 L1 和 L2 访问延迟的太多信息。我发现的唯一可靠信息是“在 Tegra 3 上，L2 缓存延迟比 2 快 2 个周期，而 L1 缓存延迟没有改变。”

[这里](http://forum.canardpc.com/showpost.php?p=3295102&postcount=491)提到 Tegra 2 上的 L2 有 25 个周期的延迟，[这里](http://www.sisoftware.net/?d=qa&f=xolo)提到 L1 有 4 个周期的延迟，L2 有 31 到 55 个周期的延迟。这些参考资料都不是完全可靠的。我希望在 Nvidia、TI 和 Qualcomm 网站和技术文档上找到更多信息，但没有成功。

编辑：OMAP4460 和 OMAP4470 等类似 SoC 的信息也会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-23T11:16:37.407

对于权威答案，您可以尝试在您选择的目标上运行[**`lmbench`**](http://sourceforge.net/projects/lmbench/)（[HowTo](http://processors.wiki.ti.com/index.php/Lmbench)？）。

**[此处](http://processors.wiki.ti.com/index.php/LMBench_on_ARM_Microprocessors#Memory_Latency)****提供了AM37x**（TI OMAP3 系列的变体）的一组结果以供参考。

另请查看[此演示文稿，该演示文稿](http://www.ruhr-uni-bochum.de/integriertesysteme/emuco/files/System_Level_Benchmarking_Analysis_of_the_Cortex_A9_MPCore.pdf)描述了 ARM Cortex A9 MP 系统上各种缓存配置的延迟和带宽。

# actionscript-3 - 使用 HTTPService 接收二进制数据而不是 XML？

> ID：13896339
> 
> 赞同：2
> 
> 时间：2012-12-15T21:24:20.990
> 
> 标签：actionscript-3, apache-flex, flex4.5

*   将 HTTPService 与 Flex 应用程序一起使用时，有没有办法接收二进制数据而不是 XML？ *（ASP .NET 4 后端/Flex 4.8 框架）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T06:35:09.153

到目前为止，我知道的唯一解决方案如下所示：http: [//anirudhsasikumar.net/blog/2008.06.20.html](http://anirudhsasikumar.net/blog/2008.06.20.html)

# jquery - Fancybox 2 无法加载谷歌地图？

> ID：13896340
> 
> 赞同：0
> 
> 时间：2012-12-15T21:24:23.120
> 
> 标签：jquery, html, css, fancybox

我已经能够让 Fancybox 2 加载图像而没有任何问题。下面的代码让我可以点击图片`barcode.gif`(

```
<?php require_once('common/inc/default.php'); ?>
<!DOCTYPE html>
<head>
    <link rel="stylesheet" type="text/css" href="common/css/default.css" />
    <link rel="stylesheet" type="text/css" href="common/css/typography.css" />
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans|Lobster' rel='stylesheet' type='text/css'>
    <!-- Add jQuery library -->
    <script type="text/javascript" src="common/js/lib/jquery-1.8.2.min.js"></script>

    <!-- Add fancyBox main JS and CSS files -->
    <script type="text/javascript" src="common/js/source/jquery.fancybox.js?v=2.1.3"></script>
    <link rel="stylesheet" type="text/css" href="common/js/source/jquery.fancybox.css?v=2.1.2" media="screen" />

    <link rel="stylesheet" type="text/css" href="common/js/source/helpers/jquery.fancybox-buttons.css?v=1.0.5" />
    <script type="text/javascript" src="common/js/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            $("a#single_image").fancybox();
        })
    </script>

</head>
<body>
    <div id="wrapper">
        <header>
            <div class="mast">Mighty Wash</div>
            <div class="navigation">
                <?=build_navigation();?>
            </div>
        </header>
        <section id="main">
            <a id="single_image" href="/common/img/barcode.gif"><img src="common/img/barcode.gif" /></a>
        </section>
        <footer>
        </footer>
    </div>
</body>
</html> 
```

但是，当我尝试将谷歌地图嵌入 iframe 时，我什么也得不到。它只是导航到一个巨大的谷歌地图：

```
<?php require_once('common/inc/default.php'); ?>
    <!DOCTYPE html>
    <head>
    <link rel="stylesheet" type="text/css" href="common/css/default.css" />
    <link rel="stylesheet" type="text/css" href="common/css/typography.css" />
    <link href='http://fonts.googleapis.com/css?family=Droid+Sans|Lobster' rel='stylesheet' type='text/css'>
    <!-- Add jQuery library -->
    <script type="text/javascript" src="common/js/lib/jquery-1.8.2.min.js"></script>

    <!-- Add fancyBox main JS and CSS files -->
    <script type="text/javascript" src="common/js/source/jquery.fancybox.js?v=2.1.3"></script>
    <link rel="stylesheet" type="text/css" href="common/js/source/jquery.fancybox.css?v=2.1.2" media="screen" />

    <link rel="stylesheet" type="text/css" href="common/js/source/helpers/jquery.fancybox-buttons.css?v=1.0.5" />
    <script type="text/javascript" src="common/js/source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>

    <script type="text/javascript">
        $(document).ready(function() {
            $("a.iframe").fancybox();
        })
    </script>

</head>
<body>
    <div id="wrapper">
        <header>
            <div class="mast">Mighty Wash</div>
            <div class="navigation">
                <?=build_navigation();?>
            </div>
        </header>
        <section id="main">
            <a class="iframe" href="http://maps.google.com/?output=embed&f=q&source=s_q&hl=en&geocode=&q=London+Eye,+County+Hall,+Westminster+Bridge+Road,+London,+United+Kingdom&hl=lv&ll=51.504155,-0.117749&spn=0.00571,0.016512&sll=56.879635,24.603189&sspn=10.280244,33.815918&vpsrc=6&hq=London+Eye&radius=15000&t=h&z=17">Google maps (iframe)</a>
        </section>
        <footer>
        </footer>
    </div>
</body>
</html> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:08:29.827

**我在这里**整理了一个简单的例子

 **唯一真正的区别是在你的eg上使用“ *fancybox* ”和“ *fancybox.iframe ”类*`<a>`

```
<a class="fancybox fancybox.iframe" href="https://maps.google.com/?output=embed&f=q&source=s_q&geocode=&q=London+Eye,+County+Hall,+Westminster+Bridge+Road,+London,+United+Kingdom&hl=lv&ll=51.504155,-0.117749&spn=0.00571,0.016512&sll=56.879635,24.603189&sspn=10.280244,33.815918&vpsrc=6&hq=London+Eye&radius=15000&t=h&z=17">Google Map</a> 
```

然后将您的 fancybox 调用调整为：`$(".fancybox").fancybox();`相应地。

只是在那个 JSFiddle 中玩，如果我删除*“fancybox.iframe* ”类，我会遇到同样的问题。我没有深入研究 Fancybox 代码，但我的第一个假设是它绑定到该特定类，并阻止默认操作。**

# c# - 如何判断一个对象是否引用了另一个对象？

> ID：13896346
> 
> 赞同：0
> 
> 时间：2012-12-15T21:24:52.470
> 
> 标签：c#, .net, clone, reference-type

我无法从模板字典创建类实例的副本。似乎`MemberwiseClone()`留下了一些引用字典模板字段的字段。我希望能够以一种方便的方式查看是否如此，就像 Visual Studio 的 DataTips 提供的那样。

有没有办法找出引用类型对象（或其字段）的实例是否正在引用相同类型的另一个实例（在成员克隆之后）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:32:23.233

规则是任何值类型都将被复制，任何引用类型只会复制引用。这是一个浅拷贝。

如果这不是您想要的行为，那么您需要推出自己的克隆方法。

您可能正在谈论深拷贝，在这种情况下，这将告诉您需要了解的内容：[如何在 .NET（特别是 C#）中对对象进行深拷贝？](https://stackoverflow.com/questions/129389/how-do-you-do-a-deep-copy-an-object-in-net-c-specifically)

至于计算对实例的引用数，Eric Lippert 说 C# 不做引用计数[C# - 获取对对象的引用数，](https://stackoverflow.com/questions/1686416/c-sharp-get-number-of-references-to-object)所以你必须再次自己动手。但我不认为这是你想要做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:43:43.390

您可以使用内存分析器手动检查引用。请参阅[.NET 内存分析工具](https://stackoverflow.com/questions/399847/net-memory-profiling-tools)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T22:27:08.197

Java 的一个“特性”是实际上只有一种非原始类型：对象引用，它可以以各种方式使用。虽然这使框架易于实现，但这意味着变量的类型不足以描述其含义。尽管 .net 在许多方面都对 Java 进行了改进，但它也存在着这个根本性的弱点。

例如，假设一个对象`George`有一个`Bob`类型为`IList<String>`[or, for Java, `list<string>`] 的字段。这样一个字段至少可以代表五种根本不同的事物：

1.  它持有对一个对象的引用，该对象持有一组字符串，它永远不会允许对其进行任何更改。如果该列表的第 5 项是“Barney”，那么该列表中的第 5 项将永远不会是“Barney”以外的任何其他内容。在这种情况下，`Bob` 只封装了列表的不可变方面。此外，可以免费将引用共享给对 George 状态的该方面感兴趣的任何代码。
2.  它持有对持有一组字符串的对象的引用，任何持有该引用的人都可以修改该字符串，但任何拥有该对象引用的实体都不会修改列表，也不允许它暴露给任何可能这样做的东西。更糟糕的是，虽然列表允许更改其内容，但实际上没有任何内容会改变这些内容。如上所述，`Bob` 仅封装了列表的不可变方面，但`George` 负责通过仅将引用公开给可以信任不修改列表的代码来维护这种不变性。
3.  它拥有宇宙中任何地方的唯一引用，指向一个对象，该对象持有一组它可以随意修改的字符串。在这种情况下，`Bob` 封装了列表的*可变状态*。如果复制“George”，则必须创建一个新列表，其中包含与旧项目相同的项目，并为该副本提供参考。另请注意，`George` 不能将引用传递给任何可能保留引用的代码，无论该代码是否会尝试修改列表。
4.  它持有对某个其他对象“拥有”的列表的引用，该列表将用于将项目添加到列表中以使其他对象受益，或者观察其他对象为“George”放入列表中的内容的好处。在这种情况下，`Bob` 封装了列表的 *identity*。在正确的克隆中，`Bob` 必须识别 *same list* 与原始列表中的一样。
5.  它持有对它拥有的列表的引用，该列表将被变异，但其他一些对象也持有对列表的引用（也许他们可以为了“George”的利益将东西添加到列表中，或者也许他们可以看看 `George` 对列表所做的事情）。在这种情况下，`Bob` 封装了*可变状态和身份*。封装这两个方面的字段的存在意味着*如果没有其他对象的合作，就不可能制作语义正确的“George”副本*。

简而言之，可以`Bob`封装列表的可变状态、它的身份、两者或两者都不封装（除了身份之外的不可变状态是“免费赠品”）。如果它仅封装可变状态，则语义正确的副本`George`必须`Bob`引用不同的列表，该列表使用相同的内容进行初始化。如果它仅封装身份，则语义正确的副本必须`Bob`引用相同的列表。如果它同时封装了可变状态和不可变状态，`George`则无法单独正确克隆。两者都不做的字段可以被复制也可以不被复制，以方便起见。

如果可以正确确定哪些字段封装了引用对象的可变状态，哪些封装了身份，哪些两者兼而有之，那么语义上正确的克隆操作应该做什么就很明显了。不幸的是，框架中没有以这种方式对字段进行分类的标准约定，因此您必须提出自己的方法，然后再提出使用它的克隆方案。

# python - Django选择多对多字段而不会引发错误

> ID：13896347
> 
> 赞同：1
> 
> 时间：2012-12-15T21:24:54.997
> 
> 标签：python, django

我是 Django 的新手。我有一个`Author`对象 ( `author`) 和一个条目 ID ( `entry_id`)，我想知道是否`author`是`Entry`.

这是`Entry`：

```
class Entry(models.Model):
    blog = models.ForeignKey(Blog)
    authors = models.ManyToManyField(Author) 
```

如果我做

```
foo = Entry.objects.get(pk=entry_id, authors = author) 
```

当作者不是条目的作者时，我会收到错误消息。

更简单的方法是什么？最终，我只想对作者是否是该条目的作者的问题给出是/否的答案。当答案是否定的时，我想要一个有效的对象而不是错误。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:30:14.910

根据您的问题规格：

1.  > **最终，我只想对作者是否是该条目的作者的问题给出是/否的答案。**

    使用[存在（）](https://docs.djangoproject.com/en/dev/ref/models/querysets/#exists)

    从文档：

    > 如果 QuerySet 包含任何结果，则返回 True，否则返回 False。这试图以最简单和最快的方式执行查询，但它确实执行与普通 QuerySet 查询几乎相同的查询。

    它不会引发任何错误，它只会返回`True`或者您可以在语句`False`中使用它。`if`您可以尝试以下方法：

    ```
    if Entry.objects.filter(pk=entry_id, authors=author).exists():
        # Magic here 
    ```

    请注意，我使用`filter()`而不是`get()`因为`exists()`是一个`QuerySet`方法（`get()`返回一个对象而不是一个`QuerySet`）

2.  > **当答案是否定的时，我想要一个有效的对象而不是错误。**

    使用@nabucosound 方法可能是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:54:54.980

你说你想要一个“有效的对象”，所以我假设你需要这个对象来执行某些操作。因此，缺少对象应该会执行其他操作，对吗？在这种情况下，使用 Django ORM 完成的最常见验证是 try/except：

```
try:
    foo = Entry.objects.get(pk=entry_id, authors=author)
except Entry.DoesNotExist:
    # Do something when object does not exist
    pass
else:
    # Do something with your foo object 
```

没有错，事实上，Python 鼓励这种风格：

[http://en.wikipedia.org/wiki/Duck_typing#In_Python](http://en.wikipedia.org/wiki/Duck_typing#In_Python)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T21:28:27.393

也许像

```
entry = Entry.objects.get(pk=entry_id)
author in entry.authors.all()  # True or False 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T21:28:46.600

```
count = Entry.objects.filter(pk=entry_id, authors = author).count()

if count > 0:
  #The author is an author 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T21:29:21.210

您可以简单地检查 Entry 对象的作者...试试这个

```
entry = Entry.objects.get(id=entry_id)
is_author = True

try:
   entry.authors.get(id=author.id)
except:
  is_author=False 
```

# javascript - 在ajax之后执行javascript

> ID：13896350
> 
> 赞同：0
> 
> 时间：2012-12-15T21:25:02.470
> 
> 标签：javascript, ajax

我有一个 ajax 问题，页面加载后 Javascript 不呈现。我有这个代码：

```
<script>
    function loadXMLDoc() {
        var xmlhttp;
        if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp = new XMLHttpRequest();
        } else { // code for IE6, IE5
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange = function () {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                document.getElementById("fb-root").innerHTML = xmlhttp.responseText;
            }
        }
        xmlhttp.open("GET", "like.php", true);
        xmlhttp.send();

    }
</script>
</head>
<body>
    <div id="fb-root"></div>
    <script>
        window.fbAsyncInit = function () {

            FB.init({
                appId: 'XX',
                status: true,
                cookie: true,
                xfbml: true
            });

            FB.getLoginStatus(function (o) {
                if (!o && o.status) return;
                if (o.status == 'connected') {
                    // USER IS LOGGED IN AND HAS AUTHORIZED APP
                    window.onload = loadXMLDoc();
                } else if (o.status == 'not_authorized') {

                    window.onload = loadXMLDoc();
                } else {
                    // USER NOT CURRENTLY LOGGED IN TO FACEBOOK
                    document.write("connect3")

                }
            });

        };

        (function () {
            var e = document.createElement('script');
            e.async = true;
            e.src = document.location.protocol +
                '//connect.facebook.net/en_US/all.js';
            document.getElementById('fb-root').appendChild(e);
        }());
    </script> 
```

like.php 文件包含

```
<?php echo  <script src='/facebook/src/like.js'></script>; ?> 
```

当用户登录 facebook 时，ajax 加载但脚本不执行。正文部分的脚本经过检查并且运行良好。问题出在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:38:03.243

[可以用 innerHTML 插入脚本吗？](https://stackoverflow.com/questions/1197575/can-scripts-be-inserted-with-innerhtml)

上面的链接解决了这个问题。要加载脚本标签内容，您可能希望简单地使用 dom 操作而不是使用 innerHTML 注入新的脚本标签。在您发布的脚本的异步 fb 部分中为您提供了一个示例。

```
var e = document.createElement('script');
e.async = true;
e.src = '/facebook/src/like.js';
document.getElementById('fb-root').appendChild(e); 
```

假设 php 代码不执行任何其他操作，这具有相同的效果。另外值得指出的是，您当前的实现将从`all.js`dom 中删除文件（因为您设置了 innerHTML）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:46:34.583

like.php 中的 echo 不包含引号。应该

```
<?php echo "<script src='/facebook/src/like.js'></script>"; ?> 
```

也不触发 FB.getLoginStatus

提示：如果您使用 Firefox（或其他调试工具，如果是其他浏览器），请使用 firebug 并使用 console.log()

可能的解决方案：将函数 loadXMLDoc 的内容替换为

```
jQuery('#fb-root').load('like.php'); 
```

# c++ - 什么是可以与 C++ 混合的好的函数式语言？

> ID：13896354
> 
> 赞同：1
> 
> 时间：2012-12-15T21:25:20.307
> 
> 标签：c++, functional-programming

我想走函数式语言的路，刚开始我只用过OO语言和多范式语言；在过去的一段时间里，我专注于 C++，据我了解，当您需要保持一致的状态时，函数式语言会大放异彩，并且它们通常被银行服务等一些关键任务服务使用。

我不想离开 C++，我想尝试混合，我也只对 x86、ARM 和 Linux、Windows 和 BSD/Mac 之间的跨平台解决方案感兴趣，所以我想 F# 已经出局了（也是似乎只是我读过的 Ocaml 的 Microsoft 版本）。

您能否推荐一种适合这种混合使用的语言，并说明函数式语言在何时何地可以提供最多的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:08:05.140

如果您对类似于 C++（也具有良好的 C/C++ 互操作性）但具有来自函数式语言的强大构造的语言感兴趣，您可能会喜欢[Rust](http://rust-lang.org)。一位 Rust 开发人员写了一份[Rust 和 C++ 目标的比较](http://pcwalton.blogspot.com/2010/12/c-design-goals-in-context-of-rust.html)，您可能会发现这些内容提供了丰富的信息。

对 ARM 的支持[尚不存在](https://github.com/mozilla/rust/issues/1858)，但 Rust 是基于 LLVM 的，而 LLVM 支持 ARM，所以当然可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:55:12.860

使用 C++11 lambda 函数和表达式；)

# tidesdk - TideSDK - 代码混淆

> ID：13896357
> 
> 赞同：4
> 
> 时间：2012-12-15T21:25:36.240
> 
> 标签：tidesdk

是否有一些用于混淆我的代码的指南，尤其是 TideSDK 中的 php，有哪些可能的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T00:59:38.450

当我们为所有应用程序资源开发更持久的解决方案时，Google 闭包可通过为潮汐builder.py CLI 实用程序提供一个选项来进行 JavaScript 混淆。

# google-chrome - chrome.extension.sendMessage() 中的 Chrome 扩展内存泄漏？

> ID：13896358
> 
> 赞同：8
> 
> 时间：2012-12-15T21:25:37.010
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

我在使用 Chrome 的 chrome.extension.sendMessage() 的长期页面中看到相当*大的内存泄漏*

在将 ~200k 事件从 Content-Script 发送到 Background-Page 作为测试后，chrome.Event 的保留大小是 ~50MB 堆快照中保留内存的 ~80%

我一直在试图追查我可能犯的任何错误，关闭一些变量并防止它被 GC'd，但这似乎与 Chrome 事件系统的实现有关

有没有人遇到过这样的事情，或者看到内存泄漏与内容脚本的非常长寿命的扩展，与 bg 页面喋喋不休？

我的内容脚本端的代码：

```
 csToBg = function(message) {
    var csToBgResponseHandler = function(response) {
      console.log("Got a response from bg");
      };

    var result = chrome.extension.sendMessage(null, message, csToBgResponseHandler)
  }; 
```

在背景页面方面，一个简单的 ACK 函数（迷信地避免[https://code.google.com/p/chromium/issues/detail?id=114738](https://code.google.com/p/chromium/issues/detail?id=114738)）：

```
var handleIncomingCSMessage = function(message, sender, sendResponse) {
  var response = message;
  response.acked = "ACK";

  window.console.log("Got a message, ACKing to CS")

  sendResponse(response);
} 
```

以这种方式在 Chrome 23.0.1271.97 中发送约 20 万条消息后，堆快照如下所示：![堆快照](../Images/d269615d53ca74530cecf7cfab000f59.png)

内存似乎永远不会在页面的生命周期内被回收，我对如何修复它感到困惑。

编辑：这是一个标准的背景页面，而**不是**一个事件页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-17T12:16:47.327

这可能已在 chrome 32 中修复。

### 最后！

有关详细信息，请参阅[http://code.google.com/p/chromium/issues/detail?id=311665](http://code.google.com/p/chromium/issues/detail?id=311665)

# java - 如何处理实体中的计算字段

> ID：13896359
> 
> 赞同：0
> 
> 时间：2012-12-15T21:25:38.040
> 
> 标签：java, spring, hibernate

我有一个关于在我的实体中处理计算字段（即计数）的最佳方法的问题。我有一个包含评论的建立实体，我不想加载评论，直到我必须加载，但我确实想在加载实体对象时获取评论的数量（计数）。处理这个问题的最佳方法是什么？我已经尝试创建一个 numReviews 字段并对其进行注释@Transient，但是当我调用 getReviews().size() 时会话被关闭时遇到了一些问题。我想知道这是否是正确的方法，或者是否有更好的模式可以遵循？

```
@Entity
@Table(name="ESTABLISHMENT")
public class Establishment {
...
private Set<Review> reviews = new HashSet<Review>();
...
//Make this extra lazy so we can do a count without loading all the things
    @OneToMany(fetch = FetchType.LAZY, mappedBy = "establishment")
    @LazyCollection(LazyCollectionOption.EXTRA)
    public Set<Review> getReviews() {
        return reviews;
    }
    public void setReviews(Set<Review> reviews) {
        this.reviews = reviews;
    }

    @Transient
    public int getNumReviews(){
        if(this.numReviews == null){
            numReviews = this.getReviews().size();
        }
        return numReviews;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:06:56.400

`Correct`可能是可以接受的。我的第一个想法是将所有休眠操作移动到 DAO 层并确保在检索对象时加载数据，但它可能很重

或者，我会使用`FetchType.EAGER`.

如果还是不适合你，就用HQL来做吧（抱歉有错误，我比较习惯JPQL）

```
SELECT est, COUNT(rev) FROM Establishment est inner join est.reviews rev .... 
```

并且在检索值集时，每个对象都会检索其总数。

# c# - 对于窗体尺寸强制为 <= windows 窗体应用程序的屏幕尺寸限制是否有解决方法？

> ID：13896361
> 
> 赞同：0
> 
> 时间：2012-12-15T21:25:51.593
> 
> 标签：c#, visual-studio

我曾经写过一个可以显示照片的应用程序。我正在尝试使用 C# 在 Visual Studio 中重新编写它并为其提供新功能。我现在正在编写的应用程序确实使用滚动条来方便查看过大的图像。以前的应用程序会用图像填充表单区域，您可以拖动并按住鼠标在屏幕上移动它。如果图像比屏幕大，您只需移动它即可查看以前隐藏的区域。通过使表单与图像大小相同，这是处理查看大于屏幕尺寸的图像的“问题”的一种非常优雅的方式。

与将图像放入带有滚动条的静态可调整大小的表单相比，这样做的优点是图像将填充可用的屏幕空间，并且如果序列中的下一个图像（它是一个允许您循环浏览图像的浏览器) 很小，图像应用程序只会占用与图像一样多的空间。您可以轻松地将其移到一侧。您不必手动调整显示它的表单的大小来为其他应用程序腾出空间。

我无法在新应用程序中实现相同的功能，因为 Visual Studio 不允许我动态地重新调整表单的大小，使其比屏幕更高或更宽。

有谁知道一个插件或解决方法来覆盖这个限制？

我愿意接受实现相同目标的建议，但我仍然想知道是否可以关闭此限制，也许可以通过插件或以某种方式在代码中关闭。下面是该应用程序以前版本的视频的链接，展示了我希望通过将表单大小设置为大于屏幕尺寸来实现的行为......

**编辑：**前一个应用程序的演示 - 以及我想要实现的行为......

[http://youtu.be/J16EwuozvbQ](http://youtu.be/J16EwuozvbQ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:36:59.923

简单地说，您可以`Form`使用`PictureBox`.

![在此处输入图像描述](../Images/855c41429c5dc7a6e90b6c5039da4de6.png)

然后`AutoScroll`将 Form（或 的容器`PictureBox`，如果适用）的属性更改为`true`.

然后将 的`SizeMode`属性更改`PictureBox`为`AutoSize`。

你应该得到这样的结果：

![在此处输入图像描述](../Images/60f82e382bba549520506cb2b871805e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:30:59.487

我认为拥有比屏幕大的表单不是您应该搜索的。您可以在表单上使用图像的位置（上/左）坐标。您可以使用带有负值的坐标，因此您会给最终用户留下这样的印象，即他浏览了屏幕尺寸之外的图像边界。

# foursquare - 用户和场地 ID 的最大大小

> ID：13896364
> 
> 赞同：1
> 
> 时间：2012-12-15T21:27:06.020
> 
> 标签：foursquare

作为一个附带项目，我正在创建一个连接的应用程序，并且想知道用户和场地 ID 的最大大小是多少？我应该对用户 ID 执行“BIGINT UNSIGNED NOT NULL”，对场地 ID 执行“VARBINARY(255)”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:34:08.557

是的，这两个都有效。用户 ID 为 64 位长，VARBINARY(255) 足以用于场所 ID。

# jquery - Flot 不尊重 12 小时时间格式

> ID：13896367
> 
> 赞同：1
> 
> 时间：2012-12-15T21:27:12.900
> 
> 标签：jquery, data-visualization, flot, graphing

我正在使用 Flot 进行绘图，但我无法让它报告 12 小时时间，而不是 24 小时时间。

我正在使用此代码（否则效果很好）

```
$(function () {
    $.plot($("#placeholder"),
[ { data: 0 } ],
{ xaxes: [ { mode: 'time', 
             twelveHourClock: true,
             timeformat: "%H:%M%p"} ],
  yaxes: [  ] })
}); 
```

知道为什么它不尊重 %p，它应该强制 12 小时和 12 小时时钟设置为真......

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T22:09:54.837

您需要使用 %I（12 小时格式）而不是 %H（24 小时格式）。如果您这样做，则也无需将“twelveHourClock”设置为 true。此外， %p 仅用于添加“am/pm”。

从[文档](https://github.com/flot/flot/blob/master/API.md)：

如果将“twelveHourClock”设置为 true，则自动生成的时间戳将使用 12 小时 AM/PM 时间戳，而不是 24 小时。这仅适用于您尚未设置“时间格式”的情况。如果您想用 12 小时时间构建自己的格式字符串，请使用“%I”和“%p”或“%P”选项。

# haskell - 为什么欠约束类型有时会产生运行时错误？

> ID：13896369
> 
> 赞同：1
> 
> 时间：2012-12-15T21:27:40.693
> 
> 标签：haskell

考虑以下：

```
do putStr ""
   return $ map read ["2"] 
```

在 GHCI 中运行，这给出了

```
[*** Exception: Prelude.read: no parse 
```

我预计会出现“模棱两可的类型变量”编译错误，但这会在运行时出现。为什么？

为了比较，以下三个示例确实给出了“模糊类型变量”错误：

```
map read ["2"]

do putStr ""
   return $ read "2"

do [1]
   return $ map read ["2"] 
```

* * *

顺便说一句，这是我遇到的原始代码。

```
readInts :: String -> IO [Integer]
readInts f = do s <- readFile f
                return $ map read $ splitOneOf " \n" s 
```

* * *

这已解决。我的原始代码试图从列表末尾的“”中读取。当我在 GHCI 进行调查时，出于不同的原因，我收到了同样的异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T21:53:56.623

这是因为 GHCi 的[扩展默认规则](http://www.haskell.org/ghc/docs/latest/html/users_guide/interactive-evaluation.html#extended-default-rules)。如果您将相同的代码放入没有签名的文件中，您应该会看到预期的错误。

（在这种情况下，它可能`()`被选为类型，这就是您收到解析错误的原因。）

# statistics - 获取一堆数据并猜测其统计分布的工具？

> ID：13896371
> 
> 赞同：1
> 
> 时间：2012-12-15T21:27:45.857
> 
> 标签：statistics, curve-fitting, goodness-of-fit

如果我有大量数据样本（大约 10000 个数字的向量），是否有一些工具可以查看数据并尝试将一些常见的统计分布拟合到数据并报告每个数据的拟合程度是？如果我必须自己指定可能的分布列表，那没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:42:18.223

如果您正在寻找统计工具... R 可能是首选 - 看看：www.r-project.org 将
RStudio 作为 IDE 安装包 Deducer 并开始您的分析。啊，顺便说一句，这都是开源/免费软件...

问候，沃尔特

# python - 如何从“域名”和“对象名”创建 UUID？

> ID：13896381
> 
> 赞同：0
> 
> 时间：2012-12-15T21:28:53.773
> 
> 标签：python, python-2.7, uuid

我必须误解 Python 的**uuid**模块或[生成 UUID 的 RFC](http://www.ietf.org/rfc/rfc4122.txt)

如何*同时*使用**域名**和**对象名**生成 UUID3 字符串？

我[看到](http://www.minvolai.com/blog/2009/10/creating-universally-unique-id-in-python/)“版本 3 UUID 是从限定名称空间生成的，例如 URL 或域名以及对象 ID 或名称。”

但是，在 python.org 上说用法是[uuid.uuid3(namespace, name)](http://docs.python.org/2/library/uuid.html)。由于这里的“命名空间”应该指定“名称”的类型，我应该如何指定“域名”和“对象名”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:35:47.630

从RFC 的[第 4.3 节：](https://www.rfc-editor.org/rfc/rfc4122.html#section-4.3)

> 第 3 版或第 5 版 UUID 用于从“名称”生成 UUID，这些“名称”来自某个“名称空间”，并且在其中是唯一的。名称和名称空间的概念应作广义解释，而不限于文本名称。例如，某些名称空间是域名系统、URL、ISO 对象 ID (OID)、X.500 专有名称 (DN) 和编程语言中的保留字。

所以 UUID3 需要一个命名空间标识符（一个 UUID）和一个名称。不是域名和对象名。如果您使用域名作为名称，请使用[`uuid.NAMESPACE_DNS`UUID](http://docs.python.org/2/library/uuid.html#uuid.NAMESPACE_DNS)。

# php - 为什么两个相同编码的单词在 htmlentities 中看起来不同？

> ID：13896382
> 
> 赞同：4
> 
> 时间：2012-12-15T21:29:09.287
> 
> 标签：php, encoding, utf-8

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T22:27:29.927

Your first question was: How can it be that two identical words with the same encoding (UTF-8) are nevertheless different?

In this case, the encoding isn't really UTF-8 in both cases. The first variable is in "real" UTF-8, while in the second, greek characters are not really in UTF-8, but in ASCII, with non-ASCII characters (greek) encoded using something called a CER (Character Entity Reference).

A web browser and some too friendly "WYSIWYG" editors will render these strings as identical, but the binary representations of the actual strings (which is what the computer will compare) are different. This is why the equal test fails, even if the strings *appear* to be the same upon human visual ispection in a browser or editor.

I don't think you can rely on `mb_detect_encoding` to detect encoding in such cases, since there is no way of telling utf-8 apart from ASCII using CER to represent non-ASCII.

Your second question was: How could I fix this problem?

Before you can compare strings that may be encoded differently, you need to convert them to canonical form ( [Wikipedia: Canonicalization](http://en.wikipedia.org/wiki/Canonicalization) ) so that their binary representation is identical.

Here is how I've solved it: I've implemented a handy function named `utf8_normalize` that converts just about any common character representation (in my case: CER, NER, iso-8859-1 and CP-1252) to *canonical* utf-8 before comparing strings. What you throw in there must to some extent be determined by what are "popular" character representations in the type of environment your software will operate, but if you just make sure that your strings are on canonical form before comparing, it will work.

As noted in the comment below from the OP (*phpheini*), there also exists the [PHP Normalizer class](http://php.net/manual/en/class.normalizer.php), which may do a better job of normalization that a home-grown function.

# opengl - 计算opengl中glPerspective的近远值

> ID：13896385
> 
> 赞同：0
> 
> 时间：2012-12-15T21:29:23.047
> 
> 标签：opengl, distance

我需要在 opengl 代码中传递 glPerspective 中的近值和远值。通过与顶点着色器中的 ModelViewMatrix 相乘，我得到了眼睛空间中的所有顶点。我的问题是，我需要从中找到最小值和最大值，以便可以将该值传递给 glPerspective。我该怎么做？我是否需要在顶点着色器或客户空间（C 代码）中计算它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:43:09.330

near 和 far 通常不计算，而只是设置为合理的值。'near' 应该足够近，以至于附近的物体不会被剪裁，但不能太近以至于所有 z 缓冲区精度都消失了。'far' 只需要足够远，就可以渲染任何你想要渲染的东西。

在任何情况下，顶点着色器都不是计算它们的最佳位置，因为矩阵会被传递到着色器，所以在你走得那么远之前你需要知道这些值。

（对于需要高精度的阴影等动态计算近/远可能是可行/有用的 - 在这种情况下，它基于要渲染的对象的边界体积或其他一些类似的近似值）。

# css - 如何使没有宽度的div居中？

> ID：13896390
> 
> 赞同：6
> 
> 时间：2012-12-15T21:30:29.133
> 
> 标签：css, html, center

您好，我想知道是否可以在没有宽度的情况下将 div 居中。由于容器的两个不同版本取决于具有不同宽度的语言设置，我希望将其动态居中。

```
margin: 0 auto; 
```

没有任何宽度设置就无法工作。

所以结构很简单：

```
<div id="container">
        <div id="list">
            <span class="up">text large</span>
            <ul class="navigation">
                <li>one</li>
                <li>|</li>
                <li>two</li>
                <li>|</li>
                <li>three</li>
                <li>|</li>
                <li>four</li>
            </ul>
        </div>
</div> 
```

和CSS：

```
.wrapper #container  {
    width: 960px;
    clear: both;
    margin: 0 auto;
}

.wrapper #container #list {
    width: 420px;-->should be dynamically
    margin: 0 auto; --> only works when setting width
}
.wrapper #container #list .up {
    font-size: 11px;
    float: left;
    display: inline-block;
    text-align: right; 
    display: inline;
}
.wrapper .navigation {
    font-size: 10px;
    margin-top: 15px;
    float: left;
    padding-left: 5px;
}
.wrapper .nav li {
    float: left;
    display: inline-block;
    margin-left: 15px;
    list-style: none;
} 
```

因此，如果有人知道如何处理，我将不胜感激。

多谢。

更新：

感谢您到目前为止回答这个问题。使用：

> 显示：内联块；

在应该居中的容器上效果很好。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-15T21:35:59.013

使用`display: inline-block`. 见[小提琴](http://jsfiddle.net/orig/xrh2T/)

```
.wrapper #container  {
    /* ... */
    text-align: center;
}
.wrapper #container #list {
    display: inline-block;
} 
```

# objective-c - Objective-C：指向 UITextField 的弱指针-> UITextField 不出现

> ID：13896393
> 
> 赞同：1
> 
> 时间：2012-12-15T21:30:41.803
> 
> 标签：objective-c, ios, automatic-ref-counting

正如标题中所写，我有一个`UITextField`. 我将此添加`UITextField`到`UIView`.

如果我有一个强指针，`UITextField`就会出现，

如果我有一个弱指针，`UITextField`则不会出现。

当我有一个弱指针时出了什么问题？我做了同样的`UIButton`事情，然后它实际上出现了（带有强指针和弱指针）。

这是一些代码：

创建类别视图.h

```
@interface CreateCategoryView : UIView 

@property (weak, nonatomic) UITextField *nameTextField;

@end 
```

创建类别视图.m

```
@implementation CreateCategoryView

- (id)initWithFrame:(CGRect)frame andParent {
    self = [super initWithFrame:frame];
    if (self) {
        self.nameTextField = [[UITextField alloc] initWithFrame:CGRectMake(5, 30, 310, 25)];
        self.nameTextField.borderStyle = UITextBorderStyleRoundedRect;
        self.nameTextField.textColor = [UIColor blackColor];
        self.nameTextField.backgroundColor = [UIColor whiteColor];
        [self addSubview:self.nameTextField];
    }
    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T22:23:39.087

您应该使用局部变量（默认为强变量）创建文本字段，然后将其分配给您的属性。没有必要使用对文本字段的强引用，因为您添加它以保持强引用的视图。

```
- (id)initWithFrame:(CGRect)frame  {
    self = [super initWithFrame:frame];
    if (self) {
        UITextField *tf = [[UITextField alloc] initWithFrame:CGRectMake(5, 30, 310, 25)];
        tf.borderStyle = UITextBorderStyleRoundedRect;
        tf.textColor = [UIColor blackColor];
        tf.backgroundColor = [UIColor whiteColor];
        _nameTextField = tf;
        [self addSubview:_nameTextField];
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T22:45:34.840

接受的答案是错误的。

问题是视图在创建后立即被释放。您可以通过执行以下操作看到这一点

```
__weak UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, 10)]; 
```

有了这个，编译器会抱怨

```
warning: assigning retained object to weak variable; object will be released after assignment 
```

您需要做的是有一个临时`strong`变量，正如@rdelmar 指出的那样，默认情况下局部变量是

所以

```
UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, 10)]; 
```

相当于

```
__strong UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 10, 10)]; 
```

这将使视图保持足够长的时间以被视图调用所拥有`addSubview`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-19T07:14:50.077

[Apple 文档](https://developer.apple.com/library/mac/documentation/cocoa/conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html)对此有一个示例

弱变量可能会造成混淆，尤其是在这样的代码中：

`NSObject * __weak someObject = [[NSObject alloc] init];`

在这个例子中，新分配的对象没有对其的强引用，所以它立即被释放并且 someObject 被设置为 nil。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-15T21:43:04.320

该对象不会保留，因为它是一个弱指针，因此您的文本字段在初始化后立即被释放。使用弱属性指向强对象，以便对象保持保留。

# asp.net - 找不到嵌入在程序集中的资源 StAccountsDomainModel.rlinq。Telerik OpenAccess

> ID：13896394
> 
> 赞同：0
> 
> 时间：2012-12-15T21:30:50.150
> 
> 标签：asp.net, azure, tfsbuild, telerik-open-access

我们使用 azure 数据库将应用程序托管在 azure 云服务平台上。我们有 TFS 托管的构建控制器，它构建应用程序并将其部署在 azure 平台上。

应用程序在本地运行良好，但在 azure 上部署时出现以下错误。我谷歌所有可能的方法，但仍然出错。

![在此处输入图像描述](../Images/7656794851f91bd07560b835181469ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:38:55.333

本文[展示](http://www.telerik.com/help/openaccess-orm/external-tools-howto-integrate-enhancer-msbuild.html)了如何在不安装的情况下使用 OpenAccess ORM。

可以在[此处](http://www.telerik.com/help/openaccess-orm/getting-started-root-quickstart-aspnet-deploy.html)找到有关部署 OpenAccess ORM 模型的其他信息。

# wordpress - WordPress RewriteRule - 避免部分匹配

> ID：13896397
> 
> 赞同：1
> 
> 时间：2012-12-15T21:31:29.597
> 
> 标签：wordpress, mod-rewrite

我正在将 ColdFusion 网站转换为 WordPress。这都是静态内容，所以这不是问题。

我正在尝试为搜索引擎设置 301 重定向（目前在测试期间为 302）以重新映射页面。我创建了以下内容，它可以工作 90%。

问题是，如果我对部分匹配另一个页面的文件名进行重定向，那么它会找到并重定向到部分匹配。

例如：

`http://www.example.com/a/b/c/this-doesnt-exist.cfm`正确重定向到：
`http://www.example.com/a/b/c/this-doesnt-exist/`出现 404 错误。没关系。

但：

`http://www.example.com/blah/blah/asdf/r23af/b.cfm`重定向到：
`http://www.example.com/blog/`

基本上，它是剥离`.cfm`文件名并进行部分匹配`b`

我怎样才能避免部分匹配 - 这会产生不可预测的重定向（例如，我们有 50 个目录，它们都有一个`index.cfm`文件，它们应该只转到正确文件夹中的正确页面，而不是一个公共`/index/`文件）

```
# BEGIN Wordpress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]

RewriteCond %{REQUEST_URI} \.(cfm)$
RewriteRule ^(.+)\.cfm$  /$1/ [R=302,NC,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END Wordpress 
```

# php - 奇怪的 Firefox Ajax Post 错误，在 Chrome 上工作正常，Opera 也失败

> ID：13896398
> 
> 赞同：0
> 
> 时间：2012-12-15T21:31:37.833
> 
> 标签：php, javascript, ajax, firefox, post

我将两个变量发布到一个 php 文件中，但我在 firefox 上收到此错误。

时间戳：12/15/2012 06:19:30 PM 错误：NS_ERROR_UNEXPECTED：意外错误源文件：本地主机/算法行：415

该代码适用于 Chrome，但在 Opera 中也失败了

第 415 行是下一个代码的第一行

```
var IDsData = new FormData($('#formulario')[0]);
    IDsData.append("IDsValidar", $('#gene_ids_area').val());
    IDsData.append("Organismo", $('#organism_box :selected').val());

    $.ajax({
        type: "POST",
        url: "check_ids.php",
        data: IDsData,
        cache: false,
        processData: false,
        contentType: false,
        async: false
    }).done(function (data) {
        if (data == "") {
            error = 0;
        } else {
            error = 1;
            error_msg += "The identifiers: " + data + "are not vaid for the organism selected.\n";

        }
    }); 
```

我的 php 文件是，并且内容在这里它解析一个文件，以验证一些 Id

```
<?php

if (isset($_POST["IDsValidar"])) {
    $ids = $_POST["IDsValidar"];
}

if (isset($_POST["Organismo"])) {
    $organismo = $_POST["Organismo"];
}

$auxiliar = explode("\n",$ids);

foreach($auxiliar as $id)
{
$id = trim($id);
$fp = fopen("gene_names/$organismo.csv", 'r');
$paso_test = 0;
while($line = fgets($fp))
{   
        $line=trim($line);
    list($ID,$name)=explode(",",$line);
    if($id == $ID)
    {   
        $paso_test = 1;
    }
    if($id == $name)
    {
        $paso_test = 1;
    }
}   
if($paso_test == 0)
{   
    echo "$id\n";
}   
fclose($fp);    
}

?> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:07:40.623

改变...

```
$('#formulario')[0] 
```

至...

```
$('#formulario').get(0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T15:23:03.780

问题`processData: false`- Firefox 出于某种原因对该选项有问题。

您可以暂时解决它，但设置`processData: true`，或者可能`data: JSON.stringify(data)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T09:19:42.633

您是否尝试过调整所需文件的路径？因为 Google Chrome 会自动查找文件和图像，而 Firefox 和 Opera 则不会。

从 Chrome 可以找到而 Firefox 无法找到的文件夹中加载图像时，我遇到了这个问题。通过从根创建静态路径解决了这个问题。www/文件夹/ajax/ajax.php

# emacs - kill-word / forward-word 应该在换行处停止

> ID：13896402
> 
> 赞同：3
> 
> 时间：2012-12-15T21:32:17.103
> 
> 标签：emacs

我发现 kill-word 和 forward-word 将换行符视为空格并例如杀死直到下一行单词末尾的所有内容，这很烦人。我希望它停在行尾。

我尝试修改语法表以将换行符包含到单词定义中，如下所示：

> （修改语法条目？\n“w”）

这会产生预期的效果，但需要为每个语法表单独指定。

有没有办法在全球范围内实现这种效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:25:27.253

好吧，首先，我强烈建议您习惯在大多数情况下将换行符视为空格的想法。Emacs 通常会始终如一地做到这一点，试图逆势而上可能是一场永无止境的战斗。

其次，我同意 Stefan 的回答，即弄乱语法表或重新定义`forward-word`自己，只会给您带来麻烦和悲伤。

如果您真的想要您所描述的行为`M-d`，`M-f`那么最好定义一组具有这种所需行为的新函数，并且您可以将`M-d`and`M-f`键绑定到这些函数。

实际上，这将是更改任何 emacs 中某些核心功能的默认行为的传统方式。

也许是这样的？（几乎没有测试过）

```
(defun forward-word-stop-eol (arg)
  (interactive "p")
  (let ((start (point)))
    (save-restriction
      (save-excursion
        (move-end-of-line 1)
        (narrow-to-region start (point)))
      (forward-word arg))))

(defun kill-to-end-of-word-or-line (arg)
  (interactive "p")
  (kill-region (point) (progn (forward-word-stop-eol arg) (point))))

(global-set-key "\ef" forward-word-stop-eol)
(global-set-key "\ek" kill-to-end-of-word-or-line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T23:07:37.933

改变`?\n`字符的语法会让你在各种模式下很快陷入困境。相反，您希望更改`forward-word`交互调用时的行为方式（请注意，更改函数的行为`forward-word`也会导致麻烦，因为它经常用于缩进代码之类的事情）。您可能想看看如何`subword-mode`工作，以了解如何做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-09T21:49:23.900

我曾经`with-syntax-table`临时（和全局）修改语法表。

例如，我将它与`syntax-subword`模式一起使用：

```
(defadvice syntax-subword-forward (around testing activate)
  (with-syntax-table (copy-syntax-table (syntax-table))
    (modify-syntax-entry ?\n ">")
    ad-do-it)) 
```

# javascript - jQuery remove() 实际上并未删除 DIV 中的表单字段

> ID：13896403
> 
> 赞同：-2
> 
> 时间：2012-12-15T21:32:21.070
> 
> 标签：javascript, jquery

这让我有点发疯，

我有一个带有一组动态 div 的表单，每个 div 都填充了几个表单字段。用户可以删除这些 div 之一，这样做时我会在容器上调用 jQuerys 删除方法。

我在萤火虫中看到容器被销毁并从 DOM 中删除。但是，当我查看页面的来源时，它仍然存在。

当我发布表单时，应该删除的字段仍在发布！

我想我可以手动将表单字段的名称更改为“hack”，但是我在这里遗漏了什么吗？

这是一个例子

```
<script language="javascript">
$(document).ready( function(){
    $(".remove").live("click", function(){
       $(this).parents(".container").remove();
   });
});
</script>

<form>

<div class="container">
    <input type="text" name="name_1">
    <a href="" class="remove">Remove</a>
</div>

<div class="container">
    <input type="text" name="name_2">
    <a href="" class="remove">Remove</a>
</div>

<input type="submit">

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:34:54.503

改变：

```
$(this).parents(".container").remove(); 
```

至：

```
$(this).closest('form').find(".container").remove(); 
```

看起来这就是你想要做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:36:46.657

这对我有用：http: [//jsfiddle.net/zBd24/](http://jsfiddle.net/zBd24/)

`return false;`在您的事件处理程序中，因此单击带有空 href 的链接不会重新加载当前页面。

**编辑：**来自小提琴的代码：

```
$(document).ready( function(){
    $(".remove").live("click", function(){
       $(this).parents("div.container").eq(0).remove();
        return false;
   });
});​ 
```

# javascript - 视口右侧、底部边缘的 x、y 位置（分别）？

> ID：13896407
> 
> 赞同：4
> 
> 时间：2012-12-15T21:33:04.923
> 
> 标签：javascript, jquery, tooltip

我正在寻找一种无*插件的*方法来获取可见视口右边缘的 x 坐标，同样，使用 jQuery 或“普通”JavaScript 来获取其底部边缘的 y 坐标。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T21:34:27.363

```
var width = document.documentElement.clientWidth || window.innerWidth;
var height= document.documentElement.clientHeight|| window.innerHeight; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T17:31:54.703

我终于选择了这个（基于 jQuery 的）解决方案：

```
var $w = $(window);
var right_edge_x  = $w.scrollLeft() + $w.width();
var bottom_edge_y = $w.scrollTop()  + $w.height(); 
```

我不确定它与提出的其他解决方案有什么不同，更不用说它是否更好，但至少我可以理解它......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T21:37:19.907

我认为您可以使用 window 对象。这将是类似的东西

```
winX = window.screenX + window.outerWidth;

winY = window.screenY + window.outerHeight; 
```

无论如何，我想你明白了。好消息是它是纯香草 JS。

完整的文档可以在这里找到：

[http://www.w3schools.com/jsref/obj_window.asp](http://www.w3schools.com/jsref/obj_window.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-08T06:21:19.017

```
 const { scrollY, innerHeight, scrollX, innerWidth } = window
  const viewport = {
    top: scrollY,
    bottom: scrollY + innerHeight,
    left: scrollX,
    right: scrollX + innerWidth,
  } 
```

# iphone - 找不到 AppDelegate.m

> ID：13896408
> 
> 赞同：0
> 
> 时间：2012-12-15T21:33:10.723
> 
> 标签：iphone, ios, xcode, appdelegate

我的 xcode 项目有一个奇怪的问题。

我将我的 AppDelegate.m 文件重命名为 .mm，认为我应该在那里实现 c++ 方法，然后改变主意，将 C++ 调用移至视图控制器，并将 AppDelegate 重命名为 .m 但是现在当我尝试构建时（它只是构建当它被命名为 .mm 并且在完全更改名称之前很好）它说它找不到 AppDelegate.m 并且不会启动。

我已经验证 AppDelegate.m 在设置的编译源中。如果您需要更多详细信息，请告诉我，我怀疑是否有代码可以发布来帮助你们。

我已经尝试过的一些事情：

*   删除对文件的引用并再次添加
*   清理项目并重建
*   从编译源中删除并重新添加
*   重新启动 xcode 和计算机

全部失败

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:44:52.950

删除派生数据。这通常可以解决链接问题。

# java - 为什么 main() 是唯一执行的方法？

> ID：13896410
> 
> 赞同：-2
> 
> 时间：2012-12-15T21:33:12.747
> 
> 标签：java, testing, methods, jframe, main

每当我运行我的程序时（仅由 main 中的 JFrame 和另一个公共 void 方法组成），它只运行 main 方法。我知道是这种情况，因为当我测试 System.out.println("Test"); 在第二种方法中它不执行但如果我在 main in 中执行相同的代码行将按预期执行

```
package com.route.route;

import javax.swing.JFrame;
import javax.swing.JMenuBar;
public class Window extends JFrame {
private static final long serialVersionUID = 1L;

public void gfsdagfds(){
    System.out.println("Hello");
}

public static void main(String[] args) {
    JFrame frame = new JFrame();
    frame.setVisible(true);
    frame.setSize(800, 600);
    frame.setLocationRelativeTo(null);
    frame.setTitle("route UNREALEASED 0.01");
    frame.setIconImage(null);
    frame.setResizable(false);
    frame.setDefaultCloseOperation(EXIT_ON_CLOSE);

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:35:15.427

看起来您没有调用任何其他方法。main() 只是应用程序的入口点。您需要调用该方法：

```
main(String[] args){
...
gfsdagfds()
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:35:23.827

你永远不会`gfsdagfds()`在`main()`. 方法只会在调用 from 时执行`main()`，因为它是唯一从 JVM 调用的方法。如果你打电话到`gfsdagfds()`里面`main()`你会看到“你好”`System.out`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T21:36:00.903

你没有调用第二种方法，所以它当然没有被执行。

您将无法从`main`（静态）调用第二种方法（非静态）。您可以通过使用 a`Window`作为对象而不是来解决此问题`JFrame`，然后您可以调用`frame.gfsdagfds()`.

# c - 如何在C中返回指针？

> ID：13896412
> 
> 赞同：-1
> 
> 时间：2012-12-15T21:33:41.503
> 
> 标签：c, function, pointers, reference

```
#include<stdio.h>

typedef struct node
{
    int val;
    struct node *link;
}hop;

main()
{
    int c;
    hop *m,*t;
    m=(hop *)malloc(sizeof (hop));
    m->val=10;
    t=change_val(m);
    printf("%d",t->val);
}

hop *change_val(node* m)
{
    m->val=20;
    return m;
} 
```

但是我在功能和分配中遇到了错误。我曾尝试更改 m 之前的标志。我也尝试过使用双指针。帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T21:37:03.947

您需要在使用之前声明您的函数：

```
hop *change_val(hop* m);

int main()
{
..... 
```

，与你命名你的结构一致，不要强制返回，为你动态分配的内存提供`malloc`返回类型。`main``free`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:43:39.077

错误的原因是您`node`在函数定义中的类型不正确。

要么使用：

```
hop *change_val(struct node* m)
{
...
} 
```

或者

```
hop *change_val(hop* m)
{
...
} 
```

# iphone - 在 iphone 上捕捉来电状态

> ID：13896413
> 
> 赞同：0
> 
> 时间：2012-12-15T21:33:51.957
> 
> 标签：iphone, state, phone-call

有一种方法可以在 iPhone 上接听来电并将其发送到任何服务器，我不知道，比如通知或类似的东西？我只需要将该状态通知给我将创建的任何服务器，以收集有关来自此 iPhone 的输入/输出呼叫以及何时结束（如真或假 - 通话中或结束通话）的数据。此应用程序已安装并且已经有通知中心。

哦，在后台没有任何作用，只是跳板（我的意思是当呼叫进来/出去时它没有退出任何应用程序）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:54:57.610

您收到的唯一通知是您的应用程序正在暂停（或进入后台）。

您无法收到有关电话特征的任何其他通知，因为 Apple 会认为这是一种隐私风险，而一些政府对此非常敏感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:38:35.907

查看 Core Telephony 框架参考。这些是我们可以通过公共 API 获得的所有信息：http: [//developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/CoreTelephonyFrameworkReference/_index.html)

# windows-8 - WinRT：如何使数据源视图模型与 UI 保持同步

> ID：13896414
> 
> 赞同：0
> 
> 时间：2012-12-15T21:33:54.260
> 
> 标签：windows-8, windows-runtime, winrt-xaml

在 GridView 的默认项目模板中，我们有一个绑定到 DefaultViewModel 并最终绑定到 GridView 的分组数据源。数据源是 ObservableCollection。

当我对底层数据模型进行更新（添加或删除项目）时，将调用 NotifyCollectionChanged 并更新 UI。但是，有时我需要通过对数据使用不同的“过滤器”重新查询数据库来完全更新模型。这需要将数据源重新绑定到 DefaultViewModel，从而导致 UI 严重闪烁（而且速度很慢）。

有没有更好的方法来“重新绑定”数据而不杀死 UI？异步更新会在这里工作吗？

谢谢。

# php - 重写 JSON 字符串 - 按值将键分组到新数组中？

> ID：13896415
> 
> 赞同：1
> 
> 时间：2012-12-15T21:33:59.417
> 
> 标签：php, arrays, json

好的，我有一个 JSON 字符串：

```
[{
"Name": "Title 1",
"Count1": 556,
"Count2": 5,
"Date": "2012-12-05"
}, {
"Name": "Title 2",
"Count1": 10,
"Count2": 100,
"Date": "2012-12-05"
}, {
"Name": "Title 3",
"Count1": 798,
"Count2": 11,
"Date": "2012-12-04"
}... 
```

然后我在上面运行 json_decode ，得到一个数组，现在我想遍历该数组并计算每个日期的 Count1 和 Count2 的总数......（并且日期可以在任何范围内继续）。最快/最好的方法是什么？

在 foreach 中遍历每个键 => val par 的排序，然后以某种方式将日期键分组到新数组中的新键中并在其中添加总计，以便我在 JSON 提要中将其作为输出最后，在 json_encode 之后，按日期排序：

```
[{
"Date": "2012-12-05"
"TotalCount1": 566,
"TotalCount2": 105,
}, {
"Date": "2012-12-04"
"TotalCount1": 798,
"TotalCount2": 11,
}... 
```

在将整个数组发送到 json_encode 之前，我将如何对数组值进行分组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:44:49.653

您将要创建一个以 为键的输出数组`Date`。从 JSON 循环遍历每个子数组（或对象，如果你有的话），测试日期键是否已经存在并添加到它，或者创建它。

最后，调用`array_values()`它以剥离`Date`键并将其转换为纯数字索引数组，然后再将其编码回 JSON。

```
$output = array();
foreach ($original_array as $obj) {
  // If the date key ($obj->Date) already exists in the array, add the counts...
  if (isset($output[$obj->Date])) {
    $output[$obj->Date]->Count1 += $obj->Count1;
    $output[$obj->Date]->Count2 += $obj->Count2;
  }
  // Otherwise just append this object onto the output array
  // For objects, this must be cloned, since it would be saved as a reference otherwise.
  else {
    $output[$obj->Date] = clone $obj;
  }
}

// Then strip off the Date keys from the array:
// ready to call json_encode() on again...
$output = array_values($output); 
```

以上假设您的原始`json_decode()`调用`stdClass`为数组元素生成对象，而不是关联数组。

[这是一个样本...](http://codepad.viper-7.com/FvBecV)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T21:45:13.493

我认为使用`$totals`索引的数组在`date`这里可以工作（如果我理解正确的话）。类似于下面的示例，`$data`您的[解码](http://php.net/manual/en/function.json-decode.php)关联 JSON 数组在哪里：

```
$totals = array();

foreach ($data as $row) {
    if (isset($totals[$row['Date']]) ) {

        $totals[$row['Date']]['TotalCount1']
            = $totals[$row['Date']]['TotalCount1'] + $row['Count1'];

        $totals[$row['Date']]['TotalCount2']
            = $totals[$row['Date']]['TotalCount2'] + $row['Count2'];

    } else {

        $totals[$row['Date']] = array(
             'Date' => $row['Date'],
             'TotalCount1' => $row['Count1'],
             'TotalCount2' => $row['Count2'],
        );

    }
} 
```

# android - 如何处理“_data”字段？

> ID：13896419
> 
> 赞同：1
> 
> 时间：2012-12-15T21:34:31.117
> 
> 标签：android, android-contentprovider

我正在尝试将大文件（位图）存储在我的内容提供程序中，但不知道如何。我在我的记录中添加了一个“_data”字段，并覆盖了我的 Content Provider 的 openFile() 方法。

```
public void onCreate(SQLiteDatabase db) {
    db.execSQL("create table contact ( _id integer primary key autoincrement, NAME text collate nocase, IMAGE text, _data text );");
}

public ParcelFileDescriptor openFile(Uri uri, String mode)
    throws FileNotFoundException {

    String rowID = uri.getPathSegments().get(1);
    String dir = Environment.DIRECTORY_PICTURES;

    File file = new File(getContext().getExternalFilesDir(dir), rowID);
    if (!file.exists()) {
        try {
            file.createNewFile();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    int fileMode = 0;
    if (mode.contains("w"))
        fileMode |= ParcelFileDescriptor.MODE_WRITE_ONLY;
    if (mode.contains("r"))
        fileMode |= ParcelFileDescriptor.MODE_READ_ONLY;
    if (mode.contains("+"))
        fileMode |= ParcelFileDescriptor.MODE_APPEND;
    return ParcelFileDescriptor.open(file, fileMode);
} 
```

我正在使用 Content Resolver 的 openOutputStream() 方法插入位图。

```
ContentValues values = new ContentValues();
values.put("NAME", "abc");
Uri rowUri = cr.insert(MyContentProvider.CONTENT_URI, values);
values.put("IMAGE", rowUri.toString());
cr.update(rowUri, values, null, null);

InputStream inputStream = httpConnection.getInputStream();
BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
String line = null;
try {
    Bitmap bitmap = BitmapFactory.decodeStream((InputStream)new URL("http://www.xyz.com/abc.jpg").getContent());
    bitmap.compress(Bitmap.CompressFormat.JPEG, 80, cr.openOutputStream(rowUri));
} catch (MalformedURLException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
} 
```

当我这样做时，文件存储在我的 SD 卡中，但“_data”字段保持为空。我做错了什么？

我需要自己写“_data”字段吗？根据[本教程](http://www.anddev.org/advanced-tutorials-f21/providing-data-in-a-contentprovider-t4073.html)，答案似乎是“是”。“_data”字段写入 insert() 方法中，并带有该文件在设备上的确切文件路径。记录中的 URI 引用 IMAGE 不是必需的。但是这个教程已经有几年了，我还没有找到另一个像这样直接写“_data”的例子。有人知道一个很好的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:29:08.373

上述教程中建议的解决方案有效。

# java - wait() 和 sleep() 的问题？

> ID：13896421
> 
> 赞同：1
> 
> 时间：2012-12-15T21:34:42.233
> 
> 标签：java, multithreading, swing, event-dispatch-thread

> **可能重复：**
> [java中的GUI线程](https://stackoverflow.com/questions/9495360/gui-threading-in-java)

我一直在尝试制作一个基于文本的游戏，到目前为止，除了使用 Thread.sleep() 和 wait() 时出现这个奇怪的错误外每一个之间。

这是带有 wait() 的代码

```
int i=0;
synchronized(mon) {
    while(i<msg.length())
    {
        console.setText(console.getText()+ msg.charAt(i));
        i++;
        try {
            mon.wait(500);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
} 
```

下面是 sleep() 的代码：

```
int i=0;
    while(i<msg.length())
    {
        console.setText(console.getText()+ msg.charAt(i));
        i++;
        try {
            Thread.sleep(500);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    } 
```

但是，当它到达此代码时，程序会等待 msg.length*500ms 然后立即打印整个 msg！帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T21:43:46.743

这是常见的问题：您不应阻止“事件调度线程”（EDT）。

EDT 负责绘制组件和调度事件。因此，当您阻止此线程时，下一次重绘将在您离开方法并将控制权交还给 EDT 后发生。

你必须在 EDT 之外做你的“动画”。

使用这些关键字查找此站点、Google 或任何 Swing 教程，您将获得*大量*信息。

# c# - 从 Pageant 读取私有 SSH 密钥

> ID：13896422
> 
> 赞同：2
> 
> 时间：2012-12-15T21:34:52.250
> 
> 标签：c#, ssh, ssh-keys, ssh-agent, pageant

我正在用 C# 编写一个实用程序，它需要通过 SSH（使用[SSH.NET](http://sshnet.codeplex.com/)）自动连接到服务器，这几乎是一个轻松的过程。服务器强制公钥认证（服务器是我的，我有完全的物理控制），这样只有少数人可以访问它。

在 Windows 上，我们都设置了 Pageant 以使用 TortoiseGit 与我的服务器进行通信，所以我只需要从 Pageant 读取已经解锁的内存中私钥，而不是每次我想再次询问密码。调试/运行该实用程序。

到目前为止，我发现的最接近的东西是[来自 Paramiko 的 Python 模块，](http://code.google.com/p/syncla/source/browse/trunk/paramiko/win_pageant.py?r=4)它检查是否存在 Pageant 窗口并公开发送和接收方法。这应该很容易移植到 C#，但我想知道我需要向 Pageant 发送*什么命令来接收密钥？*

通过 Paramiko，这并不是很明显，而且我找不到任何以编程方式使用 Pageant 的文档。答案不必在 C# 中，但如果是，我就不必为此编写一个小实用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T07:57:30.857

您不会从 Pageant 读取私钥，而是要求 Pageant 计算签名。这需要修改客户端的源代码。

在最新版本的 SecureBlackbox 产品中，我们为 .NET 的 SSH 和 SFTP 客户端组件添加了 Pageant 和 ssh-agent 支持，因此您可能想查看它们。

# vhdl - 以不同方式连接 STD_LOGIC_VECTOR (Barrel Shifter) - VHDL

> ID：13896432
> 
> 赞同：1
> 
> 时间：2012-12-15T21:35:47.613
> 
> 标签：vhdl, shift

我正在实现一个 N 位桶形移位器。

这是我的组件：

```
entity barrel_shifter is
    Generic ( N : integer := 4);
    Port ( data_in : in  STD_LOGIC_VECTOR (N-1 downto 0);
           shift : in  STD_LOGIC_VECTOR (integer(ceil(log2(real(N))))-1 downto 0); -- log2 of N => number of inputs for the shift
           data_out : out  STD_LOGIC_VECTOR (N-1 downto 0));
end barrel_shifter; 
```

出于我的目的，我也创建了一个 N 位多路复用器，这是它的代码：

```
entity mux is
    Generic ( N : integer := 4);
    Port ( data_in : in  STD_LOGIC_VECTOR (N-1 downto 0);
           sel : in  STD_LOGIC_VECTOR (integer(ceil(log2(real(N))))-1 downto 0); -- log2 of N => number of inputs for the shift
           data_out : out  STD_LOGIC);
end mux;

architecture Behavioral of mux is

begin
    data_out <= data_in(to_integer(unsigned(sel)));
end Behavioral; 
```

现在要实现圆桶移位器，我需要以不同的方式连接这些 N 多路复用器。[您可以在此处](http://www.xilinx.com/support/documentation/application_notes/xapp195.pdf "PDF格式")找到示例，第 2 页，图 1。如您所见，IN0 仅与 D0 多路复用器输入连接一次。下一次 IN0 连接到 D1 多路复用器输入，依此类推……（其他输入的逻辑相同）

但是我怎么能在 VHDL 中实现类似的东西呢？如果我没有 STD_LOGIC_VECTOR 作为输入，那会很容易，但我需要制作一个通用的 Barrel Shifter（带有通用映射结构），所以我不能手动连接每条线，因为我不知道通用 N 的值.

在我的 bucket_shifter 实体中，我尝试了这个：

```
architecture Structural of barrel_shifter is

    signal q : STD_LOGIC_VECTOR (N-1 downto 0);

begin

    connections: for i in 0 to N-1 generate
        mux: entity work.mux(Behavioral) generic map(N) port map(std_logic_vector(unsigned(data_in) srl 1), shift, q(i));
    end generate connections;

    data_out <= q;

end Structural; 
```

但它根本不起作用（“实际，运算符的结果，与正式信号关联，信号'data_in'，不是信号。（LRM 2.1.1）”）。我尝试过使用变量和信号，如下所示：

```
data_tmp := data_in(i downto 0) & data_in(N-i downto 1); 
```

但我仍然想不出正确的方法来建立这些联系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T15:01:32.590

哪个工具报告这个？

Xilinx XST 报告

```
barrel_shifter.vhd" Line 20: Actual for formal port data_in is neither a static 
name nor a globally static expression 
```

这有助于确定问题，因为表达式`std_logic_vector(unsigned(data_in) srl 1)`映射到`data_in`多路复用器上。声明临时信号

```
architecture Structural of barrel_shifter is

    signal q    : STD_LOGIC_VECTOR (N-1 downto 0);
    signal temp : STD_LOGIC_VECTOR (N-1 downto 0);
begin

    temp <= std_logic_vector(unsigned(data_in) srl 1);

    connections: for i in 0 to N-1 generate
        mux: entity work.mux(Behavioral) generic map(N) 
                                         port map(temp, shift, q(i));
    end generate connections;
    ...
end 
```

解决问题。

# android - 我的应用无法读取内部存储上的自制 HTML 文件

> ID：13896436
> 
> 赞同：0
> 
> 时间：2012-12-15T21:36:11.757
> 
> 标签：android, html, file, storage

正如问题的标题所说，我有一个在 Android 内部存储上生成 HTML 文件的应用程序。

我是这样做的：

读取文件

```
 if (thereIsSomethingToShow)
        {
            File dir = getDir("MyApp", MODE_WORLD_READABLE);
            File newfile = new File(dir.getAbsolutePath() + File.separator + Ref+"-"+Name+".html");
            mWebview.loadUrl("file:/"+dir.getAbsolutePath()+File.separator+Ref+"-"+Name+".html"); //("file:///"+Environment.getExternalStorageDirectory()/*+"//MyApp//MySheets//"*/+"//"+Ref+"-"+Name+".html");
            setContentView(mWebview);
        } 
```

编写文件（在我的班级上面的代码之前）

```
File root = getDir("MyApp", MODE_WORLD_READABLE); //Environment.getExternalStorageDirectory();
File f = new File(root.getAbsolutePath() + File.separator + Ref+"-"+Name+".html"); //new File(root, Ref+"-"+Name+".html");
f.createNewFile();
FileOutputStream fos = new FileOutputStream(f);
BufferedWriter bw = new BufferedWriter(new OutputStreamWriter(fos, "ISO-8859-1"));
bw.write(rs.getFullCode());
bw.close(); 
```

HTML 文件在指定位置生成良好，但我无法在我的应用程序的 webView 和浏览器中读取它，除非我使用根资源管理器将 HTML 文件移动到外部存储。

如果我不这样做，我的浏览器和我的 webView 都会显示“网页不可用”。请注意，如果我在评论中使用这些值，一切都会好起来的。

谢谢你的帮助。

# javascript - ajax 调用正在堆叠

> ID：13896438
> 
> 赞同：1
> 
> 时间：2012-12-15T21:36:26.943
> 
> 标签：javascript, ajax, jquery

所以标题有点说明会发生什么。我有一个 ajax 调用，如果成功，它会发送另一个调用，但问题是在调用完成之前它已经发送了另一个调用，并且 ajax 开始堆叠。我**没有**使用异步，而是使用**php**作为我的服务器语言。我的 ajax 也有 5 秒 = 5000 毫秒的超时。所以它轮询服务器，当它发生时它正在等待，然后 javascript 执行一个新的 ajax 调用，甚至在另一个返回信息之前。

所以这是我的 jquery ajax 调用

```
 $.ajax({
                url: ("json/getfriends.php"),
                type: 'POST',
                data: {friendlist: friendsarray},
                async: false,
                timeout: 5000,  
                dataType: 'json',       
                success: function(data){                
                    $.each(data, function(i, val){
                        friendsarray.push(val);                 
                    });
                    setTimeout("friends();", 15000); //loops the ajax call

                },
                error: function(jqXHR, textStatus, errorThrown) 
                {
                    if (errorThrown['code'] == 101){
                        //time out, not data was received 
                        setTimeout("friends();", 15000); //loops the ajax call
                    }
                    else
                    {
                        console.log(errorThrown);
                    }
                }
            }); 
```

所以我的问题是如何停止 ajax 堆叠在彼此之上，或者如何让一个 ajax 调用仅在另一个调用带回数据时才进行。

[所以这是一个图像](http://grubber.co.nz/stackexchange/Screen%20Shot%202012-12-16%20at%2010.39.48%20AM.PNG) [和后果](http://grubber.co.nz/stackexchange/Screen%20Shot%202012-12-16%20at%2011.00.43%20AM.PNG)

[我完整的 javascript](http://grubber.co.nz/developer/_social_development/js/chat.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:15:14.413

底线是，您显示的代码没有出现问题。

但是，您添加的[完整 JavaScript存在一个主要问题：](http://grubber.co.nz/developer/_social_development/js/chat.js)

```
...
setTimeout(chat_check(), 20000);    
... 
```

看到了吗？它立即`chat_check()`从成功处理程序中运行。不是个好主意！

应该是这样的：

```
setTimeout(chat_check, 20000); 
```

它将函数引用作为第一个参数传递，而不是函数结果。您可能希望为您的`friends()`通话应用相同的内容：

```
setTimeout(friends, 15000); 
```

**编辑**

顺便说一句，我不确定您为什么要使用`async: false`，但是这样做对用户体验来说并不是很好，因为浏览器在请求期间将无响应。

使用默认异步模式会更好:)

# svn - VCSCommand 不断在我的所有提交中添加一个额外的空行

> ID：13896442
> 
> 赞同：3
> 
> 时间：2012-12-15T21:37:00.043
> 
> 标签：svn, vim, vim-plugin, vcscommand

我最近开始尝试使用[VCSCommand 插件](http://www.vim.org/scripts/script.php?script_id=90)让[vim](http://www.vim.org/)与几个颠覆存储库一起工作。每次我从`vim`using中进行更改时`VCSCommit`，又名。组合键 ( `\cc`)，我不断将这些额外的空白行添加到我的提交中。

这是一个例子：

```
------------------------------------------------------------------------
r72 | smingolelli | 2012-12-15 15:58:17 -0500 (Sat, 15 Dec 2012) | 2 lines

Trying from Fedora 14 w/ svn 1.6.17 and vim 7.3 1-315 w/ svn:eol-style=native for compile.sh.

------------------------------------------------------------------------ 
```

如果我从命令行执行相同的提交：

```
------------------------------------------------------------------------
r73 | smingolelli | 2012-12-15 16:06:44 -0500 (Sat, 15 Dec 2012) | 1 line

Trying from Fedora 14 w/ svn 1.6.17 and vim 7.3 1-315 w/ svn:eol-style=native for compile.sh from command-line.
------------------------------------------------------------------------ 
```

所以这似乎与`VCSCommand plugin`for相关，`vim`但我没有看到问题所在。此外，我尝试对 , 和 the 的多个版本进行相同的测试，`svn`但`vim`仍然`VCSCommand plugin`得到相同的行为。

## 版本

*   **SVN 客户端操作系统：** Fedora 14 & CentOS 6
*   **SVN 服务器操作系统：** Windows Vista
*   **SVN 服务器版本：** 1.6.2
*   **VCSCommand 插件：** [vcscommand-1.99.46.zip](http://www.vim.org/scripts/download_script.php?src_id=17031)，版本：1.99.46 日期：2011-12-06

**软呢帽 14**

*   **尝试的 SVN 客户端版本：** 1.6.17
*   **尝试的 VIM 版本：** 7.3（2010 年 8 月 15 日，2011 年 9 月 21 日 09:27:09 编译）包含的补丁：1-315

**中央操作系统 6**

*   **尝试的 SVN 客户端版本：** 1.6.11、1.6.19 --（**注意：** VCSCommand 插件不适用于 svn1.7+ 和 VIM 7.3）
*   **尝试过的 VIM 版本：** 7.2？& 7.3（2010 年 8 月 15 日，2012 年 12 月 15 日 14:08:39 编译）包含的补丁：1-393

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T19:22:36.803

Vim 有一个名为 的“功能” `eol`，它通常默认开启。您可以使用`:set eol`. 如果每个文本文件还没有，这会在每个文本文件的末尾添加一个额外的换行符。这是由于一些较旧的软件（尤其是`cron`）需要在文件末尾换行才能正确读取它而存在。大多数（如果不是全部）旧软件已更新为没有此要求，但 vim 仍然像以前一样工作。

您可以使用 关闭此功能`:set noeol`。如果文件末尾有一个换行符，它会删除一个换行符。这很好，如果您不想在文本文件的末尾添加换行符，或者在您的情况下，在提交注释的末尾添加换行符。放在文件`set noeol`的顶部，`.vimrc`此设置将一直处于启用状态，但只要该`noeol`设置有效，您的所有文件都会在文件末尾丢失换行符。

一种选择是使用`:set binary`，它会关闭文本处理，并单独保留换行符。不过，它确实禁用了其他一些与文本相关的功能。如果您选择此选项，请查看[文档](http://vimdoc.sourceforge.net/htmldoc/options.html#%27bin%27)以了解哪些功能将消失。您也可以将此设置放入您的`.vimrc`文件中。

# javascript - Rails Ajax 搜索

> ID：13896445
> 
> 赞同：1
> 
> 时间：2012-12-15T21:37:29.437
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ajax

我一直在为 Rails 寻找 ajax 搜索 gem，但没有任何运气。

有没有人在 Rails 中进行过简单的 ajax 搜索或者使用过 gem？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:17:38.543

不知道为什么你需要 gem，但这里是搜索 gems 的好地方：[https](https://www.ruby-toolbox.com/) ://www.ruby-toolbox.com/ 尝试自己实现 ajax 搜索。在 Rails 中很容易 =)

# c++ - rand() 每次运行程序时返回相同的数字

> ID：13896450
> 
> 赞同：24
> 
> 时间：2012-12-15T21:37:52.887
> 
> 标签：c++, random

在这个涉及随机数生成的相当基本的 C++ 代码片段中：

```
include <iostream>
using namespace std;

int main() {
    cout << (rand() % 100);
    return 0;
} 
```

为什么我总是得到 41 的输出？我试图让它输出一些介于 0 和 100 之间的随机数。也许我不了解 rand 函数的工作原理？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-15T21:42:48.057

你需要改变[种子](http://en.wikipedia.org/wiki/Random_seed)。

```
int main() {

    srand(time(NULL));
    cout << (rand() % 101);
    return 0;
} 
```

`srand`播种对于语言代码也是如此`c`。

* * *

另见：http: [//xkcd.com/221/](http://xkcd.com/221/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-15T21:41:15.117

您需要“播种”生成器。看看这个简短的视频，它会清除一切。

[https://www.thenewboston.com/videos.php?cat=16&video=17503](https://www.thenewboston.com/videos.php?cat=16&video=17503)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-11T16:15:49.783

对于它的价值，您也只能生成 0 到 99（含）之间的数字。如果您想生成 0 到 100 之间的值，则需要。

```
rand() % 101 
```

除了调用其他人提到的 srand() 之外。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-15T21:43:17.363

你没有播种号码。

用这个：

```
#include <iostream>
#include <ctime>

using namespace std;

int main()
{
    srand(static_cast<unsigned int>(time(0)));
    cout << (rand() % 100) << endl;
    return 0;
} 
```

你只需要播种一次。基本上不要为每个随机数播种。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-15T21:52:03.097

`srand()`种子随机数生成器。没有种子，生成器就无法生成您要查找的数字。只要一个人对随机数的需求不是安全关键的（例如任何类型的密码学），通常的做法是通过使用库中的`time()`函数来使用系统时间作为种子`<ctime>`：`srand(time(0))`. 这将使用以 Unix 时间戳表示的系统时间（即自 1970 年 1 月 1 日以来的秒数）作为随机数生成器的种子。然后您可以使用它`rand()`来生成一个伪随机数。

这是一个[重复问题](https://stackoverflow.com/questions/9459035/c-rand-gives-same-number-when-running-process)的引述：

> 原因是 rand() 函数生成的随机数实际上并不是随机的。这简直是​​一种转变。维基百科对伪随机数生成器的含义给出了更好的解释：确定性随机位生成器。每次调用 rand() 时，它都会生成种子和/或最后一个随机数（C 标准没有指定使用的算法，尽管 C++11 有指定一些流行算法的工具），运行一个对这些数字进行数学运算，并返回结果。因此，如果种子状态每次都相同（如果您不使用真正的随机数调用 srand），那么您将始终得到相同的“随机”数字。
> 
> 如果您想了解更多，可以阅读以下内容：
> 
> [http://www.dreamincode.net/forums/topic/24225-random-number-generation-102/](http://www.dreamincode.net/forums/topic/24225-random-number-generation-102/)
> 
> [http://www.dreamincode.net/forums/topic/29294-making-pseudo-random-number-generators-more-random/](http://www.dreamincode.net/forums/topic/29294-making-pseudo-random-number-generators-more-random/)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-09-17T08:08:18.443

像borland编译器这样的随机函数

```
using namespace std;

int sys_random(int min, int max) {
   return (rand() % (max - min+1) + min);
}

void sys_randomize() {
    srand(time(0));
} 
```

# java - 遍历迭代器中的元素，然后调用方法？

> ID：13896454
> 
> 赞同：0
> 
> 时间：2012-12-15T21:38:03.540
> 
> 标签：java, for-loop, iterator

在一个文件中，我有这个：

```
public DirectoryNode(String n, List<FileSystemNode> c) {
...
private List<FileSystemNode> nodes;
...
public Iterator<FileSystemNode> iterator() { return nodes.iterator(); }
...} 
```

在另一个文件中，我有这个：

```
public class SizeVisitor implements FileSystemVisitor<Integer>
{...
    public Integer visitDirectory(DirectoryNode d){
    }
} 
```

我的问题是，我如何在 visitDirectory 中创建一个 for 循环，它将获取 d 的迭代器，并遍历所有元素，然后在每个元素上调用方法“getSize”，该方法在 FileSystemNode 中实现？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:44:58.433

你可能想做这样的事情：

```
public Integer visitDirectory (DirectoryNode d) {
  for ( Iterator<FileSystemNode> iterator = d.iterator(); iterator.hasNext(); ) {
    FileSystemNode fsn = iterator.next();
    fsn.getSize();
  }
} 
```

您还可以`DirectoryNode`实现[Iterable](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Iterable.html)接口，以便使用 foreach 循环：

```
public Integer visitDirectory (DirectoryNode d) {
  for ( FileSystemNode fsn : d) {
    fsn.getSize();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:46:37.053

像这样：

```
public Integer visitDirectory(DirectoryNode d){
 Iterator<FileSystemNode> i = d.iterator();
 while (i.hasNext()) {
   FileSystemNode fsn = i.next();
   fsn.getSize()
 }
} 
```

如果您在其中实现`Iterable`接口，`DirectoryNode`还可以使用 for-each 循环：

```
public Integer visitDirectory(DirectoryNode d){
  for (FileSystemNode fsn : d) {
    fsn.getSize()
  }
} 
```

# html - 用按钮替换 ul 项目符号

> ID：13896455
> 
> 赞同：1
> 
> 时间：2012-12-15T21:38:08.533
> 
> 标签：html, css, html-lists

是否可以用按钮替换`ul`子弹？我知道您可以使用 CSS 更改为图像，但如果我想要一个实际的元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:40:39.933

正如您所要求的那样，这是不可能的，但您也许可以效仿它：

```
<ul>
    <li><button>some button text</button>List-element text.</li>
</ul> 
```

以及以下 CSS：

```
ul, li {
    list-style-type: none;
}

li {
    padding-left: 0;
    margin-left: 0;
}

li button {
    margin-right: 2em;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/vWE7L/1/)。

当然，这种方法的成功或适用性完全取决于您的问题忽略的用例。有了更多的细节，也许这个答案会变得更有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:55:20.050

不，使用 CSS，您可以设置项目符号的样式或省略它们，并且您可以生成内容，但生成的内容仅引入了带有某些内容的伪元素，而不是真正的按钮元素。

如果您需要`ul`在标记中包含一个元素（我想知道为什么），那么您可以使用一些注入`button`元素的 JavaScript（以及隐藏项目符号的 CSS）。但是假设我猜对了你的意图，为什么不只使用一个表格，其中一列中有按钮，另一列有关联内容，或者只是`div`内容以元素开头的`button`元素？

# objective-c - Objective-C 描述的行为不像我预期的那样。

> ID：13896456
> 
> 赞同：2
> 
> 时间：2012-12-15T21:38:10.450
> 
> 标签：objective-c, nsobject

我正在尝试构建一个好的三角形类，因为我经常使用它们。我决定修改我的类，以便用户可以设置 a `bool`，以选择使用度数而不是弧度。有趣的是，除了描述之外，每件事似乎仍然可以正常工作：

```
 IMTriangle *tri = [[IMTriangle alloc]init];
    tri.shouldUseDegrees = YES;
    tri.SideA = 3;
    tri.SideB = 4;
    tri.SideC = 5;

    [tri solve];
    NSLog(@"tri %@", tri);
    double A = tri.angleA;
    double B = tri.angleB;
    double C = tri.angleC;
    NSLog(@"A = %f  B = %f  C = %f",A,B,C);
    NSLog(@"tri  %@",tri); 
```

给我这个

```
tri a=3.0000 b=4.0000 c=5.0000 A=0.6435 B=0.9273 C=1.5708 perimeter=6.0000 area=12.0000 height=4.0000 shouldUseDegrees 1
A = 36.869897  B = 53.130098  C = 90.000004
tri  a=3.0000 b=4.0000 c=5.0000 A=36.8699 B=53.1301 C=90.0000 perimeter=6.0000 area=12.0000 height=4.0000 shouldUseDegrees 1 
```

在我从三角形对象中获取角度以使用它们之后，它的描述突然如我所料。我不知道它是否与我正在使用的自定义设置器和获取器有关：

```
-(void) setAngleA:(double)angleA
{
    if (!_shouldUseDegrees){
        _angleA = angleA;
    }
    else _angleA = angleA * M_PI/180;
}
-(double) angleA
{
    if (!_shouldUseDegrees) {
        return _angleA;
    }
    return  _angleA *= 180/M_PI;
} 
```

或者我的描述方法

```
-(NSString *) description;
{

    return [NSString stringWithFormat:@"a=%.4f b=%.4f c=%.4f A=%.4f B=%.4f C=%.4f perimeter=%.4f area=%.4f height=%.4f shouldUseDegrees %i", _sideA , _sideB , _sideC , _angleA , _angleB , _angleC , self.area , self.perimeter , self.height ,_shouldUseDegrees];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:55:02.280

你有两个问题。

首先，您需要停止`_angleA`在访问器中重新分配：

```
return  _angleA *= 180/M_PI; 
```

那应该是：

```
return  _angleA * 180/M_PI; 
```

另一个是您想要以度为单位的打印输出。由于您的实例变量始终保持弧度，请更改`_angleA, _angleB, _angleC`为`self.angleA, self.angleB, self.angleC`调用您的自定义访问器，而不是打印实例变量的值。

# google-chrome-extension - Chrome 多功能框奇怪的建议

> ID：13896461
> 
> 赞同：2
> 
> 时间：2012-12-15T21:39:16.847
> 
> 标签：google-chrome-extension

我正在为 Chrome 创建插件，并且正在尝试使用多功能框。假设我的插件建议`abcd`. 用户类型`o ab`（`o`- 多功能框关键字）并可以选择我的建议并按 Enter。下次用户键入`o ab`Chrome 时也会建议`chrome-extension://jiplmmiemkpcomooikeeicllpnmnlaia/?q=abcd`. 如果我打开它，我会看到`Error 6 (net::ERR_FILE_NOT_FOUND): The file or directory could not be found.`。如何禁用此建议（`chrome-extension://...`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:14:29.637

我通过添加 5 条建议解决了这个 Chrome 多功能框“污染”。由于 Chrome 最多显示 5 条建议，`chrome-extension://jiplmmiemkpcomooikeeicllpnmnlaia/`因此不会显示。因此，除了“主要”建议选项之外，我还有“次要”建议选项，例如：

1.  `:help`- 打开帮助页面
2.  `:open_site`- 打开插件的站点
3.  `:settings`- 打开设置页面
4.  ...

您的插件可能有其他次要建议。此解决方案还修复了[搜索结果](https://stackoverflow.com/questions/9559826/plugin-with-omnibox-suggestion-is-it-possible-to-not-display-search-suggestion)问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:30:03.113

对于每个[多功能框](https://developer.chrome.com/extensions/omnibox.html)搜索，Chrome 会为**`Keyword`**和**`Shortcuts`**引用创建两条记录，如下所示

## 关键词

![在此处输入图像描述](../Images/22ff71f76b7bc2f0140251370ff4c687.png)

## 捷径

![在此处输入图像描述](../Images/525589034576de9117fa085691f202dd.png)

因此，搜索结果会显示在多功能框中。但是，您可以使用适当的[转换类型使用](https://developer.chrome.com/extensions/history.html#transition_types)[history API()](https://developer.chrome.com/extensions/history.html)[删除这些](https://developer.chrome.com/extensions/history.html#method-deleteUrl)引用。

### 例子：

```
 // Form URL dynamically and use it here
 chrome.history.deleteUrl({
     "url": "chrome-extension://fpcmfnhmjahllmhohkeaempoejojhlln/?q=hi"
 }, function () {
     //Call Back
     console.log("Deleted");
 }); 
```

如果您需要更多信息，请与我们联系。

# objective-c - 链接器错误在类中声明函数

> ID：13896463
> 
> 赞同：0
> 
> 时间：2012-12-15T21:39:42.430
> 
> 标签：objective-c, inline

我想知道如何在 .m 文件中声明函数，但在这里我得到一个链接器错误。我在 .h 文件中声明了这个：

```
#import <Foundation/Foundation.h>
// Other rimports

void SQLite3HelperHandle(NSError* error);

@interface SQLite3Helper : NSObject

// Method signatures

@end 
```

然后在 .m 文件中：

```
#import "SQLite3Helper.h"

void SQLite3HelperHandle(NSError* error)
{
    // Method body
}

@implementation SQLite3Helper

// Methods implementation

@end 
```

但我得到一个链接器错误。错误有很多不可读的信息。唯一相关的是：

> “_SQLite3HelperHandleError”，引用自：

**另外**，我如何声明它内联？我尝试在标题中以这种方式声明它：

```
extern inline void SQLite3HelperHandle(NSError* error); 
```

通常在 .m 文件中：

```
void SQLite3HelperHandle(NSError* error); 
```

我还尝试了其他方法来做到这一点，但从未找到消除链接器错误的方法。
它应该和宏一样快，但是这个函数写得太长了，我更喜欢类型检查，所以我需要一个内联函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:44:23.330

看起来像 C++ 风格的函数名称修饰。

为了解决这个问题，把你的 C 风格函数声明（在你的 .h 文件中）放在这个条件之间：

```
#ifdef __cplusplus
extern "C" {
#endif

void SQLite3HelperHandle(NSError* error);

#ifdef __cplusplus
}
#endif 
```

有关此操作的更多信息，请参见此[相关问题](https://stackoverflow.com/questions/3789340/combining-c-and-c-how-does-ifdef-cplusplus-work) [或此](https://stackoverflow.com/questions/376966/using-c-c-static-libraries-from-iphone-objectivec-apps)问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:44:55.357

听起来 .m 文件需要包含在您正在构建的目标中。

我`FOUNDATION_EXPORT void ...`在 .h 中使用以及在 .m 文件中使用的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T23:09:02.717

要将函数内联定义为`static inline`，无论它是否在标题中。如果您只需要在一个文件中使用它，只需在该 .m 文件中定义它并将其放在标题之外。否则，将其完全定义在 .h 文件中。

# asp.net - 如何使用实体框架映射器在 asp.net mvc 3 中设置 FormsAuthentication？

> ID：13896465
> 
> 赞同：1
> 
> 时间：2012-12-15T21:39:52.607
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, authentication, forms-authentication

我正在尝试在我的 mvc 3 应用程序的 web.config 文件中手动设置身份验证用户名和密码：

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880" />
  <credentials passwordFormat="Clear">
    <user name="admin" password="secret" />
  </credentials>
</authentication> 
```

并出现以下警告：

警告 1 元素“身份验证”具有无效的子元素“凭据”。预期的可能元素列表：“表格，护照”。C:\Users\Aleksey\documents\visual studio 2012\Projects\SportStore\SportStore.WebUI\Web.config 20 8 SportStore.WebUI

我也尝试使用 aspnet_regsql.exe 工具，但我使用实体框架映射器，所以我的数据库有 (.sdf) 扩展名（SQL Server Compact Edition 数据库文件），这是不受支持的。我尝试通过 nuget 包管理器添加 Microsoft.AspNet.Providers.SqlCE。web.config 文件中出现了 4 个默认提供程序和新的连接字符串。我将提供程序的连接字符串更改为“EfDbContext”（从 DbContext 继承的类），没有任何工作。
我是身份验证的新手。Mabby 您知道一些有用的资源，其中详细描述了“如何在身份验证中使用 EF”？
先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T21:44:23.033

它应该是

```
<authentication mode="Forms">
  <forms loginUrl="~/Account/LogOn" timeout="2880">
  <credentials passwordFormat="Clear">
    <user name="admin" password="secret" />
  </credentials>
  </forms>
</authentication> 
```

# git - TeamCity 将功能分支推送到主分支

> ID：13896467
> 
> 赞同：4
> 
> 时间：2012-12-15T21:40:08.903
> 
> 标签：git, jenkins, continuous-integration, workflow, teamcity

有没有办法将成功构建的功能分支推送到另一个分支？

我想要这样的东西：

Git 存储库（Gitorious/GitHub 等等）。分支机构：

*   master（当前项目的代码）
*   质量保证（代码等待 QA 的分支）
*   功能分支（许多远程分支，开发人员可以在其中开发他们的功能）

开发人员应该只有对 master 的读取权限和对他的功能分支的读/写 QA 读/写质量保证分支 TeamCity - 读/写 master，质量保证，只读到功能分支

现在我想要一个这样的工作流程：

1.  开发人员从 master 分支中提取代码。
2.  开发人员创建功能分支 A。
3.  开发人员将更改推送到远程功能分支A
4.  TeamCity 监控功能分支
5.  TeamCity 在每次提交时触发构建和测试。
6.  如果构建成功，TeamCity 会将更改推送到质量保证分支
7.  QA 团队检查代码（可能会运行一些其他测试、完整性测试）
8.  如果 QA 确定一切正常，他们会将更改推送到 master 分支。

我不知道 QA 的那一步是否必要，也许成功构建和测试后的每个功能分支都应该与 master 合并。

首先我想知道：这有意义吗？我刚从 CI 开始，我不知道它是否有效。

其次，如果这个工作流程是正确的，我想知道如何配置 TeamCity 来做类似的事情，如果会出现某种冲突或哪里可能出错怎么办。

最近我观看了有关 Git+Jenkins+Gerrit 的演示文稿，在那里我看到了类似的东西，但对于 .NET 开发，我个人更喜欢 TeamCity，但如果使用 Jenkins 更容易做到这一点，我会改变主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T10:47:36.630

似乎是一个有效的场景。

更新：自 TeamCity 8.1 以来，有一个专用的[自动合并](https://confluence.jetbrains.com/display/TCD9/Automatic+Merge)功能。

较早的回复：TeamCity 没有对自动合并/推送分支的捆绑支持（对于上面列表中的第 6 个）。TeamCity 问题跟踪器中有一个相关的[功能请求](http://youtrack.jetbrains.com/issue/TW-16054)。

要让场景在当前 TeamCity 版本中运行，您可以在 TeamCity 中使用具有快照依赖关系的单独构建配置并在成功时触发，这将获取功能分支（由 TeamCity 完成），然后构建脚本将运行合并和推送 git 命令。您需要使用 TeamCity 代理端结帐才能执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T12:37:41.333

我们已经使用 github 实现了一个与此目标相同的工作流（尽管实现方式略有不同），虽然它可能涉及一些设置，但肯定会解决 teamcity 的一些问题。[我在这里](https://stackoverflow.com/a/12484596/97614)对类似问题有另一个答案

我们的解决方案基本上涉及每个开发人员拥有自己的主存储库分支，他们拥有读取和写入权限a 以及从主（绿色）存储库中提取权限。开发人员在分支上工作（每个故事一个，短暂的），这些分支是由团队城市在他们推送到他们的个人分支时构建的。

一旦开发人员准备好将他们的更改合并到主分支，他们就会提交拉取请求并审查代码，然后最终与他们的主分支合并。然后他们将他们的主分支推到他们的个人分叉上。

如果此构建成功并且所有测试都通过（此时我们也部署到 azure，然后针对部署运行测试），则团队城市构建代理将主分支推送到绿色存储库。

此推送必须是快进或推送被拒绝（这解决了自动合并的任何潜在问题，这让我感到恐惧）

您可以轻松地扩展它，让开发人员分支推送到 QA 存储库，然后 QA 提交到构建服务器，触发推送到绿色（或者让 QA 有权推送到绿色）。

teamcity 设置可能有点麻烦，因为您需要将事物与快照依赖项链接起来，这会抑制使用模板的能力，并且意味着每个开发人员至少需要 2 个构建配置（我们有 4 个来处理部署到azure 并针对 azure 运行测试），所以如果你有很多开发人员，这可能会很难管理。理想情况下，您不需要这样做，但由于[teamcity](http://youtrack.jetbrains.com/issue/TW-17002)中的问题仍未解决，如果测试失败，您不能总是让构建快速失败。

# ruby-on-rails - 使用另一个表中的实时数据创建下拉菜单

> ID：13896468
> 
> 赞同：1
> 
> 时间：2012-12-15T21:40:08.763
> 
> 标签：ruby-on-rails, ruby

我有一张患者表和一张治疗表。很标准。在治疗表中，我有一些字符串字段，它们与任何东西都没有关系。让我们暂时搁置它（认为它需要我假设）。然后患者表与用户相关，但我认为这不相关。

我要做的是在您创建治疗时获取当前患者的下拉列表以显示在表格中。因此，treatment/_form 将显示当前患者的下拉列表。创建患者的方式非常简单，用户必须登录，然后他们使用 CRUD 方法创建患者（在该表中基本上只是一个名称：字符串和电话：字符串）。所以我只想让这些名字出现在治疗表格的下拉列表中。

话虽如此，我意识到治疗区域需要与患者区域相关。所以我已经设置好了，所以让我们直接进入实施以及我到目前为止所做的事情。

到目前为止，我所做的是以硬编码的方式设置这一切。现在我需要帮助让它动态工作。这是硬编码版本：

在治疗表上：

```
<%= f.label "Client or Patient Name:" %>
<%= f.collection_select :patient, Treatment::PATIENTS, :to_s, :titleize %> 
```

在治疗模型中：

```
PATIENTS = %w[John Jim Max Cathy]

  def role_symbols
    [patient.to_sym]
  end 
```

当然，我将患者：字符串列添加到治疗表以使其正常工作。但这很好用。现在我只希望那个 PATIENTS 数组有实时数据。我注意到在模型中你不能做 PATIENTS = %w[Patient.all] 之类的事情，那么我该怎么做呢？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:35:08.080

在`app/views/treatments/_form.html.erb`：

```
<%= f.collection_select(:patient_id, Patient.all, :id, :name) %> 
```

应该给你所有病人的下拉列表

看：

*   [http://guides.rubyonrails.org/form_helpers.html#option-tags-from-a-collection-of-arbitrary-objects](http://guides.rubyonrails.org/form_helpers.html#option-tags-from-a-collection-of-arbitrary-objects)
*   [http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html#method-i-collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html#method-i-collection_select)

# python - Python中的sqrt函数奇怪的行为

> ID：13896470
> 
> 赞同：3
> 
> 时间：2012-12-15T21:40:18.110
> 
> 标签：python, python-2.7, while-loop, sqrt, square-root

在 Python 中，我编写了一个自定义代码 sqrt(x, delta) 以使用 delta-close 近似值计算给定数字的平方根。它使用 while 循环和类似二分搜索的算法。
编码：

```
from __future__ import division

def sqrt(x, delta):
    start = 0
    end = x
    while (end-start) > delta:
        middle = (start + end) / 2
        middle_2 = middle * middle
        if middle_2 < x:
            start = middle
            print "too low"
        elif middle_2 > x:
            end = middle
            print "too high"
        else:
            return middle
    result = (start + end) / 2
    return result 
```

它基本上可以工作并且速度非常快，但是在某些情况下它会进入无限的while循环。
例子：

```
sqrt(1e27, 1/1024) => works fine (returns 'too low's and 'too high's, then returns correct result)
sqrt(1e28, 1/1024) => works fine
sqrt(1e29, 1/1024) => never-ending loop, it keeps printing 'too low' forever
sqrt(1e30, 1/1024) => works fine
sqrt(1e31, 1/1024) => 'too low' forever
sqrt(1e32, 1/1024) => works fine
sqrt(1e33, 1/1024) => works fine (also surprising after the problem with 1e29 and 1e31)
sqrt(1e34, 1/1024) => works fine
sqrt(1e35, 1/1024) => 'too low' forever
sqrt(1e36, 1/1024) => works fine
sqrt(1e37, 1/1024) => 'too high' forever (too high this time!)
sqrt(1e38, 1/1024) => works fine
sqrt(1e39, 1/1024) => works fine (surprising again..)
... 1e40-1e45 ... they all work fine
sqrt(1e46, 1/1024) => 'too low' forever (surprisingly it occurs now with 1e'even number')
...
sqrt(1e200, 1/1024) => works fine
sqrt(1e201, 1/1024) => works fine
...
sqrt(1e299, 1/1024) => 'too low' forever
sqrt(1e300, 1/1024) => 'too high' forever
...
sqrt(1e304, 1/1024) => 'too high' forever
sqrt(1e305, 1/1024) => works fine
... 305-308 ... they allwork fine
sqrt(1e309, 1/1024) => inf (reached some 'infinite' limit?) 
```

我首先认为它的数字超过了限制，比如 1e20.. 但后来它也适用于它们。此外，我认为大约是 1e'odd' 或 1e'even' 数字，但正如我们在示例中看到的那样，事实并非如此。我也尝试使用不同的增量而不是 1/1024，但它们表现出类似的行为。

我将不胜感激任何解释导致这种行为的幕后发生的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T21:46:16.200

`float`只能表示一组有限的数字。您的代码最终会出现`start`和`end`是两个连续这样的数字。因此，`(start + end) / 2`必须向下舍入`start`或向上舍入`end`。

如果四舍五入，`middle_2 < x`. 现在，如果`end - start > delta`，你有一个“太低”的无限循环。

如果它被四舍五入，并且 if `end - start > delta`，你有一个“太高”的无限循环。

您可能应该将其重新定义`delta`为相对误差而不是绝对误差。

# html - 如何在响应式布局中使用粘滞页脚代码？

> ID：13896472
> 
> 赞同：2
> 
> 时间：2012-12-15T21:40:35.313
> 
> 标签：html, css, sticky-footer, liquid-layout

我一直在尝试各种页面上的粘滞代码，最接近让我的页面看起来不错的代码是 cssstickyfooter。

几个月前我开始了一个项目，打算为邻居的女儿制作。我需要为我的大学课程中的一个模块创建一个网站，这个想法是由一家新企业所有者的父亲带给我的。所以我制作了这个网站并将其提交给我的讲师（很多视觉错误，也许还有很多无用的代码）。：[爱尔兰小玩意网站](http://msc3.cmsmotion.com/)

我目前遇到的主要问题是页脚被卡在页面的一半（例如，请参阅业务页面）。我对此相当不耐烦，并尝试使用 ryan fait 的代码布局，但效果不佳。

我现在已经推出了内容和屏幕底部的页脚。我的朋友还建议使用固定位置进行操作，但内容不会跟在页脚后面。

我还粘贴了来自业务页面、样板和流体布局的新代码页面。

如果我明确表示：都在#main css 规则下，它会将内容带回，但页脚仍然太高。

我只是以这个页面为例来开始，然后逐步完成其余的工作。

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:50:32.053

最好的使用方法*（我发现）*是将[Ryan Fait](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)解决方案用于粘性页脚。这将包装除页脚之外的所有内容，以使其始终位于底部。

HTML

```
<html>
    <head>
    </head>
    <body>
        <div class="wrapper">
            <p>Your website content here.</p>
            <div class="push"></div>
        </div>
        <div class="footer">
            <p>Copyright (c) 2008</p>
        </div>
    </body>
</html>​ 
```

CSS

```
* {
  margin: 0;
}
html, body {
  height: 100%;
}
.wrapper {
  min-height: 100%;
  height: auto !important;
  height: 100%;
  margin: 0 auto -4em;
}
.footer, .push {
  height: 4em;
} 
```

这是一个 JSFiddle 示例。[http://jsfiddle.net/EyrKy/3/](http://jsfiddle.net/EyrKy/3/)

**更新：**这是您的布局示例[http://jsfiddle.net/EyrKy/4/](http://jsfiddle.net/EyrKy/4/)

我希望这有帮助。

# extjs - ExtJS 中的 NumberField 提示

> ID：13896474
> 
> 赞同：2
> 
> 时间：2012-12-15T21:40:47.923
> 
> 标签：extjs, messagebox, prompt

我正在尝试显示带有数字字段而不是常规文本字段的 MessageBox.prompt。我无法四处创建一个新的 MessageBox，所以我决定只使用验证器，但我也遇到了一些麻烦。

所以任何东西都对我有用，要么是 MessageBox 的数字验证器，要么是带有数字字段而不是文本字段的 MessageBox。

这是我的消息框...

```
var msgbox = Ext.Msg.prompt('Quantity', 'Enter a number',function(btn, text){} ) 
```

对此有什么想法吗？

**更新**

我设法让验证器工作，但我更愿意有一个数字字段而不是一个文本字段，所以问题的第一部分仍然存在。

如何在 ExtJS 的 MessageBox.prompt 上显示数字字段而不是文本字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T23:48:51.520

看起来如果没有“黑客”，他就无法完成。Ext.Msg 是一个单例，在 initComponent 中设置了文本字段并且它是不可配置的。 [http://docs.sencha.com/ext-js/4-1/source/MessageBox.html#Ext-window-MessageBox-method-initComponent](http://docs.sencha.com/ext-js/4-1/source/MessageBox.html#Ext-window-MessageBox-method-initComponent)

由于它是单例，因此覆盖将不起作用，也不是解决问题的好方法。

Messagebox 的扩展应该可以工作，但每次 Ext 升级时都必须查看代码，因为 MessageBox 代码没有很多钩子。

```
Ext.define('NumberPrompt', {
    extend: 'Ext.window.MessageBox',
    initComponent: function() {
        this.callParent();
        var index = this.promptContainer.items.indexOf(this.textField);
        this.promptContainer.remove(this.textField);
        this.textField = this._createNumberField();
        this.promptContainer.insert(index, this.textField);
    },

    _createNumberField: function() {
        //copy paste what is being done in the initComonent to create the textfield
        return new Ext.form.field.Number({
                        id: this.id + '-textfield',
                        anchor: '100%',
                        enableKeyEvents: true,
                        listeners: {
                            keydown: this.onPromptKey,
                            scope: this
                        }
        });
    }
});

var msgbox = new NumberPrompt().prompt('Quantity', 'Enter a number',function(btn, text){} ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-20T02:15:45.237

以下（hack？）适用于我的具体情况：注意 - 由于 Ext.MessageBox （可能）是一个全局对象，因此必须将其重置为在需要数字过滤以外的后续上下文中使用。

```
var mbtext = Ext.MessageBox.textField;
mbtext.maskRe = /[0-9:]/;
mbtext.regex = /[0-9]+(:[0-9]+)?/;
Ext.MessageBox.prompt('Numeric Only', 'Enter a number: ', function(btn, text) {
  if (btn !== 'ok') return;
  if (! text) return; 
  // ... now do the work with the numeric result in text
}); 
```

# c++ - 如何生成 24 个字符的 UUID？

> ID：13896475
> 
> 赞同：1
> 
> 时间：2012-12-15T21:40:54.150
> 
> 标签：c++, algorithm, hash, guid, uuid

> **可能重复：**
> [C++ 中的 UUID 生成示例](https://stackoverflow.com/questions/3247861/example-of-uuid-generation-in-c)

我需要一个生成 24 字符 UUID 的算法，但我能找到的只是生成标准 32 字符 UUID 的生成器，如下所示：

550e8400-e29b-41d4-a716-446655440000

如何生成 24 个字符的 UUID？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T21:45:46.677

[根据定义](http://en.wikipedia.org/wiki/UUID#Definition)， UUID 是 32 个字符（128 位）。如果它只有 24 个字符长，那就是别的东西了，如何生成它没有标准。

# java - Java 的动态对象数组

> ID：13896476
> 
> 赞同：1
> 
> 时间：2012-12-15T21:41:01.810
> 
> 标签：java, arrays, object

我正在用 Java 做一个财务计算器，我需要能够获取交易信息，如名称、金额和类型。它需要动态调整大小并能够保存信息。基本上我需要一个 ArrayList 和一个 Array of Objects 之间的混合，但我真的找不到任何存在的东西。通过查看这个问题[Creating an Arraylist of Objects](https://stackoverflow.com/questions/3982550/creating-an-arraylist-of-objects)和下面的代码：

```
ArrayList<Matrices> list = new ArrayList<Matrices>();
list.add( new Matrices(1,1,10) );
list.add( new Matrices(1,2,20) ); 
```

看起来我每次都可以创建一个新对象来保存我的数据，所以出于我的目的，它看起来像这样

```
ArrayList<Payments> paymentList = new ArrayList<Payments>();
paymentList.add( new Payments(var1, var2, var3) ); 
```

我可以将变量输入到 ArrayList 中吗？当然，一旦我将它们全部转换为字符串（或者我可以将它们保留为 String / Double / String，因为我在技术上将对象添加到 ArrayList 而不是字符串值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:49:06.110

```
paymentList.add( new paymentList(var1, var2, var3) ); 
```

表示您将要`Payments`在 arraylist ( `paymentList`) 中添加一个新实例。关于 var1、var2 和 var3 的类型（字符串或双精度）。这取决于您如何定义`Payments`类的构造函数。

只要您有一个 Payments 实例，您就可以添加到该 arrayList。

# java - mongodb点符号查找

> ID：13896480
> 
> 赞同：1
> 
> 时间：2012-12-15T21:41:37.050
> 
> 标签：java, mongodb

可以通过 mongo shell 查找带有点符号的记录，例如：

```
db.events.find({'events.eid':307215649389788}) 
```

我试图用java驱动程序实现同样的事情，问题是：

*   db.getCollection(collectionName).find(query) - 期望查询为 DBObject。
*   当使用'events.eid'作为键创建DBObject时，构造函数添加“”所以我得到以下结果：“'events.eid'”作为不起作用的键（也在shell中）。

我该如何克服呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:52:34.970

不太确定你在尝试什么，但这有效：

```
DBCursor cursor = coll.find(new BasicDBObject("events.eid", 307215649389788)); 
```

您需要在`"`Java 字符串中使用双引号 ( )，所以如果您使用单引号，那就是您的问题。

# javascript - Cloud Code Parse Limit 1000 通过链式克服？

> ID：13896484
> 
> 赞同：5
> 
> 时间：2012-12-15T21:42:46.310
> 
> 标签：javascript, parse-platform

我有以下函数，我用它来确定用户在记分牌中的排名。

```
Parse.Cloud.define("getUserGlobalRank", function(request, response) 
{
    var usernameString = request.params.username;
    var scoreAmount = request.params.score;

    var globalRankQuery = new Parse.Query("scoreDB");
        globalRankQuery.greaterThanOrEqualTo("score",scoreAmount);  
        globalRankQuery.descending("score");
        globalRankQuery.limit("1000");
        globalRankQuery.count(
        {
        success: function(count);
        {
            response.success(count);                
        }, 
```

…………

但是，如果符合该标准的条目超过 1000 个，则不会给出准确的响应。我想将一组 .find 方法链接在一起，随后我可以对其执行 .count 。有谁知道我怎么能做到这一点？如果你能提供一个代码示例那就太好了！

非常感谢，詹姆斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-26T00:41:19.177

以下答案适用于 Cloud Code，因为它通过在对 getUserGlobalRank() 的连续调用中使用函数参数来跟踪计数。我在类似的案例中成功地使用了这种架构。

正如 Gene Z. Ragan 在他的评论中提到的，当前接受的答案在 Cloud Code 中不起作用，因为没有“窗口”对象。

将递归卸载到常规 Javascript 函数的原因是 Parse 对 Cloud Code 函数的递归限制非常低（我已经验证对 Cloud Code 函数进行 >4 次递归调用会导致错误）。通过在 Javascript 函数中实现递归，您可以绕过 Parse 的递归限制，只要代码在允许的时间（大约 15 秒）内执行，就可以继续进行递归调用。

```
Parse.Cloud.define('getUserGlobalRank', function(request, response) {
     getUserGlobalRank({'username':request.params.username, 'score':request.params.score}, {
        success: function(count) {
            response.success(count);
        },
        error: function(error) {
            response.error(error);
        }
    }); 
});

function getUserGlobalRank(request, response) {

    var usernameString = request['username'];
    var scoreAmount = request['score'];
    var count = (request['count'])? request['count'] : 0;

    var globalRankQuery = new Parse.Query("scoreDB");
    globalRankQuery.greaterThanOrEqualTo("score", scoreAmount);  
    globalRankQuery.descending("score");
    globalRankQuery.limit(1000);
    globalRankQuery.skip(count);
    globalRankQuery.find({
        success: function(results) {
            if (results.length > 0) {
                count = count + results.length;
                getUserGlobalRank({'count':count, 'username':usernameString, 'score':scoreAmount}, response);
            }
            else { // found count of users with higher ranks
                response.success(count);
            }
        },
        error: function(error) { // query error
            response.error(error);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-05T06:51:09.730

我的目标是遍历 Parse 上的所有用户。这是我基于 keither04 的答案的答案，该答案基于 Cam Tullos 的答案 =]

```
Parse.Cloud.job("checkUsers", function (request, response) 
{
    // {} - empty params for first iteration
    getAllUsers({}, {
        success: function (users) {
            // Do stuff with users
            response.success("Loaded " + users.length + " users");
        },
        error: function (error) {
            response.error(error);
        }
    });
});

function getAllUsers (request, response) 
{
    var users = (request["users"]) ? request["users"] : [];
    var skip = users.length;
    var userQuery = new Parse.Query(Parse.User);
    userQuery.limit(1000);
    userQuery.skip(skip);
    userQuery.find({
        success: function (results) {
            if (results.length > 0) {
                var allUsers = users.concat(results);
                var params = {"users": allUsers};
                getAllUsers(params, response);
            } else {
                response.success(users);
            }
        },
        error: function (error) {
            response.error(error);
        }
    });
} 
```

PS：我很好奇是否可以使用承诺。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-24T04:56:31.950

使用计数时要小心。对于具有超过 1000 个对象的类，计数操作受超时限制。它们通常会产生超时错误或返回仅大致正确的结果。因此，最好构建您的应用程序以避免这种计数操作。我通常像这样使用跳过参数：

```
Parse.Cloud.define('getUserGlobalRank', function(request, response) {
var output = [];
var usernameString = request.params.username;
var scoreAmount = request.params.score;
var skip = (request.params['skip']) ? request.params.skip : 0;

if (skip == 0 || !window['results']) { window['results'] = []; }

var qry = new Parse.Query('scoreDB');
qry.greaterThanOrEqualTo('score', scoreAmount);
qry.descending('score');
qry.limit(1000);
qry.skip(skip);
qry.find({
    success: function (results) {
        if (results.length > 0) { // got results..
            output = output.concat(results);

            // Call the function again
            var params = request.params;
            params['skip'] = results.length;
            request.params = params;
            Parse.Cloud.run('getUserGlobalRank', request, response);

        } else { // we're done here
            response.success(output);
        }
    },
    error: function (err) {

    }
});
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-15T17:47:15.800

Parse.Query.count() 不受 Parse.com 1000 查询限制的影响。

因此，无论查询匹配多少条目，您都会返回正确的计数。

例如：

```
var userQ = new Parse.Query('_User');
userQ.count({success:function(count){console.log(count)}});
> 1512

var userQ = new Parse.Query('_User');
userQ.limit(100);
userQ.count({success:function(count){console.log(count)}});
> 1512 
```

加分 -`.limit()`将数字作为参数，而不是代码中的字符串。 [https://www.parse.com/docs/js/symbols/Parse.Query.html#limit](https://www.parse.com/docs/js/symbols/Parse.Query.html#limit)

hth

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-22T10:06:28.400

估计这应该在实现承诺方面起作用。另外，很遗憾的是，skip 只支持最多 10,000 个，但我以前错了。完全披露，我没有测试过这段代码。

```
 Parse.Cloud.job("checkUsers", function(request, response) {
        // {} - empty params for first iteration
        getAllUsers({}).then(function(users) {
            // Do stuff with users
          response.success("Loaded " + users.length + " users");
        },
        function(error) {
            response.error(error);
        });

    });

    function getAllUsers(request) {
        //
      var users = (request["users"]) ? request["users"] : [];
      var skip = users.length;
      var userQuery = new Parse.Query(Parse.User);
      userQuery.limit(1000);
      userQuery.skip(skip);

      Parse.Promise.as().then(function() {
        //
        return userQuery.find().then(null, function(error) {
            //
            return Parse.Promise.error(error);

        });     

      }).then(function(userObjects) {
        //
        if (userObjects.length > 0) {
          var allUsers = users.concat(userObjects);
          var params = {"users": allUsers};
          getAllUsers(params);
        } else {
            //
          return Parse.Promise.resolve(allUsers);
        }       

      },
      function(error) {
        //
        return Parse.Promise.reject(error);
      });

    } 
```

# perl - 扫描有序节点标识符的数据

> ID：13896486
> 
> 赞同：1
> 
> 时间：2012-12-15T21:43:00.317
> 
> 标签：perl

考虑以下数据：

```
12 45 64  
12 45 76  
12 37 39 87
12 67 90  
12 39 60 
```

在这个例子中，只有十个不同的数字。如果我有大量数据，如何在 Perl 中计算？

我有一个从 12 到 45、从 45 到 64 的链接，但没有从 12 到 64 的链接。

我们没有从 45 到 12 的路线，所以 12 的邻域是 4 (45, 37, 67, 39)，而 39 的邻域是 2 (87, 60)

如何计算此数据中所有值的邻域？

**编辑**

另一个要求是我们要忽略任何指向自身的值。例如，假设我们有这个文件：

```
1 4 3
1 2 2
2 6 7 
```

在这个例子中，1 的邻域必须是 (4, 2)

4 的邻域必须是 3

2 的邻域必须是 6（而不是 2）

我的意思是我们必须删除匹配和重复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T22:01:02.120

```
my $data = <<'END_DATA';
12 45 64 
12 45 76 
12 37 39 87 
12 67 90 
12 39 60
END_DATA

my @lines = split/\n+/, $data;

# map number the list of numbers following it in the sequence 
my %neighborhoods = (); 
for my $line ( @lines ) { 
    my @nums = split m/\s+/,$line;
    for my $i ( 0 .. $#nums - 1 ) { 
        $neighborhoods{$nums[$i]}{$nums[$i+1]} = 1; 
    }
} 

foreach my $num ( sort keys %neighborhoods ) { 
   print "num [$num] neighboorhood (" . 
         ( join "-", keys %{$neighborhoods{$num}} ) . 
         ") count [" . ( scalar keys %{$neighborhoods{$num}} ) . 
         "]\n"; 
} 
```

输出：

```
num [12] neighboorhood (67-39-37-45) count [4]   
num [37] neighboorhood (39) count [1]
num [39] neighboorhood (60-87) count [2]
num [45] neighboorhood (64-76) count [2]
num [67] neighboorhood (90) count [1] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T22:08:54.377

如果我理解正确，您想计算图中每个节点附近的节点数。我认为这可以满足您的要求。

我已经修改了我的代码，因为您已经解释了从节点到自身的向量应该被忽略。

```
use v5.10;
use warnings;

my %routes;

while (<DATA>) {
  my @nodes = /\d+/g;
  $routes{$_} //= {} for @nodes;
  while (@nodes >= 2) {
    my ($from, $to) = @nodes;
    $routes{$from}{$to}++ unless $from == $to;
    shift @nodes;
  }
}

for my $key (sort { $a <=> $b } keys %routes) {
  my $val = $routes{$key};
  printf "%d - neighbourhood size %d",
      $key,
      scalar keys %$val;
  printf " (%s)", join ', ', keys %$val if %$val;
  print "\n";
}

__DATA__
12 45 64  
12 45 76  
12 37 39 87  
12 67 90  
12 39 60
1 4 3
1 2 2
2 6 7 
```

**输出**

```
1 - neighbourhood size 2 (4, 2)
2 - neighbourhood size 1 (6)
3 - neighbourhood size 0
4 - neighbourhood size 1 (3)
6 - neighbourhood size 1 (7)
7 - neighbourhood size 0
12 - neighbourhood size 4 (67, 39, 37, 45)
37 - neighbourhood size 1 (39)
39 - neighbourhood size 2 (60, 87)
45 - neighbourhood size 2 (64, 76)
60 - neighbourhood size 0
64 - neighbourhood size 0
67 - neighbourhood size 1 (90)
76 - neighbourhood size 0
87 - neighbourhood size 0
90 - neighbourhood size 0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T22:21:06.067

使用[`Graph::Directed`](http://search.cpan.org/perldoc?Graph%3a%3aDirected)模块：

```
use Graph::Directed qw( );

my $graph = Graph::Directed->new();
while (<>) {
   my @points = split;
   $graph->add_edge(@points[$_-1, $_])
      for 1..$#points;
}

for my $vertex ($graph->vertices()) {
   my @successors = grep $_ != $vertex, $graph->successors($vertex);
   print("$vertex has ".@successors." successors: @successors\n");
} 
```

输入：

```
1 4 3
1 2 2
2 6 7 
```

输出：

```
6 has 1 successors: 7
4 has 1 successors: 3
2 has 1 successors: 6
1 has 2 successors: 4 2
3 has 0 successors:
7 has 0 successors: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T23:36:21.950

这是另一种选择：

```
use strict;
use warnings;

my ( %hash, %seen );

while (<DATA>) {
    my @nums = split;

    for my $i ( 0 .. $#nums - 1 ) {
        push @{ $hash{ $nums[$i] } }, $nums[ $i + 1 ]
          if !$seen{ $nums[$i] }{ $nums[ $i + 1 ] }++;
    }
}

for my $num ( sort { $a <=> $b } keys %hash ) {
    print "$num has " . @{ $hash{$num} } . " neighbor(s): @{$hash{$num}}\n";
}

__DATA__
12 45 64  
12 45 76  
12 37 39 87
12 67 90  
12 39 60 
```

输出：

```
12 has 4 neighbor(s): 45 37 67 39
37 has 1 neighbor(s): 39
39 has 2 neighbor(s): 87 60
45 has 2 neighbor(s): 64 76
67 has 1 neighbor(s): 90 
```

# opencv - 为什么我在使用 opencv 和 houghlines 时会出现此错误？

> ID：13896490
> 
> 赞同：0
> 
> 时间：2012-12-15T21:43:19.047
> 
> 标签：opencv, hough-transform

我正在使用 VS2010、OpenCV 2.1、Windows XP 并且出现错误：内存位置异常

**通常这是因为 NULL 中的某些内容，但事实并非如此：**

```
VideoCapture cap =  VideoCapture(); // open the default camera
cap.open("smartbeam1.avi");
if(!cap.isOpened())  // check if we succeeded
    return -1;

Mat edges,color_dst;
Mat frame ;

namedWindow("original",1);
namedWindow("edges",1);

for(;;)
{
    cap >> frame; // get a new frame from camera
    cvtColor(frame, edges, CV_BGR2GRAY);
    GaussianBlur(edges, edges, Size(7,7), 1.5, 1.5);
    Canny(edges, edges, 0, 30, 3);

//Houg
    vector<Vec2f> lines;
    **HoughLines(edges, lines, 1, CV_PI/180, 100 );//I Get Location Memory**
...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-22T17:06:21.453

**最好用**

矢量线；HoughLinesP(edges, lines, 1, CV_PI/180, threshold,minLineLengh,maxLineGap );

# ajax - 如何使 .htaccess 在 url 中忽略 /#/ 或 /!#/

> ID：13896492
> 
> 赞同：1
> 
> 时间：2012-12-15T21:43:30.450
> 
> 标签：ajax, .htaccess, url

我有一个投资组合页面，我使用 AJAX 在页面之间切换，当你在 portoflio 和一些工作时，我的 url 看起来像这样：

.../投资组合/#/work-1

但是当我将完整链接复制粘贴到浏览器中时（我在想是否有人复制粘贴链接以向某人展示作品），他进入 .../portfolio 页面而不是页面与他想要的工作，似乎它忽略了一切在 # 之后，我可以将 .htaccess 规则设置为 igrone 例如 /# in urls 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:46:40.687

不，因为服务器一开始就看不到那部分。您需要在`portfolio/`页面上使用 JavaScript 来处理它。

# mpi - mpiexec 无法启动指定的应用程序 (Raspberry pi)

> ID：13896502
> 
> 赞同：0
> 
> 时间：2012-12-15T21:43:55.123
> 
> 标签：mpi, raspberry-pi, mpiexec

对于以下 3 个命令中的每一个，我都会收到相同的错误。是我来自 ifconfig 的 IP 地址。关于出了什么问题的任何想法？昨晚效果很好。

```
mpiexec -f machinefile -n <number> hostname
mpiexec -f machinefile –n 1 hostname
mpiexec -f machinefile -n 2 ~/mpich_build/examples/cpi
--------------------------------------------------------------------------
mpiexec was unable to launch the specified application as it could not find an executable:

Executable: -f
Node: raspberrypi

while attempting to start process rank 0.
-------------------------------------------------------------------------- 
```

我正在学习来自[http://www.southampton.ac.uk/~sjc/raspberrypi/pi_supercomputer_southampton.htm的教程](http://www.southampton.ac.uk/~sjc/raspberrypi/pi_supercomputer_southampton.htm)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T04:10:36.843

我的猜测是您已经安装了 OpenMPI，就像示例中给出的与 MPICH2 一样，是吗？这并没有什么问题，但是诸如指定机器文件之类的选项有些不同。你会想要

```
mpiexec -machinefile machinefile -n 1 hostname 
```

等等

# entity-framework - 我应该如何首先使用 EF 代码模拟用户之间的友谊？

> ID：13896503
> 
> 赞同：4
> 
> 时间：2012-12-15T21:44:16.897
> 
> 标签：entity-framework, ef-code-first, entity-framework-5, entity-framework-migrations

我想弄清楚如何使用 Entity Framework (5) Code First 来表示用户之间的友谊。我最初的想法是创建一个类 Friendship，其中包含对两个 User 实例的引用，以便友谊由单独的对象表示。

```
public class Friendship
{
    public virtual int Id { get; set; }
    [Required]
    public virtual UserProfile User1 { get; set; }
    [Required]
    public virtual UserProfile User2 { get; set; }
    [Required]
    public virtual DateTime Since { get; set; }
}

[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    [Required]
    public string UserName { get; set; }
} 
```

但是，当尝试通过 EF Migrations 创建数据库时，由于 SQL 错误，我很难过：

```
Introducing FOREIGN KEY constraint 'FK_dbo.Friendships_dbo.UserProfile_User2_UserId' on table 'Friendships' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints. 
```

关于如何解决这个问题的建议将非常受欢迎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T22:41:59.580

经过一番谷歌搜索后，我设法在 SO 上找到了一个类似的问题，并且那里有一个解决方案，至少可以毫无问题地将其放入数据库中。

基本上，我将每个用户的外键添加到`Friendship`类中，使它们成为复合主键，并将第二个外键配置为在删除时不级联。我最终使用了 EF fluent 配置。

```
public class Friendship
{
    public virtual int UserId1 { get; set; }
    public virtual int UserId2 { get; set; }
    public virtual User User1 { get; set; }
    public virtual User User2 { get; set; }
    public DateTime since;
}

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    ...
    modelBuilder.Entity<Friendship>().HasKey(f => new { f.UserId1, f.UserId2 });
    modelBuilder.Entity<Friendship>()
      .HasRequired(f => f.User1)
      .WithMany()
      .HasForeignKey(f => f.UserId1);
    modelBuilder.Entity<Friendship>()
        .HasRequired(f => f.User2)
        .WithMany()
        .HasForeignKey(f => f.UserId2)
        .WillCascadeOnDelete(false);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:15:35.797

您可以自己定义外键或删除级联删除，具体取决于您的方案。请参阅此相关问题：[Entity Framework Code First: FOREIGN KEY constraint may cause cycles or multiple cascade paths](https://stackoverflow.com/questions/8216711/entity-framework-code-first-foreign-key-constraint-may-cause-cycles-or-multiple)

# python - 用于注册验证的 GAE 数据库的强一致性查询

> ID：13896506
> 
> 赞同：2
> 
> 时间：2012-12-15T21:44:24.290
> 
> 标签：python, google-app-engine, consistency, ancestor

我正在尝试为用户创建一个简单的注册。为了使该注册保持一致，我不能允许使用相同的用户名注册两个用户，因为默认查询的最终一致性。我知道即使有相当大的流量发生这种情况的几率几乎是 0，我希望我的实现是可靠的。我已经实现了应该是强一致的祖先查询，但是当我发布我的应用程序并对其进行测试时，如果我的时间正确，我可以让它注册 2 个具有相同用户名的用户。

```
def user_parent(group = 'default'):
key = ndb.Key('users', group)
return key

class User(ndb.Model):
    username = ndb.StringProperty(required = True)
    email = ndb.StringProperty(required = True)
    password = ndb.StringProperty(required = True)

@classmethod
def register(cls, username, password, email):
    return User(parent = user_parent(),
                username = username,
                password = password,
                email = email)

@classmethod
def by_name(cls, name):
    return User.query(User.username == name, ancestor = user_parent()).get()

@classmethod
def by_id(cls, uid):
    return User.get_by_id(uid, parent = user_parent()) 

@classmethod
def by_email(cls, email):
    logging.error(User.query(User.email == email, ancestor = user_parent()).get())
    return User.query(User.email == email, ancestor = user_parent()).get()

@classmethod
def login(cls, user, password):
    u = cls.by_name(user)
    if u and u.password == password:
        return u 
```

我使用 reg_submit 执行 ajax 请求，我对编程很陌生，并且怀疑这是解决它的最佳解决方案，但我的想法是在这里我通过对 User 模型类的调用进行验证。

```
 if reg_submit == 'True':
        reg_email = self.request.get('reg_email')
        reg_user = self.request.get('reg_user')
        reg_password = self.request.get('reg_password')
        reg_verify = self.request.get('reg_verify')

        valid = True
        if not valid_usr(reg_user):
            valid = False
            self.write('user')
            return
        if not valid_mail(reg_email):
            valid = False
            self.write('mail')
            return

        if User.by_email(reg_email):
            valid = False
            self.write('mail')
            return

        if User.by_name(reg_user):
            valid = False
            self.write('user')
            return

        if not valid_pass(reg_password):
            valid = False

        if reg_password != reg_verify:
            valid = False

        if valid:
            t = User.register(reg_user, reg_password, reg_email)
            t.put()
            self.login(t)
            self.redirect('/') 
```

我通过使查询高度一致的理解是，在复制我的数据库的每台机器都将更新之前，所述查询不会执行。

我如何实现强一致的查询，其中两个用户同时注册，使用相同的用户名，其中一个用户将无法这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T21:56:20.700

```
Model.get_or_insert (key_name, **kwds) 
```

> 尝试使用给定的键名获取模型类型的实体。如果存在，get_or_insert() 会简单地返回它。如果它不存在，则创建、存储和返回具有 kwds 中给定种类、名称和参数的新实体。
> 
> get 和后续（可能的） put 操作被包装在一个事务中以确保原子性。这意味着 get_or_insert() 永远不会覆盖现有实体，并且当且仅当不存在具有给定种类和名称的实体时才会插入新实体。

[获取或插入](https://developers.google.com/appengine/docs/python/ndb/modelclass#Model_get_or_insert)。

使用用户名作为`key_name`. 设置您的模型，使其具有默认值，说“new = True”，并检查当您取回模型时它是否刚刚创建或在您要求时已经存在。当您配置模型并将其保存回来时，设置“new = False”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T21:56:36.410

您需要运行检查查询并将其放入事务中。使用 NDB 执行此操作的文档在[这里](https://developers.google.com/appengine/docs/python/ndb/transactions)。

# c++ - 是否可以为模板模板参数定义别名？

> ID：13896509
> 
> 赞同：1
> 
> 时间：2012-12-15T21:44:48.587
> 
> 标签：c++, templates, c++11, template-templates

我正在尝试使用模板模板来取乐。我有以下课程：

```
template<template<class> class T, typename R> class Unit
{    
    using FullType = T<R>;
    using Ratio = R;
    //using Type = T;

    ...
}; 
```

我已将 type`R`和定义`T<R>`为成员类型`Ratio`和`FullType`. 是否可以别名`T`为`Type`？

上面的注释行在 g++ 4.7 上给了我以下错误：

```
expected nested-name-specifier before 'Type'
using-declaration for non-member at class scope
expected ';' before '=' token
expected unqualified-id before '=' token 
```

我尝试了一些或多或少的随机语法，但没有一个被编译。

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T21:48:26.273

由于`T`不是类型，因此提出的问题没有意义。但是，您可以为 设置别名`T`，例如：

```
template <template <typename> class T, typename R> class Unit
{
    template <typename U> using MyTemplate = T<U>;
    // ...

    // use e.g. MyTemplate<int> to get T<int>
}; 
```

在 C++11 之前，您需要更多的符号，如[我的这个答案中](https://stackoverflow.com/a/11723847/596781)所述（例如，标准分配器的`rebind`机械师在标准库中使用。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T13:25:38.237

您不能为`T`. 委员会讨论了以下内容以创建别名`T`（因为非常晚的 C++11 草案包含说明它是*缺陷*[报告](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1244)清理的别名）。`T`

```
// Courtesy of @KerrekSB
template <template <typename> class T, typename R> class Unit
{
    template <typename U> using MyTemplate = T<U>;
    // ...

    // use e.g. MyTemplate<int> to get T<int>
}; 
```

注意 while`MyTemplate<int>`与 的类型相同`T<int>`，`MyTemplate`即与**不同**`T`。[http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1286](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1286)上的措辞本应改变这一点，但在上次会议上，它被认为是一种非常特殊的机制，不会' 真的不适合原来的别名模板（自己的模板），它被推回审查。为了达到这种效果，`using MyTemplate = T;`未来可能会符合要求（当然，如果提出并接受）。

# vb.net - 与 wcf 服务通信的网页

> ID：13896516
> 
> 赞同：0
> 
> 时间：2012-12-15T21:45:08.820
> 
> 标签：vb.net, wcf, service

我有一个程序的想法，该程序将作为应用程序在单台计算机上运行（处理大部分工作），但主界面将基于浏览器，并可从网络上的任何计算机访问。像[sabNZB](http://sabnzbd.org/)或[vibestreamer](http://www.vibestreamer.com/)一样，它们的服务器应用程序具有基于 Web 的 UI，任何人都可以访问。

到目前为止，我的服务器应用程序中有一个 WCF 服务库（用 vb.net 编写）。如何使网页“对话”（发送数据）到服务？我需要使用 jscript 还是应该使用其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T22:38:40.993

这取决于您的 wcf 端点是如何公开的。但总的来说，一个好的解决方案可能是使用 ajax。像这样的东西（使用[jQuery](http://api.jquery.com/jQuery.ajax/)）：

```
var json = { "test": "test" }; 
$.ajax({
    type: "GET",
    url: "YourWCF.svc/Method",
    data: json,
    processData: true,
    contentType: "application/json",
    timeout: 10000, 
    dataType: "json", 
    cache: false,
    success: function (data) { //Successfull callback
    }
}); 
```

# javascript - 在 jQuery 中使用 .fadeOut() 时禁用单击

> ID：13896522
> 
> 赞同：0
> 
> 时间：2012-12-15T21:46:08.293
> 
> 标签：javascript, jquery, html

我正在构建一个纸牌游戏。当用户点击卡片时，卡片会淡出。但是，目前，有一个严重的错误。用户可以多次单击一张卡，将多个卡号添加到数组中（本质上是选择很多卡）。

我该如何解决这个问题？到目前为止，这是我的代码：

```
$(clicked_id).fadeOut('fast'); 
```

任何帮助，将不胜感激！

编辑：整个代码：

```
<script>
var cardsPicked = new Array;

var suits = ["&hearts;", "&diams;", "&clubs;", "&spades;"];
var king = 0;
var numbers = ["A", "2", "3", "4", "5", "6", "7", "8", "9", "10", "J", "Q", "K"];
var cardRules = ["Waterfall", "You", "Me", "Girls", "Thumbmaster", "Guys", "Heaven", "Mate", "Rhyme", "Catagories", "Make a rule", "Question master", "Pour your drink!"];

var currentId;

function getCard(clicked_id) {

    clicked_id = "#" + clicked_id;

    $(clicked_id).fadeOut('fast');

    var newCard = Math.floor((Math.random() * 13) + 1);

    var newSuit = Math.floor((Math.random() * 4) + 1);
    var currentCard;
    var x = document.getElementById("pick");
    var rules = document.getElementById("rules");
    var kings = document.getElementById("kings");
    var currentCards = document.getElementById("currentCard");

    if (cardsPicked.indexOf(numbers[newCard - 1] + " " + suits[newSuit - 1]) == -1) {

        if (numbers[newCard - 1] == "K" && king < 4) {
            king = king + 1;
        }
        if (king == 4) {
            king = "All kings found!";
            alert("Fourth king picked. Down the jug!");
        }
        cardsPicked.push(numbers[newCard - 1] + " " + suits[newSuit - 1]);
        for (count = 0; count < cardsPicked.length; count++)
        currentRule = cardRules[newCard - 1];

        x.innerHTML = cardsPicked;
        currentCards.innerHTML = numbers[newCard - 1] + " " + suits[newSuit - 1];
        rules.innerHTML = currentRule;
        kings.innerHTML = king;

    } else {

        getCard();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:48:30.807

尝试这个

```
$(clicked_id).off().fadeOut('fast'); 
```

* * *

如果事件被 inline 调用`onclick`：

```
$(clicked_id).prop("onclick", "").off().fadeOut('fast'); 
```

[**演示**](http://jsfiddle.net/G5SVC/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:55:08.930

您应该首先删除元素上的单击事件，然后使用回调函数执行淡出效果，该回调函数将重新附加单击事件。

```
$('#clicked_id').off('click').fadeOut('fast', function () {
    $('#clicked_id').on('click');
}); 
```

这是完全未经测试的，只是一个理论，但它可能会奏效！

# java - 遍历 hashmap 并创建唯一的对象 - 试图防止重复

> ID：13896528
> 
> 赞同：0
> 
> 时间：2012-12-15T21:46:58.373
> 
> 标签：java, hashmap

我在方法部分上方的评论中解释了我要做什么：

```
public int addPatron(String name) throws PatronException {
    int i = 0;
    //1\. Iterate through a hashmap, and confirm the new name I am trying to add to the     record doesn't already exist in the hashmap
    for (Map.Entry<Integer, Patron> entry : patrons.entrySet()) {
        Patron nameTest = entry.getValue();
        //2\. If the name I am trying to add already exists, we want to throw an exception saying as much.
        if (nameTest.getName() == name) {
            throw new PatronException ("This patron already exists");
            //3\. If the name is unique, we want to get the largest key value (customer number) already in the hash, an increment by one.
        } else if (nameTest.getName() != name) {
            Map.Entry<Integer,Patron> maxEntry = null;
            for(Map.Entry<Integer, Patron> entryCheck : patrons.entrySet()) {
                if (maxEntry == null || entryCheck.getKey() > maxEntry.getKey()) {
                    maxEntry = entryCheck;
                    i = maxEntry.getKey();
                    i++;
                }
            }

        } else {
            throw new PatronException("Something's not working!");
        }
        //4\. If everything is ok up to this point, we want to us the name and the new customer id number, and use those to create a new Patron object, which then gets added to a hashmap for this class which contains all the patrons.
        Patron newPatron = new Patron(name, i);
        patrons.put(i, newPatron);
    }
    return i;
} 
```

当我尝试运行一个简单的单元测试时，如果我连续两次成功为 addPatron 添加相同的名称，该单元测试将失败，测试失败。

```
try {
    testLibrary.addPatron("Dude");
    testLibrary.addPatron("Dude");
    fail("This shouldn't have worked"); 
```

测试失败，告诉我 addPatron 方法能够使用相同的名称两次。

@乔恩斯基特：

我的赞助人课程如下所示：

```
public class Patron {

//attributes
private String name = null;
private int cardNumber = 0;

//operations
public Patron (String name, int cardNumber){
    this.name = name;
    this.cardNumber = cardNumber;
}

public String getName(){
    return name;

}

public int getCardNumber(){
    return cardNumber;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T21:53:44.357

正如其他人所说，使用`==`for 比较字符串几乎肯定是不合适的。但是，它实际上不应该在您的测试用例中引起问题，因为您两次使用相同的常量字符串，所以`==`应该可以工作。当然，您仍然应该修复要使用的代码`equals`。

也不清楚`Patron`构造函数或`getName`方法做了什么——其中任何一个都可能导致问题（例如，如果他们创建了字符串的*新*副本——这会导致你的测试失败，但通常也是不必要的）。

让我更担心的是这条评论：

```
// 3\. If the name is unique, we want to get the largest key value (customer number) 
// already in the hash, an increment by one. 
```

此评论*在*主循环中。所以到那时我们不知道这个名字是唯一的——我们只知道它*在这个迭代中与顾客*的名字不匹配。

更令人担忧的是——我刚刚注意到这一点——你*也在迭代块中*执行了添加。在我看来，你应该有更多这样的东西：

```
public int addPatron(String name) throws PatronException {
    int maxKey = -1;

    for (Map.Entry<Integer, Patron> entry : patrons.entrySet()) {
        if (entry.getValue().getName().equals(name)) {
            // TODO: Consider using IllegalArgumentException
            throw new PatronException("This patron already exists");
        }
        maxKey = Math.max(maxKey, entry.getKey());
    }
    int newKey = maxKey + 1;
    Patron newPatron = new Patron(name, newKey);
    patrons.put(newKey, newPatron);
    return newKey;
} 
```

此外，听起来你*真的*想要一张从名字到赞助人的地图，可能还有从 id 到赞助人的地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:49:54.613

你需要使用equals来比较java中的String对象，而不是==。所以替换：

```
if (nameTest.getName() == name) { 
```

和：

```
if (nameTest.getName().equals(name)) { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T21:52:36.153

尝试使用

```
nameTest.getName().equals(name) 
```

代替

```
nameTest.getName() == name 
```

因为现在您正在比较引用而不是字符串的值。 [在这里解释](http://www.leepoint.net/notes-java/data/strings/12stringcomparison.html)

**再次查看您的代码**

好吧，我再次查看了您的代码，问题是，您的 HashMap 在测试开始时为空。所以循环永远不会运行 ==> 永远不会添加赞助人或抛出异常。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-15T21:50:12.007

问题的原因是您如何使用比较运算符`==`。

当您对两个对象使用此运算符时，您测试的是该变量指向相同的[引用](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)。

要测试两个对象的值是否相等，您应该使用`equals()`方法或`compareTo`如果可用。

对于 String 类，调用 of`equals`就足以检查是否存储[更多](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)相同的字符。

[什么是equals方法？](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)

比较 Object 的值 问题在于如何比较名称。

# matlab - matlab中的2D卷积-代码优化

> ID：13896531
> 
> 赞同：6
> 
> 时间：2012-12-15T21:47:25.520
> 
> 标签：matlab, image-processing, optimization, convolution

这是我们在图像处理作业中的练习。我的代码工作正常。我想在代码优化方面获得一些帮助。

```
function C = convolve_slow(A,B)
(file name is accordingly convolve_slow.m ) 
This routine performs convolution between an image A and a mask B.
Input:      A - a grayscale image (values in [0,255]) 
            B - a grayscale image (values in [0,255]) serves as a mask in the convolution.
Output:     C - a grayscale image (values in [0,255]) - the output of the convolution. 
                      C is the same size as A.

Method:  Convolve A with mask B using zero padding. Assume the origin of B is at 
     floor(size(B)/2)+1.
Do NOT use matlab convolution routines (conv,conv2,filter2 etc). 
Make the routine as efficient as possible: Restrict usage of for loops which are expensive (use matrix multiplications and matlab routines such as dot etc).
To simplify and reduce ifs, you should pad the image with zeros before starting your convolution loop.
Do not assume the size of A nor B (B might actually be larger than A sometimes). 
```

这是我们的解决方案

```
function [ C ] = convolve_slow( A,B )
%This routine performs convolution between an image A and a mask B.
% Input:      A - a grayscale image (values in [0,255])
%             B - a grayscale image (values in [0,255]) serves as a mask in the convolution.
% Output:     C - a grayscale image (values in [0,255]) - the output of the convolution. 
%             C is the same size as A.
% 
% Method:  Convolve A with mask B using zero padding. Assume the origin of B is at floor(size(B)/2)+1.
% init C to size A with zeros
C = zeros(size(A));
% make b xy-reflection and vector
vectB = reshape(flipdim(flipdim(B,1),2)' ,[] , 1);
% padding A with zeros
paddedA = padarray(A, [floor(size(B,1)/2) floor(size(B,2)/2)]);
% Loop over A matrix:
for i = 1:size(A,1)
    for j = 1:size(A,2)
        startAi = i;
        finishAi = i + size(B,1) - 1;
        startAj = j;
        finishAj = j + size(B,2) - 1;
        vectPaddedA = reshape(paddedA(startAi :finishAi,startAj:finishAj)',1,[]);
        C(i,j) = vectPaddedA* vectB;
    end
end
end 
```

因为我是图像处理和 Matlab 的新手。你能帮我优化代码吗，特别是基于矩阵的操作。可以不使用循环吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T23:38:48.833

如果没有明确地写出代码，我可以看到一种将其归结为一个主`for`循环的方法。基本上，通过将 A 和 B 的每一列展开为一个向量（这就是它在 MATLAB 内部存储的方式），将矩阵 A 和 B 视为列向量。然后每个`(i,j)`坐标`A`都可以映射到一个线性索引`k`（例如使用函数`sub2ind`）。然后，对于 A 主体内的每个线性索引（忽略填充），计算与该线性索引周围的子矩阵相对应的线性索引列表（这可能是这里最难的部分）。`A( theseIndices )`然后计算和的点积`B(:)`。使用这种方法，您只需遍历`A`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T15:38:31.620

不知道这是否更快，但至少没有 for 循环（这并不意味着在最近的 matlab 版本中它必须更快）

```
function A = tmpConv(A,B)

    filterSize = size(B,1);
    filterSize2 = floor(filterSize/2);
    inputSize = size(A);

    A = padarray(A,[filterSize2 filterSize2]);

    f = repmat(B(:),[1 inputSize(1)*inputSize(2)]);
    A = im2col(A,[filterSize filterSize]);
    A = reshape(sum(A.*f),inputSize); 
```

# asp.net - WCF 工作流服务应用程序中参数类型的奇怪变化

> ID：13896535
> 
> 赞同：0
> 
> 时间：2012-12-15T21:48:01.437
> 
> 标签：asp.net, visual-studio-2010, wcf, workflow

我将解释我到目前为止所做的事情。我正在使用VS2010。首先，我创建了一个 ASP.NET Web 服务应用程序（framewkork 3.5），其中包含具有以下操作的服务：

```
 [WebMethod]
    public Boolean ShoppingTripNeeded(DateTime d)
    {
        DBConnection db = new DBConnection();
        return db.ShoppingTripNeeded(d);
    }

    [WebMethod]
    public String[] ShopsToVisit(DateTime d)
    {
        DBConnection db = new DBConnection();
        return db.ShopsToVisit(d);
    }

    [WebMethod]
    public Item[] ItemsToBuy(DateTime d, String shop) 
    {
        DBConnection db = new DBConnection();
        return db.ItemsToBuy(d, shop);
    } 
```

现在我正在创建一个 WCF 工作流服务应用程序，我想在其中依次调用上面的 3 个方法，所以我在这里为我的服务 wsdl 添加了一个服务引用：

[http://awtassignment3-shoppinglistservice1.cloudapp.net/Service1.asmx?WSDL](http://awtassignment3-shoppinglistservice1.cloudapp.net/Service1.asmx?WSDL)

此引用添加了 3 个操作。第一个“ShoppingTripNeeded”似乎没问题（接收日期时间并返回布尔值），但对于其他操作，参数发生了奇怪的变化......

例如，操作 ShopsToVisit 现在请求**ShopsToVisitRequestBody**并返回**ShopsToVisitResponseBody** ...我不知道为什么会这样！因为第一次手术没问题...

此外，由于我正在使用工作流程，因此我无法“玩”这种类型来了解发生了什么......

你有什么猜测吗？任何帮助都会很好...

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:11:35.923

您使用 ASMX 有什么原因吗？WCF 已取代 Web 服务成为更高级的服务通信技术。请参阅[SO：Web 服务 — WCF 与标准](https://stackoverflow.com/questions/6666/web-services-wcf-vs-standard)，[SO：Web 服务与 WCF 服务](https://stackoverflow.com/questions/351334/web-service-vs-wcf-service)

要回答您的问题：

WF 3.5 将使用非原语的请求/响应消息模式（例如 bool、int）包装任何操作。String[] 不是原始类型，因此它将被包装。

WF 4.0 添加服务引用（对话框）将默认将所有操作包装在请求/响应消息对中，无论这是原始类型还是复杂类型。最重要的是，它将为它发现的每个操作创建 Activity。

使用请求/响应消息模式允许控制消息形状，特别是消息头。

以供参考：

[SO：我什么时候应该使用 Message Contracts 而不是 DataContract，为什么？](https://stackoverflow.com/questions/1085861/when-should-i-use-message-contracts-instead-of-datacontract-and-why)

[MSDN：消息契约](http://msdn.microsoft.com/en-us/library/ms730255.aspx)

# parallel-processing - 您如何使用 IPython Parallel 查看已提交任务的详细信息？

> ID：13896539
> 
> 赞同：1
> 
> 时间：2012-12-15T21:48:30.603
> 
> 标签：parallel-processing, ipython

我正在使用负载平衡视图提交任务。

我希望能够从不同的客户端连接并通过提交的函数和参数查看剩余的任务。

例如：

```
def someFunc(parm1, parm2):
    return parm1 + parm2

lbv = client.load_balanced_view()
async_results = []
for parm1 in [0,1,2]:
    for parm2 in [0,1,2]:
        ar = lbv.apply_async(someFunc, parm1, parm2)
        async_results.append(ar) 
```

从我提交的客户端，我可以根据它们在 async_results 数组中的顺序找出哪个结果与哪个函数调用一起使用。

我想知道的是，如果我使用 queue_status 或 history 命令从不同的客户端检索结果以获取 msg_id 并使用 client.get_result 命令检索结果，我如何找出与 msg_id 关联的函数和参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:50:20.037

这些东西被腌制，并存储在集线器数据库的“缓冲区”中。如果您想查看它们，您必须从数据库中获取这些缓冲区，然后解压缩它们。

假设您有一个 msg_ids 列表，您可以通过以下方式为所有这些请求重建 f、args 和 kwargs：

```
# msg_ids is a list of msg_id, however you decide to get that
from IPython.zmq.serialize import unpack_apply_message

# load the buffers from the hub's database:
query = rc.db_query({'msg_id' : {'$in' : msg_ids } }, keys=['msg_id', 'buffers'])
# query is now a list of dicts with two keys - msg_id and buffers

# now we can generate a dict by msg_id of the original function, args, and kwargs:
requests = {}
for q in query:
    msg_id = 
    f, args, kwargs = unpack_apply_message(q['buffers'])
    requests[q['msg_id']] = (f, args, kwargs) 
```

由此，您应该能够根据任务的功能和参数来关联任务。

一个警告：由于 f 已经通过酸洗，通常比较`f is original_f`会是 False，所以你必须做更松散的比较，例如`f.__module__ + f.__name__`或类似。

更详细一点，[这里有一个示例](http://nbviewer.ipython.org/4313799/)，它生成一些请求，然后根据函数和参数对它们进行重构和关联，这些函数和参数对原始请求的外观有一些先验知识。

# c# - HtmlAgilityPack 获取 DIV 中的所有链接

> ID：13896540
> 
> 赞同：7
> 
> 时间：2012-12-15T21:48:42.677
> 
> 标签：c#, .net, xml, xpath, html-agility-pack

我希望能够从 div 中获取 2 个链接。

目前我可以选择一个，但是当有更多时它似乎不起作用。

```
HtmlWeb web = new HtmlWeb();
        HtmlDocument doc = web.Load(url);

HtmlNode node = doc.DocumentNode.SelectSingleNode("//div[@class='myclass']");

            if (node != null)
            {
                foreach (HtmlNode type in node.SelectNodes("//a@href"))
                {
                    recipe.type += type.InnerText;
                }
            }
            else
                recipe.type = "Error fetching type."; 
```

试图从这段 HTML 中获取它：

```
<div class="myclass">
<h3>Not Relevant Header</h3>
    <a href="#">This text</a>, 
    <a href="#">and this text</a>
</div> 
```

任何帮助表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-15T22:00:35.920

```
var div = doc.DocumentNode.SelectSingleNode("//div[@class='myclass']");
if(div!=null)
{
     var links = div.Descendants("a")
                    .Select(a => a.InnerText)
                    .ToList();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T22:20:40.110

使用这个 XPath：

```
//div[@class = 'myclass']//a 
```

它抓取with`a`中的所有后代元素。`div``class = 'myclass'`

并且`//a@href`是不正确的 XPath。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T00:08:22.727

**使用**：

```
//div[contains(concat(' ', @class, ' '), ' myclass ')]//a 
```

这将选择任何其属性包含类名的任何`a`元素的后代元素。`div``class``"myclass"`

类名可以是单一的，或者属性也可以包含其他类名。在这种情况下，类名可能是开始的，也可能是最后一个，或者可能被其他类名包围——上面的 XPath 表达式在所有这些不同的情况下都正确地选择了想要的节点。

# c++ - 如何从char数组中删除前4个字符

> ID：13896542
> 
> 赞同：0
> 
> 时间：2012-12-15T21:48:44.423
> 
> 标签：c++, char, arrays

我目前的代码是：

```
char* message = new char[256];

    cin.getline(message, 256);
if(message[0] == 's' && message[1] == 'a' && message[2] == 'y' && message[3] == ' ')
{
    cout << message << endl;
} 
```

我正在尝试设置它，所以它只会在前 4 个字符是“say”时打印，并且它工作正常但是我需要想办法让它删除“say”，所以它只显示这个人想要什么说得好。请记住我正在做的事情必须是一个字符，我不能在我所处的情况下使用字符串。如果有人可以帮助我弄清楚如何做到这一点，我将非常感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T21:50:34.687

只需打印`message + 4`

```
cout << (message + 4) << endl; 
```

然后重写它以使用 std::string。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T21:51:29.743

这是您的 C 代码的 C++ 版本：

```
std::string message;
cin >> message;
if ( message.substr(0,4) == "say " )
     cout << message.substr(4); 
```

说真的，选一个。不要再相信 C 是 C++。如果您正在编写 C++，请编写 C++。

# jquery - IE7-8好像看不到jQuery角插件

> ID：13896552
> 
> 赞同：0
> 
> 时间：2012-12-15T21:50:40.767
> 
> 标签：jquery

我正在使用 malsup 的 jQuery Corners 插件，以便在每个浏览器中都有圆角。到目前为止 - 它对我来说很好。但现在 - 它没有。它根本没有 - 我不知道如何描述它。

也许您知道在旧 IE 和现代浏览器上都有圆角的其他方法？

HTML：

```
<nav id="mainMenu" class="container_24">
    <ul>
        <li><a href="">One</a></li>
        <li><a href="">Two ›&lt;/a></li>
        <li><a href="">Three ›&lt;/a></li>
        <li class="search">
            <form action="">
                <input type="text" placeholder="Search ›">
            </form>
        </li>
        <li><a href="">‹ Help</a></li>
    </ul>
</nav> 
```

CSS（少）：

```
nav#mainMenu {
    margin-top: -9px;
    background: #fafafa;
    height: 62px;
    border-bottom: 3px solid #e2e2e2;
    -webkit-box-shadow: 0px 0px 10px 0px rgba(000, 000, 000, 0.25);
    box-shadow: 0px 0px 10px 0px rgba(000, 000, 000, 0.25);

    ul {
        list-style: none;
        margin: 0;
        padding: 0;

        li:last-child {
            a {
                border: 0;
            }
        }

        li {
            float: left;

            a, input {
                display: block;
                font: bold 12px/62px "Source Sans Pro", Arial, sans-serif;
                color: #4b4b4b;
                text-transform: uppercase;
                padding: 0 20px;
                border-right: 1px solid #e2e2e2;
            }
            a:hover, input:focus {
                border-bottom: 3px solid #cc624a;
                text-decoration: none;
                outline: 0
            }

            form {
                input {
                    border: 0;
                    border-right: 1px solid #e2e2e2;
                    height: 62px;
                    background: transparent;
                }
            }
        }
    }
} 
```

JS：

```
$('nav#mainMenu').corner('5px');
$('nav#mainMenu ul li:first-child a').corner('5px bl');
$('nav#mainMenu ul li:last-child a').corner('5px br'); 
```

我的[小提琴在这里](http://jsfiddle.net/c48hS/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:11:33.733

根据我的阅读，jQuery Corners 插件有这样的问题，包括背景和边框。所以，我用[CSS3 PIE](http://css3pie.com/)代替了这个，效果很好。

# javascript - 带有嵌套数组的微模板

> ID：13896556
> 
> 赞同：3
> 
> 时间：2012-12-15T21:51:17.720
> 
> 标签：javascript, arrays, nested-loops

我正在尝试将微模板合并到我正在构建的插件中。我已经把一切都做好了，但是当涉及到数据中的嵌套数组时我遇到了问题。非常感谢您的帮助。这是剥离的代码：

```
var locations = [{
            "name": "Disneyland California",
            "address": "1313 North Harbor Boulevard"
        },
        {
            "name": "Walt Disney World Resort",
            "address": "1503 Live Oak Ln"
        }],

        tmplData = [{
                    location: locations[0],
                    foo: "bar"
                }],

        template = "Shipping From:<br><b>{{location.name}}, {{foo}}",
        attachTemplateToData;

        attachTemplateToData = function(template, data) {
            var i = 0,
                len = data.length,
                fragment = '';
            function replace(obj) {
                var t, key, reg;
                for (key in obj) {
                    reg = new RegExp('{{' + key + '}}', 'ig');
                    t = (t || template).replace(reg, obj[key]);
                }       
                return t;
            }
            for (; i < data.length; i++) {
                fragment += replace(data[i]);
            }   
            console.log(fragment);
        };  
        attachTemplateToData(template, tmplData); 
```

日志：

```
bar,{{location.name}} 
```

正如您在 console.log 中看到的那样，'foo' 出来就好了，但我还需要获取 'location.name'（“加州迪斯尼乐园”）来渲染。我知道这将是一个嵌套循环，但我终其一生都无法弄清楚语法。顺便说一句，模板解决方案来自这里： http: [//net.tutsplus.com/tutorials/javascript-ajax/create-a-makeshift-javascript-templating-solution/](http://net.tutsplus.com/tutorials/javascript-ajax/create-a-makeshift-javascript-templating-solution/) 谢谢！

编辑::: 我希望使位置对象的任何属性都能够放入模板中。因此，例如，如果用户决定他们想要将locations.city 或locations.foo 添加到数组中，那么在模板中，他们只需要使用{{location.city}} 或{{location.foo}}。我已经能够通过使用 jQuery 的 tmpl 插件来实现这一点，但我不需要它所提供的所有东西。我想要一个像我一样非常精简的版本，只处理上述实例。这是我使用 tmpl 插件（有效）所做的：

```
tmplData = [{
                    locations: settings.locations[i]
                }];

            var tmplMarkup = "Shipping From:<br><b>${locations.name}, ${locations.city}, ${locations.state}</b>";
            $.template("deTemplate", tmplMarkup);
            $.tmpl("deTemplate", tmplData).appendTo("#deResults"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:57:09.793

而不是这个：

```
 var locations = [{
        "name": "Disneyland California",
        "address": "1313 North Harbor Boulevard"
    },
    {
        "name": "Walt Disney World Resort",
        "address": "1503 Live Oak Ln"
    }],

    tmplData = [{
                location: locations[0],
                foo: "bar"
            }],

    template = "Shipping From:<br><b>{{location.name}}, {{foo}}",
    attachTemplateToData; 
```

试试这个：

```
 var locations = [{
        name: "Disneyland California",
        address: "1313 North Harbor Boulevard"
    },
    {
        name: "Walt Disney World Resort",
        address: "1503 Live Oak Ln"
    }],

    tmplData = [{
                location: locations[0].name,
                foo: "bar"
            }],

    template = "Shipping From:<br><b>{{location}}, {{foo}}",
    attachTemplateToData; 
```

真的只是 .name 需要大约 4 行！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T00:11:26.977

您需要更改模板识别以不仅`{{prop}}`在匹配代码中匹配，而且在匹配代码中也匹配。`{{prop.something}}`

您可以`if`使用新的正则表达式添加另一个语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T03:16:42.043

感谢您的输入*vittore*，我终于弄清楚了代码。这是我需要的额外 if 语句和正则表达式，我还发现我也需要 .hasOwnProperty 函数：

```
for(subKey in obj[key]){
                        if (obj[key].hasOwnProperty(subKey)) {
                            reg = new RegExp('{{'+key+'.'+subKey+'}}');
                            t = (t || template).replace(reg, obj[key][subKey]);
                        }
                    } 
```

这是完成的代码：

```
var locations = [{
        "name": "Disneyland California",
        "address": "1313 North Harbor Boulevard"
    },
    {
        "name": "Walt Disney World Resort",
        "address": "1503 Live Oak Ln"
    }],

    tmplData = [{
                location: locations[1],
                foo: "bar"
            }],

    template = "Shipping From:<br><b>{{location.address}}, {{foo}}",
    attachTemplateToData;

    attachTemplateToData = function(template, data) {
        var i = 0,
            j = 0,
            len = data.length,
            fragment = '';
        function replace(obj) {
            var t, key, subKey, subSubKey, reg;
            for (key in obj) {
                if (obj.hasOwnProperty(key)) {
                    reg = new RegExp('{{' + key + '}}', 'ig');
                    t = (t || template).replace(reg, obj[key]);
                    for(subKey in obj[key]){
                        if (obj[key].hasOwnProperty(subKey)) {
                            reg = new RegExp('{{' + key + '.' + subKey + '}}','ig');
                            t = (t || template).replace(reg, obj[key][subKey]);
                        }
                    }
                }
            }       
            return t;
        }
        for (; i < data.length; i++) {
            fragment += replace(data[i]);
        }   
        console.log(fragment);
    };  
    attachTemplateToData(template, tmplData); 
```

# cuda - 在 CUDA 中乘以矩形矩阵

> ID：13896560
> 
> 赞同：6
> 
> 时间：2012-12-15T21:51:34.143
> 
> 标签：cuda

在这个作业中，我需要使用 CUDA C 完成将两个矩形矩阵相乘的代码。完成代码后，我提交了解决方案，当矩阵为正方形时，数据集的解决方案是正确的，而结果与预期不匹配当矩阵不是正方形时的值。

这是我添加缺失部分后的代码：

```
#include    <wb.h>

#define wbCheck(stmt) do {                             \
    cudaError_t err = stmt;                            \
    if (err != cudaSuccess) {                          \
        wbLog(ERROR, "Failed to run stmt ", #stmt);    \
        return -1;                                     \
    }                                                  \
} while(0)

// Compute C = A * B
__global__ void matrixMultiply(float * A, float * B, float * C,
               int numARows, int numAColumns,
               int numBRows, int numBColumns,
               int numCRows, int numCColumns) {
   //@@ Insert code to implement matrix multiplication here
   int Row = blockIdx.y * blockDim.y + threadIdx.y;
   int Col = blockIdx.x * blockDim.x + threadIdx.x;
   if (numAColumns != numBRows) return ;
   if ((Row < numARows) && (Col < numBColumns)){
       float Cvalue = 0;
       for (int k = 0 ; k < numAColumns ; ++k )
       Cvalue += A[Row*numAColumns + k] * B[k * numBRows + Col];
       C[Row*numAColumns + Col] = Cvalue;
     }

    }

int main(int argc, char ** argv) {
   wbArg_t args;
   float * hostA; // The A matrix
   float * hostB; // The B matrix
   float * hostC; // The output C matrix
   float * deviceA;
   float * deviceB;
   float * deviceC;
   int numARows; // number of rows in the matrix A
   int numAColumns; // number of columns in the matrix A
   int numBRows; // number of rows in the matrix B
   int numBColumns; // number of columns in the matrix B
   int numCRows; // number of rows in the matrix C (you have to set this)
   int numCColumns; // number of columns in the matrix C (you have to set this)

   args = wbArg_read(argc, argv);

   wbTime_start(Generic, "Importing data and creating memory on host");
   hostA = (float *) wbImport(wbArg_getInputFile(args, 0), &numARows, &numAColumns);
   hostB = (float *) wbImport(wbArg_getInputFile(args, 1), &numBRows, &numBColumns);
   //@@ Set numCRows and numCColumns  
   numCRows = 0;
   numCColumns = 0;
   numCRows = numARows;
   numCColumns = numBColumns;  
   //@@ Allocate the hostC matrix
   hostC = (float*) malloc(sizeof(float)*numCRows*numCColumns);  
   wbTime_stop(Generic, "Importing data and creating memory on host");

   wbLog(TRACE, "The dimensions of A are ", numARows, " x ", numAColumns);
   wbLog(TRACE, "The dimensions of B are ", numBRows, " x ", numBColumns);

   wbTime_start(GPU, "Allocating GPU memory.");
   //@@ Allocate GPU memory here
   cudaMalloc((void**)&deviceA ,sizeof(float)*numARows*numAColumns );
   cudaMalloc((void**)&deviceB , sizeof(float)*numBRows*numBColumns);
   cudaMalloc((void**)&deviceC , sizeof(float)*numCRows*numCColumns);  

   wbTime_stop(GPU, "Allocating GPU memory.");

   wbTime_start(GPU, "Copying input memory to the GPU.");
   //@@ Copy memory to the GPU here

   cudaMemcpy(deviceA, hostA, sizeof(float)*numARows*numAColumns, cudaMemcpyHostToDevice);
   cudaMemcpy(deviceB, hostB, sizeof(float)*numBRows*numBColumns, cudaMemcpyHostToDevice);
   wbTime_stop(GPU, "Copying input memory to the GPU.");

   //@@ Initialize the grid and block dimensions here

   dim3 DimGrid(numARows / 8 , numBColumns / 8, 1);
   dim3 DimBlock(8 , 8, 1);

   wbTime_start(Compute, "Performing CUDA computation");

   //@@ Launch the GPU Kernel here
   matrixMultiply<<<DimGrid , DimBlock>>>(deviceA , deviceB , deviceC , numARows , numAColumns, numBRows ,numBColumns , numCRows , numCColumns);  

   cudaThreadSynchronize();
   wbTime_stop(Compute, "Performing CUDA computation");

   wbTime_start(Copy, "Copying output memory to the CPU");
   //@@ Copy the GPU memory back to the CPU here
   cudaMemcpy(hostC, deviceC, sizeof(float)*numCRows*numCColumns , cudaMemcpyDeviceToHost);  

   wbTime_stop(Copy, "Copying output memory to the CPU");

   wbTime_start(GPU, "Freeing GPU Memory");
   //@@ Free the GPU memory here

   cudaFree(deviceA);
   cudaFree(deviceB);
   cudaFree(deviceC);
   wbTime_stop(GPU, "Freeing GPU Memory");

   wbSolution(args, hostC, numCRows, numCColumns);

   free(hostA);
   free(hostB);
   free(hostC);

   return 0;
} 
```

我希望你能帮助我找出哪个部分不正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T16:28:43.300

在 Ira、Ahmad、ram 和 Oli Fly 的帮助下，我得到了正确答案如下：

```
#include    <wb.h>

#define wbCheck(stmt) do {                                 \
        cudaError_t err = stmt;                            \
        if (err != cudaSuccess) {                          \
            wbLog(ERROR, "Failed to run stmt ", #stmt);    \
            return -1;                                     \
        }                                                  \
    } while(0)

// Compute C = A * B
__global__ void matrixMultiply(float * A, float * B, float * C,
                   int numARows, int numAColumns,
                   int numBRows, int numBColumns,
                   int numCRows, int numCColumns) {
    //@@ Insert code to implement matrix multiplication here
    int Row = blockIdx.y * blockDim.y + threadIdx.y;
    int Col = blockIdx.x * blockDim.x + threadIdx.x;
    if (numAColumns != numBRows) return;
    if ((Row < numARows) && (Col < numBColumns)){
    float Cvalue = 0;
    for (int k = 0; k < numAColumns; ++k)
    Cvalue += A[Row*numAColumns + k] * B[k * numBColumns + Col];
    C[Row*numCColumns + Col] = Cvalue;
  }

}

int main(int argc, char ** argv) {
    wbArg_t args;
    float * hostA; // The A matrix
    float * hostB; // The B matrix
    float * hostC; // The output C matrix
    float * deviceA;
    float * deviceB;
    float * deviceC;
    int numARows; // number of rows in the matrix A
    int numAColumns; // number of columns in the matrix A
    int numBRows; // number of rows in the matrix B
    int numBColumns; // number of columns in the matrix B
    int numCRows; // number of rows in the matrix C (you have to set this)
    int numCColumns; // number of columns in the matrix C (you have to set this)

    args = wbArg_read(argc, argv);

    wbTime_start(Generic, "Importing data and creating memory on host");
    hostA = (float *) wbImport(wbArg_getInputFile(args, 0), &numARows, &numAColumns);
    hostB = (float *) wbImport(wbArg_getInputFile(args, 1), &numBRows, &numBColumns);
    //@@ Set numCRows and numCColumns  
    numCRows = 0;
    numCColumns = 0;
    numCRows = numARows;
    numCColumns = numBColumns;  
    //@@ Allocate the hostC matrix
    hostC = (float*) malloc(sizeof(float)*numCRows*numCColumns);  
    wbTime_stop(Generic, "Importing data and creating memory on host");

    wbLog(TRACE, "The dimensions of A are ", numARows, " x ", numAColumns);
    wbLog(TRACE, "The dimensions of B are ", numBRows, " x ", numBColumns);

    wbTime_start(GPU, "Allocating GPU memory.");
    //@@ Allocate GPU memory here
    cudaMalloc((void**)&deviceA ,sizeof(float)*numARows*numAColumns );
    cudaMalloc((void**)&deviceB , sizeof(float)*numBRows*numBColumns);
    cudaMalloc((void**)&deviceC , sizeof(float)*numCRows*numCColumns);  

    wbTime_stop(GPU, "Allocating GPU memory.");

    wbTime_start(GPU, "Copying input memory to the GPU.");
    //@@ Copy memory to the GPU here

    cudaMemcpy(deviceA, hostA, sizeof(float)*numARows*numAColumns, cudaMemcpyHostToDevice);
    cudaMemcpy(deviceB, hostB, sizeof(float)*numBRows*numBColumns, cudaMemcpyHostToDevice);
    wbTime_stop(GPU, "Copying input memory to the GPU.");

    //@@ Initialize the grid and block dimensions here

    dim3 DimGrid((numCColumns - 1) / 8 + 1, (numCRows - 1) / 8 + 1, 1);
    dim3 DimBlock(8 , 8, 1);

    wbTime_start(Compute, "Performing CUDA computation");

    //@@ Launch the GPU Kernel here
    matrixMultiply<<<DimGrid , DimBlock>>>(deviceA , deviceB , deviceC , numARows , numAColumns, numBRows ,numBColumns , numCRows , numCColumns);  

    cudaThreadSynchronize();
    wbTime_stop(Compute, "Performing CUDA computation");

    wbTime_start(Copy, "Copying output memory to the CPU");
    //@@ Copy the GPU memory back to the CPU here
    cudaMemcpy(hostC, deviceC, sizeof(float)*numCRows*numCColumns , cudaMemcpyDeviceToHost);  

    wbTime_stop(Copy, "Copying output memory to the CPU");

    wbTime_start(GPU, "Freeing GPU Memory");
    //@@ Free the GPU memory here

    cudaFree(deviceA);
    cudaFree(deviceB);
    cudaFree(deviceC);
    wbTime_stop(GPU, "Freeing GPU Memory");

    wbSolution(args, hostC, numCRows, numCColumns);

    free(hostA);
    free(hostB);
    free(hostC);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T10:14:21.287

代替 ： `for (int k = 0 ; k < numAColumns ; ++k ) Cvalue += A[Row*numAColumns + k] * B[k * numBRows + Col]; C[Row*numAColumns + Col] = Cvalue; }`

和 `for (int k = 0 ; k < numAColumns ; ++k ) Cvalue += A[Row*numAColumns + k] * B[k * numBColumns + Col]; C[Row*numCColumns + Col] = Cvalue; }`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T12:35:47.543

代替

```
Cvalue += A[Row*numAColumns + k] * B[k * numBRows + Col]; 
```

为了

```
Cvalue += A[Row*numAColumns +k]* B[k*numBColumns+Col]; 
```

和

```
C[Row*numAColumns + Col] = Cvalue; 
```

为了

```
C[Row*numCColumns+Col] = Cvalue; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-16T06:12:27.837

代替 ：

```
Cvalue += A[Row*numAColumns + k] * B[k * numBRows + Col]; 
```

和

```
Cvalue += A[Row*numAColumns + k] * B[k * numBColumns + Col]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-05T15:57:27.477

我们可以使用平铺矩阵乘法，我发现它有更好的执行时间。

```
#include    <wb.h>

#define wbCheck(stmt) do {                                 \
        cudaError_t err = stmt;                            \
        if (err != cudaSuccess) {                          \
            wbLog(ERROR, "Failed to run stmt ", #stmt);    \
            return -1;                                     \
        }                                                  \
    } while(0)

// Compute C = A * B
__global__ void matrixMultiplyShared(float * A, float * B, float * C,
                             int numARows, int numAColumns,
                             int numBRows, int numBColumns,
                             int numCRows, int numCColumns) {
    //@@ Insert code to implement matrix multiplication here
    //@@ You have to use shared memory for this MP
    const int TILE_WIDTH = 32;
     __shared__ float sharedA[TILE_WIDTH][TILE_WIDTH];
     __shared__ float sharedB[TILE_WIDTH][TILE_WIDTH];
    int bx = blockIdx.x;
    int by = blockIdx.y;
    int tx = threadIdx.x;
    int ty = threadIdx.y;
    int Row = by*TILE_WIDTH + ty;
    int Col = bx*TILE_WIDTH + tx;
    float Cvalue = 0.0; 
    if (numAColumns != numBRows) return ;
    for (int i = 0; i < (int)(ceil((float)numAColumns/TILE_WIDTH)); i++)
    {

      if (i*TILE_WIDTH + tx < numAColumns && Row < numARows){
            sharedA[ty][tx] = A[Row*numAColumns + i*TILE_WIDTH + tx];
      }else{
            sharedA[ty][tx] = 0.0;
      }

      if (i*TILE_WIDTH + ty < numBRows && Col < numBColumns){
            sharedB[ty][tx] = B[(i*TILE_WIDTH + ty)*numBColumns + Col];
      }else{
            sharedB[ty][tx] = 0.0;
      }
       __syncthreads();
         if(Row < numARows && Col < numBColumns){

            for(int j = 0; j < TILE_WIDTH; j++)
            Cvalue += sharedA[ty][j] * sharedB[j][tx];
      }

        __syncthreads();
    }

    if (Row < numCRows && Col < numCColumns)
        C[Row*numCColumns + Col] = Cvalue;
}    

int main(int argc, char ** argv) {
    wbArg_t args;
    float * hostA; // The A matrix
    float * hostB; // The B matrix
    float * hostC; // The output C matrix
    float * deviceA;
    float * deviceB;
    float * deviceC;
    int numARows; // number of rows in the matrix A
    int numAColumns; // number of columns in the matrix A
    int numBRows; // number of rows in the matrix B
    int numBColumns; // number of columns in the matrix B
    int numCRows; // number of rows in the matrix C (you have to set this)
    int numCColumns; // number of columns in the matrix C (you have to set this)
    int TILE_WIDTH = 32;

    args = wbArg_read(argc, argv);

    wbTime_start(Generic, "Importing data and creating memory on host");
    hostA = (float *) wbImport(wbArg_getInputFile(args, 0), &numARows, &numAColumns);
    hostB = (float *) wbImport(wbArg_getInputFile(args, 1), &numBRows, &numBColumns);
    //@@ Set numCRows and numCColumns
    numCRows = 0;
    numCColumns = 0;
    numCRows = numARows;
    numCColumns = numBColumns;
    //@@ Allocate the hostC matrix
    hostC = (float*) malloc(sizeof(float)*numCRows*numCColumns);  
    wbTime_stop(Generic, "Importing data and creating memory on host");

    wbLog(TRACE, "The dimensions of A are ", numARows, " x ", numAColumns);
    wbLog(TRACE, "The dimensions of B are ", numBRows, " x ", numBColumns);

    wbTime_start(GPU, "Allocating GPU memory.");
    //@@ Allocate GPU memory here
    cudaMalloc((void**)&deviceA , sizeof(float)*numARows*numAColumns );
    cudaMalloc((void**)&deviceB , sizeof(float)*numBRows*numBColumns);
    cudaMalloc((void**)&deviceC , sizeof(float)*numCRows*numCColumns);  

    wbTime_stop(GPU, "Allocating GPU memory.");

    wbTime_start(GPU, "Copying input memory to the GPU.");
    //@@ Copy memory to the GPU here
    cudaMemcpy(deviceA, hostA, sizeof(float)*numARows*numAColumns,    cudaMemcpyHostToDevice);
    cudaMemcpy(deviceB, hostB, sizeof(float)*numBRows*numBColumns, cudaMemcpyHostToDevice);  

    wbTime_stop(GPU, "Copying input memory to the GPU.");

    //@@ Initialize the grid and block dimensions here
    int dimX = (int)(ceil((float)numCColumns / TILE_WIDTH));  
    int dimY = (int)(ceil((float)numCRows / TILE_WIDTH));
    dim3 DimGrid(dimX, dimY);
    dim3 DimBlock(TILE_WIDTH, TILE_WIDTH);

    wbTime_start(Compute, "Performing CUDA computation");
    //@@ Launch the GPU Kernel here
    matrixMultiplyShared<<<DimGrid , DimBlock>>>(deviceA , deviceB , deviceC , numARows , numAColumns, numBRows ,numBColumns , numCRows , numCColumns);  

    cudaThreadSynchronize();
    wbTime_stop(Compute, "Performing CUDA computation");

    wbTime_start(Copy, "Copying output memory to the CPU");
    //@@ Copy the GPU memory back to the CPU here
    cudaMemcpy(hostC, deviceC, sizeof(float)*numCRows*numCColumns , cudaMemcpyDeviceToHost);  

    wbTime_stop(Copy, "Copying output memory to the CPU");

    wbTime_start(GPU, "Freeing GPU Memory");
    //@@ Free the GPU memory here
    cudaFree(deviceA);
    cudaFree(deviceB);
    cudaFree(deviceC);  

    wbTime_stop(GPU, "Freeing GPU Memory");

    wbSolution(args, hostC, numCRows, numCColumns);

    free(hostA);
    free(hostB);
    free(hostC);

    return 0;
} 
```

# javascript - 解决 2 个组件之间的 JS 冲突

> ID：13896564
> 
> 赞同：1
> 
> 时间：2012-12-15T21:52:12.443
> 
> 标签：javascript, jquery-ui

我一直在使用来自 Egor Khmelev（[文档](http://www.ajaxshake.com/plugin/EN/332/476ae700/jslider-is-easy-to-use-and-multifunctional-jquery-plugin-jslider.html)，[github](https://github.com/egorkhmelev)）的非常好的滑块组件，但最近决定从 Trent Richardson（[文档](http://trentrichardson.com/examples/timepicker/)，[github](http://github.com/trentrichardson/jQuery-Timepicker-Addon)）。问题是他们都定义了一个名为“slider”的函数并且实现冲突。有什么方法可以隔离这些以便避免冲突，但仍然允许在更新可用时合理轻松地更新各个组件？

# php - MySQL MEDIUMBLOB 总是相同的大小

> ID：13896566
> 
> 赞同：0
> 
> 时间：2012-12-15T21:52:30.097
> 
> 标签：php, mysql, sql, insert, pdo

我在共享主机帐户上有 MySQL 5.1.65，在将图像插入到我的图像表（InnoDB）中时遇到了麻烦，该表有 MEDIUMBLOB 列，我想在其中存储图像数据。

```
CREATE TABLE IF NOT EXISTS `images` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `description` varchar(160) DEFAULT NULL,
  `image` mediumblob,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

我正在使用 PDO 从 PHP 5.2.17 连接到 db。我尝试 `PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"` 在我的连接中进行设置，因为在 SO 和网络上对类似（或相同）问题的一些答案中建议了它，但它并没有解决问题。我还检查了 MySQL 配置中允许的最大数据包，它设置为 16,777,216，这应该足够了，因为我不允许上传大于 5 MB 的图像。

我不知道它是否相关，但我在事务中插入数据，在该事务中我也对其他表进行多次插入。

```
 $image_params = array(
            "description" => $data->description,
            "image" => $image->getBinary() // Basicaly does file_get_contents() and returns
        );
        $image_statement = $pdo->prepare(
                "INSERT INTO images (description, image)
                VALUES(:description, :image)"
        );

        $pdo->beginTransaction();

        $image_statement->execute($image_params);
        $some_other_statement->execute($params);

        $pdo->commit() 
```

在 phpMyAdmin 中，当我浏览图像表时，图像列始终显示 [BLOB - 15B]，当我访问它时，我得到包含“资源 id #[id]”的 .bin 文件，其中 [id] 是图像的 id。

谢谢你，维克托

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T22:00:22.643

我找到了解决我的问题的方法！`$image->getBinary()`方法返回 GD 图像资源而不是实际的二进制图像字符串，所以我将其更改为：

```
 public function getBinary() {
        ob_start();
        imagejpeg($this->image);
        return ob_get_clean();
    } 
```

现在可以了！吸取了教训，我可以继续我的项目了！:)

# svn - Jenkins：创建 SVN 标记并将其传递给 ANT 和 Subversion 标记插件

> ID：13896570
> 
> 赞同：1
> 
> 时间：2012-12-15T21:53:01.630
> 
> 标签：svn, jenkins

我正在尝试使用`BUILD_NUMBER`environment 属性来创建一个标签，我可以将它传递给我的 ANT 脚本（以便我可以将它写入我的 WAR/JAR 清单），并在“Subversion”执行的标记过程中使用它标记插件”。

一个小问题是我想`BUILD_NUMBER`在使用它之前对其进行零填充。例如，如果`BUILD_NUMBER`是 14，我的标签看起来像 1.0.0.00014。

我找到了具有“Evaluated Groovy script”功能的 EnvInject 插件，该脚本对我有用，但我确实有问题：

```
import jenkins.model.*

def tagPrefix = "1.0.0."
def env = Jenkins.instance.getItem("BnL Build").getLastBuild().getEnvironment()
def buildNumber = env['BUILD_NUMBER']
def tag = tagPrefix + buildNumber.padLeft(5,'0')

def map = [AP_SVN_TAG: tag]

return map 
```

问题是：

*   EnvInject 选项甚至是我想做的最好的方法吗？
*   有没有比 via 更直接的 API 来获取“这个构建” `Jenkins.instance.getItem()`？我知道这行得通，但似乎很脆弱，因为作业的名称可能随时更改，从而破坏脚本。我尝试`manager.build.getEnvironment(manager.listener)['BUILD_NUMBER']`了，但我得到了一个错误，即`[EnvInject] - [ERROR] - SEVERE ERROR occurs: No such property: manager for class: Script1`.

如果有帮助，我正在运行 Jenkins v1.488、Jenkins Subversion Tagging Pluging v1.16 和 Environment Injector Pluging v1.73。

提前致谢，

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T02:51:32.830

该插件现已由 gboissinot 更新到 1.75 版，并使变量`currentJob`可`currentBuild`用于 Groovy 脚本。所以我的新 Groovy 脚本是：

```
import jenkins.model.*

def tagPrefix = "1.0.0."
def buildNumber = currentBuild.getNumber().toString()
def tag = tagPrefix + buildNumber.padLeft(5,'0')

def map = [AP_SVN_TAG: tag]

return map 
```

而且效果很好！

# mysql - 数据库表和关系

> ID：13896572
> 
> 赞同：0
> 
> 时间：2012-12-15T21:53:27.650
> 
> 标签：mysql, database-design

所以我网站的基本前提是我学校的教授评级网站。每个教授应该能够在这个评级系统中拥有多个条目。我设置了具有 3 个字段的类别表，professorid 这是一个自动增量（PK），描述是教授的名字，我手动插入了每个教授，depart 字段是我也手动插入每个部门名称的地方。第二个表教授包含每个教授的所有属性，当用户输入时，他们应该能够拥有多个具有所述属性的条目。现在，由于我在一个表中有名称和部门，我如何与教授表交互，以便每个教授可以有多个条目？任何示例，例如表标记或两个表之间的交互查询都会对我有很大帮助。这是我在寒假期间为练习而做的一个项目，非常感谢你们！我使用 PHP 和 myphpadmin

## 类别表

*   professorid smallint(6)(PK) //自动递增

*   Description varchar(40) //教授姓名

*   离开 varchar(50) //教授姓名

## 教授桌

*   professorid smallint(6)(PK) //自动递增
*   评级 smallint(6) //1-10
*   容易 smallint(6) //1-10
*   教科书 varchar(3) //是或否
*   timestamp timestamp //时间戳
*   course char(10) //课程名称
*   curve char(3) //是与否
*   comment tinytext //评论部分

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T22:03:31.577

您在此处拥有的实体是 Department、Professor、Course、Rating 和 User，因此我将创建一个表格来保存其中的每一个。每个人都获得一个单列数字主键，用户和教授获得名称，并且可能在名称冲突的情况下获得某种形式的唯一标识符。课程和部门都有名称。教授有一个系的外键，而评级获得教授、课程和用户的外键。

# c# - C# 将控件从另一个类添加到窗体

> ID：13896574
> 
> 赞同：1
> 
> 时间：2012-12-15T21:53:36.000
> 
> 标签：c#, class, controls

每次我创建一个新实例时，`Player`我都想做以下代码

```
private void button1_Click(object sender, EventArgs e)
{
   Player Player1 = new Player();
}

Player class
{
    public Player()
    {
        Form1.AddControls(someControl)
    }
} 
```

我似乎无法与`form1`eg做任何事情`textbox1.text = "Test"`。我认为这是一个范围问题，但我在互联网上找不到答案。有谁知道我如何`form1`通过课程访问+向我添加控件？

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T22:08:54.773

目前尚不清楚您要做什么。听起来您想将 Player 类中的控件添加到您调用的表单中，如下所示：

```
public class Form1 : Form
{
    public void SomeMethod()
    {
        Player player1 = new Player(this);
    }
}

public class Player()
{
    public Player(Form form)
    {
        Textbox tb = new Textbox();
        form.Controls.Add(tb);
    }
} 
```

# r - 多项式回归无意义预测

> ID：13896578
> 
> 赞同：4
> 
> 时间：2012-12-15T19:17:27.297
> 
> 标签：r, regression, prediction

假设我想用二次（正交）多项式拟合线性回归模型，然后预测响应。这是第一个模型（m1）的代码

```
x=1:100
y=-2+3*x-5*x^2+rnorm(100)
m1=lm(y~poly(x,2))
prd.1=predict(m1,newdata=data.frame(x=105:110)) 
```

现在让我们尝试相同的模型，但不使用 $poly(x,2)$，我将使用它的列，例如：

```
m2=lm(y~poly(x,2)[,1]+poly(x,2)[,2])
prd.2=predict(m2,newdata=data.frame(x=105:110)) 
```

让我们看一下 m1 和 m2 的摘要。

```
> summary(m1)

Call:
lm(formula = y ~ poly(x, 2))

Residuals:
     Min       1Q   Median       3Q      Max 
-2.50347 -0.48752 -0.07085  0.53624  2.96516 

Coefficients:
              Estimate Std. Error t value Pr(>|t|)    
(Intercept) -1.677e+04  9.912e-02 -169168   <2e-16 ***
poly(x, 2)1 -1.449e+05  9.912e-01 -146195   <2e-16 ***
poly(x, 2)2 -3.726e+04  9.912e-01  -37588   <2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 0.9912 on 97 degrees of freedom
Multiple R-squared:     1,      Adjusted R-squared:     1 
F-statistic: 1.139e+10 on 2 and 97 DF,  p-value: < 2.2e-16 

> summary(m2)

Call:
lm(formula = y ~ poly(x, 2)[, 1] + poly(x, 2)[, 2])

Residuals:
     Min       1Q   Median       3Q      Max 
-2.50347 -0.48752 -0.07085  0.53624  2.96516 

Coefficients:
                  Estimate Std. Error t value Pr(>|t|)    
(Intercept)     -1.677e+04  9.912e-02 -169168   <2e-16 ***
poly(x, 2)[, 1] -1.449e+05  9.912e-01 -146195   <2e-16 ***
poly(x, 2)[, 2] -3.726e+04  9.912e-01  -37588   <2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 0.9912 on 97 degrees of freedom
Multiple R-squared:     1,      Adjusted R-squared:     1 
F-statistic: 1.139e+10 on 2 and 97 DF,  p-value: < 2.2e-16 
```

所以m1和m2基本相同。现在让我们看看预测 prd.1 和 prd.2

```
> prd.1
        1         2         3         4         5         6 
-54811.60 -55863.58 -56925.56 -57997.54 -59079.52 -60171.50 

> prd.2
         1          2          3          4          5          6 
  49505.92   39256.72   16812.28  -17827.42  -64662.35 -123692.53 
```

Q1：为什么prd.2与prd.1有很大不同？

Q2：如何使用模型m2获得prd.1？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T23:08:49.770

`m1`是这样做的正确方法。`m2`正在进入一个痛苦的世界……

要从 进行预测`m2`，模型需要知道它已拟合到一组正交基函数，以便它对外推的新数据值使用相同的基函数。比较：`poly(1:10,2)[,2]`with `poly(1:12,2)[,2]`- 前十个值不一样。如果您明确地拟合模型，`poly(x,2)`那么就会`predict`理解所有这些并做正确的事情。

您需要做的是确保使用与最初创建模型相同的一组基函数来转换您的预测位置。您可以使用`predict.poly`它（注意我调用我的解释变量`x1`，`x2`以便轻松匹配名称）：

```
px = poly(x,2)
x1 = px[,1]
x2 = px[,2]

m3 = lm(y~x1+x2)

newx = 90:110
pnew = predict(px,newx) # px is the previous poly object, so this calls predict.poly

prd.3 = predict(m3, newdata=data.frame(x1=pnew[,1],x2=pnew[,2])) 
```

# c++ - google perf 工具可以用于分析 C 应用程序吗？

> ID：13896586
> 
> 赞同：0
> 
> 时间：2012-12-15T21:55:20.117
> 
> 标签：c++, c, profiler

“C++”无处不在，所以我想知道我是否也可以分析 C 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:22:34.910

当然。是的。确实。毫无疑问。

# c++ - 在框架上绘制矩形

> ID：13896588
> 
> 赞同：1
> 
> 时间：2012-12-15T21:55:30.567
> 
> 标签：c++, opencv

我正在尝试检测值高于 let say 的像素`cvScalar(200,200,200)`。

之后，我想在所有这些像素上使用`cv::rectangle`. 有人可以帮我怎么做吗？

看下面这张图就知道我想做的事了。！[图片]：[http ://technical-recipes.com/wp-content/uploads/2011/10/glove3.jpg](http://technical-recipes.com/wp-content/uploads/2011/10/glove3.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T22:57:02.170

这是我解决您的问题的方法：

1.  我使用`inRange`.
2.  在此之后，我找到了所有轮廓。
3.  然后我从所有这些轮廓中构建了大轮廓。
4.  最后，找到`boundingRect`这个大轮廓并画出来。

这是一个 C++ 代码：

```
Mat src = imread("image.jpg"), mask;

const Scalar minScalar = Scalar(200, 200, 200);
const Scalar maxScalar = Scalar(255, 255, 255);

inRange(src, minScalar, maxScalar, mask);

vector<vector<Point2i> > contours;

findContours(mask, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

vector<Point2i> bigContour;
for (int i=0; i<contours.size(); i++)
{
    for (int j=0; j<contours[i].size(); j++)
    {
        bigContour.push_back(contours[i][j]);
    }
}

Rect rect = boundingRect(bigContour);
rectangle(src, rect, Scalar(255, 0, 255));

imshow("Image", src);
waitKey(); 
```

# google-app-engine - 如何在 GO、Google App Engine 中将 *url.URL 转换为字符串

> ID：13896592
> 
> 赞同：16
> 
> 时间：2012-12-15T21:56:15.403
> 
> 标签：google-app-engine, go

我想获取 URL 并将其转换为字符串。我必须遵循代码：

```
func getURL(w http.ResponseWriter, r *http.Request) {
    var url string = r.URL
} 
```

我明白了：

> “无法将 r.URL（类型 *url.URL）转换为类型字符串”

这运作良好：

```
fmt.Fprint(w,r.URL) 
```

但我想使用它，而不仅仅是打印它。

我该怎么办？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-15T21:59:39.043

url.URL 类型有一个 .String() 方法。

试试这个。

```
func getURL(w http.ResponseWriter, r *http.Request) {
    url := r.URL.String()
} 
```

[http://golang.org/pkg/net/url/#URL.String](http://golang.org/pkg/net/url/#URL.String)

# jquery - fancybox 和 msg 冲突 - 对象函数没有方法

> ID：13896603
> 
> 赞同：1
> 
> 时间：2012-12-15T21:58:23.200
> 
> 标签：jquery, fancybox, conflict, fancybox-2, msg

我的页面上有这两个脚本：

```
$(document).ready(function() {
    $(".various").fancybox();
}); 
```

正在打开一个带有 ajax 内容和以下内容的灯箱：

```
$('.check_item_delete.edit').bind( 'click', function(){
    $.msg({ content : 'blah blah' });
}); 
```

这是一种模态脚本。

触发要素是：

```
<div class="collum_full">
   <div class="journalbox_check" id="journalbox_edit_check-6">
      <div class="form_line" id="line_6">
         <input type="radio" class="check_item_undo edit" value="undo" name="edit_6" id="und_edit_6"><span class="check_name_undo">Vorversion</span>
      </div>
      <div class="form_line">
         <input type="radio" class="check_item_delete edit" value="delete" name="edit_6" id="del_edit_6"><span class="check_name_delete">löschen</span>
      </div>
   </div>
   <div class="journalbox_checktitles" id="journalbox_edit-6">
      <a href="/web/de/intern_journal_history/6" class="various fancybox.ajax" id="6" title="bla bla bla">(6) bla bla bla</a>
      <div class="footnote">
         <span class="footertext">Ver&ouml;ffentlicht von xxx vor 48 Minuten am 15.12.2012 22:56 (AR)</span>
      </div>
   </div>
</div> 
```

一切正常。但是当我打开fancybox然后想打开jquery.msg modal时，我收到以下错误：

> 未捕获的类型错误：对象函数 (a,b){return new p.fn.init(a,b,c)} 没有方法“msg”（匿名函数）

我正在使用[http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js)以及新版本的 fancybox 2 和 jquery.msg

我怎样才能使这项工作？

# html - 需要 HTML 格式的特定地址

> ID：13896606
> 
> 赞同：-1
> 
> 时间：2012-12-15T21:58:48.837
> 
> 标签：html, forms

我有一个网站，人们可以在其中提交 YouTube 视频。

我需要帮助（不是很擅长 HTML 编程）是有些人用它来发布垃圾邮件或格式错误的 URL。

我拥有的是一个带有文本框和按钮的 HTML 表单。

所以我需要它，所以人们只能提交他们输入的 YouTube 页面的 URL，格式为“http://www.youtube.com/watch?v=”，然后是他们的视频 ID。

基本上我只希望他们能够提交“http://www.youtube.com/watch?v=”，最后带有他们的视频 ID，例如，[http://www.youtube.com/watch?v= _qLTrO60o3E](http://www.youtube.com/watch?v=_qLTrO60o3E)

希望有人能指出我正确的方向！

谢谢你。杰克，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:17:26.530

您需要通过正则表达式测试 URL 以检查它是否采用给定格式。您可以在客户端实现此功能，但正如问题评论中发布的那样，还必须在服务器上检查任何输入。用户很容易禁用 JavaScript，大多数垃圾邮件机器人甚至不使用 JavaScript。

对于现代浏览器，客户端实现可以像使用带有正则表达式的[HTML5 表单验证`pattern`属性一样简单。](http://blog.mozilla.org/webdev/2011/03/14/html5-form-validation-on-sumo/)所以是的，这可以使用纯 HTML 来完成（嗯，不适用于 IE）。

[以下示例是来自TinyMCE](http://www.tinymce.com/) [mediahtml5 插件](http://www.cjboco.com/projects.cfm/project/tinymce-html5-media-plug-in/0.0.1)的 JavaScript 正则表达式：

```
YouTube
/watch\?v=(.+)(.*)/

Vimeo
/vimeo\.com\/(.+)/

Dailymotion
/dailymotion\.com\/video\/([^_]*)/ 
```

# php - Kohana3框架中作为变量的表的列名

> ID：13896607
> 
> 赞同：0
> 
> 时间：2012-12-15T21:59:14.047
> 
> 标签：php, mysql, insert, kohana

我在 Kohana3 框架中有这样的代码，可以将值保存在 Days 表中。

```
$column_names=array('morning','day','evening','night');
$values=array('abc','xyz','eeeee','ooooo');

$result=ORM::factory('Day');
$result->morning=$values[0];
$result->day=$values[1];
$result->evening=$values[2];
$result->night=$values[3];
$result->save(); 
```

我如何使用 $column_names 来编写类似的东西，即使用变量作为列名：

```
$result->$column_names[3]=$values[3]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T10:24:56.320

您可以使用括号来包装您的数组。

```
$result->{$column_names[3]} = $values[3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T17:49:43.537

[array_combine](http://php.net/manual/en/function.array-combine.php)是你需要的：

```
$values = array_combine($column_names, $values); 
$result->values($values);
$result->save(); 
```

# python - TypeError：格式字符串的参数不足 - 使用 While 循环

> ID：13896612
> 
> 赞同：2
> 
> 时间：2012-12-15T22:00:00.110
> 
> 标签：python

我正在做旧的 99 瓶歌曲并尝试使用 While 循环来完成它，以帮助我继续更好地学习这种循环类型。

我想知道为什么在下面的代码中会出现 TypeError 以及我缺少哪些参数？

这是我的代码：

```
# Get number of beers
bottles = int(raw_input("How many bottles of beer? "))

# return invalid response
if bottles < 1:
    print "That's not a good number"

    if bottles == 1:
        s1 = "bottle" 
        s2 = "bottles" 

    elif bottles == 2:
        s1 = "bottles" 
        s2 = "bottles" 

# sing verses
while bottles > 0:
    print "%d %s of beer on the wall," % bottles, s1
    print "%d %s of beer." % bottles, s1
    print "You take one down, pass it around,"
    print "%d %s of beer on the wall." % (bottles - 1), s2
    print
    bottles -= 1 
```

这是错误：

```
Traceback (most recent call last):
    File "beer.py", line 47, in <module>
          print "%d %s of beer on the wall," % bottles, s1
TypeError: not enough arguments for format string 
```

我尝试在 % 之后的“bottles，s1”周围使用括号，但仍然没有帮助。有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T22:01:42.720

您必须将多个参数指定为元组，例如

```
print "%d %s of beer on the wall," % (bottles, s1) 
```

# java - Math.pow(65,17) % 3233 的惊人结果

> ID：13896614
> 
> 赞同：0
> 
> 时间：2012-12-15T22:00:17.227
> 
> 标签：java, double, modulo, largenumber

由于某种原因，在处理大数时，模运算符没有给我正确的输出，看看代码

```
double x = Math.pow(65,17) % 3233; 
```

输出应该是`2790` 但输出是`887.0`

我确信它有些愚蠢，但我无法绕过它。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T22:02:27.260

的结果`Math.pow(65, 17)`不能完全表示为 a `double`，并且正在四舍五入到最接近的数字。

该`pow(a, b) % c`操作称为“模幂运算”。维基[百科页面](http://en.wikipedia.org/wiki/Modular_exponentiation)包含很多关于如何计算它的想法。

这是一种可能性：

```
public static int powmod(int base, int exponent, int modulus) {
    if (exponent < 0)
        throw new IllegalArgumentException("exponent < 0");
    int result = 1;
    while (exponent > 0) {
        if ((exponent & 1) != 0) {
            result = (result * base) % modulus;
        }
        exponent >>>= 1;
        base = (base * base) % modulus;
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:06:04.557

你可以像这样使用 int

```
int n = 65;
for (int i = 1; i < 17; i++)
    n = n * 65 % 3233;
System.out.println(n); 
```

或 BigInteger 之类的

```
System.out.println(BigInteger.valueOf(65).pow(17).mod(BigInteger.valueOf(3233))); 
```

都打印

```
2790 
```

# arrays - Moose 数组属性：如何使用 set 方法？

> ID：13896629
> 
> 赞同：3
> 
> 时间：2012-12-15T22:02:52.817
> 
> 标签：arrays, perl, moose, traits

我想将数组定义为类的属性，并在实例化类时用一些数据填充它。

我认为可以使用一种`$self->attribute->set($id, $value)`方法在给定索引上设置元素。至少这是我从 Moose[文档](http://search.cpan.org/~doy/Moose-2.0604/lib/Moose/Meta/Attribute/Native/Trait/Array.pm)中了解到的。

但是当我尝试

```
use Data::Dumper qw( Dumper );
use Moose;

has cells => (
    is => 'rw',
    traits  => ['Array'],
    isa     => 'ArrayRef',
    default => sub { [] },
);

my $app = __PACKAGE__->new();
$app->cells->set($_, $_) for 0..3;
print(Dumper($app->cells)); 
```

我明白了

```
Can't call method "set" on unblessed reference 
```

我该怎么做`set`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T22:34:50.973

```
use Data::Dumper qw( Dumper );
use Moose;

has cells => (
    is => 'rw',
    traits  => ['Array'],
    isa     => 'ArrayRef',
    default => sub { [] },
    handles => {                   # <---
       set_cell => 'set',          # <---
    },                             # <---
);

my $app = __PACKAGE__->new();
$app->set_cell($_, $_) for 0..3;   # <---
print(Dumper($app->cells)); 
```

* * *

尽管评论中有相反的说法，但它也可以正常工作`BUILD`。

```
use Data::Dumper qw( Dumper );
use Moose;

has cells => (
    is => 'rw',
    traits  => ['Array'],
    isa     => 'ArrayRef',
    default => sub { [] },
    handles => {
       set_cell => 'set',
    },
);

sub BUILD {
    my ($self) = @_;
    $self->set_cell($_, $_) for 0..3;
}

my $app = __PACKAGE__->new();
print(Dumper($app->cells)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T23:31:29.003

@ikegami 的回答是正确的。这是一个扩展的解释。

问题在于这一行：

```
$app->cells->set($_, $_) for 0..3; 
```

为了更清楚，让我们摆脱循环并扩展它。

```
my $cells = $app->cells;
$cells->set(0, 0); 
```

`$app->cells`返回一个普通数组 ref，就像您在`has cells`调用中定义的那样。所以 $cells 只不过是一个普通的、未受祝福的数组引用。你不能调用任何方法，这就是（不幸的是）Perl 的工作原理，除非你进入[autobox](https://metacpan.org/module/Moose%3a%3aAutobox)。

请注意，[在文档](http://search.cpan.org/~doy/Moose-2.0604/lib/Moose/Meta/Attribute/Native/Trait/Array.pm#PROVIDED_METHODS)中提供的所有方法都是在对象上调用的，而不是在属性返回的事物上。此外，文档在这一点上并不清楚，每个方法都附加了属性的名称。你不叫`count`你打电话`count_cells`。你不叫`set`你打电话`set_cells`。

```
$app->set_cells(0, 0);
print $app->count_cells; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-16T00:08:59.730

你不这样做。没有`set`方法 on`$app->cells`因为`$app->cells`是数组引用，而不是对象，所以它没有*方法*。将本`Array`机特征应用于属性不会使 arrayref 成为对象；它只是使该属性能够`handles`通过使用 trait 提供的方法*来*回答请求。

如果您希望能够在 unblessed 数组引用上调用方法，您可能会考虑使用[Moose::Autobox](http://p3rl.org/Moose%3a%3aAutobox)，但如果您考虑得墨忒耳法则，您会发现原生特征可以让您构建一个比它更健壮的接口让用户直接戳你的数据成员就可以了。

# json - Picasa 数据 API 和 JSON - 无输出

> ID：13896630
> 
> 赞同：0
> 
> 时间：2012-12-15T22:02:55.090
> 
> 标签：json, google-plus, picasa

我正在使用以下形式的 URL 调用我帐户的相册：

```
https://picasaweb.google.com/data/feed/api/user/<user_id>/albumid/<album_id> 
```

这将返回一个带有此 URL 的 ATOM 提要：

```
https://picasaweb.google.com/data/feed/api/user/<user_id>/albumid/<album_id>/?alt=json 
```

我得到“找不到专辑”。错误。

我必须在我的帐户首选项中设置 JSON 吗？因为我使用的方法似乎是正确的方法 - 根据文档：[https ://developers.google.com/gdata/docs/json](https://developers.google.com/gdata/docs/json)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:10:42.817

这：[https](https://picasaweb.google.com/data/feed/api/user/103168604032363426774/albumid/5626814518240219937?alt=json) ://picasaweb.google.com/data/feed/api/user/103168604032363426774/albumid/5626814518240219937?alt=json有效。您使用的专辑似乎并不存在。

你能分享你实际使用的网址吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-21T14:31:56.883

只需公开分享相册即可。进入相册设置，互联网上的每个人都可以看到

# python - 使用烧瓶的 Dropbox

> ID：13896631
> 
> 赞同：2
> 
> 时间：2012-12-15T22:03:04.890
> 
> 标签：python, flask, dropbox

我正在浏览 Dropbox api 并尝试更改代码，以便可以将其与烧瓶一起使用。[https://www.dropbox.com/developers/start/authentication#python](https://www.dropbox.com/developers/start/authentication#python)

我在 Dropbox 的链接中放置了一个回调：

```
<a href="{{url}}&oauth_callback=http://127.0.0.1:5000/"> 
```

它将 id 和 oauthtoken 放在 url 中。然后我检查令牌是否存在：

```
 success=request.args.get('oauth_token') 
```

如果用户点击拒绝，则 ('oauth_token') 不会显示在 url 中。那么我有：

```
if success:
    access_token = sess.obtain_access_token(request_token) 
```

但是当我这样做时，我得到一个令牌被禁用或无效错误。如果有人能指出我做错了什么，我将不胜感激。如果用户在 dropbbox 页面上点击允许，我不明白为什么我会得到一个无效或禁用的令牌。

# scala - 是否可以在演员内部使用 Akka 调度程序？

> ID：13896638
> 
> 赞同：28
> 
> 时间：2012-12-15T22:04:44.783
> 
> 标签：scala, akka, scheduler

我希望有可能让演员睡一会儿。演员们应该自己决定要睡多久。由于 Thread.sleep() 不是推荐的方法，所以我想到了在 akka 中使用调度程序。因此，我定义了一个演员，即另一个演员可以注册被唤醒。

```
class Scheduler extends Actor {

  def receive = {
    case Sleep(duration) => context.system.scheduler.scheduleOnce(duration) {
      sender ! Ring
    }
  }
} 
```

但是发送方永远不会收到 Ring 消息。所以我的问题是

*   是否建议在演员内部使用调度程序进行调度？
*   为什么发送方永远不会收到 Ring 消息？
*   如果这是不可能的，那么推荐的解决问题的方法是什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-12-16T07:47:01.207

先回答标题问题：是的，可以在actor内部使用调度器。

```
case Sleep(duration) =>
  context.system.scheduler.scheduleOnce(duration, self, Ring) 
```

## 现在到问题背后的问题

你没有说你真正想要达到的目标，所以我在这里做出一个有根据的猜测，你希望演员——通常会做一些叫做“X”的事情——做一段时间叫做“Y”的事情，暂停“X” “ 活动。对此的完整解决方案是

```
class Sleepy extends Actor {
  def receive = {

    ... // cases doing “X”

    case Sleep(duration) =>
      case object WakeUp
      context.system.scheduler.scheduleOnce(duration, self, WakeUp)
      context.become({
        case WakeUp => context.unbecome()
        // drop the rest
      }, discardOld = false)
  }
} 
```

同样也可以使用 FSM 特征并在正常和睡眠状态之间切换来实现。当然，你可以在睡觉时做任何你想做的事情，例如混合`Stash`Akka 2.1 中的 trait 并`stash()`在睡觉时调用所有（或部分）消息，`unstashAll()`当收到`WakeUp`消息时；或者你可以完全做其他事情。演员非常灵活。

## 演员不做什么

演员从不真正睡觉，他们总是处理传入的消息。如上所示，您可以定义这意味着什么，但基本原则是您不能暂停一个参与者，这样它就不会处理其邮箱中的消息。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-15T22:21:20.293

您正在关闭传递给调度程序的关闭中的“发送者”。这意味着 Ring 消息很可能被发送给了错误的参与者。你应该这样做：

```
case Sleep(duration) => 
  val s = sender
  context.system.scheduler.scheduleOnce(duration) {
    s ! Ring
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-04T19:14:27.553

Roland Kuhn 的回答涵盖了这个主题，我只是想补充一点，使用调度程序还有另一个常见用例：当向不同的参与者发送消息并等待该参与者响应时，用超时来限制等待是很常见的.

```
otherActor ! Request(...)
context.system.scheduler.scheduleOnce(duration, self, WakeUp)
...
case Response(...) => ...
case WakeUp => context stop self 
```

# asp.net - 2012 年 9 月发布 ajax 工具包组合框在使用 jquery 时为只读

> ID：13896641
> 
> 赞同：1
> 
> 时间：2012-12-15T22:05:57.287
> 
> 标签：asp.net, ajax, toolkit

Asp.net 2012 年 9 月发布 ajax 工具包组合框在使用 jquery 时是只读的。关于如何避免 jquery 和 ajax 工具包之间冲突的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:55:05.670

当您将其他库与 jQuery 一起使用时，您可以使用该[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/)函数来避免与常见符号（如`$`

[来自jQuery 页面](http://api.jquery.com/jQuery.noConflict/)的示例以及如何使用`noConflict()`：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });
  // Code that uses other library's $ can follow here.
</script> 
```

这个想法是，在您调用`$.noConflict();`之后，对 jQuery 库的所有其余调用都是使用`jQuery`而不是`$`上面示例中的符号完成的。

# java - 为什么会出现此堆栈溢出错误？

> ID：13896645
> 
> 赞同：0
> 
> 时间：2012-12-15T22:06:43.900
> 
> 标签：java, stack-overflow

我正在尝试部署我的 Java 应用程序，但遇到了一些非常奇怪的问题。当我在 Eclipse 中运行时，当我在我的 mac（已编译）上运行时，我完全没有问题，但是我在 PC 上运行时会出现问题。

错误（Obfed 代码）：

```
java.lang.StackOverflowError
at java.io.InputStream.<init>(Unknown Source)
at java.io.FileInputStream.<init>(Unknown Source)
at java.io.FileReader.<init>(Unknown Source)
at b.a.b.a.c.a(Unknown Source)
at b.a.b.b.d.<init>(Unknown Source)
at b.a.c.f.a(Unknown Source)
at b.a.c.f.a(Unknown Source)
at b.a.c.f.a(Unknown Source)
at b.a.c.f.a(Unknown Source)
at b.a.c.f.a(Unknown Source)
... 
```

方法错误：

```
public static String readStringFromFile(File f) throws IOException {
    BufferedReader br = new BufferedReader(new FileReader(f));
    StringBuilder sb = new StringBuilder();
    String line = br.readLine();
    while (line != null) {
        sb.append(line);
        sb.append("\n");
        line = br.readLine();
    }
    br.close();
    return sb.toString();
} 
```

方法二：

```
public static void loadSettings() {
  if(Util.getNewFile("pref.txt").exists()) {
      String s = Util.readStringFromFile(Util.getNewFile("pref.txt"));
      String[] tmp2 = s.split("\n");
      for(String tmp0 : tmp2) {
        if(!tmp0.equals("") || !tmp0.startsWith("#")) {
          Main.params.add(tmp0);
        }
      }             
    }
} 
```

我以前在使用反射时遇到过这样的错误。（罐子是通过反射启动的，如果这很重要的话）

有谁知道这是什么原因造成的？谢谢你的时间。

# mysql - 使用 Mysql Connector 从客户端连接到 Mysql 数据库

> ID：13896647
> 
> 赞同：0
> 
> 时间：2012-12-15T22:06:47.993
> 
> 标签：mysql, connection-string, mysql-connector

我想在位于互联网上的服务器上的数据库和在某些客户端上运行的应用程序之间建立连接。我的应用程序基于 .Net 框架，并且我使用 MySql Connector for .Net 组件。经过一些搜索后，我通过执行以下 php 命令获得服务器的服务器地址：

```
echo $_SERVER['SERVER_ADDR']; 
```

此命令返回：67.225.166.81 当 php 文件在服务器上运行时，我可以使用 php 连接到数据库。我在我的 .Net win 应用程序中使用了连接值，这是连接字符串：

```
string connStr = "server=67.225.166.81;port=3306;database=navayeme_joomfa;user id=navayeme;password=*****;"; 
```

Win 应用程序试图建立连接并抛出异常： Authentication to host '67.225.166.81' for user 'navayeme@myclientIP' failed ... myclientIP 是我的客户端的 ip。我该如何解决这个问题？服务器可能不支持这种类型的连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:18:20.570

将 MySQL 数据库与在同一台服务器上运行的 php 脚本一起使用并不意味着您可以从另一个网络连接到 MySQL 数据库。PHP 运行没有问题，因为它可以使用以下任一方式连接到服务器上的 MySQL 服务器

*   常规 TCP 连接（本地）
*   UNIX 套接字文件

请检查 MySQL 是否接受 port 上的连接`3306`。如果使用防火墙，请确保`3306`允许传入连接。

# .htaccess - htaccess 将虚拟别名重定向到 url

> ID：13896648
> 
> 赞同：4
> 
> 时间：2012-12-15T22:06:52.703
> 
> 标签：.htaccess

我有一个 php 页面：

```
www.mydomain.com/subfolder/subfolder/thepage.php 
```

我想通过以下方式访问它：

```
www.mydomain.com/page 
```

使用 .htaccess 文件怎么可能？！
我想使用别名或虚拟名称来替换长目录 url。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T11:21:07.593

```
RewriteEngine On
RewriteBase /
RewriteRule ^page$ /subfolder/subfolder/thepage.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-07T14:23:28.473

你也可以这样做：

```
Redirect 302 /page /subfolder/subfolder/thepage.php 
```

# haskell - 类型类，它是 Haskell 中另一个默认实现的超集

> ID：13896649
> 
> 赞同：3
> 
> 时间：2012-12-15T22:06:56.287
> 
> 标签：haskell, programming-languages, typeclass

当我尝试分解从列表表示恢复树所需的一个类型类时，我遇到了一个有趣的情况。这个想法是表示元素的属性在原始层次结构中相互关联。

考虑数据类型的下一个特征

```
class HierarchyOrd a where
    -- | Compares two objects for being on the same branch of hierarchy
    -- LT/GT lower/higher in hierarchy, EQ on the same node
    hierarchyCompare :: a -> a -> Maybe Ordering

class HierarchyOrd a => Hierarchy a where
    -- | Get information for common joint of branches for two objects
    -- Either one of them already on joint node (parent)
    -- or we need another object that represent that joint
    hierarchyJoint :: a -> a -> Either Ordering a
    -- hierarchyCompare x y = either Just (const Nothing) (hierarchyJoint x y)

-- Sample for FilePath
instance Hierarchy FilePath where
    hierarchyJoint x y = case (length x', length y', length z') of
            (a, b, c) | a == c && b == c -> Left EQ
            (a, _, c) | a == c -> Left GT
            (_, b, c) | b == c -> Left LT
            _ -> Right (joinPath z')
        where
            [x', y'] = map splitDirectories [x, y]
            skel = takeWhile id (zipWith (==) x' y')
            z' = zipWith const x' skel -- common prefix

instance HierarchyOrd FilePath where
    hierarchyCompare x y = either Just (const Nothing) (hierarchyJoint x y) 
```

如您所见`HierarchyOrdering`，`Hierarchy`我们只需要对其进行排序，而无需构建新节点。在这种特殊情况下 ( `FilePath`) 具有两个不重叠的功能是不可行的，甚至可能导致额外的工作（为`hierarchyCompare`和拆分目录两次`hierarchyJoint`）。这就是为什么决定涵盖`hierarchyCompare`by 的功能，`hierarchyJoint`因为如果我们得到`Just _`.

问题是：`hierarchyCompare`当对象定义在`Hierarchy`. 也许有一些扩展允许以更具描述性的方式公开类型类之间的这种关系（允许默认实现）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T02:01:57.907

我认为您正在寻找 GHC[`DefaultSignatures`](http://www.haskell.org/ghc/docs/7.4.2/html/users_guide/type-class-extensions.html#class-default-signatures)扩展？那让你做：

```
class HierarchyOrd a where
    -- | Compares two objects for being on the same branch of hierarchy
    -- LT/GT lower/higher in hierarchy, EQ on the same node
    hierarchyCompare :: a -> a -> Maybe Ordering
    default hierarchyCompare :: Hierarchy a=> a -> a -> Maybe Ordering
    hierarchyCompare x y = either Just (const Nothing) (hierarchyJoint x y) 
```

然后你可以简单地提供一个空的实例声明：

```
instance HierarchyOrd FilePath 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T10:52:33.423

只是添加到@dave4420 和@jberryman 的答案：问题`DefaultSignatures`是您需要在超类中描述您的默认实现，而不是在更符合逻辑的子类中描述。所以不可能将类型类拆分成不同的模块等。有一个提案可以解决各种类似的问题，称为[默认超类实例](http://hackage.haskell.org/trac/ghc/wiki/DefaultSuperclassInstances)。不幸的是，它还没有实施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T22:19:03.810

（还）没有这样的扩展。

目前，你能做的最好的就是

```
defaultHierarchyCompare :: Hierarchy a => a -> a -> Maybe Ordering
defaultHierarchyCompare x y = either Just (const Nothing) (hierarchyJoint x y)

instance Hierarchy FilePath where ...

instance HierarchyOrd FilePath where
    hierarchyCompare = defaultHierarchyCompare 
```

# python - 如何在 Flask 中使用参数制作 python 装饰器函数（用于授权）

> ID：13896650
> 
> 赞同：25
> 
> 时间：2012-12-15T22:06:57.697
> 
> 标签：python, flask, decorator

我为我的烧瓶登录使用了一个烧瓶片段来检查用户是否已登录：

```
from functools import wraps

def logged_in(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        if session.get('logged_in') is not None:
            return f(*args, **kwargs)
        else:
            flash('Please log in first.', 'error')
            return redirect(url_for('login'))
    return decorated_function 
```

我像这样装饰视图：

```
@app.route('/secrets', methods=['GET', 'POST'])
@logged_in
def secrets():
    error = None 
```

我也想为授权做类似的事情。现在，我有很多视图来检查用户是否拥有资源，比如说`hotdogs`资源。

如果登录用户是该特定热狗的所有者，他可以编辑和管理他的热狗。如果他不是，我会把他踢到未经授权的屏幕上。

```
@app.route('/<hotdog>/addmustard/',methods=["GET"])
@logged_in
def addmustard(hotdog):
    if not (authorizeowner(hotdog)):
        return redirect(url_for('unauthorized'))
    do_stuff() 
```

`authorizeowner()`将热狗作为输入并检查记录的热狗所有者是否与会话变量中列出的所有者名称匹配。

我尝试制作一个类似于我登录的 owns_hotdog 包装器/装饰器功能，但它抱怨它不接受参数。我怎样才能实现类似的目标？就像是...

```
def owns_hotdog(f):
    @wraps(f)
    def decorated_function(*args, **kwargs):
        if not authorizeowner(hotdog):
            return f(*args, **kwargs)
        else:
            flash('Please log in first.', 'error')
            return redirect(url_for('login'))
    return decorated_function 
```

从错误消息来看，装饰器似乎没有收到 Flask 视图可以从路由中的变量访问的 hotdog 参数。我的希望是……

```
@app.route('/<hotdog>/addmustard/',methods=["GET"])
@logged_in
@owns_hotdog(hotdog)
def addmustard(hotdog):
    do_stuff() 
```

一切都适用于我当前的 authorizeowner(hotdog) 函数，但是将它作为我的路由顶部的包装器而不是作为路由内的第一行似乎更干净。

其他一些注意事项：

*   我知道 Flask-Security 和 Flask-Principal 可以为我管理授权。不幸的是，我使用的是不受支持的数据库后端，无法使用这些扩展。所以，我被迫在没有他们的情况下进行身份验证。
*   如果您在以这种方式进行授权时发现任何明显的漏洞，请告诉我！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-16T09:56:24.700

这是如何做到的：

```
from functools import update_wrapper

def owns_hotdog(hotdog):
    def decorator(fn):
        def wrapped_function(*args, **kwargs):
            # First check if user is authenticated.
            if not logged_in():
                return redirect(url_for('login'))
            # For authorization error it is better to return status code 403
            # and handle it in errorhandler separately, because the user could
            # be already authenticated, but lack the privileges.
            if not authorizeowner(hotdog):
                abort(403)
            return fn(*args, **kwargs)
        return update_wrapper(wrapped_function, fn)
    return decorator

@app.errorhandler(403)
def forbidden_403(exception):
    return 'No hotdogs for you!', 403 
```

当装饰器接受参数时，它并不是真正的装饰器，而是返回*真正装饰器的**工厂*函数。

 *但如果我是你，我会使用 Flask-Login 进行身份验证，并使用自定义装饰器和函数来增强它来处理授权。

我查看了 Flask-Principal，但发现它对我的口味来说过于复杂。没有检查 Flask-Security，但我相信它使用 Flask-Principal 进行授权。总的来说，我认为大多数时候使用一些自定义代码的 Flask-Login 就足够了。*

# java - 无法让倒计时计时器达到第 100 秒

> ID：13896651
> 
> 赞同：0
> 
> 时间：2012-12-15T22:07:09.677
> 
> 标签：java

我有一个可以正常工作的倒计时计时器，除了我得到的数字在第 100 秒内有超过 2 位数字。我正在创建 2 个日历对象，以毫秒为单位获取时间值，然后减去它。代码

```
 long milsecs1= calendar1.getTimeInMillis();
    long milsecs2 = calendar2.getTimeInMillis();

    long diff = milsecs2 - milsecs1;
    long dsecs = diff / 1000;

    long ddays = diff / (24 * 60 * 60 * 1000);  
    diff=diff-ddays *(24 * 60 * 60 * 1000); 
    textDays.setText(   Integer.toString( (int)ddays)+":" );

    long dhours = diff / (60 * 60 * 1000);
    diff=diff-dhours* (60 * 60 * 1000);
    textHours.setText(   Integer.toString( (int)dhours)+":" );

    long dminutes = diff / (60 * 1000);
    diff=diff-dminutes* (60 * 1000);
    textMinuts.setText(   Integer.toString( (int)dminutes)+":" );

/////////////////////////////////////////////////
// THIS IS THE PART THAT IS NOT WORKING, I WANT NUMBERS 0-99, BUT GETTING NUMBERS LIKE 230
    long dseconds = diff / (100);
    textSeconds.setText(   Integer.toString( (int)dseconds)+":" );
    diff=diff-dseconds; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:28:37.963

[Joda time在其](http://joda-time.sourceforge.net/)[Period 类](http://joda-time.sourceforge.net/apidocs/org/joda/time/Period.html)中提供了一个更简单（且经过充分验证）的解决方案。像这样的东西应该可以解决问题（未经测试）：

```
Period period = new Period(calendar1.getTimeInMillis(), calendar2.getTimeInMillis());
int days = period.getDays();
int hours = period.getHours();
... etc. 
```

# html - 换行后垂直对齐中间停止工作

> ID：13896652
> 
> 赞同：3
> 
> 时间：2012-12-15T22:07:15.510
> 
> 标签：html, css

我正在使用一个`max-width`属性来强制换行。在新行之后，文本将转到图像的底部，而不是留在中间。

CSS：

```
.description{
font:bold 16px Verdana, Helvetica, sans-serif;
color: #3D85A7;
margin: 0 auto 20px auto;
text-align:center;
max-width:500px;
}

.icon{
max-height: 90px;
max-width: 85px;
margin: 10px 0 10px 10px;
vertical-align:middle;
}​ 
```

HTML：

```
<div class="description">
    <img class="icon" src="http://cleanfiles.net/images/pdf.png">
    This is a really really really really long file name.pdf
</div>​ 
```

对于现场示例，[请在此处的 JSFIDDLE 上查看。](http://jsfiddle.net/LXS6x/)

添加：还请注意，我**当前的**css 可以很好地处理短文件名（图标移入并保持居中）。到目前为止的答案涉及`float:`，这似乎不适用于较短的文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T22:15:56.347

我的解决方案是将 HTML 更改为（添加`<p>`标签）：

```
<div class="description">
  <p>
    <img class="icon" src="http://cleanfiles.net/images/pdf.png">
    This is a really really really really long file name.pdf
  </p>
</div>​ 
```

然后将属性添加`float: left`到图片中。

**编辑：**

这是文本居中的链接（可能不是最好的方法，但它有效）：http: [//jsfiddle.net/LXS6x/9/](http://jsfiddle.net/LXS6x/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:18:21.360

您应该真正将文本包装在描述中，以保持对文本的控制。

这是一个[jsfiddle](http://jsfiddle.net/LXS6x/3/)示例，说明如何实施`float`以解决您的问题。

**CSS**

```
.description{
  font:bold 16px Verdana, Helvetica, sans-serif;
  color: #3D85A7;
  margin: 0 auto 20px auto;
  text-align:center;
  max-width:500px;
}

.description p {
  display: inline-block;
  float: right;
  max-width: 390px;
  margin: 10px 10px 10px 0px;
}

.icon{
  max-height: 90px;
  max-width: 85px;
  margin: 10px 0 10px 10px;
  float: left;
}​ 
```

我希望这有帮助。

# android - osmdroid 触发点击 mapview

> ID：13896653
> 
> 赞同：1
> 
> 时间：2012-12-15T22:07:39.690
> 
> 标签：android, android-mapview, osmdroid

我正在使用 OpenStreetMaps 开发地图应用程序。我正在尝试从`org.osmdroid.views.MapView`类似的点上生成一个点，可以在 Android 版 Google 地图中完成：

```
HelloItemizedOverlay o = new HelloItemizedOverlay(drawable,getApplicationContext());
o.onTap(GeoPoint p, MapView mapView); 
```

到目前为止，我还没有找到等效的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:42:29.900

我意识到我想要做的是触发对指定项目上的 onItemSingleTapUp 实现的调用，所以我做到了：

```
this.onItemSingleTapUp(0, itemizedoverlay.getItem(0)); 
```

# java - 对新排序算法的建议

> ID：13896655
> 
> 赞同：-6
> 
> 时间：2012-12-15T22:07:56.290
> 
> 标签：java, sorting

我想到了新的排序算法，但我无法理解明显解决方案中的问题：

```
public int[] sort(int[] arr){

    //Find the biggest number in the array
    int max=1;
    for(int i : arr)
        if(i>max)
            max=i;

    //Sorting the figures into big array
    int[] LongSorted= new int[max+1];
    for(int i=1; i<LongSorted.length; i++)
        LongSorted[i]=0;
    for(int i : arr)
        LongSorted[i]+=i;

    //Transfer the sorted figures into the original array
    int index=0;
    for(int i=0; i<arr.length; i++){
        while(LongSorted[index]==0){
            index++;
        }
        arr[i]=index;
        if(LongSorted[index]!=(index)){
            for(int j=0; j<(LongSorted[index]/index)-1; j++){
                i++;
                arr[i]=index;
            }
        }
        index++;
    }

    return arr;
} 
```

基本上，该算法使用图形的值作为索引。

如果您想**使用**此方法，请注意不考虑数字“0”。
您可以按照以下说明进行更正：
**1**。将 LongSorted 类型更改为“整数”。
**2** . 将 LongSorted 的初始化“for”中的“i”的值更改为“1”。
**3** . 在最后一个“for”之前的前一行，添加以下条件：

```
 if(LongSorted[0]!=null)
          arr[0]=0; 
```

**4** . 将最后一个“for”中的“i”的值更改为“1”。
**天呐！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T22:13:37.580

如果这应该是有效的 - 它不是。首先，您多次循环遍历各种数组。其中一些不是必需的，它们会减慢算法处理大量数据的速度。

其次，如果您尝试对以下列表进行排序会发生什么？[1; 1000000000]

您最终将创建一个大小为 10 亿+1 的数组，只是为了对两个数字进行排序。那是 40 亿字节。

最后，如果有重复的元素会发生什么？

然后正如评论中指出的那样，这将在负数上失败。

如果您完全是自己提出这个想法，并且是编程新手，那么您实际上走在了真正重要的正确轨道上——一个[Hashtable](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Hashtable.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:38:20.767

***我必须出手相救：***

诚然，这取决于该算法是否有效，并且它仅涵盖 > 0 的正值。但这是一个好主意，并且在边界情况下可能非常有效。

我重写了它，使其更易于阅读，仍然使用就地排序：

```
public static int[] sort(int[] arr) {

    // Find the biggest number in the array
    int max = 1;
    for (int i : arr) {
        if (i > max) {
            max = i;
        }
    }

    // Sorting the figures into big array
    // indexOccurrences[i] is how often the value i occures in arr.
    int[] indexOccurrences = new int[max + 1];
    for (int i : arr) {
        ++indexOccurrences[i];
    }

    // Transfer the sorted figures into the original array
    int arrIndex = 0;
    for (int j = 1; j < indexOccurrences.length; ++j) {
        for (int k = 0; k < indexOccurrences[j]; ++k) {
            arr[arrIndex] = j;
            ++arrIndex;
        }
    }
    assert arrIndex == arr.length;
    return arr;
}

public static void main(String[] args) {
    int[] values = new int[] { 23, 6, 67, 6, 6, 45, 3 };
    values = sort(values);
    System.out.println(Arrays.toString(values));
} 
```

[3、6、6、6、23、45、67]

顺便说一句，这个想法并不新鲜，但这可能被视为对它的支持。

# ruby - ruby haml中链接后的标点符号

> ID：13896656
> 
> 赞同：19
> 
> 时间：2012-12-15T22:08:02.427
> 
> 标签：ruby, haml

我有这个代码：

```
%p
   A debtor with the court's approval can hire attorneys via
   %a{:id=>"proc",:href=>'/codes#rule327'}Section 327. 
```

呈现：

经法院批准的债务人可以通过**第 327 条聘请律师。**

我知道这非常挑剔，但我不希望句号加粗。当我尝试：

```
%p
   A debtor with the court's approval can hire attorneys via
   %a{:id=>"proc",:href=>'/codes#rule327'}Section 327
   \. 
```

它产生：

经法院批准的债务人可以通过**第 327 条**聘请律师。

我想知道如何获得：

经法院批准的债务人可以通过**第 327 条**聘请律师。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-07-16T17:53:32.537

HAML 具有专门设计用于“以比空白删除方法所允许的更精确的方式操作空白”的辅助方法。

共有三种方法：环绕、先行和成功，它们提供了更好的空白控制。在您的情况下，您可以使用这样的成功助手在链接后附加句点：

```
%p
  A debtor with the court's approval can hire attorneys via
  = succeed "." do
    %a{:id=>"proc",:href=>'/codes#rule327'}Section 327 
```

请参阅“辅助方法”下的[HAML 文档。](http://haml.info/docs/yardoc/file.REFERENCE.html)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-15T22:18:04.550

您可以在标签定义之后使用外部的“space Eater”（>）：

```
%p
  A debtor with the court's approval can hire attorneys via
  %a{:id=>"proc",:href=>'/codes#rule327'}>Section 327
  . 
```

[手动参考](http://haml.info/docs/yardoc/file.REFERENCE.html#whitespace_removal__and_)

# excel - SendInput VB 基本示例

> ID：13896658
> 
> 赞同：2
> 
> 时间：2012-12-15T22:08:09.763
> 
> 标签：excel, vba, sendinput

我希望有人可以提供帮助，我试图找到一个模拟键盘命令的 SendInput 代码示例，我希望找到记事本窗口并输入测试消息。

我最初在我正在进行的项目中使用了 SendKeys，SendKeys 功能使我能够将键盘命令转发到我们在工作场所使用的定制软件。

我希望有人可以提供帮助，互联网上的示例似乎不起作用。

如果 SendInput 方法具有侵入性，任何人都可以提出建议，即它是否会对收件人窗口造成任何损坏。

SendKey 方法有效，但可靠性似乎很偶然。

非常感谢

萨拉

编辑：

我在网上找到了下面的代码，下面是SendInput的方法吗？我注意到使用了“SendKey”一词？

```
Private Declare Function SendInput Lib "user32.dll" _
 (ByVal nInputs As Long, ByRef pInputs As Any, _
 ByVal cbSize As Long) As Long
Private Declare Function VkKeyScan Lib "user32" Alias "VkKeyScanA" _
 (ByVal cChar As Byte) As Integer

Private Type KeyboardInput      '   typedef struct tagINPUT {
 dwType As Long                '     DWORD type;
 wVK As Integer                '     union {MOUSEINPUT mi;
 wScan As Integer              '               KEYBDINPUT ki;
 dwFlags As Long               '               HARDWAREINPUT hi;
 dwTime As Long                '              };
 dwExtraInfo As Long           '     }INPUT, *PINPUT;
 dwPadding As Currency         '   8 extra bytes, because mouses take more.
End Type

Private Const INPUT_MOUSE As Long = 0
Private Const INPUT_KEYBOARD As Long = 1
Private Const KEYEVENTF_KEYUP As Long = 2
Private Const VK_LSHIFT = &HA0

Public Sub SendKey(ByVal Data As String)
Dim ki() As KeyboardInput
Dim i As Long
Dim o As Long ' output buffer position
Dim c As String ' character

ReDim ki(1 To Len(Data) * 4) As KeyboardInput
o = 1

For i = 1 To Len(Data)
 c = Mid$(Data, i, 1)
 Select Case c
   Case "A" To "Z": ' upper case
     ki(o).dwType = INPUT_KEYBOARD 'shift down
     ki(o).wVK = VK_LSHIFT
     ki(o + 1) = ki(o) ' key down
     ki(o + 1).wVK = VkKeyScan(Asc(c))
     ki(o + 2) = ki(o + 1) ' key up
     ki(o + 2).dwFlags = KEYEVENTF_KEYUP
     ki(o + 3) = ki(o) ' shift up
     ki(o + 3).dwFlags = KEYEVENTF_KEYUP
     o = o + 4
   Case Else: ' lower case
     ki(o).dwType = INPUT_KEYBOARD
     ki(o).wVK = VkKeyScan(Asc(c))
     ki(o + 1) = ki(o)
     ki(o + 1).dwFlags = KEYEVENTF_KEYUP
     o = o + 2
 End Select
Next i

Debug.Print SendInput(o - 1, ki(1), LenB(ki(1))),
Debug.Print Err.LastDllError
End Sub

Private Sub Command1_Click()
Text1.Text = ""
Text1.SetFocus
DoEvents
Call SendKey("This Is A Test")
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T00:31:02.070

以下代码不是针对 VB.net 而是针对 VB/VBA，它类似于 sendkeys 方法，但可能更可靠一些，因为它专门将密钥发送到目标应用程序。（我得到它的帖子也显示了 sendkeys 方法）

```
Public Declare Function FindWindowX Lib "user32" Alias "FindWindowExA" (ByVal hWnd1 As Long, _
ByVal hWnd2 As Long, ByVal lpsz1 As Long, ByVal lpsz2 As Long) As Long

Public Declare Function FindWindow Lib "user32" Alias "FindWindowA" (ByVal lpClassName As String, ByVal lpWindowName As String) As Long

Private Declare Function PostMessage Lib "user32" Alias "PostMessageA" (ByVal hwnd As Long, _
ByVal wMsg As Long, ByVal wParam As Long, ByVal lParam As Long) As Long

Public Declare Function SendMessage Lib "user32" Alias "SendMessageA" (ByVal hwnd As Long, ByVal wMsg As Long, ByVal wParam As Integer, ByVal lParam As Integer) As Long

Private Const WM_KEYDOWN = &H100
Private Const WM_KEYUP = &H101

Sub Three()
    hWind = FindWindow(vbNullString, "Untitled - Notepad")
    cWind = FindWindowX(hWind, 0, 0, 0)
    Debug.Print PostMessage(cWind, WM_KEYDOWN, vbKeyA, 0)
    Debug.Print PostMessage(cWind, WM_KEYDOWN, vbKeyB, 0)
    Debug.Print PostMessage(cWind, WM_KEYDOWN, vbKeyC, 0)
End Sub 
```

取自[此](http://fracta.net/fracta/index.php/forum/2-excel-vba-forum/8-excel-vba-send-keys-to-another-application-using-vba-sendkeys-command-and-user32dll-postmessage)论坛帖子的代码

如果将其粘贴到 Excel/VBA 中的新模块中并运行记事本的新实例，则执行子时，“abc”应出现在记事本中。

我不明白如何使用它，或者 sendkeys 方法会“损坏”目标窗口。只要您正确安排消息的时间（不是同时向窗口发送大量字符），它就不会引起任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:10:44.207

我设法在网上找到了另一个 SendInput 脚本，我已将其复制到下面以供任何可能感兴趣的人使用。

我一直在使用 SendKeys 从电子表格中复制数据并将其输入到工作系统中，这可以节省宝贵的时间，因为需要输入大量信息。

SendKeys 功能没有任何问题（尽管由于可靠性问题我不得不考虑替代方案），SendInput 是否会对另一个窗口造成任何问题，即除了模拟键盘按钮之外，它会干扰目标窗口的任何其他功能吗？

```
Private Declare Function SendInput Lib "user32.dll" _
 (ByVal nInputs As Long, ByRef pInputs As Any, _
 ByVal cbSize As Long) As Long
Private Declare Function VkKeyScan Lib "user32" Alias "VkKeyScanA" _
 (ByVal cChar As Byte) As Integer

Private Type KeyboardInput      '   typedef struct tagINPUT {
 dwType As Long                '     DWORD type;
 wVK As Integer                '     union {MOUSEINPUT mi;
 wScan As Integer              '               KEYBDINPUT ki;
 dwFlags As Long               '               HARDWAREINPUT hi;
 dwTime As Long                '              };
 dwExtraInfo As Long           '     }INPUT, *PINPUT;
 dwPadding As Currency         '   8 extra bytes, because mouses take more.
End Type

Private Const INPUT_MOUSE As Long = 0
Private Const INPUT_KEYBOARD As Long = 1
Private Const KEYEVENTF_KEYUP As Long = 2
Private Const VK_LSHIFT = &HA0

Public Sub SendKey(ByVal Data As String)
Dim ki() As KeyboardInput
Dim i As Long
Dim o As Long ' output buffer position
Dim c As String ' character

ReDim ki(1 To Len(Data) * 4) As KeyboardInput
o = 1

For i = 1 To Len(Data)
 c = Mid$(Data, i, 1)
 Select Case c
   Case "A" To "Z": ' upper case
     ki(o).dwType = INPUT_KEYBOARD 'shift down
     ki(o).wVK = VK_LSHIFT
     ki(o + 1) = ki(o) ' key down
     ki(o + 1).wVK = VkKeyScan(Asc(c))
     ki(o + 2) = ki(o + 1) ' key up
     ki(o + 2).dwFlags = KEYEVENTF_KEYUP
     ki(o + 3) = ki(o) ' shift up
     ki(o + 3).dwFlags = KEYEVENTF_KEYUP
     o = o + 4
   Case Else: ' lower case
     ki(o).dwType = INPUT_KEYBOARD
     ki(o).wVK = VkKeyScan(Asc(c))
     ki(o + 1) = ki(o)
     ki(o + 1).dwFlags = KEYEVENTF_KEYUP
     o = o + 2
 End Select
Next i

Debug.Print SendInput(o - 1, ki(1), LenB(ki(1))),
'Debug.Print Err.LastDllError
End Sub

Private Sub Command1_Click()
Text1.Text = ""
Text1.SetFocus
DoEvents
Call SendKey("This Is A Test")
End Sub 
```

# qt - QLineEdit 作为模态窗口

> ID：13896659
> 
> 赞同：1
> 
> 时间：2012-12-15T22:08:20.720
> 
> 标签：qt

我有一个继承 QLineEdit 的类 MyLineEdit。我想问一下是否可以让我的班级表现得像一个模态窗口。例如，当 MyLineEdit 对象获得焦点时，它应该等待输入，同时阻止对同一应用程序中其他可见窗口和小部件的输入。但是Qt文档说

> 此属性仅对 windows 有意义

而且我没有任何其他想法如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:19:13.293

把你`QLineEdit`放在一个对话框中，并以模态方式显示它。这是 PyQt 中的一个示例

```
class Window(QtGui.QWidget):

    def __init__(self):
        QtGui.QWidget.__init__(self)
        self.resize(600,400)
        b = QtGui.QPushButton("Click", self)
        b.clicked.connect(self.showTextInput)

    def showTextInput(self):
        dialog = QtGui.QDialog(self)
        dialog.resize(200,30)
        layout = QtGui.QVBoxLayout(dialog)
        line = QtGui.QLineEdit(self)
        layout.addWidget(line)
        dialog.exec_() 
```

# android - 应用内结算测试：android.test.purchased 已拥有

> ID：13896666
> 
> 赞同：130
> 
> 时间：2012-12-15T22:09:07.427
> 
> 标签：android, in-app-billing

我目前正在为未来的应用测试应用内计费，在我第一次成功“购买”测试项目“android.test.purchased”后，现在每次尝试再次购买时都会收到响应代码 7，这意味着我已经拥有这个项目。

> 12-15 23:02:14.149：E/IabHelper(19829)：应用内计费错误：无法购买商品，错误响应：7：商品已拥有

据我了解，这种购买应该总是可行的，对吧？以便开发人员可以测试他/她的应用程序？

如果没有，我如何将其状态“重置”为不拥有？我正在使用 Google In-App Billing Sample 中的 util 包。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-12-20T08:27:00.500

将此代码添加到线程以启动消费请求。

```
int response = mService.consumePurchase(3, getPackageName(), purchaseToken); 
```

这里进行购买测试，purchaseToken 是

```
purchaseToken = "inapp:" + getPackageName() + ":android.test.purchased"; 
```

和

```
if (response == 0) 
```

则消费成功。

也不要忘记将 mService 公开在

> IabHelper.Java

那么就可以像这样访问：

```
int response = mHelper.mService.consumePurchase(3, getPackageName(), purchaseToken); 
```

* * *

## 回答 #2

> 赞同：99
> 
> 时间：2015-05-11T22:46:03.940

无需编写任何特殊的消费代码。只需使用 adb 命令清除 Google Play 商店数据：

```
adb shell pm clear com.android.vending 
```

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2012-12-16T00:30:19.560

事实证明，android.test.purchased 项的行为类似于常规 ID。这意味着如果您想再次购买它，您必须在代码中的某个地方使用它。我认为 Google 文档在这个问题上具有误导性，他们应该添加另一个静态 ID，您可以无休止地购买以进行测试。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2013-03-16T18:39:38.987

应用内版本 3：

```
IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {

    public void onQueryInventoryFinished(IabResult result, Inventory inventory) {

        .....................

        if (inventory.hasPurchase(SKU_CONTENT)) {

            mHelper.consumeAsync(inventory.getPurchase(SKU_CONTENT), null);
        }
    }
}; 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-04-07T08:25:34.220

**版本 3 - 最快的解决方法**：清除 Google Play 商店的缓存将使“android.test.purchased”再次可用。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-09-13T14:47:01.643

**这就是我们可以使用该项目的方式**

```
 consume.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            Thread t = new Thread(new Runnable() {
                @Override
                public void run() {
                    String purchaseToken = "inapp:" + getPackageName() + ":android.test.purchased";
                    try {
                        Log.d("","Running");
                        int response = mService.consumePurchase(3, getPackageName(), purchaseToken);
                        if(response==0)
                        {
                            Log.d("Consumed","Consumed");
                        }else {
                            Log.d("","No"+response);
                        }
                    }catch (RemoteException e)
                    {
                        Log.d("Errorr",""+e);
                    }

                }
            });
            t.start();
        }
    }); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-07-01T12:02:47.547

在我看来，如果您的程序不是为使用该项目而设计的，那么您无需调整代码以清除外部供应商的内存。这将使您的代码更加脆弱，然后您将不得不花费大量时间来添加和删除不属于您的软件的代码，因此实现这样的解决方案是一个糟糕的设计。

对我来说清除 android.test.purchased 的最佳解决方案是

```
adb uninstall com.yourapp.name 
```

进而

```
adb shell pm clear com.android.vending 
```

我不需要清除现金并浏览我的应用程序设置或更改代码。我确实需要将 adb 添加到 Windows 系统的路径变量中，这非常简单。所以是的，你需要使用你可能需要的 adb 所以..

您只需添加您的 C:\ ...\android-sdk\platform-tools; 在环境变量的windows路径中，我想它在mac和linux os中也很简单。希望它可以帮助某人在应用计费中实现 android 少花几天的时间。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-09-06T13:13:31.243

转到 Google Play 开发者控制台，`Order Management`从左侧打开菜单项，然后选择要退款的订单。还要确保删除权利。

[![](../Images/bb2d2777465ff4320626b7e84cb633f7.png)](https://i.stack.imgur.com/Hi6bY.png)

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-09-14T09:28:59.513

主要问题是您必须消耗该`android.test.purchased`物品。但此商品在您的查询库存中不可用，因此您无法使用正常流程消费。

因此，如果您在`IabHelper`课堂上使用 IabHelper，您可以暂时将`IInAppBillingService`mService 更改为 public，以便可以从您的 IabHelper 访问它。

然后在你的课堂上，你可以这样消费，

```
int response = mHelper.mService.consumePurchase(3, getPackageName(), "inapp:"+getPackageName()+":android.test.purchased"); 
```

如果成功，则响应将为 0。

希望这可以帮助。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-07-08T18:30:39.463

出于测试目的，我还建议您在调用初始化 gp 购买流程的方法之前插入一段代码，该代码将清除您购买的所有产品。当您目前只测试一个项目时，这特别舒服。比如像这样：

```
PurchasesResult purchasesResult = mBillingClient.queryPurchases(BillingClient.SkuType.INAPP);
    for (Purchase sourcePurchase : purchasesResult.getPurchasesList()) {
        if(sourcePurchase != null){

            ConsumeResponseListener listener = new ConsumeResponseListener() {
                @Override
                public void onConsumeResponse(String outToken, @BillingResponse int responseCode) {

                    System.out.println("all consumed");
                }
            };
            mBillingClient.consumeAsync(sourcePurchase.getPurchaseToken(), listener);
        }else{
            System.out.println("null");
        }
    }

// and then initiate whole process with clear "shoping basket"

BillingFlowParams.Builder builder = new BillingFlowParams.Builder()
        .setSku(itemName).setType(BillingClient.SkuType.INAPP); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-12-27T17:58:45.293

如果你在测试环境

1）在android.test.purchased的情况下，我可以通过重启android设备来重置假支付（消耗库存）。

2）在InApp util中有一个名为Security.java的文件，如下所示，用于临时。由于安全异常，测试支付（假）总是返回假。

```
public static boolean verifyPurchase(String base64PublicKey,
                                     String signedData, String signature) {
    return true; } 
```

然后在你的 OnIabPurchaseFinishedListener 调用 fechInvForconsumeItem()

```
IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener
            = new IabHelper.OnIabPurchaseFinishedListener() {
        public void onIabPurchaseFinished(IabResult result,
                                          Purchase purchase)
        {
            if (result.isFailure()) {
                // Handle error
                Log.e("123","Failure");

                return;
            }
            else if (purchase.getSku().equals(ITEM_SKU)) {
                Log.e("123","PURCAsed");
                fechInvForconsumeItem(); // Restart device if not consume

            }

        }
    }; 
```

fechInvForconsumeItem() 是

```
 public void fechInvForconsumeItem() {
    mHelper.queryInventoryAsync(mReceivedInventoryListener);
}
IabHelper.QueryInventoryFinishedListener mReceivedInventoryListener
        = new IabHelper.QueryInventoryFinishedListener() {
    public void onQueryInventoryFinished(IabResult result,
                                         Inventory inventory) {

        if (result.isFailure()) {
            // Handle failure
            Log.e("11","Failure");

        } else {
            Log.e("11","suc");
            mHelper.consumeAsync(inventory.getPurchase(ITEM_SKU),
                    mConsumeFinishedListener);
        }

    }
}; 
```

消费监听器是

```
 IabHelper.OnConsumeFinishedListener mConsumeFinishedListener =
        new IabHelper.OnConsumeFinishedListener() {
            public void onConsumeFinished(Purchase purchase,
                                          IabResult result) {

                if (result.isSuccess()) {
                } else {
                    // handle error
                    Log.e("11","sucConsume");
                }
            }
        }; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-02-06T10:29:49.477

```
IabHelper.QueryInventoryFinishedListener 
       mQueryFinishedListener = new IabHelper.QueryInventoryFinishedListener() {
       public void onQueryInventoryFinished(IabResult result, Inventory inventory)   
       {
          if (result.isFailure()) {
             return;
           }          
          try {

                if(inventory.hasPurchase("product_sku_id"))
                {   
                     isItemEnable= true;
                     mHelper.consumeAsync(inventory.getPurchase("product_sku_id"),null);            
                }
                else
                {
                       isItemEnable = false;
                }           

            } catch (Exception e) {
                e.printStackTrace();
            }
       }

    }; 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2015-04-22T08:23:59.560

就我而言，谷歌似乎没有记录该商品的购买记录。相反，Google Play 服务的本地副本会缓存购买。这样，当在同一设备上发出第二个请求时，`android.test.purchased already owned`就会出现。但是，使用其他设备或重置设备会清除缓存，并允许重复购买。

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2016-03-20T15:34:10.287

就我而言，我只需要清除应用程序缓存。清除缓存后，我能够再次启动购买流程。

从我的设备（4.4.2），我导航到“设置->应用程序管理器”。接下来，我从“已下载”选项卡中选择该应用程序，然后选择“清除缓存”。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2012-12-15T22:52:53.817

这是消耗品和非消耗品的区别；非消耗性物品（您似乎在这里处理的东西）会持续跟踪它们的状态，而消耗性物品可以多次购买。您必须进入 Play 管理控制台并取消/退款以再次测试。

# css - 字体“Futura”无法在任何 PC 上运行

> ID：13896672
> 
> 赞同：3
> 
> 时间：2012-12-15T22:11:27.370
> 
> 标签：css, fonts

有一种名为“Futura”的字体，它适用于所有 Mac，甚至 iPhone，但不适用于 PC。所以在我的虚拟主机上，我有一个名为 styles.css 的 css 文件。在顶部，我有：

```
@font-face {

 font-family: 'Futura';

 src: url("Futura.eot");
 /* FOR IEs */

 src: local('Futura'), url('Futura.ttf') format('truetype');
 /* for other web browsers */

} 
```

在和styles.css 相同的地方，我有futura.ttf 和futura.eot。我从一个网站上得到了它们，所以我不知道这两个文件是否损坏。但所有字体在 PC 上仍显示为 Times New Roman。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T23:08:32.637

1) 确保 font-family 值优雅地降级：

```
font-family: 'Futura', Arial, sans-serif; 
```

2) 如果您托管字体的副本，请确保它在您的服务器上并且 URL 正确指向它。也就是说，如果您刚刚下载了字体并希望在您的网站上使用它，那么有更好的方法可以做到这一点。您将需要一个仅包含您实际需要的字符集和权重的网络优化版本。否则，您将迫使每个访问您网站的访问者下载价值 200k 的字体——没有 bueno。一个不错的选择是 TypeKit (http://typekit.com)，它确实有 Futura PT。

如果您不想付费，Google Web Font Repository 是另一个很棒的资源。您将找不到 Futura，但他们有很多其他选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-15T22:30:05.103

Futura 字体受版权保护，只有在您直接或间接与字体供应商达成协议后，您才能合法地将其用作网络字体。请参阅[Futura 上的 Linotype 页面](http://www.linotype.com/472/futura-family.html)。在仔细检查您是否按照说明使用字体后，请联系字体供应商了解使用问题。

如果您发现成本过高，请考虑尝试找到足够相似或满足您需求的合适免费字体。[在Google Web Fonts](http://www.google.com/webfonts)中有一些不错的无衬线字体，有几种字体。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-15T22:33:32.357

*   这可能会更安全：

    ```
    font-family: Futura, "Trebuchet MS", Arial, sans-serif; 
    ```

    通过[http://cssfontstack.com/](http://cssfontstack.com/)

*   **此外**，使用 typekit 可能更安全，因此可以确保它在任何操作系统或浏览器上正确显示。例如：[https ://typekit.com/fonts/futura-pt](https://typekit.com/fonts/futura-pt)

    [Google 的 WebFont Loader](https://developers.google.com/webfonts/docs/webfont_loader)允许您从各种网络字体中提取。

    > WebFont Loader 是一个 JavaScript 库，与 Google Web Fonts API 相比，它可以让您更好地控制字体加载。WebFont Loader 还允许您使用多个 Web 字体提供程序。它由 Google 和 Typekit 共同开发。

*   您还应该确保使用正确的字体名称。您的 PC 上可能有一个变体。例如：Futura Book BT、Futura Lt、Futura Md、Futura Bk、Futura Hv 等。

# javascript - 加载后清除 AJAX 结果

> ID：13896674
> 
> 赞同：0
> 
> 时间：2012-12-15T22:11:41.230
> 
> 标签：javascript, jquery, ajax

我正在使用以下 AJAX 调用来生成搜索建议：

```
$(".smart-suggestions").load('id-get-data.php?searchword=' + self.value); 
```

搜索建议会根据用户的输入返回到“div”中。我想知道是否有一种方法可以使用 javascript、jquery 或 ajax 以某种方式“清除”从 ajax 返回的数据？删除返回的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T22:15:07.637

如果您使用`load`，您可以附加时间来“愚弄”缓存机制

```
$(".smart-suggestions").load('id-get-data.php?searchword=' + self.value +'&x=' +
    (+new Date())); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:16:18.440

您可以发送请求`$.ajax`并添加`cache: false`到选项中：

```
$.ajax({
    url: 'id-get-data.php',
    type: 'GET',
    data: {
        searchword: self.value
    },
    cache: false,
    success: function(data) {
        $('.smart-suggestions').html(data);
    }
}); 
```

# javascript - 读取和写入数据到数组中的 cookie

> ID：13896676
> 
> 赞同：0
> 
> 时间：2012-12-15T22:11:46.183
> 
> 标签：javascript, jquery, html, arrays, cookies

我想要实现的是在 cookie 中存储 2 个数组，例如：`["reminder1","reminder2"]``["time1","time2"]`

两个 ` 字符用于分隔两个数组。

使用我拥有的当前代码，cookie 的值只是 ，仅`reminder1,time1`此而已。

我真的在这里做错了什么，但在这一点上，我不知道如何解决这个问题。

到目前为止我的代码：

标记：

```
<table id="reminders">
    <thead>
        <tr>
            <td>Emlékeztető szövege</td>
            <td>Időpont</td>
            <td>Műveletek</td>
        <tr>
    </thead>
    <tbody>
        <tr class="remdef">
            <td class="remtxt"><em>Kattints a módosításhoz!</em></td>
            <td class="remtim"><input type="text" class="datepicker"></td>
            <td class="remope" style="opacity:1.0;"></td>
        <tr>
    </tbody>
</table> 
```

脚本：

```
var addnew_html = '<span class="typicn plus '+readCookie('nev')+'" onclick="remtbl(\'addnew\')"></span>';
var modify_html = '<span class="typicn edit '+readCookie('nev')+'" onclick="remtbl(\'modify\')"></span>';
var remove_html = '<span class="typicn times '+readCookie('nev')+'"  onclick="remtbl(\'remove\')"></span>';

$('#reminders tbody tr.remdef td.remtxt em').click(function(){
    defhtml = '<em>'+$(this).html()+'</em>';
    $(this.parentNode).html('<textarea width="100%" cols="50" id="rem-editing" class="rem-edit'+$('#reminders tbody tr').index($(this).parents('#reminders tbody tr'))+'"></textarea>');
    changeModifOptions($('#reminders tbody tr.remdef td.remope'),['addnew']);
});

function changeModifOptions(selector,options){
    $(selector).html(function(){
        return  ((!(options.indexOf('addnew'))) ? addnew_html : '' )+((!(options.indexOf('modify'))) ? modify_html : '')+((!(options.indexOf('remove'))) ? remove_html : '');
    });
}

function remtbl(cmd){
    if (cmd == 'addnew'){
        var cookieval = readCookie('reminder');
        createCookie('reminder',($('#reminders tbody tr.remdef td.remtxt textarea').val().replace('<','&lt;').replace('>','&gt;')+','+$('#reminders tbody tr.remdef td.remtim input.datepicker').val()+( (cookieval) ? '``'+cookieval : '')),parent.longtime);
        $('#reminders tbody').append('<tr class="remelm"><td class="remtxt">'+Array(readCookie('reminder').split('``'))[0]+'</td><td class="remtim"><input type="text" class="datepicker" value="'+Array(readCookie('reminder').split('``'))[1]+'"></td><td class="remope" style="opacity:1.0;"></td><tr>')
        changeModifOptions($('#reminders tbody tr td.remope:last'),['modify','remove']);
        $('#reminders tbody tr.remdef td.remtim input.datepicker').val('');
        $('#reminders tbody tr.remdef td.remope').html('');
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:23:19.797

javascript string.split 的第一个参数采用字符或正则表达式。在您发布的代码中，您都没有做这些。

[http://www.w3schools.com/jsref/jsref_split.asp](http://www.w3schools.com/jsref/jsref_split.asp)

要使其成为有效的正则表达式，请使用 slash backtic 反斜杠。像这样：

```
/``/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:55:36.813

正如@Andreas 建议的那样，您可以使用将数组转换为 JSON 字符串并使用`JSON.stringify( array)`将其返回到 javascript 数组`JSON.parse( string)`

例子

```
var arr=['a','b','c'];
var json=JSON.stringify(arr);

createCookie('reminder', json);

var arrayFromCookie= JSON.parse( readCookie('reminder')); 
```

对于不支持 JSON 对象的旧浏览器，请包含 json.js 库

# actionscript-3 - 遇到文件结尾。在 flash.display::BitmapData/setPixels()

> ID：13896677
> 
> 赞同：0
> 
> 时间：2012-12-15T22:12:34.693
> 
> 标签：actionscript-3, flash, actionscript, eof, flash-cs6

我正在尝试将库中的 png 文件加载到位图数据中，但尝试这样做时会出现 EOF 错误。

> 遇到文件结尾。在 flash.display::BitmapData/setPixels()

我在下面的代码中使用了值添加了注释。

```
var bitmapData_texture:BitmapData = new BitmapData(image.width, image.height, true, 0x0);
bitmapData_texture.draw(image);
var pixels:ByteArray = bitmapData_texture.getPixels(rect_bmp);
var bitmapData:BitmapData = new BitmapData(rect_bmp.width,rect_bmp.height,true,0x0);
trace("image width : "+image.width.toString());       //image width : 161
trace("image height: "+image.height.toString());      //image height: 171
trace("rect x      : "+rect_bmp.x.toString());        //rect x      : 0
trace("rect y      : "+rect_bmp.y.toString());        //rect y      : 0
trace("rect width  : "+rect_bmp.width.toString());    //rect width  : 161
trace("rect height : "+rect_bmp.height.toString());   //rect height : 2
trace("bmpd width  : "+bitmapData.width.toString());  //bmpd width  : 161
trace("bmpd height : "+bitmapData.height.toString()); //bmpd height : 2
bitmapData.setPixels(rect_bmp,pixels); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:34:20.113

我看不出（发布的）代码有什么问题。您可以尝试在 getPixels 调用后直接跟踪 byteArray 信息。可以提供对问题的洞察力吗？

```
//should be 4 bytes for every pixel in byteArray; so 4x161x2 = 1288
trace(pixels.length);
//should be at start of byteArray; so 0
trace(pixels.position);
//if position=0, this should be same as length
trace(pixels.bytesAvailable); 
```

顺便说一句，我不同意 Nallaths 的评论——您确实可以直接从库（或通过 url）加载 PNG，而不用担心压缩。

# java - 在 Java 中定义对象内部和外部循环的不同之处

> ID：13896680
> 
> 赞同：0
> 
> 时间：2012-12-15T22:13:24.600
> 
> 标签：java, loops

我今天正在努力处理我的部分代码，以从文件中读取一些数据并将它们作为其属性添加到对象中（我知道如何在文件中添加/读取对象而不会有这种麻烦，但我想这样做）如下：

文件是这样的：

```
111,john,23.1
222,jack,22.5
234,adam,12.8 
```

我试图使用以下方法读取此文件：

```
public ArrayList<Staff> LoadAllStaffs(){
    ArrayList<Staff> staffs = new ArrayList<Staff>();
    File file = new File(stafffile);
    Staff tmpstaff = new Staff();
    try {
        BufferedReader inputfile = new BufferedReader(new FileReader(stafffile));
        String tmp;
        while((tmp = inputfile.readLine()) != null){
            StringTokenizer st = new StringTokenizer(tmp , ",");
            tmpstaff.setID(Integer.valueOf(st.nextToken()));
            tmpstaff.setFirstName(st.nextToken());
            tmpstaff.setSalary(Double.valueOf(st.nextToken()));
            staffs.add(tmpstaff);
            }
        } 
    catch (IOException e) {
    }
    return staffs;
} 
```

使用`println`返回的输出`ArrayList`：

```
234,adam,12.8
234,adam,12.8
234,adam,12.8 
```

我只是移动了`Staff tmpstaff = new Staff();`while循环内部，它显示了它应该做什么。

为什么会这样？我读到——即使在这里——在循环内部或外部定义变量（嗯，这里是一个 Object ）没有任何区别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T22:15:06.847

您不是`Staff`在循环内创建新实例，而是在所有迭代中重用同一个实例。因此，您覆盖这些值并添加相同的对象。

移动

```
Staff tmpstaff = new Staff(); 
```

到循环内的第一行。

更新：为了解决`Vash`的评论，这里的问题可以解释为，如果要存储 3 个对象，则需要创建这样的 3 个对象。您可以重用**引用**（`tmpstaff`变量），并且在定义它的地方有效地重用它并不重要（只要对它的所有引用都在同一范围内。但是您必须创建 3 个对象，这意味着 3 个`new`命令。

更新2：为了简单起见，文字`I read -even here- that defining variables (well, here its an Object ) inside or outside loops doesn't make any difference.`意味着

```
File file = new File(stafffile);
Staff tmpstaff = null; // or simpler, Staff tmpstaff;
try {
   ...
   while((tmp = inputfile.readLine()) != null){
     tmpstaff = new Staff();
     ... 
```

和

```
 while((tmp = inputfile.readLine()) != null){
     Staff tmpstaff = new Staff();
     ... 
```

是等价的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T22:20:01.670

操作员`new`负责称为实例的“对象创建”。因此，当您在循环之外创建他时，您只有一个实例，即您修改每个循环运行。在循环内创建该对象时，每次运行都有单独的实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T22:20:03.590

Java 通过对对象的引用进行操作。因为您只创建了一个 Staff() 对象，所以只有一个引用。因此，在 while 循环中，您只需更改 Object 的属性并将相同的 Reference 添加到 List 中 3 次。

您可以在循环外定义变量，但您必须在循环内实例化一个新对象，使其看起来像这样：

```
Staff tmpStaff
while((tmp = inputfile.readLine()) != null){
tmpStaff = new Staff();
[additional Code here]
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-15T22:20:51.837

如果您想在循环的每个通道上创建一个新的 Staff，那么您必须在使用它之前在循环内部进行创建。

像你一样在循环之外完成，你确实创建了一个新的 Staff，但每次都在使用它。

仅当使用 new 关键字时才会创建新对象。

# php - jquery表单扩展ajax

> ID：13896682
> 
> 赞同：0
> 
> 时间：2012-12-15T22:14:04.790
> 
> 标签：php, jquery, ajax, forms

[http://www.malsup.com/jquery/form/#html](http://www.malsup.com/jquery/form/#html)

我在一个页面上有多个表单。他们都使用同一个类“myForm”。使用上面的扩展，我可以让他们成功处理并 POST 到`ajax-process.php`.

```
<script> 
    // wait for the DOM to be loaded 
    $(document).ready(function() { 
        // bind 'myForm' and provide a simple callback function 
        $('.myForm').ajaxForm(function() { 
            alert("Thank you for your comment!"); 
        }); 
    }); 
</script> 
```

但是，我对响应有疑问。我需要获取用户提交的评论以显示在提交它的相应 div 中。我可以将其设置为表单中的隐藏字段，也可以设置为文件中的文本`ajax-process.php`。

我不知道如何将响应从`ajax-process.php`脚本中得到我可以使用的东西，如果我运行以下它会附加到所有表单（显然）。

我能想到的唯一方法是使用单个 DIV ID 而不是单个类重复脚本。但是，必须有一种方法来更新`ajax-process.php`返回的 div。

```
// prepare the form when the DOM is ready 
$(document).ready(function() { 
    // bind form using ajaxForm 
    $('.myForm').ajaxForm({ 
        // target identifies the element(s) to update with the server response 
        target: '.myDiv', 

        // success identifies the function to invoke when the server response 
        // has been received; here we apply a fade-in effect to the new content 
        success: function() { 
            $('.myDiv').fadeIn('slow'); 
        } 
    }); 
}); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:02:00.227

试试这个代码：

```
// prepare the form when the DOM is ready
$(document).ready(function() {
    // bind form using ajaxForm
    $('.myDiv').each(function() {
        var self = this;
        $(this).find("form").ajaxForm({
            // target identifies the element(s) to update with the server response
            target: this,

            // success identifies the function to invoke when the server response
            // has been received; here we apply a fade-in effect to the new content
            success: function() {
                $(self).fadeIn('slow');
            }
        });
    });
}); 
```

[工作样本（在按下按钮之前按“运行”）](http://jsfiddle.net/johnsmith123/VFVpU/ "工作样本1")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:23:43.487

* * *

文档：

成功

表单提交后调用的回调函数。如果提供了“成功”回调函数，则在从服务器返回响应后调用它。它传递了以下参数：

1.  responseText 或 responseXML 值（取决于 dataType 选项的值）。
2.  状态文本
3.  xhr（如果使用 jQuery < 1.4，则为 jQuery 包装的表单元素）
4.  jQuery 包装的表单元素（如果使用 jQuery < 1.4，则为未定义）

* * *

这意味着您的选项可能如下所示：

```
$('.myForm').ajaxForm({
    // success identifies the function to invoke when the server response 
    // has been received; here we apply a fade-in effect to the new content 
    success: function(response, undefined, undefined, form) {
        //find .myDiv class in the current form
        form.find('.myDiv').html(response).fadeIn('slow');
    }
});​ 
```

[​演示](http://jsfiddle.net/oceog/XvXEN/)

# c++ - ARM STM32 需要兼容的编译器

> ID：13896684
> 
> 赞同：0
> 
> 时间：2012-12-15T22:14:26.840
> 
> 标签：c++, compiler-construction, embedded, touch, arm

我对使用嵌入式硬件进行编程相对较新，尽管对编程并不陌生。[我从http://microcontrollershop.com/product_info.php?products_id=5058&osCsid=9jkr9kor7d76qgvu76knsr0hp2](http://microcontrollershop.com/product_info.php?products_id=5058&osCsid=9jkr9kor7d76qgvu76knsr0hp2)购买了 STM32F407VGT6 多媒体板、TFT LCD、SD、加速度计、USB 。我以为我可以将 microC 用于 ARM 编译器，但将演示版本误读为 80 kb 而不是实际的 8kb。买这个花了300，我真的没有钱。我试图找到一个兼容的不同编译器，但到目前为止还没有。

我确实发现有人提到 Code Sourcery lite 可能会工作，尽管没有人提到这个特定的板，但免费版本尚未与 eclipse 集成，我无法成功集成它。

我真的不知道该怎么做，因为我宁愿不必购买全新的控制器，屏幕只是为了继续我的项目，我不想花钱购买这个编译器

如果有人知道与此板兼容的免费 IDE（即使它仅对学生免费），将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:11:50.250

A compiler is required only to support the instruction set of the processor. Board specific support itself is not the responsibility of the compiler. Moreover in the case of ARM based devices, only the ARM core is the responsibility of the compiler; support for peripherals, and in particular the PLL clocking scheme for your part are also not the responsibility of the compiler. So the fact that your board is not mentioned in the documentation is largely irrelevant.

Some tool-chains and particularly IDE's from the likes of Keil (an ARM subsidiary) and IAR provide a huge amount of chip and board support. Both these companies provide demo versions, Keil's I believe is good for at least 32K, and the [IDE also supports free GNU tools such as Code Sourcery](http://www.keil.com/arm/gnu.asp), which has no restrictions on code size.

However in many cases and in particular the case of the STM32, a lot of the board support you need is available from the chip vendor. ST provide a standard peripheral library and ARM CMSIS (ARM's standardised Cortex-M support API), plus many other libraries besides. Keil actually ships ST's Standard Peripheral Library and CMSIS with its toolchain, but getting it form ST ensures the latest version. The libraries and manuals can be found ion the Design Support tab [here](http://www.st.com/internet/mcu/product/252140.jsp). The board page linked in your question has a link to download example code to support the off-chip board peripherals.

So the upshot is that Code Sourcery or other ARM GCC distribution will work fine, but you may need to build your complete development environment from parts such as chip or board vendor supplied libraries plus an IDE/debugger environment such as Eclipse or uVision.

With respect to using Eclipse, there is an article [here](https://sites.google.com/site/stm32discovery/open-source-development-with-the-stm32-discovery/setting-up-eclipse-for-stm32-discovery-development) describing how to do it for the STM32 Discovery board; most of which is applicable to your board at least for building if not for debugging/flash programming - the Discovery board has a built-in STLink JTAG debugger.

* * *

**Update June 2021**

A lot of the above is out-of date ST have largely deprecated support for the SPL and do not even provide it for newer series such as STM32F7, replacing it with he STM32Cube framework.

Importantly however ST now provide a free IDE with a toolchain and CubeMX integrated: [https://www.st.com/en/development-tools/stm32cubeide.html](https://www.st.com/en/development-tools/stm32cubeide.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:40:50.467

你考虑过Yagarto吗？
http://www.yagarto.de/
它适用于 Windows 和 MacOS。

或 GNU ARM：
http :
//www.gnuarm.com/ 主要在 Linux 和 MacOS 上工作（也可以通过 Cygwin 运行 Windows）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T22:48:56.920

将 code sourcery lite 添加到您的路径，以便您可以从命令行使用它，然后使用 CDT 安装 Eclipse。安装后创建新的交叉编译可执行项目。输入 arm-none-eabi （验证这是您的工具链的前缀），您应该能够编译和调试您的项目。

# javascript - 具有 onchange 功能的 HTML5 滑块

> ID：13896685
> 
> 赞同：12
> 
> 时间：2012-12-15T22:14:34.020
> 
> 标签：javascript, html, slider

我有一个滑块（输入类型范围），它应该在更改值时运行一个函数。然后该函数应在单独的 div 容器中显示新值。在函数中放置警报后，我知道该函数没有被调用，但是在谷歌搜索一个小时并尝试了几种不同的方法后，我找不到错误。

这是 HTML 部分：

```
<input id="slide" type="range" min="1" max="100" step="1" value="10" onchange="updateSlider(this.value)">

<div id="sliderAmount"></div> 
```

JavaScript：

```
// Slider
function updateSlider(slideAmount)
{
  alert("error");
  var sliderDiv = document.getElementById("sliderAmount");
  sliderDiv.innerHTML = slideAmount;
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-15T22:23:10.290

它可以工作，您只需要确保在呈现元素时定义了 JavaScript 函数，例如：

```
<script>
    function updateSlider(slideAmount) {
        var sliderDiv = document.getElementById("sliderAmount");
        sliderDiv.innerHTML = slideAmount;
    }
</script>
<input id="slide" type="range" min="1" max="100" step="1" value="10" onchange="updateSlider(this.value)">
<div id="sliderAmount"></div> 
```

看这个演示：[https ://jsfiddle.net/Mmgxg/](https://jsfiddle.net/Mmgxg/)

更好的方法是删除 inline`onchange`属性：

```
<input id="slide" type="range" min="1" max="100" step="1" value="10">
<div id="sliderAmount"></div> 
```

然后在你的 JavaScript 代码中添加监听器：

```
var slide = document.getElementById('slide'),
    sliderDiv = document.getElementById("sliderAmount");

slide.onchange = function() {
    sliderDiv.innerHTML = this.value;
} 
```

[https://jsfiddle.net/PPBUJ/](https://jsfiddle.net/PPBUJ/)

# css - Firefox 添加了一些不应该存在的填充。我怎样才能解决这个问题？

> ID：13896695
> 
> 赞同：0
> 
> 时间：2012-12-15T22:15:37.923
> 
> 标签：css, firefox

我的主页在 Safari 和 Chrome 中显示得很好，但在 Firefox 中，图像之间有额外的空间。关于如何摆脱它的任何想法？这是我正在开发的[网站。](http://www.ashleyhinck.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:22:19.823

图像行之间有白色水平条纹，因为图像显示为内联内容，并且它们被渲染为好像它们是大字母 - 位于文本基线上，并且基线下方有一些空白空间以允许下降。

有多种解决方案；这里最简单的可能是添加CSS规则

```
img { display: block; } 
```

这使得图像块元素未按文本方式处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:22:32.443

图像是内联元素，因此如果源中有空间，它将被渲染。尝试删除空格：

```
<img /><img />

<!-- or -->

<img /><!--
--><img /> 
```

或尝试此处列出的许多其他技术之一：http: [//css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

# ruby-on-rails - 特定属性栏的验证

> ID：13896696
> 
> 赞同：0
> 
> 时间：2012-12-15T22:15:46.423
> 
> 标签：ruby-on-rails, forms, validation, model

我在验证一个表单时遇到问题，我有一个具有多个属性的 Product 模型，但我想创建一种方法来验证以下几乎一个属性的存在：

产品.rb

```
 attr_accessible :ship_int, ship_df, :tipo_envio

  #I'm trying to validate :ship_df like this:

validates :ship_df, :presence => { :message => "*seleciona al menos una opcion de envio"}, 
:allow_blank => true, :on => :create, :if => :almost_one_option_df?

 def almost_one_option_df?
    ship_df != nil || tipo_envio != nil || ship_int != nil
 end 
```

问题是，我如何验证这三个属性中的几乎一个是否存在？如果一个存在，则可以创建产品。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:25:26.817

`ship_df`我认为您想验证,`tipo_envio`或中的至少一个`ship_int`是否已设置？如果其中一个、两个或三个有值，它是有效的，但如果没有一个有值，它不是？

如果是这样，我会检查`blank`not `nil`：

```
validate :any_present?

def any_present?
  if %w(ship_df tipo_envio ship_int).all?{|attr| self[attr].blank?}
    errors.add :base, "*seleciona al menos una opcion de envio"
  end
end 
```

# php - PHP ZipArchive 不保存

> ID：13896699
> 
> 赞同：1
> 
> 时间：2012-12-15T22:16:01.467
> 
> 标签：php, ziparchive

我正在为压缩图像创建一个 PHP 自动下载器。但是，下载的 ZIP 是空的！希望有人会知道这个问题 - 它一定很简单。

非常感谢，尼克。

**PHP**

```
 foreach($_SESSION["photoBasket"] as $id){
       $files[] = array(
               "loc" => "../photos/$id.png",
               "name" => "$id.png"
                );
    }

    $zipname = tempnam(sys_get_temp_dir(), 'zip');
        $zip = new ZipArchive();
        $zip->open($zipname, ZipArchive::CREATE);
        foreach ($files as $file) {
          $zip->addFile($file["loc"],$file["name"]);
          //$zip->addFromString($file["name"],"something here"); WORKS FINE
        }
        $zip->close();

        header("Pragma: public");
        header("Expires: 0");
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
        header('Content-Type: application/zip');
        header('Content-Disposition: attachment; filename=test.zip');
    readfile($zipname);
    unlink($zipname); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T22:32:00.417

您必须在可写文件夹中创建文件；此外，您的文件名应该是唯一的，这样两个人同时下载 ZIP 就不会互相覆盖。让 PHP 使用[tempnam()](http://php.net/manual/en/function.tempnam.php)和[sys_get_temp_dir()](http://php.net/manual/en/function.sys-get-temp-dir.php)来解决这个问题。并且不要忘记在将临时文件发送到网络后将其删除！

```
$zipname = tempnam(sys_get_temp_dir(), 'zip');
...
unlink($zipname); 
```

# c# - 在 .NET 3.5 中使用反射生成子类列表

> ID：13896716
> 
> 赞同：4
> 
> 时间：2012-12-15T22:19:05.983
> 
> 标签：c#, reflection, .net-3.5

在运行时，我想指定一个父类，然后程序将生成所有子类（无论多少代）的列表。例如，如果我`Entity`作为父母， and `Item:Entity`，`Actor:Entity`就会有两个字符串，“Actor”和“Item”。

我看到这`System.Reflection.TypeInfo`正是我正在寻找的。但是，这似乎是 .NET 4.5 独有的，不幸的是我的环境停留在 3.5。

在 .NET 3.5 中是否有其他方法可以做到这一点，或者我应该考虑升级吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T22:36:55.717

```
var pType = typeof(Entity);
IEnumerable<string> children = Enumerable.Range(1, iterations)
   .SelectMany(i => Assembly.GetExecutingAssembly().GetTypes()
                    .Where(t => t.IsClass && t != pType
                            && pType.IsAssignableFrom(t))
                    .Select(t => t.Name)); 
```

[演示](http://ideone.com/ruBhia)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T22:24:00.463

一种可能的方式是利用该`Type.IsAssignableFrom`方法。您将遍历所有类型，并选择那些为真的类型。

基本上，它会像

```
Type parent = Type.GetType("Entity");
Type[] types = Assembly.GetExecutingAssembly().GetTypes(); // Maybe select some other assembly here, depending on what you need
Type[] inheritingTypes = types.Where(t => parent.IsAssignableFrom(t)); 
```

我目前没有可用的编译器，所以我无法验证它，但它应该是正确的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-30T14:22:24.710

这是我用来在选定程序集中查找某个类（也可以是抽象类）的所有子类的方法：

```
public class InheritedFinder
{
    public static Type[] FindInheritedTypes(
        Type parentType, Assembly assembly)
    {
        Type[] allTypes = assembly.GetTypes();
        ArrayList avTypesAL = new ArrayList();

        return allTypes.Where(
            t => parentType.IsAssignableFrom(t) && t != parentType).ToArray();
    }
} 
```

只需致电

```
var availableTypes = InheritedFinder.FindInheritedTypes(
        typeof(YourBaseClass),
        System.Reflection.Assembly.GetExecutingAssembly()); 
```

这将为您提供 YourBaseClass 的可用子项列表。这样做的好处是——它还可以找到孩子的孩子，所以你可以使用多层次的抽象类。如果您需要创建每个孩子的实例，很简单：

```
var availableTypes= InheritedFinder.FindInheritedTypes(
    typeof(Shape), System.Reflection.Assembly.GetExecutingAssembly());
foreach (var t in availableTypes)
{
    try
    {
        YourBaseClass nInstance = (YourBaseClass)Activator.CreateInstance(t);
        //nInstance is now real instance of some children
    }
    catch (Exception e)
    {
        //recommended to keep here - it'll catch exception in case some class is abstract (=can't create its instance)
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-17T17:09:09.900

您可以使用以下代码：

```
var parrents = Assembly.GetExecutingAssembly().GetTypes().Where(a => typeof(Person).IsAssignableFrom(a)).ToList(); 
```

# .net - 传递变量还是直接调用类变量？返回变量与直接设置类变量？

> ID：13896718
> 
> 赞同：0
> 
> 时间：2012-12-15T22:19:32.180
> 
> 标签：.net, vb.net, coding-style

其中哪一个会被认为是更好的编码习惯？这些都达到了相同的结果（显然是一个非常简单的例子），但我不知道尝试和维护功能可移植性是否更好。

1

```
Public Sub myFunction()
    classInteger = GetLength(classString)
End Sub

Public Function GetLength(ByVal localString As String) As Integer
    localInteger = localString.Length
    Return localInteger
End Function 
```

2

```
Public Sub myFunction()
    GetLength(classString)
End Sub

Public Sub GetLength(ByVal localString As String) As Integer
    classInteger = localString.Length
End Sub 
```

3

```
Public Sub myFunction()
    classInteger = GetLength()
End Sub

Public Function GetLength() As Integer
    localInteger = classString.Length
    Return localInteger
End Function 
```

4

```
Public Sub myFunction()
    GetLength()
End Sub

Public Sub GetLength() As Integer
    classInteger = classString.Length
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:40:22.093

这些例子太简单了，所以这两种情况都没有意义。你不会有任何一种方法，你只会这样做：

```
classInteger = classString.Length; 
```

即使这毫无意义，也没有理由将一个成员的属性存储在另一个成员中。

要评论示例的可能用途：

1.  这是最灵活的，如果您需要对不同的成员执行相同的操作并存储在不同的其他成员中，则可以使用它。不过，该功能应该是静态的（共享的）。

2.  如果你对不同的成员做同样的事情，这将被使用，但结果总是在同一个成员中。

3.  如果你对一个成员做某事，有时将它存储在另一个成员中，有时对它做一些不同的事情，这将被使用。

4.  这是没有意义的。在这种情况下应该只有一种方法。

# location - applescript 中的变异元音（德语：“元音变音”）

> ID：13896724
> 
> 赞同：0
> 
> 时间：2012-12-15T22:20:11.643
> 
> 标签：location, applescript

我根据我的 IP 地址获得位置我现在的问题是我住在“维尔茨堡”（德国），但我的脚本说“维尔茨堡”。我怎样才能得到“¸”到“ü”？

```
--Get the IP
set webadress to do shell script "curl http://bot.whatismyipaddress.com/"
set tURL to "http://whatismyipaddress.com/ip/" & webadress

--Get the location
set TID to AppleScript's text item delimiters
set webadress to do shell script "curl " & tURL
set AppleScript's text item delimiters to ¬
    "<tr><th>City:</th><td>"
set text1 to text item 2 of webadress
set AppleScript's text item delimiters to "</td></tr>"
set location to text item 1 of text1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:04:39.263

该网站使用 ISO-8859-1，但您可以使用`iconv -f iso-8859-1 -t utf8`.

`do shell script "curl http://whatismyipaddress.com/ip/$(curl http://bot.whatismyipaddress.com/) | iconv -f iso-8859-1 -t utf8 | sed -En 's|<tr><th>City:</th><td>(.*)</td></tr>|\\1|p'"`

# android - Sqlite 命令错误

> ID：13896734
> 
> 赞同：0
> 
> 时间：2012-12-15T22:21:56.903
> 
> 标签：android, database, sqlite, mobile, titanium

我在 sqlite manager 中运行 sqlite 命令。我的命令如下

```
 CREATE TABLE Answers(Answer TEXT, Answer_ID INTEGER PRIMARY KEY, Quiz_ID NUMERIC) 
```

它给了我以下错误

```
 [ near "CREATE": syntax error ]
 Exception Name: NS_ERROR_FAILURE
Exception Message: Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [mozIStorageConnection.createStatement] 
```

帮我解决这个错误

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:10:00.610

`CREATE`是一个有效的关键字，并且不会在命令的开头导致语法错误。因此，这`CREATE`不能位于命令的开头。

执行多个命令时，必须用分号分隔：

```
CREATE TABLE SomethingElse(ID INTEGER PRIMARY KEY /* ... */ );
CREATE TABLE Answers(Answer TEXT /* ... */ ); 
```

# python - Heroku 推送被拒绝，无法编译 Python/django 应用程序（Python 2.7）

> ID：13896736
> 
> 赞同：4
> 
> 时间：2012-12-15T22:22:18.073
> 
> 标签：python, django, deployment, heroku, python-2.7

我正在为 python 开发人员进行 Heroku 演练：[https](https://devcenter.heroku.com/articles/django#prerequisites) : //devcenter.heroku.com/articles/django#prerequisites 尝试运行“git push heroku master”时出现错误，可以在“部署到 Heroku”部分，大约在页面下方的 1/3 处。我得到以下回溯：

```
Counting objects: 11, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (9/9), done.
Writing objects: 100% (11/11), 3.71 KiB, done.
Total 11 (delta 0), reused 0 (delta 0)
-----> Python/Django app detected
-----> Preparing Python interpreter (2.7.2)
-----> Creating Virtualenv (1.8.4)
       Also creating executable in .heroku/venv/bin/python
       Installing distribute...done.
       Installing pip...done.
       Running virtualenv with interpreter /usr/local/bin/python2.7
-----> Installing dependencies using pip (1.1)
       Exception:
       Traceback (most recent call last):
         File "/tmp/build_21leaqqhryfxe/.heroku/venv/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/basecommand.py",
line 104, in main
           status = self.run(options, args)
         File "/tmp/build_21leaqqhryfxe/.heroku/venv/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/commands/install.
py", line 219, in run
           for req in parse_requirements(filename, finder=finder, options=options):
         File "/tmp/build_21leaqqhryfxe/.heroku/venv/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/req.py", line 128
8, in parse_requirements
           req = InstallRequirement.from_line(line, comes_from)
         File "/tmp/build_21leaqqhryfxe/.heroku/venv/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/req.py", line 85,
 in from_line
           elif os.path.isdir(path) and (os.path.sep in name or name.startswith('.')):
         File "/tmp/build_21leaqqhryfxe/.heroku/venv/lib/python2.7/genericpath.py", line 41, in isdir
           st = os.stat(s)
       TypeError: must be encoded string without NULL bytes, not str

       Storing complete log in /app/.pip/pip.log
 !     Heroku push rejected, failed to compile Python/django app

To git@heroku.com:stark-fortress-9694.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:stark-fortress-9694.git' 
```

到目前为止，其他一切都已成功运行。有什么见解吗？我对此完全陌生。感谢您提前提供任何帮助。

这是 requirements.txt 的样子：

```
Django==1.4.3
distribute==0.6.31
dj-database-url==0.2.1
psycopg2==2.4.5 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-16T03:32:16.223

我认为问题在于`requirements.txt`文件的编码。可能，您在不知不觉中将其保存为 Unicode 格式。您应该将其保存为 ANSI 格式。有关更多详细信息，请参阅此链接：http: [//georgik.sinusgear.com/2012/08/20/problems-with-deploying-heroku-django-app-from-windows/](http://georgik.sinusgear.com/2012/08/20/problems-with-deploying-heroku-django-app-from-windows/)

# ios - ios视频 播放问题

> ID：13896738
> 
> 赞同：0
> 
> 时间：2012-12-15T22:22:23.100
> 
> 标签：ios, video, mpmovieplayercontroller, playback

我正在使用此代码在 ios 6 上播放视频（在 Xcode 和设备模拟器中）

```
- (void) playMovie {
    NSString *filepath   =   [[NSBundle mainBundle] pathForResource:@"flying" ofType:@"m4v"];
    NSURL    *fileURL    =   [NSURL fileURLWithPath:filepath];
    MPMoviePlayerController *moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL];
    [moviePlayerController prepareToPlay];
    [moviePlayerController.view setFrame: self.view.bounds];
    [self.view addSubview:moviePlayerController.view];
    moviePlayerController.scalingMode = MPMovieScalingModeAspectFit;
    moviePlayerController.movieSourceType = MPMovieSourceTypeFile;
    [moviePlayerController play];
} 
```

播放开始，但视频在 5 秒后中止。它只是消失了，我在 Xcode 中看到一个黑色窗口并且没有错误消息。

任何线索？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:54:25.493

MPMoviePlayerController 变量在 5 秒后被释放。我介绍了实现层的变量声明和playMovie方法中的定义。现在它起作用了！

# php - PHP随机化数组，其中键的值是stdClasses

> ID：13896742
> 
> 赞同：0
> 
> 时间：2012-12-15T22:22:42.087
> 
> 标签：php, arrays

我想随机化一个数组，其中包含 stdClasses 作为每个键的值，并且 stdclasses 顺序必须是原始的。

例如原始数组如下所示：

```
Array(
 [0]=>stdClass(/*lots of keys with value that must stay here and stay in order 
                 for example [id]=1 [name]=One*/)
 [1]=>stdClass(/*lots of keys with value that must stay here and stay in order 
                 for example [id]=2 [name]=Two*/)
 [2]=>stdClass(/*lots of keys with value that must stay here and stay in order 
                 for example [id]=3 [name]=Three*/)
 [3]=>stdClass(/*lots of keys with value that must stay here and stay in order 
                 for example [id]=4 [name]=Four*/)
) 
```

这就是我想要实现的目标：

```
Array(
 [3]=>stdClass(/*lots of keys with value that must stay here and stay in order 
                 for example [id]=4 [name]=Four*/)
 [0]=>stdClass(/*lots of keys with value that must stay here and stay in order 
                 for example [id]=1 [name]=One*/)
 [1]=>stdClass(/*lots of keys with value that must stay here and stay in order 
                 for example [id]=2 [name]=Two*/)
 [2]=>stdClass(/*lots of keys with value that must stay here and stay in order 
                 for example [id]=3 [name]=Three*/)
) 
```

我尝试了这个函数[PHP Random Shuffle Array Maintaining Key => Value](https://stackoverflow.com/questions/4102777/php-random-shuffle-array-maintaining-key-value)但这也对 stdClasses 进行了洗牌，这并不好。例如零键的 class->id 被改组到第三键

而且我不知道如何以正确的方式随机化它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:07:05.357

这将打乱您的数组并保持键/值关联。

```
$array = array('a'=> '1', 'b'=>'2', 'c'=>'3');

function shuffle_assoc($array) {
    $keys = array_keys($array);
    shuffle($keys);

    $result = array();
    foreach ($keys as $k) {
        $result[$k] = $array[$k];
    }

    return $result;
}

$result = shuffle_assoc($array);

// $result = array('b'=>'2', 'c'=>'3', 'a'=>'1') 
```

# powershell - 将 powershell 脚本作为计划任务运行

> ID：13896746
> 
> 赞同：0
> 
> 时间：2012-12-15T22:23:12.957
> 
> 标签：powershell, batch-file, scheduled-tasks, office365

我有几个脚本可以将邮箱移动到 Office 365 上的云。这些脚本有时会失败，而其他脚本则不会，我不知道为什么会失败，但我想这是因为在执行任务时服务不可用无论如何，关键是这些脚本作为计划任务运行，并且必须在其他任务之前执行，我如何检测第一个任务是否失败，如果是，则重新安排第二个任务。

这些任务在 Windows 2008 r2 上运行 powershell v2 cmdlet，所以我使用的是任务计划程序。

我想知道是否应该将一些条目保存到文本文件中，以使用不同的任务调度程序，或者使用 powershell 运行每个作业，方式如下：

```
foreach ($script in $scripts)
{
    #check status in a text file
    $job = start-job -Filepath c:\myscript.ps1 -AsJob
    Wait-Job $job -Timeout 180
} 
```

最好的方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:39:45.170

您可以使用[schtasks.exe](http://msdn.microsoft.com/en-us/library/windows/desktop/bb736357%28v=vs.85%29.aspx)来查询/启用或重新安排您的任务。或者您可以使用调度程序的[COM 对象](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446865%28v=vs.85%29.aspx)（注意 schtasks 输出取决于语言）。使用一种或其他方法检查 lastTaskResult 并重新安排您的其他任务。

例子：

使用 COM 对象获取根文件夹的所有任务

```
icm -AsJob -JobName getTasks -ComputerName $computername  -ScriptBlock{
    $Schedule = new-object -com("Schedule.Service")
    $Schedule.connect($env:computername)
    $Tasks = $Schedule.getfolder("\").gettasks(0)
    $Tasks | Select-Object  Name,Path,State,Enabled,LastRunTime,LastTaskResult 
    } 
```

使用 schtasks 获取特定任务

```
schtasks /query /TN "\Microsoft\Windows\Autochk\Proxy" /v /fo csv  |ConvertFrom-Csv 
```

# c++ - 闪烁词法分析器帮助。试图保存特定的线路信息以备后用

> ID：13896748
> 
> 赞同：0
> 
> 时间：2012-12-15T22:23:23.007
> 
> 标签：c++, arrays, scintilla

我正在使用 scintilla 的词法分析功能，我想做一些开箱即用的事情。

请注意，即使我有一些其他语言的经验，我也是一个初学者 C++ 编码器。

我正在寻找有关如何保存有关行的特定信息以供以后使用的指示。想到的第一个想法是创建一个数组并为我们的行号填充相应的数组字段，例如：

```
int lineOpt[];

...

lineOpt[20] = 20;
lineOpt[21] = 20;
lineOpt[372]= 75;

... 
```

但这里似乎有些不对劲。我不确定这是否是正确的方法，不仅因为我刚刚创建的“无限”大小的数组，还因为将出现的“间隙”。

只有少数特定行会设置这些选项（取决于其中存在的一些文本），我再次觉得这可以通过另一种方式完成。

任何帮助或对某些文章的指示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T22:30:19.653

听起来您需要一个关联容器结构，而不是数组。数组在编译时总是固定长度；您不能在运行时更改它们的大小。你的声明`int lineOpt[]`不合法。

考虑`std::map<unsigned int, unsigned int>`或`std::unordered_map<unsigned int, unsigned int>`。

# java - java - 如何在循环中播放mp3文件，在java中带有暂停和重启选项？

> ID：13896751
> 
> 赞同：0
> 
> 时间：2012-12-15T22:23:39.157
> 
> 标签：java, javasound

> **可能重复：**
> [Java 中的音乐循环](https://stackoverflow.com/questions/4875080/music-loop-in-java)

目前我正在使用此代码播放 mp3 文件

```
public void run(String url) {
    try {
            ContinuousAudioDataStream loop = null;
            InputStream in;
            in = getClass().getClassLoader().getResourceAsStream(url);

            Player p = new Player(in);
            p.play();
        } catch (Exception e) {
            System.err.print(url + e);
        }
    }
} 
```

但现在我想让它永远循环。我还创建了一个名为 New 的按钮。当我单击新按钮时，我希望它从头开始播放，以及如何暂停它？我已经用谷歌搜索了它，但我什么都听不懂。以前我能够将循环制作为 .wav 文件。但我被 .mp3 文件卡住了。我正在使用 jlayer 1.0.1

谁能帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:50:02.417

我建议使用[https://github.com/finnkuusisto/TinySound](https://github.com/finnkuusisto/TinySound)，它有一个非常易于使用的 API 来处理这类事情。

# hibernate - Jodatime with hibernate 4.1 and annotations

> ID：13896753
> 
> 赞同：0
> 
> 时间：2012-12-15T22:23:52.130
> 
> 标签：hibernate, jodatime

我正在使用 Hibernate 4.1.18 和 postgresql 9.1。

如何在休眠中使用读/写 joda DateTime 对象？我发现我应该使用“Usertype”项目（http://usertype.sourceforge.net/），但在那里找不到任何文档。

我在休眠中使用注释，所以我的类看起来像：

```
@Entity @SequenceGenerator(name="customer_id_seq",sequenceName="customer_id_seq")
public class Customer {
    private int id;
    private DateTime created; // This is the jodatime object.

    @Id @GeneratedValue(strategy=GenerationType.AUTO,generator="customer_id_seq")
    @Override public int getId() {
        return id;
    }

    // This does not work out of the box.
@Override public DateTime getCreated() {
    return created;
}
@Override  public void setCreated(DateTime created) {
    this.created=created;
}
} 
```

# java - 新 java 字体的大小始终为 1

> ID：13896756
> 
> 赞同：0
> 
> 时间：2012-12-15T22:24:55.360
> 
> 标签：java, fonts, font-size, truetype

我在 java 中为我的项目添加了一种新字体。但是，在渲染它时，文本大小始终为 1。文本基本上显示为几行。我尝试了多种字体，他们都做到了。这是我的代码。

```
public static void intializeFonts(){       
    try{
        File font = new File("C:/The Woods/Fonts/script.ttf");
        Font scriptFontU = Font.createFont(Font.TRUETYPE_FONT, font);
        Font scriptFont = scriptFontU.deriveFont(20);
        script = new TrueTypeFont(scriptFont, false);
    } catch(Exception e){
        System.out.println("Error Loading Font");
    }            
} 
```

如果这有帮助，这也是我用来渲染它的方法。

```
 g.setFont(Fonts.script);
    g.drawString("Weight: "+ItemContainer.getWeight()+"lbs", 30, 600); 
```

任何帮助都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:47:27.620

当你打电话时`scriptFontU.deriveFont(20)`，你在打电话`Font.deriveFont(int)`。在这个函数中，第一个参数是一个表示样式的整数。相反，您想调用`Font.deriveFont(float)`，它采用大小并保持样式不变。您可以通过调用`scriptFontU.deriveFont(20.0)`或等效方法来执行此操作；或致电`Font.deriveFont(int, float)`以`scriptFontU.deriveFont(Font.PLAIN, 20.0)`使其明确。

# iphone - 应用程序必须遵循 iOS 数据存储指南，否则它们将在包含 .sqlite3 的应用程序中被拒绝

> ID：13896757
> 
> 赞同：0
> 
> 时间：2012-12-15T22:25:06.663
> 
> 标签：iphone, ios, ipad, nsdocumentdirectory

我创建了一个电子书应用程序，我的应用程序包含很多图像和 pdf 文件

我将下载的图像放入 /Library/Caches 并将 pdf 文件和 .sqlite3 文件放入 /Documents

现在我的应用被拒绝了，这就是原因

```
2.23 Apps must follow the iOS Data Storage Guidelines or they will be rejected 
```

这是否意味着我必须将 /Documents 中的所有内容移动到 /Library/Caches？如果我将 .sqlite3 文件放在 /Documents 中，应用程序会再次拒绝吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T22:35:34.640

2.23 意味着您应该只将无法从 Internet 重新下载的内容放入 /Documents。即用户生成的文件。可以重新下载的所有内容都应该在库/缓存中。

这条规则的原因是 /Documents 得到备份，用户不喜欢浪费他们宝贵的 iClould 备份空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:29:42.490

您不必将下载的 PDF 和数据库放入 Caches 目录。另一种方法是使用“不备份”属性，如下所述：[技术问答 QA1719 - 如何防止文件备份到 iCloud 和 iTunes？](https://developer.apple.com/library/ios/#qa/qa1719/_index.html).

# java - 从其他活动调用方法

> ID：13896759
> 
> 赞同：0
> 
> 时间：2012-12-15T22:25:08.213
> 
> 标签：java, android, oop, subclass

我有多项活动

```
 Activity B extends A
 C extends Activity
 D extends Activity 
```

在我的应用程序中，活动 B 可能希望从活动 C 或 D 的 OptionsMenu 中调用特定项目。我想更改此设置，以便在 C 和 D 的 OptionsMenu 中它们调用方法，而 B 也将调用这些方法。我将如何组织这个？

# c# - 不能在 Win 8 和 Win Phone 8 的便携式类库中使用 await

> ID：13896760
> 
> 赞同：8
> 
> 时间：2012-12-15T22:25:11.037
> 
> 标签：c#, windows-phone-8, async-await, windows-store-apps, portable-class-library

我正在尝试在 Visual Studio 2012 中创建一个可移植类库，用于 Windows 8 应用商店应用和 Windows Phone 8 应用。

我收到以下错误：

> 'await' 要求类型 'Windows.Foundation.IAsyncOperation' 具有合适的 GetAwaiter 方法。您是否缺少“系统”的使用指令？

在这行代码：

```
StorageFolder guidesInstallFolder = await Package.Current.InstalledLocation.GetFolderAsync(guidesFolder); 
```

My Portable Class Library 针对 .NET Framework 4.5、Windows Phone 8 和 .NET for Windows Store 应用程序。

在纯 Windows Phone 8 项目中，这行代码我没有收到此错误，我也没有在 Windows Store 应用程序中收到此错误，所以我不明白为什么它在我的 PCL 中不起作用。

GetAwaiter 是 System.Runtime.WindowsRuntime.dll 中的 WindowsRuntimeSystemExtensions 类中的扩展方法。使用对象浏览器，我可以看到此 dll 在*.NET for Windows Store 应用程序*组件集和*Windows Phone 8*组件集中可用，但在*.NET Portable Subset*中不可用。我只是不明白如果它在我的两个目标平台上都可用，为什么它不会出现在 Portable Subset 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T23:06:13.670

[您需要NuGet 上](http://nuget.org/packages/Microsoft.Bcl.Async)的 Async 目标包，以便 async/await 为该目标组合工作。

更新：

试试这个（废话）代码片段来检查它是否正确使用 async/await。

```
public async void MyMethodAsync()
{
    var req = WebRequest.Create("");
    await req.GetRequestStreamAsync();
} 
```

但是，即使您解决了第一个不可用的问题，`async/await`您 `Package`调用的 API 在 PCL 中也不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T23:00:43.950

> 我只是不明白如果它在我的两个目标平台上都可用，为什么它不会出现在 Portable Subset 中。

可移植子集不仅仅是常见的一切。PCL的每个成员都故意在那里，并且有很多成员没有被包括在内。

如果配置文件缺少您需要的东西，请请求 Microsoft 添加它（通过 MSConnect 或在[旧但仍受监控的 PCL 页面](http://visualstudiogallery.msdn.microsoft.com/b0e0b5e9-e138-410b-ad10-00cb3caf4981)的 Q&A 选项卡上）。

# c++ - 使用带有 C++ 的用户令牌获取用户的默认 UI 语言

> ID：13896766
> 
> 赞同：-1
> 
> 时间：2012-12-15T22:25:42.893
> 
> 标签：c++, windows, winapi, localization

我知道[GetUserDefaultUILanguage](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318137%28v=vs.85%29.aspx) API 可以检索当前用户的 UI 语言标识符，但我需要从服务中调用它并通过其用户令牌找出特定用户的 UI。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:27:15.210

要使用`GetUserDefaultUILanguage()`服务内部的功能，它需要以该用户身份运行。要么将 SCM 中的服务设置为在该特定用户帐户下运行，要么让其代码在需要时动态模拟用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:21:53.467

服务在某个帐户下运行，因此即使您可以成功调用这样的函数，它们也会告诉您该服务正在运行的帐户，而不是可能需要该服务代表其执行操作的用户帐户.

因此，您可能需要让用户程序向服务注册自身（例如，PID 和 UI 语言）。然后，该服务可以存储这些并根据需要使用它们。

# ios - 使 iOS 表格视图单元格中的图像视图可点击

> ID：13896772
> 
> 赞同：0
> 
> 时间：2012-12-15T22:26:45.263
> 
> 标签：ios, uitableview, clickable-image

我在 iOS 6 中有一个动态表格视图。表格视图单元格具有字幕样式并显示图像、标题和副标题。表格视图位于导航控制器内，在导航栏中我有一个栏按钮项，可让您重置单元格的副标题和单元格中显示的图像中显示的进度信息（进度为 0 时为灰色图像%，大于0%为橙色，100%为绿色，实际百分比见字幕）。

当用户按下重置按钮时，图像将替换为特殊图像（圆形箭头），按下该按钮后，用户可以重置进度并从头开始练习。

问题是单元格中的图像视图是可单击的，但我无法区分图像中的单击和单元格文本部分（标题+副标题）中的单击。我怎样才能做到这一点？我最好子类化并添加一个可点击的按钮？

另一个考虑是可能重置的圆形箭头应该是辅助视图并出现在右侧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T15:41:08.063

我只会使用 UIButton 并添加自定义背景图像。正如你所提到的，这应该有效。

# android - Base64 编码数据的问题（在 c# 中加密，在 java 中解密）

> ID：13896778
> 
> 赞同：0
> 
> 时间：2012-12-15T22:27:26.637
> 
> 标签：android, encryption

我正在使用代码对 c# 中的数据进行 Base-64 编码和加密，然后将文件发送到我的 Android 应用程序，在那里我尝试对其进行解密。

问题是，我得到一个“Base64 编码输入字符串的长度不是 4 的倍数”。解密时出错：

（Android 的 Java 代码）：

```
 try
    {
          Boolean inEvent = false;

          // read encrypted file to string
          BufferedInputStream fin = new BufferedInputStream(new FileInputStream(filename));
          ByteArrayOutputStream bout = new ByteArrayOutputStream();
          byte buffer[] = new byte[8192];
          int read = fin.read(buffer);
          while(read != -1) {
              bout.write(buffer, 0, read);
              read = fin.read(buffer);
          }
          fin.close();
          String encryptedText = bout.toByteArray().toString();
          String unencryptedText = "";

          // decrypt string
          try
          {
              unencryptedText = Decrypt(encryptedText, sKey); <-- error occurs here
          }
          catch ( Exception e)
          {
              alert(e.getMessage());
              return sched;
          } 
```

解密方法：

```
protected String Decrypt(String text, String key) throws Exception
{
    Cipher cipher = Cipher.getInstance("AES/CBC/PKCS7Padding");
    byte[] keyBytes= new byte[16];
    byte[] b= key.getBytes("UTF-8");
    int len= b.length;
    if (len > keyBytes.length) len = keyBytes.length;
    System.arraycopy(b, 0, keyBytes, 0, len);
    SecretKeySpec keySpec = new SecretKeySpec(keyBytes, "AES");
    IvParameterSpec ivSpec = new IvParameterSpec(keyBytes);
    cipher.init(Cipher.DECRYPT_MODE,keySpec,ivSpec);

    byte [] results = cipher.doFinal(Base64Coder.decode(text));
    return new String(results,"UTF-8");
} 
```

最后，这是我用来加密的 c# 代码：

（c#代码）：

```
 string Encrypt(string textToEncrypt, string key)
  {
    RijndaelManaged rijndaelCipher = new RijndaelManaged();
    rijndaelCipher.Mode = CipherMode.CBC;
    rijndaelCipher.Padding = PaddingMode.PKCS7;

    rijndaelCipher.KeySize = 0x80;
    rijndaelCipher.BlockSize = 0x80;
    byte[] pwdBytes = Encoding.UTF8.GetBytes(key);
    byte[] keyBytes = new byte[0x10];
    int len = pwdBytes.Length;
    if (len > keyBytes.Length)
    {
      len = keyBytes.Length;
    }
    Array.Copy(pwdBytes, keyBytes, len);
    rijndaelCipher.Key = keyBytes;
    rijndaelCipher.IV = keyBytes;
    ICryptoTransform transform = rijndaelCipher.CreateEncryptor();
    byte[] plainText = Encoding.UTF8.GetBytes(textToEncrypt);
    return Convert.ToBase64String(transform.TransformFinalBlock(plainText, 0,   plainText.Length));
  } 
```

不知道出了什么问题。密钥的长度是否必须是某个特定的字节数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:04:46.527

评论已经确定了问题，如果您在此处调试关键项目，您会立即看到它：您认为您正在阅读的 base 64 字符串。

您从`bout`. 但是您尝试将其转换为字符串表示并没有像您想象的那样做任何事情。它将类似于“[B@2352544e]”，只是`toString()`数组中 Java 的内部默认值。相反，尝试`new String(bout.toByteArray(), Charset.forName("US-ASCII"))`.

# rdf - 如何验证字符串是否为 dateTime 对象？

> ID：13896783
> 
> 赞同：1
> 
> 时间：2012-12-15T22:28:27.227
> 
> 标签：rdf, sparql, freebase, dbpedia, virtuoso

我从 freebase 数据中得到一些无效的 dateString。以下 sparql 查询的输出是

询问：

```
select ?dob dataType(?dob) as ?dataType {
<http://freebase.com/ns/m/011k9p> <h://freebase.com/ns/common/topic/notable_types> <http://freebase.com/ns/people/person> .
<http://freebase.com/ns/m/011k9p> <h://freebase.com/ns/people/person/date_of_birth> ?dob 
} 
```

输出：

```
dob     dataType
-0359   http://www.w3.org/2001/XMLSchema#string 
```

dob 获得 -0359 使该字段的年龄计算变得不可能（因为我无法将其转换为 xsd:dateTime 对象）。

如何检查字符串是否可以转换为类型？

提前致谢。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:21:04.443

可能最简单的事情就是使用 SimpleDateFormat 来尝试解析字符串：

```
return new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").parse(theDate); 
```

如果你捕捉到 ParseException，你知道它没有被格式化为一个有效的日期时间字符串，然后你可以按照你的意愿继续，抛出一个错误，打印一个警告，尝试将它修复为一个有效的日期时间，等等。

# jsf - Not A Valid Method Expression in JSF

> ID：13896784
> 
> 赞同：4
> 
> 时间：2012-12-15T22:28:36.980
> 
> 标签：jsf

I have a commandbutton that I want to use to navigate to another jsf facelet, but I am getting a not a valid method expression:

```
 <h:commandButton value="Save Edits" action="editOrDeletePage.xhtml?editing=true;#{product.id};name=#{product.productName};description=#{product.description};quantity=#{product.quantity}"/> 
```

I can get it to work if I only have

```
action="editOrDeletePage.xhtml?editing=true" 
```

I guess when I have multiple properties that I'm passing, I am not delimiting them correctly. Any ideas?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T01:17:42.117

When the `action` attribute contains an EL expression, it's interpreted as a method expression. It's thus really only valid when you use `action="#{bean.someMethod}"`. However, your attempt does not represent a valid method expression, it's represents instead a value expression which is not accepted by the `action` attribute.

If you intend to append additional request/view parameters to the form submit, then you should rather use `<f:param>`.

```
<h:commandButton value="Save Edits" action="editOrDeletePage.xhtml">
    <f:param name="editing" value="true" />
    <f:param name="id" value="#{product.id}" />
    <f:param name="name" value="#{product.productName}" />
    <f:param name="description" value="#{product.description}" />
    <f:param name="quantity" value="#{product.quantity}" />
</h:commandButton> 
```

Note that those parameters don't end up in the request URL (as you see in the browser address bar) and that your theoretical approach also wouldn't have done that, a JSF command button namely generates a HTML `<input type="submit">` element which submits to the very same URL as specified in the `action` attribute of the parent HTML `<form method="post">`.

Also note that those parameters are not evaluated during the form submit, but during displaying the form. If you intented to pass submitted values along that way, then you're basically doing it wrong. Perhaps you want to specify them as view parameters so that you can use `action="editOrDeletePage?faces-redirect=true&amp;includeViewParams=true"` as action.

After all, it's hard to propose the right solution for you as you didn't elaborate the concrete functional requirement in detail at all.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T00:33:03.537

If you are using `JSF2` you can use `h:button` for this

```
<h:button value="press here" outcome="editOrDeletePage">
    <f:param name="productId" value="#{product.id}" />
</h:button> 
```

# orm - 实体拒绝删除

> ID：13896786
> 
> 赞同：1
> 
> 时间：2012-12-15T22:28:43.347
> 
> 标签：orm, coldfusion, coldfusion-9

实体拒绝删除

```
 ...
    var ormPref = EntityLoad("Pref", {PrefGroup = arguments.prefGroup, Pref = arguments.pref});

writedump(ormPref);

if (isnull(ormPref))    { return false; }
if (ArrayLen(ormPref) == 0) { return false; }

for (var i = 1; i <= ArrayLen(ormPref); i++)    {
    EntityDelete(ormPref[i]);
    EntitySave(ormPref[i]); 

    writeoutput("deleted");
    }

ORMFlush();

writedump(ormPref);

... 
```

实体的定义是：

```
<cfcomponent persistent="true">
<cfproperty name="PrefID" fieldtype="id" generator="identity">
<cfproperty name="PrefGroup">
<cfproperty name="Pref">
<cfproperty name="Value">
<cfproperty name="modifyBy">
<cfproperty name="modifyDate"   generated="always">
<cfproperty name="createBy"     update="false">
<cfproperty name="createDate"   update="false" generated="always">
</cfcomponent> 
```

## 更新

事实证明它已被删除，后来其他一些代码注意到它丢失并重新添加。所以该函数确实可以正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:09:05.533

这些删除应该包含在事务块中。另外，尝试从数组的末尾（不是开头）开始删除。如果您也发布您在删除时遇到的确切错误，将会很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T03:56:26.200

检查以确保其他东西没有重新添加数据

# java - 对 java if else 性能感到困惑

> ID：13896787
> 
> 赞同：3
> 
> 时间：2012-12-15T22:28:46.523
> 
> 标签：java, performance

我正在对方法的性能进行调查，最终确定开销是由 if else 语句的“else”部分引起的。我编写了一个小程序来说明性能差异，即使代码的 else 部分从未被执行：

```
public class TestIfPerf
{
    public static void main( String[] args )
    {   
        boolean condition = true; 
        long time = 0L;
        int value = 0;
        // warm up test 
        for( int count=0; count<10000000; count++ )
        {       
            if ( condition ) 
            {           
                value = 1 + 2;  
            }           
            else        
            {           
                value = 1 + 3;  
            }           
        }       
        // benchmark if condition only
        time = System.nanoTime();
        for( int count=0; count<10000000; count++ )
        {
            if ( condition )
            {
                value = 1 + 2;
            }           
        }
        time = System.nanoTime() - time; 
        System.out.println( "1) performance " + time ); 
        time = System.nanoTime();
        // benchmark if else condition
        for( int count=0; count<10000000; count++ )
        {
            if ( condition )
            {
                value = 1 + 2;
            }           
            else
            {
                value = 1 + 3;
            }
        }
        time = System.nanoTime() - time; 
        System.out.println( "2) performance " + time ); 
    }   
} 
```

并运行测试程序`java -classpath . -Dmx=800m -Dms=800m TestIfPerf`。

我在 Mac 和 Linux Java 上使用 1.6 最新版本执行了此操作。始终如一地，没有 else 的第一个基准测试比有 else 部分的第二个基准测试快得多，即使代码的结构使得 else 部分由于条件而永远不会执行。我知道对某些人来说，差异可能并不显着，但相对性能差异很大。我想知道是否有人对此有任何见解（或者也许我做错了什么）。

* * *

Linux 基准测试（纳米）

1.  性能 1215488
2.  性能 2629531

Mac 基准测试（纳米）

1.  性能 1667000
2.  性能 4208000

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T23:14:29.360

你的测试是假的。如果我交换测试条件，我会得到完全相反的结果：

```
1) performance 5891113
2) performance 15216601

2) performance 5428062
1) performance 15087676 
```

它可能与 JVM 在执行过程中优化代码有关。如果我多次复制/粘贴条件，我会得到：

```
2) performance 6258694
1) performance 34484277
2) performance 978
1) performance 978
2) performance 908 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T23:00:31.187

有两种可能的解释：

*   你得到的时间被基准缺陷所扭曲。您做错了很多事情 - 请参阅[如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)

*   真正的版本`else`每次循环迭代花费的时间稍长。如果是这种情况，则有多种可能的解释。处理它的最佳方法是查看 JIT 编译器生成的本机代码并分析其性能。

但最重要的是，这既不令人惊讶（见上文），也不会对绝大多数 Java 应用程序产生任何实际影响。由应用程序确定是否需要“if then”或“if then else”。

值得怀疑的是，你可能从这样的人工微基准中学到的任何东西对真正的代码有指导意义。JIT 编译器可能会在比您的测试执行的更复杂的级别上优化代码。您在此处可能看到的内容（如果您的基准测试没有缺陷）不太可能反映在实际应用程序中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T09:17:41.427

Java code:

```
 for (int count = 0; count < 10000000; count++) {
            // start of the if
            if (cond) {
                value = 1 + 2;
            }
            // end of the if
        } 
```

Java bytecode:

```
 7:   lstore_3      //store a long value in a local variable 3
   8:   iconst_0      //load the int value 0 onto the stack
   9:   istore  5     //store int value into variable #index
   11:  goto    23    //goes to another instruction at branchoffset
   14:  iload_1       //load an int value from local variable 1
   15:  ifeq    20    //if value is 0, branch to instruction at branchoffset
   18:  iconst_3      //load the int value 3 onto the stack
   19:  istore_2      //store int value into variable 2
   20:  iinc    5, 1  //increment local variable #index by signed byte const
   23:  iload   5     //load an int value from a local variable #index
   25:  ldc #22;  //push a constant #index from a constant pool (String, int or float) onto the stack - int 10000000
   27:  if_icmplt 14  //if value1 is less than value2, branch to instruction at branchoffset 
```

Java code:

```
 for (int count = 0; count < 10000000; count++) {
            // start of the if
            if (cond) {
                value = 1 + 2;
            } else {
                value = 1 + 3;
            }
            // end of the if
        } 
```

Java bytecode:

```
 63:  lstore_3      //store a long value in a local variable 3
   64:  iconst_0      //load the int value 0 onto the stack
   65:  istore  5     //store int value into variable #index
   67:  goto    84    //goes to another instruction at branchoffset
   70:  iload_1       //load an int value from local variable 1
   71:  ifeq    79    //if value is 0, branch to instruction at branchoffset
   74:  iconst_3      //load the int value 3 onto the stack
   75:  istore_2      //store int value into variable 2
   76:  goto    81    //goes to another instruction at branchoffset
   79:  iconst_4      //load the int value 4 onto the stack
   80:  istore_2      //store int value into variable 2
   81:  iinc    5, 1  //increment local variable #index by signed byte const
   84:  iload   5     //load an int value from a local variable #index
   86:  ldc #22;  //push a constant #index from a constant pool (String, int or float) onto the stack - int 10000000
   88:  if_icmplt 70  //if value1 is less than value2, branch to instruction at branchoffset 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T23:03:12.723

如果您在第二次测量中注释掉 else 分支，它会变得更加奇怪：它仍然更慢，尽管它现在是相同的代码。好消息是，如果您在单独的方法中提取此代码，第二次运行速度会快得多。

我唯一能想到的是JVM只优化了长方法的第一部分。是的：如果我把 if-else 测量放在第一位，它会更快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T23:24:01.570

必须与 VM init（预热时间很短）或时间测量中的抖动（与 VM 启动有关）有关。

如果你交换循环，循环 2 会更快:-)

一般来说，热点 JIT 是不错的，但不可靠，也不是确定性的。在java中获得最佳性能

*   避免创建对象
*   尽可能将 vars 标记为 final。有时这并没有什么不同，但有时确实如此。在循环中访问实例变量时，将它们复制到最终本地。
*   如果可能，将方法标记为最终方法。
*   如果您想要一种内联方法，请保持简短，也许可以将其分解。我通过测试多次验证了这一点，通过拆分“void foo() { if (..) return ..stuff ... }” 像“foo() { if (..) return;否则 foo1() } void foo1() { 东西 }"

一般来说，使用微基准测试来证明性能模式非常困难，因为您不知道究竟是什么触发了内联、jit 编译和进一步的运行时优化。JIT 中存在阈值，因此可能会因为您在方法中添加语句或添加现有类的子类而降低性能。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-16T01:02:01.453

```
public class Main {

public static void main(String[] args) {
    boolean cond = true;
    int nothing = 0;

    for (int i = 0; i < 20; i++) {
        int value = 0;
        long time = System.nanoTime();
        for (int count = 0; count < 10000000; count++) {
            if (cond) {
                value = 1 + 2;
            }
        }

        time = System.nanoTime() - time;
        System.out.println("1) performance: " + time);
        nothing = value; // prevent java ignoring value

        value = 0;
        time = System.nanoTime();
        for (int count = 0; count < 10000000; count++) {
            if (cond) {
                value = 1 + 2;
            } else {
                value = 1 + 3;
            }
        }
        time = System.nanoTime() - time;
        System.out.println("2) performance: " + time);
        nothing = value; // prevent java ignoring value
    }

    nothing = nothing + 1;
}
} 
```

**这是结果：**

```
1) performance: 1797000
2) performance: 3742000
1) performance: 7290000
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 1000
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 1000
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0
1) performance: 0
2) performance: 0 
```

# c# - 通过 xAttribute 值删除 xElement

> ID：13896788
> 
> 赞同：1
> 
> 时间：2012-12-15T22:28:57.073
> 
> 标签：c#, xml, linq-to-xml

我有以下 xml 文档：

```
<?xml version="1.0" encoding="utf-8"?>
<Categories>
  <title>
    <Type name="James">
      <Field name="ref" value="79" />
      <Field name="titleref" value="55" />
    </Type>
  </title>
</Categories> 
```

如果 textBox1 文本匹配，我想删除所有“标题”

我有以下，我知道它不起作用，但我想看看你是否能看到我的逻辑。

```
 xmldoc.Root.Elements().Where(x => x.Element("Type")).Where (x => x.Attribute("name").Value.Equals(textBox1.Text)).Select(x => x).Single().Remove(); 
```

任何帮助都会很棒

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T22:40:16.587

您可以使用`XPath`(System.Xml.XPath)

```
xmldoc.XPathSelectElements(String.Format("//Type[@name='{0}']", textBox1.Text))
      .Remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:41:13.197

```
xmldoc.Root.Descendants( "Type" )
  .Where( x => x.Attribute( "name" ).Value == textBox1.Text )
  .Remove(); 
```

# symfony - sonata_type_model / symfony 形成一对多关系不保存

> ID：13896789
> 
> 赞同：4
> 
> 时间：2012-12-15T22:29:09.133
> 
> 标签：symfony, symfony-2.1, symfony-forms, symfony-sonata, sonata-admin

我在帐户和用户之间有一对多的关系。我正在为 CRUD 使用奏鸣曲管理员。据我所知，它使用 Symfony 表单来完成工作。我尝试添加这样的字段：

```
 ->add('users', 'entity', array(
            'class'    => 'AcmeDemoBundle:User',
            'required' => true,
            'multiple' => true,
            'expanded' => true
        )); 
```

我也试过sonata_type_model

```
 ->add('users', 'sonata_type_model', array(
            'class'    => 'AcmeDemoBundle:User',
            'required' => true,
            'multiple' => true,
            'expanded' => true
        )); 
```

问题是在编辑帐户时（当我编辑用户时，所有内容都会更新），没有任何东西（与关系相关）被保存。我知道我必须更新拥有方（用户方），但我没有成功，因为没有调用“public function addUser($user)”所以我不能添加类似“$user->setAccount($this )" 到那个函数。

我的实体如下所示：

```
class Account
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\Column(type="string")
 */
protected $name;

/**
 * @ORM\OneToMany(targetEntity="Acme\DemoBundle\User", mappedBy="account", cascade={"persist", "remove"})
 */
protected $users;

/**
 * Add users
 *
 * @param Acme\DemoBundle\Entity\User $user
 * @return Account
 */
public function addUser(\Acme\DemoBundle\Entity\User $user)
{
    $user->setAccount($this);
    $this->users[] = $user;

    return $this;
}

/**
 * Remove users
 *
 * @param Acme\DemoBundle\Entity\User $user
 */
public function removeUser(\Acme\DemoBundle\Entity\User $user)
{
    $user->setAccount(null);
    $this->users->removeElement($user);
}

/**
 * Get users
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getUsers()
{
    return $this->users;
}
} 
```

.

```
class User extends BaseUser
{
/**
 * @ORM\Id
 * @ORM\Column(type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @ORM\ManyToOne(targetEntity="Acme\DemoBundle\Account", inversedBy="users")
 */
protected $account;

/**
 * Set account
 *
 * @param Acme\DemoBundle\Entity\Account $account
 * @return User
 */
public function setAccount(\Acme\DemoBundle\Entity\Account $account = null)
{
    $this->account = $account;

    return $this;
}

/**
 * Get account
 *
 * @return Acme\DemoBundle\Entity\Account 
 */
public function getAccount()
{
    return $this->account;
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T09:47:30.747

我的问题与此有关[https://github.com/symfony/symfony/issues/1540](https://github.com/symfony/symfony/issues/1540)

在我添加 by_reference => false 之后调用帐户设置器并且可以更新拥有方。

# verilog - 为什么每次按下按钮时都使用这种 2 DFF 方法？

> ID：13896792
> 
> 赞同：3
> 
> 时间：2012-12-15T22:29:45.590
> 
> 标签：verilog, fpga

我一直在网上阅读 verilog 代码，并在许多代码示例中注意到了这一点。每当需要从硬件源（例如按下按钮）进行输入时，输入就会被复制到触发器，然后与输入的反转进行“与”运算。我不知道这是否有意义，但在这里的代码是：

```
input btn;
reg dff1, dff2;
wire db_tick;

always @ (posedge clock) dff1 <= btn;
always @ (posedge clock) dff2 <= dff1;

assign db_tick = ~dff1 & dff2; 
```

然后`db_tick`用作按钮按下。

在某些情况下，这也用作上升沿检测器，但不能轻松实现上升沿检测器`always@(posedge signal)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T23:25:01.417

它被称为*单稳态多谐振荡器*，或者专门用于数字电路，单次。该电路的目的是将边沿变为单周期脉冲。

当直接连接到物理开关时，它可能是一种实现开关去抖动的方法，但这并不是一个很好的用途。如果没有更多上下文，很难说出代码中的意图是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-20T15:39:41.600

这提供了与您的时钟域同步的边缘检测。我在这里没有看到任何去抖动，在边缘检测之前还包括 2 个元稳定性触发器是很常见的。

```
input a;

reg [2:0] a_meta;
always @(posedge clk or negedge rst_n) begin
  if (~rst_n) begin
    a_meta <= 3'b0 ;
  end
  else begin
    a_meta <= {a_meta[1:0], a};
  end
end

// The following signals will be 1 clk wide, Clock must be faster than event rate.
// a[2] is the oldest data,
//   if new data (a[1]) is high and old data low we have just seen a rising edge.
wire a_sync_posedge = ~a_meta[2] &  a_meta[1];
wire a_sync_negedge =  a_meta[2] & ~a_meta[1]; 
wire a_sync_anyedge =  a_meta[2] ^  a_meta[1]; //XOR 
```

# php - 如何在 PHP 中调用变量上的函数？

> ID：13896794
> 
> 赞同：5
> 
> 时间：2012-12-15T22:30:00.957
> 
> 标签：php

我必须这样做：

```
$sourceElement['description'] = htmlspecialchars_decode($sourceElement['description']);

```

我想避免重复提及变量名。我试过了：

```
htmlspecialchars_decode(&$sourceElement['description']);

```

和

```
call_user_func('htmlspecialchars_decode', &$sourceElement['description']);

```

那没有用。这在PHP中可能吗？*在*变量上调用函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-15T22:36:00.317

您可以创建自己的包装函数，通过引用获取变量：

```
function html_dec(&$str) {$str = htmlspecialchars_decode($str);} 
```

然后调用：

```
html_dec($sourceElement['description']); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T22:33:50.077

*正确*的解决方案是包含“冗余”变量提及。它更具可读性，而且这样的混乱程度要低得多。

```
$sourceElement['description'] = htmlspecialchars_decode($sourceElement['description']); 
```

不过，您的思维方式很好，您正在考虑如何缩短代码，就像真正的懒惰程序员一样 =)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-15T22:34:18.463

这取决于功能。`htmlspecialchars_decode()`返回结果，它不会修改原始变量。你对此无能为力。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-15T22:37:18.043

PHP 中的大多数函数在成熟时都是不可变的，即它们不会修改您传递给它们的参数。这有几个优点，其中之一是能够在没有副作用的表达式中使用它们的返回值。

这是一个通用包装器，您可以使用它来模拟任何采用单个参数的函数的可变行为：

```
function applyFn(&$s, $fn)
{
    return $s = $fn($s);
}

applyFn($sourceElement['description'], 'htmlspecialchars_decode');

applyFn($sourceElement['description'], 'trim'); // trim string 
```

里程可能会有所不同:)

# asp.net-mvc - MVC：将额外字段添加到子对象的正确方法不会使事情变得复杂

> ID：13896801
> 
> 赞同：0
> 
> 时间：2012-12-15T22:31:40.263
> 
> 标签：asp.net-mvc, entity-framework, viewmodel

我正在尝试做一些我感觉像是一项小任务的事情，但我想不出一个简单的方法来做到这一点。对于一个简单的任务，我所有这样做的方法都变得非常复杂。

我有这些模型：

```
public class Blog
{
    public int Id { get; set; }
    public String Name { get; set; }
    public virtual ICollection<Post> Posts { get; set; }
}

public class Post
{
    public int Id { get; set; }
    public String Name { get; set; }
    public int BlogId { get; set; }
    public virtual ICollection<Comment> Comments { get; set; }
}

public class Comment
{
    public int Id { get; set; }
    public String CommentText { get; set; }
    public int PostId { get; set; }
    public int UserProfileUserId { get; set; }
}

public class UserProfile
{
    public int UserId { get; set; }
    public string UserName { get; set; }
    public String FirstName { get; set; }
    public String LastName { get; set; }
} 
```

在添加的评论部分视图中，我想显示发表评论的用户的完整用户名。如果我只是在我的视图和部分视图中使用我的基类，我会得到我需要的一切，除了添加评论的完整用户名。到目前为止，我已经想到了以下方法：

ViewModels - 这将为我的每个类创建一个 ViewModel，然后在我的控制器中手动填充/映射它们。

视图中的代码 - 我有 UserProfileUserId，所以我可以从视图中询问存储库，但这会杀死 MVC 中的 MVC，所以我不想这样做。

实际上将 UserProfileFirstName 和 UserProfileLastName 作为外键添加到 Comment Class - 这感觉就像用视图特定数据填充数据库。它不属于关系数据库。

使用常规 SQL 并查询数据库——仅仅因为我知道 SQL，这可能是一种方法。但话又说回来，我在 MVC 中杀死了 MVC。

我该怎么做？我愚蠢的被忽视的选择在哪里？我搜索了很多但找不到答案，但这可能与我还不知道所有技术术语有关。抱歉，如果之前回答了 1000 次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T22:55:01.587

理想情况下，我会更改我的域模型以包含`Author`类型属性`UserProfile`并使用 JOIN（注释表和用户表）加载该数据

```
public class Comment
{
    public int Id { get; set; }
    public String CommentText { get; set; }
    public int PostId { get; set; }
    public UserProfile Author { get; set; }
} 
```

**编辑：** *根据评论中的问题*

我将这样做。

我的存储库方法将有这些方法

```
List<Comment> GetCommentsForPost(int postId);
BlogPost GetPost(int postId); 
```

我会用 ViewModel 来表示这样的单个博客文章

```
public class PostViewModel
{
   public int PostID { set;get;}
   public string PostText { set;get;}
   public string AuthorDisplayName { set;get;}
   public List<CommentViewModel> Comments { set;get;}

   public PostViewModel()
   {
      Comments=new List<CommentViewModel>();
   }
}
public class CommentViewModel
{
  public int CommentID {set;get;}
  public string Text { set;get;}
  public string AuthorDisplayName { set;get;}  
} 
```

现在在您的`GET`操作中，从您的存储库中获取数据并将其映射到 ViewModel 并将其发送到视图

```
public ActionResult ViewPost(int id)
{

  var post=repositary.GetPost(id);
  if(post!=null)
  {
    PostViewModel vm=new PostViewModel { PostID=id };
    vm.PostText=post.Name;
    var comments=repo.GetCommentsForPost(id);
    foreach(var item in comments)
    {
      vm.Comments.Add(new CommentViewModel { CommentID=item.Id, 
                              AuthorDisplayName=item.Author.FirstName});
    }
    return View(vm);
  }
  return View("NotFound");
} 
```

现在您的视图将被强输入到 The`PostViewModel`

```
@model PostViewModel

<h2>@Model.PostText</h2>
@Html.Partial("Comments",Model.Comments) 
```

并且您的局部视图（`Comments.cshtml`）将被强类型化为一个集合`CommentViewModel`

```
@model List<CommentViewModel>
@foreach(var item in Model)
{
  <div>
     @item.Text
     <p>Written by @item.AuthorDisplayName</p>
  </div>
} 
```

现在我们的视图不直接依赖于领域模型。如果我们需要，这允许我们明天从另一个来源获取数据（例如：从 Web 服务获取评论）并简单地映射到我们的视图模型。

**一些笔记**

不要在视图中添加太多代码。让我们尽可能保持纯 HTML。没有直接来自视图的数据访问调用！

为了您的理解，我手动将域模型映射到视图模型。您可以使用***Automapper***之类的映射库来执行此操作。您也可以将我们在 GET 操作方法中的部分代码移动到另一个服务层，以便可以在多个地方重用它。

# c# - C# 在大文本文件中搜索字符串。如果您搜索相同的文件转到您上次阅读的行并开始搜索

> ID：13896802
> 
> 赞同：1
> 
> 时间：2012-12-15T22:31:46.177
> 
> 标签：c#, string, search

如果我在一天中多次搜索同一个 LOG 文件中的字符串，以某种方式转到上次搜索时文件中读取的最后一行然后开始逐行读取会更快吗？这里会有任何显着的节省吗？

## 示例文件

进程标识逻辑

11111 在中间层服务器上运行一些愚蠢的逻辑。

11111 仍在运行逻辑

22222 在其他用户的中间层服务器上运行一些愚蠢的逻辑。

11111 哦看第一个过程完成了。

22222 仍在第二个进程上运行逻辑。

有时我想要从上次加载文件开始的多行文件。目前我使用 UltraEdit 加载文件一次，然后更新文件，但这仍然需要相当长的时间。

在上面的这个例子中，我想要从第一个进程开始。

## 笔记：

1.  该文件有时可能有数百 MB 大小。
2.  上面的例子是缩略的，每个进程 ID 可能包含 100 行逻辑。
3.  我正在通过网络访问日志文件。我发现使用 UE 从网络加载文件然后继续更新文件比复制到我的本地 PC 然后打开它更快。
4.  我希望有一个可以从 powershell 运行的 C# 控制台应用程序，并将我想要的行通过管道传输到屏幕或文件。

我的另一个问题是如何使这个过程尽可能高效？1.关于用于我的文件大小的 C# 方法？2.关于用于编写实用程序的应用程序？我有 powershell、C#、C++、perl

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:38:45.960

使用 Stream.Seek 可以做到这一点。您只需要记住流中的最后一个位置是什么，然后从那里继续前进。如果您的日志文件只向其中添加行，这将工作得很好，而且它肯定会比一遍又一遍地读取和扫描相同的行更快。

如果您发布一些现有代码，我什至可以帮助您编写代码来完成它。

[http://msdn.microsoft.com/en-us/library/system.io.stream.seek.aspx](http://msdn.microsoft.com/en-us/library/system.io.stream.seek.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T23:57:27.277

我想自己实现这样的东西，所以我花了一些时间试一试。`FileStream`这是我想出的一个扩展方法（你必须把它放在一个静态类中） ：

```
public static string ReadLineAndCountPosition(this FileStream fs, ref long position)
{
    //Check if too great a position was passed in:
    if (position > fs.Length)
        return null;
    bool is_carriage_return = false;
    StringBuilder sb = new StringBuilder();
    fs.Seek(position, SeekOrigin.Begin);

    while (position < fs.Length)
    {
        var my_byte = fs.ReadByte();
        position++;
        //Check for newlines
        if (is_carriage_return && my_byte == 10)// \n
            return sb.ToString();
        if (my_byte == 13)                     // \r
            is_carriage_return = true;
        else
        {
            is_carriage_return = false;
            sb.Append((char)my_byte);
        }

    }
    return sb.ToString();//We've consumed the entire file.
} 
```

要使用它，您可以`ReadLineAndCountPosition`通过简单地调用它并传入一个`long`我们将保存位置的参数来使用它。稍后我们将简单地 .Seek() 到这个位置。

```
static void Main(string[] args)
{
    FileStream fs = new FileStream("testfile.txt",FileMode.Open);
    long saved_position = 0;

    while(true)
    {
        string current_line = fs.ReadLineAndCountPosition(ref saved_position);
        if (current_line == null || current_line == "SomeSearchString")
            break;
    }

    //Some time later we want to search from the saved position:
    while(true)
    {
        string current_line = fs.ReadLineAndCountPosition(ref saved_position);
        if (current_line == null || current_line == "SecondSearchString")
            break;
    }
} 
```

我自己进行了一些测试，它似乎运行良好。如果您有任何麻烦，请告诉我。希望它可以帮助你。

# php - PHP - 使用 HTTP_REFERER 测试 iframe 的父页面是否可靠？

> ID：13896805
> 
> 赞同：3
> 
> 时间：2012-12-15T22:32:11.043
> 
> 标签：php, http, iframe, http-referer

我有一个名为 test2.php 的页面，它通过 iframe 加载到 test1.php 中。

我想实现一个白名单，以确保 test2.php 只能通过 test1.php 访问。我注意到父页面 URL (test1.php) 作为子 iframe 页面 (test2.php) 的 HTTP_REFERER 传递。

这适用于 IE7/8/9 以及我正在使用的 Chrome 和 FF 版本。

那么，在这种情况下，由于真正的安全性不是一个因素，测试 HTTP_REFERER 字段是否可靠以检查父页面的身份？是否有没有为 iframe 设置此标头的浏览器，或者是否有我没有考虑到的边缘情况？

我意识到这不是防黑客攻击，因为标题欺骗是微不足道的，但安全不是问题。我只是想控制（或多或少）嵌入 test2.php 的页面。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T14:20:26.423

您可以使用 JavaScript - 在开始时检查您的 test2.php 文件是否在 iFrame 中

```
var isInIframe = (parent !== window); 
```

然后您可以获取并验证父网址

```
function getParentUrl() {
var isInIframe = (parent !== window),
    parentUrl = null;

if (isInIframe) {
    parentUrl = document.referrer;
}

return parentUrl; 
```

}

# javascript - 提交时从 git 拉取到网站

> ID：13896809
> 
> 赞同：2
> 
> 时间：2012-12-15T22:33:02.120
> 
> 标签：javascript, web-services, html, git, github

在我陈述我的问题之前，我想指出我的目标可能完全错误，所以如果我是，请告诉我。

我想要做的是让我的个人网站从我将为 HTML5/JavaScript 游戏设置的 github 存储库中提取代码。每当我提交回购协议时，我都希望该站点提取更新的代码并将其提供给用户。我在另一个类似的问题中看到如何直接链接到 GitHub 上的源文件，但我觉得这将是对 GitHub 托管功能的不公平滥用。

那么，这会是我在网站上运行的某种计时作业或脚本吗？或者 GitHub 是否可能提供某种 API 可以在提交时触发对 git-pull 的回调？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:40:13.153

[这](https://github.com/mislav/git-deploy)是一个可能有用的指南。你基本上是在服务器上设置一个 git repo 并推送到它。更好的方法在列出的文章中。我所做的 hacky 方法是简单地克隆机器上的 repo 并从生产分支中提取更改。可怕的想法。

# url - 隐藏url目录

> ID：13896810
> 
> 赞同：1
> 
> 时间：2012-12-15T22:33:04.977
> 
> 标签：url

我有一个网站：

```
www.mydomain.com/subfolder/subfolder/index.php 
```

怎么可能总是从 url 中隐藏目录名称。我的意思是总是在页面更改时从 url 中隐藏 2 个子文件夹的名称。
示例：
这些网址：

```
www.mydomain.com/subfolder/subfolder/index.php
www.mydomain.com/subfolder/subfolder/about.php
www.mydomain.com/subfolder/subfolder/contact.php
... 
```

变成：

```
www.mydomain.com/index
www.mydomain.com/about
www.mydomain.com/contact
... 
```

我也想使用最后提到的 url 来请求这些页面，而无需输入可怕的长 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:38:48.343

当您在 htaccess 中查找 mod_rewrite 或 mod rewrite 时，您可以找到一些很好的提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:40:24.073

如果您有权访问重写引擎，则可以使用类似于以下的简单重写模式：

```
RewriteRule ^/(.*)$ /subfolder/subfolder/$1.php 
```

# java - 是否有一个 .jar 本身的 java ide？

> ID：13896816
> 
> 赞同：2
> 
> 时间：2012-12-15T22:33:42.907
> 
> 标签：java, ide, executable-jar

是否有一个 .jar 本身的 java ide？我需要一个用于学校的 IDE，exe 被阻止，但 jar 没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:25:42.787

[BlueJ](http://www.bluej.org/)是一个旨在帮助教授 Java 语言的 IDE。它以可执行 JAR 的形式提供，可从网站[下载。](http://www.bluej.org/download/download.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T23:19:29.367

我认为你应该和你的老师讨论这个问题。

*   如果老师意识到了这个问题，他/她可能有一个教学原因不希望你使用 IDE。（IDE 对 Java 编程来说*不是*必需的，如果没有 IDE 完成工作并提出更正建议，您可能会争辩说您学习该语言更深入。）

*   如果老师没有意识到这个问题，他/她可以通过安排一个 IDE 供*所有*学生使用，为您……以及您班上的其他学生……解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T22:46:33.800

我想不出那样的东西。但是你应该让你的老师在学校机器上安装首选的 IDE。您应该记住，如果 IDE 不是您可以使用的软件的一部分，您应该使用该 PC 上的内容。然后你应该使用记事本和javac。

除此之外，基本项目不需要 IDE。使用简单的编辑器，您肯定会取得更大的进步，因为您必须了解对每件事都至关重要的基础知识。

祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-15T22:51:42.940

Dr Java 是一个独立的 jar 文件。这对于小东西来说非常好，但是如果你有一个大项目（许多类、包等），我会想办法让 Eclipse 运行。

[http://drjava.org/](http://drjava.org/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T22:57:13.067

请按照此处的说明进行操作：

[http://tgducusin.blogspot.com/2011/12/portable-eclipse-with-java-jdk-tomcat.html](http://tgducusin.blogspot.com/2011/12/portable-eclipse-with-java-jdk-tomcat.html)

它不是一个 jar，但它应该对你有用，除非你的字面意思是**所有**exe 都被阻止（因为即使在便携式版本中，你仍然需要使用 exe 文件来运行它）。我希望你的意思只是 exe*安装程序*被阻止。

如果不需要，请忽略有关 Tomcat 和 PostgreSQL 的部分。

# excel - VBA 将 Excel 范围导出到特定目录和文件名

> ID：13896822
> 
> 赞同：2
> 
> 时间：2012-12-15T22:34:18.897
> 
> 标签：excel, export-to-text, vba

我有一个 Excel 工作表，我需要将范围 A:1 到 A 列中最后使用的单元格导出到 xml 文件。如何将导出的文件名设置为与我从中导出的文件相同？

```
Sub exportxmlfile()
Dim myrange As Range

Worksheets("xml").Activate
Set myrange = Range("A1:A20000")
Set fs = CreateObject("Scripting.FileSystemObject")
Set a = fs.CreateTextFile("C:\exports\2012\test.xml", True)
For Each c In myrange
a.WriteLine (c.Value)
Next c
a.Close
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:36:01.233

使用该`Workbook.Name`属性获取文件名。

FWIW，有一些机会可以改进您的代码

```
Sub exportxmlfile()
   ' declare all your variables
    Dim myrange As Range
    Dim fs As Object
    Dim a As Object
    Dim dat As Variant
    Dim i As Long

    ' No need to activate sheet
    With Worksheets("xml")
        ' get the actual last used cell
        Set myrange = .Range("A1", .Cells(.Rows.Count, 1).End(xlUp))
        ' copy range data to a variant array - looping over an array is faster
        dat = myrange.Value
        Set fs = CreateObject("Scripting.FileSystemObject")
        ' use the excel file name
        Set a = fs.CreateTextFile("C:\exports\2012\" & .Parent.Name & ".xml", True)
    End With
    For i = 1 To UBound(dat, 1)
        a.WriteLine dat(i, 1)
    Next
    a.Close
End Sub 
```

# c - 全局变量在 C 中神奇地改变值

> ID：13896825
> 
> 赞同：0
> 
> 时间：2012-12-15T22:35:05.717
> 
> 标签：c, global-variables

这可能需要一些调查，但我的问题很简单：

为什么函数中`numPassenger`总是0 `parentHandler2()`？

```
#include <sys/ipc.h>
#include <sys/shm.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <wait.h>
#include <signal.h>
#include <sys/time.h>
#include <math.h>

int getRand()
{
  return (rand() % 5001);
}

//////////GLOBAL//////////

const int CAPACITY = 100;
const int MEMSIZE = 1024;

char* sharedmem;

pid_t pid;

int numPassenger;
int numTram;

//////////GLOBAL//////////

//handles SIGALRM, generates passengers, sends SIGUSR1
void parentHandler1()
{
    numPassenger = getRand();
    sprintf(sharedmem, "%d", numPassenger);
    kill(getpid(), SIGUSR1);
}

//handles SIGUSR1, calculates number of trams needed, sends SIGUSR2
void childHandler()
{
    double n = atoi(sharedmem);
    numTram = (ceil(n/100));
    sprintf(sharedmem, "%d", numTram);
    kill(pid, SIGUSR2);
}

//outputs
void parentHandler2()
{
    int n = atoi(sharedmem);
    printf("Passengers: %d, Trams: %d\n", numPassenger, n);
}

int main (int argc, char* argv[])
{
    srand(time(0));

    key_t key;
    int shmemaddr;

    //shared memory
    key=ftok(argv[0],1);
    shmemaddr=shmget(key,MEMSIZE,IPC_CREAT|S_IRUSR|S_IWUSR);
    sharedmem = shmat(shmemaddr,NULL,0);

    pid = fork();
    if ( pid > 0 )
    {
        //timer
        struct itimerval timer;
        timer.it_value.tv_sec = 3; 
        timer.it_value.tv_usec = 0; 
        timer.it_interval.tv_sec = 3;
        timer.it_interval.tv_usec = 0;  
        setitimer (ITIMER_REAL, &timer, NULL);

        signal(SIGALRM, parentHandler1);
        signal(SIGUSR1, childHandler);
    }
    else if ( pid == 0 )
    {
        signal(SIGUSR2, parentHandler2);
    }

    //not so busy waiting
    while(1) sleep(1);

   return 0;
} 
```

[https://gist.github.com/4299915](https://gist.github.com/4299915)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T23:04:28.910

Fork 创建当前进程的新副本。全局变量不在进程之间共享。两个进程之间共享的唯一内存是`shmget`. 的值`numPassenger`永远不会在子进程中设置。

# xpath - 在未知级别的多个子节点中选择具有条件的父节点

> ID：13896826
> 
> 赞同：3
> 
> 时间：2012-12-15T22:35:11.783
> 
> 标签：xpath

在 XPath 中，如何选择包含和在其子级（处于不同级别）`id`的所有节点？`<a>``x=10``y=100`

```
<root>
    <a id="1">
        <c>
            <x>10</x>
            <y>100</y>
        </c>
    </a>
    <a id="4">
        <c>
            <c>
                <x>10</x>
                <y>100</y>
            </c>
        </c>
    </a>    
    <a id="6">
        <x>20</x>
        <y>200</y>
    </a>
    <a id="7">
        <x>10</x>
        <y>300</y>
    </a>
</root> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-15T22:38:09.510

像这样的东西，我想：

```
//a[.//x=10][.//y=100]/@id 
```

# jquery - jQuery UI 自动完成不会将隐藏的输入新值发送到 script_url

> ID：13896828
> 
> 赞同：4
> 
> 时间：2012-12-15T22:35:29.947
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-autocomplete, jquery-ui-autocomplete

在使用 jQuery UI 自动完成为隐藏输入设置值之后

```
$( "#PName" ).autocomplete({            
            search: function(event, ui) {
             $("#PLoading").show();
            },
            source: "Script_URL",
            minLength: 2,            
            select: function( event, ui ) {
                $("#PLoading").hide();
                $("#PName").val(ui.item.value);
                $("#PID").val(ui.item.id);
            }
        });

<input type="hidden" id="PID" name="PID" value="0" /> 
```

对于使用自动完成从隐藏输入向其他 url 发送新值，发送 0 值

0 值是隐藏输入默认值，（为了测试，我将默认值更改为 90，但再次发送默认值（90））

```
 $("#CName").autocomplete({    
        search: function(event, ui) {
         $("#CLoading").show();
    alert ($("#PID").val()); // it's worked, and alert new value , from hidden input
        },
        source: "Script_URL/"+$("#PID").val(),  /// but it's not worked ,  does not send new value from hidden input 
        minLength: 2,            
        select: function( event, ui ) {
            $("#CLoading").hide();
            $( "#CName" ).val(ui.item.value);
            $( "#CID" ).val(ui.item.id);

        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:27:55.567

当小部件初始化时，您的代码只会读取一次隐藏输入的值。如果您想每次都更新源 URL，则必须为`source`参数提供一个函数并自己发出 AJAX 请求：

```
$( "#PName" ).autocomplete({            
    search: function(event, ui) {
        $("#PLoading").show();
    },
    source: function () {
        $.ajax({
            url: "Script_URL/" + $("#PID").val(),
            data: request,
            dataType: "json",
            success: function (data) {
                response(data);
            },
            error: function () {
                response([]);
            }
        });
    },
    minLength: 2,            
    select: function( event, ui ) {
        $("#PLoading").hide();
        $("#PName").val(ui.item.value);
        $("#PID").val(ui.item.id);
    }
}); 
```

# php - MySQL INSERT 如果记录存在于另一个表中

> ID：13896832
> 
> 赞同：1
> 
> 时间：2012-12-15T22:36:14.387
> 
> 标签：php, mysql, codeigniter, insert

我想保留一个查询的查询有点麻烦。基本上，我有两个表，用户和关系。用户有一个 ID，关系表有 user_a 和 user_b 字段，其中包含 users.id 值，将用户匹配为“user_a 跟随 user_b”。

现在我正在使用 Twitter API 来吸引 user_a 的关注者（https://dev.twitter.com/docs/api/1/get/friends/ids），但用户表中的人是参加活动的人，而不是参加活动的人必须在 user_a 的朋友中。如果用户表中存在 user_b，我需要在关系表中执行 INSERT。

这是我到目前为止所拥有的！

```
$json = file_get_contents('https://api.twitter.com/1/friends/ids.json?cursor=-1&user_id=' . $this->_attendee->id);
$response = json_decode($json);
if($response->ids){
    foreach($response->ids as $friend){
        // query goes here
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T22:44:30.417

构建一个 select 语句，如果用户条目存在，则返回您要添加的行。然后执行 INSERT INTO user_a SELECT YOUR_STATEMENT;

例如。INSERT INTO user_a SELECT uid, "value1", 2, "some other string" FROM user_b WHERE uid=$friend;

# regex - 使用来自另一 EPS 的值更新一个 EPS 中的边界框的脚本

> ID：13896834
> 
> 赞同：2
> 
> 时间：2012-12-15T22:36:20.477
> 
> 标签：regex, shell, latex, bounding-box, eps

我在 LaTeX 中创建了大量图像（主要是[`pstricks`](http://ctan.org/pkg/pstricks)）。其中一些图像构成了显示某些算法进程的序列的一部分。进程从图像中添加或删除内容，这有效地影响了图像大小，因此也影响了围绕它的边界框。

所以我想做的是有一个脚本（在任何命令行可调用语言中），它将提取一个文件的边界框组件（例如`FileA.eps`）并将它们替换为另一个文件的边界框组件（例如`FileB.eps`）。有时我只想为 -components 执行此操作`y`，有时仅为 -components执行此操作，有时`x`仅为单个组件执行此操作（这取决于显示进度的顺序）。例如，考虑以下两个使用`latex`->`dvips`序列创建的文件：

### `FileA.eps`

```
%!PS-Adobe-2.0 EPSF-2.0
%%边界框：170 378 252 452
%%HiResBoundingBox：170.340 378.474 251.880 451.626
%%创建者：dvips(k) 5.992 版权所有 2012 Radical Eye Software
...

```

### `FileB.eps`

```
%!PS-Adobe-2.0 EPSF-2.0
%%边界框：148 365 269 478
%%HiResBoundingBox：148.446 365.940 268.483 477.651
%%创建者：dvips(k) 5.992 版权所有 2012 Radical Eye Software
...

```

我想`FileA.eps`必须更新到

### 更新`FileA.eps`

```
%!PS-Adobe-2.0 EPSF-2.0
%%边界框：170 365 252 478
%%HiResBoundingBox：170.340 365.940 251.880 477.651
%%创建者：dvips(k) 5.992 版权所有 2012 Radical Eye Software
...

```

其中`y`-coordinates`FileB.eps`用于替换`y`原始 中的 -coordinates `FileA.eps`。请注意，此更改适用于`%%BoundingBox`和`%%HiResBoundingBox`。

理想情况下，我想要一些`boundingboxscript`使用调用的通用脚本

```
[lang] boundinboxscript FileA.eps FileB.eps

```

语言在哪里`[lang]`（如`perl`or `ruby`）并且`FileA.eps`是就地编辑的。这个讨论起源于[TeX, LaTeX & Friends 聊天室](https://chat.stackexchange.com/transcript/41/2012/12/15)。我正在运行 Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:55:45.317

我对 perl 一无所知，但也许你可以转换这个 ruby​​ 脚本：

```
outfile = ARGV[0]
infile = ARGV[1]
opts = ARGV[2]
unless File.read(infile) =~ /%%BoundingBox: (\d+) (\d+) (\d+) (\d+)/
  puts "Invalid input file."
  exit!
else
  x, y, w, h = $1, $2, $3, $4
  eps = File.read(outfile).sub(/%%BoundingBox: (\d+) (\d+) (\d+) (\d+)/) do
    x = $1 unless opts.include? "x"
    y = $2 unless opts.include? "y"
    w = $3 unless opts.include? "w"
    h = $4 unless opts.include? "h"
    "%%BoundingBox: #{x} #{y} #{w} #{h}"
  end
  File.write(outfile, eps)
end 
```

调用：

```
ruby boundinboxscript.rb FileA.eps FileB.eps xywh 
```

最后一个选项是您要从中获取`FileB.eps`和放入的内容`FileA.eps`。

# audio - 音频流哪个更安全：RTMP 还是 HTTP 流？

> ID：13896835
> 
> 赞同：1
> 
> 时间：2012-12-15T22:36:23.707
> 
> 标签：audio, streaming, rtmp

我希望听众无法访问流式传输的 .mp3 文件，但不必牺牲移动兼容性。哪种协议最适合呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:46:26.043

没有这样的事情`inaccessible streaming`。如果无法访问，您将如何流式传输？:) 如果用户可以通过流媒体收听任何歌曲，则用户可以**访问**它。

如果您试图阻止用户为您的流录制或下载 .mp3 文件，那么您就是在错误地认为[通过默默无闻来确保安全](https://en.wikipedia.org/wiki/Security_through_obscurity)。如果设备可以通过网络获取数据并播放它，那么肯定有一种记录数据的方法。它要么通过捕获网络流量，要么对您的应用程序进行逆向工程以了解您用于播放歌曲的协议。无论你做什么来掩盖你的协议，它肯定会被逆向工程。

# c# - 数据绑定 Bing 地图图钉

> ID：13896836
> 
> 赞同：1
> 
> 时间：2012-12-15T22:36:24.003
> 
> 标签：c#, .net, xaml, data-binding, bing-maps

当我在 Xaml 中为 Windows 8 应用程序传递数据绑定时，我在提取一些我需要的信息时遇到了一些麻烦。

我在 app.xaml 中设计了一个默认模板：

```
 <DataTemplate x:Key="PinTemplate">
            <bm:Pushpin Name="{Binding img}" IsTapEnabled="True" >
                <bm:MapLayer.Position>
                    <bm:Location Latitude="{Binding Latitude}" Longitude="{Binding Longitude}" />
                </bm:MapLayer.Position>
            </bm:Pushpin>
 </DataTemplate> 
```

我想从上面的绑定中访问各个“img”字符串。在我的地图上，我嵌入了一个 itemcontrol，如下所示：

```
 <Maps:Map Name="london" HorizontalAlignment="Left" Height="546" Margin="78,34,0,0" Grid.Row="1"       VerticalAlignment="Top" Width="806" Credentials="{StaticResource BingCredentials}" RenderTransformOrigin="0.439,0.282">
        <Maps:Pushpin Name="myPin" Height="100" Width="100"/>
        <Maps:MapItemsControl ItemTemplate="{StaticResource PinTemplate}" ItemsSource="{Binding PushpinCollection}" Height="100" Width="100" Tapped="pushPin_Tapped"/>
        <Popup VerticalOffset="200"  HorizontalOffset="300" x:Name="Image" IsLightDismissEnabled="True" Height="2000" Width="2000" >
            <Image Name="myImage" Height="300" Width="300" Source="Assets/Logo.png"/>
        </Popup>
    </Maps:Map> 
```

而它背后的c#是：

```
 public class PushpinModel
    {
        public double Longitude { get; set; }
        public double Latitude { get; set; }
        public string img { get; set; }
    }

  public ObservableCollection<PushpinModel> PushpinCollection { get; set; }

  PushpinCollection = new ObservableCollection<PushpinModel>();

        PushpinCollection.Add(new PushpinModel() { Latitude = templat[0], Longitude = templng[0], img = names[0] });
        PushpinCollection.Add(new PushpinModel() { Latitude = templat[1], Longitude = templng[1], img = names[1] });
        DataContext = this; 
```

就目前而言，我在 MapsItemcontrol 上有一个动作控件“Tapped”，它可以正常工作，它会创建一个弹出窗口并显示一张图片。但是，我想将 img 中的信息传递给动作控制器，以便我可以指定要在特定图钉中显示的图像。我试着像下面那样做，但我认为它返回的数据上下文是针对整个 itemscontrol 的，我如何访问数据模板中每个 pushpincollection 实例的属性？谢谢

```
 private void pushPin_Tapped(object sender, TappedRoutedEventArgs e)
    {
           if (!Image.IsOpen) { Image.IsOpen = true; }
              var pushpinData = (sender as Pushpin).DataContext as PushpinModel;
              String file = pushpinData.ToString();
              // use image in popup here
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:25:42.583

尝试

```
var pushpinData = (sender as FrameworkElement).DataContext as PushpinModel; 
```

这就是我通常这样做的方式，因为您并不总是知道发件人类型是什么，但对我来说似乎是图钉..

# c# - 如何分发应用程序

> ID：13896841
> 
> 赞同：3
> 
> 时间：2012-12-15T22:37:26.170
> 
> 标签：c#, visual-studio-2010

我从来没有真正想分享我以前制作的任何东西，但我有一个程序，我希望能够传递给几个人。

这究竟是如何工作的？是否可以只创建一个exe文件？

我在我的项目中使用了 2 个第三方库。这将如何影响事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T22:51:22.030

可以提供 Release 目录的内容，但您必须记住将外部库的引用属性 Copy Local 设置为 true。如果您忘记给客户端所有库，您将收到运行时错误。更好的选择是使用例如[ClickOnce](http://msdn.microsoft.com/en-us/library/t71a733d%28v=vs.100%29.aspx)。将来，当您更新应用程序时，它将是最佳选择。

[这](http://www.youtube.com/watch?v=t4BTLdIMYEY)是来自 lynda.com 的快速教程。

# angularjs - angularjs 如何从我的项目模板中访问 ng-repeat 数组

> ID：13896843
> 
> 赞同：3
> 
> 时间：2012-12-15T22:37:52.237
> 
> 标签：angularjs

我想做这个...

```
<span ng-repeat="item in array1" ng-include="'genericItemTemplate.html'"> 
```

和这个...

```
<span ng-repeat="item in array2" ng-include="'genericItemTemplate.html'"> 
```

然后在 genericItemTemplate.. 中执行此操作...

```
[{{$index + 1}} of {{someArrayreference.length}}] 
```

我可以在模板中引用 ng-repeat 的数组吗？

另请参阅我的较长帖子... [https://groups.google.com/forum/?fromgroups=#!topic/angular/y_KuX0HRQ_U](https://groups.google.com/forum/?fromgroups=#!topic/angular/y_KuX0HRQ_U)

和我的笨蛋

[http://plnkr.co/edit/dY7M76kPyLeK0fvVZhvB](http://plnkr.co/edit/dY7M76kPyLeK0fvVZhvB)

迈克尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T23:27:48.467

使用 onload，一个 ng-include 可选参数：

```
<li ng-repeat="person in personlist=friends" ng-include="'myGenericTemplate.html'"
    onload="len=friends.length"></li>

<li ng-repeat="person in personlist=collegues" ng-include="'myGenericTemplate.html'"
    onload="len=collegues.length"></li>

[{{$index + 1}} of {{len}}] {{person.name}} 
```

输出：

```
I have friends. They are:
[1 of 2] John a boy who is 25 years old.
[2 of 2] Mary a girl

I also have collegues. They are:
[1 of 3] Hoolio a boy who is 42 years old.
[2 of 3] Kitty a girl
[3 of 3] Marge a girl 
```

# arrays - TCL中如何对关联数组的Key进行字符串操作

> ID：13896844
> 
> 赞同：1
> 
> 时间：2012-12-15T22:38:03.317
> 
> 标签：arrays, hashmap, tcl

我有一个关联数组或哈希，有没有办法可以对哈希的键进行操作。

例如：假设我在 Hash 的 Keyset 中有一组键，我想对这些键进行一些操作（一些字符串操作）。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:21:06.097

用于`array names myarray`检索所有键的列表，然后您可以根据需要对它们进行任何字符串操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T07:44:08.913

从您的问题中，我不太确定您是在谈论数组还是字典值；两者都是关联映射，但数组是变量的集合，字典是一阶值。

您可以使用命令获取数组的键，使用以下`array names`命令获取字典的键`dict keys`：

```
# Note, access with*out* $varname
set keys [array names theArray] 
```

```
# Note, access *with* $varname
set keys [dict keys $theDict] 
```

在这两种情况下，该`keys`变量随后都会保存一个普通的 Tcl 字符串列表，您可以以任何您想要的方式对其进行操作。然而，这些更改并没有反映它们的来源（因为这不是 Tcl 的值语义的工作方式，并且在实际代码中会非常混乱）。要更改数组或字典中条目的键，您必须删除旧的并插入新的；这将（可能）改变迭代顺序。

```
set newKey [someProcessing $oldKey]
if {$newKey ne $oldKey} {   # An important check...
    set theArray($newKey) $theArray($oldKey)
    unset theArray($oldKey)
} 
```

```
set newKey [someProcessing $oldKey]
if {$newKey ne $oldKey} {
    dict set theDict $newKey [dict get $theDict $oldKey]
    dict unset theDict $oldKey
} 
```

*从 Tcl 8.6.0 开始*，您还可以使用`dict map`字典进行此类更改：

```
set theDict [dict map {key value} $theDict {
    if {[wantToChange $key]} {
        set key [someProcessing $key]
    }
    # Tricky point: the last command in the sub-script needs to produce the
    # value of the key-value mapping. We're not changing it so we use an empty
    # mapping. This is one of the many ways to do that:
    set value
}] 
```

`dict set`如果您要更改大型字典中的几个键，则使用/更有效，`dict unset`如前所述：`dict map`针对进行大量更改的情况进行了优化。

# jquery - 如何让悬停颜色淡入淡出？- jQuery，HTML

> ID：13896846
> 
> 赞同：1
> 
> 时间：2012-12-15T22:38:14.807
> 
> 标签：jquery, html

# 一个例子：

这是我创建的一个 HTML 示例：http: [//jsfiddle.net/Tgjnp/2/](http://jsfiddle.net/Tgjnp/2/)

# 问题：

## CSS：

```
a {
    color: #bbb;
    text-decoration: none;
    margin-right: 2em;
    font-weight: bold;            
}

.green {
    color: green;                        
} 
```

举个例子，集合`class`是为了得到`fade animation`，所以指定的颜色在 上淡入淡出`mouse hover`。除此之外，它应该***恢复***为默认颜色。

问题是，如何让悬停颜色淡入淡出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:52:13.953

您不能使用纯 jQuery 为颜色设置动画。为此，您必须使用某种插件，即[jQuery UI](http://jqueryui.com/)（巨大的）或[Color 动画插件](http://www.bitstorm.org/jquery/color-animation/)

或者，您可以使用一些简单的 CSS3 过渡 - [**DEMO**](http://jsfiddle.net/Tgjnp/7/)

这在较新的浏览器中效果很好，但在较旧的 IE-s 中却不行。

```
a {
    color: #bbb;
    text-decoration: none;
    margin-right: 2em;
    font-weight: bold;

    -webkit-transition: color .5s linear;   
       -moz-transition: color .5s linear; 
            transition: color .5s linear;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:56:47.957

[这里](http://bavotasan.com/2009/creating-a-jquery-mouseover-fade-effect/)有一个很好的解释。它不使用任何花哨的 CSS3 魔法，只使用 JQuery。只需添加结束和开始颜色，JQuery 就会为过渡设置动画。

# rdf - 如何在三重存储中存储 N-triple rdf 并查询 SPARQl

> ID：13896853
> 
> 赞同：2
> 
> 时间：2012-12-15T22:39:10.773
> 
> 标签：rdf

我正在尝试存储 N-triple 并查询它们。将 N-triple 存储在三重存储中的最简单方法是什么，或者更简单的服务器可以做到这一点。

我非常感谢这方面的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T00:00:27.917

试试 Apache Jena 及其[TDB 数据库](http://jena.apache.org/documentation/tdb/commands.html#tdbloader)：

```
$ tdbloader --loc mystore file.nt
$ tdbquery --loc mystore "select * {?s ?p ?o}" # direct query
$ tdbquery --loc mystore --query myquery.sparql # from a file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:53:04.750

如果您希望使用基于*Web 的查询表单*或通过**http***像任何 SPARQL 端点一样查询数据*的能力，请尝试[Fuseki](https://jena.apache.org/documentation/fuseki2/)。

 ****有关更多详细信息，请参阅[我](https://stackoverflow.com/a/13907450/1413297)对这个问题的回答：[我在哪里测试我用 SPARQL 编写的 RDF 的查询](https://stackoverflow.com/q/13897712/1413297)****

# javascript - 使用javascript根据页面将类分配给li

> ID：13896854
> 
> 赞同：-2
> 
> 时间：2012-12-15T22:39:28.410
> 
> 标签：javascript, jquery, html, css

我有一个位于母版页中的菜单结构，由 CMS 控制，除了 javascript、CSS 和原始 HTML 之外，我没有任何编程可访问性。它看起来像这样：

```
<div id="menu">
<ul>
<li><a href="Menu1.aspx" target="_self" class="active_nav">Menu Option 1</a></li>
<li><a href="Menu2.aspx" target="_self">Menu Option 2</a></li>
<li><a href="Menu3.aspx" target="_self">Menu Option 3</a></li>
</ul>   
</div> 
```

我需要将其更改`.active_nav`为`li`他们所在的任何页面。在 javaScript 或 jQuery 中执行此操作的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:42:15.397

```
$('#menu>ul>li').click(function() {
    $('#menu>ul>li').removeClass('active_nav');
    $(this).addClass('active_nav');
}); 
```

默认情况下，您可能希望对 CSS 类使用连字符。这是标准做法。这毕竟不是 Python。

此外，这不应该在客户端或使用 JavaScript 完成。每次用户转到不同的页面时，JavaScript 都会重新加载，这意味着您的链接将只有活动类，直到浏览器重定向到目标位置。但是一旦用户导航到您的菜单项的链接，该菜单项将丢失 active_nav 类，因为 JavaScript 和其他所有内容都将重新加载，从 catch 或其他方式，取决于您的服务器设置。

底线是您需要从服务器端执行此操作。基本上，当使用 PHP 或您使用的任何其他服务器端语言呈现页面时，您应该基于 URL 突出显示当前项目。这是常见的做事方式。

完全在 JavaScript 中执行此操作的唯一方法是编写 Ajax 应用程序，这意味着用户实际上不会转到不同的页面，而只会看到从服务器实时加载的不同内容。如果您告诉我您使用的是哪种服务器端语言，那么我将能够提供更多帮助。

此外，谷歌可以提供帮助，因为这是一个非常常见的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T22:54:21.867

可能您需要使用当前窗口位置来了解应该突出显示的 li，如下所示（在您必须清除所有 active_nav 类之前：

```
 $('#menu a').each(function() {
      var currentUrl = document.URL;
       if (currentUrl.indexOf($(this).attr('href')) <> -1 ){
         $(this).addClass('active_nav');
       }
}); 
```

问候

# sublimetext2 - 为什么 AdvancedNewFile 插件不会在侧边栏中显示文件夹结构？

> ID：13896855
> 
> 赞同：1
> 
> 时间：2012-12-15T22:39:42.250
> 
> 标签：sublimetext2

我安装了插件，但是当我将文件保存在文件夹`css/style.css`中时，它不会出现在侧边栏中的文件夹结构中。

另外，如何设置这个项目的“全局”文件夹位置？或者如何更改到另一个项目以供以后使用？

也许我错过了 tuts+ 上的导师使用的东西，所以任何关于额外插件的提示来帮助完成这些任务将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:10:25.440

[我会在这里解决你的问题，但我建议在GitHub 页面](https://github.com/skuroda/Sublime-AdvancedNewFile)上创建一个问题，如果真的有问题的话（我也是该插件的当前维护者，我可能会更快地响应页面上的问题，因为我也收到来自那些的电子邮件通知）。

有了这些，我将从问题开始。创建文件后，能不能验证一下是不是已经创建了？也就是说，通过插件创建后，可以看到文件存在于Sublime Text之外吗？如果是这样，您能否提供有关您的设置的更多信息，以便我尝试重新创建问题？请注意，它也可能是编辑器本身的一个错误，但现在让我们假设它不是。创建文件时，输入窗口下方的状态栏中应该有绝对路径。它应该说一些类似的东西`Creating file at ...`

如果您愿意，可以管理许多配置。[可以在此处](https://github.com/skuroda/Sublime-AdvancedNewFile#settings)阅读有关这些的详细信息。这些可以设置为全局首选项（导航到`Preferences -> Package Settings -> AdvancedNewFile -> Settings - User`）。这将创建一个文件供您放置设置。您可以查看自述文件或默认设置以查看有效密钥列表。您还可以设置项目特定的设置，在[此处](https://github.com/skuroda/Sublime-AdvancedNewFile#project-specific-settings)进行说明。

默认情况下，AdvancedNewFile 插件通过使用它被激活的窗口中的文件夹来工作。因此，通过打开一个新项目/窗口，您将在创建文件时拥有一组新的顶级文件夹。如果您没有打开任何文件夹，它将回退到主目录。

让我知道我是否可以澄清任何事情。我会尝试在这里查看，但同样，为任何问题创建问题将是通知我的最快方式。

# mysql - 如何在有子句中设定两个条件

> ID：13896857
> 
> 赞同：10
> 
> 时间：2012-12-15T22:40:03.740
> 
> 标签：mysql

我有一个类似的表：

```
domain      |   file      | Number 
------------------------------------     
aaa.com     | aaa.com_1   | 111
bbb.com     | bbb.com_1   | 222
ccc.com     | ccc.com_2   | 111
ddd.com     | ddd.com_1   | 222
eee.com     | eee.com_1   | 333 
```

我需要查询`Domains`共享相同`Number`且`File`名称以`_1`. 我尝试了以下方法：

```
select count(domain) as 'sum domains', file
from table 
group by Number
having
count(Number) >1 and File like '%\_1'; 
```

它给了我：

```
sum domains | file
------------------------------
2           | aaa.com
2           | bbb.com 
```

我希望看到以下内容：

```
sum domains | file
------------------------------
1           | aaa.com
2           | bbb.com 
```

因为`Number`111 出现一次并以and`File`结尾，所以它应该只计数 1。我怎样才能正确应用我之前所说的两个条件？`_1``_2`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T11:39:27.503

如`SELECT`语法中所述：

> 该`HAVING`子句几乎在最后应用，就在项目发送到客户端之前，没有优化。

换句话说，它是在分组操作执行*之后*应用的（相比之下`WHERE`，它是在任何分组操作*之前执行的）。*请参阅[WHERE 与 HAVING](https://stackoverflow.com/q/2905292)。

因此，您当前的查询首先形成以下结果集：

```
SELECT   COUNT(domain) AS `sum domains`, file
FROM     `table`
GROUP BY Number 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/b4222/1/0)上查看：

```
| 求和域 | 文件 |
--------------------------
| 2 | aaa.com_1 |
| 2 | bbb.com_1 |
| 1 | eee.com_1 |

```

如您所见，为该`file`列选择的值只是每个组中的一个值 - 如[MySQL Extensions to 中`GROUP BY`](http://dev.mysql.com/doc/en/group-by-extensions.html)所述：

> 服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。

然后，您当前的查询会根据您的`HAVING`子句继续过滤这些结果：

```
HAVING   COUNT(Number) > 1 AND file LIKE '%\_1' 
```

使用上面选择的值`file`，每个组都匹配第二个标准；前两组在第一个标准上匹配。因此[完整查询](http://sqlfiddle.com/#!2/b4222/2/0)的结果是：

```
| 求和域 | 文件 |
--------------------------
| 2 | aaa.com_1 |
| 2 | bbb.com_1 |

```

根据[您上面的评论](https://stackoverflow.com/questions/13896857/how-can-i-make-two-condition-in-having-clause#comment19148447_13896857)，您希望在分组`file` *之前*过滤记录，然后过滤包含多个匹配项的结果组。因此分别使用`WHERE`and `HAVING`（并选择`Number`而不是`file`标识每个组）：

```
SELECT   Number, COUNT(*) AS `sum domains`
FROM     `table`
WHERE    file LIKE '%\_1'
GROUP BY Number
HAVING   `sum domains` > 1 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/b4222/3/0)上查看：

```
| 号码 | 求和域 |
----------------------
| 222 | 2 |

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-11-08T09:30:44.673

我正在使用以下

```
having ( SUM(qty) > 4 AND SUM(qty) < 15 ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-17T18:48:55.873

如果文件名`SELECT`不在`GROUP BY`. 你必须得到你的`GROUP BY`结果而不是`JOIN`回到原来的并添加过滤器逻辑，如下所示：

```
SELECT *
FROM
(
 select count(domain) as 'sum_domains', Number
 from table 
 group by Number
 having
 count(Number) >1
) result
join table t on result.Number = t.Number
WHERE file like '%\_1' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T22:45:58.990

试试下面的嵌套查询：

```
 select count(domain) as 'sum domains', domain as fileName
  from 
   (select domain, file from tableName
    group by Number
    having count(Number) >1) as temp
  WHERE file like '%\_1'; 
```

# android - 第一次安装应用程序使 api 为空

> ID：13896860
> 
> 赞同：2
> 
> 时间：2012-12-15T22:40:18.187
> 
> 标签：android, push-notification, urbanairship.com

在我的主要活动`onCreate`和方法中`onStart`，首次安装应用程序时`onResume`调用始终为空。`PushManager.shared().getAPID()`

但是，在该`onResume`方法之后，Urban Airship 会自动注册一个新的`APID`（我放置了一个按钮并创建了一个 toast 来打印`APID`）。我想`APID`在全新安装时检索它并将其存储在我的后端服务器中。我怎样才能做到这一点？

我的问题与[此](https://support.urbanairship.com/customer/portal/questions/277810-why-is-getpushid-null-the-first-time-)问题类似，但我希望在我自己的后端服务器上注册 apid，而不是 Urban Airship。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T19:40:27.323

我有同样的问题。为了让 UA 库在第一次安装时生成 APID，我必须调用 PUshManager.enablePush()。

它不是我想要的理想解决方案，但它允许我获取 APID 并将其保存到单独的服务器。

# hibernate - 如何将输出文本值保存到对象，然后保存到数据库？

> ID：13896862
> 
> 赞同：0
> 
> 时间：2012-12-15T22:40:19.140
> 
> 标签：hibernate, jsf

我对 JSF 和 Hibernate 很陌生，我找到了一些教程，我几乎理解了所有内容，但是有一些非常简单的东西我还没有理解，我自己无法意识到如何去做；

`1.This is my html page`

```
 <h:panelGrid columns="2">
   <h:outputLabel value="Title:"/>
   <h:inputText value='#{Activity.title}' />
 </h:panelGrid> 
```

`2.This is my save method at activityController`

```
public void saveActivity(String title){
    Session session = HibernateUtil.getSessionFactory().openSession();
    Transaction transaction = null;

    try {
        transaction = session.beginTransaction();
        Activity activity = new Activity(title);
        session.save(activity);
        transaction.commit();
    } catch (HibernateException e) {
        transaction.rollback();
    }finally{
        session.close();
    }
} 
```

**我的疑问是：如何获取用户在 HTML 页面的 OutputText 中键入的内容并将其发送到我的 saveActivity 方法？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T22:48:15.217

您需要一个表单和一个提交按钮：

```
<h:form>
<h:panelGrid columns="2">
   <h:outputLabel value="Title:"/>
   <h:inputText value='#{activityBean.title}' />
 </h:panelGrid>
<h:commandButton action="#{activityBean.saveActivity()}" value="Save" />
</h:form> 
```

然后，要么使你的控制器成为一个带有注解 @SessionScoped @ManagedBean(name = "activityBean") 的托管 Bean，要么为它使用一个类并给它一个对你的控制器的引用。

祝你好运 ：）

# ios - 在 UITextView 中显示表格的动态标题

> ID：13896879
> 
> 赞同：0
> 
> 时间：2012-12-15T22:43:49.437
> 
> 标签：ios, uitableview, sdk, nsmutablearray

我有一个包含事件的数组。所有这些事件都显示在 UITableView 中。每次打印新的事件日期时，如何设置新的部分标题？

```
E.g.:

20.12.2012
- event 1
- event 2
- event 4

21.12.2012:
- event 3

22.12.2012:
-event 5 
```

这就是我的 Event 对象的样子：

```
events = [NSMutableArray arrayWithCapacity:20];

Event *e1 = [[Event alloc] init];
e1.date = @"20.12.2012";
e1.time = @"15:00 Uhr";
e1.address = @"Bla";
[events addObject:e1];

Event *e2 = [[Event alloc] init];
e2.date = @"20.12.2012";
e2.time = @"16:00 Uhr";
e2.address = @"Bla";
[events addObject:e2];

Event *e3 = [[Event alloc] init];
e3.date = @"20.12.2012";
e3.time = @"16:30 Uhr";
e3.address = @"Bla";
[events addObject:e3];

Event *e4 = [[Event alloc] init];
e4.date = @"21.12.2012";
e4.time = @"17:30 Uhr";
e4.address = @"Bla";
[events addObject:e4]; 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T04:42:48.500

1.  计算所有事件中唯一日期的数量；
2.  实施

    ```
    -(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
       return numberOfUniqueDates;
    } 
    ```

3.  实施

    ```
    -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
        return [eventsData[section] count];
    } 
    ```

4.  在

    ```
    -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

        Use indexPath.section and indexPath.row to determine the values for cells;
    } 
    ```

5.  实施

    ```
    - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
        return date[section];
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T07:08:27.403

不要忘记添加

```
 [yourTableView reloadData]; 
```

更新 tableView 的内容后...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T12:55:41.957

您可以将所有事件保存到以日期为键的字典中。

假设您在 header(.h) 文件中有`_eventsDictionary`和`_events`作为 ivar。`NSMutableDictionary *_eventsDictionary;` `NSArray *_events`

```
- (void)reloadTableData {
   _eventsDictionary = [NSMutableDictionary dictionary];
   for (Event *ev in _events) {
        NSMutableArray *eventArray = [_eventsDictionary objectForKey:ev.date];
        if (! eventArray) {
            // first event for this date
            eventArray = [NSMutableArray array];
            [_eventsDictionary setObject:eventArray forKey:ev.date];
        }
        [eventArray addObject:ev];
    }
    [self.tableView reloadData];
} 
```

现在您拥有数组中的所有事件，这些事件位于`_eventsDictionary`.

```
- (NSString *)dateStringAtIndex:(NSInteger)index {
   // Actually I prefer sort them as date objects
// Since you have all dates as string, it should ok for you
   NSArray *allSortedKeys = [[_eventsDictionary allKeys] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];

   return [allSortedKeys objectAtIndex:index];
}
- (NSArray *)eventsArrayAtIndex:(NSInteger)index {

   NSArray *eventsArray = [_eventDictionary objectForKey:[self dateStringAtIndex:index]];
   return eventsArray;
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return _eventDictionary.count;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

   return [[self eventsArrayAtIndex:section] count];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
 return [self dateStringAtIndex:section];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
   cell = .....
   .....

    NSArray *eventsArray = [self eventsArrayAtIndex:indexPath.section];
    Event *ev = [eventsArray objectAtIndex.row];
    // configure your cell with the event
    // eg. cell.textLabel.text = ev.time
    return cell;
} 
```

现在，您可以在事件数组中的事件之后在某处调用 [self reloadTableData]，它为您完成了这项工作。

# wordpress - 如何突出显示/标记为重要/列出一些 wordpress 帖子？有没有插件？

> ID：13896881
> 
> 赞同：0
> 
> 时间：2012-12-15T22:44:24.087
> 
> 标签：wordpress, list, post, plugins

我想将一些 wordpress 帖子标记为重要，然后我想在每个页面的开头将这些帖子视为链接列表（例如当您将帖子标记为静态时：帖子选项 -> 可见性）。并更改此列表顺序，内容...

所以，我可以开始考虑如何做一个插件，但之前我想知道是否已经有一个插件可以做我想要的。

谁能帮我？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:18:07.173

显然，它与主题风格有关，而不是插件。您只需为您的重要帖子添加一些标签，例如“特殊”，然后从您的主题中：

```
 <?php query_posts('tag=special');if(have_posts()) : while(have_posts()) : the_post(); ?>
      <h3>Important : <?php the_title(); ?></h3>
 <?php endwhile;endif;wp_reset_query(); ?> 
```

这只是原理，希望对您有所帮助。

/*我已经编辑了上面的*/

# safari - Raphael 论文在 Safari 中捕捉鼠标事件

> ID：13896882
> 
> 赞同：0
> 
> 时间：2012-12-15T22:44:25.680
> 
> 标签：safari, raphael

我有一个网站，它使用 Raphael 让用户在页面内容顶部绘制箭头，同时仍然能够访问底层内容。为此，我有一个 div 覆盖整个页面，并将 css 设置为`pointer-events:none`，并将 Raphael 论文放在该 div 中。这在 Chrome 和 Firefox 中效果很好，但在 Safari 中，鼠标事件不会通过覆盖的 div。

如果没有将 Raphael 论文添加到覆盖的 div 中，即使在 Safari 中，鼠标事件也可以正常通过。问题似乎是空白的 Raphael 论文正在捕捉 Safari 中的鼠标事件。知道如何解决这个问题吗？

在这里摆弄：http: [//jsfiddle.net/T9rD3/](http://jsfiddle.net/T9rD3/)。

# php - 如何在 Sonata Admin Bundle configureFormFields 中使用现有的 Symfony FormType？

> ID：13896885
> 
> 赞同：7
> 
> 时间：2012-12-15T22:44:39.867
> 
> 标签：php, forms, symfony, sonata-admin

SonataAdminBundle在扩展类`configureFormFields`时提供了一个方法。`Admin`

该方法需要一个`FormMapper`类。

对于我创建这个类的实体，我已经`FormType`以典型的 Symfony 方式构建了一个类。

如何使用该类，而不必再次使用`FormMapper`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T14:32:38.527

就像是：

```
public function configureFormFields(FormMapper $formMapper)
{        
    $form = new ReviewFormType();
    $form->buildForm($formMapper->getFormBuilder(),array());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T11:20:59.700

经过数小时找到干净的方法后，我今天不得不做同样的事情（定义了一个自定义表单类型并尝试在奏鸣曲中使用），我想出了这个：

```
formMapper->add('your_field', new YourType($your_params), array(                    
                ), array('type' => 'form')) 
```

替换`your_field`为您的字段名称，

`new YourType`使用您的自定义字段类型和

`$your_params`使用您的字段的构造函数的参数，

第四个参数`array('type' => 'form')`非常重要，它告诉奏鸣曲您的表单实际上是什么类型（奏鸣曲不会根据您的类型的对象自动确定）我的自定义字段扩展了`form`类型（它是具有自己字段的嵌入式表单）所以我指定，如果您的类型扩展了其他内容，然后指定它，希望它能正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-10T09:41:11.107

我在寻找完全相同的东西时遇到了这个问题，最终在文档中找到了以下内容：

> 您可以将 Symfony`FormBuilderInterface`实例添加到 `FormMapper`. 这允许您重新使用模型表单类型。使用 a 添加字段时`FormBuilderInterface`，会猜测类型。
> 
> 鉴于你有`PostType`这样的：
> 
> ```
> use Symfony\Component\Form\FormBuilderInterface;
> use Symfony\Bridge\Doctrine\Form\Type\EntityType;
> use Symfony\Component\Form\Extension\Core\Type\TextType;
> use Symfony\Component\Form\Extension\Core\Type\TextareaType;
> use Symfony\Component\Form\AbstractType;
> 
> class PostType extends AbstractType
> {
>     public function buildForm(FormBuilderInterface $builder, array $options)
>     {
>         $builder
>             ->add('author', EntityType::class, [
>                 'class' => User::class
>             ])
>             ->add('title', TextType::class)
>             ->add('body', TextareaType::class)
>         ;
>     }
> } 
> ```
> 
> 你可以像这样重用它：
> 
> ```
> use Sonata\AdminBundle\Form\FormMapper;
> use Sonata\AdminBundle\Admin\AbstractAdmin;
> use App\Form\PostType;
> 
> class Post extend AbstractAdmin
> {
>     protected function configureFormFields(FormMapper $formMapper)
>     {
>         $builder = $formMapper->getFormBuilder()->getFormFactory()->createBuilder(PostType::class);
> 
>         $formMapper
>             ->with('Post')
>                 ->add($builder->get('title'))
>                 ->add($builder->get('body'))
>             ->end()
>             ->with('Author')
>                 ->add($builder->get('author'))
>             ->end()
>         ;
>     }
> } 
> ```

[https://symfony.com/doc/master/bundles/SonataAdminBundle/reference/form_types.html#adding-a-formbuilderinterface](https://symfony.com/doc/master/bundles/SonataAdminBundle/reference/form_types.html#adding-a-formbuilderinterface)

# c - TCP connect()（在 C 中）总是失败，即使服务器可以通过 telnet 访问

> ID：13896891
> 
> 赞同：1
> 
> 时间：2012-12-15T22:46:01.490
> 
> 标签：c, sockets, tcp, connect

我正在尝试创建一个监视 IRC 服务器的程序，即使连接的基础知识也遇到了麻烦。我正在我的学校开发一个 linux 集群。

我根本不知道我做错了什么。这是我的代码，几乎一字不差地从 C 语言中的 TCP IP 套接字第 2 章复制而来。

```
 int main(int argc, char** argv)
 {

      char *servName = "irc.freenode.net";
      in_port_t servPort = 6667;

      //Start populating server information into a sockaddr
      struct sockaddr_in servAddr;
           memset(&servAddr, 0, sizeof(servAddr));

           //To get the IP address of irc.freenode.net
               //Using gethostbyname
           char servIP[16];
           struct hostent *hent;
           hent = gethostbyname(servName);
           inet_ntop(AF_INET, (void *)hent->h_addr_list[0],servIP,16);         

           //Convert the IP address's endianness
           int rtnVal = inet_pton(AF_INET, servIP, &servAddr.sin_addr.s_addr);
           if(rtnVal <= 0)
                dieMsg("inet fail",rtnVal);

           servAddr.sin_port = htons(servPort);
           servAddr.sin_family = AF_INET;
           printf("%s\n",servIP);
      //End server information

      //Open a socket to use
      int sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);          
      if(sock<0)
           dieMsg("sock fail",sock);

      //Connect using the sock, and the populated sockaddr struct.
      if(connect(sock,(struct sockaddr*) &servAddr, sizeof(servAddr))<0);
      {
           dieMsg("con fail",-1);
      }

      return 0;
 } 
```

`dieMsg`是一个函数，它接受一个字符串和一个 int，打印它们，然后退出。

这段代码的输出是

```
89.16.176.16
con fail -1 
```

或者，我也使用了`addrinfo`结构，但无济于事：

```
int main(int argc, char** argv)
{    

     char *servHostc = "irc.freenode.net";
     char *servPortc = "6667";

     struct addrinfo addrCriteria;
     memset(&addrCriteria, 0, sizeof(addrCriteria));
     addrCriteria.ai_family = AF_INET;
     addrCriteria.ai_socktype = SOCK_STREAM;
     addrCriteria.ai_protocol = IPPROTO_TCP;

     struct addrinfo *servAddr;
     int rtnVal = getaddrinfo(servHostc,servPortc, &addrCriteria, &servAddr);
     if(rtnVal != 0)
          dieMsg("getaddrinfo() connect fail", rtnVal);

     int sock = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);

     if(connect(sock, (struct sockaddr*) &servAddr, sizeof(servAddr) < 0))
     {
          free(servAddr);
          dieMsg("Connect failed",-1);
     }

     return 0;
} 
```

Telnet 对这两个地址都有效，所以这不是我的互联网连接。

```
$ telnet irc.freenode.net 6667
Trying 128.237.157.136...
Connected to irc.freenode.net (128.237.157.136).
Escape character is '^]'.
:hubbard.freenode.net NOTICE * :*** Looking up your hostname...
:hubbard.freenode.net NOTICE * :*** Checking Ident
:hubbard.freenode.net NOTICE * :*** Found your hostname
^]
telnet> Connection closed.
$ telnet 89.16.176.16 6667
Trying 89.16.176.16...
Connected to wolfe.freenode.net (89.16.176.16).
Escape character is '^]'.
:wolfe.freenode.net NOTICE * :*** Looking up your hostname...
:wolfe.freenode.net NOTICE * :*** Checking Ident
:wolfe.freenode.net NOTICE * :*** Found your hostname
^]
telnet> Connection closed. 
```

我通常讨厌问问题，所以这是我最后的手段。如果有人可以请阐明我的困境，我将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-15T23:21:50.700

```
 if(connect(sock,(struct sockaddr*) &servAddr, sizeof(servAddr))<0);
  {
       dieMsg("con fail",-1);
  } 
```

`;`在结束时`if`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T23:31:35.183

第二个代码示例也有问题。该行：

```
 if(connect(sock, (struct sockaddr*) &servAddr, sizeof(servAddr) < 0)) 
```

你知道吗？您正在与`sizeof()`零进行比较，而不是`connect()`结果！另外，你没有`servAddr`正确使用。尝试将此行替换为（同样，更改后它对我有用）：

```
 if(connect(sock, servAddr->ai_addr, servAddr->ai_addrlen) < 0) 
```

另请注意，这`servAddr`实际上是一个链表，请参阅此示例：[http ://www.geekpage.jp/en/programming/linux-network/getaddrinfo-3.php](http://www.geekpage.jp/en/programming/linux-network/getaddrinfo-3.php)

另外，我建议您尝试使用[Strace](http://en.wikipedia.org/wiki/Strace) - 当您想快速检查正在发生的事情时，它非常有用。

**编辑：**我可以看到另一个错误 -`free()`无论结果如何都应该调用`connect()`，你在这里泄漏内存。再次，工具提示：[Valgrind](http://valgrind.org/)

# android - Facebook sdk 3.0 安卓

> ID：13896892
> 
> 赞同：1
> 
> 时间：2012-12-15T22:46:06.310
> 
> 标签：android, facebook, facebook-android-sdk

我已经无数次阅读 developer.facebook.com 上的基本 hello world facebook app for android 的教程，以确保我没有犯错，但我收到错误“remote_app_id 与存储的 id 不匹配”，但它匹配但不确定为什么它会抛出该错误。此外，当我运行示例时，我得到一个失败的活页夹事务。现在奇怪的是，如果我卸载手机上的 fb 应用程序并强制用户登录 facebook，那么基本的 hello world 应用程序就可以工作。我做错了什么还是这是一个 facebook sdk 问题。我已经下载并重新安装了所有东西，但仍然遇到同样的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T11:53:31.160

尝试

```
try {
PackageInfo info = getPackageManager().getPackageInfo("com.eatapp", PackageManager.GET_SIGNATURES);
for (Signature signature : info.signatures) {
    MessageDigest md = MessageDigest.getInstance("SHA");
    md.update(signature.toByteArray());
    Log.e("MY KEY HASH:", Base64.encodeToString(md.digest(), Base64.DEFAULT));
}
} catch (NameNotFoundException e) {

} catch (NoSuchAlgorithmException e) {

} 
```

在您的主要活动中:-) 这是适用于 Android SDK 3.0 的唯一解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-26T14:35:48.557

另一个可能的错误（发生在我身上）是：在 Facebook 应用程序控制台设置“密钥哈希”并使用另一个密钥库签署 android 应用程序。

不幸的是，这是因为[Facebook 入门教程](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)引发了这个错误。它说 android 开发人员应该在您的示例中使用默认的 android 调试密钥，并且没有说明应该使用您将签署应用程序的相同密钥库生成密钥哈希。

我的建议是在你的 facebook 控制台设置两个 Key Hashes：

1.  默认安卓调试键：

> keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -二进制 | openssl base64

1.  您的应用程序发布密钥：

> keytool -exportcert -alias yourappreleasekeyalias -keystore ~/.your/path/release.keystore | openssl sha1 -二进制 | openssl base64

请记住：您不能发布使用 SDK 工具生成的调试密钥签名的应用程序。因此，不可能仅使用使用前一个命令行生成的哈希键来发布应用程序（如 facebook 教程所建议的那样。

有关签署您的申请的更多信息，请访问[签署您的申请](http://developer.android.com/tools/publishing/app-signing.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T21:46:45.143

解决了。

哈希值错误。这似乎是一个窗口问题或人为失败。我用了：

"keytool.exe 的位置" -exportcert -alias alias -keystore "keystore 的位置" | “openssl.exe 的位置” sha1 -binary | “openssl.exe 的位置”ba​​se64

并得到了错误的哈希值。反正找到这个帖子

[http://p-xr.com/implementing-facebook-into-your-app-invalid-key-with-keytool/](http://p-xr.com/implementing-facebook-into-your-app-invalid-key-with-keytool/)

下载并运行密钥生成应用程序并从 logcat 中获取哈希值。这对于调试密钥非常有用，但不确定何时将您的程序发布到野外

希望这可以帮助

# php - 注意未定义的索引 url

> ID：13896893
> 
> 赞同：1
> 
> 时间：2012-12-15T22:46:06.370
> 
> 标签：php, mod-rewrite

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”</a>](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)
> 
> [](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)

[](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)

[我正在做 youtube mvc 教程](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)[http://www.youtube.com/watch?v=Aw28-krO7ZM](http://www.youtube.com/watch?v=Aw28-krO7ZM)并且已经停止了最好的第一步：

我的 index.php 文件：

```
<?php
$url = $_GET['url'];
require 'controllers/' . $url . '.php'; 
```

我的 .htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.+)$ index.php?url=$1 [QSA,L] 
```

所以，接下来的问题是：当我访问除“index”之外的任何其他 URL 时，它的效果都很好。那么“索引”网址有什么问题？

```
Notice: Undefined index: url in /var/www/sadman/index.php on line 2
Warning: require(controllers/.php) [<a href='function.require'>function.require</a>]:
 failed to open stream: No such file or directory in /var/www/sadman/index.php on line 4 
```

顺便说一句，我有 LAMP，我认为我的设置是正确的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:20:14.507

通知告诉您 key`url`不存在`$_GET`- 可能 index.php 被直接调用（如[http://yourdomain.com/index.php](http://yourdomain.com/index.php) - 在这种情况下 rewrite 不执行任何文件存在）。

警告是因为文件不存在。

要修复两者，请执行以下操作：

```
$url = 'default'; // set default value (you need to have also existing file controllers/default.php)
// check if `url` exists in $_GET
// check if it is string
// check if it match proper pattern (here it has to be built from letters a-z, A-Z and/or _ characters - you can change it to match your requirements)
// check if file exists 
if (isset($_GET['url']) && is_string($_GET['url']) && preg_match('/^[a-z_]+$/i',$_GET['url']) && file_exists('controllers/'.$_GET['url'].'.php')) {
   $url = $_GET['url']; // name in $_GET['url'] is ok, so you can set it
}
require('controllers/'.$url.'.php'); 
```

# python - 如何将 Beautiful Soup Unicode 转换为十进制值？

> ID：13896894
> 
> 赞同：-1
> 
> 时间：2012-12-15T22:46:07.013
> 
> 标签：python, beautifulsoup

我正在尝试使用python的Beautiful Soup Library从一个html文件中获取一堆div，然后从那里得到字符串——这是一个金钱价值——在div里面。然后删除美元符号并将其转换为小数，以便我可以使用大于和小于条件语句来比较值。我已经用谷歌搜索了它，似乎无法想出将这个 unicode 字符串转换为十进制值的方法。我真的可以在这里使用一些帮助。如何将 unicode 转换为十进制值？

这是我最后一次尝试：

```
import unicodedata
from bs4 import BeautifulSoup
soup = BeautifulSoup(open("/Users/sm/Documents/python/htmldemo.html"))
for tag in soup.findAll("div",attrs={"itemprop":"price"}) :
val = tag.string
new_val = val[8:]
workable = int(new_val)
if workable > 250:
    print(type(workable))
else:
    print(type(workable)) 
```

编辑：

当我打印 new_val 的类型时，我得到：

```
print(type(new_val)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:52:28.307

您可以使用`int()`or ，`float()`具体取决于您希望它是整数还是可以有小数点的数字。

据我所知，您正在使用`int()`. 当您似乎认为这不起作用时，您可能想要`float()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:54:19.527

您确定该值是 unicode，而不是 BeautifulSoup 内部表示吗？在python中将unicode转换为整数似乎没有问题。这是 Python 解释器的输出。

```
In [2]: my_unicode = u'10'

In [3]: type(my_unicode)
Out[3]: unicode

In [4]: my_int = int(my_unicode)

In [5]: type(my_int)
Out[5]: int

In [6]: my_int > 2
Out[6]: True

In [7]: my_int > 10
Out[7]: False 
```

您可能在将一些 BeautifulSoup 内部类型转换为整数时遇到问题。

# mysql - 建表脚本 DB2 to MYSQL

> ID：13896899
> 
> 赞同：0
> 
> 时间：2012-12-15T22:46:36.073
> 
> 标签：mysql, sql

有人可以看看下面的脚本并告诉我为什么会出错吗？它来自 db2（通过 Razor SQL），我已经能够纠正所有其他错误，但我无法弄清楚这一点。它进入MYSQL。（最新版本）

```
CREATE TABLE APCHECKIN (
    CHKBCH_NO INTEGER NOT NULL,
    ENTERDATETIME TIMESTAMP DEFAULT CURRENT TIMESTAMP NOT NULL,
    VENDOR_NO INTEGER DEFAULT 0 NOT NULL,
    INVOICE_NO VARCHAR(18) NOT NULL,
    CHK_NO INTEGER,
    PAIDAMOUNT DECIMAL(14,2) DEFAULT 0 NOT NULL,
    PRIMARY KEY (CHKBCH_NO,ENTERDATETIME,VENDOR_NO,INVOICE_NO)
); 
```

这是我得到的错误。我假设这与我只是忽略它的时间戳有关！

```
Error : You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'CURRENT TIMESTAMP NOT NULL,
    VENDOR_NO INTEGER DEFAULT 0 NOT NULL,
    INVOICE_NO V' at line 3 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T22:49:25.357

您需要在[CURRENT_TIMESTAMP中使用下划线](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_current-timestamp)

```
CREATE TABLE APCHECKIN (
    CHKBCH_NO INTEGER NOT NULL,
    ENTERDATETIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,
    VENDOR_NO INTEGER DEFAULT 0 NOT NULL,
    INVOICE_NO VARCHAR(18) NOT NULL,
    CHK_NO INTEGER,
    PAIDAMOUNT DECIMAL(14,2) DEFAULT 0 NOT NULL,
    PRIMARY KEY (CHKBCH_NO,ENTERDATETIME,VENDOR_NO,INVOICE_NO)
); 
```

[http://sqlfiddle.com/#!2/92758](http://sqlfiddle.com/#!2/92758)

# javascript - JavaScript 中的事件检查

> ID：13896901
> 
> 赞同：0
> 
> 时间：2012-12-15T22:46:59.260
> 
> 标签：javascript, html, events

如何检查是否发生了（特定类型的）事件？假设我必须使用以下代码：

```
<html>

    <head>
        <title>Events</title>
        <script type="text/javascript">
            document.addEventListener('keydown',

            function (event) {
                if (event.keyCode == 13) { //ENTER key was pressed
                    alert("Hahaha!");

                }

            }, false);

            document.addEventListener('click',

            function () {
                alert("Ahahahah!");

            }, false)
        </script>
    </head>

    <body></body>

</html> 
```

假设我想要带有字符串“您在单击事件后按下 ENTER！”的警报框。按下 ENTER 并在单击事件发生后显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T22:52:42.053

您需要记录发生的顺序。默认情况下，JavaScript 不会以您描述的方式记忆事件链，仅仅是因为您可以按照您想要的任何顺序触发它们，因此这将是该语言的一个无用功能。

基本上，当点击事件触发时，您需要记录它已经触发。基本实现是使用布尔标志。

```
var clickFired = false;// by default it is false.
document.addEventListener('click', function(event) {
    clickFired = true;
}, false);
document.addEventListener('keydown', function(event) {
    if (clickFired) {
        alert('key pressed after click');
    } else {
        alert('key pressed before click');
    };
}; 
```

JavaScript 只记住一些关于事件的非常具体的事情。它知道在触发事件时是否按下了`ctrlKey`、或`altKey`，记住了冒泡规则、触发器执行阶段、目标以及您可以通过键入以下内容看到的更多内容：`shiftKey``metaKey`

```
var clickFired = false;// by default it is false.
    document.addEventListener('click', function(event) {
        console.dir(event);//Firebug command.
        clickFired = true;
    }, false); 
```

另外，**请注意**，跨浏览器兼容的事件管理并非易事。各种浏览器以非常不同的方式处理事件。一个基本的例子是 Internet Explorer 使用`attachEvent()`，而不是`addEventListener()`.~

如果您正在为生产环境编写代码，我建议您使用某种形式的库来让您的生活更轻松。否则，您将不得不重新发明轮子，这对于学习目的来说非常棒，但您可能会发现它既乏味又耗时。除非您真的了解 JavaScript，否则编写原始代码不适合您希望其他人立即使用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:51:57.933

使用回调函数可能是最简单的。这是一个包含更多信息的[示例](http://www.impressivewebs.com/callback-functions-javascript/)

```
function mySandwich(param1, param2, callback) {  
    alert('Started eating my sandwich.\n\nIt has: ' + param1 + ', ' + param2);  
    callback();  
}  

mySandwich('ham', 'cheese', function() {  
    alert('Finished eating my sandwich.');  
}); 
```

# objective-c - 在应用程序的多个部分调用位置

> ID：13896906
> 
> 赞同：0
> 
> 时间：2012-12-15T22:47:54.477
> 
> 标签：objective-c, ios, xcode, cllocationmanager

我想使用以下代码在我的应用程序的多个部分中查找用户的位置。为了避免复杂性，我只想在一个地方获取用户的位置。我会假设我需要将它放在我的 appDelegate 中，然后在需要使用它时从其他视图中以某种方式调用它。有谁知道我需要使用什么来将位置作为 NSString 在我的 appDelegate 以外的视图/选项卡上获取？谢谢！

```
- (NSString *)deviceLocation {
NSString *theLocation = [NSString stringWithFormat:@"latitude: %f longitude: %f", 
locationManager.location.coordinate.latitude, 
locationManager.location.coordinate.longitude];
return theLocation;
}

- (void)viewDidLoad
{
locationManager = [[CLLocationManager alloc] init];
locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
[locationManager startUpdatingLocation];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T22:58:25.197

将您的所有位置侦听器和相关内容移动到应用程序委托，然后制作的`NSString *location` [属性](https://stackoverflow.com/q/5986516/593709)，`AppDelegate`现在每当您获得更新的位置设置为 时`NSString *location`，在您的另一个`ViewControllers`中，当您需要时，访问应用程序代理的位置属性。

如果你真的需要一个更新的位置，你可以使用[NSNotificationCenter](https://stackoverflow.com/q/2191594/593709)并广播一个关于新位置更新的通知，所以`ViewController`真正需要更新位置的会注册自己以获得关于新位置的通知，并会做相应的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T05:05:20.067

```
You can put your code in app delegate..like this

#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>
@interface AppDelegate : UIResponder <UIApplicationDelegate,CLLocationManagerDelegate>
{
    CLLocationManager *locationManager;
@public
    float latitude;
    float longituted;
}

@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    if (locationManager==nil) {
        locationManager=[[CLLocationManager alloc]init];

        locationManager.delegate=self;
        [locationManager startUpdatingLocation];
    }
    if ([CLLocationManager regionMonitoringAvailable]) {//check service is available or not

        [self startregionMonitoring];
    }

    [self.window makeKeyAndVisible];
    return YES;
}

#pragma mark - GET Location
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"didUpdateToLocation");
    NSDate *eventData=newLocation.timestamp;
    NSTimeInterval howRecent=[eventData timeIntervalSinceNow];

    if (abs((howRecent)<15.0)) {
        NSLog(@"latitude %+.6f, longitude %+.6f \n",newLocation.coordinate.latitude,newLocation.coordinate.longitude);

        CLLocationDistance dist=[newLocation distanceFromLocation:oldLocation]/1000;
        NSLog(@"===================distance %5.1f traveled",dist);
        latitude=newLocation.coordinate.latitude;
        NSLog(@"lat :%+.5f",latitude);
        longituted=newLocation.coordinate.longitude;
        NSLog(@"long %+.6f",longituted);
    }

}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    [locationManager stopUpdatingLocation];

}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    [locationManager startUpdatingLocation];

}

now where you want latitude and longitude you can access [DELEGATE latitude];,[DELEGATE longitude]; where DELEGATE Is #define DELEGATE (AppDelegate *)[[UIApplication sharedApplication] delegate] 
```

# floating-point - 将以下以 IEEE 浮点数 (S, Fraction , Exponent) 表示的 32 位二进制数转换为十进制数

> ID：13896907
> 
> 赞同：0
> 
> 时间：2012-12-15T22:47:56.293
> 
> 标签：floating-point, binary, ieee

**0** 000000000000000000000000 **0111011**

我会怎么做这个问题我迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:10:16.677

您的粗体表明您可能对字段的顺序有些困惑；IEEE 通常对浮点数使用[符号、指数、分数的顺序。](http://en.wikipedia.org/wiki/Single_precision_floating-point_format)（顺便说一句，如果没有 NaN 或其他非数字值，这允许使用二进制补码整数排序来对 IEEE 浮点数进行排序。）

那么我们在这里看什么呢？第一位是符号：0。所以我们有一个正数。（如何记住这一点？回到允许使用的整数排序——二进制补码整数中的前导表示它是负数。）

接下来的八位是指数：也是0。这是可能的最低指数值；它通常表示一个偏置 127 或值 -127 的无符号整数。但是，指数值 0 保留用于编码次正规数（小于通常可表示的最小数字）；在这种特殊情况下，有效指数是 -126，但不是表示数字 1.fraction * 2^exponent，次正规表示数字 0.fraction * 2^exponent。

最后，我们得到分数，即`0000000000000000111011`。所以我们的总数是0.0000000000000000111011b * 2^-126。将其转换为十进制留给读者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T00:20:19.253

我同意@addaon 之前发布的答案。此外，在某些语言（包括 Java）中可以轻松完成转换：

```
public class Test {
   public static void main(String[] unused) {
      int raw = 0b0000000000000000000000000111011;
      float f = Float.intBitsToFloat(raw);
      System.out.println(f);
   }
} 
```

（您需要版本 7 来获取二进制文字，但在早期版本中可以直接做的事情少一点）

输出为 8.3E-44，与作为非规范化正数的解释一致，并且与转换网站一致。

# javascript - 如何使用 jquery 检测绑定到元素的事件

> ID：13896912
> 
> 赞同：1
> 
> 时间：2012-12-15T22:48:44.983
> 
> 标签：javascript, jquery, dom

这就是我想要做的：

我在网页中有很多锚点，有些是用 ajax 管理的，因为它们是用 jquery 绑定到点击事件的；有些不是，所以他们通过常规的 http 请求发送到另一个页面。

```
<a href="#/something" >something</a>
<a href="#/ajax/something" class="blabla">ajax something</a>

<script type="text/javascript">
    $(function(){
       $('.blabla').click(function(){
          //doing some ajax return false so anchor don't redirect
          return false;
       });
    });
</script> 
```

请不要对锚类做出回应，例如“嘿，选择所有没有“blabla”类的锚”。我这样做是因为我试图在页面上为每个不是通过 ajax 管理的锚点放置一个“等待”标签。我想知道一个锚是否有一个绑定到自身的点击事件。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:41:33.290

这行得通 - 想法是：

*   存储页面初始加载时数组`click`中每个元素存在的事件数。`<a>`

*   然后，每隔 500 毫秒左右，将`click`每个锚点上的事件长度与存储在数组中的长度进行比较

-

```
$(function() {
  i = 0;
  window.ahrefEvents = [];
  $('a').each(function() { 
    $(this).attr('data-id', i); //give each anchor a unique id and save it the data-id attribute. we'll then save the number of events for each link in window.ahrefEvents
    window.ahrefEvents[i] = $._data($(this)[0], 'events') == undefined ? 0 : $._data($(this)[0], 'events')['click'].length; //if no events are bound it'll return undefined, so check for that and set it to 0 if that's the case
    i++;
});

window.setInterval(function() { //check every 500ms to see if that length changed
    checkEvents();
}, 500);

window.checkEvents = function() {
    $('a').each(function() {
        index = $(this).attr('data-id');
        if ($._data($(this)[0], 'events') != undefined) {
            if (window.ahrefEvents[index] != $._data($(this)[0], 'events')['click'].length) {
                //fires when length of click events on any anchor has changed
                console.log('event bound on anchor #' + index);
            }
        }
    });
  }
});​ 
```

演示： http: [//fiddle.jshell.net/CyYbA/20/show/](http://fiddle.jshell.net/CyYbA/20/show/)

尝试拉起控制台并将某些东西绑定到`$('#test')`对象

在这里编辑小提琴：http: [//jsfiddle.net/CyYbA/20/](http://jsfiddle.net/CyYbA/20/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:06:54.537

如果您的 AJAX url 系统始终包含`ajax`在路径中，您可以构建一个基于`href`

```
var $noAjaxLinks= $('a').filter(function(){

      return ! /ajax/.test(this.href);
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T22:59:27.827

也许您可以使用 jquery[数据](http://api.jquery.com/jQuery.data/)函数来存储这些锚点的附加信息？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T05:09:22.623

好的，这就是我目前所拥有的：

```
<ul class="nav nav-list">
    <li><a href="content.php" class="load">content via .load()</a></li>
    <li><a href="content.php" class="get">content via $.get()</a></li>
    <li><a href="content.php" class="post">content via $.post()</a></li>
    <li><a href="content.php" class="ajax">content via $.ajax()</a></li>
    <li><a href="content.php" class="">content 2 without ajax()</a></li>
</ul> 
```

一些jQuery事件绑定

```
$('a.load').click(function(){
    $("#container").loader().load($(this).attr('href'));
    return false;
});
$('a.get').click(function(){
    $.get($(this).attr('href'), function(d){
        $('#container').html(d);
    });
    return false;
}); 
```

我有很多锚点，一个没有 ajax，另一个有不同的 ajax 调用，所以这就是我期望在页面中找到的。我的代码必须捕获所有这些并评估哪个没有 ajax 调用来处理它

这是代码。

```
//looking just for one anchor
$('a').each(function(idx, obj){
    var events = $._data(this,'events');
    if (typeof events != "undefined" && "click" in events) {
        for (i in events.click) {
            if (typeof events.click[i].handler != "undefined") {
                 var f = events.click[i].handler.toString();
                 if ((/\$(\(.*\))?\.(load|ajax|get|post)\(/).exec(f)) {
                    console.log('obj '+$(this).text()+' : with ajax.');
                    //this is where i'm gonna deal with this regular http anchor...
                 }
            }
        }
    }
}); 
```

希望这可以帮助另一个有同样问题的人。问候。

# javascript - 如何循环遍历 UL 标记的所有实例并使用 Javascript 为它们分配 ID

> ID：13896913
> 
> 赞同：2
> 
> 时间：2012-12-15T22:48:49.617
> 
> 标签：javascript, loops

我有一个包含动态生成内容的页面，如下所示：

```
<ul class="alist">
  <li>something</li>
  <li>something</li>
</ul

<ul class="alist">
  <li>something</li>
  <li>something</li>
</ul>

<ul class="alist">
  <li>something</li>
  <li>something</li>
</ul> 
```

请注意，无序列表都没有任何 id 或唯一的类标识符。

我需要为每个 ul 分配一个 id，但每次都不同，而且我不知道在任何给定时间页面上会有多少无序列表。

我想为每个无序列表分配一个数字作为 id。因此，第一个 ul 的 ID 应为 1。第二个无序列表的 ID 应为 2，依此类推，因为页面上可能会出现许多无序列表……我什至不知道从哪儿开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T22:52:14.120

`document.getElementsByTagName`是你这里最好的朋友。应用一些魔法，它可能看起来像

```
var idcounter = 1;
[].forEach.call( document.getElementsByTagName( 'ul' ), function( ul ) {
    ul.id = 'myID-' + idcounter++;
}); 
```

*演示*：http: [//jsfiddle.net/xgkMx/](http://jsfiddle.net/xgkMx/)

# jquery - 在页面刷新时替换句子

> ID：13896915
> 
> 赞同：1
> 
> 时间：2012-12-15T22:49:11.533
> 
> 标签：jquery

有人可以指出我正确的方向，以便我可以在页面刷新时更改一个句子。

例如。

准备好文件我会

“你好我的朋友你怎么样”

然后当使用刷新页面时

“哥们，你好”

我看过：

```
<div>
      <blockquote class="quote key"><span>quote1</span><p class="exec">person 1</p></blockquote>
      <img src="image1.jpg">
   </div> 
```

jQuery

```
$(document).ready(function(){
      var myQuotes = new Array(); 
      myQuotes[0] = "Hello my friend"; 
      myQuotes[1] = "Hey Dude"; 
      myQuotes[2] = "Hi"; 

var myRandom = Math.floor(Math.random()*myQuotes.length); 

   });
}); 
```

但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:18:36.263

尝试

**HTML**

```
 <div>
      <span class='message'></span>
      <blockquote class="quote key">
           <span>quote1</span>
           <p class="exec">person 1</p>
       </blockquote>
      <img src="image1.jpg">
</div>​​​ 
```

**Javascript**

```
$(document).ready(function(){
      var myQuotes = new Array(); 
      myQuotes[0] = "Hello my friend"; 
      myQuotes[1] = "Hey Dude"; 
      myQuotes[2] = "Hi"; 

      var myRandom = Math.floor(Math.random()*myQuotes.length); 
      $(".message").text( myQuotes[myRandom ] );

}); 
```

演示：http: [//jsfiddle.net/pGMZw/](http://jsfiddle.net/pGMZw/)

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:50:34.200

您必须使用 cookie 来满足此要求。有一个用于 jquery 的[cookie 插件](https://github.com/carhartl/jquery-cookie)，可以更轻松地处理 cookie。

# windows-8 - 在 Windows 8 gridview 中绑定到 ObservableCollection 中的更改对象

> ID：13896921
> 
> 赞同：1
> 
> 时间：2012-12-15T22:50:25.410
> 
> 标签：windows-8, windows-runtime, winrt-xaml, windows-store-apps

我有一个网格视图：

```
 <GridView xmlns:controls="using:Windows.UI.Xaml.Controls">
        <GridView.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Image Source="{Binding Image}"></Image>
                    <Grid Height="50" Width="50" Background="{Binding Color}"></Grid>
                    <TextBlock FontSize="25" TextWrapping="Wrap" Text="{Binding Name}" Margin="10,10,0,0"/>
                </Grid>
            </DataTemplate>
        </GridView.ItemTemplate>
    </GridView> 
```

这绑定到一个可观察的集合：

```
 ObservableCollection<KeyItem> Keys = new ObservableCollection<KeyItem>();

   Keys.Add(new KeyItem { Name = "jfkdjkfd" });
   Keys.Add(new KeyItem { Name = "jfkdjkfd" });

   myView.ItemsSource = Keys; 
```

关键是这样的：

```
public class KeyItem
{
    public string Name { get; set; }
    public ImageSource Image { get; private set; }
    public Brush Color
    {
        get;
        set;
    }
} 
```

如果我在将颜色分配给 itemssource 之前设置颜色，这会很好。

但我还希望能够在分配 KeyItem 后以编程方式更改其颜色属性，并让 Binding 更改颜色。但在这个配置中，这是行不通的。

让这个工作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T23:18:26.870

你的班级需要实现[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/windows/apps/system.componentmodel.inotifypropertychanged). 这就是允许绑定知道何时更新的原因。拥有 observable 集合只会通知与集合的绑定以获得通知。集合中的每个对象也需要`INotifyPropertyChanged`实现。

注意`[CallerMemberName]`in的使用`NotifyPropertyChanged`。这允许具有默认值的可选参数将调用成员的名称作为其值。

```
public class KeyItem : INotifyPropertyChanged
{
    private string name;
    public string Name 
    {
        get
        {
            return name;
        }
        set
        {
            name = value;
            NotifyPropertyChanged();
        }
    }

    private ImageSource image;
    public ImageSource Image 
    {
        get
        {
            return image;
        }
        set
        {
            image = value;
            NotifyPropertyChanged();
        }
    }

    private Brush color;
    public Brush Color
    {
        get
        {
            return color;
        }
        set
        {
            color = value;
            NotifyPropertyChanged();
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    // This method is called by the Set accessor of each property. 
    // The CallerMemberName attribute that is applied to the optional propertyName 
    // parameter causes the property name of the caller to be substituted as an argument. 
    private void NotifyPropertyChanged([CallerMemberName] String propertyName = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

# android - Eclipse android模拟器冻结

> ID：13896924
> 
> 赞同：8
> 
> 时间：2012-12-15T22:51:03.597
> 
> 标签：android, eclipse, sdk, emulation, adt

对不起，如果这是一个愚蠢的问题。我对发展很陌生。

当我在 android 上运行模拟器时，而不是加载主屏幕。它只是停留在这个屏幕上： ![截屏](../Images/db70fe0110c3432687bf1121aaae0b86.png)

我没有收到任何错误代码或任何东西，它不会冻结我的整个计算机或 Eclipse，它只会冻结模拟器并且不会继续。我只需按 (x) 按钮即可退出。所以我想知道是否有人知道如何解决这个问题，谢谢！

## 编辑

我还想提一下，经过很长时间我得到了这个屏幕![截屏](../Images/e98f25c1de8eeced5e28a09d43c5d1ce.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T01:32:53.330

更好的选择是使用[bluestacks android emulator](http://bluestacks.com/)。在我看来，它比谷歌安卓模拟器快得多。

以下是设置步骤：

1 - 安装 bluestacks 模拟器

2 - 打开命令

3 - 键入命令：（`set path="Android SDK\config\platform-tools"`您需要输入**adb.exe**所在的完整路径

4 -`adb connect 127.0.0.1`

现在您应该能够从您的 IDE 将应用程序直接运行到 BlueStack 模拟器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T00:55:54.773

我发现当设备脱机时对我有帮助的是进入窗口--->显示视图--->设备（您可能必须单击“其他”并在那里选择它，然后选择“重置 adb”

![在此处输入图像描述](../Images/d5536079b7338e233cc8ca35ac88fa4e.png)

有时设备会因为无法解释的原因“离线”（无论如何都没有向我解释！）

您可能只想创建另一个具有相同规格的模拟器。你试过吗？

PS你可能需要重新启动它才能让它在你的设备窗口中列出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T06:53:27.463

在 Windows 上，ARM 系统映像非常慢；Intel x86 映像速度更快，最高可达 4 倍；所以你应该尝试使用英特尔图像。尝试使用较小的屏幕也应该有所帮助；特别是如果您的内存选项很低。使用如上图所示的大屏幕，您的模拟器可能只是内存不足。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T07:47:01.830

从 android-x86.org 获取 x86 构建，使用 virtualbox（或其他任何东西，如果免费，则使用 virtualbox）安装。通过 ctrl+F1（更改为 cli，ctrl+F7 更改回图形模式）和`netcfg`. 然后`adb connect 192.168.1.5`（替换为您的虚拟机的 ip）。

那么它应该可以工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-19T23:40:24.300

我最近在桌面 Ubuntu 12.xy 和 WinXP 上安装的 4.2 SDK 遇到了这个问题。我觉得这很奇怪，因为我去年左右在笔记本 Ubuntu 10.xx 系统上玩过的 2.2 SDK 没有问题。按照 NH 的建议，我使用 SDK 管理器安装 2.2 (API 8) 并为该级别创建了一个模拟器，该模拟器在这些桌面系统和笔记本系统上运行得一样好。由于我只是在学习并且我的物理设备是 2.2，所以我将保持这种状态，直到我需要升级为止。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-03T16:44:10.190

在启动模拟器之前擦除用户数据。它将重置模拟器和所有应用程序，但至少您不需要重新创建或重新配置它。

确保下次启动模拟器时取消选中此框。

![擦除用户数据](../Images/1b2fa0162539d69305ed0dabc501c55d.png)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-15T23:06:02.900

模拟器本质上很慢，因为它必须在软件中模拟设备的所有硬件（包括相机、wifi 适配器等）。

也就是说，您应该留出半天时间让模拟器第一次加载（在等待时遛狗或其他东西），然后每次都应该更快。

选择一个低于 14 的 API（比如 API 10 Gingerbread，大多数设备都运行这个）来改善模拟器的加载。

然后在模拟器需要加载多长时间后，您只需单击在 eclipse 中运行，您的应用程序就会在模拟器中启动。完成后，不要关闭模拟器，只需返回 eclipse，对代码进行编辑，然后再次点击运行，它将自动关闭应用程序，将其替换为新版本，然后启动。

# applescript - AppleScript - 将当前 URL 更改为 JavaScript 的脚本

> ID：13896927
> 
> 赞同：0
> 
> 时间：2012-12-15T22:51:24.790
> 
> 标签：applescript

这是我当前的代码。

```
 tell application "Google Chrome" to set the URL of the front document to "Javascript:buy();" 
```

虽然它不允许我使用 Javascript，但我需要做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:03:55.330

您可以使用“执行 javascript”命令在 Chrome 中执行 javascript。

```
tell application "Google Chrome"
    activate
    tell window 1 to tell active tab
        set URL to "http://stackoverflow.com/questions/13896927/applescript-script-to-make-current-url-change-to-a-javascript"
        repeat until not loading
            delay 0.2
        end repeat
        set myVar to execute javascript "document.getElementsByClassName('user-details')[0].childNodes[1].text"
    end tell
end tell

return myVar 
```

.

```
tell application "Google Chrome"
    activate
    tell window 1 to tell active tab
        set the URL to "Javascript:buy();"
    end tell
end tell 
```

# javascript - 图像视差滚动不流畅

> ID：13896934
> 
> 赞同：3
> 
> 时间：2012-12-15T22:52:35.663
> 
> 标签：javascript, jquery, html, css, parallax

我正在尝试仅使用 jQuery、CSS 和图像创建一个非常简单的视差滚动效果，但问题是它不是很平滑而且很生涩。

我的目标是在用户向下滚动页面时让图像从页面的右上角移动到左下角。

我需要一些帮助来实现和更精美的页面，但是要么修复我现有的 js，或者如果您知道如何实现更好的视差插件。

如果需要，我可以发送所有必需的文件。

这是我当前的代码：

Javascript：

```
$(document).scroll(function () { 
var ratio = window.pageYOffset / ( $(document).height() - $(window).height()) ;
console.log( "scroll: " + window.pageYOffset + ", ratio: " + ratio );

$( '#slash-1' ).css( 'top', -160 + ( 4500 * ratio ) + 'px' );
$( '#slash-1' ).css( 'left', 960 - ( 960 * ( ratio ) ) + 'px' );

$( '#slash-2' ).css( 'top', -300 + ( 4500 * ratio ) + 'px' );
$( '#slash-2' ).css( 'left', 960 - ( 960 * ( ratio ) ) + 'px' );
}); 
```

HTML

```
 <div id="slash-1"><img src="img/slash.png"></div> 
```

CSS

```
#slash-1 { position: absolute; top: 300px; left: 960px; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T13:52:47.900

我找到了一个解决方案，通过使用这个javascript解决了这个问题

```
$(window).scroll(function() {
var distance = $(this).scrollTop();
$('#slash-1').css({
    'top': (distance*2) + 'px',
    'right': '+' + distance + 'px'
});
}); 
```

# web - 备份整个网站以进行传输的步骤

> ID：13896940
> 
> 赞同：1
> 
> 时间：2012-12-15T22:53:55.953
> 
> 标签：web, backup, restore, transfer

我希望我没有将这个问题复制/放在错误的区域，如果是这样，请移动它或将我重定向到我复制的帖子。提前致谢。

我想知道从一个主机移动到另一个主机时备份整个网站的步骤。经过一番研究，我发现了以下内容：

```
1\. Backup actual website files (from public_html htdocs, or whatever your main root folder is called.

2\. Backup database using phpmyadmin's export as sql and save-as file feature. 
```

我的问题是，在转移我的网站之前，我还有什么需要备份/记录的吗？还有什么我应该注意的吗？任何其他文件/等。（是否需要）可能会在过程中引起问题？

# c++ - C++ 中游戏的动态数据处理

> ID：13896947
> 
> 赞同：1
> 
> 时间：2012-12-15T22:55:19.297
> 
> 标签：c++, winapi, data-binding, 2d

我想按名称、id（随机对象 ID）或类型获取数据。
c# 有字典。
但它应该是纯 c/c++ ...而不是 Sqlite 或任何 dotnet 之类的东西。

```
 pSysBuffer = new D3DCOLOR[ winSizeX * winSizeY ]; // 3rd directx buffer
  // all my 2d stuf gets rendered here

  struct WorldInventory
    {
      Gameobject gameobject;
      // more properties
    } worldinventory[ winSizeX * winSizeY ];

    struct Gameobject
    {
       int[] x, y; 
       unsigned int id;
       Wall* wall;
       Enemy* enemy;
       Bullit bullit;
       Mine mine;
       // more properties
    } gameobject; 
```

GameObject 结构是一个好的设计吗？它可以是墙、敌人、子弹或其他任何东西，并且可以跨越多个 x,y 坐标。
我不想使用向量，双端队列...因为它几乎每一帧都在变化...
如何保持不断变化的游戏对象集合...。但它不必是双重链接...我猜。
我的技术是像素精确的，而不是基于平铺或数学矢量的。
我想实现......类似......对象碰撞和或其他事情的内部数据库。
1 object ie：可以查询并询问坐标是否被占用，避免循环数组。
这让我忙了好一阵子

提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T09:36:02.267

抱歉，这不是您问题的直接答案，因为
我认为您过度思考了这个问题（一直为我工作）：

1.游戏对象

*   创建所有 GO（游戏对象）类型的枚举列表

    ```
    enum _go_type_enum
     {
     _go_type_none=0,
     _go_type_wall,
     _go_type_mine,
     _go_type_tree,
     _go_type_hole,
     _go_type_roadNS,
     _go_type_roadWE,
     ...
     _go_type_enum_end
     }; 
    ```

*   为每个 GO 类型创建类/结构

*   包括特定于网格项目的数据（相同的类项目可以有不同的值），例如：
*   生命值、弹孔、血迹、爆炸氧化、可转动物体的方向...
*   并且不要忘记包括世界 x,y ！

2.GO数据存储

*   创建所有 GO 类型的动态列表，如下所示：

    ```
    List<GO_class1> go1;
    List<GO_class2> go2;
    List<GO_class3> go3;
    List<GO_class4> go4;
    ... 
    ```

*   或改用静态数组（最大值足够大）

    ```
    //            array       used GOs
    GO_class1 go1[max]; int go1num=0;
    GO_class2 go2[max]; int go2num=0;
    GO_class3 go3[max]; int go3num=0;
    GO_class4 go4[max]; int go4num=0;
    ... 
    ```

*   创建世界地图

    ```
    int world_tp[winSizeX*winSizeY]; // _go_type_enum
    int world_ix[winSizeX*winSizeY]; // index inside go?[]; 
    ```

*   任何 GO 定义为 tp,ix

*   例如 tp=_go_type_wall; ix=5；意思是去？[ix]
*   去哪里？是墙壁类的数组名称

现在，当您需要穿过墙壁时，
如果您需要查看 wolrd(tp,ix)[] 中的相邻区域，则只需循环穿过墙壁阵列，
我认为这比某些类绑定/搜索/查询引擎更好更快.
此外，您使用的内存要少得多（如果使用动态列表），因为 GO 类只保存类特定的数据。
对于通用 GO 类，它保存所有类的所有数据，这会浪费内存并减慢处理速度。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:32:07.037

如果您打算根据坐标进行查找，您可以根据这些索引数组并使用分治法对其进行排序，这应该提供快速的排序和查找方法。

例如，如果您最多有 1000x1000 坐标，则可以将该数字转换为单个整数，例如 10001000。64x33 会变成 640033。这有点粗略，但应该可以。只要您使用 D&C 排序的数组很好地随机化，您就应该获得良好的性能。

前任。排序数组的

```
 9720922
    8500088
        7770951
5300033
        450750
    3500112
        1200015
            750099 
```

在此示例中，如果您要查询坐标 64x33 发生了什么，您会将 640033 与 5300033 进行比较，然后移向 3500112，然后移向 1200015 thne 750099。然后您会意识到没有任何进一步的条目，因此您可以放置​​指向该条目的指针object_750099.lower 中的对象。

对象结构需要更多元素。

```
GameObject struct {
   ...
   int greater;
   int lower;
} 
```

希望你能理解我想说的话，因为我解释得很糟糕。

# python - 如何获取生成器函数的多个实例

> ID：13896951
> 
> 赞同：5
> 
> 时间：2012-12-15T22:56:27.863
> 
> 标签：python, generator

> **可能重复：**
> [如何克隆 Python 生成器对象？](https://stackoverflow.com/questions/4945155/how-to-clone-a-python-generator-object)

假设我有一个生成器“stuff_to_try”，我可以一个一个地尝试它们，但是如果我有一个想要通过生成器的方法并且该方法是递归的，我想让每个递归都得到一个新的生成器，从第一次产生而不是最后一次递归停止的地方。

```
def solve(something):
    if exit_condition(something):
        return

    next_to_try = stuff_to_try.next()
    while not if_works(next_to_try):
        next_to_try = stuff_to_try.next()
    solve(do_something(something)) 
```

当然我可以在递归函数中定义 stuff_to_try 但有更好的方法吗？是否有等效的 stuff_to_try.clone().reset() 或其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T23:13:02.180

在函数中定义生成器：

```
def stuff_to_try():
    return (i for i in [stuff, to, try]) 
```

然后每次你想要一个新的生成器时，只需调用该函数。

```
def solve(something):
    if exit_condition(something):
        return

    for next_to_try in stuff_to_try():
        if_works(next_to_try):
            break
    solve(do_something(something)) 
```

如果我正确阅读了您的问题，那么您真正想要的是：

```
def solve(something):
    if exit_condition(something):
        return

    for each in [stuff, to, try]:
        if_works(each):
            break
    solve(do_something(something)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T23:14:16.523

最简单的答案是让它成为一个列表，然后它就会有你想要的行为：

```
stuff_to_try = [i for i in [stuff, to, try]] 
```

一次又一次地重新计算值很可能会失去任何因懒惰而获得的效率收益。

# javascript - jQuery隐藏和显示已经脱离轮播的文本

> ID：13896952
> 
> 赞同：0
> 
> 时间：2012-12-15T22:56:41.663
> 
> 标签：javascript, jquery, css

我花了一天的大部分时间试图解决这个问题，现在我需要寻求帮助。

我有一个修改后的引导轮播，当点击缩略图导航时，它会显示拇指的较大图像。拇指导航-

```
<ul class="carousel-linked-nav" id="front_mktng_list_thumb">
          <li class="active front_mktng_thumbs"><a href="#1"><img class="htttp://link/to.jpg"></a></li>
          <li class="front_mktng_thumbs"><a href="#2"><img class="thumb_mktng_border" src="http://link/to/thumb.jpg"></a></li>
          <li class="front_mktng_thumbs"><a href="#3"><img class="thumb_mktng_border" src="http://link/to/thumb.jpg"></a></li>
          <li class="front_mktng_thumbs"><a href="#4"><img class="thumb_mktng_border" src="http://link/to/thumb.jpg"></a></li>
</ul> 
```

轮播中显示的较大图像基于用户在导航中单击的内容-

```
<div id="myCarousel" class="carousel slide carousel-fade">
  <div class="carousel-inner span6 image_mktng_border" id="front_mktng_image" > 
    <div class="active item"><img src="http://link/to/large.jpg"></div>
    <div class="item"><img src="http://link/to/large.jpg"></div>
    <div class="item"><img src="http://link/to/large.jpg"></div>
    <div class="item"><iframe width="630" height="330" src="http://www.youtube.com/embed/xW7AAKjDclQ" frameborder="0" allowfullscreen></iframe></div>
  </div>  
</div> 
```

这里有一些技巧我需要重构（间隔是一个很大的数字，以确保基于用户点击的图像切换，.stopPropagation 不用于 href 等）

```
 $('#myCarousel').carousel({
    interval: 444000,
    pause: true
  });

  $('.carousel-linked-nav > li > a').click(function() {
      var item = Number($(this).attr('href').substring(1));
      $('#myCarousel').carousel(item - 1);
      $('.carousel-linked-nav .active').removeClass('active');
      $(this).parent().addClass('active');
      return false;
  }); 
```

现在，我一天中大部分时间都花在了获取描述性文本，以便在每个图像出现时显示它。基本上以与图像相同的方式显示，但不在轮播中，并使用相同的缩略图`<a>`隐藏和显示文本。见图片。

我非常熟悉如何通过点击事件显示隐藏文本，但我不确定如何让它与现有的轮播一起正常工作。

我一直在思考的过程是我可以添加一个类和`display: none;`包含我想要显示的描述性文本的 div。然后我可以简单地切换该类（带有条件），只要我在`a`单击时添加一个类。

我是否需要重构我的轮播以允许这种行为（多个 div 操作）？我的思维过程/解决方案不正确吗？

我需要一些建议。感谢您的关注和观看！

* * *

## 更新

我想显示的文本未反映在屏幕截图中

```
<div class="row">
  <div class="offset2">
    <div id="first_description">Quick list everything town</div><br>
    <div id="second_description">View of what's been done, what's next and who we're waiting on.</div><br>
    <div id="third_description">Have people do thing for you without looking like a jerk</div><br>
    <div id="fourth_description">Here's how I muthloving use it</div><br>
  </div>
</div> 
```

![在此处输入图像描述](../Images/591358bf1401bc67462fdc2604e76ce2.png)

![在此处输入图像描述](../Images/4b62ffcff5ead61bf7a0203cb1119627.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:33:39.900

Tmacram，由于 twitter 引导文档完全不足，您发现这个问题很困难，我并不感到惊讶。

传递给`slide`和`slid`处理程序的事件对象允许使用表达式确定活动项：

```
$(event.target).find('.carousel-inner .active') 
```

因此它在其他项目中的索引：

```
$(event.target).find('.carousel-inner .active').index() 
```

因此，您可以选择并显示相应的文本：

```
$('#myCarousel').on('slid', function(event) {
    var idx = $(event.target).find('.carousel-inner .active').index();
    msg($(".row .offset2 div").eq(idx).text());
}).trigger('slid'); 
```

where`msg()`是在适当的容器中显示文本的函数。您将需要编写自己的函数（如果尚未编写）。

`.trigger('slid')`在第一次滑动操作之前显示初始轮播项目的文本是必要的。

**[演示](http://jsfiddle.net/ymwL5/1/)**（基于我在搜索后找到的演示的一个分支）。

或者，您可能希望直接显示/隐藏文本 div，而不是重复复制活动文本 -**[演示](http://jsfiddle.net/ymwL5/2/)**

# google-app-engine - 使用 JDO 持久化对象时 GAE 上的 Datanucleus 错误

> ID：13896960
> 
> 赞同：0
> 
> 时间：2012-12-15T22:57:13.880
> 
> 标签：google-app-engine, jdo, datanucleus

我一直在努力配置 google app engine(gae)+Jersey+Maven。我正在使用 gae sdk 1.7.2、datanucleus-appengine 2.0.0.1 和 JDO 3.0。

我能够获得 PersistenceManagerFactory 但在 makePersistent 时出现以下错误。

DataNucleus Enhancer (version 3.0.1) : Using ClassEnhancer "ASM" for API "JDO" 被使用。

```
java.lang.NoSuchMethodError: org.datanucleus.metadata.AbstractMemberMetaData.getTypeConverterName()Ljava/lang/String;
    at com.google.appengine.datanucleus.StoreFieldManager.storeFieldInEntity(StoreFieldManager.java:255)
    at com.google.appengine.datanucleus.StoreFieldManager.storeStringField(StoreFieldManager.java:175)
    at org.datanucleus.state.AbstractStateManager.providedStringField(AbstractStateManager.java:1438)
org.datanucleus.state.AbstractStateManager.provideFields(AbstractStateManager.java:1520)
        at com.google.appengine.datanucleus.DatastorePersistenceHandler.insertObjectsInternal(DatastorePersistenceHandler.java:243)
        at com.google.appengine.datanucleus.DatastorePersistenceHandler.insertObject(DatastorePersistenceHandler.java:220)
        at org.datanucleus.state.JDOStateManagerImpl.internalMakePersistent(JDOStateManagerImpl.java:2444)
        at org.datanucleus.state.JDOStateManagerImpl.makePersistent(JDOStateManagerImpl.java:2420)
        at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1808)
        at org.datanucleus.ObjectManagerImpl.persistObjectWork(ObjectManagerImpl.java:1657)
        at org.datanucleus.ObjectManagerImpl.persistObject(ObjectManagerImpl.java:1522)
        at org.datanucleus.api.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:743)
        at org.datanucleus.api.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:768)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
        at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
        at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$VoidOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:167)
        at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
        at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
        at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
        at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
        at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
        at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
        at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
        at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
        at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:699)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
        at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:110)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
        at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
        at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
        at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
        at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
        at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
        at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:380)
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
        at org.mortbay.jetty.Server.handle(Server.java:326)
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
        at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
    16 Dec, 2012 3:01:06 AM com.google.apphosting.utils.jetty.JettyLogger warn 
```

以下是我要坚持的课程：

```
@PersistenceCapable(identityType = IdentityType.APPLICATION)
public class User implements Serializable{

    private static final long serialVersionUID = 1L;
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Long id;
    @Persistent
    private String Name;

    public User(){

    }

    public Long getId() {
        return id;
    }
    public void setId(Long id) {
        this.id = id;
    }
    public String getName() {
        return Name;
    }
    public void setName(String name) {
        Name = name;
    }   
} 
```

有谁知道什么会导致该错误？持久类有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T07:48:12.140

你认为 NoSuchMethodError 是什么意思？查看它的javadoc。在某些类中需要一些方法（即它被调用但它不存在。所以你搞砸了正在使用的 (datanucleus-XXX) jar 的版本。GAE JDO 3.0 需要 DataNucleus v3.0（而不是 v3.0）。 1）但你正在拉一些 v3.1 jar

# c# - MVC4 API 路由进入第一个动作

> ID：13896961
> 
> 赞同：1
> 
> 时间：2012-12-15T22:57:33.370
> 
> 标签：c#, api, asp.net-mvc-4, asp.net-mvc-routing

我正在尝试编写 API。签名看起来像这样：

```
public class CardsController : ApiController
{
    [HttpGet]
    public ClientData NewGame(){...}
    [HttpGet]
    public ClientData Deal(int sessionId){...}
    [HttpGet]
    public ClientData Stand(int sessionId){...}
} 
```

在默认情况下，我收到一个错误，说我的班级无法区分 Deal 和 Stand。经过一番研究，我发现这是一个路由问题。所以我决定更新我的路线。

我的 global.asax.cs 现在看起来像这样：

```
public class MvcApplication : HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();
        RegisterRoutes(RouteTable.Routes);
    }

    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapHttpRoute("api", "api/{controller}/{action}/{value}", new { value = RouteParameter.Optional});
    }
} 
```

Going to`http://localhost:54924/api/Cards/Stand/19`会给出一个错误，指出没有找到 HttpResource，并且 going to`http://localhost:54924/api/Cards/Stand`会触发该`NewGame()`操作。如何让 Stand 和 Deal 在同一个控制器上工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T23:09:16.383

Web API 适用于 RESTful 路由。在 REST 中，您拥有资源和标准操作：GET、POST、PUT、PATCH 和 DELETE。这就是你的行为应该被命名的方式。`Deal`并且意味着在路由`Stand`中绝对注意。`RESTful`在设计 API 时，您应该考虑资源以及可以使用这些资源执行的标准 HTTP 动词。在 RESTful API 中，控制器代表您的资源，而 HTTP 动词是您希望对该资源执行的操作。

如果您想违反 Web Api 路由中内置的默认 RESTful 约定，您将必须修改您的路由设置并`{action}`在其中包含名称。然后，您将能够根据需要命名您的操作。请记住，如果您正在设计 API，则有消费者遵守的标准。如果您想重新发明轮子，请确保您有非常好的 API 文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T23:15:24.430

添加路线：

```
routes.MapHttpRoute("DealApi", 
                    "api/{controller}/deal/{sessionId}",
                    new { action="Deal", sessionId = RouteParameter.Optional });

routes.MapHttpRoute("StandApi", 
                    "api/{controller}/stand/{sessionId}",
                    new { action="Stand", sessionId = RouteParameter.Optional }); 
```

现在，在您的 Controller 类中：

```
[HttpGet]
[ActionName("Deal")]
public ClientData Deal(int sessionId){...}

[HttpGet]
[ActionName("Stand")]
public ClientData Stand(int sessionId){...} 
```

现在，每当您打开网址[http://www.yourhost.com/api/deal/12345](http://www.yourhost.com/api/deal/12345)时，都会调用 Deal 函数。与立场相同。

请记住，您在路由表中设置的任何内容都仅用于识别 url 是否有效。通过在第三个参数中指定操作，您是在告诉 Web Api 查找其 ActionName 属性设置为您指定的函数。

另一件事 - 将这两条路由放在任何默认 api 路由之前。

# assembly - 如何总结汇编中数组的值？

> ID：13896962
> 
> 赞同：1
> 
> 时间：2012-12-15T22:57:45.847
> 
> 标签：assembly, low-level

我一直在尝试创建一个可以总结汇编中“数组”的所有值的程序，我做了以下事情：

```
ORG 1000H
TABLE DB DUP(2,4,6,8,10,12,14,16,18,20)
FIN DB ?
TOTAL DB ?
MAX DB 13
ORG 2000H
MOV AL, 0
MOV CL, OFFSET FIN-OFFSET TABLE
MOV BX, OFFSET TABLE
LOOP: ADD AL, [BX]
INC BX
DEC CL
JNZ LOOP
HLT
END 
```

顺便说一句，我正在使用 msx88 编译此代码。但我收到一条错误消息，提示代码 0 未被识别。

有什么建议吗？

# c++ - nohup C++ fstream

> ID：13896967
> 
> 赞同：2
> 
> 时间：2012-12-15T22:58:34.260
> 
> 标签：c++, linux, g++, fstream, nohup

当我在 Linux 下使用 g++ 编译以下 C++ 代码时，它工作正常，但是当我尝试运行时

```
nohup ./a.out & 
```

它立即停止并显示信息

```
[7]+  Stopped                 nohup ./a.out 
```

源代码是：

```
#include <iostream>
#include <fstream>

using namespace std;

int main(void){

    ofstream file("hm.txt",ios::out | ios::binary | ios::app);
    file << "123";
    file.close();

return 0;
} 
```

你能指出我的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:15:42.067

起初我没有得到它，但您的系统似乎决定将程序置于暂停（`Stopped`状态）。 `jobs`显示在当前终端会话中停止或运行的所有作业。 `bg`/`fg`可用于重新启动停止的作业，因此您可以检查是否导致文件被写入。进一步探究原因的另一个想法是运行`/usr/bin/nohup strace ./a.out 1>stdout.txt 2>stderr.txt`。应该将`strace`所有系统调用转储到`stderr.txt`-- 这样您就可以看到它停止的原因。

此类问题的常见原因似乎是程序需要一些输入，并且由于 (with `nohup`) 没有终端来提供它，系统会停止您的程序。我的第一个建议是尝试以下方法以提供一些自动生成的输入：

```
/usr/bin/nohup ./a.out </dev/zero 
```

在我的系统上，它会自动运行它：

```
/usr/bin/nohup ./a.out </dev/null 
```

我不知道为什么您的系统不会自动提供空输入，我也不知道您的程序为什么会等待输入。您最初的尝试对我来说效果很好（我无法重现您的问题）。

当我运行`nohup ./a.out`（或`nohup ./a.out &`）时，我收到以下消息，表示自动输入抑制：

```
nohup: ignoring input and appending output to `nohup.out' 
```

所以另一条调查线是：你为什么看不到这条消息？

* * *

另一条攻击线，因为您的系统似乎不喜欢这样`nohup`，所以将程序作为后台任务`&`重新启动，如下所示：`Stopped`

```
/usr/bin/nohup ./a.out & bg 
```

显然，`nohup`是用来和 一起使用的`&`，所以你的问题有点奇怪。

# jquery - Rails 3.2.8 应用程序中的 AJAX 未重新加载目标 div

> ID：13896968
> 
> 赞同：3
> 
> 时间：2012-12-15T22:58:44.833
> 
> 标签：jquery, ruby-on-rails-3.2

在我的布局文件中，我有两个下拉菜单。当在一个（类别）中进行选择时，需要更新第二个（项目）的内容。

在布局文件中：

```
<div id="pull_down_items" class="pull-right">
    <%= render :partial => 'layouts/pull_down_items' %>
</div>
<%= render :partial => 'layouts/pull_down_category' %> 
```

布局/_pull_down_items.html.erb：

```
<%= select_tag "current_item", options_from_collection_for_select(current_category.items, "id", "item_name", session[:current_item]), :id=>"change_current_item", :remote => true %> 
```

布局/_pull_down_category.html.erb：

```
<%= select_tag "current_category", options_from_collection_for_select(categories, "id", "category_name", session[:current_category]), :id=>"change_current_category", :remote => true %> 
```

application.js 中的 jQuery：

```
$("#change_current_category").change(function() {
  var category_id = $(this).val();
  var url = "/system/" + category_id + "/change_category";
  $.post(url, category_id, function(html) {
  });
}); 
```

在我的系统控制器中：

```
 def change_category
    unless params["id"].blank?
      session[:current_category] = params["id"].to_i
      current_category.reload # this is a method in application_controller.rb
    end
    respond_to do |format|
      format.js
    end
  end 
```

在 change_team.js.erb 中：

```
$("#pull_down_items").html("<%= render :partial => 'layouts/pull_down_items' %>") 
```

结果： session[:current_category] ​​被更改为正确的类别。项目下拉菜单 div 不会重新加载。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:17:46.660

默认情况下，`jQuery.post`不保证执行它下载的内容。尝试将`dataType`参数设置为“脚本”，如[http://api.jquery.com/jQuery.post/上所示](http://api.jquery.com/jQuery.post/)

> “脚本”：将响应评估为 JavaScript，并将其作为纯文本返回。通过将查询字符串参数“_=[TIMESTAMP]”附加到 URL 来禁用缓存，除非缓存选项设置为 true。注意：这会将 POST 转换为远程域请求的 GET。

# c++ - STL 迭代器：container.end()

> ID：13896969
> 
> 赞同：5
> 
> 时间：2012-12-15T22:59:03.623
> 
> 标签：c++, stl, iterator, containers

我正在阅读一些关于 STL 的文档，其中写到该函数返回容器最后一个元素**旁边**`end()`的字节的迭代器。

 **我想知道，如果容器占据了整个可用内存的最后一个字节怎么办。那时会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T23:04:51.883

C++ 内存模型保证您始终可以在数组的最后一个元素之后形成指向该元素的指针。如果没有，则系统不会让您在此位置分配对象，或者它会环绕。另外，请注意，这对于数组来说是一个潜在的问题，因为其他容器可以使用迭代器类型来以其他合适的形式处理过去的结束位置：它们完全控制增量操作的工作方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-15T23:02:26.387

一个结束迭代器（至少形象地）指向刚刚*超过*容器的末尾。容器中的有效项目从`*container.begin()`到`*container.end()-1`。

换句话说，您可以将其他一些迭代器与结束迭代器进行比较以查看它们是否相等（这告诉您已经到达容器中项目的末尾），但您不能取消*引用*该结束迭代器（即，您不得尝试访问它所引用的项目）。

编辑：对不起，有点误解了这个问题：好吧，如果容器实际上使用了内存的最后一个字节（罕见/不太可能，但理论上可能），您通常会看到地址环绕到内存的开头，假设它是当然，在地址方面确实有效的迭代器。在这种情况下，您通常会看到它变成一个`0`地址，该地址仍然可以与任何有效地址区分开来（即，`0`将转换为一个空指针，它不能是一个有效指针）。

然而，在典型情况下，这种事情很可能不会被允许发生。例如，在大多数 32 位系统上，用户被限制使用前 2 或 3 GB 的地址空间，而高位地址是为操作系统保留的。**

# django - eclipse django 在 pythonpath 中使用错误的 settings.py

> ID：13896973
> 
> 赞同：0
> 
> 时间：2012-12-15T22:59:56.570
> 
> 标签：django, eclipse, pydev, django-settings

我在 Eclipse 中安装了 pydev/django，它运行良好。但是，在将第二个 django 项目添加到 Eclipse 并运行服务器（'http://127.0.0.1:8000'）之后，即使我运行 project1，pythonpath 似乎也卡在了 project2 上。

总结一下，我有两个 django 项目：project1、project2。当我为 project1 运行 django 服务器时，我得到：

```
Validating models...

0 errors found
Django version 1.5, using settings 'project1.settings'
Development server is running at 'http://127.0.0.1:8000/'
Quit the server with CTRL-BREAK. 
```

以上似乎表明 django 正在使用正确的设置文件；但是，当我转到“http://127.0.0.1:8000/”时，它会显示来自 project2 的网址。此外，如果我转到“http://127.0.0.1:8000/admin”，模型也会从 project2 中的 sqlite.db 文件中提取出来。我什至尝试从 Eclipse 中完全删除 project2，现在在 'http://127.0.0.1:8000/admin' 我收到此错误：

> Python 路径：
> ['C:\Users\Brad\workspaces\In Progress\project2', 'C:\Users\Brad\workspaces\In Progress\project2', 'C:\Python27\DLLs', 'C:\Python27 \lib', 'C:\Python27\lib\plat-win', 'C:\Python27\lib\lib-tk', 'C:\Python27', 'C:\Python27\lib\site-packages', 'C:\Windows\system32\python27.zip']

如果我使用 project1 在不同的端口上运行服务器，则路径似乎很好：runserver 7000 --noreload

然后 'http://127.0.0.1:7000/' 使用 project1 的路径，但似乎我不应该这样做。

**注意：**我已经尽可能正确地设置了运行配置。在主选项卡中，项目和主模块都指向正确的项目（project1），并且“将在运行中使用的 PYTHONPATH：”包括 project1。此外，我已清除浏览器历史记录、cookie 以及 chrome 允许我删除的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:45:13.897

问题似乎是您正在使用自动重新加载功能（在这种情况下，您正在终止 eclipse 上的进程，但生成的进程在该端口中仍然存在）。因此，您必须手动转到任务管理器（如果在 Windows 上）并终止子进程。

您应该在不使用自动重载的情况下使用它，或者按照以下步骤操作：http: [//pydev.org/manual_adv_django.html](http://pydev.org/manual_adv_django.html)（在页面末尾）让自动重载为子进程生成一个终端，以便您知道它还活着。

我之前在 Django 中打开了一个关于该问题的错误：[https](https://code.djangoproject.com/ticket/16982) ://code.djangoproject.com/ticket/16982 ，似乎有人在[https://code.djangoproject.com/ticket/19137提供了一个补丁来修复它](https://code.djangoproject.com/ticket/19137)

# bugzilla - 有人知道什么是 Eclipse 核心 bugzilla 链接吗？

> ID：13896975
> 
> 赞同：0
> 
> 时间：2012-12-15T23:00:08.957
> 
> 标签：bugzilla

我正在编写一个程序来检索指定错误 ID 的错误报告，我已经有了错误 ID，我所需要的只是知道我应该查询哪个链接以获得该错误的报告，我认为这是 JSON . 例如：EclipseBugzilla-link.com?bugID=1234 类似于前面提到的 url。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:08:07.033

您可以使用 bugzilla 的`XMLRPC`机制来获取有关特定 bug id 的信息。使用该机制相当容易。但是，输出当然是 XML。

几乎所有流行的编程语言都有相当多的`XMLRPC`库。您可能想查看您最喜欢的编程语言的 XMLRPC 库。对于 python，有[bugzilla 工具](http://pypi.python.org/pypi/bugzillatools)支持编辑、删除、添加、评论和获取错误信息。

# php - 用于 SEO 的 URL 重写和 MVC 框架

> ID：13896987
> 
> 赞同：0
> 
> 时间：2012-12-15T23:02:44.443
> 
> 标签：php, url-rewriting, seo

> **可能重复：**
> [使用 apache 的 mod_rewrite 解析 SEO 友好的 URL](https://stackoverflow.com/questions/975498/using-apaches-mod-rewrite-to-parse-seo-friendly-urls)

我正在构建一个站点，并且我正在使用 MVC 概念来动态加载内容。基本上我有一个文件 index.php，并将请求分发给适当的控制器。

因此 url "siteurl.com/post 将重定向到 siteurl.com/index.php?ctrl=post ，然后 post 控制器将加载适当的页面。

我的问题是，由于我通过一页路由所有内容，这对 SEO 是否不利？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:04:14.670

不，还不错。您正在重写，而不是重定向。客户端（包括爬虫）不知道服务器端发生了什么，也不在乎。客户认为他们在您的友好 URL 上。

我建议使用诸如 Fiddler 或 Wireshark 之类的工具来查看原始 HTTP 流量以充分了解正在发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:07:49.610

不，事实上这是大多数框架的工作方式。您正在使用的模式称为[前端控制器模式](http://en.wikipedia.org/wiki/Front_Controller_pattern)，并且正是这样做的，所以不要担心您的 SEO。如果你想要更漂亮的 URL，你总是可以使用 Apache 的 mod_rewrite。

问候

# android - CookieManager.getInstance().removeAllCookie(); 不会删除所有 cookie

> ID：13896993
> 
> 赞同：9
> 
> 时间：2012-12-15T23:03:39.203
> 
> 标签：android, cookies

我在我的应用程序的 onCreate 中调用 CookieManager.getInstance().removeAllCookie() 。

我遇到了一个奇怪的问题，我看到一个意外的 cookie 值在 GET 请求中被传递。事实上，cookie 值是一个非常非常古老的值。

以下是我为测试执行的步骤：

1.  安装应用程序
2.  在应用启动时发出 GET 请求。请求应该是干净的：不应该发送任何 cookie。
3.  GET 请求以 Set-Cookie 响应。该值基于请求时间，因此该值在任何两个请求上相同的可能性非常小。
4.  发出另一个 GET 请求。请求应该从第 3 步发送 cookie 值。

我第一次安装该应用程序时，cookie 行为如我预期的那样工作。我卸载了该应用程序，然后重新安装它，cookie 行为再次按预期工作。我这样做了几次，一切都很好，花花公子。

然后，突然，在第 N 次安装时，第 2 步没有通过。第一个 GET 请求不干净。事实上，它带有一个在首次安装应用程序时设置的值。

我无法可靠地重现这个问题，但我确实经常看到它。并不是安装时的第一个 GET 请求是从上一次安装中发送一个 cookie 值——该值来自之前的三到四次安装，这些安装之后都是*卸载*。

我怎么可能看到这个？我如何才能*真正*删除应用程序的所有 cookie？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-22T09:36:39.433

这是在黑暗中拍摄的，但也许您第一次安装的 cookie 保存在持久存储中，而重新安装的 cookie 缓存在 RAM 中。也许出于某种原因，删除所有 cookie 的操作没有同步到持久存储，因此它在重新安装之间保留旧值。

引用文档[`CookieSyncManager`](http://developer.android.com/reference/android/webkit/CookieSyncManager.html)（强调我的）：

> CookieSyncManager 用于在 RAM 和永久存储之间同步浏览器 cookie 存储。为了获得最佳性能，浏览器 cookie 保存在 RAM 中。一个**单独的线程**保存 cookie，**由 timer 驱动**。
> 
> ...
> 
> 同步间隔为 5 分钟，因此无论如何您都需要手动强制同步，例如在 onPageFinished(WebView, String) 中。请注意，即使 sync() 也是**异步**发生的，所以**不要在您的活动正在关闭时执行此操作**。

这强烈表明可能（在您的测试中，我假设有时在不到 5 分钟的时间间隔内进行）当应用程序被卸载时它还没有同步，所以第一次安装的旧值仍然在此时的持久存储。我也没有理由假设如果没有超过 5 分钟的时间间隔，卸载期间会发生同步。

这留下了一个问题：为什么有时会发送一些 cookie，即使您清除了它们`onCreate`？事实证明，`removeAllCookie` [**它也是异步**](http://code.google.com/p/android/issues/detail?id=16543)的——有时它会在你发出第一个请求之前完成，有时它不会，在后一种情况下，它会发送仍然处于活动状态的值：你第一次安装时仍然处于活动状态的值在持久存储中。

（请注意，我仍在学习 Android 开发，我的一些假设可能是错误的——关于 cookie 的管理方式以及在[活动生命周期](https://stackoverflow.com/a/5538421/520779)中的一种状态下进行的异步调用是否可能在另一个运行时仍未完成; 但这种解释与您所描述的行为非常一致）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-05T14:30:43.780

请在 CookieManager.getInstance().removeAllCookie() 调用后立即调用 CookieSyncManager.getInstance().sync()。

原因正如@mgibsonbr 所提到的，一个单独的线程保存cookie，由计时器驱动，以便使其持久化，立即显式调用CookieSyncManager.getInstance().sync()。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-27T07:26:28.943

```
if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.LOLLIPOP) {
        CookieManager.getInstance().removeAllCookies(null);
    } else {

        CookieSyncManager.createInstance(context);
        CookieManager cookieManager = CookieManager.getInstance();
        if (cookieManager != null) {
            cookieManager.removeAllCookie();
        }
 CookieSyncManager.getInstance().sync();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T09:28:13.120

试试下面的代码：

> BasicHttpContext mHttpContext;

```
CookieStore mCookieStore;
String persistentcookie;
CookieManager cookieManager;
CookieSyncManager syncManager;
private MultipartEntity m_hsmpeMultipartReqEntity;

  //manages the session of the webview for the image uploading on the server.
syncManager = CookieSyncManager.createInstance(m_hswvWebView.getContext());
syncManager.startSync();
cookieManager = CookieManager.getInstance();
boolean cok=cookieManager.acceptCookie(); // Here your cookie
persistentcookie=cookieManager.getCookie("http://www.xxxx.com/");       
String[] splitstr=pat.split(persistentcookie.toString());
String key=splitstr[0]; // Key of the Cookie
String value=splitstr[1]; //Session id
 m_hshttpClient = new DefaultHttpClient();
 mHttpContext  = new BasicHttpContext();
 mCookieStore = m_hshttpClient.getCookieStore();        

 BasicClientCookie clientcookie=new BasicClientCookie(key,value);
 clientcookie.setDomain(“www.xxxx.com”); // set the proper Domain URL
 mCookieStore.addCookie(clientcookie);             
 m_hshttppostRequest = new HttpPost(“http://www.xxxx.com/");
 // post URL after setting               cookie value.

 //set the cookie attribute in the BasicHTTPContext.

mHttpContext.setAttribute(ClientContext.COOKIE_STORE, mCookieStore);
m_hsmpeMultipartReqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

m_hshttppostRequest.setEntity (m_hsmpeMultipartReqEntity);
m_hshttpResponse = m_hshttpClient.execute(m_hshttppostRequest,mHttpContext); 
```