# StackOverflow 问答 15946000-15946999

# android - 在 ViewPropertyAnimator 中指定重复计数/模式？

> ID：15946003
> 
> 赞同：5
> 
> 时间：2013-04-11T10:06:02.097
> 
> 标签：android

使用 ViewPropertyAnimator 时有没有办法指定重复计数/模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-24T07:55:42.360

不幸的是，`ViewPropertyAnimator`没有任何方法可以指定它执行的动画的重复次数。正如`startAnimation()`ViewPropertyAnimator 中方法的 javadocs 中所述：

> 为一组属性启动底层 Animator。我们使用一个简单地从 0 运行到 1 的动画器，然后使用该小数值来相应地设置每个属性值。

不幸的是，它使用的 value animator 是私有的，除了`ViewPropertyAnimator`.

## 重复动画

`AnimatorListener`为您指定一个`ViewPropertyAnimator`，它将在每次迭代后重新启动动画：

```
viewPropertyAnimator.setListener(new Animator.AnimatorListener() {

    ...

    @Override
    public void onAnimationEnd(Animator animation) {
        viewPropertyAnimator.start();
    }

    ...

});
viewPropertyAnimator.start(); 
```

如果要指定确切的执行次数，请以这种方式引入变量：

```
int[] repeatCount = {8}; //your repeat count goes here

viewPropertyAnimator.setListener(new Animator.AnimatorListener() {

    ...

    @Override
    public void onAnimationEnd(Animator animation) {
        if(repeatCount-- > 0)
            viewPropertyAnimator.start();
    }

    ...

});
viewPropertyAnimator.start(); 
```

## 编辑

但是，您应该注意，由`ViewPropertyAnimator`（开始值和结束值）设置动画的值存储在 的实例中`ViewPropertyAnimator`，因此不会在每次动画后刷新。因此，如果您想在每次迭代后以增量方式对视图的某些属性进行动画处理，请确保在每次开始之前创建动画器的新实例。像这样：

```
public void animateEndlessly(final View v) {
        ViewPropertyAnimator viewPropertyAnimator = v.animate().scaleX(1.5f).scaleY(1.5f).setDuration(300);
        viewPropertyAnimator.setListener(new Animator.AnimatorListener() {

            ...

            @Override
            public void onAnimationEnd(Animator animation) {
                animateEndlessly(v);
            }

            ...

        });
        viewPropertyAnimator.start();
    } 
```

# matlab - 连接/叠加两个样本matlab

> ID：15946007
> 
> 赞同：2
> 
> 时间：2013-04-11T10:06:11.067
> 
> 标签：matlab

我想将 2 个样本与Sample_2的*偏好连接起来：*

```
eg. Sample_1= rand(1000,28), Sample_2=normrnd(1.91,0.266,1000,28) 
```

![在此处输入图像描述](https://i.stack.imgur.com/MV3eI.png)

好的，所以现在我想叠加`Sample_2`在 上`Sample_1`，但优先考虑 sample_2 的点（例如 80% 样本 2 和 20% 样本 1）。即我想要更多的Sample_2 点和更少的Sample_1。这是用于模型的蒙特卡罗抽样的不确定性分析。

也许是这样的：

```
Total_sample=randsample([Sample_1 Sample_2],1000,28,'false',[0.8 0.2]); 
```

> 使用 randsample 时出错（第 74 行）POPULATION 必须是向量。

和

> 使用 randsample 时出错（第 90 行） W 的长度必须为 56。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:33:56.770

直接的方法是生成随机索引，并使用它们用来自的样本覆盖 80% 的`Sample_1`样本`Sample_2`：

```
%// Copy samples from Sample_1
Total_Sample = Sample_1;

%// Overwrite 80% of the samples with values from Sample_2
N = numel(Sample_1);
idx = randperm(N);
Total_Sample(idx(1:0.8 * N)) = Sample_2(idx(1:0.8 * N)); 
```

或者，第二部分也可以这样实现：

```
N = numel(Sample_1);
idx = randsample(1:N, 0.8 * N);
Total_Sample(idx) = Sample_2(idx); 
```

# java - JAVA Arraylist 意外输出

> ID：15946009
> 
> 赞同：1
> 
> 时间：2013-04-11T10:06:13.930
> 
> 标签：java, list, arraylist

预期输出：Cell-1 Cell-2 Cell-3 Cell-4

但我得到的输出是： Cell-3 Cell-4 Cell-3 Cell-4

为什么会这样？

```
import java.util.ArrayList;

public class Test {
public static void main(String... a) {
    String[][] var1 = new String[] []{{"Cell-1","Cell-2"},{"Cell-3","Cell-4"}};
    ArrayList<String> r = new ArrayList<String>();
    ArrayList<ArrayList<String>> var = new ArrayList<ArrayList<String>>();

    //Insering data into the ArrayList.
    for(String[] row : var1){
        r.clear();
        for(String data : row){
            r.add(data);
        }
        var.add(r);
    }

    //Print data to console.
    for(ArrayList<String> r1 : var){
        for(String cell : r1)
            System.out.print(cell+" ");
        System.out.println();
    }
} 
```

} `

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:13:15.913

这一点都不意外：您将相同的对象，即`ArrayList r`，添加到`ArrayList var`两次。首先，当它有 时添加它`Cell-1 Cell-2`，然后清除它，然后添加它`Cell-3 Cell-4`。问题是，当您调用 时`r.clear()`，您添加到的数组列表`var`也会被清除。

您需要创建一个新`ArrayList`的而不是清除现有的来解决此问题：替换`r.clear()`为`r = new ArrayList<String>()`，问题就会消失。

# android - 付费/免费版 Android 应用程序中的不同资产/内容

> ID：15946010
> 
> 赞同：2
> 
> 时间：2013-04-11T10:06:15.987
> 
> 标签：android, eclipse, libgdx

我已经创建了同一个应用程序的两个版本（付费和免费），没有问题。我没有复制资产文件夹，而是使用 Eclipse 的“链接源”功能来引用其他项目的资产文件夹（物理资产文件夹在付费版本中，免费版本链接到它）。这工作得很好。

现在我遇到了一个特定的问题：

我在免费版本中未使用的付费版本中有更多内容（更多音乐）。我尝试使用链接文件夹上的资源过滤器在免费版本中过滤它们。在显示良好的包资源管理器中 - 我认为这足以让它工作。

但是，当我检查生成的 APK 时，我注意到免费版 APK 的大小大致相同。打开它们显示免费版本 - 尽管有资源过滤 - 包括付费版本的所有内容。它似乎完全忽略了过滤。

我想知道是否有任何方法可以做到这一点，甚至是整个问题的更优雅的解决方案？

顺便说一句，我使用的是 libGDX，所以结构通常是我有一个通用的通用项目，它包含在两个 Android 版本和桌面版本中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T00:19:46.957

好吧，首先我会推荐你​​去免费增值模式。您将只支持一个项目，这会使事情变得更容易，而且通常免费增值会带来更多收入。

如果您仍想拥有 2 个单独的项目，则只需复制 assets 文件夹。这就是我在使用免费/付费模式时所做的。每次您需要区分每个项目的资产时，都更容易制作过滤器。

# css - Css 剪裁、饼图和悬停

> ID：15946025
> 
> 赞同：1
> 
> 时间：2013-04-11T10:06:55.223
> 
> 标签：css, hover, clip

从这里： [http ://www.kylejlarson.com/blog/2011/how-to-create-pie-charts-with-css3/](http://www.kylejlarson.com/blog/2011/how-to-create-pie-charts-with-css3/)

```
 .pieContainer {
          height: 100px;
     }
     .pieBackground {
          background-color: grey;
          position: absolute;
          width: 100px;
          height: 100px;
          -moz-border-radius: 50px;
          -webkit-border-radius: 50px;
          -o-border-radius: 50px;
          border-radius: 50px;
          -moz-box-shadow: -1px 1px 3px #000;
          -webkit-box-shadow: -1px 1px 3px #000;
          -o-box-shadow: -1px 1px 3px #000;
          box-shadow: -1px 1px 3px #000;
     } 
 .pie {
          position: absolute;
          width: 100px;
          height: 100px;
          -moz-border-radius: 50px;
          -webkit-border-radius: 50px;
          -o-border-radius: 50px;
          border-radius: 50px;
          clip: rect(0px, 50px, 100px, 0px);
     }
     .hold {
          position: absolute;
          width: 100px;
          height: 100px;
          -moz-border-radius: 50px;
          -webkit-border-radius: 50px;
          -o-border-radius: 50px;
          border-radius: 50px;
          clip: rect(0px, 100px, 100px, 50px);
     }
#pieSliceBlue{
    -webkit-transform:rotate(0deg);
          -moz-transform:rotate(0deg);
          -o-transform:rotate(0deg);
          transform:rotate(0deg);

}
 #pieSliceBlue .pie {
          background-color: #1b458b;
          -webkit-transform:rotate(180deg);
          -moz-transform:rotate(180deg);
          -o-transform:rotate(180deg);
          transform:rotate(180deg);
     }
     #pieSliceBlue2 {
          -webkit-transform:rotate(180deg);
          -moz-transform:rotate(180deg);
          -o-transform:rotate(180deg);
          transform:rotate(180deg);
     }
     #pieSliceBlue2 .pie {
          background-color: #1b458b;
          -webkit-transform:rotate(40deg);
          -moz-transform:rotate(40deg);
          -o-transform:rotate(40deg);
          transform:rotate(40deg);
     }
     #pieSliceRed {
          -webkit-transform:rotate(220deg);
          -moz-transform:rotate(220deg);
          -o-transform:rotate(220deg);
          transform:rotate(220deg);
     }
     #pieSliceRed .pie {
          background-color: #cc0000;
          -webkit-transform:rotate(140deg);
          -moz-transform:rotate(140deg);
          -o-transform:rotate(140deg);
          transform:rotate(140deg);
     }
#pieSliceBlue .pie:hover{
    background-color: yellow;
}
#pieSliceBlue2 .pie:hover{
    background-color: yellow;
}
#pieSliceRed .pie:hover{
    background-color: yellow;
}

    <div class="pieContainer">
     <div class="pieBackground"></div>
     <div id="pieSliceBlue" class="hold"><div class="pie"></div></div>
     <div id="pieSliceBlue2" class="hold"><div class="pie"></div></div>
     <div id="pieSliceRed" class="hold"><div class="pie"></div></div>
</div> 
```

为切片 blue2 和 red 添加 :hover 是可以的，但不适用于第一个切片，其中悬停仅适用于切片的一部分。

[http://jsfiddle.net/gvvsk/1/](http://jsfiddle.net/gvvsk/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:37:46.360

原因是`pieSliceRed`（.pie-div 的容器）覆盖了容器中包含的 pie-div `pieSliceRed`，从而捕获了悬停事件。

由于您的解决方案肯定需要 CSS3 支持，您可以使用指针事件来绕过此行为。尝试以这种方式为 pieSliceRed 定义 css：

```
#pieSliceRed {
    pointer-events: none;
    -webkit-transform:rotate(220deg);
    -moz-transform:rotate(220deg);
    -o-transform:rotate(220deg);
    transform:rotate(220deg);
} 
```

`pointer-events` [您可以在此处](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)阅读更多信息。

# php - 主题中的 Wp 炼金术，不允许 eval

> ID：15946027
> 
> 赞同：0
> 
> 时间：2013-04-11T10:07:04.717
> 
> 标签：php, wordpress, eval

嗨，我在我的 Wordpress 主题中发现了这个带有主题检查的警告，我找到[了这个解决方案](https://stackoverflow.com/questions/13036246/eval-is-not-allowed)，但对我不起作用，有什么想法吗？

> 警告：在文件 inc/metaboxes/MediaAccess.php 中找到 eval。`eval()`不允许..
> 第 375 行：`data = eval('(' + (data.indexOf('{') < 0 ? '{' + data + '}' : data) + ')');`

# asp.net - gridview 显示 tru 值 asp.net vb

> ID：15946032
> 
> 赞同：0
> 
> 时间：2013-04-11T10:07:10.577
> 
> 标签：asp.net, vb.net, gridview, datagridview

我正在尝试将大学模块数据提取到网格视图中，但前提是该模块是强制性的。有人知道怎么做吗？

这是带有 SQL 数据源的 ASPX 代码：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
        DataKeyNames="Module_Code" DataSourceID="SqlEnteringLevel">
        <Columns>
            <asp:BoundField DataField="Module_Code" HeaderText="Module_Code" 
                ReadOnly="True" SortExpression="Module_Code"></asp:BoundField>
            <asp:BoundField DataField="Title" HeaderText="Title" SortExpression="Title">
            </asp:BoundField>
            <asp:BoundField DataField="Semester" HeaderText="Semester" 
                SortExpression="Semester"></asp:BoundField>
            <asp:BoundField DataField="CATS" HeaderText="CATS" SortExpression="CATS">
            </asp:BoundField>
            <asp:CheckBoxField DataField="Compulsory" HeaderText="Compulsory" 
                SortExpression="Compulsory"></asp:CheckBoxField>
            <asp:BoundField DataField="Course" HeaderText="Course" SortExpression="Course">
            </asp:BoundField>
            <asp:BoundField DataField="Level" HeaderText="Level" SortExpression="Level">
            </asp:BoundField>
        </Columns>
    </asp:GridView>
<asp:button runat="server" text="Next" ID="BtnNext" TabIndex="1"/>
    <asp:Button ID="BtnReturn" runat="server" 
    Text="Return to Registration Page" TabIndex="2" />
<asp:SqlDataSource ID="SqlCurrentLevel" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="SELECT [Level] FROM [Student_Academic_Record] WHERE ([Student_No] = @Student_No)">
    <SelectParameters>
        <asp:SessionParameter DefaultValue="Student" Name="Student_No" 
            SessionField="Student" Type="String" />
    </SelectParameters>
</asp:SqlDataSource>
<asp:SqlDataSource ID="SqlEnteringLevel" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 

    SelectCommand="SELECT DISTINCT Module_Details.Module_Code, Module_Details.Title, Module_Details.Semester, Module_Details.CATS, Module_Details.Compulsory, Student_Academic_Record.Course, Module_Timetable.Level FROM Module_Details INNER JOIN Module_Timetable ON Module_Details.Module_Code = Module_Timetable.Module_Code INNER JOIN Student_Academic_Record ON Module_Timetable.Course = Student_Academic_Record.Course WHERE (Module_Timetable.Level = @Level) AND (Student_Academic_Record.Course = @Course)">
    <SelectParameters>
        <asp:SessionParameter DefaultValue="EnteringLevel" Name="Level" 
            SessionField="EnteringLevel" />
        <asp:SessionParameter DefaultValue="Course" Name="Course" 
            SessionField="Course" />
    </SelectParameters>
</asp:SqlDataSource>
<asp:SqlDataSource ID="SqlCourse" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionString %>" 
    SelectCommand="SELECT [Course] FROM [Student_Academic_Record] WHERE ([Student_No] = @Student_No)">
    <SelectParameters>
        <asp:SessionParameter DefaultValue="Student" Name="Student_No" 
            SessionField="Student" Type="String" />
    </SelectParameters>
</asp:SqlDataSource> 
```

在那一刻，根据登录的学生，显示与他们正在输入的课程和级别相关的所有模块。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:13:57.260

您能否仅更改`SELECT`语句以包含`WHERE`该字段的子句参数`Compulsory`-`Module_Details.Compulsory = 1`假设它是一`bit`列：

```
SelectCommand= _
"SELECT DISTINCT Module_Details.Module_Code, Module_Details.Title, " & _
     "Module_Details.Semester, Module_Details.CATS, Module_Details.Compulsory, " & _
     "Student_Academic_Record.Course, Module_Timetable.Level " & _
"FROM Module_Details " & _
     "INNER JOIN Module_Timetable ON " & _ 
                "Module_Details.Module_Code = Module_Timetable.Module_Code " & _
     "INNER JOIN Student_Academic_Record ON " & _
                "Module_Timetable.Course = Student_Academic_Record.Course " & _
 "WHERE (Module_Timetable.Level = @Level) " & _
     "AND (Student_Academic_Record.Course = @Course) " & _
     "AND Module_Details.Compulsory = 1"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:15:16.323

如何简单地修改你`SqlDataSource SqlEnteringLevel`的一点。

你`SelectCommand`应该看起来像。

```
SelectCommand="SELECT........WHERE (Module_Timetable.Level = @Level) AND   
                             (Student_Academic_Record.Course = @Course) 
                             AND (Module_Details.Compulsory = 'Compulsory')" // add this 
```

因此，这将为您提供`resultset`仅包含`Compulsory`模块的内容。

# javascript - 在一个 mustache 参数中调用一个 mustache 参数

> ID：15946037
> 
> 赞同：1
> 
> 时间：2013-04-11T10:07:17.167
> 
> 标签：javascript, mustache

我试图做这样的事情，但我不知道该怎么做：

我有一个叫 : 的小胡子 arg`{{dropdown_}}`和另一个叫`{{number}}`

我想做的是这样的：

```
{{dropdown_{{number}}}} 
```

例如：如果`{{number}}`是 69，我想显示`{{dropdown_69}}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T18:56:54.293

您将需要创建一个匿名函数来执行 switch 语句。在下面的示例中，下拉列表是一个匿名函数，{{number}} 被传递给下拉列表。

胡子模板：

```
{{#dropdown}}
   {{number}}
{{/dropdown}} 
```

Javascript 对象：

```
{ ...,
 dropdown : function(){ 
return function(text,render){
     var value = jQuery.trim(render(text));
     var test = Number(value);
         switch(test){
             case 69:
                 return render("{{dropdown_69}}");
                 break;
         }

        }
     },
... } 
```

# entity-framework-5 - 实体框架 - 单个实体到多个表

> ID：15946039
> 
> 赞同：3
> 
> 时间：2013-04-11T10:07:34.697
> 
> 标签：entity-framework-5

我在将单个实体映射到实体框架中的两个不同表时遇到了一些困难，其中一个是可选的以提供快速概述。

我有一个主表，它是我们公司的许多应用程序都使用它的核心表，所以我们真的不想对这个表进行任何更改。

在我们的新应用程序中，我们需要更多的列来支持我们正在添加的一些功能。

我创建了一个实体模型，它将信息保存到这两个表中，当这两个表都有记录时它工作正常（由主键和外键相关）

但是对于历史记录，这个新表将没有关联的记录，并且无法获取任何实体集。

下面是代码片段。

```
public class ModelTable
{
    public string PatientID { get; set; }

    public string Diagnosis1 { get; set; }

    public string Diagnosis2 { get; set; }

    public string Diagnosis3 { get; set; }

    public string Diagnosis4 { get; set; }

    public string Diagnosis5 { get; set; }

    public string Diagnosis6 { get; set; }

    public string Diagnosis7 { get; set; }

    public string Diagnosis8 { get; set; }
}

public class ModelTableMap : EntityTypeConfiguration<ModelTable>
{
    public ModelTableMap()
    {
        //Table1
        this.Map(model =>
        {
            model.Properties(table1 => new
            {
                table1.Diagnosis1,
                table1.Diagnosis2,
                table1.Diagnosis3,
                table1.Diagnosis4,
                table1.Diagnosis5,
                table1.Diagnosis6
            });
            model.ToTable("Table1");
        });
        //Optional Table
        this.Map(model =>
        {
            model.Properties(table2 => new
            {
                table2.Diagnosis7,
                table2.Diagnosis8,
            });
            model.ToTable("Table2");
        });

        this.HasKey(type => type.PatientID);
        this.Property(type => type.PatientID).IsRequired().HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        this.Property(type => type.Diagnosis1).HasColumnName("Diag1");
        this.Property(type => type.Diagnosis1).HasColumnName("Diag2");
        this.Property(type => type.Diagnosis1).HasColumnName("Diag3");
        this.Property(type => type.Diagnosis1).HasColumnName("Diag4");
        this.Property(type => type.Diagnosis1).HasColumnName("Diag5");
        this.Property(type => type.Diagnosis1).HasColumnName("Diag6");
        this.Property(type => type.Diagnosis1).HasColumnName("Diag7");
        this.Property(type => type.Diagnosis1).HasColumnName("Diag8");
    }

} 
```

如果我将这些表拆分为两个不同的 POCO 类并指定它工作正常的关系。

但我想用单一实体来实现这一点，因为它在功能上是同一张表。

请提供任何指导，或者如果我做错了，请坦白我的英语不是那么好。

谢谢萨蒂什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:40:34.443

当前 EF 版本中的实体拆分需要两个表中的记录。如果要使用实体拆分，则必须为第一个表中的所有现有记录创建空记录。否则，您不能使用实体拆分。

# android - 如何从sdcard播放视频

> ID：15946040
> 
> 赞同：1
> 
> 时间：2013-04-11T10:07:35.593
> 
> 标签：android

我正在做一个项目，我有许多产品类别，每个产品类别都包含一个视频。我通过从 Web 服务获取 url 来播放视频。当我第一次播放该视频时，它应该只从该 URL 下载该视频一次。并且当没有互联网连接时，它应该从下载位置（sdcard）播放。假设我已经为所有三种产品下载了 3 个视频，现在我必须在没有互联网的情况下播放这些视频，即来自 sdcard。这里出现了如何为各个产品获取特定视频路径的问题。我不必打开画廊。我必须直接播放该产品的视频。以及如何限制视频下载不止一次。我播放视频的代码是

```
 private void playVideo(String path) {

    dialog = new Dialog(this,android.R.style.Theme_Translucent_NoTitleBar);
    dialog.setContentView(R.layout.layout_video_popup);

    ImageView imgViewClose = (ImageView)dialog.findViewById(R.id.imgViewClose);
    imgViewClose.setOnClickListener(this);

    btnPlayPause = (Button) dialog.findViewById(R.id.button1);
    btnPlayPause.setOnClickListener(this);

    seekBar = (SeekBar) dialog.findViewById(R.id.seekBar1);
    seekBar.setOnClickListener(this);
    linearlayout = (LinearLayout) dialog.findViewById(R.id.linerlayout_bottom);
    mVideoView = (VideoView)dialog.findViewById(R.id.videoView);
    mVideoView.setOnTouchListener(this);
    mVideoView.setOnPreparedListener(this);
    mVideoView.setOnCompletionListener(this);
    dialog.show();

    playVideo(path, mVideoView);
    AppLog.d("Video", "playVideo()", path);

}

private void playVideo(String path, VideoView mVideoView) {
    if(path == null || path.isEmpty()) {
        return;
    }

    try {
        pDialpg = ProgressDialog.show(this, "Video", "Please wait..", false, true);
        mVideoView.setVideoPath(path);
        mVideoView.requestFocus();
        RelativeLayout.LayoutParams relativeParams = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);  
        relativeParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM, RelativeLayout.TRUE);
        relativeParams.addRule(RelativeLayout.ALIGN_PARENT_TOP, RelativeLayout.TRUE);
        mVideoView.setLayoutParams(relativeParams);
        mVideoView.invalidate();
    } catch (Exception e) {
        // TODO: handle exception
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:33:54.767

这只是你如何做到这一点的一个例子......

您可以检查是否有连接：

```
public Boolean checkConnectivity(Context context) {

    Log.d(TAG, "Checking connectivity");
    try {
        connectivityManager = (ConnectivityManager) context
                .getSystemService(Context.CONNECTIVITY_SERVICE);
        wifiInfo = connectivityManager
                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);
        mobileInfo = connectivityManager
                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

        if (wifiInfo.isConnected() || mobileInfo.isConnected()) {
            Log.d(TAG, "Wifi/mobile Connection found");
            return true;
        }
    } catch (Exception e) {
        Log.w(TAG, "PROBLEM " + e);
    }
    Log.d(TAG, "No connection found - working offline");
    return false;
} 
```

第一次，如果没有连接，您可以设置一个默认警告，例如：“无法在没有互联网连接的情况下播放视频”

如果有连接。你可以像这样播放流媒体：

```
 public Void playVideoStream(Context context,
        String url, final VideoView videoView) {

    Log.d(TAG, "Playing video stream");

    MediaController mediaController = new MediaController(context);
    mediaController.setAnchorView(videoView);

    Uri video = Uri.parse(url);
    videoView.setMediaController(mediaController);
    videoView.setVideoURI(video);

    videoView.setOnPreparedListener(new OnPreparedListener() {

        public void onPrepared(MediaPlayer mp) {
            videoView.start();
        }
    });

    return null;
} 
```

如果您已经下载了它：

```
 public Void playVideoOffline(Context context,
        String filePath, VideoView videoView) {

    Log.d(TAG, "Playing video offline");

    videoView.setVideoPath(filePath);

    MediaController mediaController = new MediaController(context);
    mediaController.setMediaPlayer(videoView);

    videoView.setMediaController(mediaController);
    videoView.requestFocus();

    videoView.start();

    return null;
} 
```

这是您可以做到的一种方式，不一定是最好的方式。

# android - 在 Fedora Linux 中，MP3 文件没有被推送到 Android SD 卡中

> ID：15946046
> 
> 赞同：0
> 
> 时间：2013-04-11T10:07:39.093
> 
> 标签：android, linux, file-permissions, fedora, android-sdcard

我正在开发一个 android 应用程序，在该应用程序中我正在为`Audio.Media.EXTERNAL_CONTENT_URI`.

我将 Fedora 17 与 Eclipse 和 API 级别 17 Android Jelly Bean 一起使用。

现在的问题是，当应用程序在模拟器上运行时，出于调试目的，我将一些 mp3 文件推送到`/mnt/sdcard`. 所以这里给出了下面提到的问题。

我知道这个问题与文件权限有关，但如何定位呢？我不明白。

```
[2013-04-11 23:14:06 - Unexpected error while launching logcat. Try reselecting the device.] device not found
com.android.ddmlib.AdbCommandRejectedException: device not found
    at com.android.ddmlib.AdbHelper.setDevice(AdbHelper.java:752)
    at com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:373)
    at com.android.ddmlib.Device.executeShellCommand(Device.java:462)
    at com.android.ddmuilib.logcat.LogCatReceiver$1.run(LogCatReceiver.java:110)
    at java.lang.Thread.run(Thread.java:722)

[2013-04-11 23:18:46 - ddms] transfer error: Read-only file system
[2013-04-11 23:18:46] Failed to push selection: Read-only file system
[2013-04-11 23:25:43 - ddms] transfer error: Read-only file system
[2013-04-11 23:25:43] Failed to push selection: Read-only file system
[2013-04-11 23:26:26 - ddms] transfer error: Read-only file system
[2013-04-11 23:26:26] Failed to push selection: Read-only file system 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:58:06.950

尝试做一个`adb remount`.

如果它不起作用，则`ro.secure`属性可能是问题所在，在这种情况下尝试：

```
adb shell
su
# In root user mode
mount -o rw,remount /mnt/sdcard 
```

# linker - “开始”，引用自：-u 命令行选项 ld：未找到符号

> ID：15946047
> 
> 赞同：3
> 
> 时间：2013-04-11T10:07:40.317
> 
> 标签：linker, ld

我尝试从 Jonathan Zdziarski 的“黑客和保护 iOS 应用程序”一书中构建一个示例，编译一个包含大量对象文件的示例。但是在编译二进制文件时：

```
export PLATFORM=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform
$PLATFORM/Developer/usr/bin/arm-apple-darwin10-llvm-gcc-4.2 -o launchd launchd.o syscalls.o -static -nostartfiles -nodefaultlibs -nostdlib -W1,-e,_main 
```

终端说： `Undefined symbols for architecture armv7: "start", referenced from: -u command line option ld: symbol(s) not found for architecture armv7 collect2: ld returned 1 exit status`

通常，当缺少库时，会显示此消息，但是我如何找出是哪一个？我很确定，源代码没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T06:16:50.977

-arch armv7 -isysroot -L$(SDK) -L$(SDK)/usr/lib/system

# java - HTTP Client 需要导入哪个 Java 包？

> ID：15946048
> 
> 赞同：-4
> 
> 时间：2013-04-11T10:07:40.400
> 
> 标签：java

我需要使用以下代码来获取我对 Http Cline 请求的响应，但不要因为我是 java 新手而使用哪个包。

```
URL url = new URL("http://www.google.com/humans.txt");
        HttpURLConnection http = (HttpURLConnection)url.openConnection();
        int statusCode = http.getResponseCode(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:09:15.477

进口`java.net.HttpURLConnection`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:09:33.697

它是 java.net 包。就放

```
import java.net.URL; 
```

并且

```
import java.net.HttpURLConnection; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:11:42.047

如果您使用的是 IDE（我只能代表 Netbeans 和 Eclipse，但我敢肯定大多数都是相同的），那么当您在没有导入的情况下编写它时应该会出错，并且当您将鼠标悬停在它上面时，您可以选择自动导入正确的类（前提是它是 Java 库中内置的类，或者您已将该库包含在类路径中）。

例如，在 NetBeans 中，只需单击红色下划线的行，然后按 Alt+Enter。

在这种特殊情况下，正如其他人所说，您正在寻找导入：

```
java.net.HttpURLConnection 
```

# python - python - 套接字下载图像

> ID：15946055
> 
> 赞同：0
> 
> 时间：2013-04-11T10:08:12.503
> 
> 标签：python, image, sockets, download, binary

早上好，社区。

经过几个小时的谷歌我开始这个线程。我正在尝试使用 python 套接字模块从 www 下载图片。我正在使用“recv()”获取图片的来源，并将其以二进制模式写入文件。使用“answer.split("image/jpeg")”从标题中拆分内容并不能解决问题。

这是我的代码：

```
import socket

socket.setdefaulttimeout(30)

HOST = 'ict.de'   
PORT = 80         

def makestr(s):#create paket-string from list
    rs = ""
    for x in range(0,len(s)-1):
            rs+=s[x]+"\r\n"
    rs+="\r\n"
    return rs

def sendcap(sdata):
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.connect((HOST, PORT))
    s.send(sdata)

    recvd=""
    while True:
        data = s.recv(1024)
        if not data: print " Done "; break
        recvd += data
    data = recvd.split("image/jpeg")[1]
    s.close()

    return data

xy = []  
xy.append("GET /fileadmin/ict/images/Presse/Download-Button_1700x1000.jpg HTTP/1.1")
xy.append("Host: www.ict.de")
xy.append("User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:19.0) Gecko/20100101      Firefox/19.0")
xy.append("Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8")
xy.append("Accept-Language: de-de,de;q=0.8,en-us;q=0.5,en;q=0.3")
xy.append("Accept-Encoding: gzip, deflate")
xy.append("DNT: 1")
xy.append("Connection: keep-alive")
data = sendcap(makestr(xy))
f = open("logo.jpg","wb")
f.write(data)
f.close() 
```

纯文本中的数据是这样的（没有标题，在图像/jpeg 处拆分）“ÿØÿá5ExifMM*bj(1r2Ž‡i¤Ð ü€' ü€'Adobe Photoshop CS5 Windows2012:03:05 13:37:44 ¤è&( . ÿHHÿØÿíAdobe_CMÿîAdobed€ÿÛ„ ÿÀ^ "ÿÝ ÿÄ? 3!1AQa"q2'¡±B#$RÁb34r,ÑC%'Sðáñcs5¢²ƒ&D"TdEÂ£t6ÒUâeò³„"

看起来像二进制数据。

当我尝试使用 windows 图片显示打开文件时，会出现错误，即文件已损坏。

希望有人能够帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:38:18.157

拆分 at`'image/jpeg'`不起作用，因为在那之后有两个`'\r\n'`s 终止 HTTP 标头。

不保证标头以任何特定顺序出现，因此处理这样的响应可能会突然停止工作。

如果有什么你应该寻找标题标记的结尾：

```
data = recvd.split("\r\n\r\n", 1)[1] 
```

但当然，这仅在内容未发送时才有效[chunked](http://en.wikipedia.org/wiki/Chunked_transfer_encoding)。

有一些库旨在做这类事情（[requests](http://docs.python-requests.org)，[urllib2](http://docs.python.org/library/urllib2.html)），你为什么不使用它们呢？

# android - Android-mailto 链接不起作用

> ID：15946056
> 
> 赞同：5
> 
> 时间：2013-04-11T10:08:13.130
> 
> 标签：android, hyperlink, mailto

我在 stackoverflow 上阅读了很多关于这个主题的问题，我的解决方案也来自这里，但它不起作用。也没有错误信息。

我在 Android 中有一个 webview 和一个主页，有一些 mailto 链接，当我尝试在 mailclient 中从我的 webview 打开 mailto 链接时，webview 总是像普通网页一样打开邮件地址。

有人可以查看我的代码并告诉我出了什么问题吗？

谢谢你的帮助。

代码：

**清单文件：**

```
1<?xml version="1.0" encoding="utf-8"?>
2<manifest xmlns:android="http://schemas.android.com/apk/res/android"
3 package="com.example.TEST"
4 android:versionCode="1"
5 android:versionName="1.5" android:installLocation="auto">
6
7 <uses-permission android:name="android.permission.INTERNET" />
8 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
9 <uses-permission android:name="android.permission.ACCESS_GPS" />
10  <uses-permission android:name="android.permission.ACCESS_ASSISTED_GPS" />
11  <uses-permission android:name="android.permission.ACCESS_LOCATION" />
12  <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
13
14 <uses-sdk
15 android:minSdkVersion="8"
16 android:targetSdkVersion="17" />
17
18 <application
19 android:allowBackup="true"
20 android:icon="@drawable/ic_launcher"
21 android:label="@string/app_name"
22 android:theme="@style/AppTheme" >
23 <activity
24 android:name="com.example.lauffinderpro.MainActivity"
25 android:label="@string/app_name" >
26 <intent-filter>
27 <action android:name="android.intent.action.MAIN" />
28
29 <category android:name="android.intent.category.LAUNCHER" />
30 </intent-filter>
31 </activity>
32 </application>
33
34</manifest> 
```

**主要的.xml**

```
1<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
2 xmlns:tools="http://schemas.android.com/tools"
3 android:id="@+id/FrameLayout1"
4 android:layout_width="match_parent"
5 android:layout_height="match_parent"
6 android:paddingBottom="@dimen/vertical"
7 android:paddingLeft="@dimen/horizontal"
8 android:paddingRight="@dimen/horizontal"
9 android:paddingTop="@dimen/vertical"
10 tools:context=".MainActivity" >
11
12 <LinearLayout
13 android:layout_width="match_parent"
14 android:layout_height="match_parent"
15 android:orientation="vertical" >
16
17 <WebView
18 android:id="@+id/webView1"
19 android:layout_width="match_parent"
20 android:layout_height="0dp"
21 android:layout_weight="0.05" />
22
23 <FrameLayout
24 android:layout_width="match_parent"
25 android:layout_height="wrap_content"
26 android:layout_weight="0.00" >
27
28 <LinearLayout
29 android:layout_width="match_parent"
30 android:layout_height="wrap_content"
31 android:baselineAligned="true" >
32
33
34 <Button
35 android:id="@+id/button1"
36 android:layout_width="0dp"
37 android:layout_weight="2"
38 android:layout_height="match_parent"
39 android:background="@drawable/upgradetest"
40 android:onClick="button1click" />
41
42 <Button
43 android:id="@+id/button2"
44 style="?android:attr/buttonStyleSmall"
45 android:layout_width="0dp"
46 android:layout_weight="2"
47 android:layout_height="match_parent"
48 android:background="@drawable/globaltest"
49 android:onClick="button2click" />
50
51 <Button
52 android:id="@+id/button3"
53 style="?android:attr/buttonStyleSmall"
54 android:layout_width="0dp"
55 android:layout_weight="2"
56 android:layout_height="match_parent"
57 android:background="@drawable/datetest"
58 android:onClick="button3click" />
59
60 <Button
61 android:id="@+id/button5"
62 style="?android:attr/buttonStyleSmall"
63 android:layout_width="0dp"
64 android:layout_weight="2"
65 android:layout_height="match_parent"
66 android:layout_gravity="right"
67 android:background="@drawable/mehrtest"
68 android:onClick="button5click" />
69 </LinearLayout>
70
71 </FrameLayout>
72
73 </LinearLayout>
74
75</FrameLayout> 
```

**main.java**

```
1package com.example.lauffinderpro;
2
3import java.net.URISyntaxException;
4
5import android.net.MailTo;
6import android.net.Uri;
7import android.os.Bundle;
8import android.annotation.SuppressLint;
9import android.app.Activity;
10import android.app.AlertDialog;
11import android.content.Context;
12import android.content.DialogInterface;
13import android.content.Intent;
14import android.util.Log;
15import android.view.KeyEvent;
16import android.view.Menu;
17import android.view.View;
18import android.view.View.OnClickListener;
19import android.webkit.GeolocationPermissions;
20import android.webkit.WebChromeClient;
21import android.webkit.WebView;
22import android.webkit.WebViewClient;
23import android.widget.Button;
24import android.widget.ImageButton;
25
26public class MainActivity extends Activity {
27  
28  
29  protected void onCreate(Bundle savedInstanceState) {
30  super.onCreate(savedInstanceState);
31  setContentView(R.layout.activity_main);
32  
33  
34  //startet Upgrade als Standard
35  
36  @SuppressLint("SetJavaScriptEnabled")
37  
38  
39  WebView myWebView = (WebView) findViewById (R.id.webView1);
40  myWebView.getSettings().setJavaScriptEnabled(true);
41  myWebView.loadUrl("WEBSITE");
42  myWebView.setWebViewClient(new WebViewClient());
43  
44  
45  }
46  
47  
48  
49  /*public boolean onCreateOptionsMenu(Menu menu) {
50  // Inflate the menu; this adds items to the action bar if it is present.
51  getMenuInflater().inflate(R.menu.main, menu);
52  return true;
53  }
54  */
55
56  
57  public boolean shouldOverrideUrlLoading(WebView view, String url) {
58  if (url.startsWith("mailto:")) {
59  Intent intent = new Intent(Intent.ACTION_VIEW,
60  Uri.parse(url));
61  startActivity(intent);
62  }else if(url.startsWith("http:") || url.startsWith("https:")) {
63  view.loadUrl(url);
64  }
65  return true;
66  }
67  
68  
69  public void button1click (View view) {
70  
71  Code
72  
73  }
74  
75  
76  public void button2click (View view) {
77  
78  Code
79  
80  }
81
82
83  
84  public void button3click (View view) {
85  
86  Code
87  
88  }
89  
90  
91  
92  public void button5click (View view) {
93  
94  Code
95  
96  }
97
98  
99  
100} 
```

**编辑：**

如果我尝试这个，我会收到错误消息“方法 replaseFirst(String) 未定义为 String 类型”。由于这个原因，我改为`url.replaseFirst` 但`url.replaceFirst`他需要第二个论点，所以我必须写`url.replaceFirst("mailto:", X );`。对于 XI 可以键入`mail`,`url`或`null`. 我尝试了每个人，每个人都收到我必须添加退货声明的消息，所以我用`return false`. 现在我有这个代码：

```
public class MyWebViewClient extends WebViewClient {
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
                if(url.startsWith("mailto:")) {
                      String mail = url.replaceFirst ("mailto:", mail);
                      Intent intent = new Intent(Intent.ACTION_SEND);
                      intent.setType("message/rfc822");
                      intent.putExtra(Intent.EXTRA_EMAIL, mail );

                      startActivity(Intent.createChooser(intent, "Send Email"));
             }
                return false;
        }
    } 
```

这不起作用。所以我尝试`intent.setType("message/rfc822");`代替，`intent.setType("text/plain");` 但这也不起作用。

我做错了什么？

**编辑2：**

**新代码：**

```
public boolean shouldOverrideUrlLoading(WebView view, String url) {
            if(url.startsWith("mailto:")) {
                String mail = url.replaceFirst("mailto:", "");
                Intent intent = new Intent(Intent.ACTION_SEND);
                intent.setType("text/plain");
                intent.putExtra(Intent.EXTRA_EMAIL, mail );

                startActivity(Intent.createChooser(intent, "Send Email"));
             }  
            else if(url.startsWith("http:") || url.startsWith("https:")) {
                    view.loadUrl(url);
                }
                return true;
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T10:24:27.673

要强制打开邮件客户端，您可以尝试：

```
if(url.startsWith("mailto:")) {
  String mail = url.replaceFirst("mailto:", "");
  Intent intent = new Intent(Intent.ACTION_SEND);
  intent.setType("text/plain");
  intent.putExtra(Intent.EXTRA_EMAIL, mail );
  // intent.putExtra(Intent.EXTRA_SUBJECT, "Subject"); // if you want extra
  // intent.putExtra(Intent.EXTRA_TEXT, "I'm email body."); // if you want extra

  startActivity(Intent.createChooser(intent, "Send Email"));
} else if ... {
   // your code as is
} 
```

但其他“发送”应用程序也打开，取决于支持`Intent.ACTION_SEND`

而不是`intent.setType("text/plain");` [这里](https://stackoverflow.com/a/8701718/944070)建议使用，`intent.setType("message/rfc822");`但我从未测试过。

* * *

编辑：

更改 main.java 的行：

```
// ...
WebView myWebView = (WebView) findViewById (R.id.webView1);
myWebView.getSettings().setJavaScriptEnabled(true);
myWebView.setWebViewClient(new MyWebViewClient()); // you name your class MyWebViewClient not WebViewClient
myWebView.loadUrl("WEBSITE"); // also change line order
// ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-01T13:29:33.653

我的例子：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_EMAIL,  new String[]{"THE_EMAIL_ADDRESS_WITHOUT_mailto:"});
startActivity(Intent.createChooser(intent, "Send Email")); 
```

注意字符串数组。如果您只传递一个字符串，则不会考虑它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-20T03:06:13.113

虽然这是一个老问题，但我发现上面的答案都没有 100% 对我有用。我只想打开电子邮件应用程序，而不是短信等。

我改用这段代码，（没有意图.SetType）

```
String[] email_address = new String[] {getString(R.string.email_address)};
Intent intent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts("mailto", getString(R.string.email_address), null));
intent.putExtra(Intent.EXTRA_EMAIL, email_address);
intent.putExtra(Intent.EXTRA_SUBJECT, getString(R.string.email_subject_question));
startActivity(Intent.createChooser(intent, "Send Email")); 
```

额外的行：intent.putExtra(Intent.EXTRA_EMAIL, email_address); 所以它适用于所有版本的android。

# c++ - 使用 CGImageDestinationCreateWithData 创建 TGA

> ID：15946057
> 
> 赞同：0
> 
> 时间：2013-04-11T10:08:13.280
> 
> 标签：c++, core-graphics, core-foundation, tga

我正在尝试保存 TGA 图像。我已经将数据作为 a`CGImageRef`并用于`CFDataCreateMutable`获取`CFMutableDataRef`，但我不确定要调用什么类型的参数`CGImageDestinationCreateWithData`。查看 UTType 参考，这些是它所说的核心图形支持的类型：

```
const CFStringRef kUTTypeImage;
const CFStringRef kUTTypeJPEG;
const CFStringRef kUTTypeJPEG2000;
const CFStringRef kUTTypeTIFF;
const CFStringRef kUTTypePICT;
const CFStringRef kUTTypeGIF;
const CFStringRef kUTTypePNG;
const CFStringRef kUTTypeQuickTimeImage;
const CFStringRef kUTTypeAppleICNS
const CFStringRef kUTTypeBMP;
const CFStringRef kUTTypeICO; 
```

我会使用 kUTTypeImage 吗？如果是这样，我如何让它知道我想将它编码为 TGA？我应该把它变成中间格式，然后自己进行转换吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:03:05.187

事实证明，这些 UTI 可以从字符串中创建。因此，TGA UTI 的代码将是：

```
CFStringCreateWithCString(kCFAllocatorDefault, "com.truevision.tga-image", kCFStringEncodingASCII); 
```

...代替`kUTTypeImage`等

# python - 如何阻止 BeautifulSoup 转义内联 javascript

> ID：15946059
> 
> 赞同：3
> 
> 时间：2013-04-11T10:08:18.067
> 
> 标签：python, escaping, beautifulsoup

我发现 BeautifulSoup 4 似乎转义了内联 javascript 中的一些字符：

```
>>> print s
<DOCTYPE html>
<html>
<body>
<h1>Test page</h1>
<script type="text/javascript">
//<!--
if (4 > 3 && 3 < 4) {
        console.log("js working");
}
//-->
</script>
</body>
</html>
>>> import bs4
>>> soup = bs4.BeautifulSoup(s, 'html5lib')
>>> print soup
<html><head></head><body><doctype html="">

<h1>Test page</h1>
<script type="text/javascript">
//&lt;!--
if (4 &gt; 3 &amp;&amp; 3 &lt; 4) {
        console.log("js working");
}
//--&gt;
</script>

</doctype></body></html>
>>> print soup.prettify()
<html>
 <head>
 </head>
 <body>
  <doctype html="">
   <h1>
    Test page
   </h1>
   <script type="text/javascript">
    //&lt;!--
if (4 &gt; 3 &amp;&amp; 3 &lt; 4) {
        console.log("js working");
}
//--&gt;
   </script>
  </doctype>
 </body>
</html> 
```

万一它在上面丢失了，关键问题是：

```
if (4 > 3 && 3 < 4) 
```

转换为：

```
if (4 &gt; 3 &amp;&amp; 3 &lt; 4) 
```

这不是特别好用...

我已经尝试了该`prettify()`方法中包含的格式化程序，但没有成功。

那么知道如何阻止javascript被转义吗？或者如何在输出之前取消它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T21:25:49.497

**编辑：**此错误已在 2013 年 5 月 30 日发布的 4.2.0 中修复。

```
>>> import bs4
>>> bs4.__version__
'4.2.0'
>> s = """<DOCTYPE html>
... <html>
... <body>
... <h1>Test page</h1>
... <script type="text/javascript">
... //<!--
... if (4 > 3 && 3 < 4) {
...     console.log("js working");
... }
... //-->
... </script>
... </body>
... </html>
... """
>>> soup = bs4.BeautifulSoup(s)
>>> print soup
<html><body><doctype html="">
<h1>Test page</h1>
<script type="text/javascript">
//<!--
if (4 > 3 && 3 < 4) {
    console.log("js working");
}
//-->
</script>
</doctype></body></html> 
```

如果您因某种原因无法使用 < 4.2，我找到了这个 StackOverflow[答案](https://stackoverflow.com/a/3225671/58371)。在我看来，你可以做类似的事情：走树，`prettyify()`在所有标签上使用，除了`script`你以某种方式发出而不转义的标签。

# asp.net-mvc - 缺少 NinjectDependancyResolver.cs

> ID：15946061
> 
> 赞同：0
> 
> 时间：2013-04-11T10:08:21.850
> 
> 标签：asp.net-mvc, dll, ninject

我正在做一个在 dotnet 中使用 mvc 的项目。我必须开发给我的剩余代码。我复制了主代码并尝试运行它；当我尝试使用断点运行时出现此错误。这是我得到的错误。我用谷歌搜索，我得到一个答案说刷新参考我也这样做了，但它没有帮助。可能是什么问题。

这是我得到的错误，来自网络的屏幕截图。

[http://www.google.co.in/imgres?um=1&sa=N&hl=en&biw=1024&bih=621&tbm=isch&tbnid=MuZffsIBSR3nhM:&imgrefurl=https://stackoverflow.com/questions/8506618/no-source-available- error-with-ninject-when-debugging-code&docid=yGGstg8JC99hAM&imgurl=http://i.stack.imgur.com/nlWbT.png&w=1107&h=480&ei=GotmUf2yNYWKrgeam4DYBw&zoom=1&ved=1t:3588,r:3,s:0, i:91&iact=rc&dur=1437&page=1&tbnh=148&tbnw=341&start=0&ndsp=12&tx=91&ty=96](http://www.google.co.in/imgres?um=1&sa=N&hl=en&biw=1024&bih=621&tbm=isch&tbnid=MuZffsIBSR3nhM:&imgrefurl=https://stackoverflow.com/questions/8506618/no-source-available-error-with-ninject-when-debugging-code&docid=yGGstg8JC99hAM&imgurl=http://i.stack.imgur.com/nlWbT.png&w=1107&h=480&ei=GotmUf2yNYWKrgeam4DYBw&zoom=1&ved=1t:3588,r:3,s:0,i:91&iact=rc&dur=1437&page=1&tbnh=148&tbnw=341&start=0&ndsp=12&tx=91&ty=96)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:30:21.723

您确定您在 Web 项目引用中对 Niniject 的引用正常吗？因为似乎代码的作者使用了 ninject 的源（放置在 c:\projects\ninject\...）而不是库或 nuget 包（我不知道为什么）。尝试删除该引用并将 Ninject 添加为 nuget 包，看看会发生什么。

# android - 如何在不使用时间选择器的情况下将当前时间设置为 android 中的编辑文本框？

> ID：15946065
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:08:40.777
> 
> 标签：android, time

谁能告诉我如何在不使用时间选择器的情况下在 android 的编辑文本框中设置当前时间。

```
edt_time=(EditText) findViewById(R.id.editText_time);
Time t = new Time();
java.text.Time tf =  android.text.format.Time.getCurrentTimezone(getApplicationContext());
edt_time.setText(tf.format(t)); 
```

请提出建议。

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T10:18:04.653

```
Calendar c = Calendar.getInstance();
int mHour = c.get(Calendar.HOUR);
int mMinute = c.get(Calendar.MINUTE);
int mSeconds = c.get(Calendar.SECONDS);

EditText edt_time=(EditText) findViewById(R.id.editText_time);
edt_time.setText(mHour +":"+ mMinute +:+ mSeconds); 
```

同样，您还可以获得年、月、日等。

上面的代码必须有效，但无论如何尝试一下。

```
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm:ss");
String currentTime = sdf.format(new Date());
EditText edt_time=(EditText) findViewById(R.id.editText_time);
edt_time.setText(currentTime); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:10:45.410

```
long time = System.currentTimeMillis(); // current time in miliseconds, conver it however you want 
```

然后放入editText，

```
editText.setText(String.valueOf(time)); 
```

# javascript - 如何删除竖线“|” 从 HTML 使用 replace()

> ID：15946066
> 
> 赞同：0
> 
> 时间：2013-04-11T10:08:42.827
> 
> 标签：javascript, regex

我已经有一段时间遇到这个问题了：

```
v = jQuery("span.count").html().replace(/\(|\)/g, "");
jQuery("span.count").html(v); 
```

我在 SO 上发现了这个，它对括号很有用，但我似乎无法让它与垂直条一起工作`|`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T10:10:35.543

`|`是在正则表达式中用作“或”的字符。您的正则表达式所说的是“用空字符串替换任何*（无）*或*（无）的东西”。*转义`|`使用反斜杠，如下所示：

```
string.replace(/\|/g, "");
//              ^ Escape it! 
```

# python - python线程块

> ID：15946075
> 
> 赞同：21
> 
> 时间：2013-04-11T10:09:09.153
> 
> 标签：python, python-multithreading

我正在尝试编写一个在循环中创建新线程的程序，并且不等待它们完成。据我了解，如果我在线程上使用 .start() ，我的主循环应该继续，另一个线程将同时关闭并完成它的工作

但是，一旦我的新线程启动，循环就会阻塞，直到线程完成。我是否误解了线程在 python 中的工作方式，或者我正在做一些愚蠢的事情。

这是我创建新线程的代码。

```
def MainLoop():
    print 'started'
    while 1:
        if not workQ.empty():
            newThread = threading.Thread(target=DoWorkItem(), args=())
            newThread.daemon = True
            newThread.start()
        else:
            print 'queue empty' 
```

谢谢大家

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-11T10:12:52.843

这将调用该函数并将其*结果*传递为`target`：

```
threading.Thread(target=DoWorkItem(), args=()) 
```

去掉括号以传递函数对象本身：

```
threading.Thread(target=DoWorkItem, args=()) 
```

# javascript - 将 javascript 输出保存为文本文件

> ID：15946084
> 
> 赞同：3
> 
> 时间：2013-04-11T10:09:41.887
> 
> 标签：javascript

这是我的 xml 文件：-

```
<child_2 entity_id="2" value="Root" parent_id="1">
    <child_4 entity_id="4" value="Activities" parent_id="2">
        <child_10066 entity_id="10066" value="Physical1" parent_id="4">
            <child_10067 entity_id="10067" value="Cricket" parent_id="10066">
                <child_10068 entity_id="10068" value="One Day" parent_id="10067"/>
            </child_10067>
        </child_10066>
        <child_10069 entity_id="10069" value="Test2" parent_id="4"/>
        <child_10070 entity_id="10070" value="Test3" parent_id="4"/>
        <child_10071 entity_id="10071" value="Test4" parent_id="4"/>
        <child_10072 entity_id="10072" value="Test5" parent_id="4"/>
        <child_5 entity_id="5" value="Physical" parent_id="4"/>
    </child_4>
</child_2> 
```

这是我的 javscript：-

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
var xml;
$.get(
    "region.xml",  
    function(data)
    { xml=data; },
    "html"
);
function get_list(){
    xmlDoc = $.parseXML( xml ),
    $xml = $( xmlDoc ),
    $title = $xml.find('[entity_id="'+$('#select').val()+'"]');
    $nodes = $title.find('*');
    var result='';
    $nodes.each(function(){
        result += $(this).attr('entity_id');
        result += ',';
    });
    $("#result").html(result);
}
</script>
<input type="text" id="select">
<input type="button" name="button" value="Search" onclick="get_list()" >
<div id="result">
</div> 
```

在这里，我尝试获取所有 xml 属性值，我在它们上取得了成功，现在我想将此输出保存为`textfile`
如何可能
，请帮助我解决这个问题...
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:21:15.330

一种 HTML5 方法：

```
window.URL = window.URL || window.webkitURL;

function download(/*string*/dataToDownload, /*string*/filename) {
     var a = document.createElement('a');
     var blob = new Blob(dataToDownload, {'type':'application\/octet-stream'});
     a.href = window.URL.createObjectURL(blob);
     a.download = filename;
     a.click();
}; 
```

您还可以使用[Downloadify](https://github.com/dcneiner/Downloadify)库，它使用 flash 触发下载并允许用户命名文件。

或者最常见和最安全的方法是将数据发送到 php 并返回正确的标题，这将触发下载并允许用户命名文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:11:19.017

看看

1.  [HTML5的文件系统API](http://www.html5rocks.com/en/tutorials/file/filesystem/)

2.  [文件编写器 API 链接](http://www.w3.org/TR/file-writer-api/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:13:46.317

如果您想要一个跨浏览器工作的解决方案，最好将数据发布到服务器，例如 PHP 文件。然后，这个 php 文件可以“提供”要下载的文件。

请参阅此问题以开始：[如何使用 PHP 强制文件下载](https://stackoverflow.com/questions/7263923/how-to-force-file-download-with-php)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T10:13:18.273

在客户端写入文件不仅非常复杂（使用 ActiveX Scripting.FileSystemObject），而且出于安全原因也是一种不好的做法。

# xml - 使用 XSLT 比较两个 XML 文件时选择较低的值

> ID：15946085
> 
> 赞同：0
> 
> 时间：2013-04-11T10:09:43.603
> 
> 标签：xml, xslt, xslt-1.0

我有两个不同的 XML 文件。每一个都指一个 CD 目录。我正在做的是使用 XSLT 生成一个表，其中每个目录都出现在一个列中。这使用户可以轻松地比较目录。

我现在的想法是，在某些属性（如价格）的情况下，检测哪些比较的 CD 价格最低，并将单元格的背景颜色更改为绿色。

这是我不知道该怎么做的地方。当所有这些值都包含在同一个 XML 文件中时，我可以选择最低价格值，但如果我使用不同的 XML 文件，我就不能这样做。

以下是要比较的两个示例 XML 文件： 1.-

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<catalog>
<cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
</cd>
</catalog> 
```

2.-

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<catalog>
<cd>
    <title>Hide your heart</title>
    <artist>Bonnie Tyler</artist>
    <country>UK</country>
    <company>CBS Records</company>
    <price>7.30</price>
    <year>1988</year>
</cd>
</catalog> 
```

这是我的 XSLT 代码，用于生成现在的比较表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:csw="http://www.opengis.net/cat/csw/2.0.2">
<xsl:template match="/">
 <html>
  <head>
   <link rel="stylesheet" type="text/css" href="..\..\GeossBack\compara.css"/>
  </head>
  <body>
  <h1>Comparison</h1>
   <table border="0" cellspacing="3">
    <tr>
     <td width="250">
      CD Artist
     </td>
     <xsl:for-each select="/csw:GetRecordByIdResponse/catalog">
      <td width="250">
    <xsl:value-of select="cd/artist"/>
      </td>
     </xsl:for-each>
    </tr>
    <tr>
     <td width="250">
    CD Price
         </td>
     <xsl:for-each select="/csw:GetRecordByIdResponse/catalog">
      <td width="250">
    <xsl:value-of select="cd/price"/>
      </td>
     </xsl:for-each>
    </tr>
    <tr>
     <td width="250">
       CD Year              
     </td>
     <xsl:for-each select="/csw:GetRecordByIdResponse/catalog">
      <td width="250">
       <xsl:value-of select="cd/year"/>
      </td>
     </xsl:for-each>
    </tr>
   </table>
  </body>
 </html>
</xsl:template>
</xsl:stylesheet> 
```

# regex - 多行正则表达式模式以删除空行

> ID：15946086
> 
> 赞同：0
> 
> 时间：2013-04-11T10:09:44.107
> 
> 标签：regex, vim, multiline, blank-line

```
/* Comments for code... */

if (...) {

} 
```

我需要删除评论和之间的空白行`if`：

```
/* Comments for code... */
if (...) {

} 
```

我目前正在使用以下正则表达式：

```
/\*\/\ze\n^$\n[ ]*if 
```

*   `\*//`: 评论结束 ( `*/`)
*   `^$`: 前空行`if`
*   `[ ]*if`: 空格和一个`if`

在我使用`\ze`时，光标最终指向`*/`. 我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:03:04.450

试试这一行：

```
%s#\*/[\s\r\n]*#*/\r# 
```

它会让

```
/* Comments for code... */

if (...) {

}
/* Comments for code... */

else{

} 
```

进入：

```
/* Comments for code... */
if (...) {

}
/* Comments for code... */
else{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:36:12.917

为什么不也使用`\zs`。

这对我有用：

```
:%s/\*\/\zs\n*[ ]*\zeif/\r/g 
```

解释：

```
%s - substitution on the entire file
\*\/ - end of comment
\zs - start of match
\n*[ ]* - eol and spaces
\ze - end of match
if - followed by if
/\n/ - replacement
g - global regex (multiline) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:57:47.240

```
:g+*/+j 
```

更快，但可能太宽泛了。

您可以执行以下操作：

```
:g+*/\_\s*if+j 
```

# sql-server - 查找最大值并显示 SQL 服务器中不同字段的对应值

> ID：15946089
> 
> 赞同：30
> 
> 时间：2013-04-11T10:09:49.127
> 
> 标签：sql-server, max

我有一个包含城市数据的表格，其中包括与我的问题无关的名称、人口和其他字段。

```
ID      Name    Population
1       A       45667   
2       B       123456  
3       C       3005    
4       D       13769 
```

要找到最大人口是基本的，但我需要一个结果表，其中一列中包含最大人口，另一列中包含相应城市的名称

```
Population      Name    
123456          B 
```

我看过[类似](https://stackoverflow.com/questions/376518/how-to-get-the-record-of-a-table-who-contains-the-maximum-value)的问题，但由于某种原因，答案看起来过于复杂。有没有办法用 1 行或 2 行编写查询？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-11T10:13:24.867

有几种方法可以做到这一点：

`WHERE`子句中的过滤器：

```
select id, name, population
from yourtable
where population in (select max(population)
                     from yourtable) 
```

或子查询：

```
select id, name, population
from yourtable t1
inner join
(
  select max(population) MaxPop
  from yourtable
) t2
  on t1.population = t2.maxpop; 
```

或者你可以使用`TOP WITH TIES`. 如果没有关系，那么您可以删除`with ties`. 这将包括具有相同总体值的任何行：

```
select top 1 with ties id, name, population
from yourtable
order by population desc 
```

由于您使用的是 SQL Server，因此您还可以使用排名函数来获得结果：

```
select id, name, population
from
(
  select id, name, population,
    row_number() over(order by population desc) rn
  from yourtable
) src
where rn = 1 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/92998/9)。

作为排名功能的旁注，您可能想要使用`dense_rank()`而不是`row_number()`. 然后，如果您有多个城市具有相同的人口，您将获得两个城市名称。（见[演示](http://www.sqlfiddle.com/#!3/e9df7/4)）

# java - Cisco WLC 自定义注销页面

> ID：15946099
> 
> 赞同：1
> 
> 时间：2013-04-11T10:10:21.833
> 
> 标签：java, networking, cisco

我正在使用需要使用自定义注销页面的 Cisco WLC。谁能帮助我或指导我这个注销页面的代码应该是什么以及如何在 Cisco WLC 中配置这个页面？

如果我们在任何地方找到使用此自定义注销页面的任何 Cisco WLC，我们如何获取用于此目的的特定文件？

提前致谢。

# asp.net - 我的 web.config 文件和角色管理器设置有什么问题？IIS6.0 和 SQL Server 2005 不会让我进入

> ID：15946101
> 
> 赞同：0
> 
> 时间：2013-04-11T10:10:26.747
> 
> 标签：asp.net, sql-server-2005, web-config, asp.net-membership, iis-6

我开发了一个在我的本地 IIS7 服务器上运行良好的应用程序。我可以使用本地网络上的另一台机器登录它并访问所有区域。

在使用 IIS6.0 和 SQL Server 2005 将其部署在 SBS2003 服务器上后，我遇到了访问问题。我已经对此进行了排序，现在我可以加载 Web 应用程序并登录。当我想访问需要身份验证的页面时，问题就开始了。即使我已登录，我也无法加载该页面。不用说，这也适用于需要 RBA 的页面。

我得到的当前错误消息是：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

如果您要通过告诉我问题的答案在错误消息中来回答这个问题，那么请首先记住我可以登录到我的应用程序。我显然与数据库有联系。在那之后，如果答案仍然很简单，请随时嘲笑我。

这是我的 web.config：

```
<?xml version="1.0"?>

<configuration>
  <connectionStrings>
    <add name="ZenIntranetConnectionString" connectionString="Data Source=127.0.0.1;Database=ZenIntranet;Integrated Security=True;"
      providerName="System.Data.SqlClient" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime maxRequestLength="8192" executionTimeout="360"/>
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="2880" />
    </authentication>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ZenIntranetConnectionString"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ZenIntranetConnectionString" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="true" defaultProvider="ZenRoleProvider">
      <providers>
        <clear/>
        <add name="ZenRoleProvider" type="BusinessClasses.ZenRoleProvider, BusinessClasses" 
        connectionStringName="ZenIntranetConnectionString"
            applicationName="/" />
      </providers>
    </roleManager>

  </system.web>

  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

谢谢你的帮助。我真的很需要它。

PS我只是在`<roleManager>`标签中添加了连接字符串名称。我以前从未需要它，我的本地 web.config 似乎也不需要它。我暂时把它留在了他们的地方，因为我看到其他人说这是必要的。无论如何，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-08T00:45:45.667

问题是用于数据类层中的数据集设计器的硬编码连接字符串（由 VS 生成）。

我可以正常登录，因为主页没有加载任何数据对象，但只要我需要 dataset.xsd 文件中的某些内容，应用程序就会使用 DAL 中的硬编码连接字符串（它仍然有我的开发服务器连接字符串）。在对`connectionString`.

在旁注中，我认为 web.config 应该覆盖它，但它没有。

# paypal - 将 Authnet ARB 用户导出到 Paypal 定期付款

> ID：15946105
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:10:35.930
> 
> 标签：paypal, authorize.net

有什么方法可以将我的 Authnet ARB 订阅用户无缝导出到 Paypal 定期付款？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:30:21.560

不，没有。您没有用于创建新订阅的信用卡信息。

# r - 检测列中的不同级别

> ID：15946110
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:10:48.627
> 
> 标签：r

我确实有一列有大约 80k 个条目，它只有 22 个不同的级别（染色体的数量）。**R**中是否有任何快速技巧可以找出一个级别在哪个位置变为下一个......以便找出第1号染色体在哪一行变为第2号染色体（单个染色体的所有条目都列在一起）？

我的数据如下所示：

```
chr number  marker name (SNP) 
1              rs...
1              rs...
.
.
2 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:20:07.793

检查是否为`diff`非零。这将返回一个逻辑向量，`TRUE`当连续值不同时。将其包裹起来`which`以获取数字索引。

```
(x <- factor(sample(c("a", "b"), 15, replace = TRUE)))
# [1] a a b b a a b b b b b a b a a
# Levels: a b
diff(as.integer(x)) != 0
# [1] FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE
which(diff(as.integer(x)) != 0)
# [1]  2  4  6 11 12 13 
```

如果您的所有染色体值都组合在一起，您可以使用 找到每个级别的第一个实例`duplicated`。

```
(x2 <- factor(rep(c("a", "b", "c"), times = c(3, 4, 6))))
# [1] a a a b b b b c c c c c c
# Levels: a b c
!duplicated(x2)
# [1]  TRUE FALSE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE FALSE FALSE
which(!duplicated(x2))
# [1] 1 4 8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:23:52.277

您可以从R中使用`unique`和：`match``base`

```
data <- c(rep("a",10),rep("b",5),rep("c",2),rep("d",10))
match( unique(data) , data )
#[1]  1 11 16 18 
```

*Match 返回其第一个参数的第一个*匹配项在其第二个参数中的位置的向量。之所以有效，是因为您的所有染色体条目都列在了一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:16:59.520

您可以`rle`为此使用（如果我的问题正确）：

```
x <- rep(LETTERS[1:22], each = 3)
x
# [1] "A" "A" "A" "B" "B" "B" "C" "C" "C" "D" "D" "D" "E" "E" "E" "F" "F" "F" "G" "G" "G" "H" "H" "H" #"I" "I" "I" "J" "J" "J" "K" "K" "K" "L" "L" "L" "M" "M" "M" "N" "N" "N" "O" "O" "O" "P" "P" "P" #"Q" "Q" "Q" "R" "R" "R" "S" "S" "S" "T" "T" "T" "U" "U" "U" "V" "V" "V"
rles <- rle(x)
cumsum(rles$lengths)
# [1]  3  6  9 12 15 18 21 24 27 30 33 36 39 42 45 48 51 54 57 60 63 66 
```

# typo3 - Typo3 从另一个扩展中获取内容

> ID：15946113
> 
> 赞同：1
> 
> 时间：2013-04-11T10:11:10.857
> 
> 标签：typo3, typoscript, tt-news

我有一个名为“mbl_newsevent”的扩展，它与 tt_news 一起使用。newsevent ext 有他自己的 TS，如果我启用它，它会在每个新闻上生成一个注册按钮。现在 newesevent ext 生成一个带有包含当前 tt_news id 的 url 的按钮。

TS 配置部分：

```
plugin.tt_news.mbl_newsevent {
    registrationLink_typolink {
        title.data = LLL:EXT:mbl_newsevent/locallang.xml:registerLinkLabel
        parameter = {$powermail.plugin.pid}
        parameter.override.field = tx_mblnewsevent_regurl
        additionalParams.field = uid
        additionalParams.intval = 1
        additionalParams.wrap = &tx_powermail_pi1[eventUid]=|
            #this returns the correct ID of tt_news for example 99
    }
} 
```

但现在我需要这个 eventUid 在我的基本 TS 的另一个位置。我的第二个菜单需要这个 eventUid 作为参数

基本 TS：

```
2 = TMENU
2 {
    wrap = <ul class="naviMainLevel2"> | </ul>

    NO {
        wrapItemAndSub = <li> | </li>
    }
    ACT = 1
    ACT {
        wrapItemAndSub = <li class="active"> | </li>                
            additionalParams.data = GP:tx_ttnews|tt_news
            additionalParams.intval = 1
            #Here is the part where i need the id from tt_news.mbl_newsevent
                #atm it returns &tx_events_pi1[newsUid]=0 correct id would be for example 99
                additionalParams.wrap = &tx_events_pi1[newsUid]=|
    }
    CUR = 1
    CUR < .ACT

} 
```

我如何访问另一个数据库（扩展）以获得相同的 ID？

```
temp.xyz = RECORDS
temp.xyz {
    tables = tt_news.mbl_newsevent 
    ...
} 
```

# python - python中如何使用Turtle图形绘制一系列平行线？

> ID：15946118
> 
> 赞同：-2
> 
> 时间：2013-04-11T10:11:19.353
> 
> 标签：python, lines

我如何在 python 中通过海龟绘制一系列（例如：5）平行线？

```
def parallel_lines(number):
    #Help me write the body of the function
    #number is the number of lines for drawing 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:29:07.200

试试这个代码

```
from turtle import *
#we make an object from class Turtle
alex=Turtle()
def parallel_lines(number):
    #number is number of lines
    with_s=alex.window_width()
    height_s=alex.window_height()
    alex.setheading(90)
    alex.pu()
    #for fill all screen and equall distance below line needed
    alex.setposition(with_s/-2,height_s/-2)
    for i in range(1,number+1):
        alex.pd()
        alex.fd(height_s)
        alex.pu()
        alex.setposition(with_s/-2+i*(with_s/(number-1)),height_s/-2)

parallel_lines(5) 
```

`output`边缘是 2 行，屏幕是 3 行

# php - 如何为 PHP 创建的动态 html 设置样式

> ID：15946122
> 
> 赞同：-5
> 
> 时间：2013-04-11T10:11:27.610
> 
> 标签：php, html, css

我的 php 页面将生成一个动态的 html。

以下是输出；

```
<label class="required">suject *</label> 
```

不幸的是我无法编辑html

现在我需要用红色显示“*”。

我如何为此编写css？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:21:48.740

做这件事有很多种方法：

如果您有权访问 PHP 源代码，那么您可以相应地修改输出，也许用`<span>`标签包装 * 并相应地设置样式。

或者，你可以使用 JS 来做同样的事情：

```
$(document).ready(function() {
    // Loop through all labels with required class
    $('label.required').each(function() {
        $(this).html($(this).html().replace(/\*/g, '<span class="asterisk">*</span>'));
    });

}); 
```

在你的 CSS 中，你可以用任何你想要的方式来设置它：

```
.required .asterisk {
    color: red;
} 
```

在这里看小提琴 - [http://jsfiddle.net/teddyrised/JTesR/](http://jsfiddle.net/teddyrised/JTesR/)

**更好：使用 CSS**

这是为了尽可能在语义上正确而编写的 - 您可以使用 JS 删除 * 字符（或更改 PHP 代码），但使用伪类将其添加回标签元素：

```
label.required:after {
    content: '*';
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T10:15:40.133

CSS 允许您选择元素（以及有限数量的伪元素，例如`:first-line`）。

没有办法选择“最后一个字符”、“匹配的字符`*`”或任何其他可以实现您想要的东西。

您必须修改 DOM。最简单的方法是修改生成它的 HTML。hacky 方法是在加载后使用 JavaScript 对其进行修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:34:18.553

这基于特里的回答：您可以简单地使用`:after`来模拟效果，并将该内容放在生成的 HTML 上。

```
label.required:after {
    content: '*';
    color: red;
    background:white;
    position: relative;
    left: -8px;
} 
```

[http://jsfiddle.net/x2KN7/](http://jsfiddle.net/x2KN7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T10:24:58.773

它不可能通过 CSS，但你可以用 javascript 做一些事情。如果此内容是在页面加载时生成的，那么您可以挂钩页面加载事件，获取对此元素的引用并进行更改。

```
<script type='text/javascript'>
document.onload = function (e) {
  var col = document.getElementsByClassName("required");
  for (var i=0;i<col.length;i++) {
    if (col[i].innerHTML == "subject *") {
      col[i].innerHTML = "subject&nbsp;<span style='color:red'>*</span>";
    }
  }  
}
</script> 
```

试试上面的方法，希望能解决你的问题。我使用过简单的 javascript，但如果您知道 javascript 库（YUI、dojo、jquery），那么您可以在 1 或 2 行中完成此操作。

# function - 如何在 Pascal 中将整数舍入到最接近的 1000？

> ID：15946123
> 
> 赞同：0
> 
> 时间：2013-04-11T10:11:28.187
> 
> 标签：function, variables, integer, pascal, rounding

我在 Pascal 中有一个整数变量。有没有我可以使用的函数可以将该值四舍五入到最接近的 1000，例如：

`RoundTo(variable, 1000);`

有没有这样的东西存在？还是我应该尝试使用另一种方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:14:15.480

此类问题的一般解决方案是在舍入前后缩放，例如

```
y = 1000 * ROUND(x / 1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:16:00.073

使用`RoundTo(variable, 3)`.

第二个参数指定要四舍五入的数字。因为你想四舍五入到 1000 = 10 ³你需要指定`3`，而不是`1000`。

的[文档`RoundTo`](http://docwiki.embarcadero.com/VCL/2010/en/Math.RoundTo)说：

> ```
> function RoundTo(const AValue: Extended; const ADigit: TRoundToEXRangeExtended): Extended; 
> ```
> 
> 使用“银行家的四舍五入”将浮点值四舍五入为指定的数字或十的幂。
> 
> ADigit 表示您希望 AValue 舍入到的 10 次方。它可以是从 –37 到 37（含）的任何值。
> 
> 以下示例说明了 RoundTo 的使用：
> 
> ```
> RoundTo(1234567, 3) = 1235000 
> ```

*（我遗漏了与您的问题无关的部分）*

* * *

旁注：`RoundTo`使用银行家回合，所以`RoundTo(500, 3) = 0`和`RoundTo(1500, 3) = 2000`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:17:08.053

`x = 1000*(x/1000),`或者`x = x - (x mod 1000)`

# ios - 如何在情节提要中从一个视图转到另一个视图

> ID：15946124
> 
> 赞同：2
> 
> 时间：2013-04-11T10:11:29.073
> 
> 标签：ios, objective-c, storyboard

我创建登录页面包括（用户名和密码和登录按钮）

如果正确的用户和密码进入另一页，我想何时填写文本字段用户名和密码，如果错误，请给我一个警报。

这是我的代码：

```
#import "Detail.h"

@implementation ViewController
{
    NSString *name;
}
@synthesize Username,Password;

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (IBAction)Login:(id)sender {

    NSString *a = [[NSString alloc]initWithFormat:@"http://192.168.1.102/mamal/login.php?u=%@&p=%@",Username.text,Password.text];
    NSString *url = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:a]];
    NSLog(@"%@",url);
    if ([url isEqualToString:@"0"]) //this is wrong user & password
    {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"ERROR" message:@"WRONG" delegate:nil cancelButtonTitle:@"Dissmis" otherButtonTitles: nil];
        [alert show];
    }
    else
    {
        name = @"Mohammad";
    }
}
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([name isEqualToString:@"Mohammad"] , [[segue identifier] isEqualToString:@"Segue"]) {
        Detail *det = segue.destinationViewController;
    }
} 
```

但是工作！我只需要正确的用户名和密码进入下一页

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:44:22.950

您必须进行无触发的 segue 才能执行此操作。从情节提要中进行无触发转场，并在您的用户名和密码正确时触发它。

要创建无触发转场，请从场景底部场景停靠栏中的包含视图控制器图标开始控制并拖动转场。像往常一样拖动到目标场景，然后选择转场类型。选择 segue，然后在检查器中选择一个 segue 标识符。

然后调用方法 [self performSegueWithIdentifier:@"Identifier" sender:nil]; 当你的条件为真时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:18:55.080

如果您想使用 segue，我认为您错过了在设置名称的行之后实际执行 segue 的调用

```
name = @"Mohammed"        
[self performSegueWithIdentifier:@"mySegue" sender:self] 
```

作为“mySegue”你的故事板中的segue的标识符。

然后，您可能希望向新的 View Controller 发送名称。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"mySegue"]) {
        Detail *det = segue.destinationViewController;
        det.name = name;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:18:58.267

这里 AuditViewController 是 segue 名称

你需要在故事板中像这样调用类

```
[self performSegueWithIdentifier:@"AuditViewController" sender:self]; 
```

**编辑**

*检查条件*

```
- (IBAction)Login:(id)sender {

    NSString *a = [[NSString alloc]initWithFormat:@"http://192.168.1.102/mamal/login.php?u=%@&p=%@",Username.text,Password.text];
    NSString *url = [[NSString alloc]initWithContentsOfURL:[NSURL URLWithString:a]];
    NSLog(@"%@",url);
    if ([url isEqualToString:@"0"]) //this is wrong user & password
    {
        UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"ERROR" message:@"WRONG" delegate:nil cancelButtonTitle:@"Dissmis" otherButtonTitles: nil];
        [alert show];
    }
    else
    {
        name = @"Mohammad";
        if([name isEqualToString:@"Mohammad"])
            [self performSegueWithIdentifier:@"Segue" sender:self];
        //else
            //NSLog(@"Can not Login");
    }
} 
```

*prepareForSegue*方法调用

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"Segue"]) 
    {
        Detail *det = segue.destinationViewController;
    }
} 
```

# ruby-on-rails - 日期时间转 UTC 格式

> ID：15946126
> 
> 赞同：1
> 
> 时间：2013-04-11T10:11:32.257
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, datetime, ruby-on-rails-3.2

我有这种`DateTime`格式：

```
var1 = 2014-06-10T18:49:59+00:00 
```

我想转换成这种格式：

```
var2 = 2014-06-10 18:49:59 UTC 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:18:17.373

尝试：

```
Time.parse(var1.to_s).utc 
```

假设 var1 持有一个 DateTime 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:17:05.230

使用 strftime：

```
var2 = var1.strftime("%Y-%m-%d %H:%M:%S %z") 
```

有关更多格式字符串，请参阅 strftime 文档

[http://www.ruby-doc.org/core-2.0/Time.html](http://www.ruby-doc.org/core-2.0/Time.html)

# html - 相对表格单元格中的垂直对齐

> ID：15946131
> 
> 赞同：1
> 
> 时间：2013-04-11T10:11:54.500
> 
> 标签：html, css, cell, vertical-alignment, html-table

我想在不改变表格高度的情况下将包含“实际行”的第二个 td 元素垂直居中。

我已经尝试了很多方法来垂直对齐我的 td 元素，我希望你能帮助我解决这个问题。我不得不削减代码，否则它会太大所以我希望下面发布的代码就足够了。

```
echo '<table cellspacing="5%" cellpadding="14%" width="37.5%" rules="rows" border="1"   class="datatable" style="position:absolute;table-layout:fixed;left:12.42%;top:27%;border-right-width:6px;border-color:black">';
.
.
.

echo "<tr class='even'>";
$actualrow = $row['wav_nr'];
echo '<td nowrap border="0" align="left" valign="middle" style="position: relative;vertical-align: middle;">&nbsp;Wave ' . $actualrow . '</td>';

echo '<td nowrap align="center" valign="middle" style="position: relative;vertical-align: middle">' . (($actualrow * 10) - 9) . ' - ' . ($actualrow * 10) . '<br/>' . $moved_athletes . '</td>';
echo '<td nowrap align="center" valign="middle" style="vertical-align: middle;">' . date_create($row['wav_time'])->format('H:i') . '</td>';
echo '</tr>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:03:55.093

您可能想在第一行的 style 属性中尝试此操作：

```
text-align: center; 
```

这可能对某些人有所帮助，或者您可以使用以下标签包围该标签：

```
<center></center> 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:15:28.020

我认为您想要以下内容：

```
 echo '<td nowrap border="0" align="left" valign="middle" style="position: relative;vertical-align: top;">&nbsp;Wave ' . $actualrow . '</td>'; 
```

`vertical-align`将from的值更改`middle`为`top`。

除非您支持非常旧的浏览器，否则您可以省略`align`and `valign`。

# spring - SpringSecurity：无法删除 JSESSIONID

> ID：15946132
> 
> 赞同：6
> 
> 时间：2013-04-11T10:11:54.887
> 
> 标签：spring, spring-mvc, spring-security

我需要在用户注销时删除 cookie JSESSIONID。为此，我已将以下配置添加到我的安全配置中：

```
<http>
    <form-login login-page="/login*" authentication-failure-url="/login?try_again" />
    <http-basic />
    <logout logout-url="/logout" delete-cookies="JSESSIONID" />
    <session-management invalid-session-url="/timeout" />

    <intercept-url pattern="/login*"    access="IS_AUTHENTICATED_ANONYMOUSLY" />

    ...

</http> 
```

但是cookie没有被删除，而是被复制了：

![老饼干](https://i.stack.imgur.com/x29Oz.png)

![新饼干](https://i.stack.imgur.com/BOECL.png)

因此它不断将浏览器重定向到“/timeout” URL。

我尝试使用 Chrome 网络浏览器中的开发人员工具跟踪发生了什么，我发现这个 cookie 设置了这个响应头：

```
Set-Cookie:JSESSIONID=CFF85EA743724F23FDA0317A75CFAD44; Path=/website/; HttpOnly 
```

并使用此响应标头删除：

```
Set-Cookie:JSESSIONID=""; Expires=Thu, 01-Jan-1970 00:00:10 GMT; Path=/website 
```

我不确定，但似乎原因在于这些标题的“路径”字段：第一个指向“/website/”，第二个指向“/website”。

这是所描述的麻烦的原因吗？如果这不是原因（或不是唯一原因），那么其他原因是什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T10:18:38.723

您不需要`JSESSIONID`像这样显式删除 cookie。它不是由 Spring Security 管理的，而是由您的 servlet 容器管理的。Spring Security 将默认在注销时使 http 会话无效，这反过来会导致您的 servlet 容器删除`JSESSIONID`cookie。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-17T11:21:16.477

在我的情况下，即使[SecurityContextLogoutHandler](http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/web/authentication/logout/SecurityContextLogoutHandler.html)调用[session.invalidate()](https://tomcat.apache.org/tomcat-7.0-doc/servletapi/javax/servlet/http/HttpSession.html#invalidate()) `JSESSIONID`也不会被清除。它的价值保持不变。

我尝试使用`delete-cookies="JSESSIONID"`与 OP 相同的方式，我相信我遇到了同样的问题： 为 cookie 设置的路径是`/`最后没有 a 的上下文路径，所以它仍然不会被清除（它正在发出命令删除不存在的 cookie）。

我最终编写了自己`ProperCookieClearLogoutHandler`的 CookieClearingLogoutHandler ，除了为 cookie 设置上下文路径的行[：](https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/web/authentication/logout/CookieClearingLogoutHandler.html)

```
package com.testdomain.testpackage;

import java.util.Arrays;
import java.util.List;

import javax.servlet.http.Cookie;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.security.core.Authentication;
import org.springframework.security.web.authentication.logout.LogoutHandler;
import org.springframework.util.Assert;
import org.springframework.util.StringUtils;

public final class ProperCookieClearingLogoutHandler implements LogoutHandler {
    private final List<String> cookiesToClear;

    public ProperCookieClearingLogoutHandler(String... cookiesToClear) {
        Assert.notNull(cookiesToClear, "List of cookies cannot be null");
        this.cookiesToClear = Arrays.asList(cookiesToClear);
    }

    public void logout(HttpServletRequest request, HttpServletResponse response,
            Authentication authentication) {
        for (String cookieName : cookiesToClear) {
            Cookie cookie = new Cookie(cookieName, null);
            String cookiePath = request.getContextPath() + "/";
            if (!StringUtils.hasLength(cookiePath)) {
                cookiePath = "/";
            }
            cookie.setPath(cookiePath);
            cookie.setMaxAge(0);
            response.addCookie(cookie);
        }
    }
} 
```

然后我以这种方式设置[LogoutFilter](http://docs.spring.io/spring-security/site/docs/current/apidocs/org/springframework/security/web/authentication/logout/LogoutFilter.html)`spring-security.xml`的配置；

```
 <bean id="logoutFilter"
        class="org.springframework.security.web.authentication.logout.LogoutFilter">
        <constructor-arg name="logoutSuccessUrl" value="/views/login/login.xhtml?logout" />
        <constructor-arg>
            <list>
                <bean id="properCookieClearingLogoutHandler"
                    class="com.imatia.arpad.gplenos.authorization.ProperCookieClearingLogoutHandler">
                    <constructor-arg name="cookiesToClear">
                        <list>
                            <value>JSESSIONID</value>
                        </list>
                    </constructor-arg>
                </bean>
                <bean id="securityContextLogoutHandler"
                    class="org.springframework.security.web.authentication.logout.SecurityContextLogoutHandler">
                </bean>
            </list>
        </constructor-arg>
        <property name="filterProcessesUrl" value="/logout" />
    </bean> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-13T06:09:20.927

这就是我使会话无效的方式：

```
<security:logout invalidate-session="true" logout-success-url="/myapp/auth/login" logout-url="/myapp/auth/logout" /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-16T05:20:07.160

spring 提供的默认 CookieClearingLogoutHandler 由于 cookie 路径不同，无法清除 JSESSIONID。

您不应该更改 cookie 的路径。这将改变 cookie 的身份。如果 cookie 设置为 /foo 之类的路径，并且您将其更改为 /，则客户端将不再将更改后的 cookie 与原始 cookie 关联。cookie 由名称和路径标识。

因此，您需要实现一个自定义 CookieClearingLogoutHandler，如上述解决方案所示，即（ProperCookieClearingLogoutHandler.class），并将其设置为 spring security，如下面的代码所示。而不是使用 .deleteCookies("JSESSIONID","USER") 来添加 CookieClearingLogoutHandler默认。

Spring Security Java 配置：

```
@Configuration
@EnableWebSecurity
@ComponentScan(basePackages = "com.dentist.webapp")
public class SpringSecurityConfig extends WebSecurityConfigurerAdapter {

    @Autowired
    private SessionRegistry sessionRegistry;

    @Override
    protected void configure(HttpSecurity http) throws Exception {
        http.authorizeRequests().antMatchers("/resources/**", "/signup/*", "/about", "/login/*").permitAll().anyRequest()
                .authenticated()
                .and().formLogin()
                                 .loginPage("/login/form")
                                 .permitAll()
                .and().logout()
                              .invalidateHttpSession(true)
                              .clearAuthentication(true)
                             // .deleteCookies("JSESSIONID","USER")
                              .addLogoutHandler(new ProperCookieClearingLogoutHandler("JSESSIONID","USER"))
                              .permitAll()
                .and().sessionManagement()
                              .maximumSessions(1)
                              .maxSessionsPreventsLogin(true)
                              .expiredUrl("/accessDenied")
                              .sessionRegistry(sessionRegistry);

        }

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-29T07:20:12.073

如何在注销时删除很简单：您实现注销并将该代码放入方法中：

```
 HttpSession session = request.getSession(false); 
    if (session != null) { 
       session.invalidate();
    } 
```

无效的会话将使 cookie 无效。

但是我尝试过发现，当我关闭浏览器而不注销时，JSESSIONID cookie 仍然存在并且用户可以在打开浏览器时进入系统。

为了消除这种情况，我创建了一个过滤器，它也使登录时的会话无效，创建一个新会话，您的登录将从一开始就执行。

```
@WebFilter(urlPatterns = {"/login/*"}, description = "sessionKiller", filterName="sessionKiller")
public class SessionKillerFilter implements Filter{

    @Override
    public void init(FilterConfig arg0) throws ServletException {}

    @Override
    public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) throws IOException, ServletException {
        //kill older session and create new one on explicit login
        //this is to prevent user to login 2-ce
        //also this is prevention of re-connect on cookie base, when browser closed and then open
        HttpServletRequest  request = (HttpServletRequest)req;
        HttpSession session =   request.getSession(false);
        if(session!=null){
            session.invalidate();//old session invalidated
        }
        request.getSession(true);//new session created

        chain.doFilter(req, resp);
    }

    @Override
    public void destroy() {}
} 
```

# c# - 从 EPiServer 的 PageFiles 文件夹中获取目录

> ID：15946134
> 
> 赞同：3
> 
> 时间：2013-04-11T10:12:02.990
> 
> 标签：c#, episerver, episerver-6

我对 EPiServer PageFiles 系统的工作方式有一些想法。当我得到一个全局文件时，很容易得到正确的目录，我只写：

```
var dir = VirtualPathHandler.Instance.GetDirectory("~/Global/myfolder/", true) 
```

但是当我想从 PageFiles 文件夹中获取文件时，这对我来说很棘手。EPi 后台上传中的路径显示它是`PageFiles/myfolder`，但这不会返回任何文件夹

```
var dir = VirtualPathHandler.Instance.GetDirectory("~/PageFiles/myfolder/", true) 
```

现在我看到每个页面的文件保存不同，一页有路径`/PageFiles/361/myfolder/`，另一页有路径`/PageFiles/65/myfolder/`。我想做的就是能够写作

```
var dir = VirtualPathHandler.Instance.GetDirectory("~/PageFiles/myfolder/", true) 
```

但要获得我必须写的任何文件夹（例如）

```
var dir = VirtualPathHandler.Instance.GetDirectory("~/PageFiles/65/myfolder/", true) 
```

获取 PageFiles 文件夹以便我可以访问其中的所有文件的正确方法是什么？

顺便说一句，这是 EPiServer 6.0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T11:48:38.647

在您的 PageData 对象上尝试 GetPageDirectory 方法

[http://sdk.episerver.com/library/cms6/html/M_EPiServer_Core_PageData_GetPageDirectory.htm](http://sdk.episerver.com/library/cms6/html/M_EPiServer_Core_PageData_GetPageDirectory.htm)

# php - javascript中的php变量问题

> ID：15946144
> 
> 赞同：1
> 
> 时间：2013-04-11T10:12:31.910
> 
> 标签：php, javascript

我想在 php 中生成 javascript 循环，这给了我语法错误。这就是我想要的

```
var d1 = [
          [(new Date("01/06/2013")). getTime(),4],
          [(new Date("01/07/2013")). getTime(),0],
         ]; 
```

我想从 db 使它动态化。这是我尝试过的

```
var d1 = [
<?php
    while($rw = $oAppl->row($res))
    {
        $php_var = $rw['list_date_rent'];
        $php_var2 = $rw['rntval'];
?>            
    var php_var = "<?php echo $php_var; ?>";
    var php_var2 = "<?php echo $php_var2; ?>";
    [(new Date("+'"php_var"'+")). getTime(),php_var2],
<?php
    }
?>
]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:28:25.013

为什么不直接在 PHP 中构建数组，然后将`json_encode`其输出到 javascript 中呢？

```
$results = array();
while ($rw = $oAppl->row($res)) {
    $results[] = array(
        'new Date("' . $rw['list_date_rent'] , '").getTime()',
        $rw['rntval']
    );
}

?>
var d1 = <?php echo json_encode($results); ?>; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:19:23.743

您不想要尾随逗号，您需要回显完整的内容或将回显分成两部分 - 这可能更具可读性

```
var d1 = [];
  <?php
    $first = true;
    while($rw = $oAppl->row($res)) {     
      if (!$first) echo ","; else $first=false; ?>
      d1.push([ 
        new Date("<?php echo $rw['list_date_rent']; ?>").getTime(),
        <?php echo $rw['rntval']?>
      ]);
   <?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:16:53.363

你为什么使用 javascript 变量？

```
var d1 = [
<?php while($rw = $oAppl->row($res)) { ?>
  [(new Date("<?php echo $rw['list_date_rent']; ?>")). getTime(),<?php echo $rw['rntval']; ?>],
<?php } ?>
     ]; 
```

# android - 如何解决执行 doInBackground() 时发生 java.lang.RuntimeException 错误？

> ID：15946153
> 
> 赞同：1
> 
> 时间：2013-04-11T10:12:56.070
> 
> 标签：android, android-service, android-handler, android-internet

我是 android 开发的初学者，我在以下代码中遇到错误。我正在为 http 请求调用 asyn 方法，在此之前我正在检查 Wifi 或移动网络是否可用。当 Internet 连接可用时，我的服务运行良好，但在离线模式下，我会收到此类错误：“java.lang.RuntimeException：执行 doInBackground() 时发生错误”

```
04-09 19:44:33.057: E/AndroidRuntime(3127): FATAL EXCEPTION: AsyncTask #1
04-09 19:44:33.057: E/AndroidRuntime(3127): java.lang.RuntimeException: An error      occured while executing doInBackground()
04-09 19:44:33.057: E/AndroidRuntime(3127):     at   android.os.AsyncTask$3.done(AsyncTask.java:278)
04-09 19:44:33.057: E/AndroidRuntime(3127):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-09 19:44:33.057: E/AndroidRuntime(3127):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-09 19:44:33.057: E/AndroidRuntime(3127):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-09 19:44:33.057: E/AndroidRuntime(3127):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-09 19:44:33.057: E/AndroidRuntime(3127):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-09 19:44:33.057: E/AndroidRuntime(3127):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-09 19:44:33.057: E/AndroidRuntime(3127):     at java.lang.Thread.run(Thread.java:856)
04-09 19:44:33.057: E/AndroidRuntime(3127): Caused by: java.lang.NullPointerException
04-09 19:44:33.057: E/AndroidRuntime(3127):     at com.zoomi_zdc.SERVICES.MyServiceProf$myPostData.doInBackground(MyServiceProf.java:129)
04-09 19:44:33.057: E/AndroidRuntime(3127):     at com.zoomi_zdc.SERVICES.MyServiceProf$myPostData.doInBackground(MyServiceProf.java:1)
04-09 19:44:33.057: E/AndroidRuntime(3127):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
04-09 19:44:33.057: E/AndroidRuntime(3127):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305) 
```

下面是 MyServiceProfile 代码。在这段代码中，我首先检查 Internet 连接，然后如果用户离线，则数据保存在本地数据库中并在 Internet 连接期间自动更新我们的服务器

```
public class MyServiceProf extends Service {
Timer t = new Timer();
public TimerTask mTimerTask;
private ConnectivityManager connectivityManager;
final Handler handler = new Handler();
private int nCounter = 0;
Context context = this;

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

public void onCreate() {

}

@Override
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    mTimerTask = new TimerTask() {
        public void run() {
            handler.post(new Runnable() {
                public void run() {
                    nCounter++;
                    connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

    final android.net.NetworkInfo wifi = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

    final android.net.NetworkInfo mobile = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

    if (wifi.isAvailable()) {

        mTimerTask.cancel();

        try{
        new myPostData().execute();
        }catch (Exception e) {
            // TODO: handle exception
        }

    } else if (mobile.isAvailable()) {

        mTimerTask.cancel();
        try{

            new myPostData().execute();

        }catch (Exception e) {
                // TODO: handle exception
        }

    } else {

    //  Toast.makeText(getBaseContext(),"You are trying to access online content but Internet Connection has been disconnected!!!",Toast.LENGTH_SHORT).show();

    }

        }
    });

    Log.d("TIMER", "TimerTask run");
        }
    };

    // public void schedule (TimerTask task, long delay, long period)
    t.schedule(mTimerTask, 0, 10000); //

}

@Override
public void onDestroy() {
    // TODO Auto-generated method stub
    try {
        t.cancel();

        handler.removeCallbacks(mTimerTask);

    } catch (Exception e) {
        // TODO: handle exception
    }

//  Toast.makeText(getApplicationContext(), " Stopped", Toast.LENGTH_SHORT).show();
}

public class myPostData extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();
    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

        HttpProfilePost proupdate = new HttpProfilePost();

        String mMyprofileImagename[] = DatabaseHalper.mStudentImgNm.get(0).split("/");

        File sdcardPathofprofileimg = new File(Environment.getExternalStorageDirectory()+"/data/.System/MProfile/" +mMyprofileImagename[1]);

        Bitmap mBitmapimageofMyProfilepic = BitmapFactory.decodeFile(sdcardPathofprofileimg.getAbsolutePath());

        DatabaseHalper dbhelper = new DatabaseHalper(getBaseContext());
        dbhelper.Get_ZoomiProfile_Data();

        proupdate.HttpClient_Profile_Post(context,DatabaseHalper.mStudentRollNo.get(0),
                DatabaseHalper.mStudentName.get(0),
                DatabaseHalper.mStudentAddress.get(0),
                DatabaseHalper.mStudentEmrg_Person.get(0),
                DatabaseHalper.mStudentEmrg_No.get(0),
                DatabaseHalper.mStudentEmail.get(0),
                DatabaseHalper.mStudentBloodGrp.get(0),
                DatabaseHalper.mStudentMobileno.get(0),
                mBitmapimageofMyProfilepic);

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
    }
} 
```

}

我对服务器 Http 链接代码的更新如下：

```
public class HttpProfilePost {
private JSONObject jsonResponse;
private Bitmap myPic;
private ByteArrayOutputStream bos;
private byte[] data;
/*private ByteArrayBody bab;
private MultipartEntity reqEntity;*/
private InputStream is;
private SharedPreferences mPref;
private SharedPreferences.Editor mEditor;
private Context mContext;
private HttpResponse httpResp;
List<String> a;
private String image1,image2,image3,image4,image5,image6,image7,image8,image9,image10;

//private String WEBSERVICE_NAME = "Profile_post.aspx";

public JSONObject HttpClient_Profile_Post(Context c,String stud_rollno, String stud_name,String stud_address, String stud_emrgperson, String stud_emrgcontact, String stud_email, String stud_bloodgrp, String stud_mobileno, Bitmap myPhoto){

    mContext=c;
    mPref = PreferenceManager.getDefaultSharedPreferences(mContext);

    HttpClient httpClient = new DefaultHttpClient();

    String mStudentUserid= mPref.getString("Userid", "" );
    String myImage[] = DatabaseHalper.mStudentImgNm.get(0).split("/");
    String profileimagepath = myImage[0];

    stud_name = URLEncoder.encode(stud_name);
    stud_address = URLEncoder.encode(stud_address);
    stud_emrgperson = URLEncoder.encode(stud_emrgperson);
    stud_emrgcontact = URLEncoder.encode(stud_emrgcontact);
    stud_email = URLEncoder.encode(stud_email);
    stud_bloodgrp = URLEncoder.encode(stud_bloodgrp);

//  HttpPost mURL = new HttpPost("http://10.160.0.18:86/Service.svc/testpersondatapost?uid="+mStudentUserid+"&stdname="+stud_name+"&stdmail="+stud_email+"&Add="+stud_address+"&Qual=xyz&Qual_add=abc&pro_expert=abc&achieve=abc&Cont_no="+stud_mobileno+"&othr1=abc&othr2=abc&othr3=abc&proimgpath="+profileimagepath+"&UT=Student&Emer_ContPer="+stud_emrgperson+"&Emer_Cont_no="+stud_emrgcontact+"&Bld_Grp="+stud_bloodgrp+"&Addi_Notes"+;
    String mURL = "http://webservice.zoomi.in/Service.svc/testpersondatapost?uid="+mStudentUserid+"&stdname="+stud_name+"&stdmail="+stud_email+"&Add="+stud_address+"&Qual=xyz&Qual_add=abc&pro_expert=abc&achieve=abc&Cont_no="+stud_mobileno+"&othr1=abc&othr2=abc&othr3=abc&proimgpath="+profileimagepath+"&UT=Student&Emer_ContPer="+stud_emrgperson+"&Emer_Cont_no="+stud_emrgcontact+"&Bld_Grp="+stud_bloodgrp+"&Addi_Notes=abc";

//  String mURL = "http://webservice.zoomi.in/Service.svc/testpersondatapost?uid="+mStudentUserid+"&stdname="+stud_name+"&stdmail="+stud_email+"&Add="+stud_address+"&Qual=xyz&Qual_add=abc&pro_expert=abc&achieve=abc&Cont_no="+stud_mobileno+"&othr1=abc&othr2=abc&othr3=abc&proimgpath="+profileimagepath+"&UT=Student&Emer_ContPer="+stud_emrgperson+"&Emer_Cont_no="+stud_emrgcontact+"&Bld_Grp="+stud_bloodgrp+"";
//  String mURL = "http://10.160.0.18:86/Service.svc/testpersondatapost?uid="+mStudentUserid+"&stdname="+stud_name+"&stdmail="+stud_email+"&Add="+stud_address+"&Qual=xyz&Qual_add=abc&pro_expert=abc&achieve=abc&Cont_no="+stud_mobileno+"&othr1=abc&othr2=abc&othr3=abc&proimgpath="+profileimagepath+"&UT=Student&Emer_ContPer="+stud_emrgperson+"&Emer_Cont_no="+stud_emrgcontact+"&Bld_Grp="+stud_bloodgrp+"";

    HttpPost postrequest = new HttpPost(mURL);

    MultipartEntity reqEntity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

        FileBody fileBody = new FileBody(new File(Environment.getExternalStorageDirectory()+"/data/.System/MProfile/", myImage[1]));// ,"application/octet-stream");
        reqEntity.addPart("fileContents", fileBody);

        try {
            postrequest.setEntity(reqEntity);

            // Execute the request "POST"
            httpResp = httpClient.execute(postrequest);

            /*HttpResponse response = null;*/
            // Check the status code, in this case "created"

            //Log.v("App", "Created");

            int code = httpResp.getStatusLine().getStatusCode();

            System.out.println("Response Code : "+code);
            /*if (((HttpResponse) response).getStatusLine().getStatusCode() == HttpStatus.SC_CREATED)
            {

            }*/
        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

  int responcecode = httpResp.getStatusLine().getStatusCode();
  if(responcecode==200)
  {
      Intent stopserviceintnet = new Intent(mContext,MyServiceProf.class);
      mContext.stopService(stopserviceintnet);
      System.out.print("Your service is stopped...");
      try{

          MyclassFragment.mbtn_SaveMyProfile.setEnabled(true);
      }
      catch (Exception e) {
        // TODO: handle exception
      }
      try{

          QuickaccessFragment.mbtn_SaveMyProfile.setEnabled(true);
      }
      catch (Exception e) {
        // TODO: handle exception
      }

  }else
  {
      System.out.print("Your service is running...");
  }
    System.out.println(jsonResponse);

    return jsonResponse;
} 
```

}

有时它可以正常工作，但是在连接wifi或移动互联网连接时突然我的应用程序崩溃了，我认为当时服务没有正常运行。:( 等待您的建议、解决方案和您的想法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:21:25.163

```
04-09 19:44:33.057: E/AndroidRuntime(3127): Caused by: java.lang.NullPointerException
04-09 19:44:33.057: E/AndroidRuntime(3127):     at com.zoomi_zdc.SERVICES.MyServiceProf$myPostData.doInBackground(MyServiceProf.java:129) 
```

根据这两行，您在代码的第 129 行有一个 Null 指针。

转到该行，检查正在执行的操作，找到为空的对象并修复它。那是调试101。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:43:04.583

```
 @Override
  public void onStart(Intent intent, int startId) {
// TODO Auto-generated method stub
 mTimerTask = new TimerTask() {
    public void run() {
             nCounter++;
                connectivityManager = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

final android.net.NetworkInfo wifi = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_WIFI);

final android.net.NetworkInfo mobile = connectivityManager.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);

if (wifi.isAvailable()) {

    mTimerTask.cancel();

    try{
    new myPostData().execute();
    }catch (Exception e) {
        // TODO: handle exception
    }

} else if (mobile.isAvailable()) {

    mTimerTask.cancel();
    try{

        new myPostData().execute();

    }catch (Exception e) {
            // TODO: handle exception
    }

} else {

//  Toast.makeText(getBaseContext(),"You are trying to access online content but Internet Connection has been disconnected!!!",Toast.LENGTH_SHORT).show();

}

    Log.d("TIMER", "TimerTask run");
    }
};

// public void schedule (TimerTask task, long delay, long period)
t.schedule(mTimerTask, 0, 10000); //

} 
```

在您的服务中删除 handler() ..您将不会再次收到此错误..请在您的代码中进行如下更改。

# list - 在煎茶触摸面板中显示列表

> ID：15946156
> 
> 赞同：1
> 
> 时间：2013-04-11T10:13:01.990
> 
> 标签：list, sencha-touch-2.1

我基本上是在制作 2 个水平面板来分割 ipad 的屏幕。

我试图在左侧面板中显示列表，在右侧面板中显示详细视图，但无论如何我都没有得到列表。

下面是我正在使用的视图：

```
Ext.define("Sencha.view.Main", {
extend: 'Ext.Container',    
config: {

layout: 'hbox',

    items: [
    {
        xtype: 'panel',
        width: 300,
        items: [

                {
                    xtype: "list",
                    id:'contactlist',
                    store:'Items',
                }
                 ],
    },
    {
        xtype: 'panel',
        html: 'Message Detail view goes here ....'

    }
]
} 
```

});

以下是我正在使用的商店：

```
Ext.define('Sencha.store.Items', {
extend: 'Ext.data.Store',

config: {
    model: 'Sencha.model.Item',
    defaultRootProperty: 'items',
    root: {
        items: [
            {
                text: 'Drinks',

            },
            {
                text: 'Snacks',

            }
        ]
    }
} 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:13:56.413

我认为您可能缺少列表中的 flex config 选项，如 sencha 文档和 itemTpl 中所述

```
{
      xtype: "list",
      id:'contactlist',
      flex: 1,
      itemTpl: {text},
      store:'Items',
} 
```

docs：“如果该项目项目位于 Ext.layout.HBox 或 Ext.layout.VBox 布局内，则该项目的 flex。”

也没有为商店设置 storeId。storeId: '项目',

# windows-phone-8 - 如果其他开发者想要使用它进行开发，开发者解锁的 Windows Phone 8 设备是否需要再次解锁？

> ID：15946158
> 
> 赞同：1
> 
> 时间：2013-04-11T10:13:13.293
> 
> 标签：windows-phone-8

如果原开发者注销了 Windows Phone 8 设备并且其他开发者想要将其用于开发，是否需要再次解锁该开发者解锁的 Windows Phone 8 设备？

我有一个开发者解锁了诺基亚 Lumia 620，它是使用我朋友的帐户解锁的。现在，我希望他从他的帐户中注销它，以便我可以使用我的帐户来注册设备。可能吗？发布者 GUID 是否与设备关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:38:22.390

因为我认为重新生成与 Microsoft 帐户相关联。因此您可以在设备上使用新的 microsoft 帐户再次注册它，但请注意：取消注册手机后，您部署的应用程序不再运行，因为应用程序许可证不再有效。

您可以从此链接了解更多信息

[如何注册您的手机以进行开发](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769508%28v=vs.105%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:38:01.313

您可以将手机恢复出厂设置，然后使用您的帐户注册 - 没有问题。Publisher ID 与您的开发者帐户相关联，而不是与设备相关联。

# java - Java 计数器无法正常工作

> ID：15946160
> 
> 赞同：1
> 
> 时间：2013-04-11T10:13:17.113
> 
> 标签：java, loops, methods, counter

下面是我的 Java 代码。如果用户输入的数字不等于`1`该方法`getInput()`将被再次调用。

```
public void getInput(){
int i=0;
    while(i<=4){
        result[i] = Integer.parseInt(JOptionPane.showInputDialog("Enter Result (1 = pass, 2 = fail)"));
        int res = result[i];
        if(res!=1){
            JOptionPane.showMessageDialog(null,"Wrong input, please try again!");
            System.out.println("Wrong Input:" + res);
            getInput();
        }
        System.out.println("count:"+i);
        i=i+1;
    }
} 
```

以下是代码产生的结果

*   count:0 <- 从 0 开始计数
*   计数：1
*   错误输入：2 <- 输入错误的输入并`getInput()`再次调用方法。
*   count:0 <- 从 0 开始计数
*   计数：1
*   计数：2
*   计数：3
*   计数：4
*   count:2 <- 从 2 重新开始
*   计数：3
*   计数：4

问题是计数器工作不正常。有人可以帮我解决这个问题吗？为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:18:54.713

每次调用`getInput()`设置的方法时`i = 0`，尝试将计数器作为方法参数传递：

```
public void getInput(int i){
    while(i<=4){
        result[i] = Integer.parseInt(JOptionPane.showInputDialog("Enter Result (1 = pass, 2 = fail)"));
        int res = result[i];
        if(res!=1){
            JOptionPane.showMessageDialog(null,"Wrong input, please try again!");
            System.out.println("Wrong Input:" + res);
            getInput();
        }
        System.out.println("count:"+i);
        i=i+1;
    }
} 
```

我不会为此目的使用递归调用，为什么不这样做：

```
public void getInput(){      
  while(i<=4) && ((res = Integer.parseInt(JOptionPane.showInputDialog("Enter Result (1 = pass, 2 = fail)"))) != 1){        
      JOptionPane.showMessageDialog(null,"Wrong input, please try again!");
      System.out.println("Wrong Input: " + res);          
      i = i + 1; 
    }
    System.out.println("count:" + i);        
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:24:23.017

`getInput()`从内部调用开始递归。递归方法调用完成后，将在调用站点恢复执行，并且（假设没有副作用）与递归调用之前的状态相同。

因此，如果您的用户输入 2 您`getInput()`递归调用，并且一旦此“内部”执行成功完成（即用户输入 1 四次），“内部”`getInput()`返回并且外部以与以前完全相同的状态恢复（您的计数变量在本地声明！）。

我建议不要在这里使用递归，而是使用更简单的 if/else 构造并更改变量`i`以保持状态：

```
while (i <= 4) {
   // input code here
   if  (res != 1) {
      // fail message for user here
      i = 0;
   } else {
      // success message for user here
      i++;
   }
} 
```

请注意，此方法可能会使用户感到沮丧，应添加取消执行的选项（：

# java - 拆分字符串java

> ID：15946162
> 
> 赞同：0
> 
> 时间：2013-04-11T10:13:18.293
> 
> 标签：java, string, string-split

我有一个格式的字符串：

> <+923451234567>：您好，这里是正文。

现在我想在 < > 符号之间的字符串开头获取手机号码（没有任何非字母数字字符），即 923451234567，以及文本，即 Hi here 是文本。

现在我可以放置一个我目前正在做的硬编码逻辑。

```
String stringReceivedInSms="<+923451234567>: Hi here is the text.";

String[] splitted = cpaMessage.getText().split(">: ", 2);
String mobileNumber=MyUtils.removeNonDigitCharacters(splitted[0]);
String text=splitted[1]; 
```

如何使用正则表达式从字符串中巧妙地获取所需的字符串？这样我就不必在字符串格式发生变化时更改代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:19:12.653

```
String stringReceivedInSms="<+923451234567>: Hi here is the text.";

Pattern pattern = Pattern.compile("<\\+?([0-9]+)>: (.*)");
Matcher matcher = pattern.matcher(stringReceivedInSms);
if(matcher.matches()) {
    String phoneNumber = matcher.group(1);
    String messageText = matcher.group(2);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T10:28:02.730

您需要使用正则表达式，以下模式将起作用：

```
^<\\+?(\\d++)>:\\s*+(.++)$ 
```

以下是您将如何使用它 -

```
public static void main(String[] args) throws IOException {
    final String s = "<+923451234567>: Hi here is the text.";
    final Pattern pattern = Pattern.compile(""
            + "#start of line anchor\n"
            + "^\n"
            + "#literal <\n"
            + "<\n"
            + "#an optional +\n"
            + "\\+?\n"
            + "#match and grab at least one digit\n"
            + "(\\d++)\n"
            + "#literal >:\n"
            + ">:\n"
            + "#any amount of whitespace\n"
            + "\\s*+\n"
            + "#match and grap the rest of the string\n"
            + "(.++)\n"
            + "#end anchor\n"
            + "$", Pattern.COMMENTS);
    final Matcher matcher = pattern.matcher(s);
    if (matcher.matches()) {
        System.out.println(matcher.group(1));
        System.out.println(matcher.group(2));
    }
} 
```

我添加了`Pattern.COMMENTS`标志，因此代码将与嵌入的注释一起使用，以供将来参考。

输出：

```
923451234567
Hi here is the text. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T10:17:39.657

使用与模式匹配的正则表达式 -`<\\+?(\\d+)>: (.*)`

使用`Pattern`和`Matcher`java 类来匹配输入字符串。

```
Pattern p = Pattern.compile("<\\+?(\\d+)>: (.*)");
Matcher m = p.matcher("<+923451234567>: Hi here is the text.");
if(m.matches())
{
    System.out.println(m.group(1));
    System.out.println(m.group(2));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T10:18:09.957

您只需执行以下操作即可获取您的电话号码：

```
stringReceivedInSms.substring(stringReceivedInSms.indexOf("<+") + 2, stringReceivedInSms.indexOf(">")) 
```

所以试试这个片段：

```
public static void main(String[] args){
        String stringReceivedInSms="<+923451234567>: Hi here is the text.";

        System.out.println(stringReceivedInSms.substring(stringReceivedInSms.indexOf("<+") + 2, stringReceivedInSms.indexOf(">")));
    } 
```

你不需要拆分你的字符串。

# java - 在 Xcode 4 中编译 Java

> ID：15946163
> 
> 赞同：12
> 
> 时间：2013-04-11T10:13:18.960
> 
> 标签：java, xcode, macos, compiler-construction

我知道这个问题已经流传了很长时间了......

**Xcode 4 中的 Java**。

我不需要任何建议（例如 Eclipse、Netbeans）我只想在“XCode4”（不是 3）中编译一些简单的 Java 代码。我设法创建了一个文件，并且正如预期的那样，语法和一切正常，但由于缺少方案而导致编译器。我有点卡在可执行文件上。

我的问题是：

有可能这样做吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-11T10:16:38.640

> 有可能这样做吗？

**是的，这是可能的。**

```
    1）文件>新建>新项目>其他>外部构建系统
    2）给它一个名字并将其保存在某个地方。
    3）文件>新建>新文件>其他>空
    4）给它一个Java友好的名字。在我的示例中，使用“HelloWorld.java”
    5) 将以下内容复制到文件中并保存。
    6）文件>新建>新文件>其他>空
    7) 另存为“Makefile”。
    8) 将以下内容复制到文件中并保存。
    9）“运行”（>）按钮现在至少应该编译你的Java了。

```

现在变得棘手了。您不必执行下一部分。如果需要，您可以打开一个终端到您的项目目录并运行“java HelloWorld”。我强烈建议这样做。您也可以只键入“make”并将 Xcode 纯粹用作文本编辑器。

```
    9）项目>编辑方案>调试>信息
    10) 可执行文件 > 其他 > 输入 ^⌘g > 输入“/bin” > 选择“sh”
    11) 论据
    12) 将“基础扩展”设置在您为目标命名的任何位置
    13) 为这个例子添加一个参数'-c "/usr/bin/java -classpath $(PROJECT_DIR) HelloWorld"'。
    14) 交叉你的手指
    15) 单击“运行”(>) 按钮。

```

*[Apple 支持社区](https://discussions.apple.com/thread/3651347?start=0&tstart=0)*摘录**

# vb.net - VB.net 奇怪的条件语句 (IF)

> ID：15946173
> 
> 赞同：1
> 
> 时间：2013-04-11T10:13:50.340
> 
> 标签：vb.net, if-statement

想知道是否有人可以借给我他们的专业知识。对 Vb.net 来说非常新，并且在我们的一个产品中遇到了这个条件语句。有人可以确认声明的有效性并解释这里发生了什么吗？我尝试了无数次搜索，但找不到任何相关内容。

```
If (IsDBNull(dr("someID")), "0", dr("someID")) = someID.ToString() Then 
```

我已经更改了“id”值名称，因为它是来自商业产品的代码，但使用的 ID 都是相同的变量（整数）。

感谢您对此提供的任何意见！

乔

PS：我无法在运行时检查这个的原因是因为产品的运行方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:22:36.833

这是一个内联 If 语句 `If(condition,iftrue,iffalse)`if`condition`为 true 评估并返回`iftrue`else`iffalse`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:32:28.660

`If operator`VB.NET 2008 中的. `ternary operator`[**[参考](http://msdn.microsoft.com/en-us/library/bb513985.aspx)**]

**例子：**

```
Dim foo as String = If(bar = buz, cat, dog) 'Condition satisfied then it'll return cat else dog. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:32:37.293

该语句正在检查是否`dr("SomeID")`等于 value `someID.ToString`。需要 If 的原因是您需要检查`dr("someID")`Is 是否`Null`。如果它是 0 ，则使用它可能不等于`someID`。

这与执行以下操作相同：

```
If Not IsDBNull(dr("someID")) Then
    If dr("someID").ToString = someID.ToString Then

    End If
End If 
```

我建议这样的事情会更合适（检查整数值而不是比较字符串）

```
If(IsDBNull(dr("someID")), 0, CInt(dr("someID"))) = someID Then 
```

我还建议 Turning`Option Strict On`因为您发布的代码不应该编译！

# emacs - 在空白模式下更改字符的颜色

> ID：15946178
> 
> 赞同：13
> 
> 时间：2013-04-11T10:14:19.567
> 
> 标签：emacs, colors, whitespace

我最近从 Geany 迁移到 Emacs，我想自定义 Emacs 中的空白字符，使其看起来像 Geany 中的空白字符。

使用 Geany，这些点又小又灰：

![Geany 的示例代码](https://i.stack.imgur.com/8o4Iw.png)

在 Emacs 中，这些点更大更白：

![使用 Emacs 的示例代码](https://i.stack.imgur.com/X9B8m.png)

我发现 Geany 中的点在眼睛上要轻得多。

**解决方案**

`(setq whitespace-style (quote (spaces tabs newline space-mark tab-mark newline-mark)))`在我从我的 .emacs 文件中发表评论后，问题得到了解决：

```
;; make whitespace-mode use just basic coloring
;;(setq whitespace-style (quote (spaces tabs newline space-mark tab-mark newline-mark)))
(setq whitespace-display-mappings
  ;; all numbers are Unicode codepoint in decimal. ⁖ (insert-char 182 1)
  '(
    (space-mark 32 [183] [46]) ; 32 SPACE 「 」, 183 MIDDLE DOT 「·」, 46 FULL STOP 「.」
    (newline-mark 10 [182 10]) ; 10 LINE FEED
    (tab-mark 9 [9655 9] [92 9]) ; 9 TAB, 9655 WHITE RIGHT-POINTING TRIANGLE 「▷」
    )) 
```

空白字符现在看起来完全符合预期。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T10:36:55.780

尝试`M-x` `customize-face` `RET` `whitespace-space` `RET`

（也许从前景色开始`gray30`，然后从那里调整。）

在 elisp 中，类似：

```
(set-face-attribute 'whitespace-space nil :background nil :foreground "gray30") 
```

（可能有一个比您正在使用的更小的点，但我不知道那会是什么。）

# jquery - jqplot - 如何绘制条形图

> ID：15946179
> 
> 赞同：1
> 
> 时间：2013-04-11T10:14:22.980
> 
> 标签：jquery, charts, jqplot

我下载了 jqplot 并将其集成到我的网站中。一切正常。但我在绘制条形图时遇到问题。它只显示折线图..

```
$.jqplot.config.enablePlugins = true;
var s1 = [[1,male], [2,female], [3,other]];
var ticks = ['Male', 'Female', 'Other'];

plot1 = $.jqplot('chart1', [s1], {
    // Only animate if we're not using excanvas (not in IE 7 or IE 8)..
    animate: !$.jqplot.use_excanvas,
    seriesDefaults:{
        renderer:$.jqplot.BarRenderer,
        pointLabels: {
            show: true
        }
    },
    axes: {
        xaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            ticks: ticks
        }
    },
    highlighter: {
        show: true
    }
}); 
```

我的结果是（中间的）-但我想要一个条形图。 ![在此处输入图像描述](https://i.stack.imgur.com/RRkEl.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:29:27.540

不要忘记包含 barRenderer 插件：

`<script type="text/javascript" src="../src/plugins/jqplot.barRenderer.min.js"></script>`

（无论是他的缩小版还是完整版。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:02:47.080

见这里演示

[**小提琴**](http://jsfiddle.net/JWhmQ/1629/)

在标题中包含`jqplot.barRenderer`插件

更改代码如下

```
$(document).ready(function(){
 var s1 = [[1,'male'], [2,'female'], [3,'other']];
var ticks = ['Male', 'Female', 'Other'];

plot1 = $.jqplot('chart1', [s1], {
    // Only animate if we're not using excanvas (not in IE 7 or IE 8)..

    seriesDefaults:{
        renderer:$.jqplot.BarRenderer,
        pointLabels: {
            show: true
        }
    },
    axes: {
        xaxis: {
            renderer: $.jqplot.CategoryAxisRenderer,
            ticks: ticks
        },
         yaxis: {
            renderer: $.jqplot.CategoryAxisRenderer

        }
    },
    highlighter: {
        show: true
    }

  });
      }); 
```

# sql - SQL Server：计算父项中的 XML 子项

> ID：15946180
> 
> 赞同：0
> 
> 时间：2013-04-11T10:14:23.700
> 
> 标签：sql, sql-server, xml

您好我一直在寻找一种更新在 sql 中生成的 xml 以添加子节点的计数并使用 SQL 将计数添加到父节点的方法

我已经尝试了各种工作

```
 SET @xml.modify
    (
       'insert attribute TrCount {count(/XML/Acs/Act/Trs/Tr)} into (./XML/Acts/Act/Trs)' 
```

);

```
 <XML>
      <Id>12</Id>
      <DateCreated>2013-04-11</DateCreated>
      <Acts AccountCount="4">
        <Act RowID="1>
             <Trs>
                 <Tr RowID="1" />
             </Trs>
         </Act>
         <Act RowID="2">
             <Trs>
                 <Tr RowID="1"  />
                 <Tr RowID="2" />
             </Trs>
          </Act>
          <Act RowID="3">
             <Trs>
                 <Tr RowID="1"/>
             </Trs>
          </Act>
          <Act RowID="4">
             <Trs>
                 <Tr RowID="1" />
                 <Tr RowID="2" />
                 <Tr RowID="3" />
                 <Tr RowID="4" />
                 <Tr RowID="5" />
                 <Tr RowID="6" />
                 <Tr RowID="7" />
           </Trs>
             </Act>
      </Acts>
    </XML> 
```

上面是一个样本，我已经得到了它的计数，但我似乎无法在每个中得到每个的计数，所以结果看起来像

```
 <Act RowID="1>
          <Trs  Trcount="1">
            <Tr RowID="1" />
          </Trs>
        </Act>
        <Act RowID="2">
          <Trs  Trcount="2">
            <Tr RowID="1"  />
            <Tr RowID="2" />
          </Trs>
        </Act>
        <Act RowID="3">
          <Trs Trcount="1">
            <Tr RowID="1"/>
          </Trs>
        </Act>
        <Act RowID="4">
          <Trs Trcount="7">
            <Tr RowID="1" />
            <Tr RowID="2" />
            <Tr RowID="3" />
            <Tr RowID="4" />
            <Tr RowID="5" />
            <Tr RowID="6" />
            <Tr RowID="7" />
          </Trs> 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:00:36.570

尝试这样的事情，假设每个`Act`只包含一个`Trs`：

```
declare @count int = @xml.value('count(/XML/Acts/Act)', 'int'),
        @counter int = 1;

while (@counter <= @count)
begin
    SET @xml.modify ('insert attribute TrCount {count(/XML/Acts/Act[sql:variable("@counter")]/Trs/Tr)} into (/XML/Acts/Act[sql:variable("@counter")]/Trs)[1]');

    set @counter += 1;
end 
```

`insert()`一次只能修改一个单例，不能修改一整套节点。

# android - Android webview html5 视频自动播放在 android 4.0.3 上不起作用

> ID：15946183
> 
> 赞同：10
> 
> 时间：2013-04-11T10:14:27.917
> 
> 标签：android, html, video, webview, youtube-api

我开发了一个应用程序，用户可以在其中设置网页上的视频： - 他们可以指定 Youtube URL 或 - 他们可以上传视频

根据用户选择的选项，我会呈现这样的视频页面：如果视频来自 youtube：

```
<iframe type="text/html" width="640" height="385" src="http://www.youtube.com/embed/YOUTUBEID?autoplay=1&loop=1&autohide=1&fs=0"  frameborder="0"></iframe> 
```

如果正在上传视频：

```
<video id="video" style="cursor: pointer;" width="640" height="480"  autoplay controls loop>
  <source src="../video/Tareas_Diarias_Resumen.mp4" type="video/mp4" />
</video> 
```

好的。所有这些在谷歌浏览器上都能完美运行，但事实是视频将在 16 台三星 GT-P5100 Android 4.03 平板电脑上观看。

我们创建了一个嵌入 webView 的 Android 应用程序，如下所示：

```
WebView engine = (WebView) findViewById(R.id.web_engine);
engine.setWebChromeClient(new WebChromeClient());
engine.getSettings().setPluginsEnabled(true);
engine.getSettings().setPluginState(PluginState.ON);
engine.getSettings().setJavaScriptEnabled(true);
engine.getSettings().setAllowFileAccess(true);
engine.loadUrl(miUrl); 
```

在这里我有两个问题： 1- Youtube 视频。它工作正常，我可以看到视频但没有自动播放，我们希望它可以自动播放。有什么解决办法吗？2-上传的视频不起作用，我可以看到播放器但没有视频。

视频是用手刹转换的，选择 iphone 和 ipod-touch 预设和“网络优化”选项。

任何帮助或线索？提前致谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-06-25T02:46:21.583

自 Android SDK 17 起禁用自动播放，但您可以将 setMediaPlaybackRequiresUserGesture 设置为 false 以重新启用自动播放。不要忘记检查 SDK 版本，因为早期版本没有此功能。

```
 int SDK_INT = android.os.Build.VERSION.SDK_INT;
    if (SDK_INT > 16) {
        engine.getSettings().setMediaPlaybackRequiresUserGesture(false);
    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-05-23T15:36:52.873

[升级为根据请求回答]

大多数移动平台（Android、iOS）上的自动播放被阻止以避免糟糕的用户体验 - 视频应该只在用户操作之后播放。您通常可以通过在另一个事件（例如 onloaded 事件）上触发 play() 来解决它

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-04T10:24:42.457

对于 Android 4.0.x，尝试触发事件：loadstart

```
var vid=document.getElementById('video');
vid.addEventListener("loadstart", showVideo, false);
function showVideo(e) {
  vid.play();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T13:53:18.193

这是无法实现的，大多数移动平台（Android、iOS）上的自动播放会被阻止以避免糟糕的用户体验。看看这个： [http ://www.longtailvideo.com/html5/autoloop/](http://www.longtailvideo.com/html5/autoloop/)

# apache - Laravel htaccess 问题

> ID：15946186
> 
> 赞同：10
> 
> 时间：2013-04-11T10:14:39.930
> 
> 标签：apache, .htaccess, mod-rewrite, laravel

我正在尝试设置一个网站。该站点在我们一直用来向客户展示站点的实时开发服务器上运行良好。这是来自现场开发的 htaccess（工作正常）：

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On

    #RewriteCond %{HTTPS} !=on
    #RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
    #RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

    # Rewrite to 'public' folder
    RewriteCond %{HTTP_HOST} ^livedev.domain.com$
    RewriteCond %{REQUEST_URI} !public/
    RewriteRule (.*) public/$1 [L]
</IfModule>
AuthType Basic
AuthName "dev16"
AuthUserFile "/home/site/.htpasswds/public_html/passwd"
require valid-user 
```

这是来自现场网站的 .htaccess：

```
<IfModule mod_rewrite.c>
    Options +FollowSymlinks
    RewriteEngine On

    #RewriteCond %{HTTPS} !=on
    #RewriteCond %{HTTP_HOST} !^www\..+$ [NC]
    #RewriteRule ^ http://www.%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

    # Rewrite to 'public' folder
    RewriteCond %{HTTP_HOST} ^livesite.co.uk$
    RewriteCond %{REQUEST_URI} !public/
    RewriteRule (.*) public/$1 [L]
</IfModule> 
```

除了 HTTP_HOST 和身份验证的删除之外，这 2 个是相同的。

它给了我一个通用的“内部服务器错误”。

我尝试删除 .htaccess 的内容，这只是让我找不到页面，所以问题肯定出在 .htaccess 上。

一个总.htaccess处女，我可以采取什么步骤来找到问题的原因？

谢谢

（这是 Laravel 3.2.13）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T04:48:41.020

**在 /public 的同一级别使用**

这种方式首先重定向到公共

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain.com$ [NC,OR]
RewriteCond %{HTTP_HOST} ^www.domain.com$
RewriteCond %{REQUEST_URI} !public/
RewriteRule (.*) /public/$1 [L] 
```

**在 /public 里面**

然后，你处理 index.php

```
<IfModule mod_rewrite.c>
    Options +FollowSymLinks
    RewriteEngine On
</IfModule>

<IfModule mod_rewrite.c>
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T00:29:43.153

[我的设置与RamiroRS answer](https://stackoverflow.com/a/16116678/1296104)完全相同，但仍然出现内部服务器错误。我的问题在于文件权限。文件夹应为 0755，文件应为 0644。

# ember.js - 如何从两个不同的视图发送 POST 请求？

> ID：15946189
> 
> 赞同：0
> 
> 时间：2013-04-11T10:14:44.060
> 
> 标签：ember.js, ember-data

这个问题与我之前的问题类似：[如何在 Ember 中与 Rails 进行通信，](https://stackoverflow.com/questions/15620625/how-to-communicate-with-rails-in-ember)但有些事情发生了变化。现在我知道 kudo 是在服务器中建模的，并且具有以下字段：

*   价值
*   评论

它属于一个用户。当前的实现如下：

```
<a href="#" class="btn btn-primary" {{action "addKudo" user}}>add</a>

Sks.ApplicationRoute = Ember.Route.extend
  events:
    addKudo: (user) ->
      console.log event
      self = @
      token = $('meta[name="csrf-token"]').attr 'content'
      currentUserCon = @controllerFor 'currentUser'
      kudosLeft = currentUserCon.get 'kudosLeft'

      showFlash = (type, message) ->
        $("#flash")
          .addClass(type)
          .empty()
          .append(message)
          .show()
          .fadeIn()
          .delay(2000)
          .fadeOut 'slow'

      $.post("/kudos", user_id: user.get("id"), authenticity_token: token)
      .done((data, status) =>
        if kudosLeft > 0
          currentUserCon.decrementKudos 1
          showFlash 'alert-success', 'You\'ve added a kudo!'
        else
          showFlash 'alert-error', 'There\'re no kudos left!'
      )
      .fail (data, status) ->
        showFlash 'alert-error', 'Oops! An error occured!' 
```

但是现在，我想使用 Ember-Data 并向**/kudos**发送一个 POST 请求（并且我想摆脱 jQuery ajax 部分）。请看一看：

![在此处输入图像描述](https://i.stack.imgur.com/QbR79.png)

具有以下模型：

```
Sks.Kudo = DS.Model.extend
  user: DS.belongsTo 'Sks.User'
  value: DS.attr 'number'
  comment: DS.attr 'string' 
```

我怎样才能做到这一点？执行此操作的必要步骤是什么？任何人都可以解释一下吗？

下一个问题是：选择和文本区域值应该指向哪里（绑定）？

# regex - 如何匹配这个 {% url 的东西

> ID：15946191
> 
> 赞同：0
> 
> 时间：2013-04-11T10:14:46.887
> 
> 标签：regex, django

我在旧的 Django 项目中有很多这样的条目：

```
{% url something param param %}
{% url someother param %}
{% url something %} 
```

我想用正则表达式替换它：

```
{% url "something" param param %}
{% url "someother" param %}
{% url "something" %} 
```

我使用 KomodoEdit，它允许使用正则表达式替换许多文件中的文本。在这种情况下如何构建正则表达式来匹配和替换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:12:21.890

对于 Komodo 编辑，正确答案是：

匹配：

```
{% url (\S*) 
```

末尾有空格，并替换：

```
{% url "\1" 
```

末端有空间

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:17:20.143

替换`\{% url ([a-z]+)`为`{% url "$1"`。

# c# - 复制字典的意外结果

> ID：15946192
> 
> 赞同：2
> 
> 时间：2013-04-11T10:14:48.760
> 
> 标签：c#, .net, dictionary

这与我认为我对复制字典的理解背道而驰。说，我有以下代码：

```
public class MyClass
{
    public string str1;

    public MyClass(string s)
    {
        str1 = s;
    }
}

Dictionary<string, MyClass> dic1 = new Dictionary<string, MyClass>();
dic1.Add("0", new MyClass("hello"));

//Make 'dic2' as a copy of 'dic1'
Dictionary<string, MyClass> dic2 = new Dictionary<string, MyClass>(dic1);

//Alter 'dic1'
dic1.ElementAt(0).Value.str1 += "!!!";

//I was expecting dic2 not to be altered, but IT IS!
Debug.Assert(dic2["0"].str1.Equals(dic1["0"].str1, StringComparison.Ordinal) == false);     //Result is true for equality 
```

我原以为更改复制的字典不会更改原始字典，但我的代码并非如此。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:18:42.713

正如 Corak 所说，你做了一个浅拷贝。您正在复制对内存中对象的引用，而不是对象本身。现在，对于每个键，您有两个对一个对象的引用。

您想要的是深拷贝，请参见此处：[克隆/深拷贝 .NET 通用 Dictionary<string, T> 的最佳方法是什么？](https://stackoverflow.com/questions/139592/what-is-the-best-way-to-clone-deep-copy-a-net-generic-dictionarystring-t)

# c# - 检查数组位置是否存在

> ID：15946193
> 
> 赞同：4
> 
> 时间：2013-04-11T10:14:50.810
> 
> 标签：c#, arrays, list

我正在尝试检查数组的位置是否存在。

我正在尝试从列表中输出位置 1、2、3、4 和 5 字符串值。如果列表小于 5，则需要显示一个“-”作为字符串值。

例如，应显示 3 个列表：`Value, Value, Value, -, -`

但是，我无法弄清楚如何检查这一点，并且我不断收到 index is out of range 错误。

我努力了：

```
if (String.IsNullOrEmpty(formGuideCount[3]))
{
    game4 = formGuideCount[3];
}
else
{
    game4 = "-";
} 
```

谁能告诉我应该用什么来检查该职位是否不存在？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T10:15:42.957

您可以使用数组的[Array.Length](http://msdn.microsoft.com/en-us/library/system.array.length.aspx)来验证索引位置是否存在。

```
if(formGuideCount.Length > 3)
{
      game4 = formGuideCount[3];
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T10:15:49.707

你可以检查一下`yourArray.Length`。

如果您使用的是多维数组，您可以这样做：

```
yourArray.GetLength(0)  //first dimension length
yourArray.GetLength(1)  //second dimension length
// and so on 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:22:42.483

使用`Length`数组的成员

```
if (formGuideCount.Length > 3)
{
    game4 = formGuideCount[3];
}
else
{
    game4 = "-";
} 
```

# magento - Magento：在进口新产品时删除现有的追加销售产品？

> ID：15946194
> 
> 赞同：0
> 
> 时间：2013-04-11T10:14:52.397
> 
> 标签：magento, import

我正在为我的商店进口追加销售产品。这工作没有任何问题。我唯一的问题是导入只是将新的添加到现有的，无论我选择什么导入选项（“附加复杂数据”或“替换现有的复杂数据”）。

有没有办法完全删除现有的，只有新的？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:26:16.770

您可以尝试使用[Magmi](http://sourceforge.net/projects/magmi/)来更好地导入数据，另一种方法是先转到数据库并运行

```
DELETE l.* FROM catalog_product_link as l
LEFT JOIN catalog_product_link_type as lt ON (lt.`link_type_id` = l.`link_type_id`)
WHERE lt.code = "up_sell" 
```

假设您需要快速修复，我建议您不要使用 DB 方式，除非您知道自己在做什么。Magento 导入通常是错误的。

PS感谢user1856596指出我的打字错误。

# php - 用变量声明 make 静态数组 php

> ID：15946197
> 
> 赞同：0
> 
> 时间：2013-04-11T10:15:06.107
> 
> 标签：php, arrays, symfony, static

我在制作静态数组时遇到了一些麻烦，将类的一些静态属性作为静态数组的键，如下所示：

```
class A {

    private $ambito; //will be filled with an element of the static $ambitos

    public static $municipal = 1;
    public static $provincial = 2;
    public static $regional = 3;

    /*array para declarar los posibles ambitos de visualizacion de una empresa*/
    private static $ambitos = array( 
                                   self::$municipal => "Municipal", 
                                   self::$provincial => "Provincial", 
                                   self::$regional => "Regional"
                              );

    public static function getAmbitos()
    {
        return self::$ambitos;
    }
} 
```

问题是我不能在静态数组中使用 self:$municipal，因为它会引发错误，我只能使用文字整数（我在数据库中保存的方式）

我正在使用交响乐 2.0。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:22:10.603

你也可以在那里使用常量。

```
class A {

    const DEFAULT_MUNICIPAL = 1;

    // ...

    public static $municipal = self::DEFAULT_MUNICIPAL;

    // ...

    private static $ambitos = array( 
        self::DEFAULT_MUNICIPAL => "Municipal", 
        // ...
    );

    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:21:13.943

您不能在另一个静态变量中引用静态变量（因为它们将同时被解析）

# java - 如何使用 jsoup 从此 html 标记中获取文本？

> ID：15946200
> 
> 赞同：6
> 
> 时间：2013-04-11T10:15:22.670
> 
> 标签：java, html, jsoup

当我使用 jsoup 提取数据时，我遇到了一个职位。像这样的数据：

```
This is a <strong>strong</strong> number <date>2013</date> 
```

我想得到这样的数据：`This is a number`

我怎样才能做到这一点？谁能帮我？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T23:17:32.993

您可以将 html 解析为 a `Document`，选择`body`-Element 并获取其文本。

**例子：**

```
Document doc = Jsoup.parse("This is a <strong>strong</strong> number <date>2013</date>");

String ownText = doc.body().ownText();
String text = doc.body().text();

System.out.println(ownText);
System.out.println(text); 
```

**输出：**

```
This is a number  
This is a strong number 2013 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T23:17:32.680

这应该回答你的问题：

```
public String escapeHtml(String source) {
    Document doc = Jsoup.parseBodyFragment(source);
    Elements elements = doc.select("b");
    for (Element element : elements) {
        element.replaceWith(new TextNode(element.toString(),""));
    }
    return Jsoup.clean(doc.body().toString(), new Whitelist().addTags("a").addAttributes("a", "href", "name", "rel", "target"));
} 
```

[Jsoup - 如何通过转义不删除不需要的 html 来清理 html？](https://stackoverflow.com/questions/7756674/jsoup-howto-clean-html-by-escaping-not-deleting-the-unwanted-html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-18T19:05:09.417

```
Document doc = Jsoup.parse("This is a <strong>strong</strong> number <date>2013</date>");

Spanned HtmlDoc = Html.fromHtml(doc.toString());
String fromHTML = HtmlDoc.toString();

System.out.println(fromHTML); 
```

# asp.net - 多个站点的正确缓存架构

> ID：15946202
> 
> 赞同：1
> 
> 时间：2013-04-11T10:15:27.570
> 
> 标签：asp.net, caching, redis, appfabric

我正在努力解决有关在单个 Web 服务器（IIS 8 / Windows Server 2012）上跨多个 Web 应用程序访问单个缓存的情况。

目前我们有一台内存为 16GB 的服务器，它只运行一个站点。为了争论，假设这个网站自己消耗了 10GB 的内存（我知道很多）

它将所有内容存储在 中`System.Web.HttpRuntime.Cache`，检索速度非常快。一个典型的场景是从这个缓存中检索 10,000 个对象，这可以在几毫秒内完成。

当我想向这个服务器添加另一个 Web 应用程序时，它变得很棘手，它与服务器上运行的另一个站点 99.9% 相同，并且理想情况下想要访问这个站点中的所有内容，快速 HttpRuntime.Cache。

我看到的问题是，据我所知，这个 HttpRuntime.Cache 不能在应用程序之间共享。

我尝试过 AppFabric、Redis 和 NCache，所有分布式缓存代理，它们检索相同 10,000 个对象的绝对最快时间约为 2 秒，这对于按需网站来说并不好。（顺便说一句，我很确定这 2 秒中有 1.999 秒充满了反序列化，这也是 CPU 密集型的）

我是否遗漏了一些明显的东西......一台服务器上的两个 Web 应用程序访问不需要昂贵的序列化/反序列化的缓存的方法？或者是时候为新的网络服务器分叉了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:51:00.017

我不能确定这一点，所以我会尝试猜测:)

使用 redis 获取多个密钥时，请确保您在单个事务 (MULTI/EXEC) 中执行此操作，或者至少不要为每个密钥执行 1 次调用，因为这非常缓慢且效率低下（网络服务器会花费大量时间进行 IO到redis）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T11:41:38.553

I understand your situation. In fact, many people face the same. I would encourage you

to use the Client Cache feature of NCache that lets you cache a subset of the entire

distributed cache in your .NET application's process memory.

With Client Cache, you can achieve your performance goals. And, you would still be able to build a very large cache due to the distributed cache behind the scenes. This is something you cannot do with a stand-alone Http Cache.

Let me know if you would like to talk to somebody in [NCache](http://www.alachisoft.com/Ncache) team one-on-one about this.

# sqlite - SQLite 等于计数值作为条件

> ID：15946215
> 
> 赞同：1
> 
> 时间：2013-04-11T10:15:52.953
> 
> 标签：sqlite, count, division

我目前正在处理一个 SQLite 查询，该查询必须向我返回所有能够履行游戏中每个角色的玩家。我目前有这个代码：

```
SELECT pr.name 
    FROM (SELECT DISTINCT p.name name, c.role role
            FROM players p, playerchampions pc, champions c 
                WHERE (p.name = pc.playername) & (pc.championname = c.name)) pr
                    WHERE COUNT(pr.name) = COUNT(DISTINCT pr.role) 
```

这个想法是我只是检查玩家是否可以完成与游戏中不同角色相同数量的角色，但我得到了滥用聚合函数 COUNT() 错误。我该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:43:51.987

这个查询可以这样写：

```
SELECT players.name
FROM players
JOIN playerchampions ON players.name = playerchampions.playername
GROUP BY players.name
HAVING COUNT(playerchampions.championname) = (SELECT COUNT(DISTINCT role)
                                              FROM champions) 
```

# javascript - 下拉列表的滚动条颜色变化

> ID：15946220
> 
> 赞同：2
> 
> 时间：2013-04-11T10:16:00.903
> 
> 标签：javascript, jquery, html, css, kendo-ui

我有一个下拉列表，它有一个滚动条。我想改变这个滚动条的颜色。[您可以从DEMO](http://jsfiddle.net/wAYFA/)看到工作代码。我的代码是

```
<!DOCTYPE html>
<html>
<head>
    <title></title> 
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://cdn.kendostatic.com/2013.1.319/js/kendo.all.min.js"></script>
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.common.min.css" rel="stylesheet" />
<link href="http://cdn.kendostatic.com/2013.1.319/styles/kendo.default.min.css" rel="stylesheet" />

  <script>

  </script>
</head>
<body>
            <div id="example" class="k-content">

            <div class="demo-section">
                <h2>View Order Details</h2>
                <p>
                    <label for="categories">Categories:</label><input id="categories" style="width: 300px" />
                </p>
                <p>
                    <label for="products">Products:</label><input id="products" disabled="disabled" style="width: 300px" />
                </p>
                <p>
                    <label for="orders">Orders:</label><input id="orders" disabled="disabled" style="width: 300px" />
                </p>

                <button class="k-button" id="get">View Order</button>
            </div>

            <style scoped>
                .demo-section {
                    width: 460px;
                    padding: 30px;
                }
                .demo-section h2 {
                    text-transform: uppercase;
                    font-size: 1.2em;
                    margin-bottom: 30px;
                }
                .demo-section label {
                    display: inline-block;
                    width: 120px;
                    padding-right: 5px;
                    text-align: right;
                }
                .demo-section .k-button {
                    margin: 20px 0 0 125px;
                }
                .k-readonly
                {
                    color: gray;
                }
            </style>

            <script>
                $(document).ready(function() {
                    var categories = $("#categories").kendoDropDownList({
                        optionLabel: "Select category...",
                        dataTextField: "CategoryName",
                        dataValueField: "CategoryID",
                        dataSource: {
                            type: "odata",
                            serverFiltering: true,
                            transport: {
                                read: "http://demos.kendoui.com/service/Northwind.svc/Categories"
                            }
                        }
                    }).data("kendoDropDownList");

                    var products = $("#products").kendoDropDownList({
                        autoBind: false,
                        cascadeFrom: "categories",
                        optionLabel: "Select product...",
                        dataTextField: "ProductName",
                        dataValueField: "ProductID",
                        dataSource: {
                            type: "odata",
                            serverFiltering: true,
                            transport: {
                                read: "http://demos.kendoui.com/service/Northwind.svc/Products"
                            }
                        }
                    }).data("kendoDropDownList");

                    var orders = $("#orders").kendoDropDownList({
                        autoBind: false,
                        cascadeFrom: "products",
                        optionLabel: "Select order...",
                        dataTextField: "Order.ShipCity",
                        dataValueField: "OrderID",
                        dataSource: {
                            type: "odata",
                            serverFiltering: true,
                            transport: {
                                read: "http://demos.kendoui.com/service/Northwind.svc/Order_Details?$expand=Order"
                            }
                        }
                    }).data("kendoDropDownList");

                    $("#get").click(function() {
                        var categoryInfo = "\nCategory: { id: " + categories.value() + ", name: " + categories.text() + " }",
                            productInfo = "\nProduct: { id: " + products.value() + ", name: " + products.text() + " }",
                            orderInfo = "\nOrder: { id: " + orders.value() + ", name: " + orders.text() + " }";

                        alert("Order details:\n" + categoryInfo + productInfo + orderInfo);
                    });
                });
            </script>
        </div>

</body>
</html>* 
```

如何更改此下拉列表滚动条的颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:33:48.670

在这个 kendoui 论坛帖子中，有人问了一个类似的问题：[http ://www.kendoui.c​​om/forums/ui/dropdownlist/changeing-scrollbar-in-kendo-dropdownlist.aspx](http://www.kendoui.com/forums/ui/dropdownlist/changing-scrollbar-in-kendo-dropdownlist.aspx)

没有简单/内置的解决方案，建议的解决方法是：

*   css 样式化滚动条，但实际上不是跨浏览器解决方案（[CSS 滚动条样式跨浏览器](https://stackoverflow.com/questions/7725652/css-scrollbar-style-cross-browser)和[Div 滚动条 - 任何方式来设置它的样式？](https://stackoverflow.com/questions/1256258/div-scrollbar-any-way-to-style-it)）
*   尝试让[jscrollpane](http://jscrollpane.kelvinluck.com)或其他插件与 kendoDropDownList 一起使用

# android - Android WifiP2p - 当发现的设备不可用时收到通知

> ID：15946223
> 
> 赞同：6
> 
> 时间：2013-04-11T10:16:10.483
> 
> 标签：android, android-intent, broadcastreceiver, wifi-direct

我正在开发一个 Wifi-direct 应用程序，其中列出了可用的设备，当设备进入“不可用”状态时，我必须将其从列表中删除。

我尝试使用 WifiDirectDemo 示例，它成功地将发现的设备添加到列表中，但是当设备不可用时，它不会收到通知。当设备不可用时，不会触发“WIFI_P2P_PEERS_CHANGED_ACTION”意图。

当我再次尝试“discoverPeers”时，“onPeersAvailable”方法会获取已经发现的设备列表。它不会删除不可用的设备。

当设备不可用时，有什么方法可以得到通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-29T20:26:03.790

[看看这个帖子](https://stackoverflow.com/questions/21072081/how-to-be-notified-when-a-peer-is-no-longer-available-in-the-wi-fi-direct-range)

总之：超出范围的对等点将在一段时间后自动从对等点列表中删除 - 这可能属于 1 分钟。我用 s4 和 s5 迷你设备对其进行了测试。s5 mini 发现了 s4 设备 - 当我关闭 s4 设备上的 wifi 时，它花了大约 20 秒，然后 s5 mini 设备广播了一个 PEERS_CHANGED 操作，并且 s4 不再出现在设备列表中......

# gruntjs - 在 Windows 上的 Grunt 中找不到任务“concat”

> ID：15946224
> 
> 赞同：4
> 
> 时间：2013-04-11T10:16:21.593
> 
> 标签：gruntjs

我的 gruntfile ：

```
module.exports = function(grunt) {

grunt.initConfig({

    pkg: grunt.file.readJSON('package.json'),

    concat: {
        js: {
            src: ['http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js', 'js/bootstrap.min.js', 'js/messages.fr.js', 'js/parsley.min.js'],
            dest: 'js/prod/concat.js'
        },
        css: {
            src: ['css/bootstrap.min.css', 'css/bootstrap-responsive.min.css', 'css/app.css'],
            dest: 'css/prod/concat.css'
        }
    },

    min: {
        js: {
            src: 'js/prod/concat.js',
            dest: 'js/prod/main.min.js'
        }
    },

    cssmin: {
        minify: {
            expand: true,
            src: ['css/prod/concat.css', '!*.min.css'],
            dest: 'css/prod/',
            ext: '.min.css'
        }
    }

});

grunt.loadNpmTasks('grunt-contrib-imagemin', 'grunt-contrib-cssmin');

// Default task.
grunt.registerTask('default', ['concat', 'min', 'cssmin']); 
```

};

无论我尝试什么（删除任务等），咕噜声都会向我发出相同的消息“警告：未找到任务“concat””。如果我删除 concat 也是一样的：“警告：找不到任务“min””。

我不明白发生了什么事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-18T14:46:30.987

这只是发生在我身上。同样重要的是要确保在你`npm`安装了一个 grunt 任务之后，你也已经在你的 Gruntfile 中注册了它。

所以你的 gruntfile 的结尾应该有如下几`loadNpmTasks`行：

```
grunt.loadNpmTasks('grunt-contrib-concat');
grunt.loadNpmTasks('grunt-contrib-uglify');

// Default task.
grunt.registerTask('default', [ 'concat', 'uglify']); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T19:36:07.413

旧版本的 Gruntjs 包含一些默认任务，例如 concat 和 min。从 Grunt 0.4 开始，您必须自己添加所有需要的任务（插件）。我相信对于缩小和连接，您都可以使用[grunt-contrib-uglify 之](https://github.com/gruntjs/grunt-contrib-uglify)类的任务。

请确保您运行的是最新版本的 Grunt。许多在线可用教程都提到了 Grunt 0.3，但从那时起发生了很多变化。例如，提到 grunt.js (Grunt 0.3) 而不是 Gruntfile.js (0.4) 的教程在很多方面都已过时。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-09T14:18:43.647

我知道这个问题很老，但我也遇到了这个错误，发现它是由于没有任何源文件（在 gruntfile.js 中的 concat.dist.src 中指定）而导致的。我将文件放在 grunt 期望它们的位置，并且效果很好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-19T10:00:51.347

我遇到了同样的问题，但我尝试了这个，我的问题已经解决了。在你的 node.js 命令提示符中尝试这个命令。

npm install grunt-contrib-concat --save-dev

# ruby - Ruby 1.9.3-p392+ 中的 SSL 连接错误

> ID：15946225
> 
> 赞同：1
> 
> 时间：2013-04-11T10:16:26.763
> 
> 标签：ruby, ssl, ruby-1.9.3, rest-client, ruby-2.0

在 Ruby 1.9.3-p385 或更早版本中，我可以成功运行以下代码：

```
require 'uri'
require 'net/http'

uri = URI('https://secure.example.com')

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true if uri.scheme == 'https'

http.start do |h|
  h.request Net::HTTP::Get.new(uri.request_uri)
end 
```

在 Ruby 1.9.3-p392 或更高版本中，我收到以下错误：

```
/Users/jason/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/net/http.rb:799:in `connect': Connection reset by peer - SSL_connect (Errno::ECONNRESET)
    from /Users/jason/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/net/http.rb:799:in `block in connect'
    from /Users/jason/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
    from /Users/jason/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
    from /Users/jason/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/net/http.rb:799:in `connect'
    from /Users/jason/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
    from /Users/jason/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/net/http.rb:744:in `start'
    from /Users/jason/.rbenv/versions/1.9.3-p392/lib/ruby/1.9.1/net/http.rb:557:in `start' 
```

*   我已经在最新版本的 rbenv 下安装了两个版本的 Ruby
*   我正在运行 OpenSSL 1.0.1e
*   我正在运行 OSX 10.8.3（最新版本）

Ruby 1.9.3p-385 和 1.9.3-p392 之间的 SSL 处理方式是否存在重大差异？

[本质上，最终目标是使用 SSL ( https://secure.example.com](https://secure.example.com) )连接到某个 API 端点，而无需从客户端传递任何 SSL 证书的详细信息。理想情况下，我将能够使用 rest-client Gem 来实现这一点（这会引发与上面的代码相同的错误）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:26:49.017

尝试设置 http.ssl_version = :SSLv3，可能是您的 API 使用了不同的 SSL 版本

# linux - ldirectord NAT 负载平衡不适用于协商检查

> ID：15946227
> 
> 赞同：0
> 
> 时间：2013-04-11T10:16:34.033
> 
> 标签：linux, wget, nat

我正在使用 ldirectord 来平衡两个 HTTP 服务器。在负载均衡器框中，我具有以下网络配置：

eth0 用于内部目的，根本不参与负载平衡。在 eth1 上，我为机器配置了公共 IP（用于来自其他内部网络的访问）和负载均衡器的 VIP。eth2 用于访问真实服务器，这些服务器位于不同的子网中，只能通过同一子网中的 IP 访问。

详细情况如下：

```
# ip a
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 16436 qdisc noqueue state UNKNOWN
link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
inet 127.0.0.1/8 brd 127.255.255.255 scope host lo
inet 127.0.0.2/8 brd 127.255.255.255 scope host secondary lo
inet6 ::1/128 scope host
   valid_lft forever preferred_lft forever

2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000
link/ether 00:50:56:a5:77:ae brd ff:ff:ff:ff:ff:ff
inet 192.168.8.216/22 brd 192.168.11.255 scope global eth0
inet6 fe80::250:56ff:fea5:77ae/64 scope link
   valid_lft forever preferred_lft forever

3: eth1: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000
link/ether 00:50:56:a5:77:af brd ff:ff:ff:ff:ff:ff
inet 172.22.9.100/22 brd 172.22.11.255 scope global eth1:1
inet 172.22.8.213/22 brd 172.22.11.255 scope global secondary eth1
inet6 fe80::250:56ff:fea5:77af/64 scope link
   valid_lft forever preferred_lft forever

4: eth2: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UNKNOWN qlen 1000
link/ether 00:50:56:a5:77:b0 brd ff:ff:ff:ff:ff:ff
inet 172.22.1.130/24 brd 172.22.1.255 scope global eth2
inet6 fe80::250:56ff:fea5:77b0/64 scope link
   valid_lft forever preferred_lft forever 
```

这是我的 NAT 负载均衡的配置：

```
# cat /etc/ha.d/ldirectord.cf
autoreload = yes
quiescent = yes
checkinterval = 10
negotiatetimeout = 10
checktimeout = 5
emailalert = "Konstantin.Boyanov@bmf.bund.de"
emailalertfreq = 60
failurecount = 3

virtual = 172.22.9.100:80
    checktimeout = 10
    checktype = negotiate
    failurecount = 2
    negotiatetimeout = 10
    protocol = tcp
    quiescent = yes
    real = 172.22.1.133:80 masq 1024
    real = 172.22.1.134:80 masq 1024
    request = "alive.htm"
    receive = "I am alive"
    scheduler = wrr
    service = http
    persistent = 5 
```

我还有两个额外的 iptables 规则来使 NATing 按预期工作：

```
# iptables -t nat -L
Chain PREROUTING (policy ACCEPT)
target     prot opt source               destination

Chain INPUT (policy ACCEPT)
target     prot opt source               destination

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination

Chain POSTROUTING (policy ACCEPT)
target     prot opt source               destination
SNAT       all  --  anywhere             anywhere            to:172.22.9.100
SNAT       all  --  anywhere             anywhere            to:172.22.1.130 
```

现在，问题是，活动检查没有按预期工作。虽然服务器在线（我可以 ping 它们和所有服务器），但 ldirector 并没有看到它并将它们标记为关闭。

如果我使用 ping 检查一切正常，但我们需要协商以进行更全面的服务检查（服务器 cna 可 ping，但 http 不工作等）。

我试图从负载平衡器框上的命令行下载alive.htm 页面，但失败了。

```
# wget http://172.22.1.133/alive.htm
--2013-04-11 09:52:44--  http://172.22.1.133/alive.htm
Connecting to 172.22.1.133:80... failed: Connection timed out.
Retrying. 
```

首先，我认为问题出在 iptables 规则上。我删除了它们，但仍然无法使用 wget 下载活动页面（以及 curl 和 w3m ）。我尝试从其他两台机器上获取它，它们都来自不同的子网，而且效果很好！我意识到负载平衡器盒有些问题。

然后我关闭了 ldirectord 并再次尝试了 wget。这次奏效了。

所以在我看来，ldirector 以某种方式阻止自己访问真实服务器上的活动页面？这看起来很奇怪而且不合逻辑。那么我做错了什么？

这些问题不是由 iptables 规则引起的，因为当我删除它们时，alive.htm 页面仍然不可用。

真实服务器都可以从负载平衡器访问（可ping通）。我有一些 ldirectord 的配置问题吗？

如何准确跟踪 ldirectord 在活动测试期间所做的事情？

一般来说，有人可以阐明或给我一些想法，什么可能是错的或我可能做错了什么。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:57:38.010

我在负载均衡器上禁用了 IPv6，现在一切正常。我猜 LVS + IPv6 是俄罗斯轮盘赌 :)

干杯!

# security - 为 Jetty 启用 SSL 会话以加速 HTTPS 请求

> ID：15946228
> 
> 赞同：0
> 
> 时间：2013-04-11T10:16:36.680
> 
> 标签：security, https, jetty

这是我的问题的后续，在[这里](https://stackoverflow.com/q/13048802/194609)我发现 HTTPS 与 HTTP 请求的查询时间差异很大：到服务器的距离越大，这种差异就越大。

我找到了这个握手开销的一个[很好的解释](http://www.semicomplete.com/blog/geekery/ssl-latency.html)。并且无法真正解决这个问题，但是对于进一步的请求，将 SSL 会话与保持活动结合使用非常重要。保持活动已打开。但是每个请求的 SSL ID 都是不同的（我正在使用 jetty 并读取[ssl_session_id 属性](https://stackoverflow.com/a/6269593/194609)）。

[事实证明，我需要根据this question](https://stackoverflow.com/questions/5643704/reusing-ssl-sessions-in-android-with-httpclient)更改客户端以及服务器，但我仍然感到困惑和不确定（这个问题的答案似乎听起来并不可靠）：

对于浏览器：如果我对我的 API 进行 javascript 查询，是否需要以某种方式启用它？

[对于 Jetty：我是否还需要按照此处](https://stackoverflow.com/a/6543263/194609)的说明关闭 jetty 的 allowRenegotiate 设置？但看起来这会有几个安全隐患，如果现在允许是否安全（取自[文档](http://archive.eclipse.org/jetty/7.6.0.RC5/apidocs/org/eclipse/jetty/io/nio/SslConnection.html#setAllowRenegotiate%28boolean%29)），我不完全这样做：

*设置是否允许 SSL 重新协商。CVE-2009-3555 通过重新协商在 SSL/TLS 中发现了一个漏洞。如果您的 JVM 没有修复 CVE-2009-3555，则不应允许重新协商。CVE-2009-3555 在 Sun java 1.6 中得到修复，在 u19 中禁止重新协商，在 u22 中使用 RFC5746。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:14:47.807

我不太确定你到底在问什么。好吧，HTTPS 总是比 HTTP 慢，因为它有更多的开销。

但是，您可能可以采取一些措施来减少响应时间。例如，大多数操作系统使用的 tcp 初始拥塞大小太小。这导致仅用于 TCP 握手的额外往返。由于往返时间通常在 20 毫秒到几秒之间（到海外服务器的网络速度较慢），这可以大大缩短建立 ssl 连接所需的时间。

查看 linux 系统的[https://lwn.net/Articles/427104/](https://lwn.net/Articles/427104/)。内核 >2.6.39 或 >3.x 应该可以。

# spring-jms - spring-jms OutboundGateway 不接回复

> ID：15946230
> 
> 赞同：0
> 
> 时间：2013-04-11T10:16:43.807
> 
> 标签：spring-jms

也许这是一个愚蠢的问题，我错过了一些非常简单的东西，但我真的被卡住了。我正在使用 ActiveMQ 5.5.1 和 SI 2.1.4

我的配置片段：

- -服务器 - -

```
 <beans:bean id="connectionFactory"   class="org.apache.activemq.ActiveMQConnectionFactory">
    <beans:property name="brokerURL" value="tcp://localhost:61616" />
</beans:bean>

   <beans:bean id="listQueue" class="org.apache.activemq.command.ActiveMQQueue">
        <beans:constructor-arg name="name" value="LIST_QUEUE"/>
    </beans:bean>   

   <beans:bean id="replyListQueue" class="org.apache.activemq.command.ActiveMQQueue">
        <beans:constructor-arg name="name" value="REPLY_LIST_QUEUE"/>
    </beans:bean>             

    <channel id="replyListChannel"/> 
    <channel id="listIn" />
    <channel id="listDriver"/>
    <channel id="listStock"/>    

    <jms:inbound-channel-adapter id="listInJms"
        connection-factory="connectionFactory"
        destination="listQueue"
        channel="listIn"        
        auto-startup="true">
        <poller fixed-rate="3000"/>
    </jms:inbound-channel-adapter>  

    <header-value-router input-channel="listIn" header-name="List"
            default-output-channel="nullChannel">        
        <mapping value="Driver" channel="listDriver" />
        <mapping value="Stock" channel="listStock" />
    </header-value-router>

    <jms:outbound-channel-adapter connection-factory="connectionFactory"
        channel="replyListChannel"
        destination="replyListQueue"
        auto-startup="true">                 
    </jms:outbound-channel-adapter> 
```

- -客户 - -

```
<beans:bean id="connectionFactory"  class="org.apache.activemq.ActiveMQConnectionFactory">
    <beans:property name="brokerURL" value="tcp://localhost:61616" />
</beans:bean>      

<beans:bean id="requestListQueue" class="org.apache.activemq.command.ActiveMQQueue">
    <beans:constructor-arg value="LIST_QUEUE"/>
</beans:bean>         

<beans:bean id="replyListQueue" class="org.apache.activemq.command.ActiveMQQueue">
    <beans:constructor-arg value="REPLY_LIST_QUEUE"/>
</beans:bean> 

<channel id="requestListChannel">
    <queue capacity="20"/>
</channel>   

<channel id="listStockChannel">
    <queue capacity="20"/>
</channel>   

<channel id="listDriverChannel">
    <queue capacity="20"/>
</channel>       

<channel id="replyListChannel"/>                

<jms:outbound-gateway id="outListGW"
    connection-factory="connectionFactory"
    request-destination="requestListQueue"
    request-channel="requestListChannel"
    reply-destination="replyListQueue"
    reply-channel="replyListChannel" 
    reply-timeout="20000"
    receive-timeout="20000">
    <poller fixed-rate="5000" />
</jms:outbound-gateway>     

<header-value-router input-channel="replyListChannel" header-name="List"
        default-output-channel="nullChannel">        
    <mapping value="Driver" channel="listDriverChannel" />
    <mapping value="Stock" channel="listStockChannel" />
</header-value-router> 
```

然后在代码中的某个地方，我手动执行请求并收听回复通道：

```
 public static DriverList requestDriverList() {

    Message<String> ldrm = MessageBuilder.withPayload("DriverList request").
            setHeader("List", "Driver").build();            
    try {
        ApplicationContext ctx = 
        new ClassPathXmlApplicationContext("classpath:dmclnt/config/integ-context.xml");
        MessageChannel requestListChannel = 
                ctx.getBean("requestListChannel", MessageChannel.class);
        QueueChannel listDriverChannel = 
                ctx.getBean("listDriverChannel", QueueChannel.class);

        logger.info("Request for DriverList is sent to channel");

        Message dlm = listDriverChannel.receive(20000);

        String xmlDL = (String)dlm.getPayload(); 

        JAXBContext jaxbctx = JAXBContext.newInstance(DriverList.class);
        DriverList dl = (DriverList)jaxbctx.createUnmarshaller().
        unmarshal(newStringReader(xmlDL));
        logger.info("DriverList objct unmarshalled: "+dl.toString());
        return dl;            
    } catch (JAXBException e) {
        logger.error("Error converting xmlDriverList to DriverList object",e);
        return null;
    } catch (RuntimeException e){
        logger.error(e); 
        return null;
    } 
} 
```

但我收到

```
"MessageTimeoutException: failed to receive JMS response within timeout of: 20000ms" 
```

每时每刻。当我查看服务器日志时，我看到带有正确有效负载的回复已成功从服务器发送到客户端，此外，回复被放入 REPLY_LIST_QUEUE，正如我在 ActiveMQ 管理控制台中看到的那样。没有更多的事情发生！REPLY_LIST_QUEUE **With_Correct_Payload**中的消息在此队列中处于 Pending 和 Enqueued 状态。没有消息出列。看来，JmsOutboundGateway 没有从回复目标队列中提取消息，尽管接收超时 =“20000 毫秒”延迟远远超过获得回复。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:33:53.677

这是因为出站网关对消息相关性有一些期望。我认为，通过您的配置，网关希望服务器在相关 ID 中返回入站消息 ID。它使用消息选择器来接收其回复。

如果您在服务器上使用入站网关，它将为您处理相关性。

您选择在服务器上使用离散通道适配器而不是入站网关是否有任何特殊原因？

您可能需要考虑升级到 2.2.3，其中对出站网关进行了一些改进（但仍需要服务器进行适当的关联）。

编辑：根据您在下面的评论...

如果您确实想使用一对适配器，则在当前配置下，您必须使用 a`<header-enricher/>`将入站标头复制`jms_messageid`到`jms_correlationId`.

或者，在客户端（出站网关）上，将`correlation-key`属性设置为`JmsCorrelationId`. 这将导致网关在出站消息上填充该标头，并且您不需要服务器端的任何内容。

# c# - C# Msmq 错误: (0x80004005): 传递给函数的句柄无效

> ID：15946236
> 
> 赞同：2
> 
> 时间：2013-04-11T10:16:59.290
> 
> 标签：c#, .net, msmq

我收到一些关于 MSMQ 的错误，并且在网上找不到任何可以帮助我的东西。这是堆栈跟踪：

```
System.Messaging.MessageQueueException (0x80004005): An invalid handle was passed to the function.
at System.Messaging.MessageQueue.ReceiveCurrent(TimeSpan timeout, Int32 action, CursorHandle cursor, MessagePropertyFilter filter, MessageQueueTransaction internalTransaction, MessageQueueTransactionType transactionType)
at System.Messaging.MessageQueue.Peek(TimeSpan timeout, Cursor cursor, PeekAction action)
at Utility.Msmq.MsmqManager.PeekWithoutTimeout(Cursor cursor, PeekAction action)
at Utility.Msmq.MsmqManager.SearchMessages(List`1 labels) 
```

使用以下代码初始化队列：

```
var queuePath = isIp
    ? (machineName == "127.0.0.1"
            ? string.Format(@".\Private$\{0}", queueName)
            : string.Format("FormatName:Direct=OS:{0}\\private$\\{1}", machineName,
                            queueName))
    : string.Format("FormatName:Direct=TCP:{0}\\private$\\{1}", machineName, queueName);

try
{
    _queue = MessageQueue.Exists(queuePath)
                    ? new MessageQueue(queuePath)
                    : MessageQueue.Create(queuePath, true);
    _queue.MessageReadPropertyFilter.Priority = true;
    _queue.SetPermissions("Everyone", MessageQueueAccessRights.FullControl);
}
catch(MessageQueueException)
{
    // Concurrent threads on a new company will try to create the queue at once, which throws an error
    // If this happens, wait 100ms, then check if queue was created by some other thread, and return it.
    while (!MessageQueue.Exists(queuePath))
    {
        Thread.Sleep(100);
    }
    _queue = new MessageQueue(queuePath);
} 
```

这是在 msmq 上执行 peek 的代码

```
private Message PeekWithoutTimeout(Cursor cursor, PeekAction action)
{
    Message ret = null;
    try
    {
        ret = _queue.Peek(new TimeSpan(1), cursor, action);
    }
    catch (MessageQueueException mqe)
    {
        if (mqe.MessageQueueErrorCode != MessageQueueErrorCode.IOTimeout)
        {
            throw;
        }
    }
    catch (Exception generalException)
    {
        Loggers.CreateBillLogger.Error(generalException.Message, generalException);
        throw generalException;
    }

    return ret;
}

public List<Message> SearchMessages(List<string> labels)
{
    var count = 0;
    var cursor = _queue.CreateCursor();
    var messages = new List<Message>();

    var message = PeekWithoutTimeout(cursor, PeekAction.Current);
    if (message != null)
    {
        if (labels.Contains(message.Label))
        {
            messages.Add(message);
        }

        do
        {
            message = PeekWithoutTimeout(cursor, PeekAction.Next);
            if (message != null && labels.Contains(message.Label))
            {
                messages.Add(message);
            }
        } while (message != null);
    }

    return messages;
} 
```

PS 我应该注意的一点是，这段代码在多线程环境中运行，使用 BackgroundWorkers，并且两个或多个线程尝试一次创建队列时发生很大变化，导致并发创建。这个问题在 catch 分支中得到了解决。

有什么我做错了吗？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T16:24:23.487

在一个非常旧的 .NET 框架版本中似乎存在一个问题，几乎完全符合这个问题。我找到了它和你的帖子，因为我们有时会遇到同样的问题。

[KB 826297](http://support.microsoft.com/KB/826297)描述了在多线程环境中调用 ReceiveById 时发生的此问题。

编辑：我认为 lock 语句足以修复它 - 但我误读了他们的帮助文章。看来您可能需要使用知识库文章中的 hack

# visual-studio-2010 - 如何在VS2010中创建VC++头文件和源文件模板

> ID：15946241
> 
> 赞同：0
> 
> 时间：2013-04-11T10:17:08.647
> 
> 标签：visual-studio-2010, visual-c++

我如何创建这样的模板。而且我还想在新文件-> 已安装模板中为我的所有模板创建新文件夹。

我发现了如何仅为 C# 项目创建模板。

编辑：为了澄清，我需要允许用户创建预填充一些数据的源文件和头文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:05:34.007

Visual Studio 项目模板与 C++ 不同，而是称为向导。

[您可以通过查看此 MSDN 链接](http://msdn.microsoft.com/en-gb/library/vstudio/96xz4cw2%28v=vs.100%29.aspx)了解如何创建 C++ 向导。

如果您只想创建自定义*项目模板*，例如头文件或代码文件，[请查看此处的 MSDN，](http://msdn.microsoft.com/en-us/library/y3kkate1%28v=vs.100%29.aspx)或者更具体地说，[此处的 MSDN。](http://msdn.microsoft.com/en-us/library/ms247113%28v=vs.100%29.aspx)

# c# - 如何在umbraco中获取预值的字符串值

> ID：15946250
> 
> 赞同：4
> 
> 时间：2013-04-11T10:17:34.270
> 
> 标签：c#, umbraco

我在下拉列表中添加了一些预值。当我试图获取使用我的下拉列表数据类型的属性的值时，我不断将 preValue 的“键”作为属性的值。但这不是我想要的。我需要并想要得到我作为预值输入的实际预值字符串..

有任何想法吗？

哦，顺便说一句..我需要使用 C# 来完成。

**编辑**

这是我到目前为止所尝试的......并且它有点工作......但它检索了一个我无法做任何查询的列表列表......

```
PreValues.GetPreValues(new Document(statistic.ParentId,true).getProperty("identifier").PropertyType.DataTypeDefinition.DataType.DataTypeDefinitionId).Values 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-09T06:27:36.470

我正在使用下面的方法来获取下拉列表值作为文本和 id

```
// Node ID of content node in which dropdown has been used 
int NodeIdOfContent = 1111; 
Document docMfsFeedSettings = new Document(NodeIdOfContent); 

int preValueID = docMfsFeedSettings.getProperty("dropDownAliasName").Value)

// Retrieve Text value 
string textValue = umbraco.library.GetPreValueAsString(
                  Convert.ToInt32(docMfsFeedSettings.getProperty("dropDownAliasName").Value)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T17:42:01.840

这有点乱，但是使用 PreValues 对象可以得到一个仅包含值的 IEnumerable：

```
...

int id = statistic.ParentId;
var node = new Document(id, true);
var property = node.getProperty("dropdown");
var dataTypeDefinitionId = property.PropertyType.DataTypeDefinition.DataType.DataTypeDefinitionId;

// Cast the SortedList to an IEnumerable of DictionaryEntry and then
// select the PreValue objects from it:
var preValues = PreValues.GetPreValues(dataTypeDefinitionId)
    .Cast<DictionaryEntry>()
    .Select(d => d.Value as PreValue);

// Select just the values from the PreValue objects:
var values = preValues.Select(p => p.Value); 
```

另一种方法是使用该[`umbraco.library.GetPrevalues(int id)`](https://stackoverflow.com/a/11166305/1110395)方法。然而，这两种方法都以自己的方式混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-02T14:46:14.647

我不需要它作为下拉列表。来自[Umbraco 文档](https://our.umbraco.org/documentation/getting-started/backoffice/property-editors/built-in-property-editors/radiobutton-list)：

### 键入：

```
@if (Model.Content.HasValue("superHero"))
{
    <p>@Model.Content.GetPropertyValue("superHero")</p>
} 
```

### 动态的：

```
@if (CurrentPage.HasValue("superHero"))
{
    <p>@CurrentPage.superHero</p>
} 
```

但是，对于 radiolist，prevalue 可以按如下方式访问：

### 键入：

```
@if (Model.Content.HasValue("miniFigure"))
{
    var preValue = Umbraco.GetPreValueAsString(Model.Content.GetPropertyValue<int>("miniFigure"));
    <p>@preValue</p>
} 
```

### 动态的：

```
@if (CurrentPage.HasValue("miniFigure"))
{
    var preValue = Umbraco.GetPreValueAsString(CurrentPage.miniFigure);
    <p>@preValue</p>
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-30T11:56:51.977

使用 Umbraco 7.53 版，我只是这样做了，以获取下拉值：

```
string dropdownTextValue = slider.GetProperty("dropdownAlias").DataValue.ToString(); 
```

# iphone - 在视图控制器上移动控件

> ID：15946251
> 
> 赞同：0
> 
> 时间：2013-04-11T10:17:34.850
> 
> 标签：iphone, objective-c, ios5, ios6

我正在根据在 textfeild 中输入的数字生成动态 textfeilds，但问题是剩余的控件被生成的 textfeilds 隐藏了我试图将剩余的控件放在另一个视图上并试图改变该视图，但它对我不起作用目标 c 世界的新手，我无法弄清楚这一点，
请帮助我
提前谢谢..![动态生成](https://i.stack.imgur.com/ztwjs.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:33:01.297

我认为您应该使用`UITableView`显示这么多`UITextFields`，因为在当前实现中，如果您选择 9+ 点，您将看`UITextFields`不到屏幕下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:35:21.623

您应该使用 UIScrollView 并将其 contentSize 设置为足够大以包含所有文本字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T09:26:16.043

我试过这个，它对我有用

```
CGPoint controlsCenter = ViewBottom.center;
if(Pointsvalue > 5)
{
controlsCenter.y += txtFldFrame1.frame.origin.y+20;
ViewBottom.center = controlsCenter;

[ScrollLag addSubview:ViewBottom];
}

[ScrollLag setContentSize:(CGSizeMake(0, controlsCenter.y+100))]; 
```

这里 ScrollLag 是我的滚动，Viewbottom 是我的视图。

# php - 创建行和列中唯一的数字矩阵

> ID：15946255
> 
> 赞同：17
> 
> 时间：2013-04-11T10:17:42.507
> 
> 标签：php, algorithm

如果您在阅读问题后能想出一个更好的标题，请随时更改。

因此，作为输入，我有一个整数，它是 2 到 20 之间的偶数。我们称它为 integer `$teams`。我需要做的是在遵守以下规则的同时生成一个`$teams x $teams`大小介于 1 和（含）之间的数字矩阵：`$teams-1`

1.  对角线（从左上角到右下角）的值为 -1。
2.  同一数字不得多次出现在同一列或同一行中。
3.  如果一个数字出现在第 N 列，那么 in 可能不会出现在第 N 行。例如，如果它出现在第 2 列，它可能不会出现在第 2 行，等等。

请注意，我们只查看对角线上方的部分。它下面的部分只是一个反映（每个数字是它的反映 + $teams - 1），对于这个问题并不重要。

前两个条件相当容易完成，但第三个条件让我很生气。我不知道如何做到这一点，特别是因为这个`$teams`数字可以是 2 到 20 之间的任何偶数。下面给出了为条件 1 和 2 提供正确输出的代码。有人可以帮我解决第 3 个条件吗？

```
$teams = 6;         //example value - should work for any even Int between 2 and 20
$games = array();   //2D array tracking which week teams will be playing

//do the work
for( $i=1; $i<=$teams; $i++ ) {
    $games[$i] = array();
    for( $j=1; $j<=$teams; $j++ ) {
        $games[$i][$j] = getWeek($i, $j, $teams);
    }
}

//show output
echo '<pre>';
$max=0;
foreach($games as $key => $row) {
    foreach($row as $k => $col) {
        printf('%4d', is_null($col) ? -2 : $col);
        if($col > $max){
            $max=$col;
        }
    }
    echo "\n";
}
printf("%d teams in %d weeks, %.2f weeks per team\n", $teams, $max, $max/$teams);
echo '</pre>';

function getWeek($home, $away, $num_teams) {
    if($home == $away){
        return -1;
    }
    $week = $home+$away-2;
    if($week >= $num_teams){
        $week = $week-$num_teams+1;
    }
    if($home>$away){
        $week += $num_teams-1;
    }

    return $week;
} 
```

当前代码（对于 $teams=6）给出以下输出：

```
 -1   1   2   3   4   5
   6  -1   3   4   5   1
   7   8  -1   5   1   2
   8   9  10  -1   2   3
   9  10   6   7  -1   4
  10   6   7   8   9  -1
6 teams in 10 weeks, 1.67 weeks per team 
```

如您所见，数字 1 出现在第 2 列和第 2 行中，数字 4 出现在第 5 列和第 5 行等中，这违反了规则 #3。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T21:51:51.807

无需任何猜测或回溯即可解决该问题，方法是为 n 队在 n 轮比赛中相互比赛创建一个循环赛时间表，然后由此构建一个表示问题中描述的时间表的数组

为了建立时间表，将 n（这里 6）队分成两排

```
1 2 3
6 5 4 
```

这是第 1 轮，其中 1 遇到 6，2 遇到 5，3 遇到 4。

然后对于每一轮，轮换除第 1 队以外的其他球队，给出完整的时间表

```
Round 1    Round 2    Round 3    Round 4    Round 5
1 2 3      1 3 4      1 4 5      1 5 6      1 6 2    
6 5 4      2 6 5      3 2 6      4 3 2      5 4 3 
```

这可以表示为一个数组，每一行代表一个星期，其中第一列中的团队与最后一个团队相遇，第二个与倒数第二个等。

```
1 2 3 4 5 6  (Week 1: 1-6, 2-5, 3-4)
1 3 4 5 6 2  (Week 2: 1-2, 3-6, 4-5)
1 4 5 6 2 3  (Week 3: 1-3, 2-4, 5-6)
1 5 6 2 3 4  (Week 4: 1-4, 3-5, 2-6)
1 6 2 3 4 5  (Week 5: 1-5, 4-6, 2-3) 
```

将团队表示为行和列，将周表示为表条目，这变成

```
-1  1  2  3  4  5
 6 -1  4  2  5  3
 7  9 -1  5  3  1
 8  7 10 -1  1  4
 9 10  8  6 -1  2
10  8  6  9  7 -1 
```

以下是为不同数量的团队生成此代码的代码：

```
<?php

function buildSchedule($teams) {
  // Returns a table with one row for each round of the tournament                   
  // Matrix is built by rotating all entries except first one from row to row,       
  // giving a matrix with zeroes in first column, other values along diagonals       
  // In each round, team in first column meets team in last,                         
  // team in second column meets second last etc.                                    
  $schedule = array();
  for($i=1; $i<$teams; $i++){
    for($j=0; $j<$teams; $j++){
      $schedule[$i][$j] = $j==0 ? 0 : ($i+$j-1) % ($teams-1) + 1;
    }
  }
  return $schedule;
}

function buildWeekTable($schedule) {
  // Convert schedule into desired format                                            

  //create n x n array of -1                                                         
  $teams = sizeof($schedule)+1;
  $table = array_pad(array(), $teams, array_pad(array(), $teams, -1));

  // Set table[i][j] to week where team i will meet team j                           
  foreach($schedule as $week => $player){
    for($i = 0; $i < $teams/2 ; $i++){
      $team1 = $player[$i];
      $team2 = $player[$teams-$i-1];
      $table[$team1][$team2] = $team2 > $team1 ? $week : $week + $teams -1;
      $table[$team2][$team1] = $team1 > $team2 ? $week : $week + $teams -1;
    }
  }
  return $table;
}

function dumpTable($table){
  foreach($table as $row){
    $cols = sizeof($row);
    for($j=0; $j<$cols; $j++){
      printf(" %3d", isset($row[$j]) ? $row[$j] : -1);
    }
    echo "\n";
  }
}

$teams = 6;

$schedule = buildSchedule($teams);
$weekplan = buildWeekTable($schedule);
dumpTable($weekplan); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T18:35:33.043

我不相信有一种确定性的方法可以解决这个问题，而无需让您的程序进行一些反复试验（如果猜测与规则冲突，则猜测然后回溯）。

我的想法是只修改 getWeek() 函数，但将`$games`数组传递给它，然后：

1.  创建与我们的元素属于同一行或列的所有矩阵元素的数组
2.  检查我们的一周是否已经属于同一行或对应的列
3.  如果是这样，然后使用我提供的公式随机选择它
4.  在while循环中执行此操作，直到猜测正确，然后继续

我对 4、6、8、10 和 20 个团队进行了测试，效果很好。`$week`我设置了一个安全机制，如果 while 循环有可能变成无限循环，该机制将设置为 0，但这不会发生。

这是整个代码：

```
$teams = 10;
    $games = array();   //2D array tracking which week teams will be playing

    //do the work
    for( $i=1; $i<=$teams; $i++ ) {
        $games[$i] = array();
        for( $j=1; $j<=$teams; $j++ ) {
            $games[$i][$j] = getWeek($i, $j, $teams, $games);
        }
    }

    echo '<pre>';
    $max=0;
    foreach($games as $key => $row) {
        foreach($row as $k => $col) {
            printf('%4d', is_null($col) ? -2 : $col);
            if($col > $max){
                $max=$col;
            }
        }
        echo "\n";
    }
    printf("%d teams in %d weeks, %.2f weeks per team\n", $teams, $max, $max/$teams);
    echo '</pre>'; 
```

`getWeek`功能：

```
function getWeek($home, $away, $num_teams, $games) {
    if($home == $away){
        return -1;
    }
    $week = $home+$away-2;
    if($week >= $num_teams){
        $week = $week-$num_teams+1;
    }
    if($home>$away){
        $week += $num_teams-1;
    }

    $tries=0;
    $problems=array();

    //create array of all matrix elements that have the same row or column (regardless of value)
    foreach($games as $key => $row) {
        foreach($row as $k => $col) {
            if($home==$key || $home==$k || $away==$key || $away==$k)
                $problems[]=$col;   
        }
    }

    while(in_array($week, $problems)) {

        if($home<=$away)
                $week=rand(1,$num_teams-1);
            else
                $week=rand($num_teams,2*($num_teams-1));

            $tries++;
            if($tries==1000){
                $week=0;
                break;
            }
        }

    return $week;
} 
```

这是结果`$teams=10`：

```
 -1   1   2   3   4   5   6   7   8   9
  10  -1   3   4   5   6   7   8   9   2
  11  12  -1   5   6   7   8   9   1   4
  12  13  14  -1   7   8   9   1   2   6
  13  14  15  16  -1   9   1   2   3   8
  14  15  16  17  18  -1   2   3   4   1
  15  16  17  18  10  11  -1   4   5   3
  16  17  18  10  11  12  13  -1   6   5
  17  18  10  11  12  13  14  15  -1   7
  18  11  13  15  17  10  12  14  16  -1
10 teams in 18 weeks, 1.80 weeks per team 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T14:42:47.177

一种解决方案是将要排除的数字传递给`getWeek()`一个数组（即，一个包含与当前行等效的列上的所有数字的数组）。

您可以创建这样的排除数组，并将其传递给`getWeek()`这样的：

```
//do the work
for( $i=1; $i<=$teams; $i++ ) {
    $games[$i] = array();
    for( $j=1; $j<=$teams; $j++ ) {
        $exclude = array();
        for ( $h=1; $h<=$i; $h++ ) {
           if ( isset($games[$h][$j]) ) {
              $exclude[] = $games[$h][$j];
           }
        }
        $games[$i][$j] = getWeek($i, $j, $teams, $exclude);
    }
} 
```

然后剩下的是检查内部`getWeek()`是否不包含`$exclude`数组中传递的数字之一，如下所示：

```
function getWeek($home, $away, $num_teams, $exclude) {
    //
    // Here goes your code to calculate $week
    //

    if (in_array($week, $exclude)) {
       //the calculated $week is in the $exclude array, so you need
       //to calculate a new value which is not in the $exclude array
       $week = $your_new_valid_value;
    }

    return $week;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-14T15:46:09.387

更新：我尝试使用回溯实现解决方案。代码可能需要重写（可能是一个类）并且可以优化事情。

这个想法是遍历所有解决方案，但一旦明确分支违反了三个规则之一，就停止分支。有 6 个团队，在 71 次尝试中找到了解决方案——即使理论上有 759,375 种组合。

请参阅[http://en.wikipedia.org/wiki/1_%2B_2_%2B_3_%2B_4_%2B_%E2%8B%AF](http://en.wikipedia.org/wiki/1_%2B_2_%2B_3_%2B_4_%2B_%E2%8B%AF)以计算所需的游戏总数。

```
<?php
$size = 10;

$gamesPerTeam = $size-1;
$games = ($gamesPerTeam*($gamesPerTeam+1))/2;

$gamePlan = array_fill(0, $games, 1);

function increaseGamePlan(&$gamePlan, $pointOfFailure, $gamesPerTeam) {
    if ($gamePlan[$pointOfFailure] === $gamesPerTeam) {
        $gamePlan[$pointOfFailure] = 1;
        increaseGamePlan($gamePlan, $pointOfFailure-1, $gamesPerTeam);
    } else {
        $gamePlan[$pointOfFailure]++;
    }

}

function checkWeekFor($i, $row, $column, &$pools) {
    if ($column-$row <= 0)
        return '-';

    if (!in_array($i, $pools['r'][$row]) && !in_array($i, $pools['c'][$column]) && !in_array($i, $pools['c'][$row])) {
        $pools['r'][$row][] = $i;
        $pools['c'][$column][] = $i;
        return true;
    }
}

$a = 0;
while (true) {
    $a++;
    $m = [];

    $pools = [
        'r' => [],
        'c' => [],
    ];
    $i = 0;
    for ($row = 0;$row < $size;$row++) {
        $m[$row] = array();
        $pools['r'][$row] = array();
        for ($column = 0;$column < $size;$column++) {
            if ($column-$row <= 0)
                continue;

            if (!isset($pools['c'][$column]))
                $pools['c'][$column] = array();

            if (!isset($pools['c'][$row]))
                $pools['c'][$row] = array();

            $week = $gamePlan[$i];
            if (!checkWeekFor($week, $row, $column, $pools)) {
                for ($u = $i+1;$u < $games;$u++)
                    $gamePlan[$u] = 1;
                increaseGamePlan($gamePlan, $i, $gamesPerTeam);
                continue 3;
            }
            $m[$row][$column] = $week;
            $i++;
        }
    }
    echo 'found after '.$a.' tries.';
    break;
}

?>
<style>
    td {
        width: 40px;
        height: 40px;
    }
</style>
<table cellpadding="0" cellspacing="0">
    <?
    for ($row = 0;$row < $size;$row++) {
        ?>
        <tr>
            <?
            for ($column = 0;$column < $size;$column++) {
                ?>
                <td><?=$column-$row <= 0?'-':$m[$row][$column]?></td>
                <?
            }
            ?>
        </tr>
        <?
    }
    ?>
</table> 
```

它打印：

```
found after 1133 tries.
-   1   2   3   4   5   6   7   8   9
-   -   3   2   5   4   7   6   9   8
-   -   -   1   6   7   8   9   4   5
-   -   -   -   7   8   9   4   5   6
-   -   -   -   -   9   1   8   2   3
-   -   -   -   -   -   2   3   6   1
-   -   -   -   -   -   -   5   3   4
-   -   -   -   -   -   -   -   1   2
-   -   -   -   -   -   -   -   -   7
-   -   -   -   -   -   -   -   -   - 
```

# javascript - 在日期选择器中显示当前、上个月和下个月的日历

> ID：15946257
> 
> 赞同：1
> 
> 时间：2013-04-11T10:17:46.837
> 
> 标签：javascript, jquery, datepicker

我试图找到一个看起来类似于谷歌分析日期选择器的日期选择器：

![在此处输入图像描述](https://i.stack.imgur.com/KlFui.png)

知道 jQuery 是否提供了类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:20:34.397

这个 Twitter 引导风格的日期范围选择器非常接近。

[https://github.com/dangrossman/bootstrap-daterangepicker](https://github.com/dangrossman/bootstrap-daterangepicker)

![在此处输入图像描述](https://i.stack.imgur.com/4ge8H.png)

还有一个[jQueryUI 日期范围选择器](https://github.com/filamentgroup/jQuery-UI-Date-Range-Picker)，但它已经有一段时间没有更新了。

# java - 3DES 加密/解密在 Windows 中有效，在 Linux 中抛出 IllegalBlockSizeException

> ID：15946259
> 
> 赞同：3
> 
> 时间：2013-04-11T10:17:55.210
> 
> 标签：java, apache-flex, encryption, tripledes

我最近尝试将 Flex/Java 软件解决方案从 Windows 迁移到 Linux（CentOS6 64 位），我遇到了这个问题。

简单地说，我在 Flex/ActionScript 中加密一个短文本（使用 com.hurlant 库），算法是带有 ECB 和 PKCS5Padding 的 TripleDES。服务器是 JBoss 5.1.0GA。

然后将此加密文本发送到 JMS 目标。

在 JMS 的接收端有一个简单的 Java 应用程序（使用 BouncyCastle）尝试解密文本。

所有这一切都像 Windows 上的魅力一样。在 Linux 上我得到这个：

```
javax.crypto.IllegalBlockSizeException: last block incomplete in decryption
at org.bouncycastle.jce.provider.JCEBlockCipher.engineDoFinal(Unknown Source)
at javax.crypto.Cipher.doFinal(DashoA13*..) 
```

我在 Java 应用程序（以 Base64 编码）接收时记录了加密文本，它在 Linux 和 Windows 上是相同的。关键显然是一样的。

我相信这可能是一个字符集编码问题，但即使使用 -Dfile.encoding=UTF8 或 -Dfile.encoding=windows-1252 选项启动 JBoss 和 Java 应用程序也不起作用。

这是用于加密的代码（ActionScript）：

```
var keyData:ByteArray = Hex.toArray(Hex.fromString("jgd8f3m8ybjhwlGhr4hihbp0"));
var pinData:ByteArray = Hex.toArray(Hex.fromString("12341234"));
var pad:IPad = new PKCS5;
var mode:ICipher = Crypto.getCipher("simple-3des-ecb", keyData, pad);
pad.setBlockSize(mode.getBlockSize());               
mode.encrypt(pinData);
var message:IMessage = new AsyncMessage();
message.body = Base64.encodeByteArray(pinData); 
```

这是用于解密的代码（Java）：

```
String userPin3DESEncrypted = new String(Base64.decodeBase64(userPin3DESBase64Encrypted.getBytes()));
byte [] keyByte = "jgd8f3m8ybjhwlGhr4hihbp0".getBytes();
SecretKeySpec secretKeySpec = new SecretKeySpec(keyByte, "DESEDE");
Cipher cipher = Cipher.getInstance("DESEDE/ECB/PKCS5Padding");
cipher.init(Cipher.DECRYPT_MODE, secretKeySpec);
String userPinDecrypted = new String(cipher.doFinal(userPin3DESEncrypted.getBytes())); 
```

如前所述，`userPin3DESBase64Encrypted`Linux 和 Windows 上的内容相同（相同的 Base64 字符串），因此问题不应该出现在 Flex/JBoss 方面......

有任何想法吗？

提前感谢所有将头撞到桌子上的人，因为我已经做了很多次了......

干杯

卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:42:07.950

这是功能齐全的 Java 代码：

```
byte[] userPin3DESEncrypted = Base64.decodeBase64(userPin3DESBase64Encrypted.getBytes());
byte [] keyByte = "jgd8f3m8ybjhwlGhr4hihbp0".getBytes();
SecretKeySpec secretKeySpec = new SecretKeySpec(keyByte, "DESEDE");
Cipher cipher = Cipher.getInstance("DESEDE/ECB/PKCS5Padding");
cipher.init(Cipher.DECRYPT_MODE, secretKeySpec);
String userPinDecrypted = new String(cipher.doFinal(userPin3DESEncrypted)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:22:53.497

从 Base64 解码的加密（即二进制）数据创建字符串是一个错误的想法。对所有二进制数据使用 byte[]。

# html - 打破这些界限的语义正确方法是什么？

> ID：15946261
> 
> 赞同：1
> 
> 时间：2013-04-11T10:17:56.037
> 
> 标签：html, css, semantic-markup

我正在从事的项目有以下页脚：

```
<footer>
  License: <a href="#">Creative Commons BY</a>
  Email: <a href="mailto:#">email@mail.com</a>
  Telephone: <a href="tel:#">0123456789</a>
</footer> 
```

对于这个页脚，我希望每个链接（及其前缀）显示在单独的行上，并且我希望尽可能在语义上有效，而不添加不必要的标记。

我已经考虑过：

*   `<br>`标签，但它只被认为是诗歌中的语义（或类似的内容，其中换行符是信息的固有部分，所以我不能用它来换行（见这个问题：<br>[标签语义替代用法](https://stackoverflow.com/questions/12552978/br-tag-semantic-alternative-usage)）

*   使用 an `ul`，但它并不是一个真正的列表，因此将它包装在 an`ul`中也不是一个有效的选项。

*   使用固定宽度，但我真的很想找到一个动态的解决方案。

*   用 包围每一行`<p>`，这似乎有点过头了，因为它不是真正的段落，而是我要包装的单行。

在不添加额外标记的情况下，以语义合理的方式打破这些行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T10:22:25.230

我认为这是一个*列表*。然后`<ul>`标签可以是适当的。

也许更好的是，您可以将其视为*定义列表*，然后`<dl><dt>`是合适的。

例子：

```
<dl>
    <dt>License:</dt>
    <dd><a href="#">Creative Commons BY</a></dd>
    etc.
</dl> 
```

要将它放在单独的行上，只需将 dts 设置为`float:left`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T10:27:30.263

> [...] 语义上合理的方式，而不添加额外的标记？

我怀疑你可以。我个人会为此使用定义列表。

```
<dl>
    <dt>License:</dt>
    <dd><a href="#">Creative Commons BY</a></dd>
    <dt>Email:</dt>
    <dd><a href="mailto:#">email@mail.com</a></dd>
    <dt>Telephone:</dt>
    <dd><a href="tel:#">0123456789</a></dd>
</dl> 
```

例如，要使它们显示为三行，您可以将 DT 元素向左浮动。

```
dt {
    float: left;
    margin-right: 4px;
} 
```

演示在[http://jsfiddle.net/2nbfg/](http://jsfiddle.net/2nbfg/)

这样做的好处是，在以后设计样式时，您可以获得更多的灵活性。查看[http://jsfiddle.net/2nbfg/1/](http://jsfiddle.net/2nbfg/1/)以了解另一种样式。

请参阅[http://www.maxdesign.com.au/articles/definition/](http://www.maxdesign.com.au/articles/definition/)了解更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T10:27:50.350

谈论语义， `<address>`如果提供的联系信息与文档相关，这可能是一个很好的用例（我可能认为，因为我看到了包含¹的许可证信息）：请参阅[http://html5doctor.com/the-address-element /](http://html5doctor.com/the-address-element/)以供进一步参考。

（如果没有，html5doctor 上的同一页面建议在必要的地方简单地使用带有[hcard 微格式](http://html5doctor.com/microformats/#hcard)`<br>`的段落）

所以在第一种情况下，我会选择

```
<footer>
    <p>
       License: <a href="#" rel="license">Creative Commons BY</a>
    </p>
    <address>
        Email: <a href="mailto:#">email@mail.com</a>
        Telephone: <a href="tel:#">0123456789</a>
    </address>
</footer> 
```

和

```
footer p { margin: 0; }

footer address {
   font-style: normal; /* just because of default browser style */
}

footer address a:after {
  content: "";
  display: block;
} 
```

参见 jsbin 示例：http: [//jsbin.com/ajohur/1/edit](http://jsbin.com/ajohur/1/edit)

* * *

^((1)) *编辑*——正如@unor 所指出的，信息许可证可能应该保留在`address`元素之外，所以我将它包装在一个段落中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T10:23:27.780

因此，如果不按您的要求*添加额外的标记*，则只有一种解决方案，对链接元素使用伪元素并将其设置为块元素：

```
footer a:after {
  content: "";
  display: block;
} 
```

但对我来说，这不是很语义化，因为你应该包装内容是别的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T10:23:47.437

我在语义上将其视为 <dl>。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-04-11T10:22:44.337

使用 CSS 你可能会解决这个问题：

```
footer > a:before{
  content: "<br/>"
} 
```

# php - 带有 wamp 的 Windows 上的 move_uploaded_file() 错误

> ID：15946263
> 
> 赞同：-3
> 
> 时间：2013-04-11T10:18:05.007
> 
> 标签：php, windows, permissions

```
Warning: move_uploaded_file(C:\wamp\www/uploads/a.mp3): failed to open stream: No such file or directory in C:\wamp\www\display\uploadfile.php on line 206

Warning: move_uploaded_file(): Unable to move 'C:\wamp\tmp\php75FD.tmp' to 'C:\wamp\www/uploads/a.mp3' in C:\wamp\www\display\uploadfile.php on line 206 
```

var_dump：

```
array (size=1)
  'file' => 
    array (size=5)
      'name' => string 'a.mp3' (length=5)
      'type' => string 'audio/mp3' (length=9)
      'tmp_name' => string 'C:\wamp\tmp\php75FD.tmp' (length=23)
      'error' => int 0
      'size' => int 4030592 
```

tmp 和上传目录的权限设置为所有人 > 完全权限

PHP 已正确设置上传文件大小

我不知道为什么文件不会上传...

编辑：代码： http: [//pastebin.com/kFG2v2PJ](http://pastebin.com/kFG2v2PJ)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T10:21:38.127

问题：`C:\wamp\www/uploads/`。

将斜杠更改为反斜杠并确保目录`C:\wamp\www\uploads\`存在。您可以使用该[`DIRECTORY_SEPARATOR`](http://php.net/manual/en/dir.constants.php)常量使您的代码在多个系统上工作。

此外，在没有看到您的代码的情况下，您需要确保将正确的参数放入[`move_uploaded_file()`](http://php.net/manual/en/function.move-uploaded-file.php)

代码后编辑：

改变

```
$target_path = APP_PATH."/uploads/"; 
```

至

```
$target_path = APP_PATH . DIRECTORY_SEPARATOR . "uploads" . DIRECTORY_SEPARATOR; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:26:42.303

is your /uploads directory exists? if yes then check `var_dump($_FILES)` check if `$_FILES['uploaded']['error']`. contains 0, which means "no error"

# heritrix - 无法运行 heritrix 作业

> ID：15946264
> 
> 赞同：0
> 
> 时间：2013-04-11T10:18:06.510
> 
> 标签：heritrix

我是 Heritrix 3.1.1 的新手。我在启动 Heritrix 后运行作业时收到一些错误消息。

**我的工作配置：**

metadata.operatorContactUrl="http://localhost"
metadata.jobName=basic
metadata.description=从有用的默认值开始的基本爬取

**种子.textSource.value** [http://www.sina.com.cn](http://www.sina.com.cn)

**当我在控制台上运行作业时：我收到错误消息：**

```
Exception in thread "myjob1 launchthread" java.lang.UnsatisfiedLinkError: Error looking up function 'CreateSymbolicLink
': ???????¨?
        at com.sun.jna.Function.<init>(Function.java:134)
        at com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:345)
        at com.sun.jna.NativeLibrary.getFunction(NativeLibrary.java:325)
        at com.sun.jna.Library$Handler.invoke(Library.java:203)
        at $Proxy6.CreateSymbolicLinkA(Unknown Source)
        at org.archive.util.FilesystemLinkMaker.makeSymbolicLink(FilesystemLinkMaker.java:94)
        at org.archive.spring.PathSharingContext.initLaunchDir(PathSharingContext.java:164)
        at org.archive.spring.PathSharingContext.start(PathSharingContext.java:114) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-20T07:29:21.617

您应该能够在 linux 环境中使用命令行中的以下命令运行作业。

```
curl -v -d "action=launch" -k -u admin:admin --anyauth --location     https://"localhost":8443/engine/job/myjob 
```

您可以从以下页面参考[Heritrix API以获取更多详细信息。](https://webarchive.jira.com/wiki/display/Heritrix/Heritrix+3.x+API+Guide#Heritrix3.xAPIGuide-LaunchJob)

# linux - 如何防止 tshark 在 /tmp 下创建临时文件？

> ID：15946269
> 
> 赞同：0
> 
> 时间：2013-04-11T10:18:19.560
> 
> 标签：linux, tshark

我想运行以下命令：

```
tshark  -l >  some.txt 
```

如您所见，我写入`stdout`文件`some.txt`。

但是我得到了`/tmp`名为临时文件的文件夹`etherXXXX*`，这些文件可以在 1 小时内增加到 1-2G。

从`tshark man`我发现使用`-b option`.

所以我写道：

```
tshark -b filesize:1024 -b files:5  -l >  some.txt 
```

并得到错误：`tshark: Maximum capture file size specified, but capture isn't being saved to a file.`

从`tshark.c`我发现使用`-w`标志的代码中

```
tshark -b filesize:1024 -b files:5  -l -w >  some.txt 
```

现在没有文件被创建，`/tmp`但是 some.txt 文件现在是 bin 文件，我无法打开它。因为`-w`标志使它像`cap`扩展名一样。:(

如何处理临时文件？

顺便说一句，`some.txt`文件内容是：

```
 0.118166 1.1.1.1 -> 2.2.2.2  HTTP GET /services/client/client.php?cnc=13 HTTP/1.1
  0.136235 1.1.1.1 -> 2.2.2.2  HTTP GET /services/client/clsWebClient.php HTTP/1.1
  0.271442 1.1.1.1 -> 2.2.2.2  HTTP GET /services/client/client.php?cnc=13 HTTP/1.1
  1.190018 1.1.1.1 -> 2.2.2.2  HTTP GET /services/client/clsWebClient.php HTTP/1.1 
```

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:24:52.927

只需使用[`-w <outfile>`](http://www.wireshark.org/docs/man-pages/tshark.html#w_outfile)选项将 touput 重定向到文件

在这种情况下（没有输出重定向）：

```
tshark -b filesize:1024 -b files:5  -l -w some.txt 
```

创建的文件将包含来自转储的二进制数据。您可以稍后使用它来分析它[`-r <infile>`](http://www.wireshark.org/docs/man-pages/tshark.html#r_infile)以读取文件并生成文本输出。

# frameworks - 具有时间交互的基于代理的建模？

> ID：15946270
> 
> 赞同：0
> 
> 时间：2013-04-11T10:18:25.557
> 
> 标签：frameworks, programming-languages, agent-based-modeling, time-travel

我需要找到一种基于代理的语言或框架，允许用户“倒带”模型、更改一些参数并查看它如何使用新参数进行开发。基本上 - 一个允许其用户在模拟中进行时间旅行并分支不同时间线的 ABM。

存在这样的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:35:21.850

我不知道是否存在开箱即用的东西，但您通常可以通过使用固定的随机种子来实现非常相似的东西（例如，参见[NetLogo 编程指南中关于随机数](http://ccl.northwestern.edu/netlogo/docs/programming.html#random)的部分）。如果您使用相同的种子，一个设计良好的 ABM 平台每次都会给您相同的结果，*除非您更改模型*中的某些内容：在您的情况下，某些参数会在某些时候发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T20:38:33.573

我认为你需要在这里做两件事

1) 开发一种机制来在每个模型滴答时保存代理的状态和模型状态。这被称为[冷冻干燥数据](http://repast.sourceforge.net/docs/tutorial/SIM/2-03%20Freezedrying%20and%20Loading%20Data.html)（至少在 Repast 中是这样的）。

2）将每个冻干状态保持在二叉树状结构中。在此示例中，您的根节点成为“未更改的”时间线，并且由于某些更改的参数，任何子节点都是可能的替代方案。

即使对于简单的模型，您对持有许多似是而非的期货的存储需求也成为需要管理的东西。

另外，您打算如何展示模型？Repast Simphony 中的 2D 渲染引擎有一些不足之处，并且在您的屏幕上弹出大量 Java Swing 组件不太可能有效。如果您愿意花时间构建自定义视图来渲染模拟，我建议您查看[Crooks](http://gisagents.blogspot.co.uk/)的工作，特别感兴趣的是他的论文[涵盖松散耦合的 ABM。](http://www.bartlett.ucl.ac.uk/casa/pdf/paper161.pdf)

# ios - 在 NSMutableArray 中，值的元素发生了奇怪的变化

> ID：15946273
> 
> 赞同：0
> 
> 时间：2013-04-11T10:18:31.750
> 
> 标签：ios, xcode, arrays, nsmutablearray, cgpoint

这是相关代码：

```
@property (nonatomic, strong) NSMutableArray *coordinateInPixels;

...

NSLog(@"First log %@",self.coordinateInPixels);
NSLog(@"self.zoomScale %f",self.zoomScale);

if ([self.coordinateInPixels count]>0) {
    NSMutableArray *coordInScala = self.coordinateInPixels;

    for (int i=0; i<[coordInScala count]; i++) {
        CGPoint puntoRicalcolato = CGPointMake([[coordInScala objectAtIndex:i] CGPointValue].x*self.zoomScale,
        [[coordInScala objectAtIndex:i] CGPointValue].y*self.zoomScale);

        [coordInScala replaceObjectAtIndex:i withObject:[NSValue valueWithCGPoint:puntoRicalcolato]];
    }

    [self DrawRoute:coordInScala];

}

NSLog(@"Third log %@",self.coordinateInPixels); 
```

DrawRoute 很简单：

```
- (void)DrawRoute:(NSMutableArray *)coords
{
    self.route = [[ALCRoute alloc] init];
    [self.route setCoord:coords];

    CGRect rettangolo = CGRectMake([[coords objectAtIndex:0] CGPointValue].x, [[coords lastObject] CGPointValue].y, [[coords lastObject] CGPointValue].x-[[coords objectAtIndex:0] CGPointValue].x, [[coords objectAtIndex:0] CGPointValue].y-[[coords lastObject] CGPointValue].y);

    NSLog(@"Second log %@",self.coordinateInPixels);

    [self.route setFrame:rettangolo];
    [self addSubview:self.route];

} 
```

**问题定义：**

问题是 self.coordinateInPixels 的元素在第二个和第三个日志中与第一个不同。在drawroute之前没有任何其他操作，但是神奇的元素会在没有（显然显然）任何原因的情况下发生变化......有什么想法吗？

这是输出控制台：

```
2013-04-11 12:00:05.265 APP[4233:14c03] First log (
    "NSPoint: {2442.0994, 2088.6094}",
    "NSPoint: {2442.0994, 2088.6094}",
    "NSPoint: {1968.8776, 1395.6793}",
    "NSPoint: {1965.4939, 1390.1688}",
    "NSPoint: {1962.0531, 1384.6427}",
    "NSPoint: {2442.0752, 2088.6128}",
    "NSPoint: {2442.0752, 2088.6128}",
    "NSPoint: {2167.9409, 1604.3606}",
    "NSPoint: {2164.2456, 1598.6599}",
    "NSPoint: {2160.8596, 1593.2056}",
    "NSPoint: {2157.3921, 1587.6027}"
)
2013-04-11 12:00:05.266 APP[4233:14c03] self.zoomScale 0.552063
2013-04-11 12:00:05.266 APP[4233:14c03] Second log (
    "NSPoint: {1348.1931, 1153.0443}",
    "NSPoint: {1348.1931, 1153.0443}",
    "NSPoint: {1086.9448, 770.50317}",
    "NSPoint: {1085.0768, 767.461}",
    "NSPoint: {1083.1772, 764.41022}",
    "NSPoint: {1348.1798, 1153.0461}",
    "NSPoint: {1348.1798, 1153.0461}",
    "NSPoint: {1196.8403, 885.70837}",
    "NSPoint: {1194.8003, 882.56128}",
    "NSPoint: {1192.931, 879.55011}",
    "NSPoint: {1191.0167, 876.45697}"
)
2013-04-11 12:00:05.267 APP[4233:14c03] Third log (
    "NSPoint: {1348.1931, 1153.0443}",
    "NSPoint: {1348.1931, 1153.0443}",
    "NSPoint: {1086.9448, 770.50317}",
    "NSPoint: {1085.0768, 767.461}",
    "NSPoint: {1083.1772, 764.41022}",
    "NSPoint: {1348.1798, 1153.0461}",
    "NSPoint: {1348.1798, 1153.0461}",
    "NSPoint: {1196.8403, 885.70837}",
    "NSPoint: {1194.8003, 882.56128}",
    "NSPoint: {1192.931, 879.55011}",
    "NSPoint: {1191.0167, 876.45697}"
) 
```

**解决方案！**

改变这个：

```
if ([self.coordinateInPixels count]>0) {
        NSMutableArray *coordInScala = self.coordinateInPixels;

        for (int i=0; i<[coordInScala count]; i++) {
            CGPoint puntoRicalcolato = CGPointMake([[coordInScala objectAtIndex:i] CGPointValue].x*self.zoomScale,
            [[coordInScala objectAtIndex:i] CGPointValue].y*self.zoomScale);

            [coordInScala replaceObjectAtIndex:i withObject:[NSValue valueWithCGPoint:puntoRicalcolato]];
        }

        [self DrawRoute:coordInScala];

    } 
```

有了这个：

```
if ([self.coordinateInPixels count]>0) {
    NSMutableArray *coordInScala = [[NSMutableArray alloc] init];

    for (int i=0; i<[self.coordinateInPixels count]; i++) {
        CGPoint puntoRicalcolato = CGPointMake([[self.coordinateInPixels objectAtIndex:i] CGPointValue].x*self.zoomScale,
                                                   [[self.coordinateInPixels objectAtIndex:i] CGPointValue].y*self.zoomScale);

        [coordInScala addObject:[NSValue valueWithCGPoint:puntoRicalcolato]];
    }

    [self DrawRoute:coordInScala];

} 
```

一切都开始正常工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:29:43.177

在这一行：

```
 NSMutableArray *coordInScala = self.coordinateInPixels; 
```

您没有制作新数组。`coordInScala`是对`self.coordinateInPixels`您所做的任何更改的引用，您实际上是在将它们更改为`self.coordinateInPixels`.

你可能想要这个：

```
 NSMutableArray *coordInScala = self.coordinateInPixels.mutableCopy; 
```

# java - 如何在程序中找到谁调用了我的方法？

> ID：15946277
> 
> 赞同：0
> 
> 时间：2013-04-11T10:18:43.620
> 
> 标签：java, eclipse, object, methods

我有一个 java 类，它有一些方法，但它们需要来自其他类的一些对象。这个程序中有很多类，我想知道如何在 Eclipse 中找到谁（从哪个类）调用我的方法并发送我的方法对象？我正在使用 Eclipse。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:21:58.163

右键单击该方法，然后单击“查找引用”或“打开调用层次结构”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:22:21.013

突出显示该方法并按 Ctrl + Shift + G。这应该会为您带来调用相关方法的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:22:29.717

右键单击方法（或构造函数调用的类名称）并从上下文菜单中选择“打开调用层次结构” - 您还可以浏览调用历史记录。

# jquery - 如何在成功时将变量传递给getJSON回调函数

> ID：15946280
> 
> 赞同：1
> 
> 时间：2013-04-11T10:18:49.500
> 
> 标签：jquery

我有这个示例代码：

```
for (var i = 0; i < array.length; i++) {
    $.getJSON("http://someapi", { "one": two }, function (result) {
        array[i].value = result.value;
    });
} 
```

然而，回调函数中的 i 变量并不符合预期。for 循环运行得非常快，并且在第一个回调函数收到答案之前完成，因此 i 变量位于循环中的某个位置，甚至完成并超过了数组边界。

无论如何，有没有办法将变量传递给回调函数？像这样的东西：

```
$.getJSON("http://someapi", { "one": two }, function (result, i) {
    array[i].value = result.value;
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:22:05.290

```
for (var i = 0; i < array.length; i++) {
    $.getJSON("http://someapi", { "one": two }, (function(j) {
        return function (result) {
            array[j].value = result.value;
        };
    })(i)); // Immediate invocation is your best friend
} 
```

像这样，您可以`i`在声明回调时传递变量（而不是像在代码中那样评估它时）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T10:26:35.840

Creating an additional closure to store the current index and using that inside your actual function should do the trick, similar to this:

```
for (var i = 0; i < array.length; i++) {
    $.getJSON("http://someapi", {
        "one": two
    }, (function () { // added closure...
        var currentIndex = i; //...to allow declaration of additinal variables

        return function (result) {
            array[currentIndex].value = result.value; // use currentIndex here
        };
    })()); // () force immidiate execution
} 
```

* * *

[**DEMO**](http://jsfiddle.net/W6EHx/) - Comparing results between not using a closure and using a closure

* * *

Open the DEMO and then click `Run`, watching the console outputs.

Code from DEMO:

```
var array = [1, 2, 3, 4, 5];

// Wihtout closure i is not always as expected.
for (var i = 0; i < array.length; i++) {
    $.getJSON("#", {
        "one": 1
    }, function (result) {
        console.log('no-closure: ' + i);
    });
}

// With closure stored i (currenIndex) is in the expected order
for (var i = 0; i < array.length; i++) {
    $.getJSON("#", {
        "one": 1
    }, (function () {
        var currentIndex = i;
        return function (result) {
            console.log('closure: ' + currentIndex);
        };
    })());
} 
```

# c# - ASP.NET - Android 设备的 C# 警报

> ID：15946290
> 
> 赞同：1
> 
> 时间：2013-04-11T10:19:14.793
> 
> 标签：c#, android, asp.net, alert

我必须在 Android 手机上显示警报。我正在使用 asp.net (c#)，当我使用时：

```
protected void CheckNumber(object sender, EventArgs e)
{
    ...
    if (Convert.ToInt64(TextBox.Text) <= 0)
    {
         Response.Write("<script>alert('The number must be positive')</script>");
         return;
    }
    ...
} 
```

没有在顶部打开的消息或屏幕。

我也试过这个没有任何区别：

```
if (Convert.ToInt64(TextBox.Text) <= 0)
{
      MessageBox.Show("The number must be positive!");
      return;
}
... 
```

如何在手机屏幕上显示消息和确认按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:24:36.140

尝试使用`Toasts` [http://developer.android.com/guide/topics/ui/notifiers/toasts.html](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)，

或使用`AlertDialog` [http://mobile.tutsplus.com/tutorials/android/android-sdk-alert/](http://mobile.tutsplus.com/tutorials/android/android-sdk-alert/)

# c# - 如何在标签中加载数组？

> ID：15946294
> 
> 赞同：1
> 
> 时间：2013-04-11T10:19:21.437
> 
> 标签：c#, winforms

我有一个从 csv 文件中检索数据的数组。

```
 String[] array = File.ReadAllText(@"c:\\arrayexample.csv").Split(';'); 
```

这个数组现在被填充到数组[10]。将数组中的数据加载到标签的最佳方法是什么？例如，我可以在生成的标签中加载所有数据吗：

```
label1  // array[0]
label2  // array[1]
label3  // array[2]
..and so on. 
```

我可以通过自己添加标签来手动完成，但有没有办法对其进行编程？另外，这可以使用 System.IO 吗？

```
label1.AppendText(array[i]); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:21:46.540

假设您的标签与 中的字符串一一对应`array`，您可以将这些标签放在一个数组中，然后使用循环设置其中的数据，如下所示：

```
var labels = new[] {label1, label2, label3, ...};
for (var i = 0 ; i != array.Length ; i++) {
    labels[i].Text = array[i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T10:21:41.803

```
foreach(String labelText in array)
{
    Label label = new Label();
    label.Text(labelText);
    // Do whatever you want with each label here. i.e. add to your form.
} 
```

# android - 在某些设备上使用 SENDTO 发送带附件的电子邮件不起作用

> ID：15946297
> 
> 赞同：7
> 
> 时间：2013-04-11T10:19:28.193
> 
> 标签：android, sendto

一开始你会想“等等，这个问题是重复的！”。继续阅读。

我正在尝试使用 Intent `ACTION_SENDTO`（使用电子邮件 URI 作为数据）来让*电子邮件*应用程序响应。

（使用`ACTION_SEND`没有数据 URI 的标准“发送”选择器意味着非电子邮件应用程序（例如 Google Drive）也会响应）。

我的问题是附件适用`ACTION_SEND`于所有设备，但是 - 当`ACTION_SENDTO`仅使用某些设备正确附加文件时。Nexus 7 工作，但三星 Galaxy Tab 和 Acer Iconia**不**工作。

您可以在下面并排看到不同的方法：

```
 String email    = getActivity().getResources().getString(R.string.supportEmail);
    String subject  = getActivity().getResources().getString(R.string.sFeedback);
    subject         = String.format(subject, 
                      getActivity().getResources().getString(R.string.productName));
    String content  = getActivity().getResources().getString(R.string.whatFeedbackWouldYouLikeToProvide) + "\n\n" + 
                      mMessage.getText().toString();
    File toSend     = new File(outfile);

    if(toSend.exists()) {
        Log.e("Feedback", "File path: " + toSend.getAbsolutePath());

        Intent emailIntent = new Intent(android.content.Intent.ACTION_SENDTO);
        emailIntent.setData(Uri.parse("mailto:" +email));
        emailIntent.putExtra(android.content.Intent.EXTRA_STREAM,   Uri.fromFile(toSend));
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,  subject);               
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,     content);  

    /*  Intent emailIntent = new Intent(Intent.ACTION_SEND);
        emailIntent.setType("message/rfc822");
        emailIntent.putExtra(Intent.EXTRA_EMAIL  , new String[]{email});
        emailIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
        emailIntent.putExtra(Intent.EXTRA_TEXT   , content);
        emailIntent.putExtra(Intent.EXTRA_STREAM , Uri.fromFile(toSend)); */

        try {
            startActivity(emailIntent);
        } catch (ActivityNotFoundException anfe) {
            Toast.makeText(getActivity(), getResources().getString(R.string.pleaseInstallAnEmailClientInOrderToSendUsFeedback), 8000).show();
        }
    } 
```

您可以看到文件路径似乎不是问题，我在一些记录中添加了报告：

三星提供：

```
04-11 11:40:09.953: E/Feedback(6286): File path: /storage/sdcard0/logs.zip 
```

Nexus 提供：

```
04-11 11:38:59.249: E/Feedback(12702): File path: /storage/emulated/0/logs.zip 
```

（两者都基于`getExternalStorageDirectory()`确保跨应用访问）。

有谁知道为什么有区别？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-12-21T05:46:57.090

我想出的唯一解决方案是以下一个。这是我在寻找完整答案时发现的其他一些内容的混合体。以下将仅显示电子邮件应用程序并允许包含附件。最重要的部分在这里找到：[https ://stackoverflow.com/a/8550043/4927659](https://stackoverflow.com/a/8550043/4927659)

```
ArrayList<Uri> uris = new ArrayList<>();
uris.add(Uri.parse("file://" + filepath)); 
//filepath is something like that: /mnt/sdcard/DCIM/DSC0001.JPG
Intent emailIntent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts(
                "mailto", "example@gmail.com", null));
        emailIntent.putExtra(Intent.EXTRA_SUBJECT, "Mail subject");
        List<ResolveInfo> resolveInfos = getPackageManager().queryIntentActivities(emailIntent, 0);
        List<LabeledIntent> intents = new ArrayList<>();
        for (ResolveInfo info : resolveInfos) {
            Intent intent = new Intent(Intent.ACTION_SEND_MULTIPLE);
            intent.setComponent(new ComponentName(info.activityInfo.packageName, info.activityInfo.name));
            intent.putExtra(Intent.EXTRA_EMAIL, new String[]{"example@gmail.com"});
            intent.putExtra(Intent.EXTRA_SUBJECT, "Mail subject");
            intent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris); //ArrayList<Uri> of attachment Uri's
            intents.add(new LabeledIntent(intent, info.activityInfo.packageName, info.loadLabel(getPackageManager()), info.icon));
        }
        Intent chooser = Intent.createChooser(intents.remove(intents.size() - 1), "Send email with attachments...");
        chooser.putExtra(Intent.EXTRA_INITIAL_INTENTS, intents.toArray(new LabeledIntent[intents.size()]));
        startActivity(chooser); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-16T09:05:01.400

尝试通过 ACTION_SENDTO 解决活动，但实际上是通过 ACTION_SEND 发送。

```
Intent intent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts(
                    "mailto", "", null));
            intent.putExtra(Intent.EXTRA_SUBJECT, title);
            intent.putExtra(Intent.EXTRA_TEXT, text);
            intent.putExtra(Intent.EXTRA_STREAM, getSnapshotUri(snapshot, context, event));

            List<ResolveInfo> resolveInfos = context.getPackageManager().queryIntentActivities(intent, 0);
            if (resolveInfos.size() == 0) {
                new AlertDialog.Builder(context)
                        .setMessage(R.string.no_mail_app)
                        .setPositiveButton(R.string.ok, null)
                        .show();
            } else {
                String packageName = resolveInfos.get(0).activityInfo.packageName;
                String name = resolveInfos.get(0).activityInfo.name;

                intent.setAction(Intent.ACTION_SEND);
                intent.setComponent(new ComponentName(packageName, name));

                context.startActivity(intent);
            } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-02T09:33:30.233

我遇到了类似的问题，整天摸不着头脑，直到在中文博客上找到了可能的答案：http: [//flysnow.iteye.com/blog/1128354](http://flysnow.iteye.com/blog/1128354)

在文章的最后，它谈到了 Android 内置电子邮件客户端的意图过滤器：

```
<activity
    android:name=".activity.MessageCompose"
    android:label="@string/app_name"
    android:enabled="false">
    <intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <action android:name="android.intent.action.SENDTO" />
        <data android:scheme="mailto" />
        <category android:name="android.intent.category.DEFAULT" />
        <category android:name="android.intent.category.BROWSABLE" />
    </intent-filter>
    <intent-filter android:label="@string/app_name">
        <action android:name="android.intent.action.SEND" />
        <data android:mimeType="text/plain" />
        <data android:mimeType="image/*" />
        <data android:mimeType="video/*" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

你可以看到它有两个意图过滤器来不同地处理 SEND 和 SENDTO 意图，并且只有 SEND 是用 mimeType 指定的。代码片段可以追溯到 Android 1.6，但没有太大变化。您可以在最新版本中找到它：

[https://android.googlesource.com/platform/packages/apps/Email/+/f44b729bff619d0a9f0b1492726351e41c1e5d5d/AndroidManifest.xml](https://android.googlesource.com/platform/packages/apps/Email/+/f44b729bff619d0a9f0b1492726351e41c1e5d5d/AndroidManifest.xml)

我不确定他们为什么不在 SENDTO 意图中指定 mimeType，但事实就是这样，我认为大多数电子邮件客户端可能都是这样做的（Gmail 除外，它可以在使用 SENDTO 意图时成功附加文件）。你的情况可能也是这样吗？因此，为了安全起见，您应该只使用 SEND 意图发送附件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:16:03.327

您可以尝试将主体和主体放在 Uri 中。 [这个问题](https://stackoverflow.com/questions/3132889/action-sendto-for-sending-an-email)似乎暗示这可能会解决问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-21T14:08:01.167

`Intent.ACTION_SEND`即使指定了收件人（这是不正确的，但是..），事情也会由不同的电子邮件客户端正确处理。因此，如果要支持 Gmail 以外的其他客户端，则**必须使用此操作。**这就是它的工作原理。

要添加接收者，只需添加与使用时添加的完全相同的行`Intent.ACTION_SENDTO`：

```
Intent emailIntent = new Intent(Intent.ACTION_SEND);
String mailto = "abc@def.com";
emailIntent.putExtra(Intent.EXTRA_EMAIL, new String[]{mailTo});
... 
```

在我的情况下，文件附件没有添加到 Gmail 以外的客户端中，`Intent.ACTION_SENDTO`并切换到`Intent.ACTION_SEND`解决它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-08T13:02:38.273

经过大量尝试和组合，这是我用来仅在电子邮件应用程序中发送多个附件的版本：

```
public static void sendMailWithAttachedFiles(Context activityContext, ArrayList<String> filePaths, String MAIL, String SUBJECT, String TEXT) {
    ArrayList<Uri> uris = new ArrayList<>();
    for (String filePath : filePaths) {
        File file = new File(filePath);

        Uri csvUri = null;
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.N) {
            csvUri = FileProvider.getUriForFile(activityContext, activityContext.getPackageName() + ".provider", file);
        } else {
            //doesn't work in API 24+
            csvUri  =   Uri.fromFile(file);
        }

        uris.add(csvUri);
    }

    Intent emailIntent = new Intent(Intent.ACTION_SENDTO, Uri.fromParts("mailto", MAIL, null));
    emailIntent.putExtra(Intent.EXTRA_SUBJECT, SUBJECT);
    emailIntent.putExtra(Intent.EXTRA_TEXT, TEXT);

    List<ResolveInfo> resolveInfos = activityContext.getPackageManager().queryIntentActivities(emailIntent, 0);
    List<LabeledIntent> intents = new ArrayList<>();
    for (ResolveInfo info : resolveInfos) {
        Intent intent = new Intent(Intent.ACTION_SEND_MULTIPLE);
        intent.setComponent(new ComponentName(info.activityInfo.packageName, info.activityInfo.name));
        intent.putExtra(Intent.EXTRA_EMAIL, new String[]{MAIL});
        intent.putExtra(Intent.EXTRA_SUBJECT, SUBJECT);
        intent.putExtra(Intent.EXTRA_TEXT, TEXT);
        intent.putParcelableArrayListExtra(Intent.EXTRA_STREAM, uris);
        intents.add(new LabeledIntent(intent, info.activityInfo.packageName, info.loadLabel(activityContext.getPackageManager()), info.icon));
    }
    Intent chooser = Intent.createChooser(intents.remove(intents.size() - 1), "Send email using");
    chooser.putExtra(Intent.EXTRA_INITIAL_INTENTS, intents.toArray(new LabeledIntent[intents.size()]));
    activityContext.startActivity(chooser);
} 
```

在清单中：

```
 <provider
        android:name="androidx.core.content.FileProvider"
        android:authorities="${applicationId}.provider"
        android:exported="false"
        android:grantUriPermissions="true">
        <meta-data
            android:name="android.support.FILE_PROVIDER_PATHS"
            android:resource="@xml/provider_paths" />
    </provider> 
```

在 res 文件夹中创建 xml 文件夹并添加此文件 provider_paths.xml

```
<?xml version="1.0" encoding="utf-8"?>
<paths>
    <external-path name="external_files" path="."/>
</paths> 
```

# uploadify - Uploadify 加载两次（一次永远不会完成 - 在 IE 10 中导致错误）

> ID：15946300
> 
> 赞同：2
> 
> 时间：2013-04-11T10:19:55.000
> 
> 标签：uploadify, internet-explorer-10

我在一个项目中使用了 Uploadify 的 flash 版本。使用 Firebug 时，我可以看到 uploadify.swf 加载了两次。一行正常完成，而另一行（图像中的顶部）从未完成。

在 IE 10 中运行网站并更改页面时，由于第二次 swf 加载（永远不会完成），出现错误“预期对象”。

两个主要问题： 1\. 为什么uploadify 加载两次？2\. 我能以某种方式解决IE 10的问题吗？我注意到设置使它工作，但我不想这样做，因为很多其他的东西都会受到影响。

代码（没什么特别的）：

```
$('#upload').uploadify({
    uploader: ...,
    swf: '../Content/uploadify.swf'
}); 
```

![在此处输入图像描述](https://i.stack.imgur.com/zcNgG.png)

# javascript - colorbox 表单提交并从表单中获取发布数据

> ID：15946302
> 
> 赞同：0
> 
> 时间：2013-04-11T10:20:00.953
> 
> 标签：javascript, forms, submit, colorbox

我一直在安静地做这件事，但我运气不好

1.  在主页上即时调用表单

    a class="viewForm" name="viewForm" href="viewForm.php">选择日期

用 javascript

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function(){
      $(".viewForm").colorbox();
    });
</script> 
```

这个正在工作

1.  现在 viewForm 有这个代码

    ### 选择日期

    从到

用java脚本

```
<script type="text/javascript" charset="utf-8">
function lightbox(){    
  $.colorbox({width:"80%", height:"80%", iframe:true, href:"select-date.php"});
}
</script> 
```

这也有效。

1.  问题是当我单击提交按钮时，我认为从和到的发布数据没有传递到 select-date.php。请我在这方面需要帮助。

# google-maps - Google Map v3 - 打开时将信息窗口居中

> ID：15946303
> 
> 赞同：7
> 
> 时间：2013-04-11T10:20:04.110
> 
> 标签：google-maps, google-maps-api-3, maps, center, infowindow

我有一个可以正常工作的谷歌地图，但我只需要对其进行调整，以便在单击标记并打开信息窗口时，我希望该标记（和地图）位于屏幕中央。这样信息窗口就是直接焦点。

如果有帮助，我将使用[Infobox.js](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/reference.html)创建信息窗口。我试过使用偏移

> 像素偏移：新的 google.maps.Size(-97, -20)

但是当您打开标记并且它不准确时，这不会使信息窗口或地图居中。

我的代码（[现场示例](http://visualartscambridge.org/home/)）：

```
var ib = new InfoBox();

function initialize() { 
var mapOptions = {
  zoom: 12,
  center: new google.maps.LatLng(52.204872,0.120163),
  mapTypeId: google.maps.MapTypeId.ROADMAP,
  styles: styles,
  scrollwheel: false
};
var map = new google.maps.Map(document.getElementById('map_canvas'),mapOptions);

    google.maps.event.addListener(map, "click", function() { ib.close() });

setMarkers(map, sites);
    infowindow = new google.maps.InfoWindow({
    content: "loading..."

});
}

var sites = [
['The Frontroom', 52.202977,0.138938, 1, '<p>The Frontroom <br/>23-25 Gwydir Street, Cambridge, CB1 2LG <br/>01223 305 600 <br/> <a href="http://www.frontroomcambridge.com/">Website</a></p>'],
['Fitzwilliam Museum',52.199678,0.119931, 2, '<p>Fitzwilliam Museum <br/>Trumpington St, Cambridge, CB2 1RB <br/>01223 332900 <br/> <a href="http://www.fitzmuseum.cam.ac.uk/">Website</a></p>'],
['Wysing Arts centre', 52.182077,-0.06977, 3, '<p>Wysing Arts Centre <br/>Fox Rd, Cambridge <br/>CB23 2TX <br/>01954 718881 <br/> <a href="http://www.wysingartscentre.org/">Website</a></p>']
];

function createMarker(site, map){
var siteLatLng = new google.maps.LatLng(site[1], site[2]);
var marker = new google.maps.Marker({
    position: siteLatLng,
    map: map,
    title: site[0],
    zIndex: site[3],
    html: site[4],
    icon: "http://visualartscambridge.org/wp-content/uploads/2013/03/map-dot.png"
});

var boxText = document.createElement("div");
boxText.style.cssText = "margin-top: -200px; height:200px; background: white; padding: 10px; -webkit-border-radius: 6px; -moz-border-radius: 6px; border-radius: 6px;";
boxText.innerHTML = marker.html;

var myOptions = {
         content: boxText
        ,disableAutoPan: false
        ,maxWidth: 0
        ,pixelOffset: new google.maps.Size(-97, -20)
        ,zIndex: null
        ,boxStyle: { 
          background: "url('http://visualartscambridge.org/wp-content/uploads/2013/03/box-marker.png') no-repeat"
          ,width: "195px"
         }
        ,closeBoxMargin: "-185px 12px 200px 2px"
        ,closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
        ,infoBoxClearance: new google.maps.Size(0, 250)
        ,isHidden: false
        ,alignBottom: true
        ,pane: "floatPane"
        ,enableEventPropagation: false
};

google.maps.event.addListener(marker, "click", function (e) {
 ib.close();
 ib.setOptions(myOptions);
 ib.open(map, this);
});
return marker;
}

function setMarkers(map, markers) {

for (var i = 0; i < markers.length; i++) {
createMarker(markers[i], map);
}
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-11T10:26:43.997

Add a call to google.maps.Map.setCenter in the marker click listener. This will center the map on the marker:

```
google.maps.event.addListener(marker, "click", function (e) {
 ib.close();
 ib.setOptions(myOptions);
 ib.open(map, this);
 map.setCenter(this.getPosition());
}); 
```

The above code will instantly jump to the new location, if you want a smoother animation, you can use `map.panTo(this.getPosition());` rather than `map.setCenter(this.getPosition());`

# z3 - 过渡系统中的计数器循环 - Z3

> ID：15946304
> 
> 赞同：1
> 
> 时间：2013-04-11T10:20:04.703
> 
> 标签：z3, transition-systems

我使用 Z3 的 PDR 引擎来证明转换系统中的不变量。当转换系统包含一个计数器循环时，必须通过该循环才能达到特定状态，则性能很慢。

[在下面的源代码中，您会看到一个包含 3 个状态和 3 个转换的转换系统示例，该转换系统使用Z3 Fixedpoint Homepage](http://rise4fun.com/z3py/tutorial/fixedpoints)上的转换系统 Python 类实现。在最后一行中，查询从状态 L0 开始到达状态 L2。因此转换 t2 必须经过 y 次。

如果我初始化 y==10，则答案计算得很快。但是初始化 y==1000 时性能很慢。

```
L0 = L.L0 
L1 = L.L1
L2 = L.L2
y=Int('y')
i = Int('i')
state  = Const('state', L)

t1 = { "guard" : state == L0,
   "effect" : [ L1, i ] }
t2 = { "guard" : And(state == L1),
   "effect" : [ L1, i+1 ] }
t3 = { "guard" : And(state == L1,i>y),
   "effect" : [ L2, i]}

ptr = TransitionSystem( And(state == L0, i == 0, y==10),[t1, t2, t3],[state, i])
ptr.query(state==L2) 
```

是否有可能以 Z3 获得更好性能的其他方式计算从 L0 到 L2 的路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:13:00.510

对于您的示例，Z3 目前没有更快的方法。Z3 的实现在反例循环的深度上花费了大致二次开销，因为它试图将（相同的）属性推送到展开的深度。

一般来说，Z3 的 PDR 引擎不太适合规划问题。确定不存在痕迹时会好一些。

# javascript - 从 javascript 更改 html 中的字体和值

> ID：15946311
> 
> 赞同：0
> 
> 时间：2013-04-11T10:20:42.810
> 
> 标签：javascript, html, forms

我有一个 html 表单，我想在单击按钮时将文本从“冠军联赛琐事”更改为“曼彻斯特”。它只改变了一秒钟，然后变回“冠军联赛琐事”。我无法弄清楚为什么它会变回来。有任何想法吗？

```
<script  type="text/javascript" src="quiz.js" ></script>
<body>
<form action="" method="post" onsubmit="return checkscript()">
    <h1>Choose a Quiz</h1>

    <p><input type="radio" name="Radio" value="1" /><font size="5"
    color="#0033CC" id="cl">Champions League Trivia</font><br />
    <br />
    <input type="radio" name="Radio" value="2" /><font size="5"
    color="#CC0000" id="epl">English Premier League Trivia</font><br />
    <br />
    <input type="radio" name="Radio" value="3" /><font size="5"
    color="#660033" id="ll">La Liga Trivia</font><br />
    <br />
    <input type="submit" name="Submit" value="Go" onclick="quizRun()" /></p>
    </form>
    <p id="result"></p>
    </body>
    </html> 
```

这是javascript

```
function quizRun()
{
var inputs = document.getElementsByTagName("input");
var choice = 0;
if (inputs[0].checked) {
        choice = 1;
        var cl = document.getElementById('cl');
        cl.textContent = 'Manchester';
}
if (inputs[1].checked) {
        choice = 2;

}
if (inputs[2].checked) {
        choice = 3;
}
}
function checkscript()
{
    var inputs = document.getElementsByTagName("input");
    for (var i=0, l=inputs.length; i<l; i++) {
        if (inputs[i].name === "Radio" && inputs[i].checked) return true;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:26:27.557

I tried your script and I found this: the value changes but the form is submitted, so the page reloads and the texts changes back.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:29:15.033

发生的事情是您的按钮是`type = "submit"`. 当您提交表单时，页面正在重新加载并返回原始值。

如果您不想提交表单，只需将“开始”按钮更改为`type = "button"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:25:16.557

Try using `cl.innerHTML = 'Manchester';`

**Edit:**

Your Form tag has no action so the page probably refreshes causing the original value to return. Adding a `return false` or `preventDefault` to your form submit event will prevent the form from being submitted.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T10:30:09.680

我实际上自己尝试了代码，innerHTML或innerText都不起作用@ben fossen所以这可能发生的唯一原因是因为值实际上发生了变化，但随后表单提交并重置了值

# android - 在 android 应用程序中使用传单显示在线地图

> ID：15946316
> 
> 赞同：10
> 
> 时间：2013-04-11T10:20:58.093
> 
> 标签：android, android-webview, leaflet

是否有任何示例项目展示了如何正确使用传单在 android 应用程序中显示在线地图。因为我尝试了很多示例，但每次我的应用程序中有一个空的 webview。这是我的代码：

```
private WebView mWebView;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    mWebView= (WebView)findViewById(R.id.map);
    mWebView.setWebChromeClient(new WebChromeClient());
    mWebView.loadUrl("file:///android_asset/www/map.html");

} 
```

这是 HTML 对象：

```
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="css/leaflet-0.5.css" />
    <script>L_PREFER_CANVAS = true;</script>
    <script type="text/javascript" charset="utf-8" src="js/leaflet-src-0.5.js"></script>            
    <style>
        body {
            padding: 0;
            margin: 0;
        }
        html, body, #map {
            height: 100%;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>

        var map = L.map('map');

        L.tileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png', {
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
            maxZoom: 18
        }).addTo(map);
        map.locate({setView: true, maxZoom: 16});
        function onLocationFound(e) {
            var radius = e.accuracy / 2;

            L.marker(e.latlng).addTo(map)
            .bindPopup("You are within " + radius + " meters from this point").openPopup();

            L.circle(e.latlng, radius).addTo(map);
        }

        map.on('locationfound', onLocationFound);
        function onLocationError(e) {
            alert(e.message);
        }

        map.on('locationerror', onLocationError);

    </script>
</body> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-09T20:17:04.510

在我看来，它不起作用，因为您没有启用 Javascript。

```
 WebSettings webSettings = mWebView.getSettings();
    webSettings.setJavaScriptEnabled(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-02T12:04:39.823

活动中

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    WebView myWebView = (WebView) findViewById(R.id.webview);
    WebSettings webSettings = myWebView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    myWebView.loadUrl("file:///android_asset/www/index.html");
} 
```

在 .html 中

```
<!DOCTYPE html>
<html>
<head>

<title>Quick Start - Leaflet</title>

<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

                   <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
                   <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js" integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg==" crossorigin=""></script>

</head>
<body>

<div id="mapid" style="width: 600px; height: 400px;"></div>
<script>

var mymap = L.map('mapid').setView([51.505, -0.09], 13);

                    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
                    maxZoom: 18,
                    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                    '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                    'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
                    id: 'mapbox.streets'
                    }).addTo(mymap);

L.marker([51.5, -0.09]).addTo(mymap)
    .bindPopup("<b>Hello world!</b><br />I am a popup.").openPopup();

L.circle([51.508, -0.11], 500, {
    color: 'red',
    fillColor: '#f03',
    fillOpacity: 0.5
}).addTo(mymap).bindPopup("I am a circle.");

L.polygon([
    [51.509, -0.08],
    [51.503, -0.06],
    [51.51, -0.047]
]).addTo(mymap).bindPopup("I am a polygon.");

var popup = L.popup();

function onMapClick(e) {
    popup
        .setLatLng(e.latlng)
        .setContent("You clicked the map at " + e.latlng.toString())
        .openOn(mymap);
}

mymap.on('click', onMapClick);

</script>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-12T13:52:33.270

试试这个，android 编译器 4.4x (eclipse)

```
 import android.webkit.WebView; //(dont forget to put WebView from Graphical layout palette or write manually inside layout folder activity_main.xml

 private WebView tampilWeb; //(this is variable declaration)

 // any  function here ... 
 tampilWeb = (WebView)findViewById(R.id.webView1);
 tampilWeb.getSettings().setJavaScriptEnabled(true);
 tampilWeb.setWebViewClient(new WebViewClient());
 tampilWeb.loadUrl("https://www.openstreetmap.org/#"); 
```

# php - 将字符串放入数组

> ID：15946318
> 
> 赞同：2
> 
> 时间：2013-04-11T10:21:06.883
> 
> 标签：php

我有一个包含以下内容的字符串：

`array(a=1, b=2, c=array(ca=23, cb=45),d=array(da=342, db=array(dba=3154, dbb=8746), dc=765),e=8)`

现在，我需要根据这个字符串的内容创建一个数组。我试过这样：

```
$arrValues = array();
$arrValues = $strVar;
var_dump($arrValues); 
```

但是，当然，正如预期的那样，这只是为您提供了一个包含 1 项字符串类型的数组，以及其中的整个 shebang。

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:22:41.357

您可以使用[eval()](http://php.net/manual/en/function.eval.php)但不推荐使用，除非您确定包含字符串的内容（这可能会导致安全问题）

**编辑 ：**

您的数组似乎不在 php 数组的语法中，您需要重新格式化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:39:46.763

在我说任何关于使用的内容之前`eval()`，[**请阅读这篇 stackoverflow 帖子**](https://stackoverflow.com/questions/951373/when-is-eval-evil-in-php)。

正如 Yazmat 所提到的，[`eval()`](http://php.net/manual/en/function.eval.php)如果您非常确定没有人可以将代码注入其中，则可以使用，并使用`([a-zA-Z0-9]+)\s*=\s*`替换`"$1" =>`为的正则表达式将您的代码更改为与 PHP 数组兼容：

```
<?php
    $strVar = 'array(a=1, b=2, c=array(ca=23, cb=45),d=array(da=342, db=array(dba=3154, dbb=8746), dc=765),e=8)';
    $arrValues = array();

    $phpCompliantStrVar = preg_replace('/([a-zA-Z0-9]+)\s*=\s*/', '"$1" => ', $strVar) . ';';
    //string(157) "array("a" => 1, "b" => 2, "c" => array("ca" => 23, "cb" => 45),"d" => array("da" => 342, "db" => array("dba" => 3154, "dbb" => 8746), "dc" => 765),"e" => 8);"

    //Beware of the evilness that eval can cause! It will suck out your soul if overdone.
    eval('$arrValues = ' . $phpCompliantStrVar);

    print_r($arrValues);
    /*
        Array
        (
            [a] => 1
            [b] => 2
            [c] => Array
                (
                    [ca] => 23
                    [cb] => 45
                )

            [d] => Array
                (
                    [da] => 342
                    [db] => Array
                        (
                            [dba] => 3154
                            [dbb] => 8746
                        )

                    [dc] => 765
                )

            [e] => 8
        )
    */
?> 
```

[**演示**](http://codepad.org/kR0q2tFV)

**当前限制：**

*   仅当您在数组中的值都是数字时，它才会起作用 - 否则您需要更改正则表达式。

# java - 使用 Rawr 打包 Slick2d JRuby 应用程序：缺少类或大写包名

> ID：15946325
> 
> 赞同：1
> 
> 时间：2013-04-11T10:21:24.197
> 
> 标签：java, ruby, jruby, packaging, slick2d

我正在用 JRuby 编写一个使用 Slick2D 库的游戏。我不知道如何让 Rawr gem 正确地捆绑我的应用程序而不会出错。

1.  我跑`rake rawr:jar`。包生成正确，没有错误。
2.  然后`java -jar package/jar/mygame.jar`运行应用程序。
3.  我运行它会`rake rawr:bundle:app`生成一个 MacOSX 应用程序，没有错误。
4.  打开`package/osx/mygame.app`失败并出现错误：

    **线程“主”org.jruby.exceptions.RaiseException 中的异常：（NameError）缺少类或大写包名（`org.newdawn.slick.AppGameContainer'）**

    如果我将`package`目录移动到其他地方并尝试该`java -jar package/jar/mygame.jar`命令，也会发生同样的情况。

**为什么“org.newdawn.slick.AppGameContainer”会丢失，而所有其他声明似乎都可以正常工作？**

* * *

这是应用程序源代码：

```
require 'java'
require 'lib/java/lwjgl.jar'
require 'lib/java/slick.jar'

java_import org.newdawn.slick.BasicGame
java_import org.newdawn.slick.GameContainer
java_import org.newdawn.slick.Graphics
java_import org.newdawn.slick.Image
java_import org.newdawn.slick.Input
java_import org.newdawn.slick.SlickException
java_import org.newdawn.slick.AppGameContainer

class PongGame < BasicGame  
  def render(container, graphics)
    @bg.draw(0, 0)
    @ball.draw(@ball_x, @ball_y)
    @paddle.draw(@paddle_x, 400)
    graphics.draw_string('RubyPong (ESC to exit)', 8, container.height - 30)
  end

  def init(container)
    @bg = Image.new('bg.png')
    @ball = Image.new('ball.png')
    @paddle = Image.new('paddle.png')
    @paddle_x = 200
    @ball_x = 200
    @ball_y = 200
    @ball_angle = 45
  end

  def update(container, delta)
    input = container.get_input
    container.exit if input.is_key_down(Input::KEY_ESCAPE)

    if input.is_key_down(Input::KEY_LEFT) && @paddle_x > 0
      @paddle_x -= 0.3 * delta 
    end

    if input.is_key_down(Input::KEY_RIGHT) && @paddle_x < container.width - @paddle.width
      @paddle_x += 0.3 * delta 
    end 

    @ball_x += 0.3 * delta * Math.cos(@ball_angle * Math::PI / 180)   
    @ball_y -= 0.3 * delta * Math.sin(@ball_angle * Math::PI / 180) 

    if (@ball_x > container.width - @ball.width) || (@ball_y < 0) || (@ball_x < 0)
      @ball_angle = (@ball_angle + 90) % 360
    end

    if @ball_y > container.height
      @paddle_x = 200
      @ball_x = 200
      @ball_y = 200
      @ball_angle = 45
    end

    if @ball_x >= @paddle_x && @ball_x <= (@paddle_x + @paddle.width) && @ball_y.round >= (400 - @ball.height)
      @ball_angle = (@ball_angle + 90) % 360
    end
  end
end

app = AppGameContainer.new(PongGame.new('RubyPong'))
app.set_display_mode(640, 480, false)
app.start 
```

* * *

Rawr build_configuration.rb 文件：

```
configuration do |c|
  # The name for your resulting application file (e.g., if the project_name is 'foo' then you'll get foo.jar, foo.exe, etc.)
  # default value: "mygame"
  #
  #c.project_name = "mygame"

  # Undocumented option 'output_dir'
  # default value: "package"
  #
  #c.output_dir = "package"

  # The type of executable to create (console or gui)
  # default value: "gui"
  #
  #c.executable_type = "gui"

  # The main ruby file to invoke, minus the .rb extension
  # default value: "main"
  #
  c.main_ruby_file = "pong"

  # The fully-qualified name of the main Java file used to initiate the application.
  # default value: "org.monkeybars.rawr.Main"
  #
  #c.main_java_file = "org.monkeybars.rawr.Main"

  # A list of directories where source files reside
  # default value: ["src"]
  #
  #c.source_dirs = ["src"]

  # A list of regexps of files to exclude
  # default value: []
  #
  #c.source_exclude_filter = []

  # The base directory that holds Mirah files, or subdirectories with Mirah files.
  # default value: "src"
  #
  #c.mirah_source_root = "src"

  # Whether Ruby source files should be compiled into .class files. Setting this to true currently breaks packaging
  # default value: false
  #
  #c.compile_ruby_files = false

  # A list of individual Java library files to include.
  # default value: []
  #
  #c.java_lib_files = []

  # A list of directories for rawr to include . All files in the given directories get bundled up.
  # default value: ["lib/java"]
  #
  #c.java_lib_dirs = ["lib/java"]

  # A list of files that will be copied into the `<output_dir>/jar` folder.  Note that the files maintain their directory path when copied. 
  # default value: []
  #
  #c.files_to_copy = []

  # Undocumented option 'source_jvm_version'
  # default value: 1.7
  #
  #c.source_jvm_version = 1.7

  # Undocumented option 'target_jvm_version'
  # default value: 1.7
  #
  #c.target_jvm_version = 1.7

  # Undocumented option 'jvm_arguments'
  # default value: ""
  #
  #c.jvm_arguments = ""

  # Undocumented option 'java_library_path'
  # default value: ""
  #
  #c.java_library_path = ""

  # Undocumented option 'extra_user_jars'
  # default value: {}
  #
  #c.extra_user_jars[:data] = { :directory => 'data/images/png',
  #                             :location_in_jar => 'images',
  #                             :exclude => /*.bak$/ }

  # Undocumented option 'verbose'
  # default value: false
  #
  #c.verbose = false

  # Undocumented option 'mac_do_not_generate_plist'
  # default value: false
  #
  #c.mac_do_not_generate_plist = false

  # working directory specified in plist file
  # default value: "$APP_PACKAGE"
  #
  #c.mac_plist_working_directory = "$APP_PACKAGE"

  # Undocumented option 'mac_icon_path'
  # default value: nil
  #
  #c.mac_icon_path = nil

  # Undocumented option 'windows_icon_path'
  # default value: nil
  #
  #c.windows_icon_path = nil

end 
```

* * *

项目树状：

```
- mygame/
  |
  |- lib/
  |  |- java/
  |     |- lwjgl.jar
  |     |- slick.jar
  |
  |- src/
  |  |- pong.rb
  |  |- org/
  |     |- monkeybars/
  |        |- rawr/
  |           |- Main.java
  |
  |- ball.png
  |- bg.png
  |- build_configuration.rb
  |- libjinput-osx.jnilib
  |- liblwjgl.jnilib
  |- openal.dylib
  |- paddle.png
  |- Rakefile 
```

* * *

PS：我从[此处](http://www.rubyinside.com/video-game-ruby-tutorial-5726.html)提供的存档中获取了代码，并将其更改为符合 Rawr 默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:18:44.580

基本上问题是 LWJGL 原生需要与`mygame.jar`.

这样，当您运行`rake rawr:bundle:app`它们时，它们会被捆绑在应用程序中，并且将包目录移动到其他地方也可以。

错误的非冗长性有点误导。

将此添加到`build_configuration.rb`遗嘱中：

```
# A list of files that will be copied into the `<output_dir>/jar` folder.
c.files_to_copy = [
  "libjinput-osx.jnilib",
  "liblwjgl.jnilib",
  "openal.dylib"
] 
```

# java - 使用 jaxb2-maven-plugin 运行 schemagen 时，我可以包含来自多个项目的 java 源吗？

> ID：15946330
> 
> 赞同：1
> 
> 时间：2013-04-11T10:21:41.290
> 
> 标签：java, maven-2, jaxb2, schemagen, jaxb2-maven-plugin

我有一个多模块 maven 项目，我需要从 JaxB 注释类构建 XML 模式。这些类位于不同的 Maven 项目中。我可以使用 jaxb2-maven-plugin 通过指向所有项目的源来生成单个模式吗？或许像这样...

```
<configuration>
    ...
    <includes>    
        <include>../OtherProj1/src/main/java/**/*.java</include>
        <include>../OtherProj2/src/main/java/**/*.java</include>
        <include>**/*.java</include>
    </includes>
    ...
</configuration> 
```

或者我是否需要为每个项目单独创建一个模式，然后将它们导入到父模式中？

我正在使用 maven 2.2.1 和 jaxb2-maven-plugin 1.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T09:09:54.010

我认为 antrun 插件是包含来自 mvn 项目外部的源代码以生成 XML 模式的唯一方法。

```
<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.6</version>
    <executions>
        <execution>
            <phase>generate-resources</phase>
            <configuration>
                <target>                        
                    <taskdef name="schemagen" classname="com.sun.tools.jxc.SchemaGenTask">
                    </taskdef>
                    <schemagen destdir="src/main/resources/" includes="<comma separated paths to include>"
                        excludes="<comma separated paths to exclude>">
                        <src path="src/main/java" />
                        <src path="../OtherProj1/src/main/java" />
                        <src path="../OtherProj2/src/main/java" />                  
                    </schemagen>
                    <move file="src/main/resources/schema1.xsd" tofile="src/main/resources/<filename>.xsd" />
                </target>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

# facebook - 在重新验证弹出窗口中本地化文本

> ID：15946336
> 
> 赞同：0
> 
> 时间：2013-04-11T10:21:51.993
> 
> 标签：facebook, internationalization, facebook-javascript-sdk, facebook-authentication

尝试强制重新身份验证时，我总是在 Facebook 登录弹出窗口中收到以下信息消息：

> 您尝试访问的页面...要求您重新输入密码。

这是完全正确的......只要你想用英文显示这个文本。我的问题是我想本地化这个值。

经过一些尝试，似乎更改应用程序的主要语言或连接 url（用 //connect.facebook.net/de_DE/all.js 和 //connect.facebook.net/fr_FR/all.js 测试）确实没有任何效果。

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:25:39.113

Have your tried what they say on the facebook-api page?

[https://developers.facebook.com/docs/reference/javascript/#localization](https://developers.facebook.com/docs/reference/javascript/#localization)

And this:

[https://developers.facebook.com/docs/internationalization/](https://developers.facebook.com/docs/internationalization/)

# c# - 代码如何在模型中找到无法访问用户控制的资源

> ID：15946337
> 
> 赞同：0
> 
> 时间：2013-04-11T10:21:55.103
> 
> 标签：c#, wpf, menuitem, controltemplate, resourcedictionary

我有一个`UserControl`：`MergedDictionaries`

```
<UserControl.Resources>
  <ResourceDictionary>
     <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="../LimitResources.xaml" />
        <ResourceDictionary Source="../MenuItemTemplateResources.xaml" />
     </ResourceDictionary.MergedDictionaries>
   ...
</UserControl.Resources> 
```

在我的模型`Menu`中创建了一个。我想访问`ControlTemplate`在 MenuItemTemplateResources.xaml 中声明的。ControlTemplate 看起来像这样

```
<ControlTemplate x:Key="SubMenuItemCombo" TargetType="MenuItem">
.....
</ControlTemplate> 
```

模型参考了应用程序的“主”wpf 窗口（该应用程序是 Winform 和 WPF 的混合体）。

Window.FindResource 没有找到任何一种方式：

```
FindResource("SubMenuItemCombo");
FindResource(new ComponentResourceKey(typeof(MenuItem), "SubMenuItemCombo")); 
```

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:26:32.927

最简单的解决方案是在资源类的代码隐藏文件中定义一个属性

```
public string StrResource1
{
   get {return FindResource("SubMenuItemCombo");}
} 
```

然后您可以在资源类之外访问它。如果您不想通过实例访问静态属性，也可以考虑声明它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:50:08.853

一种更复杂的方法是将资源设置为您的 ViewModel 的属性的 StaticResource。如果您将 ViewModel 实例化为资源，则可以在 XAML 中执行此操作，例如

```
<my:ViewModel x:Key="viewModel" myResource="{StaticResource myResource}"/> 
```

（前提是您在 ViewModel 之前声明资源）。

如果这不可能，您可以使用像 Freezable 这样的辅助组件，它绑定到 ViewModel，将资源作为上述属性，并在 ViewModel 上设置所需的属性。

此解决方案适用于您希望保留 ViewModel 而不依赖于资源的代码的情况，例如，在事先不知道资源的控件库中。

根据您的应用程序的需要，您还可以考虑将资源设置为控件的 CommandParameter 并在需要时以这种方式将其传递给 ViewModel；我有时会使用文件对话框来执行此操作，例如

```
<Button x:Name="OpenButton" Command="{Binding OpenCommand}" CommandParameter="{StaticResource openDialog}">Open File...</Button> 
```

如果 OpenCommand 是 ViewModel 提供的 ICommand 实现，则打开的对话框将作为“参数”参数传递给 ICommand 的 Execute 和 CanExecute 方法。可以使用任何实现 ICommandSource 的控件来代替 Button。

# php - 将网页连接到命令行服务器

> ID：15946343
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:22:06.840
> 
> 标签：php, command, webpage, connect

我有一个使用命令行作为服务器运行的 php 代码。我使用 telnet 客户端连接到服务器没有问题。但我不希望客户端是 telnet，我希望它是一个网页，以便来自世界各地的客户端可以连接。如何将网页连接到服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:07:22.447

为了使用 web 界面连接到 shell，你需要一个完整的 apache 服务器和 php，比如 lamp/wamp

脚步：

*   创建一个 Web 界面以向服务器发送命令并查看结果。ajax UI 可能对此有用。我会假设你知道 html/php/javascript 并且这对你来说不是问题。
*   调用命令的“exec”php函数：http: [//php.net/manual/es/function.exec.php](http://php.net/manual/es/function.exec.php)

例子：

```
<?php
// Test the user!! you don't want that any one may use the command line of your server.
...
// Get the command to execute
$command='';
if (isset($_POST['command']))
{
    $command = $_POST['command'];
}
// Execute your command
if ($command!='') echo exec($command);
?> 
```

您应该考虑将错误发送到 stderr，因此如果您想查看错误，则需要重定向： echo exec($command . ' 2>&1');

安全考虑：

*   使用 SSL 进行所有通信
*   小心不要让每个人都访问你的 shell，即使是奇怪的代码或 web 修改。
*   测试是否允许使用 $command，不要只执行任何操作。
*   使用允许上传文件的命令时要非常小心，例如“wget”。

其他注意事项：此脚本只允许执行简单的命令，但不允许与复杂软件进行完全双向通信，例如您不能像这样运行游戏服务器。如果这是您的意图，在 linux 上有一个允许重新连接到 shell 的应用程序“屏幕”。

```
//Define a screen name, may be whatever, but must be unique
$myScreenName='MyWebApp';

// To launch the app: 
echo exec('screen -S ' . $myScreenName . ' -d -m ' . $command . ' 2>&1 1>log.log');

// To re-connect to the shell in order to send new content:
echo exec('screen -S ' . $myScreenName . " -X -p0 stuff $'" . $command . "\n'");

// to test if the screen is active:
function testIfActive($myScreenName)
{
    exec('screen -ls', $screenLS);
    screenLs = implode('', $screenLS);
    return (stripos($screenLs, $myScreenName)!==false);
}
// to read the output, just read the log.log file. 
```

# jquery - Kendo UI DataSource Destroy 函数多次调用多条记录

> ID：15946354
> 
> 赞同：4
> 
> 时间：2013-04-11T10:22:38.420
> 
> 标签：jquery, telerik, kendo-ui

我在 Kendo UI 中有一个奇怪的问题 - 我不明白。

这是我的代码。

```
$(document).ready(function() {
    var kendo_dataSource = new kendo.data.DataSource({
        autoSync: true,
        batch: true,
        transport: {
            read: {
                url: "<?php echo BASE_URL . 'kendo/kendo_grid_read' ?>",
                dataType: "json"
            },
            destroy: {
                url: "<?php echo BASE_URL . 'kendo/kendo_grid_destroy' ?>",
                dataType: "json",
                type: "POST"
            },
            parameterMap: function(data, type) {
                if (type == "destroy") {
                    return {models: data.models}
                }
            }
        },
        serverFiltering: true,
        serverGrouping: true,
        serverPaging: true,
        page: 1,
        pageSize: 5,
        schema: {
            data: "results",
            total: "total",
            model: {
                id: "field1"
            }
        }
    });

    $("#kendo_grid2").kendoGrid({
        dataSource: kendo_dataSource,
        height: 300,
        filterable: true,
        sortable: true,
        pageable: true,
        selectable: "multiple row",
        columns: [
            {
                field: "field1"
            },
            {
                field: "field2"
            },
            {
                field: "field3"
            }
        ]
    });

    $("#test_button").on("click", function() {
        var selectedRows = $("#kendo_grid2").data("kendoGrid").select();
        if (selectedRows.length > 0) {
            for (var i = 0; i < selectedRows.length; i++) {
                var dataItem = $("#kendo_grid2").data("kendoGrid").dataItem(selectedRows[i]);
                console.log(dataItem);
                kendo_dataSource.remove(dataItem);
            }
        }
    });

}); 
```

情况就是这样。

当`$("#test_button").on("click", function()`被触发时，它会检查网格中的选定行 - 并删除这些行。

如果我选择 2 行，它会删除 2 行。并且 2 行从网格中消失了。

但是，我看到了一些奇怪的东西——

删除 2 行时，有 2 个 POST 请求 - 这很好。

但是第一个 POST 请求的参数是

```
models[0][field1]   3
models[0][field2]   poioioi
models[0][field3]   oiuoiuuigbhkjh
models[0][field4]   kjh kjhkjhyt 
```

第二个 POST 请求的参数是

```
models[0][field1]   3
models[0][field2]   poioioi
models[0][field3]   oiuoiuuigbhkjh
models[0][field4]   kjh kjhkjhyt
models[1][field1]   4
models[1][field2]   kjhk hkiui
models[1][field3]   khkj
models[1][field4]   mkhkhkhkjhghgfgdf 
```

我明白，我可以像这样访问服务器中的数据

```
foreach ($_POST['models'] as $model) {
            echo $model['field1'];           
} 
```

我想知道是否可以只发送一个请求 - 可能只发送第二个 POST 请求，因为我可以在一个请求中删除 2 行。

或者发送 2 个单独的请求，但一次只有一个模型？

是否可以？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T11:18:11.437

这是设置造成的`autoSync`。当您将其设置为 true 时，数据源会`sync`在每次更改后调用该方法。设置`autoSync`并`false`手动调用该`sync()`方法将导致数据源仅对所有已删除的数据项发出一个请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-27T07:36:27.333

就我而言，我手动删除 _destroyed 数据：

**event.sender._destroyed = [];**

```
 var gridOptions = {
    dataSource: {
        transport: {
            read: {
                url: crudServiceBaseUrl + "gettransactions",
                type: "GET"
            },
            destroy: {
                url: crudServiceBaseUrl + "delete",
                dataType: "jsonp",
                type: "POST"
            },
            parameterMap: function (models, operation) {
                if (operation == "destroy" && models)
                    return { models: kendo.stringify(models) };
            }
        },
        requestEnd: function (event) {
            event.sender._destroyed = [];
            grid.data('kendoGrid').refresh();
        },
        schema: {
            data: "listTransaction",
            total: "total",
            model: {
                id: "TransactionCustomerID",
                fields: {
                    TransactionCustomerID: { editable: false, nullable: true },
                    TransactionTime: { type: "date", editable: false }
                }
            },
            errors: "Errors"
        },
        change: function (event, abc) {
            //todo change fucntion              
        },
        serverPaging: false,
        serverFiltering: false,
        error: function (e) {
            console.log("Status: " + e.status + "; Error message: " + e.errorThrown);
        }
    },
    batch: true,
    editable: "popup",
    autoSync: true,
    resizable: true,
    columns: columnOptions,
    sortable: { mode: "single", allowUnsort: true },
    filterable: false,
    pageable: {
        pageSize: 20,
        pageSizes: [20, 50, 100],
        refresh: true
    },
    cancel: function () {
        grid.data('kendoGrid').dataSource.read();
        grid.data('kendoGrid').refresh();
    },
    dataBound: function (e) {
        hideGridButtonText(".k-delete");
        handleEmptyData(e);
    },
    excel: {
        fileName: "Transaction List.xlsx",
        filterable: true,
        allPages: false,
        downloadElement: "#exportexcel"
    }
}; 
```

这是工作！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-06T20:41:19.813

我遇到了类似的问题。

我正在为数据源的破坏属性使用一个函数。我的问题是，每次连续删除一行时，销毁函数都会以累积的方式被调用一次。这意味着对于第一次删除，该函数被调用一次，对于第二次删除，它被调用两次，依此类推。

就我而言，问题是因为我没有通知数据源成功删除。下面是来自 Kendo UI[文档](http://docs.kendoui.com/api/framework/datasource)的相关代码部分。我错过了成功的部分。

```
 destroy: function (options) {
      $.ajax({
        url: "http://demos.kendoui.com/service/products/destroy",
        dataType: "jsonp",
        data: {
          models: kendo.stringify(options.data.models)
        },
        success: function(result) {
          // notify the data source that the request succeeded
          options.success(result);
        },
        error: function(result) {
          // notify the data source that the request failed
          options.error(result);
        }
      }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T15:44:26.933

好的，所以我想我已经找到了问题的根源。

我订阅了数据源错误事件，我看到在 JSon 解析期间发生错误（parseerror）。因此 dataItem 不会从数据源中删除。（这就是为什么数据源没有很好地同步，我在这一点上是对的）。

发生 parseerror 是因为我的删除 web 服务返回一个空字符串。

现在我需要找到解决它的方法......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-21T16:04:50.240

对我来说，它只是将 autoSync 设置为 false！尝试一下。

# javascript - 选择下拉菜单时重定向到 URL

> ID：15946355
> 
> 赞同：1
> 
> 时间：2013-04-11T10:22:39.293
> 
> 标签：javascript, jquery, redirect

我是真正的新手，所以请忍受我的愚蠢问题。我有一个多阶段调查问卷，我希望用户每次做出选择时都无需按下“下一步”按钮。有人可以与我分享一个在选择时将用户重定向到 URL 的脚本（不管他们所做的实际选择）吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:23:41.660

```
$('#your-select').change(function() {
   location.href = 'newURL';
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T10:33:12.233

```
<select name="menu" onChange="window.document.location.href=this.options[this.selectedIndex].value;" value="Choose">

        <option value="http://www.url.com">Option 1</option>
        <option value="http://www.url.com">Option 2</option>

 </select> 
```

# c# - system.net.mail 编辑邮件内容

> ID：15946358
> 
> 赞同：0
> 
> 时间：2013-04-11T10:22:42.643
> 
> 标签：c#, html, asp.net-mvc, email

我正在使用 system.net.mail 库来发送有关某些已执行操作的用户信息。在程序运行时，我正在收集一些信息，稍后我想将其展示给用户。邮件内容如下所示：

```
Hello user,
this is your id in system.
*if he chosen option1*
You chosen option 1 value
*if he chosen option2*
You chosen option 2 value
*if he chosen option3*
You chosen option 3 value 
```

问题是我没有找到如何在程序运行时更改邮件内容（用 html 编写并添加到资源中）的方法。

任何人都可以建议我应该如何根据选择的值编辑邮件内容，或者可能有其他选择？

邮件示例：

```
`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">`
<html>
 <head>
  <META http-equiv=Content-Type content="text/html">
 </head>
 <body>
  <p>Hello user,</p>
  <p>This is your id in system : {0}</p>
/*
And the dificult part here: 
    if he chosen option1 in program I want in email to show that option 1 value.
    And if he didn't chosen it I don't wanna show it to him. 
*/        
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:34:55.313

您可以将 html 存储在 XML 文件中并通过`string.Format`如下方式填充内容：-

```
<?xml version="1.0" encoding="utf-8" ?>
<Email>
    <FromAddress>from</FromAddress>
    <ToAddress>to</ToAddress>
    <Subject>subject line</Subject>
    <EmailBody>
        <![CDATA[
     <html>
<head>
    <title>Customer</title>
</head>
        <div valign="top">
             <font color="#666666" face="Arial, Helvetica, sans-serif, Verdana" size="2">
             <p>Hello user.</p>
             <p><strong>This is your ID in the system: </strong>{0}<br />
             <strong>You chose option: </strong>{1}<br /></p>
             </font>
        </div>
</html> 
      ]]>
    </EmailBody>
</Email> 
```

代码（填充和发送）： -

```
int custId = //provide customer id
string option = //customers selected option
string custEmail = //customers email

MailMessage mail = GetHtmlEmail();

string message = string.Format(mail.Body, custId, option);

mail.IsBodyHtml = true;
mail.Body = message;

using (SmtpClient smtp = new SmtpClient())
{
    smtp.Send(mail);
} 
```

读取电子邮件标记 + 设置邮件对象的一些属性：-

```
private MailMessage GetHtmlEmail()
{
    MailMessage mail = new MailMessage();
    XmlTextReader xReader = new XmlTextReader(Server.MapPath("PATH TO EMAIL.XML"));

    while (xReader.Read())
    {
        switch (xReader.Name)
        {
            case "ToAddress":
                mail.To.Add(xReader.ReadElementContentAs(typeof(string), null).ToString());
                break;
            case "FromAddress":
                mail.From = new MailAddress(xReader.ReadElementContentAs(typeof(string), null).ToString());
                break;
            case "Subject":
                mail.Subject = xReader.ReadElementContentAs(typeof(string), null).ToString();
                break;
            case "EmailBody":
                mail.Body = xReader.ReadElementContentAs(typeof(string), null).ToString();
                break;
            default:
                break;
        }
    }

    return mail;
} 
```

编辑*如果您不希望`<strong>You chose option: </strong>{1}<br />`在客户没有选择任何选项的情况下出现，那么您可以这样做（虽然有点hacky）：-

```
if(!string.IsNullOrEmpty(option))
{
    option = string.Format("<strong>You chose option: </strong>{1}<br />", option);
}
else
{
    option = string.Empty;
} 
```

然后像往常一样传递它： -

```
string message = string.Format(mail.Body, custId, option); 
```

确保将标记中的这一行替换`<strong>You chose option: </strong>{1}<br />`为`{1}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:03:51.577

我有一个真实的情况，我需要用电子邮件来做这件事，我使用了模板。您可以尝试使用变量为您的电子邮件正文创建一个模板，并根据您的情况创建此正文，将变量更改为正确的值。模板示例：

```
<p>Hello user [User]</p>
<p>This is your id in system : [ID]</p>
<p>[ChoosenOption]</p> 
```

创建一个资源文件，以便您可以通过其名称获取此模板。你必须创建一个方法来改变这些变量，比如这个例子：

```
public String ProcessTemplate(String templateName, dynamic variables)
{
    String template = MethodThatSearchOnResourceAndReturnsTemplateByItsName(templateName);
        if (String.IsNullOrWhiteSpace(template))
        {
            return String.Empty;
        }

        if (variables == null)
        {
            return template;
        }

        PropertyInfo[] properties = ((Object)variables).GetType().GetProperties();
        foreach (PropertyInfo prop in properties )
        {
            template = template.Replace("[" + prop.Name + "]", propriedade.GetValue(properties, null));
        }

        return template;
 } 
```

现在你像这样绘制你的模板：

```
String body = ProcessTemplate("TemplateName", new
{
   User = the user name,
   ID = this user id,
   ChoosenOption = ReturnChoosenOptionHtml()
});

private String ReturnChoosenOptionHtml()
{
    String html = String.Empty;
    if(chooseOption1)
        html += "xptoHTML";
    if(choosenOption2)
        html += "abcdHTML";
    return html;
} 
```

最终结果将是一封电子邮件，其中 [Variables] 使用您传递的值进行了更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T12:17:12.317

当您从用户提交表单时，将他们的信息保存在会话中，并在发送邮件后，显示一个弹出窗口并将您的信息与会话连接。

# vba - 使用 excel 中的宏查找和替换音频 ppt 中的文本

> ID：15946361
> 
> 赞同：1
> 
> 时间：2013-04-11T10:22:49.243
> 
> 标签：vba, excel, powerpoint

我有一个项目可以从 excel 中查找和替换 powerpoint 中的单词，然后保存 powerpoint。我的代码工作正常。但是当 ppt 有 mp3 时，它就会出错。请查看代码并告诉我应该做什么更改。

```
 Sub pptopen()

    Dim a  As Integer
    For a = 2 To 4

   Dim pptApp As PowerPoint.Application
   Dim pptPres As PowerPoint.Presentation
   Dim pptSlide As PowerPoint.Slide
   Dim i As Integer, strString As String
       Set pptApp = CreateObject("PowerPoint.Application")
       Set pptPres = pptApp.Presentations.Add(msoTrue) ' create a new presentation

       Set pptPres = pptApp.Presentations.Open("D:\BirminghamAL.pptx")
       Dim oSld As Slide
       Dim oTxtRng As TextRange
       Dim oTmpRng As TextRange
       Dim strWhatReplace As String, strReplaceText As String

        ' write find text
       strWhatReplace = "Birmingham"
        ' write change text
       strReplaceText = Cells(a, 1).Value

        ' go during each slides
       For Each oSld In pptPres.Slides
            ' go during each shapes and textRanges
           For Each oshp In oSld.Shapes
           If oshp.Type = 14 Or oshp.Type = 17 Then
                ' replace in TextFrame
               Set oTxtRng = oshp.TextFrame.TextRange
               Set oTmpRng = oTxtRng.Replace( _
               FindWhat:=strWhatReplace, _
               Replacewhat:=strReplaceText, _
               WholeWords:=True)
               End If

               Do While Not oTmpRng Is Nothing

                   Set oTxtRng = oTxtRng.Characters _
                   (oTmpRng.Start + oTmpRng.Length, oTxtRng.Length)
                   Set oTmpRng = oTxtRng.Replace( _
                   FindWhat:=strWhatReplace, _
                   Replacewhat:=strReplaceText, _
                   WholeWords:=True)

               Loop
           Next oshp
       Next oSld
       Dim strWhatReplace1 As String, strReplaceText1 As String

        ' write find text
       strWhatReplace1 = "AL"
        ' write change text
       strReplaceText1 = Cells(a, 2).Value

        ' go during each slides
       For Each oSld In pptPres.Slides
            ' go during each shapes and textRanges
           For Each oshp In oSld.Shapes
                 If oshp.Type = 14 Or oshp.Type = 17 Then
                ' replace in TextFrame
               Set oTxtRng = oshp.TextFrame.TextRange
               Set oTmpRng = oTxtRng.Replace( _
               FindWhat:=strWhatReplace1, _
               Replacewhat:=strReplaceText1, _
               WholeWords:=True)
                 End If
               Do While Not oTmpRng Is Nothing

                   Set oTxtRng = oTxtRng.Characters _
                   (oTmpRng.Start + oTmpRng.Length, oTxtRng.Length)
                   Set oTmpRng = oTxtRng.Replace( _
                   FindWhat:=strWhatReplace1, _
                   Replacewhat:=strReplaceText1, _
                   WholeWords:=True)

               Loop
           Next oshp
       Next oSld

      pptPres.SaveAs ("D:\change\" & strReplaceText & "." & strReplaceText1 & ".pptx")

       Next a

   End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:45:26.090

这是对我上述评论的解释（就在您的问题下方）。

我的幻灯片看起来像这样

![在此处输入图像描述](https://i.stack.imgur.com/eemzw.png)

如果您注意到并非所有形状都具有该`.TextFrame`属性。所以你所要做的就是找出你想要处理的形状。

这是一个非常基本的代码，用于检查幻灯片上的所有形状

```
Sub Sample()
    Dim shp As Shape

    For Each shp In ActivePresentation.Slides(1).Shapes
        Debug.Print shp.Name; "--"; shp.Type
    Next
End Sub 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/JTGYD.png)

所以你可以尝试这样的事情。

**注意**：14 只是一个例子。你需要决定你想要处理什么样的形状。

```
For Each oSld In pptPres.Slides
    For Each oshp In oSld.Shapes
        If oshp.Type = 14 Then
            '~~> Rest of your code
        End If
    Next oshp
Next oSld 
```

**跟进**

我刚刚尝试了这段代码，它可以工作。

```
Option Explicit

Sub pptopen()
    Dim pptApp As New PowerPoint.Application
    Dim pptPres As PowerPoint.Presentation
    Dim pptSlide As PowerPoint.Slide, oSld As PowerPoint.Slide
    Dim oshp As PowerPoint.Shape

    Dim oTxtRng As TextRange, oTmpRng As TextRange
    Dim oTxtRng1 As TextRange, oTmpRng1 As TextRange

    Dim strString As String, strWhatReplace As String, strReplaceText As String
    Dim strWhatReplace1 As String, strReplaceText1 As String

    Dim a As Integer, i As Integer

    Set pptPres = pptApp.Presentations.Open("D:\BirminghamAL.pptx")

    For a = 2 To 4
        ' write find text
        strWhatReplace = "Birmingham"
        ' write change text
        strReplaceText = Cells(a, 1).Value
        ' write find text
        strWhatReplace1 = "AL"
        ' write change text
        strReplaceText1 = Cells(a, 2).Value

        ' go during each slides
        For Each oSld In pptPres.Slides
            ' go during each shapes and textRanges
            For Each oshp In oSld.Shapes
                If oshp.Type = 14 Or oshp.Type = 17 Then
                    ' replace in TextFrame
                    Set oTxtRng = oshp.TextFrame.TextRange
                    Set oTmpRng = oTxtRng.Replace(FindWhat:=strWhatReplace, _
                                  Replacewhat:=strReplaceText, WholeWords:=True)

                    Do While Not oTmpRng Is Nothing
                       Set oTxtRng = oTxtRng.Characters(oTmpRng.Start + oTmpRng.Length, oTxtRng.Length)
                       Set oTmpRng = oTxtRng.Replace(FindWhat:=strWhatReplace, Replacewhat:=strReplaceText, WholeWords:=True)
                    Loop

                    ' replace in TextFrame
                    Set oTxtRng1 = oshp.TextFrame.TextRange
                    Set oTmpRng1 = oTxtRng1.Replace(FindWhat:=strWhatReplace1, _
                                  Replacewhat:=strReplaceText1, WholeWords:=True)

                    Do While Not oTmpRng1 Is Nothing
                       Set oTxtRng1 = oTxtRng1.Characters(oTmpRng1.Start + oTmpRng1.Length, oTxtRng1.Length)
                       Set oTmpRng1 = oTxtRng1.Replace(FindWhat:=strWhatReplace1, Replacewhat:=strReplaceText1, WholeWords:=True)
                    Loop

                End If
            Next oshp
        Next oSld

        pptPres.SaveAs Filename:="D:\change\" & strReplaceText & "_" & strReplaceText1 & ".pptx", FileFormat:=ppSaveAsDefault
    Next a
End Sub 
```

# android - 从膨胀的布局中获取 Textview 的 id

> ID：15946363
> 
> 赞同：0
> 
> 时间：2013-04-11T10:22:55.493
> 
> 标签：android, layout-inflater

我有一个这样的xml：

item.xml 的代码如下：

```
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_item_title"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingTop="15dip"
    android:paddingBottom="15dip"
    android:paddingLeft="15dip"
    android:textSize="24sp"/> 
```

现在我的活动中有不同的 setcontentView，现在我试图获取这个 textview 的 id 来设置 textview 的字体和颜色。

我试过这个但不工作：

```
View inflatedView = getLayoutInflater().inflate(R.layout.item, null);
        TextView tv = (TextView) inflatedView.findViewById(R.id.list_item_title);
        tv.setTextColor(Color.RED); 
```

# java - 在java中提取部分字符串的最佳实践

> ID：15946364
> 
> 赞同：-4
> 
> 时间：2013-04-11T10:22:58.953
> 
> 标签：java, string

我有一个类似的输入字符串，`ABCDEFG`并且必须输出一个包含输入字符串的第 1、第 3 和第 6 个位置的字符串：`ACF`. 完成此任务的最佳方法是什么，比 3 个单字符子字符串的明显串联更好的方法是什么？谢谢！

更新：感谢您的解决方案，它们很有帮助！**另一个相关问题**：如果我需要大部分输入字符串，即输出字符串包含除第二个之外的所有字符，解决方案是什么：`ACDEFG`。`StringBuilder`+`charAt()`是最快的吗？如果我的输入字符串很长（100 个字符），那么最好将`StringBuilder`第一个字符与`substring(2)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:27:09.243

```
String result = "" + input.charAt(0) + input.charAt(2) + input.charAt(5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:27:56.157

substring 方法是一种耗时的方法，而且每次调用时它都会从头开始解析字符串。尝试使用 chartAt 方法并附加到 StringBuilder 而不是像这样连接在 String 中：

```
public static void main(String[] args){
        String s = "ABCDEFGH";
        System.out.println(new StringBuilder().append(s.charAt(0)).append(s.charAt(2)).append(s.charAt(5)));
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:30:56.750

```
String x = "ABCDEFG";
String result = String.format("%c%c%c", x.charAt(0), x.charAt(2), x.charAt(4)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T10:37:06.820

您可以使用通过给定索引返回字符串字符的类`charAt(int)`方法。`String`但它返回一个值`char`。所以你必须将它转换为`String`使用`Character.toString(char)`方法。
你可以这样做：

```
String input = "ABCDEFG";

String result = Character.toString(input.charAt(0)) + 
                Character.toString(input.charAt(2)) + 
                 Character.toString(input.charAt(5)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T10:34:00.497

如果您需要一个字母挑选功能，如下`charsAt`所示：

```
String t = charsAt("ABCDEFG", 0, 2, 5); // Zero based indices

public String charsAt(String s, int... indices) {
    char[] chs = new char[indices.length];
    for (int i = 0; i < chs.length; ++i) {
        chs[i] = s.charAt(indices[i]);
    }
    return new String(chs);
} 
```

# java - 使用 Google Maps Places API 从一系列位置中查找离当前位置最近的位置

> ID：15946365
> 
> 赞同：1
> 
> 时间：2013-04-11T10:23:00.403
> 
> 标签：java, android, google-places-api, google-maps-android-api-2

我有一个`array`包含不同的`locations' addresses`. 我还检索了用户的当前位置。

在数组中的所有位置中，我想找到`nearest`. 一种方法可能是比较`Lat-Long`所有方法，但还有其他方法可以解决吗？

***注意：***我`not performing nearby location search`要检索地址。假设我已经将它们存储在一个数组中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T13:07:44.820

您可以使用[Location](http://developer.android.com/reference/android/location/Location.html)来确定两个地址之间的距离：

```
private static float distance(LatLng current, LatLng last){
    if(last==null)
        return 0;
    Location cL = new Location("");
    cL.setLatitude(current.latitude);
    cL.setLongitude(current.longitude);

    Location lL = new Location("");
    lL.setLatitude(last.latitude);
    lL.setLongitude(last.longitude);

    return lL.distanceTo(cL);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:11:00.817

如果您需要真正的最近位置，请使用[`Location.distanceBetween`](http://developer.android.com/reference/android/location/Location.html#distanceBetween%28double,%20double,%20double,%20double,%20float%5b%5d%29).

如果您有很多位置并且需要更快地执行代码，我建议使用以下公式：

```
double diffLat = Math.abs(lat1 - lat2);
double diffLng = Math.abs(lng1 - lng2);
if (diffLng > 180) {
    diffLng = 360 - diffLng;
}
double distanceSquared = diffLat * diffLat + diffLng * diffLng; 
```

不要计算这个的 sqrt，因为这不需要找到（大约）最近的位置。只需比较平方值。

之所以存在，`if`是因为您可能拥有经度为 -179 和 +179 的位置，并且它们彼此靠近。

根据数据的不同，您也可以尝试对已排序数据进行二分查找的算法，但这里有 2 个维度，因此不像`int`在 sorted中查找那么简单`int[]`。

# java - 获取@Service注解类的bean？

> ID：15946371
> 
> 赞同：4
> 
> 时间：2013-04-11T10:23:13.043
> 
> 标签：java, spring, web-applications, spring-mvc, spring-annotations

在我的 Web 应用程序中，我没有使用`applicationContext.xml`. 我怎样才能得到`@Service`注释类的bean？

如果我`applicationContext.xml`在我的 Web 应用程序中使用了 ，我必须`applicationContext.xml`每次都加载 以获取带`@Service`注释的类的 bean。

我用这种方式

```
WebApplicationContext ctx = WebApplicationContextUtils.getRequiredWebApplicationContext(getServletContext);
ServerConnection  con = (ServerConnection ) ctx.getBean("con"); 
```

我的服务类将是，

```
@Service  or @Service("con")
public class ServerConnection {

    private  TServerProtocol tServerProtocol;
    private  URI uri;

    public TServerProtocol getServerConnection(){

        System.out.println("host :"+host+"\nport :"+port);

        try {
            uri = new URI("tcp://" + host + ":" + port);
        } catch (URISyntaxException e) {
            System.out.println("Exception in xreating URI Path");
        }

        tServerProtocol = new TServerProtocol(new Endpoint(uri));
        return tServerProtocol;
    }
} 
```

有*没有其他方法可以获得*这个类的bean？

或者

`@Service`在 Spring3.x 中的核心应用程序和 Web 应用程序的情况下，获取注释类bean 的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-20T11:46:49.007

`ApplicationContext context=SpringApplication.run(YourProjectApplication.class, args);`

此上下文可用于获取由注释创建的 bean`@Bean`并`@Service` 作为

`context.getBean(className.class);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:36:30.070

如果您使用基于注解的配置，您可以`@Autowired`通过类型`@Resource`获取 bean 或通过名称获取 bean。仅对任何特定属性使用其中之一（以减少混淆）。

```
@Autowired
private ServerConnection connection; 
```

```
@Resource(name = "con")
private ServerConnection connection; 
```

[也有`@Inject`](https://stackoverflow.com/a/4095239/301832)，但我不喜欢这样，因为随着豆子数量的增加，它变得不那么好。YMMV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:35:17.163

由于您正在使用注释，我相信您更喜欢使用**@Autowired**。如果您有一个要调用的类`ServerConnection`（可以说`CallingClass`在 package 下`com.foo`），那么它的外观如下：

```
package com.foo;

@Component
public class CallingClass{

   @Autowired
   private ServerConnection serverConnection

    // add your getters and setters
} 
```

然后在您的 applicationContext.xml 上添加以下内容

```
<context:component-scan base-package="com.foo" /> 
```

希望我回答了你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T12:29:44.553

如果您在 spring 之外的某个 bean 中工作，那么您可以使用普通的 Spring 注释：

```
@Autowired
private Dependency1 dependency1;

@Autowired
private Dependency2 dependency2;

@Autowired
private Dependency2 dependency2; 
```

然后从此类内部调用一次：

```
SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this); 
```

注入所有依赖项。如果您有多个依赖项，可能会更方便。

# ios - 问题 - applicationIconBadgeNumber - number exeeds 9999

> ID：15946373
> 
> 赞同：1
> 
> 时间：2013-04-11T10:23:25.423
> 
> 标签：ios, objective-c, apple-push-notifications, user-experience, appearance

我面临着一种奇怪的要求，实际上我似乎并不存在。但是，作为开发人员，我不会问他们背后的原因 :)

在聊天应用程序中工作时。我为每条新消息添加了 BadgeNumber（预期行为）

现在，当我的测试人员对其进行测试时，他们不断将消息推送到另一个（我的应用程序）失败的极限。现在，当他们没有这样做时。他们发布了一个奇怪的错误。

他们说对于 9999 通知 BadgeNumber 显示为：

![在此处输入图像描述](https://i.stack.imgur.com/uKY9s.png)

但是，当下一个通知到达时***，它无法正确显示：***

![在此处输入图像描述](https://i.stack.imgur.com/cBCTv.png)

现在，我该怎么办。

我知道这不会发生（从开发人员的角度考虑）。但是，我将如何解决这个问题？

任何指导！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:27:26.380

由于应用程序徽章您只能显示数字，并且您传递的数字比它可以显示的要长，它将截断数字。

它将截断数字的中间部分，这就是为什么它显示`..`在中间，因为它不能适合数字。

由于这一切都由 iOS 处理，因此您无法更改它的呈现方式。

如果需要，您可以检查徽章编号服务器端并确保它不超过`9999`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:32:23.127

解决**已知限制**或**第三方**的错误，你不能在其中做任何事情。将分辨率设置为无法修复

# prestashop - PrestaShop - 如何在结账过程中在 Smarty 中检索 Carrier ID

> ID：15946376
> 
> 赞同：1
> 
> 时间：2013-04-11T10:23:32.890
> 
> 标签：prestashop, smarty, prestashop-1.5

我正在使用 PrestaShop 1.5.3.1，并且我想在结帐过程中的付款步骤中检索运营商 ID。

在我使用的 PrestaShop 1.4 中`{$id_carrier}`，它工作得很好，但它在 PrestaShop 1.5.x 中不起作用

我想根据所选运营商显示一种付款方式。

例如：

```
{if $id_carrier == 1}
    my content
{/if} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-13T20:19:27.483

在支付页面上，您可以使用以下 Smarty 变量检索选定的运营商 ID：

```
{$cart->id_carrier} 
```

这将适用于前端的任何地方，无论是在 PrestaShop v1.4.x 和 v1.5.x 上。

```
{if isset($cart->id_carrier) && $cart->id_carrier == 1}
   {* Do some stuff here *}
{/if} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-14T07:40:36.617

`$carrier = new Carrier($cart->id_carrier); // in payment module page`

# python - 用 Python 绘制余弦

> ID：15946380
> 
> 赞同：0
> 
> 时间：2013-04-11T10:23:41.900
> 
> 标签：python

我在 n=1..4 的情况下使用 python 在区间 -5 .. +5 的 400 个点处绘制了一个余弦采样：

```
import matplotlib.pyplot as plt
import numpy

for n in range(1,5):
    x = numpy.linspace(-5,5,num=400)
    series = numpy.cos(1e4/n*x)
    plt.figure()
    plt.plot(series) 
```

但是对于 n = 3，该图看起来不像余弦，我认为这是由于采样误差。如何获得具有不同频率（即不同 n）的恒定样本的平滑余弦图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:32:57.550

将您的计算更改为`series = numpy.cos(2*numpy.pi/n*x)`.

乘以`1e4`意味着您的余弦每个周期少于 2 个点，从而导致[aliasing](http://en.wikipedia.org/wiki/Aliasing)。

# android - 如何在android中更改默认电子邮件应用程序Programa的电子邮件ID

> ID：15946386
> 
> 赞同：0
> 
> 时间：2013-04-11T10:23:57.453
> 
> 标签：android, email, default

这是一个相当简单的问题，但我找不到答案。那么是否可以通过编程方式更改默认电子邮件应用程序的电子邮件 ID（来自地址）？.我们可以使用 AccountManager 类的 getAccounts() 方法获取与设备关联的帐户。但是我需要更改更改默认电子邮件应用程序的电子邮件 ID。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:29:06.313

> 不，您不能更改它，它在 Android 管理设备策略下。

请参阅此链接[http://developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

# xmlhttprequest - 如何从 MSCRM 2011 中的另一个实体检索字段的值？

> ID：15946399
> 
> 赞同：0
> 
> 时间：2013-04-11T10:24:56.763
> 
> 标签：xmlhttprequest, dynamics-crm-2011, dynamics-crm, microsoft-dynamics, dynamics-crm-online

我能够通过使用**CRMToolsODataQueryDesigner来构建这样有用的****odata**查询， 但是我被困在如何从表单的特定字段中获取价值。

 **例如，我进行下一个**odata**查询

```
 http://ServerName/Organization/xrmservices/2011/OrganizationData.svc/AccountSet?$filter=TypeCode/Value eq '121' 
```

因此，通过这种方式，我找到了与特定帐户相关的一张便条。下一步，我想知道如何获取该帐户中特定字段的值。

提前致谢

我尝试过这样的事情：

```
var oDataPath = "http:/ServerName/Organization/xrmservices/2011/OrganizationData.svc/AccountSet?$filter=Name eq 'Sample'";
var retrieveRecordsReq = new XMLHttpRequest();
retrieveRecordsReq.open("GET", oDataPath + filter, true);
retrieveRecordsReq.setRequestHeader("Accept", "application/json");
retrieveRecordsReq.setRequestHeader("Content-Type", "application/json; charset=utf-8"); 
retrieveRecordsReq.onreadystatechange = function () {
if (this.readyState == 4) {
   if (this.status == 200) {
       var retrievedRecords = JSON.parse(retrieveRecordsReq.responseText).d;
        var vehicle = Xrm.Page.data.entity.attributes.get("new_address1").getValue();
alert(vechicle);

   }
}
};
  retrieveRecordsReq.send(); 
```

这一步的麻烦：

```
 "var vehicle = Xrm.Page.data.entity.attributes.get("new_address1").getValue();" 
```

在这里，我想获取特定字段的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:38:14.227

尝试：

```
var vehicle = retrievedRecords.results[0].new_Address1; 
```**

# html - header + sticky footer + content div that covers the rest, how to center content?

> ID：15946402
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:25:03.417
> 
> 标签：html, css, centering

I am using this code. [http://jsbin.com/ibecak/1/](http://jsbin.com/ibecak/1/). I took it from here: [http://peterned.home.xs4all.nl/examples/csslayout1.html](http://peterned.home.xs4all.nl/examples/csslayout1.html). This works well.

However I want to center the content div (magenta) in the space between header and footer in the container div (yellow).

How would I go around doing that without breaking anything? I have tried setting display: table-cell and vertical-align: middle on #content, but to no avail.

The important thing for me is that the footer gets pushed down when the window is too small, instead of overlapping everything, but I still want to be able to center #content in the remaining space of #container.

If at all possible, I'd like to know how to do this with only CSS.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:22:01.297

> 问题 - 我想在容器 div（黄色）的页眉和页脚之间的空间中居中内容 div（洋红色）。

尝试将内容 div 垂直居中的困难在于不知道高度。如果它是一个固定的高度，那么你可以这样做。

**例子**

```
div#content{
    height: 300px;
    position: absolute;
    top: 50%;
    margin-top: -150px; 
    // Negative margin is half the height of content div
    // To ensure it is in the middle
} 
```

您可以使用 jQuery 计算高度，然后设置 css 样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:52:11.900

这不是一件容易的事。由于高度值在浏览器中往往会有点有趣，如果它是宽度，那么就不会有问题了。

您需要使用的不仅仅是 3 个 div。

您需要将您的内容 div 放在另一个 div 中，并使用 jquery 计算页眉和页脚之间的空间高度。如果页眉和页脚的高度是固定的，它将更容易解决。

计算出身高后，您需要将 div 绝对定位在容器 div 内，使其位于空间的中间。

# sql - 需要对查询的结果求和

> ID：15946404
> 
> 赞同：-6
> 
> 时间：2013-04-11T10:25:13.987
> 
> 标签：sql, sql-server, sql-server-2008

查询 Q 返回两列 -`DateOfWork`一个是 a `datetime`，`CallsTakenOnDate`一个是一个`int`。

也就是说，我们得到特定电话交换机在给定日期接听的电话数量。

如何创建一个函数，该函数将`CallsTakenOnDate`在 n 天内返回特定电话交换的列总和？

表结构 -

```
DateOfWork  | CallsTakenOnDate
-------------------------------
2013-10-5   | 200
2013-10-6   | 100
2013-10-7   | 700 
```

等等

我想总结一下`CallsTakenOnDate`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:34:18.553

试试这个——

```
CREATE FUNCTION dbo.udf_getCountCallOnDate
(
      @DateFrom DATETIME
    , @DateTo DATETIME
)
RETURNS INT
AS
BEGIN

    RETURN (
        SELECT SUM(CallsTakenOnDate) 
        FROM dbo.PhoneCalls
        WHERE DateOfWork BETWEEN @DateFrom AND @DateTo
    )

END 
```

* * *

```
SELECT 
  DateOfWork = CONVERT(VARCHAR(10), t.DateOfWork, 111)
, [Count] = SUM(t.CallsTakenOnDate) 
FROM dbo.PhoneCalls t
WHERE DateOfWork BETWEEN @DateFrom AND @DateTo
ORDER BY t.DateOfWork 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:27:54.803

我今天刚刚遇到了同样的问题：

```
select
  sum(CallsTakenOnDate) as count,
  DATE_FORMAT(DateOfWork, "%Y-%m-%d %H:00:00") AS date
from
  raw_visits
group by hour(DateOfWork),day(DateOfWork),month(DateOfWork),year(DateOfWork); 
```

该组每天进行，但您可以通过组声明对其进行调整。

# opengl-es - NVIDIA Cg Compiler Error C1307

> ID：15946407
> 
> 赞同：1
> 
> 时间：2013-04-11T10:25:25.237
> 
> 标签：opengl-es, glsl, nvidia, cg

When I try to use Cg to compile the following shader (a valid webGL shader):

```
attribute vec3 position;
attribute vec3 normal;

uniform mat4 modelMatrix;
uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;
uniform mat3 normalMatrix;

varying vec3 vCameraNormal, vCameraEyeDirection, vCameraLightDirection;
varying vec3 vLightPosition, vWorldPosition;
varying float vSquareDistance;

void main(void) {
    vec3 lightPosition = vec3(0.0, 5.0, -5.0);

    vec3 worldPosition = (modelMatrix * vec4(position, 1.0)).xyz;
    vec3 cameraPosition = (viewMatrix * vec4(worldPosition, 1.0)).xyz;
    vCameraEyeDirection = -1.0 * cameraPosition;

    vec3 cameraLightPosition = (viewMatrix * vec4(lightPosition, 1.0)).xyz;
    vCameraLightDirection = cameraLightPosition - cameraPosition;

    float distance = length(lightPosition - worldPosition);
    vSquareDistance = (distance * distance);

    vLightPosition = lightPosition;
    vWorldPosition = worldPosition;

    vCameraNormal = normalMatrix * normal;
    //vCameraNormal = (viewMatrix * modelMatrix * vec4(normal, 0.0)).xyz;

    gl_Position = projectionMatrix * vec4(cameraPosition, 1.0);
} 
```

using the command:

```
cgc.exe -debug -entry main -profile glslv -ogles -o outfile infile 
```

I get the error:

```
(0) : error C1307: non constant expression for array size 
```

I know Im missing something obvious, I just cant work out what it is

# c# - 使用uri内部调用asp mvc方法

> ID：15946411
> 
> 赞同：0
> 
> 时间：2013-04-11T10:25:38.823
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, iis-7

我在asp mvc中有两种方法

```
methodA(myViewModel vm);
methodB(); 
```

myViewModel 是

```
public class myViewModel
{
  public int someInt...
  public string someString...
} 
```

所以uri是这样的。

..../MyController/MethodA?someInt=2&someString=oh%crap%20crap%20crap

现在，我在methodB里面，我需要调用methodA。我没有 int 和 string，但我持有这样的 uri：

```
string s = "/MyController/MethodA?someInt=2&someString=oh%crap%20crap%20crap" 
```

我可以做一个拆分，但它很难看（实际上我有更多参数）
是三种用 uri 在内部调用 mvc 方法的方法吗？
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:48:47.457

你实际上不需要做任何事情......让你的控制器动作看起来像

```
 public ActionResult TestA(MyViewModel vm)
    {
        ViewBag.SomeInt = vm.someint;
        ViewBag.SomeString = vm.somestring;

        return View();
    }

    public ActionResult TestB()
    {
        ViewBag.UrlToCall = Url.Action("TestA", new { someint=2, somestring="Oh Crap Crap Crap"});

        return View();
    } 
```

使用给定的 ViewModel，例如

```
public class MyViewModel
{
    public int someint { get; set; }
    public string somestring { get; set; }
} 
```

当 Model Binder 将接收到的数据存储到调用 TestA(MyViewModel vm) 时预期的 ViewModel 时，它会自动拆分 url 字符串并对其进行解码。如果数据应该来自 URL，请确保您没有将 [HTTPPOST] 属性设置为操作，因为这会使模型绑定器搜索发布数据以绑定到模型。

上述操作的示例视图：

TestA.cs @{ ViewBag.Title = "TestA"; }

```
<h2>TestA</h2>

<p>
    someint: @ViewBag.SomeInt
</p>
<p>
    somestring: @ViewBag.SomeString
</p> 
```

TestB.cs @{ ViewBag.Title = "TestB"; }

```
<h2>TestB</h2>

<a href="@ViewBag.UrlToCall">Click Here To Call TestA</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:48:22.740

如果`methodA`和`methodB`是控制器动作，那么你有代码味道。控制器动作不应从彼此内部调用。如果您有一些与这两个操作相关的逻辑，请将其移至另一个不是控制器操作的方法。

如果您尝试将页面的一部分插入到由其他控制器调用的视图中，则需要使用 Partial Action。看看[这篇文章](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)以获得解释。文章讲的是MVC2，但是类似的API适用于MVC4

# ruby-on-rails - Use the Action Mailer of Redmine to send e-mail

> ID：15946414
> 
> 赞同：1
> 
> 时间：2013-04-11T10:25:40.910
> 
> 标签：ruby-on-rails, ruby, redmine, redmine-plugins

I want to send email from a local server (to "admin@admin.com" ):

My problem is how to use the Action Mailer of Redmine into my plugin because when I use an other Action Mailer, I have to configure both of them(it is not good).

```
@nouvelle_remarque = Remarque.new
@nouvelle_remarque = Remarque.create(:project_id => @project.id ,
                                   :version_id => params[:version] ,
                                   :numero => params[:numero] ,
                                   :phase => params[:phase] )
if @nouvelle_remarque.save
    flash[:notice] ="ok"
    # ....... code of sending a new mail
  else
    flash[:error] ="ko"
  end 
```

thanks for help :-)

# php - Open Graph Layout

> ID：15946415
> 
> 赞同：2
> 
> 时间：2013-04-11T10:25:44.950
> 
> 标签：php, javascript, facebook-graph-api, facebook-javascript-sdk, facebook-opengraph

How can I create a Facebook Open Graph Story with this layout?

![image](https://i.stack.imgur.com/lSwVw.png)

In developers I don`t see this layout attachament ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:27:48.270

似乎默认布局是图片中的布局，但请注意，如果您的图片小于 200/200 像素，则会获得另一种布局（简单链接布局）。

# javascript - Sass 无法使用 webstorm 编译

> ID：15946417
> 
> 赞同：2
> 
> 时间：2013-04-11T10:25:45.410
> 
> 标签：javascript, html, css, sass, webstorm

当我想在 Webstorm IDE 中使用 Sass 时，它似乎使用的是 Ruby 1.8（操作系统默认）而不是我的 RVM Ruby 版本（1.9.x）。

现在我可以在 Watcher-Configuration 中设置 Sass 的路径：

```
PATH=$PATH:$HOME/.rvm/bin 
```

但是，接下来我遇到的是找不到其他依赖项：

```
env: ruby_noexec_wrapper: No such file or directory 
```

如何配置 WebStorm 或我的 Mac，它完全忽略内置 Ruby 并始终使用 RVM（不仅仅是在 Terminal.app 中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:15:06.380

不提供`compass`带`watch`参数的命令，而是提供带参数的`bash`命令`–login -c "compass compile"`。

更多信息在这里：[如何在 phpstorm 中使用指南针？](https://stackoverflow.com/questions/15806938/how-to-use-compass-in-phpstorm/15810163#15810163)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T15:04:29.690

这是对我有用的环境变量：

```
Name: PATH

Value: /Users/peteshau/.rvm/rubies/ruby-1.9.3-p327/bin:/Users/peteshau/.rvm/gems/ruby-1.9.3-p327/bin 
```

我需要这两个值。

# c# - 数字预测算法中的未知错误

> ID：15946419
> 
> 赞同：1
> 
> 时间：2013-04-11T10:25:46.833
> 
> 标签：c#, algorithm, pattern-matching, prediction

所以我正在研究这个简单的数字预测算法，作为算法和模式识别的入门。它需要一个线性的数字串（在这种情况下为 14），从 2 开始，然后增加 2 直到 28。

该程序通过从中减去之前的数字来计算每个数字之间的差异。然后它检查所有差异是否相同，然后将差异添加到最后一个数字并将其打印到屏幕上。

它工作正常，只是它每次都认为差异为 0，因此打印最后一个数字 28 和下一个数字。似乎还有其他类似的问题，除了他们问如何用非线性序列来做，没有人遇到我的问题。

我已经尝试了我能想到的一切，但仍然无法确定差异。我错过了一些很明显的东西。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace number_predition_with_constant
{
    class Program
    {
        static void Main(string[] args)
        {
            int[] sequence = { 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28 }; //all differ by 2\. Diff = 2.
            Console.WriteLine(sequence);
            Console.WriteLine("");
            int[] differences = {};
            int legnth = sequence.Length;
            int diff = 0;  //when not given value,  some other instances not recognised 
            int j = 0;
            //find difference between each number.
            for (int i = 0; i == legnth-1; i++)
            {
                j = i + 1;
                diff = sequence[j] - sequence[i];
                differences[i] = diff;
            }
            //Print the difference between each number.
            Console.Write("Difference: ");
            Console.WriteLine(diff);
            //Check all diffs are same. If not the same, print "Error"
            for (int i = 0; i == legnth-1; i++)
            {
                if (differences[i] != differences[i+1])
                {
                    Console.WriteLine("Error");
                }
            }
            //calculate next number and print.
            Console.Write("There are: ");
            Console.Write(legnth);
            Console.WriteLine(" Numbers in the sequence");
            legnth = legnth - 1;
            int next = sequence[legnth] + diff;
            Console.Write("The next Number in the sequence is: ");
            Console.WriteLine(next);
            Console.ReadKey(); //Stop Console from closing till key pressed
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:29:55.383

我认为这条线（出现在两个地方）

```
for (int i = 0; i == legnth-1; i++) 
```

应该：

```
for (int i = 0; i <= legnth-1; i++) 
```

还有这些行：

```
int[] differences = {};
int legnth = sequence.Length; 
```

应该：

```
int legnth = sequence.Length;
int[] differences = new int[legnth]; 
```

可能还有其他问题，但首先解决这些问题。您可能还希望全局更改`legnth`为`length`... ;)

看起来您可能还会遇到一些错误。

在调试器下运行程序并单步执行整个过程。这应该告诉您出了什么问题，并让您更好地了解如何解决它。

*这将是一个有用的练习，并且比我们只是更正您的所有*代码（即使有人*确实*有时间这样做）对您更有益。

# css - 创建类似图标的按钮

> ID：15946421
> 
> 赞同：0
> 
> 时间：2013-04-11T10:25:58.420
> 
> 标签：css

我想在我的网页上添加一个图标，我希望我的图标看起来像大按钮，里面有一个图像，我有一个`largebut_hover.png`，`largebut.png`并且`icon.png`，图标图像被浅灰色覆盖`largebut.png`，当悬停时，`largebut_hover.png`我来了在一个带有漂亮按钮的网站上，像这样[的图标，像这些图标在这里](http://tecdiary.net/demo/invoice-manager/index.php?module=home)

但我不知道我该怎么做，例如我只能设法做到这一点

```
<ul class="dash">                       
            <li>
            <a href="#" title="Users" class="tip" data-placement="bottom">
            <img src="images/icons/users.png" alt="" />
            <span>Users</span>
            </a>
            </li>
            </ul> 
```

有什么想法可以制作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:38:59.447

您是否正在寻找像这样的按钮？

![](https://content.screencast.com/users/MeeVanMatterhorn/folders/Jing/media/21174e62-b583-4c93-a8b9-6f22db8a1f24/this_btn_.png)

然后当你悬停它时它会得到一个`light grey colour`？这些按钮是使用 CSS 制作的，`largebut.png`不像你说的那样。

这是示例：

![](https://content.screencast.com/users/MeeVanMatterhorn/folders/Jing/media/c6c595a2-7e43-4f00-a435-e41442aa074d/css_for_btns.png)

如果你想做到这一点，那么你不会那么难，我可以告诉你。简单的方法是应用 CSS 类，比如颜色的代码`.btn-primary:hover {...}`在哪里`...`以及你想要做的所有事情。

另外，您可以阅读他们的 CSS 代码，但我不确定您是否熟悉它，这样会让您更加困惑。我认为您开始的最佳方式是[W3 学校](http://www.w3schools.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:44:10.090

如果你想要这些图标，以及一些花哨且现成的 css 布局，你可以使用[Bootstrap](http://twitter.github.io/bootstrap/base-css.html#buttons)

# ios - Geolocation on iOS updates on standby ONLY with an active mapview

> ID：15946429
> 
> 赞同：0
> 
> 时间：2013-04-11T10:26:29.293
> 
> 标签：ios, geolocation, titanium, titanium-mobile

I've tried to work out the geolocation on the iOS for quite some time now and came to some weird conclusions:

When the app is open(not on standby or whatever) the geolocation is very accurate. The moment you put your phone in standby or minimize the app it jumps to AGPS changing the locations to G-towers etc. closeby.

However; If i have a mapview in the app and i update the userlocation every time the event is triggered it seems to work aswell in standby as non-standby. What is this mapview triggering so it will stay on the normal GPS and not on AGPS?

Here's the creation of the mapview:

```
var mapview = Ti.Map.createView({
    bottom: -300,
    height: 200,
    mapType: Ti.Map.STANDARD_TYPE,
    region: {
        latitude: 0,
        longitude: 0, 
        latitudeDelta: delta,
        longitudeDelta: delta
    },
    animate:true,
    regionFit:true,
    userLocation:true
});

mainWindow.add(mapview); 
```

And the location handling:

```
//Set a timestamp on the current time. This is being checked later to see if its 5 minutes later(Because setInterval isn't trustworthy check will be done this way)
var realTime = new Date();
realTime = realTime.getTime();

//Set the battery time to be on the currenttime plus 5 minutes
batteryTimeToBe = realTime+batteryTimeIncrement;

//Empty interval and text to make a clean (re)start
clearInterval(interval);

//Set a half second timer on the stop button appearing(So people can't double tap the buttons)
stopTimeout = setTimeout(showStopButton, 1000);

//Switch the textlabels and buttons from startview to stopview
stopText.show();
startText.hide();
btnStart.hide();

//Locationhandler
location.start({ 
    action: function (e) {
        if (e.coords) {

            mapview.setLocation({
                latitude: e.coords.latitude,
                longitude: e.coords.longitude,
                animate: false,
                latitudeDelta: delta,
                longitudeDelta: delta
            });

            //If the newly acquired location is not the same as the last acquired it is allowed
            if (e.coords.longitude != lastLon && e.coords.latitude != lastLat) {
                //set the last acquired locations+other info to their variables so they can be checked(and used)
                lastLat = e.coords.latitude;
                lastLon = e.coords.longitude;

                lastKnownAltitude = e.coords.altitude;
                lastKnownHeading = e.coords.heading;
                lastKnownSpeed = e.coords.speed;

                if (lastLat != 0 && lastLon != 0) {
                    setGPSholder(lastLat, lastLon, lastKnownAltitude, lastKnownHeading, lastKnownSpeed);
                } else {
                    GPSSaved.text = 'Geen coordinaten.';
                }
            }
        }

        var timeNow = new Date();
        timeNow = timeNow.getTime();
        //If the now-time is higher or equal to the batteryTimeToBe(Which is reset after every call or when the start button is fired) send the batteryLevel
        if (timeNow >= batteryTimeToBe) {
            sendBatteryLevel();
            batteryTimeToBe = timeNow+batteryTimeIncrement;
            timeNow = null;
            //Ti.API.info(new Date());
        }

    }
});

/*
A second interval which shows a counter to the user and makes sure a location is sent
roughly every 5 seconds(setInterval isn't accurate though)
A lot of counters are tracked for several reasons:
    minuteInterval:     Counter which makes sure the last location is sent after a minute if no new one is found in the meantime
    secondsLastSent:    The visual counter showing the user how long its been for the last save(Is reset to 0 after a succesful save)
    */
interval = setInterval(function () {
    minuteInterval++;
    secondsLastSent++;

    counterBlock.text = "De laatste locatie is " + secondsLastSent + " seconden geleden verstuurd";

    //If the counter is higher than 5 send a new coordinate. If at the same time the minuteInterval is over a minute
    //The last location is put in the array before calling the sendCoordinates
    if (counter >= 5) {
        if (minuteInterval > 60) {
            if (lastLat != 0 && lastLon != 0) {
                setGPSholder(lastLat, lastLon, lastKnownAltitude, lastKnownHeading, lastKnownSpeed);
            }
        }
        counter = 1;
        sendCoordinates();
    } else {
        counter++;
    }
}, 1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:13:20.940

关于钛：

```
Titanium.Geolocation.accuracy = Titanium.Geolocation.ACCURACY_BEST; (or ACCURACY_HIGH) 
```

钛中的位置有一个属性提供者，它的属性准确性可以很好也可以很正常。检查罚款。进一步检查提供者的名称

在 Titanium 中有定位自动和手动模式。使用手动模式并尝试是否可以将电池消耗设置为高，并将精度设置为高。（GPS总是需要高电量，没有办法解决这个问题，没有低电量GPS）

# android - 如何在适用于 Android 的 Google Maps api2 中搜索街道

> ID：15946439
> 
> 赞同：0
> 
> 时间：2013-04-11T10:27:01.557
> 
> 标签：android, search, maps, google-maps-api-2

在我的应用程序中，我想让用户搜索街道（如在谷歌地图网络中），然后显示一个或多个标记以及到搜索街道的路线。

但是，我没有找到如何将“搜索框”添加到地图中。我在这个[StackOverflow 链接](https://stackoverflow.com/questions/5375654/how-to-implement-google-maps-search-by-address-in-android)中看到一些“可能”对我有用的东西，但是，该类`com.google.android.maps.Overlay`不可用：S

而且我不知道该怎么做:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:36:50.640

google maps api（v1 和 v2 版本）仅用于地图。

任何搜索、路线功能都必须由您自己实现（在操作栏上放置一个搜索框，调用服务为您获取日期等）。

# javascript - 如何通过 Jquery 在添加和编辑项目页面上隐藏/显示表单字段

> ID：15946440
> 
> 赞同：0
> 
> 时间：2013-04-11T10:27:03.387
> 
> 标签：javascript, jquery, asp.net, html, forms

我正在为 Intranet 创建库存应用程序。我使用 Property Agent 模块和 DotNetNuke 应用程序来准备我的表格。

因为表单域很多；我想默认隐藏大部分表单字段，并在从相关下拉列表中选择相应的选择值时显示它们。

将新项目添加到库存时，我已成功隐藏/显示表单字段；但是我无法在产品编辑表单上取消隐藏填写的表单字段。我不擅长 Jquery，所以我尝试在这里使用主题来获得想要的结果，但没有运气。

我添加项目的页面网址是：intranetApp/tabid/121/personel/EditProperty/language/tr-TR/Default.aspx

[在上面的页面显示隐藏作品]

我编辑项目的页面网址是：intranetApp/tabid/121/personel/EditProperty/kayitNo/{propertyid}/language/tr-TR/Default.aspx

[虽然我想要显示填充框+所选项目的行；它们默认是隐藏的，我需要在 Cihaz Tipi 的值之间切换以显示隐藏的行。

我认为在您的帮助下，我可以调整脚本并获得正确的结果。

```
 $(document).ready(function() {
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_5').hide(); //Varsayılan                olarak Cihaz Markası alanini sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_6').hide(); //Varsayılan olarak Diğer Marka alanini sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_7').hide(); //Varsayılan olarak Model alanini sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_10').hide(); //Varsayılan olarak Anakart Markası alanini sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_11').hide(); //Varsayılan olarak Anakart Modeli alanini sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_12').hide(); //Varsayılan olarak Anakart Seri No alanini sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_13').hide(); //Varsayılan olarak İşlemci markası alanini sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_14').hide(); //Varsayılan olarak İşlemci modeli ve frekansı alanini sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_15').hide(); //Varsayılan olarak sistemdeki ram miktarı alanini sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_16').hide(); //Varsayılan olarak Ana Bellek Türü alanini sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_17').hide(); //Varsayılan olarak Ana Bellek Modül Sayısı alanını sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_18').hide(); //Varsayılan olarak Hard Disk türü alanını sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_19').hide(); //Varsayılan olarak Hard Disk Kapasitesi alanını sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_20').hide(); //Varsayılan olarak Hard Disk Seri No alanını sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_21').hide(); //Varsayılan olarak Cihaza Takılı Kartlar alanını sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_22').hide(); //Varsayılan olarak Cihaza Takılı Sürücüler alanını sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_23').hide(); //Varsayılan olarak Monitör markası alanını sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_24').hide(); //Varsayılan olarak Monitör tipi alanını sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_25').hide(); //Varsayılan olarak Monitör boyutu alanını sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_26').hide(); //Varsayılan olarak Monitör seri no alanını sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_27').hide(); //Varsayılan olarak Yazici Renk Secimi alanini sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_28').hide(); //Varsayılan olarak Yazicida Kulllanilan Kagit Tipi alanini sakla
      $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_29').hide(); //Varsayılan olarak Veri Iletisim Agina Baglanti Sekli alanini sakla

      $('#dnn_ctr499_Default_EditProperty_rptDetails_21_3').bind('change', function() { //Cihaz tipi alanindan yapilacak secime gore
var optionValue = $("#dnn_ctr499_Default_EditProperty_rptDetails_21_3").val();

switch (optionValue)
{
  case 'Masaüstü Bilgisayar': // Cihaz tipi listeden masaüstü bilgisayar olarak secildiginde

    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_5").show(); //Cihaz Markası secimini goster
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_6").hide(); //Diğer Marka seçimini goster
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_7").show(); //Cihaz Modeli seçimini goster
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_10").show(); //Anakart Markası secimini goster
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_11").show(); //Anakart Modeli secimini goster
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_12").show(); //Anakart Seri No secimini goster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_13').show(); //İşlemci Markası seçimini göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_14').show(); //İşlemci modeli ve frekansı seçimini göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_15').show(); //Sistemdeki ram miktarı alanını göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_16').show(); //Ana Bellek Türü alanını göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_17').show(); //Ana Bellek modül sayısı alanını göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_18').show(); //Hard Disk Türü alanını göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_19').show(); //Hard Disk Kapasitesi alanını göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_20').show(); //Hard Disk seri no alanını göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_21').show(); //Cihaza Takılı Kartlar alanını göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_22').show(); //Cihaza Takılı Sürücüler alanını göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_23').show(); //Monitör markası alanını göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_24').show(); //Monitör tipi alanını göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_25').show(); //Monitör boyutu alanını göster
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_26').show(); //Monitör seri no alanını göster

    break;
    case 'Dizüstü Bilgisayar': // Cihaz tipi listeden dizüstü bilgisayar olarak secildiginde
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_5").show(); //Cihaz Markası seçimini göster
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_6").show(); //Diğer Marka seçimini göster
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_7").show(); //Cihaz Modeli seçimini göster
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_10").hide(); //Anakart Markası secimini sakla
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_11").hide(); //Anakart Modeli secimini sakla
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_12").hide(); //Anakart Seri No secimini sakla
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_13').hide(); //İşlemci Markası seçimini sakla
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_14').hide(); //İşlemci modeli ve frekansı seçimini sakla
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_15').hide(); //Sistemdeki ram miktarı alanını sakla
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_16').hide(); //Ana Bellek Türü alanını sakla
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_17').hide(); //Ana Bellek modül sayısı alanını sakla
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_20').hide(); //Hard Disk seri no alanını sakla
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_23').hide(); //Monitör markası alanını sakla
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_24').hide(); //Monitör tipi alanını sakla
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_25').hide(); //Monitör boyutu alanını sakla
    $('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_26').hide(); //Monitör seri no alanını sakla

    break;
  case 'Laser Yazıcı':
  case 'Inkjet Yazıcı':
  case 'Dot Matrix Yazıcı':  
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_27").show(); //Yazici Renk Secimi secimini goster
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_28").show(); //Yazicida Kulllanilan Kagit Tipi secimini goster
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_29").show(); //Veri Iletisim Agina Baglanti Sekli  secimini goster

  default:
    $("#dnn_ctr499_Default_EditProperty_rptDetails_trItem_10").hide();
    //$('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_11').hide();
    //$('#dnn_ctr499_Default_EditProperty_rptDetails_trItem_12').hide();
    break;
    }
    });
    }); 
```

我的 HTML 位于：

[https://gist.github.com/anonymous/5362300](https://gist.github.com/anonymous/5362300)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:43:46.210

一种选择可能不是最强大的，但可以在没有太多字段的情况下充分发挥作用。如果将其他字段放入数组中，您还可以循环 if 语句。

理论：使用带有 if 语句的 onblur 句柄，然后运行函数并根据答案传递参数。

如果无法添加 html 代码，请使用 jquery 中的 .bind()

IE

```
function checkValues (elementId) {
var checkThis = $(elementId).val();

if (checkThis==/*Enter what you are looking for*/) {
    $("/*SHOW THIS ID*/").show();
    //hide original form element if needed
    $(elementId).hide();
    return;
}
//repeat if statements as necessary

    alert("entry not found");
}; 
```

}

# java - 编写提醒应用程序无法创建新对象

> ID：15946443
> 
> 赞同：0
> 
> 时间：2013-04-11T10:27:19.360
> 
> 标签：java, android

我正在编写一个应用程序来创建提醒。该应用程序的工作原理是这样的-

每当该人输入的提醒文本并设置它。

应该创建一个显示提醒文本的 TextView、一个启用/禁用它的 CheckBox 以及一个用于设置提醒警报的配置按钮。

而不是单独创建所有这些对象。我想制作一个提醒对象。每当用户设置新的提醒时，都会创建此对象。

这是我的代码。我不知道为什么提醒对象不起作用..应用程序只是强制关闭。

```
package com.aditya.patange.taskscheduler;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.text.TextUtils;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {
    EditText ReminderEditText;
    int MAX_REMINDERS = 20;
    int TEXT_SIZE = 20;
    TextView[] textviews; 
    CheckBox[] checkboxes;
    LinearLayout Llayout;
    LayoutParams params;
    SharedPreferences spref;
    SharedPreferences.Editor sprefEditor;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Llayout = (LinearLayout) findViewById(R.id.linearlayout);
        params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void InitializeObjects() {
        Llayout = (LinearLayout) findViewById(R.id.linearlayout);
        ReminderEditText = (EditText) findViewById(R.id.addReminderText); 
    }

    /*
     * Toast Message
     */
    public void ToastMessage(String Message) {
        Toast.makeText(getApplicationContext(), Message, Toast.LENGTH_SHORT).show();
    }

    public String getReminderText() {
        return ReminderEditText.getText().toString();
    }

    /*
     * onClick method for the set Reminder Button 
     */

    public void setReminder_onClick(View v) {
        /* Don't want a reminder with blank text..*/ 
        if(!TextUtils.isEmpty(getReminderText())) {
            ReminderWidget widget = new ReminderWidget(this);
            widget.setText(getReminderText());
            widget.setTextSize(20);
            widget.setLayoutParams(params);
            widget.displayReminderWidget(Llayout);
        }
    }

} 
```

ReminderWidget.java （有人能告诉我这段代码有什么问题吗？）

```
package com.aditya.patange.taskscheduler;

import android.content.Context;
import android.content.SharedPreferences;
import android.view.ViewGroup.LayoutParams;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.LinearLayout;
import android.widget.TextView;

/*
 * The Reminder Widget should consist of - 
 * 
 * [1] A TextView displaying the Reminder
 * [2] A CheckBox with the Enable/Disable Toggle.
 * [3] A configure Button  
 * (This should open a context Menu by which you can configure the Alarm) 
 * [4] ..lots to come
 * 
 */

public class ReminderWidget {

    TextView textview;
    CheckBox checkbox;
    Button configButton;
    SharedPreferences preference;
    String ReminderText;
    int ReminderTextSize;

    public ReminderWidget(Context context) {
        textview = new TextView(context);
        checkbox = new CheckBox(context);
        configButton = new Button(context); 
        configButton.setText("Configure");
    }

    public void displayReminderWidget(LinearLayout layout) {
        layout.addView(textview);
        layout.addView(checkbox);
        layout.addView(configButton);
    }

    public void setText(String text) {
        ReminderText=text;
        textview.setText(ReminderText);
    }

    public String getText(String text) {
        return ReminderText;
    }

    public void setTextSize(int size) {
        ReminderTextSize = size;
        textview.setTextSize(ReminderTextSize);
    }

    public int getTextSize() {
        return ReminderTextSize;
    }

    public void setLayoutParams(LayoutParams params) {
        textview.setLayoutParams(params);
        checkbox.setLayoutParams(params);
        configButton.setLayoutParams(params);
    }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:40:32.900

如果没有 logcat，这有点像在黑暗中拍摄，但是

```
public String getReminderText() {
    return ReminderEditText.getText().toString();
} 
```

`ReminderEditText`在这里创建

```
public void InitializeObjects() {
    Llayout = (LinearLayout) findViewById(R.id.linearlayout);
    ReminderEditText = (EditText) findViewById(R.id.addReminderText); 
} 
```

但我没有看到你调用的任何地方`InitializeObjects`，所以你调用`getText()`了一个空对象，因为它还没有被实例化。

# sql - 从两个不同的表中选择多个列，合并然后插入另一个表？

> ID：15946444
> 
> 赞同：1
> 
> 时间：2013-04-11T10:27:23.137
> 
> 标签：sql, sql-server, tsql

我有以下表格：

```
T1    T2           T3    T4
ID    ID A B C     ID    
---   --------     ---   ---
1     3  u v w      3
2     4  x y z      4 
```

首先，我必须从 B 中选择具有从 C 检索到的 ID 的项目，如下所示：

```
SELECT a,b,c FROM T2 WHERE ID IN (SELECT ID FROM T3)

--will return u,v,w
              x,y,z 
```

现在我想检索 T1 中的 ID，并将它们与从上述查询返回的每一行合并，然后将它们插入 T4：

```
 1   u v w
   1   x y z
   2   u v w
   2   x y z 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:42:50.597

将选项与 CROSS JOIN 一起使用

```
INSERT T4(ID, A, B, C)
SELECT t1.ID, o.A, o.B, o.C
FROM T1 t1 CROSS JOIN (
                       SELECT a,b,c 
                       FROM T2 t2 JOIN T3 t3 ON t2.ID = t3.ID
                       ) o 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/d627bc/1)上的演示[](http://sqlfiddle.com/#!3/d627bc/1)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:37:45.497

如果我对您的理解正确，这会有所帮助：

```
INSERT INTO T4
SELECT ID, A, B, C 
FROM    (SELECT a,b,c FROM T2 WHERE ID IN (SELECT ID FROM T3)) tab1
        CROSS JOIN T1 
```**

# php - 如何根据 jquery ajax 响应发出警报

> ID：15946448
> 
> 赞同：1
> 
> 时间：2013-04-11T10:27:36.953
> 
> 标签：php, jquery, ajax, codeigniter

在一个 php 页面中，我有一个 ajax jquery 代码，它调用我的 php 控制器来执行特定的操作，当操作返回成功时，我正在刷新特定的 div。

我的疑问是，当我的控制器向我的 jquery 函数发出响应时，我想执行其他操作，例如。如果用户未登录，那么我想发出警报，例如`alert("Please login to continue");`

我已经尝试了下面的代码，但它根本不起作用。请帮忙

```
 <script type="text/javascript">         
        $('.voteup').click(function(e)
        {  
            // prevent the default action when a nav button link is clicked
            e.preventDefault(); 
            var $this = $(this),
            id = $this.data('id') 
            e.preventDefault(); 
            // ajax query to retrieve the HTML view without refreshing the page.
            $.ajax({
                type: 'POST',
                url:"<?php echo base_url('question/ajax_vote_up/'); ?>",
                data: {id: id},  
                dataType: 'html',
                success: function (html) 
                { 
                    if(html == 'not_logged_in')//This is not working, not giving alert 
                    { 
                        alert("You need to login to vote.");
                    }
                     if(html == 'own_question')//This is not working, not giving alert 
                    { 
                        alert("You can not vote for your own question");
                    }
                    else{ //when success refresh the div
                        $('#questvotediv').html(html);}
                }
            });
            return false;
        });
    </script> 
```

在我的控制器中

```
function ajax_vote_up() 
{  

  $answer_id = $this->input->post('id'); 

   if ($answer_id > 0 && $this->session->userdata('logged_in') && $this->askmodel->get_user_id_By_answer_id($answer_id)!=$this->session->userdata('userid')) 
   {  
     //Few business logic related to my requirement
       $this->load->view('users/pages/show_question_By_id/votediv', $data); 
  }
   else if($this->askmodel->get_user_id_By_answer_id($answer_id)==$this->session->userdata('userid'))
  {
       //when user try to vote for their own quetion
     echo "own_question";
  }
  else
    {//Not looged in
      echo "not_logged_in";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:40:40.023

余可以在修剪空格后尝试

```
 success: function (html) 
           { 
                html = $.trim(html);
                if(html == 'not_logged_in')//This is not working, not giving alert 
                { 
                    alert("You need to login to vote.");
                }
                if(html == 'own_question')//This is not working, not giving alert 
                { 
                    alert("You can not vote for your own question");
                }
                else{ //when success refresh the div
                        $('#questvotediv').html(html);}
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:41:59.177

```
You need to store response inside body first. Then You can check it.

<script type="text/javascript">         
    $('.voteup').click(function(e)
    {  
        // prevent the default action when a nav button link is clicked
        e.preventDefault(); 
        var $this = $(this),
        id = $this.data('id') 
        e.preventDefault(); 
        // ajax query to retrieve the HTML view without refreshing the page.
        $.ajax({
            type: 'POST',
            url:"<?php echo base_url('question/ajax_vote_up/'); ?>",
            data: {id: id},  
            dataType: 'html',
            success: function (html) 
            { 
                $('#responseStore').html(html);

                if($('#responseStore').text() == 'not_logged_in')
                { 
                    alert("You need to login to vote.");
                }
                 if($('#responseStore').text() == 'own_question')
                { 
                    alert("You can not vote for your own question");
                }
                else{ //when success refresh the div
                    $('#questvotediv').html(html);}
            }
        });
        return false;
    });
</script>
<div style="display:none;" id="responseStore"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T13:46:01.380

可能是您在 echo 命令之前或之后输出的 PHP 文档中有一些空格。如果是这种情况，您的比较可能会很混乱。因此，我通常更喜欢使用 INT，因为在您的情况下，您可以将 PHP 的返回值设置为 0 表示未登录，1 表示自己的问题，然后在您的 JS 比较中使用 parseFloat() 函数和comparte整数的

# c++ - 创建一个 const char* const* 数组

> ID：15946449
> 
> 赞同：2
> 
> 时间：2013-04-11T10:27:40.857
> 
> 标签：c++, pointers, boost-python, arrays

我希望调用第 3 方库函数，该函数接受 a`const char* const*`作为参数类型：-

```
class Arguments
{
public:
    Arguments(int argc, const char* const* p_argv = 0);
private:
    deque<std::string> m_Args;
} 
```

在库实现中，传递的对象通常是指向`char** argv`. 然后将字符串缓存在私有成员变量 ( `m_Args`) 中，因此我*认为*其中的指针`p_argv`只需要在构造期间有效。

**主要问题：**我怎样才能或应该创建该`const char* const* p_argv`变量？

* * *

**更多解释**

我正在尝试传递从其他数组类型（Boost Python `list`s 和`tuple`s）转换而来的对象，并试图找到一种安全（[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)）的方式来做到这一点。

我将在我的代码中的多个不同位置执行此操作，因此我尝试实现可以​​为我进行类型转换的可重用函数。例如

```
// File : converter.hpp

///! ConvertPyListToCharArrayPointer
///
///  Convert a Python list to const char* const*.
/// \param   list   - Python list of strings to convert. [in]
/// \param   pargv - array of const char pointers.      [in/out]
/// \returns - const pointer to first element in const char* array.

const char* const* ConvertPyListToCharArrayPointer(
    const boost::python::list& list, const char** pargv); 
```

我希望`pargv`可以在堆栈上创建一个函数，然后调用`ConvertPyListToCharArrayPointer`和`store_arguments`。但是，对代码的单元测试表明，当从`Arguments`类中恢复时，存储的字符串变得无效。（这是有道理的；我为指针数组分配存储空间，但不为这些指针指向的字符串分配存储空间）。

* * *

**转换器实现**

最初的`ConvertPyListToCharArrayPointer`实现是：-

*在堆栈上*

```
// File : converter.cpp

const char* const* ConvertPyListToCharArrayPointer(
    const boost::python::list& list, const char** pargv)
{
    boost::python::stl_input_iterator<std::string> cur_key(list), end;
    std::string temp_s;
    int i=0;
    while (cur_key != end)
    {
        // Get current arg as std::string
        temp_s = (*cur_key++);
        // Save string as a const char*, in pargv[i]
        pargv[i++] = temp_s.c_str();
    }
    pargv[i] = NULL;
    // Validation code...
    const char* const* m_argv = &pargv[0];
    return m_argv;
} 
```

为了确切了解发生了什么，我部署了大量打印语句。在它说的地方`Validation code...`，我目前有： -

```
 printf("returning address (pargv[0]) of %s (%p)\n", pargv[0], &pargv[0]);
    printf("pargv[1] of %s (%p)\n", pargv[1], &pargv[1]);
    printf("pargv[2] of %s (%p)\n", pargv[2], &pargv[2]);
    printf("pargv[3] of %s (%p)\n", pargv[3], &pargv[3]);
    if (&pargv[0] == &pargv[1])
        printf("addresses of pargv[0] and [1] are the same\n"); 
```

通过上述`ConvertPyList...`实现，给定 Python list `["foo", "bar", "baz"]`，这些打印语句显示：-

```
returning address (pargv[0]) of baz (0x7fffffffa410)
pargv[1] of bar (0x7fffffffa418)
pargv[2] of baz (0x7fffffffa420)
pargv[3] of (null) (0x7fffffffa428) 
```

它显然应该显示`foo`, `bar`, `baz`, 而不是显示`baz`, `bar`, `baz`。

* * *

**让它工作**-*`malloc`并复制字符串*

我能够得到并同意的唯一方法是调用`foo`每个存储在：-`bar``baz``malloc``char*``pargv`

```
const char* const* pyblast::ConvertPyListToCharArrayPointer(
    int argc, const boost::python::list& list, const char** pargv)
{
    int i=0;
    boost::python::stl_input_iterator<std::string> cur_key(list), end;
    char* cur_ptr;
    while (cur_key != end)
    {
        // Allocate memory on heap.
        cur_ptr = (char*) malloc( strlen( (*cur_key).c_str() ) );
        // Copy string into malloc'd memory
        if (cur_ptr)
            strcpy(cur_ptr, (*cur_key).c_str());
        else
            fprintf(stderr, "malloc failure!\n");
        // Save pointer.
        pargv[i++] = cur_ptr;
        ++cur_key;
    }
    pargv[i] = NULL;
    // Validation code...
    const char* const* m_argv = &pargv[0];
    return m_argv;
} 
```

但是现在我有很多重复的字符串，我需要在调用代码中释放自己。有没有更安全的 RAII 方法来创建这个`const char* const*`数组？

也许这里可以使用一种标准类型的指针（在 STL 或 Boost 中）。使用`boost::make_shared`似乎没有奏效......

* * *

**单元测试代码**

如果您希望自己编译或测试代码，以下内容应该会有所帮助：-

我创建了以下 C++ 测试文件：-

```
/// File: test_converters.cpp

#include "converter.hpp"

// Easiest just to include the source whilst testing...
#include "converter.cpp"

#include <boost/python/def.hpp>
#include <boost/python/list.hpp>
#include <boost/python/module.hpp>

// Create and return the Python list: ["foo", "bar", "baz"]
boost::python::list make_dummy_list(void)
{
    boost::python::list dummy_list = boost::python::list();
    dummy_list.append("foo");
    dummy_list.append("bar");
    dummy_list.append("baz");
    return dummy_list;
}

int TestPyListConverter(void)
{
    // Create data to be tested.
    boost::python::list py_argv = make_dummy_list();
    ssize_t argc = boost::python::len(py_argv);
    const char* pargv[argc+1];    //< pointer array
    const char* const* m_pargv =  //< type we're converting to / testing.
        pyblast::ConvertPyListToCharArrayPointer(argc, py_argv, pargv);
    // Free pargv, if necessary...

    /// Tests, from Python perspective:-
    ssize_t i = 0;  // current index on m_pargv
    char* p_argv;   // temporary pointer
    while (m_pargv[i] != NULL && i <= argc)
    {
        p_argv = PyString_AsString(PyList_GetItem(argv.ptr(), i) );
        if( strcmp(m_pargv[i++], p_argv)  != 0)
        {
            PyErr_SetString(PyExc_Exception,
                "Test failed. m_pargv[i] != p_argv.");
            boost::python::throw_error_already_set();
        }
        if (i > 4) // didn't find NULL pointer at end of array.
            return 1;
    }
    return 0;
}

BOOST_PYTHON_MODULE(test_converter)
{
    boost::python::def("test_py_list_converter",  &TestPyListConverter);
} 
```

注意虽然这在使用时有效`malloc`，但在我看来它像内存泄漏代码，因为 pargv 中的指针不是`free`'d。理想情况下，调用代码不需要担心...

这可以使用以下命令编译：

```
$ gcc -O1 -shared -g -pipe -fstack-protector -fPIC -I/usr/include/python2.7 -I./ ./test_converters.cpp -o ./test_converter.so -lboost_python -lpython2.7 
```

并执行：

```
$ python -c 'import test_converter; test_converter.test_py_list_converter()' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:00:46.660

如果您的主要问题是，如何将队列转换为 const char* const * ，那么：指向某物的指针有时用于指向某物数组的第一个元素。因此，在 const char* const * 的情况下，可能意味着指向数组第一个元素的指针以及指向 char 数组的指针。对于每个数组，必须有某种协议来表示数组的长度。在 const char* 的情况下，这可能是一个 C 字符串，通常以 0 结尾。对于指向 char 指针的指针数组，0 也可用于指示数组的结尾。回到你的问题：

您可以使用 std::vector 并使用 std::string.c_str() 返回的值对队列的所有元素进行初始化。将最后一个 0 指针添加到向量。现在您可以将向量的第一个元素的地址转换为 const char* const *。

不是，只要指针向量和字符串队列有效，您获得的指针才有效。

```
std::deque< std::string > input;
std::vector< const char* > v;

for ( std::deque< std::string >::const_iterator i = input.begin(); i != input.end(); ++i )
    v.push_back( i->c_str() );

v.push_back( 0 );

const char* const * p = &v[ 0 ]; 
```

# azure-storage - 如何加快插入 Azure 表存储的速度？

> ID：15946454
> 
> 赞同：3
> 
> 时间：2013-04-11T10:27:51.390
> 
> 标签：azure-storage

[我实现了如何使用表存储服务](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)中描述的一些代码。我围绕插入操作创建了一个循环来插入几条记录，我不想进行批量插入。我发现插入操作非常慢，不超过 6 条记录。第二个被插入。该代码在 Azure 中的虚拟机上运行，​​位于包含存储服务的同一订阅中。有谁知道插入记录的更快方法？我们将定期在我们的系统中持续需要保存至少 100 条记录。第二。

我的部分代码在这里：

```
 public void InsertCustomer(string tableName, CustomerEntity customer)
    {

        // Create the table client.
        CloudTableClient tableClient = _azureQueueStorageAccount.CreateCloudTableClient();

        //Get table reference
        CloudTable table = tableClient.GetTableReference(tableName);

        // Create the TableOperation that inserts the customer entity.
        TableOperation insertOperation = TableOperation.Insert(customer);

        // Execute the insert operation.
        table.Execute(insertOperation);
    } 
```

* * *

谢谢帕斯卡。但是由于某种原因，这里没有描述，我不想做批量插入。你知道我的代码中描述的正常插入是否应该这么慢？插入的 Customer 对象非常简单：

```
 public class CustomerEntity : TableEntity
{
    public string Email { get; set; }
    public string PhoneNumber { get; set; }

    public CustomerEntity(string lastName, string firstName)
    {
        this.PartitionKey = lastName;
        this.RowKey = firstName;
    }

    public CustomerEntity() { }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:53:16.217

您可以批量插入操作，只要您`customer`共享相同的 PartitionKey

只需查看有关[如何：插入一批实体的部分](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/#insert-batch)

# ios - iCloud - UIDocument saveToUrl 不执行完成块

> ID：15946455
> 
> 赞同：1
> 
> 时间：2013-04-11T10:27:51.813
> 
> 标签：ios, icloud

前几天我正在用它进行测试，它正在工作。今天，调用此方法后，它从不调用完成块。

是否存在不调用完成块的情况？我记得 Apple 说过，无论发生什么，它都会被调用。

这是代码块：

```
dispatch_async (dispatch_get_global_queue (DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^(void) {
            // Get ubiquitous url
            NSURL *ubiq = [[NSFileManager defaultManager]
                           URLForUbiquityContainerIdentifier:nil];
            NSURL *ubiquitousPackage = [[ubiq URLByAppendingPathComponent:
                                         @"Documents"] URLByAppendingPathComponent:fileName];

            // Create new CloudFile
            CloudFile *file = [[CloudFile alloc]initWithFileURL:ubiquitousPackage];
            file.data = data;
            [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(onDocumentStateChanged:) name:UIDocumentStateChangedNotification object:file];             

            dispatch_async (dispatch_get_main_queue (), ^(void) {
                [file saveToURL:file.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:^(BOOL success) {
                    NSLog(@"test");
                    if (success) {
                        [self sendEvent:ICLOUD_FILE_SAVE_SUCCESSFUL object:file];
                    } else {
                        [self sendEvent:ICLOUD_FILE_SAVE_FAILED];
                        NSLog(@"kaiCloud: Saving failed. (%@)",fileName);
                    }

                }];
            });

        }); 
```

编辑：请注意，我添加了 NSLog(@"test") 并且我没有看到它被记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T11:43:09.660

我遇到了同样的问题（这就是我发现你的问题的方式）。

原因很简单。测试代码不会等待调用完成处理程序，当然也不会等待它完成执行。

如果测试时间足够长或碰巧停止，您的测试有时可能会起作用。但这并不可靠。

使用此处提供和解释的 WAIT 宏并解决问题。

[https://github.com/hfossli/AGAsyncTestHelper](https://github.com/hfossli/AGAsyncTestHelper)

# c - “下标值既不是数组也不是指针也不是向量”错误

> ID：15946456
> 
> 赞同：0
> 
> 时间：2013-04-11T10:27:51.830
> 
> 标签：c

我已经阅读过有关类似问题的问题，但**2D**或**动态**数组的问题已经在那里解决了。（有指针，但我想没有它们。）

```
#include <stdio.h>
#include <stdlib.h>

int interseq ( int, int ); // interval sequence

int main()
{
    int arr[100] = { 75, 47, 64, 45, 67, 51, 55, 36, 63, 30,
                     39, 58, 55, 67, 70, 44, 46, 51, 51, 61,
                     50, 54, 49, 51, 52, 54, 64, 68, 45, 40,
                     48, 60, 55, 37, 36, 13, 62, 53, 37, 53,
                     52, 49, 37, 54, 69, 44, 53, 58, 77, 46,

                     44, 63, 57, 64, 28, 46, 50, 57, 42, 72,
                     12, 69, 52, 53, 77, 50, 45, 49, 49, 46,
                     28, 40, 65, 25, 45, 45, 62, 28, 39, 69,
                     52, 57, 39, 73, 37, 46, 38, 65, 49, 58,
                     63, 30, 51, 48, 47, 56, 48, 41, 30, 54 };

    printf("%d", interseq ( arr, diagArr) );

    return 0;
} 

/* User's function. Description: 'farr' is 'arr' and so on..  */
int interseq ( int farr, int fdiagArr)
{
   int min, i;

   for ( i = 0; i < 100; i++ )    // Finding the 'min' element.
      if ( farr[i+1] < farr[i] )  // there are 2 errors 
          min = farr[i];          // there is 1 error 
      else
          min = farr[i+1];        // there is 1 error 

return 1;
} 
```

**错误是一样的：**

```
error: subscripted value is neither array nor pointer nor vector 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:29:08.970

把它们变成指针：

```
int interseq(int *farr, int *fdiagArr)
                 ^          ^ 
```

我看不到`diagArr`您的代码中的内容，因此这部分是猜测。

* * *

正如评论中的 simonc 指出的那样，当`i = 99`,`farr[i+1]`将是非法的。你应该早点停下来或改变你的算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:31:22.157

试试这个：

```
//int interseq ( int farr, int fdiagArr)
int interseq ( int farr[], int fdiagArr[]) 
```

# specflow - 如何访问 Specflow 中另一个特征的值

> ID：15946458
> 
> 赞同：1
> 
> 时间：2013-04-11T10:27:54.547
> 
> 标签：specflow

我有两个功能文件 feature1.feature 和 feature2.feature。在 feature1.feature 中，我正在创建一个字段值并将其添加到 FeatureContext.Current。是否有可能从 feature2.feature 访问该值？

我知道一旦特定功能运行结束，FeatureContext 类将被清除。是否有任何其他方法可以访问两个不同功能文件之间的值？

请提出一些想法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T09:39:01.953

我强烈建议反对这种设置。有几个原因：

*   技术原因：SpecFlow 不保证它运行场景的任一功能的顺序。你不能相信它总是一样的。
*   商业原因：您正在编写的场景首先是一种通信工具。您希望它们本身易于理解。当您谈论特定场景时，您无需通读该功能中的其他场景即可了解此特殊情况的作用。它阻塞了你在场景中的交流。

我建议您宁愿在每个场景中复制信息以提高可读性。如果您最终在每个场景中都有大量重复信息，您可以使用[Gherkin 的背景功能](https://github.com/cucumber/cucumber/wiki/Background)。这些步骤在功能文件中的每个场景之前运行一次，可用于重复操作。

如果您发现自己需要在场景之间来回传递信息，您可能应该退后一步重新考虑您的场景。这两种情况真的不同吗？或者它可能只是一个？你怎么能更清楚地表达它们？

我希望这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:26:56.420

我从未尝试过，但也许您可以使用 [BeforeFeature] 和 [AfterFeature] 属性从 featurecontext 中获取值并将其设置在下一个功能的上下文中。

# c# - PrinterPlusPlus 找不到虚拟打印机

> ID：15946460
> 
> 赞同：1
> 
> 时间：2013-04-11T10:27:55.797
> 
> 标签：c#, .net, virtual-printer

我的公司正在尝试设置文件共享系统。这就是为什么我们决定使用虚拟打印机，以更有效地将文件发送到不同的位置。

我正在使用 PrinterPlusPlus 来完成工作，但问题是我发现在线文档非常浅薄。

有谁对这个软件有经验吗？我无法让它工作。

*这是我为达到现在的位置而采取的几个步骤（无处...）*

1.  安装虚拟打印机

![安装打印机](https://i.stack.imgur.com/9Ae6J.png)

2.  创建一个简单的程序。
3.  使用打印机++工具将我的程序与虚拟打印机链接

![将 dll 与虚拟打印机链接](https://i.stack.imgur.com/NqBNf.png)

什么也没有发生。我在设备中找不到新打印机，在任何应用程序的打印对话框屏幕中也找不到。如果有此软件经验的人可以指出正确的方法，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-28T19:55:49.167

我已经使用printer++ 几个星期了，并发现了一些可能对您有帮助的代码问题。

*   您应该检查的第一件事是 32 位或 64 位版本。发生在我身上，我试图在 Windows 7 64 位上安装 32 位版本，结果是实际上没有安装打印机，即使显示器工作。

*   另一个问题可能是语言。在安装程序的某些地方，它会检查一些错误消息，如果您使用的 Windows 与英语不同的其他语言，这些错误消息将不对应。对此的一种解决方案是打开源代码项目并从 SpoolerHelper.cs 文件中注释第 411 和 412 行（在我的情况下，在 x64 安装程序下）。编译，然后重试。

    ```
     //1 - Add Printer Monitor
            LogHelper.Log("Adding Printer Monitor.");
            GenericResult printerMonitorResult = AddPrinterMonitor(monitorName);
            if (printerMonitorResult.Success == false)
            {
                if (printerMonitorResult.Message.ToLower() != "the specified print monitor has already been installed")
                    throw printerMonitorResult.Exception;
            } 
    ```

我对西班牙窗口的解决方案是：

```
 //1 - Add Printer Monitor
            LogHelper.Log("Adding Printer Monitor.");
            GenericResult printerMonitorResult = AddPrinterMonitor(monitorName);
            if (printerMonitorResult.Success == false)
            {
                if ((printerMonitorResult.Message.ToLower() != "the specified print monitor has already been installed") && (printerMonitorResult.Message.ToLower() != "el monitor de impresión especificado ya ha sido instalado"))
                    throw printerMonitorResult.Exception;
            } 
```

如果您仍然遇到问题，c:/PrinterPlusPlus_Installer.txt 上有一个安装记录器。也许你可以在那里找到一些答案。

我知道你的问题已经有一段时间了，但我还是想分享这个，给其他可能需要它的人。希望能帮助到你。

# javascript - 跨域json解析

> ID：15946463
> 
> 赞同：1
> 
> 时间：2013-04-11T10:28:11.840
> 
> 标签：javascript, jquery, ajax

我在其中一个链接中有以下 json：

```
{"edi":[{"NEdid":"19", "Publications":"B0001", "NCid":"141"
, "SEditionCode":"C0001", "SLang":"English", "STimeZone":"GMT+4:00"
, "SEdname":"Default", "NEdmon":"1", "NEdtue":"1", "NEdwed":"1"
, "NEdthu":"1", "NEdfri":"1", "NEdsat":"1", "NEdsun;":"1"
, "SFrequency":"Daily", "NSequence":"1", "dtCreatedOn":"2013-03-25 12:18:46.0"
, "NCreatedBy":"3", "dtModifiedOn":"2013-03-25 12:18:46.0"
, "NModifiedBy":"3", "BIsActive":"1", "BIsDeleted":"0", "NNoe":"7"}]} 
```

我想解析跨域json。我在 php 页面的页面加载并使用 localhost 时调用以下函数。我正在使用以下代码：

```
function loadEditionList(edurl) {

    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            var jsonEdition = xmlhttp.responseText;
            var objEdition = JSON.parse(jsonEdition);

            for (var i = 0; i < objEdition.edi.length; i++) { 
                var editionname=objEdition.edi[i].SEdname;  
                alert(editionname);
            }
        }
    }
    xmlhttp.open("GET", edurl, true);
    xmlhttp.send();
} 
```

上面的代码在 IE 中运行，带有关于安全性的警告消息，但在 chrome 和 mozilla 中不起作用。xmlhttp.status 在 chrome 和 mozilla 中为 0。

我使用的另一个代码：

```
function loadEdition()
{
var getUrl = 'someurl/desktopReader.do?numPublisher=3&type=Editions&numPublication=19';

                $.ajax({
                    url : getUrl,
                    type : 'GET',
                    dataType : 'jsonp',
                    jsonp: 'jsonp',
                    crossDomain : true,
                    success: function() { alert('Success!'); },                                                                                                               
                    error: function() { alert('Uh Oh!'); },
                });           
} 
```

在这种情况下，我总是会得到警报“哦哦！”。

请建议我正确的方法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:48:42.707

也许问题出在服务器端。这是我给其他人的例子：http: [//jsfiddle.net/YGm89/](http://jsfiddle.net/YGm89/) 代码：

```
 $.ajax({
   url: "http://ws.geonames.org/postalCodeSearchJSON",
   dataType: "json",
   data: {
      postalcode_startsWith: request.term
   },
   success: function(data) {alert("ok");}
}); 
```

[以您的代码](http://jsbin.com/igulob/1/)为例。 我删除了 JSONP 函数回调名称，因为我在您的请求中看不到任何内容。我假设，您执行标准 JSON 请求（不是 JSON **P**）。

# magento - 将 magento 标头车价格货币符号从 $ 更改为 Rs

> ID：15946464
> 
> 赞同：0
> 
> 时间：2013-04-11T10:28:12.703
> 
> 标签：magento, e-commerce, magento-1.7

我想将 magento 标头车价格货币符号从**$**更改**为 Rs。**在我的虚拟应用程序中。请看看我的虚拟安装：http: [//questoons.com/ojp/index.php/](http://questoons.com/ojp/index.php/)

您可以在现场看到，所有商品的价格均为**卢比。**（印度卢比格式）但购物车价格（查看标题**总价 $0.00 美元**）以**美元为**单位。我想像**总价卢比一样显示它。0.00**

请指导我该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:00:06.013

进入管理面板：

**系统>配置>通用>货币设置>货币选项>更改基础货币，默认显示货币**

如果您已经这样做了，那么在管理面板中转到：

**system>configuration>developer>debug>template path hints**，将其设置为**'yes'**。

比刷新您的网站主页。您将能够看到模板文件的路径。去那里，删除美元'$'符号并添加'Rs。'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:51:40.493

**您可以在 magento 中使用英语。**

> 打开 lib/Zend/Locale/Data/en.xml

寻找

> <货币类型="INR" >

添加代码：

> <符号>Rs</符号>

收盘前</货币>

**并设置您的默认货币和基础货币**

去：

> 系统 > 配置 > 常规 > 货币设置 > 货币选项 > 更改基础货币，默认显示货币，允许货币

选择印度卢比。

# r - 使用 for 循环在 R 中创建多个具有不同图例比例的气泡图

> ID：15946465
> 
> 赞同：4
> 
> 时间：2013-04-11T10:28:13.050
> 
> 标签：r, function, for-loop, plot, legend

我一直在尝试制作几个气泡图，显示不同地点几个人的观察频率（以百分比表示）。在同一地点发现了一些人，但不是全部。此外，每个站点内的位置数量可能因人而异。我的主要问题是我有超过 3 个个人和超过 3 个站点，所以我一直在尝试想出一个好的/快速的方法来创建这种类型的气泡图/图例。我也遇到了图例问题，因为我需要一个函数，在创建新绘图时将图例放置在同一位置。在图例中，我想为每个频率显示不同的气泡大小（如果可能，指示气泡旁边的值）。

这是我的脚本的一个示例。关于如何做到这一点的任何建议或想法都将非常有帮助。

> ```
> # require libraries
> library(maptools)
> library(sp)
> 
> data<-read.table(text="ind  lat   long    site    freq    perc
>              A  -18.62303   147.29207   A   449 9.148329258
>              A  -18.6195    147.29492   A   725 14.77180114
>              A  -18.62512   147.3018    A   3589    73.12550937
>              A  -18.62953   147.29422   A   145 2.954360228
>              B  -18.75383   147.25405   B   2   0.364963504
>              B  -18.73393   147.28162   B   1   0.182481752
>              B  -18.62303   147.29207   A   3   0.547445255
>              B  -18.6195    147.29492   A   78  14.23357664
>              B  -18.62512   147.3018    A   451 82.29927007
>              B  -18.62953   147.29422   A   13  2.372262774
>              C  -18.51862   147.39717   C   179 0.863857922
>              C  -18.53281   147.39052   C   20505   98.95757927
>              C  -18.52847   147.40167   C   37  0.178562811",header=TRUE)
> 
> # Split data frame for each tag
> ind<-data$ind
> M<-split(data,ind)
> l<-length(M)
> 
> ### Detection Plots ###
> 
> pdf("Plots.pdf",width=11,height=8,paper="a4r")
> par(mfrow=c(1,1))
> 
> for(j in 1:l){
> 
>    # locations
> 
>    new.data<-M[[j]]
>    site<-as.character(unique(new.data$site))
> 
>    fname<-paste(new.data$ind[1],sep="")
>    loc<-new.data[,c("long","lat")]
>    names(loc)<-c("X", "Y")
>    coord<-SpatialPoints(loc)
>    coord1<-SpatialPointsDataFrame(coord,new.data)
> 
>    # draw some circles with specify radius size
> 
>    x<-new.data$long
>    y<-new.data$lat
>    freq<-new.data$perc
>    rad<-freq
>    rad1<-round(rad,1)
> 
>    title<-paste("Ind","-",fname," / ","Site","-",new.data$site[1],sep="")  
> 
>    # create bubble plot  
>    symbols(x,y,circles=rad1,inches=0.4,fg="black",bg="red",xlab="",ylab="")
>    points(x,y,pch=1,col="black",cex=0.4)
> 
>    par(new=T)
> 
>    # map scale  
>    maps::map.scale(grconvertX(0.4,"npc"),grconvertY(0.1, "npc"),
>      ratio=FALSE,relwidth=0.2,cex=0.6)
> 
>    # specifying coordinates for legend  
>    legX<-grconvertX(0.8,"npc")
>    legY1<-grconvertY(0.9,"npc")
>    legY2<-legY1-0.001
>    legY3<-legY2-0.0006
>    legY4<-legY3-0.0003
> 
>    # creating the legend
>    leg<-data.frame(X=c(legX,legX,legX,legX),Y=c(legY1,legY2,legY3,legY4),
>      rad=c(1000,500,100,25))
>    symbols(leg$X,leg$Y,circles=leg$rad,inches=0.3,add=TRUE,fg="black",bg="white")
> 
>    mtext(title,3,line=1,cex=1.2)
>    mtext("Latitude",2,line=3,padj=1,cex=1)
>    mtext("Longitude",1,line=2.5,padj=0,cex=1)
> 
>    box()
> 
> }
> 
> dev.off() 
> ```

第一个图实际上是好的，只需要在传奇气泡旁边有频率/百分比的值。但是，它并不能真正与其他人一起使用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:54:56.503

您正在对图例位置进行硬编码 - 使其相对...

```
legX<-grconvertX(0.8,"npc")
legY1<-grconvertY(0.9,"npc")

# Get the size of the plotting area (measured on the y axis)
ysize <- par()$usr[4]-par()$usr[3]

# Use that to calculate the new positions
legY2<-legY1 - (0.1* ysize)
legY3<-legY1 - (0.2* ysize)
legY4<-legY1 - (0.3* ysize) 
```

这会将气泡放在所有绘图上的同一位置（以绘图区域的 10% 为步长）。

# apache-flex - 如何在 Flex 的图表中的主要刻度轴之间插入指定数量的次要刻度？

> ID：15946467
> 
> 赞同：0
> 
> 时间：2013-04-11T10:28:24.733
> 
> 标签：apache-flex, charts

我需要根据用户输入在柱形图的垂直轴的两个刻度之间绘制特定数量的次要刻度。

例如：如果用户提供 2 作为“次要刻度数”，则轴的两个刻度之间应该有两个次要刻度。这如何在 Flex 笛卡尔图中完成。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:35:06.063

首先，`LinearAxis`在这种情况下，你应该使用你的轴。

`LinearAxis`属性`interval`和`minorInterval`属性。如果您想在主要刻度之间看到**N**个次要刻度，请执行

```
axis.minorInterval = axis.interval / (N+1) 
```

注意：小刻度总是被画出来的，所以如果你想让它们在大刻度上不可见，你应该为它们选择好的笔触和位置。

这是在主要刻度之间有 3 个次要刻度的示例图表（对不起，做了一个水平轴......但我想这对你来说并不重要）：

```
 >
<fx:Declarations>       

</fx:Declarations>
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.events.ResizeEvent;

        [Bindable]
        public var arr:ArrayCollection = new ArrayCollection([{x:10, y:2},
            {x:1, y:2},
            {x:2, y:2},
            {x:3, y:3},
            {x:4, y:2},
            {x:5, y:2},
            {x:6, y:2}
            ]
        );
    ]]>
</fx:Script>
<mx:LineChart dataProvider="{arr}" width="100%" height="100%">
    <mx:horizontalAxis>
        <mx:LinearAxis 
            id="a"
            interval="4" 
            minorInterval="1"
            maximumLabelPrecision="4"                       
            />
    </mx:horizontalAxis>
    <mx:horizontalAxisRenderers>
        <mx:AxisRenderer id="ax" axis="{a}" minorTickLength="5" tickLength="10"
                         minorTickPlacement="outside"                            
                         tickPlacement="outside"                             
                         >
            <mx:minorTickStroke>
                <s:SolidColorStroke />
            </mx:minorTickStroke>   
        </mx:AxisRenderer>
    </mx:horizontalAxisRenderers>
    <mx:series>
        <mx:LineSeries yField="y" xField="x" >              
        </mx:LineSeries>
    </mx:series>
</mx:LineChart> 
```

# google-drive-api - 在更新文件上更改 Google Drive mimeType

> ID：15946470
> 
> 赞同：0
> 
> 时间：2013-04-11T10:28:28.160
> 
> 标签：google-drive-api

我正在尝试为我的网络应用程序制作“另存为”到谷歌驱动器功能。用户会看到 Google 选择器并选择要保存的文件。此时，应用程序正在成功更新文件的内容，但不会更改被覆盖文件的 mimeType。

api 参考指定了有关 mimeType 元数据的以下内容：“文件的 MIME 类型。这仅在上传新内容时在更新时可变[就是这种情况]。此字段可以留空，mimetype 将由上传内容的 MIME 类型。”

我把它留空。事实上，我正在做一个简单的上传到 PUT [https://www.googleapis.com/upload/drive/v2/files/](https://www.googleapis.com/upload/drive/v2/files/) {fileId}。http 请求的 Content-Type 标头设置为上传文件的 mimeType。在这种情况下（如果有帮助）是“application/vnd.ms-project”。我还尝试将 uploadType=media 参数添加到 url，但没有成功。

我还尝试使用 Api 游乐场进行多部分更新。将元数据内容发送为空 {}，错误消息为“类型不受支持的内容：application/vnd.ms-project”。有趣的是，它是不受支持的，因为我确实设法创建了一个具有相同 mimeType 的新文件，没有问题。

该怎么办？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T15:40:50.757

您不能用常规 blob 替换现有的本机 Docs 文件。使用 blob 更新 docs 文件的唯一方法是打开 Docs 转换，这对于 Microsoft Project 文件是不可能的。

# image-processing - 直方图均衡如何在 RSIHE 和 RSWHE 中递归执行？

> ID：15946471
> 
> 赞同：0
> 
> 时间：2013-04-11T10:28:34.297
> 
> 标签：image-processing

我在数字图像增强领域工作。最近我研究了直方图均衡及其不同的变化，例如 AHE、CLAHE、BBHE、DSIHE、RMSHE 和 RSIHE。在 RSIHE 和 RMSHE 中，输入图像的直方图被递归地分割成两个或多个子直方图，然后在每个子直方图中独立应用 HE 处理。假设递归级别 r=2，直方图被分割成 4 个子直方图，HE 过程是否会应用六次？？？？

![通过 RMSHE 进行直方图分割](https://i.stack.imgur.com/9ocVb.png)

在上述情况下，直方图被分割成四个子直方图。[0 h1] [h1 h2] [h2 h3] [h3 L-1]（L-1是图像的最大灰度级）。

现在我的问题是

HE过程将应用多少次

1.  六次 [0 h2] [h2 L-1] [0 h1] [h1 h2] [h2 h3] [h3 L-1]
2.  四次 [0 h1] [h1 h2] [h2 h3] [h3 L-1]

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:18:32.887

刚刚浏览了两篇论文，直方图均衡在两种情况下都应用了 4 次，而不是 6 次。均衡的“窗口”根本不重叠。所以选项（2）是。

# c# - 如何在列表视图的类中显示嵌套列表

> ID：15946472
> 
> 赞同：3
> 
> 时间：2013-04-11T10:28:47.703
> 
> 标签：c#, asp.net, visual-studio-2010

我做了两节课-仅针对此问题的示例：

```
public class Item
{
    public int itemId { get; set; }
    public string name { get; set; }

    public Item() { }

    public Item(int itemId, string name) 
    {
        this.itemId = itemId;
        this.name = name;
    }
}

public class GroupOfitems
{
    public string groupName { get; set; }
    public List<Item> itemList;

    public GroupOfitems()
    {
        itemList = new List<Item>();
    }

    public GroupOfitems(string groupName, List<Item> itemList)
    {
        this.groupName = groupName;
        this.itemList = itemList;
    }
}

public List<GroupOfitems> TestMethod()
{
    // ADD SOME ITEMS TO FRUIT GROUP
    List<Item> bla = new List<Item>();
    bla.Add(new Item(1, "Banana"));
    bla.Add(new Item(2, "Apple"));

    // ADD SOME ITEMS TO VEGETABLES GROUP
    List<Item> bla2 = new List<Item>();
    bla2.Add(new Item(5, "Carot"));
    bla2.Add(new Item(6, "Tomato"));

    // ADD SOME ITEMS TO SOURCE
    List<GroupOfitems> result = new List<GroupOfitems>();
    result.Add(new GroupOfitems("Fruit", bla));
    result.Add(new GroupOfitems("Vegetables", bla2));

    // RETURN SOURCE
    return result;  
} 
```

在我的 .aspx 文件中，我拥有`ObjectDataSource`并且`ListView`喜欢：

```
<asp:ObjectDataSource ID="odsRecipesIngredientListTest" runat="server"
    SelectMethod="TestMethod" TypeName="MyRepository">            
</asp:ObjectDataSource>

<asp:ListView ID="lvRecipeIngredients" runat="server" 
    DataSourceID="odsRecipesIngredientListTest" 
    ItemPlaceholderID="itemPlaceHolderId">
    <LayoutTemplate>
        <asp:PlaceHolder id="itemPlaceHolderId" runat="server" />
    </LayoutTemplate>
    <ItemTemplate>
        <asp:Label ID="lblGroupName" Text='<%# Eval("groupName") %>' runat="server" /><br />

        <asp:ListView ID="lvIngredientList" runat="server" 
            DataSource='<%# Eval("itemList") %>' 
            ItemPlaceholderID="itemPlaceHolderId">
            <LayoutTemplate>
                <asp:PlaceHolder id="itemPlaceHolderId" runat="server" />
            </LayoutTemplate>
            <ItemTemplate>
                <asp:Label ID="Label4" Text='<%# Eval("itemId") %>' runat="server" />
                <asp:Label ID="Label16" Text='<%# Eval("name") %>' runat="server" />
            </ItemTemplate>
        </asp:ListView>
    </ItemTemplate>
</asp:ListView> 
```

这是这个问题的一个非常简单的例子。Eveything 工作正常，但我不能`itemList`像 a那样绑定`DataSource`到嵌套`ListView`的 ( `DataSource='<%# Eval("itemList") %>'`) （因为`itemList`它不是类中的属性）。这是正确的绑定方法还是我需要改变我的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:14:16.840

该`listItems`成员被定义为*field*，而不是*property*，防止反射找到它使用[`GetProperties`](http://msdn.microsoft.com/en-us/library/vstudio/kyaxdd3x.aspx)（即数据绑定实际执行的操作）。

```
public class GroupOfitems
{
    public string groupName { get; private set; }

    public List<Item> ItemList { get; private set; }

    public GroupOfitems()
    {
        this.ItemList = new List<Item>();
    }

    public GroupOfitems(string groupName, List<Item> itemList)
    {
        this.groupName = groupName;
        this.ItemList = itemList;
    }
} 
```

事实上，您应该始终使用属性来公开您的数据接口。这就是[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)的意思。

# mongodb - 数组的最小值和最大值？

> ID：15946473
> 
> 赞同：2
> 
> 时间：2013-04-11T10:29:00.957
> 
> 标签：mongodb

我尝试计算一个文档与我收藏中的其他文档相比的匹配分数。它适用于 mapReduce，但我想知道这是否可以使用聚合（据说快 10 倍）。

我的文件如下：

```
{
name: "John",
age: 27,
track: {
        section: 12, 
        start: 1,
        end: 4
        }
} 
```

我试图计算的分数很简单`min(start_track_1, start_track_2) - max(stop_track_1, stop_track_2)`

所以为了计算约翰的分数，我试图创建我的管道，但它已经在第二个操作员处失败了：

```
db.test.aggregate(
  { $match: {
    'age' : {$gte: 22, $lte: 34},
    'track.section': 12,
    }
  },
  { $project: { 
        _id : 1,
        name : 1,
        min_end: {$min: ["$track.end", 4]},
        max_start: {$max: ["$track.start", 1]}
     }
  }
) 
```

贝壳回答：`"errmsg" : "exception: invalid operator '$min'"`

问题是，我虽然 $min 和 $max 运算符在数组上工作，就像 $add 和 $subtract...

所以现在我被困住了。我认为 $group 中使用的 $min 和 $max 在这里无法帮助我......

任何想法 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T18:52:31.090

`$min`in 聚合是`$group`.

条件运算符将为您提供最小或默认效果。

您可以使用`$subtract`来在以下管道中进行数学运算`$project`。

就像是：

```
db.foo.aggregate(
  { $group: { 
        _id : "$name",
        data_min: {$min: "$track.end"},
        data_max: {$max: "$track.start"}
     }
  },
  {
    $project:{
        _id: "$_id",
        score: { $subtract : [ 
            {$cond:[{$gt:["$data_max",1]},"$data_max",1]},
            {$cond:[{$lt:["$data_min",4]},"$data_min",4]}
        ]}
    }
  }
) 
```

# xcode - xCode SVN 存储库的工作副本位置

> ID：15946477
> 
> 赞同：0
> 
> 时间：2013-04-11T10:29:13.240
> 
> 标签：xcode, svn

参考版本：xCode 4.5.2

在 Organizer-Repositories 中，我看到每个存储库都有一个“根”文件夹和一个或多个与根相关的文件夹。如何查看与每个文件夹相关的工作副本位置？

通过右键单击文件夹，我只能看到帮助的链接，而没有看到我计算机上目录实际位置的选项。

我问这个的原因是我从本地文件系统的不同位置在我的存储库中添加了文件夹。现在我需要找到所有位置，删除它们并将我的工作副本放在单个目录树中，以避免将 SVN 工作副本文件与非版本控制文件混合。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T08:55:37.627

SVN 的 xCode-Repositories 界面似乎不完整（从其他问题/答案中可以看出）。

因此，我通过从 xCode 界面中删除存储库并重新创建它来解决。

我现在`xcrun svn ...`对除了简单的 checkout/commit 命令之外的所有操作都使用“”命令行界面。

# python - favicon.ico 和会话

> ID：15946482
> 
> 赞同：-4
> 
> 时间：2013-04-11T10:29:26.523
> 
> 标签：python, flask, favicon

我将所有会话存储在数据库中，并创建了一个添加 cookie“id”的函数。我不明白为什么在访问 favicon.iсo 时会创建会话，这在 css 和 js（静态文件）中没有发生 - 只有 favicon.ico。什么？？？？？

example.com/ - 创建会话（在 cookie 中添加 id）

example.com/image.jpg - 没有

example.com/style.css - 没有

example.com/script.js - 没有

example.com/favicon.ico - 创建会话 ?????

[http://flask.pocoo.org/docs/patterns/favicon/](http://flask.pocoo.org/docs/patterns/favicon/)（不解决问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:15:47.577

您的财产有一个自定义错误页面，它会导致生成您的会话。

# unit-testing - 在移动设备上使用 casperjs 测试多个文件

> ID：15946483
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:29:32.583
> 
> 标签：unit-testing, casperjs

我正在尝试使用 CasperJS 设置一个测试套件（多个测试）并在移动设备（即 iPhone）上测试一个界面。不幸的是，正如我在 casperjs 文档中看到的那样，无法实例化 create() 方法，但我需要它来设置视口和 userAgent。

```
var casper = require("casper").create({
    // Set a mobile viewport
    viewportSize: {width: 480},
    pageSettings: {
        // Set a mobile useragent (iphone4)
        userAgent: 'Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7'
    }
}); 
```

关于如何克服这个问题的任何建议？提前谢谢你... Teo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-22T20:52:19.990

当我切换到使用多个文件时，这对我来说对 viewPortSize 有用：

```
casper.options.viewportSize = {width: 1024, height: 768}; 
```

对于 userAgent 尝试

```
casper.options.userAgent or 
casper.options.pageSettings.userAgent 
```

您可能应该创建一个单独的文件，例如 setup.js ，将配置放在那里，然后使用 --includes=setup.js 运行您的测试，以确保您的所有测试都将获得您想要的配置。

# php - AJAX 不工作提交表单

> ID：15946486
> 
> 赞同：0
> 
> 时间：2013-04-11T10:29:48.087
> 
> 标签：php, javascript, ajax, forms, submit

我得到了一些`AJAX`代码，但它没有得到服务器的响应。我尝试了很多东西，但无法弄清楚为什么这不起作用。我正在`localhost`使用`XAMPP`. 我希望在id 状态`echo`中看到。`span`

**index.php 上的 AJAX**

```
$(document).ready(function() {
    $("#registrationform").submit(function() {
        $.ajax({
            type: "POST",
            url: "registration.php",
            data: $("#registrationform").serialize(),
            success: function(data) {
                $("#status").html(data);
            }
        });

        alert("Ajax not running")
        });
}); 
```

* * *

**index.php 上的表格**

```
<form id="registrationform" action="">
Voornaam: <input type="text" name="voornaam" /><br />
Tussenvoegsel: <input type="text" name="tussenvoegsel" /><br />
Achternaam: <input type="text" name="achternaam" /><br />
Geslacht: <?php include_once("parser/geslacht.php"); ?><br />
Land: <?php include_once("parser/land.php"); ?><br />
Geboortedatum: <?php include_once("parser/gebdatum.php"); ?><br />
E-mail: <input type="text" name="e-mail" /><br />
Wachtwoord: <input type="password" name="password" /><br />
Hertype wachtwoord: <input type="password" name="password2" /><br /><br />
De onderstaande vraag is nodig om uw wachtwoord terug te halen mocht u die vergeten zijn.<br />
Geheime vraag: <select name="geheimevraag" id="geheimevraag">
<option value="huisdier">Wat is de naam van jouw eerste huisdier?</option>
<option value="moedername">Wat is de meisjesnaam van je moeder?</option>
<option value="eerstebaas">Hoe heet je eerste baas?</option>
<option value="eigenvraag">Eigen vraag opstellen</option>
</select><br/>
<span id="anders" style="display:none;">Eigen vraag: <input type="text"  name="eigen_vraag" style="width:300px;"/></span><br  />
Antwoord: <input type="password" name="gantwoord" /><br />
</form>
<input type="submit" value="Submit"/>
<span id="status"></span> 
```

* * *

**注册.php**

```
if(!empty($_POST)){
echo "There is a value";
}else{
echo "enter a value";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:35:50.807

您必须阻止提交按钮的默认行为

```
$("#registrationform").submit(function(ev) {
    ev.preventDefault();
    ... 
```

然后你需要实现一个适当的失败处理程序，你当前的总是会提醒，因为 ajax 是异步的

```
$.ajax({
    type: "POST",
    url: "registration.php",
    data: $("#registrationform").serialize(),
    success: function(data) {
        console.log(data); // check your console to see if request is success and what it contains
        $("#status").html(data);
    }
}).fail(function () { 
   alert("oh noes"); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:37:33.777

**写`<input type="submit" value="Submit"/>`前`</form>`关闭标签**

```
 <form id="registrationform" action="">
    Voornaam: <input type="text" name="voornaam" /><br />
    Tussenvoegsel: <input type="text" name="tussenvoegsel" /><br />
    Achternaam: <input type="text" name="achternaam" /><br />
    Geslacht: <?php //include_once("parser/geslacht.php"); ?><br />
    Land: <?php //include_once("parser/land.php"); ?><br />
    Geboortedatum: <?php //include_once("parser/gebdatum.php"); ?><br />
    E-mail: <input type="text" name="e-mail" /><br />
    Wachtwoord: <input type="password" name="password" /><br />
    Hertype wachtwoord: <input type="password" name="password2" /><br /><br />
    De onderstaande vraag is nodig om uw wachtwoord terug te halen mocht u die vergeten zijn.<br />
    Geheime vraag: <select name="geheimevraag" id="geheimevraag">
    <option value="huisdier">Wat is de naam van jouw eerste huisdier?</option>
    <option value="moedername">Wat is de meisjesnaam van je moeder?</option>
    <option value="eerstebaas">Hoe heet je eerste baas?</option>
    <option value="eigenvraag">Eigen vraag opstellen</option>
    </select><br/>
    <span id="anders" style="display:none;">Eigen vraag: <input type="text"  name="eigen_vraag" style="width:300px;"/></span><br  />
    Antwoord: <input type="password" name="gantwoord" /><br />

   <input type="submit" value="Submit"/>
    </form>
    <span id="status"></span> 
```

您的 jquery 脚本脚本：

```
<script>
$(document).ready(function() {
$("#registrationform").submit(function(ev){
ev.preventDefault();    
$.ajax ({
    type: "POST",
    url: "registration.php",
    data: $("#registrationform").serialize(),
    success: function(data) {
    $("#status").html(data);
   }
});

 alert("Ajax not running")
});
});

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:34:36.370

请尝试此代码

```
$(document).ready(function() {
    $("#registrationform").submit(function(e){
    e.preventDefault();
        $.ajax({
            type: "POST",
            url: "registration.php",
            data: $("#registrationform").serialize(),
            success: function(data) {
                $("#status").html(data);
            }
        });

        alert("Ajax not running")
        });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T10:34:13.567

您需要阻止表单的默认行为，以便页面不会更改位置，以便 JS 可以执行 AJAX 请求。

```
$("#registrationform").submit(function(e) {
    e.preventDefault(); //this one
    $.ajax({
        type: "POST",
        url: "registration.php",
        data: $("#registrationform").serialize(),
        success: function(data) {
            $("#status").html(data);
        }
    });
}); 
```

# joomla - 在清单文件中指定多个版本

> ID：15946490
> 
> 赞同：0
> 
> 时间：2013-04-11T10:30:02.523
> 
> 标签：joomla, joomla2.5, joomla3.0

我开发了一个与 joomla 2.5 和 3.0 版本兼容的扩展（组件 + 插件）。

现在，我的问题是如何在清单文件的扩展标记中声明版本属性，因为相同的扩展将用于 joomla 2.5 和 3.0 安装。还是没关系？

```
<extension version="2.5" ... ></extension>
<extension version="3.0" ... ></extension> 
```

虽然在安装过程中，它不会产生任何问题，因为我也尝试将它设置为 joomla 3.0 的 2.5

提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:00:56.070

好的，所以这么长时间都没有收到一个回复​​，我检查了 joomla 站点的其他商业成功扩展中提到的版本，这些扩展支持两个 joomla 版本，发现他们提到的是 2.5。

因此，我也一样...

# function - 如果wordpress中已经存在，如何检查函数名？

> ID：15946491
> 
> 赞同：0
> 
> 时间：2013-04-11T10:30:05.133
> 
> 标签：function, wordpress

我在一个单独的字段中创建了两个小的 wordpress 插件。该菜单标题显示在管理页面的设置下因为我创建了这个

```
add_submenu_page('options-general.php','Fantastic Copyright by FantasticPlugins.com', 'Fantastic Copyright', 'manage_options', 'copyright_admin', 'copyright_admin_page'); 
```

这是管理员端的屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/kGvWz.png)

现在我想在一个通用菜单中显示我的个人插件。即使我尝试为我在谷歌搜索和添加的插件创建菜单和子菜单。

```
 add_menu_page('My Test Plugin Settings', 'Test Plugin',IC_MYPLUGIN_PERMISSIONS,"my-plugin-slug", "ic_myplugin_settings",plugins_url('fp.ico', __FILE__));
     // create a new submenu
    add_submenu_page(
        "my-plugin-slug",
        __("This is page title for the page"),
        __("Settings"),
        IC_MYPLUGIN_PERMISSIONS,
        "my-plugin-slug",
        "ic_myplugin_settings"
    );
    add_submenu_page(
        "my-plugin-slug",
        __("This is page title for items page"),
        __("Items"),
        IC_MYPLUGIN_PERMISSIONS,
        "my-plugin-slug-items",
        "ic_myplugin_items"
    );
    add_submenu_page(
        "my-plugin-slug",
        __("This is page title for add item page"),
        __("Add Item"),
        IC_MYPLUGIN_PERMISSIONS,
        "my-plugin-slug-add-item",

        "ic_myplugin_add_item"
    );
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/QQLPB.png)

来自 Picture Test Plugin 是常用菜单 在我们创建的手动子菜单中。现在我需要知道如何将单个插件添加到测试插件的子菜单页面中。我需要使菜单独立。例如，如果我为 wordpress 创建插件。在那我们创建图像库作为单独的插件和视频库作为单独的插件。

```
Wordpress --> Is the Main Menu 
         Image Gallery --> Is the sub Menu and Seperate Plugin
         Video Gallery --> Is the sub menu and seperate Plugin 
```

像那样我需要展示。无论我为 wordpress 创建的插件都在 wordpress 的公共主菜单下。任何人告诉我我该怎么做这些东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:01:07.807

你需要做的是你需要添加你的插件 add_submenu_page 函数第一个参数作为你的父 slug 在你的情况下它是..

```
add_submenu_page('my-plugin-slug','Fantastic Copyright by FantasticPlugins.com', 'Fantastic Copyright', 'manage_options', 'copyright_admin', 'copyright_admin_page'); 
```

使用所有插件执行此操作

希望这就是你要找的:)

更新部分：-

你有主菜单

```
 add_menu_page('My Test Plugin Settings', 'Test Plugin',IC_MYPLUGIN_PERMISSIONS,"my-plugin-slug", "ic_myplugin_settings",plugins_url('fp.ico', __FILE__));
    if(function_exists(ic_myplugin_settings)){
$menu-slug='my-plugin-slug'
     add_submenu_page($menu-slug,'Fantastic Copyright by FantasticPlugins.com', 'Fantastic Copyright', 'manage_options', 'copyright_admin', 'copyright_admin_page');
    }
    else {
$menu-slug=$menu_slug
    add_menu_page( $page_title, $menu_title, $capability, $menu_slug, $function, $icon_url, $position );
    } 
```

继续..希望你对这些有一些想法，你可以继续。我现在赶时间；）

# ruby-on-rails - 在 Rails 集成测试期间未调用 jQuery document.ready

> ID：15946495
> 
> 赞同：2
> 
> 时间：2013-04-11T10:30:23.693
> 
> 标签：ruby-on-rails, capybara-webkit

对于严重依赖 javacript 的页面，我有一个集成测试失败。相同的页面在浏览器中运行得很好。将测试简化到最低限度，我发现仅测试页面加载后由 javascript 添加的选择器的存在会失败。

在预编译测试资产并使用 save_and_open_page 后，我发现 jQuery 就绪事件的处理程序在集成测试期间**没有运行。**

我没有找到任何关于这个问题的参考资料，所以我想我做错了什么。谁能帮我解决这个问题？

我正在使用 rails 3.2.11、RSpec 2.13.0、Capybara 2.0.3 和 capybara-webkit 0.14.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:36:38.007

默认情况下，Rails 使用不处理 JS 的 webdriver。如果您想要 JS 支持，您需要使用一种 JS 感知驱动程序，例如 Selenium（运行全功能浏览器）、capybara-webkit 或 poltergeist（它们是无头 webkit 浏览器）。还有很多其他的，但这三个最受欢迎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-16T20:18:22.293

我通过检查我的 AJAX 请求为我解决了这个问题。问题是我请求的是“http://...”而不是页面的“/”。这意味着它引发了一个 CORS（“来自域外的 ajax 请求”），即使请求看起来像它来自域内部。

我最初的症状是“使用带有 Poltergeist 或 Selenium 的 Capybara 进行测试时，页面上没有插入 javascript 的 HTML 元素（但在运行应用程序时出现在页面上）。”

# java - 将参数传递给实现的方法java

> ID：15946496
> 
> 赞同：0
> 
> 时间：2013-04-11T10:30:32.227
> 
> 标签：java, implementation, argument-passing

我有一个实现 Printable 的类。我试图以某种方式从文本字段中获取值到 print 方法中，但似乎无法解决如何做到这一点。

```
public class TreePrint extends javax.swing.JFrame implements Printable{ 
```

然后这是用户选择要打印的项目时的操作：

```
private void btnPrintActionPerformed(java.awt.event.ActionEvent evt)                                         
{
    goPrint();  
}

public void goPrint() 
{
    PrinterJob job = PrinterJob.getPrinterJob();
    job.setPrintable(new TreePrint());
   // boolean doPrint = job.printDialog();
    job.print();
}

@Override  
public int print(Graphics g, PageFormat pf, int page) throws PrinterException {  
    Koks koksSelected = (Koks) combobox_skirne.getSelectedItem();  
    System.out.println(combobox_skirne.getSelectedItem());  
    if (page > 0) {  
        return NO_SUCH_PAGE;  
    }  
    System.out.println(koksSelected.getSkirne());    
    return PAGE_EXISTS;  
} 
```

问题是我无法在打印方法中获取所选项目或文本值。我可以在 go print 或 btnPrintActionPerformed 中获取它们，但在 print() 中，它始终显示程序首次运行时存在的选定值。如果需要，我可以发布更多代码，但它很长。我确定这是实施方法的基本问题，但我找不到答案。

这是一个类似（相同？）的问题： [Passing Parameters to the print method (JAVA)](https://stackoverflow.com/questions/8324388/passing-parameters-to-the-print-method-java)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:39:46.490

如果创建`TreePrint`对象时参数可用，请使用此字段添加新的构造函数。如果没有，请在打印之前使用`TreePrint`. 例子：

```
private TreePrint tp;

public void goPrint() 
{
    ...
    this.tp = new TreePrint();
    job.setPrintable(this.tp);
    ...
}

@Override  
public int print(Graphics g, PageFormat pf, int page) throws PrinterException {  
    ...
    this.tp.setXYZParameters(para1, para2, paraN);
    ...
} 
```

`TreePrint`例子：

```
private Integer para1;
private Integer para2;
private Integer paraN;

public void setXYZParameters(...) {...} 
```

# xcode - Xcode 完整堆栈跟踪

> ID：15946499
> 
> 赞同：87
> 
> 时间：2013-04-11T10:30:39.493
> 
> 标签：xcode, stack-trace

无论如何调试都可以看到完整的堆栈跟踪，主线程中调用的方法列表。或以任何方式在命令窗口上打印它们。

* * *

## 回答 #1

> 赞同：151
> 
> 时间：2014-11-06T02:47:29.233

使用`bt`(lldb) 中的命令。

一旦暂停或崩溃后，只需`bt`在调试控制台中输入。
它将打印完整的堆栈跟踪。

![bt 命令的示例输出](https://i.stack.imgur.com/BQi3I.png)

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2013-04-11T10:33:45.210

您可以通过以下方式在 NSLog 中打印堆栈跟踪

```
NSLog(@"Stack trace : %@",[NSThread callStackSymbols]); 
```

发生崩溃时，您可以在单词旁边`(lldb)`键入：

```
po [NSThread callStackSymbols] 
```

**编辑：**

为了在 Swift 上的控制台上获得更好的输出，您可以改用以下行：

```
Thread.callStackSymbols.forEach{print($0)} 
```

* * *

## 回答 #3

> 赞同：72
> 
> 时间：2014-10-13T13:33:29.817

在 Xcode 6 中，您可以单击窗格左下角的按钮，该按钮显示完整的堆栈跟踪。 ![Xcode 6 显示完整的堆栈跟踪](https://i.stack.imgur.com/1I6co.jpg)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-10-19T09:29:24.510

在 Xcode 5 中，您可以移动显示堆栈跟踪的窗格底部的滑块。它控制显示多少敲击轨迹。

![控制堆栈跟踪的滑块](https://i.stack.imgur.com/JgYwT.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-11T10:42:55.553

您可以`breakpoint`在抛出异常之前添加。首先转到`Breakpoint Navigator`（cmd + 6）。在左下角鼠标单击加号按钮。或者您可以使用`Instruments`(/Developer/Applications/Instruments) 来帮助检测`zombie` `objects`. [参考](http://www.cimgf.com/2008/04/02/cocoa-tutorial-fixing-memory-leaks-with-instruments/)

并且当您添加断点审查时，图片将由`Xcode`.

![在此处输入图像描述](https://i.stack.imgur.com/R8EVg.png)

您可以使用底部使用的滑块`step over`和`over`逐行日志来扩展堆栈跟踪。

谢谢希望这会帮助你

# utf-8 - VCF文件流到c#

> ID：15946503
> 
> 赞同：0
> 
> 时间：2013-04-11T10:30:51.590
> 
> 标签：utf-8, character-encoding, vcf-vcard

我有一个 VCF 文件，其中包含我的整个电话簿。我用记事本打开它，并通过 StreamReader 将数据传输到 c# 中的 windows 窗体。一些 vcard 条目包含如下一行：

"N;CHARSET=UTF-8;ENCODING=QUOTED-PRINTABLE:=42=75=72=73=61=6C=C4=B1;=4D=75=73=74=61=66=61;;;"

看起来该行是 UTF-8 代码字符集，但我不知道如何将其转换为字符串。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:40:00.553

```
using System.Net.Mail;

class Test
{

    public static string QPDecode(String str, String encoding)
    {
        Attachment attachment = Attachment.CreateAttachmentFromString("", "=?" + encoding + "?Q?" + str + "?=");
        return attachment.Name;
    }

    public static void Main(string[] args)
    {

        Console.WriteLine(QPDecode("=42=75=72=73=61=6C=C4=B1;=4D=75=73=74=61=66=61", "UTF-8"));
        //Bursalı;Mustafa

    }

} 
```

如何从您的文件中提取零件`"UTF-8"`并`"=42=75=72=73=61=6C=C4=B1;=4D=75=73=74=61=66=61"`留给您练习：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T12:53:47.483

属性值采用quoted-printable 编码，这是一种标准编码机制。您也许可以找到一个可以为您解码的库。另外，试试[这个 SO thread](https://stackoverflow.com/questions/8795801/decoding-quoted-printable-message)。

# java - 在java中为新日期创建新文件

> ID：15946513
> 
> 赞同：-2
> 
> 时间：2013-04-11T10:31:19.407
> 
> 标签：java

我有一个大型 csv 文件，我从中读取数据。因此，一旦该文件中的日期发生更改，我想创建新文件并将数据存储在新文件中。假设初始日期为 2012-05-29，那么我将该日期存储在 1.csv 文件中，如果日期更改为2012-05-30 在原始 csv 文件中我将数据存储在 2.csv 中

问题是我能够创建名为 2.csv 的新文件，但该文件中没有数据请帮助我

我的代码：

```
public class DateConverter {
    public static void main(String args[]) {
        String date = "2012-05-29";
        String olddate = "2012-05-29";
        int count = 1;
        String output = "D:\\usdinr_t\\" + count + ".csv";
        CsvWriter writer = new CsvWriter(output);
        try {
            CsvReader reader = new CsvReader("D:\\usdinr_t\\try.csv");
            reader.readHeaders();
            while (reader.readRecord()) {
                date = reader.get("date");
                if (!(olddate.equals(date))) {
                    writer.close();
                    writer.flush();
                    count = 2;
                    output = "D:\\usdinr_t\\" + count + ".csv";
                    writer = new CsvWriter(output);

                    olddate = date;
                }
                System.out.println(reader.get("date"));
                writer.write(reader.get("date"));
                writer.write(reader.get("ltp"));
                writer.endRecord();
            }

        } catch (Exception e) {
            System.out.println("FIle not found");
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:35:26.167

我相信可能发生的事情是最终文件永远不会关闭和刷新。您仅在创建新文件时关闭并刷新文件。

# php - 在 Doctrine 中的多个值中搜索

> ID：15946520
> 
> 赞同：1
> 
> 时间：2013-04-11T10:31:52.123
> 
> 标签：php, symfony, doctrine-orm

我有一个产品实体，它可以有多个属性，如应用程序。其中“应用程序”也可能具有多个值。

所以该产品有一个“应用程序”的值数组，我怎样才能用 Doctrine 保存它，以便以后可以执行 findBy('applications' => 'whatever') 或类似操作？

```
Product 1
   application1
   application3

Product 2
   application1
   application2 
```

所以后来的 findBy('applications' => 'application1') 应该找到这两个产品。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T11:50:14.587

假设您在实体之间配置了一对多关系，如下所示：

产品实体：

```
/**
* @ORM\OneToMany(targetEntity="Aplication", mappedBy="product", cascade={"persist"})
*/
protected $aplications; 
```

申请实体：

```
* @ORM\ManyToOne(targetEntity="Product", inversedBy="aplications")
* @ORM\JoinColumns({
*   @ORM\JoinColumn(name="product_id", referencedColumnName="id")
* })
    protected $product; 
```

您可以在产品存储库中创建这样的 DQL：

```
$qb = $this->getEntityManager()->createQueryBuilder();
$qb->select('p')
   ->from('bundleNamespace:Product', 'p')
   ->leftJoin('p.applications', 'a')
   ->andWhere($qb->expr()->in('a.id', ':aplication'))
                    ->setParameter('aplication', $aplication);

return $qb->getQuery()->getResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:42:53.803

尝试这个：

```
public function findProductByApplication($app) {
    $query = $this->em->createQuery('SELECT DISTINCT p FROM Product p JOIN p.applications app WHERE app = :app');
    $query->setParameter('app', $app);
    return $query->getResult();
} 
```

# javascript - 使用 javascript 获取 SVG 路径 ID

> ID：15946521
> 
> 赞同：1
> 
> 时间：2013-04-11T10:31:52.573
> 
> 标签：javascript, svg, jquery-svg

我有一个 svg 文件，我需要使用 javascript 或 jquery 获取特定的路径 ID。我怎样才能做到这一点？

```
$(document).ready(function(){
$("svg").click(function(){

$(this).find("#lay7").css("fill",color);

});
}); 
```

我需要动态获取 id，而不是直接给出路径的 id（“lay7”）。

参考：http : [//jsfiddle.net/BKAHg/](http://jsfiddle.net/BKAHg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:30:06.653

这只是 $(this) 对象本身。哦，你也想将点击处理程序附加到我想象的路径上。

```
$(document).ready(function(){
$("path").click(function(){

$(this).css("fill",color);

});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:49:28.277

试试这个

```
 $("svg").delegate("*", "click", function(e) { $(this).css('fill', color) }) 
```

# android - 如何在 Activity 之前调用 Fragment 的 onOptionItemSelected？

> ID：15946522
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:31:54.263
> 
> 标签：android, actionbarsherlock

我在我的应用程序中使用**SlidingMenu**实现，我希望**android.R.id.home**按钮打开/关闭侧面菜单。在 Activity 内部，我使用 Fragment 来显示信息。我希望主页按钮充当后退按钮。

问题是**Activity 中的 onOptionsItemSelected**在**Fragment**之前被调用。这是普通行为吗？还是我做错了什么？

我也在我的项目中使用 ActionBarSherlock，但我认为这并不重要。

实现我自己的界面是这里唯一的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:22:48.473

就在昨晚，我一直在努力解决这个问题，但最终设法解决了它，所以这是我的解决方案：这些是 MainActivity 的相关部分：

```
import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;

public class MainActivity extends SherlockFragmentActivity {
.
.
.
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getSupportMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item){
        return super.onOptionsItemSelected(item);
    }

} 
```

这是我的菜单 main.xml：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/action_settings"
        android:orderInCategory="100"
        android:showAsAction="never"
        android:title="@string/action_settings"/>

</menu> 
```

这是我的片段：

```
import com.actionbarsherlock.app.SherlockFragment;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;
import com.actionbarsherlock.view.MenuItem;

public class TestFrag extends SherlockFragment {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        .
        .
        setHasOptionsMenu(true);
    }

    @Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        menu.add(Menu.NONE, android.R.id.home, 100, "Home");
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item){
        switch(item.getItemId())
        {
        case android.R.id.home:
//            Do whatever you want when Home is clicked.
            Toast.makeText(getSherlockActivity(), "Home is clicked", Toast.LENGTH_SHORT).show();
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }
    }
} 
```

这就是我得到的： ![来自父活动和片段的菜单项。](https://i.stack.imgur.com/awKzk.jpg)

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:37:30.057

最终将 onOptionsItemSelected 从 Activity 移动到我的基本 Fragment 类。

在基片段类中，我有这些：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch(item.getItemId()){
        case android.R.id.home:
            // Toggle slide menu
            getBaseActivity().getSlidingMenu().toggle(true);
            break;
    }
    return super.onOptionsItemSelected(item);
}

protected boolean useHomeAsBack(MenuItem item){
    switch(item.getItemId()){
        case android.R.id.home:
            Log.v(TAG, "useHomeAsBack - onOptionsItemSelected");
            getSherlockActivity().onBackPressed();
            return true;
    }
    return false;
} 
```

也叫`setHasOptionsMenu(true);`里面`onAttach`。

在我想使用的实际 Fragment 中，我有：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    if(useHomeAsBack(item)) return true;
    return super.onOptionsItemSelected(item);
} 
```

不过，我希望 Fragment 的 onOptionsItemSelected 能够覆盖或优先于 Activity 的。想知道那会是什么原因。

# android - FLAG_ACTIVITY_REORDER_TO_FRONT 与 onSaveInstance()

> ID：15946530
> 
> 赞同：2
> 
> 时间：2013-04-11T10:32:29.077
> 
> 标签：android, stack, android-activity, bundle, flags

我需要保存`state`一个`Activity`. 它是一个`treeview`，我`draw`它，因为它需要一段时间，我不想`Activity`每次去访问它时都开始一个新的，`page`而是使用已经绘制的页面。

我解决了我的问题，`Activity`每次调用`FLAG_ACTIVITY_REORDER_TO_FRONT`. 我尝试了几个小时来`onSaveInstance()`填充`bundle`每次`onCreate()`调用时要重用的 a，但不幸的是我没有弄清楚为什么`method`没有调用。

所以我的问题是，我为什么要疯狂地保存`state`我`Activity`的 a `bundle`，知道这`onSaveInstance`不是应用程序的一部分`lifecycle`，而我可以简单地“寻找”我的旧`activity`的`stack`并轻松地将它带来`front`？

# ffmpeg - 使用 ffmpeg 将桌面流式传输到 Wowza 服务器

> ID：15946538
> 
> 赞同：3
> 
> 时间：2013-04-11T10:32:56.677
> 
> 标签：ffmpeg, video-streaming, flowplayer, wowza

最近，我正在尝试利用**ffmpeg**将实时桌面屏幕流式传输到**Wowza** 媒体服务器。

到目前为止，我在这个主题上取得了部分成功：

我已经设法使用 UScreenCapture directx dshow 过滤器记录桌面屏幕，并且我还能够将此记录发送到服务器。但是，当我尝试将屏幕直接发送到服务器时，每次都会失败。播放器的缓冲速度很慢，完成后会显示一个空白屏幕（计数器不断计数）。

所以，这里是工作方法

对于录制屏幕：

```
ffmpeg -f dshow -i video="UScreenCapture" -r 25 -vcodec libx264 output.flv 
```

对于流媒体视频：

```
ffmpeg -re -i <input_file_here> -map 0 -c copy -vbsf h264_mp4toannexb -f mpegts udp://stream.server.xyz:52000?pkt_size=1024 
```

这是我正在使用的代码：

> ffmpeg -f dshow -i video="UScreenCapture" -s **width** x **height** -r **framerate** -vcodec libx264 -pix_fmt yuv420p -b:v **bitrate** -an -vbsf h264_mp4toannexb -f mpegts udp:// **your.destination.url:PORTNUMBER** ? pkt_size= **some_bytes**

据我所知，在我升级 wowza 之前它运行良好。

一些附加信息：

*   **操作系统：** win7 sp1 64位
*   **ffmpeg** N-49610-gc2dd5a1（Zeranoe FFmpeg build 2013 Feb 5）
*   **UScreenCapture：** x64 版 2.0.14 版
*   **在 Debian linux 2.6.32-5-amd64 上运行的**Wowza 3.5.2****
***   **Flowplayer：** 3.2.15**

 **通过查看 Wowza 日志文件，有些东西引起了我的注意。似乎当我正在流式传输桌面屏幕时，服务器 somhow 会收到不完整的数据包，但是当我正在流式传输视频文件时，不会发生错误。

```
RTPDePacketizerMPEGTS.handleRTPPacket
WARN server comment 2013-04-11 11:26:24 - - - - - 152629.665 - - - - - - - -RTPDePacketizerMPEGTS.handleRTPPacket: Incomplete packet: 1504:1472
WARN server comment 2013-04-11 11:26:27 - - - - - 152632.782 - - - - - - - -RTPDePacketizerMPEGTS.handleRTPPacket: Incomplete packet: 1504:1472
WARN server comment 2013-04-11 11:26:31 - - - - - 152636.383 - - - - - - - -RTPDePacketizerMPEGTS.handleRTPPacket: Incomplete packet: 1504:1472
WARN server comment 2013-04-11 11:26:38 - - - - - 152643.484 - - - - - - - -RTPDePacketizerMPEGTS.handleRTPPacket: Incomplete packet: 1504:1472
WARN server comment 2013-04-11 11:26:47 - - - - - 152653.088 - - - - - - - -RTPDePacketizerMPEGTS.handleRTPPacket: Incomplete packet: 1504:1472
WARN server comment 2013-04-11 11:26:52 - - - - - 152657.587 - - - - - - - -RTPDePacketizerMPEGTS.handleRTPPacket: Incomplete packet: 1504:1472
WARN server comment 2013-04-11 11:26:56 - - - - - 152661.624 - - - - - - - -RTPDePacketizerMPEGTS.handleRTPPacket: Incomplete packet: 1504:1472
WARN server comment 2013-04-11 11:27:05 - - - - - 152670.805 - - - - - - - -RTPDePacketizerMPEGTS.handleRTPPacket: Incomplete packet: 1504:1472 
```

是什么导致了这个错误？有任何想法吗？

提前致谢！**

# php - PHP 关联数组引用

> ID：15946546
> 
> 赞同：0
> 
> 时间：2013-04-11T10:33:32.720
> 
> 标签：php, arrays, associative, quotations

我将数据库查询的结果逐行写入数组，然后将自己的行添加到数组的最后一个索引。我正在使用 Google 开发人员工具查看数组的结果，如下所示：

```
10: {strat_id:1, x_id:1, outcome_id:52, date:1364655600, status:0, rank:1,…}
>
strat_id: "1"
status: "0"
date: "1364655600"
x_id: "1"
outcome_id: "52"
rank: "1"

11: {strat_id:4, x_id:1, outcome_id:49, date:1365674916, status:1, rank:1,…}
>
strat_id: 4
status: "1"
date: 1365674916
x_id: 1
outcome_id: 49
rank: 1 
```

">" 字符表示我扩展索引的位置。索引 10 是数据库中的最后一行，正如您在展开时所看到的，值被引号包围。索引 11 是我手动添加的数据，展开后可以看到值没有被引号包围（“状态”除外）。

为了保持一致性，我应该打扰这个细节吗？为了添加到我正在使用的数组中：

```
$newarray=array("strat_id"=>$_POST['gridID']+1, "x_id"=>$_SESSION['xID'], "outcome_id"=>$_POST['cellID']+1, "date"=>time(), "status"=>$_POST['type'], "rank"=>1); 
```

我得到的数据库的结果：

```
$result->fetch_array(MYSQLI_ASSOC) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:07:18.333

> 为了保持一致性，我应该打扰这个细节吗？

这取决于你将如何使用它们。如果您只需要显示，那很好；但是如果你需要做一些比较/计算（考虑到你`date`有价值），最好将它们转换为数字。

你可以试试

```
$record[]=array_map("intval",$result->fetch_array(MYSQLI_ASSOC)); 
```

使**每一**列都为整数，以及稍后

```
$record[]=array("strat_id"=>intval($_POST['gridID'])+1,
    "x_id"=>$_SESSION['xID'],
    "outcome_id"=>intval($_POST['cellID'])+1,
    "date"=>time(),
    "status"=>intval($_POST['type']),
    "rank"=>1); 
```

所以要有一个多维数组，每个元素都是整数。

# multithreading - 使用套接字和线程 为什么我的聊天服务器这么慢，CPU 使用率这么高？

> ID：15946547
> 
> 赞同：0
> 
> 时间：2013-04-11T10:33:34.250
> 
> 标签：multithreading, sockets, chat, latency, ruby-1.9.3

所以我的代码工作正常，除了在遍历数组并向多个聊天客户端发送响应时，每个客户端接收响应之间的延迟接近一秒。我在我的计算机上运行服务器和客户端，所以不应该有任何真正的延迟，对吧？我知道红宝石并没有这么慢。另外，为什么我的电脑的风扇在运行时会旋转？如果包含它会有所帮助，还有更多内容。

```
# Creates a thread per client that listens for any messages and relays them to the server viewer and all the other clients.
create_client_listener_threads = Thread.new do
    x = nil
    client_quantity = 0
    # Loops indefinitely
    until x != nil
        #Checks to see if clients have joined since last check.
        if @client_join_order_array.size > client_quantity
            # Derives number of new arrivals.
            number_of_new_arrivals = @client_join_order_array.size - client_quantity
            # Updates number of clients in client_quantity.
            client_quantity = @client_join_order_array.size
            if number_of_new_arrivals != 0
                # Passes new arrivals into client for their thread creation.
                @client_join_order_array[-1 * number_of_new_arrivals..-1].each do |client|
                    # Creates thread to handle receiving of each client's text.
                    client_thread = Thread.new do
                        loop do
                            text = client.acception.gets
                            # Displays text for server viewer.
                            puts "#{client.handle} @ #{Time.now} said: #{text}"
                            @client_hash.each_value do |value|
                                if value.handle != client.handle
                                    # Displays text for everyone except server viewr and person who spoke.
                                    value.acception.puts "#{client.handle} @ #{Time.now} said: #{text}"
                                end
                            end
                        end
                    end
                end
            end
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:53:06.887

除了测试`if @client_join_order_array.size > client_quantity`，如果它是假的，除了抽 CPU 之外什么都不做，你应该在这一点上*接受新的连接*，并阻塞直到有一个。换句话说，移动接受连接的代码并将它们添加到此处的数组中。

# javascript - 在 JavaScript 中从没有它的 URL 获取文件名

> ID：15946552
> 
> 赞同：1
> 
> 时间：2013-04-11T10:33:47.000
> 
> 标签：javascript, string, cordova, download

如何从给定`URL`的[PhoneGap](http://en.wikipedia.org/wiki/PhoneGap)中获取文件名？

在 JavaScript 中，我使用了这样的东西：

```
var uri = encodeURI("http://www.openerpspain.com/descargas-documentacion?download=2"); 
```

我的应用程序下载文件，但我必须手动设置文件名。为了说明，当我打电话时

```
onclick="descarga('http://www.openerpspain.com/descargas-documentacion?download=2')" 
```

这个函数运行：

```
function descarga(URL){
    var rutaarchivo = "file:///sdcard/data/com.protocolo/test1.pdf";
    alert(rutaarchivo);
    var filetransfer = new FileTransfer();
    filetransfer.download(URL, rutaarchivo,
        function(entry){
          alert("Download complete : " + entry.fullPath);
        },function(error) {
          alert("download error source " + error.source);
        });
} 
```

这会将下载保存到`../com.protocolo`，其文件名为`test.pdf`. 我希望能够将其保存为它在服务器上设置的名称 (*manual_openerp.230209.pdf*)，位于*真实*URL *...//www.openerpspain.com/descargas/manual_openerp.230209。 pdf*。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:37:52.597

```
String fileName = url.substring(url.lastIndexOf('/') + 1); 
```

`url`你的文件的完整路径在哪里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:55:03.240

利用：

```
url="file:///sdcard/data/com.protocolo/test1.pdf?getVar=value";
url.replace(/\?.*$/,"").replace(/.*\//,""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T14:17:45.067

这基本上是在问[如何使用 JavaScript 从完整路径中获取文件名？](https://stackoverflow.com/questions/423376/how-to-get-the-file-name-from-a-full-path-using-javascript). 在这里，解决方案是：

```
var filename = url.replace(/^.*[\\\/]/, ''); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-16T09:06:29.440

我添加了我的 URL 参数。然后在[PhoneGap](http://en.wikipedia.org/wiki/PhoneGap)中我使用了：

```
function getParameterByName( name,href ){
    name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
    var regexS = "[\\?&]"+name+"=([^&#]*)";
    var regex = new RegExp( regexS );
    var results = regex.exec( href );
    if( results == null )
      return "";
    else
      return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

**调用自：**

```
var filename = getParameterByName ("nombrefichero", url); 
```

所以这样我可以从以下位置获取example.pdf：

```
http://www.download.com/fake/example.pdf?nombrefichero=example.pdf 
```

然后我可以下载它，并将它保存在我想要的地方。

# c# - 没有重载方法需要 2 个参数

> ID：15946560
> 
> 赞同：0
> 
> 时间：2013-04-11T10:34:07.493
> 
> 标签：c#, wcf, distributed-computing

嗨，我有一个 WCF 服务，在其中我有这个方法

```
void SendData(int pumpNo, List<String> pumpInfo); 
```

但是，当我尝试将一个 int 和一个列表传递给它时，我收到一条错误消息

> 错误 1 ​​方法“SendData”没有重载需要 2 个参数

这就是我在 WCF 客户端中将数据传递给它的方式

```
sendpumpdata.SendData(pumpID, pumpData); 
```

好的，所以在顶部我创建了一个 WCF 服务的实例...

```
ServiceReference1.iCommClient sendpumpdata = new Pumps.ServiceReference1.iCommClient(); 
```

同样在我的 service.cs 中，我创建了 IService.cs 中定义的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:42:10.237

WCF Web 服务利用客户端生成的代码（即代理）与服务器进行通信。在您的情况下，即使服务器代码有两个参数，您的客户端生成的代码也必须是过时的。

如果您使用的是 Web 参考或服务参考，只需右键单击并更新参考。如果您使用的是静态 WSDL，则导航到 WCF 服务本地托管的 WSDL 并将其保存到磁盘，然后覆盖项目中的那个。

# c# - 在asp dot net中将数据网格视图导出到excel中

> ID：15946568
> 
> 赞同：1
> 
> 时间：2013-04-11T10:34:24.163
> 
> 标签：c#, asp.net

将数据网格视图导出到 excel 代码运行并将所有数据导出到 excel 表中，但我只想在 excel 表中选择列如何解决这个问题

```
 protected void btnexcel_Click1(object sender, EventArgs e)
   {

    Response.Clear();
    Response.Buffer = true;

    Response.AddHeader("content-disposition",
    "attachment;filename=ActualsAndBudgets.xls");
    Response.Charset = "";
    Response.ContentType = "application/ms-excel";
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    StringWriter sw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(sw);
    gvdetails.AllowPaging = false;
    fillgrid();
    gvdetails.RenderControl(htw);
    Response.Write(sw.ToString());
    Response.End();
    gvdetails.AllowPaging = true;
    fillgrid();

  }
   public override void VerifyRenderingInServerForm(Control control)
  {

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:43:18.777

```
 using System;
    using System.Data;
     using System.IO;
     using System.Web;
      using System.Web.UI;
      using System.Web.UI.WebControls;

       namespace Whatever
       {
        /// 

        /// This class provides a method to write a dataset to the HttpResponse as
          /// an excel file. 
         /// 

            public class ExcelExport
       {
          public static void ExportDataSetToExcel(DataSet ds, string filename)
       {
        HttpResponse response = HttpContext.Current.Response;

   // first let's clean up the response.object
      response.Clear();
       response.Charset = "";

        // set the response mime type for excel
          response.ContentType = "application/vnd.ms-excel";
         response.AddHeader("Content-Disposition", "attachment;
           filename=\"" + filename       + "\"");

         // create a string writer
       using (StringWriter sw = new StringWriter())
      {
       using (HtmlTextWriter htw = new HtmlTextWriter(sw))
        {
       // instantiate a datagrid
        DataGrid dg = new DataGrid();
      dg.DataSource = ds.Tables[0];
        dg.DataBind();
       dg.RenderControl(htw);
        response.Write(sw.ToString());
      response.End(); 
    }
  }
  }
   }
     } 
```

# jquery - 通过选定的星图对视觉和后端进行评级时出现问题 选择输入类型收音机的隐藏值

> ID：15946569
> 
> 赞同：1
> 
> 时间：2013-04-11T10:34:28.627
> 
> 标签：jquery, html, css, default-value, rating

嗨，我正在尝试通过视觉单击星形图像来获取输入类型收音机的值，并且在这方面取得了成功，但我被困在重置其他行中的星形图像中，看看这个小提琴[http://jsfiddle.net/sarfarazdesigner /T9nxq/](http://jsfiddle.net/sarfarazdesigner/T9nxq/)

我已经描述了我做`position relative` 了什么_请原谅我的英语谢谢:-)`div``position absolute``inputs``clicking``image``input``click`

```
<div class="ratingDiv review">
    <div class="row">
        <label class="lbl">Features : </label>
        <div class="ratingwrap">
            <div style="position:relative;">
                <div class="fkdiv">
                    <input type="radio" id="poor" class="rtchk"  name="Features"  value="1" />
                    <input type="radio" id="average" class="rtchk"  name="Features" value="2" checked="checked" />
                    <input type="radio" id="good" class="rtchk"  name="Features" value="3" />
                    <input type="radio" id="verygood" class="rtchk"  name="Features" value="4" />
                    <input type="radio" id="excellent" class="rtchk"  name="Features" value="5" />
                </div>
                <div class="rateMe" title="Rate Me...">
                    <a id="_1" title="poor" class="hvr"></a>
                    <a id="_2" title="average" class="hvr"></a>
                    <a id="_3" title="good" class="hvr"></a>
                    <a id="_4" title="verygood" class="hvr"></a>
                    <a id="_5" title="excellent" class="hvr"></a>
                </div>
                <div class="rateStatus">this is awesome</div>
            </div>
        </div>
    </div>

    <div class="row">
        <label class="lbl">Support : </label>
        <div class="ratingwrap">
            <div style="position:relative;">
                <div class="fkdiv">
                    <input type="radio" id="poor" class="rtchk"  name="Support"  value="1" />
                    <input type="radio" id="average" class="rtchk"  name="Support" value="2" checked="checked" />
                    <input type="radio" id="good" class="rtchk"  name="Support" value="3" />
                    <input type="radio" id="verygood" class="rtchk"  name="Support" value="4" />
                    <input type="radio" id="excellent" class="rtchk"  name="Support" value="5" />
                </div>
                <div class="rateMe" title="Rate Me...">
                    <a id="_6" title="poor" class="hvr"></a>
                    <a id="_7" title="average" class="hvr"></a>
                    <a id="_8" title="good" class="hvr"></a>
                    <a id="_9" title="verygood" class="hvr"></a>
                    <a id="_10" title="excellent" class="hvr"></a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <label class="lbl">Userfriendly : </label>
        <div class="ratingwrap">
            <div style="position:relative;">
                <div class="fkdiv">
                    <input type="radio" id="poor" class="rtchk"  name="Userfriendly"  value="1" />
                    <input type="radio" id="average" class="rtchk"  name="Userfriendly" value="2" checked="checked" />
                    <input type="radio" id="good" class="rtchk"  name="Userfriendly" value="3" />
                    <input type="radio" id="verygood" class="rtchk"  name="Userfriendly" value="4" />
                    <input type="radio" id="excellent" class="rtchk"  name="Userfriendly" value="5" />
                </div>
                <div class="rateMe" title="Rate Me...">
                    <a id="_11" title="poor" class="hvr"></a>
                    <a id="_12" title="average" class="hvr"></a>
                    <a id="_13" title="good" class="hvr"></a>
                    <a id="_14" title="verygood" class="hvr"></a>
                    <a id="_15" title="excellent" class="hvr"></a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <label class="lbl">Customer Values : </label>
        <div class="ratingwrap">
            <div style="position:relative;">
                <div class="fkdiv">
                    <input type="radio" id="poor" class="rtchk"  name="Customer"  value="1" />
                    <input type="radio" id="average" class="rtchk"  name="Customer" value="2" checked="checked" />
                    <input type="radio" id="good" class="rtchk"  name="Customer" value="3" />
                    <input type="radio" id="verygood" class="rtchk"  name="Customer" value="4" />
                    <input type="radio" id="excellent" class="rtchk"  name="Customer" value="5" />
                </div>
                <div class="rateMe" title="Rate Me...">
                    <a id="_16" title="poor" class="hvr"></a>
                    <a id="_17" title="average" class="hvr"></a>
                    <a id="_18" title="good" class="hvr"></a>
                    <a id="_19" title="verygood" class="hvr"></a>
                    <a id="_20" title="excellent" class="hvr"></a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <label class="lbl">Reliability : </label>
        <div class="ratingwrap">
            <div style="position:relative;">
                <div class="fkdiv">
                    <input type="radio" id="poor" class="rtchk"  name="Reliability"  value="1" />
                    <input type="radio" id="average" class="rtchk"  name="Reliability" value="2" checked="checked" />
                    <input type="radio" id="good" class="rtchk"  name="Reliability" value="3" />
                    <input type="radio" id="verygood" class="rtchk"  name="Reliability" value="4" />
                    <input type="radio" id="excellent" class="rtchk"  name="Reliability" value="5" />
                </div>
                <div class="rateMe" title="Rate Me...">
                    <a id="_21" title="poor" class="hvr"></a>
                    <a id="_22" title="average" class="hvr"></a>
                    <a id="_23" title="good" class="hvr"></a>
                    <a id="_24" title="verygood" class="hvr"></a>
                    <a id="_25" title="excellent" class="hvr"></a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <label class="lbl">After Sales Services : </label>
        <div class="ratingwrap">
            <div style="position:relative;">
                <div class="fkdiv">
                    <input type="radio" id="poor" class="rtchk"  name="Services"  value="1" />
                    <input type="radio" id="average" class="rtchk"  name="Services" value="2" checked="checked" />
                    <input type="radio" id="good" class="rtchk"  name="Services" value="3" />
                    <input type="radio" id="verygood" class="rtchk"  name="Services" value="4" />
                    <input type="radio" id="excellent" class="rtchk"  name="Services" value="5" />
                </div>
                <div class="rateMe" title="Rate Me...">
                    <a id="_26" title="poor" class="hvr"></a>
                    <a id="_27" title="average" class="hvr"></a>
                    <a id="_28" title="good" class="hvr"></a>
                    <a id="_29" title="verygood" class="hvr"></a>
                    <a id="_30" title="excellent" class="hvr"></a>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <label class="lbl">Over all Rating : </label>
        <div class="ratingwrap">
            <div style="position:relative;">
                <div class="fkdiv">
                    <input type="radio" id="poor" class="rtchk"  name="rating"  value="1" />
                    <input type="radio" id="average" class="rtchk"  name="rating" value="2" checked="checked" />
                    <input type="radio" id="good" class="rtchk"  name="rating" value="3" />
                    <input type="radio" id="verygood" class="rtchk"  name="rating" value="4" />
                    <input type="radio" id="excellent" class="rtchk"  name="rating" value="5" />
                </div>
                <div class="rateMe" title="Rate Me...">
                    <a title="poor" class="hvr"></a>
                    <a title="average"  class="hvr"></a>
                    <a title="good" class="hvr"></a>
                    <a title="verygood" class="hvr"></a>
                    <a title="excellent" class="hvr"></a>
                </div>
            </div>
        </div>
    </div>
</div><!--rating review div end here--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:51:21.420

几个小时后，我终于解决了星星的问题，看看这个链接 jsfiddle.net/sarfarazdesigner/myLTC/1/ 我得到了我想要的东西，归功于@Morpheus 和我的一些头脑：- )

# sql - 无法删除部分重复的行

> ID：15946576
> 
> 赞同：2
> 
> 时间：2013-04-11T10:34:48.153
> 
> 标签：sql, sql-server, group-by, distinct

我正在尝试删除部分重复的行；某些键值相同的行。为此，我必须根据 col 选择要删除的重复行。

例如：数据表

```
col1, col2, col3
1,     1,    1
2,     2,    2
1,     1,    2
2,     2,    3 
```

我想摆脱在 col 1 和 2 上重复的行，并保留 col3 上最高的行，导致

```
col1, col2, col3
1,     1,    2
2,     2,    3 
```

我认为要走的路是做一个选择`distinct`声明，`col 1 and 2`但我在处理`col3`结果时遇到了麻烦。

```
SELECT DISTINCT [col1], [col2]  FROM [table] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:51:12.817

```
DELETE t
FROM dbo.test83 t
WHERE NOT EXISTS (
                  SELECT 1
                  FROM dbo.test83 t2
                  WHERE t.Col1 = t2.Col1
                    AND t.Col2 = t2.Col2
                  HAVING MAX(t2.col3) = t.col3
                  ) 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/86fdc/1)上的演示[](http://sqlfiddle.com/#!3/86fdc/1)

 **同样在 SQLServer2005+ 中，您可以将选项与 CTE 和 ROW_NUMBER() 排名函数一起使用

```
;WITH cte AS
 (      
  SELECT ROW_NUMBER() OVER(PARTITION BY t.Col1, t.Col2 ORDER BY t.Col3 DESC) AS rn
  FROM dbo.test83 t
  )
  DELETE
  FROM cte
  WHERE rn > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:32:03.113

感谢另一个stackOverflow帖子...

```
SELECT * 
FROM [TABLE] a 
     LEFT JOIN [TABLE] a2
         ON a.col3<a2.col3 AND a.col1=a2.col1 and a.col2=a2.col2
WHERE a2.col2 IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:45:54.033

尝试添加一个`UNIQUE INDEX`，像这样：

```
ALTER IGNORE TABLE tablename ADD UNIQUE INDEX idx_name (col1, col2 ); 
```

这将删除所有重复的行，并防止将来重复插入。您可能想在运行这样的事情之前进行备份......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:46:00.047

此选择是否为您提供了您正在寻找的结果？

```
select [col1], [col2], max([col3]) from [table3] group by col1,col2 
```

也许您可以将此选择的结果插入到表中并用新表替换旧表？我认为这可能不是最好的解决方案，但也许这个查询可以帮助你找到你正在寻找的东西。**

# javascript - Youtube iFrame (with javascript API) 第一次加载，但不是第二次。为什么？

> ID：15946578
> 
> 赞同：9
> 
> 时间：2013-04-11T10:35:06.647
> 
> 标签：javascript, iframe, youtube, youtube-api

我正在使用带有以下代码的 iFrame Youtube API。我用 Ajax 调用这个视图来呈现它并将它附加到我页面中的 div.yt-player 中。它在我第一次调用视图时起作用，但是在我关闭视频（它清空 div.yt-player）并单击另一个调用我的视图的链接后，视频根本不会加载（空白）。我一直在挣扎，但仍然不明白为什么会这样，尤其是它第一次起作用。任何形式的帮助将不胜感激。谢谢。

PS：html 和 javascript 都是由视图呈现的。

```
Html
<div id="player"></div>

Javascript:
var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '486',
      width: '864',
      videoId: '#{@media['youtube_url']}',
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      },
      playerVars: {
        'showinfo': 0,
        'iv_load_policy': 3,
        'color': 'white',
        'fs': 1,
        'autoplay': 1,
        'vq': 'hd720'
      }
    });
  }

  function onPlayerReady(event) {
    event.target.playVideo();
  }

  var done = false;
  function onPlayerStateChange(event) {
    if (event.data == YT.PlayerState.PLAYING && !done) {
      setTimeout(stopVideo, 6000);
      done = true;
    }
  }
  function stopVideo() {
    player.stopVideo();
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-12-30T05:30:36.937

只需检查脚本是否已定义。

```
if(document.getElementById('iframe_api') === null){
            var tag = document.createElement('script');
            tag.src = "https://www.youtube.com/iframe_api";
            tag.id = "iframe_api";
            var firstScriptTag = document.getElementsByTagName('script')[0];
            firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
        }
else
    runPlayer();

function runPlayer(){
            var player;
            player = new YT.Player(element.children()[0], {
                playerVars: {
                    autoplay: 1,
                    html5: 1,
                    controls: 1,
                    showsearch: 0,
                    showinfo: 0
                },
                height: scope.height,
                width: scope.width,
                videoId: scope.videoid,
                events: {
                    onStateChange: function (event) {
                        if (event.data == YT.PlayerState.ENDED) {
                            scope.$emit('VideoEnded');
                        }
                    }
                }
            });
        }
$window.onYouTubeIframeAPIReady = function () {
    runPlayer();
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:35:38.450

我调试了这个问题。onYouTubeIframeAPIReady() 仅在第一次加载 YouTube API 时调用（例如，当用户刷新页面并单击视图的链接时），并且因为我在 Ajax 中调用我的视图，所以它没有被触发上升以下时间。

所以我通过将第一块代码包装在一个条件中来替换它：

```
 if (typeof youtube_api_init == 'undefined') {
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  } 
```

和

```
if (typeof youtube_api_init != 'undefined') {
  onYouTubeIframeAPIReady();
} 
```

在脚本的最后，我为浏览器设置了 youtube_api_init 以记住 YouTube API 已经加载：

```
var youtube_api_init = 1; 
```

PS：我第一次尝试时，我调用了我的变量 yt_api_init 而不是 youtube_api_init，但它不起作用，因为它恰好是 YouTube 已经在其 api 中使用的名称......

# asp.net-mvc-4 - 模拟 WebSecurity 提供程序

> ID：15946579
> 
> 赞同：3
> 
> 时间：2013-04-11T10:35:11.787
> 
> 标签：asp.net-mvc-4, nunit, rhino-mocks

我正在尝试为我的控制器创建一些简单的单元测试，但遇到了一个问题。

我在 MVC 4 中使用新的成员资格提供程序，并获取该`WebSecurity.CurrentUserId`值并将其存储在数据库中。

当我对此进行单元测试时，它失败了，我认为我已经将其追溯到`WebSecurity`根本没有被嘲笑的事实。

这是我的代码，如果它有帮助的话，

控制器

```
 [HttpPost]
    public ActionResult Create(CreateOrganisationViewModel viewModel)
    {
        if (ModelState.IsValid)
        {
            Group group = _groupService.Create(
                new Group
                {
                    Name = viewModel.Name,
                    Slug = viewModel.Name.ToSlug(),
                    Profile = new Profile
                    {
                        Country = viewModel.SelectedCountry,
                        Description = viewModel.Description
                    },
                    CreatedById = WebSecurity.CurrentUserId,
                    WhenCreated = DateTime.UtcNow,
                    Administrators = new List<User> {_userService.SelectById(WebSecurity.CurrentUserId)}
                });
            RedirectToAction("Index", new {id = group.Slug});
        }
        return View(viewModel);
    } 
```

考试

```
 [Test]
    public void SuccessfulCreatePost()
    {
        CreateOrganisationViewModel createOrganisationViewModel = new CreateOrganisationViewModel
        {
            Description = "My Group, bla bla bla",
            Name = "My Group",
            SelectedCountry = "gb"
        };

        IUserService userService = MockRepository.GenerateMock<IUserService>();
        IGroupService groupService = MockRepository.GenerateMock<IGroupService>();
        groupService.Stub(gS => gS.Create(null)).Return(new Group {Id = 1});
        GroupController controller = new GroupController(groupService, userService);
        RedirectResult result = controller.Create(createOrganisationViewModel) as RedirectResult;
        Assert.AreEqual("Index/my-group", result.Url);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-18T08:14:16.023

一种可能的解决方案是围绕 WebSecurity 创建一个包装类，例如`WebSecurityWrapper`。在包装器上公开静态 WebSecurity 方法，例如`WebSecurity.CurrentUserId`实例方法。在这种情况下，包装器的工作只是将所有调用委托给`WebSecurity`.

注入`WebSecurityWrapper`到`GroupController`的构造函数中。现在，您可以使用您选择的模拟框架对包装器进行存根，从而测试控制器逻辑。

希望这可以帮助。

# sql - SQL ranking query to compute ranks and median in sub groups

> ID：15946580
> 
> 赞同：9
> 
> 时间：2013-04-11T10:35:12.050
> 
> 标签：sql, sqlite, group-by, ranking, median

I want to compute the **[Median](http://en.wikipedia.org/wiki/Median)** of `y` in **sub groups** of this simple `xy_table`:

```
 x | y --groups--> gid |   x | y --medians-->  gid |   x | y
-------             -------------               -------------
0.1 | 4             0.0 | 0.1 | 4               0.0 | 0.1 | 4
0.2 | 3             0.0 | 0.2 | 3                   |     |
0.7 | 5             1.0 | 0.7 | 5               1.0 | 0.7 | 5
1.5 | 1             2.0 | 1.5 | 1                   |     |
1.9 | 6             2.0 | 1.9 | 6                   |     |
2.1 | 5             2.0 | 2.1 | 5               2.0 | 2.1 | 5
2.7 | 1             3.0 | 2.7 | 1               3.0 | 2.7 | 1 
```

In this example every `x` is unique and the table is already sorted by `x`. I now want to `GROUP BY round(x)` and get the tuple that holds the median of `y` in each group.

I can already compute the median for the whole table with this **ranking query**:

```
SELECT a.x, a.y FROM xy_table a,xy_table b
WHERE a.y >= b.y
GROUP BY a.x, a.y
HAVING count(*) = (SELECT round((count(*)+1)/2) FROM xy_table) 
```

Output: `0.1, 4.0`

But I did not yet succeed writing a query to compute the median for sub groups.

**Attention:** I do not have a `median()` aggregation function available. Please also do not propose solutions with special `PARTITION`, `RANK`, or `QUANTILE` statements (as found in similar but too vendor specific [SO questions](https://stackoverflow.com/questions/1342898/function-to-calculate-median-in-sql-server)). I need plain SQL (i.e., compatible to SQLite without `median()` function)

**Edit:** I was actually looking for the [Medoid](http://en.wikipedia.org/wiki/Medoid) and not the [Median](http://en.wikipedia.org/wiki/Median).

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:36:57.653

I suggest doing the computing in your programming language:

```
for each group:
  for each record_in_group:
    append y to array
  median of array 
```

But if you are stuck with SQLite, you can order each group by `y` and select the records in the middle like this [http://sqlfiddle.com/#!5/d4c68/55/0](http://sqlfiddle.com/#!5/d4c68/55/0):

**UPDATE**: only bigger "median" value is importand for even nr. of rows, so no `avg()` is needed:

```
select groups.gid,
  ids.y median
from (
  -- get middle row number in each group (bigger number if even nr. of rows)
  -- note the integer divisions and modulo operator
  select round(x) gid,
    count(*) / 2 + 1 mid_row_right
  from xy_table
  group by round(x)
) groups
join (
  -- for each record get equivalent of
  -- row_number() over(partition by gid order by y)
  select round(a.x) gid,
    a.x,
    a.y,
    count(*) rownr_by_y
  from xy_table a
  left join xy_table b
    on round(a.x) = round (b.x)
    and a.y >= b.y
  group by a.x
) ids on ids.gid = groups.gid
where ids.rownr_by_y = groups.mid_row_right 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:22:55.763

OK, this relies on a temporary table:

```
create temporary table tmp (x float, y float);

insert into tmp
  select * from xy_table order by round(x), y 
```

But you could potentially create this for a range of data you were interested in. Another way would be to ensure the `xy_table` had this sort order, instead of just ordering on `x`. The reason for this is SQLite's lack of row numbering capability.

Then:

```
select tmp4.x as gid, t.* from (
  select tmp1.x, 
         round((tmp2.y + coalesce(tmp3.y, tmp2.y)) / 2) as y -- <- for larger of the two, change to: (case when tmp2.y > coalesce(tmp3.y, 0) then tmp2.y else tmp3.y end)
  from (
    select round(x) as x, min(rowid) + (count(*) / 2) as id1, 
           (case when count(*) % 2 = 0 then min(rowid) + (count(*) / 2) - 1 
                 else 0 end) as id2
    from (  
      select *, rowid from tmp
    ) t
    group by round(x)
  ) tmp1
  join tmp tmp2 on tmp1.id1 = tmp2.rowid
  left join tmp tmp3 on tmp1.id2 = tmp3.rowid
) tmp4
join xy_table t on tmp4.x = round(t.x) and tmp4.y = t.y 
```

If you wanted to treat the median as the larger of the two middle values, which doesn't fit the definition as @Aprillion already pointed out, then you would simply take the larger of the two `y` values, instead of their average, on the third line of the query.

# android - 内容更改没有影响页眉和页脚？

> ID：15946585
> 
> 赞同：0
> 
> 时间：2013-04-11T10:35:43.900
> 
> 标签：android, gallery, android-tabhost

下面是我的用户界面

![在此处输入图像描述](https://i.stack.imgur.com/nZ8iI.png)

我需要的是当用户单击页脚菜单（图库）中的任何按钮时，内容（活动）区域将根据菜单而变化。但它不会影响页眉和页脚区域。

不同的内容有自己的布局和功能，由自己的活动类控制。我该怎么做？TabHosh 能做到吗？还是有其他解决方案？

对不起，我的英语不好。希望你们明白我在说什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-06T10:32:35.057

你可以使用这个：

*   [https://github.com/astuetz/PagerSlidingTabStrip](https://github.com/astuetz/PagerSlidingTabStrip)

截屏：

![在此处输入图像描述](https://i.stack.imgur.com/wzM7X.png)

# android - 带有登录系统的 GCM

> ID：15946586
> 
> 赞同：10
> 
> 时间：2013-04-11T10:35:44.817
> 
> 标签：android, push-notification, google-cloud-messaging

我目前正在将 GCM 实施到具有登录系统的应用程序中。我想根据登录到应用程序的用户（一个设备，多个用户）向应用程序发送通知。我经历了这些过程。

1.  以“用户 A”身份登录
2.  注册 GCM（获取注册 ID）发送到服务器端
3.  向用户 A 广播通知
4.  注销注销
5.  以“用户 B”身份登录
6.  注册 GCM（获取注册 ID - 有时会返回与用户 A 相同的注册 ID，有时返回不同的注册 ID-）
7.  GCM 向用户 A 推送通知（即使用户取消注册）

我不确定如何让应用程序识别登录到设备的用户并将通知仅推送给该特定用户。而不是用户 B 登录并获取用户 A 的通知。任何意见和答案将不胜感激！如果您需要检查我项目中的特定代码，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T11:15:09.147

注册 ID 标识特定设备上的特定应用程序。它不知道您的应用程序中的用户登录。因此，当您注销 GCM 时（当用户注销时），您应该调用您的服务器，让它知道用户已注销。

这将使您的服务器知道该用户已注销，并且服务器将停止向其发送 GCM 消息。

用户 A 注销和用户 B 登录后是否获得相同的注册 ID 并不重要（即使您获得了新的注册 ID，旧的注册 ID 仍然可以使用。这就是为什么 GCM 在设备时返回一个规范的注册 ID拥有多个申请的注册 ID）。

编辑 ：

让我们考虑一种特殊情况（应该相对少见），用户 A 在您的服务器向其发送通知后注销，但通知仅在用户 B 登录后才由 Google 传递给您的应用程序。处理这种情况的最安全方法是在您的应用程序中接收通知并将其丢弃，对用户 B 不显示任何内容。为了知道何时丢弃收到的通知，您可以将`user`属性添加到通知数据，并将用户名作为其值。当您在应用程序中处理通知时，请在显示通知之前检查用户属性是否与登录用户匹配。

# java - 从horizo ntol滚动条android获取当前图像

> ID：15946590
> 
> 赞同：0
> 
> 时间：2013-04-11T10:35:52.700
> 
> 标签：java, android, imageview, horizontalscrollview

我正在尝试制作一个简单的图片库，通过它可以设置壁纸；我正在使用下面的代码从下载文件夹中获取文件并在滚动视图中显示它。

我可以做到这一点，但现在我想获取当前显示的图像，以便我可以将该图像设置为墙纸。

以下是我的活动课程的代码：

```
public class MainActivity extends Activity {

 LinearLayout myGallery;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        myGallery = (LinearLayout)findViewById(R.id.mygallery);

        String ExternalStorageDirectoryPath = Environment
          .getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS)
          .getAbsolutePath();

        String targetPath = ExternalStorageDirectoryPath ;

        Toast.makeText(getApplicationContext(), targetPath, Toast.LENGTH_LONG).show();
        File targetDirector = new File(targetPath);

        File[] files = targetDirector.listFiles();
        for (File file : files){
         myGallery.addView(insertPhoto(file.getAbsolutePath()));

        }    
    }

    View insertPhoto(String path){
     Bitmap bm = decodeSampledBitmapFromUri(path, 520, 520);

     LinearLayout layout = new LinearLayout(getApplicationContext());
     layout.setLayoutParams(new LayoutParams(550, 550));//Size of view
     layout.setGravity(Gravity.CENTER);

     ImageView imageView = new ImageView(getApplicationContext());
     imageView.setLayoutParams(new LayoutParams(520, 520));
     imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
     imageView.setImageBitmap(bm);

     layout.addView(imageView);
     return layout;
    }

    public Bitmap decodeSampledBitmapFromUri(String path, int reqWidth, int reqHeight) {
     Bitmap bm = null;

     // First decode with inJustDecodeBounds=true to check dimensions
     final BitmapFactory.Options options = new BitmapFactory.Options();
     options.inJustDecodeBounds = true;
     BitmapFactory.decodeFile(path, options);

     // Calculate inSampleSize
     options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

     // Decode bitmap with inSampleSize set
     options.inJustDecodeBounds = false;
     bm = BitmapFactory.decodeFile(path, options); 

     return bm;  
    }

    public int calculateInSampleSize(

     BitmapFactory.Options options, int reqWidth, int reqHeight) {
     // Raw height and width of image
     final int height = options.outHeight;
     final int width = options.outWidth;
     int inSampleSize = 1;

     if (height > reqHeight || width > reqWidth) {
      if (width > height) {
       inSampleSize = Math.round((float)height / (float)reqHeight);   
      } else {
       inSampleSize = Math.round((float)width / (float)reqWidth);   
      }   
     }

     return inSampleSize;   
    }

} 
```

请告诉我如何获取当前显示在滚动视图中的图像。

谢谢阿曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T05:03:50.087

已经5个月了还没有回答，但我想我会试着回答。我认为您需要一个自定义视图，即。画布。创建一个画布，然后在画布中创建一个位图。之后，当您从 URI 形式的线性布局中获取位图时，在您的代码中的方法 decodeSampledBitmapFromUri 您将获得位图，只需将该位图分配给画布上创建的位图。

# php - 哪种模式以及如何构造这个[不同的服务处理程序、结构和验证]？

> ID：15946593
> 
> 赞同：4
> 
> 时间：2013-04-11T10:36:00.243
> 
> 标签：php, codeigniter, design-patterns

好的，所以我试图对所有这些模式有所了解。

好的，所以我在 CodeIgniter 中编写了一个应用程序，它需要能够使用 SOAP（可能是 XML、逗号分隔等）将有关汽车和客户的数据发送到不同类型的公司。

但他们都需要同样的东西。

我想让它尽可能动态，并确保它易于编写测试。

因此，该服务应该采取一些措施：

*   处理程序
*   申请人 [1-2]
*   参数
*   目的

我开始创建不同的课程

Gr8Exp NordCar SwePerf

每个实现接口**iServiceRequest**

```
interface iServiceRequest{
    /**
     * Send the request to the company server.
     */
    function sendRequest();
    /**
     * Saves the response into the database.
     */
    function saveResponse();
    /**
     * Prepares the request to the company, setting info from form and shit.
     */
    function prepareRequest();
    /**
     * Soap, XML, CSV, JSON
     * @param type $method
     */
    function setRequestHandler(iServiceRequestHandler $handler);
} 
```

然后他们需要根据我放入的处理程序来构建 Soap、XML、CSV、JSON 请求。

在那些需要被验证的人之后（不是所有人都这样做了），我使用了：

```
interface iAdaptServiceRequest{
    /**
     * Structure the array information and put it into an object structure in the right place.
    */
    function structure(array $info);
    /**
     * Make all the checks for the function
     */
    function validateInfo();
} 
```

但是我被卡住了，当我只使用 SOAP 请求时它工作得非常好；但现在。由于我需要以不同的方式格式化它们，因此对每种类型的请求或我不知道该怎么做的公司使用不同的处理程序。我可以将它们放在不同的文件夹中并在不同的文件夹中重新创建类。但这不是一个好习惯，因为我一直在重复代码。

最后我想运行一些这样的链接：

$result = $m->prepareRequest()->sendRequest()->saveResponse();

有什么建议么？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T19:13:26.440

恕我直言：

-- 创建/使用前端控制器。

-- 前端控制器确定使用哪个请求处理程序（JSON、SOAP、XML 等）。

-- 请求处理程序生成一个通用的“请求”对象，该对象在所有接口中的行为都相同，基本上将变量放入“请求对象”内的通用命名格式

-- 它确定将请求发送到哪个服务并将请求对象发送到那里

-- 服务处理请求对象并生成响应对象

-- 控制器创建一个适当的 (JSON/SOAP/XML) 视图对象来将响应对象处理为正确的视图类型，并且视图将您的响应输出为该类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:00:48.967

我会使用类似你的东西：`$result = $m->prepareRequest('JSON')->sendRequest()->saveResponse();`，但指定我发送的数据格式。

该方法`prepareRequest(string $type)`将检查格式并调用另一种方法将您的数据转换为相应的格式。

像这样的东西：

```
function prepareRequest(string $type){
     if ($type == 'json'){
          $this->convert2json();
     }
     if ($type == 'xml'){
          $this->convert2xml();
     }
     // And so on
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T20:52:46.827

关于 MVC 或观察者模式经常存在混淆。这不是这种模式适用的情况。在 MVC 模式中，视图和模型是相互关联的。视图必须根据主题的信息进行自我更新。数据库中的视图和基础表就是一个很好的例子。这不是你想要的。

适合这个问题的设计模式是建造者模式。Builder 模式由四种协作的类类型组成：1\. Builder，2\. ReaderManager，3\. ConverterManager，和 4\. DataObject。ReaderManager 正在使用解释器模式。可以使用状态模式进行转换。ReaderManager（一些 DataObject）的输出是 ConversionManager 的输入。这可以使用抽象类而不是接口来完成（我更喜欢以数据为中心的类）。Builder 将 ReaderManager 与 ConverterManager 连接起来，并负责数据的传输。

几年前，我写过关于设计模式的文章。构建器模式是我描述的模式之一，这是该页面的链接： [http](http://www.loekbergman.nl/InsideArchitecture/TheProcess/DesignPatterns/Builder) ://www.loekbergman.nl/InsideArchitecture/TheProcess/DesignPatterns/Builder 它显示了该模式的 UML 图。在下一个链接中，您可以下载包含一些设计模式示例的 jar。其中之一是构建器模式： [http](http://www.loekbergman.nl/InsideArchitecture/DownloadsAndLicense) ://www.loekbergman.nl/InsideArchitecture/DownloadsAndLicense 我在几年前编写了这段代码，因此我给你这个代码没有保证。（在这种情况下，这是正确的术语吗？）在代码中，您可以看到一个名称为规范的文件夹。这是解释器模式的另一个例子。（在 Builder 模式中当然也有这种模式的一个例子）。

完整的是 MVC 的链接 - 模式： [http](http://www.loekbergman.nl/InsideArchitecture/TheProcess/DesignPatterns/Observer) ://www.loekbergman.nl/InsideArchitecture/TheProcess/DesignPatterns/Observer 和解释器模式： [http ://www.loekbergman.nl/InsideArchitecture/TheProcess/DesignPatterns /翻译](http://www.loekbergman.nl/InsideArchitecture/TheProcess/DesignPatterns/Interpreter)

# java - 在 Java 中编译循环

> ID：15946603
> 
> 赞同：2
> 
> 时间：2013-04-11T10:37:05.290
> 
> 标签：java, compilation, javac

正如我从[JVM 规范](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-3.html#jvms-3.2)中看到的，这段代码：

```
void spin() {
    int i;
    for (i = 0; i < 100; i++) {
        ;    // Loop body is empty
    }
} 
```

应该编译成：

```
0   iconst_0
1   istore_1
2   goto 8
5   iinc 1 1
8   iload_1
9   bipush 100
11  if_icmplt 5
14  return 
```

条件检查`if_icmplt`在循环体之后，但是当我自己编译并使用 javap 查看时，我看到：

```
0:   iconst_0
1:   istore_1
2:   iload_1
3:   bipush  100
5:   if_icmpge       14
8:   iinc    1, 1
11:  goto    2
14:  return 
```

并且循环条件在循环体之前。为什么会这样？

在 body 之后放置条件会阻止我们在每个循环之后执行 goto，这对我来说看起来很合乎逻辑。那么为什么 OracleJDK 会采取另一种方式呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:17:12.747

这不是为了更好的 JIT 优化 - 对于 JIT，这些代码片段是等价的。这是因为在 javac 中进行优化没有意义，因为 JIT 优化更强大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T19:45:01.190

实现 for 循环（从其 JLS 语义）的直接方法是这样的：

1.  初始化
2.  条件 - 如果为假，则转到 6。
3.  循环体
4.  增量
5.  转到 2
6.  结尾

这实际上正是编译器在您的情况下生成的内容：

1.  初始化

    ```
    0:   iconst_0
    1:   istore_1 
    ```

2.  条件 - 如果为假，则转到 6。

    ```
    2:   iload_1
    3:   bipush  100
    5:   if_icmpge       14 
    ```

3.  循环体（空）

4.  增量

    ```
    8:   iinc    1, 1 
    ```

5.  转到 2

    ```
    11:  goto    2 
    ```

6.  结尾

    ```
    14:  return 
    ```

JVM 规范中的版本是实现它的另一种方式，这也是可以接受的。正如回答者所说，普通 VM 的 JIT 编译器会再次查看并优化它（如果它足够相关），因此字节码级别的轻微优化只对没有 JIT 的 JVM 和逐条解释字节码指令。即便如此，任何优化都将特定于实际机器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:17:16.010

无论哪种方式，它的指令数量都是相同的，并且正如已经指出的那样，规范并没有将编译器与这个特定的字节码联系起来：

> 编译器*可能会将*自旋编译为...

编译器几乎可以选择将其编译为它想要的任何字节码，只要最终效果相同。

> 在 body 之后放置条件会阻止我们在每个循环之后执行 goto，这对我来说看起来很合乎逻辑。那么为什么 OracleJDK 会采取另一种方式呢？

除非编写该编译器的那个人摇摆不定，否则可能无法确定地说-但是我想您的理论可能是正确的，因为这似乎与帮助以后的 JIT 优化有关。我唯一的预感（这可能是不正确的）是它可能与`goto`命令的定位有关 - 如果前 6 条指令被视为一个逻辑块，没有 goto，则可能有更多的潜力来实现更好的代码内联，因为它们位于编译器实际生成的字节码中。当然，由于那个特殊的`goto`只能跳转到该块内，没有逻辑差异，JIT 仍然可以内联它，效果完全相同。这些天来，我想它足够聪明来解决这个问题，但可能并非总是如此，在这种情况下，生成的代码提供了一个很好的解决方法。当然，当（如果）JIT 变得足够聪明时，就不需要更改代码，所以它卡住了。

一个详尽的理论，也许是完全错误的——但如果它是功能上的差异，那是我最好的猜测！

另一种可能性是编译器的那部分是如何编写的，完全是巧合，根本没有固定的理由（因为在编译器中，开发人员可能没有*试图*让代码完全像它那样在示例中做了。）

# javascript - jQuery ajax 返回 undefined 而不是 promise

> ID：15946605
> 
> 赞同：0
> 
> 时间：2013-04-11T10:37:08.737
> 
> 标签：javascript, jquery, ajax, promise

1.8.2

```
 $.ajax({
    url: "/someurl/",
    async: true,
    dataType: 'json'
  }).done(function ( data ) {
    if( console && console.log ) {
      console.log("Sample of data: ", data);
    }
  }); 
```

导致错误“Uncaught TypeError: Cannot call method 'done' of undefined”，但请求发送和服务器响应带有数据！如果我写

```
 $.ajax({
    url: "/someurl/",
    async: true,
    dataType: 'json',
    success: function (data) { console.log(data); }
  }); 
```

没关系，console.log 会触发！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T10:42:43.800

您的错误似乎可能来自您使用响应数据的方式，因为您的代码段是正确的。

为什么不运行一个失败方法并在那里测试错误？

```
 $.ajax({
    url: "/someurl/",
    async: true,
    dataType: 'json'
  }).fail(function (error) {
    console.log(error);
  }); 
```

或者，检查您的网络选项卡以获取 xhr 响应预览？

# mongodb - 添加页面支持导致错误 - Pageable pageable - spring-data-mongodb

> ID：15946610
> 
> 赞同：0
> 
> 时间：2013-04-11T10:37:20.807
> 
> 标签：mongodb, spring-data-mongodb

我有这样的存储库：

```
public interface IDomainRepository extends MongoRepository<Domain, String>{
} 
```

在我添加这样的分页支持之后：

```
public interface IDomainRepository extends MongoRepository<Domain, String>{    
    Page<Domain> getDomains(String projectId, Pageable pageable);
} 
```

我有错误：

```
Caused by: java.lang.IllegalArgumentException: No property get found for type class org.krams.tutorial.domain.nosql.Domain
at org.springframework.data.repository.query.parser.Property.<init>(Property.java:73)
at org.springframework.data.repository.query.parser.Property.<init> ... 
```

我的 pom.xml 中的版本是：

```
<!-- Versions -->
    <properties>
        <spring.version>3.2.1.RELEASE</spring.version>
        <spring.data.jpa.version>1.3.0.RELEASE</spring.data.jpa.version>
        <spring.data.mongo.version>1.2.0.BUILD-SNAPSHOT</spring.data.mongo.version>
        <spring.amqp.version>1.0.0.RELEASE</spring.amqp.version>
        <slf4j-version>1.6.1</slf4j-version>
        <org.cloudfoundry-version>0.8.0</org.cloudfoundry-version>
        <jackson-mapper>1.9.10</jackson-mapper>
    </properties> 
```

问题是什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:59:18.620

好的，明白了！错误的原因是：
如果你想在 MongoRepository 中使用 Pageable，
Domain 对象需要有成员 Domains，所以你可以添加类似的功能

```
public Page<Domain> findByDomains(String domains, Pageable pageable); 
```

# java - java - 如何从java中的http请求生成整个响应代码？

> ID：15946612
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:37:22.797
> 
> 标签：java

我有一个代码，但它只打印状态，我想要的是我的代码在控制台上打印整个代码“响应”。

```
import java.io.IOException;
import java.net.URL;
import java.net.HttpURLConnection;

public class API{
    public static void main(String args[]) throws IOException
    {
        URL url = new URL("http://testpath");
        HttpURLConnection http = (HttpURLConnection)url.openConnection();
        int statusCode = http.getResponseCode();
        System.out.println(statusCode);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:45:27.047

您的课程名为 API，但您似乎没有仔细阅读 HttpURLConnection 的 API。:[

[getResponseMessage()](http://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html#responseMessage)可能是您想要的。

如果要访问某些标头，则需要使用[URLConnection中定义的属性](http://docs.oracle.com/javase/7/docs/api/java/net/URLConnection.html)

```
The following methods are used to access the header fields and the contents after the connection is made to the remote object:

getContent
getHeaderField
getInputStream
getOutputStream

Certain header fields are accessed frequently. The methods:

getContentEncoding
getContentLength
getContentType
getDate
getExpiration
getLastModifed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:39:34.717

使用 HttpURLConnection 中的 getResponseMessage() 方法获取完成响应消息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:46:04.083

这必须工作..

```
String statusCode = http.getResponseMessage();
System.out.println(statusCode); 
```

# plsql - plsql中DML命令的系统级触发器

> ID：15946614
> 
> 赞同：0
> 
> 时间：2013-04-11T10:37:30.160
> 
> 标签：plsql

假设数据库中有 n 个表。无论在数据库中的任何表中发生什么插入、更新、删除，都必须在名为“Audit_Trail”的表中捕获，其中我们在审计跟踪表中有以下列。

Server_Name AT_date AT_time Table_name Column_name Action Old_value New_Value

需要捕获哪个表、哪个列、哪个日期和时间的服务器。此外，“操作”列跟踪操作是插入、更新还是删除，我们还必须捕获旧值和新值。

那么最好的方法是什么？我们可以创建一个数据库级触发器，它可以在任何插入、更新或删除的情况下触发触发器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:43:56.167

最好的方法是使用 Oracle 自己的审计功能。

```
AUDIT ALL ON DEFAULT BY ACCESS; 
```

[http://docs.oracle.com/cd/E11882_01/network.112/e36292/auditing.htm#DBSEG392](http://docs.oracle.com/cd/E11882_01/network.112/e36292/auditing.htm#DBSEG392)

回应评论...

想要审计对数据库中的表所做的每一个更改并没有什么不寻常的——因此系统中已经提供了用于执行此操作的功能。最好使用触发器，因为它不能被轻易绕过。但是，如果您想使用这种预先提供的、强大的、易于使用的功能，您可能不得不在您的特定要求上做出一些妥协，但回报将是一个卓越的解决方案，它将使用与成千上万其他相同的代码和配置甲骨文系统。

# perl-module - 在 Ubuntu 12.04 上使用 PSPP-Perl-Module

> ID：15946615
> 
> 赞同：2
> 
> 时间：2013-04-11T10:37:32.357
> 
> 标签：perl-module, cpan

我想使用[PSPP-Perl-Module](https://metacpan.org/module/PSPP)，但它似乎比预期的要困难得多。我可以使用任何版本的模块，但是因为似乎必须在每个 mashine 上构建它（如果我错了，请纠正我的错误）我选择 Ubuntu LTS 版本：

pspp-0.7.9+git20120319 是 Ubuntu LTS 12.04 中的 PSPP 版本。

第一次尝试：**CPAN 安装**

```
 cpan PSPP:Sysfile 
```

将构建一个相当旧的版本

```
 CPAN.pm: Going to build P/PD/PDONELAN/PSPP-Perl-0.7.2.20090730.tar.gz 
```

并要求提供我目前没有的已配置源目录。

```
 Enter the location of the build directory of the configured pspp source: [] 
```

第二次尝试：**apt-get source -b**

```
cd ~
apt-get build-dep pspp
apt-get source -b pspp 
```

将0.7.9+git20120319的源码下载到当前目录并构建。构建似乎工作了很长一段时间，但在测试阶段以错误结束：

```
...
| configure:43806: $? = 0
| configure:43806: gcc -std=gnu99 -c -g -O2 -fstack-protector --param=ssp-buffer-size=4 -Wformat -Wformat-security -Wdeclaration-after-statement -D_FORTIFY_SOURCE=2 -pthread -I/usr/include/cairo -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libpng12 -I/usr/include/pango-1.0   conftest.c >&5
| conftest.c: In function 'main':
| conftest.c:444:22: error: expected expression before ')' token
| configure:43806: $? = 1
| configure: failed program was:
| | /* confdefs.h */
...
| This file was extended by GNU PSPP config.status 0.7.9, which was
| generated by GNU Autoconf 2.68\.  Invocation command line was
| 
|   CONFIG_FILES    = 
|   CONFIG_HEADERS  = 
|   CONFIG_LINKS    = 
|   CONFIG_COMMANDS = 
|   $ ./config.status config.h
| 
| on agnes
| 
| config.status:2635: creating config.h

make[1]: *** [override_dh_auto_test] Fehler 1
make[1]: Verlasse Verzeichnis '/root/pspp-0.7.9+git20120319'
make: *** [build] Fehler 2
dpkg-buildpackage: Fehler: Fehler-Exitstatus von debian/rules build war 2
Build-Befehl »cd pspp-0.7.9+git20120319 && dpkg-buildpackage -b -uc« fehlgeschlagen.
E: Kindprozess fehlgeschlagen 
```

PSPP 用户邮件列表[在今年 1 月讨论了构建 Perl 模块的一些问题](http://comments.gmane.org/gmane.comp.statistics.pspp.user/1957)，我引用：

```
Basically you are right, you will need to compile PSPP first, but you don't need
to install it.  At a risk of contradicting that sentence, you should follow the 
instructions in the file called INSTALL.  However, to save yourself a bit of
time and from having to install lots of things you won't need, you can pass 
various --without-* flags to configure, thus:

./configure --without-gui --without-cairo --without-libncurses 
make
cd perl-module
make install 
```

因此，在未完成的构建中，我进入了 perl-module 目录

```
cd pspp-0.7.9+git20120319/perl-module
make install
Files found in blib/arch: installing files in blib/lib into architecture dependent library tree
Installing /usr/lib/perl/5.14.2/auto/PSPP/PSPP.so
Installing /usr/lib/perl/5.14.2/auto/PSPP/PSPP.bs
Installing /usr/lib/perl/5.14.2/PSPP.pm
Installing /usr/man/man3/PSPP.3pm
Installing /usr/man/man3/PSPP::Examples.3pm
Appending installation info to /usr/lib/perl/5.14.2/perllocal.pod 
```

长话短说：使用 perl 模块仍然没有成功：

```
#!/usr/bin/perl
use PSPP;

Can't load '/usr/local/lib/perl/5.14.2/auto/PSPP/PSPP.so' for module PSPP: libpspp-core-0.7.9.so: Kann die Shared-Object-Datei nicht öffnen: Datei oder Verzeichnis nicht gefunden at /usr/share/perl/5.14/XSLoader.pm line 71.
 at /usr/local/lib/perl/5.14.2/PSPP.pm line 26
BEGIN failed--compilation aborted at /usr/local/lib/perl/5.14.2/PSPP.pm line 27.
Compilation failed in require at ./test2.pl line 2.
BEGIN failed--compilation aborted at ./test2.pl line 2. 
```

:-(

有问题的文件*PSPP.so*存在：

```
ls /usr/local/lib/perl/5.14.2/auto/PSPP
libpspp-0.7.9.so  libpspp-core-0.7.9.so  libpspp-core.so  libpspp.so  PSPP.bs  PSPP.so 
```

这就是我卡住的地方。非常欢迎任何关于任何方法的提示。我的理解是，CPAN 上传了 PSPP-Module 的旧版本 0.7.2，但 PSPP-Module 实际上是主要 PSPP 源的一部分。为什么 mashine 没有自动安装该模块作为*apt-get install pspp*的一部分。是吗？我是否太愚蠢而无法找到/使​​用它？

非常感谢，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:57:35.530

感谢 PSPP 的友好邮件列表上的回答，我找到了解决方案：

```
ldd /usr/local/lib/perl/5.14.2/auto/PSPP/PSPP.so
        linux-vdso.so.1 =>  (0x00007fffe23d2000)
        libpspp-core-0.7.9.so => not found
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f7b66a35000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f7b6702c000) 
```

然后我创建了一个文件

```
echo '/usr/local/lib/perl/5.14.2/auto/PSPP' > /etc/ld.so.conf.d/pspp.conf
ldconfig 
```

现在看起来更好了！

```
ldd /usr/local/lib/perl/5.14.2/auto/PSPP/PSPP.so
        linux-vdso.so.1 =>  (0x00007fff1a5ff000)
        libpspp-core-0.7.9.so =>
/usr/local/lib/perl/5.14.2/auto/PSPP/libpspp-core-0.7.9.so
(0x00007f4daf913000)
        libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f4daf554000)
        libxml2.so.2 => /usr/lib/x86_64-linux-gnu/libxml2.so.2
(0x00007f4daf1f8000)
        libpq.so.5 => /usr/lib/libpq.so.5 (0x00007f4daefcb000)
        libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f4daedb4000)
        libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f4daeab7000)
        /lib64/ld-linux-x86-64.so.2 (0x00007f4dafe06000)
        libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f4dae8b3000)
        libssl.so.0.9.8 => /lib/x86_64-linux-gnu/libssl.so.0.9.8
(0x00007f4dae660000)
        libcrypto.so.0.9.8 => /lib/x86_64-linux-gnu/libcrypto.so.0.9.8
(0x00007f4dae2d2000)
        libkrb5.so.3 => /usr/lib/x86_64-linux-gnu/libkrb5.so.3
(0x00007f4dae004000)
        libcom_err.so.2 => /lib/x86_64-linux-gnu/libcom_err.so.2
(0x00007f4dade00000)
        libgssapi_krb5.so.2 =>
/usr/lib/x86_64-linux-gnu/libgssapi_krb5.so.2 (0x00007f4dadbc1000)
        libldap_r-2.4.so.2 =>
/usr/lib/x86_64-linux-gnu/libldap_r-2.4.so.2 (0x00007f4dad972000)
        libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0
(0x00007f4dad755000)
        libk5crypto.so.3 => /usr/lib/x86_64-linux-gnu/libk5crypto.so.3
(0x00007f4dad52c000)
        libkrb5support.so.0 =>
/usr/lib/x86_64-linux-gnu/libkrb5support.so.0 (0x00007f4dad324000)
        libkeyutils.so.1 => /lib/x86_64-linux-gnu/libkeyutils.so.1
(0x00007f4dad120000)
        libresolv.so.2 => /lib/x86_64-linux-gnu/libresolv.so.2
(0x00007f4dacf03000)
        liblber-2.4.so.2 => /usr/lib/x86_64-linux-gnu/liblber-2.4.so.2
(0x00007f4daccf5000)
        libsasl2.so.2 => /usr/lib/x86_64-linux-gnu/libsasl2.so.2
(0x00007f4dacada000)
        libgssapi.so.3 => /usr/lib/x86_64-linux-gnu/libgssapi.so.3
(0x00007f4dac89b000)
        libgnutls.so.26 => /usr/lib/x86_64-linux-gnu/libgnutls.so.26
(0x00007f4dac5df000)
        libgcrypt.so.11 => /lib/x86_64-linux-gnu/libgcrypt.so.11
(0x00007f4dac361000)
        libheimntlm.so.0 => /usr/lib/x86_64-linux-gnu/libheimntlm.so.0
(0x00007f4dac159000)
        libkrb5.so.26 => /usr/lib/x86_64-linux-gnu/libkrb5.so.26
(0x00007f4dabed3000)
        libasn1.so.8 => /usr/lib/x86_64-linux-gnu/libasn1.so.8
(0x00007f4dabc33000)
        libhcrypto.so.4 => /usr/lib/x86_64-linux-gnu/libhcrypto.so.4
(0x00007f4dab9fe000)
        libroken.so.18 => /usr/lib/x86_64-linux-gnu/libroken.so.18
(0x00007f4dab7e9000)
        libtasn1.so.3 => /usr/lib/x86_64-linux-gnu/libtasn1.so.3
(0x00007f4dab5d8000)
        libp11-kit.so.0 => /usr/lib/x86_64-linux-gnu/libp11-kit.so.0
(0x00007f4dab3c5000)
        libgpg-error.so.0 => /lib/x86_64-linux-gnu/libgpg-error.so.0
(0x00007f4dab1c1000)
        libwind.so.0 => /usr/lib/x86_64-linux-gnu/libwind.so.0
(0x00007f4daaf98000)
        libheimbase.so.1 => /usr/lib/x86_64-linux-gnu/libheimbase.so.1
(0x00007f4daad88000)
        libhx509.so.5 => /usr/lib/x86_64-linux-gnu/libhx509.so.5
(0x00007f4daab3e000)
        libsqlite3.so.0 => /usr/lib/x86_64-linux-gnu/libsqlite3.so.0
(0x00007f4daa89b000)
        libcrypt.so.1 => /lib/x86_64-linux-gnu/libcrypt.so.1
(0x00007f4daa661000) 
```

我现在可以运行使用 PSPP 本机库的示例 Perl 代码。

# marionette - 如何使用木偶collectionView。我使用 https://github.com/marionettejs/backbone.marionette 作为样板

> ID：15946616
> 
> 赞同：2
> 
> 时间：2013-04-11T10:37:33.300
> 
> 标签：marionette

我想知道如何使用木偶collectionView。我使用[https://github.com/marionettejs/backbone.marionette](https://github.com/marionettejs/backbone.marionette)作为样板。目前我无法看到集合视图呈现的任何内容。

**骨干集合**

```
define(["jquery","backbone","models/Store"],
  function($, Backbone, Store) {
    // Creates a new Backbone Collection class object
    var StoreCollection = Backbone.Collection.extend({
      // Tells the Backbone Collection that all of it's models will be of type Model (listed up top as a dependency)
      model: Store
    });

    storeCollectionObj = new StoreCollection();
    storeCollectionObj.add({"title":"wherwr werwe"});
    return storeCollectionObj;
  }); 
```

**模型**

```
define(["jquery", "backbone"],
    function($, Backbone) {
        // Creates a new Backbone Model class object
        var Store = Backbone.Model.extend({

            // Model Constructor
            initialize: function() {

            },

            // Default values for all of the Model attributes
            defaults: {

            },

            // Get's called automatically by Backbone when the set and/or save methods are called (Add your own logic)
            validate: function(attrs) {

            }

        });

        // Returns the Model class
        return Store;

    }

); 
```

**项目视图**

```
define( ['underscore', 'jquery', 'handlebars', 'text!templates/merchant/store.html'],
    function(_, $, Handlebars, template) {
        //ItemView provides some default rendering logic
        return Backbone.Marionette.ItemView.extend( {
            //Template HTML string
            template: Handlebars.compile(template), 
            id: "store",
            attributes: function () {
              return {class :"storeView"}
            },

            // View Event Handlers
            events: {

            }
        });
    }); 
```

**集合视图**

```
define( ['underscore', 'jquery', 'handlebars' , 'views/merchant/StoreView','text!templates/merchant/storeCollection.html' , 'collections/StoreCollection'],
    function(_, $, Handlebars, SroreView, template, StoreCollection) {
        SroreViewObj = new SroreView();
        //storeCollectionObj = new StoreCollection();
        //alert(StoreCollection);
        //StoreCollection.add({"title":"sdfsadfasd"});
        //ItemView provides some default rendering logic
        StoreCollectionView = Backbone.Marionette.CollectionView.extend({
            id : "StoreListing",
            template: Handlebars.compile(template), 
            itemView: SroreViewObj,
            collection : StoreCollection,
            render: function(){

            }

        });

        return StoreCollectionView;
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:36:09.660

我发现了我的错误。我在我的集​​合视图中传递了 itemView 对象。

线`itemView: SroreViewObj`应该是`itemView: SroreView`

只需将“SroreViewObj”替换为“SroreView”（itemView 定义）即可修复

```
SroreViewObj = new SroreView();
        //storeCollectionObj = new StoreCollection();
        //alert(StoreCollection);
        //StoreCollection.add({"title":"sdfsadfasd"});
        //ItemView provides some default rendering logic
        StoreCollectionView = Backbone.Marionette.CollectionView.extend({
            id : "StoreListing",
            template: Handlebars.compile(template), 
            itemView: SroreViewObj, // This should not be an object. So fixed just by replacing "SroreViewObj" with "SroreView" (itemView definition)**
            collection : StoreCollection,
            render: function(){

            }

        }); 
```

# java - 启动一个线程，在指定时间后终止进程

> ID：15946620
> 
> 赞同：0
> 
> 时间：2013-04-11T10:37:46.900
> 
> 标签：java, multithreading

我正在为一个网络执行一个程序，在该网络中我有一定数量的任务在循环中执行，它工作正常，但是当由于网络问题而出现任何缺陷时，它会卡在任何任务中。所以我想创建一个线程，它在控制进入循环时开始，经过一段时间的延迟，它会自行终止并继续进程。

例如-

```
for ( /*itearting condition */)
{
    //thread start with specified time.
    task1;
    task2;
    task3;
    //if any execution delay occur then wait till specified time and then
    //continue.
} 
```

请给我一些关于这个的线索，一个片段可以帮助我很多，因为我需要尽快修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:41:22.237

一个线程只能在它的合作下被终止（假设你想保存进程）。在线程的配合下，您可以使用它支持的任何终止机制来终止它。没有它的合作，它就无法完成。通常的做法是设计线程以合理地处理被[中断](https://stackoverflow.com/questions/6165919/java-interrupt-thread-when-reading-socket)。然后，如果时间过长，您可以让另一个线程中断它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:36:30.117

我想你可能需要这样的东西：

```
import java.util.Date;

public class ThreadTimeTest {

    public static void taskMethod(String taskName) {
        // Sleeps for a Random amount of time, between 0 to 10 seconds
        System.out.println("Starting Task: " + taskName);
        try {
            int random = (int)(Math.random()*10);
            System.out.println("Task Completion Time: " + random + " secs");
            Thread.sleep(random * 1000);
            System.out.println("Task Complete");
        } catch(InterruptedException ex) {
            System.out.println("Thread Interrupted due to Time out");
        }
    }

    public static void main(String[] arr) {
        for(int i = 1; i <= 10; i++) {
            String task = "Task " + i;
            final Thread mainThread = Thread.currentThread();
            Thread interruptThread = new Thread() {
                public void run() {
                    long startTime = new Date().getTime();
                    try {
                        while(!isInterrupted()) {
                            long now = new Date().getTime();
                            if(now - startTime > 5000)  {
                                //Its more than 5 secs
                                mainThread.interrupt();
                                break;
                            } else
                                Thread.sleep(1000);
                        }
                    } catch(InterruptedException ex) {}
                }
            };
            interruptThread.start();
            taskMethod(task);
            interruptThread.interrupt();
        }
    }
} 
```

# installation - CMake：在哪里安装 FooBarConfig.cmake 和 FooBarConfigVersion.cmake？

> ID：15946622
> 
> 赞同：0
> 
> 时间：2013-04-11T10:37:47.277
> 
> 标签：installation, cmake

假设是我用 CMake 编译的库 A。我还想通过一个包（例如 RPM）分发它。

我的包应该在哪里安装文件 AConfig.cmake 和 AConfigVersion.cmake ？

在 Linux 上的 /usr/share/cmake/Modules 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:20:00.133

你应该在这里找到你需要的东西：

[http://www.cmake.org/Wiki/CMake/Tutorials/Packaging](http://www.cmake.org/Wiki/CMake/Tutorials/Packaging)

与文本的相关部分：

> 考虑一个安装以下文件的项目“Foo”：
> 
> *   `<prefix>/include/foo-1.2/foo.h`
> *   `<prefix>/lib/foo-1.2/libfoo.a`
> 
> 它还可能提供一个 CMake 包配置文件
> 
> *   `<prefix>/lib/foo-1.2/foo-config.cmake`

配置文件需要在您的安装树中。只有`FindXXX.cmake`文件应该放在模块目录中。

# java - 完全基于 javadocs 的 Eclipse 代码补全

> ID：15946623
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:37:49.990
> 
> 标签：java, eclipse, jar, javadoc

是否可以？

我正在为一个应用程序服务器开发，它在运行时让我可以访问一些特定的类。我也有`javadocs`那些相关的`jars`。

将所有已部署的 jar 导入 Eclipse 比仅从`javadocs`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:41:33.690

不，这是不可能的。您需要 eclipse 构建路径中的二进制 jar 才能编译您的源代码。

# javascript - 检测 iframe 是否为空或目标可卸载

> ID：15946626
> 
> 赞同：0
> 
> 时间：2013-04-11T10:37:57.463
> 
> 标签：javascript, html, iframe

我写了一个脚本，在 iframe 中预览网页，问题是某些页面（例如 facebook 和 twitter）不会在 iframe 中打开。是否可以检测页面是否无法加载或 iframe 是否为空？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T16:44:28.327

您需要向 PHP 脚本发送请求以检查网站标题。例如：

```
$.getJSON('http://debute.eu/allowed.php?url=' + url, function(data) { }); 
```

这是[演示](http://jsfiddle.net/debute/5F7hT/)。

如果你可以使用 PHP 脚本，我会把我的 PHP 发给你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:41:30.560

[由于浏览器的同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，我认为这对于未托管在与您的域相同的域中的站点是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:44:45.983

看看这样的东西是否适合你

[**jsFiddle**](http://jsfiddle.net/hZZsS/)

```
alert($(".1").contents().find("body").length);
alert($(".2").contents().find("body").length); 
```

# performance - MongoDB中索引动态查询的最佳方法

> ID：15946628
> 
> 赞同：1
> 
> 时间：2013-04-11T10:38:07.240
> 
> 标签：performance, mongodb, indexing

我正在开发日志管理系统，用户将能够从文件上传日志。我有“事件”集合，我存储来自所有源的所有事件（每个源可以有不同的日志格式，在一个集合中我可以有例如 10 000 000 条记录 - 'source1' 有 5 000 000 条，'source2' 有 5 000 000 条）。我想为用户提供过滤选项（过滤选项将仅适用于源，因此用户可以按级别、数据等过滤数据）并且为了获得更好的性能，我想创建索引和复合索引。在用户将日志上传到系统之前，他/她将决定在过滤期间要使用哪些过滤器查询。所以我可以有不同的查询。问题是我可以在一个集合中有许多不同的源，这意味着许多不同的过滤器查询，但 mongoDB 每个集合只允许 64 个索引。

那么，如果我想要具有良好的读取性能并且我想让用户过滤日志（用户将决定在将日志上传到系统之前如何过滤数据），那么最好的解决方案是什么？我正在考虑为每个源创建新集合，因为每个集合我永远不会达到 64 个索引。

*查询示例：*

```
db.events.ensureIndex({"source_id": 1, "timestamp" : 1})
db.events.ensureIndex({"source_id": 1, "timestamp" : 1, "level": 1})
db.events.ensureIndex({"source_id": 1, "diagnostic_context": 1})
db.events.ensureIndex({"source_id": 1, "timestamp" : 1, "statusCode": 1})
db.events.ensureIndex({"source_id": 1, "host" : 1}) 
```

*事件收集示例：*

```
{   _id: ObjectId("507f1f77bcf86cd799439011"),
    timestamp: ISODate("2012-09-27T03:42:10Z"),
    thread: "[http-8080-3]",
    level: "INFO",
    diagnostic_context: "User 99999",
    message: "existing customer saving"},
    source_id: "source1"
{   _id: ObjectId("507f1f77bcf86cd799439012"),
    host: "144.18.39.44",
    timestamp: ISODate("2012-09-01T03:42:10Z"),
    request: "GET /resources.html HTTP/1.1",
    statusCode: 200
    bytes_sent: 3458,
    url: "http://www.aivosto.com/",
    agent: "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)",
    source_id: "source2"
} 
```

# integration-testing - 记事本++中的自动编码

> ID：15946630
> 
> 赞同：0
> 
> 时间：2013-04-11T10:38:14.107
> 
> 标签：integration-testing, notepad++

很多时候我需要将文本文件从 UCS-2 Little Endian 编码为 ANSI 并以相同的名称保存。是否可以自动化此过程？例如使用参数运行 Notepade ++，或者使用特殊脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T14:22:40.360

我已经对 5000 多个文件进行了此操作。我使用 AutoHotKey 发送击键

1.  在文件列表窗口中，在文件名上按回车键，以便在记事本++中打开
2.  Notepad++ 激活并准备就绪后，触发转换
3.  在记事本++中关闭文档
4.  切换回文件列表窗口
5.  发送向下箭头以继续下一行

我暂时禁用了语法着色（我有 Visual Basic 文件）以更快地打开文件。

我在 Total Commander（而不是 Windows 资源管理器）中使用文件列表的宏 ( `WinKey+F5`) 是：

```
SendMode Input
DetectHiddenWindows, On
SetTitleMatchMode, RegEx

#F5::
    KeyWait,AppsKey

    Loop, 10 {
        MouseGetPos, xpos, ypos
        If (xpos == 0)
            Break
        Send {F4}
WaitNPP:
        Sleep, 20
        IfWinNotActive, .*Notepad
            ;MsgBox nax
            Goto, WaitNPP

        Send !c
WaitDialog:
        Sleep, 50
        IfWinNotActive, .*Column
            Goto, WaitDialog

        Send {Esc}
        Sleep, 50
        Send ^+{F8}^s^w
        ;!+F8 was created as custom shortcut in N++
        Sleep, 100
        Send #1
WaitTC:
        Sleep, 20
        IfWinNotActive, .*Commander
            Goto, WaitTC

        Send {Down}
        ;Run C:\Tools\notifu.exe /p "Conversion to UTF-8" /m "1 of 10" /d 500
        ;Sleep, 500
    }
Return 
```

循环设置为处理 10 个文件。

在记事本++中，我通过按下我在记事本++中定义的设置来触发转换`Ctrl+Alt+Shift+F8`。

# haskell - 具有身份单子的单子转换器

> ID：15946633
> 
> 赞同：18
> 
> 时间：2013-04-11T10:38:20.697
> 
> 标签：haskell

使用带有 Identity monad 的 Monad 转换器而不是仅仅使用“标准”版本的转换器有什么意义？

是不是更灵活？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-11T12:56:25.233

回到`mtl`1.0 我们两者都有

```
newtype State s a = State { runState :: s -> (a, s) } 
```

和

```
newtype StateT s m a = StateT { runStateT :: s -> m (a, s) } 
```

`MonadState`然而，这意味着任何必须为诸如结束重复工作之类的事情实施实例的人。

在`transformers`（现在已经不复存在的`monads-fd`and `monads-tf`）中，Ross Paterson 决定使用更简单的方法，只提供后者并`Identity`用作基本 monad。

这减少了维护 monad 的实现工作，并消除了实现monad`mtl`有两种不同方法的事实。`State`然而，它确实使内部结构`mtl`更难教授，因为您需要从一开始就理解这些`transformers`版本，而不是将简化版本作为训练轮。

当旧版本`mtl`退役并`monads-fd`成为`mtl`2.0 时，使用现有的`transformers`这个设计决定被继承下来。

我个人喜欢至少将单独的简单单子用于教学目的，但在辩论的另一边有更多的人。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-11T10:50:42.523

来自文档：在*计算上，没有理由使用 Identity monad 而不是简单地将函数应用于其参数的简单得多的行为。Identity monad 的目的是它在 monad 转换器理论中的基本作用。任何应用于 Identity monad 的 monad 转换器都会产生该 monad 的非转换器版本。*

据我了解，通过应用身份单子从单子变压器中获取单子的非变压器版本正是身份单子的用途。与仅使用非变压器 monad 相比没有任何优势，但有时您必须使用 monad 变压器，例如当您想要使用的功能需要它时。

# c# - 如何在 LINQ 中使用可为空的内置变量？

> ID：15946635
> 
> 赞同：1
> 
> 时间：2013-04-11T10:38:27.627
> 
> 标签：c#, linq

我是一个非常新的 LINQ，我在这里有一个关于它的问题。

我在这里有一个非常简单的类用于演示目的：

```
public class CurrencyPair
{
    public string? cultureCode;
    public string? currencyName;

    public CurrencyPair(string iCultureCode, string iCurrencyName)
    {
        cultureCode = iCultureCode;
        currencyName = iCurrencyName;
    }

    public CurrencyPair()
    {
        cultureCode = "";
        currencyName = "";
    }
} 
```

然后我有一个上述类的实例列表：

```
static List<CurrencyPair> currencyPairs; 
```

现在我正在尝试这样做：

```
public List<string> GetCurrencyNames()
{
    return (from c in currencyPairs select c.currencyName).Distinct().ToList();
} 
```

但是我收到此错误：

```
The type 'string' must be a non-nullable value type in order to use it as parameter 'T' in the generic type or method 'System.Nullable<T>' 
```

如果我在类定义中删除`?`for`cultureCode`和`currencyName`，这个错误就会消失。

那么如何在 LINQ 查询中使用可为空的字符串..？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T10:39:37.993

`string`已经是**引用类型**了，可以hold `null`，不用用`string?`

该错误也表明：

> “字符串”类型必须是不可为空的值类型......

您只能`Nullable<T>`与值类型一起使用。

[`Nullable<T>`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)

> 表示可以分配为 null**的值类型。**

您正在尝试声明`string?`等于的字段`Nullable<string>`，但这只能使用[值类型](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)来完成。

> 在 C# 和 Visual Basic 中，您可以使用 ? 将值类型标记为可为空的。值类型后的符号。例如，int? 用 C# 还是整数？在 Visual Basic 中声明了一个可以赋值为 null 的整数值类型

.

# node.js - 如何为 node-xmpp 客户端添加自定义身份验证机制？

> ID：15946636
> 
> 赞同：2
> 
> 时间：2013-04-11T10:38:34.757
> 
> 标签：node.js, node-xmpp

我可以在 node-xmpp 中使用海关身份验证机制而不分叉吗？我需要使用与**X-OAUTH2**非常相似的机制进行身份验证，但使用其他标题和更简单的 auth() 方法（有关更多信息，请参阅[代码](https://github.com/astro/node-xmpp/blob/master/lib/xmpp/sasl.js)）。

# jquery - 带有注释的对话框

> ID：15946637
> 
> 赞同：1
> 
> 时间：2013-04-11T10:38:35.780
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我正在使用 JQuery 对话框来提醒用户他们将要删除一个项目。我需要在对话框内放置一个注释文本框，然后使用此注释更新数据库中的记录。

我有以下 JQuery 函数：

```
$('.releaseMessage').click(function (evt) {
    evt.preventDefault();
    var msgId = $(this).closest('tr').children().eq(2).html();
    var senderBIC = $(this).closest('tr').children().eq(3).html();

    var idPredefineDetail = $(this).closest("div").find("input[name=idPredefineDetail]").value();

    var _msgId = JSON.stringify({ msgId: msgId, senderBIC: senderBIC });
    $("#release-dialog-text").text("You are about to release message ("+ msgId + ")");
    $("#release-dialog").dialog({
        model: true,
        buttons: {
            Ok: function () {
                $(this).dialog("close");
                $.ajax({
                    type: "POST",
                    url: "Default.aspx/ReleaseMessage",
                    data: _msgId,
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function () {
                    },
                    error: function (xml, textStatus, errorThrown) {
                        alert(xml.status + "||" + xml.responseText);
                    }

                });

            },
            Cancel: function () {
                $(this).dialog("close");
            }
        }
    });
}); 
```

我的对话框 DIV 是：

```
<div id="release-dialog" title="Release Message">

    <div id="release-dialog-text">

    </div>
    <input id="comment" type="text" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:35:48.187

好的，使用此方法对此进行了排序：

window.parent.$('#release-dialog') .attr('title', '发布消息') .html('输入你的评论') .dialog({

```
 ... rest of dialog stuff 
           var comment = window.parent.$('#releasecomment').val(); 
```

# c# - Kinect 语音没有获得识别器

> ID：15946642
> 
> 赞同：2
> 
> 时间：2013-04-11T10:38:45.833
> 
> 标签：c#, wpf, kinect, speech

我不知道你们中有多少人有过 Kinect 的经验，但我在近两周前在 MSDN 论坛上发布了这个并且没有得到任何帮助。我一直在绞尽脑汁试图让它工作也许这里有人可以提供帮助.我正在尝试将语音添加到我的应用程序中，该应用程序通常使用手势。我正在使用 KinectSensorChooser，并且在启用skeletonStream 之后，我立即启动传感器，然后尝试启动语音识别。我正在使用海龟示例，该示例运行良好，因此所有内容都已正确安装。我跟踪了代码并知道没有找到 RecognizerInfo。注意“测试”消息框不显示：

**代码**：

```
private static RecognizerInfo GetKinectRecognizer()
    {

        foreach (RecognizerInfo recognizer in SpeechRecognitionEngine.InstalledRecognizers())
        {MessageBox.Show("test");
            string value;
            recognizer.AdditionalInfo.TryGetValue("Kinect", out value);
            if ("True".Equals(value, StringComparison.OrdinalIgnoreCase) && "en-US".Equals(recognizer.Culture.Name, StringComparison.OrdinalIgnoreCase))
            {

                return recognizer;
            }
        }

        return null;
    } 
```

任何想法为什么？卡了这半天，找不到解决办法。注意有一个bug，如果骨架流在它之后开始，音频流就会停止。所以我改变了他们开始的顺序，没有区别。我正在使用 SDK 1.6 和 x86 安装语音包。没有错误或异常。[原帖](http://social.msdn.microsoft.com/Forums/en-US/kinectsdkaudioapi/thread/edaf0862-a589-436a-abcc-48af2edb5745)在这里。任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T20:04:55.033

我遇到了同样的问题，我找到了这篇文章，我决定现在回答，我可以解决这个问题。

经过 4 天的处理，卸载并安装了微软学生合作伙伴告诉我的所有东西，我应该按特定顺序安装所有东西。

1st：卸载所有东西，kinect sdk，驱动程序，运行时等。2：安装kinect sdk。3：安装microsoft speech 4：安装你需要的语言包。

我正在使用 kinect sdk 1.5，这对我有用。

微软似乎与它本身不兼容，哈哈。问候！卡罗

# c# - Ajax定位方法不加载Form

> ID：15946653
> 
> 赞同：0
> 
> 时间：2013-04-11T10:39:20.037
> 
> 标签：c#, jquery, asp.net-mvc-2

```
function purchase() {
    var url = '<%: Url.AbsoluteRouteUrl("packages", new { action = "PrePaidPurchaseWithStoredCc", controller = "packages" })%>';
    $.ajax({
          type: "GET",
          url: url,
          dataType: 'json',
          cache: false,
          data: { ownerKey: selOwnerKey, providerKey: selProviderKey, packageKey: selPackageKey, creditCardId: $("#creditCardId").val(), embedded: true },
          success: function (response) {
           window.location = Sys.Url.route('packages', { action: "provider", controller: "packages", providerKey: '<%: Model.Provider.Key %>', ownerKey: '<%: Model.Owner.Key %>' });
            }
         });
       } 
```

我需要在成功回调时加载整个表单。但不幸的是，上面的代码不起作用。当我`window.location`在 ajax 调用之前放置代码时它正在工作。

为什么上面的方法不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:36:33.547

**错误**的处理方法如下：

```
 [HttpGet]
    public ActionResult PrePaidPurchaseWithStoredCc(string ownerKey, string providerKey)
     {   
      return RedirectToAction("Provider", new { providerKey = providerKey, ownerKey = ownerKey });
     } 
```

当我将其**更改**为如下所示时。它正在工作：

```
[HttpGet]
public ActionResult PrePaidPurchaseWithStoredCc(string ownerKey, string providerKey)
  {   
    return Json(string.Empty, JsonRequestBehavior.AllowGet);
  } 
```

**页面重新加载**jQuery 函数如下：

```
function purchase() {
    var url = '<%: Url.AbsoluteRouteUrl("packages", new { action = "PrePaidPurchaseWithStoredCc", controller = "packages" })%>';
    $.ajax({
          type: "GET",
          url: url,
          dataType: 'json',
          cache: false,
          data: { ownerKey: selOwnerKey, providerKey: selProviderKey, packageKey: selPackageKey, creditCardId: $("#creditCardId").val(), embedded: true },
          success: function (response) {
           window.location = Sys.Url.route('packages', { action: "provider", controller: "packages", providerKey: '<%: Model.Provider.Key %>', ownerKey: '<%: Model.Owner.Key %>' });
            }
         });
       } 
```

**注意：** *问题是我的操作方法没有 json return.B'cos，它不会触发 .success: 方法。*

# sql-server-2008 - 从存储过程中获取以逗号分隔的值

> ID：15946659
> 
> 赞同：0
> 
> 时间：2013-04-11T10:39:34.943
> 
> 标签：sql-server-2008

我在 sqlserver 中有一个表

```
UserID(PK)    Name    PhoneNumber
1             Test     123456
2             Test1    356456 
```

另一个表有上表的 FK

```
 ID    RequestID   UserID(FK)
  1      20123        1
  2      20245        1
  3      21545        2 
```

我需要如下结果

```
UserID    Name      phoneNumber  RequestID
 1        Test      123456       20123,20245
 2        Test1      356456       21545 
```

我使用了连接，但它为每一行提供了多条记录，但我需要如上所述的结果。有人可以帮助我如何获得这种类型的输出吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:05:44.707

有几种不同的方法可以做到这一点。

使用`FOR XML PATH`和`STUFF`：

```
select u.userid,
  u.name,
  u.phonenumber,
  STUFF((SELECT distinct ', ' + cast(r.requestid as varchar(10))
         from requests r
         where u.userid = r.userid
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,2,'') requests
from users u; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/caf65/6)

或者您可以使用`CROSS APPLY`and `FOR XML PATH`：

```
select u.userid,
  u.name,
  u.phonenumber, 
  left(r.requests, len(r.requests)-1) requests
from users u
cross apply
(
  select cast(r.requestid as varchar(10)) + ', '
  from  requests r
  where u.userid = r.userid
  FOR XML PATH('')
) r (requests); 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/caf65/7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:44:00.413

```
SELECT [UserID]
     , [Name]
     ,[PhoneNumber]
     , stuff((SELECT distinct ' ,'+ CAST(RequestID AS VARCHAR)
         FROM [Request] 
         WHERE (UserID = [PK].UserID) 
         FOR XML PATH ('')),1,2,''
      ) AS Request1
FROM [PK] 
```

**[我从这里借了一些概念](https://stackoverflow.com/questions/6899/is-there-a-way-to-create-a-sql-server-function-to-join-multiple-rows-from-a-su)**

**[SQL小提琴](http://www.sqlfiddle.com/#!3/d9339/5)**

# ruby-on-rails - Rails 更新操作因 rails4、mongoid 而失败。创建好

> ID：15946661
> 
> 赞同：2
> 
> 时间：2013-04-11T10:39:38.643
> 
> 标签：ruby-on-rails, ruby, mongoid, crud, updates

我有一个带有 rails4 和 mongoid 的简单的 Rails 应用程序。我可以像魅力一样创建新的数据集。但我无法更新现有数据集。

有人有这个问题吗？这是如何工作的，我做错了什么？

刚刚使用 rails 4、ruby 2 和 mongoid 从头开始​​创建，全部来自他们的 git repos：

```
rails new mongotest --skip-active-record 
```

我生成了一个脚手架：

```
rails g scaffold things name description 
```

我的模型现在看起来像这样：

```
class Thing
  include Mongoid::Document
  field :name, type: String
  field :description, type: String
end 
```

像这样的控制器：

```
class ThingsController < ApplicationController
  before_action :set_thing, only: [:show, :edit, :update, :destroy]

  # GET /things
  # GET /things.json
  def index
    @things = Thing.all
  end

  # GET /things/1
  # GET /things/1.json
  def show
  end

  # GET /things/new
  def new
    @thing = Thing.new
  end

  # GET /things/1/edit
  def edit
  end

  # POST /things
  # POST /things.json
  def create
    @thing = Thing.new(thing_params)

    respond_to do |format|
      if @thing.save
        format.html { redirect_to @thing, notice: 'Thing was successfully created.' }
        format.json { render action: 'show', status: :created, location: @thing }
      else
        format.html { render action: 'new' }
        format.json { render json: @thing.errors, status: :unprocessable_entity }
      end
    end
  end

  # PATCH/PUT /things/1
  # PATCH/PUT /things/1.json
  def update
    respond_to do |format|
      if @thing.update(thing_params)
        format.html { redirect_to @thing, notice: 'Thing was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: 'edit' }
        format.json { render json: @thing.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /things/1
  # DELETE /things/1.json
  def destroy
    @thing.destroy
    respond_to do |format|
      format.html { redirect_to things_url }
      format.json { head :no_content }
    end
  end

  private
    # Use callbacks to share common setup or constraints between actions.
    def set_thing
      @thing = Thing.find(params[:id])
    end

    # Never trust parameters from the scary internet, only allow the white list through.
    def thing_params
      params.require(:thing).permit(:name, :description)
    end
end 
```

我的宝石文件：

```
source 'https://rubygems.org'

# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'
gem 'rails',     git: 'https://github.com/rails/rails.git'
gem 'arel',      git: 'https://github.com/rails/arel.git'
gem 'activerecord-deprecated_finders', git: 'https://github.com/rails/activerecord-deprecated_finders.git'

gem 'thin'
gem 'mongoid', git: 'https://github.com/mongoid/mongoid.git'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 4.0.0.beta1'
  gem 'coffee-rails', '~> 4.0.0.beta1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', platforms: :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks
gem 'turbolinks'

# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder
gem 'jbuilder', '~> 1.0.1' 
```

这是尝试更新数据集时的日志：

```
Started PATCH "/things/51669078e05658cf22000001" for 127.0.0.1 at 2013-04-11 12:29:25 +0200
Processing by ThingsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lfELkffFSf9gk04TnHnzG9cCrOe3XrsjK4fEZ7Rt7qQ=", "thing"=>{"name"=>"qqqq", "description"=>"qqqqq"}, "commit"=>"Update Thing", "id"=>"51669078e05658cf22000001"}
  MOPED: 127.0.0.1:27017 QUERY        database=mongotest_development collection=things selector={"_id"=>"51669078e05658cf22000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.5772ms)
Redirected to http://localhost:3000/things/51669078e05658cf22000001
Completed 302 Found in 6ms 
```

如果有人有任何提示或链接...非常感谢帮助。

**更新 1**：我确实在 rails 3 环境中尝试过，它可以正常工作……完全符合预期。

**更新 2**：带有“Mongoid.logger.level = Logger::DEBUG”和“Moped.logger.level = Logger::DEBUG”的记录器输出：

```
Started PATCH "/things/5166c5ece05658f08a000001" for 127.0.0.1 at 2013-04-11 16:20:56 +0200
Processing by ThingsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lfELkffFSf9gk04TnHnzG9cCrOe3XrsjK4fEZ7Rt7qQ=", "thing"=>{"name"=>"EditTest", "description"=>"123"}, "commit"=>"Update Thing", "id"=>"5166c5ece05658f08a000001"}
D, [2013-04-11T16:20:56.450464 #37961] DEBUG -- :   MOPED: 127.0.0.1:27017 QUERY        database=mongotest_development collection=things selector={"_id"=>"5166c5ece05658f08a000001"} flags=[:slave_ok] limit=0 skip=0 batch_size=nil fields=nil (0.7041ms)
Redirected to http://localhost:3000/things/5166c5ece05658f08a000001
Completed 302 Found in 6ms 
```

**更新 3**：我用于最后一个日志输出的 mongoid.yml：

```
development:
  # Configure available database sessions. (required)
  sessions:
    # Defines the default session. (required)
    default:
      # Defines the name of the default database that Mongoid can connect to.
      # (required).
      database: mongotest_development
      # Provides the hosts the default session can connect to. Must be an array
      # of host:port pairs. (required)
      hosts:
        - localhost:27017
      options:
        # Change whether the session persists in safe mode by default.
        # (default: false)
        safe: true 
```

我的示例应用程序位于[https://github.com/jlxq0/mongotest](https://github.com/jlxq0/mongotest)

**更新 4**：更多研究表明，这 /could/ 是类似[Rails 4.0.0.beta 1 和 Mongoid的问题](https://stackoverflow.com/questions/15793400/rails-4-0-0-beta-1-and-mongoid)

如果没有人有答案，如果有人分享了一个指向工作 rails4 / Mongo 示例源的链接，我也会很高兴，这样我就可以自己找出差异。

**更新 5**：在 Rails 控制台中，更新工作得很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T13:33:57.483

这是因为`update`它不接受属性，它只接受选项，比如`@thing.update(validate: false)`.

为了使您的代码正常工作，您可以执行以下操作：

```
if @thing.update_attributes(thing_params)
  #...
end 
```

或者：

```
@thing.attributes = thing_params
if @thing.save
  #...
end 
```

或者：

```
@thing.attributes = thing_params
if @thing.update
  #...
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T14:21:08.733

MongoDB 有一种叫做安全模式的东西，默认情况下它是关闭的，这意味着无论你告诉它执行什么，它都会为它返回 OK。如果将安全模式设置为 on，如果执行 mongo 标准非法的查询，则会引发异常。

在开发中，您通常会这样做，

```
development:
  sessions:
    default:
      hosts:
        - localhost:27017
      database: mongoid
      username: user
      password: password
      options:
        safe: true 
```

之后，您可以向我们发布您的异常，我们可以尝试解决它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T22:31:56.233

如果您正在使用嵌入式属性（无论是动态创建的哈希，还是明确定义的关系），使用`upsert`而不是`update`可能会有所帮助。

如果条目存在，则 Upsert 会导致字段被重写，如果不存在则创建。

IE

```
person = Person.new(
  first_name: "Heinrich",
  last_name: "Heine"
)
person.upsert 
```

示例来自： http: [//mongoid.org/en/mongoid/docs/persistence.html](http://mongoid.org/en/mongoid/docs/persistence.html)

# sql-update - 在elasticsearch中更新所有记录中的字段

> ID：15946663
> 
> 赞同：8
> 
> 时间：2013-04-11T10:39:44.547
> 
> 标签：sql-update, elasticsearch

我是 ElasticSearch 的新手，所以这可能是一件非常微不足道的事情，但我还没有想出比获取所有内容、使用脚本处理和一个一个更新寄存器更好的方法。

我想做一个简单的 SQL 更新：

```
UPDATE RECORD SET SOMEFIELD = SOMEXPRESSION 
```

我的意图是用一些更有意义的数据替换实际的虚假数据（因此表达式基本上是从有效值池中随机选择的）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T12:21:48.743

关于通过查询更新文档有几个[未解决的](https://github.com/elasticsearch/elasticsearch/issues/1607) [问题。](https://github.com/elasticsearch/elasticsearch/issues/2230)

技术挑战在于 lucene（Elasticsearch 在后台使用的文本搜索引擎库）段是只读的。您永远不能修改现有文档。您需要做的是删除文档的旧版本（顺便说一句，它只会被标记为已删除，直到发生段合并）并索引新版本。这就是现有的[更新 api](http://www.elasticsearch.org/guide/reference/api/update/)所做的。因此，查询更新可能需要很长时间并导致问题，这就是它尚未发布的原因。对于这种情况，允许中断正在运行的查询的机制也将是一个不错的选择。

但是[查询插件的更新](https://github.com/yakaz/elasticsearch-action-updatebyquery/)恰好暴露了该功能。使用前请注意潜在风险。

# java - 令人困惑的方法返回类型，需要澄清一下

> ID：15946667
> 
> 赞同：-3
> 
> 时间：2013-04-11T10:39:51.467
> 
> 标签：java, methods

我们的老师告诉我们扩展并完成他制作的班级模板。我对返回类型非常熟悉，但这确实让我感到困惑。

```
 public static <T extends Comparable<? super T>> int methodName 
```

谁能启发我或指出一个合适的阅读地点？我发现用谷歌搜索这个特定问题有点恶心。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:40:58.220

您正在寻找[**java 中的泛型**](http://docs.oracle.com/javase/tutorial/java/generics/)。

来到你的返回类型它是一个**int**。

`<T extends Comparable<? super T>>` 不是您的方法的返回类型，您正在声明`T`可以在方法主体中使用的泛型类型。并且您的泛型类型声明类型 T 应该是实现 Comparable 接口的 Object 。

```
public static <T extends Comparable<? super T>> int methodName
 ^                 ^                              ^
Access spec        Generic Type decl               return type 
```

# ios - 拦截来自 UIWebView 的衍生 URL 请求

> ID：15946669
> 
> 赞同：3
> 
> 时间：2013-04-11T10:39:53.630
> 
> 标签：ios, objective-c, uiwebview, nsurlrequest, nsurlcache

我正在尝试通过 NSURLProtocol 将指定的网页缓存到磁盘，现在我只能获取第一个 URL 请求，但 UIWebView 会产生更多用于加载图形的 URL 请求。那么如何拦截 UIWebView 从第一个 URL 产生的所有请求呢？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:42:53.503

实现委托方法

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; 
```

每次您的 webview 加载 url 时，它都会首先调用此方法。

# c# - 在 C# 中使用 DLL 库

> ID：15946670
> 
> 赞同：-3
> 
> 时间：2013-04-11T10:39:56.320
> 
> 标签：c#, dll, event-handling

我有一个 DLL 库作为作业给我。我被告知 DLL 具有引发事件的能力。我需要能够处理这些事件。我正在用 C# 编码。

任何人都可以请我指向任何可以达到目的的在线教程。

Atm，我得到的所有谷歌结果都是 -*如何制作 DLL*或*如何在 C# 中使用 C++ dll；*他们没有帮助我达到目的。

任何人都可以帮忙吗？

是的，我知道如何添加参考并且可以将其连接到我的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:52:38.767

通过右键单击项目中的引用文件夹来添加对项目的引用。导航到 dll 并添加它。现在您可以像使用解决方案中的项目一样使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:44:38.897

由于您知道如何添加引用，因此您只需使用“使用 [Class Namespace]”将引用添加到您的类，并将事件添加到事件处理程序。

此链接可以帮助您完成这部分： http: [//msdn.microsoft.com/en-us/library/ms743596 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms743596(v=vs.100).aspx)

# visual-studio-2012 - 创建或增强 LightSwitch 项目的最佳实践

> ID：15946673
> 
> 赞同：0
> 
> 时间：2013-04-11T10:40:01.367
> 
> 标签：visual-studio-2012, msbuild, visual-studio-lightswitch

我正在研究使用 Microsoft LightSwitch 作为自动化 UI/代码生成器的目标。应用程序构建者可能会创建 LightSwitch 解决方案和项目，并且可能会创建或修改现有的 .lsml 文件。这样做的最佳做法是什么？是否记录了 LightSwitch 标记语言？

与桌面相反，LightSwitch HTML 可能会成为目标，但也可能两者兼而有之。LightSwitch 因其跨设备 UI 功能而备受关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:49:32.857

在 Microsoft LightSwitch 论坛中回答：

[http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/0b47f106-f6ba-4246-93ba-1e43dce6bfcb](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/0b47f106-f6ba-4246-93ba-1e43dce6bfcb)

# java - 寻求帮助调用带有来自 java 类的参数的 perl 脚本

> ID：15946674
> 
> 赞同：0
> 
> 时间：2013-04-11T10:40:04.663
> 
> 标签：java, perl, perl-module

我必须从 Java 类调用 Perl 脚本。我可以使用

```
final ProcessBuilder builder = new ProcessBuilder("perl", "/home/abc.pl"); 
```

我想知道我是否可以传递类似的参数

```
new ProcessBuilder("perl", "/home/abc.pl  x y"); 
```

但它抛出了一个错误。

有人可以建议如何做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:42:32.550

从[文档中](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ProcessBuilder.html)：

> `ProcessBuilder pb = new ProcessBuilder("myCommand", "myArg1", "myArg2");`

您正在调用的程序的每个参数都需要是 ProcessBuilder 构造函数的单独参数。

```
new ProcessBuilder("perl", "/home/abc.pl", "x", "y"); 
```

否则，您调用的等价物`perl "/home/abc.pl x y"`将无法找到名为“/home/abc.pl x y”的文件（因为 x 和 y 是不同的参数，而不是文件名的一部分）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:01:54.217

使用以下代码从 java 执行您的 perl 代码。

```
final List<String> commands = new ArrayList<String>();                

commands.add("perl");
commands.add("/home/abc.pl");
commands.add("x");
commands.add("y");
ProcessBuilder pb = new ProcessBuilder(commands); 
```

# java - 关于类级别锁定

> ID：15946677
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:40:16.493
> 
> 标签：java, multithreading

在一次Java面试中，有人用线程的上下文询问有一个类ABC由两个静态同步方法组成 `m1()`，`m2()`并且有两个线程`T1`，`T2`如果`T1`对方法进行锁定，`m1()`那么是否可以`T2`同时获取锁定`m2()`方法，我回答说，因为`m1()`和`m2()`是静态同步的，所以它们具有类级别`T1`的锁定，所以如果线程锁定`m1()`方法，那么没有其他线程可以`m1()`同时锁定，直到`T1`从方法释放锁定`m1()`但同时时间线程`T2`可以锁定方法`m2()`，请指教正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:44:48.070

错误...同步方法上的锁会阻塞所有其他同步方法调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:10:59.483

在 Java中获取的不是*方法*上的锁，而是*对象*上的锁。同步静态方法隐式使用类对象作为锁。自然地，同一个类中的两个方法都会竞争同一个锁，并且不允许同时执行。

# error-handling - 如何在 kohana 3.3 中处理 500 错误的自定义错误页面

> ID：15946678
> 
> 赞同：0
> 
> 时间：2013-04-11T10:40:23.963
> 
> 标签：error-handling, custom-error-pages, kohana-3.3

如何在 kohana 3.3 中使用自定义错误页面来处理 500 错误。我尝试使用自定义错误页面来处理 404 错误及其工作。我刚刚参考了[kohana 官方网站](http://kohanaframework.org/3.3/guide/kohana/tutorials/error-pages)，但我不知道如何处理 500 错误。如果有人对此提供帮助，那将非常有帮助。预先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T18:58:09.650

您必须覆盖 HTTP_Exception_500 类

```
class HTTP_Exception_500 extends Kohana_HTTP_Exception_500 {

    public function get_response()
    {
        //your code like in official guide by 404 page
    }
} 
```

类的路径 - APPPATH/classes/HTTP/Exception/500.php

# c# - 嵌入式语句错误

> ID：15946679
> 
> 赞同：-7
> 
> 时间：2013-04-11T10:40:25.627
> 
> 标签：c#, c#-2.0, icomparable

我有一个简单的自定义列表类，我正在尝试实现`IComparable`它，但老实说它不起作用。我试过 MSDN 和其他博客，还是一样。

```
public class sortDateTime : IComparable
{
    protected DateTime m_startDate, m_endDate;

    public DateTime startDate
    {
        get { return m_startDate; }
        set { m_startDate = startDate; }
    }

    public DateTime endDate
    {
        get { return m_endDate; }
        set { m_endDate = endDate; }
    }

    public int CompareTo(object obj)
    {
        if(obj is sortDateTime)
            sortDateTime sDT = (sortDateTime) obj; //here ERROR

         return m_stDate.CompareTo(sDT.m_stDate);
    }
} 
```

遵循[此示例](http://msdn.microsoft.com/en-us/library/ey2t2ys5%28v=vs.80%29.aspx)，但收到错误：

> 嵌入语句不能是声明或标签语句

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:47:22.117

请看一下这段代码，导致错误：

```
if(obj is sortDateTime)
    sortDateTime sDT = (sortDateTime) obj; //here ERROR

return m_stDate.CompareTo(sDT.m_stDate); 
```

你说的是这样的：

```
if the object is of type 'sortDateTime'
    Allocate memory for variable 'sDT'
    Cast 'obj' to type 'sortDateTime' 
    Store the result in variable 'sDT' 
```

然后您将离开范围-不再需要该变量（它在“堆栈”上分配并被释放）。这根本不符合逻辑。这是一个操作，它会被白白执行。您想要做的是以下内容：

```
// Variable for remembering the "cast result" after the cast
sortDateTime sDT = null;

if (obj is sortDateTime)
    sDT = (sortDateTime)obj;  // Cast the object.
else
    return 0;                 // "obj" is not an "sortDateTime", so we can't compare.

// Return the comparison result, if we can compare.
return m_stDate.CompareTo(sDT.m_stDate); 
```

编译器注意到您无法执行此类操作并引发错误。但是，这将编译：

```
if (obj is sortDateTime)
{
    sortDateTime sDT = (sortDateTime)obj;
} 
```

但这也没有意义，并导致编译器错误

```
m_stDate.CompareTo(sDT.m_stDate);  // sDT is not a variable in scope. 
```

这就是我将如何实现该方法：

```
sortDateTime sDT = obj as sortDateTime;  // 'as' leads to an casted object, or null if it could not cast

if (sDT == null)
    throw new NotSupportedException("The object is not an sortDateTime");
else
    return m_stDate.CompareTo(sDT.m_stDate); 
```

干杯!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T10:46:06.060

在不检查您的逻辑的情况下，我将修复语法错误。

这：

```
public int CompareTo(object obj)
{
    if(obj is sortDateTime)
        sortDateTime sDT = (sortDateTime) obj; //here ERROR

    return m_stDate.CompareTo(sDT.m_stDate);
} 
```

应该：

```
public int CompareTo(object obj)
{
    if (obj is sortDateTime)
    {
        sortDateTime sDT = (sortDateTime) obj;
        return m_startDate.CompareTo(sDT.m_startDate);
    }
    else
    {
        throw new ArgumentException("object is not a sortDateTime ");   
    }
} 
```

更仔细地查看您链接的页面。你没有正确地遵循它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:42:11.273

这样做：

```
if(obj is sortDateTime) {
     sortDateTime sDT = (sortDateTime) obj; //here ERROR
} 
```

它会消失的。

有关编译器*为何*以这种方式运行的更具体解释，请查看： [Why this compile error](https://stackoverflow.com/questions/8823427/why-this-compile-error)

遵循`C#`标准命名约定：不要以非大写字母开头的类型命名，因此请更改`sortDateTime`->`SortDateTime`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T10:51:32.573

试试这个：

```
public int CompareTo(object obj)
{
    sortDateTime sDT = null;
    if(obj is sortDateTime)
        sDT = (sortDateTime) obj; //here ERROR

    if(sDT != null)
    {
        return m_stDate.CompareTo(sDT.m_stDate);
    }
    else
    {
        throw new ArgumentException("object is not a sortDateTime type.");
    }
} 
```

# java - 属性文件中的属性未更改

> ID：15946684
> 
> 赞同：0
> 
> 时间：2013-04-11T10:40:56.233
> 
> 标签：java, properties

我有一个手动创建的属性文件。我可以通过 getProperty() 函数获取文件中的属性，但我无法更改它！我尝试使用 setProperty() 函数，但文件没有更改。

你能帮我吗？

谢谢！

紫皮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:44:01.633

您需要再次使用`store()`（其中有两种变体）编写属性文件。该`setProperty()`方法更改存储在内存中的属性值，而不是加载属性的文件中的属性值。

如需进一步阅读，请参阅[属性教程](http://docs.oracle.com/javase/tutorial/essential/environment/properties.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:44:34.350

SetProperty() 只会在运行时设置属性。它不会去覆盖你的文件属性。它不会修改您的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:44:48.423

您是否尝试 `prop.store(new FileOutputStream("config.properties"), null);`在调用方法之后调用类似的东西`prop.setProperty`？因为这是您刷新文件更改的方式。

不调用存储更改仅在应用程序内存中可见。

# javascript - 表格行中的 onClick 在 JavaScript/jQuery 中不起作用

> ID：15946688
> 
> 赞同：0
> 
> 时间：2013-04-11T10:41:12.867
> 
> 标签：javascript, jquery

链接在此示例中有效，但 onClick 不执行任何操作。当我在 alert() 中显示 productURL[i] 时，它会显示正确的 URL。有什么建议么？

```
var output='<table class="api-table">';
output+='<thead><tr><th colspan="2">' + productSubstrateName + '</th></tr></thead>';
for (var i=0;i<productURL.length;i++) {
output+='<tr>';
output+='<td style=\"cursor:pointer;\" onClick=\"'+productURL[i]+'\"><a href="'+productURL[i]+'">'+productSubstrateAmounts[i]+'</a></td>';
    output+='<td style=\"cursor:pointer;\" onClick=\"'+productURL[i]+'\"><a href="'+productURL[i]+'">'+productSubstratePrices[i]+'</a></td>';
    output+='</tr>';
}

 output+="</table>";

 $('#'+outputdiv).append(output); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:45:07.313

> 但 onClick 什么也不做。

它什么也没做，因为你在那里什么也没做……你只是在打印价值……

```
 onClick=\"'+productURL[i]+'\"
        //--^^^^^^^^^^^---- 
```

如果你需要做某事，那么你可以在那里调用一个函数

```
 onClick="myFunction("'+productURL[i]+'")" 
```

和你的功能

```
 function myFunction(obj){
    alert(obj);
 } 
```

你不必在`\`那里使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:04:57.697

初学者的错误，谢谢bipen，我忘记了document.location.href。:-(

```
 for (var i=0;i<productURL.length;i++) {
            output+='<tr>';
            output+='<td style="cursor:pointer;" onClick="document.location.href=\''+productURL[i]+'\';"><a href="'+productURL[i]+'">'+productSubstrateAmounts[i]+'</a></td>';
            output+='<td style="cursor:pointer;" onClick="document.location.href=\''+productURL[i]+'\';"><a href="'+productURL[i]+'">'+productSubstratePrices[i]+'</a></td>';
            output+='</tr>';
        } 
```

# c# - 在aspx页面中使用c#仅在> 0时显示

> ID：15946689
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:41:14.513
> 
> 标签：c#, html, asp.net-mvc

```
<div style="position:absolute; right:0; top:0; border:1px solid;  border-color:#EBEBFF; padding-left:2px; padding-right:2px;"><%:NumerofDeliveries%></div> 
```

ATM 我的 div 将显示“NumberOfDeliveries”。我想将其更改为仅显示 > 0。

我试过...

```
 <% if (NumerofDeliveries > 0) %>
    <% { %>
    <% <div style="position:absolute; right:0; top:0; border:1px solid;  border-color:#EBEBFF; padding-left:2px; padding-right:2px;"><%:NumerofDeliveries%></div> %> 
    <% } %> 
```

但我得到了关于预期半结肠的错误。也`<%:NumerofDeliveries%>`抛出了同样的问题`;`

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:47:36.080

我不熟悉本机 MVC 语法（主要是剃刀），但我怀疑您需要将 HTML 标记从代码块中取出：

```
<% if (NumerofDeliveries > 0) %>
<% { %>
<div style="position:absolute; right:0; top:0; border:1px solid;  border-color:#EBEBFF; padding-left:2px; padding-right:2px;"><%:NumerofDeliveries%></div>
<% } %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T12:10:29.490

您应该提供`<div>`一个 ID，然后将其设置为在`Page_Load`事件中可见。假设您的 div-id`"a"`然后将以下代码写入`Page_Load`：

```
if(NumerofDeliveries > 0)
{
    a.visible=true;
}
else
{
    a.visible=false;
} 
```

# javascript - Javascript游戏有什么问题吗？

> ID：15946694
> 
> 赞同：0
> 
> 时间：2013-04-11T10:41:31.407
> 
> 标签：javascript, html

这是我的一个小游戏的 HTML 和 javascript 代码，但是有问题，我到处搜索以找到问题，但找不到！？真是令人沮丧！希望你们能帮助我吗？

这是 HTML：

```
<html>
<head>
<meta charset="utf-8">
<title>Programmeren</title>
<link href="static/css/style.css" rel="stylesheet" type="text/css">

<script src="static/js/game.js"></script>

</head>
<body>
<div class="wrapper">
  <header id="header">
    <h1>program</h1>
    <div id="berichtvenster">

    </div>
  </header>
</div>
<footer>
  <p>Copyleft <span class="copy">&copy;</span> 2013, all wrongs reversed.</p>
</footer> 
```

这是Javascript：

```
window.onload = function () {
    'use strict';

    var toonBoodschap = function (tekst) {
        var berichtvenster = document.getElementById('berichtvenster');
        berichtvenster.innerHTML += "<p>" + tekst + "</p>\n";
    };

    var attack = {};
    attack.keuze = prompt("Je volk wordt aangevallen door goblins uit de bergen van doom!         Ga je vechten, vluchten of battlen?").toLowerCase();

    switch (attack) {

    case 'vechten':
        var zwaard = {};
        zwaard.vechter prompt("Heel goed! Heb je sterke zwaardvechters (ja of nee)?").toLowerCase();
        if (zwaard.vechter === "ja") {
            toonBoodschap("Je bent goed voorbereid! Het volk duimt voor je! KOM OP!!");
        } else {
            toonBoodschap("Aaah, zo ga je het niet overleven. Evengoed succes!");
        }
        break;

    case 'vluchten':
        var ren = {};
        ren.hard = prompt("Kan je hard rennen? (ja of nee)?").toLowerCase();
        if (ren.hard === 'ja') {
            toonBoodschap("Je leeft nog! Maar of je volk hetzelfde kan zeggen blijft onbekend...");
        } else {
            toonBoodschap("Dat is jammer, je ziet eruit als een sprinter. Maar blijkbaar niet.");
        }

        break;
    case 'battlen':
        var vecht = {};
        vecht.snel prompt("Okay! Kan je vechten!? (ja of nee)?").toLowerCase();
        if (vecht.snel === 'ja') {
            toonBoodschap("Wow! Dat scheelde weinig. Volgende keer iets minder drinken!");
        } else {
            toonBoodschap("Het lijkt erop dat je karate lessen moet nemen!");
        }
        break;

    }

    var feedback = {};
    feedback.score = prompt("Beoordeel het spel van 1 tot 10");

    if (feedback.score >= 10) {
        toonBoodschap("Dit is slechts het begin van mijn game ontwikkeling, kijk uit voor meer!");
    } else {
        (feedback.score <= 10);
        toonBoodschap("Ik heb als een slaaf geleefd om deze game te maken! En dit is je score! Wacht maar jij!");
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:44:32.010

我可以看到一个问题：

```
vecht.snel prompt("Okay! Kan je vechten!? (ja of nee)?").toLowerCase(); 
```

应该：

```
vecht.snel = prompt("Okay! Kan je vechten!? (ja of nee)?").toLowerCase(); 
```

编辑：只需检查您正在向正确分配值的 JS 对象添加提示的所有行。缺少几个“=”。

# java - ObjectOutputStream 不会保存我的 arrayList

> ID：15946697
> 
> 赞同：0
> 
> 时间：2013-04-11T10:41:37.233
> 
> 标签：java, arraylist, objectoutputstream

我的 UserArchive 类中有这个 arrayList，我的 MainWindow 类中有一个 saveFile() 方法。我的问题是，每次我关闭程序时，src/customerlist.txt 中显示的所有内容都是：¨ÌsrUserArchiveYï≈ùÅ—ÀDLlisttLjava/util/ArrayList;xpsrjava.util.ArrayListxÅ“ô«aùIsizexpw x。

这是我的代码：任何人都可以发现任何问题吗？

```
public class UserArchive implements Serializable {
ArrayList<User> list = new ArrayList<User>();

public void regCustomer(User u) {
    list.add(u);
}

    public String toString() {
    sorter();
    String users = "";
    Iterator<User> iterator = list.iterator();

    while (iterator.hasNext()) {
        users += iterator.next().toString() + "\n";
    }
    return users;
} 
```

主窗口类：

```
public class MainWindow extends JFrame {
private SaleWindow sW;
private UserArchive userA;
int customerID = 0; 
```

////

```
 public void saveFile() {
    try {
        FileOutputStream outStream = new FileOutputStream(
                "src/customerlist.txt");
        ObjectOutputStream utfil = new ObjectOutputStream(outStream);
        utfil.writeObject(userA);
        utfil.close();
    } catch (NotSerializableException nse) {
        JOptionPane
                .showMessageDialog(this, "Objektet er ikke serialisert!");
    } catch (IOException ioe) {
        JOptionPane
                .showMessageDialog(this, "Problem med utskrift til fil!");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:44:41.637

是的，因为 ObjectOutputStream 以二进制形式序列化对象。如果您想以某种 ASCII 形式进行序列化，请尝试使用 JSON 序列化器，例如[Jackson](http://wiki.fasterxml.com/JacksonInFiveMinutes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:55:46.873

请看一下 Java 的序列化机制。您不是在编写字符串**内容**，而是以二进制形式编写字符串**对象**（和周围的列表）。

如果您只想编写纯文本文件，那么 ObjectOutputStream 是错误的选择。仔细查看 java.io.FileWriter 或 java.io.PrintWriter。

# django - Django：表单集中每个表单的不同表单字段小部件

> ID：15946698
> 
> 赞同：1
> 
> 时间：2013-04-11T10:41:39.280
> 
> 标签：django, django-forms

我正在努力为我想要的东西找到最好的方法。我可以为此使用一些帮助。

我有 A 型和 B 型。B 型有

```
modela = forms.ForeignKey(Model a) 
```

我想创建一个视图，您可以在其中编辑单个模型 A 和多个模型 B 在同一页面上。Django 有这方面的表单集，它们工作得很好。

不过，我有一个细节，这会让事情变得有点混乱。即 - 我希望小部件或模型 B 字段根据它们在同一对象的先前字段中所做的选择而有所不同。因为 - 基于类型，小部件必须是日期时间选择器输入或纯文本输入。

模型 B 如下所示：

```
class ModelB(models.Model):
    m0odela = models.ForeignKey(ModelA)
    target_value = models.CharField()
    target_type = models.CharField( choices = ( there are choices))
    target_threshold = models.CharField() 
```

我知道我可以为表单集提供我自己的表单，并且我可以在该表单中执行此小部件分配。

但问题是，当表单集没有实例/查询集时，我无法检查是否为表单实例设置了“target_type”。所以我必须根据 self.data 或 self.initial 的形式来做。但是 self.initial 也不存在于`form.__init__()`. 我可以使用的是 self.data - 但那是原始 request.POST 或 request.GET 数据 - 其中包含所有键，如“mymodelb_set-0-target_type”。

所以我有点迷路了。我是否必须进行一些关键解析并找出哪个 -target_type 属于当前表单并在那里获取选择的值并根据该值分配小部件？还是我必须创建自己的 BaseInlineFormSet 子类并以某种方式覆盖 _construc_form ？因此，该表单将具有 **kwargs 中相关数据的初始键。

以前有人遇到过这种问题吗？

艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:20:52.013

好吧，我必须解决它，所以我尽可能地解决了它。

我创建了自己的内联表单集子类：

```
class MyInlineFormSet(BaseInlineFormSet):
    def _construct_form(self, i, **kwargs):
        initial = {}
        fname = '%s-%s-%s' % (self.prefix, i, 'important_field_name')
        initial['target_type'] = self.data[fname] if fname in self.data.keys() else 'km'
        kwargs.update({'initial':initial})
        form = super(MyInlineFormSet, self)._construct_form(i, **kwargs)
        return form 
```

然后在表单类中：

```
class MyNiftyForm(forms.ModelForm):
    class Meta:
        model = MyAwesomeObject
        fields=('field_one', 'field_two', 'field_three')

    def __init__(self, *args, **kwargs):
        super(ServiceTargetForm, self).__init__(*args, **kwargs)
        if self.instance:
            if self.instance.field_one == 'date':
                self.fields['field_one'].widget.attrs['class'] = 'datepicker'
        if self.initial:
            if self.initial['field_one'] == 'date':
                self.fields['field_one'].widget.attrs['class'] = 'datepicker' 
```

然后在视图中：

```
MySuperCoolFormSet = inlineformset_factory(ImportantObject, MyAwesomeObject, extra = 1, form = MyNiftyForm, formset = MyInlineFormSet) 
```

它有效。

艾伦

# content-management-system - 在 Kentico 中登录/身份验证后设置 SSL

> ID：15946700
> 
> 赞同：1
> 
> 时间：2013-04-11T10:41:41.920
> 
> 标签：content-management-system, kentico

我的要求是，一旦用户登录并通过身份验证，URL 应更改为 SSL，当他注销时，URL 将返回 HTTP。

我知道 webpart 中的属性，我们可以在其中设置 YES/NO/INHERITS/NEVER。

我可以永久设置 HTTPS，但不能动态设置。

任何建议/帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:41:47.220

我不知道 Kentico 中有任何功能可以执行此操作，但您应该能够创建一个 webpart 并将其放置在母版页上。此 Web 部件将只检查当前用户，如果有登录的用户重定向到 https 版本，反之亦然。

您还可以添加一些逻辑以确保它不会在 cmsdesk 的编辑选项卡中执行此操作。

您可以检查用户

```
CMSContext.CurrentUser 
```

可以在以下位置找到有关重定向到安全页面的一些帮助

[asp.net c#从http重定向到https](https://stackoverflow.com/questions/5305443/asp-net-c-sharp-redirecting-from-http-to-https)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:36:03.397

正如rocky所说，没有开箱即用的功能可以为您做到这一点。

您需要创建一个 Web 部件，就像 Lukek 建议的那样，检查用户是否已登录并将他们重定向到 https 地址。

下面的代码将重定向。

```
if (!Request.IsLocal && !Request.IsSecureConnection)
{
    string redirectUrl = Request.Url.ToString().Replace("http:", "https:");
    Response.Redirect(redirectUrl);
} 
```

正如建议的那样，您需要检查 CMSContext.CurrentUser 但是我也会使用 HttpContext.User 属性。

这将强制请求为 https。

# javascript - Jquery 表单提交只工作一次

> ID：15946702
> 
> 赞同：3
> 
> 时间：2013-04-11T10:41:49.523
> 
> 标签：javascript, jquery, jquery-mobile, onclick, form-submit

我正在制作一个网页，显示在表格中搜索某些搜索词的频率。该表上方是 2 个单选按钮，用户可以通过这些按钮选择是否要查看不同的搜索结果或所有结果。

使用此 javascript 时：

```
$(function() {
    $('.distinct_radio').change(function() {
        console.log("submit distinct_radio");
        this.form.submit();
    });
}); 
```

它工作正常。我可以一遍又一遍地切换，正确切换表值。但是，如果我使用这个 javascript：

```
$(function() {
    $('.distinct_radio').change(function() {
        console.log("submit distinct_radio");
        $('form#searchTermForm').submit();
    });
}); 
```

形式定义为

```
<form id="searchTermForm" action="/searchterms.php" method="POST">
    <div class="configDiv"> 
        <input name="distinct" id="radio-choice-v-2a" class="distinct_radio" value="false" <?php if (strcmp($distinct, "false") == 0) {echo "checked=\"checked\"";}?> type="radio">
        <label for="radio-choice-v-2a">Show total number of searches.</label>
        <input name="distinct" id="radio-choice-v-2b" class="distinct_radio" value="true" <?php if (strcmp($distinct, "true") == 0) {echo "checked=\"checked\"";}?> type="radio">
        <label for="radio-choice-v-2b">Show number of different people</label>
    </div>
</form> 
```

一些相关的php：

```
<?php
    if(isset($_POST['distinct'])){
        $distinct   =   $_POST['distinct'];
    } else {
        $distinct   =   "false";
    }
?> 
```

我正在使用的 Javascript：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/custom.js"></script>
<script type="text/javascript" src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script> 
```

将此更新到 jquery mobile 1.3.1 并不能解决问题。

第一次单击单选按钮时它工作正常。之后，就完全没有反应了。如果我手动刷新页面，它会再次工作一次。

使用第一个脚本，消息“submit distinct_radio”会打印在控制台上，并且控制台会被提交本身清除。

使用第二个脚本，控制台上会打印消息“submit distinct_radio”，但不会清除控制台。它打印该消息，并完成 POST 请求。但是，POST 请求确实完成了，并且网页已正确更新。再次单击不会导致在控制台打印任何消息，也不会完成任何请求。

使用第二个脚本，如果我将“操作”之后的路径更改为某个不存在的路径，则每次单击都会打印一条控制台消息，并伴随着对不存在位置执行 POST 请求的新尝试。

我在 FireFox、Chrome 和 Opera 中遇到了这个问题。

除了好奇，我想在用户单击表头进行排序时使用它来提交表单。从那里，我不能使用“this.form.submit();”

如何解释这种行为？

编辑：

感谢@peddle（请参阅下面的答案）：在 Jquery Mobile 中似乎存在一些问题。删除对 j​​query.mobile-1.3.0.min.js 的引用使其一遍又一遍地工作（因此非常难看）。Javascript 参考就像[http://jquerymobile.com/blog/2013/04/10/announcing-jquery-mobile-1-3-1/](http://jquerymobile.com/blog/2013/04/10/announcing-jquery-mobile-1-3-1/)建议的那样，所以 jqm 1.3.1 和 jquery 1.9.1 是为了合作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:31:08.320

这不是答案，但需要比评论更多的空间，您是否尝试过以下操作以查看是否有任何不同：

```
$(function(){
  $('.distinct_radio').change(function() {
     console.log("submit distinct_radio");
    $('form#searchTermForm').get(0).submit();
  });
}); 
```

您的示例中的前者使用纯 JavaScript 提交表单，后者使用 jQuery 的提交版本。以上使用jQuery查找表单，但应该使用JavaScript提交方法。以上应测试以下内容：

1.  如果上述方法没有问题，那么您的问题在于 jQuery 的提交。
2.  如果上述方法失败，但产生`undefined object`错误，则 jQuery 找不到表单。
3.  如果上述方法失败但没有错误，那么您会发生一些*非常*奇怪的事情，或者由于某种原因没有对 JavaScript 进行评估。

### 更新

另一件事要尝试：

```
$(function(){
  $('.distinct_radio').change(function() {
     console.log("submit distinct_radio");
    $('form#searchTermForm').trigger('submit');
  });
}); 
```

现在我希望上面有同样的问题，`$().submit()`但你永远不知道。可能导致问题的另一件事是您的表单标记中似乎没有提交按钮。虽然从逻辑上讲这不应该对这种情况产生任何影响，但如果您通读 jQuery .submit 页面，他们会得到以下引用：

[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

> 根据浏览器的不同，如果表单只有一个文本字段，或者只有当存在提交按钮时，Enter 键可能只会导致表单提交。界面不应依赖此键的特定行为，除非问题是通过观察按下 Enter 键的 keypress 事件来强制执行的。

虽然上面只讨论了使用 enter 键，但浏览器/jQuery 可能在提交按钮丢失时还有其他奇怪/差异。但是我正在到达。

除了上述之外，jQuery 和 jQuery Mobile（您的特定版本）之间可能存在一些干扰，或者它可能是 jQuery 1.9.1 中的一个错误（我不能说我在生产中使用了这么多）。如果你调查`$().trigger()`在 using 时使用的方法的来源`$().submit()`，你会发现它做了很多“魔法”——这就是为什么当你可以使用纯 JavaScript 方法时可能会更好。

# delphi - 形式向后移动并保持活跃

> ID：15946703
> 
> 赞同：0
> 
> 时间：2013-04-11T10:41:55.507
> 
> 标签：delphi, vcl, delphi-xe3, z-order, delphi-6

我有一个较大的 Delphi 6 应用程序，已移植到 Delphi XE3。在某一时刻，主表单会启动另一种非模态表单。有时（比如 50%）在一两秒后新创建的表单会移动到主表单后面。即使它现在在后面，新创建的表单仍然具有焦点，因此没有激活/停用事件。有一些计时器控件，我已禁用它们。它仍然发生。

我可以接受我的代码正在这样做——但我怎样才能知道发生了什么？当新表格移到后面时，有没有办法拦截？

需要明确的是：我希望两种形式分别使用。它们中的任何一个都可以出现在另一个后面。目前正在发生的事情是 z 顺序似乎正在发生变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:30:02.737

我已经找到了答案。我发现我添加了一个执行此操作的 CreateParams 覆盖：

```
 // make a taskbar window
 inherited CreateParams( params );
 params.ExStyle := params.ExStyle or WS_EX_APPWINDOW;
 params.WndParent := GetDesktopwindow; // this line caused the problem 
```

评论 WndParent 解决了它。虽然效果很奇怪。就好像有一个计时器在任何键或鼠标事件迫使窗口落后于其他事件之后大约一秒钟。感谢 David Heffernan，他关于步进 CreateParam 的评论让我注意到了这一点。

# java - 类和内部类的内存大小

> ID：15946706
> 
> 赞同：0
> 
> 时间：2013-04-11T10:42:08.157
> 
> 标签：java

我现在正在做一个在线课程，讲师说在 Java 中一个类的内存开销是 32 个字节，但一个内部类只有 16 个字节。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:57:26.977

详细信息是特定于 JVM 的。但是，给出的数字看起来不可信：内部类需要引用外部类的封闭实例，因此需要比顶级类*更高的开销。*

# delegates - F# 创建一个带 void return 的委托

> ID：15946710
> 
> 赞同：1
> 
> 时间：2013-04-11T10:42:23.517
> 
> 标签：delegates, f#

我正在尝试编写一个应该使用 C#/.Net dll 的 f-sharp 程序。C# 代码如下所示：

```
public delegate void OnX (X x);
public delegate void OnXError (X x, string error);
public Foo(OnX onX, OnXError onXError); 
```

我目前在 F# L 中的尝试如下所示：

```
let OnX (x:X) =
   ()
let OnXError (x:X) (error:sting)=
   ()
let foo=new Foo(OnX,OnXError) 
```

这不编译。OnX 具有类型 x -> unit 而不是 OnX。我也尝试在单独的绑定中创建委托，但还没有找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:03:51.220

您可以显式创建委托：

```
let d1 = new OnX(fun (x: X) -> ())
let d2 = new OnXError(fun (x: X) (error: string) -> ()) 
```

# java - 为什么反射不提供查询继承层次结构中所有字段的方法？

> ID：15946715
> 
> 赞同：0
> 
> 时间：2013-04-11T10:42:38.487
> 
> 标签：java, reflection

我试图`private`使用具有给定名称的反射来查找字段，该名称也可能位于父类中或继承层次结构中的其他位置。

但我发现没有这样的方法`Class`可以提供这些信息。

`Class#getDeclaredFields()`- 提供所有字段`private`，`public`但*不*包括继承层次结构

`Class#getFields()`- 包括继承层次结构，但只搜索`public`字段。

那么为什么没有提供两种类型信息的方法呢？

我知道这很容易实现，并且有提供此功能的库，但仍然可以包含在 java 本身中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:51:39.517

这是因为子`class`级不知道`private`父级中的任何字段`class`- 它不会继承它们。

手头的问题可以通过遍历类层次结构很容易地解决`getSuperClass`

```
public static Field getField(final Class<?> toReflectOn, final String fieldName) throws NoSuchFieldException {
    try {
        return toReflectOn.getField(fieldName);
    } catch (NoSuchFieldException ex) {
        if (toReflectOn.getSuperclass() != null) {
            return getField(toReflectOn.getSuperclass(), fieldName);
        }
        throw ex;
    }
} 
```

[This](https://stackoverflow.com/questions/3567372/access-to-private-inherited-fields-via-reflection-in-java) other SO post提供了一种更复杂的方法，可以遍历类层次结构中的所有字段。

# flash - 发布 RSL 中的堆栈跟踪

> ID：15946717
> 
> 赞同：2
> 
> 时间：2013-04-11T10:42:49.133
> 
> 标签：flash, apache-flex, stack, trace, rsl

从 Flash Player 11.5 开始，可以获取未捕获错误的堆栈跟踪，非常方便地记录生产中的运行时错误，并且对调试有很大帮助。但我在 atm 面临的问题是堆栈跟踪仅包含来自应用程序 .swf 的信息（如果它被编译为 -swf-version=18），但如果错误是在一段代码中引发的RSL，其堆栈跟踪被跳过。

这意味着我最终得到了应用程序中触发事件的堆栈跟踪（如果幸运的话），然后是没有太大帮助的通用框架堆栈跟踪。

已尝试在 rslComplete 上将未捕获的事件处理程序连接到 rsl 本身，没有变化。有任何想法吗

# sql-server - 如何获得具有多行结果的查询的结果，其中一行由一个分隔符分隔但还有另一列？

> ID：15946718
> 
> 赞同：0
> 
> 时间：2013-04-11T10:42:49.377
> 
> 标签：sql-server

我有两张桌子：

```
Employers:
emp_id:     emp_name:
1           Smith
2           John
3           Terry
4           Sue 
```

还有一个，

```
Skills:
emp_id:  skill:
1        10
1        12
1        14
2        5
2        15 
```

我想得到一个返回这个的查询：

```
emp_id:  skill:
1        10,12,14
2        5,15 
```

到目前为止，我可以使用以下方法将技能值作为字符串获取：

```
SELECT STUFF((SELECT DISTINCT  ', ' + skill) AS [text()]
FROM employers inner join skills where emp_id=1
FOR XML PATH ('')),1,1,'') 
```

但这无济于事，因为我需要将项目中的值加入其他列，并且我还需要那个 emp_id。

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:51:22.823

您可以使用以下内容将值连接到一行：

```
select e.emp_id,
  e.emp_name,
  STUFF((SELECT distinct ', ' + cast(s.skill as varchar(10))
         from Skills s
         where e.emp_id = s.emp_id
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,2,'') skills
from employers e; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/938cc/7)

然后你仍然可以加入到`employers`桌子上。

或者您可以`CROSS APPLY`使用`FOR XML PATH`：

```
select e.emp_id,
  e.emp_name, 
  left(s.skills, len(s.skills)-1) skills
from Employers e
cross apply
(
  select cast(s.skill as varchar(10)) + ', '
  from  Skills s
  where e.emp_id = s.emp_id
  FOR XML PATH('')
) s (skills); 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/938cc/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:12:24.573

试试这个——

```
DECLARE @Employee TABLE
(
      emp_id INT
    , emp_name NVARCHAR(50) 
)

DECLARE @Skill TABLE
(
      emp_id INT
    , skill_id INT
)

INSERT INTO @Employee (emp_id, emp_name)
VALUES 
    (1, 'Smith'),
    (2, 'John'),
    (3, 'Terry'),
    (4, 'Sue')

INSERT INTO @Skill (emp_id, skill_id)
VALUES 
    (1, 10),
    (1, 12),
    (1, 14),
    (2,  5),
    (2, 15)

SELECT 
      e.emp_id
    , skills = 
        (
            SELECT STUFF((
            SELECT DISTINCT  ', ' + CAST(s.skill_id AS VARCHAR(10))
            FROM @Skill s
            WHERE s.emp_id = e.emp_id
            FOR XML PATH(N''), TYPE, ROOT).value(N'root[1]', N'NVARCHAR(MAX)'), 1, 2, '')
        ) 
FROM @Employee e 
```

# css - 页脚 div 不尊重 CSS 高度或最小高度

> ID：15946725
> 
> 赞同：0
> 
> 时间：2013-04-11T10:43:03.120
> 
> 标签：css, html

好的，我之前问了一个问题：

[如何使用css使div填充剩余的垂直空间](https://stackoverflow.com/questions/15923019/how-to-make-a-div-fill-the-remaning-vertical-space-using-css)

得到了我现在一直在玩的答案：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <style type="text/css" media="screen">

            html, body{
                padding: 0;
                margin: 0 auto;
                height: 100%;
            }

            #header {
                float: top;
                width: 100%;
                height: 15%;
                background-color: green;
            }

            #navbar {
                float: left;
                width: 20%;
                height: 70%;
                background-color: red;
            }

            #content {
                float: right;
                width: 80%;
                height: 70%;
                background-color: blue;
            }
            #footer {
                float: bottom;
                width: 100%;
                height: 15%;
                background-color: yellow;
            }

        </style>
    </head>
    <body>
        <div id="header"> Header </div>
        <div id="navbar"> Nav Bar </div>
        <div id="content"> Body </div>
        <div id="footer"> Footer</div>
    </body>
</html> 
```

现在 ultimatley Id 想要实现这一点：

![在此处输入图像描述](https://i.stack.imgur.com/8B3sx.png)

它覆盖了 100% 的屏幕，但我可以选择这些百分比的分布方式，即：

```
html, body{
    padding: 0;
    margin: 0 auto;
    height: 100%;
}

#header {
    float: top;
    width: 100%;
    height: 15%;
    background-color: green;
}

#navbar {
    float: left;
    width: 20%;
    height: 70%;
    background-color: red;
}

#content {
    float: right;
    width: 80%;
    height: 70%;
    background-color: blue;
}
#footer {
    float: bottom;
    width: 100%;
    height: 15%;
    background-color: yellow;
} 
```

你可以 html 和 body 的高度为 100%，从而填满屏幕。页眉的高度百分比为 15%，导航栏和正文的百分比为 70%，页脚为 15%，它们总共将构成可见屏幕的 100%...

现在一切似乎都很好，除了我的页脚：

```
#footer {
    float: bottom;
    width: 100%;
    height: 10%;
    background-color: yellow;
} 
```

如果我删除`height: 15%`然后我可以看到我的黄色背景颜色：

![在此处输入图像描述](https://i.stack.imgur.com/U7qq3.png)

如果我没有它的一些灰色。并且看起来占据了大约 20% 的屏幕：

![在此处输入图像描述](https://i.stack.imgur.com/QNY6U.png)

所以基本上我将如何让我的 div 占据我分配给它们的正确高度百分比？

我希望我有道理。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:49:27.593

你不能浮动到顶部或底部。那是不存在的。所以你必须从你的页眉和页脚中删除它。

并通过执行以下操作清除页脚：

```
footer {
  clear: both;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:00:39.463

你的问题是没有：

```
float:top; 
```

或者

```
float:bottom; 
```

你需要做的是让他们都`float:left;`

这是您的代码与更新的复制和粘贴：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Test</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
        <style type="text/css" media="screen">

            html, body{
                padding: 0;
                margin: 0 auto;
                height: 100%;
            }

            #header {
                float: left;
                width: 100%;
                height: 15%;
                background-color: green;
            }

            #navbar {
                float: left;
                width: 20%;
                height: 70%;
                background-color: red;
            }

            #content {
                float: right;
                width: 80%;
                height: 70%;
                background-color: blue;
            }
            #footer {
                float: left;
                width: 100%;
                height: 15%;
                background-color: yellow;
            }

        </style>
    </head>
    <body>
        <div id="header"> Header </div>
        <div id="navbar"> Nav Bar </div>
        <div id="content"> Body </div>
        <div id="footer"> Footer</div>
    </body>
</html> 
```

# ruby-on-rails - i18n rails 从两个不同的 yml 文件中获取翻译

> ID：15946728
> 
> 赞同：0
> 
> 时间：2013-04-11T10:43:08.177
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, rails-i18n

我正在使用 tolk 进行翻译，但 tolk 会从中获取我所有的值`en.yml`并将它们转储以`es.yml` 覆盖现有内容。

有些东西我不想被覆盖，所以当我搜索 es 翻译时，我希望 rails 可以同时查看`es.yml`和`es.defaults.yml`

（因此，我可以将我用 tolk 生成的东西隔离开来，而剩下的东西是一样的）

有没有办法我可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:31:22.800

Rails 会加载`config/locales/`目录中的每个文件，因此它可能已经按照您的建议工作了。根据 I18n 指南，您甚至可以进一步组织它：

[http://guides.rubyonrails.org/i18n.html#organization-of-locale-files](http://guides.rubyonrails.org/i18n.html#organization-of-locale-files)

但是，我认为对于重复的键结构，Rails 可能会用稍后加载的文件的值覆盖先前加载的（按文件名排序）语言环境文件的值。所以请尽量避免重复键。

# rest - App 中每个用户的 REST Api 身份验证

> ID：15946730
> 
> 赞同：0
> 
> 时间：2013-04-11T10:43:17.570
> 
> 标签：rest

我正在创建一个 REST API 服务器。对于每个应用程序，我都提供了 API 密钥和秘密。示例应用程序是 Web 应用程序、移动应用程序以及任何其他想要使用我的 api 服务的应用程序。现在我的 API 服务也需要用户认证。我该如何实施？我已经使用 hmac 签名生成完成了应用程序身份验证。现在我需要在这些应用程序上实施用户身份验证方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:32:50.860

我可以推荐你使用 OAuth 或 OAuth2 概念，因为它是标准化的并且被广泛采用。您还可以允许用户使用 Facebook、Google 帐户等登录。

# jquery - JQuery 无法在 Firefox 20 上运行

> ID：15946734
> 
> 赞同：-5
> 
> 时间：2013-04-11T10:43:41.723
> 
> 标签：jquery, firefox

自从某些天以来，我在更新 Firefox 20 的网站上遇到问题。使用此更新，JQuery 无法在此浏览器上运行。我的控制台日志中有 2 个错误，我没有此浏览器的 19 版：

```
TypeError : a.getElementsByClassName(...) is undefined
ReferenceError : JQuery is not defined
jQuery.noConflict(); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:46:55.070

jQuery 需要在任何依赖 jQuery 的脚本或代码运行之前在页面上导入/加载。但是您页面上的第一个脚本是：

```
<script type="text/javascript" src="/test/wp-content/themes/child/script/jquery.jcarousel.min.js"></script> 
```

在任何其他 jQuery 插件/代码脚本之上添加 jQuery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:09:49.107

这是原型弃用脚本中的一个错误。该脚本嗅探基于 Gecko 的浏览器并将 Element.prototype.getElementsByClassName 替换为一个空函数，这当然会破坏对元素的 getElementsByClassName 调用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T20:34:57.107

Firefox 20 中有一个关于 jQuery 的新问题。

[https://support.mozilla.org/en-US/questions/955992](https://support.mozilla.org/en-US/questions/955992)

实施该问题线程中发布的解决方案会暂时修复该问题，直到 Firefox 修复其浏览器中的错误。

# android - 根据布局的方向更改android中相机预览的方向

> ID：15946735
> 
> 赞同：0
> 
> 时间：2013-04-11T10:43:43.880
> 
> 标签：android, orientation, android-camera

我在 SurfaceView 中显示相机预览。在表面回调中，我在 surfaceChanged 函数中有以下代码：

```
 if(getResources().getConfiguration().orientation== getResources().getConfiguration().ORIENTATION_LANDSCAPE)
                    camera.setDisplayOrientation(0);
                else
                    camera.setDisplayOrientation(90); 
```

这可以正常工作，它可以纵向旋转相机。但是，当我将平板电脑转动 180 度之间进行切换时，预览的方向是错误的。是否有一个属性可以决定平板电脑是向上还是向下，这样我就可以记录地改变方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T17:39:59.550

您可以使用`getRotation()`

```
Display display = ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
int orientation = display.getRotation(); 
```

# perl - 2D 屏幕空间缩放

> ID：15946738
> 
> 赞同：0
> 
> 时间：2013-04-11T10:43:54.730
> 
> 标签：perl, graphics, screen, 2d, zooming

我需要在 perl 上绘制 2D 线到 1024x768 大小的图像中；线的坐标是 unix 时间戳，例如 x1=1365693813 y1=(some virtual center) x2=1365793815 y2=(some virtual center)。将现实生活中的坐标缩放到图像空间的公式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:32:39.303

假设`($x1,$y1)`并`($x2,$y2)`定义“视图窗口”的左下角和右上角，并且您有一个点要绘制`($x3,$y3)`where`$x1 <= $x3 <= $x2`和`$y1 <= $y3 <= $y2`。还假设您在标准图像空间中工作，其中 (0,0) 是图像的左上角。您可以找到`($xp, $yp)`像这样在图像上绘制的像素坐标：

```
# View window
my ($x1,$y1) = (1365693813, 100);
my ($x2,$y2) = (1365693815, 200);
my ($vw ,$vh) = ( $x2 - $1, $y2 - $y1 );

# Image width/height
my ($imgw,$imgh) = (1024, 768);

# Point to plot in original co-ordinates
my ($x3,$y3) = (1365693814, 150);

# Calculate point to plot in image co-ordinates
my $xp = int( ( $imgw * ($x3 - $x1)/$vw) + 0.5 );
my $yp = int( ( $imgh * ( 1.0 - ($y3 - $y1)/$vh) ) + 0.5 );

# Now plot ( $xp, $yp ), provided it is inside the graphic! 
```

# reporting-services - ssrs 查找一行中多个非空列的计数

> ID：15946742
> 
> 赞同：0
> 
> 时间：2013-04-11T10:44:03.340
> 
> 标签：reporting-services, ssrs-2008

我需要一些帮助来解决 SSRS 中的这个问题，以找到 YTD 列的 YTD(%)。

我有 SSRS 2008 tablix 区域，其中的列是州、类别、一月、二月、三月、...、十二月、年初至今。这些列具有总和和百分比值，具体取决于行。当列为 % 时，我需要帮助来计算 YTD。

例子：

州类别 一月 二月 三月...... 年初至今

MN A 200 200 0...... 400

明尼苏达州 B 21 12 0........ 33

MN A% 12.5 12.5 0........ ??

对于上面的 A、B，YTD 只是简单地添加报告项目 January+February+March+.... 将是 400 和 33，如图所示（假设只有 Jan 和 Feb 的实际值 > 0）。

对于上面的 A% 行（？？），因为这是一个百分比列，所以我的 YTD 应该是非空/非零列的平均值......在这种情况下 (12.5+12.5)/2=12.5 但我我无法找出每个类别（1 月、2 月等）的非空列的计数...我尝试了 avg、count、sum 等，但我没有得到正确的值。如果我能算出分母（这将是 1 月、2 月、...、12 月非空列的计数），那么问题将得到解决，我可以这样做：

( Jan+Feb+March+...+Dec)/Count(Jan,Feb,Mar,..,Dec)

计数应该只返回非空/非零列的计数，以便我可以进行平均计算..请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:01:40.457

我不确定你想要什么。

如果您只想找出最后一列中一行的平均值，您可以这样做：

使您想要平均的列的表达式如下：

```
Sum(Fields!Jan.Value + Fields!Feb.Value...+Fields!Dec.Value)/
 Sum(IIF(IsNothing(Fields!Jan.Value),0,1) +
     IIF(IsNothing(Fields!Feb.Value),0,1) +
     .
     .
     IIF(IsNothing(Fields!Dec.Value),0,1) 
  ) 
```

所以，在分母中，你正在这样做：

```
Sum(1+0+1+1+0...+0) 
```

即如果Field不为null则返回1，否则返回0

# jvm - Java 数组类的包是什么？

> ID：15946757
> 
> 赞同：0
> 
> 时间：2013-04-11T10:44:53.007
> 
> 标签：jvm, specifications

这个问题是针对 JVM 规范倡导者的。根据 JVMS，Java SE 7 版本，第 5.3.3 节，最后一段：

> 如果组件类型是引用类型，则数组类的可访问性由其组件类型的可访问性决定。否则，数组类的可访问性是公开的。

因此，数组类可以具有包可见性。从逻辑上讲，我希望，如果 foo.baz.MyClass 具有包可见性，那么 MyClass 的数组仅对包 foo.baz 可见。但我在规范中找不到任何支持这种观点的东西。5.3 节说，应该用来确定可见性约束的运行时包是由包的二进制名称加上定义的类加载器构建的。但是二进制名称来自类文件，而数组类没有类文件。原始类（例如，Boolean.TYPE）的类似问题，显然具有公共可见性，但我无法在任何地方找到有关它们的信息。

你能在 JVMS 中找到一个明确定义数组/原始类包的点（或者没有的原因）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:14:08.287

这不正是规范中的引用所说的吗？

> 如果组件类型是引用类型，则数组类的可访问性由其组件类型的可访问性决定。

如果您有一个类 some.pkg.SomeClass 并希望将其用作 some.pkg.SomeClass[] ，则可访问性由其组件类型的可访问性决定。在这种情况下，组件类型是 some.pkg.SomeClass。

另一种情况是原生类型，你不能向 Java 添加更多的原生类型。

# c# - 如何获取已编译 C# 代码的字符串输出？

> ID：15946759
> 
> 赞同：1
> 
> 时间：2013-04-11T10:45:04.917
> 
> 标签：c#

我正在使用**CSharpCodeProvider**类来编译 c# 代码。

例如代码是，

```
using System;

namespace Foo
{
    public class Bar
    {
        static void Main(string[] args)
        {
            Bar.SayHello();
            Console.ReadLine();
        }

        public static void SayHello()
        {
            Console.WriteLine("Hello World");
        }
    }
} 
```

我想要的是在执行后获得最终的字符串输出，在本例中为“Hello World”。**返回的CompilerResults**对象有一个输出字段，但它在线显示有关编译过程的消息。扩展名为 .exe 的输出文件也创建得很好，它显示了该字符串。

我正在寻找一种从生成的 exe 文件中提取该字符串的方法，或者任何其他方法。

**编辑：** 有没有办法在不运行该进程并从那里提取它的情况下获取输出字符串？

# c# - 用于 PDF 文件下载的自定义浏览器首选项

> ID：15946763
> 
> 赞同：0
> 
> 时间：2013-04-11T10:45:14.313
> 
> 标签：c#, selenium, webdriver, selenium-webdriver

我正在尝试使用我在其他主题中在 Stackoverflow 上找到的代码来不向用户询问下载 PDF 文件应采取的操作。

我正在使用的代码是：

```
 FirefoxProfile specialProfile = new FirefoxProfile();
 specialProfile.SetPreference("browser.helperApps.alwaysAsk.force", false);
 specialProfile.SetPreference("browser.download.manager.showWhenStarting", false);
 specialProfile.SetPreference("browser.download.folderList", 2);
 specialProfile.SetPreference("browser.download.dir", Setup.DownloadContractPath);            
 specialProfile.SetPreference("services.sync.prefs.sync.browser.download.manager.showWhenStarting", false);
 specialProfile.SetPreference("browser.download.useDownloadDir", true);

 specialProfile.SetPreference("browser.helperApps.neverAsk.saveToDisk", "application/pdf");

 return new FirefoxDriver(specialProfile); 
```

但它似乎不适用于我的情况。我正在下载的文件类型是：PDF 即使我使用上面的代码，我也会得到以下屏幕：

![在此处输入图像描述](https://i.stack.imgur.com/NNm7f.png)

有谁知道我可能做错什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T22:10:30.027

您使用的是什么 Firefox 和 Selenium 版本？

我使用的是 Firefox 20.0，默认行为是预览 pdf 文件而不是下载，所以我需要添加`specialProfile.SetPreference("pdfjs.disabled", true);`.

除此之外，您的代码对我来说非常完美。（注意我使用的是 Directory.GetCurrentDirectory() 而不是你的 Setup.DownloadContractPath）。尝试使用[sample.pdf](http://static.mozilla.com/moco/en-US/pdf/mozilla_privacypolicy.pdf)并检查首选项是否真的在您的 webdriver 打开的 Firefox 的 about:config 页面中。

这是一篇更详细的文章：[使用 Selenium WebDriver 在 Firefox 中自动下载 PDF 文件](http://yizeng.me/2014/05/23/download-pdf-files-automatically-in-firefox-using-selenium-webdriver/)

```
FirefoxProfile specialProfile = new FirefoxProfile();
specialProfile.SetPreference("browser.helperApps.alwaysAsk.force", false);
specialProfile.SetPreference("browser.download.manager.showWhenStarting", false);
specialProfile.SetPreference("browser.download.folderList", 2);
specialProfile.SetPreference("browser.download.dir", Directory.GetCurrentDirectory()); // my downloading dir
specialProfile.SetPreference("services.sync.prefs.sync.browser.download.manager.showWhenStarting", false);
specialProfile.SetPreference("browser.download.useDownloadDir", true);
specialProfile.SetPreference("browser.helperApps.neverAsk.saveToDisk", "application/pdf");

specialProfile.SetPreference("pdfjs.disabled", true); // for my Firefox 20.0
return new FirefoxDriver(specialProfile); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-04T08:24:28.517

您现在应该传递选项：

```
Dim fxOpt As New FirefoxOptions()

fxOpt.Profile.SetPreference("browser.helperApps.alwaysAsk.force", False)
fxOpt.Profile.SetPreference("browser.download.manager.showWhenStarting", False)
fxOpt.Profile.SetPreference("browser.download.folderList", 2)
fxOpt.Profile.SetPreference("browser.download.dir", Directory.GetCurrentDirectory()); // my downloading dir
fxOpt.Profile.SetPreference("services.sync.prefs.sync.browser.download.manager.showWhenStarting", False)
fxOpt.Profile.SetPreference("browser.download.useDownloadDir", True)
fxOpt.Profile.SetPreference("browser.helperApps.neverAsk.saveToDisk", "application/pdf")
fxOpt.Profile.SetPreference("pdfjs.disabled", True)

WebDrv = New Firefox.FirefoxDriver(fxOpt) 
```

# java - 如何迭代直到对象数组的长度？

> ID：15946765
> 
> 赞同：0
> 
> 时间：2013-04-11T10:45:15.650
> 
> 标签：java, webdriver, testng

我正在使用“delnames”对象数组来创建这些动物园项目，并且在另一种方法中我想删除它们。创建需要单独的方法，但删除不需要，只需单击删除即可。所以我想在同一个 dataprovider 对象数组上迭代它。
这就是我想要实现的目标；我正在使用 java 在 ubuntu 上编写我的脚本。

```
@DataProvider(name = "delnames")
    public Object[][] dnames() {
        return new Object[][] { { "zoo" }, { "owl" }, { "lion"}, 
                      { "Peacock" }, { "Chimp" }, { "Fish" }, {"Duck"} };
    }

@Test(dataProvider = "delnames")
public void delete(String name1){
for (lenth of dnames){ ================ >> HOW ?????
driver.findElement(By.linkText("delete"));
syso(name1+" is deleted");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:55:53.000

如果是 ArrayList 或 Vector：

```
for (int i = 0; i < dnames.size(); i++) {
    ...
} 
```

如果是数组：

```
for (int i = 0; i < dnames.length; i++) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:59:40.573

我认为您可以使用选择一维数组，而不是二维数组。

```
Object dnames [] = new Object[]{"owl","zoo","Chimp","Fish","Duck"}; 
```

我们可以循环遍历一维数组，如下所示

```
for(Object item: dnames)
{
System.out.println(item); // do your stuff here with item  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T22:48:59.193

```
@Test(dataProvider = "delnames")
public void delete(String name1){
  for (Object[] params : dnames()) {
    for (Object o : params) {
      ...
    }
  }
} 
```

显然，您不想在您的测试方法中这样做，因为`dnames()`它是它的数据提供者，但我假设您只是将其作为示例显示。

# java - 如何在同一个方法中使用两个 java.lang.Runtimes？

> ID：15946767
> 
> 赞同：0
> 
> 时间：2013-04-11T10:45:21.137
> 
> 标签：java, runtime.exec

我想`Runtime`在相同的方法中使用两个。第二个使用第一个的结果。我在两个文件 ( `*.txt`) 中返回结果。第一个的执行结果是好的，但是第二个的文件是空的。

使用的代码如下：

```
public void applicationpackage() {
        try {
            Process process = Runtime.getRuntime().exec(
                    new String[] { "/bin/sh", "-c",
                            "ls " + pathPackage + "/*.apk" });
            process.waitFor();
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    process.getInputStream()));
            File f = new File(pathPackage + "/packagename.txt");
            PrintWriter writer = new PrintWriter(f, "UTF-8");
            String line = reader.readLine();
            while ((line != null)) {
                System.out.println(line);
                applicationPackage.add(line);
                writer.println(line);
                line = reader.readLine();
                Process p = Runtime.getRuntime().exec(new String[]{
                        "/bin/sh", "-c", "cut -d. -f2,3 <<<" + line
                });
                p.waitFor();
                BufferedReader r = new BufferedReader(new InputStreamReader(p.getInputStream())); 
                File file = new File(pathPackage +"/application.txt");
                PrintWriter w = new PrintWriter(file, "UTF-8");
                String l = r.readLine();
                while(l!= null){
                    w.println(l);
                    w.println("toto");
                    l = r.readLine();
                }

                name+= "cut -d. -f2,3 <<<" + line +" &";

                System.out.println("toto" + name);
            }
            System.out.println("toto" + name);
            writer.close();

        } catch (IOException | InterruptedException e1) { }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:02:36.887

如果你的文件是空的，这通常意味着你`PrintWriter`没有设置自动刷新，或者你没有关闭 writer。最后一个参考`w`是`w.println("toto");`. 添加`w.close()`到您的代码中。

此外，当您实例化 a 时，`PrintWriter`您应该在构造函数级别传入一个布尔值，以指示`PrintWriter`应该在每次操作后刷新。

# content-management-system - Jahia CMS：在部署更新的模板后，从站点中删除的页面被添加回来

> ID：15946772
> 
> 赞同：0
> 
> 时间：2013-04-11T10:45:49.193
> 
> 标签：content-management-system

贾希亚CMS：

我们在模板中保留默认页面，这些页面是在我们使用模板创建网站时创建的。

现在进入站点的编辑模式，从站点中删除一个页面，然后发布它。

更改模板中的某些内容并再次部署新模板。

您将看到已删除的页面在编辑模式下重新出现，而不是在发布模式下。发布模式保持不变。

这是预期的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T22:01:40.623

是的，这是预期的行为。
您提到的发布模式称为“实时模式”。内容的创建必须先发布，然后才能以实时模式使用。
只有在模板中所做的更改才不必发布。

# c++ - c++ 返回常量二维数组

> ID：15946776
> 
> 赞同：0
> 
> 时间：2013-04-11T10:46:03.750
> 
> 标签：c++, multidimensional-array

好吧，我确实知道如何从函数返回二维数组：

```
struct S
{
    int a[3];
    int b[4][5];

    int const *getA() const {return a;}
    int (*getB())[5] {return b;}
}; 
```

问题是：如何返回**常量**二维数组？我应该`const`在哪里排队

```
int (*getB())[5] {return b;} 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:57:51.380

通过使用[`std::array`](http://en.cppreference.com/w/cpp/container/array)：

```
struct S
{
    using arrayA_type = std::array<int, 3>;
    using arrayB_type = std::array<std::array<int, 5>, 4>;

    arrayA_type a;
    arrayB_type b;

    const arrayA_type& getA() const { return a; }
    const arrayB_type& getB() const { return b; }
}; 
```

当然，您可以使用普通的原始数组来代替，但是如果您使用类型别名会*更*容易，换句话说，不要混淆将`const`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T10:59:37.073

[`std::array`](http://en.cppreference.com/w/cpp/container/array)通过使用（`std::tr1::array`或者`boost::array`如果您没有 C++11 支持）来简化整个事情。这些类型是可复制、可分配的，并且它们的参考语法很明确：

```
#include <array>

struct S
{
    std::array<int, 3> a;
    std::array<std::array<int, 5>, 4> b;

    const std::array<int, 3>& getA() const  {return a; }
    const std::array<std::array<int, 5>, 4>& getB() const { return b; }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:48:34.157

之前`int`。

```
const int (*getB() const)[5] {return b;} 
```

# flash - flash builder中的资产路径

> ID：15946781
> 
> 赞同：2
> 
> 时间：2013-04-11T10:46:16.903
> 
> 标签：flash, flash-builder, embed

所以在我的主要闪存构建器项目中，我有一个名为 assets 的文件夹。当我嵌入到一个类中时，我必须使用代码。

[嵌入(source=".​​./../assets/ship.png")]

是否可以添加资产文件夹以避免双文件夹遍历？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T16:24:08.657

您可以向项目添加其他源路径，以便 FB 知道在默认 src 文件夹之外的何处查找资产/代码

添加文件夹：

转到 FB 菜单 -> 项目 -> 属性 -> Flex 构建路径

选择“源路径”选项卡，单击“添加文件夹”并选择您的资产文件夹。

然后将您的嵌入路径调整为例如：[Embed(source="/ship.png")]

（我把斜线留在原处，因为 FB 似乎更喜欢这样）

# android - Android 对话框导致 android.view.WindowManager$BadTokenException: Unable to add window

> ID：15946783
> 
> 赞同：1
> 
> 时间：2013-04-11T10:46:24.827
> 
> 标签：android, multithreading, android-dialog

我已将我的活动放在子视图中，现在我无法显示来自我的活动和适配器的对话框。在我的 logCat 中，我得到了

```
04-11 12:39:59.823: E/AndroidRuntime(12831): FATAL EXCEPTION: main
04-11 12:39:59.823: E/AndroidRuntime(12831): android.view.WindowManager$BadTokenException: Unable to add window -- token android.app.LocalActivityManager$LocalActivityRecord@41971f18 is not valid; is your activity running?
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:513)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:301)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:215)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:140)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.view.Window$LocalWindowManager.addView(Window.java:537)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.app.Dialog.show(Dialog.java:278)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at com.myapp.functions.DownloadsDetailsAdapter$1$2.run(DownloadsDetailsAdapter.java:148)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.app.Activity.runOnUiThread(Activity.java:4170)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at com.myapp.functions.DownloadsDetailsAdapter$1.onClick(DownloadsDetailsAdapter.java:139)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.view.View.performClick(View.java:3511)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.view.View$PerformClick.run(View.java:14105)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.os.Handler.handleCallback(Handler.java:605)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.os.Looper.loop(Looper.java:137)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at android.app.ActivityThread.main(ActivityThread.java:4440)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at java.lang.reflect.Method.invokeNative(Native Method)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at java.lang.reflect.Method.invoke(Method.java:511)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-11 12:39:59.823: E/AndroidRuntime(12831):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我如何尝试显示对话框的示例。

```
AlertDialog.Builder builder = new AlertDialog.Builder(
                            activity);
                    builder.setMessage(R.string.are_you_sure)
                            .setPositiveButton(R.string.yes,
                                    dialogClickListener)
                            .setNegativeButton(R.string.no, dialogClickListener)
                            .show(); 
```

注意：在我进行更改之前，此代码正在运行。我觉得我应该在新的可运行文件中运行它，但如果我必须这样做，有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-04T07:05:54.710

我也面临同样的问题。我为此使用了标签栏。只需使用`getParent()`而不是`youractivity.this`.

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:12:07.523

该`activity`对象必须是当前显示在屏幕上的活动。如果它已经暂停或尚未构建显示，则会出现此错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T02:10:12.400

在这里查看 ActivityGroup 的答案。

对于 ActivityGroup 的子 Activity，当我们在 PrompDialog 等子 Activity 中使用 Context 时，我们无法确定它是否始终存在并存在。例如：

```
mPromptDialog = new LoginPromptDialog(this);//this is used as Context
//But when we use this context it may be destroyed.
//So this is the parent instance
mPromptDialog = new LoginPromptDialog(this.getParent()); 
```

偏好： [http ://www.cnblogs.com/kaima/archive/2011/08/04/2127813.html](http://www.cnblogs.com/kaima/archive/2011/08/04/2127813.html)

# android - 不支持 Android 清单合并

> ID：15946785
> 
> 赞同：1
> 
> 时间：2013-04-11T10:46:29.333
> 
> 标签：android, intellij-idea

我正在尝试在 intellij 中使用 android manifest 合并，但它说：

android-validator：不支持清单合并。请重新配置您的清单文件

我相信 Intellij 不支持这一点，因为我在 google 中搜索并在 jetbrains 社区中找到了一个页面。

但我不知道为什么，因为它与 android 编译器而不是 intellij 有关。有什么解决方法吗？

合并合并了哪些标签和属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-24T10:28:26.913

对于那些正在使用的人`IntelliJ IDEA 13`，您可以通过打开**File |启用清单合并选项。项目结构 | Facets**，然后选择*Packaging*选项卡并启用该`Enable manifest merging`选项。

[资源](https://www.jetbrains.com/idea/webhelp/sharing-android-source-code-and-resources-using-library-projects.html)

# c# - MVC4 / IIS / 表单身份验证 SSO 问题

> ID：15946787
> 
> 赞同：12
> 
> 时间：2013-04-11T10:46:43.430
> 
> 标签：c#, asp.net-mvc, iis, forms-authentication, session-cookies

我在 MVC4 / IIS / Forms 身份验证方面遇到了一个奇怪的间歇性问题。

我有一对使用 SSO 将控制权相互传递的网站。大多数情况下，切换正确发生，用户按预期重定向到下一个站点。但是，在某些情况下，即使发送了有效的 SSO 信息，也会要求用户再次登录。该`SSO`方法用`[AllowAnonymous]`属性修饰， *web.config*也有一个 location 条目，授予所有用户访问*/account/sso*的权限。

它似乎发生在第一次访问目标站点时 - 一旦应用程序池预热，问题就会消失。

其他几点：

1 两个站点都是 .net 4，因此不应存在任何遗留加密问题。
2\. 这个问题很少发生（<10% 的时间），所以代码本身*应该*是健全的
3\. 本地主机是 IIS 7.5 on win7x64，天蓝色 - 发生在两个地方
4\. 似乎与浏览器无关

```
<location path="account/sso">
    <system.web>
        <authorization>
            <allow users="*" />
        </authorization>
    </system.web>
</location>

[Authorize]
public class AccountController : BaseControllerTestable
{
    public AccountController()
        : base()
    {
    }

    [AllowAnonymous]
    public ActionResult SSO(string AuthToken, string Target)
    {
        //SSO logic here

    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:26:19.470

您的 Controller 类上有一个 Authorize 属性，这意味着您的 SSO 方法将应用 AllowAnonymous 和 Authorize 。在这种情况下，Authorize 属性看起来需要被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:44:33.803

你的**BaseControllerTestable**是什么？你那里有任何**授权**属性吗？您的基类将首先被​​实例化，然后才能到达派生类上的其他方法。因此，如果您有任何机会在基本控制器上有 [ **Authorize** ]，这可能对您来说是个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T14:59:37.297

我想我终于解决了它（我们只有在我们度过了一段时间没有复发的情况下才能确定，因为它无论如何都是间歇性的）

有几个因素在起作用。首先，我注意到一些静态项目（主要是 css+js 文件）即使它们应该可以自由访问，它们也陷入了身份验证循环，因此我在 web.config 中添加了一个位置规则，以确保允许匿名用户使用它们。我还添加了一个路由异常来忽略 favicon.ico 请求，以便采取良好措施。这似乎阻止了代码在第一次进行身份验证时绊倒自己。最后，问题是间歇性的原因是由于另一个错误，如果有任何其他会话打开（数据库驱动），问题就不会发生。这解释了为什么这个错误只发生在清晨，即：前一天的所有会话都已过期。

# php - 尝试制作动态选项形式

> ID：15946789
> 
> 赞同：0
> 
> 时间：2013-04-11T10:46:45.367
> 
> 标签：php, forms, dynamic

好的，我尝试了几天，但我做不到，所以我首先尝试一步一步来我需要正确地从数据库中获取信息并以表格形式显示这里是数据库

```
CategoryID  |  CategoryName  |    ParentID

----------------------------------------
1           | FirstMenuCat1  |      0
2           | FirstMenuCat2  |      0
3           | SubMenuCat1    |      1
4           | SubMenuCat2    |      1
5           | SubMenuCat3    |      2 
```

这是我最后一次成功的尝试，所以我知道我从数据库中获取了正确的数据，但我不知道如何使它成为一个表单：

```
<?php
require_once ('mysqli_connect.php');
$q = "SELECT CategoryName FROM menus where ParentID = '0' ORDER by CategoryID";
$r = @mysqli_query ($dbc, $q) or die("Error: ".mysqli_error($dbc));

/* associative array */
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)){
printf ("%s\n", $row["CategoryName"]);

}
 ?> 
```

这是我的尝试，但它不起作用

```
/* associative array */
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)){

foreach($row){
                echo "<option value=\"". urlencode( $_ ) ."\" $selected >$_</option>\n";
                $selected = ""; // only the first element will be marked as selected
}

}
 ?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:59:42.543

通过查看**选项**标签，我认为您正在尝试创建一个组合框列表。如果是那么首先不要使用\n。组合框列表中的选项已逐行显示。

其次，您还没有打印**选择**标签。没有它，列表将无法正确呈现。试试下面的代码：

```
echo "<select name='mylist'>";

$selected = "selected";
while (($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) !== FALSE){
   echo "<option value='". $row['key']."' $selected >".$row['value']."</option>";
   $selected = ""; // only the first element will be marked as selected
}

echo "</select>"; 
```

希望它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:53:17.313

检查这个

```
echo '<select name="" id="">';
/* associative array */
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)){

// Check the $_ correctly
foreach($row){
        echo "<option value='". urlencode( $_ ) ."'>$_</option>\n";
}

}

echo '</select>'; 
```

注意*：默认情况下，将为 dd 选择第一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:54:36.370

不确定，但我认为这是你需要的

```
$optionString = '';
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC))
{

   $value         = urlencode($row['CategoryName']);
   $optionString .= "<option value='{$value}'>{$row['CategoryName']}</option>";

 }

 echo "<select>$optionString</select>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:05:12.193

```
$selected = 'selected';

$htmlSelect = '<select name="elementName" id="elementId">';

while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)){
    $htmlSelect .= '<option value="' . urlencode( $_ ) . '" ' . $selected . ' >' . $_ . '</option>';
    $selected = ""; // only the first element will be marked as selected
}

$htmlSelect .= '</select>';

echo $htmlSelect; 
```

**注意 1：**在元素属性上最好使用双引号`"`而不是单引号。`'`有些浏览器不喜欢单引号。

**注意 2：**无法理解您为什么在声明中`foreach`再次使用。`while`

**注意 3：**如果您不记得选择了哪个选项，则无需指定选择了哪个元素，默认情况下将选择第一个。

# python - 关于管道 stdio 和 subprocess.Popen

> ID：15946790
> 
> 赞同：0
> 
> 时间：2013-04-11T10:46:50.037
> 
> 标签：python, linux, shell, stdout, stdin

我有一个 Python 程序，它通过`subprocess.Popen`. 第一个应该向控制台输出一些文本（仅供参考），并将一些文本写入它产生的第二个程序。然后，它应该等待第二个程序响应（`read()`来自它），并打印该响应。

第二个应该听第一个的输入（通过`raw_input()`），然后`print`给第一个发短信。

为了了解到底发生了什么，我在第二次延迟了 5 秒，结果让我有点吃惊。

这是代码：

```
import subprocess

print "1st starting."

app = subprocess.Popen("name", shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE) #<--- B

print "Writing something to app's STDIN..."
app.stdin.write(some_text)

print "Reading something from my STDIN..." #<--- A
result = app.stdout.read()

print "Result:"
print result 
```

对于第二个：

```
import time

print "app invoked."

print "Waiting for text from STDIN..."
text = raw_input()

#process(text)
time.sleep(5)

print "magic" 
```

当我运行这段代码时，它在 A 点暂停，因为那是最后一个控制台输出。

5 秒后，该`"Result:\n"`行将被输出，第二个程序`print`编辑的所有内容都将显示在控制台中。

为什么第一个程序在读取第二个程序的标准输出时会暂停？在读取其输出之前是否必须等待其子进程终止？如何更改它以便我可以在程序之间传递消息？

我正在运行 Debian Linux 7.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:26:55.100

答案不在于任何与 subprocess 模块相关的魔法，而在于`read()`Python 对象上的方法的典型行为。

如果你运行这个：

```
import subprocess
p = subprocess.Popen(['ls'], stdout=subprocess.PIPE)
help(p.stdout.read) 
```

你会看到这个：

> 读（...）
> 
> ```
> read([size]) -> read at most size bytes, returned as a string.
> 
> If the size argument is negative or omitted, read until EOF is reached.
> Notice that when in non-blocking mode, less data than what was requested
> may be returned, even if no size parameter was given. 
> ```
> 
> （结尾）

同样的事情适用于所有类似文件的对象。这很简单：`read()`不带参数调用会消耗缓冲区，直到遇到错误（通常是 EOF）。

`EOF`直到：

*   子进程调用 sys.stdout.close()，或
*   子进程退出，Python 运行时和/或 OS 内核清理其文件描述符

注意它`os.read`有不同的行为——更像是 C 中典型的缓冲 I/O。内置的 Python 帮助功能是无用的，但如果你在任何 UNIXy 系统上，你应该能够运行`man 3 read`；Python 的行为或多或少与那里的行为相匹配。

## 一句警告

上面的程序很好，但是这样的模式有时会导致死锁。subprocess 模块的文档在记录 Popen.wait() 的地方警告了这一点：

> 警告
> 
> 这将在使用 stdout=PIPE 和/或 stderr=PIPE 时发生死锁，并且子进程会向管道生成足够的输出，从而阻塞等待 OS 管道缓冲区接受更多数据。使用communicate() 来避免这种情况。

如果您在与子进程进行双向通信时不小心，则可能会遇到类似的情况，具体取决于子进程正在做什么。

**编辑**：

顺便说一句，[这个页面](http://man7.org/linux/man-pages/man7/pipe.7.html)涵盖了带有 EOF 的管道的行为：

> 如果所有引用管道写入端的文件描述符都已关闭，则尝试从管道读取（2）将看到文件结束（读取（2）将返回 0）。

**编辑 2**：

正如 Lennart 上面提到的，如果您想要真正的双向通信，超越一次写入一次读取，您还需要注意缓冲。如果您阅读[本文](http://docs.python.org/2/library/stdtypes.html#bltin-file-objects)，您会对此有所了解，但您应该知道，缓冲 IO 在基于 UNIX 的系统中几乎总是这样工作的——这不是 Python 的怪癖。运行`man stdio.h`以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:53:10.213

您要求程序 1 从程序 2 读取输入。并且您在程序 2 输出任何内容之前将其暂停五秒钟。显然，程序 1 需要等待那五秒钟。所以发生的事情是完全可以预料的。

> 在读取其输出之前是否必须等待其子进程终止？

在某种程度上，是的，因为输入和输出是缓冲的，所以即使你将延迟移到打印*后*也会发生同样的情况。

`raw_input()`无论如何，都会等待换行。

# c# - 使用 `<%= "{0}, {1}", arg1, arg2 %>` 代替 `<%= string.Format("{0}, {1}", arg1, arg2) 是否有效%>` 在 ASP.NET aspx 页面中

> ID：15946796
> 
> 赞同：6
> 
> 时间：2013-04-11T10:47:13.977
> 
> 标签：c#, asp.net, .net, .net-4.0, asp.net-4.0

在我的 aspx 页面中，我经常使用以下内容并且效果很好：

`<%= "{0}, {1}", arg1, arg2 %>`

我使用 ReSharper 进行代码分析。我刚刚将 v6.1 升级到 7，它给了我以下两个错误：

> “预期表达”
> 
> “方法 '__ReSharper_Render' 有 1 个参数，但使用 3 个参数调用”

我使用的语法不正确吗？我更愿意继续使用它，因为我发现它非常优雅和紧凑。如果它是正确的（我认为它应该是有效的），知道如何告诉 ReSharper 忽略它或将其视为有效吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:28:53.377

Saurabh，您正在使用 ASP.NET 的实现细节。这是不好的做法。最好明确指定它：

```
<%= string.Format("{0}, {1}", arg1, arg2) %> 
```

# javascript - 无法让对话框在 JQuery Mobile 中以编程方式显示

> ID：15946797
> 
> 赞同：5
> 
> 时间：2013-04-11T10:47:15.213
> 
> 标签：javascript, jquery, jquery-mobile, jquery-mobile-dialog

我试图让一个数据类型为“对话框”的 div 显示在 JQuery Mobile 中，由 Javascript 事件触发。下面示例中的按钮单击纯粹是为了触发事件。

```
<head>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.1/jquery.mobile-1.2.1.min.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            //$.mobile.changePage('#addCatForm');

            $('#createEvent').click (function () {
                console.log('Prove event fired');

                $.mobile.changePage('#addCatForm', {
                    transition: 'pop',
                    changeHash: false,
                    role: 'dialog'
                });
            });

        });
    </script>
</head>
<body>
    <div data-role="page" id="mainPage">
        <button id="createEvent">Create Event</button>
        <div data-role="dialog" id="addCatForm" data-theme="c">
            <p>here is some text</p>
            <div data-role="content">
                <input type="text" id="catText" data-theme="c"/>
                <input data-role="button" data-mini="true" data-theme="b" data-inline="true" type="submit" id="addCat" value="Add Category">

                <button data-role="button" data-mini="true" data-theme="c" data-inline="true" id="canCat">Cancel</button>
            </div>
        </div>
    </div>    
</body> 
```

console.log 输出正确触发，但我似乎无能为力让对话框显示。

任何帮助表示赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T10:52:02.697

工作示例：http: [//jsfiddle.net/Gajotres/Jx9xM/](http://jsfiddle.net/Gajotres/Jx9xM/)

```
$(document).ready(function() {    
    $('#createEvent').click (function () {
        console.log('Prove event fired');

        $.mobile.changePage('#addCatForm', {
            transition: 'pop',
            changeHash: true,
            role: 'dialog'
        });
    });
}); 
```

对话框必须与页面处于同一级别，而不是页面的一部分。在这种情况下，我已将对话框移到页面之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T10:55:33.900

你的结构应该看起来像这样，`data-role=dialog`在外面`data-role=page`。

```
<!-- Page -->
<div data-role="page" id="mainPage">
 <button id="createEvent">Create Event</button>
</div> 
<!-- /Page -->

<!-- Dialog -->
<div data-role="dialog" id="addCatForm" data-theme="c">
 <p>here is some text</p>
 <div data-role="content">
  <input type="text" id="catText" data-theme="c"/>
  <input data-role="button" data-mini="true" data-theme="b" data-inline="true" type="submit" id="addCat" value="Add Category">
  <button data-role="button" data-mini="true" data-theme="c" data-inline="true" id="canCat">Cancel</button>
  </div>
 </div>
 <!-- /Dialog --> 
```

# json - json.stringify 不适用于 IE8 及更低版本，使用 json2.js

> ID：15946800
> 
> 赞同：2
> 
> 时间：2013-04-11T10:47:22.463
> 
> 标签：json, web-services, internet-explorer, .post, stringify

下面是我的代码。它适用于 IE8 及更高版本，也适用于 chrome 和 FF ......早些时候我得到 json undefined 我使用 json2.js 现在我得到了警报

```
"something went wrong pls try again"... 
```

为什么它没有成功..还有什么方法可以从服务器检查 IE8 及以下版本的 json 响应？

```
$.post(serURL + '/saveForm', {'postdata': JSON.stringify(postJson)}, function(postRes){
  parsedData = jQuery.parseJSON(postRes);
  if (parsedData.Response.Header.Message == 'Success') 
  {
    alert("success")
  } 
 else {
    alert('Something went wrong pls try again..');
  }
}).error(function () 
  {
  alert("webservice issue");
}) 
```

# c# - 如何将字符串参数传递给 t4 模板

> ID：15946802
> 
> 赞同：18
> 
> 时间：2013-04-11T10:47:25.037
> 
> 标签：c#, string, parameters, t4, texttemplate

您好我正在尝试找到一种将普通字符串作为参数传递给文本模板的方法。

这是我的模板代码，如果有人能告诉我我需要用 c# 编写什么来传递我的参数并创建类文件。那将非常有帮助，谢谢。

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ output extension=".cs" #>
<#@ assembly name="System.Xml" #>
<#@ assembly name="EnvDTE" #>
<#@ import namespace="System.Xml" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ parameter name="namespacename" type="System.String" #>
<#@ parameter name="classname" type="System.String" #>
<#
this.OutputInfo.File(this.classname);
#>
namespace <#= this.namespacename #>
{
    using System;
    using System.Collections.Generic; 
    using System.Linq; 
    using System.Xml; 

    /// <summary>
    /// This class describes the data layer related to <#= this.classname #>.
    /// </summary>
    /// <history>
    ///   <change author=`Auto Generated` date=<#= DateTime.Now.ToString("dd/MM/yyyy") #>>Original Version</change>
    /// </history>
    public partial class <#= this.classname #> : DataObject
    {
        #region constructor

        /// <summary>
        /// A constructor which allows the base constructor to attempt to extract the connection string from the config file.
        /// </summary>
        public <#= this.classname #>() : base() {}

        /// <summary>
        /// A constructor which delegates to the base constructor to enable use of connection string.
        /// </summary>
        /// <param name='connectionstring`></param>
        public <#= this.classname #>(string connectionstring) : base(connectionstring) {}

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-11T20:31:07.867

以下是传递参数的一种方式：

1.  您必须创建 TextTemplatingSession。
2.  设置参数的会话字典。
3.  使用该会话处理模板。

示例代码（将 ResolvePath 替换为 tt 文件的位置）：

```
<#@ template debug="true" hostspecific="true" language="C#" #>
<#@ output extension=".txt" #>
<#@ import namespace="System.IO" #>
<#@ import namespace="Microsoft.VisualStudio.TextTemplating" #>
<# 
string templateFile = this.Host.ResolvePath("ClassGeneration.tt");
string templateContent = File.ReadAllText(templateFile);

TextTemplatingSession session = new TextTemplatingSession();
session["namespacename"] = "MyNamespace1";
session["classname"] = "MyClassName";

var sessionHost = (ITextTemplatingSessionHost) this.Host;
sessionHost.Session = session;

Engine engine = new Engine();
string generatedContent = engine.ProcessTemplate(templateContent, this.Host);

this.Write(generatedContent);  #> 
```

我在 Oleg Sych 的博客上看到了这个[示例](http://www.olegsych.com/2010/05/t4-parameter-directive/)，这是 t4 的绝佳资源。这是更新的链接：[https ://web.archive.org/web/20160706191316/http://www.olegsych.com/2010/05/t4-parameter-directive](https://web.archive.org/web/20160706191316/http://www.olegsych.com/2010/05/t4-parameter-directive)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-11-01T11:11:42.087

这是一个 3 年前的问题，我不知道模板库已经发展了多少，以及我的问题解决方案是否适用于旧版本的 Visual Studio 和/或 .NET 等。我目前正在使用 Visual Studio 2015和 .NET 4.6.1。

### 概括

使用“类功能控制块”向生成的模板类声明公共成员，并在模板文本中引用这些公共成员。

### 例子

在 C# 项目中，选择添加新项 > 运行时文本模板 > “Salutation.tt”。您将获得一个新的 .tt 文件，其中包含以下默认声明：

```
<#@ template language="C#" #>
<#@ assembly name="System.Core" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Collections.Generic" #> 
```

在声明下方输入您的模板文本：

```
My name is <#= Name #>.
<# if (RevealAge) { #>
I am <#= Age #> years old.
<# } #> 
```

在 .tt 文件的末尾，将您的参数添加为“类功能控制块”内的公共类成员。**这个块必须到文件的末尾**。

```
<#+
public string Name { get; set; }
public int Age { get; set; }
public bool RevealAge = false;
#> 
```

然后，例如，在控制台应用程序中，您可以按如下方式使用模板：

```
Console.Write(new Salutation
{
    Name = "Alice",
    Age = 35,
    RevealAge = false
}.TransformText());

Console.Write(new Salutation
{
    Name = "Bob",
    Age = 38,
    RevealAge = true
}.TransformText()); 
```

并得到以下输出：

```
My name is Alice.
My name is Bob.
I am 38 years old.
Press any key to continue . . . 
```

有关 T4 语法的详细信息，请参阅 MSDN 文章[编写 T4 文本模板](https://msdn.microsoft.com/en-us/library/bb126478.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-15T08:07:08.483

也可以在处理模板内容之前将参数注入模板内容。为此，请添加`<##>`到您的模板中作为代码注入的占位符。

`GenericClass.ttinclude`：

```
&lt;#@ template language="C#" #>
<##>
namespace <#= Namespace #>
{
    public class <#= ClassName #> : IGeneric<<#= TypeParameter #>>
    {
        public <#= TypeParameter #> ReturnResult() => 1 + 3;
    }
}
<#+
    public string ClassName { get; set; }
    public string Namespace { get; set; }
    public string TypeParameter { get; set; }
#> 
```

比添加一个通用模板来导入其他模板（`Generator.ttinclude`）：

```
&lt;#@ import namespace="System.IO" #>
<#@ import namespace="System.Text" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ import namespace="Microsoft.VisualStudio.TextTemplating" #>
<#+
    public const string ParametersInjectionPattern = "<" + "#" + "#" + ">";

    public void Generate(string baseTemplatePath, IDictionary<string, string> parameters)
    {
        var template = File.ReadAllText(this.Host.ResolvePath(baseTemplatePath));

        template = template.Replace(ParametersInjectionPattern, GenerateParametersAssignmentControlBlock(parameters));

        this.Write(new Engine().ProcessTemplate(template, this.Host).Trim());
    }

    public string GenerateParametersAssignmentControlBlock(IDictionary<string, string> parameters)
    {
        var sb = new StringBuilder();
        sb.Append('<').Append('#').Append(' ');

        foreach (var parameter in parameters)
            sb.Append($"{parameter.Key} = {parameter.Value};");

        sb.Append(' ').Append('#').Append('>');
        return sb.ToString();
    }

    public string SurroundWithQuotes(string str)
    {
        return $"\"{str}\"";
    }

    public string GetTemplateName()
    {
        return Path.GetFileNameWithoutExtension(this.Host.TemplateFile).Replace(".Generated", "");
    }
#> 
```

然后在任何特定模板中使用它，您可以在其中传递必要的参数 ( `UInt64Class.Generated.tt`)：

```
<#@ template hostspecific="true" language="C#" #>
<#@ import namespace="System.Collections.Generic" #>
<#@ output extension=".cs" #>
<#@ include file="Generator.ttinclude" #>
<#
    var parameters = new Dictionary<string, string>()
    {
        { "Namespace", SurroundWithQuotes("T4GenericsExample") },
        { "ClassName", SurroundWithQuotes(GetTemplateName()) },
        { "TypeParameter", SurroundWithQuotes("System.UInt64") }
    };

    Generate("GenericClass.ttinclude", parameters);
#> 
```

完整的示例可以在[https://github.com/Konard/T4GenericsExample找到](https://github.com/Konard/T4GenericsExample)

# mysql - NOW() 和 DATE(NOW()) 之间有什么区别？

> ID：15946807
> 
> 赞同：-3
> 
> 时间：2013-04-11T10:47:49.847
> 
> 标签：mysql, sql, date

`NOW()`在性能、结果和`DATE(NOW())`精度方面有什么区别？MySQL 将如何理解这两个函数？

我想知道什么是最好的

```
 WHERE the_date < NOW() 
```

和

```
WHERE the_date < DATE(NOW()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:51:12.263

NOW() 返回当前日期/时间。DATE(NOW()) 返回日期部分。如果您只想知道日期，请使用 CURRDATE()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:06:06.017

您正在查看两个不同的比较。

由于`the_date`包含一天中的时间，因此该表达式`the_date < NOW()`将考虑您执行 SQL 语句时的一天中的时间，如果 YYYY-MM-DD`the_date`与当前日期时间相同，这可能会有所不同。

在 的情况下`the_date < DATE(NOW())`，您正在比较`the_date`，`YYYY-MM-DD 00:00:00000`因此当前时间从`NOW()`被忽略并设置为午夜。

这里更重要的是您需要做什么以及您期望的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:50:58.833

该`DateTime.Now`属性返回当前日期和时间，例如`2011-07-01 10:09.45310`。

该`DateTime.Today`属性返回时间分量设置为零的当前日期，例如`2011-07-01 00:00.00000`。

该`DateTime.Today`属性实际上返回`DateTime.Now.Date`：

# visual-studio-2010 - Visual Studio 2010：添加现有文件夹

> ID：15946808
> 
> 赞同：0
> 
> 时间：2013-04-11T10:47:58.327
> 
> 标签：visual-studio-2010, projects-and-solutions

我想使用很多已经创建并存储在文件夹中的东西。在一个新项目中，我想使用这些类并添加整个文件夹，包括文件夹本身，以保持项目的清晰排列。

如何将现有文件夹添加到项目中？

由于该文件夹位于并发版本系统上，我不想复制/移动/创建文件，尤其是文件夹。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T11:06:58.753

您能否在解决方案资源管理器中“显示所有文件”以查看不在项目中的文件夹和文件，然后“包含在项目中”

...或者我没有理解这个问题？

# javascript - 使用字符串键和字符串值声明静态 Javascript 映射的正确方法

> ID：15946810
> 
> 赞同：2
> 
> 时间：2013-04-11T10:48:03.897
> 
> 标签：javascript, string, map, static

这是声明字符串键和字符串值的静态 Javascript 映射的正确方法吗？

```
var myMap = {
    "key 1" : "value 1", 
    "key 2" : "value 2", 
    ...
    "key n" : "value n"
}; 
```

**REM：**所有键和值都将针对特殊字符进行 html 转义，它们可能包含空格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T10:50:04.290

是的，这是初始化 Javascript 对象的正常且正确的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:56:46.457

> 这是声明字符串键和字符串值的静态 Javascript 映射的正确方法吗？

这是一个很好的[对象文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals#Object_literals)，是的。尽管如此，JavaScript 中并没有什么真正的“静态”（只有`myMap`你用 声明的变量的范围[`var`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)，而不是它的值）。

> 所有键和值都将针对特殊字符进行 html 转义

这听起来没有必要，除非您希望将字符串写入 html 标记（并且有更好的方法）。*如果您只是因为脚本包含在 html 文档中而对它们进行了转义，那么它是无用的 -内联*脚本中唯一需要转义的是序列`</script>`。您只需对它们进行字符串转义（即转义反斜杠和引号）。

# ruby - 什么工具在“cd”期间运行并检查 .ruby_version 文件？

> ID：15946812
> 
> 赞同：0
> 
> 时间：2013-04-11T10:48:18.410
> 
> 标签：ruby, shell, rvm, osx-mountain-lion, environment

我最近安装了一堆与 ruby​​ 相关的工具。Macports ruby​​19（然后根据此处关于 SO 的建议卸载），然后安装 RVM 和 ruby​​-1.9.3-p。

现在我注意到，当我`cd`甚`\cd`至进入带有 .ruby-version 文件的目录时，我收到一条消息，我没有安装匹配版本的 ruby​​。这让我发疯：什么工具正在执行此检查？

我能看到 rvm 对我的环境所做的唯一一件事就是将 ~/.rvm/bin 附加到我的路径上。我在 OS X Mountain Lion 上运行“终端”。

编辑：有没有办法告诉 bash 回显从 shell 命令启动的所有进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T16:17:11.263

被[RVM](https://rvm.io)`cd`覆盖。

`.ruby-version`是 RVM/rbenv/chruby 使用的“标准”，允许您切换到项目特定的 Ruby。

您可以通过两种方式解决此问题：

1.  让 RVM 安装所有缺少的红宝石：

    ```
    echo rvm_install_on_use_flag=1 >> ~/.rvmrc 
    ```

2.  让 RVM 为当前项目安装 Ruby：

    ```
    rvm use . --install 
    ```

# ruby - 如何在 fake_ftp gem 中存根 gettextfile 方法？

> ID：15946813
> 
> 赞同：3
> 
> 时间：2013-04-11T10:48:19.507
> 
> 标签：ruby, ftp, mocking

我正在使用[fake_ftp](https://github.com/livinginthepast/fake_ftp) gem。

我需要`fake_ftp`使用方法返回文件，`gettextfile`并且在自述文件中找不到任何提及。

如何让`fake_ftp`gem 在下载时返回一些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T19:46:35.730

您可以对 FakeFTP::Server 进行猴子补丁或分叉并添加您想要的功能。

根据[Net::FTP#gettextfile API](http://ruby-doc.org/stdlib-2.1.0/libdoc/net/ftp/rdoc/Net/FTP.html#method-i-gettextfile)，可以这样实现：

```
class FakeFTP::Server
  def gettextfile(remotefile, localfile = nil)
    content = file(remotefile).data
    File.open(localfile, "w+"){|f| f << content} if localfile
    yield(content) if block_given?
  end
end 
```

# android - 为什么我的线程运行有时会阻塞

> ID：15946822
> 
> 赞同：0
> 
> 时间：2013-04-11T10:48:50.547
> 
> 标签：android, multithreading, sockets, service, message

我已经为 Socket 连接、发送和返回做了一个服务，有时，它接收到一个信息并阻塞了我的线程，我不知道是什么。一开始，我的线程状态是 RUNNABLE，有一次，它变成了一个循环，我已经 BLOCKED 状态如果有人对我的服务有任何想法或评论，我不确定是否一切都很好，但这是更好的方法我找到了发送和接收套接字消息..谢谢

```
public class SocketService extends Service{

private final int SERVER_PORT = 6040;
static final int MSG_ID = 0x1337;
private final String TAG = SocketService.class.getSimpleName();

private final IBinder mBinder = new SocketBinder();
private String mClientMsg;

private String serverHost = Fonctions.getTxtIp() ; // server address
private Socket socket; // socket for the connection
private ServerSocket ss = null;
private serverListenerThread listenServerThread; // thread for listening to the server 
private boolean connected = false;    
private PrintWriter out;

private MainActivity main;

public class SocketBinder extends Binder{
    public SocketService getService(){
        return SocketService.this;
    }

}

/**
 * Thread d'Ècoute du port SERVER_PORT
 *
 */

private class serverListenerThread extends Thread implements Runnable{
    private boolean end = false; // Booleen pour finir le thread
    public void run(){
        Log.i(TAG, "Run ServerListenerThread " + SERVER_PORT);
        Socket s = null;
            try {
                ss = new ServerSocket(SERVER_PORT );
            } catch (IOException e) {
                e.printStackTrace();
            }
            Log.i(TAG, listenServerThread.getState().toString() );
            while(!end ){                        
                 Message m = new Message();
                    m.what = MSG_ID;
                    Log.i(TAG, listenServerThread.getState().toString() );
                    try {
                        if (s == null)
                            s = ss.accept();
                        BufferedReader input = new BufferedReader(new InputStreamReader(s.getInputStream()));                   
                        String st = null;
                        st = input.readLine();
                        mClientMsg = st;
                        if(mClientMsg != null)
                            notifyMsg(mClientMsg);

                Log.i(TAG, "Reception Message : " + mClientMsg);

            }catch(IOException e){
                Log.i(TAG, e.getMessage() );
            }                    
            catch (Exception e) {
                Log.i(TAG, "connection lost" + e.getMessage() );                    
            }

        }
    }

    public void end(){
        Log.w(TAG, "End du Thread!");
        end = true;
    }
}

/***
 * Notifier msg
 */
private void notifyMsg(String msg)
{
    Intent intent = new Intent(this, MainActivity.class);
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

    mBuilder.setContentIntent(pIntent);
    mNotificationManager.notify(0, mBuilder.getNotification());
}

/**
 *     Connection au Server pour l'envoi d'un message 
 * @param host
 */
public void start(String host){

    new Thread(new Runnable(){
        public void run() {

            listenServerThread = new serverListenerThread();
            listenServerThread.start();
            if(! connected){
                if(connectServer())
                {
                    Log.i(TAG, "Serverhost Ca Galope");                                   
                    connected = true;
                    Log.i(TAG, listenServerThread.getState().toString() );
                }
            }
                else {
                    Log.i(TAG, "Connected : " + connected);                                   
                    connected = false;
                }                    
        }
    }).start();

}        

/**
 * Connection au Server pour l'envoi d'un message 
 * @return Booleen 
 */
private boolean connectServer(){
    try {

        InetAddress serverAddr = InetAddress.getByName(serverHost);
         socket = new Socket(serverAddr, SERVER_PORT);
       /*  out = new PrintWriter( new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())),true );
            out.println("0|ImHere");
            out.flush();*/
        Log.w(TAG, "Ouverture socket");

    }catch (UnknownHostException e) {
        Log.i(TAG, "Erreur connectServer()" + e.getMessage() );
        e.printStackTrace();
    }
    catch (IOException e) {
        Log.i(TAG, "Erreur connectServer()" + e.getMessage() );
        return false;
    } 
    return true;
}

/**
 * Envoi du message via un PrintWriter
 * @param msg
 */
public void sendMsg(final String msg){        
    new Thread(new Runnable() {
        public void run() {
            Log.i(TAG, "SendMsg : " + msg + connected);                
            if(!connected)
                connectServer();
                try {

                    Log.i(TAG, "print writer");
                            out = new PrintWriter( new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())),true );
                            out.println(msg);
                            out.flush();

                } catch (IOException e) {
                    e.printStackTrace() ;
                    Log.i(TAG, e.getMessage() );
                }    

        }
    }).start();
}

public void setMainActivity(MainActivity main)
{
    this.main = main;
}

public String getMessage(){
    return mClientMsg;
}

public int onStartCommand(Intent intent)
{
    Log.i(TAG, "Start command Service");        
    return Service.START_STICKY;
}

@Override
public IBinder onBind(Intent intent) {
    Log.i(TAG, "onBind");    
    return this.mBinder;
}

/**
 * Is Connected?
 * @return Booleen 
 */

public boolean isConnected() {
    Log.i(TAG, "isConnected : " + connected);        
    return connected;
}

/**
 * Methode appelÈe ‡ la destruction du service
 */
public void onDestroy()
{
    Log.i(TAG, "Destruction Service");
    super.onDestroy();
}

/**
 * 
 */
public void end(){
    Log.i(TAG, "Deconnexion Server");            
    listenServerThread.end();
    connected = false;
    try {
        socket.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

}

# cron - 如何使用 cron 作业创建文件夹并在该文件夹中下载远程图像

> ID：15946825
> 
> 赞同：0
> 
> 时间：2013-04-11T10:49:00.377
> 
> 标签：cron, file-permissions, mkdir

我是 cron 新手，我需要您的所有帮助，当我使用 cron 作业创建文件夹并在该文件夹 cron 页面中下载图像时，出现以下错误：

```
PHP Warning:  imagejpeg(): Unable to open '././../uploads/lmf-classifieds-pk/folder2/2013-04-05/36258/1365138829_498747097_3-Khyber-1990-Urgent-sale-Islamabad.jpg' for writing: No such file or directory in /var/www/vhosts/ip-50-62-136-81.ip.secureserver.net/lmf_this/cron_lmf/function.php on line 143
PHP Notice:  Undefined offset: 1 in /var/www/vhosts/ip-50-62-136-81.ip.secureserver.net/lmf_this/cron_lmf/olx_extract.php on line 562
PHP Warning:  mkdir(): Permission denied in /var/www/vhosts/ip-50-62-136-81.ip.secureserver.net/lmf_this/cron_lmf/function.php on line 61
PHP Warning:  mkdir(): Permission denied in /var/www/vhosts/ip-50-62-136-81.ip.secureserver.net/lmf_this/cron_lmf/function.php on line 65
PHP Warning:  mkdir(): Permission denied in /var/www/vhosts/ip-50-62-136-81.ip.secureserver.net/lmf_this/cron_lmf/function.php on line 69
PHP Warning:  mkdir(): No such file or directory in /var/www/vhosts/ip-50-62-136-81.ip.secureserver.net/lmf_this/cron_lmf/function.php on line 90 
```

从这些错误..我可以理解cron作业（页面）无法创建文件夹以及下载图像..由于许可......

我应该在这个罐子里做什么？

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:51:48.827

看起来您的脚本没有在该文件夹上执行 mkdir 的必要权限，请检查您是否具有写入权限。

# c++ - 两个范围之间的随机数

> ID：15946827
> 
> 赞同：5
> 
> 时间：2013-04-11T10:49:05.390
> 
> 标签：c++

rand() 或 qrand() 函数生成一个随机整数。

```
int a= rand(); 
```

我想得到一个介于 0 和 1 之间的随机数。我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T10:51:59.510

您可以将一个随机数生`int`成为 a `float`，然后将其除以[`RAND_MAX`](http://www.cplusplus.com/reference/cstdlib/RAND_MAX/)，如下所示：

```
float a = rand(); // you can use qrand here
a /= RAND_MAX; 
```

结果将在从零到一的范围内，包括端点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-11T10:56:13.530

使用 C++11，您可以执行以下操作：

包括随机标题：

```
#include<random> 
```

定义 PRNG 和分布：

```
std::default_random_engine generator; 
std::uniform_real_distribution<double> distribution(0.0,1.0); 
```

获取随机数

```
double number = distribution(generator); 
```

在[此页面](http://en.cppreference.com/w/cpp/numeric/random/uniform_real_distribution)和[此页面](http://www.cplusplus.com/reference/random/uniform_real_distribution/)中，您可以找到一些关于`uniform_real_distribution`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-11T10:54:45.387

检查[这篇](http://www.developer.nokia.com/Community/Wiki/Generating_random-value_integers_in_Qt)文章，它展示了如何将 qrand 用于您的目的，这是一个围绕 rand() 的线程安全包装器。

```
#include <QGlobal.h>
#include <QTime>

int QMyClass::randInt(int low, int high)
{
   // Random number between low and high
   return qrand() % ((high + 1) - low) + low;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-11T10:52:21.933

```
#include <iostream>
#include <ctime>
using namespace std;

//
// Generate a random number between 0 and 1
// return a uniform number in [0,1].
inline double unifRand()
{
    return rand() / double(RAND_MAX);
}

// Reset the random number generator with the system clock.
inline void seed()
{
    srand(time(0));
}

int main()
{
    seed();
    for (int i = 0; i < 20; ++i)
    {
        cout << unifRand() << endl;
    }
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-11T11:43:09.337

从定义精度的随机数中获取一个模块。然后进行类型转换以浮动并除以模块。

```
float randNum(){
   int random = rand() % 1000;
   float result = ((float) random) / 1000;
   return result;
} 
```

# meteor - 流星更新到 0.6.1 问题

> ID：15946830
> 
> 赞同：0
> 
> 时间：2013-04-11T10:49:20.833
> 
> 标签：meteor

系统提示我今天将我的流星从 0.5.4 更新到 0.6.1，当我更新时，我丢失了当天早些时候创建的所有代码。我尝试使用 meteor --release 0.5.4 回到以前的版本，但我收到错误消息“未知版本”，这是我之前的版本。

有没有其他人遇到过这个问题，如果有，您是如何解决的？

谢谢您的帮助！朱迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:02:41.197

"meteor --release xyz" 仅适用于 >= 0.6.0 的版本。因此，您可以使用该机制回到 0.6.0，但不能早于 0.6.0。

如果您想使用较早的版本。您可以编辑 smart.lock （如果您使用的是陨石，则存在 smart.lock。如果您不使用陨石，我不确定在流星版本之间切换有多容易）并更改流星的提交属性以使用提交为 0.5.4。它应该是提交：2d27799008fb87a06d4119c48097aa382d230b61

所以你应该拥有这是你的 smart.lock：

```
"meteor": {
    "git": "https://github.com/meteor/meteor.git",
    "branch": "master",
    "commit": "2d27799008fb87a06d4119c48097aa382d230b61"
} 
```

# c# - .Net webservice 找不到我的 DLL 文件

> ID：15946837
> 
> 赞同：1
> 
> 时间：2013-04-11T10:49:53.807
> 
> 标签：c#, .net, web-services, visual-studio, dllimport

我有一个`.NET` `c#`网络服务。在这个 Web 服务的实现中，我调用了我的`.dll`库的一个函数，我通过以下方式加载它：

```
[DllImport("myLibrary.dll")]
extern static myMethod(); 
```

我必须将我的 DLL 放在哪里？如果我在我的测试项目（它*不是*一个 Web 服务项目）中使用这个 DLL，它就可以工作。

否则我有一个错误，因为它找不到 dll。

错误：

```
System.DllNotFoundException was unhandled by user code
  Message=Unable to load DLL 'myLibrary.dll': The specified module could not be found. (Exception from HRESULT: 0x8007007E) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:59:33.593

该程序集需要与使用它的程序集位于同一目录中。因此，如果 Web 服务部署到 IIS 并且它的程序集驻留在其中，`bin`那么`myLibrary.dll`也需要在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T13:19:07.190

您是否在服务器上安装了“Visual C++ Redistributable für Visual Studio”？如果不是这个，这可能是问题所在。

# out-of-memory - 从智能卡读取时出现内存不足异常

> ID：15946841
> 
> 赞同：1
> 
> 时间：2013-04-11T10:50:12.830
> 
> 标签：out-of-memory, smartcard, apdu, gemalto

我正在使用 .Net 框架开发与 Gemalto 智能卡交互的应用程序（添加和检索），我已经连续完成了添加部分，但是当我尝试读取存储在卡中的数据时，我得到了一个主机应用程序中的 outOfMemoryException，谁能弄清楚为什么会发生这种情况？

这是从卡读取的主机应用程序中的代码：

```
for (int i = 0; i < 5; i++)
{
     try
     {
          string bookString = service.getBook(i);
     }catch (Exception x) { 
          MessageBox.Show("an error occur");
     }
} 
```

在卡上加载的应用程序中，我有这个方法：

```
public string getBook(int index) 
{
     return BookList[index].getBookID() + " , " + BookList[index].getBookDesc();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T08:14:10.417

> Gemalto .NET 卡包含用于数据存储的持久内存和易失性内存。持久内存充当卡的持久存储——即使从智能卡读卡器中取出卡后，数据仍会保留在其中。易失性内存在卡断电时重置，不能用于持久存储。

您如何存储数据，以及如何用数据填充 BookList？请进一步澄清。

你当然有内存限制，所以你不能存储到一定的大小，在这张 .net 卡中，你有 16KB 的易失性内存 (RAM) 和 70KB 的持久内存（包含程序集、存储内存）。

我在一些 Gemalto .net 卡中进行了测试，能够在持久存储内存中存储 20KB 的数据，在该限制之后，我得到了相同的异常 OutOfMemoryException（因为其他 50KB 充满了文件、程序集）。

此卡并非设计用于存储数据库、记录等，它用于存储密钥和密码等关键信息。所以不要保存超过这个大小，你的代码会很好，或者使用任何文本压缩算法（在客户端应用程序中）在存储到卡之前减少大小，但最后不要尝试存储超过这个~XX KB。

**更新**：由于这个限制，您不能在持久存储中存储超过 70K，也不能从卡中检索超过 16KB 到客户端（因为此数据将存储在本地变量中，即易失性内存中，然后检索回您的客户端，并且你在这里也有限制）。

所以这是你的问题的根源，你检索到的不仅仅是易失性内存可以容纳的：

```
public string getBook(int index)
{
  return bookList[index].getId() + " , " + bookList[index].getName();
} 
```

在返回值之前，此数据将处于临时变量中，并且由于您不能存储超过 16KB 的大小，您会收到异常 OutOfMemoryException。

解决方案是直接从客户端使用此存储（您有参考，所以只需使用它）：

```
public Book getTheBook(int index)
{
   return bookList[index];
} 
```

并且从客户端您可以访问 Book 功能（确保您的 Book 是结构，因为编组仅支持 Gemalto .net 卡中的结构和原始类型）：

```
Console.WriteLine(service.getTheBook(0).getName()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:17:51.060

您正在尝试智能卡不典型的任务。请注意，卡的 RAM 在少数 kByte 范围内，可在操作系统和 I/O 缓冲区之间进行划分。后者不太可能超过 2 kByte（请参阅卡手册），即使如此，您也需要使用[此答案](https://stackoverflow.com/questions/15645679/reading-big-file-from-a-javacard-applet)中提到的扩展长度 APDU 。因此，您的错误的可能原因是数据长度超过了 I/O 缓冲区的 RAM 量。虽然扩大缓冲区或使用扩展的 APDU 会扩大限制，但仍然很容易通过非常长的描述来达到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T08:42:09.820

仅在尝试检索长字符串（例如 100 个单词）时才出现此异常。我已经完成了添加部分，只需发送一串 BookDesc 即可完成。

```
public Book[] BookList=new Book[5];
public static int noOfBooks=0;

public string addBook(string bookDesc) 
{
   Book newBook=new Book();
   newBook.setBookDesc(bookDesc); 
   newBook.setBookID(noOfBooks);        
   BookList[noOfBooks]=newBook;
   noOfBooks++;
} 
```

# python - 从 Python 启动配置的 cmd

> ID：15946852
> 
> 赞同：0
> 
> 时间：2013-04-11T10:50:50.777
> 
> 标签：python, windows, process, exec

我在**Windows**上。我正在尝试编写一个 Python 2.x 脚本（我们称之为`setup.py`），它将启用以下场景：

1.  用户运行 cmd 打开控制台窗口
2.  在该控制台窗口中，用户运行`setup.py`
3.  用户发现自己在同一个控制台窗口中，但现在在那里运行的 cmd 的环境（环境变量）已被修改`setup.py`

`setup.py``FOO`通过添加一个带有 value的新环境变量`foo`并在 . 中添加一些东西来修改环境`PATH`。

在 Linux 上，我会简单地使用`os.exec*e`配置环境的 shell 替换 Python 进程。

我在 Windows 上尝试了相同的方法（如`os.exec*e(os.environ['ComSpec'])`），但它不起作用，新执行的 cmd 的环境是这样的：

*   运行只是`set`没有列出`FOO`，也没有显示对`PATH`. 跑步`set FOO`，然而，显示`FOO=foo`和`echo %FOO%`回声`foo`。

*   运行`set PATH`或`echo %PATH%`显示修改后的`PATH`变量。*在没有*修改的情况下运行`set path`或`echo %path%`显示值（即使环境变量在 Windows 上通常不区分大小写）。

**   如果我输入`exit`，conole 将保持挂起状态，不接受输入，直到我点击`Ctrl+C`. 之后，它显然又回到了`cmd`最初调用的那个`setup.py`。* 

 *很明显，`os.exec*e`不适用于 Windows 上的这种情况。有没有不同的方法来实现我想要的？是否有`subprocess.Popen()`标志组合可以让我退出调用 Python 进程并让被调用的 cmd 运行，最好是在同一个控制台中？还是会`CreateProcess`通过`ctypes`帮助访问？

如果有必要，我会满足于启动一个新的控制台窗口并关闭旧的，但我当然不能让旧的控制台窗口处于冻结状态，等待新创建的窗口关闭。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:32:17.247

如果在脚本之外使用 Windows 批处理文件是可以接受的，那么有一个更简单的解决方案，因为批处理文件在调用进程中运行，因此可以修改其环境。

给定一个文件`setup.bat`，它看起来像这样......

```
@echo off
for /f "tokens=*" %%a in ('python setup.py') do %%a 
```

...和一个`setup.py`看起来像这样的文件...

```
import os
print 'set FOO=foo'
print 'set PATH=%s;%s' % ('C:\\my_path_dir', os.environ['PATH']) 
```

...并假设`python.exe`在 PATH 中，然后`setup.bat`从命令行调用将在调用过程中设置环境变量，同时仍然允许您使`setup.py`脚本尽可能复杂，只要它打印您想要的命令执行到标准输出。

**根据评论更新**

如果您`setup.py`有多种操作模式，则可以为其制作`setup.bat`通用包装器。假设`setup.bat`看起来像这样......

```
@echo off
if "%1" == "setenv" (
    for /f "tokens=*" %%a in ('python setup.py %1') do %%a
) else (
    python setup.py %*
) 
```

......`setup.py`看起来像这样......

```
import sys
import os

if len(sys.argv) > 1 and sys.argv[1] == 'setenv':
    print 'set FOO=foo'
    print 'set PATH=%s;%s' % ('C:\\my_path_dir', os.environ['PATH'])
else:
    print "I'm gonna do something else with argv=%r" % sys.argv 
```

……这还不够吗？*

# android - SeekBar - 使用上面的 TextView 显示进度

> ID：15946858
> 
> 赞同：3
> 
> 时间：2013-04-11T10:51:01.477
> 
> 标签：android, scrollbar, seekbar

我正在尝试让 TextView 跟随进度条上的拇指并在 TextView 中显示进度的（肯定很简单？）任务。

问题是，对于小于最大一半的进度值，TextView 漂移到拇指的左侧，越来越多地离开正确的位置，反之亦然，进度值超过最大值的一半，TextView 越来越多地漂移到正确的。

以下是重现问题的代码版本...

布局.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:orientation="vertical" 
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".Seekbar_test" >

<SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:max="59"
    android:layout_marginTop="24dp" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

和.java

```
package com.example.seekbar_test;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

public class Seekbar_test extends Activity {
SeekBar fade_seek;
TextView fade_text;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_seekbar_test);

    fade_seek = (SeekBar) findViewById(R.id.seekBar1);
    fade_text = (TextView) findViewById(R.id.textView1);

    fade_seek.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {       
        @Override       
        public void onStopTrackingTouch(SeekBar seekBar) {            
        }       
        @Override       
        public void onStartTrackingTouch(SeekBar seekBar) {     
        }       
        @Override       
        public void onProgressChanged(SeekBar seekBar, int progress,boolean fromUser) {
            say_minutes_left(progress);
        }
    });
}

private void say_minutes_left(int how_many)
{
    String what_to_say = String.valueOf(how_many);
    fade_text.setText(what_to_say);

    int seek_label_pos = (int)((float)(fade_seek.getMeasuredWidth()) * ((float)how_many / 60f));
    fade_text.setX(seek_label_pos);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T18:39:32.663

这对我有用：

```
private void say_minutes_left(int how_many)
{
    String what_to_say = String.valueOf(how_many);
    fade_text.setText(what_to_say);
    int seek_label_pos = (((fade_seek.getRight() - fade_seek.getLeft()) * fade_seek.getProgress()) / fade_seek.getMax()) + fade_seek.getLeft();
    if (how_many <=9)
        {
            fade_text.setX(seek_label_pos - 6);
        }
    else
        {
            fade_text.setX(seek_label_pos - 11);
        }
} 
```

感谢 Pushpendra Kuntal 和 flightplanner @[无法在 seekbar 的拇指中获得 texBox 的正确位置](https://stackoverflow.com/questions/9175677/unable-to-get-right-position-of-texbox-in-thumb-of-seekbar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-04T23:21:52.177

以下解决方案适用于 API >= 15：

1.  覆盖 SeekBar 以创建在 api 15 上不可用的 getThumb() 方法：

    ```
    public class CustomSeekBar extends SeekBar {
        private Drawable thumb;
        public CustomSeekBar(Context context) {
            super(context);
        }

        public CustomSeekBar(Context context, AttributeSet attrs) {
            super(context, attrs);
        }

        public CustomSeekBar(Context context, AttributeSet attrs, int defStyleAttr) {
            super(context, attrs, defStyleAttr);
        }

        @Override
        public void setThumb(Drawable thumb) {
            super.setThumb(thumb);
            this.thumb = thumb;
        }

        @Override
        public Drawable getThumb() {
            return thumb;
        }
    } 
    ```

2.  并像这样使用它：

    ```
    correctX = customSeekBar.getThumb().getBounds().left; 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-20T12:28:30.757

适用于 Ken Nichols 代码，但这是一个更好的决定，例如，将 TextView 居中到 ProgressBar(SeekBar) 中的当前位置：

```
 private void say_minutes_left(int how_many)
{
    String what_to_say = String.valueOf(how_many);
    fade_text.setText(what_to_say);
    int seek_label_pos = (((fade_seek.getRight() - fade_seek.getLeft()) * fade_seek.getProgress()) / fade_seek.getMax()) + fade_seek.getLeft();
  fade_text.setX(seek_label_pos - fade_text.getWidth() / 2);
} 
```

如果您的 ProgressBar(SeekBar) 中有填充，则可以使用此代码的更通用版本：

```
 private void say_minutes_left(int how_many)
    {
        String what_to_say = String.valueOf(how_many);
        fade_text.setText(what_to_say);
        int left = fade_seek.getLeft() + fade_seek.getPaddingLeft();
        int right = fade_seek.getRight() - fade_seek.getPaddingRight();
        int seek_label_pos = (((right - left * fade_seek.getProgress()) / fade_seek.getMax()) + left;
      fade_text.setX(seek_label_pos - fade_text.getWidth() / 2);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-10T19:32:53.070

使用它，我们正在根据进度计算 x 位置并将其设置为 textview

```
seekBar.setOnSeekBarChangeListener(object : SeekBar.OnSeekBarChangeListener {
        override fun onProgressChanged(seekBar: SeekBar?, progress: Int, fromUser: Boolean) {

               var xPosition=  (((seekBar1.right - seekBar1.left) / seekBar1.max) * seekBar1.progress ) + seekBar1.left
               textView1.translationX = xPosition.toFloat() - (textView1.width/2)
        }

        override fun onStartTrackingTouch(seekBar: SeekBar?) {
        }

        override fun onStopTrackingTouch(seekBar: SeekBar?) {
        }

    }) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-25T06:33:48.450

```
 //Get the thumb bound and get its left value
    int x = seekBar.getThumb().getBounds().left;
    //set the left value to textview x value
    textView.setX(x); 
```

使用它根据进度移动文本视图

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-11T11:18:44.210

文本视图必须是

```
 <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceLarge"
        /> 
```

并删除它：

```
 int seek_label_pos = (int)((float)(fade_seek.getMeasuredWidth()) * ((float)how_many / 60f));
  fade_text.setX(seek_label_pos); 
```

希望有帮助。

# c# - 按钮事件不起作用

> ID：15946859
> 
> 赞同：0
> 
> 时间：2013-04-11T10:51:03.333
> 
> 标签：c#, asp.net-mvc, actionresult

我要这个：

```
@using (Html.BeginForm("bgcTest", "CompaniesController")) 
{
    <p>
        Ange BolagsID: <br />
        <input type="text" name="BolagsID" />
        <input type="submit" value="bgc test" />
    </p>
} 
```

要触发此事件：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult bgcTest(string BolagsID)
{
     ...
} 
```

但我得到了错误：

> 无法找到该资源。
> 
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/CompaniesController/bgcTest

我这辈子都想不通。如果我只是创建一个动作链接，我会触发我的方法，但我需要一个用户输入的变量来配合触发。

我究竟做错了什么？

（这是我第一次使用 MVC，我必须在已经存在的项目中实现一些功能。为了工作。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:54:45.643

您的控制器类（.cs 文件）的名称是`CompaniesController.cs`. 这是 MVC 会自动将其识别为控制器的约定（默认行为）。在您的视图中引用此控制器时，`Companies`仅使用。如果你使用`CompaniesController`MVC 会尝试找到一个名为`CompaniesControllerController`.

正确代码：

```
@using (Html.BeginForm("bgcTest", "Companies")) 
```

# javascript - Node.JS 通过 Socket.IO 发送错误数据

> ID：15946860
> 
> 赞同：2
> 
> 时间：2013-04-11T10:51:04.687
> 
> 标签：javascript, node.js, socket.io

我正在使用 Node.JS 和 Socket.IO 来交易数据。我有以下“模式”：

*   一个“本地”Socket.IO 服务器，它的 setInterval 为 10 秒，在每次迭代中广播不同的数据。
*   “全局” Socket.IO 服务器，根据 HTML 客户端的请求，从“本地”服务器接收数据（以下代码中的 ioLocal 变量是 socket.io-client），使用传递的数字修改数据HTML 客户端请求并发送到客户端。

问题是 HTML 客户端正在接收错误的数据。想象一下，对于时间戳，本地服务器广播消息“2”。同时，两个不同的 HTML 客户端请求数据，第一个请求“2”，第二个请求“3”。预期的是第一个收到“4”（2 * 2），第二个收到“6”（2 * 3），但不工作。相反，第一个接收“4”，第二个接收“12”（4*3）。如果我有第三个客户端发送“2”，它将收到“24”（12 * 2）。

我尝试为每个客户端创建一个不同的 var，使用 socket.set 和 socket.get，一组 socket.id，但这些解决方案都不起作用。

这有什么问题？是范围问题吗？谢谢你的时间。

“全球”服务器

```
var ioGlobal = require('socket.io').listen(9090);

ioGlobal.set('log level', 1);
ioGlobal.enable('browser client minification'); // send minified client
ioGlobal.enable('browser client etag'); // apply etag caching logic based on version number
ioGlobal.enable('browser client gzip'); // gzip the file
ioGlobal.set('transports', [ 'websocket', 'xhr-polling' ]);
ioGlobal.set("polling duration", 10);
ioGlobal.set('sync disconnect on unload', true);

var ioLocal = require('socket.io-client').connect('http://10.0.0.219:9091', {
        'connect timeout' : 1500,
        'reconnect' : true,
        'reconnection delay' : 500,
        'max reconnection attempts' : 20
});
ioGlobal.sockets.on('connection', function(iSocket) {
    debug && console.log('Client '+iSocket.id+' connected.');

    iSocket.on('disconnect', function() {
        debug && console.log("Client "+iSocket.id+" disconnected.");
    });

    iSocket.on('data_rt', function(num) {

        ioLocal.on('data_broadcast', function(data) {

            //do something to data with num
            data = data*num;

            iSocket.emit('rsp_data_rt', data);
        });
    });
}); 
```

“本地”服务器

```
var ioLocal = require('socket.io').listen(9091);
ioLocal.sockets.emit('data_broadcast', 2); 
```

HTML 客户端

```
<!DOCTYPE html5>
<html>
    <head>
        <title>Socket.IO MultiClient Test</title>

        <script type="text/javascript" src="http://10.0.1.180:3000/socket.io/socket.io.js"></script>
        <script>
            var socket = io.connect('http://10.0.0.219:9090');

            function go(){
                var message = document.getElementById('message').value;
                socket.emit('data_rt', message);
            };

            socket.on('rsp_data_rt', function(num){
                    document.getElementById('result').innerHTML = num;
            })
        </script>

    </head>
    <body>
        <h1>Socket.IO Multiclient</h1>
            Message: <input type="text" id="message"><br />
            <button type="button" onclick='go()'>Send</button>
            Result: <span id="result"></span>
    </body>
</html> 
```

# c++ - 链接库两次和可执行文件的大小

> ID：15946861
> 
> 赞同：3
> 
> 时间：2013-04-11T10:51:09.147
> 
> 标签：c++, dependencies, static-libraries

在使用静态库编译程序时，许多来源（包括 SO 社区）向我建议两次包含该库。

如：

```
gcc main.c -lslA -lslB -lslC -lslA -lslB -o final 
```

1.  这是否会导致更大的可执行文件（即链接器是否足够聪明以避免双重包含？）。

2.  这是（多重包含）正确的解决方案还是解决方法（即总是存在更合适的方法，即使处理它的方法更难）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-11T11:02:03.127

多次包含该库的唯一原因是，例如，如果`slA`需要一个由 解析的符号，`slB`但`slB`需要一个由`slA`. 链接器执行单遍来解析符号，但重复您的库实际上会导致该库的第二遍。它不会改变输出的大小，但也没有必要：

您可以告诉 gcc 链接器将某些库组合在一起，而不是多次显示您的库 - 让它做它需要做的事情来解析该组中的符号。例如：

`gcc main.c -Wl,--start-group -lslA -lslB -lslC -Wl,--end-group -o final`

# pdf - 如何将ps转换为外观相同的pdf文件？

> ID：15946864
> 
> 赞同：2
> 
> 时间：2013-04-11T10:51:19.230
> 
> 标签：pdf, converter, postscript

我有一个`ps`由几页组成的文件，边界框有以下条目：

```
%%PageBoundingBox: 36 36 7164 2124 
```

当用它查看这个文件时，`okular`它看起来没问题。转换为pdf后如下

```
ps2pdf graph.ps 
```

a`pdf`已创建，但每个页面仅显示每个`ps`文件的放大倍数。对于转换，我还尝试了类似的选项

```
-sPAPERSIZE=letter 
-dEPSCrop 
```

没有明显的效果。我的问题：如何将我`ps`的文件转换为`pdf`文件，以使查看`okular`结果时看起来相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:08:27.870

似乎必须为转换指定所需的宽度和高度，在这种情况下，命令将是

```
ps2pdf -dDEVICEWIDTHPOINTS=7128  -dDEVICEHEIGHTPOINTS=2088  isearch.ps 
```

as`7128`是给定示例的边界框的宽度和`2088`高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T09:34:39.837

如果您正在使用`Windows`（因此`gswin32c.exe`），您可以在 cmd 提示符中使用以下内容：

```
c:\Program Files (x86)\gs\gs9.18\bin\gswin32c.exe" -sDEVICE=pdfwrite -o TheFinalOutput.pdf YourFileToConvert.ps 
```

# r - 有没有办法访问replicate() 中的迭代次数？

> ID：15946866
> 
> 赞同：4
> 
> 时间：2013-04-11T10:51:24.090
> 
> 标签：r, base, apply, replicate

是否有某种方法可以访问`replicate`函数中的当前复制数，以便我可以将其用作重复评估中的变量？例如，在这个简单的例子中，我想使用当前的复制号来生成当前复制号的可变长度向量列表。例如，`x`下面将代表当前的复制：

```
replicate( 3 , rep( x , sample.int(5,1) ) ) 
```

我知道这个简单的例子很容易做到`lapply`

```
lapply( 1:3 , function(x) rep( x , sample.int(5,1) ) ) 
```

但是你可以访问复制计数器`replicate`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:01:40.853

不，至少不是以一种受支持的、用户友好的方式。正如阿伦所说：

```
> replicate
function (n, expr, simplify = "array") 
sapply(integer(n), eval.parent(substitute(function(...) expr)), 
    simplify = simplify)
...

> sapply
function (X, FUN, ..., simplify = TRUE, USE.NAMES = TRUE) 
{
    FUN <- match.fun(FUN)
    answer <- lapply(X = X, FUN = FUN, ...)
    ... 
```

现在，这就是`sapply`您是否通过的结果`3`：

```
> integer(3)
[1] 0 0 0 
```

为什么不编写自己的版本`replicate`作为快捷方式？

# php - 已弃用的 PHP 代码

> ID：15946869
> 
> 赞同：-4
> 
> 时间：2013-04-11T10:51:33.347
> 
> 标签：php

好的，我不是 PHP 专家，所以我采用了一个旧网站并缓慢但肯定地恢复它。

```
<?php
$host="localhost"; // Host name 
$username="****"; // Mysql username 
$password="****"; // Mysql password 
$db_name="****"; // Database name 
$tbl_name="****"; // Table name 

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$result = mysql_query("SELECT * FROM lbs_ WHERE id>0 ORDER BY date DESC LIMIT 0,15");
?> 
```

连接到服务器部分是我关心的问题我知道它已被弃用，我应该使用 MySQLi 广告或 PDO

问题是我只是将 mysql_query 更改为 mysqli 来改变它还是我需要更改很多其他编码。我已阅读[http://php.net/mysql_query](http://php.net/mysql_query)但仍不确定如何纠正此问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:55:08.473

不，这不是简单的一对一替换，存在一些差异。[你可以从这里](https://wikis.oracle.com/display/mysql/Converting+to+MySQLi)下载一个转换工具，它可以帮助处理大部分代码。

此外，mysqli 和 PDO 的好处之一是*prepared statements*，应该使用它而不是在查询中插入字符串。转换工具不会为您完成这项工作。

# mysql - 将多个表合并为一个

> ID：15946871
> 
> 赞同：-5
> 
> 时间：2013-04-11T10:51:48.170
> 
> 标签：mysql

我正在修改我之前的场景，我想知道在销售订单中放置的序列详细信息与在交货收据中填写的序列详细信息订单是否正确。下面有三个表，(1)TABLE A - 这是我在执行下面的脚本时的当前输出。(2) 表 B - 由于序列详细信息，我想加入的另一个表（表 B）。(3) TABLE DESIRED 输出 - 我想实现.. 考虑到：如果 basetype = 17，那么它应该在另一列 (SO_SERIAL) 中插入序列
，如果 basetype = 15，那么它应该在另一列 (DR_SERIAL) 中插入序列详细信息。通过这个，我能够分析 SO 中使用的序列与 DR 中使用的不同/相同。

谢谢你的帮助。

```
select a.CardCode 'BPNAME', c.itemcode, a.DocEntry 'SO_DOCENTRY', a.DocNum 'SO Num', c.ObjType'SO_Btype',
b.docEntry 'DR_DOCENTRY',b.BaseRef 'DR_num',b.ObjType 'dr_type'
from ORDR a 
LEFT join dln1 b on a.docentry = b.baseentry 
left join RDR1 c on a.DocEntry = c.DocEntry 
```

表 A。

```
BP      ITEMCODE   SO_DOCENTRY   SO_NUM    SO_BTYPE    DR_DOCENTRY    DR_NUM   DR_TYPE
======================================================================================
CITALI  TYB20001M   144900       20152733    17         130775    20152733     15 
```

表 B。

```
SERIAL               ITEMCODE     BASEENTRY   BASENUM  BASETYPE  QUANTITY    CARDCODE
=====================================================================================
MCWF-12001-20120601  TYB20001M    144900      20152733  17        10.000000   CITALI    
MBAL-13001-20130101  TYB20001M    130775      103073    15        5.000000    CITALI 
```

期望的输出：

```
BP      ITEMCODE   SO_NUM    SO_BTYPE   SO_SERIAL            DR_NUM   DR_TYPE     DR_SERIAL
============================================================================================
CITALI  TYB20001M  20152733   17         MCWF-12001-20120601  20152733  15    AL-13001-20130101 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:00:00.903

> 通过这个，我能够分析 SO 中使用的序列与 DR 中使用的不同/相同。

要将 so 条目与 dr 条目匹配，您可以将表 b 加入两次，第一次采用“so”条目，然后第二次采用“dr”条目。所以你会得到“header”、“SoEntry”、“DrEntry”。然后你可以比较它们。举这个例子

```
select t1.BP, t1.ITEMCODE, t21.Serial as SO_SERIAL, t22.SERIAL as DR_Serial
FROM table1 t1
LEFT JOIN table2 t21 on t21.ITEMCODE=t1.ITEMCODE and t21.BASETYPE=17
LEFT JOIN table2 t22 on t22.ITEMCODE=t1.ITEMCODE and t22.BASETYPE=15 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:27:40.253

我看到了你的问题。你需要加入`itemcode`和`BASETYPE`。所以试试这个：

```
select A.BP
     , A.ITEMCODE
     , A.SO_NUM
     , A.SO_BTYPE
     , B.serial as SO_SERIAL
     , A.DR_NUM
     , A.DR_TYPE
     , A.DR_SERIAL
from a 
join b on a.itemcode = b.itemcode and a.so_btype = b.basetype 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:01:21.457

您需要学习基本的连接。
**绝对你将不得不加入这两个表。**
这是一个很好的链接，您可以从这里开始
[http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)
[https://stackoverflow.com/questions/7877720/the-best-tutorial-on-joins-in- mysql](https://stackoverflow.com/questions/7877720/the-best-tutorial-on-joins-in-mysql)

# java - 如何创建看起来像它的 TextViews 比它大的列表项？

> ID：15946875
> 
> 赞同：0
> 
> 时间：2013-04-11T10:51:51.750
> 
> 标签：java, android, xml, listview, background

我有一个列表视图，需要创建具有稍微突出列表项的标签（星号和 15 分钟）的列表项 - 看起来它们更大。

![在此处输入图像描述](https://i.stack.imgur.com/TqYwZ.png)

我必须为 listitem 布局制作什么样的背景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:01:03.727

使用 9patch 图像制作顶部具有几个像素透明度的背景，不需要 XML 形状（除非您在此处绘制背景），只需使用 PNG 文件就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:56:18.493

只需为您的列表视图创建一个自定义列表视图适配器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:59:25.227

创建一个大约 8dp 透明的​​背景形状 xml，然后使用该 xml 作为您的列表视图背景

# ios - 应用内购买一次不能购买超过 10 件商品

> ID：15946881
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:52:13.637
> 
> 标签：ios, objective-c, in-app-purchase

当我在沙盒模式下测试 IAP 时出现错误。什么是意思以及如何解决它

![在此处输入图像描述](https://i.stack.imgur.com/4kJq8.png)

![在此处输入图像描述](https://i.stack.imgur.com/V1ega.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:56:11.197

制作更小的“包装”。

例如：

*   1 个小部件
*   一包 10 个小部件
*   一包 50 个小部件

# git - Git：不要将文件推送到存储库，而是将文件保存在那里

> ID：15946887
> 
> 赞同：0
> 
> 时间：2013-04-11T10:52:38.533
> 
> 标签：git, heroku

我在 Heroku 上有一个用于应用程序的 git 存储库。我的应用程序将信息写入我之前提交的数据库**db.csv 。**

现在，每当我对其他文件进行更改然后提交时：

```
git commit -am "something"
git push heroku master 
```

数据库文件被覆盖。我尝试添加一个 .gitignore 文件，但这会从存储库中删除该文件，因此不再位于托管站点上。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:38:01.777

.gitignore 文件不会删除您的文件，它只会忽略它（顾名思义）。

也许你删除了它，然后提交了删除。如果要忽略已跟踪的文件，则必须将此文件添加到 .gitignore 并执行

```
git rm --cached db.csv
git commit 
```

--cached 选项将保留您的文件但停止跟踪它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T12:06:15.263

您可能希望单独暂存文件，而不是使用单个命令添加和提交。

```
git add file1 file2 ...
git commit -m "something"
git push heroku master 
```

# magento - 寄存器变量

> ID：15946889
> 
> 赞同：0
> 
> 时间：2013-04-11T10:52:43.623
> 
> 标签：magento

我有以下问题，我不知道这是一个好方法，在我添加的网格部分的 list.phtml 中......

```
<?php Mage::register('listgridproduct', $_product); ?>
<?php echo $this->getChildHtml('data_list_grid'); ?>
<?php Mage::unregister('listgridproduct'); ?> 
```

早些时候我在 catalog.xml 部分定义了这个块

```
<!--
Category layered navigation layout
-->
<block type="stock/listgrid" name="data_list_grid" template="stock/listgrid.phtml"/> 
```

我的街区课

```
class Tim_Stock_Block_Listgrid extends Mage_Core_Block_Template {            
    public function getProductId(){            
        $id=Mage::registry('listgridproduct')->getId();               
        var_dump($id);
    }        
} 
```

在网格上执行脚本后，块显示所有产品的第一个产品的 ID。 ![在此处输入图像描述](https://i.stack.imgur.com/V4eGK.jpg) 谢谢帮助

# ruby-on-rails - Rubyzip：将 zip 文件直接导出到 S3 而不将 tmpfile 写入磁盘？

> ID：15946890
> 
> 赞同：9
> 
> 时间：2013-04-11T10:52:52.227
> 
> 标签：ruby-on-rails, ruby, amazon-s3, zip, rubyzip

我有这段代码，它将一个 zip 文件写入磁盘，将其读回，上传到 s3，然后删除该文件：

```
compressed_file = some_temp_path

Zip::ZipOutputStream.open(compressed_file) do |zos|
  some_file_list.each do |file|
    zos.put_next_entry(file.some_title)
    zos.print IO.read(file.path)
  end
end # Write zip file

s3 = Aws::S3.new(S3_KEY, S3_SECRET)
bucket = Aws::S3::Bucket.create(s3, S3_BUCKET)
bucket.put("#{BUCKET_PATH}/archive.zip", IO.read(compressed_file), {}, 'authenticated-read')

File.delete(compressed_file) 
```

此代码已经有效，但我想要的是**不再创建 zip 文件**，以节省几个步骤。我想知道是否有一种方法可以将 zipfile 数据直接导出到 s3，而不必先创建一个 tmpfile，读回它，然后删除它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T12:07:28.357

我想我刚刚找到了我的问题的答案。

它是[Zip::ZipOutputStream.write_buffer](https://github.com/aussiegeek/rubyzip/blob/master/lib/zip/zip_output_stream.rb#L54)。当我得到它的工作时，我会检查并更新这个答案。

**更新**

它确实有效。我的代码现在是这样的：

```
compressed_filestream = Zip::ZipOutputStream.write_buffer do |zos|
  some_file_list.each do |file|
    zos.put_next_entry(file.some_title)
    zos.print IO.read(file.path)
  end
end # Outputs zipfile as StringIO

s3 = Aws::S3.new(S3_KEY, S3_SECRET)
bucket = Aws::S3::Bucket.create(s3, S3_BUCKET)

compressed_filestream.rewind
bucket.put("#{BUCKET_PATH}/archive.zip", compressed_filestream.read, {}, 'authenticated-read') 
```

`write_buffer`返回一个StringIO并且需要在ing之前[先](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html)[倒带](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/stringio/rdoc/StringIO.html#method-i-rewind)流。`read`现在我不需要创建和删除 tmpfile。

我现在只是想知道是否`write_buffer`会比内存更广泛或更重`open`？或者是周围的其他方式？

# php - 如何将 VB.NET 连接到 Web 主机

> ID：15946891
> 
> 赞同：1
> 
> 时间：2013-04-11T10:52:53.140
> 
> 标签：php, mysql, vb.net, web

基本上，我想创建一个这样的应用程序：[YOUTUBE](http://www.youtube.com/watch?feature=player_embedded&v=6Y6b4jtkguU)

我想创建一个应用程序，当我从我的网络主机（PHP 或 MYSQL）添加一些信息时，VB.NET 会读取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:46:49.073

From your website you'll need to insert the data into your MySQL database.

The problem with using the database provided by your web host is that the chances are, due to 'Security Reasons' the will have disabled external access.

This means that any files outside of your web server (your sites root/sub directory) will not be able to access the data. So, while your website will be able to connect without a problem, your program will not.

Some hosts give its customers the opportunity to add an IP address to a white list which enables them to bypass their security system. However, most will not give you this option.

My suggestion is that you either rent a VPS where you can run both the WebServer and Your MySQL database (and PHPMyAdmin) from or Set Up A MySQL database on your PC (its not that difficult just read the manual and youll be fine). If you had a VPS then you would no longer need your pre hosted webserver as you could run your own. You would need to point your domain name to your VPS webserver. It will act just like any other.

By running your own MySQL Databse you are given the option to enable remote access. This means that any external entity with the correct details will be able to connect.

If you cant get a VPS or don't want to run your own server or rent a server that allows for external access. Check out db4free.net .They provide you with a free MySQL Database with external access for Developers to test out their systems. They are not ultra fast so that's something you may want to be aware of. Another thing is that your data that's held can be removed at any time. The servers are not there to be used permanently just for testing.

**So how do I connect to it through VB???**

Good Question! To establish a connection, I suggest you use MySQL.Data library provided my DevMySQL themselves and import it into your program. Done so by `Imports MySQL.Data.MySQLClient`. This is written by them to work with their databases. Yes you can connect using some of the functions already in VB but in my opinion they don't work as efficiently. You'll need to download the MySQLConnector to connect as well.

Hopefully That Answers Your Questions. Any Problems Just Comment below!

Regards

Joe

# java - 为什么将类传递给 Java 中的方法很有用？

> ID：15946892
> 
> 赞同：4
> 
> 时间：2013-04-11T10:52:55.077
> 
> 标签：java

这在我的课程中没有涉及，我很难想出我想要这个的原因。我遇到了下面的代码：

```
OpenNetworking proxy = service.getPort(OpenNetworking.class); 
```

在上面的行中，我可以看到它正在返回端口并将类传递给方法，但我读到它`OpenNetworking.class`是因为尚未实例化。我显然错过了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:57:07.960

[这是工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)模式的一个示例。

类类型被提供给服务以给出`Port`指定类型`OpenNetworking`。

在这种情况下，类类型很方便，因为它是在创建对象时为对象提供唯一标识符的最简单方法。如果对象的状态随着包含对象的类型而改变，则不需要维护它`class`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T11:03:08.587

这样做的原因有很多：

> 1.  控制类的实例数：假设您想控制一个类的实例数，您可以将构造函数设为私有或包级别，并在有人调用您的方法时返回相同的实例
> 2.  安全性：您可能希望您的类是安全的，并且通常不希望任何人实例化您的类。
> 3.  依赖关系：您的类可能具有依赖关系，只能在运行时找出，然后服务类使用反射来适当地实例化类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:54:56.373

这里我们传递类类型（Java 中的类）。所以getPort方法中的处理是根据类的类型来完成的，我们不需要一个Object实例来处理它。当然，它与此代码不同（无法编译）：

```
OpenNetworking proxy = service.getPort(new OpenNetworking()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T10:57:44.813

显然，该方法的`service.getPort();`行为根据参数中的类型，想象有一个端口用于 openNetworking，另一个用于 closeNetworking，因此提供类名作为参数就足以获得所需的端口号，可以创建一个枚举但是扩展现有代码将迫使您也为每种类型扩展枚举。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T11:02:10.237

同样由于泛型的限制，当你有一个泛型类/方法并且你需要创建一个新实例时，你将需要一个类。例如：

```
class SomeClass<T> {
    public static<T> T create() {
        return new T(); // will not work
    }

    public static<T> T create(Class<T> clazz) {
        return clazz.newInstance(); //will work
    }
} 
```

所以你需要类实例来创建该类型的新对象。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-11T11:04:59.717

使用的方法有这样的定义：

```
public <T> T getPort(Class<T> serviceEndpointInterface) 
```

所以它返回一个扩展类 T 的对象的实例（代理，合成类实例）

# .net - 是否可以在 .Net 框架中调用 R 函数和库

> ID：15946894
> 
> 赞同：2
> 
> 时间：2013-04-11T10:53:01.270
> 
> 标签：.net, winforms, r, user-interface

是他们在.net框架中调用所有R包/库和函数（光栅，rgdal，maptools等包）的任何可能方式，以便我能够访问R的所有功能并使用.Net前端运行R脚本……

# c# - 根据运行时设置的列表限制查询列

> ID：15946896
> 
> 赞同：1
> 
> 时间：2013-04-11T10:53:07.557
> 
> 标签：c#, linq, entity-framework

我有以下查询：

```
// Type T is constrained to a class that contains "ID" property
// propertiesToQuery is a list constructed based on type T
var set = AppContext.Set<T>();
var result = set.SelectMany(x => propertiesToQuery.Select(p => new { x.ID, Value = x.GetType().GetProperty(p.Name).GetValue(x) })
                                                          .Where(p => p.Value != null)
                                                          .Select(p => new SearchIndexItem
                                                                           {
                                                                               Key = p.Value.ToString(),
                                                                               Url = Url.Action("Edit", type.Name, new { p.ID }),
                                                                               Type = type
                                                                           })); 
```

现在因为 linq to entity 不允许在查询中使用 PropertyInfo，我需要在集合上运行 ToList() 以便首先在 db 上执行查询，然后执行所需的 SelectMany()。

这个查询比它需要从数据库中查询的多，当有很多数据时这将是一个问题（查询的列是字符串类型，其他可能是 blob，这些是我不想从中提取数据的）

所以问题是如何根据运行时构建的列表限制从数据库查询的列？

我试图创建一个表达式树，并将其传递给集合上的 Select() 方法，但问题在于创建匿名类型，这可能与类型 T 不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:03:44.407

您在这里的观察：

> 问题在于创建匿名类型，根据类型 T 可能会有所不同

是准确的；在运行时构造结果*列是非常有问题的。*唯一简单的方法是让它看起来像您正在填充具有所有成员的类型的*投影*，例如相当于：

```
// where our list is "Foo", "Bar":
x => new SomeType {
   Foo = x.Foo,
   Bar = x.Bar
   // but other SomeType properties exist, but are't mapped
} 
```

明显的竞争者将是实体类型，因此您将一组`Customer`行部分映射到`Customer`对象 - 但大多数 ORM 不会让您这样做：如果投影是实体类型，他们想要整个类型（即`x => x`）。您可能能够创建实体类型的第二个版本，它是常规 POCO/DTO 但不是实体模型的一部分，即

```
Customer x => new CustomerDto {
   Foo = x.Foo,
   Bar = x.Bar
} 
```

您可以`Expression.MemberInit`在运行时执行此操作。例子：

```
class Foo
{
    public string A { get; set; }
    public int B { get; set; }
    public DateTime C { get; set; }
}
class FooDto
{
    public string A { get; set; }
    public int B { get; set; }
    public DateTime C { get; set; }
}
class Program
{
    static void Main(string[] args)
    {
        var data = new[] { new Foo { A = "a", B = 1, C = DateTime.Now}}
                 .AsQueryable();
        var mapped = PartialMap<Foo, FooDto>(data, "A", "C").ToList();
    }
    static IQueryable<TTo> PartialMap<TFrom, TTo>(
        IQueryable<TFrom> source, params string[] members)
    {
        var p = Expression.Parameter(typeof(TFrom));
        var body = Expression.MemberInit(Expression.New(typeof(TTo)),
            from member in members
            select (MemberBinding)Expression.Bind(
                typeof(TTo).GetMember(member).Single(),
                Expression.PropertyOrField(p, member))
            );
        return source.Select(Expression.Lambda<Func<TFrom, TTo>>(body, p));
    }
} 
```

在输出中，`A`并且`C`有值，但`B`没有。

# jquery - 在 jquery 中测试空 div

> ID：15946898
> 
> 赞同：0
> 
> 时间：2013-04-11T10:53:13.193
> 
> 标签：jquery

我有这个 jquery 代码，我想在可用数字**div**上添加一个测试，以查看它是否为空。如果是这种情况，我想删除它。有人可以帮我吗？

```
<script>
$(document).ready(function() {
    $("#teln_operatorbundle_centrextype_numberrange").change(requestNumber);
});

function requestNumber() {

    // alert("ok");
    $.get(('http://localhost/Symfony/web/app_dev.php/select/' + $("select#teln_operatorbundle_centrextype_numberrange").val()),
            function(data) {
                $('#availableNumber').html(data);
            }
    );
    if ($('#availableNumber').is(':empty')) {
        $('#availableNumber').remove();
    }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:58:55.817

您可以检查`#availableNumber`div 中的文本，如果发现为空，请通过以下方式将其删除：

```
if($.trim($('#availableNumber').text()) == '') {
    $('#availableNumber').remove();
} 
```

您可以使用`$.trim()`从上面的 div 中删除任何空格。

* * *

这也应该可以解决问题：

```
if($('#availableNumber:empty').length > 0){
   $('#availableNumber:empty').remove();
} 
```

上面的行将删除`#availableNumber`if found empty。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T10:59:48.217

```
var contents = $('#availableNumber');
if (!contents.children().length) {
    contents.remove();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:03:06.880

你可以检查像

```
if($('#availableNumber').text().length < 1) {
    $('#availableNumber').remove();
} 
```

这也应该覆盖空间

# nsmutablearray - NSMutableArray 可能在发送删除消息时先保留然后释放两次？

> ID：15946904
> 
> 赞同：0
> 
> 时间：2013-04-11T10:53:35.213
> 
> 标签：nsmutablearray, retain

这是一个与[此](https://stackoverflow.com/questions/4118245/nsmutablearray-remove-object-increases-reference-count/4124151#4124151)相关的问题。

从可变数组中删除对象时，我注意到可能会向该对象发送“保留”消息，因此我搜索了上述问题，其中[wm](https://stackoverflow.com/questions/4118245/nsmutablearray-remove-object-increases-reference-count/4124151#4124151)给出的答案提到 NSMutableArray 的内部实现可能首先保留对象，然后移除该对象时释放它两次。

我的问题是：有任何证据证明这一点吗？或者有人知道任何相关细节吗？

`retain`我在分析以下日志时遇到了这个问题，我知道我的代码有问题，但我关心的不是错误本身，而是“当有一些工作时”是否是事实`removeObject`。

```
Exception Type:  EXC_BAD_INSTRUCTION (SIGILL)
Exception Codes: 0x0000000000000001, 0x0000000000000000
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Application Specific Information:
objc[299]: FREED(id): message retain sent to freed object=0x23f62a0

Thread 0 Crashed:  Dispatch queue: com.apple.main-thread

0   libobjc.A.dylib                 0x9a3694fd _objc_error + 116
1   libobjc.A.dylib                 0x9a369533 __objc_error + 52
2   libobjc.A.dylib                 0x9a36783a _freedHandler + 58
3   com.apple.CoreFoundation        0x9879a8cb -[NSMutableArray removeObject:range:identical:] + 331
4   com.apple.CoreFoundation        0x9879a770 -[NSMutableArray removeObject:] + 96 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:08:27.077

NSMutableArray 在内部做什么并不重要。这与你无关。只要它遵循内存管理规则，即它保留它以后需要保留的任何东西，并且只释放它保留的东西，它是否也保留并在随机的地方额外释放20次也没关系。添加额外的保留释放对永远不会降低程序的正确性。

如果您遇到崩溃，那么您在代码中做错了什么。

# gcc - 如何为 x86 软浮点或没有浮点单元 (fpu) 编译 glibc

> ID：15946905
> 
> 赞同：2
> 
> 时间：2013-04-11T10:53:37.517
> 
> 标签：gcc, gnu, glibc

我有一个不支持浮点单元 (FPU) 的 x86 内核，我正在编写一个用于浮点计算的微内核，例如 add、div、mul、pow、log 等。根据需要，我必须使用静态库来做浮动计算。我发现使用具有数学库的 glibc（来自 GNU）。这意味着我必须使用“-msoft-float”编译器开关或“没有-fp”来编译 glibc。在 stackoverflow.com 中进行搜索后，我发现 glibc 可以通过如下给出的命令序列进行编译（来自链接 - [How to compile glibc 32bit on an x​​86_64 machine](https://stackoverflow.com/questions/8004241/how-to-compile-glibc-32bit-on-an-x86-64-machine)）：

注意-我有在 win7 桌面上运行 VMware 的 Ubuntu12.04 版本。

```
$Mkdir     build-glib
$Cd      build-glib
$../glibc-2.17/configure --prefix=$HOME/glibc-2.17  --host=i686-linux-gnu \
--build=i686-linux-  gnu \
CC="gcc -m32" CXX="g++ -m32" CFLAGS="-O2 -march=i686" \
CXXFLAGS="-O2 -march=i686"
$make
$..... 
```

以上构建成功。现在我尝试编译“with_fp='no'”配置选项，但出现以下错误。

```
$../glibc-2.17/configure --prefix=$HOME/glibc-2.17  --host=i686-linux-gnu \
--build=i686-linux-gnu \
CC="gcc -m32" CXX="g++ -m32" CFLAGS="-O2 -march=i686" \
CXXFLAGS="-O2 -march=i686"  with_fp=”no”
$make
$.....

gcc -m32 ../sysdeps/ieee754/dbl-64/e_exp.c -c -std=gnu99 -fgnu89-inline -fno-stack-protector - 
O2 -Wall -Winline -Wwrite-strings -fmerge-all-constants -frounding-math -march=i686 -Wstrict-
prototypes -mpreferred-stack-boundary=4  -Wa,-mtune=i686    -Wno-uninitialized -   
U_FORTIFY_SOURCE  -D__NO_MATH_INLINES -D__LIBC_INTERNAL_MATH_INLINES -I../include -
I/home/rajiv/Downloads/build-glib/math -I/home/rajiv/Downloads/build-glib -
I../nptl/sysdeps/unix/sysv/linux/i386/i686 -I../sysdeps/unix/sysv/linux/i386/i686 -
I../nptl/sysdeps/unix/sysv/linux/i386 -I../nptl/sysdeps/unix/sysv/linux/x86 
-I../sysdeps/unix/sysv/linux/x86 -I../sysdeps/unix/sysv/linux/i386/nptl -
I../sysdeps/unix/sysv/linux/i386 -I../nptl/sysdeps/unix/sysv/linux -I../nptl/sysdeps/pthread -
I../sysdeps/pthread -I../ports/sysdeps/unix/sysv/linux -I../sysdeps/unix/sysv/linux -
I../sysdeps/gnu -I../sysdeps/unix/inet -I../nptl/sysdeps/unix/sysv -
I../ports/sysdeps/unix/sysv -I../sysdeps/unix/sysv -I../sysdeps/unix/i386 -
I../nptl/sysdeps/unix -I../ports/sysdeps/unix -I../sysdeps/unix -I../sysdeps/posix -
I../sysdeps/i386/i686/multiarch -I../nptl/sysdeps/i386/i686 -I../sysdeps/i386/i686 -
I../sysdeps/i386/i486 -I../nptl/sysdeps/i386/i486 -I../nptl/sysdeps/i386 -I../sysdeps/i386 -
I../sysdeps/x86 -I../sysdeps/wordsize-32 -I../sysdeps/ieee754/ldbl-96 -I../sysdeps/ieee754/dbl-
64 -I../sysdeps/ieee754/flt-32 -I../sysdeps/ieee754 -I../sysdeps/generic -I../nptl -I../ports  -
I.. -I../libio -I.   -D_LIBC_REENTRANT -include ../include/libc-symbols.h   -DNOT_IN_libc=1 -
DIS_IN_libm=1 -DIN_LIB=libm    -o /home/rajiv/Downloads/build-glib/math/e_exp.o -MD -MP -
MF /home/rajiv/Downloads/build-glib/math/e_exp.o.dt -MT /home/rajiv/Downloads/build-
glib/math/e_exp.o 
../sysdeps/ieee754/dbl-64/e_exp.c: In function ‘__ieee754_exp’:
../sysdeps/ieee754/dbl-64/e_exp.c:64:3: error: ‘FE_TONEAREST’ undeclared (first use in this  
function)
../sysdeps/ieee754/dbl-64/e_exp.c:64:3: note: each undeclared identifier is reported only once  
for each function it appears in

make[2]: *** [/home/rajiv/Downloads/build-glib/math/e_exp.o] Error 1
make[2]: Leaving directory `/home/rajiv/Downloads/glibc-2.17/math'
make[1]: *** [math/others] Error 2
make[1]: Leaving directory `/home/rajiv/Downloads/glibc-2.17'
make: *** [all] Error 2 
```

然后我尝试使用“-msoft-float”开关编译 glibc。我使用了以下命令，但再次出错。

```
$../glibc-2.17/configure --prefix=$HOME/glibc-2.17  --host=i686-linux-gnu \
--build=i686-linux-gnu \
CC="gcc -m32 –msoft-float" CXX="g++ -m32 –msoft-float" CFLAGS="-O2 -march=i686 –msoft-float" \ 
CXXFLAGS="-O2 -march=i686 –msoft-float"
$make
$.....

/home/rajiv/Downloads/build-glib/shlib.lds /home/rajiv/Downloads/build-glib/csu/abi-   
note.o /home/rajiv/Downloads/build-glib/elf/soinit.os /home/rajiv/Downloads/build-
glib/libc_pic.os /home/rajiv/Downloads/build-glib/elf/sofini.os /home/rajiv/Downloads/build-
glib/elf/interp.os /home/rajiv/Downloads/build-glib/elf/ld.so -lgcc

/home/rajiv/Downloads/build-glib/libc_pic.os: In function `__modf':
(.text+0x144d0): undefined reference to `__subdf3'
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `ldexp': 
(.text+0x1463f): undefined reference to `__eqdf2'
(.text+0x14f34): undefined reference to `__eqxf2'
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `__erand48_r':
(.text+0x1963b): undefined reference to `__subdf3'
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `round_and_return':
strtof_l.c:(.text+0x1ba9d): undefined reference to `__mulsf3'
strtof_l.c:(.text+0x1bd43): undefined reference to `__mulsf3'
/home/rajiv/Downloads/build-glib/libc_pic.os:(.text+0x1c36b): more undefined references to 
`__mulsf3' follow
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `round_and_return':
strtod_l.c:(.text+0x1ef5e): undefined reference to `__muldf3'
strtod_l.c:(.text+0x1f12c): undefined reference to `__muldf3'
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `__GI_____strtod_l_internal':
(.text+0x1f91c): undefined reference to `__muldf3'
/home/rajiv/Downloads/build-glib/libc_pic.os:(.text+0x1fc7f): more undefined references to  
`__muldf3' follow
wcstod_l.c:(.text+0x84a28): undefined reference to `__muldf3'
wcstod_l.c:(.text+0x84a9e): undefined reference to `__muldf3'
wcstod_l.c:(.text+0x84c6c): undefined reference to `__muldf3'
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `____wcstod_l_internal':
(.text+0x85285): undefined reference to `__muldf3'
/home/rajiv/Downloads/build-glib/libc_pic.os:(.text+0x8578d): more undefined references to 
`__muldf3' follow
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `round_and_return':
wcstold_l.c:(.text+0x87e48): undefined reference to `__mulxf3'
wcstold_l.c:(.text+0x880a9): undefined reference to `__mulxf3'
/home/rajiv/Downloads/build-glib/libc_pic.os:(.text+0x886e1): more undefined references to 
`__mulxf3' follow
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `round_and_return':
wcstof_l.c:(.text+0x8b278): undefined reference to `__mulsf3'
wcstof_l.c:(.text+0x8b3e3): undefined reference to `__mulsf3'
/home/rajiv/Downloads/build-glib/libc_pic.os:(.text+0x8b8f1): more undefined references to 
`__mulsf3' follow
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `difftime':
(.text+0x91e37): undefined reference to `__floatsidf'
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `difftime':

/home/rajiv/Downloads/build-glib/libc_pic.os: In function `ecvt_r':
(.text+0xd64f6): undefined reference to `__muldf3'
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `qfcvt_r':
(.text+0xd6934): undefined reference to `__mulxf3'
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `__qecvt_r':
(.text+0xd6fd7): undefined reference to `__ltxf2'
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `__qecvt_r':
(.text+0xd7007): undefined reference to `__mulxf3'
/home/rajiv/Downloads/build-glib/libc_pic.os: In function `__monstartup':
(.text+0xdd792): undefined reference to `__fixsfsi'
collect2: ld returned 1 exit status
make[2]: *** [/home/rajiv/Downloads/build-glib/libc.so] Error 1   
make[2]: Leaving directory `/home/rajiv/Downloads/glibc-2.17/elf'
make[1]: *** [elf/subdir_lib] Error 2
make[1]: Leaving directory `/home/rajiv/Downloads/glibc-2.17'
make: *** [all] Error 2 
```

请帮助并让我知道如何编译或构建 GNU glibc 以在非 FPU x86 内核上使用它。基本上我需要用 '-msoft-float' 或 'without-fp' 编译的 libm.a ，这样我就可以静态链接 libm 来创建内核 BIN。

正如你所看到的，我的试验都不起作用:(。我也尝试链接 gcc soft-fp lib，但做不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T13:02:08.173

您是否尝试使用“--with-float=soft”“配置”？

并考虑使用“--host=i386-linux-gnu”（而不是 i686），因为英特尔处理器从 i486 开始就有数学协处理器。

# zend-framework - Zend 框架 2：如何设置全局语言环境？

> ID：15946906
> 
> 赞同：8
> 
> 时间：2013-04-11T10:53:46.837
> 
> 标签：zend-framework, zend-framework2, zend-translate

我必须根据用户想要的语言动态更改语言环境。

我可以像这样在 Application/Module.php 中设置语言环境：

```
public function onBootstrap(MvcEvent $e)
{
    $translator = $e->getApplication()->getServiceManager()->get('translator');
    $translator->setLocale('hu_HU');
} 
```

但是，如果我想更改语言，如何在控制器中执行此操作？我试过这个，但在此之后我只能为这个请求而不是全局更改语言环境。

```
$translator = $this->getServiceLocator()->get('translator');
$translator->setLocale('srb_SRB'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:59:05.510

在配置级别设置默认语言环境！请参阅ZendSkeletonApplications 应用程序模块[中的](https://github.com/zendframework/ZendSkeletonApplication/blob/master/module/Application/config/module.config.php#L61)[**#61**`module.config.php`](https://github.com/zendframework/ZendSkeletonApplication/blob/master/module/Application/config/module.config.php#L61)

```
'translator' => array(
    'locale' => 'en_US',
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-19T01:34:34.287

我遇到过同样的问题。在我的用户登录模块中，我在引导程序上注册了 MvcEvent：

```
use Zend\Mvc\MvcEvent;
use Zend\Mvc\Controller\AbstractActionController;
use Zend\Session\SessionManager;
use Zend\Session\Container as SessionContainer;
use \Zend\I18n\Translator\TranslatorInterface;

... 

public function onBootstrap(MvcEvent $event)
{
    // Get event manager.
    $eventManager = $event->getApplication()->getEventManager();
    $sharedEventManager = $eventManager->getSharedManager();
    // Register the event listener method. 
    $sharedEventManager->attach(AbstractActionController::class, 
            MvcEvent::EVENT_DISPATCH, [$this, 'onDispatch'], 100);
} 
```

然后当该事件发生时，我根据来自 URL 的信息设置语言环境：

```
public function onDispatch(MvcEvent $event)
{
    $servicemanager = $event->getApplication()->getServiceManager();
    $lang = $event->getRouteMatch()->getParam('lang','jp-JP');

    $translator = $servicemanager->get(TranslatorInterface::class);
    if( $translator != null )
    {
        $translator->setLocale($lang);
    } 
    ... 
```

最后，这并没有真正使语言环境全球化 - 相反，它只是为每个请求设置它。从代码的角度来看，最终效果是相同的 - 即，我不必在每个控制器上设置区域设置。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-05T16:10:22.933

这对我有用：

```
public function onBootstrap(MvcEvent $e)
{
    $localeFromHttp = \Locale::acceptFromHttp($_SERVER['HTTP_ACCEPT_LANGUAGE']);
            if (false === stripos($localeFromHttp, '-')) {
                $locale = $localeFromHttp . '_' . strtoupper($localeFromHttp);

                $e->getApplication()
                    ->getServiceManager()
                    ->get('MvcTranslator')
                    ->setLocale($locale);               
               }
               else {

                   $e->getApplication()->getServiceManager()->get('MvcTranslator')->setFallbackLocale('en_US');
               } 
```

}

还有我的 modal.config.php：

```
'service_manager' => array(
     'abstract_factories' => array(
         'Zend\Cache\Service\StorageCacheAbstractServiceFactory',
         'Zend\Log\LoggerAbstractServiceFactory',
     ),
     'aliases' => array(
         'translator' => 'MvcTranslator',
     ),
 ),
 'service_manager' => array(
     'factories' => array(
         'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
     ),
 ),
 'translator' => array(
     'translation_file_patterns' => array(
         array(
             'type'     => 'gettext',
             'base_dir' => __DIR__ . '/../language',
             'pattern'  => '%s.mo',
             'text_domain' => __NAMESPACE__,
         ),
     ),
 ), 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-27T13:35:57.237

在 ZF2 中，区域设置始终根据请求进行设置。您可以在引导程序上执行此操作：

```
$translator = $event->getApplication()->getServiceManager()->get('translator');
$translator->setLocale($locale);
$translator->addTranslationFile(
        'phpArray', DATA_PATH . DIRECTORY_SEPARATOR . 'languages' . DIRECTORY_SEPARATOR . $locale . '.php', 'default', $locale
); 
```

稍后在控制器中，如果您想更改：

```
$translator = $this->getServicelocator()->get('translator');
$translator->setLocale($locale); 
```

如果您更改选定的语言环境，您必须再次添加翻译文件路径才能使其正常工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-25T20:32:42.933

在 modal.config 文件中，我认为不需要以下内容，因为您使用了别名“MvcTranslator”作为翻译器。

```
'service_manager' => array(
'factories' => array(
    'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
), 
```

# php - PHP PDF转换

> ID：15946908
> 
> 赞同：1
> 
> 时间：2013-04-11T10:53:51.850
> 
> 标签：php, pdf

我正在使用 PHP 5.0 pdf 库将文件动态转换为 PDF。我正在使用 PHP 官方网站上的这个参考，使用`PDF_new()`、创建它的对象并使用`PDF_set_info`和`PDF_get_buffer`函数。

这很好用，但是当我想创建 PDF 页面并在其中写入内容时，没有任何地方提供关于如何将现有页面转换为 PDF 的参考。假设我的文件夹`bill.php`中带有 CSS 的页面也需要即时转换为 PDF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:00:16.657

将 HTML 转换为 PDF 并不是那么容易，有几个库可以满足您的需求。但是没有一个具有完整的 html/css 功能，尤其是 css3。

**FPDF** [http://www.fpdf.org](http://www.fpdf.org)

**TCPDF** [http://www.tcpdf.org](http://www.tcpdf.org)

**DOMPDF** [http://code.google.com/p/dompdf/](http://code.google.com/p/dompdf/)（这个类允许您轻松地将简单的布局网站转换为 pdf。我经常使用这个类几乎没有问题。遗憾的是这个库不支持将表单转换为可用的输入字段。）

**WKHTMLTOPDF** [http://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)（实际上是一个 linux 包，但存在 php 包装器。这提供了几乎完整的 html 功能和令人敬畏的结果）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:15:37.950

html2PDF 是一个不错的库。不过，请确保将默认语言更改为英语。我已经多次使用它来创建带有表格和 div 的动态发票。效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:00:48.407

参考一些文章，这可能有助于提高你的知识，并清除你的一些疑问。

1.  [入门](http://www.tuxradar.com/practicalphp/11/4/2)

2.  [在 PHP 中将 HTML 转换为 PDF 的简单方法](https://pdfcrowd.com/blog/2011/04/18/convert-html-to-pdf-in-php.html)

3.  [如何使用 PHP 生成 PDF](http://answers.oreilly.com/topic/1414-how-to-generate-a-pdf-with-php/)

4.  [将 HTML 转换为 PDF](http://beebole.com/blog/general/convert-html-to-pdf-with-full-css-support-an-opensource-alternative-based-on-webkit/)

5.  这个[HTML to PDF SDK](http://htm2pdf.co.uk/blog/html-to-pdf-sdk/)也可以帮助你。

希望，它会帮助你。

# wordpress - 如何测试从远程设备（如 iPhone）本地开发的网站？

> ID：15946909
> 
> 赞同：8
> 
> 时间：2013-04-11T10:53:55.973
> 
> 标签：wordpress, networking, web, mamp

我正在开发一个新的 WordPress 主题，并使用 MAMP 在我的笔记本电脑上本地执行此操作。在我的笔记本电脑上，我可以通过 localhost:8800 访问该站点。

有没有办法可以从我的 iPhone 访问这个本地主机站点？我想看看主题在移动设备上的样子，而不仅仅是调整浏览器的大小。如果我在两者之间建立一个 ad hoc WiFi 网络，这可以工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T11:13:06.720

尝试链接 [How do you access a website running on localhost from iPhone browser](https://stackoverflow.com/questions/3132105/how-do-you-access-a-website-running-on-localhost-from-iphone-browser) here是您可能正在寻找的东西。

或者如果您想在不同的设备上测试您的网站[http://quirktools.com/screenfly/](http://quirktools.com/screenfly/)这个链接可能会有所帮助；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-01T11:07:34.657

前往此站点 ( [http://xip.io/](http://xip.io/) ) 并在您的虚拟主机设置中将 IP 地址替换为您的本地 IP：

```
#mysite.local
<VirtualHost *:80>
 DocumentRoot "/Users/me/Sites/Development/mysite/www"
 ServerName mysite.local
 ServerAlias mysite.local.192.168.1.81.xip.io
  <Directory "/Users/me/Sites/Development/mysite/www">
    Options Indexes FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
 </Directory>
</VirtualHost> 
```

然后在您的设备上访问 mysite.local.192.168.1.81.xip.io

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T11:07:00.957

假设 iPhone 与测试服务器在同一个网络上，只需在手机上导航到它的 IP 地址。

**编辑：**如果您有多个主机名，那么您可以使用[DNSMasq](https://en.wikipedia.org/wiki/Dnsmasq)。如果您有[dd-wrt](http://www.dd-wrt.com/site/index)​​路由器，请将以下几行添加到“服务”页面的“其他 DHCP 选项”框中 - 并确保启用 DNSMasq :)

```
address=/dev/192.168.1.2
interface=lo
no-dhcp-interface=lo 
```

这会将 .dev 域定向到 192.168.1.2 - 根据您自己的需要进行调整。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T11:09:52.193

最简单的方法是将您的 mac 和 iphone 连接到同一个 WiFi 网络。然后从系统偏好设置中获取您的 IP 地址 | 网络。它将显示在状态部分，并且可能类似于 10.10.5.100。

然后在iphone上转到`http://10.10.5.100:8800`

# teradata - 收集 Teradata 中单个分区的统计信息

> ID：15946911
> 
> 赞同：1
> 
> 时间：2013-04-11T10:53:57.383
> 
> 标签：teradata

我有一个表，它在一列上有主键，并按日期列分区。这是 DDL 的示例格式：

```
CREATE MULTISET TABLE DB.TABLE_NAME,
NO FALLBACK ,
NO BEFORE JOURNAL,
NO AFTER JOURNAL,
CHECKSUM = DEFAULT,
DEFAULT MERGEBLOCKRATIO
(  FIRST_KEY                 DECIMAL(20,0) NOT NULL,
   SECOND_KEY                DECIMAL(20,0) ,
   THIRD_COLUMN              VARCHAR(5),     
   DAY_DT                    DATE FORMAT 'YYYY-MM-DD')
PRIMARY INDEX TABLE_NAME_IDX_PR (FIRST_KEY)
PARTITION BY RANGE_N(DAY_DT  BETWEEN DATE '2007-01-06' 
                                 AND DATE '2016-01-02' EACH  INTERVAL '1' DAY );

COLLECT STATS ON DB.TABLE_NAME COLUMN(FIRST_KEY); 
```

传入的数据每天可以达到 3000 万，我已经加载了 2012-04-11 的数据。现在我必须只收集“2012-04-11”分区而不是整个表的统计信息。

有没有办法收集特定日期的分区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:40:28.360

您可以简单地收集系统列的统计信息`PARTITION`，它应该更新与分区列相关的直方图。

```
COLLECT STATS ON {databasename}.{tablename} COLUMN (PARTITION); 
```

这可以在分区表和非分区表上收集。它有助于提供表和分区（如果存在）的优化器基数。它将更新表上所有分区的统计信息。在 PARTITION 列上收集统计信息是一个 CPU 成本低、挂钟时间短的过程。它比在物理列或整个表上收集统计信息要便宜得多。（即使对于具有数百万、数千万或更多记录的表。）

如果要确定优化器是否识别刷新的统计信息，从 TD 13.10 开始没有直接的方法（不确定 TD 14.x）。但是，如果您在查询上运行 EXPLAIN，您可以判断优化器是否对包含针对分区列的条件的步骤有很高的信心。如果您指定单个日期，例如`DATE '2012-04-11'`您应该在 EXPLAIN 中看到分区消除已发生在单个分区上。

如果您在消化 EXPLAIN 方面需要帮助，请使用 EXPLAIN 查询计划编辑您的原始问题，我将帮助您消化它。

# android - 以编程方式应用 CSS、样式或主题

> ID：15946912
> 
> 赞同：1
> 
> 时间：2013-04-11T10:53:57.690
> 
> 标签：android, css, themes

我正在开发我想在其中...

1.  从服务器下载 css 文件并将其应用于活动布局文件。或者
2.  为样式或主题创建字符串文件并将其应用于布局。

我试图在 android 网站上找到解决方案，但没有任何方法可以做到这一点。

所以，我的问题是

是否可以将 css 文件应用于动态下载的 android 布局，或者是否可以使用字符串设置为 android 布局的样式或主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:06:00.813

不，不！

CSS 用于网页设计，而 Android 则完全不同。

字符串不能转换为样式，样式必须在项目中构建为 XML 文件并与应用程序一起编译。要更改主题，您可以在每个活动`setTheme(int)`期间调用方法。`onCreate`

**编辑：**

从活动：

```
getApplication().setTheme(int); 
```

# symfony - 如何在 symfony2 中创建相当复杂的表单

> ID：15946914
> 
> 赞同：0
> 
> 时间：2013-04-11T10:54:24.977
> 
> 标签：symfony

我需要在 symfony2 中创建表单，它应该看起来像这张图片上的表单[http://imageshack.us/photo/my-images/805/formy.png/](http://imageshack.us/photo/my-images/805/formy.png/) 正如你所看到的，有产品的动态列表，并且作为其中的一部分此列表有带有下拉列表的选项的动态列表。刚才我有产品的动态列表，根据本教程[http://symfony.com/doc/2.0/cookbook/form/form_collections.html](http://symfony.com/doc/2.0/cookbook/form/form_collections.html)它工作正常。如何添加下拉列表的动态列表？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:04:55.400

如果您想在 Symfony 中使用默认的 Form 类，这不是您答案的真正解决方案。

但是...您为什么不考虑创建自定义表单？就像你在 HTML 中做的那样。在提交表单时，您可以像在 PHP 中一样获取值...

```
$_POST['something] or $_GET['something] 
```

# jquery - 使用 Jquery Validate 插件自定义错误消息文本

> ID：15946924
> 
> 赞同：0
> 
> 时间：2013-04-11T10:54:49.443
> 
> 标签：jquery, jquery-validate

需要从文本来自 CMS 的范围复制自定义错误消息文本。基本上需要显示自定义的本地化错误消息。

代码在您提交表单时有效，但只要您在外部单击，默认消息就会替换自定义消息。

[http://jsfiddle.net/2nV5u/16/](http://jsfiddle.net/2nV5u/16/)

HTML

```
<form name="form-core" id="form-core" method="post" action="" role="search"  novalidate="novalidate">
      <label for="keywords">Hello</label>
      <input type="text" id="keyword" name="keyword" class="required" />
      <span class="error-message-required">Ce champ est obligatoire</span>
      <input type="submit" /><input class="cancel" type="submit" value="Reset" />         
</form> 
```

JS

```
 $('#form-core').validate({
            debug: false,
            onfocusout: function (element) { jQuery(element).valid() },
            errorElement: "div",
            errorPlacement: function (error, element) {
                jQuery('div[for=' + error.attr('for') + ']').remove();
                    error.text($(element).next('.error-message-required').text());
                    error.insertBefore(element);
                }                
        }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T14:28:39.343

它没有按照您期望的方式工作，因为`errorPlacement`回调函数不会在每个错误时触发。它仅在第一次出现错误时触发，然后插件会自动显示/隐藏*它自己*创建的新错误元素。

**1）** 我认为你让事情变得比他们需要的更复杂。`.validate()`只需在初始化函数中指定您的自定义错误消息。从您的 HTML/CMS中删除`<span></span>`并让插件按照设计的方式处理它。

```
messages: {
    keyword: {
        required: "Ce champ est obligatoire"
    }
} 
```

**2）** 再次，让插件完成它的工作。`errorPlacement`将您的回调函数更改为：

```
errorPlacement: function (error, element) {
    error.insertBefore(element);
} 
```

**3)** 将您的重置按钮更改为`type="reset"`，这样它就不会提交表单：

```
<input class="cancel" type="reset" value="Reset" /> 
```

* * *

**工作演示：http: [//jsfiddle.net/wQaYw/](http://jsfiddle.net/wQaYw/)**

**jQuery** :

```
$(document).ready(function () {

    $('#form-core').validate({
        messages: {
            keyword: {
                required: "Ce champ est obligatoire"
            }
        },
        onfocusout: function (element) {
            jQuery(element).valid()
        },
        errorElement: "div",
        errorPlacement: function (error, element) {
            error.insertBefore(element);
        }
    });

}); 
```

* * *

**编辑**：

如果由于某种原因，您无法`span`从 CMS 中删除 并在 中声明自定义消息`.validate()`，您还有另一个选择。

使用[内置`rules('add')`方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)在整个表单上动态更改每个`input[type="text"]`带有`required`规则的默认消息，如下所示。（**但是**，使用此方法，您**必须**为每个元素提供自定义消息，因为这将覆盖所有元素。）

```
$('#form-core input[type="text"]').each(function () {
    $(this).rules('add', {
        messages: {
            required: $(this).next('.error-message-required').text()
        }
    });
}); 
```

在这之后...

```
$('#form-core').validate({
    onfocusout: function (element) {
        jQuery(element).valid()
    },
    errorElement: "div",
    errorPlacement: function (error, element) {
        error.insertBefore(element);
    }
}); 
```

**工作演示：http: [//jsfiddle.net/6Vzdz/](http://jsfiddle.net/6Vzdz/)**

# list - 后缀表达式列表求值

> ID：15946926
> 
> 赞同：1
> 
> 时间：2013-04-11T10:54:56.307
> 
> 标签：list, recursion, prolog, tail-recursion, postfix-notation

我编写了一个程序来从表达式列表递归地评估 prolog 中的后修复表达式。例如，给定以下列表：

```
[+,1,2] 
```

它应该返回 3。我构建谓词的方式是递归调用自身，直到它到达列表的末尾，以便它向后读取值。（与从左到右阅读此列表相同：[2,1,+]）。

我的问题是，当我尝试通过递归调用返回多个值时，所有值都会突然消失。

这是代码：

```
eval_list([Head|Tail],_,Result):-
   Tail==[], % last element of list
   Result=Head,
   write(Head),
   write(' was stored in Result!\n').

eval_list([Head|Tail],Store1,Result):-
      eval_list(Tail,Store2, NewResult),
      (\+integer(Store2))
   ->
      % if no integer is bound to Store2, bind Store1 to Head
      Store1=Head,
      Result is NewResult,
      write(Head),
      write(' is stored value!\n')
   ;  (integer(Store2)) ->
    % if an integer is bound to store2, we perform operation specified by the Head with the stored number
      X is Store2+NewResult,
      Result is X,
      write('performed operation!\n')
   ;
      % if doesnt catch either of these states the program is broken
      (  print('something broke\n'),
         print(Store1),
         nl,
         print(Store2),
         nl,
         print(Head),
         nl,
         print(Result),
         nl
      ). 
```

我得到以下输出：

```
?- eval_list([+,1,2],X,Result).
2 was stored in Result!
1 is stored value!
something broke
_G1162
_L147
+
_G1163
true. 
```

我不明白为什么我的价值观会消失，或者是否有更好的方法来评估列表。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-11T11:38:06.930

关于您的编程技术的一些建议。您应该在谓词定义和 if-else 构造的主体中使用头部匹配和统一而不是显式统一。您还应该避免非尾递归递归，除非您的算法本质上是递归的（例如，按顺序遍历树）。这将使代码更容易编写、阅读和理解。现在，我什至不想调试你的代码，但看起来你`Store2`永远不会被绑定到一个整数，并且永远是一个未绑定的变量，无论你的程序有什么输入。

现在到你的程序。目前尚不清楚您要达到的目标。如果您只想评估表单的列表`[Arithmetic_operator, Operand1, Operand2]`，那么编写起来会容易得多：

```
arith_eval(Expression_list, Result) :-
    Arithmetic_expr =.. Expression_list, % look up what =.. stands for!
    Result is Arithmetic_expr. 
```

我认为您不需要使用这种过于复杂的方法。

如果您希望能够评估任意复杂的表达式，用 post-fix 编写，具有固定的运算符 arity（所以您可以说`2, 3, +`，但不是`2, 4, 1, +`，总和为 7）：

*   从输入中读取一个元素
    *   将元素压入栈顶
    *   尝试减少堆栈：
        *   弹出运算符和操作数，如果在堆栈顶部
        *   评估
        *   将结果推回栈顶
*   当输入为空时，您的堆栈就是您的结果

您可以像这样显式定义不同运算符的效果（这里，只有`+`and `-`）：

```
eval_stack([+,A,B|Tail],[Result|Tail]) :-
    number(A), number(B),
    !,
    Result is B + A.
eval_stack([-,A,B|Tail],[Result|Tail]) :-
    number(A), number(B),
    !,
    Result is B - A.
eval_stack(Stack,Stack). 
```

请注意运算符如何匹配堆栈顶部，并在其下方有操作数时应用，将结果推回堆栈，或堆栈保持不变。

你可以从你的输入推送到你的堆栈：

```
evaluate([Next|Rest], Stack, Result) :-
    eval_stack([Next|Stack],NewStack),
    evaluate(Rest,NewStack,Result).
evaluate([],Result,Result). % end of input 
```

所以现在你可以这样称呼它：

```
?- evaluate([2,3,+,3,6,-,+],[],Result).
Result = [2].

?- evaluate([2,3,4,-,-,5,+],[],Result).
Result = [8].

?- evaluate([2,3,4,-,-,5,+,1,3,2,-],[],Result).
Result = [1,1,8]. 
```

因此，这两个谓词`evaluate(Input,Stack,Result)`和`eval_stack(Stack,NewStack)`是您只需要使用固定数量运算符评估有效的后缀算术表达式所需的全部内容。

# ruby-on-rails-3 - 导轨：将发动机安装在发动机内部

> ID：15946934
> 
> 赞同：2
> 
> 时间：2013-04-11T10:55:13.680
> 
> 标签：ruby-on-rails-3, rails-engines

我有两个引擎 A 和 B。A 和 B 已经安装在应用程序 C 中。

```
Mount A::Engine => "/a"
MOUNT B::Engine => "/b" 
```

现在我有了第三个引擎 D，它是管理引擎。

```
Mount D::Engine => "/d" 
```

现在作为管理员，我想从我的管理引擎 D 为引擎 A 和 B 提供一条路由，即**"/d/a"**或**"/d/b"**，通过它我可以访问 D 的所有路径

为此，我再次安装到引擎 A 和 B 到 D。

这是执行此操作的正确方法吗？

另外我想知道在rails引擎中安装rails引擎会出现什么问题，如果有的话？

谢谢

帕里托什

# php - 如何在 PHP 中从 Android 获取值

> ID：15946938
> 
> 赞同：0
> 
> 时间：2013-04-11T10:55:26.420
> 
> 标签：php

我正在尝试为 android 实现服务器端。Forthis 在 android 我使用这个代码：

```
 List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        // Get the deviceID
        nameValuePairs.add(new BasicNameValuePair("reg_id", val[1]));
        nameValuePairs.add(new BasicNameValuePair("App_Name",val[2]));
        nameValuePairs.add(new BasicNameValuePair("App_Version", val[3])); 
```

现在在服务器端我想访问这些值并将其存储在数据库中。我的PHP代码：

```
include('connectdb.php');

$Reg_ID=$_REQUEST['reg_id'];
$App_Name=$_REQUEST['App_Name'];
$App_Version=$_REQUEST['App_Version'];

if($_REQUEST['reg_id']!='NULL' && $_REQUEST['App_Name']!='NULL' && $_REQUEST['App_Version']!='NULL')
{   
    mysqli_query($con,"INSERT INTO  registration (Reg_ID, APP_Name,App_Version)
    VALUES ('".$_REQUEST['reg_id']."', '".$_REQUEST['App_Name']."','".$_REQUEST['App_Version']."')");

}   
else
{
}   

mysqli_close($con); 
```

但在 php 中我收到这些错误：

> 注意：未定义索引：第 5 行 C:\xampp\htdocs\GCM\addReg.php 中的 reg_id
> 
> 注意：未定义索引：第 6 行 C:\xampp\htdocs\GCM\addReg.php 中的 App_Name
> 
> 注意：未定义索引：第 7 行 C:\xampp\htdocs\GCM\addReg.php 中的 App_Version
> 
> 警告：mysqli_close() 期望参数 1 为 mysqli，第 24 行 C:\xampp\htdocs\GCM\addReg.php 中给出的资源

任何帮助

**编辑**

```
public class SendMail extends AsyncTask<String, String, String> {

    private String endResult;
    HttpResponse response;

    @Override
    protected String doInBackground(String... val) {

        String url=val[0];

        //Log.i("Url", url + "");

        //  Log.d("C2DM", "Sending registration ID to my application server");

        HttpPost post = new HttpPost(url);

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);

        nameValuePairs.add(new BasicNameValuePair("reg_id", val[1]));
        nameValuePairs.add(new BasicNameValuePair("App_Name",val[2]));
        nameValuePairs.add(new BasicNameValuePair("App_Version", val[3]));

        HttpParams httpParameters = new BasicHttpParams();
        // Set the timeout in milliseconds until a connection is established.
        int timeoutConnection = 30000;
        HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
        // Set the default socket timeout (SO_TIMEOUT) 
        // in milliseconds which is the timeout for waiting for data.
        int timeoutSocket = 30000;
        HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

        DefaultHttpClient hc = new DefaultHttpClient(httpParameters);
        ResponseHandler<String> res = new BasicResponseHandler();

        try {
            post.addHeader("Content-Type","application/x-www-form-urlencoded");
            post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        } catch (UnsupportedEncodingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        try {
            response = hc.execute(post);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        Log.i("endResult", "" + endResult);
        super.onPostExecute(result);

        publishProgress(endResult);

    }

    @Override
    protected void onProgressUpdate(String... values) {

        super.onProgressUpdate(values);
        String result = values[0];

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:10:16.730

```
include('connectdb.php');

//First, check whether the values exist and only then use them.
if(isset($_REQUEST['reg_id'], $_REQUEST['App_Name'], $_REQUEST['App_Version']))
{
  $id = mysqli_real_escape_string($con, $_REQUEST['req_id']) ;
  $name = mysqli_real_escape_string($con, $_REQUEST['App_Name']) ;
  $version = mysqli_real_escape_string($con, $_REQUEST['App_Version']) ;

  $query = "INSERT INTO registration (Reg_ID, APP_Name, App_Version)
    VALUES ('{$id}', '{$name}','{$version}') ;" ;

  $result = mysqli_query($con, $query) ;
  if ($result){
    echo "Success" ;
  } else {
    echo "Failure" ;
  }
} else {
  echo "Not sufficient data for request" ;
} 
```

我刚刚更正了基本的条件流程并转义了特殊字符以保护您的数据库。它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:00:18.757

如果您要发布数据，请尝试使用 $_POST 而不是 $_REQUEST。并且为了清楚起见 - 在第 7 行及以下重用分配的变量（$Reg_ID、$App_Name、$App_Version）而不是 $_REQUEST[...]。

# javascript - Javascript和[绑定]实现？

> ID：15946939
> 
> 赞同：2
> 
> 时间：2013-04-11T10:55:30.210
> 
> 标签：javascript

我读了一些关于 JS 中的绑定实现（来自 John Resig 的书）：

它看起来像这样：（[**jsbin**](http://jsbin.com/osanun/2/edit)）

```
#1Function.prototype.bind = function ()
#2{
#3    var fn = this,           
#4            args = Array.prototype.slice.call(arguments),
#5            object = args.shift();
#6
#7        return function ()
#8        {                    
#9            return fn.apply(object, args.concat(Array.prototype.slice.call(arguments)));  
#10       };
#11   }; 
```

我可以像这样测试它：

```
var myObject = {};

function myFunction()
{
    return this == myObject;
}

//--------- 
if (!myFunction()) alert("Context is not set yet"); //not set ye

var bindedFunction= myFunction.bind(myObject)

if (bindedFunction()) alert( "Context is set properly"); //set properly
//--------- 
```

但是我有两个问题：

`Question #1`

在第 3 行中，`this`is 指的是执行的函数，对吗？但不`this`应该是：“拥有函数的**对象”？**

如果我`alert(this)`在绑定函数内部执行，我会看到：

```
function myFunction()
{
    return this == myObject;
} 
```

`Question #2`

在第 #9 行，为什么*返回*的函数是

```
 return function ()
        {                      
            return fn.apply ...
        }; 
```

而**不是**

```
 return function ()
        {                      
           fn.apply ...
        }; 
```

我不明白：

返回的函数创建一个闭包，并且应该返回一个只执行的函数 `fn.apply(o....`

我不明白为什么它会返回额外`return`的：就像在`return fn.apply(o....`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:00:48.710

在上下文中（没有双关语）`Function.bind`，`this`确实指的是当前调用的函数，而不是可能包含它作为方法的“对象”。

记住函数是 JS 中的第一类对象，当你编写

```
myFunction.bind() 
```

then`myFunction` *是*对象，然后是该对象`.bind`的方法（通过继承`Function.prototype`），然后当您调用它时，将应用正常规则 - `this === myFunction`。

对于 q.2，*结果*是`fn.apply`必需的，以便绑定函数也可以返回结果，就像原始函数可能具有的一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:05:58.140

> 但这不是假设是：“拥有函数的对象”吗？

不，这是因为内部`fn.bind(obj)`是这样调用的：

```
Function.bind.call(fn, window, obj) 
```

因此，`this`指`fn`。

> 我不明白为什么它会返回额外的回报：就像 return fn.apply(o....

该函数`.bind()`旨在返回一个函数，该函数在调用时“代理”给定函数的返回值，即`myFunction`. 如果没有，它总是会返回`undefined`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:00:49.890

#2 的答案是绑定函数应该返回原始函数返回的任何内容，因此它需要一个 return 语句。

# matlab - Matlab 编辑器中的自定义类数据工具提示

> ID：15946950
> 
> 赞同：0
> 
> 时间：2013-04-11T10:56:21.260
> 
> 标签：matlab, undocumented-behavior

当我们在 Matlab 编辑器中悬停在变量上时，是否有人会知道一种覆盖数据工具提示的方法？我有一个相对简单的自定义类，它的内容可以很容易地显示在工具提示中，但 Matlab 坚持说它是一个 1x1 的自定义类，这很好，但如果我们能做到它会更有用以一种很好的方式显示对象的内容。现在，我必须在 cmd 窗口中键入变量的名称，例如在调试时，而不是在变量名称上短暂悬停。挑剔，但我会觉得它很有趣^^

我尝试在数据工具提示上使用无证线索进行挖掘，例如[http://undocumentedmatlab.com/blog/accessing-the-matlab-editor/](http://undocumentedmatlab.com/blog/accessing-the-matlab-editor/) [http://undocumentedmatlab.com/blog/spicing-up-matlab- uicontrol-工具提示/](http://undocumentedmatlab.com/blog/spicing-up-matlab-uicontrol-tooltips/)

但我没有最终答案，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:34:05.323

工具提示似乎通过使用该`disp`方法获取其字符串。覆盖`disp`你的类。在方法主体中，根据需要构造所需的字符串，然后调用`disp`它。在 R2012a 中，至少这适用于调试器工具提示。

请注意，您需要`clear classes`在编辑类后执行 a 以让 MATLAB 识别覆盖的`disp`.

# r - 如何将 R 设置为默认选项？

> ID：15946953
> 
> 赞同：6
> 
> 时间：2013-04-11T10:49:35.067
> 
> 标签：r

我总是以以下方式开始我的脚本：

```
rm(list=ls()) 
```

清除我的工作区以避免不同脚本之间的冲突。但是，我正在寻找一种方法来将所有更改的选项设置为默认状态。例如，在某些脚本中，我需要通过设置更改 SS 类型：

```
options(contrasts=c(unordered="contr.sum", ordered="contr.poly")) 
```

在其他脚本中，我需要使用默认选项（因为它是默认选项，所以我不直接指定它），即：

```
options(contrasts=c(unordered="contr.treatment", ordered="contr.poly")) 
```

但是如果之前刚刚使用了带有更改选项的脚本，那么该选项显然在我没有注意到的情况下发生了更改。

有没有我可以在我的脚本之上放置一个命令来将 R 重置为默认选项？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-11T11:09:21.577

就像@chl 所说，您可以将默认选项保存在某处，例如使用以下命令保存在`Rdata`文件中`save`：

```
default_options = options()
save(default_options, file = "default_options.rda") 
```

现在您可以从文件中加载这些默认值并应用它们：

```
load("default_options.rda")
options(default_options) 
```

但是，我建议不要连续运行 R 脚本。相反，如果您在脚本之间共享功能，只需创建捕获该功能的函数。然后，您使用的脚本始终是独立的，不受其他先前运行的脚本的影响。然后，您设置的任何选项都是该脚本的本地选项，无需清空工作区或将选项设置为默认值。

请注意，我也从不保存我的工作环境，我总是使用原始数据和转换该原始数据的脚本来重建我的环境。如果有些部分需要花费大量时间，我会将它们放在一个单独的脚本中，最后`Rdata`使用`save`. 然后我将它们加载到主脚本中，使用`load`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-26T19:24:22.267

这是一个**简单而优雅的单行代码**，*不需要*任何手动检索默认值：

```
default_opts <- callr::r(function(){options()}); options(default_opts) 
```

### 这是如何工作的：

`callr`是 devtools 附带的一个包（所以如果你已经安装了 devtools，你就已经有了`callr`）

`callr::r`只需启动一个后台进程，因此，我们可以检索默认选项`options()`并将它们返回到当前 R 会话

### 例子

```
# Default option
options("scipen")
# $scipen
# [1] 0

# Set to something else
options(scipen = 999)
# $scipen
# [1] 999

# Reset to defaults:
default_opts <- callr::r(function(){options()}); options(default_opts)

# Did it work? yes, the option is back to its default value
options("scipen")
# $scipen
# [1] 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-08T09:37:17.630

如果您使用 Rstudio 项目功能，您将立即摆脱所有问题。有关为什么应该避免使用 rm(list=ls()) 的更多详细信息，请参见[https://www.tidyverse.org/articles/2017/12/workflow-vs-script/](https://www.tidyverse.org/articles/2017/12/workflow-vs-script/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-26T19:42:34.577

人们普遍认为，以下将避免脚本之间的冲突。

```
rm(list=ls()) 
```

它不会。如果您不相信这一点，请尝试以下操作

```
library(dplyr)
library(raster)

rm(list = ls())

library(dplyr)

tibble::tibble(x = 1:10, y = 1:10) %>% 
  select(x) 
```

选择应该来自 dplyr。但它来自光栅。原因？`rm(list = ls())`不会删除加载的库。

# c# - 如何访问枚举类型的整数和字符串？

> ID：15946954
> 
> 赞同：0
> 
> 时间：2013-04-11T10:56:37.583
> 
> 标签：c#, .net, string, enums

什么 C# 代码将为下面的枚举类型的变量输出以下内容？

> 牙医 (2533)

```
public enum eOccupationCode
        {
             Butcher = 2531,
             Baker = 2532,
             Dentist = 2533,
             Podiatrist = 2534,
             Surgeon = 2535,
             Other = 2539
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T10:57:59.413

听起来你想要这样的东西：

```
// Please drop the "e" prefix...
OccupationCode code = OccupationCode.Dentist;

string text = string.Format("{0} ({1})", code, (int) code); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-11T11:03:41.060

您还可以使用[格式字符串](http://msdn.microsoft.com/en-us/library/vstudio/a0h36syw.aspx) `g`, `G`, `f`,`F`来打印枚举条目的名称，或者`d`打印`D`十进制表示：

```
var dentist = eOccupationCode.Dentist;

Console.WriteLine(dentist.ToString("G"));     // Prints: "Dentist"
Console.WriteLine(dentist.ToString("D"));     // Prints: "2533" 
```

...或方便的单线：

```
Console.WriteLine("{0:G} ({0:D})", dentist);  // Prints: "Dentist (2533)" 
```

这适用于`Console.WriteLine`，就像`String.Format`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T10:59:30.963

`What C# code would output the following for a variable of the enum type below?`

如果不进行强制转换，它将输出枚举标识符：`Dentist`

如果您需要访问该枚举值，则需要强制转换它：

```
int value = (int)eOccupationCode.Dentist; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T11:00:13.357

我猜你的意思是这个

```
eOccupationCode code = eOccupationCode.Dentist;
Console.WriteLine(string.Format("{0} ({1})", code,(int)code));
// outputs Dentist (2533) 
```

# javascript - 通过 jQuery ajax 请求获取数据

> ID：15946956
> 
> 赞同：0
> 
> 时间：2013-04-11T10:56:38.403
> 
> 标签：javascript, jquery, ajax, json, jsonp

我正在使用以下代码从服务器获取数据：

```
 $.getJSON('http://xxx.xxx.xxx.xx/SampleWebService/Service.svc/SampleMethod?callback=?', dd, function (data) {
                alert(data);
  }); 
```

从服务器，我发送字节数组作为响应。在选项卡`firebug`中，`Net > Response`我得到：

```
jQuery19101878696953793153_1365677709012([67,37,94,38,42,44,69,67,71,32,97,116,116,97,99,104,101,100,32,102,111,114,32,112,97,116]); 
```

同样在`Net > JSON`选项卡中，我使用几个键获取数据。

但是如何获取数据`alert(data);`；以便我处理该数据。我不知道，这东西是如何运作的。

编辑：

我尝试了这种不同的方法：

```
 $.ajax({
                type: "GET",
                dataType: "jsonp",
                contentType: "application/javascript",
                data: dd,
                crossDomain: true,
                url: "http://xxx.xxx.xxx.xx/SampleWebService/Service.svc/SampleMethod",
                success: function (data) {
                    alert(JSON.parse(data));
                },
                complete: function (request, textStatus) { //for additional info
                    alert(request.responseText);
                    alert(textStatus);
                },
                error: function(request, textStatus, errorThrown) {
                    alert(textStatus);
                  }
            }); 
```

但我得到了：`parseerror`警觉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:28:34.837

通过查看文档（我没有尝试过），您需要明确告诉 jQuery 您正在进行 JSONP 调用，该调用将调用返回的函数。像这样的东西： -

```
 $.ajax({
     type : "GET",
     dataType : "jsonp",
     url : "http://xxx.xxx.xxx.xx/SampleWebService/Service.svc/SampleMethod",
     success: function(data){
           alert(data);
     }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:08:31.340

您正在寻找的功能是 JSON.parse。请尝试以下代码：

```
$.post("YouURL", { 'ParameterName': paramvalue }, function (Data) {
  var data = JSON.parse(data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:11:31.680

您的响应是一个函数调用。如果您使用名称 jQuery19101878696953793153_1365677709012 定义函数名称，您可以处理来自服务器的“数据”，否则只需发送 json 作为对 $.getJSON 回调的响应即可工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T15:04:18.997

问题是数据非常庞大。我正在发送大约 10,00,000+ 字节的数组。因此，我将其划分为字节列表（每个字节有 1000 个字节），然后作为响应发送。

我不知道这是否是最好的解决方案，但它解决了我的问题。顺便说一句，感谢大家帮助我。

# php - 如何从字符串中删除不必要的字符？

> ID：15946959
> 
> 赞同：2
> 
> 时间：2013-04-11T10:56:44.247
> 
> 标签：php, html, character-encoding, character, special-characters

当我从数据库中获取数据时，字符存在问题。

`doesn�t`

`It�s`

我尝试使用`str_replace`函数将其删除，但它不起作用。

```
str_replace('�','',$str); 
```

编码是

```
<meta charset="UTF-8" /> 
```

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T11:11:12.663

试试`utf8_encode()`功能。

它将删除该字符

```
utf8_decode('doesn�t');  // doesnt 
```

这不好，因为它`'`从`doesn't`

**或者**

只需更新您的 Meta 标签

```
<meta charset="UTF-8" /> 
```

至

```
<meta charset="ISO-8859-1" /> 
```

**输出**

`doesn't`

`It's`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T11:00:39.890

无需删除那些字符，尝试使用`htmlentities()`或`utfdecode()`功能正确显示那些

这是因为字符编码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-11T11:00:46.847

只是删除“�”会给你错误的输出。例如，字符串可能是`doesn't`，从`doesn�t`会给出`doesnt`错误的结果。

你应该做的是修复你的编码。您可能正在以与您的代码不同的编码保存或检索字符串。

# ibooks - 如何打开 iBook（应用内）

> ID：15946961
> 
> 赞同：2
> 
> 时间：2013-04-11T10:56:49.303
> 
> 标签：ibooks

我想在我的一个 iPhone 应用程序中打开 iBook 文件而不启动第三方应用程序。我浏览了许多文章，所有这些文章都建议使用 UIDocumentInterectionController 类。

当我在演示应用程序中尝试此操作时，它会启动 iBooks 应用程序。但是我必须在我的应用程序本身中打开它，而不启动任何支持或第三方应用程序。

我们怎样才能实现这个功能？请帮我一些代码片段。

任何帮助将不胜感激。

# extjs4 - Extjs 4.0.7 Store 中的 loadData() 或 loadRecords()

> ID：15946963
> 
> 赞同：1
> 
> 时间：2013-04-11T10:56:55.193
> 
> 标签：extjs4

在 ajax 请求返回数据后加载存储数据时出错。

错误 - TypeError：record.unjoin 不是函数

这是我的代码 -

```
 var invStore = Ext.data.StoreManager.lookup('invoice');                            
 var rec = Ext.decode(response.responseText);
 invStore.loadData(rec); 
```

谢谢

# powershell - PowerShell脚本将文件夹向上移动一级并删除先前包含的文件夹

> ID：15946964
> 
> 赞同：2
> 
> 时间：2013-04-11T10:56:55.653
> 
> 标签：powershell, batch-file, windows-server-2008

我有一台 Windows Server 2008 机器，上面有一个文件夹结构，如

```
root_folder
 ...........username1
 ....................project1
 ............................category
 ....................................subproject1
 ....................................subproject2
 ....................................subproject3
 ....................project2
 ............................category
 ....................................subproject1
 ....................................subproject2
 ....................................subproject3 
```

* * *

```
 ...........username2
 ....................project1
 ............................category
 ....................................subproject1
 ....................................subproject2
 ....................................subproject3

 ....................project2
 ............................category
 ....................................subproject1
 ....................................subproject2
 ....................................subproject3 
```

* * *

现在我需要做的是删除类别文件夹并将其内容直接复制到相应的项目（x）文件夹下。有点像这样

```
root_folder
     ...........username1
     ....................project1
     ....................................subproject1
     ....................................subproject2
     ....................................subproject3
     ....................project2
     ....................................subproject1
     ....................................subproject2
     ....................................subproject3

-----------------------------------------------------------
     ...........username2
     ....................project1
     ............................subproject1
     ............................subproject2
     ............................subproject3

     ....................project2
     ............................subproject1
     ............................subproject2
     ............................subproject3 

----------------------------------------------------------- 
```

如何使用 powershell 脚本完成此操作。还有什么是最好的powershell脚本或批处理文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T15:23:57.757

我遇到了大致相同的问题。我写了这样的东西：

```
$category_list = Get-ChildItem *\*\*

Get-ChildItem *\*\*\* | % { Move-Item $_.FullName (($_.Parent).Parent).FullName }

$category_list | Remove-Item -Recurse 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T15:46:16.500

**编辑**：我添加了一个修改，以便同时移动类别文件夹中的文件。

```
@echo off
rem Enter into Root Folder
cd \root_folder
rem Process each User Name folder
for /D %%u in (*) do (
   rem Enter into the user name folder
   cd "%%u"
   rem Process each Project
   for /D %%p in (*) do (
      rem Enter into the category of this project
      cd "%%p\category"
      rem Move all subprojects one level up
      for /D %%s in (*) do move "%%s" ..
      rem Move all files one level up
      move *.* ..
      rem Go back one level up to project folder
      cd ..
      rem Remove the now empty category folder
      rd category
      rem Go back one level up to user folder
      cd ..
   )
   rem Go back one level up to root  folder
   cd ..
) 
```

# asp.net-mvc - 我可以使用加载 jquery 函数加载部分视图吗？

> ID：15946968
> 
> 赞同：0
> 
> 时间：2013-04-11T10:57:14.377
> 
> 标签：asp.net-mvc, asp.net-mvc-2

我正在尝试在页面上加载部分视图，如下所示

```
 $('#logindisplay').load('@Url.Content("/../../Shared/_LogOnPartial.cshtml")'); 
```

但每次它说找不到指定的，虽然很多次我改变了路径并且一切正常。

jquery是否支持这种类型的部分视图加载，或者我每次都必须使用操作方法

看到第二个答案，我得出结论，每次我需要加载一个局部视图时，我都必须调用一个返回局部视图的操作方法，但它不接受硬编码的加载函数中提到的整个路径要加载的部分视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:08:33.157

> 但是每次都说找不到指定的... jquery是否支持这种类型的部分视图加载，或者我每次都必须调用动作方法

是的，它受 jquery 支持。但是您必须记住，加载执行“服务器调用”，这就是您必须调用操作方法的原因。

```
$('#logindisplay').load('@Url.Action("MethodName","Controller")'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T11:03:15.673

**HTML**

```
<div id="MyDiv" attr-Url="@Url.Action("ActionName", "ControllerName", 
                                                    new { area = "Area Name" })">
</div> 
```

**jQuery**

```
MyDiv.load($('#MyDiv').attr('attr-Url'), function () {
    //Success Callback
}); 
```

**编辑 - 1（替代品）**

```
@
{
    Html.RenderPartial("~/Views/AnotherFolder/PView", ViewData.Model);
}

@Html.Partial("../MyViewFolder/Partials/_PartialView", Model.MyObject)

@Html.Partial("~/Views/ControllerB/Index.cshtml") 
```

# javascript - 使用Javascript从选择标签上的模板重定向到Django中的函数？

> ID：15946969
> 
> 赞同：0
> 
> 时间：2013-04-11T10:57:16.143
> 
> 标签：javascript, django, templates

我在 Django 模板中有这样的选择语句：

```
<select onchange="change_session()" name="select_path" id="select_path">
            {% for i in session_info %}
              <option name="server_id" id="select_path" value="{{ i.id }}">{{ i.session_name }}</option>
               {% endfor %}
            </select> 
```

当用户选择另一个选项时，我想重定向到`change_user`Django 中调用的视图。我想像在表格中那样简单地做到这一点。为此，我尝试编写一个名为 change_session 的 Javascript 函数，该函数在用户更改选项时重定向到视图。我想将 id 的值传递`change_session_id`给 Django 视图。这是我到目前为止所拥有的：

```
function change_session() {
    var session_id=document.getElementById('select_path').value;

} 
```

如何修改此函数以传递给名为`change_session`. 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:11:02.133

您可以仅使用重定向它`<select>`

```
<select name="select_path" id="select_path"
    ONCHANGE="location = this.options[this.selectedIndex].value;">
    {% for i in session_info %}
    <option value="{% url app_name:change_user i.id %}">{{ i.session_name }}</option>
    {% endfor %}
</select> 
```

只需更改选项值，我不知道确切的网址。

# ruby-on-rails-3 - 替代回复，sendgrid smtp api

> ID：15946975
> 
> 赞同：1
> 
> 时间：2013-04-11T10:57:42.533
> 
> 标签：ruby-on-rails-3, email, sendgrid

是否可以替换 Sendgrid SMTP Api 中的回复选项？如果是，我该如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:57:06.550

每批电子邮件都必须共享唯一的参数和标题（主题标题除外）。因此，目前无法为每封电子邮件设置唯一的回复地址。

子标签也仅适用于电子邮件正文和主题。

但绝对要求将其作为 sendgrid getsatisfaction 页面 ( [http://community.sendgrid.com/sendgrid](http://community.sendgrid.com/sendgrid) ) 上的一项功能。这是个好主意！

# javascript - Javascript / jQuery 是否有系统变量？

> ID：15946978
> 
> 赞同：1
> 
> 时间：2013-04-11T10:57:45.697
> 
> 标签：javascript, jquery, system-variable

我注意到奇怪的问题。

看看这个 jQuery：

```
$(function(){
    status = 1;
    status1 = 2;

    $('body').append(status+' - '+status1);
}); 
```

[小提琴](http://jsfiddle.net/narekmarkosyan/4JrBK/4/)

如您所见，输出为：

```
- 2 
```

`status`JavaScript 或 jQuery 的系统变量也是如此吗？

还有其他像这样的变量吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T11:02:21.673

JavaScript 具有*全局*变量，在浏览器中，全局变量是[*全局对象*](http://es5.github.io/#x15.1)的属性，即`window`.

现在，`window`它本身有几个预定义的属性，**其中一些是只读的**，例如[`window.status` *^([MDN])*](https://developer.mozilla.org/en-US/docs/DOM/window.status)（这也可能因浏览器而异！）。因此，使用这样的名称创建全局变量将失败（该变量已经存在，但您不能为其分配新值）。

[您可以在MDN 文档](https://developer.mozilla.org/en-US/docs/DOM/window)中找到预定义属性的列表。

* * *

**这是您应该避免**使用全局变量的原因之一。如果您使用局部变量（通过声明变量`var`并在必要时将所有代码放在一个函数中），您就不会有这个问题：

```
(function() {
    var status = 'foo';
    // ....
}()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T11:08:33.867

全局对象`window`确实有一个名为的属性`status`，用于设置浏览器底部状态栏中的文本。

通过不使用`var`关键字，您将覆盖您所引用的此属性`window.status`。显然，只要用户没有将`dom.disable_window_status_change`首选项设置为`false`.

有关文档，请参阅**[此](https://developer.mozilla.org/en-US/docs/DOM/window)****[链接](https://developer.mozilla.org/en-US/docs/DOM/window.status)**，有关所有“全局”属性的列表，请参阅此链接。

JS 中也有一些单词被认为是保留的，所以你应该避免**[使用这些](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)**，即使在本地范围内也是如此。

# django - Django form.cleaned_data 是无

> ID：15946979
> 
> 赞同：10
> 
> 时间：2013-04-11T10:57:46.413
> 
> 标签：django, python-2.7, django-forms

这是我的表格：

```
class EventForm(forms.Form):
    start_date       = forms.CharField(required=True, widget=forms.TextInput(attrs={'class': 'span6 as-date'}))
    end_date         = forms.CharField(required=True, widget=forms.TimeInput(attrs={'class': 'span6 as-date'}))
    title            = forms.CharField(required=True, widget=forms.TextInput(attrs={'class': 'span8'}))
    description      = forms.CharField(required=True, widget=forms.Textarea(attrs={'rows': 4, 'class': 'span8'}))
    total_seats      = forms.IntegerField(required=True, widget=forms.TextInput(attrs={'class': 'span6'}))
    buffer_seats     = forms.IntegerField(required=True, widget=forms.TextInput(attrs={'class': 'span6'}))
    seat_cost        = forms.IntegerField(required=True, widget=forms.TextInput(attrs={'class': 'span8'}))
    published        = forms.BooleanField(required=False, widget=forms.CheckboxInput(attrs={'class': 'span6'}))
    verified_booking = forms.BooleanField(required=False, widget=forms.CheckboxInput(attrs={'class': 'span6'}))

def clean(self):
    try:
        self.cleaned_data['start_date'] = datetime.strptime(self.cleaned_data['start_date'], '%Y/%m/%d %H:%M')
    except ValueError:
        raise forms.ValidationError('Improper start date')
    try:
        self.cleaned_data['end_date'] = datetime.strptime(self.cleaned_data['end_date'], '%Y/%m/%d %H:%M')
    except ValueError:
        raise forms.ValidationError('Improper end date')
    if self.cleaned_data['buffer_seats'] >= self.cleaned_data['total_seats']:
        raise forms.ValidationError('Seats buffered can not be same or greater than total seats')
    if self.cleaned_data['start_date'] >= self.cleaned_data['end_date']:
        raise forms.ValidationError('Event start date can not be greater than end date')
    if self.cleaned_data['published'] == 'on':
        self.cleaned_data['published'] = True
    else:
        self.cleaned_data['published'] = False
    if self.cleaned_data['verified_booking'] == 'on':
        self.cleaned_data['verified_booking'] = True
    else:
        self.cleaned_data['verified_booking'] = False 
```

这是视图：

```
event_form = EventForm(request.POST)
if event_form.is_valid():
   event = events_api.save_event_from_form(request.user, address, event_form.cleaned_data) 
```

但我越来越`event_form.cleaned_data`像`None`。我错过了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-11T11:16:08.343

`form.clean()` **必须**返回`cleaned_data`。规范的实现是：

```
class MyForm(forms.Form):
    # ...
    def clean(self):
        cleaned_data = super(MyForm, self).clean()
        # do your custom validations / transformations here
        # and some more
        return cleaned_data 
```

# php - PHP - 我的 CMS 安全

> ID：15946983
> 
> 赞同：-1
> 
> 时间：2013-04-11T10:57:57.110
> 
> 标签：php, security

我有自己的 cms，我正在探索应该实施和研究的安全选项。

我所有的 CMS 页面都根据存储在 Session 中的 UserID 检查用户权限。我在想，“保护”这些页面中的表格对我来说有多重要？我的意思是用户有机会编写 SQL 语句，所以如果他们想使用 SQL 注入，其实并不难……

所以我的想法是只保护登录页面+防止会话劫持，这是正确的还是我错过了什么？

首页上的表格、查询字符串等也受到保护。

感谢您对此的任何了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:06:32.600

保护 Web 应用程序是一项永无止境的任务。人们通过工具和方法的组合，每天都在寻找可以利用的载体（从字面上看）。在构建 CMS 时，您必须特别小心：

*   用户能够以非身份登录
*   用户能够远程**永久**注入页面（尤其是与上述结合时）
*   用户能够修改或提取他们不应该访问的数据库内容

所有这些都与表单提交有关，或者更一般地说，与用户数据输入有关。它归结为一个简单的原则：永远不要**信任**用户。

您必须担心的第一个，也是迄今为止最危险的，是 SQL 注入。这是很多公司每年都会遇到的问题，而且相当深入，尽管大多数攻击可以通过使用参数化查询（*TRUE*参数化查询。PDO 默认模拟它们，有一个配置标志来打开真正的参数化）。这将有效地为您完成大部分与 SQL 相关的清理，将“合理清理”留给您（即确保日期实际上是日期）。这可以保护您免受人们倾向于称之为一阶 SQL 注入的影响——换句话说，直接进入。

二阶难度更大。它涉及在数据库中存储一些东西，然后在另一个语句中执行。[思科](http://www.cisco.com/web/about/security/intelligence/sql_injection.html#5)指南对事情的发生方式有很好的了解。

这就是 SQL 击败绝大多数脚本小子的全部内容。

在内容过滤方面，您希望使用白名单方法而不是黑名单方法。删除您不信任或无法识别的所有内容。在 HTML 方面，有一个很棒的工具叫做 HTMLPurify 可以做到这一点。

# 还

不要犯我老板犯的错误。立即检查会话，而不是在控制器运行后渲染页面之前。

# html - 非 JSF 组件的条件渲染（普通的普通 HTML 和模板文本）

> ID：15946985
> 
> 赞同：11
> 
> 时间：2013-04-11T10:58:04.320
> 
> 标签：html, jsf, conditional-rendering

我正在尝试有条件地渲染 a`<tr>`因此我不能使用`<h:panelGroup>`它，因为它将渲染到`<span> or <div>`

我目前的（工作）方法如下：

```
<h:outputFormat rendered="#{negotiator.maySend}">
    <tr> my tr stuff </tr>
</h:outputFormat> 
```

这行得通，但我不确定这是否是滥用的方式`<h:outputFormat>`- 在此之前我使用过，`<h:outputLabel>`但这是`<label>`在 IE 中呈现的。

我也阅读了这个问题的答案，但如上所述，它们对我不起作用，因为`<tr>`：[如何不在 JSF 中渲染整个块？](https://stackoverflow.com/questions/8398074/how-to-not-render-whole-block-in-jsf)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-11T11:45:54.930

> *我不能使用`<h:panelGroup>`，因为它会渲染到`<span>`或`<div>`*

显然你没有仔细测试它。[`<h:panelGroup>`](https://docs.oracle.com/javaee/7/javaserver-faces-2-2/vdldocs-facelets/h/panelGroup.html)如果您没有指定应该在客户端结束的属性，例如 , , 等，则不会呈现`layout`任何`id`内容`styleClass`。

因此，这在技术上应该可以完美地工作。

```
<h:panelGroup rendered="#{negotiator.maySend}">
    <tr> my tr stuff </tr>
</h:panelGroup> 
```

但是，更好的主要目的是使用[`<ui:fragment>`](https://docs.oracle.com/javaee/7/javaserver-faces-2-2/vdldocs-facelets/ui/fragment.html).

```
<ui:fragment rendered="#{negotiator.maySend}">
    <tr> my tr stuff </tr>
</ui:fragment> 
```

顺便说一句，这也是可能的[`<f:verbatim>`](https://docs.oracle.com/javaee/7/javaserver-faces-2-2/vdldocs-facelets/f/verbatim.html)，但自 JSF 2.0 以来已弃用，因为它是专门为在 JSP 中使用而设计的。

### 也可以看看：

*   [JSF 中 ui:fragment 的替代方案](https://stackoverflow.com/questions/3713468/alternative-to-uifragment-in-jsf/)
*   [有条件地显示 JSF 组件](https://stackoverflow.com/questions/4870462/conditionally-displaying-jsf-components)
*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-find-out-client-id-of-component-for-ajax-update-render-cannot-find-compo/)
*   [Ajax 更新/渲染不适用于具有渲染属性的组件](https://stackoverflow.com/questions/14790014/ajax-update-render-does-not-work-on-a-component-which-has-rendered-attribute)

# android - Android：带有滚动货架的 GridView

> ID：15946986
> 
> 赞同：0
> 
> 时间：2013-04-11T10:58:09.867
> 
> 标签：android, gridview, scroll

我想创建一个带架子的 GridView。我为此创建了一个类：

```
public class ShelveGridView extends GridView{

private Bitmap background;

public ShelveGridView(Context context, AttributeSet attrs) {
    super(context, attrs);
    background = BitmapFactory.decodeResource(getResources(), R.drawable.bibliotca_image_shelf);
}

@Override
protected void dispatchDraw(Canvas canvas) {
    int count = getChildCount();
    int top = count < 0 ? getChildAt(0).getTop() : 0;
    int backgroundWidth = background.getWidth();
    int backgroundHeight = background.getHeight();
    int width = getWidth();
    int height = getHeight();

    for (int x = 0; x < width; x += backgroundWidth) 
          for (int y = top; y < height; y += backgroundHeight) 
            canvas.drawBitmap(background, x, y, null);

    super.dispatchDraw(canvas);
}... 
```

但是当我滚动 GridView 时，货架不会移动。我想我必须在这个类中覆盖一些方法来在我滚动时移动位图背景。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T11:03:40.693

你没有正确地接近这个。以这种方式设置背景不会使其可滚动。有几种方法可以使背景滚动：

1.  将一个书架设置为列表项的背景
2.  将水平架子设置为分隔图像，并将架子的背面设置为列表项的图像。
3.  将水平架子设置为分隔图像，并将架子的背面设置为列表视图的背景（就像您现在对整个架子图像所做的那样）。

方法 3 将产生最接近的结果，这就是苹果 iBooks 的工作方式。

# c# - 如何以编程方式从实体获取具有模式名称的数据库表名

> ID：15946992
> 
> 赞同：4
> 
> 时间：2013-04-11T10:58:23.520
> 
> 标签：c#, linq, entity-framework

我正在尝试获取实体的 SQL 表名。当我使用 MetadataWorkspace 查询时，我会从对象或存储空间中获得大量信息。但是模式名称和表名称不存在。

我尝试查询 CSpace 和 SSpace 的所有 EntityType 对象，我可以看到两者都正确列出，但我不知道如何从 CSpace 获取 SSpace。

所以说我在对象模型中有一个名为 User 的类型 - 我如何在数据库中找到具有模式名称 (tkp.User) 的表名？

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-11T11:15:12.410

没有`perfect`答案，但这应该工作......

```
var ssSpaceSet = objectContext.MetadataWorkspace
    .GetItems<EntityContainer>(DataSpace.SSpace).First()
    .BaseEntitySets
    .First(meta => meta.ElementType.Name == "YourEntityName"); 
```

如果您在调试器中查找，`Table`属性应该具有真实的表名。

> 你需要`reflection`在最后一部分使用。
> 好消息是它也应该透明地与 EF6 一起使用（因为它具有类似的基类）

（类似 for `schema`，也应该在其中 - 这是`space`用于 Db/SQL 映射名称、构面等）

请参阅我的这篇文章以及许多详细信息
[获取模型模式以使用不支持 CreateDatabase 的提供程序以编程方式创建数据库](https://stackoverflow.com/questions/15891112/get-model-schema-to-programmatically-create-database-using-a-provider-that-doesn/15891802#15891802)

* * *

[获取模型架构以使用不支持 CreateDatabase 的提供程序以编程方式创建数据库](https://stackoverflow.com/questions/15891112/get-model-schema-to-programmatically-create-database-using-a-provider-that-doesn/15891802#15891802)
[如何以编程方式读取 EF DbContext 元数据？](https://stackoverflow.com/questions/15718301/how-i-can-read-ef-dbcontext-metadata-programmatically/15720297#15720297)
[如何通过单元测试检查属性标记为在 ORM 模型中计算？](https://stackoverflow.com/questions/15866272/how-check-by-unit-test-that-properties-mark-as-computed-in-orm-model/15867365#15867365)
[EF5 Code First 迁移中的编程数据转换](https://stackoverflow.com/questions/15865767/programmatic-data-transformation-in-ef5-code-first-migration/15869721#15869721)
[Entity Framework MigrationSqlGenerator for SQLite](https://stackoverflow.com/questions/15887145/entity-framework-migrationsqlgenerator-for-sqlite/15887646#15887646)
[http://entityframework.codeplex.com/](http://entityframework.codeplex.com/)
[Entity Framework - Get Table name from the Entity](https://stackoverflow.com/questions/6106842/entity-framework-get-table-name-from-the-entity)
[ef code first: get entity table name without dataannotations](https://stackoverflow.com/questions/7008212/ef-code-first-get-entity-table-name-without-dataannotations)
[Get Database Table Name from Entity Framework MetaData](https://stackoverflow.com/questions/1895455/get-database-table-name-from-entity-framework-metadata)
[http://www.codeproject.com/Articles/350135/Entity-Framework-Get-mapped-table-name-from-an-ent](http://www.codeproject.com/Articles/350135/Entity-Framework-Get-mapped-table-name-from-an-ent)

# c# - 显示计算过程的输出

> ID：15946993
> 
> 赞同：0
> 
> 时间：2013-04-11T10:58:24.007
> 
> 标签：c#, return, output, multiplication

对不起，如果这可能没有以最好的方式解释，但我基本上想做的是显示我创建的计算的输出。计算是古埃及乘法（我得到了一个故事来创建一个程序，用户可以选择使用这种方法计算值，并注意我们没有大声使用 * 和 / 运算符），我希望能够显示正在使用的功率、正在计算的值和总体结果。如果可能的话，我想将所有这些输出返回到一个弹出框中，但我不确定我将如何处理它，因为我是 C# 新手（学徒）。

这是我想要输出的示例

```
Powers: 1 + 4 + 8 = 13
Values: (1 * 238) + (4 * 238) + (8 * 238)
Result: 238 + 952 + 1904 = 3094 
```

这是我现在拥有的用于古埃及乘法的代码：注意 iReturnP = Power, iReturnN = Values, iReturn = Result

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SimpleMath
{
    public class AEM : IOperation
    {
        public int Calculate(int i, int j)
        {

            int[] ints = new int[] { i, j };
            Array.Sort(ints);
            List<int> powers = new List<int>();
            int power = 1;
            int first = ints[0];
            int iReturn = 0;
            int iReturnP = 0;
            int iReturnN = 0;
            do
            {
                powers.Add(power);
                power = new Multiply().Calculate(power, 2);
            } while (power <= first);
            iReturnP += first;
            while (first > 0)

            {
                int next = powers.LastOrDefault(x => x <= first);
                first -= next;
                int powertotal = new Multiply().Calculate(next, i);

                iReturnN += next;
                iReturn += powertotal;
            }
            return iReturnP;
            return iReturnN;
            return iReturn;

            }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T11:11:19.977

运行`return`语句后，该方法将退出。这意味着您的第二和第三条`return`语句将永远不会发生。如果你真的想使用我建议你返回一个包含所有 3 个值的`return`语句。`int[]`还有很多其他方法可以解决这个问题。请注意，这只会为您提供总数。我会带你上路，但你必须自己做一些工作。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SimpleMath
{
public class AEM : IOperation
{
    public static int[] Calculate(int i, int j)
    {

        int[] ints = new int[] { i, j };
        Array.Sort(ints);
        List<int> powers = new List<int>();
        int power = 1;
        int first = ints[0];
        int iReturn = 0;
        int iReturnP = 0;
        int iReturnN = 0;
        do
        {
            powers.Add(power);
            power = new Multiply().Calculate(power, 2);
        } while (power <= first);
        iReturnP += first;
        while (first > 0)

        {
            int next = powers.LastOrDefault(x => x <= first);
            first -= next;
            int powertotal = new Multiply().Calculate(next, i);

            iReturnN += next;
            iReturn += powertotal;
        }
        return new int[]{iReturnP, iReturnN, iReturn};

        }
}
} 
```

然后在您调用计算的方法中：

```
int[] results = AEM.Calculate(i, j);
MessageBox.Show("Powers: " + results[0] + "\r\n Values: " + results[1] + "\r\n Results: " + results[2]); 
```

# ruby-on-rails - 带有errbit的airbrake中未定义的方法`method ='

> ID：15946995
> 
> 赞同：1
> 
> 时间：2013-04-11T10:58:28.587
> 
> 标签：ruby-on-rails, exception, deployment, error-handling, errbit

当我做 rake airbrake:test 时，我在生产中得到了这个异常。Errbit 应用程序托管在 heroku 上，并且不接收来自生产的任何消息。问题是什么？

空气制动 v 3.1.8

Errbit v - 最后来自 github

```
undefined method `method=' for #<BacktraceLine:0x00000005a0d160>

app/models/backtrace.rb:27:in `new'
app/models/backtrace.rb:27:in `block in raw='
app/models/backtrace.rb:26:in `each'
app/models/backtrace.rb:26:in `raw='
app/models/backtrace.rb:18:in `new'
app/models/backtrace.rb:18:in `find_or_create'
app/models/error_report.rb:33:in `backtrace'
app/models/error_report.rb:40:in `generate_notice!'
lib/overrides/hoptoad_notifier/hoptoad_notifier.rb:18:in `send_notice' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:26:12.467

这是Errbit中的一个[已知问题，由 3.1.8 之后 Airbrake 的更改引起。](https://github.com/errbit/errbit/pull/449)

7 天前（截至撰写本文时）已对 Errbit的一个[未命名分支](https://github.com/errbit/errbit/tree/bd2e7802f9eddb0a2fca70c7db1ba5e995317d80)进行了[修复。](https://github.com/errbit/errbit/commit/bd2e7802f9eddb0a2fca70c7db1ba5e995317d80)

从未命名的分支重新安装 Errbit，或手动实施更改。或者等到修复程序进入 Errbit 中继，然后按照 Errbit 自述文件中的说明进行升级。

或者，您可以降级到旧版本的 Airbrake。版本 3.1.8[不包含](https://github.com/airbrake/airbrake/blob/v3.1.8/lib/airbrake/backtrace.rb#L18)重大更改。我通过在我的机器上安装 Airbrake 3.1.8 并检查文件来验证这一点。把它放在你的 Gemfile 中，然后运行`bundle install`：

```
gem "airbrake", "3.1.8" 
```

* * *

### 编辑：

由于您可以验证使用兼容版本的 Airbrake，请查看 Errbit。

在当前 Errbit 主干中，`BacktraceLine#method=`( [source](https://github.com/errbit/errbit/blob/master/app/models/backtrace_line.rb#L9) ) 是 Mongoid 提供的接口。未定义的方法错误意味着 Mongoid 在运行时未提供该方法。您可能在测试环境中遇到了 Mongoid 的初始化或配置问题。

### 编辑2：

原来这个错误是由于 Errbit 没有安装**Errbit**需要的 Mongoid 引起的。

Errbit 使用返回 Errbit 的钩子覆盖 Airbrake 通知程序 gem，因此*使用 Airbrake 会无意中调用 Errbit*。没有 Mongoid，Errbit 就会失败。

有两种解决方案：

*   从应用程序中完全删除[Errbit 的文件](https://github.com/errbit/errbit)。

或者...

*   完全实现 Errbit 并使用它。

# nosql - 如何以 MB 为单位获取 Cassandra 表/列族大小

> ID：15946997
> 
> 赞同：3
> 
> 时间：2013-04-11T10:58:37.367
> 
> 标签：nosql, cassandra, cql

我想设计我的集群，并希望根据表/列的大小设置适当的 key_cache 和 row_cache 大小。与mysql类似，我们在Cassandra/CQL中有这样的东西吗？

```
SELECT table_name AS "Tables", 
round(((data_length + index_length) / 1024 / 1024), 2) "Size in MB" 
FROM information_schema.TABLES 
WHERE table_schema = "$DB_NAME"; 
```

或任何其他方式分别查找数据大小和索引的大小。

或者在不考虑任何复制因素的情况下，需要对每个节点进行什么配置才能将我的表完全放入内存中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:34:08.157

键缓存和行缓存的工作方式完全不同。了解计算尺寸的差异很重要。

键缓存是文件中用于行位置的偏移量的缓存。它基本上是从（键，文件）到偏移量的映射。因此，缩放键缓存大小取决于行数，而不是整体数据大小。您可以从“nodetool cfstats”中的“键数”参数中找到行数。请注意，这是每个节点，而不是总数，但这就是您要决定缓存大小的内容。默认大小为 min(5% of Heap (in MB), 100MB)，这对于大多数应用程序来说可能已经足够了。这里的一个微妙之处是行可能存在于多个文件（SSTables）中，数量取决于您的写入模式。但是，这种重复在 nodetool 的估计计数中（大约）占了。

行缓存缓存实际行。要对此进行大小估计，您可以使用“nodetool cfstats”中的“已用空间”参数。但是，行缓存缓存反序列化的数据并且仅缓存最新的副本，因此大小可能完全不同（更高或更低）。

还有第三个可配置性较低的缓存 - 您的操作系统文件系统缓存。在大多数情况下，这实际上比行缓存要好。它避免了在内存中复制数据，因为当使用行缓存时，最有可能的数据也将在文件系统缓存中。在我的实验中，从文件系统缓存中的 SSTable 读取仅比行缓存慢 30%（不久前，可能不再有效，但不太可能有显着差异）。行缓存的主要用例是当您想要确保缓存一个相对较小的 CF 时。否则使用文件系统缓存可能是最好的。

总之，Cassandra 默认的大键缓存和无行缓存是大多数设置的最佳选择。如果您知道您的访问模式不适用于默认值或者您遇到性能问题，您应该只使用缓存。