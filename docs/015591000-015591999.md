# StackOverflow 问答 15591000-15591999

# jekyll - Jekyll 的“--auto”不起作用？

> ID：15591000
> 
> 赞同：14
> 
> 时间：2013-03-23T19:15:35.593
> 
> 标签：jekyll

我刚刚重新安装了整个系统并再次开始处理我的项目。我在其中一些中使用并且仍在使用 Jekyll，但是我在使用`--auto`or`_config.yml`的自动生成时遇到了问题`auto: true`。它根本行不通。的输出`jekyll --server --auto`是：

```
Configuration from /home/rafal/Documents/Projects/ruby-adventure/_config.yml
Auto-regenerating enabled: /home/rafal/Documents/Projects/ruby-adventure -> /home/rafal/Documents/Projects/ruby-adventure/_site
[2013-03-23 19:09:53] regeneration: 1 files changed
[2013-03-23 19:09:53] INFO  WEBrick 1.3.1
[2013-03-23 19:09:53] INFO  ruby 2.0.0 (2013-02-24) [x86_64-linux]
[2013-03-23 19:09:53] WARN  TCPServer Error: Address already in use - bind(2)
[2013-03-23 19:09:53] INFO  WEBrick::HTTPServer#start: pid=3288 port=4000
[2013-03-23 19:09:53] regeneration: 1 files changed
[2013-03-23 19:09:54] regeneration: 1 files changed
[2013-03-23 19:09:54] regeneration: 1 files changed
[2013-03-23 19:09:54] regeneration: 1 files changed
[2013-03-23 19:09:54] regeneration: 1 files changed
[2013-03-23 19:09:54] regeneration: 1 files changed
[2013-03-23 19:09:54] regeneration: 1 files changed 
```

的输出`jekyll --no-auto --server`是：

```
Configuration from /home/rafal/Documents/Projects/ruby-adventure/_config.yml
Building site: /home/rafal/Documents/Projects/ruby-adventure -> /home/rafal/Documents/Projects/ruby-adventure/_site
Successfully generated site: /home/rafal/Documents/Projects/ruby-adventure -> /home/rafal/Documents/Projects/ruby-adventure/_site
[2013-03-23 19:12:31] INFO  WEBrick 1.3.1
[2013-03-23 19:12:31] INFO  ruby 2.0.0 (2013-02-24) [x86_64-linux]
[2013-03-23 19:12:31] WARN  TCPServer Error: Address already in use - bind(2)
[2013-03-23 19:12:31] INFO  WEBrick::HTTPServer#start: pid=3327 port=4000 
```

...所以没有错误弹出。该站点生成正常，但是当我更改文件时，它不会自动重新生成。任何想法为什么？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-25T08:42:30.437

似乎是由最近对 directory_watcher gem 的更改引起的。回滚宝石为我解决了这个问题：

```
sudo gem uninstall directory_watcher && sudo gem install directory_watcher -v 1.4.1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-14T03:16:02.443

我可以通过根据@lilakai 硬锁定directory_watcher gem 来解决这个问题，但我以不同的方式做到了：

将此行添加到我的 gemfile（在开发组中）：

```
gem 'directory_watcher', '1.4' 
```

并跑了：

```
bundle update directory_watcher 
```

一旦我这样做了，一切都正常了（因为它将我的版本锁定为 1.4，我通过 Gemfile.lock 确认了这一点）。我更喜欢直接通过 bundler 管理我的所有 gem，而不是通过系统 ruby​​。

在发布这篇文章时，我使用最新版本的 Octopress ( [https://github.com/imathis/octopress](https://github.com/imathis/octopress) ) 遇到了这个问题。

# jquery - jquery setInterval 或滚动

> ID：15591002
> 
> 赞同：9
> 
> 时间：2013-03-23T19:15:44.447
> 
> 标签：jquery, performance, optimization

我正在做一个需要收听`scroll`事件的项目..我想知道什么是更好的方法..

# 第一种方法

```
 function scroll() {
    if ($(window).scrollTop() > 200) {
        top.fadeIn();
    } else {
        top.fadeOut();
    }
    if (menuVisible) {
      quickHideMenu();
    }
} 
```

# 第二种方法

```
 function scroll() {
          didScroll = true;
      }

      setInterval(function() {
          if ( didScroll ) {
              didScroll = false;
              if ($(window).scrollTop() > 200) {
                  top.fadeIn();
              } else {
                  top.fadeOut();
              }
              if (menuVisible) {
                quickHideMenu();
              }
          }
      }, 250); 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-23T19:31:27.997

两者都不。我只是在阅读有关 JS/jQuery 模式的信息。Window Scroll 事件有一个示例：[jQuery Window Scroll Pattern](https://github.com/shichuan/javascript-patterns/blob/master/jquery-patterns/window-scroll-event.html)

```
var scrollTimeout;  // global for any pending scrollTimeout

$(window).scroll(function () {
    if (scrollTimeout) {
        // clear the timeout, if one is pending
        clearTimeout(scrollTimeout);
        scrollTimeout = null;
    }
    scrollTimeout = setTimeout(scrollHandler, 250);
});

scrollHandler = function () {
    // Check your page position
    if ($(window).scrollTop() > 200) {
        top.fadeIn();
    } else {
        top.fadeOut();
    }
    if (menuVisible) {
        quickHideMenu();
    }
}; 
```

最初来自这里：[Javascript 模式](http://shichuan.github.com/javascript-patterns/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T13:39:52.090

对我来说效果很好

```
<style type="text/css">
    .scrollToTop {
        width:100px; 
        height:130px;
        padding:10px; 
        text-align:center; 
        background: whiteSmoke;
        font-weight: bold;
        color: #444;
        text-decoration: none;
        position:fixed;
        top:75px;
        right:40px;
        display:none;
        background: url('arrow_up.png') no-repeat 0px 20px;
    }

.scrollToTop:hover{
    text-decoration:none;
}

</style> 
```

```
<script>
$(document).ready(function(){

    //Check to see if the window is top if not then display button
    $(window).scroll(function(){
        if ($(this).scrollTop() > 100) {
            $('.scrollToTop').fadeIn();
        } else {
            $('.scrollToTop').fadeOut();
        }
    });

    //Click event to scroll to top
    $('.scrollToTop').click(function(){
        $('html, body').animate({scrollTop : 0},800);
        return false;
    }); 
});
</script>

<a href="#" class="scrollToTop">Scroll To Top</a> 
```

[http://www.paulund.co.uk/how-to-create-an-animated-scroll-to-top-with-jquery](http://www.paulund.co.uk/how-to-create-an-animated-scroll-to-top-with-jquery)

# webstorm - 如何更改 WebStorm 中现有文件的文件类型关联？

> ID：15591003
> 
> 赞同：176
> 
> 时间：2013-03-23T19:15:48.157
> 
> 标签：webstorm

我不小心创建了一个没有扩展名的文件，并且我选择了错误的文件类型关联。我认为是文本文档。我将它重命名为具有我想要的 .js 扩展名，但现在它卡在没有任何语法突出显示的情况下。WebStorm 不会将其视为 javascript 文件。我找不到任何地方可以更改 WebStorm 处理此文件的方式。我试过重命名它并重命名它，但这不起作用。对于任何其他名称（带有 .js 扩展名），它会将其视为 javascript 文件，而不是原始名称。

我怎样才能解决这个问题？WebStorm 文档没有帮助。

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2013-09-23T03:11:46.350

在`Settings`（或`Preferences`对于 mac）> `Editor`>`File Types`中，您可以编辑将文件关联为某种类型或其他类型的模式。

如果您选择了错误选择的文件类型的模式（在您的案例`Text`类型中），您可以删除创建用于将您的文件的文件名关联为错误类型的文件名模式。

然后点击`Apply`>`OK`

* * *

## 回答 #2

> 赞同：204
> 
> 时间：2015-04-23T22:19:08.117

我在 OSX 上的 phpstorm 8.0.3 中遇到过这个问题。

我正在努力处理已添加为文本文件的单个文件，但我输入了 .js 扩展名。

我尝试删除和重新创建，重命名和重命名，完全删除 .idea。没有任何效果。

我发现 PHPStorm 已将整个文件名添加到文本文件的模式列表中。

```
....
*.txt
myfile.js
... etc 
```

这显然覆盖了所有其他设置。而且它在 IDE 配置中，而不是在项目配置中。所以我猜其他所有项目都会遇到同样的问题。

一旦我知道在哪里看它很容易修复。

导航：

```
PhpStorm > Preferences > Editor > File Types > <highlight> Text files 
```

然后`myfile.js`在`Registered Patterns`面板中找到并删除。该文件应立即假定它是正确的关联。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2015-01-19T22:37:49.687

转到设置-> 文件类型，然后单击“文本文件”。如果向下滚动，您应该会看到该文件。然后，您可以通过选择它并单击 -（减号）按钮将其与关联一起删除

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-11-04T09:49:38.577

参考文件 -> 设置 -> IDE 设置 -> 文件类型

在 Reconigzed File Types 中右键选择“Text files”，然后在 Registered Patterns 中找到您的文件并单击删除您的文件

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-06-17T12:06:25.900

在 Windows 8 上，我可以通过在文件 > 设置 > 编辑器 > 文件类型下删除无效关联，然后选择“文本文件”作为可识别的文件类型，并从底部的已注册模式块中删除无效条目。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-04-15T11:38:05.873

这么多答案，一切都很接近，但没有一个像我这样。

A 遇到了 .vue 文件的问题。我的旧 PHpStorm 版本没有跟踪 .vue 文件，所以我以某种方式将它们关联为 .js 文件。然而，这是一个错误，因为语法不同，我在代码中看到了很多“错误”。

是的，解决方案实际上是在设置（或 mac 的首选项）> 编辑器 > 文件类型对话框中。在窗口中，您可以看到可能的关联列表。在列表的最底部，您将看到 Vue.js 模板，而我在底部窗口中没有关联（见图），因此我在单击绿色“+”后手动添加了 *.vue 关联。

我认为这对于添加到 PHPStorm 的任何适当的文件类型都是正确的。但是，您可以添加自己的文件类型。[![PHPStorm 关联](../Images/04a20ecbdabe4632cd64a7b14aaed2f1.png)](https://i.stack.imgur.com/9LCQH.jpg)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-14T09:20:39.663

这适用于 PHPStorm，我可以假设在 WebStorm 中应该是类似的

1.  转到首选项目录这是如何找到您的操作系统 [https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-缓存插件和日志](https://intellij-support.jetbrains.com/hc/en-us/articles/206544519-Directories-used-by-the-IDE-to-store-settings-caches-plugins-and-logs)

2.  查找文件 YOUR_PREFERENCES_DIRECTORY/options/filetypes.xml

3.  例如，使用任何文本编辑器对其进行编辑并删除所需的行

> ```
> <mapping pattern="delete.yaml" type="PLAIN_TEXT" /> 
> ```

4.  顶部菜单文件->使缓存无效/重新启动

5.  享受

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-04-18T18:54:35.317

我在 phpstorm 中发现我可以使用 Refactor > Rename... 函数将未指定文件类型的文件（例如，没有扩展名的名称）与文件类型相关联。

例如，如果我有一个名为 do_the_things 的 bash 脚本，我可以将其重构 > 重命名为 do_the_things.sh ，这会导致它获取 bash 突出显示，然后当我重构 > 将其重命名回 do_the_things 时，它会保持 bash 突出显示。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-02-15T21:28:06.170

在我的例子中，有问题的文件 ,`DepositBreakdownList.js`与一个名为“文件内容自动检测的文件类型”的“类型”相关联。选择它然后删除它（使用减号按钮）允许该文件再次被视为正确的 JavaScript 文件。

[![删除输入错误的文件](../Images/42a21471a5f2e4c8149f945c669cf669.png)](https://i.stack.imgur.com/yyNcL.png)

在我这样做之前，我无法使用与 JavaScript 关联的 Live Templates，即使文件扩展名为 . `.js`，这简直令人抓狂。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-03-26T10:51:52.487

我找到了解决方案，删除（或重命名为 .old）文件：C:\Users\.PyCharmCE\config\options\filetypes.xml

Es: C:\Users\goofy.PyCharmCE2018.3\config\options\filetypes.xml

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2013-03-23T19:19:09.000

经过大约一个小时的搜索和折腾，我找到了一个解决方法：

我将文件（通过重构命令）重命名为临时文件名。然后，我创建了一个具有正确名称且扩展名为 .js 的新文件，它可以正常工作，然后我将代码从原始文件复制到具有正确扩展名的新创建文件中。

我想选择“新的javascript文件”并做同样的事情也可以。

# c - 查找输入 char* 的大小并将部分复制到输出 char* C

> ID：15591010
> 
> 赞同：1
> 
> 时间：2013-03-23T19:16:34.253
> 
> 标签：c, pointers, char, sizeof

我有一个 char 数组`LL,4014.84954`，我将其发送到如下示例的函数中：

```
#include <stdio.h>
#include <math.h>

void myFunction(char* in_string, char* out_string) {
  printf("Start_String=%s\n", in_string);
  int in_size = (int)(sizeof(in_string));
  printf("%d\n", in_size);
  int i = 0;
  for(i = 0; i <= in_size-ceil(in_size/2); i++) {
    out_string[i] = in_string[i];
  }
}

int main(int arg) {
  char in_string[] = "LL,4014.84954";
  char out_string[] = "";
  printf("In_String=%s\n", in_string);
  myFunction(in_string, out_string);
  printf("Out_String=%s\n", out_string);
} 
```

我的问题有两个部分。

1.  如何获取此 char 数组的长度？`int in_size = (int)(sizeof(in_string));`在这个例子中给了我 8 这是指针的大小（long int）。我知道我可以制作一个 for 循环，直到它看到空终止，但是有更好的方法吗？我以前使用 char[] 并且`sizeof`效果很好，但现在我正在转换为 char*。

2.  我怎样才能将这些字符的一部分写入`out_string`. 我的示例当前将所有字符写入`out_string`.

这是原始输出：

```
In_String=LL,4014.84954
Start_String=LL,4014.84954
8
Out_String=LL,40014.84954 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:18:28.450

关于您的第一个问题，请使用[`strlen()`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strlen.html).

关于第二个问题，首先你需要确保它`out_string`足够宽以容纳结果。目前，它不是，并且您的代码的行为是未定义的。解决此问题后，要复制字符串的一部分，您需要更改`for`循环的初始条件和最终条件，不要忘记 NUL 终止符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:44:20.603

**(1)** 对问题 2 的回答：

```
char out_string[] = ""; 
```

`out_string[]`只有一种尺寸。您分配 错误并导致未定义的错误`out_string[i] = ...`。`i > 0`而不是这个，你应该`out_string[]`这样声明：

```
out_string[] = malloc(strlen(in_string) + 1);

//                                        ^ extra for \0 char 
```

**（2）** 另外@WhozCraig 评论正确，你实际上需要`strlen()`找到字符串的长度。sizeof 你用错了。

所以替换：

```
int in_size = (int)(sizeof(in_string)); 
```

经过

```
int in_size = strlen(in_string); 
```

**(3)** 还有，什么是`in_size-ceil`。正如我从您的原始输出中了解到的那样，您不需要这种函数和计算。只需替换您的 for 循环：

```
for(i = 0; i <= in_size-ceil(in_size/2); i++) 
```

经过

```
for(i = 0; i < in_size; i++) 
```

**(4)** 最后不要忘记终止你`string out_string`，在 for 循环后添加这一行

```
out_string[i] = '\0' 
```

# php - Facebook PHP SDK 上的会话问题

> ID：15591014
> 
> 赞同：0
> 
> 时间：2013-03-23T19:16:48.350
> 
> 标签：php, ajax, facebook, session, facebook-php-sdk

我想在我的网站按钮中制作`onclick`将在用户 facebook 墙上发布消息的按钮。我从我网站中的 php 页面调用 AJAX 脚本，该脚本将 _POST 中的消息发送到带有 facebook 代码的 php 文件。

运行我的 php 文件时出现此错误：

> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送（输出开始于 /home/user/public_html/fb/index.php:1）在 /home/user/public_html/fb /facebook.php 在第 49 行

我的 PHP 看起来像这样：

```
<?php
include('../ilink.php'); //mysqli connection

$fb_message=$_POST['fb_message'];
$fb_description=$_POST['fb_description'];
$fb_picture=$_POST['fb_picture'];

require 'facebook.php';

// Create our Application instance.
$facebook = new Facebook(array(
    'appId'  => '--appid--',
    'secret' => '--secret--',
    'cookie' => true
));

    $user  = $facebook->getUser(); 

    if ($user) {
      try {
        // Proceed knowing you have a logged in user who's authenticated.
        $user_profile = $facebook->api('/me');
      } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
      }
    }

    // Login or logout url will be needed depending on current user state.
    if ($user) {
      $logoutUrl = $facebook->getLogoutUrl();
    } else {
      $loginUrl = $facebook->getLoginUrl();
    }

    $attachment = array('message' => $fb_message,
            'name' => 'text',
            'caption' => 'text',
            'link' => 'http://www.domain.com',
            'description' => $fb_description,
            'picture' => $fb_picture,
            'actions' => array(array('name'=>'text', 
                              'link' => 'http://www.domain.com'),)
            );

    $result = $facebook->api('/me/feed/','post',$attachment);
?> 
```

我的 ajax 脚本：

```
 function fb_post(fb_message,fb_description,fb_picture,redirect){
        var xmlhttp;
        if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
        }
        else{// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function(){
          if (xmlhttp.readyState==4 && xmlhttp.status==200){

                document.location.href =redirect;               
          }
        }

        var q="fb_message="+fb_message+"&fb_description="+fb_description+"&fb_picture="+fb_picture;
        xmlhttp.open("POST","/fb/index.php",true);
        xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xmlhttp.send(q);
} 
```

为什么会出现错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:38:08.527

如果这是您的所有代码，它看起来像是在会话实例之前发送的包含文件中的某些内容。

# jaxb - JAXB Unmarshal - 元素丢失和元素不按顺序排列

> ID：15591017
> 
> 赞同：1
> 
> 时间：2013-03-23T19:16:53.960
> 
> 标签：jaxb, jaxb2

我正在尝试解组我之前编组的 XML。

在未编组的结果中，我缺少元素，并且我得到的元素与输入 XML 的顺序不同。我创建了一个 afterUnmarshal() 侦听器，我在那里看到了元素，但在生成的 Java 对象中看不到。

XSD 的结构是这样的（例如，“扇出”节点可以包含另一组 processStep，因此可以深度嵌套（树））：

```
<xsd:element name="process">
        <xsd:annotation>
            <xsd:documentation>Integration Process</xsd:documentation>
        </xsd:annotation>
        <xsd:complexType>
            <xsd:sequence>
        <!-- more -->
                <xsd:element name="itinerary" type="lwis:itineraryType"/>
        <!-- more -->
        </xsd:complexType>
    </xsd:element>
    <xsd:complexType name="itineraryType">
        <xsd:sequence>
            <xsd:element name="step" type="lwis:stepType"/>
            <xsd:choice minOccurs="0" maxOccurs="unbounded">
                <xsd:element name="step" type="lwis:stepType"/>
                <xsd:element name="fanout" type="lwis:fanoutType"/>
                <xsd:element name="decision">
                    <xsd:complexType>
                            <!-- snip.. -->
                    </xsd:complexType>
                </xsd:element>
            </xsd:choice>
        </xsd:sequence>
    </xsd:complexType> 
```

我想顺序是由 SAX 解析器给出的，但我无法想象 SAX 解析器会无缘无故地改变顺序？目前，列表中的第一个元素是 XML 中的最后一个元素。列表中的第二个元素是 XML 中的第三个元素 - 它似乎是随机的..

谢谢你的帮助！

样本输入：

```
<?xml version="1.0" encoding="ISO-8859-1" standalone="yes"?>
<process name="My.Process" description="My Process description" qualityOfService="AT_LEAST_ONCE" entryEndpoint="ENTRY.EP" xmlns="http://www.xxxxx.com/ns/yyyy">
    <faultEndpoint endpoint_ref="EXIT.EP"/>
    <rejectEndpoint endpoint_ref="EXIT.EP"/>
    <itinerary>
        <step name="Step 1" endpoint_ref="Step1.EP" type="SERVICE"/>
        <step name="Step2-CBRStep" endpoint_ref="Step2.EP" type="SERVICE"/>
        <decision name="Decision-nonameneeded">
            <option name="op1">
                <step name="Step 2A" endpoint_ref="Step2a.EP" type="SERVICE"/>
            </option>
            <option name="op2">
                <step name="Step 2B" endpoint_ref="Step2a.EP" type="SERVICE"/>
            </option>
        </decision>
        <step name="Step 3" endpoint_ref="Step3.EP" type="SERVICE"/>
        <fanout name="Fan1">
            <path>
                <step name="Step4A" endpoint_ref="Step4A.EP" type="SERVICE"/>
            </path>
            <path>
                <step name="Step4B" endpoint_ref="Step4B.EP" type="SERVICE"/>
                <step name="Step5" endpoint_ref="Step5.EP" type="SERVICE"/>
            </path>
        </fanout>
        <step name="Step6" endpoint_ref="Step6.EP" type="SERVICE"/>
    </itinerary>
</process> 
```

目的：

```
Process Object has a field with itinerary of Type ItineraryType which:
step = StepType ("Step6" from XML)
stepOrFanoutOrDecision = ArrayList:
 item 0: ItineraryType$Decision ("Decision-nonameneeded" from XML)
   option 0: "op1" from XML
     step: "Step 2A" from XML
   option 1: "op2" from XML
     step: "Step 2B" from XML
 item 1: FanoutType ("Fan1" from XML)
     path 0: 
      step: Step4A
     path 1: 
      step: Step5 
```

缺少步骤 1、Step2-CBRStep 和步骤 4B？

我在这里有行程的 toString() 输出：

```
com.x.ItineraryType@fe39ebf[step=com.x.StepType@28cb15bf[endpointRef=Step6.EP, type=SERVICE, params=<null>, paramsRef=<null>, name=Step6, description=<null>], stepOrFanoutOrDecision={com.x.ItineraryType$Decision@2d00c385[option={com.x.ItineraryType$Decision$Option@d2467d8[step=com.x.StepType@511d9ca5[endpointRef=Step2a.EP, type=SERVICE, params=<null>, paramsRef=<null>, name=Step 2A, description=<null>], stepOrFanoutOrDecision=<null>, name=op1],com.x.ItineraryType$Decision$Option@6f173e3d[step=com.x.StepType@5ef74fc5[endpointRef=Step2a.EP, type=SERVICE, params=<null>, paramsRef=<null>, name=Step 2B, description=<null>], stepOrFanoutOrDecision=<null>, name=op2]}, name=Decision-nonameneeded, description=<null>],com.x.FanoutType@3e963f38[path={com.x.FanoutType$Path@7a1095a1[step=com.x.StepType@56cfbba2[endpointRef=Step4A.EP, type=SERVICE, params=<null>, paramsRef=<null>, name=Step4A, description=<null>], stepOrFanoutOrDecision=<null>, name=<null>],com.x.FanoutType$Path@6027b534[step=com.x.StepType@4ee99a3d[endpointRef=Step5.EP, type=SERVICE, params=<null>, paramsRef=<null>, name=Step5, description=<null>], stepOrFanoutOrDecision=<null>, name=<null>]}, name=Fan1, description=<null>]}] 
```

我正在使用的 Ant 脚本：带有扩展 hashCode、toString 和 equals：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="RunningXjc" default="generate-sources" basedir=".">
    <description>Runs Xjc Binding Compiler</description>

    <target name="generate-sources">
        <taskdef name="xjc" classname="org.jvnet.jaxb2_commons.xjc.XJC2Task">
            <classpath>
                <fileset dir="buildLib/jaxb-ri-2.2.6/lib">
                    <include name="*" />
                </fileset>
                <fileset dir="buildLib/jaxb2-basics-dist-0.6.4/dist">
                    <include name="jaxb2-basics-ant-*.jar" />
                </fileset>
            </classpath>
        </taskdef>

        <!-- Generate the Java code for XSD -->
        <xjc destdir="${basedir}/target/generated-sources/xjc" extension="true">
            <arg
                line="
        -Xequals
        -XhashCode
        -XtoString
        -Xcopyable
        -Xmergeable" />
            <binding dir="${basedir}/src">
                <include name="**/*.xjb" />
            </binding>
            <schema dir="${basedir}/schema">
                <include name="processSlim.xsd" />
            </schema>
            <!-- Plugins -->
            <classpath>
                <fileset dir="${basedir}/buildLib/jaxb2-basics-dist-0.6.4">
                    <!-- JAXB2 Basics library -->
                    <include name="dist/jaxb2-basics-*.jar" />
                    <!-- JAXB2 Basics library dependencies -->
                    <include name="dist/jaxb2-basics-runtime-*.jar" />
                    <include name="dist/jaxb2-basics-tools-*.jar" />
                    <include name="lib/commons-beanutils-*.jar" />
                    <include name="lib/commons-lang-*.jar" />
                    <include name="lib/commons-logging-*.jar" />
                    <include name="lib/javaparser-*.jar" />
                    <include name="lib/annox-*.jar" />
                </fileset>
            </classpath>
        </xjc>
    </target>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T15:25:21.923

**问题**

**从您的 XML 模式**

下面是您的 XML 模式的一个片段。`itineraryType`包含一个序列，其中一个元素`step`可以出现在选择结构的内部和外部。

```
<xsd:complexType name="itineraryType">
    <xsd:sequence>
        <xsd:element name="step" type="lwis:stepType" />
        <xsd:choice minOccurs="0" maxOccurs="unbounded">
            <xsd:element name="step" type="lwis:stepType" />
            <xsd:element name="fanout" type="lwis:fanoutType" />
            <xsd:element name="decision">
                <xsd:complexType>
                    <!-- snip.. -->
                </xsd:complexType>
            </xsd:element>
        </xsd:choice>
    </xsd:sequence>
</xsd:complexType> 
```

**行程类型**

这导致`step`元素被映射到导致您的问题的两个不同属性。

```
public class ItineraryType {

    @XmlElement(required = true)
    protected StepType step;
    @XmlElements({
        @XmlElement(name = "step", type = StepType.class),
        @XmlElement(name = "fanout", type = FanoutType.class),
        @XmlElement(name = "decision", type = ItineraryType.Decision.class)
    })
    protected List<Object> stepOrFanoutOrDecision;

   ...
} 
```

* * *

**解决方案**

您可以使用 JAXB XJC 工具中的[简单绑定模式](http://jaxb.java.net/nonav/2.2.1/docs/vendorCustomizations.html#simple)扩展来支持此用例。它将自动阻止`step`创建该属性。您可以通过如下外部绑定文档指定此内容：

**绑定.xml**

```
<jxb:bindings 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
    xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
    jxb:extensionBindingPrefixes="xjc"
    version="2.1">

    <jxb:globalBindings>
        <xjc:simple />
    </jxb:globalBindings>

</jxb:bindings> 
```

**XJC 呼叫**

下面是如何在 XJC 调用中引用外部绑定文件。您还需要使用该`-extension`标志来启用要使用的 XJC 扩展。

```
xjc -extension -b bindings.xml schema.xsd 
```

# c# - 展开时的 ListPicker 背景 + 浅色主题

> ID：15591030
> 
> 赞同：1
> 
> 时间：2013-03-23T19:17:55.897
> 
> 标签：c#, themes, windows-phone-8, windows-phone, listpicker

**当我将我的设备主题切换为light**时，我很难让我`ListPicker`看起来正确。从下面的屏幕截图中可以看出，**深色主题看起来不错，但****浅色**主题看起来透明。

 ******开始：

![在此处输入图像描述](../Images/25b4feb18710d2ef52c9648f3dae6cf5.png)

扩展为深色主题：

![在此处输入图像描述](../Images/cd50a8f0050265ca61c1de65a4da0039.png)

用浅色主题扩展：

![在此处输入图像描述](../Images/9a5b152a3262c80c945380beaa2aa442.png)

**[这个问题](https://stackoverflow.com/questions/14400728/toolkitlistpicker-styling-the-expansion-box)**看起来很有希望，但它似乎只适用于`FullScreenMode`. 另外，在**[答案链接到的这篇文章](http://www.geekchamp.com/tips/listpicker-fullscreen-mode-background-problem-workaround)**中，描述了更新`Expanded`视觉状态，当我在 Blend 中打开我的页面并编辑模板的副本时，它似乎不存在。这是我的 XAML，非常简单：

```
<Grid x:Name="OptionsGrid" Grid.Row="1">
   <Grid.RowDefinitions>
      <RowDefinition Height=".05*" />
      <RowDefinition Height=".15*" />
      <RowDefinition Height=".05*" />
      <RowDefinition Height=".15*" />
      <RowDefinition Height=".13*" />
      <RowDefinition Height=".15*" />
      <RowDefinition Height=".15*" />
   </Grid.RowDefinitions>

   <Grid.ColumnDefinitions>
      <ColumnDefinition Width=".15*" />
      <ColumnDefinition Width=".1*" />
      <ColumnDefinition Width=".40*" />
      <ColumnDefinition Width=".1*" />
      <ColumnDefinition Width=".15*" />
   </Grid.ColumnDefinitions>

   <TextBlock Text="Test 1: " FontSize="20" Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="3" />

   <toolkit:ListPicker x:Name="lpTest1" Grid.Row="1" Grid.RowSpan="4" Grid.Column="1" Grid.ColumnSpan="3">
      <toolkit:ListPicker.Items>
         <toolkit:ListPickerItem Content="Value 1"/>
         <toolkit:ListPickerItem Content="Value 2"/>
         <toolkit:ListPickerItem Content="Value 3"/>
         <toolkit:ListPickerItem Content="Value 4"/>
      </toolkit:ListPicker.Items>
   </toolkit:ListPicker>

   <TextBlock Text="Test 2: " FontSize="20" Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3"/>

   <toolkit:ListPicker x:Name="lpTest2" Grid.Row="3" Grid.RowSpan="4" Grid.Column="1" Grid.ColumnSpan="3">
      <toolkit:ListPicker.Items>
         <toolkit:ListPickerItem Content="Value 5" />
         <toolkit:ListPickerItem Content="Value 6" />
         <toolkit:ListPickerItem Content="Value 7" />
         <toolkit:ListPickerItem Content="Value 8" />
      </toolkit:ListPicker.Items>
   </toolkit:ListPicker>
</Grid> 
```

此外，在代码隐藏中，我有这段代码，它`ListPicker`在展开时强制顶部位于底部的顶部：

```
lpTest1.SetValue(Canvas.ZIndexProperty, 2);
lpTest2.SetValue(Canvas.ZIndexProperty, 1); 
```

有没有办法解决我上面遇到的背景颜色问题？更改`Background`属性只会更改未展开视图的背景颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:14:32.187

使用 a`StackPanel`代替`Grid`控件并`Margin`在其他控件上指定以设置它们之间的间距。

像这样的东西：

```
<StackPanel>
    <TextBlock Text="Test 1: " FontSize="20" Margin="12,0" />

    <toolkit:ListPicker x:Name="lpTest1" Margin="12,0">
      <toolkit:ListPicker.Items>
         <toolkit:ListPickerItem Content="Value 1"/>
         <toolkit:ListPickerItem Content="Value 2"/>
         <toolkit:ListPickerItem Content="Value 3"/>
         <toolkit:ListPickerItem Content="Value 4"/>
      </toolkit:ListPicker.Items>
    </toolkit:ListPicker>

    <TextBlock Text="Test 2: " Margin="12,0" />

    <toolkit:ListPicker x:Name="lpTest2" Margin="12,0">
      <toolkit:ListPicker.Items>
         <toolkit:ListPickerItem Content="Value 5" />
         <toolkit:ListPickerItem Content="Value 6" />
         <toolkit:ListPickerItem Content="Value 7" />
         <toolkit:ListPickerItem Content="Value 8" />
      </toolkit:ListPicker.Items>
    </toolkit:ListPicker>
</StackPanel> 
```******

# html - 输入错误密码时显示错误消息

> ID：15591036
> 
> 赞同：0
> 
> 时间：2013-03-23T19:18:15.477
> 
> 标签：html, vb.net, login, credentials, account

好吧，我有一个脚本可以通过以下方式登录`live.com`：

```
 WebBrowser1.Document.GetElementById("login").SetAttribute("value", txtUsername.Text)
     WebBrowser1.Document.GetElementById("passwd").SetAttribute("value", txtPassword.Text)
     WebBrowser1.Document.GetElementById("SI").InvokeMember("Click") 
```

这是非常基本的，但现在我需要找出用户是否输入了正确或错误的帐户凭据。所以这需要一条错误消息说“无法登录”，但如果成功，我只会将网络浏览器重定向到新页面。现在我不熟悉 VB 上的 IF 语句，但我知道有两种方法可以做到这一点，但不知道该怎么做。因此，第一种方法是在点击提交按钮后读取它转到的 URL，这将非常好并且可以工作（因此，当有人输入不正确的帐户凭据时，它会将他们发送到错误页面，但是当您输入正确的页面时它会将您发送到正确的页面）。但我想做的主要方式是通过阅读内容。如果`That Microsoft account doesn't exist. Enter a different email address or get`提交后页面显示“”，则为“消息框”`Wrong Account Credentials`"，反之亦然。我对此并不擅长，因为我从未真正使用过 WebBrowser，但如果有人能引导我走上正确的道路，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:20:19.863

如果您想通过 webbrowser 中返回的内容进行评估，您可以搜索因输入密码而加载的文档的 innerhtml：

```
 With WebBrowser1

        Do Until Not (.IsBusy)
            Application.DoEvents()
        Loop

        Do Until .ReadyState = WebBrowserReadyState.Complete
            Application.DoEvents()
        Loop

    End With

    Dim htmlText As String

    If Not (WebBrowser1.Document.Body.InnerHtml) Is Nothing Then

        htmlText = WebBrowser1.Document.Body.InnerHtml

        If InStr(htmlText, "That Microsoft account doesn't exist.") Then

            Messagebox.Show("Wrong Account Credentials")
            'code to go here if it is true

        Else

            Messagebox.Show("Correct Account Credentials")
            'code to go here if it is false

        End If

    End If 
```

注意：如果 innerhtml 不起作用，您也可以尝试 outerhtml。

由于您只想验证一次，请尝试删除 .DocumentChanged 事件处理程序，因为除了初始登录之外，它的触发原因不同；将其替换为在登录时调用“Click”事件后调用的子例程。

```
Private Sub btnLogin_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnLogin.Click
    WebBrowser1.Document.GetElementById("login").SetAttribute("value", txtUsername.Text)
    WebBrowser1.Document.GetElementById("passwd").SetAttribute("value", txtPassword.Text)
    WebBrowser1.Document.GetElementById("SI").InvokeMember("Click")

    verifyLogin()

End Sub

Private Sub verifyLogin()

    With WebBrowser1

        Do Until Not (.IsBusy)
            Application.DoEvents()
        Loop

        Do Until .ReadyState = WebBrowserReadyState.Complete
            Application.DoEvents()
        Loop

    End With

    Dim htmlText As String

    If Not (WebBrowser1.Document.Body.InnerHtml) Is Nothing Then

        htmlText = WebBrowser1.Document.Body.InnerHtml

        If InStr(htmlText, "Microsoft account") Then

            MessageBox.Show("You have entered in a wrong password or the account doesn't exist.")

            'code to go here if it is true
        Else

            MessageBox.Show("Sign in successful. Proceed on...")

            'code to go here if it is false

        End If

    End If

End Sub 
```

# android - 使用睡眠按钮时，Android服务在调试模式和释放模式下的行为不同，为什么？

> ID：15591041
> 
> 赞同：0
> 
> 时间：2013-03-23T19:18:40.327
> 
> 标签：android, debugging, service, sleep

我正在开发一个使用服务作为 Contdown 的应用程序。当用户从活动开始倒计时并且在按下睡眠按钮后活动进入后台时，我正在使用此服务继续倒计时。计数完成后，服务会显示带有铃声的通知。

我使用 wait() “计算”服务中的时间。当我在真实设备上使用应用程序但处于调试模式时会发生奇怪的行为。附加 Eclipse 调试器后，Service 运行良好；当我在未连接 Eclipse 调试器的设备上测试应用程序时，倒计时完成时服务不会显示通知，除非按下睡眠按钮并激活监视器 - 然后激活通知和铃声。

Can anyone can explain what causes this strange behavior? Maybe the issue is is related to Wake lock or a similar construct?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:25:16.127

`wait()`如果设备进入睡眠状态，则不能保证呼叫等待正确的时间。您应该使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)来触发倒数计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:24:42.787

> 我使用 wait() “计算” Service 中的时间。

那是糟糕的编程习惯。即使您没有占用 RAM，时间也会流逝。

> 任何人都可以解释为什么这种奇怪的行为？

设备睡着了。这是正常且可取的行为，以延长电池寿命。插入 USB 线后，设备无需进入睡眠状态，如果您在开发者选项中勾选了相应的选项，则设备在插入时*不会*进入睡眠状态。

> 也许与唤醒锁有关

请不要使用 a`WakeLock`让设备保持唤醒状态，以便您观看时钟滴答作响。请`AlarmManager`在倒计时结束时使用来获得控制权。您可以使用`_WAKEUP`-style 闹钟来安排唤醒设备，`BroadcastReceiver`此时您可以控制“启动通知和铃声”。作为奖励，您可以摆脱您的服务，以便您的应用程序可以在用户设备上更好地运行。

# android - Android 中 AsyncTask 类中的 RuntimeException

> ID：15591046
> 
> 赞同：0
> 
> 时间：2013-03-23T19:19:07.183
> 
> 标签：android, android-intent, android-asynctask

我正在尝试将我的 Web 服务与 android 中的 AsyncTask 类连接这是我得到的错误我`Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()` 无法弄清楚我的问题是什么。这是我的`AsyncTask`课

```
private class LoginTask extends AsyncTask<Void, Void, Void>{
    private String user_email1=user_email.getText().toString(); 
    private String user_password1=user_password.getText().toString();
    private String returnedJson;
    @Override
    protected Void doInBackground(Void... params) {

        if(isEmailValid(user_email1)){
            String authString=user_email1+"::"+user_password1;
            try {
                ConnectService con = new ConnectService("http://xx.xx.xx.xx:9000/loginUser",EncryptInfo.encrypt(authString));
                returnedJson = con.getCatJsonData();

            } catch (Exception e) {
                System.out.println("Encryption ERROR : "+e.getMessage());
            }
        }
        else{
            showMessageBox("Email", "Email hatalı!",false);
            login_task.cancel(true);
        }
        return null;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        user_email1=user_email.getText().toString(); 
        user_password1=user_password.getText().toString();
    }

    @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);

        JSONObject json;
        try {
            json = new JSONObject(returnedJson);
            JSONObject loginJson=json.getJSONObject("myHashMap");
            if(loginJson.getString("responsestatus").equals("OK")){
                login_editor.putString("useremail", user_email1);
                login_editor.putString("userpassword", user_password1);
                if(!login_editor.commit()){
                    showMessageBox("LOGIN HATASI!", "Giriş işlemi gerçekleşirken hata oluştu. Lütfen tekrar deneyin.", true);
                }
                else{
                    Toast.makeText(LoginActivity.this, "login başarılı", Toast.LENGTH_SHORT).show();
                    //ÜRÜN ARAMA ACTİVİTESİNE GEÇ***********    
                }
            }
            else{
                if(loginJson.getString("errorcode").equals("8")){
                    showMessageBox("LOGIN HATASI!", "Email ve password alanları boş.", true);
                }
                else if(loginJson.getString("errorcode").equals("9")){
                    showMessageBox("LOGIN HATASI!", "Geçersiz Email adresi.", true);
                }
                else if(loginJson.getString("errorcode").equals("10")){
                    showMessageBox("LOGIN HATASI!", "Şifre minimum 6 karakter olmalı.", true);                      
                }
                else if(loginJson.getString("errorcode").equals("11")){
                    showMessageBox("LOGIN HATASI!", "Girilen hesap sistemde kayıtlı değil.", true);
                }
                else if(loginJson.getString("errorcode").equals("12")){
                    showMessageBox("LOGIN HATASI!", "Şifre hatalı.", true);
                }
            }
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    protected boolean isEmailValid(CharSequence email) {
        return android.util.Patterns.EMAIL_ADDRESS.matcher(email).matches();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:28:46.227

好吧，我怀疑您之所以遇到此异常，是因为`showMessageBox()`您最有可能尝试处理诸如 Toast 之类的 UI 的方法。如果是这种情况，那么在`doInBackground(Void... params)`方法中您不能调用`showMessageBox()`，因为它在单独的线程上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:28:19.150

在这里，您尝试从后台线程在主线程上显示某些内容，尝试在 RunonUiThread() 中运行此代码。

```
else {
   showMessageBox("Email", "Email hatalı!",false);
   login_task.cancel(true);
} 
```

# brightscript - Roku app主要功能及执行流程

> ID：15591048
> 
> 赞同：1
> 
> 时间：2013-03-23T19:19:21.627
> 
> 标签：brightscript

我是 roku 开发的新手，对代码和文件结构以及运行时的执行过程有几个问题：

1.  文件链接如何工作？我查看了一些示例应用程序，其中一些包含多个文件，但我无法清楚地了解它们是如何链接文件或导入函数的。
2.  是否有一个基本脚本和函数可以设置一切？有些应用程序使用 Sub Main，但有些不使用；平台如何知道应用程序的起点在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T12:58:42.047

项目中以 .brs 结尾的所有文件都被链接起来，就好像它们在同一个文件中一样。

程序将以 sub 或函数 main() 或 runuserInterface() 开始，或者对于屏幕保护程序， runscreensaver()

可以使用库命令导入库，该命令需要存在于任何函数或子程序之外。

见这里： [http ://sdkdocs.roku.com/display/RokuSDKv48/BrightScript+Language+Reference#BrightScriptLanguageReference-412ScriptLibraries](http://sdkdocs.roku.com/display/RokuSDKv48/BrightScript+Language+Reference#BrightScriptLanguageReference-412ScriptLibraries)

# iphone - 核心图形透明叠加

> ID：15591052
> 
> 赞同：0
> 
> 时间：2013-03-23T19:19:29.560
> 
> 标签：iphone, ios, objective-c, xcode, core-graphics

我正在用`UITableViewCell`我自己的自定义子类替换 a 的背景视图`UIView`，在其中我用自己的方法覆盖了该`drawRect`方法，从而创建了一个多色且不断变化的背景。

问题是当`TableViewCell`被选中时，下面的图形被完全隐藏起来，看起来很奇怪。我需要创建一个自定义`selectedBackgroundView`来解决这个问题。问题是该视图需要在已经存在的图形上创建蓝色渐变色调，而我不知道如何绘制`CGRect`部分透明的或类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:34:25.423

```
// Write this In your - (void)drawRect:(CGRect)rect
// To draw semi transparent Square
// Create Current Context To Draw
CGContextRef context = UIGraphicsGetCurrentContext();

UIBezierPath *square = [UIBezierPath bezierPathWithRect:CGRectMake(0, 0, 100, 100)];
// following method will fill red color with alpha 0.4 last one in parameter list
// first 3 are Red, Green and Blue Respectively.
CGContextSetRGBFillColor(context, 1, 0, 0, 0.4);
[square fill];
[square stroke]; 
```

# wpf - 在 app.config 中使用自定义部分会在 WPF 中引发异常

> ID：15591057
> 
> 赞同：0
> 
> 时间：2013-03-23T19:20:03.513
> 
> 标签：wpf, exception, app-config

一般来说，我对 WPF 和 C# 非常陌生，使用 app.config 让我感到困惑。完成一些非常基本的事情感觉不必要地困难。我只想在我的应用程序中添加一些数据驱动的设置，并想使用 app.config。

经过一番研究，看起来“appSettings”很旧并且没有类型检查，并且“applicationSettings”似乎已被弃用（它甚至不在VS 2012的标准架构中）。所以，我现在正在尝试创建一个自定义配置部分。我根据示例编写了一个非常简单的示例，但它在启动期间抛出了 TypeInitializationException。我盯着代码看，但看不出有什么问题。

app.config 文件：

```
<configSections>
  <section name="applicationConfig" type="MyApp.ApplicationConfig, MyApp"/>
</configSections>

<applicationConfig
  UseLocalhost="true"
  WebServer="http://www.someserver.com"
  MachineId="999"/> 
```

C#代码：

```
namespace MyApp
{
    public class ApplicationConfig : ConfigurationSection
    {
        public ApplicationConfig()
        {
        }

        public static ApplicationConfig GetConfig()
        {
            return (ApplicationConfig)System.Configuration.ConfigurationManager.GetSection("applicationConfig") ?? new ApplicationConfig();
        }

        [ConfigurationProperty("UseLocalhost", DefaultValue = false, IsRequired = false)]
        public bool UseLocalhost
        {
            get { return (bool)this["UseLocalhost"]; }
            set { this["UseLocalhost"] = value; }
        }

        [ConfigurationProperty("WebServer", IsRequired = true)]
        public string WebServer
        {
            get { return (string)this["WebServer"]; }
            set { this["WebServer"] = value; }
        }

        [ConfigurationProperty("MachineId", DefaultValue = 999, IsRequired = false)]
        public int MachineId
        {
            get { return (int)this["MachineId"]; }
            set { this["MachineId"] = value; }
        }
    }
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:08:21.627

我过去发现，您不能在配置对象的同一程序集中拥有自定义配置对象。尝试将对象放入单独的程序集中，在项目中引用该新程序集，更新 .config 文件中自定义对象的程序集，然后从那里开始

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T01:21:57.643

看起来异常是由其他一些代码引发的 - 而不是您引用的配置节类。TypeInitializerException 由静态构造函数或静态字段初始值设定项引发，您的代码都没有。你如何调用 GetConfig()？底线是：查看代码中的其他地方，您的部分类和配置文件 XML 似乎没问题。

# java - 线程“主”java.lang.NoClassDefFoundError 中的异常：Snake（错误名称：snake2/Snake）

> ID：15591062
> 
> 赞同：0
> 
> 时间：2013-03-23T19:20:41.443
> 
> 标签：java

所以我正在尝试构建一个 2D 蛇游戏，我几乎完成了。我唯一的问题是，当我尝试运行程序时，我得到了 tis 错误：

> “线程“主”java.lang.NoClassDefFoundError 中的异常：Snake（错误名称：snake2/Snake）”

通常只是因为我输入了错误的目录或者因为我输入了错误的命令，但这些原因似乎并不是问题所在。带有main方法的类在这里：（逻辑和99%的代码在第二个类中，也在snake2包中）

```
package snake2;

import javax.swing.JFrame;

public class Snake extends JFrame {

public Snake() {

    add(new Board());

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setSize(320, 340);
    setLocationRelativeTo(null);
    setTitle("Snake");

    setResizable(false);
    setVisible(true);
}

public static void main(String[] args) {
    new Snake();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:24:44.353

这可能是因为您在包文件夹中运行它。

尝试从包含该`snake2`文件夹的文件夹中运行它（不要进入该`snake2`文件夹）并执行 java 命令，如下所示：

```
java snake2.Snake 
```

# roku - 我应该为哪种 Roku 设备开发？

> ID：15591064
> 
> 赞同：0
> 
> 时间：2013-03-23T19:20:54.133
> 
> 标签：roku, brightscript

从强大的前端开发背景到连接设备，我了解到，在统一客户端方面，我应该始终以最小的共同点进行开发。对于标准 CE-HTML 风格的开发人员，我发现它主要是低端 2011 蓝光，这似乎是性能最差的。但现在我开始开发 Roku 设备，那么我应该为哪个设备开发？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T13:09:41.277

如果您希望您的应用程序覆盖所有设备，请为 roku 固件 3.x 系列进行开发。兼容性的主要注意事项是：

对于 roUrlTransfer 对象，使用 setPort 而不是 setMessagePort。

2D API 仅支持 3.1 固件上的 90 度旋转

如果您在 2D API 中遇到屏幕闪烁，您可能希望先绘制到位图，然后再绘制到屏幕上，而不是直接绘制到屏幕上

在旧设备上，除了绘制到 roImageCanvas 之外，大多数事情的执行速度都会变慢。ImageCanvas 在旧设备上可能更快

在较旧的 3.1 固件上可用的位图内存较少

压缩后的最大项目大小在旧设备上约为 700k，在新设备上为 50mb，但建议所有平台上的最大大小为 500k。

将最低固件设置为 3.0 或更低版本以针对旧设备，并且永远不要单击 cramfs 按钮。

如果您使用 roGridScreen，您需要将所有网格数据存储在一个数组中，并在启动其他屏幕之前销毁网格屏幕，并在返回网格时重新创建它，否则可能会出现显示损坏。

就地升级功能应该可以工作，但应用内购买尚未在 3.x 上进行测试，即使它们可能已经实现。

# javascript - JavaScript 比较问题

> ID：15591065
> 
> 赞同：-3
> 
> 时间：2013-03-23T19:20:56.467
> 
> 标签：javascript, comparison

我需要在我的 javascript 中进行这种比较才能工作。

```
if ((q2 != '' && correct2 != 'True') || (q2 != '' && correct2 != 'true') || (q2 != '' && correct2 != 'false') || (q2 != '' && correct2 != 'False'))
{
    alert("You must enter true or false.");
} 
```

q2 和 correct2 是文本框，如果 q2 中包含某些内容并且correct2 不等于 true、True、false 或 False，那么我希望弹出消息框。我的代码不起作用。如果我在空白处输入 true 或 false，错误消息仍然会显示。

编辑

我已经找到了如何让它工作。而不是放|| 在我放 && 的比较之间，它工作得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:22:45.470

要获取文本输入的值，请执行以下操作

`var q2Value = q2.value;`

对于条件，`||`is or, not `or`，并且每次进行比较时都需要 2 个值/变量

`(correct2 !== 'True ) || (correct2 !== 'true')...`

你可以看到我把比较用括号括起来了，所以它非常清楚应该比较什么，即使它不是绝对必要的。

由于在比较其他条件之前您需要 q2 是正确的，因此您可以使用称为短路的漂亮功能。基本上，`&&`只有在第一次比较是真实的情况下才会继续，所以你会这样做

`(qa2 !== '') && (the rest)`

请注意，如果用户根本不输入该值，那么当您获得文本字段的值时，它将是`undefined`（我认为），而不是`''`'. 所以你真的应该做

`qa2 && (...)`

基本上`null`, `undefined`, 和`''`在 javascript 中都是虚假的，所以如果 qa2 是这些值中的任何一个，则不会处理 and 的第二部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:25:36.980

这应该有效。

```
if ((q2 != '' && correct2 != 'True') || (q2 != '' && correct2 != 'true') || (q2 != '' && correct2 != 'false') || (q2 != '' && correct2 != 'False'))
{
    alert("You must enter true or false.");
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T19:23:03.660

尝试这个

```
if(q2 !== '' && !(correct2 == 'true') && !(correct2 == 'True') && !(correct2 == 'False') && !(correct2 == 'false'))
{
    alert("You must enter true or false.")
}; 
```

# php - Laravel 4 中奇怪的路由器 URI 匹配

> ID：15591069
> 
> 赞同：0
> 
> 时间：2013-03-23T19:21:21.063
> 
> 标签：php, laravel, laravel-4

```
Route::get('get/{user_id}-{name?}', function($user_id, $name) {
    // Do something
} 
```

为什么会`Route::get('get/{user_id}-{name?}')`匹配`get/1234`？`-`破折号之前发生了什么`{name?}`，它是如何成为可选的？

*附带问题：大括号中的名称（例如：`name`in `{name}`）是否可以是任何东西，而不必是传递给路由回调函数的参数名称？*

# c# - 视觉格式化图表问题

> ID：15591074
> 
> 赞同：1
> 
> 时间：2013-03-23T19:22:34.093
> 
> 标签：c#, charts

这是一个令人难以置信的本地化问题，但我现在已经花了一段时间，只是无法让格式化工作。基本上我想要做的是显示一个值的柱形图，但没有花里胡哨（即没有标签，没有标题，没有图例，什么都没有！）我希望它看起来像这样： ![所需图像](../Images/aeed3ace5036c8daa2887c49f5b907d4.png)

但相反，它看起来像这样：

![实际图像](../Images/9d595a7a9344c090d02949048854976a.png)

轴向右延伸，我不知道如何让它消失。这是我的代码：

```
charts[i].Series.Clear();
charts[i].Series.Add("Block " + i + 1);
charts[i].Series[0].ChartType = System.Windows.Forms.DataVisualization.Charting.SeriesChartType.Column;
charts[i].Series[0].Points.Add(liveData[i]);
charts[i].ChartAreas[0].AxisY.Maximum = 4;
charts[i].ChartAreas[0].AxisY.Minimum = 0;
charts[i].ChartAreas[0].AxisX.Maximum = 1;
charts[i].ChartAreas[0].AxisX.Minimum = 1;
charts[i].ChartAreas[0].AxisX.MajorGrid.LineWidth = 0;
charts[i].ChartAreas[0].AxisY.MajorGrid.LineWidth = 0;
charts[i].ChartAreas[0].AxisX.LabelStyle.Enabled = false;
charts[i].ChartAreas[0].AxisY.LabelStyle.Enabled = false;
charts[i].ChartAreas[0].AxisY.LineWidth = 0;
charts[i].ChartAreas[0].AxisY.MajorTickMark.Enabled = false;
charts[i].ChartAreas[0].AxisX.MajorTickMark.Enabled = false;
charts[i].Series[0].IsVisibleInLegend = false; 
```

现在我猜这是`min`/`max`事情，但对于我的生活，我就是无法让它发挥作用。有人可以看到我的错误吗？或者建议除了图表之外的另一种方法？

另请注意，您在下面看到的“Block 1 (V)”标签不是由图表生成的，它是一个`textbox`恰好被截屏到屏幕截图中的标签。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:47:40.807

您的数据的 x 值为 1。默认情况下，条形图以 1 标记为中心。通过改变限制，你实际上只看到了一半。要做两件事：准确地告诉条形它应该有多宽，并相应地限制 x 轴。

```
charts[i].Series[0].CustomProperties = "PointWidth = 1"; // One bar takes a width of 1 unit on the x-axis
charts[i].ChartAreas[0].AxisX.Minimum = 0.5; // change!
charts[i].ChartAreas[0].AxisX.Maximum = 1.5; // change! 
```

# java - Teamcity 控制应用部署？

> ID：15591078
> 
> 赞同：0
> 
> 时间：2013-03-23T19:22:57.260
> 
> 标签：java, tomcat, teamcity

Teamcity 控制应用程序是否可以部署，例如部署到 tomcat？

PS没有这样的[插件](http://confluence.jetbrains.com/display/TW/Deployer+plugin)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:13:55.533

我们使用 Teamcity 实现了类似的任务，将战争文件部署到我们的码头服务器：

*   **在创建war文件的普通构建步骤之后，我们在“命令行**”构建步骤中调用一个脚本，该脚本使用scp将war文件复制到码头服务器。

*   在码头服务器上，每五分钟运行一次**cron 作业**，只是检查是否有新的 war 文件。如果有，则关闭 jetty 服务器，备份现有的 war 文件并放入新的 war 文件，然后重新启动 jetty 服务器。

上述解决方案的一个缺点是，在 Teamcity 构建完成后，我们总是需要等待一段时间，直到 cron 作业启动并重新部署战争。

有一种稍微不同的方法，可以在 Teamcity 构建过程中部署 war 文件：

除了使用 cron 作业来调用部署脚本，还可以在“scp”完成复制 war 文件之后，从“命令行”构建步骤调用它，如下所示。

```
ssh -t user@server: "path_to_the_deployment_script" 
```

我们还没有尝试过第二种方法，理论上它应该可以工作。

# jquery - 一个滑块工作，但阻止其他滑块工作？

> ID：15591079
> 
> 赞同：0
> 
> 时间：2013-03-23T19:23:00.173
> 
> 标签：jquery, html, web, slider, conflict

我正在为我的餐厅创建一个网站。

我在这里有 2 个工作图像滑块[http://food-ies.fr/livraison-kebab-grillades.html](http://food-ies.fr/livraison-kebab-grillades.html)

但是当我添加一个 nivo 滑块并添加 `<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>` 到标题时，请参见这里[http://food-ies.fr/index.html](http://food-ies.fr/index.html)

图像滑块停止！

有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T16:17:56.663

我在 jQuery 下添加了这段代码：

```
<script>
  var $j = jQuery.noConflict();   
  // Use Prototype with $(...), etc.
  $('someid').hide();
</script> 
```

它现在完美运行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:34:10.237

.live() 调用已从 nivo 使用的 jquery 1.9.1 中删除。nivo 将加载第一个图像，但在交换图像期间使用 .live。

在 jquery.nivo.slider.js 和 jquery.nivo.slider.pack.js 中搜索并替换 .live，如下例所示。

旧：$('a.nivo-nextNav', slider).live('click', (etc.)

新：$(document).on('click', 'a.nivo-nextNav', (etc.)

我在每个使用 .live() 的文件中遇到了 2 个地方

# hyperlink - jquery flexslider 链接到特定图像

> ID：15591081
> 
> 赞同：1
> 
> 时间：2013-03-23T19:23:06.717
> 
> 标签：hyperlink, flexslider

当单击来自另一个主页的链接（如锚点“www.mysite.html#slider3”）时，是否可以在 flexslider 中显示特定图像？我有一个带有文本链接的页面。如果用户单击“转到滑块 3”之类的链接，则会出现带有 flexslider 的站点并显示滑块 3。

请问有人可以帮我吗？我已经阅读了这个线程（[jQuery FlexSlider - Link to specific image](https://stackoverflow.com/questions/14673212/jquery-flexslider-link-to-specific-image)），但这对我不起作用，我不知道为什么。

感谢和抱歉我的英语不好，CeDe

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T17:15:13.580

Flexslider 提供了一个名为“startAt”的属性，该属性接受一个表示要首先显示的幻灯片的索引。您还可以通过将 'slideshow' 参数设置为 false 来禁用幻灯片的自动播放。如果您在创建幻灯片之前获取要开始的幻灯片参考，则可以使用这些参数。

```
// create a variable to store the slide index to start at.
startAtSlideIndex = 0;

// see if a tab anchor has been included in the url
if (window.location.hash != '') {

  // Set the startAtSlideIndex variable to one less than the ordinal passed
  // note: if you have more than 9 slides, this will fall down and you'll
  //       have to do some more complex string manipulation.
  //       A querystring variable might be easier, especially if you use
  //       someone else's url parser ;)
  // Important: assumes the format of the hash is '#tabN' where N is the digit we want.
  startAtSlideIndex = window.location.hash.substr(4,1)-1;
}

$("#flexslider-container").flexslider({

  // other flexslider params

  // set the flexslider startAt param to the value of the startAtSlideIndex variable
  startAt: startAtSlideIndex

}); 
```

编辑：我忘记了 location 对象在我的原始答案中具有“哈希”属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T08:36:43.913

又是我 :-) 它似乎也适用于超过 9 张幻灯片：我只是稍微更改了代码：

`// Important: assumes the format of the hash is '#tabNN' where NN is the digit we want. startAtSlideIndex = window.location.hash.substr(4,2)-0;`

谢谢和问候！

# java - 为什么这会引发 IllegalMonitorStateException？

> ID：15591084
> 
> 赞同：2
> 
> 时间：2013-03-23T19:23:32.493
> 
> 标签：java, multithreading

我正在进入 Java 多线程。我对 C/C++ pthreads 非常熟悉，但在 Java`notify()`和`wait()`函数方面存在问题。

我知道`IllegalMoinitorStateException`只有当一个不“拥有”（又名没有同步）的线程调用通知/等待时才会抛出一个。

在编写我的应用程序时，我遇到了这个问题。我用以下测试代码隔离了问题：

```
public class HelloWorld
{
    public static Integer notifier = 0;
    public static void main(String[] args){
        notifier = 100;
        Thread thread = new Thread(new Runnable(){
            public void run(){
                    synchronized (notifier){
                            System.out.println("Notifier is: " + notifier + " waiting");
                            try{
                                notifier.wait();
                                System.out.println("Awake, notifier is " + notifier);
                            }
                            catch (InterruptedException e){e.printStackTrace();}
                    }
            }});
        thread.start();
        try{
                Thread.sleep(1000);
            }
        catch (InterruptedException e){
                e.printStackTrace();
            }
        synchronized (notifier){
            notifier = 50;
            System.out.println("Notifier is: " + notifier + " notifying");
            notifier.notify();
        }
        }
    } 
```

这输出：

```
 Exception in thread "main" java.lang.IllegalMonitorStateException
        at java.lang.Object.notify(Native Method)
        at HelloWorld.main(HelloWorld.java:27) 
```

我相信我已经获得了通知对象的锁定。我究竟做错了什么？

谢谢！

编辑：

从这个可能的重复项（[在 Integer 值上同步](https://stackoverflow.com/questions/659915/synchronizing-on-an-integer-value)），似乎在 Integer 上同步不是一个好主意，因为很难确保您在同一个实例上同步。由于我正在同步的整数是全局可见静态整数，为什么我会得到不同的实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T19:28:55.650

因为`notifier = 50;`你正在调用`notifier.notify();`一个不同的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:43:41.520

`notifier`最初，当您在非主线程中调用 synchronized on 时，它引用的是堆上的对象，其内容`0`因此线程拥有该对象。`wait`现在，在使用非主线程后`notifier.wait`，控制权就交给了主线程。在获得对包含值 0 的 Integer 对象的锁定后，您可以在`notifier`包含值的堆内存上引用另一个对象，`50`因为`notifier = 50;`实际上等同于`notifier = new Integer(50)`这意味着`Integer`创建了一个新对象并将其引用传递给`notifier`. 现在，当线程看到`notifier.notify`它看起来主线程现在不再拥有它之前获得的原始对象。`IllegalMonitorStateException`投掷也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T11:16:21.530

只是为了添加更多信息，您永远不应该在非最终对象上进行同步。

您需要在常量对象上进行同步。如果您在您分配的任何对象上同步（即更改对象），则该对象不是恒定的，一旦它分配了该对象并尝试通知它，您将获得`IllegalMonitorStateException`. 这也意味着因为它们在不同的对象上同步，多个线程将同时进入受保护的块，并且会发生竞争条件。

> 由于我正在同步的整数是全局可见静态整数，为什么我会得到不同的实例？

当您为 an 赋值时，`Integer`它会将其更改为*不同*的对象引用——即使它是`static`. 你*没有*改变同一个对象，因为`Integer`不能被变异。因此`notifier = 50;`将其分配给与 不同的对象`notifier = 0;`。

例如，如果你想使用一个常量对象，你可以使用`AtomicBoolean`：

```
 public static final AtomicInteger notifier = new AtomicInteger(0);
  ...
  synchronize (notifier) {
      notifier.set(50);
      ...
  } 
```

在这里，`AtomicInteger`可以标记`final`，因为它始终是同一个对象。

有关更多信息，请参阅：[为什么在布尔值上进行同步不是一个好习惯？](https://stackoverflow.com/questions/10324272/why-is-it-not-good-practice-to-synchronize-on-boolean/10324280#10324280)

# gwt - 从 jsp 页面调用 GWT

> ID：15591085
> 
> 赞同：1
> 
> 时间：2013-03-23T19:23:39.917
> 
> 标签：gwt

我对 GWT 概念和 JSP 完全陌生。现在我需要从我的 login.jsp 调用一个 gwt 应用程序。那么我怎样才能做到这一点。我正在使用 eclipse 构建一个 gwt-java 项目并对其进行编译。现在我需要做的就是从我的 login.jsp 中调用一个 .nocache 文件（从 gwt 编译中获得）。

我找到了一个基于此的链接，但我完全糊涂了

[http://code.google.com/p/google-web-toolkit/issues/detail?id=7609](http://code.google.com/p/google-web-toolkit/issues/detail?id=7609)

任何人都可以帮助我如何做到这一点...在此先感谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:03:23.067

登录表单提交后，您可以`gwtDispatcher.jsp`在您的`LoginServlet`.

```
request.getRequestDispatcher("/gwtDispatcher.jsp").forward(request, response); 
```

如果要在开发模式下调试代码，则必须添加查询参数

```
request.getRequestDispatcher("/gwtDispatcher.jsp?gwt.codesvr=127.0.0.1:9997")
                                                    .forward(request, response); 
```

在您的 gwtDispatcher.jsp 中添加以下行

`<script language="javascript" src="../yourAppName.nocache.js"></script>`//确定路径，就可以调度`gwt`程序了。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T20:28:52.733

我猜[https://developers.google.com/web-toolkit/articles/dynamic_host_page](https://developers.google.com/web-toolkit/articles/dynamic_host_page)会回答你所有的问题。

# design-patterns - 适用于 Windows 8 应用程序的 MVVM 数据层

> ID：15591086
> 
> 赞同：2
> 
> 时间：2013-03-23T19:23:50.537
> 
> 标签：design-patterns, mvvm, windows-8, windows-store-apps, data-modeling

这是我第一个使用 MVVM 的应用程序，我也在使用 Caliburn.Micro。在过去的两周里，我每天都在阅读有关 MVVM 设计的信息。我了解整体概念，但很难确定如何设计模型部分。原因是我需要从 Web 服务中检索数据。

最基本的应用流程如下： 首次运行应用：

安装应用程序 -> 搜索药房（WebService 调用）-> 选择药房（另一个 Web 服务调用）-> 创建配置文件（Web 服务调用）-> 应用程序主页

第一次运行后：

获取配置文件（Web服务调用）->加载药房->应用程序主页

所以我最终得到的（至少对于应用程序的这一部分）是：-PharmacyList（药房对象列表）

-药房（对象）

-Profile（包含订阅列表的对象（用户已订阅的药房列表）和药房对象（列表中设置应用程序上下文的当前药房）

所有这些对象有时通过每个对象的各种属性相互关联。在某些情况下，on object 的属性被用作另一个对象的 web 服务调用中的参数。

我有以下视图和相应的视图模型：

药房搜索：（接受用于 Web 服务调用以填充药房对象列表的输入。

药房选择：（允许选择药房，药房对象数据用于进行另一个 Web 服务调用以获取详细的药房信息。）

个人资料：允许用户输入个人资料数据并选择他们当前的药房或订阅另一个药房（此处进行各种网络服务调用）。

MainView/View Model：这是用户创建配置文件后的登录页面，并且在所有后续返回应用程序时，此页面将加载当前药房数据和用户配置文件。

从这一点开始，还有各种其他对象、Web 服务等，但我只需要了解这一点。

我的问题是，我应该如何构建我的模型（或者更具体地说是数据层）。我是否应该为每个包含对象定义和特定于该对象的服务类的对象使用 DataStore，以从 API 获取 JSON 数据。或者我应该创建一个包含所有对象的定义和单独的 Web 服务类以获取数据的大型数据存储？在这两种方法中，我应该在 Data Store 中定义我的模型还是使用 Data Store 来获取和设置模型？

目前，我正在使用单个数据存储，该存储具有每个对象的实例并调用通用 Web 服务类。这似乎并不高效或模块化。

# android - Android：“导航类型：固定标签+滑动”

> ID：15591087
> 
> 赞同：3
> 
> 时间：2013-03-23T19:24:06.343
> 
> 标签：android, android-layout, tabs

我正在尝试在应用程序中使用 Tabs + Swipe，并希望使用 ADT 在创建 Activity 时为我提供的导航类型“Fixed Tabs + Swipe”。

Sooo 现在 ADT 吐出了漂亮的代码，我稍微修改了一下......

我完全理解代码和发生了什么......但是我怎样才能教应用程序使用我的三个片段而不是愚蠢的虚拟片段？:(

我找不到任何处理 ADT“导航类型”的教程......

谢谢你的帮助！

```
public class MainActivity extends FragmentActivity implements ActionBar.TabListener {
SectionsPagerAdapter mSectionsPagerAdapter;
ViewPager mViewPager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Set up the action bar.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Create the adapter that will return a fragment for each of the three
    // primary sections of the app.
    mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

    // Set up the ViewPager with the sections adapter.
    mViewPager = (ViewPager) findViewById(R.id.pager);
    mViewPager.setAdapter(mSectionsPagerAdapter);

    // When swiping between different sections, select the corresponding
    // tab. We can also use ActionBar.Tab#select() to do this if we have
    // a reference to the Tab.
    mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
                @Override
                public void onPageSelected(int position) {
                    actionBar.setSelectedNavigationItem(position);
                }
            });
    //Adding Tabs
        actionBar.addTab(actionBar.newTab().setText("Tab 1").setTabListener(this));
        actionBar.addTab(actionBar.newTab().setText("Tab 2").setTabListener(this));
        actionBar.addTab(actionBar.newTab().setText("Tab 3").setTabListener(this));
}

@Override
public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    // When the given tab is selected, switch to the corresponding page in
    // the ViewPager.
    mViewPager.setCurrentItem(tab.getPosition());
}

@Override
public void onTabUnselected(ActionBar.Tab tab,FragmentTransaction fragmentTransaction) {
}

@Override
public void onTabReselected(ActionBar.Tab tab,FragmentTransaction fragmentTransaction) {
}

public class SectionsPagerAdapter extends FragmentPagerAdapter {

    public SectionsPagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        // getItem is called to instantiate the fragment for the given page.
        // Return a DummySectionFragment (defined as a static inner class
        // below) with the page number as its lone argument.
        Fragment fragment = new DummySectionFragment();
        Bundle args = new Bundle();
        args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
        fragment.setArguments(args);
        return fragment;
    }

    @Override
    public int getCount() {
        // Show 3 total pages.
        return 3;
    }
}

public static class DummySectionFragment extends Fragment {
    /**
     * The fragment argument representing the section number for this
     * fragment.
     */
    public static final String ARG_SECTION_NUMBER = "section_number";

    public DummySectionFragment() {
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_main_dummy,container, false);
        TextView dummyTextView = (TextView) rootView.findViewById(R.id.section_label);
        dummyTextView.setText(Integer.toString(getArguments().getInt(ARG_SECTION_NUMBER)));
        return rootView;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-11T12:23:06.303

设置片段的开关盒很容易，并且非常清晰。让您的每个片段膨胀您的 xml 中的根视图

```
@Override
public Fragment getItem(int index) {

    Fragment fragment = null;
    switch(index){
    case 0:
         fragment = new Fragment1();
         break;
    case 1:
         fragment = new Fragment2();
         break;
    case 2:
         fragment = new Fragment3();
         break;
    default:
        break;
    }

    //set args if necessary (which it isn't?)
    Bundle args = new Bundle();
    args.putInt(ObjectFragment.ARG_OBJECT, index + 1);
    fragment.setArguments(args);

    //return fragment
    return fragment;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T19:27:41.097

> 但是我怎样才能教 App 使用我的三个 Fragment 而不是愚蠢的 Dummy Frag？

您会注意到在以下`DummySectionFragment`内容中引用`getItem()`了它`SectionsPagerAdapter`：

```
@Override
public Fragment getItem(int position) {
    // getItem is called to instantiate the fragment for the given page.
    // Return a DummySectionFragment (defined as a static inner class
    // below) with the page number as its lone argument.
    Fragment fragment = new DummySectionFragment();
    Bundle args = new Bundle();
    args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, position + 1);
    fragment.setArguments(args);
    return fragment;
} 
```

如果您想使用不同的片段，请修改`getItem()`以返回您想要的片段，给定提供的`position`（从 0 开始的页码）。

# jquery - jQuery-Ui 可调整大小：div 大小限制为神奇的边框

> ID：15591089
> 
> 赞同：0
> 
> 时间：2013-03-23T19:24:19.027
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable, jquery-ui-droppable, jquery-ui-resizable

当我尝试在将 div 容器 ( `#draggableItem`) 放入指定的 div 字段 () 后调整其大小时`#newSide`，它仅限于左侧和底部区域的一种“神奇边框”。

我的例子在这个[jsFiddle](http://jsfiddle.net/QU994/9/)上。

程序：

1.  将黄色框拖到灰色区域的中间。
2.  将黄色框的大小调整到灰色区域的下（或左）端。

我已经阅读了 aber 一个错误并尝试了不同的位置设置：绝对/相对和带有 !important 标记，但我不明白。

关于如何解决问题的任何想法？这是一个错误的 CSS 设置吗？（对我来说，有必要将可放置区域放置在我想要的任何地方（不仅仅是在顶部：0px；左侧：0px；）

还是非常感谢！

HTML 代码：

```
<div id="editor">
  <div id="newSide"></div>
</div>
<div class="draggableItem"></div> 
```

JS代码：

```
$(function() {

$( "#newSide" ).droppable({
    drop: function( event, ui ) {
    }
});

$(".draggableItem").resizable({
                    containment: "#newSide",
                    grid: 1, maxHeight: 150, maxWidth: 200, minHeight: 20, minWidth: 20
                    })
                    .draggable({
                          containment: "#newSide",
                          grid: [1,1]
                    }); 
}); 
```

CSS：

```
#editor{
    display:block;
    position: absolute;
    border: 2px solid red;
    top:100px;
    left:100px;
}

.draggableItem
{
    width:100px;
    height:100px;
    background:yellow;
}

#newSide
{
    display:block;  
    width:401px;
    min-height:301px;
    height:301px;
    background-color:#444444;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:52:55.907

我不确定这是否是您在寻找的东西？

HTML结构：

```
<div id="editor">
    <div id="newSide">
        <div class="draggableItem"></div>
    </div>
</div> 
```

演示：http: [//jsfiddle.net/QU994/13/](http://jsfiddle.net/QU994/13/)

# ajax - 如何访问从浏览器发送到 Rikulo Steam 服务器的 POST 数据

> ID：15591101
> 
> 赞同：3
> 
> 时间：2013-03-23T19:25:27.083
> 
> 标签：ajax, google-chrome, stream, dart, rikulo

我要求浏览器使用 ajax 将 JSON 数据 POST 到流 v0.5.5 服务器。在服务器端，如何接收来自 ajax 请求的数据？

我的客户：（谷歌浏览器）

```
void ajaxSendJSON() {
  HttpRequest request = new HttpRequest(); // create a new XHR

  // add an event handler that is called when the request finishes
  request.onReadyStateChange.listen((_) {
    if (request.readyState == HttpRequest.DONE &&
      (request.status == 200 || request.status == 0)) {
      // data saved OK.
      print(request.responseText); // output the response from the server
    }
  });

  // POST the data to the server
  var url = "/news";
  request.open("POST", url, true);
  request.setRequestHeader("Content-Type", "application/json");
  request.send(mapTOJSON()); // perform the async POST
}

String mapTOJSON() {
  print('mapping json...');
  var obj = new Map();
  obj['title'] = usrTitle.value == null ? "none" : usrTitle.value;
  obj['description'] = usrDesc.value == null ? "none" : usrDesc.value;
  obj['photo'] = usrPhoto.value == "none";
  obj['time'] = usrTime==null ? "none" : usrTime.value; 
  obj['ip']= '191.23.3.1';
  //obj["ip"] = usrTime==null? "none":usrTime; 
  print('sending json to server...');
  return Json.stringify(obj); // convert map to String i.e. JSON
  //return obj;
} 
```

我的服务器：

```
void serverInfo(HttpConnect connect) {
  var request = connect.request;
  var response = connect.response;
  if(request.uri.path == '/news' && request.method == 'POST') {
    response.addString('welcome from the server!');
    response.addString('Content Length: ');
    response.addString(request.contentLength.toString());
  } else {
    response.addString('Not found');
    response.statusCode = HttpStatus.NOT_FOUND;
  }
  connect.close();
} 
```

同样，我不希望浏览器向服务器请求数据！我在做什么是要求浏览器通过ajax提交JSON数据，我只是不知道服务器（Rikulo Stream v0.5.5）如何获取数据的“内容”？所有代码都是用 Google Dart Language M3 编写的。没有Javascript！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T01:44:46.730

Dart SDK 中不支持 POST，但 Dart 团队计划对其进行增强。请[在这里观星：issue 2488](https://code.google.com/p/dart/issues/detail?id=2488)。

另一方面，由于您处理的是 JSON，您可以侦听 HttpRequest（我假设是最新的 SDK）并将 List 转换为 String，然后再转换为 JSON。[Rikulo Commons](http://api.rikulo.org/commons/latest/rikulo_io/IOUtil.html)提供了一个实用程序来简化工作，如下所示：

```
import "package:rikulo_commons/io.dart";

IOUtil.readAsJson(request, onError: connect.error).then((jsonValue) {
   //handle it here
}); 
```

# mysql - Rails 应用程序中的复杂过滤。不确定复杂的sql是答案吗？

> ID：15591103
> 
> 赞同：0
> 
> 时间：2013-03-23T19:25:45.100
> 
> 标签：mysql, ruby-on-rails, performance, filtering

我有一个应用程序，允许用户根据非常多的标准过滤申请人。每个条件都由跨越数据库中多个表的布尔列表示。我认为最好使用纯 sql 并将大部分工作放在数据库中，而不是使用活动记录模型。为了做到这一点，我必须根据用户选择的条件构建一个相当复杂的 sql 查询，然后通过数据库上的 AR 运行它。有一个更好的方法吗？我想在同时拥有可维护和非易碎代码的同时最大限度地提高性能？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:07:20.363

在不了解更多细节的情况下很难完全回答这个问题，但无论如何我都会尝试。

虽然数据库在很多方面都做得不好，但它们非常擅长过滤数据，尤其是在处理大量数据时。

如果您在 Ruby on Rails（或几乎任何其他编程语言）中进行过滤，系统将不得不从数据库中检索所有未过滤的数据，这将导致大量磁盘 I/O 和网络（或进程间）流量. 然后它必须遍历内存中所有未过滤的结果，这对 RAM 和 CPU 来说可能是一个相当大的负担。

如果您在数据库中进行过滤，则很有可能大多数记录将永远不会真正从磁盘中检索，不会移交给 RoR，也不会被过滤。索引甚至存在的主要原因是为了避免昂贵的操作以加快速度。（是的，它们还有助于维护数据完整性）

但是，要完成这项工作，您可能需要帮助数据库以有效地完成其工作。您将必须创建与您的过滤条件匹配的索引，并且您可能必须研究某些类型的查询的性能问题（如何避免临时表等）。然而，这绝对是值得的。

话虽如此，实际上有几种类型的查询是给定数据库不擅长的。这些很少，而且相距甚远，但它们确实存在。在这些情况下，在 RoR 中实现可能是更好的方法。即使没有更多地了解您的情况，我会说您的查询不在其中，这是一个非常安全的赌注。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:56:14.373

正如@hazzit 所说，没有太多细节很难回答，但这是我的两分钱。原始 SQL 通常用于执行复杂的操作，如聚合、计算等。但是，当涉及到搜索/过滤功能时，我经常发现使用原始 SQL 过大并且不太可维护。

这里的关键问题是：你能把你的问题分解成多个独立的过滤器吗？如果答案是肯定的，那么您应该利用 ActiveRecord 和 Arel 的强大功能。我经常发现自己在我的模型中实现了这样的东西：

```
scope :a_scope, ->{ where something: true }
scope :another_scope, ->( option ){ where an_option: option }
scope :using_arel, ->{ joins(:assoc).where Assoc.arel_table[:some_field].not_eq "foo" }
# cue a bunch of scopes

def self.search( options = {} )
  output   = relation
  relation = relation.a_scope if options[:an_option]
  relation = relation.another_scope( options[:another_option] ) unless options[:flag]
  # add logic as you need it
end 
```

这个解决方案的美妙之处在于您声明了一个干净的界面，您可以在其中直接从您的复选框和字段中倾倒所有参数，并返回一个关系。将查询分解为多个可重用的范围有助于保持事物的可读性和可维护性；使用`search`类方法将它们联系在一起并允许完整的文档......总而言之，使用 Arel 有助于保护应用程序免受注入。

作为旁注，这不会阻止您使用原始 SQL，只要查询可以在范围内隔离。

如果此方法不适合您的需要，还有另一种选择：使用成熟的搜索/过滤解决方案，如[Sunspot](http://sunspot.github.com/)。这使用了与您的数据库分开的另一个存储，该存储为您的数据的定义部分编制索引，以便于轻松和高效地搜索。

# python - 在 Easy Install 中确定 python 版本

> ID：15591107
> 
> 赞同：2
> 
> 时间：2013-03-23T19:25:55.353
> 
> 标签：python, python-2.7, easy-install, centos5, python-2.4

我不想在 CentOS 5.9 上安装 'twisted' 模块。默认情况下有 python 2.4 ，由于其他程序依赖关系，我无法删除 python 2.4 。我已经安装了 Python 2.7`yum install python27`并安装了 Easy Install `yum install python-setuptools`。现在，当我尝试安装 'twisted' 时`easy_install twisted`出现此错误：

```
<  ... truncated ... >
Running Twisted-12.3.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-YeUGBS/Twisted-12.3.0/egg-dist-tmp-NhwZo-
Traceback (most recent call last):
  File "/usr/bin/easy_install", line 7, in ?
    sys.exit(
  File "/usr/lib/python2.4/site-packages/setuptools/command/easy_install.py", line 1670, in main
    with_ei_usage(lambda:
  File "/usr/lib/python2.4/site-packages/setuptools/command/easy_install.py", line 1659, in with_ei_usage
    return f()
  File "/usr/lib/python2.4/site-packages/setuptools/command/easy_install.py", line 1674, in <lambda>
    distclass=DistributionWithoutHelpCommands, **kw
  File "/usr/lib/python2.4/distutils/core.py", line 149, in setup
    dist.run_commands()
  File "/usr/lib/python2.4/distutils/dist.py", line 946, in run_commands
    self.run_command(cmd)
  File "/usr/lib/python2.4/distutils/dist.py", line 966, in run_command
    cmd_obj.run()
  File "/usr/lib/python2.4/site-packages/setuptools/command/easy_install.py", line 211, in run
    self.easy_install(spec, not self.no_deps)
  File "/usr/lib/python2.4/site-packages/setuptools/command/easy_install.py", line 446, in easy_install
    return self.install_item(spec, dist.location, tmpdir, deps)
  File "/usr/lib/python2.4/site-packages/setuptools/command/easy_install.py", line 471, in install_item
    dists = self.install_eggs(spec, download, tmpdir)
  File "/usr/lib/python2.4/site-packages/setuptools/command/easy_install.py", line 655, in install_eggs
    return self.build_and_install(setup_script, setup_base)
  File "/usr/lib/python2.4/site-packages/setuptools/command/easy_install.py", line 930, in build_and_install
    self.run_setup(setup_script, setup_base, args)
  File "/usr/lib/python2.4/site-packages/setuptools/command/easy_install.py", line 919, in run_setup
    run_setup(setup_script, args)
  File "/usr/lib/python2.4/site-packages/setuptools/sandbox.py", line 26, in run_setup
    DirectorySandbox(setup_dir).run(
  File "/usr/lib/python2.4/site-packages/setuptools/sandbox.py", line 63, in run
    return func()
  File "/usr/lib/python2.4/site-packages/setuptools/sandbox.py", line 29, in <lambda>
    {'__file__':setup_script, '__name__':'__main__'}
  File "setup.py", line 64, in ?
  File "setup.py", line 46, in main
  File "./twisted/__init__.py", line 47
    class Dummy(object):
        ^
SyntaxError: invalid syntax 
```

如您所见，Easy Install 使用 python 2.4 而不是 python 2.7 。它如何强制它使用 python 2.7 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:28:37.853

您可以通过键入 eg 手动使用您想要的任何 Python 版本`Python2.7 <script>`。尝试执行`python2.7 -m easy_install twisted`。

如果由于某种原因`easy_install`没有安装，您可以[在此处](https://pypi.python.org/pypi/setuptools)`Python 2.7`手动下载并安装。

# php - 来自 RESTful 网络服务的 Symfony2 用户提供程序

> ID：15591112
> 
> 赞同：0
> 
> 时间：2013-03-23T19:26:25.253
> 
> 标签：php, symfony

我正在尝试在 Symfony 2 中创建一个简单的用户提供程序，但我不知道这应该如何与 web 服务一起工作。我公司的身份验证由 RESTful Web 服务处理，具有各种路由：

```
POST /user, GET /user, POST /login 
```

因此，在创建 Symfony 2 应用程序时，我的用户提供者必须咨询 Web 服务以验证凭据和权限。这可能吗？有这样的捆绑包吗？

另外，我怎样才能在这方面取得良好的表现？Symfony 用户提供程序的工作方式，我猜它会根据每个请求咨询 Web 服务，以获取用户数据。这可以避免吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-24T07:04:02.957

您可以使用两个很棒的捆绑包：

对于处理 REST 请求，请尝试 FOSRestBundle ( [https://github.com/FriendsOfSymfony/FOSRestBundle](https://github.com/FriendsOfSymfony/FOSRestBundle) )，对于用户提供者，请尝试 FOSUserBundle ( [https://github.com/FriendsOfSymfony/FOSUserBundle](https://github.com/FriendsOfSymfony/FOSUserBundle) )

这些都是很好的捆绑包，您也可以获得很好的文档。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-23T20:06:32.577

您可以通过实现身份验证提供程序和用户提供程序来做到这一点，每个提供程序都将处理对您的 Web 服务的调用以进行身份​​验证。您可以有一个客户端类来进行 Web 服务调用，并将响应缓存在某处以避免它调用每个请求，尽管这需要取决于 Web 服务的速度有多慢。

我已经完成了这种方法，因此如果您需要，可以填补空白。

# vb.net - 协助创建名为“(FundingResource(Balance))”的子过程 Visual Basic

> ID：15591114
> 
> 赞同：-1
> 
> 时间：2013-03-23T19:26:34.150
> 
> 标签：vb.net

我正在开发一个包含三个事件过程的程序（换句话说，三个不同的任务按钮：“选择媒体和估计基金”、“添加机构”和“生成报告”）。

当点击“选择媒体和预计资金”按钮时，会弹出输入框，要求用户输入余额，余额将通过公式（余额=余额*（1+利率）。余额用户输入不能少于 $500.00 或超过 $3000.00。

（预计预算应根据您选择的资金资源计算（资金资源是他们选择的账户类型，储蓄（7% 利率）和公司（5% 利率））计算结果应显示在旁边的禁用文本框中到“Estimated Budget”文本框。如果选择了两个资源，每个估计的预算应该汇总在一起。计算过程应该称为事件过程中定义为“FundingResource（Balance）”的子过程。

请注意当前年份，2013 年。现在，报告是在 2013 年准备的，但应根据您选择的年份（例如，2015、2016、2017）计算余额。考虑重复的主题以确定您所选年份的期末余额。

我已经完成了我相信的代码，但不知道如何将其放入子过程中。上述问题的代码在“btnMediaEstimatedFund”中。

```
Public Class Form1

Private Sub btnMediaEstimatedFund_Click(sender As Object, e As EventArgs) Handles btnMediaEstimatedFund.Click

    Dim interestRate, balance, initialBalanceSavings, initialBalanceCorporate, finalBalance As Double

    txtBoxEstimatedBudget.Enabled = False
    txtBoxAgenciesNeeded.Enabled = False

    If radButtonTraditional.Checked Then

        txtBoxAgenciesNeeded.Text = 3

    ElseIf radButtonEMedia.Checked Then

        txtBoxAgenciesNeeded.Text = 2

    End If

    If checkBoxSavings.Checked Then

        interestRate = 0.07

    ElseIf checkBoxCorporate.Checked Then

        interestRate = 0.05

    ElseIf checkBoxCorporate.Checked And checkBoxSavings.Checked Then

        interestRate = 0.12

    End If

    initialBalanceSavings = InputBox("Please Enter a balance for SAVINGS account between $500.00 and $3000.00")

    If initialBalanceSavings > 3000 Then

        InputBox("Please enter a balance for SAVINGS account equal to or below $3000.00 and no less than $500.00")

    ElseIf initialBalanceSavings < 500 Then

        InputBox("Please enter a balance for SAVINGS account equal to or above $500.00 and no more than $3000.00")

    End If

     initialBalanceCorporate = InputBox("Please Enter a balance for CORPORATE account between $500.00 and $3000.00")

    If initialBalanceCorporate > 3000 Then

        InputBox("Please enter a balance for CORPORATE account equal to or below $3000.000 and no less than $500.00")

    ElseIf initialBalanceCorporate < 500 Then

        InputBox("Please enter a balance for CORPORATE account equal to or above $500.00 and no more than $3000.00")

    Else

        finalBalance = initialBalanceCorporate + initialBalanceSavings
        balance = finalBalance * (1 + interestRate)
        txtBoxEstimatedBudget.Text = balance

    End If

End Sub

Private Sub btnAddAgencies_Click(sender As Object, e As EventArgs) Handles btnAddAgencies.Click

    Dim dict As Dictionary(Of String, Integer) = New Dictionary(Of String, Integer)()
    dict.Add("U-Ad ($350)", 350)
    dict.Add("Striker ($190)", 190)
    dict.Add("New Ad ($250)", 250)
    dict.Add("Samson ($530)", 530)
    dict.Add("J & R ($420)", 420)
    dict.Add("Victory ($120)", 120)

    Dim selectedItems = (From i In lstBoxAgenciesList.SelectedItems).ToArray()
    Dim total As Integer = 0

    For Each selectedItem In selectedItems

        lstBoxSelectedList.Items.Add(selectedItem)
        lstBoxAgenciesList.Items.Remove(selectedItem)

    Next

    For Each item In lstBoxSelectedList.Items

        total += dict(item)

    Next

    txtBoxEstimatedCost.Text = FormatCurrency(total.ToString())

End Sub

Private Sub btnGenerateReport_Click(sender As Object, e As EventArgs) Handles btnGenerateReport.Click

    Dim employeeLevel, year, selectedMedia, numberOfAgencies As String
    Dim today As Date

    today = CStr(dtpToday.Text)
    Name = CStr(txtBoxCreator.Text)
    employeeLevel = CStr(lstBoxResults.Text)
    year = CStr(lstBoxResults.Text)
    selectedMedia = CStr(lstBoxResults.Text)
    numberOfAgencies = CStr(txtBoxAgenciesNeeded.Text)

    dtpToday.Text = FormatDateTime(today, DateFormat.ShortDate)

    If radButtonManager.Checked Then

        employeeLevel = "Manager"

    ElseIf radButtonStaff.Checked Then

        employeeLevel = "Staff"

    End If

    If radButton2015.Checked Then

        year = "2015"

    ElseIf radButton2016.Checked Then

        year = "2016"

    ElseIf radButton2017.Checked Then

        year = "2017"

    End If

    If radButtonTraditional.Checked Then

        selectedMedia = "Traditional Media (TV, Radio)"

    ElseIf radButtonEMedia.Checked Then

        selectedMedia = "New e-Media (SNS, e-Mail)"

    End If

    lstBoxResults.Items.Add("=======================================")
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Date : " & today)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Reporting Entity : " & Name)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Level of Employee :  " & employeeLevel)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("=======================================")
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Year" & " " & year & " " & "Budget of Advertising Report")
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("=======================================")
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Total Estimated Cost : " & FormatCurrency(txtBoxEstimatedCost.Text))
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Total Estimated Budget : " & FormatCurrency(txtBoxEstimatedBudget.Text))
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Selected Media : " & selectedMedia)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("Number of Agencies Involved : " & numberOfAgencies)
    lstBoxResults.Items.Add(" ")
    lstBoxResults.Items.Add("=======================================")

End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T02:21:36.143

# 更新

您的输入框不正确，如果始终输入无效值，则例程将直接进入下一行代码！

它们应该如下所示。

```
Do
  inputtedData = InputBox("Please Enter a balance for SAVINGS account between $500.00 and $3000.00", "Initial Savings Balance", "0.00")
  If inputtedData = "" Then
    MsgBox("User chose to Cancel calculation!")
    Exit Sub
  Else
    initialBalanceSavings = CType(inputtedData, Single)
    If initialBalanceSavings > 3000 Or initialBalanceSavings < 500 Then MsgBox("Please enter a balance for SAVINGS account equal to or above $500.00 and no more than $3000.00", MsgBoxStyle.Critical, "Error")
  End If
Loop Until initialBalanceSavings >= 500 And initialBalanceSavings <= 3000

Do
  inputtedData = InputBox("Please Enter a balance for CORPORATE account between $500.00 and $3000.00", "Initial Corporate Balance", "0.00")
  If inputtedData = "" Then
    MsgBox("User chose to Cancel calculation!")
    Exit Sub
  Else
    initialBalanceCorporate = CType(inputtedData, Single)
    If initialBalanceCorporate > 3000 Or initialBalanceCorporate < 500 Then MsgBox("Please enter a balance for CORPORATE account equal to or above $500.00 and no more than $3000.00", MsgBoxStyle.Critical, "Error")
  End If
Loop Until initialBalanceCorporate >= 500 And initialBalanceCorporate <= 3000 
```

最后，所有代码肯定不在“btnMediaEstimatedFund”程序中，因为没有计算总值，也没有考虑到计算是针对未来几年的事实。实际上缺少关键计算部分！

我的意思是，如果您希望生成 2016 年的计算数字，而现在是 2013 年，那么您在哪里计算 7% 和 5% 的利息？我看不到实际计算的任何地方。

您“不知道”如何创建的子程序与您为按钮/文本框/列表框事件创建的子程序没有什么不同！

你传入参数，它会进行计算，如果它是一个 SUB，那就结束了！如果它是一个函数，那么它返回一个值或一个对象。

要创建一个 Sub 例程，您可以为其命名一个参数列表，如果需要，您可能有没有参数的子例程和函数，但函数必须始终返回一个值/对象。

```
Sub ThisIsMySubroutine(MyParam1 as string, My Param2 as Object)
   ' code here
End Sub

Function ThisIsMyFunction(MyParam1 as string, My Param2 as Object) As Boolean
   ' code here
End Function 
```

我相信您已经知道参数和返回数据类型可以是任何可接受或认可的数据类型。

# 更新二

关于您的最后一条评论（从...开始。另外，我有一个小...）如果您交换代码并将原始代码放回原处，您仍然会遇到同样的问题！

好的，最后一个代码示例和指针。

所以要阻止你的程序（10% 你的 90% 我的哈哈哈）请求输入，你可以将它包含在 if 语句中......

```
If checkBoxSavings.Checked Then
  Do
    inputtedData = InputBox("Please Enter a balance for SAVINGS account between $500.00 and $3000.00", "Initial Savings Balance", "0.00")
    If inputtedData = "" Then
      MsgBox("User chose to Cancel calculation!")
      Exit Sub
    Else
      initialBalanceSavings = CType(inputtedData, Single)
      If initialBalanceSavings > 3000 Or initialBalanceSavings < 500 Then MsgBox("Please enter a balance for SAVINGS account equal to or above $500.00 and no more than $3000.00", MsgBoxStyle.Critical, "Error")
    End If
  Loop Until initialBalanceSavings >= 500 And initialBalanceSavings <= 3000
End If

If checkBoxCorporate.Checked Then
  Do
    inputtedData = InputBox("Please Enter a balance for CORPORATE account between $500.00 and $3000.00", "Initial Corporate Balance", "0.00")
    If inputtedData = "" Then
      MsgBox("User chose to Cancel calculation!")
      Exit Sub
    Else
      initialBalanceCorporate = CType(inputtedData, Single)
      If initialBalanceCorporate > 3000 Or initialBalanceCorporate < 500 Then MsgBox("Please enter a balance for CORPORATE account equal to or above $500.00 and no more than $3000.00", MsgBoxStyle.Critical, "Error")
    End If
  Loop Until initialBalanceCorporate >= 500 And initialBalanceCorporate <= 3000
End If 
```

为了感兴趣，这里有一个链接给你， http: [//math.about.com/od/businessmath/ss/Interest.htm](http://math.about.com/od/businessmath/ss/Interest.htm)

这是一个非常好的解释，因为它显示了超过 1 年的兴趣，这就是您问题的这一部分所要问的......

**请注意当前年份，2013 年。现在，报告是在 2013 年准备的，但应根据您选择的年份（例如，2015、2016、2017）计算余额。考虑重复的主题以确定您所选年份的期末余额**

# responsive-design - 移动优化网站在不同浏览器上的不同缩放级别

> ID：15591119
> 
> 赞同：0
> 
> 时间：2013-03-23T19:27:05.553
> 
> 标签：responsive-design, mobile-website, android-browser

提前致谢...

我已经建立了一个响应迅速且具有移动友好版本的网站。

我遇到的问题是，在我的 Nexus 4、iPhone 和我尝试过的大多数其他 Android 设备上，它显示得很好……但在三星 Galaxy S2 上，它会放大并且布局一团糟。

我有视口元标记，我尝试了以下方法，但无济于事：

```
<meta name="viewport" content="user-scalable=no" />
<meta name="viewport" content="user-scalable=no, initial-scale=1" />
<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1" />
<meta name="viewport" content="user-scalable=no, width=480, initial-scale=1" /> 
```

三星都不好！谁能看到问题并帮助它让我发疯！如果您想查看源代码，有问题的站点是 dsimcockandson.com。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T16:16:19.353

从你的 CSS 的第 1083 行开始，你有：

```
.hide {
    display: ;
    text-align: center;
} 
```

显示属性的缺失值是故意的吗？

# c# - Visual C# 最佳按钮添加解决方案

> ID：15591120
> 
> 赞同：0
> 
> 时间：2013-03-23T19:27:07.210
> 
> 标签：c#, button

我使用这个解决方案（在下面的代码中）在面板上添加乘法按钮。它工作正常，但是当它尝试添加很多按钮时（例如 40 个）需要很长时间。我想问一下，是否有人知道针对这种情况的更好解决方案？我正在考虑在程序启动时创建所有可能的按钮，但在这种情况下，启动时间会太长，特别是如果按钮真的很多（这种情况是可能的）？

```
while (data.Read())
{
  btnName = Convert.ToString(data["Name"]);
  btnColor = (color == string.Empty) ? Convert.ToString(data["Color"]) : color;
  categoryId = Convert.ToInt16(data["CategoryId"]); 
  //both category and article table's contains this data!

  if (categoryId == articleCatId || cl == typeof(Category))
  {
      Button newbtn = new Button();
      newbtn.TextAlign = ContentAlignment.MiddleCenter;
      newbtn.Click += (sender, e) => method(sender, e);
      newbtn.Text = btnName;
      newbtn.Name = "button-" + btnName;
      newbtn.Height = size;
      newbtn.Width = size;
      newbtn.Font = new Font("Microsoft Sans Serif", fontH);
      newbtn.Location = new Point(paddingL, paddingT);
      newbtn.BackColor = ColorTranslator.FromHtml(btnColor);
      location.Controls.Add(newbtn);
      num += 1;

      if ((num - 1) / inline == 1) { paddingT += size; paddingL = 2; num = 1; }
      else { paddingL = paddingL + size; }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:39:04.847

您可能无法减少需要创建的按钮数量，因此您可以选择一些选项来加快速度：

1.  将按钮添加到不可见的对象。仅当您完成添加按钮后，才能使对象可见。

2.  调用[`SuspendLayout`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.suspendlayout.aspx)父控件以阻止它尝试自行布局。然后[`ResumeLayout`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.resumelayout.aspx)在您完成添加按钮时调用。

3.  使用比按钮更轻量级的控件，这更适合任务。例如，一个`Listbox`、`Combobox`或几个复选框或选项按钮，样式为普通按钮。

4.  编写您自己的轻量级`Button`控件，该控件完全符合您的要求，但仅此而已。

# javascript - 对范围界定感到困惑，这

> ID：15591123
> 
> 赞同：3
> 
> 时间：2013-03-23T19:27:20.617
> 
> 标签：javascript, jquery

我从这里收到了一个代码截图： http: [//jsdude.wordpress.com/2012/12/19/jquery-event-callbacks-and-javascript-oop-methods/](http://jsdude.wordpress.com/2012/12/19/jquery-event-callbacks-and-javascript-oop-methods/)：

```
 var CounterButton = function(el){
    this.$el = $(el);
    this.counter = 0;
    this.bindEvents();
    this.myVal = 1;
}

CounterButton.prototype.bindEvents = function(){
    this.$el.click(this.clicked);
};

CounterButton.prototype.clicked = function(){
    this.increase();
    this.showMessage();
}; 
```

我试图找出这条特定的线：`his.$el.click(this.clicked);`. 当您`this`在`click`函数内部时，这是否指的是被点击的内容`this.$el`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:29:47.183

> 这是否指的是被点击的内容是 this.$el？

不，它指的是一个名为`clicked` which 的函数，该函数在包含该`bindEvents`方法的对象内

但是`this`在事件处理程序中是指**DOM ELEMENT**！考虑这个简单的代码：

```
$("body").click(this.do1);

function do1()
{
 alert(this.tagName); //BODY     
} 
```

请注意

```
$el.click(this.clicked) 
```

就好像 ：

```
var that=this;
$el.on('click',function {}(that.clicked())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:33:45.420

`this.$el`指：`$(el)`;`(var CounterButton = function(el){...)`

`this.clicked`指：`CounterButton.prototype.clicked = function(){...`

在 jQuery 中，`$(el).click`是一个可以触发或监听点击的函数。如果传递了一个函数，它将监听元素“el”中的单击，并在执行该函数时执行该函数。

但是，在函数“this.clicked”内部，发生了一些令人困惑的事情。jQuery 将被点击的元素传递给函数“this.clicked”，因此“this”是构造函数中的“el”。

```
CounterButton.prototype.clicked = function(){
    this.increase(); // this refers to the element 'el'
    this.showMessage(); // this refers to the element 'el'
}; 
```

这就是他收到此错误的原因：http: [//jsdude.wordpress.com/2012/12/19/jquery-event-callbacks-and-javascript-oop-methods/console/](http://jsdude.wordpress.com/2012/12/19/jquery-event-callbacks-and-javascript-oop-methods/console/)

你可以通过关闭来解决这个问题：

```
CounterButton.prototype.clicked = function(){
    var self = this;
    return function () {
        self.increase(); // self refers to CounterButton
        self.showMessage(); // self refers to CounterButton
}; 
```

而不是传递 this.clicked，而是传递 this.clicked()

```
 this.$el.click(this.clicked()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T19:42:53.197

回答关于`this`jQuery 事件处理程序内部的原始问题：不，它不一定是被点击的元素。具体来说，根据[http://api.jquery.com/on/](http://api.jquery.com/on/)：

> 当 jQuery 调用处理程序时，`this`关键字是对传递事件的元素的引用；对于直接绑定的事件，这是附加事件的元素，对于委托事件，这是匹配的元素`selector`。（请注意，如果事件从后代元素冒泡，则`this`可能不等于[`event.target`](http://api.jquery.com/event.target/)。）要从元素创建 jQuery 对象以便它可以与 jQuery 方法一起使用，请使用`$(this)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T19:52:18.297

在 jQuery 中，这总是指绑定事件句柄的 DOM 元素（[http://api.jquery.com/bind/](http://api.jquery.com/bind/)）。

为了更好地理解这一点，您可以在这里查看：[“this”关键字是如何工作的？](https://stackoverflow.com/questions/3127429/javascript-this-keyword)

如果您阅读整篇文章，您会明白为什么这个例子是错误的（以下文字来自您链接到的文章）：

使用错误的上下文调用了 clicked() 方法。如果您从未听说过 javascript 中的函数调用上下文，那么您应该阅读这篇精彩的文章。默认情况下，jQuery 中事件回调的上下文对象是目标 HTML 元素。但这很容易解决，我们只需要稍微修改 bindEvents() 方法：

```
CounterButton.prototype.bindEvents = function(){
    this.$el.click($.proxy(this.clicked, this));
}; 
```

$.proxy 是 jQuery 的函数（或作用域）绑定版本。此方法返回新函数，该函数将始终使用上下文对象调用，作为第二个参数提供。您可以在官方 jQuery 文档中阅读更多内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T20:00:24.293

有些人把事情搞混了。从您的示例中看，与jQuery 函数内部的`this`行为无关。`this`

代码示例的用法如下：

```
var myButton = new CounterButton(domElement); 
```

每个 this，因为它的构造函数将是：`this == myButton`

# c# - “microsoft.visualbasic.fileio 不存在”尝试使用 TextFieldParser

> ID：15591130
> 
> 赞同：5
> 
> 时间：2013-03-23T19:28:26.707
> 
> 标签：c#, razor, visual-studio-2012

我已经在许多网站上多次看到上述问题，但我还没有看到解决问题的答案。

场景是这样的......我在 .NET Framework 4.0 上，使用 Razor 视图引擎在 VisualStudio 2012 Express 中构建 C# Web 应用程序。

我正在尝试在我的代码中使用 Microsoft.VisualBasic.FileIO.TextFieldParser。从我读过的内容来看，通过添加对 Microsoft.VisualBasic 的项目引用（我已经完成）和编码 @using Microsoft.VisualBasic 是合适的；在我看来。但是，当我编码...

```
Microsoft.VisualBasic.FileIO.TextFieldParser parser = new Microsoft.VisualBasic.FileIO.TextFieldParser(new StringReader(xxxxxxxx)); 
```

...在视图中并重建它返回错误的解决方案：名称空间“Microsoft.VisualBasic”中不存在类型或名称空间名称“FileIO”（您是否缺少程序集引用？）

我知道引用在正确的项目中，因为当我添加和删除它时，我看到它从引用文件夹中来来去去。我知道我试图引用的代码存在，因为我可以在对象浏览器中看到它。我什至尝试使用对象浏览器而不是通过菜单添加引用，虽然它被添加了，但结果是一样的。

它所在的解决方案有点复杂，所以我尝试创建一个独立的测试 C# 项目，我得到了相同的结果。我还尝试创建一个独立的测试 Visual Basic 项目，果然，它像宣传的那样在那里工作。我绝不是 Visual Studio 方面的专家，所以我猜这只是我在配置中缺少的东西，但我不知所措。

我已经花了几天的时间，所以任何人都可以提供的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-27T12:10:43.567

1.  右键单击您的项目并选择添加引用...

2.  在 Reference Manager 中，展开 Assemblies 并选择 Framework。然后选中 Microsoft.VisualBasic 复选框并单击确定。

![参考图片](../Images/b1512829360d685a8d540eea06a87720.png)

归功于： [https ://stackoverflow.com/a/17146200/2530360](https://stackoverflow.com/a/17146200/2530360)

我只是遇到了同样的问题，而且您的问题标题更冗长，所以我认为它应该在里面有答案。

# javascript - 警报和提示javascript

> ID：15591132
> 
> 赞同：-2
> 
> 时间：2013-03-23T19:28:27.397
> 
> 标签：javascript, alert, prompt

浏览器显示“thinksHarry Potter”，“thinks”和“harry”两个词之间没有空格，所以我的伙计们能告诉我该怎么做吗？这是我的代码：

```
<!DOCTYPE html>
<html>
  <body>
    <button onclick="myFunction()">Try it</button>

    <script>
      function myFunction() {
        var person = prompt("Please enter your name", "Harry Potter");

        if (person != null) {
          alert("thinks" + person);
        }
      }
    </script>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:29:47.850

只需`thinks`在警报消息后加一个空格

```
if (person!=null)
  {
    alert('thinks ' + person);
  }
} 
```

[JS 小提琴示例](http://jsfiddle.net/LBnLE/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:30:01.310

在第一个字符串内放置一个空格字符。

```
alert('thinks ' + person); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T08:30:39.653

这很容易，您必须注意在“thinks”之后或“harry”之前没有空格。

思考后腾出空间：

```
alert('thinks' + person); 
```

或在哈利之前：

```
var person=prompt("Please enter your name"," Harry Potter"); 
```

# android - android 的 setadapter 不工作。空适配器或列表视图？

> ID：15591133
> 
> 赞同：0
> 
> 时间：2013-03-23T19:28:36.247
> 
> 标签：android

我只是想使用一个简单的适配器创建一个列表视图。setadapter 不工作。这是我的代码。我的 setcontentview 在这段代码之前，它在 oncreate 中。

```
 ArrayList<HashMap<String,String>> arraylist = new ArrayList<HashMap<String,String>>();
HashMap<String,String> map = new HashMap<String,String>();
map.put("CType", "Alarm");
map.put("RType", "Once");
map.put("hour", "1");
map.put("minute", "1");
map.put("second", "30");
arraylist.add(map);
String[] stringarray= new String[] {"CType", "RType", "hour","minute","second"};
int[] intarray = new int[] {R.id.clocktextviewalarmtimer,R.id.clocktextviewrepeatonce,
        R.id.clocktextviewhours,R.id.clocktextviewminutes,R.id.clocktextviewseconds};
ListView clocklistview = (ListView)findViewById(R.id.clocklistview);
SimpleAdapter adapter = new SimpleAdapter(this,arraylist,R.layout.list_clock,stringarray,intarray);

clocklistview.setAdapter(adapter); 
```

这是包含我的列表视图的 xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
        android:layout_width="match_parent"
    android:layout_height="match_parent"
    >
    <ListView 
    android:id="@+id/clocklistview"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

</ListView></LinearLayout> 
```

这是给我的 list_clock.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:weightSum="3">
    <TextView
        android:id="@+id/clocktextviewalarmtimer"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text=""
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/clocktextviewrepeatonce"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text=""
        android:layout_weight="1"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/clocktextviewhours"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text=""
        android:layout_weight="0.3"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/clocktextviewminutes"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text=""
        android:layout_weight="0.3"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/clocktextviewseconds"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text=""
        android:layout_weight="0.3"
        android:textAppearance="?android:attr/textAppearanceSmall" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:30:31.053

这是一个自定义适配器的示例。尝试这个 ...

```
public class ClockListAdapter extends BaseAdapter {

    ArrayList<HashMap<String, String>> _arrayList;

    ClockListAdapter(Context context, ArrayList<HashMap<String, String>> arrayList) {
        this._arrayList = arrayList;
    }

    @Override
    public int getCount() {
        return (_arrayList != null) ? _arrayList.size() : 0;
    }

    @Override
    public Object getItem(int position) {
        return (_arrayList != null) ? _arrayList.get(position) : null;
    }

    @Override
    public long getItemId(int position) {
        return (_arrayList != null) ? _arrayList.indexOf(_arrayList.get(position)) : 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;

        if (convertView == null) {
            LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());
            // REPLACE WITH YOUR LAYOUT FILE vvvvvvvvvv
            convertView = layoutInflater.inflate(android.R.layout.simple_list_item_1, null);
            holder = new ViewHolder(convertView);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }
        holder._textView.setText("set some text here");
        return convertView;
    }

    public class ViewHolder {
        // ADD YOUR VIEW(S) vvvvvvvvv
        TextView _textView;

        ViewHolder(View v) {
            // REPLACE WITH YOUR TEXT vvvvvvvvv
            _textView = (TextView) v.findViewById(R.id.textView1);
        }
    }
} 
```

# javascript - 关联来自不同表的数据的最简单、最有效的方法，无需关联

> ID：15591141
> 
> 赞同：0
> 
> 时间：2013-03-23T19:29:08.540
> 
> 标签：javascript, sql, associations, relational-database, facebook-fql

这是最近让我很感兴趣的事情。这是一个来自喜欢 Mongo 的人的一般 SQL/关系数据库问题。

我想要的是，因此，以最有效、最简单的方式关联来自不同表的数据，**而不使用关联并假设我无法重构或重新建模数据库。**

因此，例如，对于 FQL（没有关联），如果我询问当前用户已被邀请参加`name`的`eid`所有活动，我还想知道我当前用户是否要去，但是信息在“event_member”表中。

在这种情况下，我对 中的另一列 ( `rsvp_status`)感兴趣`event_member`，我希望将其与来自`event`、 即`eid`和的列相关联`name`。

在这种情况下，本能可能会说，由于每个事件都有 a `name`， an`eid`和 a`rsvp_status`那么我们可以说 sort by`eid`然后匹配每个第 n 个项目（对于 n=1 到任何值），因为保证有相同的数字，但是很多情况下我们都做不到。

而且我知道我可以做单独的查询，然后遍历并匹配它们`eid`，但基本上**我正在寻找一种通用的、简单的、有效的解决方案来解决关联的想法（如果存在的话）。**最好在javascript中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:36:41.063

您在这里寻找的是两个或多个表的简单 JOIN。[http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp) 您不必为了执行 JOINS 在表之间建立任何关系。这些关系只是一个约束，以确保错误/无效数据不能传播到表中。例如，具有不存在用户的 eid 的 event_member。无论如何，您可以随意加入表格 :)

这是一种使用 javascript 连接到 Sql Server 的方法[如何在浏览器中从 JavaScript 连接到 SQL Server 数据库？](https://stackoverflow.com/questions/857670/how-to-connect-to-sql-server-database-from-javascript)

# android - 如何通过单击行上的任何位置开始活动

> ID：15591147
> 
> 赞同：1
> 
> 时间：2013-03-23T19:29:51.517
> 
> 标签：android

我创建与这张图片相同的 Ui：

![在此处输入图像描述](../Images/2cac483b9208825532fa1797a742dd61.png)

下面是我的 xml 源代码，只是告诉我如何设置点击侦听器？所以用户点击图片列上的任意位置或图片列或视频列上的任意位置开始另一个活动？

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="@drawable/main_background"
 android:orientation="vertical" >

 <include
    android:id="@id/includeTop"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    layout="@layout/private_space_title" />

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@id/mail_list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/main_list_bg"
        android:orientation="vertical"
        android:paddingBottom="10.0dip"
        android:paddingLeft="20.0dip"
        android:paddingRight="20.0dip"
        android:paddingTop="15.0dip" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <LinearLayout
                android:id="@id/picture_part"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/background_selector"
                android:clickable="true"
                android:gravity="center_vertical"
                android:orientation="horizontal"
                android:paddingRight="10.0dip" >

                <ImageView
                    android:id="@id/left_icon1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:padding="10.0dip"
                    android:src="@drawable/icon_picture" />

                <TextView
                    android:id="@id/textView1"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1.0"
                    android:ellipsize="end"
                    android:singleLine="true"
                    android:text="@string/function_img_management"
                    android:textAppearance="?android:textAppearanceMedium"
                    android:textColor="@color/white" />

                <ImageView
                    android:id="@id/right_icon1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/listview_arrow" />
            </LinearLayout>

            <ImageView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:src="@drawable/list_view_divider" />

            <LinearLayout
                android:id="@id/video_part"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/background_selector"
                android:clickable="true"
                android:gravity="center_vertical"
                android:orientation="horizontal"
                android:paddingRight="10.0dip" >

                <ImageView
                    android:id="@id/left_icon2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:padding="10.0dip"
                    android:src="@drawable/icon_video" />

                <TextView
                    android:id="@id/textView2"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1.0"
                    android:ellipsize="end"
                    android:singleLine="true"
                    android:text="@string/function_video_management"
                    android:textAppearance="?android:textAppearanceMedium"
                    android:textColor="@color/white" />

                <ImageView
                    android:id="@id/right_icon2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/listview_arrow" />
            </LinearLayout>

            <ImageView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:src="@drawable/list_view_divider" />

            <LinearLayout
                android:id="@id/sms_call_part"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/background_selector"
                android:clickable="true"
                android:gravity="center_vertical"
                android:orientation="horizontal"
                android:paddingRight="10.0dip" >

                <RelativeLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <ImageView
                        android:id="@id/left_icon2"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:padding="10.0dip"
                        android:src="@drawable/icon_sms_call" />

                    <TextView
                        android:id="@id/unread_count"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignRight="@id/left_icon2"
                        android:layout_marginRight="5.0dip"
                        android:layout_marginTop="3.0dip"
                        android:background="@drawable/counter"
                        android:gravity="center"
                        android:textColor="@color/white"
                        android:visibility="visible" />
                </RelativeLayout>

                <TextView
                    android:id="@id/textView3"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1.0"
                    android:ellipsize="end"
                    android:singleLine="true"
                    android:text="@string/function_sms_management"
                    android:textAppearance="?android:textAppearanceMedium"
                    android:textColor="@color/white" />

                <ImageView
                    android:id="@id/right_icon3"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/listview_arrow" />
            </LinearLayout>

            <ImageView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:src="@drawable/list_view_divider" />

            <LinearLayout
                android:id="@id/private_contact_part"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/background_selector"
                android:clickable="true"
                android:gravity="center_vertical"
                android:orientation="horizontal"
                android:paddingRight="10.0dip" >

                <ImageView
                    android:id="@id/left_icon4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:padding="10.0dip"
                    android:src="@drawable/icon_contact" />

                <TextView
                    android:id="@id/textView4"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1.0"
                    android:ellipsize="end"
                    android:singleLine="true"
                    android:text="@string/function_privacy_management"
                    android:textAppearance="?android:textAppearanceMedium"
                    android:textColor="@color/white" />

                <ImageView
                    android:id="@id/right_icon4"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/listview_arrow" />
            </LinearLayout>

            <ImageView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:src="@drawable/list_view_divider" />

            <LinearLayout
                android:id="@id/break_in_part"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/background_selector"
                android:clickable="true"
                android:gravity="center_vertical"
                android:orientation="horizontal"
                android:paddingRight="10.0dip" >

                <RelativeLayout
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" >

                    <ImageView
                        android:id="@id/left_icon5"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:padding="10.0dip"
                        android:src="@drawable/icon_break_in" />

                    <TextView
                        android:id="@id/login_record_main_unread_count"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignRight="@id/left_icon5"
                        android:layout_marginRight="5.0dip"
                        android:layout_marginTop="3.0dip"
                        android:background="@drawable/counter"
                        android:gravity="center"
                        android:textColor="@color/white"
                        android:visibility="visible" />
                </RelativeLayout>

                <TextView
                    android:id="@id/textView5"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_weight="1.0"
                    android:ellipsize="end"
                    android:singleLine="true"
                    android:text="@string/function_break_in_management"
                    android:textAppearance="?android:textAppearanceMedium"
                    android:textColor="@color/white" />

                <ImageView
                    android:id="@id/right_icon5"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/listview_arrow" />
            </LinearLayout>

            <ImageView
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:src="@drawable/list_view_divider" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="90.0dip"
            android:layout_weight="1.0"
            android:gravity="center" >

            <Button
                android:id="@id/member_up_btn"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="20.0dip"
                android:layout_marginRight="20.0dip"
                android:background="@drawable/upgrade_selector"
                android:text="@string/main_upgrade_button"
                android:textSize="18.0sp" />
        </LinearLayout>
    </LinearLayout>
</ScrollView>

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:13:59.583

只需为每个 linearLayout 容器绑定一个点击事件：picture_part、video_part、sms_call_part...

例如 ：

```
 LinearLayout menu_photos = (LinearLayout )findViewById(R.id.picture_part);
    menu_photos.setOnClickListener(new OnClickListener() {      
        @Override
        public void onClick(View v) {
            Intent picture_intent = new Intent(CurrentActivity.this,PictureActivity.class);
startActivity(picture_intent );     
        }
    }); 
```

**对其他项目使用相同的方法。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:39:58.157

您可以`onClick`使用相应的方法为要单击的每个视图设置属性。例如：

```
android:onClick="viewOnClickMethod" 
```

并在你的`Activity`类中定义方法：

```
public void viewOnClickMethod (View v)
{
    //from here start any activity you want
} 
```

对于并非设计为可点击的视图，您必须设置：

```
android:clickable="true" 
```

财产也是如此。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-23T19:43:44.177

您应该使用 listView 和[OnItemSelectedListener](http://developer.android.com/reference/android/widget/AdapterView.html#setOnItemSelectedListener%28android.widget.AdapterView.OnItemSelectedListener%29)。

通过这种方式，您可以避免编写如此多的 XML，也可以避免为每一行设置一个侦听器。

[在侦听器中，使用startActivity](http://developer.android.com/reference/android/content/Context.html#startActivity%28android.content.Intent%29) ()检查选择了哪个项目并启动您希望的活动。如果活动属于您的应用，请将其信息放入清单文件中。

此外，您可以使用操作栏而不是自定义的上栏。

# python - 为什么当我运行它时，结果是“NoneType”对象没有“附加”属性

> ID：15591149
> 
> 赞同：0
> 
> 时间：2013-03-23T19:29:58.600
> 
> 标签：python, nonetype

```
def collatz_list(n):
 int_list = [n]
 int_index = n
 while int_index >1 :
     if int_index % 2 == 0:
         int_index = int_index / 2
         int_list = int_list.append(int_index)
     else:
         int_index = 3 * int_index  1
         int_list = int_list.append(int_index)
 return int_list 
```

为什么当我运行它时，结果是`NoneType`对象没有属性`append`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T19:35:18.310

`.append()`不返回列表，它返回`None`. `int_list`无论如何都不需要分配回，`int_list.append(int_index)`就可以了。

# android - RSS 提要 android 示例

> ID：15591151
> 
> 赞同：0
> 
> 时间：2013-03-23T19:30:17.020
> 
> 标签：android

我正在研究来自 head first android 的美国航空航天局当天的图像示例。在下面的最后一步中，代码显示错误。

```
 public void resetDisplay(String title, String date, String imageUrl, String desc){

        TextView titleView = (TextView) findViewById(R.id.ImageTitle);
        titleView.setText(title);

        TextView dateView = (TextView) findViewById(R.id.ImageDate);
        dateView.setText(date);

        ImageView imgv = (ImageView) findViewById(R.id.ImageDisplay);
        imgv.setImageBitmap(image);

        TextView descView = (TextView) findViewById(R.id.ImageDesc);
        descView.setText(desc);
    } 
```

问题在于 ImageView 设置方法。那个图像变量是什么？任何成功使用此示例的人请指导

我可以找到此示例代码的任何链接都会有很大帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:45:29.433

您必须先下载图像（从 imageUrl）：

```
URL url = new URL(stringURL);   
URLConnection conn = url.openConnection();
conn.connect();
InputStream is = conn.getInputStream();
BufferedInputStream bis = new BufferedInputStream(is);
Bitmap image = BitmapFactory.decodeStream(bis); 
```

然后做：

```
imgv.setImageBitmap(image); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-13T04:43:28.843

公共类 XmlHandler 扩展 DefaultHandler {

```
private String url = "http://www.nasa.gov/rss/dyn/image_of_the_day.rss";

private boolean inUrl = false;

private boolean inTitle = false;

private boolean inDescription = false;
private boolean inItem = false;
private boolean inDate = false;
private Bitmap image = null;
private String imageUrl = null;
private String title = null;
private StringBuffer description = new StringBuffer();
private String date = null;

public void processFeed() {
    try {
        // This part is added to allow the network connection on a main GUI
        // thread...
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder()
                .permitAll().build();
        StrictMode.setThreadPolicy(policy);

        SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser parser = factory.newSAXParser();
        XMLReader reader = parser.getXMLReader();
        reader.setContentHandler(this);
        URL urlObj = new URL(url);
        InputStream inputStream = urlObj.openConnection().getInputStream();
        reader.parse(new InputSource(inputStream));
    } catch (Exception e) {
        e.printStackTrace();
        System.out.println(new String("Got Exception General"));
    }
}

private Bitmap getBitmap(String url) {
    try {
        System.out.println(url);
        HttpURLConnection connection = (HttpURLConnection) new URL(url)
                .openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap bitmap = BitmapFactory.decodeStream(input);
        input.close();
        return bitmap;
    } catch (IOException ioe) {
        System.out.println(new String("IOException in reading Image"));
        return null;
    } catch (Exception ioe) {
        System.out.println(new String("IOException GENERAL"));
        return null;
    }
}

public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {

    if (localName.equals("enclosure")) {

        imageUrl = attributes.getValue("", "url");

        inUrl = true;
    } else {
        inUrl = false;
    }
    if (localName.startsWith("item")) {
        inItem = true;
    } else if (inItem) {
        if (localName.equals("title")) {

            inTitle = true;
        } else {
            inTitle = false;
        }
        if (localName.equals("description")) {
            inDescription = true;
        } else {
            inDescription = false;
        }
        if (localName.equals("pubDate")) {
            inDate = true;
        } else {
            inDate = false;
        }
    }
}

public void characters(char ch[], int start, int length) {

    String chars = new String(ch).substring(start, start + length);

    if (inUrl && image == null) {

        image = getBitmap(imageUrl);
    }
    if (inTitle && title == null) {

        title = chars;
    }
    if (inDescription && description == null ) {

        description.append(chars);
    }
    if (inDate && date == null) {

        date = chars;
    }
}

public Bitmap getImage() {
    return image;
}

public String getTitle() {
    return title;
}

public StringBuffer getDescription() {
    return description;
}

public String getDate() {
    return date;
} 
```

}

# rdf - 解析 N3 文件时发生异常

> ID：15591152
> 
> 赞同：0
> 
> 时间：2013-03-23T19:30:18.310
> 
> 标签：rdf, dbpedia, n3, semweb

我正在尝试使用[SemWeb](http://razor.occams.info/code/semweb/)解析 N3 DBpedia 转储文件。这是我的简单代码：

```
Imports SemWeb
…
Dim store As New MemoryStore
Dim sr As New System.IO.StreamReader(chunkFile)
store.Import(New N3Reader(sr)) 
```

当我解析块文件（包括[http://www.georss.org/georss/point](http://www.georss.org/georss/point)谓词）时，我得到了这个异常：

```
System.OverflowException: Value was either too large or too small for an Int32.
   at System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info)
   at System.Xml.XmlConvert.ToInt32(String s)
   at SemWeb.Literal.ParseValue()
   at SemWeb.RdfReader.ValidateLiteral(Literal literal)
   at SemWeb.N3Reader.ReadToken(MyReader source, ParseContext context)
   at SemWeb.N3Reader.ReadResource2(ParseContext context, Boolean allowDirective, Boolean& reverse, Boolean& forgetBNode)
   at SemWeb.N3Reader.ReadResource(ParseContext context, Boolean allowDirective, Boolean& reverse, Boolean& forgetBNode)
   at SemWeb.N3Reader.ReadObject(Resource subject, Entity predicate, ParseContext context, Boolean reverse)
   at SemWeb.N3Reader.ReadPredicate(Resource subject, ParseContext context)
   at SemWeb.N3Reader.ReadPredicates(Resource subject, ParseContext context)
   at SemWeb.N3Reader.ReadStatement(ParseContext context)
   at SemWeb.N3Reader.Select(StatementSink store)
   at SemWeb.MemoryStore.StoreImpl.Import(StatementSource source)
   at SemWeb.Store.Import(StatementSource source)
   at ConsoleApplication2.Module1.SaveToDB(String chunkFilePath) in D:\ConsoleApplication2\ConsoleApplication2\Module1.vb:line 31 
```

当我从[DBPedia](http://live.dbpedia.org/dumps/)下载文件时，似乎它们没有任何异常（它们已被其他解析器多次使用）。不幸的是，SemWeb 没有提供有关导致异常的行的更多详细信息，因此我找不到导致异常的确切行。有什么办法可以解决吗？

# c# - VS 2010：从文本框中删除后如何禁用按钮？

> ID：15591154
> 
> 赞同：0
> 
> 时间：2013-03-23T19:30:29.953
> 
> 标签：c#, winforms, button, textbox

在 Visual Studio 2010 中，如果文本框中没有任何内容，我希望该按钮将被禁用。它以禁用状态启动，并在我在文本框中输入内容时启用。但是当我从文本框中删除所有内容时，它仍然处于启用状态。这就是我所做的：

```
 public Form1()
    {
        InitializeComponent();
        button1.Enabled = false;
    }       

    private void textBox1_TextChanged(object sender, EventArgs e)
    {
        if (textBox1.Text == null)
        {
            button1.Enabled = false;
        }
        else
        {
            button1.Enabled = true;
        }
    } 
```

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T19:31:42.140

线

```
if (textBox1.Text == null) 
```

应该

```
if (textBox1.Text == string.Empty) 
```

Text 属性不会为 null（这通常意味着没有任何值），而是 string.Empty，它表示长度为零的字符串。

写这个的更短的方法是：

```
button1.Enabled = (textBox1.Text != string.Empty); 
```

# bash - 作为命令运行时将字符串传递给 shell 脚本

> ID：15591156
> 
> 赞同：0
> 
> 时间：2013-03-23T19:30:38.573
> 
> 标签：bash, command-line, command-line-arguments

我正在尝试编写一个 shell 脚本，该脚本使用多个实用程序从 .asm 文件构建 iso 映像。当您从命令行运行脚本时，它首先询问用户文件在哪里以及 iso 文件应该在哪里。我希望脚本接受用户作为命令的一部分传递的参数：`./mkiso foo.iso bar.asm`？这两个参数将对应于两个变量，`input`并且`output`。我该怎么做呢？编辑：我使用的是 Linux，我的脚本是一个 bash 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:59:43.547

mkiso:

```
#!/bin/bash
input=$1
output=$2
echo "input: $input, output: $output" 
```

带参数运行

```
./mkiso aa.iso bb.asm 
```

输出

```
input: aa.iso, output: bb.asm 
```

# java - 从输入用户保存名称和网站的持久数据

> ID：15591159
> 
> 赞同：0
> 
> 时间：2013-03-23T19:31:04.057
> 
> 标签：java, android, sharedpreferences, persistent

我有两个名称和网址的编辑文本。按“保存”按钮后，我想保存这些信息。

所以我决定使用 SharedPreferences 来存储它，没关系。

`SharedPreferences addActivityPrefs = getPreferences(MODE_PRIVATE);`
`SharedPreferences.Editor editor = addActivityPrefs.edit();` `editor.putString("name", name.getText().toString()).commit();` `editor.putString("url", url.getText().toString()).commit();`

但我的问题是，当我想存储其他值时，它会覆盖我以前的值，我想保留所有这些值。

这是我的 xml 文件：

```
<?xml version='1.0' encoding='utf-8' standalone='yes' ?>
<map>
     <string name="url">http://Google.co.uk</string>
     <string name="name">BBC world news feed</string>
</map> 
```

我的目标是保存许多对名称-url，例如 [http://www.google.co.uk](http://www.google.co.uk) GOOGLE

```
<map>
    <string name="url">http://www.yahoo.co.uk</string>
    <string name="name">YAhoo</string>
</map> 
```

等等等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:41:58.497

您可以使用 url 和名称创建 json 对象并将它们放入一个 jsonArray 中，您可以将其作为字符串提交，或者创建您的对象来存储名称和 url，将其放入列表中，然后只需序列化/反序列化列表并将其放入首选项。

PS：在放置两个/所有值后仅调用一次提交，最好不要从 UI 线程调用一次，或者只调用一次 apply()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:42:29.343

您可以将数组存储为字符串并保存，或者您可以为每个项目创建一个新键，所以有

1.  位置1
2.  位置2
3.  位置3

要执行第二种方法，您可以查看以下问题：

[首选项中的Android商店数组](https://stackoverflow.com/questions/3249996/android-store-array-in-preferences)

我也会有一个带有已保存项目数量的键，因此您可以加载该键，递增，保存，然后使用新计数器作为新键的名称，所以`location + cntr`

# android - 致命错误，没有这样的文件或目录（eclipse android）

> ID：15591160
> 
> 赞同：0
> 
> 时间：2013-03-23T19:31:10.133
> 
> 标签：android, ios, eclipse, cocos2d-x, fatal-error

我正在开发一个 cocos2d-x 项目，因为它的通用性适用于 android 和 iOS。

我最近使用 flite 添加了文本到语音功能。在 xcode 中，我使用 flite 所做的一切就是将 headers 和 c 文件的文件夹拖到我的 xcode 项目中，然后我可以包含它的 headers 并使用它。那里没有问题。

但是在 Eclipse 中，我无法让编译器看到这些文件，并且它不断出现我提到的致命错误。具体来说：致命错误：flite.h 没有这样的文件或目录。

我试图将文件夹包含在 C/C++ 常规下的 eclipse 的包含部分中，但没有运气。我认为这可能与我的 android.mk 文件有关，不胜感激如何为此目的进行设置的指导。附带说明一下，我的项目设置为使我的 .cpp 和 .h 文件存在于我计算机的其他位置，而不是我的实际项目中。我的 flite 源文件也是如此。（我确实尝试将它们添加到我的项目中，但是出于绝望但编译器仍然找不到它们）

谢谢你的时间。

PS：如何引用flite，它是一个库/框架等吗？

**编辑** 我试图修改我的 Android.mk 文件，以找到 flite 标头。我的补充如下所示

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE := game_shared

LOCAL_MODULE_FILENAME := libgame

LOCAL_SRC_FILES := hellocpp/main.cpp \
               ../../Classes/AppDelegate.cpp \
               ../../Classes/HelloWorldScene.cpp \
               ../../Classes/CCLabelTTFExtension.cpp \
               ../../Classes/menuScene.cpp \
               ../../Classes/text_Parse.cpp \
               ../../Classes/FileTS.cpp
LOCAL_C_INCLUDES := $(LOCAL_PATH)/../../Classes/ 
#my addition
LOCAL_C_INCLUDES += $(LOCAL_PATH)/flite/

dirs := $(shell /flite  -type d)

cfilestemp1 := $(shell find /src -type d)
cfilestemp2 := $(shell find $(cfilestemp1) -name *.c)
cfilestemp3 := $(sort $(cfilestemp2))
cfiles := $(subst $(LOCAL_PATH)/,,$(cfilestemp3))

LOCAL_SRC_FILES += \
           $(cfiles)
#end my addition

LOCAL_WHOLE_STATIC_LIBRARIES := cocos2dx_static cocosdenshion_static     cocos_extension_static

include $(BUILD_SHARED_LIBRARY)

$(call import-module,CocosDenshion/android) \
$(call import-module,cocos2dx) \
$(call import-module,extensions) 

include $(CLEAR_VARS) 
```

这让我更接近，好吧，给了我不同的错误。现在编译器在我的 FileTS.cpp 文件中抱怨未定义的引用，该文件在我的项目中使用 flite。（注意：我的 flite 头文件和源文件现在添加到我的项目中的 jni 文件夹中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T01:43:39.963

最简单的方法是将所有源代码放入 Classes 文件夹并在 LOCAL_SRC_FILES 中列出 cpp 文件，如 mainScene.cpp 。这将确保您的库被构建到您的游戏对象文件中。

# c# - FileSystemWatcher 无法访问文件，因为它正被另一个进程使用

> ID：15591164
> 
> 赞同：1
> 
> 时间：2013-03-23T19:31:41.543
> 
> 标签：c#, c, winforms, filesystemwatcher

这里是我的情况。我对此还是很陌生。我在我的 linux 虚拟框中生成了一些 .txt 文件，并在 Windows 中使用 ac# winform 应用程序将数据加载到图表中。大约有20个左右的文件。我需要做的是加载第一个文件，将其显示在图表上，重新加载文件并将其显示在图表上，重新加载文件，将其显示在图表上等。我的 c 代码每次都在同一个文件上写入时间与新的价值观。因此，在 winforms 中，当您查看图表时，您会看到数据在加载每个新数据集时发生转换。这应该很快发生。加载了一些新数据，但随后我收到有关另一个进程正在使用的文件的错误。我一直在阅读有关该错误的信息，但我想我仍然不明白如何解决它。我需要生成文件的 c 代码与 c# 图表加载代码对齐，以便顺利进行。在 CI 中，我还会收到一条错误消息，指出无法打开文件进行写入。

这是我到目前为止所尝试的。在打开文件进行写入之前，我尝试在 c 代码中等待片刻，但这不起作用。我也尝试过反复打开文件，直到它没有错误地打开，但它没有用。我能想到的唯一其他解决方案是只创建像 1.txt 2.txt 3.txt... 这样的文件，然后连续加载它们。这可能是我必须走的路。但我还是新手，实际上不知道我这样做是否是最好的开始方式。

C代码

```
for(i = 0; i < FILES; i++){
    fd = fopen(path, "w+");
    if( fd == NULL ){
        printf( "Could not open file for writing. Exiting...\n");
        exit(-1);
    }
    for(j = 0; j < ROW; j++){
        fprintf(fd, "%.4f", vector[i][j]);
        fprintf(fd, "%s", "\n");
    }
    fclose(fd);
} 
```

C# 代码

```
// Define the event handlers. 
private void OnChanged(object source, FileSystemEventArgs e)
{
    FinalList.Clear();
    chart4.Series[0].Points.Clear();
    loadData(FinalPath, FinalList, chart4);
 }

private void loadData(String path, List<double> list, System.Windows.Forms.DataVisualization.Charting.Chart chart)
{
    string line = null;
    double value = 0;        
    using (TextReader reader = File.OpenText(path))
    {
        line = reader.ReadLine();
        while (line != null)
        {
                value = System.Convert.ToDouble(line);
                list.Add(value);
                line = reader.ReadLine();
            }
        }

        for (int i = 0; i < ROW; i++)
        {
            chart.Series["Graph"].Points.AddXY(i + 1, list[i]);

        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:48:23.793

我猜使用（网络？）文件系统是在不同平台之间进行进程间通信的不好方法。如果继续这种方式，您将遇到同步问题。试想一下，此刻文件仅由 C 代码编写了一半。由于缓冲区已满，Linux 系统可能会将此文件同步到磁盘。现在您的 Windows C# 应用程序读取该文件，但只会得到它的一半。这不是您想要的，因为您的 c# 应用程序永远不会知道 C 程序何时完成编写*完整*的文件。

我建议您使用套接字在 Linux 和 Windows 之间传输数据。

* * *

在 linux 方面，您可以使用**非常便宜**的套接字实现。您可以将数据写入 eg，`file.txt`并使用该`system`命令与 netcat （`nc`在 ubuntu 上）一起发布文件。

```
cat file.txt | nc -l 1234 
```

我好像你也可以下载 Windows 的 netcat。您可以像这样获取您的文件（替换`1.2.3.4`为您的 Linux VM 的 IP 地址）：

```
nc 1.2.3.4 1234 > file.txt 
```

确保您的 Windows 可以访问 Linux VM。使用 VirtualBox 默认[网络模式](http://www.virtualbox.org/manual/ch06.html)(NAT)，这是不可能的，但您可以轻松更改它。

# asp-classic - IPN 现在已禁用 需要帮助来破译 asp 代码

> ID：15591169
> 
> 赞同：1
> 
> 时间：2013-03-23T19:32:02.637
> 
> 标签：asp-classic, paypal-ipn

Paypal 一直在发送电子邮件警告 IPN 失败。

我没有对我的代码进行任何更改，而且它确实是旧代码....已经工作了 5 年以上.... 时间太长了，我不得不在这个网站上做任何事情。

我搜索了服务器日志以获取更多信息……这是我反复发现的

```
|35|80040e14|Syntax_error_(missing_operator)_in_query_expression_'OrderID='. 
```

我检查了网站 ipn 页面上的代码，我被难住了。什么都没有改变，但它停止工作

这是 ipn 页面代码的第 34 到 36 行：

```
MM_Cmd.CommandText = "UPDATE Orders SET txn_id='" & txn_id & "',payment_status='" & payment_status & "' WHERE OrderID=" & Item_number
MM_Cmd.Execute 
end function 
```

更新：这是显示 Item_number 的完整代码：

```
<%
str = Request.Form & "&cmd=_notify-validate"

' post back to PayPal system to validate
set objHttp = Server.CreateObject("Msxml2.ServerXMLHTTP")
objHttp.open "POST", "https://www.paypal.com/cgi-bin/webscr", false
objHttp.setRequestHeader "Content-type", "application/x-www-form-urlencoded"
objHttp.Send str

' assign posted variables to local variables
Item_number = Request("item_number")
Payment_status = Request("payment_status")
Txn_id = Request("txn_id")
if (objHttp.status <> 200 ) then
' HTTP error handling
elseif (objHttp.responseText = "VERIFIED") then
if Payment_status = "Completed" then 'only update database if the response text is verified and the payment complete
UpdateOrder
end if
elseif (objHttp.responseText = "INVALID") then
' log for manual investigation
else
' error
end if

set objHttp = nothing

function UpdateOrder
'on error resume next
Set MM_Cmd = Server.CreateObject("ADODB.Command")
MM_Cmd.ActiveConnection = MM_CharonCart_STRING
MM_Cmd.CommandText = "UPDATE Orders SET txn_id='" & txn_id & "',payment_status='" & payment_status & "' WHERE OrderID=" & Item_number
MM_Cmd.Execute 
end function
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:40:16.480

问题出在您的变量 Item_number 上。如果您将查询的结尾重写为

```
... where OrderID=" & Cint(Item_number) 
```

那么您将解决您的问题，但是您可能需要查看为 Item_number 分配值的代码

# c# - 使用 C# StreamReader 解析文本文件

> ID：15591170
> 
> 赞同：4
> 
> 时间：2013-03-23T19:32:02.820
> 
> 标签：c#, sqlite, parsing, streamreader, fileinfo

我有一个文本文件，其中包含一些特定格式的赞美诗。示例如下。

```
 1  Praise to the Lord

1
  Praise to the Lord, the Almighty, the King of creation!
  O my soul, praise Him, for He is thy health and salvation!
  All ye who hear, now to His temple draw near;
  Join ye in glad adoration!

2
  Praise to the Lord, Who o'er all things so wondrously reigneth,
  Shieldeth thee under His wings, yea, so gently sustaineth!
  Hast thou not seen how thy desires e'er have been
  Granted in what He ordaineth?

3
  Praise to the Lord, who doth prosper thy work and defend thee;
  Surely His goodness and mercy here daily attend thee.
  Ponder anew what the Almighty can do,
  If with His love He befriend thee. 
```

我想提取这些赞美诗，将它们放入对象中，然后将它们插入 SQLite 数据库。我正在尝试将它们相应地分开，但到目前为止我还没有取得任何进展。这是我的尝试。

主功能

```
 //Fileinfo object wraps the file path.
        var hymns = new FileInfo(@"C:HymnWords.txt");

        //StreamReader reads from the existing file.
        var reader = hymns.OpenText();

        string line;
        int number = 0;
        var hymns = new List<Hymn>();

        var check = false; //this is set to indicate that all the lines that are follwoing will be apart of the hymn.

        while ((line = reader.ReadLine())!=null)
        {
                if (line.Any(char.IsLetter) && line.Any(char.IsDigit))
                {

                }

                if (check)
                {
                    if (line.Any(c => char.IsDigit(c) && c != 0) && !line.Any(char.IsLetter))
                    {

                    }

                }

            } 
```

赞美诗的模型

```
public class Hymn
{
    public string Name { set; get; }
    public List<String> Verses { set; get; }
} 
```

储存经文时。我需要保留换行符。正在插入一个

> /n

在将经文插入对象或数据库之前的每一行之后，这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T20:32:49.483

这应该可以让您很好地开始：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;

namespace Program
{
    public class Class1
    {
        public class Program
        {
            public static void Main(string[] args)
            {
                var hymnFiles = new List<string>()
                {
                    @"C:\HymnWords.txt",
                    @"C:\HymnWords1.txt",
                    @"C:\HymnWords2.txt",
                    @"C:\HymnWords3.txt",
                };
                var reader = new Class1();
                foreach (var hymn in reader.ReadHymnFiles(hymnFiles))
                {
                    Console.Out.WriteLine(hymn.Title);
                    foreach (var verse in hymn.Verses)
                    {
                        Console.Out.WriteLine(verse.VerseNumber);
                        foreach (var verseLine in verse.VerseLines)
                        {
                            Console.Out.WriteLine(verseLine);
                        }
                    }
                }
                Console.ReadLine();
            }

        }
        public List<Hymn> ReadHymnFiles(List<string> hymnFiles)
        {
            var hymns = new List<Hymn>();
            foreach (var hymnFile in hymnFiles)
            {
                using (TextReader reader = new StreamReader(hymnFile))
                {
                    var hymn = new Hymn();
                    hymns.Add(hymn);
                    string line;
                    int currentVerseNumber = 0;
                    while ((line = reader.ReadLine()) != null)
                    {
                        if (string.IsNullOrWhiteSpace(line))
                            continue;

                        if (line.Any(char.IsLetter) && line.Any(char.IsDigit))
                        {
                            // this must be the title
                            hymn.Title = line;
                            continue;
                        }

                        if (line.Any(c => char.IsDigit(c) && c != 0) && !line.Any(char.IsLetter))
                        {
                            //this must be the verse number
                            currentVerseNumber = Convert.ToInt32(line.Trim());
                            hymn.Verses.Add(new Verse(currentVerseNumber));
                            continue;
                        }

                        //get the current verse to add the next line to it
                        var verse = hymn.Verses.Single(v => v.VerseNumber == currentVerseNumber);
                        verse.VerseLines.Add(line);
                    }
                }
            }
            return hymns;
        }

        public class Hymn
        {
            public Hymn()
            {
                Verses = new List<Verse>();
            }
            public string Title { set; get; }
            public List<Verse> Verses { set; get; }
        }

        public class Verse
        {
            public Verse(int verseNumber)
            {
                VerseNumber = verseNumber;
                VerseLines = new List<string>();
            }
            public int VerseNumber { get; private set; }
            public List<string> VerseLines { set; get; }
        }
    }

} 
```

请注意，这些经文是在他们自己的对象中，每一行都是它自己的行。它们可能也应该以这种方式存储。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T21:49:57.247

这可能会有所帮助，但您可能需要更多的异常处理。
我稍微更改了您的 Hymn 课程，以使其更易于使用。

这是修改后的赞美诗类：

```
public class Hymn
{
    private readonly List<List<string>> _verses = new List<List<string>>();

    public Hymn(string name)
    {
        Name = name;
    }

    public string Name { get; private set; }
    public IEnumerable<IEnumerable<string>> Verses { get { return _verses; } }

    public List<string> CreateVerse()
    {
        var verse = new List<string>();
        _verses.Add(verse);
        return verse;
    }
} 
```

这是一个从文件中读取赞美诗的类：

```
public static class HymnReader
{
    public static IEnumerable<Hymn> ReadHymns(string file)
    {
        var lines = File.ReadAllLines(file);
        var hymns = new List<Hymn>();
        Hymn hymn = null;
        List<string> verse = null;
        foreach (var line in lines)
        {
            string text;
            switch (ParseLine(line, out text))
            {
                case LineType.Title:
                    hymn = new Hymn(text);
                    hymns.Add(hymn);
                    break;
                case LineType.Verse:
                    if (verse == null) verse = hymn.CreateVerse();
                    verse.Add(text);
                    break;
                default:
                    verse = null;
                    break;
            }
        }
        return hymns;
    }

    private static LineType ParseLine(string line, out string text)
    {
        text = "";
        if (string.IsNullOrWhiteSpace(line)) return LineType.Unkown;
        var array = line.Split(new[] { ' ' }, StringSplitOptions.RemoveEmptyEntries);
        if (array.Length < 2) return LineType.Unkown; 
        int n;
        if (int.TryParse(array[0], out n))
        {
            text = string.Join(" ", array, 1, array.Length - 1).Trim();
            return LineType.Title;
        }
        text = string.Join(" ", array).Trim();
        return LineType.Verse;
    }

    private enum LineType
    {
        Unkown,
        Title,
        Verse
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T00:15:52.090

这是我在 Shawn McLean 的帮助下得出的最终解决方案。

 ````
namespace HymmParser
{
class Program
{
    const string TITLE_REGEX = @"\s*\d+\s{2,}[a-zA-Z]+";

    static void Main(string[] args)
    {
        var hymns = new List<Hymn>();
        //read the file
        string[] lines = System.IO.File.ReadAllLines(@"C:\HymnWords.txt");

        for (int i = 0; i < lines.Count(); i++)
        {
            //regex to check for a white space, a number, 2 or more white spaces then words after.
            if (Regex.IsMatch(lines[i], TITLE_REGEX))
            {
                var hymn = new Hymn
                {
                    //TODO: Add your title parse logic here.
                    Title = lines[i]
                };

                //find verses under this hymn
                for (i++; i < lines.Count(); i++)
                {
                    //ensure this line is not a title, else break out of it.
                    if (Regex.IsMatch(lines[i], TITLE_REGEX))
                    {
                        break;
                    }

                    //if number only found, this is the start of a verse
                    if (Regex.IsMatch(lines[i], @"^\s*\d+$"))
                    {
                        var verse = new Verse(int.Parse(lines[i]));

                        //gather up verse lines
                        for (i++; i < lines.Count(); i++)
                        {
                            //if number only, break.
                            if (Regex.IsMatch(lines[i], @"\s*\d+"))
                            {
                                //backup and break, outer loop will increment and miss this new verse
                                i--;
                                break;
                            }
                            else if (string.IsNullOrWhiteSpace(lines[i]))
                            {
                                //if whitespace, then we may have finished the verse, break out
                                break;
                            }
                            else
                            {
                                verse.VerseLines.Add(lines[i]);
                            }
                        }
                        hymn.Verses.Add(verse);
                    }
                }
                hymns.Add(hymn);
            }
        }
        foreach (var hymn in hymns)
        {
            Console.WriteLine(hymn.Title);
            foreach (var verse in hymn.Verses)
            {
                Console.WriteLine(verse.VerseNumber);
                foreach (var line in verse.VerseLines)
                {
                    Console.WriteLine(line);
                }
            }
            Console.WriteLine("\n");
        }

        Console.WriteLine("Hymns Found: {0}", hymns.Count);

        Console.ReadLine();

    }
}

public class Hymn
{
    public Hymn()
    {
        Verses = new List<Verse>();
    }
    public string Title { set; get; }
    public List<Verse> Verses { set; get; }
}

public class Verse
{
    public Verse(int verseNumber)
    {
        VerseNumber = verseNumber;
        VerseLines = new List<string>();
    }
    public int VerseNumber { get; private set; }
    public List<string> VerseLines { set; get; }
} 
```

}`

# java - 在多个范围之间生成随机数

> ID：15591173
> 
> 赞同：7
> 
> 时间：2013-03-23T19:32:42.417
> 
> 标签：java, random, range

我了解如何制作一个介于两个数字之间的随机数：

```
1 + (int)(Math.random() * ((10 - 1) + 1)) 
```

或者

```
min + (int)(Math.random() * ((max - min) + 1)) 
```

但是我该如何去生成一个属于多个范围的随机数呢？

例如：数字可以介于 1 到 10 或 50 到 60 之间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T19:40:42.890

我会选择这样的东西，让你可以用尽可能多的范围来做：

```
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

class RandomInRanges
{
    private final List<Integer> range = new ArrayList<>();

    RandomInRanges(int min, int max)
    {
        this.addRange(min, max);
    }

    final void addRange(int min, int max)
    {
        for(int i = min; i <= max; i++)
        {
            this.range.add(i);
        }
    }

    int getRandom()
    {
        return this.range.get(new Random().nextInt(this.range.size()));
    }

    public static void main(String[] args)
    {
        RandomInRanges rir = new RandomInRanges(1, 10);
        rir.addRange(50, 60);
        System.out.println(rir.getRandom());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T19:40:38.493

首先生成一个介于 1 和 20 之间的整数。然后如果该值大于 10，则映射到第二个区间。

```
Random random = new Random();

for (int i=0;i<100;i++) {
    int r = 1 + random.nextInt(60-50+10-1);
    if (r>10) r+=(50-10);
    System.out.println(r);      
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-23T19:43:17.297

首先，您需要知道每个范围内有多少个数字。（我假设您从离散范围中选择整数，而不是从连续范围中选择实数值。）在您的示例中，第一个范围中有 10 个整数，第二个范围中有 11 个。这意味着 10/21 次，您应该从第一个范围中选择，而 11/21 次则从第二个范围中选择。在伪代码中

```
x = random(1,21)
if x in 1..10
   return random(1,10)
else
   return random(50,60) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T20:11:24.547

以下方法怎么样：随机选择一个范围并使用该范围来生成随机数，因为您必须将范围放在某个列表或数组中

```
public class RandomRangeGenerator {

    class Range {
        public int min, max;
        public Range(int min, int max) { this.min = min; this.max = max; }
    }

    @Test
    public void generate() {
        List<Range> ranges = new ArrayList<>();
        ranges.add(new Range(1, 10));
        ranges.add(new Range(50, 60));
        List<Integer> randomNumbers = generateRandomNumbers(ranges, 10);
        System.out.println(randomNumbers.toString());
        for(Integer i : randomNumbers) {
            Assert.assertTrue((i >= 1 && i <= 10) || (i >= 50 && i <= 60));
        }
    }

    private List<Integer> generateRandomNumbers(List<Range> ranges, int numberOfNumbers) {
        List<Integer> randomNumbers = new ArrayList<>(numberOfNumbers+1);
        while(numberOfNumbers-- > 0) {
            Range range = ranges.get(new Random().nextInt(ranges.size()));
            randomNumbers.add(range.min + (int)(Math.random() * ((range.max - range.min) + 1)));
        }
        return randomNumbers;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T20:03:29.890

如果该列表已知，我认为您可以使用类似的东西。

```
public class Test
{
    public static void main(String[] args)
    {
        int a;
       for(int i=0;i<10;i++)
      {
            a=(int) (Math.random()*((10-0)+(60-50)));

            if(a<=10)
            {

            }
            else if(a>(60-50))
            {
                a=a+50;
        }
            System.out.println(a);
       }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-13T19:00:54.390

要生成两个范围之间的数字，将可能性的总数相加。1 - 10 给我们 10 和 50 - 60 给我们另外 11，所以总共 21。然后，生成一个介于 1 - 21 之间的随机数。

```
int rn = (int)(1 + (Math.random() * 21)); 
```

如果随机数在 1 到 10 之间，那很容易，你有你的号码。如果它在 11 - 21 之间，那么你必须做一些工作。首先，您可以使用模数来获取 50 - 60 之间数字的索引。由于该范围内有 11 个可能的值，因此将随机数乘以 11 并加 50。

```
if (rn > 10) {
    rn %= 11;
    rn += 50;
}

System.out.println(rn); 
```

这将打印介于 1 - 10 和 50 - 60（含）之间的值。

# java - 如何将原始数组的正值返回到新数组中

> ID：15591177
> 
> 赞同：0
> 
> 时间：2013-03-23T19:33:09.293
> 
> 标签：java, arrays

我应该声明一个 15 整数数组并返回包含原始数组的正整数的第二个数组。我无法从该方法返回第二个数组。

```
 import java.util.Scanner;
    public class array4
    {
      public static void main(String [] args)
      {
        int [] num = new int[15]; int [] positives = new int [15];
        getInput(num);
        positives = getPositives(num);
        printResults(num, positives);
      }
      public static void getInput(int [] num){
        int x;
        Scanner kbd = new Scanner(System.in);
        System.out.println("Enter 15 integers");
        for(x = 0; x < 15; x++)
    num[x] = kbd.nextInt();

   }
  public static int getPositives(int [] num){
    int position = 0;  
    int [] positive = new int [15];
    for(int i =0; i < num.length; i++){  

      if(num[i] >=0) {
        positive[position] = num[i];  
        position++;  }}
    return positive;
  }

  public static void printResults(int [] num, int [] positives){
    System.out.println("You entered"); int x;
    for(x = 0; x < num.length; x++)
    System.out.println(num[x]);
    System.out.println("Your positive integers are ");
    for(x = 0; x < positives.length; x++)
    System.out.println(positives[x]);}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:35:13.587

它是`public static int[] getPositive()`。返回类型是一个整数数组，但您将其声明为`int`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:36:45.937

在`getPositive`你返回一个`int`而不是一个`int[]`

我认为你的方法是有缺陷的。

如果您创建一个`ArrayList`并将正数放入其中，然后将该列表转换为一个数组，那么您的数组中将没有任何空白位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T19:37:54.777

您需要声明 getPositive 以返回一个数组：

```
public static int[] getPositive(int [] num){ 
```

此外，您不需要`positive`在`main()`方法中进行初始化。那只是分配一个将被丢弃的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T19:40:24.463

您的方法必须返回整数数组而不是单个整数值。这是修改后的代码：

```
 public static int[] getPositive(int [] num){
int position = 0;  
int [] positive = new int [15];
for(int i =0; i < num.length; i++){  

  if(num[i] >=0) {
    positive[position] = num[i];  
    position++;  }}
return positive; // Wont give compilation error now 
```

}

# java - 使用 selenium web 驱动程序访问 excel 文件中的链接

> ID：15591180
> 
> 赞同：0
> 
> 时间：2013-03-23T19:33:44.420
> 
> 标签：java, eclipse, selenium, webdriver

我有一个 Excel 文件，我的所有链接都存储在一个列中。每行一个链接。例如：

www.example.com
www.test.com
www.demo.com

等等。我想要做的是访问每个链接并在 Firefox 中打开它。获取地址栏中的链接并将其与 Excel 单元格中的链接进行比较。如果两者相同，则在下一个单元格中设置字符串“Pass”，否则设置字符串“Fail”。我该怎么做呢。你能给我一个示例代码吗？我正在使用带有 java 的 selenium web 驱动程序。

这是我尝试过的：

```
try {
    FileInputStream file=new FileInputStream(new File(path));
    FileOutputStream outFile=new FileOutputStream(new File(path));
    HSSFWorkbook workbook=new HSSFWorkbook(file);
    HSSFSheet sheet=workbook.getSheetAt(0);
    HSSFCell cell=null;     
    int s=sheet.getLastRowNum()+1;
    for(int i=0; i<s; i++){
        cell=sheet.getRow(i).getCell(0);
        String url=cell.toString();
        driver.get(url);
        Thread.sleep(10000);
        String urlnew=driver.getCurrentUrl().toString();
        HSSFRow row=sheet.getRow(i);
        HSSFCell cellresult=row.createCell(1);
        if(url==urlnew){
            cellresult.setCellValue("Pass");
        }else{
            cellresult.setCellValue("fail");
        }
        workbook.write(outFile);
    }    
    file.close();  
    outFile.close();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T04:01:54.350

在您的代码中，您使用了以下语句来比较两个字符串。

```
if(url==urlnew) 
```

使用下面的代码。它会起作用的。

```
if(url.equals(urlnew)) 
```

有关字符串比较的更多信息，请查看[此](http://www.java-samples.com/showtutorial.php?tutorialid=221)链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:01:42.930

1.  驱动程序 = webdriver.Firefox();
2.  加载 Excel 文件（你可以使用[这个](https://stackoverflow.com/questions/1516144/read-write-excel-file-in-java)）
3.  在行循环中，添加以下代码： driver.get(<cell URL>);

# javascript - asp按钮默认点击

> ID：15591193
> 
> 赞同：0
> 
> 时间：2013-03-23T19:35:28.397
> 
> 标签：javascript, asp-classic, imagebutton

我正在使用 asp classic，我有 2 个表单，form1 有一个按钮，如果用户按下它会转到 form2，并且必须按下另一个名为“consultar”的按钮，但我想按下第一个按钮，去对form2的动作没有按2nd。按钮“顾问”，我尝试过 onClick 事件，但不起作用，我需要该按钮充当按下并显示类似已按下的内容。你能帮我吗？有一个javascript函数吗？这是我的代码：

```
<a href="index.asp?ia=100&r=g"  onmouseout="MM_swapImgRestore();" 
onmouseover="MM_swapImage('selector_r3_c2','','img/selector_r3_c2_s2.png',1);" >
<img name="selector_r3_c2" src="img/selector_r3_c2.png" width="168" height="55" 
id="selector_r3_c2" alt="" /></a>
<input name="btConsultar" type="hidden" value="Consultar" onkeypress="Selected"  /></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T01:17:47.713

我不了解 javascript，但您应该能够使用经典的 asp 和表单变量和逻辑语句来做一些事情。例如表格 1 可能有一个隐藏属性

```
<input type="hidden" name="buttonpressed" value="1" /> 
```

然后你可以有一个表格 2 中的图像按钮，如下所示

```
<%  if request.form("buttonpressed") = 1 then
    submitbutton = "pressed.gif"
    else
    submitbutton = "unpressed.gif"
    End If %>

<input type="image" src="<%=submitbutton%>" name="Consultar" /> 
```

# css - 跨浏览器 - 我的按钮有美学缺陷

> ID：15591194
> 
> 赞同：0
> 
> 时间：2013-03-23T19:35:34.963
> 
> 标签：css, cross-browser

我正在尝试制作语言按钮。

第一个问题是圆形背景，解决了这个问题。第二个问题是背景动画，解决了这个问题。

现在在 FF 中，按钮在悬停时有一条丑陋的线条。

链接在这里。

[我正在处理的代码](http://edizarca.com/karpaz/)

任何人都可以向我解释一下，这里出了什么问题，所以我可以尝试修复它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:46:25.747

将此添加到您的样式中：

```
#languages li a.selected {
background: yellow;
} 
```

这也应该为圆圈的中间着色。

考虑到 FF 问题，我无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:47:47.370

`.selected`通过赋予其重要性来强制应用样式。

```
background: #FFF600 !important; 
```

由于 Firefox 有显示问题`box-shadow`，请`border`改用。

```
border: 0.5em solid #FFF600; 
```

见[演示](http://jsfiddle.net/aJv2w/2/)。

还修复了许多其他问题，包括：

```
#languages li { display: inline-block; width: 45px; } 
```

因为边框占用了一些空间，并`display:block;`从`#languages li a`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T21:52:04.693

当您使用某些属性（如**box-shadow）**时，您也应该使用**-moz-box-shadow**并使用相同的参数。像使用 webkit 一样使用它，只是用 moz 代替。尝试添加**-moz-border-radius**

另外，试试背景剪辑？

```
 -webkit-background-clip: padding-box; 
    -moz-background-clip:    padding; 
    background-clip:         padding-box; 
```

# javascript - 循环内部的闭包 - 为数组中的每个元素创建一个链接和链接函数

> ID：15591195
> 
> 赞同：0
> 
> 时间：2013-03-23T19:35:34.753
> 
> 标签：javascript

我正在开发一个 JavaScript Web 应用程序，它将一组（堆栈）的抽认卡存储在一个数组中。

现在我遇到了循环内的闭包问题。我查看了这个示例（[https://stackoverflow.com/a/15466863/1822824](https://stackoverflow.com/a/15466863/1822824)）并尝试实现类似的东西，但我收到一个错误：“TypeError：'null'不是对象（评估'document.getElementById（temp )')”。

Web 应用程序应将所有抽认卡组（堆栈）列为链接，当您单击链接时，它会提醒您单击的抽认卡堆栈的名称。一切正常，直到我尝试添加提醒您的链接部分。

小提琴：http: [//jsfiddle.net/xmYug/](http://jsfiddle.net/xmYug/)

下面是我的代码：

```
<p>
<strong>Flashcard Stack Name:</strong>
<input type="text" id="textStackName">
</p>
<p>
<strong>Enter one flashcard per line, seperate the front and back of each flashcard with a comma:</strong><br>
<textarea name="textarea" id="textareaFlashcards" cols="45" rows="15"></textarea> 
</p>
<p>
<input type="submit" id="buttonSubmit" value="Submit">
</p>
<div id="allStacks">
</div>

<script>
var funcs = [];

function createfunc(i) {
    var temp = "link" + i;

    return document.getElementById(temp).onclick = function() {
        // Alert the user of the stack name they just clicked on
        alert("Stack name: " + allStacks[i].stackName);
    };
}

/* Constructors */
// Constructs a new stack of flashcards - a stack of flashcards is usually about a single topic such as States & Capitals
function newStackConstructor(stackName) {
    this.stackName = stackName;
    this.stack = new Array();
}

// Constructs a new flashcard - a stack can have an unlimited number of flashcards
function newFlashcardConstructor(flashcardFront, flashcardBack) {
    this.flashcardFront = flashcardFront;
    this.flashcardBack = flashcardBack;
}

// Contains all of the flashcard stacks
var allStacks = new Array();

// SAMPLE DATA //////////////////////////////////////////////////////////////////////
// Make a test stack
allStacks.push(new newStackConstructor("States & Capitals"));

// Test data
allStacks[0].stack.push(new newFlashcardConstructor("Alabama", "Montgomery"));
allStacks[0].stack.push(new newFlashcardConstructor("Alaska", "Juneau"));
allStacks[0].stack.push(new newFlashcardConstructor("Arizona", "Phoenix"));
////////////////////////////////////////////////////////////////////////

buttonSubmit.onclick = function () { 
    newFlashcardStack();
};

// Make a new flashcard stack
function newFlashcardStack() {
    allStacks.push(new newStackConstructor(textStackName.value));

    var textareaFlashcardsTemp = textareaFlashcards.value;

    // Split flashcards by line break
    var flashcards = textareaFlashcardsTemp.split("\n");

    for (var i = 0; i < flashcards.length; i++) {

        // Split front & back of flashcards by comma
        flashcard = flashcards[i].split(",");

        allStacks[(allStacks.length - 1)].stack.push(new newFlashcardConstructor(flashcard[0], flashcard[1]));
    }

    // Update stack display to display all of the stacks and the new stack
    displayAllStacks();
}

// Display all flashcard stacks
function displayAllStacks() {
    // Clear stack display
    document.getElementById("allStacks").innerHTML = "";

    for (var i = 0; i < allStacks.length; i++) {
        funcs[i] = createfunc(i);

        document.getElementById("allStacks").innerHTML += '<p><a href="#" id="link' + i + '">' + allStacks[i].stackName + '</a></p>';
    }
}

displayAllStacks();
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:37:07.843

我不确定为什么您分配单击处理程序的闭包返回该处理程序，并将它们全部存储在该`funcs`数组中。

然而，随着

```
funcs[i] = createfunc(i);
document.getElementById("allStacks").innerHTML += '<p><a href="#" id="link' + i + '">' + allStacks[i].stackName + '</a></p>'; 
```

您甚至在创建该元素之前就尝试创建*和分配处理函数。*然而，

```
document.getElementById("allStacks").innerHTML += '<p><a href="#" id="link' + i + '">' + allStacks[i].stackName + '</a></p>';
funcs[i] = createfunc(i); 
```

不会工作得那么好，因为通过分配给`innerHTML`您*覆盖*当前的 DOM 并创建没有分配任何事件处理程序的新链接。相反，使用

```
var display = document.getElementById("allStacks");
display.innerHTML = "";
for (var i=0; i<allStacks.length; i++) {
    var p = document.createElement("p");
    var a = document.createElement("a");
    p.appendChild(a);
    a.appendChild(document.createTextNode(allStacks[i].stackName));
    a.href="#";
    // a.id = "link"+i; is not necessary
    var func = (function(i) {
        return function() {
            // Alert the user of the stack name they just clicked on
            alert("Stack name: " + allStacks[i].stackName);
        };
    })(i);
    // funcs[i] = func; if you want that
    a.onclick = func;

    display.appendChild(p);
} 
```

# java - 游戏框架中同一实体类的一对多

> ID：15591198
> 
> 赞同：2
> 
> 时间：2013-03-23T19:35:42.307
> 
> 标签：java, playframework, playframework-2.0, playframework-2.1, ebean

再会！我试图通过总是得到一个错误来保存我的实体模型

```
Error inserting bean [class models.CategoryEntity] with unidirectional relationship. For inserts you must use cascade save on the master bean [class models.CategoryEntity].] 
```

这是我的课

```
@Entity
public class CategoryEntity extends Model {
    @Id
    private String categoryId;

    private String Name;
    private Integer level;

    @OneToMany(targetEntity = CategoryEntity.class, cascade = CascadeType.ALL)
    private List<CategoryEntity> categories;
//GETERS SETRES
} 
```

我试图保存标题类别，但错误是一样的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T12:08:01.087

如果我正确理解了这个问题并且您想要的是每个 CategoryEntity 包含其他 CategoryEntities 的列表，那么会想到 2 种可能的方法（尽管它们都没有使用 @OneToMany）：

**方法 1：**
您可以创建 @ManyToMany 关系并在命名其键时定义 @JoinTable：

```
@Entity
public class CategoryEntity extends Model {
    @Id
    private String categoryId;

    private String name;
    private Integer level;

    @ManyToMany(cascade=CascadeType.ALL)
    @JoinTable(         name = "category_category",
                 joinColumns = @JoinColumn(name = "source_category_id"), 
          inverseJoinColumns = @JoinColumn(name = "target_category_id"))
    public List<CategoryEntity> category_entity_lists = new ArrayList<CategoryEntity>();
} 
```

**方法 2：**
或者您可以为类别实体列表创建一个新实体并创建 @ManyToMany 关系，例如：

```
@Entity
public class CategoryList extends Model
{
    @Id
    public Long id;

    @ManyToMany
    @JoinTable(name="categorylist_category")
    public List<CategoryEntity> category_list = new ArrayList<CategoryEntity>();
} 
```

然后在你的模型中：

```
@Entity
public class CategoryEntity extends Model {
    @Id
    private String categoryId;

    private String name;
    private Integer level;

    @OneToOne
    public CategoryList this_category_list;

    @ManyToMany(mappedBy="category_list")
    public List<CategoryList> in_other_category_lists = new ArrayList<CategoryList>();
} 
```

没有测试代码，但这应该做的是每个 CategoryEntity 可以是几个 CategoryLists 的一部分。每个 CategoryList 包含一个 CategoryEntities 列表。

您必须初始化 this_category_list 并将 CategoryEntities 添加到其 category_list 字段。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-24T23:51:52.680

你的模型没有意义。为什么将类本身作为类属性？

列表不应属于同一类

# vba - 通过 vba 从 excel 粘贴到 powerpoint 时出现 ActiveX 错误

> ID：15591200
> 
> 赞同：0
> 
> 时间：2013-03-23T19:35:45.670
> 
> 标签：vba, excel, powerpoint

我正在研究一个宏，它根据输入到 excel 中的数据构建简报模板

我收到错误：ActiveX 组件无法创建对象或返回对此对象的引用（错误 429）

由于它们是需要在几张幻灯片上创建的各种对象，因此我编写了一个子例程，可以根据在 excel 文件中设置的一些设置为每个对象重复使用

这是运行的子程序

它在粘贴函数本身上出错，将鼠标悬停在该行内的变量上会给我所需的正确值。我已经对它自己进行了测试，它可以很好地处理它接收到的值。我还检查以确保这些值是从 excel 中复制的，并且确实如此。

我对此感到不知所措。

```
Private Sub AddShape(vSummary As Boolean, vSheet As String, vRange As String, vFirstSlide As Integer, vLastSlide As Integer, vTop As Double, vLeft As Double)
Dim Sld As Integer
'Copy specified cells
    WB.Sheets(vSheet).Range(vRange).Copy
'Paste to first required slide for the specified cell group
    ActivePresentation.Slides(vFirstSlide).Shapes.PasteSpecial (ppPasteEnhancedMetafile)
'Set the specified top position
    ActiveWindow.Selection.ShapeRange.Top = (vTop * vDPI)
'Center everything before we begin
    ActiveWindow.Selection.ShapeRange.Align msoAlignCenters, True
    ActiveWindow.Selection.ShapeRange.Align msoAlignMiddles, True
'Determine if Left position needs set'
    If vLeft Then
       ActiveWindow.Selection.ShapeRange.Left = (vLeft * vDPI)
    End If
'If contents is a Summary
    If vSummary Then
'While we still have it selected
        With ActiveWindow.Selection.ShapeRange
            .LockAspectRatio = msoTrue  'Lock Aspect Ratio
            .Width = (10 * vDPI)        'Reszie to fit slide'
            .Ungroup                    'Ungroup to make it easier to edit manually'
        End With
    Else
        'Ungroup to make it easier to edit manually then copy it to paste it to all the required slides
        ActiveWindow.Selection.ShapeRange.Ungroup.Copy
        'We pasted one already so we need to set the new first slide to the second in the series of slides to recieve the current content
        vFirstSlide = vFirstSlide + 1
        'For the specified remaineder of the slides we paste the contents we just copied.
        'NOTE: this only works if the contents are to be placed on a concurrent set of slides. this will break if the content you are adding requires random placements in the templates
        For Sld = vFirstSlide To vLastSlide
            ActivePresentation.Slides(Sld).Shapes.Paste
        Next Sld
    End If
End Sub 
```

我从以下子程序调用

```
Sub BuildTemplate()

'Set Global Variables
Set WB = Workbooks("tool.xlsm")             'Set this to the name of the excel file
Set Settings = WB.Sheets("SETTINGS")        'Set this to the name of the settings tab
Set Build = WB.Sheets("BUILD")              'Set this to the name of the build tab
Set Entry = WB.Sheets("ENTRY")              'Set this to the name of the entry tab

    vDPI = Settings.Cells(2, "B").Value

'Adjust column sizes
    Build.Columns(2).AutoFit
    Build.Columns(4).AutoFit
    Build.Columns(6).AutoFit
    Build.Columns(8).AutoFit

'Create Template Files
MoveFiles
'Open newly created Template File
Dim PPT As PowerPoint.Application
Set PPT = New PowerPoint.Application
    PPT.Visible = True
    PPT.Presentations.Open Filename:=vNewPrimaryTemplatePath
'Add Title Block
Call AddShape(False, "BUILD", CStr(Settings.Range("E2")), CInt(Settings.Range("E3")), CInt(Settings.Range("E4")), CDbl(Settings.Range("E5")), CDbl(Settings.Range("E6")))

'Add Delivery Block
Call AddShape(False, "BUILD", CStr(Settings.Range("E9")), CInt(Settings.Range("E10")), CInt(Settings.Range("E11")), CDbl(Settings.Range("E12")), CDbl(Settings.Range("E13")))

'Add Address Block
Call AddShape(False, "BUILD", CStr(Settings.Range("E16")), CInt(Settings.Range("E17")), CInt(Settings.Range("E18")), CDbl(Settings.Range("E19")), CDbl(Settings.Range("E20")))

'Add Items
Call AddShape(False, "BUILD", CStr(Settings.Range("H2")), CInt(Settings.Range("H16")), CInt(Settings.Range("H17")), CDbl(Settings.Range("H12")), CDbl(Settings.Range("H10")))
Call AddShape(False, "BUILD", CStr(Settings.Range("H3")), CInt(Settings.Range("H16")), CInt(Settings.Range("H17")), CDbl(Settings.Range("H13")), CDbl(Settings.Range("H10")))
Call AddShape(False, "BUILD", CStr(Settings.Range("H4")), CInt(Settings.Range("H16")), CInt(Settings.Range("H17")), CDbl(Settings.Range("H14")), CDbl(Settings.Range("H10")))
Call AddShape(False, "BUILD", CStr(Settings.Range("H5")), CInt(Settings.Range("H16")), CInt(Settings.Range("H17")), CDbl(Settings.Range("H15")), CDbl(Settings.Range("H10")))
Call AddShape(False, "BUILD", CStr(Settings.Range("H6")), CInt(Settings.Range("H16")), CInt(Settings.Range("H17")), CDbl(Settings.Range("H12")), CDbl(Settings.Range("H11")))
Call AddShape(False, "BUILD", CStr(Settings.Range("H7")), CInt(Settings.Range("H16")), CInt(Settings.Range("H17")), CDbl(Settings.Range("H13")), CDbl(Settings.Range("H11")))
Call AddShape(False, "BUILD", CStr(Settings.Range("H8")), CInt(Settings.Range("H16")), CInt(Settings.Range("H17")), CDbl(Settings.Range("H14")), CDbl(Settings.Range("H11")))
Call AddShape(False, "BUILD", CStr(Settings.Range("H9")), CInt(Settings.Range("H16")), CInt(Settings.Range("H17")), CDbl(Settings.Range("H15")), CDbl(Settings.Range("H11")))

'Add Summaries
    AddSummary

'Save & Close
    ActivePresentation.SaveAs Filename:=vNewPrimaryTemplatePath, FileFormat:=ppSaveAsDefault
    ActivePresentation.Close

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T09:12:06.017

我设法弄清楚这一切并让它正常工作。

这是一个范围问题，子过程中的 ActivePresentation 无法访问 powerpoint 应用程序。使 PPT 对象全局化并使用 Active 演示文稿的前面使其能够工作。

正如 ElectricLlama 所指出的，它们是一些对象问题。这是子程序的最终重写

```
Private Sub AddShape(vSummary As Boolean, vSheet As String, vRange As String, Optional vFirstSlide As Integer, Optional vLastSlide As Integer, Optional vTop As Double, Optional vLeft As Variant = "Centered")
Dim Sld As Integer
Dim oSlide As Slide
Dim oShape As Object

'Copy specified cells
    WB.Sheets(vSheet).Range(vRange).Copy
'Paste to first required slide for the specified cell group
Set oSlide = PPT.ActivePresentation.Slides(vFirstSlide)
Set oShape = oSlide.Shapes.PasteSpecial(ppPasteEnhancedMetafile)
'Center everything before we begin
    oShape.Align msoAlignCenters, True
    oShape.Align msoAlignMiddles, True
'Set the specified top position
    oShape.Top = (vTop * vDPI)
'Determine if Left position needs set'
    If vLeft = "Centered" Then
        oShape.Align msoAlignCenters, True
    Else
        oShape.Left = (vLeft * vDPI)
    End If
'If contents is a Summary
    If vSummary Then
'While we still have it selected
        With oShape
            .LockAspectRatio = msoTrue  'Lock Aspect Ratio
            .Width = (10 * vDPI)        'Reszie to fit slide'
            .Ungroup                    'Ungroup to make it easier to edit manually'
        End With
    Else
        'Ungroup to make it easier to edit manually then copy it to paste it to all the required slides
        oShape.Ungroup.Copy
        'We pasted one already so we need to set the new first slide to the second in the series of slides to recieve the current content
        vFirstSlide = vFirstSlide + 1
        'For the specified remaineder of the slides we paste the contents we just copied.
        'NOTE: this only works if the contents are to be placed on a concurrent set of slides. this will break if the content you are adding requires random placements in the templates
        For Sld = vFirstSlide To vLastSlide
            PPT.ActivePresentation.Slides(Sld).Shapes.Paste
        Next Sld
    End If

End Sub 
```

# html - 在什么情况下更喜欢使用 CSS 显示：表格属性而不是 HTML 表格？

> ID：15591204
> 
> 赞同：2
> 
> 时间：2013-03-23T19:36:08.777
> 
> 标签：html, css

[我在这里](http://css-tricks.com/almanac/properties/d/display/)阅读了`display: table`,`display: table-cell`等内容，但没有详细说明何时使用这些属性比使用 HTML 表格元素更可取。我很好奇在什么情况下 CSS 显示：表格属性会更好。

编辑：这个问题已被标记为与此重复：[CSS 显示表与普通 HTML 表](https://stackoverflow.com/questions/7988203/css-display-table-vs-normal-html-table)，但实际上很少有关于为什么提出问题的人不想使用 HTML 表的信息。它正在对如何使用 display:table 属性进行故障排除。

# c++ - c++ 向量迭代器到函数模板

> ID：15591206
> 
> 赞同：1
> 
> 时间：2013-03-23T19:36:23.563
> 
> 标签：c++, vector, stl, iterator, parameter-passing

我是 STL 的新手。我正在尝试编写一个以向量迭代器为参数的例程。即，我需要传递vector.begin() 和vector.end()。无法弄清楚为什么我的代码不起作用：

```
template<typename T, typename Iter> void VectorQuickSort(Iter itL, Iter itR){
    const int nSize = (itR - itL);
    if(nSize<2) return;
    Iter iBeginning(itL), iEnd(itR);
    --itR;
    T tPivot = *( itL + (nSize/2) );
    while( itL <= itR ){
        while( *itL < tPivot ) ++itL;
        while( *itR > tPivot ) --itR;
        if( itL <= itR ){
            std::iter_swap(itL,itR);
            ++itL;
            --itR;
        }
   }
   VectorQuickSort(iBeginning,itR);
   VectorQuickSort(itL,iEnd);
} 
```

在`main()`我简单地调用`VectorQuickSort(vInput.begin(),vInput.end());`. 编译器告诉我`error: no instance of function template "VectorQuickSort" matches the argument list`。任何帮助表示赞赏:)

编辑：作为对可能尝试使用上述代码的人的警告：即使您应用提供的答案，排序算法本身仍然存在问题。我未能将正常工作的 C 版本翻译成 STL 风格。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:39:28.097

它不能`T`从这些参数中推断出模板参数。事实上，你甚至不需要`T`. 这是多余的，因为您可以计算出`T`from的类型`Iter`——毕竟，迭代器会迭代 type 的元素`T`。将其更改为：

```
template<typename Iter> 
```

然后，如果您使用的是 C++11，则可以更改`T`用于自动推断类型的行`tPivot`：

```
auto tPivot = *( itL + (nSize/2) ); 
```

如果您没有 C++11 支持，则可以改为使用[`std::iterator_traits`](http://en.cppreference.com/w/cpp/iterator/iterator_traits)来确定适当的类型：

```
typename std::iterator_traits<Iter>::value_type tPivot = *( itL + (nSize/2) ); 
```

你也许可以用一个来简化这个`typedef`：

```
typedef typename std::iterator_traits<Iter>::value_type value_type;
value_type tPivot = *( itL + (nSize/2) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:38:14.213

您需要在`VectorQuickSort<int,/*iterator type*/>(vInput.begin(),vInput.end());`上面编写或任何您希望模板化的内容，请注意您提到它是在 T 上模板化的，但是该函数无法推断 T 模板化的位置/方式...删除 T 并使用 auto 或告诉函数T是如何模板化的

# netbeans-platform - netbeans Topcomponent 打开两次

> ID：15591207
> 
> 赞同：0
> 
> 时间：2013-03-23T19:36:26.333
> 
> 标签：netbeans-platform

我有一个`TopComponent`以模式显示的`properties`。有两种方法可以打开它。

1.  通过窗口/顶部组件打开操作
2.  打开一个文件，顶部的组件会自动打开。

我正在使用这样的注释配置第一个操作。

```
@ActionID(category = "Window", id = "org.netbeans.modules.plantumlnb.PUMLTopComponent")
@ActionReference(path = "Menu/Window" /*, position = 333 */)
@TopComponent.OpenActionRegistration( displayName = "#CTL_PUMLAction",
    preferredID = "PUMLTopComponent") 
```

我正在手动创建一个新的`TopComponent`并调用`open`它以启用第二个操作。

```
 SwingUtilities.invokeLater(new Runnable(){
        @Override
        public void run() {
            PUMLTopComponent pumltc = new PUMLTopComponent();                
            pumltc.open();
            pumltc.setNewContent(obj);
        }
    }); 
```

当用户打开一个文件时，第二个代码片段会打开一个 PUMLTopComponent 的实例。但是，如果用户现在去点击窗口/打开操作，则会打开第二个窗口。

如何使用 netbeans 注册手动实例化的 TopComponent 实例，以便当用户单击 Window/open 操作时，netbeans 使用上述实例而不是创建一个新实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T15:27:21.067

如果您在整个应用程序中只需要一个 TopComponent 实例，您可以简单地将其设为单例，然后在代码中的任何位置使用静态方法获取该实例。

PUMLTopComponent.java：

```
private static PUMLTopComponent instance;

public PUMLTopComponent() {
    initComponents();
    // your stuff
    instance = this;
}

public static PUMLTopComponent getInstance() {
    return instance;
} 
```

然后在你的行动中：

```
SwingUtilities.invokeLater(new Runnable(){
    @Override
    public void run() {
        PUMLTopComponent pumltc = PUMLTopComponent.getInstance();                
        pumltc.open();
        pumltc.requestActive(); //you might also need to call this
        pumltc.setNewContent(obj);
    }
}); 
```

这就是我个人的做法，到目前为止效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T20:02:14.910

问题是 TopComponent 上的注释。

```
@ActionID(category = "Window", id = "org.netbeans.modules.plantumlnb.PUMLTopComponent")
@ActionReference(path = "Menu/Window" /*, position = 333 */) 
```

我删除了这些注释。我假设注解每次都实例化一个新的 TopComponent 并且我无法告诉注解调用该`getInstance`方法而不是每次都实例化它。

然后我实现了一个自定义操作，然后将该操作连接到在 topcomponent 上调用 open ，如下所示。这似乎已经解决了这个问题。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package org.netbeans.modules.plantumlnb;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import org.openide.awt.ActionID;
import org.openide.awt.ActionReference;
import org.openide.awt.ActionReferences;
import org.openide.awt.ActionRegistration;
import org.openide.util.NbBundle.Messages;

@ActionID(
        category = "Window",
        id = "org.netbeans.modules.plantumlnb.PUMLViewAction")
@ActionRegistration(
        iconBase = "org/netbeans/modules/plantumlnb/icon.png",
        displayName = "#CTL_PUMLViewAction")
@ActionReferences({
    @ActionReference(path = "Menu/Window/Other", position = 1050),
    @ActionReference(path = "Shortcuts", name = "DS-P"),
    @ActionReference(path = "Shortcuts", name = "DS-U")
})
@Messages("CTL_PUMLViewAction=Plant UML")
public final class PUMLViewAction implements ActionListener {

    @Override
    public void actionPerformed(ActionEvent e) {
        PUMLTopComponent pumlTopComponent = PUMLTopComponent.getInstance();
        pumlTopComponent.open();
    }
} 
```

**编辑**

Netbeans 在 Netbeans 7.3 的第一个补丁中添加了对单例 TopComponents 的支持。

[支持单例 TopComponents - @FactoryMethod](https://netbeans.org/bugzilla/show_bug.cgi?id=227050)

# java - 安卓定位问题

> ID：15591209
> 
> 赞同：1
> 
> 时间：2013-03-23T19:36:34.250
> 
> 标签：java, android, location

嗨，我正在尝试使用设备网络或 wifi 连接在 android 中使用 Location api 获取设备位置。然而，它似乎没有得到纬度或经度。

我创建了一个位置提供者和管理器，并注册了一个位置监听器。

我然后

推出

```
locationManagaer.requestLocationUpdates(locationProvide.getName(),TIME_INTERVAL, DISTANCE, this); 
```

从那时起，该应用程序根本不会检索新的位置更改。我错过了什么？

这是我的用户位置代码

```
public class UserLocation implements LocationListener{

    public static final int UPDATE_LATT = 0;

    private static final int TIME_INTERVAL = 1000;

    private static final int DISTANCE = 10;

    private LocationManager locationManagaer;

    private LocationProvider locationProvide;

    private Handler mHandler;

    public UserLocation(Context context, Handler handler){
        locationManagaer = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
        locationProvide = locationManagaer.getProvider(LocationManager.NETWORK_PROVIDER);

        mHandler = handler;

    }

    public void startSearchLocation(){
        Log.d("", "sart location search");
        locationManagaer.requestLocationUpdates(locationProvide.getName(),TIME_INTERVAL, DISTANCE, this);
    }

    @Override
    public void onLocationChanged(Location location) {
        Log.d("", "location update on " + location.getLongitude());
        Message.obtain(mHandler,UPDATE_LATT, new Position(location.getLongitude(), location.getLatitude()));

    }

    @Override
    public void onProviderDisabled(String provider) {
        Log.d("", "onProviderDisabled");

    }

    @Override
    public void onProviderEnabled(String provider) {
        Log.d("", "onProviderEnabled");

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        Log.d("", "onStatusChanged");

    }

} 
```

这是我使用此类来设置和侦听新位置的活动

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mHandler = new Handler() {

        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            super.handleMessage(msg);
            position = (Position) msg.obj;

            Toast.makeText(
                    getApplicationContext(),
                    position.getLattitude() + " " + position.getLongetude(),
                    Toast.LENGTH_LONG).show();
        }

    };

    userLocation = new UserLocation(this, mHandler);

    initializeViews();

    userLocation.startSearchLocation();
} 
```

这是我的职位 POJO

```
public class Position {

    private double longetude;

    private double lattitude;

    public Position(){

    }

    public Position(double longetude, double lattitude){

    }

    public double getLongetude() {
        return longetude;
    }

    public void setLongetude(double longetude) {
        this.longetude = longetude;
    }

    public double getLattitude() {
        return lattitude;
    }

    public void setLattitude(double lattitude) {
        this.lattitude = lattitude;
    }

} 
```

这是我的清单文件的一部分

```
 <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.jr.haliotest.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" /> 
```

日志猫：

```
03-23 20:19:14.309: D/(16992): sart location search
03-23 20:19:14.384: E/(16992): file /data/data/com.nvidia.NvCPLSvc/files/driverlist.txt: not found!
03-23 20:19:14.384: I/(16992): Attempting to load EGL implementation /system/lib//egl/libEGL_tegra_impl
03-23 20:19:14.449: I/(16992): Loaded EGL implementation /system/lib//egl/libEGL_tegra_impl
03-23 20:19:14.514: I/(16992): Loading GLESv2 implementation /system/lib//egl/libGLESv2_tegra_impl 
```

如果有帮助，请在已扎根的 htc 上进行测试。wifi 开启，上帝信号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:57:04.803

如果您在建筑物内，那么您的设备可能无法连接到 GPS 提供商。我建议你搬到一个更开放的空间，这样你就能得到信号。

一个提示，如果设备已连接以接收 gps 信号。gps 的标志将停止闪烁并变为稳定状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:00:04.887

我将首先检查您的手机定位服务是否已启用，然后尝试重新启动。还可以尝试使用“GPS”而不是“网络”来查看问题是否与您的网络未提供位置信息有关。

根据我的经验，wifi 网络有时根本不会提供位置信息。我不确定蜂窝网络是否也是如此，但我怀疑无法保证。

# ruby-on-rails - Rails lib 加载顺序

> ID：15591211
> 
> 赞同：3
> 
> 时间：2013-03-23T19:36:43.113
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我的应用程序 lib 目录中有以下类：

代理.rb

```
class Proxy
end 
```

ga_proxy.rb

```
class GaProxy < Proxy
  include GaProxy::Metrics
end 
```

指标.rb

```
class GaProxy
  module Metrics
  end
end 
```

加载顺序在这里很重要：

metrics.rb 需要在 ga_proxy.rb 之前加载

proxy.rb 需要在 ga_proxy.rb 之前加载

但是，如果在 ga_proxy 之前加载了 metrics.rb，那么我会得到“GaProxy 类的超类不匹配”，因为已经在没有父类的情况下定义了 GaProxy。

我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:46:53.867

在您的`application.rb`文件中，按顺序指定要加载的每个文件：

```
config.autoload_paths += %W( #{config.root}/lib/proxy.rb, #{config.root}/lib/metrics.rb, #{config.root}/lib/ga_proxy.rb ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:47:09.053

通常，在 ruby​​ 中，您需要文件中的内容：

```
# ga_proxy.rb
require './proxy'
require './metrics'

class GaProxy < Proxy
  include GaProxy::Metrics
end 
```

这是假设文件位于同一目录中。当然，Rails 为您做了一些自动加载魔法，但您仍然可以明确说明您的需求。

**编辑**

您必须在以下位置指定超类`metrics.rb`：

```
# metrics.rb
class GaProxy < Proxy
  module Metrics
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T19:44:25.740

我从来没有遇到过这个问题，但为什么你不能在 config/initializers 中执行以下操作

创建一个文件 config/initializers/libs.rb

```
 require 'proxy'
 require 'ga_proxy'
 require 'metrics' 
```

# java - 波的解释

> ID：15591213
> 
> 赞同：1
> 
> 时间：2013-03-23T19:36:58.267
> 
> 标签：java, angle, wave, bearing, robocode

我刚开始尝试 Robocode 并阅读了有关 wave 的内容：[http ://robowiki.net/wiki/Wave](http://robowiki.net/wiki/Wave)

我不明白的是，为什么在这里使用圆圈。

我的意思是，当我射击子弹时，我只朝一个方向射击，而不是像使用圆圈时所暗示的那样朝各个方向射击。

任何人都可以尝试向我解释这种情况和那个概念吗？

我现在只是被卡住了..

谢谢，朱利安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:41:41.007

上面的答案触及了为什么波是一个有用的抽象的要点：作为一种优化收集会击中目标的射击角度，相对于直接向敌人射击。

波浪的另一种用途是躲避子弹的动作。当你看到敌人发射子弹时（通过监测它的能量），你知道子弹的来源和速度，但不知道它的确切位置，因为你看不到子弹。在这种情况下，波浪代表你对子弹的了解：它所有可能的位置。如果你被击中，你可以类似地推断出敌人使用的相对射击角度。稍后，您可以使用该数据来评估每个波浪上不同点的危险，并确定与波浪相交的最安全位置（也称为“波浪冲浪”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:58:43.207

看起来波浪方法意味着对天真的实现进行一些优化。然后，基本概念将是确定射弹通过目标*的时间点。*这可以简单地通过比较“波”从其原点（“ `wave_velocity * (time_now - time_fired)`”）传播的距离与目标到该波原点的距离来完成。

一旦两个距离相等（或波通过目标），就可以计算从波源到目标当前位置的方位，并将其与射弹的方位进行比较。如果这两个方位彼此足够接近，则认为目标被“击中”；否则会错过目标，并且可以忽略弹丸进行进一步计算。（假设目标不能比弹丸移动得更快。）

这方面的优化是，对于每个时间步，只需计算和比较几个距离以确定是否需要执行实际的“命中检查”。这样，射弹不需要精确地在两个（或三个）维度上进行跟踪，而只需在一个（距离）维度上进行跟踪，这可以节省大量的计算量。

# php - ajax 获取方法

> ID：15591215
> 
> 赞同：0
> 
> 时间：2013-03-23T19:37:27.473
> 
> 标签：php, ajax

更新...这是我从教程中实现的代码，在网络中的 chrome 开发工具中，我可以在标题中看到正在发送的变量，在预览中我可以看到下拉菜单，但它没有插入到加载中网页

```
<script type="text/javascript">
$(document).ready(function() {
    $('#selectEvidence').change(function(){
        alert($(this).val());
        });
    });  

function evidencesearch(str)
{
if (str=="")
  {
  document.getElementById("case").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("case").innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","searchfunction.php?variable="+str,true);
xmlhttp.send();
}       
</script>

<?php
$variable = $_GET['variable']; //used for second drop down menu
//echo "test test test $variable";

$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '';
$db = 'fid';

$conn = mysql_connect($dbhost,$dbuser,$dbpass);
if (!$conn)
die('Could not connect: ' . mysql_error());

mysql_select_db($db);

echo '<label class="input" for="case" type="input">Specify: </label><select id="case" name="case"><option=value"null"></option>'; //Insert to loaded page
$resource = mysql_query("SELECT $variable FROM `evidence`");
if($resource && mysql_num_rows($resource)) {
    while ($row = mysql_fetch_assoc($resource)){
         echo '<option value="'.$row[$variable].'">'.$row[$variable].'</option></select>';//Insert to loaded page
    }
}
mysql_close($conn)
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:57:11.910

我认为您的问题存在于 POST/GET 函数中；尝试同步调用它们并粘贴您提到的 w3schools 教程的链接。也许我可以通过写更详细的答案来帮助你。

干杯。

# c# - 想通过鼠标选择datagridview文本框列文本的部分文本c#

> ID：15591219
> 
> 赞同：0
> 
> 时间：2013-03-23T19:37:49.263
> 
> 标签：c#, datagridview

我有`DataGridView`三列，所有三列都是`DataGridViewTextBoxColumn`，现在我想用鼠标选择单元格文本。我尝试了以下方法：

```
dgView.ReadOnly = false;
private void dgView_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    if (e.Control is TextBox)
    {
        (e.Control as TextBox).ReadOnly = true;
    }
} 
```

但是这个技巧是行不通的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:10:40.067

如果您的 dataGridView 有

```
 AllowUserToAddRows, AllowUserToEditRows 
```

属性选择为 false，则只能通过鼠标从单元格中复制该值，使用如下代码：

```
public void Form1()
{
 //here is code of constructor
 .....
 contextMenuStrip1 = new ContextMenuStrip();
 System.Windows.Forms.ToolStripMenuItem copyStripMenuItem;
 copyStripMenuItem = new ToolStripMenuItem();
 this.contextMenuStrip1.Items.AddRange(new System.Windows.Forms.ToolStripItem[] {
 copyStripMenuItem });
 this.contextMenuStrip1.Name = "contextMenuStrip1";
 this.contextMenuStrip1.Size = new System.Drawing.Size(169, 98);
 copyStripMenuItem.Name = "copyToolStripMenuItem1";
 copyStripMenuItem.Size = new System.Drawing.Size(168, 22);
 copyStripMenuItem.Text = "Copy";
 copyStripMenuItem.Click += new EventHandler(copyStripMenuItem_Click);

 dataGridView1.ContextMenuStrip = contextMenuStrip1;
 ....
 }

 void copyStripMenuItem_Click(object sender, EventArgs e)
 {
    CellCopy();
 }
 public void CellCopy()
 {
    DataGridViewCell cell = dataGridView1.CurrentCell;
    if (cell != null)
    {
       DataGridViewColumn col = dataGridView1.Columns[cell.ColumnIndex];
            if (col is DataGridViewTextBoxColumn)
            {
                if (cell.IsInEditMode)
                {
                    TextBox txt = dataGridView1.EditingControl as TextBox;
                    if (txt != null)
                        txt.Copy();
                }
                else
                {
                    string val = cell.FormattedValue == null ? "" : cell.FormattedValue.ToString();
                    if (val == "")
                        Clipboard.Clear();
                    else
                        Clipboard.SetText(val);
                }
            }
        }
    } 
```

**更新**。

此外，如果您需要通过鼠标单击来复制 dataGridView1 的值，您可以这样编写。

```
 public void Form1_Load(object sender, EventArgs e)
 {  
  there is some code of constructor here
.....
dataGridView1.CellContentDoubleClick+=new DataGridViewCellEventHandler(dataGridView1_CellContentDoubleClick);
......
 }
  void dataGridView3_CellContentDoubleClick(object sender, DataGridViewCellEventArgs e)
    {
        CellCopy();
    }

     /// <summary>
    /// Copy the current value in the buffer
    /// </summary>
    public void CellCopy()
    {
        DataGridViewCell cell = dataGridView1.CurrentCell;
        if (cell != null)
        {
            DataGridViewColumn col = dataGridView1.Columns[cell.ColumnIndex];
            if (col is DGW_NewCellsColumn)
            {
                if (cell.IsInEditMode)
                {
                    TextBox txt = dataGridView1.EditingControl as TextBox;
                    if (txt != null)
                        txt.Copy();
                }
                else
                {
                    string val = cell.FormattedValue == null ? "" :  cell.FormattedValue.ToString();
                    if (val == "")
                        Clipboard.Clear();
                    else
                        Clipboard.SetText(val);
                }
            }
        }
    } 
```

# networking - 如何计算以下位序列的奇偶校验位？

> ID：15591223
> 
> 赞同：6
> 
> 时间：2013-03-23T19:38:07.440
> 
> 标签：networking, parity, hamming-code

顺序是：

00111011

我如何计算上述序列的奇偶校验位？这个问题来自 Databases- Jeffery ullman 的完整书（**练习 13.4.1 a**）

我不确定这个问题的答案应该是什么。

是不是很简单：

i）偶校验：1 的数量是 5（奇数）所以只需附加一个 1，答案是：001110111

ii)奇偶校验：同样，只需附加 0: 001110110

或者：

我在这里走错了路吗？我在网上查了一下，但找不到任何具体的东西。另外，课本中上述问题的文字不清楚。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T20:00:53.333

是的，你的答案是正确的。对于给定的序列，

**00111011**

奇校验为**001110110**，奇偶校验位为零，因此代码中 1 的总数为 5，为奇数。

偶校验为**001110111**，奇偶校验位为 1，因此代码中 1 的总数为 6，这是一个偶数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-02T06:35:38.070

您也可以使用 XOR 即；00111011

```
0XOR0=0
0XOR0=0
0XOR1=1
1XOR1=0
0XOR1=1
1XOR0=1
1XOR1=0
0XOR1=1 
```

, 最后一位是奇偶校验位；1 表示偶校验，0 表示奇校验。您应该将此位设为原始数字 (00111011) 的 LSB，从而变为 (001110111)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-23T17:03:37.263

```
unsigned char CalEvenParity(unsigned char data)
{
unsigned char parity=0;

while(data){
        parity^=(data &1);
        data>>=1;
            }
return (parity);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-16T01:56:36.813

奇偶校验的替代实现：

这涉及在整数中特定数字的连续位之间进行 XOR。

x>>1 将值左移 1 位，而 & 1 得到数字最后一位的值。

整个序列的奇偶校验可以如下所示：- 即由于 XOR 的特性。

1 ^ 0 ^ 1 与 (1 ^ 0 ) ^ 1 相同，我们扩展相同。

```
def parity_val(x):
    parity=0
    while x>>1:
     parity =  (x & 1)^ ((x >>1) & 1)
     x = x>> 1
    return parity 
```

# r - 这个循环有什么问题？

> ID：15591229
> 
> 赞同：0
> 
> 时间：2013-03-23T19:38:49.777
> 
> 标签：r, loops, if-statement, indexing

我无法理解这个 R 代码有什么问题，我有几行和一个带有测量值或 NA 的列，我基本上想在每行中查看几个列中的最小值和最大值：

```
require(plyr)

census <- read.csv("sps_census.csv")
info <- read.csv("sps_info.csv")

for (i in 1: nrow(census)) {
  trans <- census[i,c("dbh1","dbh2","dbh3","dbh4","dbh5","dbh6","dbh7","dbh8", "dbh9")]
  index.1 <- which (trans != "NA") #some NAs are in the data
  census$min.dbh <- min(trans[1,index.1])
  census$min.dbh.index <- min(index.1)
  census$max.dbh <- max(trans[1,index.1])
  census$max.dbh.index  <- max(index.1)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:56:59.470

在这一行（以及其他三个类似的行）：

```
census$min.dbh <- min(trans[1,index.1]) 
```

您正在将一整列分配给所有相同的值。显然不是你想要的。

也许你想要这样的东西：

```
census$min.dbh[i] <- min(trans[1,index.1]) 
```

请注意，您可以使用它`apply`来执行此类操作。`apply`如果您提供示例数据（即，使您的问题成为可重复的示例），那么某人编写一个工作示例会容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:42:58.170

您可以使用`apply`：

```
index <- c"dbh1","dbh2","dbh3","dbh4","dbh5","dbh6","dbh7","dbh8", "dbh9") #or paste("dbh",1:9,sep="")

census$min.dbh <- apply(census[index], 1, min, na.rm=T)
census$min.db.index <- apply(census[index], 1, function(x){ min(which(!is.na(x))) })
census$max.dbh <- apply(census[index], 1, max, na.rm=T)
census$max.db.index <- apply(census[index], 1, function(x){ max(which(!is.na(x))) }) 
```

请注意，我使用`is.na(x)`的是`x != "NA"`.

# python - 从python中的大量文件中查找单词的最小值？

> ID：15591230
> 
> 赞同：0
> 
> 时间：2013-03-23T19:39:20.707
> 
> 标签：python, python-2.7, python-3.x

我有 1000 个`.txt`文件在其上运行此代码。我要做的是在文件中找到 ENSG 的最大值，并删除其他小于最大值的 ENSG 值。然后我必须通过查看 utr 长度从同一个文本文件中找到最小值并将其保存在我的`output.txt`文件中。`.txt`我想要在 1 个文件中输出 1000 个`output.txt`文件。这段代码工作得差不多，但它会覆盖结果。它只显示最后一个文件的结果：

```
import glob
f2 = glob.glob("./*.txt")
all_text=""
for fpath in f2:
    f = open(fpath,"r")
    list_lines = f.readlines()
    dic={}
    sent="ENSG"
    temp_list=[]
    for line in list_lines:
        all_text=all_text+line
        name= line.rsplit()[0].strip()
        score=line.rsplit()[1].strip()
        dic[name]=score
    for i in dic.keys():
        if sent in i:
            temp_list.append(dic[i])
            hiegh_score=max(temp_list)
    def check(index):
        reverse_text=all_text[index+1::-1]
        index2=reverse_text.find("\n")
        if sent==reverse_text[:index2+1][::-1][1:len(sent)+1]:
            return False
        else:
            return True

    list_to_min=dic.values()
    for i in temp_list:
        if i!=hiegh_score:
            index=all_text.find(str(i))
            while check(index):
                index=all_text.find(str(i),index+len(str(i)))
            all_text=all_text[0:index]+all_text[index+len(str(i)):]
            list_to_min.remove(str(i))
file2=open("my_try4.txt","w")
file2.write(all_text)
min_score= min(list_to_min)
for j in dic.keys():
    if min_score==dic[j]:
        k="min score is :"+str(min_score)+" for person "+j
        file2.write(k)
print "%6d : %s" % (len(list_lines),fpath)
file2.close()
f.close() 
```

我有这样的文本文件 `4.txt`：

```
ENSBTAG00000020679  197
ENSCAFG00000009872  2585
ENSG00000018236 1935
ENSG00000018236 230
ENSG00000018236 257
ENSG00000018236 338
ENSG00000018236 922
ENSG00000018236 922
ENSRNOG00000004438  14
ENSRNOG00000004438  14 
```

现在它应该选择 1935 的 ENSG 并删除 ENSG 的所有其他值。现在文本文件应如下所示：

```
 ENSBTAG00000020679  197
    ENSCAFG00000009872  2585
    ENSG00000018236 1935
    ENSRNOG00000004438  14
    ENSRNOG00000004438  14 
```

现在，通过查看这个文本文件，我们找到了最短的值并将其保存在一个文本文件中（我们对 1000 个文件执行此操作，输出应该在 1 个文件上）。

```
output.txt
textfile4 14 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:26:15.557

重写它比找出你的代码出了什么问题更容易：

```
import os.path
import glob
import re
import itertools
from collections import namedtuple, deque
from operator import attrgetter

R_PREFIX_VALUE = re.compile(r'^(?P<prefix>[A-Z]+)(?P<suffix>\d+)\s+(?P<value>\d+)\s*$')

getvalue  = attrgetter('value')

def interleave(seq, val):
    return itertools.chain.from_iterable(itertools.izip(seq, itertools.repeat(val)))

class Fileline(namedtuple('Fileline', 'filename prefix suffix value')):
    @classmethod
    def _fromstr(cls, s, filename=None, rematch=R_PREFIX_VALUE.match):
        m = rematch(s)
        if not m:
            raise ValueError('No valid line found in %r' % s)
        d = m.groupdict()
        d['value'] = int(d['value'])
        d['filename'] = filename
        return cls(**d)

    def _asstr(self):
        return '{}{} {}'.format(self.prefix, self.suffix, self.value)

def max_value_with_prefix(lineseq, prefix, getvalue=getvalue):
    withprefix = (line for line in lineseq if line.prefix==prefix)
    return max_value(withprefix)

def filter_lt_line(lineseq, maxline):
    for line in lineseq:
        if line.prefix != maxline.prefix or line.value >= maxline.value:
            yield line

def extreme_value(fn, lineseq, getvalue=getvalue):
    try:
        return fn((l for l in lineseq if l is not None), key=getvalue)
    except ValueError:
        return None

def max_value(lineseq):
    return extreme_value(max, lineseq)

def min_value(lineseq):
    return extreme_value(min, lineseq)

def read_lines(fn, maker=Fileline._fromstr):
    with open(fn, 'rb') as f:
        return deque(maker(l, fn) for l in f)

def write_file(fn, lineseq):
    lines = (l._asstr() for l in lineseq)
    newlines = interleave(lines, '\n')
    with open(fn, 'wb') as f:
        f.writelines(newlines)

def write_output_file(fn, lineseq):
    lines = ("{} {}".format(l.filename, l.value) for l in lineseq)
    newlines = interleave(lines, "\n")
    with open(fn, 'wb') as f:
        f.writelines(newlines)

def filter_max_returning_min(fn, prefix):
    lineseq = read_lines(fn)
    maxvalue = max_value_with_prefix(lineseq, prefix)
    filteredlineseq = deque(filter_lt_line(lineseq, maxvalue))
    write_file(fn, filteredlineseq)
    minline = min_value(filteredlineseq)
    return minline

def main(fileglob, prefix, outputfile):
    minlines = []
    for fn in glob.iglob(fileglob):
        minlines.append(filter_max_returning_min(fn, prefix))
    write_output_file(outputfile, minlines) 
```

入口点是`main()`，称为like `main('txtdir', 'ENSG', 'output.txt')`。对于每个文件`filter_max_returning_min()`都会打开并重写文件并返回最小值。无需保留您访问的每个文件的每一行的字典或列表。

（顺便说一句，破坏性覆盖文件似乎是个坏主意！您是否考虑过将它们复制到其他地方？）

当您将单独的关注点隔离到单独的函数中时，为不同的执行行为重新组合它们变得非常容易。例如，通过添加两个小函数在所有文件上并行运行此任务很简单：

```
def _worker(args):
    return filter_max_returning_min(*args)

def multi_main(fileglob, prefix, outputfile, processes):
    from multiprocessing import Pool
    pool = Pool(processes=processes)
    workerargs = ((fn, prefix) for fn in glob.iglob(fileglob))
    minlines = pool.imap_unordered(_worker, workerargs, processes)
    write_file(outputfile, minlines) 
```

现在您可以启动可配置数量的工作人员，每个工作人员都将在一个文件上工作，并在完成后收集他们的最小值。如果您有非常大的文件或大量文件并且不受 IO 限制，这可能会更快。

只是为了好玩，您还可以轻松地将其转换为 CLI 实用程序：

```
def _argparse():
    import argparse

    def positive_int(s):
        v = int(s)
        if v < 1:
            raise argparse.ArgumentTypeError('{:r} must be a positive integer'.format(s))
        return v

    parser = argparse.ArgumentParser(
        formatter_class=argparse.RawDescriptionHelpFormatter,
        description="""Filter text files and write min value.

    Performs these operations on the text files in supplied `filedir`:

    1\. In each file, identify lines starting with the matching `maxprefix`
       which do *not* contain the maximum value for that prefix in that file.
    2\. DESTRUCTIVELY REWRITE each file with lines found in step 1 removed!
    3\. Write the minimum value (for all lines in all files) to `outputfile`.
    """)
    parser.add_argument('filedir',
        help="Directory containg the text files to process. WILL REWRITE FILES!")
    parser.add_argument('maxprefix', nargs="?", default="ENSG", 
        help="Line prefix which should have values less than max value removed in each file")
    parser.add_argument('outputfile', nargs="?", default="output.txt",
        help="File in which to write min value found. WILL REWRITE FILES!")
    parser.add_argument('-p', '--parallel', metavar="N", nargs="?", type=positive_int, const=10,
        help="Process files in parallel, with N workers. Default is to process a file at a time.")
    return parser.parse_args()

if __name__ == '__main__':
    args = _argparse()
    fileglob = os.path.join(args.filedir, '*.txt')
    prefix = args.maxprefix
    outputfile = args.outputfile
    if args.parallel:
        multi_main(fileglob, prefix, outputfile, args.parallel)
    else:
        main(fileglob, prefix, outputfile) 
```

现在您可以从命令行调用它：

```
$ python ENSG.py txtdir ENSCAFG --parallel=4 
```

# c# - 在 Dictionary 对象的 getter/setter 中使用 += 和 -= 运算符

> ID：15591231
> 
> 赞同：0
> 
> 时间：2013-03-23T19:39:27.730
> 
> 标签：c#, getter-setter, dictionary

所以我有：

```
Dictionary<some_enumerator, int> available_spaces;
Dictionary<some_enumerator, int> occupied_spaces;
Dictionary<some_enumerator, int> total_spaces; 
```

这个想法是，当我占用给定类型的空间时，我可以标记 X 类型的空间被占用了多少，并在调用 Occupy(enum.space_type) 之前检查以确保有可用空间。

目前，我对 Occupied 和 Available 空间有简单的 getter/setter：

```
public Dictionary<some_enumerator, int> Occupied_Spaces { get; set; }
public Dictionary<some_enumerator, int> Available_Spaces { get; set; }
public Dictionary<some_enumerator, int> Total_Spaces { get; set; } 
```

理想情况下，每当我们调用 Occupied_Spaces 时，我想重新计算每个键的可用空间（通过简单地从总槽中减去占用的槽），例如，而不是这样做：

```
object.Occupied_Spaces[space_type]++;
object.RecalculateSpaces(); 
```

每次我修改 Occupied_Spaces 时，我都想做类似的事情（我知道这不起作用，但你明白了：

```
public Dictionary<some_enumerator> Occupied_Spaces {
     get { return _occupied_spaces; }
     set { _occupied_spaces = value; RecalculateSpaces(); }
} 
```

目前，调用 Occupied_Spaces[key]++ 不会调用 Occupied_Spaces 中的设置器（我通过将调试打印扔到 RecalculateSpaces 中进行测试，但没有触发）。

但我不知道如何覆盖字典的 + （或任何其他基本运算符）。有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:59:01.840

> ```
> public Dictionary<some_enumerator> Occupied_Spaces {
>     get { return _occupied_spaces; }
>     set { _occupied_spaces = value; RecalculateSpaces(); }
> } 
> ```
> 
> 目前，调用 Occupied_Spaces[key]++ 不会调用 Occupied_Spaces 中的设置器（我通过将调试打印扔到 RecalculateSpaces 中进行测试，但没有触发）。

正确的。那是因为你没有设置`Occupied_Spaces`. 您`Occupied_Spaces`仍然指的是完全相同的字典对象，只是它的*内容*发生了变化。

`Dictionary<,>`没有任何`Change`活动供您订阅，因此您面临的问题无法解决。您可以做的是创建一个自定义类来实现`IDictionary<,>`并使用该接口。当字典的内容发生变化时，您的自定义类可以触发事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:16:04.673

`Available_Spaces`您可以通过替换此函数来避免同步的需要：

```
GetAvailableSpace(some_enumerator e)
{
    return Total_Spaces[e] - Occupied_Spaces[e];
} 
```

# mongodb - 在mongoDB中保存IP地址

> ID：15591234
> 
> 赞同：14
> 
> 时间：2013-03-23T19:39:31.970
> 
> 标签：mongodb, ip-address

目前为了保存 IP 地址，我将其转换为数字并将其存储在集合中。基本上我这样做是为了记录目的。这意味着我关心尽可能快地以最小的空间存储信息。

我很少用它来查询。

我的想法

*   存储为字符串肯定是低效的。
*   存储为 4 位数字会更慢，并且会占用更多空间。

尽管如此，我认为这是一种适当的方法，但有没有更好的方法适合我的目的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-30T18:59:04.813

绝对将 IP 地址保存为数字，如果您不介意这需要额外的工作，特别是如果您需要对地址进行查询并且您有大型表/集合。

原因如下：

**贮存**

*   如果存储为无符号整数，则 IPv4 地址为 4 个字节。
*   当以点分八进制格式写成字符串时，IPv4 地址在 10 字节和 18 字节之间变化。（假设平均值为 14 个字节。）

即 7-15 个字节的字符，加上 2-3 个字节，如果您使用的是可变长度字符串类型，这取决于您使用的数据库。如果您有可用的固定长度字符串表示，则必须使用 15 个字符的固定宽度字段。

磁盘存储很便宜，因此在大多数用例中这不是一个因素。然而，内存并不便宜，如果您有一个大表/集合并且想要进行快速查询，那么您需要一个索引。字符串编码的 2-3 倍存储损失极大地减少了您可以索引的记录数量，同时仍将索引保留在内存中。

*   如果存储为无符号整数，则 IPv6 地址为 16 个字节。（可能是多个 4 或 8 字节整数，具体取决于您的平台。）
*   当以缩写的十六进制表示法编码为字符串时，IPv6 地址的范围从 6 字节到 42 字节。

在低端，环回地址 (::1) 是 3 个字节加上可变长度字符串开销。在高端，像这样的地址`2002:4559:1FE2:1FE2:4559:1FE2:4559:1FE2`使用 39 个字节加上可变长度的字符串开销。

与 IPv4 不同，假设 IPv6 字符串的平均长度为 6 和 42 的平均值是不安全的，因为具有大量连续零的地址数量仅占整个 IPv6 地址空间的一小部分。只有一些特殊的地址，如 loopback 和 autoconf 地址，可能会以这种方式进行压缩。

同样，对于字符串编码与整数编码，这是 > 2 倍的存储损失。

**网络数学**

您认为路由器将 IP 地址存储为字符串吗？他们当然没有。

如果您需要对 IP 地址进行网络数学运算，则字符串表示很麻烦。例如，如果您想编写一个搜索特定子网上所有地址的查询（“返回所有 IP 地址在 10.7.200.104/27 的记录”，您可以通过使用整数子网掩码屏蔽整数地址来轻松完成此操作。 （Mongo 不支持此特定查询，但大多数 RDBMS 支持。）如果将地址存储为字符串，那么您的查询将需要将每一行转换为整数，然后对其进行屏蔽，这会慢几个数量级。（按位可以使用 2 个寄存器在几个 CPU 周期内完成 IPv4 地址的屏蔽。将字符串转换为整数需要遍历字符串。）

类似地，整数地址的范围查询（“返回 192.168.1.50 和 192.168.50.100 之间的所有记录”）将能够使用索引，而对字符串地址的范围查询则不能。

**底线**

这需要更多的工作，但并不多（有一百万个 aton() 和 ntoa() 函数在那里），但是如果你正在构建一些严肃而可靠的东西，并且你想要针对未来的需求和对于大型数据集的可能性，您应该将 IP 地址存储为整数，而不是字符串。

如果您正在做一些快速而肮脏的事情并且不介意将来进行改造的可能性，那么请使用字符串。

出于 OP 的目的，如果您正在优化速度和空间并且您认为您不想经常查询它，那么为什么要使用数据库呢？只需将 IP 地址打印到文件中。这将比将其存储在数据库中（具有相关的 API 和存储开销）更快且存储效率更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-30T01:03:20.163

一种将 IP 地址保存为 int 的有效方法。如果你想用 cidr 过滤器标记一个 ip，这里有一个演示：

```
> db.getCollection('iptag').insert({tags: ['office'], hostmin: 2886991873, hostmax: 2887057406, cidr: '172.20.0.0/16'})
> db.getCollection('iptag').insert({tags: ['server'], hostmin: 173867009, hostmax: 173932542, cidr: '10.93.0.0/16'})
> db.getCollection('iptag').insert({tags: ['server'], hostmin: 173932545, hostmax: 173998078, cidr: '10.94.0.0/16'}) 
```

创建标签索引。

```
> db.getCollection('iptag').ensureIndex(tags: 1) 
```

使用 cidr 范围过滤 ip。`ip2int('10.94.25.32') == 173938976`.

```
> db.getCollection('iptag').find({hostmin: {$lte: 173938976}, hostmax: {$gte: 173938976}}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T08:38:18.857

IPv4 是四个字节，因此您可以将其存储为 32 位整数（BSON 类型 16）。

见[http://docs.mongodb.org/manual/reference/bson-types](http://docs.mongodb.org/manual/reference/bson-types)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-13T05:06:53.230

[IPv4 的最简单方法是使用此处](http://www.aboutmyip.com/AboutMyXApp/IP2Integer.jsp)提供的有趣数学转换为 int 。

我使用以下函数（js）在与db匹配之前进行转换

```
ipv4Number: function (ip) {
    iparray = ip.split(".");
    ipnumber = parseInt(iparray[3]) +
        parseInt(iparray[2]) * 256 +
        parseInt(iparray[1]) * Math.pow(256, 2) +
        parseInt(iparray[0]) * Math.pow(256, 3);
    if (parseInt(ipnumber) > 0)return ipnumber;
    return 0;
} 
```

# java - Maven exec插件 - 硬编码参数后来自控制台的用户参数

> ID：15591240
> 
> 赞同：4
> 
> 时间：2013-03-23T19:40:46.600
> 
> 标签：java, maven, args, exec-maven-plugin

我正在实现一个简单的 RMI 服务器和客户端。我想加快每次添加服务器代码库的繁琐任务（大量终端膨胀的文本），所以我决定使用 maven exec 插件。这是我`pom.xml`现在的一部分外观：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>exec-maven-plugin</artifactId>
            <version>1.2.1</version>
            <configuration>
                <executable>java</executable>
                <arguments>
                    <argument>-classpath</argument>
                    <argument>/media/files/EclipseWorkspace/JavaSE/rozprochy/lab2/RmiServer/target/classes</argument>
                    <argument>-Djava.rmi.server.codebase=file:/media/files/EclipseWorkspace/JavaSE/rozprochy/lab2/RmiServer/target/classes/</argument>
                    <argument>engine.ComputeEngine</argument>
                </arguments>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

`mvn exec:exec`当我在控制台中运行时，一切都很好。当我想让用户指定 rmiregistry 端口作为程序的参数时，就会出现问题。基本上，除了 POM 文件中指定的参数之外，我还想从控制台添加额外的参数。在从控制台指定新参数时，我发现的所有解决方案都覆盖了硬编码的参数，这是不可取的。有可能以某种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T14:32:16.730

这是一种扭曲的解决方法，但我想不出任何其他方式来实现你想要的

在您的 pom 中使用附加参数的默认值定义一个属性

```
<properties>
    <extra.argument.from.console>extra.argument.from.console.default.value</extra.argument.from.console>
</properties> 
```

在您的执行中将该属性添加为参数

```
<argument>${extra.argument.from.console}</argument> 
```

如果您不想使用默认值，则在调用 maven 时为该属性赋值

mvn exec:exec -Dextra.ar​​gument.from.console=value.you.want

# facebook - Facebook 帖子最近没有显示图像，og:image 标签在调试器中正确

> ID：15591243
> 
> 赞同：0
> 
> 时间：2013-03-23T19:40:57.607
> 
> 标签：facebook, facebook-graph-api

在过去的几周里，我们发现 Facebook 帖子（不是来自页面内 FB 按钮的分享）未能在我们的网站上显示带有 og:image 标记的图像。我们的主页[http://www.greatbritishchefs.com](http://www.greatbritishchefs.com)就是一个例子。这似乎是 Facebook 端行为的改变，因为几周前还在工作的页面现在没有了。同样在页面当前正在工作的地方，通过 FB 调试器运行它会导致它立即失败。删除 og:image 标记不起作用。图像似乎大小合适，调试器结果没有关于图像的错误。

将不胜感激任何也遇到这种情况的人的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T08:18:58.963

好的，我找到了解决方案。似乎发生的事情是，Facebook 对在帖子中使用什么样的图片 URL 提出了更高的要求。我们网站上的图像是通过一个处理程序获取的，该处理程序对图像进行预处理、添加水印、调整大小等，因此 URL 可能如下所示：

[http://www.greatbritishchefs.com/getmedia/0ecdeb1f-c194-42a9-b465-012004a6cd99/AYW001-Website-Edited-Featured-Bacon-Breadsticks-Closeup/?width=420&height=270&ext=.jpg](http://www.greatbritishchefs.com/getmedia/0ecdeb1f-c194-42a9-b465-012004a6cd99/AYW001-Website-Edited-Featured-Bacon-Breadsticks-Closeup/?width=420&height=270&ext=.jpg)

现在这行不通了。出于某种原因，网址必须是完全原版的，没有任何查询字符串并带有标准图像扩展名。当我重写 og:image 的 url 以遵循这些规则时，图像会重新出现在帖子中。

希望这可以帮助某人

詹姆士

# css - 字母间距小于一像素

> ID：15591245
> 
> 赞同：1
> 
> 时间：2013-03-23T19:41:28.227
> 
> 标签：css

我有一个间距的小问题。我希望间距小于 1 像素。这是我的html

```
<div id="head">
     <h1>Mira's</h1>
    <br>
     <h2>Koding place</h2>
</div> 
```

这是CSS

```
@font-face {
    font-family: Museo;
    src: url("fonts/Museo300-Regular.otf") format("opentype");
}
body {
    background-color: black;
}
h1 {
    text-align: center;
    margin: 0 auto;
    font-family:'Museo', 'Lucida Console', Courier;
    font-size: 7em;
    text-transform: uppercase;
    color: #fff;
    text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #fff, 0 0 40px #029408, 0 0 70px #029408, 0 0 80px #029408, 0 0 100px #029408, 0 0 150px #029408;
}
h2 {
    font-size: 1.65em;
    text-align: center;
    font-family:'Museo', 'Lucida Console', Courier;
    color: #fff;
    margin-top: -1.65em;
    margin-left: 0.13em;
    letter-spacing: 0.5px;
} 
```

问题是它不是字母间距小于 1 `px`，是否有任何*技巧*可以使它小于 1 px？

这是 jsfiddle 与它[http://jsfiddle.net/3np3y/](http://jsfiddle.net/3np3y/)

也不要介意 CSS 中的一些东西是`px`和一些是`em`. 我`em`很快就会重新输入所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:44:07.757

字母间距可以有负值，所以试试看:)

IE`letter-spacing: -4px;`

# android - 从android中的服务在后台播放音乐

> ID：15591248
> 
> 赞同：0
> 
> 时间：2013-03-23T19:41:36.123
> 
> 标签：android, service, background, media-player

我越来越紧张......有人可以告诉我，为什么下面的代码不想工作？

```
public class MyService extends Service {

    private MediaPlayer player;

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        player = MediaPlayer.create(this, R.raw.audio);
        player.setWakeMode(getApplicationContext(),
                PowerManager.PARTIAL_WAKE_LOCK);
        player.setVolume(1f, 1f);
        player.start();

//other stuff here, which run perfectly... 
```

音频文件在那里，我有唤醒锁权限（没有它也不起作用......）。没有错误消息，其余代码都很好，但是.......播放器没有播放任何东西。请在它折断我大脑中的血管之前帮助我！

编辑：更多信息：音频为 .mp3 格式，77kb/s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:38:45.230

解决方案：它需要这样写：)`MediaPlayer p = Mediaplayer.create(this, filename`因为`p.create`会调用静态方法，并且它会返回一个新的 a 实例`MediaPlayer`，它永远不会被存储。然后，我调用`start()`了默认构造的实例，这就是它不起作用的原因。

# time - 标签小部件未使用 Tkinter for-loop 中的“后”方法更新

> ID：15591250
> 
> 赞同：0
> 
> 时间：2013-03-23T19:41:49.237
> 
> 标签：time, python-3.x, tkinter

我正在尝试更新 tkinter 的 for 循环内的文本并显示标签。根据 .after 方法，这应该在一秒钟后发生。

```
def rightString(self, gro, string):
    for z in string:
        self.message2.configure(text="Good job, %s is a member of %s!" % (z, gro.getName()))

        root.after(1000)
        self.message2.grid()
        print(z, " should be displayed!") 
```

我希望这是足够的信息；我觉得我缺少一些非常基本的东西。print 函数在 IDLE 中调用并显示 'string' 的每个成员。我不明白为什么 self.message2 不显示。它显示在脚本的其他部分中，不包括“后”方法。

如果有必要，我会发布更多代码。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:44:06.110

如果您想每秒更改标签的文本，则必须再次安排该功能`after`：

```
def rightString(self, gro, string):
    if string:
        z = string[0]
        self.message2.configure(text="Good job, %s is a member of %s!" % (z, gro.getName()))
        root.after(1000, lambda: self.rightString(gro, string[1:])
        print(z, " should be displayed!") 
```

正如我在评论中所说，`grid()`每次更改文本时都不需要调用。

* * *

*编辑：*要在所有字符串的处理完成后执行不同的函数，您可以在块中添加对它的调用`else`：

```
def rightString(self, gro, string):
    if string:
        # ...
    else:
        doSomethingElse() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:56:59.877

它不会显示，因为您正在阻止事件循环处理事件，特别是导致它在屏幕上重绘窗口的事件。您需要重组代码以避免`after`仅使用单个参数进行调用。

# apache - Apache .htaccess 隐藏 .php 和 .html 扩展名

> ID：15591251
> 
> 赞同：4
> 
> 时间：2013-03-23T19:41:55.080
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, rewrite

我应该添加哪些行来从我的站点中同时删除`.html`和`.php`扩展？

我仅将其用于`.html`部分：

```
RewriteEngine on

RewriteBase /
RewriteCond %{http://jobler.ro/} !(\.[^./]+)$
RewriteCond %{REQUEST_fileNAME} !-d
RewriteCond %{REQUEST_fileNAME} !-f
RewriteRule (.*) /$1.html [L]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /([^.]+)\.html\ HTTP
RewriteRule ^([^.]+)\.html$ http://jobler.ro/$1 [R=301,L] 
```

但我需要从同一个域中隐藏两个文件类型扩展名。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-11-08T15:08:42.847

我知道回答晚了，但我给了它，因为它对某人有用:)

```
#Remove php extension
    RewriteEngine on 
    RewriteCond %{REQUEST_FILENAME} !-d 
    RewriteCond %{REQUEST_FILENAME}\.php -f 
    RewriteRule ^(.*)$ $1.php

#Remove html extension
    RewriteEngine on 
    RewriteCond %{REQUEST_FILENAME} !-d 
    RewriteCond %{REQUEST_FILENAME}\.html -f 
    RewriteRule ^(.*)$ $1.html 
```

这将从您的文件中删除 php 和 html 扩展名并完美运行。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T19:51:15.807

您可能想测试该文件是否存在`.html`或`.php`存在，如果存在则重定向到该文件。

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$  $1.html [L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$  $1.php [L]

RewriteCond %{REQUEST_URI} \.((html)|(php))$
RewriteRule ^(.*)\.([^.]+)$  $1 [R,L] 
```

# oracle - Oracle select from a list of values with an index

> ID：15591254
> 
> 赞同：-2
> 
> 时间：2013-03-23T19:41:58.847
> 
> 标签：oracle, plsql

Is there an alternative to decode function in oracle which gets and index and a list of values as parameters and returns the value at given index?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:45:30.173

```
regexp_substr('value1|value2|value3', '[^|]+', 1, index) 
```

# c++ - OpenGL相机旋转怪异

> ID：15591256
> 
> 赞同：0
> 
> 时间：2013-03-23T19:42:00.417
> 
> 标签：c++, opengl, glew, freeglut

我一直在用 FreeGlut 和 Glew 做一个小项目。现在我正在编写一个相机系统，但有些事情很奇怪：

*   在全屏模式下，如果鼠标在屏幕下方区域移动，则相机移动速度比相机在上方区域移动时更快。

*   相机做出奇怪的运动，总是在同一个方向，一个小的 8 数字移动。

代码：

```
void MouseOps(int x, int y)
{
    // Changes in mousepositions.  Always same direction and 
    // in lower right corner of monitor faster, for some reason.
    deltaX = x - MousePreviousX;
    deltaY = y - MousePreviousY;

    // Also I didn't bother to put * 360 in next equations, 
    // because it would make the camera  jump for crazy. 
    // resx and resy are screen resolutions. 
    // Endresult should be that camera can 
    // rotate once when mouse moves over screen
    yaw = yaw + (((deltaX / resx)) * deginrad);
    pitch = pitch + (((deltaY / resy)) * deginrad);

    //Check clippings (eg. camera wont end upside down etc.)
    if(yaw >= (2 * pi) || yaw <= (-2 * pi)  )
        yaw = 0;
    if(pitch >= (pi / 2))
        pitch = pi / 2;
    if(pitch <= (pi / -2))
        pitch = pi / -2;

    //Calculate x, y, and z coordinates of unit sphere to look at (r = 1)
    cam_normX = cos(yaw) * sin(pitch); 
    cam_normY = sin(yaw) * sin(pitch);
    cam_normZ = cos(yaw);

    // Current x and y to previous
    int MousePreviousX = x;
    int MousePreviousY = y; 
} 
```

我尝试使用这个 [http://en.wikipedia.org/wiki/Spherical_coordinate_system#Cartesian_coordinates](http://en.wikipedia.org/wiki/Spherical_coordinate_system#Cartesian_coordinates) 系统来计算要查看的点。然后我将所有“cam_norm”变量传递给

```
gluLookAt(cam_posX, cam_posY, cam_posZ,
        cam_posX+cam_normX, cam_posY+cam_normY, cam_posZ + cam_normZ,
        cam_upX, cam_upY, cam_upZ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:19:56.080

我不知道为什么会这样，但它解决了所有问题：

```
bool isCursorWarping = false;

void MouseOps(int x, int y)
{

    if(isCursorWarping == false){
        // Changes in mousepositions. Always same direction and in lower right corner of monitor faster, for some reason.
        deltaX = x - MousePreviousX;
        deltaY = y - MousePreviousY;

        yaw = yaw + ((((deltaX / resx)) * deginrad) * 360);
        pitch = pitch + ((((deltaY / resy)) * deginrad) * 360);

        //Check clippings (eg. camera wont end upside down etc.)

        if(x >= resx - 1 || y >= resy - 1 || x == 0 || y == 0)
        {
            warpCursor();
            MousePreviousX = resx / 2;
            MousePreviousY = resy / 2; 
        }else{
            MousePreviousX = x;
            MousePreviousY = y; 
        }

        if(yaw >= (2 * pi) || yaw <= (-2 * pi)  )
            yaw = 0;
        if(pitch >= (pi / 2))
            pitch = pi / 2;
        if(pitch <= (pi / -2))
            pitch = pi / -2;

        //Calculate x, y, and z coordinates of unit sphere to look at (r = 1)

        cam_normX = cos(pitch) * cos(yaw); 
        cam_normY = sin(pitch) * sin(yaw);
        cam_normZ = cos(pitch) * sin(yaw);

    }
        // Current x and y to previous and cleanup

        isCursorWarping = false;

}

void warpCursor()
{
    isCursorWarping = true;
    glutWarpPointer(resx / 2, resy / 2);

} 
```

然后我将“cam_norm”值传递给：

```
gluLookAt(0.0f, 1.0f, 2.0f, 0.0f + cam_normX, 1.0f + cam_normY, 2.0f+ cam_normZ, 0.0f, 0.1f, 0.0f); 
```

# sas - 在 SAS 中删除一系列变量

> ID：15591259
> 
> 赞同：6
> 
> 时间：2013-03-23T19:42:03.810
> 
> 标签：sas

我目前有一个包含 200 个变量的数据集。从这些变量中，我创建了 100 个新变量。现在我想删除原来的 200 个变量。我怎样才能做到这一点？

稍微好一点的是，我如何在新数据集中删除变量 3-200。

抱歉，如果我的问题含糊不清，但基本上我发现我需要使用--。如果我的第一个变量被首先调用并且我的最后一个变量被最后调用，我可以使用 (drop= first--last); 删除其间的所有变量；

感谢所有的回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T21:12:03.050

与大多数 SAS 任务一样，有几种选择。从 SAS 数据集中删除变量的最简单和最安全的方法是使用 PROC SQL。只需按名称列出变量，用逗号分隔：

```
proc sql;
   alter table MYSASDATA
      drop name, age, address;
quit; 
```

使用 PROC SQL 更改表会从数据集中删除变量。

另一种技术是使用`DROP` **选项**重新创建数据集：

```
data have;
   set have(drop=name age address);
run; 
```

还有一种方法是使用`DROP` **语句**：

```
data have;
   set have;
   drop name age address;
run; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-23T22:45:16.020

很多选项——一些“更安全”，一些不太安全但更容易编码。假设您有一个包含变量 ID、PLNT 和 x1-x200 的数据集。

```
data have;
id=0;
plnt=0;
array x[200];
do _t = 1 to dim(x);
x[_t]=0;
end;
run;

data want;
set have;
*... create new 100 variables ... ;
*option 1:
drop x1-x200; *this works when x1-x200 are numerically consecutive;
*option 2:
drop x1--x200; *this works when they are physically in order on the dataset - 
                only the first and last matter;
run; 
```

*或者，这样做。这也适用于 SQL ALTER TABLE。这是最安全的方法。

```
proc sql;
select name into :droplist separated by ' ' from dictionary.columns
where libname='WORK' and memname='HAVE' and name not in ('ID','PRNT');
quit;

proc datasets lib=work;
modify want;
drop &droplist.;
quit; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-24T16:19:46.640

如果您要删除的所有变量都命名为相同的开头（如`old_var_1`, `old_var_2`, ..., `old_var_n`），您可以这样做（注意 drop 选项中的冒号）：

```
data have;
set have(drop= old_var:);
run; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-21T14:01:54.157

我有一些宏可以[在这里](https://github.com/brendanjodowd/SAS/blob/master/brendan_macros.sas)实现 你可以运行整套宏，或者只运行`list_vars()`, `is_blank()`, `num_words`, `find_word`, `remove_word`, `remove_words`, `nth_word()`。

使用这些将是：

```
%let keep_vars = keep_this and_this also_this;
%let drop_vars = %list_vars(old_dataset);
%let drop_vars = %remove_words(&drop_vars  , &keep_vars);

data new_dataset (drop = &drop_vars );
  set old_dataset;
 /*stuff happens*/
run; 
```

这将保留三个变量`keep_this and_this also_this`，但删除旧数据集中的所有其他变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-23T06:18:03.053

```
data want;
    set have;
    drop VAR1--VARx;
run; 
```

很想知道你是否可以按职位做到这一点。绝对适用于由双破折号 (--) 分隔的变量名。

# matlab - 错误 --> 整数只能与同一类的整数或双精度标量组合

> ID：15591263
> 
> 赞同：0
> 
> 时间：2013-03-23T19:42:22.580
> 
> 标签：matlab, class, runtime-error

我有以下两个矩阵：

**模糊集**

```
255  7  7
255  7  7
255  7  7 
```

**会员矩阵**

```
2.881749158360024e-04   0.999999819474077   0.904200609951489
0.0336048930092375      0.517034652401936   0.847219463816453
2.881749158360024e-04   0.999999819474077   0.904200609951489 
```

当我尝试运行此代码部分时：

```
tolerance = 0.01; 
core = double(fuzzySet.*(abs(membershipMatrix-1) <= tolerance)) + membershipMatrix.*(membershipMatrix.*(abs(membershipMatrix-1) > tolerance);); 
```

我收到以下错误：

```
??? Error using ==> times
Integers can only be combined with integers of the same class, or scalar doubles.

Error in ==> fs at 36
core = fuzzySet.*(abs(membershipMatrix-1) <= tolerance) +
membershipMatrix.*(membershipMatrix > tolerance); 
```

我该如何解决这个错误？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T20:26:05.163

把double放在fuzzySet周围？

```
double(fuzzySet).*(abs(membershipMatrix-1) <= tolerance) 
```

# checkbox - 在 div 中使用表单复选框来控制 OpenLayers 中矢量图层的可见性

> ID：15591267
> 
> 赞同：1
> 
> 时间：2013-03-23T19:42:45.460
> 
> 标签：checkbox, openlayers, visibility, layer

我正在尝试切换 OpenLayers 中矢量图层的可见性，该矢量图层使用正文中定义的表单按钮显示 gpx 跟踪，并使用 div 定位在地图上。我不想使用内置控件，因为它默认隐藏，我想通过复选框添加更多信息。

```
<input name="slow" type="checkbox" class="newstext" 
id="slow" onClick="slowtrace();" checked> 
```

函数'slowtrace'在头脚本中。'lgpx2' 是显示轨迹的矢量图层：

```
function slowtrace()  
{if (lgpx2.getVisibility() == true) 
{lgpx2.setVisibility(false);}  
else  
{lgpx2.setVisibility(true);}} 
```

但是它不起作用，给出错误 - 参考错误：找不到变量：slowtrace。

有两个矢量图层显示了两条 gpx 轨迹。我一直在尝试使用慢速跟踪“lgpx2”，而不是另一个名为“lgpx”，以及地图上方 div 中的上部复选框，对应于“慢速运行”。

整个页面的代码是：

```
 <html>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<head>
<link rel="stylesheet" href="http://www.carnethy.com/carn.css" type="text/css">
    <title>Wed training 20th March 2013 - golf courses</title>
    <script src="http://www.openlayers.org/api/OpenLayers.js"></script>
    <script src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js"></script>
    <script type="text/javascript">    
        var lat
        var lon
        var zoom
        var latstart=55.92900
        var lonstart=-3.19300
            var map;

    function init() {
            map = new OpenLayers.Map ("map", {controls:[
                new OpenLayers.Control.Navigation({zoomWheelEnabled : false}),
            new OpenLayers.Control.PanZoomBar(),
            new OpenLayers.Control.LayerSwitcher(),
            new OpenLayers.Control.Attribution()],
            maxExtent: new OpenLayers.Bounds(-20037508.34,- 20037508.34,20037508.34,20037508.34),
            maxResolution: 156543.0399,
            numZoomLevels: 19,
            units: 'm',
            projection: new OpenLayers.Projection("EPSG:900913"),
            displayProjection: new OpenLayers.Projection("EPSG:4326")
            } );
            layerMapnik = new OpenLayers.Layer.OSM.Mapnik("Mapnik");
            map.addLayer(layerMapnik);
            layerCycleMap = new OpenLayers.Layer.OSM.CycleMap("CycleMap");
            map.addLayer(layerCycleMap);
            layerMarkers = new OpenLayers.Layer.Markers("Markers");
            map.addLayer(layerMarkers);

    //slow run stylemap
            var gpxStyles = new OpenLayers.StyleMap({
                    "default": new OpenLayers.Style({
                    pointRadius: "1", // sized according to type attribute
                    label: "${name}",        
                    labelAlign: "rb",
                    labelOutlineColor: "white",
                    labelOutlineWidth: 3,
                    fontSize: 15,
                    fontFamily: "Arial",
                    fontColor: "brown",
                    labelYOffset: 10,
                    fillColor: "black",
                    strokeColor: "red",
                    strokeWidth: 2, 
                    strokeOpacity: 0.8
                }),
                }); 

    //fast run stylemap
                var gpxStyles2 = new OpenLayers.StyleMap({
                    "default": new OpenLayers.Style({
                    pointRadius: "1", // sized according to type attribute
                    label: "${name}",        
                    labelAlign: "rb",
                    labelOutlineColor: "white",
                    labelOutlineWidth: 3,
            fontSize: 15,
                    fontFamily: "Arial",
                    fontColor: "blue",
                    labelYOffset: 10,
                    fillColor: "black",
                    strokeColor: "blue",
                    strokeWidth: 2, 
                    strokeOpacity: 0.8,
        }),
            }); 
    // Add the Layer with the GPX Track fast run - ignore this bit
    var lgpx = new OpenLayers.Layer.Vector("wed training fast", {
    strategies: [new OpenLayers.Strategy.Fixed()],
    protocol: new OpenLayers.Protocol.HTTP({
    url: "http://www.carnethy.com/maps/wed_training/2013/gpx/20-Mar-13-fast.gpx",
    format: new OpenLayers.Format.GPX({extractWaypoints: true, extractRoutes: true, extractAttributes: true})
            }),
                styleMap: gpxStyles,
                projection: new OpenLayers.Projection("EPSG:4326")

            });

            map.addLayer(lgpx); 
            // fit map to bounds of window and add start pin 
            lgpx.events.register("loadend", lgpx, function() {
            this.map.zoomToExtent(this.getDataExtent());
            var startPoint = this.features[0].geometry.components[0];               
            layerMarkers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(startPoint.x, startPoint.y),icon));
                    });

    // Add the Layer with the GPX Track slow run
    // This is the layer I am practising on
        var lgpx2 = new OpenLayers.Layer.Vector("wed training slow", {
        strategies: [new OpenLayers.Strategy.Fixed()],
        protocol: new OpenLayers.Protocol.HTTP({
        url: "http://www.carnethy.com/maps/wed_training/2013/gpx/20-Mar-13-slow.gpx",
        format: new OpenLayers.Format.GPX({extractWaypoints: true, extractRoutes: true, extractAttributes: true})                   
        }),

        styleMap: gpxStyles2,
        projection: new OpenLayers.Projection("EPSG:4326"),
        });

        map.addLayer(lgpx2);  

        // fit map to bounds of window and add start pin

        lgpx2.events.register("loadend", lgpx2, function() {
         this.map.zoomToExtent(this.getDataExtent());
         var startPoint = this.features[0].geometry.components[0];              
         layerMarkers.addMarker(new OpenLayers.Marker(new     OpenLayers.LonLat(startPoint.x, startPoint.y),icon));
        });

    // the non functional function

    function slowtrace()  
    {if (lgpx2.getVisibility() == true) 
    {lgpx2.setVisibility(false);}  
    else  
    {lgpx2.setVisibility(true);}} 

        var size = new OpenLayers.Size(21, 25);
        var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
        var icon = new     OpenLayers.Icon('http://www.carnethy.com/maps/mapping%20info/small_red_pin.png',size,offset);
        var icon2 = new OpenLayers.Icon('http://www.carnethy.com/maps/mapping%20info/small_blue_pin.png',size,offset);
    } 
```

```
<style type="text/css">
<!--
body {
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}
.mapposn {
    display: block;
    position: absolute;
    left: 0px;
    top: 0px;
    height: 100%;
    width: 100%;
}
#key {
    height: 40px;
    width: 360px;
    position: absolute;
    left: 50%;
    margin-left: -150px;
    font-family: Verdana, Geneva, sans-serif;
    font-size: small;
    background-color: #FFF;
    top: 25px;
    padding-left: 10px;
    padding-top: 3px;
    border: 1px solid #666;
}
#blue {
    width: 85px;
    display: inline;
    left: 105px;
    font-size: 2px;
    position: absolute;
    background-color: #36F;
    margin-top: 7px;
}
#red {
    width: 85px;
    display: inline;
    left: 105px;
    font-size: 2px;
    position: absolute;
    background-color: #C30;
    margin-top: 7px;
}  
-->
</style>
</head>

<body onLoad="init();">
<div class="mapposn" id="map"></div>
<div id="key"><span class="plaintext" style="color:#36F">
<input name="slow" type="checkbox" class="newstext" id="slow" onClick="slowtrace();" checked>
Slow run&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6.82 miles (10.98k) </span>
<div id="blue">&nbsp;</div><br>
<span class="plaintext" style="color:#C30">
<input name="Fast" type="checkbox" class="newstext" id="fast" checked>
Fast run&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7.93 miles (12.8k)</span>
<div id="red">&nbsp;</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:32:26.390

我已经使用 jquery 使它工作。它在命名的 div 中查看复选框是否已取消选中/切换。我从一个示例中改编了这段代码，所以真的不知道它为什么有效，或者为什么以前的版本没有。那么如果有人可以启发我吗？有没有办法在没有 jquery 的情况下做到这一点？

解决方案：添加jquery src的链接，从checkboxes中取出onclick事件...

```
<input name="slow" type="checkbox" class="newstext" id="slow"  checked> 
```

...并编写可见性函数：

```
$(document).ready(function(){
    function slowtrace()  
          {if (lgpx2.getVisibility() == true) 
         {lgpx2.setVisibility(false);}  
         else  
          {lgpx2.setVisibility(true);}}
    function fasttrace()  
          {if (lgpx.getVisibility() == true) 
         {lgpx.setVisibility(false);}  
         else  
          {lgpx.setVisibility(true);}}
$("#slow").on("change", slowtrace);
$("#fast").on("change", fasttrace);
}); 
```

# asp.net - 以编程方式添加更新面板

> ID：15591272
> 
> 赞同：0
> 
> 时间：2013-03-23T19:43:29.660
> 
> 标签：asp.net, asp.net-ajax

我正在动态添加更新面板。我也在创建一个动态表格，并且表格中有一个按钮控件。当我单击按钮时，我只想再次加载表格。因此，我将此表添加到更新面板 UpdatePanel1.ContentTemplateContainer.Controls.Add(table); 我将更新面板添加到页面 placeHolder1.Controls.Add(UpdatePanel1);

但是当我点击按钮时，整个页面都被加载了。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:55:39.153

我终于解决了...

我需要设置 EnablePartialRendering=true。在 scriptmanager 标签的母版页中。

这解决了我的问题。

# c# - ServiceStack.Text 中的数组反序列化不正确

> ID：15591276
> 
> 赞同：5
> 
> 时间：2013-03-23T19:43:46.210
> 
> 标签：c#, json, servicestack

我有这个 JSON：-

```
{"snippet-format":"raw","total":1,"start":1,"page-length":200,"results":[{"index":1,"uri":"/myproject/info.xml","path":"fn:doc(\"/myproject/info.xml\")","score":0,"confidence":0,"fitness":0,"content":"<root xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"\" xmlns:search=\"http://marklogic.com/appservices/search\"><content>Adams Project file</content></root>"}],"facets":{"lastmodified":{"type":"xs:dateTime","facetValues":[]}},"metrics":{"query-resolution-time":"PT0.002559S","facet-resolution-time":"PT0.00111S","snippet-resolution-time":"PT0.000043S","total-time":"PT0.0039S"}} 
```

我正在使用这个对象反序列化：-

```
public class SearchResponse : MarkLogicObject {
  // response fields
  public string SnippetFormat {get;set;}
  public int Total {get;set;}
  public int Start {get;set;}
  public int PageLength {get;set;}
  public SearchResult[] Results { get; set; }
  public string Warning {get;set;}

  public override string ToString ()
  {
    return "SnippetFormat: " + SnippetFormat + ", Total: " + Total + ", Start: " + Start + ", Warning: " + Warning;
  }

  public static SearchResponse ParseJson(string json) {
    var map = JsonObject.Parse(json);

    return new SearchResponse {
      Total = int.Parse (map["total"]),
      Start = int.Parse (map["start"]),
      PageLength = int.Parse (map ["page-length"]),
      SnippetFormat = map ["snippet-format"],
      Warning = map["warning"],
      Results = map["results"].FromJson<SearchResult[]>() // why doesn't this deserialise properly? It creates a SearchResponse object mirroring this one instead.
    };
  }
}

// Sub elements of SearchResponse

public class SearchResult
{
  public string Uri {get;set;}
  public long Index { get; set; }
  public string Path {get;set;}
  public double Score {get;set;}
  public double Fitness {get;set;}
  public double Confidence {get;set;}
  public string Content { get; set; } // JSON or XML content (probably XML, no matter what ?format=json says)

  public override string ToString ()
  {
    return string.Format ("[SearchResult: Uri={0}, Index={1}, Path={2}, Score={3}, Fitness={4}, Confidence={5}, Content={6}]", Uri, Index, Path, Score, Fitness, Confidence, Content);
  }
} 
```

SearchResponse 本身被解释得很好（耶！）但 Search Result 子对象不正确 - 它看起来就像顶级 SearchResponse。

以下是以下日志行给我的信息：-

```
HttpWebResponse webResponse = restClient.Get<HttpWebResponse>(completePath("/v1/search",qp));

  using (var stream = webResponse.GetResponseStream())
  using (var sr = new StreamReader(stream)) {
    var text = sr.ReadToEnd();
    log.log ("response text: " + text);
    result = text.FromJson<SearchResponse>();
  }

  log.log ("RESULT: " + result.ToString ());
  for (int i = 0; i < result.Results.Length; i++) {
    log.log ("Result " + i + ": " + result.Results[i].ToString());
  } 
```

此日志输出：-

```
19:30:24 | SparkleMLLogger | RESULT: SnippetFormat: raw, Total: 1, Start: 1, Warning: 
19:30:24 | SparkleMLLogger | Result: SnippetFormat: raw, Total: 1, Start: 1, Warning: 
```

任何人都知道如何解决它？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T20:04:18.517

如果您选择动态解析 JSON，则从 JsonObject 检索的值默认为转义的标量值。如果要解析数组，则需要使用`T.ArrayObjects()`扩展方法，例如：

```
JsonArrayObjects results = JsonObject.Parse(json).ArrayObjects("results");
string url = results[0]["uri"];
url.Print(); // /myproject/info.xml 
```

如果您想从**JsonObject**获取原始的未转义值，您需要通过该`GetUnescaped()`方法检索它，例如：

```
SearchResult[] typedResults = JsonObject.Parse(json)
    .GetUnescaped("results")
    .FromJson<SearchResult[]>();

typedResults.PrintDump(); 
```

输出：

```
[
    {
        Uri: /myproject/info.xml,
        Index: 1,
        Path: "fn:doc(""/myproject/info.xml"")",
        Score: 0,
        Fitness: 0,
        Confidence: 0,
        Content: "<root xmlns:xs=""http://www.w3.org/2001/XMLSchema"" xmlns="""" xmlns:search=""http://marklogic.com/appservices/search""><content>Adams Project file</content></root>"
    }
] 
```

# java - 将行添加到 DefaultTableModel 时 JTable 图形未更新

> ID：15591279
> 
> 赞同：1
> 
> 时间：2013-03-23T19:43:58.750
> 
> 标签：java, swing, jdbc, jtable, event-dispatch-thread

我的 prog 有这个可爱的问题（我是菜鸟）我想给我的 prog 一些动画，我希望拆分面板中的分隔线从 gbPanel.getHeight()(MAX height) 移动到 Border.getHeight （）（最小高度）使用 16 像素的表格行长度，如果我对变量执行 System.out.println，程序似乎可以创造奇迹但是！桌子上的分隔线和一切都等到时间结束才在窗口中显示出来......我第一次尝试解决它或至少检查原因是否是添加一个 Thread.sleep 但这只是让程序等待在 while 结束和窗口更新之前很多。然后我尝试强制窗口在一段时间内更新，但这也不起作用。有人介意帮助我吗？

```
/* this display one row of data and makes the splitpanel divider -16 with each row */
public void DespliegaTD() {
DefaultTableModel jModel = new DefaultTableModel();
    jTable1.setModel(jModel);
    jModel.setColumnIdentifiers(new Object[]{"Num","Tarjeta","Cuenta","Fecha Trx","Monto","Descripción","Tipo POS","Cod Resp", "Moneda","Autorización","MCC","Resultado"});

    try {
        ResultSet rs = Query(tDebito.getText(),cuenta.getText(),fechaInicio.getText(),fechaFinal.getText());
        while (rs.next()){
            if ((dbPane.getHeight()-(rs.getRow()*jTable1.getRowHeight())) >= (Border.getHeight()-1)) 
                dbPane.setDividerLocation((dbPane.getHeight()-(rs.getRow()*jTable1.getRowHeight())));
            jModel.addRow(new Object[] {rs.getRow(),rs.getString(1),rs.getString(2),dateFormat4.format(dateFormat3.parse(rs.getString(3))),rs.getString(4),rs.getString(5),rs.getString(6),rs.getString(7),rs.getString(8),rs.getString(9),rs.getString(10),rs.getString(11)});
        }
    } catch (SQLException ex) {
        Logger.getLogger(BVtarjetas.class.getName()).log(Level.SEVERE, null, ex);
    } catch (ParseException ex) {
        Logger.getLogger(BVtarjetas.class.getName()).log(Level.SEVERE, null, ex);
    } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:46:50.683

您的问题是尝试在 Swing 事件线程（又名 Event Dispatch Thread 或 EDT）上长时间运行的过程中制作动画。解决方案是使用后台线程，例如通过 SwingWorker。

# python - 用生成器模拟索引方法

> ID：15591286
> 
> 赞同：2
> 
> 时间：2013-03-23T19:44:30.410
> 
> 标签：python, filter, python-3.x

Python 3 中的函数允许我们从一个匹配过滤器函数中定义的任意条件`filter`的元素返回。`Iterable`我希望能够做类似的事情，除了返回满足条件的元素，我想返回元素的*索引*。（类似于对象的`index`方法`list`）

```
>>> stuff = ("foo", "bar", "baz")
>>> f = filter(lambda x: x == "baz", stuff)
>>> [e for e in f]
['baz'] # Here I want the integer 2 because "baz" is at index 2 
```

当然，我意识到在这个简单的例子中我可以说：

```
stuff = ["foo", "bar", "baz"]
index = stuff.index("baz") 
```

但关键是，我希望能够使用任意过滤器函数和任意 Iterables（不仅仅是列表！）

有没有一种方便的方法可以在不手动处理函数的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T19:48:05.290

我会使用列表理解：

```
>>> [i for i,x in enumerate(stuff) if x == "baz"]
[2] 
```

或生成器表达式：

```
>>> gen = (i for i,x in enumerate(stuff) if x == "baz")
>>> list(gen)
[2] 
```

# python - 如何根据它们的位置计算盒子的数量？

> ID：15591287
> 
> 赞同：3
> 
> 时间：2013-03-23T19:44:31.697
> 
> 标签：python, pygame

我正在开发一个基于 python 内存的游戏，并且根据光标的位置查找用户单击的框数时遇到问题。

我已经有了这个：

```
number = ev.pos[y]//boxsize*numboxsx+ev.pos[x]//boxsize 
```

（通过这条线，我得到了您在图片左侧看到的红色）

但我必须考虑：`mx`并且`my`，它们是边距，因为框居中。（我在图片右侧以绿色显示的内容）。

那么，如何修改行以获取带边距的框数？

![](../Images/df790046665eeec52484e7fdc3042023.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T19:49:17.660

您需要从光标位置减去边距。将其视为从绝对坐标（光标在屏幕上的位置）转换为相对坐标（光标相对于框的位置）。

```
relx, rely = ev.pos[x] - mx, ev.pos[y] - my
number = rely//boxsize*numboxsx + relx//boxsize 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:37:42.123

更好的方法是使用精灵和精灵碰撞。如果您将您的盒子定义为精灵，您可以检查精灵（您的鼠标）是否与您的盒子碰撞。这种方法的优点是您不必对坐标进行操作，并且将来您可以在屏幕上移动、调整大小或增加框的数量，而无需在此侧更改代码。

# javascript - jQuery 显示：没有子 div？

> ID：15591292
> 
> 赞同：-1
> 
> 时间：2013-03-23T19:45:12.293
> 
> 标签：javascript, jquery, html, animation, this

我在 div 容器元素上有一个 3D 翻转动画。它适用于悬停功能。这个元素有 2 个主要的子容器：**front**和**back**。

在前后容器内有一个子 div 容器，其中有一张图片。

```
<div class="element hover blog" id="_13" >
<div class="front shadow">
<div class="element-image-front"><div class="overlay"></div>
<img src="./Post thumbnail images/formlabs.jpg"/>
</div></div>
<div class="back">
<div class="element-image-back">
<img src="./Post thumbnail images/formlabs.jpg">
</div>
</div>
</div> 
```

在我的 css 中，后置容器和后置 img 容器不显示。

我想在悬停功能上显示块后容器和 img 容器。并在鼠标未悬停时不显示。

我在使用 $(this) 正确编写代码时遇到问题。我的脚本工作正常，但是我只想显示元素悬停的背面和 img 背面。因为我在同一页面上有很多元素

```
$(document).ready(function(){
    $('.hover').hover(function(){
        $(this).addClass('flip');
        $('.element-image-back img').css('display', 'block');
        $('.back').css('display', 'block');
    },function(){
        $(this).removeClass('flip');
        $('.hover').$('.element-image-back img').css('display', 'none');
        $('.hover').$('.back').css('display', 'none');
    });
}); 
```

我的CSS：

```
.element {
cursor: pointer;
width: 250px;
height: 180px;
margin: 3px;
float: left;
overflow: visible;
position: relative;
}
.element-image-front img{
position:absolute;
z-index: 3;
width: 100%;
height: 100%;
top: 0;
left: 0;
margin: 0;
padding: 0;
outline: 1px solid rgba(0,0,0,0.1);
overflow:hidden;
}
.element-image-back img{
position: absolute;
display: none;
z-index: 4;
width: 100%;
height: 100%;
top: 0;
left: 0;
margin: 0;
padding: 0;
opacity: 0.035;
-moz-transform: scaleX(-1);
-o-transform: scaleX(-1);
-webkit-transform: scaleX(-1);
transform: scaleX(-1);
}
.element .front {
position: absolute;
overflow: hidden;
z-index: 900;
width: 100%;
height: 100%;   
top: 0;
left: 0;
margin: 0;
padding: 0;
background: #333;
text-align: center;
-webkit-transform: rotateX(0deg) rotateY(0deg);
-webkit-transform-style: preserve-3d;
-webkit-backface-visibility: hidden;
-moz-transform: rotateX(0deg) rotateY(0deg);
-moz-transform-style: preserve-3d;
-moz-backface-visibility: hidden;
-o-transition: all .5s ease-in-out;
-ms-transition: all .5s ease-in-out;
-moz-transition: all .5s ease-in-out;
-webkit-transition: all .5s ease-in-out;
transition: all .5s ease-in-out;
}
.element.flip .front {
position: absolute;
z-index: 900;
width: 100%;
height: 100%;
background: #333;
-webkit-transform: rotateY(180deg);
-moz-transform: rotateY(180deg);
}
.element .back {
position: absolute;
display: none;
overflow: hidden;
z-index: 800;
width: 100%;
height: 100%;
top: 0;
left: 0;
margin: 0;
padding: 0;
background: #434343;        
-webkit-transform: rotateY(-180deg);
-webkit-transform-style: preserve-3d;
-webkit-backface-visibility: hidden;
-moz-transform: rotateY(-180deg);
-moz-transform-style: preserve-3d;
-moz-backface-visibility: hidden;
-o-transition: all .5s ease-in-out;
-ms-transition: all .5s ease-in-out;
-moz-transition: all .5s ease-in-out;
-webkit-transition: all .5s ease-in-out;
transition: all .5s ease-in-out;
}
.element.flip .back {
position: absolute;
z-index: 1000;
width: 100%;
height: 100%;
background: #434343; /***#191919***/
-webkit-transform: rotateX(0deg) rotateY(0deg);
-moz-transform: rotateX(0deg) rotateY(0deg);
-webkit-box-shadow: inset 0px 0px 12px rgba(0,0,0,0.4), 0px 0px 8px rgba(0,0,0,0.7);
-moz-box-shadow: inset 0px 0px 12px rgba(0,0,0,0.4), 0px 0px 8px rgba(0,0,0,0.7);
box-shadow: inset 0px 0px 12px rgba(0,0,0,0.4), 0px 0px 8px rgba(0,0,0,0.7);
}
.click .front {
cursor: pointer;
-webkit-transform: rotateX(0deg);
-moz-transform: rotateX(0deg);
}
.click.flip .front {
-webkit-transform: rotateX(180deg);
-moz-transform: rotateX(180deg);
}
.click .back {
cursor: pointer;
-webkit-transform: rotateX(-180deg);
-moz-transform: rotateX(-180deg);
}
.click.flip .back {
-webkit-transform: rotateX(0deg);
-moz-transform: rotateX(0deg);
} 
```

编辑：这里是 css 的小提琴：hover：

[http://fiddle.jshell.net/9B5mS/](http://fiddle.jshell.net/9B5mS/)

使用 css :hover ... 的动画仍然是一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T19:48:49.440

您的 jquery 链接错误`$('.hover').$('.element-image-back img')`：尝试像这样更改您的代码

```
$(document).ready(function () {
       $('.hover').hover(function () {
           $(this).addClass('flip');
           $('.element-image-back img').css('display', 'block');
           $('.back').css('display', 'block');
       }, function () {
           $(this).removeClass('flip');
           $('.element-image-back img').css('display', 'none');
           $('.back').css('display', 'none');
       });
   }); 
```

# php - RewriteRule Image 从 php 文件到另一个 php 脚本

> ID：15591297
> 
> 赞同：1
> 
> 时间：2013-03-23T19:45:31.023
> 
> 标签：php, image, .htaccess, mod-rewrite

我正在尝试使用[自适应图像](http://adaptive-images.com/)，并且将它与以结尾的普通链接图像一起使用没有问题，`.jpg, .png, .gif`但是当我使用一个文件系统时，一个 php 文件从目录中抓取一个未扩展的文件并使用标题`Content-Disposition: inline`来显示图像，htaccess 不会通过php文件正确运行它。

这是适用于普通链接图像的重写规则：

```
RewriteRule \.(?:jpe?g|gif|png)$ adaptive-images.php [NC,L] 
```

这是需要运行的图像链接的示例`adaptive-images.php`：

```
http://localhost/projects/file-system/getmedia.php?id=2&slug=35dq 
```

**我如何编写另一个重写规则来处理这些图像？**我目前正在使用此规则，但它只会制作损坏的图像（我尝试了一些其他规则但没有区别）：

```
RewriteRule ^getmedia.php$ adaptive-images.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T02:54:57.633

尽管我的 htaccess 规则可能有问题，但自适应图像 php 脚本本身并不适应 php 馈送图像。

**我使用的 htaccess 规则是：**

```
RewriteCond %{QUERY_STRING} !(^|&)noadaptive=(true)(&|$) [NC]
RewriteRule ^getmedia\.php.*$ adaptive-images.php [NC,L] 
```

这使我可以将所有生成的图像`getmedia.php`发送到`adaptive-images.php`其中，如果它具有`noadaptive=true`作为 get 参数，则它不使用脚本，因此我可以再次获得全尺寸图像。

**这是修改后的`adaptive-images.php`**

```
<?php

//sendErrorImage("there is a problem");

/* PROJECT INFO --------------------------------------------------------------------------------------------------------
   Version:   1.5.2
   Changelog: http://adaptive-images.com/changelog.txt

   Homepage:  http://adaptive-images.com
   GitHub:    https://github.com/MattWilcox/Adaptive-Images
   Twitter:   @responsiveimg

   LEGAL:
   Adaptive Images by Matt Wilcox is licensed under a Creative Commons Attribution 3.0 Unported License.

/* CONFIG ----------------------------------------------------------------------------------------------------------- */

/* MODIFICATIONS -------------------------------------------------------------------------------------------------------
    Mods by:        MLM from VisualPulse.net
    Description:    Added compatibility for php fed images.
                    Intended for use with a ambiguous file system that serve the files through a php file

    NOTE: These are unofficial modifications I made up to get this wonderful script to work with my file system.
*/

$resolutions = array(1382, 992, 768, 480); // the resolution break-points to use (screen widths, in pixels)
$cache_path = "ai-cache"; // where to store the generated re-sized images. Specify from your document root!
$jpg_quality = 100; // the quality of any generated JPGs on a scale of 0 to 100
$sharpen = TRUE; // Shrinking images can blur details, perform a sharpen on re-scaled images?
$watch_cache = TRUE; // check that the adapted image isn't stale (ensures updated source images are re-cached)
$browser_cache = 60 * 60 * 24 * 7; // How long the BROWSER cache should last (seconds, minutes, hours, days. 7days by default)

/* END CONFIG ----------------------------------------------------------------------------------------------------------
------------------------ Don't edit anything after this line unless you know what you're doing -------------------------
--------------------------------------------------------------------------------------------------------------------- */

/* get all of the required data from the HTTP request */
$document_root = $_SERVER['DOCUMENT_ROOT'];
$requested_uri = parse_url(urldecode($_SERVER['REQUEST_URI']), PHP_URL_PATH);
$requested_uri_more_stuff = parse_url(urldecode($_SERVER['REQUEST_URI']));
$requested_file = basename($requested_uri);
//$source_file = $document_root . $requested_uri;

file_put_contents('array.txt', var_export($requested_uri_more_stuff, TRUE));

if(pathinfo($requested_file, PATHINFO_EXTENSION) == 'php')
    $source_file = 'http://' . $_SERVER['HTTP_HOST'] . $requested_uri. ((!empty($requested_uri_more_stuff['query']) ? ('?' . $requested_uri_more_stuff['query']) : '') . (((parse_url($_SERVER['REQUEST_URI'], PHP_URL_QUERY) == NULL) ? '?' : '&') . 'noadaptive=true'));
else
    $source_file = $document_root . $requested_uri;

$resolution = FALSE;

//sendErrorImage(pathinfo($requested_file, PATHINFO_EXTENSION));
//sendErrorImage($source_file);

/* Mobile detection 
   NOTE: only used in the event a cookie isn't available. */
function is_mobile()
{
    $userAgent = strtolower($_SERVER['HTTP_USER_AGENT']);
    return strpos($userAgent, 'mobile');
}

/* Does the UA string indicate this is a mobile? */
if (!is_mobile()) {
    $is_mobile = FALSE;
} else {
    $is_mobile = TRUE;
}

// does the $cache_path directory exist already?
if (!is_dir("$document_root/$cache_path")) { // no
    if (!mkdir("$document_root/$cache_path", 0755, true)) { // so make it
        if (!is_dir("$document_root/$cache_path")) { // check again to protect against race conditions
            // uh-oh, failed to make that directory
            sendErrorImage("Failed to create cache directory at: $document_root/$cache_path");
        }
    }
}

/* helper function: Send headers and returns an image. */
function sendImage($filename, $browser_cache)
{
    $extension = strtolower(pathinfo($filename, PATHINFO_EXTENSION));
    if (in_array($extension, array('png', 'gif', 'jpeg'))) {
        header("Content-Type: image/" . $extension);
    } else {
        header("Content-Type: image/jpeg");
    }
    header("Cache-Control: private, max-age=" . $browser_cache);
    header('Expires: ' . gmdate('D, d M Y H:i:s', time() + $browser_cache) . ' GMT');
    header('Content-Length: ' . filesize($filename));
    readfile($filename);
    exit();
}

/* helper function: Create and send an image with an error message. */
function sendErrorImage($message)
{
    /* get all of the required data from the HTTP request */
    $document_root = $_SERVER['DOCUMENT_ROOT'];
    $requested_uri = parse_url(urldecode($_SERVER['REQUEST_URI']), PHP_URL_PATH);
    $requested_file = basename($requested_uri);
    $source_file = $document_root . $requested_uri;

    if (!is_mobile()) {
        $is_mobile = "FALSE";
    } else {
        $is_mobile = "TRUE";
    }

    $im = ImageCreateTrueColor(800, 300);
    $text_color = ImageColorAllocate($im, 233, 14, 91);
    $message_color = ImageColorAllocate($im, 91, 112, 233);

    ImageString($im, 5, 5, 5, "Adaptive Images encountered a problem:", $text_color);
    ImageString($im, 3, 5, 25, $message, $message_color);

    ImageString($im, 5, 5, 85, "Potentially useful information:", $text_color);
    ImageString($im, 3, 5, 105, "DOCUMENT ROOT IS: $document_root", $text_color);
    ImageString($im, 3, 5, 125, "REQUESTED URI WAS: $requested_uri", $text_color);
    ImageString($im, 3, 5, 145, "REQUESTED FILE WAS: $requested_file", $text_color);
    ImageString($im, 3, 5, 165, "SOURCE FILE IS: $source_file", $text_color);
    ImageString($im, 3, 5, 185, "DEVICE IS MOBILE? $is_mobile", $text_color);
    //ImageString($im, 3, 5, 205, "Resolution: $resolution", $text_color); // Doesn't work

    header("Cache-Control: no-store");
    header('Expires: ' . gmdate('D, d M Y H:i:s', time() - 1000) . ' GMT');
    header('Content-Type: image/jpeg');
    ImageJpeg($im);
    ImageDestroy($im);
    exit();
}

/* sharpen images function */
function findSharp($intOrig, $intFinal)
{
    $intFinal = $intFinal * (750.0 / $intOrig);
    $intA = 52;
    $intB = -0.27810650887573124;
    $intC = .00047337278106508946;
    $intRes = $intA + $intB * $intFinal + $intC * $intFinal * $intFinal;
    return max(round($intRes), 0);
}

/* refreshes the cached image if it's outdated */
function refreshCache($source_file, $cache_file, $resolution)
{
    if (file_exists($cache_file)) {
        // not modified
        if (filemtime($cache_file) >= filemtime($source_file)) {
            return $cache_file;
        }

        // modified, clear it
        unlink($cache_file);
    }
    return generateImage($source_file, $cache_file, $resolution);
}

/* generates the given cache file for the given source file with the given resolution */
function generateImage($source_file, $cache_file, $resolution)
{
    global $sharpen, $jpg_quality;

    $extension = strtolower(pathinfo($source_file, PATHINFO_EXTENSION));

    // Check the image dimensions
    $dimensions = getimagesize($source_file);
    $width = $dimensions[0];
    $height = $dimensions[1];

    //sendErrorImage($width . ' ' . $resolution);
    // Do we need to downscale the image?
    if ($width <= $resolution) { // no, because the width of the source image is already less than the client width
        return $source_file;
    }

    // We need to resize the source image to the width of the resolution breakpoint we're working with
    $ratio = $height / $width;
    $new_width = $resolution;
    $new_height = ceil($new_width * $ratio);
    $dst = ImageCreateTrueColor($new_width, $new_height); // re-sized image

    switch ($extension) {
        case 'png':
            $src = @imagecreatefrompng($source_file); // original image
            break;
        case 'gif':
            $src = @imagecreatefromgif($source_file); // original image
            break;
        default:

            //imagecreatefromstring(file_get_contents($source_file));
            $src = @imagecreatefromjpeg($source_file); // original image
            ImageInterlace($dst, true); // Enable interlancing (progressive JPG, smaller size file)
            break;
    }

    if ($extension == 'png') {
        imagealphablending($dst, false);
        imagesavealpha($dst, true);
        $transparent = imagecolorallocatealpha($dst, 255, 255, 255, 127);
        imagefilledrectangle($dst, 0, 0, $new_width, $new_height, $transparent);
    }

    ImageCopyResampled($dst, $src, 0, 0, 0, 0, $new_width, $new_height, $width, $height); // do the resize in memory
    ImageDestroy($src);

    // sharpen the image?
    // NOTE: requires PHP compiled with the bundled version of GD (see http://php.net/manual/en/function.imageconvolution.php)
    if ($sharpen == TRUE && function_exists('imageconvolution')) {
        $intSharpness = findSharp($width, $new_width);
        $arrMatrix = array(
            array(-1, -2, -1),
            array(-2, $intSharpness + 12, -2),
            array(-1, -2, -1)
        );
        imageconvolution($dst, $arrMatrix, $intSharpness, 0);
    }

    $cache_dir = dirname($cache_file);

    //sendErrorImage($cache_dir);

    // does the directory exist already?
    if (!is_dir($cache_dir)) {
        if (!mkdir($cache_dir, 0755, true)) {
            // check again if it really doesn't exist to protect against race conditions
            if (!is_dir($cache_dir)) {
                // uh-oh, failed to make that directory
                ImageDestroy($dst);
                sendErrorImage("Failed to create cache directory: $cache_dir");
            }
        }
    }

    if (!is_writable($cache_dir)) {
        sendErrorImage("The cache directory is not writable: $cache_dir");
    }

    // save the new file in the appropriate path, and send a version to the browser
    switch ($extension) {
        case 'png':
            $gotSaved = ImagePng($dst, $cache_file);
            break;
        case 'gif':
            $gotSaved = ImageGif($dst, $cache_file);
            break;
        default:
            $gotSaved = ImageJpeg($dst, $cache_file, $jpg_quality);
            break;
    }
    ImageDestroy($dst);

    if (!$gotSaved && !file_exists($cache_file)) {
        sendErrorImage("Failed to create image: $cache_file");
    }

    return $cache_file;
}

//sendErrorImage($source_file);
// check if the file exists at all
if(pathinfo($requested_file, PATHINFO_EXTENSION) != 'php')
{
    if (!file_exists($source_file)) {
        //sendErrorImage('404 ' . $source_file);
        header("Status: 404 Not Found");
        exit();
    }
}
else if(pathinfo($requested_file, PATHINFO_EXTENSION) == php)
{

}

/* check that PHP has the GD library available to use for image re-sizing */
if (!extension_loaded('gd')) { // it's not loaded
    if (!function_exists('dl') || !dl('gd.so')) { // and we can't load it either
        // no GD available, so deliver the image straight up
        trigger_error('You must enable the GD extension to make use of Adaptive Images', E_USER_WARNING);
        sendImage($source_file, $browser_cache);
    }
}

/* Check to see if a valid cookie exists */
if (isset($_COOKIE['resolution'])) {
    $cookie_value = $_COOKIE['resolution'];

    // does the cookie look valid? [whole number, comma, potential floating number]
    if (!preg_match("/^[0-9]+[,]*[0-9\.]+$/", "$cookie_value")) { // no it doesn't look valid
        setcookie("resolution", "$cookie_value", time() - 100); // delete the mangled cookie
    } else { // the cookie is valid, do stuff with it
        $cookie_data = explode(",", $_COOKIE['resolution']);
        $client_width = (int)$cookie_data[0]; // the base resolution (CSS pixels)
        $total_width = $client_width;
        $pixel_density = 1; // set a default, used for non-retina style JS snippet
        if (@$cookie_data[1]) { // the device's pixel density factor (physical pixels per CSS pixel)
            $pixel_density = $cookie_data[1];
        }

        rsort($resolutions); // make sure the supplied break-points are in reverse size order
        $resolution = $resolutions[0]; // by default use the largest supported break-point

        // if pixel density is not 1, then we need to be smart about adapting and fitting into the defined breakpoints
        if ($pixel_density != 1) {

            $total_width = $client_width * $pixel_density; // required physical pixel width of the image

            // the required image width is bigger than any existing value in $resolutions
            if ($total_width > $resolutions[0]) {
                // firstly, fit the CSS size into a break point ignoring the multiplier
                foreach ($resolutions as $break_point) { // filter down
                    if ($total_width <= $break_point) {
                        $resolution = $break_point;
                    }
                }
                // now apply the multiplier
                $resolution = $resolution * $pixel_density;
            } // the required image fits into the existing breakpoints in $resolutions
            else {
                foreach ($resolutions as $break_point) { // filter down
                    if ($total_width <= $break_point) {
                        $resolution = $break_point;
                    }
                }
            }
        } else { // pixel density is 1, just fit it into one of the breakpoints
            foreach ($resolutions as $break_point) { // filter down
                if ($total_width <= $break_point) {
                    $resolution = $break_point;
                }
            }
            //sendErrorImage($client_width . " " . $resolution . " " . $pixel_density . " | " . $total_width);
        }
    }
}

/* No resolution was found (no cookie or invalid cookie) */
if (!$resolution) {
    // We send the lowest resolution for mobile-first approach, and highest otherwise
    $resolution = $is_mobile ? min($resolutions) : max($resolutions);
}

/* if the requested URL starts with a slash, remove the slash */
if (substr($requested_uri, 0, 1) == "/") {
    $requested_uri = substr($requested_uri, 1);
}

/* whew might the cache file be? */
if(pathinfo($requested_file, PATHINFO_EXTENSION) == 'php')
{
    $getstring = '';
    foreach($_GET as $key => $item)
    {
        $getstring .= $key . '~' . $item . '^';
    }

    $fileinfophp = pathinfo($_SERVER['REQUEST_URI']);
    //sendErrorImage($getstring);
    $cache_file = $document_root . "/$cache_path/$resolution/" . 'php/' . $fileinfophp['filename'] . '%' . $getstring;
}
else
    $cache_file = $document_root . "/$cache_path/$resolution/" . $requested_uri;

/* Use the resolution value as a path variable and check to see if an image of the same name exists at that path */
if (file_exists($cache_file)) { // it exists cached at that size
    if ($watch_cache) { // if cache watching is enabled, compare cache and source modified dates to ensure the cache isn't stale
        $cache_file = refreshCache($source_file, $cache_file, $resolution);
    }

    sendImage($cache_file, $browser_cache);
}

//sendErrorImage('gen');
/* It exists as a source file, and it doesn't exist cached - lets make one: */
$file = generateImage($source_file, $cache_file, $resolution);
//file_put_contents('image.jpg', $file);
sendImage($file, $browser_cache); 
```

# windows-8 - 是否有可供开发人员使用的 Windows 应用商店 Web 服务？

> ID：15591300
> 
> 赞同：0
> 
> 时间：2013-03-23T19:45:59.320
> 
> 标签：windows-8, microsoft-metro, windows-store-apps

是否有可供开发人员使用的 Windows 应用商店 Web 服务？

我需要访问有关商店中应用程序的公共信息。

# c++ - 编译错误：“字符串”没有命名类型

> ID：15591306
> 
> 赞同：-5
> 
> 时间：2013-03-23T19:46:32.103
> 
> 标签：c++

我有 2 个编译错误，我一直在尝试修复但没有得到任何结果。这是 2 个错误 'string' does not name a type on line 80 `s' undeclared (first use this function) on line 87

有人可以指出我正确的方向吗

```
#include <iostream>
#include <string>

using namespace std;

//class type declared
  class Meeting
  {
    private:
     string speaker;
     string topic;
     string venue;
     string date;
   public:
    Meeting();
    void setSpeaker(string s);
    void setTopic(string t);
    void setVenue(string v);
    void setDate(string d);
    string getSpeaker();
    string getTopic();
    string getVenue();
    string getDate();

 };

   //member functions for class Meeting
   Meeting::Meeting()
   {
    string speaker = " ";
    string topic = " ";

string venue = " ";
  string date = " ";
}

//mutators to set member variables to vale given
void Meeting::setSpeaker(string s)
{
     speaker = s;
}
void Meeting::setTopic(string t)
{
     topic = t;
}
void Meeting::setVenue(string v)
{
     venue = v;
}
void Meeting::setDate(string d)
{
     date = d;
}

//Accessors to retrieve data from each of the member variables
string Meeting::getSpeaker()
{
    return speaker;
}
string Meeting::getTopic()
{
    return topic;
}
string Meeting::getVenue()
{
    return venue;
}
string Meeting::getDate()
{
    return date;
}

//main using the class
int main()
{
         Meeting mMeeting; //instance of Meeting Class
   Meeting
         string s;     // error `string' does not name a type 
         string t;
         string v;
         string d;

    // Enter Meeting Information
    cout << "Enter Speaker name and surname: ";
         getline(cin, s);     // error `s' undeclared (first use this function) 
         mMeeting.setSpeaker(s);
    cout << "Enter Topic: ";
         cin >> t;
         mMeeting.setTopic(t);
    cout << "Enter Venue: ";
         cin >> v;
         mMeeting.setVenue(v);
    cout << "Enter Date: ";
         cin >> d;
         mMeeting.setDate(d);

    //Display Meeting details
    cout << "\nSpeaker at meeting: " << mMeeting.getSpeaker() << endl;
    cout << "Topic at meeting: " << mMeeting.getTopic() << endl;
    cout << "Venue of meeting: " << mMeeting.getVenue() << endl;
    cout << "Date of meeting: " << mMeeting.getDate() << endl;

 system ("pause");
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T19:49:27.763

那是因为这条线

```
 Meeting mMeeting; //instance of Meeting Class
   Meeting //this line is creating error, remove this line
     string s;     // error `string' does not name a type 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T19:51:05.560

除了其他人提到的错误之外，这是一个语义错误：

```
Meeting::Meeting()
{
    string speaker = " ";
    string topic = " ";
    string venue = " ";
    string date = " ";
} 
```

在这里，您打算为类成员分配 value `" "`，但实际上您要做的是定义 4 个本地字符串变量并使用`" "`. 要获得预期的结果，您应该这样做：

```
Meeting::Meeting()
{
    speaker = " ";
    topic = " ";
    venue = " ";
    date = " ";
} 
```

上面的函数体按照您的意图为 4 个类成员分配了值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T19:49:19.723

删除`Meeting`第 79 行，它会编译。

# javascript - jquery - 将侦听器添加到生成的 html

> ID：15591307
> 
> 赞同：2
> 
> 时间：2013-03-23T19:46:45.273
> 
> 标签：javascript, jquery

在我的 .js 文件中，我有一个按钮侦听器，它生成以下内容：

```
$('#add').click(function(){
$('<div id="school-field'+i+'"><fieldset><a href="javascript:" id="remove'+i+'">Remove</a></fieldset></div>').fadeIn('slow').appendTo('.school');
}); 
```

我一直在尝试为添加的按钮生成侦听器，但我无法让它工作。我尝试在“a”上使用委托，但找到 div 的 id 是个问题。如果所有生成的 div id 相同（div id="school-field"），我确实让它工作，但它会删除最后添加的元素，而不是单击“remove'+i+'”的元素。我也尝试通过这样做在其中定义一个侦听器，但它会引发异常：

```
$('#remove'+i'').click(function(){
var div = document.getElementById("school-field'+i+'");
div.parentNode.removeChild(div);
}); 
```

我怎样才能让它正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T20:00:47.063

从 jQuery 1.7 开始，您应该使用[`on`](http://api.jquery.com/on/)，因为`live`和`bind`都已弃用。

```
$(document).on("click", ".delete", function(event){
    //Your code   
}); 
```

~~您可以使用`live`自动将新的 DOM 元素绑定到事件侦听器： http: [//api.jquery.com/live/](http://api.jquery.com/live/)~~

~~或者您`bind`在添加按钮的点击事件回调中手动添加它们。 [http://api.jquery.com/bind/](http://api.jquery.com/bind/)~~

您只需要使用一个类或另一个选择器来匹配事件侦听器的每个元素。

然后您可以使用[`closest`](http://api.jquery.com/closest/)来匹配父框。

它看起来类似于`$(this).closest('div').remove();`删除整个父 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T19:53:26.893

尝试`.on()`像这样使用

```
$("[id^='remove']").each(function() {
  var id = parseInt(this.id.replace("remove", ""));
  var elem = $("#remove" + id);

    $("#remove" + id).on('click',function(){
      var div = document.getElementById("#school-field"+id);
      div.parentNode.removeChild(div);
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T19:59:51.197

如何使用 'a[id*=remove]' 作为 on 方法的选择器。例如：

```
$('first common container your a tags are stored').on('click', 'a[id*=remove]', function () {
    // your code to remove elements
}); 
```

它是 on 方法的“版本”委托，带有一个与 id 属性中的模式匹配的精美选择器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T20:13:53.100

使用 jQuery 的[on 方法](http://api.jquery.com/on/)，就像在另一个答案中提到的那样，但是使用发送到您的处理程序的 event.currentTarget 参数。

```
$('some container you keep your links').on('click', 'a[id*=remove]', function (event) {
    $el = $(event.currentTarget).parent();
    $el.remove();
}); 
```

使用 live 可以拥有类似的功能，但是从 jQuery 1.7 开始，该方法已被弃用 [这里](http://www.elijahmanor.com/2012/02/differences-between-jquery-bind-vs-live.html)是对使用 jQuery 附加事件的不同方法的精彩讨论

# c++ - C++ 到 pep/8 汇编语言帮助（链接数据结构）

> ID：15591313
> 
> 赞同：1
> 
> 时间：2013-03-23T19:47:10.640
> 
> 标签：c++, assembly

对于我的一个 CSCI 课程，我必须将此 C++ 程序翻译成 pep/8 中的程序集：

```
#include <iostream>
using namespace std;

struct node {
int data;
node* next;
};

int main() { 
node *first, *p;
int value, sum;
first = 0;
cin>>value;
while (value != -9999) {
p =first;
first = new node;
first->data = value;
first->next = p;
cin>>value;
}

for (p=first;p != 0; p = p->next) {
cout<<p->data<<' ';
}

sum = 0;
p = first;
while (p != 0) {
sum += p->data;
p = p->next;
}

cout <<"Sum: "<<sum<<endl;
return 0;
} 
```

到目前为止，这是我对汇编翻译的内容：

```
BR       main
data:    .EQUATE 0
next:    .EQUATE 2
;
;*********main()
first:   .EQUATE 6           ;local variables
p:       .EQUATE 4                     
value:   .EQUATE 2
sum:     .EQUATE 0

main:    SUBSP 8, i          
         LDA 0, i            ;first = 0
         STA first, s
         DECI value, s       ;cin>>value
while:   LDA value, s        ;while (value != -9999)
         CPA -9999, i
         BREQ endWh
         LDA first, s
         STA p, s            ;p=first
         LDA 4, i            ;first = new node
         CALL new
         STX first, s
         LDA value, s        ;first->data =value
         LDX data, i
         STA first, sxf
         LDA p, s            ;first->next = p
         LDX next, i
         STA first, sxf
         DECI value, s       ;cin>>value
         BR while
endWh:   LDA first, s         ;for (p=first
         STA p, s
for:     LDA p, s            ;p != 0
         CPA 0, i
         BREQ endFor
         LDX data, i         ;cout<<p->data
         DECO p, sxf
         CHARO ' ', i
         LDX next, i         ;p=p->next
         LDA p, sxf
         STA p, s
         BR for
endFor:  LDA 0, i
         STA sum, s          ;sum = 0
         LDA first, s        ;p = first
         STA p, s
while1:  LDA p, s            ;(while p != 0) 
         CPA 0, i
         BREQ endWh2
         LDX data, i          ;sum += p->data
         LDA p, sxf
         ADDA data, sxf                 
         STA sum, s        
         LDX next, i         ;p = p->next;
         LDA p, sxf
         STA p, s
         BR while1
endWh2:  LDA sum, s
         STRO msg1, d        ;"Sum = " 
         DECO sum, s         ;<<sum
         CHARO '\n', i       ;<<endl
         ADDSP 8, i
         STOP

msg1:    .ASCII "Sum: \x00"                          

;
;*******operator new
new:     LDX hpPtr, d
         ADDA hpPtr, d
         STA hpPtr, d
         RET0
hpPtr:   .ADDRSS heap
heap:    .BLOCK 1
         .END 
```

我无法获取

```
sum += p->data 
```

装配线工作，

```
 LDX data, i          
     LDA p, sxf
     ADDA data, sxf                 
     STA sum, s 
```

我想我在寻址模式或其他方面有问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T20:59:45.150

我在 PEP/8 上找不到很多好的信息，所以这有点像在黑暗中拍摄，但由于到目前为止没有其他答案，我会试一试：

在我看来，你不是在计算

`sum = p->data + sum`

但

`sum = p>data + some_weird_things_that's_improperly_addressed`

在我看来，应该是

```
 LDX data, i          
 LDA p, sxf   //load p->data into regA
 ADDA sum, s  //add sum to regA, regA now is p->data + sum               
 STA sum, s   //store regA back to sum 
```

# java - 遍历 HashMap，有两种方式：使用条目集进行迭代和使用枚举进行迭代

> ID：15591319
> 
> 赞同：1
> 
> 时间：2013-03-23T19:43:37.660
> 
> 标签：java, hash, map, iterator, key

HashMaps 应该以这两种方式迭代还是枚举被认为是错误的？我用两个迭代器函数做了一个简单的迭代器程序：

```
import java.util.*;

public class HashMapIterators
{
    public static void main(String[] args)
    {
        HashMap<String, Integer> hMap = new HashMap<String, Integer>();

        hMap.put("abc", 10);
        hMap.put("pqr", 20);
        hMap.put("asd", 30);
        hMap.put("xyz", 40);

        iteratorEnumeration(hMap);
        iteratorEntrySet(hMap);
    }

    public static void iteratorEnumeration(HashMap hMap)
    {
        System.out.println("iteratorEnumeration");

        Iterator it = hMap.keySet().iterator();
        Enumeration em = hMap.elements();               // doesn't work
        Enumeration em = new IteratorEnumeration(it);   // doesn't work

//      while(em.hasMoreElements())
        {
        }
    }

    public static void iteratorEntrySet(HashMap hMap)
    {
        System.out.println("iteratorEntrySet");

        Iterator it = hMap.entrySet().iterator();

        while(it.hasNext())
        {
            Map.Entry me = (Map.Entry)it.next();
            System.out.println("Key: [" + me.getKey() + "], Value: [" + me.getValue() + "]");
        }
    }
} 
```

iteratorEnumeration 函数不起作用，我猜这些方法（如 elements()）仅适用于 HashTable。如果我错了，请纠正我，我不知道什么时候适合使用什么功能。所以，我的主要问题是——我们是否应该通过在 entrySet 方法上设置一个迭代器来迭代一个 HashMap（请参阅我的 iteratorEntrySet 函数），这是唯一正确的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:54:02.903

第一个泛型，学习他们并爱他们

其次，keySet 还有一个`iterator()`迭代所有键的方法（`Enumeration`该类已弃用）

当我还需要每个键的值时，我会发现`entrySet`更好，这样我就可以避免搜索成本（取决于地图可以转到`O(n)`）

迭代代码归结为：

```
for(Map.Entry<KeyClass,ValueClass> e:hMap){
    KeyClass key = e.getKey();
    ValueClass value = e.getValue();
    //...
} 
```

如果我只需要密钥，我将使用 keySet 来避免`Map.entry<keyClass,ValueClass>`for 类型的额外膨胀

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:55:18.230

最简单的方法是使用新的[增强`for`循环](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)（Foreach），以及像这样的泛型：

```
static <K, V> void iterateForEach(Map<K, V> map)
{
    for(Map.Entry<K, V> entry : map.entrySet())
    {
        System.out.println("Key: [" + entry.getKey() + "], Value: [" + entry.getValue() + "]");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T19:54:09.973

是你与地图交互的方式吗？如果是这样，您可能使用了错误的数据结构。

无论如何，您的 iteratorEnumeration 方法的问题是，一旦您获得了键迭代器，就应该对其进行迭代，每次都从映射中获取值。你不需要打电话 `hMap.elements();`

# simulation - 经济生产者/消费者模拟

> ID：15591324
> 
> 赞同：1
> 
> 时间：2013-03-23T19:47:55.463
> 
> 标签：simulation, directed-acyclic-graphs, consumer, producer, max-flow

你好美妙的社区！

我目前在业余时间写一个小游戏。它发生在一个大星系中，玩家可以控制一些**星星**。在这些星星上，您可以构建**Buildings**，每个建筑物都有一定数量（0..*）的输入，并产生一定数量的输出。这些建筑物具有最大容量/吞吐量，并且按比例缩小其输入会按比例缩小其输出。我想找到一种预算算法来优化（或近似）所有建筑物的吞吐量。这似乎是某种最大流量问题，但我读过的流量优化算法都没有不同类型的输入或依赖输出。

我一直在玩的玩具“科技树”是：

```
Solar plant - None => 2 energy output.
Extractor   - 1 energy => 1 ore output
Refinery    - 1 energy, 1 ore => 1 metal
Shipyard    - 1 metal, 2 energy => 1 ship 
```

我愿意接受次优算法，并且我愿意保证输入/输出没有循环（它们从构建到构建形成 DAG）。这个想法是在没有玩家干预的情况下允许合理的吞吐量和科技树复杂性，因为在数百或数千颗星的规模上，允许玩家手动定义预算策略并不有趣，并且给没有生命的玩家一个独特的优势。

我目前的策略是建立一个有向无环图，给资源一个总排序（船比金属好比矿石比能源好），然后，循环遍历每个资源，找到最“后代”的建筑生产该资源，让它递归地贪婪地从其输入中获取（造船厂将需要 2 能量和 1 金属，然后精炼厂将获取 1 能量和 1 矿石等），然后在图表中找到任何“骗子”（太阳能发电厂提供 4 种能量，最大值为 2 种），缩减其生产并向前传播变化。为 DAG 解决所有问题后，从图中删除终端元素（造船厂），并从建筑物的最大吞吐量中减去每条边的“当前吞吐量”，然后对下一种资源重复该过程。我想如果有更好的方法，我会问比我聪明得多的人。:)

# javascript - JQuery ajax调用不呈现html

> ID：15591339
> 
> 赞同：0
> 
> 时间：2013-03-23T19:49:52.317
> 
> 标签：javascript, jquery

我正在对数据库服务器进行 ajax 调用以将图像作为 base64 编码字符串，服务器正在正确返回 base64 编码图像我确实在 firebug 中检查了这一点，我需要使用这个编码字符串作为锚的超参考在一个页面上。

这是我的客户代码

```
$.ajax({
        url: '../Handlers/ImageHandler.ashx',
        data: { ID: imageId },
        type: 'GET',
        dataType: 'text/plain',
        success: onAjaxSuccess,
        error: onAjaxFail
    });

function onAjaxSuccess(result) {
    var anchor = document.getElementById('hlImage0');

    var base64Image = 'data:image/png;base64,' + result;
    anchor.href = base64Image;
} 
```

这里的问题是锚元素**hlImage0**没有设置*href*属性，并且 onAjaxSuccess 回调在页面上没有呈现任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:53:31.470

图像应答器具有 href 属性！

尝试`anchor.href`改变`anchor.src`！

# asp.net - 更改 ASP HyperLinkColumn 的基本 URL

> ID：15591340
> 
> 赞同：1
> 
> 时间：2013-03-23T19:49:58.600
> 
> 标签：asp.net, .net

我有一个简单的代码来列出文件`DataGrid`。这是服务器端代码：

```
Dim dirInfo As New DirectoryInfo(Server.MapPath("~\images\"))
articleList.DataSource = dirInfo.GetFiles("*.*")
articleList.DataBind() 
```

.ASPX 页面标签：

```
 <asp:DataGrid runat="server" id="articleList" Font-Name="Verdana"
        AutoGenerateColumns="False" AlternatingItemStyle-BackColor="#eeeeee"
        HeaderStyle-BackColor="Navy" HeaderStyle-ForeColor="White"
        HeaderStyle-Font-Size="15pt" HeaderStyle-Font-Bold="True">
      <Columns>
        <asp:HyperLinkColumn DataNavigateUrlField="Name" DataTextField="Name" 
               HeaderText="File Name" Target="_blank"/>
        <asp:BoundColumn DataField="LastWriteTime" HeaderText="Last Write Time"
            ItemStyle-HorizontalAlign="Center" DataFormatString="{0:d}" />
        <asp:BoundColumn DataField="Length" HeaderText="File Size"
            ItemStyle-HorizontalAlign="Right" 
            DataFormatString="{0:#,### bytes}" />
      </Columns>
    </asp:DataGrid> 
```

它列出了文件，`http://localhost/images`但**.aspx**文件位置是`http://localhost/cp/list.aspx`然后超链接位置是这样`http://localhost/cp/myfile.jpg`的：因为文件位置是`http://localhost/images/myfile.jpg`.
我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:55:33.433

您可以使用 [DataNavigateUrlFormatString](http://msdn.microsoft.com/en-IN/library/system.web.ui.webcontrols.hyperlinkcolumn.datanavigateurlformatstring.aspx)

```
<asp:HyperLinkColumn DataNavigateUrlField="Name" DataTextField="Name"  DataNavigateUrlFormatString="http://localhost/images/{0}" HeaderText="File Name" Target="_blank"/> 
```

这`{0}`将是您的图像名称，即`Name`列值。

# c# - 基于浮动 div 扩展 div

> ID：15591346
> 
> 赞同：0
> 
> 时间：2013-03-23T19:50:33.633
> 
> 标签：c#, asp.net, css, html

CSS 新手的第二个布局问题。

我在站点母版页的 ASP.NET 布局中有生成的 .Main div。我添加了一个名为“Show.aspx”的新页面，并为此添加了一些 div。我想做的是根据'Show.aspx'的描述div的大小来扩展'.main'div

要添加，我在源服务器端添加了“描述”div，其中 .main 在站点主 CSS 页面中。

这是显示问题的屏幕截图：

![在此处输入图像描述](../Images/73db6517449b98d6d41995317d0126b9.png)

如图所示，白色的 .main div 没有展开。我尝试添加溢出：自动但再次无济于事。因为我在经过一些研究后在我的 div 上使用了浮动样式，所以这可能是问题所在，但我不知道为什么。

代码：

网站管理员.main：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
<title></title>
<link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />

</head>
<body>
<form runat="server">
<div class="page">

    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder>
    <div class="header">
        <div class="title">

            <h1>

             <img id="Img1" src = "Images/coffe pic.png" alt="" runat="server" />
                Coffee Stop

                </h1>
        </div>
        <div class="loginDisplay">
        </div>
        <div class="clear hideSkiplink">
            <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                    <asp:MenuItem Text="Shop Online" Value="Shop Online"></asp:MenuItem>
                    <asp:MenuItem Text="Contact Us" Value="Contact Us"></asp:MenuItem>
                    <asp:MenuItem Text="About Us" Value="About Us"></asp:MenuItem>
                </Items>
            </asp:Menu>
        </div>
    </div>
    <div class="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
    </div>
    <div class="clear">
    </div>
</div>
<div class="footer">

</div>
</form>
</body>
</html> 
```

我的服务器端添加了 Show.aspx 页面的 div：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="Show.aspx.cs" Inherits="ViewCDs.Show" %> 
```

```
 <asp:FormView ID="FormView1" runat="server" Height="141px">
       <EditItemTemplate>
           coffeeName:
           <asp:TextBox ID="coffeeNameTextBox" runat="server" 
               Text='<%# Bind("coffeeName") %>' />
           <br />
           coffeeOrigin:
           <asp:TextBox ID="coffeeOriginTextBox" runat="server" 
               Text='<%# Bind("coffeeOrigin") %>' />
           <br />
           coffeeStrength:
           <asp:TextBox ID="coffeeStrengthTextBox" runat="server" 
               Text='<%# Bind("coffeeStrength") %>' />
           <br />
           coffeeGrind:
           <asp:TextBox ID="coffeeGrindTextBox" runat="server" 
               Text='<%# Bind("coffeeGrind") %>' />
           <br />
           coffeePrice:
           <asp:TextBox ID="coffeePriceTextBox" runat="server" 
               Text='<%# Bind("coffeePrice") %>' />
           <br />
           coffeeQty:
           <asp:TextBox ID="coffeeQtyTextBox" runat="server" 
               Text='<%# Bind("coffeeQty") %>' />
           <br />
           coffeeRRP:
           <asp:TextBox ID="coffeeRRPTextBox" runat="server" 
               Text='<%# Bind("coffeeRRP") %>' />
           <br />
           <asp:LinkButton ID="UpdateButton" runat="server" CausesValidation="True" 
               CommandName="Update" Text="Update" />
           &nbsp;<asp:LinkButton ID="UpdateCancelButton" runat="server" 
               CausesValidation="False" CommandName="Cancel" Text="Cancel" />
       </EditItemTemplate>
       <InsertItemTemplate>
           coffeeName:
           <asp:TextBox ID="coffeeNameTextBox" runat="server" 
               Text='<%# Bind("coffeeName") %>' />
           <br />
           coffeeOrigin:
           <asp:TextBox ID="coffeeOriginTextBox" runat="server" 
               Text='<%# Bind("coffeeOrigin") %>' />
           <br />
           coffeeStrength:
           <asp:TextBox ID="coffeeStrengthTextBox" runat="server" 
               Text='<%# Bind("coffeeStrength") %>' />
           <br />
           coffeeGrind:
           <asp:TextBox ID="coffeeGrindTextBox" runat="server" 
               Text='<%# Bind("coffeeGrind") %>' />
           <br />
           coffeePrice:
           <asp:TextBox ID="coffeePriceTextBox" runat="server" 
               Text='<%# Bind("coffeePrice") %>' />
           <br />
           coffeeQty:
           <asp:TextBox ID="coffeeQtyTextBox" runat="server" 
               Text='<%# Bind("coffeeQty") %>' />
           <br />
           coffeeRRP:
           <asp:TextBox ID="coffeeRRPTextBox" runat="server" 
               Text='<%# Bind("coffeeRRP") %>' />
           <br />
           <asp:LinkButton ID="InsertButton" runat="server" CausesValidation="True" 
               CommandName="Insert" Text="Insert" />
           &nbsp;<asp:LinkButton ID="InsertCancelButton" runat="server" 
               CausesValidation="False" CommandName="Cancel" Text="Cancel" />
       </InsertItemTemplate>
       <ItemTemplate>

           <b>Origin:</b>
           <asp:Label ID="coffeeOriginLabel" runat="server" 
               Text='<%# Bind("coffeeOrigin") %>' />
           <br />

           <b>Grind:</b>
           <asp:Label ID="coffeeGrindLabel" runat="server" 
               Text='<%# Bind("coffeeGrind") %>' />
           <br />

           <b>Price: £</b>
           <asp:Label ID="coffeePriceLabel" runat="server" 
               Text='<%# Bind("coffeePrice") %>' />
           <br />

               <b>Strength:</b>
           <asp:Label ID="coffeeStrengthLabel" runat="server" 
               Text='<%# Bind("coffeeStrength") %>' />
           <br />

           <b>Stock Level:</b>
           <asp:Label ID="coffeeQtyLabel" runat="server" Text='<%# Bind("coffeeQty") %>' />
           <br />

       </ItemTemplate>
   </asp:FormView>
   <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
       ConnectionString="<%$ ConnectionStrings:CoffeeConnectionString %>" 
       SelectCommand="SELECT [coffeeName], [coffeeOrigin], [coffeeStrength], [coffeeGrind], [coffeePrice], [coffeeQty], [coffeeRRP] FROM [Coffees]">
   </asp:SqlDataSource>

   <br /> 
```

**豆子光滑课程

```
 <div style=" float:left; width: 165px; height: 40px;">
  <br />
      <b><asp:Label ID="Label2" runat="server" Text="Quantity:"></asp:Label></b>
 </div>

  <div style=" float:right; width: 165px; height: 40px;">
   <br />

      <asp:TextBox ID="TextBox1" runat="server" Width="40px">1</asp:TextBox>

 </div>
     <div style=" float:left; width: 165px; height: 40px;">
     <br />

         <asp:Button ID="Button1" runat="server" Text="Buy" />

 </div>

 <div>

</div>
</div>

<br />
<br />

<div id = "titleDescrip" style="position:absolute; top:445px; font-size:20pt;" runat="server" > 

</div> 

<div id="divDescrip" style="position:absolute; top:480px; width:925px;" runat="server"> 

</div>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:03:52.217

看到有几件事情你需要了解。

母版页和子页在运行时都合并为一个。

我的意思是假设您的母版页中有以下容器

```
<div class="main">
     <asp:ContentPlaceHolder id="mainContent" runat="server">
     </asp:ContentPlaceHolder">
</div> 
```

在你的子页面中，即`Show.aspx`，你有你的容器，比如

```
 <asp:Content id="mains" ContentPlaceHolderId="mainContent">
         <div class="pagecontent">
         </div>
         <div class="description">
         </div> 
   </asp:Content> 
```

然后在运行时它们会被渲染成这样（当然还有更多的容器）：

```
<div class="main">
    <div class="pagecontent">
    </div>
    <div class="description">
    </div>
</div> 
```

其次，你正在使用`position:absolute`你的内在元素，不要那样做。

当您这样做时`position:absolute`，您会从文档正常流程中删除该元素，所以现在，松散地说，父 div 并不关心其绝对定位的子元素的尺寸！

看到这个[小提琴](http://jsfiddle.net/manishmishra121/ECBhW/)。

无论你给内部 div 的高度是多少，main 总是相应地扩展，因为 main 没有定义高度，因此它的 height:auto

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:29:17.253

尝试

```
.main

{

display:table-column;
padding: 0px 12px;
margin: 12px 8px 8px 8px;
min-height: 420px;

} 
```

并添加显示：块；到儿童班**

# iphone - 快速查看的 RTF 文档 - iPhone SDK

> ID：15591347
> 
> 赞同：2
> 
> 时间：2013-03-23T19:50:40.087
> 
> 标签：iphone, ios, rtf, migradoc

我有一些使用 MigraDoc Foundation（包含在 PDFsharp 中）创建的 RTF 文档，其中包括表格。我正在尝试使用 UIWebView 和 QuickLook 从 iPhone 打开它们，但在这两种情况下，它只返回第一页并且被废话。

我尝试使用邮件应用程序预览相同的 RTF 文件，它显示了相同的结果。Mac 上的 Quick Look 以正确的格式显示文档。您知道如何呈现此 RTF 文档吗？

谢谢！

# java - 全局可访问的对象 - 最优雅的方式

> ID：15591349
> 
> 赞同：0
> 
> 时间：2013-03-23T19:50:41.570
> 
> 标签：java, android

假设我想编写一个即时通讯客户端。
我猜至少会有 2 个活动：

UserManagerActivity - 允许管理帐户和登录。
MainActivity - 显示联系人列表等。

但如果我这样做，将会有一些对象应该可供他们两个访问：

ConnectionManager - 将用于登录、发送/接收消息等。
UserManager - 保存有关用户的信息。
MusicPlayer - 播放声音。

那么，让两个活动都访问这些对象的最优雅的方法是什么？

我听说过 4 种可能性：
- 使用单例模式。
- 使用 Bundle 在活动之间传递对象。
- 扩展应用程序类。
- 使用服务类（对我来说似乎很复杂）。

1.  你认为哪个选项是最好的？

2.  全球可访问的课程不是一个糟糕项目的标志吗？

3.  如何学习设计优雅高效的应用程序“骨架”？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T20:02:03.487

Android 创建了 Application 类（如果只是部分）来处理这种情况。他们保证只会有 1 个实例。

[http://developer.android.com/guide/faq/framework.html](http://developer.android.com/guide/faq/framework.html)

# android - mediaplayer seekTo() 偏移量（以字节为单位）

> ID：15591350
> 
> 赞同：1
> 
> 时间：2013-03-23T19:50:51.397
> 
> 标签：android, android-mediaplayer

我正在寻找类`seekto()`方法使用的字节偏移量`MediaPlayer`。

我想知道是否有办法以某种方式直接检索这些信息，如果没有，是否可以自己计算：如果媒体文件的元数据中有注册比特率，我想在 I 中寻找 10 秒可以使用以下计算：

```
10(secs)*(bit rate per second)/8 
```

我可以假设使用类`MediaPlayer`检索比特率信息吗？`MediaMetadataRetriever`

我已阅读以下内容： [MediaPlayer.seekTo(int msecs) 的准确性](https://stackoverflow.com/questions/6845161/accuracy-of-mediaplayer-seektoint-msecs/6908256#6908256) 并且我知道可变比特率的问题，但我不是在寻找`seekto()`方法的准确性，而是如何获取/计算它用于获取新数据的偏移量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T00:52:27.253

您`seekTo()`基于偏移量实施的目标是新颖的，但同样存在多个挑战。在进入实现之前，先对和进行`seekTo()`一些说明。这两个类都在内部使用一个对象来检索信息。因此*不*包括类。`MediaPlayer``MediaMetadataRetriever``MediaExtractor``metadata``MediaPlayer` *`MediaMetadataRetriever`*

 *首先，让我们考虑提取比特率。`MediaPlayer`是一个应该支持多种文件格式的通用实现。因此，对于您的设计，您需要确保`bitrate`参数是由系统支持的所有文件格式提取的，例如视听格式，例如，，`MP4`等或仅音频格式，例如等。在最新的 android 实现中，我发现只是通过密钥暴露比特率。`MPEG-2 TS``AVI``Matroska``WAV``MP3``MP3Extractor``kKeyBitrate`

接下来，谈到您的算法，我发现基于大小的搜索存在以下挑战。

1.  `audio`和`video`轨道以交错方式存储。因此，`time * bitrate (in bytes)`由于输入数据的交错性质，不会直接有帮助。

2.  需要考虑起始偏移量。在文件中，有一些`metadata`或`boxes`存储在文件的开头是特定于文件格式的。您还必须考虑这个偏移量，这对于不同的格式会有所不同。

3.  如果您的输入有更多 mnumber 轨道，如`audio`, `video`，`text`或者更确切地说`audio`是电影中的多个轨道，那么问题将变得更加复杂。

4.  视频帧的大小通常不规则。即使采用**恒定比特率模型**，视频帧大小也可能因帧类型而显着变化。通常，与or`I-frame / IDR-Frame in H.264`相比，an 可以消耗大量位。这将对基于大小的实现带来实际困难。就I 和 P 帧的帧大小而言，可以很容易地观察到**1:5的比例**`P-frame``B-frame``seekTo()`

***   您已经承认的**可变比特率模型**有一定的影响。因此，我跳过这一点。** 

 **有了上述几点，在不让您灰心的情况下，我觉得`size`基于实现看起来很困难。***

# javascript - 表格内的表格包含动态创建的输入参数，这些参数未在 IE 9 和 10 中传递

> ID：15591354
> 
> 赞同：0
> 
> 时间：2013-03-23T19:51:32.527
> 
> 标签：javascript, forms, dom, internet-explorer-9, parameter-passing

```
var i = 0;
var a = 3;
function addNewAnswer(tableID) {

    var table = document.getElementById(tableID);
    if(i < 10)
    {   
        var rowCount = table.rows.length;
        var row = table.insertRow(rowCount);
        var cell1 = row.insertCell(0);
        cell1.innerHTML = '<font size="2" face="Courier New"><b>Enter Answer ' + String.fromCharCode(67+i) + ':</b></font>';

        var cell2 = row.insertCell(1);
        var element1 = document.createElement("input");
        element1.size = 40;
        element1.type = "text";
        element1.name = "answer"+a;
        cell2.appendChild(element1);

        var cell3 = row.insertCell(2);
        var element2 = document.createElement("input"); 

        element2.type = "radio";
        element2.name = "radios";
        element2.value = String.fromCharCode(67+i);
        cell3.appendChild(element2);
        i++;
        a++;
    }
} 
```

我的 HTML 表单：

```
<table>                                 
<tr>
    <form method=post  name="submitform" action="verify-qedit.jsp">
        <td>
            <form method=post  name="submitform" action="verify-qedit.jsp">
                <table id="dataTable">                      
                    <tr>
                        <th colspan="3" align="left">Question</th>
                    </tr>
                </table>
            </form>     
        </td>
    </form> 
</tr>                       
</table> 
```

当我提交表单时，我只能检索不是由上述 javascript 创建的参数。它仅适用于兼容模式 - IE 8 标准及以下。请帮忙，因为在发布这个问题之前我已经花了几天的时间试图找出答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:05:54.073

这适用于您所针对的所有浏览器吗？

[http://jsfiddle.net/4nbB5/1](http://jsfiddle.net/4nbB5/1)

```
function addNewAnswer(tableID) {
    var rowCount, row, cell1, cell2, cell3, element1, element2, char;
    var i = 0;
    var table = document.getElementById(tableID);
    while (i < 10) {
        rowCount = table.rows.length;
        row = table.insertRow(rowCount);
        cell1 = row.insertCell(0);
        char = String.fromCharCode(65 + i);
        cell1.innerHTML = '<font size="2" face="Courier New"><b>Enter Answer ' + char + ':</b></font>';

        cell2 = row.insertCell(1);
        element1 = document.createElement("input");
        element1.size = 40;
        element1.type = "text";
        element1.name = "answer" + i;
        cell2.appendChild(element1);

        cell3 = row.insertCell(2);
        element2 = document.createElement("input");

        element2.type = "radio";
        element2.name = "radios";
        element2.value = char;
        cell3.appendChild(element2);
        i++;
    }
}
addNewAnswer('foo'); 
```

我所做的只是删除“a”，并声明“i”，将“if”更改为 while，将 fromCharCode 中的 67 更改为 65.. 看起来是您在某个时候可能想要的，所以我停止了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T12:13:27.560

该问题与javascript无关。这是因为我将表格标签放在 tr 标签之后而不是 td 标签之后的表格中的错误位置。

```
<table>                                 
<tr>
    <td>
        <form method=post  name="submitform" action="verify-qedit.jsp">
            <table id="dataTable">                      
                <tr>
                    <th colspan="3" align="left">Question</th>
                </tr>
            </table>
        </form>     
    </td>
</tr>                       
</table> 
```

# ajax - Ajax UpdateProgress 现在将显示在 tabContainer 内

> ID：15591356
> 
> 赞同：0
> 
> 时间：2013-03-23T19:51:39.640
> 
> 标签：ajax, visual-studio-2010, updatepanel, updateprogress

我正在使用visualStudio 2010 vb

我在 TabContainer 中有一个 UpdateProcess，我无法让它显示加载图像。我在示例代码下面添加了。我错过了一些让它显示的东西吗？

```
<asp:TabContainer ID="TabSelection" runat="server" ActiveTabIndex="0" 
        Width="1126px" Font-Bold="True" TabStripPlacement="Top" 
        style="margin-right: 34px; margin-top: 49px;" AutoPostBack="True">
  <asp:TabPanel runat="server" HeaderText="Scorecard3" ID="TabScorecard3">
   <HeaderTemplate>
     Scorecard
   </HeaderTemplate>

        <ContentTemplate>

<asp:UpdateProgress ID="UProc_Scorecard" runat="server" AssociatedUpdatePanelID="UP_Scorecard"
  DisplayAfter="1">
<ProgressTemplate>
     <asp:Image id="wait" runat="server" ImageUrl="~/Images/wait3.gif" />
</ProgressTemplate>
</asp:UpdateProgress>

        <asp:UpdatePanel ID="UP_Scorecard" runat="server"> 
         <ContentTemplate>

        … 3 Grids and 3 tables …

        </ContentTemplate>
        <Triggers>
        <asp:AsyncPostBackTrigger ControlID="DateSelection" 
                EventName="SelectedIndexChanged"/>
                <asp:AsyncPostBackTrigger ControlID="GroupSelection" 
                EventName="SelectedIndexChanged"/>
        </Triggers>
        </asp:UpdatePanel>

    </ContentTemplate>
  </asp:TabPanel>
</asp:TabContainer> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:02:53.013

我通过将 UpdateProgress 和 updatePannel 移到 TabContainer 之外解决了这个问题，我还删除了 tabcontainer 中的自动回发，以防止每次选择选项卡时回发。我希望这可以帮助别人。下面的示例代码...

```
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
</asp:ToolkitScriptManager>

<asp:UpdateProgress ID="UProc_TabContainer" runat="server" AssociatedUpdatePanelID="UP_TabContainer"
    DisplayAfter="1">
    <ProgressTemplate>
        <div id="dvProgress" runat="server" style="position: absolute; top: 300px; left: 450px;
            text-align: center;">
            <asp:Image ID="wait" runat="server" ImageUrl="~/Images/wait3.gif" Height="120px"
                Width="128px" />
        </div>
    </ProgressTemplate>
</asp:UpdateProgress>

<asp:UpdatePanel ID="UP_TabContainer" runat="server">
    <ContentTemplate>
        <asp:Panel ID="Panel1" runat="server" BackColor="#66FFFF">

                        <asp:DropDownList ID="DateSelection" runat="server" AutoPostBack="True" Height="21px"
                            Width="134px">
                        </asp:DropDownList>

                        <asp:DropDownList ID="GroupSelection" runat="server" AutoPostBack="True" Height="21px"
                            Width="134px" >
                        </asp:DropDownList>

        </asp:Panel>

        <asp:TabContainer ID="TabSelection" runat="server" ActiveTabIndex="0" Width="1126px"
            Font-Bold="True" TabStripPlacement="Top" 
            Style="margin-right: 34px; margin-top: 49px;">
            <%-- AutoPostBack="True"--%>
            <asp:TabPanel runat="server" HeaderText="Scorecard3" ID="TabScorecard3">
                <HeaderTemplate>
                    Scorecard
                </HeaderTemplate>
                <ContentTemplate>
                    … grids and charts …
                </ContentTemplate>
            </asp:TabPanel>
            <asp:TabPanel runat="server" HeaderText="Documentation" ID="TabInfo">
                <ContentTemplate>
                    … documentation …
                </ContentTemplate>
            </asp:TabPanel>
            <asp:TabPanel ID="Project" runat="server" HeaderText="Project">
                <ContentTemplate>
                    … documentation…
                </ContentTemplate>
            </asp:TabPanel>
        </asp:TabContainer>
    </ContentTemplate>
</asp:UpdatePanel> 
```

# ruby - 使用 ruby 1.9.2 安装 gem 'frank-cucumber' 时出错

> ID：15591359
> 
> 赞同：0
> 
> 时间：2013-03-23T19:52:36.267
> 
> 标签：ruby, cucumber

```
Fetching gem metadata from https://rubygems.org/..........
Fetching gem metadata from https://rubygems.org/..
Using i18n (0.6.1) 
Using multi_json (1.7.2) 
Using activesupport (3.2.13) 
Using builder (3.2.0) 
Using colored (1.2) 
Using diff-lcs (1.2.1) 
Using json (1.7.7) 
Using gherkin (2.11.6) 
Using cucumber (1.2.3) 
Installing dnssd (2.0) with native extensions 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /home/ramkishan/.rvm/rubies/ruby-1.9.2-p318/bin/ruby extconf.rb 
    checking for dns_sd.h... no
    unable to find dnssd header
    *** extconf.rb failed ***
    Could not create Makefile due to some reason, probably lack of
    necessary libraries and/or headers.  Check the mkmf.log file for more
    details.  You may need configuration options.

    Provided configuration options:
        --with-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=/home/ramkishan/.rvm/rubies/ruby-1.9.2-p318/bin/ruby
        --with-warnings
        --without-warnings
        --with-dnssd-dir
        --without-dnssd-dir
        --with-dnssd-include
        --without-dnssd-include=${dnssd-dir}/include
        --with-dnssd-lib
        --without-dnssd-lib=${dnssd-dir}/lib

    Gem files will remain installed in /home/ramkishan/.rvm/gems/ruby-1.9.2-p318@andriod/gems/dnssd-2.0 for inspection.
    Results logged to /home/ramkishan/.rvm/gems/ruby-1.9.2-p318@andriod/gems/dnssd-2.0/ext/dnssd/gem_make.out
    An error occurred while installing dnssd (2.0), and Bundler cannot continue.
    Make sure that `gem install dnssd -v '2.0'` succeeds before bundling. 
```

我已经安装了 gem install dnssd -v '2.0' 但问题仍然存在。帮助我如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:00:45.660

gem 依赖于你的`dnssd`操作系统，它有一个用于`dnssd`. 假设你没有使用 OS X，我认为它内置了这个库，你应该安装`libavahi-compat-libdnssd-dev`.

在 Ubuntu 上，它是`sudo apt-get install libavahi-compat-libdnssd-dev`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:00:46.393

我猜你不在OSX上。如果你在 Ubuntu 上，你可以运行

```
$> sudo apt-get install libavahi-compat-libdnssd-dev 
```

安装缺少的库。

# python - virtualenvwrapper 设置

> ID：15591361
> 
> 赞同：0
> 
> 时间：2013-03-23T19:52:47.640
> 
> 标签：python, virtualenv, virtualenvwrapper

我已经使用`sudo pip install virtualenvwrapper`. 但是，当我运行时出现`source bash_profile`此错误 - `bash: /usr/local/share/python/virtualenvwrapper.sh`：没有这样的文件或目录

这就是我的`.bash_profile`样子：

```
export PATH=/usr/local/bin:/usr/local/sbin:${PATH}

export WORKON_HOME=$HOME/.virtualenvs
source /usr/local/share/python/virtualenvwrapper.sh 
```

我正在运行 OSX Mountain Lion 并使用此处提供的说明安装 python [https://python-guide.readthedocs.org/en/latest/starting/install/osx/](https://python-guide.readthedocs.org/en/latest/starting/install/osx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T21:55:11.267

不要将绝对路径传递给`source`，而是使用动态路径：

```
source "$(which virtualenvwrapper.sh)" 
```

# iphone - 自定义 UITableViewCell 不使用 .xib（很可能是因为 init 方法中的缺陷）

> ID：15591364
> 
> 赞同：3
> 
> 时间：2013-03-23T19:53:16.470
> 
> 标签：iphone, ios, objective-c, xcode, uitableview

我对 UITableViewCell 进行了子类化以对其进行自定义，但我认为我遗漏了一些东西，因为：1）它不起作用，2）我对一些事情感到困惑。除了自定义 .xib 文件的外观外，我还更改了 backgroundView，这部分工作正常。我最不了解/最困惑的部分是 init 方法，所以我把它贴在这里。如果事实证明这是正确的，请告诉我，以便我可以发布更多*可能*是原因的代码。

**这是我自定义的init方法。**我对“风格”的想法有点困惑，我想我只是返回一个具有不同背景视图的普通 UITableViewCell。我的意思是，那里没有任何东西是指 .xib 或做任何事情，只是从自我改变 .backgroundView ：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier wait: (float) wait fadeOut: (float) fadeOut fadeIn: (float) fadeIn playFor: (float) playFor
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        CueLoadingView* lview = [[CueLoadingView alloc] initWithFrame:CGRectMake(0, 0, 320, 53)];
        self.backgroundView = lview;

        [self setWait:wait]; // in turn edits the lview through the backgrounView pointer
        [self setFadeOut:fadeOut];
        [self setFadeIn:fadeIn];
        [self setPlayFor:playFor];
    }
    return self;
} 
```

除了 .xib 和几个 setter 和 getter 之外，这是我的代码中唯一真正的部分，它与检索单元格有关。

附加信息：

1）这是我的.xib，它与班级相关联。 ![在此处输入图像描述](../Images/eaebcb32ec309308d6e5b627bce03654.png)

2）这是调用/创建 UITableView（委托/视图控制器）的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"CueTableCell";

    CueTableCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[CueTableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier wait:5.0 fadeOut:1.0 fadeIn:1.0 playFor:10.0];
        [cell updateBarAt:15];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T20:03:28.750

在 nib 文件中创建自定义表格视图单元格的最简单方法（自 iOS 5.0 起可用）是`registerNib:forCellReuseIdentifier:`在表格视图控制器中使用。最大的优点是，`dequeueReusableCellWithIdentifier:`如果需要，它会自动从 nib 文件中实例化一个单元格。你不再需要这个`if (cell == nil) ...`零件了。

在`viewDidLoad`您添加的表视图控制器中

```
[self.tableView registerNib:[UINib nibWithNibName:@"CueTableCell" bundle:nil] forCellReuseIdentifier:@"CueTableCell"]; 
```

在`cellForRowAtIndexPath`你身上

```
CueTableCell *cell = [tableView dequeueReusableCellWithIdentifier:@"CueTableCell"];
// setup cell
return cell; 
```

从 nib 文件加载的单元格使用 实例化`initWithCoder`，如有必要，您可以在子类中覆盖它。对于 UI 元素的修改，您应该重写`awakeFromNib`（不要忘记调用“super”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:00:54.283

您必须改为从 .xib 加载单元格：

```
if ( cell == nil ) {
    cell = [[NSBundle mainBundle] loadNibNamed:@"CellXIBName" owner:nil options:nil][0];
}

// set the cell's properties 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T20:01:26.960

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"CueTableCell";

    CueTableCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        NSArray *array = [[NSBundle mainBundle] loadNibNamed:@"CueTableCell XibName" owner:self options:nil];
        // Grab a pointer to the first object (presumably the custom cell, as that's all the XIB should contain).
        cell = [array objectAtIndex:0];
    }

    return cell;
} 
```

# layer - 绘制拆分为图层的等距图像

> ID：15591365
> 
> 赞同：2
> 
> 时间：2013-03-23T19:53:20.523
> 
> 标签：layer, collision, tile, perspective, isometric

我已经看到了很多关于如何绘制等距图块的问题，并且大多数都指向从上到下从后向前绘制。但是，我正在尝试找到一种方法来防止使用单个等距图像进行剪辑。

虽然通常在单个图像上绘制精灵不会防止在墙壁等上过度绘制，但我将图像分成 3 层。地板、下墙和顶墙。玩家检查地板是否发生碰撞的地方，总是画在下墙的前面，总是画在顶墙的后面。结果如下所示

![例子](../Images/9a503b65632b9ed169ad0aacd4db5fec.png)

虽然这似乎工作得很好，但我想知道绘制这些等距场景的最有效方法是什么。我考虑过瓷砖，但这提出了如何绘制多瓷砖建筑物等问题。如果平铺成为更好的选择，我将针对这些问题创建一个新问题。现在让我们假设我正在使用分解为图层的单个图像。

然而，对于我的艺术家来说，这有点容易。能够以等轴测图绘制单个场景，并将其拆分为多个图层，从而无需地图创建者。然后使用像素碰撞来获得与环境的精确碰撞。

使用多层场景甚至是一个很好的方法吗？我最关心的是防止过度绘制和破坏视角。我也看到了很多使用瓷砖绘制所有东西的好例子，但是我被限制在一定的规模上，这就产生了更多的问题。您知道解决此问题的最佳方法吗？我应该使用平铺而不是将单个图像拆分成图层吗？

我计划在 MonoGame 或 Processing 中对此进行编码。

（我会在gamedev上发布这个但我不能在那里发布图片）

# c - 传递 'strncmp' 的参数 1 从整数中生成指针，而无需强制转换 C 编程

> ID：15591369
> 
> 赞同：1
> 
> 时间：2013-03-23T19:53:44.067
> 
> 标签：c, libc, strncmp

我想比较客户端发送到服务器的一些数据。当我使用 strncmp 比较我从套接字读取的内容和我用来比较的字符串时，我遇到了这个错误。有人能告诉我为什么会出现这个错误吗？

> 警告：传递 'strncmp' 的参数 1 使指针从整数而不进行强制转换

服务器：

```
void
result(int sockfd)
{
    ssize_t     n;
    char        buf[MAXLINE];
    int         temp;
    time_t      ticks;
    int         i;
again:
    while ((n =read(sockfd, buf, MAXLINE)> 0))
    {
     buf[n] = '\0';
     printf("Message Recieved:%s\n",buf);
     srand (time(NULL));
     temp = rand() % 40+1;
     printf("Ramdom es %i\n",temp);

     if ((strncmp (buf[0],"Axx",1) == 0) || (strncmp (buf[0],"axx",1) == 0))
     {
      snprintf(buf, sizeof(buf), "Option A choosen in %i on %.24s\r\n", temp,ctime(&ticks));
      Writen(sockfd, buf, n);
     }
     if ((strncmp (buf[0],"Bxx",1) == 0) || (strncmp (buf[0],"bxx",1) == 0))
     {
      snprintf(buf, sizeof(buf), "Option B choosen in %i on %.24s\r\n", temp,ctime(&ticks));
      Writen(sockfd, buf, n);
     }
     else
     {
       printf("Incorrect Input");
       Close(sockfd);
       break;
     }  
    }
    if (n < 0 && errno == EINTR)
    goto again;
    else if (n < 0)
        err_sys("read error");
}

int
main(int argc, char **argv)
{
    int                 listenfd, connfd;
    socklen_t           len;
    struct sockaddr_in  servaddr, cliaddr;
    char                buff[MAXLINE];
    /*char                message[MAXLINE];*/
    char                recvline[MAXLINE + 1];

    listenfd = Socket(AF_INET, SOCK_STREAM, 0);
    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family      = AF_INET;
    servaddr.sin_addr.s_addr = htonl(INADDR_ANY);/*----------------------------------------------------*/
    servaddr.sin_port        = htons(5678); 

    Bind(listenfd, (SA *) &servaddr, sizeof(servaddr));
    Listen(listenfd, LISTENQ);
    printf("EDMTS is running on 127.0.0.1, listening on port 5678\n");
    printf("\n");
    printf("Waiting for incoming connections...Press Ctrl+C to end server\n");

    for ( ; ; )
    {
        len = sizeof(cliaddr);
        connfd = Accept(listenfd, (SA *) &cliaddr, &len);

        /*Client connects to server*/
        printf("\n");
        printf("Connection from %s, port %d\n",
               Inet_ntop(AF_INET, &cliaddr.sin_addr, buff, sizeof(buff)),
               ntohs(cliaddr.sin_port));

            result(connfd);
                Close(connfd);

    }
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:56:28.233

**[strncmp](http://pubs.opengroup.org/onlinepubs/009695399/functions/strncmp.html)**需要一个`const char*`作为第一个参数，而您只传递一个字符。

将其更改为：

```
 if ((strncmp (buf,"Bxx",1) == 0) || (strncmp (buf,"bxx",1) == 0)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:56:03.077

`buf[0]`是 a `char`，但`strncmp`需要 a `char*`。代替

```
strncmp (buf[0],"Axx",1) 
```

做了

```
strncmp (buf,"Axx",1) 
```

等等

但是，如果您将 1 作为长度参数传递给`strncmp`，您也可以只检查

```
if (buf[0] == 'A' || buf[0] == 'a') // resp. 'B', 'b' 
```

并避免函数调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T19:56:13.007

您不应该传递字符 ( `buf[0]`)，而是传递指向字符 (`buf`例如) 的指针以进行比较。

# regex - 正则表达式：获取字符串中所有数字的编号捕获

> ID：15591370
> 
> 赞同：2
> 
> 时间：2013-03-23T19:53:54.323
> 
> 标签：regex, autohotkey

如何捕获给定字符串中的所有数字？它们是浮点数、整数、正数还是负数都无关紧要。它应该捕获 50 或 100.25 或 12345678 或 -78.999 每个作为编号捕获。

我的意图是查找并替换字符串中的第 n 个数字（自动热键）。

正则表达式应该将所有匹配项捕获到一个数组中。

到目前为止，我已经想出了这个正则表达式（它似乎只捕获了第一场比赛）：

```
[-+]?\d+(\.\d+)? 
```

这是我的自动热键功能，如果您有兴趣：

```
ReplaceNumber(whattext, instance, replacewith){
    numpos := regexmatch(whattext, "Ox)[-+]?\d+(\.\d+)?", thisnumber)
    returnthis := thisnumber.value(instance)
    return returnthis
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:33:31.357

似乎[AutoHotKey 使用 PCRE](http://www.autohotkey.com/docs/commands/RegExMatch.htm)，所以下面的正则表达式应该可以完成这项工作：

`[+-]?\d+(?:\.\d+)?`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:38:25.090

使用 polyethene 的[grep](http://www.autohotkey.com/board/topic/14817-grep-global-regular-expression-match/)函数，您可以给它一个正则表达式字符串，它会返回所有匹配项的分隔字符串。然后，您可以用您的字符串替换该数字的确切实例。在[这个线程](http://www.autohotkey.com/board/topic/51704-re-regexmatch-why-is-it-not-finding-all-the-subpatterns/)中（感谢 HamZa DzCyber​​DeV），有一个解释为什么会这样。

（为此，您需要[grep 脚本](http://www.autohotkey.com/board/topic/14817-grep-global-regular-expression-match/)！）

```
ReplaceNumber(whattext, instance, replacewith){
    numpos := grep(whattext, "[+-]?\d+(?:\.\d+)?",thisnumber,1,0,"|")
    stringsplit, numpos, numpos,|
    stringsplit, thisnumber,thisnumber,|

    thispos := numpos%instance%   ;get the position of the capture
    thisinstance := thisnumber%instance%  ;get the capture itself
    thislen := strlen(thisinstance) 
    ;now fetch the string that comes before the named instance
    leftstring := substr(whattext, 1, thispos-1)
    rightstring := substr(whattext, thispos+thislen, strlen(whattext))

    returnthis := leftstring . replacewith . rightstring

    return returnthis
}
msgbox, % replacenumber("7 men swap 55.2 or 55.2 for 100 and -100.", 5, "SWAPPED") 
```

结果：

```
; 1-->  SWAPPED men swap 55.2 for 100 and -100.
; 2-->  7 men swap SWAPPED or 55.2 for 100 and -100.
; 3 --> 7 men swap 55.2 or SWAPPED for 100 and -100.
; 4 --> 7 men swap 55.2 or 55.2 for SWAPPED and -100.
; 5 --> 7 men swap 55.2 or 55.2 for 100 and SWAPPED. 
```

谢谢，聚乙烯和哈姆扎！

# c# - 使用正则表达式拆分十进制数

> ID：15591371
> 
> 赞同：0
> 
> 时间：2013-03-23T19:53:56.053
> 
> 标签：c#

使用 VS 2012、Windows 窗体、C#

如果我有一个`decimal`名为的变量`productPrice`，我想把它分成两个数字，小数左边的数字，小数点和右边的数字，`regex`我需要使用什么模式？

例如：如果`productPrice = 3.75`我怎样才能将它拆分，所以我有一个变量是`3`，还有一个变量是`.75`

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T20:06:38.687

如果您已经有十进制类型，则可以转换为整数以获取整数部分：

```
var intPortion = (int)productPrice;
var remainder = productPrice - intPortion; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T19:56:49.533

你不需要正则表达式来做到这一点你可以做一个简单的`productPrice.ToString().Split('.')`

要使用这个数字，你可以做

```
var price = productPrice.ToString(CultureInfo.CreateSpecificCulture("en-GB")).Split('.');
var dolars = price[0];
var cents = price[1]; 
```

# android - 从 Android 应用程序写入 Google Drive

> ID：15591383
> 
> 赞同：0
> 
> 时间：2013-03-23T19:55:01.890
> 
> 标签：android, maven, google-drive-api, google-api-java-client

我正在开发一个需要写入 Google Drive 电子表格的 Android 应用程序。有一个关于“Google Developers Live”的快速入门视频似乎完成了大部分必需的步骤，但对于库的使用，他们只是说单击 Eclipse 中的某个按钮。虽然我没有使用 Eclipse，但我想用一个 maven 项目来完成这项工作。

需要哪些库以及如何使用 Maven 获取它们？

这是我正在谈论的视频的一部分：http: //youtu.be/Ied1CjJ0iP0?t= [9m41s](http://youtu.be/Ied1CjJ0iP0?t=9m41s)

另外，我发现[了这篇 SO 帖子](https://stackoverflow.com/a/10330497/605331)，最新的编辑说要使用 Drive API V2，但链接了一个 google api 客户端。我不确定需要什么，或者从那时起是否发生了一些变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:26:50.700

您应该使用 Google API Java 客户端。云端硬盘下载地址：[https ://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API](https://code.google.com/p/google-api-java-client/wiki/APIs#Drive_API)

# javascript - 构建扩展以在网站中触发 onClick 操作？

> ID：15591384
> 
> 赞同：0
> 
> 时间：2013-03-23T19:55:01.963
> 
> 标签：javascript, google-chrome-extension, onclick

我是 google chrome 扩展的新手，但我对 HTML 和一些 javascript 非常熟悉。我的主要专业领域是 Objective-C（但这是一个不同的领域）。

我想构建一个 chrome 扩展，我想用不同的自定义按钮替换网站的按钮（该按钮使用特定的类/ID）。例如，如果一个网站有一个显示“Tweet Us”的按钮，我想将其更改为“Email Us”，更改 onClick 操作和按钮图像。

我想知道是否有人知道任何涉及此的教程或示例。我遇到的大部分内容更多地集中在通过书签浏览器构建 UI 上，但我并没有真正使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:17:40.330

从阅读[本文](http://developer.chrome.com/extensions/content_scripts.html)开始。

将要在“匹配项”下操作的 URL 添加到 manifest.json。

还将您的 JavaScript + css（在“content_scripts”下）添加到 manifest.json。

在 JavaScript 中编写一些代码来删除当前按钮并将其替换为您的按钮和

您对该按钮的事件。

编写它的最简单方法是使用 Jquery。

# web - 自定义字体文件类型

> ID：15591387
> 
> 赞同：0
> 
> 时间：2013-03-23T19:55:19.273
> 
> 标签：web, font-face

我想在网站上安装自定义字体，有人知道 .ttf 格式是否足够？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:02:59.497

如果您想在您的网站上使用自定义字体，我建议您使用其中一种 Google 网络字体。[您将在此处](http://www.google.com/webfonts)找到更多信息。

如果您要使用的字体不在列表中。我建议使用 font-squirrel 并使用他们的[generator](http://www.fontsquirrel.com/tools/webfont-generator)创建一个 font-face 工具包。

要在更大范围的浏览器上工作，您应该使用 .ttf、.eot、.svg 和 .woff。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:06:34.853

TTF 适用于大多数现代浏览器。当然，您可以为用户代理提供几种替代字体格式 - 它肯定不会受到伤害）

以下是 TrueType 字体的兼容性表：http: [//caniuse.com/ttf](http://caniuse.com/ttf)

在您的 CSS 中，按如下方式声明字体：

```
@font-face
{
  font-family: my_font; 
  src: url('my_font.ttf');
} 
```

然后`font-family`像往常一样使用它的属性：

```
.my_selector 
{
  font-family: my_font; 
} 
```

# c - 如何允许用户从终端退出while循环？

> ID：15591388
> 
> 赞同：1
> 
> 时间：2013-03-23T19:50:16.227
> 
> 标签：c, input, scanf, libc

例如，如果我想编写一个代码来平均用户输入的未指定数量的数字，我该如何制作以便用户可以确定数字的数量？IE。如果用户只想平均三个数字，他一次输入一个，然后输入一些东西来表示就是这样。

我写了类似的东西

```
while(i!=EOF){
    printf("type in a number: \n");
    scanf("%f",&i);
    array[x]=i;
    x++;
} 
```

“然后是一些代码来平均数组中的数字”。

这个想法是，如果用户想要表示他已完成输入数字，他输入 EOF 然后 while 循环将停止，但这不起作用。当我在终端输入 EOF 时，它只是无限期地写“输入数字：”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T20:10:00.350

`scanf`以两种不同的方式返回信息：在变量`i`中，以及作为其返回值。变量的内容`i`是读取的数字`scanf`，如果它能够返回一个数字。from 的返回值`scanf`指示它是否能够读取数字。

您的测试`i != EOF`基本上是一个类型错误：您将错误指示符值`EOF`与旨在保存浮点数的变量进行比较。编译器不会抱怨，因为这是意外有效的 C 代码：`EOF`被编码为整数值，并且该值被转换为浮点值以执行比较。事实上，您会注意到，如果您`-1`在提示符处输入，循环将终止。`-1`是`EOF`常量的值（在大多数实现中）。

您应该存储 的返回值`scanf`，并将其存储到单独的变量中。如果返回值为`EOF`，则终止循环。如果返回值为 1，则您已成功读取一个浮点值。

如果返回值为 0，则用户键入了无法解析的内容。您需要适当地处理这种情况：如果您什么都不做，用户的输入不会被丢弃，您的程序将永远循环。两个有意义的选择是丢弃一个字符或整行（我会做后者）。

```
double i;
double array[42];
int x = 0;
int r = 0;
while (r != EOF) {
    printf("type in a number: \n");
    r = scanf("%f", &i);
    if (r == 1) {
        /* Read a number successfully */
        array[x] = i;
        x++;
    } else if (r == 0) {
       printf("Invalid number, try again.\n");
       scanf("%*[^\n]"); /* Discard all characters until the next newline */
    }
} 
```

您还应该检查`x`是否不会溢出数组的边界。我把这个作为练习。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:02:49.387

> 我想通过输入不是数字的东西来做到这一点

然后将输入作为字符串获取，如果无法转换为数字则退出。

```
char buf[0x80];
do {
    fgets(buf, sizeof(buf), stdin);
    if (isdigit(buf[0])) {
        array[x++] = strtod(buf);
    }
} while(isdigit(buf[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T20:09:53.873

如果没有输入，scanf() 不会将 i 设置为 EOF，而是可以返回 EOF。所以你应该分析 scanf() 返回码。顺便说一句，您可以收到 0 作为结果，这实际上意味着没有 EOF 但无法读取数字。

这是给你的例子：

```
#include <stdio.h>
#define MAX_SIZE 5

int main()
{
    int array[MAX_SIZE];
    int x = 0;
    int r = 0;
    while (x < MAX_SIZE)
    {
        int i = 0;
        printf("type in a number: \n");
        r = scanf("%d",&i);
        if (r == 0)
        {
            printf("ERROR!\n");
            break;
        }
        if (r == EOF)
        {
            printf("EOF!\n");
            break;
        }
        array[x]=i;
        x++;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T19:58:48.777

你不能写'EOF'..因为你正在读一个数字......EOF等于-1..所以如果他输入，循环将停止

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T20:07:10.643

您可以测试`scanf`函数的返回值。它在匹配失败或遇到 EOF 字符时返回 EOF。

```
printf("type in a number:" \n);    
while(scanf("%f",&i)!=EOF){
    array[x]=i;
    x++;
    printf("type in a number:" \n);  
} 
```

# c# - 如何在 AjaxFileUpload ASP.NET 之后更新数据库表

> ID：15591392
> 
> 赞同：0
> 
> 时间：2013-03-23T19:55:56.030
> 
> 标签：c#, asp.net

文件正在上传到对应的路径，但是表（fileinfo）没有更新..文件上传到服务器后如何实现表更新

```
 protected void UploadComplete(Object sender, AjaxControlToolkit.AjaxFileUploadEventArgs e)
 {
    string str = RadioButton1.Text;
    string path = Server.MapPath("~/" + str +"/") + e.FileName;
    AjaxFileUpload1.SaveAs(path);
    SqlConnection con = new SqlConnection("Data Source=localhost\\sqlexpress; Initial Catalog=example;user ID=sa;password=*******;");
    con.Open();        
    string command1 = "insert into fileinfo(fileid,filename,date1) values(@fileid,@filename,@date1)";
    SqlCommand command = new SqlCommand(command1, con);
    command.Parameters.AddWithValue("@fileid", "101");
    command.Parameters.AddWithValue("@filename", e.FileName);
    command.Parameters.AddWithValue("@date1", DateTime.Now);
    command.ExecuteNonQuery();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T11:22:20.850

您可以检索存储在文件夹 str 中的所有文件，也可以使用数组进行存储，我已经使用字符串 jst 向您展示了如何从文件夹中获取所有文件

```
string getfile="";
foeach(string f in Directory.GetFiles(Server.MapPath("~/"+str+"/"))
{
  getfiles= getfiles + f + ",";
 } 
```

现在您可以将getfiles存储在数据库中，希望对您有所帮助

# c++ - 用于从 C++ 代码库中提取方法的 Doxygen 或 ctags？

> ID：15591393
> 
> 赞同：0
> 
> 时间：2013-03-23T19:55:56.247
> 
> 标签：c++, unix, doxygen, ctags

如何在 HP-UX 上使用 doxygen 或 ctags 列出 C++ 代码库中的所有类和方法。我相信 ctags 与 HP-UX 一起出现，但需要安装 doxygen？

一个例子会有所帮助。

# twitter-bootstrap - 调整大小时引导模式消失

> ID：15591396
> 
> 赞同：1
> 
> 时间：2013-03-23T19:56:07.883
> 
> 标签：twitter-bootstrap

每次我调整页面大小时，Bootstrap 模态都会突然消失。我已经用谷歌搜索过了，通常情况下，如果您包含 bootstrap.js 和 bootstrap-modal.js，就会发生这种情况。但是，我没有包含 bootstrap-modal.js。此外，如果我的屏幕相当大，模式也可以正常工作。只有当我将其调整为更小的尺寸时，模态才会消失。

这是我的包括：

```
<script src="resources/scripts/jquery-1.8.3.js"></script>
<script src="resources/scripts/jquery-ui-1.9.2.custom.js"></script>
<script src="resources/scripts/bootstrap.js"></script>
<script src="resources/scripts/jquery.complexify.js"></script>
<script src="resources/scripts/jquery.jeditable.js"></script>
<script src="resources/scripts/bootstrap-tagmanager.js"></script>
<script src="resources/scripts/jquery.dataTables.min.js"></script>

<link rel="stylesheet" href="resources/styles/bootstrap.css" type="text/css"/>
<link rel="stylesheet" href="resources/styles/bootstrap-responsive.min.css" type="text/css"/>
<link rel="stylesheet" href="resources/styles/jquery.fileupload-ui.css" type="text/css"/>
<link rel="stylesheet" href="resources/styles/bootstrap-tagmanager.css" type="text/css"/>
<link rel="stylesheet" href="resources/styles/jquery.dataTables.css" type="text/css"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:58:17.473

对不起，没关系。我注意到你应该在里面包含模态 `<div class="container"></div>`并且它只适用于调整大小。我已经把它包括在外面了。

# java - 使用java将对象发送到本地主机服务器？

> ID：15591397
> 
> 赞同：0
> 
> 时间：2013-03-23T19:56:11.053
> 
> 标签：java, file, object, serialization

如何在 localhost 服务器中创建 .ser 文件或将对象写入 .ser 文件？

以下代码可以读取 .ser 文件：

```
 public Object deserialize(InputStream is) {
    ObjectInputStream in;
    Object obj;
    try {
        in = new ObjectInputStream(is);
        obj = in.readObject();
        in.close();
        return obj;
    } catch (IOException ex) {
        ex.printStackTrace();
        throw new RuntimeException(ex);
    } catch (ClassNotFoundException ex) {
        ex.printStackTrace();
        throw new RuntimeException(ex);
    }
    }

        URL url;
        URLConnection urlConn;
        DataInputStream dis;

        //url = new URL("http://localhost/Person.ser");

        urlConn = url.openConnection();
        urlConn.setDoInput(true);
        urlConn.setUseCaches(false);
        Person person = (person) deserialize(urlConn.getInputStream()); 
```

我需要任何服务器端程序来接收对象并存储在文件中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:01:31.247

您可以使用以下方式写入 .ser 文件：

```
try {
        FileOutputStream fos = new FileOutputStream("Filename.ser");
        ObjectOutputStream out = new ObjectOutputStream(fos);
        out.write(obj);
        fos.close();
        out.close();

    } catch (IOException ex) {} 
```

**更新**
要在服务器端读取对象，您需要创建`ObjectInputStream`与客户端交互的套接字的 inputStream 包装。可以按如下方式完成：

```
try
      {
        Socket s = serverSocket.accept();
        ObjectInputStream oin = new ObjectInputStream(s.getInputStream());
        Object obj = oin.readObject();
        oin.close();
      }catch(Exception ex){} 
```

好的，这是我向服务器发送 ArrayList 的完整示例。
**客户端.java**

```
import java.net.*;
import java.io.*;
import java.util.*;

public class Client 
{
    public static void main(String[] args) 
    {
        Socket s = null;
        ObjectOutputStream out = null;  
        System.out.println("Connecting to Server ...");
        try 
        {
            s = new Socket("localhost", 1401);
            out = new ObjectOutputStream (s.getOutputStream());
            ArrayList<String> list = ArrayList<String> list = new ArrayList<String>();
    for (int i = 0; i < 10 ; i++)
    {
        list.add("String"+i);
    }
            out.writeObject(list);out.flush();
        System.out.println("ArrayList sent to Server");
        } catch ( Exception e) 
        {
            e.printStackTrace();
        }
        finally
        {
            if (out!= null)
            {
                try
                {
                    out.close();
                }
                catch (Exception ex){}
            }
            if (s != null)
            {
                try
                {
                    s.close();
                }
                catch (Exception ex){}
            }
        }
    }
} 
```

**服务器.java**

```
import java.net.*;
import java.io.*;
import java.util.*;

public class Server 
{
    public static void main(String[] args) 
    {
        ObjectInputStream oin = null;
        ServerSocket server;
        Socket socket = null;
        try
        {
            server = new ServerSocket(1401);
            socket = server.accept();
            System.out.println("Client Connected..Sending ArrayList to Client");
            oin = new ObjectInputStream(socket.getInputStream());
            ArrayList<String> list = (ArrayList<String>)oin.readObject();
        System.out.println("Recieved ArrayList from client "+list);
            //Writing to file now 
            FileOutputStream fos = new FileOutputStream("Filename.ser");
            ObjectOutputStream out = new ObjectOutputStream(fos);
            out.write(obj);
            fos.close();
            out.close();
            System.out.println("Written to file");
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            if (oin != null)
            {
                try
                {
                    oin.close();
                }
                catch (Exception ex){}
            }
            if (socket != null)
            {
                try
                {
                    socket.close();
                }
                catch (Exception ex){}
            }
        }
    }
} 
```

# python - IF语句错误新变量输入python

> ID：15591400
> 
> 赞同：-1
> 
> 时间：2013-03-23T19:56:45.527
> 
> 标签：python, if-statement

这里的问题是我无法让python检查Currency1是否在字符串中，如果不是，则打印存在错误，但如果Currency1在字符串中，则继续并要求用户输入Currency2，然后检查再说一遍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T19:57:48.127

您实际上是在尝试：

```
if type(Currency1) in (float, int):
   ... 
```

但`isinstance`这里更好：

```
if isinstance(Currency1,(float,int)):
   ... 
```

甚至更好，您可以使用`numbers.Number`抽象基类：

```
import numbers
if isinstance(Currency1,numbers.Number): 
```

* * *

虽然 ...`Currency1 = str(raw_input(...))`会保证这`Currency1`是一个字符串（不是整数或浮点数）。实际上，`raw_input`做出这样的保证，`str`这里的额外内容只是多余的:-)。

如果您想要一个函数来检查字符串是否可以转换为数字，那么我认为最简单的方法就是尝试一下，看看：

```
def is_float_or_int(s):
    try:
        float(s)
        return True
    except ValueError:
        return False 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:11:50.190

您可以使用`try-except`：

```
def get_currency(msg):
    curr = input(msg)
    try:
        float(curr)
        print('You must enter text. Numerical values are not accepted at this stage')
        return get_currency(msg)  #ask for input again
    except:
        return curr               #valid input, return the currency name

curr1=get_currency('Please enter the currency you would like to convert:')
curr2=get_currency('Please enter the currency you would like to convert into:')
ExRate = float(input('Please enter the exchange rate in the order of, 1 '+curr1+' = '+curr2)) 
Amount = float(input('Please enter the amount you would like to convert:'))
print (Amount*ExRate) 
```

**输出：**

```
$ python3 foo.py

Please enter the currency you would like to convert:123
You must enter text. Numerical values are not accepted at this stage
Please enter the currency you would like to convert:rupee
Please enter the currency you would like to convert into:100
You must enter text. Numerical values are not accepted at this stage
Please enter the currency you would like to convert into:dollar
Please enter the exchange rate in the order of, 1 rupee = dollar 50
Please enter the amount you would like to convert: 10
500.0 
```

# python - 我的 paintEvent 方法没有用 PySide 绘制任何东西

> ID：15591408
> 
> 赞同：1
> 
> 时间：2013-03-23T19:57:14.910
> 
> 标签：python, qt, pyqt, pyside, qpainter

我正在尝试在标签（具有电路板的背景图像）上画一个圆圈来表示输出引脚的状态。

我现在只是想画一些东西，但我没有画出任何东西。

这是我的（缩短的）课程：

```
class MyClass(QMainWindow, Ui_myGeneratedClassFromQtDesigner):
    def paintEvent(self, event):                                                                                                                     
        super(QMainWindow, self).paintEvent(event)                             
        print("paint event")
        painter = QtGui.QPainter()
        painter.begin(self)
        painter.drawElipse(10, 10, 5, 5)
        painter.end() 
```

`paint event`打印到控制台，但窗口中没有绘制任何内容。我正确使用 QPainter 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T12:13:44.110

你的代码中只有一个语法错误，看看这个例子是如何工作的：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QLabel):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

    def animate(self):
        animation = QtCore.QPropertyAnimation(self, "size", self)
        animation.setDuration(3333)
        animation.setStartValue(QtCore.QSize(self.width(), self.height()))
        animation.setEndValue(QtCore.QSize(333, 333))
        animation.start()

    def paintEvent(self, event):
        painter = QtGui.QPainter(self)
        painter.setBrush(QtGui.QBrush(QtCore.Qt.red))
        painter.drawEllipse(0, 0, self.width() - 1, self.height() - 1)
        painter.end()

    def sizeHint(self):
        return QtCore.QSize(111, 111)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()
    main.animate()

    sys.exit(app.exec_()) 
```

# linux - 很难跟踪基于 Qt 的应用程序的所有 linux 依赖项

> ID：15591422
> 
> 赞同：-1
> 
> 时间：2013-03-23T19:59:12.023
> 
> 标签：linux, qt

我的应用程序在 OSX 和 Win 上运行，但很难跟踪 Linux 所需的所有依赖项。理想情况下，我希望能够在 Fedora、CentOS 和可能的 Ubuntu 上运行它。然而，Ubuntu 的优先级较低。

有人会帮我解决这个问题吗？我可以很好地解决 Linux 问题，但我不是专业人士。这让我很困惑。

[http://www.genecrucean.com/tmp/KickAssGUI.tar.gz](http://www.genecrucean.com/tmp/KickAssGUI.tar.gz)（这是一个简单的 GUI 应用程序，用于名为 Arnold 的 3D 渲染器。www.solidangle.com）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T20:50:47.277

当前，您的 tarball 包含 Qt 5 的二进制 .so 文件。这通常不是在 Linux 上执行此操作的方法。您可以提供程序的源代码并让用户自己构建它，或者您可以为相关的 Linux 发行版提供预构建的包（.rpm 或 .deb）。这意味着专门为某个版本的 Fedora、CentOS 和 Ubuntu 构建软件包。这些包将依赖于 libqt5，这是 Linux 发行版本身提供的一个包。要查找更多依赖项，请使用 ldd：

```
$ ldd program 
```

在不同的 Linux 上运行相同的编译二进制文件通常是禁忌，因为底层共享库的版本存在差异，尽管有些公司这样做，即用于商业游戏。如果您使用静态链接，那么它可以工作。直到他们在内核中改变了一些大的东西。

您还应该考虑目标架构：ia32、amd64 或其他。

也许这个问题在 ServerFault 上得到更好的回答。

# asp.net-mvc - 实体框架数据库更新：外键引用无效列（导航属性）

> ID：15591423
> 
> 赞同：0
> 
> 时间：2013-03-23T19:59:13.810
> 
> 标签：asp.net-mvc, entity-framework, code-first, navigation-properties, sql-update

这应该很简单。

我有客户和项目：

```
public class Client
{
    public int ClientID { get; set; }
    public string ClientName { get; set; }
    public virtual ICollection<Project> Projects { get; set; }
}

public class Project
{
    public int ProjectID { get; set; }
    public string ProjectName { get; set; }
} 
```

一切正常。在我的 Projects 表中，我有字段：Client_ClientID 存储关系。

现在我想在 Project 上添加一个导航属性到客户端：

```
public class Project
{
    public int ProjectID { get; set; }
    public string ProjectName { get; set; }

    // navigation properties
    public virtual Client Client { get; set; }
} 
```

当我运行更新数据库时，我收到错误：

```
Foreign key 'FK_dbo.Projects_dbo.Clients_Client_ClientID' references invalid column 'Client_ClientID' in referencing table 'Projects' 
```

详细的 SQL 显示为：

```
EXECUTE sp_rename @objname = N'dbo.Projects.Client_ClientID', @newname = N'Client_ClientID1', @objtype = N'COLUMN'
ALTER TABLE [dbo].[Projects] ADD CONSTRAINT [FK_dbo.Projects_dbo.Clients_Client_ClientID] FOREIGN KEY ([Client_ClientID]) REFERENCES [dbo].[Clients] ([ClientID]) 
```

我不确定为什么在添加约束之前尝试将 Client_ClientID 重命名为 Client_ClientID1 - 看起来很奇怪？

我怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:21:40.600

添加`ForeignKeyAttribute`到您的`Project`班级。

```
public class Project
{
    public int ProjectID { get; set; }
    public string ProjectName { get; set; }

    [ForeignKey("Client")]
    public int ClientID { get; set; }
    public virtual Client Client { get; set; }
} 
```

# php - Pusher 向特定成员发送出席信息

> ID：15591424
> 
> 赞同：3
> 
> 时间：2013-03-23T19:59:18.857
> 
> 标签：php, pusher

是否可以指定事件的成员 ID，以便**只有**该成员才能接收该事件？

例如，如果我想向用户（我知道他的用户 ID）发送通知，我该怎么做？我将成员/用户 ID 存储在存在身份验证中 -

`$pusher->presence_auth($_POST['channel_name'], $_POST['socket_id'], $user_id) , $user_data);`

我希望能够触发特定 user_id 的事件

```
$pusher->trigger( 'presence-test', 'test_event', $data, $socket_id ); 
```

可能吗？

任何建议表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T20:48:10.157

您不能向频道上的特定用户/客户发送事件。

最好的方法是为每个用户设置一个[`private-`频道](http://pusher.com/docs/private_channels)，这样您就可以只向他们发送信息。它们是私有的这一事实也意味着您可以确保只有预期的用户订阅（请参阅[身份验证用户](http://pusher.com/docs/authenticating_users)）。

在您的情况下，频道名称可以是`'private-' + user_id`.

然后，您可以让用户订阅该频道并从服务器发布到该频道。

# java - java中优先级队列中offer（）和add（）的区别？

> ID：15591431
> 
> 赞同：45
> 
> 时间：2013-03-23T19:59:56.743
> 
> 标签：java

为什么两个函数做同样的事情？

[http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)的 java api 文档中提供的描述是相同的。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-03-23T20:02:40.840

这两个函数来自两个不同的接口，它们`PriorityQueue`实现：

*   `add()`来自`Collection`.
*   `offer()`来自`Queue`.

对于容量受限的队列，不同的是，如果不能添加元素，则`add()`总是返回`true`并抛出异常，而如果不能添加元素，则`offer()`允许返回`false`。

但是，这不适用于`PriorityQueue`; 这两个功能是同义词。

# javascript - 哪种形式的初始化更好？

> ID：15591434
> 
> 赞同：3
> 
> 时间：2013-03-23T20:00:29.643
> 
> 标签：javascript, jquery

当我第一次开始编写自己的代码时，直到后来我才理解 jQuery 的“增强”初始化构造函数，所以我坚持使用不同的方式来构造我的对象。我想知道我是否应该保留我的旧方法或开始使用我自己的“增强”初始化构造函数。

* * *

我的构造函数：

```
var $ = function(selector,context,createObj) {
        if(createObj) {
           // actually initiating object
        } else {
           return new $(selector,context,true);
        }
}; 
```

* * *

jQuery：

```
jQuery = function( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
}; 
```

实际初始化：

```
init: function( selector, context, rootjQuery ) {
    // some code
} 
```

改变原型（jQuery.prototype.init.prototype=jQuery.prototype）：

```
jQuery.fn.init.prototype = jQuery.fn; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:19:46.950

[jQuery 的构造函数模式](https://stackoverflow.com/q/12143590/1048572)在历史上是增长的并且是不好的实践——或者至少是不必要的复杂。如果您想要一个运行良好的构造函数`new`（如果应用错误），请使用

```
function $(selector, context) {
    if (this instanceof $) {
        // actually initiating object
    } else {
        return new $(selector, context);
    }
} 
```

# jquery - 停止 jQuery 动画并反转

> ID：15591435
> 
> 赞同：0
> 
> 时间：2013-03-23T20:00:36.607
> 
> 标签：jquery, animation

我有一个像这样工作的移动动画：

```
 function showMessage() 
 {
     $('#message').stop().show().animate({top: '60px'}, 500, 'easeOutExpo');
 }      

 function hideMessage(msg,hide) 
 {
     $('#message').stop().delay(time).animate({ top: '0px' }, 600, 'easeInExpo');
 } 
```

动画在显示时将项目移动到 60 像素，然后在隐藏时返回到 0 像素。问题是如果 showMessage 在 hideMessage 完成之前开始，我会得到一个难看的跳转动画。

我想要的是 showMessage 动画基本上反转 hideMessage 动画，如果它在 hideMessage 完成之前开始。

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:21:29.137

您需要确保动画 A 在开始 B 之前完成。

```
 $('#message').stop(true,true).show(); 
```

也就是说.stop([clearQueue] [, jumpToEnd])。[这是文档。](http://api.jquery.com/stop/)

你很亲近！ [小提琴](http://jsfiddle.net/FnN2d/)

# java - 来自基于java的配置的基于spring xml的配置

> ID：15591443
> 
> 赞同：1
> 
> 时间：2013-03-23T20:00:52.327
> 
> 标签：java, spring, spring-mvc, redis, spring-3

我正在按照 [http://blog.springsource.org/2012/05/16/spring-mvc-3-2-preview-chat-sample/中的步骤使用 spring mvc 和 redis 服务器做示例聊天应用程序](http://blog.springsource.org/2012/05/16/spring-mvc-3-2-preview-chat-sample/)

那里给出的例子是基于spring java的配置。我想做基于 xml 的配置。但这对我不起作用。

我通过转换以下配置类来解决问题

```
package org.springframework.samples.async.config;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.PropertySource;
import org.springframework.core.env.Environment;
import org.springframework.data.redis.connection.RedisConnectionFactory;
import org.springframework.data.redis.connection.jedis.JedisConnectionFactory;
import org.springframework.data.redis.core.StringRedisTemplate;
import org.springframework.data.redis.listener.PatternTopic;
import org.springframework.data.redis.listener.RedisMessageListenerContainer;
import org.springframework.samples.async.chat.ChatController;

@Configuration
@PropertySource("classpath:redis.properties")
public class RootConfig {

    @Autowired
    Environment env;

    @Autowired
    ChatController chatController;

    @Bean
    public RedisConnectionFactory redisConnectionFactory() {
        JedisConnectionFactory cf = new JedisConnectionFactory();
        cf.setHostName(this.env.getProperty("redis.host"));
        cf.setPort(this.env.getProperty("redis.port", int.class));
        cf.setPassword(this.env.getProperty("redis.password"));
        return cf;
    }

    @Bean
    public StringRedisTemplate redisTemplate() {
        return new StringRedisTemplate(redisConnectionFactory());
    }

    @Bean
    public RedisMessageListenerContainer redisMessageListenerContainer() {
        RedisMessageListenerContainer mlc = new RedisMessageListenerContainer();
        mlc.setConnectionFactory(redisConnectionFactory());
        mlc.addMessageListener(this.chatController , new PatternTopic("chat"));
        return mlc;
    }

} 
```

以下是我尝试使用的基于 XML 的配置，而不是上面基于 java 的配置。

```
<bean id="redisConnectionFactory" class="org.springframework.data.redis.connection.jedis.JedisConnectionFactory"
        p:host-name="localhost" p:port="9994" p:password=""/>
<bean id="messageListener" class="org.springframework.data.redis.listener.adapter.MessageListenerAdapter">
    <constructor-arg>
        <bean class="org.springframework.samples.async.chat.ChatController"/>
    </constructor-arg>
</bean>
<bean id="redisMessageListenerContainer" class="org.springframework.data.redis.listener.RedisMessageListenerContainer">
    <property name="connectionFactory" ref="redisConnectionFactory"/>
    <property name="messageListeners">s          
      <map>
        <entry key-ref="messageListener">
            <bean class="org.springframework.data.redis.listener.PatternTopic">
               <constructor-arg value="chat"/>
            </bean>
        </entry>
      </map>
    </property>
 </bean> 
```

**我得到的例外是**

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'messageListener' defined in ServletContext resource [/WEB-INF/spring/mvc-config.xml]: Cannot create inner bean 'org.springframework.samples.async.chat.ChatController#74b70648' of type [org.springframework.samples.async.chat.ChatController] while setting constructor argument; nested exception is org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [org.springframework.samples.async.chat.ChatController] for bean with name 'org.springframework.samples.async.chat.ChatController#74b70648' defined in ServletContext resource [/WEB-INF/spring/mvc-config.xml]; nested exception is java.lang.ClassNotFoundException: org.springframework.samples.async.chat.ChatController
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:282)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:121)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:629)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1049)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:953)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:626)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:652)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:600)
    at org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:666)
    at org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:519)
    at org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:460)
    at org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:136)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1280)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1193)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:865)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:136)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at jav 
```

a.lang.Thread.run(Thread.java:662)

**聊天控制器.java**

```
package org.springframework.samples.async.chat;

import java.util.Collections;
import java.util.List;
import java.util.Map;
import java.util.Map.Entry;
import java.util.concurrent.ConcurrentHashMap;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.redis.connection.Message;
import org.springframework.data.redis.connection.MessageListener;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.context.request.async.DeferredResult;

@Controller
@RequestMapping("/mvc/chat")
public class ChatController implements MessageListener {

    private final Map<DeferredResult<List<String>>, Integer> chatRequests =
            new ConcurrentHashMap<DeferredResult<List<String>>, Integer>();

    private final ChatRepository chatRepository;

    @Autowired
    public ChatController(ChatRepository chatRepository) {
        this.chatRepository = chatRepository;
    }

    @RequestMapping(method=RequestMethod.GET, produces="application/json")
    @ResponseBody
    public DeferredResult<List<String>> getMessages(@RequestParam int messageIndex) {

        final DeferredResult<List<String>> deferredResult = new DeferredResult<List<String>>(null, Collections.emptyList());
        this.chatRequests.put(deferredResult, messageIndex);

        deferredResult.onCompletion(new Runnable() {
            @Override
            public void run() {
                chatRequests.remove(deferredResult);
            }
        });

        List<String> messages = this.chatRepository.getMessages(messageIndex);
        if (!messages.isEmpty()) {
            deferredResult.setResult(messages);
        }

        return deferredResult;
    }

    @RequestMapping(method=RequestMethod.POST)
    @ResponseBody
    public void postMessage(@RequestParam String message) {
        this.chatRepository.addMessage(message);
    }

    // Redis MessageListener contract

    @Override
    public void onMessage(Message message, byte[] pattern) {
        for (Entry<DeferredResult<List<String>>, Integer> entry : this.chatRequests.entrySet()) {
            List<String> messages = this.chatRepository.getMessages(entry.getValue());
            entry.getKey().setResult(messages);
        }
    } 
```

}

**完整的 mvc-config.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:mvc="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans.xsd
http://www.springframework.org/schema/context 
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc.xsd">
<mvc:annotation-driven>
 <mvc:async-support default-timeout="30000" />
</mvc:annotation-driven>
<mvc:view-controller path="/" view-name="chat"/>
<mvc:resources mapping="/resources/**" location="resources"/>
<context:component-scan base-package="org.springframework.samples.async.chat" />
<bean id="templateResolver" class="org.thymeleaf.templateresolver.ServletContextTemplateResolver">
        <property name="prefix" value="/WEB-INF/templates/" />
        <property name="suffix" value=".html" />
        <property name="templateMode" value="HTML5" />
        <property name="cacheable" value="true" />
    </bean>

    <bean id="templateEngine" class="org.thymeleaf.spring3.SpringTemplateEngine">
        <property name="templateResolver" ref="templateResolver" />
    </bean>

    <bean id="viewResolver" class="org.thymeleaf.spring3.view.ThymeleafViewResolver">
        <property name="templateEngine" ref="templateEngine" />
        <property name="order" value="1" />
        <property name="viewNames" value="*.html"/>
    </bean>

    <bean id="stringRedisTemplate" class="org.springframework.data.redis.core.StringRedisTemplate"
    p:connection-factory-ref="redisConnectionFactory"/>

<bean id="redisConnectionFactory" class="org.springframework.data.redis.connection.jedis.JedisConnectionFactory"
        p:host-name="localhost" p:port="9994" p:password=""/>
<bean id="messageListener" class="org.springframework.data.redis.listener.adapter.MessageListenerAdapter">
    <constructor-arg>
        <bean class="org.springframework.samples.async.chat.ChatController"/>
    </constructor-arg>
</bean>
<bean id="redisMessageListenerContainer" class="org.springframework.data.redis.listener.RedisMessageListenerContainer">
    <property name="connectionFactory" ref="redisConnectionFactory"/>
    <property name="messageListeners">
      <!-- map of listeners and their associated topics (channels or/and patterns) -->
      <map>
        <entry key-ref="messageListener">
            <bean class="org.springframework.data.redis.listener.PatternTopic">
               <constructor-arg value="chat"/>
            </bean>
        </entry>
      </map>
    </property>
 </bean>

</beans> 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:14:14.800

我认为问题在于您正在尝试在您的 xml 中使用这部分进行某种按类自动装配的事情（我假设）：

```
<bean id="messageListener" class="org.springframework.data.redis.listener.adapter.MessageListenerAdapter">
    <constructor-arg>
        <bean class="org.springframework.samples.async.chat.ChatController"/>
    </constructor-arg>
</bean> 
```

但这不是 xml 配置的工作方式。xml 在这里所做的是尝试创建 的新实例`ChatController`并将其用作`MessageListenerAdapter`. 显然这不起作用，因为您`ChatController`没有 0 arg 构造函数。您想要做的是在构造函数参数中引用您现有的`ChatController`（标记为 an`@Controller`并因此将被您的 自动拾取）。`component-scan`像这样的东西：

```
<bean id="messageListener" class="org.springframework.data.redis.listener.adapter.MessageListenerAdapter">
    <constructor-arg>
        <ref bean="chatController"/>
    </constructor-arg>
</bean> 
```

'chatController' 引用的 bean 是您的组件扫描的`ChatController`（当没有通过构造型注释或`@Qualifier`注释提供时，它是默认的 bean 名称）。

# html - 如何查看和描述我的浏览器和 Google 服务器之间的客户端和服务器通信？

> ID：15591446
> 
> 赞同：0
> 
> 时间：2013-03-23T20:00:57.130
> 
> 标签：html, dom, webserver, client-server, webpage

我需要能够查看和描述我的浏览器和 Google 服务器之间的客户端和服务器通信。

我已经下载了 net-tools 但无法具体看到通信，我尝试过 Wireshark 但这带来了太多东西。

如何使用某种 Web 调试器工具查看通信并对其进行描述？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:42:43.857

您可以使用Chrome 开发者工具或 Firebug for Firefox 中的*网络选项卡来查看发送到服务器的所有请求。*您也可以使用[Fiddler](http://www.fiddler2.com/fiddler2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:42:51.500

一位 Google 员工刚刚为您做了这件事：

[https://plus.google.com/112218872649456413744/posts/dfydM2Cnepe](https://plus.google.com/112218872649456413744/posts/dfydM2Cnepe)

还有一篇黑客新闻文章：

[https://news.ycombinator.com/item?id=5408597](https://news.ycombinator.com/item?id=5408597)

# mysql - 从日期时间戳中选择用户 - 仅返回上周

> ID：15591447
> 
> 赞同：0
> 
> 时间：2013-03-23T20:01:00.350
> 
> 标签：mysql, sql

我正在尝试查找上周内加入网站的用户子集

该表是`users`并且日期字段（`dateadded`）是 unix 时间戳，例如`2012-04-29 17:31:57`

这是我正在尝试的，但它会返回所有用户：

```
SELECT * FROM users
WHERE dateadded <= NOW() AND dateadded >= DATE_SUB(dateadded, INTERVAL 7 DAY) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:06:08.433

你有错误的条件。你想要`now()`两个比较：

```
SELECT *
FROM users
WHERE dateadded <= NOW() AND dateadded >= DATE_SUB(now(), INTERVAL 7 DAY) 
```

# spring - 在 Spring 项目中使用 Maven 进行集成测试

> ID：15591448
> 
> 赞同：2
> 
> 时间：2013-03-23T20:01:01.037
> 
> 标签：spring, integration-testing, maven-3

问题是如何使用不同的属性文件进行集成测试。详细说明如下。

我正在尝试使用 Maven 进行容器集成测试，使用`tomcat7-maven-plugin`. 该项目使用 Spring 和 JPA。目前我想出的是以下几点：

*   单元测试类名称遵循模式 *Test and run with `mvn test`by`maven-surefire-plugin`
*   集成测试类名称遵循 *IT 模式并使用`mvn verify`by`maven-failsafe-plugin`
*   通过执行，我可以触发启动和停止 tomcat 并部署 war 文件

所有这些都有效，当我运行`mvn verify`Tomcat 时就会启动。

但是，我不想使用常规数据库，而是想使用内存数据库。我的数据库配置是在`src/main/resources/META-INF/spring/database.properties`通过`context:property-placeholder`.

我试图在 中定义一个替代文件`src/test/resources/META-INF/spring/database.properties`，但被忽略了。我知道可以在 中定义系统属性`tomcat7-maven-plugin`，但我不知道如何使用它们来触发加载不同的属性文件。

我的`tomcat7-maven-plugin`配置如下：

```
<plugin>
    <groupId>org.apache.tomcat.maven</groupId>
    <artifactId>tomcat7-maven-plugin</artifactId>
    <version>2.1</version>
    <configuration>
        <port>9090</port>
        <path>/processing</path>
        <useTestClasspath>true</useTestClasspath>
        <systemProperties>
            <example.value.1>alpha</example.value.1>
        </systemProperties>
    </configuration>
    <executions>
        <execution>
            <id>start-tomcat</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>run-war-only</goal>
            </goals>
            <configuration>
                <fork>true</fork>
            </configuration>
        </execution>
        <execution>
            <id>stop-tomcat</id>
            <phase>post-integration-test</phase>
            <goals>
                <goal>shutdown</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

`context-main.xml`使用以下行加载属性：

```
<context:property-placeholder location="classpath*:META-INF/spring/*.properties"/> 
```

我使用以下内容加载上下文配置`web.xml`：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:META-INF/spring/context-*.xml</param-value>
</context-param> 
```

关于如何加载替代属性文件进行测试的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:05:31.470

一种方法是使用 Maven 配置文件和 ant 插件。我怀疑这不是最优雅的方式，我愿意倾听更好的解决方案，但现在它解决了我的问题。

配置文件是一种根据命令行参数拥有不同 Maven 配置的方法，因此在我的情况下运行集成测试，我运行 command `mvn -Pintegration clean verify`。这`integration`是配置文件的名称，并在 中定义`pom.xml`，`properties`如下所示：

```
<profiles>
    <profile>
        <id>standard</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
    </profile>
    <profile>
        <id>integration</id>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <version>1.1</version>
                    <executions>
                        <execution>
                            <phase>test</phase>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <configuration>
                                <tasks>
                                    <echo>Copying test database.properties to ${project.build.outputDirectory}/META-INF/spring/</echo>
                                    <copy file="src/test/resources/META-INF/spring/database.properties"
                                        todir="${project.build.outputDirectory}/META-INF/spring/" verbose="true" overwrite="true" />
                                </tasks>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile>
</profiles> 
```

使用`mvn clean package`将改为使用标准配置文件。有趣的是，配置文件也可以在 pom 之外定义，在 .m2/settings.xml

另请参阅：[Building For different Environments with Maven 2](http://maven.apache.org/guides/mini/guide-building-for-different-environments.html) -- 请注意，`overwrite`副本中的参数是必不可少的，否则它将仅随机起作用，并且在链接的文档中未提及。

# asp.net - asp.net gridview 编辑模板 http 链接

> ID：15591449
> 
> 赞同：0
> 
> 时间：2013-03-23T20:01:03.143
> 
> 标签：asp.net, gridview, label, bind

我在网格视图的编辑模板中有一个标签，如下所示：

```
<asp:Label ID="lblProjectID" runat="server" Text='<%# Bind("Project_ID") %>'></asp:Label> 
```

我想将该标签文本转换为 http 链接，如下所示：

```
<asp:Label ID="lblProjectID" runat="server" Text='<a href=http://intranet/?<%# Bind("Project_ID") %>> <%# Bind("Project_ID") %></a>'></asp:Label> 
```

所以链接看起来像`http://intranet/?Project_ID`

但是这种语法是不正确的。正确的写法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:10:37.183

这是您可以在`Label`标签上执行的操作。

```
<asp:TemplateField>
    <ItemTemplate>

        <a href='<%# String.Format("http://intranet/?Project_ID={0}", Eval("Project_ID")) %>'><%# Eval("Project_ID")%></a>

     </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:54:23.440

如果你希望它是一个链接......那么只需使用一个链接，而不是一个标签：

```
<a href='http://intranet/?<%# Eval("Project_ID") %>'><%# Eval("Project_ID")%></a> 
```

或相同的东西`HyperLinkField`（如果您想将其用作列而不是内部`EditItemTemplate`：

```
<asp:HyperLinkField DataTextField="Project_ID" DataNavigateUrlFields="Project_ID" DataNavigateUrlFormatString="http://intranet/?{0}" /> 
```

# security - 安全指标

> ID：15591450
> 
> 赞同：2
> 
> 时间：2013-03-23T20:01:03.483
> 
> 标签：security, metrics, pci-dss, pci-compliance

在执行 PCI 合规性安全指标扫描时，我收到以下错误消息。有谁知道如何解决这个问题？

```
*Title: vulnerable web program (phpRPC) Impact: A remote attacker could execute arbitrary commands, create or overwrite files, or view files or directories on the web server.

Data Sent: POST /ie/modules/phpRPC/server.php HTTP/1.0

Host: example.com

Content-type: text/xml Content-Length:162 <?xml version="1.0"?> <methodCall> <methodName>test.method</methodName> <params> <param> <value><base64>'));system(id);exit; </param> </params> </methodCall>

Data Received: ????<img height="1" width="1" style="border- style:none;" alt="" src="//googleads.g.doubleclick.net/p agead/viewthroughconversion/997970389/?value=0&amp;label=PlcJCKu92AQ Q1aPv2wM&amp;guid=ON&amp;script=0"/>

Resolution: 03/09/06 CVE 2006-1032 phpRPC is an xmlrpc library that uses database and rpc-protocol abstraction. It is prone to a remote code execution vulnerability because the decode() function within the rpc_decoder.php script fails to adequately sanitize user-supplied input before processing it in an eval() call.
Successful exploitation would result in arbitrary code execution in the context of the application. PHP scripts that implement the phpRPC library, such as RunCMS, are affected by this issue. RunCMS 1.1 through 1.3.a5 are affected, as is phpRPC up to 0.7.

Resolution: phpRPC is not currently being maintained. RunCMS users should upgrade to a version higher than 1.3.a5 which will hopefully include a fix.

Risk Factor: High/ CVSS2 Base Score: 7.5 (AV:N/AC:L/Au:N/C:P/I:P/A:P) CVE: CVE-2006-1032 BID: 16833 [Less]* 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-16T13:12:26.607

这是一个相对古老的问题，但我相信这是答案，因为我遇到了完全相同的问题。

Security Metrics 正在有效地尝试调用 linux 命令，`id`该命令将返回类似这样的内容`uid=1000(rob) gid=1000(rob) groups=...`

我的理论是安全度量正在检查字符串的响应`uid=`以查看代码是否已在远程服务器上执行。这将巧合地匹配 Google 的再营销标签。例如。在您的问题中，**uid=**的一部分：`src="//googleads.g.doubleclick.net/p agead/viewthroughconversion/997970389/?value=0&amp;label=PlcJCKu92AQ Q1aPv2wM&amp;guid=ON&amp;script=0"`

我的解决方案是在我们的 404 页面上完全删除 Google Remarketing 标签，而不仅仅是用 JS 或 HTML 注释将其注释掉。因为它是为他们发布到 ( `/scripts/modules/phpRPC/server.php`) 以尝试查找漏洞的 url 返回的 404 页面。

我希望这对您或遇到此问题的其他人有所帮助。

谢谢，

抢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:06:34.390

这是一个相对严重的问题，因为您服务器上的 RPC 服务可能会被攻击者使用。在不了解您的系统细节的情况下，我无法推荐特定的修复程序。但是，您看到的漏洞很可能是由过时的系统引起的。您应该升级并安装所有补丁。如果您的平台已停产，请移至更新的平台。 [Common Vulnerability Enumeration 包含有关扫描程序识别的漏洞的一些特定信息，可能会对您有所帮助。](https://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2006-1032)

# javascript - 如何使用 Javascript 直接在 HTML 标记下提取文本

> ID：15591457
> 
> 赞同：0
> 
> 时间：2013-03-23T20:01:29.953
> 
> 标签：javascript, html

我需要提取 HTML 标签下的文本。例如，如果我的 HTML 看起来像：

```
<span>This is Outside Text
      <span>This is Inside Text</span>
</span> 
```

那么我需要一种方法来仅提取“这是外部文本”而不​​是“这是内部文本”。**我尝试过“innerHTML”、“innerText”、“textContent”，也尝试过使用 RegEx**（虽然我不太擅长）。但我找不到解决方案。任何帮助将不胜感激。

请注意，由于一些技术限制，我只需要使用**“纯”Javascript**而**不是 jQuery**（我知道这只是 Javascript，但我被禁止在此解决方案中使用它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:12:13.153

使用您的 HTML 结构，您可以尝试一下 -[**演示**](http://jsfiddle.net/3PKmn/)

```
alert ( document.querySelector( "span" ).firstChild.nodeValue ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:04:30.400

您正在寻找文本子项（类型 3 的子节点）：

```
var children=document.getElementById("mySpan").childNodes,
    count=children.length,
    text="";

for (var i=0;i<count;i++) {
    if (children[i].nodeType==3) {
        text+=children[i].nodeValue;
    }
} 
```

现场演示：http: [//jsfiddle.net/aDgPj/](http://jsfiddle.net/aDgPj/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:15:57.983

你可以这样做。如果您在第二个跨度之后有更多文本，它也可以工作。

```
 <span id="span1">This is Outside Text
  <span id="span2">This is Inside Text</span>
 </span>

var element = document.getElementById("span1");
var element2 =  document.getElementById("span2");

var text = element.textContent.replace(element2.textContent, "");

alert(text); 
```

[http://jsfiddle.net/btevfik/y58xJ/](http://jsfiddle.net/btevfik/y58xJ/)

# vba - 文本框值不会分配给 vba 中的变量

> ID：15591460
> 
> 赞同：1
> 
> 时间：2013-03-23T20:02:08.523
> 
> 标签：vba, variables, textbox

我今天在我的软件上运行测试，发现它产生的一些值不正确。

我决定单步执行代码并注意到当悬停在所述空上时我分配给用户窗体上的文本框值的变量，即使将鼠标悬停在分配给它的文本框上时，用户输入的值也会显示。

例如，

```
n = BiTimeSteps_TextBox.Value 
```

当悬停在

```
n = empty 
```

虽然

```
BiTimeSteps_TextBox.Value = 2 
```

悬停时。

所以说我有一个公式在那之后不久

```
d = n*2 , 
```

n 当悬停在上面时表示为空，而 d 在不应该时设为 0。

有人告诉我，如果我把它换成

BiTimeSteps_TextBox.Value = n

它应该得到承认，但仍然没有。

这可能是什么原因造成的？

请参阅下面的完整代码：（它旨在使用二叉树定价方法为期权定价）

```
S = BiCurrentStockPrice_TextBox.Value
X = BiStrikePrice_TextBox.Value
r = BiRisk_Free_Rate_TextBox.Value
T = BiexpTime_TextBox.Value
Sigma = BiVolatility_TextBox.Value
n = BiTimeSteps_TextBox.Value

Dim i, j, k As Integer
Dim p, V, u, d, dt As Double

dt = T / n ' This finds the value of dt
u = Exp(Sigma * Sqr(dt)) 'formula for the up factor
d = 1 - u 'formula for the down factor

'V value of option

'array having the values
Dim bin() As Double 'is a binomial arrays, it stores the value of each node, there is a loop

'work out the risk free probability

p = (1 + r - d) / (u - d)

'probability of going up

ReDim bin(n + 1) As Double

'it redims the array, and n+1 is used because it starts from zero
'------------------------------------------------------------------------------------------------------------------------------
''European Call

If BiCall_CheckBox = True Then

    For i = 0 To n 'payoffs = value of option at final time

        bin(i + 1) = Application.WorksheetFunction.Max(0, (u ^ (n - i)) * (d ^ i) * S - X) 

       'It takes the max payoff or 0

       Cells(i + 20, n + 2) = bin(i + 1) 'to view payoffs on the isolated column on the right

    Next i

End If

'european put

If BiPut_CheckBox = True Then

    For i = 0 To n 'payoffs = value of option at final time

        bin(i + 1) = Application.WorksheetFunction.Max(0, X - (S * (u * (n - i)) * (d * i))) 

        ' European Put- It takes the max payoff or 0

        Cells(i + 20, n + 2) = bin(i + 1) 'to view payoffs on the isolated column on the right

    Next i

End If

For k = 1 To n 'backward column loop

    For j = 1 To (n - k + 1) 'loop down the column loop

        bin(j) = (p * bin(j) + (1 - p) * bin(j + 1)) / (1 + r)

        Cells(j + 19, n - k + 2) = bin(j) 
        '' print the values along the column, view of tree

    Next j

Next k

Worksheets("Binomial").Cells(17, 2) = bin(1) ' print of the value V
BiOptionPrice_TextBox = bin(1) 
```

# java - 将文件导入数据库

> ID：15591461
> 
> 赞同：0
> 
> 时间：2013-03-23T20:02:19.803
> 
> 标签：java

我在java中有一个方法可以打开一个excel文件并将其复制到数据库中。这工作正常。

我想要做的是编写一个java服务，在文件夹中查找新文件，然后调用我上面概述的方法将文件重命名为Done-originalfilename.xls。然后服务循环不断寻找未以 Done-* 命名的文件

我如何在java中编写服务来做到这一点。我来自微软背景，我只想编写一个 Windows 服务。java中的等价物以及创建基于计时器循环以查找新文件的服务的任何示例都将很棒。

谢谢

# wordpress - wordpress 自定义背景主题支持

> ID：15591463
> 
> 赞同：1
> 
> 时间：2013-03-23T20:02:33.080
> 
> 标签：wordpress, wordpress-theming

我在 WP 中使用默认主题的子主题，并且我已经更改了背景图像（在 wp-admin 中）......它是用 wp_head(); 生成的。header.php 中的函数... 输出源代码如下所示：

```
<style type="text/css" id="custom-background-css">
  body.custom-background { background-color: #fffffe; background-image: url('http://example.com/wp-content/uploads/header.jpg'); background-repeat: no-repeat; background-position: top center; background-attachment: fixed; }
</style> 
```

由于某种原因，我需要修改图像的 url（一些钩子、functions.php 修改或其他任何东西），但我无法找到如何做到这一点。我搜索了所有没有结果的主题文件:(

任何人都知道，怎么做（当然，不修改 wp 核心文件 - 只是主题修改或插件）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-17T13:13:29.210

老实说，我不喜欢 WordPress 为任何主题添加不可调整的功能。这就是我解决它的方法。我从标签中删除了这个`custom-background`类。`body`希望它对某人仍然有用。

```
function disable_custom_background_css($classes)
{
    $key = array_search('custom-background', $classes, true);
    if($key !== false)
        unset($classes[$key]); 
    return $classes;
} 
```

在打电话之前`body_class()`，最好在`functions.php`

```
add_filter('body_class', 'disable_custom_background_css'); 
```

这可以防止脚本`wp_head`将此特定样式添加到正文标记。现在您可以决定如何实现背景图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-26T14:06:34.580

WP tuts 文章中的代码对我不起作用，但我设法进行了一些修改以使其正常工作。

```
global $wp_version;

if ( ! function_exists( 'change_custom_background_cb' ) ) :

function change_custom_background_cb() {
    $background = get_background_image();
    $color = get_background_color();

    if ( ! $background && ! $color )
        return;

    $style = $color ? "background-color: #$color;" : '';

    if ( $background ) {
        $image = " background-image: url('$background');";

        $repeat = get_theme_mod( 'background_repeat', 'repeat' );

        if ( ! in_array( $repeat, array( 'no-repeat', 'repeat-x', 'repeat-y', 'repeat' ) ) )
            $repeat = 'repeat';

        $repeat = " background-repeat: $repeat;";

        $position = get_theme_mod( 'background_position_x', 'left' );

        if ( ! in_array( $position, array( 'center', 'right', 'left' ) ) )
            $position = 'left';

        $position = " background-position: top $position;";

        $attachment = get_theme_mod( 'background_attachment', 'scroll' );

        if ( ! in_array( $attachment, array( 'fixed', 'scroll' ) ) )
            $attachment = 'scroll';

        $attachment = " background-attachment: $attachment;";

        $style .= $image . $repeat . $position . $attachment;
    }
?>
<style type="text/css" id="custom-background-css">
.custom-background { <?php echo trim( $style ); ?> }
</style>
<?php
}
if ( version_compare( $wp_version, '3.4', '>=' ) ) {
    add_theme_support( 'custom-background', array( 'wp-head-callback' => 'change_custom_background_cb','default-color' => 'fff' ) );
}
else {
    add_custom_background('change_custom_background_cb');
}

endif; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:18:56.213

这正是我一直在寻找的东西：[http ://wp.tutsplus.com/articles/tips-articles/modifying-custom-background-feature-for-any-html-element-you-want/](http://wp.tutsplus.com/articles/tips-articles/modifying-custom-background-feature-for-any-html-element-you-want/)

# android - 使用 windows Android 调试 android 应用程序

> ID：15591464
> 
> 赞同：1
> 
> 时间：2013-03-23T20:02:34.730
> 
> 标签：android, adb, android-debug

我问的是调试android应用程序（将虚拟设备连接到adb）这个虚拟设备是（“windows android应用程序”）你可以在这里找到它：[下载](https://mega.co.nz/#!BUUHDTZb!DP3bLVzL0FhI7378KmWB5l664xlBwmZTLa5a12dmQ_I)：

我有一些想法，你可以使用它，但我尝试了第一个，因为我没有足够的知识，它对我不起作用。

想法：1-尝试通过网络连接。>>> 试过了，但不能和我一起工作可能会和你一起工作。2-试图有一个假的USB连接。

您有任何其他想法是否可行，请写下来，可能其他人可以应用它。

注意：“windowsAndroid”应用程序功能强大，速度[很快](http://www.socketeq.com/).3 >>>>> 我掌握的这些最重要的信息。

对不起我的英语不好。

我正在等待您的专业解决方案。提前致谢。

# javascript - 查看/滚动到某个 div 时如何触发操作？

> ID：15591469
> 
> 赞同：0
> 
> 时间：2013-03-23T20:02:51.120
> 
> 标签：javascript, jquery, html

我有一些 div，当查看或滚动到某个 div 时，我需要触发一个动作（例如浮动另一个 div 或触发警报）。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:05:31.857

我不知道“已查看”是什么意思-但是当用户将鼠标悬停在以下位置时，您会这样做`div`：

```
function isScrolledIntoView(elem) {
    var docViewTop = $(window).scrollTop();
    var docViewBottom = docViewTop + $(window).height();
    var elemTop = $(elem).offset().top;
    var elemBottom = elemTop + $(elem).height();
    return ((elemBottom <= docViewBottom) && (elemTop >= docViewTop));
}

$(window).scroll(function() {
    if(isScrolledIntoView(myelement)) {
        // in view
    } else {
        // not in view
    }
}); 
```

归功于[有没有办法检测 HTML 元素何时从视图中隐藏？](https://stackoverflow.com/questions/769701/is-there-a-way-to-detect-when-an-html-element-is-hidden-from-view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:27:28.140

您可能可以使用[Bullseye jQuery 插件](http://static.pixeltango.com/jQuery/Bullseye/)，它向元素添加添加`enterviewport`和事件。`leaveviewport`

# java - Java HttpClient 的响应流不正确

> ID：15591473
> 
> 赞同：0
> 
> 时间：2013-03-23T20:03:18.903
> 
> 标签：java, http, stream, html-parsing, httpclient

在我的应用程序中，我需要解析一个网站并将一些数据从 ir 保存到数据库。我正在使用 HttpClient 来获取页面内容。我的代码如下所示：

```
 HttpClient client = new DefaultHttpClient();
        System.out.println(doc.getUrl());
        HttpGet contentGet= new HttpGet(siteUrl + personUrl);
        HttpResponse response = client.execute(contentGet);

        String html =  convertStreamToString(response.getEntity().getContent());

       /*
          parse the page
       */

    /***********************************************************************/

    public static String convertStreamToString(InputStream is) throws Exception {
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();
    String line = null;
    while ((line = reader.readLine()) != null) {
      sb.append(line + "\n");
    }
    is.close();
    return sb.toString();
} 
```

我正在循环执行此操作-我尝试获取某些页面的内容（它们的结构相同）。有时它可以正常工作，但不幸的是，在许多情况下，我的反应是一系列类似的垃圾邮件：

```
�=�v7���9�Hǳ$�d7/�$�st��؎I��X^�$A6t_D���!gr�����C^��k@��MQ�2�d�8�] 
```

我不知道问题出在哪里，请帮助我。

* * *

我已经显示了我收到的所有回复的标题。对于正确的，有：

```
Server : nginx/1.0.13
Date : Sat, 23 Mar 2013 21:50:31 GMT
Content-Type : text/html; charset=utf-8
Transfer-Encoding : chunked
Connection : close
Vary : Accept-Encoding
Expires : Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control : no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma : no-cache
Set-Cookie : pfSC=1; path=/; domain=.profeo.pl
Set-Cookie : pfSCvp=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; domain=.profeo.pl 
```

对于不正确的：

```
Server : nginx/1.2.4
Date : Sat, 23 Mar 2013 21:50:33 GMT
Content-Type : text/html
Transfer-Encoding : chunked
Connection : close
Set-Cookie : pfSCvp=3cff2422fd8f9b6e57e858d3883f4eaf; path=/; domain=.profeo.pl
Content-Encoding : gzip 
```

还有其他建议吗？我的猜测是这个 gzip 编码在这里是一个问题，但我能做些什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:37:20.550

这可能与某些网站在响应中使用与您的 JVM 默认值不同的字符编码有关。要将原始字节流（如 InputStreams 提供的那些）转换为字符流（或字符串），您必须选择字符编码。HTTP 响应可以使用不同的编码，但它们通常会告诉您它们使用的是什么编码。您可以通过查找 HttpResponse 的“Content-Encoding”标头手动执行此操作，但您的库提供了执行此操作的实用程序，因为这是一种常见需求。它位于[EntityUtils](http://hc.apache.org/httpcomponents-core-ga/httpcore/apidocs/org/apache/http/util/EntityUtils.html)类中，您可以像这样使用它：

```
String html = EntityUtils.toString(response.getEntity()); 
```

你必须添加

```
import org.apache.http.util.EntityUtils; 
```

到您的文件的顶部以使其正常工作。

如果这没有帮助，另一种可能性是您正在检索的某些 URL 是二进制的，而不是文本的，在这种情况下，您尝试做的事情没有意义。如果是这种情况，您可以尝试通过检查标头来区分文本响应和二进制响应`Content-Type`，如下所示：

```
boolean isTextual = response.getFirstHeader("Content-Type").getValue().startsWith("text"); 
```

新材料：

查看您添加到问题中的 HTTP 标头后，我最好的猜测是这是由响应的 gzip 压缩引起的。[您可以在这个问题](https://stackoverflow.com/questions/2777076/does-apache-commons-httpclient-support-gzip)中找到有关如何处理的更多信息，但简短的版本是您应该尝试使用[ContentEncodingHttpClient](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/ContentEncodingHttpClient.html)而不是 DefaultHttpClient。

另一个编辑： ContentEncodingHttpClient 现在已弃用，您应该改用[DecompressingHttpClient](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/impl/client/DecompressingHttpClient.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T07:57:11.103

您需要一个不使用压缩的 httpclient。我使用这个`HttpClientBuilder.create().disableContentCompression().build()`httpclient

# java - 在堆栈的 ArrayList 中，如果堆栈为空，为什么索引不正确？

> ID：15591476
> 
> 赞同：1
> 
> 时间：2013-03-23T20:03:31.220
> 
> 标签：java, arraylist, stack, indexof

我有一个堆栈的 ArrayList，在其中我将一个元素添加到其中一个堆栈并遍历列表，打印每个堆栈的索引。

然后我从前一个 Stack 中删除元素，将其添加到下一个 Stack，打印每个 Stack 的索引，然后对 ArrayList 中的所有 Stack 继续此操作。

但是，当任何堆栈为空时，在获取 ArrayList 中每个堆栈的索引时会出现非常不寻常的行为。***不***为空的 Stack将具有正确的索引值，而为空***的***Stack将具有不正确的索引值。

此外，似乎如果包含元素的堆栈位于索引 0 处，所有其他索引值都将为 1。如果包含元素的堆栈位于任何其他索引处，它将具有正确的索引值和所有其他索引值索引值将为 0。

* * *

这是我的代码：

```
import java.util.List;
import java.util.Stack;
import java.util.ArrayList;

public class ListOfStacks {

    // instance variables:
    List<Stack<Integer>> stacks;
    private static final int NUMBER_OF_STACKS = 3;

    // constructor:
    ListOfStacks() {
        this.stacks = new ArrayList<Stack<Integer>>(NUMBER_OF_STACKS);

        // adding the stacks to the list here:
        for (int i = 0; i < NUMBER_OF_STACKS; i++) {
            this.stacks.add(new Stack<Integer>());
        }
    }

    // instance methods:
    void addElement(int stackIndex, int element) {
        this.stacks.get(stackIndex).add(element);
    }
    void removeElement(int stackIndex) {
        this.stacks.get(stackIndex).pop();
    }
    void printIndexes(int stackIndex, int element) {
        System.out.printf("The stack at index %d now contains %d" +
            "(the other stacks are empty):%n", stackIndex, element);

        for (Stack<Integer> stack : this.stacks) {
            System.out.printf("index %d%n", this.stacks.indexOf(stack));
        }
        System.out.println();
    }

    // main method:
    public static void main(String[] args) {
        ListOfStacks list = new ListOfStacks();
        int index = 0, number = 5;

        // adding the number 5 to the stack at index 0:
        list.addElement(index, number);
        list.printIndexes(index, number);

        // now removing that element, and adding it to the stack at index 1:
        list.removeElement(index++);
        list.addElement(index, number);
        list.printIndexes(index, number);

        // now removing that element, and adding it to the stack at index 2:
        list.removeElement(index++);
        list.addElement(index, number);
        list.printIndexes(index, number);
    }
} // end of ListOfStacks 
```

...这是输出（对于三个堆栈的 ArrayList）：

```
The stack at index 0 now contains 5 (the other stacks are empty):
index 0
index 1
index 1

The stack at index 1 now contains 5 (the other stacks are empty):
index 0
index 1
index 0

The stack at index 2 now contains 5 (the other stacks are empty):
index 0
index 0
index 2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T20:19:36.810

您得到错误索引号的原因与`indexOf`List 中的实现方式有关。在它下面调用`Stack.equals()`. 这决定了堆栈是否在元素方面是相等的。当您`list.indexOf`使用空堆栈调用时，它将返回列表中第一个空堆栈的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:23:38.583

```
indexOf(Object o) 
          Returns the index of the first occurrence of the specified element in this list, or -1 if this list does not contain the element. 
```

java中的堆栈基本上是一个向量，向量类有这个等于

```
 /**
  969        * Compares the specified Object with this Vector for equality.  Returns
  970        * true if and only if the specified Object is also a List, both Lists
  971        * have the same size, and all corresponding pairs of elements in the two
  972        * Lists are <em>equal</em>.  (Two elements {@code e1} and
  973        * {@code e2} are <em>equal</em> if {@code (e1==null ? e2==null :
  974        * e1.equals(e2))}.)  In other words, two Lists are defined to be
  975        * equal if they contain the same elements in the same order.
  976        *
  977        * @param o the Object to be compared for equality with this Vector
  978        * @return true if the specified Object is equal to this Vector
  979        */
  980       public synchronized boolean equals(Object o) {
  981           return super.equals(o);
  982       } 
```

所以发生的事情是 indexof 找到第一个空堆栈，将其视为相等并返回该索引。

因此，当索引 0 有元素而其他没有元素时，等于空堆栈的第一个堆栈是位置 1。

如果另一个元素有数据并且第一个元素相等并且您正在寻找一个空堆栈，它将始终停止并返回索引 0。

# sql - 使用 Anorm 和 Scala Play 框架的动态 SQL 参数

> ID：15591479
> 
> 赞同：14
> 
> 时间：2013-03-23T20:03:54.820
> 
> 标签：sql, scala, playframework, playframework-2.0, anorm

是否可以为 anorm 的“on”方法动态创建一个列表？

我有一个带有可选输入的表单，目前我检查每个选项并创建一个包含已定义选项的列表，并试图将其传递给 anorm。目前我得到这个编译错误

```
type mismatch; found : List[java.io.Serializable] required: (Any, anorm.ParameterValue[_]) 
```

我不确定如何创建此列表。当前代码：

```
val onList = List(
        'school_id = input.school,
        if(input.rooms isDefined)       ('rooms -> input.rooms) else "None" ,
        if(input.bathrooms isDefined)   ('bathrooms -> input.bathrooms) else "None" ,
        if(input.houseType isDefined)   ('houseType -> input.houseType) else "None" ,
        if(input.priceLow isDefined)    ('priceLow -> input.priceLow) else "None" ,
        if(input.priceHigh isDefined)   ('priceHigh -> input.priceHigh) else "None" ,
        if(input.utilities isDefined)   ('utilities -> input.utilities) else "None" 
).filter(_!="None")
SQL("SELECT * FROM Houses WHERE " + whereString).on(onList).as(sqlToHouse *) 
```

我试过这样做，因为最初我认为它与

```
.on('rooms -> input.rooms, 'bathroom -> input.bathrooms... etc) 
```

编辑：

代码现在是：

```
val onList = Seq(
        ('school_id -> input.school),
        if(input.rooms isDefined)       ('rooms -> input.rooms.get)         else None ,
        if(input.bathrooms isDefined)   ('bathrooms -> input.bathrooms.get) else None ,
        if(input.houseType isDefined)   ('houseType -> input.houseType.get) else None ,
        if(input.priceLow isDefined)    ('priceLow -> input.priceLow.get)   else None ,
        if(input.priceHigh isDefined)   ('priceHigh -> input.priceHigh.get) else None ,
        if(input.utilities isDefined)   ('utilities -> input.utilities.get) else None 
).filter(_!=None).asInstanceOf[Seq[(Any,anorm.ParameterValue[_])]] 
```

使用 SQL 命令：

```
SQL("SELECT * FROM Houses WHERE " + whereString).on(onList:_*).as(sqlToHouse *) 
```

现在得到异常

```
[ClassCastException: java.lang.Integer cannot be cast to anorm.ParameterValue] 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-25T14:49:27.657

重要的是您必须创建 type 的值`ParameterValue`。这通常使用`toParameterValue()`函数来完成。

一种方法是创建一系列您展平的选项：

```
val onList = Seq(
  Some('school_id -> input.school),
  input.rooms.map('rooms -> _),
  input.bathrooms.map('bathrooms -> _)
).flatten 
```

然后可以将此序列映射到正确的值：

```
SQL(
  "SELECT * FROM Houses WHERE " + whereString
).on(
  onList.map(v => v._1 -> toParameterValue(v._2)): _*
) 
```

* * *

这可以简化如下：

```
val onList = Seq(
  Some('school_id -> input.school),
  input.rooms.map('rooms -> _),
  input.bathrooms.map('bathrooms -> _)
).flatMap(_.map(v => v._1 -> toParameterValue(v._2)))

SQL(
  "SELECT * FROM Houses WHERE " + whereString
).on(
  onList: _*
) 
```

* * *

或者也许最简单的解决方案是这样的：

```
val onList = Seq(
  Some('school_id -> toParameterValue(input.school)),
  input.rooms.map('rooms -> toParameterValue(_)),
  input.bathrooms.map('bathrooms -> toParameterValue(_))
).flatten

SQL(
  "SELECT * FROM Houses WHERE " + whereString
).on(
  onList: _*
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T23:53:26.140

所以我最后只是多次打电话。

```
var query = SQL("SELECT * FROM Houses WHERE " + whereString).on('school_id -> input.school)
if(input.rooms isDefined)       query= query.on('rooms -> input.rooms.get)
if(input.bathrooms isDefined)   query= query.on('bathrooms -> input.bathrooms.get)
if(input.houseType isDefined)   query= query.on('houseType -> input.houseType.get)
if(input.priceLow isDefined)    query= query.on('priceLow -> input.priceLow.get)
if(input.priceHigh isDefined)   query= query.on('priceHigh -> input.priceHigh.get)
if(input.utilities isDefined)   query= query.on('utilities -> input.utilities.get)
query.as(sqlToHouse *) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-08T10:47:57.530

你可以看看 multivalue parameter is next Anorm (coming Play 2.3/master)。

# ember.js - 在 EmberJS 的嵌套视图中无法绑定到 ApplicationController

> ID：15591483
> 
> 赞同：1
> 
> 时间：2013-03-23T20:04:09.240
> 
> 标签：ember.js

所以这就是我所拥有的：

```
App

   TopbarView

   UserIndexController

      UserRowView 
```

这就是发生的嵌套。

从 TopbarView 内部，我可以访问 ApplicationController。

但在 UserRowView 内部，我似乎无法访问它。

如何访问 ApplicationController 上的某些内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:46:15.417

添加`needs: ['application']`到您的，您可以在该属性`UserIndexController`上访问它。`controllers.application`

# javascript - 触发 windows.location 时获取 div id / class

> ID：15591485
> 
> 赞同：0
> 
> 时间：2013-03-23T20:04:19.427
> 
> 标签：javascript, jquery

我有一个可点击的 div（windows.location），我试图在点击这个 div 时显示一个模式弹出窗口。

这是我的 div 框：

```
<div class="category_box" onclick="window.location='/Products/@cityName/@categoryName'">
            <div class="category_box_catName">
                @link
            </div>
            <div class="category_box_NumOfProds">                   
                @Resources.Categories_GetByCity_NumProdsText
            </div>
        </div> 
```

我试图在单击时获取此 div 的类但无法使其工作：

```
if ($(event.target).hasClass('div[class*=category_box]')) {
    $('#mdlPopup').show();
} 
```

然后我试图改变 onclick 并在其中添加 $('#mdlPopup').show();

```
<div class="category_box"  onclick="$('#mdlPopup').show(); window.location='/Products/@cityName/@categoryName'">
... 
```

但这也不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T13:26:29.483

我从 div 中删除了 windows.location 并使用此代码使 div 可点击。然后我可以使用以下方法从 div 获取类：

```
 $(document).ready(function () {

            $('[class^=category_box]').click(function () {
                $('#mdlPopup').show();
                window.location = $(this).find("a").attr("href");
                return false;
            });
        }); 
```

# regex - 如何从日志文件中提取唯一事件并对其进行计数？

> ID：15591486
> 
> 赞同：0
> 
> 时间：2013-03-23T20:04:20.627
> 
> 标签：regex, logging, extract

我有一个直播连接日志文件，想知道使用了哪些客户端以及使用频率。日志文件非常大（大约 100mb），包含过去 3 年的条目。日志条目如下所示（IP 已随机化！）：

```
<03/23/13@15:46:25> [dest: 1.187.2.99] starting stream (UID: 25477)[L: 2]{A: Internet%20Explorer%207}(P: 1)
<03/23/13@15:46:34> [dest: 1.187.2.99] connection closed (9 seconds) (UID: 25477)[L: 1]{Bytes: 403705}(P: 1)
<03/23/13@16:24:36> [dest: 1.194.2.16] starting stream (UID: 25478)[L: 2]{A: WMPlayer/10.0.0.364}(P: 1)
<03/23/13@16:40:56> [dest: 1.194.2.16] connection closed (981 seconds) (UID: 25478)[L: 1]{Bytes: 15938209}(P: 1)
<03/23/13@16:41:29> [dest: 1.158.2.39] starting stream (UID: 25479)[L: 2]{A: WinampMPEG/5.50}(P: 1)
<03/23/13@16:41:40> [dest: 1.158.2.39] connection closed (11 seconds) (UID: 25479)[L: 1]{Bytes: 432719}(P: 1)
<03/23/13@17:51:29> [dest: 1.142.2.225] starting stream (UID: 25480)[L: 2]{A: WinampMPEG/5.50}(P: 1)
<03/23/13@18:07:48> [dest: 1.142.2.225] connection closed (979 seconds) (UID: 25480)[L: 1]{Bytes: 15919475}(P: 1)
<03/23/13@18:18:48> [dest: 1.232.2.215] starting stream (UID: 25481)[L: 2]{A: TapinRadio}(P: 1)
<03/23/13@18:19:07> [dest: 1.232.2.215] connection closed (19 seconds) (UID: 25481)[L: 1]{Bytes: 417192}(P: 1)
<03/23/13@18:34:45> [dest: 1.187.2.99] starting stream (UID: 25482)[L: 2]{A: Internet%20Explorer%207}(P: 1)
<03/23/13@18:34:46> [dest: 1.187.2.99] connection closed (2 seconds) (UID: 25482)[L: 1]{Bytes: 282751}(P: 1) 
```

我想提取每个唯一的客户端，并计算这种客户端的使用频率。对于上面的日志，结果应该如下所示：

```
Internet%20Explorer%207   2
WMPlayer/10.0.0.364       1
WinampMPEG/5.50           2
TapinRadio                1 
```

起初，我只是过滤了所有无用的条目。（抱歉[使用 cat](http://partmaps.org/era/unix/award.html#cat)。）

```
cat shoutcast.log | grep "starting stream" > filtered.txt 
```

结果如下所示：

```
<03/23/13@15:46:25> [dest: 1.187.2.99] starting stream (UID: 25477)[L: 2]{A: Internet%20Explorer%207}(P: 1)
<03/23/13@16:24:36> [dest: 1.194.2.16] starting stream (UID: 25478)[L: 2]{A: WMPlayer/10.0.0.364}(P: 1)
<03/23/13@16:41:29> [dest: 1.158.2.39] starting stream (UID: 25479)[L: 2]{A: WinampMPEG/5.50}(P: 1)
<03/23/13@17:51:29> [dest: 1.142.2.225] starting stream (UID: 25480)[L: 2]{A: WinampMPEG/5.50}(P: 1)
<03/23/13@18:18:48> [dest: 1.232.2.215] starting stream (UID: 25481)[L: 2]{A: TapinRadio}(P: 1)
<03/23/13@18:34:45> [dest: 1.187.2.99] starting stream (UID: 25482)[L: 2]{A: Internet%20Explorer%207}(P: 1) 
```

但是现在呢？我有点迷茫，如何访问`{A: }`括号中的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:13:55.240

试试这个 awk 行：

```
 awk -F'{A: |}' '/starting/{a[$2]++}END{for(x in a)print x" : "a[x]}' input 
```

用你的数据测试：

```
kent$  cat ff
<03/23/13@15:46:25> [dest: 1.187.2.99] starting stream (UID: 25477)[L: 2]{A: Internet%20Explorer%207}(P: 1)
<03/23/13@15:46:34> [dest: 1.187.2.99] connection closed (9 seconds) (UID: 25477)[L: 1]{Bytes: 403705}(P: 1)
<03/23/13@16:24:36> [dest: 1.194.2.16] starting stream (UID: 25478)[L: 2]{A: WMPlayer/10.0.0.364}(P: 1)
<03/23/13@16:40:56> [dest: 1.194.2.16] connection closed (981 seconds) (UID: 25478)[L: 1]{Bytes: 15938209}(P: 1)
<03/23/13@16:41:29> [dest: 1.158.2.39] starting stream (UID: 25479)[L: 2]{A: WinampMPEG/5.50}(P: 1)
<03/23/13@16:41:40> [dest: 1.158.2.39] connection closed (11 seconds) (UID: 25479)[L: 1]{Bytes: 432719}(P: 1)
<03/23/13@17:51:29> [dest: 1.142.2.225] starting stream (UID: 25480)[L: 2]{A: WinampMPEG/5.50}(P: 1)
<03/23/13@18:07:48> [dest: 1.142.2.225] connection closed (979 seconds) (UID: 25480)[L: 1]{Bytes: 15919475}(P: 1)
<03/23/13@18:18:48> [dest: 1.232.2.215] starting stream (UID: 25481)[L: 2]{A: TapinRadio}(P: 1)
<03/23/13@18:19:07> [dest: 1.232.2.215] connection closed (19 seconds) (UID: 25481)[L: 1]{Bytes: 417192}(P: 1)
<03/23/13@18:34:45> [dest: 1.187.2.99] starting stream (UID: 25482)[L: 2]{A: Internet%20Explorer%207}(P: 1)
<03/23/13@18:34:46> [dest: 1.187.2.99] connection closed (2 seconds) (UID: 25482)[L: 1]{Bytes: 282751}(P: 1)

kent$  awk -F'{A: |}' '/starting/{a[$2]++}END{for(x in a)print x" : "a[x]}' ff
WMPlayer/10.0.0.364 : 1
TapinRadio : 1
WinampMPEG/5.50 : 2
Internet%20Explorer%207 : 2 
```

# ruby - 合并哈希时包括空 k/v 对

> ID：15591487
> 
> 赞同：-3
> 
> 时间：2013-03-23T20:04:22.910
> 
> 标签：ruby, hashtable

有三个哈希值。每个散列都会产生一个键/值对。

当合并并输出到一个 json 文件时，唯一可见的 k/v 对是那些有数据的。

例如：

```
employee_hours[ name ] =         {"Hours" => hours}
employee_revenue [ name ] =      {"Revenue" => revenue}
employee_activations [ name ] =  {"Activations" => activations} 
```

如果任何 k/v 对不存在，我需要将它们包含在输出中，其值为`0.00`.

我试图简单地在每个哈希表中包含来自其他哈希的空 k/v 对，但是当合并时，它们会覆盖现有值。

```
employee_hours[ name ] =         {"Hours" => hours, "Revenue" = "", Activations = ""}
employee_revenue [ name ] =      {"Hours" => "", "Revenue" => revenue, Activations = ""}
employee_activations [ name ] =  {"Hours" => "", "Revenue" => "", "Activations" => activations} 
```

**编辑**

我当前的代码在这里列出：[https ://gist.github.com/hnanon/766a0d6b2b0f9d9d03fd](https://gist.github.com/hnanon/766a0d6b2b0f9d9d03fd)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:26:33.663

您需要为默认值定义一个散列并合并到其中。假设 employee_final 是您合并所有员工信息的哈希值，

```
employee_defaults = { "Hours" => 0.0, "Revenue" => 0.0 }
employee_final.each_key do |name|
  employee_final[name] = employee_defaults.merge(employee_final[name])
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:29:14.120

听起来好像您需要定义一个“REQUIRED_KEYS”数组，并检查它们是否存在于您的散列中。这是实现这一目标的一种方法：

```
REQUIRED_KEYS = [ "A", "B", "C" ]
DEFAULT_VALUE = 0.0    
REQUIRED_KEYS.each { |key| your_hash[key] = DEFAULT_VALUE if not your_hash.has_key?(key) } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:37:06.627

## 使用哈希默认值

您可以使用[Hash#new](http://ruby-doc.org/core-2.0/Hash.html#method-c-new)的参数来设置哈希的默认值。例如：

```
require 'json'

employee_hours       = Hash.new(0.0)
employee_revenue     = Hash.new(0.0)
employee_activations = Hash.new(0.0)

name = 'Bob'

{
  'Hours'       => employee_hours[name],
  'Revenue'     => employee_revenue[name],
  'Activations' => employee_activations[name],
}.to_json

# => "{\"Hours\":0.0,\"Revenue\":0.0,\"Activations\":0.0}" 
```

# mysql - 基于测验的应用程序的表结构

> ID：15591494
> 
> 赞同：-2
> 
> 时间：2013-03-23T20:05:46.740
> 
> 标签：mysql, database, database-design

我正在尝试构建一个基本的测验应用程序，但我对当前创建两个表的表结构感到困惑`question`，`options`但我不确定是将它们分开还是应该将它们合并到一个表中。请建议我为我的测验应用程序提供更好的结构。

我的问题表 -

![问题](../Images/f6457627c2235d9891025ebb27083cff.png)

我的`options`桌子——

![选项](../Images/bebe31e3887fc42ba238b0ff4513bffd.png)

还有一件事——目前没有为选项表设置主键，因为我也不确定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:09:24.257

我会明确地将表格分开 - 它更有效并保持结构更清洁。您也可以使用外键。

但我认为这样做会更好：

表 1：（问题）

*   ID
*   问题

表 2：（选项）

*   ID
*   问题的 ID
*   期权价值
*   是正确的？（布尔）

所以你可以`SELECT * FROM Options WHERE Question_ID = X`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:14:01.963

这实际上取决于您的测验的外观。如果您确定每个问题都是“从四个中选择一个” - 那么您可以制作一张表格，其中包含“好答案”、“第一个坏答案”、“第二个坏答案”、“第三个坏答案”列。这会更容易也更有效。

另一方面，为选项制作单独的表格将使您可以轻松地提出具有不同数量可能答案的问题

# android - onItemClickListener() startActivity 中的 ListFragment 使应用程序崩溃

> ID：15591498
> 
> 赞同：0
> 
> 时间：2013-03-23T20:06:14.370
> 
> 标签：android, android-listview, android-listfragment

我从 ListFragment 上的 onItemClickListener() 调用 startActivity(intent) 时遇到问题。当我单击列表视图中的项目时，应用程序崩溃。

代码在这里：

```
public class AndroidFragment extends SherlockListFragment{

    static{
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
    }
    static final String URL = "***";
    // XML node keys
    static final String KEY_ITEM = "novost"; // parent node
    //static final String KEY_ID = "id";
    static final String KEY_NAME = "naslov";
    static final String KEY_COST = "datum";
    static final String KEY_DESC = "text";
    static final String KEY_LINK = "link";
    static final String KEY_LINK1 = "doc";
    ArrayList<HashMap<String, String>> menuItems;
    String[] from = { KEY_NAME, KEY_DESC, KEY_COST,KEY_LINK,KEY_LINK1};

    /** Ids of views in listview_layout */
    int[] to = { R.id.naslov, R.id.novost, R.id.datum,R.id.link,R.id.link1};
    ListView list;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
      super.onActivityCreated(savedInstanceState);
      new loadListView().execute();
      ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) view.findViewById(R.id.naslov)).getText().toString();
                String cost = ((TextView) view.findViewById(R.id.datum)).getText().toString();

                String description = ((TextView) view.findViewById(R.id.novost)).getText().toString();
                String link = ((TextView) view.findViewById(R.id.link)).getText().toString();
                String link1 = ((TextView) view.findViewById(R.id.link1)).getText().toString();
                //String link_asd=link;

                // Starting new intent
                Intent in = new Intent(getActivity().getBaseContext(), SingleMenuItemActivity.class);
                in.putExtra(KEY_NAME, name);
                in.putExtra(KEY_COST, cost);
                in.putExtra(KEY_DESC, description);
                if(link==null)
                {
                    link=null;
                }else{
                in.putExtra(KEY_LINK, link);
                in.putExtra(KEY_LINK1, link1);
                }
                //in.putExtra("link1", link_asd);
                startActivity(in);

            }
        });

    }
    /*@Override
    public void onListItemClick(ListView list, View v, int position, long id) {
        /**
         * Toast message will be shown when you click any list element

        //Toast.makeText(getActivity(), getListView().getItemAtPosition(position).toString(), Toast.LENGTH_LONG).show();
        String name = ((TextView) v.findViewById(R.id.naslov)).getText().toString();
        String cost = ((TextView) v.findViewById(R.id.datum)).getText().toString();

        String description = ((TextView) v.findViewById(R.id.novost)).getText().toString();
        String link = ((TextView) v.findViewById(R.id.link)).getText().toString();
        String link1 = ((TextView) v.findViewById(R.id.link1)).getText().toString();
        //String link_asd=link;

        // Starting new intent
        Intent in = new Intent(getActivity(), SingleMenuItemActivity.class);
        in.putExtra(KEY_NAME, name);
        in.putExtra(KEY_COST, cost);
        in.putExtra(KEY_DESC, description);
        if(link==null)
        {

        }else{
        in.putExtra(KEY_LINK, link);
        in.putExtra(KEY_LINK1, link1);
        }
        //in.putExtra("link1", link_asd);
        startActivity(in);
        Log.e("error",name);
        super.onListItemClick(list, v, position, id);
    }*/

    @Override
    public void onResume() {
        super.onResume();
        //Log.w("Aplikacija_resume","Startovana" );
        //new loadListView().execute();

    }

    public class loadListView extends AsyncTask<Integer, String, String> 
    {   
        private final ProgressDialog dialog = new ProgressDialog(getActivity());
        @Override protected void onPreExecute() 
        { 

            //Toast.makeText(getActivity(), "Ucitavanje...", Toast.LENGTH_LONG).show();
            //

            this.dialog.setMessage("Molimo da sačekate ...");
        super.onPreExecute();
        } 
        @Override protected String doInBackground(Integer... args) 
        { // updating UI from Background Thread 
        menuItems = new ArrayList<HashMap<String, String>>();
            final XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_ITEM);
            // looping through all item nodes <item>
            for (int i = 0; i < nl.getLength(); i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value

                map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
                map.put(KEY_COST, "Datum: " + parser.getValue(e, KEY_COST));
                map.put(KEY_DESC, parser.getValue(e, KEY_DESC));
                map.put(KEY_LINK, parser.getValue(e, KEY_LINK));
                map.put(KEY_LINK1, parser.getValue(e, KEY_LINK1));

                // adding HashList to ArrayList
                menuItems.add(map);

            }

        return null; 
        } 
        @Override
        protected void onPostExecute(String args)
        { 
            //Toast.makeText(getActivity(), "Ucitano", Toast.LENGTH_LONG).show();

            SimpleAdapter adapter = new SimpleAdapter(getActivity().getBaseContext(), menuItems, R.layout.list_row, from, to);
            setListAdapter(adapter);
            if (this.dialog.isShowing()) {
                  this.dialog.dismiss();
                  }

            // Instantiating an adapter to store each items
            // R.layout.listview_layout defines the layout of each item

                } 
                }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:20:58.493

添加`SingleMenuItemActivity`到您的清单:)

# php - 在 PHP 代码中运行时未执行 SET 和 SELECT 查询

> ID：15591499
> 
> 赞同：0
> 
> 时间：2013-03-23T20:06:20.303
> 
> 标签：php, mysql

我有这个php代码-：

```
$q = "SET @session = '1', @buddys = '12,7,10', @rejects = 'post_0'; SELECT f.* FROM feed as f"; $r = mysqli_num_rows($q);. 
```

这会导致此错误 -: `You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SELECT f.* FROM feed as f' at line 3`。

但令人惊讶的是，当在 phpmyadmin 中运行相同的 mysql 查询时，它会根据需要运行。

怎么了？感谢帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:09:06.807

`;`你的问题是选择之前的分号

尝试用逗号替换它`,`

像那样

```
 $q = "SET @session = '1', @buddys = '12,7,10', @rejects = 'post_0' , SELECT f.* FROM feed as f";
  $r = mysqli_num_rows($q); 
```

或者你也可以像这样分开你的查询

```
 $q = "SET @session = '1', @buddys = '12,7,10', @rejects = 'post_0' ";
   $q .= "SELECT f.* FROM feed as f"; 
```

# java - 布尔测试问题

> ID：15591507
> 
> 赞同：0
> 
> 时间：2013-03-23T20:07:20.363
> 
> 标签：java, boolean

我似乎遇到了布尔测试的问题。当我使用此代码时：

```
public boolean setPkg (String inPkg)
    {
        boolean isValid;

        if ((inPkg.toUpperCase() != "A" ) || (inPkg.toUpperCase() != "B" ) || (inPkg.toUpperCase() != "C"))
            isValid = false;
        else
        {
            pkg = inPkg;
            isValid = true;
        }

        return isValid;
    } 
```

它在“A”上返回 false。但是，当我只测试“A”时：

```
...
if (inPkg.toUpperCase() != "A" ) 
isValid = false;
            else
            {
                pkg = inPkg;
                isValid = true;
            }

            return isValid;
... 
```

它返回真。

我错过了什么？

我还尝试使用多个 if else 语句来测试 A、B 或 C，但 A 的结果是错误的。B 和 C 没有得到测试，因为我的制造异常被抛出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:10:37.590

这里有两件事：

1.  用 equals 方法替换 != 进行比较

2.  替换 || 和 ＆＆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:07:54.597

比较字符串时始终使用`oneString.equals(otherString)`, not 。`oneString == otherString`

例如，而不是：

```
(inPkg.toUpperCase() != "A" ) 
```

改用这个：

```
(!(inPkg.toUpperCase().equals("A"))) 
```

**切勿**将字符串与`==`or进行比较`!=`。请参阅：[如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:08:36.260

问题是您正在使用`==`比较字符串。这不会像您认为的那样做（它比较字符串*引用*，而不是字符序列）。

改为使用`s1.equals(s2)`，如

```
!inPkg.toUpperCase().equals("A") 
```

等等

看到[两个字符串的 == 的 Java 比较是假的吗？](https://stackoverflow.com/questions/995918/java-string-comparison)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T20:10:22.300

`==`并`!=`比较对象引用。它们不相等，因为它们不是同一个对象。

`String.equals(otherString)`比较字符串的内容。你想使用这个功能。

# php - PHP获取函数调用的文件的基本名称

> ID：15591509
> 
> 赞同：1
> 
> 时间：2013-03-23T20:07:24.517
> 
> 标签：php, dirname

任何人都可以帮我获取函数调用的目录的基本名称吗？我是说：

文件 /root/system/file_class.php

```
function find_file($dir, $file) {
    $all_file = scandir($dir);
    ....
}

function does_exist($file) {
    $pathinfo = pathinfo($file);
    $find = find_file($pathinfo["dirname"], $pathinfo["basename"]);
    return $find;
} 
```

文件 /root/app/test.php

```
$is_exist = does_exist("config.php"); 
```

在 /root/app 我有文件“config.php，system.php”。您知道如何获取`does_exist()`调用的目录吗？函数中的`find_file()`参数`$dir`很重要，因为`scandir()`函数需要扫描目录路径。我的意思是，当我想检查文件时，`config.php`我不需要写`/root/app/config.php`. 如果我没有在`$file`参数中提供完整路径，则 $pathinfo["dirname"] 将为`"."`. 我尝试`dirname(__file__)`在`file_find()`函数中使用，但它返回的目录`/root/system`不是被调用函数`/root/app`的目录`does_exist()`。

我需要创建这些功能，因为我不能使用`file_exists()`功能。

**找到解决方案**：

我`debug_backtrace()`用来获取用户调用函数的最近文件和行号。例如：

```
function read_text($file = "") {
    if (!$file) {
        $last_debug = next(debug_backtrace());
        echo "Unable to call 'read_text()' in ".$last_debug['file']." at line ".$last_debug['line'].".";
    }
} 
```

/home/index.php

`16 $text = read_text();`

样本输出：`Unable to call 'read_text()' in /home/index.php at line 16.`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:21:57.610

使用任何 PHP 魔术常量

```
__DIR__
__FILE__ 
```

[http://php.net/manual/en/language.constants.predefined.php](http://php.net/manual/en/language.constants.predefined.php)

或者使用 realpath("./");

要定义自己的常量路径：

定义（“MYPATH”，真实路径（“./”）。“/dir/dir/”；

然后，您可以从包含此代码（文件）的任何地方调用此 MYPATH。

# javascript - 使用 JSON 文件初始化 timezoneJS

> ID：15591512
> 
> 赞同：0
> 
> 时间：2013-03-23T20:08:19.070
> 
> 标签：javascript, timezone

我正在使用 timezone-js：[https](https://github.com/mde/timezone-js) ://github.com/mde/timezone-js 。我有一个我想要使用的预定义时区列表。所以我预先解析了这些时区的 JSON 数据。

但是我究竟应该如何使用这些数据呢？

```
var _tz = timezoneJS.timezone;
_tz.loadingScheme = _tz.loadingSchemes.MANUAL_LOAD;
_tz.loadZoneJSONData('/major_cities.json', true); 
```

我可以读取数据，就像这里一样。但是我应该如何使用`tz`变量来初始化 timezoneJS？

我在想我应该先做这样的事情：

`timezoneJS.timezone.loadZoneDataFromObject(_tz);`

然后初始化它......然后初始化timezoneJS，但是如果我现在初始化，我会得到一个错误，它找不到默认时区：`Uncaught Error: Error retrieving "null/northamerica" zoneinfo files`，可能是因为我已经提供了json数据。

我想知道如何使用 json 文件，以便创建`timezoneJS.Date`对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T11:01:24.207

首先， tz_ 只是防止在后续行中写入 timezoneJS.timezone 的捷径。

现在，有两种选择。如果你在服务器上有你的文件*major_cities.json*并且你想初始化 timezoneJS 你只需要做你写的：

```
var _tz = timezoneJS.timezone;
_tz.loadingScheme = _tz.loadingSchemes.MANUAL_LOAD;
_tz.loadZoneJSONData('/major_cities.json', true); 
```

一切就绪。第二个选项是您有一个包含来自该文件的数据的对象。在这种情况下，您应该使用*loadZoneDataFromObject*而不是*loadZoneJSONData*，即：

```
var _tz = timezoneJS.timezone;
_tz.loadingScheme = _tz.loadingSchemes.MANUAL_LOAD;
_tz.loadZoneDataFromObject(majorCitiesObject); 
```

之后，您不应该尝试调用 init 函数，因此 timezoneJS 已经由 loadZoneJSONData 初始化。如果要创建日期，只需调用 new timezoneJS.Date()。以下几行应该给你一个提示：

```
var timezoneName = 'Europe/London';
var newDate = new timezoneJS.Date(timezoneName);
console.log(newDate.toString());
console.log(newDate.toISOString()); 
```

结果应该是这样的：

```
2013-04-08 11:56:33
2013-04-08T10:56:33.019Z 
```

# java - 如何发送 1kb 大小的消息 java

> ID：15591514
> 
> 赞同：-2
> 
> 时间：2013-03-23T20:08:46.097
> 
> 标签：java

我如何在 java 中发送 1kb 的消息，我试图从一台机器向另一台机器发送一条固定大小为 1kb 的消息，如何实现？

目前我能够在机器之间发送诸如“测试”之类的消息，但理想情况下我希望能够发送 1kb 的固定大小的消息

这就是我目前发送测试的方式

```
 if (myrank == 0) {
    char[] mess = " test ".toCharArray();
    MPI.COMM_WORLD.Send(mess, 0, mess.length, MPI.CHAR, 1, 99);
} 
```

目前这是我在机器之间发送消息的方式：

```
import mpi.* ;

class Hello {

  static public void main(String[] args) {
    MPI.Init(args);
int myrank = MPI.COMM_WORLD.Rank();
long startTime = System.currentTimeMillis();
if (myrank == 0) {
    char[] mess = " test ".toCharArray();
    MPI.COMM_WORLD.Send(mess, 0, mess.length, MPI.CHAR, 1, 99);
} else {
    char[] mess = new char[20];
    MPI.COMM_WORLD.Recv(mess, 0, 20, MPI.CHAR, 0, 99);
    System.out.println("received:" + new String(mess));
}

long endTime = System.currentTimeMillis();
long duration = endTime - startTime;
System.out.println(duration);
    MPI.Finalize();
  }
} 
```

字节数组会是一个好的解决方案吗？

需要固定大小的消息，以帮助基准测试结果，例如，我希望比较发送 1kb 消息、1mb、20mb ........ 1gb 等所花费的时间增加

编辑 ：

这行得通吗？这会发送8位吗？

```
int i = 10;  

String text = String.format("%08d", i);  
// text now contains "00000010"  
// 8 bits 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T03:24:02.077

如果要发送 1kb 的消息，请创建大小为 1kb 的消息并发送。

```
import mpi.* ;

class Hello {

    static public void main(String[] args) {

        MPI.Init(args);
        int myrank = MPI.COMM_WORLD.Rank();
        int tag = 99;

        long startTime = System.currentTimeMillis();
        if (myrank == 0) {
            char[] mess = new char [1024];
            MPI.COMM_WORLD.Send(mess, 0, mess.length, MPI.CHAR, 1, tag);
        } else if (myrank == 1) {
            char[] mess = new char[1024];
            MPI.COMM_WORLD.Recv(mess, 0, 1024, MPI.CHAR, 0, tag);
            System.out.println("received:" + new String(mess));
        }

        long endTime = System.currentTimeMillis();
        long duration = endTime - startTime;
        System.out.println(duration);
        MPI.Finalize();
    }
} 
```

更好的是，测量乒乓延迟，这是更好的定义（往返返回时间），并使用几个长度：

```
import mpi.* ;

class Hello {

    static public void main(String[] args) {

        MPI.Init(args);
        int myrank = MPI.COMM_WORLD.Rank();
        int tag = 99;
        int maxlen = 512*1024*1024;
        int minlen = 64;
        char [] sendbuff = new char [maxlen];
        char [] recvbuff = new char [maxlen];

        if (myrank == 0) {
            for (int len = minlen; len < maxlen; len *= 4) {
                long startTime = System.currentTimeMillis();                    
                 MPI.COMM_WORLD.Send(sendbuff, 0, len, MPI.CHAR, 1, tag);
                 MPI.COMM_WORLD.Recv(recvbuff, 0, len, MPI.CHAR, 1, tag);
                long endTime = System.currentTimeMillis();
                long duration = endTime - startTime;
                System.out.println("Ping-pong time for " + len + " is " + duration);
            }
        } else if (myrank == 1) {
            for (int len = minlen; len < maxlen; len *= 4) {
                 MPI.COMM_WORLD.Recv(recvbuff, 0, len, MPI.CHAR, 0, tag);
                 MPI.COMM_WORLD.Send(recvbuff, 0, len, MPI.CHAR, 0, tag);
            }
        }

        MPI.Finalize();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:19:12.057

在发送（发起）端使用[Socket](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html) ，在接收（监听消息）端使用[ServerSocket 。](http://docs.oracle.com/javase/7/docs/api/java/net/ServerSocket.html)Socket 允许打开输出流，ServerSocket 可以生成另一个 Socket，您可以在其中打开输入流。消息是否固定大小并没有太大区别。

也可以使用SOAP、RMI、Protocol Buffers、CORBA、MPI之类，google。这些将增加更多的复杂性，但也会增加功能，并且每个都在其应用领域中很强大。

# python - 授予用户对数据库的权限

> ID：15591515
> 
> 赞同：-5
> 
> 时间：2013-03-23T20:08:49.620
> 
> 标签：python, mysql, permissions

几天来我遇到了一个问题：我需要一个与 Python 程序交互的数据库，但是数据库不允许我使用数据库中的数据。有人告诉我这是因为数据库的用户权限。有谁知道我如何分配权限让我使用 Python？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:11:35.977

您需要与拥有数据库的 DBA 交谈，以获得访问权限和访问表的适当权限。

如果您是 DBA，我建议您开始阅读关系数据库，尤其是 MySQL：

[http://dev.mysql.com/doc/refman/5.5/en/grant.html](http://dev.mysql.com/doc/refman/5.5/en/grant.html)

我建议为每个数据库创建一个用户名和密码。不要授予任何应用程序 root 访问权限。我这样做：

```
create database contacts;
create user contacts identified by 'contacts';
grant all on contacts.* to 'contacts'@'%';
grant select on `mysql`.`proc` to 'contacts'@'%';
use contacts; 
```

# apache-flex - 从 Flex 中的自定义 IconItemRenderer 访问导航器

> ID：15591517
> 
> 赞同：0
> 
> 时间：2013-03-23T20:08:56.100
> 
> 标签：apache-flex, flash-builder

我在 Flex 中有一个类，它通过扩展 IconItemRenderer 基类来创建自定义 IconItemRenderer。我在列表中使用这个自定义项并听鼠标按下。根据鼠标按下的位置，我有不同的选择。其中之一是导航到不同的视图。我知道如何使用列表的更改侦听器推送到新视图，但不想实现它。鼠标单击的想法是，根据位置，我可以从列表中删除元素或打开当前元素。

对于我的一生，我找不到从 IconItemRenderer 中导航到新视图的方法。这是我正在使用的代码，包括我实现它的类和列表。

> ```
> package components  
> {  
> import spark.components.Button;  
> import spark.components.IconItemRenderer;  
> import spark.utils.MultiDPIBitmapSource;
> 
> public class DeleteItemRenderer extends IconItemRenderer
> {
>     private var btn:Button;
>     private var xIcon:MultiDPIBitmapSource;
> 
>     public function DeleteItemRenderer()
>     {
>         super();
>         super.iconWidth = super.iconHeight = 40;
>         super.labelField = 'title';
>         super.decorator = "assets/delete.png";
>     }
> 
>     override public function set data(value:Object):void{
>         super.data = value;
>     }
> 
>     override protected function layoutContents(unscaledWidth:Number, unscaledHeight:Number):void{
>         setElementPosition(decoratorDisplay, unscaledWidth-40, 5);
>         setElementSize(decoratorDisplay, 40, 40);
>     }
> 
>     override protected function measure():void{
>         measuredHeight = 50;
>     }
> 
>     override protected function drawBackground(unscaledWidth:Number, unscaledHeight:Number):void{
>         graphics.beginFill(0xffffff);
>         graphics.drawRect(0, 0, unscaledWidth, unscaledHeight);
>         graphics.endFill();         
>         decoratorDisplay.smooth = true; 
>         graphics.lineStyle(1,0xcccccc,1);
>         graphics.drawRect(0, 0, unscaledWidth, unscaledHeight);
>         graphics.endFill();
>     }
> }
> } 
> ```

列表

```
<s:List id="survey_list" visible="true" width="98%"  height="70%" contentBackgroundColor="#FFFFFF" horizontalCenter="0">            
    <s:itemRenderer>
        <fx:Component>
            <components:DeleteItemRenderer width="99.9%" height="98%" verticalAlign="top" click="detectActionPress();">
                <fx:Script>
                    <![CDATA[
                        import spark.components.ViewNavigator;
                        import spark.components.View;
                        import mx.events.FlexEvent;
                        import mx.core.FlexGlobals;
                        import mx.core.UIComponent;
                        import spark.components.List;

                        private var application:UIComponent = FlexGlobals.topLevelApplication as UIComponent;
                        private var pressOpen:Number = application.width - 40;
                        //private var _navigator:ViewNavigator = FlexGlobals.topLevelApplication.navigation; //navigation is not defined uhhhh why????

                        private function detectActionPress():void{
                            var localX:Number = this.mouseX;
                            if(localX <= pressOpen){
                                engangeElement();
                            }
                            else{
                                deleteElement();
                            }
                        }

                        private function deleteElement():void{
                            var parentList:List = owner as List;
                            parentList.dataProvider.removeItemAt(parentList.dataProvider.getItemIndex(data));                               
                            trace('element removed');
                        }

                        private function engangeElement():void{
                            var parentList:List = owner as List;

                            var _test:ViewNavigator = this.parentDocument as ViewNavigator;

                            //this.parentApplication.navigator.pushView(views.UnfinishedSurvey, parentList.selectedItem.shortcode)
                            _test.pushView(views.UnfinishedSurvey, parentList.selectedItem.shortcode);
                        }
                    ]]>
                </fx:Script>
            </components:DeleteItemRenderer>
        </fx:Component>
    </s:itemRenderer>       
</s:List> 
```

有什么想法可以从`engageElement();`
为什么我无法访问导航器中推送新视图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T02:27:59.233

一般来说; 我建议从 itemRenderer 内部调度一个事件。确保事件冒泡。

您可以在作为 itemRenderer / List 的分层父级的类上侦听事件。

在事件处理程序中，您可以访问导航器。

我在这里写了这些[方法](http://www.flextras.com/blog/index.cfm/2013/2/1/How-does-one-Flex-Component-talk-to-another-Flex-Component)；这可能会提供更多细节。

有其他方法可以做到这一点。您可以使用具有导航器实例的类，并使用某种类型的依赖注入 (DI) 框架将其注入您的渲染器。Robotlegs 和 Swiz 是支持这一点的两个基于 ActionScript 的框架。

# c++ - 为什么分配器接口封装“列表”实现的嵌套类也从封装节点中受益？

> ID：15591520
> 
> 赞同：0
> 
> 时间：2013-03-23T20:09:26.570
> 
> 标签：c++, list, optimization

在[“空成员”C++ 优化](http://www.cantrip.org/emptyopt.html)中是以下代码片段：

```
// Listing 4: A Better Way to Eliminate Bloat

template <class T, class Alloc = allocator<T> >
class list {
  . . .
  struct Node { . . . };
  struct P : public Alloc {
    P(Alloc const& a) : Alloc(a), p(0) { }
    Node* p; // Why also encapsulate a Node pointer?
  };
  P head_;

 public:
  explicit list(Alloc const& a = Alloc())
    : head_(a) { . . . }
  . . .
}; 
```

此实现的目的主要是避免在`Alloc`类没有数据成员（如在默认`allocator`类中）的情况下对象膨胀，但此特定实现的一个重要的值得注意的好处是防止（任意）`Alloc`类和班的成员`list`。

代码片段下方的注释通过说明以下内容总结了这一点：

> 现在，list<> 成员通过说“head_.allocate()”来获取存储空间，并通过说“head_.p”来提及第一个列表元素。这非常有效，没有任何不必要的开销，并且 list<> 的用户无法区分。

我理解这条评论的第一部分，即`P`类内的接口封装，以便`list<>`成员必须调用`head_.allocate()`才能获取存储。

但是，我不理解此评论的第二部分 - 为什么有必要（或有益）`Node`在类中包含一个指针，`P`以便成员通过说（而不是直接成为成员）来`list<>`提及第一个列表元素？这与封装类的接口有关吗？`head_.p``p``list<>``Alloc`

为什么封装接口的嵌套类有一个指向 a 的指针`Node`，而不是顶级类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:18:01.223

在这种情况下，`sizeof(list)`将是`sizeof(P)`，而希望是`sizeof(Node*)`。如果`Alloc`类型为空，则其空间使用将被优化掉。

现在考虑以下替代方案。

```
class list {
  struct Node { . . . };
  struct P : public Alloc {
    P(Alloc const& a) : Alloc(a), p(0) { }
  };
  Node* head_pointer;
  P thing_with_allocator;
} 
```

在这种情况下，`sizeof(list)`将`sizeof(Node*) + sizeof(P)`. 空基类优化在这里并没有真正的帮助，因为即使`P`现在是一个空类，它也不会被用作基类，所以它不能受到空基类优化：它的大小至少为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:15:39.170

你的替代方案是什么？

```
class list {
    struct P : public Alloc {
        P(Alloc const& a) : Alloc(a), p(0) { }
    };
    P a;
    Node* h;
    ...
}; 
```

那么您将不会保存任何内容，因为您必须实例化一个可能为零大小的`P`对象。这将占用列表对象中的至少一个字节。

# java - 无法在方法java中返回值

> ID：15591521
> 
> 赞同：0
> 
> 时间：2013-03-23T20:09:33.460
> 
> 标签：java

也许我的问题很愚蠢，但我无法解决。

这是我的代码：

```
public Velocity add(final Velocity velocity)
{
    Velocity vel;
    if(velocity.getClass().equals(CartesianCoordinate(x, y)))
    {
        double sumX = x + velocity.x;
        double sumY = y + velocity.y;
        Velocity v = new Velocity(CartesianCoordinate(x,y));
        v.x = sumX;
        v.y = sumY;
        vel = v;
    }

    if(velocity.getClass().equals(p))
    {
        do something...
    }
    return vel;
} 
```

谁能告诉我为什么我不能返回“vel”，我不想创建一个类变量......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:10:40.297

> 谁能告诉我为什么我不能返回“vel”

当然——如果你的条件都不成立，你就没有给它一个价值。变量不是*绝对赋值*的，所以你不能读取它的值来返回它。在这种情况下你*想*返回什么？它甚至有效吗？在这种情况下，也许您应该抛出异常。

就个人而言，我实际上会从每个`if`块返回 - 我不认为局部变量会增加任何好处。到那时，问题就更明显了：

```
public Velocity add(final Velocity velocity) {
    if (...) {
        ...
        return ...;
    }
    if (...) {
        ...
        return ...;
    }
    // What should we do if we get here?
} 
```

现在确定返回值的两个条件都*立即*返回它，更明显的是（IMO）如果你到达底部，那是因为两个条件都没有评估为`true`......所以要么你想返回一些“空”值，或空引用，或抛出异常。

当然，这是假设您不希望第二个条件有效地胜过第一个条件，目前它确实如此 - 如果两个条件都为真，则第一个块中设置的值可能无关紧要，因为它将被覆盖由第二个街区。

也不清楚是什么`CartesianCoordinate`，但它奇怪地以 Java 方法命名 - 如果它返回 a`Class<?>`那肯定很奇怪。这是什么`p`？我不知道您的真实代码是否与此有些不同，但即使除了无法编译的原因之外，它对我来说也很腥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:10:49.963

局部变量没有默认值，应该被初始化。

如果`val`是实例字段或静态字段且未初始化，则在访问时将返回默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:15:43.283

您只能返回带有值的变量。所以有一种情况可能`val`没有。

解决这个问题的简单方法是`val`直接在声明上初始化：

```
Velocity vel = null; //or
Velocity vel = new Velocity(); 
```

或者您需要在您的语句中添加一个`else`分支，其中也已初始化。`if``vel`

```
if(velocity.getClass().equals(CartesianCoordinate(x, y)))
{
    double sumX = x + velocity.x;
    double sumY = y + velocity.y;
    Velocity v = new Velocity(CartesianCoordinate(x,y));
    v.x = sumX;
    v.y = sumY;
    vel = v;
}else{
    vel = null;//or
    vel = new Velocity();
} 
```

# java - 解析AggregationOutput mongo java驱动

> ID：15591523
> 
> 赞同：2
> 
> 时间：2013-03-23T20:09:56.683
> 
> 标签：java, mongodb, pojo, aggregation-framework

我有一个返回 3 个结果的聚合

```
{ "serverUsed" : "/127.0.0.1:27017" , "result" : [ { "_id" : "luke" , "times" : 56} , { "_id" : "albert" , "times" : 28} , { "_id" : "matt" , "times" : 28}] , "ok" : 1.0} 
```

但是，当我尝试迭代结果时，代码进入一个无限循环（不明白为什么！！）

```
AggregationOutput output = coll.aggregate( match1, unwind, match2, group, sort, limit);

Iterable<DBObject> list= output.results();
        while(list.iterator().hasNext()){

            String id = (String) list.iterator().next().get("_id");
            int times = Integer.parseInt(list.iterator().next().get("times").toString());

            System.out.println("ID IS "+id+" time: "+times);
        } 
```

输出也重复第一个结果：

```
ID IS luke time: 56
ID IS luke time: 56
ID IS luke time: 56
ID IS luke time: 56
ID IS luke time: 56
... 
```

我真的不明白为什么这个迭代不起作用。请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T20:22:06.083

每次访问 中的字段时，您似乎都在使用新的迭代器`DBObject`，即您在`list.iterator()`循环中使用了多次。`list.iterator().next()`返回集合中的第一个元素。所以你最终访问了第一个`DBObject`.

尝试这个：

```
Iterable<DBObject> list= output.results();
while(list.iterator().hasNext()){
    DBObject obj = list.iterator().next();
    String id = obj.get("_id");
    int times = Integer.parseInt(obj.get("times").toString());

    System.out.println("ID IS "+id+" time: "+times);
} 
```

或者也许使用 foreach 循环：

```
for (DBObject obj : output.results()) {
    String id = obj.get("_id");
    int times = Integer.parseInt(obj.get("times").toString());
    System.out.println("ID IS "+id+" time: "+times);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-22T22:09:18.737

我知道，这是一个旧线程，并且已经得到了回答，但答案是优化。您得到重复答案的实际*原因*是每次您请求 .iterator() 时，它都会返回一个从列表顶部开始的迭代器对象。

所以while循环条件：

```
list.iterator().hasNext() 
```

将始终返回 true。相应地，随后

```
list.iterator().next() 
```

将始终返回第一个元素。

应该做的是这样的：

```
AggregationOutput output = coll.aggregate( match1, unwind, match2, group, sort, limit);
Iterable<DBObject> list= output.results();
Iterator<DBObject> iterator= list.iterator();

while(iterator.hasNext()){
    DBObject obj = iterator.next();

    String id = (String) obj.get("_id");
    int times = Integer.parseInt(obj.get("times").toString());

    System.out.println("ID IS "+id+" time: "+times);
} 
```

但从技术上讲，@Aqua 提到的 for 循环使用起来要干净得多。这个答案只是为了澄清原因，而不是如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T20:26:01.937

您的代码中的一个可能缺陷是您多次调用 Iterator.next() 方法。将其值存储在变量中并使用变量而不是多次调用。

例如：

```
DBObject obj = list.iterator().next();
String id = (String) obj.get("_id"); 

int times = Integer.parseInt(obj.get("times").toString());` 
```

# jquery - jquery-chosen 无法为选择标签选择多个值

> ID：15591525
> 
> 赞同：1
> 
> 时间：2013-03-23T20:10:03.887
> 
> 标签：jquery, jquery-chosen

使用为选择标签选择的 jquery。

问题是当我尝试这个工作正常时

```
$('#pc_sel_email').val(["1", "4", "2"]).trigger("liszt:updated"); 
```

当我用动态生成的值替换“1”、“4”、“2”时，没有显示任何选定的值

```
//allData - 1#@test#@9#@startstartart#@startstartstarartstartstart#@1#@1,2,3
var data= allData.split("#@");
var emaiLIDS= data[6].split(",");
var emailIDList="";
for( var i=0; i<emaiLIDS.length; i++){
    emailIDList+='"'+emaiLIDS[i]+'"';
    if(i!=emaiLIDS.length-1){
       emailIDList+=', ';
    }
}

jQuery('#pc_sel_email').val([ emailIDList ]).trigger("liszt:updated"); 
```

然后什么都没有选择。请帮助我错过任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:40:02.710

你不需要做整个`emailIDList`事情。像这样直接通过`emaiLIDS`：

```
var allData = "1#@test#@9#@startstartart#@startstartstarartstartstart#@1#@1,2,3";
var data= allData.split("#@");
var emaiLIDS= data[6].split(",");
$('#pc_sel_email').val(emaiLIDS); 
```

小提琴：http: [//jsfiddle.net/4xEdd/](http://jsfiddle.net/4xEdd/)

# javascript - 单击另一个时关闭一个 jQuery UI 模式对话框

> ID：15591526
> 
> 赞同：0
> 
> 时间：2013-03-23T20:10:08.450
> 
> 标签：javascript, jquery, jquery-ui

当用户想要登录网站时，他们单击登录链接，登录表单将显示在模式对话框中。

登录表单内还有一个忘记密码的链接，以防用户忘记密码。

忘记密码表单也显示在模式对话框中。

我的问题是，当用户从登录模式对话框中单击忘记密码链接时，另一个模式对话框（忘记密码）会在现有登录模式对话框的顶部打开。

当忘记密码模式对话框打开时，登录表单模式对话框可以关闭吗？

谢谢！

```
 <div id="dialog_form_signin" class="hidden" title="<%=lngSigninForm%>">
                    <form action="content/myaccount/index.cs.asp?Process=SignIn" method="post" class="signin-form">
                        <fieldset>
                            <p>
                                <label><%=lngEmailAdd%></label>
                                <input type="text" name="EMAILADDRESS" size="55" value="" />
                                <small></small>
                            </p>
                            <p>
                                <label><%=lngPassword%></label>
                                <input type="password" name="PASSWORD" size="55" value="" />
                                <small></small>
                            </p>                                                            
                            <p>
                                <input type="hidden" name="x" value="p">   
                                <input type="submit" name="signin" value="<%=lngSubmit%>" class="submit" />
                            </p>
                            <p><a href="javascript:void(0)" id="open_forgotpass" class="reset"><img id="message" src="images/icons/help.png" alt="Message"> <%=lngPassRemind%></a></p>
                        </fieldset>
                    </form> 
                    </div>

    $( "#dialog_form_forgotpass" ).dialog({
        autoOpen: false,
        width: 400,
        modal: true
    });
    $("#open_forgotpass").click(function(){$( "#dialog_form_forgotpass" ).dialog( "open" );});
     $( "#dialog_form_signin" ).dialog({
        autoOpen: false,
        width: 400,
        modal: true
    });
    $("#open_signin").click(function(){$( "#dialog_form_signin" ).dialog( "open" );}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:13:54.213

点击忘记密码，关闭登录对话框，然后打开忘记密码对话框

```
 $("#open_forgotpass").click(function(){
    $( "#dialog_form_signin" ).dialog( "close" );
    $( "#dialog_form_forgotpass" ).dialog( "open" );

    }); 
```

# objective-c - 为什么我的按钮没有显示在我的子视图中？

> ID：15591529
> 
> 赞同：0
> 
> 时间：2013-03-23T20:10:24.953
> 
> 标签：objective-c, uibutton

我正在实现一个抽屉单元。我现在用一些我想要的自定义按钮来配置它。不幸的是，按钮没有显示。

谢谢您的帮助

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"Cell";
        HHPanningTableViewCell *cell = (HHPanningTableViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        NSInteger directionMask = indexPath.row % 5;
        if (cell == nil) {
            NSLog(@"Cell = nil.");
            cell = [[HHPanningTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

            UIView *drawerView = [[UIView alloc] initWithFrame:cell.frame];

            drawerView.backgroundColor = [UIColor greenColor];
            cell.drawerView = drawerView;
                UIImage *checkImage = [UIImage imageNamed:@"check.png"];
                UIButton *checkButton = [UIButton buttonWithType:UIButtonTypeCustom];
                [checkButton setImage:checkImage forState:UIControlStateNormal];
                [drawerView addSubview:checkButton];

                //[checkButton addTarget:nil action:(deleteListItem:) forControlEvents:UIControlEventTouchUpInside];

        // Configure the cell...

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:30:41.840

你说的那部分`cell.frame`，我相信。尝试做`CGRectMake(0, 0, cell.frame.size.width, cell.frame.size.height)`。我也没有看到你给按钮一个框架？ `checkbutton.frame = CGRectMake(...);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:05:42.537

你从来没有为你的按钮设置框架

# django - 对用户的每个请求都可以访问模型函数

> ID：15591532
> 
> 赞同：0
> 
> 时间：2013-03-23T20:10:32.667
> 
> 标签：django, django-models, django-signals

我有一个名为 的模型`Account`，具有模型功能（请参见下面的代码）。我想在我的模板中显示每个页面上的用户总数。我能想到的唯一方法是将帐户放在每个视图中。我还有什么其他选择？可以喜欢 request.user 吗？我已经可以在每个视图中访问请求，并且 Accounts 具有 FK 用户。

```
 def _balance(self):
        aggregates = self.transactions.aggregate(sum=Sum('amount'))
        sum = aggregates['sum']
        return D('0') if sum is None else sum 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T20:48:31.377

你想要一个上下文处理器。每次渲染模板时，都会给它一个“上下文”；这是一个类似字典的对象，其键是变量名，其值是变量的值。

例如..

创建一个文件 my app/context_processors

```
def get_balance(request):
    do something
    return {'balance': 0} 
```

将其添加到您的设置中：

```
TEMPLATE_CONTEXT_PROCESSORS = ('myapp.context_processors.get_balance',) 
```

完毕。

# c - 如何在C中的中间插入节点

> ID：15591536
> 
> 赞同：-1
> 
> 时间：2013-03-23T20:10:45.623
> 
> 标签：c, linked-list

```
NODE* insertNode (NODE* head, NODE* pre, DATA item)
{
//Local Declaration
NODE* curr;

//Statement
if (!(curr = (NODE*)malloc(sizeof(NODE)))
    printf("\amemory overflow in insert\n");

curr->data = item;
if (pre == NULL)
{
   //inserting before first node or to empty list
   curr->next = head;
   head = curr;
}
else 
{
   //inserting in middle or at the end
   curr->next = pre->next;
   pre->next = curr;
}

return head;
} 
```

这就是我根据正在阅读的书在现有列表中间插入节点的方式。但是，它并没有真正告诉我`pre`这里是如何定义的（`pre`指向前驱节点。）如何定义`pre`指针以使其指向前驱节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:19:46.740

[恕我直言，此链接](http://cslibrary.stanford.edu/103/LinkedListBasics.pdf)是链表的主要介绍。

这本书所说明的是“三步链接”......

假设 {a,b,c} 是结构/节点，使得**a** ==> **b** ==> **c** ==> *NULL*

**然后在a**你的第一个链接之后立即插入**NEW ：** **NEW** ==> **b** *（这是第一个，因为如果你先重置****a****的指针，你将很难到达****b****！*

 ******然后将 a 链接到**NEW**就像... **a** ==> **NEW** ... 所以我们有**a** ==> **NEW** ==> **b** ==> **c** ==> *NULL*

* * *

为此，节点中必须有指针......类似于：

```
struct node{
  int i;
  struct node* next; // this is the value that will be changed
}; 
```

如您所见，节点的精确定义并不重要，只要它包含指向另一个节点的指针即可。

* * *

`curr`指向*当前*节点......所以要获得“上一个”，您可以创建一个指向另一个节点的*免费指针，***正如我假设** `NODE* pre`在您的问题中一样。

但这实际上是不必要的，因为仅使用`->`运算符比使用多个指针要简单得多。您也可以使用它来指向其他节点。

因此，对于我的 {a,b,c} 示例，假设`a`和`b`都是`c`唯一`struct node`的，如前所示连接。

```
struct node* curr = a;   // a pointer to the head of the list
struct node NEW = malloc(sizeof(struct node)); // make a new node

NEW->next = curr->next;  // set NEW's next to point to b through `curr->next`
/* note that defining previous isn't necessary, b/c it is defined @ curr->next */
curr->next = NEW;        // set curr (a) to point to NEW instead of b 
```

只需记住`curr`在单链表中需要使用的节点之前进行设置。******

# ios - 应用程序试图呈现一个零模型视图控制器

> ID：15591540
> 
> 赞同：1
> 
> 时间：2013-03-23T20:11:11.423
> 
> 标签：ios, uiviewcontroller, uistoryboard

我目前正在尝试在我的应用程序中实现一个介绍性（教程）部分，并且我想为用户提供随时查看它的选项。我的应用程序的主要部分由 UIViewController XIB 文件 ( `ViewController_iPhone.xib`, `ViewController_iPad.xib`) 组成，为了我的介绍性视图的目的，我发现使用 Storyboard 更容易。所以简单总结一下：我正在尝试从主 ViewController (XIB) 切换到 Storyboard 中的起始 ViewController，具体取决于设备类型 -> 这一切都从 UIButton 点击​​开始。

在我的 Storyboard 中，我分配了单独的 Storyboard ID，因此无论是 iPad、iPhone 还是 iPhone-4inch，它都会加载正确的视图：

故事板 ID：`3-Slide1`(iPad)、`4-Slide1`(iPhone)、`5-Slide1`(iPhone-4inch)。

![截屏](../Images/e0cc2a339cb9d5729a649c488fb8da0c.png)

这是**ViewController.m 中的按钮代码：**

```
NSString *nibName;
        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
            nibName = @"3-Slide1";
        } else {
            if ([UIScreen mainScreen].bounds.size.height == 480.0) {
                nibName = @"4-Slide1";
            } else {
                nibName = @"5-Slide1";
            }
        }

        IntroViewController *introViewController = [self.storyboard instantiateViewControllerWithIdentifier:nibName];

        [self presentViewController:introViewController animated:YES completion:nil]; 
```

**SIGABRT 错误：**

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason:
'Application tried to present a nil modal view controller on target
<ViewController: 0x20865170>. 
```

为什么会出现这个错误？

注意：有很多帖子具有相同的一般 SIGABRT 错误，但似乎都有不同的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T21:21:23.823

如果您以模态方式推送它，为什么会有从您的视图控制器到信息视图控制器的 segue。

我会简单地对视图控制器进行单独的转场（无论如何，一个将在不同的故事板文件中），命名转场并使用您的逻辑来确定正确的转场。然后使用`performSegueWithIdentifier:`而不是`instantiateViewControllerWithIdentifier`.

*（我猜笔尖名称实际上是指笔尖的文件名。不确定，但无论如何，segue 方法是正确的方法。）*

# jquery - jquery查找带有特殊文本的span

> ID：15591546
> 
> 赞同：0
> 
> 时间：2013-03-23T20:11:55.043
> 
> 标签：jquery, jquery-selectors

我正在尝试在 jquery 中选择具有特定文本的跨度。Jquery“包含”不是很严格，所以如果我使用它并搜索“选项卡”，它也会选择“表”，这是我不想要的。

```
$(".spanbox:contains('Tab')").css('background-color', 'Green') 
```

示例跨度：

```
<span class="spanbox">Tab</span>
<span class="spanbox">Table</span> 
```

有没有办法专门选择具有特定文本的班级成员？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T20:18:52.480

您可以使用带有函数参数的[**.filter()来执行此操作，如下所示：**](http://api.jquery.com/filter/)

```
$(".spanbox").filter(function() {
   return $(this).text() == 'Tab';
}).css('background-color', 'Green'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:24:42.487

试试这种方式：

```
$.fn.textEquals = function (text) {
    var match = false;
    $(this).each(function () {
        if ($(this).text().match("^" + escapeRegex(text) + "$")) {
            match = true;
            return false;
        }
    });
    return match;
};

$(".spanbox").textEquals('Tab').css('background-color', 'Green');
$(".spanbox").textEquals('Table').css('background-color', 'Red'); 
```

# python - 两个整数之间的所有整数之和

> ID：15591547
> 
> 赞同：-8
> 
> 时间：2013-03-23T20:12:00.910
> 
> 标签：python, math, range

我正在使用 Python，我想找到两个数字之间的整数之和：

```
number1 = 2
number2 = 6
ans = (?)
print ans

#the numbers in between are 3,4,5 
```

请给我数学公式或 Python 代码来执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T20:22:04.670

暗示：

给定两个数字 A 和 B（包括两者），其中 B > A，A 和 B 之间的值之和由下式给出

```
B(B + 1)/2 - (A - 1)A/2
=(B^2 + B - A^2 + A)/2
=((B - A)(B + A) + (B + A))/2
=(B + A)(B - A + 1)/2 
```

如果 A 和 B 都是互斥的，则将 B 替换为 B - 1，将 A 替换为 A + 1。其余的我留给你作为练习

通读[Python 表达式](http://docs.python.org/2/reference/expressions.html)以将数学表达式转换为 Python 代码

**注意** 不幸的是，SO 不支持 MathJax，否则上述表达式的格式可能会更好

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-23T20:19:46.847

你需要这个来得到总和：

```
ans = number1  + number2 
```

或者这不是你想做的？既然你评论：`the numbers in between are 3,4,5`，你的意思是这个吗？

```
>>> for i in range(number1+1,number2):
...     print i
... 
3
4
5 
```

**编辑：**
所以，OP还需要两个数字之间的所有数字的总和：

```
>>> number1 = 2
>>> number2 = 6
>>> sum(range(number1 + 1, number2))
12 
```

第二部分由 OP 给出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T22:49:45.277

我喜欢 Grijesh 的回答，简单而优雅。这是另一个使用递归调用的方法：

```
global sum
def sum_between(a, b):
    global sum
    # base case
    if (a + 1) == b:
        return sum
    else:
        sum += (a + 1)
        return sum_between(a + 1, b) 
```

不像使用 sum(range(a+1, b)) 那样直接。但只是作为递归函数的练习很有趣。

# ruby-on-rails - 单表继承模型中的条件包含

> ID：15591549
> 
> 赞同：3
> 
> 时间：2013-03-23T20:12:14.373
> 
> 标签：ruby-on-rails, activerecord

我有这样的模型：

```
A < ActiveRecord::Base
- has_many :z

B < A
- has_many :y

C < A
- has_many :x 
```

在某个地方，我想做类似的事情：

```
A.all.includes([:z,:y, :x]) 
```

但这不起作用，因为有些项目来自特定类型`B`，而其他项目是`C`.

我怎样才能有条件地包括一个或另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T16:32:53.620

虽然我没有找到真正的解决方案，但我正在这样做：

```
all = B.includes([:z, :y])
all = (all + C.includes([:z, :x])).sort_by(&:date) 
```

它不是那么漂亮，但暂时解决了这个问题。速度提升很多。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T18:01:30.050

有点混乱，但完全正确的解决方案。

```
A.from("(#{B.includes(:y).to_sql} UNION #{C.includes(:x).to_sql}) as #{A.table_name}").includes(:z) 
```

# python - Python NLTK：用于对未标记数据进行分类的监督学习，没有可用的标记数据

> ID：15591551
> 
> 赞同：1
> 
> 时间：2013-03-23T20:12:37.627
> 
> 标签：python, nltk, classification

我正在尝试从文本中提取基于时间的信息，据我所知，标记数据不存在。目标是获取句子并提取有关例如何时到期的信息。这可能有多种形式——其中一些是模棱两可的（1 到 12 之间的数字是一段时间的常见表示，但当然并非总是如此）。似乎最好的方法是训练一个分类器来检测这些数据。

然而，虽然 NLTK 提供了数千个句子，但它没有用于此特定目的的标记数据。我想知道是否有一种明智的方法可以用来手动对一些数据进行分类，这样我以后可以将其用作分类器的训练/测试数据。理想情况下，它应该是图形化的，并允许点击相关条款，但我认为这是一个荒谬的要求。或者，考虑到我可能不想手动分类数千个句子，是否有更好的方法可以使用？我在这里是否完全正确，或者如果没有可用的标记数据，分类器系统根本不可行？

谢谢，卡勒姆

# ios - iOS 中的 JSON 请求 - 使用 Grand Central Dispatch 或 NSURLConnection

> ID：15591555
> 
> 赞同：3
> 
> 时间：2013-03-23T20:13:18.393
> 
> 标签：ios, objective-c, xcode, json

我看到了几个关于在 iOS 中发出 JSON 请求的教程，其中许多使用 NSURLConnection 列出了类似这样的内容：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [self.responseData setLength:0];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [self.responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog([NSString stringWithFormat:@"Connection failed: %@", [error description]]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {} 
```

但是我今天读了另一个教程（[http://mobile.tutsplus.com/tutorials/iphone/ios-quick-tip-interacting-with-web-services/](http://mobile.tutsplus.com/tutorials/iphone/ios-quick-tip-interacting-with-web-services/)），它有这个非常简单的实现：

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^{
    NSError *error = nil;
    NSURL *url = [NSURL URLWithString:@"http://brandontreb.com/apps/pocket-mud-pro/promo.json"];
    NSString *json = [NSString stringWithContentsOfURL:url
                                              encoding:NSASCIIStringEncoding
                                                 error:&error];
    NSLog(@"\nJSON: %@ \n Error: %@", json, error);
}); 
```

哪个更好用？后者的简单性是否存在固有的错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T20:21:31.107

使用没有任何“错误”，`stringWithContentsOfURL:encoding:error:`但您在如何处理正在进行的请求方面没有灵活性。如果您需要执行以下任何操作，那么我会使用`NSURLConnection`：

1.  在请求期间向用户显示完成百分比
2.  向需要 HTTP 身份验证的主机执行请求
3.  更复杂的数据处理（例如，从 Web 服务下载比典型 JSON 响应更多的数据），您可能希望以块的形式处理响应
4.  取消请求（感谢@martin）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:20:18.037

使用第一个。您有一个方法可以告诉您连接何时完成，然后您可以执行另一种方法来显示数据或您打算对其进行的任何操作。

# java - 错误：Car 中的 compareTo(Object) 无法在 Comparable 中实现 compareTo(T)

> ID：15591557
> 
> 赞同：1
> 
> 时间：2013-03-23T20:13:36.457
> 
> 标签：java, interface, compareto

```
public int compareTo(Object another) throws CustomMadeException
{
    if(this.getClass() != another.getClass() )
    {
        throw new CustomMadeException();
    }

    Car other = (Car) another;

    return this.getBrand().compareTo(other.getBrand());

} 
```

我不明白我的代码到底有什么问题。为什么它不能实现 T 在可比较？我是否必须将 compareTo 的参数更改为 T？但它不应该是对象吗？据我所知，comparable接口中compareTo的实现是空白的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:15:07.617

执行此操作的规范方法如下：

```
public class Car implements Comparable<Car> {

    ...

    public int compareTo(Car other)
    {
        return this.getBrand().compareTo(other.getBrand());
    }
} 
```

请注意，您的实现`compareTo()`不能抛出任何已检查异常，因为`Comparable<T>.compareTo()`'s`throws`规范不允许出现任何异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:24:48.840

要从 Comparable 接口覆盖 compareTo() 方法，您不能抛出新的或更广泛的检查异常。因此，您完全错了。这违反了在 java 中覆盖任何方法的规则。请参阅此链接以了解在 java 中覆盖的规则：[示例链接](http://code.google.com/p/learn-java/wiki/OverridenMethod)

这就是您无法在代码中以可比较的方式实现 T 的原因，因为编译器将其视为一种不同的方法，而不是被覆盖的方法。但实际上问题在于覆盖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:16:28.533

第一：接口从不包含方法的实现。

第二：你的类的 implements 语句看起来如何？如果您使用泛型类型，则必须将该类型用作方法中的参数类型。

示例：如果您实现这样的接口：

```
public class MyClass implements Comparable<MyClass> 
```

那么您的方法必须具有以下签名：

```
public int compareTo(MyClass param) 
```

# azure - Azure 移动服务：{System.TypeLoadException} = {"找不到入口点。":""}

> ID：15591566
> 
> 赞同：0
> 
> 时间：2013-03-23T20:14:30.513
> 
> 标签：azure, windows-8, azure-mobile-services, entrypointnotfoundexcept

实际上，我在使用 Azure 移动服务时遇到了一些问题。因为当我尝试将表转换为集合视图时，我收到错误“{System.TypeLoadException} = {"Entry point was not found.":""}"。每次我收到一个带有此错误的空列表时。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:15:38.810

我也有同样的问题。[我在这里](http://social.msdn.microsoft.com/Forums/es-ES/azuremobile/thread/34c5afce-ca4a-4f10-844b-826777c74b27)找到问题的解决方案 。简而言之：
因为 collectionView 是异步获取数据的，所以我们需要在完全加载时处理我们的集合。例如：
`items = todoTable.ToCollectionView();`
`items.CollectionChanged += items_CollectionChanged;`

`void items_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
{ if (e.Action == System.Collections.Specialized.NotifyCollectionChangedAction.Reset) { int n = items.Count; } }`
我使用了这个 Microsoft[示例](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-data-dotnet)

# mysql - mysql查询太慢了

> ID：15591567
> 
> 赞同：0
> 
> 时间：2013-03-23T20:14:32.073
> 
> 标签：mysql

几天来，我试图弄清楚为什么查询如此缓慢。我有一张大表，不是很大的约 70,000 条记录，我只在 2 个字段上进行搜索，我设置了索引，查询需要几分钟。

这些只是简单的查询，没有任何扩展。我尝试了解释选择 - 但没有什么不寻常的。它没有任何区别，或者我直接在网站或服务器上进行搜索。

知道会出什么问题吗？

查询是这样的

```
SELECT table3_id, email from table1 GROUP BY ID; 
```

查询由用户选择扩展......但这是主要搜索 - 这很慢，当扩展搜索更糟糕时。时间从 34-400 秒不等。

表如下所示：

```
Table1 (
  id int(11) NOT NULL AUTO_INCREMENT,
  other_id varchar(128) NOT NULL,
  user_id int(11) NOT NULL,
  flag_deleted tinyint(1) NOT NULL DEFAULT '0',
  email varchar(255) NOT NULL,
  datetime datetime NOT NULL,
  table3_id int(11) NOT NULL,
  text_header varchar(1024) NOT NULL,
  text_body text NOT NULL
  PRIMARY KEY (`id`)
) ENGINE=InnoDB ; 
```

索引：电子邮件，table3_id（我在其中进行了搜索）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:20:51.550

假设您实际上想要所有约 70,000 个 ID/电子邮件，没有比这里更好的方法了。您可以查询更小的信息子集吗？如果您不是一次全部使用它们，您可以尝试：

```
SELECT table3_id, email, FROM table1
LIMIT x 
```

其中 x 是您需要的任何数量的条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T10:53:21.047

我找到了解决方案……该表包含太多未使用的数据。将这些数据移动到另一个表后，一切都变得更快了。（我知道这不应该是原因，但它起作用了）

使这项工作更好的其他可能原因是将 mysql 从 5.1 升级到 5.5。

我在桌子上做了更多的标准化，我们可以更快地得到结果。（尽快我得到了这样做的许可）。

# c# - c# 和 c++ 之间的指针 - p/invoke

> ID：15591568
> 
> 赞同：0
> 
> 时间：2013-03-23T20:14:38.407
> 
> 标签：c#, c++, pointers, interop, pinvoke

嗨，我试图从 c# 调用一些 c++ 代码。所以我遵循了几个教程，amde 我自己的 dll，现在我从我的 c# 包装器中调用它。问题是，我有一个接收指针的函数，但我似乎无法让它工作，Visual Studio 只是向我显示我不太了解的红色错误。有人可以告诉我我做错了什么吗？我还有一个问题，如果 c++ 中的函数调用其他函数，所有数据都将保持不变，对吗？因为我传递的这个数组将在 dll 内部进行操作，然后，我会从 dll 调用其他函数来获取结果 - 我担心函数调用之间数据会丢失！

谢谢！

dll .h #包括

```
 #include <stdio.h> 

   #include <stdlib.h> 

   #include <math.h> 

   #include <string> 

   #include <vector> 

   #include <fstream> 

   #include <sstream> 

   #include <cstring> 

   #include <fstream>

   #include <iomanip> 

   #include <cstdlib> 

   #include <string> 

   #include <cstring> 

   #include "opencv\ml.h"

   struct points{
    double x;
    double y;
    double z;
   };

#define db at<double>

   extern "C" __declspec(dllexport) points * mapear_kinect_porto(points pontos[]);

   CvERTrees *  Rtree ;

   extern "C" __declspec(dllexport)     void calibrate_to_file(points pontos[]);

   extern "C" __declspec(dllexport)     int calibration_neutral();

   extern "C" __declspec(dllexport)       int EmotionsRecognition(); 
```

时间：2019-04-10 标签：c#wrapper

```
 [System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential)]
public struct points
{

    /// double
    public double x;

    /// double
    public double y;

    /// double
    public double z;
}

class CPlusPlusWrapper
{

/// Return Type: void
    ///pontos: points*
    [System.Runtime.InteropServices.DllImportAttribute("DLLTUT.dll", EntryPoint =  "calibrate_to_file")]
    public static extern void calibrate_to_file(ref points pontos);
    public unsafe void calibrate_file()
    {

        points[] shit = new points[8];
        points*[] pBLA; //error here!!!!
        pBLA = &shit;
   //            calibrate_to_file(pbla);
    } 
```

}

顺便说一句，我使用了 p/invoke 助手，我得到了这个

```
public partial class NativeConstants {

/// db -> at<double>
/// Error generating expression: Expression is not parsable.  Treating value as a raw string
public const string db = "at<double>";
}

[System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential)]
public struct points {

/// double
public double x;

/// double
public double y;

/// double
public double z;
}

public partial class NativeMethods {

/// Return Type: points*
///pontos: points*
[System.Runtime.InteropServices.DllImportAttribute("<Unknown>", EntryPoint="mapear_kinect_porto")]
public static extern  System.IntPtr mapear_kinect_porto(ref points pontos) ;

/// Return Type: void
///pontos: points*
[System.Runtime.InteropServices.DllImportAttribute("<Unknown>", EntryPoint="calibrate_to_file")]
public static extern  void calibrate_to_file(ref points pontos) ;

/// Return Type: int
[System.Runtime.InteropServices.DllImportAttribute("<Unknown>", EntryPoint="calibration_neutral")]
public static extern  int calibration_neutral() ;

/// Return Type: int
[System.Runtime.InteropServices.DllImportAttribute("<Unknown>", EntryPoint="EmotionsRecognition")]
public static extern  int EmotionsRecognition() ;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:25:19.543

您似乎正在尝试调用名为`calibrate_to_file`. 接收一个数组`points`。p/invoke 是：

```
[DllImportAttribute("DLLTUT.dll", CallingConvention=CallingConvention.Cdecl)]
public static extern void calibrate_to_file(points[] pontos); 
```

绝对不需要不安全的代码。只需在调用代码中创建一个类型数组，`points[]`然后调用`calibrate_to_file`.

您需要确保调用约定匹配。由于您没有在 C++ 代码中指定调用约定，我假设使用默认值 of `cdecl`。

该结构可以简单地声明为

```
[StructLayout(LayoutKind.Sequential)]
public struct points
{
    public double x;
    public double y;
    public double z;
} 
```

该`mapear_kinect_porto`函数将变得更加棘手，因为您将返回一个指针作为函数返回值。使用参数而不是函数返回值返回该信息会更容易。

我对你最好的建议是将这个问题分解成小块。让最简单的功能正常工作。然后继续下一个功能。等等。不要试图一口气解决整个问题。然后，当它不可避免地失败时，您将不知道在哪里寻找错误。

# ios - 如何使用 Objective c 拆分或收集 7zip 等 zip 部分？

> ID：15591569
> 
> 赞同：1
> 
> 时间：2013-03-23T20:14:51.800
> 
> 标签：ios, objective-c, zip, unzip

我希望能够收集有人会发送给我的所有 zip 部分，并使用 7 个 zip 拆分文件[http://www.linglom.com/2008/10/12/how-to-split-a-large-file-使用-7-zip/](http://www.linglom.com/2008/10/12/how-to-split-a-large-file-using-7-zip/)

7zip 使用什么算法？在目标 c 中以编程方式执行相同操作的方法是什么（假设我已经使用了一个 zip 库，我现在需要拆分文件或合并文件的多个部分）

# playframework - 使用默认变量调用反向路由器

> ID：15591573
> 
> 赞同：1
> 
> 时间：2013-03-23T20:15:11.670
> 
> 标签：playframework, playframework-2.1

在我的路由器中，我有

```
GET    /:namespace/:name    controllers.Application.page_view(namespace: String, name: String, redirect:Boolean ?= true) 
```

在我可以做的 URL 中，`/main/home`或者`/main/name?redirect=0`如果我想要默认值以外的东西。我想通过调用反向路由器来做类似的事情，但是例如：`return redirect(routes.Application.page_view("main", "home"));` *不起作用*......我也需要在其中包含一个“true”（默认），可以拨打电话没有说明可选变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:59:01.097

不，在 Java 的反向路由参数或视图参数中是不可能的 - 您需要在控制器中指定默认值：

```
return redirect(routes.Application.page_view("main", "home", true)); 
```

另一方面，在 Scala 驱动的视图中，您可以根据需要执行此操作，比较：

```
<pre>
    @(routes.Application.page_view("one", "two"))
    @(routes.Application.page_view("three", "four", true))
    @(routes.Application.page_view("five", "six", false))
</pre> 
```

## 编辑

正如您指出的那样，也有可能使您的操作*重载*（但请注意，它不会重载 sensu stricto，因为对于路由解析器，您需要使用其他名称），如：

`routes`：

```
GET     /:namespace/:name     controllers.Application.pageViewDefault(namespace: String, name: String)
GET     /:namespace/:name     controllers.Application.pageView(namespace: String, name: String, redirect: Boolean ?= true) 
```

`Controller`：

```
public static Result pageViewDefault(String namespace, String name) {
    return pageView(namespace, name, true);
}

public static Result pageView(String namespace, String name, boolean redirect) {
   if (redirect) //return some redirect...
   // in other case return a Result...
} 
```

**无论如何**，我可以根据我的经验告诉你，从长远来看，它会让你感到不舒服：你需要记住每次（在控制器和视图中）如果你现在应该选择`pageView`or `pageViewDefault`。恕我直言，更好的是，只需使用单个操作并记住在需要的地方添加默认重定向 - `pageView(ns, n, true)`vs `pageView(ns, n, false)`。

同样使用您的方法，您需要记住`*Default`视图中的操作，而使用单个操作您将不会：

```
<pre>
    @(routes.Application.pageViewDefault("one", "two"))
    @(routes.Application.pageView("three", "four", false))

    vs.
    @(routes.Application.pageView("one", "two"))
    @(routes.Application.pageView("three", "four", false))
</pre> 
```

为了让生活更简单，只需在控制器中声明常量：

```
private static final boolean DEFAULT_REDIRECT = true; 
```

因此，您可以稍后将其用于默认路由：

返回重定向(routes.Application.pageView("main", "home", DEFAULT_REDIRECT));

此外，如果您将有很多带有可选`redirect`参数的操作，您将需要创建`*Default`操作 + 专用路由。

# scala - Scala - 领域对象建模

> ID：15591575
> 
> 赞同：7
> 
> 时间：2013-03-23T20:15:15.447
> 
> 标签：scala, object, dns, functional-programming, modeling

我目前正试图围绕 Scala 进行思考，打算将其用于我的下一个必须处理 DICOM 的项目。DICOM 具有相当广泛的规范，跨越标准的数千页。我对DICOM的理解相当有限，但总之DICOM对象——IOD（Information Object Definition）是由Modules组成的，Modules是typed name-value属性对的集合。由于某些模块和属性的可选性，它变得更加复杂。例如：

```
SimpleImageIOD: {
    PatientModule: {
        name: String
        dateOfBirth: DateTime
    }
    StudyModule: {
        name: String
        date: DateTime (optional)
    }
    SeriesModule: {
        name: String
    }
    ImageModule: {
        height: Integer
        width: Integer
        pixelSize: Double (optional)
    }
    EquipmentModule: { (optional)
        type: String
    }
} 
```

有大量的模块，它们可能由各种组合组成，形成不同的 IOD。反过来，Scala 具有强大的建模能力，包括所有特征、案例类、动态类等。你将如何在 Scala 中对这样的领域进行建模？我对这门语言还很陌生，但我一直在考虑使用不可变的案例类来定义模块，然后将它们聚合到各种 IOD 中，并使用镜头进行更新：

```
case class Patient(name: String, dateOfBirth: DateTime)
case class Study(name: String, date: Option[DateTime])
case class Series(name: String)
case class Image(height: Integer, width: Integer, pixelSize: Option[Double])
case class Equipment(type: String)

case class SimpleImageIOD(patient: Patient, study: Study, series: Series, 
                          image: Image, equipment: Option[Equipment])

object Patient {
    val nameL: Lens[Patient, String] = ...
    val dateOfBirthL: Lens[Patient, DateTime] = ...
}

object SimpleImageIOD {
    val patientL: Lens[SimpleImageIOD, Patient] = ...
    val patientNamel = patientL andThen Patient.nameL
} 
```

等等。关于镜头，编码所有样板文件可能会成为一个问题——镜头的顺序将覆盖IOD、模块和属性`M x N x L`的整个域。此外，某些领域的可选性至少使任务变得非常复杂。`M``N``L``scalaz-seven`

那里还有哪些符合 Scala 精神的可行方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T20:34:38.850

你可以嵌套镜头，所以我认为你不会有`M x N x L`镜头。我认为这是一个完全合理的方法。

另一种方法是定义您自己的单条目更新方法，如下所示：

```
case class Patient(name: String, dateOfBirth: Long) {
  def name(f: String => String): Patient = copy(name = f(name))
  def dateOfBirth(f: Long => Long): Patient = copy(dateOfBirth = f(dateOfBirth))
} 
```

你像这样使用它：

```
scala> Patient("John",0).name(_ + " Smith")
res1: Patient = Patient(John Smith,0) 
```

这在某种程度上可以通过镜头实现，但您必须非常小心，以避免出现大量样板（在使用和定义方面）。它没有镜头的灵活性，您可以随意拆分功能（例如更新），但它通过精简来弥补这一点。

我以这种方式进行大部分深度更新：

```
myImage.patient(_.study(_.date(_ => Some(System.currentTimeMillis)))) 
```

你只需要用当前时间的研究来更新整个树（假设这里`DateTime`实际上是 a `Long`），如果你真的需要提取这种再生这棵特殊树的能力（这对于镜头来说更自然），你可以

```
val setStudyTime = (t: Long) => myImage.patient(_.study(_.date(_ => Some(t)))) 
```

甚至

```
def studyTimeSetter(si: SimpleImageIOD) =
  (t: Long) => si.patient(_.study(_.date(_ => Some(t)))) 
```

如果您需要立即轻松掌握此功能。

如果您需要镜头为您提供的所有东西，使用这种方法以临时方式重建它需要更多的工作，但如果您只需要一小部分并且大部分只需要减少样板进行设置，这会非常好工作。

# android - RemoteException 发送 setActive(false) 通知 - 随机活动关闭

> ID：15591576
> 
> 赞同：2
> 
> 时间：2013-03-23T20:15:27.777
> 
> 标签：android, android-activity

我正在开发一个简单的 Android 游戏应用程序。在我的主要活动（用于玩的活动）期间，当验证一个条件时，1/2 秒后，我想停止当前活动并重新启动它。游戏有时运行良好，但经常随机地崩溃，“没有错误”[它不会重新启动活动，但会关闭返回游戏菜单活动的视图（用于菜单、选项等的活动...... .)]。

以下是问题发生时的一段代码：

```
if(scoreManager.isEndGame()){
                    final Handler mHandler = new Handler();
                    Runnable mUpdateTimeTask = new Runnable() {
                        public void run() {
                            long remainingTime = scoreManager.getSecondsUntilFinished();
                            scoreManager.setRemainingTime(remainingTime*1000);
                            finish();
                            startActivity(getIntent());
                        }

                    };
                    mHandler.postDelayed(mUpdateTimeTask, 500);
                } 
```

**scoreManager**包含一个 CountDownTimer，它在每次重新启动时用剩余时间进行实例化（它在 onCreate() 上实例化）。

在 LogCat 上，我读到：

> InputMethodManagerService：得到 RemoteException 向 pid 18494 uid 10062 发送 setActive(false) 通知
> 
> I/ActivityManager : 显示 com.myproject.activities/.MenuActivity: +774ms (总共 +3s697ms)

基本上，活动通常被破坏并且不会重新启动。不会抛出异常。我在我的“HTC Desire”上测试这个问题。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T00:40:55.823

解决了！！！

最后我发现了问题，它在主要活动的“onCreate”方法上。尝试随机设置背景图像，有时所选图像的分辨率太大 1024x768 或更大（R.drawable.background_3 和 R.drawable.background_5），因此主要活动被中断并返回到 MenuActivity。我解决了将所有背景图像的分辨率设置为 640x480 的问题。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    try{
       //stuff...

       //set background
       LinearLayout linLay = (LinearLayout) findViewById(R.id.mainLayout);
      linLay.setBackgroundResource(getBackgroundCode(new Random().nextInt(12)));

       //other stuff...
    }catch(Exception e){
        Log.e("MainPlayActivity", "onCreate() - Error during cretion. Exception: "+e.getMessage(), e);
    }
}

private int getBackgroundCode(int n){

    int result=0;

    switch (n){
    case 0:
        result = R.drawable.background_0;
        break;
    case 1:
        result = R.drawable.background_1;
        break;
    case 2: 
        result = R.drawable.background_2;
        break;
    case 3: 
        result = R.drawable.background_3;
        break;
    case 4: 
        result = R.drawable.background_4;
        break;
    case 5: 
        result = R.drawable.background_5;
        break;
    case 6: 
        result = R.drawable.background_6;
        break;
    case 7: 
        result = R.drawable.background_7;
        break;
    case 8: 
        result = R.drawable.background_8;
        break;
    case 9: 
        result = R.drawable.background_9;
        break;
    case 10: 
        result = R.drawable.background_10;
        break;
    case 11: 
        result = R.drawable.background_11;
        break;
    default :
        result = R.drawable.background_0;
    }
    return result;
} 
```

# actionscript-3 - AS3 / Flash - 使用外部 SWF 来减少加载时间会导致糟糕的工作流程

> ID：15591579
> 
> 赞同：0
> 
> 时间：2013-03-23T20:15:43.313
> 
> 标签：actionscript-3, flash, flash-builder, flash-cs6

我们正在开发一个主要 SWF 超过 30mb 的大型软件。为了减少加载时间，我们使用按需加载的外部 SWF（例如，当单击某个 GUI 按钮或到达应用程序的某个阶段时）。为了将 SWF 的逻辑与主应用程序连接起来，我们首先加载外部 SWF 及其所有类定义，然后设置图形和本地化文本。数据和逻辑是盲目设置的——我们（作为程序员）看不到 SWF（由 GUI 设计人员创建）使用了哪些公共成员和变量，因此我们在 GUI 开发和 AS3 编程的双方都非常容易出现拼写错误。但是 - 我们确实有可用的源代码，我们遇到的麻烦似乎是不必要的。

我们如何以启用 Flash Builder 的代码辅助功能的方式将 Adob​​e Flash Pro 的源代码与与相应 SWF 一起工作的 AS3 代码连接起来？当您导入 .fla 的代码时，某些成员是未知的，因为它们只存在于 .fla 中。推荐的工作流程是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T07:54:04.837

最简单的连接方法是使用 SWC 而不是在运行时加载 SWF，正如我从您的问题中了解到的那样，由于大小限制，不允许使用此解决方案。

您可以尝试让设计人员以 SWC 的形式交付，并为您获得的每个 SWC 创建您自己的项目（在 flash builder 中）。现在您获得了自动完成功能，您仍然可以创建一个 SWF，您现在可以从 flash builder 而不是 flash cs6 构建它，并且可以在运行时加载。

如果您像这样设置它，您可能希望在多个项目中使用（部分）相同的代码，因此请确保创建所有“swc 项目”都在使用的库/主项目。

现在确保主/库项目是使用编译`-link-report`的，并且模块用于`-load-externs`排除主项目中已经存在的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:32:33.943

以下是我过去在处理较小规模的项目时的做法，然后我会写下关于如何扩展它的想法。

这些是在开发 GUI 的过程中采取的步骤：

1.  有一般概念（不涉及程序员，设计师与 UI/UX 或客户一起决定）。

2.  设计师和程序员审查在上一步中创建的一般方案，程序员为符号和其他资产创建必要的定义，这些资产必须存在于设计师在其工作中产生的 SWC 中。

3.  设计者收到“虚拟”定义，将它们连接到项目。每当她创建新符号或导入资产时，她都会将该资产链接到现有定义。

4.  经过一个阶段，当一些符号已经在 SWC 中时，设计者将 SWC 交给程序员。程序员使用他自己的定义（设计师从中派生出她的定义）。程序员使用这些定义来编写接口的功能部分并将它们连接到程序的其他部分。

通过循环执行这些步骤，我们能够逐渐向项目中添加更多组件，并相互独立地开发其中的一部分。（可以在设计人员之间分担工作量，以便每个人都可以使用他们之前选择工作的一组定义来生成自己的 SWC）。

陷阱：

1.  需要对设计人员进行培训以使用 forklfow（很少有人知道如何将符号连接到现有定义，如何编译 SWC）。但该功能在 Flash CS 中就存在。

2.  人为错误（如果设计师在链接时打错字 - 在库交给程序员之前她不会注意到它）。

**避免人为错误**

在我较小规模的项目中，我只是通过`swfdump`实用程序运行从 SWC 中提取的 SWF，并将其通过管道传输到 grep 以查看符号定义是否存在。由于数量不多，因此可以手动完成。

但是，由于您描述的项目较大，我会编写一个脚本，将创建的大纲（ActionScript 源文件）和 SWC 库作为输入。解压缩 SWC，从中提取 SWF，运行它`swfdump`并验证源文件中的所有定义是否存在于 SWF 中。设计师将负责在发送 SWC 之前运行此脚本，并确保至少她在上次更新期间添加的那些符号/资产确实进入了库。

分析仍然存在几个技术问题：重复名称，可能存在高水平的“噪音”，它仍然依赖于人来运行此检查，而不是使其类似于提交钩子。但这些似乎都不是无法解决的——只要付出足够的努力和创造性，就必须有可能提出一个可以确保完整性的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-22T09:56:46.423

也许不是很有帮助，但我建议您的主应用程序应该负责所有应用程序关键功能。尤其是导航。

当您加载外部 SWF 时，该 SWF 应在其自己的“沙箱”内运行，并且仅以有限的方式与主应用程序通信： - 告诉主应用程序 SWF 已完全加载。- 当用户完成/完成主应用程序需要知道的事情时，告诉主应用程序。

如果不检查 SWF 是否存在以及它是否具有这些功能，主应用程序永远不应期望功能存在。加载的 SWF 应该只调用主应用程序中有限数量的函数，这些函数都是预先确定的。

# android - Android 2.1上的Android webview，加载后出错

> ID：15591581
> 
> 赞同：0
> 
> 时间：2013-03-23T20:15:52.673
> 
> 标签：android, webview, get, load

我加载 WebView 并获取源代码并放入警报对话框。警报对话框关闭后，我收到此线程：

```
Uncaught handler: thread WebViewCoreThread exiting due to uncaught exception
android.view.ViewRoot$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views.
at android.view.ViewRoot.checkThread(ViewRoot.java:2683)
at android.view.ViewRoot.requestLayout(ViewRoot.java:557)
at android.view.View.requestLayout(View.java:7918)
at android.view.View.requestLayout(View.java:7918)
at android.view.View.requestLayout(View.java:7918)
at android.view.View.requestLayout(View.java:7918)
at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:255)
at android.view.View.requestLayout(View.java:7918)
at android.widget.RelativeLayout.requestLayout(RelativeLayout.java:255)
at android.view.View.setFlags(View.java:4324)
at android.view.View.setVisibility(View.java:2988)
at card.eximbank.CardExim.function(CardExim.java:413)
at card.eximbank.CardExim$MyJavaScriptInterface.getHTML(CardExim.java:74)
at android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)
at android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)
at android.webkit.BrowserFrame.loadUrl(BrowserFrame.java:149)
at android.webkit.WebViewCore.loadUrl(WebViewCore.java:1449)
at android.webkit.WebViewCore.access$1400(WebViewCore.java:48)
at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:890)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:611)
at java.lang.Thread.run(Thread.java:1096) 
```

这是我的网络视图：

```
browser.getSettings().setJavaScriptEnabled(true);
browser.getSettings().setSavePassword(false);
browser.getCertificate();
browser.addJavascriptInterface(new MyJavaScriptInterface(), "HTMLOUT");

final Activity MyActivity = this;
browser.setWebChromeClient(new WebChromeClient() {

 public void onProgressChanged(WebView view, int progress) {
 setProgressBarIndeterminateVisibility(true);
 MyActivity.setProgress(progress * 100); // Make the bar
 if (progress == 100) {
  setProgressBarIndeterminateVisibility(false);
 }
}
@TargetApi(8)
public boolean onConsoleMessage(ConsoleMessage cmsg)
{
 resultCont = cmsg.message();
 function();
 return true;
}
});

browser.setWebViewClient(new WebViewClient() {
@Override
public void onReceivedError(WebView view, int errorCode, String description, String    failingUrl)
{ }

@Override
public boolean shouldOverrideUrlLoading(WebView view, String url)
{
 return true;
}

public void onPageFinished(WebView view, String url)
{   
 if(countOnLoad == 2){
  if (android.os.Build.VERSION.SDK_INT > 7) {    
   view.loadUrl("javascript:console.log(document.getElementsByTagName('body') [0].innerHTML);");    
  }else{
   view.loadUrl("javascript:window.HTMLOUT.getHTML(document.getElementsByTagName('body')[0].innerHTML);");
  }
   countOnLoad = 1;
  }else{
   countOnLoad++;
   }
 } 

 @TargetApi(8)
 public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) {

  handler.proceed();
 }
 }); 
```

主要活动的按钮：

```
signIn.setOnClickListener(new OnClickListener(){
public void onClick(View arg0) {
 browser.loadUrl("file:///android_asset/test_exim.html?username=" + username + "&password=" + password);
 }
}); 
```

当我点击按钮时，我在 WebView 上加载了一个本地文件。此文件提交表单并将其他 URL 加载到 WebView。我想从 WebView 获取源代码并放入 TextView。但是，WebView 不可见。

# magento - 覆盖 \app\code\core\Mage\Core\Block\Messages.php

> ID：15591586
> 
> 赞同：2
> 
> 时间：2013-03-23T20:16:23.723
> 
> 标签：magento, block, magento-1.7, core, extend

我正在尝试覆盖 magento 中的消息传递块，但无法使其正常工作。

我创建了所需的文件：

```
\app\etc\modules\Dss_Core.xml
\app\code\local\Dss\Core\Block\Messages.php
\app\code\local\Dss\Core\etc\config.xml 
```

我还创建了自定义管理员 login.phtml，但其中一个显示正确。但是当在 login.phtml 中调用“getMessagesBlock()->getGroupedHtml() ?>”时，我看不到来自 Dss_Core_Block_Messages 的消息。

我尝试了一切（更改文件/清除 magento 缓存）但无法正常工作。

有人可以帮忙吗？？？

\app\etc\modules\Dss_Core.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Dss_Core>
            <active>true</active>
            <codePool>local</codePool>
        </Dss_Core>
    </modules>
</config> 
```

\app\code\local\Dss\Core\etc\config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Dss_Core>
            <version>0.1.0</version>
        </Dss_Core>
    </modules>
    <global>
        <blocks>
           <core>
              <rewrite>
                  <messages>
                      Dss_Core_Block_Messages
                  </messages>
              </rewrite>
           </core>
        </blocks>
    </global>
</config> 
```

\app\code\local\Dss\Core\Block\Messages.php

```
<?php
class DSS_Core_Block_Messages extends Mage_Core_Block_Messages
{
    public function getGroupedHtml()
    {
        return '<div class="alert alert-block" style="color: white;">custom dss errors</div>';
    }
} 
```

\app\design\adminhtml\default\dss\template\login.phtml

```
<body id="page-login" onload="document.forms.loginForm.username.focus();">
    <div class="container login-container">
    <div id="messages"><?php echo $this->getMessagesBlock()->getGroupedHtml() ?></div>
        <div class="login-box rounded">
            <form method="post" action="" id="loginForm">
                <div class="login-form">
                ...
                </div>
            </form>
        </div>
    </div>
</body>
</html> 
```

非常感谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T23:31:49.207

`DSS_Core_Block_Messages`您的问题是应该是类名中的拼写错误`Dss_Core_Block_Messages`。您还应该将您的重写条目放在一行`<messages>Dss_Core_Block_Messages</messages>`中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-06T18:21:46.047

在我的情况下，Mage_Core_Block_Messages 扩展的问题是magento的编译：系统->工具->编译系统简单没有加载php文件，并且出现白屏死机

# visual-studio-2010 - 无法在 Visual Studio 2010 或 2012 中调试项目

> ID：15591587
> 
> 赞同：0
> 
> 时间：2013-03-23T20:16:28.617
> 
> 标签：visual-studio-2010, visual-studio-2012

我拥有两个版本的 Visual Studio Ultimate 2010 和 2012，但我都遇到了问题！

在 Visual Studio 2010 中，一旦我创建了一个新的 C++ 项目（Windows 应用程序）并按下“开始调试”，我就会收到一条错误消息：

> 无法启动程序 c:\...
> 
> 系统找不到特定文件。

但是，在 Ultimate 2012 中，一旦我创建了一个新的 C# 项目（Windows 应用程序）并运行它，它就会在一秒钟内消失！

注意：我还没有添加那么多代码！

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    namespace projecttotest
    {
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void closeToolStripMenuItem_Click(object sender, EventArgs e)
        {
            Close();
        }

        private void aboutToolStripMenuItem1_Click(object sender, EventArgs e)
        {
            MessageBox.Show("This Application is ..");
        }
    }
    } 
```

# ruby-on-rails - Ruby on Rails Neo4J Keymaker Gem

> ID：15591590
> 
> 赞同：0
> 
> 时间：2013-03-23T20:16:48.207
> 
> 标签：ruby-on-rails, neo4j

我正在使用 Neo4j 和 Rails 创建一个社交网络应用程序，但我不想使用 Jruby。我正在使用 devise、oauth、回形针、考拉以及其他 Gems——其中一些可能不适用于 Jruby）。 ..

[我已经下载了 Keymaker Gem，但除了 github 文档和http://www.neotechnology.com/2012/07/i-know-kung-fu-or-](http://www.neotechnology.com/2012/07/i-know-kung-fu-or-using-neo4j-on-rails-without-jruby/)之外，我没有太多关于如何使用它的示例[使用-neo4j-on-rails-without-jruby/](http://www.neotechnology.com/2012/07/i-know-kung-fu-or-using-neo4j-on-rails-without-jruby/) ..

您能否指出更多示例（Google 没有展示太多），这些示例将向我展示如何使用此 Gem 或任何其他 Gem，以便在我的应用程序中有效且轻松地使用 Neo4j？有没有更好的宝石可以使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:18:00.827

是的，你绝对应该看看[Neography](https://github.com/maxdemarzi/neography)，它的纯 Ruby 并使用 HTTP 包装器 API 来访问 neo4j，它有据可查，Max（现在）在 Neo Technology 工作，这家公司是 Neo4j 背后的公司。

Neo4j 即将发布一个新的 API（几周前我从 Neo Technology 的某个人那里得知），这将使网络 API 访问变得更好，因此，neography 的性能甚至会很快变得更好，尽管如果使用得当，它已经真的很好。

免责声明：我是宝石的贡献者。

# ruby - 如何检查 JRuby 脚本是否定义了特定方法？

> ID：15591593
> 
> 赞同：1
> 
> 时间：2013-03-23T20:17:17.557
> 
> 标签：ruby, jruby

我通过 JRuby 将 Ruby 嵌入到 Java 应用程序中，并且需要测试给定的 Ruby 脚本是否定义了各种方法。我有一个非常简单的 JRuby 设置：

```
ScriptingContainer container = new ScriptingContainer();
Object receiver = container.runScriptlet(new FileReader(SCRIPT_PATH)); 
```

`SCRIPT_PATH`包含以下内容的文件在哪里：

```
def processDoc(doc)
  return doc
end 
```

我现在想确定脚本是否定义了该`processDoc`方法，但除了实际调用之外找不到其他方法`processDoc`，我希望避免这种方法。我已经尝试过`respond_to? 'processDoc'`and `methods.include? 'processDoc'`，但都不起作用，因为以下成功的断言集表明：

```
Object doc = new Object();
assert container.runScriptlet("respond_to? :processDoc") == Boolean.FALSE;
assert container.runScriptlet("methods().include? 'processDoc'") == Boolean.FALSE;
assert receiver == null;
assert container.callMethod(receiver, "processDoc", doc) == doc; 
```

是否有任何其他技术可以用来确定一个简单的 JRuby 脚本是否定义了一个具有特定名称的方法，而不实际调用该方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T13:19:10.970

当定义一个全局方法时，它变成了一个私有方法`Object`。因此，您必须使用`include_all`参数 for[`respond_to?`](http://ruby-doc.org/core-2.0/Object.html#method-i-respond_to-3F)才能使其工作：

```
container.runScriptlet("Object::respond_to?(:processDoc, true)") 
```

# java - 无法从 java RTSP 服务器向 VLC 客户端发送 RTP 数据包

> ID：15591595
> 
> 赞同：2
> 
> 时间：2013-03-23T20:17:41.303
> 
> 标签：java, rtsp, rtp

我目前正在扩展这个项目[http://www.csee.umbc.edu/~pmundur/courses/CMSC691C/lab5-kurose-ross.html](http://www.csee.umbc.edu/~pmundur/courses/CMSC691C/lab5-kurose-ross.html)来实现一个非常基本的 RTSP 服务器。

到目前为止，我有一个粗略的多线程实现硬编码来响应使用 VLC 播放器作为客户端的 OPTIONS、DESCRIBE、SETUP 和 PLAY 请求。问题是在响应 PLAY 请求后，VLC 似乎没有确认在它在 SETUP 请求中指定的端口号上发送的任何 RTP 数据包。输出时，我的 SETUP 响应的相关部分 -

```
RTSPBufferedWriter.write("Transport: RTP/AVP;unicast;client_port="
                    + RTP_dest_port + "-" + (RTP_dest_port + 1)
                    + ";server_port=55556-55557" + CRLF); 
```

RTP_dest_port 匹配客户端请求。UDP初始化如下：

```
 RTPsocket = new DatagramSocket(55556); 
```

...

```
senddp = new DatagramPacket(packet_bits, packet_length, ClientIPAddr, RTP_dest_port);  
RTPsocket.send(senddp); 
```

但是，由于没有视频输出，数据包似乎永远不会到达客户端，并且最终会出现此错误。

```
live555 warning: no data received in 10s. Switching to TCP 
```

在切换到 RTP over TCP 模式之前。

我不确定 UDP 初始化是否错误，或者它是否正在接收格式错误的 RTP 数据包，但只是没有将它们注册为 mjpeg 数据。任何关于这里到底发生了什么的建议都将非常有用！

只是为了获得更多信息，我正在使用 localhost 进行测试，从 TCP 套接字检索 ClientIPAddr 并且尚未处理 RTCP。

# android - 如何将蓝牙扫描结果保存在字符串数组中？

> ID：15591596
> 
> 赞同：0
> 
> 时间：2013-03-23T20:17:55.007
> 
> 标签：android, bluetooth, network-scan

我知道我可以将 bt 扫描的结果抓取到如下代码的数组列表中：

```
// Create a BroadcastReceiver for ACTION_FOUND
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        // When discovery finds a device
        if (BluetoothDevice.ACTION_FOUND.equals(action)) {
            // Get the BluetoothDevice object from the Intent
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            // Add the name and address to an array adapter to show in a ListView
            mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
        }
    }
};
// Register the BroadcastReceiver
IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND); 
```

但我想稍后使用结果，比如将它们放在字符串数组或类似的东西上可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:30:45.090

是的，它可以，只需在某处创建一个静态数组/列表并填充它并在任何你想要的地方读取它。仅限制：在应用程序重新启动时不保存数据。为此，您应该检查数据库和/或 SharedPreferences

# api - 类/接口“默认”实现的命名约定

> ID：15591597
> 
> 赞同：4
> 
> 时间：2013-03-23T20:17:57.337
> 
> 标签：api, interface, naming-conventions, naming

我已经在 StackOverflow 上看到[了](https://stackoverflow.com/questions/541912/interface-naming-in-java) [规范](https://stackoverflow.com/questions/2814805/java-interfaces-implementation-naming-convention)的类/接口命名问题，并阅读了很多关于该主题的其他[意见](http://isagoksu.com/2009/development/java/naming-the-java-implementation-classes/)，但我有一个相关的问题，我不确定在这些地方的任何一个地方都能回答。我倾向于讨厌 IInterface 或 ClassImpl 命名约定，因为它们是不必要的（考虑到现代 IDE），使代码更难阅读，并且在许多情况下，需要使用其中一种命名模式似乎意味着不正确的设计。

但是，我经常遇到这样一种情况：我有一个想要作为 API 的一部分公开的接口（通常在一个单独的包中），然后我创建了一个接口的抽象实现以包含一些我最期待的常见功能（但不是全部）具体实现。例如：

```
public interface Foo {
    public String getBar();
}

public abstract class BasicFoo implements Bar {
    private String bar;

    @Override
    public String getBar() {
        return bar;
    }
} 
```

在实践中，我倾向于使用 Basic 作为实现名称的前缀，但我所做的基本上正是某些人使用 Impl 后缀的目的：提供基本/默认实现。我可以尝试一个暗示它是由内存存储（例如 Bar）支持的 Foo 的名称，但它总是捕获 BasicFoo 中的所有功能。我也不相信我应该抛弃接口并直接公开实现，因为接口提供了额外的灵活性和解耦。

关于处理这种情况的更好方法或逻辑命名约定的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T00:29:04.200

Java 世界中的一个常见模式是调用抽象的、不完整的实现`AbstractSomething`；例如[`AbstractList`](http://docs.oracle.com/javase/7/docs/api/java/util/AbstractList.html)或[`AbstractButton`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html)。接口和抽象类都暴露给客户端。这背后的想法是抽象类作为使用 API 的起点。这对于定义许多方法和复杂协定的接口尤其有用，例如 java.util.List。接口的大多数方法都是根据客户端必须提供的最小抽象方法集来实现的。

例如，要实现基于`AbstractList`您的列表，只需提供`get(index)`和`size()`方法的实现。所有其他操作 - 迭代器、`indexOf`、`subList`、`hashCode`... - 最终都委托给这两个。

# html - css 选择器顺序

> ID：15591602
> 
> 赞同：0
> 
> 时间：2013-03-23T20:18:28.093
> 
> 标签：html, css, dom, markup

我对如何根据性能和 Web 标准正确声明 CSS 选择器感到困惑

假设我的 html 标记是

```
<div class="itemList">
    <div class="itemList-img-wrapper">
         <img class="item-img" src="reref.jpg" />
    </div>
     <div class="bottom">
          <div class="info"> <h2>Data is invalid</h2> </div>
     </div>
 </div> 
```

有各种声明 css 来设计这个 html

如果我想设计 .item-img，我可以通过两种方式进行
**A：**

```
 .itemList .itemList-img-wrapper .item-img { width:100%; } 
```

或**B：**

```
 .item-img { width:100%; } 
```

有人告诉我，变体 A 是首选，因为它使它独一无二，因此如果我在 css 文件的其他位置使用类 .item-img，则不会应用 css。在标准和性能方面首选哪一个？如果我想确保它特定于一个页面，我应该在页面正文中添加一个 ID 标签并将 CSS 声明为假设有一个页面 Listings.php

```
#listings .item-img 
```

或者

```
#listings .itemList .itemList-img-wrapper .item-img 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:30:25.853

B 的性能略高于 A，但实际上它无关紧要：两者都是 FAST。还有无数其他方面的改进（下载的图像和文件更少，来自其他域名的 DL，JS、CSS 和图像的权重，JS 中的选择器等）。CSS 选择器在性能优先级上接近最后（HTML 代码中的空白和注释在 imo 中排在最后）

据我所知，您应该使用选择器 B。但是如果没有 pageS 的其余部分，则很难回答。这个类还有什么其他用途？它会在其他地方重复使用吗？如何？
为什么你有一个名为 List 的类和 item 但它不是一个`ul`元素？为什么要在 img 上的类名中添加“-img”？也适合你`img.item`，或者只是`.someParent img`？ETC

> 我对如何根据性能和 Web 标准正确声明 CSS 选择器感到困惑

没有网络标准告诉您应该使用哪个选择器；）这是关于代码质量、团队或客户或个人偏好的约定、项目级别的思考（这很难，需要经验和客户提供的足够 PSD。经常我必须用 2 个 PSD 来命名类，然后来另外 20 个 ^^)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T07:43:37.857

案例一：

```
.itemList .itemList-img-wrapper .item-img { 宽度：100%; }
```

渲染需要更多时间。

案例B：

```
.item-img { 宽度：100%; }
```

它简短而简单。***IT 将针对所有具有“ item-img*** ”类的元素。如果您将相同的类用于不同的目的，那么您可以增加元素的特异性。你可以短

```
.itemList .item-img { 宽度：100%; }
```

# c++ - 将 operator<< 添加到 std::vector

> ID：15591603
> 
> 赞同：3
> 
> 时间：2013-03-23T20:18:30.517
> 
> 标签：c++, vector

我想添加`operator<<`到`std::vector<string>`. 这是运营商

```
std::vector<std::string>& operator<<(std::vector<std::string>& op, std::string str) {
    op.push_back(str);
    return op;
} 
```

现在我可以通过这种方式将元素添加到向量：

```
std::vector<std::string> vec;
vec << "aaa" << "bbb" << "ccc"; 
```

但是由于无法通过引用传递临时对象，因此未编译以下代码。

```
std::vector<std::string>() << "AAA" << "BBB"; 
```

如何更改代码以将元素也添加到临时向量？

我有一个接受`const std::vector<std::string>&`参数的函数，所以我想在一行中传递一个向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:22:43.110

你不能。唯一可以实现的*方法*是您的操作员是向量的成员。（由于某种原因，可以在临时对象上调用成员函数）。

作为一个非成员函数，虽然你所追求的是不可能的

此外，为 std::vector 等 STL 类型重载运算符也不是一个好主意。我认为您要完成的工作已经存在于[**boost 分配**](http://www.boost.org/libs/assign/)库中。我不相信你能比他们写得更好，所以如果你需要的话，最好使用 boost。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T20:33:17.017

我实际上并没有正确考虑过这样做的后果，但似乎你可能对右值有一个重载：

```
std::vector<std::string> operator<<(std::vector<std::string>&& op, std::string str) {
  op.push_back(std::move(str));
  return op;
} 
```

是的，它按值返回，但由于第 12.8/32 节，它将被优化为移动：

> 当满足或将满足复制操作的省略标准时，除了源对象是函数参数的事实，并且要复制的对象由左值指定时，选择复制的构造函数的重载决策是首先执行好像对象是由右值指定的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T20:43:07.137

嗯......从技术上讲，它是可行的，但风格很肮脏。只是为了说明（我不太确定它是否值得真正实施）。检查可与 GCC 4.7.2 一起使用。我真的不知道这在常量对象上会如何表现。

```
#include <vector>
#include <string>
#include <iostream>

const std::vector<std::string>& operator << (const std::vector<std::string>& op, const std::string &str) 
{
    ((std::vector<std::string>&) op).push_back(str);
    return op;
}

int main()
{
    std::vector<std::string> a = std::vector<std::string>() << "A" << "B";
    a << "AAA";

    std::cout << "size: " << a.size() << std::endl;
    for (std::vector<std::string>::iterator i = a.begin(); i != a.end(); ++i)
    {
        std::cout << '\t' << *i << std::endl;
    }

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T21:28:05.730

这是一个代码，可以帮助您执行与您的想法类似的事情（[http://ideone.com/3lrTxW](http://ideone.com/3lrTxW)）：

```
#include <vector>
#include <string>

typedef std::string String;
typedef std::vector<String> StringVector;

class StringVectorWrapper {
    StringVector vector;
public:    
    operator StringVector&() {
        return vector;        
    }

    StringVectorWrapper& operator << (const String& str) {
        vector.push_back(str);
        return *this;
    }
}; 
```

以及一个使用示例：

```
#include <iostream>    

void printVector(const StringVector& vector) {
    for(StringVector::const_iterator it = vector.begin(); it != vector.end(); it++)
        std::cout << *it << std::endl;
}

int main(void) {

    StringVectorWrapper w;
    w << "A" << "B";    
    printVector(w);

    printVector(StringVectorWrapper() << "Z" << "W");

    return 0;
} 
```

但我不会在我的任何程序中使用这样的代码。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-23T20:22:34.793

恐怕这是不可能的。此外，为任何标准库类重载运算符也是一个坏主意。STL 并不意味着扩展。

# c++ - 运行 DirectX 代理功能 *after* 原始功能比 *before*？

> ID：15591604
> 
> 赞同：0
> 
> 时间：2013-03-23T20:18:36.187
> 
> 标签：c++, proxy, directx, directx-9, ogre3d

我有一个代理`D3D9.dll`，我注意到我`DirectX::Present`在游戏中的代理之前被调用。

是否可以扭转这一点（首先是原始功能，然后是我的功能）？我画的一些元素被游戏覆盖了。

游戏使用 Ogre3D 进行渲染。

注意：我还想做一些“黑客”，比如冻结相机，我注意到以下几点：

在游戏`DirectX::Present`功能之前设置相机位置不会产生任何结果，而在游戏`DirectX::Present`调用之后设置相机位置会产生我想要的行为。（用 CheatEngine 测试）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T16:57:26.547

通常你在代理中有这样的结构：

```
HRESULT my_IDirect3DDevice9::Present(CONST RECT* pSourceRect,CONST RECT* pDestRect,HWND hDestWindowOverride,CONST RGNDATA* pDirtyRegion)
{
    return (m_pIDirect3DDevice9->Present( pSourceRect, pDestRect, hDestWindowOverride, pDirtyRegion));
} 
```

要首先完成原始功能，您只需要执行以下操作：

```
HRESULT uMod_IDirect3DDevice9::Present(CONST RECT* pSourceRect,CONST RECT* pDestRect,HWND hDestWindowOverride,CONST RGNDATA* pDirtyRegion)
{
    HRESULT myresult = (m_pIDirect3DDevice9->Present( pSourceRect, pDestRect, hDestWindowOverride, pDirtyRegion));
    *** YOUR CODEWHATEVER ****
    return myresult;
} 
```

# mysql - MySQL - 将这两个查询与连接或子查询连接在一起？

> ID：15591606
> 
> 赞同：0
> 
> 时间：2013-03-23T20:18:52.713
> 
> 标签：mysql, query-optimization, greatest-n-per-group

此查询返回给定特定`traceid`值（本例中为 50，这是两个表中都存在的键）我需要的数据，`tblResults`并且`tblTraces`：

```
SELECT count(changed)
FROM (
    SELECT changed
    FROM tblResults
    WHERE traceid = 50
    AND changed = 1
    ORDER BY resultid DESC
    LIMIT 0,20
) as R 
```

我想对*几乎*所有查询运行上面的查询`traceid`（因此，为每个 traceid 选择 20 行，而不仅仅是 traceid 50，所以 3 个 traceid 意味着 60 行）。下面这个简单的选择获取所需的`traceid`值：

```
SELECT `traceid` FROM `tblTraces` WHERE `enabled` = 1 
```

如何将两个查询“粘合”在一起？

所以我想象一个像下面这样的查询，除了它不起作用，因为子查询返回多行（我想要的）：

```
SELECT count(changed)
FROM (
    SELECT changed
    FROM tblResults
    WHERE traceid = (
                     SELECT `traceid` FROM `tblTraces` WHERE `enabled` = 1
                    )
    AND changed = 1
    ORDER BY resultid DESC
    LIMIT 0,20
) as R 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:51:39.907

这是另一种方法。我改编[了比尔卡尔文的例子](https://stackoverflow.com/a/1442867/1036439])。有关更详尽的解释，请参阅他的帖子。

```
选择 x.traceId，计数（*）
从 （
  选择一个。*
    FROM tblResults
    -- 一定不要排除 tblResults 这是跟踪中唯一的记录
    左外连接 tblResults b
      -- 我们要计算“在”这一行之前有多少行
      ON a.changed = b.changed
     和 a.traceId = b.traceId
     AND a.resultId < b.resultId
   WHERE a.changed = 1
     AND a.traceId IN (SELECT traceId FROM tblTraces WHERE enabled = 1)
   GROUP BY a.resultId
  HAVING COUNT(*) < 20 -- 消除排名高于 20 的行
   ORDER BY b.r​​esultId DESC -- 当我们按 resultid 对它们进行排名时
) x GROUP BY x.traceId

```

外层查询仅用于验证每个 traceid 包含不超过 20 条选定记录，内层查询是您真正感兴趣的结果集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:11:34.040

尽管我对这个答案不满意，但对于较小的表来说，这可能是最简单的：

```
SELECT tblTraces.traceid, LEAST(20, SUM(tblResults.changed))
FROM tblTraces
    LEFT JOIN tblResults
    ON tblTraces.traceid = tblResults.traceid
WHERE tblTraces.enabled = 1
AND tblResults.traceid.changed = 1
GROUP BY tblTraces.traceid 
```

列的限制确实使连接复杂化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T21:14:58.050

目前尚不清楚您是否需要对这些（每条迹线限制为 20 个）结果或实际结果进行计数。仅用于计数，有一个简单的方法：

```
 SELECT t.traceid,
         LEAST(COUNT(*),20) AS cnt
  FROM tblTraces AS t
    JOIN tblResults AS r
      ON r.traceid = t.traceid
  WHERE t.enabled = 1
    AND r.changed = 1
  GROUP BY t.traceid ; 
```

在**[SQL-Fiddle中进行测试](http://sqlfiddle.com/#!2/2a04f/9)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T20:54:45.923

在 MySQL 中，没有简单的方法可以做到这一点。在其他数据库中，您只需使用`row_number()`，但它不可用。

这是一种方法，假设`resultId`每一行都是唯一的：

```
select t.traceId, count(changed)
from (select traceid, ResultId, changed,
             (select count(*) from tblResults r2 where r2.traceId = r.traceId and r2.ResultId >= r.ResultId and r2.changed = 1) as seqnum
      from tblResults r join
           tblTraces t
           on r.TraceId = t.TraceId and t.enabled = 1
      where r.changed = 1
    ) t
where seqnum <= 20
group by traceId 
```

如果您不想要这个`traceid`并且只想要总计数，那么删除`group by`并将 更改`select`为`count(changed)`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T20:33:44.720

你能像这样做一个内部连接吗

```
select count(traceid)
  from tblResults a inner join tblTraces b on a.traceid = b.traceid
   and b.enabled = 1
   and a.changed = 1 
```

还是我在这里错过了其他东西？

# java - KeyEvent 没有触发？

> ID：15591607
> 
> 赞同：2
> 
> 时间：2013-03-23T20:18:54.230
> 
> 标签：java, swing, keylistener, keyevent

我有一个类 World 如下：

```
public class World extends JFrame implements KeyListener {
    public boolean left = false, right = false, back = false, fwd = false;

    public World() {
        this.setSize(600, 600);
        this.setVisible(true);
    }

    @Override
    public void keyPressed(KeyEvent e) {
        if(e.getExtendedKeyCode() == KeyEvent.VK_LEFT) left = true;
        if(e.getExtendedKeyCode() == KeyEvent.VK_RIGHT) right = true;
        if(e.getExtendedKeyCode() == KeyEvent.VK_UP) fwd= true;
        if(e.getExtendedKeyCode() == KeyEvent.VK_DOWN) back = true;
        System.out.println("L:"+left+" R:"+right+" F:"+fwd+" B:"+back);
    }

    @Override
    public void keyReleased(KeyEvent e) {
        if(e.getExtendedKeyCode() == KeyEvent.VK_LEFT) left = false;
        if(e.getExtendedKeyCode() == KeyEvent.VK_RIGHT) right = false;
        if(e.getExtendedKeyCode() == KeyEvent.VK_UP) fwd= false;
        if(e.getExtendedKeyCode() == KeyEvent.VK_DOWN) back = false;
        System.out.println("L:"+left+" R:"+right+" F:"+fwd+" B:"+back);
    }

    @Override
    public void keyTyped(KeyEvent e) {}
} 
```

理论上，这应该在按键或按键释放时触发，但是，它不会。框架中的组件绘制正确。

框架被实例化如下：

```
World m = new World();
m.getContentPane().setBackground(Color.BLACK); 
```

我似乎无法让关键听众开火。没有系统输出。有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T20:22:14.033

除了不添加`KeyListener`,`JFrame`默认情况下不可聚焦，因此不会发送`KeyEvents`到窗口 -`KeyEvents`它们本身需要焦点才能工作。`KeyStrokes`出于这个原因，在 Swing 中进行交互的首选方式是使用在没有组件焦点的情况下工作的[键绑定。](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-23T20:20:39.563

不，您正在实现接口 - 但从不告诉任何重要的事情。

你可以在你的构造函数中这样写：

```
addKeyListener(this); 
```

...我相信那会做正确的事。*基本上*，必须添加按键监听器。仅仅实现接口并不会自动使任何东西开始使用该实现。

# jquery - 使用 CSS3/JS 的 SVG 径向擦除动画

> ID：15591614
> 
> 赞同：4
> 
> 时间：2013-03-23T20:19:43.467
> 
> 标签：jquery, animation, svg, svg-animate

如何在 CSS3 或 JS 中实现径向擦除动画？这似乎很简单，但我无法弄清楚。 ![径向擦拭](../Images/79afca5d1e95859e5a04248697fda02a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-24T21:04:02.057

这是使用 jQuery 的基本方法。可能有可用的插件可以简化这一点。

[JSFiddle 演示](http://jsfiddle.net/Matt_Coughlin/j3Bhz/5/)

**HTML**

```
<svg xmlns="http://www.w3.org/2000/svg"
     xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">

    <!-- 0 degrees arc -->
    <path d="M100,100 v-100 a100,100 0 0,1 0,0 z"
          id="circle-wipe" fill="#999" stroke-width="0" />
</svg> 
```

**CSS**

```
svg {
    width: 200px;
    height: 200px;
} 
```

**jQuery**

```
// Utility function for drawing the circle arc

function drawCircleArc(elem, angle) {
    var endAngleDeg = angle - 90;
    var endAngleRad = (endAngleDeg * Math.PI) / 180;
    var largeArcFlag = (angle < 180 ? '0' : '1');

    var endX = Math.cos(endAngleRad) * 100;
    var endY = 100 + (Math.sin(endAngleRad) * 100);

    var data = 'M100,100 v-100 a100,100 0 ' + largeArcFlag + ',1 ' +
                endX + ',' + endY + ' z';

    $(elem).attr('d', data);
}

// Code for running the animation

var arcAngle = 0;        // Starts at 0, ends at 360
var arcAngleBy = 10;     // Degrees per frame
var arcAngleDelay = 50;  // Duration of each frame in msec

function updateCircleWipe() {
    arcAngle += arcAngleBy;

    drawCircleArc('#circle-wipe', arcAngle);

    if (arcAngle < 360) {
        setTimeout(function(){ updateCircleWipe(); }, arcAngleDelay);
    }
}

setTimeout(function(){ updateCircleWipe(); }, arcAngleDelay); 
```

**也可以看看：**

*   [SVG 路径](http://www.w3schools.com/svg/svg_path.asp)   (w3schools.com)
*   [路径](http://www.w3.org/TR/SVG/paths.html)   (w3.org)

# python - python/jython 等真的没有基于事件的所见即所得 Gui 构建器吗

> ID：15591618
> 
> 赞同：0
> 
> 时间：2013-03-23T20:19:52.263
> 
> 标签：python, wysiwyg

我现在正在寻找一个月并且变得非常沮丧。

我只是喜欢蟒蛇。

所以在做了很多基于控制台的东西之后，我也想做一些图形用户界面。

我知道大多数框架（wxpython、glade、tk 等）。

但是：我不想**手动**为 GUI 本身编写代码！手动声明每个元素，考虑网格并进行跟踪和错误，以找出您必须移动对象多少像素才能将其放置在正确的位置。好吧，可以说这对我来说听起来像是 1990 年代，而且一点也不好玩。

因此，简单地说，我正在寻找的是一种解决方案，它允许我以图形方式设计 GUI（所见即所得）并具有基于事件的 python 代码链接。

几乎所有主要语言都具有这一点：对于 C/C++，它们肯定是可以做到这一点的大多数 IDE/工具。对于Java，有带有Wwing的Netbeans（我想要的示例；如果Netbeans中的UI设计器可以吐出jython代码，那将是理想的，但不能：支持python但不支持UIdesign）。甚至 Mono/Visual Basic 等也有类似的工具。

那么为什么他们对python一无所获？

PS 请不要发表评论，例如“如果您是真正的程序员，您可以手动完成以获取更清晰的代码”。如果我想要一些非常具体的东西，我会手动编辑它，但手动设计标准 UI 是浪费时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T20:41:43.817

取决于您要使用的 GUI 框架。三个最流行的框架和流行的图形设计师是：

1.  [Qt Designer](http://qt.digia.com/Product/Developer-Tools/) — 用于[PyQt](http://www.riverbankcomputing.com/software/pyqt/)或[PySide](http://qt-project.org/wiki/PySide)
2.  [wxFormBuilder](http://sourceforge.net/projects/wxformbuilder/) , [wxGlade](http://wxglade.sourceforge.net/) , [Boa 构造](http://boa-constructor.sourceforge.net/)器——用于[wxPython](http://www.wxpython.org/)
3.  [Glade——](http://glade.gnome.org/)用于[PyGTK](http://www.pygtk.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:24:29.500

那么有[pyQT](http://www.riverbankcomputing.co.uk/software/pyqt/intro)

您可以查看[Qt Designer](http://diotavelli.net/PyQtWiki/Creating_GUI_Applications_with_PyQt_and_Qt_Designer)

只是对您的请求的评论，不，并非所有`real`程序员都自己编写 GUI 代码，但请尝试一下，它很有教育意义，让您更好地了解正在发生的事情。现在对 html 使用所见即所得编辑器不是很常见，是吗？（这不是修辞）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:35:29.427

请参阅[Glade](http://glade.gnome.org/)，尤其是与[libglade Python 绑定一起](http://www.jamesh.id.au/software/libglade/)使用时。

# arrays - 如何使用指针间接从函数返回（动态分配的）数组？

> ID：15591619
> 
> 赞同：0
> 
> 时间：2013-03-23T20:19:52.517
> 
> 标签：arrays, malloc

抱歉，我今天大部分时间都在尝试解决可能是简单的指针问题，想知道是否有人可以提供帮助。

我想要一个将数字和数组返回给 main() 的函数，因此需要对其中至少一个使用指针。数组必须在函数内部动态分配。

我试图以简化的形式在下面展示我的最佳尝试。我只是得到“分段错误”。

```
double my_func(double **ptr);

int main(int argc, char **argv){
  double value;
  double *a;
  value = my_func(&a);

  printf("Value is %f array[1] is %f \n", value, a[1]);
  return 0;
}

double my_func(double **ptr){
  int i;
  /* generate an array */
  void *memory = malloc(10*sizeof(double));

  if (memory == NULL){
    printf("ERROR: out of memory\n");
  }

  *ptr = (double *) memory;

  /* Fill the array with some values */
  for (i=0;i<10;i++)
  {
    **(ptr+i) = 42;
  }

  return 3.14;
} 
```

[这样做的原因是我有一个读取文件的函数，我想将行数和包含文件内容的数组返回给 main()。我希望它动态分配数组，以便程序可以对任何大小的文件进行操作。]

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:34:40.127

您将以下行添加 i 到变量 a 的地址：

```
**(ptr+i) = 42; 
```

要将 i 添加到 malloced 地址，您需要首先取消引用 ptr：

```
*(*ptr+i) = 42; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:45:53.980

除了@ygram 的答案，我发现它有助于`my_func`通过使用辅助变量来简化分配函数（在示例中）中的事情：

```
double myfunc(double **a_dp) {
    int i;
    double *dp;

    dp = malloc(10 * sizeof *dp);
    /* no cast required for malloc in C, but make sure you #include <stdlib.h> */

    if (dp == NULL) {
        ... handle error ...
    }

    *a_dp = dp;

    for (i = 0; i < 10; i++)
        dp[i] = 42;

    return 3.14;
} 
```

也就是说，您不必重复编写`*(*ptr + index)`or `(*ptr)[index]`，而是创建一个局部变量来保存您还将存储到的值——这里`*ptr`我称之为局部变量`dp`——然后你只需`dp`在本地使用，除了（一个，有时是几个) 必须存储该值的位置，以便您的调用者接收它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T21:09:23.250

数组和数字有什么关系？为简单起见，将它们放在一个结构中不是更好，这真的有助于清理这里的东西。

```
typedef struct ArrayStruct {
    double num;
    long len; // ideal place to store the array length for future bounds checking!
    double *array;
} ArrayStruct;

int main(int argc, char **argv) {

    ArrayStruct myArray = {0};
    myFunc(&myArray);

    printf("Value is %f array[1] is %f \n", myArray.num, myArray.array[1]);

    free(myArray.array);
    return 0;
}

void myFunc(ArrayStruct *s) {

    // Do whatever you like with the struct:
    s->len = 10;
    s->array = (double *)malloc(s->len * sizeof(double));

    for (int i=0; i< s->len; i++)
        s->array[1] = 42;

    s->num = 3.14;
} 
```

这样做意味着您无需担心返回任何内容或弄乱指针，只需在 main 中声明该结构，将引用传递给`myFunc()`您想要使用它的任何位置，然后根据需要更改数据。

抱歉，如果该代码中有任何错误，请快速输入，但无论如何它都应该说明这一点！

# python - 如何使用 Flask 检索会话数据？

> ID：15591620
> 
> 赞同：15
> 
> 时间：2013-03-23T20:19:57.897
> 
> 标签：python, flask, wtforms

我有烧瓶+wtforms 应用程序。我可以在 login() 用户对象中看到存储为

```
 if user:
   if user.verify_password(form.password.data):
    flash('You have been logged in')
    user.logins += 1

    db.session.add(History(user.uid))
    db.session.commit()

    session['user'] = user 
```

现在我想检索用户

```
if 'user' in session:
       User=session.get('user')
       print User.nickname ###<< how to retrieve specific object member? 
```

它失败并显示如下消息：

```
Instance <User at 0x8e5a64c> is not bound to a Session; attribute refresh operation cannot proceed 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-23T20:23:53.170

这很简单。如果您想检索特定对象，只需在会话中添加变量的名称，例如`session['nickname']`.

您可以以相同的方式设置变量，方法是`session['nickname'] = nickname`.

在您的情况下，您可以将其更改为以下

```
if 'user' in session:
    user = session['user']
    print user

if 'nickname' in session:
    nickname = session['nickname']
    print nickname 
```

这是我用于登录的功能的简化版本。

```
@app.route('/login', methods=['POST'])
def login():
    """Authenticate User"""
    username = request.form['username'].strip()
    nickname = request.form['nickname'].strip()
    password = request.form['password']
    try:
        if Auth().VerifyLogin(username, password):
            session['username'] = username
            session['nickname'] = nickname
        else:
            # failed to login, do something.
    except Exception as why:
        app.logger.critical('.....') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-17T10:51:30.200

要查看会话中的所有内容，您可以`print(session)`。你应该得到这样的回应

`<SecureCookieSession {'_flashes': [('info', 'Duplication is not allowed ')], 'el1-s': 'Physics', 'el1grade-s': 'B2', 'el2-s': 'E-Maths', 'el2grade-s': 'A1', 'english-s': 'A1', 'mathematics-s': 'A1', 'science-s': 'A1', 'social-s': None}>`

# java - 如何在一个 TableRow 中显示两个字符串？

> ID：15591621
> 
> 赞同：0
> 
> 时间：2013-03-23T20:20:01.530
> 
> 标签：java, android, xml, eclipse, string

我的源代码中有两个值（来自 TimePicker 按钮的 currentHour 和 currentMinute），我想将它们组合成一个字符串，我可以在 xml 布局中显示（12:30 而不是 12 和 30）我已经能够编译下面的代码，但我卡住了，它的强制关闭，我需要一些帮助：我想做的就是添加一些代码将 currentHour 和 currentMinute 组合成一个字符串，这样我就可以调用时间稍后从 xml 布局中的 TimePicker 获取。

```
import android.app.Activity;
import android.app.AlertDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.ViewGroup;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.TimePicker;

public class AddEditCountry extends Activity {

    private long rowID; 
    private EditText nameEt;
    private EditText capEt;
    private EditText codeEt;
    private TimePicker timeEt;
    private TimePicker minEt;
    public static final String KEY_BUNDLE_TIME = "time";
    public static final String KEY_BUNDLE_MIN = "min";

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.add_country);

        nameEt = (EditText) findViewById(R.id.nameEdit);
        capEt = (EditText) findViewById(R.id.capEdit);
        codeEt = (EditText) findViewById(R.id.codeEdit);
        timeEt = (TimePicker) findViewById(R.id.timeEdit);
        //   minEt = (TimePicker) findViewById(R.id.minEdit);

        Bundle extras = getIntent().getExtras(); 

        if (extras != null)
        {
            rowID = extras.getLong("row_id");
            nameEt.setText(extras.getString("name"));  
            capEt.setText(extras.getString("cap"));  
            codeEt.setText(extras.getString("code"));
            timeEt.setCurrentHour(extras.containsKey(KEY_BUNDLE_TIME) ? extras.getInt(KEY_BUNDLE_TIME) : 0);
            minEt.setCurrentMinute(extras.getInt("min"));
        }

        Button saveButton =(Button) findViewById(R.id.saveBtn);
        saveButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) 
            {
                if (nameEt.getText().length() != 0)
                {
                    AsyncTask<Object, Object, Object> saveContactTask = new AsyncTask<Object, Object, Object>() 
                    {
                        @Override
                        protected Object doInBackground(Object... params) 
                        {
                            saveContact();
                            return null;
                        }

                        @Override
                        protected void onPostExecute(Object result) 
                        {
                            finish();
                        }
                    }; 

                    saveContactTask.execute((Object[]) null); 
                }

                else
                {
                    AlertDialog.Builder alert = new AlertDialog.Builder(AddEditCountry.this);
                    alert.setTitle(R.string.errorTitle); 
                    alert.setMessage(R.string.errorMessage);
                    alert.setPositiveButton(R.string.errorButton, null); 
                    alert.show();
                }
            } 
        });
    }

    private void saveContact() 
    {
        DatabaseConnector dbConnector = new DatabaseConnector(this);

        if (getIntent().getExtras() == null)
        {
            dbConnector.insertContact(nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString(),
                          minEt.getCurrentMinute().toString(),
                          codeEt.getText().toString());
        }
        else
        {
            dbConnector.updateContact(rowID,
                          nameEt.getText().toString(),
                          capEt.getText().toString(),
                          timeEt.getCurrentHour().toString(),
                          minEt.getCurrentMinute().toString(),/* Storing as String*/
                          codeEt.getText().toString());
        }
    }
} 
```

**数据库连接器 (.java)**

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;

public class DatabaseConnector {

    public static final String KEY_BUNDLE_TIME = "time";
    public static final String KEY_BUNDLE_MIN = "min";
    private static final String DB_NAME = "WorldCountries";
    private SQLiteDatabase database;
    private DatabaseOpenHelper dbOpenHelper;

    public DatabaseConnector(Context context) {
        dbOpenHelper = new DatabaseOpenHelper(context, DB_NAME, null, 1);
    }

    public void open() throws SQLException 
    {
        //open database in reading/writing mode
        database = dbOpenHelper.getWritableDatabase();
    } 

    public void close() 
    {
        if (database != null)
            database.close();
    }      

    public void insertContact(String name, String cap, String code, String time, String min) 
    {
        ContentValues newCon = new ContentValues();
        newCon.put("name", name);
        newCon.put("cap", cap);
        newCon.put("time", time);
        newCon.put("min", min);
        newCon.put("code", code);
        newCon.put(AddEditCountry.KEY_BUNDLE_TIME, time);
        newCon.put(AddEditCountry.KEY_BUNDLE_MIN, min);

        open();
        database.insert("country", null, newCon);
        close();
    }

    public void updateContact(long id, String name, String cap,String code, String time, String min) 
    {
        ContentValues editCon = new ContentValues();
        editCon.put("name", name);
        editCon.put("cap", cap);
        editCon.put("time", time);
        editCon.put("min", min);
        editCon.put("code", code);
        editCon.put(AddEditCountry.KEY_BUNDLE_TIME, time);
        editCon.put(AddEditCountry.KEY_BUNDLE_MIN, min);
        open();
        database.update("country", editCon, "_id=" + id, null);
        close();
    }

    public Cursor getAllContacts() 
    {
        return database.query("country", new String[] {"_id", "name"}, 
                     null, null, null, null, "name");
    }

    public Cursor getOneContact(long id) 
    {
        return database.query("country", null, "_id=" + id, null, null, null, null);
    }

    public void deleteContact(long id) 
    {
        open(); 
        database.delete("country", "_id=" + id, null);
        close();
    }
} 
```

**日志猫：**

```
03-24 00:48:57.779: D/Activity(6809): Activity.onPause(), editTextTapSensorList size: 0
03-24 00:48:57.959: I/Adreno200-EGLSUB(6809): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-24 00:48:57.959: D/memalloc(6809): ion: Mapped buffer base:0x5ca41000 size:614400 offset:0 fd:54
03-24 00:48:58.049: D/memalloc(6809): ion: Mapped buffer base:0x5dc22000 size:614400 offset:0 fd:75
03-24 00:48:58.079: D/memalloc(6809): ion: Mapped buffer base:0x5dcb8000 size:614400 offset:0 fd:78
03-24 00:48:58.079: D/memalloc(6809): ion: Unmapping buffer  base:0x5d4ce000 size:614400
03-24 00:48:58.079: D/memalloc(6809): ion: Unmapping buffer  base:0x5d6f7000 size:614400
03-24 00:48:58.079: D/memalloc(6809): ion: Unmapping buffer  base:0x5c929000 size:614400
03-24 00:49:10.623: W/dalvikvm(6809): threadid=12: thread exiting with uncaught exception (group=0x410889d8)
03-24 00:49:10.643: E/AndroidRuntime(6809): FATAL EXCEPTION: AsyncTask #2
03-24 00:49:10.643: E/AndroidRuntime(6809): java.lang.RuntimeException: An error occured while executing doInBackground()
03-24 00:49:10.643: E/AndroidRuntime(6809):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.lang.Thread.run(Thread.java:856)
03-24 00:49:10.643: E/AndroidRuntime(6809): Caused by: java.lang.NullPointerException
03-24 00:49:10.643: E/AndroidRuntime(6809):     at com.nfc.linkingmanager.AddEditCountry.saveContact(AddEditCountry.java:101)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at com.nfc.linkingmanager.AddEditCountry.access$1(AddEditCountry.java:92)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at com.nfc.linkingmanager.AddEditCountry$1$1.doInBackground(AddEditCountry.java:65)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
03-24 00:49:10.643: E/AndroidRuntime(6809):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-24 00:49:10.643: E/AndroidRuntime(6809):     ... 5 more
03-24 00:49:10.663: D/Activity(6809): Activity.onPause(), editTextTapSensorList size: 0
03-24 00:49:10.693: I/Adreno200-EGLSUB(6809): <ConfigWindowMatch:2165>: Format RGBA_8888.
03-24 00:49:10.693: D/memalloc(6809): ion: Mapped buffer base:0x5d4cb000 size:614400 offset:0 fd:57
03-24 00:49:10.713: D/memalloc(6809): ion: Mapped buffer base:0x5d8f7000 size:614400 offset:0 fd:68
03-24 00:49:10.753: D/memalloc(6809): ion: Mapped buffer base:0x5e14e000 size:614400 offset:0 fd:72
03-24 00:49:10.753: D/memalloc(6809): ion: Unmapping buffer  base:0x5ca41000 size:614400
03-24 00:49:10.753: D/memalloc(6809): ion: Unmapping buffer  base:0x5dc22000 size:614400
03-24 00:49:10.753: D/memalloc(6809): ion: Unmapping buffer  base:0x5dcb8000 size:614400 
```

# php - 使用 $_GET 获取我的链接的 id

> ID：15591624
> 
> 赞同：0
> 
> 时间：2013-03-23T20:20:18.413
> 
> 标签：php, get

可以说我有一个这样的链接

[http://www.example.com/d8ed54](http://www.example.com/d8ed54)

d8ed54 是 id

我如何使用 $_GET 来回显 id

谢谢

**更新........**

在我的情况下，不可能使用 .htaccess RewriteRule，因为它已经为所有脚本链接提供了一个..我无法使用它。

但是链接[http://www.example.com/d8ed54](http://www.example.com/d8ed54)将在没有 404的情况下工作

我需要一些 php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:23:44.427

将以下内容放入 htaccess

```
RewriteRule (.*) index.php?id=$1 
```

然后你可以`$_GET['id']`用来获取 / 之后传递的任何内容

您也可以在没有 $_GET 并且没有任何额外添加到您的 htaccess 的情况下执行此操作，您可以使用它`$_SERVER['REQUEST_URI']`来获取相同的信息。

```
$id = $_SERVER['REQUEST_URI']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:28:05.363

不使用 mod_rewrite Apache（假设您使用 Apache）将查找名为 d8ed54 的文件或目录。恐怕没有 mod_rewrite 就无法完成。

# jquery - KendoUI Grid 十进制数列

> ID：15591628
> 
> 赞同：19
> 
> 时间：2013-03-23T20:20:36.277
> 
> 标签：jquery, kendo-ui, telerik, kendo-grid

我有一列重量（以公斤为单位）。当用户单击它时，我需要使他们能够输入 3 位的十进制数。

我遇到的问题是目前它只允许他们把它放在 2 个地方，但显示为 3 个地方。您可以输入一个数字到许多小数位，但保存时会将其四舍五入到 2 位。

我的专栏是这样设置的：

```
...
{
        field: "weight",
        title: "Weight",
        width: 40,
        format: "n4",
        decimals: 4,
        step: 0.001,
        template: "#= weight.toFixed(3)+'kg' #"
}
... 
```

我已经尝试了一些东西，但没有任何工作。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-03-24T19:04:13.590

几个问题（afaik）：

1.  列中的格式未定义为，`n4`而是定义为`{0:n4}`.
2.  格式不仅适用于数字的格式，还可能包含一些文本。前任：`{0:n4} Kg.`
3.  对于数字列，不能将属性指定为`decimals`，`step`因此您应该定义一个编辑器函数。

另外，我不明白你的小数和四舍五入的问题。

我建议将列定义为：

```
{
    field: "weight",
    title: "Weight",
    width: 40,
    editor: numberEditor,
    format: '{0:n3} Kg.'
} 
```

（假设您想要三位小数精度）并定义`numberEditor`为：

```
function numberEditor(container, options) {
    $('<input name="' + options.field + '"/>')
            .appendTo(container)
            .kendoNumericTextBox({
                format  : "{0:n3}",
                decimals: 3,
                step    : 0.001
            });
} 
```

# java - 解析从蓝牙 HDP 设备接收到的原始数据

> ID：15591637
> 
> 赞同：6
> 
> 时间：2013-03-23T20:21:32.200
> 
> 标签：java, android, bluetooth

我正在尝试从经 continua 健康联盟认证的 Omron 708-BT 血压计读取数据。我正在关注这个[蓝牙 HDP 应用程序的](https://github.com/james11/BluetoothHDPActivity/tree/3f64bf701fbbfa51cbc3472d5826a7b1c6957ad4/src/com/larc/bluetooth/health)示例。我正在设法连接到设备并以字节格式检索数据，但无法解析数据以获取所需的值。[我正在尝试遵循本PDF](http://www.telemedicina.ufsc.br/padroes/images/11073_10407_2008.pdf)第 19 页指定的 IEEE 血压规范。

这是已添加到上面链接的示例代码中的代码。

```
//Variables in the class
private int count;
private byte[] invoke = {0x00, 0x00};
private class ReadThread extends Thread {
    private ParcelFileDescriptor mFd;

    public ReadThread(ParcelFileDescriptor fd) {
        super();
        mFd = fd;
    }

    @Override
    public void run() {
        FileInputStream fis = new FileInputStream(mFd.getFileDescriptor());
        final byte data[] = new byte[300];
        try {
            while(fis.read(data) > -1) {
                // At this point, the application can pass the raw data to a parser that
                // has implemented the IEEE 11073-xxxxx specifications.  Instead, this sample
                // simply indicates that some data has been received
                Log.e("Test", data.toString()); 

                 if (data[0] != (byte) 0x00)
                 {
                     String test = byte2hex(data);
                     Log.i(TAG, test);
                     if(data[0] == (byte) 0xE2){
                         Log.i(TAG, "E2");
                         count = 1;

                         (new WriteThread(mFd)).start();
                         try {
                             sleep(100);
                         } catch (InterruptedException e) {
                             e.printStackTrace();
                         }
                         Log.i(TAG, "Seconds Write Thread");
                         count = 2;
                         (new WriteThread(mFd)).start();
                     }
                     else if (data[0] == (byte)0xE7){
                         Log.i(TAG, "E7");

                         count = 3; 
                         //set invoke id so get correct response
                         invoke = new byte[] { data[6], data[7] };
                         (new WriteThread(mFd)).start();     
                         //parse data!!
                         int number_of_data_packets = data[25];
                         int packet_start = 30;
                         final int SYS_DIA_MAP_DATA = 1;
                         final int PULSE_DATA = 2;
                         final int ERROR_CODE_DATA = 3;

                         for (int i = 0; i < number_of_data_packets; i++){
                                Log.e("TEST", Integer.toString(i));
                               int obj_handle = data[packet_start+1];
                               switch (obj_handle)
                               {
                               case SYS_DIA_MAP_DATA:
                                   int sys = byteToUnsignedInt(data[packet_start+9]);
                                   int dia = byteToUnsignedInt(data[packet_start+11]);
                                   int map = byteToUnsignedInt(data[packet_start+13]);
                                   //create team string... 9+13~9+20   
                                   Log.e("RESULT", "sys is "+ sys);
                                   sendMessage(RECEIVED_SYS, sys);
                                   Log.e("RESULT", "dia is "+ dia);
                                   sendMessage(RECEIVED_DIA, dia);
                                   Log.e("RESULT", "map is "+ map);

                                   break;
                               case PULSE_DATA:
                                   //parse
                                   int pulse = byteToUnsignedInt(data[packet_start+5]);
                                   Log.e("RESULT", "pulse is " + pulse);
                                   sendMessage(RECEIVED_PUL, pulse);
                                   break;
                               case ERROR_CODE_DATA:
                                   //need more signal
                                   break;
                               }
                               packet_start += 1;//4 + data[packet_start+3];   //4 = ignore beginning four bytes
                           }  
                     }
                     else if (data[0] == (byte) 0xE4)
                     {

                         count = 4;
                         (new WriteThread(mFd)).start();
                     }
                     //zero out the data
                     for (int i = 0; i < data.length; i++){
                         data[i] = (byte) 0x00;
                     }
                 }
                 sendMessage(STATUS_READ_DATA, 0);
            }
        } catch(IOException ioe) {}
        if (mFd != null) {
            try {
                mFd.close();
            } catch (IOException e) { /* Do nothing. */ }
        }
        sendMessage(STATUS_READ_DATA_DONE, 0);
    }
}

private class WriteThread extends Thread {
    private ParcelFileDescriptor mFd;

    public WriteThread(ParcelFileDescriptor fd) {
        super();
        mFd = fd;
    }

    @Override
    public void run() {
        FileOutputStream fos = new FileOutputStream(mFd.getFileDescriptor());
        final byte data_AR[] = new byte[] {         (byte) 0xE3, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x2C, 
                                                    (byte) 0x00, (byte) 0x00,
                                                    (byte) 0x50, (byte) 0x79,
                                                    (byte) 0x00, (byte) 0x26,
                                                    (byte) 0x80, (byte) 0x00, (byte) 0x00, (byte) 0x00,
                                                    (byte) 0x80, (byte) 0x00,
                                                    (byte) 0x80, (byte) 0x00, (byte) 0x00, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00,
                                                    (byte) 0x80, (byte) 0x00, (byte) 0x00, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x08,  //bt add for phone, can be automate in the future
                                                    (byte) 0x3C, (byte) 0x5A, (byte) 0x37, (byte) 0xFF, 
                                                    (byte) 0xFE, (byte) 0x95, (byte) 0xEE, (byte) 0xE3,
                                                    (byte) 0x00, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x00, 
                                                    (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00};
        final byte data_DR[] = new byte[] {         (byte) 0xE7, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x12,
                                                    (byte) 0x00, (byte) 0x10,
                                                    (byte) invoke[0], (byte) invoke[1],
                                                    (byte) 0x02, (byte) 0x01,
                                                    (byte) 0x00, (byte) 0x0A,
                                                    (byte) 0x00, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00,
                                                    (byte) 0x0D, (byte) 0x1D,
                                                    (byte) 0x00, (byte) 0x00 };

        final byte get_MDS[] = new byte[] {         (byte) 0xE7, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x0E,
                                                    (byte) 0x00, (byte) 0x0C,
                                                    (byte) 0x00, (byte) 0x24,
                                                    (byte) 0x01, (byte) 0x03,
                                                    (byte) 0x00, (byte) 0x06,
                                                    (byte) 0x00, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x00 };

        final byte data_RR[] = new byte[] {         (byte) 0xE5, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x02,
                                                    (byte) 0x00, (byte) 0x00 };

        final byte data_RRQ[] = new byte[] {        (byte) 0xE4, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x02,
                                                    (byte) 0x00, (byte) 0x00 };

        final byte data_ABORT[] = new byte[] {      (byte) 0xE6, (byte) 0x00,
                                                    (byte) 0x00, (byte) 0x02,
                                                    (byte) 0x00, (byte) 0x00 };
        try {
            Log.i(TAG, String.valueOf(count));
            if (count == 1)
            {
                fos.write(data_AR);
                Log.i(TAG, "Association Responded!");
            }  
            else if (count == 2)
            {
                fos.write(get_MDS);
                Log.i(TAG, "Get MDS object attributes!");
            }
            else if (count == 3) 
            {
                fos.write(data_DR);
                Log.i(TAG, "Data Responsed!");
            }
            else if (count == 4)
            {
                fos.write(data_RR);
                Log.i(TAG, "Data Released!");
            }
        } catch(IOException ioe) {}
    } 
```

数据的十六进制表示如下。我相信这些数据包含血压值的值，但可能是错误的。我相信这是因为在上面链接的 PDF 中，数据将以十六进制值 e7 开头。

> 03-23 20:14:44.186: I/BluetoothHDPService(23652):

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-08-01T13:11:21.233

我设法解决了这个问题。我遇到的主要问题是我只读取了一次血压读数然后一直按上传。这确实上传了一些关于显示器的信息，但不包括血压读数。一旦我知道这一点，我就有许多其他较小的错误要解决，但没有什么太复杂的。最终工作服务的代码如下。

```
public class BluetoothHDPService extends Service {
    private static final String TAG = "BluetoothHDPService";

    public static final int RESULT_OK = 0;
    public static final int RESULT_FAIL = -1;

    // Status codes sent back to the UI client.
    // Application registration complete.
    public static final int STATUS_HEALTH_APP_REG = 100;
    // Application unregistration complete.
    public static final int STATUS_HEALTH_APP_UNREG = 101;
    // Channel creation complete.
    public static final int STATUS_CREATE_CHANNEL = 102;
    // Channel destroy complete.
    public static final int STATUS_DESTROY_CHANNEL = 103;
    // Reading data from Bluetooth HDP device.
    public static final int STATUS_READ_DATA = 104;
    // Done with reading data.
    public static final int STATUS_READ_DATA_DONE = 105;

    // Message codes received from the UI client.
    // Register client with this service.
    public static final int MSG_REG_CLIENT = 200;
    // Unregister client from this service.
    public static final int MSG_UNREG_CLIENT = 201;
    // Register health application.
    public static final int MSG_REG_HEALTH_APP = 300;
    // Unregister health application.
    public static final int MSG_UNREG_HEALTH_APP = 301;
    // Connect channel.
    public static final int MSG_CONNECT_CHANNEL = 400;
    // Disconnect channel.
    public static final int MSG_DISCONNECT_CHANNEL = 401;

    public static final int RECEIVED_SYS = 901;

    public static final int RECEIVED_DIA = 902;

    public static final int RECEIVED_PUL = 903;

    private int count;
    private byte[] invoke = {0x00, 0x00};

    private BluetoothHealthAppConfiguration mHealthAppConfig;
    private BluetoothAdapter mBluetoothAdapter;
    private BluetoothHealth mBluetoothHealth;
    private BluetoothDevice mDevice;
    private int mChannelId;

    private Messenger mClient;

    // Handles events sent by {@link HealthHDPActivity}.
    @SuppressLint("HandlerLeak")
    private class IncomingHandler extends Handler {
        @Override
        public void handleMessage(Message msg) {
            switch (msg.what) {
                // Register UI client to this service so the client can receive messages.
                case MSG_REG_CLIENT:
                    Log.d(TAG, "Activity client registered");
                    mClient = msg.replyTo;
                    break;
                // Unregister UI client from this service.
                case MSG_UNREG_CLIENT:
                    mClient = null;
                    break;
                // Register health application.
                case MSG_REG_HEALTH_APP:
                    registerApp(msg.arg1);
                    break;
                // Unregister health application.
                case MSG_UNREG_HEALTH_APP:
                    unregisterApp();
                    break;
                // Connect channel.
                case MSG_CONNECT_CHANNEL:
                    mDevice = (BluetoothDevice) msg.obj;
                    connectChannel();
                    break;
                // Disconnect channel.
                case MSG_DISCONNECT_CHANNEL:
                    mDevice = (BluetoothDevice) msg.obj;
                    disconnectChannel();
                    break;
                default:
                    super.handleMessage(msg);
            }
        }
    }

    final Messenger mMessenger = new Messenger(new IncomingHandler());

    /**
     * Make sure Bluetooth and health profile are available on the Android device.  Stop service
     * if they are not available.
     */
    @SuppressLint("ShowToast")
    @Override
    public void onCreate() {
        super.onCreate();

        Log.e("TEST", "HDPService Created");

        mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        if (mBluetoothAdapter == null || !mBluetoothAdapter.isEnabled()) {
            // Bluetooth adapter isn't available.  The client of the service is supposed to
            // verify that it is available and activate before invoking this service.
            stopSelf();
            return;
        }
        if (!mBluetoothAdapter.getProfileProxy(this, mBluetoothServiceListener,
                BluetoothProfile.HEALTH)) {
            Toast.makeText(this, "bluetooth_health_profile_not_available", 
                    Toast.LENGTH_LONG);
            stopSelf();
            return;
        }
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.d(TAG, "BluetoothHDPService is running.");
        return START_STICKY;
    }

    @Override
    public IBinder onBind(Intent intent) {
        return mMessenger.getBinder();
    };

    // Register health application through the Bluetooth Health API.
    private void registerApp(int dataType) {
        Log.e(TAG, "registerApp()");
        mBluetoothHealth.registerSinkAppConfiguration(TAG, dataType, mHealthCallback);
    }

    // Unregister health application through the Bluetooth Health API.
    private void unregisterApp() {
        Log.e(TAG, "unregisterApp()");
        mBluetoothHealth.unregisterAppConfiguration(mHealthAppConfig);
    }

    // Connect channel through the Bluetooth Health API.
    private void connectChannel() {
        Log.i(TAG, "connectChannel()");
        mBluetoothHealth.connectChannelToSource(mDevice, mHealthAppConfig);
    }

    // Disconnect channel through the Bluetooth Health API.
    private void disconnectChannel() {
        Log.i(TAG, "disconnectChannel()");
        mBluetoothHealth.disconnectChannel(mDevice, mHealthAppConfig, mChannelId);
    }

    // Callbacks to handle connection set up and disconnection clean up.
    private final BluetoothProfile.ServiceListener mBluetoothServiceListener =
            new BluetoothProfile.ServiceListener() {
        public void onServiceConnected(int profile, BluetoothProfile proxy) {
            if (profile == BluetoothProfile.HEALTH) {
                mBluetoothHealth = (BluetoothHealth) proxy;
                if (Log.isLoggable(TAG, Log.DEBUG))
                    Log.d(TAG, "onServiceConnected to profile: " + profile);
            }
        }

        public void onServiceDisconnected(int profile) {
            if (profile == BluetoothProfile.HEALTH) {
                mBluetoothHealth = null;
            }
        }
    };

    private final BluetoothHealthCallback mHealthCallback = new BluetoothHealthCallback() {
        // Callback to handle application registration and unregistration events.  The service
        // passes the status back to the UI client.
        public void onHealthAppConfigurationStatusChange(BluetoothHealthAppConfiguration config,
                int status) {
            if (status == BluetoothHealth.APP_CONFIG_REGISTRATION_FAILURE) {
                mHealthAppConfig = null;
                sendMessage(STATUS_HEALTH_APP_REG, RESULT_FAIL);
            } else if (status == BluetoothHealth.APP_CONFIG_REGISTRATION_SUCCESS) {
                mHealthAppConfig = config;
                sendMessage(STATUS_HEALTH_APP_REG, RESULT_OK);
            } else if (status == BluetoothHealth.APP_CONFIG_UNREGISTRATION_FAILURE ||
                    status == BluetoothHealth.APP_CONFIG_UNREGISTRATION_SUCCESS) {
                sendMessage(STATUS_HEALTH_APP_UNREG,
                        status == BluetoothHealth.APP_CONFIG_UNREGISTRATION_SUCCESS ?
                        RESULT_OK : RESULT_FAIL);
            }
        }

        // Callback to handle channel connection state changes.
        // Note that the logic of the state machine may need to be modified based on the HDP device.
        // When the HDP device is connected, the received file descriptor is passed to the
        // ReadThread to read the content.
        public void onHealthChannelStateChange(BluetoothHealthAppConfiguration config,
                BluetoothDevice device, int prevState, int newState, ParcelFileDescriptor fd,
                int channelId) {

            Log.e("Read Thread", "Start If Statements");
            Log.e("Read Thread", "prevState: " + prevState);
            Log.e("Read Thread", "newState: " + newState);

            if (Log.isLoggable(TAG, Log.DEBUG))
                Log.d(TAG, String.format("prevState\t%d ----------> newState\t%d",
                        prevState, newState));

//            if (prevState != BluetoothHealth.STATE_CHANNEL_CONNECTED &&
//                    newState == BluetoothHealth.STATE_CHANNEL_CONNECTED) {

            if (prevState == BluetoothHealth.STATE_CHANNEL_DISCONNECTED &&
                    newState == BluetoothHealth.STATE_CHANNEL_CONNECTED) {
                if (config.equals(mHealthAppConfig)) {
                    mChannelId = channelId;
                    sendMessage(STATUS_CREATE_CHANNEL, RESULT_OK);
                    Log.e("Read Thread", "Read  Start 1");
                    (new ReadThread(fd)).start();
                } else {
                    Log.e("Read Thread", "Status Create Channel Fail 1");
                    sendMessage(STATUS_CREATE_CHANNEL, RESULT_FAIL);
                }
            } else if (prevState == BluetoothHealth.STATE_CHANNEL_CONNECTING &&
                       newState == BluetoothHealth.STATE_CHANNEL_DISCONNECTED) {
                sendMessage(STATUS_CREATE_CHANNEL, RESULT_FAIL);
                Log.e("Read Thread", "Status Create Channel Fail 2");
            } else if (newState == BluetoothHealth.STATE_CHANNEL_DISCONNECTED) {
                if (config.equals(mHealthAppConfig)) {
                    sendMessage(STATUS_DESTROY_CHANNEL, RESULT_OK);
                    Log.e("Read Thread", "Status Disconnect OK");
                } else {
                    sendMessage(STATUS_DESTROY_CHANNEL, RESULT_FAIL);
                    Log.e("Read Thread", "Status Disconnect FAIL");
                }
            }else if (prevState == BluetoothHealth.STATE_CHANNEL_CONNECTING && newState == BluetoothHealth.STATE_CHANNEL_CONNECTED) {
                if (config.equals(mHealthAppConfig)) {
                    mChannelId = channelId;
                    sendMessage(STATUS_CREATE_CHANNEL, RESULT_OK);
                    Log.e("Read Thread", "Read  Start 2");
                    (new ReadThread(fd)).start();
                } else {
                    sendMessage(STATUS_CREATE_CHANNEL, RESULT_FAIL);
                    Log.e("Read Thread", "Status Create Channel Fail 3");
                }
            }
        }
    };

    // Sends an update message to registered UI client.
    private void sendMessage(int what, int value) {
        if (mClient == null) {
            Log.d(TAG, "No clients registered.");
            return;
        }

        try {
            mClient.send(Message.obtain(null, what, value, 0));
        } catch (RemoteException e) {
            // Unable to reach client.
            e.printStackTrace();
        }
    }

    public String byte2hex(byte[] b){
     // String Buffer can be used instead
       String hs = "";
       String stmp = "";

       for (int n = 0; n < b.length; n++){
          stmp = (java.lang.Integer.toHexString(b[n] & 0XFF));

          if (stmp.length() == 1){
             hs = hs + "0" + stmp;
          }
          else{
             hs = hs + stmp;
          }
          if (n < b.length - 1){
             hs = hs + "";
          }
       }

       return hs;
    }

    public static int byteToUnsignedInt(byte b) {
        return 0x00 << 24 | b & 0xff;
    }

    public static int toInt(byte[] bytes) {
          int ret = 0;
          for (int i=0; i<4 && i<bytes.length; i++) {
            ret <<= 8;
            ret |= (int)bytes[i] & 0xFF;
          }
          return ret;
    }

    // Thread to read incoming data received from the HDP device.  This sample application merely
    // reads the raw byte from the incoming file descriptor.  The data should be interpreted using
    // a health manager which implements the IEEE 11073-xxxxx specifications.
    private class ReadThread extends Thread {
        private ParcelFileDescriptor mFd;

        public ReadThread(ParcelFileDescriptor fd) {
            super();
            mFd = fd;
        }

        @Override
        public void run() {
            Log.e("TEST", "Read Data 1");
            FileInputStream fis = new FileInputStream(mFd.getFileDescriptor());
            final byte data[] = new byte[200];
            Log.i(TAG, "Read Data 2");
            try {
                while(fis.read(data) > -1) {
                    // At this point, the application can pass the raw data to a parser that
                    // has implemented the IEEE 11073-xxxxx specifications.  Instead, this sample
                    // simply indicates that some data has been received.

                    Log.i(TAG, "INBOUND");
                    String test = byte2hex(data);
                    Log.i(TAG, test);

                     if (data[0] != (byte) 0x00)
                     {

                         if(data[0] == (byte) 0xE2){
                             Log.i(TAG, "E2 - Association Request");
                             count = 1;

                             (new WriteThread(mFd)).start();
                             try {
                                 sleep(100);
                             } catch (InterruptedException e) {
                                 e.printStackTrace();
                             }
                             count = 2;
                             (new WriteThread(mFd)).start();
                         }
                         else if (data[0] == (byte)0xE7){
                             Log.i(TAG, "E7 - Data Given");

                             if(data[3] != (byte)0xda){

                                 invoke[0] = data[6];
                                 invoke[1] = data[7];

                                    Log.i(TAG, "E7 - Reading?");
                                    ByteBuffer sys = ByteBuffer.allocate(2);
                                     sys.order(ByteOrder.LITTLE_ENDIAN);
                                     sys.put(data[45]);
                                     sys.put(data[46]);
                                     short sysVal = sys.getShort(0);
                                     Log.i(TAG, " Sys - "+sysVal);

                                    ByteBuffer dia = ByteBuffer.allocate(2);
                                     dia.order(ByteOrder.LITTLE_ENDIAN);
                                     dia.put(data[47]);
                                     dia.put(data[48]);
                                     short diaVal = dia.getShort(0);
                                     Log.i(TAG, " Dia - "+diaVal);

                                     sendMessage(9919, diaVal);
                                     sendMessage(9920, sysVal);

                                   for(int i=0; i<(data.length-2); i++){
                                     ByteBuffer bb = ByteBuffer.allocate(2);
                                     bb.order(ByteOrder.LITTLE_ENDIAN);
                                     bb.put(data[i]);
                                     bb.put(data[i+1]);
                                     short shortVal = bb.getShort(0);
                                     Log.i(TAG, i+" Short Val - "+shortVal);

                                 }

                                   count = 3; 
                                   //set invoke id so get correct response 
                                   (new WriteThread(mFd)).start();
                             }
                             //parse data!!
                         }
                         else if (data[0] == (byte) 0xE4)
                         {
                             //count = 4;
                            // (new WriteThread(mFd)).start();
                         }
                         //zero out the data
                         for (int i = 0; i < data.length; i++){
                             data[i] = (byte) 0x00;
                         }
                     }
                     sendMessage(STATUS_READ_DATA, 0);
                }
            } catch(IOException ioe) {}
            if (mFd != null) {
                try {
                    mFd.close();
                } catch (IOException e) { /* Do nothing. */ }
            }
            sendMessage(STATUS_READ_DATA_DONE, 0);
        }
    }

    private class WriteThread extends Thread {
        private ParcelFileDescriptor mFd;

        public WriteThread(ParcelFileDescriptor fd) {
            super();
            mFd = fd;
        }

        @Override
        public void run() {
            FileOutputStream fos = new FileOutputStream(mFd.getFileDescriptor());
            final byte data_AR[] = new byte[] {         (byte) 0xE3, (byte) 0x00,
                                                        (byte) 0x00, (byte) 0x2C, 
                                                        (byte) 0x00, (byte) 0x00,
                                                        (byte) 0x50, (byte) 0x79,
                                                        (byte) 0x00, (byte) 0x26,
                                                        (byte) 0x80, (byte) 0x00, (byte) 0x00, (byte) 0x00,
                                                        (byte) 0x80, (byte) 0x00,
                                                        (byte) 0x80, (byte) 0x00, (byte) 0x00, (byte) 0x00,
                                                        (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00,
                                                        (byte) 0x80, (byte) 0x00, (byte) 0x00, (byte) 0x00,
                                                        (byte) 0x00, (byte) 0x08,  //bt add for phone, can be automate in the future
                                                        (byte) 0x3C, (byte) 0x5A, (byte) 0x37, (byte) 0xFF, 
                                                        (byte) 0xFE, (byte) 0x95, (byte) 0xEE, (byte) 0xE3,
                                                        (byte) 0x00, (byte) 0x00,
                                                        (byte) 0x00, (byte) 0x00,
                                                        (byte) 0x00, (byte) 0x00, 
                                                        (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00};
            final byte data_DR[] = new byte[] {         (byte) 0xE7, (byte) 0x00,
                                                        (byte) 0x00, (byte) 0x12,
                                                        (byte) 0x00, (byte) 0x10,
                                                        (byte) 0x00, (byte) 0x24,
                                                        (byte) 0x02, (byte) 0x01,
                                                        (byte) 0x00, (byte) 0x0A,
                                                        (byte) 0x00, (byte) 0x00,
                                                        (byte) 0x00, (byte) 0x00, (byte) 0x00, (byte) 0x00,
                                                        (byte) 0x0D, (byte) 0x1D,
                                                        (byte) 0x00, (byte) 0x00 };

            final byte get_MDS[] = new byte[] {         (byte) 0xE7, (byte) 0x00,
                                                        (byte) 0x00, (byte) 0x0E,
                                                        (byte) 0x00, (byte) 0x0C,
                                                        (byte) 0x00, (byte) 0x24,
                                                        (byte) 0x01, (byte) 0x03,
                                                        (byte) 0x00, (byte) 0x06,
                                                        (byte) 0x00, (byte) 0x00,
                                                        (byte) 0x00, (byte) 0x00,
                                                        (byte) 0x00, (byte) 0x00 };

            final byte data_RR[] = new byte[] {         (byte) 0xE5, (byte) 0x00,
                                                        (byte) 0x00, (byte) 0x02,
                                                        (byte) 0x00, (byte) 0x00 };

//            final byte data_RRQ[] = new byte[] {        (byte) 0xE4, (byte) 0x00,
//                                                        (byte) 0x00, (byte) 0x02,
//                                                        (byte) 0x00, (byte) 0x00 };
//
//            final byte data_ABORT[] = new byte[] {      (byte) 0xE6, (byte) 0x00,
//                                                        (byte) 0x00, (byte) 0x02,
//                                                        (byte) 0x00, (byte) 0x00 };
            try {
                Log.i(TAG, String.valueOf(count));
                if (count == 1)
                {
                    fos.write(data_AR);
                    Log.i(TAG, "Association Responded!");
                }  
                else if (count == 2)
                {
                    fos.write(get_MDS);
                    Log.i(TAG, "Get MDS object attributes!");
                }
                else if (count == 3) 
                {
                    fos.write(data_DR);
                    Log.i(TAG, "Data Responsed!");
                }
                else if (count == 4)
                {
                    fos.write(data_RR);
                    Log.i(TAG, "Data Released!");
                }
            } catch(IOException ioe) {}
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T09:11:16.987

数据缓冲区包含 2 字节值和 4 字节值。正如您在 pdf 中看到的那样，可能是短裤和整数。你对此负责吗？

```
0xE7 0x00           APDU CHOICE Type (PrstApdu)  
0x00 0x84           CHOICE.length= 132  
0x00 0x82           OCTET STRING.length = 130  
0x00 0x01           invoke-id (differentiates this message from any other outstanding)  
0x01 0x01           CHOICE (Remote Operation Invoke | Confirmed Event Report)  
0x00 0x7C           CHOICE.length = 124  
0x00 0x00           obj-handle = 0 (MDS object)  
0x00 0x00 0x10 0x15 event-time (set to 0xFFFFFFFF if RelativeTime is not supported)  
0x0D 0x1C           event-type = MDC_NOTI_CONFIG 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-01T09:30:34.463

@Jieqin - 太好了，你也明白了 :)

将此粘贴到您的阅读线程中

```
else if (data[0] == (byte)0xE7){
Log.i(TAG, "E7");
//work for legacy device...
if (data[18] == (byte) 0x0d && data[19] == (byte) 0x1d)  //fixed report 
```

解析您的代理答案-如果有效，请评价我的提示:)

```
else if (data[18] == (byte) 0x0d && data[19] == (byte) 0x1f)  //mp var report
                        {
                                count = 999; 
                                //set invoke id so get correct response
                                invoke = new byte[] { data[6], data[7] };
                                //write back response
                                (new WriteThread(mFd)).start();     
                                //parse data!!
                                int length = data[21];
                                Log.i(TAG, "length is " + length);
                                // check data-req-id 
                                int report_no = data[25];
                                int number_of_data_packets = data[29];
                                //packet_start starts from handle 0 byte
                                int packet_start = 36;
                                final int SYS_DIA_MAP_DATA = 1;
                                final int PULSE_DATA = 2;
                                final int STATUS = 3;
                                for (int i = 0; i < number_of_data_packets; i++)
                                {
                                    int obj_handle = data[packet_start+1];
                                    switch (obj_handle)
                                    {
                                    case SYS_DIA_MAP_DATA:
                                        int sys = byteToUnsignedInt(data[packet_start+9]);
                                        int dia = byteToUnsignedInt(data[packet_start+11]);
                                        int map = byteToUnsignedInt(data[packet_start+13]);

                                        Log.i(TAG, "sys is "+ sys);
                                        sendMessage(RECEIVED_SYS, sys);
                                        Log.i(TAG, "dia is "+ dia);
                                        sendMessage(RECEIVED_DIA, dia);
                                        Log.i(TAG, "map is "+ map);

                                        break;
                                    case PULSE_DATA:
                                        //parse
                                        int pulse = byteToUnsignedInt(data[packet_start+5]);
                                        Log.i(TAG, "pulse is " + pulse);
                                        sendMessage(RECEIVED_PUL, pulse);
                                        break;
                                    case STATUS:
                                        //need more signal
                                        Log.i(TAG, "STATUS");
                                        break;
                                    }
                                    packet_start += byteToUnsignedInt(data[packet_start+3]) + 4;   //4 = ignore beginning four bytes
                                }                               
                        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-01T11:55:21.733

afaik 您必须在自动或推送上传之间进行选择。

如果自动工作正常并且您可以读取数据，则只需禁用自动上传并在测量后通过上传按钮将数据直接推送到您的设备......

问候

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-31T12:18:46.460

您可能应该将 data_AR 中的正确设备地址发送回设备 - 在您的情况下：002209225835c328

因此你应该交换：

```
(byte) 0x00, (byte) 0x08,  //bt add for phone, can be automate in the future

(byte) 0x3C, (byte) 0x5A, (byte) 0x37, (byte) 0xFF, 

(byte) 0xFE, (byte) 0x95, (byte) 0xEE, (byte) 0xE3, 
```

和：

```
(byte) 0x00, (byte) 0x08,  //bt add for phone, can be automate in the future

(byte) 0x00, (byte) 0x22, (byte) 0x09, (byte) 0x22, 

(byte) 0x58, (byte) 0x35, (byte) 0xc3, (byte) 0x28, 
```

也可以使用 `0x00 0x03 result = accepted-unknown-config`类似的

```
final byte data_AR[] = new byte[] {         
             (byte) 0xE3, (byte) 0x00,
             (byte) 0x00, (byte) 0x2C, 
             (byte) 0x00, (byte) 0x03, 
```

**编辑：**

我犯了一个错误-地址不是您的 BPM-DEvice 而是您的手机...要从您的 48 位 MAC 地址中获取 EUI 64 位地址，只需将其拆分在中间并添加 0xFF 0xFE 如下： `BT 48bit MAC [00:11:22:33:44:55]`变成

```
EUI 64 Bit [00:11:22:FF:FE:33:44:55] 
```

我很抱歉

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-07T10:05:03.527

我从这里阅读了 IEEE：[IEEE 11073-20601-2008](http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=05703195)

请参阅第 7.4.4 条第 57 页：

> 代理发起的测量数据传输由代理发送，例如，作为进行新测量的结果。管理器发起的测量数据传输由管理器通过发出命令（即，MDS-Data-Request）明确请求，以指示代理开始或停止发送测量数据。根据代理的能力，此报告模式处于活动状态的时间段是可配置的（例如，固定时间段或始终关联时）。管理器应支持从代理接收代理和管理器发起的测量数据传输。代理可以支持生成代理和管理者发起的测量数据传输之一或两者。在代理和管理者发起的测量数据传输中，事件报告用于携带测量数据。

# javascript - KineticJS - 使用 url 自定义鼠标光标样式

> ID：15591651
> 
> 赞同：3
> 
> 时间：2013-03-23T20:23:30.583
> 
> 标签：javascript, mouseover

我正在尝试使用 PNG 图像更改光标样式，这是我的脚本：

```
 group.on("mouseover", function(){
          document.body.style.cursor =  "url('../../Content/icons/zoom_in.png'), auto";
        //  document.body.style.cursor =  "pointer";
        });
   group.on("mouseout", function() {
      document.body.style.cursor = "default";
    }); 
```

我使用更改指针测试了脚本，它运行良好。我会提前感谢您的建议和感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:53:59.460

我假设*group*是一个 JQuery 对象。我会给 mouseenter/mouseleave 一个机会。

```
group.mouseenter(function(){
    document.body.style.cursor =  "url('../../Content/icons/zoom_in.png'), auto";
    //  document.body.style.cursor =  "pointer";
});
group.mouseleave(function(){
    document.body.style.cursor = "default";
}); 
```

请参阅[Javascript/jQuery mouseover 和 mouseout 事件侦听器](https://stackoverflow.com/questions/10558174/javascript-jquery-mouseover-and-mouseout-event-listeners)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-24T06:07:00.587

我找到了答案，应该将 PNG 文件转换为 CUR 文件，我使用了名为 AniFX 的好程序。脚本是：

```
group.mouseenter(function(){
    document.body.style.cursor =  "url('../../Content/icons/zoom_in.cur'), auto";
    //  document.body.style.cursor =  "pointer";
}); 
```

# android - 如何从存储在原始文件夹中的文本字典文件中获取特定单词；

> ID：15591652
> 
> 赞同：0
> 
> 时间：2013-03-23T20:23:31.920
> 
> 标签：android

我正在使用 txt 文件作为数据库，我想在文件的内容中搜索特定的字符串（单词），如果存在则将其添加到列表视图中。我已经设法使用上面的代码完成了大部分工作：

**读取文件**

```
public String readTxt(){

     InputStream inputStream = getResources().openRawResource(R.raw.words);
     ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();

     int i;
    try {
    i = inputStream.read();
    while (i != -1)
      {
       byteArrayOutputStream.write(i);
       i = inputStream.read();
      }
      inputStream.close();
    } catch (IOException e) {
     // TODO Auto-generated catch block
    e.printStackTrace();
    }

     return byteArrayOutputStream.toString(); 
```

**试图搜索字符串**

```
if(readTxt().contains(word)){
        addWord.add(new String(word)); 
```

问题是我无法搜索整个单词。如果我使用上述方式，我会得到所有包含字符串的字符。例如，如果单词是 LETTER，我会得到匹配，但如果单词是 TTE，我也会得到匹配。我在这里搜索并尝试了一些不同的方法，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T13:24:02.850

更改 .contains(word); 到 .contains(" " + word + " ");。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:48:33.037

使用正则表达式模式匹配器来匹配整个单词。这个将消息拆分为 160 个字符块，但您可以轻松修改它以找到“整个单词”。

```
protected ArrayList<String> splitMsg(SmsMessage smsMessage) {
        ArrayList<String> smt;
        Pattern p = Pattern.compile(".{1,160}");
        Matcher regexMatcher = p.matcher(smsMessage.getMsgBody());
        smt = new ArrayList<String>();
        while (regexMatcher.find()) {
            smt.add(regexMatcher.group());
        }
        return smt;
    } 
```

# c# - 为什么 ViewState 在类库项目中不可用？

> ID：15591657
> 
> 赞同：1
> 
> 时间：2013-03-23T20:23:57.923
> 
> 标签：c#, asp.net, .net, viewstate

我在上传文件时遇到了一种情况。如果文件上传控件有文件，那么它将从文件上传控件中选择路径，否则它将保存在`ViewState["ImagePath"]`.

我想让它通用，这样无论我在哪里需要这样的上传场景，我都可以使用它。但是在实现时我看不到，如果我可以`ViewState`在类库项目中使用。

我有以下两个问题：

1.  无论如何可以访问`ViewState`类库项目中的当前页面吗？
2.  如果以上是不可能的，那为什么？AFAIK 几乎所有东西都可用于类库项目。那为什么不`ViewState`s呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:27:38.603

根据[MSDN](http://msdn.microsoft.com/en-IN/library/system.web.ui.control.viewstate.aspx)查看状态

> 获取状态信息字典，允许您跨同一页面的多个请求保存和恢复服务器控件的视图状态。

`ViewState`其他人无法访问这些页面`classes`。每个`Page`并`UserControl`维护自己的`private viewstate`. 如果您需要从页面外部访问 if ，则可以将该`ViewState`值公开为`public property`页面的 a 。

# java - 无法部署由 NetBeans 构建的任何小程序

> ID：15591658
> 
> 赞同：1
> 
> 时间：2013-03-23T20:24:20.323
> 
> 标签：java, netbeans, applet

我是 Java 新手。我无法在 html 页面上部署任何小程序并不断收到 InvocationTargetException。为了说明这一点，这里有一个例子：

我的小程序只有一个有主的类。所有代码均由 NetBeans 生成，GUI 仅包含一个按钮：

```
package javaapplication;

public class NewJFrame extends javax.swing.JFrame {
    public NewJFrame() {
        initComponents();
    }

    @SuppressWarnings("unchecked")

   // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("jButton1");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jButton1)
                .addContainerGap(317, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jButton1)
                .addContainerGap(266, Short.MAX_VALUE))
        );

        pack();
    }
    public static void main(String args[]) {
    /* Set the Nimbus look and feel */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
     * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            new NewJFrame().setVisible(true);
        }
    });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    // End of variables declaration      
} 
```

它在 NetBeans 中顺利编译和运行。现在我清理并构建 .jar 文件。这是 MANIFEST.MF，对我来说看起来不错：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.4
Created-By: 1.7.0_10-b18 (Oracle Corporation)
Class-Path: 
X-COMMENT: Main-Class will be added automatically by build
Main-Class: javaapplication.NewJFrame 
```

这是我的 index.html：

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
        <applet archive="JavaApplication.jar" width="300" height="300" code="javaapplication.NewJFrame"/>

    </body>

</html> 
```

我已将它们放在同一目录中并正确设置了权限。现在，当我尝试打开放置在服务器上的 index.html 时，它会在最新版本的 Firefox 和 Chrome 上给出 InvocationTargetException。

我尝试了许多不同的方法，例如创建另一个具有 main 的类，或者使用 Jnlp 但无济于事。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T06:27:12.573

我在您的代码中看不到小程序。

```
package javaapplication;

public class NewJFrame extends javax.swing.JFrame {
    public NewJFrame() {
        initComponents();
    }
[...] 
```

**从头开始创建 Java 项目。**（网豆）

*   选择文件 > 新建项目 (Ctrl-Shift-N) (MyTestApplet)。
*   在类别下，选择 Java。
*   选择项目下的 Java 类库。
*   单击完成。

*   创建小程序源文件

*   在 Projects 窗口中右键单击 MyTestApplet 项目节点并选择 New > Other (Ctrl-N)。
*   在类别下，选择 Java。
*   选择 Swing GUI 表单 > JApplet 表单。
*   点击下一步。
*   在类名下，键入`NewJApplet`。
*   在包下，键入`javaapplication`。
*   单击完成。

IDE 在指定的包中创建小程序源文件。小程序源文件打开，GUI 编辑器打开。

*   将 Button 拖到 Gui。

源 NewJapplet.java 应该类似于：

```
package javaapplication;

public class NewJApplet extends javax.swing.JApplet {

    @Override
    public void init() {

        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJApplet.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJApplet.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJApplet.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJApplet.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }

        try {
            java.awt.EventQueue.invokeAndWait(new Runnable() {
                public void run() {
                    initComponents();
                }
            });
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

    @SuppressWarnings("unchecked")

    private void initComponents() {

        jButton1 = new javax.swing.JButton();

        jButton1.setText("jButton1");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(182, Short.MAX_VALUE)
                .addComponent(jButton1)
                .addGap(139, 139, 139))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(43, 43, 43)
                .addComponent(jButton1)
                .addContainerGap(232, Short.MAX_VALUE))
        );
    }
    private javax.swing.JButton jButton1;

} 
```

*   跑`Build`

在 dist 文件夹中现在是`MyTestApplet.jar`

*   将 .jar 复制到服务器的文件夹中`MyTestApplet`
*   将以下 .html 复制到服务器，相同的文件夹`MyTestApplet`

使用这个 html 文件。

*   更改 classid="clsid:CAFEEFAC- **0016** -0000-0000-ABCDEFFEDCBA" width="300" height="300"> 指向您的 Java 版本
*   **0017**

AppletPage.html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en-US">
  <head>
    <title>Applet Page</title>
    <meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
  </head>
  <body>
    <h1>Applet Demo</h1>
    <h2>This applet has been deployed with the object tag</h2>
    <object 
    classid="clsid:CAFEEFAC-0016-0000-0000-ABCDEFFEDCBA" width="300" height="300">
    <PARAM name="code" value="javaapplication.NewJApplet">
    <PARAM name="archive"  value="MyTestApplet.jar">
    <comment>
      <embed code="javaapplication.NewJApplet.class"
             width="300"
             height="300"
             archive="MyTestApplet.jar"
             type="application/x-java-applet">
        <noembed>
          No Java Support.
        </noembed>
      </embed>
    </comment>
  </object>

  </body>
</html> 
```

*   在浏览器中输入网址：`http://localhost/MyTestApplet/AppletPage.html`

瞧：

![在此处输入图像描述](../Images/8f585244da01be43a850873f2bdc7164.png)

希望这可以帮助。

# sorting - Powershell：对数据集进行排序

> ID：15591659
> 
> 赞同：0
> 
> 时间：2013-03-23T20:24:22.437
> 
> 标签：sorting, powershell, dataset

在 powershell 程序中，我将数据集用于多种用途。
这些用途之一将受益于不同的排序顺序。

我测试了这个：

```
$array = $mydataset.tables[0].select("COL1 DESC") 
```

但是当我想使用 $array 时，它是空的。

问题1：如何将一个数据集排序为另一个数据集或数组？
问题2：如何进行多列排序？类似“COL1 COL2 ASC，COL3 DESC”的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T21:38:17.143

[`Select()`](http://msdn.microsoft.com/en-us/library/way3dy9w.aspx)如果要排序，需要 2 个参数。如果您不想过滤，请使用空字符串 ( `""`) 作为第一个参数：

```
$array = $mydataset.Tables[0].Select("", "COL1 DESC, COL2 ASC") 
```

# javascript - 如何仅在桌面浏览器上聚焦输入字段

> ID：15591661
> 
> 赞同：1
> 
> 时间：2013-03-23T20:24:32.890
> 
> 标签：javascript, jquery, mobile, browser, focus

*仅*当用户在桌面浏览器上时聚焦输入字段的最佳方法是什么？

我使用 jQuery 并设置焦点是这样完成的：

```
$(document).ready(function(){
    $("input").focus();
} 
```

但是现在在移动设备（例如手机和平板电脑）上，屏幕键盘出现了。我想避免这种情况。我还想避免浏览器嗅探。有任何想法吗？

PS：获取浏览器视口*不是*解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T20:32:29.730

您可以通过检查 UserAgent 仅使用 javascript 来执行此操作，如下所示：

```
$(document).ready(function(){
   if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) ) {
      //mobile code
   } else {
      //desktop code
      $("input").focus();
   }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-23T20:28:57.667

我会尝试在服务器端设置一个标志。IE 将一个类添加到您的父 div`'isDesktop'`然后在客户端，像这样检查它

```
 $(document).ready(function(){
     if($('.myParentDiv').hasClass('isDesktop')){
       $("input").focus();
}
    } 
```

如果您无权访问服务器端，另一种方法可能是使用用户 jquery `$.browser`，它为您提供有关浏览器的信息。

# html - 验证器，标签：“结束标签 a 违反嵌套规则”

> ID：15591663
> 
> 赞同：0
> 
> 时间：2013-03-23T20:24:39.907
> 
> 标签：html, w3c-validation

我在 w3 验证器中运行我的网站并收到此错误...

第 16 行，第 4 列：结束标记 a 违反了嵌套规则。

```
</a> 
```

问题是什么？我努力编写好的标记，只得到了 2 个错误，我修复了另一个错误，但是这个我无法解决......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T20:52:46.037

这意味着您的标签不匹配。

例如，以下代码将抛出描述的错误：

```
<a href=''><b>Some text</a></b> 
```

鉴于您指出您已尝试编写良好的标记并且您没有任何其他错误，我想您已经知道了，那么可能是什么原因造成的。

我的猜测是您的标签内没有正确关闭`<a>`标签。

例如，在我上面给出的示例中，您可能`</b>`在正确的位置放置了结束标记，但可能有一个拼写错误，无法将其识别为结束标记 - 例如，可能缺少斜杠？那将是最合理的，也很容易错过。

或者另一个例子——也许你有这样的代码：

```
<a href=''><img src='pic.jpg'></a> 
```

在 HTML 文档中，上述代码完全有效。但是，如果您已将您的`<DOCTYPE>`as xhtml 指定为无效，因为在 xhtml 中所有标签都需要关闭，而`<img>`上述不是。它需要像这样添加一个结束斜线：

```
<a href=''><img src='pic.jpg' /></a> 
```

我的猜测是，你的错误是这样的。

你还没有向我们展示产生错误的代码，所以我在这里有点摸不着头脑，但这是我的猜测。

我还要说，虽然 W3C 的验证器是一个很好的资源，但如果您使用一个不错的 IDE 来编写代码，那么代码编辑器应该在您编写代码时为您突出显示任何类似的语法错误。这样就很容易看出问题所在。甚至某些浏览器的*查看源代码*功能也会向您显示语法突出显示，这可能会揭示问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-28T05:25:25.647

有点晚，但对其他人有用！在“嵌套规则”中，您不能打开一个标签，然后在其中打开另一个标签，但在第一个标签之外关闭它！
哈哈哈声音不太清楚！！一个例子胜过千言万语，所以：

这会给你一个嵌套规则错误！

```
...blabla <em><b>blibloblu</em></b> blablabla.... 
```

虽然这是正确的！

```
...blabla <em><b>blibloblu</b></em> blablabla.... 
```

希望这会有所帮助！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2018-05-25T19:45:32.047

如果可能，请分享您的代码。我认为您在标签下使用了标签。您必须使用单个标签。

```
<a href="">
    <ul>
        <li><a href="">A</a></li>
        <li><a href="">B</a></li>
    </ul>
</a> 
```

# python - Python端口扫描我做对了吗？

> ID：15591664
> 
> 赞同：1
> 
> 时间：2013-03-23T20:24:42.493
> 
> 标签：python, sockets, python-2.7

因此，我正在使用我迄今为止所学的内容制作一个 python 程序，其中用户输入两个 ips，代表要扫描的 ips 的开始和范围，而不是将所需的 ip 保存在文本文件中。这是我想出的：

```
 #ip range and scanning
import socket
import sys
ok=[]
def ipscan(start2,port):
    s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    s.settimeout(2)
    try:
        s.connect((start2,port))
        print start2 ,'-->port %s is Open'%port
        ok.append(start2)
    except: print start2 ,'-->port %s is Closed ! '%port
def iprange(start,end):
    while end>start:
       start[3]+=1
       ipscan('.'.join(map(str,start)),p)
       for i in (3,2,1,0):
          if start[i]==255:
             start[i-1]+=1
             start[i]=0
 #--------------------------------------------#    
sta=map(int,raw_input('From : ').split('.'))
fin=map(int,raw_input('to : ').split('.'))
p=input('Port to scan : ')
iprange(sta,fin)
print '-----------end--------------'
of=open('Output.txt','w')
for ip in ok:
    of.writelines(ip+'\n')
of.close() 
```

它似乎正在工作，但我需要确定，并想知道我是否可以让它更快？或者是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:29:03.113

你可以使用`nmap`;)

您的套接字连接都是顺序的。您可以并行化连接，因为这是缓慢的因素，特别是对于过滤（无响应）端口。

# cordova - Windows Phone 上的诺基亚 Ad Exchange 广告代码

> ID：15591668
> 
> 赞同：1
> 
> 时间：2013-03-23T20:25:19.280
> 
> 标签：cordova, windows-phone-7, windows-phone

尝试将诺基亚 Ad Exchange 的广告代码 SDK 用于基于 Phonegap 的 Windows Phone 应用程序。

在此处下载 SDK [https://nax.nokia.com/iamp/nokia/publisher/dashboard#ui-tabs-5](https://nax.nokia.com/iamp/nokia/publisher/dashboard#ui-tabs-5)

您将看到一个名为 Ad-Tag.html 的文件，其中包含所有平台的代码。似乎只有 iPhone 版本出现在 Chrome 中。

所以我尝试使用 Windows Phone 片段并将其插入我的应用程序并在 Windows Phone 模拟器上运行它。什么都没发生。

有没有人让这个 SDK 工作或知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T10:59:59.863

我已经为 Windows Phone 7 使用了本机 NAX SDK，它只需要很少的配置即可工作。（参考： http: [//networkprogramming.wordpress.com/2013/05/29/nax-advertising-wp7-app/](http://networkprogramming.wordpress.com/2013/05/29/nax-advertising-wp7-app/)） - 但是，这需要在 Silverlight 中开发应用程序，而不是在 HTMl/Phonegap 中开发。

在使用 PhoneGap 方面，我建议查看 Server API：

[https://inneractive.jira.com/wiki/display/DevWiki/Server+API+integration](https://inneractive.jira.com/wiki/display/DevWiki/Server+API+integration)

您可以使用 javascript 在 HTML 页面中动态嵌入 iFrame，格式如下：

[http://m2m1.inner-active.mobi/simpleM2M/requestEnhancedHtmlAd?aid=MyCompany_MyApp&v=Sm2m-2.0.1&ua=Mozilla/5.0%20%28iPad&cip=107.20.248.13](http://m2m1.inner-active.mobi/simpleM2M/requestEnhancedHtmlAd?aid=MyCompany_MyApp&v=Sm2m-2.0.1&ua=Mozilla/5.0%20%28iPad&cip=107.20.248.13)

在您的情况下，参数aid、ua 和cip 将是可变的。

# java - GPS 文本输入 CCC

> ID：15591670
> 
> 赞同：0
> 
> 时间：2013-03-23T20:25:34.903
> 
> 标签：java

好的，所以我一直在研究过去比赛的这个问题，但我不知道该怎么办......问题指出程序将计算“输入”短语所需的光标移动次数。例如，要输入单词“GPS”，从“A”开始向下移动 1 选择“G”，然后向右移动 3 和向下移动 1 选择“P”，然后向下移动 1 和向左移动 3选择“S”，最后您必须单击“ENTER”，因此您必须向下移动 1 和向右移动 5 才能选择“ENTER”。总共有 15 次光标移动。

[http://wcipeg.com/problem/ccc08j3](http://wcipeg.com/problem/ccc08j3) - 这就是详细的问题

老实说，我什至无法弄清楚解决这个问题的步骤。有人告诉我不要想太多，因为这很容易：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:35:52.977

你可以做的是给每个键两个坐标，一个表示列，另一个表示行。

A = (0,0)
B = (1,0)
C = (2,0)
..
G = (0,1)
..
等等

然后，对于连续的按键，您计算列的差异和行的差异。将它们相加，总数将为您提供所需的光标移动次数。

# javascript - 提醒用户点击的链接的 ID

> ID：15591671
> 
> 赞同：0
> 
> 时间：2013-03-23T20:25:34.897
> 
> 标签：javascript, onclick

我有几个链接，每个链接都有唯一的 ID。我想调用一个函数，当单击任何链接时，用户会收到一条显示链接 ID 的警报。我难住了。这就是我所拥有的。我想用纯 JavaScript 做到这一点。

我的代码：

```
<p><a href="#" id="link0">Link0</a></p>
<p><a href="#" id="link1">Link1</a></p>
<p><a href="#" id="link2">Link2</a></p>
<p><a href="#" id="link3">Link3</a></p>

<script>
function test(i) {
    alert("You just clicked on link:" + i); 
}

onclick = function () { 
    test(i);
};
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:32:58.343

尝试这个

```
var links = document.getElementsByTagName( "a" );

for ( var i = 0; i < links.length; i++ ) {
    links[i].addEventListener( "click", function( e ) {
        e.preventDefault();
        alert( this.id );
    }, false );
} 
```

[**演示**](http://jsfiddle.net/t833R/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:33:04.533

我刚刚使用 jQuery 为您创建了一个示例。

```
$(document).ready(function() {
    $("a").click(function() {
       alert(this.id); 
    });
}); 
```

[http://jsfiddle.net/Yynw9/](http://jsfiddle.net/Yynw9/)

要使用 jQuery，您必须在标题中包含该库：

```
<script src="//code.jquery.com/jquery-1.9.1.js" type="text/javascript" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:34:43.377

这是您要查找的 javascript：

```
var elements = document.getElementsByTagName("a");
for(var i = 0, length = elements.length; i < length; i++) {
    elements[i].addEventListener( "click", function(e) {
        e.preventDefault();
        alert("You just clicked on link: " + this.id); 
    }, false );
} 
```

JSFiddle：http: [//jsfiddle.net/3R4FA/1/](http://jsfiddle.net/3R4FA/1/)

代码循环首先选择所有`<a>`标签元素。然后它遍历这个数组，并为每个项目添加一个单击事件侦听器。使用`this`关键字访问触发事件的元素，然后可以获取id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T20:35:21.683

在支持它的浏览器中，您可以使用 querySelectorAll 来获取所有以“链接”开头的 id，或者您可以添加一个类并使用 getElementsByClassName.. 在旧版浏览器中，解决方案不是那么干净，但您可以获取所有文档中或元素内部的“a”标签，并检查“id”属性是否以“链接”开头...

```
function test(i) {
    alert("You just clicked on link:" + this.id); 
}
if (document.querySelectorAll('a[id^="link"]')) {
    var elements = document.querySelectorAll('a[id^="link"]');
    var i = 0;
    for (i = 0; i < elements.length; i += 1) {
        elements[i].onclick = test;
    }
} else {
    var elements = document.getElementsByTagName('a');
    var i = 0;
    for (i = 0; i < elements.length; i += 1) {
        if (elements[i].id.substr(0,4) === 'link') {
            elements[i].onclick = test;
        }
    }
} 
```

[http://jsfiddle.net/Xvwme/3/](http://jsfiddle.net/Xvwme/3/)

# objective-c - 图层支持的 NSView 动画

> ID：15591676
> 
> 赞同：4
> 
> 时间：2013-03-23T20:26:04.087
> 
> 标签：objective-c, cocoa, core-animation, nstableview

我有一个我想要动画的 NSView，但是 NSView 里面有一个 NSTableView，当视图是图层支持时它不会显示正确的（这反过来又是动画视图所必需的）。所以我的答案是在动画之前让视图层支持，然后在动画完成后移除层，如下所示：

```
[animatingView setWantsLayer: YES];

[NSAnimationContext beginGrouping];

[[animatingView animator] animateSomething];

[[NSAnimationContext currentContext] setCompletionHandler: ^{
    [animatingView setWantsLayer: NO];
}];

[NSAnimationContext endGrouping]; 
```

但是，使用此代码，视图根本没有动画。我发现如果我删除`[animatingView setWantsLayer: NO];`它动画恰到好处的行，但是表格视图无法正确显示（有关其中一个问题的示例，请参阅[此](https://stackoverflow.com/questions/6968312/weird-font-anti-aliasing-in-view-based-nsoutlineview)问题）。

所以，我的问题是：我该如何解决这个问题？我想为视图设置动画，但我希望表格正确显示，但这种解决方法不起作用。而且我不明白为什么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:19:45.913

一旦你让 NSView 支持图层，它就无法恢复。

我建议您尝试使您的 NSTableView 成为 layer-backed view 的兄弟，而不是孩子。

# html - twitter bootstrap 输入附加的可变宽度

> ID：15591678
> 
> 赞同：0
> 
> 时间：2013-03-23T20:26:08.877
> 
> 标签：html, twitter-bootstrap

我可以将输入的宽度设置为变化，方法是将其放在 .row 中，然后分配所需的 .span#。如何通过输入附加实现相同的效果？

```
<div class='container-fluid'>
  <div class='row-fluid'>
    <div class='span3 well'>
      <ul class='nav nav-list nav-stacked'>
        <li>
          <div class='input-append'>
            <input type='text'>
            <button class='btn btn-info' type='button'>Add</button>
          </div>
        </li>
      </ul>
    </div>
    <div class='span9'>
      <span>More stuff</span>
    </div>
  </div>
</div> 
```

我将通过 CSS 将“添加”按钮的宽度设置为固定值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T04:10:15.620

[见其他帖子](https://stackoverflow.com/questions/11188964/fluid-input-append-in-bootstrap-responsive)

```
function sizing() {
var formfilterswidth=$("#formfilters").width();
$("#msisdn").width((formfilterswidth-46)+"px");
}
$(document).ready(sizing);
$(window).resize(sizing);​ 
```

# actionscript - Actionscript 3.0：奇怪的默认小时

> ID：15591682
> 
> 赞同：0
> 
> 时间：2013-03-23T20:26:24.610
> 
> 标签：actionscript, counter

我想用 actionscript 在 flash 中创建一个计时计数器。分钟/秒显示良好，但问题是小时以 1 而不是 0 开头。代码如下：

```
import flash.utils.Timer;
import flash.events.Event;
import flash.events.TimerEvent;
import flash.globalization.DateTimeFormatter;

var timer:Timer = new Timer(100);
timer.start();
timer.addEventListener(TimerEvent.TIMER, timerTickHandler);
var timerCount:int = 0;

function timerTickHandler(Event:TimerEvent):void
{
    timerCount += 100;
    toTimeCode(timerCount);
}

function toTimeCode(milliseconds:int) : void {
    //create a date object using the elapsed milliseconds
    var time:Date = new Date(milliseconds);

    //define minutes/seconds/mseconds
    var hours:String = String(time.hours);
    var minutes:String = String(time.minutes);
    var seconds:String = String(time.seconds);

    //add zero if neccecary, for example: 2:3.5 becomes 02:03.5
    hours = (hours.length != 2) ? '0'+hours : hours;
    minutes = (minutes.length != 2) ? '0'+minutes : minutes;
    seconds = (seconds.length != 2) ? '0'+seconds : seconds;

    //display elapsed time on in a textfield on stage
    timer_txt.text = hours + ":" + minutes + ":" + seconds;

} 
```

我尝试了所有方法，但计数器开始时仍然有小时 = 1 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T10:24:52.000

我认为您可能会因为`Date`自动处理夏令时而获得一个小时的偏移量。尝试改用 UTC 值：

```
var hours:String = String(time.hoursUTC);
var minutes:String = String(time.minutesUTC);
var seconds:String = String(time.secondsUTC); 
```

# java - 是否应该在 DAO 中强制执行特定于数据源的限制？

> ID：15591687
> 
> 赞同：0
> 
> 时间：2013-03-23T20:26:49.097
> 
> 标签：java, mysql, constraints, dao

关于强制执行特定于数据源的限制，是否有任何推荐做法？

例如，当`String`保存超过[MySQL 文档中给出的 255 或 65535 限制](http://dev.mysql.com/doc/refman/5.0/en/char.html)时，有一个断言或抛出一个异常。还是应该由数据源处理？

[http://dev.mysql.com/doc/refman/5.0/en/char.html](http://dev.mysql.com/doc/refman/5.0/en/char.html)

> VARCHAR 列中的值是可变长度字符串。在 MySQL 5.0.3 之前，长度可以指定为 0 到 255 之间的值，在 5.0.3 和更高版本中可以指定为 0 到 65,535 之间的值。MySQL 5.0.3 及更高版本中 VARCHAR 的有效最大长度取决于最大行大小（65,535 字节，在所有列之间共享）和使用的字符集。请参见第 E.7.4 节，“表列数和行大小的限制”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:19:22.603

在您的数据访问层中，您应该进行的唯一验证是为您的特定数据库模式定义的验证。您可以将数据访问层视为模式的对象表示，它应该尽可能地模仿模式的结构、数据类型和约束，仅此***而已***。因此，给定以下简单的模式：

```
CREATE TABLE `users` (
    `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    `user_name` VARCHAR(64) NOT NULL,
    `passwordHash` VARCHAR(256) NOT NULL,
) ENGINE=InnoDB, DEFAULT CHARACTER SET utf8; 
```

您将在数据访问层验证：

*   该`userName`属性在保存前设置，为长度小于等于64个字符的字符序列
*   该`passwordHash`属性在保存前设置，为长度小于等于256个字符的字符序列

但是，非常重要的是，您应该严格避免任何*仅*与特定数据库实现相关的检查。首先，您希望您的数据访问层与提供者无关，其次，大多数供应商特定的限制会在您尝试创建表的那一刻触发。

# javascript - rspec 单击一个跨度

> ID：15591692
> 
> 赞同：8
> 
> 时间：2013-03-23T20:27:13.260
> 
> 标签：javascript, ruby-on-rails, rspec, capybara

我正在使用 rspec 测试一些页面，并想使用 click 方法。但是 DOM 没有链接或按钮。它只是一个跨度，神奇地变成了与 javascript 的链接。

```
<span class="footerLink feedbackLink">
    Feedback
</span> 
```

rspec 提供“click_link”和“click_button”

有什么想法我可以点击一个跨度吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-23T20:54:35.087

你应该能够做到

```
find('.feedbackLink').click 
```

[`find`](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders#find-instance_method)返回一个Element，Element类有一个[`#click`](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Element#click-instance_method)方法。

由于您可能正在处理 Javascript 中的点击，因此不要忘记`:js => true`在您的测试中添加为元标记。

# web-services - JAX-WS Web 服务，使用 HTTPS 端点 URL 而不是 HTTP 的负载均衡器

> ID：15591696
> 
> 赞同：3
> 
> 时间：2013-03-23T20:27:37.370
> 
> 标签：web-services, jakarta-ee, tomcat, jax-ws, load-balancing

我们已经公开了一个部署在负载均衡器后面的 Tomcat 实例上的 Web 服务。负载平衡器仅允许 HTTPS 流量，但 Jax-ws 端点指向 HTTP WSDL url 而不是 HTTPS。当客户端访问负载均衡器 HTTPS URL 时，它会被重定向到 HTTP，并且由于流量是 HTTP 在 LB 上被阻止，客户端会收到错误，因为 WSDL 不可访问。

sun-jaxws.xml 或 webservice 注释中是否有任何配置来指定告诉 JAX-WS 公开 HTTPS url 而不是 HTTP。

下面是我的配置：

```
sun-jaxws.xml:

<?xml version="1.0" encoding="UTF-8"?>
<endpoints
xmlns='http://java.sun.com/xml/ns/jax-ws/ri/runtime'
version='2.0'>
<endpoint
    name='/TestService'
    implementation='com.test.service.TestServiceImpl'
    url-pattern='/TestService' /> 
```

```
Annotation Config On WebService Impl class:

@WebService(serviceName="TestServiceImpl",
portName="TestService",
endpointInterface = "com.test.service.TestService",
targetNamespace="http://test.com"
)
@HandlerChain(file = "handlers.xml")
@MTOM
@XmlAccessorType(XmlAccessType.PROPERTY)
public class TestServiceImpl implements TestService{
//Implementation
} 
```

![WebService End-Point，请查看浏览器中的 HTTPS 协议和 WSDL 位置 URL 中的 HTTP，出于安全原因，我已删除服务和 url](../Images/dd3f41a37f7eed7ad2559fcd4f855453.png)

如果有人能指出我正确的方向，那就太好了。

**不同场景下的解决方案也请阅读评论**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T07:54:54.463

我不建议这种方法 - 更好的选择是终止负载均衡器上的 SSL 通信，并在负载均衡器和服务器之间使用纯 HTTP（除非您还需要保护均衡器和服务器之间的流量，但我对此表示怀疑） ）。也就是说，您不必在两个地方都设置 SSL，并且当某些东西无法正常工作时，您会感到头疼。因此，首先尝试以这种方式配置负载均衡器。此外，您必须手动重写`<soap:address location="..">`WSDL 中的标签（当然，添加 HTTPS 地址）并从**本地存储的 WSDL**生成 WS 客户端。

如果您仍想在 Tomcat 上设置 SSL，那么您首先必须设置密钥库 - 您的密钥和证书的“数据库”。Web上有很多教程如何做到这一点，一个在[这里](http://www.mkyong.com/tomcat/how-to-configure-tomcat-to-support-ssl-or-https/)。然后，您需要通过添加以下代码段来更改 Tomcat 的 server.xml 文件：

```
 <Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true"
           maxThreads="150" scheme="https" secure="true"
           keystoreFile="<PATH-TO-KEYSTORE>" keystorePass="<YOUR-KEYSTORE-PASSWORD>"
           clientAuth="false" sslProtocol="TLS"/> 
```

最后，您需要指定您的 Web 服务将所有 HTTP 请求重定向到 HTTPS 侦听器 - 但在 web.xml 文件中，而不是在 sun-jaxws.xml 中：

```
<user-data-constraint>
    <transport-guarantee>CONFIDENTIAL</transport-guarantee>
</user-data-constraint> 
```

重新启动 Tomcat 就可以了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T21:27:29.123

另一种方法是在 Tomcat 的“server.xml”文件中添加这样一行

```
<Connector URIEncoding="UTF-8" port="8080" protocol="HTTP/1.1" 
    connectionTimeout="20000"  scheme="https" proxyPort="443"
    redirectPort="8443" /> 
```

在这种情况下，使用 HTTP 将 LB 指向端口 8080。

当客户端使用 HTTPS 到端口 443 连接到 LB，LB 使用 HTTP 到端口 8080 连接到服务器时，这将起作用。在这种情况下，WSDL 返回

```
<soap:address location="https://www.yoursite.com:443/..."> 
```

重要的事情有

**方案：将此属性设置为您希望通过调用request.getScheme()**返回的协议的名称。例如，您可以将此属性设置为 SSL 连接器的“https”。默认值为“http”。

**proxyPort：如果在代理配置中使用此连接器，请配置此属性以指定为调用request.getServerPort()**所返回的服务器端口。

Jax-ws 使用粗体显示的两种方法来构建soap:address。

感谢 Chino 帮助我们！

# c++ - 调试器无法访问库代码 (GDCM)

> ID：15591698
> 
> 赞同：0
> 
> 时间：2013-03-23T20:27:41.247
> 
> 标签：c++, debugging, gdcm

我相信这对大多数人来说都是一个微不足道的问题。我正在构建基于 C++ GDCM (GrassRoot DICOM) 库的代码。有趣的是，使用 GDB，我无法遍历库标题。在 GDCM 构建过程中我需要打开一个选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:26:40.290

GDCM 使用 CMake 构建系统。只需将：CMAKE_BUILD_TYPE 设置为 Debug。完毕。

# java - 小程序无法处理 html

> ID：15591699
> 
> 赞同：-2
> 
> 时间：2013-03-23T20:27:57.450
> 
> 标签：java, html, applet

我在 netbeans 中创建了一个名为 PaintApplet 的 japplet，我得到了它的 .jar 文件并将其与 html 文件放在一个文件夹中，html 文件是这样的：

```
 <html>
<body>
<APPLET ARCHIVE="PaintApplet.jar" CODE=PaintApplet.class  WIDTH=800 HEIGHT=500>

</APPLET>

 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:32:36.837

如果类不在默认包中，则从标记中删除 .class 并添加包名。

```
<APPLET 
    ARCHIVE="PaintApplet.jar" 
    CODE="com.org.PaintApplet"  
    WIDTH=800 HEIGHT=500>
</APPLET> 
```

请参阅[http://docs.oracle.com/javase/tutorial/deployment/applet/html.html](http://docs.oracle.com/javase/tutorial/deployment/applet/html.html)

> *   code 是小程序类的名称
> *   archive 是包含小程序及其资源的 jar 文件的名称
> *   width 是小程序的宽度
> *   height 是小程序的高度

或者使用对象标签：

```
<OBJECT 
  classid="clsid:8AD9C840-044E-11D1-B3E9-00805F499D93"
  width="800" height="500">
  <PARAM name="code" value="com.org.PaintApplet">
  <PARAM name="archive" value="PaintApplet.jar">
</OBJECT> 
```

此外，请确保您已安装最新的 JRE 版本（当前为 1.7.0 更新 17），因为如果 java 插件不是最新的，某些浏览器将阻止小程序。

# java - 使用 AsyncTask 未正确执行多部分实体

> ID：15591703
> 
> 赞同：0
> 
> 时间：2013-03-23T20:28:19.293
> 
> 标签：java, android

我正在使用 android 中的 MultipartEntity 将 xml 发送到 php。

但我在这方面有问题。

```
try {
    MultipartEntity mp = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
    HttpPost method = new HttpPost(connUrl);
    method.setEntity(mp);
    mp.addPart("xml", new StringBody(xml));
} catch(Exception e) {
    .....
} finally {
     .............
} 
```

当控制到达 try 块的一行时。它进入 finally 块而不执行该 try 块和 catch 块的其他行。谁能建议我这可能是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:42:06.027

我终于解决了我的问题。

使用此代码。

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(connUrl);
try {
    List<BasicNameValuePair> nameValuePairs = new ArrayList<BasicNameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("xml", xml));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
    HttpResponse response = httpclient.execute(httppost);
    ........
} catch(Exception e) {
    .....
} finally {
      .............
} 
```

# r - 计算后将因子均值放入数据集中

> ID：15591704
> 
> 赞同：1
> 
> 时间：2013-03-23T20:28:22.410
> 
> 标签：r, normalization, mean, r-factor

我正在尝试根据个人会议手段和 SD 为我正在使用的变量创建一个标准化值。我发现会议意味着使用该功能：

`confavg=aggregate(base$AVG, by=list(base$confName), FUN=mean)`

因此，在获得 31 次会议的平均值后，我想返回并为每个单独的球员输入这些平均值，这样我就可以轻松地根据会议平均值计算出标准化因子。

我试图创建大型 ifelse 或 if 语句，其中 confavg 是会议平均值。

`ifelse((base$confName=="America East Conference"),confavg[1,2]->base$CAVG,0->base$CAVG)`

但没有任何效果。理想情况下，我想让每个玩家都说：

`Normalization = (player average - conference average)/conference standard deviation`

我该怎么做呢？

编辑：

以下是一些示例数据：

```
AVG = c(.350,.400,.320,.220,.100,.250,.400,.450)
Conf = c("SEC","ACC","SEC","B12","P12","ACC","B12","P12")
Conf=as.factor(Conf)
sampleconfavg=aggregate(AVG, by=list(Conf), FUN=mean)
sampleconfsd=aggregate(AVG, by=list(Conf), FUN=sd) 
```

所以每个球员都会有他们的平均值 - 会议平均值/会议的标准差

所以对于第一个人来说，这将是：

```
(.350 - .335) / 0.0212132 = 0.7071069 
```

但我希望为我的数据集中的所有人构建一个函数。谢谢！

编辑2：

好吧，下面的答案很棒，但我（希望）遇到了最后一个问题。我想基本上对三个变量执行此过程，例如：

```
base3=do.call(rbind, by(base3, base3$confName, FUN=function(x) { x$ScaledAVG <- scale(x$AVG); x}))
base3=do.call(rbind, by(base3, base3$confName, FUN=function(x) { x$ScaledOBP <- scale(x$OBP); x}))
base3=do.call(rbind, by(base3, base3$confName, FUN=function(x) { x$ScaledK.AB <- scale(x$K.AB); x})) 
```

哪个有效，但是当我搜索数据文件时：

```
base3[((base3$ScaledAVG>2)&(base3$ScaledOBP>2)&(base3$ScaledK.AB<.20)),] 
```

它重置 Scaled K.AB 值并且不将其用作搜索参数的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:36:34.090

这是一个在 iris$Species 组中缩放 iris$Sepal.Length 的示例：

```
scaled.iris <- do.call(rbind, 
  by(iris, iris$Species,
     FUN=function(x) { x$Scaled.Sepal.Length <- scale(x$Sepal.Length); x }
  )
)

head(scaled.iris)
##          Sepal.Length Sepal.Width Petal.Length Petal.Width Species Scaled.Sepal.Length
## setosa.1          5.1         3.5          1.4         0.2  setosa          0.26667447
## setosa.2          4.9         3.0          1.4         0.2  setosa         -0.30071802
## setosa.3          4.7         3.2          1.3         0.2  setosa         -0.86811050
## setosa.4          4.6         3.1          1.5         0.2  setosa         -1.15180675
## setosa.5          5.0         3.6          1.4         0.2  setosa         -0.01702177
## setosa.6          5.4         3.9          1.7         0.4  setosa          1.11776320 
```

编辑：

使用您的样本数据（`Conf`并且`AVG`仅）：

```
d <- data.frame(Conf, AVG)
dd <- do.call(rbind, by(d, d$Conf, FUN=function(x) { x$Scaled <- scale(x$AVG); x}))

# Remove generated row names
rownames(dd) <- NULL

dd
##   Conf  AVG     Scaled
## 1  ACC 0.40  0.7071068
## 2  ACC 0.25 -0.7071068
## 3  B12 0.22 -0.7071068
## 4  B12 0.40  0.7071068
## 5  P12 0.10 -0.7071068
## 6  P12 0.45  0.7071068
## 7  SEC 0.35  0.7071068
## 8  SEC 0.32 -0.7071068 
```

# winapi - Win32 - 什么可能导致不正确的绘图？

> ID：15591705
> 
> 赞同：3
> 
> 时间：2013-03-23T20:28:29.370
> 
> 标签：winapi, drawing

我正在创建一个游戏，其中很多绘图是在 WM_PAINT 消息期间完成的。有几个不同的地方窗口无效，迫使它重绘。我将所有内容都绘制到屏幕外 DC，然后将其绘制到窗口 - 以创建不闪烁的“框架”。

然而，每隔一段时间，一切都会突然开始被错误地绘制。在我使用的五个位图中，前三个或多或少地（但不完全）正确地绘制。如中，所有颜色信息对于这三个都是正确的。在这三个之后绘制的另外两个用错误的颜色绘制 - 我认为白色仍然绘制为白色，但其他一切都绘制为灰色。而且我不是在说灰度，我的意思是除了白色之外的所有东西都是相同的颜色 - 灰色。

此外，当这种情况开始发生时，通常所有东西都被画得太高——大约 20 到 30 像素。此外，字体和消息框停止工作 - 所有文本都以默认字体绘制（但奇怪的是，正确的颜色），消息框仅短暂出现，没有文本，然后消失 - 但必须像常规一样关闭（你必须按 Enter 键，否则如果您单击主窗口，它会在打开消息框接受输入时执行通常的操作 - 闪烁并发出错误提示音）。所以一切都被王室搞砸了。

我已经在这个项目上工作了一段时间，而且我最近才开始看到这个错误——尽管我根本没有修改下面的代码。真的很难测试什么可以做到这一点，因为它似乎只是偶尔发生一次。

这是我在 WndProc 中的 WM_CREATE 和 WM_PAINT 中的代码：

```
case WM_CREATE:
    {
        hdc = GetDC(hWnd);
        hdcmem = CreateCompatibleDC(hdc);
        RECT rc;
        GetClientRect(hWnd, &rc);
        hdcbm = CreateCompatibleBitmap(hdc, rc.right, rc.bottom);
        hbcmem = CreateCompatibleDC(hdcmem);
        hdcbmold = (HBITMAP)SelectObject(hdcmem, hdcbm);

        // Load bitmaps
        bg = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_BACKGROUND));
        mainCont = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_GAME_CONT));
        if(bg == NULL || mainCont == NULL)
            ThrowError("A bitmap failed to load.");
    }
    break;
case WM_PAINT:
{
    PAINTSTRUCT ps;
    BeginPaint(hWnd, &ps);

    // Background
    hdcold = (HBITMAP)SelectObject(hbcmem, bg);
    BitBlt(hdcmem, 0, 0, 237, 196, hbcmem, 0, 0, SRCCOPY);
    BitBlt(hdcmem, 237, 0, 237, 196, hbcmem, 0, 0, SRCCOPY);
    BitBlt(hdcmem, 237 * 2, 0, 237, 196, hbcmem, 0, 0, SRCCOPY);
    BitBlt(hdcmem, 0, 196, 237, 196, hbcmem, 0, 0, SRCCOPY);
    BitBlt(hdcmem, 237, 196, 237, 196, hbcmem, 0, 0, SRCCOPY);
    BitBlt(hdcmem, 237 * 2, 196, 237, 196, hbcmem, 0, 0, SRCCOPY);

    // Main Game Container
    hdcold = (HBITMAP)SelectObject(hbcmem, mainCont);
    BitBlt(hdcmem, 26, 26, 300, 300, hbcmem, 0, 0, SRCCOPY);

    // Side Info
    HBITMAP side = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_SIDEINFO));
    hdcold = (HBITMAP)SelectObject(hbcmem, side);
    BitBlt(hdcmem, 339, 26, 154, 300, hbcmem, 0, 0, SRCCOPY);
    DrawLevelNumber(game.map.levelnumber);

    if (color)
        sprites = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_COLOR_SPRITES));
    else sprites = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_BLACKWHITE_SPRITES));
    hdcold = (HBITMAP)SelectObject(hbcmem, sprites);

    // Find x and y coordinate for the top left of the visible screen
    int x = game.player.x, y = game.player.y, ypos = 0;
    if (x < 4)  x = 4;
    if (x > 27) x = 27;
    if (y < 4)  y = 4;
    if (y > 27) y = 27;
    x -= 4;
    y -= 4;

    // Draw lower layer
    for (int i = 0; i < 9; i++)
    {
        for (int j = 0; j < 9; j++)
        {
            if (game.map.Layer_Two[x + i][y + j] != 0)
            {
                int xpos = game.get_pos(game.map.Layer_Two[x + i][y + j].get(), ypos, false);
                BitBlt(hdcmem, (i * 32) + 32, (j * 32) + 32, 32, 32, hbcmem, xpos, ypos, SRCCOPY);
            }
        }
    }

    // Draw upper layer
    for (int i = 0; i < 9; i++)
    {
        for (int j = 0; j < 9; j++)
        {
            if ((game.map.Layer_Two[x + i][y + j] != 0 && game.map.Layer_One[x + i][y + j] >= 64 && game.map.Layer_One[x + i][y + j] <= 111))
            {
                int xpos = game.get_pos(game.map.Layer_One[x + i][y + j].get(), ypos, true);
                BitBlt(hdcmem, (i * 32) + 32, (j * 32) + 32, 32, 32, hbcmem, xpos + 96, ypos, SRCPAINT);
                BitBlt(hdcmem, (i * 32) + 32, (j * 32) + 32, 32, 32, hbcmem, xpos, ypos, SRCAND);
            } else {
                int xpos = game.get_pos(game.map.Layer_One[x + i][y + j].get(), ypos, false);
                BitBlt(hdcmem, (i * 32) + 32, (j * 32) + 32, 32, 32, hbcmem, xpos, ypos, SRCCOPY);
            }
        }
    }

    // If it isn't started, show title
    if (!game.started)
    {

        HDC tmphdc = CreateCompatibleDC(hdcmem);
        HDC tmp = CreateCompatibleDC(tmphdc);
        RECT rc;
        GetClientRect(hWnd, &rc);
        string str = game.map.leveltitle.substr(0, game.map.leveltitle.length() - 1);
        TCHAR* tch = new TCHAR[str.length()];
        mbstowcs_s(NULL, tch, _tcslen(tch), str.c_str(), str.length());
        HFONT font = CreateFont(25, 0, 0, 0, FW_BOLD, false, false, false, ANSI_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY, FF_DONTCARE, NULL);
        SelectObject(tmp, font);
        DrawText(tmp, tch, str.length(), &rc, DT_CALCRECT);
        rc.right += 16;
        HBITMAP tmpbm = CreateCompatibleBitmap(hdcmem, rc.right, rc.bottom);
        HBITMAP tmpold = (HBITMAP)SelectObject(tmphdc, tmpbm);

        HBRUSH hbr = CreateSolidBrush(RGB(255, 255, 255));
        HPEN pen = CreatePen(PS_SOLID, 1, RGB(255, 255, 255));
        SelectObject(hdcmem, pen);
        SelectObject(hdcmem, hbr);
        Rectangle(hdcmem, 176 - (rc.right / 2), 243, 177 + (rc.right / 2), 248);
        hbr = CreateSolidBrush(RGB(128, 128, 128));
        pen = CreatePen(PS_SOLID, 1, RGB(128, 128, 128));
        SelectObject(hdcmem, pen);
        SelectObject(hdcmem, hbr);
        Rectangle(hdcmem, 176 - (rc.right / 2), 294, 177 + (rc.right / 2), 299);

        HBITMAP left = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_LEFT));
        hdcold = (HBITMAP)SelectObject(hbcmem, left);
        BitBlt(hdcmem, 176 - (rc.right / 2) - 4, 243, 4, 56, hbcmem, 0, 0, SRCCOPY);
        HBITMAP right = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_RIGHT));
        hdcold = (HBITMAP)SelectObject(hbcmem, right);
        BitBlt(hdcmem, 176 + (rc.right / 2) + ((rc.right % 2) != 0), 243, 4, 56, hbcmem, 0, 0, SRCCOPY);

        SelectObject(tmphdc, font);
        SetTextColor(tmphdc, RGB(255, 255, 0));
        SetBkColor(tmphdc, RGB(0, 0, 0));
        DrawText(tmphdc, tch, str.length(), &rc, DT_CENTER);
        BITMAP structBitmapHeader;
        memset( &structBitmapHeader, 0, sizeof(BITMAP) );
        HGDIOBJ hBitmap = GetCurrentObject(tmphdc, OBJ_BITMAP);
        GetObject(hBitmap, sizeof(BITMAP), &structBitmapHeader);
        BitBlt(hdcmem, 176 - (rc.right / 2), 247, structBitmapHeader.bmWidth, structBitmapHeader.bmHeight, tmphdc, 0, 0, SRCCOPY);

        DeleteDC(tmphdc);
        DeleteDC(tmp);
    }

    // If paused
    if (game.paused)
    {
        RECT rc;
        rc.top = 32;
        rc.left = 32;
        rc.bottom = 330;
        rc.right = 330;
        BitBlt(hdcmem, 32, 32, 288, 288, NULL, 0, 0, BLACKNESS);
        HFONT font = CreateFont(50, 0, 0, 0, FW_NORMAL, false, false, false, ANSI_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY, FF_DONTCARE, NULL);
        SelectObject(hdcmem, font);
        SetTextColor(hdcmem, RGB(255, 0, 0));
        SetBkColor(hdcmem, RGB(0, 0, 0));
        DrawText(hdcmem, L"PAUSED", 6, &rc, (DT_CENTER + DT_SINGLELINE + DT_VCENTER));
    }

    nums = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_NUMBERS));
    hdcold = (HBITMAP)SelectObject(hbcmem, nums);
    for (int i = 100; i > 0; i /= 10) // coins and time left
    {
        int tmp;
        if (i == 100)
            tmp = game.coinsleft / 100;
        if (i == 10)
            tmp = ((game.coinsleft % 100) - (game.coinsleft % 10)) / 10;
        if (i == 1)
            tmp = game.coinsleft % 10;
        if (game.coinsleft < i && i > 1)
            tmp = 10;
        int ypos = game.get_num_pos(tmp, (game.coinsleft == 0));
        BitBlt(hdcmem, 417 + ((3 - (int)floor(log10((double)i)) * 17)), 215, 17, 23, hbcmem, 0, ypos, SRCCOPY);

        if (i == 100)
            tmp = game.timeleft / 100;
        if (i == 10)
            tmp = ((game.timeleft % 100) - (game.timeleft % 10)) / 10;
        if (i == 1)
            tmp = game.timeleft % 10;
        if (game.timeleft < i && i > 1)
            tmp = 10;
        if (game.map.timelimit == 0)
            tmp = 11;
        ypos = game.get_num_pos(tmp, (game.timeleft < 16 || game.map.timelimit == 0));
        BitBlt(hdcmem, 369 + ((3 - (int)floor(log10((double)i))) * 17), 125, 17, 23, hbcmem, 0, ypos, SRCCOPY);
    }

    if (game.onhint)
    {
        HBITMAP sidebg = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_SIDEBG));
        hdcold = (HBITMAP)SelectObject(hbcmem, sidebg);
        BitBlt(hdcmem, 353, 165, 127, 146, hbcmem, 0, 0, SRCCOPY);
        HFONT font = CreateFont(18, 0, 0, 0, FW_BOLD, true, false, false, ANSI_CHARSET, OUT_DEFAULT_PRECIS, CLIP_DEFAULT_PRECIS, DEFAULT_QUALITY, FF_DONTCARE, NULL);
        SelectObject(hdcmem, font);
        SetTextColor(hdcmem, RGB(0, 255, 255));
        SetBkColor(hdcmem, RGB(0, 0, 0));
        RECT rc;
        rc.top = 168;
        rc.left = 356;
        rc.bottom = 308;
        rc.right = 477;
        string str = "Hint: " + game.map.hint;
        TCHAR* tch = new TCHAR[str.length()];
        mbstowcs_s(NULL, tch, _tcslen(tch), str.c_str(), str.length());
        DrawText(hdcmem, tch, str.length(), &rc, DT_CENTER + DT_WORDBREAK);
    } else {
        hdcold = (HBITMAP)SelectObject(hbcmem, sprites);                // LOWER SIDE INFO
        if (game.player.key1 > 0)
            BitBlt(hdcmem, 352, 247, 32, 32, hbcmem, 192, 160, SRCCOPY);
        else BitBlt(hdcmem, 352, 247, 32, 32, hbcmem, 0, 0, SRCCOPY);
        if (game.player.key2 > 0)
            BitBlt(hdcmem, 384, 247, 32, 32, hbcmem, 192, 128, SRCCOPY);
        else BitBlt(hdcmem, 384, 247, 32, 32, hbcmem, 0, 0, SRCCOPY);
        if (game.player.key3 > 0)
            BitBlt(hdcmem, 416, 247, 32, 32, hbcmem, 192, 224, SRCCOPY);
        else BitBlt(hdcmem, 416, 247, 32, 32, hbcmem, 0, 0, SRCCOPY);
        if (game.player.key4)
            BitBlt(hdcmem, 448, 247, 32, 32, hbcmem, 192, 192, SRCCOPY);
        else BitBlt(hdcmem, 448, 247, 32, 32, hbcmem, 0, 0, SRCCOPY);
        if (game.player.mod1)
            BitBlt(hdcmem, 352, 279, 32, 32, hbcmem, 192, 256, SRCCOPY);
        else BitBlt(hdcmem, 352, 279, 32, 32, hbcmem, 0, 0, SRCCOPY);
        if (game.player.mod2)
            BitBlt(hdcmem, 384, 279, 32, 32, hbcmem, 192, 288, SRCCOPY);
        else BitBlt(hdcmem, 384, 279, 32, 32, hbcmem, 0, 0, SRCCOPY);
        if (game.player.mod3)
            BitBlt(hdcmem, 416, 279, 32, 32, hbcmem, 192, 320, SRCCOPY);
        else BitBlt(hdcmem, 416, 279, 32, 32, hbcmem, 0, 0, SRCCOPY);
        if (game.player.mod4)
            BitBlt(hdcmem, 448, 279, 32, 32, hbcmem, 192, 352, SRCCOPY);
        else BitBlt(hdcmem, 448, 279, 32, 32, hbcmem, 0, 0, SRCCOPY);
    }
    BitBlt(hdc, 0, 0, 518, 401, hdcmem, 0, 0, SRCCOPY);

    EndPaint(hWnd, &ps);
}
    break;
case WM_DESTROY:
    SelectObject(hdc,hdcold);
    DeleteDC(hdcmem);
    DeleteDC(hbcmem);
    ReleaseDC(hWnd, hdc);
    DeleteObject(bg);
    PostQuitMessage(0);
    break; 
```

我也非常感谢任何人就我的代码中的语法、效率和/或更好的做事方式提供的任何建议/批评。我对 Win32 很陌生。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-24T11:32:30.033

您正在泄漏 GDI 对象。

每次创建画笔或加载位图时，您都在创建 GDI 对象。Windows 限制了您可以创建的 GDI 对象的数量。如果您重复创建对象而不删除它们，您将达到限制并且创建更多对象将失败。发生这种情况时，您的显示开始出现错误 - 您看到错误的颜色、默认字体等。

任务管理器将向您显示一个进程已分配的 GDI 对象的数量（在“进程”选项卡中，转到“查看”|“选择列”）。该值可能会略有波动，但不应随着时间的推移而增长。

使用 GDI 的标准模式是：

1.  创建您的对象（例如，使用 CreateSolidBrush 的画笔）。
2.  使用 SelectObject 将您的对象选择到设备上下文中，并记住原始对象（返回值）。
3.  做你的画什么的。
4.  使用 SelectObject 将原始对象选择回设备上下文。（当然，这也会从设备上下文中取消选择您的对象。）
5.  使用 DeleteObject 删除您的对象。

您只执行了第 2 步的一半，并跳过了第 4 步和第 5 步。

然后注意步骤 1 和 5 不需要在每次绘制操作中重复。您可以将它们分别移动到程序初始化和终止。并且可以跳过程序终止时的清理，因为操作系统无论如何都会这样做。

最后，加载位图是一个比较慢的操作，所以你绝对不想重复这样做。这就是 GDI 为对象提供句柄的意义所在。

# html - 设置纵向屏幕的背景图像

> ID：15591706
> 
> 赞同：0
> 
> 时间：2013-03-23T20:28:30.077
> 
> 标签：html, css

问题在于覆盖 90% 屏幕并显示背景图像的 div。CSS是：

```
div.invite-bg {
    background-image:url('../img/b1g.jpg');
    background-repeat: no-repeat;
    background-position: center;
    background-size: 92em 52em;
    display: compact;
    width: 100%;
    height: 90%;
    position: absolute;
    top: 10%;
    left:0;
} 
```

它的高度不适用于 iPad 或 iPhone 的纵向屏幕。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:35:41.963

您使用 display: compact 这让我认为您遇到了元素显示为内联元素的情况。尝试将其更改为 display: block;

使用 display: compact 的元素可以显示为内联元素或块元素，具体取决于以下元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:42:40.670

您可以尝试将背景大小调整为`cover`或`contain`。

更多细节可以在[这里](https://stackoverflow.com/questions/1341358/set-size-on-background-image-with-css)找到。

# vb.net - 解决：winsock资源不足，无法完成socket连接发起

> ID：15591708
> 
> 赞同：3
> 
> 时间：2013-03-23T20:28:47.407
> 
> 标签：vb.net, web-services, iis

我有两个系统，一个是通过网络服务发送大量数据（大约 1GB）。首先，它将数据分成块，然后在请求时将其发送给客户端，并提供额外的信息。

数据不直接作为字节数组发送，而是放入我创建的具有两个成员的特殊类中：

1) 消息：我使用它指定如何处理块 2) Obj：表示数据的字节数组

所以基本上服务器填充这个结构然后它序列化整个对象，最后将它发送给客户端。每个块大约 4KB

再次重复多次，因此数据传输量可能是 1GB 或 2GB。当我尝试运行它时，我收到此错误：

**System.InsufficientMemoryException 被捕获 Message="Insufficient winsock 资源可用于完成套接字连接启动。"**

当我尝试时：**netstat -an -p TCP**

我有这样的东西...

TCP 127.0.0.1:58759 127.0.0.1:57469 TIME_WAIT

TCP 127.0.0.1:58760 127.0.0.1:57469 TIME_WAIT

TCP 127.0.0.1:58761 127.0.0.1:57469 TIME_WAIT

TCP 127.0.0.1:58762 127.0.0.1:57469 TIME_WAIT

TCP 127.0.0.1:58763 127.0.0.1:57469 TIME_WAIT

TCP 127.0.0.1:58764 127.0.0.1:57469 TIME_WAIT

TCP 127.0.0.1:58765 127.0.0.1:57469 TIME_WAIT

TCP 127.0.0.1:58766 127.0.0.1:57469 TIME_WAIT

...

增加到大约：

...

TCP 127.0.0.1:65531 127.0.0.1:57469 TIME_WAIT

TCP 127.0.0.1:65532 127.0.0.1:57469 TIME_WAIT

TCP 127.0.0.1:65533 127.0.0.1:57469 TIME_WAIT

应该对此有一个热修复 - 在先前的答案中，但它不起作用。热修复在这里：

[http://support.microsoft.com/kb/2577795](http://support.microsoft.com/kb/2577795)

我之前使用过类似的代码，但我没有进行序列化，而是直接将数据作为字节数组发送，并且效果很好。除了使用我创建的封装类和序列化过程之外，我发现代码之间没有区别。

谁能解释我做错了什么？

谢谢你。

============================================

我找到了一种复制此问题的简单方法：

首先创建一个具有以下方法的 VB.NET Web 服务：

```
<WebMethod(enablesession:=False)> _
Public Function HelloWorld() As Byte()
    Dim B(0 To 1000) As Byte
    Return B
End Function 
```

接下来为它创建一个客户端，如下所示：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim T As New ServiceReference1.Service1SoapClient
    T.Open()
    Dim I As Integer
    For I = 0 To 1000000
        T.HelloWorld()
        Me.Text = I
        Application.DoEvents()
    Next
End Sub 
```

你会得到这个错误。希望有人对此有解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-31T16:37:18.153

尝试在通话之间关闭/处置客户端。

`For I as Integer = 0 To 1000000 Using T As New ServiceReference1.Service1SoapClient T.Open() T.HelloWorld() Me.Text = I End Using Application.DoEvents() Next`

# sql-server - 在简单存储过程中正确使用 SCOPE_IDENTITY 函数

> ID：15591713
> 
> 赞同：6
> 
> 时间：2013-03-23T20:29:10.080
> 
> 标签：sql-server, stored-procedures

我想简单地将一些信息从一个简单的客户端发送到一个日志文件，然后使用创建的身份进行进一步处理。

下面的用法`SCOPE_IDENTITY()`正确吗？

```
CREATE PROCEDURE [dbo].[LogSearch]
    @userName       VARCHAR(50),
    @dateTimeStart  DATETIME        
AS
BEGIN
SET NOCOUNT ON;

    INSERT INTO [WH].[dbo].[tb_Searches]
            (
            [UserName],
            [DateTimeStart]
            )
    SELECT  @userName, 
        @dateTimeStart;

    SELECT SCOPE_IDENTITY() AS ProfileKey;

END; 
```

**编辑**

我已将代码编辑为以下内容：

```
ALTER PROCEDURE [dbo].[LogSearch]
    @userName   VARCHAR(50),
    @dateTimeStart  DATETIME
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [WH].[dbo].[tb_Searches]
            (
            [UserName],[DateTimeStart]
            )
    VALUES  (@userName, @dateTimeStart);

    RETURN SCOPE_IDENTITY();

END; 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-04T21:57:36.017

似乎这是最好的方法 - 可以看到一些参考建议仅用`RETURN`作传达状态或错误的一种方式，因此`OUTPUT`参数是更好的做法：

```
ALTER PROCEDURE [dbo].[LogSearch]
    @userName      VARCHAR(50),
    @dateTimeStart DATETIME,
    @searchID      INT OUTPUT
AS
BEGIN
    SET NOCOUNT ON;

    INSERT INTO [WH].[dbo].[tb_Searches]
                (
                UserName,
                DateTimeStart
                )
    VALUES  
                (
                @userName, 
                @dateTimeStart
                );

    SET @searchID = SCOPE_IDENTITY();

END; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-22T17:08:48.263

您还可以`SCOPE_IDENTITY`在两个单独的语句中使用，例如：

假设该表当然有一个身份字段

```
Insert into [ABCTable]
([A], [B])
select 'WhateverA', 'WhateverB' 
```

*然后*使用子句`SCOPE_IDENTITY()`中的函数，例如：`Where`

```
Update [ABCTable] Set [A] = 'UpdateA', [B] = 'UpdateB'
Where IdentityField = SCOPE_IDENTITY() 
```

因此，scope_identity 是指向刚刚插入的记录的可靠链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-13T17:39:54.420

```
RETURN SCOPE_IDENTITY() 
```

`0`正在用 Dapper返回一个。
我把它换成了

```
SELECT SCOPE_IDENTITY() 
```

现在它正在返回实际值。

# html - 单击表格行时显示自定义模式

> ID：15591715
> 
> 赞同：3
> 
> 时间：2013-03-23T20:29:16.030
> 
> 标签：html, knockout.js, jquery-click-event, durandal

我想创建自定义模式。基本上，我有一个表，其中有行。当用户单击一行时，我希望出现一个弹出窗口。我正在关注如何在此链接中创建自定义模式的描述：http: [//durandaljs.com/documentation/Showing-Message-Boxes-And-Modals/](http://durandaljs.com/documentation/Showing-Message-Boxes-And-Modals/)

根据描述，我认为我需要两个类来创建自定义模式。一种是视图，另一种是模态。

我实际上在链接中使用了完全相同的代码的两个类。

我的问题是，单击一行时如何显示自定义模式？

假设这是我认为我的表`index.html`

```
<table class="table table-bordered table-hover">
  <thead>
    <tr>  
      <th></th>
      <th>Item</th>
      <th>Price</th>
      <th>Quantity</th>
    </tr>
  </thead>  
  <tbody>     
  </tbody>
</table> 
```

假设我有一个名为`messageBox.html` Here's the code 的视图：

```
<div class="messageBox">
  <div class="modal-header">
    <h3 data-bind="html: title"></h3>
  </div>
  <div class="modal-body">
    <p class="message" data-bind="html: message"></p>
  </div>
  <div class="modal-footer" data-bind="foreach: options">
    <button class="btn" data-bind="click: function () { $parent.selectOption($data); }, html: $data, css: { 'btn-primary': $index() == 0, autofocus: $index() == 0 }"></button>
  </div>
</div> 
```

还有一个模态叫做`messageBox.js`. 这是它的代码：

```
define(function() {
  var MessageBox = function(message, title, options) {
    this.message = message;
    this.title = title || MessageBox.defaultTitle;
    this.options = options || MessageBox.defaultOptions;
  };

  MessageBox.prototype.selectOption = function (dialogResult) {
    this.modal.close(dialogResult);
  };

  MessageBox.defaultTitle = '';
  MessageBox.defaultOptions = ['Ok'];

  return MessageBox;
}); 
```

如何将表格点击事件与我创建的这个自定义模式联系起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:15:55.027

要显示模态，就像使用 compose 绑定一样。您将要显示的[视图模型传递给它，视图模型定位器](http://durandaljs.com/documentation/View-Locator/)将根据您的视图模型找到视图。

这是表格：

```
<table class="table table-bordered table-hover">
  <thead>
    <tr>  
      <th></th>
      <th>Item</th>
      <th>Price</th>
      <th>Quantity</th>
    </tr>
  </thead>  
  <tbody data-bind="foreach: items">     
    <tr data-bind="click: $parent.showMessage">
      <td data-bind="text: item"></td>
      <td data-bind="text: price"></td>
      <td data-bind="text: quantity"></td>
    </tr>
  </tbody>
</table> 
```

这是绑定到表格的视图模型。

```
define(['durandal/app', 'durandal/system', 'messageBox'], function(app, system, MessageBox) {
  return {
    items: ko.observableArray([
      { item: 'fruity pebbles', price: 4.5, quantity: 1 },
      { item: 'captain crunch', price: 3.5, quantity: 1 },
      { item: 'honey bunches of oats', price: 4, quantity: 1 }
    ]),
    showMessage: function(item) {
      var msg = 'your purchasing' + item.name;
      var mb = new MessageBox(msg)
      app.showModal(mb).then(function(dialogResult){
        system.log('dialogResult:', dialogResult);
      });
    }
  };
}); 
```

`app.showModal`接受您要显示的视图模型并返回一个[promise](http://api.jquery.com/promise/)。该承诺被传递给您传递给`this.modal.close(dialogResult)`.

# php - 使用 preg_replace 或 htaccess 替换 url 字符串

> ID：15591719
> 
> 赞同：1
> 
> 时间：2013-03-23T20:30:09.600
> 
> 标签：php, mysql, binary

我在泡菜里。我刚接手了一份新工作，老程序员使用 BLOB/bin 将内容输入到 MYSQL 中。

我需要 1000 行来“查找和替换”一个新的图像 url。

当我导出 MYSQL 数据库时，我无法进行查找和替换，因为数据是二进制的？

我不确定我的选择是什么？

我正在考虑使用 PHP preg_replace 或尝试为这些图像编写 .htaccess 重写或重定向规则？

www.oldsite.com/images/

至

www.newsite.com/images/

真不知道哪种方式更好更高效？

我希望我知道如何用二进制文件查找和替换所有文件，或者是否有可能？

感谢您对此的任何帮助或提示！

**编辑**

伟大的！所以我可以做这样的事情

```
$myString = rawurldecode($offer['description']);
$newString = preg_replace('/www.myoldsite.com/', 'www.mynewsite.com', $myString); 
echo $newString; 
```

**编辑 #2 和结论 **

我最终弄清楚了如何进行查找和替换！感谢@user113215

最后使用下面的代码，效果很好！！带有二进制文件的事件！！

```
UPDATE table_name SET column = REPLACE(column_name, 'www.old.com/', 'www.new.com/') 
```

谢谢！希望这对其他人也有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:06:24.777

在代码中，您选择要显示的字段，使用 str_replace。当代码很好时，它有一个用于该字段的 getter，或者至少有一些中央代码来执行 mysql 选择。str_replace 速度很快，并且不会占用太多资源。

# ruby - 动态连接到 Rails 中的多个数据库

> ID：15591720
> 
> 赞同：0
> 
> 时间：2013-03-23T20:30:12.003
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.2, rails-activerecord, multiple-databases

我的项目需要连接到 Rails 项目中的多个数据库。事先不知道数据库信息，因此`config/database.yml`不能将数据库信息包含在其中。这是我解决这个问题的代码：

```
mclass ConnectionManager
 @@connections_map = nil

 def self.create_connection(klass_name,database_params)
    @@connections_map[klass_name] = Class.new(ActiveRecord::Base) do |c|
      #c.abstract_class = true
      c.establish_connection(database_params)
    end
 end

 def self.connections
   @@connections_map = {} unless @@connections_map.present?
   mydata = MyModel.where(.....)
   mydata.each do |data|
     klass_name = data.name.camelcase
     create_connection(klass_name,data.database_params) unless @@connections_map[klass_name]
   end
   @@connections_map
 end
end 
```

现在理想情况下，我应该能够调用`ConnectionManager.connections`which 应该返回具有适当数据库连接的类对象。

但问题是所有新创建的类都有相同的连接信息。创建的最后一个连接将被所有以前的类对象覆盖。

这种方法有什么问题？

# c# - Caliburn.Micro unit test

> ID：15591723
> 
> 赞同：3
> 
> 时间：2013-03-23T20:30:27.483
> 
> 标签：c#, unit-testing, caliburn.micro

I am doing my first steps in MVVM.

I am using Caliburn.Micro as my MVVM framework.

I have the following code:

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Windows;
using System.Globalization;

using Caliburn.Micro;

namespace MY_PROJECT.ViewModels
{   
    [Export(typeof(MainViewModel))]
    public class MainViewModel : Screen
    {     
        private readonly IWindowManager _windowManager = null;

        private readonly IEventAggregator _events;

        private string _title = string.Empty;          

        private WindowState _windowState = WindowState.Normal;

        public string Title
        {
            get
            {
               return _title;
            }
            set
            {
               _title = value;
               NotifyOfPropertyChange(() => Title);
            }
        }

        public WindowState WindowState
        {
            get
            {
                return _windowState;
            }
            set
            {
                _windowState = value;
                NotifyOfPropertyChange(() => WindowState);
            }
        }

        public void ChangeTittle(string title)
        {
             Title = title;
        }

        public void ToggleWindowState()
        {
             WindowState = WindowState == WindowState.Maximized ? WindowState.Normal : WindowState.Maximized;
        }

        [ImportingConstructor]
        public MainViewModel(IWindowManager windowManager, IEventAggregator events)
        {
            _windowManager = windowManager;
            _events = events;
            _events.Subscribe(this);
        }
  } 
```

I now want to write some simple unit tests to test my viewmodel.

Any suggestions of how to do that?

Caliburn.Micro's documentation seems to be missing this information.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T10:55:47.747

Ok you could just run the entire app through the IoC container and bootstrap the whole thing, this way you get actual concrete implementations for all your interfaces. The downside to that is that you will need everything available (databases, web services etc) and can be more difficult to test an application if you pretty much need it all running (and it may be much slower to execute tests since actual work is being done). If you can easily go this route, then by all means use it.

Alternatively you could mock the behaviour/state of the objects using mocks or stubs by using a mocking framework such as Moq

With Moq you setup your test environment so that your interfaces and classes are represented by `Mock<T>` (mock objects) which you specify the behaviour for. Then you test against that behaviour in your `ViewModels`

Here's an example set of tests using Moq and NUnit for your `MainViewModel` in it's current incarnation:

```
// Decorate with test fixture attribute so NUnit knows it's a test
[TestFixture]
class MainViewModelTests
{           
    // The interfaces/instances you will need to test with - this is your test subject
    MainViewModel _mainVM;

    // You can mock the other interfaces:
    Mock<IWindowManager> _windowManager;
    Mock<IEventAggregator> _eventAggregator; 

    // Setup method will run at the start of each test
    [SetUp]
    public void Setup() 
    {
        // Mock the window manager
        _windowManager = new Mock<IWindowManager>();               

        // Mock the event aggregator
        _windowManager = new Mock<IEventAggregator>(); 

        // Create the main VM injecting the mocked interfaces
        // Mocking interfaces is always good as there is a lot of freedom
        // Use mock.Object to get hold of the object, the mock is just a proxy that decorates the original object
        _mainVM = new MainViewModel(_windowManager.Object, _eventAggregator.Object);
    }

    // Create a test to make sure the VM subscribes to the aggregator (a GOOD test, I forget to do this a LOT and this test gives me a slap in the face)
    [Test]
    public void Test_SubscribedToEventAggregator()
    {
        // Test to make sure subscribe was called on the event aggregator at least once
        _eventAggregator.Verify(x => x.Subscribe(_mainVM));
    }

    // Check that window state toggles ok when it's called
    [Test]
    public void Test_WindowStateTogglesCorrectly()
    {
        // Run the aggregator test at the start of each test (this will run as a 'child' test)
        Test_SubscribedToEventAggregator();

        // Check the default state of the window is Normal
        Assert.True(_mainVM.WindowState == WindowState.Normal);

        // Toggle it
        _mainVM.ToggleWindowState();

        // Check it's maximised
        Assert.True(_mainVM.WindowState == WindowState.Maximised);

        // Check toggle again for normal
        _mainVM.ToggleWindowState();

        Assert.True(_mainVM.WindowState == WindowState.Normal);
    }

    // Test the title changes correctly when the method is called
    [Test]
    public void Test_WindowTitleChanges()
    {
         Test_SubscribedToEventAggregator();

         _mainVM.ChangeTitle("test title");
         Assert.True(_mainVM.Title == "test title");
    }
} 
```

You can see how you can test state and behaviour, I expected a certain VM state when VM methods such as `ChangeTitle` were called, and I also expected a behaviour (I expected `Subscribe(X)` to be called on the aggregator at least once at the start of each test).

The method decorated with `[SetUp]` will be called at the start of each test. There are teardown and other methods (including one to setup the entire test fixture, i.e. it only runs once per fixture)

The key thing here is probably that for CM you don't actually need to mock any behaviour in the event aggregator since CM expects you to implement `IHandle<T>` for your event aggregator messages. Making these subscriber methods an interface implementation means that you will already have public methods on your object which you can call to simulate event aggregator calls.

So for instance you can use

```
public class MainViewModel : IHandle<someEventMessageArgument> // (this is your subscriber interface)
{ 
    // (and this is the corresponding method)
    public void Handle(someEventMessageArgument message) 
    { 
        // do something useful maybe change object state or call some methods
    }
}

// Test the method - you don't need to mock any event aggregator behaviour since you have tested that the VM was subscribed to the aggregator. (OK CM might be broken but that's Robs problem :))
[Test]
Test_SomeEventDoesWhatYouAreExpecting()
{
    _mainVM.Handle(someEventMessageArgument);

    // Assert that what was supposed to happen happened...
    Assert.True(SomethingHappened);
} 
```

Check out the Moq quickstart here:

[http://code.google.com/p/moq/wiki/QuickStart](http://code.google.com/p/moq/wiki/QuickStart)

# ios - UITableView 没有调用 cellForRowAtIndexPath

> ID：15591725
> 
> 赞同：0
> 
> 时间：2013-03-23T20:30:32.223
> 
> 标签：ios, objective-c, xcode, uitableview, interface-builder

我正在尝试创建一个以地图为标题的视图控制器（工作），但我的 tableview 不会填充，并且该`cellForRowAtIndexPath`方法永远不会被调用。有什么建议么？

代码在这里很重要：[https](https://gist.github.com/ohwutup/5229232) ://gist.github.com/ohwutup/5229232 以下是我的 IB 设置的一些屏幕截图： ![UITableView](../Images/907d3483460f7c55a373f3d4a9afe7a4.png) ![文件所有者](../Images/a225c938bbfbdd0474ffa31128260b19.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:25:52.767

在你的`viewDidLoad`方法中，添加这个。

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.title = @"Nearby";

    self.tableView.tableHeaderView = _mapView;
    self.tableView.delegate = self;
    self.tableView.dataSource = self;
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T01:15:09.083

需要`[self reloadData]`在我的 json 请求的完成块中做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:41:35.613

您的 tableview 的数据源和委托应该是您的视图控制器 DOViewController。然后你的表格视图将正确填充。更改 IB 中的 outlet 以指向您的视图控制器类。

# typescript - 浏览器兼容代码无法在 ts 中编译

> ID：15591729
> 
> 赞同：0
> 
> 时间：2013-03-23T20:30:55.537
> 
> 标签：typescript

我正在尝试将其添加到 .ts 文件的底部，但我在 VS2012 [under: **if (!Object.construct)** ] 中收到一个错误，即未定义构造和扩展。解决方案？

```
if (!Object.construct) {
  Object.construct = function(base) {
    var instance = Object.create(base);
    if (instance.initialize)
      instance.initialize.apply(instance, [].slice.call(arguments, 1));
    return instance;
  }
}

if (!Object.extend) {
  Object.extend = function(destination, source) {
    for (var property in source) {
      if (source.hasOwnProperty(property))
        destination[property] = source[property];
    }
    return destination;
  };
} 
```

试过这个：

```
interface Object {
    extend(destination, source): any;
    construct(base): any;
}

class Game { etc// 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T21:51:19.783

您不想在此处扩展 Object 接口。这是由所有对象实例（即所有对象上的方法，例如 toString 和 valueOf）继承的。从上面看，您似乎正在尝试向 Object 构造函数添加静态（即类似于 Object.create 和 Object.keys 等方法）。

Object 构造函数在 lib.d.ts 文件中声明为 var。您不能在 0.8.x 版本的 TypeScript 中重新打开和扩展声明的变量。最简单的解决方案是为您的项目制作 lib.d.ts 的副本并修改“declare var Object”语句以添加您的额外功能。如果您引用自己的 lib.d.ts 文件（即项目文件中的“\\”），它将使用此文件而不是默认的 lib.d.ts。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T02:28:07.330

您需要扩展 Object 接口：

```
interface Object {
    extend(destination, source): any;
    construct(base): any;
} 
```

将其放在代码的根上下文中（而不是在模块内）。您还应该添加输入，即使它只是将参数定义为“任何”

# database - OFBiz 应用程序的不同部分可以连接到不同的数据库吗？

> ID：15591731
> 
> 赞同：1
> 
> 时间：2013-03-23T20:32:23.340
> 
> 标签：database, ofbiz, multi-tenant

OFBiz 应用程序的不同部分可以连接到不同的数据库吗？例如： -Party Management => 连接到数据库 1 -Catalog Management => 连接到数据库 2 -在 Ofbiz 应用程序的同一实例中工作。我的计划是在 OFBiz 中创建租户，并使 OFBiz 的不同部分连接到租户，而其他部分连接到默认/原始 OFBiz 数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T12:50:01.323

简而言之，是的，你可以，长的答案可能是你不想这样做，因为实体级别的现有应用程序间依赖关系。

首先您必须了解它是如何组合在一起的： Ofbiz 实体通常在 entitymodel.xml 中定义并在 ofbiz-component.xml 中引用 大多数现有组件只有此级别的配置。通过这样的配置，实体属于名为“org.ofbiz”的默认组。然后在 entityengine.xml 中将该组分配给一个数据源：

```
<group-map group-name="org.ofbiz" datasource-name="localpostgres"/> 
```

这就是将表分配给组的方式，然后将组分配给数据库。

因此，要将组件中的所有实体分配给新数据库，您必须执行以下操作：

1.  在每个组件中创建一个新的实体组定义并将实体分配给该组：`<entity-group group="org.ofbiz.tenant" entity="Tenant"/>`

2.  从 ofbiz-component.xml 引用组定义 `<entity-resource type="group" reader-name="main" loader="main" location="entitydef/entitygroup.xml"/>`

3.  在 entityengine.xml 中，将新组分配给不同的数据源： `<group-map group-name="org.ofbiz.tenant" datasource-name="localpostgres"/>`

例如，看看 olap 和租户组。

如果您正在创建一个新组件，或者如果您想为专用文件夹中的组件执行此操作，您可以执行上述步骤并将您的实体放在单独的数据库中。如果您想对框架或应用程序文件夹中的现有组件（如您提到的内容组件）执行此操作，您会注意到组件具有依赖关系（实体关系），并且将一些实体移动到单独的数据库会破坏这种情况。

# asp.net-mvc - MVC - 从 View 写入 Head 部分

> ID：15591738
> 
> 赞同：2
> 
> 时间：2013-03-23T20:33:10.247
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我需要在视图中的页面部分中呈现元标记。例如，视图包含所有产品信息，我想将产品信息添加到头部但只能从产品页面访问。

有没有人有任何想法？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-23T21:18:25.363

在您的布局中，在头部定义一个部分。我们可以使用[`RenderSection`](http://msdn.microsoft.com/en-us/library/gg537886%28v=vs.98%29.aspx)辅助方法来做到这一点。

`RenderSection`当您想要在布局页面中呈现可选内容部分时使用该方法。所以我们将像这样更新我们的布局

```
<head>
  <title>@ViewBag.Title</title>
  <script src="@Url.Content("~/Scripts/jquery.min.js")" type="text/javascript" />
  @RenderSection("MetaContent", false)
</head>
<body>
 @RenderBody()
</body> 
```

现在在您的页面/视图中，您可以传递此部分的内容。我会在我的视图模型/基础视图模型中添加一个新属性来保存元描述。因此，在您的 GET Action 方法中，您设置了`MetaDescription`属性值。

在您看来，这是对 ProductViewModel 的强类型

```
@model ProductViewModel
<h1>@Model.ProductName</h1>
<div>@Model.ProductDesc</div>
@section MetaContent
{
  <meta name="description" content="@Model.MetaDescription" />
} 
```

当我们在布局中定义部分时，我们将`false`其用作第二个参数值。这意味着不需要此部分。您不需要从所有视图/页面传递元信息。

查看 Scottgu关于部分和布局的[博客文章。](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T20:36:20.260

查看定义和使用部分 - 它们允许您从视图写入其他区域。

或者在 ViewBag 中定义元标记项，在头部写出 ViewBag.Meta 作为元标记并在控制器中填充 ViewBag 属性 - 顺序工作正常。

# javascript - 画布旋转无法正常工作

> ID：15591740
> 
> 赞同：6
> 
> 时间：2013-03-23T20:33:14.267
> 
> 标签：javascript, canvas, rotation, html5-canvas

我在尝试通过 JavascriptCanvas API 旋转矩形时遇到问题。

这是代码：

```
G = {};
// get canvas context
G.ctx = document.getElementById('canvas').getContext('2d');

var x = 200;
var y = 100;
var w = 30;
var h = 70;

G.ctx.fillRect(x, y, w, h);

// Why is this not working??
G.ctx.save();
G.ctx.translate(x, y);
G.ctx.rotate(30*(Math.PI/180));
G.ctx.fillRect(x, y, w, h);
G.ctx.restore(); 
```

由于某种原因，该代码仅绘制了第一个矩形。

这是 JSfiddle：http: [//jsfiddle.net/5YZbd/1/](http://jsfiddle.net/5YZbd/1/)

任何澄清都非常受欢迎！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T20:45:43.413

我想到了。

一旦我将画布翻译成矩形的 x/y - 它的位置应该被称为 0/0，因为这就是翻译后画布原点的位置。

这是工作代码：

```
G.ctx.save();
G.ctx.translate(x, y);
G.ctx.rotate(30*(Math.PI/180));
G.ctx.fillRect(0, 0, w, h);
G.ctx.restore(); 
```

# maven - 如何使用 Maven 程序集插件 jar-with-dependencies 在 JAR 中包含自定义文件

> ID：15591742
> 
> 赞同：2
> 
> 时间：2013-03-23T20:33:19.200
> 
> 标签：maven, pom.xml, maven-assembly-plugin

我需要在最终的 JAR 中包含自定义文件 (/com/app/log4.properties)。

使用 jar-with-dependencies 时如何将一个文件添加到我的 JAR？

现在该 JAR 中只有类文件。我在用着：

```
mvn assembly:assembly 
```

我的 pom.xml：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <encoding>UTF-8</encoding>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <mainClass>com.app.Start</mainClass>
                    </manifest>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id> <!-- this is used for inheritance merges -->
                    <phase>package</phase> <!-- bind to the packaging phase -->
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T20:35:03.850

将需要在最终工件中的非 Java 文件放在 中`src/main/resources`，在这种情况下：

```
src/main/resources/com/app/log4j.properties 
```

# postgresql - 无法创建用户 postgres：角色“postgres”不存在

> ID：15591749
> 
> 赞同：11
> 
> 时间：2013-03-23T20:33:41.043
> 
> 标签：postgresql, ubuntu, installation, role

我在 ubuntu 12.04 服务器上，我正在尝试安装 postgresql。截至目前，我已成功安装它，但无法配置它。我需要创建一个角色才能继续前进，我在终端中运行了这个命令：

`root@hostname: createuser -s -r postgres`

它说：

`createuser: could not connect to database postgres: FATAL: role "root" does not exist`

好的，所以我做了：

`su - postgres`

然后再试一次

`postgres@hostname: createuser -s -r postgres`

我得到了错误

`createuser: could not connect to database postgres: FATAL: role "postgres" does not exist`

当我这样做时，我得到了同样的错误

`psql -d dbname`

它就像一个循环，我无法创建角色`postgres`，因为角色`postgres`尚不存在。

我该如何解决 ？

postgres 版本好像是 9.1.x，ubuntu 版本好像是 12.10

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-25T07:37:52.560

原来我已经安装`postgres-xc`并`postgresql`在我的机器上。我不得不完全关闭 postgres-xc。这样做有点困难，因为总是出现错误`--purge remove postgres-xc`并且卸载无法继续。

似乎有某种包装错误。（[有关启动板的详细信息](https://bugs.launchpad.net/ubuntu/+source/postgres-xc/+bug/1084849)）。

最终，我最终这样做[是](https://bugs.launchpad.net/ubuntu/+source/postgres-xc/+bug/1084849/comments/7)为了让它发挥作用。

之后，我卸载了 postgresql 并将其重新安装以使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:38:41.233

阅读[postgresql 教程](http://www.postgresql.org/docs/9.1/static/tutorial-createdb.html)，不管是 Ubuntu 还是其他 Linux。

在创建角色或在全新安装上创建其他任何内容之前进行编辑，您需要创建数据库集群：您创建了吗？

```
initdb -D /usr/local/pgsql/data 
```

您需要`postgres`在 linux 机器上以用户身份登录。[这里](http://www.postgresql.org/docs/9.1/static/creating-cluster.html)有更多信息。

# java - Java 捕获进程的所有输出并将其记录到文件中

> ID：15591751
> 
> 赞同：1
> 
> 时间：2013-03-23T20:33:47.720
> 
> 标签：java, process

我正在尝试在java中记录所有应用程序的输出，由于某种原因它只捕获前两行我知道应用程序输出比这更多这是我的代码

```
logOut = new BufferedWriter(new FileWriter("WebAdmin.log"));

        ProcessBuilder procBuild = new ProcessBuilder(
            "java", "-Xmx1G", "-Xms512M", "-jar", "TekkitServer\\Tekkit.jar", "nogui", "-nojline"
        );
        server = procBuild.start();

        inputStream = new BufferedReader(new InputStreamReader(server.getInputStream()));
        errorStream = new BufferedReader(new InputStreamReader(server.getErrorStream()));
        outputStream = new BufferedWriter(new OutputStreamWriter(server.getOutputStream()));

        String line = "";

        while(!shutdown){
            while((line = inputStream.readLine()) != null){
                logOut.write(line+"\r\n");
                logOut.flush();
                System.out.println(line);
            }
            System.out.println("checking error stream");
            while((line = errorStream.readLine()) != null){
                logOut.write(line+"\r\n");
                logOut.flush();
                System.out.println(line);
            }
        }

        System.out.println("Stoped Reading");
        logOut.close();
        server.destroy(); 
```

我什至没有在控制台中看到“检查错误流”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:52:46.927

我认为不需要外部 while，从输出流块中读取直到有一些数据可用，如果子进程结束，你会得到 a`null`并且内部 while 会中断。您也可以使用`ProcessBuilder`'s [redirectErrorStream(true)](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html#redirectErrorStream%28boolean%29)重定向`stderr`到，`stdout`这样您就可以在一个循环中同时捕获它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:54:06.707

您必须在其自己的线程中读取 stdout 和 stderr 流。否则你会遇到各种阻塞情况（取决于操作系统和输出模式）。

如果将错误流与输出流 ( [`redirectErrorStream(true)`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#redirectErrorStream%28boolean%29)) 合并，则可以使用单个（附加）后台线程。[`redirectOutput(File)`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#redirectOutput%28java.io.File%29)当您使用（或继承IO）时，您可以避免这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:41:48.873

我的世界服务器中的前两行转到 STDOUT（在 bukkit、tekkit 和 vanilla 上进行了测试），但出于任何原因，其余的都转到 STDERR。您的应用程序没有对`errorStream`. 您可以通过执行以下操作尝试使用重定向功能：。

```
ProcessBuilder procBuild = new ProcessBuilder(
        "java", "-Xmx1G", "-Xms512M", "-jar", "TekkitServer\\Tekkit.jar",
        "nogui", "-nojline", "2>&1"); 
```

让我知道这是否有效，因为这可能是一个仅限 bash 的技巧。

# java - 制作在线4人国际象棋游戏的结构

> ID：15591753
> 
> 赞同：-3
> 
> 时间：2013-03-23T20:34:08.593
> 
> 标签：java, multiplayer

我正在尝试通过互联网制作一个四人国际象棋游戏。到目前为止，我有这些课程：

```
MultiPlayerServer
MultiPlayerServerThread

Client 
```

使`MultiPlayerServer`端口进行侦听，并且每当`Client`开始侦听时，它就负责`MultiPlayerServerThread`处理请求，但是我的问题来了：我希望有一个单独的类来处理游戏的状态，是否要制作一个静态类（如果是这样，它会去哪里？）。除此之外，客户端将需要大量工作，因为服务器将向客户端提供数据，作为绘制棋子的位置和其余的实现。

TL;DR 如果我要制作一个包含服务器类、服务器线程类和客户端类的多人在线 4 人国际象棋游戏，哪里可能是制作**单个**游戏副本的好地方，这样如果多人加入，他们都加入了同一个游戏，而不是为自己创造游戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:44:46.920

MultiPlayerServer 应该“拥有”游戏状态的一个实例——这对所有玩家都是通用的。MultiPlayerServerThread 类（抽象到客户端的连接）包含对这个公共对象的引用。

当客户端移动时，会访问这种常见的游戏状态，如果移动是合法的，则会发生变异。

由于每个客户端都在单独的线程中运行，因此您通常需要同步以确保两个客户端不会同时修改状态。对于国际象棋，这不是什么大问题，因为规则一次只允许一个玩家修改游戏状态——但如果您将“游戏状态”扩展为包含聊天日志之类的内容，请小心引入这一点。

请注意，您可能希望在设计时记住您以后可能希望 MultiPlayerServer 跟踪*多个*GameState 对象。这将允许您的国际象棋服务器同时运行多个国际象棋游戏。您需要额外的逻辑来跟踪哪些玩家正在玩哪些游戏。

# c++ - C++ 默认参数 - 声明

> ID：15591756
> 
> 赞同：2
> 
> 时间：2013-03-23T20:34:15.130
> 
> 标签：c++, default-arguments

我在课堂上创建了一个函数。我将所有声明放在头文件中，将所有定义放在 .cpp 中。

在我的*标题*中：

```
class FileReader{

public:
FileReader(const char*);                        //Constructor
std::string trim(std::string string_to_trim, const char trim_char = '=');

}; 
```

在我的*.cpp*中：

```
std::string FileReader::trim(std::string string_to_trim, const char trim_char = '='){

std::string _return;
for(unsigned int i = 0;i < string_to_trim.length();i++){
    if(string_to_trim[i] == trim_char)
        continue;
    else
        _return += string_to_trim[i];
}

       return _return;
} 
```

每当我尝试编译和运行它时，都会出现两个错误。

> 错误：为 'std::string FileReader::trim(std::string, char)' [-fpermissive] 的参数 2 给出了默认参数
> 
> 错误：在 'std::string FileReader::trim(std::string, char)' [-fpermissive] 中的先前规范之后

**我究竟做错了什么？我只希望我的函数有这个默认参数。**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-23T20:35:42.090

You should not specify the default argument *both* in the function declaration and in the function definition. I suggest you putting it *in the declaration only*. For instance:

```
class FileReader{
public:
    FileReader(const char*);                        
    std::string trim(std::string string_to_trim, const char trim_char = '=');
    //                                                                ^^^^^
    //                                                     Here you have it
};

std::string FileReader::trim(std::string string_to_trim, const char trim_char)
//                                                                  ^^^^^^^^^
//                                              So here you shouldn't have it
{
    // ....
} 
```

In case both the function definition and the function declaration are visible to the compiler from the point where the function call is being made, you would also have the option of specifying the default arguments *in the function definition only*, and that would work as well.

However, if only the *declaration* of the function is visible to the compiler, then you will have to specify the default argument *in the function declaration only*, and remove them from the function definition.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-23T20:36:25.763

inside the cpp you don't need the default parameter , only in the h file

# jquery - 监视元素和更改文本的脚本

> ID：15591757
> 
> 赞同：0
> 
> 时间：2013-03-23T20:34:20.723
> 
> 标签：jquery

我正在使用 bootstrap editable 来编辑照片的文本属性。默认情况下，它会显示文本，如果单击它，则会打开带有可编辑文本的小窗口。我想做的就是创建一个脚本，它将用铅笔图标替换文本。我写了这个：

```
$('#gallery').delegate('.editable-click', 'need_some_event' , function(){
    $(this).text();
    $(this).html('<i class="icon-pencil" ></i>');
}); //end delegate 
```

我有的代码：

```
<a class="edit editable editable-click" style="float:left; margin-right: 10px" href="#" rel="Photo_text_183" data-pk="183">some text descrtion of photo</a> 
```

之后我想拥有什么：

```
<a class="edit editable editable-click" style="float:left; margin-right: 10px" href="#" rel="Photo_text_183" data-pk="183"><i class="icon-pencil" ></i></a> 
```

问题是，可编辑的文本是由另一个 javascript 生成的。我基本上需要一些事件来监视所有 .editable-click 类元素，如果它们出现，请删除带有图标的文本。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:44:49.410

也许你可以试着倾听`DOMNodeInserted`

```
$(document).on('DOMNodeInserted', function(){
if($(this).find('.editable-text').length > 0){
//do stuff 
}
}); 
```

这是一个工作小提琴作为示例[http://jsfiddle.net/wvVnQ/1/](http://jsfiddle.net/wvVnQ/1/)

因为，如下所述，这是被弃用的，你可以试试这个插件：[https ://github.com/naugtur/insertionQuery](https://github.com/naugtur/insertionQuery)

# python - 使用 %s 插入 Python mysql 连接器

> ID：15591758
> 
> 赞同：2
> 
> 时间：2013-03-23T20:34:35.020
> 
> 标签：python, mysql, mysql-python, mysql-connector

我正在尝试使用 Python MySQLConnector 将包含数字的集合附加到我的 MySQL 数据库中。我可以手动添加数据，但以下带有**%s**的表达式将不起作用。我对此尝试了几种变体，但文档中的任何内容似乎都不适用于我的情况。如您所见，该表已经构建：

```
#Table erstellen:
#cursor.execute('''CREATE TABLE anzahlids( tweetid INT  )''') 
```

这是我的代码和错误：

```
print len(idset)
    id_data = [
        len(idset)
    ]
    print id_data
    insert = ("""INSERT INTO anzahlids (idnummer) VALUES (%s)""")
    cursor.executemany(insert, id_data)
    db_connection.commit() 
```

> "处理格式参数失败；%s" % e)
> mysql.connector.errors.ProgrammingError: 处理格式参数失败；map() 的参数 2 必须支持迭代

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-09T08:39:11.677

迟到的答案，但我想发布一些更好的代码。此外，最初的问题是使用 MySQL 连接器/Python。

使用 executemany() 是错误的。executemany() 方法需要一个元组序列，例如 [ (1,), (2,) ]。

对于手头的问题，executemany() 实际上没有用，应该使用 execute()：

```
cur.execute("DROP TABLE IF EXISTS anzahlids")
cur.execute("CREATE TABLE anzahlids (tweetid INT)")

some_ids = [ 1, 2, 3, 4, 5]
cur.execute("INSERT INTO anzahlids (tweetid) VALUES (%s)",
            (len(some_ids),))
cnx.commit() 
```

并且使用 MySQL 连接器/Python（与 MySQLdb 不同），您必须确保您正在提交。

（注意非德语人士：“anzahlids”的意思是“number_of_ids”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:39:27.523

以下是在我的机器上运行的示例。

```
import MySQLdb
db = MySQLdb.connect(host="localhost", user="stackoverflow", passwd="", db="stackoverflow")
cursor = db.cursor()
try:
    sql = 'create table if not exists anzahlids( tweetid int ) ; '
except:
    #ignore
    pass

sql = ("""INSERT INTO anzahlids (tweetid) VALUES (%s)""")
data = [1,2,3,4,5,6,7,8,9]
length = [len(data)]
cursor.executemany(sql,length)
db.commit() 
```

如果 idset 是单个值，您可以使用

```
sql = ("""INSERT INTO anzahlids (tweetid) VALUES (%s)""") % len(idset)
cursor.execute(sql)
db.commit() 
```

# php - LinkedIn：使用 LinkedIn JavaScript 和 PHP API 登录

> ID：15591762
> 
> 赞同：-2
> 
> 时间：2013-03-23T20:34:50.663
> 
> 标签：php, javascript, linkedin

我已经使用linkedin auth 为我的网站实施了身份验证。我的意思是使用 php oauth 类使用linkedin 按钮登录。但无法获取电子邮件地址。之后我尝试了javascript。即使我做不到。它显示了一些错误。

那么任何人都可以发布或提供想法以获取电子邮件地址吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-23T07:51:48.520

对于版本，V2 使用这个简单的代码。

```
<?php 

$config['callback_url']  =   ''; //Your callback URL

$config['Client_ID']   =   ''; // Your LinkedIn Application Client ID
$config['Client_Secret'] =   '';  // Your LinkedIn Application Client Secret 

?>

<?php
echo '<a href="https://www.linkedin.com/uas/oauth2/authorization?response_type=code&client_id='.$config['Client_ID'].'&redirect_uri='.$config['callback_url'].'&state=98765EeFWf45A53sdfKef4233&scope=r_liteprofile r_emailaddress w_member_social"><img src="./images/linkedin_connect_button.png" alt="Sign in with LinkedIn"/></a>';  //Button code and scope url.
?>

<?php

if(isset($_GET['code'])) // get code after authorization
{

    $url = 'https://www.linkedin.com/uas/oauth2/accessToken'; 
    $param = 'grant_type=authorization_code&code='.$_GET['code'].'&redirect_uri='.$config['callback_url'].'&client_id='.$config['Client_ID'].'&client_secret='.$config['Client_Secret'];
    //$return = (json_decode(post_curl($url,$param),true)); // Request for access token

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url); //Remote Location URL
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); //Return data instead printing directly in Browser
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 7); //Timeout after 7 seconds
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1)");
    curl_setopt($ch, CURLOPT_HEADER, 0);
    //We add these 2 lines to create POST request
    curl_setopt($ch, CURLOPT_POSTFIELDS, $param); //parameters data
    $result = curl_exec($ch);
    curl_close($ch);
    $return = (json_decode($result,true));

    print_r($return);

    if($return['error']) // if invalid output error
    {
       $content = 'Some error occured<br><br>'.$return['error_description'].'<br><br>Please Try again.';
    }
    else // token received successfully
    {

        $url = "https://api.linkedin.com/v2/me?projection=(id,firstName,lastName,profilePicture(displayImage~:playableStreams))&oauth2_access_token=".$return['access_token'];
        //step1
        $cSession = curl_init();
        //step2
        curl_setopt($cSession, CURLOPT_URL, $url);
        curl_setopt($cSession, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($cSession, CURLOPT_HEADER, false);
        //step3
        $result = curl_exec($cSession);
        //step4
        curl_close($cSession);
        $return = (json_decode($result,true));
        print_r($return);

    }
}

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T13:11:06.093

电子邮件地址仅对经过身份验证的用户可用

进行以下 GET 调用以获取经过身份验证的用户的电子邮件地址：

获取[http://api.linkedin.com/v1/people/~:(电子邮件地址)](http://api.linkedin.com/v1/people/~:(email-address))

我希望这会帮助你

# c - 为什么 strncmp 不比较？套接字编程 C

> ID：15591767
> 
> 赞同：0
> 
> 时间：2013-03-23T20:35:22.570
> 
> 标签：c, strncmp

我正在尝试解析从服务器中的客户端接收到的数据。服务器必须根据客户端之前发送的消息发回消息。但我不能让 strncmp 函数比较字符串。它总是到达 else 并且我的服务器关闭连接。此外，我的客户保持连接并在屏幕上打印我输入的选项。

请需要帮助以了解问题所在！

谢谢！

> 不正确的输入关闭错误：错误的文件描述符
> 
> 程序以代码 01 退出。

```
void
result(int sockfd)
{
    ssize_t     n;
    char        buf[MAXLINE];
    int         temp;
    time_t      ticks;
    int         i;
again:
    while ((n =read(sockfd, buf, 15)> 0))
    {
     buf[n] = '\0';
     printf("Message Recieved:%s\n",buf);
     srand (time(NULL));
     temp = rand() % 15+1;
     printf("Ramdom es %i\n",temp);

     if ((strncmp (buf,"A",1) == 0) || (strncmp (buf,"a",1) == 0))
     {
      snprintf(buf, sizeof(buf), "You chose option A -%i times on %.24s\r\n", temp,ctime(&ticks));
      Writen(sockfd, buf, n);
     }
     if ((strncmp (buf,"B",1) == 0) || (strncmp (buf,"b",1) == 0))
     {
      snprintf(buf, sizeof(buf), "You chose option B -%i times on on %.24s\r\n", temp,ctime(&ticks));
      Writen(sockfd, buf, n);
     }
     else
     {
       printf("Incorrect Input");
       Close(sockfd);
       break;
     }  
    }
    if (n < 0 && errno == EINTR)
    goto again;
    else if (n < 0)
        err_sys("read error");
}

int
main(int argc, char **argv)
{
    int                 listenfd, connfd;
    socklen_t           len;
    struct sockaddr_in  servaddr, cliaddr;
    char                buff[MAXLINE];
    /*char                message[MAXLINE];*/
    char                recvline[MAXLINE + 1];

    listenfd = Socket(AF_INET, SOCK_STREAM, 0);
    bzero(&servaddr, sizeof(servaddr));
    servaddr.sin_family      = AF_INET;
    servaddr.sin_addr.s_addr = htonl(INADDR_ANY);/*----------------------------------------------------*/
    servaddr.sin_port        = htons(5678); 

    Bind(listenfd, (SA *) &servaddr, sizeof(servaddr));
    Listen(listenfd, LISTENQ);
    printf("EDMTS is running on 129.128.4.80, listening on port 5678\n");
    printf("\n");
    printf("Waiting for incoming connections...Press Ctrl+C to end server\n");

    for ( ; ; )
    {
        len = sizeof(cliaddr);
        connfd = Accept(listenfd, (SA *) &cliaddr, &len);

        /*Client connects to server*/
        printf("\n");
        printf("Connection from %s, port %d\n",
               Inet_ntop(AF_INET, &cliaddr.sin_addr, buff, sizeof(buff)),
               ntohs(cliaddr.sin_port));

           result(connfd);
               Close(connfd);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:44:10.997

有点逻辑

```
 if ((strncmp (buf,"B",1) == 0) || (strncmp (buf,"b",1) == 0))
 {
  snprintf(buf, sizeof(buf), "You chose option B -%i times on on %.24s\r\n", temp,ctime(&ticks));
  Writen(sockfd, buf, n);
 }
 else
 {
   printf("Incorrect Input");
   Close(sockfd);
   break;
 } 
```

是其他人所在的地方。

IE

当它被击中后它会运行：

```
 if ((strncmp (buf,"A",1) == 0) || (strncmp (buf,"a",1) == 0))
 {
  snprintf(buf, sizeof(buf), "You chose option A -%i times on %.24s\r\n", temp,ctime(&ticks));
  Writen(sockfd, buf, n);
 } 
```

顺便说一句，使用`toupper` [http://www.cplusplus.com/reference/cctype/toupper/](http://www.cplusplus.com/reference/cctype/toupper/)

IE

```
 if ('B' == toupper(buf[0]) ... 
```

只需添加另一个 ELSE！

# java - 在没有自定义样式的情况下在 Android Spinner 中的项目之间添加更多空间？

> ID：15591768
> 
> 赞同：21
> 
> 时间：2013-03-23T20:35:28.430
> 
> 标签：java, android, spinner, android-spinner

我有一个我正在为一家混凝土公司编写的 Android 应用程序，该应用程序将用于打卡进出。我使用一些微调器从下拉列表中选择工作地点和工作等内容，但我担心微调器中的项目太靠近，员工很难选择正确的项目。

我想在微调器中的项目之间留出更多空间，但不想经历制作自定义样式的所有麻烦，因为我真的希望微调器的外观和行为与默认值完全相同，除了只是有更多的填充，为此必须制作自定义样式需要做很多工作。

我可以进行任何简单的更改，例如设置微调器的某些属性吗？我尝试将微调器类型设置为对话框，但它只显示具有相同间距的列表，只是没有附加到微调器控件。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-28T17:48:52.077

我相信 Pragnani 的回答是正确的，但这就是我实际实施它的方式......

- 在 RES/layout 中，创建了一个 XML 布局，其中只有一个 textview，如下所示。此文本视图具有我想要的自定义大小/填充。

spinner_row.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/cust_view"
        android:minWidth="246dp"
        android:layout_width="match_parent"
        android:layout_height="48dp"
        android:gravity="left|center_vertical"
        android:textColor="@android:color/black"    
        android:textSize="20sp"
        android:paddingLeft="4dp"
        android:textIsSelectable="false"/> 
```

然后在我将数据加载到微调器的活动中，当我为微调器创建 ArrayAdapter 时，我将自定义 textview 作为第二个参数传递给 ArrayAdapter 构造函数。

```
Spinner spinClockInWorkSite = (Spinner)findViewById(R.id.spinClockInWorkSite);
ArrayAdapter spinClockInWorkSiteAdapter = new ArrayAdapter(this, R.layout.spinner_row, this.workSiteList);
spinClockInWorkSite.setAdapter(spinClockInWorkSiteAdapter); 
```

所以现在微调器使用我在 spinner_row.xml 中为列表中的每个项目定义的自定义文本视图。

这最终比玩这种风格更直接地满足了我的需求。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-04-23T06:11:04.727

如果您想提供令人满意的间距，那么如果所有这些 XML 和所有，您可以轻松地在微调适配器中使用“simple_spinner_dropdown_item”。

像

```
String [] dataList = new String[]{"Select","A","B","C","D","E"};
ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_dropdown_item, dataList);
        spinner.setAdapter(dataAdapter); 
```

它对我有用。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2019-02-05T02:17:46.103

除非您想要一个真正特定的间距，否则我会使用其中一种内置布局。

```
simple_spinner_item = No line space.
simple_spinner_dropdown_item = 1 line space.
simple_dropdown_item_1line = 1.5 line space. 
```

这些以及更多可以在 R.class 中找到

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-23T21:29:49.770

试试这个，在这里您不是在更改微调器样式，而是通过设置微调器项目的样式来为微调器项目添加您想要的额外功能。

```
<style name="spinnerStyle"  parent="@android:style/Widget.TextView.SpinnerItem">
       <item name="android:padding">5sp</item>
    </style> 
```

并使用样式属性将样式应用于您的微调器

```
 style="@style/spinnerStyle" 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-23T16:42:53.540

```
adapter=new ArrayAdapter<String>(this,android.R.layout.simple_dropdown_item_1line, 
ArrayList); 
```

# entity-framework-5 - 如何创建可以导航到多个实体类型的导航属性？

> ID：15591772
> 
> 赞同：1
> 
> 时间：2013-03-23T20:35:45.383
> 
> 标签：entity-framework-5

我的域类中有以下内容（简化）

```
public enum JobType
{
    SalesOrder = 1,
    StockOrder = 2
}
public class SalesOrder : LoggedEntity
{
    public string Name { get; set; }  // and other fields

}
public class StockOrder : LoggedEntity
{
    public string Name { get; set; }  // and other fields

}

public class Job : LoggedEntity
{
  public int JobType { get; set; } // jobtype enum
  public virtual LoggedEntity LinkedEntity { get; set; }
} 
```

我的上下文如下；

```
public class Context : DbContext
{
 public DbSet<Job> Jobs { get; set; }
 public DbSet<StockOrder> StockOrders { get; set; }
 public DbSet<SalesOrder> SalesOrders { get; set; }
 } 
```

当我运行迁移时，我得到描述的错误 [here][1] 所以使用抽象实体似乎不起作用。

我的问题是，如何创建可以导航到多个实体类型的导航属性？

如果 JobType = SalesOrder 然后我想导航到销售订单，如果 JobType = StockOrder 然后我想导航到库存订单。

我想使用每个层次结构的表策略 [在此处查看 TPH][2]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T23:08:10.043

诀窍是让 EF 忘记 LoggedEntity 类。根据此示例重塑您的实体：

```
public enum JobType
{
  SalesOrder = 1,
  StockOrder = 2
}

public abstract class LoggedEntity
{
  public int Id { get; set; }
  public string Name { get; set; }  // and other fields
}

public abstract class BaseOrder : LoggedEntity // New base class for orders!!
{ }

public class SalesOrder : BaseOrder
{ }

public class StockOrder : BaseOrder
{ }

public class Job : LoggedEntity
{
  public JobType JobType { get; set; } // jobtype enum
  public virtual BaseOrder Order { get; set; }
}

public class Tph2Context : DbContext
{
  public DbSet<Job> Jobs { get; set; }
  public DbSet<BaseOrder> Orders { get; set; }
} 
```

您将看到迁移创建了两个表，即 Jobs 和 BaseOrders（名称有待改进）。`Job`现在有一个`Order`可以是 a`SalesOrder`或 a的属性`StockOrder`。

您可以通过以下方式查询特定的订单类型

```
contex.Orders.OfType<StockOrder>() 
```

你会注意到 EF 不知道`LoggedEntity`，因为

```
context.Set<LoggedEntity>() 
```

会抛出异常

> 实体类型 LoggedEntity 不是当前上下文模型的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:55:04.710

```
 how do I create a navigation property that can navigate 
 to more than one entity type? 
```

你不能这样做。至少不是现在。导航属性是描述实体之间关系的方式。最多，它们代表某种 sql 关系。所以你不能即时改变或定义这样的关系。你必须事先定义它。

现在为了做到这一点，您必须为您的单独条件定义单独的导航属性，即

```
public class Job : LoggedEntity
{
  public int JobTypeSales { get; set; } 
  public int JobTypeStock { get; set; }

  public virtual SalesOrder SalesOrder { get; set; }
  public virtual StockOrder StockOrder { get; set; }
} 
```

然后`modelbuilder`通过 fluent API 将它们链接到配置中。

```
 HasRequired(s => s.SalesOrder)
                .WithMany()
                .HasForeignKey(s => s.JobTypeSales).WillCascadeOnDelete(true);

     HasRequired(s => s.StockOrder)
                .WithMany()
                .HasForeignKey(s => s.JobTypeStock).WillCascadeOnDelete(true); 
```

和

```
as for your error "Sequence Contains No Elements" 
```

当您指定的 Linq 查询使用`.First()`or `.Single()`， or`.ToList()`并且查询没有返回数据时，就会出现此错误。

所以要避免它使用，`.FirstOrDefault()`或`SingleOrDefault()`。

显然有适当的空值检查。

# php - 解析html时，检查元素是否存在

> ID：15591781
> 
> 赞同：0
> 
> 时间：2013-03-23T20:36:45.873
> 
> 标签：php, parsing, html-parsing

我从某个页面解析 html，以获取传出列表，我想将它们分成两部分 - 带有 rel="nofollow" / rel="nofollow me" / rel="me nofollow" 元素和那些没有这些表达的人。

目前我使用下面的代码解析使用 - [PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)

```
$html = file_get_html("$url");

foreach($html->find('a') as $element) {
    echo $element->href; // THE LINK
} 
```

但我不太确定如何实现它，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:43:55.590

尝试使用这样的东西：

```
$html = file_get_html("$url");

// Creating array for storing links
$arrayLinks = array(
    "nofollow" => array(),
    "others" => array()
);

foreach($html->find('a') as $element) {

    // Search for "nofollow" expression with no case-sensitive (i flag)
    if(preg_match('#nofollow#i', $element->rel)) {
        $arrayLinks["nofollow"][] = $element->href;
    }
    else {
        $arrayLinks["others"][] = $element->href;
    }
} 

// Display the array
echo "<pre>";
print_r($arrayLinks);
echo "</pre>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:39:33.127

我猜对 $element->rel 做一个正则表达式

# python-2.7 - 无法让 Virtualenv 导入 Numpy

> ID：15591785
> 
> 赞同：3
> 
> 时间：2013-03-23T20:37:07.137
> 
> 标签：python-2.7, numpy, import, ubuntu-12.04, virtualenv

我在使用所有库时都遇到了问题，但让我专注于`numpy`. 如果我在 virtualenv 之外，我可以进入 Python 解释器并执行以下操作：

```
import numpy 
```

那行得通。但是，如果我进入`virtualenv`并尝试一下：

```
$ workon test
(test):~/Project/test$ python

>>> import numpy
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named numpy 
```

经过数小时的谷歌搜索，我相信问题一定出在我对 and 的理解`virtualenv`上`virtualenvwrapper`。我已经尝试了明显的：

```
(test):~/Projects/test$ pip install numpy 
```

但我得到了错误：

```
SystemError: Cannot compile 'Python.h'. Perhaps you need to install python-dev|python-devel. 
```

我也尝试过，`sudo apt-get install python-dev`但得到了错误：

```
The following packages have unmet dependencies:
 python-dev : Depends: python2.7-dev (>= 2.7.3) but it is not going to be installed
E: Unable to correct problems, you have held broken packages. 
```

我正在运行`Python2.7.3`PyDev `Ubuntu 12.04`（无 virtualenv）并运行一个项目，该项目当前可以毫无问题地导入库（如`numpy`）。我曾尝试使用 Ubuntu 软件中心进行安装`python-dev`，但我得到了同样的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T23:49:26.530

virtualenv 默认情况下不允许您从全局环境中导入包。用于`[mk]virtualenv --system-site-packages`允许它导入系统包。

`python-dev`是系统包，所以`pip`错误是意料之中的。不确定 apt 错误，但您可以在[askubuntu.com](http://askubuntu.com)上询问以尝试解决它。

# java - NullPointer 和 ListView 有问题

> ID：15591788
> 
> 赞同：0
> 
> 时间：2013-03-23T20:37:18.520
> 
> 标签：java, android

这是导致错误的代码。抱歉，我的原始帖子发生了很大变化，但我现在已将所有代码放在一个地方。告诉我这是不是一个糟糕的主意。

我在为我的 ListView 设置 myArrayAdapter 的行上出现错误

```
public class DisplayCaf extends Activity implements OnNavigationListener {
    private static final String STATE_SELECTED_NAVIGATION_ITEM = null;
    //Holds items.
    ArrayList<String> menuArray;
    //String adapter for ListView
    ArrayAdapter<String> myArrayAdapter;
    //set listView
    ListView listView;

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.pager_caf);

        listView = (ListView)findViewById(R.id.listView);
        menuArray = new ArrayList<String>();

        //set up the adapter for listView
        myArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, menuArray);
        //connect adapter to feed info to listView
        listView.setAdapter(myArrayAdapter);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:28:51.640

很难用您提供的有限信息来判断问题出在哪里：正如您所说，您发布了很多代码这一事实并不意味着您提供了正确的代码（例如，您粘贴了可能没有的大开关没关系，你没有粘贴布局......）。

我最好的猜测是调用

```
public Object instantiateItem(View collection, int position); 
```

通话后立即发生：

```
setContentView(R.layout.pager_caf); 
```

因此适配器永远不会有机会被初始化。

如果您想更清楚地了解正在发生的事情，请先帮助自己：在这里和那里放置几个 Log.d（就在 instantiateItem 的开头和 setContentView 之前和之后可能是一个好的开始......），减少你的关键部分的问题（将其一分为二，直到只剩下错误）并发布剩余的代码（以及日志）。

# ruby-on-rails - 有效地重命名 Rails 项目

> ID：15591791
> 
> 赞同：2
> 
> 时间：2013-03-23T20:37:23.857
> 
> 标签：ruby-on-rails, refactoring

重命名 Ruby on Rails **3**项目最**有效**、最**安全**和**最简单的方法是什么？**

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T22:49:02.590

有一个名为[Rename](https://github.com/get/Rename)的 Rails 插件可以做到这一点。它已经 2 年没有更新了，但它似乎大部分都可以工作。它搞砸了 CamelCaseNames，但以一致的方式。

或者，只需`grep`在我的示例中执行类似操作，然后手动更改这些文件（请参阅下面的文件列表）。

```
$ rails new ProjectToRename
$ cd ProjectToRename
$ grep -ri 'project_?to_?rename' .

./config/routes.rb:ProjectToRename::Application.routes.draw do
./config/application.rb:module ProjectToRename
./config/initializers/session_store.rb:ProjectToRename::Application.config.session_store :cookie_store, key: '_ProjectToRename_session'
./config/initializers/session_store.rb:# ProjectToRename::Application.config.session_store :active_record_store
./config/initializers/secret_token.rb:ProjectToRename::Application.config.secret_token = '69761de6e4534f0be37fbebee8e03f1e29d6935e12591444971bccc134503d390cb8b5587d7750a53cc428d3d57a5894437e4b148611623a7f0ff5048aeb4579'
./config/environment.rb:ProjectToRename::Application.initialize!
./config/environments/production.rb:ProjectToRename::Application.configure do
./config/environments/development.rb:ProjectToRename::Application.configure do
./config/environments/test.rb:ProjectToRename::Application.configure do
./app/views/layouts/application.html.erb:  <title>ProjectToRename</title>
./Rakefile:ProjectToRename::Application.load_tasks
./config.ru:run ProjectToRename::Application

$ rails plugin install git@github.com:get/Rename.git
$ rails g rename_to SomeNewName
$ grep -ri 'some_?new_?name' .

./config/routes.rb:Somenewname::Application.routes.draw do
./config/application.rb:module Somenewname
./config/initializers/session_store.rb:Somenewname::Application.config.session_store :cookie_store, key: '_ProjectToRename_session'
./config/initializers/session_store.rb:# Somenewname::Application.config.session_store :active_record_store
./config/initializers/secret_token.rb:Somenewname::Application.config.secret_token = '69761de6e4534f0be37fbebee8e03f1e29d6935e12591444971bccc134503d390cb8b5587d7750a53cc428d3d57a5894437e4b148611623a7f0ff5048aeb4579'
./config/environment.rb:Somenewname::Application.initialize!
./config/environments/production.rb:Somenewname::Application.configure do
./config/environments/development.rb:Somenewname::Application.configure do
./config/environments/test.rb:Somenewname::Application.configure do
./Rakefile:Somenewname::Application.load_tasks
./config.ru:run Somenewname::Application 
```

您需要自己重命名顶级目录：

```
$ cd ..
$ mv ProjectToRename SomeNewName 
```**

# java - 访问“最近的文档”文件夹中的所有文件

> ID：15591793
> 
> 赞同：-5
> 
> 时间：2013-03-23T20:37:32.303
> 
> 标签：java

我想获取最近打开或创建的所有文件的列表，即 Windows“最近文件夹”中的所有文件。

我找不到任何解决方案，我尝试了`shgetfolderpath`windows 注册表，但没有任何效果。如何使用 Java 访问最近文件夹中的所有文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:46:49.837

在 java 中试试这个代码：

```
 File file = new File("Windows/Recent/Folder/Path");

    if (file.exists() && file.isDirectory()) {
        File[] listFiles = file.listFiles();
        for (File files : listFiles) {
            if(files.isDirectory()) {
                System.out.println(files.getAbsolutePath() + " - Directory");
            }else {
                System.out.println(files.getAbsolutePath() + " - File");
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:50:35.637

希望这对你有帮助，试试这个：

```
import java.io.File;

public class ListFiles 
{

     public static void main(String[] args) 
    {

      // Directory path here
      String path = "F:\\Book"; // the directory you want to search

      String files;
      File folder = new File(path);
      File[] listOfFiles = folder.listFiles(); 

      for (int i = 0; i < listOfFiles.length; i++) 
      {
           if (listOfFiles[i].isFile()) 
           {
               files = listOfFiles[i].getName();
               System.out.println(files);// with out printing you can add the  names of file in array 
            }
      }
    }
} 
```

# javascript - 我在将事件传递给插件中的另一个函数时遇到了一些麻烦

> ID：15591797
> 
> 赞同：0
> 
> 时间：2013-03-23T20:38:09.203
> 
> 标签：javascript, jquery, jquery-plugins, jquery-events

当我尝试获取事件时，我得到了：

> 未捕获的类型错误：无法读取未定义的属性“类型”

我正在尝试`options`通过`Constructor Itoggle`to`mouseInOut`然后`options`进入`Itoggle.prototype.mouseInOut`. 在我尝试将任何参数传递给 之前，代码工作正常`mouseInOut`，现在我无法再获得`event`了。即使我也尝试`event`作为参数传递或任何参数。

错误：

> 未捕获的类型错误：无法读取未定义化妆-itoggle.js 的属性“类型”：18 Itoggle.mouseInOut 化妆-itoggle.js：18
> b.event.special.（匿名函数）.handle
> b.event.dispatch
> v.handle

* * *

```
;(function ($) {

  "use strict"; 

  var Itoggle = function (el, options) {
    $(el).on('mouseenter mouseleave', mouseInOut(event, options);
  };

  Itoggle.prototype.mouseInOut = function (event, options) {
    var $this = $(this)
      , selector = $this.attr('data-target')
      , target = $('#' + selector);

    var opt = $.extend({}, $.fn.itoggle.defaults, options);
    console.log(opt.titleActive); // ok

    if (event.type == 'mouseover') {//here's come the error. Cannot read property 'type' of undefined
      $this.addClass(opt.elementActive);
      $this.find('.nav-button-title').addClass(opt.titleActive);
      target.show();
    } 
    else if (event.type == 'mouseout') {
      $this.removeClass(opt.elementActive);
      $this.find('.nav-button-title').removeClass(opt.titleActive);
      target.hide();

      target.mouseenter( function () {
        $this.addClass(opt.elementActive);
        $this.find('.nav-button-title').addClass(opt.titleActive);
        target.show();
      });

      target.mouseleave( function () {
        $this.removeClass(opt.elementActive);
        $this.find('.nav-button-title').removeClass(opt.titleActive);
        target.hide();
      }); 

   } 
   else { console.log('invalid event'); }

 };

 /* ITOGGLE PLUGIN DEFINITION
  * ========================= */

  $.fn.itoggle = function () {
    return this.each( function () {
      var $this = $(this)
        , data = $this.data('itoggle')
        , options = typeof option == 'object' && option;
      if (!data) { $this.data('itoggle', (data = new Itoggle(this, options)));}
    });
  };

  $.fn.itoggle.defaults = {
    elementActive: 'nav-outer-button-active',
    titleActive: 'nav-button-title-active'
  };

  $.fn.itoggle.Constructor = Itoggle;

})(window.jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:27:38.127

您传递函数结果而不是函数：

```
// wrong, function executes immediately,
// event is undefined atm, so it throws an error
$(el).on('mouseenter mouseleave', mouseInOut(event, options));

// correct way?
$(el).on('mouseenter mouseleave', mouseInOut); 
```

虽然我很惊讶这行得通。通常，您必须传递这样的函数：

```
$(el).on('mouseenter mouseleave', this.mouseInOut); 
```

但显然，如果它按你的方式工作 - 那我就错了。

请记住，执行上下文将是触发事件的 HTMLElement，而不是`Itoggle`.

# transactions - 一个人（重复地）可以在单个事务中重构 Firebird 表吗？

> ID：15591799
> 
> 赞同：0
> 
> 时间：2013-03-23T20:39:00.117
> 
> 标签：transactions, metadata, firebird, firebird2.5

通常，我会像这样对 A 列的数据类型进行相对复杂的更改：

*   创建新数据类型的 B 列
*   设置 B 以包含从 A 派生的新值
*   掉落 A
*   将 B 重命名为 A

为了保证我的数据模型的有效性，我想在单个事务中执行这种重组。到目前为止，我还不能这样做，因为根据隔离级别，要么 B 不被认为存在，要么我不允许重命名 B（“更新与并发更新冲突”），或者没有发生错误，但 B 为空。是否可以按照我的要求执行 - 我很想看看如何 - 还是绝对需要`COMMIT`介于两者之间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-24T13:49:47.400

在使用显然更合适的搜索词（元数据）以及通过 de Firebird 支持小组进行搜索后，我发现这显然是不可能的。解决方法是逐步进行迁移并将其与备份结合起来（绝不是一个坏主意）。

# c++ - 使用 set_intersection 的正确方法

> ID：15591807
> 
> 赞同：0
> 
> 时间：2013-03-23T20:40:33.420
> 
> 标签：c++, set, intersect

```
struct Cord
    {
        int x_cord;
        int y_cord;
        Cord(int x = 0,int y = 0):x_cord(x),y_cord(y) {}
        bool operator < (const Cord& cord) const
        {
            if (x_cord == cord.x_cord)
            {
                return y_cord < cord.y_cord;
            }
            return x_cord < cord.x_cord;
        }
        bool operator == (const Cord& cord) const
        {
            return x_cord == cord.x_cord && y_cord == cord.y_cord;
        }
    };
std::set<Cord> cordRes,cordTmp;//initialized before
std::set<Cord> cordItersect;
std::set_intersection(cordRes.begin(),cordRes.end(),cordTmp.begin(),cordTmp.end(),cordRes.begin(),cordItersect.begin()); 
```

上述代码编译失败`set_intersection`。在示例中如何正确使用任何建议？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:45:25.477

一个问题是 set_intersection 只需要五个参数。另一个问题是您需要一些机制来创建要插入到 cordItersect 的元素。在您的情况下，将使用 std::inserter。

```
std::set_intersection(cordRes.begin(), cordRes.end(),
    cordTmp.begin(), cordTmp.end(),
    std::inserter(cordItersect, cordItersect.end())); 
```

# java - 如何在 onCreate() 和 onResume() 方法中调用相同的函数？

> ID：15591808
> 
> 赞同：0
> 
> 时间：2013-03-23T20:40:56.017
> 
> 标签：java, android, activity-lifecycle

我想在`onCreate()`和中运行相同的功能`onResume()`。这些功能基本上在 10 秒内录制，然后停止并播放录制的声音。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    new CountDownTimer(
            10000, // 10 second countdown
            9999) { // onTick time, not used

        public void onTick(long millisUntilFinished) {
            // Not used
        }

        public void onFinish() {
            isRecording = false;
        }
    }.start();

    Thread thread = new Thread(new Runnable() {

        public void run() {
            isRecording = true;
            record(); // starts to record
        }
    });
    thread.start(); // thread start
    // thread to start

    play();
} 
```

如果我按下`Home`按钮，应用程序就会进入后台。现在，如果我再次点击应用程序的图标按钮，我想调用相同的录制和播放功能。

我可以做同样的事情`onResume()`吗？基本上复制相同的东西。

```
public void onResume() {
    super.onResume();

    new CountDownTimer(
            10000, // 10 second countdown
            9999) { // onTick time, not used 

        public void onTick(long millisUntilFinished) {
            // Not used
        }

        public void onFinish() {
            isRecording = false;
        }
    }.start();

    Thread thread = new Thread(new Runnable() {

        public void run() {
            isRecording = true;
            record(); // starts to record
        }
    });
    thread.start(); // thread start

    play();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T22:00:01.817

只需将您要运行的内容放在 onResume() 中即可。onResume() 将在第一次 onCreate() 之后调用，然后每次应用程序退出后台时都会调用它。

活动生命周期可以在这里（直观地）找到：

[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

![在此处输入图像描述](../Images/b3970b1521d16d34b22784077ce017df.png)

# android - 片段是否意味着我应该编写单活动应用程序？

> ID：15591809
> 
> 赞同：3
> 
> 时间：2013-03-23T20:41:03.750
> 
> 标签：android, design-patterns, android-activity, fragment

好的，我得到了`Fragment`s 是模块化/可互换“子活动”的概念，但鉴于片段有自己的生命周期，就像活动的生命周期一样，并且从最佳实践的角度来看，几乎可以做任何活动可以做的事情，这是否意味着我们要开始为整个应用程序（例如`main_activity`）编写单个活动，并在该单个活动中简单地添加/替换/删除片段？

如果不是，那么我怎么知道什么时候该创建一个新活动，而不是继续将新片段推送到同一个旧活动中？

只是想了解如何最好地将我的应用程序的功能组织到活动和片段中。一个实际的例子会有所帮助（不需要代码，只是概念）。

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:45:38.960

没有片段只是重用应用程序部分的一种方式。例如，您可以在多个活动中使用片段。另一方面，您当然可以有几个活动使用不同的片段或根本不使用片段。

所以总结：不，你不需要。如果您构建多个使用相似或相同组件作为其布局一部分的活动，片段会很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:49:43.867

不，我并不是说您应该使用单一活动。

片段用于帮助您组织 ui 元素（尤其是在大屏幕上（如平板电脑））。它们还在您的项目中引入了新的可重用层（将片段用于加载器、简单视图）。

我建议您查看 Google NewsReader SDK 示例，这是了解如何根据启动的屏幕类型来实现活动/片段模式的好方法

[http://developer.android.com/training/multiscreen/adaptui.h​​tml](http://developer.android.com/training/multiscreen/adaptui.html)

下载示例按钮在右侧

# php - 使用不同哈希的正确身份验证方式？

> ID：15591816
> 
> 赞同：0
> 
> 时间：2013-03-23T20:41:49.700
> 
> 标签：php

我正在使用[password_compat](https://github.com/ircmaxell/password_compat)库执行用户身份验证，并使用 bcrypt 作为算法。

因为我现在每次都创建不同的哈希，所以无法直接将数据库中的哈希与 sql 进行比较`WHERE password = :hash`

所以现在我的sql语句如下：`SELECT username, password FROM Users WHERE username = :username`，后面是`password_verify()`方法。

现在我的大问题是，仅使用给定的用户名获取密码哈希是否安全？

估计是我多虑了吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:52:45.400

是的，你太担心了。无论哪种方式，哈希都在数据库服务器和应用程序服务器之间传递，并存储在内存中的某个位置。在第一个示例中，哈希在应用程序端生成并传输到数据库，在第二个示例中，哈希被查询并返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:00:21.507

只要用户名在数据库中是*唯一*的，当然可以。您需要确保您不会成为任何排序逻辑的牺牲品，例如，您的用户名是“grég”，但在数据库中与“greg”匹配。为此，要么限制用户名可能包含的字符和/或`_bin`在列上使用排序规则。

除此之外，只要您正确处理下一步，即 PHP 代码中的密码比较，就不会发生任何变化。

# asp.net-web-api - 在使用 xmlmediatypeformatter 的 PUT/POST/PATCH 的操作方法中使用“动态/对象”数据类型

> ID：15591818
> 
> 赞同：2
> 
> 时间：2013-03-23T20:42:10.743
> 
> 标签：asp.net-web-api

我有以下操作方法：

```
 public HttpResponseMessage Put(int id, dynamic item)
    {
    }
    public HttpResponseMessage Post(object item)
    {            
    }
    public HttpResponseMessage Patch(intid, dynamic item)
    {            
    } 
```

如果我使用“应用程序/json”的内容类型发布/放置/修补一个项目，我会在上述方法中得到一个非空项目，表示 json 有效负载的键值对，但是，如果我将内容类型更改为“应用程序/xml”并在正文中发送 XML 有效负载而不是 JSON 有效负载我得到该项目的“null”。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T00:23:02.893

传递 JSON 时它起作用的原因是 WebAPI 使用 JSON.NET 作为其默认的 JSON 序列化程序。JSON.NET 支持动态对象。

WebAPI 默认使用 DataContractSerializer 进行 XML 序列化。不幸的是，它不支持动态对象。我猜这是导致您的问题的原因。基类库提供了另一个名为 XmlSerializer 的 xml 序列化器，它也可以与 WebAPI 一起使用，但它也不支持动态对象。

# iphone - 加载视图时的 AdBanner 空白

> ID：15591819
> 
> 赞同：0
> 
> 时间：2013-03-23T20:42:15.313
> 
> 标签：iphone, ios, xcode, adbannerview

我在 UIView 上有一个广告横幅，它在首次加载视图时显示空白。我

已经实现了委托方法，它们被调用并且横幅工作正常。这是

就在视图最初加载并且广告第一次失败时，应用程序会显示

空白和委托方法不会被调用。`Anyone encountered this?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T11:18:43.567

```
// Step 1 : add iAd.framework to your project
// Step 2 : #import <iAd/iAd.h>
// Step 3 : ADBannerViewDelegate to your viewController
// Step 4 : Initialize your adBanner in your viewDidLoad Method
    myIad = [[ADBannerView alloc] initWithAdType:ADAdTypeBanner];
    [myIad setFrame:CGRectMake(0, self.view.frame.size.height, myIad.frame.size.width, myIad.frame.size.height)];
    [myIad setDelegate:self];

// Step 5 : Implement following Delegate method to show and hide your bannerView

#pragma mark - AdBanner Delegate
- (void)bannerViewWillLoadAd:(ADBannerView *)banner
{
}

- (void)bannerViewDidLoadAd:(ADBannerView *)banner
{
    // Show Add Banner
    [UIView animateWithDuration:0.25f animations:^{
        [banner setFrame:CGRectMake(0, self.view.frame.size.height-banner.frame.size.height, self.view.frame.size.width, self.view.frame.size.height)];
    }];
}

- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
{
    // Hide with animation as failed to load ad
    [UIView animateWithDuration:0.25f animations:^{
        [banner setFrame:CGRectMake(0, self.view.frame.size.height, self.view.frame.size.width, self.view.frame.size.height)];
    }];
} 
```

# c++ - 将 C++ 接口实例化为子类

> ID：15591821
> 
> 赞同：2
> 
> 时间：2013-03-23T20:42:27.087
> 
> 标签：c++, inheritance, interface

我有一个接口，我们称之为它`Creature`，它具有使其成为抽象的虚函数。

我有这个接口的子类，例如`Dog`、`Cat`和`Pig`。

由于无法将变量声明`thing`为抽象类型，编译器似乎不喜欢以下行`Creature`。

```
Creature thing = Dog(); 
```

我知道我不能实例化接口等，但这只是一个`Dog`被声明为`Creature`.

我需要某种方式让所有孩子都可以使用一个声明（即，能够将`Dog()`,`Cat()`或`Pig()`where`Dog()`放在上面的行中）。

这可以在 C++ 中完成还是我完全滥用继承和接口？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-23T20:45:22.010

对象类型本身在 C++ 中不是多态的。您给出的行声明了一个`Creature`对象，然后尝试用一个`Dog`对象对其进行初始化。如果`Creature`不是抽象的，这将导致切片 -`thing`不再是 a `Dog`，它只是一个`Creature`. 由于它是抽象的，因此您根本无法拥有`Creature`对象。

您需要为多态行为使用指针或引用。考虑例如：

```
Creature* thing = new Dog(); 
```

您现在可以取消引用`thing`并将其用作`Creature`，即使它的动态类型是`Dog`. 但是，通常不建议使用这样的原始指针，因为您必须手动确保对象`delete`在某些时候是 d 。所有权可能会变得混乱。最好的办法是把它放在一个智能指针中，例如：

```
std::unique_ptr<Creature> thing(new Dog()); // or std::make_unique when we have it 
```

在这里，我已经演示了`std::unique_ptr`，但智能指针的选择将取决于该对象的所有权语义。一个常见的替代方案是`std::shared_ptr`.

用引用证明多态性：

```
Dog dog;
Creature& thing = dog;
// Can now use dog as a Creature 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:49:11.640

在 C++ 中，您必须意识到值语义和引用语义之间的区别，而在解释语言中，您倾向于只处理引用语义（除了一些奇怪的情况，即具有值语义的普通旧数据对象，但除此之外）。

在 C++ 中，所有对象都是值，例如对象永远不可能是`null`，这意味着声明指定了存储要求。考虑以下

```
struct creature {
};

struct dog : public creature {
    float cuteness;
}; 
```

狗的存储要求与生物的存储要求不同，即使您允许转换，这也会导致切片。例如，fido 会吠叫还是保持沉默？＃包括

```
class creature {
public:
    virtual void speak() {
        std::cout << "..." << std::endl;
    }
};

class dog : public creature {
public:
    virtual void speak() {
        std::cout << "woof!" << std::endl;
    }
};

int main(int argc, const char *argv[]) {
    creature fido;
    fido = dog();

    fido.speak();
    return 0;
} 
```

但是，如果您只是拥有一个指向该对象的指针或引用，那就另当别论了。通过指针。

```
creature* fido = new dog();
fido->speak();
delete fido; 
```

引用。

```
dog fido;
creature& c = fido;

c.speak(); 
```

超出了这个问题的范围，但可以选择一个智能指针。

```
std::unique_ptr<creature> fido(new dog); 
```

# inheritance - pygtk 使用 treewiew 和 container.add 创建继承错误

> ID：15591824
> 
> 赞同：0
> 
> 时间：2013-03-23T20:42:53.820
> 
> 标签：inheritance, python-2.7, pygtk

我正在使用 python 和 pygtk

我有一个继承 TreeView 类的类：

```
from gtk import TreeView
class FolderView(TreeView): 
```

但是当我将它添加到 HBox 容器中时：

```
folderView = FolderView
hbox.add(folderView) 
```

我在运行时收到以下错误

```
TypeError: Gtk.Container.add() argument 1 must be gtk.Widget, not GObjectMeta 
```

通过反射，我已经确认 gtk.Widget 在继承路径中，所以在我的脑海中它应该可以工作。谁能告诉我我不理解 Python 和 pygtk 的哪一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:52:16.240

应该是`folderView = FolderView()`。查看如下交互提示结果：

```
>>> from gtk import TreeView
>>> class FolderView(TreeView):
...     pass
... 
>>> fw = FolderView()
>>> from gtk import HBox
>>> hbox = HBox()
>>> hbox.add(FolderView) # this is passing the class
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: Gtk.Container.add() argument 1 must be gtk.Widget, not GObjectMeta
>>> hbox.add(FolderView()) # and this is actually creating an instance
>>> hbox.get_children()
[<FolderView object at 0x9ab1964 (GtkTreeView at 0x992a240)>] 
```

# ios - 围绕所有轴的 CATransform3D

> ID：15591827
> 
> 赞同：0
> 
> 时间：2013-03-23T20:43:24.470
> 
> 标签：ios, uiview, core-animation

我正在尝试创建一种将 UIView 围绕每个轴旋转 180 度的“翻转”动画，但是，我无法获得所需的效果。这是我到目前为止所得到的：

```
[UIView animateWithDuration:0.5 delay:0 options:UIViewAnimationOptionCurveEaseInOut animations:^{     
        CATransform3D tX= CATransform3DIdentity;
        tX.m34 = 1.0 / -500;
        CATransform3D tY= CATransform3DIdentity;
        tY.m34 = 1.0 / -500;
        CATransform3D tZ= CATransform3DIdentity;
        tZ.m34 = 1.0 / -500;

        tX = CATransform3DRotate(tX, M_PI, 1.0f, 0.0f, 0.0f);
        tY = CATransform3DRotate(tY, M_PI, 0.0f, 1.0f, 0.0f);
        tZ = CATransform3DRotate(tZ, M_PI, 0.0f, 0.0f, 1.0f);

        self.flipView.layer.transform = CATransform3DConcat(tX, CATransform3DConcat(tY, tZ));            
    } 
```

然而，这似乎没有执行任何动画，就好像它们正在相互抵消一样。看起来这应该是一个非常简单的任务，但我似乎无法弄清楚如何组合这 3 个动画条件中的每一个。非常感谢任何帮助！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:47:16.857

围绕三个轴中的每一个旋转半个旋转（180° 或 π 弧度）总共不会导致任何变化（三个旋转变换的串联导致恒等变换）。

尝试仅围绕一个轴旋转以查看其作用。

# jquery - jQuery：如何使用 .on 事件检查多个元素

> ID：15591828
> 
> 赞同：1
> 
> 时间：2013-03-23T20:43:33.720
> 
> 标签：jquery, class, jquery-selectors

**是否可以使用**.on 事件检查多个元素？
如果是这样，怎么做？

```
$(document).on('click', ('class-1', 'class-2', 'class-3'), function ()
{
  ...
}); 
```

上面的代码显示了我到目前为止的尝试。这对'class-3'很有效，但其他的被忽略了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:45:50.070

是的，您可以使用 jquery[**多重选择器**](http://api.jquery.com/multiple-selector/)来做到这一点，如下所示：

```
$(document).on('click', '.class-1, .class-2, .class-3', function ()
{ 
```

# javascript - 带有 if 语句的用户文本输入

> ID：15591829
> 
> 赞同：0
> 
> 时间：2013-03-23T20:43:34.000
> 
> 标签：javascript

我是 JavaScript 新手，遇到了挑战（对我来说）。我已经在网上寻找解决方案，但令我惊讶的是我找不到它。这必须有一个非常基本的解决方案！

问题：我希望 JavaScript 根据来自文本字段的用户输入执行 if 语句。

```
<input id="text_a" type="text;" />
<p id="answer"></p>
<button onclick="myFunction()">Check</button>

<script>
function myFunction()
{
var a=document.getElementById("text_a").vlaue;

if (a=="hello")
  {
document.getElementById("answer").innerHTML="Correct!";
  }
else
  {
document.getElementById("answer").innerHTML="Oops!";
  }
}
</script> 
```

当我尝试这个创建时，无论在文本输入中输入什么（甚至是正确的答案），else 语句都会执行。我缺少什么来执行 if 语句？提前感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:45:09.173

首先`';'`从类型属性中删除

```
<input id="text_a" type="text" /> 
```

你有拼写错误`value`

```
var a=document.getElementById("text_a").value; 
```

这是工作[示例](http://jsfiddle.net/WTVxu/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:46:32.740

你拼错了 value：

```
var a=document.getElementById("text_a").vlaue; 
```

应该

```
var a=document.getElementById("text_a").value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:46:38.267

你拼错了价值。

```
var a=document.getElementById("text_a").vlaue; 
```

# java - 尝试将字符串解析为 int 时出错

> ID：15591833
> 
> 赞同：1
> 
> 时间：2013-03-23T20:43:57.950
> 
> 标签：java, string, int

在这个 Java 程序中，用户应该猜一个从 1 到 100 的数字，然后如果你按下`S`它，就会显示一个尝试的摘要。问题是我正在获取输入字符串并将其转换为数字，以便可以将其与范围进行比较，但是我还需要能够将该字符串用作菜单输入。更新用户正确猜测后，如何使程序返回菜单选项。因此，在用户获胜后，我希望问题显示可以使用 S 访问的摘要报告

这是我的代码

```
public class GuessingGame {
  public static void main(String[] args) {

    // Display list of commands
                System.out.println("*************************");
                System.out.println("The Guessing Game-inator");
                System.out.println("*************************");  
                System.out.println("Your opponent has guessed a number!");
                System.out.println("Enter a NUMBER at the prompt to guess.");
                System.out.println("Enter [S] at the prompt to display the summary report.");
                System.out.println("Enter [Q] at the prompt to Quit.");
                System.out.print("> ");

    // Read and execute commands
    while (true) {

      // Prompt user to enter a command
      SimpleIO.prompt("Enter command (NUMBER, S, or Q): ");
      String command = SimpleIO.readLine().trim();

      // Determine whether command is "E", "S", "Q", or
      // illegal; execute command if legal.
      int tries = 0;
      int round = 0;
      int randomInt = 0;
      int number = Integer.parseInt(command);
      if (number >= 0 && number <= 100) {
        if(randomInt == number){

                System.out.println("Congratulations! You have guessed correctly." +
                                " Summary below");
                round++;
        }
        else if(randomInt < number)
        {
                System.out.println("your guess is TOO HIGH. Guess again or enter Q to Quit");
                tries++;
        }      
        else if(randomInt > number){
                System.out.println("your guess is TOO LOW. Guess again or enter Q to Quit");
                tries++;
        }

      } else if (command.equalsIgnoreCase("s")) {
         // System.out.println("Round        Guesses");
         // System.out.println("-------------------------");
        //  System.out.println(round + "" + tries);

      } else if (command.equalsIgnoreCase("q")) {
        // Command is "q". Terminate program.
        return;

      } else {
        // Command is illegal. Display error message.
        System.out.println("Command was not recognized; " +
                           "please enter only E, S, or q.");
      }

      System.out.println();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:50:37.763

要检查字符串是否为整数，只需尝试将其解析为整数，如果抛出异常，则它不是整数。

看：

[http://bytes.com/topic/java/answers/541928-check-if-input-integer](http://bytes.com/topic/java/answers/541928-check-if-input-integer)

```
String input = ....
try {
    int x = Integer.parseInt(input);
    System.out.println(x);
}
catch(NumberFormatException nFE) {
    System.out.println("Not an Integer");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:08:12.070

您应该首先检查 S/Q 值，然后将字符串解析为整数。如果您捕获 NumberFormatException（由 引发`Integer.parseInt()`），您可以确定输入是否为有效值。我会做这样的事情：

```
if ("s".equalsIgnoreCase(command)) {
    // Print summary
} else if ("q".equalsIgnoreCase(command)) {
    // Command is "q". Terminate program.
    return;
} else {
    try {
        Integer number = Integer.parseInt(command);
        if(number < 0 || number > 100){
            System.out.println("Please provide a value between 0 and 100");
        } else if(randomInt == number){
            System.out.println("Congratulations! You have guessed correctly." +
                        " Summary below");
            round++;
        } else if(randomInt < number) {
            System.out.println("your guess is TOO HIGH. Guess again or enter Q to Quit");
                 tries++;
        } else if(randomInt > number) {
            System.out.println("your guess is TOO LOW. Guess again or enter Q to Quit");
            tries++;
        }
    } catch (NumberFormatException nfe) {
        // Command is illegal. Display error message.
        System.out.println("Command was not recognized; " +
                       "please enter only a number, S, or q.");
    }
} 
```

使用此算法（我确信它可以优化），您可以处理以下情况：

*   用户输入 s/S
*   用户输入q/Q
*   用户输入无效值（不是数字）
*   用户输入无效数字（小于 0 或大于 100）
*   用户输入有效数字

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:51:09.527

如果字符串无效，Integer.parseInt(command) 会给你 NumberFormatException。如果用户输入无法解析为 int 值的“S”或“E”，则可能在您的代码中。

我已经修改了你的代码。检查此代码：

```
 while (true) {

          // Prompt user to enter a command
          SimpleIO.prompt("Enter command (NUMBER, S, or Q): ");
          String command = SimpleIO.readLine().trim();

          // Determine whether command is "E", "S", "Q", or
          // illegal; execute command if legal.
          int tries = 0;
          int round = 0;
          int randomInt = 0;
          if(!command.equals("S") && !command.equals("E")) {
            // Only then parse the command to string  

          int number = Integer.parseInt(command);
          if (number >= 0 && number <= 100) {
            if(randomInt == number){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T20:51:10.953

在检查它是否为转义序列（S 或 Q）之前，您正在尝试将传入的转换`String`为 an 。`int`

尝试重新排列您的`if`语句以首先检查 S 和 Q，然后尝试将值转换为`int`.

我还建议您将`Integer.parseInt`调用（它是后续的依赖代码）包装在一个`try-catch`块中，这样您就可以向用户提供一个错误语句，如果他们输入任何不是 int 的内容

# python - 如何让 Python 程序在任何计算机上运行？

> ID：15591834
> 
> 赞同：0
> 
> 时间：2013-03-23T20:43:58.810
> 
> 标签：python

首先，我知道 Py2Exe 之类的东西，并且我已经尝试过了，但对我来说并不奏效。如果我使用 .bat 在没有 Python 文件的计算机上运行 .py/.pyw 文件，它还能工作吗？如果没有，关于如何使用 Py2exe 的教程会很好。

备注：我尝试学习 Java，因为很多计算机都有它，但现在对我来说太难了如果那样的话，语言会更容易，但没有什么比 Java 更难的了，因为我在 Java 上苦苦挣扎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:46:43.890

您已经拥有可用于您的应用程序的 Py2exe 附带的完整教程。

样本位于 下`Python\Lib\site-packages\py2exe\samples`。

作为一个简单的例子，这是`setup.py`我在我的应用程序中用来创建一个嵌入了所有必需库的单个可执行文件，但请记住，任何数据文件（例如图片、声音、文本文件等）都需要与可执行文件捆绑在一起。

```
from distutils.core import setup
import py2exe
import sys

if len(sys.argv) == 1:
    sys.argv.append("py2exe")
    sys.argv.append("-q")

class Target:
    def __init__(self, **kw):
        self.__dict__.update(kw)
        self.version = "0.0.0"
        self.company_name = "Mr.Pyo-Pyo Company"
        self.copyright = "o_O"
        self.name = "Mr.Puyo-Puyo"

test_wx = Target(
    description = "Mr.Puyo-Puyo",
    script = "main.py", # Modify this to use your main .py file
    dest_base = "Mr.Puyo-Puyo")

setup(
    options = {"py2exe": {"compressed": 1,
                          "optimize": 2,
                          "ascii": 1,
                          "bundle_files": 1}},
    zipfile = None,
    windows = [test_wx],
    ) 
```

运行安装脚本就像在应用程序目录中运行脚本一样简单，它将在名为`dist`.

如果您遇到任何错误，您可能需要安装[Microsoft Visual C++ 2008 Redistributable Package](http://www.microsoft.com/en-us/download/details.aspx?id=29)。

# c++ - 将 .end() 与值进行比较

> ID：15591835
> 
> 赞同：0
> 
> 时间：2013-03-23T20:44:00.160
> 
> 标签：c++

我正在写一个布局奇怪的棋盘游戏，所以我有一个`map`从一个点到一个地方的价值。如果该地点是空的，则它不在地图中，因此如果`find`返回`end()`该地点是空的。如果我想检查某个地方的颜色是什么，我会使用以下内容。此代码有效吗？或者换句话说，比较是否`end`安全`lColour`

`enum COLOUR {BLACK,WHITE}`

`this->mBoard.find(Point(p.x - 1, p.y))->second == lColour`

`lColour`类型在哪里`COLOUR`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:50:03.493

不，你所做的并不安全。过去的迭代器（返回的那个`end()`）不能被取消引用。您正在`->`对`find()`: 的结果进行处理，如果该结果是过去的，那么您正在调用未定义的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T21:00:01.580

不。

在尝试获取第二个元素之前，您应该检查 find != end 返回的迭代器。

```
const auto& point_color = this->mBoard.find(Point(p.x - 1, p.y);
if (point_color != this->mBoard.end() &&
    point_color->second == lColour) {
  // something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T20:50:35.253

不，这不是因为这意味着取消引用结束迭代器，这是未定义的行为。

# java - 有哪些独立的 Java 解析器可用？

> ID：15591839
> 
> 赞同：5
> 
> 时间：2013-03-23T20:44:27.690
> 
> 标签：java, parsing, netbeans, intellij-idea, metaprogramming

我需要一个独立的 Java 解析器（“读取”.java 源文件并生成 AST [即表示源内容的对象] 的程序）。

*   有[https://code.google.com/p/javaparser/](https://code.google.com/p/javaparser/)但它只支持 Java 1.5
*   我知道如何在“独立”模式下运行 Eclipse Java 解析器，但是这个解析器使用了太多的 Eclipse JAR，太复杂，并且使用了与 GPL 不兼容的 EPL 许可证
*   其他 IDE（IntelliJ、NetBeans、JDeveloper）和 javac 编译器也必须有一些 Java 解析器，但我找不到任何文档如何在“独立”应用程序中使用它们

有什么帮助吗？也许您中的某个人也尝试过进行一些独立的 Java 解析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T04:01:44.130

[JavaCC](http://java.net/projects/javacc)具有 Java 1.5 语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T03:06:00.510

我们的 DMS Software Reengineering Toolkit 具有[完整的 Java 1.7 解析器](https://stackoverflow.com/a/6378997/120163)。但是，如果您打算做任何严肃的事情，解析器是不够的；查看解析后的生活。除了有趣地处理 Java 之外，DMS 还提供您所需的支持，例如属性语法、符号表、转换规则等，以及所有这些的良好文档。DMS 旨在支持自定义语言分析工具的构建。不过，它不兼容 GPL。

# http - SSLSocketFactory.createSocket 使用 http 而不是 https 连接

> ID：15591847
> 
> 赞同：1
> 
> 时间：2013-03-23T20:45:04.877
> 
> 标签：http, https, handshake

我需要握手。我用下面的代码来做。

我在小程序中运行代码，直接针对服务器运行时它工作正常。当相同的代码通过代理运行时，就会出现我遇到的问题。我正在查看激活了跟踪级别 5 的 Java 控制台。直接在代码行“SSLSocket socket = (SSLSocket) factory.createSocket("www.theserver.com", 443);"之后 执行此行出现在 java 控制台“network: Connecting [http://www.theserver.com:443](http://www.theserver.com:443) with proxy=DIRECT”中。在此之后，小程序停止工作。我认为这是因为代理不允许端口 443 上的 http 流量。

谁能告诉我为什么它使用http连接以及我应该怎么做才能让它使用https连接？

```
import javax.net.ssl.HandshakeCompletedEvent; 
import javax.net.ssl.HandshakeCompletedListener; 
import javax.net.ssl.SSLSocket; 
import javax.net.ssl.SSLSocketFactory; 

public class Handshake 
{ 

    class MyHandshakeListener implements HandshakeCompletedListener 
    { 

        public void handshakeCompleted(HandshakeCompletedEvent e) 
        { 
            System.out.println("Handshake succesful!"); 
            System.out.println("Using cipher suite: " + e.getCipherSuite()); 
        } 
    } 

    public void DoHandshake() 
    { 
        try 
        { 
            SSLSocketFactory factory = (SSLSocketFactory) SSLSocketFactory.getDefault(); 
            SSLSocket socket = (SSLSocket) factory.createSocket("www.theserver.com", 443); 
            String[] suites = socket.getSupportedCipherSuites(); 
            socket.setEnabledCipherSuites(suites); 
            socket.addHandshakeCompletedListener(new MyHandshakeListener()); 
            socket.startHandshake(); 
        } 
        catch (Exception e) 
        { 
            System.out.println(e); 
        } 

    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T20:11:39.343

我知道这有点晚了，但我们遇到了完全相同的问题并且能够解决它。问题出在客户端上，在 Java 控制面板的高级选项卡上选中了“使用 SSL 2.0 兼容的 ClientHello 格式”。在客户端上取消选中此框，它将正确连接。

# java - 更新 JLabel 图标

> ID：15591853
> 
> 赞同：1
> 
> 时间：2013-03-23T20:45:42.603
> 
> 标签：java, swing, icons, actionlistener, jlabel

我是创建 GUI 的新手，我无法刷新 JLabel 上的图像。我读过有同样问题的人提出的其他问题，但没有一个答案对我有帮助。我有一个程序，每次单击 JButton 时都会掷骰子，如果结果是一个，我希望 JLabel 的图像发生变化。这是我的 GUI 类的构造函数：

```
private Panel panel;
private Label label;
private TextField text;
private JButton roll;
private ArrayList<ImageIcon> deck;
private ArrayList<ImageIcon> discard;
private JLabel pic;
private JFrame f;
private ImageIcon now;
public Planechase()
{
    f = new JFrame("Planechase");
    deck = new ArrayList<ImageIcon>();
    populate();
    Collections.shuffle(deck);
    discard = new ArrayList<ImageIcon>();
    label = new Label("Planechase");
    text = new TextField(":)",8);
    text.setEditable(false);
    roll = new JButton("Roll");
    roll.addActionListener(
        new ActionListener() {
            public void actionPerformed(ActionEvent e)
            {
                int i = (int)(Math.random()*6)+1;
                System.out.println(i);
                if(i==1)
                {
                    text.setText("Planeswalk");
                    discard.add(now);
                    now = deck.remove(0);
                    pic = new JLabel(now);
                    pic.updateUI();
                }
                else if(i==6)
                {
                    text.setText("Chaos");
                }
                else
                {
                    text.setText("Blank");
                }
            }
        });
    now = deck.remove(0);
    pic = new JLabel(now);
    f.getContentPane().setLayout(new FlowLayout());
    f.getContentPane().add(pic);
    f.getContentPane().add(text);
    f.getContentPane().add(roll);
} 
```

正如类似问题中所建议的那样，我尝试使用上面的 updateUI() ，但图片没有改变。我还应该尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T01:58:41.690

您正在创建一个新`Jlabel`的`ActionListener`，但没有将其添加到容器中。您可以更新`Icon`使用[setIcon](http://docs.oracle.com/javase/7/docs/api/javax/swing/JLabel.html#setIcon%28javax.swing.Icon%29)

```
pic.setIcon(now); 
```

* * *

*一些旁注：*

*   当您删除`Icons`以在您的 中使用时`JLabel`，您最终将用完可用的图标，从而导致`IndexOutOfBoundsException`如果未重新添加。
*   通常混合 AWT 和 Swing 组件并不是一个好主意。较旧的 AWT 组件通常不尊重组件的*z 顺序*，并且经常隐藏它们的轻量级邻居。见[这里](http://www.oracle.com/technetwork/articles/java/mixing-components-433992.html)。

# ios - 为什么我将对象添加到 NSMutableArray 不起作用？

> ID：15591857
> 
> 赞同：1
> 
> 时间：2013-03-23T20:45:52.400
> 
> 标签：ios, objective-c, xcode, ios6, grand-central-dispatch

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
        dispatch_async(queue, ^{
            NSError *error = nil;

            NSURL *urlRequest = [NSURL URLWithString:[NSString stringWithFormat:@"...", URL]];
            NSString *json = [NSString stringWithContentsOfURL:urlRequest
                                        encoding:NSASCIIStringEncoding
                                        error:&error];

            JKParseOptionFlags options = JKParseOptionStrict;
            NSDictionary *results = [json objectFromJSONStringWithParseOptions:options];

            NSString *body = [[results objectForKey:@"item"] objectForKey:@"description"];

            Article *article = [[Article alloc] initWithTitle:title URL:URL body:body];
            [self.articles insertObject:article atIndex:0];
        }); 
```

就在这之外，`[self.tableView reloadData];`但如果我`NSLog(@"%d", self.articles.count);`在那之后立即调用它，它会返回 0。为什么不添加它？如果我在该块中调用 NSLog 访问文章的 body 属性，它将打印它，因此该对象似乎被创建得很好。是的，这个方法确实被调用（通过 viewDidLoad）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T21:01:21.787

主体是异步执行的，因此在您的函数完成后的某个时间之前它不会开始运行该主体。因此，您所做的只是将一些代码放在队列中（直到稍后才会运行），并检查文章是否已添加到列表中（直到稍后才会添加）。

如果您检查代码内部，那实际上是稍后检查，当队列完成运行代码时......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:59:16.397

如果没有看到对象的声明，我无法告诉您更多信息，`articles`但这通常意味着`NSMutableArray`您尝试使用的对象是 nil。在记录文章的 body 属性的同时，也尝试记录`articles`对象。如果您将数组声明为

```
NSMutableArray *articles; 
```

然后它就行不通了——articles 仍然是 nil 并且不能接受对象。使用以下选项之一声明/实例化：

```
NSMutableArray *articles = [NSMutableArray array]; 
```

或者

```
NSMutableArray *articles = [[NSMutableArray alloc] init]; 
```

# android - 使用地理位置 Google maps api v2

> ID：15591866
> 
> 赞同：1
> 
> 时间：2013-03-23T20:46:46.403
> 
> 标签：android, google-maps, google-maps-markers, supportmapfragment

我在我的应用程序中添加了一个地图片段，包括一个地理标记并包含我的播放服务 jar，但我的标记代码出现以下错误：

```
Error: Cannot cast from Fragment to SupportMapFragment 
```

片段如下：

```
GoogleMap mMap = ((SupportMapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();
        mMap.addMarker(new MarkerOptions()
                .position(new LatLng(53.271900177, -9.04889965057))
                .title("GMI alway Location"));; 
```

这是我引用它的 xml 声明：

```
<fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true" /> 
```

有人对我要去哪里有任何想法吗？谢谢布赖恩 J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T20:49:35.780

如果您在布局中使用 ，则必须使用`SupportFragmentManager`和`FragmentActivity`类。`SupportMapFragment`

所以使用`getSupportFragmentManager()`方法而不是`getFragmentManager()`.

# blackberry-cascades - BB10 Cascades 中的 AttributeKind Group 和 AttributeSubKind GroupDepartment 的用途是什么？

> ID：15591868
> 
> 赞同：0
> 
> 时间：2013-03-23T20:46:52.153
> 
> 标签：blackberry-cascades

有人想通了吗？我没有看到联系人应用程序中使用的那些字段，文档也没有提供任何线索。

```
#include <bb/pim/contacts/AttributeKind> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T18:30:14.707

从文档：

> ContactAttribute 是有关联系人的一条信息，例如电话号码或电子邮件地址。ContactAttribute 有一个 kind，它指定有关属性的高级元数据。属性种类由 AttributeKind::Type 枚举表示，包括电子邮件、电话号码、姓名等。ContactAttribute 也有一个子类，它指定关于属性的附加的、更细化的元数据。子种类由 AttributeSubKind::Type 枚举表示，包括诸如 Work（用于电子邮件）、Home（用于电话号码）等值。

[https://developer.blackberry.com/cascades/reference/bb_pim_contacts__contactattribute.html *_* _](https://developer.blackberry.com/cascades/reference/bb__pim__contacts__contactattribute.html)

# java - 如何在 JComponent 中绘制 JComponent？

> ID：15591872
> 
> 赞同：2
> 
> 时间：2013-03-23T20:47:09.120
> 
> 标签：java, swing, jpanel, jbutton, jcomponent

我对 JComponent 有奇怪的问题。我正在尝试创建自己的 JComponent，因此我需要将我的 JComponent 组合在一起。

我想在我的 JComponent JDial 中绘制 JButton：

```
public class JDial extends JComponent {
    private static final long serialVersionUID = 3364481508702147328L;

    public JDial() {        
        JButton b = new JButton("test");
        this.add(b);
    }
} 
```

但这只是什么都没画。更有趣的是，这个效果很好：

```
public class JDial extends JPanel {
    private static final long serialVersionUID = 3364481508702147328L;

    public JDial() {        
        JButton b = new JButton("test");
        this.add(b);
    }
} 
```

JPanel 继承自 JComponent 并在内部绘制 JButton。JPanel 如何做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T21:17:10.873

通常，当您想要通过覆盖 paintComponent() 方法进行自定义绘画时，您会扩展 JComponent。

如果您只想添加一堆组件，那么您应该使用 JPanel。

两者之间的区别在于，默认情况下 JPanel 使用 FlowLayout，因此它知道如何布局添加到其中的任何组件。要使 JComponent 像 JPanel 一样，您需要设置布局管理器并添加自定义绘画以绘制背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:15:56.647

虽然[JComponent](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/javax/swing/JComponent.java)也继承自`Container`并且确实具有重新绘制适当大小和定位的子级的所有代码，但它没有任何调整它们大小或布局的能力。并且您既没有设置大小也没有设置位置，`JButton`因此默认情况下假定为零大小。

不同的`JPanel`是`FlowLayout`，默认情况下，这个布局管理器将设置组件大小，主要取决于它们计算的首选大小。一般来说，`JComponent`直接用作容器是不常见的，使用`JPanel`.

# javascript - 如何从哈希中删除所有元素并保留参考

> ID：15591874
> 
> 赞同：4
> 
> 时间：2013-03-23T20:47:28.453
> 
> 标签：javascript

我需要从哈希/对象中删除所有内容并保留引用。这是一个例子

```
var x = { items: { a: 1, b: 2} }

removeItems(x.items) ;
console.log(x.items.clean) ;

function removeItems(items) {
    var i ;
    for( i in items; i++ ) {
       delete items[i] ;
    }

    items.clean = true ;
} 
```

我想知道是否有更短的方法来实现这一点。例如，可以按如下方式清理数组

```
myArray.length = 0 ; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-23T21:03:09.637

目前还没有简单的方法来做到这一点，但是 ECMAScript 委员会看到了这种需求，并且它在下一个 JS 版本的当前规范中。

这是使用[ECMAScript 6 maps](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Map)的替代解决方案：

```
var x = {}
x.items = new Map();
x.items.set("a",1);
x.items.set("b",2);

//when you want to remove all the items

x.items.clear(); 
```

[这是它的垫片，](https://github.com/paulmillr/es6-shim)因此您可以在当前的浏览器中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:14:36.923

这不起作用：

```
var i ;
for( i in items; i++; ) {
   delete items[i] ;
} 
```

它使用 init 代码创建了一个[for 循环](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for)`i in items`（顺便说一句，`false`由于 没有`"undefined"`key in `items`，但这并不重要），以及条件`i++`和没有更新代码。然而`i++`评估为 falsy `NaN`，因此您的循环将立即中断。如果没有第二个分号，它甚至是一个 SyntaxError。

相反，您需要一个[for-in-loop](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)：

```
for (var i in items) {
    delete items[i];
} 
```

顺便说一句，`items.clean = true;`将再次创建一个新属性，因此该对象不会真正“干净”:-)

> 我想知道是否有更短的方法来实现这一点。例如，可以按如下方式清理数组

不，您必须循环所有属性并删除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T20:51:07.553

没有更短的方法，抱歉。你的循环不应该有这个`i++`。

```
function removeItems(items) {
  for(var i in items) {
    delete items[i];
  }

  items.clean = true;
} 
```

重构你的代码并只是做`x.items = {}`会更好。

# android - 解析xml android给出空指针异常

> ID：15591876
> 
> 赞同：1
> 
> 时间：2013-03-23T20:47:30.407
> 
> 标签：android, xml, xpath, android-xml, android-parser

我正在解析以下 XML：

```
<?xml version="1.0"?>
<Root>
    <ResponseCode>1</ResponseCode>
    <ResponseMessage>Login Successfull</ResponseMessage>
    <ResultSet>
        <User>
            <id>3</id>
            <username>hassan</username>
            <email>hassan</email>
            <password>abcd</password>
            <profileimagepath>c:/hahaha/hahaha</profileimagepath>
            <createdOn>2013-03-23 12:45:51</createdOn>
            <status>1</status>
        </User>
    </ResultSet>
</Root> 
```

我用来解析 XML 的代码是：

```
InputSource is = new InputSource();
is.setCharacterStream(new StringReader(xmlResult));
XPathFactory factory = XPathFactory.newInstance();
XPath xPath = factory.newXPath();

try {
    NodeList list = (NodeList) xPath.evaluate("/Root", is,XPathConstants.NODESET);
    for(int i=0; i<list.getLength(); i++){
        Node node = list.item(i);
        Element element = (Element) node;
        Log.d("VALUE OF NODE", element.getNodeValue());
    }
} catch (XPathExpressionException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

我无法判断为什么会发生此异常。解析它的正确方法是什么？我在 Android 4.0 上执行此操作。这是日志猫

```
03-24 01:50:54.412: I/Post service Response(1097): <?xml version="1.0"?><Root><ResponseCode>1</ResponseCode><ResponseMessage>Login Successfull</ResponseMessage><ResultSet><User><id>3</id><username>hassan</username><email>hassan</email><password>abcd</password><profileimagepath>c:/hahaha/hahaha</profileimagepath><createdOn>2013-03-23 12:45:51</createdOn><status>1</status></User></ResultSet></Root>
03-24 01:50:54.804: D/dalvikvm(1097): GC_CONCURRENT freed 1940K, 21% free 7888K/9927K, paused 11ms+15ms
03-24 01:50:55.284: W/dalvikvm(1097): threadid=11: thread exiting with uncaught exception (group=0x409961f8)
03-24 01:50:55.293: E/AndroidRuntime(1097): FATAL EXCEPTION: Thread-102
03-24 01:50:55.293: E/AndroidRuntime(1097): java.lang.NullPointerException: println needs a message
03-24 01:50:55.293: E/AndroidRuntime(1097):     at android.util.Log.println_native(Native Method)
03-24 01:50:55.293: E/AndroidRuntime(1097):     at android.util.Log.d(Log.java:138)
03-24 01:50:55.293: E/AndroidRuntime(1097):     at com.teamgreen.greenit.LoginActivity$1$1.run(LoginActivity.java:87)
03-24 01:51:28.253: I/Process(1097): Sending signal. PID: 1097 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:53:54.750

你从内部得到一个异常`Log.d()`，因为`element.getNodeValue()`正在返回`null`。

您不能`null`将第二个参数作为`Log.d()`. 考虑将相应的行更改为：

```
Log.d("xml", "VALUE OF NODE: " + element.getNodeValue()); 
```

与其关注具体问题，不如尝试理解解释堆栈跟踪。堆栈跟踪指向确切的问题：

> E/AndroidRuntime(1097): 在 android.util.Log.d(Log.java:138)
> E/AndroidRuntime(1097): 在 com.teamgreen.greenit.LoginActivity$1$1.run(LoginActivity.java:87)

# c++ - OpenGL，GLM 四元数旋转

> ID：15591877
> 
> 赞同：1
> 
> 时间：2013-03-23T20:47:35.937
> 
> 标签：c++, opengl, quaternions, glm-math

我正在更新一个旧的 OpenGL 项目，并且正在为矩阵和四元数切换所有（已弃用的）**glMatrix()**函数，并且无法使旋转正常工作。

我的画是这样的：

```
//these two are supposedly working
mat4 mProjection = perspective(FOV, aspectRatio, near, far);
mat4 mView = lookAt(cameraPosition, cameraCenter, headsUp);

mat4 mModel = mat4(1.0f);
mat4 mMVP = mProjection * mView * mModel; 
```

我现在要做的是围绕特定点（如对象的中心）对对象应用旋转。我试过了：

```
mat4 mModelRotation = rotate(mModel, object->RotationY(), vec3(0.0, 1.0, 0.0)); //RotationY being an angle in degrees
mat4 mMVP = mProjection * mView * mModel * mModelRotation; 
```

但这会导致对象围绕它的一个边缘旋转，而不是它的中心。

我想知道如何应用四元数来围绕我作为参数传递的任何点旋转对象。

我对矩阵没有经验，因为我避免使用它们是因为我之前可以使用**glMatrix()**函数，所以我不太了解空间位置与它们之间的关系，并且尝试将它们更新为四元数看起来更多复杂。

从技术上讲，我已经阅读了四元数的逻辑以及如何使用它们，但我不明白它们的值从何而来。

例如：

```
//axis is a unit vector
local_rotation.w  = cosf( fAngle/2)
local_rotation.x = axis.x * sinf( fAngle/2 )
local_rotation.y = axis.y * sinf( fAngle/2 )
local_rotation.z = axis.z * sinf( fAngle/2 )
total = local_rotation * total 
```

我读了这个，我不知道这些值是什么。轴是单位向量...什么？*fAngle*我假设它是我想要旋转的角度，但是由于四元数使用任意轴，我如何获得每个 XYZ 轴的值，以及如何在四元数中指定它？

所以，我正在寻找四元数的任何实际示例/教程，所以我可以理解发生了什么。

当我想旋转一个对象时，我拥有的唯一信息是我想旋转的轴（x、y 或 z，不是全部，而是它们在最终结果中的组合），以及一个以度为单位的值。我不是一个数学人，所以任何不使用快捷方式的教程都受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-24T16:36:45.503

好的，假设您有一个模型`ML`（模型的一组点）和一个`P`旋转点`ML`。

所有的旋转都以原点为参考，所以你需要移动`ML`以该点`P`为原点的点集，使所有点旋转，然后将其移回。

如何做到这一点？，很简单，对于`ML(k)`你所做的每个点（集合中的一个点）：

```
ML(k)-P --> with this you move the points, using the P point as origin 
```

然后旋转：

```
ROT * (ML(k)-P) 
```

最后，您将其移回：

```
ROT(ML(k)-P) + P 
```

作为四元数，您将矩阵 mult 替换为`q`and`-q`

```
q * (ML(k)-p) * -q + p 
```

那应该行得通。

# r - 组合多重插补数据的自由度、t 统计量和 f 值

> ID：15591880
> 
> 赞同：0
> 
> 时间：2013-03-23T20:47:54.007
> 
> 标签：r, statistics, regression, r-zelig

我是新手 R 用户。我安装了 Zelig 4.1-3 版和 Amelia II 1.7 版。我对如何使用 R 包和函数获得组合的多重插补数据的自由度、t 统计量和 f 值感到困惑。

首先，我加载了 Amelia 和 Zelig：

```
require(Amelia)
require(Zelig) 
```

然后，我加载了 Amelia 附带的示例数据：

```
data(freetrade) 
```

我使用 amelia 函数为此数据集创建了 5 个插补。

```
a.out <- amelia(freetrade, m = 5, ts = "year", cs = "country") 
```

然后，为了结合插补，我使用了 zelig 函数：

```
z.out.imp <- zelig(tariff ~ polity + pop + gdp.pc + year + country, 
     data = a.out$imputations, model = "ls" ) 
```

但是，当我使用此代码时，我得到的系数似乎是单个插补的系数，而不是组合集的系数：

```
summary(z.out.imp) 
```

它们如下：

```
Coefficients:
                           Value   Std. Error     t-stat      p-value
(Intercept)         2.766176e+03 6.670110e+02  4.1471215 0.0003572868
polity              1.645011e-01 3.078134e-01  0.5344183 0.5938286336
pop                -6.079963e-08 6.518429e-08 -0.9327345 0.3774275934
gdp.pc             -4.246794e-04 1.945866e-03 -0.2182470 0.8319093062
year               -1.335563e+00 3.519513e-01 -3.7947390 0.0009787456
countryIndonesia   -7.000319e+01 4.646330e+01 -1.5066343 0.1700377061
countryKorea       -8.643855e+01 4.671629e+01 -1.8502870 0.0926657863
countryMalaysia    -8.815182e+01 5.389486e+01 -1.6356256 0.1393312364
countryNepal       -8.215250e+01 5.475828e+01 -1.5002753 0.1702129176
countryPakistan    -4.349869e+01 5.149729e+01 -0.8446791 0.4238033944
countryPhilippines -8.088975e+01 5.320694e+01 -1.5202857 0.1673234716
countrySriLanka    -7.668840e+01 5.695485e+01 -1.3464771 0.2161986616
countryThailand    -7.400481e+01 5.186395e+01 -1.4269026 0.1903428838 
```

Amelia 手册显示了组合多重插补数据集的一些系数应该是什么，尽管没有解释如何使用 R 获得所有这些系数（参见[http://cran.r-project.org/web/的第 46 页包/Amelia/vignettes/amelia.pdf](http://cran.r-project.org/web/packages/Amelia/vignettes/amelia.pdf)）

```
Complete DF = 167
DF:   min   = 10.36
      avg   = 18.81
      max   = 37.62
F( 2, 10.4) = 15.50
Prob > F    = 0.0008

                    Value        Std. Error     t-stat       p-value
polity             -0.206        0.39            -0.53       0.61 
pop                -3.21 e-08    8.72e-09         3.68       0.004
gdp.pc             -0.0027       0.000644        -4.28       0.000
Intercept           32.7         2.66            12.29       0.000 
```

因为 amelia 函数使用蒙特卡罗模拟，所以我们可以预期运行之间的微小差异。然而，截距的巨大差异表明 zelig 函数返回的回归统计数据不是组合集。

Amelia 手册提供了以下代码：

```
> b.out <-NULL
> se.out <-NULL
> for(i in 1:a.out$m){
+ ols.out <- lm(tariff ~ polity + pop + gdp.pc, data = a.out$imputations[[i]])
+ b.out <- rbind(b.out, ols.out$coef)
+ se.out <-rbind(se.out, coef(summary(ols.out))[,2])
+ }
> combined.results<-mi.meld(q=b.out, se = se.out)
> combined.results 
```

我尝试使用它。返回的结果非常接近第 46 页上显示的值和标准错误：

```
$q.mi
     (Intercept)     polity          pop       gdp.pc
[1,]    33.17325 -0.1499587 2.967196e-08 -0.002724229

$se.mi
     (Intercept)   polity          pop       gdp.pc
[1,]    2.116721 0.276968 6.061993e-09 0.0006596203 
```

但是，它们不包括 t 统计量、自由度或 f 值。

R 中是否有可用的开源包或函数，以便我无需手动计算即可获得自由度、t 统计量和 f 值？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T14:49:02.213

这是我尝试重现您的问题的注释和编辑记录：

```
> library(Zelig)

ZELIG (Versions 4.1-3, built: 2013-01-30)

> a.out <- amelia(freetrade, idvars="country", m = 5)
Error: could not find function "amelia" 
```

我遇到的第一个问题是你没有提到我们需要加载 Amelia 包。更正后，我再次尝试运行第一行：

```
> library(Amelia)
## (Version 1.7, built: 2013-02-10)
> a.out <- amelia(freetrade, idvars="country", m = 5)
Error in amelia(freetrade, idvars = "country", m = 5) : 
  object 'freetrade' not found 
```

这失败了，因为您没有说明如何获取自由贸易数据。在这里猜测：

```
> data(freetrade)
> a.out <- amelia(freetrade, m = 5)
Amelia Error Code:  38 
 The following variable(s) are characters: 
     country
You may have wanted to set this as a ID variable to remove it
from the imputation model or as an ordinal or nominal
variable to be imputed.  Please set it as either and
try again. 
```

您的示例不起作用，因为`amelia`需要告知该函数如何处理字符变量。因此，我修改了您的示例，以便获得一个可以实际运行的示例：

```
> a.out <- amelia(freetrade, idvars="country", m = 5)
> z.out.imp <- zelig(tariff ~ polity + pop + gdp.pc + year + country, 
+      data = a.out$imputations, model = "ls") 
```

运行`summary`结果为我提供了组合模型统计信息”

```
# This part works just fine.
> summary(z.out.imp)

  Model: ls
  Number of multiply imputed data sets: 5 

Combined results:

Call:
lm(formula = formula, weights = weights, model = F, data = data)

Coefficients:
                           Value   Std. Error     t-stat      p-value
(Intercept)         3.294715e+03 6.425487e+02  5.1275725 1.330807e-05
polity              2.761343e-01 3.354271e-01  0.8232319 4.145813e-01
pop                -6.443769e-08 5.526885e-08 -1.1658953 2.659143e-01
gdp.pc              4.549885e-04 1.354139e-03  0.3359984 7.382138e-01
year               -1.599422e+00 3.306932e-01 -4.8365739 2.649602e-05
countryIndonesia   -7.396526e+01 4.112206e+01 -1.7986760 1.009329e-01
countryKorea       -9.673542e+01 5.036909e+01 -1.9205317 8.713903e-02
countryMalaysia    -9.271187e+01 4.998836e+01 -1.8546690 9.424041e-02
countryNepal       -8.863525e+01 4.920061e+01 -1.8015072 9.990792e-02
countryPakistan    -4.789370e+01 4.362907e+01 -1.0977475 2.960914e-01
countryPhilippines -8.548672e+01 4.662372e+01 -1.8335456 9.533829e-02
countrySriLanka    -8.446560e+01 4.939918e+01 -1.7098586 1.170170e-01
countryThailand    -8.026702e+01 4.741244e+01 -1.6929529 1.213329e-01

For combined results from datasets i to j, use summary(x, subset = i:j).
For separate results, use print(summary(x), subset = i:j). 
```

简而言之，您的示例中唯一对我有用的是您声称对您不起作用的一件事。请发布代码和输出，准确显示您所做的事情和发生的事情，因为目前我没有足够的信息来帮助解决问题。

# c# - 设置与面板尺寸相关的表格尺寸

> ID：15591881
> 
> 赞同：0
> 
> 时间：2013-03-23T20:47:54.753
> 
> 标签：c#, .net, winforms

我正在使用 C#，并且我有一个 WinForms 应用程序。

我有一个包含一些按钮的主表单，比如说按钮 A 和 B。我有另一个表单，FormB，它有 2 个不同尺寸的面板。

我想要做的是当用户单击按钮 A 时，向 FormB 显示​​第一个面板的尺寸并显示第一个面板。当用户单击按钮 B 时，将显示带有第二个面板尺寸的 formB 并显示第二个面板。

我知道如何在每种情况下呈现这些面板，但表单大小并没有像我预期的那样改变。

我尝试使用**Dock**属性并将其设置为填充..但没有任何反应。

```
 private void FormB_Load(object sender, EventArgs e)
    {
        panel1.Location = panel2.Location = new Point();
        timer1.Start();

        if (!first)
        {
            panel1.Visible = false;
            panel2.Visible = true;
        }
        else
        {
            panel1.Visible = true;
            panel2.Visible = false;
        }
        this.Dock = DockStyle.Fill;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:00:41.450

您应该使用`panel1.Dock = DockStyle.Fill`or `panel2.Dock = DockStyle.Fill`，而不是`this.Dock = DockStyle.Fill`因为您要设置 Dock 属性而`Panel`不是`Form`.

```
private void FormB_Load(object sender, EventArgs e)
    {
        panel1.Location = panel2.Location = new Point();
        timer1.Start();

        if (!first)
        {
            panel1.Visible = false;
            panel2.Visible = true;
            panel2.Dock = DockStyle.Fill;
        }
        else
        {
            panel1.Visible = true;
            panel2.Visible = false;
            panel1.Dock = DockStyle.Fill;
        }
    } 
```

**编辑**但是之前的代码会根据表单的大小改变面板的大小。由于您想将表单的大小设置为面板的大小，因此您应该设置如下`Size`属性`Form`：

```
 private void FormB_Load(object sender, EventArgs e)
    {
        panel1.Location = panel2.Location = new Point();
        timer1.Start();

        if (!first)
        {
            panel1.Visible = false;
            panel2.Visible = true;
            this.Size = new Size(panel2.Size.Width + 16, panel2.Size.Height + 38);
        }
        else
        {
            panel1.Visible = true;
            panel2.Visible = false;
            this.Size = new Size(panel1.Size.Width + 16, panel1.Size.Height + 38);
        }
    } 
```

# regex - 我如何为 URL 编写正则表达式

> ID：15591886
> 
> 赞同：1
> 
> 时间：2013-03-23T20:48:32.490
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我将使用正则表达式来获取我的 URL 的某些部分。

我有这两个网址。

```
http://site/post/post-link

http://site/post/post-link/ 
```

我可以使用下面的代码`post-link`从第一个 URL 获取。

```
RewriteRule ^post/(.*)$ index.php?title=$1 [L,QSA,NC] 
```

但上面的代码`/`在第二个 URL 中存在问题，无法正常工作。

所以，我倾向于介意，问：

1.我如何用我的代码解决这个问题

2.你有什么想法写出比我更好的代码吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T20:50:46.990

`(.*)`被称为*贪婪匹配*，您匹配所有内容直到字符串的末尾`$`。`(.*?)` 使用After it使其不贪婪，添加`/?`一个可选匹配的`/`，它*不是*`()`从into捕获的`$1`：

```
RewriteRule ^post/(.*?)/?$ index.php?title=$1 [L,QSA,NC] 
```

请注意，由于`.*`匹配*零*个或多个任意字符，您的规则也将匹配`/post/`其后没有标题。如果不应该发生这种情况，并且不应将空标题发送到`index.php`.，请使用`(.+?)`要求*至少一个*字符而不是`(.*?)`.

更好的是使用`([^/]+)`which 匹配所有内容，但不包括下一个`/`：

```
RewriteRule ^post/([^/]+)/?$ index.php?title=$1 [L,QSA,NC] 
```

# ruby-on-rails - Haml 部分与 Sinatra

> ID：15591888
> 
> 赞同：0
> 
> 时间：2013-03-23T20:48:48.147
> 
> 标签：ruby-on-rails, sinatra, haml

我在 Sinatra 中引用了一个 HAML 部分：

```
= haml :'_review', :locals => {:someLocal => someLocal} 
```

好像我做错了，因为我在部分名称中包含下划线。有没有办法让 Sinatra 说它是部分的并省略下划线。

如果没有 Sinatra，我认为它是这样的：

```
= render :partial => 'review', :locals => {:someLocal => someLocal} 
```

但是不能让它与 sinatra 一起工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T23:33:52.383

您没有做任何“错误”的事情，在调用视图时使用文件的基本名称，如果它有下划线，则使用下划线；如果没有，你不会。我真的没有看到使用下划线或不使用下划线有什么好处。也就是说，我是[Sinatra Partial](https://github.com/yb66/Sinatra-Partial)的维护者，因为其他人想要[它，所以它就在里面](https://github.com/yb66/Sinatra-Partial#configuration-options)。

```
enable :partial_underscores

partial :review # will look for the _review.haml file. 
```

如果您希望为特定呼叫关闭它：

```
# will render the non_underscored_partial.haml file.
partial :non_underscored_partial, :underscores => false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:43:48.983

在 sinatra 中，所有视图都使用 views/layout.erb 渲染 - 如果它存在 - 你必须在其中`yield`调用。

如果您有嵌套布局，则必须在“控制器”端构建布局结构，如[Sinatra README](http://www.sinatrarb.com/intro#Templates%20with%20%3Ccode%3Eyield%3C/code%3E%20and%20nested%20layouts)中所述。

# tomcat - eclipse在部署到tomcat时构建错误的url

> ID：15591889
> 
> 赞同：1
> 
> 时间：2013-03-23T20:48:53.333
> 
> 标签：tomcat

我正在学习 Vaadin。我有一个“HelloWorld”应用程序，它正在部署到 tomcat 服务器。问题是当我在 Eclipse 内的服务器上运行时，URL 是：

```
http://localhost:8080/HelloWorld/WEB-INF/classes/com/example/helloworld/HelloworldUI.java 
```

我可以使用以下方式访问应用程序：

```
http://localhost:8080/HelloWorld/ 
```

问题是什么？

# autocomplete - Sublime text 2：是否可以为 Stylus 获得自动完成功能？

> ID：15591893
> 
> 赞同：0
> 
> 时间：2013-03-23T20:49:29.560
> 
> 标签：autocomplete, sublimetext2, stylus

我刚开始使用 Stylus，它看起来很不错。我什至发现了一个看起来很好用的语法荧光笔扩展。

有谁知道是否可以使用自动完成功能？

谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:07:11.930

看看这个[插件](https://github.com/billymoon/Stylus)

而且不要显得粗鲁，但我只需要[谷歌](https://www.google.se/search?q=sublime%20text%202%20stylus&aq=f&oq=sublime%20text&aqs=chrome.0.59j0j57j60l2j0.2618&sourceid=chrome&ie=UTF-8) `sublime text 2 stylus`就可以得到这个答案，这甚至是第一个结果。因此，在下次提问之前，请尝试进行更多研究。;)

# django - 在 neo4django 中，有没有办法更新节点？

> ID：15591894
> 
> 赞同：1
> 
> 时间：2013-03-23T20:49:31.867
> 
> 标签：django, neo4j, neo4django

我现在正在尝试使用 Django + neo4django 构建我的第一个 Neo4j 应用程序。我觉得图书馆很酷，但现在有几个严重的问题。（我明白，他们现在仍在开发版本中。）有没有办法更新现有节点（或修改属性值）？

neo4django - 用户文档 — neo4django 0.1.7-dev 文档[https://neo4django.readthedocs.org/en/latest/index.html](https://neo4django.readthedocs.org/en/latest/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T00:46:37.260

当然——就像使用 Django ORM 一样。

如果你有一个模型`Person`，像这样

```
class Person(models.NodeModel):
    name = models.StringProperty()

pete = Person.objects.create(name='Pete') 
```

您可以简单地更新模型实例属性，然后保存

```
pete.name = 'Peter'
pete.save() 
```

您是否认为更多指向 Django 文档或示例项目的链接会在文档中更清楚地说明这一点？或者也许在“编写模型”部分有更多关于属性的信息？

编辑 - 来自评论中的新信息。

您引用的错误 ( `ValueError: Duplicate index entries for <Model>.prop`) 是因为您尝试使用已使用的值保存标记为“唯一”的模型属性。该`unique=True`选项确保首先检查类型索引，如果该值已被使用，则会引发错误。这是预期的行为。

考虑

```
class UniquePerson(models.NodeModel):
     name = models.StringProperty(indexed=True, unique=True)

>>> pete = Person.objects.create(name='Pete')
>>> peter = Person.objects.create(name='Pete')
...
ValueError: Duplicate index entries for <UniquePerson>.name
>>> pete.name = 'other pete'
>>> pete.save()
>>> peter = Person.objects.create(name='Pete')
>>> #no problem, since the original pete node now has a different name 
```

如果您不想要这种行为，您当然可以关闭`unique=True`，捕获错误，或者检查具有该属性的对象是否已经存在，例如`pete = Person.objects.get(name='Pete')`.

编辑 - 2013 年 4 月 3 日 - 发现了一个有贡献的错误。

几天前，我在 neo4django 中发现了一个错误，它可能导致了您所看到的情况。它使具有`unique=True`属性的节点在已保存到数据库后无法保存，并且无法更新具有此类属性的节点。

我打开了一个问题，确保测试套件捕捉到它，并提供了一个补丁 - [https://github.com/scholrly/neo4django/issues/150](https://github.com/scholrly/neo4django/issues/150-) -希望能解决您的问题！

要从 GitHub 获取最新的源代码，您可以使用`pip install -e git+https://github.com/scholrly/neo4django#egg=neo4django-dev`. 让我知道是否可以解决它。

# jquery - jQuery Mobile on('pageinit') 没有触发

> ID：15591898
> 
> 赞同：0
> 
> 时间：2013-03-23T20:49:48.367
> 
> 标签：jquery, jquery-mobile

使用最新的 jQuery Mobile 1.3.0，如果我在控制台上尝试这个，我会看到警报

```
$(document).ready(function () {
    alert("test");
}); 
```

但是如果我尝试这段代码

```
$(document).on('pageinit', function() {
    alert("test");
}); 
```

我没有看到警报，我得到了一个`[>#document]`对象结果。

知道是什么原因造成的以及如何显示警报吗？

我正在尝试这个简单的示例，因为 using`on('pageshow')`在访问页面时似乎不会触发方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:57:28.547

我被你的标题弄糊涂了，你用的是`pageinit`or`pageshow`吗？因为`pageinit`非常适合我。

```
$(document).on('pageinit', function() {
    alert("test");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T09:34:30.127

在 pageshow 调用中，我们必须使用 pageinit 方法以下代码在我们的项目中工作正常。

```
$('#HomePage').live('pageinit', function() 
                    {
                    }
                );

$('#HomePage').live('pageshow', function() 
                    {
                        alert('pageshow method call');
                    }
                ); 
```

# css - 带有复选框的 CSS 布局

> ID：15591899
> 
> 赞同：0
> 
> 时间：2013-03-23T20:49:48.957
> 
> 标签：css, checkbox

当我想添加复选框时，我的布局出现问题。

CSS：

```
p label {
    vertical-align: middle;
    width: 100px;
    display: inline-block;
    /*display: block;
    padding-top: 8px;
    float: left;*/
} 
```

HTML：

```
<p>
    <label for="a">a:</label>
    <select name="a" id="a" class="select">
        <option value="">Choose</option>
    </select>
</p>
<p>
    <label for="s">s:</label>
    <select name="s" id="s" class="select">
        <option value="">Choose</option>
    </select>
</p>
<p>
    <label for="d">d:</label>
    <input id="1" type="checkbox" name="looking_for[]" value="1" />
    <label class="no_float" for="1">Friends</label>
    <input id="2" type="checkbox" name="looking_for[]" value="2" />
    <label for="2">Friends</label>
</p> 
```

我希望它看起来像

![http://media.smashingmagazine.com/images/web-form-design-patterns/labels-small.jpg](../Images/a24f493d593ff9d3c5de641b75f196fe.png)

为方便起见，我添加了一个[jsfiddle](http://jsfiddle.net/3LW8D/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:06:28.593

您为复选框使用了“id=1 和 id=2”。这可能是原因之一，因为数字不适用于 id。试着给出一个有意义的名字，一些字符或字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T22:03:15.913

这对你来说很好

一：选择

s：选择

d:

```
<input id="first" type="checkbox" name="looking_for[]" value="1" />Friends<br />

<input id="second" type="checkbox" name="looking_for[]" value="2" />Friends<br />

</p> 
```

CSS是这样的

```
p label {
vertical-align: middle;
width: 100px;
display: inline-block;}

#second{margin-left:108px;}

/*display: block;
padding-top: 8px;
float: left;*/
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T21:02:20.187

你在寻找这样的东西吗？[http://jsfiddle.net/3LW8D/1/](http://jsfiddle.net/3LW8D/1/)可能用更少`div`的 s 和更多的 css 来完成，但由于图像链接不起作用，我只是在猜测你在寻找什么。;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T21:50:10.433

也许这就是你的意思，

[http://jsfiddle.net/3LW8D/3/](http://jsfiddle.net/3LW8D/3/)

```
use container div. 
```

是的，即使“user1823799”给出的答案看起来非常相似，但方法上有很大的不同，段落标签在他的例子中被弄乱了，所以我只是重新发明了轮子。

回到你的问题，总是制作一个具有特定大小的容器 div，确保它正确定位在你想要放置元素的位置，如果位置不正确，那么你可以使用 margin/position 属性来修复它，然后将您的小元素嵌套在此容器 div 中。

# java - 从继承的受保护的 Java 字段创建公共访问器

> ID：15591901
> 
> 赞同：3
> 
> 时间：2013-03-23T20:50:00.693
> 
> 标签：java, scala, inheritance, visibility

我怎样才能使以下工作：

```
class Foo extends javax.swing.undo.UndoManager {
  // increase visibility - works for method
  override def editToBeUndone: javax.swing.undo.UndoableEdit = super.editToBeUndone

  // fails for field
  def edits: java.util.Vector[javax.swing.undo.UndoableEdit] = super.edits
} 
```

请注意，这`edits`是`CompoundEdit`（的超类`UndoManager`）中的受保护字段。我希望有一个同名的公共访问器来读取该字段。我该怎么做？

```
<console>:8: error: super may be not be used on variable edits
         def edits: java.util.Vector[javax.swing.undo.UndoableEdit] = super.edits
                                                                            ^ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:39:42.363

嗯，总会有反思。

```
class Foo extends javax.swing.undo.UndoManager {
  def edits(): java.util.Vector[javax.swing.undo.UndoableEdit] =
    classOf[javax.swing.undo.CompoundEdit].
    getDeclaredField("edits").get(this).
    asInstanceOf[java.util.Vector[javax.swing.undo.UndoableEdit]]
} 
```

您也可以通过嵌套来消除这两个调用的歧义，尽管这很难看：

```
class PreFoo extends javax.swing.undo.UndoManager {
  protected def editz = edits
}
class RealFoo extends PreFoo {
  def edits() = editz
} 
```

但是，您确实需要`()`—— 没有它与字段本身冲突（并且您不能`val`用 a 覆盖 a `def`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T20:54:11.343

您不能更改继承字段的可见性，这是​​不允许的。

*在某些情况下，您可以通过使用组合来“模拟”此类行为，但显然无法实现 CompoundEdit 类。*

不确定“editToBeUndone”，因为该方法在类中不存在：http: [//docs.oracle.com/javase/6/docs/api/javax/swing/undo/CompoundEdit.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/undo/CompoundEdit.html)

# linux - 从linux中特定目录中的路径执行某些东西

> ID：15591904
> 
> 赞同：0
> 
> 时间：2013-03-23T20:50:17.097
> 
> 标签：linux

我想知道是否可以从特定目录中的路径执行某些内容，例如，我在 linux 的路径中有一个名为 STAR 的程序，并且我编写了一个 sh 脚本来多次执行它，但是当它运行时它会生成当前工作目录中的输出（由多个文件组成）。现在程序本身没有任何用于重定向输出的内置功能。

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T20:54:25.033

使用底层`chdir()`系统调用更改 cwd，该系统调用`cd`在您的 shell 中调用。如果脚本转储到 cwd 并且您希望它转储到其他地方，只需`cd`在包装脚本中使用以更改到您想要输出的目录。

# java - 将流上传到亚马逊 s3

> ID：15591906
> 
> 赞同：3
> 
> 时间：2013-03-23T20:50:22.840
> 
> 标签：java, amazon-s3

```
java.net.URLConnection conn = null;
try
{
    conn = new URL(track.getStreamUrl()).openConnection();
}
catch(MalformedURLException e1)
{

    e1.printStackTrace();
}
catch(IOException e1)
{

    e1.printStackTrace();
}

try
{
    InputStream is = conn.getInputStream();
    byte[] contentbytes = getBytesFromInputStream(is);
    Long contentLength = Long.valueOf(contentbytes.length);
    ObjectMetadata metadata = new ObjectMetadata();
    metadata.setContentLength(contentLength);
    InputStream is2 = conn.getInputStream();
    s3.putObject(new PutObjectRequest(bucketName, my_key, is2, metadata));
} 
```

这是我面临的例外=

```
Exception in thread "AWT-EventQueue-0" AmazonS3Exception: Status Code: 301, AWS Service: Amazon S3, AWS Request ID: 79B972B0038C4F0D, AWS Error Code: PermanentRedirect, AWS Error Message: The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint., S3 Extended Request ID: l4fTSi20J9Ht9DY3ECgRTZ9HL0d7LS+rkmnhe4IG8tzy6TllEI7EO2bu/FDVUWOe
        at com.amazonaws.http.AmazonHttpClient.handleErrorResponse(AmazonHttpClient.java:644)
        at com.amazonaws.http.AmazonHttpClient.executeHelper(AmazonHttpClient.java:338)
        at com.amazonaws.http.AmazonHttpClient.execute(AmazonHttpClient.java:190)
        at com.amazonaws.services.s3.AmazonS3Client.invoke(AmazonS3Client.java:2974)
        at com.amazonaws.services.s3.AmazonS3Client.putObject(AmazonS3Client.java:1149)
        at S3TransferProgressSample$1$1.actionPerformed(S3TransferProgressSample.java:208)
        at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
        at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
        at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
        at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
        at java.awt.Component.processMouseEvent(Component.java:6505)
        at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
        at java.awt.Component.processEvent(Component.java:6270)
        at java.awt.Container.processEvent(Container.java:2229)
        at java.awt.Component.dispatchEventImpl(Component.java:4861)
        at java.awt.Container.dispatchEventImpl(Container.java:2287)
        at java.awt.Component.dispatchEvent(Component.java:4687)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
        at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
        at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
        at java.awt.Container.dispatchEventImpl(Container.java:2273)
        at java.awt.Window.dispatchEventImpl(Window.java:2719)
        at java.awt.Component.dispatchEvent(Component.java:4687)
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:723)
        at java.awt.EventQueue.access$200(EventQueue.java:103)
        at java.awt.EventQueue$3.run(EventQueue.java:682)
        at java.awt.EventQueue$3.run(EventQueue.java:680)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
        at java.awt.EventQueue$4.run(EventQueue.java:696)
        at java.awt.EventQueue$4.run(EventQueue.java:694)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:693)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-25T22:53:06.870

您尝试上传到的存储桶是在与“美国标准”不同的区域中创建的。创建 S3Client 对象时，您需要指定正确的区域。在适用于 Java 的 AWS 开发工具包 1.4 版本中，您可以执行以下操作：

```
AmazonS3 s3 = new AmazonS3Client();
s3.setRegion(Region.getRegion(Regions.US_WEST_2)); // or whatever region you are working with 
```

或者你可以这样做：

```
AmazonS3 s3 = Region.getRegion(Regions.US_WEST_2)
                    .createClient(AmazonS3Client.class, credentials, config); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:37:27.560

您收到了 HTTP 重定向响应 - 正如错误消息所说，您必须使用该地址，而不是您实际连接的位置。或者您可以执行以下操作：

```
java.net.HttpURLConnection conn = null;
try
{
    URL url = new URL(track.getStreamUrl());
    conn = (HttpURLConnection)url.openConnection();
    conn.setFollowRedirects(true);
}
catch(MalformedURLException e1)
{
    e1.printStackTrace();
}
catch(IOException e1)
{

    e1.printStackTrace();
} 
```

# mysql - 如何使用 Erlang 的 Yaws Web 服务器访问 MySQL

> ID：15591910
> 
> 赞同：1
> 
> 时间：2013-03-23T20:50:43.557
> 
> 标签：mysql, erlang, yaws

可能吗？如果是这样，如何？

我知道 php 和 MySQL 与 Apache 一起运行。

但是，如何使用 Yaws 脚本访问 MySQL 数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-20T11:22:35.287

是的，有可能，这里有一些示例代码：

```
<erl> 

out(A) -> 
    application:start(odbc), 
    ConnString = 
        "Driver={MySQL ODBC 5.1 Driver};" ++ 
        "Server=localhost;Database=test;" ++ 
        "User=root;Password=ace152;" ++ 
        "Option=3;", 
    {ok, Conn} = odbc:connect(ConnString, []), 
    Results = odbc:sql_query(Conn, "SELECT * FROM test_table"), 
    {html,"Something here."}. 

</erl> 
```

# c++ - 在 C++ WINAPI 中对 EDIT 控件进行子类化时窗口为空

> ID：15591916
> 
> 赞同：0
> 
> 时间：2013-03-23T20:50:50.353
> 
> 标签：c++, winapi, controls, edit, subclassing

我有一个 EDIT 控件，我尝试对其进行子类化，当我这样做时，整个窗口都是空的：

```
// Global variables
HINSTANCE hInst;
WNDPROC oldEditWndProc;
INT_PTR CALLBACK EditWndProc(HWND, UINT, WPARAM, LPARAM);

// Messages handler of the parent window
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) {
    HDC hDC;
    HWND myedit;

    switch (message)
    {
    case WM_CREATE:
        // Create the EDIT control
        myedit= CreateWindowEx(
                               WS_EX_CLIENTEDGE|WS_EX_CONTROLPARENT, 
                               L"EDIT", 
                               L"",
                               WS_CHILD|WS_VISIBLE|WS_TABSTOP|ES_LEFT, 
                               20, 120, 
                               160, 20, 
                               hWnd, 
                               NULL, 
                               hInst, 
                               NULL
                              );
        oldEditWndProc = (WNDPROC)GetWindowLongPtr (myedit, GWLP_WNDPROC);
        // This is the line where problems begin
        SetWindowLongPtr (myedit, GWLP_WNDPROC, (LONG_PTR)EditWndProc);
        break;
    case WM_PAINT:
        hDC = BeginPaint(hWnd, &ps);
        EndPaint(hWnd, &ps);
        break;
    case WM_DESTROY:
        PostQuitMessage(0);
        break;
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    return 0;
}

// EDIT control own handler
INT_PTR CALLBACK EditWndProc(HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam) {
    switch (uMsg) {
        case WM_GETDLGCODE:
            return DLGC_WANTTAB;
            break;
    }
    return (INT_PTR)FALSE;
} 
```

我只是想不通为什么调用时整个窗口都是空的`SetWindowLongPtr`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-23T21:05:30.897

“空”是指它没有显示在屏幕上？

如果是，那是因为当您子类化一个 Window 时，它的所有消息都将发送到新的 MessageProc，它不具备在其 defaultProc 函数中正确显示它的所有功能（例如 WM_PAINT，甚至是按钮单击）。

所以你需要这样的东西：

```
//store the old window proc somewhere
WNDPROC oldWindowProc = (WNDPROC)SetWindowLong(subWindowHandle, GWL_WNDPROC, long(NewMessageProc));

//and in the message proc
switch(uMsg)
{
    //your "case"s here
    default:
    {
        CallWindowProc(oldWindowProc, windowHandle, uMsg, wParam, lParam);
    }
} 
```

这将调用适当的 WM_PAINT 和其他消息到负责绘制和单击以及其他功能的 messageProc（子类窗口的 DefWindowProc()）。

或者，您也可以在 NewMessageProc 中为所有子类窗口实现 WM_PAINT，但无需调用它们的 DefWindowProc，您需要为它们可能收到的**每个**事件（鼠标移动、鼠标单击、按钮单击等）执行操作，因此使用它们的原始DefWindowProc 更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:05:50.050

在您的编辑窗口过程中，您需要调用一些适当的默认消息处理。

比如原来的window proc。

在代码的抽象级别上，最简单的方法是使用`SetWindowSubclass`来进行子类化

# c# - 在asp.net C#中的TreeView中选择一个TreeNode

> ID：15591922
> 
> 赞同：0
> 
> 时间：2013-03-23T20:51:39.750
> 
> 标签：c#, asp.net

我的 aspx 页面中有一个 TreeView 控件。

每个 TreeNode 都有一个 Text & Value 属性。

例如

```
TreeView Tr_View = new TreeView();
                    TreeNode TrNode=new TreeNode("ABC","1");
                    Tr_View.Nodes.Add(TrNode);
                    TrNode = new TreeNode("DEF", "5");
                    Tr_View.Nodes.Add(TrNode);
                    TrNode = new TreeNode("GHI", "9");
                    Tr_View.Nodes.Add(TrNode);
                    TrNode = new TreeNode("JKL", "11");
                    Tr_View.Nodes.Add(TrNode); 
```

问题是我想根据其值“9”选择第三个节点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:10:08.987

使用以下代码查找值为“9”的节点并选择它：

```
var node = Tr_View.FindNode("9");
node.Select(); 
```

请注意，此处的“9”是指向节点的路径。因此，如果您将有非根级别的节点，则需要指定完整路径，例如“root.child.9”。

如果您没有完整路径，根据节点值查找节点的最佳方法可能是遍历所有树节点：

```
using System.Linq;
using System.Collections.Generic;
...
IEnumerable<TreeNode> GetAllNodes()
{
  Stack<TreeNode> roots = new Stack<TreeNode>(Tr_View.Nodes);
  while(roots.Count > 0)
  {
    var node = roots.Pop();
    foreach (var child in node.ChildNodes)
      roots.Push(child);

    yield return node;
  }
}
...
var allNodesWithValue9 = GetAllNodes().Where(n => n.Value == "9"); 
```

# jpa - JPA 中的关系。它们在内部是如何工作的？

> ID：15591924
> 
> 赞同：0
> 
> 时间：2013-03-23T20:51:39.987
> 
> 标签：jpa, relationships

例如，这些类：

```
public class Boss{
    ... 
    @OneToMany(mappedBy="boss")
    Set<Employee> employees;
}

public class Employee{
    @ManyToOne
    Boss boss;
    ...
} 
```

老板和员工之间是有关系的。我可以通过 boss.getEmployees() 找到老板的所有员工。

SDFDK 做什么来了解关系的要素？从老板那里保存所有员工的ID？

我想知道 boss.getEmployees() 和带有“SELECT e FROM Employee e where e.id='boss_id'”的查询之间的性能差异

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:06:07.663

> 我想知道 boss.getEmployees() 和带有“SELECT e FROM Employee e where e.id='boss_id'”的查询之间的性能差异

性能上的差异是肯定的，但工作方式相同。`JPA`比`JDBC`当然慢。`JDBC`也低于`JPA`. 我告诉你这个。使用`ORM`有一个主要优点，您将节省大量时间来实现自己的`ORM`，但您对查询的控制不如实现自己的`ORM`. 你对方法的内部实现和`JPA`.

当您实现自己的`ORM`查询时，您可以更好地控制查询，您可以根据应用程序需求优化查询，但这需要一些时间。`JPA`是`ORM`实现所有必需的数据库逻辑的框架，而不是你。你只需要通过注释告诉他你想要什么。

框架的下一个优点`ORM`是您的应用程序将独立于数据库层（数据源的类型），但您也可以通过实施适当的设计模式（如 等）来实现这`AbstractDAOFactory`一点`AbstractDataMapper`。

# url - 如何使用自定义方案缩短 URL？

> ID：15591925
> 
> 赞同：6
> 
> 时间：2013-03-23T20:51:58.030
> 
> 标签：url, url-scheme, url-shortener, bit.ly, goo.gl

我想在 Twitter 中分享我的应用程序的链接。URL 看起来像`myapp://mylink`. Twitter 不会突出显示此类 URL，并且它们确实无法访问。我想将我的链接包装成类似`bit.ly/xxxxxx`但[http://bit.ly](http://bit.ly)和[http://goo.gl](http://goo.gl)都不支持自定义 URL 模式。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-23T20:59:09.697

你试过[http://is.gd](http://is.gd)吗？

它支持自定义 url 方案。缺点是它不像 google 或 bit.ly 那样出名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:37:17.743

你也可以试试[http://pack.re](http://pack.re)
支持任何 url 方案，你可以把多个 url 放到一个链接中！

# mysql - 使用 mysqldump 将所有数据库导出到使用 DAYOFMONTH() 的文件中

> ID：15591926
> 
> 赞同：0
> 
> 时间：2013-03-23T20:52:15.550
> 
> 标签：mysql, mysqldump

我想在我的 cron 中运行一个任务，将所有数据库导出到一个文件中。我想为一周中的每一天创建 1 个文件（例如`all_[1-7].sql`）。如果它存在，我希望它替换以前的文件。是否可以使用 MySQL 的日期和时间函数，例如：

```
mysqldump -u user -ppass –all-databases | gzip > /backups/mysql/all_`DAYOFMONTH(CURDATE())`.sql.gz 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T20:55:55.053

不。管道字符运行 shell 命令之后会发生什么，而不是 MySQL。因此，您需要“shell 方式”生成日期。例如

```
... | gzip > /backups/mysql/all_`date +%u`.sql.gz 
```

# assembly - 错误：FASM x86 程序集中的值超出范围

> ID：15591931
> 
> 赞同：1
> 
> 时间：2013-03-23T20:53:01.737
> 
> 标签：assembly, x86, fasm

为什么我要`error: value out of range.`输入以下代码？

```
mov eax,dword ptr "abcdlol$" 
```

我想将 的地址`"abcdlol"`放入`eax`寄存器，但看起来这不是 FASM 正在复制的值`eax`。

C代码中的一个例子：`int *p="lol";`

如何解决这个问题？这是汇编程序的限制吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-23T20:56:45.343

它应该是 FASM 语法：

```
mov eax,my_string
我的字符串数据库“abcdlol$”

```

您还可以使用`lea`：

```
lea eax,[my_string]
我的字符串数据库“abcdlol$”

```

是使用 ASCIIZ 字符串（以 0 结尾）还是其他一些终止符取决于您要对字符串做什么。似乎您正在使用`$`作为字符串终止符，这是 DOS 打印字符串函数使用的。检查`$`您要使用的 OS API 函数（如果有）的字符串终止符是否正确。例如`printf`需要以零结尾的 (ASCIIZ) 字符串。

请参阅[FASM HelloWorld .exe 程序](https://stackoverflow.com/questions/4174565/fasm-helloworld-exe-program)，请参阅 FASM 语法示例。

`dword ptr`仅在寻址存储器时才需要等。`mov eax,abcdlol`只是一个`mov eax,immed32`。处理器不担心您是将存储的值`eax`用作数字还是指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:14:12.857

这应该有效：

```
mystring  db  "abcdlol", 0
mov eax,mystring 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T16:36:43.630

回归本源：

EAX 只能存储 4 个字节。“abcdlol$”是 8 个字节。因此，您应该按照其他发帖人的建议，将其地址放入 EAX，而不是直接放入值。但是，如果您坚持，请使用两个寄存器：

```
mov eax,"abcd" ;4 bytes
mov ebx,"lol$" ;4 bytes 
```

或在 64 位中，

```
mov rax,"abcdlol$" 
```

您应该区分传递立即值和传递地址到寄存器之间的区别。

# php - 从字符串php中分离一个值？

> ID：15591935
> 
> 赞同：-3
> 
> 时间：2013-03-23T20:53:38.013
> 
> 标签：php, regex

如何使用 php 从 url 中获取特定值？

```
$orginal=http://wwww.flickr.com/photos/username/1125323/in/photostream/lightbox/"; 
```

我想要这个网址的 1125323 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T20:57:27.250

使用以下代码：

```
<?php
    $orginal="http://wwww.flickr.com/photos/username/1125323/in/photostream/lightbox/";
    $url_data = explode("/",$orginal);
    $id = $url_data[5];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T20:57:10.343

使用`.*?(\d+)`->`\1`作为正则表达式。

```
$out = preg_replace('/.*?(\d+)/','$1', $url); 
```

提示：如果您想再次执行此操作，请使用[Txt2re 。](http://txt2re.com/)

# http - 如何使用 AJAX 通过 HTTP 下载文件？

> ID：15591940
> 
> 赞同：1
> 
> 时间：2013-03-23T20:54:00.460
> 
> 标签：http, jquery, download

我想从服务器下载文件。服务器部分工作正常。

我使用以下代码：

```
$("#download-button").click(function() {
    alert("starting download");
    $.ajax({
        url:'download/myfile.txt'
    });
}); 
```

我收到警报（当然），但没有下载。

但是，当我手动转到时`http://srv/download/myfile.txt`，我会下载文件。

我在 AJAX 调用中做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:13:28.813

不应使用 Ajax 下载文件。改用[document.location](https://developer.mozilla.org/en-US/docs/DOM/document.location)

```
// Set the value of the location object 
document.location = 'download/myfile.txt'; 
```

# java - 即使添加到构建路径和清理后也无法解决导入

> ID：15591941
> 
> 赞同：2
> 
> 时间：2013-03-23T20:54:03.077
> 
> 标签：java, eclipse, http, jar, import

我很难在 Eclipse ADT 中导入 Apache HttpClient jar 库。我下载了罐子。我将它们添加到内部项目和构建路径中，并清理了项目。我不断收到“无法解析导入 org.apache.commons.httpclient”的消息。我尝试将它们添加为外部 jar，再次清理项目，然后关闭并重新打开 Eclipse 以进行良好的测量。没运气。它仍然不知道罐子在那里。我觉得我没有做一些基本的事情，但我不知道它是什么。似乎大多数时候有人遇到这样的问题，解决它的方法是做我已经做过但没有奏效的事情之一。

![截屏](../Images/412e30fe422bea7be2d9d171fcc673c8.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T20:59:48.790

也许应该是`org.apache.http.client.HttpClient`-与 Android 一起打包的[HttpClient 。](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T21:01:51.010

检查 jar 是否包含指定包中的确切类。您可以展开引用的库节点来执行此操作。

它也很可能应该是：

`import org.apache.http.client.HttpClient;`

`import org.apache.http.client.methods.HttpPost;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T20:58:39.733

我认为您在构建路径中添加了几次相同的 jar 文件，这会导致错误。编译器无法检测到要引用哪个库，因为它们都相同并且包含相同的导入路径。请删除其中任何一个，然后重试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-19T11:05:04.230

我遇到了完全相同的问题 您需要采取的步骤 1) 从[HttpClient 4.2.5](http://hc.apache.org/downloads.cgi)下载二进制文件 2) 然后提取它。
3）开始你的日食。4）右键单击您希望这些库工作的项目>属性>库（选项卡）>添加外部Jar>现在出现一个窗口，您必须转到提取文件的位置。接下来进入该提取的文件夹。接下来进入文件夹lib。选择“所有”jar，然后单击“确定”。我希望在此之后您的问题将得到解决。

上面的问题是您的导入不完整。当我阅读此文件中的自述文件时，我才知道这一点。它说

* * *

" HttpClient 主模块需要与 Java 5.0 兼容的运行时，并且依赖于以下外部库：

*   Apache HttpComponents HttpCore
*   Apache Commons 日志记录
*   Apache Commons 编解码器

（有关外部依赖项的详细信息，请参阅 pom.xml）

HttpMime 模块是可选的，需要与 Java 5.0 兼容的运行时，并且依赖于以下外部库：

*   Apache HttpComponents HttpCore
*   Apache Commons 日志记录

（有关外部依赖项的详细信息，请参阅 pom.xml）“

* * *

# javascript - Javascript - 如何检查元素是否包含图像？

> ID：15591942
> 
> 赞同：8
> 
> 时间：2013-03-23T20:54:06.573
> 
> 标签：javascript, html

谁能建议我如何检查元素是否包含图像？我假设它是否包含图像源，但不确定如何编码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T20:58:13.320

你可以这样做：

```
if( elem.getElementsByTagName('img').length > 0) {
    // there is an image
} 
```

* * *

编辑：看到你的评论后，试试这个：

```
var imgs = elem.getElementsByTagName('img'), len = imgs.length, i;
for( i=0; i<len; i++) {
    if( imgs[i].src.match(/\/image\.jpg$/)) {
        // the image is there
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T20:59:14.290

如果您使用的是 jQuery，您可以执行以下操作：

```
if($('#container_id').find('img').length > 0) {
     // Image found on container with id "container_id"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T21:03:36.867

这应该可以工作，并且不需要像 Anael 的解决方案那样的 JQuery：

```
<div id="test1"><img src="img.jpg" /></div>
<div id="test2">Hello</div>    

<script>
function hasImage(id) {
    var childElements = document.getElementById(id).childNodes;
    for (var i = 0; i < childElements.length; i++) {
        if (childElements[i].localName != null && childElements[i].localName.toLowerCase() == "img") {
            return true;
        }
    }
    return false;
}

alert(hasImage('test1')); // true
alert(hasImage('test2')); // false
</script> 
```

JSFiddle 的演示：http: [//jsfiddle.net/qLPJC/](http://jsfiddle.net/qLPJC/)

更新：

要查看它是否有特定的`src`尝试此更新：

```
function hasImage(id) {
    var childElements = document.getElementById(id).childNodes;
    for (var i = 0; i < childElements.length; i++) {
        if (childElements[i].localName != null && childElements[i].localName.toLowerCase() == "img") {
            if (childElements[i].getAttribute('src') != null && childElements[i].getAttribute('src').toLowerCase() == "img.jpg") {
                return true;
            }
        }
    }
    return false;
}

alert(hasImage('test1'));
alert(hasImage('test2')); 
```

更新了 JS Fiddle 示例：http: [//jsfiddle.net/qLPJC/2/](http://jsfiddle.net/qLPJC/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T21:05:25.377

您可以使用 js getElementById 获取图像元素，然后您可以轻松访问该图像的 src，如果 src 不为空或者如果包含则 src 应该具有图像路径，它会告诉您天气元素包含图像。

```
 <html>
    <head>
    <script>
    function myFunction()
    {
     var imgSrc = document.getElementById("myImg").attr('src');
     alert(imgSrc);
    }
    </script>
    </head>

    <body>

    <h1>My Web Page</h1>

    <p id="demo">A Paragraph</p>

    <img id="myImg" src="http://www.blah.com/img.jpg" onclick="myFunction()"></img>

    </body>

</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T21:10:57.890

就像是

```
$("div:has(img)") 
```

如果您使用的是 jquery

# node.js - 如何使用uglifyjs最小化jade脚本标签？

> ID：15591944
> 
> 赞同：0
> 
> 时间：2013-03-23T20:54:08.163
> 
> 标签：node.js, express, pug, minimization, uglifyjs2

我的玉文件中有以下脚本标签：

```
!!!5
html(lang="en")
   head
   body
     script(type='text/javascript')
       function something() {
         alert("test")
       } 
```

如何通过使用 uglifyjs 或任何现有的缩小来最小化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T22:19:48.147

您应该可以使用翡翠过滤器来做到这一点。

这是一个看起来像是隐含的模块：[https ://npmjs.org/package/jade-filter](https://npmjs.org/package/jade-filter)

# windows - 样式不支持 EventSetter xaml Windows 应用程序

> ID：15591956
> 
> 赞同：2
> 
> 时间：2013-03-23T20:55:24.673
> 
> 标签：windows, xaml, microsoft-metro

我试图为 Windows 8 Metro 应用程序做一个简单的计算器程序，但是当我需要为事件处理（和其他东西）做一个样式时，我得到“Windows 应用程序项目不支持 EventSetter”

```
<Style TargetType="Button" x:Key="my_button">
            <EventSetter Event="Click" Handler="Button_Click_1"/>
</Style> 
```

有没有其他方法可以以 Metro 应用程序的风格进行事件处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:21:00.797

一般来说，您不能在 a 中附加事件，`Style`但对于特定示例，`Button.Click`您可以使用普通的 Setter 来设置 a `Command`。如果您使用 MVVM 样式`ICommand`实现（`RelayCommand`,`DelegateCommand`等），您可以绑定到`ICommand`从您的类之一公开的实例：

```
 <Style TargetType="Button" x:Key="my_button">
        <Setter Property="Command" Value="{Binding Path=MyClickCommand}"/>
    </Style> 
```

# ruby - 如何理解 ruby 中的这段代码？

> ID：15591958
> 
> 赞同：0
> 
> 时间：2013-03-23T20:55:35.030
> 
> 标签：ruby

在 Metaprogramming Ruby 中，我看到了这段代码

```
class String
  def to_alphanumeric
    gsub /[^\w\s]/, ''
  end
end 
```

在这里，它向标准类 String 添加了一个 to_alphanumeric 方法，该方法用空格替换标点符号。令我困惑的是，由于我们没有指定 gsub 作用于哪个对象，Ruby 怎么知道我们实际上是指 gsub 作用于 String obj 本身而不是其他东西？或者换一种说法，Ruby 会自动重写为 self.gsub 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-23T20:56:59.313

Ruby 中的隐式接收器总是`self`（`self`当然，在不同的上下文中是不同的）。

*Ruby本身*并不会“自动将其重写为`self.gsub`” ，因为使用显式接收器调用私有方法会引发异常（无论如何这里都是公共方法）。*`self``gsub`*

# php - 传递一个按 Number 递增的变量

> ID：15591959
> 
> 赞同：0
> 
> 时间：2013-03-23T20:55:45.620
> 
> 标签：php, ajax

当我选择人数时，我有一个变量会增加，所以我想通过 ajax 将此变量传递到另一个页面。

我的代码是这样的：

```
for(var i = 1; i <= num; i++) {
  container.append('<tr><th width="120"><div align="left">Person on Room "'+i+'"</div></th><td><input type="text" name="txtHotelCustomerNameSingle'+i+'[]" id="txtHotelCustomerNameSingle'+i+'" size="15" placeholder="Single Room"></td></tr>');
} 
```

如何`name="txtHotelCustomerNameSingle'+i+'[]"`通过 ajax 定义它以传递到另一个页面 php.ini。

我会试试这个，但它会向我发送错误，这是定义变量的好方法。

```
for(var i = 1; i <= num; i++) {
  var txtHotelCustomerNameSingle+i = $('#withHotel').serialize();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:00:21.877

我认为`Array`是一个更好的解决方案。

```
var txtHotelCustomerNameSingle = new Array();
for (...)
{
    txtHotelCustomerNameSingle[i] = ...
} 
```

# grammar - LALR 语法模棱两可

> ID：15591961
> 
> 赞同：0
> 
> 时间：2013-03-23T20:55:46.990
> 
> 标签：grammar, yacc, lalr, disambiguation, ambiguous-grammar

我为布尔和算术表达式制作了一个语法。我想处理算术表达式，例如：

```
(1+5)+(-3) 
```

我已经完成了这项工作：我可以处理我想要的所有表达式。

我的问题是布尔表达式可能类似于：

```
( ( (2+2==4) or (3>2) ) and 2==2) 
```

所以在某些时候我的布尔规则必须引用我的算术表达式规则。我不能在布尔规则中使用括号 ()，因为它会导致我的语法不明确。我明白为什么，但我无法找到解决这个问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T11:23:05.470

这个为 GOLD 编写的 LALR 语法应该可以帮助您入门：

```
<Formula>     ::= <BoolConcat> <Formula> | <BoolConcat> 

<BoolConcat> ::= <BoolConcat> 'and' <Comparison> | <Comparison>

<Comparison> ::=  <Comparison> '>' <Expression> | <Expression> 

<Expression> ::= <Expression> '+' <Term> | <Term>

<Term> ::= <Term> '*' <Fact> | <Fact>

<Fact> ::= Integer | '(' <BoolConcat> ')' 
```

对于 bool 部分，重用了算术语法的典型概念。没有什么新东西，只是不同类型的布尔运算符的优先级更高。

只需将“==”添加到比较中，将“或”添加到 BoolConcat 等等。

# java - 根据 String#CompareTo 的最小字符串

> ID：15591966
> 
> 赞同：3
> 
> 时间：2013-03-23T20:56:54.130
> 
> 标签：java, string, compareto

好的，我确定这一定存在于这里的某个地方，但我似乎找不到它。

是否存在，如果存在，是否存在最小（非空）`String`序列`String#CompareTo`？

我猜`""`，但我不完全确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:07:53.290

鉴于`String#compareTo`（参见[源代码](http://www.docjar.com/html/api/java/lang/String.java.html)）的实现，您可以验证大小为 0 的字符串（因此为空字符串）将始终低于或等于任何其他非空字符串。（在与空字符串比较的情况下相等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:18:20.490

**编辑：**

试试这个，

```
 String s="";
      String s1=new String(new char[-2]);  // Here you will get NagativeArraySize Exception
     System.out.println(s1.compareTo(s)); 
```

这里 compareTo 在 System.out.println() 中不返回任何内容，因此最小字符串将是 "" 或 String.Empty

* * *

AFAIK，没有最小长度，您找不到长度<0的字符串，因此字符串的最小长度为 0（string.Empty 或“”）。

检查 CompareTo 的源代码，

```
public int compareTo(String anotherString) {
        int len1 = count;       // original string count
        int len2 = anotherString.count;  // comparision string count
        int n = Math.min(len1, len2);       
        char v1[] = value;
        char v2[] = anotherString.value;
        int i = offset;
        int j = anotherString.offset;

        if (i == j) {
            int k = i;
            int lim = n + i;
            while (k < lim) {
                char c1 = v1[k];
                char c2 = v2[k];
                if (c1 != c2) {
                    return c1 - c2;
                }
                k++;
            }
        } else {
            while (n-- != 0) {
                char c1 = v1[i++];
                char c2 = v2[j++];
                if (c1 != c2) {
                    return c1 - c2;
                }
            }
        }
        return len1 - len2;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T21:04:00.973

没有最小长度，因为您可以有效地将两个空字符串与`"".compareTo("")`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T21:05:19.510

是的，它是一个空字符串，其中没有值。

看看这个示例代码：

```
String str = "";
str.compareTo(""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-23T21:07:33.600

是的，最小长度字符串将是一个长度为0的空字符串“”。我不认为会有这样一个长度小于0的字符串。

# ruby-on-rails - Ruby/Rails - 如何编写这种语法？

> ID：15591972
> 
> 赞同：1
> 
> 时间：2013-03-23T20:57:25.220
> 
> 标签：ruby-on-rails, ruby, doorkeeper

我正在使用 Doorkeeper，如果我`current_user`以任何方式进行修改，比如使用除非或 if 将其放入条件语句中，Doorkeeper 将不会接收它。有没有一种简单的方法可以保留`current_user ||`并适合包含会话存储的下两行并重定向到双管道右侧的一行中工作？

```
resource_owner_authenticator do

  current_user ||

  session[:after_login_redirect_to] = request.fullpath
  redirect_to('/connect')   

end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-23T22:10:18.257

无需将其设为单行 - 使用 begin 块：

```
resource_owner_authenticator do
  current_user || begin
    session[:after_login_redirect_to] = request.fullpath
    redirect_to('/connect')   
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:11:16.580

您当然可以用多行代码制作表达式，只需将它们括在括号中即可。

```
current_user || (session[:after_login_redirect_to] = request.fullpath; redirect_to('/connect')) 
```

# http - 互联网浏览器如何触发带有 .jpg 扩展名的 Flash 应用程序？

> ID：15591976
> 
> 赞同：0
> 
> 时间：2013-03-23T20:57:51.057
> 
> 标签：http, browser, mime

今天我遇到了一个震惊的网站，背景是一个女孩的脸在眨眼和大声尖叫的大照片。

令人惊讶的是，虽然它看起来是静态图像，但实际上它是一个`application/x-shockwave-flash`文件。浏览器（在我的例子中是 Firefox）将其正确显示为 Flash 应用程序。我的问题是 - 浏览器如何知道它不是 JPG 图像而是 Flash 应用程序？它是使用启发式技术还是文件中有隐藏的“标志”？

当我在 Firebug 中检查页面时，我得到了这个：

```
<html>
 <head>
    <meta name="viewport" content="width=device-width; height=device-height;">
    <title>anne.jpg (application/x-shockwave-flash objekt)</title>
 </head>
 <body marginwidth="0" marginheight="0">
   <embed width="100%" height="100%" name="plugin" src="http://akk.li/pics/anne.jpg" type="application/x-shockwave-flash">
 </body>
</html> 
```

所以浏览器显然知道文件格式是什么。但是怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:00:43.213

服务器返回带有`Content-Type: application/x-shockwave-flash`标题的文件。

# php - PHP mysql_* 转换为 mysqli 致命错误

> ID：15591977
> 
> 赞同：0
> 
> 时间：2013-03-23T20:57:51.087
> 
> 标签：php, mysqli

我将 mysql_* 转换为 mysqli，但遇到以下问题。

php 类（Functions.php）：

```
class Functions{

    public static function filter($data){
        $data = trim(htmlentities(strip_tags($data)));

        if(get_magic_quotes_gpc())
            $data = stripslashes($data);
            $data = $mysqli->real_escape_string($data);

            return $data;
        }

} 
```

数据库连接（dbconnect.php）：

```
$dbhost = 'localhost';
$dbuser = 'xxxxxx';
$dbpass = 'xxxxxx';
$dbname = 'xxxxxx';

$mysqli = new mysqli($dbhost, $dbuser, $dbpass, $dbname);

if(mysqli_connect_errno()){
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
} 
```

我在 header.php 中包含上述文件，例如

```
include('inc/dbconnect.php');
include('inc/Functions.php'); 
```

我让我的页面调用类函数，例如：

```
$params = Functions::filter($_GET['param']); 
```

加载页面时出现此错误：

> 致命错误：在第 XX 行的 C:\xampp\htdocs\site\inc\functions.php 中的非对象上调用成员函数 real_escape_string()

我不是已经在 dbconnect.php 中为 mysqli 创建了一个对象吗？为什么它显示这个错误？它发生在 Functions.php 中所有相关的 mysqli 上。

请指教，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:10:08.533

您已经在全局范围内创建了 mysqli 对象，因此您必须添加`global $mysqli;`到您的方法中或`$GLOBALS['mysqli']`改为使用：

```
public static function filter($data) {
    global $mysqli;

    $data = trim(htmlentities(strip_tags($data)));

    if(get_magic_quotes_gpc())
        $data = stripslashes($data);
        $data = $mysqli->real_escape_string($data);

        return $data;
    }
} 
```

但我建议将对象作为函数参数传递：

```
public static function filter($data, $mysqli) {
    $data = trim(htmlentities(strip_tags($data)));

    if(get_magic_quotes_gpc())
        $data = stripslashes($data);
        $data = $mysqli->real_escape_string($data);

        return $data;
    }
} 
```

进而：

```
$params = Functions::filter($_GET['param'], $mysqli); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T21:10:40.373

您正在尝试`$mysqli`从全局范围访问，因此您应该`global $mysqli`在`Functions::filter`方法内声明。

尽可能不鼓励使用静态类和全局变量。您可以通过以下方式编辑您的`Functions`课程，使其更加面向 OOP：

```
class Functions {

    private $mysqli; 
```

声明一个私有属性来保存该`mysqli`对象。请注意，我们不能`NULL`在那里。因此我们需要声明一个构造函数来初始化我们的属性：

```
 public function __construct(mysqli $mysqli_) {
        $this->mysqli = $mysqli_;
    } 
```

通过类型提示，它将避免任何不是`mysqli`作为参数传递的对象的对象。现在我们只需要将`filter`方法设为实例方法：

```
 public function filter($data){
        $data = trim(htmlentities(strip_tags($data)));

        if(get_magic_quotes_gpc())
            $data = stripslashes($data);
            $data = $this->mysqli->real_escape_string($data);

        return $data;
    } 
```

}

请注意，`$mysqli`现在是`$this->mysqli`因为我们正在使用类的实例属性。

# xml - 尝试实施贝宝 iframe 时 xsltproc 失败

> ID：15591979
> 
> 赞同：0
> 
> 时间：2013-03-23T20:58:07.340
> 
> 标签：xml, paypal, escaping

您好，我正在使用 xsltproc 将 XML 和 XSL 结合起来创建 HTML 文件。

到目前为止一切都很好。

我需要补充：

```
<iframe src='https://payflowlink.paypal.com?SECURETOKEN=776OIGIHemE6xgpGcckDzIA8o&SECURETOKENID=c85d4c2610a92d761b7f445eaa55a7ff&MODE=TEST' width='490' height='565' border='0' frameborder='0' scrolling='no' allowtransparency='true'> 
```

但是由于'src'中的某些字符，xslt proc失败了我认为=给我带来了问题

我该如何逃避这些？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T21:41:57.950

这可能是因为 & 符号。您需要确保它在您的 XSLT 中被转义为 &。如果您使用的是属性值模板，它应该看起来像这样：

```
<iframe 
   src='https://payflowlink.paypal.com?SECURETOKEN={$token}&amp;SECURETOKENID={$tokenid}&amp;MODE=TEST' 
   width='490' height='565' border='0' frameborder='0' scrolling='no' allowtransparency='true'> 
```

# c# - 是否应该在 C# 中添加关键字来引发事件？

> ID：15591986
> 
> 赞同：3
> 
> 时间：2013-03-23T20:58:47.997
> 
> 标签：c#, events, event-handling

以线程安全的方式（为了避免`NullReferenceException`）引发事件需要在调用之前复制事件委托：

```
EventHandler copy = TheEvent;
if (copy != null)
    copy(this, EventArgs.Empty); 
```

或使用空条件运算符并在[Jon Skeet 建议的](http://codeblog.jonskeet.uk/2015/01/30/clean-event-handlers-invocation-with-c-6/)`Volatile.Read`C# 6 中：

```
Volatile.Read(ref TheEvent)?.Invoke(this, EventArgs.Empty); 
```

（有关讨论，请参阅[C# 事件和线程安全](https://stackoverflow.com/questions/786383/c-sharp-events-and-thread-safety)）。

这是乏味且容易出错的。向 C#添加关键字是否没有意义，`raise`以便编译器透明地处理上述模式（或 C# 编译器团队选择的改进模式），例如

```
raise TheEvent(this, EventArgs.Empty); 
```

这将是一种符合`using`and `async`/的语法便利`await`，可以解决围绕以最终方式引发事件的正确方式的困惑。

有什么缺点？

**编辑**

感谢大家的反馈 - 添加另一个关键字确实有点极端。

但是，由于仍然缺乏引发事件的“标准”方式，并且很多人喜欢`Raise()`扩展方法，我建议将其添加到`mscorlib`Visual [Studio UserVoice 频道](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3796170-add-raise-extension-method-for-eventhandler-and-)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T21:24:46.640

真的那么容易出错或令人困惑吗？即使他们确实添加了这样的关键字，他们仍然必须保留引发事件的旧方法以实现兼容性，并且您必须知道引发事件的*正确*方法。您可以创建如下扩展方法来完成大部分工作：

```
public static void Raise(this EventHandler handler, object sender, EventArgs args)
{
  if (handler != null)
  {
    handler(sender, args); 
  }
} 
```

我宁愿看到编译器团队致力于使不可能成为可能，也不愿将我的代码库减少几行。

# perl - 使用 perl 从文本文件中删除唯一行

> ID：15591987
> 
> 赞同：0
> 
> 时间：2013-03-23T20:59:07.600
> 
> 标签：perl

我正在对 perl 中具有多列的文本文件进行一些过滤

该文件具有以下格式：

```
C1  C2  C3  C4 
1   ..  ..  ..
2   ..  ..  ..
3   ..  ..  ..
3   ..  ..  ..
3   ..  ..  .. 
```

我想删除第 1 列中所有具有唯一值的行。所以输出应该是这样的：

```
C1  C2  C3  C4
3   ..  ..  ..
3   ..  ..  ..
3   ..  ..  .. 
```

我正在用这个文件做不同的过滤步骤。这是我正在使用的脚本

```
my $ DATA
my $filename = $ARGV[0];
    unless ($filename) {
        print "Enter filename:\n";
        $filename = <STDIN>;
        chomp $filename;
     }
open($DATA,'<',$filename) or die "Could not open file $filename $!";
open($OUT,'+>',"processed.txt") or die "Can't write new file: $!";

while(<$DATA>){
    next if /^\s*#/; 
    print $OUT $_;
    }

close $OUT; 
```

正如你所看到的，我正在一个 while 循环中工作，在这个循环中我已经使用下一个命令从文件中删除注释行。现在我想在这个循环中添加命令以删除第 1 列中具有唯一值的所有行。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T22:15:36.460

大部分是从 ikegami 和 mattan 偷来的：

```
print "header: ", scalar(<>);
print "multis: \n";

my %seen;
while (<>) {
   next if /^\s*#/;
   my ($id) = /^(\S+)/;
   ++$seen{$id}{count};
   if (1 == $seen{$id}{count}) {
      # store first occurrence
      $seen{$id}{line} = $_;
   } elsif (2 == $seen{$id}{count}) {
      # print first & second occurrence
      print $seen{$id}{line};
      print $_;
   } else {
      # print Third ... occurrence
      print $_;
   }
} 
```

但保持秩序并只使用一个循环。

**之后：**

经过三思而后行

> 是的，它们 [the lines] 应该与现在保持一致，即 [of ids] 的数字顺序

我可以退还独家商品：

```
print "header: ", scalar(<>);
print "multis: \n";

my $ol = scalar(<>);                      # first/old line
my $oi = 0 + (split(" ", $ol, 2))[0];     # first/old id
my $bf = -1;                              # assume old line must be printed
do {
   my $cl = scalar(<>);                   # current line
   my $ci = 0 + (split(" ", $cl, 2))[0];  # current id
   if ($oi != $ci) {                      # old and current id differ
      $oi = $ci;                          #   remember current/first line of current id
      $ol = $cl;                          #   current id becomes old
      $bf = -1;                           #   assume first/old line must be printed
   } else {                               # old and current id are equal
      if ($bf) {                          #    first/old line of current id must be printed
        print $ol;                        #      do it
        $bf = 0;                          #      but not again
      }
      print $cl;                          #    print current line for same id
   }
} while (! eof()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-23T22:35:11.130

这是用 巧妙地完成的[`Tie::File`](https://metacpan.org/module/Tie%3a%3aFile)，它允许您将数组映射到文本文件，以便从数组中删除元素也会从文件中删除行。

该程序需要两次遍历文件：第一次计算第一个字段的每个值的出现次数，第二次删除该字段在文件中唯一的行。

```
use strict;
use warnings;

use Tie::File;

tie my @file, 'Tie::File', 'textfile.txt' or die $!;

my %index;

for (@file) {
  $index{$1}++ if /^(\d+)/;
}

for (my $i = 1; $i < @file; ++$i) {
  if ( $file[$i] =~ /^(\d+)/ and $index{$1} == 1 ) {
    splice @file, $i, 1;
    --$i;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T21:22:08.863

```
my %id_count;
while(my $line = <$DATA>){
    next if $line =~ /^\s*#/; 
    my ($id) = split(/\s+/,$line,1);
    $id_count{$id}{lines} .= $line;
    $id_count{$id}{counter}++;
}

print $OUT join("",map { $id_count{$_}{lines} } grep { $id_count{$_}{counter} ne "1" } keys %id_count); 
```

编辑：如果要保持行排序，只需在最后一行的 the`sort`之前添加一个。`grep`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T21:17:41.060

首先，让我们从你的程序中去掉无关的东西。

```
while (<>) {
   next if /^\s*#/; 
   print;
} 
```

好的，看起来您甚至没有额外增加第一列的值。

```
my ($id) = /^(\S+)/; 
```

在继续阅读之前，我们不知道是否会有重复，因此我们需要存储行以供以后使用。

```
push @{ $by_id{$id} }, $_; 
```

通读文件后，我们会打印出多于一行的 id 行。

```
for my $id (keys(%by_id)) {
    print @{ $by_id{$id} } if @{ $by_id{$id} } > 1;
} 
```

最后，您未能处理标头，可以使用

```
print scalar(<>); 
```

总之，我们得到

```
print scalar(<>);

my %by_id;
while (<>) {
   next if /^\s*#/; 
   my ($id) = /^(\S+)/;
   push @{ $by_id{$id} }, $_;
}

for my $id (sort { $a <=> $b } keys(%by_id)) {
    print @{ $by_id{$id} } if @{ $by_id{$id} } > 1;
} 
```

用法：

```
script.pl file.in >processed.txt 
```

# php - 如何将数据从 JSON 转换为 php 格式

> ID：15591992
> 
> 赞同：2
> 
> 时间：2013-03-23T20:59:19.293
> 
> 标签：php, javascript, jquery, ajax, json

我正在使用**jQuery 的**方法将数据传递给我的**php**脚本。我将一个非常复杂的**JSON**对象作为数据传递。在服务器端，我接收变量中的数据，所有数据都转换为 php 格式。 **`.ajax`**`$_POST`****

 ****这种转换是如何发生的？它发生在客户端还是服务器端？在这个过程中关联了哪些模块。深入了解完整过程的任何来源。

客户要求：

```
var data = {
              foo:  123,
              bar:  456,
              rows: [
                      {
                        column1 : 'hello',
                        column2 : 'hola',
                        column3 : 'bonjour',
                      },
                      {
                        column1 : 'goodbye',
                        column2 : 'hasta luego',
                        column3 : 'au revoir',
                      },
                    ],
              test1:{
                      test2: {
                               test3:  'baz'
                             }
                    }
            };

$.ajax({
        type:           'post',
        cache:          false,
        url:            './ajax/',
        data:           data
       }); 
```

在服务器端我的'$_POST' var：

```
Array
(
    [foo] => 123
    [bar] => 456
    [rows] => Array
        (
            [0] => Array
                (
                    [column1] => hello
                    [column2] => hola
                    [column3] => bonjour
                )

            [1] => Array
                (
                    [column1] => goodbye
                    [column2] => hasta luego
                    [column3] => au revoir
                )

        )

    [test1] => Array
        (
            [test2] => Array
                (
                    [test3] => baz
                )

        )

) 
```

*此代码片段取自[此处](http://www.zulius.com/how-to/send-multidimensional-arrays-php-with-jquery-ajax/)。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T21:12:27.690

Jquery 正在将数据转换为 HTTP 格式。[http://en.wikipedia.org/wiki/POST_%28HTTP%29](http://en.wikipedia.org/wiki/POST_%28HTTP%29)

此链接显示数组是如何编码的：http: [//php.net/manual/en/function.http-build-query.php](http://php.net/manual/en/function.http-build-query.php)

您可以使用 PHP 本身来生成 HTTP 格式。我将您的数组转换为 PHP 格式：

```
$data = array(  'foo' => 123,
                'bar' => 456,
                'rows' => array(    0 => array( 'column1' => 'hello',
                                                'column2' => 'hola',
                                                'column3' => 'bonjour'),
                                    1 => array( 'column1' => 'hello',
                                                'column2' => 'hola',
                                                'column3' => 'bonjour')),
                'test1' => array('test2' => array('test3' => 'baz')) ); 
```

然后您可以按如下方式生成 HTTP：

```
echo http_build_query($data); 
```

我得到以下结果：

```
foo=123&bar=456&rows%5B0%5D%5Bcolumn1%5D=hello&rows%5B0%5D%5Bcolumn2%5D=hola&rows%5B0%5D%5Bcolumn3%5D=bonjour&rows%5B1%5D%5Bcolumn1%5D=hello&rows%5B1%5D%5Bcolumn2%5D=hola&rows%5B1%5D%5Bcolumn3%5D=bonjour&test1%5Btest2%5D%5Btest3%5D=baz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T21:26:10.050

JSON 是一种通用数据交换格式（适用于支持其规范的所有语言）。JSON 数据由发送它的语言从内存对象*编码为 JSON 格式的字符串，并由接收它的语言**解码*（从字符串到对象）。

谈到 jQuery 和 JavaScript 时，重要的一点是 JSON 的语法看起来类似于 JavaScript，但实际上它比常规 JavaScript 对象的语法*更严格（请参阅：* [JSON 和 JavaScript 对象的区别是什么？](https://stackoverflow.com/questions/3975859/what-are-the-differences-between-json-and-javascript-object)）。例如，您在上面发布的 JavaScript 对象文字*不是*有效的 JSON，因为键和值都没有被引号括起来。此外，从技术上讲，没有 JSON 对象之类的东西。一团 JSON 数据实际上只是用 JavaScript 对象表示法的子集编写的字符串。

因此，PHP 的 json_encode($object) 函数和 jQuery 的 encodeJSON([Object]) 函数会将各自语言的内存对象转换为两种语言（当然还有其他语言）都可以作为数据接受的字符串。PHP 和 jQuery 中的 json_decode($string) 和 parseJSON([String]) 函数分别采用 JSON 字符串并将其作为对象提交到内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T21:53:19.293

jQuery 将对象数据编码为键值对，例如，如果我们有：

```
var data = {
          foo:  123,
          bar:  456,
          rows: [
                  {
                    column1 : 'hello',
                    column2 : 'bonjour',
                  },
                  {
                    column1 : 'goodbye',
                    column2 : 'au revoir',
                  },
                ]
           }; 
```

jquery 将该对象编码为以下字符串

```
foo=123&bar456&rows[][column1]=hello&rows[][column2]=bonjour&rows[][column1]=goodbye&rows[][column2]=au+revoir 
```

PHP 会将该字符串转换为一个数组，并根据请求将其分配给 $_GET 或 $_POST 数组。****

# jquery - 通过单击列表元素将 javascript 对象添加到弹簧表单

> ID：15591996
> 
> 赞同：0
> 
> 时间：2013-03-23T20:59:47.660
> 
> 标签：jquery, spring-mvc

我得到了一个从 ajax 调用创建的产品列表。此列表显示产品的名称和产品编号。现在我想通过单击产品列表中的列表元素将产品添加到表单中。

我使用的是spring mvc，所以表单使用了一个需要填充表单数据的支持对象。我要添加的产品需要包含在支持对象的列表中。

在表格中我还想计算总价。所以我需要比产品列表中更多的信息。

我宁愿不将它作为 json 发布到后端，而只是使用@ModelAttribute。

在列表中单击时，是否可以以某种方式将完整的对象（产品）提供给表单？

希望我已经很好地解释了自己，否则就问吧。

以下是源代码：

```
$(document).ready(function() {
    $.getJSON('/oms/ajax/products', function(data) {  
        $.each(data, function(key, obj) {
            $('#productList').append('<li onclick=\"addProduct(' + obj.productName + ')\">' + obj.productName + '</li>');
        });
    });
});

function addProduct(name) {
    $('#orderItems').append('<li><input type=\"text\" name=\"order.lineItems[i]\" value=\"' + name + '\" /></li>');
}

public class OrderDTO {
    private List<OrderItemDTO> lineItems;
    /** getters and setters **/
}

public class OrderItemDTO {

    private String productCode;
    private String productName;
    private String description;
    private Float price;
    private Integer quantity;
    /** getters and setters **/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:00:25.160

您需要做的是摆弄表单的 DOM，添加和删除作为隐藏输入字段的项目。

Spring MVC 通过子脚本处理项目集合。这同样适用于 List 和 Maps。对于列表：

```
<form:form modelAttribute="myModel">
   <form:hidden path="myListItems[0].name" />
   <form:hidden path="myListItems[1].name" />

   <form:hidden path="myMapItems['key1'].name" />
   <form:hidden path="myMapItems['someOtherKey'].name" />
</form:form> 
```

这显示了将两个项目添加到列表或将两个项目添加到地图的正常方法。这使用 Spring JSTL 标记来构建表单。但是，您需要动态执行此操作，因此您将添加如下内容：

这就是 Spring 将如何生成上面的第二个列表项。使其工作的关键是正确地获取名称属性。基本上，所有的 Spring JSTL 标签都会生成某种形式的输入。让事情正常工作的最好方法是查看它是如何使用 JSTL 标记的，然后简单地复制生成的 HTML 标记。

一旦您掌握了如何正确输入的方法，现在只需编写一些 JavaScript 以动态地将正确的输入添加到表单中即可。看起来您正在使用 jQuery，因此您可以执行以下操作：

```
var myModel= $('#myModel);
$("<input />",{
  type: 'hidden',
  id: 'myListItems1.name',
  name: 'myListItems[1].name',
  value: 'someValue'
}).appendTo(myModel); 
```

这里，#myModel 是为表单生成的 ID。我们只是创建一个输入元素，并将其附加到表单中。很简单。

但是，这是您遇到问题的地方。Spring MVC 使用简单的设置器来获取/设置模型属性中的值。这意味着您可以轻松地在 List/Map 中获取和设置值，但这也意味着如果模型属性在 Session 中，Spring MVC 不会删除已经存在的项目。我的意思可以在下面的例子中解释。

假设您的用户在他们的订单中添加了 3 件商品并进行了预览。一旦它往返于您的控制器，您的模型属性集合中现在就有 3 个项目（如果它是一个列表并且您的数字是连续的，则索引为 0、1 和 2 的元素）。现在假设用户决定他不想要第 2 项（索引 1）并将其删除。因此，您的 JavaScript 自然会从表单中删除该项目。但是，当用户提交时，即使表单不再包含索引 1 处的项目，它仍然在模型属性的集合中。这是因为 Spring MVC 只会设置从 Form 提交中传入的东西。它不会跟踪未设置的内容。

所以，你需要做的就是以某种方式跟踪它们。我有两种方法可以做到这一点。第一个是为我的集合中的对象添加一个删除标志。该标志是一个简单的布尔值，当它为真时，控制器/服务层知道该项目已被删除并忽略它。这在 JavaScript 中实现的方式是，在删除一个项目时，您只需替换/添加另一个隐藏输入作为删除标志并将其设置为“true”。

第二种选择是在移除时将所有物品上移，这样所有合法物品都是 1-N。提交表单后，您将发送“有效”计数以及模型属性（作为单独的 RequestParam 或直接在模型属性中的值）。然后控制器/服务层知道列表中应该有多少，并且可以修剪掉不属于的那些。

我可以告诉你，不管你走哪条路，让所有这些工作都很好是一个挑战，你需要对 Spring 的工作原理有一个深刻的理解。我强烈建议编写一些简单的测试应用程序，查看 Spring 生成的内容（尤其是在视图中），并尝试了解它。

至于如何实现所有这些，完全取决于您要如何编写代码。我倾向于尝试限制我保留在视图中的数据量，因此我的方法可能是只发送订单中的项目编号和数量列表。我认为这对于一个订购系统来说尤其重要，因为人们可以操纵你的 JavaScript，一些不法之徒最终会改变他们购物车中商品的价格并最终敲诈你。永远不要相信浏览器发送的内容。