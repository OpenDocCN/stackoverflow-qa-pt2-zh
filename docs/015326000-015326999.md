# StackOverflow 问答 15326000-15326999

# javascript - 将用户输入保存在变量中，然后发布该变量

> ID：15326000
> 
> 赞同：0
> 
> 时间：2013-03-10T18:37:53.507
> 
> 标签：javascript, jquery, forms, variables, input

我有一个小表单，当我单击“加入”按钮并输入我的信息时，我希望它保存“用户名”表单的值，然后将“加入和注册”按钮替换为他们的姓名或“Hello”+ 姓名。

所以我在这里有一个 JSFiddle：http: [//jsfiddle.net/LCBradley3k/t3HF5/](http://jsfiddle.net/LCBradley3k/t3HF5/) 我认为它类似于以下代码，但这不起作用：

```
var name  = document.getElementById("name"); 
```

然后我希望它把名称放在某种类型的 div 中，以替换顶部的两个按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:46:33.337

如果您使用的是 jQuery（您的 jsfiddle 表明您是），这应该是相当简单的。

```
var name = $('#name').val(); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:26:00.823

使用纯 javascript（没有 jQuery），如果它是一个输入元素，获取输入值使用：

```
var name=document.getElementById("name").value; 
```

将 div 的内容替换为`name`：

```
document.getElementById("div_id").innerHTML=name; 
```

您还可以使用 html：

```
document.getElementById("div_id").innerHTML="<p>" + name + "</p>"; 
```

或者替换 div 的值：

```
document.getElementById("div_id").value=name; 
```

# xcode - 应用配置文件需要更新？

> ID：15326006
> 
> 赞同：0
> 
> 时间：2013-03-10T18:38:27.873
> 
> 标签：xcode, app-store-connect

我刚刚在 XCode 中单击了 Organizer（我正在运行最新的公开可用版本），我注意到在我的一个应用程序配置文件中显示“更新”，所以我单击它并收到一条错误消息，说..

> 在供应门户上找不到给定的配置文件。
> 
> 请在尝试更新“AppProfile”之前刷新您的配置文件

我一点都不明白。所以...

1) 它要求我更新什么？发展概况？我需要更新开发者资料吗？如果我不这样做会怎样？

2) 为什么我会收到错误消息？“刷新我的配置文件”是什么意思？

3）我是否必须为所有配置文件执行此操作（无论这是什么，但我必须修复它）？开发和分发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T23:00:50.490

好吧，我不知道您是否找到了答案，但这是我的答案。

*   您需要一个有效的开发人员和分发配置文件（我相信您已经知道这一点）来上传您的应用程序。如果您的应用已上传并在应用商店中，您仍然需要维护有效的开发者资料，以便您的应用留在应用商店中。否则他们会把它拉下来。

*   它要求您刷新开发人员资料的事实与突然引入的新开发人员资料系统有关。不再需要每 3 个月更新一次您的个人资料。您的个人资料可以使用一年。你必须去 xcode 中的管理器并选择你在那里的所有配置文件。删除它们，然后在右侧窗格中转到您的团队或您自己的名字，然后您会在窗口底部找到刷新按钮。当您使用它时，它会将您的个人资料与开发人员网站重新同步。

*   是的，如果您在过去三个月内没有这样做，您可能必须对所有个人资料都这样做。

我希望你觉得我的回答很有用。

编辑：

只需访问开发者网站并撤销即将过期或已经过期的那些。然后将它们从钥匙串和 xcode 中删除。然后在钥匙串中创建一个新的证书请求，并在开发站点上创建新的配置文件。创建新的后下载它们，以便它们可以与钥匙串同步。之后去组织者并刷新。Xcode 将与开发者网站同步并下载新的。确保连接测试设备，以便也可以更新新的配置文件。这应该够了吧。

# c# - 关键字“表”错误附近的语法不正确

> ID：15326007
> 
> 赞同：0
> 
> 时间：2013-03-10T18:38:31.450
> 
> 标签：c#, asp.net, sql, sql-server

我已经搜索了这个错误，我想出了这个：

“我应该用单引号将我的代码中的用户名和密码括起来”......我做了，但代码仍然显示相同的确切错误！

这是我修复后的代码：

```
String strng = " SELECT * FROM Table "
        + " WHERE Username = '" + txtUsername.Text + "' AND " 
        + " Password = '" + txtPassword.Text + "'"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T18:43:30.823

假设`Table`是你的桌子的真实姓名试试这个

```
String strng = " SELECT * FROM [Table] "
    + " WHERE Username = '" + txtUsername.Text + "' AND " 
    + " Password = '" + txtPassword.Text + "'"; 
```

注意`[]`around `Table`，这是出于转义目的，因为`Table`它是保留字。

我同意现有的评论，即这不是构建 sql 查询的正确方法。您会受到[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击，并且从可读性的角度来看也更糟。您应该改用参数。

```
String strng = @" 
    SELECT * FROM [Table]
    WHERE Username = @UserName AND
    Password = @Password";
...
command.Parameters.AddWithValue("@UserName", txtUsername.Text);
command.Parameters.AddWithValue("@Password", txtPassword.Text); 
```

您还需要考虑两件事：

*   转义用户输入以避免[XSS 攻击](http://en.wikipedia.org/wiki/Cross-site_scripting)
*   将加密密码存储在数据库中，而不是纯文本

# matlab - matlab如何计算拟合曲面的体积？

> ID：15326012
> 
> 赞同：7
> 
> 时间：2013-03-10T18:39:45.487
> 
> 标签：matlab

我在每个 E 和 N 中都有一个表面的三个属性（东向、北向和深度）。

我想将表面拟合到这些点，然后计算每个***dx***、***dy***和***dz***中这个拟合表面的体积，然后将其与其他一些数据进行比较。

你能帮我做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T00:29:52.350

要计算与深度 0 处的平面相比的表面体积，只需执行

```
volume_ref = sum(sum(data)) * dx * dy * dz; 
```

要获得与另一个表面（例如背斜）相比的体积，请计算背斜相对于相同参考（深度 0）的体积，然后减去。

# java - 如何用后退按钮杀死活动？

> ID：15326013
> 
> 赞同：0
> 
> 时间：2013-03-10T18:39:47.280
> 
> 标签：java, android

我偶然发现了这个。我有一个问答游戏，我有一个正确答案的弹出窗口，错误答案的弹出窗口，游戏结束后我有一个结果弹出窗口。但是，今天我在游戏中间用后退按钮返回到我的主屏幕（不是游戏主屏幕，我的操作系统主屏幕），游戏仍然在后台，就像所有其他 Android 应用程序一样。几秒钟后，我的错误答案弹出了。:) 时间到了，答案自动错误。之后，我的最终结果弹出窗口继续。那么，当我按下后退按钮时，如何终止该活动？我不知道你们是否需要我的任何代码，但以防万一这是我的游戏活动：

```
public class NeogranicenoPetGresaka extends Activity implements OnClickListener{

    MyCount brojacVremena = new MyCount(6000, 1000);

LinkedList<Long> mAnsweredQuestions = new LinkedList<Long>();

    private String generateWhereClause(){
        StringBuilder result = new StringBuilder();
        for (Long l : mAnsweredQuestions){
            result.append(" AND _ID <> " + l);
        }
        return result.toString();
    }

    Button bIzlazIzKviza, bOdgovor1, bOdgovor2, bOdgovor3, bOdgovor4;
    TextView question, netacniOdg, score, countdown;
    int brojacPogresnihOdgovora = 0;
    int brojacTacnihOdgovora = 0;
    public static String tacanOdg;

    Runnable mLaunchTask = new Runnable() {
        public void run() {
            nextQuestion();
            brojacVremena.start();
        }
     };
    Runnable mLaunchTaskFinish = new Runnable() {
         public void run() {
            brojacVremena.cancel();
            finish();
         }
      };

    private class Answer {
        public Answer(String opt, boolean correct) {
            option = opt;
            isCorrect = correct;
        }

        String option;
        boolean isCorrect;
    }
    Handler mHandler = new Handler();

    final OnClickListener clickListener = new OnClickListener() {
        public void onClick(View v) {

            Answer ans = (Answer) v.getTag();
            if (ans.isCorrect) {
                brojacVremena.cancel();
                brojacTacnihOdgovora = brojacTacnihOdgovora + 5;
                Intent i = new Intent("rs.androidaplikacijekvizopstekulture.TACANODGOVOR");
                startActivity(i);
                mHandler.postDelayed(mLaunchTask,1200);
            }
        /*else{
            brojacVremena.cancel();
            brojacPogresnihOdgovora++;
            Intent i = new Intent(getApplicationContext(), PogresanOdgovor.class);
            i.putExtra("tacanOdgovor", tacanOdg);
            startActivity(i);
            mHandler.postDelayed(mLaunchTask,2200);
            }*/
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.neograniceno);

        Typeface dugmad = Typeface.createFromAsset(getAssets(), "Bebas.ttf");
        Typeface pitanje = Typeface.createFromAsset(getAssets(), "myriad.ttf");
        bIzlazIzKviza = (Button) findViewById(R.id.bIzlazIzKvizaN);
        netacniOdg = (TextView) findViewById(R.id.tvBrojPitanjaN);
        question = (TextView) findViewById(R.id.tvPitanjeN);
        bOdgovor1 = (Button) findViewById(R.id.bOdgovorN1);
        bOdgovor2 = (Button) findViewById(R.id.bOdgovorN2);
        bOdgovor3 = (Button) findViewById(R.id.bOdgovorN3);
        bOdgovor4 = (Button) findViewById(R.id.bOdgovorN4);
        score = (TextView) findViewById(R.id.tvSkor2N);
        countdown = (TextView) findViewById(R.id.tvCountdownN);
        bOdgovor1.setTypeface(dugmad);
        bOdgovor2.setTypeface(dugmad);
        bOdgovor3.setTypeface(dugmad);
        bOdgovor4.setTypeface(dugmad);
        bIzlazIzKviza.setTypeface(dugmad);
        netacniOdg.setTypeface(dugmad);
        question.setTypeface(pitanje);
        score.setTypeface(dugmad);
        countdown.setTypeface(dugmad);

        nextQuestion(); //startuje prvo pitanje!
        brojacVremena.start();  //startuje brojac vremena
    }

    public class MyCount extends CountDownTimer {

        public MyCount(long millisInFuture, long countDownInterval) {
            super(millisInFuture, countDownInterval);
        }

        @Override
        public void onFinish() {

            brojacPogresnihOdgovora++;
            Intent i = new Intent(getApplicationContext(), PogresanOdgovor.class);
            i.putExtra("tacanOdgovor", tacanOdg);
            startActivity(i);
            mHandler.postDelayed(mLaunchTask,2200);
        }

        @Override
        public void onTick(long millisUntilFinished) {
            countdown.setText("" + millisUntilFinished / 1000);
        }
    }

        public void onClick(View v) {
        // TODO Auto-generated method stub

    }
    @Override
        protected void onPause() {
            // TODO Auto-generated method stub
            super.onPause();
        }

    public void nextQuestion() {

        TestAdapter mDbHelper = new TestAdapter(this);
        mDbHelper.createDatabase();

        try{    //Pokusava da otvori db

            mDbHelper.open();  //baza otvorena

            Cursor c = mDbHelper.getTestData(generateWhereClause());
            mAnsweredQuestions.add(c.getLong(0));

            List<Answer> labels = new ArrayList<Answer>();

            labels.add(new Answer(c.getString(2), true));
            labels.add(new Answer(c.getString(3), false));
            labels.add(new Answer(c.getString(4), false));
            labels.add(new Answer(c.getString(5), false));

            Collections.shuffle(labels);

            tacanOdg = c.getString(2);

            if(brojacPogresnihOdgovora < 20){

        question.setText(c.getString(1));

        bOdgovor1.setText(labels.get(0).option);
        bOdgovor1.setTag(labels.get(0));
        bOdgovor1.setOnClickListener(clickListener);

        bOdgovor2.setText(labels.get(1).option);
        bOdgovor2.setTag(labels.get(1));
        bOdgovor2.setOnClickListener(clickListener);

        bOdgovor3.setText(labels.get(2).option);
        bOdgovor3.setTag(labels.get(2));
        bOdgovor3.setOnClickListener(clickListener);

        bOdgovor4.setText(labels.get(3).option);
        bOdgovor4.setTag(labels.get(3));
        bOdgovor4.setOnClickListener(clickListener);

        netacniOdg.setText("" + brojacPogresnihOdgovora);
        score.setText("Score: " + brojacTacnihOdgovora);
            }
            else{
                brojacVremena.cancel();
                Intent i = new Intent(getApplicationContext(), Rezultat.class);
                i.putExtra("noviRezultat", brojacTacnihOdgovora);
                startActivity(i);
                String brojacTacnihOdgovoraString = String.valueOf(brojacTacnihOdgovora);
                mHandler.postDelayed(mLaunchTaskFinish,4000);
                //SwarmLeaderboard.submitScore(6863, brojacTacnihOdgovora);
                HeyzapLib.submitScore(this, brojacTacnihOdgovoraString, "Osvojili ste " + brojacTacnihOdgovoraString + " poena!", "1T3");
            }
        }
        finally{    // kada zavrsi sa koriscenjem baze podataka, zatvara db
            mDbHelper.close();
        }

    bIzlazIzKviza.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            finish();   
        }
    });
    }
} 
```

我尝试将它放在我的代码中，但它不起作用：

```
@Override
    public void onBackPressed() {
            super.onBackPressed();
            this.finish();
    } 
```

也试过这个，它没有工作：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)
{
    if ((keyCode == KeyEvent.KEYCODE_BACK))
    {
        finish();
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T18:55:49.740

我们的问题是活动已停止，但您创建的后台线程仍在运行。因此，您需要覆盖 onStop 并取消任何后台线程。

就像是：

```
@Override public void onStop() {
    super.onStop();
    brojacVremena.cancel();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:51:09.953

```
 Intent a = new Intent(this,"another activity class to go to");
    a.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)|Intent.FLAG_ACTIVITY_NO_HISTORY);//leaves no history of the activity and clears the backstack.
    startActivity(a); 
    finish(); 
```

也看看这个链接[http://developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)。

要了解活动回栈[http://developer.android.com/guide/components/tasks-and-back-stack.html](http://developer.android.com/guide/components/tasks-and-back-stack.html)。上面的链接的组合应该让您了解您想要做什么来解决您的问题

# eclipse - 我无法使用 Eclipse 启动 Tomcat 服务器

> ID：15326018
> 
> 赞同：0
> 
> 时间：2013-03-10T18:40:30.413
> 
> 标签：eclipse, jakarta-ee, tomcat

我只是使用 Eclipse Juno 定义了一个新的服务器。我选择了一个文件夹并下载并安装了 Tomcat 服务器。

这是我启动服务器时的日志：（没有部署或任何东西，只是服务器启动。）

```
Mar 10, 2013 8:38:13 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common;C:\Program Files (x86)\Intel\iCLS Client\;C:\Program Files\Intel\iCLS Client\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x64;C:\Program Files (x86)\Java\jre7\bin;C:\Program Files\MySQL\MySQL Server 5.5\bin;C:\Program Files (x86)\PHP;C:\PHP\PEAR;C:\Program Files\Microsoft SQL Server\110\Tools\Binn\;C:\;C:\Program Files (x86)\Git\cmd;C:\Program Files\Java\jdk1.6.0_37\bin;C:\Program Files\TortoiseGit\bin;C:\Program Files (x86)\apache-maven-2.2.1\bin;.
Mar 10, 2013 8:38:14 PM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Mar 10, 2013 8:38:14 PM org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Mar 10, 2013 8:38:14 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 480 ms
Mar 10, 2013 8:38:14 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Mar 10, 2013 8:38:14 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.12
Mar 10, 2013 8:38:14 PM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["http-bio-8080"]
Mar 10, 2013 8:38:14 PM org.apache.coyote.AbstractProtocolHandler start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Mar 10, 2013 8:38:14 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 167 ms 
```

但是当我导航到 localhost:8080 时，我看到的是：

```
HTTP Status 404 - /

type Status report

message /

description The requested resource (/) is not available.

Apache Tomcat/7.0.12 
```

我确定服务器的端口号是 8080。

**编辑1：**

这是下载的 Tomcat 文件夹中的 web.xml 文件：

```
<servlet>
    <servlet-name>default</servlet-name>
    <servlet-class>org.apache.catalina.servlets.DefaultServlet</servlet-class>
    <init-param>
        <param-name>debug</param-name>
        <param-value>0</param-value>
    </init-param>
    <init-param>
        <param-name>listings</param-name>
        <param-value>false</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup> </servlet>

<servlet-mapping>
    <servlet-name>default</servlet-name>
    <url-pattern>/</url-pattern> </servlet-mapping> 
```

**编辑2：**

我解决了我的问题：我将 Eclipse 中的服务器位置从使用工作区元数据更改为使用 Tomcat 安装。现在它起作用了..

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T18:53:59.913

不要对错误代码感到困惑：HTTP 404 意味着客户端（浏览器）能够连接到服务器，但它没有找到所需的资源——在你的情况下它是根“/”。

由于您是从 Eclipse 环境启动 Tomcat，因此它不会发布任何内容，而是您在“服务器”/Tomcat 配置中定义的内容。此常见问题解答对此行为进行了详细描述：[WTP Tomcat 常见问题解答](http://wiki.eclipse.org/WTP_Tomcat_FAQ#When_I_create_a_new_Tomcat_server.2C_what_should_I_know_about_its_default_configuration.3F)。在您的情况下，您没有进行任何配置，因此没有部署的内容。

一旦您开始开发您的 Web 项目，您就可以访问任何已发布的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:44:04.997

Eclipse以您的应用程序作为唯一的 web 应用程序启动[Tomcat 。](http://tomcat.apache.org)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T18:44:32.890

您现在需要在 web.xml 中创建一个“servlet”和一个“servlet-mapping”条目。

一旦你这样做了，你就可以摆脱你的 url 的“servlet/”部分。

查看以下 URL 以获取有关调用程序 servlet 的更多信息：http: [//faq.javaranch.com/view?InvokerServlet](http://faq.javaranch.com/view?InvokerServlet)

资料来源：www.coderanch.com

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T18:49:25.657

如果您没有 ROOT Web 应用程序，则导航到 / 并获得 404 可能是预期的行为。

运行 Web 应用程序后，您能否导航到已部署的 Web 应用程序之一的上下文？

如果没有，我们可以在您尝试此操作时在日志中看到错误吗？您显示的内容看起来像一个很好的 Tomcat 日志。它并没有真正表明任何问题。

# mysql - MySQL按操作的产品排序？

> ID：15326023
> 
> 赞同：1
> 
> 时间：2013-03-10T17:14:25.710
> 
> 标签：mysql

是否可以通过对 2 个字段的操作的乘积对 MySQL 结果进行排序

例如：`field1*field2=product`

MySQL：`SORT BY product ASC;`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:43:01.557

它真的没有什么复杂的。`ORDER BY`您可以在子句中使用别名。

```
SELECT 
  field1*field2 AS product
FROM
  tableName
ORDER BY product 
```

# html - 如何扩大div的右侧宽度？

> ID：15326025
> 
> 赞同：0
> 
> 时间：2013-03-10T18:41:10.680
> 
> 标签：html, css

我想将 div 的右侧宽度扩大到 100%（看截图，我的 div 是红色的），我尝试过：

HTML 示例：

```
<header>
    <nav>
        <ul>
            <li>Menu</li>
            <li>Menu</li>
            <li>Menu</li>
        </ul>
    </nav>
    <aside>
        <h1>Logo</h1>
    <aside>
</header> 
```

CSS：

```
header {
    width: 1024px;
    height: 395px;
    margin: 0 auto;
}

nav {
    height: 60px;
    width: 690px;

    position: absolute;
    top: 20px;
    right: 0;

    background:red;
} 
```

这很好用，但是当我尝试缩小（ctrl -）时，菜单导航列表会从容器中消失。徽标保持居中，但导航不。

谢谢你的帮助！
对不起我的英语不好。

![点击这里](../Images/0115bcb187464ae4c892bb762af44a2b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T12:27:00.470

我认为您正在寻找这个：[jsfiddle](http://jsfiddle.net/cemozer/LEkCu/)。放在`position: relative`你的标题。之后，您的导航定位将相对于您的标题。为了正确对齐，请将您的导航更改`top: 20px`为`top: 0`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T13:41:36.830

如果您希望红色条一直延伸到窗口的右边距，即使您放大和缩小浏览器窗口，您也可以将此条的宽度设置为非常高的值（例如 500%）。这会将 bar 向右延伸很多，但会添加一个水平滚动条。所以设置以下来简单地隐藏溢出：

```
html,body
{
   overflow-x:hidden;
} 
```

# voice-recognition - 安卓离线语音识别

> ID：15326026
> 
> 赞同：2
> 
> 时间：2013-03-10T18:41:21.800
> 
> 标签：voice-recognition, cmusphinx, htk

我已经使用 HTK（隐藏马尔可夫模型工具包）来识别用于控制我的 Android 应用程序的特定命令，但在这种情况下，我需要将一些语音数据传递到服务器，这可能会花费更多时间。

为了防止这种延迟，我正在考虑使用[pocketsphinx](http://cmusphinx.sourceforge.net/wiki/download/)通过 Android 应用程序在本地识别语音数据，这样我就不需要将该音频传递给服务器。

如果这是个好主意，从头开始学习pocketsphinx 容易吗？此外，这两种技术（基于服务器和本地语音识别）的优缺点是什么，哪一种更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:32:34.513

CMUSphinx 绝对是一个好主意，它比 HTK 有很多优点：

*   更好的许可证
*   在 Android 上离线工作
*   快速地
*   开箱即用支持多种语言
*   更易于使用和学习

您绝对应该尝试 Pocketsphinx，有关更多信息，请参阅

[http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)

# wpf - Windows 服务器上的 Microsoft 连接对话框任务单选按钮

> ID：15326029
> 
> 赞同：0
> 
> 时间：2013-03-10T18:41:37.650
> 
> 标签：wpf, winforms

我正在为我的 wpf 项目使用 microsoft 数据连接对话框（Winform），它在 Windows 7 上运行良好，但在 Windows Server 上，单选按钮丢失，有人可以帮忙吗？![在此处输入图像描述](../Images/2c782bc582b7736eac5a79d218c46286.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T18:53:36.830

对于 XP，我遇到了类似的问题（[我的 WPF 应用程序中的复选框的宽度在 XP 和 Win7 之间如何不同？](https://stackoverflow.com/questions/8972086/how-come-the-width-of-a-checkbox-in-my-wpf-application-differ-between-xp-and-win)）。使用 Windows Vista/7 Aero 主题已解决此问题。

我没有可以尝试这个的环境，但如果你想试一试，你可以这样做： [http ://arbel.net/2006/11/03/forcing-wpf-to-use-a -特定的Windows主题/](http://arbel.net/2006/11/03/forcing-wpf-to-use-a-specific-windows-theme/)

# youtube-api - 你管 Code for Loading 指定查询的搜索结果

> ID：15326030
> 
> 赞同：1
> 
> 时间：2013-03-10T18:41:47.913
> 
> 标签：youtube-api

我需要代码来显示来自 youtube 的指定查询的视频。

我想在我的网站上显示 youtube 上的所有“洗车”视频，这样我的访问者就不需要离开我的网站，并且可以观看它们并浏览“洗车”视频列表。

过去一周我曾尝试使用 youtube api 创建代码，但它只是无法正常工作，我认为我在某个地方有问题，所以如果你们中的任何人都可以创建代码来显示“洗车”视频，那么我将能够看看我哪里出错了。

你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:07:23.393

你没有提到你尝试了什么，或者你遇到了什么问题。我建议从在线 Youtube gdata API 演示开始：http: [//gdata.youtube.com/demo/index.html](http://gdata.youtube.com/demo/index.html)

在这里，您可以“安全地”使用 API 请求的参数。在上面提到的演示中的搜索查询字段中输入“洗车”会产生查询 URL

[http://gdata.youtube.com/feeds/api/videos?q=carwash](http://gdata.youtube.com/feeds/api/videos?q=car)，它为您提供所需的数据 - 默认为 XML。

# android - 活动重新启动时从 Intent 服务重新连接 Messenger

> ID：15326031
> 
> 赞同：0
> 
> 时间：2013-03-10T18:41:52.593
> 
> 标签：android, android-activity, restart, intentservice, messenger

我正在开发一个与服务器上的视频同步的应用程序。它启动一个 IntentService 下载播放列表，将其插入数据库，然后将实际视频文件下载到 sd 卡。

我在启动服务时使用通过意图传递的信使来传达已经下载了多少百分比。

我工作但显然当活动被破坏并重新开始时，信使不会重新连接。

这个问题的解决方案是什么，引导我走向正确的方向。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:54:28.923

如果您想使用信使，您需要保留对使用您传递给意图服务的信使创建的处理程序的引用。

如果活动被销毁并重新创建，则该处理程序仍绑定到前一个活动（这也可能导致泄漏）。

一种方法可能是在单例对象或应用程序对象中引用该处理程序。

但是，由于意图服务的异步特性，我要做的是通过广播通知进度，因此新活动可能会注册到意图服务抛出的同一个广播。您永远不知道该服务是否仍然存在或已完成其工作。

使用[本地广播](http://developer.android.com/reference/android/support/v4/content/LocalBroadcastManager.html)可能会产生更有效的解决方案。

# c++ - 在许多类中使用具有相同标识符的#define 会导致“错误： 重新定义”

> ID：15326033
> 
> 赞同：0
> 
> 时间：2013-03-10T18:42:05.873
> 
> 标签：c++, logging, android-ndk, include, header-files

我正在使用帮助类以一种简单的方式在 android ndk 中记录消息。它是这样工作的：

```
LOGE("ClassTag", "Message"); 
```

由于我不想每次要记录某些内容时都手动编写标签，因此我为每个类定义定义了一个 TAG 常量：

```
#define  TAG    "Class1Tag" 
```

然后我可以通过以下方式登录：

```
LOGE(TAG, "Message"); 
```

当具有已定义 TAG 常量的类包含另一个具有相同 TAG 常量声明的类时，就会出现问题。然后弹出如下编译错误：

```
error: "TAG" redefined 
```

如何在不必为每个#define 使用不同标识符的情况下摆脱重新定义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:47:12.340

听起来您正在头文件中定义 TAG 值。为了让这种类型的东西正常工作，你应该只在实现文件中定义它。因为实现文件不包含在其他文件中，所以不会重新定义。

这意味着日志记录语句只能出现在实现文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:46:44.820

在各自的 .cpp 文件中而不是在标题中定义它们。

或者使用私有、静态、常量`std::string`或数组`char`，这将允许您在标题中使用日志记录语句，同时对其他类不可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T18:52:31.213

如果你在几个不同的头文件中定义了相同的标识符，你就不可能得到你想要的行为。在给定的实现文件中，标识符的值将是*最后一个定义*的，不一定是与类关联的那个。“最后一个定义”将是包含在实现文件中的最后一个头文件中的那个，例如

啊：

```
#define TAG "ClassA" 
```

:

```
#define TAG "ClassB" 
```

一个.cpp：

```
#include "a.h"
#include "b.h" 
```

对于此示例，在 a.cpp 中使用 TAG 将具有值“ClassB”。

*基本上，您永远不想在头*文件中重新定义标识符。如果您在实现文件中定义的标识符与另一个*实现*文件中的标识符相同，则可以使用，因为在编译其他*实现*文件时它不可见。但是编译器抱怨是有原因的，你应该注意它告诉你的内容以避免混淆。

编辑：我知道您的编译器将其标记为错误；我所说的结果是不要放松你的编译器抱怨来接受你所拥有的，因为这可能会导致混乱。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T18:46:49.173

为什么`#under TAG`以前不使用`#define TAG "ClassTag"`

# javascript - 尝试制作一个 html 复选框，将数字添加到输出字段

> ID：15326034
> 
> 赞同：1
> 
> 时间：2013-03-10T18:42:10.910
> 
> 标签：javascript, html, checkbox, html-table

我正在尝试创建一个表格，当我选中一个框时，如果显示的图像是 yes.jpg，则会在列底部的输出框中添加一个数字。如果没有，则不会添加任何数字。共有三列，每个复选框影响三个图像和三个输出框。这是我的代码。

```
 <html>
<head>
    <script>
     function onSelect(rowId)
     {
        var row = document.getElementById(rowId);
        var checkBox = row.getElementsByTagName("checkRow")[0];
        var outputRow = document.getElementById("outputRow");
        var totalRow1 = outputRow.getElementById("total1");
        var totalRow2 = outputRow.getElementById("total2");
        var totalRow3 = outputRow.getElementById("total3");
        //If box is checked, check images. If they are yes, edit boxes. 
        if (checkBox.checked)
            if (row.getElementById.("image1").src.indexOf(yes.png) > -1)
            {
                totalRow1.innerHTML = "dfd";
            }
        else {
            //checkBox = 
            }
        }
         /*function onCheck()
        {
            var total1 = document.getElementById("total1");
            window.alert("sometext");
            total1.innerHTML = "dfd";
        } */
    </script>
</head>

<body>
    <table border="1">
        <tr> <!-- Table Header -->
            <td>
                Checkbox
            </td>
            <td>
                Items
            </td>
            <td>
                Area 1
            </td>
            <td>
                Area 2
            </td>
            <td>
                Area 3
            </td>
        </tr>

        <tr id="checkRow"> <!-- Row 1 -->
            <td>
                <form>
                    <input type="checkbox" name="Row1" value="Row1" onclick="onCheck();">
                </form>     
            </td>
            <td>
                Item
            </td>
            <td id="image1">
                <img src="yes.png" alt="Needed">
            </td>
            <td id="image2">
                <img src="yes.png" alt="Needed">
            </td>
            <td id="image3">
                <img src="no.png" alt="Needed">
            </td>   
        </tr>

        <tr id="outputRow"> <!-- Table Bottom -->
            <td>
                <!--Empty-->
            </td>
            <td>
                Summation
            </td>
            <td id="total1">
                Area 1
            </td >
            <td id="total2">
                Area 2
            </td>
            <td id= "total3">
                Area 3
            </td>
        </tr>
    </table>
</body> 
```

目前，我只是想在其中一个输出框上编辑输出文本（如我的`onCheck()`方法中所见）。但是，即使这样似乎也不起作用。我添加了一个警报，也没有发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:06:39.997

有很多事情，你做错了，

首先，您`onCheck()`在单击复选框时调用了函数，但没有这样的 javascript 函数。你有`onSelect(id)`。

其次，您正在尝试将`.getElementById`您`TDs`作为那些 id 'image1' 并且都是 tds 而不是 imgs 的 id

然后你正在访问`.src`他们，所以无论如何这是错误的。

改进：

1.  将您的输入复选框更改为：

    ```
     <input type="checkbox" name="Row1" value="Row1"  onchange="onCheck(this);"> 
    ```

你正在做的是，你在函数 onCheck(this); 中传递你输入的引用；

`2`. 现在改变你的标记是这样的：

```
 <td>
            <form>
                <input type="checkbox" name="Row1" value="Row1"  onchange="onCheck(this);">
            </form>     
        </td>
        <td>
            Item
        </td>
        <td >
            <img  id="image1" src="yes.png" alt="Needed">
        </td>
        <td >
            <img id="image2" src="yes.png" alt="Needed">
        </td>
        <td >
            <img  id="image3" src="no.png" alt="Needed">
        </td>   
    </tr> 
```

我所做的只是为正确的元素（即 IMG，而不是 TD）提供 ID；

第三，让你的 onCheck() 像这样：

```
function onCheck(cb)
         {
            if(cb.checked===true)
            {
                if(document.getElementById('image1').src.toString().indexOf('yes')>0){
                    document.getElementById('total1').innerHTML='555';
                } 
                else
                {
                    document.getElementById('total1').innerHTML='No';
                }

                if(document.getElementById('image2').src.toString().indexOf('yes')>0){
                    document.getElementById('total2').innerHTML='555';
                } 
                else
                {
                    document.getElementById('total2').innerHTML='No';
                }

                if(document.getElementById('image3').src.toString().indexOf('yes')>0){
                    document.getElementById('total3').innerHTML='555';
                } 
                else
                {
                    document.getElementById('total3').innerHTML='No';
                }  
            }
        } 
```

所以基本上 onCheck 和你的几乎一样。

现在，看看这个工作[小提琴](http://jsfiddle.net/manishmishra256/GGxpX/)，我为你做的，它有效。当然，我讨厌你做这一切的方式。这一切都可以以更简单的方式完成。

此外，了解[jQuery](http://jquery.com/)，它让生活变得轻松。

# android - 模拟器无法在 ubuntu 中运行

> ID：15326035
> 
> 赞同：1
> 
> 时间：2013-03-10T18:42:15.170
> 
> 标签：android, android-emulator

启动 AVD 'AVD_for_Nexus_S' 的模拟器

```
Failed to start emulator: Cannot run program "/home/kashminder/Documents/android dev/adt-bundle-linux/sdk//tools/emulator": error=2, No such file or directory 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:04:04.590

[http://developer.android.com/sdk/installing/index.html#troubleshooting](http://developer.android.com/sdk/installing/index.html#troubleshooting)。你的系统是64位还是32位？我也遇到了同样的问题，但通过安装 ia32-libs 包解决了这个问题。

如果您在开发机器上运行 64 位发行版，则需要安装

```
 apt-get install ia32-libs 
```

接下来，安装 Java：

```
 apt-get install sun-java6-jdk.// install this if you have not done this before. 
```

该链接在 Ubuntu 故障排除标题下为您提供了一个想法。

# asp.net-mvc - 带有 jQ uery 验证的 ASP.NET MVC - 消息自定义和本地化

> ID：15326036
> 
> 赞同：2
> 
> 时间：2013-03-10T18:42:17.977
> 
> 标签：asp.net-mvc, localization, jquery-validate, data-annotations

我有框架支持本地化的 ASP.NET MVC (4) 项目。如果我将浏览器设置更改为另一种语言，框架会自动选择正确的资源文件。

但是，因为我使用的是 knockoutjs，所以我在这些视图中回退到 jQuery 验证。不幸的是，那里没有自动支持本地化。

我的问题是 - 自定义和本地化 jQuery 验证消息的最佳实践和方法是什么，以便它们与所有 MVC 资源一起自动选择？

*jQuery 验证消息的行为方式与给定资源和消息 ID 的数据注释消息类似。*

尤其 -

1.  如何让 jQuery从资源中获取*我想要*的消息，而不是默认的“此字段是必需的”，因此它将打印类似“请输入电子邮件”和

2.  如果我更改浏览器语言，如何让 jQuery*自动以另一种语言打印相同的自定义消息？*

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T19:26:40.107

> 1）如何让 jQuery 从资源中获取我想要的消息，而不是默认的“此字段是必需的”，因此它将打印“请输入电子邮件”之类的内容。

随时调用以下内容来覆盖消息。下面的字符串可以用变量替换。

```
jQuery.extend(jQuery.validator.messages, {
    required: "This field is required.",
    remote: "Please fix this field.",
    email: "Please enter a valid email address.",
    url: "Please enter a valid URL.",
    date: "Please enter a valid date.",
    dateISO: "Please enter a valid date (ISO).",
    number: "Please enter a valid number.",
    digits: "Please enter only digits.",
    creditcard: "Please enter a valid credit card number.",
    equalTo: "Please enter the same value again.",
    accept: "Please enter a value with a valid extension.",
    maxlength: jQuery.validator.format("Please enter no more than {0} characters."),
    minlength: jQuery.validator.format("Please enter at least {0} characters."),
    rangelength: jQuery.validator.format("Please enter a value between {0} and {1} characters long."),
    range: jQuery.validator.format("Please enter a value between {0} and {1}."),
    max: jQuery.validator.format("Please enter a value less than or equal to {0}."),
    min: jQuery.validator.format("Please enter a value greater than or equal to {0}.")
}); 
```

否则，您可以在`.validate()`.

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        rules: {
            field1: {
                required: true,
                minlength: 5
            }
        },
        messages: {
            field1: {
                required: "custom message for field 1 required",
                minlength: "custom message: {0} chars required"
            }
        }
    });

}); 
```

**演示：http: [//jsfiddle.net/XV3ZR/](http://jsfiddle.net/XV3ZR/)**

要在插件首次初始化*后**动态*更改任何消息[，](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)需要使用[方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)覆盖。*[`rules('add')`](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)*

 *```
$('#field1').rules('add', {
    messages: {
        required: "field 1 required",
        minlength: "{0} chars required"
    }
}); 
```

**演示 2：http: [//jsfiddle.net/PJGgE/1/](http://jsfiddle.net/PJGgE/1/)**

> 2）如果我更改浏览器语言，如何让 jQuery 自动以另一种语言打印相同的自定义消息？

我不确定您所说的“更改浏览器语言”是什么意思，但同样，上面#1 中的方法是唯一的方法，AFAIK。这些只是字符串，您必须手动或通过外部方法翻译它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:27:42.193

我认为您可以在服务器上将本地化的客户端脚本文件提供给客户端的浏览器设置（类似于 i18n）*

# twitter - Twitter4j：调用 getFollowersIDs 时出现不一致的身份验证错误

> ID：15326040
> 
> 赞同：5
> 
> 时间：2013-03-10T18:43:10.683
> 
> 标签：twitter, twitter4j

我正在使用 Twitter4j 版本 3.0.3。

我正在尝试提取关注者 ID 并使用 OAuth。我多年来一直在使用 Twitter4j，并且对该框架比较有经验。

但是发生了一些奇怪的事情：我的程序将运行良好，然后间歇性地抛出以下堆栈跟踪：

```
Exception in thread "main" 401:Authentication credentials (https://dev.twitter.com/pages/auth) were missing or incorrect. Ensure that you have set valid consumer key/secret, access token/secret, and the system clock is in sync.
{"request":"\/1.1\/followers\/ids.json?user_id=20801287&cursor=-1&include_entities=1&include_rts=1","error":"Not authorized"}

Relevant discussions can be found on the Internet at:
    http://www.google.co.jp/search?q=92c30ec6 or
    http://www.google.co.jp/search?q=19400604
TwitterException{exceptionCode=[92c30ec6-19400604], statusCode=401, message=null, code=-1, retryAfter=-1, rateLimitStatus=RateLimitStatusJSONImpl{remaining=6, limit=15, resetTimeInSeconds=1362898120, secondsUntilReset=890}, version=3.0.3}
    at twitter4j.internal.http.HttpClientImpl.request(HttpClientImpl.java:177)
    at twitter4j.internal.http.HttpClientWrapper.request(HttpClientWrapper.java:61)
    at twitter4j.internal.http.HttpClientWrapper.get(HttpClientWrapper.java:89)
    at twitter4j.TwitterImpl.get(TwitterImpl.java:1817)
    at twitter4j.TwitterImpl.getFollowersIDs(TwitterImpl.java:400) 
```

它在以下行抛出上述内容：

```
IDs ids= twitter.getFollowersIDs(id,cursor); 
```

上面的行执行得很好，然后没有警告就失败了。

注意：我正在检查速率限制，上次遇到这个时，以下行提取的速率限制 JSON 对象是（如下）：

```
RateLimitStatus rls=twitter.getRateLimitStatus().get("/followers/ids")

RateLimitStatusJSONImpl{remaining=7, limit=15, resetTimeInSeconds=1362898120, secondsUntilReset=890} 
```

我认为这可能是 Twitter 的间歇性事件，但现在已经持续了几天。

我已经从各种机器上尝试过，但遇到了完全相同的问题。

呼叫以这种方式失败，大约在 20 次呼叫中失败。

我还阅读了关于 SE 的类似问题：

1.  [Twitter4j 401 身份验证](https://stackoverflow.com/questions/7501757/twitter4j-401-authentication)——但是，这是 OAuth 不起作用的情况——在我的情况下，它似乎工作正常，直到它当然不起作用。

2.  [twitter4j：即使我已经设置了凭据错误？](https://stackoverflow.com/questions/6681399/twitter4j-getting-credential-errors-even-though-i-had-set-them)- 与我的情况类似的情况也不多。

3.  [twitter4j 的 Oauth 问题](https://stackoverflow.com/questions/7152735/problem-in-oauth-with-twitter4j)- 建议将应用程序注册为网络应用程序，我已经完成了，我已经填写了回调 url（虽然它什么也没做），但仍然没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T05:38:00.067

该异常似乎是由可能是私有的 twitter 个人资料的 id 引起的。

# java - Java迭代器变量范围

> ID：15326045
> 
> 赞同：1
> 
> 时间：2013-03-10T18:43:37.180
> 
> 标签：java, iterator

这是我刚刚编写的代码的一部分。基本上，该类`Document`实现了`Iterable`接口。迭代器将像链表一样遍历节点。在`remove`方法中，我使用了`nodeMap`在`Document`类范围内的引用。但是`this`引用应该引用它`Iterator`本身，那么它怎么会找到那个对象呢？或者是`Iterator`一个子类`Document`？

我以前没有想过这个问题。一下子就把自己弄糊涂了。

```
public class Document implements Iterable<DocumentNode> {
    Map<Integer, DocumentNode> nodeMap;

    public Iterator<DocumentNode> iterator() {
        return new Iterator<DocumentNode>() {
            DocumentNode node = nodeMap.get(0);

            @Override
            public boolean hasNext() {
                return node != null && node.next != null; 
            }

            @Override
            public DocumentNode next() {
                if (node == null) {
                    throw new IndexOutOfBoundsException();
                }
                return node.next;
            }

            @Override
            public void remove() {
                if (node == null) {
                    throw new IndexOutOfBoundsException();
                }
                if (node.prev != null) {
                    node.prev.next = node.next;
                }
                if (node.next != null) {
                    node.next.prev = node.prev;
                }
                nodeMap.remove(node.documentID);
            }
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:48:11.183

迭代器是类的匿名内部类的一个实例`Document`。有两种内部类：

*   静态内部类不附加到外部类的实例，它们只能访问自己的成员和外部类的静态成员。
*   非静态内部类在其创建的上下文中拥有对外部类实例的引用，因此它们可以直接访问外部类的非静态成员。这是代码中的迭代器是实例的类。

# ruby-on-rails - 如何解决此批量分配错误？铁轨上的红宝石

> ID：15326051
> 
> 赞同：0
> 
> 时间：2013-03-10T18:44:05.573
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, mass-assignment

我试图让用户能够在两个“标签”对象之间创建“链接”关系。

标签

```
class Tag < ActiveRecord::Base
attr_accessible :ref, :location_info
belongs_to :user

has_many :to_links, :foreign_key => 'from_id', :class_name => 'Link' 
has_many :to_tags, :through => :to_links  

has_many :from_links, :foreign_key => 'to_id', :class_name => 'Link' 
has_many :from_tags, :through => :from_links
end 
```

关联

```
class Link < ActiveRecord::Base
attr_accessible :from_id, :to_id, :value

belongs_to :from_tag, :foreign_key => "from_id", :class_name => "Tag" 
belongs_to :to_tag, :foreign_key => "to_id",   :class_name => "Tag"
end 
```

链接控制器

```
class LinksController < ApplicationController

def new
  @user = current_user
  @tags = @user.tags
  @link = Link.new
end

def create

end 
```

新的.html.erb

```
<%= form_for(@link) do |f| %>
<%= render 'shared/error_messages', object: f.object %>

  <%= f.label :from_tag %>
  <%= f.collection_select :from_tag, @tags, :id , :ref %>

  <%= f.label :to_tag %>
  <%= f.collection_select :to_tag, @tags, :id , :ref %>

  <%= f.label :value %>
  <%= f.text_field :value %>

  <%= f.submit "Create", class: "btn btn-large btn-primary" %>
<% end %> 
```

我知道通常在 create 方法中，您会将 params[:link] 传递给 new ，它会在单击 create 后从表单中接收这些，但因为我无法批量分配 from_tag 和 to_tag 我不知道如何创建这个链接对象就像你在控制台中一样，没有像这样的批量分配

a = Tag.new | b = 新标签 | 链接 = Link.new | 链接.from_tag = a | 链接.to_tag = b | 链接值 = 5 | 链接.保存

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:08:33.200

在您的链接模型中尝试添加：
attr_accessible :from_tags_attributes, :to_tags_attributes

# sed - sed 用反斜杠单引号替换 openssl 配置文件的单引号

> ID：15326052
> 
> 赞同：0
> 
> 时间：2013-03-10T18:44:08.140
> 
> 标签：sed, openssl

问题的上下文是我试图将其中包含单引号的密码短语传递给 openssl 配置文件的 input_password 参数。

取自[openssl 配置文件手册](http://www.openssl.org/docs/apps/config.html)：

> 可以使用任何类型的引号或 \ 字符来转义某些字符。通过使一行的最后一个字符为 \，一个值字符串可以分布在多行中。此外，还可以识别序列 \n、\r、\b 和 \t

我假设可以转义单引号。问题是我很难用 sed 生成转义的单引号。

有了这个，我的意思是，如果从脚本或命令行运行，以下表达式不会产生相同的结果。执行以下命令：

```
cut -d: -f2 "$EMPLOYEE_CREDENTIALS_FILE"| sed -e "s|'|\\\'|g" 
```

其中 "$EMPLOYEE_CREDENTIALS_FILE" 是一个格式如下的文件

```
username:password 
```

当我直接在 bash 中运行此命令时，它会产生我假设 openssl.conf 允许的输出：

```
tentacle caravan sovereignty appraisal sass\'s 
```

当我在脚本中运行它时，它只会产生正常的未转义密码：

```
tentacle caravan sovereignty appraisal sass's 
```

我想知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:36:51.817

我终于解决了这个问题。

我现在可以确认 openssl 配置文件允许转义单引号出现在*input_password*字段中。不仅如此，openssl 使用的实际密码也没有按预期转义。最终用户永远不会知道密码在配置文件中被转义。

我在使 sed 在脚本中工作时遇到了一些麻烦，因为据我所知，双引号会消耗反斜杠而不是单引号。另一方面，单引号不消耗反斜杠，因此无法解释转义字符。这意味着我无法在单引号内转义单引号。

这让我找到了解决方案

```
 cut -d: -f2 "$EMPLOYEE_CREDENTIALS_FILE"| sed -e "s|'|"'\\\'"'|g" 
```

这类似于在[这个 stackoverflow 问题](https://stackoverflow.com/a/7990807/227990)中找到的答案，但它不适用于我的情况。

答案中还可以找到需要 3 个反斜杠的原因：

> 通过在 sed 命令周围使用双引号，您无需担心嵌入的单引号。然后你必须担心逃逸，因为外壳会吸收一级逃逸。

# angularjs - 在 ng-repeat (angular-js) 中设置收音机的默认值

> ID：15326053
> 
> 赞同：4
> 
> 时间：2013-03-10T18:44:13.263
> 
> 标签：angularjs

如果这个值是一个对象而不是一个字符串，我如何为收音机设置一个默认值？

**编辑：**

为了让事情更清楚，我更新了小提琴：查看小提琴：http: [//jsfiddle.net/JohannesJo/CrH8a/](http://jsfiddle.net/JohannesJo/CrH8a/)

```
<body ng-app="app">
<div ng-controller='controller'>
            oConfigTerminal value= <input type="text" ng-model="oConfigTerminal"/><br><br>

    <div ng-show="!oConnection.aOptions"
    ng-repeat="oConnection in oFormOptions.aStationaryConnections">
        <label>
            <input type="radio" name="connection" ng-model="$parent.oConfigTerminal" value="{{oConnection.id}}"
            />{{oConnection.sId}}</label>
    </div>

</div> 
```

```
app = angular.module('app', []);

app.controller('controller', function ($scope) {
$scope.oFormOptions = {};
$scope.oConfigTerminal=0;
$scope.oFormOptions.aStationaryConnections = [{
    id: 1,
    sId: "analog"
}, {
    id: 2,
    sId: "isdn"

}, {
    id: 3,
    sId: "dsl"
}];

// !!! Trying to set the default checked/selected value !!!
$scope.oConfigTerminal = $scope.oFormOptions.aStationaryConnections[0];
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:25:09.350

在浏览器控制台中检查实时 html，您会看到这`oConnection`是一个`object`，并且 radio 的值变为：`{"id":1,"sId":"analog"}`。您可能想`oConnection.id`使用价值

另一个问题`ng-repeat`是范围继承问题，需要`ng-model`通过设置`ng-model`来解决`$parent.variableName`

您`oConnectionTmpView`对我没有任何意义，因此为了简化起见，我将其删除：

HTML：

```
<div ng-show="!oConnection.aOptions" ng-repeat="oConnection in oFormOptions.aStationaryConnections">
  <label>
       <input type="radio"  
              name="connection" 
              ng-model="$parent.oConfigTerminal" 
               value="{{oConnection.id}}"
         />
           {{oConnection.sId}}
     </label>
 </div> 
```

JS：

```
app = angular.module('app', []);

app.controller('controller', function ($scope) {
    $scope.oFormOptions = {};
    $scope.oConfigTerminal = 0;
    $scope.oFormOptions.aStationaryConnections = [{
        id: 1,
        sId: "analog"
    }, {
        id: 2,
        sId: "isdn"

    }, {
        id: 3,
        sId: "dsl"
    }];
} 
```

演示：http: [//jsfiddle.net/CrH8a/14/](http://jsfiddle.net/CrH8a/14/)

# f# - 比较 F# 中的代码引用是否相等失败

> ID：15326054
> 
> 赞同：2
> 
> 时间：2013-03-10T18:44:16.350
> 
> 标签：f#, quotations

我在 f# 中开始使用微积分工具箱。学习 f# 与最终在我想到的其他一些项目中使用有用的东西一样重要。基本和不完整的代码是

```
namespace BradGoneSurfing.Symbolics

open Microsoft.FSharp.Quotations
open Microsoft.FSharp.Quotations.Patterns
open Microsoft.FSharp.Quotations.DerivedPatterns
open System
open Microsoft.FSharp.Reflection
open Microsoft.FSharp.Quotations

open FSharpx.Linq.QuotationEvaluation
open Microsoft.FSharp.Linq.RuntimeHelpers

module Calculus =

    let rec der_impl param quotation =

        let (|X|_|) input = if input = param then Some(X) else None

        match quotation with

        | SpecificCall <@ (*) @> (_,types,l::r::[]) -> 
            let dl = der_impl param l
            let dr = der_impl param r
            <@@ (%%dl:double) * (%%r:double) + (%%l:double) * (%%dr:double) @@>

        | SpecificCall <@ Math.Sin @> (_,_types, arg::_) ->
            let di = der_impl param arg
            <@@ Math.Cos( (%%arg:double) ) @@> 

        | ExprShape.ShapeVar v -> 
            match v with 
            | X -> <@@ 1.0 @@>
            | _ -> (Expr.Var v)

        | ExprShape.ShapeLambda (v,expr) -> Expr.Lambda (v,der_impl param expr)
        | ExprShape.ShapeCombination (o, exprs) -> ExprShape.RebuildShapeCombination (o,List.map (fun e -> der_impl param e ) exprs)

    let rec der expr =
        match expr with
        | Lambda(param, body) ->
            Expr.Lambda(param, (der_impl param body))
        | _ -> failwith "oops" 
```

我有一个 NUnit / FSUnit 测试证明我的第一段代码

```
namespace BradGoneSurfing.Symbolics.Test

open FsUnit
open NUnit.Framework
open Microsoft.FSharp.Quotations
open BradGoneSurfing.Symbolics.Calculus
open FSharpx.Linq.QuotationEvaluation
open System
open Microsoft.FSharp.Linq.RuntimeHelpers

[<TestFixture>]
type ``This is a test for symbolic derivatives`` ()=

    [<Test>] 
    member x.``Derivative should work`` ()=

        let e = <@ (fun (y:double) -> y * y) @>
        let d = der e

        let x = <@ fun (y:double) -> 1.0 * y + y * 1.0 @>
        d |> should equal x 
```

测试类型的作品，但没有。结果说

```
Expected:
Lambda (y,
        Call (None, op_Addition,
              [Call (None, op_Multiply, [Value (1.0), y]),
               Call (None, op_Multiply, [y, Value (1.0)])]))

But Was:               
Lambda (y,
        Call (None, op_Addition,
              [Call (None, op_Multiply, [Value (1.0), y]),
               Call (None, op_Multiply, [y, Value (1.0)])])) 
```

现在在我看来，这两个是相同的，但似乎不是。我猜我已经与 Expr 与 Expr<'t> 进行了某种混淆，但我不确定。一些实现代码经过反复试验才能编译。

有什么想法可能是这里的微妙错误吗？

**更新解决方案**

@Jack 是正确的， Var 实现了引用相等，并且很难使用带有代码引用的标准相等检查。出于测试目的，比较字符串“足够正确”。为了使这个可口，我为 FsUnit/NUnit 创建了一个自定义匹配器，如下所示

```
type EqualsAsString (e:obj)= 
    inherit NUnit.Framework.Constraints.Constraint()

    let expected = e

    override x.Matches(actual:obj)=
        x.actual <- actual
        x.actual.ToString() = expected.ToString()

    override x.WriteDescriptionTo(writer)=
        writer.WriteExpectedValue(expected)

    override x.WriteActualValueTo(writer)=
        writer.WriteActualValue(x.actual) 
```

和一个 FSUnit 包装器

```
let equalExpr (x:Expr<'t>) = new EqualsAsString(x) 
```

所以我可以

```
d |> should equalExpr <@ fun y -> y * y @> 
```

它会按预期工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T20:39:56.223

与 F# 引用一起使用的`Var`类型不支持结构相等。事实上，它也没有实现`IEquatable<'T>`——它只提供了对`Equals`检查引用相等性的方法的覆盖：

[https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/quotations.fs#L122](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/quotations.fs#L122)

So, it looks like the reason your test is failing is because the `y` variables in your quotations aren't recognized as 'equal'. The first solution that comes to mind would be to create a custom implementation of [`IEqualityComparer<'T>`](http://msdn.microsoft.com/en-us/library/ms132151.aspx) which does handle the variable equality in the way you want, then use it to check the expected value against the generated value.

# php - eclipse juno上的PDT不起作用，如何正确安装它？

> ID：15326055
> 
> 赞同：0
> 
> 时间：2013-03-10T18:44:20.020
> 
> 标签：php, eclipse, eclipse-juno, eclipse-pdt

我在我的 Windows 7 机器上安装了 eclipse juno，我下载了 PDT（php 开发工具）并安装了它。但是当我尝试通过向导创建一个 php 项目时，我找不到 php 项目的选项。

这是我的屏幕截图，其中 PDT 真正安装在我的 Eclipse Juno 中。

![在此处输入图像描述](../Images/5dc6150359b28c4bd570f7ecf6529a38.png)

这是我的 eclipse juno 的向导，因为您看不到 PHP 的选项。 ![在此处输入图像描述](../Images/e8a712aa43910aa22c69dbf97788a5b4.png)

我错过了什么吗？我是否不正确地安装了 PDT，如果是，我该如何正确安装它？任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:28:48.827

终于成功安装了它，我阅读了 pageman 的 eclipse 论坛链接（pageman 答案中的第三个链接），并以某种方式知道我做错了什么。我认为问题在于我在**编程语言**类别下安装了 PHP 开发工具 (PDT) 和 PHP 开发工具 (PDT) SDK 功能。我下载了最新的 eclipse 副本，并在**Web、XML、Java EE 和 OSGi Enterprise Development**类别下安装了 PHP Development Tools (PDT) SDK Feature 。

![在此处输入图像描述](../Images/57e6b6e5e00abe63efe7573c271ed1c5.png)

现在 php 项目向导出现了。

![在此处输入图像描述](../Images/4c3a13d4e37f25ca4a230e15eed93f55.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:49:51.170

尝试从此来源使用`http://download.eclipse.org/tools/pdt/updates/release`。似乎是由于发布阶段的更新。

代替 Eclipse 源代码，将 Google 源代码放入`http://dl.google.com/eclipse/plugin/4.2`Eclipse 3.8/4.2 (Juno)。

# regex - gawk - 提取文本并将其放在同一行

> ID：15326057
> 
> 赞同：2
> 
> 时间：2013-03-10T18:44:28.393
> 
> 标签：regex, parsing, awk, gawk

好的，我有一些文字：

```
=== Blah 1 ===
::Junk I wish: 2 Ignore <br/>
::More Junk: 1.2-2.7 <br/>
::ABC: [http://www.google.com (STUFF/I/Want)]<br/>
::More2: Ignore<br/>
::More Stuf 2 Ignore: N/A<br/>

=== Blah 2 ===
::Junk I wish: More 2 Ignore <br/>
::More Junk: 1.2-2.7 <br/>
::ABC: [http://www.google.com (Other/STUFF/I/Want)]<br/>
::More2: More Ignore<br/>
::More Stuf 2 Ignore: More N/A<br/> 
```

我想输出：

```
Blah 1, (STUFF/I/Want)
Blah 2, (Other/STUFF/I/Want) 
```

我已经想出了如何抓住我想要的部分线条：

```
gawk  '/===/ {print } /ABC/ {print $3}' file_name 
```

这将输出以下内容：

```
=== Blah 1 ===
(STUFF/I/Want)]<br/>
=== Blah 2 ===
(Other/STUFF/I/Want)]<br/> 
```

我不明白的是如何剥离我不想要的其他字符，并将其放在一行中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T18:54:26.217

使用`printf`而不是`print`省略换行符，仅打印第一个块中的第二个和第三个字段，并用于`sub`丢弃第二个块中不需要的东西：

```
awk '/===/{printf "%s %s, ",$2,$3}/ABC/{sub(/].*/,"");print $3}' file
Blah 1, (STUFF/I/Want)
Blah 2, (Other/STUFF/I/Want) 
```

如果标题是可变长度：

```
awk '/===/{gsub(/ ?=+ ?/,"");printf "%s, ",$0}/ABC/{sub(/].*/,"");print $3}' file
Blah 1, (STUFF/I/Want)
Blah 2, (Other/STUFF/I/Want) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T19:00:55.573

单程。

内容`script.awk`：

```
BEGIN {
    ## Characters to separate output fields
    OFS = ", "
}

## When line begins with several equal signs, remove them, both leading
## and trailing, and save the title.
$1 ~ /^=+$/ {
    gsub( /\s*=\s*/, "", $0 )
    title = $0
    next
}

## For the second field, split line with both pair of parentheses and 
## print second field.
$1 ~ /ABC/ {

    ## For GNU-Awk
    #split( $0, abc_line, /(\()|(\))/, seps )
    #printf "%s%s%s%s%s\n", title, OFS, seps[1], abc_line[2], seps[2]

    ## For Awk
    split( $0, abc_line, /(\()|(\))/ )
    printf "%s%s(%s)\n", title, OFS, abc_line[2]

} 
```

像这样运行它：

```
awk -f script.awk infile 
```

它产生：

```
Blah 1, (STUFF/I/Want)
Blah 2, (Other/STUFF/I/Want) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T18:54:44.227

```
gawk '/===/{header=gensub(" *=== *","","g",$0)} /ABC/{abc=gensub("]<br/>","","g",$3); print header", "abc}' file_name 
```

这可能对你有用。它将剥离的信息保存到变量中，然后打印它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T00:26:58.050

有时在 awk 中，如果您寻找非正统的**记录**分隔符，解决方案会变得非常简单：

```
awk -v RS=' *=== *|[()]' '
  NR%4==2 {printf "%s, ", $0}
  NR%4==0 {print "(" $0 ")"}
' 
```

在这里，记录分隔符`===`可选地用空格或左括号或右括号括起来。

# python-2.7 - raw_inputing unicode 字符串

> ID：15326058
> 
> 赞同：0
> 
> 时间：2013-03-10T18:44:30.343
> 
> 标签：python-2.7

我已经不止一次地阅读了“unicode on python 2.7 how-to”并彻底浏览了这个论坛，但我没有找到并尝试过让我的程序正常工作。

它应该将 dictionary.com 条目转换为例句集和单词发音对。然而它在一开始就失败了：IPA（即unicode）字符在输入后立即转换为乱码。

```
# -*- coding: utf-8 -*-

""" HERE'S HOW A TYPICAL DICTIONARY.COM ENTRY LOOKS LIKE
white·wash
/ˈʰwaɪtˌwɒʃ, -ˌwɔʃ, ˈwaɪt-/ Show Spelled
noun
1.
a composition, as of lime and water or of whiting, size, and water, used for whitening walls, woodwork, etc.
2.
anything, as deceptive words or actions, used to cover up or gloss over faults, errors, or wrongdoings, or absolve a wrongdoer from blame.
3.
Sports Informal. a defeat in which the loser fails to score.
verb (used with object)
4.
to whiten with whitewash.
5.
to cover up or gloss over the faults or errors of; absolve from blame.
6.
Sports Informal. to defeat by keeping the opponent from scoring: The home team whitewashed the visitors eight to nothing.
"""

def wdefinp():   #word definition input
    wdef=u''
    emptylines=0 
    print '\nREADY\n\n'
    while True:
        cinp=raw_input()   #current input line
        if cinp=='':
            emptylines += 1
            if emptylines >= 3:   #breaking out by 3xEnter
                wdef=wdef[:-2]
                return wdef
        else:
            emptylines = 0
        wdef=wdef + '\n' + cinp
    return wdef

wdef=wdefinp()
print wdef.decode('utf-8') 
```

这会产生：whiteÂ·wash /Ë�Ę°waÉŞtËŚwÉ'Ę�, -ËŚwÉ”Ę�, Ë�waÉŞt-/ Show Spelled ...

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T09:00:19.077

好的，我设法用你的程序复制了几个错误

首先，如果我在终端中运行它并将示例文本粘贴到其中，我会在这一行出现错误（对不起，我的行号与您的不匹配）：

```
 File "unicod.py", line 22, in wdefinp
    wdef=wdef + '\n' + cinp
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc2 in position 5: ordinal not in range(128) 
```

为了解决这个问题，我使用了这个 stackoverflow 问题的答案：[如何在 Python 中读取 Unicode 输入和比较 Unicode 字符串？](https://stackoverflow.com/questions/477061/how-to-read-unicode-input-and-compare-unicode-strings-in-python)

固定线路是

```
cinp = raw_input().decode(sys.stdin.encoding) 
```

基本上你需要知道输入编码，然后转换为utf8是可能的

一旦解决了，下一个问题就是类似的问题

```
File "unicod.py", line 28, in <module>
    print wdef.decode('utf-8')
  File "/usr/lib/python2.7/encodings/utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeEncodeError: 'ascii' codec can't encode character u'\xb7' in position 6: ordinal not in range(128) 
```

因为从函数返回的数据已经是 utf8 “双重解码”，所以它不起作用。只需删除“ `.decode('utf8')`”，它就可以正常工作

# javascript - 如何将我的文件转换为 TypedArray？

> ID：15326061
> 
> 赞同：0
> 
> 时间：2013-03-10T18:44:42.543
> 
> 标签：javascript, audio, html5-audio, codec

高的，

我正在研究这个编解码器，并且我创建了一个 Uint8Array 对象，它以 TypedArray 作为参数。如何将我的音频文件转换为 TypedArray，以便我可以将其加载到 Uint8Array 中并继续生活？这是我的[JsFiddle](http://jsfiddle.net/trkkazulu/K3G48/)，这是一段代码摘录：

```
 var buf = new Uint8Array(128); // this wants a typedArray or unsigned long
            if (buf.byteLength == 128) {
                alert("Yes, we have a 128 byte buffer");
            } else {
                alert("Nope, it's not 128 bytes");
            }
            var bitstream = new BitStream(buf);
            bitstream.writeBits(12, 0xfff);
            bitstream.seekTo(0);
            var bs = bitstream.readBits(6);
            bitstream.readBits(10);
            console.log("did some stuff with bitstream...");
            // let's call some amr functions...
            //var dcoded = jigg.decode(bs);//decode() takes a "bitstream" as argument 
```

谢谢，

J·威尔斯

# c# - 正则表达式查找带有特殊字符的开始和结束字符串

> ID：15326064
> 
> 赞同：0
> 
> 时间：2013-03-10T18:44:56.707
> 
> 标签：c#, regex, special-characters

我们正在尝试从 URL 字符串中删除大量特殊字符。大多数包含 TM 或版权符号，以及其他一些符号。

我想写一个正则表达式来找到开头的“&”和结尾的“;” 并删除整个字符串。

我已经写了：

```
var title = "RedHorseBar&trade;"   
title = Regex.Replace(title, @"^\&.*\;$", ""); 
```

希望得到“RedHorseBar”..但它不起作用。

如何编写正则表达式来查找开头的“&”和结尾的“;”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:45:59.847

使用以下内容：`&[^;]+;`

因此，以您想要的方式使用它：

```
title = Regex.Replace(title, @"&[^;]+;", "") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:49:38.323

尝试

```
title = Regex.Replace(title, @"&.*;", "") 
```

您不需要指定*匹配开始*(^) 和*匹配结束*($) 字符，因为要替换的字符串不是以字符串开头或结尾（可能）以字符串结尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T18:51:05.893

我以为你在寻找类似   等等

那么正则表达式应该是这样的： &\w+;

但是您似乎正在寻找没有特殊字符的字符串，那么您应该：

```
string result = Regex.Replace(title, @"&\w+;", ""); 
```

我希望这对您的探索有所帮助。

# jsf - @ManagedProperty 保持为空

> ID：15326065
> 
> 赞同：0
> 
> 时间：2013-03-10T18:44:59.860
> 
> 标签：jsf, null, managed-property

我正在尝试使用`ManagedProperty`注释来依赖注入到另一个 ManagedBean，但我总是得到一个`NullPointerException`. 我将尝试描述我的应用程序是如何工作的。

这是一个 PDF 生成器。首先，我的`xhtml`页面有一个选项卡式窗格。在每个选项卡中，我使用`<ui:include>`标签。所有这些 bean 都有**ViewScope**。

在第一个选项卡中，我有标题`inputText`和描述`textArea`字段，这很奇怪，因为这些字段运行良好，即使我不使用 DI。

当我转到另一个选项卡时，我的问题就开始了，我想添加一些额外的信息/文本。

**我的应用程序是这样工作的：我在 inputText 字段 ( 1** ) 中写入一些文本，然后按“Ready”( **2** ) 按钮将`this`对象传递给工厂，然后按“Print”( **3** ) 按钮生成 .pdf 文件。在这张图片中你可以看到`PanelInneBean`和`ContainerBean`区域。

![在此处输入图像描述](../Images/98afc6783cb1c0005442234ea3177f14.png)

让我显示我的来源：

```
@ManagedBean(name="inne")
@ViewScoped
public class PanelInneBean extends AbstractPanel implements Serializable {
    private static final long serialVersionUID = 1L;
    private final int CODE = 4;
    private boolean use;
    private String tytul, opis;
    private PdfFactory pdf;

    @PostConstruct
    private void init() {
    pdf = PdfFactory.getPdfObject();
    use = false;
    }

    public PanelInneBean() {
    }

    public boolean getUse() {
    return use;
    }

    public String getTytul() {
    return tytul;
    }

    public void setTytul(String tytul) {
    this.tytul = tytul;
    }

    public String getOpis() {
    return opis;
    }

    public void setOpis(String opis) {
    this.opis = opis;
    }

    public int getCode() {
    return CODE;
    }

    private void add() {
    use = true;
    }

    public void addBean() {
    add();
    pdf.addElement(this);
    System.out.println("InnePanel after pdf.addElement() this.opis:" + this.opis);
    }
} 
```

工厂来源：

```
@ManagedBean(name="factory")
@SessionScoped
public class PdfFactory implements Serializable {
//.............
private InneP inn = new InneP() //without new does not work too;
//.............

    public int addElement(PdfElement element) {
    pdfType = true;
    if (element.getUse()) {
        elementList.add(element);
        return 1;
    }
    return 0;
    }

//.............

public List<Element> getDocumentBody() throws DocumentException {
    initSignature();
    List<Element> list = new ArrayList<Element>();
    list.add(createDocDate());
    list.add(Chunk.NEWLINE);
    for (PdfElement p : elementList) {
        if (p.getUse()) {
        switch (p.getCode()) {
//............
        case 4:
            list.addAll(inn.generatePharse());
            break;
        }
        }
    }
    list.addAll(sF.generatePharse());
    return list;
    } 
```

此类中的最后一个**InneP**源（此类生成要打印的**段落**）我得到了**NPE**：

```
@ManagedBean
@RequestScoped
public class InneP {
    private List<Element> list = new ArrayList<Element>();
    private Font font;

    @ManagedProperty("#{inne}")
    private PanelInneBean panelInneBean;

    public InneP(){}

    public InneP(Font font) {
    this.font = font;
    }

    public void setPanelInneBean(PanelInneBean inne) {
    this.panelInneBean = inne;
    }

    public List<Element> generatePharse() {
    if (panelInneBean.getTytul().length() > 0) {
        System.out.println("drukowanie tytulu");
        list.add(createTitle(panelInneBean.getTytul()));
        list.add(Chunk.NEWLINE);
    }
    if (panelInneBean.getOpis().length() > 0) {
        list.add(createDescription(panelInneBean.getOpis()));
        list.add(Chunk.NEWLINE);
    }

    return list;
    }

    private Paragraph createTitle(String tytul) {
    System.out.println("inne tytul: " + tytul);
    font.setStyle(Font.NORMAL);
    Paragraph t = new Paragraph(tytul, font);
    t.setAlignment(Element.ALIGN_LEFT);
    return t;
    }

    private Paragraph createDescription(String opis) {
    System.out.println("inne opis:" + opis);
    font.setStyle(Font.BOLD);
    Paragraph d = new Paragraph(opis, font);
    d.setAlignment(Element.ALIGN_LEFT);
    return d;
    }

} 
```

打印按钮只是将列表添加到`for`循环中并打印所有段落；我使用 iText lib 和 OpenFaces 来生成选项卡式窗格。

我希望我写了足够的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:37:10.790

首先，如果您希望 bean 由 JSF 管理，您可以手动实例化它（使用`new`），您必须使用`@ManagedProperty`让容器实例化并设置您的属性（例如，就像您对`panelInneBean`字段所做的那样）。在您的情况下，这将不起作用，因为您想在会话范围的 bean 中使用请求范围的 bean，所以您不能注入它。原因是因为在一个会话范围 bean 的生命周期中，将有许多请求范围 bean 实例。因此，您需要以`InneP`其他方式获取您的实例。

在要使用`InneP`实例的方法中，您必须手动获取它，不要将它分配给某个类字段，使用局部变量，因为您将在每个请求中都有另一个实例：

```
InneP inneP = (InneP) context.getApplication().getExpressionFactory()
        .createValueExpression(FacesContext.getCurrentInstance().getELContext(), "#{inneP}", InneP.class)
            .getValue(FacesContext.getCurrentInstance().getELContext()); 
```

# python - Matplotlib 半黑半白圈

> ID：15326069
> 
> 赞同：13
> 
> 时间：2013-03-10T18:45:23.503
> 
> 标签：python, matplotlib

我想在 matplotlib 图的原点放置一个半径为 R 的半黑半白圆。我知道存在一个[Circle 类](https://stackoverflow.com/questions/3439639/matplotlib-add-circle-to-plot)，但我不知道如何指定圆圈的左半部分应该是白色的，而右半部分应该是黑色的。（一个理想的解决方案将允许我指定圆的方向——例如，我应该能够旋转它，例如顶部可以是白色，底部可以是黑色）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-10T19:51:06.217

最简单的方法是使用两个`Wedge`s。（这不会自动重新调整坐标轴，但如果您愿意，这很容易添加。）

举个简单的例子：

```
import matplotlib.pyplot as plt
from matplotlib.patches import Wedge

def main():
    fig, ax = plt.subplots()
    dual_half_circle((0.5, 0.5), radius=0.3, angle=90, ax=ax)
    ax.axis('equal')
    plt.show()

def dual_half_circle(center, radius, angle=0, ax=None, colors=('w','k'),
                     **kwargs):
    """
    Add two half circles to the axes *ax* (or the current axes) with the 
    specified facecolors *colors* rotated at *angle* (in degrees).
    """
    if ax is None:
        ax = plt.gca()
    theta1, theta2 = angle, angle + 180
    w1 = Wedge(center, radius, theta1, theta2, fc=colors[0], **kwargs)
    w2 = Wedge(center, radius, theta2, theta1, fc=colors[1], **kwargs)
    for wedge in [w1, w2]:
        ax.add_artist(wedge)
    return [w1, w2]

main() 
```

![在此处输入图像描述](../Images/edd11127689e81fdc704be3f38bf803f.png)

如果您希望它始终位于原点，您可以将变换指定为`ax.transAxes`，并关闭剪裁。

例如

```
import matplotlib.pyplot as plt
from matplotlib.patches import Wedge

def main():
    fig, ax = plt.subplots()
    dual_half_circle(radius=0.1, angle=90, ax=ax)
    ax.axis('equal')
    plt.show()

def dual_half_circle(radius, angle=0, ax=None, colors=('w','k'), **kwargs):
    """
    Add two half circles to the axes *ax* (or the current axes) at the lower
    left corner of the axes with the specified facecolors *colors* rotated at
    *angle* (in degrees).
    """
    if ax is None:
        ax = plt.gca()
    kwargs.update(transform=ax.transAxes, clip_on=False)
    center = (0, 0)
    theta1, theta2 = angle, angle + 180
    w1 = Wedge(center, radius, theta1, theta2, fc=colors[0], **kwargs)
    w2 = Wedge(center, radius, theta2, theta1, fc=colors[1], **kwargs)
    for wedge in [w1, w2]:
        ax.add_artist(wedge)
    return [w1, w2]

main() 
```

但是，这会使圆的“圆度”取决于轴轮廓的纵横比。（您可以通过几种方式解决这个问题，但它会变得更加复杂。让我知道这是否是您的想法，我可以展示一个更详细的示例。）我也可能误解了您的意思“在起源”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T18:01:28.800

如果您有带有此符号的字体，则可以使用 unicode 半实心圆 (U+25D0)。奇怪的是，这不在 STIX 中（包含在 matplotlib 中），但我知道它在 DejaVu Sans 中，所以我将从那里使用它。

![在此处输入图像描述](../Images/799ce170d6ae34a7ad81aba3ffc8906d.png)

```
import matplotlib.pyplot as plt
import matplotlib.font_manager
from numpy import *

path = '/full/path/to/font/DejaVuSans.ttf'
f0 = matplotlib.font_manager.FontProperties()    
f0.set_file(path)

plt.figure()
plt.xlim(-1.2,1.2)
plt.ylim(-1.2,1.2)

for angle in arange(0, 2*pi, 2*pi/10):
    x, y = cos(angle), sin(angle)
    plt.text(x, y, u'\u25D0', fontproperties=f0, rotation=angle*(180/pi), size=30)

plt.show() 
```

# mysql - 更新从同一个表中选择的mysql表

> ID：15326070
> 
> 赞同：2
> 
> 时间：2013-03-10T18:45:31.400
> 
> 标签：mysql

我是 MYSQL 查询语句的新手，我目前被困在一些代码中，如下所示

```
UPDATE fb_messages
SET sent = 'Yes' 
WHERE msg_id = (SELECT MAX(msg_id) AS MSG_ID 
                FROM fb_messages
                WHERE sent = 'No') 
```

我收到此错误

```
#1093 - You can't specify target table 'fb_messages' for update in FROM clause 
```

我搜索了解决类似情况的解决方案，但我真的找不到，请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-10T19:19:30.267

这应该有效。

```
UPDATE fb_messages fb1, (SELECT MAX(msg_id) AS MSG_ID 
                FROM fb_messages
                WHERE sent = 'No') fb2
SET sent = 'Yes' 
WHERE fb1.msg_id = fb2.MSG_ID 
```

**注意**：这将创建一个临时表，如果有大量行则查询变慢，请尝试使用索引/主键[链接](http://dev.mysql.com/doc/refman/5.1/en/create-table-select.html)创建一个临时表（来源：Alex [Comment](https://stackoverflow.com/questions/4429319/you-cant-specify-target-table-for-update-in-from-clause/4429409#comment20742824_4429409)）

看到这个[小提琴](http://sqlfiddle.com/#!2/0c79c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T19:07:12.560

尝试这个

```
 UPDATE fb_messages
   SET sent = 'Yes'
   WHERE sent = 'No'
   ORDER BY msg_id DESC
   limit 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T19:22:18.103

"In MySQL, you can't modify the same table which you use in the SELECT part. This behaviour is documented at: [http://dev.mysql.com/doc/refman/5.6/en/update.html](http://dev.mysql.com/doc/refman/5.6/en/update.html)"

Break it up into two statements.

```
CREATE TABLE Updates (
  msg_id int
);

INSERT Updates (msg_id)
SELECT
  MAX(msg_id)
FROM fb_messages
WHERE sent = 'No';

UPDATE fb_messages o, Updates u
SET o.sent = 'Yes'
WHERE o.msg_id = u.msg_id 
```

There's a workaround covered in the article below

Reference: [MySQL Error 1093 - Can't specify target table for update in FROM clause](https://stackoverflow.com/questions/45494/mysql-error-1093-cant-specify-target-table-for-update-in-from-clause)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-11-04T08:27:52.270

`WHERE`请在条件之间再添加一个选择查询

例子：

```
UPDATE t1 
SET t1.Status = 5
WHERE t1.SearchID NOT IN 
(SELECT TMP.SearchID FROM 
    (SELECT MIN(t1.SearchID) AS SearchID
  FROM t1 
 WHERE t1.ID = '750') TMP)
 AND t1.ID = '750' 
```

# html - Chrome中的垂直对齐问题与表格单元内的img周围的元素

> ID：15326072
> 
> 赞同：3
> 
> 时间：2013-03-10T18:45:50.497
> 
> 标签：html, css, google-chrome, vertical-alignment

我只在谷歌浏览器中发现了这个问题：除了简单的文本之外的其他元素（`<strong>`， ...），在同一行中`<em>`有一个时，位置不好。`<img>`

![在此处输入图像描述](../Images/d595aa71bc0d5b3cf16862259e15f7e7.png)

顺便说一句，我试过

*   `vertical-align:middle`对`<img>`，或者一些`line-height`，结果并不完美。
*   结果`vertical-align:top`对于图片来说很好，因为其他标签似乎像图片一样对齐（这太疯狂了......）。但我希望图片是`vertical-align:middle`...
*   结果也很好，无需`vertical-align`指定`table-cell`.

你可以检查这个**[小提琴](http://jsfiddle.net/QFYu9/1/)**

***CSS***

```
img {height:25px;}
.table {display:table;width:400px;}
.left {display:table-cell;width:30%;padding:10px;background:#CCC;}
.right {display:table-cell;width:70%;padding:10px;background:#EDEDED;
vertical-align:top;} 
```

***HTML***

```
<div class="table">

    <div class="left">Left content</div>

    <div class="right">
        Some text some text, some text, some text, 
        some text, some text, some text, and a 
        <strong>bold text</strong>, then a pic : 
        <img src="some_pic_url"/>
        and <em>italic</em>
    </div>

</div> 
```

似乎其他元素与图片底部对齐......

关于这个丑陋问题的任何想法，以及如何在任何浏览器上正确修复垂直文本对齐？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:17:04.893

“显示：表格单元格”；从 div 向下级联并应用于包含的文本节点，但它没有级联到包含的 strong 和 em 节点。

将文本包装在一个跨度标签中，这将保护文本免受级联“显示：表格单元”的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:17:19.103

在测试了很多解决方案之后，似乎在不添加其他元素的情况下解决此问题的更简单方法`div`是`table-cell`指定.`vertical-align``table-cell`

就像添加以下内容：

```
.right * {vertical-align:top;} 
```

在这种情况下，图片可以保持与其他元素不同的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T19:18:18.963

看起来像一个错误，可以通过向图像添加相同的垂直对齐来修复它：

```
.right img {vertical-align:top;} 
```

[http://jsfiddle.net/J8ved/1/](http://jsfiddle.net/J8ved/1/)

# java - 在选择收藏类型时需要帮助

> ID：15326074
> 
> 赞同：1
> 
> 时间：2013-03-10T18:46:13.820
> 
> 标签：java, collections, arraylist, hashmap

我需要从方法返回文件 ID ( `Integer`) 和成功或失败 ( `boolean`) 值。我脑子里有3个选择。

一种是将两个值都转换为 String 并将返回类型设为`ArrayList`.

第二个选项是使用`HashMap`. 由于这两个值没有任何依赖关系，我不确定是否可以使用这种类型。

第三个是将两者都转换为 String 对象并返回逗号分隔的字符串。

请建议我哪一个对我来说是更好的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:51:07.877

其他可能的解决方案：

*   让方法返回文件 ID String 或 int。如果失败，让它抛出异常。
*   将其拆分为两种方法，一种称为 fileIdExists()，返回一个布尔值，另`getFileId()`一种返回 ID。如果没有 ID 作为故障安全，后者仍应抛出异常。
*   或者使用包装器对象来保存所有必要的字段（根据 artbristol 的建议）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:47:31.407

**让整数的值包括 success-state**。这仅在您的整数只能为正数时才有效（通常是`fileid`'s 的情况）。

1.  **失败时返回 -1**
2.  **成功时返回文件 ID**

# google-drive-api - 让 Drive SDK 和 DocsList 并行运行

> ID：15326076
> 
> 赞同：0
> 
> 时间：2013-03-10T18:46:19.547
> 
> 标签：google-drive-api

我已经为此奋斗了一个多月，并且已经走到了尽头。用例是这样的：

1 - 当我的客户为他的一位客户创建了一个新文件时，他会将其放在他的 Google 云端硬盘帐户的文件夹中。该文件夹与他的客户共享。由于 Google 没有自动通知某人与他们共享的文件夹中的文件已更改的机制，因此我不得不写一个。所以我有一个带有通知按钮的 GAE/GWT 应用程序。该应用程序有一个扫描他的客户文件夹的按钮，如果该文件夹中有新文件，它会获取与该文件夹共享的人的电子邮件地址，并向他们发送一封电子邮件，说明他们有新文件。

2 - 他需要定期向所有客户发送大量电子邮件。因此，在他的仪表板上是第二个按钮，他格式化电子邮件并单击按钮，扫描仪会转到所有客户端文件夹并编译文件夹共享的所有人员的列表。然后循环列表并发送电子邮件。

Drive SDK 部分很简单。直到我发现共享文件夹的人可用，但他们的电子邮件不可用。因此，我开始尝试将旧 API DocsService 与 Drive SDK 结合使用，以便获取电子邮件地址。我梳理了示例应用程序，发现了一个实用程序类，它可以满足我的需求，这里是：

/* * 版权所有 (c) 2010 Google Inc. * * 根据 Apache 许可证 2.0 版（“许可证”）获得许可；您不得使用此文件，除非 * 符合许可。[您可以在 * * http://www.apache.org/licenses/LICENSE-2.0](http://www.apache.org/licenses/LICENSE-2.0) * *获得许可证的副本 * * 除非适用法律要求或书面同意，否则根据许可证分发的软件 * 在“ “按原样”的基础，不提供任何形式的明示*或暗示的保证或条件。请参阅许可证以了解 * 许可证下的特定语言管理权限和限制。*/

```
package com.voice.mailer.server;

import java.io.IOException;
import java.util.HashSet;
import java.util.logging.Logger;

import javax.servlet.http.HttpServletRequest;

import com.google.api.client.auth.oauth2.Credential;
import com.google.api.client.extensions.appengine.auth.oauth2.AppEngineCredentialStore;
import com.google.api.client.extensions.appengine.http.UrlFetchTransport;
import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;
import com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;
import com.google.api.client.http.GenericUrl;
import com.google.api.client.http.HttpTransport;
import com.google.api.client.json.JsonFactory;
import com.google.api.client.json.jackson.JacksonFactory;
import com.google.api.services.drive.Drive;
import com.google.api.services.drive.DriveScopes;
import com.google.appengine.api.users.UserServiceFactory;
import com.google.common.base.Preconditions;
import com.google.gdata.client.docs.DocsService;

/**
 * Utility class for JDO persistence, OAuth flow helpers, and others.
 * 
 * @author Yaniv Inbar
 */
class Utils {

    /** Global instance of the HTTP transport. */
    static final HttpTransport HTTP_TRANSPORT = new UrlFetchTransport();
    static Credential credential = null;
    /** Global instance of the JSON factory. */
    static final JsonFactory JSON_FACTORY = new JacksonFactory();

    private static GoogleClientSecrets clientSecrets = null;
    private static final Logger log = Logger.getLogger(Utils.class.getName());

    static GoogleClientSecrets getClientCredential() throws IOException {
        if (clientSecrets == null) {
            clientSecrets = GoogleClientSecrets.load(JSON_FACTORY,
                    Utils.class.getResourceAsStream("/client_secrets.json"));
            Preconditions
                    .checkArgument(
                            !clientSecrets.getDetails().getClientId()
                                    .startsWith("Enter ")
                                    && !clientSecrets.getDetails()
                                            .getClientSecret()
                                            .startsWith("Enter "),
                            "Download client_secrets.json file from https://code.google.com/apis/console/?api=calendar "
                                    + "into calendar-appengine-sample/src/main/resources/client_secrets.json");
        }
        return clientSecrets;
    }

    static String getRedirectUri(HttpServletRequest req) {
        GenericUrl url = new GenericUrl(req.getRequestURL().toString());
        url.setRawPath("/oauth2callback");
        return url.build();
    }

    static GoogleAuthorizationCodeFlow newFlow() throws IOException {
        HashSet<String> s = new HashSet<String>();
        s.add(DriveScopes.DRIVE_FILE);
        s.add("https://docs.google.com/feeds/");
        s.add("https://docs.googleusercontent.com/");
        s.add("https://spreadsheets.google.com/feeds/");
        s.add("http://www.google.com/accounts/AuthSubRequest");
        s.add("http://schemas.google.com/acl/2007");
        s.add("https://www.googleapis.com/auth/userinfo");

        return new GoogleAuthorizationCodeFlow.Builder(HTTP_TRANSPORT,
                JSON_FACTORY, getClientCredential(), s)
                .setCredentialStore(new AppEngineCredentialStore())
                .setAccessType("offline").build();

        // http(s)://docs.google.com/feeds/
    }

    static Drive loadDriveClient() throws IOException {

        if (credential == null) {
            String userId = UserServiceFactory.getUserService()
                    .getCurrentUser().getUserId();
            credential = newFlow().loadCredential(userId);
        }
        return new Drive.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
                .build();
    }

    static DocsService loadDocsService(String applicationName) {

        if (credential == null) {
            String userId = UserServiceFactory.getUserService()
                    .getCurrentUser().getUserId();
            try {
                credential = newFlow().loadCredential(userId);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        DocsService service = new DocsService(applicationName);

        log.info("token: " + credential.getAccessToken());

        service.setOAuth2Credentials(credential);
        // service.setHeader("Authorization",
        // "Bearer " + credential.getAccessToken());

        return service;
    }

    /**
     * Returns an {@link IOException} (but not a subclass) in order to work
     * around restrictive GWT serialization policy.
     */
    static IOException wrappedIOException(IOException e) {
        if (e.getClass() == IOException.class) {
            return e;
        }
        return new IOException(e.getMessage());
    }

    private Utils() {
    }
} 
```

现在这个类很好地处理了 Drive SDK 部分，我能够调用 loadDriveClient 方法，我得到了一个准备好摇滚的类。但是当我调用 loadDocsService 并调用一个方法时，我不断收到以下错误：

```
 10, 2013 5:36:07 PM com.google.appengine.repackaged.org.apache.http.impl.client.DefaultRequestDirector handleResponse
WARNING: Authentication error: Unable to respond to any of these challenges: {authsub=WWW-Authenticate: AuthSub realm="http://www.google.com/accounts/AuthSubRequest"}
com.google.gdata.client.GoogleService$SessionExpiredException: OK
<HTML>
<HEAD>
<TITLE>Token invalid - AuthSub token has wrong scope</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Token invalid - AuthSub token has wrong scope</H1>
<H2>Error 401</H2>
</BODY>
</HTML>

    at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:570)
    at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
    at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
    at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
    at com.google.gdata.client.Service.getFeed(Service.java:1135)
    at com.google.gdata.client.Service.getFeed(Service.java:998)
    at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:652)
    at com.google.gdata.client.Service.getFeed(Service.java:1017)
    at com.voice.mailer.shared.DocumentList.getAclFeed(DocumentList.java:611)
    at com.voice.mailer.server.NewFileProcessorImpl.processNewFiles(NewFileProcessorImpl.java:68)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.appengine.tools.development.agent.runtime.Runtime.invoke(Runtime.java:115)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:561)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:383)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:938)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:755)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Mar 10, 2013 5:36:21 PM com.google.appengine.api.datastore.dev.LocalDatastoreService$PersistDatastore persist
INFO: Time to persist datastore: 6 ms 
```

我已经尝试了所有我能想到的和我能找到的每一个例子。我不知道为什么它没有正确创建 DocsService。你能给我一些关于为什么这不起作用的想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T13:46:10.307

你应该有

> [https://docs.google.com/feeds/](https://docs.google.com/feeds/)

作为 OAuth 范围的一部分。

# android - IBM worklight 中的地理位置（谷歌地图 api）

> ID：15326080
> 
> 赞同：0
> 
> 时间：2013-03-10T18:46:41.393
> 
> 标签：android, iphone, google-maps, geolocation, ibm-mobilefirst

我只是在我的移动应用程序工作灯功能的 js 代码中集成了谷歌地图 api 可能是正确的，但是部署项目，每个设备都给出了不同的位置 Android：阿拉斯加和 IOS 利比亚没有 GPS 触发器，如果​​我们在普通视图中预览（GPS在 Chrome 中触发），它给出了一个距离我当前位置 200 公里的城市的位置 我该如何解决这个问题？

JS代码：var映射；

```
 var latlng;

 var markersArray = new Array();

  function initialize() {

  var mapOptions = {

  center: new google.maps.LatLng(-34.397, 150.644),

  zoom: 8,

  mapTypeId: google.maps.MapTypeId.ROADMAP
  };

var canvas = document.getElementById("map_canvas");

map = new google.maps.Map(canvas, mapOptions);

 locateCurrentPosition();
  } 
  function onLocationSuccess(position) {

    var locationText = "Lon:" + position.coords.longitude;

     locationText += " Lat:" + position.coords.latitude;

   latlng = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);

   map.panTo(latlng);

   var marker = new google.maps.Marker({

   map : map,

   position : latlng,

   title : 'Current Location'

    });

  google.maps.event.addListener(marker, 'click', function() {

  var infowindow = new google.maps.InfoWindow(

  { content: 'Your location: <br>'+locationText,size: new google.maps.Size(50,50)});

  infowindow.open(map,marker);

   });

    };

    function onLocationFailure(positionError) {

alert('code: ' + positionError.code + '\n' + 'message:'+ positionError.message + '\n');

} 
```

提前致谢

# facebook - 在 facebook 评论插件中禁用通知

> ID：15326085
> 
> 赞同：-1
> 
> 时间：2013-03-10T18:46:55.257
> 
> 标签：facebook, facebook-graph-api, comments, facebook-comments, facebook-social-plugins

我正在处理 facebook 评论流畅工作的一个主要问题。

我已根据需要在我的 Wordpress 网站中实施了该插件： [http ://www.elimatana.co.il/recommendations/](http://www.elimatana.co.il/recommendations/)

然而，许多用户向我表示，对于该页面上发布的每条新评论 -**之前发表评论的人都会收到 facebook 通知**。

我尝试了几种结果为零的解决方案。我想知道这是否是一个已知问题，或者是否有一个问题的常见解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T09:09:26.163

这是一个已知的 Facebook 错误。可悲的是，除了 Facebook 早在 2012 年 11 月就接受了这个错误之外，没有任何更新。

请参阅此处了解更多信息，并订阅该错误：[https ://developers.facebook.com/bugs/306791559425667?browse=external_tasks_search_results_5224554e42ac64619196232](https://developers.facebook.com/bugs/306791559425667?browse=external_tasks_search_results_5224554e42ac64619196232)

# google-visualization - 谷歌折线图：如何更改工具提示中的小数点？

> ID：15326091
> 
> 赞同：1
> 
> 时间：2013-03-10T18:47:33.430
> 
> 标签：google-visualization

[https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart#Example](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart#Example)

如何将工具提示中的小数点从句点更改为逗号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:16:55.053

Google Charts 使用[ICU DecimalFormat Class](http://icu-project.org/apiref/icu4c/classDecimalFormat.html#_details)的一个子集。不幸的是，据我所知，该子集不包括更改语言环境的能力。如果您确实想尝试，您可以尝试使用使用逗号作为小数分隔符的区域设置（例如欧洲）的此 javascript 版本（这会打印出所有区域设置信息，因此您必须深入研究参考以找出如何首先设置单个语言环境）：

```
// Normally we would have a GUI with a menu for this
int32_t locCount;
const Locale* locales = NumberFormat::getAvailableLocales(locCount);
double myNumber = -1234.56;
UErrorCode success = U_ZERO_ERROR;
NumberFormat* form;
// Print out a number with the localized number, currency and percent
// format for each locale.
UnicodeString countryName;
UnicodeString displayName;
UnicodeString str;
UnicodeString pattern;
Formattable fmtable;
for (int32_t j = 0; j < 3; ++j) {
  cout << endl << "FORMAT " << j << endl;
  for (int32_t i = 0; i < locCount; ++i) {
    if (locales[i].getCountry(countryName).size() == 0) {
      // skip language-only
      continue;
    }
    switch (j) {
      case 0:
        form = NumberFormat::createInstance(locales[i], success ); break;
      case 1:
        form = NumberFormat::createCurrencyInstance(locales[i], success ); break;
      default:
        form = NumberFormat::createPercentInstance(locales[i], success ); break;
    }
    if (form) {
      str.remove();
      pattern = ((DecimalFormat*)form)->toPattern(pattern);
      cout << locales[i].getDisplayName(displayName) << ": " << pattern;
      cout << " -> " << form->format(myNumber,str) << endl;
      form->parse(form->format(myNumber,str), fmtable, success);
      delete form;
    }
  }
} 
```

# git - git-flow 与普通 git 命令

> ID：15326093
> 
> 赞同：12
> 
> 时间：2013-03-10T18:48:09.453
> 
> 标签：git, git-flow

我已经阅读了一些关于 git-flow 的信息，但仍然不明白为什么应该使用它而不是普通的 git 命令。对我来说，它看起来像是传播了一个（相当复杂的）分支设置。好的，这应该很容易采用。Git-flow 还围绕较低级别的普通 git 命令添加了一些高级命令。

有人可以用几句话解释使用 git-flow 与使用普通 git 命令相比的好处吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-10T18:55:55.427

我相信 git-flow 可以让你在开发团队中实现某个流程。它强制执行某些实践，例如分支的命名约定，并协助`flow`从开发到发布，再到掌握。

git-flow 不提供任何基本 git 命令不能做的事情。使用`start`and`finish`命令它抽象了合并和删除。

好处是：

*   通过具有已知的分支类型来强制执行流程（流程）：`master`, `develop`, `release`,`hotfix`
*   标准化分支命名约定
*   抽象某些用于合并和删除的 git 命令

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T18:52:30.337

Git Flow 遵循[成功的分支模型中描述的分支模型](http://nvie.com/posts/a-successful-git-branching-model/)。当然，您可以使用标准 Git 命令完成所有这些操作，但 Git Flow 只是将一些约定（尤其是与命名相关的约定）封装到有助于遵循分支模型的附加命令中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T18:51:44.880

它只是鼓励在您的存储库中使用一致的分支命名和集成样式，这在多人合作时会很有帮助。一致命名的分支使分支的“风格”一目了然：新功能、小错误修复或发布。

您不一定需要自己使用 git-flow 工具来完成它，而作者最初只是在[博客文章](http://nvie.com/posts/a-successful-git-branching-model/)中描述了该过程本身，而根本没有 git-flow 工具。

# php - 如何让用户使用 url 仪表板登录？用户名=xyz

> ID：15326096
> 
> 赞同：0
> 
> 时间：2013-03-10T18:48:14.883
> 
> 标签：php, user-management

我是 PHP 初学者。我设法创建了一个用户注册/注册系统，该系统通向仪表板面板。但我无法使 URL 看起来像[http://example.com/dashboard?username=xyz](http://example.com/dashboard?username=xyz)

这是我的登录代码。请帮帮我。

```
<?php 
include "config.php"; 
session_start();

if(!empty($_SESSION['LoggedIn']) && !empty($_SESSION['Username']))  
{  

echo  "<script>location.href='logindo.php?success=yes'</script>";

 }  
elseif(!empty($_POST['username']) && !empty($_POST['password']))  
{  
$username = mysql_real_escape_string($_POST['username']);  
$password = md5(mysql_real_escape_string($_POST['password']));  

$checklogin = mysql_query("SELECT * FROM users WHERE Username = '".$username."' AND password = '".$password."'");  

if(mysql_num_rows($checklogin) == 1)  
{  
    $row = mysql_fetch_array($checklogin);  
    $email = $row['EmailAddress'];  

    $_SESSION['Username'] = $username;  
    $_SESSION['EmailAddress'] = $email;  
    $_SESSION['LoggedIn'] = 1;  

    echo "<h1>Success</h1>";  
    echo "<p>We are now redirecting you to the member area.</p>";  
  echo  "<script>location.href='logindo.php?success=yes'</script>";
  } 

         else  
        {  

          echo  "<script>location.href='logindo.php?error=yes'</script>";
        }  
  }  

  else  
  {   
 }
  ?>
   <?php if($_GET['error'] == 'yes')
      {
        echo "<h1>Error</h1>";  
    echo "<p>Sorry, your account could not be found. Please <a href=\"user_login.php\">click here to try again</a>.</p>"; 
      }
      ?>

      <?php if($_GET['success'] == 'yes')
      {

   header('Location: /im/dashboard/');
      }
      ?>

 <?php if($_GET['error1'] == 'yes')
      {
        echo "<h1>Error</h1>";  
    echo "<p>Sorry, one ore more required fields were left empty. Please <a href=\"user_login.php\">click here to try again</a>.</p>"; 
      }
      ?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-10T19:14:41.583

为了使用“dashboard?...”作为您的 url，您需要使用一种称为 Friendly URLS 的方法。这很简单，但是您需要访问您的 apache 设置。看看这个答案以获得 mod_rewrite 帮助：[apache-mod-rewrite-friendly-urls-with-corresponding-301-redirects](https://stackoverflow.com/questions/9376698/apache-mod-rewrite-friendly-urls-with-corresponding-301-redirects)

这将使您了解它是如何工作的。我还发现有时，您还必须在 apache 中使用 ForceType 声明。快速的谷歌搜索将对此有所帮助，谁知道呢，你可能不需要它！先复习一下 mod_rewrite，看看会发生什么！！

# jquery - 使用 Jquery - 在嵌套的父/子复选框列表中 - 根据子状态选中或取消选中父级

> ID：15326098
> 
> 赞同：0
> 
> 时间：2013-03-10T18:48:38.423
> 
> 标签：jquery, recursion, checkbox, nested-lists

如果您在列表中选中一个孩子，则所有父母都应该被选中。

如果您取消选中列表中的一个孩子并且还有其他孩子被选中，则父母应该保持选中状态。

最后，如果您取消选中列表中的所有孩子，则父母也应该取消选中

[http://jsfiddle.net/snEfq/14/](http://jsfiddle.net/snEfq/14/)

```
<li data-id="1">
    <input class="cat_check" data-pid="0" type="checkbox" value="1" id="1" checked/>Exterior Signs
        <ul class="category_select_list">
            <li data-id="15">
                <input class="cat_check" data-pid="1" type="checkbox" value="15" id="15" checked/>Monument
            </li>
            <li data-id="17">
                <input class="cat_check" data-pid="1" type="checkbox" value="17" id="17" checked/>Channel Letters
                <ul class="category_select_list">
                    <li data-id="28">
                        <input class="cat_check" data-pid="17" type="checkbox" value="28" id="28" checked/>Neon Channel Letter
                    </li>
                </ul>
            </li>
            <li data-id="16">
                <input class="cat_check" data-pid="1" type="checkbox" value="16" id="16" checked/>Banners
            </li>
        </ul>
    </li> 
```

每个盒子都有一个 id 和 data-pid 属性

data-pid 是其父级，0=顶级

Neon Channel Letters 的 pid 为 17 - child

并且频道字母的 pid 为 1 - 父级到霓虹灯，子级为外部

并且外部标志的 pid 为 0 - 顶级父级

```
 $('.cat_check').click(function () {
    tid = $(this).attr('value');
    state = $(this).prop('checked');
    pid = $(this).data('pid');
    check_parent(pid, state);
    cc(tid, state);

    function cc(tid, state) {
        $(':input').each(function () {
            if ($(this).data('pid') == tid) {
                $(this).prop('checked', state);
                cc($(this).attr('value'), state)
            }

        });
    }
}); 
```

> //此功能有效，除非您取消选中孩子并且仍有孩子选中。然后它取消检查父级。

```
function check_parent(pid, state){
    if (pid != 0){
        $('#'+pid).prop('checked', state);
        this_pid = $('#'+pid).data('pid');
        check_parent(this_pid, state);
    } 
```

感谢您的任何建议和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:30:15.047

检查这个[jsFiddle](http://jsfiddle.net/CVF5N/1/)。代码需要重构，但功能应该根据您的需要。

```
function checkSiblings(target) {
    var siblingsChecked = 0;
    target.parent('li').siblings('li').children('input').each(function(i, el){
        if ($(el).is(':checked')) {
            siblingsChecked++;
        }
    });

    if (siblingsChecked === 0) {
        var possibleParent = target.parent('li').parents('li').eq(0).children('input');
        if (possibleParent.length) {
            //console.log('we have a parent');
            possibleParent.prop('checked', false);
        }
        else {
            //console.log('nothing');
        }
    }
}

$('.cat_check').on('click', function (ev) {
    if ($(this).is(':checked')) {
        $(this).parents('li').each(function(i, el){
            $(el).children('input').prop('checked', true);
        });
    }
    else {
        $(this).parent('li').find('input').prop('checked', false);
        checkSiblings($(this));
    }
}); 
```

更新代码：http: [//jsfiddle.net/gZEry/](http://jsfiddle.net/gZEry/)

```
function checkSiblings(target) {
    var siblingsChecked = 0;
    target.parent('li').siblings('li').children('input').each(function(i, el){
        if ($(el).is(':checked')) {
            siblingsChecked++;
        }
    });

    if (siblingsChecked === 0) {
        var possibleParent = target.parent('li').parents('li').eq(0).children('input');
        if (possibleParent.length) {
            //console.log('we have a parent');
            possibleParent.prop('checked', false);
        }
        else {
            //console.log('nothing');
        }
    }
}

$('.cat_check').on('click', function (ev) {
    if ($(this).is(':checked')) {
        // check all children
        $(this).parent('li').each(function(i, el){
            $(el).find('input').prop('checked', true);
        });
        // check inputs on the way up
        $(this).parents('li').each(function(i, el){
            $(el).children('input').prop('checked', true);
        });
    }
    else {
        $(this).parent('li').find('input').prop('checked', false);
        checkSiblings($(this));
    }
}); 
```

# android - 这个小部件的名称是什么？

> ID：15326101
> 
> 赞同：1
> 
> 时间：2013-03-10T18:48:42.900
> 
> 标签：android

我是安卓新手。在下图中，谁能告诉我`Priority`TextView 旁边的小部件的名称是什么？

![在此处输入图像描述](../Images/0a862746eb638b0b7cecaacbe099c864.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:53:10.163

有很多方法可以做你想做的事，我会给你其中一种。

水平方向的五个文本视图，在您的 Java 类中 如果用户单击其中任何一个，则更改该文本视图的背景。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/tv1"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#FFFFFF"
        android:gravity="center"
        android:padding="5dip"
        android:text="1" />

    <TextView
        android:id="@+id/tv2"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#FFFFFF"
        android:gravity="center"
        android:padding="5dip"
        android:text="2" />

    <TextView
        android:id="@+id/tv3"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#FFFFFF"
        android:gravity="center"
        android:padding="5dip"
        android:text="3" />

    <TextView
        android:id="@+id/tv4"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#FFFFFF"
        android:gravity="center"
        android:padding="5dip"
        android:text="4" />

    <TextView
        android:id="@+id/tv5"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:background="#FFFFFF"
        android:gravity="center"
        android:padding="5dip"
        android:text="5" />

</LinearLayout> 
```

**结果** ![在此处输入图像描述](../Images/bc4fd9db9bd04694bc3ef3bb21c0f23c.png)

**注意** 您可以在每个列表项中使用带有 textview 的 listview 来做同样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T18:56:50.583

我认为它可能是其中包含图像的 ListView。

# php - 使用php的图形密码

> ID：15326102
> 
> 赞同：0
> 
> 时间：2013-03-10T18:48:48.843
> 
> 标签：php

我们正在做一个基于图像的图形密码项目。我们正在使用 php。在注册期间，向用户提供一组图像，他可以在其中选择图像。然后图像将被切片并显示为 3x3 网格。用户可以从中选择特定的图片单元。用户提供的文本将被隐写到这个切片中。该隐写图像存储在数据库中。下次用户登录时，他必须选择正确的图像、正确的单元格和正确的单词。生成一个新的隐写图像，与数据库中的原始图像进行比较。如果相同，登录.....这在php中可行吗？我已经能够将图像切成 3x3 网格。我在 php 中有一个 steg 程序。

# tfs - 在新计算机上重新映射 TFS 项目

> ID：15326109
> 
> 赞同：25
> 
> 时间：2013-03-10T18:49:44.397
> 
> 标签：tfs, visual-studio-2012

所以当谈到 TFS 时，我完全是个菜鸟。我以前真的只在 Mac 上使用过 Git。这是为了工作，因为我正在切换项目并且我不确定如何开始。

这就是发生的事情。我的计算机以其计算机名称接入网络。我连接到我们的 TFS 服务器。上周帮助我入门的人在我的 c:\ 上创建了一个 Development 文件夹，然后将 TFS 中的文件夹结构映射到我的本地，以便我可以查看项目并执行所有这些操作。

然后 IT 不喜欢我自己在我的 Mac 分区上安装操作系统，并希望在机器上保持图像标准。所以他们在我的 Mac/bootcamp 分区上重新安装了所有东西。当我现在连接到 TFS 时，在一个窗口的顶部，它说：

```
Local Path: C:\Projects\myWorkProject 
```

为什么说因为有了这个新安装，我还没有映射项目。它似乎记得我的旧机器或工作区或其他东西，因为当我查看我的本地路径时，没有任何源代码或任何这些东西是有意义的，因为我实际上没有对这个新安装进行任何映射。

所以我的问题是，当 TFS 已经认为它已映射时，我如何映射项目？谢谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-10T22:25:08.823

TFS 工作区对您的用户名是唯一的，并且远程计算机名称和工作区信息同时存储在您的本地计算机*和*服务器上。

如果要删除现有工作区或更改映射，可以在源代码管理资源管理器中选择工作区菜单，然后选择工作区...以打开管理工作区对话框。

![管理工作区](../Images/d3ce448ab93656c50da9c9fc77445116.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-12T16:17:51.157

我遇到了这个问题并且删除了工作区项目。另外，我只想说，作为 CVS、SVN、Git 以及现在用于 .NET 项目的 TFS 的用户，微软似乎正在竭尽全力制作一些违反直觉的东西。

# visual-studio-2010 - 使用 afterbuild 任务将整个项目结构复制到另一个目录

> ID：15326113
> 
> 赞同：0
> 
> 时间：2013-03-10T18:50:18.447
> 
> 标签：visual-studio-2010, msbuild

我想使用`AfterBuild`目标将整个项目结构复制到一个单独的文件夹中。这是项目结构

```
TANKProject  
|
|__TANK.CLI
|__TANK.Core
|__TANK.Web 
```

我想将包括`bin`文件夹和`.sln`文件夹在内的整个项目结构复制到一个位置`B:\animesh\repos`。

为此，我将以下代码段放入`AfterBuild`每个`.csproj`文件的目标中：

```
<ItemGroup>
    <_CustomFiles Include="..\TANK.ProjectName\*.*" />
</ItemGroup>
<Copy
    SourceFiles="@(_CustomFiles)"
    DestinationFiles="B:\repos\TANK"
    SkipUnchangedFiles="true" /> 
```

构建项目时出现以下错误：

```
"DestinationFiles" refers to 3 item(s), and "SourceFiles" refers to 1 item(s). They must have the same number of items. 
```

我在这里想念什么？

* * *

## 解决方案

根据 AdrianMonk 的回答，我改变了我的`AfterBuild`配置，如下所示：

```
 <Target Name="AfterBuild">
    <ItemGroup>
      <_CustomFiles Include="..\**" />
    </ItemGroup>
    <Copy 
      SourceFiles="@(_CustomFiles)" 
      DestinationFiles="@(_CustomFiles->'B:\repos\TANK\%(RecursiveDir)%(Filename)%(Extension)')" 
      SkipUnchangedFiles="true" />
  </Target> 
```

我只将这个`AfterBuild`目标放在其中一个项目中，因为这样就足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:29:56.927

您需要指定`DestinationFolder`，而不是`DestinationFiles`：

```
<Copy
    SourceFiles="@(_CustomFiles)"
    DestinationFolder="B:\repos\TANK"
    SkipUnchangedFiles="true" /> 
```

但是，这只会从项目结构的根目录复制文件。要复制整个结构，包括子目录中的文件，您需要使用：

```
<Copy
    SourceFiles="@(_CustomFiles)"
    DestinationFiles="@(_CustomFiles->'B:\repos\TANK\%(RecursiveDir)%(Filename)%(Extension)')"
    SkipUnchangedFiles="true" /> 
```

这将对整个项目结构（也包括输出目录）进行递归复制。有关详细信息，请参阅[MSBuild Copy 任务参考文档](http://msdn.microsoft.com/en-us/library/3e54c37h.aspx)。

# c# - 使用 Hashset 的意外算术结果

> ID：15326116
> 
> 赞同：0
> 
> 时间：2013-03-10T18:50:25.857
> 
> 标签：c#

我正在生成三个整数序列，它们存储在名为`Triangle`, `Pentagon`,的哈希集中`Hexagon`。序列本身基于一个简单的算术公式并且是单调递增的。

在第三项之后，我还没有分析得到的哈希集`Triangle`，因为这就是问题开始的地方。

```
 public static long TriPentHex(int n)
    {

        HashSet<long> Triangle = new HashSet<long>();
        List<long> TriList = new List<long>();
        long temp = 0;
        for (int i = 1; i <= n; i++)
        {
            temp = (i * (i + 1)) / 2;
            Triangle.Add(temp);
            TriList.Add(temp);
        }
        HashSet<long> Pentagon = new HashSet<long>();
        for (int i = 1; i <= n; i++)
        {
            temp = i * (3 * i - 1) / 2;
            if (temp == 4128501)
                Debug.WriteLine(temp);
            Pentagon.Add(temp);
        }
        HashSet<long> Hexagon = new HashSet<long>();
        for (int i = 1; i <= n; i++)
            Hexagon.Add(i * (2 * i - 1));

        Triangle.IntersectWith(Pentagon);
        Triangle.IntersectWith(Hexagon);
        List<long> TriList2 = Triangle.ToList();
        temp = TriList2[2];     // excluding 1 and 40755
        return TriList.IndexOf(temp) + 1;

    } 
```

上面的代码显示了一些非常奇怪的算术行为：

1.  `n`在 500,000 和 1,000,000 之间切换输入会`Triangle`在交集方法之后更改哈希集中的第三项。为什么会发生这种情况是序列单调递增？
2.  奇怪的是，当 n = 1,000,000 时，in 的第三项`Triangle`更大（值 4128501），而当 n = 500,000 时，in 的第三项更大（值 4128501）。
3.  保持 n = 1,000,000，生成的哈希集`Triangle`包括 4128501，即使该值不可能在`Pentagon`哈希集中。
4.  在方法中捕获值 4128501 `Pentagon.Add`，我们看到它发生在 i = 56751。但是，如果要添加的值是 i*(3*i-1)/2，则很明显结果数应该大于4128501。然而，下面是立即窗口的直接输出：

    ```
    ?i
    567561
    ?i * (3*i-1)
    8257002
    ?i * (3*i-1)/2
    4128501 
    ```

5.  最后，当我使用 n = 1,000,000 时，我尝试调用其中之一`Pentagon.Max()`，`Triangle.Max()`或者`Hexagon.Max()`我收到以下消息：

    ```
     Hexagon.Max()  This expression causes side effects and will not be evaluate    long 
    ```

对于这个非常奇怪的问题，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:04:11.873

您的`HashSet`商店很长，但是您在循环体中使用整数进行计算，并且您开始很快产生溢出。

`i`将for 块从更改`int`为`long`，此方法在 n = 500,000 和 n = 1,000,000 时返回 1533776805。

# html - 为什么 CSS div 必须多出 30 个像素才能与其他像素相同？

> ID：15326117
> 
> 赞同：1
> 
> 时间：2013-03-10T18:50:26.007
> 
> 标签：html, css

**我的问题：**

CSS 必须在某个 div 上包含 30 个额外像素才能使其均匀，我想知道为什么。另外，我宁愿它是与其他两个 div 的偶数，而不是`x+30`.

**我的解决方案：**

我只是将 30 像素添加到第三个 div 以使其与其他 div 相同。

这是一个[jsFiddle](http://jsfiddle.net/E2JCm/)。

这是我正在谈论的三个 CSS：

```
.sidebar-top {
    float: left;
    border-top-right-radius: 12px;
    border-top-left-radius: 12px;
    border: 1px solid #ccc;
    height: 32px;
    width: 290px;
    background: -webkit-linear-gradient(top, white 0%,#E8E8E8 100%);
    background: linear-gradient(to bottom, white 0%,#E8E8E8 100%);
    padding: 4px 15px;
}
.sidebar-middle {
    float: left;
    width: 290px;
    padding: 5px 15px 0 15px;
    border-right: 1px solid #d3d3d3;
    border-left: 1px solid #d3d3d3;
    background: #fff;
}
.sidebar-bottom {
    background: #fff;
    float: left;
    height: 16px;
    width: 320px;
    border-bottom-right-radius: 12px;
    border-bottom-left-radius: 12px;
    border-right: 1px solid #d3d3d3;
    border-left: 1px solid #d3d3d3;
    border-bottom: 1px solid #d3d3d3;
    margin-bottom: 15px;
} 
```

**我的问题/tl;博士：**

为什么我需要添加 30 像素`.sidebar-bottom`才能使其与其他 div 一致？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T18:57:36.267

**简而言之，这是因为在每个`sidebar-top`, 和上添加了填充`sidebar-middle`。**

因为您在其他s 的`15px`两侧都有一个填充。`div`这就是为什么你必须添加`30px`.

只需将其添加到您的`sidebar-bottom`：

```
padding: 0px 15px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:00:46.300

对于您定义宽度为 290px 的两个上部 DIV 并在每侧放置 15px 的填充，框模型将 290px 视为元素的内部宽度。因此，向左和向右添加了 15px，这使得元素 320px 不是 290..第三个 DIV 是 290 像素，您没有放置任何填充。所以您需要将 30 像素添加到 290 像素。

这是 Box 模型的问题之一，您必须校准填充、边框以获得所需的尺寸。

一个解决方案是向第三个 DIV 添加填充。

```
.sidebar-bottom {
    background: #fff;
    float: left;
    height: 16px;
    width: 290px;
    border-bottom-right-radius: 12px;
    border-bottom-left-radius: 12px;
    border-right: 1px solid #d3d3d3;
    border-left: 1px solid #d3d3d3;
    border-bottom: 1px solid #d3d3d3;
    margin-bottom: 15px;
    padding-left: 15px;
    padding-right: 15px;
} 
```

[http://jsfiddle.net/mkhoudary/E2JCm/1/](http://jsfiddle.net/mkhoudary/E2JCm/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T17:21:23.047

```
.sidebar-top {
    width: 290px;
    padding: 4px 15px;
}

.sidebar-middle {
    width: 290px;
    padding: 5px 15px 0 15px;
}

    .sidebar-bottom {
        width: 320px;
        /*no padding for sidebar-bottom others having 
   width - 290px + 
   padding left 15px + 
   padding right 15px = totally 320px.To equate sidebar-bottom to match with other two divs you are giving width as 320px :)*/
} 
```

# android-ksoap2 - ksoap2-android 连接问题

> ID：15326118
> 
> 赞同：0
> 
> 时间：2013-03-10T18:50:38.770
> 
> 标签：android-ksoap2

所以我在尝试将 6 个变量发送到 Web 服务时遇到问题（[http://hydra.chorleywood.org/hydradevices/devicesmanagement.asmx](http://hydra.chorleywood.org/hydradevices/devicesmanagement.asmx)）

我在运行 4.2 API 17 的 android 中使用 ksoap2-android

每次我按下与之关联的按钮时，我的程序都会崩溃。我浏览了许多教程，并按照他们所做的那样做，但无论我是在 eclipse 中运行它还是导出并在我的手机上运行它，它都对我不起作用。

这是代码的相关部分

```
private static final String NAMESPACE = "http://hydra.chorleywood.org";
private static final String URL="http://hydra.chorleywood.org/hydradevices/devicesmanagement.asmx"; 
private static final String METHOD1_SOAP_ACTION_URL = "http://hydra.chorleywood.org/addNewDevice";
private static final String METHOD_NAME1 = "addNewDevice";

final Button status_button = (Button) findViewById(R.id.device_status);
status_button.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        // Perform action on click

        // setting my variables
        String EUI64 = "EHF7980HY3G793HG393GF737GH80G7";
        String HashCode = "MB2GPD";
        int DeviceTypeID = 528391;
        String subType = "Weighing Scales";
        String Manufacturer = "Samsung";
        String SerialNumber = "8476403967";

        // setting connectionas
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        envelope.dotNet = true;

        // setting informaiton to be sent
        request.addProperty("EUI64", EUI64);
        request.addProperty("HashCode", HashCode);
        request.addProperty("DeviceTypeID", DeviceTypeID);
        request.addProperty("subType", subType);
        request.addProperty("Manufacturer", Manufacturer);
        request.addProperty("SerialNumber", SerialNumber);

        // setting request to be sent out
        envelope.setOutputSoapObject(request);

            try
            {
            androidHttpTransport.call(METHOD1_SOAP_ACTION_URL, envelope);
            //java.lang.String receivedString = (String)envelope.getResponse();
            //java.lang.Boolean receivedBoolean = (Boolean)envelope.getResponse();
            Object result = envelope.getResponse();

            /**if(receivedBoolean = true) {
                Context context = getApplicationContext();
                CharSequence text = "testing toast";
                int duration = Toast.LENGTH_SHORT;

                Toast toast = Toast.makeText(context, text, duration);
                toast.show();
            }**/

            }

            catch(Exception e)
            {
            }
    } 
```

我已经在清单中设置了权限，我不确定到底出了什么问题，有人知道吗？

我尝试了不同的 API，但仍然无法正常工作。我非常感谢有关此主题的任何帮助，到目前为止，我已经投入了一周的时间，而我只是在兜圈子。

我已经从字面上复制粘贴了其他人的网络服务（我认为这是一个活动服务器）并尝试运行他们的确切代码，但这似乎也不起作用。也许这会帮助你找出我遇到的问题。

非常感谢，

查理

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-07T11:20:45.990

您需要将 Thread 用于高于 3.0 的 android 版本。试试[这个。](http://javatutorialspoint.blogspot.com/2012/02/android-web-service-access-using-ksoap2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T15:51:33.790

您正在尝试在**主**线程中访问**网络。**在这些情况下，Android 会抛出 NetworkOnMainThreadException。

 **请检查这个问题。[android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/6343166/android-os-networkonmainthreadexception)

您需要在单独的线程中访问网络。（[进程和线程](http://developer.android.com/guide/components/processes-and-threads.html)）**

# git - 如何让 git 忽略新目录中构建过程创建的文件？

> ID：15326119
> 
> 赞同：0
> 
> 时间：2013-03-10T18:50:48.113
> 
> 标签：git

我在 git 存储库中并创建了一个包含一些子目录和文件的新目录。构建后创建了一些文件（例如`module.ssysn`）。构建 git 后，要求我跟踪这些文件，即使在同一个 git 存储库中的其他目录中，它也不会要求我跟踪它们。我尝试了以下方法：

我使用过`git rm --cached module.ssysn`，`git update-index --assume-unchanged module.ssysn`但都失败了：

```
fatal: pathspec module.ssysn didn't match any files 
```

或者

```
fatal: unable to mark file module.ssysn 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T18:52:55.033

正如消息中未明确指出的那样，您的 git 存储库没有任何具有该名称的跟踪文件。

如果您希望存储库停止跟踪已添加的文件，则只需要这些命令。

# ios - 按下按钮时如何更改控制器，iOS？

> ID：15326120
> 
> 赞同：0
> 
> 时间：2013-03-10T18:50:51.867
> 
> 标签：ios, uiviewcontroller, delegates, navigation

我在我的 .xib 文件中放置了一个导航栏和一个栏按钮项。

我为我的按钮创建了一个动作，我连接了它，动作看起来像这样：

```
- (IBAction)AddAlert:(id)sender {

    self.addReminderViewController =[[AddReminderViewController alloc]initWithNibName:@"AddReminderViewController" bundle:nil];
    [self.navigationController pushViewController:addReminderViewController animated:YES];
} 
```

`AddReminderViewController`我要导航到的控制器在哪里。

我的 ViewController.h 看起来像这样：

```
#import <UIKit/UIKit.h>

@class AddReminderViewController;

@interface ViewController : UIViewController <UITableViewDelegate , UITableViewDataSource>

@property (strong, nonatomic) AddReminderViewController *addReminderViewController;

@property (strong,nonatomic) NSArray *listData;

- (IBAction)AddAlert:(id)sender;

@end 
```

我在哪里声明，`@class AddreminderViewController`以便我可以在那里导航，我在 .m 文件上合成属性。

但是，当我按下按钮时，什么也没有发生。它不会崩溃！它只是不引导我到任何地方。我应该对 AppDelegate 进行任何更改吗？我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:19:06.910

当您`self.addReminderViewController`用于初始化控制器但后来您在不使用 self 的情况下进行广告时，使用`self`确保对象保留计数设置正确。

在您的代码中

```
[self.navigationController pushViewController:addReminderViewController animated:YES]; 
```

尝试更改上面的行并添加 self `addReminderViewController`，它可能会解决您的问题

```
[self.navigationController pushViewController:self.addReminderViewController animated:YES]; 
```

# javascript - 将 html 附加到 D3 库中的 .text() 方法

> ID：15326124
> 
> 赞同：1
> 
> 时间：2013-03-10T18:51:18.187
> 
> 标签：javascript, d3.js

请帮助在 D3 库`< br/ >`中的方法中使用该标记。`.text()`这就是我目前所尝试的。显然它向我展示了简单的文本，甚至是 br 标签。

```
var text_box = g
    .selectAll(".text-box")
    .data(function(d) { return points.slice(2, d); })
    .enter()
    .append("text")
    .attr({
        "class": "text-box",
        "dx": x,
        "dy": y,
        "transform": "translate(" + 15 + "," + 5 + ")"
    })
    .text(function(d, i) { return count+" changed <br/> by @"+name}); 
```

我什至尝试附加`div`标签并使用`.html()`方法，但这也行不通。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:06:32.160

SVG`<text>`元素不直接支持换行符。从[规格](http://www.w3.org/TR/SVG/text.html#Introduction)：

> 每个“文本”元素都会导致呈现单个文本字符串。SVG 不执行自动换行或自动换行。要实现多行文本的效果，请使用以下方法之一：
> 
> *   作者或创作包需要预先计算换行符并使用多个“文本”元素（每行文本一个）。
> *   作者或创作包需要预先计算换行符并使用单个“text”元素和一个或多个“tspan”子元素，这些子元素的属性“x”、“y”、“dx”和“dy”具有适当的值为那些开始新行的字符设置新的开始位置。（这种方法允许用户在多行文本中选择文本——请参阅文本选择和剪贴板操作。）
> *   表达要在另一个 XML 名称空间中呈现的文本，例如嵌入在“foreignObject”元素中的 XHTML [XHTML]。（注意：此时此方法的确切语义尚未完全定义。）

我也不认为`<div>`元素在 SVG 中起作用。

第二种方法的一个例子在这里：http: [//jsfiddle.net/eVmsW/](http://jsfiddle.net/eVmsW/)

# exception - Visual Studio / 表达式 - RemoteException

> ID：15326131
> 
> 赞同：1
> 
> 时间：2013-03-10T18:51:51.073
> 
> 标签：exception, visual-studio-2012, geolocation, expression-blend

使用地理位置创建 WP7 项目时，VS2012 UI 设计器会抛出此错误：

```
Microsoft.Expression.DesignHost.Isolation.Remoting.RemoteException
Could not load file or assembly 'LocationService.Interop, Version=1.0.0.0, Culture=neutral, PublicKeyToken=24eec0d8c86cda1e' or one of its dependencies. System could not find the specified file.
   in System.Device.Location.GeoCoordinateWatcher.Dispose(Boolean disposing)
   in System.Device.Location.GeoCoordinateWatcher.Finalize() 
```

我在 Google 和 StackOverflow 上进行了搜索，没有发现任何有用的东西。如果我重新加载设计器，它会在 Visual Studio 2012 中工作一两分钟。但是，如果我尝试打开项目，Expression Blend 会立即崩溃。

这是我的一个页面的内容（但无论内容如何，​​它都会在每个页面中崩溃）：

```
<phone:PhoneApplicationPage 
x:Class="Dropi.MapView"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
FontFamily="{StaticResource PhoneFontFamilyNormal}"
FontSize="{StaticResource PhoneFontSizeNormal}"
Foreground="{StaticResource PhoneForegroundBrush}"
SupportedOrientations="Portrait" Orientation="Portrait"
mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="480"
shell:SystemTray.IsVisible="True" xmlns:my="clr-namespace:Microsoft.Phone.Controls.Maps;assembly=Microsoft.Phone.Controls.Maps" Loaded="onLoaded" Unloaded="onViewUnloaded">

<!--LayoutRoot is the root grid where all page content is placed-->
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>

    <!--TitlePanel contains the name of the application and page title-->
    <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28"></StackPanel>

    <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <my:Map Height="717" HorizontalAlignment="Left" Name="myMap" VerticalAlignment="Top" Width="450" CredentialsProvider="ApxwcCwErohOLVMieO3OPc0MrdT379URDUphvhbyR10udU9QmiYBK2urEPZZ1pl-" Mode="Road" ZoomBarVisibility="Visible" ZoomLevel="12"/>
    </Grid>
</Grid>

<!--Sample code showing usage of ApplicationBar-->
<!--<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
        <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
        <shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
            <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
        </shell:ApplicationBar.MenuItems>
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar>--> 
```

任何想法？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T13:26:59.483

我遇到过同样的问题。为了解决它，我只是做了这样的事情：

```
 if (!ViewModelBase.IsInDesignModeStatic)
 {
     _watcher = new GeoCoordinateWatcher(GeoPositionAccuracy.High) { MovementThreshold = 5 };
 } 
```

[更新] 这是 MVVM Light 解决方案。您可以通过检查 System.ComponentModel.DesignerProperties.IsInDesignTool 来检查您是否处于设计模式

# css - 为什么悬停时边框没有变化？

> ID：15326137
> 
> 赞同：0
> 
> 时间：2013-03-10T18:52:27.390
> 
> 标签：css, hover, border

这是我的代码：

```
<html>
<head>
<style type="text/css">
   p:hover{border:2px solid red;}
</style>
</head>
<body>
   <p style="border:2px solid green;">This is a paragraph.</p>
</body>
</html> 
```

我很困惑：为什么悬停时边框颜色没有变化？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T18:54:14.040

内联样式的优先级高于任何非`!important`. 所以解决办法就是把`p:hover`规则中的属性标记为重要：

```
p:hover {
    border:2px solid red !important;
} 
```

另一种选择是将初始样式也移动到`<style>`标签中。

```
p {
    border: 2px solid green;
}

p:hover {
    border: 2px solid red;
} 
```

[这](https://stackoverflow.com/a/1637380/298479)是对 CSS 优先级的 TL;DR 风格的解释，如果您更喜欢更长的时间，您还可以查看[CSS 规范的相关部分](http://www.w3.org/TR/CSS21/cascade.html#cascade)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T18:54:46.793

内联样式比单独的 CSS 部分具有更高的优先级

编辑：第二次*叹息*-只是有点太慢了。

这应该可行 - 据我所知`!important`，这不被认为是好的做法，所以我建议使用这种方法：

```
<style type="text/css">
p{border:2px solid green;}
p:hover{border:2px solid red;}
</style>
<body>
<p>foobar</p>
</body> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T19:10:13.990

如果您只能访问 CSS（例如，因为另一个部门拥有 HTML，或者它是通过另一种方法引入的），那么您必须使用`!important`. 使用`!important`绝对没问题，因为它的目的是对这种情况进行补救。它是“不好的做法”的想法是错误的（除非您使用它来懒惰您的 CSS 特异性）。

```
p:hover{border:2px solid red !important}

<body>
    <p style="border:2px solid green">foobar</p>
</body> 
```

浏览器没有内置的 CSS 声明，`p:hover`就像他们为 an 所做的那样`a:hover, a:active, a:visited`；因此，HTML 中的内联样式是唯一在运行时被识别的样式。除非......有一个`!important`可用`:hover`的风格。

# php - Laravel Eloquent 发现返回 null

> ID：15326140
> 
> 赞同：5
> 
> 时间：2013-03-10T18:52:35.313
> 
> 标签：php, mysql, laravel, eloquent

我正在尝试使用 Eloquents find 方法从我的数据库中检索记录，但是，它意外地返回 null。如果我在数据库上手动运行查询，那么它会返回预期的记录。

我在 Laravel 中使用以下内容：

```
$support = Support::find(02155); 
```

并直接在数据库上执行以下操作：

```
SELECT * FROM support WHERE id = 02155; 
```

主键列名为“id”，类型为 smallint(5)，无符号和 zerofill 以及自动增量集。根据 Laravel 应该执行的内容，我将上述“手动”查询基于 Laravel 文档。

没有报告任何错误（我可以看到），如果我将 Eloquent 方法更改为“全部”，那么所有记录都会正确返回。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-11T18:02:03.993

这是因为以 0 开头的数字被 PHP 视为八进制，根据： http: [//php.net/manual/en/language.types.integer.php](http://php.net/manual/en/language.types.integer.php)

似乎 PHP 在执行 MySQL 查询之前将数字转换为小数，这意味着查询的数字不正确。

例如：

```
Support::find(02155); 
```

变成：

```
'SELECT * FROM mytable WHERE id = 1133' 
```

## 解决方案

在将它与 Eloquents find 方法一起使用之前，我通过使用 (int) 将数字类型转换为整数来解决这个问题。如果您将数字作为字符串（即引号）传递，它也将起作用，如下所示：

```
Support::find('02155'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-08T11:09:09.987

可能还有另一个问题。

如果您在模型中使用软删除并使用 find 从数据库中查找记录，则可能会返回 null。要解决此问题，您可以从模型中删除软删除。

# paypal - 检查 txn_id 以防止欺诈

> ID：15326141
> 
> 赞同：0
> 
> 时间：2013-03-10T18:52:43.577
> 
> 标签：paypal, paypal-ipn

如果付款状态为“已验证”，那么我将检查 txn_id 是否存在（使用 sql），如果不存在，那么我将继续检查付款，但如果 txn_id 存在，它将不会继续。

为了防止欺诈，这种检查方法对 txn_id 是否正确？

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:00:35.507

不，这是为了确保您不会两次处理同一笔交易。单独检查 txn_id 是不够的。如果它不为 null，则必须检查元组 {txn_id，payment_status}，如果为 null，则可能必须检查 {parent_txn_id，payment_status} 或其他类似 subscr_id 的内容。

# c# - 在 System.Net.Http v4 中对使用 HttpClient 的类进行单元测试

> ID：15326143
> 
> 赞同：4
> 
> 时间：2013-03-10T18:52:46.473
> 
> 标签：c#, unit-testing, mocking

我想对下面使用 HttpClient 的 Search 类进行单元测试，

```
public class Search:ISearch{
HttpClient httpClient;
  public Search(HttpClient httpClient){
   this.httpClient = httpClient;
}
   //use httClient to send request.
} 
```

有没有办法模拟 HttpClient？我无法通过 Google 找到任何信息。

**更新**

发送可以模拟的 Http Web 请求是否有替代方法。我有以下代码：

```
 public class Search:ISearch{
private static readonly string url = "http://www.google.com/search";
public Result SendSearch(string query){
           string queryUrl = string.Format("{0}?q={1}", url, query);
           var webRequest = WebRequest.Create(queryUrl);
          ///...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-19T09:07:41.380

在 .Net 4.5 框架中，您可以执行此操作。

```
public class FakeHttpMessageHandler : HttpMessageHandler
{
    private HttpResponseMessage response;

    public FakeHttpMessageHandler(HttpResponseMessage response)
    {
        this.response = response;
    }

    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        var responseTask =  new TaskCompletionSource<HttpResponseMessage>();
        responseTask.SetResult(response);

        return responseTask.Task;
    }
}

[TestMethod]
public void TestGetContents()
{
    var responseMessage = new HttpResponseMessage();
    var messageHandler = new FakeHttpMessageHandler(responseMessage);
    var client = new HttpClient(messageHandler);
    var sut = new Search(client);

    sut.SendSearch("urQuery");

    // Asserts
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T19:20:21.827

你不能用像 Rhino-Mocks 这样的模拟框架来模拟它，因为为了做到这一点，你需要一个`interface`或`virtual methods`在`HttpClient`类上。模拟框架将为您创建一个模拟，它要么实现接口上定义的方法，要么覆盖虚拟类的方法。

因此，要么包装`HttpClient`类并让它实现一个接口，要么不要模拟它。

如果您将代码更改为以下内容：

```
public class Search:ISearch
{
    private static readonly string url = "http://www.google.com/search";
    private readonly IWebRequestCreator _generator;

    public Search(IWebRequestCreator generator)
    {
        _generator = generator;
    }

    public Result SendSearch(string query)
    {
        var queryUrl = string.Format("{0}?q={1}", url, query);
        var webRequest = _generator.Create(queryUrl);
        // ...
    }
} 
```

如果您创建一个实现的类，`IWebRequestCreator`那么您将能够模拟该功能。实现类只会调用`WebRequest.Create(queryUrl);`

# parsing - OCaml 中的文件转换

> ID：15326144
> 
> 赞同：2
> 
> 时间：2013-03-10T18:52:49.387
> 
> 标签：parsing, ocaml, text-parsing

我是一个几乎完整的 OCaml 新手，但有一些函数式编程知识。我正在寻找一种在两种规范模式之间进行转换的概念方法。

1 2 “tau1”
1 3 “h1”
2 1 “h1”

进入

1 tau1:2，h1:3；
2 h1:1；

这些文件通常要大得多。我想我可以使用记录类型并逐行读取输入文件，然后写入另一个文件。但是有没有更好的方法？喜欢使用 Ocamlyacc 或类似的东西进行解析和转换？还是别的什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T19:18:39.770

这一切都取决于您当前和未来的需求。

如果您认为您将有机会重用这些知识，请学习解析工具。

另一方面，您需要解析的文件格式似乎很简单，因此如果格式不发展，手动编写专门的解析器来处理这种格式会更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-25T14:48:28.587

您的数据看起来很简单，因此`Scanf.fscanf`可以解析一行。下面的代码读取一行并给出值的元组。

```
let ic = open_in "data.txt" in
  Scanf.fscanf "%d %d %s\n" (fun index value key -> (index, value, key)) 
```

格式规范类似于 C 的`scanf`. 如果要删除 in 中的双引号`key`，请替换`"%s"`into `"\"%[0-9a-aZ-Z]\""`。

仍然存在内存不足的问题，但解决方案可能在您的脑海中。

# jquery - 通过单击 mvc3 中的 Actionlink 显示 div

> ID：15326147
> 
> 赞同：0
> 
> 时间：2013-03-10T18:53:05.833
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3

我认为我有一个 Div

```
<div style="width:auto; display:none;" id="div11">
<form action="" method="post" enctype="multipart/form-data">
  <label for="file">Filename:</label>
  <input type="file" name="file" id="file"/>
  <input type="submit" value="Excel Upload" />
</form>
</div> 
```

另一个 Div 中的一个按钮和一个动作链接

```
<div style="text-align: left; margin-left: 20px; margin-right: 20px;">
        <%= Html.ActionLink("Test Link", "", "",null, new {id = "someID" }) %> 
        <button id="Button1">Click</button>
    </div> 
```

我想使用 jquery 在点击 actionlink 时显示 div

```
 <script type="text/javascript">
            jQuery(document).ready(function () {

                $("#Button1").click(function () {

                    debugger;
                    $("#div11").show();
                });

                $("#someID").click(function () {
                    debugger;
                    $("#div11").css("display", " ");
                    $("#div11").show();
                });

            });
</script>
    Here the button is working fine but don't know why actionlink not working ...Basically i want to show the div by clicking the actionlink................. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:10:16.593

您需要防止默认链接点击行为。您可以`preventDefault`为此使用功能。

下面的脚本将在按钮单击时显示 div。

```
$(function(){

  $("#SomeID").click(function(e){
    e.preventDefault();
    $("#div11").show();
  });

}); 
```

假设您的 Actionlink 语法是这样的。

```
@Html.ActionLink("test link","SomeAction","SomeController",
                                                        null,new {@id="SomeID"}) 
```

工作 jsfiddle 示例：http: [//jsfiddle.net/kuPau/1/](http://jsfiddle.net/kuPau/1/)

# windows - 使用 wix 在 msi 中嵌入手动输入

> ID：15326148
> 
> 赞同：1
> 
> 时间：2013-03-10T18:53:05.880
> 
> 标签：windows, wix, installation

我想在用户机器上安装一个期望一些用户输入的第三方可执行文件。为此，我想让安装静默。

有没有办法使用wix实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T23:57:53.803

最“正确”的方法是创建一个`Bundle`用于`Chain`安装`ExePackage`和您的`MsiPackage`. 您可以`ExePackage`通过`InstallCommand`属性控制对 的输入。该`InstallCommand`属性可以通过执行以下操作来使用`Variable`s `Bundle`：

```
<ExePackage InstallCommand="[MyVariable] -someswitch"
            DetectCondition="DetectedThirdPartyInstalled"
            SourceFile="path\to\thirdparty.exe" /> 
```

如果您确实必须尝试在 .msi 期间安装可执行文件，那么您需要使用 a`CustomAction`并且该`ExeCommand`属性可以传递参数。这看起来像：

```
<CustomAction FileKey="FileIdForThirdPartyExe" ExeCommand="[MyProperty] -someswitch" /> 
```

在 WiX.chm 中查看这些关键词以了解更多其他详细信息。

# php - php 表单和 onsubmit javascript 函数调用

> ID：15326149
> 
> 赞同：0
> 
> 时间：2013-03-10T18:53:06.920
> 
> 标签：php, javascript

我创建了一个在 PHP 中回显 html 的表单，并试图以相同的表单调用 Javascript 函数。我已经复制并粘贴了我在 php 文件顶部的 head 标签中放置的 js 部分。

```
<script>
    function validate(){
        alert("You need to enter the date in format dd-mm-yyyy");
    }
</script> 
```

此外，我在表格的开头有这个

```
echo "<form method=\"post\" action=\"index.php\" onsubmit=\"validate()\">
        <br>
        <span>Name: <input type=\"text\" name=\"name\" value=\"$name\"></span>" 
```

是否可以在同一个文档中从 php 调用 javascript？干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:45:26.460

你必须在php代码中尝试这个..

```
 echo "<script type='text/javascript'>
        function validate(){
         alert('You need to enter the date in format dd-mm-yyyy');
                        }
     </script>"; 
```

希望它对你有用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:18:33.763

为了争论，您尝试将脚本移动到页面底部？

```
echo ... validate()
...
<script>function validate()</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T19:51:37.930

你需要让你的函数在执行时可用。

```
window.onload = function() {
    function validate(){
        alert("You need to enter the date in format dd-mm-yyyy");
    }
}; 
```

# lucene - 用于在 Lucene 中提供搜索查询的索引文件的顺序是什么？

> ID：15326150
> 
> 赞同：0
> 
> 时间：2013-03-10T18:53:09.047
> 
> 标签：lucene, indexing

当针对 Lucene 进行搜索查询时，访问哪些文件（如[http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/fileformats.html](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/fileformats.html)中所述）以及访问顺序是什么？例如，一旦查询被标记为术语列表，使用什么文件将这些术语转换为命中列表（文档 ID）？一旦我们有了文档 ID，我们如何查找相关文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:40:47.320

典型的搜索需要来自以下文件的信息：

1.  术语字典以获取有关查询中术语的信息
2.  获取与查询匹配的文档 ID 的频率
    *   已删除的文档文件用于跳过已删除的文档
    *   规范文件用于对文档进行评分
    *   如果查询需要处理位置（例如短语查询），那么也会读取位置文件
3.  存储字段以获取热门点击的摘要结果
4.  术语向量以突出显示存储的字段内容

# css - 如何访问 GitHub 图标？

> ID：15326157
> 
> 赞同：4
> 
> 时间：2013-03-10T18:54:00.210
> 
> 标签：css, github, sass

我想使用[此处](https://github.com/styleguide/css/7.0)列出的 GitHub 图标。理想情况下，我想使用 GitHub 样式指南的图标类来插入图标。我在哪里可以获得这些图标的 GitHub`CSS`或样式表？`SCSS`

我在这些页面上的任何地方都没有看到下载链接...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:18:04.440

下载链接在黑条中，上面写着“7.1”。但是下载链接已损坏，因此我的建议是向 Github 发送一封请求新 URL 的邮件。

# r - 我应该如何将图例位置链接到 ggplot2 中的数据值？

> ID：15326158
> 
> 赞同：2
> 
> 时间：2013-03-10T18:54:06.623
> 
> 标签：r, ggplot2, legend

我想自动调整我的图例的垂直位置，以便图例最终接近数据。我希望图例的中心与图例描述的不同分组的中位数具有相同的垂直位置。或者，如果将图例居中在中位数上，则顶部对齐或底部对齐会导致图例延伸到 y 轴范围之外。

这对我来说是一个问题，因为我制作了数百个图表并且需要 y 轴来覆盖所有可能的值，即使数据通常是捆绑在一起的。非常感谢您的帮助 ：） ![在此处输入图像描述](../Images/9ef470ae55eabad6b26dcb21e8112c58.png)

这是我的数据和制作图表的代码：

```
mydf <- structure(list(date=structure(c(15573,15574,15575,15576,
15577,15578,15579,15580,15581,15582,15583,15573,15574,
15575,15576,15577,15578,15579,15580,15581,15582,15583,
15573,15574,15575,15576,15577,15578,15579,15580,15581,
15582,15583,15573,15574,15575,15576,15577,15578,15579,
15580,15581,15582,15583,15573,15574,15575,15576,15577,
15578,15579,15580,15581,15582,15583,15573,15574,15575,
15576,15577,15578,15579,15580,15581,15582,15583,15573,
15574,15575,15576,15577,15578,15579,15580,15581,15582,
15583,15573,15574,15575,15576,15577,15578,15579,15580,
15581,15582,15583,15573,15574,15575,15576,15577,15578,
15579,15580,15581,15582,15583),class="Date"),outcome=c(0.0564,
0.0539,0.0586,0.05,0.055,0.061,0.0507,0.0495,0.0609,0.0517,
0.0509,0.0326,0.028,0.0315,0.0286,0.0296,0.0281,0.036,
0.0352,0.026,0.0283,0.0324,0.0098,0.003,0.0039,0.0045,
0.0028,0.0087,0.0108,0.0091,0.0042,3e-04,0.0126,0.0199,
0.013,0.0144,0.0215,0.0193,0.0181,0.0255,0.0138,0.0166,
0.024,0.026,0.0511,0.0533,0.0497,0.0498,0.0087,0.0087,
0.0095,0.0124,0.0063,0.0125,0.0114,0.0097,0.0213,0.0242,
0.0205,0.0207,0.0207,0.0199,0.0199,0.0217,0.0193,0.0144,
0.0084,0.0046,0.0122,0.0116,0.006,0.0158,-0.0013,0.0114,
0.0028,0.0119,0.0125,0.0029,0.0069,0.0053,-0.0019,0.0086,
0.0071,0.0086,0.0063,0.0064,0.0125,0.0152,0.1306,0.1233,
0.1231,0.1185,0.1238,0.1205,0.1257,0.1242,0.1164,0.1248,
0.1147),outcome2=c(0.3564,0.3539,0.3586,0.35,0.355,0.361,
0.3507,0.3495,0.3609,0.3517,0.3509,0.3326,0.328,0.3315,
0.3286,0.3296,0.3281,0.336,0.3352,0.326,0.3283,0.3324,
0.3098,0.303,0.3039,0.3045,0.3028,0.3087,0.3108,0.3091,
0.3042,0.3003,0.3126,0.3199,0.313,0.3144,0.3215,0.3193,
0.3181,0.3255,0.3138,0.3166,0.324,0.326,0.3511,0.3533,
0.3497,0.3498,0.3087,0.3087,0.3095,0.3124,0.3063,0.3125,
0.3114,0.3097,0.3213,0.3242,0.3205,0.3207,0.3207,0.3199,
0.3199,0.3217,0.3193,0.3144,0.3084,0.3046,0.3122,0.3116,
0.306,0.3158,0.2987,0.3114,0.3028,0.3119,0.3125,0.3029,
0.3069,0.3053,0.2981,0.3086,0.3071,0.3086,0.3063,0.3064,
0.3125,0.3152,0.4306,0.4233,0.4231,0.4185,0.4238,0.4205,
0.4257,0.4242,0.4164,0.4248,0.4147),outcome3=c(0.8564,
0.8539,0.8586,0.85,0.855,0.861,0.8507,0.8495,0.8609,0.8517,
0.8509,0.8326,0.828,0.8315,0.8286,0.8296,0.8281,0.836,
0.8352,0.826,0.8283,0.8324,0.8098,0.803,0.8039,0.8045,
0.8028,0.8087,0.8108,0.8091,0.8042,0.8003,0.8126,0.8199,
0.813,0.8144,0.8215,0.8193,0.8181,0.8255,0.8138,0.8166,
0.824,0.826,0.8511,0.8533,0.8497,0.8498,0.8087,0.8087,
0.8095,0.8124,0.8063,0.8125,0.8114,0.8097,0.8213,0.8242,
0.8205,0.8207,0.8207,0.8199,0.8199,0.8217,0.8193,0.8144,
0.8084,0.8046,0.8122,0.8116,0.806,0.8158,0.7987,0.8114,
0.8028,0.8119,0.8125,0.8029,0.8069,0.8053,0.7981,0.8086,
0.8071,0.8086,0.8063,0.8064,0.8125,0.8152,0.9306,0.9233,
0.9231,0.9185,0.9238,0.9205,0.9257,0.9242,0.9164,0.9248,
0.9147),trial=c("C","C","C","C","C","C","C","C","C",
"C","C","B","B","B","B","B","B","B","B","B","B","B",
"F","F","F","F","F","F","F","F","F","F","F","E","E",
"E","E","E","E","E","E","E","E","E","H","H","H","H",
"H","H","H","H","H","H","H","I","I","I","I","I","I",
"I","I","I","I","I","G","G","G","G","G","G","G","G",
"G","G","G","D","D","D","D","D","D","D","D","D","D",
"D","A","A","A","A","A","A","A","A","A","A","A")),.Names=c("date",
"outcome","outcome2","outcome3","trial"),class="data.frame",row.names=c(94L,
95L,96L,97L,98L,99L,100L,101L,102L,103L,104L,359L,
360L,361L,362L,363L,364L,365L,366L,367L,368L,369L,624L,
625L,626L,627L,628L,629L,630L,631L,632L,633L,634L,889L,
890L,891L,892L,893L,894L,895L,896L,897L,898L,899L,1154L,
1155L,1156L,1157L,1158L,1159L,1160L,1161L,1162L,1163L,
1164L,1419L,1420L,1421L,1422L,1423L,1424L,1425L,1426L,
1427L,1428L,1429L,1684L,1685L,1686L,1687L,1688L,1689L,
1690L,1691L,1692L,1693L,1694L,1949L,1950L,1951L,1952L,
1953L,1954L,1955L,1956L,1957L,1958L,1959L,2214L,2215L,
2216L,2217L,2218L,2219L,2220L,2221L,2222L,2223L,2224L
))

ggplot(mydf, aes(x = date, y = outcome)) + 
       geom_line(aes(group = trial, color = trial, linetype = trial), 
       data=mydf,size=0.75) + 
       geom_text(data = mydf[mydf$date == max(mydf$date), ], 
       aes(x = date +(0.003 * nrow(mydf)), 
       y = outcome,label = sprintf("%0.1f%%", round(outcome,2) * 100)), 
       size = 4, colour = "grey50") + 
       scale_y_continuous(limits=c(0,1)) 
```

# angularjs - 在 angularJS 选择指令中设置所选项目

> ID：15326164
> 
> 赞同：20
> 
> 时间：2013-03-10T18:54:23.423
> 
> 标签：angularjs, angularjs-directive

我在 Angular 的选择指令中设置所选项目时遇到问题。我不知道这是 Angular 设计师的错误还是有意识的设计。它确实使 select 指令变得不那么有用了。

描述：

我的应用程序与 REST API 通信以从数据库接收实体。API 规定对象的关系仅使用 ID 属性发送，以便您可以在需要时在后续请求中检索它们。

例子：

```
{ id : 1, customerName : "some name", city : {id : 12}} 
```

其中 city 是另一个实体，可以使用城市 ID 通过不同的 REST 端点检索，如下所示：

```
{ id: 12, name : "New York"} 
```

我需要创建一个表单来编辑带有所有可能城市的下拉菜单的客户实体，以便用户可以从列表中选择合适的城市。该列表最初必须显示从 JSON 对象中检索到的客户城市。

表格如下所示：

```
 <form>
  <input type="text" ng-model="customer.name"/>
  <select ng-model="customer.city" ng-options="i as i.name for i in cities"></select>
 </form> 
```

控制器看起来像这样：

```
app.controller('MainCtrl', function ($scope, $http) {
    $http.get(serviceurl + 'admin/rest/customer/' + id + "/", {
        params: {"accept": "json"},
        withCredentials: true
    }).then(function (response) {
                $scope.customer = response.data.item;
            });
    $http.get(serviceurl + 'admin/rest/city/', {
        params: {"accept": "json"},
        withCredentials: true
    }).then(function (response) {
                $scope.cities = response.data.items;
                // THIS LINE LOADS THE ACTUAL DATA FROM JSON
                $scope.customer.city = $scope.findCity($scope.customer.city);
            });
    $scope.findCity = function (city) {
        for (var i = 0; i < $scope.cities.length; i++) {
            if ($scope.cities[i].id == city.id) {
                return $scope.cities[i];
            }
        }
    }
}); 
```

应该发生什么：一旦加载了 City 对象的全部详细信息，select 指令必须将加载的城市设置为列表中的选定项目。

会发生什么：列表显示一个空项目，如果所选项目来自项目数组之外的对象，则无法初始化所选项目。

此处问题的演示：[http://plnkr.co/edit/NavukDb34mjjnQOP4HE9 ?p=preview](http://plnkr.co/edit/NavukDb34mjjnQOP4HE9?p=preview)

有解决方案吗？是否可以以通用方式以编程方式设置所选项目，以便将 AJAX 调用和选择逻辑重构为可重用的基于 AJAX 的选择小部件？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-01-25T19:04:51.160

就这么简单

```
<select
    ng-model="item"
    ng-options="item.name for item in items track by item.name"> 
```

然后在你的控制器里面：

```
// all items
$scope.items = [{name: 'a'}, {name: 'b'}, {name: 'c'}];
// set the active one
$scope.item = {name: 'b'};
// or just
$scope.item = $scope.items[1] 
```

查看[http://docs.angularjs.org/api/ng.directive:select](http://docs.angularjs.org/api/ng.directive:select) 从那里：

> **trackexpr**：在处理对象数组时使用。此表达式的结果将用于识别数组中的对象。trackexpr 很可能会引用 value 变量（例如 value.propertyName）。

剩下的只是为变量分配一个值，角度将通过检查项目的属性`$scope.item`来确定应该将哪个元素设置为活动的。`name`

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-10T20:28:45.020

它不起作用的原因是 angular 期望对象引用是相等的。在您的情况下（您的 plnkr 中的“从对象中选择”）创建一个新对象，尽管具有相同的属性。但是，Angular 无法知道两个不同的对象代表同一个对象。您至少有两种方法：

**找到正确的城市对象实例**

与其设置`$scope.customer.city`为新对象，不如从`$scope.cities`数组中找到实际的城市对象。如果您使用的是[UnderscoreJs](http://underscorejs.org/#find)，您可以执行以下操作：

```
$scope.customer.city = _.find($scope.cities, function (city) {
    return city.id === theCustomersCity.id;
}); 
```

**绑定到城市 id 而不是城市对象**

另一种可能更简单的方法是更改`ng-model`​​ and`ng-options`指令以匹配 id 而不是 object。[请参阅此处](http://plnkr.co/edit/5ATiUWV7QauwZBwO8KOu?p=preview)的工作示例。

```
<select ng-model="customer.cityId" ng-options="i.id as i.name for i in cities"></select> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-06T12:18:14.037

我遇到了同样的问题。我的选项和建模数据都来自单独的 API 调用。

我没有通过在对象键上使用 ng-model 添加间接层，而是最终编写了一个使用“代理”变量的简单指令。

```
<select ng-model="customer.city" ng-options="i as i.name for i in cities"></select> 
```

变成

```
<select ng-model="customer_cityProxy" ng-options="i.name as i.name for i in cities"></select> 
```

在 customer.city 和 customer_cityProxy 上使用 $watch，我得到了预期的行为。

仍然有一些缺点，因为它仅在键不相交时才有效。

代码可在此处获得：[https ://github.com/gosusnp/options-proxy](https://github.com/gosusnp/options-proxy)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-31T10:19:00.253

看看[http://configit.github.io/ngyn/#select_extensions](http://configit.github.io/ngyn/#select_extensions)这个解决方案对我有用

# ruby - Ruby 中使用的保留字 BEGIN 或 END 是什么？

> ID：15326167
> 
> 赞同：23
> 
> 时间：2013-03-10T18:54:33.307
> 
> 标签：ruby, reserved-words

这是一个很难找到的词，因为在大多数情况下，它们在搜索过程中并不敏感。在文档之外我能找到的最好的方法是在 IRB 中进行测试。

```
 BEGIN{puts x = 10}
 10 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-10T19:03:18.507

由于所有[关键字](http://ruby-doc.org/docs/keywords/1.9/) `BEGIN`和`END`被记录为[公共实例方法`Object`](http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-BEGIN)（即使您不会看到它们从`Object.public_instance_methods`）返回

> **BEGIN**通过代码块指定在程序开始顺序执行之前无条件执行的代码。有时用于模拟对方法的前向引用。
> 
> ```
> puts times_3(gets.to_i)
> 
> BEGIN {
>   def times_3(n)
>     n * 3
>   end
> } 
> ```
> 
> **END**通过代码块指定要在程序终止之前执行的代码。
> 
> ```
> END { 
>   puts "Bye!" 
> } 
> ```

[Programming Ruby The Pragmatic Programmer's Guide](http://docs.ruby-doc.com/docs/ProgrammingRuby/)中的一些更详细的解释

> **BEGIN 和 END 块**
> 
> 每个 Ruby 源文件都可以声明要在文件加载时（BEGIN 块）和程序完成执行后（END 块）运行的代码块。
> 
> ```
> BEGIN {   
>   begin code 
> }
> 
> END {
>   end code 
> } 
> ```
> 
> 一个程序可能包含多个 BEGIN 和 END 块。BEGIN 块按照遇到的顺序执行。END 块以相反的顺序执行。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-10T20:03:56.720

没有提到的一件事是，在早期版本的 Ruby 中，`BEGIN`是无条件的：

```
if false
  BEGIN { puts "Up is down, hot is cold, good is evil!" }
end 
```

如果您在 Ruby 1.8.7 中尝试这样做，则会打印该句子，即使它位于`if`未采用的分支中。

`BEGIN`在 Ruby 2.0.0 下，在顶层之外使用是一个语法错误（一种更聪明的处理方法）：

```
unconditional.rb:2: BEGIN is permitted only at toplevel
  BEGIN { puts "Up is down, hot is cold, good is evil!" }
       ^ 
```

**编辑**：在某种程度上，没有人回答您在评论中提出的问题：为什么 Ruby 有`BEGIN`？我会尽力。[从Perl](http://perldoc.perl.org/perlmod.html#BEGIN%2c-UNITCHECK%2c-CHECK%2c-INIT-and-END)`BEGIN`来到 Ruby（就像很多东西一样）。Perl 有它，因为它存在于. 这很有意义，因为默认情况下，文件由一系列模式和操作组成：[`awk`](http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_52.html)`awk``awk`

```
/foo/ { print $1 }
/bar/ { print $2 } 
```

对每一行检查每个模式。如果模式匹配，则执行操作。否则，`awk`继续下一个模式。因此，在上面的迷你脚本中，如果该行匹配 'foo'，则打印第一个字段。如果该行与“bar”匹配，则打印第二个字段。

但是现在您可以看到`BEGIN`(and ) 块填补的空白：如果您想在测试任何输入*之前*或*在*`END`看到所有输入之后无条件地做某事（例如在报告顶部打印标题或打印报告末尾的一排总计）？模式+动作的正常线条无法帮助您。**`awk`**

 **这就是为什么`BEGIN`和`END`存在。但我不确定它们对于现代、惯用的 Ruby 脚本有多大用处。但正如 dbenhur 在评论中指出的那样，您仍然可以很好地将 Ruby 用于类似`awk`的单行代码。（我还记得标准的 Ruby 测试库 MiniTest 曾经使用`at_exit`函数进行测试，但我不确定它是否会不再使用。）

`awk`关于 Ruby和 Ruby one-liners 的两个很好的链接：

*   [Ryan Tomayko 的 AWK-ward Ruby](http://tomayko.com/writings/awkward-ruby)
*   [红宝石单线](http://benoithamelin.tumblr.com/ruby1line)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-10T19:03:44.110

来自*[Ruby 编程语言：](http://phrogz.net/ProgrammingRuby/language.html)*

* * *

### `BEGIN`和`END`块

每个 Ruby 源文件都可以声明要在文件加载（`BEGIN`块）和程序完成执行后（`END`块）运行的代码块。

```
BEGIN {
  # begin code
} 
END {
  # end code
} 
```

一个程序可能包括多个`BEGIN`和`END`块。`BEGIN`块按照遇到的顺序执行。`END`块以相反的顺序执行。

* * *

所以：

```
$ cat beginend.rb
END { puts :end }
BEGIN { puts :begin }
END { puts :end2 }
BEGIN { puts :begin2 }

puts :run
$ ruby beginend.rb 
begin
begin2
run
end2
end 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-10T19:03:43.263

BEGIN 块正是您可能假设的，即给定的块将在程序中的其余代码之前运行。

这是一个例子。

```
puts "Goodbye cruel world!"

BEGIN {
puts "Hello World!"
} 
```

我希望这会有所帮助。

在 minitest 中有一个[工作示例](https://bitbucket.org/kotp/learnrubybytesting/src/fe63826fc2aa500ccdc0396ced5a1ca4ba4eb230/test/core_ruby_string_spec.rb?at=master#cl-119)，其中一组值被放在文件末尾，但首先评估。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-16T01:40:23.217

使用 -e 选项处理流时，BEGIN/END 非常方便。例如，汇总一个数字文件：

```
cat <<EOF > numbers
1
5 
10
20
EOF

cat numbers | ruby -ane 'BEGIN { $t=0}; END {puts $t}; $t += $_.to_i' 
```

注意 BEGIN 如何将全局归零，而 END 打印结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-06T14:12:08.093

BEGIN 和 END 也用于注释，例如：

```
=begin
This is a comment line
It can explain what the rest of the program is about
This was inspired from the perl style of programming
=end 
```

您可以在这里查看相同的内容：[https ://en.wikipedia.org/wiki/Comparison_of_programming_languages_(syntax)#Comments](https://en.wikipedia.org/wiki/Comparison_of_programming_languages_(syntax)#Comments)**

# java - 断线后重连串口

> ID：15326175
> 
> 赞同：0
> 
> 时间：2013-03-10T18:55:15.150
> 
> 标签：java, serial-port, arduino, jfreechart

嘿，我正在做一个程序，我在其中读取串行数据并将其显示在图表上。我的 java 项目中有两个文件：一个负责图形显示，另一个仅用于串行处理。该程序的要求之一是让我的 arduino 发送数据断开连接，在图表上显示一条消息，重新连接 arduino，然后让该消息消失并在没有用户交互的情况下再次发送数据。我在下面有我的串行文件。我不确定如何编辑它以查看它已与 PC 断开连接，然后在没有人工交互的情况下重新连接。谢谢

```
public class SerialTest implements SerialPortEventListener {
SerialPort serialPort;
private static final String PORT_NAMES[] = { 

        "COM11", // Windows
};
String turnon = "X";
String inputLine;
String temp;
String temp1;
String thirdDC;
static boolean deviceConn;

int value = 0;
int count;
String stop = "STOP";
String y = "Y";
String z = "Z";
String pop;
Double x;
int n;
int working;
private BufferedReader input;
/** The output stream to the port */
OutputStream output;
/** Milliseconds to block while waiting for port open */
private static final int TIME_OUT = 2000;
/** Default bits per second for COM port. */
private static final int DATA_RATE = 9600;

public void initialize() {
    working = 1;
    CommPortIdentifier portId = null;
    Enumeration portEnum = CommPortIdentifier.getPortIdentifiers();
    while (portEnum.hasMoreElements()) {
        CommPortIdentifier currPortId = (CommPortIdentifier) portEnum.nextElement();
        for (String portName : PORT_NAMES) {
            if (currPortId.getName().equals(portName)) {
                portId = currPortId;
                break;
            }
        }
    }
    if (portId == null) {
        thirdDC = "Could not find COM Port. Error";
        System.out.println(thirdDC);

        return;
    }

    try {

        serialPort = (SerialPort) portId.open(this.getClass().getName(),
                TIME_OUT);

        serialPort.setSerialPortParams(DATA_RATE,
                SerialPort.DATABITS_8,
                SerialPort.STOPBITS_1,
                SerialPort.PARITY_NONE);

        input = new BufferedReader(new InputStreamReader(serialPort.getInputStream()));
        output = serialPort.getOutputStream();

        serialPort.addEventListener(this);
        serialPort.notifyOnDataAvailable(true);

    } catch (Exception e) {
        System.err.println(e.toString() + "BLAHHHHH");
    }
}

public synchronized void close() {
    if (serialPort != null) {
        serialPort.removeEventListener();
        serialPort.close();
    }
}

public synchronized void serialEvent(SerialPortEvent oEvent) {
    String stop = "ERROR";
    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
        deviceConn = true;
        try {

            inputLine=input.readLine();
            if (inputLine.equals(y)){
                System.out.println(y);
                temp1 = "OFF";
                value = 0;
            }
            if (inputLine.equals(z)){
                System.out.println(z);
                temp1 = "ON";
                value = 0;
            }
            if (inputLine.equals(stop)){
                System.out.println(stop);
                temp = "ERROR";
                value = 1;  
            }

            x = Double.parseDouble(inputLine);
            if (x > 0){
            temp = inputLine;
            System.out.println(x);
            value = 0;
            }

        } catch (Exception e) {                             
        }
    }           
    }

public static void main(String[] args) throws Exception {
    Thread t=new Thread() {
        public void run() {
            try {
                Thread.sleep(1000);
        } 
            catch (InterruptedException ie) {}
        }
    };
    t.start();
    System.out.println("Started");
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:49:31.537

看看这个使用套接字的客户端/服务器实现[示例](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)和这个简单的客户端服务器聊天程序也使用[套接字](http://pirate.shu.edu/~wachsmut/Teaching/CSAS2214/Virtual/Lectures/chat-client-server.html)。

将您的`SerialPortEventListener`放在服务器站点上，将图表放在客户端。您将需要异步通信，服务器将消息广播给所有客户端，而不是使用双向通信。

使用两个单独的主类实现您的解决方案，您将能够随意停止和重新启动 eitehr 部分。

# javascript - 动态内容加载后扩展列表不移动页脚

> ID：15326176
> 
> 赞同：1
> 
> 时间：2013-03-10T18:55:15.997
> 
> 标签：javascript, jquery, html, css

我之前问过一个类似的问题并且修复工作，但是它现在由于某种原因停止工作。本质上，我正在开发一个网站，您可以在此处找到[样式](http://drue.co.uk/1site/js/scripts.js)[表](http://drue.co.uk/1site/index.html)以及[此处](http://drue.co.uk/1site/style.css)的 javascript 文件。

您会注意到，最初在索引页面上并展开元素时，页脚/容器的高度会相应修改，但是当您使用左侧栏导航到不同的页面并返回顶级页面时，在展开元素，页脚/容器不会被修改并保持静态。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:25:03.103

只是一个想法，不知道为什么，但这似乎源于您链接到主页的方式：

[http://drue.co.uk/1site/index.html](http://drue.co.uk/1site/index.html) - 作品

[http://drue.co.uk/1site/index.html#index.html](http://drue.co.uk/1site/index.html#index.html) - 不起作用

ajax 页面加载的 hashbang 方法通常被认为是不好的做法，因此我建议您查看[历史 api](http://diveintohtml5.info/history.html)并查看您是否遇到相同的问题，或者只是直接从其他页面链接到主页，而这将导致整个页面重新渲染，页面相对较小（加载时大约 250kb）所以这应该不是一个大问题（大部分主页可能已经被浏览器缓存）

编辑：

出于某种原因，当通过第二个 url 导航到页面时，`div`ID 为`inside`

```
<div id="inside" style="height: 367px;"> 
```

似乎这已合并到您的 JS 中以用于 ajax 页面加载（页面加载后，div 的高度可能已设置，因此页面显示正确）

我建议从您的 JavaScript 中删除它并在内部 div 上使用一些 for of clearfix，例如使用`overflow: hidden`或任何数量的[其他方法](http://css-tricks.com/snippets/css/clear-fix/)

# c# - Windows phone 7：如何从服务器接收标头响应

> ID：15326179
> 
> 赞同：0
> 
> 时间：2013-03-10T18:55:34.897
> 
> 标签：c#, windows-phone-7

我是编程初学者。我想接收并显示响应标头，我尝试过[http://msdn.microsoft.com/ru-ru/library/system.net.httpwebresponse.headers.aspx](http://msdn.microsoft.com/ru-ru/library/system.net.httpwebresponse.headers.aspx) - 它有效。如何在 Windows phone 7 Silverlight 中接收和显示（例如到文本框）标题？你能帮我写代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:00:25.837

您可以通过以下方式显示它们：

```
var str = string.Empty;    
for(int i=0; i < myHttpWebResponse.Headers.Count; ++i)
{  
   str+= string.Format("\nHeader Name:{0}, Value :{1}",myHttpWebResponse.Headers.Keys[i],myHttpWebResponse.Headers[i]);    
}
MessageBox.Show(str); 
```

无论如何，为了测试我会使用调试器。

[MessageBox](http://dotnet.dzone.com/articles/delivering-message-using)的一些方法。

# python - 如何从python中的数组中随机选择html标签制作一棵树？

> ID：15326183
> 
> 赞同：0
> 
> 时间：2013-03-10T18:55:58.713
> 
> 标签：python, html, xml, python-2.7, tree

我是 python 新手。我有 xml 文件作为我的 python 脚本“html.xml”的输入。我制作了一个包含 html 标签的数组：

```
from xml.etree import ElementTree
tree = ElementTree.parse("html.xml")
olp = tree.findall("//tag_Name")
mylist = [t.text for t in olp]
print mylist 
```

输出是：

```
[' !--...-- ', ' !DOCTYPE ', ' a ', ' abbr ', ' acronym ', ' address ', ' applet
 ', ' area ', ' article ', ' aside ', ' audio ', ' b ', ' base ', ' basefont ',
' bdi ', ' bdo ', ' big ', ' blockquote ', ' body ', ' br ', ' button ', ' canva
s ', ' caption ', ' center ', ' cite ', ' code ', ' col ', ' colgroup ', ' comma
nd ', ' datalist ', ' dd ', ' del ', ' details ', ' dfn ', ' dialog ', ' dir ',
' div ', ' dl ', ' dt ', ' em ', ' embed ', ' fieldset ', ' figcaption ', ' figu
re ', ' font ', ' footer ', ' form ', ' frame ', ' frameset ', ' h1 to h6 ', ' h
ead ', ' header ', ' hgroup ', ' hr ', ' html ', ' i ', ' iframe ', ' img ', ' i
nput ', ' ins ', ' kbd ', ' keygen ', ' label ', ' legend ', ' li ', ' link ', '
 map ', ' mark ', ' menu ', ' meta ', ' meter ', ' nav ', ' noframes ', ' noscri
pt ', ' object ', ' ol ', ' optgroup ', ' option ', ' output ', ' p ', ' param '
, ' pre ', ' progress ', ' q ', ' rp ', ' rt ', ' ruby ', ' s ', ' samp ', ' scr
ipt ', ' section ', ' select ', ' small ', ' source ', ' span ', ' strike ', ' s
trong ', ' style ', ' sub ', ' summary ', ' sup ', ' table ', ' tbody ', ' td ',
 ' textarea ', ' tfoot ', ' th ', ' thead ', ' time ', ' title ', ' tr ', ' trac
k ', ' tt ', ' u ', ' ul ', ' var ', ' video ', ' wbr '] 
```

从上面的数组中，我想随机选择一些标签并想要制作一棵树，例如：（例如）根节点 'abbr' 与子节点 'a' 和 'option'

'a' 与子节点 'video' 和 'title'

带有子节点“输出”和“源”的“选项”......

基本上从树中，我想生成html页面。

谁能告诉我我该怎么做？python中的代码应该是什么？我正在使用 python 2.7

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:59:17.177

看看[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)，它可能会做你想要的。文档非常好。

[BeautifulSoup 也做 XML](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#id11)。

如果您真的想要从该列表中伪随机选择标签（为什么？），那么您需要这样做：

```
import random

a_random_tag = random.choice(list_of_tags) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:38:58.763

如果您有兴趣从解析的数据在 python 中创建树，您可以使用自动生存：

> Autovivification 是许多涉及动态创建数据结构的编程语言的显着特征。

```
from collections import defaultdict

def tree():
    return defaultdict(tree)

lupin = tree()
lupin["express"][3] = "stand and deliver" 
```

[https://en.wikipedia.org/wiki/Autovivification](https://en.wikipedia.org/wiki/Autovivification)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T19:26:15.740

要从 python 中的 mylist 中随机选择标签，您可以执行此循环

```
import random

while len(mylist) > 0:
    idx = random.randint(1,len(mylist))-1
    tag = mylist[idx]

    # this next line is critical or the loop will never exit
    del mylist[idx]  # this removes it from the list

   ... do whatever you want with tag (add to your tree, create a new node, etc)... 
```

还有其他方法，但这应该可以让您继续前进，您可以从那里优化它

# c++ - 在 Go 方法中按值传递“this”是否会降低性能？

> ID：15326185
> 
> 赞同：5
> 
> 时间：2013-03-10T18:56:01.683
> 
> 标签：c++, go

经过 9 年的 C++ 开发，我正在探索 Go。在 C++ 中，通过值传递函数的参数是一种不好的做法，除了内置类型的变量之外，因为性能损失：参数的所有字段都将被复制，并且在大多数情况下，这将是一个非常昂贵的操作。

这对 Go 来说是真的吗？仅通过值传递“this”以将“const”语义分配给方法看起来非常昂贵。Go 编译器是否足够聪明，可以防止在第一次修改之前复制变量？为什么不像在 C/C++ 中那样在 Go 中按值传递“this”是一种反模式？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T23:07:49.180

其他答案很好，但在我看来，缺少一些信息。

Go 中的接收器只是语法糖，如以下[代码](http://play.golang.org/p/NtwQpZu580)所示：

```
package main

import "fmt"

type Something struct {
    Value int
}

func (s *Something) ChangeValue(n int) {
    s.Value = n
}

func main() {
    o := new(Something)             // o is of type *Something
    fmt.Println(o.Value)            // Prints 0
    o.ChangeValue(8)                // Changes o.Value to 8
    fmt.Println(o.Value)            // Prints 8
    (*Something).ChangeValue(o, 16) // Same as calling o.ChangeValue(16)
    fmt.Println(o.Value)            // Prints 16
} 
```

基于此，考虑如果接收者`ChangeValue`是一个类型的值`Something`而不是指向一个的指针会发生什么......

这是正确的！您永远无法通过这种方法真正改变`o`' 的`Value`字段。大多数时候，您使用指针接收器来进行封装。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-10T19:10:02.707

Go 中的“this”称为[接收器](http://golang.org/ref/spec#Method_declarations)。是的，仅使用非指针接收器来模拟“const”语义可能非常昂贵。但是 Go 出于充分的理由放弃了“const”修饰符。因此，以不必要的复制为代价来接管特定的语言设计决策可能不是一个好主意——在任何大于几个机器字的情况下。

顺便说一句，“this”或“self”和“receiver”之间的术语差异意味着它也具有不同的语义。IIRC，不能在其他一些语言中更改“this”或“self”的值，但在 Go 中，接收器只是另一个函数参数（实际上从编译器的角度来看是第一个）。

也就是说，这就是我不鼓励编写接收器变量名为`this`or的方法的原因`self`。对于习惯于其他语言的人来说，这是一种误导。

一个完全虚构的例子，希望能说明这个想法：

```
func (n *node) walk(f func(*node)) {
        for n != nil {
                f(n)
                n = n.next
        }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-10T19:21:37.773

我想说你的 C++ 知识可以很好地转化为 Go 语言，了解作为函数参数（按值传递结构）和非函数参数（内置类型，例如 int）是昂贵的。

主要区别在于引用类型、切片、`map`s 和`channel`s。尽管它们看起来是按值传递的（您不需要使用指针），但它们实际上是通过引用传递的，因此通常不要使用指向切片、映射或通道的指针。

`string`s 也很特殊——它们是底层的引用类型，但它们也是不可变的，所以直接传递它们。

至于`this`在 Go 中调用的接收器或接收器的特定情况 - 适用相同的规则（请注意，与 C++ 不同，您可以将内置类型作为接收器），而且我认为编译器不够聪明，无法避免复制，所以对大型结构使用指针。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-11T15:54:45.683

这取决于接收器的大小。如果接收器少于几十个字节，复制它实际上可能比传递指针时所需的指针追逐（额外的内存访问）便宜。此外，使用指针使得结构更有可能在堆上分配，给垃圾收集器带来额外的负担。

在 Go 中，副本始终是逐字节的副本，因此成本仅取决于结构的大小。在 C++ 中，它可能会调用复制构造函数，这可能会花费大量时间。

因此，除了非常大的对象外，只要根据方法的语义和与 API 其余部分的一致性，使用最有意义的任何接收器即可。

# c++ - 如何从父指针调用子方法？

> ID：15326186
> 
> 赞同：15
> 
> 时间：2013-03-10T18:56:02.867
> 
> 标签：c++, inheritance, polymorphism

我有一个基类和一个扩展它的子类。子类有自己的方法，而父类没有。也就是说，在基类中将其声明为虚拟并不是一个真正的选择。

```
class A {
  public:
    virtual void helloWorld();
};

class B : public A {
  public:
    virtual void helloWorld();
    void myNewMethod();
}; 
```

然后，在我的实现中，我有一个指向 A 的指针，并将其构造为 B：

```
// somewhere in a .cpp file
A* x;
x = new B();
x->myNewMethod(); // doesn't work 
```

我目前的解决方案是强制转换它：

```
((B *)x)->myNewMethod(); 
```

我的问题是，有没有一种更清洁的方式来做到这一点，或者正在寻找要走的路？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-10T18:58:06.230

> 我的问题是，有没有一种更清洁的方式来做到这一点，或者正在寻找要走的路？

在这种情况下，运行时强制转换似乎没问题。但是，您应该使用而不是 C 风格的强制转换`dynamic_cast<>`（以防您不确定是否`x`实际指向 类型的对象`B`）：

```
B* pB = dynamic_cast<B*>(x); // This will return nullptr if x does not point
                             // to an object of type B
if (pB != nullptr)
{
    pB->myNewMethod();
} 
```

另一方面，如果你确定它`x`指向一个类型的对象`B`，那么你应该使用`static_cast<>`：

```
B* pB = static_cast<B*>(x);
pB->myNewMethod(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T18:57:14.980

`A`没有定义任何方法调用`myNewMethod()`，因此它不能调用它。

尽管我通常强烈反对强制转换，但这里确实**强制转换是唯一的方法**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-08T18:59:06.540

好吧，您必须进行转换，但您可以通过将丑陋的转换语法隐藏在函数中来使代码看起来更清晰/更具可读性。

```
B* B_static_cast(A* item)
{
     return static_cast<B*>(item);
}

A* item = new B();
B_static_cast(item)->funtion_in_B(); 
```

# perl - 如何从具有 2 个引用的数组哈希中删除重复值

> ID：15326195
> 
> 赞同：0
> 
> 时间：2013-03-10T18:57:20.270
> 
> 标签：perl

我有一个数组散列的散列。哈希的键是`$duration`和`$attr`。我想降序排序`$b <=> $a`并仅删除那些具有相同持续时间的重复值。在片段中，这些应该是流：

`'h264/AVC, 1080p24 /1.001 (16:9)' & 'AC3, English, multi-channel, 48kHz'` 具有持续时间`'26'`但不是具有 $duration `'2124'`&的重复值`'115'`。

删除重复项的示例不计其数，我已经尝试了所有可以找到的方法来满足我的需要，但没有成功。我的解决方案应该是什么方法。谢谢。

```
my ( %recordings_by_dur_attr ) = ();

push( @{ $recordings_by_dur_attr{ $duration }{ $attr } }, @stream );

print Data::Dumper->Dump( [\%recordings_by_dur_attr] ); 
```

结果：

```
$VAR1 = {
      '2124' => {
                  '00300.mpls, 00-35-24' => [
                                              '',
                                              'h264/AVC, 480i60 /1.001 (16:9)',
                                              'AC3, English, stereo, 48kHz'
                                            ]
                },
      '50' => {
                00021.mpls, 00-00-50' => [
                                            '',
                                            'h264/AVC, 1080p24 /1.001 (16:9)',
                                            'AC3, English, multi-channel, 48kHz'
                                          ]
              },
      '6528' => {
                  '00800.mpls, 01-48-48' => [
                                              '',
                                              'Chapters, 18 chapters',
                                              'h264/AVC, 1080p24 /1.001 (16:9)',
                                              'DTS, Japanese, stereo, 48kHz',
                                              'DTS Master Audio, English, stereo, 48kHz',
                                              'DTS, French, stereo, 48kHz',
                                              'DTS, Italian, stereo, 48kHz',
                                              'DTS, German, stereo, 48kHz',
                                              'DTS, Spanish, stereo, 48kHz',
                                              'DTS, Portuguese, stereo, 48kHz',
                                              'DTS, Spanish, stereo, 48kHz',
                                              'DTS, Russian, stereo, 48kHz'
                                            ]
                },
      '26' => {
                '01103.mpls, 00-00-26' => [
                                            '',
                                            'h264/AVC, 1080p24 /1.001 (16:9)',
                                            'AC3, English, multi-channel, 48kHz'
                                          ],
                '01102.mpls, 00-00-26' => [
                                            '',
                                            'h264/AVC, 1080p24 /1.001 (16:9)',
                                            'AC3, English, multi-channel, 48kHz'
                                          ],
                '00011.mpls, 00-00-26' => [
                                            '',
                                            'h264/AVC, 1080p24 /1.001 (16:9)',
                                            'AC3, English, multi-channel, 48kHz'
                                          ]
              },
      '115' => {
                 '00304.mpls, 00-01-55' => [
                                             '',
                                             'h264/AVC, 480i60 /1.001 (16:9)',
                                             'AC3, English, stereo, 48kHz'
                                           ]
               }
    }; 
```

重复结构

```
 '',
'h264/AVC, 1080p24 /1.001 (16:9)',
'AC3, English, multi-channel, 48kHz' 
```

删除重复结构的想要结果：

```
$VAR1 = {
      '2124' => {
                  '00300.mpls, 00-35-24' => [
                                              '',
                                              'h264/AVC, 480i60 /1.001 (16:9)',
                                              'AC3, English, stereo, 48kHz'
                                            ]
                },
      '50' => {
                00021.mpls, 00-00-50' => [
                                            '',
                                            'h264/AVC, 1080p24 /1.001 (16:9)',
                                            'AC3, English, multi-channel, 48kHz'
                                          ]
              },
      '6528' => {
                  '00800.mpls, 01-48-48' => [
                                              '',
                                              'Chapters, 18 chapters',
                                              'h264/AVC, 1080p24 /1.001 (16:9)',
                                              'DTS, Japanese, stereo, 48kHz',
                                              'DTS Master Audio, English, stereo, 48kHz',
                                              'DTS, French, stereo, 48kHz',
                                              'DTS, Italian, stereo, 48kHz',
                                              'DTS, German, stereo, 48kHz',
                                              'DTS, Spanish, stereo, 48kHz',
                                              'DTS, Portuguese, stereo, 48kHz',
                                              'DTS, Spanish, stereo, 48kHz',
                                              'DTS, Russian, stereo, 48kHz'
                                            ]
                },
      '26' => {
                '00011.mpls, 00-00-26' => [
                                            '',
                                            'h264/AVC, 1080p24 /1.001 (16:9)',
                                            'AC3, English, multi-channel, 48kHz'
                                          ]
              },
      '115' => {
                 '00304.mpls, 00-01-55' => [
                                             '',
                                             'h264/AVC, 480i60 /1.001 (16:9)',
                                             'AC3, English, stereo, 48kHz'
                                           ]
               }
    }; 
```

后期处理

```
for my $duration ( sort { $b <=> $a } keys %recordings_by_dur_attr ) {
   for my $attr ( keys $recordings_by_dur_attr{ $duration }  ) {

       #Remove duplicate structures

        my @stream = @{ $recordings_by_dur_attr{ $duration }{ $attr } };
        my ( $mpls, $hms ) = ( $attr =~ /(\d+\.mpls), (\d+-\d+-\d+)$/ );
        for ( my $i = 1;  $i < @stream; $i++ ) {

        #extract info from each stream

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:35:42.443

该表达式`$seen{$candidate}++`对于查找重复项很有用。当它返回true时，`$candidate`之前已经看到了。它最常用如下：

```
my @uniq = grep !$seen{$_}++, @list; 
```

我没有构建要保留的元素键列表，而是反转条件以构建要删除的元素键列表。

```
sub id { pack 'N/(N/a*)', @{ $_[0] } }

for my $recordings_by_attr (values(%recordings_by_dur_attr)) {
   my %seen;
   delete @{$recordings_by_attr}{
       grep $seen{id($recordings_by_attr->{$_})}++,
        sort
         keys %$recordings_by_attr
   };
} 
```

`sort`决定删除哪些重复项。如果你不在乎哪个，你可以删除`sort`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:29:16.067

脚步：

```
 1\. Traverse the hash.
    2\. if ref $key eq "ARRAY"
       then 
       1\. my `@temp = uniq(@{$hash->{$key}})`;
       2\. $var = undef;
       3\. $var = \@temp;
       Else
       1\. Traverse the hash.
    3\. Else
       1\. next; 
```

# java - 测量第三方软件速度\执行时间

> ID：15326200
> 
> 赞同：0
> 
> 时间：2013-03-10T18:57:48.363
> 
> 标签：java, windows, performance, time

我写了一个执行算法的函数。我已经完成了 4 种不同的类型，并且比较它们的执行时间（在 java 中）没有问题。但是，我想将我的算法与三个现有的第三方实现进行比较。当然，由于它们是封闭源代码，这并不完全可能。但是，我的应用程序有一个带有按钮的 gui 来显示命令，然后是一个带有结果的弹出窗口。（尽管这些不是算法的一部分，但出于我的目的，比较从单击执行\运行到结果显示在屏幕上的时间就足够了。）

我只是想知道比较这些不同方法的速度的最佳实践。我必须做点什么，所以如果我想不出任何东西，我想我会使用秒表，但是，更复杂的方法显然更可取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:02:01.220

您可以记录调用第三方方法的时间，并显示当前时间与记录时间的差异。这将为您提供几乎准确的时间。
你可以`System.currentTimeMillis()`像下面这样使用：

```
long start=System.currentTimeMillis();
//Call the thrd prty method
syso("Time taken:"+(System.currentTimeMillis()-start)); 
```

# string - 是否存在与 unicode 字符串等效的 ContainsStr？

> ID：15326201
> 
> 赞同：2
> 
> 时间：2013-03-10T18:57:55.100
> 
> 标签：string, delphi, unicode, delphi-2009

今天我在我们的代码中修复了一些警告，其中之一是函数中的“ *W1058 Implicit string cast with potential data loss from 'string' to 'AnsiString'”*。`ContainsStr`

在搜索了一段时间后，我决定在这里询问此函数的等效函数，该函数将两个 unicode 字符串作为参数。我希望找到类似`ContainsWideStr`（对于 Delphi 2007 及更低版本）或`ContainsUnicodeStr`（对于 Delphi 2009+）的东西，但我找不到任何这些。

我知道我可以自己做这样的事情：

```
function ContainsUnicodeStr(const AText, ASubText: String): Boolean;
begin
  Result := Pos(ASubText, AText) > 0;
end; 
```

但是，我想避免重复已经在 Delphi 中的代码，但我根本不知道在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:13:26.527

根据文档，[`StrUtils.ContainsStr`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.StrUtils.ContainsStr)使用 Unicode。但当然[`AnsiStrings.ContainsStr`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.AnsiStrings.ContainsStr)不是。

# html - 在我的 xhtml 页面的 y 轴上需要一个滚动条

> ID：15326202
> 
> 赞同：0
> 
> 时间：2013-03-10T18:57:56.897
> 
> 标签：html, jsf, xhtml, richfaces

任何答案将不胜感激......我有 historyPopUp.xhtml 页面。我必须在其中显示超过 100 行。此页面正在从数据库中获取其值。所以它走出了它的区域。如何在此页面中添加滚动？请帮忙

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:a4j="http://richfaces.org/a4j">
   <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link type="text/css" rel="stylesheet" href="../css/global.css" />
   </head>
  <body>
<div class="windowContents">
<fieldset>
    <a4j:form style="width: 700px; height: 500px" ajaxSubmit="true" 
      id="historyPopUp">
    <h:outputText style="font-weight:bold" value="#
            {dataEntryAction.selectedAddress.originalAddress}"/>
        <ui:repeat value="#{dataEntryAction.hdiGdvHistoryList}" 
           var="address">
            <br />
            <br />
            <table border="0" style="font-size: 12px; width: 100%;">
                <col class="boldedStyle" align="right" valign="top"
                style="width: 170px;" />
                <col valign="top" />
                <tr>
                    <td><h:outputText style="float: left; 
     padding-right: 10px; padding-top: 10px;" class="boldedStyle" value="#
      {address.dateCreated}"/></td>
                </tr>

                <tr>
                    <td><h:outputText style="float: left; 
    padding-right: 10px; padding-top: 10px;" value="#{address.messageHistory}"/></td>
                </tr>
            </table>
        </ui:repeat>
        <br />
        <h:panelGroup rendered="#{!addressesAction.approved}">
            <span 
                     onclick="javascript:Richfaces.hideModalPanel('editedHistoryDetailPanel');document.getElementById('dataEnrtyContainer:dataEnrtyTable:inputMDBI').focus();">
                <img src="../images/buttons/ok.gif" alt="okay" />
            </span>
        </h:panelGroup>
    </a4j:form>
</fieldset>
</div>
</body>
</html>

global.css 
```

这是CSS

```
 body {
overflow-x: hidden;
border-bottom: 5px solid #c65606;
}

    body,p {
font: 11px Arial, Helvetica, sans-serif;
color: #111111;
margin: 0px;
padding: 0px;
   }

   p.underlined {
border-bottom: 1px solid #bfbfbf;
padding-bottom: 2px;
margin-bottom: 3px;
    }

     h4 {
color: #362263;
margin: 45px 40px 10px 0px;
padding: 0px;
     }

     h4.pageTitle {
font-size: 48px;
font-weight: normal;
      }

     h1 {
color: #362263;
margin: 0px 0px 10px 0px;
padding: 0px;
     }

     h1.pageTitle {
font-size: 48px;
font-weight: normal;
     }

     h1.boxOrange {
color: #ffffff;
text-transform: uppercase;
background: url(../images/box_orange_bg.gif) no-repeat;
font-size: 14px;
padding: 6px 10px 18px 10px;
margin: 0px;
    }

    h2 {
color: #c65606;
font-size: 12px;
margin: 0px 0px 6px 0px;
padding: 0px;
     }

      h5 {
color: #c65606;
font-size: 12px;
margin: 0px 0px 6px 0px;
padding: 0px;
width: 100px;
    }

    h3 {
margin: 0px;
padding: 0px;
text-transform: uppercase;
font-size: 12px;
    }

    img.logo {
margin: 8px 0px 10px 0px;
float: left;
width: 200px;
height: 68px
     }

    a img {
border: none;
       }

     a {
color: #c65606;
     }

     .selectDisabled {
width: 55px;
border: none;
background: #FFFFFF;
color: #000000;
padding: 3px;
   }

     .mainContainer {
margin-right: 30px;
margin-left: 30px;
overflow-x: hidden;
        }

    .header .navigation {
float: right;
       }

    .header .navigation ul {
margin: 0px;
padding: 0px;
    }

     .header .navigation ul li {
list-style: none;
margin: 0px 0px 0px 10px;
padding: 40px 9px 10px 9px;
background: #c65606;
float: left;
     }

    .header .navigation ul li a {
color: #ffffff;
text-decoration: none;
text-transform: uppercase;
font-weight: bold;
   }

  .pageBody {
margin-top: -10px;
    }

    .pageBody .selections {
margin-bottom: 50px;
     }

     .pageBody .selections .subCol {
width: 100px;
margin-right: 20px;
float: left;
      }

   .pageBody .selections .subCol select {
width: 55px;
border: none;
background: #c65606;
color: #ffffff;
padding: 3px;
     }

     .pageBody .dataTable {
position: relative;
margin-top: -30px;
margin-bottom: 50px;
     }

     .pageBody .dataTable .frameContainer {
border: 1px solid #431d02;
margin: 0px;
padding: 0px;
width: 99%;
     }

  .pageBody .dataTable .frameContainer .scroll {
height: 300px;
overflow-y: scroll;
overflow-x: hidden;
scrollbar-base-color: #c65606;
scrollbar-arrow-color: #ffffff;
scrollbar-DarkShadow-Color: #252525;
      }

    .pageBody .dataTable .frameContainer .scroll table {
width: 98.3%;
text-align: left;
     }

   .pageBody .dataTable .frameContainer .scroll table tr.head {
background: #c65606;
     }

    .pageBody .dataTable .frameContainer .scroll table tr.alt {
background: #fff8c9;
      }

   .pageBody .dataTable .frameContainer .scroll table tr td .miniScroll {
height: 155px;
overflow-y: scroll;
padding: 2px 5px;
     }

   .pageBody .dataTable .frameContainer .scroll table tr.head th {
padding: 10px 8px;
color: #ffffff;
     }

   .pageBody .dataTable .frameContainer .scroll table td {
vertical-align: top;
padding: 8px;
border-bottom: 1px solid #bfbfbf;
border-right: 1px solid #bfbfbf;
     }

    .pageBody .dataTable .frameContainer .scroll table td td {
border: none;
padding: 0px;
       }

    .pageBody .dataTable .frameContainer .scroll table.small th {
font-size: 11px;
       }

   .pageBody .dataTable .frameContainer .scroll table.small td,.pageBody .dataTable 
   .frameContainer .scroll table.small td p,.pageBody .dataTable .frameContainer 
   .scroll table.small input
{
font-size: 10px;
     }

    .pageBody .dataTable .frameContainer .scroll table.small input {
margin: 0px;
padding: 0px;
     }

   .pageBody .buttons {
position: relative;
margin-top: -50px;
padding-bottom: 20px;
     }

   .pageBody .dataTable .frameContainer .scroll table td.center {
vertical-align: middle;
      }

     .pageBody .dataTable .frameContainer .scroll table tr td.noPadding {
padding: 0px;
      }

      .pageBody .col1 {
float: left;
width: 246px;
      }

    .pageBody .col2 {
float: left;
width: 246px;
margin-left: 45px;
     }

         .pageBody .col3 {
float: left;
width: 246px;
margin-left: 45px;
      }

      .pageBody .contents {
padding: 0px 10px 60px 10px;
       }

     input.short {
font: 10px Arial, Helvetica, sans-serif;
width: 25px;
padding: 0px;
     }

      input.impact {
font: 10px Arial, Helvetica, sans-serif;
width: 125px;
padding: 0px;
       }

   .closerBar {
background: #c65606;
width: 100%;
    }

    .pageBody .dataTable .frameContainer .scroll1 {
height: 300px;
overflow-y: scroll;
overflow-x: hidden;
scrollbar-base-color: #c65606;
scrollbar-arrow-color: #ffffff;
scrollbar-DarkShadow-Color: #252525;
     }

    .pageBody .dataTable .frameContainer .scroll1 table {
width: 98.3%;
text-align: left;
     }

     .pageBody .dataTable .frameContainer .scroll1 table tr.head {
background: #c65606;
      }

   .pageBody .dataTable .frameContainer .scroll1 table tr.alt {
background: #fff8c9;
      }

   .pageBody .dataTable .frameContainer .scroll1 table tr td .miniScroll {
height: 155px;
overflow-y: scroll;
padding: 2px 5px;
     }

    .pageBody .dataTable .frameContainer .scroll1 table tr.head th {
padding: 10px 8px;
color: #ffffff;
    }

   .pageBody .dataTable .frameContainer .scroll1 table td {
vertical-align: top;
padding: 4px;
border-bottom: 1px solid #bfbfbf;
border-right: 1px solid #bfbfbf;
    }

  .pageBody .dataTable .frameContainer .scroll1 table td td {
border: none;
padding: 0px;
     }

    .pageBody .dataTable .frameContainer .scroll1 table.small th {
font-size: 11px;
    }

   .pageBody .dataTable .frameContainer .scroll1 table.small td,.pageBody .dataTable
    .frameContainer .scroll table.small td p,.pageBody .dataTable .frameContainer 
     .scroll table.small input
{
font-size: 10px;
    }

    .pageBody .dataTable .frameContainer .scroll1 table.small input {
margin: 0px;
padding: 0px;
      }

   .pageBody .buttons {
padding-bottom: 0px;
    }

   .pageBody .buttons img {
margin-right: 15px;
     }

    .pageBody .dataTable .frameContainer .scroll1 table td.center {
vertical-align: middle;
         }

    .pageBody .dataTable .frameContainer .scroll1 table tr td.noPadding {
padding: 0px;
     }

   .pageBody .dataTable .frameContainer .scroll2 {
height: 350px;
width: 1060px;
overflow-y: scroll;
overflow-x: scroll;
scrollbar-base-color: #c65606;
scrollbar-arrow-color: #ffffff;
scrollbar-DarkShadow-Color: #252525;
    }

  .pageBody .dataTable .frameContainer .scroll2 table {
width: 98.3%;
text-align: left;
     }

    .pageBody .dataTable .frameContainer .scroll2 table tr.head {
background: #c65606;
     }

   .pageBody .dataTable .frameContainer .scroll2 table tr.alt {
background: #fff8c9;
      }

   .pageBody .dataTable .frameContainer .scroll2 table tr td .miniScroll {
height: 155px;
overflow-y: scroll;
padding: 2px 5px;
    }

   .pageBody .dataTable .frameContainer .scroll2 table tr.head th {
padding: 10px 8px;
color: #ffffff;
    }

    .pageBody .dataTable .frameContainer .scroll2 table td {
vertical-align: top;
padding: 4px;
border-bottom: 1px solid #bfbfbf;
border-right: 1px solid #bfbfbf;
font-size: 12px;
     }

   .pageBody .dataTable .frameContainer .scroll2 table td td {
border: none;
padding: 0px;
     }

    .pageBody .dataTable .frameContainer .scroll2 table.small th {
font-size: 11px;
     }

  .pageBody .dataTable .frameContainer .scroll2 table.small td,.pageBody .dataTable 
   .frameContainer .scroll table.small td p,.pageBody .dataTable .frameContainer 
     .scroll       table.small input
{
font-size: 10px;
    }

  .pageBody .dataTable .frameContainer .scroll2 table.small input {
margin: 0px;
padding: 0px;
     }

   .pageBody .buttons {
padding-bottom: 20px;
     }

    .pageBody .buttons img {
margin-right: 15px;
       }

    .pageBody .dataTable .frameContainer .scroll1 table td.center {
vertical-align: middle;
     }

     .pageBody .dataTable .frameContainer .scroll1 table tr td.noPadding {
padding: 0px;
        }

    .pageBody .dataTable .frameContainer .scroll3 {
height: 30px;
overflow-y: none;
overflow-x: none;
scrollbar-base-color: #c65606;
scrollbar-arrow-color: #ffffff;
scrollbar-DarkShadow-Color: #252525;
    }

    .pageBody .dataTable .frameContainer .scroll3 table {
width: 100%;
text-align: left;
     }

   .pageBody .dataTable .frameContainer .scroll3 table tr.head {
background: #c65606;
    }

   .pageBody .dataTable .frameContainer .scroll3 table tr.alt {
background: #fff8c9;
    }

  .pageBody .dataTable .frameContainer .scroll3 table tr td .miniScroll {
height: 30px;
overflow-y: scroll;
padding: 2px 5px;
     }

   .pageBody .dataTable .frameContainer .scroll3 table tr.head th {
padding: 10px 8px;
color: #ffffff;
    }

    .pageBody .dataTable .frameContainer .scroll3 table td {
vertical-align: top;
padding: 4px;
border-bottom: 1px solid #bfbfbf;
border-right: 1px solid #bfbfbf;
    }

   .pageBody .dataTable .frameContainer .scroll3 table td td {
border: none;
padding: 0px;
    }

   .pageBody .dataTable .frameContainer .scroll3 table.small th {
font-size: 11px;
     }

   .pageBody .dataTable .frameContainer .scroll3 table.small td,.pageBody .dataTable 
   .frameContainer .scroll table.small td p,.pageBody .dataTable .frameContainer 
    .scroll table.small input
{
font-size: 10px;
    }

  .pageBody .dataTable .frameContainer .scroll3 table.small input {
margin: 0px;
padding: 0px;
     }

    .pageBody .buttons {
padding-bottom: 0px;
            }

   .pageBody .buttons img {
margin-right: 15px;
     }

    .pageBody .dataTable .frameContainer .scroll3 table td.center {
vertical-align: middle;
      }

    .pageBody .dataTable .frameContainer .scroll3 table tr td.noPadding {
padding: 0px;
      }

    .pageBody .selections {
margin-bottom: 50px;
width: 950px;
   }

    .pageBody .selections .subCol {
width: 130px;
margin-right: 20px;
float: left;
     }

    .pageBody .selections .subCol select {
width: 115px;
border: none;
background: #c65606;
color: #ffffff;
padding: 3px;
     }

    .pageBody .dataTable {
margin-bottom: 50px;
     }

 .pageBody .dataTable .frameContainer {
border: 1px solid #431d02;
margin: 0px;
padding: 0px;
width: 99%;
   }

   .pageBody .dataTable .frameContainer .scroll4 {
height: 222px;
overflow-y: none;
overflow-x: hidden;
scrollbar-base-color: #c65606;
scrollbar-arrow-color: #ffffff;
scrollbar-DarkShadow-Color: #252525;
     }

       .pageBody .dataTable .frameContainer .scroll4 table {
width: 100%;
text-align: left;
      }

     .pageBody .dataTable .frameContainer .scroll4 table tr.head {
background: #c65606;
        }

      .pageBody .dataTable .frameContainer .scroll4 table tr.alt {
background: #fff8c9;
      }

   .pageBody .dataTable .frameContainer .scroll4 table tr td .miniScroll {
height: 155px;
overflow-y: scroll;
padding: 2px 5px;
     }

   .pageBody .dataTable .frameContainer .scroll4 table tr.head th {
padding: 10px 8px;
color: #ffffff;
      }

    .pageBody .dataTable .frameContainer .scroll4 table td {
vertical-align: top;
padding: 8px;
border-bottom: 1px solid #bfbfbf;
border-right: 1px solid #bfbfbf;
     }

   .pageBody .dataTable .frameContainer .scroll4 table td td {
border: none;
padding: 0px;
    }

    .pageBody .dataTable .frameContainer .scroll4 table.small th {
font-size: 11px;
     }

  .pageBody .dataTable .frameContainer .scroll4 table.small td,.pageBody .dataTable 
  .frameContainer .scroll table.small td p,.pageBody .dataTable .frameContainer .scroll
    table.small input
{
font-size: 10px;
     }

   .pageBody .dataTable .frameContainer .scroll4 table.small input {
margin: 0px;
padding: 0px;
      }

     .pageBody .buttons {
padding-bottom: 20px;
           }

       .pageBody .buttons img {
margin-right: 15px;
         }

    .pageBody .dataTable .frameContainer .scroll4 table td.center {
vertical-align: middle;
         }

      .pageBody .dataTable .frameContainer .scroll4 table tr td.noPadding {
padding: 0px;
      }

   .pageBody .dataTable .frameContainer .scrollv {
width: 1825px;
height: 225px;
overflow-y: scroll;
overflow-x: hidden;
scrollbar-base-color: #c65606;
scrollbar-arrow-color: #ffffff;
scrollbar-DarkShadow-Color: #252525;
     }

    .pageBody .dataTable .frameContainer .scrollv table {
text-align: left;
     }

   .pageBody .dataTable .frameContainer .scrollv table tr.head {
background: #c65606;
    }

    .pageBody .dataTable .frameContainer .scrollv table tr.alt {
background: #fff8c9;
     }

   .pageBody .dataTable .frameContainer .scrollv table tr td .miniScroll {
height: 155px;
overflow-y: scroll;
padding: 2px 5px;
     }

  .pageBody .dataTable .frameContainer .scrollv table tr.head th {
padding: 10px 8px;
color: #ffffff;
    }

  .pageBody .dataTable .frameContainer .scrollv table td {
vertical-align: top;
padding: 4px;
border-bottom: 1px solid #bfbfbf;
border-right: 1px solid #bfbfbf;
   }

   .pageBody .dataTable .frameContainer .scrollv table td td {
border: none;
padding: 0px;
      }

   .pageBody .dataTable .frameContainer .scrollv table.small th {
font-size: 11px;
   }

  .pageBody .dataTable .frameContainer .scrollv table.small td,.pageBody .dataTable  
   .frameContainer .scroll table.small td p,.pageBody .dataTable .frameContainer 
   .scroll table.small input
{
font-size: 10px;
    }

  .pageBody .dataTable .frameContainer .scrollv table.small input {
margin: 0px;
padding: 0px;
     }

    .underline {
text-decoration: underline;
      }

   .assgnHead {
background-color: #c65606;
     }

   .homepagelink,a {
font-weight: bold;
color: #000000;
font-size: 12px;
text-decoration: underline;
     }

    .homepagelink,a:hover {
font-weight: bold;
color: #000000;
font-size: 12px;
text-decoration: underline;
     }

  .homepagelink {
font-weight: bold;
color: #000000;
font-size: 12px;
text-decoration: none;
   }

  .disabledLink {
font-weight: bold;
color: #CCCCC0;
font-size: 12px;
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:11:14.063

CSS overflow-y 样式是您所需要的。如果你设置

```
overflow-y:scroll; 
```

在您要滚动的 div 上，然后它将垂直滚动。在您的示例中，我认为这是“windowContents” div，因此将其更改为：

```
<div class="windowContents" style="overflow-y:scroll;"> 
```

示例中有很多 CSS 样式。您可能希望简化它以调试此问题。像我上面所做的那样直接在 HTML 中的 div 标记上设置样式将覆盖样式表中的任何其他溢出-y 样式并帮助您隔离问题。

# python - 用正则表达式解析和弦

> ID：15326204
> 
> 赞同：1
> 
> 时间：2013-03-10T18:58:05.170
> 
> 标签：python, parsing

我想在 python 中使用正则表达式解析和弦名称。下面的代码只匹配像 G#m 这样的和弦

```
chord_regex = "(?P<chord>[A-G])(?P<accidental>#|b)?(?P<additional>m?)" 
```

我如何才能将和弦与形状 Gm# 匹配？是否可以更改上述正则表达式以匹配这些类型的和弦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T00:03:38.367

您应该使用`{m,n}`语法来指定组`m=0`的`n=2`匹配项（其中所述组是偶然的或附加的），如下所示：

```
>>> import re
>>> regex = "(?P<chord>[A-G])((?P<accidental>#|b)|(?P<additional>m)){0,2}"
>>> re.match(regex, "Gm").groupdict()
{'chord': 'G', 'additional': 'm', 'accidental': None}
>>> re.match(regex, "G").groupdict()
{'chord': 'G', 'additional': None, 'accidental': None}
>>> re.match(regex, "G#m").groupdict()
{'chord': 'G', 'additional': 'm', 'accidental': '#'}
>>> re.match(regex, "Gm#").groupdict()
{'chord': 'G', 'additional': 'm', 'accidental': '#'} 
```

# java - 为什么 java 和 c 中增量运算符的行为不同

> ID：15326217
> 
> 赞同：1
> 
> 时间：2013-03-10T18:59:51.240
> 
> 标签：java, c, post-increment

在 c 中：

```
int a = 33;
a = a++;
printf("\n\t a :%d",a); // it'll print 34 
```

在 Java 中：

```
int a = 33;
a = a++;
System.out.printf("\n\t a :%d",a); // it'll print 33 
```

为什么后增量在 C 中可以正常工作，而在 Java 中为什么不行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:02:18.567

好问题。

`a++`和之间有区别`++a`。在Java中（至少），每个都会增加变量，但是表达式表示的值是不同的。

```
int i = 0;
System.out.println(i++); // 0

int j = 0;
System.out.println(++j); // 1 
```

因此，您将递增`a`1，然后*将其设置回原始值*。

来自[Java 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op1.html)：

> 递增/递减运算符可以在操作数之前（前缀）或之后（后缀）应用。代码结果++；和++结果；都将导致结果加一。唯一的区别是前缀版本 (++result) 计算为递增值，而后缀版本 (result++) 计算为原始值。如果您只是执行简单的递增/递减，那么您选择哪个版本并不重要。但是，如果您在较大表达式的一部分中使用此运算符，则您选择的那个可能会产生显着差异。

# javascript - 隐藏的 div 不会在点击时显示 - Javascript，没有 Jquery

> ID：15326218
> 
> 赞同：0
> 
> 时间：2013-03-10T18:59:54.700
> 
> 标签：javascript, html, button, hide

就像我的描述说的那样。

[小提琴](http://jsfiddle.net/PDP5Z/1/)

```
<div id="step2" class="question">
    <p>Step two:</p>
    <div id="resultOne" class="script">
        <p>"Test Yes!</p>
    </div>
    <div id="resultTwo" class="script">
        <p>"Test No"</p>
    </div>
</div> 
```

上面的 div 没有响应按钮点击。似乎甚至没有调用相应的 JS 函数。

我知道这可能是一个小的语法错误，但我一辈子都找不到它。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:06:01.523

我无法让它在小提琴中工作，它说 nextStep 功能不可用。但是这个 nextStep 的定义应该有效：

```
function nextStep(divShow, divHide, divReveal) {
    var show = document.getElementById(divShow);
    var hide = document.getElementById(divHide);
    var reveal = document.getElementById(divReveal);
    show.style.display = "inline-block";
    hide.style.display = "none";
    if (reveal.style.display == "none") 
        reveal.style.display = "block";
} 
```

并将您的按钮更改为：

```
<button type="button" onclick="javascript:nextStep('resultOne', 'resultTwo', 'step2')">Yes</button>
<button type="button" onclick="javascript:nextStep('resultTwo', 'resultOne', 'step2')">No</button> 
```

请注意，“在 getElementById 调用中绕过了参数？您试图获取的是名为 divShow 的元素，而不是变量内容所引用的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:06:07.700

似乎没有调用该函数，因为 jsfiddle 将您的 javascript 包装在一个匿名函数中，该函数在窗口加载时执行。这意味着您声明的函数的范围仅在该函数内。

相反，请尝试将其作为全局函数附加

```
window.nextStep = function (divShow, divHide, divReveal) {
    var show = document.getElementById(divShow);
    var hide = document.getElementById(divHide);
    var reveal = document.getElementById(divReveal);
    show.style.display = "inline-block";
    hide.style.display = "none";
    if (reveal.style.display == "none") 
        reveal.style.display = "block";
} 
```

# ffmpeg - FFmpeg 进行不必要的复用

> ID：15326219
> 
> 赞同：1
> 
> 时间：2013-03-10T18:59:58.160
> 
> 标签：ffmpeg, h.264, codec, aac, video-conversion

我正在编写一个脚本，该脚本将 MKV 或 AVI 等视频文件更改为 MP4，然后从网络流媒体中准备它们。我希望我的输出使用 H.264 和 AAC 编解码器。

到目前为止，我的命令如下所示：

```
ffmpeg -i input.mkv -vcodec h264 -acodec aac -ab 128k -ac 2 -strict -2 output.mp4 
```

但是，当编解码器已经是 h.264 时，它仍然会对其进行多路复用，它会显示：(h264 -> libx264)。

如果我用'-vcodec copy'替换'-vcodec h264'，当编解码器是H.264时它会快得多，但如果输入文件中有不同的编解码器，当然不会更改编解码器。

FFmpeg 有没有办法识别编解码器几乎相同，因此不会混合视频流，但如果源不是 H.264，仍会更改视频编解码器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:41:52.707

不能。FFmpeg 只能复制比特流*或*重新编码。它无法猜测您是否要保留某个编解码器。您必须解析文件信息，然后决定是否要复制。

此处列出了如何执行此操作的一些示例：[MKV 到 MP4 转码脚本问题](https://superuser.com/questions/275193/mkv-to-mp4-transcoding-script-issues/544214#544214)

基本上，你可以这样做（来自@evilsoup 的无耻插件）：

```
ffprobe input.mkv 2>&1 | sed -n '/Video:/s/.*: \([a-zA-Z0-9]*\).*/\1/p' | sed 1q' 
```

这将输出`h264`H.264 视频流。

[小提示：尝试习惯于指定所需的确切编码器。`h264`不是真正的 FFmpeg 编码器——它默认为`libx264`. 所以宁可使用`-c:v libx264`.]
[还有一件事：`aac`是 FFmpeg 的内置 AAC 编码器。第三方编码器喜欢`libfdk_aac`或`libfaac`提供 VBR 编码模式，并且质量通常比`aac`.]

# grails - Grails：对条件列表的结果执行第二次搜索

> ID：15326220
> 
> 赞同：0
> 
> 时间：2013-03-10T19:00:03.513
> 
> 标签：grails, hibernate-criteria

我有以下模型：

```
class Post {
  int id;
  String comment;
  static belongsTo = [
    category_id:Category,
    author_id:Author
  ];
} 
```

我希望创建以下查询：查找每个作者的最新帖子（按 id），然后仅返回属于某个类别 X 的帖子。

到目前为止，我已经走了多远：

```
def cat = Category.findByID(x); // Not yet used

def c = Post.createCriteria();
def results = c.list {
  projections {
    groupProperty("author_id", "myid")
    max("id", "version")
  }
}

def posts = results?.collect{Post.read(it[0])} 
```

诱惑是在`like("categorie_id", cat)`之前添加`projections`。

但是，这会导致每个作者的最后一篇文章都与类别 X 相关。

我需要：每个作者的最新帖子，如果它属于 X 类。

换句话说，我想知道每个作者的最新帖子是否属于 x 类。

我认为为了做到这一点，我需要对第一次的结果进行第二次搜索，但我不知道该怎么做。

有什么建议么？

谢谢你，

乔波

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:41:47.287

You shouldn't define an `id` field unless it's different from the one that GORM adds for you - it adds a Long id by default, so yours isn't needed. Also, your `belongsTo` names are very nonstandard - the `_id` suffix should be removed. And what's the deal with all of those semicolons ;)

Given this domain class:

```
class Post {
   String comment
   static belongsTo = [
      category: Category,
      author: Author
   ]
} 
```

Then you can get the most recent posts for each author for a specified category with this HQL query (I have no idea how to do it with a Criteria query):

```
def category = ...

def posts = Post.executeQuery(
   'select p from Post p where id in (' +
      'select max(p.id) from Post p ' +
      'where p.category=:category group by p.author.id)',
   [category: category]) 
```

# java - 带有 LdapTemplate 的 Spring 嵌入式 LDAP

> ID：15326223
> 
> 赞同：3
> 
> 时间：2013-03-10T19:00:25.417
> 
> 标签：spring, ldap, spring-ldap, java, spring, spring-security, spring-ldap

在[spring](/questions/tagged/spring "显示标记为“春天”的问题")中，嵌入式[ldap](/questions/tagged/ldap "显示标记为“ldap”的问题")如何与[spring-ldap](/questions/tagged/spring-ldap "显示标记为“spring-ldap”的问题")模板一起使用。目前，我的配置是 -

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:security="http://www.springframework.org/schema/security" 
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
      http://www.springframework.org/schema/security 
      http://www.springframework.org/schema/security/spring-security-3.0.xsd">
    <bean id="contextSource" class="org.springframework.ldap.core.support.LdapContextSource">
        <property name="url" value="${PROVIDER_URL}" />
        <property name="base" value="${Search_Base}" />
        <property name="userDn" value="${SECURITY_PRINCIPAL}" />
        <property name="password" value="${SECURITY_CREDENTIALS}" />
    </bean>
    <bean id="ldapTemplate" class="org.springframework.ldap.core.LdapTemplate">
        <constructor-arg ref="contextSource" />
    </bean>
</beans> 
```

ContextSource 值在属性文件中可用。现在我想使用嵌入式 ldap -

```
<security:ldap-server ldif="classpath:sample.ldif"  root="cn=mojo"/> 
```

我将在 LdapContextSource 值中指定的默认端口是什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T19:58:24.307

内嵌ldap服务器的端口默认为`33389`，见相关[源码](https://github.com/SpringSource/spring-security/blob/master/config/src/main/java/org/springframework/security/config/ldap/LdapServerBeanDefinitionParser.java#L43)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T21:23:00.960

您可以使用元素的`port`属性选择端口。`ldap-server`请参阅参考手册中的[命名空间附录](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-ldap-server)。这也给出了默认值。

# java - 运行 scala 应用程序时如何修复“NoClassDefFoundError: midterm/Main”？

> ID：15326230
> 
> 赞同：0
> 
> 时间：2013-03-10T19:01:28.657
> 
> 标签：java, scala, noclassdeffounderror

我尝试编译这段代码

```
import java.awt.Color
import javax.swing.JButton
import javax.swing.JPanel;

object Main{
    var panel = new JPanel
    var btn= new JButton
    def main(args:Array[Int]):Unit={
      btn.setBounds(80,80,80,80)
      btn.setBackground(Color.BLUE);
      panel.add(btn);
  }  
} 
```

当我键入`scalac Main.scala`类文件时，已成功创建，但在 scala Main 之后有类似的输出

```
java.lang.NoClassDefFoundError: midterm/Main
Caused by: java.lang.ClassNotFoundException: midterm.Main
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
Could not find the main class: midterm.Main.  Program will exit.
Exception in thread "main" Java Result: 1 
```

如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:06:10.893

这似乎是一个包问题。确保它`Main.scala`位于名为`midterm`. 然后使用：

```
scalac midterm/Main.scala 
```

从包含`midterm`子目录的目录中。还要确保文件包含`package`声明：

```
package midterm 
```

* * *

此外，您的`main`方法入口点方法应该有一个`String`数组而不是`Int`一个：

```
def main(args:Array[Int]):Unit={ 
```

应该

```
def main(args:Array[String]):Unit={ 
```

通过这些更改，它可以很好地与`Scala 2.10.0`.

# mysql - 如何编写这个特定的 MySQL 查询？

> ID：15326231
> 
> 赞同：0
> 
> 时间：2013-03-10T19:01:34.870
> 
> 标签：mysql

我一直在尝试为我的消息传递线程（即发件人/收件人）创建一个 MySQL 查询。

我有一个带有字段的表（msg_id = 唯一的 6 位 id，如 123456）。这个 (msg_id) 字段可能有很多行（对于每个 msg 回复），其中每一行都会像线程一样具有相同的 (msg_id)。因此，假设 bob 开始向 fred 发送消息，因此表中的线程将类似于（仅用于说明这一点的粗略示例）：-

```
+---------+---------------------------+--------------------------+------------------------+------------+----------+
| msg_id  | sender_email              | recipient_email          | sender_msg             | cur_date   | cur_time |
+---------+---------------------------+--------------------------+------------------------+------------+----------+
| 3189855 | bob@hotmail.com           | fred@yahoo.com           | hi fred, how are you?  | 2013-03-10 | 17:12:18 |
| 3189855 | fred@yahoo.com            | bob@hotmail.com          | hi bob, I am great     | 2013-03-10 | 17:15:20 |
| 3189855 | bob@hotmail.com           | fred@yahoo.com           | hi fred, good to hear  | 2013-03-10 | 17:20:10
| 6749672 | jenny@barclay.cc          | fred@yahoo.com           | some other message     | 2013-03-10 | 14:52:49 |
+---------+---------------------------+--------------------------+------------------------+------------+----------+ 
```

当显示 bobs 或 freds 电子邮件收件箱时，我想按最新（cur_date，cur_time）显示每个唯一的（msg_id），以便最新的 msg/msg 回复位于收件箱列表的顶部。

因此，让我们关注 Fred 邮箱，因为 Fred 拥有最多的邮件。我希望我的查询在输出收件箱电子邮件时显示以下结果：

```
+---------+---------------------------+--------------------------+------------------------+------------+----------+
| msg_id  | sender_email              | recipient_email          | sender_msg             | cur_date   | cur_time |
+---------+---------------------------+--------------------------+------------------------+------------+----------+
| 3189855 | bob@hotmail.com           | fred@yahoo.com           | hi fred, good to hear  | 2013-03-10 | 17:20:10 |
| 6749672 | jenny@barclay.cc          | fred@yahoo.com           | some other message     | 2013-03-10 | 14:52:49 |
+---------+---------------------------+--------------------------+------------------------+------------+----------+ 
```

因此，查询获取每个唯一的 (msg_id) 并且对于每个唯一的 (msg_id)，它获取最后一行（即，作为发送的线程中的最后一个 msg，它适用于发送的最新 msg）。如果这是有道理的。因此，我的问题是如何生成此 SQL 查询以给出上述结果。我的想法如下，但不起作用：-

```
SELECT * FROM inbox_table WHERE (recipient_email='fred@yahoo.com' AND ORDER BY cur_date DESC, cur_time DESC) GROUP BY msg_id ORDER BY cur_date DESC, cur_time DESC; 
```

任何想法将不胜感激，我希望我能很好地解释这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:04:28.783

可能，您只需要在字符串周围添加引号，并且`ORDER BY`子句需要放在最后，并且只有一次：

```
SELECT * FROM inbox_table WHERE 
   recipient_email='fred@yahoo.com' 
   GROUP BY msg_id ORDER BY cur_date DESC, cur_time DESC; 
```

例如，将聚合函数添加到`SELECT`子句中可能很有意义`COUNT`，因此您还可以知道线程中有多少条消息：

```
SELECT *,COUNT(msg_id) FROM inbox_table WHERE 
   recipient_email='fred@yahoo.com' 
   GROUP BY msg_id ORDER BY cur_date DESC, cur_time DESC; 
```

最后，我建议将名称更改`msg_id`为`thread_id`，因为它可以更好地涵盖含义。

如果您想要按时间获取最新记录，请使用以下命令：

```
 SELECT *,MAX(CONCAT(cur_date,' ',cur_time)) FROM inbox_table WHERE 
   recipient_email='fred@yahoo.com' 
   GROUP BY msg_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:19:43.607

检查[这个小提琴](http://sqlfiddle.com/#!2/4d2a1/9/0)，基本上，你没有引用你的字符串，括号`WHERE`是不必要的。

# node.js - 与 Mongoose 相比，MongoDB 本机 Node.js 驱动程序的性能非常糟糕，我做错了什么？

> ID：15326232
> 
> 赞同：1
> 
> 时间：2013-03-10T19:01:36.517
> 
> 标签：node.js, mongodb, mongoose

我有一个简单的`node/express`应用程序，需要获取存储在示例 MongoDB 集合中的 2 个文档`(32-bit, localhost, Windows)`。我可以使用`native driver`或`Mongoose ORM`。

使用本机驱动程序将我的应用程序撕裂。做了一个ApacheBench（3300个请求，一次5个），整个事情都超时了......

```
Completed 330 requests
apr_pollset_poll: The timeout specified has expired (70007) 
```

当通过 Mongoose 访问时，相同的 MongoDB 集合只是通过比较简单地完成任务......

```
...
Completed 2970 requests
Completed 3300 requests
Finished 3300 requests
...
Requests per second:    244.49 [#/sec] (mean)
Time per request:       61.353 [ms] (mean) 
```

这是一个*巨大的*差异，显然我在使用本机驱动程序时做错了什么。这是这两种方法的代码以及存储在数据库中的数据。

**数据库中只存储了两个文档：**

```
{
    "_id": "51bmdft4a487e771411ce8ef",
    "name": "Gintoki",
    "email": "sakata@yorozuya.com",
    "friends": [ "Shinpachi", "Kagura", "Tsukuyo" ]
},
{
    "_id": "51388p50bed4dghy4308745d",
    "name": "Elizabeth",
    "email": "eli@ossan.io",
    "friends": [ "Katsura" ]
} 
```

**使用本机 MongoDB 驱动程序：**

```
var 
    app         = require( 'express' )(),
    MongoClient = require( 'mongodb' ).MongoClient,
    DB_URL      = 'mongodb://localhost:27017/testDB';

app.get( '/mongotest', function ( req, res ) {

    MongoClient.connect( DB_URL, function ( err, db ) {
        if( !err ) {
            var collection = db.collection( 'People' );
            collection.find().toArray(function(err, items) {
                res.send( JSON.stringify( items ) );
            })
        }
    })
})

app.listen( 5000 ); 
```

**输出**：在完成 3300 个请求中的 330 个请求一分钟后超时`ab`

* * *

**使用猫鼬：**

```
var 
    app         = require( 'express' )(),
    mongoose    = require( 'mongoose' ),
    DB_URL      = 'mongodb://localhost:27017/testDB';

app.get( '/mongotest', function ( req, res ) {

    mongoose.connect( DB_URL );

    var 
        PeopleSchema = mongoose.Schema({ name: String, email: String, friends: Array }),
        People = mongoose.model( 'People', PeopleSchema ),
        db = mongoose.connection;

    db.on('error', console.error.bind(console, 'connection error:'));
    db.once('open', function callback () {
        People.find({}, function ( err, item ) {
            res.send( item );
        })
    })
})

app.listen( 5000 ); 
```

**输出**：与本机驱动程序相比，速度非常快。`ab`在几秒钟内完成。

任何人都帮我弄清楚我在使用本机驱动程序时做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-10T21:48:33.447

很确定问题是在本机版本中，每个请求都会打开一个新的连接池。重新编写代码，以便在启动期间只进行一次`MongoClient.connect`和调用`mongoose.connect`

# c++ - C ++在* m矩阵的每一行中查找最小值

> ID：15326233
> 
> 赞同：0
> 
> 时间：2013-03-10T19:01:40.050
> 
> 标签：c++, matrix, minimum

如何在*m 矩阵的每一行中找到最小值，并将这些值放入一个新数组中？到目前为止我有这段代码，但它不能正常工作：

```
void min(const int t[max_city][max_bird], int allmin[], int n, int m)
{
    int min=t[0][0];
    for(int i=0; i<n; ++i)
    {
        for(int j=0; j<m; ++j)
        {
            if(t[i][j]<min)
            {
                min=t[i][j];
            }
        }
        allmin[i]=min;
        cout << i+1 << ". min: " << allmin[i] << endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T19:04:06.297

`min`在第一个循环中声明，并在那里初始化它：

```
for(int i=0; i<n; ++i)
{
   int min= INT_MAX; //do this here so that it gets initialized each time!

   for(int j=0; j<m; ++j)
   {
      //your code
   }
   //etc
} 
```

要使用`INT_MAX`，包括`<climits>`.

* * *

使用[`std::min_element`](http://en.cppreference.com/w/cpp/algorithm/min_element)，您的函数可以重写为：

```
void min(const int t[max_city][max_bird], int allmin[], int n, int m)
{
    for(int i=0; i<n; ++i)
    {
        allmin[i] = *std::min_element(t[i], t[i] + m);
    }
} 
```

变得这么短！

该函数`std::min_element`返回指向最小元素的指针，因此您*取消引用*返回的指针以获取（最小元素的）值。

要`std::min_element`在您的程序中使用，您必须包含此标头：

```
#include <algorithm> 
```

希望有帮助。

# c++ - 被boost精神/凤凰/C++11交互弄糊涂了

> ID：15326235
> 
> 赞同：2
> 
> 时间：2013-03-10T19:01:50.970
> 
> 标签：c++, boost, c++11, boost-spirit, boost-phoenix

我尽量减少这个问题。

如果我取消注释`void initialize()`，则此代码将编译。如果我将其注释掉，则它不会构建。

我发现解决此问题的唯一方法是使用 C++03 模式构建，`boost::shared_ptr`而不是`std::shared_ptr`.

我曾尝试使用 OS X Lion 上的股票 clang 编译器（使用 libc++）和 CentOS 6.4 x64 上的以下编译器：

```
/opt/llvm/3.2/bin/clang++ -gcc-toolchain /opt/gcc/4.7.2 -std=gnu++11 foo.cc -I/opt/boost/1.53.0/include -DBOOST_SPIRIT_USE_PHOENIX_V3 -DBOOST_SPIRIT_ACTIONS_ALLOW_ATTR_COMPAT -DBOOST_SPIRIT_DEBUG
/opt/llvm/3.1/bin/clang++ -gcc-toolchain /opt/gcc/4.7.2 -std=gnu++11 foo.cc -I/opt/boost/1.53.0/include -DBOOST_SPIRIT_USE_PHOENIX_V3 -DBOOST_SPIRIT_ACTIONS_ALLOW_ATTR_COMPAT -DBOOST_SPIRIT_DEBUG
/opt/llvm/3.0/bin/clang++ -gcc-toolchain /opt/gcc/4.7.2 -std=gnu++11 foo.cc -I/opt/boost/1.53.0/include -DBOOST_SPIRIT_USE_PHOENIX_V3 -DBOOST_SPIRIT_ACTIONS_ALLOW_ATTR_COMPAT -DBOOST_SPIRIT_DEBUG
/opt/gcc/4.7.2/bin/g++ -std=gnu++11 foo.cc -I/opt/boost/1.53.0/include -DBOOST_SPIRIT_USE_PHOENIX_V3 -DBOOST_SPIRIT_ACTIONS_ALLOW_ATTR_COMPAT -DBOOST_SPIRIT_DEBUG
/opt/gcc/4.7.1/bin/g++ -std=gnu++11 foo.cc -I/opt/boost/1.53.0/include -DBOOST_SPIRIT_USE_PHOENIX_V3 -DBOOST_SPIRIT_ACTIONS_ALLOW_ATTR_COMPAT -DBOOST_SPIRIT_DEBUG 
```

像往常一样，spirit 的编译器输出非常冗长，因此我将其作为要点包含在内：

*   [铿锵声 3.2](https://gist.github.com/anonymous/63bab7cee511c6d62fa2)
*   [GCC 4.7.2](https://gist.github.com/anonymous/6b75ec3504d90b87d845)

## 代码如下...

```
#include <boost/phoenix.hpp>
#include <boost/spirit/include/qi.hpp>
#include <memory>

class Object {
    public:
        void initialize(std::vector<int>) {
        }

        //void initialize() {
        //}
};

int main() {
    boost::spirit::qi::rule<std::string::iterator, int()> integer;
    boost::spirit::qi::rule<std::string::iterator, std::shared_ptr<Object>()> object;

    using boost::phoenix::bind;
    using boost::spirit::_val;
    using boost::spirit::_1;

    object  
        = (*integer) [bind(&Object::initialize, *_val, _1)];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:08:17.383

```
#define BOOST_SPIRIT_USE_PHOENIX_V3 
```

为我修复它。并更改`*val`为只是`val`因为 phoenix 将知道如何将成员函数绑定到它。

* * *

**更新**正如@llonesmiz 暗示的那样，这确实与 ADL 有关。虽然关系非常微妙。

*   *在此过程中，成员函数指针类型*`std::vector<>`中的存在使 ADL 搜索 std 命名空间并找到，而不是.*`std::bind``phoenix::bind`*
**   不知何故，当您通过`val`, 而不是 时`*val`，编译器会选择 phoenix`bind`作为更好的匹配。*   你可以看到，当你有一个成员函数，比如说，一个`int`（而不是来自`std`命名空间的类型）时，问题就消失了，并且总是选择 phoenix bind。*

 ***[您可以通过检查这个最小测试程序](http://coliru.stacked-crooked.com/view?id=192b0963111dd0b39b47e18b935f3ddd-288888228249e7ca71581405a7791187)**的输出来查看上述观察结果，该程序转储各种绑定表达式的类型标识（并运行它们`c++filt`）

* * *

*   **[在http://liveworkspace.org/code/idDtv$0](http://liveworkspace.org/code/idDtv%240)**上使用 GCC 实时查看

*   **更新**Clang 似乎只喜欢它`boost::shared_ptr`：**[http://liveworkspace.org/code/idDtv$3](http://liveworkspace.org/code/idDtv%243)**。我只能假设这是由于 libc++ 的差异（？）

```
#define BOOST_SPIRIT_USE_PHOENIX_V3
#include <boost/spirit/include/qi.hpp>
#include <boost/phoenix.hpp>
#include <memory>

class Object {
    public:
        void initialize(std::vector<int>) {
        }
};

int main() {
    boost::spirit::qi::rule<std::string::iterator, int()> integer;
    boost::spirit::qi::rule<std::string::iterator, std::shared_ptr<Object>()> object;

    using boost::phoenix::bind;
    using boost::spirit::_val;
    using boost::spirit::_1;

    object  
        = (*integer) [bind(&Object::initialize, _val, _1)];
} 
```*

# gnuplot - 是否可以在垂直折线图中的 gnuplot 的 y 轴上添加标签？

> ID：15326239
> 
> 赞同：1
> 
> 时间：2013-03-10T19:02:12.500
> 
> 标签：gnuplot, linechart

我曾尝试浏览有关 Gnuplot 的教程和示例，但似乎没有一个涵盖我手头的问题。

我制作了一个我想绘制的图表模型：

[![所需的情节](../Images/eeb08dfdca289b77193af3ace7c271bc.png)](https://i.stack.imgur.com/k1IR7.png)

数据将以这种方式呈现：

```
Item A  10  80
Item B  24  75
Item C  25  52
Item D  24  45
Item E  30  43
.... 
```

行数会更高，但只有两个系列。

当谈到 Gnuplot 时，我完全是初学者，但由于 Excel 无法绘制垂直折线图，我认为也许可以制作 Gnuplot，但无法弄清楚它是如何实现的，甚至根本不知道它是否可行。

任何关于我应该采取的方向的指示都表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:53:06.233

此答案假定数据文件的列是制表符分隔的。

有几个步骤可以实现这一点：

1.  您需要交换 x 和 y 坐标，例如使用`using 2:0`而不是`using 0:2`.
2.  y 轴需要反转：`set yrange [] reverse`.
3.  使用第一列作为 y-tics: 的标签`using 2:0:yticlabels(1)`。
4.  将键放在绘图上方：`set key above`。

全部放在一起：

```
set key above
set yrange [] reverse
set datafile separator '\t'
plot 'data.txt' using 2:0:yticlabels(1) with lines title 'Series A', \
     'data.txt' using 3:0               with lines title 'Series B' 
```

结果：

![上述 Gnuplot 脚本的结果](../Images/15bb2a72a8e77aef317703ec7fe90522.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:09:50.027

当我对我的图表进行一些格式化并决定分享我的最终结果时，以防其他人遇到类似问题。我可能以太难的方式做到了这一点，但它完成了工作。

```
set key above center
set yrange [] reverse
set datafile separator '\t'
set style line 1 lt 'dashed' lw 4 lc 'black'
set style line 2 lt 1 lw 3 lc 'black'
set style increment userstyle
set xrange [0:100]
set xtics add 25
plot 'data' using 2:0:ytic(1) with lines title 'Now', \
      'data' using 3:0 with lines title '10 years ago' 
```

![示例图表](../Images/f0a92c3276b7d12bab7527eba0ad8405.png)

再次感谢托尔！

# java - 发生在 Java 中的关系之前对特定示例的说明

> ID：15326244
> 
> 赞同：1
> 
> 时间：2013-03-10T19:02:51.527
> 
> 标签：java, multithreading, concurrency

参考下面的链接 [http://docs.oracle.com/javase/tutorial/essential/concurrency/QandE/answers.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/QandE/answers.html) 下面的例子显示了Key Statement 1不保证在key Statement 2之前执行

```
public class BadThreads {

    static String message;

    private static class CorrectorThread
        extends Thread {

        public void run() {
            try {
                sleep(1000); 
            } catch (InterruptedException e) {}
            // Key statement 1:
            message = "Mares do eat oats."; 
        }
    }

    public static void main(String args[])
        throws InterruptedException {

        (new CorrectorThread()).start();
        message = "Mares do not eat oats.";
        Thread.sleep(2000);
        // Key statement 2:
        System.out.println(message);
    }
} 
```

解决方案状态有两种方法可以保证对消息的所有更改对主线程可见：

> *   在主线程中，保留对 CorrectorThread 实例的引用。然后在引用消息之前在该实例上调用 join
> *   使用同步方法将消息封装在对象中。除非通过这些方法，否则永远不要引用消息。

这两种技术都建立了必要的先发生关系，使对消息的更改可见。

我了解使用 join 的第一个解决方案如何使关键语句 1“发生在之前”关键语句 2。但是对于第二个解决方案，我无法理解使用同步方法（例如 getMessage() 和 setMessage()）如何建立这种关系。什么是修改后的关键语句 2 (System.out.println(getMessage()) 将在修改后的关键语句 1 (setMessage("Mares do eat oats")) 之后执行的保证。关键语句 2 可能会锁定关键语句 1 之前的消息，反之亦然，具体取决于线程的调度方式。

另外，有没有办法修改代码以使 message="Mares do not eat oats" 在 message="Mares do eat oats" 之前执行？我能想到的一种方法是保留一个共享状态变量并在 message="Mares do not eat oats" 执行后设置它，而 message="Mares do eat oats" 应该在一个像 while(!stateVariable){ wait();} 然后更新消息。那正确吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:24:01.967

The happens-before thing doesn't guarantee that some statement is executed before some other statement. It guarantees that **if** a first statement is executed before a second one, (and there is a good chance of that happening in your exemple, since both threads start at the same time, and one sleeps 1 second whereas the other one sleeps 2 seconds) the second one will see what the first one has written.

The synchronized access to a variable guarantees that a write to this variable is visible to a subsequent read of this variable from another thread. Why? Because that's what the specification of the Java Memory Model says, and because the implementation respects the specification.

There are other ways to guarantee that: make the variable volatile, make it an AtomicReference, or store it and retrieve it from a concurrent collection.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T19:18:57.970

不要将*happens-before*与任何特定的操作顺序相混淆。这种关系的要点是这样的排序根本存在*，*而不是任何特定的排序。在您的示例中，没有排序：一个线程可能永远不会观察另一个线程的操作，即使您使用更多的睡眠语句并尝试阅读另一个线程所写的内容。

如果你想协调你的两个动作，不要诉诸`wait`/`notify`因为它们是非常低级和脆弱的机制。使用来自 的东西`java.util.concurrent`，例如 a `CountDownLatch`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T20:32:49.410

在该站点中描述的答案中，它是说：

> 然而，这个结果并不能保证，因为“Key statement 1”和“Key statement 2”之间没有happens-before关系。**即使“关键语句 1”实际上在“关键语句 2”之前执行也是如此**——*记住，发生前的关系是关于可见性，而不是顺序。*

然后它说：

> 有两种方法可以保证**对消息的所有更改对** *主线程可见：*

并不是说`Mares do eat oats.`一定会在结果中打印出来。！！
并且通过定义`Synchronization`保证**可见性**和原子性。因此，如果消息是通过对象的同步方法设置和获取的，那么它确保如果消息被`set`方法更改，那么这个更改的值肯定会`get`在读取时被方法看到。因此，如果我们将代码更改为这个：

```
class Message
{
    String message ;
    public Message(){}
    public Message(String message)
    {
        this.message = message;
    }
    public synchronized void setMessage(String message)
    {
        this.message = message;
    }
    public synchronized String getMessage()
    {
        return message;
    }
}
public class BadThreads {

    //static String message;
    static Message mess = new Message();
    private static class CorrectorThread extends Thread 
    {
        public void run() 
        {
            try 
            {
                sleep(1000); 
            } catch (InterruptedException e) {}
            // Key statement 1:
            mess.setMessage ("Mares do eat oats."); 
        }
    }

    public static void main(String args[]) throws InterruptedException 
    {
        (new CorrectorThread()).start();
        mess.setMessage("Mares do not eat oats.");
        Thread.sleep(2000);
        // Key statement 2:
        System.out.println(mess.getMessage());
    }
} 
```

如果`Key Statement 1`在此之前执行，`key statement 2`它将保证消息的最新更改值将通过`getMessage()`主线程检索。

# java - 在 int 属性上按降序对自定义对象数组进行排序

> ID：15326248
> 
> 赞同：11
> 
> 时间：2013-03-10T19:03:03.880
> 
> 标签：java, arrays

我想按出生年份降序排列我的数组。我的数组有两个其他元素，它们是字符串类型的。因此，例如，出生在最早年份（例如 1939 年）的人将在顶部，然后以此类推。

这是我的代码：

```
import java.util.*;
public class StudentInformationTest
{
public static void main (String [] args){ 
    StudentInformation[] studentInfo = new StudentInformation[10];

    studentInfo[0] = new StudentInformation("Student A",1971, "BSc FDIT");
    studentInfo[1] = new StudentInformation("Student B",1964, "BSc FDIT"); 
    studentInfo[2] = new StudentInformation("Student C",1996, "BSc FDIT"); 
    studentInfo[3] = new StudentInformation("Student D",1939, "BSc FDIT"); 
    studentInfo[4] = new StudentInformation("Student E",1945, "BSc FDIT"); 
    studentInfo[5] = new StudentInformation("Student F",1991, "BSc FDIT"); 
    studentInfo[6] = new StudentInformation("Student G",1987, "BSc FDIT"); 
    studentInfo[7] = new StudentInformation("Student H",1968, "BSc FDIT"); 
    studentInfo[8] = new StudentInformation("Student I",1968, "BSc FDIT"); 
    studentInfo[9] = new StudentInformation("Student J",1973, "BSc FDIT"); 

    printInfo(studentInfo);
    printAge(studentInfo);
}
public static void printInfo(StudentInformation studentInfo[]){
    for(int i = 0; i < studentInfo.length; i++){
        System.out.println(studentInfo[i].getStudentName() + " " +   studentInfo[i].getBirthDate() + " " + studentInfo[i].getProgrammeOfStudy());
    }
    System.out.println();
}

 }

} 
```

一旦我设法按降序打印出生年份，我还需要显示学生姓名和他们正在做的大学模块。我知道其他问题已经被问到如何做到这一点，但我无法看到其他对象。这是一堂课，所以请原谅我的代码中的任何错误。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-10T19:09:25.130

使用一个`Comparator`和一个`ArrayList`。

## 在 Java 8 中

使用新的默认和静态方法`Comparator`！

```
ArrayList<StudentInformation> infos = new ArrayList<StudentInformation>();
// fill array
Collections.sort(infos, 
    Comparator.comparingInt(StudentInformation::getBirthYear).reversed()); 
```

这是一个勇敢的新世界！:)

或者——仍然比 Java 7 更好——使用[lambdas](http://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html#syntax)！

```
ArrayList<StudentInformation> infos = new ArrayList<StudentInformation>();
// fill array
Collections.sort(infos, (s1, s2) ->
    Integer.compare(s2.getBirthYear(), s1.getBirthYear())); 
```

## 在 Java 7 中

使用匿名内部类。

```
class StudentDateComparator implements Comparator<StudentInformation> {
    public int compare(StudentInformation s1, StudentInformation s2) {
        return Integer.compare(s2.getBirthYear(), s1.getBirthYear());
    }
}

ArrayList<StudentInformation> infos = new ArrayList<StudentInformation>();
// fill array
Collections.sort(infos, new StudentDateComparator()); 
```

## 解释

它的`Comparator`作用是允许任何东西比较给定类型的两个对象（在本例中为`StudentInformation`）。您也可以制作`StudentInformation`implement `Comparable<StudentInformation>`，但这种方式可能更好，因为有不止一种方法可以比较学生信息（按日期，如这里，但也可以按名字、姓氏、注册的课程数量等）。

通过交换比较器中`s1`和的顺序`s2`，我们得出相反的顺序。另一种方法是`compare`按正常顺序否定调用，或者使用正常的比较器并将其包装在`Collections.reverseOrder`.

* * *

您也可以使用标准数组来执行此操作。

```
StudentInformation[] infos = new StudentInformation[10];
// fill array
Arrays.sort(infos, new StudentDateComparator()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:12:40.160

在 Java 领域，有`Comparable<E>` [接口](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)：

```
interface Comparable<E> {
  public int compareTo(E other);
} 
```

您应该根据您的要求制作您的`StudentInfo`implement `Comparable<StudentInfo>`，`compareTo(StudentInfo other)`并使用标准库中的方法（但这将需要 a`Comparator`代替）或一些适合您情况的排序算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T19:14:06.270

你可以让`StudentInformation`类实现`Comparable`。然后你必须实现一个方法[`compareTo`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html#compareTo%28T%29)。此方法定义如何以及何时将类的两个对象视为相等、更小或更大。

明确定义此属性后，您可以使用[`Collections.sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#sort%28java.util.List%29)实用程序对集合进行排序。

# objective-c - applicationDidEnterBackground 等方法不起作用

> ID：15326264
> 
> 赞同：1
> 
> 时间：2013-03-10T19:04:10.760
> 
> 标签：objective-c

我搜索了 StackOverflow 和 Google，但到目前为止没有任何帮助。为什么以下代码对我不起作用？Notting 出现在控制台中。viewDidLoad 中的 NSLog 确实出现在控制台中...

在 ViewController.m 中

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    NSLog(@"applicationDidEnterBackground");
} 
```

该项目非常简单，一个故事板，一个视图控制器，仅限 iPad。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:05:15.647

只有应用程序委托才能调用该方法，而不是视图控制器。该对象应符合`UIApplicationDelegate`并需要设置为委托。您在 MainMenu.xib 中设置它。该 xib 中的 File's Owner 对象是应用程序本身；创建应用程序委托类的另一个对象并连接应用程序的`delegate`出口。

但是，通过在默认通知中心注册，任何对象都可以获知应用程序事件——应用程序对象将发送此消息给它的委托并发布通知。在这种情况下，您要注册`UIApplicationDidEnterBackgroundNotification`.

# python - 在任何包含或可能包含元组的东西中找到第一个元组？

> ID：15326271
> 
> 赞同：0
> 
> 时间：2013-03-10T19:04:58.273
> 
> 标签：python, list, parsing, tuples

在 Python 中，无论所讨论的变量是包含一个元组还是包含至少一个元组的列表，总是返回一个元组的简单方法是什么？

```
# (3, 5) would return (3, 5)
#
# [(3, 5), [200, 100, 100]] would return (3, 5)
#
# [[100, 100, 100], (3, 5)] would return (3, 5)
#
# [(3, 5), (4, 7)] would return (3, 5) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:07:28.503

如果我真的*需要*这样的东西，我会做这样的事情：

```
def first_tuple(t):
    return t if isinstance(t,tuple) else next(x for x in t if isinstance(x,tuple)) 
```

演示：

```
>>> first_tuple((3,5))
(3, 5)
>>> first_tuple([(3, 5), [200, 100, 100]])
(3, 5)
>>> first_tuple([[100, 100, 100], (3, 5)])
(3, 5)
>>> first_tuple([(3, 5), (4, 7)])
(3, 5)
>>> first_tuple([[],[]])
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in first_tuple
StopIteration 
```

一般来说，你*不应该需要*这样的东西。恕我直言，这似乎是一个糟糕的设计，应该重新考虑这里的数据结构。

# android - Android - 动态更改公式中的变量

> ID：15326276
> 
> 赞同：0
> 
> 时间：2013-03-10T19:05:23.050
> 
> 标签：android, reference, formula, dynamic-variables

我被困在一个看似简单的点上，可能有一种简单的方法来处理它，但无论如何我都需要帮助。

我需要使用一组常量来评估公式，应该根据用户的选择动态选择。见代码：

```
double constOne=2.3, constTwo=1.1, constThree=1.7...; //and so on

public double doSomething(int inputOne, String selection){

    //being const... one of the double vars defined above, 
    //selected based on the String selection
    return inputOne*const...; 
} 
```

我知道我可以使用一个双精度数组并将数组上的位置传递给 doSomething() 来做到这一点，但这是非常硬编码的，我真的不喜欢那样做。

有没有办法动态引用 constOne、constTwo 等？谢谢！

PS：是的，我知道这可能是一个愚蠢的问题，我正在学习！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:32:15.150

我真的没有看到在数组中声明常量的问题。

但是，如果您真的反对，您可以编写一个辅助函数，该函数将接收选择器字符串并返回常量。这可以让你的代码更干净

```
double getConstant(String selector) {
    // some logic
} 
```

那么你的其他功能会更干净一些

```
public double doSomething(int inputOne, String selection){

    //being const... one of the double vars defined above, 
    //selected based on the String selection
    return inputOne * getConstant(selection); 
} 
```

这样做的好处是您从选择器中选择常量的逻辑将在一个地方，而不是在您需要常量的所有函数中。

# extjs - 如何根据来自 Web 服务的传入 JSON 加载 Sencha 列表 itemtpl 值

> ID：15326279
> 
> 赞同：0
> 
> 时间：2013-03-10T19:06:00.977
> 
> 标签：extjs, sencha-touch-2, ext.list

我是 Sencha touch 的新手，遇到了一个问题。我想在 Sencha List 的 itemtpl 中显示图像。该图像的 url 将取决于来自网络服务的 JSON 值。

例如：如果**animalType= cat**那么我需要显示 cat 的图像，如果**animalType= dog**，我想显示狗的图像。我需要做很多这样的定制。

我知道 Sencha 使用 Store 和 HTML 代码来创建 itemtpl，但无法弄清楚我需要将这些代码放在哪里才能得到我的结果。

任何有关示例的帮助将不胜感激。提前致谢。**这是我的代码。**

**应用程序/控制器**

```
 Ext.define("Abc.controller.InstancesController", {
extend: 'Ext.app.Controller',

config: {
    refs: { 
        main: 'mainpanel',
        instances: '#instanceList'
    },
    control: {
        Instances: {
            initialize: 'initializePanel'
        }
    }
},

initializePanel: function() {
var mainComponent = Ext.getCmp('instanceList');
var me = this,
searchtrains = me.getInstances();
mainComponent.setTitle(mainComponent.prop1+" : Running List");
 searchtrains.setMasked({
        xtype: 'loadmask',
        message: 'Searching...'
    });
    var url='http://abc.com/test.json?';
    for (var i = 0; i < mainComponent.prop2.length; i++) {
        if(i==0)
        url+='keys[]='+mainComponent.prop1+'_'+mainComponent.prop2[i];
        else
        url+='&keys[]='+mainComponent.prop1+'_'+mainComponent.prop2[i];

    }
    var instanceURL=url;
var instanceStore = Ext.create('Abc.store.InstancesStore');
instanceStore.load({
    url:instanceURL,
    scope: this,
        callback : function(records, operation, success) {
        debugger;
        searchtrains.setMasked(false); 
        console.log('JSON returned:::::::::::::');
        this.getInstances().setStore(instanceStore);
    }
}); 
```

**应用程序/视图**

```
 Ext.define('Abc.view.InstancesView', {
   extend: 'Ext.List',
    xtype: 'InstancesList',
    requires: ['Abc.store.InstancesStore','Ext.data.proxy.JsonP',],

 config: {
title: 'Running Days',
id: 'instanceList',
itemTpl: '<div class="serached_listview">'+ 
        '<div>{key}  {key} </div>' +
        '<div><b>{am_type}</b> </div>' +         ////And so on.......
        '<div>  {app}</div>' +
        '</div>'
        ,
        onItemDisclosure: true,
        store: 'InstanceStore',
           listeners: [{
                fn: 'initialize',
                 event: 'initialize'
            }]
 } 
```

**应用商店**

```
 Ext.define('Abc.store.InstancesStore', {
extend: 'Ext.data.Store',
requires: [
    'Ext.data.proxy.JsonP'
],
    config: {
    fields: [
    {
        name: 'key', mapping: 'key'
    },
    {
        name: 'am_type', mapping: 'am_type'
    },
        {
        name: 'app', mapping: 'rm.app'
    }                ////And so on.......
],
storeId: 'InstanceStore',
autoLoad :false,
proxy: {
    type:'jsonp',                              
    reader: {
        type: 'json'
    },
    pageParam: undefined,
    startParam: undefined
}
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T05:50:14.377

您可以[在 XTemplate 中使用条件语句或模板成员函数](http://docs.sencha.com/touch/2-1/#!/api/Ext.XTemplate)，这样一个模板将服务于您收到的任何类型的数据。

# c++ - boost::lockfree::queue 在 c++11 中不是无锁的吗？

> ID：15326282
> 
> 赞同：9
> 
> 时间：2013-03-10T19:06:09.697
> 
> 标签：c++, boost, c++11, queue, lock-free

我试图在这个 websocket++ 示例中`boost::lockfree::queue`替换[https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp](https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp)`std::queue`

看起来它可以在不真正改变任何语法但删除`boost::unique_lock`行的情况下完成。

但是，当我查看 boost 示例时，它有一个代码部分检查无锁[http://boost-sandbox.sourceforge.net/doc/html/lockfree/examples.html](http://boost-sandbox.sourceforge.net/doc/html/lockfree/examples.html)

当我查看文档时`lockfree::queue`，它在`is_lock_free()` [http://boost-sandbox.sourceforge.net/doc/html/boost/lockfree/queue.html](http://boost-sandbox.sourceforge.net/doc/html/boost/lockfree/queue.html)上说：

> bool is_lock_free(void) 常量；
> 
> **警告**
> 
> 它只检查是否可以以无锁方式修改队列头和尾节点以及空闲列表。在大多数平台上，如果这是真的，整个实现是无锁的。使用 c++0x 风格的原子，不可能提供完全准确的实现，因为需要测试每个内部节点，如果从操作系统分配更多节点，这是不可能的。
> 
> **返回**：true，如果实现是无锁的。

我不知道“c++0x 风格的原子”是什么，但我很确定 c++0x 意味着 c++11。

我正在使用 c++11 并且只是替换`boost::lockfree::queue`，`std::queue`所以这不会实现无锁吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T19:40:54.800

不。“不可能提供完全准确的实现”评论是指`is_lock_free()`- 即不能保证`is_lock_free()`返回准确反映实现是否无锁的结果。但是，如果`is_lock_free()`返回 true，则该实现很可能是无锁的——但不是绝对的，保证铸铁。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2013-09-02T09:08:41.803

> 我不知道“c++0x 风格的原子”是什么，但我很确定 c++0x 意味着 c++11。

*   c++0x 指的是 c++03 和/或 c++07 C++ 标准。
*   c++1x 通常指的是 c++11
*   c++1y 指的是 c++11 的后继者。

# android - 片段中的方向变化。恢复视图状态

> ID：15326286
> 
> 赞同：1
> 
> 时间：2013-03-10T19:06:36.060
> 
> 标签：android, fragment, android-orientation, orientation-changes

我有一个片段，其中包含一些`EditTexts`，一些`RadioGroups`和`Spinners`。

当我更改方向时，视图状态不会保留。
我试图覆盖`onSavaInstanceState`和调用`setRetainInstance(true)`，但它没有帮助。

我还尝试将所有插入的值保存为`Bundle outState`：`outState.putString("name", mName.getText().toString())`并将其恢复为`onCreateView`.

也无济于事，`Bundle outState`in`onCreateView`保存了值，但我无法操纵视图来为其设置值。例如像这样：`mName.setText(savedInstanceState.getString("name"))`

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:25:37.303

我已经替换了`Fragment`中的`FragmentActivity`，这导致了状态没有正确恢复的事实。

我在方法中包围了`Fragment`提交。 我也使用and来正确恢复相同的状态。`if (savedInstanceState == null)``onCreate`
`Bundle outState``onSaveInstanceState``Fragment``Fragment`

# android-intent - Android - 如何将数据发送回调用活动

> ID：15326288
> 
> 赞同：6
> 
> 时间：2013-03-10T19:06:46.313
> 
> 标签：android-intent, android-activity

我正在从activityA 调用activityB 并使用意图传递一个类对象。

```
Intent intentB = new Intent(v.getContext(), activityB.class);
intentB.putExtra("data", data); //data is a class object
startActivity(intentB); 
```

activityB 开始正常，我也能够提取数据。在activityB中，我正在修改数据对象。我想在调用 activityB.onDestroy() 时将此修改后的数据对象发送回 activityA。

有什么建议吗？

这是我的代码：

活动A，开始`Intent`：

```
Intent i = new Intent(this, activityB.class);
i.putExtra("object", Class.object);
startActivityForResult(i, 1); 
```

活动A，捕捉意图：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
  if (requestCode == 1) {    
        object = data.getParcelableExtra("object"); //the Class implements Parcelable
  }
} 
```

活动B

```
protected void onDestroy() {
  Intent data = new Intent();
  setResult(RESULT_OK, data) 
  finish(); // ends current activity
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T19:10:04.773

使用 ActivityResult。

1.  采用`startActivityForResult(int, Intent)`
2.  要在活动 B 中设置信息，请使用`setResult(RESULT_OK, data)`（其中数据是 Intent）
3.  覆盖`onActivityResult(int, int, Intent)`并捕获`data`-Intent

活动 A，开始`Intent`：

```
Intent i = new Intent(this, SecondActivity.class);
startActivityForResult(i, 1); 
```

活动A，抓数据：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

  if (requestCode == 1) {    
        // make use of "data" = profit
  }
} 
```

活动 B：

```
Intent data = new Intent();
setResult(RESULT_OK, data) 
finish(); // ends current activity 
```

# c++ - For循环不太好用

> ID：15326289
> 
> 赞同：1
> 
> 时间：2013-03-10T19:07:01.787
> 
> 标签：c++, loops, if-statement, for-loop

这是我第一次尝试 for 循环，我遇到了一些问题。我正在尝试编写一个程序，询问两支球队每节得分多少，然后显示总分和获胜球队。

```
#include <iostream>

using namespace std;

int main( )
{
    int scoreA = 0;
    int scoreB = 0;

    cout << "This program calculates the average score of 10 tests." << endl;

    for (int counter = 0; counter < 4; counter = counter + 1)
    {
        cout << "Enter Team A's quarterly points: ";
        cin >> scoreA;
        cout << "Enter Team B's quarterly points: ";
        cin >> scoreB;
        scoreA = scoreA + scoreA;
        scoreB = scoreB + scoreB;
    }

    cout << "Team A's Score: " << scoreA << endl;
    cout << "Team B's Score: " << scoreB << endl;
    if (scoreA > scoreB)
    {
               cout << "Team A wins";
               }
    else
    {
        cout << "Team B wins";
        }

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:11:21.350

您存储分数总和的变量和您从用户输入的变量应该不同。喜欢（*阅读评论*）：

```
int sumB=0 , sumB=0; // added this 
for (int counter = 0; counter < 4; counter = counter + 1){
  cout << "Enter Team A's quarterly points: ";
  cin >> scoreA;
  cout << "Enter Team B's quarterly points: ";
  cin >> scoreB;
  sumA = sumA + scoreA;
  sumB = sumB + scoreB;
  //  ^      ^
} 
```

例如，在您的代码中，您正在做类似的事情，`scoreA = scoreA + scoreA;`并且`cin >> scoreA` 两个语句在循环期间都覆盖了彼此的影响，并且同样发生在`scoreB`.

因此也相应地更改代码中的下一行，例如：

```
cout << "Team A's Score: " << sumA << endl;
cout << "Team B's Score: " << sumB << endl;
if (sumA > sumB){
  // your code
}
else{
 // your code
} 
```

此外，由于您是 c++ 和 SO 的新手，我想建议一个链接：[*The Definitive C++ Book Guide and List*](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:12:00.837

您并没有具体说明循环不起作用，但我在您的 for 循环中看到以下内容：

```
cout << "Enter Team A's quarterly points: ";
cin >> scoreA;
cout << "Enter Team B's quarterly points: ";
cin >> scoreB;
scoreA = scoreA + scoreA;
scoreB = scoreB + scoreB; 
```

因此，您将在每次迭代 () 中覆盖 scoreA 和 scoreB 中的分数`cin >> scoreA`，然后将它们加倍 ( `scoreA = scoreA + scoreA`)。

# java - 获取 android seekbar 值并将其显示在屏幕上

> ID：15326290
> 
> 赞同：33
> 
> 时间：2013-03-10T19:07:04.970
> 
> 标签：java, android

我试图在搜索栏发生变化时获取它的值并将其显示在下面。我正在使用`onclick`我的搜索栏上的方法来调用此方法。

```
public void getNumber(View view) 
{
    SeekBar seek = (SeekBar) findViewById(R.id.seekBar1);
    int seekValue = seek.getProgress();
    String x = "Value: " + Integer.toString(seekValue);
    ((TextView) findViewById(R.id.level)).setText(x);
} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-10T19:18:27.163

这里有一些额外的帮助：

```
import android.app.Activity; 
import android.os.Bundle; 
import android.widget.SeekBar; 
import android.widget.TextView; 

public class AndroidSeekBar extends Activity { 
   /** Called when the activity is first created. */ 
   @Override 
   public void onCreate(Bundle savedInstanceState) 
       super.onCreate(savedInstanceState); 
       setContentView(R.layout.main); 

       SeekBar seekBar = (SeekBar)findViewById(R.id.seekbar); 
       final TextView seekBarValue = (TextView)findViewById(R.id.seekbarvalue); 

       seekBar.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener(){ 

   @Override 
   public void onProgressChanged(SeekBar seekBar, int progress, 
     boolean fromUser) { 
    // TODO Auto-generated method stub 
    seekBarValue.setText(String.valueOf(progress)); 
   } 

   @Override 
   public void onStartTrackingTouch(SeekBar seekBar) { 
    // TODO Auto-generated method stub 
   } 

   @Override 
   public void onStopTrackingTouch(SeekBar seekBar) { 
    // TODO Auto-generated method stub 
   } 
       }); 
   } 
} 
```

使用该`OnProgressChanged`事件来检查搜索栏的进度，您可以返回该 int 以在应用程序的其他位置使用它。

# android - 等到 onCreate 完成

> ID：15326291
> 
> 赞同：3
> 
> 时间：2013-03-10T19:07:11.617
> 
> 标签：android, service, broadcastreceiver

我像这样从广播接收器启动服务

```
Intent service = new Intent(context, MyService.class);
context.startService(service);

String s = "Hello World";
MyService.addString(s); 
```

addString 是一个静态函数，它将字符串添加到 ListView。现在我有一个问题，即在 MyService onCreate() 运行时调用此函数并且未初始化 ListView。我该怎么做才能等到 onCreate 方法完成？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T19:16:00.393

`Activity`在 Android [http://developer.android.com/training/basics/activity-lifecycle/starting.html](http://developer.android.com/training/basics/activity-lifecycle/starting.html)中有一个描述生命周期的指南

该`onStart`方法在完成后不久被调用`onCreate`。

换句话说，从`onStart`活动的方法开始您的服务。

```
 @Override
    protected void onStart() {
        super.onStart();
        // start service
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:08:32.110

`OnStart()`更多`onCreate()`详情请关注[服务生命周期](http://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)

# xcode - 针对 10.8 SDK 和 CFNetwork.framework 构建，但应用程序在 OS X 10.6.8 中崩溃

> ID：15326295
> 
> 赞同：-1
> 
> 时间：2013-03-10T19:07:44.007
> 
> 标签：xcode, cocoa, frameworks

**注意：**问题不是重复的！请阅读前几条评论！

我已经使用最新的 Xcode 在 OSX 10.8 上编写了我的代码，并链接到独立的根级`CFNetwork.framework`框架 ( `/MacOSX10.8.sdk/System/Library/Frameworks/CFNetwork.framework`)。虽然该应用程序在 10.8 中运行良好，但它在 OS X 10.6.8 上崩溃。

在我看来（可能是错误的）`CFNetwork.framework`在 OSX 10.6.8 上不存在。

我只能在IOS编程环境中找到它，而在OSX编程环境中找不到。这可能是因为 OSX 10.6.8 上没有 CFNetwork.framework 吗？如果是这样，将框架添加到项目中以使其在 10.6.8 上不会显示为缺失的正确程序是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:03:11.587

您可以使用 10.8 SDK 开发您的应用程序，并链接到 root-level `CFNetwork.framework`，但您需要确保将部署目标设置为 10.6。这将确保链接器不会生成对`CFNetwork.framework`.

将输出`otool`与 10.8 部署进行比较：

```
MacPro:~ mdouma46$ otool -L /Users/mdouma46/.../CFNetwork\ Finagler 
/Users/mdouma46/.../CFNetwork\ Finagler:
    /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
    /System/Library/Frameworks/CFNetwork.framework/Versions/A/CFNetwork
    /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
    /usr/lib/libobjc.A.dylib
    /usr/lib/libSystem.B.dylib
    /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
    /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit 
```

和 10.6 部署目标：

```
MacPro:~ mdouma46$ otool -L /Users/mdouma46/.../CFNetwork\ Finagler 
/Users/mdouma46/.../CFNetwork\ Finagler:
    /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
    /System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
    /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
    /usr/lib/libobjc.A.dylib
    /usr/lib/libSystem.B.dylib
    /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit
    /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation 
```

# asp.net - 使用 Azure 上的 Azure SQL 数据库保护 ASP.net 应用程序

> ID：15326296
> 
> 赞同：1
> 
> 时间：2013-03-10T19:07:46.167
> 
> 标签：asp.net, security, azure, azure-sql-database

[对于一个冗长而漫不经心的问题，我们深表歉意。我希望能引发比我知识渊博的人的一些讨论/建议。如果这确实不适合 SO，请给我提示在哪里提出此类问题。]

我有一个 ASP.NET MVC 4 应用程序。我正在使用 Azure Web 角色来托管它（至少现在是这样）。我的应用程序是一个专门的医学访谈，它从用户那里收集敏感信息并生成一份报告，医生和患者可以查看和交付（通过附加到未加密电子邮件的加密 PDF 文件）医生和患者。敏感数据将保留 24 小时，以便医生回来检索报告，然后删除记录（我知道这实际上并没有从持久存储中删除数据）。

所以我开始考虑在安全边界方面我需要担心什么，以保持机密数据的机密性。尽管我是一位经验丰富的桌面应用程序开发人员，但我对整个 Web 编程都是新手。

我需要担心的第一个明显的安全边界是服务器和用户之间的通信层。我有一个有效的、正确配置的 SSL 证书，并且网站中处理登录用户的所有部分（包括采访和报告工作流程）都通过 HTTPS 端点运行。

我假设/希望 Azure 的 SSL 实现是正确的，并且我不能或应该做任何事情来强化主机本身。

为方便用户，我确实允许访问者浏览[http://mywebsite.com](http://mywebsite.com)，并且当他们登录时，我会重定向到标有 [RequiresHttps] 的页面。我知道这种 HTTP 到 HTTPS 的重定向很容易受到攻击到[SSLStrip 中间人攻击](http://www.windowsecurity.com/articles-tutorials/authentication_and_encryption/Understanding-Man-in-the-Middle-Attacks-ARP-Part4.html)，其中服务器看到安全的 HTTPS 连接，但警惕的用户会注意到 URL 是 HTTP 而不是 HTTPS。我计划保留这个便利功能，但我将通过使用扩展验证证书来缓解它，这为大多数用户提供了一个快乐的绿色地址栏。我会在主登录用户页面上放置一些东西，提醒用户验证绿色地址栏。

我将弄清楚如何配置 ASP.NET，以便我的所有 cookie 都被加密。

我已经启用了远程桌面（在 Azure 部署向导中），这样就会打开一个门户，如果有人能找出我的用户名和密码，就会受到攻击。这就是生活。

我需要担心的下一个安全边界——这也是我需要帮助的地方——是在未经授权的人访问数据库的情况下保护敏感数据。我的数据库管理知识几乎仅限于复制和粘贴连接字符串以及编写简单的 SQL 查询。

我正在为我的所有数据库内容使用实体框架和 Azure SQL 数据库。我使用嵌入到我的代码中的密钥加密数据实体中的敏感数据。据推测，数据库本身是加密的，刚刚获得数据库文件的人（Azure SQL 数据库界面可通过 Web 连接访问，但只能从受信任的 IP 地址访问）需要弄清楚我的 SQL 用户名和密码才能提取数据出来。

有人可能会欺骗我的应用程序泄露敏感信息。我的工作流程只允许登录用户读取和写入他自己的记录。为了让攻击者访问加密的敏感数据，他们要么需要获取我的加密密钥，要么想办法调用我的代码。我没有混淆 .NET 代码；**我假设我的可执行文件是安全的。我还假设包含我的数据库凭据的明文 web.config 是安全的。** 这些是好的假设吗？

因此，就我的初学者大脑已将我带入安全路径而言。有什么意见或建议吗？我是否做了任何不正确的假设或忽略了任何明显的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:30:47.810

其中很多与 Azure 无关。让我从 Windows Azure 的角度谈几点。

存储数据：我建议将加密的 pdf 文件移动到 blob 存储中。然后，您可以提供加密 pdf 的*链接*，而不是附加加密文件本身。另外，您可以将 blob（存储 pdf）设为*私有*，这样任何人都无法访问它。然后，创建一个**共享访问签名**，本质上是一个具有时间限制权限的特殊签名 URL。然后，您可以设置一个 24 小时阅读窗口。通过电子邮件提供此链接，在接下来的 24 小时内，它可以被下载并（使用正确的密码）解密。24 小时后，链接停止工作。您也可以在此时删除 blob（是的，它会消失）。

使用 RDP，您需要选择一个非常好的密码。除了 RDP，我看不到有人如何访问您的 Web 角色实例。

对于 Windows Azure SQL 数据库，我建议不要让外部世界访问它。只需限制对 Windows Azure 服务的访问。Windows Azure SQL 数据库不**加密**数据，也不支持加密字段。您需要自己进行加密。

您需要回答的**更大的问题**：您可以将医疗信息存储在云中吗？您这样做是否违反了任何类型的合规或法律规定？您需要对此做功课并弄清楚。清晰的数据会引起人们的关注，合规性（我不是律师，所以我不会在这里给出任何建议）。使用 Windows Azure，您可以获得签名的 BAA，这意味着如果您使用的是 Windows Azure 计算和存储，您的应用程序可以实现 HIPAA 合规性。目前 Windows Azure SQL 数据库不属于 HIPAA 合规性窗口。有关合规性的详细信息，请参阅 Windows Azure[信任中心。](http://www.windowsazure.com/en-us/support/trust-center/compliance/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:33:39.680

安全性中重要的是智能配置和信任。这是两个不同的东西，任何架构都需要它们。

回到技术。

**Azure 云服务**：您说您将使用基于 SSL、https 的站点。这是第一次设置的安全性，也是有效的。除此之外，请确保您[遵循最佳实践。](http://msdn.microsoft.com/en-us/library/zdh19h94%28v=vs.100%29.aspx)

**Azure SQL 数据库**：您可以使用防火墙规则保护/保护 Azure SQL 数据库。当您要将数据库连接到 Azure 云服务时，您可以只允许单独使用 Microsoft Azure 服务，即只能从云访问。所以整个数据库对外部世界是完全密封的。在设置或维护期间，您可以启用本地 IP 以使用数据库，然后您可以再次删除该访问权限并恢复到仅云模式。默认情况下，Azure 没有加密工具。还有一个很好的强密码。

**远程桌面**：在较短的时间内使用安全证书。不要通过 RD 对您的应用程序进行任何更改，请进行干净的重新部署。如果通过 RD 对您的应用程序进行任何修改，所有更改都将在任何数据中心活动期间被丢弃，因为结构控制器可能会将实例拉下并在不同的位置重新启动。

Azure 实施了许多认证和合规性。这确实是世界级的云产品。

# font-awesome - IE7中的字体真棒

> ID：15326297
> 
> 赞同：0
> 
> 时间：2013-03-10T19:07:46.407
> 
> 标签：font-awesome

我正在尝试将 Font Awesome 用于我的 web 应用程序，并且除了 IE7 之外一切正常。不幸的是我必须支持 IE7 :(

更糟糕的是，它有点像我继承的遗留应用程序，客户不希望引导程序附带的图标/字形改变。是的，有一些 Font Awesome 图标与 bootstrap glyps 略有不同。去弄清楚客户注意到了。

我无论如何都不是专家，所以这就是我所做的（我认为它“应该”起作用）：

我从 Font Awesome 中获取了 css，并将所有带有 'icon-' 的 css 更改为 'fa-icon-'。这意味着在我的应用程序中，我没有改变使用引导程序附带的字形，因为这些类都是“图标-”。我的应用程序中的所有 Font Awesome 图标都属于“fa-icon-”类。

我的问题是，就 IE7 的兼容性而言，我一定搞砸了。当浏览器为 IE7 时，我在标题中正确包含 font-awesome-ie7.min.css，请仔细检查。

问题是当我转到 IE7 时，我根本看不到图标。

这是我修改后的css的一些片段。欢迎任何和所有想法;）

字体真棒ie7.min.css

```
[class^="fa-icon"],[class*=" fa-icon"]{font-family: FontAwesome;font-style: normal;font-weight: normal;}
.btn.dropdown-toggle [class^="fa-icon"], .btn.dropdown-toggle [class*=" fa-icon"]{line-height: 1.4em;}
.fa-icon-large{font-size: 1.3333em;}
.ie7icon(@inner){*zoom: ~"expression( this.runtimeStyle['zoom'] = '1', this.innerHTML = '@{inner}&nbsp;')";}

.fa-icon-glass                { .ie7icon('&#xf000;'); }
.fa-icon-music                { .ie7icon('&#xf001;'); }
.fa-icon-search               { .ie7icon('&#xf002;'); }
.fa-icon-envelope             { .ie7icon('&#xf003;'); } 
```

font-awesome.min.css

```
@font-face{font-family: 'FontAwesome';src: url('../font/fontawesome-webfont.eot');src: url('../font/fontawesome-webfont.eot?#iefix') format('embedded-opentype'),url('../font/fontawesome-webfont.woff') format('woff'),url('../font/fontawesome-webfont.ttf') format('truetype'),url('../font/fontawesome-webfont.svg#FontAwesome') format('svg');font-weight: normal;font-style: normal;}
[class^="fa-icon-"]:before,[class*=" fa-icon-"]:before {font-family: FontAwesome;font-weight: normal;font-style: normal;display: inline-block;text-decoration: inherit;}
a[class^="fa-icon-"],a[class*=" fa-icon-"]{display: inline-block;text-decoration: inherit;}
.fa-icon-large:before{vertical-align: middle;font-size: 4/3em;}
.btn,.nav-tabs{[class^="fa-icon-"],[class*=" fa-icon-"]{line-height: .9em;}}
li{[class^="fa-icon-"],[class*=" fa-icon-"]{display: inline-block;width: 1.25em;text-align: center;}.fa-icon-large:before,.fa-icon-large:before {width: 1.5*1.25em;}}
ul.icons{list-style-type: none;margin-left: 2em;text-indent: -.8em;li {[class^="fa-icon-"],[class*=" fa-icon-"] {width: .8em;}.fa-icon-large:before,.fa-icon-large:before {vertical-align: initial;}}}

.fa-icon-glass:before                { content: "\f000"; }
.fa-icon-music:before                { content: "\f001"; }
.fa-icon-search:before               { content: "\f002"; }
.fa-icon-envelope:before             { content: "\f003"; }
.fa-icon-heart:before                { content: "\f004"; }
.fa-icon-star:before                 { content: "\f005"; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T13:13:57.107

看起来我的菜鸟错误是没有编译 ie less 文件。一旦我将 font-awesome-ie7.less 编译成一个 css 文件，然后将其包含在内，效果就很好。

# java - Selenium 2 Java 在 Selenium 服务器中运行/部署 jar

> ID：15326299
> 
> 赞同：1
> 
> 时间：2013-03-10T19:07:54.483
> 
> 标签：java, selenium, jar, intellij-idea

我一直在寻找一些 Selenium 服务器设置的答案，但我还没有找到任何确定的答案。我有一个在 10.xxx 运行的远程服务器，它带有 selenium-server-standalone-2.31.0.jar，我可以使用以下命令运行它：

java –jar selenium-server-standalone-2.31.0.jar

这很好用，我可以访问[http://xxxx:4444/wd/hub](http://x.x.x.x:4444/wd/hub)的集线器，然后打开一个页面，其中有两个选项：（1）创建会话和（2）刷新会话。当我使用 Firefox 创建会话时，屏幕上会绘制一个空网页，并且中心页面现在具有以下选项：(1) 截屏，(2) 删除会话，以及 (3) 加载脚本。在这一点上，一切似乎都很好。

在我的本地系统上使用 IntelliJ，我创建了许多将 selenium-server-standalone-2.31.0.jar 作为依赖项的测试。这些测试在 IDE 中运行良好，我可以创建一个工件，例如 myTests.jar 并在本地运行它。我将 myTests.jar 文件 SCP 到远程服务器并使用 java –jar myTests.jar 通过 VNC 运行该文件。现在这也很好用。到现在为止还挺好。

我的问题是这个。如何使用 Selenium 服务器运行 myTests.jar？我什至需要使用 Selenium 来执行此操作吗？我考虑过编写一个循环 myTests.jar 以每小时运行一次的 bash 脚本或类似的内容，但如果可能的话，我更喜欢使用 Selenium。我看过（code.google.com/p/selenium/wiki/Grid2），但我还没有找到一种方法来做到这一点，或者我是否应该以这种方式使用 Selenium。任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:27:43.727

听起来您正在尝试设置 Selenium Grid。试一试。

在您的服务器上启动 selenium 集线器：

```
java -jar selenium-server-standalone-2.31.0.jar -role hub 
```

在本地系统上将服务器作为节点启动

```
java -jar selenium-server-standalone-2.31.0.jar -role node -hub http://10.x.x.x:4444/wd/register 
```

检查[http://10.xxx:4444/wd/hub](http://10.x.x.x:4444/wd/hub)以确保您的机器已注册到集线器。然后你应该能够从服务器开始你的测试。确保您定义了 RemoteWebDriver，否则测试将尝试在本地服务器上启动。

我还建议您使用 Ant 来构建和运行您的测试。使用 bash 脚本效果很好，但我个人发现使用 Ant 更容易。

# json - 在 Zend 框架中为 Android/Iphone 应用程序创建 Json Web 服务时使用什么

> ID：15326301
> 
> 赞同：3
> 
> 时间：2013-03-10T19:08:13.990
> 
> 标签：json, zend-framework

我使用 Zend Framework 开发我的 Web 应用程序，我想为 Android 应用程序创建一个 Web 服务，内容类型将是 JSON。

创建此网络服务的最佳方法是什么？它是一个控制器吗？这个控制器将扩展动作控制器

```
class ApiController extends Frontend_Controller_Action 
```

或使用`Zend_Json_Server` . 我有点困惑，zend Json Server 会比 ApiController 更好地帮助什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T12:01:23.100

阅读 Zend_Rest_Controller。使用它代替 Zend_Controller_Action。这很简单。Zend_Rest_Controller 只是一个抽象控制器，其中包含您应该在控制器中实现的预定义操作列表。简短的例子，我在 Api 模块中像 Index Controller 一样使用它：

```
class Api_IndexController extends Zend_Rest_Controller 
{
    public function init()
    {
        $bootstrap = $this->getInvokeArg('bootstrap');
        $this->_helper->layout->disableLayout();
        $this->_helper->viewRenderer->setNoRender(TRUE);
        $this->_helper->AjaxContext()
                ->addActionContext('get','json')
                ->addActionContext('post','json')
                ->addActionContext('new','json')
                ->addActionContext('edit','json')
                ->addActionContext('put','json')
                ->addActionContext('delete','json')
                ->initContext('json');
     }

     public function indexAction()
     {
         $method = $this->getRequest()->getParam('method');
         $response = new StdClass();
         $response->status = 1;

         if($method != null){
             $response->method = $method;
             switch ($method) {
                case 'category':
                 ...
                break;
                case 'products':
                 ...
                break;
                default:
                $response->error = "Method '" . $response->method . "' not exist!!!";
             }
         }

         $content = $this->_helper->json($response);
         $this->sendResponse($content);
     }

     private function sendResponse($content){
        $this->getResponse()
           ->setHeader('Content-Type', 'json')
           ->setBody($content)
           ->sendResponse();
        exit;
     }

     public function getAction()
     {}

     public function postAction()
     {}

     public function putAction()
     {}

     public function deleteAction()
     {}
} 
```

# php - Yii：如何将 CSS 类添加到下拉列表中

> ID：15326303
> 
> 赞同：3
> 
> 时间：2013-03-10T19:08:29.570
> 
> 标签：php, yii

我正在使用 Yii 1.1.10。我想知道如何将 CSS 类添加到下拉列表中。我正在使用 CActiveForm

例如，如何将 CSS 类添加到此下拉列表中？

```
<?php echo $form->labelEx($model,'chassis'); ?>
<?php echo $form->dropDownList($model, 'chassis',
      array('saloon' => 'saloon', 'station wagon' => 'station wagon', ),
   ); 
?> 
```

**编辑：** 我的代码中有这个

```
 array('empty' => 'Select one of the following...') 
```

我在那里让它成为默认消息。但不知何故它干扰了使用

```
'htmlOptions'=>array('class'=>'yourCssClass') 
```

**或者**

```
array('class'=>'your_class_name') 
```

所以只要我删除它，这两个建议都有效！谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:38:07.250

您可以使用`htmlOptions`参数 of[`CActiveFrom::dropDownList()`](http://www.yiiframework.com/doc/api/1.1/CActiveForm#dropDownList-detail)来指定`class`，`style`或任何其他 HTML 属性。

```
<?php echo $form->labelEx($model,'chassis'); ?>
<?php echo $form->dropDownList($model, 'chassis',
      array('saloon' => 'saloon', 'station wagon' => 'station wagon', ),
      array('class'=>'your_class_name'),
   ); 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:38:13.713

这是根据 Yiiframework API 的 dropDownList 的语法

```
public string dropDownList(CModel $model, string $attribute, array $data, array $htmlOptions=array ( )) 
```

最后一部分使您可以像通常在 html 页面中那样传递任何 html 值。因此，在旅行车之后添加这个，

```
'htmlOptions'=>array('class'=>'yourCssClass'), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T05:09:36.327

显示数组值并存储数组键。

这是型号代码。

```
public function getCityOptions()
{
   $list=array('saloon' => 'saloon', 'station wagon' => 'station wagon',);
   asort($list);
   return $list;
} 
```

这是 _form.php 代码

```
<div class="row">
<?php echo $form->labelEx($model,'chassis'); ?>
<?php echo $form->dropDownList($model,'chassis',$model->getCityOptions()); ?>
<?php echo $form->error($model,'chassis'); ?>
</div> 
```

试试这个..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-15T17:00:40.810

这是一个答案。:)

```
<?php echo $form->labelEx($model,'chassis'); ?>
<?php echo $form->dropDownList($model, 'chassis',
    array('saloon' => 'saloon', 'station wagon' => 'station wagon', ),
    array('class'=>'form-control','empty' => 'Select one of the following...')
); 
?> 
```

# c# - 当 DataContext 是 ViewModel 时，将 CommandParameter 绑定到本地项目

> ID：15326307
> 
> 赞同：0
> 
> 时间：2013-03-10T19:08:48.390
> 
> 标签：c#, wpf

我的命令在我的 ViewModel 中。我需要传递嵌套了我的 Menuitem 的 DataGrid。这怎么可能 ？

```
<MenuItem Header="Delete item/s" Command="{Binding RemoveHistoryItem}" CommandParameter="{Binding ElementName=HistoryDataGrid}"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:57:21.563

您绝对不应该将 UIElement 发送回您的 ViewModel（如 Jeffery 所述）。尝试将所需的 DataGrid 属性绑定到 ViewModel，然后在命令处理程序中访问它们。

我使用了一个按钮进行说明，但这同样适用于您的 MenuItem。

视图模型：

```
public class ViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    public ICommand RemoveHistoryItemCommand { get; private set; }

    private HistoryItem _selectedHistoryItem;
    public HistoryItem SelectedHistoryItem { get { return _selectedHistoryItem; } set { _selectedHistoryItem = value; OnPropertyChanged("SelectedHistoryItem"); } }

    private ObservableCollection<HistoryItem> _historyItems = new ObservableCollection<HistoryItem>();
    public ObservableCollection<HistoryItem> HistoryItems { get { return _historyItems; } set { _historyItems = value; OnPropertyChanged("HistoryItems"); } }

    public ViewModel()
    {
        this.RemoveHistoryItemCommand = new ActionCommand(RemoveHistoryItem);

        this.HistoryItems.Add(new HistoryItem() { Year = "1618", Description = "Start of war" });
        this.HistoryItems.Add(new HistoryItem() { Year = "1648", Description = "End of war" });
    }

    // command handler
    private void RemoveHistoryItem()
    {            
        if (this.HistoryItems != null)
        {
            HistoryItems.Remove(this.SelectedHistoryItem);
        }
    }
}

public class HistoryItem
{
    public string Year { get; set; }
    public string Description { get; set; }
}

public class ActionCommand : ICommand
{
    public event EventHandler CanExecuteChanged;
    public Action _action;
    public ActionCommand(Action action)
    {
        _action = action;
    }

    public bool CanExecute(object parameter) { return true; }

    public void Execute(object parameter)
    {
        if (CanExecute(parameter))
            _action();
    }
} 
```

xml:

```
<Window.DataContext>
    <local:ViewModel />
</Window.DataContext>

<StackPanel>
    <DataGrid ItemsSource="{Binding HistoryItems}" SelectedItem="{Binding SelectedHistoryItem, Mode=TwoWay}" />
    <Button Content="Remove selected item" Command="{Binding RemoveHistoryItemCommand}" HorizontalAlignment="Left" />
</StackPanel> 
```

# url - 本地或临时数据可以用 URL 表示吗？

> ID：15326308
> 
> 赞同：0
> 
> 时间：2013-03-10T19:08:53.237
> 
> 标签：url, ember.js, url-routing

有点理论问题，虽然它来自一个现实世界的问题，在单页应用程序中创建各种对象而不立即持久化它们（见下面的链接）。

我的问题是本地或非持久数据是否可以有 URL。我认为它可以，因为在创建对象时（不一定持久）它确实存在，因此可以导航到。因此，只要数据在那里，输入它的 URL 就应该显示它。Back 和 Fwd 按钮也应该可以工作。如果刷新浏览器并再次输入 URL，会得到 404，这实际上是有道理的：“资源未（不再）找到”。

此处的真实示例是，您应该能够在记分应用程序中输入完整的分数列表，并能够在保存单个分数之前对其进行导航。EmberJS Fixtures 是一个示例，其中新对象从未真正写入磁盘，但它们被创建并且确实具有 URL。所以，在这种情况下，我说的是纯粹的内存对象/资源，而不是本地存储。

[相关问题在这里](https://stackoverflow.com/questions/15187401/ember-unsaved-models-in-dynamic-urls)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:31:13.753

我认为创建的本地数据实体`isDirty`仍然可以具有任何 UUID 的 URL，考虑到真正需要控制器来路由类似`/flowers_tmp/:flowers_id`. 非持久数据属于控制器？

# php - 使用 JQuery 解析 XML 时遇到问题

> ID：15326315
> 
> 赞同：-1
> 
> 时间：2013-03-10T19:09:38.230
> 
> 标签：php, jquery, xml, ajax

我正在做一个练习来实现一个无限滚动器，它从我设置的 MySQL 数据库中提取信息。我的滚动部分似乎可以工作，我的数据库、连接和查询在另一个文件中测试时似乎很好，而且我相信我的 XML 文件的结构是我想要的。但是，当我到达我尝试解析 XML、检索元素标签中的数据并将其附加到我的 html 的代码部分时，我在 Chrome 的检查器窗口中收到以下错误：

```
Uncaught Error: Syntax error, unrecognized expression: Resource id #2<?xml version="1.0"?>
<response><commentData>...(the rest of my XML file) 
```

我对编程很陌生，对导致问题的原因感到茫然。下面是我的代码。我有一些东西被注释掉了，所以希望这不会让任何人失望。此外，include.inc.php 文件只包含用于连接数据库和执行查询的函数。谢谢。

**AJAXscroller.html：**

```
<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8" />
    <title>Scroller with AJAX!</title>

    <link rel="stylesheet" href="styles/scroller.css" type="text/css">

    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="./include/jquery.js"></script>
    <script src="./include/scroller.js"></script>
</head>

<body>
    <div id="info"></div>

    <section id="userComments">
        <p>Lorem ipsum dolor... </p> <!-- my code longer to fill page & requre scroll -->
            <p>Lorem ipsum dolor... tulla, semper gravida magna velit eu sem.</p>
            <p>Lorem ipsum dolor... tulla, semper gravida magna velit eu sem.</p>   
            <p>Lorem ipsum dolor... tulla, semper gravida magna velit eu sem.</p>   
            <p>Lorem ipsum dolor... tulla, semper gravida magna velit eu sem.</p>       
    </section>
    <div id="loaderGif"><img src="img/220.gif"></div>

</body>
</html> 
```

**scroller.js：**

```
$(document).ready(
    function() 
    {
        $("#loaderGif").hide(); 
        var start = 0;     //variable to indicate the starting row in the db query
        var numRows = 30;  //this is the number of db rows to fetch with each query

        $(window).scroll(
            function()
            {
                var top = $(this).scrollTop();
                var txt = "scrollTop: " + top + 
                          "<br/>Win H: " + $(this).height() + 
                          "<br/>Page H: " + ($(this).height() + top) +
                          "<br/>Doc H: " + $(document).height();

                $("#info").html(txt);

            if ($(window).scrollTop() >= $(document).height() - $(window).height()) 
                {
                    $("#loaderGif").fadeIn(2000);
                    $.post("./include/AJAXscroll.php", {m: start, n: numRows}, function(xml) 
                       {
                           //code that happens when we get response

                           $("commentData", xml).each(
                               function()
                               {

                                   var userName = $(this).find("username").text();
                                   var comment = $(this).find("comment").text();
                                   var created = $(this).find("created").text();

                                   var str = "<hr><p>" + userName + " commented at " + created + "</p>" + comment;  

                                   $("#userComments").append(str);
                                   $("#loaderGif").fadeOut(2000);                          

                               }
                           );
                        }
                    ); 
                }  
            }
        );  
    }
); 
```

**AJAXscroll.php：**

```
<?php

    include ("./include.inc.php");
    $link = connect();
    $db = "myTestDB";

    $m = $_POST["m"];
    $n = $_POST["n"];

    $sql = "SELECT * FROM comments WHERE username='Donna' ORDER BY created DESC LIMIT 0,30";
//  $sql = "SELECT * FROM comments WHERE username='Donna' ORDER BY created DESC LIMIT " . m . "," . n;
    $res = send_sql($sql, $link, $db);
    echo $res;

    $dom = new DOMDocument();
    $response = $dom->createElement("response");
    while ($row = mysql_fetch_assoc($res))         // create the XML file
    {
        $commentData = $dom->createElement("commentData");

        $username = $dom->createElement("username");
        $usernameValue = $dom->createTextNode($row["username"]);
        $username->appendChild($usernameValue);

        $comment = $dom->createElement("comment");
        $commentValue = $dom->createTextNode($row["comment"]);
        $comment->appendChild($commentValue);

        $created = $dom->createElement("created");
        $createdValue = $dom->createTextNode($row["created"]);
        $created->appendChild($createdValue);

        $commentData->appendChild($username);  
        $commentData->appendChild($comment);
        $commentData->appendChild($created);

        $response->appendChild($commentData);
     }  
     $dom->appendChild($response);
     $xmlString = $dom->saveXML();
//   $dom->save("myXML.xml");
     header('Content-type: text/xml'); 
     echo $xmlString;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:13:40.363

您在 xml 数据之前回显内容，这会导致解析 xml 出现问题。删除`echo $res;`，您应该可以很好地解析 xml。

# function - 合金函 数输出二元关系

> ID：15326317
> 
> 赞同：0
> 
> 时间：2013-03-10T19:09:43.397
> 
> 标签：function, alloy

谁能告诉我如何使用 Alloy 中的函数输出二元关系？例如，学生与老师链接，学生也与课程链接。如何将学生作为输入，然后输出教师与课程之间的二元关系？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:40:32.890

像这样的东西？

```
sig Course {}
sig Teacher {}
sig Student {
  teacher: one Teacher, 
  course: some Course
}

fun binrel [s: Student]: Teacher -> Course {
  s.teacher -> s.course
}

run {
  some s: Student | (#binrel[s] > 2)
} 
```

从函数返回二元关系没有特殊规则。我假设您的问题更多关于关系乘积运算符 ( `->`)，在这种情况下您需要使用它来从两个标量（或两个一元关系）构造二元关系

# xml - 实施角色提供者的麻烦

> ID：15326318
> 
> 赞同：0
> 
> 时间：2013-03-10T19:09:54.733
> 
> 标签：xml, asp.net-mvc, connection-string

它告诉我连接字符串不正确，并且不支持“元数据”关键字。

**连接字符串**：在我生成模型时自动创建

```
<connectionStrings>
    <add name="DataContext"  connectionString="metadata=res://*/Models.Model.csdl|res://*/Models.Model.ssdl|res://*/Models.Model.msl;
      provider=System.Data.SqlClient;
      provider connection string='data source=.\SQLEXPRESS;
      initial catalog=&quot;Phase 2&quot;;
      integrated security=True;
      multipleactiveresultsets=True;
      application name=EntityFramework'" 
      providerName="System.Data.EntityClient" />
</connectionStrings> 
```

**角色管理器**：将 connectionStringName 设置为上面的连接字符串的名称

```
<roleManager enabled="true">
  <providers>
    <clear />
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="DataContext" applicationName="/" />
  </providers>
</roleManager> 
```

当我调用*Roles.CreateRole*方法时，它给了我以下错误

```
An error occurred while attempting to initialize a System.Data.SqlClient.SqlConnection     object. The value that was provided for the connection string may be wrong, or it may contain an invalid syntax. 
```

内在例外

```
{"Keyword not supported: 'metadata'."} 
```

有任何想法吗？

# c# - 卸载 swf 电影

> ID：15326324
> 
> 赞同：1
> 
> 时间：2013-03-10T19:10:13.943
> 
> 标签：c#, flash

我可以通过一个`axShockwaveFlash`对象将一个 swf 文件加载到我的 C# 程序中，但我必须通过单击用户按钮来关闭它。我尝试了以下所有可能性的代码，但没有一个起作用。

```
axShockwaveFlash1.Movie = "";  
axShockwaveFlash1.Movie = string.Empty;  
axShockwaveFlash1.Movie = null;  
axShockwaveFlash1.Playing = false; 
```

你知道如何“卸载”一个 swf 文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T22:11:43.607

只需从 Windows 窗体控件集合中删除 Flash 控件。这是我实现它的方法（下面的代码经过测试并且可以完美运行）：

```
public partial class Form1 : Form
{
    private AxShockwaveFlashObjects.AxShockwaveFlash axFlash;

    public Form1()
    {
        InitializeComponent();

        axFlash = new AxShockwaveFlashObjects.AxShockwaveFlash();  
        axFlash.BeginInit();  
        axFlash.Location = new Point(50, 50);  
        axFlash.Name = "Load/unload test";  
        axFlash.TabIndex = 0; 
        axFlash.EndInit(); 
    }

    private void startButton_Click(object sender, EventArgs e)
    {
        axFlash = new AxShockwaveFlashObjects.AxShockwaveFlash();
        axFlash.BeginInit();
        axFlash.Location = new Point(50, 80);
        axFlash.Name = "Test Movie";
        axFlash.TabIndex = 0;

        axFlash.Size = new Size(640, 480);
        axFlash.EndInit();
        this.Controls.Add(axFlash);
        axFlash.LoadMovie(0, @"C:\Movies\MyMovie.swf");
    }

    private void unloadButton_Click(object sender, EventArgs e)
    {
        this.Controls.Remove(axFlash);
    }
} 
```

# c# - 如何使我的鼠标控制程序在所有窗口上都处于活动状态

> ID：15326327
> 
> 赞同：0
> 
> 时间：2013-03-10T19:10:33.263
> 
> 标签：c#, mouse

我正在创建一个程序 - 使用 C# - 使用 USB 连接设备来控制鼠标，所以现在我正在制作一个小的 Windows 窗体程序，它使用键盘来实现相同的目的，但我遇到了一个问题，每个当我单击表单时，我的控件不再起作用，有什么建议吗？

我使用user32.dll，VS2008

注意：设备是 EMOTIV EPOC

# javascript - 引用 javascript 文件时出现 IIS throwig 错误？

> ID：15326328
> 
> 赞同：0
> 
> 时间：2013-03-10T19:10:39.400
> 
> 标签：javascript, jquery, asp.net, iis, visual-studio-2012

我在搞乱一个母版页，我想使用 jquery 和另一个 javascript 文件来创建一个简单的模板。

我有一个我不明白的奇怪问题，当我在浏览器上运行 apsx 时，我没有看到我在 javascript 文件中所做的更改。当我查看代码 [查看 chrome 上的源代码] 并尝试查看 javascript 文件和 jquery 1 上的代码时，出现错误

> 请求过滤模块用于拒绝包含双转义序列的请求。

这就是我引用头部元素中的字段的方式：

```
<head runat="server">

<script type="text/javascript" src="../Jquery1.6+vsdoc/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="Main.js"></script> 
```

可能是什么问题？

如果有帮助，我正在使用 Visual Studio 2012。（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:20:56.547

调整 Javasdcript 文件的名称，使其不包含加号。

`../Jquery1.6+vsdoc/jquery-1.7.1.min.js`

到

`../Jquery1.6_vsdoc/jquery-1.7.1.min.js`

这个加号是双重转义，默认情况下在 IIS 中被阻止。

# php - imap_fetchstructure：如何区分嵌入图像和附件？

> ID：15326329
> 
> 赞同：2
> 
> 时间：2013-03-10T19:10:47.367
> 
> 标签：php, imap

我正在研究一个解析电子邮件收件箱的脚本。如何判断消息部分是附件还是嵌入图像？此示例邮件是由一位用户发送的，他告诉我他的客户嵌入了图像，但 disposition="Attachment" 看起来像附加图像，我看到 AppleMail 使用“内联”，这似乎更合理......

我还检查了 msg-text 以查看它是否引用了附加的文件，但在这个示例中也没有对文件的引用——但用户坚持认为它们是嵌入的，而不是附加的。

消息结构：

```
object(stdClass)#218 (12) {
  ["type"]=>
  int(1)
  ["encoding"]=>
  int(0)
  ["ifsubtype"]=>
  int(1)
  ["subtype"]=>
  string(5) "MIXED"
  ["ifdescription"]=>
  int(0)
  ["ifid"]=>
  int(0)
  ["bytes"]=>
  int(262312)
  ["ifdisposition"]=>
  int(0)
  ["ifdparameters"]=>
  int(0)
  ["ifparameters"]=>
  int(1)
  ["parameters"]=>
  array(1) {
    [0]=>
    object(stdClass)#219 (2) {
      ["attribute"]=>
      string(8) "BOUNDARY"
      ["value"]=>
      string(37) "----_=_NextPart_001_01CE168A.AE40BD2E"
    }
  }
  ["parts"]=>
  array(5) {
    [0]=>
    object(stdClass)#220 (12) {
      ["type"]=>
      int(1)
      ["encoding"]=>
      int(0)
      ["ifsubtype"]=>
      int(1)
      ["subtype"]=>
      string(11) "ALTERNATIVE"
      ["ifdescription"]=>
      int(0)
      ["ifid"]=>
      int(0)
      ["bytes"]=>
      int(4237)
      ["ifdisposition"]=>
      int(0)
      ["ifdparameters"]=>
      int(0)
      ["ifparameters"]=>
      int(1)
      ["parameters"]=>
      array(1) {
        [0]=>
        object(stdClass)#221 (2) {
          ["attribute"]=>
          string(8) "BOUNDARY"
          ["value"]=>
          string(37) "----_=_NextPart_002_01CE168A.AE40BD2E"
        }
      }
      ["parts"]=>
      array(2) {
        [0]=>
        object(stdClass)#222 (12) {
          ["type"]=>
          int(0)
          ["encoding"]=>
          int(4)
          ["ifsubtype"]=>
          int(1)
          ["subtype"]=>
          string(5) "PLAIN"
          ["ifdescription"]=>
          int(0)
          ["ifid"]=>
          int(0)
          ["lines"]=>
          int(21)
          ["bytes"]=>
          int(204)
          ["ifdisposition"]=>
          int(0)
          ["ifdparameters"]=>
          int(0)
          ["ifparameters"]=>
          int(1)
          ["parameters"]=>
          array(1) {
            [0]=>
            object(stdClass)#223 (2) {
              ["attribute"]=>
              string(7) "CHARSET"
              ["value"]=>
              string(10) "iso-8859-1"
            }
          }
        }
        [1]=>
        object(stdClass)#224 (12) {
          ["type"]=>
          int(0)
          ["encoding"]=>
          int(4)
          ["ifsubtype"]=>
          int(1)
          ["subtype"]=>
          string(4) "HTML"
          ["ifdescription"]=>
          int(0)
          ["ifid"]=>
          int(0)
          ["lines"]=>
          int(97)
          ["bytes"]=>
          int(3709)
          ["ifdisposition"]=>
          int(0)
          ["ifdparameters"]=>
          int(0)
          ["ifparameters"]=>
          int(1)
          ["parameters"]=>
          array(1) {
            [0]=>
            object(stdClass)#225 (2) {
              ["attribute"]=>
              string(7) "CHARSET"
              ["value"]=>
              string(10) "iso-8859-1"
            }
          }
        }
      }
    }
    [1]=>
    object(stdClass)#226 (14) {
      ["type"]=>
      int(5)
      ["encoding"]=>
      int(3)
      ["ifsubtype"]=>
      int(1)
      ["subtype"]=>
      string(3) "BMP"
      ["ifdescription"]=>
      int(1)
      ["description"]=>
      string(7) "bmp.bmp"
      ["ifid"]=>
      int(0)
      ["bytes"]=>
      int(191348)
      ["ifdisposition"]=>
      int(1)
      ["disposition"]=>
      string(10) "ATTACHMENT"
      ["ifdparameters"]=>
      int(1)
      ["dparameters"]=>
      array(1) {
        [0]=>
        object(stdClass)#227 (2) {
          ["attribute"]=>
          string(8) "FILENAME"
          ["value"]=>
          string(7) "bmp.bmp"
        }
      }
      ["ifparameters"]=>
      int(1)
      ["parameters"]=>
      array(1) {
        [0]=>
        object(stdClass)#228 (2) {
          ["attribute"]=>
          string(4) "NAME"
          ["value"]=>
          string(7) "bmp.bmp"
        }
      }
    }
    [2]=>
    object(stdClass)#229 (14) {
      ["type"]=>
      int(5)
      ["encoding"]=>
      int(3)
      ["ifsubtype"]=>
      int(1)
      ["subtype"]=>
      string(3) "GIF"
      ["ifdescription"]=>
      int(1)
      ["description"]=>
      string(7) "gif.gif"
      ["ifid"]=>
      int(0)
      ["bytes"]=>
      int(12178)
      ["ifdisposition"]=>
      int(1)
      ["disposition"]=>
      string(10) "ATTACHMENT"
      ["ifdparameters"]=>
      int(1)
      ["dparameters"]=>
      array(1) {
        [0]=>
        object(stdClass)#230 (2) {
          ["attribute"]=>
          string(8) "FILENAME"
          ["value"]=>
          string(7) "gif.gif"
        }
      }
      ["ifparameters"]=>
      int(1)
      ["parameters"]=>
      array(1) {
        [0]=>
        object(stdClass)#231 (2) {
          ["attribute"]=>
          string(4) "NAME"
          ["value"]=>
          string(7) "gif.gif"
        }
      }
    }
    [3]=>
    object(stdClass)#232 (14) {
      ["type"]=>
      int(5)
      ["encoding"]=>
      int(3)
      ["ifsubtype"]=>
      int(1)
      ["subtype"]=>
      string(4) "JPEG"
      ["ifdescription"]=>
      int(1)
      ["description"]=>
      string(7) "jpg.jpg"
      ["ifid"]=>
      int(0)
      ["bytes"]=>
      int(25642)
      ["ifdisposition"]=>
      int(1)
      ["disposition"]=>
      string(10) "ATTACHMENT"
      ["ifdparameters"]=>
      int(1)
      ["dparameters"]=>
      array(1) {
        [0]=>
        object(stdClass)#233 (2) {
          ["attribute"]=>
          string(8) "FILENAME"
          ["value"]=>
          string(7) "jpg.jpg"
        }
      }
      ["ifparameters"]=>
      int(1)
      ["parameters"]=>
      array(1) {
        [0]=>
        object(stdClass)#234 (2) {
          ["attribute"]=>
          string(4) "NAME"
          ["value"]=>
          string(7) "jpg.jpg"
        }
      }
    }
    [4]=>
    object(stdClass)#235 (14) {
      ["type"]=>
      int(3)
      ["encoding"]=>
      int(3)
      ["ifsubtype"]=>
      int(1)
      ["subtype"]=>
      string(12) "OCTET-STREAM"
      ["ifdescription"]=>
      int(1)
      ["description"]=>
      string(7) "pdf.pdf"
      ["ifid"]=>
      int(0)
      ["bytes"]=>
      int(27834)
      ["ifdisposition"]=>
      int(1)
      ["disposition"]=>
      string(10) "ATTACHMENT"
      ["ifdparameters"]=>
      int(1)
      ["dparameters"]=>
      array(1) {
        [0]=>
        object(stdClass)#236 (2) {
          ["attribute"]=>
          string(8) "FILENAME"
          ["value"]=>
          string(7) "pdf.pdf"
        }
      }
      ["ifparameters"]=>
      int(1)
      ["parameters"]=>
      array(1) {
        [0]=>
        object(stdClass)#237 (2) {
          ["attribute"]=>
          string(4) "NAME"
          ["value"]=>
          string(7) "pdf.pdf"
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-05T17:48:26.417

通过 [ifid] 检查图像是否内联的最佳方法。我检查了各种邮件应用程序。他们以不同的方式处理内联附件。Zoho Mail 标志着

[处置] => 内联

实时邮件标记

[处置] => 附件

两人都设

[ifid] => 1 [id] => <0.28876465441.6812139177583476518.150d8a30c19__inline__img__src>

如果`[ifid] => 1`那么它是一个内联图像，[id] 将是图像 cid。下载内联附件并替换

src="cid:0.28876465441.6812139177583476518.150d8a30c19__inline__img__src"

与下载的路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:59:54.790

嵌入图像将是“多部分/相关”类型的 MIME 正文部分的第二个和后续子代。附加图像将是“multipart/mixed”类型的 MIME 正文部分的子项。

# c++ - 在 C++ 中使用布尔值设置二维数组的值

> ID：15326330
> 
> 赞同：0
> 
> 时间：2013-03-10T19:10:49.877
> 
> 标签：c++, multidimensional-array, boolean

我正在做航空公司预订项目，我的要求是，当一个座位被占用时，它显示一个`*`，当它是空的时，它显示一个`#`。我想将数组设置为布尔值，所以如果它是 false 则为 a `#`，如果为 true 则为 a `*`。这行得通还是我走远了？有没有更简单的方法来做到这一点？

```
bool seatFirst[4][3];
if(seatFirst == true)
    cout << "*" << endl;
else
    cout << "#"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:15:18.373

那是行不通的，因为您正在测试数组本身，这将评估为真。您需要测试单个元素。也不需要检查 a `bool`，`true`你可以做`if (theBool). Finally, you cannot append`endl `; to a string literal, you need to "stream" it with an`operator<<`。

在这里，使用[三元运算符](http://en.wikipedia.org/wiki/%3F%3a#C.2B.2B)使代码更简洁：

```
std::cout << (seatFirst[i][j] ? "*" : "#") << std::endl; 
```

# css - 表格对齐问题

> ID：15326333
> 
> 赞同：1
> 
> 时间：2013-03-10T19:10:58.617
> 
> 标签：css

我在对齐表单上的元素时遇到困难，需要一些帮助。CSS 不是我的强项！

我想对齐“容量”和“周” - 以及“公园”、“演讲风格”和“房间结构”右侧的滑块。（即作为新列）

其次，我想在 4 行中正确对齐复选框。

到目前为止，这是我的代码，我在[这里](http://jsfiddle.net/rRDpj/)包含了一个 jsfiddle ：

```
<div id="search-1">
    <label>Park</label>
    <select name="">
        <option></option>
    </select>
    <br />
    <label>Lecture Style</label>
    <select name="">
        <option></option>
    </select>
    <br />
    <label>Room Structure</label>
    <select name="">
        <option></option>
    </select>
    <br />
    <label>Capacity</label>
    <input type="text" class="slider_text" disabled="disabled"
    />
    <br />
    <div class="slider"></div>
    <label>Week</label>
    <input type="text" class="slider_text2" disabled="disabled"
    />
    <br />
    <div class="slider2"></div>
    <label>Facilities</label>
    <input type="checkbox" name="fac">Chalk board
    <input type="checkbox" name="fac">Computer
    <input type="checkbox" name="fac">Data projector
    <input type="checkbox" name="fac">Dual data projector
    <input type="checkbox" name="fac">Induction loop
    <input type="checkbox" name="fac">Microphone
    <input type="checkbox" name="fac">OHP
    <input type="checkbox" name="fac">Review
    <input type="checkbox" name="fac">Visualiser
    <input type="checkbox" name="fac">Wheelchair access</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:19:57.107

这是第一次尝试：http: [//jsfiddle.net/h4Xxs/](http://jsfiddle.net/h4Xxs/)

*   2 列（浮动 div，每列宽度为 50%）
*   每个标签都被放入一个`label`元素中，而事实并非如此
*   `for`每个标签都通过/属性与其表单元素相关联`id`（您可以单击一个标签，这将选择其表单元素。而且它更易于访问）
*   带有图例的字段集中的一堆单选按钮。如果没有边框并且图例上带有图例，您将无法识别上面带有图例的众所周知的灰色边框。该字段集`clear: both`通过类具有`.clear`，因为前`div`两个是浮动的。
*   所有单选按钮及其新标签都在一个不会位于浮动图例下方的 div 中，因为此 div 正在通过创建格式化上下文`overflow: hidden`（否则第二行单选按钮将在图例下方开始，如您所见`img { float: left }`在大多数文本中，文本向右，然后在 a 下方）
*   4 列单选按钮，但它并不完美，因为一个标签需要 2 行，每个标签上的现有宽度为 8em。不确定它应该是什么样子，所以我只`span`将之前添加的 s 垂直对齐到顶部（否则真的很难看）。随意修改他们的布局，以满足您的需求。

就是这样。错误，删除我添加的所有轮廓，它们只是为了更好地理解！

HTML：

```
<div id="search-1">
    <div class="left w50">
        <p>
            <label for="a1">Park</label>
            <select name="" id="a1">
                <option></option>
            </select>
        </p>
        <p>
            <label for="a2">Lecture Style</label>
            <select name="" id="a2">
                <option></option>
            </select>
        </p>
        <p>
            <label for="a3">Room Structure</label>
            <select name="" id="a3">
                <option></option>
            </select>
        </p>
    </div>
    <div class="left w50">
        <p>
            <label for="b1">Capacity</label>
            <input type="text" class="slider_text" disabled="disabled" id="b1">
        </p>
        <div class="slider"></div>
        <label for="b2">Week</label>
        <input type="text" class="slider_text2" disabled="disabled" id="b2"
        />
        <div class="slider2"></div>
    </div>

    <fieldset class="clear">
        <legend>Facilities</legend>
        <div class="item">
        <span>
            <input type="checkbox" name="fac" id="ch1"><label for="ch1">Chalk board</label>
        </span>
        <span>
            <input type="checkbox" name="fac" id="ch2"><label for="ch2">Computer</label>
        </span>
        <span>
            <input type="checkbox" name="fac" id="ch3"><label for="ch3">Data projector</label>
        </span>
        <span>
            <input type="checkbox" name="fac" id="ch4"><label for="ch4">Dual data projector</label>
        </span>
        <span>
            <input type="checkbox" name="fac" id="ch5"><label for="ch5">Induction loop</label>
        </span>
        <span>
            <input type="checkbox" name="fac" id="ch6"><label for="ch6">Microphone</label>
        </span>
        <span>
            <input type="checkbox" name="fac" id="ch7"><label for="ch7">OHP</label>
        </span>
        <span>
            <input type="checkbox" name="fac" id="ch8"><label for="ch8">Review</label>
        </span>
        <span>
            <input type="checkbox" name="fac" id="ch9"><label for="ch9">Visualiser</label>
        </span>
        <span>
            <input type="checkbox" name="fac" id="ch10"><label for="ch10">Wheelchair access</label>
        </span>
            </div>
    </fieldset>
</div> 
```

CSS：

```
body {
    font-family: 'segoe ui', arial, helvetica, sans-serif;
    padding-right: 20px;
    font-size: 14px;
}
.left {
    float: left;
    outline: 1px dotted green;
}
.clear {
    clear: both;
}
.w50 {
    width: 50%;
}

label {
    width: 8em;
    float: left;
    text-align: left;
    display: block;
}
select {
    width: 12em;
}
.slider, .slider2 {
    width: 100%;
    margin-top: 5px;
}
input {
    border: none;
    font-family:'segoe ui', arial, helvetica, sans-serif !important;
    font-size: 14px;
    padding: 0px;
    background-color: transparent;
}

fieldset {
    border: none;
    outline: 1px dashed blue;
}
fieldset > legend {
    float: left;
    padding: 0 1em 0 0;
    margin: 0;
}
fieldset .item {
    overflow: hidden;
    margin: 0;
    padding: 0;
}
fieldset span {
    display: inline-block;
    width: 24%;
    outline: 1px dashed red;
}
fieldset label {
    float: none;
    display: inline-block;
    vertical-align: top;
} 
```

# php - MySQL - 显示计数结果

> ID：15326335
> 
> 赞同：0
> 
> 时间：2013-03-10T19:11:20.153
> 
> 标签：php, mysql, database, count

我只是想在 MySQL (PHP) 中显示一个咨询的结果。代码是：

```
$example = mysql_query("SELECT count(*) as text FROM table WHERE name = '$name'");
$qtd = mysql_num_rows($example);
while($data = mysql_fetch_array($qtd)){
$count = $data["text"];
}

echo "<h3>($count)</h3>"; 
```

> 错误：警告：mysql_num_rows()：提供的参数不是第 9 行 C:\AppServ\www\Site\index.php 中的有效 MySQL 结果资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:13:17.763

改变这个

```
 while($data = mysql_fetch_array($qtd)){
 $count = $data["text"];
 } 
```

至

```
while($data = mysql_fetch_array($example)){
 $count = $data["text"];
  } 
```

**编辑：** 你不需要在这里做一个while循环。

你应该这样做

```
 $example = mysql_query("SELECT count(*) as text FROM table WHERE name = '$name'");
     $data = mysql_fetch_array($example) ;
     $count = $data["text"];
     echo "<h3>".$count."</h3>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:26:32.510

这应该有效，您不需要使用 while 语句。

```
$query = mysql_query("SELECT * FROM table WHERE name = '$name'");
$count = mysql_num_rows($query);
echo $count; 
```

# ember.js - Ember.js - 查看 isVisible（或任何变量）绑定到控制器状态

> ID：15326337
> 
> 赞同：4
> 
> 时间：2013-03-10T19:11:32.783
> 
> 标签：ember.js

如文档中所述，控制器不应调用其关联视图的方法或更改属性，而是视图应绑定其关联控制器的状态。

有这个：

```
App.MyController = Ember.Controller.extend({
    myViewVisible:false,
    toggleViewVisibitity:function(){
        this.set('myViewVisible', !this.get('myViewVisible'));
    }
}
App.MyView = Ember.View.extend({
    isVisible:function(){
        return this.get('myViewVisible');
    }.observes('myViewVisible')
} 
```

当我从另一个控制器调用 toggleViewVisibility 时，视图中没有任何反应。

我怎样才能使它正确？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T22:14:33.927

它应该以这种方式工作：

```
App.MyController = Ember.Controller.extend({
    myViewVisible:false,
    toggleViewVisibitity:function(){
        this.set('myViewVisible', !this.get('myViewVisible'));
    }
}
App.MyView = Ember.View.extend({
    isVisible:function(){
        return this.get('controller.myViewVisible');
    }.property('controller.myViewVisible'),
    // even shorter version of the above
    isVisible : Ember.computed.alias("controller.myViewVisible")
} 
```

**需要对您的代码进行更改：**

1.  **我将 View 的 isVisible 属性从观察者更改为属性。**每次被监视的属性更改时，观察者都会触发（= 函数执行）。所以这不是你需要的。但是您想将其定义为属性，以便 Ember 可以像这样访问它：view.get("isVisible")。因此我将其更改为属性。
2.  我更改了您的属性的依赖键。**控制器被分配给您在属性控制器上的视图。**因此，您需要在所需的属性前面加上控制器才能访问它。
3.  **如您所见，在 Ember.computed.alias 的帮助下**，我还提供了此逻辑的更短版本，但我想先向您展示更详细的解决方案。

# ios - 将 Facebook 好友姓名传递到文本字段时出现问题

> ID：15326339
> 
> 赞同：2
> 
> 时间：2013-03-10T19:11:53.423
> 
> 标签：ios, objective-c, facebook, facebook-graph-api

我正在选择一个 Facebook 朋友。我想在启动 facebook 朋友选择器的文本字段中显示 facebook 朋友的名字。

谢谢！

此外，获取用户字符串名称和选择要发送对象的朋友之间有区别吗？因为这就是用户要做的事情。因此，我需要显示用户名的字符串值，但我还必须将对象与该用户相关联。

```
-(IBAction)cancelList;
-(IBAction)submitList;
-(IBAction)datePicker;

@property (strong, nonatomic) IBOutlet UITextField *listFieldText;
@property (strong, nonatomic) IBOutlet UITextField *dateFieldText;
@property (strong, nonatomic) IBOutlet UITextField *wallPostText;
@property (strong, nonatomic) IBOutlet UITextField *friendsName;
@property (retain, nonatomic) UIDatePicker *pick;
@property (strong, nonatomic) UIImage *profilePic;

@property (retain, nonatomic) PF_FBFriendPickerViewController *friendPickerController; 
```

执行：

```
- (void)textFieldDidBeginEditing:(UITextField *)sender
{
    sender.delegate = self;
    if([sender isEqual:dateFieldText])
    {
        UIBarButtonItem *doneButton = [[UIBarButtonItem alloc]
                                       initWithTitle:@"Save Date"
                                       style:UIBarButtonItemStyleDone
                                       target:self
                                       action:@selector(datePicker)];
        self.navigationItem.rightBarButtonItem = doneButton;
        pick = [[UIDatePicker alloc] init];
        [pick setFrame:CGRectMake(0,200,320,120)];
        //[pick addTarget:self action:@selector(done) forControlEvents:UIControlEventValueChanged];
        dateFieldText.delegate = self;
        dateFieldText.inputView = pick;
    }
    else if ([sender isEqual:friendsName])
    {
        NSLog(@"Pick a friend!");

        if (self.friendPickerController == nil) {
            // Create friend picker, and get data loaded into it.
            self.friendPickerController = [[PF_FBFriendPickerViewController alloc] init];
            self.friendPickerController.title = @"Select Friends";
            self.friendPickerController.delegate = self;
            self.friendPickerController.allowsMultipleSelection = NO;
        }
        [self.friendPickerController loadData];
        [self.friendPickerController clearSelection];
        [self presentModalViewController:self.friendPickerController animated:YES];

    }
    else{
        UIBarButtonItem *submitButton = [[UIBarButtonItem alloc]
                                         initWithTitle:@"Done"
                                         style:UIBarButtonItemStyleDone
                                         target:self
                                         action:@selector(submitList)]; //change this

          self.navigationItem.rightBarButtonItem = submitButton;

        }
    }

-(void)updateFriendTextField:(NSString*)subtitle
{
    friendsName.text = subtitle;
}

/*
-(void)updateSelections
{
    NSString* friendsSubtitle = @"Selected friends";
    id<PF_FBGraphUser> friend = [self.selectedFriends objectAtIndex:0];
    friendsSubtitle = friend.name;
    [self updateFriendTextField:friendsSubtitle];

    //[self handlePickerDone];
}
*/

-(void)friendPickerViewControllerDataDidChange:(PF_FBFriendPickerViewController *)friendPicker {
    NSLog(@"Current friend selections: %@", friendPicker.selection); 

}

- (void)dealloc
{
    friendPickerController.delegate = nil;
}

- (void)facebookViewControllerCancelWasPressed:(id)sender
{
    [self.presentingViewController dismissViewControllerAnimated:YES completion:nil];
    NSLog(@"Friend selection cancelled.");
    //[self handlePickerDone];
}

- (void)facebookViewControllerDoneWasPressed:(id)sender
{

    NSLog(@"Done was pressed.");
    //[self updateSelections];
    [self.presentingViewController dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T21:48:13.493

这个答案有多种解决方案。

就个人而言，我喜欢使用全局标头，因为从我的角度来看，它是最有效的。

我会创建一个头文件并将其命名为“global.h”

在该头文件中，我将创建以下内容：

`NSString* friendsName;
NSString* wallPostText;
NSString* dateFieldText;
NSString* listFieldText;` 

接下来，我将在应用程序首次启动时在应用程序委托中初始化这些对象，只需调用`friendsName = @"friend";`

稍后，当您实际从选择中收到朋友姓名时，将该姓名保存到该全局变量中，friendsName！

请记住将#import "global.h" 导入到所有需要访问这些变量的类中！

第二种方法是在您希望访问这些变量的类中创建一个局部变量。

`@property(nonatomic) NSString *friendsName;`

当您推送新的 UIViewController 时，您可以在初始化后立即通过它，如下所示：

`ViewControllerB *viewControllerB = [[ViewControllerB alloc] initWithNib:@"ViewControllerB" bundle:nil];
viewControllerB.friendsName = "Mark";
[self pushViewController:viewControllerB animated:YES];` 

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T00:23:03.397

您可以将它从friendPicker.selection 保存在您的委托方法之一（`friendPickerViewControllerSelectionDidChange`或`friendPickerViewControllerDataDidChange`）中。

数组中的项目是`PF_FBGraphUser`对象，因此您可以保存它们并使用您需要的任何内容 `PF_FBGraphUser`：

```
@property (retain, nonatomic) NSString *id;
@property (retain, nonatomic) NSString *name;
@property (retain, nonatomic) NSString *first_name;
@property (retain, nonatomic) NSString *middle_name;
@property (retain, nonatomic) NSString *last_name;
@property (retain, nonatomic) NSString *link;
@property (retain, nonatomic) NSString *username;
@property (retain, nonatomic) NSString *birthday;
@property (retain, nonatomic) id<PF_FBGraphPlace> location; 
```

# javascript - 单击另一个 DIV 时，无法将 DIV 获取到 .fadeOut()

> ID：15326340
> 
> 赞同：1
> 
> 时间：2013-03-10T19:12:00.027
> 
> 标签：javascript, jquery

我正在尝试制作用户双击图标的东西，然后与图标的类值具有相同 id 值的 DIV 淡出。我有一些这样的作品，但由于某种原因，它只适用于第一个 DIV。这是我当前的代码：

```
$('#icon').on('dblclick', function() {
    var app = $(this).attr('class');
    $('#' + app + '').fadeOut(200);
}); 
```

你可以在这里看到它的作用：http: [//jsfiddle.net/TheInfection/JpMRC/](http://jsfiddle.net/TheInfection/JpMRC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:14:17.573

那是因为您为多个元素使用一个 ID，ID 必须是唯一的，jQuery 只选择具有特定 ID 的第一个元素，您应该使用`class`es 或`data-*`attributes 代替。

```
<div data-target="one" class="icon">one</div>
<div data-target="two" class="icon">two</div>
<div data-target="three" class="icon">three</div>

<div id="one" class="box">One</div>
<div id="two" class="box">Two</div>
<div id="three" class="box">Three</div> 
```

```
$('.icon').on('dblclick', function() {
    var target = $(this).data('target');
    $('#' + target).fadeOut(200);
}); 
```

[http://jsfiddle.net/VqWJp/](http://jsfiddle.net/VqWJp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:24:23.590

html:

```
<div class="icon one"></div>
<div class="icon two"></div>
<div class="icon three"></div>

<div id="one" class="box">One</div>
<div id="two" class="box">Two</div>
<div id="three" class="box">Three</div> 
```

js:

```
$('.icon').on('dblclick', function() {
    var app = $(this).attr('class').split(' ')[1];
    $('#' + app).fadeOut(200);
}); 
```

upd: previous decision is better, I think.

# asp.net-mvc - ActionLink 在尝试隐藏控制器时将控制器参数添加到链接

> ID：15326342
> 
> 赞同：0
> 
> 时间：2013-03-10T19:12:00.283
> 
> 标签：asp.net-mvc

我想根据组的值制作控制器，所以我有以下路线：

```
routes.MapRoute(
     name: "Default",
     url: "{group}/{action}",
     defaults: new { group = "Default", action = "Index" }
).RouteHandler = new MyRouteHandler(); 
```

使用以下 routehandler 和 httphandler：

```
public class MyRouteHandler : IRouteHandler
{
    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        return new MyHttpHandler(requestContext);
    }
}

public class MyHttpHandler : IHttpHandler
{
    RequestContext _requestContext;

    public MyHttpHandler(RequestContext requestContext)
    {
        _requestContext = requestContext;
    }

    public bool IsReusable
    {
        get { return true; }
    }

    public void ProcessRequest(HttpContext context)
    {
        var groupName = _requestContext.RouteData.GetRequiredString("group");

        // Select the controller, e.g. Home:

        _requestContext.RouteData.Values.Add("controller", "Home");

        IControllerFactory factory = ControllerBuilder.Current.GetControllerFactory();
        IController controller = factory.CreateController(_requestContext, "Home");
        if (controller != null)
        {
            controller.Execute(_requestContext);
        }
    }
} 
```

这一切都有效，但如果在页面上放置 @Html.ActionLink("Index", "Index") ，则会产生以下链接：

[a href="/?controller=Home"]索引[/a]

有人能告诉我为什么在使用 Html.ActionLink 时要添加控制器参数吗？（我不想将 controller=Home 参数添加到链接中。）

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:22:10.493

可能的解决方案

```
routes.MapRoute(
   name: "Default",
   url: "{group}/{action}/{controller}",
   defaults: new { group = "Default", action = "Index", controller = "Home" }
);

@Html.ActionLink("Index", "Index", new {group = "Group"}); 
```

# c# - 如何在 Windows 窗体应用程序中设置任何网站进程的进度条

> ID：15326343
> 
> 赞同：1
> 
> 时间：2013-03-10T19:12:02.180
> 
> 标签：c#, asp.net, winforms

我不熟悉编程概念。我在 INTERNET explorer 上像那个 firefox 一样。我想在任何网站下载（过程）上设置一个进度条。如果我们的网站完成了，那么进度条就完成了。我不知道解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:23:26.313

假设您使用的是 WinForm WebBrowser 控件，请确保已设置其 ProgressChanged 事件并让它更新 progressBar，如下所示：

```
private void webBrowser1_ProgressChanged(object sender, WebBrowserProgressChangedEventArgs e)
{
    Debug.WriteLine("e.MaximumProgress " + e.MaximumProgress);
    progressBar1.Maximum = (int)e.MaximumProgress;

    Debug.WriteLine("e.CurrentProgress " + e.CurrentProgress);
    progressBar1.Value = (int)e.CurrentProgress;
} 
```

您必须对其进行试验才能看到它在做什么……此外，如果您的互联网速度很快，您几乎不会在栏上看到任何进展。

否则，您将不得不自己重新创建“管道”代码来获取页面，并且非常熟悉能够测量下载进度的低级协议。

# javascript - 通过 keydown 事件在 Chrome 中为 location.href 赋值仅在第一次有效

> ID：15326344
> 
> 赞同：0
> 
> 时间：2013-03-10T19:12:04.840
> 
> 标签：javascript, jquery, google-chrome, spotify

通过 keydown 事件为 window.location.href 赋值只能在 Chrome 中第一次起作用（即多个 RIGHT ARROW keydown 事件）。例外是 ENTER 键。似乎在 Firefox 和 IE 中运行良好。

这是某种安全措施吗？

[http://jsfiddle.net/k9pwB/](http://jsfiddle.net/k9pwB/)

```
$(document).keydown(function(e){
    var key = (e.keyCode ? e.keyCode : e.which);
    switch (key) {
        case 39:
        case 13:
            console.log('play');
            window.location.href = 'spotify:track:6JEK0CvvjDjjMUBFoXShNZ';
    }
}); 
```

# android - 我的朋友如何测试我的 Android 应用程序？

> ID：15326348
> 
> 赞同：3
> 
> 时间：2013-03-10T19:12:39.093
> 
> 标签：android, testing, apk

我正在开发一个 Android 应用程序，但它还没有完成。我想在多个设备上测试它，不同用户的位置不在我附近。我怎样才能做到这一点？有 APK 我可以发给他们吗？有没有一种方法可以像插入手机然后从 Eclipse 运行应用程序一样简单？还是我必须制作某种安装程序（我不知道）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T19:16:06.003

显然，您可以将手机插入您正在开发的机器并从 eclipse 运行它。这将允许您在您有权访问的设备上进行测试和调试。

您还可以从 eclipse 中导出 apk（有关说明，请参阅 android 页面）。您可以将其放在文件共享网站上，并提供给您的朋友。然后他们可以安装它，只要他们已授权在他们的手机设置中安装“未签名”的 apk。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:20:58.117

假设您在 Eclipse 中至少部署了一次应用程序来调试和测试自己，那么您很可能在 Eclipse 项目的 bin 目录下有一个 APK。该文件应为 .apk。Eclipse 将使用您的调试密钥自动签署此 APK。这显然不是您用于发布的密钥，而是用于朋友之间的测试，我认为这很好。

我经常做的只是将该 APK 文件作为附件通过电子邮件发送给我的朋友到他们在手机上设置的电子邮件帐户。然后他们需要在手机上做的就是确保他们具有允许安装非市场应用程序（即不是来自 Google Play）的系统设置，这些应用程序的名称可能略有不同，例如“允许 3rd 方应用程序”。然后，他们只需单击电子邮件中的应用附件，下载并运行它，系统就会自动提示他们安装说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T20:02:10.657

我刚刚使用[了 MyAppSharer](https://play.google.com/store/apps/details?id=com.yschi.MyAppSharer&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS55c2NoaS5NeUFwcFNoYXJlciJd)。（我相信还有其他类似的应用程序 - 这只是我使用过的一个，非常简单/容易：

> ...您可以通过市场链接分享或直接分享APK（应用程序的完整包）

我只是使用它，并通过 apk 文件将我的应用程序发送给我的同事。再简单不过了。

只需通过 Eclipse 在您的手机上安装该应用程序，然后运行此 AppSharer，瞧——与任何人共享它！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T19:23:29.110

您可以在 Eclipse 中轻松地将项目导出为 APK

`File -> Export -> Export Android Project`

# jquery - 使用 jQuery 以编程方式提交表单时遇到问题

> ID：15326350
> 
> 赞同：0
> 
> 时间：2013-03-10T19:12:47.057
> 
> 标签：jquery, onclick, submit

我试图在用户离开页面时以编程方式提交表单，无论他们是否点击了“提交”按钮。我过去曾使用此方法从函数中提交表单，但由于某种原因，我无法使用`onclick`.

当用户单击“提交”按钮时，表单正在正确提交，因此 html 表单和 php 肯定设置正确。我正在使用 jquery-1.8.2

```
<form name="form2" id="form2" method="post" action="form2-exec.php">
    <!-- Form Elements -->
    <a class="back" href="form1.php" onClick="submitForm()">BACK</a>
    <a href="#" class="next"><input type="submit" value="SUBMIT" /></a>
</form>

<script language="javascript" type="text/javascript">
function submitForm() {
    $("#form2").submit();
}
</script> 
```

我也尝试过使用点击功能

```
$(".submitForm").click(function () {
$("#taste").submit();
}); 
```

并替换 HTML 中的这一行：

```
<a class="back" href="form1.php" onClick="submitForm()">BACK</a> 
```

和：

```
<a class="back submitForm" href="form1.php">BACK</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:42:01.897

#Whizkid提交后右击后退按钮不行，试试下面的方法，它利用jquery onbeforeunload事件来测试表单是否已经提交，如果没有则显示消息，通知用户未保存的数据以他们的形式：

```
$(function() {
        // Set the unload message whenever any input element get changed.
        $('input').change(function() {
            setConfirmUnload(true);
        });

        // Turn off the unload message whenever a form get submitted properly.
        $('form').submit(function() {
            setConfirmUnload(false);
        });
    });

    function setConfirmUnload(on) {
        var message = "You have unsaved data. Are you sure to leave the page?";
        window.onbeforeunload = (on) ? function() { return message; } : null;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:22:17.507

its a tricky situation. if you submit the form, then your back button's redirection wont work. And if you redirect on backbutton click using href,your submit wont work as by the time click function works, your next page will load. How about firing an ajax call using jquery to send your form's data to your server and in the call back function you redirect the page to the previous page?

For details on how to do that, check out this posting: [Submit form using AJAX and jQuery](https://stackoverflow.com/questions/425095/submit-form-using-ajax-and-jquery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:46:59.673

我通过将 HTML 中的所有必要链接更改为具有名称属性的提交按钮并在 PHP 中添加一条语句来根据用户单击的按钮重定向用户，从而解决了这个问题。

HTML

```
<input type="submit" name="whereto" value="BACK" />
<input type="submit" name="whereto" value="SUBMIT" /> 
```

PHP

```
// Insert Statement
if ($_POST['whereto'] == 'BACK') {
    header("location: form1.php");
} elseif ($_POST['whereto'] == 'SUBMIT') {
    header("location: form3.php");
} 
```

# ios - 遍历块中的数组以对其成员进行排序

> ID：15326351
> 
> 赞同：0
> 
> 时间：2013-03-10T19:12:52.653
> 
> 标签：ios, objective-c, sorting

如何在这样`[index]`的块内获取对象？它的目的是获取它的第一个字母并按字典顺序对 NSDictionaries 数组进行排序。

```
NSArray *sortedArray;
sortedArray = [_photos sortedArrayUsingComparator:^NSComparisonResult(id a, id b) {
    NSString *first = _photos[0][FLICKR_PHOTO_TITLE];
    NSString *second = _photos[0][FLICKR_PHOTO_TITLE];
    return [first compare:second];
}];
_photos = sortedArray; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:22:17.087

看来您有一系列字典。要对`FLICKR_PHOTO_TITLE`键的值进行排序，请执行以下操作：

```
_photos = [_photos sortedArrayUsingComparator:^NSComparisonResult(NSDictionary *a, NSDictionary *b) {
    NSString *first = a[FLICKR_PHOTO_TITLE];
    NSString *second = b[FLICKR_PHOTO_TITLE];
    return [first compare:second];
}]; 
```

# database - 在 Oracle Linux 6 中配置 Oracle 11g 数据库

> ID：15326353
> 
> 赞同：0
> 
> 时间：2013-03-10T19:13:03.363
> 
> 标签：database, linux, oracle, oracle11g

在过去的 2 天里，我一直在尝试在 Oracle Linux 6 中配置 Oracle DB 11g。它已成功安装，但我无法创建数据库。我已经创建了监听器和 tnsnames 并尝试使用以下命令启动数据库：

```
 sqlplus /nolog   
    connect / as sysdba   
    startup 
```

我收到以下错误：

```
 ORA-00119: invalid specification for system parameter LOCAL_LISTENER
    ORA-00130: invalid listener address '(ADDRESS=(PROTOCOL=TCP)(HOST=beta)(PORT=1521))' 
```

这是我的监听器和 tnsnames 配置：

监听器.ora：

```
 SID_LIST_LISTENER =
     (SID_LIST =
       (SID_DESC =
         (SID_NAME = orcl)
         (ORACLE_HOME = /home/oracle/app/oracle/product/11.2.0/oracle)
       )
     )
    SUBSCRIBE_FOR_NODE_DOWN_EVENT_LISTENER=OFF

    LISTENER =
      (DESCRIPTION_LIST =
        (DESCRIPTION =
          (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
        )
      )

    ADR_BASE_ORCL = /home/oracle/app/oracle 
```

tnsnames.ora：

```
 ORCL =
      (DESCRIPTION =
        (ADDRESS_LIST =
          (ADDRESS = (PROTOCOL = TCP)(HOST = localhost)(PORT = 1521))
        )
        (CONNECT_DATA =
          (SERVICE_NAME = orcl)
        )
      ) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:25:04.723

Did you set your environment variables up per the [installation instructions](http://docs.oracle.com/cd/E11882_01/install.112/e24321/pre_install.htm#i1011717)? In particular, you'll need ORACLE_SID, ORACLE_BASE, ORACLE_UNQNAME, ORACLE_HOME (remember that case is significant on Linux). Also, if you didn't create a database as part of the installation, you'll need to run the [database creation assistant (dbca)](http://docs.oracle.com/cd/B28359_01/server.111/b28310/create002.htm).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:42:57.510

我只需要一个用于开发目的的环境，所以我从 Oracle 站点下载了一个模板 VM，并使用 Virtual Box 进行了实例化。模板已配置，它的数据库运行正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-22T10:19:35.840

Oracle 查找“beta”主机名，并且您的所有设置都指向 localhost。尝试添加一个条目

```
/etc/hosts 
```

使用以下行：

```
127.0.0.1 beta 
```

并尝试再次启动它

# c# - 字典到自定义 KeyValuePair 列表 - 无法转换（C# .Net 4.0）

> ID：15326354
> 
> 赞同：0
> 
> 时间：2013-03-10T19:13:04.327
> 
> 标签：c#, .net, dictionary

我读了那个字典，并且 KeyValuePair 不能由 xml 序列化程序编写。所以我编写了自己的 KeyValuePair 结构。

```
public struct CustomKeyValuePair<Tkey, tValue>
{
   public Tkey Key { get; set; }
   public tValue Value { get; set; }

   public CustomKeyValuePair(Tkey key,tValue value) : this()
   {
      this.Key = key;
      this.Value = value; 
   }
} 
```

但是当我这样做时，我得到一个错误，它无法转换：

```
List<CustomKeyValuePair<string, AnimationPath>> convList = 
                   Templates.ToList<CustomKeyValuePair<string, AnimationPath>>(); 
```

它适用于普通的 keyValuePair，但不适用于我的自定义键值对。所以有什么问题？我试图尽可能地复制原件，但它不想将我的字典（模板）转换为该列表。我看不到它使用任何接口或从结构继承来做到这一点。我必须手动添加所有条目吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T19:17:50.977

`Dictionary<Tkey, TValue>`实现`IEnumerable<KeyValuePair<Tkey, Tvalue>>`和`ICollection<KeyValuePair<Tkey, Tvalue>>`：

（来自 Visual Studio 中显示的元数据）：

```
public class Dictionary<TKey, TValue> : IDictionary<TKey, TValue>, 
     ICollection<KeyValuePair<TKey, TValue>>, IEnumerable<KeyValuePair<TKey, TValue>>, 
     IDictionary, ICollection, IEnumerable, ISerializable, IDeserializationCallback 
```

这就是为什么`ToList()`有`KeyValuePair`工作而另一个没有。

您最好的选择可能是使用：

```
List<CustomKeyValuePair<string, AnimationPath>> convList = 
    Templates.Select(kv => new CustomKeyValuePair(kv.Key, kv.Value)).ToList(); 
```

# mysql - 年龄计算不起作用

> ID：15326358
> 
> 赞同：0
> 
> 时间：2013-03-10T19:13:28.003
> 
> 标签：mysql, where

我在计算年龄时收到错误消息。

这是我的查询：

```
SELECT (YEAR(CURDATE()) - YEAR(STR_TO_DATE(birthdate, '%m/%d/%Y'))) age, name
FROM pers 
WHERE age >= 50 
ORDER BY age DESC 
LIMIT 100; 
```

这是错误：

> #1054 - 'where 子句'中的未知列'age'

当我删除 where 子句时，“age”会输出得很好，它只是不允许我将它用作条件，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:17:41.227

您不能在`WHERE`子句中使用列别名。使用整个表达式或使用`HAVING`子句，尽管这仅在之后应用`ORDER BY`（因此对于大型数据集可能非常低效）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:21:54.970

尝试这个

```
 SELECT (YEAR(CURDATE()) - YEAR(STR_TO_DATE(birthdate, '%m/%d/%Y'))) age, name
 FROM pers 
 WHERE (YEAR(CURDATE()) - YEAR(STR_TO_DATE(birthdate, '%m/%d/%Y')))  >= 50 
 ORDER BY age DESC 
 LIMIT 100; 
```

您可以在 where 子句中使用别名年龄

[这里是](https://stackoverflow.com/questions/200200/can-you-use-an-alias-in-the-where-clause-in-mysql)关于是否可以在 whre 子句中使用别名的答案

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-10T19:15:58.997

在我看来，你的括号太多了，这里：'%m/%d/%Y')))

# antlr4 - ANTLR 4 可以生成推送解析器吗？

> ID：15326359
> 
> 赞同：2
> 
> 时间：2013-03-10T19:13:39.540
> 
> 标签：antlr4

ANTLR 4 可以像 bison 那样生成推送解析器吗？参考：[http ://www.gnu.org/software/bison/manual/html_node/Push-Decl.html](http://www.gnu.org/software/bison/manual/html_node/Push-Decl.html)

我想知道 ANTLR 是否是在数据转换管道中实现解析器阶段的好选择。系统的一种配置是由向上游推送 ByteBuffers 的源阶段驱动的。

我们已经购买了“Definitive ANTLR 4 Reference”的副本，但在书中快速搜索发现没有提到类似的内容。

# java - OutOfMemoryError - 从检测 UTF-8 编码

> ID：15326361
> 
> 赞同：0
> 
> 时间：2013-03-10T19:13:43.160
> 
> 标签：java, utf-8, character-encoding, detect

这个类应该检查`currentFile`和检测编码。如果结果是 UTF-8 `return true`。

运行后的输出是 - `java.lang.OutOfMemoryError: Java heap space`。

对于读取数据，您需要为此使用**JDK 7**`Files.readAllBytes(path)`

**代码：**

```
class EncodingsCheck implements Checker {

    @Override
    public boolean check(File currentFile) {
        return isUTF8(currentFile);
    }

    public static boolean isUTF8(File file) {
        // validate input
        if (null == file) {
            throw new IllegalArgumentException("input file can't be null");
        }
        if (file.isDirectory()) {
            throw new IllegalArgumentException(
                    "input file refers to a directory");
        }

        // read input file
        byte[] buffer;
        try {
            buffer = readUTFHeaderBytes(file);
        } catch (IOException e) {
            throw new IllegalArgumentException(
                    "Can't read input file, error = " + e.getLocalizedMessage());
        }

        if (0 == (buffer[0] & 0x80)) {
            return true; // ASCII subset character, fast path
        } else if (0xF0 == (buffer[0] & 0xF8)) { // start of 4-byte sequence
            if (buffer[3] >= buffer.length) {
                return false;
            }
            if ((0x80 == (buffer[1] & 0xC0)) && (0x80 == (buffer[2] & 0xC0))
                    && (0x80 == (buffer[3] & 0xC0)))
                return true;
        } else if (0xE0 == (buffer[0] & 0xF0)) { // start of 3-byte sequence
            if (buffer[2] >= buffer.length) {
                return false;
            }
            if ((0x80 == (buffer[1] & 0xC0)) && (0x80 == (buffer[2] & 0xC0))) {
                return true;
            }
        } else if (0xC0 == (buffer[0] & 0xE0)) { // start of 2-byte sequence
            if (buffer[1] >= buffer.length) {
                return false;
            }
            if (0x80 == (buffer[1] & 0xC0)) {
                return true;
            }
        }

        return false;
    }

    private static byte[] readUTFHeaderBytes(File input) throws IOException {
        // read data
        Path path = Paths.get(input.getAbsolutePath());
        byte[] data = Files.readAllBytes(path);
        return data;
    }
} 
```

**问题：**

*   如何解决这个问题？
*   如何以这种方式检查 UTF-16（我们需要担心这个或这只是无用的麻烦）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:48:02.790

您不需要阅读整个文件。

```
private static byte[] readUTFHeaderBytes(File input) throws IOException {
    FileInputStream fileInputStream = new FileInputStream(input);
    try{
        byte firstBytes[] = new byte[4];
        int count = fileInputStream.read(firstBytes);
        if(count < 4){
            throw new IOException("Empty file");
        }
        return firstBytes;
    } finally {
        fileInputStream.close();
    }
} 
```

为了检测其他 UTF 编码，使用给定的模式：

```
字节编码形式
00 00 FE FF UTF-32，大端
FF FE 00 00 UTF-32，小端
FE FF UTF-16，大端
FF FE UTF-16，小端
EF BB BF UTF-8

```

# c - Core Graphics 函数/C 为什么被调用函数填充发送的数组？

> ID：15326374
> 
> 赞同：0
> 
> 时间：2013-03-10T19:15:24.567
> 
> 标签：c, function, pointers, core-graphics

抱歉，我认为这是一个相当无知的新手问题。

```
CGDirectDisplayID displays[10];
uint32_t numDisplays;

CGGetOnlineDisplayList(10, displays, &numDisplays); 
```

上述函数填充了displays[] 数组并将结果（在线显示的数量）返回给numDisplays。header中的定义如下：

```
CG_EXTERN CGError CGGetOnlineDisplayList(uint32_t maxDisplays,
CGDirectDisplayID *onlineDisplays, uint32_t *displayCount)
CG_AVAILABLE_STARTING(__MAC_10_2, __IPHONE_NA); 
```

我理解我们为什么使用“&numDisplays”：我们给函数提供了变量的地址，以便它可以直接更改它。但是为什么我们不对数组使用相同的操作数呢？我们不应该像处理 numDisplays 一样处理它吗？当我们不将其地址传递给函数时，该函数如何填充数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:18:57.920

> 当我们不将其地址传递给函数时，该函数如何填充数组？

我们是。

将数组传递给函数时，传递的不是数组的内容。相反，传递了指向数组第一个元素的指针；我们说**数组衰减成一个指针。**无论如何，您可以从函数的原型中看到。

如果您通过`&arr`，从技术上讲，这将是相同的指针，但它将是另一种类型（它将是指向数组的指针，`uint32_t (*)[10]`），但是当指向数组的指针（类型为数组的元素）是必需的无效。不要使用`&`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:18:50.503

数组*衰减*为指向其第一个元素的指针。

所以`&display[0];`等于`displays;`

# post - 发布参数为空

> ID：15326375
> 
> 赞同：0
> 
> 时间：2013-03-10T19:15:33.850
> 
> 标签：post, parameters, null

我有以下方法的控制器：

```
 public ActionResult Create()
        {
            return View();
        }

        [Authorize]
        [HttpPost]
        public ActionResult Create(Tests test)
        {
            test.CreateDate = DateTime.Now;
            test.Author = User.Identity.Name;
            TestEntities db = new TestEntities();
            db.AddToTests(test);
            db.SaveChanges();
            return RedirectToAction("CreateQuestion", new { OrderNumber = 1, idTest = test.id });
        }

        [Authorize]
        public ActionResult CreateQuestion(int OrderNumber,int idTest)
        {
            return View();
        }

        [Authorize]
        [HttpPost]
        public ActionResult CreateQuestion(Questions question)
        {
            TestEntities db = new TestEntities();
            db.AddToQuestions(question);
            db.SaveChanges();
            return RedirectToAction("CreateQuestion", new {id = question.id, t = question.Type});
        } 
```

问题是 Create 方法工作正常。它获取参数并将其添加到数据库。但类似的方法 CreateQuestion 显示有关问题的消息为空。我错了什么？

创建问题视图

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<test.su.Models.Questions>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    Создать вопрос
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>Создать вопрос</h2>

<% using (Html.BeginForm("CreateQuestion","Test")) { %>
    <%: Html.ValidationSummary(true) %>
    <fieldset>
        <legend>Вопрос</legend>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.Type,"Тип вопроса") %>
        </div>

        <% // List of question types
            List<SelectListItem> QuestionTypes = new List<SelectListItem>();
            SelectListItem t = new SelectListItem();
            t.Text = "Вопрос с вариантами ответа (флажки или радиокнопки)";
            t.Value = "0";
            QuestionTypes.Add(t);
            t = new SelectListItem();
            t.Text = "Вопрос со свободным ответом (текстовое поле)";
            t.Value = "1";
            QuestionTypes.Add(t);
             %>

        <div class="editor-field">
            <%: Html.DropDownListFor(model => model.Type, QuestionTypes) %>
            <%: Html.ValidationMessageFor(model => model.Type) %>
        </div>

<%--        <div class="editor-label">
            <%: Html.LabelFor(model => model.OrderNumber,"Порядковый номер вопроса") %>
            <%: Html.EditorFor(model => model.OrderNumber) %>
            <%: Html.ValidationMessageFor(model => model.OrderNumber) %>
        </div>--%>

        <div class="editor-label">
            <%: Html.LabelFor(model => model.Question,"Текст вопроса") %>
        </div>
        <div class="editor-field">
            <%: Html.TextAreaFor(model => model.Question,2,47,"") %> 
            <%: Html.ValidationMessageFor(model => model.Question) %>
        </div>
        <%: Html.HiddenFor(model => model.idTest) %>
        <%: Html.ValidationMessageFor(model => model.idTest) %>
        <%: Html.HiddenFor(model => model.OrderNumber ) %>
        <%: Html.ValidationMessageFor( model => model.OrderNumber) %>
        <p>
            <input type="submit" value="Далее" />
        </p>
    </fieldset>
<% } %>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:15:52.307

这在不知道模型的情况下很难弄清楚。其他人可能会提供更好的答案，但这是我现在唯一能想到的：

如果您的问题模型如下所示：

```
public class Questions
{
  int Id {get;set;}
  string Name {get;set;}
  string Description {get;set;}
} 
```

现在，您可以做的是更改您的控制器以接受各个参数并自己创建对象。这可能会帮助您确定模型中缺少哪些关键属性。

```
public ActionResult CreateQuestion(string Name, string Description)
{
  //make the entity yourself
  Questions newQuestion = new Questions()
  {
    Name = Name,
    Description = Description
  }
  //your other code here
} 
```

现在通常 MVC 足够聪明，可以将表单（视图）中的各个值绑定到模型，但是缺少一些关键值并导致您出现问题。一旦你弄清楚那是什么，你实际上可以将你的控制器恢复为只接受一个 Questions 对象。

对不起，我不能帮助你更多。

祝你好运。

# javascript - 克隆 SVGMatrix 的规范方法是什么？

> ID：15326381
> 
> 赞同：2
> 
> 时间：2013-03-10T19:16:38.400
> 
> 标签：javascript, dom, browser, svg

给定一个 SVGMatrix m，检索矩阵的独立副本的规范方法是什么？

当然，`m.scale(1)`是一种可能的方式，但我想知道是否有更惯用的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:47:31.820

[您可以使用createSVGMatrix](http://www.w3.org/TR/SVG/struct.html#__svg__SVGSVGElement__createSVGMatrix)创建另一个 SVG 矩阵， 然后只需将每个元素从一个矩阵复制到另一个

```
dest.a = source.a;
dest.b = source.b;
dest.c = source.c; 
```

等等。 正在进行中的 SVG 2 规范有一些建议可以让这变得不那么乏味。

# html - W3C 验证器报告“Stray end tag 'html'”

> ID：15326385
> 
> 赞同：0
> 
> 时间：2013-03-10T19:16:55.470
> 
> 标签：html, validation

我对可能导致此页面上的验证器错误的原因感到困惑，因为此页面上没有太多内容。错误出现在 <html> 标记上，我收到“Stray end tag `html`”消息。怎么了？

[http://validator.w3.org/check?uri=www.neurologicclinic.net&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=www.neurologicclinic.net&charset=%28detect%20automatically%29&doctype=Inline&group=0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:19:02.863

`<html></html>`标签应该包含所有的 HTML 内容，包括标签`head`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:19:21.540

`<html>`在你已经有了你的`<head>`部分之后，你打开一个标签。这是无效的。这些标签的一般顺序如下：

```
<html>
  <head>
  </head>
  <body>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T19:19:29.913

您缺少一个打开的`<html>`标签。必须先走`<head>`

```
<!doctype html>
<html>
  <head>
    ...
  </head>
  ...
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T19:20:15.247

我相信您的`<html>`标签应该在该`<head>`部分之上定义，而不是在它之后。

例如

```
<!DOCTYPE html>
<html>
  <head>
   ..
  </head>
  <body>
  ..
  </body>
</html> 
```

# arrays - 从 R 中的样本计算计数向量

> ID：15326391
> 
> 赞同：3
> 
> 时间：2013-03-10T19:17:26.373
> 
> 标签：arrays, r, counter

我有一个需要填充的一维计数向量，称为 count.array。我生成 sample.array （可以比 count 数组更短或更长），但是每个元素都在 count 数组的适当索引内。R中总结每个元素出现的次数并将它们放入计数数组的最佳方法是什么。

我意识到我可以用一个 for 循环来做到这一点（通过 sample.array，读取值，将 1 添加到索引）但也许有一种更智能的 R 方法来做到这一点？

这是一个工作示例：

```
count.array <- matrix(data = 0, nrow = 1, ncol = 10)
sample.array <- matrix(data = c(5,2,4,5,2,4,3,4), nrow = 1, ncol =8)

count.array[1,2] <- 2
count.array[1,3] <- 1
count.array[1,4] <- 3
count.array[1,5] <- 2

count.array 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T19:20:50.853

您可以使用`table`：

```
freq <- table(sample.array)

# sample.array
# 2 3 4 5  <~~ names (use it for indexing)
# 2 1 3 2  <~~ frequency (the values of your count.array)

count.array[1, as.numeric(names(freq))] <- freq

#      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
# [1,]    0    2    1    3    2    0    0    0    0     0 
```

# ruby-on-rails - 特定时间、日期、年份的运行方法 (Ruby)

> ID：15326392
> 
> 赞同：0
> 
> 时间：2013-03-10T19:17:34.643
> 
> 标签：ruby-on-rails, ruby, logic, message

我正在编写一个 ruby​​ 程序，它会要求用户输入一条消息，然后输入年、月、日和时间，然后在那个时间到来时通过电子邮件发送消息。我将该数据存储到数据库表中。程序应该循环直到那一天到来，然后执行发送。

在不使用数据库的情况下，我编写了以下内容：

```
def send_Message(m_to, m_from, m_body, month, day, year, hour, min)
x = 0
t = Time.now

if (t.day == day 
    && t.month == month 
    && t.year == year 
    && t.strftime("%I") == hour 
    && t.strftime("%M") == min )

    x = x +5

    message = @client.account.sms.messages.create(:body => m_body,
        :to => m_to,
        :from => m_from)
    puts message.sid   

else
    sleep_time = Time.new(year,month,day)
    total_sleep = sleep_time - t
    sleep(total_sleep)
    message = @client.account.sms.messages.create(:body => m_body,
        :to => m_to,
        :from => m_from)
    puts message.sid  
end

end 
```

但它似乎只适用于月、日、年的事情，而不是时间。我正在寻找两个问题的答案：如何在数据库中执行循环，按时间顺序查找要发送的消息，以及上面的示例代码，我如何使用一天中的小时和分钟以及一天的月份和发送消息的年份。

PS：我正在设计这个应用程序，用户/应用程序发送一个 API 请求，然后我提到的过程将被执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:30:36.423

您有几种方法： 随时查看宝石

```
 gem install whenever 
```

[https://github.com/javan/无论何时](https://github.com/javan/whenever)

它并没有完全按照你的要求做，但它比运行 ruby​​ 6 个月等待发送电子邮件要好得多。

**更好的方法是 resque** [https://github.com/defunkt/resque](https://github.com/defunkt/resque)

然后添加[https://github.com/bvandenbos/resque-scheduler](https://github.com/bvandenbos/resque-scheduler)，您的解决方案非常好，无需等待发送电子邮件的一百万个 ruby​​ 实例。

祝你好运...

顺便说一句：我提供了一项服务来完全按照您的要求进行操作。我有规格和代码。如果你要我可以给你。

# javascript - 使用 riffwave.js 获得准确的笔记

> ID：15326396
> 
> 赞同：4
> 
> 时间：2013-03-10T19:17:43.677
> 
> 标签：javascript, html5-audio

有谁知道是否可以从[riffwave.js 之](http://www.codebase.es/riffwave/ "riffwave.js")类的 javascript 库中获得精确的注释（C、C#、D、Eb 等） ？

该演示让我认为是可能的，但我不确定如何将给定音符​​的[钢琴频率](http://coba.belmont.edu/fac/tappant/piano.htm) 转换为生成的波形文件所需的数据数组。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-10T19:48:27.787

当然！您想创建一些从键到频率的映射函数（可能只是一个字典）。

要使用 riffwave.js 合成给定频率，您可以执行以下操作

```
function simHertz(hz) {
    var audio = new Audio();
    var wave = new RIFFWAVE();
    var data = [];

    wave.header.sampleRate = 44100;

    var seconds = 1;

    for (var i = 0; i < wave.header.sampleRate * seconds; i ++) {
        data[i] = Math.round(128 + 127 * Math.sin(i * 2 * Math.PI * hz / wave.header.sampleRate));
    }

    wave.Make(data);
    audio.src = wave.dataURI;
    return audio;
}

var audio = simHertz(1000);
audio.play(); 
```

# android - 主类中的 onCreate 扩展了从未调用过的应用程序

> ID：15326401
> 
> 赞同：2
> 
> 时间：2013-03-10T19:18:25.983
> 
> 标签：android

我有一个奇怪的问题。我的应用程序类 onCreate（或 onReusume）永远不会被调用。即使我卸载应用程序并调试 agan。这是我的代码。我找不到任何奇怪的地方。如果我设置断点，它永远不会到达，其他类告诉我初始化失败。坦克

```
package com.MyApp;

import org.acra.*;
import org.acra.annotation.*;
import android.app.Application;

@ReportsCrashes(formKey = ".................") 
public class MyApp extends Application {

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
    }

    public void onCreate() {
        // The following line triggers the initialization of ACRA
        if (!BuildConfig.DEBUG) {
            ACRA.init(this);
        } 
```

这是我的xml：

```
<application
        android:name="com.MyApp.MyApp"
        android:icon="@drawable/icon"
        android:label="@string/app_name"
        android:theme="@style/Theme" >
        <activity android:name="com.MyApp.MyApp.MainActivity" >
            <intent-filter> ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:20:52.050

改变这个它会工作

```
@Override
  public void onCreate() {
    // The following line triggers the initialization of ACRA
    ACRA.init(this);
    super.onCreate();
  } 
```

你忘了打电话`super.onCreate();`

# spring - 在 Spring Tiles 上重定向导致参数附加到 URL

> ID：15326402
> 
> 赞同：0
> 
> 时间：2013-03-10T19:18:26.383
> 
> 标签：spring, tiles, url-parameters

我正在使用 Spring 3 和 Tiles 3。下面只是我制作的一个简化示例。我有一个测试控制器，我在其中列出了所有`SimpleEntity`对象。JSP 上有一个输入字段，用于通过 POST 添加新实体。这里是控制器。

```
@Controller
@RequestMapping(value="/admin/test")
public class TestAdminController {

    private String TEST_PAGE = "admin/test";

    @Autowired
    private SimpleEntityRepository simpleEntityRepository;

    @ModelAttribute("pageName")
    public String pageName() {
        return "Test Administration Page";
    }

    @ModelAttribute("simpleEntities")
    public List<SimpleEntity> simpleEntities() {
        return simpleEntityRepository.getAll();
    }

    @RequestMapping(method=RequestMethod.GET)
    public String loadPage() {
        return TEST_PAGE;
    }

    @RequestMapping(method=RequestMethod.POST)
    public String addEntity(@RequestParam String name) {
        SimpleEntity simpleEntity = new SimpleEntity();
        simpleEntity.setName(name);
        simpleEntityRepository.save(simpleEntity);
        return "redirect:/" + TEST_PAGE;
    }

} 
```

一切正常。但是，当我提交表单时，URL 添加了`pageName`参数，所以它从`/admin/test`到`/admin/test?pageName=Test+Administration+Page`。有没有办法在页面重新加载时防止这种情况发生？

**更新**

这是 JSP 表单。

```
<form:form action="/admin/test" method="POST">
    <input type="text" name="name" />
    <input type="submit" name="Save" />
</form:form> 
```

# asp.net-mvc - Kendo.Web Grid Popup Create with ComboBox

> ID：15326406
> 
> 赞同：1
> 
> 时间：2013-03-10T19:18:40.023
> 
> 标签：asp.net-mvc, kendo-grid

我正在使用免费的剑道网络控件。我之前在几个地方使用过网格视图，并决定对我当前的项目使用弹出式样式编辑。

我有大部分工作。我有三个用于类别、银行帐户和收款人的组合框，当我编辑现有项目时，传递回我的 MVC 操作的模型对象中包含正确的值。但是，当我单击创建按钮时，三个组合框值将作为 null 返回给控制器。

这是此视图的 CSHTML 代码：

```
@using System
@using System.Linq

@{
    ViewBag.Title = "Transactions";
}

@section Head
{
    <link href="~/Content/kendo/kendo.common.min.css" rel="stylesheet" />
    <link href="~/Content/kendo/kendo.default.min.css" rel="stylesheet" />
    <script src="~/Scripts/kendo/kendo.web.min.js"> </script>
}

@section featured
{
    <section class="featured">
        <div class="content-wrapper">
            <hgroup class="title">
                <h1>@ViewBag.Title</h1>
            </hgroup>
        </div>
    </section>
}

<div id="grid"></div>

<script>
    $(function() {
        $("#grid").kendoGrid({
            height: 350,
            toolbar: [{ name: "create", text: "Create New Transaction" }],
            columns:
            [
                { field: "Date", width: "100px", template: '#= kendo.toString(Date,"MM/dd/yyyy") #' },
                { field: "Amount", format: "{0:c}", width: "100px" },
                { field: "Category", width: "80px", editor: categoryDropDownEditor, template: "#=Category.Name#" },
                { field: "BankAccount", title: "Account", width: "80px", editor: bankAccountDropDownEditor, template: "#=BankAccount.Name#" },
                { field: "Payee", width: "80px", editor: payeeDropDownEditor, template: "#=Payee.Name#" },
                { command: ["edit", "destroy"], title: "&nbsp;", width: "160px" }
            ],
            editable: { mode: "popup", confirmation: "Are you sure you want to delete this transaction?" },
            pageable:
            {
                refresh: true,
                pageSizes: true
            },
            sortable: true,
            filterable: false,
            dataSource:
            {
                serverPaging: true,
                serverFiltering: true,
                serverSorting: true,
                pageSize: 7,
                schema:
                {
                    data: "Data",
                    total: "Total",
                    model:
                    {
                        id: "Id",
                        fields:
                        {
                            Id: { editable: false, nullable: true },
                            Date: { type: "Date" },
                            Amount: { type: "number", validation: { required: true, min: 0 } },
                            Category: { validation: { required: true } },
                            BankAccount: { validation: { required: true } },
                            Payee: { validation: { required: true } },
                            Note: { validation: { required: false } }
                        }
                    }
                },
                batch: false,
                transport:
                {
                    create:
                    {
                        url: "@Url.Action("Create", "Transaction")",
                        contentType: "application/json",
                        type: "POST"
                    },
                    read:
                    {
                        url: "@Url.Action("Read", "Transaction")",
                        contentType: "application/json",
                        type: "POST"
                    },
                    update:
                    {
                        url: "@Url.Action("Update", "Transaction")",
                        contentType: "application/json",
                        type: "POST"
                    },
                    destroy:
                    {
                        url: "@Url.Action("Delete", "Transaction")",
                        contentType: "application/json",
                        type: "POST"
                    },
                    parameterMap: function(data)
                    {
                        return JSON.stringify(data);
                    }
                }
            }
        });

        function categoryDropDownEditor(container, options)
        {
            $('<input required data-text-field="Name" data-value-field="Id" data-bind="value:' + options.field + '"/>')
                .appendTo(container)
                .kendoDropDownList(
                    {
                        autoBind: true,
                        dataValueFileld: "Id",
                        dataTextField: "Name",
                        dataSource:
                        {
                            type: "json",
                            transport: { read: "@Url.Action("GetCategories", "Transaction")" }
                        }
                    });
        }

        function bankAccountDropDownEditor(container, options)
        {
            $('<input required data-text-field="Name" data-value-field="Id" data-bind="value:' + options.field + '"/>')
                .appendTo(container)
                .kendoDropDownList(
                    {
                        autoBind: true,
                        dataValueFileld: "Id",
                        dataTextField: "Name",
                        dataSource:
                        {
                            type: "json",
                            transport: { read: "@Url.Action("GetBankAccounts", "Transaction")" }
                        }
                    });
        }

        function payeeDropDownEditor(container, options)
        {
            $('<input required data-text-field="Name" data-value-field="Id" data-bind="value:' + options.field + '"/>')
                .appendTo(container)
                .kendoDropDownList(
                    {
                        autoBind: true,
                        dataValueFileld: "Id",
                        dataTextField: "Name",
                        dataSource:
                        {
                            type: "json",
                            transport: { read: "@Url.Action("GetPayees", "Transaction")" }
                        }
                    });
        }
    });
</script> 
```

与剑道组合框的绑定必须有效，否则编辑也会失败。我能想到的只是对象没有正确创建。此外，它默认选择组合框中的第一项，但即便如此，它也不会绑定该值。

以下是我的创建和更新操作的代码：

```
 [HttpPost]
    public ActionResult Create(TransactionModel transactionModel)
    {
        var transaction = _moneyBO.CreateTransaction();

        Mapper.Map(transactionModel, transaction);

        _moneyBO.UpdateTransaction(transaction);

        return Json(Mapper.Map<TransactionModel>(transaction));
    }

    public ActionResult Update(TransactionModel transactionModel)
    {
        var transaction = _moneyBO.Transactions.SingleOrDefault(x => x.Id == transactionModel.Id);

        if (transaction == null)
            return View("NotFound");

        Mapper.Map(transactionModel, transaction);

        _moneyBO.UpdateTransaction(transaction);

        return Json(Mapper.Map<TransactionModel>(transaction));
    } 
```

我还没有找到使用弹出自定义编辑的好例子。Kendo 网站上的示例可以内联，但如果您将示例更改为弹出式，则它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T12:31:47.763

我有同样的问题。写，如果你解决它，请我发现，Kendo 认为“null”（默认为 int？）是 ObservableObject（在 ComboBox 初始化时），这就是为什么它不能被解析为“number”。如果您编辑项目（而不是创建），则值 id 不是“null”并且模型绑定工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T14:27:58.690

不确定这是否是这里唯一的问题，但在您的代码示例中，您的下拉列表的初始化似乎不太正确。你写`dataValueFileld`了应该是`dataValueField`

```
kendoDropDownList({
    autoBind: true,
    dataValueFileld: "Id",          <-- Incorrect spelling
    dataTextField: "Name",
    dataSource:
    {
        type: "json",
        transport: { read: "@Url.Action("GetPayees", "Transaction")" }
    }
}); 
```

# ruby-on-rails - 在生产中切碎的 .css 文件

> ID：15326410
> 
> 赞同：0
> 
> 时间：2013-03-10T19:19:02.227
> 
> 标签：ruby-on-rails, nginx, capistrano, asset-pipeline, unicorn

## *我在生产模式下（仅在浏览器*中，在 Chrome 和 Firefox 中）得到了（切碎的）application.css 文件。

```
http://198.211.125.210/ 
```

![切碎的.css](../Images/180946ac5079fef8e047aab15f8687bf.png)

## 但是直接链接显示了完整编译的 application.css 文件。

```
http://198.211.125.210/assets/application-371482c69e94141a6e3eedd72a8a066f.css 
```

## 为什么浏览器不显示完整的 applcation.css 文件？

我使用 Nginx(1.2.7)+Unicorn(4.6.2)+Rails(3.2.12)+Capistrano(2.14.2)。

我的配置：
[nginx.conf](https://gist.github.com/itsNikolay/5129883)
[unicorn.rb](https://gist.github.com/itsNikolay/5129905)
[deploy.rb](https://gist.github.com/itsNikolay/5129912)
[Gemfile](https://gist.github.com/itsNikolay/5129961)[生产](https://gist.github.com/itsNikolay/5129936)
日志 没有错误[nginx.error.log](https://gist.github.com/itsNikolay/5129942) [$> cap deploy](https://gist.github.com/itsNikolay/5130016) [application.css (development)](https://gist.github.com/itsNikolay/5133415)

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T15:13:43.087

通过重装服务器解决。

# python - 在 python 中导入模块是什么意思？

> ID：15326418
> 
> 赞同：2
> 
> 时间：2013-03-10T19:19:31.380
> 
> 标签：python

我是 python 新手，发现我可以导入一个模块而无需导入其中的任何类。我有以下结构——

```
myLib/
    __init__.py
    A.py
    B.py

driver.py 
```

在 driver.py 中，我执行以下操作 -

```
import myLib
tmp = myLib.A() 
```

尝试运行它时出现以下错误。AttributeError：“模块”对象没有属性 A

当我这样做时 Eclipse 不会抱怨，事实上当我键入 myLib.A 时自动完成显示 A。

当我导入一个模块而不是其中的任何类时，这意味着什么？

谢谢

磷

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:37:30.417

Python 不是 Java。`A`并且`B`不是类。它们是模块。您需要单独导入它们。（并且`myLib`不是一个模块，而是一个包。）

模块`A`和`B`本身可能包含类，这些类可能被称为也可能不被称为`A`and `B`。您可以在一个模块中拥有任意数量的类 - 甚至根本没有，因为很可能编写一个没有类的大型 Python 程序。

不过，要回答您的问题，导入`myLib`只需将名称`myLib`放在您当前的命名空间中。中的任何内容都`__init__.py`将被执行：如果该文件本身定义或导入任何名称，它们将作为`myLib`.

如果你这样做`from myLib import A`了，你现在已经将*模块* `A`导入到当前命名空间中。但是同样，它的任何类仍然必须通过`A`名称来引用：所以如果你确实有一个类`A`，你可以通过`A.A()`.

第三个选项是 do `from myLib.A import A`，它确实将*类* `A`导入到您当前的命名空间中。在这种情况下，您可以调用`A()`来实例化该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:21:04.513

你需要做

```
from mylib import A 
```

因为`A`不是`__init__.py`inside的属性`mylib`

当你这样做`import mylib`时`__init__.py`

看我的回答。 [关于包](https://stackoverflow.com/questions/7948494/whats-the-difference-between-a-python-module-and-a-python-package/7948504#7948504)

# regex - 如何在 Go 中执行不区分大小写的正则表达式？

> ID：15326421
> 
> 赞同：101
> 
> 时间：2013-03-10T19:19:46.480
> 
> 标签：regex, go

现在，当然，我可以编写正则表达式来处理这两种情况，例如`regexp.Compile("[a-zA-Z]")`，但是我的正则表达式是由用户给出的字符串构造的：

```
reg, err := regexp.Compile(strings.Replace(s.Name, " ", "[ \\._-]", -1)) 
```

`s.Name`名字在哪里。这可能类似于“西北偏北”。现在，对我来说最明显的解决方案是遍历每个字符`s.Name`并为每个字母写 '[nN]'：

```
for i := 0; i < len(s.Name); i++ {
  if s.Name[i] == " " {
    fmt.Fprintf(str, "%s[ \\._-]", str);
  } else {
    fmt.Fprintf(str, "%s[%s%s]", str, strings.ToLower(s.Name[i]), strings.ToUpper(s.Name[i]))
  }
} 
```

但我觉得这是一个相当不优雅的解决方案。速度并不是真正的问题，但我需要知道是否有其他方法。

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2013-03-10T19:23:17.963

You can set a case-insensitive flag as the first item in the regex.

You do this by adding `"(?i)"` to the beginning of a regex.

```
reg, err := regexp.Compile("(?i)"+strings.Replace(s.Name, " ", "[ \\._-]", -1)) 
```

For a fixed regex it would look like this.

```
r := regexp.MustCompile(`(?i)CaSe`) 
```

For more information about flags, search the [`regexp/syntax`](https://golang.org/pkg/regexp/syntax) package documentation (or the [syntax documentation](https://github.com/google/re2/wiki/Syntax)) for the term "flags".

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-03-10T19:22:37.160

You can add a `(?i)` at the beginning of the pattern to make it case insensitive.

[Reference](https://github.com/google/re2/wiki/Syntax)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-10T19:22:48.563

I'm not too familiar with Go, but according to this example: [http://play.golang.org/p/WgpNhwWWuW](http://play.golang.org/p/WgpNhwWWuW)

You need to prefix your regex statement with `(?i)`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-10T19:24:16.320

Use the `i` flag. Quoting the tip [documentation](http://tip.golang.org/pkg/regexp/syntax/):

> Grouping:

```
(re)           numbered capturing group
(?P<name>re)   named & numbered capturing group
(?:re)         non-capturing group
(?flags)       set flags within current group; non-capturing
(?flags:re)    set flags during re; non-capturing 
```

> Flag syntax is xyz (set) or -xyz (clear) or xy-z (set xy, clear z). The flags are:

```
i              case-insensitive (default false)
m              multi-line mode: ^ and $ match begin/end line in addition to begin/end text (default false)
s              let . match \n (default false)
U              ungreedy: swap meaning of x* and x*?, x+ and x+?, etc (default false) 
```

# cgi - CGI::Session 没有设置 cookie

> ID：15326422
> 
> 赞同：0
> 
> 时间：2013-03-10T19:19:55.473
> 
> 标签：cgi, session-cookies, perl-module

我有一些运行良好的代码 - 直到我将会话初始化移动到我的一个模块中。现在不再通过 print->header 设置 cookie，因此每次运行时都会创建一个新会话。这是（大量修剪/编辑的）代码：

```
# login.pl

use CGI;
use CGI::Session ( '-ip_match' );
use DBI;

use MyPM qw(&open_db &close_db &getSession); 

use strict;
use warnings;

my $cgi = new CGI;
my $dbh = open_db;
my $session = getSession($cgi, $dbh);   # Call to MyPM.pm
close_db($dbh);

...... code ......

print $session->header(-type => 'application/json');
print $json;

=======================================

# MyPM.pm

use CGI::Session ( '-ip_match' );

our @ISA = qw(Exporter);
our @EXPORT_OK = qw( open_db close_db getSession );

sub getSession {  

  my $cgi = shift;
  my $dbh = shift;

  my $CGICOOKIE = $cgi->cookie('CGISESSID') || 'x';
  my $lng = length($CGICOOKIE);
  if ( $lng != 32 ) print redirect( -URL => $home );

  my $session = CGI::Session->new('driver:MySQL', $cgi, { Handle=>$dbh }) ;
  return $session; 

} 
```

如果我将对 getSession 的调用更改为：

```
my $session = CGI::Session->new('driver:MySQL', $cgi, { Handle=>$dbh }); 
```

它再次完美运行并设置了cookie。

我可能哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T10:57:45.103

我意识到问题是当我检查 cookie 时 - 我正在检查 32 个字符的 cookie ......但忽略了它可能丢失的事实。对不起我的愚蠢！

# performance - 为什么以下最大二分匹配实现的时间复杂度为 O(m*n^2)？

> ID：15326425
> 
> 赞同：2
> 
> 时间：2013-03-10T19:20:17.157
> 
> 标签：performance, algorithm, time-complexity, matching, bipartite

有这个库实现了许多算法，其中之一是最大二分匹配。

这是源代码的链接： http: [//shygypsy.com/tools/bpm.cpp](http://shygypsy.com/tools/bpm.cpp)

我也会把它包括在这里（没有评论）

```
#include <string.h>

#define M 128
#define N 128

bool graph[M][N];
bool seen[N];
int matchL[M], matchR[N];
int n, m;

bool bpm( int u )
 {
  for( int v = 0; v < n; v++ ) 
   if( graph[u][v] )
   {
    if( seen[v] ) continue;
    seen[v] = true;

    if( matchR[v] < 0 || bpm( matchR[v] ) )
    {
        matchL[u] = v;
        matchR[v] = u;
        return true;
    }
}
return false;
}

int main()
{
  memset( matchL, -1, sizeof( matchL ) );
  memset( matchR, -1, sizeof( matchR ) );
  int cnt = 0;
  for( int i = 0; i < m; i++ )
  {
      memset( seen, 0, sizeof( seen ) );
      if( bpm( i ) ) cnt++;
  }
  return 0;
} 
```

我们有一个运行`m`时间的 for 循环。这个数字`m`是指工人的数量。然后我们进入`bpm`有另一个for循环的函数。这个循环运行的`n`时间`n`是任务的数量。

到目前为止，我们有`m*n`时间复杂度。

然而，`bpm`在第三个 if 语句中有一个递归函数调用。此函数的目标是运行 a`dfs`以找到增强的路径。

我知道这`dfs`有时间复杂度`O(n+m)`。所以我会假设该函数`bpm`的复杂性为`O(n+m)`

因此总时间复杂度为`O(m*(n+m))`

但是作者说它是`O(m*n^2)`. 有人可以解释一下为什么会这样吗？先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:32:59.337

这里的变量有些令人困惑：M 和 N 指的是图每一侧的节点数。DFS 的运行时间是`O(E+V)`其中 E 是边数。在二分图中 |E| 最多为 N*M，V 为 (N+M)，因此您的 DFS 将采用`O(NM)`. 则总时间复杂度为`O(NM^2)`。不知道在哪里`N^2`进来，可能是一个错字...

# c - 从 C 程序链接到 SDL

> ID：15326429
> 
> 赞同：1
> 
> 时间：2013-03-10T19:20:28.557
> 
> 标签：c, sdl

我有一个非常简单的 C 程序，[取自 SDL 文档](http://www.libsdl.org/intro.en/usinginit.html)：

```
#include <stdlib.h>
#include "SDL.h"

int main() {
    if (SDL_Init(SDL_INIT_AUDIO|SDL_INIT_VIDEO) < 0) {
        return EXIT_FAILURE;
    }
    atexit(SDL_Quit);
    return EXIT_SUCCESS;
} 
```

我`sdl-config --cflags --libs`用来为clang提供论据。它能够链接到 SDL 标头，但无法链接到 SDL 库：

```
/tmp/example-f2Tgg6.o: In function `main':
example.c:7: undefined reference to `SDL_Init'
example.c:8: undefined reference to `SDL_Quit'
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我试图用 gcc 编译并得到同样的问题，所以我觉得我错过了一些明显的东西。我正在运行 xubuntu 11.10，以防万一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:45:32.320

尝试安装库。就像是`sudo apt-get install libsdl1.2-dev libsdl1.2debian`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T23:14:02.720

首先，您始终可以使用 找出正确的标志，如此[处](https://github.com/slezica/bleg/blob/master/data/posts/2013-02-12-figuring-out-compilation-flags.md)`pkg-config`所示。

然后您可以使用`apt-file`Google 来确定您需要通过`apt`. 在这种情况下，请查看`libsdl-*`- 您可能需要基本包和`-dev`包。

# .net - linq to sql 延迟加载不起作用

> ID：15326436
> 
> 赞同：1
> 
> 时间：2013-03-10T19:20:52.563
> 
> 标签：.net, linq-to-sql, lazy-loading

我正在尝试使用 linq to sql 对名为 Customers 的父实体执行简单的选择，该实体在我的 dbml 设计器中与名为 Projects 的实体具有一对多的关系。

通过连接，我可以访问两个实体的列属性：

```
using (DataClasses1DataContext DbContext = new DataClasses1DataContext())
            {
                var query2 = DbContext.Customers
                    .Join(DbContext.Projects, c => c.CustomerID, p => p.CustomerID,
                    (c, p) => new
                    {
                        c.Email,
                        p.Customer
                    });
            } 
```

但是，在简单选择期间（使用任何 query1、2 或 3 变量），我不知道为什么延迟加载不显示 Projects 实体的任何列属性（使用智能感知）。我知道 query1 和 query2 会返回列表，而 query3 只会返回一条记录。

如何正确使用延迟加载并访问 Project 子实体中的列属性？

另外，如果我可以通过延迟或急切加载访问那些相同的子列，为什么要在相关实体上使用 JOIN？

```
using (DataClasses1DataContext DbContext = new DataClasses1DataContext())
            {
                //var dataLoadOptions = new DataLoadOptions();
                //DbContext.LoadOptions.LoadWith<Customer>(n => n.Projects);

                //var query1 = DbContext.Customers.Where(c => c.CustomerID > 0);

                //var query2 = DbContext.Customers.Where(c => c.CustomerID > 0).Select(c => new { c.CustomerID, c.Projects });

                var query3 = DbContext.Customers.Where(c => c.CustomerID == 1).FirstOrDefault();

                query3.Projects.
            } 
```

编辑 #1: var query1 = DbContext.Customers.Where(c => c.CustomerID > 0);

```
 foreach (var c in query1)
            {
                c.Projects.
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:31:45.560

单个对象是 Customer，但 Projects 是一个集合，而不是单个 Project 对象。

**更新**

```
var query1 = DbContext.Customers.Where(c => c.CustomerID > 0);

foreach (var c in query1)
{
    foreach(var p in c.Projects)
    {
         int id = p.CustomerID;
         ...
    }
} 
```

# javascript - Javascript和人力车。如何更新实时流媒体？

> ID：15326446
> 
> 赞同：2
> 
> 时间：2013-03-10T19:21:39.620
> 
> 标签：javascript, rickshaw

如何使用实时流媒体更新人力车数据？

我按如下方式启动图表。

```
for (var i = 0; i < json_data.length; i++) {
    meta = json_data[i];
    seriesJsonData.push({color: palette.color(),data: meta['series'],name: meta['name']});
}
var graph = new Rickshaw.Graph( {
    element: document.getElementById("chart"),
    width: 900,
    height: 500,
    renderer: 'area',
    stroke: true,
    series: seriesJsonData
} ); 
```

然后我想回电以获取这种格式的数据。

```
//new data to plot.
setInterval( function() {
    // data = mycallback('ajax_time_series/');
    data = {y: 0.013342943046016261, x: 1362914220};
    graph.series.addData(data);
    graph.update();
}, 3000 );

json_data = [{"series": [{y: 0.013342943046016261, x: 1362914220}, {y: 0.03332711471721182, x: 1362914280}, {y: 0.01995987637052034, x: 1362914340}, {y: 0.02667808501229039, x: 1362914400}, {y: 0.026667576407988548, x: 1362914460}, {y: 0.02666090465447435, x: 1362914520}, {y: 0.039902022061890564, x: 1362914580}, {y: 0.040065222851502304, x: 1362914640}, {y: 0.026725544622339118, x: 1362914700}, {y: 0.03328597880035014, x: 1362914760}, {y: 0.020025583265634844, x: 1362914820}, {y: 0.013351483328567889, x: 1362914880}, {y: 0.013327807174645642, x: 1362914940}, {y: 0.03327930933245091, x: 1362915000}, {y: 0.060011496243413356, x: 1362915060}, {y: 0.026726823599964183, x: 1362915120}, {y: 0.06625748681407234, x: 1362915180}, {y: 0.08716853007016215, x: 1362915240}, {y: 0.019958925851731625, x: 1362915300}, {y: 0.026628071716283376, x: 1362915360}, {y: 0.053539335295842476, x: 1362915420}, {y: 0.013329419200217766, x: 1362915480}, {y: 0.020005110867173173, x: 1362915540}, {y: 0.03985835992510624, x: 1362915600}, {y: 0.04009389940367332, x: 1362915660}, {y: 0.020015945088387825, x: 1362915720}, {y: 0.02661011443819408, x: 1362915780}, {y: 0.06656881334811096, x: 1362915840}, {y: 0.04690556277785193, x: 1362915900}, {y: 0.03326433994636323, x: 1362915960}, {y: 0.02670133346693278, x: 1362916020}, {y: 0.033335701795225714, x: 1362916080}, {y: 0.020001391989344027, x: 1362916140}, {y: 0.02000903195967164, x: 1362916200}, {y: 0.013308784414422375, x: 1362916260}, {y: 0.058279492803009744, x: 1362916320}, {y: 0.034243644495436376, x: 1362916380}, {y: 0.020081534665136593, x: 1362916440}, {y: 0.026653921622562717, x: 1362916500}, {y: 0.0199648119499449, x: 1362916560}, {y: 0.03338215889686262, x: 1362916620}, {y: 0.04659716637539024, x: 1362916680}, {y: 0.033199969663029336, x: 1362916740}, {y: 0.020053008656297493, x: 1362916800}, {y: 0.020083574882737414, x: 1362916860}, {y: 0.013338712371294185, x: 1362916920}, {y: 0.013285462289789874, x: 1362916980}, {y: 0.03342980523147545, x: 1362917040}, {y: 0.013318560614522242, x: 1362917100}, {y: 0.020054761094019935, x: 1362917160}, {y: 0.02649323226604952, x: 1362917220}, {y: 0.08046447455222104, x: 1362917280}, {y: 0.033380214683152935, x: 1362917340}, {y: 0.01998459181555401, x: 1362917400}, {y: 0.11263974301203006, x: 1362917460}, {y: 0.03351645707155687, x: 1362917520}, {y: 0.02667373118205504, x: 1362917580}, {y: 0.020004237840478896, x: 1362917640}, {y: 0.0867493421006396, x: 1362917700}], "name": "cpuUsage"}]; 
```

我将有多个系列要更新。我的图表没有更新，我不理解要更新的文件。

另外......我不承诺与人力车。是否有具有良好文档的实时流式 JS 库？人力车看起来很漂亮，但实时记录很差。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T21:01:05.773

我想让您知道我的解决方法：

1.  保存图表 div 的内部 html 以供以后使用（图表渲染后，内部 html 被更改）

2.  添加数据时，请将其添加到稍后可以访问的数组中。

3.  像往常一样使用数据数组渲染图表。

4.  当您需要添加数据时，将数据添加到包含您的数据的数组中，然后从头开始重新生成图表。只有在再次渲染之前再次将原始 html 插入图表 div 中，才能执行此操作。

这适用于每 5 秒更新 8 个图表，每个图表有 20 个数据点。它几乎不占用资源。如果您增加数据点的数量或使用高级渲染选项，我相信这将需要很多。

我应该为此获得解决方法诺贝尔奖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-05T02:08:41.893

对于那些落后的人，[FixedDuration 系列](https://github.com/shutterstock/rickshaw/blob/master/src/js/Rickshaw.Series.FixedDuration.js)可能是您想要的。

它似乎没有记录在任何地方，除了在[这个例子中展示了使用固定窗口的实时更新](http://code.shutterstock.com/rickshaw/examples/fixed.html)，但[它在 2012 年 8 月 v1.1 版本之前就已经存在了](https://github.com/shutterstock/rickshaw/blob/v1.1.0/src/js/Rickshaw.Series.FixedDuration.js)。

这是在他们的示例中生成绘图的代码：

```
var tv = 250;

// instantiate our graph!
var graph = new Rickshaw.Graph( {
    element: document.getElementById("chart"),
    width: 900,
    height: 500,
    renderer: 'line',
    series: new Rickshaw.Series.FixedDuration([{ name: 'one' }], undefined, {
        timeInterval: tv,
        maxDataPoints: 100,
        timeBase: new Date().getTime() / 1000
    }) 
} );

graph.render();

// add some data every so often

var i = 0;
var iv = setInterval( function() {

    var data = { one: Math.floor(Math.random() * 40) + 120 };

    var randInt = Math.floor(Math.random()*100);
    data.two = (Math.sin(i++ / 40) + 4) * (randInt + 400);
    data.three = randInt + 300;

    graph.series.addData(data);
    graph.render();

}, tv ); 
```

# java - Android上的Java Socket，通过3G互联网全球ip连接

> ID：15326450
> 
> 赞同：2
> 
> 时间：2013-03-10T19:22:06.080
> 
> 标签：java, android, sockets, connection, ip

我在 Android 上使用 Sockets 时遇到问题。我是这个话题的新手，所以我尝试实现一个简单的聊天，Android 手机到另一个 Android 手机作为培训。

我可以使用我的代码创建一个 ServerSocket 并使用来自同一设备的另一个 Socket 连接到它（一个设备上只有一个客户端的“回声”示例工作正常）我已经完成了在同一个 wifi 上使用两个 IP 地址（192.168 ...），但任何尝试使用 3G 连接使用互联网 IP 地址连接远程客户端的尝试都失败了

```
java.net.SocketException: recvfrom failed: ETIMEDOUT (Connection timed out) 
```

我所做的是，创建 ServerSocket (ServerConnect.java) ：

```
 private ServerSocket _mainServer = null;

    private void initServer() {

        try {
                        //port I use here is arbitrary: 8081
            _mainServer = new ServerSocket(CONNECT_SOCKET_PORT);
        } catch (IOException e) {
            Log.w("ServerSocket", e.toString());
            e.printStackTrace();
        }
    } 
```

在同一个类中，在一个单独的线程中，我这样做是为了等待客户端连接：

```
 while (running) {
            GuestConnect ssc = new GuestConnect(_mainServer.accept());
            ssc.setListener(this);
            ssc.startConnection();

            _clientSockets.add(ssc);

            performGuestAdded("bra!");
        } 
```

它使服务器等待多个客户端连接，因此它可以在“聊天室”中容纳两个以上的人。

通信服务器端由本地客户端回调组成，并向我的所有客人发送消息（我仍在处理这部分，它还没有真正完成，但我认为它与我的问题无关）：

```
public void onMessageReceived(TBTGuestConnect sender, String message) {
    for(TBTGuestConnect guestConnect : _clientSockets)
        if(guestConnect != sender)
            guestConnect.sendMessage(message);
} 
```

客户端存储为“GuestConnect”对象，这是我设置它们的方式（GuestConnect.java）：

```
public class GuestConnect {

   private StringBuilder _currentMessage;
   private BufferedReader _is;
   private PrintStream _os;
   private Socket _clientSocket = null;

   private String _hostname;

   private boolean _running = false;

   public GuestConnect(String hostname) {
    _hostname = hostname;

    _currentMessage = new StringBuilder();
   } 
```

clientSocket 初始化（仍然是 GuestConnect.java）：

```
private void initSocket() {

    if(_clientSocket==null)
    {
        // Try to open a server socket on given port
        // Here is the fail when I called it from another device
        try {
            _clientSocket = new Socket(_hostname, ServerConnect.CONNECT_SOCKET_PORT);
        } catch (IOException e) {
            Log.w("GuestSocket", e.toString());
        }
    }

    // Create a socket object from the ServerSocket to listen and accept
    // connections.
    // Open input and output streams
    try {
        _is = new BufferedReader(new InputStreamReader(_clientSocket.getInputStream()));
        _os = new PrintStream(_clientSocket.getOutputStream());

    } catch (IOException e) {
        Log.w("GuestSocket", e.toString());

    }
} 
```

同样，在同一个班级中，有交流部分：

```
 initSocket();

    _running = true;

    performConnectionStarted();
    try {
        while (_running) {
            String received = _is.readLine();
            _currentMessage.append(received);
            if (received.contains(ServerConnect.CONNECT_SOCKET_MESSAGE_END)) {
                String finalMsg = _currentMessage.toString().substring(0, _currentMessage.lastIndexOf(ServerConnect.CONNECT_SOCKET_MESSAGE_END));
                performMessageReceived(finalMsg);
                _currentMessage.setLength(0);
            }

        }
    } catch (IOException e) {
        Log.w("GuestSocket", e.toString());
        performError(e);
    } finally {

        try {
            _os.close();
            _is.close();
            _clientSocket.close();
        } catch (IOException e) {
            e.printStackTrace();
            performError(e);
        }

        _clientSocket = null;
    } 
```

然后我可以通过这种方法发送消息：

```
public void sendMessage(String toSend) {
    if (_running)
        _os.println(toSend+ServerConnect.CONNECT_SOCKET_MESSAGE_END);
    else
        throw new IllegalStateException("Send message : Connection isn't started !");
} 
```

所以问题是，我应该怎么做才能使用全球互联网 IP 地址使其工作？

更一般地说，相同的wifi本地IP地址和互联网IP地址之间的技术区别是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T12:45:53.530

不知道这对您是否重要，但在我们国家，大多数 3G 帐户都被 ISP 阻止传入连接。您必须申请解锁端口。有些 ISP 不会解除对它们的阻止，有些会。

当我想将我的 DVR 与 3G 调制解调器连接时发现了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T20:34:04.640

我将从最后开始，因为它更容易 - 本地 IP 地址是**私有**的，它在您的本地网络之外无效（并且不可见），本地网络之外的人无法直接访问它，但您可以使用**公共**访问主机ip地址。因为它们不是普遍可见的私有地址不是唯一的，所以公共 IP 地址是唯一的并且（通常）从 Internet 上的任何点都可见。关于这个主题的更多信息[http://en.wikipedia.org/wiki/Network_address_translation](http://en.wikipedia.org/wiki/Network_address_translation)

当涉及到 3g 网络时，请看这里[我可以使用 3g ip 连接到我的 iphone 吗？](https://stackoverflow.com/questions/11039848/could-i-connect-to-my-iphone-using-3g-ip)在这里[ServerSocket accept() 不接受 Android 上的连接](https://stackoverflow.com/questions/4032482/serversocket-accept-not-accepting-connections-on-android)。所以很可能无法完成

# android - 无根设备的 android 应用程序的默认数据库位置是什么？和root一样吗？

> ID：15326455
> 
> 赞同：5
> 
> 时间：2013-03-10T19:22:18.350
> 
> 标签：android, installation, rooted-device, installation-path

我有一个非常具体的问题。

首先让我解释一下我要做什么，然后是问题所在。

基本上我要做的是将现有的 .db 数据库文件存储在**assets**文件夹中，然后在安装后我想将 .db 文件从 assets 复制到 Android 中的默认数据库位置。类似于此页面的答案 [link] [How to use an existing database with an Android application](https://stackoverflow.com/questions/9109438/how-to-use-an-existing-database-with-an-android-application)。

**问题**对于我无法访问的无根设备`/data/data/<<package name folder>>`。在这种情况下，数据库文件存储在哪里。换句话说，我想将文件从资产复制到数据库的应用程序默认位置，`DB_PATH = "/data/data/" + context.getPackageName() + "/databases/"`以防根设备。无根设备是否也一样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-10T19:25:37.403

是的，对于这两种情况，这将是相同的路径。`/data/data/<application_package_name>/databases`

现在，在无根设备上，您无法访问`/data/`设备内部存储的目录。这就是为什么您看不到数据库文件的原因。

如果要获取文件，可以将数据库文件从内部存储复制 `/data/data/<application_package_name>/databases`到外部存储（SD 卡），然后使用**ddms**或`adb pull`获取数据库文件。

也只需尝试`adb pull /data/data/<application_package_name>/databases/<database_file_name>`系统中的命令来获取数据库文件。

但默认情况下，所有 android 应用程序存储数据库都在内部存储路径上`/data/data/<application_package_name>/databases`。它适用于所有有**根**或**无根**的设备。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-20T20:03:50.003

根据[http://developer.android.com/reference/android/content/Context.html#getDatabasePath(java.lang.String)](http://developer.android.com/reference/android/content/Context.html#getDatabasePath(java.lang.String))上的 Android 文档，您应该使用 context.getDatabasePath。

为我工作：

```
File dbFile = context.getDatabasePath(name_of_database_file); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-21T05:59:00.447

默认情况下，Android 将其 SQLite 数据库存储到以下链接，您可以在该链接中使用**shell**从**命令提示符访问您的****.db**文件，以使用 chmod 获取所有者访问权限以获得读取或写入权限。

 ****```
String DATABASE_PATH = "/data/data/" + PACKAGE_NAME + "/databases/" + DATABASE_NAME;

Where:
String DATABASE_NAME = "your_dbname";
String PACKAGE_NAME = "com.example.your_app_name"; 
```

有关更多详细信息，您可以查看以下链接。[点击这里](https://stackoverflow.com/a/42359626/4529588)****

# jquery - 当我有包含 div 时如何找到选择的单选按钮

> ID：15326458
> 
> 赞同：0
> 
> 时间：2013-03-10T19:22:29.940
> 
> 标签：jquery, html

我有以下html：

```
 <input type="text" class="searchpersontxtbox" />
    <input type="button" value="Find" class="findpersonbtn btn" disabled="disabled" />
    <img class="loader" style="display: none;" alt="Loading..." src="@Url.Content("~/Content/Images/ajax-loader.gif")" />
    <div class="peopleresultsdiv"></div>
    <div class="contactType">
        <input type="radio" name="searchtype" value="person" >Person
        <input type="radio" name="searchtype" value="organisation" checked="checked">Organisation
    </div>
<input type="text" class="searchpersontxtbox" />
    <input type="button" value="Find" class="findpersonbtn btn" disabled="disabled" />
    <img class="loader" style="display: none;" alt="Loading..." src="@Url.Content("~/Content/Images/ajax-loader.gif")" />
    <div class="peopleresultsdiv"></div>
    <div class="contactType">
        <input type="radio" name="searchtype" value="person" checked="checked">Person
        <input type="radio" name="searchtype" value="organisation">Organisation
    </div> 
```

所以这里有两个搜索。我想知道的是当点击查找按钮时如何确定点击了哪个单选按钮？因此，如果在第一次单击查找按钮，它将是组织，如果在第二次搜索上单击查找按钮，它将是人员。

如果页面上只有一个搜索，我想我可以弄清楚如何做到这一点，但有两个搜索的事实让我感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:27:13.023

您可以确定单击按钮的索引，然后使用 JQuery 访问具有相同索引的单选组：

```
$('input[type=button]').index($this) 
```

**小提琴：http :** [//jsfiddle.net/hd72Q/](http://jsfiddle.net/hd72Q/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:40:13.723

如果这些是不同的搜索，那么恕我直言，您需要更改每个组中无线电输入类型的名称，否则它们就像一个组一样。所以第二次搜索可能是

```
<input type="radio" name="searchtype2" value="person" checked="checked">Person
<input type="radio" name="searchtype2" value="organisation">Organisation
                                    ^ 
```

这是另一种获取与您的查找按钮相关的选中单选输入类型的值的方法

```
$(".findpersonbtn.btn").click(function(){
    var value = $(this).nextAll(".contactType").first().find("input[type=radio]:checked").val();
    alert(value);
}); 
```

**[jsFiddle](http://jsfiddle.net/pmatseykanets/JeSmd/)**

# php - php session does not work after form submit in php 5.3

> ID：15326465
> 
> 赞同：1
> 
> 时间：2013-03-10T19:22:49.500
> 
> 标签：php, session

My code is this. this is a login page. i am creating session after submitting the form. but session is not creating here. but i have created a session at the top just to test, its working. my php version is 5.3+. it was working well before. but the hosting company has a update and the problem begins. all other things are okay.

```
<?php
    ob_start();
    session_start();
    $_SESSION['sessid'] = 123456789;
    print_r($_SESSION);
    include('db_connect.php');
    ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="css.css" type="text/css" />
    <title>test</title>
    </head>
    <body class="oneColElsCtrHdr">
    <div id="container">
      <div id="header"> <a href="index.php?category=all"><img src="main_logo1.png" border="0" alt="logo" height="100" /></a>
        <h2>Celebrating Life Admin Panel</h2>

        <div class="clr"></div>
      </div>
      <div class="clr"></div>
      <div id="mainContent">
    <?php
    if(isset($_POST['submit2']))
    {
        $username = mysql_real_escape_string($_POST['username']);
        $password = md5($_POST['password']);
        $query = "SELECT COUNT(*) as num FROM user WHERE username = '$username' AND password = '$password'";
        $result = mysql_fetch_assoc(mysql_query($query));
        //$result); die();
        if($result['num'] > 0)
        {
            $_SESSION['logged_in'] = TRUE;
        }
        else
            $_SESSION['error'] = "Wrong username or password.";
        mysql_close($conn);
    }
    echo '<h3>Admin Login</h3>';
    if($_SESSION['error']!=""){
        echo '<div class="error">'.$_SESSION['error'].'</div>';
        unset($_SESSION['error']);
    }
    ?>

    <?php if(!$_SESSION['logged_in']){ $_SESSION['sessidd'] = 123456789564656;?>
        <form action="login.php" method="post">
          <table width="300" border="0" cellspacing="0" cellpadding="6" style="margin:0 auto 20px">
            <tr>
              <th colspan="2" scope="col">&nbsp;</th>
            </tr>
            <tr>
              <td>Username</td>
              <td><input type="text" name="username" /></td>
            </tr>
            <tr>
              <td>Password</td>
              <td><input type="password" name="password" /></td>
            </tr>
            <tr>
              <td colspan="2" align="center"><input type="submit" name="submit2" value="Login" /></td>
            </tr>
          </table>
        </form>
    <?php }else{ ?>
        <table width="300" border="0" cellspacing="0" cellpadding="6" style="margin:0 auto 20px">
            <tr>
              <th colspan="2" scope="col">
                You have successfully logged in.<br />
                <a href="index.php?category=all">SHOW ALL REGISTRATION DATA</a>
              </th>
            </tr>
          </table>
    <?php } ?>

      </div>
      <div id="footer">

      </div>
    </div>
    </body>
    </html>
    <?php ob_flush(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T06:01:15.077

您必须使用一些用户数据注册您的会话，例如

```
 if($result['num'] > 0)
         {
        session_register("id");
        $id = $result['id'];
        $_SESSION['logged_in'] = $id;
                 } 
```

代替

```
 if($result['num'] > 0)
         {
        $_SESSION['logged_in'] = TRUE;
        } 
```

希望它对你有用

# python - 编写一个循环来表示数组中的每个多项式，用于 n 个多项式

> ID：15326467
> 
> 赞同：0
> 
> 时间：2013-03-10T19:23:00.030
> 
> 标签：python, function, loops, variable-assignment

```
import csv
import numpy
from sympy import *
import numpy as np
from numpy import *
import json

reader=csv.reader(open("/Users/61/Desktop/pythonlearning/generator1.csv","rU"),delimiter=',')
a=list(reader)
result=numpy.array(a)
print a 

b = []
for n in range(3):
    b.append(a[n+1][0:3])
print b
e = np.array(b)
f = e.astype(np.float)
print f

x = Symbol("x")
y = Symbol("y")

coeffs = f
F1 = numpy.poly1d(f[0])
F12 = np.polyder(F1)
print F12
F2 = numpy.poly1d(f[1])
F22 = np.polyder(F2)
print F22
F3 = numpy.poly1d(f[2])
F32 = np.polyder(F3) 
print F32 
```

这是我的编码， f 是一个像这样的数字数组`[[ 9.68000000e-04 6.95000000e+00 7.49550000e+02] [ 7.38000000e-04 7.05100000e+00 1.28500000e+03] [ 1.04000000e-03 6.53100000e+00 1.53100000e+03]]`：基本上，我想分配 的值`f`以形成多项式，然后对多项式进行微分。结果就像`0.001936 x + 6.95 0.001476 x + 7.051 0.00208 x + 6.531` 这样 我如何编写一个循环来获得 n 多项式的微分，并且可以轻松使用具有不同名称的多项式。例如，F1 代表第一个多项式，F2 代表第二个多项式，依此类推。我试过这样，但它不起作用

```
i = 1
if i < 3:
    F(i)=numpy.poly1d(f[i-1])
else:
    i = i+1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:11:21.317

您需要使用循环来处理可变数量的多项式和存储它们的数据结构。尝试使用字典，使用 for 循环进行迭代。

```
numberPolynomials = 3
F = {}
for n in range(1, numberPolynomials+1):
    F[n] = np.poly1d(f[n-1])
    F[(n, 2)] = np.polyder(F[n])
    print F[(n, 2)] 
```

现在您可以不将多项式称为`F1`,`F2`等，而是将其称为`F[1]`,`F[2]`等。对于您所称`F12`的 , `F22`,`F32`将是`F[(1,2)]`, `F[(2,2)]`, `F[(3,2)]`。但是，如果您不打算使用原件，您应该覆盖它们并且可能只使用一个列表。

这是假设，您将 numpy 的 3x 导入更改为：

```
import numpy as np 
```

# c++ - 如何定义迭代器类成员的类型以使用 STL 容器方法？

> ID：15326468
> 
> 赞同：0
> 
> 时间：2013-03-10T19:23:03.027
> 
> 标签：c++, stl, iterator, type-conversion

我希望在向量上定义一个迭代器类，它的私有成员如何`p`匹配 std::vector::begin() 的返回类型？

```
class A{

struct element{
      ...
}

  class e_iterator {

  e_iterator() : p()

    ...

    private:
      element* p;  
  };

  e_iterator e_begin() const{
     e_iterator Iter;
     Iter.p = e_.begin(); // error
     return Iter;
  }

 std::vector<element> e_; 
```

我收到一个错误`element* p`：

```
error: cannot convert 'std::vector<element, std::allocator<element>>::const_iterator' to 'element*' in assignment 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:13:03.647

根据您所提供的，我最多可以建议更改`p`为：

```
std::vector<element>::const_iterator p; 
```

一个简单的事实是`std::vector`迭代器不是指针（可能）。它是一种行为类似于指针的未指定类型——它满足随机访问迭代器的要求。

当你调用`begin()`一个非`const`容器时，你会得到一个`iterator`类型。`const`当你在迭代器上调用它时，你会得到一个`const_iterator`类型。由于您的`a_begin`成员函数已标记`const`并且`e_`似乎是`std::vector<element>`您的类的成员，因此`e_`是传递性的`const`，因此调用`begin()`它也会让您获得一个`const_iterator`.

但是很难准确地说出您在这里尝试做什么以及这是否是正确的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:48:45.263

在您的迭代器类中更改`element* p`为`const element* p`或从您的 e_begin() 方法中删除 const 限定符。或者同时提供 const/non-const 迭代器。我还建议在迭代器构造函数中初始化指针：

```
template <bool isconst>
class e_iterator_ {

  public:
    typedef std::conditional<isconst, const element*, element*>::type elementptr;

    e_iterator_(elementptr e) : p(e)

  ...

  private:
    elementptr p;  
};

typedef e_iterator_<true> const_e_iterator;
typedef e_iterator_<false> e_iterator; 
```

然后你可以使用`data()`std::vector 的成员方法直接访问向量的底层数组。

```
 e_iterator e_begin() const{
     const_e_iterator Iter(e_.data());
     return Iter;
  } 
```

希望这可以帮助。

# azure - Has Any one tried in Deploying the package programatically in Azure

> ID：15326469
> 
> 赞同：0
> 
> 时间：2013-03-10T19:23:03.257
> 
> 标签：azure

Has Any one tried implementing deployment of Azure CSPKG deployment programmatically using Service Management REST API. Please share with me any guideline or website which explain me clearly. Especially I Want my Web ROle to deploy the Worker ROle where package is in Azure blob storage.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:18:13.430

查看Neil Mackenzie 的[这篇文章](http://www.packtpub.com/article/managing-azure-hosted-services-with-service-management-api)。这包括使用 REST API 来执行部署。此外，您可以通过查看[GitHub 上的代码](https://github.com/WindowsAzure/azure-sdk-tools/blob/master/WindowsAzurePowershell/src/Management.ServiceManagement/HostedServices/NewAzureDeployment.cs)来查看 Windows Azure PowerShell cmdlet 在后台使用的代码。

# c - Writing binary to a file is pulling incorrect data from previous unrelated popen commands in C

> ID：15326470
> 
> 赞同：1
> 
> 时间：2013-03-10T19:23:06.210
> 
> 标签：c, binary, popen, fwrite, simultaneous

So this code functions by itself, but when I use it with my main program, it's somehow pulling in some, what seems to be, completely unrelated parts of the code and writing it to the file I'm writing... All compiles without issues, so I know it's not a definition problem or a pointer issue, and everything else writes properly, but somehow I'm getting over 3200 bytes of stuff that the struct doesn't have any relation to, and writing it at address 0x1 in the file, which isn't any part of the struct either...

```
struct a {
    unsigned long addr; //File address
    int sz; //Num Bytes
    unsigned long pos; // Buffer Address
};

// Many more than this, but you get the general struct idea..
struct a as[][3] = {
    {{ 0xF245, 5, 0x6F02C4 }},
    {{ 0x471D, 128, 0x65892 }},
    {{ 0x6198F, 12, 0xA4092 }}
}

//Failing code
        fdin = fopen(files[FIRSTFILE]->filename, "rb");

        fdout = fopen(files[SECONDFILE]->filename, "r+b");

        if (!fdin) {
            fprintf(stderr, "Unable to open %s\n", files[FIRSTFILE]->filename);
            fclose(fdin);
            cleanup(ONSCREEN);
            return EXIT_FAILURE;
        }

        if (!fdout) {
            fprintf(stderr, "Unable to open %s\n", files[SECONDFILE]->filename);
            fclose(fdout);
            fclose(fdin);
            cleanup(ONSCREEN);
            return EXIT_FAILURE;
        } 
```

I have other code here, but none that read from a file and write to another like this, But somewhere in here it's writing at least 3200 bytes incorrectly in the range address 0x1-0xC88 in the file and pulling in data that I'm using in popen functions before all of this.

```
 for (int i = 0; i <= (sizeof(buffer) / sizeof(buffer[0])); i++) {

            memset(buffer, 0, sizeof(buffer));
            fseek(fdin, as[i]->pos, SEEK_SET);
            fread(buffer, 1, as[i]->sz, fdin);

            fseek(fdout, as[i]->addr, SEEK_SET);
            fwrite(buffer, 1, as[i]->sz, fdout);
        }

        if(fclose(fdout)==EOF || fclose(fdin)==EOF) {
            logit(ONSCREEN, "Error closing files.\n\n");
            cleanup(ONSCREEN);
            return EXIT_FAILURE;
        }
        fflush(fdin);
        fflush(fdout); 
```

Here's a piece of the code from the main program that somehow it's pulling information from:

```
 sleep(1);
        memset(command, 0x00, 256);
        sprintf(command, "./somecommand");
        fp = popen(command, "r");
        if (fp == NULL) {
            logit(ONSCREEN, "popen failed.");
            cleanup(ONSCREEN);
            return EXIT_FAILURE;
        }

        while(fgets(store, sizeof(store), fp)) {
            if (strstr(store, "Expected Output")) {
            break;
            }
        }
        pclose(fp);
        fflush(fp); 
```

Again, all of these function just fine by themselves, but when put together in a single function, they don't play well together... The files (FILE *fp, *fdin, *fdout) are differently named, and the store character array is named differently than buffer. What have I done wrong here?

Seems to be something unsafe about using popen and fopen in the same function like that or something I'm not clearing out properly here...?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:44:59.607

在您的示例中，`as[]`有 3 个元素（您的实际代码可能有不同的数字）

```
// Many more than this, but you get the general struct idea..
struct a as[][3] = {
    {{ 0xF245, 5, 0x6F02C4 }},
    {{ 0x471D, 128, 0x65892 }},
    {{ 0x6198F, 12, 0xA4092 }}
} 
```

但是，您正在使用其中的元素数量`buffer`（在评论中您说要`char buffer[256]`对其进行索引：

```
 for (int i = 0; i <= (sizeof(buffer) / sizeof(buffer[0])); i++) {

        memset(buffer, 0, sizeof(buffer));
        fseek(fdin, as[i]->pos, SEEK_SET);
        fread(buffer, 1, as[i]->sz, fdin);

        fseek(fdout, as[i]->addr, SEEK_SET);
        fwrite(buffer, 1, as[i]->sz, fdout);
    } 
```

将循环更改`for`为（另请注意，测试从更改`<=`为`<`）：

```
 for (int i = 0; i < (sizeof(as) / sizeof(as[0])); i++) 
```

最后 - 我认为你`as`无缘无故地使用二维数组使事情变得不必要地更复杂（并且可能是错误的）。尝试：

```
struct a as[] = {
    { 0xF245, 5, 0x6F02C4 },
    { 0x471D, 128, 0x65892 },
    { 0x6198F, 12, 0xA4092 }
}

// ...
   for (int i = 0; i < (sizeof(as) / sizeof(as[0])); i++) {

        memset(buffer, 0, sizeof(buffer));
        fseek(fdin, as[i].pos, SEEK_SET);
        fread(buffer, 1, as[i].sz, fdin);

        fseek(fdout, as[i].addr, SEEK_SET);
        fwrite(buffer, 1, as[i].sz, fdout);
    } 
```

# javascript - Get filesname through javascript

> ID：15326478
> 
> 赞同：0
> 
> 时间：2013-03-10T19:24:06.180
> 
> 标签：javascript

How can I get list of filenames from a specified folder through javascript?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:26:09.187

假设您正在谈论的文件夹在客户端上，那么您不能。如果 JavaScript 有这种能力，它会带来各种各样的安全问题。

如果文件夹在服务器上，那么您可以使用某种形式的 AJAX，服务器端代码获取指定目录中的文件并将其返回给客户端。

# c# - Method in HomeController not called

> ID：15326485
> 
> 赞同：1
> 
> 时间：2013-03-10T19:24:57.300
> 
> 标签：c#, asp.net-mvc-4

I try to call a method from my view page but it is not called. My sample code of Home Controller is

```
public ActionResult Sample(Guid id)
    {
        List<Images> imgList = ImagesManager.GetAlllImages();
        var bindlist = (from i in imgList where id == i.ImageId select i).ToList();
        return RedirectToAction("Index",bindlist);
    } 
```

And my .cshtml page(view ) code from where I try to call it is

```
<div class="product">
                            <a href="Sample/?Id=@item.ImageId" class="info">
                                <span class="holder">
                                    <img src="@item.ImagePath" alt="">
                                    <span class="dd" >@item.ImageName</span>
                                    <span class="author">by John Smith</span> 
```

Why the "Sample" method not called.

The error is "resource not found"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:57:43.557

我想这就是你要找的

```
@Html.ActionLink(
    "text for your link", 
    "Sample", // action method
    "Home",   // controller
    new { id = item.ImageId }, // your variable you want to pass
    null) 
```

# java - How to record an array value when passed into the method?

> ID：15326489
> 
> 赞同：-1
> 
> 时间：2013-03-10T19:25:13.917
> 
> 标签：java, arrays

So im working on some homework and I can't figure out how to make an String array[a] pass into a method in another class and be recorded as a String array there. This is kinda hard to explain since its new to me, but here is what I'm trying to do.

Tester Program:

```
Purse c = new Purse();
c.addCoin("Quarter");
c.addCoin("Penny");
c.addCoin("Nickel");
c.addCoin("Dime");

Purse d = new Purse();
d.addCoin("Nickel");
d.addCoin("Dime");
d.addCoin("Dime");
d.addCoin("Quarter");

System.out.println(c.sameCoins(d));
System.out.println("Expected: false"); 
```

Purse class:

```
public boolean sameCoins(Purse other)
    {
        if (array1.length != array2.length)
        {
            return false;
        }
        int same = 0;
        for (int i = 0; i < array1.length; i++)
        {
            for (int x = 0; x < array2.length; x++)
            {
                if (array2[x].equals(array1[i]))
                {
                    same++;
                    break;
                }
            }
        }
        return same==array1.length;
    } 
```

I know array1 and array2 aren't proper variable/names for the arrays but that just to substitute the idea I'm trying to get at.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:45:33.053

如果`array`是`Purse`类中的字段，`other`则可以在函数中访问钱包`sameCoins`数组`other.array`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:36:30.500

您正在返回 same==array1.length 并且您最初设置了 same = 0 并且从未增加它。

# php - 如何在变量中的逗号后分隔单词以建立链接？

> ID：15326490
> 
> 赞同：0
> 
> 时间：2013-03-10T19:25:14.973
> 
> 标签：php, foreach, tags, cloud

你好对不起我的英语不好。

我想制作一个标签云，但我不知道如何从字符串中逐字获取单词。

这是我想做的例子

```
$text = "admin,demo"; //whit foreach in php 
```

到

```
<a href="/admin" title="admin">admin</a><a href="/demo" title="demo">demo</a> 
```

请帮我 ：（

还有一个问题，我如何从更多行中获取唯一数组：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', '1');

include_once ('/var/www/video/configs/db.php'); 

$query = @mysql_query("SELECT * FROM videos ORDER BY VIDEOID ASC LIMIT 0,10");
while($row = @mysql_fetch_array($query)){ $tags = $row['tags']; }

$rand = rand(5, 55);
$list  = explode(',', $tags);
foreach ($list as $link) { 
$tags = array( array('tag' => "$link", 'num' =>  $rand, 'link' => "$link"), ); 

$array = array_unique($tags); print_r($array);

}
?> 
```

行示例：开源、Smarty、xarg、PHP、Robert

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T19:30:07.763

```
$text = 'admin,demo';
$list = explode(',', $text);

foreach ($list as $link) {
    echo '<a href="/'.$link.'" title="'.$link.'">'.$link.'</a>';
} 
```

# c++ - C++ How to insert a char into vector

> ID：15326492
> 
> 赞同：0
> 
> 时间：2013-03-10T19:25:21.077
> 
> 标签：c++

I have a vector declared like following:

```
 vector < vector<char> > v; 
```

Depend of player I would like to insert x or o into vector. I am doing it like this:

```
 v[y][x]= set%2 ? 'o':'x'; 
```

In my vector instead o or x I am getting: 120 'x'. Why? What should I do to insert only x?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:28:58.837

问题是您很可能将 char 打印为整数，这将为您提供 120 的“x”。请参阅[ascii 表](http://www.asciitable.com/)。

正如@us2012 所指出的，考虑到您对如何看待价值的评论：

> 在调试器中我得到这样的值： {move=0 win=false v=[2]([2](120 'x',0),2) }game_size* const

这只是显示额外信息的调试器。

如果你想打印这个值，你可以选择精确的表示——或者使用`printf`参数，或者通过`static_cast`你想要打印的内容。

打印：

```
std::cout << v[y][x] << std::endl; 
```

会给你'x'，因为向量存储了一个`char`。

如果您想以十进制查看它，只需使用：

```
std::cout << static_cast<int>(v[y][x]) << std::endl; 
```

# c# - masked TextBox with unlimited mask

> ID：15326493
> 
> 赞同：1
> 
> 时间：2013-03-10T19:25:22.593
> 
> 标签：c#, .net, winforms

I have a masked textbox where the user is only allowed to enter alphanumeric letters.

But how can I get the amount of letters to be entered unlimited, so any number of letters can be entered and not restricted to the mask?

```
 nameTextBox.ValidatingType = typeof(System.Char);
        nameTextBox.TypeValidationCompleted += new        TypeValidationEventHandler(nameTextBox_TypeValidationCompleted); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:08:27.777

MaskedTextBox 不支持 MaxLength 属性，如此[处](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.maxlength.aspx)所述。您必须指定具有特定长度的掩码，例如任何 5 个字符的“LLLLL”。如果你想要一个任意长度，你可能不得不使用一个常规的 TextBox，并为 Validating 和 TextChanged 连接事件处理程序。为了给用户反馈，您可以在 TextBox 旁边添加一个标签，其中包含有关有效字符的信息以及它当前是否有效。

对于快速而肮脏的解决方案，您可以尝试以下操作：

```
private void TextBox_TextChanged(object sender, EventArgs e)
{
    var originalText = myMaskedTextBox.Text;
    var parsedText = Regex.Replace(myMaskedTextBox.Text, "[^a-z_A-Z]", "");

    if (originalText == parsedText)
        labelInfo.Text = "Valid string";
    else
    {
        myMaskedTextBox.Text = parsedText;
        labelInfo.Text = "Only alpha-numeric characters please";    
    }
} 
```

# c++ - 从 Verilog 发出 HTTP 请求

> ID：15326494
> 
> 赞同：-1
> 
> 时间：2013-03-10T19:25:23.740
> 
> 标签：c++, python, verilog, system-verilog, hdl

是否可以调用在 Verilog 模块内发出 HTTP 请求的 C/C++/Python/Java 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T23:04:59.180

是的，搜索“DPI”或“PLI”。如果您有一个支持 SystemVerilog 的模拟器，则 DPI 解决方案的开销要少得多。基本上，它的 Verilog 结尾将是：

```
import "DPI" function void do_http(...) 
```

然后，您可以在 Verilog 中像普通任务或函数一样调用 do_http，然后在命令行上传递实现 do_http 的 .c 文件以及其他源代码。这当然是假设您使用的是商业 Verilog 模拟器。我认为 Icarus 还不支持 DPI（可能是错误的）。

使用 VPI 更便携，但需要更多的编码才能组合在一起。如果你需要的话，我鼓励你自己研究那个。

# function - 在 Haskell 函数中使用堆栈

> ID：15326496
> 
> 赞同：1
> 
> 时间：2013-03-10T19:25:34.617
> 
> 标签：function, haskell, stack

我想在 Haskell 函数中使用堆栈，但我不知道如何使用它。我的功能应该像这样工作：

1.  取一个字符串
2.  将此输入字符串的一些元素放入输出字符串，并将其他元素放入堆栈。
3.  也将元素弹出到该输出字符串。
4.  递归执行 2 和 3 直到堆栈为空。
5.  当堆栈为空时打印输出字符串。

我不知道何时何地创建该堆栈。由于我是 Haskell 编程的新手，所以我自己无法弄清楚。由于我还没有创建任何代码，我也无法显示任何代码。你能告诉我这个函数在算法上会是什么样子吗？我应该在哪里定义堆栈和输出字符串？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:22:28.823

这里有一件让人舒服的事情是标准的 Haskell 列表是一个很好的堆栈（自然，记住堆栈是一种更受限制的列表）。您的函数可能如下所示：

```
--takes one string and uses a stack to convert it to another string
doSomethingWithStack :: String -> [String] -> String
doSomethingWithStack str stack =
    let str' =   --here you embody your points 2 and 3
        stack' = --stack top is (head stack), push is (x : stack), pop is (tail stack)
        --... any change you'd want to make to any value turns into a new variable
    in case stack'' of --check the final variables
          [] -> str'' --if stack is empty, end
          _ -> doSomethingWithStack str'' stack'' --if not, repeat

--now, to make it pretty
fancyWrapper :: String -> String
fancyWrapper str = doSomethingWithStack str [] -- empty list is an empty stack

--because you should strive to separate pure and impure functions
--, I suggest that you do the print elsewhere, say
main = do
        str <- getLine
        print $ fancyWrapper str 
```

希望这既不是太少也不是太多。一旦遇到问题，试一试并提出更具体的问题。

# java - 在 ELKI 中运行聚类算法

> ID：15326505
> 
> 赞同：4
> 
> 时间：2013-03-10T19:26:50.200
> 
> 标签：java, cluster-analysis, k-means, elki

我需要以编程方式使用 ELKI 来运行 k-medoids 聚类算法。我有一个相似度矩阵，希望输入到算法中。

是否有任何代码片段可用于如何运行 ELKI 算法？我基本上需要知道如何创建对象`Database`、`Relation`创建自定义距离函数以及读取算法输出。

不幸的是，ELKI 教程 ( [http://elki.dbs.ifi.lmu.de/wiki/Tutorial](http://elki.dbs.ifi.lmu.de/wiki/Tutorial) ) 侧重于 GUI 版本和实现新算法，并且尝试通过查看 Javadoc 来编写代码令人沮丧。

如果有人知道任何易于使用的 k-medoids 库，那么这也可能是这个问题的一个很好的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T09:19:56.620

我们非常感谢文档贡献！（**更新：**我现在已经把这篇文章变成了一个[新的 ELKI 教程条目](http://elki.dbs.ifi.lmu.de/wiki/HowTo/InvokingELKIFromJava)。）

出于多种原因，ELKI 确实主张**不要将其嵌入到其他 Java 应用程序中。**这就是我们推荐使用 MiniGUI（或它构建的命令行）的原因。添加自定义代码最好作为自定义代码`ResultHandler`或仅通过使用`ResultWriter`并解析生成的文本文件来完成。

如果您*真的*想将它嵌入到您的代码中（在许多情况下它很有用，特别是当您需要多个关系并希望相互评估不同的索引结构时），这里是获取`Database`和`Relation`：

```
// Setup parameters:
ListParameterization params = new ListParameterization();
params.addParameter(FileBasedDatabaseConnection.INPUT_ID, filename);
// Add other parameters for the database here!

// Instantiate the database:
Database db = ClassGenericsUtil.parameterizeOrAbort(
    StaticArrayDatabase.class,
    params);
// Don't forget this, it will load the actual data...
db.initialize();

Relation<DoubleVector> vectors = db.getRelation(TypeUtil.DOUBLE_VECTOR_FIELD);
Relation<LabelList> labels = db.getRelation(TypeUtil.LABELLIST); 
```

如果您想进行更通用的编程，请使用`NumberVector<?>`.

## 为什么我们（目前）不建议将 ELKI 用作“库”：

1.  API 仍在发生很大变化。我们继续添加选项，我们**（还）不能提供稳定的 API**。命令行/MiniGUI/参数化更加稳定，因为默认值的处理——参数化只列出了非默认参数，所以只有当这些改变你会注意到。

    在上面的代码示例中，请注意我也使用了这种模式。对解析器、数据库等的更改可能*不会*影响这个程序！

2.  **内存使用：**数据挖掘非常消耗内存。如果您使用 MiniGUI 或命令行，您可以在任务完成后进行很好的*清理。*如果您从 Java 调用它，更改会*非常高*，以至于您在某处保留了一些引用，最终导致*大量*内存泄漏。所以**不要在没有确保完成后正确清理对象的情况下使用上述模式**！

    通过从命令行运行 ELKI，您可以免费获得两件事：

    1.  没有内存泄漏。任务完成后，进程退出并释放所有内存。

    2.  无需为相同的数据重新运行两次。后续分析不需要重新运行算法。

3.  ELKI**没有被设计为可嵌入库是有充分理由的**。ELKI 有大量的选项和功能，这是有代价的，无论是在运行时（尽管它可以轻松胜过 R 和 Weka，例如！）内存使用，尤其是在代码复杂性方面。ELKI 是**为研究数据挖掘算法**而设计的，而不是为了让它们易于包含在任意应用程序中。相反，如果您遇到特定问题，您应该使用 ELKI 找出*哪种*方法效果好，然后*以针对您的问题优化的方式重新实现该方法*。

## 使用 ELKI 的最佳方法

以下是一些提示和技巧：

1.  使用 MiniGUI 构建命令行。请注意，在“GUI”的日志记录窗口中，它显示了相应的命令行参数 - 从命令行**运行 ELKI 很容易编写脚本**，并且可以轻松地分发到多台计算机，例如通过 Grid Engine。

    ```
    #!/bin/bash
    for k in $( seq 3 39 ); do
        java -jar elki.jar KDDCLIApplication \
            -dbc.in whatever \
            -algorithm clustering.kmeans.KMedoidsEM \
            -kmeans.k $k \
            -resulthandler ResultWriter -out.gzip \
            -out output/k-$k 
    done 
    ```

2.  使用索引。对于许多算法，索引结构可以产生巨大的影响！（但是你*需要*做一些研究哪些索引可以用于哪些算法！）

3.  考虑使用扩展点，例如`ResultWriter`. 挂接到此 API 可能是最简单的方法，然后用于`ResultUtil`选择要以**自己喜欢的格式输出**或分析的结果：

    ```
    List<Clustering<? extends Model>> clusterresults =
        ResultUtil.getClusteringResults(result); 
    ```

4.  要识别对象，请使用标签和`LabelList`关系。默认解析器会在它看到带有数字属性的文本时执行此操作，即文件，例如

    ```
    1.0 2.0 3.0 ObjectLabel1 
    ```

    将通过其标签轻松识别对象！

**更新：**请参阅[此帖子创建的 ELKI 教程](http://elki.dbs.ifi.lmu.de/wiki/HowTo/InvokingELKIFromJava)以获取更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T05:05:11.857

ELKI 的文档非常稀少（我不知道为什么它们在示例中没有包含一个简单的“hello world”程序）

你可以试试 Java-ML。它的文档对用户更加友好，并且确实具有 K-medoid。

Java-ML 的聚类示例 | [http://java-ml.sourceforge.net/content/clustering-basics](http://java-ml.sourceforge.net/content/clustering-basics)

K-medoid | [http://java-ml.sourceforge.net/api/0.1.7/](http://java-ml.sourceforge.net/api/0.1.7/)

# asp.net - 立即调用 C# 函数 在 fileupload 中选择文件

> ID：15326506
> 
> 赞同：15
> 
> 时间：2013-03-10T19:26:55.317
> 
> 标签：asp.net, file-upload

我有一个用于上传文件的网络表单（asp.net）。在当前情况下，如果用户从他们的计算机中选择一个文本文件，他们必须单击一个按钮才能将文本上传到一个框中。我正在尝试找到一种通过按下按钮来跳过该步骤的方法。

从用户中选择文件时如何调用C#函数？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-14T05:33:30.130

试试这个

```
 <asp:FileUpload ID="FileUpload01" ClientIDMode="Static" onchange="this.form.submit()"   runat="server"/> 
```

在 Page_load 事件后面的代码中

```
if (IsPostBack && FileUpload01.PostedFile != null)
{
   if (FileUpload01.PostedFile.FileName.Length > 0)
   {    
       FileUpload01.SaveAs(Server.MapPath("~/Images/") + FileUpload01.PostedFile.FileName);   
       imguser.ImageUrl = "~/Images/" + FileUpload01.PostedFile.FileName;
    }
 } 
```

# android - 如何使用 2 个字符串参数从 sqlite 返回字符串？

> ID：15326510
> 
> 赞同：0
> 
> 时间：2013-03-10T19:27:22.990
> 
> 标签：android, database, sqlite

这是我使用该字符串的代码

```
String item = item1.getText().toString();
        item = item.toLowerCase();
        String date = getDate();
        Datahelper edited = new Datahelper(this);
        edited.open();
            String returnedprice = edited.getprice(item,date);
        String returneddetail = edited.getdetail(item,date);
        edited.close();
            price.setText(returnedprice);
        details.setText(returneddetail); 
```

这是我在 sqlite 中的方法

```
public String getprice(String item ,String date) {
        // TODO Auto-generated method stub
         String[] columns = new String[]{KEY_ROWID, KEY_CATEGORY,KEY_DATE,KEY_PRICE,KEY_DETAILS};

         String whereClause = KEY_CATEGORY  + " = ? and " + KEY_DATE + " = ?";
         String[] whereArgs = {item,date};

         Cursor c = ourDatabase.query("DATABASE_TABLE", columns, whereClause, whereArgs, null, null, null);
            if(c!=null){
                String price = c.getString( c.getColumnIndex(KEY_PRICE));
            return price;
            }

        return null;

    }

    public String getdetail(String item, String date) {
        // TODO Auto-generated method stub

         String[] columns = new String[]{KEY_ROWID, KEY_CATEGORY,KEY_DATE,KEY_PRICE,KEY_DETAILS};

         String whereClause = KEY_CATEGORY  + " = ? and " + KEY_DATE + " = ?";
         String[] whereArgs = {item, date};

         Cursor c = ourDatabase.query("DATABASE_TABLE", columns, whereClause, whereArgs, null, null, null);
            if(c!=null){
                    String detail = c.getString( c.getColumnIndex(KEY_DETAILS));
                return detail;
                }

        return null;
    } 
```

使用此代码时，我的应用程序崩溃了，如果有人需要，我不知道代码中有什么问题，我可以发布整个代码，请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:26:07.900

正确的代码是 -

```
public String getprice(String item ,String date) {
    // TODO Auto-generated method stub
     String[] columns = new String[]{KEY_ROWID, KEY_CATEGORY,KEY_DATE,KEY_PRICE,KEY_DETAILS};

     String whereClause = KEY_CATEGORY  + " = ? and " + KEY_DATE + " = ?";
     String[] whereArgs = {item,date};

     Cursor c = ourDatabase.query("DATABASE_TABLE", columns, whereClause, whereArgs, null, null, null);
        if(c!=null){
           c.moveToFirst();
            String price = c.getString( c.getColumnIndex(KEY_PRICE));
        return price;
        }

    return null;

}

public String getdetail(String item, String date) {
    // TODO Auto-generated method stub

     String[] columns = new String[]{KEY_ROWID, KEY_CATEGORY,KEY_DATE,KEY_PRICE,KEY_DETAILS};

     String whereClause = KEY_CATEGORY  + " = ? and " + KEY_DATE + " = ?";
     String[] whereArgs = {item, date};

     Cursor c = ourDatabase.query("DATABASE_TABLE", columns, whereClause, whereArgs, null, null, null);
        if(c!=null){
   c.moveToFirst();
    String detail = c.getString( c.getColumnIndex(KEY_DETAILS));
            return detail;
            }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:34:31.423

列索引与返回的集合没有任何共同之处：

```
String price = c.getString( c.getColumnIndex(KEY_PRICE)); 
```

因为`c`您只有 5 列（0 到 4）（`String[] columns = new String[]{KEY_ROWID, KEY_CATEGORY,KEY_DATE,KEY_PRICE,KEY_DETAILS};`）并`c.getColumnIndex(KEY_PRICE)`返回表中可能高于 4 的实际索引。

代替

```
String price = c.getString( c.getColumnIndex(KEY_PRICE)); 
```

尝试

```
String price = c.getString(3); 
```

# android - 如何为 MenuItem 设置标签？

> ID：15326511
> 
> 赞同：13
> 
> 时间：2013-03-10T19:27:29.263
> 
> 标签：android, menuitem

我正在 android 中构建一个弹出菜单，我需要在每个菜单项中存储一些 ID。ID 是字符串，因此如果我可以为 MenuItem 设置一个字符串数组，那就太好了。

问题是 MenuItem 没有 setTag 方法。

我还能如何附加一些数据呢？

编辑：Geobits 提到 getActionView();

不幸的是它返回null。

但是，是否可以节省执行以下操作？

```
 View view = new View(getActivity());
 view.setTag(tag);
 menuItem.setActionView(view); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-10T19:40:29.020

每个`MenuItem`都有一个关联`View`的称为 ActionView。如果您使用的是自定义 ActionView，则可以使用 获取它[`MenuItem.getActionView()`](http://developer.android.com/reference/android/view/MenuItem.html#getActionView%28%29)，并设置/检索其上的标签。

例如，要设置标签：

```
public void setMenuItemTag(MenuItem item, Object tag)
{
    View actionView = item.getActionView();
    actionView.setTag(tag);
} 
```

**编辑**

如果您不使用自定义 ActionView，则可以使用 HashMap 来存储标签。使用 MenuItem 作为键。

```
public void setMenuItemTag(MenuItem item, Object tag)
{
    myMap.put(item, tag);
}

// returns null if tag has not been set(or was set to null)
public Object getMenuItemTag(MenuItem item, Object tag)
{
    return myMap.get(item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-07T08:50:15.800

不使用自定义视图时设置标签的黑客方法。这个想法很简单，创建实际视图后，我们尝试通过它的文本和图标找到它

```
private void addButtonToMenu(Toolbar toolbar, Menu menu, String title, Drawable icon, String testId) {
    MenuItem menuItem = menu.add(title);
    if (icon != null){
        menuItem.setIcon(icon);
    }
    setTestId(toolbar, title, icon, testId);
}

private void setTestId(Toolbar toolbar, String title, Drawable icon, String testId) {
    UiUtils.runOnPreDrawOnce(toolbar, () -> {
        ActionMenuView buttonsLayout = ViewUtils.findChildByClass(toolbar, ActionMenuView.class);
        List<TextView> buttons = ViewUtils.findChildrenByClass(buttonsLayout, TextView.class);
        for (TextView view : buttons) {
            if (!TextUtils.isEmpty(title) && title.equals(view.getText())) {
                view.setTag(testId);
            } else if (icon != null && ArraryUtils.containes(view.getCompoundDrawables(), icon)) {
                view.setTag(testId);
            }
        }
    });
}

// Helper functions

public class UiUtils {

    public static void runOnPreDrawOnce(final View view, final Runnable task) {
        view.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
            @Override
            public boolean onPreDraw() {
                view.getViewTreeObserver().removeOnPreDrawListener(this);
                task.run();
                return true;
            }
        });
    }
}

public class ArrayUtils {
    public static boolean contains(Object[] array, Object item) {
        if (isNullOrEmpty(array)) return false;
        for (Object o : array) {
            if (o == item) return true;
        }
        return false;
    }

    private static boolean isNullOrEmpty(Object[] array) {
        return array == null || array.length == 0;
    }
}

public class ViewUtils {
    @Nullable
    public static <T> T findChildByClass(ViewGroup root, Class clazz) {
        for (int i = 0; i < root.getChildCount(); i++) {
            View view = root.getChildAt(i);
            if (clazz.isAssignableFrom(view.getClass())) {
                return (T) view;
            }

            if (view instanceof ViewGroup) {
                view = findChildByClass((ViewGroup) view, clazz);
                if (view != null && clazz.isAssignableFrom(view.getClass())) {
                    return (T) view;
                }
            }
        }
        return null;
    }

    public static <T> List<T> findChildrenByClass(ViewGroup root, Class clazz) {
        List<T> ret = new ArrayList<>();
        for (int i = 0; i < root.getChildCount(); i++) {
            View view = root.getChildAt(i);
            if (clazz.isAssignableFrom(view.getClass())) {
                ret.add((T) view);
            }
        }
        return ret;
    }
} 
```

# c++ - 索引超出范围 C++/Qt

> ID：15326515
> 
> 赞同：-8
> 
> 时间：2013-03-10T19:28:03.273
> 
> 标签：c++, qt

QList::operator[] 中的 ASSERT 失败：“索引超出范围”，为什么？

> ```
> QList<int>    tanksLevel;
> ......
> for(int i=0; i < 6; i++)
>    tanksLevel[i] = rand() %51; 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:34:10.543

这意味着`i >= tanksLevel.size()`。检查那个。您可能想先用正确的大小初始化您的列表，或者使用`QList::append`而不是`operator[]`.

# compilation - code::blocks 链接不适用于 lib 文件

> ID：15326516
> 
> 赞同：0
> 
> 时间：2013-03-10T19:28:08.323
> 
> 标签：compilation, linker, static-libraries, codeblocks, static-linking

我刚刚有了一个全新版本的 Code::Blocks(12.11) 并尝试制作一个 glut 示例项目，但生成的代码存在一些链接问题。

minGW 设置设置为正确的值，因为我成功链接了从 *.a 文件编译的 glfw 项目。我的问题是链接器由于某种原因无法处理 .lib 文件。尽管链接了正确的库，但我总是得到未定义的参考错误。

我只是不知道该怎么做/链接...

* * *

**如何在新的 Code::blocks 中链接 *.lib 文件？
如果我不能，是否有任何格式为 *.a 的 glut 二进制文件，或者我应该自己构建它？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:23:30.547

最后我找到[了这个](http://mycodelog.com/2010/05/15/gllibs/)链接，使用了这个包，并对项目进行了干净的构建（重建），而不是构建。奇迹般有效！

# ios - CSS边框半径不适用于iOS

> ID：15326517
> 
> 赞同：10
> 
> 时间：2013-03-10T19:28:09.013
> 
> 标签：ios, safari, css

我在 iOS (safari) 上的边框有一些问题。

我有一张图片（我的头像），我想给它一个圆形边框，它是 10px 纯白色。

为了实现这一点，我有 HTML

```
<img src="http://2.gravatar.com/avatar/b7c2d49748426791dc98b8214dfac9d1?s=500" class="img-circle" height="300" width="300"> 
```

和 CSS

```
.img-circle {
-webkit-border-radius: 500px;
-moz-border-radius: 500px;
border-radius: 500px;
border: solid 10px white;
} 
```

JSFiddle [http://jsfiddle.net/2UT8v/2/](http://jsfiddle.net/2UT8v/2/)

我正在使用 twitter 的引导程序，因此边框半径由他们的类 .img-circle 指定（这就是半径为 500px 的原因），然后我添加了边框粗细和颜色。

这在桌面浏览器（Chrome）上运行良好，但在 iOS（我的 iPad 上的 safari）上查看时，它显示 10px 纯白色边框仍然是原始图像周围的正方形，并且在之后应用半径，因此切断了一些边框.

![Chrome中的边框](../Images/487c5ceecc30e3b9d2bcb928c8256674.png)![iOS中的边框](../Images/4301751e02a0573fd570e5516233e6d1.png)

有谁知道我如何让边界跟随 iOS 中的半径？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-10T21:06:23.250

快速而肮脏的解决方案：http: [//jsfiddle.net/mEZEj/](http://jsfiddle.net/mEZEj/)使用`box-shadow`而不是`border`.

干净的解决方案：http: [//jsfiddle.net/TjUum/](http://jsfiddle.net/TjUum/)使用带有头像的块`div`元素作为`background-image`. 根据需要进行调整。

# git - Jenkins GIT部署后如何设置权限

> ID：15326520
> 
> 赞同：0
> 
> 时间：2013-03-10T19:28:20.890
> 
> 标签：git, deployment, jenkins, centos, jenkins-plugins

我正在使用 Jenkins 中的 GIT 插件将一些网站部署到我的 CentOS 服务器。这非常适合开箱即用。我唯一缺少的是我想在部署后将某些文件夹（如上传文件夹）的权限设置为其他内容。

最好的方法是什么？我曾在其他项目中使用过 phing，它与自定义 shell 脚本配合得很好。但是，我想避免使用 phing 来设置我的文件夹的权限。如果可能的话，我想在 GIT 工作本身中做到这一点，但我不确定 jenkins 是否可行。

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:44:15.713

我认为 Git 不会“记住”权限——用户、组等在安装它的不同机器上会有所不同。你有从 Jenkins 到服务器的 SSH 还是 Jenkins 在服务器上运行？如果是这种情况，您可以发出一些（远程）bash chmod 命令。

# vim - 配置 vim 时遇到问题 --with-features=huge

> ID：15326521
> 
> 赞同：2
> 
> 时间：2013-03-10T19:28:31.103
> 
> 标签：vim

我使用 mercurial 克隆了 vim 源，并运行了以下命令：

```
make distclean
./configure --with-features=huge
make 
sudo make install 
```

所有这些命令的输出似乎都很正常。然而，我的 vim --version 的输出缺少应该在`./configure`(`xterm_clipboard`例如) 时启用的功能。我该如何诊断这个问题？我的目标是启用`netbeans_intg`.

```
VIM - Vi IMproved 7.2 (2008 Aug 9, compiled Mar 23 2010 12:50:41)
Included patches: 1-315
Modified by <bugzilla@redhat.com>
Compiled by <bugzilla@redhat.com>
Huge version without GUI.  Features included (+) or not (-):
+arabic +autocmd -balloon_eval -browse ++builtin_terms +byte_offset +cindent
-clientserver -clipboard +cmdline_compl +cmdline_hist +cmdline_info +comments
+cryptv +cscope +cursorshape +dialog_con +diff +digraphs -dnd -ebcdic
+emacs_tags +eval +ex_extra +extra_search +farsi +file_in_path +find_in_path
+float +folding -footer +fork() +gettext -hangul_input +iconv +insert_expand
+jumplist +keymap +langmap +libcall +linebreak +lispindent +listcmds +localmap
+menu +mksession +modify_fname +mouse -mouseshape +mouse_dec +mouse_gpm
-mouse_jsbterm +mouse_netterm -mouse_sysmouse +mouse_xterm +multi_byte
+multi_lang -mzscheme -netbeans_intg -osfiletype +path_extra +perl +postscript
+printer +profile +python +quickfix +reltime +rightleft +ruby +scrollbind
+signs +smartindent -sniff +startuptime +statusline -sun_workshop +syntax
+tag_binary +tag_old_static -tag_any_white -tcl +terminfo +termresponse
+textobjects +title -toolbar +user_commands +vertsplit +virtualedit +visual
+visualextra +viminfo +vreplace +wildignore +wildmenu +windows +writebackup
-X11 -xfontset -xim -xsmp -xterm_clipboard -xterm_save
   system vimrc file: "/etc/vimrc"
     user vimrc file: "$HOME/.vimrc"
      user exrc file: "$HOME/.exrc"
  fall-back for $VIM: "/etc"
 f-b for $VIMRUNTIME: "/usr/share/vim/vim72"
Compilation: gcc -c -I. -Iproto -DHAVE_CONFIG_H     -O2 -g -pipe -Wall  -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64  -D_FORTIFY_SOURCE=1    -D_REENTRANT -D_GNU_SOURCE   -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -I/usr/include/gdbm  -I/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE  -I/usr/local/include/python2.6 -pthread  -I/opt/local/ruby-1.8.7/lib/ruby/1.8/x86_64-linux
Linking: gcc   -L.  -rdynamic -Wl,-export-dynamic  -Wl,-E -Wl,-rpath,/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE   -L/usr/local/lib -o vim       -lselinux  -lncurses -lacl -lgpm   -Wl,-E -Wl,-rpath,/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE  /usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/auto/DynaLoader/DynaLoader.a -L/usr/lib64/perl5/5.8.8/x86_64-linux-thread-multi/CORE -lperl -lresolv -lutil -lc -L/usr/local/lib/python2.6/config -lpython2.6 -lutil -Xlinker -export-dynamic  -lruby-static -lm 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T20:08:43.420

你确定你正在运行你构建的vim，而不是你系统上已经存在的另一个vim？在任何情况下，该 vim 都没有构建任何 GUI (X11) 支持，正如您`Huge version without GUI`在日志中看到的那样。

包括`huge`不会让您获得所有功能；它只会让你得到很多。如果需要 X11 和`xterm_clipboard`，请确保指定 X11 构建选项。对于基于 GTK 的系统，您可以执行以下操作：

```
./configure --with-features=huge --enable-gui=gtk2 
```

这将为您提供大部分 X11/图形功能。如果您不使用 GTK2，则必须指定其他内容；查看`./configure --help`功能列表。

您需要安装各种 GTK/X11（或您使用的任何 GUI）开发库才能使用 GUI 支持进行构建。它可能正在尝试使用 X11 支持进行构建，但您没有正确的库。检查您的`configure`输出是否有错误。

正如其他人所建议的那样，您的操作系统可能具有您需要的所有功能的预构建二进制文件，但我发现我最终总是不得不为一件事或另一件事编译它，所以值得弄清楚。如果您提供有关您正在运行的操作系统的更多信息（如果是 OSX，它是哪个补充包系统），那么有人可能会提出特定于操作系统的二进制包建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T19:48:39.077

当您没有在*大型*构建中启用某些功能时，这可能是由于缺少依赖项。该`configure`脚本会运行大量检测，并`...-devel`在缺少相应的库或包时跳过某些功能。安装这些最简单的方法是通过

```
$ sudo apt-get build-dep vim-gnome # Debian-based
$ sudo yum-builddep vim-gnome # Redhat 
```

对于 Netbeans 集成，romainl 的评论可能是正确的，即仅在 GVIM 中可用（但也应该通过您的调用来构建）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T20:15:23.243

`How can I diagnose this problem?`

这样做的方法是*手动* 回顾`./configure`输出，看看它找不到什么东西。要做到这一点，并且由于输出不是真正“用户友好”，您必须向后滚动并扫描输出以查找以“no”结尾的行，例如：

```
checking if X11 header files can be found... no 
```

^ 这将向您发出信号，您需要安装某种 X11 开发包等。

也许您需要 GUI 支持来启用 netbeans？我在该部分中看到了“无 GUI”`Huge version without GUI`部分。

手动执行此操作最初需要一些努力和试错。因为要真正让它在 GUI 支持中编译，你必须安装一堆不同的包来获得所有正确的开发头文件（至少根据我的个人经验！）。所以就像人们说的那样，尝试搜索并安装 X11 开发包和 gtk2-devel 包^^

（我想有一次我很沮丧

# javascript - 如何使用 javascript 正确防止恶意输入？

> ID：15326523
> 
> 赞同：0
> 
> 时间：2013-03-10T19:29:13.773
> 
> 标签：javascript, node.js

我有一个使用 node.js 构建的聊天客户端，我想知道在将消息发送到服务器之前应该如何输入消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:31:26.467

没有什么。你不能阻止客户发送“坏”的东西。验证和清理应该在服务器上完成。在将其显示给客户端时，您应该对其进行清理/过滤/编码。

也许（客户端）：

```
socket.on('message', function(e) {
  txt = e.data;

  // HTML encode
  txt = txt.replace(/&/g, '&amp;');
  txt = txt.replace(/</g, '&lt;');
  txt = txt.replace(/>/g, '&gt;');

  // Or strip tags
  txt = txt.replace(/<[^>]+>/g, '');

  // Or create a text node
  node = document.createTextNode(txt);
}); 
```

[您应该阅读有关 HTML 编码/转义的内容。](http://benv.ca/2012/10/4/you-are-probably-misusing-DOM-text-methods/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:31:03.520

*在将其发送到服务器之前*，您实际上不需要做任何事情，就过滤而言..您应该在服务器端进行过滤/验证。如果你这样做了，客户端的人可以很容易地回避它。

# forms - Symfony 2 中一个属性实体的一组字段

> ID：15326526
> 
> 赞同：3
> 
> 时间：2013-03-10T19:29:31.897
> 
> 标签：forms, symfony

我的`Product`实体具有以下结构：

```
private $id;

private $title;

/**
 * @ManyToOne(targetEntity="Category")
 * @JoinColumn(name="cat_id", referencedColumnName="id")
 */
private $category; 
```

`Category`有嵌套结构。每一层嵌套都显示在 5 个单独的字段中：

![在此处输入图像描述](../Images/398ad79ef25928a5552a25e031b4e80e.png)

在类表单代码中，我是这样解决的：

```
$builder
->add('cat_1', 'entity', array(
    ...
    'query_builder' => function() { return someSelectLogic1(); }
))
->add('cat_2', 'entity', array(
    ...
    'query_builder' => function() { return someSelectLogic2(); }
))
->add('cat_3', 'entity', array(
    ...
    'query_builder' => function() { return someSelectLogic3(); }
))
->add('cat_4', 'entity', array(
    ...
    'query_builder' => function() { return someSelectLogic4(); }
))
->add('cat_5', 'entity', array(
    ...
    'query_builder' => function() { return someSelectLogic5(); }
)) 
```

现在我需要知道最后一回合填充了哪个字段，并在实体属性中传递该字段的值。

在所有我不喜欢的地方：

*   确定最后填写哪个类别的字段的复杂逻辑

*   这些字段中的每一个都不与实体绑定`'mapped' => false`

1）**组织我的表单代码的正确方法是什么？**

2）**有没有办法将这些字段放入一个单独的类中，该类将处理确定最终选择哪个类别的逻辑？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T01:43:09.180

我建议如下：

**1）创建一个新的自定义表单字段类型并将所有这些都`entity`放在那里。**

这个过程与普通的表单类型创建没有太大区别。只需将这些字段包含在它自己的字段中，`buildForm()`这应该可以解决问题。[文档](http://symfony.com/doc/master/cookbook/form/create_custom_field_type.html)。

**2）用属性“ => ”标记所有这些`entity`字段。`property_path``false`**

显然，您不会将这些值存储在模型中。

**3) 添加另外两个字段：`chosen`和`lastOne`。**

现在，这可能很棘手：我要么设置`chosen`为`text`类型（基本上是泛型类型），要么也使用`entity`。如果你去，`entity`你需要包括**所有实体字段**的所有可能答案。至于`lastOne`设置它，`text`因为它将反映最后选择的字段（按名称）。

无论哪种方式，这两个字段都是不可见的。不要忘记设置为`property_path`字段。`false``lastOne`

**4）最后，添加`ValueTransformer`（[docs](http://symfony.com/doc/master/cookbook/form/data_transformers.html)）它将包含“查看”最后选择哪个字段的逻辑。**

*现在，我只处理过一次并且还不太了解它，所以你最好的选择是使用官方文档中的示例进行反复试验，不幸*的是。

基本上你应该做的是在 value-transformer 中读取 field 的值`lastOne`。这将为您提供最后选择的字段的名称。然后，使用该值，读取实际选择的最后一个值。最后，将该值（对象，如果您选择`entity`类型，否则为 ID）设置为`chosen`字段。

那基本上应该做的事情。

至于 JS，我不知道你是否使用任何框架，但我会假设 jQuery。您需要将`lastOne`字段设置为表单中的选择项。

```
$(function(){
    $('#myform').find('select').on('change', function(){
        var $this = $(this);
        $this.closest('form').find('#__ID_OF_YOUR_LASTONE_FIELD').val($this.attr('name'));
    });
}); 
```

很抱歉，我现在无法为您提供代码示例`PHP`。这里有点晚了，明天会尽力进一步更新这个答案。

# dynamic - 动态规划——任务调度

> ID：15326527
> 
> 赞同：1
> 
> 时间：2013-03-10T19:29:36.577
> 
> 标签：dynamic, task, scheduling, lazy-evaluation

这是一个在我大学课堂上的“快速测试”中没有人能够正确回答的问题：

**我们得到：**

int N < 1000 个时间槽

int[] C: -10 000 <= C[i] <= 10 000 对应每个槽的支付

int T：我们必须使用的插槽数

**问题表述如下：**

一个懒惰的工人在整个工作日中有 N 个时间段。

对于每个时间段，他都会获得一定的报酬（C[i] - 不切实际地，它也可能是负数）。

他想选择正好 T 个时隙的区间，这样他就能得到最大的报酬。我们必须选择他将工作的间隔。例如 [1, 4] - 从第一个插槽到第四个。

问题是，他每次休息，回来上班，他工作的第一个时段是不会发工资的，因为他又开始习惯工作了，就像一个懒人一样。因此，我们也可以选择像 [5, 5] 这样的空区间，如果我们有负支付，这可能会派上用场。无论事先与插槽关联什么付款，这些都将获得付款 0。

**为了更清楚，我将举一个简单的例子：**

假设我们有 N=5 个时隙，我们想选择 T=4。C={3, 9, 1, 1, 7}

最好的解决方案是区间 [1, 2]；[4, 5] 总共支付 9+7=16

我们一共覆盖了 T=4 个时隙，解是有效的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T10:56:55.807

我第一次尝试解决这个问题，但可能会有更快的速度。令 f(i, j, t) 表示在子数组 N[i, j]（包括 i 和 j）内拟合 t 个点的最佳方法，这样 N[i] 被覆盖，N[j] 被覆盖。现在注意 f(i, j, t) = max { f(i, j-1, t-1) + C[j], max_{1 < k < j - i} f(i, jk, t- 1）}。基本情况是 f(i, j, t) = 0 if (j - i + 1 < t), f(i, i, 1) = 0, f(i, j, 1) = inf 和 f( i, j, 2) = C[i] + C[j]。我认为复杂度是 O(N^3 * T)，因为表 f 的大小为 N^2 * T，在 f 内部，我们需要取 (k < j - i) 的最大值来获得 N 的附加因子在我们的复杂性中。因此 O(N^3 * T)。希望我没有忽略问题中的某些内容。

为了从表 f 中找到解决方案，只需执行 max_{i,j} f(i, j, T)。

# magento - Magento + PayPal 沙盒

> ID：15326532
> 
> 赞同：0
> 
> 时间：2013-03-10T19:29:52.973
> 
> 标签：magento, paypal-sandbox

所以，最近 PayPal 从 sandbox.paypal 切换到 developer.paypal 界面。它仍处于测试模式，因此无法完美运行，另一方面，沙盒实际上已被禁用，您无法使用旧凭据注册或登录。

因此，当尝试在 Magento 中制作测试系统时，我在新的 developer.paypal 界面中创建了一个卖家帐户和一个买家帐户，但是当我尝试进行购买时，它一直显示错误的登录/通过错误（我输入卖家帐户电子邮件和密码）。

在这之前，我记得我必须使用我的主沙箱帐户登录 sandbox.paypal 才能正常工作，但现在无法再登录到沙箱，并且登录到开发人员也无济于事。

有人有类似的问题吗？我试图在任何地方找到解决方案的任何线索，但没有运气，而且我不等待 PayPal 完成他们的测试环境是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T15:28:02.820

我没有遇到同样的问题，但是您是否导入了旧帐户？这样您就可以使用与以前相同的测试电子邮件地址和密码。

*   登录[https://developer.paypal.com](https://developer.paypal.com)
*   单击应用程序
*   单击沙盒帐户
*   点击“导入数据”
*   输入旧开发者帐户的电子邮件地址和密码。

还应导入先前帐户的所有设置。Sandbox.paypal.com 仍然可以访问，您需要登录到您的开发者帐户才能访问它，这与以前的条件相同。

如果您继续收到密码错误，请尝试按照以下步骤重置帐户的密码：

*   登录[https://developer.paypal.com](https://developer.paypal.com)
*   单击应用程序
*   单击沙盒帐户
*   展开相关帐户
*   点击“个人资料”
*   点击“更改密码”

最后，您还需要在使用 beta 环境之前删除所有 developer.paypal.com cookie 和缓存。如果不这样做，您将看到以下错误消息：

“此沙盒电子邮件地址不可用。请输入另一个电子邮件地址。”

如果您继续收到错误，请告诉我。

# swt - 使用带有 swtbot 测试的键盘

> ID：15326536
> 
> 赞同：2
> 
> 时间：2013-03-10T19:30:16.607
> 
> 标签：swt, eclipse-rcp, swtbot

我正在尝试运行使用键盘快捷键的 SWTbot 测试用例。我找不到任何关于如何做到这一点的参考。

我很确定这不应该那么困难。如果有人可以写一个小片段，我将不胜感激。

谢谢，

齐夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T14:00:33.720

使用方法怎么样`pressShortcut()`？

对于树项：

```
final SWTBotTreeItem item = ...
item.select().pressShortcut(SWT.CTRL, 'F'); 
```

对于表项：

```
final SWTBotTableItem item = ...
item.select().pressShortcut(SWT.CTRL, 'F'); 
```

对于 Eclipse 编辑器

```
((SWTBotEclipseEditor)bot.activeEditor()).pressShortcut(SWT.CTRL, '1') 
```

从活动外壳：

```
 bot.activeShell().pressShortcut(
        Keystrokes.CTRL, KeyStroke.getInstance("1")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T08:53:25.117

对于多个修饰键，您可以使用

```
item.select().pressShortcut(SWT.CTRL | SWT.ALT, 'F'); 
```

# python - python脚本创建fdf

> ID：15326541
> 
> 赞同：1
> 
> 时间：2013-03-10T19:30:39.730
> 
> 标签：python, string, fdf

我正在编写一个 python 脚本来创建一个 fdf 文件。fdf 文件的前 2 行需要以下内容：

```
%FDF-1.2
%‚„œ” 
```

如何将这两行中所需的符号写为字符串？当我创建一个新行时，（例如`line_1 = "%FDF-1.2"`）我得到一个错误，因为 % 符号。我需要 python 将其作为文本而不是命令符号来读取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:34:35.880

'%' 必须转义为 '%%'。否则，它充当字符串插值的占位符。

有关的：

*   [如何选择性地转义 Python 字符串中的百分比 (%)？](https://stackoverflow.com/questions/10678229/selectively-escape-percent-in-python)

*   [百分比符号不起作用](https://stackoverflow.com/questions/8976535/percentage-sign-not-working)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:08:28.340

使用原始字符串表示法

```
>>> a = r'%test'
>>> print a
%test 
```

# android - 以编程方式在 Android 上发送短信

> ID：15326542
> 
> 赞同：1
> 
> 时间：2013-03-10T19:30:41.930
> 
> 标签：android, sms

我在 android SDK 中使用“sendTextMessage”以编程方式发送消息。但是发送的消息没有显示在发件箱中。

```
public void sendSMS() {
    String phoneNumber = "0123456789";
    String message = "Hello World!";

    SmsManager smsManager = SmsManager.getDefault();
    smsManager.sendTextMessage(phoneNumber, null, message, null, null);
} 
```

是否有任何其他标志可以将消息添加到发件箱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:42:52.240

“发件箱”的概念取决于 SMS 应用程序。您不能以编程方式将 SMS 添加到设备上 SMS 应用程序的发件箱中（可能有多个）。如果您希望 SMS 在用户默认 SMS 应用程序中显示，则使用意图`ACTION_SEND`发送 SMS

有目的的代码

```
Uri uri = Uri.parse("smsto:xxxxxxx");   
Intent intent = new Intent(Intent.ACTION_SENDTO, uri);   
it.putExtra("sms_body", "THE SMS BODY");   
startActivity(intent); 
```

简而言之，如果您想使用`SMSManager`它以编程方式发送它，它不会显示在发件箱中。为此使用意图。

# ios - 将 UIBarButtonItem 添加到 UIViewController 推送到 UINavigation 控制器

> ID：15326544
> 
> 赞同：2
> 
> 时间：2013-03-10T19:30:57.577
> 
> 标签：ios, uinavigationcontroller, uibarbuttonitem, uitoolbar, uinavigationitem

我正在尝试将 UIViewController 推送到导航控制器上，然后将 UIBarButtonItem 添加到导航栏，以便我可以使用它来显示倒计时计时器。

```
UINavigationController *navController = [[Session sharedInstance] getNavigationController];
GamePlayViewController *gameController = [[GamePlayViewController alloc] initWithNibName:@"GamePlayViewController" bundle:nil ];

UIBarButtonItem *timerBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

gameController.navigationItem.rightBarButtonItems = [NSArray arrayWithObjects:timerBtn, nil];

[navController pushViewController:gameController animated:YES]; 
```

当我使用上面的代码时，它不起作用。我也尝试从控制器本身的 ViewDidload 方法中执行此操作，但没有骰子。我什至尝试使用 rightBarButtonItem 但收到错误说明

```
 "to uncaught exception 'NSInvalidArgumentException', reason: 'Fixed and flexible space   items not allowed as individual navigation bar button item. Please use the leftBarButtonItems (that's plural) property.'
*** First throw call stack:"

UIBarButtonItem *timerBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

self.navigationItem.rightBarButtonItem = timerBtn; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:23:28.247

如果你去 IB 并尝试添加一个灵活空间或固定空间，你会看到这 2 个对象的详细信息，说明这两个对象只能添加到正在添加到 UIToolBar 的 UIBarButtonItem，而不能添加到导航酒吧！

因此，我建议您将代码更改为以下内容：

```
UIBarButtonItem *timerBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonItemStylePlain target:nil action:nil]; 
```

# php - PHP 从值列表中提取单个字符串

> ID：15326545
> 
> 赞同：0
> 
> 时间：2013-03-10T19:31:00.260
> 
> 标签：php, string, str-replace

我需要一些关于 php 的帮助。在过去的几天里，我一直在尝试几件事，包括 str_replace 无济于事。

我有一个可能包含 1 到 20 个值的字段，所有值都列在自己的行上，该字段中没有 html 代码来分隔它们，并且某些值之间可能有自己的空格，因此按空格分隔不起作用.

我需要的是提取每一行的每一个字符串并将其转换为代码。

```
 <p>For example, my field with values looks like this: </p>
<p><b>lang_fld </b><br>
    ------
    <br>
    English<br>
    Spanish<br>
    German<br>
        French</p> 
```

我的想法是提取每一行，例如。来自该字符串的“English”，并创建一行代码，例如

```
<img src="images/flags/english.png> English 
```

基本上我想将标志图形添加到单词

我已经试过了

```
echo str_replace('English','&lt;img src="images/flags/english.png&gt;,lang_fld)<br>
...and so on 
```

在经历了每一个可能的值之后，我得到的是一堆错误消息（每次都不同，因为我一直在做改变——通过猜测）

有人可以提供更简单的选择吗？并非所有 20 个值都在该区域文本字段中，有些可能只包含一种语言，有些可能包含 10 种语言，有些则全部 20 种，等等。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:13:22.533

假设您将所有值放在单独的行上，您可以`explode()`对字符串执行操作以将其转换为单独项目的数组，然后遍历数组`foreach`并使用单个项目执行任何修改。完成这些项目并希望将它们重新组合在一起后，可以使用`implode()`将它们组合成一个字符串。

一个简短的示例（您当然可以使用`for`循环，我只是更喜欢`foreach`这里，因为它可以更好地向您展示数据正在发生的事情）：

```
$text =
"French language
Italian language
English language";

$items = explode( "\n", $text ); // Split by newline ( you can also use "<br>" as separator )

$result = array(); // Modified data will be placed here

foreach ( $items as $item )
{
    // Do something with $item
    $item = "<img src=\"images/flags/$item.png\"> $item";
    $result[] = $item;
}

// Merge them back together
$text = implode("\n", $result); 
```

# javascript - Google Maps Api - 路线服务不适用于某些起点和目的地

> ID：15326550
> 
> 赞同：0
> 
> 时间：2013-03-10T19:31:35.767
> 
> 标签：javascript, google-maps, google-maps-api-3

当我尝试使用方向服务显示某些起点和终点的路线时（例如，起点：Burjuman 购物中心 - Bur 迪拜 - 迪拜 - 阿拉伯联合酋长国，目的地：Karama - 迪拜 - 阿拉伯联合酋长国），我收到“NOT_FOUND”错误但同样适用于 maps.google.com。

是否有任何特定原因使其在 maps.google.com 中而不是在 Google Maps API 中工作。

提前致谢。

问候，

迪帕克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:05:13.770

> 是否有任何具体原因为什么它在 maps.google.com 而不是在 Google Maps API 中工作。

[看起来它在Google 地图](https://maps.google.com/maps?saddr=Burjuman+Shopping+Centre+-+Bur+Dubai+-+Dubai+-+United+Arab+Emirates&daddr=Karama+-+Dubai+-+United+Arab+Emirates&hl=en&sll=25.251863,55.30152&sspn=0.092999,0.110378&geocode=FRdQgQEdkNVLAyG2cSXNBAYtUClXe6nnakNfPjG2cSXNBAYtUA%3BFdwogQEdxNNLAynlHDm_10JfPjHdJS1wvlksyQ&mra=ls&t=m&z=15)中并不适用

“Burjuman 购物中心 - Bur Dubai - 迪拜 - 阿拉伯联合酋长国”无法进行地理编码，Google 地图正在返回 BurJuman 中心和 Al Karama - 迪拜之间的路线。

如果我使用“Burjuman Centre” [，它对我有用](http://www.geocodezip.com/v3_example_geo2.asp?addr1=Burjuman%20Centre,%20Bur%20Dubai,%20Dubai,%20United%20Arab%20Emirates&geocode=1&addr2=Karama,+Dubai,+United+Arab+Emirates&geocode=2)

FAQ中的这个[条目也是相关的](https://developers.google.com/maps/faq#geocoder_differences)

# ios - 带有客户端证书的 SecTrustSetAnchorCertificates

> ID：15326553
> 
> 赞同：3
> 
> 时间：2013-03-10T19:31:45.800
> 
> 标签：ios, ssl, x509, pki, ca

我正在开发 iOS 应用程序。我们有带有自签名 ca-cert 的自定义证书颁发机构。证书颁发机构也为用户和 https 服务器颁发证书。我想创建一个 iOS 应用程序，它可以使用 ca 证书对 https 服务器进行身份验证，也可以使用客户端证书与 https 服务器通信。我已经有了使用客户端证书与 https 服务器通信的代码，但我需要将 ca-certificate 导入系统密钥环。我想将 ca 证书硬编码到应用程序中。我的代码如下所示：

```
- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {

    bool result=NO;
    if ([protectionSpace authenticationMethod] == NSURLAuthenticationMethodServerTrust) {
        result= YES;
    } else if([protectionSpace authenticationMethod] ==     NSURLAuthenticationMethodClientCertificate) {
        result = YES;
    }
    return result;
}

- (BOOL)shouldTrustProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
    CFDataRef certDataRef = (__bridge_retained CFDataRef)self.rootCertData;
    SecCertificateRef cert = SecCertificateCreateWithData(NULL, certDataRef);

    SecTrustRef serverTrust = protectionSpace.serverTrust;

    CFArrayRef certArrayRef = CFArrayCreate(NULL, (void *)&cert, 1, NULL);
    SecTrustSetAnchorCertificates(serverTrust, certArrayRef);

    SecTrustResultType trustResult;
    SecTrustEvaluate(serverTrust, &trustResult);

    return  trustResult == kSecTrustResultUnspecified;
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {

    NSLog(@"Did receive auth challange %@",[challenge debugDescription]);

    NSURLProtectionSpace *protectionSpace = [challenge protectionSpace];

    NSString *authMethod = [protectionSpace authenticationMethod];
    if(authMethod == NSURLAuthenticationMethodServerTrust ) {
        NSLog(@"Verifying The Trust");

        NSURLCredential* cred=[NSURLCredential credentialForTrust:[protectionSpace serverTrust]];
        if ([self shouldTrustProtectionSpace:challenge.protectionSpace]) {
            [[challenge sender] useCredential:cred forAuthenticationChallenge:challenge];
            NSLog(@"OK");
        } else {
            NSLog(@"FAILED");
            [challenge.sender performDefaultHandlingForAuthenticationChallenge:challenge];
        }

    }
    if(authMethod == NSURLAuthenticationMethodClientCertificate ) {
        NSLog(@"Trying Certificate");
        ..... 
```

一切都像一个魅力，直到服务器不需要客户端证书。此时我会收到错误此服务器的证书无效并且执行永远不会到达点

```
 NSLog(@"Trying Certificate"); 
```

当我将 .der ca-cert 加载到系统密钥环中时，一切正常，甚至客户端证书也被发送到服务器，服务器可以识别用户。我认为

```
SecTrustSetAnchorCertificates(serverTrust, certArrayRef); 
```

以某种方式影响信任，因为当我跳过这个电话时，我可以简单地做：

```
[[challenge sender] useCredential:cred forAuthenticationChallenge:challenge]; 
```

没有任何错误，但在这种情况下我无法验证证书。

我究竟做错了什么？

非常感谢，亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T13:21:24.440

看看这段代码

[https://github.com/dirkx/Security-Pinning-by-CA](https://github.com/dirkx/Security-Pinning-by-CA)

通过相当小心地将两个信任块分开（您似乎正在混合）来做到这一点。

# android - Phonegap Build ios 6 iphone 5 splash 不会消失

> ID：15326556
> 
> 赞同：2
> 
> 时间：2013-03-10T19:31:51.647
> 
> 标签：android, jquery, ios, cordova, phonegap-build

嘿，我已经创建了一个在 android 上运行良好的 android/iphone 应用程序，但由于某种原因，它只是显示启动屏幕/加载动画，而不是过去。

这是屏幕的样子：

![在此处输入图像描述](../Images/165725defb570c3b89536befbf11248b.png)

在我的 config.xml 文件中，我有：

```
<!--App settings -->
    <preference name="phonegap-version"                                     value="2.3.0" />
    <preference name="orientation"                                          value="portrait" />
    <preference name="fullscreen"                                           value="true" />
    <preference name="exit-on-suspend"                                      value="true" />
    <preference name="auto-hide-splash-screen"                              value="false" />
    <preference name="splash-screen-duration"                               value="10000" />
    <preference name="webviewbounce"                                        value="true" /> 
```

在我的javascript中，我有：

```
 //Wait for device
    function onDeviceReady() {
        navigator.splashscreen.hide();
    }

    document.addEventListener("deviceready", onDeviceReady, false); 
```

但是，我将此代码用于 index.html 文件：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=310;" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<title></title>
</head>

<body>
<script>
    window.location='https://fb.zzzzzzz.com/xxxxxx/index.php';
</script>
</body>
</html> 
```

我缺少什么设置？可能是因为我在 .html 之后调用了 .php 页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T19:02:06.357

在触发和处理设备就绪事件后，它对我有用。

JavaScript

```
var app = {
    // Application Constructor
    initialize: function() {
        this.bindEvents();
    },
    // Bind Event Listeners
    //
    // Bind any events that are required on startup. Common events are:
    // 'load', 'deviceready', 'offline', and 'online'.
    bindEvents: function() {
        document.addEventListener('deviceready', this.onDeviceReady, false);
    },
    // deviceready Event Handler
    //
    // The scope of 'this' is the event. In order to call the 'receivedEvent'
    // function, we must explicity call 'app.receivedEvent(...);'
    onDeviceReady: function() {
        app.receivedEvent('deviceready');
    },
    // Update DOM on a Received Event
    receivedEvent: function(id) {
        var parentElement = document.getElementById(id);
        var listeningElement = parentElement.querySelector('.listening');
        var receivedElement = parentElement.querySelector('.received');

        listeningElement.setAttribute('style', 'display:none;');
        receivedElement.setAttribute('style', 'display:block;');

        console.log('Received Event: ' + id);
        window.location='https://fb.zzzzzzz.com/xxxxxx/index.php';
    }
}; 
```

HTML

```
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript">
    app.initialize();
</script> 
```

# php - 如何使用 MySQL 数据库中的数据填充 Android Spinner？

> ID：15326560
> 
> 赞同：1
> 
> 时间：2013-03-10T19:32:15.513
> 
> 标签：php, android, mysql

我需要创建一个支持无线的 Android 应用程序。我的想法是创建一个票务预订系统，允许用户通过 Spinner 选择票务类型。微调器将填充来自 MySQL 数据库的信息，这意味着应用程序使用某种无线连接。除此之外，我还希望在我的应用程序中显示与所选票证类型相关的费用。数据库本身目前包含以下 3 条记录：

```
Adult - 24.99
Senior - 19.99
Child - 14.99 
```

所以我需要找到一种方法来使用上述数据填充我的微调器，允许用户选择成人、高级或儿童。然后，如果可能，请使用文本视图根据用户选择的票证显示相关费用。我做了一些研究，看起来我必须使用 PHP 来连接和检索我需要的数据，尽管我完全不知道我将如何去做。如果有人能指出我正确的方向，我们将不胜感激，或者如果有人需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:04:12.290

据我了解，您的问题是询问如何在 PHP/MySQL 服务器和 Android 客户端之间传输数据。我对这个问题的回答是[JSON](http://www.json.org/)。

JSON 提供了一种简单、轻量级和人类可读的方式来传输原始数据。您的数据的一种 JSON 表示形式可能如下所示：

```
{"Adult":24.99,"Senior":19.99,"Child":14.99} 
```

[在 PHP 服务器上，您可以使用json_encode()](http://php.net/json_encode)函数将几乎任何变量转换为 JSON 字符串：

```
<?php
// TODO create this array from the database
$prices = array('Adult' => 24.99, 'Senior' => 19.99, 'Child' => 14.99);

echo json_encode($prices);
?> 
```

在 Android 客户端上，您可以使用[Jackson JSON 处理器](http://wiki.fasterxml.com/JacksonHome)库对 JSON 进行解码。数据绑定模式使得将 JSON 字符串转换为 Java 对象变得异常容易。（这里我将数据转换为泛型类型`Map<String, Float>`，但您也可以创建一个自定义类型`Price.class`并使用它而不是`new TypeReference ...`部分。）

```
// TODO download this string from the server
String json = "{\"Adult\":24.99,\"Senior\":19.99,\"Child\":14.99}";

ObjectMapper mapper = new ObjectMapper();
Map<String, Float> prices = mapper.readValue(json, new TypeReference<Map<String, Float>>() {}); 
```

# node.js - node.js中，如何使用node.js和mongodb多层次存储数据

> ID：15326561
> 
> 赞同：0
> 
> 时间：2013-03-10T19:32:18.427
> 
> 标签：node.js, mongodb

我遇到了一个有线问题，当我使用 mongodb 存储数据时，一些数据丢失了，我认为这是因为它的异步特性

所以对于这个时间表，我会使用 re

/* 这是一个应用程序，其中使用 train_uid 和今天，*/

```
var today = new Date();
var day = today.getDay();
scheduleModel.findByTrainAndTime(train_uid,today,function(err, doc){
    var a = new Object();
    if(err){}
    else{
        if(doc != null)
        { 
```

//mongodb 数据库可以给我一些关于 train_id ,uid 的数据

```
 a.train_uid = doc.train_uid;
        a.train_id = train_id; 
```

最重要的是火车时刻表，火车时刻表是 json 对象的列表（ doc.time_schedule ），如到达、出发和提示位置。但是，我需要将tiploc更改为sanox编号，referenceModel可以通过提供tiploc编号来帮助找到sanox。

```
 //doc.time_schedule
                   // here is to add a array 
```

所以我使用async，对于列表中的每一项，我使用referenceModel查询sanox并构造一个数组-a.timeline来存储每个b，最后当async每个操作完成时，trainModel是存储一个带有数组的对象sanox 对象。但是当涉及到 mongodb 数据库时，只有 sanox 对象的数组是空的，我猜是因为异步操作，但是由于我使用了 async ，为什么它不起作用

```
 a.train_uid = doc.train_uid;  //works
        a.train_id = train_id;   works
                    a.timeline = []   // doesn't work    
        a.timeline = new Array();                                               
        var b ;
            async.forEachSeries(doc.time_schedule,
              function(item,callback){
                   referenceModel.findStanoxByTicloc(item.tiploc_code,function(err,sanox){ 
                      try{ 
                        b = new Object();
                                            b.sanox = sanox;
                        a.time.push(b);

                      }catch(err2){

                      }
                  });   
                  callback();
              },
              function(err){
                trainModel.createNewTrain(a,function(){}); 

        }
    }
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:36:12.697

您在`callback`触发 asynchronous 之后调用`find`，但在它实际返回之前调用。您需要等到获得数据后才能执行此操作。以下应该更好地工作：

```
 async.forEachSeries(doc.time_schedule,
          function(item,callback){
             referenceModel.findStanoxByTicloc(item.tiploc_code,function(err,sanox){ 
                  try{ 
                    b = new Object();
                    b.sanox = sanox;
                    a.time.push(b);

                  }catch(err2){

                  }
                  callback();
              });   
          },
          function(err){
            trainModel.createNewTrain(a,function(){}); 

    } 
```

# java - 页面刷新后 Java 会话被删除

> ID：15326562
> 
> 赞同：0
> 
> 时间：2013-03-10T19:32:46.580
> 
> 标签：java, jsp, session, request

我有一个网站，其中有一个登录表单。如果登录成功，我将对象用户放入会话中，然后以这种方式进入另一个页面（其中我需要会话属性）：

-Java Servlet-

```
 request.getSession(true).setAttribute("utente", u);
 request.getSession(true).setAttribute("abbonamento", a);
 request.getRequestDispatcher("HomeUtente.jsp").forward(request, response); 
```

-Jsp页面-

```
 <%
    Utente u = null;
    Abbonamento a = null;
    try {
        u = (Utente) session.getAttribute("utente");
        a = (Abbonamento) session.getAttribute("abbonamento");
    } catch (Exception e) {
        a = null;
        u = null;
        e.printStackTrace();
    }
%> 
```

现在，如果我这样做一次就可以了，但是如果我刷新页面，似乎会话将被删除。

我猜这是因为当我刷新页面（在调试模式下）时，a 和 u 都将为空。

任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-10T19:45:28.533

Java 会话 -

`HttpSession getSession(boolean create)` -

返回与此请求关联的当前 HttpSession，或者，如果没有当前会话并且 create 为 true，则返回一个新会话。

因此，在您使用的程序中-

`request.getSession(true)`-

它总是返回一个新会话，并且以前的会话变量被删除。

您也可以查看以下链接以更好地理解 -

[如何检查会话是否存在？](https://stackoverflow.com/questions/2818251/how-to-check-if-session-exists-or-not)

# c# - C# 中的复合数据类型

> ID：15326563
> 
> 赞同：3
> 
> 时间：2013-03-10T19:32:49.790
> 
> 标签：c#

请帮助我试图理解

*   什么是 C# 中的复合数据类型
*   自定义数据类型和复合类型在 C# 中是否相同

我需要在 WCF 服务中使用它，因此我需要对它有更清晰的理解。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-10T20:19:51.460

复合数据类型可以分为多种其他类型。一个包含更多盒子的盒子，如果你愿意的话。如果一个框是空的，那么它是一种基本数据类型。包含另一个盒子的盒子是复合类型，因为您可以将它分成更小的类型。

假设您有一个代表游戏中暴徒的类型。您如何将其划分为更小的对象以更好地理解和表示它？

该暴徒包含信息，例如其名称、攻击、生命值和装备。

现在，它的名字可以表示为一个字符串，所以它是一个基本类型。生命值用一个数字表示，所以它也是一个简单的类型。空盒子，如果你按照我上面的例子。

但是它的设备呢？它可以用复合类型表示。为了这个例子，一个字符串数组。每个暴徒都有一个它携带的物品清单。它可以携带“剑”、“靴子”或其他任何东西。数组是一种复合类型，因为您可以将它分成一堆对象（字符串 [] = 多个字符串对象）。

现在，对于它的攻击。我们需要的不仅仅是一个字符串或数字来表示一次攻击。我们需要一个名称，以及它造成的伤害量，以及它可以造成的额外效果。这将是一个包含其他框的框。

最后，您可以将复合类型（类、数组、结构）视为一棵树：

```
int[]
    int
    int
    int
    int

person
    name
    address
        civic number
        street
        city
    birth date 
```

希望能帮助你理解。

# jsf - 在没有IDE的情况下使用maven创建jsf应用程序

> ID：15326567
> 
> 赞同：0
> 
> 时间：2013-03-10T19:33:17.410
> 
> 标签：jsf, jakarta-ee, maven

我想要做的是在不使用任何 IDE 的情况下设置 JSF 应用程序以完全了解正在发生的事情。

这是我到目前为止所做的：

我创建了一个目录（D:\Project\MyMavenProject）并添加了一个 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.maxheapsize</groupId>
  <artifactId>jsf2demo</artifactId>
  <packaging>war</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>jsf2demo Maven Webapp</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>com.sun.faces</groupId>
      <artifactId>jsf-api</artifactId>
      <version>2.0.0-b13</version>
      <scope>compile</scope>
    </dependency>

    <dependency>
      <groupId>com.sun.faces</groupId>
      <artifactId>jsf-impl</artifactId>
      <version>2.0.0-b13</version>
      <scope>compile</scope>
    </dependency>

    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>jstl</artifactId>
      <version>1.2</version>
    </dependency>

    <dependency>
      <groupId>javax.servlet</groupId>
      <artifactId>servlet-api</artifactId>
      <version>2.5</version>
    </dependency>

  </dependencies>
  <build>
    <finalName>jsf2demo</finalName>
  </build>

  <repositories>
    <repository>
      <id>maven2-repository.dev.java.net</id>
      <name>Java.net Repository for Maven</name>
      <url>http://download.java.net/maven/2</url>
    </repository>
  </repositories>

</project> 
```

当我从命令行说：

**mvn 验证**

我得到构建错误。我究竟做错了什么？ ![在此处输入图像描述](../Images/9d247bea123465f6e1baea9832dd4c4e.png)

这是图片的链接： http: [//s11.postimage.org/jwr1laf5d/image.png](http://s11.postimage.org/jwr1laf5d/image.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:57:34.637

```
http://download.java.net/maven/2/javax/servlet/ 
```

您的存储库没有 servlet-api 或 jstl 的依赖项

您可以使用`http://repo1.maven.org/maven2 respository`其中包含您正在寻找的 jstl 和 servlet-api 版本，

```
 <repositories>
    <repository>
      <id>maven2-repository.dev.java.net</id>
      <name>Java.net Repository for Maven</name>
      <url>http://download.java.net/maven/2</url>
    </repository>
     <repository>
      <id>maven2-central</id>
      <name>Maven Central</name>
      <url>http://repo1.maven.org/maven2</url>
    </repository>
  </repositories> 
```

另外，正如我从其他帖子中看到的那样，您没有创建项目目录，您可以使用 maven 原型在没有 IDE 的情况下创建项目

```
mvn archetype:generate -DgroupId=com.maxheapsize
                       -DartifactId=jsf2demo
                       -Dversion=1.0-SNAPSHOT
                       -DarchetypeArtifactId=maven-archetype-webapp
                       -DinteractiveMode=false 
```

可用原型列表可在此处找到

```
http://maven.apache.org/guides/introduction/introduction-to-archetypes.html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:00:33.607

听起来您只指定了一个存储库，它不包含您的 jsf 依赖项所需的所有依赖项。我认为您应该尝试将 ALSO 指向 Maven 中央存储库。您所指的 java repo 似乎不包含`servlet-api`您的 jsf pom 所需的示例。

# paypal - PayPal - 如何将直通 HTML 变量添加到 PayPal 按钮？

> ID：15326568
> 
> 赞同：0
> 
> 时间：2013-03-10T19:33:21.573
> 
> 标签：paypal

我想创建一个简单的表单，客户可以在其中上传 pdf，然后按立即付款 PayPal 按钮。打开页面（或上传）后，将为按钮分配一个随机参考编号。按下 PayPal“立即付款”按钮后，参考号应与邮寄地址等付款信息一起传递给我。

如何创建一个将随机数作为付款信息参考的自定义按钮？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T17:18:26.243

该`custom`参数使用 PayPal 执行此操作。
即`<input type="hidden" name="custom" value="aaaaaaaaaaa111111222222bbbbbb">`。

另请参阅[此链接](http://www.michaelsherron.com/paypal-IPN-custom-variables)以了解有关如何将其应用于 PayPal IPN 的信息。

# c++ - 从 QTextEdit 中删除最后一行

> ID：15326569
> 
> 赞同：4
> 
> 时间：2013-03-10T19:33:37.977
> 
> 标签：c++, qt

我正在使用这段代码尝试从 QTextEdit 中删除最后一行：

```
 ui->textEdit_2->textCursor().setPosition( QTextCursor::End);
    auto k = ui->textEdit_2->textCursor().currentTable();
    k->removeRows(k->rows() - 1, 1); 
```

但我得到一个分段错误。调试后我发现调用 removeRows 时 k 为空。

难道我做错了什么？如果是，如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T20:06:14.003

试试这个（测试）：

```
ui->textEdit_2->setFocus();
QTextCursor storeCursorPos = ui->textEdit_2->textCursor();
ui->textEdit_2->moveCursor(QTextCursor::End, QTextCursor::MoveAnchor);
ui->textEdit_2->moveCursor(QTextCursor::StartOfLine, QTextCursor::MoveAnchor);
ui->textEdit_2->moveCursor(QTextCursor::End, QTextCursor::KeepAnchor);
ui->textEdit_2->textCursor().removeSelectedText();
ui->textEdit_2->textCursor().deletePreviousChar();
ui->textEdit_2->setTextCursor(storeCursorPos); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T19:42:54.440

（只是保留此未删除以显示执行相同操作的另一种方式）

你可以试试这个来删除最后一行：

```
QTextCursor cursor = ui->textEdit_2->textCursor();
cursor.movePosition(QTextCursor::End);
cursor.select(QTextCursor::LineUnderCursor);
cursor.removeSelectedText();
cursor.deletePreviousChar(); // Added to trim the newline char when removing last line
ui->textEdit_2->setTextCursor(cursor); 
```

如果要将光标位置恢复到原来的位置，只需在调用之前保存光标位置

```
cursor.movePosition(QTextCursor::End); 
```

然后在删除文本后。

```
ui->textEdit_2->setTextCursor(savedCursorPos); 
```

# process - 如何在 Minix 3 中的系统调用中等待

> ID：15326572
> 
> 赞同：0
> 
> 时间：2013-03-10T19:33:45.130
> 
> 标签：process, system-calls, minix

我需要在 minix 中实现一个系统调用，等待某个条件为真后再返回。但是，我发现只是尝试类似

```
while (var != desired_value)
{
    // wait
} 
```

不起作用，因为虽然它确实阻塞了进程，但它也阻塞了在 minix 中运行的所有其他进程。我什至无法切换到另一个虚拟终端并登录。我认为 minix 进程应该彼此独立运行，但看起来当任何进程阻塞系统调用时，所有其他进程同时被挂起。这可能是正确的吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T08:17:02.837

当然 Minix 有一个非阻塞等待机制：

```
#include <sys/types.h>
#include <sys/wait.h>

pid_t wait(int *status)
pid_t waitpid(pid_t pid, int *status, int options) 
```

`wait`导致其调用者延迟，直到收到信号或其子进程之一终止。

`waitpid`为收集子进程状态时不得阻塞的程序或希望等待一个特定子进程的程序提供备用接口。

Minix 提供 POSIX，因此您可以使用`fork`,`exec`等来操作进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-07T14:54:09.070

Minix 系统调用是原子过程，这意味着它们不能被中断，即使是调度程序。等待不可能发生的条件会导致死锁。

# javascript - toUpperCase() 没有使字符串大写

> ID：15326582
> 
> 赞同：5
> 
> 时间：2013-03-10T19:35:07.673
> 
> 标签：javascript

我不知道我做错了什么；但不知何故`.toUpperCase()`，字符串函数在我的浏览器上不起作用，或者我有什么问题吗？

```
var string ="kjsdgfiIJHBVSFIU";
string.toUpperCase();
console.log(string); 
```

[现场演示](http://jsbin.com/axorer/3/edit)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-10T19:36:20.960

`.toUpperCase`返回大写字符串。它不是就地修改器方法。

```
string = string.toUpperCase(); 
```

文档：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toUpperCase](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toUpperCase)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-10T19:40:33.647

> 字符串是不可变的。一旦创建，字符串对象就不能被修改。

*所以这里`toUpperCase`返回一个新字符串，这应该工作-*

```
var string ="kjsdgfiIJHBVSFIU";
var newString = string.toUpperCase();
alert(newString); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T19:40:07.250

`toUpperCase`返回新字符串，因此您必须编写：

```
string = string.toUpperCase(); 
```

在许多语言中，字符串是不可变的，这意味着它们一旦创建就无法修改。虽然这会降低效率，但它对于面向对象的编程很重要，因为如果通过引用传递给函数的字符串是可修改的，则可以在未经对象同意的情况下更改对象的状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T19:38:08.017

```
var upperCase = string.toUpperCase();
console.log(upperCase); 
```

toUpperCase 不转换现有字符串，它只返回一个大写字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-08T09:24:47.780

我不知道该字符串是不可更改的，除非您用新名称重新分配它

```
console.log(i, 'is a ' + typeof i);
var N = i.toUpperCase();
console.log(N); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-05-24T09:42:44.987

以前关于字符串不可变的答案很棒！这只是导致此错误的另一个潜在的运行时原因，起初可能很难发现。它不会减损上述任何有效答案：

如果调用该`.toUpperCase()`方法的对象不是字符串，则运行时不会“找到”该方法`toUpperCase()`，因为该方法/函数仅存在于字符串对象上。

例如`console.log(variableName.toUpperCase());`

如果 variableName 是 String 类型，它可以正常工作。如果它是另一种类型（没有`toUpperCase()`方法，它会说 'toUpperCase() 不是函数（因为它不是）。

如果你知道它应该是一个字符串，你可以像这样转换它：

```
console.log(String(variableName).toUppercase()); 
```

希望能帮助到你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-08T09:33:33.250

*   您错过了将更新的数据保存在`string`密钥中
*   `string`使用can be`upperCaseString`或`newString` or之类的名称不是一个好的约定`updatedString`。这可能是出于测试目的，但请尽量遵循良好的惯例：) 将来会有所帮助。

```
var string ="kjsdgfiIJHBVSFIU";
string = string.toUpperCase();
console.log(string);

// Output:
KJSDGFIIJHBVSFIU 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-09-13T02:24:50.787

```
var string ="kjsdgfiIJHBVSFIU";
string = string.toUpperCase();
console.log(string); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-07-01T06:45:02.770

将`string`值转换为`toUpperCase`然后`toLowercase`使用方法（）的对象。

```
var string ="kjsdgfiIJHBVSFIU";

console.log(string.toUpperCase()); 
```

# vb.net - VB.net 类构造函数的简写

> ID：15326585
> 
> 赞同：0
> 
> 时间：2013-03-10T19:35:16.003
> 
> 标签：vb.net

我倾向于制作一堆 POD 类来保存各种数据，它们通常看起来像这样：

```
Public class vertex
    public x as single
    public y as single
    Public sub New(x as single, y as single)
        Me.x = x
        Me.y = y
    End Sub
End class 
```

有什么办法不必写出 me.class_variable_name = function_variable_with_same_name？或者一些更短的方法来做到这一点？

可能看起来像一个毫无意义的问题，但我倾向于一直制作这些类，而且一遍又一遍地编写相同的变量名感觉如此多余。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:38:45.303

您可以使用[对象初始化程序](http://msdn.microsoft.com/en-us/library/bb385125.aspx)完全跳过构造函数：

```
Public Class vertex
    Public Property x As Single
    Public Property y As Single
End Class

Dim v As New vertext() With {.x = 2, .y = 4} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:19:42.490

构造函数有什么问题？另外，如果您不需要或不想公开它们，您可以缩小变量的范围。

```
Dim v As New vertext(2, 4)

Public class vertex
 Private x as single
 Private y as single
 Public sub New(x as single, y as single)
    Me.x = x
    Me.y = y
 End Sub
End class 
```

# jquery - 检查类元素是否具有相同的 html 内容

> ID：15326587
> 
> 赞同：-2
> 
> 时间：2013-03-10T19:35:26.493
> 
> 标签：jquery

我想检查一个类元素是否具有相同的 html 内容。

例子;

```
<span class="test">100</span>
<span class="test">100</span>
<span class="test">98</span>
<span class="test">100</span>
<span class="test">100</span> 
```

我想知道一个元素是否有不同的内容，比如`98`上面的数字

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:39:10.130

试试这样的代码

```
$(".test").each(function(){
    var val = $(this).html();
    if(val!="100") alert(val);
}); 
```

[演示视图](http://jsfiddle.net/9Wj5e/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:42:39.670

这样做： -

```
$(".test").each(function() {
    if (Number($(this).text()) > 98)
        alert("Text contains > 98");
}); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/Yu26N/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T19:39:44.647

这应该这样做：

```
 var a = new Array();

    $('.test').each(function(index) {
        text = $(this).text();

        if ($.inArray(text, a) != -1) {
            $(this).hide();
        } else {
            a.push(text);
        }

    });

    return false; 
```

# macos - 使用 enterFullscreenMode:withOptions 时系统快捷方式不起作用：

> ID：15326593
> 
> 赞同：1
> 
> 时间：2013-03-10T19:36:07.693
> 
> 标签：macos, cocoa

我有一个应用程序，有时可以在第二个显示器上将视图带入全屏模式。应用程序通过在视图上使用“enterFullscreenMode:withOptions” api 来执行此操作。

奇怪的是，当在另一个显示器上处于全屏模式时，诸如 cmd+tab 或 alt+space 之类的系统快捷方式不再起作用，但所有正常字符都起作用。当我将视图退出全屏模式时，键盘再次正常工作。

我怎样才能解决这个问题？

# variables - 批量失败将值设置为变量

> ID：15326594
> 
> 赞同：1
> 
> 时间：2013-03-10T19:36:12.297
> 
> 标签：variables, batch-file

这是我的代码：

```
@echo off
Setlocal EnableDelayedExpansion

set log=C:\mylog.log

set ftpFolder=C:\contributor\ftp
set rotterdamFolder=C:\rotterdam

cd /D C:\contributor
echo [FTP Folder: %ftpFolder%] >> %log%
cd /D %ftpFolder%

for /D %%f in (*) do (
cd %%f
for %%i in (*) do (     
    echo [FTP, %%f] Sending %%i >> %log%
    for /f "tokens=1,2" %%a in (C:\input.txt) do (
        if %%a==%%f ( 
            set et=%%b              
            )
        )
    copy %ftpFolder%\%%f\%%i %rotterdamFolder%\%et% >> %log%
)
cd .. >> %log%
) 
```

input.txt 文件类似于：

```
007   87855
008   87823
015   87830 
```

如何划分两列（制表符或空格）并不重要。我的问题是 %et% 变量没有定义。这怎么可能？我需要使用变量“b”作为目标文件夹。错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T21:14:13.390

`%et%`解析行时展开，并且一次性解析整个外圆括号 FOR 循环。因此，您获得的值是进入循环之前存在的值。

您可以通过启用延迟扩展并改为使用`!et!`来解决问题。键入`HELP FOR`或`FOR /?`从命令行获取更多信息。关于延迟扩展的部分大约下降了一半。

但实际上根本不需要使用该`et`变量。我相信您只想在内循环的第一列与文件夹名称匹配时复制文件。只需移动 COPY 命令并将其替换为 SET 语句。在 COPY 语句中使用`%%b`而不是。`%et%`

这不是必需的，但我用 PUSHD/POPD 代替了 CD 命令。指定路径时，使用 CD 进行重定向是没有意义的。

你真的应该引用你的路径，以防它们包含空格或特殊字符。

```
for /D %%f in (*) do (
  pushd "%%f"
  for %%i in (*) do (     
    echo [FTP, %%f] Sending %%i >> %log%
    for /f "tokens=1,2" %%a in (C:\input.txt) do if "%%a"=="%%f" (
      copy "%ftpFolder%\%%f\%%i" "%rotterdamFolder%\%%b" >> %log%
    )
  )
  popd
) 
```

# c++ - Qt 应用程序中线程的自定义调度

> ID：15326595
> 
> 赞同：0
> 
> 时间：2013-03-10T19:36:12.637
> 
> 标签：c++, multithreading, qt

我是 Qt 的新手，想了解有关 QThread 实例管理的线程的自定义调度的推荐方法。

我想要一个调度程序线程，它响应应用程序状态的变化，使某些线程进入睡眠状态或改变它们的优先级。调度应该是抢先式的，因为我应该能够让某些工作人员（可能正在等待互斥体）进入睡眠状态并稍后调用它们。

我特别好奇的是，为什么 QThread::sleep 和相关函数都受到保护？

如果不能通过 Qt 线程类获得对调度的细粒度控制，那么我想知道其他可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:35:45.990

> 那么有没有办法让其他线程休眠并稍后唤醒它们？

在下班时让线程休眠通常不是完成您需要的最有效或最干净的方法。您通常希望在线程有工作时保持活动状态，并在它们没有工作时销毁它们（而不是迫使停滞的线程反复休眠）。在 Qt 中管理线程的惯用方式是利用信号/槽接口来促进线程的创建和销毁。

下面是 QThread 文档中的一个简单示例，它展示了如何使用 Qt 的这个特性来处理线程调度，而几乎没有外部干预：

```
 class Worker : public QObject
 {
     Q_OBJECT

 public slots:
     void doWork() {
         ...
     }
 };

 void MyObject::putWorkerInAThread()
 {
     Worker *worker = new Worker;
     QThread *workerThread = new QThread(this);

     connect(workerThread, SIGNAL(started()), worker, SLOT(doWork()));
     connect(workerThread, SIGNAL(finished()), worker, SLOT(deleteLater()));
     worker->moveToThread(workerThread);

     // Starts an event loop, and emits workerThread->started()
     workerThread->start();
 } 
```

对于更高级的线程方案，Qt 还提供了额外的线程机制（利用信号和槽），如[QThreadPool](http://qt-project.org/doc/qt-4.8/qthreadpool.html)或[QtConcurrent](http://qt-project.org/doc/qt-4.8/qtconcurrent.html)命名空间中的任何东西。

# php - 为另一个班级服务的班级的总称

> ID：15326597
> 
> 赞同：4
> 
> 时间：2013-03-10T19:36:26.627
> 
> 标签：php, oop

我正在寻找与主类分离的类的总称，以实现必要的封装并保持主类的大小合理。

例如，每篇博客文章都是*BlogPost*的一个实例，而该实例又由不同的类提供：

*   创作和更新，
*   获取和保存标签，
*   获取关联的 URL，
*   缓存和索引
*   等等

他们都：

*   永远不会在*BlogPost*之外实例化。
*   不要从**BlogPost***继承*。
*   而是从另一个中间类继承一些常用方法。
*   其他方面大多不同。

这些应该如何命名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T15:34:28.927

**您可以将这些类命名为助手和库。**

通常，当处理并返回数据时，我们希望调用这些类 Helpers 而处理数据的类，我更愿意调用这些库。

所以，在这里我们将有创建和更新库：

**创建：** 您构建了一个访问 4 个参数的类（*在此处创建一个简单示例*）：

*   博客名称
*   博客文字
*   作者
*   创建日期和时间

这被传递给创建库，该库具有用于验证、缓存等的代码逻辑。

**更新：** 您将必须构建一个访问 5 个参数的类（*再次在这里创建一个简单的示例*）

*   博客 ID
*   博客名称（*如果可编辑*）
*   更新的博客文本
*   更新日期和时间

在更新博客时，您可能想要检查创建博客的同一作者是否正在更新它或管理员正在编辑博客、更新缓存系统等

**标记：** 此标记可能有助于

*   生成标签云
*   可能通过标签处理搜索功能
*   以及更多

**缓存和索引：**

缓存和索引可以作为两种方式处理，其中它可以作为帮助程序和库处理博客的输入/输出缓存，并基于动态缓存覆盖缓存系统等

这样，这些类将不会扩展或实现父博客帖子类，但是，将有助于以结构化和 OOP 方式管理博客帖子逻辑

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-16T07:55:29.317

看来 Minion 是您正在寻找的词 :-)

[http://www.merriam-webster.com/dictionary/minion](http://www.merriam-webster.com/dictionary/minion)

# java - 缓冲套接字读取器不等待来自远程连接的数据

> ID：15326607
> 
> 赞同：-5
> 
> 时间：2013-03-10T19:37:28.327
> 
> 标签：java, io

我有一个从 TCP 源读取数据的 Java 程序，一切正常，除非我的程序（充当数据源的客户端）速度更快，然后源可以响应 BufferedReader.ready() 抛出一个关闭我的异常TCP 连接，因为它应该。是否有任何首选方式/方法可以让 BufferedReader 等待新输入，因为我的源有时可能会有轻微延迟。

这是我正在谈论的部分：

```
 public aDataServer(String host, int port, StreamConnection aConnection) throws UnknownHostException, IOException {
            this.aConnection = aConnection;
            ndataServerSocket = new Socket(Inet4Address.getByName(host),port);
            ndataServerReader = new BufferedReader(new InputStreamReader(ndataServerSocket.getInputStream()));
        }

 public void run() {
            try {
                RemoteDevice dev = RemoteDevice.getRemoteDevice(aConnection);
                OutputStream outputStream = aConnection.openOutputStream();
                OutputStreamWriter osw = new OutputStreamWriter(outputStream);
                do {
                    try {
                        String ndata = ndataServerReader.readLine();

                          osw.write(ndata+"\n");
                          osw.flush();
                          LOG.log(Level.INFO,"Sent");

                    } catch(IOException io) {
                        LOG.log(Level.SEVERE, "Client device({0}) disconnected: \n{1}", new Object[]{dev.getFriendlyName(true), io.getMessage()});
                        break;
                    } 
                }while(ndataServerReader.ready());
            } catch (IOException ioe) {
                LOG.severe(ioe.getMessage());
            } finally {
                try {
                    if (ndataServerSocket != null) {
                                ndataServerSocket.close();
                    }
                     if (ndataServerReader
                             != null) {
                                ndataServerReader.close();
                    }
                } catch (IOException ex) {
                    LOG.log(Level.SEVERE, ex.getMessage());
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:37:12.110

你不应该使用`ndataServerReader.ready()`. 您的 do/while 循环（几乎可以肯定只是一个 while 循环）似乎假设`ndataServerReader.ready()`表明有更多数据要读取，这不是它的用途。

Reader的[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html#ready%28%29)将该`ready()`方法描述为：

> 告诉这个流是否准备好被读取。
> 
> 返回：如果保证下一个 read() 不会阻塞输入，则返回 true，否则返回 false。请注意，返回 false 并不能保证下一次读取将阻塞。

更糟糕的是，`Reader.ready()`如果读者在尝试读取数据之前会等待更多数据，则返回 false。这并不*意味着*Reader 已经完成，实际上您应该*期望*此方法在处理网络流时经常返回 false，因为它很容易出现延迟。

您的代码当前可能正在读取一行（在`do`块中）然后检查阅读器是否准备好（在 中`while`），它可能不是，然后成功退出。没有异常被抛出——如果是，你会看到一个`SEVERE`级别的日志消息。

而不是 using ，而是利用它返回`ready()`的记录行为：[`readLine()`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29)

> 包含行内容的字符串，不包括任何行终止字符，如果已到达流的末尾，则为 null

换句话说，只需执行以下操作：

```
String ndata = reader.readLine();
while (ndata != null) {
    osw.write(ndata+"\n");
    osw.flush();
    LOG.log(Level.INFO,"Sent");

    ndata reader.readLine();
} 
```

足以读取整个输入流。

参考阅读：[(reader.ready()) 和使用 for 循环读取文件有什么区别？](https://stackoverflow.com/questions/15325652/whats-the-difference-between-reader-ready-and-using-a-for-loop-to-read-thro)

# validation - 如何在 grails 中添加对文件类型的验证

> ID：15326610
> 
> 赞同：0
> 
> 时间：2013-03-10T19:37:41.667
> 
> 标签：validation, grails, file-upload, groovy

我有一个具有以下内容的域对象：

```
class Color {
  String name
  String fileLocation

  static constraints = {
    name (nullable: false, blank: false)
  }
} 
```

在我的控制器中，我正在执行以下操作：

```
def save() {
  def colorInstance = new Color(params)
  if (colorInstance.save(flush: true)) {
    def file = request.getFile("myfile")
    if (!file.empty && uploadService.isFileAllowed(file)) {
      uploadService.uploadFile(file, file.originalName, "folderName")
    }
  }
  else {
    render (view: "create", model: [coorInstance: colorInstance])
  }
} 
```

这一切都很好，但是，当上传的文件不是允许的文件时，我不确定如何抛出错误。即`uploadService.isFileAllowed(file)`返回`false`？

我怎样才能向用户抛出错误说

> 不允许上传文件

什么时候`uploadService.isFileAllowed(file)`返回 false ？

笔记：

该`isFileAllowed`方法是读取文件的前几个字节以确定它是什么类型的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T22:16:26.653

如果您将错误消息保存到闪存中，然后在页面上呈现它（如果存在）怎么办？ [请参阅此帖子寻求帮助](https://stackoverflow.com/a/14278214/1676002)。

```
if (!file.empty && uploadService.isFileAllowed(file)) {
  uploadService.uploadFile(file, file.originalName, "folderName")
} else {
    flash.error = "Uploaded file isn't allowed"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T06:50:11.890

在您的控制器中应用此登录

```
String fileName = "something.ext";
        int a = fileName.lastIndexOf(".");
        String extName = fileName.substring(a);
        System.out.println(fileName.substring(a));
        ArrayList<String> extList = new ArrayList<String>();
        extList.add("jpg");
        extList.add("jpeg");
        extList.add("png");
        if(extList.contains(extName))
        {
            System.out.println("proceed");
        }
        else{
            System.out.println("throw exception");
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T12:07:45.287

因此，如果`isFileAllowed`返回 false 或文件为空，则会将 colorInstance 错误添加到 fileLocation 属性。仅当 colorInstance 验证成功时才会上传文件（以防止为未保存的对象上传文件）。

附带说明一下，部分原因是我更喜欢将文件保存在表格中。它使验证变得不那么笨拙，并且不可能在您的对象和文件之间断开连接。- 只是我的 2c。

```
 def save() {

  def colorInstance = new Color(params)

    def file = request.getFile("myfile")
    if (!file.empty && uploadService.isFileAllowed(file)) {
      if (colorInstance.validate()) {
        uploadService.uploadFile(file, file.originalName, "folderName")
      }
    }
    else {
      colorInstance.errors.rejectValue('fileLocation','error.message.code.here')
    }

  if (colorInstance.save(flush: true)) {
     //do whatever here
  }
  else {
    render (view: "create", model: [coorInstance: colorInstance])
  }
} 
```

# c - 垃圾值如何分配给c中的变量

> ID：15326611
> 
> 赞同：11
> 
> 时间：2013-03-10T19:37:44.533
> 
> 标签：c, memory

C代码：

```
int a;
printf("\n\t %d",a); // It'll print some garbage value; 
```

那么这些**垃圾**值是如何在 C 的幕后分配给未初始化的变量的呢？

这是否意味着C首先将内存分配给变量'a'，然后该内存位置的任何内容都变成'a'的值？或者是其他东西？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-10T19:38:35.607

> 这是否意味着C首先将内存分配给变量'a'，然后该内存位置的任何内容都变成'a'的值？

确切地！

基本上，C 不会做**任何**你不告诉它的事情。这既是它的强项，也是它的弱点。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-10T19:45:40.540

> 这是否意味着C首先将内存分配给变量'a'，然后该内存位置的任何内容都变成'a'的值？或者是其他东西？

正确的。值得一提的是，自动变量的“分配”`int a`实际上是不存在的，因为这些变量存储在堆栈或 CPU 寄存器中。对于存储在堆栈中的变量，在调用函数时会执行“分配”，归结为将堆栈指针移动编译时计算的固定偏移量的指令（函数使用的所有局部变量的组合存储，四舍五入到正确对齐）。

分配给 CPU 寄存器的变量的初始值是寄存器以前的内容。由于这种差异（寄存器与内存），有时会发生在没有优化的情况下编译时正常工作的程序在打开优化的情况下编译时会开始中断。未初始化的变量，以前指向碰巧被零初始化的位置，现在包含以前使用相同寄存器的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-27T08:12:01.737

最初内存有一些值，那些是未知值，也称为垃圾值，当我们声明一个变量时，根据我们在声明时指定的数据类型为变量保留一些内存，所以内存初始值是未知值，如果我们初始化其他一些值，那么我们的值将在那个内存位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-13T06:55:40.883

`int a`;

声明变量时，分配内存。但是这个变量没有被赋值，这意味着这个变量`a`没有被初始化。如果这个变量`a`只被声明而在程序中不再使用，则称为**垃圾值**。例如：

```
int a, b;

b=10;
printf("%d",b);
return 0; 
```

在这里它只被声明但不再分配或初始化。所以这叫做**垃圾值**。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-15T14:30:55.523

> 这是否意味着C首先将内存分配给变量'a'，然后该内存位置的任何内容都变成'a'的值？

不，不是那个意思。

当一个对象未​​初始化时，C 标准不提供任何关于如何确定其值的计划。不仅如此，程序不需要表现得好像对象具有任何固定值。它可以变化，就好像为它保留的内存没有保持在任何固定状态，只是波动。

以下是关于此的特定 C 2018 规则：

*   未初始化对象的所谓“值”是*不确定*的，根据 6.2.4 6 用于没有可变长度数组类型的自动存储持续时间的对象，6.2.4 7 用于具有可变长度数组类型的对象，7.22.3.4 2 用于分配的对象其中`malloc`， 7.22.3.5 2 用于分配的额外空间`realloc`， 7.22.3.1 2 用于`aligned_alloc`. 初始化其他对象，例如具有静态存储持续时间的对象。
*   根据 3.19.2，*不确定值*是“未指定的值或陷阱表示”。
*   根据 3.19.3，*未指定值*是“相关类型的有效值，其中本文档对在任何情况下选择哪个值没有要求”。

这意味着在**每个实例**中使用一个对象，C 标准对使用哪个值没有任何要求。它不需要与以前的使用相同。程序可能表现得好像它没有任何固定值。当它被多次使用时，程序可能会表现得好像每次都具有不同的值。例如，C 标准将允许`printf("%d %d %d\n", a, a, a);`打印“34 -10200773 2147483204”。

发生这种情况的一种方式是，在尝试编译代码`int a; printf("%d %d %d\n", a, a, a);`时，编译器无处可去`a`，因为它从未被赋予任何固定值。因此，编译器不会生成无用的指令来将数据从未初始化的内存移动到传递参数的位置，而是不会生成任何内容。然后`printf`被调用，传递参数的寄存器或堆栈位置包含它们之前的任何数据。这很可能是三个不同的值，它们会`printf`打印出来。所以它看起来输出的观察者好像`a`在`printf("%d %d %d\n", a, a, a);`.

（此外，使用具有自动存储持续时间且尚未获取其地址的未初始化对象的值是明确未定义的行为，因为 6.3.2.1 2，关于将对象转换为其值，说“如果左值指定一个对象可以使用寄存器存储类声明的自动存储持续时间（从未获取其地址），并且该对象未初始化（未使用初始化程序声明并且在使用之前未对其进行分配），行为未定义。 ” 所以，当有一个对象满足这些条件时，使用它的值可以完全破坏程序；它可能不仅在不同的时间有不同的值，而且程序可能会中止，走一个与你预期不同的分支，而不是调用`printf`当有一个`printf`在源代码中，等等。）

# ruby-on-rails-3 - RoR：使用 savon（ruby on rails）连接 affilinet Web 服务（登录功能）时出错-> 反序列化失败

> ID：15326614
> 
> 赞同：1
> 
> 时间：2013-03-10T19:38:05.237
> 
> 标签：ruby-on-rails-3, web-services, deserialization, savon

我尝试通过提供的*登录*功能登录 affilinet 网络服务。我在 Rails 3 环境 (3.0.x) 中工作。我在版本 2 中使用了 ruby​​ on rails gem Savon，而后者又使用肥皂连接到 affilinet。
最新的 wsdl 可以在这里找到[https://api.affili.net/V2.0/Logon.svc?wsdl](https://api.affili.net/V2.0/Logon.svc?wsdl)。
我的代码如下所示：

```
client = Savon.client do
  wsdl "https://api.affili.net/V2.0/Logon.svc?wsdl"
end
message = {'Username' => 'username', 'Password' => 'password', 'WebServiceType' => 'Publisher'}
response = client.call(:logon, :message => message) 
```

Savon 生成的请求：

```
<?xml version="1.0" encoding="UTF-8"?>  
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tns="http://affilinet.framework.webservices/Svc" xmlns:ins3="http://schemas.microsoft.com/2003/10/Serialization/Arrays" xmlns:ins2="http://affilinet.framework.webservices/types" xmlns:ins1="http://schemas.datacontract.org/2004/07/Microsoft.Practices.EnterpriseLibrary.Validation.Integration.WCF" xmlns:ins0="http://www.microsoft.com/practices/EnterpriseLibrary/2007/01/wcf/validation" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">  
  <env:Body>  
    <tns:LogonRequestMsg>  
      <tns:Password>password</tns:Password>  
      <tns:WebServiceType>Publisher</tns:WebServiceType>  
      <tns:Username>username</tns:Username>  
    </tns:LogonRequestMsg>  
  </env:Body>  
</env:Envelope> 
```

将此请求发送到 Web 服务时，我收到此（错误）响应：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
    <s:Body>
      <s:Fault>
        <faultcode xmlns:a="http://schemas.microsoft.com/net/2005/12/windowscommunicationfoundation/dispatcher">a:DeserializationFailed</faultcode>
        <faultstring xml:lang="en-US">The formatter threw an exception while trying to deserialize the message: There was an error while trying to deserialize parameter http://affilinet.framework.webservices/Svc:LogonRequestMsg. The InnerException message was 'Error in line 1 position 775\. 'EndElement' 'LogonRequestMsg' from namespace 'http://affilinet.framework.webservices/Svc' is not expected. Expecting element 'Username | Password | WebServiceType'.'.  Please see InnerException for more details.</faultstring>
        <detail>
          <ExceptionDetail xmlns="http://schemas.datacontract.org/2004/07/System.ServiceModel" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
            <HelpLink i:nil="true"/>
            <InnerException>
              <HelpLink i:nil="true"/>
            <InnerException i:nil="true"/>
            <Message>Error in line 1 position 775\. 'EndElement' 'LogonRequestMsg' from namespace 'http://affilinet.framework.webservices/Svc' is not expected. Expecting element 'Username | Password | WebServiceType'.</Message>
            <StackTrace>   at System.Runtime.Serialization.XmlObjectSerializerReadContext.ThrowRequiredMemberMissingException(XmlReaderDelegator xmlReader, Int32 memberIndex, Int32 requiredIndex, XmlDictionaryString[] memberNames)&#xD; ... (loads more) ...
            </StackTrace>
            <Type>System.ServiceModel.Dispatcher.NetDispatcherFaultException</Type>
          </ExceptionDetail>
        </detail>
      </s:Fault>
    </s:Body>
</s:Envelope> 
```

有什么想法有什么问题吗？

编辑：

soapUI 中的请求如下所示：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:svc="http://affilinet.framework.webservices/Svc" xmlns:typ="http://affilinet.framework.webservices/types">  

<soapenv:Header/>
<soapenv:Body>
  <svc:LogonRequestMsg>
     <!--Optional:-->
     <typ:Username>username</typ:Username>
     <!--Optional:-->
     <typ:Password>password</typ:Password>
     <typ:WebServiceType>Publisher</typ:WebServiceType>
     <!--Optional:-->
     <typ:DeveloperSettings>
        <!--Optional:-->
        <typ:SandboxPublisherID>?</typ:SandboxPublisherID>
     </typ:DeveloperSettings>
     <!--Optional:-->
     <typ:ApplicationSettings>
        <!--Optional:-->
        <typ:ApplicationID>?</typ:ApplicationID>
        <!--Optional:-->
        <typ:DeveloperID>?</typ:DeveloperID>
     </typ:ApplicationSettings>
  </svc:LogonRequestMsg>
</soapenv:Body>
</soapenv:Envelope> 
```

也许请求的差异（由 Savon 和 soapUI 生成）是关键！？尤其是不同的命名空间：svc/typ 与 env/tns。有任何想法吗？如何告诉 Savon 为 LogonRequestMsg 使用 svc 命名空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T14:12:06.380

查看 Affili.net 的 WSDL，它显示用户名、密码、WebserviceType 等具有错误的命名空间。

在再次查看您的示例后为命名空间编辑。用户名、密码和 WebServiceType 在命名空间 ins2="http://affilinet.framework.webservices/types" 中定义，在您的情况下由“ins2”标记。

克服它的快速而肮脏的方法是

```
client = Savon.client do
  wsdl "https://api.affili.net/V2.0/Logon.svc?wsdl"
end
message = {'ins2:Username' => 'username',
           'ins2:Password' => 'password',
           'ins2:WebServiceType' => 'Publisher'}

response = client.call(:logon, :message => message) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-19T13:14:58.637

我认为问题出在命名空间顺序上，在几个请求在命名空间中看到不同的顺序之后。

此代码适用于我（savod 版本 1），覆盖命名空间：

```
 message = { 
              'ins0:Username' => 'XXXXXXX',
              'ins0:Password' => 'XXXXXXX',
              'ins0:WebServiceType' => 'XXXXXX',
              :order!     => ['ins0:Username', 'ins0:Password', 'ins0:WebServiceType']
            }

  @client.wsdl.document = 'https://api.affili.net/V2.0/Logon.svc?wsdl'

  response = @client.request :logon do
    soap.body = message
    soap.namespaces["xmlns:ins0"] = "http://affilinet.framework.webservices/types"
    soap.namespaces["xmlns:ins1"] = "http://schemas.microsoft.com/2003/10/Serialization/Arrays"
    soap.namespaces["xmlns:ins2"] = "http://www.microsoft.com/practices/EnterpriseLibrary/2007/01/wcf/validation"
    soap.namespaces["xmlns:ins3"] = "http://schemas.datacontract.org/2004/07/Microsoft.Practices.EnterpriseLibrary.Validation.Integration.WCF"
  end 
```

# r - 为牛顿法设置公差和最大迭代次数

> ID：15326623
> 
> 赞同：0
> 
> 时间：2013-03-10T19:38:55.380
> 
> 标签：r, max

如何为以下代码设置容差 (1e-08) 和最大迭代次数 (40)？

```
newton<-function(fun, grad, x_0) { 
 xold<-x_0 
 xnew<-xold+1000 
 while(1! = 0){ 
    f <- fun(xold) 
    g <- grad(xold) 
    xnew <- xold-f/g 
    cat("xold, xnew, f, g:",xold,' ',xnew,' ',f,' ',g,"\n") 
    if ((1000+xold) == (1000+xnew)) return(xnew) 
    tmp<-readline("go on?") 
    xold<-xnew 
 } 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:41:21.633

```
newton<-function(fun, grad, x_0,maxiter=40,tol=1e-8) {
 xold<-x_0 
 xnew<-xold+100 # to avoid stopping 
 i<-0 #make counter
 while(i<maxiter){ #do until i=maxiter
    f <- fun(xold) 
    g <- grad(xold) 
    xnew <- xold-f/g 
    cat("xold, xnew, f, g:",xold,' ',xnew,' ',f,' ',g,"\n") 
    #if the absolute difference between old and new value < tol, stop
    if (abs(old-xnew)<tol) return(xnew) 
    tmp<-readline("go on?") 
    xold<-xnew 
    i <- i+1
 } 
} 
```

# android - Audiomanager 和 MediaPlayer 的区别

> ID：15326626
> 
> 赞同：6
> 
> 时间：2013-03-10T19:39:14.537
> 
> 标签：android

谁能解释一下Android`AudioManager`和之间有什么区别？`MediaPlayer`如果我是正确的，那么`AudioManager`只能播放音频，而`MediaPlayer`可以播放音频和视频。但我相信这一定还有更多。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T19:43:34.553

AudioManager 根本不播放声音。它提供对声音设置的访问，但要轻松播放声音，您应该使用 MediaPlayer、SoundPool 或可能的 AudioTrack。

[从文档：](http://developer.android.com/reference/android/media/AudioManager.html)

> AudioManager 提供对音量和振铃模式控制的访问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T19:44:58.587

AudioManager 用于管理音频设置。这包括音量控制和流媒体频道（例如铃声、媒体、通话中等）。

MediaPlayer 用于控制音视频流的播放（如停止、播放、暂停等）。

# jquery - 离开页面时出现JQuery Ajax错误

> ID：15326627
> 
> 赞同：5
> 
> 时间：2013-03-10T19:39:21.533
> 
> 标签：jquery, asynchronous, error-handling

我正在使用以下代码将数据从服务器异步拉入客户端。错误块中的警报报告服务器上发生的错误。但是，如果用户在调用过程中离开页面页面，这个块也会被触发并抛出一个空的警报容器。有什么方法可以更优雅地处理用户离开页面（即在他们离开之前不抛出空警报）？也许通过区分用户已经离开的错误块，而不是服务器上发生的错误？

```
$.ajax({
    type: "GET",
    url: "/handlers/myHandler.ashx",
    async: true,
    dataType: "json",
    data: "var1=test_val&var2=test_val"
    success: function (invoices) {
       //Success block
    },
    error: function (XMLHttpRequest, textStatus, errorThrown) {
        alert(errorThrown);
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-01T00:17:20.550

尝试...

```
if (xhr.status != 0)
  alert(thrownError); 
```

...其中 xhr 是您的 XMLHttpRequest 变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T11:15:38.110

问题解决了..

我设置了一个全局变量：

```
var unloadingState = false; 
```

然后是一个`beforeunload`事件句柄（感谢 Dave！），用于修改变量：

```
$(window).bind("beforeunload", function () {
    unloadingState = true;
}); 
```

最后是 ajax 方法的错误块中的交叉引用：

```
error: function (XMLHttpRequest, textStatus, errorThrown) {
  if (!unloadingState) {
    alert(errorThrown);
  }
} 
```

是的，警报很丑陋，不应该使用！

# java - 使用本机 FS 时的 HBase 批量加载

> ID：15326634
> 
> 赞同：0
> 
> 时间：2013-03-10T19:40:03.310
> 
> 标签：java, hadoop, hbase, bulk-load

我有一大堆 HBase sql 语句，我需要针对现有的 HBase 数据库实例运行这些语句。

SQL 语句是纯文本的，并且数据库在本机文件系统（而不是 HDFS）上运行。因此，我没有运行 Hadoop 实例。

我目前在 hbase shell 上运行这些 SQL 语句，但这个过程真的很慢。我知道如果 Hadoop 正在运行，我可以分配映射器来执行并行插入，但是有没有更快的方法来进行批量加载而不使用 Hadoop 实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T05:42:05.517

由于 Hadoop（更具体地说是 MR）旨在更快地处理批量数据（大数据），因此它适合您的要求。

在 HDFS 上创建 StoreFiles，然后使用 CompleteBulkLoad 方法将数据从 StoreFile 加载到表中。

不使用 Hadoop 实例的任何具体原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T05:48:05.693

HBase 提供 ImportTSV API 用于批量上传

这是 ImportTSv API 的示例

[http://souravgulati.webs.com/apps/forums/topics/show/8617965-hbase-bulk-upload-using-importtsv-in-hbase-table](http://souravgulati.webs.com/apps/forums/topics/show/8617965-hbase-bulk-upload-using-importtsv-in-hbase-table)

在这里，我尝试从 hdfs 上传数据。您可以尝试使用 ImportTSV 从本地文件系统上传数据。如果不起作用，则在 HDFS 之上运行 Hbase

# python - 获取两个字符串参数并返回一个字符串，其中仅包含 python 中两个参数字符串中的字符

> ID：15326636
> 
> 赞同：1
> 
> 时间：2013-03-10T19:40:08.577
> 
> 标签：python

```
def same_letters():

word1 = ''

word2 = ''

word1 = str(input("Please enter first word:"))
word2 = str(input("Please enter second word:"))

if word1 != word2:
    for letter in word1:
        for character in word2:
            word1 = word1.replace(character, "")

print(word1) 
```

这就是我到目前为止所拥有的；我希望能够像这样显示答案：

请输入第一个单词：空格

请输入第二个字：现货

sp

相反，当我运行这个程序时，我得到相反的结果，而不是得到两个字符串参数中的字母，我得到“ace”，如果我切换它，我得到“ot”，我终生无法弄清楚如何显示相同的字符。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T19:41:14.300

您可以使用`set`并获得他们的交集。

```
def same_letters(s1,s2):
    return set(s1).intersection(s2) 
```

# javascript - 如何使用来自其他 SELECT 的值（在 eric hynds 的多选小部件中）使用 javascript 或 jquery 更新 html SELECT 选项

> ID：15326639
> 
> 赞同：0
> 
> 时间：2013-03-10T19:40:15.570
> 
> 标签：javascript, jquery, html, css

我正在使用 Eric Hynds 的 jQuery 多选小部件在同一屏幕上的几个不同部分显示员工列表。我在同一页面上有几个不同的多选，其中一些具有相同的员工。

如果用户在一个多选中选择（或取消选择）一名员工，我需要更新其他员工以反映相同的选择。如果可能的话，我还需要考虑 2 个“optgroups”，但出于此目的可以忽略这些，除非它相对容易处理。

选项可以使用 javascript 或 jquery 刷新，独立于多选小部件，然后可以调用 .refresh 方法来更新小部件。因此，对此的解决方案可能会或可能不会使用小部件中的代码来更新选项。

以下是两个 SELECT 及其选项的示例。布赖恩琼斯出现在两者中。如果在第一个示例中选择了 Brian Jones，我如何在第二个示例中动态选择他（如果可能，将他移动到“分配的员工”组）？如果他未被选中，情况也是如此。

```
<select id="empSelection_01" name="employee_01" multiple="multiple">
    <optgroup label="Unassigned Employees">
        <option value="42954">Smith, Joe</option>
        <option value="30357">Jones, Brian</option>
    </optgroup>
    <optgroup label="Assigned Employees">
        <option value="42900">Brown, Laura</option>
        <option value="30399">Evans, Jessica</option>
    </optgroup>
</select>
<select id="empSelection_02" name="employee_02" multiple="multiple">
    <optgroup label="Unassigned Employees">
        <option value="42954">Doe, Jane</option>
        <option value="30357">Jones, Brian</option>
    </optgroup>
    <optgroup label="Assigned Employees">
        <option value="42900">Hix, Carolyn</option>
        <option value="30399">Evans, Jessica</option>
    </optgroup>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T19:11:46.180

我最终使用了这个 JavaScript，它接收刚刚更改的 SELECT 的 ID，然后使用该 SELECT 中的值来处理屏幕上的所有其他 SELECT：

* * *

```
 function refreshEmps(currID){

 var sel = document.getElementById(currID);
 var opt = sel.options;
 var checkedVals = new Array();

 // save checked values ***************************

 for (i=0; i<opt.length; i++){

   if (opt[i].selected==true) {
         checkedVals[checkedVals.length]=opt[i].value;
   }

 }

 //update remaining SELECT's ***************************

 var ddCounter = 0; //

 while(document.getElementById("employeeDD_" + ddCounter)!=null) {

 var sel2 = document.getElementById("employeeDD_" + ddCounter);

 if (currID!=sel2.id) {

var opt2 = sel2.options;

for (i=0; i<opt2.length; i++){

     for (j=0; j<checkedVals.length; j++) {

      if(opt2[i].value==checkedVals[j]) {       
        opt2[i].disabled=true;
        opt2[i].style.color = 'red';
          }

    }//end for

 }

  }//end if

  ddCounter++;

 }//end WHILE

 $("select").multiselect('refresh');

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:58:44.747

试试这个[小提琴](http://jsfiddle.net/JXTXv/1/)

```
$('#empSelection_01').multiselect({click:function(e){
    var isChecked = $(e.currentTarget).attr("checked")=="checked";
    var labelFrom = isChecked ? 'Unassigned Employees' : 'Assigned Employees';
    var labelTo = !isChecked ? 'Unassigned Employees' : 'Assigned Employees';

    var el = $('#empSelection_02').children('[label="' + labelFrom + '"]').children('[value="' + e.currentTarget.value + '"]');
    el.remove();
    $('#empSelection_02').children('[label="' + labelTo + '"]').append(el);
    if (isChecked) {
        el.attr('selected', 'selected');
    } else {
        el.removeAttr('selected');
    }        
    $('#empSelection_02').multiselect('refresh');
}}); 
```

这是您如何使用此插件进行操作的示例，但这还不足以解决您的问题。您需要一些逻辑来考虑选项，并指出必须在哪些组中找到选项，尤其是在多对多连接可能的情况下。

# python - 如何使用 Python 在我的谷歌融合表中插入一行

> ID：15326640
> 
> 赞同：1
> 
> 时间：2013-03-10T19:40:25.473
> 
> 标签：python, google-api, oauth-2.0, urllib2, google-fusion-tables

我正在开发一个项目，其中一部分涉及从 python 脚本将行插入到项目的 Google Fusion Table 中。在过去的几天里，我一直在试图弄清楚如何做到这一点，我对此感到困惑。

我的研究似乎表明我需要使用 Oauth 2.0 来访问 API。这样做我可以成功获得访问令牌，但我似乎无法成功获得刷新令牌。我不确定这是否会妨碍我成功地将对我的 Fusion Table 的访问与我的 Python 代码集成的能力。

我遇到的第二个问题是我真的不明白如何在我的表中插入一行代码。我在上面找到的大部分材料都来自已弃用的 Fusion Tables SQL API，我并不完全理解新的做法。

我是这类事情的初学者，非常感谢任何帮助我的方向！

编辑：所以到目前为止我工作的代码如下所示：

```
client_id = "<client_i>"
client_secret = "<client_secret>"
table_id = "<table_id>"

access_token = ""
refresh_token = "<refresh_token>"

#   the refresh token is used to request a new access token
data = urllib.urlencode({
  'client_id': client_id,
  'client_secret': client_secret,
  'refresh_token': refresh_token,
  'grant_type': 'refresh_token'})
request = urllib2.Request(
  url='https://accounts.google.com/o/oauth2/token',
  data=data)
request_open = urllib2.urlopen(request)
response = request_open.read()
request_open.close()
tokens = json.loads(response)
access_token = tokens['access_token']

#   Read the table
request_read = urllib2.Request(
  url='https://www.google.com/fusiontables/api/query?%s' % \
    (urllib.urlencode({'access_token': access_token,
                       'sql': 'SELECT * FROM table_id'})))
request_open = urllib2.urlopen(request_read)
response = request_open.read()
request_open.close()
print response 
```

还有我尝试在表中插入新行的代码：

```
date = str(datetime.now().date())
time = str(datetime.now().time())
query = 'INSERT INTO table_id (Date,Time,Saskatoon,Regina,MeadowLake)VALUES(date,time,60.01,60.02,59.99)'
data = urllib2.Request(
  url='https://www.google.com/fusiontables/api/query?%s' % \
    (urllib.urlencode({'access_token': access_token,
                       'sql': query})))
request_open = urllib2.urlopen(data) 
```

当我运行这个时，我得到

> HTTP 错误 400：HTTP GET 只能用于选择查询。

我知道我应该为 INSERT 制作 POST 而不是 GET，我只是不确定我的代码需要更改哪些内容才能实现。对不起，我是菜鸟。

第二次编辑：

很抱歉让这个时间更长，但我觉得展示我到目前为止所取得的成就是恰当的。我切换到图书馆请求，事情变得更容易了，但是我仍然没有成功发布 POST。我用于导入行的新代码如下：

```
def importRows(self):
    print 'IMPORT ROWS'
    date = str(datetime.now().date())
    time = str(datetime.now().time())
    data = {'Date': date,
            'Time': time,
            'Saskatoon': '60.01',
            'Regina': '59.95'}
    url = 'https://www.googleapis.com/upload/fusiontables/v1/tables/%s/import/%s' % \
          (tableid, self.params) # self.params is access token
    importRow = requests.post(url, params=data)

    print importRow.status_code
    print importRow.text 
```

这给了我

```
400
{
 "error": {
  "errors": [
   {
    "domain": "fusiontables",
    "reason": "badImportInputEmpty",
    "message": "Content is empty."
   }
  ],
  "code": 400,
  "message": "Content is empty."
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:51:12.233

> 如果您的应用程序需要离线访问 Google API，则对授权码的请求应包含 access_type 参数，其中该参数的值是离线的。

[https://developers.google.com/accounts/docs/OAuth2WebServer#offline](https://developers.google.com/accounts/docs/OAuth2WebServer#offline)

然后，要使用刷新令牌获取访问令牌，您发送一个 POST 请求，包括`grant_type`value `refresh_token`。

基本上，SQL 的工作方式是使用 SQL 语句的子集发送 POST 请求`https://www.googleapis.com/fusiontables/v1/query?sql=STATEMENT_HERE`

参考

[https://developers.google.com/fusiontables/docs/v1/reference/query](https://developers.google.com/fusiontables/docs/v1/reference/query) [https://developers.google.com/fusiontables/docs/v1/sql-reference](https://developers.google.com/fusiontables/docs/v1/sql-reference)

编辑：

由于您在`urllib2`没有数据参数的情况下使用，因此默认为 GET。要解决此问题，您应该使用另一个允许显式指定方法（如[`requests`](http://docs.python-requests.org/en/latest/)或`httplib`）的 HTTP 库，或者执行以下操作：

```
query = "INSERT INTO %s(EXAMPLE_COL1,EXAMPLE_COL2) VALUES"\
        "('EXAMPLE_INFO1','EXAMPLE_INFO2')" % table_id # Single quotes
opener = urllib2.build_opener(urllib2.HTTPHandler)
request = urllib2.Request('https://www.google.com/fusiontables/api/query?%s' % \
    (urllib.urlencode({'access_token': access_token,
                       'sql': query})),
    headers={'Content-Length':0})      # Manually set length to avoid 411 error
request.get_method = lambda: 'POST'    # Change HTTP request method
response = opener.open(request).read()
print response 
```

需要注意的重要事项：

1.  Monkey 修补方法来做我们想做的事情（POST 带有一个空的主体），否则我们会收到`HTTP Error 400: HTTP GET can only be used for SELECT queries`.

2.  手动指定我们没有 body ( `Content-Length`is `0`) 否则我们会收到`HTTP Error 411: Length Required`。

3.  必须使用**带单引号的双引号**或**转义内引号**以通过查询提交字符串。换句话说，`"INSERT INTO %s(EXAMPLE_COL1,EXAMPLE_COL2) VALUES(EXAMPLE_INFO1,EXAMPLE_INFO2)" % table_id`不起作用。

    如果我们尝试使用上一行，我们会得到类似`HTTP Error 400: Parse error near 'SOME_STRING' (line X, position Y)`

有关使用 urllib2 更改方法的信息，请参阅：

[有没有办法在 python 中做 HTTP PUT](https://stackoverflow.com/questions/111945/is-there-any-way-to-do-http-put-in-python)

# c++ - Friend 函数，预期的 Primary Expression before 。令牌

> ID：15326648
> 
> 赞同：0
> 
> 时间：2013-03-10T19:40:45.363
> 
> 标签：c++, class, friend

所以在单独的头文件中有两个类

顾客。H

```
using namespace std;
#include <iostream>

class Customer{
    friend void Display();
private:
    int number, zipCode;
public:
    Customer(int N, int Z){
    number = N;
    zipCode = Z;
    }
}; 
```

城市。h 使用命名空间标准；#include #include "客户.h"

```
class City{
    friend void Display();
private:
    int zipCode;
    string city, state;
public:
    City(int Z, string C, string S){
        zipCode = Z;
        city = C;
        state = S;
    }
}; 
```

我的 main.cpp 如下

```
#include "City.h"
#include "Customer.h"

void Display(){
        cout<<"Identification Number: "<<Customer.number<<endl
                <<"Zip Code: "<<Customer.zipCode<<endl
                <<"City: "<<City.city<<endl
                <<"State: "<<City.state<<endl;
    }

int main() {
    Customer A(1222422, 44150);
    City B(44150, "Woklahoma", "Kansas");

    Display();

} 
```

我对 c++ 的基础知识很好，但这是我不明白的地方，所以我的具体问题是.... 为什么对于我的 Display 函数的四行，编译器会告诉我“错误：之前的预期主表达式'。' 令牌”

提前致谢， 麦凯尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:42:55.330

您正在尝试从类名访问数据成员

```
Customer.number 
```

你不能这样做。你需要一个`Customer`实例：

```
Customer c;
std::cout << c.number; 
```

您可能想更改`Display()`为

```
void Display(const Customer& c); 
```

然后像这样使用它：

```
Customer A(1222422, 44150);
Display(A); 
```

同样对于`City`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:44:27.173

`Customer`是一种类型。您需要该类型的对象来访问它的`number`成员（其余行相同）。

您可能打算将`Customer`and`City`作为参数`Display`：

```
void Display(Customer customer, City city){
    cout<<"Identification Number: "<<customer.number<<endl
            <<"Zip Code: "<<customer.zipCode<<endl
            <<"City: "<<city.city<<endl
            <<"State: "<<city.state<<endl;
} 
```

然后将您的`Customer`和`City`对象传递给该函数：

```
Display(A, B); 
```

# php - POST 查询后重音自动替换为数字

> ID：15326649
> 
> 赞同：0
> 
> 时间：2013-03-10T19:40:45.563
> 
> 标签：php, encoding, http-post, bitbucket

每当进行提交时，Bitbucket 对个人页面进行的 POST 查询存在问题：重音字符被数字替换。

这是我用于提交的消息：`Démo test éà`

这是我的页面得到的：`Du00e9mo test u00e9u00e0`

*   我尝试使用`uft8_decode`, `utf8_encode`, `iconv`（使用 UTF-8 和 ISO-8859-1）和其他（基于我发现的帖子）
*   我用 UTF-8 保存了我的脚本
*   我尝试使用`header('Content-Type: text/html; charset=UTF-8');`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:56:21.203

如果您从 JSON 编码的字符串中删除反斜杠 \，就会发生这种情况。UTF 编码是正确的（è 是正确的 00e9）。

如果您`stripslashes`在代码中使用，请不要使用它，或者*在* `json_decode`.

这是流氓`stripslashes`会做的事情：

```
<?php print json_decode(stripslashes(json_encode("Démo test éà"))) . "\n"; ?>

Du00e9mo test u00e9u00e0 
```

如果您无法控制界面，您可以尝试反向运行该过程以获取正确的字符串。这有点可怕，而且不是很健壮，所以我只将它用作**最后的手段**：

```
<?php

$string = "Du00e9mo test u00e9u00e0";

$correct = preg_replace("/u([0-9a-f][0-9a-f][0-9a-f][0-9a-f])/", '\\u\\1', json_encode($string));

$string = json_decode($correct);

print "Output: $string\n";

?>

Output: Démo test éà 
```

# c++ - 如何将数字乘以通过引用传递的函数

> ID：15326651
> 
> 赞同：0
> 
> 时间：2013-03-10T19:40:49.520
> 
> 标签：c++, function, parameters, typedef

我的主要方法和所有其他功能上方有以下代码：

```
typedef double (*FUNC)(double);

double integrate(FUNC f, double a, double b){
double sum = 0;
for(int i=a; i<=b; i++){
    sum = sum + (f * .0001); //error occurs here, red squiggly line under "f"
}
    return sum;
} 
```

在 Microsoft Visual Studio C++ 编译器中，出现错误：表达式必须具有算术或枚举类型。我在评论中指出了错误来自上面的位置。有人可以向我解释为什么会出现此错误以及如何解决此错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:52:35.007

我认为您正在尝试整合from to`f(x)`的值？`x``a``b`

在这种情况下，您的代码是完全不正确的。

您的 0.0001 似乎表明您实际上正在尝试使用 10000 步，在这种情况下，您将使用以下内容：

```
const int steps = 10000;
double x = a;
double delta = (b - a) / steps;
for(int i = 0; i < steps; i++, x += delta) 
```

然后，您将计算使用调用`f(x)`来调用函数指针，并将其相加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T19:43:27.370

尝试改用这个

```
 sum = sum + f(.0001); 
```

将函数指针乘以分数不会那么顺利。

# javascript - iis找不到javascript文件

> ID：15326655
> 
> 赞同：0
> 
> 时间：2013-03-10T19:41:15.063
> 
> 标签：javascript, asp.net, iis, master-pages

我的 javascript 文件有问题，我引用了母版页。

这是代码：

```
<head runat="server">
   <type="text/javascript" src="../Jquery1.6_vsdoc/jquery-1.7.1.min.js"></script>
   <script type="text/javascript" src="main.js"></script>
</head> 
```

jquery 文件工作正常，但 main.js 不是。当我在 Web 浏览器上打开 aspex 文件并查看源代码并尝试查看 main.js 文件中的代码时，iis 会显示此消息：

> HTTP 错误 404.0 - 未找到 您要查找的资源已被删除、名称已更改或暂时不可用。

我在这里做什么？

文件上的一些信息（如果有帮助的话）：

1.  他是母版页的同一目录
2.  他只在 1 个母版页中被引用。

我正在使用 Visual Studio 2012（对不起我的英语）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:50:04.253

在母版页方案中使用[Page.ResolveUrl()](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveurl.aspx)

所以你的参考应该是这样的

```
 <type="text/javascript" src="<%= Page.ResolveUrl("~/Jquery1.6_vsdoc/jquery-1.7.1.min.js") %>"></script>
   <script type="text/javascript" src="<%= Page.ResolveUrl("~/main.js") %>"></script> 
```

这将确保页面正确映射，因为子页面可能与母版页不在同一位置

# python - 为 raven 添加自定义标签

> ID：15326658
> 
> 赞同：10
> 
> 时间：2013-03-10T19:41:28.293
> 
> 标签：python, logging, sentry, raven

如何添加自定义标签以让 raven 将其设置为哨兵？

当我在 django 中使用 raven 时，有几个标签，如操作系统、浏览器等。

但我想自己使用 raven 添加这样的标签，没有 django。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T18:38:58.687

如果我正确理解了这个问题，您可以将`extra`字典中的任何内容传递给哨兵，请参阅[raven docs](http://raven.readthedocs.org/en/latest/config/django.html#usage)。

您还可以通过`capture*`方法构造消息（也可以传递`extra`）：

*   [捕获](http://raven.readthedocs.org/en/latest/usage.html?highlight=capture#raven.Client.capture)
*   [捕获异常](http://raven.readthedocs.org/en/latest/usage.html?highlight=capture#raven.Client.captureException)
*   [捕获消息](http://raven.readthedocs.org/en/latest/usage.html?highlight=capture#raven.Client.captureMessage)
*   [捕获查询](http://raven.readthedocs.org/en/latest/usage.html?highlight=capture#raven.Client.captureQuery)

顺便说一句，操作系统，浏览器...等参数哨兵从传递的`request`对象中获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-22T09:30:38.833

这很容易。只需使用 Client.capture

```
from raven import Client
client = Client("https://<key>:<secret>@sentry.io/<project>")
client.capture("raven.events.Message", message='foo_bar', data={
    'tags': {
        'tag_name': "tag_value"
    }
}) 
```

# facebook - 如何链接到与应用程序无关的 Facebook 页面？

> ID：15326659
> 
> 赞同：1
> 
> 时间：2013-03-10T19:41:30.573
> 
> 标签：facebook, wordpress, facebook-page

我在我的 WordPress 网站上安装了 Facebook 插件，并且因为它需要 Facebook 应用程序才能工作，所以我创建了一个。此应用程序的目的只是将 WordPress 网站与 Facebook 集成。现在，我有该网站的 Facebook 粉丝页面，但我找不到将其与应用程序关联的方法，除非我将其更改为应用程序页面（事实并非如此，我只为插件创建了应用程序去工作）。就好像粉丝页面与网站完全无关，因为应用程序在它们之间没有任何关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:16:07.100

您与应用页面没有任何关系。

您需要获取[应用程序 ID 及其密钥](https://developers.facebook.com/apps)，以便填写插件配置下的相应表单。

请遵循[安装指南](https://developers.facebook.com/wordpress/)。

# c# - 如何仅更改突出显示文本的字体？

> ID：15326661
> 
> 赞同：1
> 
> 时间：2013-03-10T19:41:50.540
> 
> 标签：c#, windows-phone-8

我正在制作一个文字处理器，并希望用户能够通过点击/按住/拖动来仅将您在 Windows Phone 上选择的文本加粗。我知道如何使用 Filebox.SelectedText 检测用户选择了哪些文本（filebox 是文本框的名称），但不知道从那里去哪里 - 我如何获取选定的文本并只选择该文本文字加粗？

注意：我使用的是 ComponentOne 的富文本框控件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:52:19.647

您可以使用该`RichTextBox.Selection`物业。

例如：

```
private void ModifySelectedText()
{
   // Determine if text is selected in the control. 
   if (richTextBox1.SelectionLength > 0)
   {
      // Set the color of the selected text in the control.
      richTextBox1.SelectionColor = Color.Red;
      // Set the font of the selected text to bold and underlined.
      richTextBox1.SelectionFont = new Font("Arial",10,FontStyle.Bold | FontStyle.Underline);
      // Protect the selected text from modification.
      richTextBox1.SelectionProtected = true;
   }
} 
```

# linux - 无法使用 Cygwin 访问 sys/socket.h

> ID：15326663
> 
> 赞同：0
> 
> 时间：2013-03-10T19:41:55.593
> 
> 标签：linux, gcc, g++, cygwin, mingw

我需要在安装了 MicGW GCC 和 G++ 4.7 的 Windows 8 中编译 C/C++ pthread 和套接字代码。当我使用编译我的测试代码时`g++ test.cpp -o test`

**代码是：**

```
#include<iostream>
#include<sys/socket.h>
#include<sys/types.h>
using namespace std;

int main() {
     cout<<"Got Socket";
} 
```

这会产生错误`fatal error: sys/socket.h not found`，并且同样会发生`types.h`

我发现的错误是 cygwin 正在使用 MicGW GCC 和 g++，但我希望它使用自己的而不是 MinGW，这样我就可以包含 Linux 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T19:55:59.493

我无法在我的 Cygwin 上重现您的问题。

/usr/include/sys 中是否存在标头？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T20:39:58.490

如果不存在，请搜索该`sys`文件夹下载一个手动将其复制到那里。`[installed directory]/usr/include``socket.h`

不要害怕手工工作;-)

# testing - 为红黑树生成测试用例

> ID：15326665
> 
> 赞同：3
> 
> 时间：2013-03-10T19:42:02.037
> 
> 标签：testing, functional-testing

如何在 C 中为我的红黑树实现生成测试用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-21T05:32:21.193

测试用例特定于您的实现，但我认为学习的一个好技巧是尝试随机插入和删除，然后在调试模式下使用 Gui 或控制台打印显示您的树。（小心使用好的调试器）。要检查您的答案是否正确，请尝试从该网站 [https://www.cs.usfca.edu/~galles/visualization/RedBlack.html进行可视化](https://www.cs.usfca.edu/~galles/visualization/RedBlack.html)

# c# - c#如果输入特定键，设置端口号（整数值）？C＃

> ID：15326666
> 
> 赞同：0
> 
> 时间：2013-03-10T19:42:02.660
> 
> 标签：c#, string, set

如果在文本中找到某个键​​，我试图能够存储一个整数。

键可以是字符串中的任何位置，例如：

```
-p 40 Bond "James bond" 
```

或者

```
bond "james bond" -p 40 
```

或者

```
bond -p 40 "james bond" 
```

所以 int 端口 = 40。

这是我的尝试，但是当端口返回为 0 时，它已经很糟糕了。

```
if (mystring.Contains("-p"))
    {
        string sport = "";
        string[] splits = mystring.Split(' ');
        for (int i = 0; i < splits.Length; i++)
        {
            if (splits[i].Contains(" "))
                sport = splits[i].Trim();
        }

        int.TryParse(sport, out port);

        Console.WriteLine(port);
        return;
    } 
```

端口号紧跟在-p 之后。是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:45:48.790

像这样的东西应该工作：

```
string[] splits = mystring.Split(' ');
for (int i = 0; i < splits.Length; i++)
{
    if (splits[i] == "-p")
    {
        sport = int.Parse(splits[i+1]);
    }
} 
```

一旦您检测到`-p`您想要将*下一个*条目解析为您的端口值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:59:49.583

您可以使用正则表达式，例如

```
 string pattern = @"-p (\d+)";
        string input = "sdf -p 400 sdfa";

        var matched = Regex.Match(input, pattern);
        var port = matched.Groups[1].Value; 
```

端口会给 400

# java - ((某物).this).something_else

> ID：15326676
> 
> 赞同：2
> 
> 时间：2013-03-10T19:43:21.427
> 
> 标签：java

有人可以解释以下表达式的作用吗？

```
System.out.println(((Window)this).size) 
```

假设我们有这个：

```
System.out.println(this.size) 
```

我理解这个表达式的作用，但我不明白它的作用，所以问题是关键字 before 的`(Window)`含义是什么（假设它是我在这个例子中使用的类的超类）？`(Window)``this``Window`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:46:29.997

该`(Window) this`表达式正在转换对类的`this`引用`Window`。*强制*转换将对象引用从一个类转换为另一个（相关）类。例如，在 Java 中，经常将`Graphics`对象转换为`Graphics2D`对象，如下所示：

```
Graphics g;
Graphics2D g2d = (Graphics2D) g; 
```

您认为这`Window`是相关类的超类是正确的；如果它是一个不相关的类，你会得到一个编译时错误。

转换为子类（如上面的图形对象示例）可以为您提供更多功能。例如，`Graphics2D`对象具有`Graphics`对象没有的方法（例如，`fill`和`setRenderingHint`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T19:46:31.023

它是类型转换......就像你做的`integer`那样`float`

```
float b= (float)1; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-10T20:02:21.737

一般来说是没有意义的。

我认为这在以下场景中会很有用：

```
class P {
    protected String size = "P - Size";
}

class C extends P {
    protected String size = "C - Size";

    public void m() {
        System.out.println(this.size);
        System.out.println(((P)this).size);
    }

    public static void main(String... args) {
        new C().m();
    }
} 
```

这里的输出是：

```
C - 尺寸
P - 尺寸

```

因此，需要显式强制转换（对其自己的父级）才能访问父级中的字段。

# c++ - 用户空间线程库

> ID：15326677
> 
> 赞同：0
> 
> 时间：2013-03-10T19:43:22.287
> 
> 标签：c++, multithreading, scheduling, preemptive

我想知道哪些用户空间线程库（用于标准 C++）允许对应用程序级别的抢占式调度进行细粒度控制。目标平台是 POSIX，但拥有跨平台解决方案会特别好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T23:06:20.883

如果设置线程的优先级就足够了，可以使用 pthreads：[How to increase thread priority in pthreads?](https://stackoverflow.com/questions/3649281/how-to-increase-thread-priority-in-pthreads) . 如果您希望能够手动调度，那么您应该使用协作线程，例如 longjump 或[http://www.gnu.org/software/pth/pth-manual.html](http://www.gnu.org/software/pth/pth-manual.html)。要使用多个处理器，您将需要内核线程，您可以通过 pthreads 或 OpenMP 获得这些线程。

基本上，您最初应该生成几个内核线程，固定它们，然后在内核线程之上运行额外的协作线程。请注意，除非您使用计时器事件实现抢占，否则协作线程是非抢占的，但内核线程将被抢占。一些协作线程方案不适用于 C++，特别是它们在切换时可能会调用堆栈上的变量的析构函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:59:28.313

C++11 标准库支持线程，认为它依赖于 Linux 上的 pthreads。您也可以直接使用 pthreads（它是用 C 实现的）。如果你想要一些可移植的东西——Qt 有很好的线程支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-17T20:51:16.693

[Portable Runtime System](https://github.com/dexter0/prs)具有可定制的用户空间抢占式调度，但是是用 C 编写的。

# ruby - 寻求更好的 virtualenv/rvm/zsh 条件集成

> ID：15326683
> 
> 赞同：1
> 
> 时间：2013-03-10T19:43:39.623
> 
> 标签：ruby, rvm, zsh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T08:47:08.743

You've got this:

```
if which rvm-prompt &> /dev/null; then
  if [ $(rvm-prompt i v g s) != "system" ]; then
    rvm_ruby='%{$PR_RED%}‹$(rvm-prompt i v g s)›%{$PR_NO_COLOR%}'
  fi
else
  # We don't have `rvm-prompt`, try using `rbenv` instead.
fi 
```

Let's have a look at what this is actually doing. When you open a new terminal, `zsh` loads a bunch of files, including `~/.zshrc`. In your `~/.zshrc`, you're `source`ing the `theme`. Thus, as `zsh` loads, it runs through the edit you've made.

The first thing it'll check is whether or not it can find `rvm-prompt` using the `zsh` [builtin] `which`. It does this by checking the `return code` of `which` (if `0`, continue). (Not finding `rvm-prompt` is a different issue, and not really related to this answer).

If we **do** find `rvm-prompt`, using your edit we then examine whether or not the output of `rvm-prompt i v g s` is `system`. It's not, so we set `$rvm_ruby` to **contain a call to `rvm-prompt`**.

Then, `zsh` continues loading the theme, finally finishing and setting `$PROMPT` to a bunch of stuff, **including a call to `rvm-prompt`**. It's very useful to remember that `zsh` does **not** re-examine the theme logic! (That's why we need to `source ~/path/to/theme` after editing it)!

So what's the problem? If `rvm-prompt` does not say `system` **on shell startup**, we use output from `rvm-prompt` for the remainder of the session in our prompt. (If `rvm-prompt` *was* system, we wouldn't display any `rvm` indicator in our prompt... because `rvm_ruby` is left blank!).

Now that we understand what's happening, we can work on fixing it. There are two approaches I can think of.

### 1\. Strip the word `system` out of the prompt:

```
if which rvm-prompt &> /dev/null; then
  rvm_ruby='%{$PR_RED%}‹$(rvm-prompt i v g s | sed -e "s/system//")›%{$PR_NO_COLOR%}'
else
  # We don't have `rvm-prompt`, try using `rbenv` instead.
fi 
```

This works, but will display a (red) `<>` in your prompt when `rvm-prompt` is `system`:

```
╭─@charmander.local ~ ‹ruby-1.9.3›
╰─ rvm default
╭─@charmander.local ~ ‹ruby-1.9.3›
╰─ rvm use system
Now using system ruby.
╭─@charmander.local ~ ‹›
╰─ 
```

You might find this useful. I think it would annoy me.

### 2\. Use a smarter `$PROMPT`: write a function.

In your `theme`:

```
function current_rvm() {
  if which rvm-prompt &> /dev/null; then
    if [ $(rvm-prompt i v g s) != "system" ]; then
      # The double quotes make it work, single quotes do not work.
      echo "%{$PR_RED%}‹$(rvm-prompt i v g s)›%{$PR_NO_COLOR%}"
    else
      # `rvm-prompt` is `system`
      echo ''
    fi
  else
    # We don't have `rvm-prompt`, try using `rbenv` instead.
  fi
}
local rvm_ruby='$(current_rvm)' 
```

This should work happily for you:

```
╭─@charmander.local ~ ‹ruby-1.9.3›
╰─ rvm use system
Now using system ruby.
╭─@charmander.local ~
╰─ rvm use default
Using /Users/simont/.rvm/gems/ruby-1.9.3-p362
╭─@charmander.local ~ ‹ruby-1.9.3›
╰─ 
```

# javascript - 任何可以使用 Phonegap + JQuery Mobile 完成的最终微调？

> ID：15326684
> 
> 赞同：4
> 
> 时间：2013-03-10T19:43:40.337
> 
> 标签：javascript, jquery, performance, cordova, jquery-mobile

我已经浏览了这个站点和许多其他站点，以寻找有关 JQuery、JQuery Mobile 和 Phonegap 的性能提示。我`data-role="page"`在 1 个 HTML 文件中有 8 个页面，在一个单独的 HTML 文件中有另一个页面，用于加载 Facebook for Phonegap Build 插件文件。我在带 ICS 的 Trio Stealth Pro 9.7 平板电脑和带 Froyo 的 LG Optimus V 手机上使用 JQuery 1.9.1、JQuery Mobile 1.3.0 和 Phonegap Build。我发现了很多提示，但是在我的 UX 审查之后，由于页面加载和按钮推送的无响应性，我的应用程序在 Android 上被认为是不可接受的。

我不得不同意。第一次通过应用程序，根据简单的控制台检测，每个页面加载大约需要 3700 毫秒。第二次到一个页面时，这会下降到大约 1900 毫秒，这对我来说是可以的。但是，每次重新加载应用程序时，这都会重置为 3700 毫秒。我只希望每次执行的任何 DOM 索引/搜索/JS 编译都可以被缓存，或者我可以中断所有 JQuery 后端进程，因为我在 UI 组件之外使用的不多。我已禁用 AJAX 导航。我尝试禁用页面转换，但发现`$.mobile.transitionFallbacks.*`非常有帮助，我认为完全禁用转换没有任何好处。我只使用事件来尝试显式打开和关闭加载图标。我真的不使用其他任何 JQuery Mobile。不过，我的 DOM 大小是 1125 个对象。

如果我无法解决这些页面加载问题，我将不得不为 Android 和 iOS 提供原生支持，而且我不期待 Objective C ......

这是我到目前为止所做的：

1.  页眉加载：

    ```
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <title>Title</title>
    <link href="jquery-mobile/mine.css" rel="stylesheet" type="text/css"/>
    <link href="jquery-mobile/jquery.mobile.structure-1.3.0.min.css" rel="stylesheet" type="text/css"/>
    <script src='jquery-mobile/fastclick.js' type='application/javascript'></script>
    <script src="jquery-mobile/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).bind("mobileinit", function(){
        $.mobile.ajaxEnabled = false;
        $.mobile.pushStateEnabled = false;
        $.mobile.touchOverflowEnabled = false;
        $.mobile.defaultPageTransition  = 'slide';
        $.mobile.defaultDialogTransition = 'pop';
        $.mobile.transitionFallbacks.slide = 'none';
        $.mobile.transitionFallbacks.pop = 'none';
        $.mobile.buttonMarkup.hoverDelay = 0;
        $.mobile.phonegapNavigationEnabled = true;
    });
    </script>
    <script src="jquery-mobile/jquery.mobile-1.3.0.min.js" type="text/javascript"></script>
    <script src="jquery-mobile/mine.js" type="text/javascript"></script>
    <script src="phonegap.js"></script> 
    ```

2.  我已经删除了我的 HTML 中的所有 onClick。

3.  我已经缓存了所有 JQuery 调用。

    ```
    var $activityCheckboxes = $('#activityCheckboxes'); 
    ```

4.  我将 JQuery 调用限制为仅按 ID 引用。

5.  我已将所有呼叫限制为`localStorage`.

6.  我已经尽可能地限制了所有字符串操作，例如 concat 等。我仍然使用`+=`而不是将数组推满并加入它，因为我发现的数据表明它`+=`实际上更快。

7.  我已经缩小了我的 CSS 和 Javascript。我即将尝试 HeadJS 延迟加载（并行加载）。

8.  我正在使用快速点击。

9.  就像我上面说的，我尝试禁用所有页面转换。

10.  我关闭了`event.preventDefault(); return false;`除 pagecreate 之外的所有事件。

以下是我的活动：

```
$(document).delegate("#page", "pagecreate", function () {
    validateValues();
    validateActivitiesInstructions();
    validateAddNewInstructions();
    updateSettings();
});

$(document).delegate("#page", "pageshow", function () {
    $.mobile.loading('hide');
    event.preventDefault();
    return false;
});

$(document).delegate("#about", "pageshow", function () {
    $.mobile.loading('hide');
    event.preventDefault();
    return false;
});

$(document).delegate("#explanation", "pageshow", function () {
    $.mobile.loading('hide');
    event.preventDefault();
    return false;
});

$(document).delegate("#settings", "pageshow", function () {
    $.mobile.loading('hide');
    event.preventDefault();
    return false;
});

window.addEventListener('load', function () {
    new FastClick(document.body);
    event.preventDefault();
    return false;
}, false); 
```

我还能做些什么来减少初始页面加载时间并可能提高按钮响应能力？我应该将我的 8 个页面拆分为单独的 HTML 文件吗？任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T21:31:29.233

好的，我已经尝试了我能想到的每一种排列方式以及上面的内容，并且使用 head.js 似乎是我今天要做的最好的事情。感谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-19T23:20:17.077

另一件要尝试的事情是尝试使用 jQuery Mobile“自定义下载构建器”。摆脱您不需要的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T17:53:10.123

您可能需要考虑将所有 JS 资产放在页面底部。脚本引起的问题是它们会阻止并行下载。HTTP/1.1 规范建议浏览器每个主机名并行下载不超过两个组件。如果您从多个主机名提供图像，则可以同时进行两次以上的下载。

但是，在下载脚本时，浏览器不会启动任何其他下载，即使在不同的主机名上也是如此。

您可能还希望将一些文件连接在一起并缩小生成的文件。较少的 HTTP 请求有时可以为您节省一些加载时间。但是要小心在 http 请求和文件大小之间找到一个很好的平衡点。如果全局文件变得太大，它本身就会成为一个阻塞器，尤其是当你在 dom 就绪时触发大量事件时。

# java - 如何让 GUI 等待用户输入？

> ID：15326687
> 
> 赞同：0
> 
> 时间：2013-03-10T19:43:56.343
> 
> 标签：java, user-interface, user-input

我是一个相当基本的程序员，被指派制作一个 GUI 程序，而没有任何创建 GUI 的经验。使用 NetBeans，我设法设计了我认为 GUI 应该是什么样子，以及一些按钮在按下时应该做什么，但是主程序在继续之前不会等待用户输入。我的问题是，如何让这个程序等待输入？

```
 public class UnoMain {

    public static void main(String args[]) {
        UnoGUI form = new UnoGUI(); // GUI class instance
        // NetBeans allowed me to design some dialog boxes alongside the main JFrame, so
        form.gameSetupDialog.setVisible(true); // This is how I'm trying to use a dialog box

        /* Right around here is the first part of the problem.
         * I don't know how to make the program wait for the dialog to complete.
         * It should wait for a submission by a button named playerCountButton.
         * After the dialog is complete it's supposed to hide too but it doesn't do that either. */

        Uno Game = new Uno(form.Players); // Game instance is started
        form.setVisible(true); // Main GUI made visible
        boolean beingPlayed = true; // Variable dictating if player still wishes to play.
        form.playerCountLabel.setText("Players: " + Game.Players.size()); // A GUI label reflects the number of players input by the user in the dialog box.

        while (beingPlayed) {
            if (!Game.getCompleted()) // While the game runs, two general functions are repeatedly called.
            {

                Player activePlayer = Game.Players.get(Game.getWhoseTurn());
                // There are CPU players, which do their thing automatically...
                Game.Turn(activePlayer);
                // And human players which require input before continuing.

                /* Second part of the problem:
                 * if activePlayer's strategy == manual/human
                 *   wait for GUI input from either a button named 
                 *   playButton or a button named passButton */

                Game.advanceTurn();
                // GUI updating code //

            }
        }
    }
} 
```

我花了大约三天时间试图弄清楚如何集成我的代码和 GUI，所以如果有人能告诉我如何让这件事发挥作用，我将不胜感激。如果您需要任何其他信息来帮助我，请询问。

编辑：基本上，教授让我们用 GUI 制作 Uno 游戏。可以有计算机和人类玩家，其数量由用户在游戏开始时确定。我一开始基于控制台编写了整个游戏的代码，以使游戏的核心能够正常工作，并从那以后尝试设计一个 GUI；目前，此 GUI 仅在游戏运行时显示有关游戏的信息，但我不确定如何允许代码等待并接收来自 GUI 的输入，而无需程序提前充电。我调查了其他 StackOverflow 问题，例如[this](https://stackoverflow.com/questions/3968424/how-to-have-procedural-code-wait-for-user-input-from-a-gui-before-continuing?rq=1)、[this](https://stackoverflow.com/questions/7229788/how-to-wait-for-input-in-a-text-field)、[this](https://stackoverflow.com/questions/6935918/swing-gui-doesnt-wait-for-user-input)或[this](https://stackoverflow.com/questions/7778441/how-to-stop-java-from-running-the-entire-code-with-out-waiting-for-gui-input-fro)，但我无法理解如何将答案应用于我自己的代码。如果可能的话，我想要一个类似于链接中答案的答案（我可以检查和/或使用的代码答案）。如果我听起来要求很高或没有受过教育且令人困惑，我深表歉意；我已经在这个项目上努力工作了几个星期，现在明天就到期了，我一直在强调，因为在我弄清楚之前我无法前进。

**TL;DR** - 如何让我的主程序等待并监听按钮单击事件？我应该使用模式对话框，还是有其他方法可以做到这一点？无论哪种情况，都需要更改哪些代码才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:21:01.387

与通常具有明确定义的执行路径的基于控制台的编程不同，GUI 应用程序在事件驱动的环境中运行。事件从外部进来，你对它们做出反应。可能会发生多种类型的事件，但通常我们对用户通过鼠标单击和键盘输入生成的事件感兴趣。

这改变了 GUI 应用程序的工作方式。

例如，您将需要摆脱您的 while 循环，因为这在 GUI 环境中是一件非常危险的事情，因为它通常会“冻结”应用程序，使其看起来像您的应用程序已挂起（本质上它有）。

相反，您会在 UI 控件上提供大量侦听器，这些侦听器会响应用户输入并更新某种模型，这可能会影响 UI 上的其他控件。

因此，要尝试回答您的问题，您有点不要（等待用户输入），应用程序已经存在，但是您通过侦听器捕获该输入并根据需要对它们采取行动。

# r - 如何计算 R 中的文本行数？

> ID：15326689
> 
> 赞同：3
> 
> 时间：2013-03-10T19:44:00.037
> 
> 标签：r, text, count

我想使用 R 计算不同发言者从文本中说出的行数（它是议会演讲记录的抄本）。基本文本如下所示：

```
MR. JOHN: This activity has been going on in Tororo and I took it up with the office of the DPC. He told me that he was not aware of it.
MS. SMITH: Yes, I am aware of that. 
MR. LEHMAN: Therefore, I am seeking your guidance, Madam Speaker, and requesting that you re-assign the duty.  
MR. JOHN: Thank you 
```

在文档中，每个发言者都有一个以 MR/MS 开头且始终大写的标识符。我想创建一个数据集，该数据集计算文档中每次发言时每个发言者所说的行数，这样上述文本将导致：

```
MR. JOHN: 2
MS. SMITH: 1
MR. LEHMAN: 2
MR. JOHN: 1 
```

感谢使用 R 的指针！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-10T19:47:11.677

您可以使用该模式`:`来拆分字符串，然后使用`table`：

```
table(sapply(strsplit(x, ":"), "[[", 1))
#   MR. JOHN MR. LEHMAN  MS. SMITH 
#          2          1          1 
```

> strsplit - 拆分字符串`:`并生成一个列表
> sapply 与 [[ - 选择列表的第一部分元素
> - 获取频率

**编辑：**遵循 OP 的评论。您可以将成绩单保存在*文本文件*中，并用于`readLines`阅读 R 中的文本。

```
tt <- readLines("./tmp.txt") 
```

现在，我们必须找到一种模式，通过该模式来过滤此文本，仅针对那些带有发言者姓名的行。根据我在您链接的成绩单中看到的内容，我可以想到两种方法。

*   检查 a`:`然后*往后*看，`:`看它是否是`A-Z`or `[:punct:]`（也就是说，如果出现在 the 之前的字符`:`是任何大写字母或任何标点符号 - 这是因为其中一些在`)`之前有 a `:`）。

可以使用`strsplit`后跟`sapply`（如下图）

**使用 strsplit：**

```
# filter tt by pattern
tt.f <- tt[grepl("(?<=[A-Z[:punct:]]):", tt, perl = TRUE)]
# Now you should only have the required lines, use the command above:

out <- table(sapply(strsplit(tt.f, ":"), "[[", 1)) 
```

还有其他可能的方法（`gsub`例如使用：）或替代模式。但这应该让您对这种方法有所了解。如果模式应该不同，那么您应该更改它以捕获所有必需的行。

当然，这假设没有其他行，例如，像这样：

```
"Mr. Chariman, whatever (bla bla): It is not a problem" 
```

因为我们的模式会给 TRUE `):`。如果在文本中发生这种情况，您将必须找到更好的模式。

# elasticsearch - ElasticSearch - 仅查询非空的特定数组元素

> ID：15326692
> 
> 赞同：0
> 
> 时间：2013-03-10T19:44:17.980
> 
> 标签：elasticsearch

我对 ES 比较陌生，很难找到关于查询 dsl 的非常好的参考资料或教程。

我们有以下示例的文档类型。因此，我希望进行的查询是：“返回所有具有至少一个实体记录的 email_package 记录（'entities' 数组中的一个记录）。” 是的，我想要完整的“电子邮件”记录。

有人可以帮忙吗？此外，如果您可以在某处指向解决此类问题的参考或教程或食谱，那也将不胜感激。

```
"email_package": {
                    "email": {
                        "date": "2007-02-13T18:24:22-04:00",
                        "subject": "this is the subject",
                        "body": "this is the body"
                    },
                    "entities": [
                        {
                            "Louisville": {
                                "City": "South"
                            }
                        },
                        {
                            "Memphis": {
                                "City": "South"
                            }
                        }
                    ]
               }
                // more 'email_package records follow... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T15:53:59.690

您的文档有点问题，因为您似乎在嵌套对象并给它们不同的名称。如果您不受当前结构的约束，我会将映射更改为更易于管理的内容，并且查询将是直截了当的，例如：

```
"email_package": {
    "email": {
        "body": "this is the body1", 
        "date": "2007-02-13T18:24:22-04:00", 
        "subject": "this is the subject"
    }, 
    "entities": [
        {
            "name": "Louisville"
            "City": "South", 
         }, 
        {
            "name": "Memphis"                 
            "City": "South", 
        }
    ]
} 
```

询问：

```
{ "filter": {
    "exists": {
        "field": "email_package.entities.name"
    }
 } 
```

# c - 如何拥有通用运算符变量？

> ID：15326693
> 
> 赞同：2
> 
> 时间：2013-03-10T19:44:20.380
> 
> 标签：c, operators

这可能是一个新手问题，我之前看到过类似的问题，但我希望有人能帮助我。下面是一个小的（希望是）说明性代码。我想让两个函数共享一些代码。他们都会有一个测试，归结为：if（int operator int）。应该可以用指针来描述操作符，然后在测试中使用指针指向的东西，不应该吗？

```
func1(){
  func3(1)
}

func2(){
  func3(2);
}

func3(int type){
  char *op;
  int value1;
  int value2;
  switch (type){
  case 1:
        op = ">";
        value1 = 1;
        value2 = 3;
        break;
  case 2: 
       op = "=";
       value1 = 2;
       value2 = 5;
       break; 
 }
 if (value1 *op value2){
     do something
 }
} 
```

我发现 > 在文本到二进制计算器中被转换为 62（十进制），但这打印出 60 - 为什么？

```
char *p = "<";
printf("%d\n", *p); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:47:45.393

您实际上想要使用函数指针......您不能简单地使用 a`char`成为一个函数，因为 char 值等同于运算符的标记。像您尝试的令牌替换只能使用预处理器完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:52:00.190

你不能完全按照你写的那样去做。但它应该可以使用函数指针。这是您可能能够做到的一种方法：

```
func1(){
  func3(1)
}

func2(){
  func3(2);
}
typedef (int *myOperator)(int, int);
int operatorGt(int a, int b) {
  return a > b;
}

int operatorEq(int a, int b) {
  return a = b;
}

func3(int type){
  myOperator op = NULL;
  int value1;
  int value2;
  switch (type){
  case 1:
        op = &operatorGt;
        value1 = 1;
        value2 = 3;
        break;
  case 2: 
       op = &operatorEq;
       value1 = 2;
       value2 = 5;
       break; 
 }
 if (NULL != op && op(value1, value2)){
     do something
 }
} 
```

我不保证这将编译或工作 - 但该方法更有可能工作。我还没有编译它——所以可能会有一些编译器错误和/或警告需要为你修复。不想让它太容易：D

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T19:52:22.713

> 应该可以用指针来描述操作符，然后在测试中使用指针指向的东西，不应该吗？

不用担心，不可能使用指针引用/取消引用运算符，因为运算符与数据类型完全不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T21:01:47.037

正如其他人所说，您不能直接获取 C 运算符的地址，但可以获取仅用于使用运算符的函数的地址。由于操作符的数量是有限的，你可以——排序——将一个操作符转换为一个指针，如下所示：

```
#define DECLARE_OPFN(name, operator) bool op_##name(int op1, int op2) { \
  return op1 operator op2; \
}

DECLARE_OPFN(lt, <)
DECLARE_OPFN(le, <=)
DECLARE_OPFN(gt, >)
DECLARE_OPFN(ge, >=)
DECLARE_OPFN(eq, ==)
DECLARE_OPFN(ne, !=)

typedef bool (*opfn_type)(int, int);

opfn_type get_opfn(char *op)
{
  static const struct {
    const char *str;
    bool (*op)(int, int);
  } all_ops[]  = { {"<", op_lt}, {"<=", op_le}, {">", op_gt}, {">=", op_ge},
                   {"==", op_eq}, {"!=", op_ne} };
  int i;
  for (i = 0; all_ops[i].str; i++)
    if (!strcmp(op, all_ops[i].str))
      return all_ops[i].op;
  return NULL;
}

// ...
get_opfn(my_op_str)(val1, val2); 
```

# python - LARGE在线会话文本的情感分析

> ID：15326694
> 
> 赞同：10
> 
> 时间：2013-03-10T19:44:20.747
> 
> 标签：python, nlp, nltk, text-mining, sentiment-analysis

标题说明了一切; 我有一个 SQL 数据库，其中包含在线对话文本。我已经在 Python 中完成了这个项目的大部分工作，所以我想使用 Python 的 NLTK 库来完成这项工作（除非有充分的**理由**不这样做）。

数据按**Thread**、**Username**和**Post**组织。每个线程或多或少都集中在讨论我有兴趣分析的类别的一个“产品”。最终，当这完成后，我希望每个用户对他们在某个时候讨论过的任何产品都有一个估计的意见（喜欢/不喜欢某种交易）。

所以，我想知道的是：

1）**我怎样才能确定每个线程是关于什么产品的？**我正在阅读有关关键字提取的信息……这是正确的方法吗？

2)**如何根据帖子确定特定用户的情绪？**根据我有限的理解，我必须首先“训练”NLTK 识别某些意见指标，然后我是否只是确定这些词出现在文本中时的上下文？

正如您现在可能已经猜到的那样，我之前没有使用 NLP 的经验。从我目前的阅读来看，我认为我可以应付学习它。如果有人能指出我正确的方向，即使现在只是一个基本而粗略的工作模型也会很棒。谷歌对我帮助不大。

**PS**我有权分析这些数据（以防万一）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T19:04:14.747

训练任何分类器都需要一组**标记数据的****训练集**和一个特征提取器来获取每个文本的**特征集**。拥有经过训练的分类器后，您可以将其应用于以前未见过的文本（未标记），并根据所使用的机器学习算法获得分类。NLTK[给出了一个很好的解释和一些可以玩的示例](http://nltk.googlecode.com/svn/trunk/doc/book/ch06.html)。

 ****如果您有兴趣使用自己的训练数据集为正面/负面情绪构建分类器，我会避免简单的关键字计数，因为[它们由于多种原因并不准确](http://sentiment.christopherpotts.net/lingcog.html#commitment)（例如，否定正面词：“不开心” ）。**另一种方法是远程监督**，您仍然可以使用大型训练集而无需手动标记任何内容。基本上，这种方法使用*表情符号*或其他特定文本元素作为**嘈杂标签**。您仍然必须选择哪些特征是相关的，但是许多研究通过简单地使用*一元*或*二元*（分别是单个单词或成对的单词）取得了很好的结果。

所有这些都可以使用 Python 和 NLTK 相对容易地完成。您还可以选择使用[NLTK-trainer 之](https://github.com/japerk/nltk-trainer)类的工具，它是 NLTK 的包装器，需要的代码更少。

我认为Go 等人的[这项研究](http://cs.wmich.edu/~tllake/fileshare/TwitterDistantSupervision09.pdf)。是最容易理解的一种。您还可以阅读有关[远程监督](http://scholar.google.com/scholar?q=distant%20supervision)、[远程监督情绪分析](http://scholar.google.com/scholar?q=distant%20supervision%20sentiment%20analysis)和[情绪分析](http://scholar.google.com/scholar?q=twitter%20sentiment%20analysis)的其他研究。

NLTK 中有一些内置分类器具有训练和分类方法（[朴素贝叶斯](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.classify.naivebayes.NaiveBayesClassifier-class.html)、[MaxEnt](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.classify.maxent.MaxentClassifier-class.html)等），但如果您对使用支持向量机 (SVM) 感兴趣，那么您应该寻找其他地方。从技术上讲，NLTK 为您提供了一个[SVM 类](http://nltk.org/_modules/nltk/classify/svm.html)，但它实际上只是[PySVMLight](https://bitbucket.org/wcauchois/pysvmlight)的包装器，它本身是[SVMLight](http://svmlight.joachims.org)的包装器，用 C 编写。虽然这种方法有很多问题，但我会推荐[LIBSVM](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)。

为了确定主题，许多人使用了简单的关键字，但也有一些更复杂的方法可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T13:36:49.820

您可以使用相似的数据集训练任何分类器，并查看将其应用于数据时的结果。例如，NLTK 包含包含 1000 条正面评论和 1000 条负面评论的*电影评论语料库。*[这是一个关于如何用它训练朴素贝叶斯分类器的例子](http://streamhacker.com/2010/05/10/text-classification-sentiment-analysis-naive-bayes-classifier/)。其他一些评论数据集，如亚马逊产品评论数据可[在此处](http://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html#datasets)获得。

另一种可能性是获取一个像[这样](http://www.cs.uic.edu/~liub/FBS/sentiment-analysis.html#lexicon)的正面和负面词的列表，并计算它们在数据集中的频率。如果您想要一个完整的列表，请使用[SentiWordNet](http://sentiwordnet.isti.cnr.it/)。****

# html - Chrome 选择列表样式行为过滤选择列表选项

> ID：15326695
> 
> 赞同：0
> 
> 时间：2013-03-10T19:44:25.267
> 
> 标签：html, css, google-chrome

在 Chrome 中，这些不符合预期，如果使用 size 属性，样式选项将不起作用。我怎样才能使这项工作？

```
<select size=2>
    <option>1</option>
    <option selected>2</option>
    <option style="display: none;">3</option>
    <option>4</option>
</select>
<br/>
<select>
    <option>1</option>
    <option selected>2</option>
    <option style="display: none;">3</option>
    <option>4</option>
</select> 
```

[http://jsfiddle.net/D9X9U/1/](http://jsfiddle.net/D9X9U/1/)

我的最终游戏是有一个搜索框来过滤某种选择列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:38:34.920

我最终使用了一个隐藏的选择列表并在两者之间移动元素。如果有人发现这一点并可以改进这一点，请这样做，我会将您的标记为答案。我或多或少地在 javascript 和 jquery 中摸索，所以我确信可以做很多事情来使它变得更好。

[http://jsfiddle.net/x6cfF/1/](http://jsfiddle.net/x6cfF/1/)

编辑：任何找到这个寻找解决方案的人，这里有一个更好的[https://codereview.stackexchange.com/questions/23706/better-way-to-filter-select-list/23710?noredirect=1#23710](https://codereview.stackexchange.com/questions/23706/better-way-to-filter-select-list/23710?noredirect=1#23710)

```
<input type="search" id="SearchBox" />
<br />
<div class="scrollable" id="CustomerSelectDiv">
    <select size=2 class="scrollableinside" id="CustomerSelect">
        <option value=100>test</option>
        <option value=101>test1</option>
        <option value=102>test2</option>
        <option value=103>test3</option>
    </select>
</div>
<div style="display: none;">
    <select id="CustomerSelectHidden"></select>
</div>

<script type="text/javascript">
    window.onload=function() {

           var $options = $('#CustomerSelect option');
           document.getElementById("SearchBox").onkeyup = function () {
               var $HiddenOptions = $('#CustomerSelectHidden option');
               $HiddenOptions.each(function (index, value) {
                   document.getElementById('CustomerSelect').appendChild(this);
               });
               var search = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();
               var element = $options.filter(function () {
                   var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                   return !~text.indexOf(search);

               }).appendTo(document.getElementById('CustomerSelectHidden'));
           }
       }
</script> 
```

# javascript - 获取对包含构造函数属性的对象的引用

> ID：15326699
> 
> 赞同：1
> 
> 时间：2013-03-10T19:44:38.540
> 
> 标签：javascript, node.js

标题实在是太乱了，找不到更好的了。

假设我有：

```
var A = function (){
    this.pa = { x: 1 };
};

A.prototype.B = function (){
    this.pb = /* a reference to { x: 1 } */;
};

var a = new A ();
var b = new a.B ();
console.log (b.pb.x); //should print 1
a.pa.x = 2;
console.log (b.pb.x); //should print 2 
```

我想保存`pb`对对象的引用`pa`。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:14:02.490

[用作构造](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)函数的函数只有对新实例的引用，继承自其原型。

为了使它保持对原始`A`实例的引用，您需要将`B`构造函数放在闭包中：

```
function A() {
    var that = this;
    this.pa = { x: 1 };

    this.B = function() {
        this.pb = that.pa;
    };
};

var a = new A ();
var b = new a.B ();
console.log (b.pb.x); // does print 1
a.pa.x = 2;
console.log (b.pb.x); // does print 2 
```

但是，这样做的缺点是`B`为每个`A`实例创建一个新的构造函数（具有自己的原型对象）。更好的是

```
function A() {
    this.pa = { x: 1 };
}
A.B = function() {
    this.pb = null;
};
A.prototype.makeB = function() {
    var b = new A.B();
    b.pb = this.pa;
    return b;
};
// you can modify the common A.B.prototype as well

var a = new A ();
var b = a.makeB();
console.log (b.pb.x); // does print 1
a.pa.x = 2;
console.log (b.pb.x); // does print 2 
```

然而，我们可以混合这两种方法，这样你就只有一个原型，但有不同的构造函数：

```
function A() {
    var that = this;
    this.pa = { x: 1 };

    this.B = function() {
        this.pb = that.pa;
    };
    this.B.prototype = A.Bproto;
}
A.Bproto = {
    …
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:52:20.110

好吧，这不是我想要的，但它非常接近：

```
var A = function (pa){
    this.pa = pa;
};

A.prototype.B = function (a){
    if (this instanceof A.prototype.B){
        if (!a) throw "error";
        this.pb = a.pa;
        return;
    }
    return new A.prototype.B (this);
};

var a = new A ({ x: 1 });
var b = a.B ();
console.log (b.pb.x); //1
a.pa.x = 2;
console.log (b.pb.x); //2

new a.B () //throws "error" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:06:16.357

```
var A = function (){
    this.pa = { x: 1 };
};

A.prototype.B = function (a){

     this.pb = a.pa;
};
var a = new A ();

var b = new  a.B(a);
console.log(b.pb.x); //should print 1
a.pa.x = 2;
console.log(b.pb.x); 
```

# css - 元素定位无法正常工作

> ID：15326700
> 
> 赞同：1
> 
> 时间：2013-03-10T19:37:22.583
> 
> 标签：css

所以，我正在尝试一些列代码来让三列完美排列。不幸的是，当我尝试它时，我得到左右两列浮动在中间列上，如下所示：

[http://i.imgur.com/p4ln5Ri.png](http://i.imgur.com/p4ln5Ri.png)

这是我使用的css代码。作为参考，#left 表示左列，#main 表示中间，#right 表示右列。

HTML：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
 <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
 <title>3-Column</title>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
 <link href="ThreeColumnProjectCSS.css" rel="stylesheet" type="text/css" />
 </head>
 <body>
 <div id="header"><h1>Header</h1></div>
 <div>
 <div class="column">
 <h1>Left</h1>
 <ul>
 <li>Lorem ipsum dolor sit amet</li>
 <li>Consectetur adipisicing elit</li>
 <li>Sed do eiusmod tempor incididunt</li>
 <li>Ut labore et dolore magna aliqua</li>
 <li>Ut enim ad minim veniam</li>
 </ul>
 </div>

 <div class="column">
 <h1>Header - Main</h1>
 <p>Ullamco laboris nisi sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. In reprehenderit in voluptate lorem ipsum dolor sit amet, velit esse cillum dolore. Sunt in culpa ut enim ad minim veniam, consectetur adipisicing elit. In reprehenderit in voluptate qui officia deserunt sed do eiusmod tempor incididunt.</p>
 <p>Excepteur sint occaecat duis aute irure dolor sunt in culpa. Quis nostrud exercitation consectetur adipisicing elit. In reprehenderit in voluptate lorem ipsum dolor sit amet, cupidatat non proident. Ut labore et dolore magna aliqua.</p>
 <p>Quis nostrud exercitation qui officia deserunt eu fugiat nulla pariatur. Consectetur adipisicing elit, lorem ipsum dolor sit amet, in reprehenderit in voluptate. Quis nostrud exercitation ut aliquip ex ea commodo consequat. Velit esse cillum dolore qui officia deserunt ut labore et dolore magna aliqua.</p>
 <p>In reprehenderit in voluptate sunt in culpa. Sed do eiusmod tempor incididunt ullamco laboris nisi velit esse cillum dolore. In reprehenderit in voluptate ut aliquip ex ea commodo consequat. Excepteur sint occaecat lorem ipsum dolor sit amet, quis nostrud exercitation.</p>
 <p>Eu fugiat nulla pariatur. Ut labore et dolore magna aliqua. Ullamco laboris nisi ut enim ad minim veniam, in reprehenderit in voluptate. Quis nostrud exercitation ut aliquip ex ea commodo consequat. Lorem ipsum dolor sit amet, velit esse cillum dolore.</p>
 </div>

 <div class="column">
 <h1>Right</h1>
 <p>Sed do eiusmod tempor incididunt excepteur sint occaecat duis aute irure dolor.</p>
 </div>
 </div>
 </body>
 </html> 
```

CSS：

```
html, body {
   margin: 0px;
   padding: 0px;
   border: 0px;
 }

 #left {
   position: absolute;
   left:0px;
   top:100px;
   width:200px;
   background:#fff;
   border:1px solid #000;
   padding: 0px 5px;
 }

 #right {
   position: absolute;
   right:0px;
   top:100px;
   width:200px;
   background:#fff;
   border:1px solid #000;
   padding: 0px 5px;
 }

 #header {
   background:#fff;
   /* IE 5.5 */
   height:81px;
   border-top:1px solid #000;
   border-right:1px solid #000;
   border-left:1px solid #000;
   voice-family: "\"}\"";
   voice-family: inherit;
   /* IE 6 */
   height: 99px;
 }
 html]body #banner {
   /* Mozilla and Safari */
   height: 99px;
 }

 #main {

   background:#fff;
   /* these two margins affect IE 5.5 */
   margin-left: 200px;
   margin-right:200px;
   border:1px solid #000;
   padding: 0px 5px;
   voice-family: "\"}\"";
   voice-family: inherit;
   /* these two margins affect IE 6 */
   margin-left: 200px;
   margin-right:200px;
 }
 html]body #main {
   /* these two margins affect Mozilla and Safari */
   margin-left: 212px;
   margin-right:212px;
 }
 #footer {
   width: 100%;
   height: 35px;
   border: solid #000000;
   border-width: 1px 0;
   margin: 0;
 } 
```

我很感激帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:46:43.950

我会摆脱绝对位置并使用网格系统。

例如：http: [//jsfiddle.net/C6CnJ/7/](http://jsfiddle.net/C6CnJ/7/)

```
.row { clear: both; }  

.column {
    width: 130px;
    margin: 0 10px 20px;
    float: left;
}

<div class="row">
    <div class="column">Lorem ipsum...</div>
    <div class="column">Lorem ipsum...</div>
    <div class="column">Lorem ipsum...</div>
</div>
<div class="row">
    <div class="column">Hello!</div>
</div> 
```

# oracle - oracle：插入其中 a=b

> ID：15326701
> 
> 赞同：2
> 
> 时间：2013-03-10T19:44:52.320
> 
> 标签：oracle, insert

仅当条件为真时，我才需要将值插入表中。

我尝试这样做：

```
select (case when a = b  
 then insert into tbl values (1, 1) end) 
            from dual; 
```

但它不起作用:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:49:07.217

这样做： -

```
INSERT INTO tbl 
  (column1, column2) 
VALUES( 
  (SELECT column1 FROM table1 WHERE a=b), 
  (SELECT column2 FROM table2 WHERE a=b)
) 
```

## 更新：

```
INSERT INTO tbl 
  (column1, column2) 
SELECT column1, column2 FROM dual WHERE a=b 
```

# android - 如何获取动态创建的 Imageview 或 textview 在 android 中单击的 id 或位置？

> ID：15326705
> 
> 赞同：0
> 
> 时间：2013-03-10T19:45:15.760
> 
> 标签：android, dynamic, android-imageview

我想在滚动视图中创建动态图像视图和按钮，所以我想获取动态创建的单击项目的 ID 我怎样才能得到这是我的代码

公共类 TestActivity 扩展 Activity 实现 OnClickListener {

```
 private static final String TAG_DATA="data";
    private static final String TAG_ADVERTISE="advertisments";
    private static final String TAG_ADVERTISEID="advt_id";
    String advertiseid;

    private static final String TAG_SHOWTEXT="showtext";
    String showtext;

    private static final String TAG_PRODUCTINFO="product_info";
    String productinfo;

    private static final String TAG_THUMBIMAGE="thumbsrc";
    String thumbimage;

    private static final String TAG_DISTANCE="distance";
    String distance;

    private static final String TAG_STIPCIATED="stipciated";
    String stipciated;

    ArrayList<HashMap<String, String>> listadvertise = new ArrayList<HashMap<String,String>>();
    ArrayList<HashMap<String, String>> listadvertise1 = new ArrayList<HashMap<String,String>>();
    ArrayList<HashMap<String, String>> listadvertise2 = new ArrayList<HashMap<String,String>>();
    // Webservice parameter for home advertise
    String url;
    String fbid;
    String latitude;
    String longitude;
    String passdistance;
    String offset;

    // Webservice parameter for stipciated advertise

    String userid;
    String stipciate;

    int screenheight;
    int screenwidth;
    AlertDialog alertDialog;
    private ProgressDialog progressDialog;
    ImageView imagemenu;

    ScrollView scrollView3;

    ImageView im;
    LinearLayout homelistlayout1;
    LinearLayout homelistlayout2;
    public static final int img=50000;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.test);

        alertDialog = new AlertDialog.Builder(this).create();
        DisplayMetrics screensize= new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(screensize);

        screenheight=screensize.heightPixels;
        screenwidth=screensize.widthPixels;

        Log.e("Screen Height","---->"+screenheight);
        Log.e("Screen Width ","---->"+screenwidth);

        RelativeLayout headerlLayout = (RelativeLayout)findViewById(R.id.headerlayout);
        headerlLayout.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,((screenwidth*8)/100)+10));

        if(CheckConnection.getInstance(this).isOnline(this))
        {

        //  new HomeAsyncTask().execute("");

        }
        else
        {
            alert();
        }

        imagemenu=(ImageView)findViewById(R.id.imagemenu);
        imagemenu.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v)
            {
                    Intent i = new Intent(TestActivity.this,HorizontalActivity.class);
                    startActivity(i);
            }
        });

      scrollView3=(ScrollView)findViewById(R.id.scrollview3);

        scrollView3.post(new Runnable() {

            public void run()
            {

                scrollView3.scrollTo(0, 200);
            }
        });

        homelistlayout1=(LinearLayout)findViewById(R.id.homelistlayout1);
        homelistlayout1.setPadding(0, 100, 0, 0);
        homelistlayout2=(LinearLayout)findViewById(R.id.homelistlayout2);

        for(int i=0;i<12;i++)
        {

            im= new ImageView(TestActivity.this);
            im.setLayoutParams(new LinearLayout.LayoutParams(200, 200));

            if(i%2==0)
            {

                    im.setImageResource(R.drawable.adv);
                    im.setId(i);
                    homelistlayout1=(LinearLayout)findViewById(R.id.homelistlayout1);
                    homelistlayout1.addView(im);

            }
            else
            {
                im.setImageResource(R.drawable.adv2);
                im.setId(i);
                homelistlayout2=(LinearLayout)findViewById(R.id.homelistlayout2);
                homelistlayout2.addView(im);

                }

            }   

            im.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {

                    ImageView iv=(ImageView) v;

                    Log.e("sfas","-->"+iv.getId());

                }
            });
            }
       }

public void onClick(View v) {

    Log.e("Clicked","----->"+v.getId());
    switch (v.getId()) 
    {
    case img:
                    Log.e("Clicked","----->"+v.getId());
            break;

    default:
        break;
    }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T19:49:02.620

只需要更改您的代码，

1.  您必须添加**ImageView**`im.setOnClickListener(this);`的 for 循环。
***   删除以下方法

    ```
    im.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                ImageView iv=(ImageView) v;
                Log.e("sfas","-->"+iv.getId());
            }
        }); 
    ```

    *   **覆盖 onClick()**正如您已经`onClickcListener`在 Activity 中实现的那样。** 

 **查看下面的代码，（并与您的代码匹配以了解实际问题）

```
public class TestActivity extends Activity implements OnClickListener 
{
    private static final String TAG_DATA="data";
    private static final String TAG_ADVERTISE="advertisments";
    private static final String TAG_ADVERTISEID="advt_id";
    String advertiseid;
    private static final String TAG_SHOWTEXT="showtext";
    String showtext;
    private static final String TAG_PRODUCTINFO="product_info";
    String productinfo;

    private static final String TAG_THUMBIMAGE="thumbsrc";
    String thumbimage;

    private static final String TAG_DISTANCE="distance";
    String distance;

    private static final String TAG_STIPCIATED="stipciated";
    String stipciated;

    ArrayList<HashMap<String, String>> listadvertise = new ArrayList<HashMap<String,String>>();
    ArrayList<HashMap<String, String>> listadvertise1 = new ArrayList<HashMap<String,String>>();
    ArrayList<HashMap<String, String>> listadvertise2 = new ArrayList<HashMap<String,String>>();
    // Webservice parameter for home advertise
    String url;
    String fbid;
    String latitude;
    String longitude;
    String passdistance;
    String offset;

    // Webservice parameter for stipciated advertise

    String userid;
    String stipciate;

    int screenheight;
    int screenwidth;
    AlertDialog alertDialog;
    private ProgressDialog progressDialog;
    ImageView imagemenu;
    ScrollView scrollView3;

    private ListView listViewLeft;
    private ListView listViewRight;

    int[] leftViewsHeights;
    int[] rightViewsHeights;

    ImageView im;
    LinearLayout homelistlayout1;
    LinearLayout homelistlayout2;
     public static final int img=50000;
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.test);

        alertDialog = new AlertDialog.Builder(this).create();
        DisplayMetrics screensize= new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(screensize);

        screenheight=screensize.heightPixels;
        screenwidth=screensize.widthPixels;

        Log.e("Screen Height","---->"+screenheight);
        Log.e("Screen Width ","---->"+screenwidth);

        RelativeLayout headerlLayout = (RelativeLayout)findViewById(R.id.headerlayout);
        headerlLayout.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,((screenwidth*8)/100)+10));

        if(CheckConnection.getInstance(this).isOnline(this))
        {

        //  new HomeAsyncTask().execute("");
        }
        else
        {
            alert();
        }

        imagemenu=(ImageView)findViewById(R.id.imagemenu);
        imagemenu.setOnClickListener(new OnClickListener() 
        {
            public void onClick(View v)
            {
                    Intent i = new Intent(TestActivity.this,HorizontalActivity.class);
                    startActivity(i);
            }
        });

      scrollView3=(ScrollView)findViewById(R.id.scrollview3);
        scrollView3.post(new Runnable() {
            public void run()
            {
                scrollView3.scrollTo(0, 200);
            }
        });

        homelistlayout1=(LinearLayout)findViewById(R.id.homelistlayout1);
        homelistlayout1.setPadding(0, 100, 0, 0);
        homelistlayout2=(LinearLayout)findViewById(R.id.homelistlayout2);

        for(int i=0;i<12;i++)
        {
            im= new ImageView(TestActivity.this);
            im.setLayoutParams(new LinearLayout.LayoutParams(200, 200));
            im.setOnClickListener(this); 
            if(i%2==0)
            {
                    im.setImageResource(R.drawable.adv);
                    im.setId(i);
                    homelistlayout1=(LinearLayout)findViewById(R.id.homelistlayout1);
                    homelistlayout1.addView(im);
            }
            else
            {
                im.setImageResource(R.drawable.adv2);
                im.setId(i);
                homelistlayout2=(LinearLayout)findViewById(R.id.homelistlayout2);
                homelistlayout2.addView(im);
            }
        }   
       }
   }

@Override
public void onClick(View v) {
  Log.e("Clicked","----->"+v.getId());
  switch (v.getId()) 
   {
    case 1:
        Log.e("Clicked","----->"+v.getId());
        break;
    case 2:
        break;
    .
    .
    .
    default:
    break;
 }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:48:42.590

您可以`setId()`在创建视图时创建他的 ID。 [http://developer.android.com/reference/android/view/View.html#setId(int)](http://developer.android.com/reference/android/view/View.html#setId(int))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T19:52:36.707

您正在为`ImageView`with设置 ID `im.setId(i);`。所以 ID 将是 i 的值。你可以在某个地方跟踪它。

另外，请只发布相关的代码，而不是整个班级**

# mysql - 复杂的 order By - Suborder by Query

> ID：15326713
> 
> 赞同：1
> 
> 时间：2013-03-10T19:46:22.983
> 
> 标签：mysql, sql

我需要对下面提到的表结构进行汇总计算，因为我需要按“sessionId”排序，按“sequenceId”排序。特定会话可以有一个或多个序列。每个序列都从一个开始并按顺序前进。主键和流序列可能不是串联的。

表>>

```
pk_id  session-id    sequence   some_other columns
  1    AAAAAAAA          1        blah-blah-blah
  2    AAAAAAAA          2        blah-blah-blah 
  3    AAAAAAAA          3        blah-blah-blah
  4    AAAAAAAA          2        blah-blah-blah
  5    AAAAAAAA          1        blah-blah-blah
  6    AAAAAAAA          3        blah-blah-blah
  7    AAAAAAAA          3        blah-blah-blah
  8    AAAAAAAA          2        blah-blah-blah
  9    AAAAAAAA          1        blah-blah-blah 
```

我需要订购

```
 pk_id  session-id    sequence   some_other columns
  1    AAAAAAAA          1        blah-blah-blah
  2    AAAAAAAA          2        blah-blah-blah 
  3    AAAAAAAA          3        blah-blah-blah

  5    AAAAAAAA          1        blah-blah-blah
  4    AAAAAAAA          2        blah-blah-blah
  6    AAAAAAAA          3        blah-blah-blah

  9    AAAAAAAA          1        blah-blah-blah
  8    AAAAAAAA          2        blah-blah-blah
  7    AAAAAAAA          3        blah-blah-blah 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T23:02:08.597

Assuming you want to group together the first `sequence=1` with the first `sequence=2` and the first `sequence=3`, and similarly the second `1` with the second `2` and second `3` and so on (using `pk_id` as the order), you could use variable assignment to number `sequence` values, then use the resulting numbers for sorting.

This is what I mean:

```
SELECT
  pk_id,
  session_id,
  sequence,
  some_other_column
FROM (
  SELECT
    @row := (session_id = @sid AND sequence = @seq) * @row + 1 AS row,
    pk_id,
    @sid := session_id AS session_id,
    @seq := sequence AS sequence,
    some_other_column
  FROM
    atable,
    (SELECT @row := 0, @sid := '', @seq := 0) AS s
  ORDER BY
    session_id,
    sequence,
    pk_id
) AS s
ORDER BY
  session_id,
  row,
  sequence
; 
```

This query can be tested [at SQL Fiddle](http://sqlfiddle.com/#!2/14766/10).

# ember.js - ember.js 侧载模型不起作用

> ID：15326716
> 
> 赞同：0
> 
> 时间：2013-03-10T19:46:30.400
> 
> 标签：ember.js, ember-data

我不得不重写一个路由来做一些这样的模型的自定义加载：

```
App.EventsIndexRoute = Ember.Route.extend
  model: (params) ->
    origin = LJ.origin().join(',')
    location = [LJ.stripQuery(params.loc2), params.loc1].join(',')
    h = $.param(origin: origin, location: location)
    $.getJSON "#{LJ.CONFIG.api.url}/events?#{h}" 
```

返回的 JSON 包括侧加载模型，但它们没有被 ember 加载。我猜我需要做一些事情来加载它们，但我不知道是什么。我很感激这方面的任何帮助。

[这是返回的 JSON 的示例](https://gist.github.com/mdi/5130107)。

**更新**

这是模型定义：

```
App.Event = DS.Model.extend
  acts: DS.hasMany('App.Act')
  ageLimit: DS.attr('string')
  centsAdvance: DS.attr('number')
  centsDoor: DS.attr('number')
  currency: DS.attr('string')
  description: DS.attr('string')
  endsAt: DS.attr('number')
  priceAdvance: DS.attr('string')
  priceDoor: DS.attr('string')
  repeats: DS.attr('string')
  repeatsUntil: DS.attr('string')
  startsAt: DS.attr('number')
  title: DS.attr('string')
  url: DS.attr('string')
  venue: DS.belongsTo('App.Venue')
  venueSection: DS.attr('string') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:35:49.823

IMO 这与您的路线无关，而与您的模型有关。确保你这样声明（他们当然必须在场）

```
App.Event = DS.Model.extend({
  venue: DS.belongsTo('App.Venue'),
  acts: DS.hasMany('App.Act'),
  // go on with the model
}); 
```

我发现`{{ log event }}`在模板中包含 a 以深入了解控制器和模型并确保它确实没有被加载很有帮助

Ps：您确实在路由中返回了ajax响应，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T18:28:22.613

您返回的示例 JSON 的链接不起作用，您能否提供一个工作示例？

您将围绕 Ember-data 进行 ajax 调用，这意味着您需要以更手动的方式处理反序列化。如果您希望 ember 为您执行此操作，则需要致电商店，例如：

```
App.EventsRoute = Ember.Route.extend({
    model: function() {
        // other code here if necessary
        return this.store.find('event', params._id);
    } 
```

此外，每当我没有将相关对象（在您的情况下为场地）加载到商店中时，这是因为 JSON 不是 Ember 期望的格式，如下所示：

```
{
    Events: [{ Id: 1, Venues: [1], ... }], 
    Venues: [{ Id: 1, ... }]
} 
```

不喜欢这样：

```
{
    Events: [{ Id: 1, Venue: { Id: 1, ... }, ... }], 

} 
```

也许这有帮助？

# c# - 如何使用 Win32API 在其他进程中滚动窗口

> ID：15326718
> 
> 赞同：6
> 
> 时间：2013-03-10T19:46:35.450
> 
> 标签：c#, winapi

我试图创建一个程序，我可以在其中将进程的一些进程ID（可能是firefox，即记事本等）发送到滚动进程窗口的方法。

我一直在尝试使用我在 pinvoke 找到的 GetScrollBarInfo 和 SetScrollPos，但没有任何成功。我不确定这是否是正确的方法。我开始玩 GetScrollBarInfo，但它似乎不起作用。

我尝试了在[http://www.pinvoke.net/default.aspx/user32.getscrollbarinfo找到的代码](http://www.pinvoke.net/default.aspx/user32.getscrollbarinfo)

```
[StructLayout(LayoutKind.Sequential)]
public struct SCROLLBARINFO
{
    public int cbSize;
    public Rectangle rcScrollBar;
    public int dxyLineButton;
    public int xyThumbTop;
    public int xyThumbBottom;
    public int reserved;
    [MarshalAs(UnmanagedType.ByValArray, SizeConst = 6)]
    public int[] rgstate;
}

private const uint OBJID_HSCROLL = 0xFFFFFFFA;
private const uint OBJID_VSCROLL = 0xFFFFFFFB;
private const uint OBJID_CLIENT = 0xFFFFFFFC;

private int Scroll(int ProcessID) 
{
    IntPtr handle = Process.GetProcessById(ProcessID).MainWindowHandle;
    SCROLLBARINFO psbi = new SCROLLBARINFO();
    psbi.cbSize = Marshal.SizeOf(psbi);
    int nResult = GetScrollBarInfo(handle, OBJID_CLIENT, ref psbi);
    if (nResult == 0)
    {
        int nLatError = Marshal.GetLastWin32Error();
    }
} 
```

根据[http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs. 85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382(v=vs.85).aspx)

我不确定我做错了什么。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T09:54:33.000

你可以发送一条 WM_MOUSEWHEEL 消息来做你想做的事。例如，要使用 C++ 在新的记事本窗口中向下滚动一次：

```
HWND hwnd = FindWindowEx(FindWindow(NULL, "Untitled - Notepad"), NULL, "Edit", NULL);
RECT r;
GetClientRect(hwnd, &r);
SendMessage(hwnd, WM_MOUSEWHEEL, MAKEWPARAM(0, WHEEL_DELTA * -1), MAKELPARAM(r.right / 2, r.bottom / 2)); 
```

要使其适应 C#，您可以执行以下操作：

```
[DllImport("user32.dll", CharSet = CharSet.Auto)]
static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, Int32 wParam, ref Point lParam);

private void ScrollWindow(IntPtr hwnd, Point p, int scrolls = -1)
{
    SendMessage(hwnd, WM_MOUSEWHEEL, (WHEEL_DELTA * scrolls) << 16, ref p);
} 
```

可用于在新的记事本窗口中向下滚动一次，如下所示：

```
//Imports
[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

[DllImport("user32.dll", SetLastError = true)]
static extern IntPtr FindWindowEx(IntPtr hwndParent, IntPtr hwndChildAfter, string lpszClass, string lpszWindow);
...
//Actual code
IntPtr hwnd = FindWindowEx(FindWindow(null, "Untitled - Notepad"), IntPtr.Zero, "Edit", null);
Point p = new Point(0, 0);
ScrollWindow(hwnd, p); 
```

某些程序将要求发送的 lParam 是实际位于滚动区域上方的点，而其他程序（例如记事本）则不会。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T22:09:04.237

如果您尝试滚动另一个进程的窗口，您实际上需要模拟滚动条上的点击或按键操作。最简洁的方法是使用[UI Automation](http://msdn.microsoft.com/en-us/library/ms753388.aspx)，它同时具有 .NET 和本机接口。

通过询问滚动条信息，您只是获取有关滚动条如何显示的信息。这不会为您提供滚动窗口内容的方法。您必须让目标应用程序认为用户正在操作滚动条来滚动内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-03T21:19:30.823

[http://forums.codeguru.com/showthread.php?446352-How-to-scroll-active-window-SendMessage&p=1686041#post1686041](http://forums.codeguru.com/showthread.php?446352-How-to-scroll-active-window-SendMessage&p=1686041#post1686041)

最终代码

```
class Program
{
        [DllImport("user32.dll")]
        static extern bool GetGUIThreadInfo(uint idThread, ref GUITHREADINFO lpgui);

        [DllImport("user32.dll")]
        public static extern int SetScrollPos(IntPtr hWnd, System.Windows.Forms.Orientation nBar, int nPos, bool bRedraw);

        [DllImport("user32.dll")]
        public static extern int SendMessage(IntPtr hWnd, uint Msg, int wParam, int lParam);

        public struct GUITHREADINFO
        {
            public int cbSize;
            public int flags;
            public IntPtr hwndActive;
            public IntPtr hwndFocus;
            public IntPtr hwndCapture;
            public IntPtr hwndMenuOwner;
            public IntPtr hwndMoveSize;
            public IntPtr hwndCaret;
            public System.Drawing.Rectangle rcCaret;
        }

        const Int32 WM_VSCROLL = 0x0115;
        const Int32 SB_LINERIGHT = 1;

        static void Main(string[] args)
        {
            //create process in focus
            Process.Start("notepad++", "Source.cpp");
            Thread.Sleep(1000);
            GUITHREADINFO threadInfo = new GUITHREADINFO();
            threadInfo.cbSize = Marshal.SizeOf(threadInfo);

            GetGUIThreadInfo(0, ref threadInfo);
            SendMessage(threadInfo.hwndFocus, WM_VSCROLL, SB_LINERIGHT, 0);
            //SetScrollPos not work. Change only scrollbar without scroll window
            //SetScrollPos(threadInfo.hwndFocus, System.Windows.Forms.Orientation.Vertical, 10, true);           
        }
    } 
```

# sql - SQL Server 函数错误 - 从字符串转换日期和/或时间时转换失败

> ID：15326719
> 
> 赞同：2
> 
> 时间：2013-03-10T19:46:36.567
> 
> 标签：sql, sql-server-2008

```
CREATE FUNCTION [dbo].[fn_InventoryPositionSet]
(
    @PointInTime DATETIME,
    @EOD BIT,
    @AccountList Varchar(max)
)
RETURNS @OffersTable TABLE
(
    Account            VARCHAR(10),
    PositionId         VARCHAR(150),
    VersionDate        DATETIME,
    ProductType        VARCHAR(50),
    XRef               VARCHAR(50),
    XRefType           VARCHAR(20),
    Desk               VARCHAR(50)

)
AS
BEGIN
    IF @EOD = 1 
        SET @PointInTime = dbo.COBTimestamp(@PointInTime)

    IF @AccountList is not NULL     
                INSERT INTO @OffersTable
                SELECT      
                    P.Account,
                    P.UniquePositionId AS [PositionId],
                    P.Desk,
                    P.VersionEffective AS [VersionDate],
                    P.ProductType,
                    P.XRef,
                    P.XRefType
                FROM MarkingInventory AS P WITH(nolock)
                LEFT JOIN 
                    Spirit.dbo.GetTableOfInputs(@AccountList) A 
                    ON 
                        ( 
                            (P.Account = A.Input)
                            AND 
                            @AccountList IS NOT NULL 
                        )
                WHERE 
                    @PointInTime >= P.VersionEffective AND @PointInTime < P.VersionExpiration and P.Account = A.Input
    ELSE
        INSERT INTO @OffersTable
                SELECT      
                    P.Account,
                    P.UniquePositionId AS [PositionId],
                    P.Desk,
                    P.VersionEffective AS [VersionDate],
                    P.ProductType,
                    P.XRef,
                    P.XRefType
                FROM MarkingInventory AS P WITH(nolock)
                WHERE 
                    @PointInTime >= P.VersionEffective AND @PointInTime < P.VersionExpiration 

RETURN
END 
```

我创建了这个函数，它接受三个参数。我有几个关于执行此功能的问题。

> *从字符串转换日期和/或时间时转换失败*

这是我尝试以下列方式执行此功能时收到的错误

```
select * from [dbo].[fn_InventoryPositionSet] (GETDATE(), 1, null) 
```

即使我通过`2012-03-10`而不是`getdate()`

我也想学习如何以列表的形式传递参数。作为参数之一是列表的形式。如果您想了解有关该功能的更多信息，请告诉我。

这是在上面编写的函数中使用的函数：

```
CREATE FUNCTION [dbo].[COBTimestamp]
(
    @COBDate DATETIME
)
RETURNS DATETIME
AS
BEGIN

    RETURN DATEADD(day, DATEDIFF(day, 0, @COBDate), '23:59:59')             

END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:34:22.010

查看您的表定义：

```
1\. Account            VARCHAR(10),
2\. PositionId         VARCHAR(150),
*** 3\. VersionDate        DATETIME, ***
4\. ProductType        VARCHAR(50),
5\. XRef               VARCHAR(50),
6\. XRefType           VARCHAR(20),
7\. Desk               VARCHAR(50) 
```

你的选择：

```
 SELECT      
                1\. P.Account,
                2\. P.UniquePositionId AS [PositionId],
                *** 3\. P.Desk, ***
                4\. P.VersionEffective AS [VersionDate],
                5\. P.ProductType,
                6\. P.XRef,
                7\. P.XRefType 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:55:34.987

不在其中的问题`[dbo].[fn_InventoryPositionSet]`在`[dbo].[COBTimestamp]`.

```
RETURN DATEADD(day, DATEDIFF(day, 0, @COBDate), '23:59:59')
                                                    ^__________ Must be converted to `DATETIME` 
```

**[日期添加 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms186819.aspx)**

# php - 如何更新 PHP CLI OSX？

> ID：15326723
> 
> 赞同：16
> 
> 时间：2013-03-10T19:46:52.963
> 
> 标签：php, macos, apache, osx-lion

我刚刚在 osx lion 上使用[http://php-osx.liip.ch/](http://php-osx.liip.ch/)更新到 php 5.4 。

当我输入：

```
php -v 
```

我仍然看到：

```
PHP 5.3.15 with Suhosin-Patch (cli) (built: Jul 31 2012 14:49:18) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies 
```

但是 phpinfo() 显示 5.4。

我如何更新这个？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2016-09-09T10:44:29.647

只需导出安装的 PHP 路径，在终端上输入

```
export PATH=/usr/local/php5/bin:$PATH 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T20:00:43.607

我检查了它的`/usr/local/php5/bin/php`存在。确实如此，所以我添加`/usr/local/php5/bin`到我的 PATH 中。

谢谢@AD7six

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-02T06:40:54.800

Chutipong Roobklom 和 user1168427 共享的答案有所帮助，如果您想更新到最新的 php cli，即 7.2.7（截至 2018 年最初创建这篇文章时的最新和稳定版本，请检查最新的 php 版本，方法切换版本可能会有所不同）然后只需使用它而不是 php5 命令。`export PATH=/usr/local/php7/bin:$PATH`然后输入`php -v`，你应该有这样的东西（顺便说一下，在 MACOSX 上）：

`PHP 7.2.7 (cli) (built: Jun 22 2018 06:27:50) ( NTS ) Copyright (c) 1997-2018 The PHP Group Zend Engine v3.2.0, Copyright (c) 1998-2018 Zend Technologies with Zend OPcache v7.2.7, Copyright (c) 1999-2018, by Zend Technologies`

所以你不应该得到任何错误。希望这对 Kamel 有所帮助，这就是它的安装方式。您正在以某种方式“公开”它，以便您的机器现在可以识别您正在使用的 php 版本。

# android - Android拖拽TextView的bug

> ID：15326724
> 
> 赞同：0
> 
> 时间：2013-03-10T19:46:55.783
> 
> 标签：android

我按照[本教程](http://mobile.tutsplus.com/tutorials/android/android-sdk-implementing-drag-and-drop-functionality/)进行拖放功能，除了一个奇怪的错误外，它可以工作。

将 textview A 拖到 Textview B 上是假设：

1.  隐藏文本视图 A
2.  将标签从 textview A 传递到 textview B
3.  在 textview B 上重新显示传递的数据

将数据从 textview A 传递到 B 的工作率为 100%，但奇怪的是，textview A 并非 100% 的时间不可见。我不知道这是否是我将它物理拖动到 textview B 或其他东西的方式。知道如何使它更稳定吗？

```
public boolean onDrag(View v, DragEvent event) {
        //handle drag events
        switch (event.getAction()) {
           case DragEvent.ACTION_DROP:
            //handle the dragged view being dropped over a drop view

            View view = (View) event.getLocalState();
            //stop displaying the view where it was before it was dragged
            view.setVisibility(View.INVISIBLE);
            //view dragged item is being dropped on
            TextView dropTarget = (TextView) v;
            //view being dragged and dropped
            TextView dropped = (TextView) view;
            //update the text in the target view to reflect the data being dropped
            dropTarget.setText(dropped.getText());
            //make it bold to highlight the fact that an item has been dropped
            dropTarget.setTypeface(Typeface.DEFAULT_BOLD);
            //if an item has already been dropped here, there will be a tag
            Object tag = dropTarget.getTag();
            //if there is already an item here, set it back visible in its original place
            if(tag!=null)
            {
                //the tag is the view id already dropped here
                int existingID = (Integer)tag;
                //set the original view visible again
                findViewById(existingID).setVisibility(View.VISIBLE);
            }
            //set the tag in the target view to the ID of the view being dropped
            dropTarget.setTag(dropped.getId());
            // check choice
            checkChoice(dropped,dropTarget);
            break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:02:01.167

认为我发现了问题

```
if(tag!=null)
        {
            //the tag is the view id already dropped here
            int existingID = (Integer)tag;
            //set the original view visible again   
            //findViewById(existingID).setVisibility(View.VISIBLE);   COMMENT THIS OUT
        } 
```

# c++ - Valgrind 是否提供选项来通过专门针对 C++ 的函数来捕获对象的访问？如果是这样，可以使用什么选项？

> ID：15326727
> 
> 赞同：1
> 
> 时间：2013-03-10T19:47:12.173
> 
> 标签：c++, profiling, valgrind

我想知道 Valgrind 提供选项来通过函数捕获对象对 C++ 中的代码的访问。有什么方法可以捕获通过 valgrind 读取和写入的对象？

# c - 检查字符是否为空格

> ID：15326729
> 
> 赞同：4
> 
> 时间：2013-03-10T19:47:23.157
> 
> 标签：c

我正在用 C 语言创建一个荒谬的简单程序来处理`getchar()`. 该程序将打印出您输入的内容，直到您按下回车键，它会保证您的每行不超过 80 个字符。为此，我不断计算输入了多少个字符。一旦字符数达到 70，遇到的下一个空格将导致换行。如果在 70-80 之间没有遇到空格，则无论如何都会发生换行符。我意识到这是一个超级幼稚的实现，可以左右优化，但请记住，我只是在胡闹：

```
while ((c = getchar()) != '\n') {
    if (lineLengthCount < 70) {
        putchar(c);
        lineLengthCount++;
    }   
    else if (lineLengthCount < 80 && (c == ' ')) {
        printf("%c\n", c); 
        lineLengthCount = 0;
    }   
    else {
        printf("%c\n", c); 
        lineLengthCount = 0;
    }   
} 
```

问题是`c == ' '`条件似乎实际上并没有检查空格。我得到这样的输出：

```
fitter happier more productive comfortable not drinking too much regula
r exercise at the gym three days a week getting on better with your ass
ociate employee contemporaries at ease eating well no microwaved dinner 
```

我希望在遇到空格时会截断这些行。相反，无论在第 70 行之后输入什么字符，都会创建一个新行。我错过了什么吗？`' '`真的意味着任何字符吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T19:54:05.570

```
while ((c = getchar()) != '\n') {
    if (lineLengthCount < 70) {
        putchar(c);
        lineLengthCount++;
    }   
    else if (lineLengthCount < 80 && (c == ' ')) {
        printf("%c\n", c); 
        lineLengthCount = 0;
    }   
    else if (lineLengthCount >= 80){
        printf("%c\n", c); 
        lineLengthCount = 0;
    }
    else{
        putchar(c);
        lineLengthCount++;
    }
} 
```

我认为这应该有效。这应该可以防止 else 在少于 80 个字符但字符不是空格时执行。

编辑：我现在意识到，如果 lineLengthCount 小于 80 但字符不是空格，它根本不会被打印，所以我在最后添加了另一个 else 来修复它。

这不是更短更简洁吗？

```
while ((c = getchar()) != '\n') {
    putchar(c);
    if((c == ' ' && lineLengthCount >= 70) || lineLengthCount >= 80){
        printf("\n");
        lineLengthCount = 0;
    }
    else
        ++lineLengthCount;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-10T19:51:06.287

您的条件有问题：如果`lineLengthCount`> 70 但下一个字符不是空格，则最后一个字符`else`将被击中，换行并重置计数器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T19:56:14.580

如果您完全不确定发生了什么，我建议将“if”条件分解为三个显式检查：

```
while ((c = getchar()) != '\n') {
    lineLengthCount++;
    if (lineLengthCount < 70) {
        putchar(c);
    }   

    if (lineLengthCount < 80 && (c == ' ')) {
        printf("%c\n", c); 
        lineLengthCount = 0;
    }   

    if (lineLengthCount == 80) {
        printf("%c\n", c); 
        lineLengthCount = 0;
    }   
} 
```

如果您想查看发生了什么，请在每个“if”中编写一些调试输出以注意它何时被调用。

一旦它起作用，并且您了解原因，您可以对其进行编辑并结合“ifs”......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T19:58:30.147

使用 ' ' 是完全有效的。您也可以尝试使用 C 标准库函数 isspace() 来检查字符是否为空格。该函数返回一个布尔表达式，如：

```
char ch = '0';

if (isspace(ch))
    //the char is a space... 
```

'is space' 这个函数实际上是指任何 'whitespace' 字符，因此包括 '\n' 或任何其他打印为空格的字符。

您也可以使用十进制值 32，这意味着与空格相同：

```
if (ch==32) 
```

但是为了可读性，我宁愿使用第一个版本！

# php - 当单词太长时添加空格

> ID：15326735
> 
> 赞同：4
> 
> 时间：2013-03-10T19:47:42.300
> 
> 标签：php, string

我的问题如下。我有一个这样的字符串：

```
$string = "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"; 
```

我在一个 100px 宽的容器中输出这个字符串。如果任何单词超过 10 个字符，有什么方法可以在 10 个字符后自动插入空格？

```
$string = chunk_split($string, 10); 
```

不是一个好的解决方案，因为它在单词中间插入了一个空格。例如：

```
$string = "This is why chunk_split doesn't work";
$string = chunk_split($string, 10);
echo $string;
// OUTPUT: This is wh y chunk_sp lit doesn' t work 
```

关键是空格字符允许字符串创建一个新行。

* * *

**期望的输出：**

```
$string = "This is how it should work.";
$string = function_i_am_looking_for($string);
echo $string;
// OUTPUT: This is how it should work.

$string = "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
$string = function_i_am_looking_for($string);
echo $string;
// OUTPUT: AAAAAAAAAA AAAAAAAAAA AAAAAAAAAA AAAAAAAAAA AAAAAAAAAA AAAAAAAAAA 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T19:57:00.703

如果您只是想强制您的字符串换行而不是延伸到其父元素之外，您可以直接在 css 中执行此操作，而不必弄乱您的字符串：

```
p { 
  width: 100px; 
  word-wrap: break-word; 
}

<p>AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA</p> 
```

这会让浏览器找出它需要中断的地方，而不是你试图在服务器上找出它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-10T19:55:54.987

使用[wordwrap()](http://es2.php.net/manual/en/function.wordwrap.php) Wordwrap 将句子前面的完整单词切割成最大宽度。在下一个示例中，我将`true`最后一个参数设为强制剪切始终使用 10 个字符。

```
$short = wordwrap($string, 10, PHP_EOL, true); 
```

另一种选择是

```
$short = wordwrap($string, 10, '<br>', true); 
```

但是按字符数切割并不安全，因为字符的宽度并不总是相同（不同的字体类型）

最好的选择是将a`<div>`放在句子的最后部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-10T19:53:23.367

[`<wbr/>`](http://www.quirksmode.org/oddsandends/wbr.html)如果您打算在 HTML 中查看此内容，请尝试添加而不是空格

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-10T19:53:27.243

你可以用[preg_replace()](http://php.net/preg_replace)做到这一点：

```
$string = preg_replace('/(\S{10})(?=\S)/', '$1 ', $string); 
```

这将在每个连续的 10 个非空格字符 ( `\S`) 块之后插入一个空格，然后至少再添加一个非空格。

[此外，您可能更愿意插入软连字符](http://en.wikipedia.org/wiki/Soft_hyphen)U+00AD 或 Unicode[零宽度空格](http://en.wikipedia.org/wiki/Zero-width_space)U+200B ，而不是常规空格。

* * *

**编辑：**正如 sachleen 和其他人所指出的，*实际*问题的最佳解决方案可能是[CSS word-wrap 属性](https://developer.mozilla.org/en-US/docs/CSS/word-wrap)，特别是`word-wrap: break-word`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-10T20:00:49.817

如果您打算在 HTML 中使用它，请查看[CSS word-wrap](https://developer.mozilla.org/en-US/docs/CSS/word-wrap)

```
#foo { 
  width: 100px;
  word-wrap: break-word;
} 
```

[演示](http://jsbin.com/iqopiy/1/edit)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-10T19:52:50.587

我认为重点是使这些“单词”不会破坏您的布局。看到像这样的“单词”有多长可能甚至不是单词，并且将它们拆分不太可能使它们更具可读性......为什么不直接删除它们呢？

`$content = preg_replace("~\w{11,}~","",$content);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-10T20:10:08.353

另一种选择..

```
$string = preg_replace_callback(
  "~\w{11,}~",
  create_function(
    '$m',
    'return chunk_split($m[0],10," ");'
  ),
  $string); 
```

# jruby - jruby 登录到哪里？

> ID：15326736
> 
> 赞同：0
> 
> 时间：2013-03-10T19:47:43.877
> 
> 标签：jruby, jvm-arguments

我看到很多配置选项，比如 jit.logging=true，我想注意 jvm 何时发出`CodeCache is full. Compiler has been disabled`消息，jruby 在哪里记录这些东西？更好的是，我怎样才能告诉它要登录到哪个文件？它只是 STDOUT 和 STDERR 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T21:56:09.127

通过设置影响 JIT 运行时属性的 JRuby 属性（例如：*jruby.jit.logging*、*jruby.jit.logging*、*jruby.jit.logging*），您可以将日志记录到**标准错误**（通常缩写为**stderr**）

您可以通过将**stderr**重定向到特定文件来判断要记录到哪个文件；例如：

```
jruby -J-Djruby.jit.logging=true myscript.rb  2> myfile.log 
```

但是请注意，*myfile.log*甚至会收到其他**stderr**输出；即如果*myscript.rb* 执行语句，例如：

```
$stderr.puts "print this in stderr" 
```

*您将在myfile.log*中看到“在 stderr 中打印”

# c++ - 通过 FlasCC 在 AS3 中使用解压库

> ID：15326738
> 
> 赞同：1
> 
> 时间：2013-03-10T19:47:56.507
> 
> 标签：c++, c, actionscript-3, compression, flascc

我有一个 AS3 AIR 项目，我需要在其中使用特定的解压方法来解压文件。[显然，在 zlib 发行版的 contrib/blast 目录中](https://github.com/madler/zlib/tree/master/contrib/blast)可以找到此代码。我会手动将其移植到 AS3，但是我实际上是 C/C++ 文盲，并且在编码压缩/解压缩算法方面也没有太多经验。

我发现了 FlasCC，并决定下载它，看看它是否有效。hello world 示例运行良好，一切正常。我查找了如何编译 SWC，因为我认为这是一种使用它的好形式，并尝试编译它。不幸的是，它没有用。

这就是我写的：

```
$ "/cygdrive/f/C2F/FlasCC/sdk/usr/bin/gcc" blast.c -emit-swc=blast -o blast.swc 
```

这就是我得到的：

```
/cygdrive/f/C2F/FlasCC/sdk/usr/bin/../../usr/lib/stdlibs_abc/crt1_c.o: error: un
defined reference to '_main'
collect2: ld returned 1 exit status 
```

正如我提到的，我在 C 语言中完全没用，这是我第一次使用 FlasCC。如果有人能告诉我我做错了什么，或者只是提供一个替代方案，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:24:53.407

swc 需要一个主入口点。添加：

```
int main() 
{ 
    AS3_GoAsync();
} 
```

# .net - 具有版本控制的实体：使用 SQL 获取最新版本列表的最佳方式

> ID：15326741
> 
> 赞同：3
> 
> 时间：2013-03-10T19:48:03.127
> 
> 标签：.net, sql, sql-server, tsql, relational-database

*问题是关于 SQL Server 2012 上的 SQL。*

## 背景：

有一个名为**Entity**的实体。

**实体**可以有*N* **EntityVersion** ( *1:n* )。

**EntityVersion**可能被批准或不被批准。如果被*批准*`ApprovedBy`，将在整个*版本*中分配一个属性。

## 要求：

要求列出所有*实体的最新***实体版本**，但仅列出每个实体的最新批准版本。

 *## 问题：

我需要找到一种最佳方式来实现大规模解决方案的整个查询。

出于这个原因，我想到了两种可能的方法：

1.  ***EntityVersion 上的IsLast*****标志列**。每当添加新版本时，整个事务将设置`true`为新添加的版本，并且之前的*最后一个版本*将被分配`false`.

2.  **将处理每个新*实体版本*插入并将新版本添加到仅具有最新版本的特殊表**的触发器。**每当添加新版本时，都会从整个特殊表中删除以前的版本。也就是说，`SELECT`获得整个上市将非常便宜。**

 **## 问题：

什么是最佳和有效的方法？您还有其他方法吗？

谢谢！

*请注意，“最佳”意味着它将是可扩展的，并且可以处理数百万条记录*。

* * *

* * *

### 更新

*由于我发现一些用户在他们的答案中要求`Entity`and的架构如何`EntityVersion`，所以我将更好地描述它们。*

*   ***实体**没有文本信息：只是一个标识符和与其他实体的关系。*

*   ***EntityVersion**具有文本和其他信息。例如：标题、描述、作者...**重要的是要提到`EntityVersion`没有来自`Entity`.***

*最简单的解决方案是拥有类似 a 的东西`SELECT DISTINCT`，它既可以定义不同的列，又可以在同一查询中选择其他列。可悲的是，据我所知，这在 SQL Server 中是不可能的（我错了吗？）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:16:19.997

我认为 IsLast 标志列就足够了，但是....

1.  您应该回答的第一个问题是：实体与 EntityVersions 的比率是多少？这会影响你的决定。
2.  另外，我不确定您的表结构，但我会假设 EntityVersion 表是存储更改字段的 Entity 表的副本（或者可能只是差异？）。如果是这种情况，为什么不将最新版本存储在 Entity 本身中。我认为这是一种在语义上更正确的方法。
3.  通常，如果您有正确的索引（也许尝试合并[columnstoreIndexes](http://rusanu.com/2012/05/29/inside-the-sql-server-2012-columnstore-indexes/)？），您不必执行任何特殊工作，例如可能很昂贵的触发器。尝试使用 GroupBy 的常规 Join 进行测试（或者，如果您的 EntityVersion 表具有所有必要的字段，您甚至不需要加入）。或者这种方法可能会更快一点： [https ://stackoverflow.com/a/438990/1792936](https://stackoverflow.com/a/438990/1792936)
4.  同样，您只能根据执行计划和速度测试构建最佳查询。

5.  如果一切都失败了，也许尝试合并[CQRS 模式](http://martinfowler.com/bliki/CQRS.html)或类似的东西***

# haskell - 严格版 foldl 无限运行

> ID：15326749
> 
> 赞同：1
> 
> 时间：2013-03-10T19:48:49.850
> 
> 标签：haskell, tail-recursion, ghci

我不明白为什么以下函数会导致无限循环：

```
import Data.List

isTrue = foldl' (&&) False (repeat False) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-10T19:56:28.567

两者`foldl`和`foldl'`都以这样一种方式定义，即它们必须遍历整个列表才能产生甚至是部分结果（事实上，没有办法定义它们，以免出现这种情况）。所以两者都不适用于无限列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T22:54:39.703

这些是 plain`foldl`和的定义`repeat`：

```
foldl :: (b -> a -> b) -> b -> [a] -> b
foldl f z [] = z
foldl f z (x:xs) = foldl f (f z x) xs

repeat :: a -> [a]
repeat a = a : repeat a 
```

现在，当我们尝试您的定义时会发生什么`isTrue`？（当然，适应了 lazy `foldl`，但这与您的问题相同。）

```
foldl (&&) False (repeat False)
    == foldl (&&) False (False : repeat False)
    == foldl (&&) (False && False) (repeat False) 
```

现在是关键时刻。评估如何从这里继续？嗯，这是一个`foldl`thunk，所以我们必须弄清楚要使用两个 foldl 方程中的哪一个——一个有`[]`模式的，或者一个有`x:xs`. 这意味着我们必须强制`repeat False`查看它是一个空列表还是一对：

```
 == foldl (&&) (False && False) (False : repeat False)
    == foldl (&&) ((False && False) && False) (repeat False) 
```

...它会继续这样做。基本上，`foldl`只能在遇到 a 时终止`[]`，并且`repeat`永远不会产生 a `[]`。

```
 == foldl (&&) ((False && False) && False) (False : repeat False)
    == foldl (&&) (((False && False) && False) && False) (repeat False)
    ... 
```

使用 strict`foldl'`意味着这些`False && False`术语被简化为 just `False`，因此代码将在恒定空间中运行。但它仍然会继续，直到它看到 a `[]`，它永远不会出现：

```
foldl' f z [] = z
foldl' f z (x:xs) = 
    let z' = f z x 
    in z' `seq` foldl' f z' xs

foldl' (&&) False (repeat False)
    == foldl' (&&) False (False : repeat False)
    == let z' = False && False in z' `seq` foldl' (&&) z' (repeat False)

       -- We reduce the seq by forcing z' and substituting its result into the 
       -- its second argument.  Which takes us right back to where we started...
    == foldl' (&&) False (repeat False)
    ... 
```

这些函数没有任何智能让他们看到累加器永远不会是`False`. 对两者的工作`foldl'`方式一无所知。它所知道的只是列表，它只会在一个空列表上结束。`(&&)``repeat False`

* * *

对于来自严格语言的人来说，关于 Haskell 的一个棘手的事情是，他们已经了解到，在这种语言中，左折叠比右折叠“更好”，因为左折叠是尾递归的，因此在恒定空间中运行，而右折叠folds 是真正的递归，并且会在长列表中破坏堆栈。

在 Haskell 中，由于懒惰，它通常是相反的，所以`foldl`和`foldl'`是糟糕的，而`foldr`' 是“好”的。例如，以下将终止：

```
foldr (&&) False (repeat False) 
```

为什么？这是 的定义`foldr`：

```
foldr :: (a -> b -> b) -> b -> [a] -> b
foldr f z = []
foldr f z (x:xs) = f x (foldr f z xs) 
```

比较这里的第二个等式和`foldl`; `foldl'`是尾递归的，而`foldr`尾调用`f`并将递归`foldr`调用作为参数传递。这意味着`f`可以选择是否以及何时向下递归`foldr`; 如果`f`在其第二个参数上是惰性的，则递归将延迟到需要其结果为止。如果`f`丢弃它的第二个参数，那么我们永远不会递归。

因此，应用于我的示例：

```
foldr (&&) False (repeat False)
    == foldr (&&) False (False : repeat False)
    == False && foldr (&&) False (repeat False)
    == False 
```

我们完成了！但请注意，这只有效，因为`(&&)`它的第一个参数是严格的，如果第一个参数是 ，则丢弃它的第二个参数`False`。以下变体进入无限循环：

```
foldr (flip (&&)) False (repeat False) 
```

# python - 使用列表中的值绘制多个函数

> ID：15326754
> 
> 赞同：0
> 
> 时间：2013-03-10T19:49:03.620
> 
> 标签：python

这是我需要做的要点：在 python 中，我有一个参数函数 f(x(t,omega),y(t,omega))，其中 omega 有五个特定值（以非规则间隔）。我想要做的基本上是将这个函数 f 绘制在同一个图上，为欧米茄的五个值中的每一个值。

现在，我有一个工作代码，但我认为它可以更简洁（我很想知道它如何更简洁，因为我想从这个练习中尽可能多地学习 python） ，而且，我不知道如何在这里修复 x(t,omega) 的范围！最后一点是最成问题的。

这是我的“工作”代码：

```
x=linspace(0,10,100)
H0=71
omega0=1.01
Rc=0.5*(omega0/(omega0-1))*(1-cos(x))
tc=(0.5/H0)*(omega0/(omega0-1)**(3/2))*(x-sin(x))
plot(tc,Rc)
omega0=1.1
Rc=0.5*(omega0/(omega0-1))*(1-cos(x))
tc=(0.5/H0)*(omega0/(omega0-1)**(3/2))*(x-sin(x))
plot(tc,Rc)
omega0=1.5
Rc=0.5*(omega0/(omega0-1))*(1-cos(x))
tc=(0.5/H0)*(omega0/(omega0-1)**(3/2))*(x-sin(x))
plot(tc,Rc)
omega0=2.0
Rc=0.5*(omega0/(omega0-1))*(1-cos(x))
tc=(0.5/H0)*(omega0/(omega0-1)**(3/2))*(x-sin(x))
plot(tc,Rc)
omega0=3.0
Rc=0.5*(omega0/(omega0-1))*(1-cos(x))
tc=(0.5/H0)*(omega0/(omega0-1)**(3/2))*(x-sin(x))
plot(tc,Rc)
show() 
```

如您所见，tc 和 Rc 充当我的 x(t,omega) 和 y(t,omega) 并且我使用 x 作为我的参数变量，因为...嗯，我已经以 tc 的形式拥有 at . 如果您绘制此图，您会发现即使所有线条在技术上都存在，也很难从中获取大量信息。任何帮助深表感谢！

编辑：我得到了我需要的东西。对于因遇到类似问题而遇到此线程的任何人，我修改后的代码在很大程度上要归功于以下答案和一些进一步的搜索：

```
import numpy as np
import pylab as pl
from pylab import *

x=linspace(0,50,1000)
H0=71 #units km/s/Mpc
omegas = [1.01,1.1,1.5,2.0,3.0]
Rcs = [0.5*(omega0/(omega0-1))*(1-cos(x)) for omega0 in omegas]
tcs = [(0.5/H0)*(omega0/(omega0-1)**(3/2))*(x-sin(x)) for omega0 in omegas]
for pair in zip(tcs,Rcs):
        pl.plot(pair[0],pair[1])
pl.xlim(0,0.55)
pl.ylim(0,60)
pl.show() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T22:40:18.523

减少代码冗余的最明显方法是使用 for 循环或列表推导：

```
x=linspace(0,10,100)
H0 = 71
omegas = [1.01,1.1,1.5,2.0,3.0]
rcs = [0.5*(omega0/(omega0-1))*(1-cos(x)) for omega0 in omegas]
tcs = [(0.5/H0)*(omega0/(omega0-1)**(3/2))*(x-sin(x)) for omega0 in omegas]
for pair in zip(tcs,rcs):
    plot(pair[0],pair[1])
show() 
```

# jquery - 选择选项不适用于 jQuery

> ID：15326755
> 
> 赞同：0
> 
> 时间：2013-03-10T19:49:04.847
> 
> 标签：jquery

我想用 jquery 改变风格，如下所示：

```
$(document).ready(function(){
     $('#tmadrp').click(function(){
            if($('#tmadrp option:selected').val().toString()=='theme1')
            {
                $('link[href="style1"]').remove();
                $('head').append('<link type="text/css" href="syle2"/>')
            }
}); 
```

但这没有反应。我该怎么办。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:54:22.673

更合适的方法是：

```
$(document).ready(function(){
    $('#tmadrp').on('click', function(){
        if ($.trim( this.value ) == 'theme1' ) {
            $('link[href="style1"]')[0].disabled = true;
            var link = $('<link />', {type: 'text/css', href: 'syle2'});
            $('head').append(link);
        }
    });
}); 
```

你知道你写的是'syle2'而不是'style2'，并且删除样式表并不会删除已经加载的样式？

# html - 元素项上的 CSS 样式

> ID：15326757
> 
> 赞同：0
> 
> 时间：2013-03-10T19:49:16.227
> 
> 标签：html, css, drop-down-menu

我有一些列表项，我希望相应的下拉菜单向左对齐，对于某些元素，有些应该保留。（请参阅[链接](http://www.atlastechng.com/demo/telime/)。）当您将鼠标悬停在“更多”、“意见”和“生活方式”链接上时，它会向右对齐并超出页面，从而导致冗长的内容。我希望只有这 3 个菜单列表在您悬停时与左侧对齐，而其他未提及的菜单列表则保留。我能做些什么来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T19:19:57.600

在浏览完您的 html 之后，我建议您查找类*leaf* *first leaf* 和*last leaf*并在您的 CSS 中添加另一个类来模仿这些类，除了*float:right*。然后将其应用于要向右浮动的菜单。

如果这使元素向右移动，也许可以尝试

```
position:inherit;
left:-Xpx; 
```

并将 X 替换为您希望它向左移动的像素数量。

在[这个网站上](http://www.atlastechng.com/demo/new/tellme/)

运气

# makefile - 从突然结束的制造中恢复

> ID：15326759
> 
> 赞同：0
> 
> 时间：2013-03-10T19:49:53.107
> 
> 标签：makefile, resume

当我编译大型程序（例如 gcc 或 clang）时，我的计算机可能会过热并被迫关闭。

我想`make`从我中断的地方继续这个过程。问题似乎是有一半完成/写入`.o`的文件漂浮在周围，导致其余的构建中断（当我指定时这尤其糟糕`-j 8`）

有没有一种简单的方法来解决这个问题（不做`make clean`或`make distclean`类似的事情）？

使用 GNU Make 3.81

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:21:10.067

与 Beta 的评论相同，但更可靠且更容易混淆的 IMO 将更改您的编译规则，以便编译为临时文件，然后最后将其重命名为真实文件。所以你可能有类似的东西：

```
%.o : %.c
        $(CC) $(CFLAGS) $(CPPFLAGS) -o $@ -c $< 
```

相反，你会使用类似的东西：

```
%.o : %.c
        $(CC) $(CFLAGS) $(CPPFLAGS) -o $@.tmp -c $< \
            && mv -f $@.tmp $@ 
```

您可能也想添加“rm -f $@”，也可能不想添加。

至于您是否可以“以编程方式”进行此更改，这完全取决于您的 makefile 及其结构。如果它是一个格式良好的 makefile，那么您可以在一些隐式规则中的几个地方进行这些更改，如上所述。

# c# - 未在投影仪上显示的应用程序

> ID：15326760
> 
> 赞同：-1
> 
> 时间：2013-03-10T19:49:55.320
> 
> 标签：c#, .net

有没有办法在 .NET 上创建一个应用程序，该应用程序将在与投影仪/外部 PC 连接时使用，但仅显示在主屏幕上？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:11:05.583

我不认为这是可能的。Powerpoint 具有仅在主显示屏上显示笔记的功能。但这只有在桌面扩展且未镜像到投影仪时才有可能。

因此，您必须将桌面扩展到投影仪，然后手动将应用程序窗口放在主屏幕上。

`System.Windows.Forms.Screen.AllScreens`使您可以访问 C# 中的监视器信息。PrimaryScreen 属性告诉您哪个屏幕是主屏幕。您可以通过尊重屏幕宽度将窗口从一个屏幕移动到另一个屏幕。

# .net - 无法以编程方式添加 ajax 控件 takeit 日历扩展器

> ID：15326766
> 
> 赞同：0
> 
> 时间：2013-03-10T19:51:10.460
> 
> 标签：.net, ajax, c#-4.0, asp.net-ajax, ajaxcontroltoolkit

我正在尝试添加 AjaxControlToolkit 的日历控件，但出现错误。代码和错误如下：

```
 TableCell tc4 = new TableCell();

    TextBox txtSRVDate = new TextBox();
    tc4.Controls.Add(txtSRVDate);
    AjaxControlToolkit.CalendarExtender calen = new AjaxControlToolkit.CalendarExtender();
    calen.TargetControlID = "txtSRVDate";
    calen.Format = "dd/MM/yyy";

    tc4.Controls.Add(calen);
    tr2.Cells.Add(tc4);
    tblInwardRight.Rows.Add(tr2); 
```

错误是：

> System.InvalidOperationException：“”的 TargetControlID 无效。找不到 ID 为“txtSRVDate”的控件。

你能告诉我我哪里错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:02:10.053

错误是我没有设置 Ajaxcontrol 日历控件所引用的文本框的 ID。我设置了文本框的 ID，现在代码工作正常..

# linux - Grep 不使用特殊字符

> ID：15326767
> 
> 赞同：-1
> 
> 时间：2013-03-10T19:51:18.620
> 
> 标签：linux, unix, grep

我想要 Egrep 这个，来自一个文件：

```
egrep "check (hello)" 
```

但 Egrep 不工作，因为“（）”。如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T19:52:20.237

你需要逃避它们：

```
egrep "check \(hello\)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T19:52:45.940

如果您不希望字符具有特殊含义，请使用[`fgrep`](http://ss64.com/bash/fgrep.html), not 。[`egrep`](http://ss64.com/bash/egrep.html)

# javascript - 在流星中保留禁用的输入

> ID：15326768
> 
> 赞同：1
> 
> 时间：2013-03-10T19:51:22.993
> 
> 标签：javascript, web-applications, data-binding, meteor, sync

我目前正在[流星](http://meteor.com/)`keyup`中设计一个用户界面，其中包含几个文本输入，其内容在更改（事件）时保存到会话变量中。由于该`preserve-inputs`软件包，这些输入框在它们处于焦点时不会重新渲染。

我现在尝试默认禁用这些输入框并使其在双击时可编辑（这可能是一个糟糕的选择，但它对于手头的问题来说是最简单的，对于初稿来说已经足够了——也许我会问稍后在 UX 上）。但是，当最初禁用时，输入框*不会*被保留并在输入单个字符时重新呈现，再次禁用它。

虽然保留不可编辑的元素不被重新渲染通常是没有意义的，但我在代码中找不到任何会歧视`disabled`状态的东西。那么它在哪里，我该如何规避呢？（当然，我可以`disabled`在双击/模糊时设置会话变量并将输入框重新渲染为启用状态，但这对我来说似乎过于复杂）。

下面的代码（注意它是纯粹的客户端 JavaScript）重现了这个问题。它还呈现第二个输入框，该输入框永远不会被禁用，但也只能在双击后访问。这可以按预期工作而无需重新渲染。现场演示部署到[http://preserve-disabled-inputs.meteor.com/](http://preserve-disabled-inputs.meteor.com/)。

`disabled.html`：

```
<head>
  <title>disabled</title>
</head>
<body>
  {{> body}}
</body>

<template name="body">
  <p>Double-click to enter text</p>
  {{> input f}}
  {{> input t}}
</template>

<template name="input">
  <div style="position: relative; width: 400px;">
    <input id="{{id}}" class="input" type="text" value="{{value}}" style="width: 100%;" {{disabled}}/>
    <!-- events on disabled inputs are not triggered -->
    <!-- overlay with transparent div to catch clicks -->
    <div class="catch" style="position: absolute; left: 0; top: 0; right: 0; bottom: 0;" />
  </div>
</template> 
```

`disabled.js`：

```
if (Meteor.isClient) {
  // Setup for the example
  Session.setDefault('valuefalse', 'This one is preserved and can be edited without problems');
  Session.setDefault('valuetrue', 'This one is not preserved and loses focus on edit');

  Template.body.t = function() {
    return { disabled: true };
  }

  Template.body.f = function() {
    return { disabled: false };
  }

  Template.input.disabled = function() {
    return this.disabled ? 'disabled="disabled" ' : '';
  }

  Template.input.id = function() {
    return this.disabled ? 'd' : 'e';
  }

  Template.input.value = function() {
    return Session.get('value' + this.disabled);
  }

  // Here goes ...
  Template.input.events({
    'dblclick div.catch': function (evt) {
      var input = $('input.input', evt.target.parentNode);
      // Enable text box
      input.removeAttr('disabled');
      input.focus();
      // Don't render the div so the input box becomes accessible
      evt.target.style.display = 'none';
    },
    'keyup input.input': function (evt) {
      Session.set('value' + this.disabled, evt.target.value);
    },
    'blur input.input': function(evt) {
      // Re-render the catcher div
      $('div.catch', evt.target.parentNode).css('display', '');
      // Disable text box, if appliccable
      if (this.disabled) evt.target.disabled = 'disabled';
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-06T14:49:41.400

对我来说，唯一可行的选项是定义 disabled="true"，因此代码如下所示：

```
disabled="{{#if isDisabled}}true{{/if}}" 
```

如果 isDisabled 为 false，Meteor 甚至不会在 DOM 中渲染/显示禁用的标签（例如 disabled=""）。

# c++ - sscanf 未知错误？

> ID：15326769
> 
> 赞同：-2
> 
> 时间：2013-03-10T19:51:32.887
> 
> 标签：c++, file, input, formatting

我的输入文件有很多类似于：

```
ATOM 339 OP1 DG D 218 72.270 54.958 23.040 1.00 27.52 O 
```

我想提取 3 个坐标： `72.270 54.958 23.040`从每一行。我已将每一行存储为一个字符串，并使用以下内容提取坐标：

```
sscanf(protein[j].c_str(),"%s %s %s %s %s %s %f %f %f",useless1,useless2,useless3,useless4,useless5,useless6,&xCord,&yCord,&zCord); 
```

这里无用的是所有字符串的名称。这会产生**许多**警告和程序崩溃：

```
warning: format '%s' expects type 'char*', but argument 6 has type 'int'.          
warning: cannot pass objects of non-POD type 'struct std::string' through '...'; call will abort at runtime. 
```

问题是什么？

如果输入 char 数组有多个空格而不是一个空格，sscanf() 也会崩溃吗？（为了消除此错误的可能性，我删除了输入文件中的多个空格。）

**编辑：我首先检查了它们是整数的可能性。（我不是那么大的菜鸟。）这是初始代码：**

```
string str,useless1,useless2,useless3,useless4,useless5,useless6,useless7,useless8,useless9; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T19:56:12.550

> 问题是什么？

编译器***只是告诉你***它是什么。

> format`'%s'`需要 type `'char *'`，但参数 6 有 type `'int'`。

因此，字符串中的第 6 个格式说明符告诉`scanf()`我们期望 a `char *`，但您传递的是a `int`。

> 不能通过非 POD 类型的`'struct std::string'`对象`'...'`

这意味着 C++ 对象（更准确地说，不是普通旧数据类型的变量）不能传递给可变参数函数。而你正在尝试这样做。它甚至警告你它**会坏掉。**

* * *

其他的建议：

1.  在 C++ 中，很少建议使用 C 函数。您通常应该坚持使用`std::cin`et al。为了更好的风格。

2.  然而，如果你尽管如此，仍然坚持使用 C 函数，***那就别管穷人`scanf()`了。***无论如何，它不会做你认为它会做的事情。使用 获取一行用户输入`fgets()`，并使用其中一个或在某些或函数`std::stringstream`的帮助下对其进行解析。`<cstring>``<string.h>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T19:56:44.340

该错误告诉您参数六是`useless6`int 而不是 a `char *`。

此参考解释了为什么不能将[非 POD 传递给可变参数函数](http://tycho.ws/blog/2010/06/variadic)

# c# - 无法在 devart linconnect 中加载数据上下文

> ID：15326773
> 
> 赞同：0
> 
> 时间：2013-03-10T19:51:41.193
> 
> 标签：c#, asp.net, devart, linqdatasource, linq-to-mysql

我已添加`devart linqconnect ORM`以连接到`mysql database`. 虽然它是试用版，但我`shopping.iqml`在我的应用程序中创建了一个文件，它会自动为`linq to mysql`.

当我编写`using shoppingdatacontext;`它时它可以工作并显示在智能感知菜单中但是，当我`linq datasource`从工具栏添加一个并且当我配置数据源并尝试选择数据上下文时`shoppingDataContext`，它不会出现在下拉列表中。当我尝试手动编写 linqdatasource 的上下文菜单类型属性（然后出现在配置数据源下拉列表中）并尝试对其进行配置时，它给了我一个错误：

`the Type 'ShoppingContext.ShoppingDataContext' could not be loaded. If the type is located in the App_code folder, please check that it compiles. If the type is located in a compiled assemblies, please check that the assembly is referenced by the project.`

我试图从项目中添加程序集它仍然无法正常工作并尝试了其他方法无济于事..我无能为力..请有人帮我解决这个问题..

我的 Web.config 文件是：

```
<configuration>
<connectionStrings>
<remove name="LocalMySqlServer" />

<add name="LocalMySqlServer" connectionString="Server=localhost; Database=shopping; uid=root; pwd=007;"
  providerName="MySql.Data.MySqlClient" />
<add name="ShoppingDataContextConnectionString" connectionString="User Id=root;Password=007;Host=localhost;Database=shopping;Persist Security Info=True" />
</connectionStrings>

<system.web>
<compilation debug="true" targetFramework="4.0">
<assemblies>
<add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
<add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="Devart.Data.Linq.Web, Version=4.1.197.0, Culture=neutral, PublicKeyToken=09AF7300EEC23701"/>
    <add assembly="System.Data.Linq, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
    <add assembly="Devart.Data.Linq, Version=4.1.197.0, Culture=neutral, PublicKeyToken=09AF7300EEC23701"/>
</assemblies>

  </compilation>
<authentication mode="Forms">
  <forms loginUrl="~/Account/Login.aspx" timeout="2880"/>
</authentication>
<membership defaultProvider="MySqlMembershipProvider">
  <providers>
    <clear/>
    <add name="MySQLMembershipProvider" type="MySql.Web.Security.MySQLMembershipProvider, MySql.Web, Version=6.5.5.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" connectionStringName="LocalMySqlServer" enablePasswordRetrieval="false" enablePasswordReset="true" requireQuestionAndAnswer="false" requireUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="0" passwordStrengthRegularExpression="" applicationName="/" autogenerateschema="true"/>
  </providers>
</membership> 
```

感谢您的帮助..提前谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T12:34:23.223

将 Devart LinqConnect 模型添加到项目后，您应该构建应用程序以使所有更改生效。构建完成后，为 LinqDataSource 配置数据源时，“shoppingdatacontext”将在下拉列表中可用。

# android - Manifest.xml 错误

> ID：15326774
> 
> 赞同：2
> 
> 时间：2013-03-10T19:51:52.603
> 
> 标签：android, xml

我正在开发一个刚开始使用 Android SDK 的项目。在 Manifest.xml 中，我找不到它所说的错误。错误是：

```
[2013-03-10 12:34:22 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper]   Parser exception for C:\Users\Zac\workspace\SlenderAR\AndroidManifest.xml: Attribute "name" bound to namespace "http://schemas.android.com/apk/res/android" was already specified for element "uses- permission". 
```

我的 Manifest.xml 文件包含以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.slenderar"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-permission
        android:name="android.permission.CAMERA"
        android:name="android.permission.FINE_LOCATION" />

    <uses-feature
        android:name="android.hardware.camera" android:required="true"
        android:name="android.hardware.camera.autofocus" android:required="false"
        android:name="android.hardware.location.gps" android:required="true"
        android:name="android.hardware.sensor.compass" android:required="true"
        android:name="android.hardware.sensor.gyroscope" android:required="true"
        android:name="android.hardware.sensor.accelerometer" android:required="true" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" android:debuggable="true">
        <activity
            android:name="com.example.slenderar.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:54:06.640

你的块

```
<uses-permission
    android:name="android.permission.CAMERA"
    android:name="android.permission.FINE_LOCATION" /> 
```

应该

```
<uses-permission android:name="android.permission.CAMERA"/>
<uses-permission android:name="android.permission.FINE_LOCATION" /> 
```

每个权限块中只允许一个名称。关于 uses-feature 块可以说类似的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:01:45.437

不要将两个权限相互组合：

试试这个代码：

```
<uses-permission android:name="android.permission.FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.CAMERA"></uses-permission> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T19:54:58.433

也删除

```
<?xml version="1.0" encoding="utf-8"?> 
```

并用正确的代码语法替换您的旧权限

```
<uses-permission android:name="android.permission.FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.CAMERA"></uses-permission> 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-20T13:55:47.097

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.sqlitenew.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
<uses-permission android:name="android.permission.FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.CAMERA"></uses-permission>
</manifest> 
```

# ruby-on-rails-3 - 从 Carrierwave 文档附件的链接下载文件

> ID：15326776
> 
> 赞同：8
> 
> 时间：2013-03-10T19:52:02.747
> 
> 标签：ruby-on-rails-3, download, carrierwave

我正在尝试创建一个简单的链接，单击该链接会启动与特定资源关联的文档的下载。我有一个资源模型，在该模型中有一个名为“文档”的列。单击链接时，我能够成功地查看内联文档，但我更愿意下载它。我一直在阅读有关内容类型和 send_file 的内容，但我无法将它们完全拼凑起来以发挥作用。

这是我认为我需要用于链接的代码：
`<%= link_to 'Download File', :action => "download_file" %>`

这会引发错误：
ResourcesController#show 中的 ActiveRecord::RecordNotFound 找不到 id=download_file 的资源

当我将链接更改为此时，它会在浏览器中打开文件：
`<%= link_to 'Open file', resource.document_url, :target => "_blank" %>`

在我的 ResourcesController 我定义了这个方法：

```
 def download_file
  @resource = Resource.find(params[:id])
  send_file(@resource.file.path,
        :filename => @resource.file.name,
        :type => @resource.file.content_type,
        :disposition => 'attachment',
        :url_based_filename => true)
  end 
```

我在 routes.rb 中设置了一条路线，如下所示：

```
 resources :resources do
    get 'resources', :on => :collection
  end 
```

因此，基于此错误，我在 ResourcesController 中的 download_file 方法似乎无法确定与文档关联的资源记录的 id。

我正在运行：Rails 3.2.11 Carrierwave 0.8.0 Ruby 1.9.3-p194

我希望能对此有所了解。我搜索了许多文章，但找不到简单的教程。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-10T21:35:17.597

我能够弄清楚这一点。我将尝试解释我是如何解决这个问题的。

download_file 方法正确地位于 ResourcesController 中，但我没有使用正确的变量名。对于我的目的，这是正确的方法定义：

```
 def download_file
  @resource = Resource.find(params[:id])
  send_file(@resource.document.path,
        :type => 'application/pdf',
        :disposition => 'attachment',
        :url_based_filename => true)
  end 
```

在我的情况下，我在变量@resource 中返回了一条记录，该记录有一个与之关联的文档（同样，我使用的是 Carrierwave）。所以 send_file 需要的第一个参数是路径（参见[send_file 的 API](http://apidock.com/rails/ActionController/Streaming/send_file)）。此路径信息由@resource.document.path 提供。

send_file 接受许多其他参数，这些参数似乎是可选的，因为我只需要其中三个。有关其他参数，请参阅 API 文档。

为我抛出错误的一个是类型：。我将变量“@resource.file.content_type”传递给它，但它显然是在寻找文字。一旦我通过了它的应用程序/pdf，它就起作用了。如果没有明确设置，下载的文件没有添加文件扩展名。无论如何，对于我的应用程序，此文档可能是各种不同的 mime 类型，从 pdf 到 word 再到 mp4。所以我不确定如何指定多个。

对于我的目的（下载而不是在浏览器中显示）来说，真正重要的论点是 :disposition 需要设置为“附件”而不是“内联”。

另一个参数 :url_based_filename 显然用于从 URL 确定文件的名称。由于我没有提供文件名，也许这是我向正在下载的文件提供文件名的唯一方法，但我不确定这一点。

我还需要将 link_to 标记更改为：
`<%= link_to 'Download File', :action => 'download_file', :id => resource.id %>`

请注意，为 :id 符号提供当前资源的 id 提供了识别相关资源所需的特定信息。

我希望这对其他人有所帮助。这对其他人来说一定很明显，因为我没有找到任何文件下载文件的基础教程。我还在学习很多东西。

更新：我不得不玩弄这个以获得所需的行为。这是有效的新方法：

```
 def download_file
        @resource = Resource.find(params[:id])
        send_file(@resource.document.path,
              :disposition => 'attachment',
              :url_based_filename => false)
      end 
```

通过这些更改，我不再需要设置 :type。设置 ":url_based_filename => true" 会继续在 URL 中的记录 id 之后命名文件。根据我对该参数功能的阅读，将其设置为 false 似乎违反直觉，但是，这样做会产生以实际文件名命名文件的预期结果。

我还使用了[mime-types gem](http://rubygems.org/gems/mime-types)并将以下内容添加到我的 video_uploader.rb 文件中：

```
require 'carrierwave/processing/mime_types'

class VideoUploader < CarrierWave::Uploader::Base
include CarrierWave::MimeTypes
process :set_content_type 
```

这个 gem 显然设置了从文件名中的文件扩展名猜测的 mime 类型。这样做使我不必在我的 download_file 方法内的 send_file 参数中显式设置 :type 。

# javascript - 未捕获的 URIError：URI 格式错误 - Windows 上的 jquery UI 选项卡

> ID：15326777
> 
> 赞同：18
> 
> 时间：2013-03-10T19:52:04.633
> 
> 标签：javascript, jquery, html, jquery-ui, uri

我在本地 Windows 开发环境中使用 jquery UI 选项卡。我正在使用他们的[演示代码进行测试](http://jqueryui.com/tabs/#default)

```
<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nunc tincidunt</a></li>
    <li><a href="#tabs-2">Proin dolor</a></li>
    <li><a href="#tabs-3">Aenean lacinia</a></li>
  </ul>
  <div id="tabs-1">
    <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. </p>
  </div>
  <div id="tabs-2">
    <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie</p>
  </div>
  <div id="tabs-3">
    <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede ve</p>

  </div>
</div> 
```

问题是我在此函数上收到“未捕获的 URIError：URI 格式错误”：

```
function isLocal( anchor ) {
    return anchor.hash.length > 1 &&
        decodeURIComponent( anchor.href.replace( rhash, "" ) ) ===
Uncaught URIError: URI malformed
            decodeURIComponent( location.href.replace( rhash, "" ) );
} 
```

我怀疑这是由于 Windows 环境中的 URI 看起来像这样：

```
file:///C:/Work/my%20project/yadda%20ac%E7%F5es%20yadda/submenu.html#tabs-1 
```

我怎样才能让它在本地 Windows 上工作，因为我的客户希望在上线之前看到它在那里工作？我已经测试过，我知道这是由 uri 上的特殊字符的编码引起的（比如单词“acções”）。**有没有办法让它即使使用特殊字符也能正常工作**？

我知道我可以简单地通过删除这些字符并重命名文件/文件夹来解决这个问题，但我希望有一个更适合客户的解决方案，以防他们决定再次重命名文件夹（一切都只是在他们的脸上出现了 CABOOM ）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-19T20:14:41.127

这是 decodeURIComponent 方法的结果，该方法假定给定字符串的百分比编码字节采用 UTF-8 格式（参见ECMAScript 第 15.1.3 节中[解码操作](http://es5.github.io/x15.1.html#Decode)的步骤 4.d.vii.8）。您的示例字符串：

```
"file:///C:/Work/my%20project/yadda%20ac%E7%F5es%20yadda/submenu.html#tabs-1" 
```

包含百分比解码的字节 0xE7 0xF5，它们不能在有效的 UTF-8 字符串中一个接一个地出现（它们代表`çõ`Windows-1252 中的两个字符）。因此，decodeURIComponent 会引发 URIError 异常。

解决这个问题的一种方法（我还没有测试过）是确保您的网页使用 UTF-8 字符编码而不是 UTF-8 字符编码提供服务，`ISO-8859-1`我认为这是默认设置。

为此，请包含如下 META 标记：

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"> 
```

（虽然理想的做法是包含一个包含字符集的 Content-Type 标头，但这在涉及文件系统的本地测试中通常是不可能的。）

并确保网页本身以 UTF-8 编码。

* * *

此外，您的示例字符串出现在网页的什么位置？它是如何产生的？您在哪个浏览器上测试了该行为？答案将帮助我告诉你该怎么做。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-12T19:06:09.163

这是 jquery 中的一个错误 - [http://bugs.jqueryui.com/ticket/9518](http://bugs.jqueryui.com/ticket/9518) - 存在于非 UTF8 URL。我有同样的问题并解决了它。由于我无法将页面的编码更改为 UTF-8，我最终修补了我的 jqueryui 并使用 Rainer Plumer 的解决方案作为解决方法，但我不得不使用它两次，因为我有一些包含编码 URI 的 URI 参数。所以我的解决方案是

```
decodeURIComponent( unescape( unescape(s)) ) 
```

更一般地说，可能应该有重复直到循环，直到你得到相同的结果。这种解决方法肯定不是一个干净的解决方案。此处询问干净的解决方案：

[使用非 UTF-8 编码的 get 方法提交表单](https://stackoverflow.com/q/19702662/684229)

PS：jquery UI的整个补丁：

```
function isLocal( anchor ) {
        return anchor.hash.length > 1 && 
                decodeURIComponent( unescape( unescape( anchor.href.replace( rhash, "" ) ) ) ) ===
                        decodeURIComponent( unescape( unescape( location.href.replace( rhash, "" ) ) ) );
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-31T01:36:45.760

像这样的东西？

```
s = "file:///C:/Work/my%20project/yadda%20ac%E7%F5es%20yadda/submenu.html#tabs-1";
decodeURIComponent( unescape(s) ) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-09-06T11:11:11.393

我遇到了同样的错误“未捕获的 URIError：URI 格式错误”，我通过以下方式修复了它：

`decodeURIComponent(encodeURIComponent(mystring))`

注意：将我的页面编码更改为 UTF-8 或添加 unescape() 对我不起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-06T09:56:23.910

我自己也有这个问题。我找不到清理源字符串的方法，所以我只是绕过了异常，所以数据会继续加载。希望这可以帮助。

```
try {
    myVal = decodeURIComponent(sourceVal);
} catch (err) {
    myVal = "";
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-11-06T20:04:48.110

我将演示代码剪切并粘贴到记事本中，保存在文件夹路径中，文件夹名称（新文件夹）中有一个空格作为 test1.html。然后我双击 test1.html，它就像做梦一样。

你显然改变了一些东西，无论它是什么改变它都可以正常工作。

# android - ActivityThread.handleBindApplication 中的 NullPointerException

> ID：15326780
> 
> 赞同：3
> 
> 时间：2013-03-10T19:52:29.900
> 
> 标签：android

我收到了这个堆栈跟踪报告，其中根本没有提到我的应用程序：

```
java.lang.NullPointerException
at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3979)
at android.app.ActivityThread.access$1300(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1255)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method) 
```

有谁知道如何防止这种异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-10T19:58:21.693

与往常一样，当发生这种情况时，我必须深入研究 Android 源来评估问题，我想我会在这里发布我的发现，这样可以节省其他人的时间。

此错误对应于[**4.1.1_r1**](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/app/ActivityThread.java/#3979)和[**4.1.2_r1**](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/4.1.2_r1/android/app/ActivityThread.java/#3979)中的此代码：

```
 final ContextImpl appContext = new ContextImpl();
    appContext.init(data.info, null, this);
    final File cacheDir = appContext.getCacheDir();

    // Provide a usable directory for temporary files
    System.setProperty("java.io.tmpdir", cacheDir.getAbsolutePath()); // line 3979

    setupGraphicsSupport(data.info, cacheDir); 
```

发生这种情况是因为[`appContext.getCacheDir()`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/app/ContextImpl.java#ContextImpl.getCacheDir%28%29)在某些情况下返回 null：

```
@Override
public File getCacheDir() {
    synchronized (mSync) {
        if (mCacheDir == null) {
            mCacheDir = new File(getDataDirFile(), "cache");
        }
        if (!mCacheDir.exists()) {
            if(!mCacheDir.mkdirs()) {
                Log.w(TAG, "Unable to create cache directory");
                return null;
            }
            FileUtils.setPermissions(
                    mCacheDir.getPath(),
                    FileUtils.S_IRWXU|FileUtils.S_IRWXG|FileUtils.S_IXOTH,
                    -1, -1);
        }
    }
    return mCacheDir;
} 
```

相关： [https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/-694j87eXVU](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/-694j87eXVU)

* * *

但是，这*似乎在***4.2.1**版本中得到了正确处理：

```
 final ContextImpl appContext = new ContextImpl();
    appContext.init(data.info, null, this);
    if (!Process.isIsolated()) {
        final File cacheDir = appContext.getCacheDir();

        if (cacheDir != null) {
            // Provide a usable directory for temporary files
            System.setProperty("java.io.tmpdir", cacheDir.getAbsolutePath());

            setupGraphicsSupport(data.info, cacheDir);
        } else {
            Log.e(TAG, "Unable to setupGraphicsSupport due to missing cache directory");
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:02:55.147

我通常会发现当服务、活动或其他任何东西在启动时遇到问题时，我会遇到这类异常。通常，我在课堂上的变量初始化中做了一些坏事 (TM)，或者我对我正在实例化的布局或视图做了其他坏事。我将首先查看发生这种情况时正在启动的内容。

触发这种异常的另一种简单方法是调用和活动（或服务等），而无需在清单中声明它。或者尝试做一些需要许可的事情并忘记声明（尽管在这种情况下它看起来不像那个错误）。

# macos - Mac的USB 2探测器？

> ID：15326781
> 
> 赞同：1
> 
> 时间：2013-03-10T19:52:30.770
> 
> 标签：macos, usb, libusb, sniffer

我正在尝试为[Tengu](http://www.tengutengutengu.com/) USB 设备编写一个小驱动程序。我尝试使用 USB Prober.app，但它似乎只能探测 USB 1 设备（可以探测我的旧罗技鼠标）。是否可以在 Mac 上嗅探 USB 2 数据？

# sql - SQL oracle，正确显示输出

> ID：15326787
> 
> 赞同：1
> 
> 时间：2013-03-10T19:52:58.943
> 
> 标签：sql, database, oracle, select, inner-join

![](../Images/0e0dae66fdcfb5b5ab492bdd5dfd1edc.png)

我对输出有点坚持......

问题：需要列出组和属于每个组的成员。对于每个组，显示唯一标识符及其名称（如果有）。对于每个成员，显示其组长的唯一标识符、姓名、性别、出生日期和标识符。在每个组中，按姓氏和名字对成员进行排序。

我的答案：

```
 SELECT 
      P.Name,
      P.DOB,
      P.Gender,
      G.GroupName,
      GL.PersonId   
FROM Person P
INNER JOIN GroupMember GM ON GM.PersonId =  P.PersonId
INNER JOIN Group G ON G.GroupId =  P.GroupId
INNER JOIN GroupLeader GL ON GL.GroupId = G.GroupId 
```

问题是，如何在这篇文章的顶部使用逻辑 ERD 正确显示这个问题......

对于我的回答，我是这样的：但是我创建了这个表，或者我错过了一些想法（（

```
ORA-00942: table or view does not exist 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:04:00.020

这个：

```
 INNER JOIN gLeader GL ON GL.group_idG.group_id 
```

是无效的。不应该是这个吗？

```
 INNER JOIN gLeader GL ON GL.group_id = G.group_id 
```

**编辑从这里开始**

从这个开始：

```
SELECT 

  -- P.Name
  -- , P.DOB
  -- , P.Gender
  -- , G.GroupName
  -- , GL.PersonId   

 count(*)
 FROM Person P
 -- INNER JOIN GroupMember GM ON GM.PersonId =  P.PersonId
 -- INNER JOIN Group G ON G.GroupId =  P.GroupId
 -- INNER JOIN GroupLeader GL ON GL.GroupId = G.GroupId 
 where 1=2 
```

如果它运行成功，请逐行取消注释 from 子句的其余部分并每次运行它。如果您没有收到任何错误，请从 select 子句中删除 count(*)，并取消注释每个字段，直到您收到错误为止。然后你就会知道问题出在哪里了。

如果第一次出错，您可能必须使用数据库名称或他们在 oracle 中调用的任何名称来限定您的表名。在我的工作中，我不得不做这两种类型的事情。

```
from database.tablenam 
```

和

```
 from "database"."tablename" 
```

# ios - iOS 设备间同步时间

> ID：15326788
> 
> 赞同：5
> 
> 时间：2013-03-10T19:53:01.860
> 
> 标签：ios, time, sync

**目标：**

给定 N 个设备，我想让它们开始一个精确的 10 秒的动作并最终收集这些数据。问题是，所有 N 个设备都应该在同一毫秒内启动此过程。

**优势：**

由于要收集数据，我可以进一步检测设备之间的毫秒差异。但是这种方法还需要另一种机制来检测服务器端的此类行为。

**问题：**

在 N 个设备之间同步“开始”时间的机制应该是什么？我们能否检测到设备和服务器时钟之间的差异（因为它会给出与同步时间相同的结果）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:02:32.293

是的。

假设所有设备都在不到一秒的时间内收到消息：

服务器向 N 个设备发送消息。此消息包含服务器的时间戳以及进程应该开始的时间（将来）（例如 2000 毫秒）。

每个设备都会用自己的时间戳检查服务器的时间戳并计算差异。然后启动一个计时器，以便在未来的精确时刻启动该过程。

这样（理论上）设备会在完全相同的时间启动一个进程。我说的是理论上，因为如果 iOS 设备上没有其他应用程序已经在消耗进程和内存来干扰您的应用程序，这将起作用。

# backbone.js - 骨干允许集合中的重复项

> ID：15326789
> 
> 赞同：3
> 
> 时间：2013-03-10T19:53:09.010
> 
> 标签：backbone.js

我想在我的收藏中有重复

```
var Model = Backbone.Model.extend({});

var Collection = Backbone.Collection.extend({});
var collection = new Collection({});

var model1 = new Model({idk: 1, name: "pete"})
var model2 = new Model({idk: 2, name: "phil"})

collection.add(model1);
collection.add(model2);
collection.add(model1); 
```

当我调用`console.log(collection.toJSON())`它时，只注销一个包含 2 个模型对象的数组，以及一些空对象。有什么办法可以让我的收藏接受重复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T21:56:30.863

首先，空模型/对象是将 emply 对象传递给 Backbone.Collection.constructor 的结果。

```
> var collection = new Backbone.Collection({});
> collection.length;
=> 1 
```

接下来，每个 Backbone.Model 都保留对其集合的引用（使用集合属性），因此您*不能*在集合中复制模型。相反，您可以通过执行以下操作来复制模型属性：

```
> var collection = new Backbone.Collection();
> var model = new Backbone.Model({ foo: 'bar' });
> collection.add(model);
> collection.add(model.toJSON());
> collection.length;
=> 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T21:58:57.890

代替

```
collection.add(model1); 
```

称呼

```
collection.add(model1.toJSON()); 
```

虽然模型中不能有任何“id”属性，但它不会重复。

# r - 在R中选择第2列到最后一列

> ID：15326792
> 
> 赞同：19
> 
> 时间：2013-03-10T19:53:19.060
> 
> 标签：r, dataframe, multiple-columns

我有一个包含多列的数据框。现在，我想去掉 row.names 列（第 1 列），因此我尝试选择所有其他列。

例如，

```
newdata <- olddata[,2:10] 
```

最后一列是否有默认符号，所以我不必计算所有列？我试过了

```
newdata <- olddata[,2:] 
```

但它没有用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-10T19:58:06.980

我认为最好专注于*想要摆脱一列数据*而不是想要选择其他每一列。您可以按照@Arun 的建议执行此操作：

```
olddata[,-1] 
```

或者：

```
olddata$ColNameToDelete <- NULL 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-10-11T15:00:37.707

你可以得到最后一列`ncol()`：

```
 newdata <- olddata[,2:ncol(olddata)] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-04-27T02:57:05.323

为了建立 Freeman 的答案，Tidyverse 允许点作为管道数据对象的替代品，这对于通过重复引用对象来简化代码很有用。

`library(tidyverse)`

`newdata <- olddata %>% select( 2:ncol(.) )`

或者

`newdata <- olddata %>% .[,2:ncol(.)]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-22T02:32:39.170

我正在使用这个选择从一开始就没有一列或多列的所有列：

```
newdata = olddata[ , 2:dim(olddata)[2]] # from column 2 to the last one (the original question) 
```

```
newdata = olddata[ , 5:dim(olddata)[2]] # from column 5 to the last one (example of more columns) 
```

# javascript - jQuery在后台弹出窗口

> ID：15326805
> 
> 赞同：1
> 
> 时间：2013-03-10T19:54:31.233
> 
> 标签：javascript, jquery

`id="icontainer"`我的网页中有一个 div，当用户点击它时，一个新的 url 会在新选项卡中打开，用户会留在新选项卡中。

当用户单击我的 div 时，新的 url 在浏览器的后台或新选项卡中打开，但用户仍留在我的网页中，这怎么可能？

我的代码：

```
<script type="text/javascript">
$(document).ready(function() {
    $("#icontainer").click(function() {
        $("#icontainer").hide();
        var link = 'http://www.youtube.com/42/16022/15176/" alt="" border="0">';
        var mer_window = window.open(link, '_blank', 'toolbar=1,location=1,directories=1,scrollbars=1,resizable=1,status=1,menubar=1');
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:09:36.933

这称为弹出框。我强烈建议你不要这样做。我从来没有看到这样做的充分理由。

如果需要，这里有一个解释代码的站点。

香草 [http://www.htmlgoodies.com/beyond/javascript/article.php/3471241/So-You-Want-A-Pop-Under-Window-Huh.htm](http://www.htmlgoodies.com/beyond/javascript/article.php/3471241/So-You-Want-A-Pop-Under-Window-Huh.htm)

jQuery [https://github.com/hpbuniat/jquery-popunder](https://github.com/hpbuniat/jquery-popunder)

# php - 如何在动态加载 jquery 内容时生成可书签的 URL？

> ID：15326810
> 
> 赞同：2
> 
> 时间：2013-03-10T19:54:55.047
> 
> 标签：php, javascript, jquery, html

在我的标题中，我有以下脚本来接收函数 recp() 的 id 参数输入：

```
<script>
 function take(id) {
  $('#content_div').load('pages.php?id='+id);
 }
</script> 
```

在正文的导航菜单中，我的链接设置如下：

```
<li><a href="#" onClick="take('food')">Food</a></li>
<li><a href="#" onClick="take('animals')">Animals</a></li> 
```

我的 div 标签在正文中是这样的：

```
<div id="content_div"><div> 
```

pages.php 有一个条件结构，可以将特定代码注入#content_div，如下所示：

```
 <?php
 $id = $_GET['id'];
 function showUp($id){
 switch($id){
 case "food":
 include_once "food.php";
 break;
 case "animals":
 include_once'animals.php';
 break;
 }
 ?> 
```

内容正在完美加载，但我的 URL 有问题。我怎样才能使用后退按钮并导航到以前打开的状态，以便可以将它们添加为书签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:43:06.863

在您的情况下，您应该以编程方式推送浏览器历史状态。History.js – 处理这个问题。在这里您可以获取代码和手册：[https ://github.com/browserstate/history.js](https://github.com/browserstate/history.js)

# html - 带有ul / li的图像下的CSS复选框+标签

> ID：15326813
> 
> 赞同：1
> 
> 时间：2013-03-10T19:55:15.047
> 
> 标签：html, css

具有以下代码。

```
<div id="table">
    <li>
        <img id="img_friend_1" src="">
        <input type="checkbox" value="1" id="form_friend_1" name="form[friend][]" />
        <label for="form_friend_1" >My name</label>
    </li>
</div> 
```

我的 CSS

```
#table{
    display:  table;
    width:auto;
    display: inline-block;
}
label {
    display: inline-block;
}
input {
    margin:0;
    vertical-align: bottom;
    position: relative;
} 
```

现在我得到了这个。图片旁边是文字。

![在此处输入图像描述](../Images/c04a6fb2907327bb70e3f3d678192ee7.png)[//复选框] 我的名字

我想将带有标签的复选框放在图片下方。图片应该在复选框和标签的中间。

![在此处输入图像描述](../Images/72dec5cc853549b9c735e5376033ce99.png)

[//复选框] 我的名字

实际上 CSS 很简单，我对 CSS 没有实际问题，但我被困住了。我通过stackoverflow搜索并尝试了很多css组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:04:33.083

只需将您的输入和标签包装在另一个中`div`：

```
<li>
    <img src="http://lorempixel.com/100/100">
    <div>
        <input type="checkbox" value="1" id="form_friend_1" name="form[friend][]" />
        <label for="form_friend_1" >My name</label>
    </div>
</li> 
```

演示：http: [//jsfiddle.net/mRk3S/](http://jsfiddle.net/mRk3S/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T20:13:16.407

您需要包装您的输入和标签，然后像这样对齐到中心

html

```
<div id="table">

    <li>
        <img id="img_friend_1" src="http://i.stack.imgur.com/JsxB5.gif" style="width:150px">
        <div class="wrap">
        <input type="checkbox" value="1" id="form_friend_1" name="form[friend][]" />
        <label for="form_friend_1" >My name</label>
        </div>
    </li>
</div> 
```

这是你的`.wrap`课

```
.wrap
{
    text-align: center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T16:04:38.367

不知道为什么我会在这里结束，但您不需要使用包装器来实现这种效果。

添加`display:block`到您的 li img 将导致后面的任何内容换行。`position:relative; margin:0 auto;`使您的图像居中。

添加`text-align:center`到您的 li 将使文本居中。

这个 jsfiddle 具有我认为您试图达到的效果。

[https://jsfiddle.net/wxooa3tq/2/](https://jsfiddle.net/wxooa3tq/2/)

我还假设您对这个问题进行了排序，但是任何未来的读者可能会发现这很有帮助

# html - 使 DIV 块流入自由空间

> ID：15326818
> 
> 赞同：1
> 
> 时间：2013-03-10T19:55:39.480
> 
> 标签：html, css

我一直在尝试为我的作品集网站创建一个基于块的界面，其中每个内联块代表我的一个作品，当点击时，它会扩大到两倍大小并显示更多信息。

有了这个设置，我开始编写代码，但遇到了一个问题：当一个块展开时，它总是在下一行留下一个空格，无论我设置了哪个 css 设置（我已经尝试了十几个），我真正想要的是空白空间充满以下项目。

下图可以更好地解释：

![在此处输入图像描述](../Images/3da10fa42d355eb0dc27388366eada1f.png) 这是实际的 HTML：

```
<div class="block">
    1
</div>
<div class="block">
    2
</div>
<div class="block big">
    3
</div>
<div class="block">
    4
</div>
<div class="block">
    5
</div>
<div class="block">
    6
</div>
<div class="block">
    7
</div>
<div class="block">
    8
</div> 
```

这是CSS：

```
.block{
    width: 150px;
    height: 150px;
    border: 1px solid black;
    display: inline-block;
    margin: 5px;
}

.big{
    width: 320px;
    height: 320px;
} 
```

我已经尝试过使用浮点值，但这里没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T01:54:05.343

好吧，即使 Masonry js 库不使用纯 CSS，它似乎也能做到这一点（还附带了一组很好的文档功能和方法）。

这是链接： http: [//masonry.desandro.com](http://masonry.desandro.com)

# c# - 无法将值 NULL 插入“ID”列

> ID：15326820
> 
> 赞同：1
> 
> 时间：2013-03-10T19:55:49.867
> 
> 标签：c#, sql, linq, linq-to-sql

使用 Linq to Sql 时出现异常“无法将值 NULL 插入到列 'ID'”，我将 ID 属性留空，但我已将我的 ID 设置为在我的 DBML 文件中自动生成。当我在没有 ID 的情况下插入并让 sql 自动为我生成不使用 linq 时，这将正常工作。问题是 LINQ 抛出异常，因为它看到 ID 为空，即使 LINQ 只是让它通过 SQL 也可以。

```
 [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_ID", AutoSync=AutoSync.OnInsert, DbType="Int NOT NULL", IsPrimaryKey=true, IsDbGenerated=true)]
    public int ID
    {
        get
        {
            return this._ID;
        }
        set
        {
            if ((this._ID != value))
            {
                this.OnIDChanging(value);
                this.SendPropertyChanging();
                this._ID = value;
                this.SendPropertyChanged("ID");
                this.OnIDChanged();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:26:21.873

您需要在列定义中包含“IDENTITY”：

```
[global::System.Data.Linq.Mapping.ColumnAttribute(Storage="_ID", AutoSync=AutoSync.OnInsert, DbType="Int NOT NULL IDENTITY", IsPrimaryKey=true, IsDbGenerated=true)]
public int ID
{ ... } 
```

如果那不能解决它，请尝试添加`UpdateCheck=UpdateCheck.Never`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T08:00:50.313

我有一个类似的问题，由于**我的映射配置中缺少**一个键（我只有一个键，而不是一个复合键，因为它应该是）。

以为我会分享答案，因为我的问题很相似，但我的解决方案有点不同。

简而言之，我的上下文类和配置如下所示：

```
public class MyContext : DbContext
{
    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // Loads the configuration:
        modelBuilder.Configurations.Add(new MyMyDataClassConfiguration()); 
    }

    // ...
}

public class MyDataClassConfiguration : EntityTypeConfiguration<MyDataClass>
{
    public MyDataClassConfiguration()
    {
        ToTable("MyDataTableName"); // Maps to table

        // Specify composite key (I was missing a key here)
        HasKey(data => new {data.First_Key_Name, data.Second_Key_Name });
    }
} 
```

# autocomplete - Ejuicombobox 在特定模型属性上抛出未定义的偏移错误

> ID：15326831
> 
> 赞同：0
> 
> 时间：2013-03-10T19:56:41.327
> 
> 标签：autocomplete, combobox, yii

我下载了带有自动完成功能的可编辑组合框控件并添加了扩展。我对模型的 patient_id 和 question_definition_id 属性有疑问。适用于 question_duration_id 和其他一些属性。当我将它们用于组合框时，我收到以下错误：

![在此处输入图像描述](../Images/128c31030d74e741c8b729db151cc662.png)

以下是我在视图中使用的代码：

```
$this->widget('ext.combobox.EJuiComboBox', array(
    'model' => $PatientProblem,
    'attribute' => 'problem_definition_id',
    'id'=>'eeed',
    'data'=>Yii::app()->cache->get('PATIENT_PROBLEM'),
    // options passed to plugin
    'assoc'=>true,
    'options' => array(
        'allowText' => false,),
    // Options passed to the text input
    'htmlOptions' => array('size' => 6),
)); 
```

以下是我的模型：

```
<?php

/**
 * This is the model class for table "patient_problem".
 *
 * The followings are the available columns in table 'patient_problem':
 * @property integer $problem_id
 * @property integer $problem_definition_id
 * @property integer $patient_id
 * @property integer $curr_or_history
 * @property integer $patient_visit_id
 * @property string $problem_notes
 * @property string $chronic
 * @property string $alert_on_dashboard
 * @property integer $problem_duration_id
 * @property integer $create_acc_id
 * @property integer $create_user_id
 * @property string $create_date
 * @property integer $create_acc_assign_id
 * @property integer $update_acc_id
 * @property integer $update_user_id
 * @property string $update_date
 * @property integer $update_acc_assign_id
 *
 * The followings are the available model relations:
 * @property Patient $patient
 * @property ListOfValues $currOrHistory
 * @property PatientVisit $patientVisit
 * @property ListOfValues $problemDefinition
 * @property ListOfValues $problemDuration
 */
class PatientProblem extends CActiveRecord
{
        /**
         * Returns the static model of the specified AR class.
         * @param string $className active record class name.
         * @return PatientProblem the static model class
         */
        public static function model($className=__CLASS__)
        {
                return parent::model($className);
        }

        /**
         * @return string the associated database table name
         */
        public function tableName()
        {
                return 'patient_problem';
        }

        /**
         * @return array validation rules for model attributes.
         */
        public function rules()
        {
                // NOTE: you should only define rules for those attributes that
                // will receive user inputs.
                return array(
                        array('problem_definition_id, patient_id, curr_or_history, patient_visit_id, problem_duration_id, create_acc_id, create_user_id, create_acc_assign_id, update_acc_id, update_user_id, update_acc_assign_id', 'numerical', 'integerOnly'=>true),
                        array('chronic, alert_on_dashboard', 'length', 'max'=>1),
                        array('problem_notes, problem_reported_date, create_date, update_date', 'safe'),
                        // The following rule is used by search().
                        // Please remove those attributes that should not be searched.
                        array('problem_id, problem_definition_id, patient_id, curr_or_history, patient_visit_id, problem_notes, problem_reported_date, chronic, alert_on_dashboard, problem_duration_id, create_acc_id, create_user_id, create_date, create_acc_assign_id, update_acc_id, update_user_id, update_date, update_acc_assign_id', 'safe', 'on'=>'search'),
                );
        }

        /**
         * @return array relational rules.
         */
        public function relations()
        {
                // NOTE: you may need to adjust the relation name and the related
                // class name for the relations automatically generated below.
                return array(
                        'patient' => array(self::BELONGS_TO, 'Patient', 'patient_id'),
                        'currOrHistory' => array(self::BELONGS_TO, 'ListOfValues', 'curr_or_history'),
                        'patientVisit' => array(self::BELONGS_TO, 'PatientVisit', 'patient_visit_id'),
                        'problemDefinition' => array(self::BELONGS_TO, 'ListOfValues', 'problem_definition_id'),
                        'problemDuration' => array(self::BELONGS_TO, 'ListOfValues', 'problem_duration_id'),
                );
        }

        /**
         * @return array customized attribute labels (name=>label)
         */
        public function attributeLabels()
        {
                return array(
                        'problem_id' => 'Problem',
                        'problem_definition_id' => 'Problem Definition',
                        'patient_id' => 'Patient',
                        'curr_or_history' => 'Curr Or History',
                        'patient_visit_id' => 'Patient Visit',
                        'problem_notes' => 'Problem Notes',
                        'problem_reported_date'=>'Report Date',
                        'chronic' => 'Chronic',
                        'alert_on_dashboard' => 'Alert On Dashboard',
                        'problem_duration_id' => 'Problem Duration',
                        'create_acc_id' => 'Create Acc',
                        'create_user_id' => 'Create User',
                        'create_date' => 'Create Date',
                        'create_acc_assign_id' => 'Create Acc Assign',
                        'update_acc_id' => 'Update Acc',
                        'update_user_id' => 'Update User',
                        'update_date' => 'Update Date',
                        'update_acc_assign_id' => 'Update Acc Assign',
                );
        }

        /**
         * Retrieves a list of models based on the current search/filter conditions.
         * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
         */
        public function search()
        {
                // Warning: Please modify the following code to remove attributes that
                // should not be searched.

                $criteria=new CDbCriteria;

                $criteria->compare('problem_id',$this->problem_id);
                $criteria->compare('problem_definition_id',$this->problem_definition_id);
                $criteria->compare('patient_id',$this->patient_id);
                $criteria->compare('curr_or_history',$this->curr_or_history);
                $criteria->compare('patient_visit_id',$this->patient_visit_id);
                $criteria->compare('problem_notes',$this->problem_notes,true);
                $criteria->compare('problem_reported_date',$this->problem_reported_date,true);
                $criteria->compare('chronic',$this->chronic,true);
                $criteria->compare('alert_on_dashboard',$this->alert_on_dashboard,true);
                $criteria->compare('problem_duration_id',$this->problem_duration_id);
                $criteria->compare('create_acc_id',$this->create_acc_id);
                $criteria->compare('create_user_id',$this->create_user_id);
                $criteria->compare('create_date',$this->create_date,true);
                $criteria->compare('create_acc_assign_id',$this->create_acc_assign_id);
                $criteria->compare('update_acc_id',$this->update_acc_id);
                $criteria->compare('update_user_id',$this->update_user_id);
                $criteria->compare('update_date',$this->update_date,true);
                $criteria->compare('update_acc_assign_id',$this->update_acc_assign_id);

                return new CActiveDataProvider($this, array(
                        'criteria'=>$criteria,
                ));
        }
        /* The code till this line is Gii generated. All the code beyond this point is cutom code. */
        public function beforeSave(){
                $retval=false;
                if ($this->isNewRecord){
                        //Handling duplicate Entries for Problem in one visit.
                        $criteria = new CDbCriteria;
                        $criteria->compare('problem_definition_id', $this->problem_definition_id);
                        $criteria->compare('patient_id', $this->patient_id);
                        $criteria->compare('patient_visit_id', $this->patient_visit_id);
                        $PatientProblem = $this->model()->findAll($criteria);
                        if (count($PatientProblem)==0){
                                $retval=true;
                                $this->setAttribute('create_date',date("Y-m-d H:i:s"));
                                $this->setAttribute('create_user_id',Yii::app()->user->id);
                                $this->setAttribute('create_acc_id',Yii::app()->user->assigner_account_id);
                                $this->setAttribute('create_acc_assign_id',Yii::app()->user->acc_assign_id);
                        }
                        else{
                                $errorMsg='';
                                $criteria = new CDbCriteria;
                                $criteria->compare('mCode','VISIT_PROBLEM_EXISTS');
                                $criteria->compare('mLang',Yii::app()->user->account_lang);
                                $SysMsgs=SystemMessages::model()->findAll($criteria);
                                if (count($SysMsgs)>0){
                                        $errorMsg='"'.$this->problemDefinition->group_display_val.'"'.$SysMsgs[0]->mDesc.' Code['.$SysMsgs[0]->mId.']';
                                }
                                else{
                                        $errorMsg=$this->problemDefinition->group_display_val.' already recorded.';
                                }
                                throw new Exception($errorMsg);
                                $retval=false;  
                        }
                }
                else{
                        $this->setAttribute('update_date',date("Y-m-d H:i:s"));
                        $this->setAttribute('update_user_id',Yii::app()->user->id);
                        $this->setAttribute('update_acc_id',Yii::app()->user->assigner_account_id);
                        $this->setAttribute('update_acc_assign_id',Yii::app()->user->acc_assign_id);
                        $retval=true;
                }
                return $retval;
        }

        public function getProb_def_id(){
                return $this->problem_definition_id;
        }

        public function setProb_def_id($val){
                $this->problem_definition_id=$val;
        }

        public function getProblemFlaged(){
                return $this->alert_on_dashboard=='1' ?  CHtml::image(Yii::app()->baseUrl .'/images/Flagredicon.png') : '';  

        }
        public function getProblemFlagSrc(){
                return $this->alert_on_dashboard=='1' ?  Yii::app()->baseUrl .'/images/Flagredicon.png' :'';
        }
        public function getProblemChronic(){
                return $this->chronic=='1' ?  CHtml::image(Yii::app()->baseUrl .'/images/tickedS.jpg') : '';  

        }

        public function getProblemDel(){
                return '&nbsp<a class="delete" title="Delete"  onclick="DeletePatProblem('.$this->problem_id.'); return false; " href="#"><img src="/webapp/assets/50005a14/gridview/delete.png" alt="Delete" /></a>&nbsp<a class="delete" title="Update"  onclick="UpdatePatProblem(this,'.$this->problem_id.','.$this->problem_definition_id.','.$this->curr_or_history.',\''.$this->problem_notes.'\','.$this->problem_duration_id.','.$this->chronic.','.$this->alert_on_dashboard.'); return false; " href="#"><img src="/webapp/assets/50005a14/gridview/update.png" alt="Update" /></a>';        
        }

} 
```

以下是 EJuiComboBox.php 的代码

```
<?php

/**
 * jQuery combobox Yii extension
 * 
 * Allows selecting a value from a dropdown list or entering in text.
 * Also works as an autocomplete for items in the select.
 *
 * @copyright © Digitick <www.digitick.net> 2011
 * @license GNU Lesser General Public License v3.0
 * @author Ianaré Sévi
 * @author Jacques Basseck
 *
 */
Yii::import('zii.widgets.jui.CJuiInputWidget');

/**
 * Base class.
 */
class EJuiComboBox extends CJuiInputWidget
{
        /**
         * @var array the entries that the autocomplete should choose from.
         */
        public $data = array();
        public $assoc;
        /**
         * @var string A jQuery selector used to apply the widget to the element(s).
         * Use this to have the elements keep their binding when the DOM is manipulated
         * by Javascript, ie ajax calls or cloning.
         * Can also be useful when there are several elements that share the same settings,
         * to cut down on the amount of JS injected into the HTML.
         */
        public $scriptSelector;
        public $defaultOptions = array('allowText' => true);

        protected function setSelector($id, $script, $event=null)
        {
                if ($this->scriptSelector) {
                        if (!$event)
                                $event = 'focusin';
                        $js = "jQuery('body').delegate('{$this->scriptSelector}','{$event}',function(e){\$(this).{$script}});";
                        $id = $this->scriptSelector;
                }
                else
                        $js = "jQuery('#{$id}').{$script}";
                return array($id, $js);
        }

        public function init()
        {
                $cs = Yii::app()->getClientScript();
                $assets = Yii::app()->getAssetManager()->publish(dirname(__FILE__) . '/assets');
                $cs->registerScriptFile($assets . '/jquery.ui.widget.min.js');
                $cs->registerScriptFile($assets . '/jquery.ui.combobox.js');

                parent::init();
        }

        /**
         * Run this widget.
         * This method registers necessary javascript and renders the needed HTML code.
         */
        /*
        public function run()
        {
                list($name, $id) = $this->resolveNameID();

                if (is_array($this->data) && !empty($this->data)){
                        $data = array_combine($this->data, $this->data);
                        array_unshift($data, null);
                }
                else
                        $data = array();

                echo CHtml::dropDownList(null, null, $data, array('id' => $id . '_select'));

                if ($this->hasModel())
                        echo CHtml::activeTextField($this->model, $this->attribute, $this->htmlOptions);
                else
                        echo CHtml::textField($name, $this->value, $this->htmlOptions);

                $this->options = array_merge($this->defaultOptions, $this->options);

                $options = CJavaScript::encode($this->options);

                $cs = Yii::app()->getClientScript();

                $js = "combobox({$options});";

                list($id, $js) = $this->setSelector($id, $js);
                $cs->registerScript(__CLASS__ . '#' . $id, $js);
        }
        */
public function run()
    {
        list($name, $id) = $this->resolveNameID();

        if (is_array($this->data) && !empty($this->data)){
            //if $data is not an assoc array make each value its key
            if($this->assoc){
                $data=$this->data;      
            }
            else{
                $data=array_combine($this->data, $this->data);

            }
            //does the same as array_unshift($data,null) but does not break assoc arrays
            $data=array(""=>"")+$data;
        }
        else
            $data = array();

        if ($this->hasModel())
            echo CHtml::activeDropDownList($this->model,$this->attribute,$data);
        else
            echo CHtml::dropDownList($name, $this->value, $data);

        echo CHtml::textField(null,($this->hasModel()?($data[$this->model->{$this->attribute}]):$data[$this->value]),array('id'=>$id.'_combobox'));

        $this->options = array_merge($this->defaultOptions, $this->options);

        $options = CJavaScript::encode($this->options);

        $cs = Yii::app()->getClientScript();

        $js = "combobox({$options});";

        list($id, $js) = $this->setSelector($id.'_combobox', $js);
        $cs->registerScript(__CLASS__ . '#' . $id, $js);
    }
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:30:10.327

我曾经对 EJuiComboBox 也有同样的错误。每当发现 NO DATA 为组合框中的 Textfield 提供数据时，它就会发生，这是一个 PHP 错误。我对 EJuiComboBox 的 run 方法进行了以下更改，以阻止它在找不到数据时抛出这个 PHP 错误

```
public function run()
{
        list($name, $id) = $this->resolveNameID();

        if (is_array($this->data) && !empty($this->data)){
                //if $data is not an assoc array make each value its key
                $data=($this->assoc)?$this->data:array_combine($this->data, $this->data);

                //does the same as array_unshift($data,null) but does not break assoc arrays
                $data=array(""=>"")+$data;
        }

        else
                $data = array();

        if ($data == array()) {
            echo "No hay registros";
            return;
        }

        if ($this->hasModel())
                echo CHtml::activeDropDownList($this->model,$this->attribute,$data,$this->selectHtmlOptions);
        else
                echo CHtml::dropDownList($name, $this->value, $data,$this->selectHtmlOptions);

        echo CHtml::textField(null,($this->hasModel()?($data[$this->model->{$this->attribute}]):$data[$this->value]),array('id'=>$id.'_combobox'));

        $this->options = array_merge($this->defaultOptions, $this->options);

        $options = CJavaScript::encode($this->options);

        $cs = Yii::app()->getClientScript();

        $js = "combobox({$options});";

        list($id, $js) = $this->setSelector($id.'_combobox', $js);
        $cs->registerScript(__CLASS__ . '#' . $id, $js);
} 
```

使用此方法将导致“未找到数据！”的简单呈现。每当 ComboBox 的数据中没有成员时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:49:38.590

我解决了这个问题。默认情况下，Yii 在运行时从数据库中获取列的 Not Null 属性，因此如果在数据库中将列标记为 Not Null，它将应用零 (0) 作为其默认值。当“$this->model->{$this->attribute}”被执行时，它输入“0”而不是抛出错误的“problem_definition_id”。在数据库中将列设置为 Nullable 后，错误消失了。但由于这似乎不是一个好的解决方案。因此，在创建 $PatientProblem 对象后，我明确地将问题定义 ID 设置为 null 并解决了错误。

# django - Dajax 日志警告

> ID：15326834
> 
> 赞同：1
> 
> 时间：2013-03-10T19:56:47.067
> 
> 标签：django, dajaxice, dajax

我正在成功安装 Dajaxice 和 Dajax（它们都有效）但是我在开发服务器日志中收到了一些警告

```
The 'request' object must be accesible within the context. You must add 'django.contrib.messages.context_processors.request' to your TEMPLATE_CONTEXT_PROCESSORS and render your views using a RequestContext. 
```

如果我尝试添加到 TEMPLATE_CONTEXT_PROCESSORS django.contrib.messages.context_processors.request

它会**在 django.contrib.messages 中引发关于 no context_processors.request 的错误**

我也用上下文渲染我的模板

```
return render_to_response('root.html', {'news' : news, 'author' : author }, context_instance=RequestContext(request)) 
```

我在 settings.py 中的日志部分

```
LOGGING = {
'version': 1,
'disable_existing_loggers': False,
'filters': {
    'require_debug_false': {
        '()': 'django.utils.log.RequireDebugFalse'
    }
},
'handlers': {
    'mail_admins': {
        'level': 'ERROR',
        'filters': ['require_debug_false'],
        'class': 'django.utils.log.AdminEmailHandler'
    },
   'console': {
        'level': 'DEBUG',
        'class': 'logging.StreamHandler'
    }
},
'loggers': {
    'django.request': {
        'handlers': ['mail_admins'],
        'level': 'ERROR',
        'propagate': True,
    },
'dajaxice': {
        'handlers': ['console'],
        'level': 'INFO',
        'propagate': True,
    },
'dajaxice.DajaxiceRequest': {
'handlers': ['console'],
'level': 'INFO',
'propagate': True,
},
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T03:17:47.930

你必须改变

```
django.contrib.messages.context_processors.request 
```

到

```
django.contrib.messages.context_processors.messages 
```

这`messages`不是`request`

# c++ - Qt / 将数据从主窗口发送到对话框或从主窗口获取数据？

> ID：15326842
> 
> 赞同：3
> 
> 时间：2013-03-10T19:57:51.317
> 
> 标签：c++, qt

有两个文件： `mainwindow.cpp`和`editorplain.cpp`

`editorplain.cpp`是作为小部件的对话框。

问题：将文本数据发送到另一个对话框上的标签。

`mainwidnow.cpp`

从菜单触发的操作调用一个新对话框： `er`将从主窗口返回字符串。

```
void MainWindow::on_actionRoot_files_triggered()
{
    QString er = ui->selected_filename->text();

    Editorplain editorplainwidget;
    // HERE IS WHAT I WANT SEND A DATA TO ANOTHER DIALOG `editorplain`
    editorplainwidget.exec();
} 
```

打开对话框时，我想从字符串中获取数据`er`：

```
Editorplain::setData(myType myData)
{
    ui->label_2->setText(myData.textForEdit);
} 
```

让我们解释一下我的问题。在`mywindow`我有一个字符串`er`，它返回一些字符串作为结果。这`er`应该在对话框中发送`editorplain`并设置为标签，例如：`ui->label->setText(er)`。标签是 QLabel 制作的`QDialog`。

`Mainwindow.h`：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>

namespace Ui { class MainWindow; }

class MainWindow : public QMainWindow {
    Q_OBJECT
     public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();
     private slots:
    void on_actionOpen_triggered();

    void on_actionExit_triggered();

    void on_actionRoot_files_triggered();

private:
    Ui::MainWindow *ui;

};

#endif // MAINWINDOW_H 
```

`editorplain.cpp`文件：

```
#include "editorplain.h"
#include "ui_editorplain.h"
#include "mainwindow.h"

Editorplain::Editorplain(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::Editorplain)
{
    ui->setupUi(this);

    // SHOULD PASS ON THIS CONTRUCTOR?

}

Editorplain::~Editorplain()
{
    delete ui;
}

Editorplain::setData(myType myData)
{
    ui->label_2->setText(myData.textForEdit);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T22:13:21.133

如果它是一个自定义 QDialog ，只需将函数设为`setData()`public 。这样，您可以在显示对话框之前从 MainWindow 调用函数并传递您的字符串。然后，您不需要通过构造函数传递任何内容。

像在`editorplain.h`

```
public:
void setData(const QString &labelText); 
```

和`editorplain.cpp`

```
void Editorplain::setData(const QString &labelText) {
  ui->label_2->setText(labelText);
} 
```

现在在`mainwindow.cpp`

```
void MainWindow::on_actionRoot_files_triggered()
{
    QString er = ui->selected_filename->text();

    Editorplain editorplainwidget;
    editorplainwidget.setData(er);
    editorplainwidget.exec();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:04:11.963

`Editorplain`如果这不是问题，您可以将该字符串传递给构造函数。

# c# - 在这种情况下如何使用全局对象

> ID：15326843
> 
> 赞同：0
> 
> 时间：2013-03-10T19:57:51.890
> 
> 标签：c#, silverlight

我有一个程序可以在电视监视器上显示几个图表，这些图表每 30 秒左右循环一次。

我为每个显示的图表使用全局对象（因此对象包含一些条形、区域、线系列和一些方法）。我将它们设为全局的原因是因为在执行初始 sql 查询后（每天早上 7 点），图表的数据不会改变。我只需要全天循环浏览 20 个不同的图表。

在这种情况下使用本地对象会是一种浪费吗？每次需要切换到新图表时，程序都必须创建一个新对象并使用始终相同的数据点填充不同的系列。

我该怎么做才能避免在这种情况下使用全局对象？我问的原因是因为我读过你应该远离程序中的全局对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:48:30.007

全局/局部对象 - 它实际上是封装问题（和范围问题 - 对象可以是应用程序全局或类全局 - 最佳实践是初始化和分配对象尽可能接近需要的位置，范围方面 - 范围可以是应用程序（实际上是命名空间）、类、方法甚至块（如 using{} 或 foreach{}）。与其创建大量应用程序全局成员，不如将它们封装到类中并初始化这些类。首先，不要弄乱你的主循环，其次，您拥有类的所有优点 - 子类化、多态性等。只要您需要它们，就保留对这些类的引用，据我所知，在您的情况下，保留它们直到数据更改。那将是 24 小时？那又怎样？

在某些时候，无论如何都需要从主应用程序对象访问您的数据。如果您很好地封装了您的数据对象，即创建一些包含您需要显示的所有信息的类，您仍然需要在主应用程序循环中初始化这些类。

我认为没有必要每 30 秒重新创建一次对象。一旦你填充了班级成员，他们就不会改变，除非*你*当然改变或处置他们。此外，在我看来，它们实际上不太可能占用您的计算机内存，以至于每个图表一旦显示就应该真正被处理掉，只是为了在几秒钟或几分钟后从无论如何必须存储在内存中的数据中重新创建。

我理解您的应用程序应该如何工作的方式我将创建一个基本图表类，创建与图表一样多的图表子类（如果它们在对象设计中彼此不同，否则只需在类上创建，并可能将它们放在列表中()，在早上 7 点填写每个图表并循环显示集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T22:07:39.297

在大型项目中应避免使用全局对象，因为它们通常会影响系统的灵活性。

例如，当业务对象缓存结果 24 小时时，这意味着程序中可能希望获取最新结果的其他部分最终将获得缓存值，或者必须重写。

这个问题可以通过不使用类成员而使用实例成员来避免。例如

```
public class ResultsCache
{
  public IEnumerable<Visitors> TotalVisitors {get; }
  public IEnumerable<Purchases> TotalPurchases {get; }
  public IEnumerable<Refunds> TotalRefunds {get; }

  public void FetchData() {
     //...
  }
}

var cache24hours = new ResultsCache();
var currentView = new RefundsView(cache24hours); 
```

# java - 在方法调用中使用参数变量（JAVA）

> ID：15326844
> 
> 赞同：-1
> 
> 时间：2013-03-10T19:58:02.563
> 
> 标签：java, class, methods, parameters

我有一个名为 Employee 的类。我正在尝试使用带有参数变量的 for 循环来显示每个员工（有 3 个）的信息，而不必分别为每个员工写出显示。

我想将“setName”变量用于方法调用的“employee1”部分。这可能吗？

```
 // Create the first employee using non-argument constructor
            Employee employee1 = new Employee();

            employee1.setName("Susan Meyers");          // Set the name
            employee1.setDepartment("Accounting");      // Set department
            employee1.setPosition("Vice President");    // Set position
            employee1.setID(47899);                     // Set ID Number

            // Create the second employee using all argument constructor
            Employee employee2 = new Employee("Mark Jones", "IT", "Programmer", 39119);

            // Create employee three using two-argument constructor
            Employee employee3 = new Employee("Joy Rogers", 81774);

            employee3.setDepartment("Manufacturing");   // Set department
            employee3.setPosition("Engineer");          // Set position

            // Display the data for employees 1, 2, 3 using for loop
            for(int e = 1; e <= 3; e++) {

                Integer.toString(e);
                String setName = "employee" + "e";

                System.out.println("Name: " + employee1.getName());
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:02:32.323

只需创建一个员工列表，将employee1 employee2 和employee 放入其中，然后循环遍历列表。

```
 List<Employee> employees = new ArrayList<Employee>();
employees.add(employee1);
employees.add(employee2);
employees.add(employee3); 
```

你的循环

```
for(Employee employee: employees){
System.out.println(employee);
} 
```

您还可以在您的员工类中添加一个 toString 方法，以使您自己轻松工作

```
public class Employee
....
....

getter/setter

@Override
public String toString() {
    return "Employee ID: " + id + "\nName: " + name + "\nDept: " + department + "\nPosition: " + position;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:02:37.393

`toString()`在您的班级内部实施`Employee`并放置您想要从中打印的所有相关信息。

```
@Override
public String toString() {
    return "Employee ID: " + id + "\nName: " + name + "\nDept: " + department + "\nPosition: " + position;
} 
```

然后，您可以在正常`System.out.println`呼叫中打印它。

```
System.out.println(employee1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:04:59.623

这个呢？：这将创建 3 个员工，员工 1、2 和 3。

```
 for(int e = 1; e <= 3; e++) {                  
               Employee newEmployee = new Employee();
                newemployee.SetName("employee" + e);    
                System.out.println("Name: " + newEmployee.getName());
            } 
```

当然，一旦您尝试访问它们，它们就会内存不足，因此您可以将它们存储在列表中：

```
 List<Employee> ListOfEmployees = new ArrayList<Employee>();

  for(int e = 1; e <= 3; e++) {                  
      Employee newEmployee = new Employee();
      newemployee.SetName("employee" + e);    
      ListOfEmployees.Add(newEmployee); 
       System.out.println("Name: " + newEmployee.getName());
     } 
```

之后，您可以像这样访问特定员工：

```
ListOfEmployees[1].SetName("some name"); //this is the first employee that was added to the list in the for-loop above here
ListOfEmployees[1].GetName(); // returns "some name" 
```

# javascript - 在另一个内容上设置 Div 位置

> ID：15326847
> 
> 赞同：0
> 
> 时间：2013-03-10T19:58:07.853
> 
> 标签：javascript, jquery, css, html

我有一个页面内容，其中包含文本。在内容下方，有一个导航栏，我希望每当我将鼠标悬停在导航器中的某个元素上时，就会在我刚刚悬停的元素上方打开一个 div，并显示一些内容。

我不希望弹出的 DIV 推送页面上的任何对象，我希望它像页面上的所有对象一样。

```
some code since I have to insert code tags if I want to post fiddle 
```

这是一个要演示的小提琴：

[***单击此处获取小提琴***](http://jsfiddle.net/2U7jB/)

在小提琴中，我希望每当我将鼠标悬停在 First 时，第一个反馈将显示在他的上方。

这几乎是我的代码，我刚刚使用 jQuery 来计算我想要的宽度，但我就是无法让 div 高于他应该高于的 div。我不能只用我的眼睛计算并说出多少像素，因为该网站几乎是动态的，所以我需要一个公式来为我计算每次。

如果您有任何代码建议，例如重新定位反馈 div，请随时编辑小提琴！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T23:26:49.747

**更新：**好的，我按照您指定的方式进行了操作：http: [//jsfiddle.net/2U7jB/3/](http://jsfiddle.net/2U7jB/3/)。还有其他方法可以做到这一点 - 这取决于您的 HTML。

**原始回复：**这接近你想要的：http: [//jsfiddle.net/2U7jB/2/](http://jsfiddle.net/2U7jB/2/)

```
.popup {
    display: none;
    height: 35px;
    width: 100%;
    background-color: blue;
}

<div id="first">
    <div class="popup"></div>
</div>
<div id="second">
    <div class="popup"></div>
</div>
<div id="third">
    <div class="popup"></div>
</div>

$('#first, #second, #third').on('mouseover', function() {
    $(this).children('.popup').show();
});
$('#first, #second, #third').on('mouseleave', function() {
    $(this).children('.popup').hide();
}); 
```

要得到你想要的，只需在 #first、#second 和 #third 中创建两个 div - 第一个 div 用于隐藏（弹出）内容，第二个 div 用于导航菜单/背景颜色。

# sql-server - 绝对简单的 SQL Server 查询不返回任何内容

> ID：15326848
> 
> 赞同：2
> 
> 时间：2013-03-10T19:58:18.300
> 
> 标签：sql-server, date, sql-server-2005-express

我这里的东西对我来说很奇怪......

```
Select BARCODE, DATA 
from HISTORIA 
WHERE BARCODE='25405187' AND DATA = '2013-03-08 00:00:00.000'

Select BARCODE, DATA 
from HISTORIA 
WHERE BARCODE='25405187' 
```

简单吧？

现在请查看返回的数据：

![在此处输入图像描述](../Images/082e7d6d42b4573cb5dcc440bc709356.png)

Ekhmmm...为什么...为什么... WHYYYY？:) 如您所见，有合适的日期，但比较会扼杀结果。

我有 SQL Server 2005 Express 和 Management Studio Express

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:52:13.713

`'2013-03-08 00:00:00.000'`[转换](http://www.karaszi.com/SQLServer/info_datetime.asp)为`datetime`. _ 它可以表示 8 月 3 日或 3 月 8 日。

这取决于您的[`DATEFORMAT`](http://msdn.microsoft.com/en-gb/library/ms189491.aspx)设置（这又取决于您的登录语言）。

```
SET LANGUAGE english

SELECT CAST('2013-03-08 00:00:00.000' AS DATETIME) AS english

SET LANGUAGE british

SELECT CAST('2013-03-08 00:00:00.000' AS DATETIME) AS british 
```

退货

```
Changed language setting to us_english.
english
-----------------------
2013-03-08 00:00:00.000 
```

* * *

```
Changed language setting to British.
british
-----------------------
2013-08-03 00:00:00.000 
```

利用

```
WHERE BARCODE='25405187' AND DATA = '20130308 00:00:00.000' 
```

或者更简单地说

```
WHERE BARCODE='25405187' AND DATA = '20130308' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T17:01:47.337

试试这个标准 (ISO) 日期表示：

```
Select BARCODE, DATA 
from HISTORIA 
WHERE BARCODE='25405187' AND DATA = '2013-03-08T00:00:00.000' 
```

# android-intent - Android清单意图过滤器错误？

> ID：15326856
> 
> 赞同：-1
> 
> 时间：2013-03-10T19:58:56.057
> 
> 标签：android-intent, filter, manifest

哟！

我正在制作一个工作按钮，我从 youtube 视频中获得了帮助和提示，但是我在我的清单中遇到了一个错误，我无法停止。这是代码中 android 清单的结尾

```
 </activity>
     <activity android:name="com.tssandroid.phone.buttonOne"
              android:label="@string/app_name">
        <intent-filter>
          <action android:name="com.tssandroid.phone.TUTORIALONE" />
          <cetegory android:name="android.intent.category.DEFAULT" />
        <intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:01:34.990

你的代码：

```
<intent-filter>
    <action android:name="com.tssandroid.phone.TUTORIALONE" />
    <cetegory android:name="android.intent.category.DEFAULT" />
<intent-filter> 
```

`<intent-filter>`没有结束标签。

应该：

```
<intent-filter>
    <action android:name="com.tssandroid.phone.TUTORIALONE" />
    <cetegory android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

PS：你的问题很糟糕。下次包括错误或更清楚地说明问题。

# postgresql - Heroku postgres的允许主机白名单？

> ID：15326859
> 
> 赞同：3
> 
> 时间：2013-03-10T19:59:03.660
> 
> 标签：postgresql, heroku

我有一个使用 postgres 插件运行的 heroku 应用程序。我想知道是否可以将允许的主机列入白名单。通常这是通过编辑 pg_hba.conf 文件来完成的，但这在 heroku 上是不可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:27:34.837

这是不可能的——Heroku 不提供访问权限。正如您在`heroku config`输出中看到的那样，它们使用高度复杂且随机生成的用户名/密码，但允许从任何主机访问。

# r - R中的BatchJobs：序列化太大而无法存储在原始向量中

> ID：15326869
> 
> 赞同：0
> 
> 时间：2013-03-10T19:59:52.483
> 
> 标签：r, parallel-processing, batch-processing, lsf

我正在使用该`BatchJobs`软件包。我有一个`data.table`我正在尝试迭代并提交作业的列表。但是，我收到以下错误消息：

```
batchMap(reg, function(dtb) dtb[,roll_reg(.SD),by=gvkey], dtb_input_list)
Error: serialization is too large to store in a raw vector 
```

每个`data.table`大约有 7,000 行和 6 列。我似乎无法理解为什么这会太大而无法序列化。每次搜索都会以 2^31 - 1 的数字作为限制。这是一个例子：

```
require(BatchJobs)
reg <- makeRegistry(id="myreg", file.dir="myreg")
test_list = lapply(1:10, function(i) data.frame(a=rep(i,10000)))
batchMap(reg, function(dtb) nrow(dtb), test_list)
Error: serialization is too large to store in a raw vector 
```

编辑：等待更多调查。这似乎是使用相同的确切数据出现的错误。试图了解其他环境变量正在发生哪些变化。

# node.js - Node.js 和 Socket.io 内存泄漏修复

> ID：15326873
> 
> 赞同：3
> 
> 时间：2013-03-10T20:00:07.887
> 
> 标签：node.js, memory-leaks, socket.io

在我的多人游戏中，我们刚刚使用 node.js 和 socket.io 发布了一个更新，一段时间后我们发现它存在内存泄漏。

我读过关于 Nodetime 的文章，它是一个很棒的程序，可以检查导致内存泄漏的原因。我做了两个快照，但现在我不知道该怎么办......

![在此处输入图像描述](../Images/6fdf12d4d8b5f8ca7f250d139e327078.png)

这两个快照之间的时间为 8 分钟。看到它在 Retainer > Other 中已经增长了 16MB...我不知道它可能是什么。计数也是一个非常庞大的数字。所有这些大实例都是缓冲区，但我不记得我自己使用过缓冲区，是在 socket.io 中吗？

有人可以启发我，或者至少给一些提示在哪里看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T11:05:02.913

如果您使用的是 Node.js v0.8.21 和 Socket.IO v0.9.13，您可能需要查看**[Tracking down a memory leak in Node.js and Socket.IO。](http://jpallen.net/2013/03/08/tracking-down-a-memory-leak-in-node-js-and-socket-io/)**

# windows-phone-7 - 如何在 Windows Phone 7.1 中使用具有相对 URL 的 MediaElement？

> ID：15326878
> 
> 赞同：0
> 
> 时间：2013-03-10T20:00:40.703
> 
> 标签：windows-phone-7, audio-player

我证明了一切，但这段代码不能在 Windows Phone 7.1 私有 MediaElement 媒体中运行；

```
private MediaElement media;
    // Costruttore
    public MainPage()
    {
        this.InitializeComponent();

        media = new MediaElement();
        media.Source = new Uri("Risorse/Brani/00 Mai 1771.mp3", UriKind.Relative);
        media.Play();

    } 
```

我提到的文件存在并且没有抛出错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T18:19:15.750

MediaElement 控件必须放入可视化树中。您可以通过将元素放在 xaml 中来完成此操作

```
<MediaElement x:Name="MyMedia"/> 
```

或者在代码中

```
media = new MediaElement();
LayoutRoot.Children.Add(media) 
```

一旦它在视觉树中，你就可以玩了。

# ios - AFJSONParameterEncoding 使数据成为整个key，没有值

> ID：15326882
> 
> 赞同：0
> 
> 时间：2013-03-10T20:00:48.697
> 
> 标签：ios, django, json, afnetworking

下午好！

我正在尝试做一个简单的 POST 请求并将我的参数作为 JSON 发送到我的 Django 服务器。这是代码：

```
 NSDictionary* params = [[NSDictionary alloc] initWithObjectsAndKeys: @"TestContent", @"content", nil];

    [[objectManager HTTPClient]setParameterEncoding:AFJSONParameterEncoding];

    [[objectManager HTTPClient]postPath:@"/api/rest/content/add/" parameters:params success:^(AFHTTPRequestOperation *operation, id responseObject)
     { ...} 
```

回到我的 Django，request.POST 看起来像这样：

```
print >> sys.stderr, "%s" % request.POST 
```

输出

```
<QueryDict: {u'{"content":"TestContent"}': [u'']}> 
```

好像整个 JSON 是 request.POST 的“关键”。为什么要这么做？！我怎么能利用这个？！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:36:17.440

这不是表单编码数据，所以不要使用`request.POST`. 用于`request.body`访问数据。

# heroku - 如何为我的 heroku 应用设置具有白名单 IP 的防火墙？

> ID：15326889
> 
> 赞同：3
> 
> 时间：2013-03-10T20:01:36.513
> 
> 标签：heroku, firewall

我有一个 heroku 应用程序，我想在其上配置防火墙以仅允许来自某些白名单 IP 的连接。我知道 heroku dynos 运行 ubuntu。那么有没有在上面配置ufw呢？或者我可以配置预先存在的防火墙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:28:42.607

不，Heroku 不提供任何工具来做到这一点。如果你想实现类似的东西，你必须在你的应用程序的代码中做到这一点。

# jquery - 当用户在 div 中滚动时触发 jquery

> ID：15326892
> 
> 赞同：0
> 
> 时间：2013-03-10T20:01:47.287
> 
> 标签：jquery

我有一个可滚动的 div：

```
.stepDetailView{
    float:right;
    overflow:auto;
} 
```

我试图检测用户何时在该区域滚动。我知道**$(window).scroll(function(){ });** 如果我试图检测整个窗口的滚动，则可以工作，但在我的页面上，滚动仅在 div .stepDetailView 中启用。

我试过

```
$('.stepDetailView').scroll(function(){
  console.log("scrolling");
 }); 
```

但日志永远不会出现在控制台中。还有其他方法可以做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T20:07:19.220

语法错误！

它不是：

```
$('.stepDetailView').scroll(function({
  console.log("scrolling");
}); 
```

但：

```
$('.stepDetailView').scroll(function() {
  console.log("scrolling");
}); 
```

甚至：

```
$('.stepDetailView').on('scroll', function() {
  console.log("scrolling");
}); 
```

然后它[**工作！**](http://jsfiddle.net/adeneo/ufMwW/)

# mysql - UNION ALL 查询缺失数据？

> ID：15326896
> 
> 赞同：2
> 
> 时间：2013-03-10T20:01:59.143
> 
> 标签：mysql

使用 UNION ALL 从两个查询中获取结果，但它正在丢失一行数据。如果我切换哪个选择语句首先出现，则丢失的数据会切换到不同的行。我知道每个 slect 语句在单独运行时都会提取正确的信息，但放在一起时不能正常工作。以下是我的查询：

```
SELECT YEAR( orderDate ) AS "SalesYear"
     , MONTH( orderDate ) AS "SalesMonth"
     , SUM( orderTotal ) AS "TotalSales"
     , orderDetails.productID 
FROM orders
INNER JOIN orderdetails 
   ON orders.orderID = orderDetails.orderID
INNER JOIN products
   ON orderDetails.productID = products.productID

UNION ALL
SELECT YEAR( orderDate ) AS "SalesYear"
     , MONTH( orderDate ) AS "SalesMonth"
     , SUM( orderTotal ) AS "TotalSales"
     , instorepurchasedetails.productID 
FROM in_storepurchase
INNER JOIN instorepurchasedetails 
   ON in_storepurchase.isPurchaseID = instorepurchasedetails.isPurchaseID
INNER JOIN products
   ON instorepurchasedetails.productID = products.productID
GROUP BY YEAR(orderDate ), MONTH( orderDate ), orderTotal, productID 
```

任何想法为什么会发生这种情况以及我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:21:45.647

您需要为`GROUP BY`每个块添加一个子句`SELECT`，并指定正确的列，如下所示：

```
SELECT "SalesYear"
     , "SalesMonth"
     , SUM( "TotalSales" ) AS "TotalSales"
     , productID 
FROM (
   SELECT YEAR( orderDate ) AS "SalesYear"
        , MONTH( orderDate ) AS "SalesMonth"
        , SUM( orderTotal ) AS "TotalSales"
        , orderDetails.productID 
   FROM orders
   INNER JOIN orderdetails 
      ON orders.orderID = orderDetails.orderID
   INNER JOIN products
      ON orderDetails.productID = products.productID
   GROUP BY YEAR(orderDate ), MONTH( orderDate ), orderDetails.productID

   UNION ALL
   SELECT YEAR( orderDate ) AS "SalesYear"
        , MONTH( orderDate ) AS "SalesMonth"
        , SUM( orderTotal ) AS "TotalSales"
        , instorepurchasedetails.productID 
   FROM in_storepurchase
   INNER JOIN instorepurchasedetails 
      ON in_storepurchase.isPurchaseID = instorepurchasedetails.isPurchaseID
   INNER JOIN products
      ON instorepurchasedetails.productID = products.productID
   GROUP BY YEAR(orderDate), MONTH(orderDate), instorepurchasedetails.productID
   ) x
GROUP BY "SalesYear", "SalesMonth", productID 
```

我还从子句中删除了**orderTotal**`GROUP BY` ，因为我认为这不是您需要的。

**编辑：**根据 OP 评论更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T15:01:05.990

```
SELECT `x`.`SalesYear`, 
`x`.`SalesMonth`, 
SUM( `x`. `TotalSales`) AS "TotalSales", 
productID

FROM
(

     SELECT YEAR( orderDate ) AS "SalesYear", 
     MONTH( orderDate ) AS "SalesMonth", 
     SUM( orderTotal ) AS "TotalSales", 
     orderDetails.productID 
    FROM orders
    INNER JOIN orderdetails ON orders.orderID = orderDetails.orderID
    INNER JOIN products ON orderDetails.productID = products.productID
    GROUP BY YEAR(orderDate ) , MONTH( orderDate ), productID 

UNION ALL

     SELECT YEAR( orderDate ) AS "SalesYear", 
     MONTH( orderDate ) AS "SalesMonth", 
     SUM( orderTotal ) AS "TotalSales", 
     instorepurchasedetails.productID 
    FROM in_storepurchase
    INNER JOIN instorepurchasedetails ON in_storepurchase.isPurchaseID =                       instorepurchasedetails.isPurchaseID
    INNER JOIN products ON instorepurchasedetails.productID = products.productID
    GROUP BY YEAR(orderDate ) , MONTH( orderDate ), productID 
) x
     GROUP BY  `x`.`SalesMonth`, productID 
     ORDER BY `x`.`SalesMonth` ASC 
```

# scheme - 如何在方案中的位置列表中找到最小 posn-x

> ID：15326899
> 
> 赞同：0
> 
> 时间：2013-03-10T20:02:09.190
> 
> 标签：scheme

嗨，我在使用带有列表缩写的初学者时遇到了麻烦，我不知道如何在给定 make-posns 列表的情况下找到最小 posn-x。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T21:31:23.463

评论中讨论的汇编：

```
(define (min-x lst)
   (apply min (map posn-x lst))) 
```

# javascript - 检查所有文本输入是否为空

> ID：15326900
> 
> 赞同：-3
> 
> 时间：2013-03-10T20:02:09.810
> 
> 标签：javascript, jquery, html

我想检查所有带有“textinput”类的文本输入是否为空，但它似乎只检查第一个输入是否为空，我不知道为什么。谁能看到我做错了什么？

```
$('#check').click(function(){
    var allEmpty;
       $('.textinput').each(function(){
     if(!$('.textinput').val()){
       allEmpty = true;
     }
   });
     if (allEmpty == true){
        alert('all empty');   
     }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:09:46.203

找到所有`.textinput`不为空的，并检查选择器长度。如果不存在，它们都是空的：

```
$('#check').on('click', function(){
    var allEmpty = ! $('.textinput').filter(function() {
                       return $.trim( this.value ) != "";
                   }).length;

    if (allEmpty) alert('all empty');   
}); 
```

或者

```
if ( ! $('.textinput[value !=""]').length ) alert('all empty'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T20:06:20.897

尝试检查相反的逻辑。如果设置了任何值，则它们`not`都是空的。

此外，您希望`$(this)`在函数上下文中使用`.each()`。否则，调用`$('.textinput')`将再次重新选择这些元素，而不是处理当前元素。

添加[$.trim()](http://api.jquery.com/jQuery.trim/)可确保空格不计为实际值，但如果要将空格计为值，则可以将其删除。

```
$('#check').click(function() {
  var allEmpty = true;
  $('.textinput').each(function(){
    if ($.trim($(this).val())) {
      allEmpty = false;
    }
  });
  if (allEmpty == true){
    alert('all empty');   
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-10T20:07:04.390

您需要使用“this”来使用每个方法选择的元素。

```
$('#check').click(function () {
    var allEmpty;
    $('.textinput').each(function () {
        if (!$(this).val()) {
            allEmpty = true;
        }
    });
    if (allEmpty == true) {
        alert('all empty');
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-10T20:07:44.110

这应该是你的条件>>

```
if(!$('.textinput').val()){

}else {
  allEmpty = true;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-10T20:08:29.803

你的情况不对；您正在为每个项目设置 allEmpty = true。你必须颠倒你的逻辑：

```
$('#check').click(function(){
    var almostOneNotEmpty = false;
       $('.textinput').each(function(){
     if($(this).val()){
       almostOneNotEmpty = true;
     }
   });
     if (!almostOneNotEmpty == true){
        alert('all empty');   
     }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-10T20:11:34.997

这个简单的检查会告诉你它们是否都是空的：

```
var isEmpty = !$('.textinput').map(function() { return this.value; }).get().join(''); 
```

`true`如果所有字段均为空白，这将为您提供布尔值。

# actionscript-3 - 将导入的 swf 发送到后台

> ID：15326910
> 
> 赞同：0
> 
> 时间：2013-03-10T20:02:41.217
> 
> 标签：actionscript-3

我有一个进口的 swf，但我似乎找不到将它发送到舞台后面以便将按钮等放在顶部的方法。我试过这个：

```
var myLoader:Loader = new Loader();                     
var url:URLRequest = new URLRequest("Scene1.swf"); 
myLoader.load(url);                                     
addChild(myLoader);  

stage.setChildIndex(myLoader, -1); 
```

它似乎不适用于 swf 的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:07:56.877

查看[addChildAt](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#addChildAt%28%29)

```
addChildAt(myLoader,0); 
```

# c - 局部和全局冲突时如何访问全局变量

> ID：15326911
> 
> 赞同：5
> 
> 时间：2013-03-10T20:02:45.083
> 
> 标签：c, global-variables

代码 ：

```
int a = 33;
int main()
{
  int a = 40; // local variables always win when there is a conflict between local and global.
  // Here how can i access global variable 'a' having value '33'.
} 
```

如果你问：为什么有人想做上面的事情？为什么是 [a-zA-Z]* ？

我的回答是：只要知道'有可能这样做'。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-10T20:06:37.590

这个老把戏怎么样：

```
int main()
{
    int a = 40; // local variables always win when there is a conflict between local and global.

    {
        extern int a;
        printf("%d\n", a);
    }
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-10T20:07:12.333

```
int a = 33;
int main()
{
  int a = 40;
  int b;
  {
    extern int a;
    b = a;
  }
  /* now b contains the value of the global a */
} 
```

`a`如果它`static`与文件范围有关，则会遇到一个更难的问题，但这也是可以解决的：

```
static int a = 33;
static int *get_a() { return &a; }
int main()
{
  int a = 40;
  int b = *get_a();
  /* now b contains the value of the global a */
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-10T20:41:25.053

**它是 C++，我忽略了`C`标签，抱歉！**

```
int a = 100;

int main()
{
    int a = 20;

    int x = a; // Local, x is 20

    int y = ::a; // Global, y is 100

    return 0;
} 
```

# java - 相对路径分辨率不起作用？

> ID：15326915
> 
> 赞同：1
> 
> 时间：2013-03-10T20:03:01.060
> 
> 标签：java, jakarta-ee, tomcat, web, path

我有 .html 文件 abc.html `webApp/htmls/abcd/abc.html`。在这里，我使用表单操作标记将操作 url 指定为`FORM ACTION="/pqrs"`，我的 servlet 位于`webApp/WEB-INF/classes/xyz/ABC.class`，并且 web.xml 中的映射是-->

```
<servlet>
    <servlet-name>TempServlet</servlet-name>
    <servlet-class>xyz.ABC</servlet-class>
 </servlet>

<servlet-mapping>
    <servlet-name>TempServlet</servlet-name>
    <url-pattern>/pqrs</url-pattern>
</servlet-mapping> 
```

但是当我单击表单按钮时，我得到一个 HTTP：404 错误

```
HTTP Status 404 - /webApp/htmls/abcd/pqrs

type Status report

message /webApp/htmls/abcd/pqrs 

description The requested resource (webApp/htmls/abcd/pqrs) is not available.

Apache Tomcat/7.0.5 
```

为什么action还在htmls目录下搜索，为什么不引用web.xml？？

我使用 Apache tomact 7.x 作为 Web-Server 和 Eclipse Juno 作为 IDE..

# java - MD5 消息摘要 Java

> ID：15326916
> 
> 赞同：1
> 
> 时间：2013-03-10T20:03:04.070
> 
> 标签：java, md5, message-digest

我正在尝试将字符串列表中的两个字符串转换为 MD5 消息摘要。

我的字符串列表称为“用户名密码”。

```
try {
            MessageDigest mdg = MessageDigest.getInstance("MD5");      

            mdg.update(usernamepassword.get(0).getBytes(), 0, usernamepassword.get(0).length());
            mdg.update(usernamepassword.get(1).getBytes(), 1, usernamepassword.get(0).length());     

        } catch (NoSuchAlgorithmException ex) {
            Logger.getLogger(UPCheck.class.getName()).log(Level.SEVERE, null, ex);
        } 
```

我的问题是——

A：这是正确的做法吗？B：我将如何返回它以便我可以在另一个类中使用每个单独的 MD5 哈希？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T20:10:09.580

> A：这是正确的做法吗？

不，有四个原因：

1）您使用的是默认字符编码，而不是指定特定的编码。我建议使用 UTF-8。

2）您当前正在使用字符串的长度（以*字符*为单位）来指定要使用的*字节数*

3）如果您想要单独的摘要（每个字符串一个），您应该`MessageDigest`为每个摘要使用单独的实例，*或者*在调用`reset`之间调用

4）你现在实际上并没有对摘要做任何事情。

我建议您将“特定编码中字符串的 MD5”提取到单独的方法中：

```
public static byte[] getMd5OfUtf8(String text) {
    try {
        MessageDigest digest = MessageDigest.getInstance("MD5");      
        return digest.digest(text.getBytes("UTF-8"));
    } catch (NoSuchAlgorithmException ex) {
        throw new RuntimeException("No MD5 implementation? Really?");
    } catch (UnsupportedEncodingException ex) {
        throw new RuntimeException("No UTF-8 encoding? Really?");
    }
} 
```

然后你可以为你感兴趣的每个列表元素调用它 - 不清楚你之后要对摘要*做*什么，但你可能想要单独使用它们......

编辑：正如评论中所指出的，MD5 这些天真的不是一个很好的哈希选择。像带有盐的 SHA-256 这样的东西会*更好*，但是对于真正安全的应用程序，您可能应该阅读一些有关该主题的现代文献。（我不是专家，所以不想听起来太权威。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:16:38.470

使用[`DigestUtils`](http://commons.apache.org/proper/commons-codec/apidocs/org/apache/commons/codec/digest/DigestUtils.html)来自 apache commons 的类。几种实用方法将帮助您计算/显示 md5 或其他一些常见的哈希函数。

# c++ - Haar 训练中的对象标记

> ID：15326919
> 
> 赞同：0
> 
> 时间：2013-03-10T20:03:49.967
> 
> 标签：c++, visual-studio-2010, opencv, object-detection

我正在使用 haar 训练在 OpenCV 中进行对象检测项目。我必须在图像中标记对象存在的所有位置。所以，我需要一个打开每个图像的代码，以便我可以标记这些区域。类似于这里的一个：

```
#include <opencv/cv.h>
#include <opencv/cvaux.h>
#include <opencv/highgui.h>

// for filelisting
#include <stdio.h>
#include <sys/io.h>
// for fileoutput
#include <string>
#include <fstream>
#include <sstream>
#include <dirent.h>
#include <sys/types.h>

using namespace std;

IplImage* image=0;
IplImage* image2=0;
//int start_roi=0;
int roi_x0=0;
int roi_y0=0;
int roi_x1=0;
int roi_y1=0;
int numOfRec=0;
int startDraw = 0;
char* window_name="<SPACE>add <B>save and load next <ESC>exit";

string IntToString(int num)
{
    ostringstream myStream; //creates an ostringstream object
    myStream << num << flush;
    /*
    * outputs the number into the string stream and then flushes
    * the buffer (makes sure the output is put into the stream)
    */
    return(myStream.str()); //returns the string form of the stringstream object
};

void on_mouse(int event,int x,int y,int flag, void *param)
{
    if(event==CV_EVENT_LBUTTONDOWN)
    {
        if(!startDraw)
        {
            roi_x0=x;
            roi_y0=y;
            startDraw = 1;
        } else {
            roi_x1=x;
            roi_y1=y;
            startDraw = 0;
        }
    }
    if(event==CV_EVENT_MOUSEMOVE && startDraw)
    {

        //redraw ROI selection
        image2=cvCloneImage(image);
        cvRectangle(image2,cvPoint(roi_x0,roi_y0),cvPoint(x,y),CV_RGB(255,0,255),1);
        cvShowImage(window_name,image2);
        cvReleaseImage(&image2);
    }

}

int main(int argc, char** argv)
{
    char iKey=0;
    string strPrefix;
    string strPostfix;
    string input_directory;
    string output_file;

    if(argc != 3) {
        fprintf(stderr, "%s output_info.txt raw/data/directory/\n", argv[0]);
        return -1;
    } 

    input_directory = argv[2];
    output_file = argv[1];

    /* Get a file listing of all files with in the input directory */
    DIR    *dir_p = opendir (input_directory.c_str());
    struct dirent *dir_entry_p;

    if(dir_p == NULL) {
        fprintf(stderr, "Failed to open directory %s\n", input_directory.c_str());
        return -1;
    }

    fprintf(stderr, "Object Marker: Input Directory: %s  Output File: %s\n", input_directory.c_str(), output_file.c_str());

    //    init highgui
    cvAddSearchPath(input_directory);
    cvNamedWindow(window_name,1);
    cvSetMouseCallback(window_name,on_mouse, NULL);

    fprintf(stderr, "Opening directory...");
    //    init output of rectangles to the info file
    ofstream output(output_file.c_str());
    fprintf(stderr, "done.\n");

    while((dir_entry_p = readdir(dir_p)) != NULL)
    {
        numOfRec=0;

        if(strcmp(dir_entry_p->d_name, ""))
        fprintf(stderr, "Examining file %s\n", dir_entry_p->d_name);

        /* TODO: Assign postfix/prefix info */
        strPostfix="";
        //strPrefix=input_directory;
        strPrefix=dir_entry_p->d_name;
        //strPrefix+=bmp_file.name;
        fprintf(stderr, "Loading image %s\n", strPrefix.c_str());

        if((image=cvLoadImage(strPrefix.c_str(),1)) != 0)
        {

            //    work on current image
            do

    {
                cvShowImage(window_name,image);

                // used cvWaitKey returns:
                //    <B>=66        save added rectangles and show next image
                //    <ESC>=27        exit program
                //    <Space>=32        add rectangle to current image
                //  any other key clears rectangle drawing only
                iKey=cvWaitKey(0);
                switch(iKey)
                {

                case 27:

                        cvReleaseImage(&image);
                        cvDestroyWindow(window_name);
                        return 0;
                case 32:

                        numOfRec++;
                printf("   %d. rect x=%d\ty=%d\tx2h=%d\ty2=%d\n",numOfRec,roi_x0,roi_y0,roi_x1,roi_y1);
                //printf("   %d. rect x=%d\ty=%d\twidth=%d\theight=%d\n",numOfRec,roi_x1,roi_y1,roi_x0-roi_x1,roi_y0-roi_y1);
                        // currently two draw directions possible:
                        //        from top left to bottom right or vice versa
                        if(roi_x0<roi_x1 && roi_y0<roi_y1)
                        {

                            printf("   %d. rect x=%d\ty=%d\twidth=%d\theight=%d\n",numOfRec,roi_x0,roi_y0,roi_x1-roi_x0,roi_y1-roi_y0);
                            // append rectangle coord to previous line content
                            strPostfix+=" "+IntToString(roi_x0)+" "+IntToString(roi_y0)+" "+IntToString(roi_x1-roi_x0)+" "+IntToString(roi_y1-roi_y0);

                        }
                        else
                                                    //(roi_x0>roi_x1 && roi_y0>roi_y1)
                        {
                            printf(" hello line no 154\n");
                            printf("   %d. rect x=%d\ty=%d\twidth=%d\theight=%d\n",numOfRec,roi_x1,roi_y1,roi_x0-roi_x1,roi_y0-roi_y1);
                            // append rectangle coord to previous line content
                            strPostfix+=" "+IntToString(roi_x1)+" "+IntToString(roi_y1)+" "+IntToString(roi_x0-roi_x1)+" "+IntToString      (roi_y0-roi_y1);
        }

                        break;
                }
            }
            while(iKey!=66);

            {
            // save to info file as later used for HaarTraining:
            //    <rel_path>\bmp_file.name numOfRec x0 y0 width0 height0 x1 y1 width1 height1...
            if(numOfRec>0 && iKey==66)
            {
                //append line
                /* TODO: Store output information. */
                output << strPrefix << " "<< numOfRec << strPostfix <<"\n";

            cvReleaseImage(&image);
            }

         else 
        {
            fprintf(stderr, "Failed to load image, %s\n", strPrefix.c_str());
        }
    }

    }}

    output.close();
    cvDestroyWindow(window_name);
    closedir(dir_p);

    return 0;
} 
```

我使用 Visual Studio 10 运行了上面的代码。当我运行上面的代码时，它正在**打开加载所有图像的命令窗口（一个新的命名窗口也正在打开，但正在获取但它不会留给我选择区域）**和然后关闭。

当我在 VS10 中使用**不带调试**选项的 start 运行它时，我可以看到：

```
Examining file img (6).jpeg
Loading image img (6).jpeg
Examining file img (6).JPG
Loading image img (6).JPG
Examining file img (7).jpeg
Loading image img (7).jpeg
Examining file img (7).jpg
Loading image img (7).jpg
Examining file img (8).jpeg
Loading image img (8).jpeg
Examining file img (8).jpg
Loading image img (8).jpg
Examining file img (9).jpeg
Loading image img (9).jpeg
Examining file img (9).jpg
Loading image img (9).jpg
Examining file img 1.jpeg
Loading image img 1.jpeg 
```

对象标记失败，无法加载图像

我认为它正在跳过：

```
if((image=cvLoadImage(strPrefix.c_str(),1)) != 0){.....} 
```

部分代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-16T16:55:04.503

目前可用的对象标记工具很少`Haar training`。我使用此[链接](https://mega.nz/#!GdtSXJjC)中的工具。它非常适合我。如果您想构建自己的工具，请遵循[本](http://www.technolabsz.com/2012/07/how-to-do-opencv-haar-training-in.html)教程。无论如何，我认为`Haar training`开发工具来捕获坐标都是浪费时间，因为目前有可用的工具，这不是`Haar training`. 因为`Haar training`需要更多时间来训练和创建级联 XML 文件。所以最好还是专注于训练。

# android - 接收短信的 ContentObserver 或 BroadcastReceiver？

> ID：15326922
> 
> 赞同：3
> 
> 时间：2013-03-10T20:04:07.343
> 
> 标签：android, sms, broadcastreceiver, contentobserver

为了在 Android 中捕获传入的 SMS，我知道我可以使用查看的 ContentObserver，`content:/sms/`也可以注册一个 BroadcastReceiver。

这两种方法的优缺点是什么？一个比另一个更可靠吗？一个更有效率吗？两者之间还有其他好处或缺点吗？

我正在编写一个需要在 ICS 或更高版本下运行的应用程序，如果这有什么不同的话。

顺便说一句，我确实读过这个讨论：[ContentObserver vs. BroadCastReceiver : Battery Usage, Ram, CPU?](https://stackoverflow.com/questions/12309981/contentobserver-vs-broadcastreceiver-battery-usage-ram-cpu)

我只是想知道除了电池使用、RAM 和 CPU 之外是否存在有利于使用 a`ContentObserver`或 a`BroadcastReceiver`来监控传入 SMS 的问题。

# python - 如何让我的程序等待输入，而不是处于循环中

> ID：15326929
> 
> 赞同：1
> 
> 时间：2013-03-10T20:04:35.610
> 
> 标签：python, pygame

我正在编写一个 Pygame 程序，它需要用户输入来写音乐。它等待特定事件（即键盘或鼠标输入）并立即分析输入，而无需用户对每个条目按 Enter。

```
while (running == 1):
    for event in pygame.event.get():
# If event is a keypress
        if(event.type == pygame.KEYDOWN):
            key = pygame.key.get_pressed()  # get_pressed returns an boolean array
                                            # of every key showing pressed or not
# Find which key is pressed
            for x in range(len(key)):
                if(key[x] == 1):
                    break
# If a number key is pressed (0-9)
            if(x >= 48 and x <=57):
# Set the octave to keypress
                gui.setOctave(x-48)    # gui is an instance of a class 
                                       # that controlls pygame display 
```

我知道这样做的唯一方法是使用无限的while循环。但是，这几乎占用了所有 CPU 功率来运行。有没有另一种有效的方法来解决这个问题而不使用循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:18:04.890

你可以`event = pygame.event.wait()`用来等待一个事件。

# sql - 多连接sql

> ID：15326931
> 
> 赞同：2
> 
> 时间：2013-03-10T20:04:47.843
> 
> 标签：sql, ms-access, ms-access-2010

我有一个必须包含 3 个连接的查询，但是我收到此错误：

> 语法错误（缺少运算符）

**SQL：**

```
SELECT
    Agents.[PF],
    Agents.[User_ID],
    Agents.[First_Name],
    Agents.[Second_Name],
    Agents.[Third_Name],
    Agents.[Family_Name],
    Agents.[Gender],
    Agents.[Contract_Type],
    Agents.Area,
    Teams.Team_Name,
    Agents.Hiring_Date,
    Resignation_Pool.Resignation_Date,
    Resignation_Pool.Effective_Date,
    Replace(
          IIf(Skills.Skill_Directory IS NULL, '', 'Directory, ')
        + IIf(Skills.Skill_TRC IS NULL, '', 'TRC, ')
        + IIf(Skills.Skill_Prepaid IS NULL, '', 'Prepaid, ')
        + IIf(Skills.Skill_Postpaid IS NULL, '', 'Postpaid, ')
        + IIf(Skills.Skill_KeyAccount IS NULL, '', 'KeyAccount, ')
        + IIf(Skills.Skill_Blackberry IS NULL, '', 'Blackberry, ')
        + IIf(Skills.Skill_Broadband IS NULL, '', 'Broadband, ')
        + IIf(Skills.Skill_Concierge IS NULL, '', 'Concierge, ')
        + IIf(Skills.Skill_ISP IS NULL, '', 'ISP, ')
        + IIf(Skills.Skill_Mada IS NULL, '', 'Mada, ')
        + IIf(Skills.Skill_CSCS IS NULL, '', 'CSCS, ')
        + '$', ', $', ''
    ) AS Skills
FROM Agents
LEFT JOIN Resignation_Pool
    ON Agents.PF = Resignation_Pool.PF
LEFT JOIN Teams
    ON Agents.Team = Teams.ID
LEFT JOIN Skills
    ON Agents.PF = Skills.PF
WHERE Agents.Contract_Status = 'Active' 
```

是什么导致了这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T20:11:22.983

MS Access 需要在`JOIN`多个表的语法周围加上括号。您将需要使用与此类似的东西：

```
FROM ((Agents
LEFT JOIN Resignation_Pool
    ON Agents.PF = Resignation_Pool.PF)
LEFT JOIN Teams
    ON Agents.Team = Teams.ID)
LEFT JOIN Skills
    ON Agents.PF = Skills.PF 
```

# ios - 如何在表格视图单元格上应用复选标记

> ID：15326938
> 
> 赞同：3
> 
> 时间：2013-03-10T20:05:17.117
> 
> 标签：ios, objective-c, xcode4.6, checkmark

我正在开发一个 iOS 应用程序，使用 Xcode 4.6 在 Objective-C 中进行编码。我想知道如何在选定的表格视图单元格上打上复选标记，然后访问已标记的那些单元格以重用它们，例如将它们保存在数组中。这是我的表格视图类代码，因此您可以看到：

```
#import "TablaMateriasViewController2.h"

@interface TablaMateriasViewController2 ()

@end

@implementation TablaMateriasViewController2
@synthesize materias,materiasKeys;
NSMutableArray *Materias;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];

Materias = [[NSMutableArray alloc]init ];

Materia  *mat  = [[Materia alloc]init];
[mat setNombre:@"Matematicas I"];
[mat setCodigo:@"FBTMI01"];
[mat setGradoDificultad:3];
[mat setDescripcion:@"..."];
[Materias addObject:mat];

mat  = [[Materia alloc]init];
[mat setNombre:@"Matematicas II"];
[mat setCodigo:@"FBTMI02"];
[mat setGradoDificultad:4];
[mat setDescripcion:@"......"];
[Materias addObject:mat];

mat  = [[Materia alloc]init];
[mat setNombre:@"Fisica I"];
[mat setCodigo:@"FBTFI01"];
[mat setGradoDificultad:2];
[mat setDescripcion:@".."];
[Materias addObject:mat];

mat  = [[Materia alloc]init];
[mat setNombre:@"Fisica II"];
[mat setCodigo:@"FBTFI02"];
[mat setGradoDificultad:4];
[mat setDescripcion:@"!!!!"];
[Materias addObject:mat];

mat  = [[Materia alloc]init];
[mat setNombre:@"Fiscia III"];
[mat setCodigo:@"FBTFI03"];
[mat setGradoDificultad:5];
[mat setDescripcion:@"---"];
[Materias addObject:mat];

mat  = [[Materia alloc]init];
[mat setNombre:@"Estructura de Datos"];
[mat setCodigo:@"BPTPR12"];
[mat setGradoDificultad:4];
[mat setDescripcion:@"Orientacion a objetos"];
[Materias addObject:mat];

mat  = [[Materia alloc]init];
[mat setNombre:@"Algoritmos y Programacion"];
[mat setCodigo:@"BPTPR11"];
[mat setGradoDificultad:3];
[mat setDescripcion:@"estructurada"];
[Materias addObject:mat];

mat  = [[Materia alloc]init];
[mat setNombre:@"Matematicas III"];
[mat setCodigo:@"FBTMI03"];
[mat setGradoDificultad:3];
[mat setDescripcion:@"Mate 3"];
[Materias addObject:mat];    
}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return Materias.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath      *)indexPath
{
static NSString *CellIdentifier = @"MateriaCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

Materia *current = [Materias objectAtIndex:indexPath.row];
[cell.textLabel setText:current.Nombre];

return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:33:25.680

如果您想跟踪多个复选标记，最简单的方法是向您的 Materia 对象添加一个 BOOL 属性，例如 isChecked 或其他东西。在 cellForRowAtIndexPath 方法中，您将检查 BOOL 的状态，如果是，则添加复选标记，如果不是，则不添加复选标记。您不应该将单元格保存在数组中，您的数据源数组 Materias 将记录选择了哪些单元格，您可以将其用于任何您想要的目的。您将在 didSelectRowAtIndexPath 方法中更新该 BOOL 的值。

# jquery - 如何在预制画廊中自动调整照片大小？

> ID：15326939
> 
> 赞同：0
> 
> 时间：2013-03-10T20:05:18.230
> 
> 标签：jquery, html, css

我想使用这个预制的幻灯片照片库[http://www.twospy.com/galleriffic/](http://www.twospy.com/galleriffic/)，但我想将画廊尺寸更改为高度 450 像素，宽度：700 像素....问题是我不知道如何，然后我看到它取决于最大照片的高度。但是，当我第一次看到画廊时，我认为画廊的尺寸是固定的，并且图像会自动调整大小，具体取决于它们在显示时的高度或宽度。那么我怎样才能让这个东西像我想的那样，调整图像大小而不是调整整个画廊的大小？我的意思是，我将使用大于 1024x768 或 768x1024 的照片，并且我希望我的画廊为 700x500 .....对于我认为将照片裁剪为 50x50 像素的照片图标，我该怎么做呢？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:13:25.773

我不确定这是否可行，因为我不知道插件，但是您可以尝试使用 CSS 强制所有图像具有一定的大小。将此添加到您的 CSS 文件中。

```
img{
   max-width:500px;
   max-height:700px;
} 
```

这将强制所有图像为该大小。

或者，如果您想在页面中使用更多图像，那么我建议为图库中的图像创建一个类以强制它们的大小。

```
.img_size{
   max-width:500px;
   max-height:700px;
} 
```

然后在插件的图像标签中添加

```
class="img_size" 
```

或者您可以将*max-width*和*max-height*标签添加到画廊 Div 中，然后将图像中的*max-width* + *max-height*标签设置为*继承*

# java - com.mysql.jdbc.ResultSetMetaData; 与 java.sql.ResultSetMetaData;

> ID：15326941
> 
> 赞同：1
> 
> 时间：2013-03-10T20:05:31.990
> 
> 标签：java, mysql, jakarta-ee

我正在使用 tomcat7、java 1.6 来访问带有`com.mysql.jdbc.Driver`. 我打算从像这样的表中获取元数据

```
java.sql.ResultSet set=getStuff();
ResultSetMetaData meta = set.getMetaData(); 
```

问题是，set.getMetaData 返回`java.sql.ResultSetMetaData;`但我使用 mysql 和 jdbc，所以它不应该返回`com.mysql.jdbc.ResultSetMetaData;`吗？我是不是导入了错误的东西？如果没有，什么时候`com.mysql.jdbc.ResultSetMetaData;`使用或有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T20:10:04.577

驱动程序的作用实际上是对数据库特定代码的使用进行抽象。因此，您只需指定驱动程序，然后与不依赖于数据库的 api 进行交互。

如果您仔细观察，您会发现这`com.mysql.jdbc.ResultSetMetaData`是接口的一个实现`java.sql.ResultSetMetaData`。

为了解耦，你最好使用接口（这样你就不会绑定到代码中的特定数据库）

# vector - 创建新字符时抛出 std::bad_alloc **

> ID：15326942
> 
> 赞同：0
> 
> 时间：2013-03-10T20:05:55.077
> 
> 标签：vector, char

我正在从字符串向量创建一个 c 字符串数组。我希望结果数组跳过向量的第一个元素。我为此使用的功能如下：

```
char** vectortoarray(vector<string> &thestrings)
{
  //create a dynamic array of c strings
  char** temp = new char*[thestrings.size()-2];

  for(int i = 1; i < thestrings.size(); i++)
    temp[i-1] = (char*)thestrings[i].c_str();

  return temp;
} 
```

我知道这段代码有效，因为我在一个较小的程序中测试它没有错误。但是，当在稍微大一点的程序中运行时，我得到了错误`terminate called after throwing an instance of 'std::bad_alloc' what(): std::bad_alloc`。

我如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:14:49.053

那-2绝对不应该在那里。另请注意，您只为每个字符数组分配了一个指针数组。您还需要为字符数组本身分配内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:15:14.947

我不能肯定地说，但是当你用负值`bad_alloc`调用时，你的代码会抛出一个。`new`例如，如果您将函数传递给空向量，则实际上是在调用

```
char** temp = new char*[-2]; 
```

所以你应该在打电话之前检查一下`new`。从逻辑的角度来看，这种包含`-2`无论如何都没有什么意义。我还建议阅读这个问题和答案 [为什么 new[-1] 会生成 segfault，而 new[-2] 会抛出 bad_alloc？](https://stackoverflow.com/questions/9680989/why-new-1-generates-segfault-while-new-2-throws-bad-alloc)

# android - 使用集合的字符串 ArrayList

> ID：15326944
> 
> 赞同：1
> 
> 时间：2013-03-10T20:06:04.813
> 
> 标签：android, arraylist, android-listview

我的主要`activity`有多个`ArrayLists`and `Arrays`。当您单击 Smoked Cigarette 按钮时，应用程序会将某些信息记录在`ArrayList`. 其中一个`ArrayLists`位置Smoked 包含您吸烟的所有位置。我的任务是制作一个`activity`显示在`ListView`您吸烟的位置，以及您在那里吸烟的次数。如果您显示`array`当前的位置Smoked，它将如下所示

家
家
家
工作
工作
学校
学校

等等等等。我需要循环`array`显示每个`string`被调用的次数并给出`integer`值。然后我需要将`integer`与匹配的 结合起来`string`。在并行`array`或多维`array`中显示该列表视图中另一个`activity`名为 Locations的信息`activity`所以它看起来像这样

家庭：3
工作：2
学校：2

应该注意的是，即使您永远不应该对元素进行硬编码，但在这种情况下，我实际上是不允许这样做的，因为`ArrayList`位置将不断增长。`activity`我已经完成了另一个允许用户将新位置添加到现有`ArrayList` 位置的方法。但是，`listview`当我转到`activity`.

因此，如果这令人困惑，请告诉我，我会更具体地问。

谢谢你尽你所能的帮助。

模型.java

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Collections;
import java.util.GregorianCalendar;

public class Model implements Serializable {
public static final int END_MORNING = 11;  // 11:00AM, inclusive
public static final int END_AFTERNOON = 16;  // 4:00PM, inclusive
private int locNumber;
private String locName;

private GregorianCalendar startDate;

private ArrayList<GregorianCalendar> datesSmoked = new ArrayList<GregorianCalendar>();
private ArrayList<String> locationsSmoked = new ArrayList<String>();
private ArrayList<String> locations = new ArrayList<String>();
private ArrayList<String> allIncidents = new ArrayList<String>();
private ArrayList<String> test  = new ArrayList<String>();

public String [] defaultLocations = {"Home", "Work", "Commuting", "School", "Bar", "Restaurant", "Social Gathering", "Other"};
public String [] eachSmoked;

public Model(GregorianCalendar date){
    startDate = date;

    for (String s : this.defaultLocations) {            
        locations.add(s);
    }           
}

public Model(){
    this(new GregorianCalendar()); // now
}   

public void setAllIncidentsArray() {        
    this.allIncidents.add(datesSmoked.toString());
    this.allIncidents.add(locationsSmoked.toString());
}

public void setEachSmoked() {
    for (int i = 0; i < locationsSmoked.size(); i++) {
        locNumber = Collections.frequency(locationsSmoked, locationsSmoked.get(i));
        locName = locations.get(i);
        test.add(i, locNumber + locName);
    }
}

public ArrayList<String> getEachSmoked() {              
    return this.test;
}

public ArrayList<String> getAllIncidentsArray() {
    return this.allIncidents;
}

public ArrayList<String> getlocationsArray() {
    return this.locations;
}

public ArrayList<String> getLocationsSmokedArray() {
    return this.locationsSmoked;
}

public ArrayList<GregorianCalendar> getDatesSmokedArray() {
    return this.datesSmoked;
}

public void incrementCount(String location) {   
    this.datesSmoked.add(new GregorianCalendar());  // now
    this.locationsSmoked.add(location);     
}

public int getTodayCount() {
    GregorianCalendar now = new GregorianCalendar();
    int todayDayOfYear = now.get(Calendar.DAY_OF_YEAR);

    int count = 0;
    for (GregorianCalendar day : this.datesSmoked)
        if (day.get(Calendar.DAY_OF_YEAR) == todayDayOfYear)
            count++;

    return count;
}

public int getTotalCount() {
    return this.datesSmoked.size();
}

public double getAverage() {
    if (getDays() > 0)
        return (double) getTotalCount() / getDays();
    else
        return 0.0;
}

public int getDays() {
    return (new GregorianCalendar()).get(Calendar.DAY_OF_YEAR) - startDate.get(Calendar.DAY_OF_YEAR) + 1;
}

public int getMorning() {
    int count = 0;
    for (GregorianCalendar date : this.datesSmoked)
        if (date.get(Calendar.HOUR_OF_DAY) <= END_MORNING)
            count++;

    return count;
}

public int getAfternoon() {
    int count = 0;
    for (GregorianCalendar date : this.datesSmoked)
        if (date.get(Calendar.HOUR_OF_DAY) > END_MORNING && date.get(Calendar.HOUR_OF_DAY) <= END_AFTERNOON)
            count++;

    return count;
}

public int getEvening() {
    int count = 0;
    for (GregorianCalendar date : this.datesSmoked)
        if (date.get(Calendar.HOUR_OF_DAY) > END_AFTERNOON)
            count++;

    return count;
}
} 
```

Locations.java（位置活动）

```
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class LocationActivity extends Activity {

public static final String SMOKIN_DATA_FILE = "smokin.dat";

public static Model model = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_location);

    restoreModel();

    ListView listView = (ListView) findViewById(R.id.location_listview_Id);
    ArrayAdapter<String> listAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, model.getEachSmoked());        
    listView.setAdapter(listAdapter);       
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_location, menu);
    return true;
}

public void restoreModel() {
    // Restore from disk, or start with an empty model
    try {
        ObjectInputStream ois = new ObjectInputStream(
                openFileInput(SMOKIN_DATA_FILE));

        model = (Model) ois.readObject();
        ois.close();
    } catch (Exception e) {
        Log.v("*** DEBUG ***", "Error writing to file: " + e);
        model = new Model();
    }
}    

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    switch (item.getItemId()) {

    case R.id.menu_home_Id:
        Intent homeIntent = new Intent(this, MainActivity.class);
        startActivity(homeIntent); ;
        return true;

    case R.id.menu_all_incidents_Id:
        Intent allIncidentsIntent = new Intent(this, AllIncidentsActivity.class);
        startActivity(allIncidentsIntent); ;
        return true;

    case R.id.menu_edit_locations_Id:
        Intent editLocationsIntent = new Intent(this, EditLocationsActivity.class);
        startActivity(editLocationsIntent); ;
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:11:07.383

这看起来像是使用 a 的完美机会`Hashtable<String, Integer>`，哈希表将包含位置作为键和计数作为值。

现在，当您为 ListView 生成数据时，只需在 ArrayList 元素上迭代熏过的地方，如果该元素不在 HashTable 中，请将其添加并将 Value 设置为 0。如果它已经在其中，只需将其加一。

最后，您将拥有一个 HashTable，其中包含您需要的所有数据。

# a-star - 一颗星：找到多个目标中最近的一个

> ID：15326948
> 
> 赞同：0
> 
> 时间：2013-03-10T20:06:26.857
> 
> 标签：a-star

我正在做一个项目，我需要在 2D 网格中找到到最近（许多）目标节点的路径（任何节点中有 8 个连接：N、S、W、E、NW、NE、SW、SE）。途中可能会有墙壁阻挡路径。找到一个目标节点的路径是没有问题的，但是我怎样才能在合理的时间内找到最近的目标呢？我不认为为每个目标节点运行 A* 并获取每条找到要比较的路径的长度是合理的方法，还能怎么做？

A* 是否能够以某种方式找到到最近节点的路径，或者必须以其他方式找到最近的目标，然后将其作为唯一目标传递给 A*？

![在此处输入图像描述](../Images/41fed38bd8e7e4894da68eca902000eb.png)

传奇：

白色 - 可步行

灰色 - 墙壁

蓝色——我自己

绿色 - 目标

红色 - 敌人（我计划在 X SQM 与敌人保持距离）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:34:59.663

是的，只需将`EstimatedDistanceToEnd`(aka. `h(x)`) 设置为所有端节点的最小估计值。然后当你到达一个终端节点时停止搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T20:18:38.690

A* 用于知情搜索，其中我们有一些数据，而不仅仅是目标状态......根据您的问题，似乎没有相关数据，我们只知道我们的目标状态是什么。如果是这种情况，那么您可以简单地应用[BFS](https://en.wikipedia.org/wiki/Breadth-first_search)。

# c# - 用行尾标记替换多行正则表达式中的字符串

> ID：15326951
> 
> 赞同：0
> 
> 时间：2013-03-10T20:06:41.070
> 
> 标签：c#, regex

我得到了以下正则表达式

```
var fixedString = Regex.Replace(subject, @"(:[\w]+ [\d]+)$", "", 
                                                        RegexOptions.Multiline); 
```

这是行不通的。如果我使用它可以工作`\r\n`，但我想支持所有类型的换行符。作为[另一个答案](https://stackoverflow.com/a/6596091/70386)状态，我必须使用`RegexOptions.Multiline`才能`$`用作行尾标记（而不是字符串结尾）。但这似乎没有帮助。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:32:27.693

我不确定你想要实现什么，我想我明白了，你还想替换行尾的换行符。

问题是`$`零宽度断言。它不匹配换行符，它匹配**之前** `\n`的位置。

你可以做不同的其他事情：

1.  如果可以匹配所有以下换行符，也意味着所有以下空行，您可以这样做：

    ```
    var fixedString = Regex.Replace(subject, @"(:[\w]+ [\d]+)[\r\n]+", ""); 
    ```

2.  如果您只想匹配行后的换行符并继续跟随空行，则必须为所有可能的组合创建一个模式，例如：

    ```
    var fixedString = Regex.Replace(subject, @"(:[\w]+ [\d]+)\r?\n", ""); 
    ```

    这将匹配组合`\n`和`\r\n`

# java - 我添加到 JPanel 的组件在我运行应用程序时不显示

> ID：15326955
> 
> 赞同：0
> 
> 时间：2013-03-10T20:07:01.930
> 
> 标签：java, swing, scala

我尝试用按钮创建网格表

```
package midterm

import java.awt.BorderLayout
import java.awt.Color
import java.awt.GridLayout
import javax.swing.JButton
import javax.swing.JPanel;
import scala.swing.Button
import scala.swing.MainFrame
import scala.swing.SimpleSwingApplication

object Main extends SimpleSwingApplication {
def top = new MainFrame {
title = "Hello, World!"
val panel = new JPanel()
var btn = Array.ofDim[JButton](8,8)
//contents =new JButton()
 for(i<-0 to 7){
    for(j<-0 to 7){
      btn(i)(j)= new JButton("vsdf")
      btn(i)(j).setBounds(i*80,j*80,80,80)
      btn(i)(j).setBackground(Color.BLUE)
      panel.add(btn(i)(j))
    }
 }
}
} 
```

编译很好，但在输出中只有没有按钮的框架，仅此而已。请告诉我我的错误！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-10T20:15:25.313

您已将按钮添加到 JPanel，但尚未在框架上放置面板（因此框架以空内容结束）。相反，您必须编写如下内容：

```
object Main extends SimpleSwingApplication {
  def top = new MainFrame {
  //...
    contents = new JPanel()
  //...
  contents+= btn(i)(j)
  }
} 
```

[请参阅 Scala Swing 教程](http://www.scala-lang.org/sites/default/files/sids/imaier/Mon,%202009-11-02,%2008:55/scala-swing-design.pdf)。

# java - JAVA：如何对从文件中读取的字符串进行排序并按字母顺序输出到控制台？

> ID：15326963
> 
> 赞同：0
> 
> 时间：2013-03-10T20:07:36.153
> 
> 标签：java, addressbook, contact

我正在寻找按姓氏字母顺序从文件中读取的联系人排序到控制台？我该怎么做呢？联系人已经以姓氏开头写入文件，当用户想要在控制台中查看联系人时，我只想按字母顺序将它们读回应用程序。

```
// Read from file, print to console. by XXXXX
            // ----------------------------------------------------------
            int counter = 0;
            String line = null;

            // Location of file to read
            File file = new File("contactlist.csv");

            try {

                Scanner scanner = new Scanner(file);

                while (scanner.hasNextLine()) {
                    line = scanner.nextLine();
                    System.out.println(line);
                    counter++;
                }
                scanner.close();
            } catch (FileNotFoundException e) {

            }
            System.out.println("\n" + counter + " contacts in records.");

        }
        break;
        // ----------------------------------------------------------
        // End read file to console. by XXXX 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:14:37.980

在打印之前，将每一行添加到一个排序集中，作为[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)：

```
Set<String> lines = new TreeSet<>();
while (scanner.hasNextLine()) {
    line = scanner.nextLine();
    lines.add(line);
    counter++;
}

for (String fileLine : lines) {
    System.out.println(fileLine);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T21:32:49.797

```
package main.java.com.example;

import java.io.*;
import java.net.URL;
import java.util.Set;
import java.util.TreeSet;

public class ReadFromCSV {
    public static void main(String[] args) {
        try {
            final ClassLoader loader = ReadFromCSV.class.getClassLoader();
            URL url = loader.getResource("csv/contacts.csv");
            if (null != url) {
                File f = new File(url.getPath());
                BufferedReader br = new BufferedReader(new FileReader(f));
                Set<String> set = new TreeSet<String>();
                String str;

                while ((str = br.readLine()) != null) {
                    set.add(str);
                }

                for (String key : set) {
                    System.out.println(key);
                }
            }
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:14:54.277

从文件中读取名称，将它们放入 SortedSet 类的对象中。

# php - Javascript 在用户浏览器中保存表单值以防会话过期

> ID：15326964
> 
> 赞同：0
> 
> 时间：2013-03-10T20:07:37.343
> 
> 标签：php, javascript, forms, session, save

目前正在处理我项目的其他一些方面，但是当我这样做时，我希望能获得一些关于我将很快解决的问题的信息。经过非常简短的搜索后没有立即出现任何问题，我想我会把问题留在这里，看看是否有其他人巧妙地解决了这个问题。

继承人的问题：

我们开发了一个非常典型的 CMS，但有一些更高配置的客户端，这些客户端需要比大多数处理个人博客的 CMS 更高的安全性，因此用户会话必须过期以帮助防止会话劫持。当前设置为 20 分钟，但我们希望将其设置为 10 分钟以上的不活动时间。如果客户说，写一篇大文章，或者花很长时间填写表格，当他们点击保存时，如果他们的会话已过期，他们将丢失所有数据，就会出现问题。我敢肯定，这会导致一些非常讨厌的电子邮件！

有没有人想出一个很好的解决方案？我的想法是让javascript每隔几分钟自动将表单数据保存到用户浏览器（可能作为cookie），当用户会话到期时，在他们登录并返回页面后，javascript会填写表单再次。POST 成功后，javascript 会自行清除。

SO社区的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T05:44:09.637

[jsper](https://github.com/rmcvey/jsper)或其他类似的库是一个不错的选择；它允许您在浏览器中保存数据，并支持所有使用 localStorage、cookie、数据属性等的浏览器（回到 IE6）。

# ruby-on-rails - 重新分配路线的最佳方法是什么

> ID：15326965
> 
> 赞同：2
> 
> 时间：2013-03-10T20:07:40.490
> 
> 标签：ruby-on-rails, ruby, forem

目前，我的 routes.rb 文件中有这些路线：

```
get 'exit' => 'sessions#destroy', :as => 'logout'
get 'enter' => 'sessions#new', :as => '
get 'register' => 'users#new', :as => '
get 'posts' => 'posts#new', :as => '
get 'offers' => 'offers#index', :as => 'offers' 
```

由于 Forem ( [https://github.com/radar/forem](https://github.com/radar/forem) ) 在问我： # 我们要求您不要在此处使用 :as 选项，因为 Forem 依赖于它作为“forem”的默认值。

重构我的路由的最佳方法是什么，以便它们匹配 Forem 请求，以避免使用：as？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T15:47:19.170

也许这有帮助：`match 'name_you_want' => redirect('ControllerName#action_name')`

# ios - 让视图覆盖应用程序中所有其他视图控制器的正确方法是什么？

> ID：15326966
> 
> 赞同：4
> 
> 时间：2013-03-10T20:07:42.097
> 
> 标签：ios, objective-c, cocoa-touch, uiviewcontroller

我对 iOS 开发比较陌生，并且正在计划一个应用程序。该应用程序将有几个不同的场景/视图控制器，它们将占据整个屏幕。

我打算在屏幕的左上角始终有一个小按钮，它可以将用户带回主页，无论当前显示的是哪个 vc。

我可以在每个 viewController 的视图中放置一个单独但相同的按钮，但这似乎不优雅且脆弱。

阅读 View Controllers Programming guide 后，我的直觉是创建一个 View Controller Container，它将作为根 vc - 这个 vc 将有两个子 vcs - 一个带有主页按钮，另一个位于所有其他 VC 进入的下方（有效地成为新的根 vc。）

对于更有经验的 iOS 开发人员来说，这似乎是一个明智的解决方案吗？有没有更简单的解决方案？

谢天谢地收到任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:43:51.003

我认为这可能是您最好的解决方案。在 iOS 中，ViewController 占用了它所有的可用空间。如果没有您自己管理的“容器”视图，您放置的任何视图控制器都将占据整个窗口，覆盖您显示的任何内容。

但是，根据您的项目，还有一种可能更简单的替代方法。

您可以在某个中心位置（例如，您的 App Delegate 类）创建一个 UIView 对象（您的按钮）。该视图可能有一个附加到方法的按钮：

```
@implementation AppDelegate

- (void) someSetupMethod {
    UIButton* b = [UIButton buttonWithType:UIButtonTypeCustom];
    // setup whatever properties

    // Now set button to call a method *on this AppDelegate object* ("self"):
    [b addTarget:self action:@selector(homeButtonTapped:) forControlEvents:UIControlEventTouchUpInside];

    // Store the button definition somewhere permanant
    self.reusableHomeButton = b;
}

- (void) homeButtonTapped:(id)sender {
    // do something to pop view controllers back to what you want.
} 
```

然后，在您的视图控制器中，它们都可以在出现时显示主页按钮：

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    AppDelegate* appDelegate = (AppDelegate*)[UIApplication sharedApplication].delegate;
    [self.view addSubview:appDelegate.reusableHomeButton];
} 
```

这利用了一个有意的副作用，`[view addSubview:...]`即如果视图已经在某个父视图中，它首先*将其从该父*视图中删除，然后添加到新视图中。

它还利用了按钮可以将其消息发送到*任何*对象的事实。它不必是承载按钮父视图的 ViewController。

这会导致您的按钮在出现新控制器时从一个显示的视图控制器的 .view 中“移动”到新的。

由于该按钮具有 AppDelegate 对象的目标（因此会将其消息发送到该对象），因此只要应用程序委托对象存在以接收消息，它就可以“从任何地方”工作（只要您的应用程序在跑）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-22T07:46:37.517

使用 Swift，您可以获得协议和协议扩展的强大功能。我写了[一篇](https://andreygordeev.com/2017/04/18/overlay-view-controller-protocols-swift/)关于这种方法的文章。简而言之，您将需要以下内容：

1.  创建一个描述覆盖视图控制器的协议。
2.  使用协议扩展将呈现/关闭视图控制器的逻辑封装到该协议中。
3.  为覆盖主机创建协议。
4.  使用协议扩展将覆盖视图控制器从故事板实例化到该协议中的逻辑封装。

你都准备好了。用法如下所示：

```
class ViewController: UIViewController, OverlayHost {
    @IBAction func showOverlayButtonPressed() {
        showOverlay(type: YourOverlayViewController.self, 
            fromStoryboardWithName: "Main")
    }
} 
```

源代码：[https ://github.com/agordeev/OverlayViewController](https://github.com/agordeev/OverlayViewController)

# javascript - 如何在顺序递归的情况下获得多个集合的所有可能组合

> ID：15326968
> 
> 赞同：0
> 
> 时间：2013-03-10T20:07:44.140
> 
> 标签：javascript, recursion, combinations

给定多组值。我想在保留顺序的同时找到这些值的每个组合（抱歉，我使用这个术语松散但不确定正确的词是什么）。

即对于

```
var set1 = ["a","1"];
var set2 = ["b","2"];
var set3 = ["c","3"]; 
```

输出应该是

```
[a][b][c]
[a][b][3] 
[a][2][c] 
[a][2][3] 
[1][b][c]
[1][b][3] 
[1][2][c] 
[1][2][3] 
```

这提供了正确的结果，但我认为这不是一个很好的解决方案，但只是不能递归地做这件事。该示例使用 Javascript，但任何语言或见解都可以。

```
var set1 = ["a","1"];
var set2 = ["b","2"];
var set3 = ["c","3"];

var input = [set1, set2, set3];
var result = [];

for(var a=0;a<input[0].length;a++){
    for(var i=0;i<input[1].length;i++){
        for(var j=0;j<input[2].length;j++){
            var output = [];
            output.push(input[0][a]);
            output.push(input[1][i]);
            output.push(input[2][j]);
            result.push(output);
            console.log("["+input[0][a]+"]["+input[1][i]+"]["+input[2][j]+"]");
        }
    }           
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:13:06.087

当然，您可以像这样递归地探索空间：

```
function extend_set (base, sets) {
    if(sets.length === 0) {
        return console.log('found: '+base);
    }
    sets = sets.slice();

    var choices = sets.shift();
    for (var i = 0; i < choices.length; i += 1) {
        var b2 = base.slice();
        b2.push(choices[i]);
        extend_set(b2, sets);
    }
}

var set1 = ["a","1"];
var set2 = ["b","2"];
var set3 = ["c","3"];
var sets = [set1, set2, set3];
extend_set([], sets); 
```

# php - 如何将它们循环出来？

> ID：15326970
> 
> 赞同：0
> 
> 时间：2013-03-10T20:07:58.763
> 
> 标签：php, mysql, wordpress

如果结构是：

```
parent A
  -child B
   - - child c
  ---child d
----child e 
```

下面的代码可以循环出第一层（-child B）。如果我想把它们全部循环出来，我该怎么做？

```
foreach ($childCatID as $kid)
{
    $childCatName = $wpdb->get_row("SELECT name FROM $wpdb->terms WHERE term_id=$kid");
    echo $childCatName->name;
} 
```

如果父 A 中的所有子层都是第四深度，如何将它们循环出来？如果不知道父 A 中所有子节点的层，有没有办法将它们循环出来？

我尝试使用以下代码，但没有将它们循环出来。

```
foreach ($childCatID as $kidone)
  foreach ($kidone as $kidtwo){
    foreach ($kidtwo as $kidthree){
      foreach ( $kidthree as $kid){
        $childCatName = $wpdb->get_row("SELECT name FROM $wpdb->terms WHERE term_id=$kid");
        echo $childCatName->name;
      }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:27:43.090

您应该将 foreach 循环打包成一个函数，并递归调用它

```
function EchoNode($node)
{
    if (is_array($node))
    {
        foreach ($node as $kid)
        {
            if (is_array($kid))
            {
                EchoNode($kid);
            }
            else
            {
                $childCatName = $wpdb->get_row("SELECT name FROM $wpdb->terms WHERE term_id=$kid");
                echo $childCatName->name;
            }
        }
    }
    else
    {
        $childCatName = $wpdb->get_row("SELECT name FROM $wpdb->terms WHERE term_id=$node");
        echo $childCatName->name;
    }
} 
```

# php - 在页面编辑中添加自定义元复选框

> ID：15326974
> 
> 赞同：0
> 
> 时间：2013-03-10T20:08:21.273
> 
> 标签：php, wordpress, meta-boxes

我又遇到了一个我不知道如何解决的问题。

我正在尝试在 wordpress 的页面编辑屏幕中添加一个标有“特色产品”的自定义复选框。这个想法是，当前选中此选项的任何产品页面都将在网站主页上显示其信息。

我对 wordpress 和 PHP 完全陌生。在过去的 48 小时里，我一直在使用“Tutsplus - PHP Essentials”和显然这个网站学习 PHP。

我找到了我修改并添加到我的主题的 function.php 的这段代码，它在页面编辑屏幕中放置了复选框。

```
function register_post_assets(){
    add_meta_box('featured-product', __('Featured Product'), 'add_featured_meta_box', 'page', 'advanced', 'high');
}
add_action('admin_init', 'register_post_assets', 1);

function add_featured_meta_box($post){
    $featured = get_post_meta($post->ID, '_featured-product', true);
    echo "<label for='_featured-product'>".__('Feature this product?')."</label>";
    echo "<input type='checkbox' name='_featured-product' id='featured-product' value='1' ".checked(1, $featured)." />";
} 
```

还有第二段代码需要在下面添加，我认为是在保存/更新编辑页面时保存复选框选择。

```
function save_featured_meta($post_id){
    if(isset($_REQUEST['featured-product']))
        update_post_meta(esc_attr($post_id, '_featured-product', esc_attr($_REQUEST['featured-product'])); 
}
add_action('save_post', 'save_featured_meta'); 
```

但是，每当我尝试运行包含第二段代码的页面时，我都会被告知行中有错误 `update_post_meta(esc_attr($page_id, '_featured-product', esc_attr($_REQUEST['featured-product']));`

如果有人能帮助我弄清楚为什么这不起作用，以及我所做的改变是否完全正确，我将不胜感激。

那么在主页上呼应这个选择页面的标题的最简单/最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:58:12.270

尝试

```
function save_featured_meta($post_id){
    if(isset($_REQUEST['featured-product']))
        update_post_meta( $post_id, '_featured-product', esc_attr($_REQUEST['featured-product'])); 
}
add_action('save_post', 'save_featured_meta'); 
```

# linux - libmpfr.so.4 依赖与 --disable-shared

> ID：15326978
> 
> 赞同：1
> 
> 时间：2013-03-10T20:08:42.923
> 
> 标签：linux, gcc, toolchain, mpfr

每个人！我有同样的结果**

> 加载共享库时出错：libmpfr.so.4：无法打开共享对象文件：没有这样的文件或目录

但在另一个配置下：

```
../gcc.s/configure      \
--target=$LFS_TGT       \
--prefix=/tools     \
--with-sysroot=$LFS     \
--with-newlib       \
--without-headers       \
--with-local-prefix=/tools  \
--with-native-system-header-dir=/tools/include  \
--disable-nls       \
--disable-shared        \
--disable-multlib       \
--disable-decimal-float \
--disable-threads       \
--disable-libmudflap    \
--disable-libssp        \
--disable-libgomp       \
--disable-libquadmath   \
--enable-language=c 
```

在 GCC 源代码树中存在 gmp、mpc、mpfr

我的问题是如何`--disable-shared` 将 cc1 与 gcc 构建结果中存在的`libmpfr.so.4`insteed static链接起来：`libmpfr.a`

```
gcc.b/mpfr/src/.libs/libmpfr.a 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:36:49.110

首先，运行`pacman -Syu`并执行任何/所有更新。***请务必注意 pacman 的输出***（检查`/var/log/pacman.log`是否有大量输出）。查找并合并找到的任何 .pacnew，日志将显示这些文件的位置，或者您也可以`ls -al /etc/*.pacnew`，但无论如何都要检查日志以确保您没有错过任何子目录或其他位置的任何文件。此外，如果内核已更新，请确保重新启动。如果这不能解决问题，则针对最新的库重建 mpfr。

[这](https://wiki.archlinux.org/index.php/Pacnew_and_Pacsave_Files)是有关处理 .pacnew 和 .pacsave 文件的 Arch Linux Wiki 的链接。

### 执行完整更新

`# pacman -Syu`

### 如果 mpfr 不能从更新中修复

`# pacman -Syu mpfr` ***在安装/更新时始终***使用`-Syu`以确保所有 repo 都已更新。

### 检查 libmpfr.so.* 所有权。

`# pacman -Qo /usr/lib/libmpfr.so`

`/usr/lib/libmpfr.so.4.1.1 is owned by mpfr 3.1.1.p2-2`

如果您在更新后遇到任何问题，请将日志和错误消息粘贴到 pastebin 网站上，我会看看。

**抱歉**，我以为这是被标记的`[archlinux]`，但显然不是*（谢谢 Jonathan Wakely）*。但同样的步骤也适用。替换`pacman -*`为您的发行版包管理器`apt-get`, `yum`, `emerge`，无论它可能是什么。mpfr 必须针对较新的库进行重建。

# jquery - 自动完成输入选择的触发功能

> ID：15326979
> 
> 赞同：0
> 
> 时间：2013-03-10T20:08:42.837
> 
> 标签：jquery

我有一个可以自动完成地址的输入字段，我想要一个地址选择来触发一个功能。

html

```
Address: <input id="searchTextField" type="text" autocomplete="on" runat="server" /> 
```

JS

```
$('input[searchTextField]').bind('autocompleteSelect', function() {
  // some code...
}); 
```

我觉得我和上面的没有任何关系......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:14:36.133

我认为您正在尝试这样做。

```
$("#searchTextField" ).autocomplete({
    change: function( event, ui ) {
        // The code you want after selection is made
    }
}); 
```

# python - 如何为集合包含测试实现 __eq__？

> ID：15326985
> 
> 赞同：13
> 
> 时间：2013-03-10T20:09:21.213
> 
> 标签：python, set, equality

我遇到了一个问题，我将一个实例添加到集合中，然后进行测试以查看该对象是否存在于该集合中。我已经覆盖`__eq__()`，但在包含测试期间它没有被调用。我必须改写`__hash__()`吗？`__hash__()`如果是这样，考虑到我需要散列元组、列表和字典，我将如何实现？

```
class DummyObj(object):

    def __init__(self, myTuple, myList, myDictionary=None):
        self.myTuple = myTuple
        self.myList = myList
        self.myDictionary = myDictionary

    def __eq__(self, other):
        return self.myTuple == other.myTuple and \
            self.myList == other.myList and \
            self.myDictionary == other.myDictionary

    def __ne__(self, other):
        return not self.__eq__(other)

if __name__ == '__main__':

    list1 = [1, 2, 3]
    t1    = (4, 5, 6)
    d1    = { 7 : True, 8 : True, 9 : True }
    p1 = DummyObj(t1, list1, d1)

    mySet = set()

    mySet.add(p1)

    if p1 in mySet:
        print "p1 in set"
    else:
        print "p1 not in set" 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-10T20:14:40.773

从[关于集合的文档](https://docs.python.org/2/library/sets.html)：

> 集合类是使用字典实现的。因此，对集合元素的要求与对字典键的要求相同；也就是说，该元素同时定义了 __eq__() 和 __hash__()。

[__hash__ 函数文档](https://docs.python.org/2/reference/datamodel.html#object.__hash__)建议将组件的哈希值异或在一起。正如其他人所提到的，散列可变对象通常不是一个好主意，但如果你真的需要，这很有效：

```
class DummyObj(object):

    ...

    def __hash__(self):
        return (hash(self.myTuple) ^
                hash(tuple(self.myList)) ^
                hash(tuple(self.myDictionary.items()))) 
```

并检查它是否有效：

```
p1 = DummyObj(t1, list1, d1)
p2 = DummyObj(t1, list1, d1)
mySet = set()
mySet.add(p1)

print "p1 in set", p1 in mySet
print "p2 in set", p2 in mySet 
```

这打印：

```
$ python settest.py 
p1 in set True
p2 in set True 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-03-10T20:20:44.033

好吧，当使用“in”运算符比较对象时，我的猜测会`__eq__`或`__ne__`不会被 python 调用。我不确定具体的“丰富比较”运算符是什么，查看文档，但是`__cmp__`如果没有实现更合适的“丰富比较”运算符，则覆盖应该可以解决您的问题，因为 python 默认使用它来执行对象比较。

# jquery - Fancy Box 2 调用 html 页面

> ID：15326986
> 
> 赞同：0
> 
> 时间：2013-03-10T20:09:24.437
> 
> 标签：jquery, html, fancybox, fancybox-2

我正在开发一个简单的应用程序，我在页面上定义了fancybox，我希望将页面内容加载到fancy box 窗口中。我通过使用 href html 标记来处理对其他页面的调用。但是我想当文件加载时它在fancybox中打开。下面是我的代码：

我想要实现的是我想在页面上定义fancybox设置，这些设置将显示在其中。当页面加载或通过其他方式被用户调用时，我希望它显示在花式框中。

**脚本**

```
 <script type="text/javascript">

        $(document).ready(function() {

            $(".fancybox").fancybox({

                autoDimensions : false,
                width: 1300,
                height: 'auto',
                openEffect  : 'elastic', 
                href        : 'http://hello.htm'
                    closeEffect : 'elastic',
                    type: 'iframe',

                beforeLoad: function() {
                    this.title = $(this.element).attr('caption');

                }

            });         
        });
    </script> 
```

正在从另一个花式框窗口调用此页面，但是花式框窗口属于旧页面，因为旧页面的标题仍然存在

**jsp**

```
<head>
 <title>Simple Application</title> 

  </head>
  <body>
<form:form id="hello">
    <h1><fmt:message key="heading"/></h1>
    <p><fmt:message key="greeting"/></p>

   </body>
</html> 
```

# c# - 如何加载 SoundTouchSharp？

> ID：15326987
> 
> 赞同：0
> 
> 时间：2013-03-10T20:09:26.837
> 
> 标签：c#

我在我的项目中使用库 SoundTouchSharp。如何创建它的实例？我真的不明白我是否需要使用“使用”行以及是否需要其他任何东西才能最终得到

```
SoundTouchSharp s = new SoundTouchSharp(); 
```

因为现在编译器说：

> `SoundTouchSharp`“找不到类型或命名空间名称。”

我包括`SoundTouchSharp`作为参考（在创建 .cs 文件的 .dll 版本之后），我还将 SoundTouchSharp.dll 和 soundtouch.dll 放在 bin/Debug 文件夹中。

那么现在怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T20:38:26.523

> 我包括 SoundTouchSharp 作为参考（在创建 .cs 文件的 .dll 版本之后），我还将 SoundTouchSharp.dll 和 soundtouch.dll 放在 bin/Debug 文件夹中。

如果要在另一个命名空间中使用命名空间中的`SoundTouchSharp`类，则`BigMansStuff.PracticeSharp.Core`必须将其公开，然后创建库。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.Runtime.InteropServices;

namespace BigMansStuff.PracticeSharp.Core
{
    /// <summary>
    /// .NET C# Wrapper to the SoundTouch Native C++ Audio library
    /// </summary>
    /// <see cref="http://www.surina.net/soundtouch/index.html"/>
    public class SoundTouchSharp: IDisposable
    {
         //...
    }

    //...
} 
```

然后在您的项目中，您必须添加一个*using 指令*，该指令允许从命名空间使用该类型：

```
using BigMansStuff.PracticeSharp.Core; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:23:29.200

您需要添加一条`using`语句以包含定义该类的命名空间：

```
using BigMansStuff.PracticeSharp.Core; 
```

# ruby - 未找到 hartl 第 5 章 full_title

> ID：15326988
> 
> 赞同：1
> 
> 时间：2013-03-10T20:09:29.263
> 
> 标签：ruby, ruby-on-rails-3

我在第 5 章的 Hartl 教程中。运行测试文件时出现以下错误：

失败：

```
1) User pages Signup page 
 Failure/Error: it { should have_selector('title', text: full_title('Sign up')) }
 NoMethodError:
   undefined method `full_title' for #<RSpec::Core::ExampleGroup::Nested_2::Nested_1:0xaeb792c>
 # ./spec/requests/user_pages_spec.rb:12:in `block (3 levels) in <top (required)>' 
```

为简洁起见，我在故障排除时注释掉了其他“未找到完整标题”错误。

我已经确认该方法在 app/helpers/application_helper.rb 文件中。任何想法为什么它没有被发现？它肯定在帮助文件中。

我的用户页面规范文件：

```
require 'spec_helper'

describe "User pages" do

  subject { page }

  describe "Signup page" do
    before { visit signup_path }

    it { should have_selector('h1',    text: 'Sign Up') }
    it { should have_selector('title', text: full_title('Sign up')) }
  end
end 
```

和我的 application_helper.rb 文件

```
module ApplicationHelper

  # Returns the full title on a per-page basis.
  def full_title(page_title)
    base_title = "Ruby on Rails Tutorial Sample App"
    if page_title.empty?
      base_title
    else
      "#{base_title} | #{page_title}"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T21:00:52.487

[教程](http://ruby.railstutorial.org/chapters/filling-in-the-layout#sec-user_signup)似乎在您的不同位置添加了它。上`full_title`使用的`spec`定义在 上`spec/support/utilities.rb`。上定义的`application_helper.rb`用于`app/views/layouts/application.html.erb`.

# loops - 为什么编程语言中有两个循环？

> ID：15326990
> 
> 赞同：1
> 
> 时间：2013-03-10T20:09:35.107
> 
> 标签：loops, for-loop, programming-languages, while-loop

自从我开始学习编程以来，在我学习的每一种语言中，总是有一个`while`循环和`for`循环。

`while`可以做所有`for`循环可以做的事情。两者都执行相同的迭代功能。那么添加`for`循环的目的是什么？

使用它们有任何性能差异吗？为什么每种语言都有两个循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T20:14:14.253

我假设您正在谈论`for`例如 C/C++ 中使用的典型循环。

尽管`for`循环总是可以重写为`while`循环，但它具有很大的*可读性*优势：所有与循环相关的属性

*   初始化
*   测试
*   后循环操作（通常是增加或遍历）

可以在一行中捕获。如果您有一个较长的带有`while`循环的主体，则整个内容可能不适合您的屏幕尺寸，或者即使它适合您也必须直观地解析代码以查看发生了什么。

本质上，如果适用，`for`循环可以更好地捕捉代码的意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:26:48.250

因为它是使循环“循环”的条件，并且在这两种情况下，条件都是由用户提供的（并且它不是循环构造转换为机器代码的一部分），我怀疑它们作为文档工具以不同的风格存在比什么都重要。但是 for 循环使您能够声明仅在循环期间存在的局部变量：

```
for (Iterator it = c.begin(); it != c.end(); ++it) {
} // it destroyed here 
```

Ofc 你可以不用所有循环；一个 goto 就足够了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T20:14:15.187

唯一的区别在于代码的可读性，在编译时，`for`循环被转换为`while`具有先前初始化和后续增量的循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-10T20:14:15.867

`for`当我们知道终止条件时使用循环。

`while`如果我们不知道终止条件或更好的情况，通常使用循环

# c# - 使用 c# 和 sql 命令进行表单验证

> ID：15326997
> 
> 赞同：0
> 
> 时间：2013-03-10T20:10:26.373
> 
> 标签：c#, sql, sql-server, database

我正在尝试制作一个 Windows 窗体来登录另一个窗体，我正在使用带有用户和密码的数据库，代码如下：

```
private void button1_Click(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection("Data Source=mmtsql.XXX.XXXX.XX.XX;Initial Catalog=mmtXX-XXX;User ID=mmtXX-XXX;Password=mmtXX-XXX");
    conn.Open();
    SqlCommand mycommand = new SqlCommand("SELECT User, Password FROM UsersData WHERE User = '" + textBox1.Text + "' and Password = '" + textBox2.Text + "'", conn);
    SqlDataReader reader = mycommand.ExecuteReader();
    if(reader != null) 
    {
        if(reader.Read())
        {
            Form1 formload = new Form1();
            formload.Show();
        }
        else
        {
            label3.Text = "Invalid Username or Password !";
        }
    }
    else
    {
        label3.Text = "Invalid Username or Password !";
    } 
```

得到的问题是，无论我在文本框中插入什么，我得到的是对还是错：

> 用户名或密码无效！

无论如何要修复我的代码吗？问候;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T20:37:09.130

我会这样做，保持您使用的方法：

```
private void button1_Click(object sender, EventArgs e)
{
    SqlConnection conn = new SqlConnection(conn_str);
    conn.Open();
    string sql = "SELECT User, Password 
        FROM UsersData WHERE User=@user and Password=@password"
    SqlCommand mycommand = new SqlCommand(sql, conn);
    //parameterize your query!
    mycommand.Parameters.AddWithValue("user", txtuser.text);
    mycommand.Parameters.AddWithValuye("password", txtpassword.password);

    SqlDataReader reader = mycommand.ExecuteReader();
    if(reader == null)
    {
        label3.Text = "Database query failed!";
    }
    else if(reader.HasRows)
    {
        Form1 formload = new Form1();
        formload.Show();
    }
    else
    {
        label3.Text = "Invalid Username or Password !";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T20:42:35.963

使用参数化查询，因为它们将帮助您防止 SLaks 提到的 sql 注入。将您的代码更改为以下

```
using (SqlCommand command = new SqlCommand("SELECT User, Password 
    FROM UsersData WHERE User=@user and Password=@password", connection))
    {
    //
    // Add new SqlParameter to the command.
    //
    command.Parameters.Add(new SqlParameter("user ", textbox1.text));
            command.Parameters.Add(new SqlParameter("password", textbox2.text));

    SqlDataReader reader = command.ExecuteReader();
            if (reader == null)

    {
      Form1 formload = new Form1();
              formload.Show();    
    }
            else
            {
              label3.Text = "Invalid Username or Password !";    
            }
   } 
```

# javascript - GWT JSNI 中的 Javascript 条件编译

> ID：15326998
> 
> 赞同：0
> 
> 时间：2013-03-10T20:10:28.120
> 
> 标签：javascript, gwt, jsni, conditional-compilation

我有这个条件编译语句来评估浏览器是否是`IE`：

```
ie = /*@cc_on!@*/false;
if (ie) {
 //do IE specific stuff..
} 
```

我需要在 JSNI 的 GWT 中使用它。但是，当我这样做时：

```
public native void JS()  /*-{
 ie = /*@cc_on!@*/false;
}-*/; 
```

我在该行收到错误，例如**语法错误，} 预期**。我试过了`eval`，错误仍然存​​在。我该如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-10T20:27:43.043

`/*@cc_on!@*/`不是正则表达式，而是多行 JavaScript 注释 ( `/* .. comment .. */`)。在 Internet Explorer 中，这不仅仅是注释。对代码进行解析和评估（此功能称为[条件编译](http://msdn.microsoft.com/en-us/library/ahx1z4fs(VS.80).aspx)）。

您的`*/`代码中的 结束了 GWT 特定`/*-{`部分，导致出现错误。

解决方案是使用不同的方式写下评论：

```
var ie = false;
//@cc_on ie = true; 
```

另一种对 JavaScript 缩小器也安全的方法是：

```
var ie = eval('/*@cc_on!@*'+'/false'); 
```