# StackOverflow 问答 15286000-15286999

# php - 从文件中解析内容

> ID：15286002
> 
> 赞同：3
> 
> 时间：2013-03-08T03:04:59.673
> 
> 标签：php, regex, preg-match, preg-match-all

我正在尝试解析具有以下内容的文件并将其显示在表格中。问题是我只能得到第一个租约节。我不知道如何获得其余的？有任何想法吗？

输入：

```
# The format of this file is documented in the dhcpd.leases manual page.
# This lease file was written by isc-dhcp-V3.0.3b1

lease 192.168.98.25 {
  starts 5 2012/10/05 21:18:41;
  ends 5 2012/10/05 22:48:15;
  tstp 5 2012/10/05 22:18:41;
  binding state free;
  hardware ethernet 78:d6:f0:c1:7f:b5;
  uid "\001x\326\360\301\177\265";
}
lease 192.168.10.1 {
  starts 5 2012/10/04 12:23:23;
  ends 5 2012/10/05 22:48:15;
  binding state active;
  next binding state free;
  hardware ethernet 56:a3:f0:d1:75:b5;
  uid "\001x\326\360\301\177\265";
}
....
.... 
```

输出：

```
 HW Address  |start time  | end time | IP 
 78:d6:f0:c1:7f:b5 | 2012/10/05 21:18:41 | 2012/10/05 22:48:15 | 192.168.98.25
 56:a3:f0:d1:75:b5 | 2012/10/04 12:23:23 | 2012/10/05 22:48:15 | 192.168.10.1 
```

这是我迄今为止尝试过的：

```
$readfile = file('/etc/dhcp/dhcpd.leases',FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES);

$arstring = implode(" ",$readfile);

$regex=array();
preg_match_all("(lease\s*([0-9.]+)\s*{\s*starts\s*.?\s*([0-9/\s:]*).?\s*ends\s*.?\s*([0-9/\s:]*).*ethernet\s*([\w:]*))", $arstring, $regex,PREG_SET_ORDER); 
```

这给了我：

```
[0] => Array
    (
        [0] => lease 192.168.98.25 {   starts 5 2012/10/05 21:18:41;   ends 5 2012/10/05 22:18:41;   tstp 5 2012/10/05 22:18:41;   binding state free;   hardware ethernet 78:d6:f0:c1:7f:b5;   uid "\001x\326\360\301\177\265"; } lease 192.168.98.25 {   starts 5 2012/10/05 22:54:15;   ends 5 2012/10/05 23:54:15;   binding state active;   next binding state free;   hardware ethernet 78:d6:f0:c1:7f:b5;   uid "\001x\326\360\301\177\265"; } lease 192.168.98.25 {   starts 5 2012/10/05 22:54:16;   ends 5 2012/10/05 23:54:16;   binding state active;   next binding state free;   hardware ethernet 78:d6:f0:c1:7f:b5
        [1] => 192.168.98.25
        [2] => 2012/10/05 21:18:41
        [3] => 2012/10/05 22:18:41
        [4] => 78:d6:f0:c1:7f:b5
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:31:36.397

我最终发现的问题是我没有逃避 . 和 / 修饰符。

这是我的工作正则表达式：

```
$reg_str = '/(lease\s*([0-9\.]+)\s*{\s*starts\s*.?\s*([0-9\/\s:]*).?\s*ends\s*.?\s*([0-9\/:\s\w]*);[\r\n\s\w;]*ethernet\s*([\w:]*);?[\w\s\\\"0-9\s\r]*;?\s*[\w\-]*\s*"?([\w-]*)"?;?\s*})/ims';
preg_match_all($reg_str, $arstring, $leases, PREG_SET_ORDER); 
```

谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:10:36.557

我不太了解 PHP，所以我不能给你确切的代码，但是如果你把它变成一个替换然后在循环中执行它，用一个空白替换匹配的部分，直到没有任何东西可以匹配，那可能会成功。

# php - 关于数组/关联数组的问题

> ID：15286011
> 
> 赞同：0
> 
> 时间：2013-03-08T03:05:38.287
> 
> 标签：php, arrays, associative

我正在尝试创建一个 3 级数组，然后检索第 3 级数组数据，但不知何故我得到了这个。

```
$project = array();
$project[] = "name";
$project[] = "id";
$project["id"] = "AXA";
$project["id"]["AXA"] = "a new project";
echo $project["id"]["AXA"]; 
```

我得到的结果是`a`来自`a new project`

如何获得整个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:25:42.960

您的代码应该只使用多维数组作为赋值，如下所示

```
$project = array (
    'name',
    'id'=>array(
        'AXA'=>'a new project'
    ) 
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:11:53.817

这是`var_dump`您的代码：

```
数组（3）{
  [0]=>
  字符串（4）“名称”
  [1]=>
  字符串（2）“身份证”
  [“身份证”]=>
  字符串（3）“aXA”
}
```

你实际上并没有创造一个新的水平。您需要做的是初始化第二个数组：

```
$project = array();
$project[] = "name";
$project[] = "id";
$project["id"] = array(); //here
$project["id"]["AXA"] = "a new project"; 
```

否则，它将覆盖 value `AXA`。

```
数组（3）{
  [0]=>
  字符串（4）“名称”
  [1]=>
  字符串（2）“身份证”
  [“身份证”]=>
  数组（1）{
    [“安盛”]=>
    string(13) "一个新项目"
  }
}
```

# c - 分段错误 - strcpy() - C

> ID：15286014
> 
> 赞同：0
> 
> 时间：2013-03-08T03:06:20.843
> 
> 标签：c, segmentation-fault, strcpy

我正在为命令行 shell 实现历史功能。我已经实现了一个循环数组来保存十个最近的命令。每个命令也由一个整数标记，指定哪个总命令是。例如，如果总共输入了 30 个命令，则循环数组中的 10 个命令将被编号（30、29、28、27、...、21）。

如果用户要插入命令“r”，后跟一个标记十条指令之一的数字，则该指令应该运行。在尝试确保正确接受两个字命令时，我一直遇到段错误。任何人都可以帮助指出问题所在。

```
int main(void)
{
    char inputBuffer[MAX_LINE]; /* buffer to hold the command entered */
    int background;             /* equals 1 if a command is followed by '&' */
    char *args[MAX_LINE/2+1];/* command line (of 80) has max of 40 arguments */

    int position, count, rnum = 0;
    char historyArray[10][MAX_LINE];
    char *holder[MAX_LINE]={0};

    while (1){            /* Program terminates normally inside setup */
        background = 0;
        printf("COMMAND->");
        fflush(0);

        setup(inputBuffer, args, &background);       /* get next command */

        position = (count % MOD_VAL);
        strcpy(historyArray[position],args[0]);

        if(!strcmp("rr",args[0]))
        {
            strcpy(historyArray[position],historyArray[((position-1)+MOD_VAL)%MOD_VAL]);
            printf("%i",count);
            printf("%c",'.');
            printf("%c",' ');
            printf("%s",historyArray[position]);
            printf("%c",'\n');
            strcpy(args[0],historyArray[position]);
        }

        else if(!strcmp("r",args[0])) //SEG FAULT OCCURING IN THIS ELSE-IF BLOCK!
        {
            //args[1] will hold given number
            printf("%c",'\n');
            printf("%s",args[0]);
            printf("%s",args[1]);
            printf("%s",args[2]);
            printf("%c",'\n'); //PRINT STATEMENTS FOR DEBUGGING

            strncpy(holder[0], args[2], MAX_LINE - 1); //SEG FAULT

            rnum = atoi(args[1]);
            strcpy(historyArray[position],historyArray[((position-(count-rnum))+MOD_VAL)%MOD_VAL]);
            strcpy(args[0],historyArray[position]); //CHANGES VALUES OF args[1], args[2]

            if(holder[0] != NULL)
            {
                strncpy(args[1],holder[0],MAX_LINE-1);
                args[2] = NULL;
            }
            else
            {
                args[1] = NULL;
            }

            printf("%c",'\n');
            printf("%s",args[0]);
            printf("%s",args[1]);
            printf("%s",args[2]);
            printf("%c",'\n');
        }

        else if(!(strcmp("h",args[0]))||!(strcmp("history",args[0])))
        {
            int counter = 0;
            while(counter < 10)
            {
                printf("%i",(count - counter));
                printf("%c",'.');
                printf("%c",' ');
                printf("%s", historyArray[((position - counter + MOD_VAL)%MOD_VAL)]);
                printf("%c",' ');
                printf("%c",'\n');
                counter ++;

                if(counter > count)
                    break;
            }
        }
        count++;

        pid_t pid1; //Initialize pid_t variable to hold process identifier
        pid1 = fork(); //Fork process and assign process identifier to "pid1"

        if (pid1 == 0) //Child process
        {
            //Child process executes the command specified by the user and
            //then quits.
            execvp(args[0], args);
            exit(0);
        }
        else //Parent process
        {
            if (background != 1)//Check for inclusion of '&' in command 
            {
                wait(NULL); //Wait for child process to finish executing
            }
        } 

        /* the steps are:
         (1) fork a child process using fork()
         (2) the child process will invoke execvp()
         (3) if background == 0, the parent will wait, 
         otherwise returns to the setup() function. */
    }
} 
```

任何帮助表示赞赏！

-亚光

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:07:02.310

这里你的 args 是字符指针数组。

但`strcpy`需要两个参数 - 应该是`array`或`character pointer to which memory allocated by malloc`

但是您 `strcpy(historyArray[position],args[0]);`认为一个论点`character pointer`不会被接受。

因此您可以将 更改`args[]`为`args[][]`或`args[0] = malloc(some_no)`,`segfault`将被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:46:50.210

你注意到崩溃发生在线路上

```
else if(!strcmp("r",args[0])) 
```

如果我是你，我会在调试器中加载核心文件并查看`args[0]`传递给`strcmp()`.

`char`我希望您有关于和之间类型不匹配的编译器警告`char*`。您将 args 声明为`char*`. 这意味着`args[0]`是 a `char`，而不是 a `char*`。要比较单个字符，只需使用字符而不是`strcmp()`：

```
else if ('r' != args[0]) 
```

* * *

关于 C 字符串处理陷阱的一些注意事项：

*   `strcmp()`当其参数未正确以 NUL 终止时，对于数组边界是不安全的
    *   用于`strncmp()`限制比较的字符数
*   尽管`strncpy()`可以防止数组边界，但它不能保证 NUL 终止目标字符串
*   `strcpy()`不尊重数组边界；您有责任确保目标数组足够大以接收复制到其中的字符串

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T07:04:11.880

您缺少分配内存的`char`指针`args`和`holder`.

因此，通过函数族将它们称为指向以 0 结尾的字符数组（“字符串”）的指针`str*()`会导致未定义的行为，因为`str*()`函数试图取消引用那些不指向有效内存的指针。

# ios - 'malloc_error_break' 是否发生在与底层内存损坏相同的线程上

> ID：15286016
> 
> 赞同：1
> 
> 时间：2013-03-08T03:06:32.840
> 
> 标签：ios, c, multithreading, crash, malloc

我正在尝试调试我们的 iOS 应用程序中偶尔发生的崩溃。

我们得到“malloc_error_break”和通常的“对象在被释放后被修改”。崩溃发生在同一个 C 库中，但在不同的 malloc 位置。

回溯的顶部如下所示：

```
* thread #29: tid = 0x3a03, 0x32c8cfa8 libsystem_c.dylib`malloc_error_break, stop reason = breakpoint 1.1
    frame #0: 0x32c8cfa8 libsystem_c.dylib`malloc_error_break
    frame #1: 0x32c71ed0 libsystem_c.dylib`szone_error + 220
    frame #2: 0x32c71f1c libsystem_c.dylib`free_list_checksum_botch + 28
    frame #3: 0x32c1d3bc libsystem_c.dylib`tiny_malloc_from_free_list + 348
    frame #4: 0x32c1c44a libsystem_c.dylib`szone_malloc_should_clear + 1274
    frame #5: 0x32c1bf1e libsystem_c.dylib`malloc_zone_malloc + 66 
```

问题：

这是否保证底层内存损坏（fi double free 等）发生在与“malloc_zone_malloc”**相同的线程**上？或者至少 malloc_error_break 所指的内存是在同一个线程上分配的？

肯定地知道这一点，将帮助我将崩溃与其他库、NSURLConnection 请求等的影响隔离开来。该应用程序非常大，而且调试起来也很困难，因为它是。

**编辑：**

我想我首先想知道的是更简单的东西。

不同的线程在 iOS 中有不同的堆/malloc 列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:13:09.133

`malloc_error_break()`一旦发现内存损坏，就会调用它，无论哪个线程碰巧发现它。绝对不能保证这将是哪个线程。

> 不同的线程在 iOS 中有不同的堆/malloc 列表吗？

不，您的进程中的所有线程都使用一个共享堆。

# ruby - 在Ruby中生成仅包含数字和字母的给定长度的UUID的好方法是什么？

> ID：15286019
> 
> 赞同：1
> 
> 时间：2013-03-08T03:07:00.920
> 
> 标签：ruby, random

[SecureRandom#urlsafe_base64](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/securerandom/rdoc/SecureRandom.html#method-c-urlsafe_base64)包含标点符号。

使用它生成仅包含数字、大写和小写字母的给定长度（12）的 UUID 的好方法是什么？

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T03:16:49.597

怎么样：

```
SecureRandom.urlsafe_base64.gsub(/\W/, '')[0..11]
#=> "x7lADtl95FUH" 
```

# sql - SQL 逻辑和聚合问题

> ID：15286021
> 
> 赞同：0
> 
> 时间：2013-03-08T03:07:43.037
> 
> 标签：sql, oracle

我在 SQL 中有以下问题要解决：

> d) 提供有关所提供的各种活动类型的管理信息的查询。对于每种类型的活动，查询应显示参加该类型活动的总人数以及参加每种活动的平均人数。

这是我的桌子：

```
CREATE TABLE accommodations
(
chalet_number int PRIMARY KEY,
chalet_name varchar(40) NOT NULL,
no_it_sleeps number(2) NOT NULL,
indivppw number(4) NOT NULL
)

CREATE TABLE supervisors
(
supervisor_number int PRIMARY KEY,
supervisor_forename varchar(30) NOT NULL,
supervisor_surname varchar(30) NOT NULL,
mobile_number varchar(11) NOT NULL
)

CREATE TABLE visitors
(
visitor_ID int PRIMARY KEY,
group_ID int NOT NULL,
forename varchar(20) NOT NULL,
surname varchar(20) NOT NULL,
dob date NOT NULL,
gender varchar(1) NOT NULL
)

CREATE TABLE activities
(
activity_code varchar(10) PRIMARY KEY,
activity_title varchar(20) NOT NULL,
"type" varchar(20) NOT NULL
)

CREATE TABLE "groups"
(
group_ID int PRIMARY KEY,
group_leader varchar(20) NOT NULL,
group_name varchar(30)
number_in_group number(2) NOT NULL
)

CREATE TABLE bookings
(
group_ID int NOT NULL,
start_date date NOT NULL,
chalet_number int NOT NULL,
no_in_chalet number(2) NOT NULL,
start_date date NOT NULL,
end_date date NOT NULL,
CONSTRAINT bookings_pk PRIMARY KEY(group_ID, chalet_number));

CREATE TABLE schedule
(
schedule_ID int PRIMARY KEY,
activity_code varchar(10) NOT NULL,
time_of_activity number(4,2) NOT NULL,
am_pm varchar(2) NOT NULL,
"date" date NOT NULL
)

CREATE TABLE activity_bookings
(
visitor_ID int NOT NULL,
schedule_ID int NOT NULL,
supervisor_number int NOT NULL,
comments varchar(200),
CONSTRAINT event_booking_pk PRIMARY KEY(visitor_ID, schedule_ID));

ALTER TABLE visitors
ADD FOREIGN KEY (group_ID)
REFERENCES "groups"(group_ID)

ALTER TABLE Schedule
ADD FOREIGN KEY (activity_code)
REFERENCES activities(activity_code)

ALTER TABLE bookings
ADD FOREIGN KEY (group_ID)
REFERENCES "groups"(group_ID)

ALTER TABLE bookings
ADD FOREIGN KEY (chalet_number)
REFERENCES accommodations(chalet_number)

ALTER TABLE activity_bookings
ADD FOREIGN KEY (visitor_ID)
REFERENCES visitors(visitor_ID)

ALTER TABLE activity_bookings
ADD FOREIGN KEY (schedule_ID)
REFERENCES schedule(schedule_ID)

ALTER TABLE activity_bookings
ADD FOREIGN KEY (supervisor_number)
REFERENCES supervisors(supervisor_number) 
```

我有以下解决方案：

```
SELECT activities."type", 'overalltotal' AS OT, ('overalltotal' / 'activities') AS AVG
  FROM activities, schedule
  WHERE 'overalltotal' = (SELECT SUM(COUNT(schedule_ID))
        FROM activities, schedule
        WHERE schedule.activity_code = activities.activity_code
        GROUP BY activities."type"
        )
  AND 'activities' = (SELECT COUNT(DISTINCT activities."type")
        FROM activities
        )
  AND schedule.activity_code = activities.activity_code
GROUP BY activities."type"; 
```

我已经实现了示例数据和代码来检查上面的变量：

```
SELECT SUM(COUNT(schedule_ID))
        FROM activities, schedule
        WHERE schedule.activity_code = activities.activity_code
        GROUP BY activities."type"; 
```

> 结果：20

```
SELECT COUNT(DISTINCT activities."type")
FROM activities; 
```

> 结果：5

但是在运行代码时：

```
ORA-01722: invalid number
01722\. 00000 -  "invalid number"
*Cause:    
*Action: 
```

编辑：

使用戴夫的代码我有以下输出：

```
Snowboarding    15
sledding            19
Snowmobiling    6
Ice Skating         5
Skiing          24 
```

我将如何做问题的最后一部分？

> 以及参加每种活动的平均人数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:14:24.653

您必须在 Oracle 中的列名周围使用双引号，而不是单引号。例如，`"overalltotal"`。单引号用于文本字符串，这就是您收到无效数字错误的原因。

编辑：这可能是您要使用的查询类型：

```
SELECT activities."type", COUNT(*) AS total, COUNT(*)/(COUNT(*) OVER ()) AS "avg"
FROM activities a
JOIN schedule s ON a.activity_code=s.activity_code
JOIN activity_bookings ab ON s.schedule_ID=ab.schedule_ID
GROUP BY activities."type"; 
```

基本上，因为每个活动预订都有一个访客 ID，我们希望获取每个活动的所有活动预订。我们必须按照时间表来做到这一点。他们我们按活动类型对行进行分组，并计算每种类型的活动预订数量。

# excel - 链接excel列

> ID：15286026
> 
> 赞同：0
> 
> 时间：2013-03-08T03:08:08.970
> 
> 标签：excel, function

我正在尝试链接 2 个类似于此的列表：

清单 1

```
 A        B 
0001   Company A
0002   Company B 
```

清单 2

```
 A        B
0002   email1
0001   email2 
```

我希望输出是这样的：

```
 A        B          C
0001   Company A   email2
0002   Company B   email1 
```

我应该使用什么excel函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:22:27.373

鉴于，

清单 1

```
 A        B 
0001   Company A
0002   Company B 
```

清单 2

```
 D        E
0002   email1
0001   email2 
```

在列`C`（单元格`C1`）中放置：

`=VLOOKUP(D1,D1:E2,2,FALSE)`

并根据需要将其垂直复制到尽可能多的单元格。

你应该最终得到

```
 A        B          C        D       E
0001   Company A   email2   0002   email1
0002   Company B   email1   0001   email2 
```

解释一下`VLOOKUP`：

`VLOOKUP(lookup value or cell containing value, table with values to match against, column of table to return value from, find exact match (TRUE or FALSE))`

# html - 将网页内容设置为默认宽度，但也可调整大小

> ID：15286030
> 
> 赞同：1
> 
> 时间：2013-03-08T03:08:45.053
> 
> 标签：html, css

我正在尝试制作一个完全响应的网站，但我需要页面的默认宽度为 960 像素。我的结构如下：

```
<div id="container">
<table id="content">
all the content is here
</table>
</div> 
```

现在我希望表格的默认宽度为 960px，但我希望它也能够重新调整大小，就像它的宽度和高度是自动的并且它的位置是相对的一样。这些是我现在的风格

```
#container{
margin: 0 auto;
position: relative;
}
#content{
width: 960px;
height: auto;
box-shadow: 0 0 3px 3px rgba(0,0,0, 0.7);
-webkit-box-shadow: 0 0 3px 3px rgba(0,0,0, 0.7);
-mox-box-shadow: 0 0 3px 3px rgba(0,0,0, 0.7);
} 
```

如果我将#content 宽度设置为自动，则网页是完全响应的，但没有默认宽度。如果我像上面那样将其设置为 960px，则整个网页的宽度都是固定的。我已经为此苦苦挣扎了一段时间，感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T03:13:26.847

尝试这个：

```
#content{
    max-width: 960px;
    width: 100%;
    height: auto;
    box-shadow: 0 0 3px 3px rgba(0,0,0, 0.7);
    -webkit-box-shadow: 0 0 3px 3px rgba(0,0,0, 0.7);
    -mox-box-shadow: 0 0 3px 3px rgba(0,0,0, 0.7);
} 
```

请注意，我已将 960 设置为`max-width`，但随后将 设置`width`为 100%。这将使网站具有响应性，但宽度仍为 960 像素（除非浏览器尺寸小于此值）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T13:20:48.107

我看到 albertxing 已经给了你一个很棒的答案，但我想建议你了解[Ethan Marcotte](http://alistapart.com/author/emarcotte) - 响应式网页设计 (rwd) 的教父。

他在 Alistpart 撰写了一些很棒的文章，您可能想从这些文章开始。好东西！

# algorithm - 用于在 Mac OS X 上运行图形算法的 GUI

> ID：15286035
> 
> 赞同：3
> 
> 时间：2013-03-08T03:09:09.077
> 
> 标签：algorithm, graph-algorithm

是否有图形用户界面/程序可用于显示正在为 Mac OS X Mountain Lion 执行的图形算法？我问了很多人，google了很多，无济于事。如果这不完全是编码问题，我很抱歉，但我认为答案将帮助很多也需要教授这个主题的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:46:06.453

我会看看[R 项目](http://www.r-project.org/ "R项目")。在我意识到对于我的图形计算我需要一个更强大（和更快）的编译版本之前，我尝试了一些有用的图形工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T15:39:21.740

[我刚刚从 rlegendi 对这个](https://stackoverflow.com/questions/17359557/java-graph-layout-algorithms)问题的回答中发现了[GraphStream](http://graphstream-project.org/) Java 库。我还没有机会下载它，但[视频](http://www.youtube.com/watch?v=XX5rRF6uxow)看起来很有希望。

# node.js - 有没有办法将连接切换到另一个 TCP 服务器？

> ID：15286036
> 
> 赞同：0
> 
> 时间：2013-03-08T03:09:21.633
> 
> 标签：node.js

我已经使用 WebSocket 制作了我的个人项目。

我已经知道 WebSocket 不会直接连接原始 TCP Socket。

所以，我想如果我首先连接到 Web 服务器（NodeJS）然后切换到 TCP 服务器会怎样。

是否可以使用 NodeJS 切换到另一台服务器的连接？

如果是这样。

请让我快乐..谢谢！祝你今天过得愉快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:58:43.640

我认为隧道/代理 TCP 流量可能既可行又简单。高级设计将是：

*   使用集成的 websocket 服务器启动一个 web 服务器（使用 socket.io，真的）
*   当客户端建立 websocket 连接时，创建到目标服务器的上游 TCP 连接
*   然后在浏览器<->节点套接字和节点<->otherServer套接字之间进行消息的完全双向管道

魔鬼可能在细节中。我没试过，但似乎可行。

有一个[名为 ws-tcp-bridge 的节点项目](https://github.com/andrewchambers/ws-tcp-bridge)以及一个声称已经这样做的[python 项目。](https://github.com/iuridiniz/stupid-websocket-tcp-proxy)两者都不是非常成熟，但它们可能只是工作或至少提供了很好的参考材料。

# postgresql - 如何将数据类型小数分配给 Postgresql 中的列？

> ID：15286040
> 
> 赞同：4
> 
> 时间：2013-03-08T03:10:22.020
> 
> 标签：postgresql, postgresql-9.1

我最近正在使用 postgresql-9.1。

出于某种原因，我必须使用不支持数据类型数字但十进制的技术。不幸的是，我在我的 Postgresql 中为它们分配十进制的列的数据类型始终是数字的。我尝试更改类型，但它不起作用，尽管我收到了类似“查询成功返回，12 毫秒内没有结果”的消息。

所以，我想知道如何让列成为十进制。

任何帮助将不胜感激。

例如

我的创建条款：

```
CREATE TABLE IF NOT EXISTS htest
(
  dsizemin decimal(8,3) NOT NULL,
  dsizemax decimal(8,3) NOT NULL,
  hidentifier character varying(10) NOT NULL,
  tgrade character varying(10) NOT NULL,
  fdvalue decimal(8,3),
  CONSTRAINT htest_pkey PRIMARY KEY (dsizemin , dsizemax , hidentifier , tgrade )
); 
```

我的变更条款：

```
ALTER TABLE htest
ALTER COLUMN dsizemin TYPE decimal(8,3); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T11:23:22.010

在 PostgreSQL 中，“decimal”是“numeric”的别名，当您的应用程序认为它需要数据库中的“decimal”类型时，它会带来一些问题。正如 Craig 上面提到的，你甚至不能创建一个名为“decimal”的域

数据库方面没有好的解决方法。您唯一能做的就是将应用程序更改为期望返回数字数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-04T18:39:58.093

使用 Numeric (precision, scale) 存储小数精度表示小数点任一侧的预期位数的总数。scale 是您希望存储的小数位数。

这个数字 (5,5) 意味着您只需要小于 1（负数或正数）且小数点后 5 位的数字。调试，如果postgre sql出错，它可能是数字（6,5），因为它的前导0是小数。

0.12345 就是上面的一个例子。

1.12345 需要一个字段数字 (6,5) 100.12345 需要一个字段数字 (8,5) -100.12345 需要一个字段数字 (8,5)

当您编写一个选择语句来查看小数时，它会四舍五入为 2；但是，如果您执行 Select 100 * [field] from [table] 之类的操作，则应该开始出现额外的小数点......

# javascript - 如何仅在前一个函数完成其工作时才进行函数转换？

> ID：15286041
> 
> 赞同：0
> 
> 时间：2013-03-08T03:10:32.590
> 
> 标签：javascript

我正在尝试使用一些函数来计算并仅显示距离其位置一定距离内的标记的距离，但该函数在页面加载后立即被强制转换，因此它使用了不正确的值

这是我从数据库生成标记的函数：

```
<?php while($stmt -> fetch()) { ?>
var longi = "<?php echo $gLongitude; ?>";
var lati = "<?php echo $gLatitude; ?>";
var title = "<?php echo $gTitle; ?>";
createMarker(lati, longi, title);
<?php } $stmt -> close(); $mysqli -> close();?> 
```

然后调用 createMarker

```
function createMarker(lati, longi, title) {
    var latLongMarker = new google.maps.LatLng(lati, longi);
    marker = new google.maps.Marker({
        position: latLongMarker,
        map: map,
        title: title
    });
    arrMarker.push(marker);
    marker.setMap(null);
    setMarker(latLongMarker);
} 
```

然后调用 setmarker

```
function setMarker(position) {
    console.log(arrMarker.value);
    for (var i = 0; i < arrMarker.length; i++) {
        var latLong = arrMarker[i].getPosition();
        distance = google.maps.geometry.spherical.computeDistanceBetween(latLong, position);
        if (distance < 4000) {
            addMarker(arrMarker[i].getPosition());
        }
    }
} 
```

问题是在使用以下方式设置地理位置之前它一直被调用：

```
function locateMe() {
if (navigator.geolocation) {
    browserSupportFlag = true;
    navigator.geolocation.getCurrentPosition(function(position) {
            initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
            map.setCenter(initialLocation);
            map.setZoom(15);
            setMarkerPosition(position.coords.latitude,position.coords.longitude);
        }, function() {
            handleNoGeolocation(browserSupportFlag);
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:17:37.770

如果您希望代码在获得位置后运行，您应该将该代码放在 getCurrentPosition 回调中。

```
navigator.geolocation.getCurrentPosition(function(position) {
    initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
    map.setCenter(initialLocation);
    map.setZoom(15);
    setMarkerPosition(position.coords.latitude,position.coords.longitude);

    createMarker() // <---
}, function() {
    handleNoGeolocation(browserSupportFlag);
}); 
```

不幸的是，没有办法将“异步”代码转换为完成后返回的常规函数​​。您可以做的最好的事情是将调用下一个函数的部分变成参数。

```
function locateMe(callback){
    googleMapsStuff(function(position){
       //things...
       callback(value_you_would_have_returned)
    }
} 
```

# java - 我没有得到任何输出，并且机器可能与代码一起挂起

> ID：15286042
> 
> 赞同：-10
> 
> 时间：2013-03-08T03:10:42.733
> 
> 标签：java

得到反馈后，我运行程序但在控制台中没有输出

```
import java.io.File;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.*;
import java.io.InputStream;

class pbdemo {

    static public void main(String[] args) throws Exception {
        String s;
        ProcessBuilder pb = new ProcessBuilder("cmd.exe", "/f", "dir");
        pb.directory(new File("C:\\ljava"));
        try {
            Process pro = pb.start();
            pro.waitFor();
            BufferedReader br = new BufferedReader(new InputStreamReader(pro.getInputStream()));

            while ((s = br.readLine()) != null) {
                System.out.println("here we go" + s);
            }

        } catch (Exception e) {
            System.out.println("sorry" + e);
        }
    }
} 
```

程序运行但没有输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:15:28.070

用于文件完成的`/F`标志。`CMD`假设您希望`/C`标志执行命令可能是安全的。如果没有该`/C`标志，`cmd.exe`将交互式运行，寻找输入，您的程序将无限期地阻塞在`waitFor`. 代替：

```
new ProcessBuilder("cmd.exe", "/f", "dir"); 
```

和

```
new ProcessBuilder("cmd.exe", "/c", "dir"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:15:59.617

在尝试读取其输出之前，您正在等待该过程完成。但是有可能它可以完成所有输出的写入，直到您开始阅读它……因为操作系统无法缓冲所有输出。净结果，僵局。

更改代码，以便在`pro.waitFor()`您读取所有输出后进行调用。

（也有可能将内容写入“错误”流。但除非`dir`命令发生严重奇怪的事情，否则它不太可能生成足够的错误输出以导致死锁。所以可能可以只是忽略任何（假设的）错误输出......就像你目前正在做的那样。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T03:19:02.023

`pro.waitFor();`是一种阻塞方法。它将等到进程退出后再返回。这样做的问题是，在读取/清除标准输出缓冲区之前，许多程序不会退出，这意味着，在您的情况下，它可能永远不会退出。

试试这样的东西......

```
import java.io.File;
import java.io.IOException;
import java.io.InputStream;

public class PBDemo {

    public static void main(String[] args) throws Exception {
        String s;
        ProcessBuilder pb = new ProcessBuilder("cmd.exe", "/c", "dir");
        pb.directory(new File("C:\\ljava"));
        pb.redirectError();
        try {
            Process pro = pb.start();
            InputConsumer ic = new InputConsumer(pro.getInputStream());
            System.out.println("...Waiting");
            int exitCode = pro.waitFor();

            ic.join();

            System.out.println("Process exited with " + exitCode);

        } catch (Exception e) {
            System.out.println("sorry" + e);
        }
    }

    public static class InputConsumer extends Thread {

        private InputStream is;

        public InputConsumer(InputStream is) {
            this.is = is;
            start();
        }

        @Override
        public void run() {
//            This is acutally a bad idea, not all process will write a new line ;)
//            BufferedReader br = new BufferedReader(new InputStreamReader(pro.getInputStream()));

            try {
                int in = -1;
                while ((in = is.read()) != -1) {
                    System.out.print((char) in);
                }
            } catch (IOException exp) {
                exp.printStackTrace();
            }
        }

    }

} 
```

# django - 在 Django 上将视图加载到没有 Ajax 的模板中

> ID：15286045
> 
> 赞同：0
> 
> 时间：2013-03-08T03:10:50.233
> 
> 标签：django, django-templates, django-views

各位晚安。我有这个 Django 问题。我有一个视图，它呈现一个带有来自模型的主详细信息的标题信息的表单。在此表单下方，我想加载另一个视图，该视图呈现一个填充详细信息表的表单，并且在它旁边是包含详细信息的列表。我想在标题视图的模板中加载细节视图，但我想在没有 ajax 的情况下进行。我正在阅读 {% include %} 标签，但据我了解，它加载的是模板，而不是视图。我可能错了，有没有办法在主模板中加载视图？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:15:04.730

如果没有 ajax，您将无法呈现这样的视图。`{% load %}`用于加载模块，而不是模板或视图，例如：

```
{% load humanize %} 
```

但是，您可以使用`{% include %}`标签或自定义模板标签来执行您需要的任何处理并在您包含它的位置返回其模板。

# view - 将所有 UI 逻辑排除在 ViewModel 之外？

> ID：15286047
> 
> 赞同：0
> 
> 时间：2013-03-08T03:11:22.780
> 
> 标签：view, windows-8, model, viewmodel, mvvm-light

我对 MVVM 很陌生，我很好奇是否可以将所有 UI 特定的东西排除在 ViewModel 之外，从而使我的 viewmodel 可以跨项目移植？例如，假设我想稍后将我的应用程序从 windows phone 8 移植到 windows 8。我可以轻松地拖动我的视图模型和模型，然后设计一个连接到视图模型的新视图。如果是这样，为了使我的视图模型尽可能便携，我应该注意哪些做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:08:22.957

您可以将它们构建成自己的程序集，然后在多个项目中重复使用这些程序集，而不是拖动您的模型和虚拟机。

通过实现[`IPropertyNotifyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx). 通过这种方式，您的 VM 的属性可以检查它们是否正在更改，并可以通知订阅者`PropertyChanged`某些已更改的事件。这样，您的视图可以订阅`PropertyChanged`对象上的事件，并且可以在需要更新 UI 以反映对象的一个​​或多个属性的更改值时采取行动。

请务必阅读文档末尾的示例，该[`IPropertyNotifyChanged`](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)示例说明了它是如何工作的。

# android - 如何在android webview中区分url表单用户点击或自动跳转

> ID：15286050
> 
> 赞同：1
> 
> 时间：2013-03-08T03:11:43.790
> 
> 标签：android, url, webview

在我的 webview 中，我在 webViewClient 方法中获取了所有 url

`public boolean shouldOverrideUrlLoading(WebView view, String url) {}`

如果 url 来自用户点击，我想将 url 扔给其他应用程序。否则webview会自行加载url。但我无法区分它们。我该怎么办？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T02:53:45.783

我按照[如何在 android 的 webview 上获取 onclick 事件中的方法？](https://stackoverflow.com/questions/5116909/how-i-can-get-onclick-event-on-webview-in-android).

在 WebView中有一些使用 dispatchTouchEvent [Android singleTap/OnClick 的替代方法](https://stackoverflow.com/questions/5907194/android-singletap-onclick-in-webview)

```
Boolean changedUrl = false;
String currentUrl = null;

webView.setWebViewClient(new WebViewClient() {

    @Override
    public void onPageFinished(WebView view, String url) {
        changedUrl = false;
        currentUrl = webView.getUrl();
    }

   // change either onPageStarted or shouldOverrideUrlLoading
     @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        if(changedUrl && !url.equals(currenturl)) {
              // page has been clicked
        }

    }

    @Override
public boolean shouldOverrideUrlLoading(WebView view, String url){
    if(changedUrl && !url.equals(currentUrl)) {
          // page has been clicked

          return true;
    }

    return false;
}

 });

webView.setOnTouchListener( new View.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (v.getId() == R.id.webView && event.getAction() == MotionEvent.ACTION_DOWN){

              changedUrl = true;

        }

        return false;
    }
}); 
```

# php - 将 Apache rootdir 更改为 symlink，得到 403 错误

> ID：15286052
> 
> 赞同：1
> 
> 时间：2013-03-08T03:11:58.400
> 
> 标签：php, apache, symlink

我是 .php 和服务器以及所有这些疯狂（和 StackOverflow）的新手，但我已经下载了 Apache，并且我正在尝试将 PHP 代码文件夹符号链接到 Apache 根目录。我的 Apache 根目录是`var/www/html`，我的 PHP 代码文件夹是`Documents/PHPStuff`. 我重命名`var/www/html`为并在名为“html”`var/www/html2`的链接中创建了一个符号链接，认为如果我将符号链接重命名为 Apache 正在寻找的名称，那么它将起作用。`var/www/``Documents/PHPStuff`

它没有。

当我尝试`Documents/PHPStuff`使用“localhost/helloworld2.php”在浏览器中访问名为“helloworld2.php”的测试文件时，出现 403 Forbidden 错误。

我一直在弄乱符号链接和 PHPStuff 目录中的权限，将它们更改为 777 之类的东西，但它没有用。我还通过将 httpd.conf 文件更改`FollowSymlinks None`为`FollowSymlinks All`. 还没有任何工作，所以这是我最后的手段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-26T23:54:10.127

尽量不要碰你的 http.conf。相反，从 conf.d 路径编辑文件。

要授予对您的主路径的访问权限，请编辑您的 /etc/http/conf.d/userdir.conf 以激活用户目录选项，例如：

```
<IfModule mod_userdir.c>
  #UserDir disabled
  UserDir public_html
</IfModule>

<Directory "/home/*/public_html">
  AllowOverride All
  Options MultiViews Indexes SymLinksIfOwnerMatch IncludesNoExec
  Require method GET POST OPTIONS
</Directory> 
```

然后，重新启动你的 apache。

现在，您必须创建一个目录 /home/$USER/public_html 并在其中创建指向 ~/PHPStuff 的符号链接，例如

```
ln -s ~/PHPStuff ~/public_html/PHPStuff 
```

您可以将 PHPStuff 移动到 ~/public_html/ ，而不是创建符号链接。

确保您的 homedir 有 711 权限，public_html 有 755 并且 PHPStuff 中的 dirs 和文件是每个人都可以读取的。

最后，在您的网络浏览器中输入

```
http://localhost/~user ('user' is your system username) 
```

你会看到你的 PHPStuff 被列出来。你可以输入

```
http://localhost/~user/PHPStuff 
```

直接查看 PHPStuff 内容。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:33:33.470

你不应该做所有这些。

这就是我设置符号链接的方式。

当我安装 apache 时，它​​的 web 目录位于 /var/www/html ，实际上不需要更改。

然后，我创建了一个叫public_html的文件夹，你可以叫它PHPStuff，没关系。重要的是该文件夹在您的主目录中，所以 /home/your_username/PHPStuff

然后将该目录链接到 /var/www/html

```
sudo ln -s ~/PHPStuff /var/www/html/$USER 
```

然后，您可以通过浏览器访问 ~/PHPStuff，然后键入：

```
http://localhost/your_username 
```

这将使您可以访问 ~/PHPStuff

完成后，设置适当的权限：

```
sudo chmod -R 777 ~ 
```

然后通过转到 /etc/httpd/conf/httpd.conf 并编辑这部分目录“/var/www/html”来确保 apache 允许符号链接

并确保你有这些：

```
Options Indexes FollowSymLinks
AllowOverride All 
```

重新启动apache，一切都会正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T11:07:36.980

您需要确保 apache 可以访问符号链接指向的文件夹，尝试运行：

> chmod a+x /home/your-username /home/your-username/Documents/PHPStuff

# javascript - Javascript中原型函数的原型

> ID：15286053
> 
> 赞同：2
> 
> 时间：2013-03-08T03:12:00.103
> 
> 标签：javascript, prototype

我知道可以添加到函数的原型中，这样

```
function main(){}
main.prototype.load = function()
{

}
... 
```

并运行名为`main.load`.

是否可以在该原型中制作函数的原型？换句话说，我可以做这样的事情：

```
main.prototype.get = function(){}
main.prototype.get.prototype.registration = function()
{
    // load registration info
} 
```

`main.get.registration();`并使用?调用函数

当我尝试执行此操作时，控制台中会出现以下错误消息：

`Uncaught TypeError: Object function (){} has no method 'registration'`

编辑：我在打电话后这样做`new main();`。所以我会做类似的事情

```
var thisMain = new main();
thisMain.get.registration(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T03:21:40.360

我认为您对原型有点误解。

给定一个函数`Foo`，`Foo.prototype`不是`Foo`对象的原型。它是将分配给使用创建的对象的原型`new Foo()`。例如：

```
// This is a constructor that creates objects whose prototype is Person.prototype
var Person = function(name) {
    this.name = name;
}
Person.prototype.sayHello = function() {
    console.log("Hello, my name is " + this.name);
}
var drew = new Person('Drew');
drew.sayHello();  // <-- Logs a message
drew.__proto__;   // <-- Not part of the Javascript spec, but it some browsers this is a reference to Person.prototype 
```

您的 main.get.registration 可以在没有原型的情况下实现：

```
main = function() {/* do stuff*/}
main.get = function() {/* this is a getter function? */}
main.get.registration = function() {/* I don't know what this does */} 
```

您希望创建什么样的接口或 API？它是否涉及使用创建对象`new`？

**更新：**这是实现您想要的许多可能方法之一：

```
main = function() {
    // store a reference to this instance.
    var self = this;
    // Construct the get object.  It doesn't need to be a function because it's never invoked
    this.get = {};
    this.get.registration = function() {
        // Use self to refer to the specific instance of main you're interacting with.
        retrieveRegistrationFor(self); // <-- pseudo-code
    }
} 
```

**更新 2：**这是`get`使用构造函数构造对象的方法，允许您对所有内容使用原型。我已将构造函数的名称大写，这是有助于区分普通函数/方法和构造函数的最佳实践。

```
// Constructor for the get object.  This is only ever invoked in Main's constructor.
Getter = function(mainInstance) {
    this.self = mainInstance;
}
Getter.prototype.registration = function() {
    retrieveRegistrationFor(this.self); // <-- pseudo-code
}

Main = function() {
    // Construct the get object and attach it to this object.
    this.get = new Getter(this);
} 
```

正如其他答案所指出的，有很多方法可以在 Javascript 中构造对象。这完全取决于情况和您的个人编码风格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:21:16.780

我确实让它与它一起工作

```
main.prototype.get.prototype.registration(); 
```

但是请记住，正如@the_system 提到的，您不能`main.get`直接使用；您必须通过原型才能找到`get`功能（以及与功能的相似性`registration`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T03:37:15.440

这只是我个人的看法，但我一直觉得 JavaScript 中的原型继承模型很难理解。编写代码时很难推理，6个月后维护代码更难推理。

但是，我认为您要问的实际上只是这样：“我可以编写一个从匿名类继承其成员方法的类吗？” 当你这样改写它时，我认为很明显这种方法存在不确定的价值。编写类的全部目的是支持简单的抽象和封装，同时保持组合紧密。

使用传统对象会更直接，ala：

```
var main = { 
    get: {
        registration: function() {
            //TODO
        }  
    }
} 
```

而且`main.get.registration()`很简单。如果您可以利用 Object.create() 和 Object.defineProperties() 来做到这一点，那就更好了。

如果您绝对必须使用原型继承，我喜欢[Kistner 先生提出的简单 Function.prototype 扩展](http://phrogz.net/JS/classes/OOPinJS2.html)：

```
Function.prototype.inheritsFrom = function(parentClassOrObject) {
    if (parentClassOrObject.constructor === Function) {
        //Normal Inheritance
        this.prototype = new parentClassOrObject;
        this.prototype.constructor = this;
        this.prototype.parent = parentClassOrObject.prototype;
    } else {
        //Pure Virtual Inheritance
        this.prototype = parentClassOrObject;
        this.prototype.constructor = this;
        this.prototype.parent = parentClassOrObject;
    }
    return this;
}; 
```

这使您可以像这样组合类和继承：

```
/***
 * Method to create a Class with optional inheritance.
 * Generally, I oppose this semantic in JS:
 * partly because of the ineffability of the 'this' operator,
 * and partly because of the difficulty in grokking this.
 * What we're really saying here (through the wonders of functional programming) is this:
 *
 *      var MyClass1 = function(param1) {
 *          var ret = this;
 *          ret.id = param1;
 *          return ret;
 *      };
 *
 *      var MyClass2 = function(param1, param2) {
 *          var ret = this;
 *          MyClass1.apply(this, Array.prototype.slice.call(arguments, 0));
 *          ret.name = param2;
 *          return ret;
 *      };
 *
 *      MyClass2.prototype = new MyClass1;
 *      MyClass2.prototype.constructor = MyClass1;
 *      MyClass2.prototype.parent = MyClass1.prototype;
 *
 * I find this whole mode of operation as dull as it is stupid.
 * Nonetheless, there are occasions when the convention is suitable for type/instance checking
 *
 * Obviously, this method has very little utility if you are not using prototypal inheritance
*/
var MyClassCreatorMethod = function(name, inheritsFrom, callBack) {
    var obj = Object.create(null);
    obj[name] = function() {
        try {
            if(inheritsFrom ) {
                inheritsFrom.apply(this, Array.prototype.slice.call(arguments, 0));
            }
            callBack.apply(this, Array.prototype.slice.call(arguments, 0));
        } catch(e) {
            //do something
        }
    };
    if(inheritsFrom) {
        obj[name].inheritsFrom(inheritsFrom);
    }
    return obj[name];
}; 
```

从这里开始，菊花链继承类变得微不足道。我刚刚从我的一个项目中提取了这个，所以并不是所有的语义都适用于你——它只是为了说明一种以更容易理解的方式对行为进行功能化的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T03:41:18.260

也许您想要做的是：

```
function main(){}
main.prototype.load = function()
{

};

main.prototype.get = function(){};
main.prototype.get.prototype.registration = function()
{
    // load registration info
    alert('hi, I\'m working');
};

var thisMain = new main();
var other = new thisMain.get();
other.registration(); 
```

# java - 是否可以将不同的类型添加到 Java 中的单个数组列表中？

> ID：15286054
> 
> 赞同：3
> 
> 时间：2013-03-08T03:12:01.247
> 
> 标签：java, arraylist, sentinel

我需要创建一个 ArrayList（它不一定是 ArrayList，但这就是我目前正在尝试的）来保存学生 ID、分数和课程名称。到目前为止，我有这样的事情：

```
import java.util.*;

public class MarksHandling {
  static Scanner keybrd = new Scanner(System.in);

  public static void main (String[]args){
    ArrayList<String> studentsCourses= new ArrayList<String>();
    ArrayList marks= new ArrayList();

while (keybrd.next()!="-1"|| keybrd.nextInt()!=-1){
  System.out.println("Please Type Your ID Number (-1 to quit)\n");
  studentsCourses.add(keybrd.next());
  System.out.println("Please Type Your Course Name (-1 to quit)\n");
  studentsCourses.add(keybrd.next());
  System.out.println("Please Type Your Mark (-1 to quit)\n");
  marks.add(keybrd.nextInt());
    }
  System.out.println("Done");

  }
} 
```

（注意缩进；当我从我的 IDE 粘贴时，它往往会搞砸）我知道我可以将所有这些作为字符串输入，它会被找到；但最后我需要找出哪个学生的成绩最高，在哪个课程...

所以我想尝试两个不同的数组（一个用于字符串，一个用于 Int），但这导致我的哨兵出现问题（我目前正在尝试修复..）

有没有办法将“int”和“String”类型都接受到同一个 arrayList 中并这样访问它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T03:17:42.297

在 OO 语言中执行此操作的更好方法是创建一个`Student`类，其中 `id`,`marks`和`course names`作为该类的成员变量，并使用

```
ArrayList<Student> studentsCourses= new ArrayList<Student>(); 
```

# jenkins - 我可以制作一个只有我可以看到或不能在 *all 选项卡中看到的 Jenkins 工作*

> ID：15286055
> 
> 赞同：1
> 
> 时间：2013-03-08T03:12:03.610
> 
> 标签：jenkins, jenkins-plugins

我可以做一个只有我可以看到或不能在*所有选项卡*中看到的 Jenkins 工作吗？这意味着其他人无法在*所有选项卡*中看到该作业。但是，如果其他人可以在其他选项卡中看到作业，就可以了。目标是让其他人不要使用*所有选项卡*，因为该选项卡中有太多工作。詹金斯有这种插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:39:40.447

我想我得到了答案。我可以将另一个选项卡设置为默认选项卡，然后我可以删除所有选项卡，然后其他人将看不到长长的工作列表

# php - 制作下拉排序列表

> ID：15286056
> 
> 赞同：0
> 
> 时间：2013-03-08T03:12:03.677
> 
> 标签：php, mysql, drop-down-menu

我有这个 php 代码，其中包含从数据库中提取信息的下拉菜单，但似乎无法弄清楚如何让下拉选择对列表进行排序...

下拉菜单将课程名称显示为标签，但选择时需要按课程 ID 对列表进行排序。

[访问此处查看实际操作中的表格](http://www.ems-complete.com/preentrancereport.php)

```
<?php 
        $connect = mysql_connect('localhost','emscompl_paramed','PASSOWRD) or die(mysql_error());

        $selectdb = mysql_select_db('emscompl_joom1283',$connect);

        $sel = "SELECT us.fullname, s . *
FROM registered_users AS `us`
LEFT OUTER JOIN course_students AS s ON s.userid = us.userid";
        $ressel = mysql_query($sel);

        $fetchsel = mysql_fetch_array($ressel);

        ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
.titiel {
    font-weight: bold;
}

td {
    border-right-width: thin;
    border-bottom-width: thin;
    border-right-style: dotted;
    border-bottom-style: solid;
    text-align:center;
}
 th {
        background-color:#000000;
        color: #FFF;
    }
    tr:nth-child(odd)    { background-color:#eee; }
tr:nth-child(even)    { background-color:#fff; }
</style>
</head>

<body>
<p class="titiel">Pre-Entrance Document Report</p>
<p> Please Select Course for Report</p>
  <form method="post" action="preentrancereportsorted.php">
        <label for="select"><select name="course" value="Select" size="1">
    <?php
    $sql = "SELECT * FROM courses"; 
    $result = mysql_query($sql) or die (mysql_error()); 
        while ($row = mysql_fetch_array($result))
        {
            $id=$row["id"];
                $course=$row["coursename"]; 
                $options.="<OPTION VALUE=\"$id\">".$course;
        }
        ?>
            <option>
                <? echo $options ?>
                </option>
            </select>
           <input type="submit" name="Submit" value="Generate Report">
  </form>
<table width="1246" height="56">
  <tr>
    <th width="147" height="50">Student Name</td>
    <th width="15">R</th>
    <th width="18">M</th>
    <th width="18">L</th>
    <th width="81">Background</th>
    <th width="83">Drug Screen</th>
    <th width="112">Clear Background</th>
    <th width="113">Clean Drug Screen</th>
    <th width="97">Student Info</th>
    <th width="88">School App</th>
    <th width="117">Professional Recomendation</th>
    <th width="119">Reasonable Accomadations</th>
    <th width="59">Drivers Licesnse</th>
    <th width="91">High School Diploma</th>
  </tr>
<?php while ($row = mysql_fetch_array($ressel)) { ?>
    <td width="146" height="50"><?php echo $row['fullname'];?></td>
    <td width="17"><?php echo $row['entrancereadingscore'];?></td>
    <td width="17"><?php echo $row['mathscore'];?></th>
    <td width="17"><?php echo $row['locatinginfoscore'];?></td>
    <td width="84"> <?php echo $row['backcalc'];?></td>
    <td width="79"><?php echo $row['drugcalc'];?></td>
    <td width="113"><?php if ($row['clearbackground']='1')
    {
        echo "Yes";
    }
    else
    {
        echo "no";
    }
    ?></td>
    <td width="114">
    <?php if ($row['cleardrugtest']=='1')
    {
        echo "Yes";
    }
    else 
    {
        echo "No";
    }
    ?>
    </td>
    <td width="96">
    <?php if ($row['studentinformationsheet']=='1')
    {
        echo "Yes";
    }
    else
    {
        echo "No";
    }
    ?>
    </td>
    <td width="89">
    <?php if ($row['schoolapplication']=='1')
    {
        echo "Yes";
    }
    else
    {
        echo "No";
    }
    ?>
    </td>
    <td width="118">
    <?php if ($row['professionalreco']=='1')
    {
        echo "Yes";
    }
    else
    {
        echo "No";
    }
    ?>
    </td>
    <td width="119">
    <?php if ($row['reasonableaccom']=='1')
    {
        echo "Yes";
    }
    else
    {
        echo "No";
    }
    ?>
    </td>
    <td width="58">
    <?php if ($row['driverlicesnce']=='1')
    {
        echo "Yes";
    }
    else
    {
        echo "No";
    }
    ?>
    </td>
    <td width="91">
    <?php if ($row['highschooldip']=='1')
    {
        echo "Yes";
    }
    else
    {
        echo "No";
    }
    ?>
    </td>
  </tr>
  <?php } ?>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:43:01.373

如果您想按 id 对选择框进行排序，那么一定要使用 Pachonk 上面所说的“ORDER BY”。

另外，我注意到您的 PHP 在下面：

```
 <option>
            <? echo $options ?>
         </option> 
```

正在输出：

```
<option>
<option value="Some id">some text
<option value="some other id">some other text
... repeat for all options
</option> 
```

您应该从 PHP 周围删除第一个（无论如何您都在 php echo 语句中放置一个标签）并将该标签放在上面的 php 代码中，以便每个都有一个

喜欢：

```
$result = mysql_query($sql) or die (mysql_error()); 
    while ($row = mysql_fetch_array($result))
    {
        $id=$row["id"];
            $course=$row["coursename"]; 
            $options.="<OPTION VALUE=\"$id\">".$course . "</option>";
                                                       ^^^^^^^^^^^^^ added these
    }
    ?>

            // removed <option>
          <? echo $options ?>
             // removed </option>
          </select> 
```

当然，您可以只让 while 子句中的 php 立即输出您的选项，然后也输出。

希望在某种程度上有所帮助。

# objective-c - 内存地址不同，不知道是什么意思

> ID：15286060
> 
> 赞同：1
> 
> 时间：2013-03-08T03:12:31.520
> 
> 标签：objective-c

假设我们正在使用 Objective-C

```
 NSDate *now = [NSDate date];
    NSLog(@"The new date lives at %p", now);
    NSLog(@"The new date lives also at %p", &now); 
```

NSLogs 会吐出不同的内存地址，这让我很困惑。NSLogs 之一现在告诉我对象的地址，但是哪一个呢？一个给出指针的地址，另一个给出对象的地址？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:17:09.830

你说的对。第一条日志消息向您显示 NSDate 对象本身的地址，该地址应该在某个动态内存中（“在堆上”）。第二行是指针变量“now”的地址，在这种情况下，它是一个局部变量，应该在堆栈上。

因此，您在堆栈上有一个名为`now`. `now`是一个指针，该`now`变量的值是您的 NSDate 的内存地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:28:05.460

这是指针和指针的指针之间的区别。

# c# - 检查 ArrayList 是否已排序

> ID：15286064
> 
> 赞同：0
> 
> 时间：2013-03-08T03:13:04.013
> 
> 标签：c#, sorting, listbox

我想知道是否可以这样做，是否可以循环检查 ArrayList 是否已排序，如果不是，则显示一个消息框？

这是我尝试过的：

```
if (!aList.Sort)
{
   MessageBox.Show("The list isn't sorted");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T03:14:20.240

[`Sort()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.sort.aspx)是一种方法。我想你想要的[`Sorted`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.sorted.aspx)财产。

```
if (!aList.Sorted) 
```

请注意，在列表框本身不强制执行排序顺序的情况下，项目可能会“按升序排列”。如果您只想检查显示的所有项目是否*按*升序排列，那是另一回事。

编辑：要检查序列（无论是列表框中的项目还是 中的元素`ArrayList`，这可能是您真正感兴趣的）是否已排序，您只需要遍历它们，并将每个项目与上一个。使用通用集合更容易做到这一点，但是......

```
public static bool IsSorted(IEnumerable sequence)
{
    // Now assuming that list
    using (IEnumerator iterator = sequence.GetEnumerator())
    {
        if (!iterator.MoveNext())
        {
            // An empty sequence is always sorted
            return true;
        }
        IComparable previous = (IComparable) iterator.Current;
        while (iterator.MoveNext())
        {
            IComparable next = (IComparable) iterator.Current;
            if (next.CompareTo(previous) < 0)
            {
                return false;
            }
            previous = next;
        }
        return true;
    }
} 
```

# ios - delegate = nil，在 VC 之间传递信息 issue

> ID：15286067
> 
> 赞同：0
> 
> 时间：2013-03-08T03:13:10.333
> 
> 标签：ios, objective-c, delegates

我刚开始学习 obj-c，我对代表有疑问。我知道在 SOF 上有很多类似的线程，但我一直在寻找并且真的没有得到我的问题（可能是因为我是初学者）。这是我的问题：我想使用自己的委托并将信息从 SlaveClass 传输到 MainClass。在 buttonDidClick: 动作中的 SlaveClass 中，我声明委托等于 NIL。即使我不知道我应该从哪里开始寻找错误。提前感谢任何类型的建议。这是我引用委托的代码：

从类.h

> ```
> @protocol slaveDelegate <NSObject>
> 
>  -(void)transferNameDidClick:(NSString *)text;
> 
> @end
> // --------------------------------------------------------------------------------
> @interface SlaveClass : UIViewController
> @property (nonatomic, strong) id <slaveDelegate> myOwnDelegate;
> @end 
> ```

SlaveClass.m（这里显示为 NIL）

```
-(void)buttonDidClick:(id)sender
{
    if ([_myOwnDelegate respondsToSelector:@selector(transferNameDidClick:)])
    {
        [_myOwnDelegate transferNameDidClick:(_textField.text)];
    }
} 
```

主类.h

```
@interface MainClass : UIViewController <slaveDelegate>
@end 
```

主类.m

```
-(void)transferNameDidClick:(NSString *)text
{
    SlaveClass *delegate = [[SlaveClass alloc] init];
    [delegate setMyOwnDelegate:self];
    [_label setText:text];
    NSLog(@"text: %@",text);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:33:20.540

您将代表设置在错误的位置。您必须在进入 slaveClass 之前设置委托

**mainClass.m**
像这样呈现从视图控制器

```
SlaveClass *slaveClass = [[SlaveClass alloc] init]
[slaveClass setMyOwnDelegate:self];
[self presentViewController:slaveClas animated:YES completion:nil]; 

-(void)transferNameDidClick:(NSString *)text
{
 // This is the method getting called by the slaveClass. So it should know the delegate to call this. 
[_label setText:text];
NSLog(@"text: %@",text);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:49:04.080

将您委托到自定义委托方法之外。您错误地在自定义委托方法中设置了 y 委托显示 nil。像这样使用。

主类.M

```
-(IBAction)nextView
{
    nextView = [[ViewController2 alloc]init];
    nextView.myOwnDelegate = self;
    [self presentViewController:nextView animated:YES completion:nil];

}

-(void)transferNameDidClick:(NSString *)text;
{
    NSLog(@"Value from Slave Delegate %@",text);
} 
```

从类.h

```
@protocol slaveDelegate <NSObject>

 -(void)transferNameDidClick:(NSString *)text;

@end
// --------------------------------------------------------------------------------
@interface SlaveClass : UIViewController
@property (nonatomic, strong) id <slaveDelegate> myOwnDelegate;
@end 
```

从类.m

```
-(void)buttonDidClick:(id)sender
{
    if ([_myOwnDelegate respondsToSelector:@selector(transferNameDidClick:)])
    {
        [_myOwnDelegate transferNameDidClick:(_textField.text)];
    }
} 
```

# java - Android 框架修改后的不匹配 Dep 签名

> ID：15286071
> 
> 赞同：1
> 
> 时间：2013-03-08T03:13:36.963
> 
> 标签：java, android, android-emulator, android-source

我在Android框架（Android 4.2）的PackageManagerService.java中修改了一些代码。make之后，启动模拟器，报如下错误：

```
10-05 08:20:34.213: I/dalvikvm(575): DexOpt: mismatch dep signature for '/system/framework/core.odex'
10-05 08:20:34.213: E/dalvikvm(575): /system/app/PackageInstaller.apk odex has stale dependencies
10-05 08:20:34.213: E/dalvikvm(575): odex source not available -- failing
10-05 08:20:34.223: W/PackageManager(575): StaleDexCacheError when reading apk: /system/app/PackageInstaller.apk
10-05 08:20:34.223: W/PackageManager(575): dalvik.system.StaleDexCacheError: /system/app/PackageInstaller.apk
10-05 08:20:34.223: W/PackageManager(575):  at dalvik.system.DexFile.isDexOptNeeded(Native Method)
10-05 08:20:34.223: W/PackageManager(575):  at com.android.server.pm.PackageManagerService.performDexOptLI(PackageManagerService.java:3375)
10-05 08:20:34.223: W/PackageManager(575):  at com.android.server.pm.PackageManagerService.scanPackageLI(PackageManagerService.java:3960)
10-05 08:20:34.223: W/PackageManager(575):  at com.android.server.pm.PackageManagerService.scanPackageLI(PackageManagerService.java:3238)
10-05 08:20:34.223: W/PackageManager(575):  at com.android.server.pm.PackageManagerService.scanDirLI(PackageManagerService.java:3017)
10-05 08:20:34.223: W/PackageManager(575):  at com.android.server.pm.PackageManagerService.<init>(PackageManagerService.java:1058)
10-05 08:20:34.223: W/PackageManager(575):  at com.android.server.pm.PackageManagerService.main(PackageManagerService.java:837)
10-05 08:20:34.223: W/PackageManager(575):  at com.android.server.ServerThread.run(SystemServer.java:177) 
```

如果我清理然后再次制作完整的项目，它可以正常工作。但是再修改一次会报同样的错误。由于再次进行完整构建将持续很长时间，因此我更喜欢其他解决方案。

我注意到 DexPrepare.cpp 中的代码：

```
if (memcmp(signature, ptr, kSHA1DigestLen) != 0) {  
    LOGI("DexOpt: mismatch dep signature for '%s'", cacheFileName);  
    goto bail;  
} 
```

如果我删除这些代码行，它将起作用。我以前在Android 2.3上工作，在Android 2.3(Gingerbread)中还有签名检查，但是在修改Gingerbread的框架后，它永远不会报告这样的错误。这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T03:17:59.793

我终于通过`make droidcore`显式运行解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T13:01:38.870

我认为在自定义 ROM 的构建和闪存期间，您不会清理数据和缓存图像。在这种情况下，在这些图像中`odexed core.jar`存储旧版本，并且在启动过程中，Android 会尝试将新版本与旧版本进行比较。所以当你做了一些修改时，签名是不同的。

# java - 保护音乐文件 - 文件系统

> ID：15286072
> 
> 赞同：0
> 
> 时间：2013-03-08T03:13:43.843
> 
> 标签：java, android, encryption

我需要构建一个 Android 应用程序，该应用程序具有从 Web 服务下载的音乐/音频文件，并最终存储在文件系统中以在应用程序中播放，但我需要防止用户能够访问和播放文件，无论是否有根.

我的第一个直觉是在存储到文件系统之前对它们进行加密，但我不确定我应该关注哪些加密算法，以及这些是加密的二进制文件与纯文本文件是否有所不同（我'正在阅读有关音频文件加密无法正常工作的帖子）。

有没有更好的方法来处理这种事情？我看到有人问过与此类似的问题，但不幸的是它没有可靠的答案：

[如何在不让用户下载和使用的情况下将音乐存储在 Android 手机上？](https://stackoverflow.com/questions/3355219/how-can-i-store-music-on-an-android-phone-without-allowing-the-user-to-be-able-t)

如果我忽略了如何实现这一点，我深表歉意。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T03:31:29.223

您在问如何创建[DRM](https://en.wikipedia.org/wiki/Digital_rights_management)系统。这是一个有争议的话题，没有直接的答案。[Defective by Design](http://www.defectivebydesign.org/what_is_drm_digital_restrictions_management)网站从用户的角度讨论了 DRM 系统的负面影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:47:05.097

您的问题的答案实际上取决于您如何定义“用户”。如果您的意思是普通用户，您真的可以以任何您喜欢的方式加密文件。即使像对文件进行异或这样微不足道的事情也可以工作。

但是，如果您所说的“用户”是一个坚定的人，具有相当多的知识和技术能力，那么简单的答案就是您不能。从 .class 文件中获取 java 源代码非常容易，因此任何真正想要获取这些文件的人都可以查看您的代码以了解您如何对其进行加密，然后对其进行逆向工程。

简单地说，如果您的客户端可以读取该文件，那么任何拥有该客户端的用户都可以读取该文件（无论是否使用您的客户端）。

# django - Django 密码重置视图中的 ReverseMatch 错误

> ID：15286073
> 
> 赞同：0
> 
> 时间：2013-03-08T03:13:55.720
> 
> 标签：django

我一直在关注一些关于如何设置 Django 电子邮件重置视图的在线教程，但我仍然收到反向匹配错误：

```
Reverse for 'django.contrib.auth.views.password_reset_confirm' with arguments '()' and keyword arguments '{'uidb36': '2', 'token': '3fk-e9d14405e0aaf252475e'}' not found 
```

我的网址设置是这样的：

```
url(r'^login_retrieval/$', 'django.contrib.auth.views.password_reset', 
    {'post_reset_redirect' : '/login_retrieval_done/',
     'template_name' : 'core/password_reset_form.html'}),
url(r'^login_retrieval_done/', 'django.contrib.auth.views.password_reset_done'),
url(r'^password_reset/(?P<uidb36>[0-9A-Za-z]+)-(?P<token>.+)/$', 'django.contrib.auth.views.password_reset_confirm', 
    {'post_reset_redirect' : '/user/password/done/'}),
url(r'^user/password/done/$', 
    'django.contrib.auth.views.password_reset_complete'), 
```

我可以进入电子邮件地址输入页面，但是当我单击发送电子邮件时，它只会返回反向匹配错误。

谁能帮我？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-23T15:49:27.507

你更新到 Django 1.6 或更高版本了吗？

如果是这样，您只需替换`uidb36`为`uidb64`. 这适用`{% url ... %}`于模板中的`reverse()`调用、Python 代码中的调用以及 urls.py 中的正则表达式。

从您的 urls.py 中选择一个示例：

```
url(r'^password_reset/(?P<uidb64>[0-9A-Za-z]+)-(?P<token>.+)/$', 'django.contrib.auth.views.password_reset_confirm', 
    {'post_reset_redirect' : '/user/password/done/'}), 
```

请参阅[Django 1.6 发行说明](https://docs.djangoproject.com/en/1.6/releases/1.6/#django-contrib-auth-password-reset-uses-base-64-encoding-of-user-pk)

# git - git stash pop 和 git stash apply 的区别

> ID：15286075
> 
> 赞同：1344
> 
> 时间：2013-03-08T03:14:02.300
> 
> 标签：git, git-stash

我已经使用`git stash pop`了一段时间。我最近发现了这个`git stash apply`命令。当我尝试它时，它似乎与`git stash pop`.

`git stash pop`和 和有什么不一样`git stash apply`？

* * *

## 回答 #1

> 赞同：2143
> 
> 时间：2013-03-08T03:15:45.923

`git stash pop` **应用后丢弃**（默认情况下最顶层）存储，而`git stash apply` **将其保留在存储列表中**以供以后可能重用（或者您可以使用`git stash drop`它）。

除非 之后发生冲突，否则会发生这种情况`git stash pop`，在这种情况下，它不会删除存储，使其行为与`git stash apply`.

另一种看待它的方式：`git stash pop`是`git stash apply && git stash drop`。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2013-09-23T20:42:29.523

正如 John Zwinck 所说，得到了这个有用的链接来说明差异，以及`git stash pop`.

> 例如，假设您的隐藏更改与您自首次创建存储后所做的其他更改发生冲突。pop 和 apply 都将有助于触发合并冲突解决模式，让您可以很好地解决此类冲突......并且两者都不会摆脱存储，即使您可能也期待 pop。由于很多人认为 stash 只是一个简单的堆栈，这通常会导致他们后来意外弹出相同的 stash，因为他们认为它已经消失了。

链接：[http ://codingkilledthecat.wordpress.com/2012/04/27/git-stash-pop-considered-harmful/](http://codingkilledthecat.wordpress.com/2012/04/27/git-stash-pop-considered-harmful/)

* * *

## 回答 #3

> 赞同：84
> 
> 时间：2013-03-08T03:16:25.250

`git stash pop`应用顶部隐藏的元素并将其从堆栈中删除。`git stash apply`做同样的事情，但将其留在存储堆栈中。

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2016-11-30T12:27:06.877

看到它在行动中可能会帮助您更好地理解差异。

假设我们正在处理`master`分支并且有一个`hello.txt`包含“Hello”字符串的文件。

让我们修改文件并在其中添加“world”字符串。现在你想移动到一个不同的分支来修复你刚刚发现的一个小错误，所以你需要进行`stash`更改：

```
git stash 
```

您移至另一个分支，修复了错误，现在您已准备好继续在您的`master`分支上工作，因此您可以`pop`进行更改：

```
git stash pop 
```

现在，如果您尝试查看存储内容，您将获得：

```
$ git stash show -p
No stash found. 
```

但是，如果您`git stash apply`改为使用，您将获得隐藏的内容，但您也会保留它：

```
$ git stash show -p
diff --git a/hello.txt b/hello.txt
index e965047..802992c 100644
--- a/hello.txt
+++ b/hello.txt
@@ -1 +1 @@
-Hello
+Hello world 
```

`pop`就像堆栈的弹出一样 - 它实际上在弹出后删除元素，而`apply`更像*peek*。

* * *

## 回答 #5

> 赞同：21
> 
> 时间：2020-09-23T20:10:59.183

假设不会抛出任何错误，并且您想要处理可用存储列表中的顶部存储项：

`git stash pop`= `git stash apply`+`git stash drop`

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2021-01-23T09:59:19.093

快速回答：

`git stash pop`-> 从存储列表中删除

`git stash apply`-> 将其保存在存储列表中

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2019-05-16T13:12:46.280

In `git` **stash**是一个存储区域，可以移动当前更改的文件。

`stash`当您想要从`git`存储库中提取一些更改并检测到存储库中可用的一些相互文件中的一些更改时，区域很有用`git`。

```
git stash apply //apply the changes without removing stored files from stash area.

git stash pop  // apply the changes as well as remove stored files from stash area. 
```

> 注意：-`git apply`仅在应用时应用存储区域的更改`git pop`以及从`stash`区域中删除更改。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-02-27T09:03:46.653

**Git 存储`Pop vs apply`工作**

如果您想将最重要的隐藏更改应用到当前的非暂存更改并删除该存储，那么您应该选择`git stash pop`.

```
# apply the top stashed changes and delete it from git stash area.
git stash pop 
```

但是，如果您想将最重要的隐藏更改应用到当前的非暂存更改而不删除它，那么您应该选择`git stash apply`.

> 注意：您可以将这种情况与`Stack`类`pop()`和`peek()`方法联系起来，其中 pop 通过减量 (top = top-1) 更改顶部，但`peek()`只能获取顶部元素。

# android - 需要一段代码来验证现有订阅

> ID：15286077
> 
> 赞同：1
> 
> 时间：2013-03-08T03:14:10.020
> 
> 标签：android, in-app-purchase, subscriptions

我已经为此苦苦挣扎了一个多星期。我正在 android 上进行订阅，使用他们的应用内计费版本 3 我构建了代码并让它运行以供购买，但正如去年所做的那样，这个版本不支持订阅，因为我从示例中将它放在一起我不'没有代码来构建代码以使用订阅。

这是我用于购买的代码，据我了解，我需要更改这些代码以使用订阅而不是购买，并添加用于确定订阅在谷歌服务器上是否有效的代码。我现在没有看到代码。

```
 String base64EncodedPublicKey = "MI...QAB";
    mHelper = new IabHelper(this, base64EncodedPublicKey);

    // enable debug logging (for a production application, you should set
    // this to false).
    mHelper.enableDebugLogging(false);

    mHelper.startSetup(new IabHelper.OnIabSetupFinishedListener() {
        public void onIabSetupFinished(IabResult result) {
            if (!result.isSuccess()) {
                // Oh noes, there was a problem.
                // complain("1 "+"Problem setting up in-app billing: " +
                // result);
                return;
            }
            mHelper.queryInventoryAsync(mGotInventoryListener);
        }
    });

// Listener that's called when we finish querying the items we own
IabHelper.QueryInventoryFinishedListener mGotInventoryListener = new IabHelper.QueryInventoryFinishedListener() {
    public void onQueryInventoryFinished(IabResult result,
            Inventory inventory) {
        // ///Log.d(TAG, "Query inventory finished.");
        if (result.isFailure()) {
            // complain("2 "+"Failed to query inventory: " + result);
            return;
        }
        // ///Log.d(TAG, "Query inventory was successful.");
        // place code here to proceess purchase without reaccessing database
        if (inventory.hasPurchase(appSKU)) {
            // ///Log.i("Purchase","purchase consumed here");

        //mHelper.consumeAsync(inventory.getPurchase(appSKU),mConsumeFinishedListener);

            return;
        }
    }
};

public void order(String appSKU) {
    mHelper.launchPurchaseFlow(this, appSKU, RC_REQUEST,
            mPurchaseFinishedListener);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // Log.d(TAG, "onActivityResult(" + requestCode + "," + resultCode + ","
    // + data);

    // Pass on the activity result to the helper for handling
    if (!mHelper.handleActivityResult(requestCode, resultCode, data)) {
        // not handled, so handle it ourselves (here's where you'd
        // perform any handling of activity results not related to in-app
        // billing...
        super.onActivityResult(requestCode, resultCode, data);
    } else {
        // ///Log.d(TAG, "onActivityResult handled by IABUtil.");
    }
}

// Callback for when a purchase is finished
IabHelper.OnIabPurchaseFinishedListener mPurchaseFinishedListener = new IabHelper.OnIabPurchaseFinishedListener() {
    public void onIabPurchaseFinished(IabResult result, Purchase purchase) {
        // ///Log.d(TAG, "Purchase finished: " + result + ", purchase: " +
        // purchase);

        if(purchase == null) {
            ;
        }else {
        String tester1 = purchase.toString();

        // ///Log.d(TAG, "Purchase successful.");
    //  mHelper.consumeAsync(purchase, mConsumeFinishedListener);

           // myCallServer(udid, calltype, data, OrderID, ProductId, PurchaseToken) {

        Bundle myBundle = new Bundle();
        myBundle.putString("AppTitle", AppTitle);

        Intent myIntent = new Intent(getBaseContext(),
                IntroALevActivity.class);
        myIntent.putExtras(myBundle);
        startActivity(myIntent);
    }

    }

};

// Called when consumption is complete
IabHelper.OnConsumeFinishedListener mConsumeFinishedListener = new IabHelper.OnConsumeFinishedListener() {
    public void onConsumeFinished(Purchase purchase, IabResult result) {
        // ///Log.d(TAG, "Consumption finished. Purchase: " + purchase +
        // ", result: " + result);

        // We know this is the "gas" sku because it's the only one we
        // consume,
        // so we don't check which sku was consumed. If you have more than
        // one
        // sku, you probably should check...
        if (result.isSuccess()) {
            // successfully consumed, so we apply the effects of the item in
            // our
            // game world's logic, which in our case means filling the gas
            // tank a bit
            alert("You made a purchase");
        } else {
                    ;
        }
    }
}; 
```

我在网上查看过，但我只发现了一些损坏的代码来帮助我确定检查现有订阅的确切方法代码。如果有人可以查看我的代码并提供我缺少的方法，那就太好了。Google 示例通常很好，但由于订阅刚刚添加到 2 月 15 日的 V3 中，因此没有很多编码示例可供构建。

我很挣扎，所以如果您有任何问题或需要更多信息，请告诉我，我会尽我所能提供。

感谢 stackoverflow 成员

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T07:02:29.063

Even though I'm not using subscriptions in my implementation you can check that in your IabHelper.QueryInventoryFinishedListener mGotInventoryListener function. So instead of this:

```
// ///Log.d(TAG, "Query inventory was successful.");
    // place code here to proceess purchase without reaccessing database
    if (inventory.hasPurchase(appSKU)) {
        // ///Log.i("Purchase","purchase consumed here");

    //mHelper.consumeAsync(inventory.getPurchase(appSKU),mConsumeFinishedListener);

        return;
    } 
```

Use this:

```
Purchase haspurchase = inventory.getPurchase(appSKU);
if (haspurchase = null) {
    // do something since there wasn't a purchase
}
else {
   // do something if you have the purchase 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T09:03:38.170

要使用应用订阅，我认为您将在您创建的 IabHelper 实例上调用“launchSubscriptionPurchaseFlow()”方法。

```
 mHelper.launchSubscriptionPurchaseFlow(Activity act, String sku, int requestCode,
    OnIabPurchaseFinishedListener listener, String extraData); 
```

或者

```
 mHelper.launchPurchaseFlow(Activity act, String sku, String itemType, int requestCode,
                    OnIabPurchaseFinishedListener listener, String extraData); 
```

其中 itemType = IabHelper.ITEM_TYPE_SUBS

# c# - 如何保存或存储对象的 ArrayList？

> ID：15286082
> 
> 赞同：-1
> 
> 时间：2013-03-08T03:14:48.710
> 
> 标签：c#

我的项目函数返回了各种类型的对象的 ArrayList，我必须将它保存或存储在某个地方以供以后分析。但是我做了一些研究，还没有找到将其存储到数据库或将其写入文件的方法。

如果有任何方法可以保存或存储对象的 ArrayList，我非常期待更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:17:28.267

首先，你*真的*需要使用非泛型集合吗？使用它几乎*总是*`List<T>`比`ArrayList`除非您实际上是针对 .NET 1.1 更好，这似乎不太可能。

`ObjectOutputStream`在 Java 中使用的等价物是[`BinaryFormatter`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)在 .NET 中使用。您可以[`GZipStream`](http://msdn.microsoft.com/en-gb/library/system.io.compression.gzipstream.aspx)用于压缩。请注意，这些是类，*而不是*名称空间 - 值得在您的脑海中清理术语。`FileOutputStream`并且在 .NET`FileInputStream`中都表示为。`FileStream`

还值得一提的是，在 .NET 或 Java 中使用本机二进制序列化在版本控制方面有些脆弱。您可能需要考虑使用 JSON、Protocol Buffers、Thrift、XML 等替代方案。

就我个人而言，我建议您从头开始学习 C# 和 .NET，而不是在不真正了解您要移植到的语言和平台的习语的情况下尝试移植 Java 代码。例如，您肯定希望使用`using`语句而不是使用“手动”`finally`块来处理资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:22:15.257

我在 stackoverflow 上发现了一些有趣的线程：

[如何快速保存/加载类实例到文件](https://stackoverflow.com/questions/4266875/how-to-quickly-save-load-class-instance-to-file)

[从 List<T> 保存到 txt](https://stackoverflow.com/questions/8883483/saving-from-listt-to-txt)

我认为[序列化](http://msdn.microsoft.com/en-us/library/vstudio/ms233843.aspx)是你需要的：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T03:22:42.343

以下将压缩对象并保存到文件：

```
using System;
using System.IO;
using System.IO.Compression;
using System.Runtime.Serialization.Formatters.Binary;

public static void WriteFile<T>(T obj, string path) 
{ 
    using (FileStream fs = File.OpenWrite(path))
    using (GZipStream gzip = new GZipStream(fs, CompressionMode.Compress))
    {
        BinaryFormatter bf = new BinaryFormatter(); 
        bf.Serialize(gzip , obj); 
    }
} 

public static T LoadFile<T>(string path) 
{  
    using (FileStream fs = File.OpenRead(path))
    using (GZipStream gzip = new GZipStream(fs, CompressionMode.Decompress))
    {
        BinaryFormatter bf = new BinaryFormatter(); 
        return (T)bf.Deserialize(gzip); 
    }
} 
```

并阅读并解压缩回来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T01:57:36.380

你真的需要 XML 吗？你可以试试**binary**吗，那里有很多你不能保存到 XML 中的数据？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T05:38:05.200

到目前为止，我还没有一个好的解决方案来解决我的问题。但我对 Alina B. 的建议进行了一些研究，并获得了一些更基本的信息来做到这一点。我有一个将对象集合保存到文件的代码。（我已将目标更改为使用 Collection 而不是 ArrayList 以使其在这种情况下更容易。

```
//Here I call the method with parameter of Collection of objects
Collection<object> list = new Collection<object>();
list.Add("value1");
list.Add("value2");
list.Add("value3");
SaveListToFile(list);

public void SaveListToFile(Collection<object> list)
{
    var serializer = new XmlSerializer(typeof(Collection<object>));
    using (var writer = new StreamWriter(Server.MapPath("~/Files/test.xml")))
        serializer.Serialize(writer, list);
} 
```

在上述方法中，我使用 XmlSerializer 将对象集合写入 xml 文件。如果 Collection 中的每个元素都是字符串，则该方法运行得非常好。但是，如果我将任何其他对象添加到集合中，例如类、ArrayList 或其他对象类型，它将生成错误*（生成 XML 文档时出错。）*并且我根本无法保存集合。那么如何保存一组对象，如 ArrayList、类、整数或其他类型，而不是字符串？如果你在这里，我需要更多帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-17T01:58:41.900

也许您可以使用二进制序列化并保存二进制文件？然后你可以使用 gzip 来压缩它。 [这是一个示例的链接](http://www.java2s.com/Tutorial/CSharp/0220__Data-Structure/SerializeanArrayListobjecttoabinaryfile.htm)

# sql - 如果不存在则插入 h2 表

> ID：15286084
> 
> 赞同：16
> 
> 时间：2013-03-08T03:15:05.567
> 
> 标签：sql, h2, insert-update

我正在使用 H2。如果它不存在，我想将一个值插入到表中。我用以下方法创建表：

```
CREATE TABLE IF NOT EXISTS $types 
  (type VARCHAR(15) NOT NULL UNIQUE); 
```

我想做一些类似的事情

```
REPLACE INTO types (type) values ('type1'); 
```

我找到[了一个关于 Replace 的示例](http://bogdan.org.ua/2007/10/18/mysql-insert-if-not-exists-syntax.html)，该示例显然适用于 MySQL，但我使用的是 h2。但是当我从我的 h2 控制台运行它时出现错误：

```
Syntax error in SQL statement "REPLACE[*] INTO TYPES (TYPE) VALUES ('expense') "; expected "ROLLBACK, REVOKE, RUNSCRIPT, RELEASE, {"; SQL statement:
REPLACE INTO types (type) values ('expense') [42001-170] 42001/42001 
```

我也试过

```
INSERT IGNORE INTO types (type) values ('expense'); 
```

和

```
INSERT INTO types (type) values ('expense') ON DUPLICATE KEY UPDATE type=type; 
```

我不在乎新插入是否覆盖旧数据，或者它只是不执行新插入。有没有办法用 h2 数据库做到这一点？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-08T03:27:31.887

合并[语句](http://www.h2database.com/html/grammar.html#merge)应该允许您实现您想要的。我不是 H2 方面的专家，但我已经`MERGE`在 SQL Server 中多次使用过该语句，从该网站的外观来看，它应该可以解决问题。

从网站：

> 更新现有行，并插入不存在的行。如果未指定键列，则使用主键列来查找行。

# php - 如何将学生的答案与实际答案相匹配

> ID：15286086
> 
> 赞同：1
> 
> 时间：2013-03-08T03:15:18.543
> 
> 标签：php

我在下面有一个 foreach 循环，它显示每个表格行的数据：

```
foreach ($studentData['questions'] as $questionId => $questionData) {

    ...

            echo '<td width="30%" class="answers">'.htmlspecialchars($questionData['answer']).'</td>' . PHP_EOL;

    ...

            echo '<td width="30%" class="studentanswer">'.htmlspecialchars($questionData['studentanswer']).'</td>' . PHP_EOL;

    } 
```

我想要做的是，如果 a`studentanswer`匹配 an `answer`，那么`studentanswer`它将变成绿色，如果不匹配，则以红色显示不正确的答案，如果完全`studentanswer`匹配 100%`answer`则我想要一个变量，例如以绿色`$check`显示字符串站`fully correct`如果不是 100% 匹配`not full correct`，则以红色显示字符串。

因此，例如上面的代码可以显示：

```
Answer: B C
Student Answer: B D 
```

上面的输出应该将学生答案显示`B`为绿色，因为它与答案匹配，`B`但学生答案`D`应该是红色，因为没有`D`答案。该变量`$check`应显示为红色`not fully correct`，因为学生的答案并不完全正确，只是部分正确。

但是如何才能做到这一点呢？

更新：

它不会改变文本的颜色：

```
if($questionData['answer'] == $questionData['studentanswer']) {
$style = 'green';
$checked = 'Fully Correct';
} else {
$style = 'red';
$checked = 'Not Correct / Not Fully Correct';
}

        echo '<td width="30%" class="answers '.$style.'">'.htmlspecialchars($questionData['answer']).'</td>' . PHP_EOL;

...

        echo '<td width="30%" class="studentanswer '.$style.'">'.htmlspecialchars($questionData['studentanswer']).'</td>' . PHP_EOL; 
```

CSS：

```
.red{
color: red;
}

.green{
color: green;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:24:05.467

```
<?php 
if($questionData['answer'] == $questionData['studentanswer'] {
    $style = 'color:green';
    $checked = 'right';
} else {
    $style = 'color:red';
    $checked = 'not fully correct';
}
?>

...

<td width="30%" class="answers" style="<?php echo $style; ?>">
<?php echo $checked; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:24:48.943

您可以使用条件来实现这一点。

使用 php 的 if() 函数，您可以确保您的脚本在处理某段代码之前满足您选择的某些条件。

因此，要检查学生的答案是否与教师的答案相匹配，在循环内，您将添加如下内容：

```
if( $questionData['studentanswer'] == $questionData['answer'] )
{
    // The answer was correct
}
else {
    // This is for the answer not being correct
} 
```

这段代码只是展示了如何实现您想要完成的目标的示例，当然您需要自己制作以完全符合您的需求。

如果您有任何其他问题或需要进一步的帮助，请随时提出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T03:30:13.810

试试这个：

```
$check = true;

foreach ($studentData['questions'] as $questionId => $questionData) {
    $studentAnswer = htmlspecialchars($questionData['studentanswer']);
    $answer = htmlspecialchars($questionData['answer']);
...

        echo '<td width="30%" class="answers">'.htmlspecialchars($questionData['answer']).'</td>' . PHP_EOL;

...
    if($answer == $studentAnswer)
    {
        echo '<td width="30%" class="studentanswer greenAnswer">'.htmlspecialchars($questionData['studentanswer']).'</td>' . PHP_EOL;
    }
    else
    {
        echo '<td width="30%" class="studentanswer redAnswer">'.htmlspecialchars($questionData['studentanswer']).'</td>' . PHP_EOL;
        $check = false;
    }

}

if($check)
{
    echo '<p class="greenAnswer">Fully Correct!</p>';
}
else
{
    echo '<p class="redAnswer">Not Fully Correct!</p>';
} 
```

在您的 CSS 中放置以下内容：

```
greenAnswer
{
    color:green;
}

redAnswer
{
    color:red;
} 
```

# php - 使用 PHP 提取 PDF.zip 的简单解决方案

> ID：15286089
> 
> 赞同：0
> 
> 时间：2013-03-08T03:15:28.817
> 
> 标签：php, unzip, 7zip

我有一个相当大的 zip 文件（我使用 7zip 压缩文件），现在我必须提取服务器上的文件。我尝试使用 CPANEL 文件管理器，但 zip 文件太大。

关于如何提取此 zip 文件的任何想法？

我没有 SHELL ACCESS，如果有的话，我更愿意使用软件工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:40:51.713

你可以试试，也许这行得通。您还可以使用 exec 功能

```
<?php
$salida = shell_exec('unzip you.zip');
echo $salida; 
```

# php - 随着目标集的增长，循环哈希能否保持一致？

> ID：15286091
> 
> 赞同：3
> 
> 时间：2013-03-08T03:15:49.737
> 
> 标签：php, javascript, scalability, consistent-hashing

给定一组静态目标，循环散列算法提供一致性。例如：

1.  我有一组初始目标，我们称它们`A`为`B`和`C`。
2.  我有钥匙，我们就叫它吧`x`
3.  我有一个循环哈希函数，我们称之为`hash(key, targets)`
4.  当我打电话时`hash(x, [A,B,C])`，`x`总是哈希到`A`

似乎足够明显。`A`我总是得到的事实`x`代表了我在使用循环哈希时所期望的一致性。但是，现在让我们考虑如果我添加一个新节点会发生什么`D`：

1.  我的目标集重新平衡以包括`A`、`B`、`C`和`D`
2.  我重新申请我的`x`钥匙`hash(x, [A,B,C,D])`
3.  因为圈子重新平衡了，我不能保证再`A`得到

我错过了什么还是我只是运气不好？当您开始重新排序节点（例如`hash(x, [B,A,D,C])`）或在现有节点列表的中间插入新节点（例如 ）时，问题会进一步恶化`hash(x, [A,AA,B,C,D])`。我对循环散列的学术方面进行了一些研究，这种类型的“缩放一致性”似乎并不是它的主要关注点之一。也许我只是使用了错误类型的哈希算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:40:36.517

您的问题有一个非常简单的解决方案。这是它如何工作的示例。

假设您有 3 个真实目标（即物理机）：A、B、C。然后引入 9 个虚拟目标：1、2、3、4、5、6、7、8、9 并从虚拟目标建立静态映射像这样的真正目标：

```
1, 2, 3 -> A
4, 5, 6 -> B
7, 8, 9 -> C 
```

当您需要读取/写入某个键的值时，您首先使用哈希函数将键映射到虚拟目标，然后使用上面显示的静态映射将虚拟目标映射到真实目标。一旦某个真实目标为多个虚拟目标提供服务，它应该将它们存储在单独的哈希映射中，因此真实目标 B 为其服务的三个虚拟目标具有三个单独的哈希映射。

现在我们要添加新的真实目标： D. 我们首先重新平衡我们的静态映射，例如：

```
1, 2, 3 -> A
4, 5 -> B
7, 8 -> C
6, 9 -> D 
```

然后我们将服务于虚拟目标的哈希映射`6`从真实目标`B`转移到新的真实目标`D`。我们还将地图服务虚拟目标`9`从转移`C`到`D`。此操作具有复杂性`O(n)`，其中`n`传输的值的数量是多少，因为每个真实目标都在单独的哈希映射中为每个虚拟目标服务。

为了获得良好的负载平衡，虚拟目标的数量应该比实际目标的最大可能数量估计值大几倍（例如 10 倍）。

换句话说，该解决方案的主要思想是使用哈希函数将键映射到虚拟目标的数量不变的虚拟目标。然后使用静态映射将虚拟目标映射到真实目标，并且当添加或删除真实目标时，此静态映射会发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:55:25.240

I couldn't interpret your entire question in a consistent way, so I will guess what you really wanted to ask and answer based on that.

Assumed problem: You have a bunch of objects (e.g. strings) and you have a bunch of machines, and you want to assign each object to a machine in order to spread the workload among the machines. When a machine joins or leaves the pool of machines, you don't want to reshuffle too many of the object-to-machine assignments ("scaling consistency").

I think you have a misunderstanding where you said you hash the object `x` to map a machine in the pool `[A,B,C]`. My understanding is that there are three intermediate steps involved.

1.  Calculate a hash value for each object. Suppose that the hash output space is something large like all integers from 0 to 2^(32) − 1.

2.  Assign a value (in the same number space) to each machine, which it keeps constant for its lifetime. You would want to spread these numbers out randomly.

3.  Now, we assign each object to belong to the closest upward machine. That means if the object's hash is x, then it belongs to the machine M such that M's value is the smallest number greater than x.

Example:

1.  We have 4 string objects with their respective hash in the range 0 to 999: abc=314, def=125, ghi=802, jkl=001.

2.  We have 3 machines, with these numbers: X=010, Y=357, Z=768.

3.  Which machine does object abc=314 belong to? Counting upwards, the closest machine is Y=357.
    Which machine does object ghi=802 belong to? Counting upwards, the closest machine is X=010.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-09T05:06:16.367

好的，我想我明白了。

我最终使散列算法保持简单，并使用“校验和”（排序）来确保 x 始终键为同一个目标。当添加新目标并且系统重新平衡时，我只需通知所有现有目标有关重新平衡的信息。这样，如果 x 散列到不应再散列到的目标，则目标可以委托给正确的目标。

感谢您的所有回复，如果不是因为你们都提供了清晰的信息，我可能不会想到这个解决方案。

干杯，

乔恩

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T03:19:28.573

当您扩展散列函数的允许输出范围时，理所当然的一些输入将散列到不同的输出（否则扩展范围没有意义）。唯一的方法是哈希函数存储所有以前的结果（或压缩的，可能有损的相同形式，如布隆过滤器），以便它可以记住将“旧”结果用于它的输入以前见过。

# r - 如何更改 ggplot2 中 R 的 bin 位置

> ID：15286095
> 
> 赞同：3
> 
> 时间：2013-03-08T03:16:30.100
> 
> 标签：r, ggplot2, histogram

下面绘制了一个直方图，其最左边的点为 0。

```
myplot = ggplot(df,aes(x = myvar)) +
         geom_histogram(aes(y = ..density..), binwidth = .3) 
```

我希望直方图有一个以 0 为中心的 bin。（如果你想知道为什么我想做这么古怪的事情 - 这是为了说明直方图的一些弱点。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T03:25:26.590

您可以将`breaks`参数传递`stat_bin`给`...`, (`geom_histogram`调用`stat_bin`)

```
myplot <-  ggplot(df,aes(x = myvar))+
 geom_histogram(aes(y = ..density..), breaks = seq(0,5,by=1)) 
```

这覆盖`bindwidth`和`origin`

有关更多详细信息，请参阅 stat_bin 的帮助。

您可能还会发现`origin`一个有用的参数（`origin = 0`可能是设置），但不能与`breaks`!

# java - Google App Engine - Java Servlet - 文件访问

> ID：15286097
> 
> 赞同：0
> 
> 时间：2013-03-08T03:16:38.097
> 
> 标签：java, google-app-engine, servlets, permissions

我正在尝试编写一个返回文件的 Servlet。最终目标是返回无法通过 URL 直接访问的文件。我开始使用仅打印 Hello World 的 GuestbookServlet，并使用我在此处找到的一些代码构建在它之上。

我正在使用带有 Helios Service Release 2 的 App Engine SDK 1.7.5。

在 Eclipse 中，我将文件放在“战争”路径中。

我使用的网址是：

```
http://localhost:8888/guestbook?gimme 
```

这是我的代码：

```
package guestbook;

import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@SuppressWarnings("serial")
public class GuestbookServlet extends HttpServlet {

private String identifier = "gimme";

public void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {
    String queryString = req.getQueryString();
    if (queryString != null && queryString.equals(identifier)) {

        // String filename = URLDecoder.decode(req.getPathInfo(), "UTF-8");
        String filename = "pic.png";
        File file = new File("/files/", filename);
        System.out.println("FILE: " + file);
        resp.setHeader("Content-Type",
                getServletContext().getMimeType(file.getName()));
        resp.setHeader("Content-Length", String.valueOf(file.length()));
        resp.setHeader("Content-Disposition",
                "inline; filename=\"" + file.getName() + "\"");

        BufferedInputStream input = null;
        BufferedOutputStream output = null;

        try {
            input = new BufferedInputStream(new FileInputStream(file));
            output = new BufferedOutputStream(resp.getOutputStream());

            byte[] buffer = new byte[8192];
            for (int length = 0; (length = input.read(buffer)) > 0;) {
                output.write(buffer, 0, length);
            }
        } finally {
            if (output != null)
                try {
                    output.close();
                } catch (IOException ignore) {
                }
            if (input != null)
                try {
                    input.close();
                } catch (IOException ignore) {
                }
        }

    } else {
        resp.getWriter().println("Invalid Request");
    }

}
} 
```

这是我的错误：

```
Mar 7, 2013 9:12:33 PM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: /guestbook
java.security.AccessControlException: access denied (java.io.FilePermission \files\pic.png read)
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:289)
    at java.lang.SecurityManager.checkRead(Unknown Source)
    at java.io.File.length(Unknown Source)
    at guestbook.GuestbookServlet.doGet(GuestbookServlet.java:29)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T03:35:08.723

您无法使用 java io 类访问文件，因为应用引擎禁用了要使用的 java io 库。所以如果你想读取一个文件，你必须把这个文件放到 blob 存储中，然后从那里读取它。

# c - 使用 fscanf 读取序列化数据

> ID：15286100
> 
> 赞同：1
> 
> 时间：2013-03-08T03:16:52.480
> 
> 标签：c, scanf

我有一个 C 结构数组，我将它序列化到一个文件中，我需要再次将该数据检索到内存中。

```
movie list[50]; //array

typedef struct{
    int code;
    int year;
    float price;
    char title[50];
    char director[30];
    char description[255];
} movie; 
```

序列化数据示例

```
1|1990|9.900000|Hello world|Foo bar baz|lorem ipsum bla bla|
34|1994|4.900000|lorem ipsum|lorem ipsum|lorem ipsum|
23|1993|5.100000|lorem ipsum|lorem ipsum|lorem ipsum|
.
.
. 
```

要序列化，我只需将数组和 fprintf 每个属性遍历到一行。

但是要读取数据，显然是行不通的

```
while( fscanf("%d|%d|%f|%s|%s|%s|",&list[i].code, &list[i].year, ...)!= EOF){
i++;
...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:03:13.210

这不起作用

```
sscanf(input,"%[ˆ|]|%[ˆ|]|%[ˆ|]",string1,string2,string3); 
```

这个错误非常微妙，以至于我花了将近 3 个小时才找到问题的答案：

```
sscanf(input,"%[^|]|%[^|]|%[^|]",string1,string2,string3); 
```

问题可能是因为我`U.S International English`在我的美国 macbook 上使用布局键盘。

这会导致`^`键（Shift-6）显示为重音`ˆ`，直到您按下它变成的辅音，`â ê î ô û`或者如果您按下空格键，它会将重音变成一个字符，我从来没有意识到这两个`ˆ^`是不同的。

我不确定英语，但至少在葡萄牙语中，不是字符的 ^ ins 称为抑扬音符号，用于辅音 ê î ô û 表示不同的发音。

因此，如果您使用的是美式键盘，则必须按 Shift+6，然后按空格键`^`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:19:15.580

“显而易见的事情不起作用”...那是您阅读该函数的联机帮助页的时候:-(。

格式在`%s`遇到字符串时不会停止读取`|`...如果您查看 fscanf 文档，您会看到另一个格式指令允许您控制将哪些字符读入字符串与终止转换... .

# java - 为什么我在这里得到一个非法参数异常？

> ID：15286116
> 
> 赞同：0
> 
> 时间：2013-03-08T03:17:54.363
> 
> 标签：java, android

我是 android 新手，我在这方面遇到了困难。我要做的就是将数据从数据库显示到列表视图。错误总是未处理的异常：illegelargumentexception。

我的xml是：

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout
    android:id="@+id/widget0"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    xmlns:android="http://schemas.android.com/apk/res/android">
  <Button
    android:id="@+id/button1"
    android:layout_width="117dp"
    android:layout_height="29dp"
    android:text="SAVE"
    android:textSize="8sp"
    android:layout_x="17dp"
    android:layout_y="186dp" />
  <TextView
    android:id="@+id/fname"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="First Name"
    android:textSize="10sp"
    android:layout_x="134dp"
    android:layout_y="24dp" />
  <TextView
    android:id="@+id/lname"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Last Name"
    android:textSize="10sp"
    android:layout_x="132dp"
    android:layout_y="75dp" />
  <EditText
    android:id="@+id/t1"
    android:layout_width="287dp"
    android:layout_height="32dp"
    android:text="EditText"
    android:textSize="12sp"
    android:layout_x="15dp"
    android:layout_y="43dp" />
  <EditText
    android:id="@+id/t2"
    android:layout_width="287dp"
    android:layout_height="34dp"
    android:textSize="12sp"
    android:layout_x="14dp"
    android:layout_y="96dp" />
  <TextView
    android:id="@+id/mname"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Middle Name"
    android:textSize="10sp"
    android:layout_x="126dp"
    android:layout_y="130dp" />
  <EditText
    android:id="@+id/t3"
    android:layout_width="287dp"
    android:layout_height="31dp"
    android:textSize="12sp"
    android:layout_x="13dp"
    android:layout_y="149dp" />
  <TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView"
    android:textSize="10sp"
    android:layout_x="139dp"
    android:layout_y="191dp" />

  <ListView
   android:id="@+id/lst"
   android:layout_width="320dp"
   android:layout_height="172dp"
   android:background="#ffccccff"
   android:layout_x="0dp"
   android:layout_y="258dp" />

  <TextView
    android:id="@+id/ID"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="TextView"
    android:layout_x="26dp"
    android:layout_y="224dp" />
  <TextView
    android:id="@+id/fnameshow"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView"
    android:layout_x="94dp"
    android:layout_y="225dp" />
  <TextView
    android:id="@+id/lnameshow"
    android:layout_width="wrap_content"
    android:layout_height="21dp"
    android:text="TextView"
    android:layout_x="164dp"
    android:layout_y="225dp" />
  <TextView
    android:id="@+id/mnameshow"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView"
    android:layout_x="230dp"
    android:layout_y="227dp" />

  <Button
    android:id="@+id/btnFind"
    android:layout_width="117dp"
    android:layout_height="29dp"
    android:text="Find"
    android:textSize="10sp"
    android:layout_x="193dp"
    android:layout_y="186dp" />
</AbsoluteLayout>

Code:

void find_Click(object sender, EventArgs e)
        {
            string sColumnName = "";
                if (text1.Text.Trim () != "") {
                    sColumnName = "fname";
                    GetCursorView (sColumnName, text1.Text.Trim ());
                } else
                if (text2.Text.Trim () != "") {
                    sColumnName = "lname";
                    GetCursorView (sColumnName, text2.Text.Trim ());
                } else
                if (text3.Text.Trim () != "") {
                    sColumnName = "mname";
                    GetCursorView (sColumnName, text3.Text.Trim ());
                } 
                text.Text = "Search " + sColumnName + ".";
                ListView lvTemp = FindViewById<ListView>(Resource.Id.lst);
                lvTemp.ItemClick += new EventHandler<AdapterView.ItemClickEventArgs>(ListView_ItemClick);

        }        

protected void GetCursorView(string sColumn, string sValue)
        {
            Android.Database.ICursor icTemp = sql.GetRecordCursor(sColumn, sValue);
            if (icTemp != null)
            {
                icTemp.MoveToFirst();
                ListView lvTemp = FindViewById<ListView>(Resource.Id.lst);
                string[] from = new string[] { "id", "fname", "lname", "mname" };
                int[] to = new int[] {
                    Resource.Id.ID,
                    Resource.Id.fnameshow,
                    Resource.Id.lnameshow,
                    Resource.Id.mnameshow
                };
                // creating a SimpleCursorAdapter to fill ListView object.
                SimpleCursorAdapter scaTemp = new SimpleCursorAdapter(this, Resource.Layout.Main, icTemp, from, to); //Error on this line
                lvTemp.Adapter = scaTemp;
            }
            else
            {
                text.Text = sql.Message;
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:06:26.360

您对列表视图的引用应该是 lvtemp=(ListView)findViewById(R.id.lst)

# php - 如何强制 PHP Mongo 驱动程序将结果作为对象而不是数组返回

> ID：15286120
> 
> 赞同：2
> 
> 时间：2013-03-08T03:18:27.883
> 
> 标签：php, mongodb

我正在使用 PHP Mongo 扩展连接到 Mongo DB 服务器。问题是，即使我将值作为对象插入到 Mongo DB 中，当我使用`find`或`findOne`在 PHP 中时，我总是以数组格式获得结果。我发现它真的很丑陋和hacky。

有没有办法让 PHP 保留原来的结构，因为它在 Mongo DB 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T22:07:09.447

这与 PHP 中的原始 JSON 存在相同的问题，这就是为什么[json_decode()](http://php.net/json_decode)可以选择将返回的结果作为数组（默认为对象）。

目前（版本 1.3.7 和 1.4.0-dev）没有这样的选项。我们已经讨论过添加该选项，我现在刚刚为它创建了一个[跟踪票](https://jira.mongodb.org/browse/PHP-777)，这可能会在稍后的 1.4.x 系列中修复。

# clojure - clojure 中的解构 - 嵌入式地图

> ID：15286122
> 
> 赞同：2
> 
> 时间：2013-03-08T03:18:36.573
> 
> 标签：clojure

我在环处理程序函数中遇到了以下解构 -

`[{{:keys [params remote]} :params :as request}]`

这很奇怪，因为这是我第一次看到两个级别的牙套。clojure 是否支持解构中的 n 个级别？我在上面假设 :params 映射被解构为 [params remote] ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T03:51:52.923

是的，Clojure 支持解构嵌套数据结构，虽然我不知道它是否支持任意深度的嵌套。这是一个解构映射的简单示例，其中两个键之一具有对应值的向量：

```
(let [{[x y] :pos c :color}
      {:color "blue" :pos [1 2]}]
  [x y c]) 
```

您的示例不仅如此，因为它还使用`:keys`指令，该指令绑定与地图键同名的局部变量。以下是等价的：

```
(let [{{:keys [params remotes]} :params}
      {:params {:params "PARAMS" :remotes "REMOTES"}}]
  [remotes params])

(let [{{params :params remotes :remotes} :params}
      {:params {:params "PARAMS" :remotes "REMOTES"}}]
  [remotes params]) 
```

两者都评估为`["REMOTES" "PARAMS"]`。

# c++ - C++ 复制构造函数：带有指针列表的字段

> ID：15286125
> 
> 赞同：1
> 
> 时间：2013-03-08T03:18:42.977
> 
> 标签：c++, copy-constructor

我正在尝试为我的类 A 创建一个复制构造函数，其中包含 B 类型的指针列表。我尝试这样做的方式如下：

```
class A
{
 private:
   list<B*> myList;
   list<B*>::iterator iter;

public:
  A()
  {
   }

 // Copy constructor
 A(const A &src)
  {
    myList.assign(src.myList.begin(), src.myList.end());
  }

A& operator= (const A &src);

 };

A& A::operator= (const A &src)
{
// do the copy
myList.assign(src.myList.begin(), src.myList.end());

// return the existing object
return *this;
} 
```

现在，我的问题是，如果我这样做：

```
A=a1;

//call function that will change a1

A  a2(a1);

//call function that will change a1 
```

然后在调用最后一个改变 a1 的函数之后，我注意到 a2 也发生了变化。我认为复制构造函数应该防止这种情况发生，但我无法弄清楚我在代码中做错了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T03:23:33.240

你`std::list`是一个指针列表。
您的复制构造函数执行这些指针的**浅拷贝**。在复制构造函数调用两者之后，`a1`和`a2`是其元素指向相同对象的列表。
如果你想避免这种情况，要么：

1.  只需在成员中存储对象而不是指针`std::list`或
2.  您的复制构造函数应该执行**深度复制**。

将一个指针分配给另一个指针执行浅拷贝。简单来说，赋值后两个指针都指向同一个对象。您的代码大致**[相当于](http://codepad.org/ElY5ibnn)**：

```
#include<iostream>

using namespace std;

int main()
{
    int i = 10;
    int *ptr = &i;
    int *ptr2 = ptr;

    std::cout<<"\ni = "<<i;
    std::cout<<"\n*ptr = "<<*ptr;
    std::cout<<"\n*ptr2 = "<<*ptr2;

    *ptr2 = 20;

    std::cout<<"\ni = "<<i;
    std::cout<<"\n*ptr = "<<*ptr;
    std::cout<<"\n*ptr2 = "<<*ptr2;

    return 0;
} 
```

**输出：**

```
i = 10
*ptr = 10
*ptr2 = 10
i = 20
*ptr = 20
*ptr2 = 20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T03:28:24.307

您当前的复制构造函数实际上等同于如果您自己没有实现一个将自动生成的复制构造函数：它复制列表的所有元素，它们是指针。如果您复制列表对象并对原始对象进行更改（例如添加或删除元素），则这些更改不会反映在副本中。但是对存储在列表中的对象的更改**将**反映在副本中，因为列表只存储指向它们的指针。如果您不想要这种行为，则必须将实际的 B 对象存储在列表中：

```
list<B> mylist; 
```

当然，这意味着 B 必须是可复制的。

# c# - 在 C# 中强制转换为派生类和垃圾收集

> ID：15286135
> 
> 赞同：1
> 
> 时间：2013-03-08T03:19:48.480
> 
> 标签：c#, casting, garbage-collection

嘿，我对某事感到好奇。如果我在一个方法中创建一个派生类，然后返回一个指向基类的指针，并且所有其他指向它是派生类这一事实的引用都会消失，这会阻止垃圾收集器对作为派生的一部分的变量进行垃圾收集班级？如果没有任何东西指向派生类变量，那么该内存是否会立即释放？

如果我然后将基类指针转换回派生类，这是否意味着派生类变量中的数据可能不再存在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T05:03:16.233

在 C++ 的实现中，指向“作为派生类”的对象的指针和指向“作为基类”的同一对象的指针被实现为不同的指针是很常见的。在 CLR 中情况并非如此。当您将对派生类的引用转换为对基类的引用时，引用的位不会改变。每个引用都“知道”它自己的运行时类型，因此垃圾收集器永远不会感到困惑。

# xcode - 使用 Xcode 和终端执行 git 命令

> ID：15286139
> 
> 赞同：0
> 
> 时间：2013-03-08T03:20:36.113
> 
> 标签：xcode, git

我是使用 git 的新手，我按照一些说明直接从终端使用它。我注意到当我打开项目时，Xcode 也清楚地显示了这个存储库，即使它是一个现有项目并且 Xcode 本身并没有创建存储库（创建项目时我没有检查该选项）。

[我在这个问题](https://stackoverflow.com/questions/6370314/xcode-4-with-native-git-support-how-to-local-with-terminal-usage-most-of-the)上读到Xcode 将其存储库与使用 git 从终端手动创建的存储库分开。然而，我的经验表明 Xcode 实际上发现它很好。

我的问题很简单：

1.  从功能的角度来看，存储库是使用 Xcode 创建还是从终端手动创建是否重要？
2.  两者可以在同一个项目中互换使用吗？将使用相同的存储库吗？
3.  也许是最新的 Xcode 4.6 和该领域的改进，这就是为什么上面链接的问题提出了我没有遇到的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:25:47.583

> 我在这个问题上读到 Xcode 将其存储库与使用 git 从终端手动创建的存储库分开。然而，我的经验表明 Xcode 实际上发现它很好。

你是对的，这很好（至少对于我使用它的目的）。

> 从功能的角度来看，存储库是使用 Xcode 创建还是从终端手动创建是否重要？

不，它没有。

> 两者可以在同一个项目中互换使用吗？将使用相同的存储库吗？

是的，是的。

> 也许是最新的 Xcode 4.6 和该领域的改进，这就是为什么上面链接的问题提出了我没有遇到的问题？

很可能，尽管至少在 Xcode 4.5 中它也适用于我。

# c# - 字符串到数据网格视图

> ID：15286140
> 
> 赞同：0
> 
> 时间：2013-03-08T03:20:37.550
> 
> 标签：c#, c#-4.0, c#-3.0

未在 datagridview 中获取信息。如果我在多文本框中尝试过它很好但在 datagridview 中没有

```
public String Accountlocked()
        {
            //DirectoryEntry entry = new DirectoryEntry("LDAP://Mytechnet.com");
            DirectoryEntry entry = new DirectoryEntry("LDAP://User");
            DirectorySearcher Dsearch = new DirectorySearcher(entry);

            Dsearch.Filter = "(&(&(&(&(&(objectCategory=person)(objectClass=user)>>(lockoutTime:1.2.840.113556.1.4.804:=4294967295))))))";

            using (StringWriter sw = new StringWriter())
            {

                foreach (SearchResult sResultSet in Dsearch.FindAll())
                {

                    sw.WriteLine("{0}", (GetProperty(sResultSet, "samaccountname")));
                    sw.WriteLine("{0}", (GetProperty(sResultSet, "name")));

                }
                return sw.ToString();

            }

        } 
```

开启按钮

```
dataGridView1.DataSource = Accountlocked().ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:33:03.887

```
public DataTable Accountlocked()
        {
           //DirectoryEntry entry = new DirectoryEntry("LDAP://Mytechnet.com");
           DirectoryEntry entry = new DirectoryEntry("LDAP://User");
           DirectorySearcher Dsearch = new DirectorySearcher(entry);

           Dsearch.Filter = "(&(&(&(&(&(objectCategory=person)(objectClass=user)>>(lockoutTime:1.2.840.113556.1.4.804:=4294967295))))))";

           DataTable dt = new DataTable();
           dt.Columns.Add("AccountName");
           dt.Columns.Add("Name");
                foreach (SearchResult sResultSet in Dsearch.FindAll())
                {
                   DataRow dr = dt.NewRow();          
                   dr[0] = (GetProperty(sResultSet, "samaccountname"));
                   dr[1] = (GetProperty(sResultSet, "name"));
                   dt.Rows.Add(dr);
                }
                return dt;
            }
        }

dataGridView1.DataSource = Accountlocked(); 
```

# sql-server - 如何将包含 START WITH...CONNECT BY 子查询的视图转换为 SQL Server？

> ID：15286141
> 
> 赞同：3
> 
> 时间：2013-03-08T03:20:55.643
> 
> 标签：sql-server, sql-server-2008, oracle11g

我正在尝试将视图从 Oracle RDBMS 转换为 SQL Server。视图如下所示：

```
create or replace view user_part_v
as
  select part_region.part_id, users.id as users_id
    from part_region, users
   where part_region.region_id in(select     region_id
                                        from region_relation
                                  start with region_id = users.region_id
                                  connect by parent_region_id = prior region_id) 
```

在阅读了[递归 CTE](https://stackoverflow.com/questions/2200636/oracle-connect-by-clause-equivalent-in-sql-server)以及它们[在子查询中的使用之后](https://stackoverflow.com/questions/1914151/how-we-can-use-cte-in-subquery-in-sql-server)，我最好的猜测是将上述内容转换为 SQL Server 语法：

```
create view user_part_v
as
  with region_structure(region_id, parent_region_id) as (
    select region_id
         , parent_region_id
      from region_relation
     where parent_region_id = users.region_id
    union all
    select r.region_id
         , r.parent_region_id
      from region_relation r
      join region_structure rs on rs.parent_region_id = r.region_id
  )
  select part_region.part_id, users.id as users_id
    from part_region, users
   where part_region.region_id in(select region_id from region_structure) 
```

显然，这给了我一个关于 CTE 定义中对 users.region_id 的引用的错误。

如何在 SQL Server 中获得与从 Oracle 视图中获得的结果相同的结果？

**背景**

我正在将一个系统从运行在 Oracle 11g RDMS 上的系统转换为 SQL Server 2008。这个系统是一个相对较大的基于 Java EE 的系统，使用 JPA（Hibernate）从数据库中查询。

许多查询使用上述视图将返回的结果限制为适合当前用户的结果。如果我不能直接转换视图，那么转换将更加困难，因为我需要更改我们查询数据库的所有位置以获得相同的结果。

此视图引用的表的结构类似于：

```
USERS
  ID 
  REGION_ID

REGION
  ID
  NAME

REGION_RELATIONSHIP
  PARENT_REGION_ID
  REGION_ID

PART
  ID
  PARTNO
  DESCRIPTION

PART_REGION
  PART_ID
  REGION_ID 
```

所以，我们有区域，排列成层次结构。用户可以被分配到一个区域。一个部件可以分配到多个区域。用户可能只能看到分配给其区域的部件。这些区域引用了不同的地理区域：

```
World
  Europe
    Germany
    France
    ...
  North America
    Canada
    USA
      New York
      ... 
```

如果零件#123 被分配到美国地区，而用户被分配到纽约地区，那么用户应该能够看到该零件。

**更新：**我能够通过创建一个包含必要数据的单独视图来解决该错误，然后让我的主视图加入该视图。这使系统正常工作，但我还没有进行彻底的正确性或性能测试。我仍然愿意接受有关更好解决方案的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-26T07:23:07.900

我重新格式化了您的原始查询，以便我更容易阅读。

```
create or replace view user_part_v
as
select part_region.part_id, users.id as users_id
from part_region, users
where part_region.region_id in(
    select region_id
    from region_relation
    start with region_id = users.region_id
    connect by parent_region_id = prior region_id
); 
```

让我们检查一下这个查询中发生了什么。

```
select part_region.part_id, users.id as users_id
from part_region, users 
```

这是一种旧式连接，其中表是笛卡尔连接的，然后结果被后续的 where 子句减少。

```
where part_region.region_id in(
    select region_id
    from region_relation
    start with region_id = users.region_id
    connect by parent_region_id = prior region_id
); 
```

使用 connect by 语句的子查询使用`region_id`外部查询中的用户表来定义递归的起点。然后该`in`子句检查是否在递归查询的结果中找到了`region_id`for 。`part_region`此递归遵循表中给出的父子链接`region_relation`。

因此，将 in 子句与引用父级和旧式联接的子查询相结合意味着您必须考虑查询的目的是要完成什么并从那个方向接近它（而不仅仅是一个调整过的重新旧查询的排列）以便能够将其转换为单个递归 CTE。

如果将部件分配给沿区域层次结构的同一分支的多个区域，则此查询也将返回多行。例如，如果该部件同时分配给**北美**和**美国**，分配给**纽约**的用户将得到两行`users_id`相同`part_id`编号的返回。

* * *

鉴于 Oracle 视图和您给出的视图应该做什么的背景，我认为您正在寻找的是更像这样的东西：

```
create view user_part_v
as
with user_regions(users_id, region_id, parent_region_id) as (
    select u.users_id, u.region_id, rr.parent_region_id
    from users u 
    left join region_relation rr on u.region_id = rr.region_id
    union all
    select ur.users_id, rr.region_id, rr.parent_region_id
    from user_regions ur
    inner join region_relation rr on ur.parent_region_id = rr.region_id
)
select pr.part_id, ur.users_id
from part_region pr
inner join user_regions ur on pr.region_id = ur.region_id; 
```

请注意，我已经`users_id`在递归 CTE 的输出中添加了 ，然后只是对`part_region`表和 CTE 结果进行了简单的内部连接。

让我为你分解查询。

```
select u.users_id, u.region_id, rr.parent_region_id
from users u 
left join region_relation rr on u.region_id = rr.region_id 
```

这是我们递归的起始集。我们正在获取`region_relation`表格并将其与表格连接起来`users`，以便为每个用户获取递归的起点。该起点是用户被分配到的区域以及`parent_region_id`该区域的区域。`left join`在这里完成A并从`user`表中提取 region_id，以防用户被分配到最顶层的区域（这意味着该区域的表中不会有条目`region_relation`）。

```
select ur.users_id, rr.region_id, rr.parent_region_id
from user_regions ur
inner join region_relation rr on ur.parent_region_id = rr.region_id 
```

这是 CTE 的递归部分。我们获取每个用户的现有结果，然后为现有集合的父区域为每个用户添加行。这种递归一直发生，直到我们用完父母。`region_id`（即我们点击了表中没有条目的行`region_relationship`。）

```
select pr.part_id, ur.users_id
from part_region pr
inner join user_regions ur on pr.region_id = ur.region_id; 
```

这是我们获取最终结果集的部分。假设（正如我从您的描述中所做的那样）每个区域只有一个父区域（这意味着每个区域只有一行`region_relationship`）`region_id`，一个简单的连接将返回所有应该能够根据部件查看部件的用户`region_id`. 这是因为对于用户的分配区域，每个用户恰好返回一行，对于每个父区域，直到层次结构根，每个用户都返回一行。

**笔记：**

原始查询和这个查询都有一个限制，我想确保您知道。如果该部分被分配到层次结构中低于用户的区域（即，作为用户区域的后代的区域，例如被分配到**纽约**和用户到**美国**而不是相反的部分），用户不会看到该部分。该部分必须分配给用户分配的区域，或者区域层次结构中的更高区域。

`users_id`另一件事是，这个查询仍然表现出我上面提到的关于原始查询的情况，如果一个部分被分配到沿层次结构的同一分支的多个区域，那么对于和的相同组合将返回多行`part_id`。我这样做是因为我不确定您是否希望改变这种行为。

如果这实际上是一个问题并且您想消除重复项，那么您可以将 CTE 下面的查询替换为以下查询：

```
select p.part_id, u.users_id
from part p
cross join users u
where exists (
    select 1
    from part_region pr
    inner join user_regions ur on pr.region_id = ur.region_id;
    where pr.part_id = p.part_id
    and ur.users_id = u.users_id
); 
```

这会在`part`表和`users`表之间进行笛卡尔连接，然后只返回两者的组合在子查询的结果中至少有一行的行，这是我们试图去重的结果。

# jsf - 使用 j-security-check 验证附加参数

> ID：15286145
> 
> 赞同：0
> 
> 时间：2013-03-08T03:21:07.693
> 
> 标签：jsf, jsf-2, j-security-check

我已经实现了 Web 应用程序登录，使用`j-security-check`它接受参数`j_username`并`j_password`使用后台注册表进行身份验证。现在，我需要添加出生日期作为另一个参数，并且还需要使用此参数对用户进行身份验证。

有没有办法扩展 j-security-check 以接受其他参数？如果可能，我想避免在 servlet 过滤器中执行检查。

使用 WebSphere V8、MyFaces JSF 2.0、Servlet 3.0、基于自定义数据库的身份验证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:40:13.503

最简单的方法是将出生日期附加到实际日期`j_username`（即使用 JavaScript，然后在登录模块中手动拆分它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:53:52.550

替换`j_security_check`为通过`HttpServletRequest#login()`.

例如

```
<h:form>
    <h:inputText value="#{bean.username}" />
    <h:inputSecret value="#{bean.password}" />
    <h:inputText value="#{bean.birthdate}" />
    <h:commandButton value="Login" action="#{bean.login}" />
</h:form> 
```

和

```
public void login() {
    // Do your thing with birthdate here.

    // ...

    // Then perform programmatic login.
    try {
        request.login(username, password);
        // Login success. Redirect to landing page.
    } catch (ServletException e) {
        // Login fail. Return to login page.
    }
} 
```

此答案的第二部分对此进行了详细概述：[使用 j_security_check 在 Java EE / JSF 中执行用户身份验证](https://stackoverflow.com/questions/2206911/best-way-for-user-authentication-on-javaee-6-using-jsf-2-0/2207147#2207147)

# ios - 客户端-服务器用户认证

> ID：15286152
> 
> 赞同：1
> 
> 时间：2013-03-08T03:21:56.140
> 
> 标签：ios, security, rest, https, spring-security

**更新：**我之前没有提到我们想要的解决方案可以灵活地从我们的数据库中验证用户身份，或者通过要求其他服务器告诉我们用户是否经过身份验证。还值得一提的是，这些其他服务器不受我们控制，因此我们无法强制执行特定的用户模型。

我对 OAuth 和 OpenID 进行了长期而艰苦的阅读，但它们都不是适合我们情况的解决方案，并且会使用户更难处理。这是已经解决了一千次的问题，但我找不到解决方案。

我们正在寻找的是一个可以在 REST 服务服务器中使用的框架，以使用用户名和密码对用户（不涉及第三方客户端）进行身份验证。解决方案不得传递用户名和密码，除非是第一次登录并使用令牌进行进一步身份验证。尽管 OAuth 确实使用令牌，但它旨在允许第三方客户端访问服务提供者资源。这不是这里的情况，这些服务仅适用于我们自己的应用程序，唯一需要的是用户身份验证。

**你们认为最合适的解决方案是什么？**

**配置：**
- 提供 RESTful 服务的 Spring 服务器，我们的想法是使用带有一些用户管理和令牌管理框架的 Spring Security。
- 将对服务器进行 HTTPS 调用的 iOS 设备。

我们最终想要的是让设备发送登录请求并在登录成功时接收令牌，然后使用该令牌发出请求。就像 Facebook，不包括第三方参与。

有什么东西可以在我们的服务器中配置吗？还是我们应该考虑构建自己的代币管理、比较和生成软件？是否可以在不涉及存储 cookie 或重定向到页面的情况下将 Spring-Security 与 iOS 应用程序一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:31:12.963

OpenStack 提供了许多与开源云相关的项目...... Keystone 项目。这几乎正​​是您想要的。

您可能想在这里查看：

[http://docs.openstack.org/developer/keystone/](http://docs.openstack.org/developer/keystone/)

# java - 在 HTMLunit WebClient 中跨页面维护登录凭据

> ID：15286153
> 
> 赞同：4
> 
> 时间：2013-03-08T03:22:02.163
> 
> 标签：java, webclient, htmlunit

[我的问题与此页面上](https://stackoverflow.com/questions/8388546/passing-basic-auth-credentials-with-every-request-with-htmlunit-webclient)的问题非常相似，只是我无权访问远程服务器，也不知道它是如何进行身份验证的。

我正在尝试跨网页保持登录状态，我可以使用 webclient.getPage() 请求这些网页。我正在访问的网站使用带有用户名、密码对的标准登录表单。我之前所做的是创建一个小函数来为我做到这一点：

```
public static HtmlPage logIn(HtmlPage page) {
    HtmlPage nextpage = null;
    final HtmlForm form = page.getFormByName("login_form");
    final HtmlSubmitInput button = form.getInputByValue("Login");
    final HtmlTextInput username = form.getInputByName("username");
    final HtmlPasswordInput password = form.getInputByName("password");
    username.setValueAttribute("user_foo");
    password.setValueAttribute("pwd_bar");      

    // hit submit button and return the requested page
    try {
        nextpage = button.click();
    } catch (IOException e) {
        e.printStackTrace();
    }
        return nextpage;
} 
```

这样做的问题是我必须手动搜索此函数返回的页面才能找到我想要的页面的链接。更麻烦的是，这仅适用于登录后的页面，而不适用于其他页面。

相反，我想在浏览器模拟器“webclient”中保存登录信息，以便我可以无缝访问站点内的任何受保护页面。除了尝试上一个问题（上面链接）中的解决方案之外，我还尝试了以下解决方案但没有成功：

```
private static void setCredentials(WebClient webClient) {
    String username = "user_foo";
    String password = "pwd_bar";
    DefaultCredentialsProvider creds = (DefaultCredentialsProvider) webClient.getCredentialsProvider();//new DefaultCredentialsProvider();
    try {
        creds.addCredentials(username, password);
    webClient.setCredentialsProvider(creds);
    }
    catch (Exception e){
        System.out.println("!!! Problem login in");
        e.printStackTrace();            
} 
```

编辑：这是显示我如何使用 webClient 的主要功能：

公共静态 void main(String[] args) 抛出异常 {

```
 // Create and initialize WebClient object
    WebClient webClient = new WebClient(/*BrowserVersion.CHROME_16*/);
    webClient.setThrowExceptionOnScriptError(false);
    webClient.setJavaScriptEnabled(false);
    webClient.setCssEnabled(false);
    webClient.getCookieManager().setCookiesEnabled(true);
    setCredentials(webClient);

    HtmlPage subj_page = null;
    //visit login page and get it
    String url = "http://www.website.com/index.php";
    HtmlPage page = (HtmlPage) webClient.getPage(url);
    HtmlAnchor anchor = null;
    page = logIn(page);

    // search for content
    page = searchPage(page, "recent articles");     

    // click on the paper link      
    anchor = (HtmlAnchor) page.getAnchorByText("recent articles");
    page = (HtmlPage) anchor.click();

    // loop through found articles
    //{{{page
    int curr_pg = 1;
    int last_pg = 5;        
    page = webClient.getPage(<starting URL of the first article>); // such URLs look like: "www.website.com/view_articles.php?publication_id=17&page=1"
    do {
        // find sections on this page; 
        List <HtmlDivision> sections = new ArrayList<HtmlDivision>();
        List <HtmlDivision> artdivs = new ArrayList<HtmlDivision>();
        List <HtmlDivision> tagdivs = new ArrayList<HtmlDivision>();
        sections = (List<HtmlDivision>) page.getByXPath("//div[@class='article_section']");
        artdivs = (List<HtmlDivision>) page.getByXPath("//div[@class='article_head']");
        tagdivs = (List<HtmlDivision>) page.getByXPath("//div[@class='article_tag']");          

        int num_ques = sections.size();
        HtmlDivision section, artdiv, tagdiv;

        // for every section, get its sub-articles
        for (int i = 0; i < num_ques; i++) {
            section = sections.get(i);
            artdiv = artdivs.get(i);
            tagdiv = tagdivs.get(i);

            // find the sub-article details and print to xml file
            String xml = getXMLArticle(artdiv, section.asText(), tagdiv);
            System.out.println(xml);
            System.out.println("-----------------------------");
        }
        //remove IllegalMonitorStateException *
        synchronized (webClient) { 
            webClient.wait(2000); // wait for 2 seconds             
        }

        String href = "?publication_id=17&page=" + curr_pg;
        anchor = page.getAnchorByHref(href);            
        page = anchor.click();
        System.out.println("anchor val: " + anchor.getHrefAttribute());
        curr_pg++;
    } while (curr_pg < last_pg);
    //}}}page

    webClient.closeAllWindows();
} 
```

其他信息：我没有关于远程站点服务器身份验证机制的信息，因为我无权访问它，但你的帮助会很棒。谢谢！

# javascript - 从javascript文字中获取第一个对象

> ID：15286159
> 
> 赞同：0
> 
> 时间：2013-03-08T03:22:38.353
> 
> 标签：javascript

假设我在这里有这个对象：

```
var items = [
    {name:"Foo"},
    {name:"Bar"},
    {name:"foo"},
    {name:"bar"},
    {name:"foobar"},
    {name:"barfoo"}
]; 
```

由于每个对象中只有一个项目，我只想返回它们的列表。

我试过这个：

```
var getSingle = function(rows){
    var items = [];
    //This should only return one column
    for (var i = 0; i < rows.length; i++) {
        var r = rows[i];
        var c = 0;
        for (var n in r) {
            if(c == 0)
                items.push(r[n]);
            c += 1;
        }
    }
    return items;
} 
```

但这似乎不起作用。有什么想法吗？

PS。`name`可以是任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:24:24.207

这通常使用该`map`方法完成，请参阅[此处的文档。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

```
 var justNamesArray = items.map(function(elem) { return elem.name}); 
```

[文档页面](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)还包含一个有用的shim，这是一种将其包含在代码中以支持旧浏览器的方法。

伴随您在编辑中的请求，如果您只想获取包含此属性的那些，则有一个漂亮的[过滤器](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)方法。

```
 var valuesWithNamePropert= items.filter(function(elem) { return elem.hasOwnProperty("name")}); 
```

您可以将两者链接以获得

```
var justNamesWhereContains = items.filter(function(elem) { return elem.hasOwnProperty("name")}).
                                  .map(function(elem) { return elem.name}); 
```

这种方法（映射和过滤）在支持一阶函数（如 JavaScript）的语言中*非常*常见。

一些库（例如[underscore.js](http://underscorejs.org/#pluck) ）也提供了一种直接执行此操作的方法，例如在下划线中调用该方法`pluck`。

**编辑：**在您指定属性可以在数组中的对象之间更改后，您可以使用以下内容：

```
var justReducedArray = items.map(function(elem) { for(i in elem){ return elem[i]}}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T04:05:59.147

我使用了与其他方法不同的方法，因为我做了两个假设：

1/您不知道密钥的名称，但每个项目只有一个密钥 2/每个项目的密钥都可以不同 我会给你第二个选择，第二个假设是：2/所有项目都有只有一把钥匙，但对所有人来说都是一样的

第一个选项：

```
var items = [
        {name:"Foo"},
        {name:"Bar"},
        {name:"foo"},
        {name:"bar"},
        {name:"foobar"},
        {name:"barfoo"}
    ];

// object keys very simple shim
Object.keys = Object.keys || function(o) {  
    var result = [];  
    for(var name in o) {  
        if (o.hasOwnProperty(name))  
          result.push(name);  
    }  
    return result;  
};

// function to get the value of every first keys in an object
// just remember that saying "first key" does not make real sense
// but we begin with the assumption that there IS ONLY ONE KEY FOR EVERY ITEM
// and this key is unknown
function getFirstKeysValues(items) {
    var i = 0, len = items.length, item = null, key = null, res = [];
    for(i = 0; i < len; i++) {
        item = items[i];
        key = Object.keys(item).shift();
        res.push(item[key]);
    }

    return res;
}

console.log(getFirstKeysValues(items)); //["Foo", "Bar", "foo", "bar", "foobar", "barfoo"] 
```

第二个选项将使用映射，因为我们相信每个孩子都拥有相同的密钥（我不会使用这个，因为我不太喜欢 .map - 兼容性）：

```
var items = [
        {name:"Foo"},
        {name:"Bar"},
        {name:"foo"},
        {name:"bar"},
        {name:"foobar"},
        {name:"barfoo"}
    ];

// object keys very simple shim
Object.keys = Object.keys || function(o) {  
    var result = [];  
    for(var name in o) {  
        if (o.hasOwnProperty(name))  
          result.push(name);  
    }  
    return result;  
};

// function to get the value of every first keys in an object
// just remember that saying "first key" does not make real sense
// but we begin with the asumption that there IS ONLY ONE KEY FOR EVERY ITEM
// and this key is unknown but the same for every child
function getFirstKeysValues(items) {
    var key = items.length > 0 ? Object.keys(items[0]).shift() : null;

    items = items.map(function (item) {
        return item[key];
    });

    return items;
}

console.log(getFirstKeysValues(items)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T03:26:56.117

您`var items = []`正在隐藏已包含数据的 items 参数。只是通过查看您的代码，我认为也许应该调用您的参数`rows`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T03:35:11.960

您可以覆盖项目的 Array.toString 方法，因此使用 String(items) 或 alert(items) 或 items+='' 都将返回您想要的字符串 -

```
var items = [{name:"Foo"}, {name:"Bar"},{name:"foo"},
{name:"bar"},{name:"foobar"},{name:"barfoo"}];

items.toString= function(delim){
    delim=delim || ', ';
    return this.map(function(itm){
        return itm.name;
    }).join(delim);
} 
```

字符串（项目）

/* 返回值: (String) Foo, Bar, foo, bar, foobar, barfoo */

而不是默认的字符串-'[object Object],[object Object],[object Object],[object Object],[object Object],[object Object]'

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-08T04:05:38.490

如果你在一个 >= IE9 的世界中，[Object.keys()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)就可以解决问题。它对对象数组不是非常有用*，*但它有助于数组的迭代（您将使用 Array.forEach 正确迭代数组，但随后您将使用 Object.keys(ob)[0] 方法获取对象上第一个属性的值。例如：

```
var someArr = [{ prop1: '1' },{ prop2: '2' },{ prop3: '3' }];
var vals = [];
someArr.forEach( function(obj) {
    var firstKey = Object.keys(obj)[0]; 
    vals.push(obj[firstKey]);
});
//vals now == ['1','2','3'] 
```

显然这不是空安全的，但它应该为您提供原始数组中每个对象的第一个属性的值的数组。快说3倍。这也解耦了对第一个属性的名称的任何依赖——如果第一个属性的名称很重要，那么它对 forEach 迭代的更改是微不足道的。

# ruby-on-rails-3.2 - Rails 3.2.11 应用程序中的未初始化常量错误

> ID：15286161
> 
> 赞同：0
> 
> 时间：2013-03-08T03:22:56.197
> 
> 标签：ruby-on-rails-3.2

这在 Rails 2.3.11 中有效。我将应用程序升级到 Ruby 2.0.0 和 Rails 3.2.11。一切正常，除了我的支票邮寄。

在 check_mailings_controller.rb 中：

```
class CheckMailingsController < ApplicationController
  ...
  def send_mail
    CheckEmail.send_check_mail
    ...
  end
end 
```

在 /lib/check_email.rb 中：

```
class CheckEmail
  def self.send_check_mail
    ...
  end
end 
```

我收到的错误消息：

```
uninitialized constant CheckMailingsController::CheckEmail 
```

应用程序启动时不应该初始化类吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:29:12.150

只需添加

```
require "check_email" 
```

到`CheckMailingsController.rb`文件的顶部。

# python - 一致地对 dsv（文本文件）中的列进行排序，其中每条记录都有不同的列顺序

> ID：15286164
> 
> 赞同：0
> 
> 时间：2013-03-08T03:23:18.213
> 
> 标签：python, database, excel

=== 关于结束问题的评论 ====

虽然示例中的数据已本地化，但最终脚本对于拥有一组复杂 xml 文件以转换为文本数据库的任何人都非常有用，因为该过程将处理任何输入 xml，而不管其归属如何。

=== 新信息 ==== 我已经能够在初始过程中生成所有标签的列表，但是然后重新创建 tag::text 对是不可行的，因为它必须运行 1000 个 xml，生成一个唯一的排序列表，然后重新读取 xml 并开始创建文本数据集。

因此，如果给出以下内容（或任何带有唯一分隔符的文本），我可以遍历并捕获标签吗？

```
:;:^1^L:\Vector_Data\Administrative\Boundaries\Federal_Govt\COM_ELB_region.shp_BaseMetadata.xml^citeinfo::None^descript::None^timeperd::None^status::None^distinfo::None^dataqual::None^cntinfo::None^metainfo::None^uniqueid::None^title::COM_ELB_region.shp^origin::None^custod::Tablelands Regional Council ^jurisdic::None^;:; 
```

（在这种情况下 ^ 是列分隔符， :: 是标签::文本分隔符）

我需要它给我一个标签列表，如 [citeinfo、timeprd、status 等]，然后运行并创建另一个只有文本的数据集。

我将强调这不是本地化的，因为该解决方案将适用于任何需要解构的 xml。

=== 原始问题如下

我通过构建许多不同的 xml 样式文档创建了一个文本文件。我将 tag::text 记录在一起，因为每个文件的标签顺序略有不同。关键是原始 xml 文件的名称。

是否可以从数据中重建 excel 或“csv”，以便所有文件的列都正确排序。

[此处](http://www.excelforum.com/excel-programming-vba-macros/905025-import-txt-to-table-issue-with-new-lines-created-when-not-eol.html?p=3150342#post3150342)提供了Excel 示例和原始数据。我使用的脚本[在这里](https://stackoverflow.com/questions/15283801/text-file-creation-issue-where-new-lines-created-when-not-really-eol)。

谢谢，

==== 从输出中获取标签列表很困难，因为您需要逐行搜索标签，如果不重复则添加到列表中。所以我决定在解析xml时生成标签列表更容易。这很有效，但是当在 xml 中找不到有序列表中的标签时，我遇到了告诉脚本该怎么做的问题。请参阅下面的代码。

```
#-------------------------------------------------------------------------------
# Name:        Convert xml data to csv with anzlic tagged data kept seperate
# Purpose:  Also has an excel template to convert the data into standard columns
#
# Author:      georgec@atgis.com.au
#
# Created:     05/03/2013
# Copyright:   (c) ATGIS. georgec 2013
# Licence:     Creative Commons
#-------------------------------------------------------------------------------

import os, xml, shutil, datetime
from xml.etree import ElementTree as et
from lxml import etree

SourceDIR=r'L:\Data_Admin\XML_CSV_Convertor\test_data'
#SourceDIR=os.getcwd()
rootDir=os.getcwd()
log_name='t2_'
xmllist=[]
xmltaglist=[]
x=0

def locatexml(SourceDIR,x, rootDir, xmllist, xmltaglist):
    for root, dirs, files in os.walk(SourceDIR, topdown=False):
        for fl in files:
            currentFile=os.path.join(root, fl)
            ext=fl[fl.rfind('.')+1:]
            if ext=='xml':
                xmllist.append(currentFile)
                print currentFile
                x+=1
##            try:
                processxmltag(currentFile,x, rootDir, xmltaglist)
##            except:
##                print "Issue with file: "+ currentFile
##                log=open(rootDir+'\\'+log_name+'issue_xml_log.txt','a')
##                log.write(str(x)+'^'+currentFile+'\n')
##                log.close

    print "finished"
    return xmllist, x, currentFile

def processxmltag(currentFile,x, rootDir, xmltaglist):
    from collections import OrderedDict
    with open(currentFile) as f:
        tree = etree.parse(f)
    for tagn in tree.iter(tag=None):
        if tagn.tag not in xmltaglist:
            print tagn.tag
            xmltaglist.append(tagn.tag)
        else:
            print 'tag exists: ' + str(tagn.tag)
    return xmltaglist.sort()

def processxmlfile(xmllist, xmltaglist):
    seperator='^'
    for fl in xmllist:
        with open(fl) as f:
            tree = etree.parse(f)
            if 'anzmeta' in str(tree.getroot()):
                log=open(rootDir+'\\'+log_name+'anzmeta_xml_log.txt','a')
                log.write(':;:'+seperator+str(x)+seperator+fl+seperator)
                print xmltaglist
                for xmltag in xmltaglist:
                    if xmltag not in tree:
                        print str(xmltag)+"::DoesNotExist"
                        log.write(str(xmltag)+"::DoesNotExist"+seperator)
                    for element in tree.iter(xmltag):
                        #print element[x]
                        for child in element.getchildren():
                            print "{0.tag}: {0.text}".format(child)
                            log.write("{0.tag}".format(child)+"::"+"{0.text}".format(child).replace('\n','')+seperator)
                log.write('^;:;\n')
                log.close
            else:
                print fl+" not an anzlic metadata file...logging seperately"
                log=open(rootDir+'\\'+log_name+'non_anzmeta_xml_log.txt','a')
                log.write(':;:'+seperator+str(x)+seperator+fl+seperator)
                for xmltag in xmltaglist:
                    for element in tree.iter(xmltag):
                        #print element[x]
                        for child in element.getchildren():
                            print "{0.tag}: {0.text}".format(child)
                            log.write("{0.tag}".format(child)+"::"+"{0.text}".format(child).replace('\n','')+seperator)
                log.write('^;:;\n')
                log.close

locatexml(SourceDIR,x, rootDir,xmllist, xmltaglist) #run locate xml and process to get sorted list of all tags
processxmlfile (xmllist, xmltaglist) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:26:24.623

您可以简单地按字母顺序输出 tag::text 对。然后，您将保证具有一致的顺序，并且如果所有记录具有相同的标签集，它们将处于相同的顺序。

# ios - iOS 6 导航栏未正确居中

> ID：15286165
> 
> 赞同：1
> 
> 时间：2013-03-08T03:23:32.723
> 
> 标签：ios, uinavigationbar

我的导航栏有问题。我正在设置自定义字体，并且居中不正确，后退按钮将所有内容向右移动。

```
UILabel *navLabel = [[UILabel alloc] initWithFrame:CGRectMake(0,0, 300, 100)];
navLabel.backgroundColor = [UIColor clearColor];
navLabel.text = dataFromOtherView.text;
navLabel.textColor = [UIColor whiteColor];
navLabel.shadowColor = [UIColor colorWithWhite:0.0 alpha:1.0];
navLabel.shadowOffset = CGSizeMake(0, 0);
navLabel.font = [UIFont fontWithName:@"Trebuchet MS" size:22.0];
navLabel.textAlignment = NSTextAlignmentCenter;
self.navigationItem.titleView = navLabel; 
```

![在此处输入图像描述](../Images/934f1d14d0187ff9d2353e5635a442f8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:50:07.917

看起来标签太大了，标签左侧和后退按钮右侧之间没有足够的“开放/灵活空间”。尝试在创建 UILabel 时减小它的宽度。

# ruby-on-rails - 在 cancan 中设置用户角色

> ID：15286167
> 
> 赞同：0
> 
> 时间：2013-03-08T03:23:36.880
> 
> 标签：ruby-on-rails, cancan

我是 Rails 的新手，在弄清楚如何创建用户角色然后让它与 Cancan 一起工作时遇到了麻烦。我正在关注这个和 cancan wiki 上的轨道。我不明白要做的是定义每个用户角色，例如管理员、注册成员和访客可以访问的内容。我不确定我的编码是否正确。我还遇到了“未定义的局部变量或方法‘roles_mask’”错误。

我不相信我在以下文件中正确设置了角色。如果有帮助的话，我已经从头开始创建用户身份验证。到目前为止，我拥有的部分是画廊和用户资料。ATM 如果我创建一个新帐户并选择下拉框选项“管理员”，我没有任何管理员权限。我仍然无法访问页面。

**能力.rb**

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user

    if @user && @user.role?(:admin)
      can :manage, :all
    else
      can :read, :all 
    end

    if user.role? :user
      can :manage, Profile
    end

    if user.role? :admin
      can :manage, Profile
    end
  end
end 
```

**用户.rb**

```
 ROLES = %w[admin user guest banned]

  def roles=(roles)
    self.roles_mask = (roles & ROLES).map { |r| 2**ROLES.index(r) }.sum
  end

  def roles
    ROLES.reject { |r| ((roles_mask || 0) & 2**ROLES.index(r)).zero? }
  end

  def role?(role)
    roles.include? role.to_s
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:29:44.573

在你的`ability.rb`档案中，

```
if @user && @user.role?(:admin) 
```

应该是

```
if user && user.role?(:admin) 
```

# python - 在python中将.rrd文件转换为json

> ID：15286169
> 
> 赞同：4
> 
> 时间：2013-03-08T03:23:52.973
> 
> 标签：python, rrd, ganglia

是否有任何 python 模块可用于将 .rrd 文件转换为 json 格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T06:19:47.497

以下是我尝试从 rrd 文件生成 json 的代码。

```
#!/usr/bin/python
import rrdtool
import sys

def printMetric():

  args = ["/var/lib/ganglia/rrds/__SummaryInfo__/cpu_system.rrd", "AVERAGE"]
  rrdMetric = rrdtool.fetch(args)

  time = rrdMetric[0][0]
  step = rrdMetric[0][2]

  sys.stdout.write("  {\n    \"Key1\":\"" + rrdMetric[1][0] +\
                   "\",\n    \"Key2\":\"" + "abcd" +\
                   "\",\n    \"metric_name\":\"" + "cpu_system" + "\",\n")  

  firstDP = True
  sys.stdout.write("    \"datapoints\":[\n")
  for tuple in rrdMetric[2]:
    if tuple[0] is not None:
      if not firstDP:
        sys.stdout.write(",\n")
      firstDP = False
      sys.stdout.write("      [")
      sys.stdout.write(str(tuple[0]))
      sys.stdout.write(",")
      sys.stdout.write(str(time))
      sys.stdout.write("]")
    time = time + step
  sys.stdout.write("\n    ]\n  }")

printMetric() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T04:29:24.653

它不会有内置的库模块。

# javascript - Javascript/jquery 在写入变量的 div 图像之前确认它们的预图像加载

> ID：15286171
> 
> 赞同：0
> 
> 时间：2013-03-08T03:24:08.350
> 
> 标签：javascript, jquery, html, css

我有一个像这样的 javascript/jquery 变量：

```
var divs='<div><img src="link1"></div><div><img src="link2"></div><div><img src="link3"></div>' 
```

最后`div`，我使用其他一些 jquery 库将这些 s 插入到我的容器中。但我想在将它们插入容器之前加载这些图像。

因为我希望它在附加之前进行检查，所以 jquery`.load`在这里不起作用。

```
$('.img')
    .load(function(){
        $('#result1').text('Image is loaded!'); 
    })
    .error(function(){
        $('#result1').text('Image is not loaded!');
    }); 
```

那么我还有哪些其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:46:24.360

在页面中的某个位置预加载图像并使其隐藏。现在它会立即加载，不会延迟......

片段-EX：

```
<html>
<body>
<!-- your code -->

<img src="link1" style="visibility:hidden"/>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:27:53.643

查看[onImagesLoad 插件。](http://www.cirkuit.net/projects/jquery/onImagesLoad/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T03:41:38.160

你应该尝试：

```
$('img')
    .load(function(){
        $('#result1').text('Image is loaded!'); 
    })
    .error(function(){
        $('#result1').text('Image is not loaded!');
    }); 
```

`$('.img')`选择器所有元素都有类，名称为：'img'。

`$('img')`选择器所有`<img> </img>`元素

# vb.net - 在linux上生成RSA公钥，转base64，导入VB.NET

> ID：15286181
> 
> 赞同：0
> 
> 时间：2013-03-08T03:25:07.387
> 
> 标签：vb.net, rsa

我想将一个字符串硬编码到一个 VB.NET 程序中，该程序包含我在 linux 计算机上生成的 RSA 公钥的 base64 字符串表示。

在 linux 盒子上：

*   我使用 ssh-keygen 生成密钥对
*   我使用 PHP 使用 base64_encode() 将 .ssh/id_rsa.pub 转换为 base64

在 VB 代码中，我将上面生成的输出硬编码为字符串变量：

```
Dim publicKey As String = "QUFBQUIzTnphQzF5YzJFQUFBQUJJd0FBQVFFQTRrNHNPOFhyajhJUkM4WGhEMVJQYlhJbUROTnVwdEpvUEtYNzNhcHc1M0NFUGE3VVNRY0U2SXhyNENWM2FhVXBtR1Fsb1I4akNLVkNoUnhzOUVnT3JQcVNGMTFjL3ZPNzluMXdkU1VWZjhreC9uY1NiV25UUXBtb1paNlN5ZUM3ekhMbWh1Z0o5OWdsVjB3bXBhTXpPeitHa0JBeFBPYlV0MzFYalMxMlBzM0ZUZFBla2s5T0ptMFJxc1plM3krbHU2UURZbDEyejJyTU9lbFhJS2IxSUZ1SnF6SThqL2Y4Q3V2dGxCSmxhelRBWlkyekF1WTZWMXU4c2JnUmE2MTBxMzM3dUdMODErbytCUkRzS0dwN0xBRmRwM1R2ekE3MDZPeFVSSEF0YmRZOVkzaXFISFFzQ3ZQWXBqcVQ0MHVlZ1RHY05jd2JCdjZxa2xlckk2K25Ndz09"

Dim myRsa As New RSACryptoServiceProvider()
myRsa.ImportCspBlob(Convert.FromBase64String(publicKey)) 
```

我收到有关“提供程序的错误版本”的运行时异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T19:16:45.463

这是我如何转换它（使用[phpseclib，一个纯 PHP RSA 实现](http://phpseclib.sourceforge.net/)）：

```
<?php
include('Crypt/RSA.php');

$rsa = new Crypt_RSA();

$rsa->loadKey(base64_decode('QUFBQUIzTnphQzF5YzJFQUFBQUJJd0FBQVFFQTRrNHNPOFhyajhJUkM4WGhEMVJQYlhJbUROTnVwdEpvUEtYNzNhcHc1M0NFUGE3VVNRY0U2SXhyNENWM2FhVXBtR1Fsb1I4akNLVkNoUnhzOUVnT3JQcVNGMTFjL3ZPNzluMXdkU1VWZjhreC9uY1NiV25UUXBtb1paNlN5ZUM3ekhMbWh1Z0o5OWdsVjB3bXBhTXpPeitHa0JBeFBPYlV0MzFYalMxMlBzM0ZUZFBla2s5T0ptMFJxc1plM3krbHU2UURZbDEyejJyTU9lbFhJS2IxSUZ1SnF6SThqL2Y4Q3V2dGxCSmxhelRBWlkyekF1WTZWMXU4c2JnUmE2MTBxMzM3dUdMODErbytCUkRzS0dwN0xBRmRwM1R2ekE3MDZPeFVSSEF0YmRZOVkzaXFISFFzQ3ZQWXBqcVQ0MHVlZ1RHY05jd2JCdjZxa2xlckk2K25Ndz09'));
$rsa->setPublicKey();

$publickey = $rsa->getPublicKey(CRYPT_RSA_PUBLIC_FORMAT_XML);

echo $publickey; 
```

# java - Android：读取文本文件并存储到 ArrayList

> ID：15286182
> 
> 赞同：4
> 
> 时间：2013-03-08T03:25:25.533
> 
> 标签：java, android, string, arraylist

所以我试图从android中的文件中读取。我初始化了所有东西，但我仍然得到一个**NullPointerException**。我错过了什么吗？

*****在第 25 行***收到**错误**。**

 **```
public class Read {
    private ArrayList<String> contents;
    private final String filename = "saves/user.txt";

    public Read(Context context) {
        try {
            contents = new ArrayList<String>();
            InputStream in = context.getAssets().open(filename);

            if (in != null) {
                // prepare the file for reading
                InputStreamReader input = new InputStreamReader(in);
                BufferedReader br = new BufferedReader(input);
                String line = br.readLine();
                while (line != null) {
                    contents.add(line);
                }
                in.close();
            }else{
                System.out.println("It's the assests");
            }

        } catch (IOException e) {
            System.out.println("Couldn't Read File Correctly");
        }
    }

    public ArrayList<String> loadFile() {
        return this.contents;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T03:32:20.877

这样做

```
 while ((line=reader.readLine()) != null) 
 {
    contents.add(line);
 } 
```**

# node.js - 在我的 nodejs 服务器中防止 xhr 攻击

> ID：15286184
> 
> 赞同：0
> 
> 时间：2013-03-08T03:25:35.613
> 
> 标签：node.js, xmlhttprequest, xss

我正在开发一个 nodejs 服务器，它将与客户端移动应用程序交互。我在服务器上遇到了一些称为 XSS 和 XHR 的攻击。我遇到了一个名为 node-validator 的模块，它对于处理和验证输入很有用。我需要关于 XSS 和 XHR 攻击是否具有相同效果以及该模块是否对两者都有用的想法。任何关于此的想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:28:43.727

如果您使用的是 expressjs/connect，那么在 connect 中有一个“内置” [csrf 中间件](http://www.senchalabs.org/connect/middleware-csrf.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T03:56:53.197

XSS 攻击也称为跨站点脚本攻击。当攻击者利用未经过滤的输入字段将 javascript 注入应用程序时。一个常见的例子是，如果攻击者设法将 javascript 注入到博客文章评论中。然后（如果清理不当）每次有人查看评论时都会执行。[可以在此处](http://allfacebook.com/hacker-makes-facebook-look-like-myspace-gets-hired_b33405)阅读此类攻击的示例。

XHR 攻击只是 XSS 攻击的扩展，其中注入的脚本使 AJAX 回调到域服务器。

实际上，防止这些类型的攻击相当容易。通过验证您的输入（去除 HTML 标记）并转义特殊字符，如“、'、` 等，您可以防止这种情况发生。我绝对建议您为此使用外部库，因为您可能会自己错过一些东西。

另外，这是一个类似的问题，可能会对您有所帮助。[在将用户输入添加到 Javascript 中的 DOM 之前对其进行清理](https://stackoverflow.com/questions/2794137/sanitizing-user-input-before-adding-it-to-the-dom-in-javascript)

# opengl - Haskell OpenGL 和 GLUT 不明确的发生

> ID：15286187
> 
> 赞同：3
> 
> 时间：2013-03-08T03:25:58.853
> 
> 标签：opengl, haskell, glut, haskell-platform

我正在尝试 OpenGL 教程。我正在运行安装了 Haskell 平台的 macosx

```
import Graphics.Rendering.OpenGL
import Graphics.UI.GLUT

main :: IO ()
main = do
  (progname, _) <- getArgsAndInitialize
  createWindow "Hello World"
  displayCallback $= display

display :: IO ()
display = do
  clear [ ColorBuffer ]
  flush 
```

这是我得到的错误，“clear”、“ColorBuffer”和“Flush”重复以下内容

```
Hello_World.hs:8:19:
    Ambiguous occurrence `$='
    It could refer to either `Graphics.Rendering.OpenGL.$=',
                             imported from `Graphics.Rendering.OpenGL' at Hello_World.hs:1:1-32
                             (and originally defined in `Data.StateVar')
                          or `Graphics.UI.GLUT.$=',
                             imported from `Graphics.UI.GLUT' at Hello_World.hs:2:1-23
                             (and originally defined in `OpenGL-2.2.3.1:Graphics.Rendering.OpenGL.GL.StateVar') 
```

这段代码以前可以工作，从那以后我通过 cabal install 和 homebrew 安装了一些软件包。

因为我认为它可能与这里的包有关，所以这里是“ghc-pkg list”（抱歉这个块，只是额外的信息可能会有所帮助）

```
Cabal-1.14.0
   GLUT-2.1.2.1
   HTTP-4000.2.5
   HUnit-1.2.5.1
   OpenGL-2.2.3.1
   QuickCheck-2.5.1.1
   array-0.4.0.0
   async-2.0.1.3
   base-4.5.1.0
   bin-package-db-0.0.0.0
   binary-0.5.1.0
   bytestring-0.9.2.1
   cgi-3001.1.7.4
   containers-0.4.2.1
   deepseq-1.3.0.0
   directory-1.1.0.2
   extensible-exceptions-0.1.1.4
   fgl-5.4.2.4
   filepath-1.3.0.0
   ghc-7.4.2
   ghc-prim-0.2.0.0
   haskell-platform-2012.4.0.0
   haskell-src-1.0.1.5
   haskell2010-1.1.0.1
   haskell98-2.0.0.1
   hoopl-3.8.7.3
   hpc-0.5.1.1
   html-1.0.1.2
   integer-gmp-0.4.0.0
   mtl-2.1.2
   network-2.3.1.0
   old-locale-1.0.0.4
   old-time-1.1.0.0
   parallel-3.2.0.3
   parsec-3.1.3
   pretty-1.1.1.0
   primitive-0.5.0.1
   process-1.1.0.1
   random-1.0.1.1
   regex-base-0.93.2
   regex-compat-0.95.1
   regex-posix-0.95.2
   rts-1.0
   split-0.2.1.1
   stm-2.4
   syb-0.3.7
   template-haskell-2.7.0.0
   text-0.11.2.3
   time-1.4
   transformers-0.3.0.0
   unix-2.5.1.1
   vector-0.10.0.1
   xhtml-3000.2.1
   zlib-0.5.4.0
/Users/james/.ghc/x86_64-darwin-7.4.2/package.conf.d
   Cabal-1.16.0.3
   GLURaw-1.3.0.0
   ObjectName-1.0.0.0
   OpenGL-2.6.0.1
   OpenGLRaw-1.3.0.0
   StateVar-1.0.0.0
   Tensor-1.0.0.1
   aeson-0.6.1.0
   ansi-terminal-0.6
   ansi-wl-pprint-0.6.6
   attoparsec-0.10.4.0
   blaze-builder-0.3.1.0
   blaze-html-0.5.1.3
   blaze-markup-0.5.1.4
   cairo-0.12.4
   cpphs-1.16
   data-default-0.5.0
   dlist-0.5
   fay-0.14.1.0
   fay-base-0.14.1.0
   ghc-paths-0.1.0.9
   gio-0.12.4
   glib-0.12.4
   gtk-0.12.4
   hashable-1.2.0.5
   haskeline-0.7.0.3
   haskell-lexer-1.0
   haskell-src-exts-1.13.5
   hostname-1.0
   language-ecmascript-0.10
   language-haskell-extract-0.2.4
   optparse-applicative-0.5.2.1
   pango-0.12.4
   pretty-show-1.5
   safe-0.3.3
   terminfo-0.3.2.5
   test-framework-0.8
   test-framework-hunit-0.3.0
   test-framework-th-0.2.4
   uniplate-1.6.10
   unordered-containers-0.2.3.0
   utf8-string-0.3.7
   xml-1.3.12 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:10:34.350

有两个问题。我认为这个错误是由于我在安装 OpenGL 时安装了它，第二个是我的代码缺少“mainLoop”，所以程序会很快停止。我刚刚重新安装了haskell平台。

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T03:30:06.067

您已经导入了这两个模块

```
import Graphics.Rendering.OpenGL
import Graphics.UI.GLUT 
```

其中每个导出一个名为`($=)`. 您应该弄清楚要使用哪个并可能隐藏其中一个，例如

```
import Graphics.Rendering.OpenGL hiding (($=)) 
```

或使用`qualified`其中一个或两个库的导入。

# c - GDB：地址越界时如何在 $eax 中找到“密码”？

> ID：15286190
> 
> 赞同：0
> 
> 时间：2013-03-08T03:26:11.503
> 
> 标签：c, debugging, passwords, gdb

当我在 GDB 中取消与将程序输入与“密码短语”进行比较相关的功能时，我在这里有输出。我知道真正的“密码”在 $eax 中，但是当我尝试检查 $eax 时，我得到地址超出范围的错误。我可以做些什么来检查 $eax？

```
Dump of assembler code for function s:
   0x08048444 <+0>:     push   %ebp
   0x08048445 <+1>:     mov    %esp,%ebp
   0x08048447 <+3>:     mov    0x8(%ebp),%edx
   0x0804844a <+6>:     mov    $0x0,%eax
   0x0804844f <+11>:    cmpb   $0x0,(%edx)
   0x08048452 <+14>:    je     0x804845d <s+25>
   0x08048454 <+16>:    add    $0x1,%eax
=> 0x08048457 <+19>:    cmpb   $0x0,(%edx,%eax,1)
   0x0804845b <+23>:    jne    0x8048454 <s+16>
   0x0804845d <+25>:    pop    %ebp
   0x0804845e <+26>:    ret 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:12:14.317

```
cmpb $0x0,(%edx,%eax,1) 
```

意思是“`0`与字节比较`edx + eax * 1`”。

您需要查看 edx ( `p/x $edx`)*和*eax ( `p/x $eax`) 以查看您正在寻址的字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:41:53.907

密码在**EDX**而不是**EAX**中。所以你想跑

```
(gdb) p (char*)$edx 
```

查看以 null 结尾的字符串的内容。

您可以说您需要**EDX**，因为代码将函数的第一个参数移入其中：

```
0x08048447 <+3>:     mov    0x8(%ebp),%edx 
```

并且因为**EAX**被用作索引。它首先设置为 0，然后在循环中增加 1：

```
0x0804844a <+6>:     mov    $0x0,%eax
<...>
0x08048454 <+16>:    add    $0x1,%eax
0x08048457 <+19>:    cmpb   $0x0,(%edx,%eax,1)
0x0804845b <+23>:    jne    0x8048454 <s+16> 
```

请注意，在与`(%edx,%eax,1)`0 比较后，代码如何跳回递增**EAX**。

# google-app-engine - Google Cloud Endpoint API 返回 500 错误

> ID：15286191
> 
> 赞同：1
> 
> 时间：2013-03-08T03:26:13.870
> 
> 标签：google-app-engine, google-cloud-endpoints

[我应用了在 Google App Engine Endpoints 上部署时遇到的 HTTP 代码 302](https://stackoverflow.com/q/15246039/2137244)中找到的答案

302 问题消失了，API 已在部署的应用程序中可见，但现在我收到此错误：

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "internalError",
    "message": "Internal Error"
   }
  ],
  "code": 500,
  "message": "Internal Error"
 }
} 
```

应用程序日志显示了此请求的 200 响应：

```
2013-03-07 18:57:10.992 /_ah/spi/DeviceSyncEndPoint.listDevices 200 185ms 0kb Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11
216.31.219.19 - - [07/Mar/2013:18:57:10 -0800] "POST /_ah/spi/DeviceSyncEndPoint.listDevices HTTP/1.1" 200 86 - "Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.95 Safari/537.11" "racermanager-hrd.appspot.com" ms=186 cpu_ms=47 cpm_usd=0.000010 instance=00c61b117ceb47410221ae438f2cbe7fc958 
```

500 错误来自哪里，我该如何解决？

# qt5 - 使用 C++11 的 Qt 5 具有超过 3 个参数的新信号槽连接

> ID：15286192
> 
> 赞同：2
> 
> 时间：2013-03-08T03:26:17.763
> 
> 标签：qt5

有人可以给出一个非常简单的 C++11 示例，说明 Qt 5 中的信号槽连接，使用带有函数指针的新语法，其中信号/槽函数采用 3 个以上的参数？我的理解是，如果信号/插槽函数的参数超过 3 个，则如果使用 C++98 并出现以下错误，则编译将失败：

/Users/xxxx/Qt5.0.1/5.0.1/clang_64/include/QtCore/qobject_impl.h:82：错误：数组初始化程序QtPrivate::QMetaTypeIdHelper::qt_metatype_id()中的多余元素，QtPrivate::QMetaTypeIdHelper::qt_metatype_id( ), 0 }; 返回 t; } }; ^

为了答案的完整性和每个人的利益，很高兴看到重载信号与超过 3 个参数的插槽的连接，再次使用 C++11。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-10T02:52:02.087

这是 Qt 中的一个错误，此后已得到修复。

# python - python 3轮函数逼近

> ID：15286194
> 
> 赞同：3
> 
> 时间：2013-03-08T03:26:25.337
> 
> 标签：python, math, python-3.x, decimal, rounding

我面临python的圆形功能问题。当我通过执行结果以 2 位四舍五入时`round(0.715,2)`，答案是 0.71，同样，当我执行`round(0.615,2)`结果是 0.61。但是当我执行`round(0.515,2)`它时它给出 0.52，同样`round(0.915,2)`的结果是 0.92。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T03:29:34.843

这是由于您使用的数字的[浮点近似值。](http://en.wikipedia.org/wiki/Floating_point#Representable_numbers.2C_conversion_and_rounding)只有约 16 个有效十进制数字。如您所见，前两个略低于，后两个略高于

```
>>> "%.20f"%0.715
'0.71499999999999996891'
>>> "%.20f"%0.615
'0.61499999999999999112'
>>> "%.20f"%0.515
'0.51500000000000001332'
>>> "%.20f"%0.915
'0.91500000000000003553' 
```

如果您需要更好的表现，请考虑使用该`decimal`模块

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:30:14.420

在典型计算机中实现的浮点数并不精确。因此，当您编写 5.15 时，它实际上可能与 5.1499999999 相同（对计算机而言）......或者可能是其他一些细微的变化。当像 Python 这样的编程语言打印这些数字时，它们决定四舍五入到小数位数，所以你认为你得到了一个准确的数字，但你没有。

另请参阅：[http](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html) ://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html （“每个计算机科学家都应该知道的关于浮点运算的知识”）

# algorithm - 对堆栈中的数字序列进行排序所需的最小操作数

> ID：15286195
> 
> 赞同：3
> 
> 时间：2013-03-08T03:26:29.783
> 
> 标签：algorithm, sorting, stack

我们在堆栈中有 N 个数字，我们希望以最少的操作数对它们进行排序。唯一可用的操作是反转堆栈顶部的最后 K 个数字（K 可以在 2 和 N 之间）。

例如要对序列“2 3 4 5 1”进行排序，我们需要 2 个步骤：

2 3 4 5 1 ---> 1 5 4 3 2 ---> 1 2 3 4 5

是否有任何多项式算法可以找到所需的最小步数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:22:24.173

我想你说的是著名的 Pancake 排序算法。

```
Quoting from wikipedia : "The maximum number of flips required to sort 
any stack of n pancakes has been shown to lie between (15/14)n and (18/11)n,
but the exact value is not known. The simplest pancake sorting algorithm requires
at most 2n−3 flips. 

In this algorithm, a variation of selection sort, we bring the largest pancake
not yet sorted to the top with one flip, and then take it down to its final 
position with  one more, then repeat this for the remaining pancakes.

Note that we do not count the time needed to find the largest pancake, only the
number of flips; if we wished to create a real machine to execute this algorithm
in linear time, it would have to both perform prefix reversal (flips) and be
able to find the maximum of a range of consecutive numbers in constant time" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:30:53.110

可以分 2N-3 步完成（最坏情况）

找到'1'的位置

随机播放到最后（一步）

将其随机播放到开头（反转所有 N）

找到 2 的位置

随机播放到最后

随机播放到开头（倒转最后 N-1 个）

重复...

当你开始考虑元素 N-1 时，它要么已经在正确的位置，要么在最后。在最坏的情况下，您需要再进行一次逆转才能完成。这给了你 2N-3。

当您利用某些内在顺序时，您可以为给定的序列做得更好。我有一种预感，最大化元素“顺序”的初始步骤可能是好的 - 也就是说，执行初始步骤以使“所有元素都小于左侧的元素的数量”最大。例如，从 开始`43215`，初始完全反转给出`51234`（订单号 = 3），之后我的算法只需两步即可获得正确的订单。我不确定这是否普遍。

# git - 对于初始提交，是“添加”。和“加*”是同义词吗？

> ID：15286209
> 
> 赞同：4
> 
> 时间：2013-03-08T03:28:31.343
> 
> 标签：git

会`git add .`和`git add *`完成完全相同的事情吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-08T03:30:13.687

不，它不会。

`*`是一个 glob 模式，并且不会匹配以 a 开头的文件`.`

例如，假设这是当前目录，我有 2 个新文件要添加`foo`和`.bar`

```
$ ls -l

-rw-r--r-- 1 me users     0 Mar  7 19:31 foo
-rw-r--r-- 1 me users     0 Mar  7 19:31 .bar 
```

当我运行时`git add *`：

```
$ git add *

$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   new file:   foo
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#   .bar 
```

相反，如果我跑`git add .`

```
$ git add .

$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   new file:   .bar
#   new file:   foo
# 
```

顺便说一句，如果您只想添加您所在的特定目录下的所有文件，那么使用`git add * .*`会产生**不正确的结果。**

让我们考虑这种情况，我有 6 个新文件：

```
foo
.bar
mydir/abc
mydir/.def
mydir2/newfile1
mydir2/newfile2 
```

如果我在`mydir`运行`git add .`git 只添加以下文件：

```
mydir/abc
mydir/.def 
```

相反，如果您运行该命令`git add * .*`，git 会添加文件以及`mydir`上一级目录级别的任何更改，因为`.*`glob 模式也匹配`../`。换句话说，将添加以下文件：

```
foo
.bar
mydir/abc
mydir/.def
mydir2/newfile1
mydir2/newfile2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T03:30:22.387

在很多情况下，它们是相同的，但并非总是如此。在第二种情况下，`*`shell 会使用普通的通配规则扩展 ，因此不会添加当前目录中以 a 开头的文件`.`，例如。

# capistrano - 从 Capistrano 任务运行刀命令

> ID：15286213
> 
> 赞同：0
> 
> 时间：2013-03-08T03:28:59.147
> 
> 标签：capistrano, bundler, chef-infra, knife

我正在尝试通过 capistrano 任务配置刀命令行工具，并在遇到以下行时遇到问题

```
system "knife configure --yes --defaults -s ... -c ... -u ... -r ..." 
```

它说这个

```
Could not find net-ssh-2.6.5 in any of the sources
Run `bundle install` to install missing gems. 
```

我确实安装了这个 gem，我相信它是随厨师一起提供的。我认为这与 Capistrano 运行的环境有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T19:16:10.040

卸载厨师：

```
gem uninstall chef 
```

并重新安装它：

```
gem install chef 
```

# php - 警告：mysql_num_rows() 期望参数 1 是资源，在第 14 行给出的布尔值

> ID：15286214
> 
> 赞同：0
> 
> 时间：2013-03-08T03:29:07.020
> 
> 标签：php, mysql, sql

尝试使用此代码时出现此错误。我可以在不同的数据库上使用具有不同表名的完全相同的代码，并且工作正常。

```
<?php

            $getid = $_GET['id'];

            if (!$getid)
                $getid = "1";

            require('scripts/connect.php');
            $query = mysql_query("SELECT * FROM team WHERE id='$getid'");
            $numrows = mysql_num_rows($query);

            if($numrows == 1){
                $row = mysql_fetch_assoc($query);
                $id = $row['id'];
                $firstname = $row['first_name'];
                $lastname = $row['last_name'];
                $position = $row['position'];
                $bats = $row['bats'];
                $throws = $row['throws'];
                $number = $row['number'];
                $picture = $row['picture'];

                echo "<div id='team'> 
```

我也遇到了同样的错误，这也适用于另一个数据库（同一服务器）。

```
<?php
        require ("scripts/connect.php");
        $query = mysql_query("SELECT * FROM team WHERE id>=1 DESC LIMIT 10");
        $numrows = mysql_num_rows($query);
            if($numrows > 0){
                Echo "
                    <div class='box'>
                        <div class='top'>Players</div>
                        <div class='bottom'>";
                while ($row = mysql_fetch_assoc($query)){
                    $id = $row['id'];
                    $firstname = $row['first_name'];
                    $number = $row['number'];

                    echo "<a href='$site/team.php?id=$id'>$first_name $number</a><br />";
                }
                echo "</div></div>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:45:49.457

错误“期望参数 1 是资源，给定的**布尔值**”背后的原因是当您执行错误的查询并且**它失败时，它返回 0**，这是您的“给定的布尔值”的原因。

@JW 指出了一个原因，并用以下方法更正了查询：

```
SELECT * 
FROM   team 
WHERE  id>=1 
ORDER  BY id DESC  // change the column name with your original one.
LIMIT  10 
```

尽管如此，如果你得到相同的结果，你在查询本身就犯了错误。可能的原因可能是：错误的 table_name、错误的 column_name 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:30:06.343

问题出在这个查询上

```
SELECT * FROM team WHERE id>=1 DESC LIMIT 10
                            // ^ Error on this line 
```

您忘记添加`ORDER BY`子句。

```
SELECT * 
FROM   team 
WHERE  id>=1 
ORDER  BY ID DESC  // change the column name with your original one.
LIMIT  10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:14:36.873

只需用此查询替换查询

```
 $query = mysql_query("SELECT * FROM   team WHERE  id>=1 
        ORDER BY id DESC  LIMIT  10 "); 
```

# web-services - 无法将 Webservice 部署到 weblogic 服务器

> ID：15286216
> 
> 赞同：0
> 
> 时间：2013-03-08T03:29:27.780
> 
> 标签：web-services, oracle, deployment, weblogic

我开发了 webservice，我想将它部署到 weblogic 中，以便我可以将它与我的门户应用程序集成。我的 web 服务在集成的 Weblogic 服务器（10.3.5）中运行良好。但是，当我尝试将其部署到开发服务器（10.3.6）中时，Weblogic 会抛出异常。我也尝试将它部署到 EAR 文件中，我得到了同样的异常。

错误消息是：[02:16:01 PM] 原因：java.lang.ClassCastException：com.sun.xml.bind.AccessorFactoryImpl 无法转换为 com.sun.xml.bind.InternalAccessorFactory

有谁知道如何解决这个问题？我仍在尝试将其部署到 10.3.6 版本中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:18:59.450

请检查 web.xml 中的版本。

WebApp_ID 版本应为您指定的 javaee 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:23:43.173

我使用 jrockit 1.6.0_33 重新安装了 weblogic 服务器，然后我可以部署我的 web 服务。意味着我降级了jdk（不是最新版本）。

# android - 在可扩展列表视图 android 中重复子项

> ID：15286219
> 
> 赞同：3
> 
> 时间：2013-03-08T03:29:47.507
> 
> 标签：android, expandablelistview, expandablelistadapter

我正在android中开发三级可扩展列表视图。但是我的子节点以重复的顺序填充。这是我的源代码：

```
public class CarPanel extends ExpandableListActivity {

    static ArrayList<String> groupItem = new ArrayList<String>();
    static ArrayList<String> childItem = new ArrayList<String>();
    static ArrayList<Object> grandChildItem = new ArrayList<Object>();
    static public ArrayList<String> childValue;
    static public ArrayList<String> grandChildValue;

    EditText modelType, price, dyp, insurance;

    static int dummyFlag = 0;
    public LayoutInflater minflater;
    public Activity activity;

    private MyDBManager dbManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        //Remove title bar
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        //Remove notification bar    
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        dbManager = new MyDBManager(this);
        dbManager.open();

        ExpandableListView expandbleLis = getExpandableListView();
        expandbleLis.setDividerHeight(2);
        expandbleLis.setGroupIndicator(null);
        expandbleLis.setClickable(true);

        // 1st level data       
        setGroupData();

        // 2nd level data
        setChildGroupData();

        // 3rd level data
        setGrandChildGroupData();

        ParentLevel parentAdapter = new ParentLevel(groupItem);
        parentAdapter.setInflater((LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE), this);
        getExpandableListView().setAdapter(parentAdapter);
        expandbleLis.setOnChildClickListener(this);

    }

    public class ParentLevel extends BaseExpandableListAdapter {

        public ParentLevel(ArrayList<String> groupList) {
             groupItem = groupList;
        }

        public Object getChild(int arg0, int arg1) {
            return arg1;
        }

        public void setInflater(LayoutInflater mInflater, Activity act) {
            minflater = mInflater;
            activity = act;
        }

        public long getChildId(int groupPosition, int childPosition) {
            return childPosition;
        }

        public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
            CustExpListview SecondLevelexplv = new CustExpListview(CarPanel.this);
            SecondLevelexplv.setAdapter(new SecondLevelAdapter(childItem, grandChildItem ));
            SecondLevelexplv.setGroupIndicator(null);

            return SecondLevelexplv;
        }

        public int getChildrenCount(int groupPosition) {
            Log.v("childItem.size()", "childItem.size()  " +childItem.size());
            return childItem.size();
        }

        public Object getGroup(int groupPosition) {
            return groupPosition;
        }

        public int getGroupCount() {
            Log.v("groupItem.size()", "groupItem.size()  " +groupItem.size());
            return groupItem.size();
        }

        public long getGroupId(int groupPosition) {
            return groupPosition;
        }

        public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
            if (convertView == null) {
                convertView = minflater.inflate(R.layout.grouprow, null);
            }
            ((CheckedTextView) convertView).setText(groupItem.get(groupPosition));
            ((CheckedTextView) convertView).setChecked(isExpanded);
            return convertView;
        }

        public boolean hasStableIds() {
            return true;
        }

        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return true;
        }
    }

    class CustExpListview extends ExpandableListView {

        int intGroupPosition, intChildPosition, intGroupid;

        public CustExpListview(Context context) {
            super(context);
        }

        protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
            widthMeasureSpec = MeasureSpec.makeMeasureSpec(960, MeasureSpec.AT_MOST);
            heightMeasureSpec = MeasureSpec.makeMeasureSpec(600,MeasureSpec.AT_MOST);
            super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        }
    }

    class SecondLevelAdapter extends BaseExpandableListAdapter {

        public LayoutInflater minflater;
        public Context activity;

    public SecondLevelAdapter(ArrayList<String> childList, ArrayList<Object> grandChildList) {
            childItem = childList;
            grandChildItem = grandChildList;
        }

        public void setInflater(LayoutInflater mInflater, Context parentLevel) {
            minflater = mInflater;
            activity = parentLevel;
        }

        public Object getChild(int groupPosition, int childPosition) {
            return childPosition;
        }

        public long getChildId(int groupPosition, int childPosition) {
            return childPosition;
        }

        @SuppressWarnings("unchecked")
        public View getChildView(int groupPosition, final int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
            grandChildValue = (ArrayList<String>) grandChildItem.get(groupPosition);
            EditText modelType, price, dyp, insurance;
            if (convertView == null) {
                 LayoutInflater layoutInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = layoutInflater.inflate(R.layout.grandchildrow, null);
            }

            modelType = (EditText) convertView.findViewById(R.id.et_ModelType);
            price = (EditText) convertView.findViewById(R.id.et_Price);
            dyp = (EditText) convertView.findViewById(R.id.et_DYP);
            insurance = (EditText) convertView.findViewById(R.id.et_Insurance);

            modelType.setText(grandChildValue.get(childPosition));

            convertView.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    Toast.makeText(getBaseContext(), grandChildValue.get(childPosition), Toast.LENGTH_SHORT).show();
                }
            });

            return convertView;
        }

        public int getChildrenCount(int groupPosition) {
            return ((ArrayList<String>) grandChildItem.get(groupPosition)).size();
        }

        public Object getGroup(int groupPosition) {
            return groupPosition;
        }

        public int getGroupCount() {
            return childItem.size();
        }

        public long getGroupId(int groupPosition) {
            return groupPosition;
        }

        public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {

            if (convertView == null) {
                LayoutInflater layoutInflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                convertView = layoutInflater.inflate(R.layout.childrow, null);
            }
            ((CheckedTextView) convertView).setText(childItem.get(groupPosition));
            ((CheckedTextView) convertView).setChecked(isExpanded);
            return convertView;

        }

        public boolean hasStableIds() {
            return true;
        }

        public boolean isChildSelectable(int groupPosition, int childPosition) {
            return true;
        }

    }

    public void setGroupData() {
        groupItem.clear();

        Cursor cursor = dbManager.execQuery("SELECT DISTINCT carName FROM model");
        final List<ModelBean> modelList = new ArrayList<ModelBean>();
        cursor.moveToFirst();
        while (!cursor.isAfterLast()) {
            ModelBean beanObj = cursorToModel(cursor);
            modelList.add(beanObj);
            cursor.moveToNext();
        }
        // Make sure to close the cursor
        cursor.close();
        ModelBean modelObj = null;

        if (modelList.size() > 0 )
        {
            for (int i = 0; i < modelList.size(); i++)
            {
                modelObj = modelList.get(i);
                String carName = modelObj.getCarName();             
                groupItem.add(carName);
            }
        }
    }     

    public void setChildGroupData() {

        childItem.clear();

        childItem.add("Android");

        childItem.add("iOS");

        childItem.add("HTC");

    }

    public void setGrandChildGroupData() {
        grandChildItem.clear();

        ArrayList<String> child = new ArrayList<String>();
        child.add("PASSAT 1");
        child.add("PASSAT 2");
        grandChildItem.add(child);

        child = new ArrayList<String>();
        child.add("POLO 1");
        child.add("POLO 2");
        grandChildItem.add(child);

        child = new ArrayList<String>();
        child.add("VITZ 1");
        child.add("VITZ 2");
        grandChildItem.add(child);

    }

    private ModelBean cursorToModel(Cursor cursor) 
       {
          ModelBean modelBean = new ModelBean();
          modelBean.setCarName(cursor.getString(0));

         return modelBean;
        } 
} 
```

现在我希望这个块代码对每个父组只重复一次，但它重复三遍。我搜索了更多类似的 SO 问题，但没有解决。

安卓

iOS

宏达电

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-09-18T14:48:37.620

我在同样的问题上苦苦挣扎，在网上/SO 的任何地方都找不到解决方案。

在做了一些记录之后，我得出结论，父级 BaseExpandbleAdapter 将调用/创建一个与您的数据集/组中的子级数量相对应的 childView。不幸的是，这在三级嵌套列表场景中是不希望的。

所以在生成三级列表时，只需在父适配器中制作函数 getChildrenCount 如下：

```
 @Override
    public int getChildrenCount(int groupPosition){
         return 1;
    } 
```

现在它只会构建子列表项的“1”次迭代，即使 1 个嵌套列表可以包含任意数量的子项，从子适配器的角度来看，这些子项将成为组。

这是令人困惑的，因为您的子/嵌套适配器处理显示实际的“子”，而在单个嵌套列表中，您的子在同一个父适配器类中处理。在这种情况下，子/嵌套适配器将处理将子项显示为自己的 groupView，从而使父适配器中的子项数量无关紧要。至少那是我的结果和环境向我展示的......

希望我能有所帮助，这让我难过了半天。

# ruby-on-rails - Rails Fixnum 错误

> ID：15286221
> 
> 赞同：1
> 
> 时间：2013-03-08T03:30:04.487
> 
> 标签：ruby-on-rails

我有一个简单的查询，Rails 似乎将其解释为 fixnum，但我不确定为什么。我的代码如下所示：

```
@user_with_points = Point.select("sum(points) as points, user_id").order("points desc").group("user_id")
@user_with_points.each_with_index do |user_with_point, index| 
```

当我添加`puts @user_with_points`时，它显示：

```
#<Point:0x6360138>
#<Point:0x6322f38> 
```

但是，我收到此错误此错误：

```
NoMethodError: undefined method 'each' for 75:Fixnum 
```

**添加整个代码**

```
def self.update_overall_rank_and_points
  @user_with_points = Point.select("sum(points) as points, user_id").order("points desc").group("user_id")
  rank = 0
  points = 0

  @user_with_points.each_with_index do |user_with_point, index|           
    @user = User.find(user_with_point.user_id)
    if user_with_point.points != points
      points = user_with_point.points
      rank += 1
    end
    @user.rank = rank
    @user.points = user_with_point.points
    @user.save
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:32:09.270

您的查询返回一个标量值，它是整数的点总和。您的查询总数恰好是 75，因此出现了错误。因此，您不能`each`反对它，因为它不是枚举。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:40:49.987

尝试：

```
@user_with_points = Point.sum(:points, :group => :user_id, :order => 'sum(points)')
@user_with_points.each do |user_id, points|
  #...
  user = User.find(user_id)
  if user.points != points
    puts "not equal!"
  end
end 
```

# github - 将 github 分支设置为仅拉（读）

> ID：15286229
> 
> 赞同：2
> 
> 时间：2013-03-08T03:30:14.943
> 
> 标签：github

是否可以将共享/公共存储库中的特定分支设置为只读？（我不想将整个存储库设为只读）

例如，`master`除了项目经理或执行协调任务的人之外，大多数人都应该是只读的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:49:52.257

不，访问权限是存储库范围的。

这意味着，如果您需要这种限制，您将需要该回购的*私人*分叉，只有 PM 作为合作者：他/她将能够提取他/她需要的东西。

然后 PM 可以`push --force`回到公共 repo 的 master 分支（应该明确宣传 master 可以随时更改，并且永远不应该由 devs 直接推送）

或者你可以不理会第一个 repo，将第二个 repo 公开（警告只从 PM 管理的第二个 repo 中*提取*，永远不要推送）。
开发人员可以向他们的本地仓库添加第二个远程引用，第一个是让他们推送或拉取，第二个是拉取 PM 在第二个仓库中存储的主要发布版本。

* * *

除此之外，唯一的其他解决方案是您控制的服务器上的中间存储库，在其之上您可以添加一个[授权层](http://gitolite.com/gitolite/auth.html)，如[gitolite](https://github.com/sitaramc/gitolite)（这将允许只读分支），并且如果提交可以继续推送到 GitHub视为“有效”。

# iis - 一个由 Autofac 引起的棘手的 IIS 死锁

> ID：15286230
> 
> 赞同：4
> 
> 时间：2013-03-08T03:30:15.377
> 
> 标签：iis, deadlock, autofac

我是 Autofac 用户，现在面临一个非常头痛的问题。电子邮件 Alex 和 Travis 向我提出了这个问题，并得到了他们的回复，在这里，感谢他们的帮助。为了彻底检查这个问题，我接受了 Travis 的建议，并在此处发布了详细信息。

**我的电子邮件：**

> 我们在 mvc3 项目中使用 Autofac 2.6.3.862。
> 
> 现在我们来到IIS死锁问题很严重，服务器经常死机，我们使用了Microsoft Debug Diagnostics Tool进行了分析（导致附上分析报告），初步怀疑是LifetimeScope中的一个锁
> 
> 我已经阅读了您的文章，但是对于一些技术细节对我来说是模糊的。我们的大多数 Register() 组件都是 SingleInstance，所以当 Resolve() 时我不使用子生命周期范围，例如 using (var scope = Container.BeginLifetimeScope())
> 
> ，不知道这是否是死锁的原因。

**调试诊断分析报告**

```
The following threads in 
w3wp.exe__hg__PID__3904__Date__03_07_2013__Time_11_01_07AM__974__Manual Dump.dmp are waiting to enter a .NET Lock which thread 39 is currently holding    
( 26 34 42 43 44 45 46 47 48 )    
16.67% of threads blocked    

======================================================================================

Detected possible blocking or leaked critical section at 0x0e758a00 owned by thread 26 in w3wp.exe__hg__PID__3904__Date__03_07_2013__Time_11_01_07AM__974__Manual Dump.dmp 

Impact of this lock    
1.85% of threads blocked

(Threads 39)

The following functions are trying to enter this critical section

clr!UnsafeEEEnterCriticalSection+1c    

The following module(s) are involved with this critical section

C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll

======================================================================================

Thread 26 - System ID 7628
Entry point   0x00000000 
Create time   2013/3/7 10:44:15 
Time spent in user mode   0 Days 00:00:00.218 
Time spent in kernel mode   0 Days 00:00:00.343 

This thread is waiting to enter a .NET Lock which thread 39 is currently holding

.NET Call Stack

Function 
System.Threading.Monitor.ReliableEnter(System.Object, Boolean ByRef) 
System.Threading.Monitor.Enter(System.Object, Boolean ByRef) 
Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(Autofac.Core.IComponentRegistration, System.Collections.Generic.IEnumerable`1) 
Autofac.Core.Container.ResolveComponent(Autofac.Core.IComponentRegistration, System.Collections.Generic.IEnumerable`1) 
Autofac.ResolutionExtensions.TryResolveService(Autofac.IComponentContext, Autofac.Core.Service, System.Collections.Generic.IEnumerable`1, System.Object ByRef) 
Autofac.ResolutionExtensions.ResolveService(Autofac.IComponentContext, Autofac.Core.Service, System.Collections.Generic.IEnumerable`1) 
Autofac.ResolutionExtensions.Resolve[[System.__Canon, mscorlib]](Autofac.IComponentContext, System.Collections.Generic.IEnumerable`1) 
Autofac.ResolutionExtensions.Resolve[[System.__Canon, mscorlib]](Autofac.IComponentContext) 
Tunynet.DIContainer.Resolve[[System.__Canon, mscorlib]]() 
Spacebuilder.Common.ProfileRepository..cctor() 
Spacebuilder.Common.ProfileRepository..ctor() 
Spacebuilder.Common.UserProfileService..ctor() 
Spacebuilder.Common.User.get_Profile() 
ASP._Page_Themes_Channel_Default_Views_FindUser__QuickSearch_cshtml.Execute() 
System.Web.WebPages.WebPageBase.ExecutePageHierarchy() 
System.Web.Mvc.WebViewPage.ExecutePageHierarchy() 
Tunynet.UI.ThemedWebViewPage.ExecutePageHierarchy() 
System.Web.WebPages.WebPageBase.ExecutePageHierarchy(System.Web.WebPages.WebPageContext, System.IO.TextWriter, System.Web.WebPages.WebPageRenderingBase) 
Tunynet.UI.ThemedRazorView.RenderView(System.Web.Mvc.ViewContext, System.IO.TextWriter, System.Object) 
System.Web.Mvc.BuildManagerCompiledView.Render(System.Web.Mvc.ViewContext, System.IO.TextWriter) 
System.Web.Mvc.ViewResultBase.ExecuteResult(System.Web.Mvc.ControllerContext) 
System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(System.Web.Mvc.ControllerContext, System.Web.Mvc.ActionResult) 
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass1c.b__19() 
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(System.Web.Mvc.IResultFilter, System.Web.Mvc.ResultExecutingContext, System.Func`1) 
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass1c+<>c__DisplayClass1e.b__1b() 
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(System.Web.Mvc.IResultFilter, System.Web.Mvc.ResultExecutingContext, System.Func`1) 
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass1c+<>c__DisplayClass1e.b__1b() 
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(System.Web.Mvc.IResultFilter, System.Web.Mvc.ResultExecutingContext, System.Func`1) 
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass1c+<>c__DisplayClass1e.b__1b() 
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(System.Web.Mvc.IResultFilter, System.Web.Mvc.ResultExecutingContext, System.Func`1) 
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass1c+<>c__DisplayClass1e.b__1b() 
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(System.Web.Mvc.ControllerContext, System.Collections.Generic.IList`1, System.Web.Mvc.ActionResult) 
System.Web.Mvc.ControllerActionInvoker.InvokeAction(System.Web.Mvc.ControllerContext, System.String) 
System.Web.Mvc.Controller.ExecuteCore() 
System.Web.Mvc.ControllerBase.Execute(System.Web.Routing.RequestContext) 
System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(System.Web.Routing.RequestContext) 
System.Web.Mvc.MvcHandler+<>c__DisplayClass6+<>c__DisplayClassb.b__5() 
System.Web.Mvc.Async.AsyncResultWrapper+<>c__DisplayClass1.b__0() 
System.Web.Mvc.Async.AsyncResultWrapper+<>c__DisplayClass8`1[[System.Web.Mvc.Async.AsyncVoid, System.Web.Mvc]].b__7(System.IAsyncResult) 
System.Web.Mvc.Async.AsyncResultWrapper+WrappedAsyncResult`1[[System.Web.Mvc.Async.AsyncVoid, System.Web.Mvc]].End() 
System.Web.Mvc.MvcHandler+<>c__DisplayClasse.b__d() 
System.Web.Mvc.SecurityUtil.b__0(System.Action) 
System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(System.Action) 
System.Web.Mvc.MvcHandler.EndProcessRequest(System.IAsyncResult) 
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(System.IAsyncResult) 
System.Web.HttpApplication+CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 
System.Web.HttpApplication.ExecuteStep(IExecutionStep, Boolean ByRef) 
System.Web.HttpApplication+PipelineStepManager.ResumeSteps(System.Exception) 
System.Web.HttpApplication.BeginProcessRequestNotification(System.Web.HttpContext, System.AsyncCallback) 
System.Web.HttpRuntime.ProcessRequestNotificationPrivate(System.Web.Hosting.IIS7WorkerRequest, System.Web.HttpContext) 
System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(IntPtr, IntPtr, IntPtr, Int32) 
System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(IntPtr, IntPtr, IntPtr, Int32) 
DomainNeutralILStubClass.IL_STUB_PInvoke(IntPtr, System.Web.RequestNotificationStatus ByRef) 
System.Web.Hosting.UnsafeIISMethods.MgdIndicateCompletion(IntPtr, System.Web.RequestNotificationStatus ByRef) 
System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(IntPtr, IntPtr, IntPtr, Int32) 
System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(IntPtr, IntPtr, IntPtr, Int32) 

Full Call Stack

Function   Source 
ntdll!KiFastSystemCallRet    
ntdll!NtWaitForMultipleObjects+c    
KERNELBASE!WaitForMultipleObjectsEx+100    
kernel32!WaitForMultipleObjectsExImplementation+e0    
clr!WaitForMultipleObjectsEx_SO_TOLERANT+56    
clr!Thread::DoAppropriateAptStateWait+4d    
clr!Thread::DoAppropriateWaitWorker+17d    
clr!Thread::DoAppropriateWait+60    
clr!CLREvent::WaitEx+106    
clr!CLREvent::Wait+19    
clr!AwareLock::EnterEpilogHelper+a8    
clr!AwareLock::EnterEpilog+42    
clr!AwareLock::Enter+5f    
clr!AwareLock::Contention+228    
clr!JITutil_MonReliableContention+e8    
System.Threading.Monitor.Enter(System.Object, Boolean ByRef)    
clr!CallDescrWorker+33    
clr!CallDescrWorkerWithHandler+8e    
clr!DispatchCallBody+20    
clr!DispatchCallDebuggerWrapper+75    
clr!DispatchCallNoEH+53    
clr!MethodTable::RunClassInitEx+f1    
clr!MethodTable::DoRunClassInitThrowing+53e    
clr!MethodDesc::DoPrestub+f1    
clr!PreStubWorker+12c    
0x00f80842    
clr!MethodTable::GetRestoredSlot+2a    
clr!MethodDesc::GetMethodEntryPoint+4e    
clr!MethodDesc::DoPrestub+51d    
clr!PreStubWorker+15d    
0x00f80842    
System.Web.WebPages.WebPageBase.ExecutePageHierarchy()    
System.Web.Mvc.WebViewPage.ExecutePageHierarchy()    
System.Collections.Generic.Stack`1[[System.__Canon, mscorlib]].Push(System.__Canon)    
System.Web.WebPages.WebPageBase.ExecutePageHierarchy(System.Web.WebPages.WebPageContext, System.IO.TextWriter, System.Web.WebPages.WebPageRenderingBase)    
System.RuntimeType+ActivatorCacheEntry..ctor(System.Type, System.RuntimeMethodHandleInternal, Boolean)    
System.Web.Mvc.BuildManagerCompiledView.Render(System.Web.Mvc.ViewContext, System.IO.TextWriter)    
System.Web.Mvc.ViewResultBase.ExecuteResult(System.Web.Mvc.ControllerContext)    
System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(System.Web.Mvc.ControllerContext, System.Web.Mvc.ActionResult)    
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()    
System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(System.Web.Mvc.IResultFilter, System.Web.Mvc.ResultExecutingContext, System.Func`1<System.Web.Mvc.ResultExecutedContext>)    
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass1c+<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b()    
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass1c+<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b()    
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass1c+<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b()    
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass1c+<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b()    
System.Web.Mvc.ControllerActionInvoker.InvokeAction(System.Web.Mvc.ControllerContext, System.String)    
System.Web.Mvc.Controller.ExecuteCore()    
System.Web.Mvc.ControllerBase.Execute(System.Web.Routing.RequestContext)    
System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(System.Web.Routing.RequestContext)    
System.Web.Mvc.MvcHandler+<>c__DisplayClass6+<>c__DisplayClassb.<BeginProcessRequest>b__5()    
System.Web.Mvc.Async.AsyncResultWrapper+<>c__DisplayClass1.<MakeVoidDelegate>b__0()    
System.Web.Mvc.MvcHandler+<>c__DisplayClasse.<EndProcessRequest>b__d()    
System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(System.Action)    
System.Web.Mvc.MvcHandler.EndProcessRequest(System.IAsyncResult)    
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(System.IAsyncResult)    
System.Web.HttpApplication+CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()    
System.Web.HttpApplication.ExecuteStep(IExecutionStep, Boolean ByRef)    
System.Web.HttpApplication+PipelineStepManager.ResumeSteps(System.Exception)    
System.Web.HttpApplication.BeginProcessRequestNotification(System.Web.HttpContext, System.AsyncCallback)    
System.Web.HttpRuntime.ProcessRequestNotificationPrivate(System.Web.Hosting.IIS7WorkerRequest, System.Web.HttpContext)    
System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(IntPtr, IntPtr, IntPtr, Int32)    
System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(IntPtr, IntPtr, IntPtr, Int32)    
webengine4!W3_MGD_HANDLER::ProcessNotification+5b    
webengine4!W3_MGD_HANDLER::DoWork+250    
webengine4!RequestDoWork+2da    
webengine4!CMgdEngHttpModule::OnExecuteRequestHandler+1a    
iiscore!NOTIFICATION_CONTEXT::RequestDoWork+128    
iiscore!NOTIFICATION_CONTEXT::CallModulesInternal+305    
iiscore!NOTIFICATION_CONTEXT::CallModules+28    
iiscore!W3_CONTEXT::DoStateRequestExecuteHandler+36    
iiscore!W3_CONTEXT::DoWork+d7    
iiscore!W3_MAIN_CONTEXT::ContinueNotificationLoop+1f    
iiscore!W3_MAIN_CONTEXT::ProcessIndicateCompletion+1f    
iiscore!W3_CONTEXT::IndicateCompletion+75    
webengine4!W3_MGD_HANDLER::IndicateCompletion+3d    
webengine4!MgdIndicateCompletion+24    
DomainNeutralILStubClass.IL_STUB_PInvoke(IntPtr, System.Web.RequestNotificationStatus ByRef)    
System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(IntPtr, IntPtr, IntPtr, Int32)    
System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(IntPtr, IntPtr, IntPtr, Int32)    
clr!UM2MThunk_WrapperHelper+10    
clr!UM2MThunk_Wrapper+8c    
clr!Thread::DoADCallBack+f0    
clr!UM2MDoADCallBack+c0    
0x00f98c20    
webengine4!W3_MGD_HANDLER::ProcessNotification+5b    
webengine4!ProcessNotificationCallback+36    
clr!UnManagedPerAppDomainTPCount::DispatchWorkItem+195    
clr!ThreadpoolMgr::NewWorkerThreadStart+20b    
clr!ThreadpoolMgr::WorkerThreadStart+3d1    
clr!Thread::intermediateThreadProc+4b    
kernel32!BaseThreadInitThunk+e    
ntdll!__RtlUserThreadStart+70    
ntdll!_RtlUserThreadStart+1b 

=========================================================================

Thread 39 - System ID 4176
Entry point   0x00000000 
Create time   2013/3/7 10:44:21 
Time spent in user mode   0 Days 00:00:00.140 
Time spent in kernel mode   0 Days 00:00:00.109 

This thread is not fully resolved and may or may not be a problem. Further analysis of these threads may be required.

.NET Call Stack

Function 
Spacebuilder.Common.ProfileRepository..ctor() 
Spacebuilder.Common.UserProfileService..ctor() 
Spacebuilder.Common.UserSearcher..ctor(System.String, System.String, Boolean, Int32) 
Spacebuilder.Environments.Starter.b__54(Autofac.IComponentContext) 
Autofac.RegistrationExtensions+<>c__DisplayClass10`1[[System.__Canon, mscorlib]].b__f(Autofac.IComponentContext, System.Collections.Generic.IEnumerable`1) 
Autofac.Builder.RegistrationBuilder+<>c__DisplayClass1`1[[System.__Canon, mscorlib]].b__0(Autofac.IComponentContext, System.Collections.Generic.IEnumerable`1) 
Autofac.Core.Activators.Delegate.DelegateActivator.ActivateInstance(Autofac.IComponentContext, System.Collections.Generic.IEnumerable`1) 
Autofac.Core.Resolving.InstanceLookup.Activate(System.Collections.Generic.IEnumerable`1) 
Autofac.Core.Resolving.InstanceLookup.b__0() 
Autofac.Core.Lifetime.LifetimeScope.GetOrCreateAndShare(System.Guid, System.Func`1) 
Autofac.Core.Resolving.InstanceLookup.Execute() 
Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(Autofac.Core.ISharingLifetimeScope, Autofac.Core.IComponentRegistration, System.Collections.Generic.IEnumerable`1) 
Autofac.Core.Resolving.InstanceLookup.ResolveComponent(Autofac.Core.IComponentRegistration, System.Collections.Generic.IEnumerable`1) 
Autofac.Features.Collections.CollectionRegistrationSource+<>c__DisplayClass4+<>c__DisplayClass6.b__1(Autofac.Core.IComponentRegistration) 
System.Linq.Enumerable+WhereSelectArrayIterator`2[[System.__Canon, mscorlib],[System.__Canon, mscorlib]].MoveNext() 
System.Linq.Buffer`1[[System.__Canon, mscorlib]]..ctor(System.Collections.Generic.IEnumerable`1) 
System.Linq.Enumerable.ToArray[[System.__Canon, mscorlib]](System.Collections.Generic.IEnumerable`1) 
Autofac.Features.Collections.CollectionRegistrationSource+<>c__DisplayClass4.b__0(Autofac.IComponentContext, System.Collections.Generic.IEnumerable`1) 
Autofac.Core.Activators.Delegate.DelegateActivator.ActivateInstance(Autofac.IComponentContext, System.Collections.Generic.IEnumerable`1) 
Autofac.Core.Resolving.InstanceLookup.Activate(System.Collections.Generic.IEnumerable`1) 
Autofac.Core.Resolving.InstanceLookup.Execute() 
Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(Autofac.Core.ISharingLifetimeScope, Autofac.Core.IComponentRegistration, System.Collections.Generic.IEnumerable`1) 
Autofac.Core.Resolving.ResolveOperation.Execute(Autofac.Core.IComponentRegistration, System.Collections.Generic.IEnumerable`1) 
Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(Autofac.Core.IComponentRegistration, System.Collections.Generic.IEnumerable`1) 
Autofac.Core.Container.ResolveComponent(Autofac.Core.IComponentRegistration, System.Collections.Generic.IEnumerable`1) 
Autofac.ResolutionExtensions.TryResolveService(Autofac.IComponentContext, Autofac.Core.Service, System.Collections.Generic.IEnumerable`1, System.Object ByRef) 
Autofac.ResolutionExtensions.ResolveService(Autofac.IComponentContext, Autofac.Core.Service, System.Collections.Generic.IEnumerable`1) 
Autofac.ResolutionExtensions.Resolve[[System.__Canon, mscorlib]](Autofac.IComponentContext, System.Collections.Generic.IEnumerable`1) 
Autofac.ResolutionExtensions.Resolve[[System.__Canon, mscorlib]](Autofac.IComponentContext) 
Tunynet.DIContainer.Resolve[[System.__Canon, mscorlib]]() 
Spacebuilder.Search.SearcherFactory.GetSearcher(System.String) 
Spacebuilder.Common.FindUserController._InterestedWithAll(Int32, Int32, System.String) 
DynamicClass.lambda_method(System.Runtime.CompilerServices.Closure, System.Web.Mvc.ControllerBase, System.Object[]) 
System.Web.Mvc.ActionMethodDispatcher.Execute(System.Web.Mvc.ControllerBase, System.Object[]) 
System.Web.Mvc.ReflectedActionDescriptor.Execute(System.Web.Mvc.ControllerContext, System.Collections.Generic.IDictionary`2) 
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(System.Web.Mvc.ControllerContext, System.Web.Mvc.ActionDescriptor, System.Collections.Generic.IDictionary`2) 
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass15.b__12() 
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(System.Web.Mvc.IActionFilter, System.Web.Mvc.ActionExecutingContext, System.Func`1) 
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass15+<>c__DisplayClass17.b__14() 
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(System.Web.Mvc.IActionFilter, System.Web.Mvc.ActionExecutingContext, System.Func`1) 
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass15+<>c__DisplayClass17.b__14() 
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(System.Web.Mvc.IActionFilter, System.Web.Mvc.ActionExecutingContext, System.Func`1) 
System.Web.Mvc.ControllerActionInvoker+<>c__DisplayClass15+<>c__DisplayClass17.b__14() 
System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(System.Web.Mvc.ControllerContext, System.Collections.Generic.IList`1, System.Web.Mvc.ActionDescriptor, System.Collections.Generic.IDictionary`2) 
System.Web.Mvc.ControllerActionInvoker.InvokeAction(System.Web.Mvc.ControllerContext, System.String) 
System.Web.Mvc.Controller.ExecuteCore() 
System.Web.Mvc.ControllerBase.Execute(System.Web.Routing.RequestContext) 
System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(System.Web.Routing.RequestContext) 
System.Web.Mvc.MvcHandler+<>c__DisplayClass6+<>c__DisplayClassb.b__5() 
System.Web.Mvc.Async.AsyncResultWrapper+<>c__DisplayClass1.b__0() 
System.Web.Mvc.Async.AsyncResultWrapper+<>c__DisplayClass8`1[[System.Web.Mvc.Async.AsyncVoid, System.Web.Mvc]].b__7(System.IAsyncResult) 
System.Web.Mvc.Async.AsyncResultWrapper+WrappedAsyncResult`1[[System.Web.Mvc.Async.AsyncVoid, System.Web.Mvc]].End() 
System.Web.Mvc.MvcHandler+<>c__DisplayClasse.b__d() 
System.Web.Mvc.SecurityUtil.b__0(System.Action) 
System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(System.Action) 
System.Web.Mvc.MvcHandler.EndProcessRequest(System.IAsyncResult) 
System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(System.IAsyncResult) 
System.Web.HttpApplication+CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 
System.Web.HttpApplication.ExecuteStep(IExecutionStep, Boolean ByRef) 
System.Web.HttpApplication+PipelineStepManager.ResumeSteps(System.Exception) 
System.Web.HttpApplication.BeginProcessRequestNotification(System.Web.HttpContext, System.AsyncCallback) 
System.Web.HttpRuntime.ProcessRequestNotificationPrivate(System.Web.Hosting.IIS7WorkerRequest, System.Web.HttpContext) 
System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(IntPtr, IntPtr, IntPtr, Int32) 
System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(IntPtr, IntPtr, IntPtr, Int32) 
DomainNeutralILStubClass.IL_STUB_PInvoke(IntPtr, System.Web.RequestNotificationStatus ByRef) 
System.Web.Hosting.UnsafeIISMethods.MgdIndicateCompletion(IntPtr, System.Web.RequestNotificationStatus ByRef) 
System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(IntPtr, IntPtr, IntPtr, Int32) 
System.Web.Hosting.PipelineRuntime.ProcessRequestNotification(IntPtr, IntPtr, IntPtr, Int32) 

Full Call Stack

Function   Source 
ntdll!KiFastSystemCallRet    
ntdll!NtWaitForSingleObject+c    
ntdll!RtlpWaitOnCriticalSection+13e    
ntdll!RtlEnterCriticalSection+150    
clr!UnsafeEEEnterCriticalSection+1c    
clr!CrstBase::Enter+1ad    
clr!ListLockEntry::FinishDeadlockAwareEnter+25    
clr!ListLockEntry::LockHolder::DeadlockAwareAcquire+28    
clr!MethodTable::DoRunClassInitThrowing+4c2    
clr!MethodDesc::DoPrestub+f1    
clr!PreStubWorker+12c    
0x00f80842    
clr!PreStubWorker+165    
System.Linq.Enumerable+WhereSelectArrayIterator`2[[System.__Canon, mscorlib],[System.__Canon, mscorlib]].MoveNext()    
System.Linq.Buffer`1[[System.__Canon, mscorlib]]..ctor(System.Collections.Generic.IEnumerable`1<System.__Canon>)    
System.Linq.Enumerable.ToArray[[System.__Canon, mscorlib]](System.Collections.Generic.IEnumerable`1<System.__Canon>)    
System.Collections.Generic.Stack`1[[System.__Canon, mscorlib]].Push(System.__Canon)    
clr!JIT_Stelem_Ref+25    
System.Collections.Generic.Stack`1[[System.__Canon, mscorlib]].Push(System.__Canon) 
```

**亚历克斯 回复：**

> 这听起来确实很棘手。DIContainer 类在做什么，是否有任何组件注册为 InstancePerHttpRequest 或 InstancePerLifetimeScope？后台似乎也有一些 Quartz 作业，它们是如何与容器交互的？

**特拉维斯 回复：**

> 快速查看堆栈跟踪表明您可能在 Spacebuilder.Environments.Starter、Spacebuilder.Common.UserSearcher.ctor、Spacebuilder.UserProfileService.ctor 或 Spacebuilder.Common.ProfileRepository 中发生了一些长时间运行的操作或锁定。我看到有趣的是，在 RESOLVE 操作期间，当任何组件得到 RESOLVED 时，都会有一个内部 REGISTER 正在进行。没有看到代码，我无法告诉你那里发生了什么，但那个线程 - #39 - 那是我要看的东西。
> 
> 看起来……正在调用控制器操作 有某种 lambda 在闭包上运行（DynamicClass.lambda_method） - 管道中自定义的东西。SearcherFactory.GetSearcher 手动尝试解决 smoething。在 GetSearcher 的解析过程中，有些东西要求收集 - 比如服务的 IEnumerable。构造函数参数？这就是它变得奇怪的地方：在解决该 IEnumerable 时，正在创建一个新的生命周期范围，并且似乎正在其中注册一些东西？LifetimeScope.ResolveComponent 调用确实会执行锁定以确保解决方案是线程安全的。您遇到死锁的事实意味着两个不同的线程正在尝试同时解决相同的生命周期范围（容器？），在 MVC 中，是要避免的事情 - 例如，如果您只在 HttpRequest 生命周期范围之外解析，您可能不会遇到这种情况，因为您一次只能在一个线程上使用它。或者，您可能会在应用程序中传递生命周期范围以进行服务定位，这也可能是一个危险信号。
> 
> 有一个关于并发的 wiki 页面也可以给你一些指示：[https ://code.google.com/p/autofac/wiki/Concurrency](https://code.google.com/p/autofac/wiki/Concurrency)
> 
> 如果这不能让你朝着你需要的方向前进，我建议你在讨论论坛上发帖，因为，我真的不能及时提供个人帮助。这会引起其他人的注意，并可能更快地为您提供帮助。您需要包括： 问题描述（就像这封电子邮件中的内容），但更详细地说明您期望发生的事情（例如，您正在访问执行 blah blah blah 的控制器操作）。阻塞线程的堆栈跟踪。事情被阻止的代码：您最初的 ContainerBuilder 注册，以显示事情是如何被注册的。那些构造函数和正在挂起的东西中有什么。该信息将帮助人们更快地根除问题。那'

**我的补充问题详细信息：**

服务器经常不规律的挂起，浏览器会突然停止响应，我们使用iisreset命令重启服务器。我不确定当时是否调用了控制器或触发了某些 Quartz 任务。

在 Application_Start() 中，我们使用 ContainerBuilder.Register() 在同一根生命周期范围内注册许多组件。并且这些组件可以相互调用。

他们大多数注册为 SingleInstance，例如：

```
containerBuilder.Register(c => new DefaultCacheService(new MemcachedCache())).As<ICacheService>().SingleInstance();
containerBuilder.Register(c => new QuartzTaskScheduler()).As<ITaskScheduler>().SingleInstance();
containerBuilder.Register(c => new UserService()).As<IUserService>().SingleInstance();
containerBuilder.Register(c => new UserSearcher("~/App_Data/IndexFiles/User")).As<ISearcher>().SingleInstance();
containerBuilder.Register(c => new TagSearcher("~/App_Data/IndexFiles/Tag")).As<ISearcher>().SingleInstance(); 
```

只有少数注册为InstancePerHttpRequest，这些组件的初始化与每个请求相关。如：

```
containerBuilder.Register(c => new FormsAuthenticationService()).As<IAuthenticationService>().InstancePerHttpRequest(); 
```

我们提供了一个类（DIContainer），其中包含一些用于组件解析的简单静态方法。在解析组件时调用静态方法，例如在某些 Controller、Service、Repository(DAO) 或 Quartz 任务中。

```
IContainer container = containerBuilder.Build();
DIContainer.RegisterContainer(container); 
DependencyResolver.SetResolver(new AutofacDependencyResolver(container));

public class DIContainer
{
   private static IContainer _container;

   public static void RegisterContainer(IContainer container)
   {
       _container = container;
   }

   public static TService Resolve<TService>()
   {
       return _container.Resolve<TService>();
   }
   ......
} 
```

我们使用Lucene.Net做全文搜索服务，每个ISearcher对应一个搜索类型和一个索引目录。需要时在 SearcherFactory.GetSearcher() 中解析 ISearcher。

```
public static ISearcher GetSearcher(string IndexPath)
{
   return DIContainer.Resolve<IEnumerable<ISearcher>>().Where(s => s.IndexPath.Equals(IndexPath, StringComparison.InvariantCultureIgnoreCase)).FirstOrDefault();
} 
```

就是这样，但我仍然无法弄清楚根本原因。希望得到您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T04:36:56.803

Resolve 方法的内部实现是 LifetimeScope.GetOrCreateAndShare，该方法使用线程锁。查看 ProfileRepository 的静态构造函数，可能构造函数的线程锁和 autofac 的线程锁构成死锁。

# java - 如何从 xpage 按钮单击事件触发 java 代理？

> ID：15286232
> 
> 赞同：0
> 
> 时间：2013-03-08T03:30:35.870
> 
> 标签：java, xpages, lotus-domino, lotus

我想通过触发我的 xpage 上的按钮单击事件来测试 java 代理以清除视图中的所有文档。我在 java 代理中没有错误，但它不工作。你能帮我度过这个阶段吗？

*按钮点击事件：*

```
var serverName=session.getCurrentDatabase().getServer();
//@WarningMessage("current one");
//@WarningMessage("server=" + serverName);
//var db:NotesDatabase = session.getDatabase(session.getCurrentDatabase().getServer(), "\ProTexII.nsf");
var db:NotesDatabase=session.getCurrentDatabase();
@WarningMessage("db=" + db);

var agent:NotesAgent = db.getAgent("SnapShotUpdate");
@WarningMessage("agent" + agent);

if (agent!=null){

 agent.run();
 @WarningMessage("view is fired!");

} 
```

*Java 代理：*

```
package javaPkg;
import java.io.PrintWriter;

import lotus.domino.*;

public class SnapShotUpdate extends AgentBase{

 public void NotesMain() {
       try {

         //String p = session.getPlatform();
           //PrintWriter out=getAgentOutput();

          System.out.println("Hello i never give it up!!");

          Session session = getSession();
          AgentContext agentContext =session.getAgentContext();
          Database db=session.getCurrentDatabase();

          //**clear view "vActualSalesFromSD" before copying documents into it

          DocumentCollection dc= db.createDocumentCollection();
          View view= db.getView("vActualSalesFromSD");
          Document docToBeCleared= view.getFirstDocument();

          while (docToBeCleared != null) {

             {
                dc.addDocument(docToBeCleared);
             }

                docToBeCleared = view.getNextDocument(docToBeCleared);
          }

          dc.removeAll(true);
       } catch(Exception e) {
         e.printStackTrace();
       }
     }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T06:14:29.900

您有 3 种可能性来触发您的代码：

1.  你采取的方法
2.  对 /yourdatabase.nsf/SnapshotUpdate?OpenAgent 进行 ajax 调用
3.  不要使用代理（**强烈**推荐）-> 它已经是 Java，使用一个类并在你的 SSJS 中调用它

可能出什么问题：

1.  代理的目标不是“无”
2.  您在该数据库中没有删除权限
3.  您无权运行代理（不太可能，因为您可以运行 XPage）

我会这样写循环：

```
 public function clearView(Database db, String vName ) {
     try {
         View view= db.getView("vActualSalesFromSD");
         Document docToBeCleared= view.getFirstDocument();
         Document nextDoc = null;

         while (docToBeCleared != null) {
            nextDoc = view.getNextDocument(docToBeCleared);
            try {
                 docToBeCleared.remove(true);
                } catch (Exception didntWork) {
                // Do some logging here
                }
            // Recycle your objects
            doc.recycle();
            docToBeCleared = nextDoc;             
         }

        // cleanup, we recycle what we opened, but not the parameters
        // nextDoc and docToBeCleared are null already;
        v.recycle();

     } catch(Exception e) {
         e.printStackTrace();
     }
 } 
```

让我们知道你的进步。

# php - 我的代码有什么问题？数据不会从数据库中删除

> ID：15286233
> 
> 赞同：0
> 
> 时间：2013-03-08T03:30:40.837
> 
> 标签：php, database, delete-row

我已经更新了代码，但不断收到新的错误。我真的希望有人可以帮助我并查看我的代码以查看问题所在。我在网页上有一个数据库表，每个表行都有一个编辑按钮和一个删除按钮。目前我只是想让删除按钮工作，即使我选择了该 ID，它也不会删除数据库中的行。看起来它正在获取正确的 ID。

有人能告诉我出了什么问题吗？下面是代码...

```
<?php 

    require 'connect.inc.php';

    if (isset($_POST['delete']) && isset($_POST['id'])) {
        $id = get_post('id');
        $query = "DELETE FROM movies WHERE id='.$id.' LIMIT 1";

        if (!mysql_query($query, $db_server))
            echo "DELETE failed: $query<br>".
            mysql_error() . "<br><br>";
    }

    $query = "SELECT * FROM movies, categories WHERE movies.genre_id = categories.genre_id";
    $result = mysql_query($query);

    if (!$result) die ("Database access failed:" .mysql_error()) ;
    $rows = mysql_num_rows($result);

    echo '<table><tr><th>Title</th><th>Release year</th><th>Genre</th><th>Director</th><th>Update</th><th>Delete</th></tr>';

    for ($j = 0 ; $j < $rows ; ++$j) {
    $row = mysql_fetch_row($result);
    //$id = $row[0];
    echo '<tr><td>' .$row[1] . '</td>' ;
    echo '<td>' .$row[2] . '</td>' ;
    echo '<td>' .$row[3] . '</td>' ;
    echo '<td>' .$row[4] . '</td>' ;
    echo '<td>'."<a href='edit_movie.php?edit=" . $row[0] . "'>Edit</a>".'</td>';
    echo '<td><form action="index.php" method="POST">
                <input type="hidden" name="delete" value="yes" />
                <input type="hidden" name="id" value="'. $row[0] .'" /> 
                <input type="submit" value="Delete" /></form>
                </td></tr>' ;
    }
    echo '</table>'; 

    include 'add_movie.php';

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:35:48.847

**您忘记关闭操作属性。**

您已将`echo '<td><form action="index.php method="POST">`其更改为

```
echo '<td><form action="index.php" method="POST"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:45:41.400

**需要明确的是：'mysql_query' 和随附的命令已被弃用，实际上不应使用。**然而，OP 表示它是分配所必需的。替换它们的最简单方法是改用“mysqli_*”。对于使用参数绑定来避免 sql 注入的示例： [http ://www.php.net/manual/en/mysqli-stmt.bind-param.php](http://www.php.net/manual/en/mysqli-stmt.bind-param.php)

不应该是：

```
if (isset($_POST['delete']) && isset($_POST['id'])) {
        $id = mysql_real_escape_string($_POST['id']);
        ... 
```

有关“get_post”的一些信息，请参阅此链接： [PHP：get_post 有问题](https://stackoverflow.com/questions/4068855/php-having-a-problem-with-get-post)

问题在于函数'get_post'是在课程文献的下一页上定义的，提问者没有注意到。

变量 $_POST['id'] 包含通过 HTTP POST 请求从表单发送的 id 值。您检查该值是否已设置，然后您应该像我写的那样将其分配给'$id'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T03:41:25.940

您的删除 sql 有错误的引号

```
$query = "DELETE FROM movies WHERE id='.$id.' LIMIT 1"; 
```

更改为

```
$query = "DELETE FROM movies WHERE id=".$id." LIMIT 1"; 
```

或者

```
$query = "DELETE FROM movies WHERE id=$id LIMIT 1"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T03:41:30.793

尝试更改表单操作

```
'<td><form action="index.php" method="POST"> 
```

还要检查您的数据库连接是否正确建立

也许这可能对 get_post 有所帮助

[PHP：get_post 有问题](https://stackoverflow.com/questions/4068855/php-having-a-problem-with-get-post)

# c - 参加预选赛 - postgresql

> ID：15286245
> 
> 赞同：4
> 
> 时间：2013-03-08T03:32:16.697
> 
> 标签：c, postgresql, postgresql-8.4

我正在研究 postgresql 8.4 源代码。我需要从查询中推断出限定词（其中部分）。

例如，如果查询是：`select name from student where age > 18` 我需要知道“年龄”和“18”。

我已经把目标列表和范围列表这样取了

```
Query *query_idr = (Query *)linitial(querytree_list);
ListCell *l;
ListCell *tl;
foreach(l, query_idr->rtable){
        Oid tab_idT = ((RangeTblEntry *) lfirst(l)) ->relid;
}
foreach(tl, query_idr->targetList){
        TargetEntry *tle = (TargetEntry *) lfirst(tl);
        Oid col_id = tle->resorigtbl;
} 
```

它有效，我得到了表的 id `student`（第一个 foreach）和`name`列的 id（第二个 foreach），但我不明白我必须如何使用限定符。

这是可导航的查询结构[http://doxygen.postgresql.org/structQuery.html](http://doxygen.postgresql.org/structQuery.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T02:14:00.043

我怀疑你会在这里得到答案。一般来说，破解 PostgreSQL 源代码可能没有足够的人来回答这个问题，这样的一般网站会有所帮助。但是，我不想留下任何此类资源，而是提供一份资源列表，用于回答此类问题，以及作为在 Pg 上构建事物的经验丰富的人阅读文档。

本质上，您要做的是浏览查询的解析树。在我看来，setOperations 成员可能只是因为我想不出其他任何地方，并且因为这可能有助于连接条件和 where 子句过滤器（请记住，规划者认为这些是可互换的）。但是我在这方面的经验很少，所以我可能是错的。

我完全赞成 pgsql-hackers 列表可能是提出此类问题的最佳场所的建议。你可能会在那里得到更好的答案。

# matlab - Matlab中的线条动画

> ID：15286248
> 
> 赞同：0
> 
> 时间：2013-03-08T03:32:24.020
> 
> 标签：matlab, animation, graphics, 3d, line

首先，我要感谢所有做出贡献的人。

我想动画一条线，在它的末端有一个标记，从原点到沿着轨迹的 XYZ 值。我的轨迹包含 2000 个 XYZ 值并在半圆中移动。但是，我似乎无法删除前一行。换句话说，Matlab 在每个 XYZ 值处画线。请检查我的代码并告诉我我做错了什么。

```
figure(1);
grid on;
xlim([-2.5,2.5]);
xlabel('X Axis');
ylim([-2.5,2.5]);
ylabel('Y Axis');
zlim([-2.5,2.5]);
zlabel('Z Axis');

set(gcf,'Renderer','OpenGL');
h = plot(x(1),y(1),z(1),0,'o','MarkerSize',10,'MarkerFaceColor','b');
set(h,'EraseMode','normal');

i = 1;

while i <= length(x)  
  set(h,'XData',x(i));
  set(h,'YData',y(i));
  set(h,'ZData',z(i));
  line([0 x(i)],[0 y(i)],[0 z(i)],'LineWidth',2,'EraseMode','normal');
  drawnow;
  i = i + 1;
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:58:31.100

您正在寻找的是在绘制下一次迭代之前清除图形的内容。因此，请在开始时尝试`clf`在您的 while 循环中使用。

这是文档：[`clf`参考 - Mathworks](http://www.mathworks.com/help/matlab/ref/clf.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T08:11:06.483

你不要删除旧的。

使用类似的东西：

```
delete(l)  % if it exists  
l = line([0 x(i)],[0 y(i)],[0 .... 
```

# android - 如何修复错误说 DeferFlushOpWorker: Timed out waiting for ops to flush？安卓

> ID：15286254
> 
> 赞同：0
> 
> 时间：2013-03-08T03:32:42.903
> 
> 标签：android, debugging, serialization, bitmap, deserialization

运行我的android应用程序，我得到上面提到的错误，然后我正在调试的手机变得无响应，直到我强制重启它。导致错误发生的代码在此类中：

```
public class BitmapSerializable implements Serializable 
{

/**
 * 
 */
private static final long serialVersionUID = 6855267020377781806L;

private transient Bitmap image;
private byte[] imageByteArray;

public BitmapSerializable()
{

}

public BitmapSerializable(Bitmap bmp)
{
    setImage(bmp);
}

public Bitmap getImage() {
    if (imageByteArray == null)
    {
        return null;
    }
    image = BitmapFactory.decodeByteArray(imageByteArray, 0, imageByteArray.length);
    return image;
}

public void setImage(Bitmap image) {
    this.image = image;
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    image.compress(Bitmap.CompressFormat.PNG, 100, baos);
    imageByteArray = baos.toByteArray();
}

 } 
```

当我序列化这个对象，读回它，然后调用 getImage() 方法时会抛出错误。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T03:15:56.430

知道了。问题不在于序列化本身，当我尝试添加 do intent.putExtra("bs", BitmapSerializable); 时发生错误。对于出现此错误的其他任何人，可能是尝试打包类似于我的班级的东西。

# sql - 循环遍历记录集并使用结果执行另一个 SQL 选择并返回结果

> ID：15286255
> 
> 赞同：5
> 
> 时间：2013-03-08T03:33:00.097
> 
> 标签：sql, sql-server, stored-procedures

我对存储过程完全陌生。这一次，我需要在 MS SQL 中创建一个存储过程。

假设我有下表。

```
 Table name: ListOfProducts  
      --------------------------
       SomeID, ProductID  

         34, 4
         35, 8
         35, 11 
```

我如何传递 SomeID。使用此 SomeID 从表 ListOfProducts 中选择记录集。然后循环遍历这个记录集。

假设我传入 SomeID = 35。

因此，记录集将返回 2 条 SomeID 为 35 的记录。在循环中，我将获得 ProductID 8 和 11，这将用于从另一个表中进行另一个选择。

存储过程应返回第二次选择的结果。

如何在 MS SQL 存储过程中执行此操作？

对不起，这个新手问题。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T06:45:50.757

如果你想遍历记录。你可以这样做：

```
--Container to Insert Id which are to be iterated
Declare @temp1 Table
(
  tempId int
)
--Container to Insert records in the inner select for final output
Declare @FinalTable  Table
(
  Id int,
  ProductId int
)

Insert into @temp1 
Select Distinct SomeId From YourTable

-- Keep track of @temp1 record processing
Declare @Id int
While((Select Count(*) From @temp1)>0)
Begin
   Set @Id=(Select Top 1 tempId From @temp1)

   Insert Into @FinalTable 
   Select SomeId,ProductId From ListOfProducts Where Id=@Id

   Delete @temp1 Where tempId=@Id
End

Select * From @FinalTable 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T11:43:46.310

如果您不需要对无法在整个集合上完成的产品执行某些操作，那么编写显式循环可能没有意义。SQL Server 可以自己更好地处理这样的事情。我不知道你的桌子是什么样子的，但你应该尝试一些看起来更像这样的东西。

```
CREATE PROC dbo.yourProcName 
   @SomeID int
AS 
BEGIN
    SELECT
        P.ProductId,
        P.ProductName
    FROM
        Product P
        JOIN 
            ListOfProducts LOP
            ON LOP.ProductId = P.ProductId
    WHERE
        LOP.SomeId = @SomeID 
END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-28T16:57:27.780

为了从选择的结果集开始/结束时间中提取小时数，然后创建一个每小时迭代的新表，我必须做类似的事情。

```
DECLARE @tCalendar TABLE
(
    RequestedFor VARCHAR(50),
    MeetingType VARCHAR(50),
    RoomName VARCHAR(MAX),
    StartTime DATETIME,
    EndTime DATETIME
)

INSERT INTO @tCalendar(RequestedFor,MeetingType,RoomName,StartTime,EndTime)
SELECT req as requestedfor
      ,meet as meetingtype
      ,room as rooms
      ,start as starttime
      ,end as endtime

      --,u.datetime2 as endtime
    FROM mytable

        DECLARE @tCalendarHours TABLE
    (
        RequestedFor VARCHAR(50),
        MeetingType VARCHAR(50),
        RoomName VARCHAR(50),
        Hour INT
        )

    DECLARE @StartHour INT,@EndHour INT, @StartTime DATETIME, @EndTime DATETIME
    WHILE ((SELECT COUNT(*) FROM @tCalendar) > 0)   
    BEGIN
        SET @StartTime = (SELECT TOP 1 StartTime FROM @tCalendar)
        SET @EndTime = (SELECT TOP 1 EndTime FROM @tCalendar)
        SET @StartHour = (SELECT TOP 1 DATEPART(HOUR,DATEADD(HOUR,0,StartTime)) FROM @tCalendar)
        SET @EndHour = (SELECT TOP 1 DATEPART(HOUR,DATEADD(HOUR,0,EndTime)) FROM @tCalendar)
        WHILE @StartHour <= @EndHour
        BEGIN
            INSERT INTO @tCalendarHours
            SELECT RequestedFor,MeetingType,RoomName,@StartHour FROM @tCalendar WHERE StartTime = @StartTime AND EndTime = @EndTime
            SET @StartHour = @StartHour + 1
        END
        DELETE @tCalendar WHERE StartTime = @StartTime AND EndTime = @EndTime
    END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T04:45:49.527

做这样的事情：

```
Declare @ID int

SET @ID = 35

SELECT
   p.SomeID
  ,p.ProductID
 FROM ListOfProducts p
  WHERE p.SomeID = @ID
 -----------------------
   --Or if you have to join to get it
  Declare @ID int

  SET @ID = 35

    SELECT
      c.SomeID
      ,p.ProductID
      ,p.ProductName

    FROM ListOfProducts p
    INNER JOIN categories c on p.ProductID = c.SomeID
    WHERE p.SomeID = @ID 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T07:30:05.900

您可以将选项与[WHILE](http://msdn.microsoft.com/en-us/library/ms178642.aspx)循环和[BREAK/CONTINUE](http://msdn.microsoft.com/en-us/library/ms181271.aspx)关键字一起使用

```
CREATE PROC dbo.yourProcName
@SomeID int
AS
BEGIN
  IF OBJECT_ID('tempdb.dbo.#resultTable') IS NOT NULL DROP TABLE dbo.#resultTable
  CREATE TABLE dbo.#resultTable
   (Col1 int, Col2 int)  
  DECLARE @ProductID int = 0
  WHILE(1=1)
    BEGIN
      SELECT @ProductID = MIN(ProductID) 
      FROM ListOfProducts 
      WHERE SomeID = @SomeID AND ProductID > @ProductID

      IF @ProductID IS NULL
      BREAK
      ELSE

      INSERT dbo.#resultTable
      SELECT Col1, Col2
      FROM dbo.yourSearchTable
      WHERE ProductID = @ProductID

      CONTINUE      
    END
  SELECT *
  FROM dbo.#resultTable 
END 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/e3d2d/1)上的演示[](http://sqlfiddle.com/#!3/e3d2d/1)

# ruby-on-rails - 接受多个记录的嵌套属性

> ID：15286257
> 
> 赞同：0
> 
> 时间：2013-03-08T03:33:03.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有两个资源：推荐和评分。

推荐型号：

```
class Recommendation < ActiveRecord::Base
  has_many :ratings
  accepts_nested_attributes_for :ratings
end 
```

评级模型：

```
class Rating < ActiveRecord::Base  
  belongs_to :recommendation
end 
```

建议控制器：

```
class RecommendationsController < ApplicationController

  def index
    @product = Product.find(params["product_id"])
    @recommendations = Recommendation.find(:all, :joins => :products, :conditions => ["product_id = ?", (params["product_id"])])
    @recommendation = Recommendation.new
    @rating = Rating.new
  end

  def create
    #need to find_or_create new rating based on recommendation_id 
  end  

end 
```

推荐指数：

```
<div id ="prods_container">
  <%= form_for @recommendation do |f| %>
    <%= f.fields_for @rating do |r| %>
      <% @recommendations.each do |rec| %>
        <%= rec.title %>
        <div id="rec_note_text"><%= r.text_field :notes %></div>
      <% end %>
      <%= f.submit %>
    <% end %>
  <% end %>
</div> 
```

我正在尝试为每个“推荐”对象添加一个注释字段，我需要在我的`create`操作/推荐控制器中更新评级表。如何将正确的 ID 传递给我的控制器以实现此目的？

# php - 将 PHP 进程作为守护进程运行，同时从后台安全地杀死它

> ID：15286264
> 
> 赞同：4
> 
> 时间：2013-03-08T03:34:11.957
> 
> 标签：php, kill-process, daemons

我们正在运行一个 PHP 守护程序，它查看队列，接收工作人员作业并生成工作人员来处理它。工人自己在继续之前获得特定位置的锁定。

我们将守护进程生成为 nohup 后台进程。

整个架构似乎都可以工作，除非我们出于某种原因必须终止进程。如果我们使用 -9 杀死它们，则无法将其捕获在工作进程中并在死前释放锁。

如果我们使用小于 -9 的任何东西（如 TERM 或 HUP），它似乎不会被守护进程或工作进程接收。

有没有人以更好的方式解决了这个问题？

（ps：顺便说一句，由于其他考虑，我们可能无法更改我们的实现语言，所以请只考虑基于 PHP 的解决方案）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T16:50:15.950

我也有过相关问题。让我解释。我有一个像下载器一样工作的 php '守护进程'。它定期访问提要并从网络下载（laaaarge）内容。守护进程必须在某个时间停止，比如说早上 0500，以防止它在白天使用整个带宽。我决定使用 cronjob 将 SIGTERM 发送到 0500 的守护进程。

在守护程序中，我有以下代码：

```
pcntl_signal(SIGTERM, array($this, 'signal_handler')); 
```

`signal_handler`看起来像这样：

```
public function signal_handler($signal) {
    // some cleanup code 
    exit(1);
} 
```

不幸的是，这不起作用：|

我花了一段时间才知道发生了什么。我首先想到的是，我必须[`pcntl_signal_dispatch()`](http://php.net/manual/de/function.pcntl-signal-dispatch.php) 在 init 上调用该方法才能完全启用信号调度。引用文档（[评论](http://www.php.net/manual/de/function.pcntl-signal-dispatch.php#92812)）：

> 如果您将 PHP 作为 CLI 和“守护程序”（即在循环中）运行，则必须在每个循环中调用此函数以检查是否有新信号正在等待分派。

好的，到目前为止，它似乎工作。但我很快意识到，在某些条件下，即使这样也不会按预期工作。有时守护进程只能被阻止`kill -9`- 就像以前一样。:|

那么问题出在哪里？.. 答：我的程序调用`wget`通过`shell_exec`. 问题是，`shell_exec()`阻塞一直等到子进程终止。在此阻塞等待期间，未完成任何信号处理，只能使用 SIGKILL 终止该进程——这很难。还有一个问题是子进程必须一个一个地终止，因为它们在杀死父亲后变成了僵尸进程。

我对此的解决方案是使用子进程执行子进程，`proc_open()`并`stream_select()`在其输出上使用非阻塞 IO。

现在它就像一个魅力。:) 如果您需要更多信息，请随时发表评论。

* * *

*注意*如果您使用的是 PHP < 5.3，那么您必须使用 `

```
declare(ticks=1); 
```

而不是`pcntl_signal_dispatch()`. 您可以参考相关文档[`pcntl_signal()`](http://www.php.net/manual/en/function.pcntl-signal.php)。但如果可能的话，你应该升级到 PHP >= 5.3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T06:27:01.833

只需添加刻度即可解决问题：

```
// tick use required as of PHP 4.3.0
declare(ticks = 1); 
```

不理会这会导致我的代码无法工作。

*（不幸的是 pcntl_signal 的文档并没有以更引人注目的方式提及它。）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T03:38:49.657

您需要捕捉信号（SIGTERM）。这可以通过函数[pcntl_signal](http://php.net/manual/en/function.pcntl-signal.php)来实现。这将使您可以选择在调用 exit 之前执行任何必要的功能。

# python - 我如何在 django 管理员更改列表页面中删除和编辑链接

> ID：15286268
> 
> 赞同：0
> 
> 时间：2013-03-08T03:35:08.927
> 
> 标签：python, django

我正在使用 django 管理员。

但是目前每行前面都没有删除链接。他们已经删除了选定的东西，但我想删除和编辑每一行模型。

我怎么能在 django admin 中做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:42:35.907

```
class MyAdmin(models.ModelAdmin):
    list_display = ('other_field', 'delete_link', 'edit_link')

    def delete_link(self, obj):
        info = obj._meta.app_label, obj._meta.module_name
        url = reverse('admin:%s_%s_delete' % info, args=(obj.id,))
        return '<a href="%s">Delete</a>' % url
    delete_link.allow_tags = True
    delete_link.short_description = 'Delete'

    def edit_link(self,obj):
        return u'<a href="/admin/%s/%s/%s">Edit</a>' % (
             obj._meta.app_label, obj._meta.module_name, obj.id)
    edit_link.allow_tags = True
    edit_link.short_description = "Edit" 
```

**更新：**

```
def action_link(self, obj):
    app_name = obj._meta.app_label
    url_name = obj._meta.module_name
    data_id = obj.id

    return """
         <ul>
            <li><a href="/admin/{0}/{1}/{2}">Edit</a></li>
            <li><a href="/admin/{0}/{1}/{2}/delete">Delete</a></li>
         </ul>
         """.format(
         obj._meta.app_label, 
         obj._meta.module_name, 
         obj.id)
action_link.allow_tags = True
action_link.short_description = 'Actions' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:40:59.113

可以使用`list_editable`admin 选项在 Django admin 中内联编辑字段：[https ://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_editable](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.list_editable)

但是，没有内置选项可以为每一行添加删除链接。这是您需要自己添加的内容。您需要使用模型上的属性组合来添加到`list_display`更改列表中，以获取更改列表中的“删除”文本，以及一些 JavaScript 来确认删除。我不会在一个动作中触发删除。

是否要通过 Ajax 触发删除操作，或者是否要将它们重定向到删除视图等取决于您。希望这可以帮助您入门。

# jquery - 在窗口调整大小时调整具有多个图像的 DIV

> ID：15286271
> 
> 赞同：1
> 
> 时间：2013-03-08T03:35:22.717
> 
> 标签：jquery, css, html, image-resizing, fluid

所以我有 5 个三角形图像在 div 中彼此相邻嵌套。我只是希望图像在窗口调整大小时调整大小，或者只是在不同分辨率下保持一定的纵横比。我目前有固定的宽度，但 100% 接受替代方法来使其工作，甚至是正确的方法。

**HTML**

```
<div id="projects">

    <div id="project_1">
        <div id="snitch">   
            <img class="tribox1" src="" />
            <img class="tribox2" src="" />
            <img class="tribox3" src="" />
            <img class="tribox4" src="" />
            <img class="tribox5" src="" />  
        </div>  
    </div>

    <div id="project_2">
        <div id="snitch">   
            <img class="tribox1" src="" />
            <img class="tribox2" src="" />
            <img class="tribox3" src="" />
            <img class="tribox4" src="" />
            <img class="tribox5" src="" />  
        </div>  
    </div>

    <div id="project_3">
        <div id="snitch">   
            <img class="tribox1" src="" />
            <img class="tribox2" src="" />
            <img class="tribox3" src="" />
            <img class="tribox4" src="" />
            <img class="tribox5" src="" />  
        </div>  
    </div>

    <div id="project_4">
        <div id="snitch">   
            <img class="tribox1" src="" />
            <img class="tribox2" src="" />
            <img class="tribox3" src="" />
            <img class="tribox4" src="" />
            <img class="tribox5" src="" />  
        </div>  
    </div>

    <div id="project_5">
        <div id="snitch">   
            <img class="tribox1" src="" />
            <img class="tribox2" src="" />
            <img class="tribox3" src="" />
            <img class="tribox4" src="" />
            <img class="tribox5" src="" />  
        </div>  
    </div>
</div> 
```

**CSS**

```
body {
    background-color: #1b1b1b;
    margin: 0;
    padding: 0; 
    overflow: hidden ;
    position: relative;
    -webkit-transition: left .2s ease;
    top:0px;
    left:0px;
    bottom:0px;
    width: 9800px;
}   

#projects {
    padding-top: 3.085%;
}   

#project_1, #project_2, #project_3, #project_4, #project_5 {
    float: left;    
}

#snitch {
    width: 1960px;
}

.tribox1 {
    background-repeat: no-repeat;   
    background-position: bottom;
    padding-top: 5px;   
}

.tribox2 {
    background-repeat: no-repeat;
    background-position: left center;   
    margin-left: -498px;    
}

.tribox3 {
    background-repeat: no-repeat;
    background-position: center;
    margin-left: -501px;    
}

.tribox4 {
    background-repeat: no-repeat;
    background-position: right center;  
    margin-left: -500px;
}

.tribox5{
    background-repeat: no-repeat;   
    background-position: bottom right;
    margin-left: -464px;
    padding-top: 51px;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:12:50.573

如果要调整图像大小，请使用以下代码..

```
 $(window).resize(function () {
    var h = parseInt($(window).height(), 10);
    var w = parseInt($(window).width(), 10);
    $("img").css({
        'width': w,
        'height': h
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:47:26.393

听起来您在寻找流畅的布局和（我敢说）“响应式设计” - 将容器设置为 width:100% 并将图像设置为 float:left, width:20%, height:auto; 如果您有容器的最大尺寸，请将容器上的 max-width 设置为该尺寸。

# jms - org.apache.activemq.ActiveMQConnectionFactory 不能转换为 javax.jms.QueueConnectionFactory

> ID：15286273
> 
> 赞同：0
> 
> 时间：2013-03-08T03:35:36.860
> 
> 标签：jms

我已经在我的项目中集成了 JMS 并 `ActiveMQConnectionFactory cannot be cast to javax.jms.QueueConnectionFactory`在调用`JMS receiver`from servletcontext 侦听器时获得了异常，但它可以从`public static void main`方法中正常工作并且能够异步接收来自队列的消息。我能够使用`queueconnection`和`queuesession`从我的 Web 应用程序和使用将消息发送到队列`qconnection`实现`MessageListener`接口的 JMS 接收器函数中的方法相同。

任何人都可以建议我在 Web 应用程序启动时自动启动 JMS 接收器或使用者的最佳方式是什么，因为我`servletcontextlistener`习惯于自动开始侦听消息队列。

（两者都可以从方法中正常工作， `JMS queuesender`并且问题仅在调用from方法后才开始）`queuereceiver``public static void main``queuereceiver``contextinitialize`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T20:20:17.040

也许[这篇文章](http://activemq.2283324.n4.nabble.com/org-apache-activemq-ActiveMQConnectionFactory-cannot-be-cast-to-javax-jms-ConnectionFactory-td2367460.html)可以帮助你。

海报说，原因是类路径中有两个版本的 ActiveMQ-jars。

在我的例子中，原因是类路径中有 2 个版本的 javax.jms：ActiveMQ 附带的版本，以及我用来编译源代码的版本（ActiveMQ 应该只是我的应用程序的测试依赖项）。我将 maven 依赖项 javax.jms:jms:1.1 的范围从 compile 更改为 provided，这从我的 WAR 文件中删除了 javax.jms-jar，异常消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T12:07:11.433

是的，有一个版本问题，我能够通过使用这些版本的 activemq、jms 和 j2ee 依赖项来解决这个问题。

**ActiveMQ 5.8.0 及以上**

*   activemq-broker- **5.8.0**
*   activemq-client- **5.8.0**
*   geronimo-jms_ **1.1** _spec-1.1.1
*   geronimo-j2ee-management_ **1.1** _spec-1.0.1

**早期版本的 ActiveMQ**

*   activemq-core- **5.5.1**
*   geronimo-j2ee-management_ **1.0** _spec-1.0
*   geronimo-jms_ **1.1** _spec-1.1.1

> 检查它会帮助的版本

# algorithm - 关于冒泡排序与归并排序

> ID：15286275
> 
> 赞同：9
> 
> 时间：2013-03-08T03:35:48.840
> 
> 标签：algorithm, sorting

这是我最近在网上找到的一个面试问题：

如果你要实现一个以整数数组作为输入并返回最大值的函数，你会使用冒泡排序还是归并排序来实现这个函数？如果数组大小小于 1000 怎么办？如果大于 1000 怎么办？

这就是我的想法：

首先，用排序来实现上面的功能真的很奇怪。您只需遍历数组一次并找到最大值。其次，如果必须在两者之间做出选择，那么冒泡排序会更好——您不必执行整个冒泡排序过程，而只需要执行第一遍。它在时间和空间上都优于归并排序。

我的回答有错误吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T04:30:35.760

这是一个技巧问题。如果您只想要最大值（或者实际上是任何 k 的第 k^个值，包括找到中位数），那么有一个非常好的`O(n)`算法。排序是浪费时间。这就是他们想听到的。

正如你所说，最大值算法真的很简单。要解决这样的问题，您应该准备好快速选择算法，并且还可以建议堆数据结构，以防您需要能够改变值列表并始终能够快速产生最大值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T03:57:01.473

我刚刚搜索了算法。冒泡排序在这两种情况下都会获胜，因为最大的好处是只需运行一次。归并排序因为只需要计算最大的数而不能减少任何捷径。Merge 取列表的长度，找到中间，然后中间下面的所有数字都比较左边，上面的所有数字都比较右边；反对创建独特的配对进行比较。这意味着对于数组中剩下的每个数字，需要进行相同数量的比较。除此之外，每个数字都会被比较两次，因此数组中的最低数字很可能会在两次比较中被淘汰。意味着在许多情况下进行两次比较后，数组中的数字只减少了一个。泡沫将占主导地位

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T03:45:38.827

首先，我同意您所说的一切，但也许它是在询问了解算法的时间复杂度以及输入大小如何成为最快的一个重要因素。

冒泡排序是，归并排序是。所以，在一个小集合上它不会有那么不同，但在很多数据上，冒泡排序会慢得多。`O(n²)``O(nlogn)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T04:55:39.957

除非最大部分，冒泡排序渐进地变慢，但它对小型有很大的优势，`n`因为它不需要合并/创建新数组。在某些实现中，这可能会使其实时更快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-13T01:50:43.967

只需要一次通过，在最坏的情况下，找到最大值你只需要遍历整个数组，所以气泡会更好..

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-29T09:27:03.387

归并排序对于计算机来说很容易对元素进行排序，而且排序时间比冒泡排序要少。合并排序的最佳情况是`n*log2n`，最坏情况是`n*log2n`。对于冒泡排序，最好的情况是`O(n)`，最坏的情况是`O(n2)`。

# sql-server - 拆分字符报告服务（字符“ENTER”）

> ID：15286276
> 
> 赞同：-1
> 
> 时间：2013-03-08T03:35:49.433
> 
> 标签：sql-server, reporting-services, reportingservices-2005

当我在报告服务上查看此数据时，我从数据库中有一行我得到了视图：

巴里斯 1 巴里斯 2

我想改变对报告服务的看法

1.  巴里斯 1
2.  巴里斯 2

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T01:35:01.420

我将使用 Split 函数与常量的组合：Constants.vbCrLf。在您的场景中，拆分可能很棘手 - 没有明显的分隔符可以拆分。

这个例子可能会让你开始：

=“1.”+拆分（字段！my_column.Value，“”）（0）+“”+拆分（字段！my_column.Value，“”）（1）+常量.vbCrLf+“2。”+拆分（ Fields!my_column.Value , " " )(2) + " " + 拆分 (Fields!my_column.Value , " ")(3)

# javascript - HTML 中的 jQuery 文本高亮显示

> ID：15286277
> 
> 赞同：-1
> 
> 时间：2013-03-08T03:35:55.680
> 
> 标签：javascript, jquery, html, css, livesearch

我有一个文本字段，用户可以在其中搜索地点名称。如何突出显示结果上的文本，**不包括**结果中显示的用户输入的内容？以下是我在 jQuery 中的代码：

```
<input maxlength="64" id="war_desc" name="searchtext" size="20" class="form200" autocomplete="off" value="">

<div class="auto-complete autocomplete_choices" data-component-bound="true" style="top: 352px; left: 352.5px; width: 172px; display: none;">
<ul>
        <!-- Search result will be append here by html() -->
</ul>
</div>

<script type="text/javascript">
$('#war_desc').keyup(function(e){
    var search_place = $(this).val();
    if(search_place == ''){
        $('.autocomplete_choices').hide();
    } else {
        $.ajax({
            url:'".$baseUrl."business/searchnew"."',
            data:{'search_place':$(this).val()},
            dataType:'json',
            Type:'POST',
            cache:false,
            success:function(data){

                var listHtml = '';
                for(var i=0; i<data.length; i++){
                listHtml += '<li class="item" data-display-value="Shoe Exchange" title=Shoe Exchange>'+data[i]['business_name']+'</li>';
            }
                $('.autocomplete_choices').show();
                $('.autocomplete_choices ul').html(listHtml);
            }
        });
    }
})
</script> 
```

以下是描述我的问题的图像：

![在此处输入图像描述](../Images/758a94269406202bef0bfb19a4fd0082.png)

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:14:03.317

You can use this simple string replace method

```
var str = "Hello zlippr";
str = "Hello"+str.replace(str,"<b>"+str+"</b>").replace("Hello","")
document.writeln(str) 
```

Your code will be like this

```
data[i]['business_name'] = $(this).val()+data[i]['business_name'].replace(data[i]['business_name'],"<b>"+data[i]['business_name']+"</b>").replace($(this).val(),"")
'<li class="item" data-display-value="Shoe Exchange" title=Shoe Exchange>'+data[i]['business_name']+'</li>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:45:21.570

使用peterm找到的答案here

[使用 jQuery 突出显示简单的文本](https://stackoverflow.com/questions/14163817/simple-text-highlight-with-jquery/14164015#14164015)

将最后一行从

```
$(this).html(text.replace(new RegExp("(" + keywords.join('|') + ")" , 'gi'), "<b>$1</b>")); 
```

至

```
$(this).html('<b>' + text.replace(new RegExp("(" + keywords.join('|') + ")" , 'gi'), "</b>$1<b>")) + '</b>'; 
```

[**演示**](http://jsfiddle.net/RTn3h/2)

# javascript - Chrome 使用什么语法荧光笔？

> ID：15286282
> 
> 赞同：1
> 
> 时间：2013-03-08T03:36:39.453
> 
> 标签：javascript, syntax-highlighting, google-chrome-devtools, chromium

Chrome/Chromium 在检查器中有一个语法高亮显示，在滚动时显示黑色文本，并在一段时间后高亮显示 - 不像 Firefox Web Developer Toolbar，它会高亮显示所有内容并且可能需要很长时间。既然inspector是用js/html写的，有没有办法在别处使用这个技术呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T06:48:59.883

Chrome 的 Devtools 使用 CodeMirror 作为源面板，您可以在其中编辑代码。[http://codemirror.net](http://codemirror.net)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:39:16.487

是的，你可以在这里找到源代码：

[https://developers.google.com/chrome-developer-tools/](https://developers.google.com/chrome-developer-tools/)

[以下是一些帮助您入门的说明。](https://developers.google.com/chrome-developer-tools/docs/contributing)

此外，请查看[Ace](http://ace.ajax.org/#nav=about)，它非常易于嵌入和使用，并且做得不错。Cloud9 使用它。

# ios - 根据单词自动调整标签大小

> ID：15286286
> 
> 赞同：0
> 
> 时间：2013-03-08T03:37:41.043
> 
> 标签：ios, cocoa-touch, uilabel, autoresizingmask

我想根据标签字段中的字数调整标签字体的大小。我怎么做？我可以使用固定尺寸，但看起来不太好。如果它在 iOS5 和 iOS6 上都能正常工作，那将是最好的。

需要一些指导。谢谢

编辑：

```
NSArray *versionCompatibility = [[UIDevice currentDevice].systemVersion componentsSeparatedByString:@"."];

    if ( 6 == [[versionCompatibility objectAtIndex:0] intValue] ) { 

        // Put iOS-6 code here
        titleLabel.minimumScaleFactor = 0.5;

    } else { 

        // Put iOS-5 code here
        titleLabel.minimumFontSize = 5;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:50:25.693

你可以这样做：

```
if(yourLabel.text.length <10){
    yourLabel.font=[yourLabel.font fontWithSize:20]
}
else if(yourLabel.text.length <15){
    yourLabel.font=[yourLabel.font fontWithSize:15]
}
else { //>20
    yourLabel.font=[yourLabel.font fontWithSize:10]
} 
```

或者，

检查您的标签是否设置为自动调整大小。在 IB 中，它被称为“自动收缩”。以编程方式：它被称为`adjustsFontSizeToFitWidth`

# r - 如何提取某些行

> ID：15286287
> 
> 赞同：1
> 
> 时间：2013-03-08T03:37:48.743
> 
> 标签：r, extract, subtraction

所以正如你所看到的，我在下面有一个价格和日期列

```
 Price  Day
    2   1
    5   2
    8   3
    11  4
    14  5
    17  6
    20  7
    23  8
    26  9
    29  10
    32  11
    35  12
    38  13
    41  14
    44  15
    47  16
    50  17
    53  18
    56  19
    59  20 
```

然后我想要下面的输出

```
 Difference    Day
    12  5
    15  10
    15  15
    15  20 
```

所以现在我每 5 天有一次价格差异......它基本上只是减去第 5 天和第 1 天......然后第 10 天和第 5 天等等......我已经做了一个代码将我的数据分成 5 天的间隔......但我想要的代码可以让我在第 1 天减去第 5 天......第 10 天和第 5 天......等等所以代码应该看起来像这样

```
difference<-tapply(Price[,1],Day, ____________) 
```

所以基本上 Price[,1] 将是我的价格数据.....而“Day”是我创建的变量，它可以让我将 Day 数据分成 5 天的间隔......我在想我可以放入函数或其他变量的空白部分，让我用第 1 天的价格减去第 5 天，然后再减去第 10 天和第 5 天的价格......等等......你不必帮我将我的日子分成间隔......只是如何做“差异”部分......谢谢大家

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T03:53:22.017

Here's one option, assuming your `data.frame` is called "SODF":

```
within(SODF[c(1, seq(5, nrow(SODF), 5)), ], { 
  Price <- diff(c(0, Price)) 
})[-1, ]
#    Price Day
# 5     12   5
# 10    15  10
# 15    15  15
# 20    15  20 
```

* * *

The first step is basic subsetting. According to your description and expected answer, you want the first row, and then every fifth row starting from row 5:

```
> SODF[c(1, seq(5, nrow(SODF), 5)), ]
   Price Day
1      2   1
5     14   5
10    29  10
15    44  15
20    59  20 
```

From there, you can use `diff` on the "Price" column, but since `diff` will result in a vector that is one in length shorter than your input, you need to "pad" the input vector, which I did with `diff(c(0, Price))`.

```
# Correct values, but the number of rows needs to be 5
> diff(SODF[c(1, seq(5, nrow(SODF), 5)), "Price"])
[1] 12 15 15 15 
```

Then, the `[-1, ]` at the end just deletes the extraneous row.

## Update

In the comments below, @geektrader points out in the comments (thanks!), an alternative to using:

```
SODF[c(1, seq(5, nrow(SODF), 5)), ] 
```

as your input `data.frame`, you may consider using the following instead:

```
rbind(SODF[1,], SODF[$Day %% 5 == 0,] ) 
```

The difference in the two approaches is that the first approach simply subsets by *row number*, while the second approach subsets according to the *value* in the "Day" column, extracting rows where "Day" is a multiple of 5\. This second approach might be useful, for instance, when there are missing rows in the dataset.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:59:47.837

Ananda's 是一个很好的方法（总是忘记我自己）。这是另一种方法：

```
dat2 <- dat[seq(0, nrow(dat), by=5), ]
data.frame(Difference=diff(c(dat[1,1], dat2[, 1])), Day=dat2[, 2]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:15:56.223

**如果您有一个矩阵作为输入，**这是一个解决方案。

随后的函数，给定一个矩阵`m`，一列`col_id`和一个数字区间`interv`，用前一个值减去每`interv`行矩阵`col_id`列中的当前值`m`（显然是之前的 5 行，相同的列）。

结果存储在一个名为`diff`并附加到`m`矩阵末尾的新列中。

简而言之，该方法与@Ananda Mahto 使用的方法非常相似。

所以，这是功能：

```
subtract_column <- function(m, col_id, interv) {
  select <- c(1, seq(interv, nrow(m), interv))
  cbind(m[select[-1], ], diff = diff(m[select, col_id]))
} 
```

例子：

```
# this emulates your data as a matrix
price_vect <- c(2,5,8,11,14,17,20,23,26,29,32,35,38,41,44,47,50,53,56,59)
day_vect <- 1:20
matr <- do.call(cbind, list(price = price_vect, day = day_vect))
# and this calls the function above and does the job:
# subtracts every 5 rows the current and the previous (5 rows back) value in the column `price` of matrix `matr`
subtract_column(matr, 'price', 5) 
```

输出：

```
 price day diff
[1,]    14   5   12
[2,]    29  10   15
[3,]    44  15   15
[4,]    59  20   15 
```

# python - 这个 Python 请求错误是什么意思？

> ID：15286288
> 
> 赞同：14
> 
> 时间：2013-03-08T03:37:55.367
> 
> 标签：python, couchbase

这个 Python 请求错误是什么意思？这是否意味着它尝试连接到服务器并且无法连接？是什么`[Errno 8] nodename nor servname provided, or not known`意思？

> 文件“python2.7/site-packages/requests/api.py”，第 55 行，在 get
> 
> 请求中的文件“python2.7/site-packages/requests/api.py”，第 44 行
> 
> 文件“python2.7/site-packages/requests/sessions.py”，第 279 行，在请求中
> 
> 文件“python2.7/site-packages/requests/sessions.py”，第 374 行，在发送中
> 
> 文件“python2.7/site-packages/requests/adapters.py”，第 209 行，在发送中
> 
> ConnectionError: HTTPConnectionPool(host='localhost', port=8091): Max retries exceeded with url: /pools/default (由: [Errno 8] nodename or servname provided, or not known

代码生成了这个：[http://github.com...](https://github.com/couchbase/couchbase-python-client/blob/master/couchbase/rest_client.py#L177)

```
class RestConnection(object):
    def __init__(self, serverInfo):
        #serverInfo can be a json object
        if isinstance(serverInfo, dict):
            self.ip = serverInfo["ip"]
            self.username = serverInfo["username"]
            self.password = serverInfo["password"]
            self.port = serverInfo["port"]
            self.couch_api_base = serverInfo.get("couchApiBase")
        else:
            self.ip = serverInfo.ip
            self.username = serverInfo.rest_username
            self.password = serverInfo.rest_password
            self.port = serverInfo.port
            self.couch_api_base = None

        self.base_url = "http://{0}:{1}".format(self.ip, self.port)
        server_config_uri = ''.join([self.base_url, '/pools/default'])
        self.config = requests.get(server_config_uri).json()
        # if couchApiBase is not set earlier, let's look it up
        if self.couch_api_base is None:
            #couchApiBase is not in node config before Couchbase Server 2.0
            self.couch_api_base = self.config["nodes"][0].get("couchApiBase") 
```

仅供参考，此错误是从 Couchbase Python 客户端生成的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T04:55:32.910

这意味着您尝试访问的主机名的 DNS 查找失败。例如，如果我尝试查找无效的主机名，则会收到相同的错误：

```
>>> import requests
>>> requests.get('http://apsoapsodjaopisjdaoij.com')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/requests/api.py", line 65, in get
    return request('get', url, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/requests/safe_mode.py", line 39, in wrapped
    return function(method, url, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/requests/api.py", line 51, in request
    return session.request(method=method, url=url, **kwargs)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/requests/sessions.py", line 241, in request
    r.send(prefetch=prefetch)
  File "/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/requests/models.py", line 631, in send
    raise ConnectionError(sockerr)
requests.exceptions.ConnectionError: [Errno 8] nodename nor servname provided, or not known 
```

检查 的值`serverInfo["ip"]`并确保其设置正确。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-08-22T22:08:35.020

为将来遇到这种情况的人添加我自己的经验。

事实证明，这实际上是因为我已经达到了系统上打开文件的最大数量。它与失败的连接无关，甚至与所示的 DNS 错误无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-29T20:39:10.207

如果您在这里是因为 twitter api 给出了这个错误，请尝试重新生成您的 Bearer 令牌，它会正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-11T17:15:11.440

不正确的 DNS，例如当使用 docker 服务并调用`http://host.docker.internal:8000`而不是`http://localhost:8000`当您不在 docker 服务本身时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-04T14:21:31.320

我在尝试连接到 .onion 站点时遇到了这个错误，事实证明我所要做的就是在我的 socks 代理名称前面加上“h”，如下所示：

```
proxies = {
    'http':  'socks5h://127.0.0.1:9050',
    'https': 'socks5h://127.0.0.1:9050'
    } 
```

这可能不是您的解决方案，但我发布此答案以防万一遇到与我相同问题的人在这里寻找解决方案

# android - eclipse重启时自动创建的Android依赖文件夹

> ID：15286290
> 
> 赞同：0
> 
> 时间：2013-03-08T03:38:15.410
> 
> 标签：android, eclipse

我的项目在构建路径中没有“Android Dependencies”文件夹的情况下执行良好。

但是当我重新启动/启动 eclipse 时，“Android Dependencies”会自动添加到项目中。

我是否需要更改 eclipse 中的任何设置来阻止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:41:51.827

Android Dependencies 是一个虚拟文件夹，Eclipse 在其中显示项目所依赖的 JAR 文件。它不是物理文件夹；你不会在你的硬盘上找到它。并且该文件夹未签入 Subversion。

**不要删除该文件夹。你会破坏你的项目。**

要修复它，只需恢复到较旧的 Subversion 版本并再次签入。名为“Library Projects”的动态类路径容器已重命名为“Android Dependencies”，因为它现在不仅仅包含 Library Projects。 [http://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

# android - 交替显示在 ViewPager 中的视图类型

> ID：15286297
> 
> 赞同：0
> 
> 时间：2013-03-08T03:38:52.927
> 
> 标签：android

我正在构建一个杂志电子阅读器应用程序，使用 viewpager 作为主要导航元素。文章对象被反序列化（来自从 REST Web 服务接收的数据），并用于膨胀由用户“翻阅”的寻呼适配器膨胀的“封面”。

这一切都可以完美地使用 PagerAdapter 和像这样的 instantiateItem 方法（将文章的 ArrayList 传递给适配器的构造函数）：

```
 @Override
    public Object instantiateItem(View arg0, int position) {

    final Article s = toShow.get(position);

    View v = getLayoutInflater().inflate(R.layout.previewpage, null);

    TextView hl = (TextView)v.findViewById(R.id.coverHl);
    ImageView img = (ImageView)v.findViewById(R.id.coverImg);

            ....

    hl.setText(s.title);
    img.setImageBitmap(s.image); 
```

我的问题是，在每第 6 个位置，我想增加一个不同的视图来展示广告。目前，我在此方法的顶部添加了一个 if 语句，例如：

```
if ((position != 0) && (position%6 == 0)){ 
```

之后我放大另一个视图并在其上放置适当的广告。但是，这会导致许多复杂情况：在下一个视图中，我不能再使用 toShow.get(position)，因为这样做会跳过数组中的一篇文章（位于广告展示位置的文章）。因此，我创建了一个`int adsShown`，每次显示广告时都会递增，然后调用`final Article s = toShow.get(position - adsShown)`. 但是当我这样做时，如果用户通过 viewpager 向后翻转，则会显示 ArrayIndexOutOfBounds 错误，因为它的 position-adsshown 为 -1。

我知道我可以找到解决这些问题的方法，但我怀疑是否有更简单的方法来处理这个任务。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:53:13.630

您可以使用以下方法获得正确的位置：

```
// check if position > 0 to make sure we don't start with an ad
if(position > 0 && position%6 == 0) {
  // get ad view here
else {
  int index = position - (int)Math.floor(position/6);
  final Article s = toShow.get(index);
  ...
} 
```

还要记住，您`getCount`必须返回文章数量加上广告数量，否则它不会显示您数组中的所有文章。

# c++ - 删除数组时访问冲突异常

> ID：15286300
> 
> 赞同：3
> 
> 时间：2013-03-08T03:39:31.557
> 
> 标签：c++, memory-management, c++-cli, access-violation

删除分配的内存时出现“访问冲突读取位置”异常，如下所示。

我有一个针对 Visual Studio 2010（工具集：v100）C++ 编译器编译的本机 dll。我有一个托管 dll 包装器，它是针对工具集 v90 编译的，因为我想针对.net 2.0。

托管包装器将对指针 (double *&myArray) 的引用传递给本机 dll 函数调用之一，该函数调用在内部创建一个动态数组并初始化数据。

但是，当托管包装器尝试通过调用 delete [] myArray 来释放包装器时，它会引发异常。如果我要求本机 dll 释放它，它似乎工作正常。

是因为受保护的本机 dll 地址空间，我得到了异常吗？如果我使用 v90 工具集编译本机 dll，包装器似乎会毫无例外地删除数组，这很奇怪。

在这种用例中删除内存的最佳方法是什么？

```
//Managed.cpp
void InitializeData()
{
    double *myArray;
    myNativeObj->InitializeArray(myArray);
    delete[] myArray; // <-- Exception here
}

//UnManaged.cpp
void InitializeArray(double *& myArray)
{
    myArray = new double[get_length()];
    //Initialize data to my array.
} 
```

谢谢，穆达西尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T04:47:00.187

您在一个 C++ 运行时 (v100) 中分配并在另一个 (v90) 中释放；那只是自找麻烦。

您应该调用您调用`delete[]`的同一个 DLL `new[]`（或者，至少从另一个使用相同运行时库的 DLL）中调用。这是复杂和混乱的吗？是的; 这就是发明 COM（然后是 .NET）的原因。

# iphone - 按钮单击事件中的 iRate

> ID：15286302
> 
> 赞同：1
> 
> 时间：2013-03-08T03:39:54.133
> 
> 标签：iphone, ios, uibutton, rate

我在我的 ios 应用程序中使用 IRate。

我在我的代码中处理了两类 iRate。这是我在 appDelegate 中的代码

```
+ (void)initialize
{
    //set the bundle ID. normally you wouldn't need to do this
    //as it is picked up automatically from your Info.plist file
    //but we want to test with an app that's actually on the store
    [iRate sharedInstance].applicationBundleID = @"com.s.s";
    [iRate sharedInstance].onlyPromptIfLatestVersion = NO;

    //enable preview mode
    [iRate sharedInstance].previewMode = NO;
    //[iRate sharedInstance].daysUntilPrompt = 5;
    //[iRate sharedInstance].usesUntilPrompt = 15;
} 
```

但是通过这个提示只能在应用程序启动时出现。

我想在按钮单击中打开它。

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:53:55.663

您可以引导用户访问应用商店并直接查看您的应用。将此行添加到您的按钮单击操作：

```
[[iRate sharedInstance] openRatingsPageInAppStore]; 
```

# binary - 二进制转二进制

> ID：15286304
> 
> 赞同：0
> 
> 时间：2013-03-08T03:40:22.010
> 
> 标签：binary, discrete-mathematics

学习如何将数字从整数转换为二进制。

我正在研究 0.36 的一小部分，它的二进制是 0.01011... 我知道如果你将一个分数乘以 2 并从顶部数字向下读取，则可以获得二进制。

所以

1.  .36 = 0 第一个数字
2.  .36 x 2 = .72 =1 ，它仍然低于零
3.  .72 x 2 = 1.44 = 0，因为它高于零
4.  1.44 x2 = 2.88 = 1，这是我被扔了，是不是因为 .88 更接近 1？
5.  2.88 x2 = 5.76 =1

给我.01011

那么是所有高于 0.5 =1 的东西吗？所以

我开始玩浮点数所以真的需要知道如何转换二进制分数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:58:22.997

你的方法是正确的。

一些直觉：要将整数转换为以 2 为底，您反复取 mod 2，给出下一个数字，然后除以 2。分数类似：将其视为转换为以 1/2 为底：反复取 mod 1/2 (1如果小数部分有 1/2，否则为 0），然后除以 1/2。

# git - 如何让 git repo 记住所有遥控器？

> ID：15286307
> 
> 赞同：18
> 
> 时间：2013-03-08T03:40:47.440
> 
> 标签：git, github, git-clone, git-remote

我有一个 git repo，它是另一个 repo 的一个分支。作为一项规则，我通常会添加一个名为 upstream 的远程，这是我分叉的原始存储库。

```
$ git remote -v
origin git@github.com:skela/awesomeproject.git (fetch)
origin git@github.com:skela/awesomeproject.git (push)
upstream git://github.com/bob/awesomeproject.git (fetch)
upstream git://github.com/bob/awesomeproject.git (push) 
```

有没有办法让这个额外的远程在克隆之间持久存在？假设我删除了本地存储库并执行以下操作：

```
git clone git@github.com:skela/awesomeproject.git 
```

现在我重新检查我的遥控器：

```
$ git remote -v
origin git@github.com:skela/awesomeproject.git (fetch)
origin git@github.com:skela/awesomeproject.git (push) 
```

我的上游遥控器消失了！

如何确保我的 git repo 始终保留这两个远程别名？

编辑：只是添加我想这样做的主要原因，以便将一些答案塑造成可接受的路径；）

目标是在我的 repo 中有一个分支来跟踪上游的 master。

```
[remote "upstream"]
    url = git://github.com/bob/awesomeproject.git
    fetch = +refs/heads/*:refs/remotes/upstream/*
[branch "father"]
    remote = upstream
    merge = refs/heads/master 
```

换句话说，我的仓库中的“父亲”分支跟踪称为上游主分支的远程。

一旦我设置它，一切都很好，但是一旦我再次克隆回购，“父亲”分支指向原点而不是上游。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-08T04:24:25.097

那是不可能的。Git 只克隆 repo 的内容，而不是它的设置。如果您想将遥控器硬连线到您的存储库中（它会质疑这是否是一个好主意），`repo-setup.sh`请在您的存储库根目录中创建一个执行以下操作的脚本：

```
git remote rm origin
git remote rm upstream
git remote add origin git@github.com:skela/awesomeproject.git
git remote add upstream git://github.com/bob/awesomeproject.git 
```

然后在克隆存储库后运行此文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T04:00:54.607

创建一个 .gitremotes 文件，您使用与遥控器相关的 .git/config 的内容填充该文件。将 .gitremotes 添加到存储库。克隆后附加 .git/config 和 .gitremotes。注意：如果您要共享的遥控器（在 .gitremotes 中）与“git clone”自动创建的遥控器（“orgin”）有名称冲突，可能需要进行一些手动编辑。

要轻松完成此操作，您可以定义一个 bash 函数：

```
function git-clone-r ()
{
  src=$1
  tgt=$2
  git clone $src $tgt
  cat ${tgt}/.gitremotes >> ${tgt}/.git/config
} 
```

[以上内容并不是那么复杂；但说明了重点和工作]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T05:31:26.410

这是 GoZoner 解决方案的略微修改版本。

您需要将有关所有远程的信息从您的存储库中捕获`.git/config`到一个文件中，您可以将其存储在您的 git 存储库之外。每次添加新遥控器时，您还需要注意更新此文件。这实际上可以添加到您的 git 存储库中，以便下一次克隆或拉取此文件。

从 开始`git 1.7.10+`，git 支持包含外部配置文件。

因此，您可以将以下行添加到您的存储库`.git/config`中，以包含包含远程信息的外部配置文件：

```
[include]
    path            = /dir1/dir2/repo-remotes.gitinfo 
```

# android - 什么触发（或生成）KeyEvent.ACTION_MULTIPLE？

> ID：15286312
> 
> 赞同：12
> 
> 时间：2013-03-08T03:41:02.197
> 
> 标签：android, keyevent, headset, android-audiomanager

[KeyEvent.ACTION_MULTIPLE](http://developer.android.com/reference/android/view/KeyEvent.html#ACTION_MULTIPLE)的文档说：

> “连续发生多个重复的键事件，或者正在传递复杂的字符串。如果键代码不是 {#link KEYCODE_UNKNOWN 则 {#link getRepeatCount() 方法返回给定键代码应执行的次数. 否则，如果键码是 KEYCODE_UNKNOWN，那么这是一个由 getCharacters() 返回的字符序列。”

但它没有说明**如何**实际生成该事件。

1.  我尝试（快速）**双击**耳机的暂停/播放按钮，但我收到的只是普通的 ACTION_UP 和 ACTION_DOWN。
2.  我也尝试**按住**耳机的暂停/播放按钮，但我收到的只是普通的 ACTION_UP 和 ACTION_DOWN。

如何生成[KeyEvent.ACTION_MULTIPLE](http://developer.android.com/reference/android/view/KeyEvent.html#ACTION_MULTIPLE)（作为用户，使用耳机控件）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-27T20:49:29.057

Android 的[BaseMovementMethod](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/text/method/BaseMovementMethod.java)包含用于处理的代码，`ACTION_MULTIPLE`因此当用户按住箭头键时，可能会为键自动重复生成事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:32:45.400

我不确定，但我认为 ACTION_MULTIPLE 可能会由例如蓝牙键盘上的实际按钮触发。我认为您刚刚获得 ACTION_UP 和 ACTION_DOWN 的原因是因为它们是耳机控件的预定义 KeyEvents。我希望这有帮助。:)

# android - 项目外的 Android NDK 来源

> ID：15286318
> 
> 赞同：1
> 
> 时间：2013-03-08T03:41:44.257
> 
> 标签：android, android-ndk

在我的 andoid.mk 文件中，我必须将源代码复制并粘贴到 jni 文件夹中，然后执行以下操作：

```
FILE_LIST := $(wildcard $(LOCAL_PATH)/myfolder/*.cpp) 
```

我怎样才能让它指向我项目之外的路径？像这样的东西：

```
FILE_LIST := $(wildcard /home/user/myfolder/folder/*.cpp) 
```

或者做一个变量并这样做？

```
MY_VARIABLE = /home/user/mypath
FILE_LIST := $(wildcard $(MY_VARIABLE)/*.cpp) 
```

# asp.net - 在 redirect.aspx 页面中显示登录用户名

> ID：15286320
> 
> 赞同：1
> 
> 时间：2013-03-08T03:42:05.877
> 
> 标签：asp.net, forms, login, web, label

我对 ASP.NET 完全陌生。但是，我有一个项目要使用它并面临一个问题。

这是 ：

1.  我有一个 login.aspx 文件 - 用户提供登录用户名和密码的地方

2.  如果登录详细信息（匹配数据库）OK，则用户自动重定向到 logged_in.aspx。

3.  重定向的logged_in.aspx 中有一个标签(lbl_show)。

4.  我需要在其中显示登录用户名。

由于我缺乏理解，我阅读了一堆文章并一无所获，所以请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:16:13.617

se 会话变量，以便将任何值从一页传递到另一页。

将用户名值分配给会话变量并在您的登录页面中使用它，如下所示：

```
// In login page
Session["UserName"] = txtUserName.text;

//In logged_in page
label1.text = Session["UserName"]; 
```

另请参阅以下链接以进行状态管理：

[http://www.codeproject.com/Articles/492397/State-Management-in-ASP-NET-Introduction](http://www.codeproject.com/Articles/492397/State-Management-in-ASP-NET-Introduction)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:38:43.483

您需要设置一个身份验证 Cookie。它很简单，并且允许您轻松利用 ASP.NET 功能（许多内置控件和用户访问控制）。我在这篇 SO 帖子中详细说明了如何：

[在 asp.net 中使用 cookie 自动登录用户（自定义登录）](https://stackoverflow.com/questions/14922822/using-cookies-to-auto-login-a-user-in-asp-net-custom-login/14924404#14924404)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:52:31.733

代码的问题

```
// In login page
Session["UserName"] = txtUserName.text;

//In logged_in page
label1.text = Session["UserName"]; 
```

是`casting`缺少它应该是

```
label1.text = Session["UserName"].ToString(); 
```

## 编辑 1

作为`Session`contains `object`，如果您有其他内容，`object`则必须将其显式转换为您的 require 类型。
假设你有`array`你，`Session`那么你将不得不将它转换回`array`.

```
String[] Names={"abc","def","ghi"};
Session["NamesCol"]=Names; 
```

然后，如果您想使用它，则必须按以下方式进行转换

```
String[] NewNames=(string[])Session["NamesCol"]; 
```

# php - 有任何理由使用isset()吗？

> ID：15286321
> 
> 赞同：2
> 
> 时间：2013-03-08T03:42:20.593
> 
> 标签：php, isset

为什么我应该使用`if (isset($var)) {}`而不是仅仅使用`if ($var) {}`？它似乎做同样的事情，只是需要额外的处理。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T03:43:16.960

**原因**

原因是，`isset()`当您检查变量是否存在并继续时，将返回布尔值并且不会引发警告。此外，变量可能具有零值：

1.  `false`
2.  `0`
3.  `""`

但它们已经设置好了。

* * *

**例子**

```
$varb = false;
$vari = 0;
$vars = "";

isset($varb) // true
isset($vari) // true
isset($vars) // true

if ($varb) // false
if ($vari) // false
if ($vars) // false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T03:46:20.200

您用于`isset()`检查是否已声明变量。

另一种方法检查有什么值`$var`。因此，如果`$var`碰巧包含`false`，则条件将为 false，但您不会知道变量是否未设置或变量包含`false`。

# javascript - 使用 CORS 和本地策略将客户端应用程序验证到 REST API

> ID：15286324
> 
> 赞同：37
> 
> 时间：2013-03-08T03:43:06.937
> 
> 标签：javascript, node.js, angularjs

## 问题：

仅使用本地身份验证策略为客户端应用程序提供安全 API。
*红色箭头是知识差距的一部分。*

![在此处输入图像描述](../Images/e9152cb3569ad184a1a919e5d1bbeea1.png)

## 语境：

那就是 ---`client.example.com`正在发布一个**POST**到`api.example.com/login`成功`client.example.com`可以访问**GET**服务的地方，例如`api.example.com/secret`.

## 一个主意！

使用位于 API 前面的混合授权类型实现 OAuth 2.0。

***为什么是混合动力车？***

*   它不会是`Implicit Grant Flow`aka `Client-Side Web Applications Flow`，因为没有重定向到 API 服务器也不会授予访问令牌。（即）*“某某可以访问您的数据吗？”*

*   这不会是`Resource Owner Password Flow`因为*客户端 ID 和客户端密码*与请求一起传递，因此假定客户端应用程序是服务器端的。

*好的......那么两者都有一点呢？*

如果我们在客户端应用程序的页面加载中使用 CRSF 令牌，并将其与用户凭据一起发布 OAuth 2.0 身份验证端点以交换访问令牌怎么办？成功登录后，您将使用访问令牌和 CRSF 令牌对每个后续请求进行身份验证。

**我发现了一个很好的 Node.js OAuth 2.0 库：**

[https://github.com/ammmir/node-oauth2-provider](https://github.com/ammmir/node-oauth2-provider)

## 帮我！

我找不到解决此问题的身份验证措施的工作示例！指出我正确的方向？

> 最终，这里的目标是使用 CORS 和本地策略（即用户名和密码）向 REST api 验证客户端应用程序，即使上述约定是不可能的。

## 容纳赏金：

*这是一个客户端应用程序，所以让我们保持时尚。*

我正在寻找一个工作示例，使用上面的**Node.js** OAuth 2.0 种子作为 API/Auth 服务器和前端框架（如**Angular.js**或**Backbone.js**）发出请求。

*该示例应与上述上下文相匹配。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T06:22:29.093

我正在开发一个架构非常相似的应用程序，尽管这些服务是 .NET Web API 而不是 Node，并且我们使用[DotNetOpenAuth](http://dotnetopenauth.net/)作为 OAuth 提供程序。而不是您建议的混合方法，我们正在执行以下操作：

1.  x.com 提供登录页面
2.  登录页面将凭据回传到 x.com
3.  x.com 的服务器端逻辑将 client_id 和 client_secret 与凭据结合以提交令牌请求（您上面提到的[资源所有者密码凭据授予）接收临时访问令牌和刷新令牌](https://www.rfc-editor.org/rfc/rfc6749#section-4.3)
4.  刷新令牌被加密为 x.com 发布的 cookie
5.  然后将 cookie（带有加密的刷新令牌）和临时访问令牌都发送到浏览器
6.  客户端应用程序（在我的例子中是 angular）现在可以使用访问令牌来访问 api.x.com 以获取服务（看来您很清楚 CORS 的局限性......我们破解了 angular 的[$resource](http://docs.angularjs.org/api/ngResource.$resource)版本以方便但这并不漂亮，因为我们想使用所有 HTTP 动词并支持 IE9）
7.  当访问令牌过期时，客户端应用程序可以从 x.com 请求新的访问令牌
8.  在服务器端，x.com 解密 cookie 以获取刷新令牌并发出另一个 oauth 调用以获取新的访问令牌

这是相当高级的，但希望能让您了解如何处理您的情况。就我而言，它出现在您的案例中，我们不想使用会话状态或数据库来存储刷新令牌，但显然将其暴露给浏览器会引入安全问题，因此刷新令牌的加密很重要（以及其他安全性注意事项）并且使用 cookie 消除了对会话状态或 x.com 上其他持久存储的需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T11:24:53.363

我使用 Node 和 PassportJS 构建了这个示例，以展示如何使用 Facebook 或 Local Strategy 对用户进行身份验证。正如您所描述的，双方都在不同的域上，并且需要启用 CORS。

GitHub：[https](https://github.com/pablodenadai/Corsnection)
://github.com/pablodenadai/Corsnection 现场演示：[http ://corsnection-client.herokuapp.com/](http://corsnection-client.herokuapp.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T07:04:46.090

不是为了奖品而跑的答案。只是我的 2 美分 :)

在我的网络服务器上，

我通过使用登录/密码的休息调用进行身份验证，并通过 https 进行基本身份验证。此调用将密钥传递给客户端（单页 Web 应用程序）。

然后每个后续的 REST 调用都使用密钥进行签名。服务器检查签名是否正确，并且一切仍然在 https 中发生。

我相信这种机制非常有用。

我没有看到跨域的问题。我有一个单一的来源，如果我需要其他来源的东西，我会使用 JSONP。

我使用 nginx 作为 https->http 转发器。

不确定它如何与 OAuth2 解决方案竞争。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T22:39:46.150

我不能保证我有时间编写工作示例，但我可以向您展示 2 条路径 :)

最大的一笔交易是 CORS。解决了这个问题之后，就很容易使用[$http](http://docs.angularjs.org/api/ng.$http)服务了。因此，首先并且可能最简单的可能是在指向 api.x.com 的 x.com 网络服务器中配置反向代理。[我在这里](https://stackoverflow.com/questions/10304198/crud-jsonp-sencha-touch-2/12047315#12047315)写文章

第二种方法更好，并且正是为此目的而创建的，以授权特定域使用您的资源。它涉及 api.x.com 中的一些编码，因此您无需更改在其他域中提供的新 Web 应用程序中的任何内容。您只需要在 api.x.com 服务中授权 CORS 请求。

*   在数据库中创建表，您可以在其中管理授权域列表
*   添加该表记录“x.com”
*   在 api.x.com 中添加请求过滤器/拦截器您使用的任何技术术语，该方法应在处理请求后调用，并在`Access-Control-Allow-Origin: x.com`请求来自 x.com 时添加响应（换句话说，检查请求标头引用值匹配到上表中的任何值并将该值放入 Access-Control-Allow-Origin 响应标头中）。

就是这样 :) 在此之后，如果您知道如何使用[$http](http://docs.angularjs.org/api/ng.$http)或[jQuey.ajax](http://api.jquery.com/jQuery.ajax/)，您将能够在几分钟内从任何授权域向 api.x.com 发出任何请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-29T01:35:04.460

我使用 vinilla js web 应用程序和跨域身份验证到 GAE 后端或 OpenID 连接的想法非常相似。

Web 应用程序在 CDN 上运行。单击登录链接时，它会转到相应的登录服务器并重定向回 Web 应用程序（使用 XSRF 安全令牌和仅 HTTPS cookie）。[登录服务器接受带有凭据](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Requests_with_credentials)的跨域请求。必须在每个请求中设置 XSRF 令牌（在标头中）。cookie 由浏览器设置。由于它是 HTTP only cookie，JS 无法读取它。该技术非常安全。

登录后，您可以从登录服务器获得安全评估。

有关详细说明，您可以在[此处](http://dev.yathit.com/auth/ydn-login-client.html)找到并在此处找到开源[repo](https://bitbucket.org/ytkyaw/ydn-auth/wiki/Home)。

# jsf - 多个 p:ajax 在一个 h:form 中不调用

> ID：15286325
> 
> 赞同：0
> 
> 时间：2013-03-08T03:43:13.053
> 
> 标签：jsf, primefaces

```
<h:form>

        <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">

            <h:outputText value="Region: " />
            <p:selectOneMenu id="regionSelection" value="#{haf.selectedRegion}" effect="fade">
                <f:selectItem itemLabel="Select One" itemValue="" />
                <f:selectItems value="#{haf.regions}" var="region"
                    itemLabel="#{region.regionName}" itemValue="#{region.regionCode}" />
                <p:ajax listener="#{haf.selectRegion}" update="provinceSelection" />
            </p:selectOneMenu>

            <h:outputText value="Province: " />
            <p:selectOneMenu id="provinceSelection" value="#{haf.selectedProvince}" effect="fade">
                <f:selectItem itemLabel="Select One" itemValue="" />
                <f:selectItems value="#{haf.provinces}" var="province"
                    itemLabel="#{province.provName}" itemValue="#{province.provCode}" />
                <p:ajax listener="#{haf.selectProvince}" update="citySelection" />
            </p:selectOneMenu>

            <h:outputText value="City/Municipality: " />
            <p:selectOneMenu id="citySelection" value="#{haf.selectedCity}" effect="fade">
                <f:selectItem itemLabel="Select One" itemValue="" />
                <f:selectItems value="#{haf.cities}" var="city"
                    itemLabel="#{city.cityName}" itemValue="#{city.cityCode}" />
                <p:ajax listener="#{haf.selectCity }" update="brgySelection" />
            </p:selectOneMenu>

            <h:outputText value="Barangay: " />
            <p:selectOneMenu id="brgySelection" value="#{haf.selectedBrgy}"
                effect="fade">
                <f:selectItem itemLabel="Select One" itemValue="" />
                <f:selectItems value="#{haf.brgys}" var="brgy"
                    itemLabel="#{brgy.brgyName}" itemValue="#{brgy.brgyCode}" />
            </p:selectOneMenu>

        </h:panelGrid>
    </h:form> 
```

请问关于代码的问题是什么......第一个ajax触发但第二个没有。JSF 有规则、1 个表单、1 个 ajax 吗？提前感谢您回答一个幼稚的问题。

# php - 关于通过 mysqli 使用更新

> ID：15286327
> 
> 赞同：0
> 
> 时间：2013-03-08T03:43:29.860
> 
> 标签：php, mysql, sql, mysqli

目前我试图弄清楚为什么这个函数没有按预期工作（在一个 php 类中）：

```
function actualizarPromos($nombre,$desc,$motivo,$id){
global $mysqli;
$sql="update promociones set nombre='".utf8_decode($nombre)."', desc='".utf8_decode($desc)."', motivo='".$motivo."' where id='".$id."'";
$mysqli->query($sql);
if($mysqli->insert_id>0){
            //It saved the data
    echo "Salvado";
}
else{
    //It didn't save the data   
        echo "No salvado";
    echo $mysqli->insert_id;
    echo "<br>".$sql;
} 
```

}

我无法获得更新数据库内容的功能。我已经尝试在 phpmyadmin 上编写 SQL 语句，即：

```
update promociones set nombre='cumple', desc='muy buen cumple', motivo='mCumple' where id='13'; 
```

它根本不执行。任何人都可以帮助我吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:01:03.373

`desc`是 MySQL 中的一个[Revered Word](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html#table-reserved-words-5.5.30)，因此您的查询很可能会失败。您需要使用反引号将其转义 - `

```
$sql="update promociones set nombre='".utf8_decode($nombre)."', `desc`='".utf8_decode($desc)."', motivo='".$motivo."' where id='".$id."'"; 
```

# r - 如何在R中的箱线图中传播点？

> ID：15286328
> 
> 赞同：0
> 
> 时间：2013-03-08T03:43:44.530
> 
> 标签：r, boxplot

我正在研究具有以下几点的数据分布。

输入<-read.table("infile",header=TRUE,sep="\t")

表（输入）

```
0.786333        1  1.04453  1.06159  1.33277  1.53607  2.25893 
  49      938        1        1       36       16      166 
```

如果我为它绘制箱线图，我会得到最低基准、最高基准和中位数的单线。

箱线图（输入）

![在此处输入图像描述](../Images/28a42ff53a65397d994abecddb18cd99.png)

有没有办法通过归一化来分配点，以便可以为最低基准、最高基准和中位数提供具有不同边界的更好箱线图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:51:11.830

你显然有一个生物模态分布，我不认为箱线图是一个有用的总结

密度图更有用

```
plot(density(zz)) 
```

![在此处输入图像描述](../Images/132d348afc7637a167053e02ac723bc7.png)

您还可以考虑一个*小提琴图*，它是核密度图和箱线图的混合体。

使用`vioplot`包

```
 library(vioplot)
 violplot(zz) 
```

# xamarin.android - 无法通过嵌套类型“CentrixMOS.SongsActivity.importDeals”访问外部类型“CentrixMOS.SongsActivity”的非静态成员

> ID：15286330
> 
> 赞同：0
> 
> 时间：2013-03-08T03:43:59.560
> 
> 标签：xamarin.android

我上面有一个错误，我如何从另一个类调用一个函数，我在单声道中使用 xamarin for android,,.. 有没有人在使用单声道 for android 方面的专家。,,？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T00:15:06.427

发生这种情况可能是因为您试图将 Java 代码转换为 C#。

Xamarin 对此有一篇不错的文章。看看[API 设计](http://docs.xamarin.com/guides/android/advanced_topics/api_design)，尤其是第 4.5 节。这是那篇文章的摘录。

> 非静态嵌套类，也称为内部类，有很大不同。它们包含对其封闭类型实例的隐式引用，并且不能包含静态成员（以及本概述范围之外的其他差异）。

`CentrixMOS.SongsActivity`因此，您应该传递to的引用，`CentrixMOS.SongsActivity.importDeals`然后访问它的成员。

# php - 运行 PHP 客户端

> ID：15286331
> 
> 赞同：9
> 
> 时间：2013-03-08T03:44:10.543
> 
> 标签：php

是否可以使用 HTML 网页在客户端启动 PHP 脚本？

如果没有，有没有办法将 PHP 嵌入到 HTML 中以便它可以在客户端运行？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T03:45:28.470

我认为你想要的是 JavaScript。PHP 用于服务器端，JavaScript 用于客户端等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T03:47:17.077

不可以。PHP 不能在浏览器中运行。如果您不喜欢 JavaScript 的语法，请学习 JavaScript，或者[CoffeScript 。](http://coffeescript.org/)

# hadoop - 将命令行参数传递给 jvm(java) 映射器任务

> ID：15286333
> 
> 赞同：1
> 
> 时间：2013-03-08T03:44:38.770
> 
> 标签：hadoop, mapreduce

我想调试我的映射器的某些部分，我需要将一些命令行参数传递给启动映射器的 jvm(java) 进程。有哪些不同的方法可以做到这一点？

我想出了一种更改 MapTaskRunner.java 的方法，但我想避免编译整个 hadoop 包。应该有一些简单的方法使用配置文件将额外的命令行参数传递给 jvm 映射器进程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T18:53:19.413

我猜您正在 mapred-config.xml 中寻找以下配置：

```
<property>
    <name>mapred.child.java.opts</name>
    <value>-Xmx4096m -XX:+UseConcMarkSweepGC</value>
</property> 
```

在值部分，您可以使用`-D`.

或者，您可以`HADOOP_OPTS`在终端中设置：

```
export HADOOP_OPTS="-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=5000" 
```

有关本地调试 hadoop 作业的更多信息，请参见[此处](http://amnigos.com/post/44631353593/how-to-guide-hadoop-mapreduce-debugging-in-lo)。

# android - android 中的 flash XML 库。怎么做？

> ID：15286334
> 
> 赞同：0
> 
> 时间：2013-03-08T03:44:42.653
> 
> 标签：android, xml, actionscript-3, flash

我正在尝试在 android 平台上制作一个基本的 flash XML 库。但我不知道该怎么做。我尝试在 Internet 上引用一些基本的 XML 库。这个 XML 库只是一个基本的如何加载图片。但我仍然不知道如何在 android 上预览图像。是否有一个我错过的步骤，比如我错过的 android 权限或其他步骤？这就是我得到的。

请帮忙。抱歉语法不好。

图片的位置 /mnt/sdcard/SketchCraft/MyDrawing 1.png。

这是我的 XML

```
<?xml version="1.0" encoding="utf-8"?>
<galleryPackage>

     <image>
            <imgURL>/mnt/sdcard/SketchCraft/MyDrawing 1.png</imgURL>
    </image>

</galleryPackage> 
```

这是我的动作

```
import flash.net.URLLoader;
import flash.events.Event;
import flash.display.Loader;
import flash.net.URLRequest;

var xmlRequest:URLRequest = new URLRequest("XMLcth.xml");
var xmlLoader:URLLoader = new URLLoader(xmlRequest);
var imgData:XML;
var imageLoader:Loader;
var rawImage:String;

var imgNum:Number = 0;

xmlLoader.addEventListener(Event.COMPLETE, xmlLoaded);

function xmlLoaded(event:Event):void{
    imgData= new XML(event.target.data);
    rawImage = imgData.image[imgNum].imgURL;
    imageLoader =new Loader();
    imageLoader.load(new URLRequest(rawImage));
    mc_image.addChild(imageLoader);
    } 
```

# c# - 在由可观察集合填充的可编辑列表视图中跟踪索引

> ID：15286335
> 
> 赞同：0
> 
> 时间：2013-03-08T03:45:08.250
> 
> 标签：c#, wpf, listview, mvvm, observablecollection

作为 WPF 新手，我有点绕圈子试图使用可观察的集合。

所以这就是我正在尝试使用 MVVM 模式做的事情。我有一个表格，我试图输入一个人的技能组合。

以下是我的 UI 布局，希望这也能让您了解我的每个视图的数据上下文是什么

```
Main Window
     SubScreen
        TextBlk(not a part of the user Control below)
        ListView
            UserControl(added to listview Only upon a button click)
                 ComboBox (ItemSource = SkillsList eg: C,C++, C# etc)
                 TxtBox (Binding TotalExperience... a number)
                 Radion Buttons (Bound to skillLevel property eg: Beginner, Expert etc)
        Button (Command = Add new skill set row => repeat the usercontrol in a new list view row) 
```

用户 Control 是我的 observable 集合。

如何确保正确填充用户控件？如何跟踪我正在处理的 listView 的哪一行（即：添加或编辑）？我可以为特定的人保存整个集合吗？所有这一切我都试图在视图模型中做......文件后面没有代码。

如果问题很幼稚，请道歉。但是我读得越多，我就越困惑。如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:10:53.440

你的问题是相当大的回答。阅读这篇文章，它展示了一个只设置 xml 的好例子

[WPF/MVVM 快速入门教程](http://www.codeproject.com/Articles/165368/WPF-MVVM-Quick-Start-Tutorial)

在您浏览完第一个链接后，这里也值得一看

[实现 MVVM 模式](http://msdn.microsoft.com/en-us/library/gg405484%28v=PandP.40%29.aspx)

请特别注意 INotifyPropertyChanged 示例。这是您跟踪正在处理的记录的方式。

您将拥有一个传递的模型，它包含您在其中创建的所有字段，必要时包括 ID。

此外，如果您尝试不使用任何代码，那么也要注意命令。

希望这可以帮助。

# android - Android：我如何知道在测验中是否点击了正确的按钮？

> ID：15286340
> 
> 赞同：0
> 
> 时间：2013-03-08T03:45:24.880
> 
> 标签：android, multiple-choice

好吧，我是 Java 编程的新手，按照我在这里看到的一些技巧，我将这段代码制作成了一个问答游戏：

```
public class OtherActivity extends Activity {

    TextView textView1, textView2;
    Button btn1, btn2, btn3, btn4;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_other);

        textView1 = (TextView) findViewById(R.id.textView1);
        textView2 = (TextView) findViewById(R.id.textView2);

        btn1 = (Button) findViewById(R.id.btn1);
        btn2 = (Button) findViewById(R.id.btn2);
        btn3 = (Button) findViewById(R.id.btn3);
        btn4 = (Button) findViewById(R.id.btn4);

        final ArrayList<Question> qsts = new ArrayList<Question>();
        qsts.add(Question.q1);
        qsts.add(Question.q2);
        qsts.add(Question.q3);
        qsts.add(Question.q4);
        qsts.add(Question.q5);
        qsts.add(Question.q6);

        final Random rng = new Random();

        final List<Integer> generated = new ArrayList<Integer>();
        int nxt = rng.nextInt(6);

                    generated.add(nxt);

                    final Question nextQuestion = qsts.get(nxt);

                    textView1.setText(nextQuestion.questionText);

                    final ArrayList<String> allAnswers = new ArrayList<String>();
                    allAnswers.add(nextQuestion.correctAnswerText);
                    allAnswers.add(nextQuestion.wrongAnswer1);
                    allAnswers.add(nextQuestion.wrongAnswer2);
                    allAnswers.add(nextQuestion.wrongAnswer3);

                    Collections.shuffle(allAnswers);

                    btn1.setText(allAnswers.get(0));
                    btn2.setText(allAnswers.get(1));
                    btn3.setText(allAnswers.get(2));
                    btn4.setText(allAnswers.get(3));

                    btn1.setOnClickListener(new OnClickListener() {
                        public void onClick(View v) {
                            if(allAnswers.get(0) == nextQuestion.correctAnswerText){
                                textView2.setText("CORRECT ANSWER, MAN!");

                                while(true){

                                    int nxt = rng.nextInt(6);

                                    if (!generated.contains(nxt)){

                                        generated.add(nxt);

                            Question nextQuestion = qsts.get(nxt);

                            textView1.setText(nextQuestion.questionText);

                            ArrayList<String> allAnswers = new ArrayList<String>();
                            allAnswers.add(nextQuestion.correctAnswerText);
                            allAnswers.add(nextQuestion.wrongAnswer1);
                            allAnswers.add(nextQuestion.wrongAnswer2);
                            allAnswers.add(nextQuestion.wrongAnswer3);

                            Collections.shuffle(allAnswers);

                            btn1.setText(allAnswers.get(0));
                            btn2.setText(allAnswers.get(1));
                            btn3.setText(allAnswers.get(2));
                            btn4.setText(allAnswers.get(3));

                                        break;
                                    }
                                }

                            }
                            else{
                                textView2.setText("WRONG ANSWER, MAN!");

                                while(true){

                                    int nxt = rng.nextInt(6);

                                    if (!generated.contains(nxt)){

                                        generated.add(nxt);

                            //  ---->   Integer nxt = rng.nextInt(6); <---- random nxt aqui!

                            Question nextQuestion = qsts.get(nxt);

                            textView1.setText(nextQuestion.questionText);

                            ArrayList<String> allAnswers = new ArrayList<String>();
                            allAnswers.add(nextQuestion.correctAnswerText);
                            allAnswers.add(nextQuestion.wrongAnswer1);
                            allAnswers.add(nextQuestion.wrongAnswer2);
                            allAnswers.add(nextQuestion.wrongAnswer3);

                            Collections.shuffle(allAnswers);

                            btn1.setText(allAnswers.get(0));
                            btn2.setText(allAnswers.get(1));
                            btn3.setText(allAnswers.get(2));
                            btn4.setText(allAnswers.get(3));

                                        break;
                                    }
                                }

                            }
                        }
                    });

                    //
                    // AND THE SAME METHOD TO THE BUTTONS btn2, btn3, btn4
                    //
                    // btn2 with a if (allAnswers1.get(1) == nextQuestion.correctAnswerText) { ...
                    // btn3 with a if (allAnswers1.get(2) == nextQuestion.correctAnswerText) { ...
                    // btn4 with a if (allAnswers1.get(3) == nextQuestion.correctAnswerText) { ...
                    //

    }
} 
```

我有这个其他类代码：

```
 public class Question {

    String questionText;
    String correctAnswerText;       
    String wrongAnswer1;
    String wrongAnswer2;
    String wrongAnswer3;

    Question (String qst, String cAns, String wAns1, String wAns2, String wAns3){

        questionText = qst;
        correctAnswerText = cAns;
        wrongAnswer1 = wAns1;
        wrongAnswer2 = wAns2;
        wrongAnswer3 = wAns3;

    }

    static Question q1 = new Question(
            "Question 1",

            "Correct answer - question 1",
            "Wrong Answer 1 - question 1",
            "Wrong Answer 2 - question 1",
            "Wrong Answer 3 - question 1"
            );
    static Question q2 = new Question(
            "Question 2",

            "Correct answer - question 2",
            "Wrong Answer 1 - question 2",
            "Wrong Answer 2 - question 2",
            "Wrong Answer 3 - question 2"
            );
    // ...
    // and the same with q3, q4, q5 and q6
    // ... 
```

好吧，你怎么看，我在识别正确答案时遇到了问题。在第一个问题中它工作正常，但在此之后就不行了。我相信这个问题会发生，因为当我尝试比较 `allAnswers.get(0) == nextQuestion.correctAnswerText`或与 ArrayList allAnswers 的 (1)、(2) 或 (3) 等其他索引进行比较时，为比较选择的“槽”仍然具有第一个问题文本答案。所以我该怎么做？

*Plus：代码变得非常大，我尝试`if`在 onClickListener 中放入一个并与`id`4 个按钮中的一个进行比较，但它必须与 onCreate 之外的其他函数一起使用，因为 ArrayList **qsts**（包含问题objects) 未声明，我无法比较单击的按钮，因为我必须声明一个不同的 ArrayList。有更好的方法来做我想做的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:15:26.340

For problem of having large code i suggest u to make separate onclicklistener and put that button.setonclicklistener in all 4 buttons.

Then on click listener you got view as parameter, that view is a button that is pressed. cast it to button and then get text of button. then u can set if else leader that you implement in button action.

Make different method to set new question so that you have to just call it rather then writing same code multi times.

I hope it will resolve both of your problems.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:18:33.350

遵循维克兰特所说的指示。

此外，请放置一个布尔变量，当用户选择任何选项时，该变量的值将发生变化。

如何通过检查该布尔值来获取用户是否已回答。

要检查正确的答案，您必须将所选值与正确值进行比较。

享受编码。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:32:43.227

听是维克兰特所说的例子

```
public class MyActivity extends Activity implements OnClickListener {

Question nextQuestion;

@Override
   protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_other);
        .......  code
   }
}

@Override
public void onClick(View v) {
Button b = (Button)v;
String buttonText = b.getText().toString();

   if(buttonText.equals( nextQuestion.correctAnswerText ))
   { 
      DoSomething();
      return;
   }else{

   }
} 
```

不要忘记添加

```
Button button = (Button) findViewById(R.id.button_send);
button.setOnClickListener(this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T05:48:57.677

如果您想创建测验应用程序，请检查此[链接](https://github.com/robhinds/AndroidChuckQuiz)。

还检查此链接以使用[现有数据库与 Android 应用程序](https://stackoverflow.com/a/9109728/1263679)

如果您对此有任何问题，请告诉我。

祝你好运。

# php - preg_match_all 未按预期工作。可能的错误模式。

> ID：15286342
> 
> 赞同：0
> 
> 时间：2013-03-08T03:45:30.937
> 
> 标签：php, regex, preg-match-all

我要直入主题了

这是我的模式：

```
/Day [0-9]+:(.*?)Day [0-9]+:/s 
```

这是我的主题：

```
 Day 1:

House:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link:
Youtube Link:
Description:
Date added to youtube:

Moombahton:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link:
Youtube Link:
Description:
Date added to youtube:

Dubstep:
Song Name: Clap Your Hands
Artist: Walk Home
Facebook Page: https://www.facebook.com/walkhomemusic
Soundcloud Page: https://soundcloud.com/walk-home
Free Download: Yes
Download Link: http://www.mediafire.com/?usi4rtx9q26owbn
Youtube Link: http://www.youtube.com/watch?v=kqfDM1aNjp4
Description: Walk Home really killed it with this song. I especially like this song for the ability to take it across genres. There is a really nice guitar solo in the drop, and I think that is what makes this song. The mixture of analog and digital instruments is phenomenal. The entire song will be a treat to any listener, whether they like Rock, or electronic music. 
Date added to youtube: March 6th, 2013

Glitch Hop:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link:
Youtube Link:
Description:
Date added to youtube:

DnB:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link:
Youtube Link:
Description:
Date added to youtube:

Other:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link: 
Youtube Link:
Description:
Date added to youtube:

Day 2:

House:
Song Name: No Expectations
Artist: Hollidayrain
Facebook Page: https://www.facebook.com/HollidayrainMusic
Soundcloud Page: https://soundcloud.com/hollidayrain
Free Download: Yes
Download Link: http://www.mediafire.com/?z2du038l70f7n8s
Youtube Link: http://www.youtube.com/watch?v=VDRl39n1rFQ
Description: Hollidayrain has achieved a new standard in mixing and production with his soon to be hit song No Expectations. The clear and hard hitting drums really emphasize the dirty bass that this amazing electro house song has to offer. It’s clear that Hollidayrain will be on everyone’s radar. Keep a lookout for more great hits from him!
Date added to youtube: March 7, 2013

Moombahton:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link: 
Youtube Link:
Description:
Date added to youtube:

Dubstep:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link: 
Youtube Link:
Description:
Date added to youtube:

Glitch Hop:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link: 
Youtube Link:
Description:
Date added to youtube:

DnB:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link: 
Youtube Link:
Description:
Date added to youtube:

Other:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link: 
Youtube Link:
Description:
Date added to youtube:

Day 3: 
```

这是我从该模式得出的结果：

```
 array (
  0 => 
  array (
    0 => 'Day 1:

House:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link:
Youtube Link:
Description:
Date added to youtube:

Moombahton:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link:
Youtube Link:
Description:
Date added to youtube:

Dubstep:
Song Name: Clap Your Hands
Artist: Walk Home
Facebook Page: https://www.facebook.com/walkhomemusic
Soundcloud Page: https://soundcloud.com/walk-home
Free Download: Yes
Download Link: http://www.mediafire.com/?usi4rtx9q26owbn
Youtube Link: http://www.youtube.com/watch?v=kqfDM1aNjp4
Description: Walk Home really killed it with this song. I especially like this song for the ability to take it across genres. There is a really nice guitar solo in the drop, and I think that is what makes this song. The mixture of analog and digital instruments is phenomenal. The entire song will be a treat to any listener, whether they like Rock, or electronic music. 
Date added to youtube: March 6th, 2013

Glitch Hop:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link:
Youtube Link:
Description:
Date added to youtube:

DnB:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link:
Youtube Link:
Description:
Date added to youtube:

Other:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link: 
Youtube Link:
Description:
Date added to youtube:

Day 2:',
  ),
  1 => 
  array (
    0 => '

House:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link:
Youtube Link:
Description:
Date added to youtube:

Moombahton:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link:
Youtube Link:
Description:
Date added to youtube:

Dubstep:
Song Name: Clap Your Hands
Artist: Walk Home
Facebook Page: https://www.facebook.com/walkhomemusic
Soundcloud Page: https://soundcloud.com/walk-home
Free Download: Yes
Download Link: http://www.mediafire.com/?usi4rtx9q26owbn
Youtube Link: http://www.youtube.com/watch?v=kqfDM1aNjp4
Description: Walk Home really killed it with this song. I especially like this song for the ability to take it across genres. There is a really nice guitar solo in the drop, and I think that is what makes this song. The mixture of analog and digital instruments is phenomenal. The entire song will be a treat to any listener, whether they like Rock, or electronic music. 
Date added to youtube: March 6th, 2013

Glitch Hop:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link:
Youtube Link:
Description:
Date added to youtube:

DnB:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link:
Youtube Link:
Description:
Date added to youtube:

Other:
Song Name:
Artist:
Facebook Page:
Soundcloud Page:
Free Download:
Download Link: 
Youtube Link:
Description:
Date added to youtube:

',
  ),
) 
```

我的预期结果是将第 1 天的帖子、第 2 天的帖子、第 n 天的帖子全部分开（在结果数组中）。它应该工作。查询显然找到了一些东西。但我不确定发生了什么。也许比我更聪明的人可以引导我朝着正确的方向前进！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:06:32.860

找到匹配项时会丢弃回溯信息，因此无法判断该组之前的迭代匹配`Day [0-9]+:` 使用`Day [0-9]+:`作为分隔符是危险的。最后一个条目呢？它不符合标准。如果文本包含“第 1 天：”怎么办？

查看您的示例很难选择另一个分隔符。如果您可以保证天之间的分隔符，例如 3 次或更多返回，则可以将其用作结束分隔符：

```
/Day [0-9]+:(.*?)\n{3,}/s 
```

# php - 如何在 MAMP 或 XAMPP 上安装 Ratchet WebSockets for PHP？

> ID：15286343
> 
> 赞同：5
> 
> 时间：2013-03-08T03:45:31.840
> 
> 标签：php, websocket, socket.io, real-time, ratchet

我正在尝试将实时聊天集成到我的 php / 骨干应用程序中，我想我会使用棘轮？我需要做什么才能将 Ratchet 安装到 MAMP 或 XAMPP 中？他们网站上提供的唯一文档是使用 CURL，但我不知道如何为 localhost 安装必要的资源，也不知道这些资源需要添加到哪里。任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T08:53:53.330

您应该在项目的根目录中安装 composer.phar。

如果您在 linux 上，您可以简单地运行命令`curl -s https://getcomposer.org/installer | php`，否则您可以使用[curl 下载页面中的 windows 安装程序](http://getcomposer.org/download/)

安装 composer 后，您必须创建一个“composer.json”文件，您将在其中添加项目所需的所有依赖项。如果您只需要 Ratchet，只需将其粘贴到您的 json 文件中：

```
{
    "require": {
        "cboden/Ratchet": "0.2.*"
    }
} 
```

完成后，返回终端并运行命令`php composer.phar install`。

这将在新创建的“供应商”文件夹上安装 Ratchet 及其依赖项。

现在您可以通过这种方式将 Rathet 包含在您的 php 文件中：

```
require __DIR__ . '/vendor/autoload.php'; 
```

这就是我想的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:51:01.803

在 MAMP 和 XAMPP 中默认启用 cURL，而 MAMP 和 XAMPP 只是为 PHP 服务的 Web 服务器 + 数据库服务器。您可以像部署到实时 Web 服务器一样安装 Ratchet WebSockets。

但请确保您调用的是正确的 php 可执行文件，而不是您可能安装在您的计算机/服务器上的那个。

见：[http ://socketo.me/docs/install](http://socketo.me/docs/install)

# opencv - 将均值偏移应用于检测到的窗口

> ID：15286352
> 
> 赞同：1
> 
> 时间：2013-03-08T03:46:41.787
> 
> 标签：opencv, machine-learning, computer-vision

目前我已经实现了一种算法来从深度图像中提取特征，并且我想在所有检测到的窗口上应用均值偏移聚类。

我该如何使用 openCV 呢？我知道 OpenCV 有均值偏移，但它似乎适用于图像的反投影。是否有任何其他 OpenCV 函数可用于查找检测窗口的模式（可能使用类似于均值偏移的方法）

或者是否有任何开源的均值偏移代码可以重新用于此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T12:10:37.107

OpenCV 公开了一个均值偏移图像滤波器，但没有公开一般的聚类算法。您可以很容易地为此目的调整内核密度估计库，例如[LibAgf 。](http://libagf.sourceforge.net/)均值偏移是简单地重复分配到由 KDE 加权的所有其他平均值的每个点。

# css - 如何删除记住数据的网络浏览器背景颜色

> ID：15286353
> 
> 赞同：0
> 
> 时间：2013-03-08T03:46:43.367
> 
> 标签：css, browser

如何阻止像 Chrome 这样的浏览器在它记住值的字段上插入淡黄色背景色？

我有一个登录表单，当 Chrome 记住用户名和密码时，它看起来很丑陋。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:49:39.580

使用这个 CSS：

```
input:-webkit-autofill {
    color: #fff !important;
} 
```

# php - 在 wordpress 的另一个模板中包含一个模板

> ID：15286354
> 
> 赞同：0
> 
> 时间：2013-03-08T03:46:44.133
> 
> 标签：php, wordpress

我正在开发一个非常简单的 wordpress 项目。其中一个页面将包含我的项目的缩略图和一些文本，当我单击缩略图时，它会将我带到与项目对应的页面。我创建了一个模板，我试图在其中包含另一个仅包含缩略图的模板。我希望能够从 wordpress 仪表板的两个不同页面更新缩略图和文本。这就是我到目前为止所拥有的......这个概念有点愚蠢......如果我解释正确，请告诉我

假设这是渲染模板

```
<?php
/*
Template Name: projects
* This template displays project thumbnails and introductory copy as a rendering template
*/
$options = twentyeleven_get_theme_options();
$current_layout = $options['theme_layout'];
get_header();?>

        <div id="primary">
            <div id="content" role="main">

                <?php while ( have_posts() ) : the_post(); ?>

                    <?php get_template_part( 'content', 'page' ); ?>

                    <? /*php comments_template( '', true ); */?>

                <?php endwhile; // end of the loop. ?>
                <?php get_template_part( 'projectThumb', 'true' ); ?>
            </div><!-- #content -->
        </div><!-- #primary -->

<?php get_footer(); ?> 
```

这是缩略图模板。

```
<?php
/*
Template Name: projectThumb
* This template displays project thumbnails at the project page
*/
$options = twentyeleven_get_theme_options();
$current_layout = $options['theme_layout'];
get_header();?>

        <div id="primary">
            <div id="content" role="main">

                <?php while ( have_posts() ) : the_post(); ?>

                    <?php get_template_part( 'content', get_post_format() ); ?>

                <?php endwhile; ?>

            </div><!-- #content -->
        </div><!-- #primary -->

<?php get_footer(); ?> 
```

# c# - 使用动态 Linq (System.Linq.Dynamic) 创建值数组而不是值的总和

> ID：15286358
> 
> 赞同：2
> 
> 时间：2013-03-08T03:47:00.927
> 
> 标签：c#, visual-studio-2010, linq, lambda, extension-methods

我正在使用名为 System.Linq.Dynamic 的类（[http://msdn.microsoft.com/en-us/vstudio//bb894665.aspx](http://msdn.microsoft.com/en-us/vstudio//bb894665.aspx)）。它用于定义动态 Linq 查询。我需要我的查询是动态的，以便可以在运行时定义它们。

我将交易数据存储在一个名为**trans**的对象中。数据非常简单，有 4 个字段：AccountNumber（字符串）和 Value（十进制）。

我正在做这样的查询：

```
var dynamic = trans.AsQueryable()
    .GroupBy("new(AccountNumber)", "it")
    .Select(@"new(  Key.AccountNumber as groupId,
                    Sum(Value) as groupTotal,
                    it as data)"); 
```

这很有效，并给了我一个结构如下的结果：

```
[
    {
        "groupId": 15,
        "groupTotal": 5912.52,
        "data": [
            {
                "AccountNumber": 15,
                "Value": 14.25
            },
            ...
        ]
    },
    ...
] 
```

**我想做的是这样的：**

```
var dynamic = trans.AsQueryable()
    .GroupBy("new(AccountNumber)", "it")
    .Select(@"new(  Key.AccountNumber as groupId,
                    ToArray(Value) as groupList,
                    it as data)"); 
```

**这最终会给我一个如下所示的结果：**

```
[
    {
        "groupId": 15,
        "groupList": [14.25, 300.23, 63.88, 2767.08, 1383.54, 1000.54, 383.00],
        "data": [
            {
                "AccountNumber": 15,
                "Value": 14.25
            },
            ...
        ]
    },
    ...
] 
```

**我该如何修改 Dynamic.cs 以便它可以支持这样的事情？**

请注意，这两个查询之间的区别在于**Sum(Value) 作为 groupTotal，**而 **ToArray(Value) 作为 groupList，** Sum 可以工作，但目前 ToArray 不能。

我知道我需要一些扩展方法或类似方法才能完成这项任务。不幸的是，我在 Linq、Lambda 和扩展方法方面的技能还处于初学者水平。

# visual-c++ - 停止 cl.exe 输出源文件名

> ID：15286362
> 
> 赞同：6
> 
> 时间：2013-03-08T03:47:30.677
> 
> 标签：visual-c++

有没有办法告诉 cl.exe 不要打印出源文件的名称？基本上，我希望它在文件编译干净时不输出任何内容。在一个理智的世界中，编译器会将错误消息发送到 stderr，我可以将 stdout 重定向到 null。但是由于某种原因，cl.exe 喜欢将编译错误发送到标准输出，这使得它很难判断它是否成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T09:54:48.627

如果你想知道一个程序是否成功，不要看它的输出，检查`%ERRORLEVEL%`.

# drag-and-drop - 根据拖动的小部件制作条件放置效果？

> ID：15286364
> 
> 赞同：0
> 
> 时间：2013-03-08T03:47:53.537
> 
> 标签：drag-and-drop, zk

根据文档，我可以通过覆盖来制作自定义拖放效果

```
Widget.dropEffect_(boolean) 
```

但是，我无法根据拖动的小部件使小部件显示不同的拖放效果，因为没有可用的拖动小部件的引用。

我的问题是：

**如何制作可以根据拖动的小部件更改的拖放效果？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:55:54.250

您可以覆盖 getDrop_ 函数来记录当前拖动的小部件，

例如，

```
zk.afterLoad("zul", function () {
    var _wgt = {};
    zk.override(zk.Widget.prototype, _wgt, {
        getDrop_: function (dragged) {
            zk.Widget.currentDraggedInstance = dragged;
            return _wgt.getDrop_.apply(this, arguments);
    }
    });
}); 
```

有关更多信息，请参阅 zkfiddle 的示例

[自定义掉落效果](http://zkfiddle.org/sample/120dc43/2-custom-drop-effect)

# sql - 找出不匹配记录

> ID：15286367
> 
> 赞同：0
> 
> 时间：2013-03-08T03:48:11.773
> 
> 标签：sql, ms-access-2007

我有以下两个表`(Tab1 and Tab2)`，我需要检查 和 的不匹配`T1Col3`值`T2Col3`。这两个表的链接列`T1Col1, T1Col2`与`T2Col2, T2Col2`

但是当我运行以下查询时，它没有给出我想要的确切记录

```
SELECT * FROM Tab1 INNER JOIN Tab2
ON T1Col1 = T2Col1
AND T1Col2 = T2Col2
WHERE T1Col3 <> T2Col3 
```

样本数据

选项卡1

```
T1Col1  T1Col2  T1Col3

jkl nnn qoq
efg Aaa wow
efg xxx yoy
abc iii ror
abc fff uou
abc rrr rr3
gdg ppp 123
abc www 234
jkl qqq 336
jkl nnn 888 
```

选项卡2

```
T2Col1  T2Col2  T2Col3

jkl nnn qoq
efg aaa wow
efg xxx yoy
abc fff uou
ABC iii ror1
abc rrr kok
gdg ppp 789
jkl nnn utu
jkl qqq 336 
```

结果

```
T1Col1  T1Col2  T1Col3  T2Col1  T2Col2  T2Col3

jkl      nnn    888      jkl    nnn     qoq 
abc      iii    ror      abc    iii     ror1
abc      rrr    rr3      abc    rrr     kok
gdg      ppp    123      gdg    ppp     789
jkl      nnn    888      jkl    nnn     utu 
jkl      nnn    qoq      jkl    nnn     utu 
```

上述结果的不需要的记录

```
jkl nnn 888 jkl nnn qoq
jkl nnn qoq jkl nnn utu 
```

我怎样才能摆脱突出显示的记录。我认为这是由于匹配重复记录而发生的

干杯

沙巴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:44:49.660

如果要删除不匹配的第三列，则只需要第三个和内部联接：

```
SELECT * FROM @Tab1 INNER JOIN @Tab2
ON T1Col1 = T2Col1
AND T1Col2 = T2Col2
AND T1Col3 = T2Col3 
```

**更新：**

```
Select * From
(
    Select * From tab1
    Except
    Select * From tab2
)tbl
Inner Join 
(
    Select * From tab2
    Except
    Select * From tab1
)t2
On tbl.T1Col1=t2.T2Col1
And tbl.T1Col2=t2.T2Col2 
```

**对于 MS 访问**

```
 Select * From
(
    Select t1.* From Tab1 t1
    Left Join  Tab2 On t1.T1Col1=T2Col1 And  t1.T1Col2=T2Col2 And t1.T1Col3=T2Col3
    Where T2Col1 Is Null And  T2Col2 Is Null And  T2Col3 Is Null
)tbl
Inner Join 
(
    Select t2.* From  Tab2 t2
    Left Join Tab1 t1 On t1.T1Col1=t2.T2Col1 And  t1.T1Col2=t2.T2Col2 And t1.T1Col3=t2.T2Col3
    Where t1.T1Col1 Is Null And  t1.T1Col2 Is Null And  t1.T1Col3 Is Null

)t2
On tbl.T1Col1=t2.T2Col1
And tbl.T1Col2=t2.T2Col2 
```

# c# - UserControl 在 C# 中获取设置属性

> ID：15286369
> 
> 赞同：0
> 
> 时间：2013-03-08T03:48:29.657
> 
> 标签：c#, winforms, user-controls, textbox, get

我收到一个错误，例如

“在 ciscontrols.dll 中发生了‘System.StackOverflowException’类型的未处理异常”。

我的代码如下

```
 private int _vin;

    public int MaxLength
    {
        get { return _vin; }

        set //Here your answer solve the promblem
        {
            txtLocl.MaxLength = value;
            if (value < 2)
            {
                throw new ArgumentOutOfRangeException("MaxLength","MaxLength MinValue should be 2.");
            }
            else this._vin = value;
        }
    } 
```

我正在为小数位创建一个新属性

```
private int Dval;
    public int DecPlaces
    {
        get { return Dval; }
        set// here it showing the same error
        {
            DecPlaces = value; // MaxLength is a preDefined Property but  DecPlaces created by me.
            if (value < 2)
            {
                throw new ArgumentOutOfRangeException("decplaces", "decimal places minimum value should be 2.");
            }
            else this.Dval = value;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:50:06.013

你的 setter 是递归的，因为你有

```
this.MaxLength = value; 
```

在你的二传手内。这将导致无限循环，并最终导致`StackOverflowException`.

采用

```
this._vin = value; 
```

反而

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T03:50:57.230

您的属性的设置器在此行调用自身：

```
 this.MaxLength = value; 
```

将其更改为：

```
set //Here i am getting Error
{
    txtLocl.MaxLength = value;
    if (value < 2)
    {
        throw new ArgumentOutOfRangeException("MaxLength","MaxLength MinValue should be 2.");
    }
    else this._vin = value;
} 
```

For this particular exception, the Call Stack window displayed in Visual Studio while debugging is helpful in seeing which methods are calling each other in an infinite loop. The setter of a property eventually becomes a method called set_MaxLength in the run-time.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T03:50:20.017

```
this.MaxLength = value 
```

这一行触发了一个无限循环，因为它调用了`set`你已经在其中的访问器。你的意思是设置一个支持变量的值吗？

# ms-access - Microsoft Access 2003 - 表达式生成器

> ID：15286373
> 
> 赞同：0
> 
> 时间：2013-03-08T03:48:58.583
> 
> 标签：ms-access, ms-access-2003

当用户单击表单上的添加按钮时，除了在其控制源中使用表达式生成器的字段外，其他所有内容都将被保存。我了解控制源是将字段保存到表中的主要来源。我如何（或者我可以？）实际将字段保存到记录源中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:06:33.320

这是设计使然 - 您不能使用表达式作为控制源，然后期望 Access 写入未指定的数据库列。您可以使用一个表达式作为控件的默认值，但为了能够写入数据库列，您需要将该列设为控件的源。另一种可能性是使用表单的“当前”事件来用表达式的结果填充字段。

# java - java绑定vlc

> ID：15286377
> 
> 赞同：0
> 
> 时间：2013-03-08T03:49:05.803
> 
> 标签：java, binding, exception-handling, vlc

我有 vlc 便携式应用程序。在我的机器上。当我尝试使用此代码加载库时

```
 NativeLibrary.addSearchPath(
                  RuntimeUtil.getLibVlcLibraryName(), "C:/arun/software_Installations/VLC"
                );

Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class); 
```

它抛出异常：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: Unable to load library 'libvlc': The specified module could not be found.

at com.sun.jna.NativeLibrary.loadLibrary(NativeLibrary.java:169)
at com.sun.jna.NativeLibrary.getInstance(NativeLibrary.java:242)
at com.sun.jna.Library$Handler.<init>(Library.java:140)
at com.sun.jna.Native.loadLibrary(Native.java:368)
at com.sun.jna.Native.loadLibrary(Native.java:353)
at guvi.VLCJ.main(VLCJ.java:18) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:56:56.087

首先，你应该尝试

```
System.load("C:\\Path\\Of\\libvlc.dll"); 
```

至少要验证您的库是否可以加载。如果没有，它可能会为您提供有用的错误消息。

然后，在您的**VLC**安装中搜索文件`libvlc.dll`和文件，并将它们的路径添加到您编写的代码中 。`libvlccore.dll`**`NativeLibrary.addSearchPath()`**

 **```
NativeLibrary.addSearchPath(RuntimeUtil.getLibVlcLibraryName(), "C:/arun/software_Installations/VLC/"); // Make sure the "libvlc.dll" is present in this path.
Native.loadLibrary(RuntimeUtil.getLibVlcLibraryName(), LibVlc.class);
LibXUtil.initialise(); 
```**

# session - 在同一个浏览器中有两个并发会话有意义吗？

> ID：15286379
> 
> 赞同：1
> 
> 时间：2013-03-08T03:49:29.553
> 
> 标签：session, browser, concurrency

我想知道在同一个浏览器中有两个并发会话是否有意义？这种情况可能有两种情况：

1) 用户打开浏览器窗口并以用户 A 的身份登录，开始会话 1。然后他打开另一个浏览器窗口（在同一浏览器中）以用户 A 的身份登录，但启动不同的会话，会话 2。

我知道这在许多浏览器中通常是不可能的，因为为整个浏览器设置了一个会话 cookie。但是，在某些浏览器中，可以以这种方式拥有多个会话。

2）这类似于1，除了用户第二次登录时，他作为用户B登录，开始会话2。所以现在你有一个人作为两个用户在同一个浏览器中登录。

最后，允许这些东西似乎不是最好的安全实践，而且似乎也不实用。别人怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:50:51.553

首先，因为您的假设是错误的。首先，您必须了解，当从浏览器访问单个网站时，只有单个会话，并且不可能同时运行同一 Web 浏览器的不同会话。

您似乎错误地理解了私人浏览器的工作原理。私人会话不会与其他公共会话共享信息 cookie 和数据，反之亦然。一旦您关闭私人会话，所有缓存、Cookie 和其他内容都会被永久删除。

我还没有看到任何支持浏览器多会话的网络浏览器。

但是可以使用另一种方法，即您必须创建不同的 Web 浏览器配置文件，这可以帮助您，因为每个配置文件数据都是单独维护的，并且与其他会话没有冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T06:01:19.233

目前我面临的一种可能情况需要允许来自同一个浏览器的多个用户会话，但我还没有找到合适的解决方案。

我们正在使用 Yii 框架。目前我们有两种用户，即客户和管理员。两者都从相同的登录表单登录，并使用相同的会话名称和变量来存储会话信息。仅基于用户表（客户或管理员）中的类型列，将用户带到适当的视图。在其中一个管理员视图（页面）中，管理员可以选择以任何用户身份登录并通过 iframe 中的用户视图进行传播。问题在于，当管理员打开两个选项卡并以两个不同的用户身份登录时，一个用户的会话信息会覆盖另一个用户，并且我们开始遇到与会话相关的问题。

谁能建议我处理此类问题的正确方法。我已经搜索了很多试图通过多个会话来处理这个问题，但还没有找到合适的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-14T06:18:11.830

这里没有什么可以“提供支持”的。一个浏览器不能保存多个会话，因为它每个站点只保存一个唯一的 cookie，而与窗口无关。*如果*浏览器实际上具有支持在每个站点保存两个单独的相同 cookie 的模式，那么它与用户从另一个浏览器或另一台机器登录是一样的。*那*当然应该起作用；即你不应该试图颠覆这种行为。同一浏览器中的双会话只是这种多会话行为的一个特定实例，没什么特别的。

# r - 绘制动画交换（绘制方向边）

> ID：15286380
> 
> 赞同：5
> 
> 时间：2013-03-08T03:49:32.390
> 
> 标签：r, graphing, animated

我曾经在航运交易中看到过[这个情节（链接） 。](http://sappingattention.blogspot.co.uk/2012/04/visualizing-ocean-shipping.html)我从事对话交流工作，并认为使用 R 映射这种交流可能会很有趣。

这是一个更大的问题，但我认为它可能对整个社区有用。

假设我们有 7 个人围坐在这样的桌子旁：![在此处输入图像描述](../Images/d436451daa79bb5df887ca709888ed0c.png)

我记录了对话交流演讲者的谈话和听众听到的声音。我用这种信息创建了一个虚拟的 data.frame。这是头：

```
 speaker receiver duration speaker.x speaker.y receiver.x receiver.y
1       D        A       16     0.626     0.163      0.755      0.741
2       E        D        3     0.391     0.161      0.626      0.163
3       A        B       25     0.755     0.741      0.745      0.517
4       B        E        6     0.745     0.517      0.391      0.161
5       B        C       45     0.745     0.517      0.737      0.251
6       E        F       37     0.391     0.161      0.258      0.285 
```

**我想创建动画箭头（从扬声器到接收器），由扬声器着色并加权（时间/持续时间和长度和/或厚度）并以与运输数据相同的方式进行动画处理（行号是顺序讲话发生）。** 我认为也许动画包在这里可能有用但不知道。也许目前 R 不可能做到这一点（正如 Ben Schmidt 的声明所表明的那样，*“我一直希望我可以放弃 ArcGIS 来进行下一个地图项目，并将所有内容保留在 R 中——我不是在这次经历之后确信这是可能的”*）。

我想很多领域的很多人都可以使用这种交流映射，恰好我对对话交流感兴趣。最终我会在光栅图像上绘制它，但这是最容易的部分。

**这是到目前为止的数据和绘图。**

```
#the data
the_table <- data.frame(
    xmin = .3,
    xmax = .7,
    ymin = .2,
    ymax = .8
)

points <- structure(list(x = c(0.754594594594595, 0.744864864864865, 0.736756756756757, 
    0.626486486486486, 0.391351351351351, 0.258378378378378, 0.261621621621622
    ), y = c(0.741172932330827, 0.517052631578947, 0.250706766917293, 
    0.163007518796992, 0.161383458646617, 0.284812030075188, 0.494315789473684
    )), .Names = c("x", "y"))

mapping <- data.frame(person=LETTERS[1:7], points)

set.seed(10)
n <- 120
dat <- data.frame(id = 1:n, speaker=sample(LETTERS[1:7], n, TRUE),
     receiver=sample(LETTERS[1:7], n, TRUE),
    duration=sample(1:50, n, TRUE)
)
dat <- dat[as.character(dat$speaker)!=as.character(dat$receiver), ]

dat <- merge(merge(dat, mapping, by.x=c("speaker"), by.y=c("person"), sort=FALSE), 
    mapping, by.x=c("receiver"), by.y=c("person"), sort=FALSE)
names(dat)[5:8] <- c("speaker.x", "speaker.y", "receiver.x", "receiver.y")
dat <- dat[order(dat$id), c(2, 1, 4:8)]
rownames(dat) <- NULL

#the plot
ggplot() +
    geom_point(data=mapping, aes(x=x, y=y), size=10) +
    geom_text(data=mapping, aes(x=x, y=y, label=as.character(person)), 
        color="blue") +
    ylim(-.2, 1.2) + xlim(-.2, 1.2) + 
    geom_rect(data=the_table, aes(xmax = xmax, xmin=xmin, 
        ymin=ymin, ymax = ymax), fill="gray80") 
```

我没有嫁给 ggplot2，但我偏爱它，而且似乎很多这类情节都使用 ggplot2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T04:47:35.410

使用动画包，`geom_segment`这是相当直接的

到目前为止，我唯一的问题是获得一个规模合理的规模

我已将谈话 data.frame 保存为`talking`

```
library(animation)
library(RColorBrewer)
library(grid)         ## for arrow
library(ggplot2)      
# scale the duration (not ideal)
talking$scale_duration <-scale(talking$duration, center = FALSE)
# ensure that we have different colours for each speaker

ss <- levels(talking$speaker)

speakerCol <- scale_colour_manual(values = setNames(brewer.pal(n=length(ss), 'Set2' ), ss), guide = 'none')

# the base plot with the table and speakers (and `talking` base dataset)
base <- ggplot(data = talking, aes(colour = speaker)) +
  geom_point(data=mapping, aes(x=x, y=y), size=10, inherit.aes = FALSE) +
  geom_text(data=mapping, aes(x=x, y=y, label=as.character(person)), 
    inherit.aes = FALSE, color="blue") +
  ylim(-.2, 1.2) + xlim(-.2, 1.2) + 
  geom_rect(data=the_table, aes(xmax = xmax, xmin=xmin, 
      ymin=ymin, ymax = ymax), fill="gray80", inherit.aes = FALSE) +
  speakerCol
 oopt <- ani.options(interval = 0.5)

# a function to create the animation

pp <- function(){
  print(base)
  interval = ani.options("interval")
  for(n in rep(seq_along(talking$duration), each = talking$duration))){
    # a segment for each row
    tn <- geom_segment(aes(x= speaker.x, y= speaker.y, xend = receiver.x, yend = receiver.y), arrow = arrow(), 
                       data =talking[n, ,drop = FALSE])
    print(base + tn)
    ani.pause()
  }
} 
```

用于`saveGIF(pp(), interval = 0.1)`导出 GIF 动画等

# haskell - Haskell 函数 - 最大

> ID：15286381
> 
> 赞同：1
> 
> 时间：2013-03-08T03:49:34.433
> 
> 标签：haskell, higher-order-functions

所以我想在 Haskell 中编写一个名为 Largest 的函数，它找到列表的最大元素，但使用高阶函数实现。

我是 Haskell 的新手，所以这是我的尝试，但它不起作用

```
largest :: [Int] -> Int
largest [] = 0
largest (head : tail) = if (head > tail) then head
else (largest tail) 
```

我不知道高阶函数是什么意思。

一些帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T10:43:54.100

To fix your attempt:

```
largest :: [Int] -> Int
largest [] = 0
largest (head : tail) = max head (largest tail) 
```

Note that this will work only for non-negative numbers (you can fix this either by deciding that empty lists have no maximum - like Prelude's `maximum`, or by using the `minBound` for `Int` instead of `0`, but this wouldn't work e.g. for `Integer`).

However, this still doesn't use a higher order function. A suitable function for this kind of problem would be `foldl` (or better `Data.List.foldl'`) or `foldr`, but I don't want to spoil the fun.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T03:56:54.167

高阶函数将一个或多个函数作为其参数之一，或返回一个函数。在这种情况下，我假设高阶参数应该是一个比较函数。这给出了最大的简单定义：

```
largest :: [a] -> (a -> a -> Ordering) -> a
largest (x:xs) cmp = go x xs
    where go largest []     = largest
          go largest (x:xs) = case cmp largest x of
             LT -> go x xs
             _  -> go largest xs 
```

另外，只是为了让您知道，在 Prelude 中有一个功能可以为您执行此操作，称为`maximum`.`maximum [2,3,4,1] == 4`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T13:20:50.683

要完成现有答案，

您必须克服的第一个问题是尝试编译您的代码，或者至少要理解错误消息。这个提示应该给你很好的指导你所面临的问题以及如何修改它以获得正确的版本（即使你没有满足高阶功能要求，至少你会有一个工作的）。

为此，让我们看一下模式子句的类型签名，**(head : tail)**，

首先对于 (:) 函数，我们有，

```
(:) :: a -> [a] -> [a] 
```

**然后我们为head**和**tail**推导出以下类型（它们是 (:) 的参数），

*   head 是 Int 类型。
*   tail 是 [Int] 类型。

再次，让我们看一下 (>) 的类型签名

```
(>) :: Ord a => a -> a -> Bool 
```

如果我们省略约束类，为了简单起见，我们有，

```
(>) :: a -> a -> Bool 
```

或者在你的代码中有，

```
....
if ( head > tail) ...
.... 
```

可以重写，再次简化，为

```
....
if ((>) head tail)) ...
.... 
```

使用前面的所有注释，您应该能够重建提供给 (>) 函数的类型并理解问题。

然后您可以更正您的代码并**使其正常工作**。
之后你可以看看[高阶函数](http://www.cse.unsw.edu.au/~en1000/haskell/hof.html)，然后**把它改正**。

作为一般评论，当您遇到一个复杂的问题时，请尝试将其分解为较小的问题，并针对每个子问题尝试应用以下烹饪原则。

> 让它工作，
> 让它正确，
> 如果快的话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T09:54:19.063

```
if (head > tail) 
```

首先，您不需要括号。其次，更严重的是，`head`是一个整数，但`tail`它是一个整数*列表*。你不能比较这两件事。

```
largest (head : tail) = if (head > tail) then head
else largest tail 
```

这没有正确缩进。`else`必须至少缩进`if`到. 您可以将 the`then`和 the`else`放在同一行，或者执行类似的操作

```
if head > tail
  then head
  else largest tail 
```

（同样，您实际上并不需要括号 - 尽管它们不会造成任何伤害。）

最后一点，有一个预定义的函数叫做`head`，还有一个叫做`tail`，所以这些不是变量名的最佳选择。惯用的 Haskell 选择是`x`and `xs`（“x”的复数形式）。你会看到很多这样写的代码。它还有助于提醒您这`x`是一个事物并且`xs`是事物的列表。

# php - PHP 使用 jQuery .post() 提交带有多个提交按钮的表单

> ID：15286384
> 
> 赞同：1
> 
> 时间：2013-03-08T03:49:56.013
> 
> 标签：php, jquery, post, submit-button

我有以下 HTML 代码：

```
<form method="post" action="the_file.php" id="the-form">
    <input type="text" name="the_input" value="<?php if ( isset( $_POST['the_input'] ) echo $_POST['the_input]; ?>">
    <button type="submit" name="eat_something" value="TRUE">Eating</button>
    <button type="submit" name="eat_something" value="FALSE">Don't Eat</button>
</form>
<textarea id="result"></textarea> 
```

其次是这个JS：

```
$('#the-form').bind('submit', submitForm);
function submitForm(evt) {
    jQuery.post(
        $(this).attr('action'),
        $(this).serialize(),
        function(data) {
            $('#result').empty().append(data).slideDown();
        });
    evt.preventDefault();
} 
```

我还有一个 PHP 脚本，它在提交时从输入中接收 $_POST 值，并运行一个条件来测试单击了哪个提交按钮。

像这样：

```
$input = $_POST['the_input'];
$eating = $_POST['eat_something'];
if ( $eating == 'TRUE' ) {
    // Do some eating...
} else {
    // Don't you dare...
} 
```

如果我不使用 jQuery.post() 函数，则会发布来自按钮的提交值。但是，由于某种原因，我无法使用 jQuery.post() 函数将按钮值传递给 PHP $_POST。如果我不使用 jQuery.post() ，则输出不会附加到 textarea 而是附加到单独页面上的文本格式，例如文档。我也试过在按钮上调用提交函数，`$('button[type=submit]').bind('submit', submitForm);`但这也不能解决我的问题。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:02:12.890

您忘记了单引号和`)`输入`the_name`。

```
<input type="text" name="the_input" value="<?php if (isset($_POST['the_input'])) { echo $_POST['the_input'] ; } ?>"> 
```

并且为了获取表单按钮按下的值，您需要手动附加它的值以进行序列化。

```
$form.serialize() + "&submit="+ $('button').attr("value") 
```

**例子**

```
<script type="text/javascript">
    $(function()
    {
        $('button[type="submit"]').on('click',function(e)
        {
            e.preventDefault();
            var submit_value = $(this).val();
            jQuery.post
            (
                $(this).attr('action'),
                $(this).serialize()+ "&submit="+ submit_value,
                function(data)
                {
                    $('#result').empty().append(data).slideDown();
                }
            );
        });
    });
</script> 
```

**完整的测试代码**

```
<?php
    if(isset($_POST['the_input']))
    {
        $input = $_POST['the_input'];
        $eating = $_POST['eat_something'];
        exit;
    }
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <title>StackOverFlow</title>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript">
        $(function()
        {
            $('button[type="submit"]').on('click',function(e)
            {
                e.preventDefault();
                var submit_value = $(this).val();
                jQuery.post
                (
                    $('#the-form').attr('action'),
                    $('#the-form').serialize()+ "&eat_something="+ submit_value,
                    function(data)
                    {
                        $('#result').empty().append(data).slideDown();
                    }
                );
            });
        });
    </script>
</head>
<body>
    <form method="post" action="random.php" id="the-form">
        <input type="text" name="the_input" value="<?php if (isset($_POST['the_input'])) { echo $_POST['the_input'] ; } ?>">
        <button type="submit" name="eat_something" value="TRUE">Eating</button>
        <button type="submit" name="eat_something" value="FALSE">Don't Eat</button>
    </form>
    <textarea id="result"></textarea>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:14:37.953

Simplest answer would be:

```
<form method="post" action="the_file.php" id="the-form">
    <input type="text" name="the_input" value="<?php if ( isset( $_POST['the_input'] ) echo $_POST['the_input']; ?>">
    <input type="submit" name="eat_something" value="Eating" />
    <input type="submit" name="eat_something" value="Don't Eat" />
</form> 
```

Of course, this won't give exactly what you're looking for.

You can also do something like this:

```
<form method="post" action="the_file.php" id="the-form">
    <input id="theInput" type="text" name="the_input" value="<?php if ( isset( $_POST['the_input'] ) echo $_POST['the_input']; ?>">
    <button type="button" name="eat_something" data-value="TRUE">Eating</button>
    <button type="button" name="eat_something" data-value="FALSE">Don't Eat</button>
</form>

$('#the-form button').bind('click', function(){
    jQuery.post($('#the-form').attr('action'),
    {
        the_input: $('#theInput').val(),
        eat_something: $(this).attr('data-value')
    },
    function(data) { $('#result').empty().append(data).slideDown() },
    'json'
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T04:01:00.983

将按钮更改为此（更改 w/您的表单名称）..

```
<input type="hidden" name="eat_something" value="" />
<input type="button" onclick="$('input[name=eat_something]').val('TRUE')" />
<input type="button" onclick="$('input[name=eat_something]').val('FALSE')" /> 
```

Javascript函数和PHP都很好。

谢谢！

@leo

# java - 排序自定义数组列表

> ID：15286390
> 
> 赞同：0
> 
> 时间：2013-03-08T03:50:37.713
> 
> 标签：java

我有一个名为 x 的类，它是一个数组列表，需要按值降序排序。我的课-

```
 public static class x
{
    public int id;
    public double value;
    public x(int _id, double _value)
    {
        id = _id;
        value = _value;
        //System.out.println(Integer.toString(id));
    }

    public Integer getID(){
        return id;
    }
    public double getValue(){
        return value;
    }

    //Sorting
    public static Comparator<x> getComparator(SortParameter... sortParameters) {
        return new xComparator(sortParameters);
    }

    public enum SortParameter {
        VAL_DESCENDING
    }

    private static class xComparator implements Comparator<x> {
        private SortParameter[] parameters;

        private xComparator(SortParameter[] parameters) {
            this.parameters = parameters;
        }

        public int compare(x o1, x o2) {
            int comparison;
            for (SortParameter parameter : parameters) {
                switch (parameter) {
                   case VAL_DESCENDING:
                        comparison = o2.id - o1.id;
                        if (comparison != 0) return comparison;
                        break;

                }
            }
            return 0;
        }
    }

} 
```

我这样称呼它：

```
 cp = x.getComparator(x.SortParameter.VAL_DESCENDING);
  Collections.sort(attr1, cp); 
```

`attr1`是我的数组列表

仅供参考，我正在关注[这个](https://stackoverflow.com/a/1421324/787158)

我收到错误：

```
cannot find symbol : variable cp 
```

我是java的新手:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T03:57:26.933

尝试使用`Comparator<x> cp = x.getComparator(x.SortParameter.VAL_DESCENDING);`来声明它。在声明变量之前，您不能使用它

# html - CSS 在 Safari 中不起作用 - 在 Chrome、Firefox 中正常

> ID：15286395
> 
> 赞同：2
> 
> 时间：2013-03-08T03:51:08.457
> 
> 标签：html, css, safari

我的网站是[http://proustscookies.blogspot.com/](http://proustscookies.blogspot.com/)。我正在使用 CSS 对附加到搜索表单的按钮进行样式设置。

这是CSS：

```
input.gsc-search-button {
margin-left: 10px;
height: 24px;
width: 60px;
border-style: none;
background-color: #666666;
font-family: Helvetica, Arial, sans-serif;
font-size: 13px;
color: #FFFFFF;
} 
```

margin-left 命令在 Firefox 和 Chrome 中运行良好，但在 Safari 中根本不行。

所有其他 CSS 规则（网站上方和整个网站，数据未显示）在所有三种浏览器中都有效（上次我也在 IE 中检查过）。

我使用 Chrome Extension Stylebot 找到了对象名称（input.gsc-search-button）。不幸的是，我在任何地方都找不到底层的 html（这是一个博主赞助的小部件。谷歌会在某处隐藏代码吗？我不知道。）

如果有人能帮我弄清楚为什么 Safari 中没有显示边距，或者如何找到搜索框的 html，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:53:39.733

It's overridden by google. If you do:

```
margin-left: 10px!important; 
```

You can override that.

Or you could make your selector more specific (and hence give it precedence) by doing something like

```
td.gsc-search-button input.gsc-search-button {
   margin-left: 10px;
} 
```

Hint: you can right click on an element (in firefox or chrome) and click "inspect element" to see the css associated with that element.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-12T20:07:26.407

我有一个类似的问题，除了移动 safari 之外，所有样式都正确应用，非常奇怪。它甚至可以在桌面 safari 上运行！

最后，我用更精确的定位来修复它。我以前有这个：

```
.phone{
  background-color:gray;
} 
```

此更改修复了它。

```
 div.phone {
    background-color:gray;
  } 
```

顺便说一句，我通过在移动 safari 上使用检查器来解决这个问题。[http://webdesign.tutsplus.com/articles/quick-tip-using-web-inspector-to-debug-mobile-safari--webdesign-8787](http://webdesign.tutsplus.com/articles/quick-tip-using-web-inspector-to-debug-mobile-safari--webdesign-8787)

# node.js - trouble using fs module to locate file

> ID：15286397
> 
> 赞同：0
> 
> 时间：2013-03-08T03:51:17.323
> 
> 标签：node.js, fs

Here is my code:

```
connection.query("SELECT * FROM images", function(err, rows, fields) {
            if (err) {
                console.log("Error: ");
                console.log(err);
            }
            else {
                console.log("rows: ");
                console.log(rows);

                for (var i = 0; i < rows.length; i++) {
                    var thisRow = rows[i];
                    var thisImageName = thisRow["imagename"];
                    var newDir = __dirname.split(path.sep).join("/");
                    var thisImagePath = newDir + "/public/uploads/" + thisImageName + ".jpg";
                    console.log(thisImagePath);
                    fs.exists(thisImagePath, function(exists) {
                        if (exists) {
                            console.log("true");
                            res.end();
                        }
                        else {
                            console.log(thisImageName + " does not exist."); res.end();
//Always returns false
                        }
                    });
                }
            }
        }); 
```

HOWEVER,

In the console:

```
fs.exists(/* imagepath */, function(exists){console.log(exists)}) //returns true 
```

As you can see I'm using the `node-mysql` library to return the file names of my images. I concatenate them using the `__dirname` global and then I reverse the slashes in the directory string to use in the `.exists()` call. When I use the `fs` module to check if the image file exists, it returns false.

HOWEVER, if I use `fs.exists()` with the same path in the console, it returns true. Does anyone know what's going on here?

# php - Editing an existing pdf file's metadata

> ID：15286398
> 
> 赞同：4
> 
> 时间：2013-03-08T03:51:19.563
> 
> 标签：php, pdf, tcpdf, zend-pdf, pdflib

I have some `PDF` files, on pdf version 1.6\.

i have been trying the following libraries to edit the metadata of these pdf files:

1.  Zend_Pdf class: which worked nicely for pdf version 1.5 or less. but had an error on parsing pdf of version 1.6
2.  pdflib: not sure how i can edit an existing pdf file.
3.  tcpdf: same problem that i couldn't find the functions for editing the existing pdf
4.  someone also suggested just edit the pdf file by adding the following(for an example, title) to the end of the pdf file: `/Title (Title Text)`

i would still wish to be able to do it using `pdflib` or some free source php libraries to achieve this.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-08T17:33:39.400

PDFlib 无法编辑现有文件，但您可以将现有文件的内容复制到新文件并从导入文档中读取元数据，对其进行更改，然后将其写入新文档。

[http://www.pdflib.com/pdflib-cookbook/document-interchange/import-xmp-from-pdf/php-import-xmp-from-pdf/](http://www.pdflib.com/pdflib-cookbook/document-interchange/import-xmp-from-pdf/php-import-xmp-from-pdf/)

是一个例子，展示了这种方法的一部分。

# android - Android Wifi Direct 服务发现

> ID：15286400
> 
> 赞同：8
> 
> 时间：2013-03-08T03:51:33.903
> 
> 标签：android, android-wifi, bonjour, wifi-direct

我正在尝试实现一个简单的 android 应用程序，该应用程序在一个设备上广播 WifiP2p bonjour 服务，并让第二个设备发现并连接到它。我已经非常关注这里的教程[了](http://developer.android.com/training/connect-devices-wirelessly/nsd-wifi-direct.html)。

我有一个有效的`Channel`对象 a`DnsSdServiceResponseListener`和 a `DnsSdTxtRecordListener`，并通过此调用设置它们：

```
mManager.setDnsSdResponseListeners(channel, servListener, txtListener); 
```

截至目前，两个听众都只是吐出一些调试信息以保持简单。

问题是 my`DnsSdServiceResponseListener`从未被调用，但`DnsSdTxtRecordListener` *确实被调用*并且传入的所有参数看起来都是合法的。怎么能叫一个而不能叫另一个？

我正在使用两个实际设备进行测试，它们都运行 android 4.2.2。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-09T21:47:21.283

终于想通了。。有点。在获取服务请求的实例时，我指定了服务实例名称和类型以匹配创建服务时使用的值......

注册服务： `mServiceInfo = WifiP2pDnsSdServiceInfo.newInstance(Consts.SERVICE_INSTANCE, Consts.SERVICE_REG_TYPE, record);`

创建服务请求： `mServiceRequest = WifiP2pDnsSdServiceRequest.newInstance(Consts.SERVICE_INSTANCE, Consts.SERVICE_REG_TYPE);`

在获取服务请求时，我删除了 newInstance 方法的参数... `mServiceRequest = WifiP2pDnsSdServiceRequest.newInstance();`

现在正在调用两个听众。似乎我的第一种方法会过滤掉附近广播的其他服务，这就是我最初选择超载的原因。

# python - Print multiple arguments in Python

> ID：15286401
> 
> 赞同：363
> 
> 时间：2013-03-08T03:51:48.540
> 
> 标签：python, printing, python-3.x, arguments

This is just a snippet of my code:

```
print("Total score for %s is %s  ", name, score) 
```

But I want it to print out:

> "Total score for (name) is (score)"

where `name` is a variable in a list and `score` is an integer. This is Python 3.3 if that helps at all.

* * *

## 回答 #1

> 赞同：647
> 
> 时间：2013-03-08T03:52:57.977

There are many ways to do this. To fix your current code using `%`-formatting, you need to pass in a tuple:

1.  Pass it as a tuple:

    ```
    print("Total score for %s is %s" % (name, score)) 
    ```

A tuple with a single element looks like `('this',)`.

Here are some other common ways of doing it:

2.  Pass it as a dictionary:

    ```
    print("Total score for %(n)s is %(s)s" % {'n': name, 's': score}) 
    ```

There's also new-style string formatting, which might be a little easier to read:

3.  Use new-style string formatting:

    ```
    print("Total score for {} is {}".format(name, score)) 
    ```

4.  Use new-style string formatting with numbers (useful for reordering or printing the same one multiple times):

    ```
    print("Total score for {0} is {1}".format(name, score)) 
    ```

5.  Use new-style string formatting with explicit names:

    ```
    print("Total score for {n} is {s}".format(n=name, s=score)) 
    ```

6.  Concatenate strings:

    ```
    print("Total score for " + str(name) + " is " + str(score)) 
    ```

The clearest two, in my opinion:

7.  Just pass the values as parameters:

    ```
    print("Total score for", name, "is", score) 
    ```

    If you don't want spaces to be inserted automatically by `print` in the above example, change the `sep` parameter:

    ```
    print("Total score for ", name, " is ", score, sep='') 
    ```

    If you're using Python 2, won't be able to use the last two because `print` isn't a function in Python 2\. You can, however, import this behavior from `__future__`:

    ```
    from __future__ import print_function 
    ```

8.  Use the new `f`-string formatting in Python 3.6:

    ```
    print(f'Total score for {name} is {score}') 
    ```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2016-08-11T13:07:38.753

有很多方法可以打印出来。

让我们看另一个例子。

```
a = 10
b = 20
c = a + b

#Normal string concatenation
print("sum of", a , "and" , b , "is" , c) 

#convert variable into str
print("sum of " + str(a) + " and " + str(b) + " is " + str(c)) 

# if you want to print in tuple way
print("Sum of %s and %s is %s: " %(a,b,c))  

#New style string formatting
print("sum of {} and {} is {}".format(a,b,c)) 

#in case you want to use repr()
print("sum of " + repr(a) + " and " + repr(b) + " is " + repr(c))

EDIT :

#New f-string formatting from Python 3.6:
print(f'Sum of {a} and {b} is {c}') 
```

* * *

## 回答 #3

> 赞同：53
> 
> 时间：2018-01-18T11:23:38.133

用途`.format()`：：

```
print("Total score for {0} is {1}".format(name, score)) 
```

或者：

```
// Recommended, more readable code

print("Total score for {n} is {s}".format(n=name, s=score)) 
```

或者：

```
print("Total score for" + name + " is " + score) 
```

或者：

```
print("Total score for %s is %d" % (name, score)) 
```

或者： 从**Python 3.6**`f-string`格式化：

 **```
print(f'Total score for {name} is {score}') 
```

可以使用`repr`并自动`''` 添加：

```
print("Total score for" + repr(name) + " is " + repr(score))

# or for advanced: 
print(f'Total score for {name!r} is {score!r}') 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2017-05-23T10:09:21.190

在 Python 3.6`f-string`中，干净得多。

在早期版本中：

```
print("Total score for %s is %s. " % (name, score)) 
```

在 Python 3.6 中：

```
print(f'Total score for {name} is {score}.') 
```

会做。

它更高效、更优雅。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-04-01T20:57:55.560

保持简单，我个人喜欢字符串连接：

```
print("Total score for " + name + " is " + score) 
```

它适用于 Python 2.7 和 3.X。

注意：如果 score 是*int*，则应将其转换为*str*：

```
print("Total score for " + name + " is " + str(score)) 
```

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2017-09-22T07:11:56.847

只要按照这个

```
grade = "the biggest idiot"
year = 22
print("I have been {} for {} years.".format(grade, year)) 
```

**或者**

```
grade = "the biggest idiot"
year = 22
print("I have been %s for %s years." % (grade, year)) 
```

忘记所有其他的，否则大脑将无法映射所有格式。

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2014-07-30T05:00:47.167

试试看嘛：

```
print("Total score for", name, "is", score) 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2018-07-07T06:08:14.197

使用`f-string`：

```
print(f'Total score for {name} is {score}') 
```

或者

使用`.format`：

```
print("Total score for {} is {}".format(name, score)) 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2016-03-03T16:51:36.773

```
print("Total score for %s is %s  " % (name, score)) 
```

`%s`可以替换为`%d`或`%f`

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-07-11T19:53:48.190

如果`score`是一个数字，那么

```
print("Total score for %s is %d" % (name, score)) 
```

如果 score 是一个字符串，那么

```
print("Total score for %s is %s" % (name, score)) 
```

如果 score 是一个数字，那么它是`%d`，如果它是一个字符串，那么它是`%s`，如果 score 是一个浮点数，那么它是`%f`

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-12-21T09:51:44.343

这就是我所做的：

```
print("Total score for " + name + " is " + score) 
```

记得在`for`前后加一个空格`is`。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-14T16:35:05.883

最简单的方法如下

```
print(f"Total score for {name} is {score}") 
```

只需在前面加上一个“f”。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-01T21:57:18.313

这可能是一个`casting issue`. `Casting syntax`当您尝试将两个不同的`types of variables`. 由于我们不能将 a 转换`string`为`integer`or `float`always，我们必须将 our 转换`integers`为 a `string`。这就是你的做法。：`str(x)`。要转换为整数，它是：`int(x)`，浮点数是`float(x)`. 我们的代码将是：

```
print('Total score for ' + str(name) + ' is ' + str(score)) 
```

还！运行此`snippet`查看如何转换不同的表`types of variables`！

```
<table style="border-collapse: collapse; width: 100%;background-color:maroon; color: #00b2b2;">
<tbody>
<tr>
<td style="width: 50%;font-family: serif; padding: 3px;">Booleans</td>
<td style="width: 50%;font-family: serif; padding: 3px;"><code>bool()</code></td>
  </tr>
 <tr>
<td style="width: 50%;font-family: serif;padding: 3px">Dictionaries</td>
<td style="width: 50%;font-family: serif;padding: 3px"><code>dict()</code></td>
</tr>
<tr>
<td style="width: 50%;font-family: serif;padding: 3px">Floats</td>
<td style="width: 50%;font-family: serif;padding: 3px"><code>float()</code></td>
</tr>
<tr>
<td style="width: 50%;font-family: serif;padding:3px">Integers</td>
<td style="width: 50%;font-family: serif;padding:3px;"><code>int()</code></td>
</tr>
<tr>
<td style="width: 50%;font-family: serif;padding: 3px">Lists</td>
<td style="width: 50%font-family: serif;padding: 3px;"><code>list()</code></td>
</tr>
</tbody>
</table>
```**

# xamarin.ios - MonoTouch 'could not AOT the assembly'

> ID：15286404
> 
> 赞同：1
> 
> 时间：2013-03-08T03:52:31.680
> 
> 标签：xamarin.ios

I'm using MonoTouch 6.2 and I have an app that builds and runs fine on the simulator, but gets a "Could not AOT the assembly" error when I build for the actual device.

Has anyone seen this before?

Here's the compiler output:

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++  -miphoneos-version-min=4.3 -arch armv7  -std=c99 -I/Developer/MonoTouch/SDKs/MonoTouch.iphoneos.sdk/usr/include -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -x assembler-with-cpp -c /var/folders/rw/m66cxvf16kq37jjxdt0d99580000gn/T/tmpc3662b4.tmp/GoogleAnalytics.dll.armv7.s -o /var/folders/rw/m66cxvf16kq37jjxdt0d99580000gn/T/tmpc3662b4.tmp/GoogleAnalytics.dll.armv7.o
AOT Compilation exited with code 134, command:
MONO_PATH=/Users/me/dev/MyApp/Src/Plat/iOS/bin/iPhone/Debug/MyApp.app /Developer/MonoTouch/usr/bin/arm-darwin-mono --debug --aot=mtriple=armv7-darwin,full,static,asmonly,direct-icalls,soft-debug,no-direct-calls,iphone-abi,outfile=/var/folders/rw/m66cxvf16kq37jjxdt0d99580000gn/T/tmpc3662b4.tmp/MyApp.exe.armv7.s "/Users/me/dev/MyApp/Src/Plat/iOS/bin/iPhone/Debug/MyApp.app/MyApp.exe"
Mono Ahead of Time compiler - compiling assembly /Users/me/dev/MyApp/Src/Plat/iOS/bin/iPhone/Debug/MyApp.app/MyApp.exe
* Assertion at ../../../../../mono/mono/metadata/marshal.c:8613, condition `sig->param_count == invoke_sig->param_count + 1' not met

Mono Ahead of Time compiler - compiling assembly /Users/me/dev/MyApp/Src/Plat/iOS/bin/iPhone/Debug/MyApp.app/mscorlib.dll
Code: 1337720 Info: 35037 Ex Info: 487954 Unwind Info: 8707 Class Info: 22674 PLT: 3057 GOT Info: 65112 GOT: 22092 Offsets: 31427
Output file: '/var/folders/rw/m66cxvf16kq37jjxdt0d99580000gn/T/tmpc3662b4.tmp/mscorlib.dll.armv7.s'.
Linking symbol: '_mono_aot_module_mscorlib_info'.
Compiled 6288 out of 6288 methods (100%)
Methods without GOT slots: 4052 (64%)
Direct calls: 246 (2%)
JIT time: 1134 ms, Generation time: 1793 ms, Assembly+Link time: 203 ms.

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/g++  -miphoneos-version-min=4.3 -arch armv7  -std=c99 -I/Developer/MonoTouch/SDKs/MonoTouch.iphoneos.sdk/usr/include -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -x assembler-with-cpp -c /var/folders/rw/m66cxvf16kq37jjxdt0d99580000gn/T/tmpc3662b4.tmp/mscorlib.dll.armv7.s -o /var/folders/rw/m66cxvf16kq37jjxdt0d99580000gn/T/tmpc3662b4.tmp/mscorlib.dll.armv7.o
error MT3001: Could not AOT the assembly '/Users/me/dev/MyApp/Src/Plat/iOS/bin/iPhone/Debug/MyApp.app/MyApp.exe'
  at MTouch.GetObjectFileForAssembly (System.String assemblyName, Abi abi) [0x00000] in <filename unknown>:0 
  at MTouch+<CompileAssemblies>c__AnonStorey10.<>m__1A (System.String s) [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Parallel+<ForEach>c__AnonStorey36`1[System.String].<>m__34 (System.String e, System.Threading.Tasks.ParallelLoopState s, System.Object l) [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Parallel+<ForEach>c__AnonStorey35`2[System.String,System.Object].<>m__32 () [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.TaskActionInvoker+ActionInvoke.Invoke (System.Threading.Tasks.Task owner, System.Object state, System.Threading.Tasks.Task context) [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Task.InnerInvoke () [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Task.ThreadStart () [0x00000] in <filename unknown>:0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:14:13.463

Fixed.. the problem was I had a MonoPInvokeCallbackAttribute with a delegate type that didn't match the signature of the function. For example:

```
delegate int SomeDelegate();

[ MonoPInvokeCallbackAttribute ( typeof( SomeDelegate ) ) ]
static void MyCallback( int x )
{
} 
```

So the signature of **SomeDelegate** doesn't match the signature of **MyCallback**.

# php - 没有互联网连接时使用 mysql

> ID：15286406
> 
> 赞同：0
> 
> 时间：2013-03-08T03:52:39.890
> 
> 标签：php, mysql

我有一个 php+mysql 应用程序，想知道当互联网连接丢失时使我的应用程序工作的最佳方法是什么。

我想拥有两个相同的数据库，一个在我的互联网主机中，另一个在我的本地主机中。因此，当没有连接时，我会将所有数据存储到我的本地主机。

我的问题是如何将数据从本地主机传输到 Internet 主机中的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:55:37.760

您需要使用[复制](http://dev.mysql.com/doc/refman/5.0/en/replication.html)- 此链接将告诉您如何设置它，以便您的本地机器是远程机器的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:10:04.740

您只是在收集订阅等数据吗？如果是这样，当您检测到您的主数据库已关闭时，您可以暂时将新记录排队，当您检测到两个数据库都可用并且本地存在任何未处理的记录时，执行普通的插入和删除以传输未处理的新记录。

如果您需要查询和维护两个数据库之间的关系数据，那么您将需要更健壮和复杂的复制策略。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-08T03:55:20.787

如果两台服务器上都有 phpMyAdmin，则可以导出 localhost 数据库，然后将其导入托管数据库。

# javascript - In javascript what is the video equivalent of "new Audio( )"

> ID：15286407
> 
> 赞同：5
> 
> 时间：2013-03-08T03:52:40.113
> 
> 标签：javascript, html, audio, video

In Javascript you can access the HTML-5 audio object like this:

```
var audio = new Audio('nameOfFile.mp3'); 
```

But the equivalent syntax for the video element doesn't seem to work (I'm on Chrome).

```
var video = new Video('nameOfFile.ogg'); 
```

I'm curious if there *is* an equivalent object for the video tag that I can access via this simple **new** syntax.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T04:09:58.563

目前还没有，但您可以创建一个很长的路要走：

```
var video = document.createElement("video");
video.setAttribute("src", "nameOfFile.ogg"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-29T14:00:38.700

以防万一你需要，我有一个，非常相似的`new Audio()`东西......

```
function Video(src, append) {
  var v = document.createElement("video");
  if (src != "") {
    v.src = src;
  }
  if (append == true) {
    document.body.appendChild(v);
  }
  return v;
} 
```

然后你可以像这样使用它：

```
var video = new Video("YOUR_VIDEO_URL", true);
// do whatever you want...
video.height = 280;
video.width = 500;
video.controls = "controls";
video.play(); 
```

# javascript - jQuery jeditable error Object [object Object] has no method 'editable'

> ID：15286414
> 
> 赞同：0
> 
> 时间：2013-03-08T03:53:55.570
> 
> 标签：javascript, jquery, ruby-on-rails-3, jeditable

It looks a dummy error for this jeditable object. This is my page

```
 <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-transition.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-alert.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-modal.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-tab.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-popover.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-button.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-collapse.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-carousel.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-typeahead.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap/bootstrap-affix.js?body=1" type="text/javascript"></script>
<script src="/assets/twitter/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/mgm.js?body=1" type="text/javascript"></script>
<script src="/assets/swimming/classschedules.js?body=1" type="text/javascript"></script>
<script src="/assets/swimming/coaches.js?body=1" type="text/javascript"></script>
<script src="/assets/swimming/programs.js?body=1" type="text/javascript"></script>
<script src="/assets/swimming/shoppings.js?body=1" type="text/javascript"></script>
<script src="/assets/swimming/students.js?body=1" type="text/javascript"></script>
<script src="/assets/underscore-min.js?body=1" type="text/javascript"></script>
<script src="/assets/backbone-min.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.jeditable.mini.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>

<div class="edit" id="dev008">click to edit</div>

 $(function() {
     $('.edit').editable('<%= date_swimming_classschedules_path(@date)%>');
 }); 
```

And I got this error

```
Uncaught TypeError: Object [object Object] has no method 'editable' 
```

And I have checked

```
src="/assets/jquery.jeditable.mini.js?body=1" 
```

It is reachable. Is there something else should I check to fix this error?

full error message in chrome console

```
Uncaught TypeError: Object [object Object] has no method 'editable' er:236
(anonymous function) er:236
y.Callbacks.l application.js:14
y.Callbacks.c.fireWith application.js:14
y.extend.ready application.js:14
M application.js:14 
```

**UPDATE.**

I found this line

```
<script src="/assets/application.js?body=1" type="text/javascript"></script> 
```

just after

```
<script src="/assets/jquery.jeditable.mini.js?body=1" type="text/javascript"></script> 
```

is a duplicate of jQuery library. How can I remove this line?

**UPDATE 2**

I am adding related rails code

/app/assets/application.js code

```
//= require jquery
//= require jquery_ujs
//= require twitter/bootstrap
//= require underscore-min.js
//= require backbone-min.js
//= require jquery.jeditable.mini.js 
```

/app/views/layouts/application.html.erb code

```
<%= javascript_include_tag "application" %> 
```

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:39:33.660

查找`application.js`（在 /assets/ 中）并删除内容（或执行一些操作使其不再包含 jquery 的另一个副本）

:)

# c - Runtime exception with input using scanf or gets in C

> ID：15286416
> 
> 赞同：0
> 
> 时间：2013-03-08T03:54:20.767
> 
> 标签：c, visual-studio-2010, input

I am trying to get input from the console with this code but it gives me runtime exception at some memory location each time I try to run it and enter the first possible input. I am using Visual Studio 2010\. I got same problems with MingW and Dev C++. However, the code ran fine with the old TurboC3 compiler.

```
int Nowhere(int x);
...
char* AtBashEncrypt(char* message);
char* AtBashDecrypt(char* encrypted);

int main()
{
    char *input = "", *ciphertext = "", *plaintext = "";
    system("cls");
    printf("AtBash Cipher\nEnter a string to be encrypted: ");
    gets(input); //this is where I get the error
    ciphertext = AtBashEncrypt(input);
    ...
    getch();
} 
```

What could possibly be wrong with it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T03:56:54.617

```
 char *input = ""; 
```

是指向驻留在只读内存中的字符串文字的指针，您无法修改其内容。任何这样做的尝试都会导致未定义的行为。你需要的是一个数组。

```
#define MAX_SIZE 256
char input[MAX_SIZE]=""; 
```

**好读：**
[char a[] = ?string?; 之间有什么区别？和 char *p = ?string?;?](https://stackoverflow.com/questions/9460260/what-is-the-difference-between-char-a-string-and-char-p-string)

此外，您应该**[使用 fgets 而不是 gets](https://stackoverflow.com/questions/4309746/safe-alternative-to-gets)**

# php - Can I write an application to add event to user's google calendar which only me can manage that event?

> ID：15286417
> 
> 赞同：1
> 
> 时间：2013-03-08T03:54:29.953
> 
> 标签：php, google-api, google-calendar-api

I am writing a web application related to appointment making.

For example, my user is a piano tutor. He can set his available schedule in my application and someone can reserve a time for his service. Once this reservation is made, my application will add an event to his google calendar so that he will be able to check his schedule in mobile device. The problem is, I would like to make this event read only to him. And if he wants to change/cancel this reservation, he has to login to my application to do so.

My approach is to create a google a/c for my application, create a new calender for every user use my service. Automatically subscribe this calender to the user's google calendar. So that he only subscribes my calendar, he can't make any modification to that.

My questions are... 1\. Can my application make someone's subscribe the calendar with google api? 2\. Can I set that calendar accessable by only him and my application? So that someone will not able to subscribe even he has the link of the calendar. (this is to protect the privacy of my user) 3\. If the above are possible, which api / particular function I will have to use to make it work? (I am not asking sample code, just want some point to start my studying. Of coz, sample codes are welcome.) 4\. Will there be any limit for calendar I can create in my account? Since my application may have 1000 or more users, so that I will have to create 1000+ calendar in my google a/c.

Thanks a lot

# php - how to zip stream csv file php

> ID：15286427
> 
> 赞同：2
> 
> 时间：2013-03-08T03:56:02.463
> 
> 标签：php, csv, ziparchive, zipstream

I created an .csv export file with code:

```
header('Content-type: text.csv');
header('Content-Disposition: attachment; filename=filename.csv');
.....
$fp = fopen('php://output','w');
foreach ($rowsCsv as $rowCsv) {
    fwrite($fp, $rowCsv);
}
fclose($fp); 
```

It work ok but I want to compress the csv file to zip file and download it. How do it

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T04:02:48.773

您应该在导出之前读取一个 CSV 文件，或者您只需要放入`filename.csv`文件中：

```
$file_folder = "folder_you_stored/";    // change folder
$file = "filename.csv";                 // your CSV filename from exported done

$zip = new ZipArchive();
$zip_name = "archiver.zip";

    $string_data = 'dumped data of CSV';

$zip->addFile($file_folder.$file); // store a file OR below
$zip->addString("your_filename.csv", $string_data); // file store of string data

# download action
header('Content-type: application/zip');
header('Content-Disposition: attachment; filename="'.$zip_name.'"');
header('Content-Length: ' . strlen($string_data));
readfile($zip_name);
unlink($zip_name); 
```

PHP.NET 参考如何使用 ZIP 存档：[http](http://php.net/manual/en/class.ziparchive) : //php.net/manual/en/class.ziparchive.phpž

将而不是`addFile`添加为字符串作为示例：

```
$fp = fopen('php://output','w');
foreach ($rowsCsv as $rowCsv) {
    $zip->addFromString('example.csv', $rowCsv);
} 
```

# android - Android 应用程序崩溃：将 JSON 解析为 ListView

> ID：15286428
> 
> 赞同：1
> 
> 时间：2013-03-08T03:56:20.110
> 
> 标签：android, json, android-listview, crash, android-asynctask

我之前发布过，但仍然遇到同样的问题。我的 android 应用程序将加载此活动，然后在它能够显示来自我的 JSON 对象的任何信息之前崩溃。我不知道为什么会这样。任何帮助，将不胜感激。

这是我不断崩溃的活动的代码：

```
public class MainScreen extends ListActivity{
    JSONObject jsonObj= null;

    String[] eventArr= new String[10];
    int i=0;

    String[] urlArr = new String[10];//"http://accomplist.herokuapp.com/api/v1/sharedevent/1/?format=json";

    private static final String TAG_EVENT="event"; //A JSON object within the JSON object that will be returned by JSONParse()
    private static final String TAG_DESCRIPTION="description"; //A JSON tag within the JSON object EVENT
    private static String eventString="Yo";

    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_screen);
        ListView eventsList= getListView();
        for(int b=0; b<urlArr.length; b++) {
            urlArr[b]= "http://accomplist.herokuapp.com/api/v1/sharedevent/"+(b+1)+"/?format=json";
        }
        new JSONParse().execute(urlArr[0]);
    }
private class JSONParse extends AsyncTask<String, Void, String> {
    HttpClient client=new DefaultHttpClient();

    @Override
    protected String doInBackground(String... jsonurl) {
//        StringBuilder url= new StringBuilder(String.valueOf(jsonurl));
        HttpUriRequest request= new HttpGet("http://accomplist.herokuapp.com/api/v1/sharedevent/2/?format=json");
        HttpResponse r= null;
        try {
            r = client.execute(request);
        } catch (ClientProtocolException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
        }
        int status= r.getStatusLine().getStatusCode();
        if (status==200){
            HttpEntity e=r.getEntity();
            String data= null;
            try {
                data = EntityUtils.toString(e);
            } catch (IOException e1) {
                e1.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            }
            try {
                jsonObj = new JSONObject(data);
            } catch (JSONException e1) {
                e1.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
            }
            try {
                JSONObject eventJson= jsonObj.getJSONObject(TAG_EVENT);
                eventString= eventJson.getString(TAG_DESCRIPTION);
            }
            catch (JSONException e1) {
                eventString="Couldn't Parse Data";
            }
            return eventString;
        }
        else{
            return eventString;
        }
    }
    protected void onProgressUpdate() {
        Toast loadingToast= Toast.makeText(getApplicationContext(), "Loading", Toast.LENGTH_LONG);
        loadingToast.show();
    }
    protected void onPostExecute(String result) {
        eventString=result;
        eventArr[i]=eventString;
        i++;
        MainScreen.this.setListAdapter(new ArrayAdapter<String>(MainScreen.this,
                android.R.layout.simple_list_item_1,eventArr));

    }
}
} 
```

这是我的 LogCat 错误：

```
com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d11730 that was originally bound here
android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d11730 that was originally bound here
at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
at android.app.ContextImpl.bindService(ContextImpl.java:1418)
at android.app.ContextImpl.bindService(ContextImpl.java:1407)
at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
at android.os.AsyncTask$2.call(AsyncTask.java:287)
at java.util.concurrent.FutureTask.run(FutureTask.java:234)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
at java.lang.Thread.run(Thread.java:856)
02-26 19:17:53.381: ERROR/StrictMode(856): null
android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40d11730 that was originally bound here
at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
at android.app.ContextImpl.bindService(ContextImpl.java:1418)
at android.app.ContextImpl.bindService(ContextImpl.java:1407)
at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
at com.android.emailcommon.service.AccountServiceProxy.getDeviceId(AccountServiceProxy.java:116)
at com.android.exchange.ExchangeService.getDeviceId(ExchangeService.java:1249)
at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856)
at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
at android.os.AsyncTask$2.call(AsyncTask.java:287)
at java.util.concurrent.FutureTask.run(FutureTask.java:234)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
at java.lang.Thread.run(Thread.java:856)
02-26 19:17:53.381: WARN/ActivityManager(324): Unbind failed: could not find connection for android.os.BinderProxy@415528b0
02-26 19:17:53.411: ERROR/ActivityThread(856): Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cdc7c0 that was originally bound here
android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cdc7c0 that was originally bound here
at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
at android.app.ContextImpl.bindService(ContextImpl.java:1418)
at android.app.ContextImpl.bindService(ContextImpl.java:1407)
at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
at android.os.AsyncTask$2.call(AsyncTask.java:287)
at java.util.concurrent.FutureTask.run(FutureTask.java:234)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
at java.lang.Thread.run(Thread.java:856)
02-26 19:17:53.491: DEBUG/dalvikvm(7047): Trying to load lib libjavacore.so 0x0
02-26 19:17:53.511: ERROR/StrictMode(856): null
android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cdc7c0 that was originally bound here
at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
at android.app.ContextImpl.bindService(ContextImpl.java:1418)
at android.app.ContextImpl.bindService(ContextImpl.java:1407)
at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549)
at android.os.AsyncTask$2.call(AsyncTask.java:287)
at java.util.concurrent.FutureTask.run(FutureTask.java:234)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
at java.lang.Thread.run(Thread.java:856)
02-26 19:17:53.531: WARN/ActivityManager(324): Unbind failed: could not find connection for android.os.BinderProxy@415a58e8
02-26 19:17:53.531: DEBUG/dalvikvm(7047): Added shared lib libjavacore.so 0x0
02-26 19:17:53.671: DEBUG/dalvikvm(7047): Trying to load lib libnativehelper.so 0x0
02-26 19:17:53.671: DEBUG/dalvikvm(7047): Added shared lib libnativehelper.so 0x0
02-26 19:17:53.771: DEBUG/dalvikvm(856): GC_CONCURRENT freed 464K, 19% free 2624K/3216K, paused 21ms+13ms, total 425ms
02-26 19:17:55.471: DEBUG/AndroidRuntime(7047): Calling main entry com.android.commands.am.Am
02-26 19:17:55.491: DEBUG/dalvikvm(7047): Note: class Landroid/app/ActivityManagerNative; has 157 unimplemented (abstract) methods
02-26 19:17:55.561: INFO/ActivityManager(324): START u0 {flg=0x10000000 cmp=com.example.Accomplist/.MyActivity} from pid 7047
02-26 19:17:55.621: WARN/WindowManager(324): Failure taking screenshot for (246x437) to layer 21030
02-26 19:17:55.711: DEBUG/AndroidRuntime(7047): Shutting down VM
02-26 19:17:55.751: DEBUG/dalvikvm(7060): Not late-enabling CheckJNI (already on)
02-26 19:17:55.751: DEBUG/dalvikvm(7047): GC_CONCURRENT freed 91K, 16% free 491K/584K, paused 2ms+2ms, total 43ms
02-26 19:17:55.776: DEBUG/jdwp(7047): Got wake-up signal, bailing out of select
02-26 19:17:55.776: DEBUG/dalvikvm(7047): Debugger has detached; object registry had 1 entries
02-26 19:17:55.832: INFO/ActivityManager(324): Start proc com.example.Accomplist for activity com.example.Accomplist/.MyActivity: pid=7060 uid=10048 gids={50048, 3003, 1028}
02-26 19:17:55.845: INFO/Choreographer(652): Skipped 49 frames!  The application may be doing too much work on its main thread.
02-26 19:17:56.642: ERROR/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
02-26 19:17:57.032: ERROR/Trace(7060): error opening trace file: No such file or directory (2)
02-26 19:17:59.312: ERROR/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
02-26 19:17:59.552: DEBUG/gralloc_goldfish(7060): Emulator without GPU emulation detected.
02-26 19:17:59.742: DEBUG/dalvikvm(528): GC_EXPLICIT freed 159K, 5% free 5791K/6072K, paused 25ms+35ms, total 331ms
02-26 19:17:59.891: INFO/ActivityManager(324): Displayed com.example.Accomplist/.MyActivity: +4s204ms (total +35s239ms)
02-26 19:18:00.292: INFO/Choreographer(1137): Skipped 116 frames!  The application may be doing too much work on its main thread.
02-26 19:18:01.021: INFO/Choreographer(652): Skipped 62 frames!  The application may be doing too much work on its main thread.
02-26 19:18:04.122: INFO/ActivityManager(324): START u0 {act=com.example.Accomplist.MAINSCREEN cmp=com.example.Accomplist/.MainScreen} from pid 7060
02-26 19:18:04.142: WARN/WindowManager(324): Failure taking screenshot for (246x437) to layer 21035
02-26 19:18:05.152: DEBUG/dalvikvm(7060): GC_FOR_ALLOC freed 69K, 7% free 2606K/2796K, paused 295ms, total 328ms
02-26 19:18:05.182: INFO/dalvikvm-heap(7060): Grow heap (frag case) to 3.267MB for 635812-byte allocation
02-26 19:18:05.432: DEBUG/dalvikvm(7060): GC_FOR_ALLOC freed 5K, 6% free 3222K/3420K, paused 249ms, total 249ms
02-26 19:18:05.822: DEBUG/dalvikvm(7060): GC_CONCURRENT freed <1K, 6% free 3234K/3420K, paused 15ms+74ms, total 382ms
02-26 19:18:06.292: ERROR/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
02-26 19:18:06.331: INFO/Choreographer(7060): Skipped 40 frames!  The application may be doing too much work on its main thread.
02-26 19:18:06.812: INFO/ActivityManager(324): Displayed com.example.Accomplist/.MainScreen: +2s647ms
02-26 19:18:09.561: DEBUG/AndroidRuntime(7060): Shutting down VM
02-26 19:18:09.571: WARN/dalvikvm(7060): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
02-26 19:18:09.661: ERROR/AndroidRuntime(7060): FATAL EXCEPTION: main
java.lang.NullPointerException
at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:394)
at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
at android.widget.AbsListView.obtainView(AbsListView.java:2143)
at android.widget.ListView.measureHeightOfChildren(ListView.java:1246)
at android.widget.ListView.onMeasure(ListView.java:1158)
at android.view.View.measure(View.java:15518)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1404)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:695)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
at android.view.View.measure(View.java:15518)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
at android.view.View.measure(View.java:15518)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:847)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:588)
at android.view.View.measure(View.java:15518)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4825)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:310)
at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2176)
at android.view.View.measure(View.java:15518)
at android.view.ViewRootImpl.performMeasure(ViewRootImpl.java:1874)
at android.view.ViewRootImpl.measureHierarchy(ViewRootImpl.java:1089)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1265)
at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
at android.view.Choreographer.doCallbacks(Choreographer.java:562)
at android.view.Choreographer.doFrame(Choreographer.java:532)
at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
at android.os.Handler.handleCallback(Handler.java:725)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:5041)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
at dalvik.system.NativeStart.main(Native Method)
02-26 19:18:09.771: WARN/ActivityManager(324): Force finishing activity com.example.Accomplist/.MainScreen
02-26 19:18:09.922: WARN/WindowManager(324): Failure taking screenshot for (246x437) to layer 21040
02-26 19:18:10.271: INFO/Choreographer(324): Skipped 45 frames!  The application may be doing too much work on its main thread.
02-26 19:18:10.281: ERROR/SurfaceFlinger(36): ro.sf.lcd_density must be defined as a build property
02-26 19:18:10.499: WARN/ActivityManager(324): Activity pause timeout for ActivityRecord{40da7188 u0 com.example.Accomplist/.MainScreen}
02-26 19:18:19.976: WARN/ActivityManager(324): Launch timeout has expired, giving up wake lock!
02-26 19:18:20.776: WARN/ActivityManager(324): Activity idle timeout for ActivityRecord{40d319a

0 u0 com.example.Accomplist/.MyActivity} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:26:00.400

您是`NullPointerException`例外，因为您当前没有在 Array 中添加 10 个项目，您仅在`eventArr`Array 中添加了一项，但 Array 大小为 10 。

如果 ArrayList 中的项目是动态大小，建议使用 ArrayList 而不是 Array。将您的代码更改为：

声明 ArrayList 代替 Array ：

```
ArrayList<String> eventArr=new ArrayList<String>(); 
```

并在 AsyncTask 的内部`onPostExecute`或`doInBackground`方法中将 json 项添加到 ArrayList，然后将 ArrayList 设置为 Adapter 的数据源：

```
 @Override
 protected void onPostExecute(String result) {

        eventString=result;

        eventArr.add(result);  //<< add item to ArrayList

        MainScreen.this.setListAdapter(new ArrayAdapter<String>(MainScreen.this,
                android.R.layout.simple_list_item_1,eventArr));

    } 
```

# macros - 需要从网站中提取数据...网络查询？宏？

> ID：15286429
> 
> 赞同：0
> 
> 时间：2013-03-08T03:56:22.260
> 
> 标签：macros, web-scraping, screen-scraping, imacros, excel-web-query

我有该国每个 DOT # (Dept. of Trans.) 的列表。我想找出这些公司中每一个的保险生效日期。如果你去[http://li-public.fmcsa.dot.gov](http://li-public.fmcsa.dot.gov) --> "continue" --> 然后从下拉列表中选择 "carrier search" 并点击 "go" 它会带你到一个搜索表单 (这是进入此屏幕的唯一方法）。

从那里，您可以输入一个 DOT # X（以 61222 为例），它会将您带到另一个屏幕。单击“以 HTML 格式查看报告”，然后在底部您会看到“有效/未决保险”。我想从该页面中提取“生效日期”并将其粘贴在我已经知道的 DOT # X 旁边的电子表格中。

在我列表中的数千个 DOT # 中，并非所有人都会在此网站上提交文件，如果这有所作为的话。

这可以通过宏或 Excel Web 查询来完成吗？我知道我可能听起来像个新手，但如果我能得到任何帮助，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:24:24.937

你能做到吗？坦率地说，即使您可以在电子表格进行处理时锁定电子表格。最后，您将如何处理中途的错误？

我不会在面向客户端的应用程序中这样做。这听起来更像是在服务器端应用程序中做的事情，它可以在更受控的环境中进行处理和收集信息。然后，您的 Excel 电子表格可以查询该应用程序并一举获取信息。错误处理要简单得多，而且您最终不会坐在那里盯着 Excel，为什么它可以通过数千个网站运行。它不是为了优雅地做到这一点而设计的。

你用什么写我描述的网络服务？好吧，这取决于您的喜好。我，我会用 Ruby on Rails 编写它，因为它可以轻松处理任务的抓取方面，也可以轻松报告数据。但它真的可以回归到你最喜欢编码的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T22:43:39.660

你绝对可以做到这一点；但是 Excel 并不是进行解析的最佳工具（尽管我已经做到了！人们说这是不可能的——它可以使用异步 Windows API 调用来完成；祝一切顺利......）

您要问的第一个问题是该站点是否是动态的。它是否即时产生结果？另一个问题是：它们的 URL 约定是否一致？（换句话说：您可以为结果添加书签并在不同的会话中返回它们，而无需做任何事情，只需登录该站点......）

如果站点是静态的或具有一致的 URL 查询机制（我们在 HTML 中说：Web 查询是“GET”而不是“POST”表单......），您可以使用面向解析器的良好语言，如 Python使用访问网页的库；谷歌中应该有很多例子。在您完成所有调试并且它可靠地工作之后（还测试它是否智能地报告您无法访问该站点的情况；为此暂时中断您的网络连接......），您可以从 Excel 宏外壳到Python 脚本。诀窍是 Excel 中的普通脱壳不会阻塞您的脱壳命令，而是异步运行。所以再次使用谷歌，你可以找到一个 Windows API 调用，你可以从 Excel 到 shell 同步到你的检索任务（如果你在它完成之前没有阻止它，

看到这个设计的重点了吗？模块化的。如果您的解析中存在错误，只需查看 CSV 就更容易确定。而且您正在利用专业化：您正在使用一种专为解析而设计的编程语言（Python，无论如何......）；VBA 并不是真正的解析语言。

如果不是静态网页，而是需要创建唯一条目的动态网页，该怎么办？然后，除了使用来自 Excel 宏的 bizarro Windows API 调用之外，您还可以使用 Greasemonkey 或 C# 制作动态解析脚本。Greasemonkey 是 Firefox 的一个插件，可让您使用 Javascript 编写网站交互脚本。这是相当直观的。如果您采用这种方法，您可以在 Firefox 浏览器中为您配置了预定义的 Greasemonkey 脚本的页面提供外壳。同样，Greasemonkey 可以生成数据的文本文件，并且以后可以很容易地对其进行调试。我听到的另一个选择是 C#；我从来没有尝试过，因为它是微软特有的，但我看到很多商店都是这样做的。还有一个Java解析包叫HTMLunit，但我在尝试在网页上模拟 Javascript 事件时发现它坏了。您可以查看的其他 HTML 解析器是 Jerry 和 Cobra；还有一种叫做 Selenium 的新产品。我发现 Greasemonkey 是最可靠的，因为它使用实际的浏览器进行操作；然而，除了 Selenium 之外，这些其他产品都会对浏览器进行虚拟复制，但不幸的是，它们经常无法做到这一点。有些人甚至不费心去复制可能在网页上的 Javascript（这通常是网站页面呈现方式的肉和土豆！）这些其他产品对浏览器进行虚拟复制，但遗憾的是经常无法做到这一点。有些人甚至不费心去复制可能在网页上的 Javascript（这通常是网站页面呈现方式的肉和土豆！）这些其他产品对浏览器进行虚拟复制，但遗憾的是经常无法做到这一点。有些人甚至不费心去复制可能在网页上的 Javascript（这通常是网站页面呈现方式的肉和土豆！）

玩得开心。这是游泳池的最深处，但它会让你忙碌并获得报酬。

# css - Switch between 3 or more css classes during a php foreach loop

> ID：15286431
> 
> 赞同：1
> 
> 时间：2013-03-08T03:56:28.890
> 
> 标签：css, foreach

We've been switching between an odd/even classes during a foreach loop like this:

```
<?php
  $count = 0;
  foreach ($pages as $page) { ?>

   <div class="row <php echo (++$count%2 ? "odd" : "even") ?>">
     ...page_list or product_list output
   </div>

<php } ?> 
```

But how would we switch between 3 or more css classes?

Any pointers in the right direction would be much appreciated.

Cheers

Ben

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:03:04.390

将它们放入一个数组并使用模运算符：

```
<?php
  $count = 0;
  $classes = array('one', 'two', 'three');

  for ($i = 0; $i < 10; $i++) {
    $count = ++$count % count($classes);
    $class = $classes[$count];
  ?>

   <div class="row <?php echo $class ?>">
     ...
   </div>

<?php } ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:00:36.497

如果要保留相同的结构，可以嵌套三元组。

```
echo (++$count%3==0 ? "3" : ($count%3==1 ? "3+1" : "3+2")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T04:02:28.583

如果数组键对是数字，您可以只使用带有 key => value 输出的 foreach 循环并使用[numbulus 运算符](https://secure.php.net/manual/en/language.operators.arithmetic.php)评估键。然后在[switch 语句](https://secure.php.net/manual/en/control-structures.switch.php)中使用结果。

如果数组键不是数字，您可以在 foreach 循环之前设置一个变量，并在每次迭代时递增它并检查它的值..

```
<?php
$pages = Array('page1', 'page2', 'page3');

foreach ($pages as $key => $page) :

  switch ( $key % 3 ) { (3 is the number of available cases)
    case 0:
      $class = 'class1';
      //…
      break;
    case 1:
       $class = 'class2 foo';
       //…
      break;
    case 2:
      $class = 'bar';
      //…
      break;
  endswitch;

  echo '<div class="' . $class . '">';
  //…
  echo '</div>';

endforeach;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T03:59:15.637

切换多个 css 的最佳方法是使用

[控制结构切换语句](http://php.net/manual/en/control-structures.switch.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-08T04:02:36.383

有`class1`,`class2`和`class3`

```
<?php
  $count = 0;
  foreach ($pages as $page) {
  $count = $count == 3 ? 0 : $count++;
?>
   <div class="row <?php echo "class".$count ?>">
     ...page_list or product_list output
   </div>
<?php } ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-08T04:04:07.803

可以使用 if else 语句并确保更改 mod 编号。

尝试这个：

```
 <div class="row 
    <php
        ++$count;
        if($count % 3 == 0)
        {
            echo "style2";
        }
        else if($count % 3 == 1)
        {
            echo "style2";
        }
        else
        {
            echo "style3";
        }
    ?>
    ">
    ...page_list or product_list output
    </div>

<php } ?> 
```

# asp.net-mvc - ASP.NET MVC，grid.GetHtml()前面的@；

> ID：15286440
> 
> 赞同：1
> 
> 时间：2013-03-08T03:57:16.250
> 
> 标签：asp.net-mvc

对于 ASP.NET、MVC 应用程序，当使用`grid`Razor 语法时，为什么我需要`@`在行前添加 rightbefore `grid.GetHtml();`？

例子 -

```
@{
  var grid = new WebGrid(Model);

  @grid.GetHtml();

 } 
```

周围不`grid.GetHtml();`应该`@{ }`就够了吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:04:42.953

使用@{}，您可以指定应该执行一些代码，例如声明变量“grid”。

现在对于第二行，没有@，您只剩下一个等于字符串的语句，甚至在语法上都不受支持。

在使用 @ 时，该行转换为：

```
Response.Write(grid.GetHtml()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:59:55.897

使用 @ 就像在页面上打印/写一些东西。

```
grid.GetHtml() 
```

将生成所需的字符串，但此函数不知道打印生成的 html。要做到这一点，你必须这样写

```
@grid.GetHtml() 
```

有些助手不需要在语句之前加上 @。

例如

```
Html.RenderPartial() 
```

因为 MVC 将生成的 html 写入响应流。因此，这里应该包含这个语句

> @{ }

在某些情况下阻止它返回 HTML，我们应该使用“@”为它调用 print

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:54:33.067

尽管 Razor 视图引擎完全支持您所做的事情，并且有时不能以不同的方式完成，但最好更具体一些：

```
@{
   var grid = new WebGrid(Model);   
}

@grid.GetHtml(); 
```

所以要清楚地将代码与输出分开。我认为更好的代码/视图可读性是有意义的。

# python - Python：Tkinter 和海龟

> ID：15286441
> 
> 赞同：8
> 
> 时间：2013-03-08T03:57:23.663
> 
> 标签：python, module, tkinter

初级程序员在这里。从如何像计算机科学家一样思考我得到以下代码：

```
#!/usr/bin/env python3

import turtle
wn = turtle.Screen()
alex = turtle.Screen()
alex.forward(150)
alex.left(90)
alex.forward(150) 
```

该程序似乎很简单，但我收到以下错误：

```
ImportError: No module named turtle 
```

经过一些互联网研究，我读到海龟模块可以在 tkinter 包中找到。所以因为我有两个不同的 python 安装，Python 2.7.3 和 Python 3.2.3

我在 Ubuntu 终端中运行了以下命令，希望能安装缺少的 python 模块：

```
sudo apt-get install python-tk
sudo apt-get install python3.2-tk 
```

它让我无处可去。那么如何为两个版本的 python 安装缺少的模块呢？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-09-02T12:20:29.027

在 ubuntu 16.04 上，

```
sudo apt-get install python3-tk 
```

解决了我的问题，如果这对你不起作用，请参阅这个问题 [Tkinter module not found on Ubuntu](https://stackoverflow.com/questions/6084416/tkinter-module-not-found-on-ubuntu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-15T06:03:39.617

在 Python 2 中设置 Tkinter 模块：

*   `sudo apt-get install python-tk`在终端中执行。
*   `import Tkinter`在您的程序中使用。

对于 Python 3：

*   `sudo apt-get install python3-tk`在终端中执行。
*   `import tkinter`在您的程序中使用。

尽管 Tkinter 通常与 Python 3 捆绑在一起，但如果未安装该模块，上述过程将有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T21:42:13.880

您是否尝试过 ldconfig 以确保操作系统“知道”这些库。当我试图用 PiFace 让 LED 闪烁时，似乎有帮助。无论如何，它不会伤害任何东西，而且非常快。所以值得一试恕我直言。我认为您需要成为 root（使用 sudo）才能做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:28:23.670

安装`python3-tk`应该可以解决您的问题。我在我的 ubuntu12.04 电脑上遇到了同样的问题，通过安装`python3-tk`. `tkinter`当您仅在 python3 上执行代码时，这将安装 python3 的模块`(#!/usr/bin/env python3)`。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-04-13T08:04:47.880

对于 Fedora 是 dnf install python3-tkinter.x86_64

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2015-07-31T13:19:50.500

用于`from turtle import Turtle`导入海龟模块，而不是`import turtle`.

# mongodb - MongoDB 插入错误

> ID：15286446
> 
> 赞同：1
> 
> 时间：2013-03-08T03:58:01.120
> 
> 标签：mongodb, haskell, insert

我收到一个看起来像基本插入的错误。相关代码是

```
newConn = runIOE $ connect $ host "127.0.0.1"
run pipe act = access pipe master "MyDB" act

newRecord :: Pipe -> Value -> Value -> IO (Either Failure Value)
newRecord pipe fname lname = run pipe $ insert "people" ["name" := fname, "lastName" := lname] 
```

当我跳进 GHCi 并跑步时

```
:set -XOverloadedStrings
pipe <- newConn
newRecord pipe "Inai" "mathi" 
```

我得到错误

```
<interactive>:95:16:
    No instance for (Data.String.IsString Database.MongoDB.Value)
      arising from the literal `"Inai"'
    Possible fix:
      add an instance declaration for
      (Data.String.IsString Database.MongoDB.Value)
    In the second argument of `newRecord', namely `"Inai"'
    In the expression: newRecord pipe "Inai" "mathi"
    In an equation for `it': it = newRecord pipe "Inai" "mathi" 
```

根据[this](https://github.com/TonyGen/mongoDB-haskell/blob/master/doc/tutorial.md)和[this](https://github.com/TonyGen/mongoDB-haskell/blob/master/doc/Example.hs)，除非我遗漏了什么，否则应该可以。

有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:42:36.073

仔细查看您提到的两个链接。Haskell MongoDB 绑定提供了两个看起来非常相似的运算符：

```
(:=) :: Label -> Value -> Field
(=:) :: Val v => Label -> v -> Field 
```

The second form is overloaded and more flexible to use. Anything that is in the `Val` class, and this includes `String`s, can be passed as the second argument. So you probably want to change the occurrences of `:=` in `newRecord` by `=:` (*and* adapt the type signature accordingly). Then your example will work.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:33:13.070

newRecord 期望`fname`并`lname`具有 type `Value`。您传入了两个重载`String`的 s，但 GHC 找不到 for 的实例`IsString`来`Value`将这些重载`String`的 s 转换为`Value`s。

我看到`Value`有一个构造函数`String :: Text -> Value`，看看它是否编译：

```
newRecord :: Pipe -> Text -> Text -> IO (Either Failure Value)
newRecord pipe fname lname = run pipe $ insert "people" ["name" := String fname, "lastName" := String lname] 
```

# c++ - std::initializer_list 返回值的生命周期

> ID：15286450
> 
> 赞同：33
> 
> 时间：2013-03-08T03:58:31.373
> 
> 标签：c++, c++11, initializer-list, lifetime, list-initialization

GCC 的实现`std::initializer_list`在返回完整表达式的末尾销毁从函数返回的数组。它是否正确？

该程序中的两个测试用例都显示了在值可以使用之前执行的析构函数：

```
#include <initializer_list>
#include <iostream>

struct noisydt {
    ~noisydt() { std::cout << "destroyed\n"; }
};

void receive( std::initializer_list< noisydt > il ) {
    std::cout << "received\n";
}

std::initializer_list< noisydt > send() {
    return { {}, {}, {} };
}

int main() {
    receive( send() );
    std::initializer_list< noisydt > && il = send();
    receive( il );
} 
```

我认为该程序应该可以工作。但是底层的标准语有点复杂。

return 语句初始化一个返回值对象，就像它被声明一样

```
std::initializer_list< noisydt > ret = { {},{},{} }; 
```

这从给定的一系列初始化程序初始化一个临时`initializer_list`及其底层数组存储，然后`initializer_list`从第一个初始化另一个。阵列的寿命是多少？“数组的生命周期与对象的生命周期相同`initializer_list`。” 但是其中有两个；哪一个是模棱两可的。8.5.4/6 中的示例，如果它像宣传的那样工作，应该解决数组具有复制到对象的生命周期的歧义。然后返回值的数组也应该存在于调用函数中，并且应该可以通过将其绑定到命名引用来保存它。

在[LWS](http://liveworkspace.org/code/2ZlWsj%240)上，GCC 在返回之前错误地杀死了数组，但它`initializer_list`根据示例保留了一个命名。Clang 也正确处理了示例，但列表中的对象*永远不会*被破坏；这会导致内存泄漏。ICC根本不支持`initializer_list`。

我的分析正确吗？

* * *

C++11 §6.6.3/2：

> *带有花括号初始化列表*的 return 语句通过指定初始化列表中的复制列表初始化 (8.5.4) 初始化要从函数返回的对象或引用。

8.5.4/1：

> …复制初始化上下文中*的列表初始化称为复制列表初始化*。

8.5/14：

> 以 ...形式发生的初始化`T x = a;`称为*复制初始化*。

回到 8.5.4/3：

> T 类型的对象或引用的列表初始化定义如下：……</p>
> 
> — 否则，如果 T 是 的特化`std::initializer_list<E>`，`initializer_list`则按如下所述构造对象，并用于根据从相同类型的类中初始化对象的规则（8.5）来初始化对象。

8.5.4/5：

> 类型的对象`std::initializer_list<E>`是从初始化列表构造的，就好像实现分配了一个*E类型的**N*个元素的数组，其中*N*是初始化列表中的元素数。该数组的每个元素都使用初始值设定项列表的相应元素进行复制初始化，并且构造对象以引用该数组。如果需要进行窄化转换来初始化任何元素，则程序格式错误。**`std::initializer_list<E>`**

 **8.5.4/6：

> 数组的生命周期与对象的生命周期相同`initializer_list`。*[例子：*
> 
> ```
> typedef std::complex<double> cmplx;
>  std::vector<cmplx> v1 = { 1, 2, 3 };
>  void f() {
>    std::vector<cmplx> v2{ 1, 2, 3 };
>    std::initializer_list<int> i3 = { 1, 2, 3 };
>  } 
> ```
> 
> 对于`v1`and `v2`，创建的`initializer_list`对象和数组`{ 1, 2, 3 }`具有完整的表达式生命周期。对于`i3`，initializer_list 对象和数组具有自动生命周期。*——结束示例]*

* * *

## 关于返回一个花括号初始化列表的一点说明

当您返回用大括号括起来的裸列表时，

> 带有花括号初始化列表的 return 语句通过指定初始化列表中的复制列表初始化 (8.5.4) 初始化要从函数返回的对象或引用。

这并不意味着返回到调用范围的对象是从某物复制而来的。例如，这是有效的：

```
struct nocopy {
    nocopy( int );
    nocopy( nocopy const & ) = delete;
    nocopy( nocopy && ) = delete;
};

nocopy f() {
    return { 3 };
} 
```

这不是：

```
nocopy f() {
    return nocopy{ 3 };
} 
```

Copy-list-initialization 仅表示使用等效的语法`nocopy X = { 3 }`来初始化表示返回值的对象。这不会调用副本，它恰好与 8.5.4/6 中延长数组生命周期的示例相同。

Clang 和 GCC 确实[同意](http://liveworkspace.org/code/ClVhK%241)这一点。

* * *

## 其他注意事项

对[N2640](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2640.pdf)的评论并没有提到这个角落案例。已经对这里组合的各个功能进行了广泛的讨论，但我没有看到任何关于它们的交互的信息。

实现这一点很麻烦，因为它归结为按值返回一个可选的可变长度数组。因为`std::initializer_list`它不拥有它的内容，所以该函数还必须返回其他拥有它的东西。当传递给函数时，这只是一个本地的、固定大小的数组。`std::initializer_list`但在另一个方向上，VLA 需要与' 的指针一起返回到堆栈中。然后需要告诉调用者是否处理序列（无论它们是否在堆栈上）。

这个问题很容易通过从 lambda 函数返回一个花括号初始化列表来偶然发现，作为一种“自然”的方式来返回一些临时对象而不关心它们是如何包含的。

```
auto && il = []() -> std::initializer_list< noisydt >
               { return { noisydt{}, noisydt{} }; }(); 
```

确实，这与我到达这里的方式相似。但是，省略 trailing-return-type 将是错误的，`->`因为 lambda 返回类型推导仅在返回表达式时发生，并且花括号初始化列表不是表达式。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-08T09:54:37.203

**`std::initializer_list`不是容器，不要用它来传递值并期望它们持续存在**

[DR 1290](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1290)更改了措辞，您还应该注意尚未准备好的[1565](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1565)和[1599 。](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1599)

> 然后返回值的数组也应该存在于调用函数中，并且应该可以通过将其绑定到命名引用来保存它。

不，这不符合。数组的生命周期不会随着`initializer_list`. 考虑：

```
struct A {
    const int& ref;
    A(const int& i = 0) : ref(i) { }
}; 
```

引用`i`绑定到临时的`int`，然后引用`ref`也绑定到它，但这并没有延长 的生命周期`i`，它仍然在构造函数的末尾超出范围，留下一个悬空引用。您不会通过绑定另一个对它的引用来延长底层临时的生命周期。

如果[1565](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1565)获得批准并且您制作副本而不是参考，您的代码*可能*会更安全，但该问题仍然存在，甚至没有提议的措辞，更不用说实施经验了。`il`

即使您的示例旨在工作，关于底层数组生命周期的措辞显然仍在改进，编译器需要一段时间才能实现最终确定的语义。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-07-14T00:18:33.907

您在 8.5.4/6 中提到的措辞是有缺陷的，并已由[DR1290](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1290) （在某种程度上）纠正。而不是说：

> 数组的生命周期与对象的生命周期相同`initializer_list`。

... 修订后的标准现在说：

> 该数组与任何其他临时对象（12.2 [class.temporary]）具有相同的生命周期，除了`initializer_list`从数组初始化对象扩展了数组的生命周期，就像将引用绑定到临时对象一样。

因此，临时数组生命周期的控制措辞是 12.2/5，它表示：

> 临时绑定到函数返回语句中的返回值的生命周期不会延长；临时在 return 语句中的完整表达式的末尾被销毁

因此，`noisydt`对象在函数返回之前被销毁。

`initializer_list`直到最近，Clang 还存在一个错误，导致它在某些情况下无法销毁对象的底层数组。我已经为 Clang 3.4 修复了这个问题；Clang 中继的测试用例的输出是：

```
destroyed
destroyed
destroyed
received
destroyed
destroyed
destroyed
received 
```

...这是正确的，根据 DR1290。**

# jsf - p:selectOneMenu 下拉菜单未附加到对话框内的组件

> ID：15286454
> 
> 赞同：5
> 
> 时间：2013-03-08T03:59:01.840
> 
> 标签：jsf, primefaces, selectonemenu

我在 ap:dialog 中有 ap:selectOneMenu。每当我滚动页面时，下拉菜单都会与 p:selectOneMenu 标签分离并根据鼠标滚动移动。有没有办法把它贴在标签上让它不动？

这是有相同问题的人发布的问题的屏幕截图[SelectOneMenu 面板使用鼠标滚轮滚动](http://forum.primefaces.org/viewtopic.php?f=3&t=14905)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-09T22:20:17.500

如果有人发现这个问题，我想在这里补充一下，这个问题可以在更新版本的 Primefaces（5.0+）中找到，您可以通过`appendTo="@this"`在`p:selectOneMenu`. 我刚刚找到它并在另一个最近的问题中解决了它。

**有关的：**

[SelectOneMenu 使用鼠标滚轮滚动](https://stackoverflow.com/a/26288576/4056222)

# android - Android 应用程序在尝试从互联网获取数据时停止

> ID：15286456
> 
> 赞同：0
> 
> 时间：2013-03-08T03:59:20.523
> 
> 标签：android, httpclient, http-get

我正在尝试使用 HttpGet 和 HttpClient 从 Internet 获取数据。但是，当我在模拟器中运行它时，它会立即关闭并说“不幸的是，AppName 已停止”。任何想法如何解决这个问题？

**编码：**

```
public class MainActivity extends Activity {

    final String httpPath = "http://www.google.com";    

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView txtContent = (TextView) findViewById(R.id.txtContent);

        TextView tvHttp = (TextView) findViewById(R.id.tvHttp);

        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(httpPath);
        try {

            HttpEntity httpEntity = httpclient.execute(httpget).getEntity();

           if (httpEntity != null){
            InputStream inputStream = httpEntity.getContent();
            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(inputStream));
            StringBuilder stringBuilder = new StringBuilder();

            String line = null;

            while ((line = bufferedReader.readLine()) != null) {
                stringBuilder.append(line + "\n");
            }

            inputStream.close();

            tvHttp.setText(stringBuilder.toString());
           }

        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Toast.makeText(MainActivity.this, e.toString(), Toast.LENGTH_LONG).show();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Toast.makeText(MainActivity.this, e.toString(), Toast.LENGTH_LONG).show();
      }
AssetManager assetManager = getAssets();

// To load text file
InputStream input;
try {
    input = assetManager.open("dummytext.txt");

     int size = input.available();
     byte[] buffer = new byte[size];
     input.read(buffer);
     input.close();

     // byte buffer into a string
     String text = new String(buffer);

     txtContent.setText(text);
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();}

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

**日志猫：**

```
03-08 03:31:17.762: D/AndroidRuntime(892): Shutting down VM
03-08 03:31:17.762: W/dalvikvm(892): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
03-08 03:31:17.952: E/AndroidRuntime(892): FATAL EXCEPTION: main
03-08 03:31:17.952: E/AndroidRuntime(892): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.appname/com.example.appname.MainActivity}: android.os.NetworkOnMainThreadException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:01:12.513

`android.os.NetworkOnMainThreadException`

这意味着您正在`Main UI`线程上进行与网络相关的调用。

您必须将所有与**Http**相关的调用`onCreate()`移至[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:14:30.217

[Here](http://www.vogella.com/articles/AndroidPerformance/article.html) is the great example by vogela to understand how to use AsynckTask in android.

You can go threw it and put your network relatd call in doBackground of that task.

Hope you got the point.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:13:17.057

```
 class DownloadTask extends AsyncTask<Void,Void,Void>
{
  protected void onPreExecute() 
  {
  super.onPreExecute();  
    //show progress dialog()
  }

 @Override
 protected Void doInBackground(Void... params) {
   //get data form internet here
   // put all downloading related code in a method getDownload()
   // call  getDownload() here
 return null;
 }

 @Override
  protected void onPostExecute(Void result) {
  super.onPostExecute(result);
   //dismiss dialog update ui here
   // uodate ur ui with the downloaded data here
   }
 } 
```

将上述内容用于 AsyncTask

作为替代方案，您可以查看 githup 中的这个开源项目，该项目使用 robospice 进行长时间运行的操作。[https://github.com/octo-online/robospice](https://github.com/octo-online/robospice)。

# matlab - 自动最大化图形

> ID：15286458
> 
> 赞同：37
> 
> 时间：2013-03-08T03:59:25.857
> 
> 标签：matlab, export, matlab-figure, maximize-window

我正在 MATLAB 中创建一些图形并自动将它们保存到文件中。根据定义，图像很小的问题。手动解决我的问题的一个好方法是创建一个图像（图），将其最大化，然后保存到一个文件中。

我错过了自动最大化图形的这一步。

有什么建议么？到目前为止，我只发现了这个：

[http://answers.yahoo.com/question/index?qid=20071127135551AAR5JYh](http://answers.yahoo.com/question/index?qid=20071127135551AAR5JYh)

[http://www.mathworks.com/matlabcentral/newsreader/view_thread/238699](http://www.mathworks.com/matlabcentral/newsreader/view_thread/238699)

但没有人能解决我的问题。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-08T05:12:40.857

这对我有用：

```
figure('units','normalized','outerposition',[0 0 1 1]) 
```

或当前数字：

```
set(gcf,'units','normalized','outerposition',[0 0 1 1]) 
```

* * *

我还在使用 java 的 FileExchange 上使用了[MAXIMIZE](http://www.mathworks.com/matlabcentral/fileexchange/25471-maximize)函数。这是真正的最大化。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-01-24T22:28:24.793

对于实际的最大化（就像在 OS X 和 Windows 的 UI 中单击最大化按钮一样）您可以尝试以下调用隐藏的 Java 句柄

```
figure;
pause(0.00001);
frame_h = get(handle(gcf),'JavaFrame');
set(frame_h,'Maximized',1); 
```

这`pause(n)`是必不可少的，因为上述内容超出了 Matlab 的范围，并且位于单独的 Java 线程上。设置`n`为任何值并检查结果。计算机在执行时越快，`n`可以越小。

完整的“文档”可以在[这里找到](http://undocumentedmatlab.com/blog/minimize-maximize-figure-window/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-07-25T14:19:04.427

[从 R2018a 开始](https://www.mathworks.com/help/matlab/release-notes.html?rntext=maximize&startrelease=R2018a&endrelease=R2018a&groupby=release&sortby=descending&searchHighlight=maximize)，对象`figure`也`uifigure`包含一个名为`WindowState`. 默认情况下设置为`'normal'`，但将其设置为可`'maximized'`提供所需的结果。

综上所述：

```
hFig.WindowState = 'maximized'; % Requires R2018a 
```

此外，正如[Unknown123](https://stackoverflow.com/users/6458107)的评论中提到的：

1.  可以使用以下方法使图形默认最大化：

    ```
    set(groot, 'defaultFigureWindowState', 'maximized'); 
    ```

2.  使用以下方法可以最大化所有打开的图形：

    ```
    set(get(groot, 'Children'), 'WindowState', 'maximized'); 
    ```

3.  [可以在此文档页面](https://www.mathworks.com/help/matlab/ref/matlab.ui.figure-properties.html#d117e396846)中找到有关控制图形外观的更多信息`'WindowState'`以及其他属性。

最后，为了解决您最初的问题 - 如果您想将图形的内容导出到图像而不必担心结果太小 - 我强烈推荐该[`export_fig`](https://github.com/altmany/export_fig/)实用程序。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-07-07T23:19:48.537

为了最大化这个数字，你可以模仿你实际使用的键序列：

1.  `ALT`- （如此[处](https://support.microsoft.com/en-us/kb/126449)`SPACE`所示）访问窗口菜单；进而
2.  `X`最大化（这在您的系统中可能会有所不同）。

要以编程方式发送密钥，您可以使用类似于[此答案](https://stackoverflow.com/questions/27933270/programmatically-press-an-enter-key-after-starting-exe-file-in-matlab/27933690#27933690)的基于 Java 的过程，如下所示：

```
h = figure;                                          %// create figure and get handle
plot(1:10);                                          %// do stuff with your figure
figure(h)                                            %// make it the current figure
robot = java.awt.Robot; 
robot.keyPress(java.awt.event.KeyEvent.VK_ALT);      %// send ALT
robot.keyPress(java.awt.event.KeyEvent.VK_SPACE);    %// send SPACE
robot.keyRelease(java.awt.event.KeyEvent.VK_SPACE);  %// release SPACE
robot.keyRelease(java.awt.event.KeyEvent.VK_ALT);    %// release ALT
robot.keyPress(java.awt.event.KeyEvent.VK_X);        %// send X
robot.keyRelease(java.awt.event.KeyEvent.VK_X);      %// release X 
```

瞧！窗口最大化！

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-06-08T08:49:37.027

[**正如上面一位作者提出的**](https://stackoverflow.com/a/21343652/2605073)，如果你想模拟点击“最大化”窗口按钮，可以使用下面的代码。与提到的答案不同的是，使用“drawnow”而不是“pause”似乎更正确。

```
figure;
% do your job here
drawnow;
set(get(handle(gcf),'JavaFrame'),'Maximized',1); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-03-11T09:51:22.297

恕我直言，最大化图形窗口并不是将图形保存为更高分辨率图像的最佳方法。

有用于[打印和保存](https://mathworks.com/help/matlab/ref/matlab.ui.figure-properties.html#d119e289123)的图形属性。使用这些属性，您可以以所需的任何分辨率保存文件。要保存文件，您必须使用[打印功能](http://mathworks.com/help/matlab/ref/print.html)，因为您可以设置一个`dpi`值。所以，首先设置下图属性：

```
set(FigureHandle, ...
    'PaperPositionMode', 'manual', ...
    'PaperUnits', 'inches', ...
    'PaperPosition', [0 0 Width Height]) 
```

然后将文件（例如）保存为 100dpi ( `'-r100'`)的 png

```
print(FigureHandle, Filename, '-dpng', '-r100'); 
```

获取带有`2048x1536px`set`Width = 2048/100`和 Height的文件`1536/100`，`/100`因为您使用 100dpi 保存。如果您更改 dpi 值，您还必须将除数更改为相同的值。

如您所见，文件交换或基于 java 的过程不需要任何额外的功能。此外，您可以选择任何所需的分辨率。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-12-24T09:25:00.037

你可以试试这个：

```
screen_size = get(0, 'ScreenSize');
f1 = figure(1);
set(f1, 'Position', [0 0 screen_size(3) screen_size(4) ] ); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-31T12:04:16.627

```
%% maximizeFigure
%
% Maximizes the current figure or creates a new figure. maximizeFigure() simply maximizes the 
% current or a specific figure
% |h = maximizeFigure();| can be directly used instead of |h = figure();|
%
% *Examples*
%
% * |maximizeFigure(); % maximizes the current figure or creates a new figure|
% * |maximizeFigure('all'); % maximizes all opened figures|
% * |maximizeFigure(hf); % maximizes the figure with the handle hf|
% * |maximizeFigure('new', 'Name', 'My newly created figure', 'Color', [.3 .3 .3]);|
% * |hf = maximizeFigure(...); % returns the (i.e. new) figure handle as an output|
%
% *Acknowledgements*
% 
% * Big thanks goes out to Yair Altman from http://www.undocumentedmatlab.com/
%
% *See Also*
% 
% * |figure()|
% * |gcf()|
%
% *Authors*
%
% * Daniel Kellner, medPhoton GmbH, Salzburg, Austria, 2015-2017
%%

function varargout = maximizeFigure(varargin)

warning('off', 'MATLAB:HandleGraphics:ObsoletedProperty:JavaFrame')

% Check input variables
if isempty(varargin)
    hf = gcf; % use current figure
elseif strcmp(varargin{1}, 'new')
    hf = figure(varargin{2:end});
elseif strcmp(varargin{1}, 'all')
    hf = findobj('Type', 'figure');
elseif ~isa(varargin{1}, 'char') && ishandle(varargin{1}) &&...
        strcmp(get(varargin{1}, 'Type'), 'figure')
    hf = varargin{1};
else
    error('maximizeFigure:InvalidHandle', 'Failed to find a valid figure handle!')
end

for cHandle = 1:length(hf)   
    % Skip invalid handles and plotbrowser handles
    if ~ishandle(cHandle) || strcmp(get(hf, 'WindowStyle'), 'docked') 
        continue
    end

    % Carry the current resize property and set (temporarily) to 'on'
    oldResizeStatus = get(hf(cHandle), 'Resize');
    set(hf(cHandle), 'Resize', 'on');

    % Usage of the undocumented 'JavaFrame' property as described at:
    % http://undocumentedmatlab.com/blog/minimize-maximize-figure-window/
    jFrame = get(handle(hf(cHandle)), 'JavaFrame');

    % Due to an Event Dispatch thread, the pause is neccessary as described at:
    % http://undocumentedmatlab.com/blog/matlab-and-the-event-dispatch-thread-edt/
    pause(0.05) 

    % Don't maximize if the window is docked (e.g. for plottools)
    if strcmp(get(cHandle, 'WindowStyle'), 'docked')
        continue
    end

    % Don't maximize if the figure is already maximized
    if jFrame.isMaximized
        continue
    end

    % Unfortunately, if it is invisible, it can't be maximized with the java framework, because a
    % null pointer exception is raised (java.lang.NullPointerException). Instead, we maximize it the
    % straight way so that we do not end up in small sized plot exports.
    if strcmp(get(hf, 'Visible'), 'off')
        set(hf, 'Units', 'normalized', 'OuterPosition', [0 0 1 1])
        continue
    end

    jFrame.setMaximized(true);

    % If 'Resize' will be reactivated, MATLAB moves the figure slightly over the screen borders. 
    if strcmp(oldResizeStatus, 'off')
        pause(0.05)
        set(hf, 'Resize', oldResizeStatus)
    end
end

if nargout
    varargout{1} = hf;
end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-14T11:17:31.880

这是最短的形式

```
figure('Position',get(0,'ScreenSize')) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-24T14:41:27.523

我建议`set`更改图形的命令`MenuBar`和`Toolbar`属性。该`set`命令更加通用，因为它适用于较旧和较新版本的 Matlab。

```
fig = figure(1);
set(fig, 'MenuBar', 'none');
set(fig, 'ToolBar', 'none'); 
```

现在您可以`set`再次使用来使您的图形全屏显示。

```
set(fig, 'Position', get(0,'Screensize')); 
```

请注意，如果先使图形全屏，然后删除菜单栏和工具栏，图形将不会全屏，因此请确保以正确的顺序运行它们。

# joomla2.5 - joomla 2.5 保存自定义可选值

> ID：15286459
> 
> 赞同：1
> 
> 时间：2013-03-08T03:59:27.820
> 
> 标签：joomla2.5

我为表单发布创建了简单的 mod。每次提交表格时需要给出唯一的顺序序号。

我来自 WordPress，我将使用“设置 API”。但是在 Joomla 中，我不知道如何存储我的价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T08:39:46.900

最简单的方法可能是使用模块参数。

首先，需要在模块的 .xml 文件中定义一个计数器参数。在“extension”标签的末尾插入以下代码以创建一个新参数来保存计数器。

```
<config>
    <fields name="params">
        <fieldset name="basic">
                <field name="serial" type="text" default="0" label="Form Serial #" description="Serial # of current form." filter="integer"/>
        </fieldset>
    </fields>
</config> 
```

这会将“serial”参数添加到模块定义中。可以通过 Joomla 扩展管理器为每个模块类型的实例手动设置此参数的值。

以下是一种通过代码读取、递增和更新串行参数的技术（来自“mod_yourmodulename.php”）。

```
$serial = $params->get('serial',0); // get current serial
$new_serial = $serial + 1;          // Increment serial counter

$params->set('serial', $new_serial);    // Update the module object parameter value
$p = json_encode($params->toArray());   // Encode params to write into database

$updt = new stdClass;       // Object to hold update fields
$updt->id = $module->id;    // Index field
$updt->params = $p;         // new parameters

$db=JFactory::getDbo();     // Get the database object
$diditwork = $db->updateObject('#__modules', $updt, 'id', false);   // Write the updated parameters to the modules table. 
```

那应该这样做。

# firebreath - Firefox 无法识别 firebreath JSAPI

> ID：15286464
> 
> 赞同：5
> 
> 时间：2013-03-08T04:00:51.133
> 
> 标签：firebreath

首先介绍一下我在使用 Firebreath 所做的事情的背景。

1.  我正在使用 firebreath 在浏览器中开发渲染查看器插​​件。
2.  我在插件中定义了两种 MIME 类型，一种用于主查看器，另一种用于 2D 平面视图。
3.  在每个页面中，只允许一个主查看器，但可以有多个 2D 平面视图。它们都共享在主查看器中打开的同一个模型文档。
4.  因此，在实例化 2D 平面视图之后，我需要将文档对象（一个 firebreath JSAPI）传递给 2D 平面视图。

然后，假设主查看器和平面视图都被加载，命名为“mainviewer”和“planview”，我会将文档附加到平面查看器，如下所示，

```
planview.attach(mainviewer.doc); 
(the signature is "bool attach(const FB::JSObjectPtr& myDoc)" and 
The mainviewer.doc is just a firebreath JSAPI) 
```

ISSUE是在firefox中，通过调用无法将传递的JSObject识别为JSAPI

```
FB::JSAPIPtr jsAPI = myDoc->getJSAPI(); // THIS WILL RETURN **NULL**.
m_main_doc = FB::ptr_cast<LcFbViewerDocumentAPI>(jsAPI); // Cast to my document API. 
```

仅当主机浏览器为 firefox，IE/Chrome 运行良好时才会出现此问题。

那么，在使用 firefox 时，传递过来的 JSAPI 发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T05:53:34.767

事实证明，大多数浏览器（包括 FireFox）在将 NPObjects 传递给另一个函数调用之前都会对其进行包装。因此，您无法访问最初传递给浏览器的底层 C++ 类。因为 FireBreath 无法获取真正的 NPJavascriptObject（FireBreath 用来包装 JSAPI 对象以提供给浏览器的 NPObject），它也无法获取原始 JSAPI 对象。

考虑为 JSAPI 对象的每个实例创建一个静态 ID。然后，您可以将 instance_id 公开为 JSAPI 属性，然后创建一个全局 std::map ，您可以使用它来存储地图以获取您的对象。

```
// in the class def
static int counter;
int instance_id;

// In the .cpp file
int MyPluginAPI::counter(0);

std::map<int, FB::JSAPIWeakPtr> apiMap;
FB::JSAPIPtr getJSAPIObjectById(int id) {
    std::map<int, FB::JSAPIWeakPtr> fnd = apiMap.find(id);
    if (fnd != apiMap.end()) {
        return fnd.second->lock(); // it's a weak pointer, lock to get the shared_ptr
    } else {
        return FB::JSAPIPtr(); // Alternately throw an exception
    }
}

MyPluginAPI::MyPluginAPI() {
    instance_id = counter++;
    // Note that you can't get at the shared_ptr in the constructor,
    // so you'll have to call an init function after creating the JSAPI object

    registerProperty("instance_id",
                 make_property(this,
                    &FBTestPluginAPI::get_instId));
}

int MyPluginAPI::get_instId() { return instance_id; }

void MyPluginAPI::init() {
    apiMap[instance_id] = shared_from_this();
} 
```

如果您从不浏览地图并清除过期的弱ptr，这当然最终会泄漏少量内存，但它应该可以满足您的需求。当你得到一个应该是 JSAPIPtr 对象的对象时，你可以期望它是一个 JSObjectPtr。

```
void doSomethingWithAnAPI(const FB::JSObjectPtr& obj) {
    if (obj) {
        int id = obj->GetProperty("instance_id");
        FB::JSAPIPtr ptr = getJSAPIObjectById(id);
        if (ptr) {
            // Hurray! We have the object
        }
    }
} 
```

我没有测试上面的代码，但它应该非常接近。

# php - php脚本从sql表中检索枚举值

> ID：15286470
> 
> 赞同：1
> 
> 时间：2013-03-08T04:01:09.543
> 
> 标签：php, sql, performance

我在 stackexchange 上发布了以下内容以进行代码审查。但我刚刚意识到我要问的问题对于 SO 来说可能是一个合法的问题。如果您不这么认为，请告诉我。

我有一个包含多个字段的 sql 表，其中 4 个是枚举。我编写了一个脚本，运行该表并检索枚举并将它们放入二维数组中。

不幸的是，这个脚本非常慢，我无法修复它。

```
<?php

require_once('mySQL_Connect.php');

$con = ConnectToDataBase();
if ($con == false)
{
    //data returned will be null
    exit;
}

$db = 'courses_db';
$table = 'courses';

$fields = array(
'training_field',
'speciality_field',
'type',
'language');

$enums = array();

foreach ($fields as $colomn) {
$sq1 = "SELECT 
            column_type 
        FROM 
            information_schema.columns 
        WHERE 
            table_schema = '$db' 
        AND 
            table_name = '$table'
        AND 
            column_name = '$colomn'";
$query =  mysqli_query($con,$sq1);

$stack = array();   
$i = 0;
$stack[$i]=$colomn;
if ($fetch = mysqli_fetch_assoc($query) )
{
    $enum = $fetch['column_type'];
    $off = strpos($enum,"(");
    $enum = substr($enum, $off+1, strlen($enum)-$off-2);
    $values = explode(",",$enum);

    // For each value in the array, remove the leading and trailing
    // single quotes, convert two single quotes to one. Put the result
    // back in the array in the same form as CodeCharge needs.

    for( $n = 0; $n < Count($values); $n++) {
    $val = substr( $values[$n], 1,strlen($values[$n])-2);
    $val = str_replace("''","'",$val);
    $stack[$i+1]=$val;
    $i++;
    }
}
    // return the values array to the caller
    //echo json_encode( $stack);
    array_push($enums,$stack);
    reset($stack);
}
echo json_encode($enums);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T22:16:24.483

我终于找到了一个解决方案，就在这里（希望这对某人有用）：

```
function get_enum_values($connection, $table, $field )
{

    $query = " SHOW COLUMNS FROM `$table` LIKE '$field' ";
    $result = mysqli_query($connection, $query );
    $row = mysqli_fetch_array($result , MYSQL_NUM );
    #extract the values
    #the values are enclosed in single quotes
    #and separated by commas
    $regex = "/'(.*?)'/";
    preg_match_all( $regex , $row[1], $enum_array );
    $enum_fields = $enum_array[1];

    return( $enum_fields );
} 
```

所以基本上不需要通过information_schema！

归功于此博客：

[http://akinas.com/pages/en/blog/mysql_enum/](http://akinas.com/pages/en/blog/mysql_enum/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T03:00:14.870

正如原始问题中提到的 CodeCharge 一样，CCS 在线帮助中有一个示例，位于[Utilize MySQL Enum Field Type](http://docs.codecharge.com/studio50/html/ProgrammingTechniques/HowTo/WorkingWithDatabases/UtilizeMySQLEnum.html?toc)下。示例代码与上面类似，但也有多种语言版本。

# size - Jpeg太小：如何增加图像的大小

> ID：15286471
> 
> 赞同：0
> 
> 时间：2013-03-08T04:01:09.660
> 
> 标签：size, jpeg, compression

[由于 Luis von Ahn 的研究小组在http://www.cs.cmu.edu/~biglou/resources/](http://www.cs.cmu.edu/~biglou/resources/)，我已经熟悉了“小型 ESP 游戏数据集”项目的图像。

数据库很棒。但是，图像的大小（在 Jpeg 中）非常小。是否有任何自动方法可以增加这些图像的大小而不会失去太多的分辨率？可以是C++、Java、PHP、matlab...

顺便说一句，我意识到在[http://profile.ak.fbcdn.net/hprofile-ak-prn1/161897_1294​​53496320_4485548_q.jpg等网站上的 Facebook 身份证照片也会发生同样的情况](http://profile.ak.fbcdn.net/hprofile-ak-prn1/161897_129453496320_4485548_q.jpg)

我知道在 C++、PHP、Java 中到处都有工具......即使在 HTML 中我也可以很容易地做到这一点，但总的来说我失去了很多质量。我可以通过使用 Windows 的图像编辑器简单地尝试增加这些图像的大小来解决这个问题。

在这两种情况下，游戏或 Facebook 中使用的真实图像要大得多，但不是保存在互联网或这个游戏数据库中的那些……特别是在游戏数据集的图像的情况下，因为它是使它们可用的作者，它必须有办法做到这一点！我失去了什么吗？人们如何处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:23:24.553

不，您不能将光栅图像重新调整为更大的尺寸而不损失质量。不可能。

现在，有很多方法可以相当顺利地重新调整大小。双三次插值很常见。

要实际进行大小调整，请考虑使用 ImageMagick 或 GD，这两者都可以在包括 PHP 在内的各种库中使用。 [http://www.php.net/manual/en/function.imagecopyresampled.php](http://www.php.net/manual/en/function.imagecopyresampled.php)

# android - 有没有办法使用 SDK 在和 android 应用程序中播放 .MOV 文件？

> ID：15286473
> 
> 赞同：2
> 
> 时间：2013-03-08T04:01:23.217
> 
> 标签：android, quicktime

我想在 android 应用程序中播放通过 iPhone 应用程序上传到服务器的 .mov 文件（QuickTime 电影文件）。Android 视频播放器似乎不支持 .mov。

所以我想知道我们是否可以转换它并只使用android sdk而不使用看起来相当复杂的android-ndk在android上播放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T05:09:43.230

检查[支持的媒体格式](http://developer.android.com/guide/appendix/media-formats.html)。

Android 不支持 MOV。因此，也许您需要先将格式转换为 mp4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T04:01:48.500

当上传从 iOS SDK 挑选的内容视频时，我们可以使用 AVFoundation 框架将其转码为 MPEG4 并发送到服务器，在我的情况下，我已经这样做了。如果它需要与 iOS 和 Android 兼容，这将有助于从 Android 设备播放视频，反之亦然。

# ios - iOS NavigationController 隐藏导航栏

> ID：15286475
> 
> 赞同：1
> 
> 时间：2013-03-08T04:01:41.750
> 
> 标签：ios, uinavigationcontroller, uinavigationbar

ViewController A 推送到 ViewController B。

和 ViewController A ：

```
self.navigationController.navigationBarHidden = YES; 
```

但我不想隐藏 ViewController B 中的导航栏，

在 ViewController B 中：

```
self.navigationController.navigationBarHidden = NO; 
```

但这不起作用，我怎样才能在 B 中显示导航栏？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:14:12.653

//ViewControllerB.m

```
 -(void)viewWillAppear:(BOOL)animated{
        [self.navigationController setNavigationBarHidden:NO];
    } 
```

//ViewControllerA.m

```
 -(void)viewWillAppear:(BOOL)animated{
        [self.navigationController setNavigationBarHidden:YES];
    } 
```

Remember Editor->Embed IN -> NavigationController for RootViewController in StoryBoard or init NavigationController in AppDelegate if use XIB

# jsp - 在jsp中获取java脚本值

> ID：15286476
> 
> 赞同：0
> 
> 时间：2013-03-08T04:01:46.707
> 
> 标签：jsp

嗨，我创建了以下 jsp。

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JSP Page</title>
    <script type="text/javascript">

    function show(x,y)
    {
        document.getElementById(x).style.display='block';
        document.getElementById(y).style.display='none';
    }
function hide(x)
    {
        document.getElementById(x).style.display='none';
        document.getElementById(y).style.display='block';
    }

function myKeyPress(e,x,y){
    var keynum;
    if(window.event){ // IE
        keynum = e.keyCode;
    }else
    if(e.which){ // Netscape/Firefox/Opera
        keynum = e.which;
    }
    //alert(String.fromCharCode(keynum));
    //alert(keynum);
    if (keynum == 13) {
        //document.getElementById("yourForm").submit();
        var m=document.getElementById(x).value;
        alert(m);
        hide(x,y);
        //document.form1.action="abc.jsp?val="+x;
        //document.form1.submit();
    }
}
    </script>

</head>
<body>
    <form name="form1" method="post" action="abc.jsp">
      <table width="722">
        <tr>
          <td width="431" height="190">
          <table width="439" >
            <tr>
              <td width="129">PARTS Updated</td>
              <td width="108"><p>
                <select name="PARTS_Updated" id="PARTS_Updated" >
                  <option value=""></option>
                  <option value="N/A">N/A</option>
                </select>
              </p></td>
              <td width="186"><label for="PARTS_Updated"></label></td>
            </tr>
            <tr>
              <td>TSI OK&#13;</td>
              <td><p>
                      <input type="radio" name="radio" id="TSI_N/A" value="TSI_N/A" onClick="hide('TSI_Query_Box')">
                N/A
              </p>
              <p>
<input type="radio" name="radio" id="TSI_Query" value="TSI_Query" onClick="show('TSI_Query_Box','SI_Query_Box')">              TSI Query</p></td>
              <td><label for="TSI_Query_Box"></label>
                  <textarea name="TSI_Query_Box" id="TSI_Query_Box" cols="15" rows="5" style="display:none"  onkeypress="return myKeyPress(event,'TSI_Query_Box','SI_Query_Box')"></textarea></td>

            </tr>
            <tr>
              <td height="65">Special Ins OK&#13;</td>
              <td><p>
                <input type="radio" name="radio" id="SI_N/A" value="TSI_OK" onClick="hide('SI_Query_Box')">
                N/A
              </p>
                <p>
<input type="radio" name="radio" id="SI_Query" value="SI_Query" onClick="show('SI_Query_Box','TSI_Query_Box')"> SI Query</p></td>
              <td><label for="SI_Query_Box"></label>
                  <textarea name="SI_Query_Box" id="SI_Query_Box" cols="15" rows="5" style="display:none" onkeypress="return myKeyPress(event,'SI_Query_Box','TSI_Query_Box')""></textarea></td>
            </tr>
          </table></td>
          <td width="279">
              <table width="279" align="center">
            <tr>
              <td width="87"><p>Shipment ID&#13;</p></td>
              <td width="97"><label for="Ship_ID" id="Ship_IDl"></label>
              <input type="text" name="Ship_ID" id="Ship_ID"></td>
            </tr>
          </table></td>
        </tr>
      </table>
      <p>&nbsp;</p>
      <table width="721" border="1">
        <tr>
          <td width="374" align="center">
              <input type="submit" name="Send for CT Review (SCTR)" id="Send for CT Review (SCTR)" value="Send for CT Review (SCTR)"></td>
          <td width="331" align="center">
              <input type="submit" name="CT Review Complete (CTRC" id="CT Review Complete (CTRC)" value="CT Review Complete (CTRC)"></td>
        </tr>
        <tr>
          <td align="center">
              <input type="submit" name="Cleanup Queries" id="Cleanup Queries" value="Cleanup Queries"></td>
          <td align="center">
              <input type="submit" name="Cleanup  Complete" id="Cleanup  Complete" value="Cleanup  Complete"></td>
        </tr>
        <tr>
          <td colspan="2" align="center"><input type="submit" name="Go_To_Main_Page" id="Go_To_Main_Page" value="Go To Main Page"></td>
        </tr>
      </table>
      <p>&nbsp;</p>
    </form>
    <h1>&nbsp;</h1>
</body>
</html> 
```

和第二个jsp如下

```
 <%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <input type="text" value="<%request.getParameter("TSI_Query_Box");%>">
        <input type="text" value="<%request.getParameter("SI_Query_Box");%>">
    </body>
</html> 
```

在这里，我想知道如何将 textarea 值检索到第二个 jsp 中。我听说我可以使用隐藏值，但不知道如何使用它们。实际上，我希望将这些数据提交到我的数据库中。请让我知道我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:09:59.143

首先你的函数`hide(x)`必须有两个参数：

```
function hide(x,y)
{
    document.getElementById(x).style.display='none';
    document.getElementById(y).style.display='block';
} 
```

当你在 JSP 中赋值时，你必须使用`<%= %>`而不是`<% %>`

所以您必须将您的 HTML 更改为：

```
<input type="text" value="<%=request.getParameter("TSI_Query_Box")%>"> 
```

并看看答案，[如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/a/3180202/1551233)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:06:01.543

最初的改变

```
<input type="text" value="<%request.getParameter("TSI_Query_Box");%>"> 
```

到

```
<input type="text" value="<%= request.getParameter("TSI_Query_Box"); %>"> 
```

# jquery - jQuery 选择器和获取上面元素的 id

> ID：15286477
> 
> 赞同：1
> 
> 时间：2013-03-08T04:01:52.110
> 
> 标签：jquery, html, parameters, click, selector

我有一个嵌套的 div 结构如下：

```
<div id="outer">
  <h3 id="groupa">group a</h3>
  <div id="inner1">
  <div id="inner2">
  <h3 id="groupb">group b</h3>
  <div id="inner3">
  <div id="inner4">
</div> 
```

当用户点击任何内部 div（内部？）时，点击处理程序应该传递组的 id（它上面最近的 h3），以及内部 div 本身的 id。因此，例如，单击最后一个内部 div 将调用带有参数“groupb”和“inner4”的函数。

我需要 1\. 创建仅将点击处理程序与内部关联的 jQuery 选择？divs 和 2\. 使处理程序调用具有这 2 个参数的函数。就像是：

```
$('#outer div').click(function () {
  myfunction(this.h3above.id,this.id);
}); 
```

有人可以帮助上面的 3 行代码正确选择并获得所需的 2 个 id 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:12:01.133

您可以使用 jQuery 的`prevAll()`函数来选择前一个`h3`元素：

```
$('#outer div').click(function () {
  var h3_id = $(this).prevAll('h3').attr("id");
  var id = $(this).attr("id");
  myfunction(h3_id, id);
}); 
```

该`prevAll`函数获取“匹配元素集中每个元素的所有先前兄弟，可选地由选择器过滤”。( [jQuery API](http://api.jquery.com/prevAll/) )

但是，就像上面的评论者所说的那样，您应该将`id`内部部门的 's 更改为类，因为对于有效的 HTML，id 应该是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:15:02.387

```
$('#outer').on('click', 'div[id^=inner]', function(e){
    var h3_id = $(this).prevAll('h3').attr("id");
    var id = $(this).attr("id");
    myfunction(h3_id, id);
}) 
```

demo: [Fiddle](http://jsfiddle.net/Tk6nA/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:16:07.813

正如两位评论者指出的那样，您应该拥有唯一的 ID。

我这里有一个关于如何获取 id 的[jsFiddle 。](http://jsfiddle.net/Qtnnw/1/)

我向可点击元素添加了类，并在其上绑定了点击事件。假设 h3 与“内部”div 处于同一级别，则使用 .prev 函数查找 h3 并获取其 id。

总而言之，最佳实践是真正更好地分组您的内部元素并使用唯一的 id。多个元素可以有相同的类，但不能有 id。

稍微修改的HTML：

```
 <div id="outer">
  <h3 id="groupa">group a</h3>
  <div id="inner1" class="clickable">Click here</div>
  <div id="inner2" class="clickable">Click here</div>
  <h3 id="groupb">group b</h3>
      <div id="inner3" class="clickable">Click here</div>
      <div id="inner4" class="clickable">Click here</div>
</div>

<br/><br/>
Your Results:
<br/><br/>
  <div class="output1"></div><!--This inner's closest h3-->
  <div class="output2"></div> <!--This inner ID--> 
```

Javascript：

```
$('.clickable').click(function(){
    //.attr fetches the attribute value
    $('.output1').text($(this).attr('id')); 
    $('.output2').text($(this).prev('h3').attr('id'));

    /*
    $(this).attr('id')  -- this contains the clicked element id
    $(this).prev('h3').attr('id') -- this contains the closest h3's id

    you could store them in a variable and then call your function with it.

    */
}); 
```

# javascript - 我无法正确计算 var 计数

> ID：15286478
> 
> 赞同：-3
> 
> 时间：2013-03-08T04:01:55.790
> 
> 标签：javascript

我无法让我的 var 计数来跟踪 if 语句中的计数有人可以帮助我吗

```
 Laser.prototype.update = function () {
    //.3
    this.rot += .3
    this.pos.add(this.dir.clone().mult(5));
    this.alive = !(this.pos.x > cw || this.pos.x < 0 || this.pos.y > ch || this.pos.y < 0);
    var counts = 0;
    for (var i = 0; i < asteroids.length; i++) {
        var astPos = asteroids[i].pos.clone();
        astPos.sub(this.pos); //3 impact area
        if (asteroids[i].onscreen && astPos.len() < asteroids[i].sizes[asteroids[i].level] + 10) {
            asteroids[i].hit(this.dir);
            if (counts < 5) {
                this.alive = false;
                counts++;
                //alert("the count is" + counts);
            }
            if (counts > 5) {
                this.alive = true;
                counts++;
                alert("the count is" + counts);
            }
            return counts;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:11:05.260

可能是您没有考虑 counts == 5 时的情况，因此当计数达到 5 时它不会执行 counts++ ATALL。您可以将 if 条件的代码更改为

```
 if (counts<5){

            this.alive = false;
            counts++;
            //alert("the count is" + counts);
 }
 else{

             this.alive = true;
             counts++;
              alert("the count is" + counts);

 } 
```

或类似的东西...考虑计数== 5时的情况。

**编辑**：还将 return 语句放在 for 循环之外。那就试试

**EDIT2**：还将 if 语句更改为

`if (asteroids[i].onscreen && (astPos.len() < (asteroids[i].sizes[asteroids[i].level] + 10))) {`

使其具有更好的可读性

**EDIT3**：考虑到下面的评论，您可以尝试两件事。

1.  将 return 语句放在 for 循环之外。像这样

    ```
    如果（计数> 5）{
                        this.alive = true;
                        计数++；
                        alert("计数是" + counts);
                    }
                }
            }
           返回计数；
        }
    ```

2.  或者，您可以将“计数”声明为全局变量，并在函数中增加“计数”，就像您在注释中所做的那样。并返回它。在这种情况下，for 循环将没有多大意义。你也可以删除它。试试这个，让我们知道。

# android - Android：GET 有效，POST 无效

> ID：15286481
> 
> 赞同：0
> 
> 时间：2013-03-08T04:02:18.440
> 
> 标签：android, json, post, get

我目前正在测试一些代码以用于 android 编程。我在这里找到了一些测试项目：[http ://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

但问题是，我可以毫无问题地读取数据库，但这些功能不适用于 POST 仅 GET。因此，当我尝试添加新产品时，它会向我的 php 脚本发出请求，但根本没有 POST 数据。我是这样测试的：

```
<?php 
header("content-type:application/json; charset=UTF-8");
//print("fda");
/*
 * Following code will create a new product row
 * All product details are read from HTTP Post Request
 */

// array for JSON response
$response = array();

// check for required fields
//if (isset($_POST['name']) && isset($_POST['price']) && isset($_POST['description'])) {
//if (isset($_POST['name'])){
    $name = "test";//$_POST['name'];
    $price = 123; //$_POST['price'];
    $description = "desc"; //$_POST['description'];

foreach ($_POST as $key => $value)
 $data = $data." Field ".htmlspecialchars($key)." is ".htmlspecialchars($value);
    // include db connect class
//echo $data;
$url = $_SERVER['REQUEST_URI'];
    require_once __DIR__ . '/db_connect.php';

    // connecting to db
    $db = new DB_CONNECT();

    // mysql inserting a new row
    $result = mysql_query("INSERT INTO products(name, price, description, url) VALUES('$name', '$price', '$description','$data')");

    // check if row inserted or not
    if ($result) {
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = "Product successfully created!.";

        // echoing JSON response
        echo json_encode($response);
    } else {
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        // echoing JSON response
        echo json_encode($response);

    }
//} else {
//    // required field is missing
//    $response["success"] = 0;
//    $response["message"] = "Required field(s) is missing";
//
//    // echoing JSON response
//    echo json_encode($response);
//}
?> 
```

如您所见，我将 POST 数据发布到数据库中。当我使用我自己的基于 Web 的测试脚本时，它可以完美运行，并在数据库中显示 POST 数据。

所以我的 android 代码实际上似乎并没有发送 POST 数据，因为当我添加产品但 testvars offcourse 时，它​​会在数据库中添加一行。问题是，当我从手机执行它时，数据库中的最后一个字段（url 或更好的参数）将保持为空。

这是来自android应用程序的代码：

```
package com.example.androidhive;

import java.io.IOException;
import java.io.UnsupportedEncodingException;
import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class NewProductActivity extends Activity {

    // Progress Dialog
    private ProgressDialog pDialog;

    JSONParser jsonParser = new JSONParser();
    EditText inputName;
    EditText inputPrice;
    EditText inputDesc;

    // url to create new product
    private static String url_create_product = "http://www.supergeilebus.nl/android_connect/create_product.php/";

    // JSON Node names
    private static final String TAG_SUCCESS = "success";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.add_product);

        // Edit Text
        inputName = (EditText) findViewById(R.id.inputName);
        inputPrice = (EditText) findViewById(R.id.inputPrice);
        inputDesc = (EditText) findViewById(R.id.inputDesc);

        // Create button
        Button btnCreateProduct = (Button) findViewById(R.id.btnCreateProduct);

        // button click event
        btnCreateProduct.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                // creating new product in background thread
                new CreateNewProduct().execute();
            }
        });
    }

    /**
     * Background Async Task to Create new product
     * */
    class CreateNewProduct extends AsyncTask<String, String, String> {
        /**
         * Before starting background thread Show Progress Dialog
         * */
        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            pDialog = new ProgressDialog(NewProductActivity.this);
            pDialog.setMessage("Creating Product..");
            pDialog.setIndeterminate(false);
            pDialog.setCancelable(true);
            pDialog.show();
        }

        /**
         * Creating product
         * */
        protected String doInBackground(String... args) {
            String name = inputName.getText().toString();
            String price = inputPrice.getText().toString();
            String description = inputDesc.getText().toString();

            // Building Parameters
            List<NameValuePair> params = new ArrayList<NameValuePair>();
            params.add(new BasicNameValuePair("name", name));
            params.add(new BasicNameValuePair("price", price));
            params.add(new BasicNameValuePair("description", description));

            // getting JSON Object
            // Note that create product url accepts POST method

            JSONObject json = jsonParser.makeHttpRequest(url_create_product,"POST", params);
            // check log cat fro response
            Log.d("Create Response", json.toString());

            // check for success tag
            try {
                int success = json.getInt(TAG_SUCCESS);

                if (success == 1) {
                    // successfully created product
                    Intent i = new Intent(getApplicationContext(), AllProductsActivity.class);
                    startActivity(i);

                    // closing this screen
                    finish();
                } else {
                    // failed to create product
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

            return null;
        }

        /**
         * After completing background task Dismiss the progress dialog
         * **/
        protected void onPostExecute(String file_url) {
            // dismiss the dialog once done
            pDialog.dismiss();
        }

    }
} 
```

我希望有一个人可以帮助我。我别无选择。当我将所有内容更改为 GET 时，它可以完美运行。我知道由于 sql 注入，它的编码很差，但我只想了解这一点。

问候和抱歉我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:45:49.220

嗨用户我使用以下代码调用发布到网络服务。它可以帮助你。

```
 **public String doPost(Activity activity, String urlString, String method, String value) 
                                                throws ClientProtocolException, IOException 
    {
        String responseString="";
        HttpURLConnection urlConnection = null;
        retryCount++;
        try 
        {
            URL url = new URL(urlString+method);
            urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setRequestMethod("POST");
            urlConnection.setRequestProperty("Content-Type", "application/json");  
            urlConnection.setRequestProperty("Content-Length",value.length()+"" );  
            urlConnection.setDoInput( true );
            urlConnection.setDoOutput( true );
            DataOutputStream dos = new DataOutputStream( urlConnection.getOutputStream() );
            byte[] bs = value.getBytes();
            Log.d(tag, "Sending JSON String ->"+new String(bs));
            dos.write(bs);
            dos.flush();
            dos.close();
            Log.d(tag,"Responce ->"+urlConnection.getResponseMessage());
            if(urlConnection.getResponseMessage().toLowerCase().equals("ok"))
            {
                InputStream is = urlConnection.getInputStream();
                int ch;
                StringBuffer b =new StringBuffer();
                while( ( ch = is.read() ) != -1 )
                {
                    b.append( (char)ch );
                }
                responseString = b.toString();
                Log.d(tag,method + "','" + responseString);
                return method + "','" + responseString;
            }
            else
            {

                Log.d(tag, tag1+urlConnection.getResponseMessage());
            }
            dos.close();
        } 
        catch (SocketException e) 
        {

            Log.d(tag, tag1+e);

    }
        catch (Exception e) 
        {

            Log.e(tag,"-->"+ e);
        }

        return "";
    }** 
```

这里 urlString 和 method 构成了 Web 服务方法的整个 URL。

# c++ - cuda 5.0 链接错误：未定义对 __cudaRegisterLInkedBinary_ 的引用

> ID：15286484
> 
> 赞同：2
> 
> 时间：2013-03-08T04:02:43.987
> 
> 标签：c++, cuda, linker

我今天从 4.2 更新到 cuda 5.0 并得到很多这样的链接错误：

```
AddLevel.o: In function __sti____cudaRegisterAll_43_tmpxft_000034f6_00000000_6_AddLevel
_cpp1_ii_f49b3b40':/tmp/tmpxft_000034f6_00000000-3_AddLevel.cudafe1.stub.c:8: undefined
reference to `__cudaRegisterLinkedBinary_43_tmpxft_000034f6_00000000_6_AddLevel_cpp1_ii
_f49b3b40. 
```

每个目标文件都跟着这样的错误。

正如我搜索过的许多帖子中所建议的那样，我在链接命令的末尾添加了一些 cuda 库，但它仍然不起作用：

```
nvcc  -O3 -o iTrace*.o -L/usr/local/hdf5/lib -L/usr/local/cuda/lib64
`sdl-config--libs` -lhdf5 -lmfhdf -ldf -ljpeg -lz -lcuda -lcudart -lcublas_device 
-lcudadevrt. 
```

谁能帮我解决这个问题？我把完整的 Makefile 放在最后，以备不时之需。另外我使用的是 Kubuntu 12.04 64 位版本。我的 GPU 是 GeForce GTX 550 Ti，计算能力为 2.1。此外，我将源文件的所有后缀名称从 .C 更改为 .cu，尽管其中许多不包含任何设备代码。不确定这是否有问题。但它适用于 nvcc 4.2。

顺便说一句，那些带有下划线和数字的奇怪长文件名是如何生成的？我在 /usr/local/cuda/lib64 中搜索了库文件，发现所有以开头的函数`__cudaRegisterLinkedBinary_XX(a number here)_`都包含在`libcublas_device.a`和`libcudadevrt.a`. 所以我认为添加这些 -l 选项应该有效，但它没有。

非常感谢。

这是我的 Makefile。

```
HDF_DIR = /usr/local/hdf5
HDF_INCLUDE = /usr/local/hdf5/include
X11_DIR = /usr/X11R6
PRECISION = r8

COMPILER="gnu"
DEBUG="no"
OPENMP="no"

ifeq ($(COMPILER), "gnu")
CC = nvcc 
CCxx = nvcc
LDR = nvcc 
ifeq ($(DEBUG), "yes")
CFLAGS = -O0
LDFLAGS = -O0
else
CFLAGS = -O3
LDFLAGS = -O3
endif
ifeq ($(OPENMP),"yes")
CFLAGS += -fopenmp
LDFLAGS += -fopenmp
endif
endif

ifeq ($(COMPILER), "intel")
CC = icc
CCxx = icpc
LDR = icpc
ifeq ($(DEBUG), "yes")
CFLAGS = -O0
LDFLAGS = -O0
else
CFLAGS = -fast
LDFLAGS = -fast
endif
ifeq ($(OPENMP),"yes")
CFLAGS += -openmp
LDFLAGS += -openmp
endif
endif

DEFINES = INCLUDE = -I. -I$(HDF_INCLUDE) `sdl-config --cflags` -I$(X11_DIR)/include

LIBS = -L$(HDF_DIR)/lib `sdl-config --libs` -L/usr/local/cuda/lib64\
-lhdf5 -lmfhdf -ldf -ljpeg -lz -lcuda -lcudart -lcublas_device -lcudadevrt

OBJS =  AddLevel.o          \
    CreateNewRays.o         \
    DefineFieldNames.o      \
    FieldsToLoad.o          \
    FindField.o         \
    GetGrid.o           \
    Grid_ComputeVertexData.o    \
    Grid_FindNeighbors.o        \
    Grid_LoadDataHDF4.o     \
    Grid_LoadDataHDF5.o     \
    Grid_ReadGridProperties.o   \
    Grid_SetSubgridMarker.o     \
    Grid_constructor.o      \
    Grid_destructor.o       \
    InterpretKeyPress.o     \
    LoadCT.o            \
    Load_RGBA.o         \
    ListIO.o            \
    Ray_GridBoundaryCheck.o     \
    Ray_Initialize.o        \
    Ray_InterpolateValue.o      \
    Ray_Trace.o         \
    Ray_constructor.o       \
    RayTraceInteractive.o       \
    LoadAllData.o  \
    ReadGridInfo.o          \
    ReadHierarchyEntry.o        \
    ResetReloadFlag.o       \
    UnloadAllData.o         \
    UnloadGrids.o           \
    UpdateScreen.o          \
    TraceAllRays.o          \
    camera.o            \
    my_vector.o         \
    print_help.o

%.o:%.cu
$(CCxx) -arch=sm_21 -rdc=true $(DEFINES) $(INCLUDE) -D$(PRECISION) -g -dc
    $(CFLAGS)    $*.cu

iTrace: $(OBJS)
$(LDR) $(LDFLAGS) -o iTrace $(OBJS) $(LIBS) 

clean:
rm -f *~ *.o iTrace

${OBJS}: typedef.h Grid.h my_vector.h Ray.h precision.h colors.h render.h 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:22:00.867

这很奇怪。您今天从 cuda 4.2 升级到 cuda 5，但您的 makefile 已经包含`-rdc=true`？无论如何，请尝试添加`-arch=sm_21`到您的`LDFLAGS`定义中，即`LDFLAGS = -O3 -arch=sm_21`（在您的 makefile 的 gnu 部分。可能应该为 的调试和非调试定义执行此操作`LDFLAGS`）我相信您遇到的问题已在[此处](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html#using-separate-compilation-in-cuda)描述。

# drop-down-menu - 在树中重用 Twitter Bootstrap 下拉菜单

> ID：15286485
> 
> 赞同：0
> 
> 时间：2013-03-08T04:02:47.060
> 
> 标签：drop-down-menu, twitter-bootstrap

我有一棵树，每个树项都有一个插入符号图标，单击时会显示一个菜单。我想使用 Twitter Bootstrap 样式的下拉菜单，但是我不想为每个树节点都包含菜单标记，因为可能会有很多。我只想要一个菜单​​，单击该项目时会显示该菜单。

Twitter Bootstrap 菜单不提供此类功能，旨在用于导航栏和按钮。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T11:16:00.717

我能够破解这个 twitter 引导[上下文菜单](https://github.com/sydcanem/bootstrap-contextmenu)代码来做我需要的事情。

# ruby-on-rails - Rails 接受测试 - 排除外部服务调用

> ID：15286489
> 
> 赞同：0
> 
> 时间：2013-03-08T04:03:06.547
> 
> 标签：ruby-on-rails, ruby, rspec, capybara

我想知道是否可以剔除外部服务。我在我的应用程序中有以下对外部服务的调用：

```
bitly = Bitly.new("someuser", "123key")
bitly.shorten("www.example.com/my_model/#{@my_model.id}") 
```

在我的验收测试期间，是否有可能在每次调用此服务时将 Bitly 排除在外？

任何示例将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:47:46.553

我建议查看 Webmock，[https://github.com/bblimke/webmock](https://github.com/bblimke/webmock)。我喜欢它的一件事是它会为任何尚未被存根的出站 http 请求引发错误（并且还提供生成的示例代码来存根请求）。它也有据可查。

编辑：或者，您可以删除该缩短方法，而不是删除实际的 http 请求：

```
bitly = Bitly.new("someuser", "123key")
bitly.stub(:shorten).and_return("some value")
bitly.shorten("<some url>").should == "some value" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:18:46.167

您始终可以重新定义该类，并创建一个`shorten`接受 URL 的新方法。您还需要返回一个对您的代码有意义的值：

```
class Bitly

  def initialize(p1, p2)
    @p1, @p2 = p1, p2 # in case it's important to remember them
  end

  def shorten(url)
    "some return value"
  end

end

bitly = Bitly.new("someuser", "123key")
bitly.shorten("www.example.com/my_model/#{@my_model.id}") 
```

即使您在该声明之前包含了正常的 Bitly 文件，它后面的任何代码都将使用重新定义的类和方法。

可能还有很多其他更好的方法可以做到这一点，但这很快（而且很脏）并且工作简单。

有时，您可以识别出阻碍所有外部服务 I/O 的特定方法，替换它，并利用代码必须提供的所有其他功能。这是我认为 Ruby 很酷的事情之一。

# javascript - 如何将实时模型附加到 angular.js 中的控制器？

> ID：15286492
> 
> 赞同：1
> 
> 时间：2013-03-08T04:03:13.937
> 
> 标签：javascript, model-view-controller, angularjs, dashboard, pubnub

我正在尝试使用来自仪表板的实时 json（带有 pubnub）的数据显示几个视图/控制器。

在 angular.js 常规文档中，我看到如下内容：

```
function CounterCtrl($scope) {
    $scope.data = {'counter':1};
}; 
```

但我想要的是有一个数据源列表，然后用数据的变化通知视图并渲染它们。

所以，我可以有：

```
counter1:{'counter':1} => Rendered by view1 and view2
counter2:{'counter':5} => Rendered by view3 
```

view4 还没有数据。几分钟后它到达

```
counter3:{'counter':8} => Rendered by view4 
```

然后 counter1 被更新

```
counter1:{'counter':2} 
```

我按每种视图类型创建一个控制器，一些 2 个视图可以是同一个控制器，但显示不同的数据：

```
view1 & view3 are UpDownCtrl
view2 is LineGraphCtrl 
```

在仪表板中，我需要更新视图，并根据数据更改行为（或缺少数据，以显示空状态）。

PD：如果针对此类任务量身定制，我愿意在另一个 js 框架中执行此操作...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T00:06:37.250

我也在使用 PubNub，并在我的 AngularJS 应用程序中启动了一个非常基本的 PubNub 服务。

服务（正在进行中）：

```
app.factory('pubnub', function($rootScope) {
    var pubnub = {
        lastMessage: '',
        messages: [],
        callback: function(message) {
            pubnub.lastMessage = message;
            pubnub.messages.unshift(message);
            $rootScope.$broadcast('pubnubMessageReceived', message); 
        },
        getLastMessage: function() {
            return pubnub.lastMessage;
        },
        getMessages: function() {
            return pubnub.messages;
        }
    }

    PUBNUB.subscribe({
        channel    : 'my_channel',
        restore    : false, 
        callback   : pubnub.callback,
    });

    return pubnub;
}); 
```

（许多）控制器之一：

```
var ProjectController = function($scope, pubnub) {

    $scope.$on('pubnubMessageReceived', function(event, message) {
        console.log("pubnub message received in project controller",message);
        if(message.target == "project") {
            // The message is for me!! Do something with it
            $scope.data = message.data;
        }
    });
} 
```

所以我有一个服务监听 PubNub 消息并通过 $rootScope 广播它们，然后让任何控制器监听这些消息很简单。一旦你在你的控制器中收到一条消息，修改你的 $scope ，它会自动更新你的视图。

# jquery - 页面加载时的 .bind() val

> ID：15286493
> 
> 赞同：1
> 
> 时间：2013-03-08T04:03:29.180
> 
> 标签：jquery

好吧，让我为你分解一下。我们有一个表单，提交时会重新加载页面。但是，在我们提交的那个表单中，我想获取一个文本输入值并将该值添加到页面加载时的元素中。但这行不通……我做错了什么？

```
$('#btnDoneCampaignFields').bind('click',function(){
    var getValue = $('.field-set-wrap').find('.color-picker-frmfields').val();

    $('.sb-form > input').css('color', getValue);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T04:10:34.943

如果您正在发布页面（即重新加载），那么您需要将该页面存储在某处以便在浏览器收到请求响应时将其取回。

如果您使用的是 html5，则可以这样做：

```
$('#btnDoneCampaignFields').bind('click',function()
{
    var getValue = $('.field-set-wrap').find('.color-picker-frmfields').val();

    sessionStorage.Fieldvalue = getValue;
} 
```

使用`document.ready`：

```
$(document).ready(function()
{
    if (sessionStorage.Fieldvalue) {
        $('.sb-form > input').css('color', sessionStorage.Fieldvalue);
    }
}); 
```

更详细地检查这一点：[什么是 HTML5 Web 存储？](http://www.w3schools.com/html/html5_webstorage.asp)

# windows-7 - 更改注册表 DWORD 的脚本

> ID：15286495
> 
> 赞同：1
> 
> 时间：2013-03-08T04:03:50.903
> 
> 标签：windows-7, vbscript, registry

我需要一个脚本来将 Windows 7 Home Premium 中的 DWORD 值更改为 0，以防止 Microsoft Security Essentials 向导在 sysprep 之后部署。我知道如何与 sysprep 一起工作，只需要脚本。我已经尝试了几个 vbs 并且玩过但没有成功。

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft Security Client

DWORD: OOBE

Change value to 0 
```

如果有资源，请告诉我，我可以自己做。我是脚本新手，不打算用愚蠢的问题给堆栈向导带来负担。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T22:01:10.317

在 VBS 中试试这个测试：

```
CreateObject("WScript.Shell").RegWrite "HKLM\ABC", 0, "REG_DWORD" 
```

结果应该是： ![在此处输入图像描述](../Images/d0d7d39df50c6b65b629aba2429b70a0.png)

确保以提升的权限运行脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:03:19.317

PowerShell 可以做到这一点

```
sp 'hklm:software/microsoft/microsoft security client' OOBE 0 -t dword 
```

# ios - 视图控制器中的延迟实例化

> ID：15286496
> 
> 赞同：3
> 
> 时间：2013-03-08T04:03:56.810
> 
> 标签：ios, objective-c, xcode

我有一个按钮，可以触发类中数组的随机声音。我的视图控制器中有一个由 IBAction 触发的延迟实例化，但我觉得这是不正确的，原因有两个：

**1）**我经常看到人们在***getter 和 setter***中做 LI 。

*当我尝试在 getter/setter 中执行 LI 时，我的程序崩溃了，我不知道为什么。*

**2）**我*在视图控制器 IBAction 内部*执行这个惰性实例化。

**这是进行延迟实例化的正确方法吗？**

这是不会崩溃的代码：

```
- (IBAction)myClass:(UIButton *)sender
{

    if (!self.myClass){
        self.myClass = [[myClass alloc] init];
        [self.myClass setUpMyClass]; // this method just loads sounds and some text
    }

    [self.myClass playSound];
    self.myClassLabel.text = [[NSString alloc] initWithFormat:@"%@", [self.myClass someText]];

} 
```

这是崩溃的代码：

```
- (myClass *)myClass
{

    if (!self.myClass){
        self.myClass = [[myClass alloc] init];
        [self.myClass setUpMyClass]; // this method just loads sounds and some text
    }

    return self.myClass;
}

- (IBAction)myClass:(UIButton *)sender
{
    [self.myClass playSound];
    self.myClassLabel.text = [[NSString alloc] initWithFormat:@"%@", [self.myClass someText]];

} 
```

调试器中的输出并没有说太多，但是行旁边有一个绿色箭头，上面写着

```
-(myClass *) myClass { 
```

它说

```
Thread 1: EXC_BAD_ACCESS (code=2, address =0xbf7ffffc) 
```

对于名为 aqua 的用户，setUpMyMethod 方法如下所示：

```
-(void) setUpEscha{
    self.eschaDialogue = [[NSArray alloc] initWithObjects:
                       [[NSBundle mainBundle] pathForResource:@"Sound1" ofType:@"mp3"],
                       [[NSBundle mainBundle] pathForResource:@"Sound1" ofType:@"mp3"],
                       ...
                       nil];

self.eschaLines = [[NSArray alloc] initWithObjects:
                    @"String1",
                    @"String2",
                    @"...",
                    nil]; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T05:08:01.577

你的吸气剂递归地调用自己。不要`self.myClass`在`myClass`getter 内访问。将您的代码更改为：

```
- (myClass *)myClass
{
    if (!_myClass){
        _myClass = [[myClass alloc] init];
        [_myClass setUpMyClass]; // this method just loads sounds and some text
    }
    return _myClass;
} 
```

这是假设您的 iVar for `myClass`is `_myClass`。如果没有，请更改`_myClass`为任何 iVar。

对于未来类似“为什么 XXX 崩溃”的问题，如果您包含来自崩溃的调试器日志和堆栈跟踪，将会很有帮助。

# java - java“不可比较”异常？

> ID：15286501
> 
> 赞同：10
> 
> 时间：2013-03-08T04:04:23.937
> 
> 标签：java, exception, comparable

我正在制作一个实现可比较的自定义类，如果有人试图比较两个我的定义不可比较的对象，我想抛出某种异常。API 中是否已经有合适的例外，还是我需要自己制作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T04:07:43.700

从来没听说过。

表示这一点的最准确的异常可能是`IllegalArgumentException`： [http ://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html](http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html)

您可能还应该实施`Comparable<CustomClass>`这将防止调用者提供错误类的实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T04:39:57.543

考虑 ClassCastException，它是 Java 集合框架在这种情况下抛出的。当我们尝试将不可比较的 Test1 添加到 TreeSet 时会发生这种情况

```
Exception in thread "main" java.lang.ClassCastException: Test1 cannot be cast to java.lang.Comparable
    at java.util.TreeMap.compare(TreeMap.java:1188)
    at java.util.TreeMap.put(TreeMap.java:531)
    at java.util.TreeSet.add(TreeSet.java:255)
    at java.util.AbstractCollection.addAll(AbstractCollection.java:334)
    at java.util.TreeSet.addAll(TreeSet.java:312)
    at java.util.TreeSet.<init>(TreeSet.java:160)
    at Test1.main(Test1.java:9) 
```

# java - 为 Java 创建一个测试器类

> ID：15286505
> 
> 赞同：0
> 
> 时间：2013-03-08T04:05:01.870
> 
> 标签：java, class, testing, compilation, boolean

我需要为我的代码创建一个测试器类，但我不知道如何做到这一点，有人可以帮助我吗？我试过编译这个，但我收到了这些消息：

发现2个错误：

`Error: The constructor PayCalculator() is undefined`

`Error: The method printData() is undefined for the type PayCalculatorTester`

我的代码：

```
 {
    PayCalculator p1 = new PayCalculator();
    p1.setHourlyRate(8.25);
    p1.setHoursWorked(45);    
    printData();
  } 
```

支付计算器类

```
public class PayCalculator

{
  private double hourlyRate;
  private double hoursWorked;

  /**
   * Two parameter constructor
   * Add hourlyRate and hoursWorked
   * @param the hourly rate
   * @param the hours worked
   */
  public PayCalculator(double aHourlyRate, double aHoursWorked)
  {
    hourlyRate = aHourlyRate;
    hoursWorked = aHoursWorked;
  }

  /**
   * sets the hourly rate
   * @return hourlyRate
   */ 
  public void setHourlyRate(double aHourlyRate)
  {
    hourlyRate = aHourlyRate;
  }

  /**
   * gets the hourly rate
   * @param hourlyRate
   */
  public double getHourlyRate()
  {
    return hourlyRate;
  }

  /**
   * sets the hours worked
   * @return hoursWorked
   */ 
  public void setHoursWorked(double aHoursWorked)
  {
    hoursWorked = aHoursWorked;
  }

  /**
   * gets the hours worked
   * @param hours worked
   */
  public double getHoursWorked()
  {
    return hoursWorked;
  }

  public boolean workedOvertime()
  {
    if (hoursWorked > 40)
    {
      return true;
    }
    else 
    {
      return false;
    }
  }

  public double numHoursOvertime()
  {
    if (hoursWorked > 40)
    {
      return hoursWorked - 40;
    }
    else 
    {
      return 0;
    }
  }

  public double calculateGrossPay()
  {
    if (hourlyRate  <= 10.25)
    {
      if (hourlyRate <= 40)
        return hourlyRate * hoursWorked;
    }
    else 
    {  
      double grossPay = ((40 * hourlyRate) + ((hourlyRate * 2) * hoursWorked - 40));
      return grossPay;
    }

    if (hoursWorked <= 60)
    {
      return hourlyRate * hoursWorked;
    }
    else
    {
      return 60 * hourlyRate;
    }
  }

  public double determineTaxRate(double grossPay)
  {
    if (grossPay >= 800)
    {
      double tax = 0;
      tax = grossPay * 0.37;
      return tax;
    }
    else if ( grossPay >= 400)
    {
      double tax = 0;
      tax = grossPay * 0.22;
      return tax;
    }
    else
    {
      double tax = 0;
      tax = grossPay * 0.12;
      return tax;
    }
  }

  public double calculateNetPay(double grossPay, double tax)
  {
    double calculateNetPay = grossPay - tax;
    return calculateNetPay;
  }

  public void printData(double grossPay, double tax)
  {
    System.out.println("Hours Worked: " + hoursWorked);
    System.out.println("Hourly rate: " + hourlyRate);
    System.out.println("Number of hours of overtime worked: " + numHoursOvertime());
    System.out.println("Worked overtime? " + workedOvertime());
    System.out.println("Gross pay: " + calculateGrossPay());
    System.out.println("Tax Rate: " + determineTaxRate(grossPay));
    System.out.println("Net Pay: " + calculateNetPay(grossPay, tax));
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:13:19.063

“构造函数 PayCalculator() 未定义”

因为您已经在类中定义了唯一带有参数的构造函数。Java 说，如果您为构造函数提供参数，则不提供不带参数的默认构造函数。所以你应该明确地提供那个。或使用您已声明的那个。

“PayCalculatorTester 类型的 printData() 方法未定义”

这个方法是在类中定义的，`PayCalculator`所以正确的语法应该是`p1.printData();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:09:26.197

1，如果您没有在类中定义任何构造函数，编译器将为您隐式定义一个默认构造函数（不带参数）。如果您明确定义了一个构造函数。编译器不会再这样做了。所以你不能使用默认的构造函数 PayCalculator()。

参考：[为您的类提供构造函数](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)

2、printData是PayCalculator的实例方法，需要使用PayCalculator实例调用，即p1.printData()。就像 setHourlyRate 和 setHoursWorked 一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T04:10:06.577

那只是因为您的参数列表与您的方法的定义不匹配。

此外，您的代码中似乎存在细微的不一致。试试这个：

```
import java.io.*;
import java.util.*;

class PayCalculator
{
    private double hourlyRate;
    private double hoursWorked;

    /**
    * Two parameter constructor
    * Add hourlyRate and hoursWorked
    * @param the hourly rate
    * @param the hours worked
    */
    public PayCalculator(double hourlyRate, double hoursWorked)
    {
        this.hourlyRate = hourlyRate;
        this.hoursWorked = hoursWorked;
    }

    /**
    * gets the hourly rate
    * @param hourlyRate
    */
    public double getHourlyRate()
    {
        return hourlyRate;
    }

    /**
    * gets the hours worked
    * @param hours worked
    */
    public double getHoursWorked()
    {
        return hoursWorked;
    }

    public boolean workedOvertime()
    {
        if (hoursWorked > 40)
            return true;
        else
            return false;
    }

    public double numHoursOvertime()
    {
        if (hoursWorked > 40)
            return hoursWorked - 40;
        else
            return 0;
    }

    public double calculateGrossPay()
    {
        if (hourlyRate <= 10.25)
            if (hoursWorked <= 40)
                return hourlyRate * hoursWorked;
            else
                return ((40 * hourlyRate) + ((hourlyRate * 2) * hoursWorked - 40));
        if (hoursWorked <= 60)
            return hourlyRate * hoursWorked;
        else
            return 60 * hourlyRate;
    }

    public double determineTaxRate(double grossPay)
    {
        if (grossPay >= 800)
            return grossPay * 0.37;
        else if ( grossPay >= 400)
            return grossPay * 0.22;
        else
            return grossPay * 0.12;
    }

    public double calculateNetPay(double grossPay, double tax)
    {
        return (grossPay - tax);
    }

    public void printData(double grossPay, double tax)
    {
        System.out.println("Hours Worked: " + hoursWorked);
        System.out.println("Hourly rate: " + hourlyRate);
        System.out.println("Number of hours of overtime worked: " + numHoursOvertime());
        System.out.println("Worked overtime? " + workedOvertime());
        System.out.println("Gross pay: " + calculateGrossPay());
        System.out.println("Tax Rate: " + determineTaxRate(grossPay));
        System.out.println("Net Pay: " + calculateNetPay(grossPay, tax));
    }
}

class Test
{
    public static void main(String args[])    //main() method required to execute.
    {
        PayCalculator p1 = new PayCalculator(8.25,45);    //default constructor only exists if you do not define your own constructor.
        double myGrossPay = p1.calculateGrossPay();
        p1.printData(myGrossPay,p1.determineTaxRate(myGrossPay));    //requires said parameters.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T04:54:03.747

这就是您调用对象构造函数的方式： PayCalculator p1 = new PayCalculator();

这就是构造函数的定义方式： public PayCalculator(double hourlyRate, double hoursWorked);

显然它会报错。

# ruby-on-rails - 带有字符串参数的 Rails link_to 非资源路由

> ID：15286506
> 
> 赞同：0
> 
> 时间：2013-03-08T04:05:02.847
> 
> 标签：ruby-on-rails, ruby-1.9.3

我正在使用 Rails (3.2.11) 上的 Ruby (1.9.3) 开发航班跟踪应用程序。这个应用程序有一个`Flight`类，其中有一个字符串列`tail_number`，用于跟踪执行飞行的飞机的[尾号](http://en.wikipedia.org/wiki/Aircraft_registration)。

我正在尝试为尾号创建一个索引视图，显示尾号列表和每个尾号的计数，并链接到一个视图，该视图将显示所有`Flights`具有该尾号的视图。 **我的显示页面正常工作，但`link_to`在索引页面上工作时遇到问题。**

显示视图由我在 routes.rb 中设置的`flights`控制器操作处理：`show_tail`

```
match '/tails' => 'flights#index_tails'
match '/tails/:tail_number' => 'flights#show_tail' 
```

飞行控制器按尾号对航班进行分组并提供计数：

```
def index_tails
  @flight_tail_numbers = Flight.where("tail_number IS NOT NULL").group("tail_number").count
end 
```

在我的尾号索引页面 (/app/views/flights/index_tails.html.erb) 上，我创建了一个尾号表和每个尾号的计数，旨在将尾号链接到适当的显示视图：

```
<h1>Tail Numbers</h1>

<table>
<% @flight_tail_numbers.each do |tail_number, count| %>
  <tr>
    <td><%= link_to(tail_number, tails_path(tail_number)) %></td>
    <td><%= count %>
  </tr>
<% end %>
</table> 
```

但是，它并没有像我希望的那样`link_to`创建指向 /tails/tail_number 的链接（例如），而是创建指向 /tails.tail_number ( ) 的链接。此链接显然不会将我发送到我想要的航班#show_tail。`/tails/N909EV``/tails.N909EV`

我已经成功地为与 Flight (Airports, Trips) 关联的其他模型创建了索引，并为 Flight 本身创建了索引，并且它们都通过使用例如`link_to trip.name, trip_path(trip)`我试图用于尾号的语法来工作。因此，如果 Tail_Number 是一个模型，这将是非常微不足道的，我可以以同样的方式对待它，但它似乎太微不足道了，不能作为一个模型而不是一个给定航班的属性。

我假设它对我不起作用的原因是当我使用`trip_path(trip)`,时`trip`是一个对象，而 in `tails_path(tail_number)`,`tail_number`是一个字符串。但我不确定我应该如何链接到它。我已经尝试过[使用 URL 参数的 Rails link_to action](https://stackoverflow.com/questions/11782935/rails-link-to-action-with-url-parameters)中的命名路由之类的解决方案，但如果我这样做，我会遇到同样的`undefined method`问题，所以我恢复到上面列出的内容。

我应该如何格式化我的 link_to 以使其工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:11:55.820

由于该操作`:show_tail`不是 RESTful 操作，因此您需要在`:as`语句中对其进行分配。

您可以更改路线以支持您正在尝试的内容：

```
match '/tails/:tail_number' => 'flights#show_tail', :as => :tails 
```

这将允许它匹配`tails_path`

我可能会把它命名为

```
match '/tails/:tail_number' => 'flights#show_tail', :as => :show_tails 
```

并用于`show_tails_path(tail_number)`避免其他操作出现问题。

# php - 使用 li 分组的 div 数

> ID：15286507
> 
> 赞同：-2
> 
> 时间：2013-03-08T04:05:11.423
> 
> 标签：php, html-lists, grouping

我在数据库中有 8 个或更多产品：

```
<?php if (!empty($this->products)){ 
  echo "<ul>"; 
        foreach ($this->products as $product){ 
?>
    8 items inserted here
<?
        }
  echo "</ul>"; 
      }
php?> 
```

所以我想要的是数据库上的8个或更多产品将像这样放置：

```
<ul>
  <li>
     <div>Product here</div>
     <div>Product here</div>
     <div>Product here</div>
     <div>Product here</div>
  </li>
  <li>
     <div>Product here</div>
     <div>Product here</div>
     <div>Product here</div>
     <div>Product here</div>
  </li>
</ul> 
```

所以每个 4 产品`<li>`。我该如何做到这一点并知道这是来自 foreach 循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:12:50.827

您可以[在 PHP 中使用模数运算符](http://php.net/manual/en/language.operators.arithmetic.php)来跟踪`li`每四个产品打印/插入一个结束/开始标签：

```
<?php 
  if (!empty($this->products)){ 
    echo "<ul>"; 
    $i = 1;
    foreach ($this->products as $product){ 
      if ($i % 4 == 1) echo "<li>";

      echo "<div>".$product."</div>";

      if ($i % 4 == 0) echo "</li>";

      $i++;
    }
    echo "</ul>"; 
  }
?> 
```

例如，如果`i`最初是`1`，我们将一个开始`li`标签和产品放在一个`div`. 然后我们递增`i`。当`i`达到该值`4`（或任何其他 4 的倍数）时，我们要关闭`li`标签。之后，`i`将变为`5`和`5 % 4 = 1`，因此我们将再次打开另一个`li`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:15:30.803

```
 <?php if (!empty($this->products)){ 
      echo "<ul>"; 
            $counter = 1;
            foreach ($this->products as $product){
                if($counter == 1) echo '<li>';
                echo $product;
                if($counter==4) {$counter=0; echo '</li>';}
                $counter++;

            }
      echo "</ul>"; 
          }
  ?> 
```

# linux - 如果文件不存在，如何让 cp 出错

> ID：15286508
> 
> 赞同：0
> 
> 时间：2013-03-08T04:05:16.083
> 
> 标签：linux, shell

当我输入命令时

```
cp notExistsFile.txt ~/Desktop/ 
```

它给出了一个错误：“cp：无法统计`notExistsFile.txt'：没有这样的文件或目录”

是“cp 命令”有任何选项，如果文件不退出它不会给出任何错误，它只是跳过它。

我正在从 shell 脚本执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:12:49.000

您始终可以将标准错误重定向到`/dev/null`

```
cp notExistsFile.txt ~/Desktop/ 2>/dev/null 
```

# php - 如何安全地将数据传输到服务器？

> ID：15286515
> 
> 赞同：2
> 
> 时间：2013-03-08T04:06:11.487
> 
> 标签：php, apache, security, ssl, openssl

这是我所面临的：

*   **A：**使用 QT/C++ 编写的客户端应用程序
*   **B：**服务器有apache+php+mysql+linux

现在 A 想使用 RESTful 接口向 B 发布一些私有数据，问题是：

1.  如何保证数据传输的安全
2.  如何确保只有合法客户发布数据。

我正在考虑 OpenSSL，但我不知道从哪里开始，有人会告诉我方法吗？

PS.我的客户端应用程序可以由用户免费下载，无需注册或任何用户信息。然后用户使用我的应用程序运行测试然后发布他们的结果。最后，我想确保这些结果数据由我的客户端应用程序发布，因为假数据可能很烦人

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:34:14.533

要安全地传输数据，您需要使用 SSL 加密连接。首先，查看[Apache 文档](http://httpd.apache.org/docs/2.2/ssl/)以了解其工作原理、如何生成自签名证书并相应地配置所有内容。如果您进行搜索，您还可以在网络上轻松找到更简洁的说明。

第二部分取决于您的条件。如果您的应用程序在像 Intranet 这样的封闭环境中工作，那么也许您可以通过 IP 地址限制访问？否则，您需要某种授权。您可以使用内置的 HTTP 授权。检查文档：

*   [http://httpd.apache.org/docs/2.2/howto/auth.html](http://httpd.apache.org/docs/2.2/howto/auth.html)
*   [http://httpd.apache.org/docs/2.2/mod/mod_auth_basic.html](http://httpd.apache.org/docs/2.2/mod/mod_auth_basic.html)

或在网上搜索更多说明。

如果您已经有一些授权系统。就像用户数据库一样。然后，您将需要实现 QT/C++ 应用程序能够使用的 REST API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:41:02.410

Qt 不会为您保护您的数据做任何事情。您应该首先专注于保护您的 RDBMS。当然，您应该仔细编码您的 Qt 客户端应用程序，以通过检查和清理所有输入等来防止意外行为，但如果您不打算分发它，这不应该是您最直接关心的问题。

如果您计划使用 PostgreSQL 作为应用程序的后端，您可以采取一些措施来降低将任何服务暴露于互联网所带来的风险。最基本的：

*   设置具有适当规则的防火墙。仅允许来自受信任来源的入站连接。

*   仅接受 SSL 连接，即使使用自签名证书也是如此。

*   强制使用强密码。如果更合适，请使用客户端证书。

*   将您的 pg_hba.conf 文件设置为仅接受来自已知/可信地址的连接。

[git](https://github.com/dschulz/exampleapp.git)上提供了一个使用 PostgreSQL 的非常好的示例，请单击此处

# javascript - Firefox 附加组件 - 如何在附加组件 panel.html 中的页面上获取帖子消息

> ID：15286527
> 
> 赞同：1
> 
> 时间：2013-03-08T04:07:50.700
> 
> 标签：javascript, html, firefox, firefox-addon

我在 Firefox 插件开发中遇到了麻烦。

【现象】：firefox插件栏面板页面收不到消息，消息是panel.html上的iframe发送的。

这是我的代码：

/ *** 在文件 [popup.html] *** / // 在正文中我添加了一个 iframe 元素。

```
 iframe src="http://localhost/hello.html" 
```

/ *** 在文件 [popup.js] *** // 我添加了一个监听器

```
 window.addEventListener("message", 
    function(event) {
        console.log("popupJS Receive Event from WebPage(" + event.origin);      
        console.log(event);
        //alert(event);
    }); 
```

/ ***在远程页面hello.html *** //我通过点击发送消息。 *强调文本*

```
 window.postMessage({ type: "FROM_PAGE", text: "Hello from the webpage!" }, "http://dicrectpass.com"); 
```

=====>> 但是，我仍然无法收到来自 iframe 的消息！为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-23T19:31:01.843

我遇到了同样的问题。然后我意识到我正在加载的 HTML 文档中包含我的 Javascript，而不是通过 Panel 构造函数。一旦我把它关掉，它工作得很好。

[面板参考](https://developer.mozilla.org/en-US/Add-ons/SDK/High-Level_APIs/panel#Panel%28options%29)

```
var pnl = panel.Panel({
    width: 300,
    height: 300,
    contentURL: self.data.url('popup.html'),
    contentScriptFile: [
        self.data.url('jquery.js'),
        self.data.url('popup.js')
    ],
    onMessage: function(message) {
        console.log(message);
    }
}); 
```

# c# - 使用 Regex.Replace() 替换单词列表失败

> ID：15286528
> 
> 赞同：1
> 
> 时间：2013-03-08T04:07:59.337
> 
> 标签：c#

我正在尝试用一些 HTML 标记替换长字符串中的单词。尝试对列表中的多个单词执行此操作时，我似乎错过了一些东西，但是它确实适用于单个单词。

这是我尝试过的：出于测试目的，我将字符串减少并更改为：

```
string strTest = "Ein toller Testtext mit Folge und Folgen sowie Folgen<p> und <p>Folge und Cauchyfolgen und Cauchy-Folgen und Folgeerscheinungen und Folgendem"; 
```

以下代码用作将“Folge”替换为“WOW”的文本：

```
strResult = Regex.Replace(strTest, "\\b" + "Folge" + "\\b", "WOW"); 
```

这导致：`"Ein toller Testtext mit WOW und Folgen sowie Folgen<p> und <p>WOW und Cauchyfolgen und Cauchy-Folgen und Folgeerscheinungen und Folgendem"`，这是单个单词的预期结果。

以下代码的结果相同，但使用的是我的对象列表，其中“strWort”是我要替换的单词。注意 listTooltips[39].strWort 的值是“Folge”。

```
strResult = Regex.Replace(strTest, "\\b" + listTooltips[39].strWort + "\\b", "WOW"); 
```

在下一步中，我尝试对整个列表执行此操作。所以我做了以下事情：

```
for (int i = 0; i < listTooltips.Count(); i++)
{
    strResult = Regex.Replace(strTest, "\\b" + listTooltips[i].strWort + "\\b", "WOW");
} 
```

结果是未更改的字符串。我不知道为什么。如前所述，如果我只放置一个单词来替换它确实有效，即使我使用列表中的特定对象。所以我很确定列表的代码没有错，至少不完全。

我尝试过的其他事情：

*   将每个单词的值放入一个单独的字符串中，并将其用于 Regex.Replace。失败的。
*   使用 MessageBox.Show() 显示 listTooltips[i].strWort 的值，以确保所有内容都按预期输出。
*   使用 Regex.Match 检查上面的代码是否真的找到了任何东西，是的，它确实找到了所有东西。由于某种原因，它只是不能取代 ist。
*   不使用正则表达式，而是使用 string.replace-method。这适用于上述循环，但由于缺少过滤器/匹配模式而导致不同的不需要的结果。即“Folgen”被替换为“WOWn”等。

真的想知道为什么这主要是为了更好地理解它。但是我也喜欢 corse 的解决方案:-)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:11:02.643

在您的`for`循环中，您总是`Regex.Replace()`对原始文本执行 a `strTest`。

您需要在 中先前替换的文本上调用它`strResult`，否则每个替换（最后一个除外）都将被原始文本覆盖。

试试这个：

```
string strResult = strTest;
for (int i = 0; i < listTooltips.Count(); i++) {
    strResult = Regex.Replace(strResult , "\\b" + listTooltips[i].strWort + "\\b", "WOW");
} 
```

# c# - 将值输出到 HTML 表

> ID：15286530
> 
> 赞同：0
> 
> 时间：2013-03-08T04:08:15.517
> 
> 标签：c#, html, .net

我知道必须有一种更清洁、更简洁的方法来做到这一点......但我没有任何地方试图谷歌搜索它。基本上，我有一组数据需要写入 HTML 表。

表格看起来像这样（但更长）：

```
            DOB SDLW SDLY WTD LWTD
开始日期： 03/06/2013 02/27/2013 03/07/2012 03/04/2013 02/25/2013
结束日期：2013 年 3 月 6 日 2013 年 2 月 27 日
净销售额 5,661.47 4,876.82 16.1% 5,765.33 -1.8% 13,941.10 13,310.09 4.7%
总销售额 6,499.14 5,549.94 17.1% 6,602.71 -1.6% 16,046.50 15,306.56 4.8%
客人数量 369.00 317.00 16.4% 392.00 -5.9% 920.00 872.00 5.5%
总收入 187.29 102.46 82.8% 163.19 4.8% 499.74 455.82 9.6%
总无效 56.25 51.05 10.2% 131.65 -57.3% 161.05 227.83 -29.3%
```

**副线问题：**

最初我是使用 . 编写的`HtmlTextWriter`，但是不得不`AddAttribute()`为每个调用`<td>`生成大量（嘈杂的）代码。然后我转向包装器，所以我至少可以将一个单元格减少为一行代码：

```
 public string wrapAmntCell(Object input)
    {
        return "<td align=\"right\">" + string.Format("{0:n}", input) + "&nbsp;" + "</td>";
    } 
```

我仍然不是特别*喜欢*，但我至少在我开始的地方有了显着改善。然而...

**大局问题：**

是我通过连接使用 += 语句（畏缩）构建的值字符串来构建这些行，如下所示：

```
string[] finalNet = new string[validSites.Count];
string[] finalGross = new string[validSites.Count];
string[] finalGC = new string[validSites.Count];
string[] finalComp = new string[validSites.Count];
string[] finalVoid = new string[validSites.Count];

foreach (string num in validSites)
{
    //SDLY
    foreach (DataStore sdlyTmp in sdly)
    {
        if (sdlyTmp.siteNumber.Equals(num))
        {
            finalNet[countTD] += wrapAmntCell(sdlyTmp.netSales);
            finalGross[countTD] += wrapAmntCell(sdlyTmp.grossSales);
            finalGC[countTD] += wrapAmntCell(sdlyTmp.guestCount);
            finalComp[countTD] += wrapAmntCell(sdlyTmp.compTotal);
            finalVoid[countTD] += wrapAmntCell(sdlyTmp.voidTotal);

            tmpCol03[0] = sdlyTmp.netSales;
            tmpCol03[1] = sdlyTmp.grossSales;
            tmpCol03[2] = sdlyTmp.guestCount;
            tmpCol03[3] = sdlyTmp.compTotal;
            tmpCol03[4] = sdlyTmp.voidTotal;

            //percentage diff
            finalNet[countTD] += wrapPctCell(getPctDiff(tmpCol01[0], tmpCol03[0]));
            finalGross[countTD] += wrapPctCell(getPctDiff(tmpCol01[1], tmpCol03[1]));
            finalGC[countTD] += wrapPctCell(getPctDiff(tmpCol01[2], tmpCol03[2]));
            finalComp[countTD] += wrapPctCell(getPctDiff(tmpCol01[3], tmpCol03[3]));
            finalVoid[countTD] += wrapPctCell(getPctDiff(tmpCol01[4], tmpCol03[4]));
            //end diffs

            totalsCol03[0] += sdlyTmp.netSales;
            totalsCol03[1] += sdlyTmp.grossSales;
            totalsCol03[2] += sdlyTmp.guestCount;
            totalsCol03[3] += sdlyTmp.compTotal;
            totalsCol03[4] += sdlyTmp.voidTotal;
        }
    }
} 
```

（在写这篇文章时，我意识到我可能会使用一些 .NET 3.5 魔法将我的内部 foreach 和嵌套在其中的 if 语句结合起来；我仍在学习，并且也希望得到这方面的指导）

这些 Col 数组用于百分比差异。

在所有循环结束时，我得到了五个包含完整行的数组，来自`<tr>...</tr>`（每行 19 个数据单元），然后我再次循环返回 foreach 站点（因为信息是按位置存储的，所以 Store1 的数据位于在 finalNet[0]、finalGross[0] 等）并将它们写入`HtmlTextWriter`.

我的部分问题是我的实际数据是垂直存储的（使用包含一个日期的完整列的对象 - 这些值是根据列标题中的日期从 SQL 查询中提取的） - 而它必须水平输出桌子。

但是，我在弄清楚如何清理此代码并保持表格格式不变时遇到了问题。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:27:01.777

我建议您使用诸如[Razor](https://github.com/Antaris/RazorEngine)之类的视图引擎。该项目是开源的，可以在 ASP.Net 运行时之外运行。通过这种方式，您可以将演示文稿（HTML 表格的生成）与数据生成分开。通过这种方式，您可以按照以下方式编写代码。假设您的 SQL 查询中的数据是面向列的（如您所建议的）并且是一个名为`data`

可执行文件中的 C# 代码：

```
var data = ...;

var template = File.ReadAllText("path/to/razor/template.cshtml");
var html = Razor.Parse(template,data); //Bind the SQL data to the HTML 
```

剃刀模板示例：

```
<table>
    @foreach(var row in Model) {
        <tr>
            @foreach(var col in row) {
                <td>@col</td>
            }
        </tr>
    }
</table> 
```

在不了解更多代码的情况下，给你一个更好的例子有点困难，但我认为这应该引导你朝着正确的方向前进

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:21:32.513

我完全同意“红狗”。您应该使用 gridview 控件并将您的 Data 对象作为数据源传递给 gridview。您还可以将 JQGrid 用于客户端脚本。

# html - CSS中是否存在矛盾导致边框保持显示？

> ID：15286531
> 
> 赞同：0
> 
> 时间：2013-03-08T04:08:26.080
> 
> 标签：html, css

我不知道 CSS 中是否存在任何导致`.noborder`无法工作的矛盾：

```
 <table id="tableanswer" cellpadding="0" cellspacing="0">

...

<th width="30%" class="noborder"></th> 
```

CSS：

```
#tableanswer td { 
    border:1px black solid;
    border-collapse:collapse;
}

.noborder td{
    border:0px; 
} 
```

更新：

```
<table id="tableanswer" cellpadding="0" cellspacing="0">

    ...

    <th width="30%" class="noborder"></th>
    <td width="30%" class="noborder"></td> 
```

CSS：

```
 #tableanswer td { 
        border:1px black solid;
        border-collapse:collapse;
    }

#tableanswer td.noborder {
    border:0px; 
}

#tableanswer th.noborder {
    border:0px; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:11:40.107

**更新**

有两个问题。

1) 你想要 "td.noborder" 而不是 ".noborder td" 2) "#{id} td" 比 "td.{classname}" 更强大

所以你需要加强你的选择器

```
#tableanswer td.noborder {
    border:0px; 
} 
```

这是工作代码：http: [//jsfiddle.net/T9GVn/](http://jsfiddle.net/T9GVn/)

**老的**

您的代码有“TH”而不是“TD”。

尝试：

```
.noborder th {
    border:0px; 
} 
```

# java - 使用 Apache Batik 调整 svg 文件大小时出现内存不足

> ID：15286536
> 
> 赞同：1
> 
> 时间：2013-03-08T04:09:04.080
> 
> 标签：java, svg, java-2d, batik

我已经使用以下代码生成了 svg 文件，

```
public class TestSVGGen {

        static BufferedImage img;

        public void paint(SVGGraphics2D g2d) {
                g2d.setPaint(Color.red);
                g2d.fill(new Rectangle(10, 10, 100, 100));
                g2d.drawImage(img, 0, 0, img.getWidth() ,img.getHeight(), null);
                g2d.setSVGCanvasSize(new Dimension(img.getWidth(), img.getHeight()));
        }

        public static void main(String[] args) throws IOException {

                img = ImageIO.read(TestSVGGen.class.getClassLoader().getResourceAsStream("images/test_offscreen.jpg"));

                // Get a DOMImplementation.
                DOMImplementation domImpl = GenericDOMImplementation
                                .getDOMImplementation();

                // Create an instance of org.w3c.dom.Document.
                String svgNS = "http://www.w3.org/2000/svg";
                Document document = domImpl.createDocument(svgNS, "svg", null);

                // Create an instance of the SVG Generator.
                SVGGraphics2D svgGenerator = new SVGGraphics2D(document);

                // Ask the test to render into the SVG Graphics2D implementation.
                TestSVGGen test = new TestSVGGen();
                test.paint(svgGenerator);

                // Finally, stream out SVG to the standard output using
                // UTF-8 encoding.
                boolean useCSS = true; // we want to use CSS style attributes
                File file = new File("image.svg");
                FileOutputStream fos = new FileOutputStream(file);
                Writer out = new OutputStreamWriter(fos, "UTF-8");
                svgGenerator.stream(out, useCSS);

        } 
```

现在，我想将此图像画布的尺寸重新调整为 18,000 * 18000，因为我想将包含的图像重新调整为这个大小，但是每当我尝试以下代码时（仅部分代码）

```
svgCanvas.setSize(new Dimension(18000, 18000)); 
```

程序抛出内存不足异常，

我应该怎么做才能将尺寸调整为指定的大尺寸，是否有任何解决方法，如平铺或分割图像。

我对蜡染很陌生，所以请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T17:03:30.267

**我使用batik 的 contrib 目录中的 TiledImageTranscoderfrom**解决了我的问题，并获得了成功的结果，没有任何内存不足错误。

从 ECLIPSE IDE 运行时，上述类一次仅使用 35 MB 内存，并且在我的机器上需要 30 秒才能将图像文件完全写入磁盘。

结果在 TIFF 中。

# ember.js - 带有主从记录的 Ember.js RC1 路由

> ID：15286541
> 
> 赞同：2
> 
> 时间：2013-03-08T04:09:39.120
> 
> 标签：ember.js, ember-router

我正在尝试构建一个简单的主从 Ember 应用程序，但很难使用最新版本的 Ember 路由模型。我总结了一个例子，它只是一个收藏夹列表和一个（硬编码）属性列表。当用户点击收藏时，他们应该会看到属性列表，仅此而已。没有中间编辑步骤。设置动态模型是最令人困惑的。

我找不到任何与我正在尝试的完全匹配的示例，但这是我最好的选择：

```
App.Router.map(function(){
    this.resource('favorites', {path:'/favorites'}, function(){
        this.route('attribs', {path:'/:fav_id/attribs'});
    });
}); 
```

这个[jsfiddle](http://jsfiddle.net/ayoung/L9HMm/)显示了我现在的位置。由于某种原因，它对单击属性链接根本没有反应，这应该会导致属性模板显示。据我所知，它只需要改变一条线，但我所有的尝试都没有得到结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T18:50:04.437

我可以看到的第一个问题是您`App.AttribsRoute`需要命名`App.FavoritesAttribsRoute`（因为`Attribs`嵌套在 下`Favorites`）。

看起来进行该更改会导致输入该路线-尽管我还无法使该模板呈现。

# java - 为什么千位分隔符称为“分组分隔符”？

> ID：15286545
> 
> 赞同：3
> 
> 时间：2013-03-08T04:10:00.827
> 
> 标签：java, objective-c, locale, number-formatting

在许多编程语言中，千位分隔符（例如，美国字符串“1,000”中的“,”）被称为“分组分隔符”。为什么是这样？

是否有任何现实世界的语言环境可以在其他边界上分隔写入的整数？某个地方的人会写 86,75,30,9 或 8675,309 这样的数字吗？如果是这样，这些语言环境是什么？

今天我在 Objective-C 中遇到了这个问题，当时我不记得常量的名称来查找此分隔符的字符串。我正在输入“NSThou”，但没有自动完成。我不得不去文档提醒你得到它是这样的：

```
NSLocale *loc = [NSLocale currentLocale];
NSString *sep = [loc objectForKey:NSLocaleGroupingSeparator]; 
```

然而，这并不是 Objective-C 特有的。我记得在我以前的 Java 时代，它被称为同一个东西。（Python 人 OTOH 似乎将其称为“[千位分隔符](http://www.python.org/dev/peps/pep-0378/)”。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T04:13:27.000

[维基百科](http://en.wikipedia.org/wiki/Decimal_mark#Digit_grouping)说：

> 例如，在各个国家（例如，中国、印度和日本），存在按 2 位或 4 位数字分组的传统惯例。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T04:16:30.553

很少有像印度及其邻国这样的国家使用千位分隔符来提高可读性，因为只有最后三个被分成三组，其余两个：like

100

1,000

10,000

1,00,000

10,00,000

1,00,00,000

很少有国家遵循 3 组

100,000

100,000,000

* * *

*再加上这一点，您可能会对少数国家用途感到困惑。并且，要表示十进制和千位分隔符，在这里你不能说这个值代表什么，如 10,000 、 10000.00 和 10000,00，因此你需要在要求用户输入数字时设置数字格式的本地化*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-07T06:24:01.683

作为一个中国人，我想我在这个问题上有发言权。

中文数字系统与英文的数字系统有点不同，我们将数字分组为 4，而不是 3。这是因为我们在千、百、十和一之上增加了一个单位万（“万”，万） . 所以1000000英文是一百万，中文是一百个“wan”，所以写成100,0000而不是1,000,000。

另外值得指出的是，许多编程语言在这个问题上都有错误的语言环境实现，例如 Java 的字符串格式。

# php - 识别何时发生更新？

> ID：15286550
> 
> 赞同：1
> 
> 时间：2013-03-08T04:10:35.187
> 
> 标签：php, mysql

我用它在数据库中添加或更新一些东西。

```
$update = mysql_query
("
    INSERT INTO details (id, name, team, cost) 
    VALUES ('$id', '$name', '$team', '$cost') 
    ON DUPLICATE KEY UPDATE cost = '$cost' 
") 
or die (mysql_error()); 
```

基本上，我想做......

如果`$cost`发生变化，将旧值和新值回显到屏幕上，否则什么也不做。

我将如何去做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:39:08.603

首先，您必须在 temp 变量中保持与您的 id 相对应的成本

```
$query        = "SELECT cost FROM details WHERE id = $id";
$resource     = mysql_query($query);
$temp_array   = mysql_fetch_assoc($resource);
$old_cost     = $temp_array['cost']; 
```

现在执行您的操作

mysql_affected_rows 将在 DUPLICATE KEY UPDATE OPERATION 上返回 2

```
$update = mysql_query("
INSERT INTO details (id, name, team, cost) 
VALUES ('$id', '$name', '$team', '$cost') 
ON DUPLICATE KEY UPDATE cost = '$cost' ") 
  or die (mysql_error());
  if(mysql_affected_rows() == 2)
  {
      echo "old cost = $old_cost";
      echo "New Cost : $cost";
   } 
```

试试这个希望它有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:14:03.650

You can use the `mysql_affected_rows()` command, see [mysql_affected_rows](http://php.net/manual/en/function.mysql-affected-rows.php).

Essentially it will tell you how many rows have been updated. Full example:

```
$update = mysql_query
("
    INSERT INTO details (id, name, team, cost) 
    VALUES ('$id', '$name', '$team', '$cost') 
    ON DUPLICATE KEY UPDATE cost = '$cost' 
") 
or die (mysql_error());
if(mysql_affected_rows($update) != 0)
     echo $cost; 
```

In this case, you'd have to define the old cost in $cost (that line is really for you to interpret as you would like). To do this, you would have to use a SELECT before hand.... Perhaps you could check for a duplicate key instead of using the super elegant `ON DUPLICATE KEY`...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T04:24:59.293

我建议使用**PHP 的 PDO**而不是 mysql_* 函数，因为它们已被*正式弃用*，而且**PHP 的 PDO**是一种*更安全且更面向对象的方法*。

→ 有关**PHP 的 PDO 的**更多信息，请访问： http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

话虽如此，**INSERT**语句仅返回**TRUE**或**FALSE**，具体取决于 INSERT 语句是成功完成还是失败。

→ 此外，**mysql_affected_rows()**或**mysql_num_rows()**只会*返回插入/更新的行数，*而**不是**您正在寻找的旧成本。

因此，您需要分两部分执行此操作：

一个）

```
SELECT `cost` 
FROM `details`
WHERE `id` = '$id' 
```

如果为上述查询找到行，则您知道您有重复的 id，并且可以评估`cost`返回的与您拥有的新 $cost。

然后，您可以使用可用的新旧成本来回答您的问题，并且可以：

二）

```
INSERT INTO details (id, name, team, cost) 
VALUES ('$id', '$name', '$team', '$cost') 
ON DUPLICATE KEY UPDATE cost = '$cost' 
```

→ 确保你清理了你正在使用的变量；[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)

→ 或者只使用**PHP 的 PDO**，因为当您将变量绑定到查询时，它会为您清理变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T04:15:12.920

There is, AFAIK, no way to get the old cost after running your query. You will need to do this in two steps. First a select, and then the insert/update.

# c# - 从类返回值

> ID：15286556
> 
> 赞同：0
> 
> 时间：2013-03-08T04:11:25.957
> 
> 标签：c#, partial-classes, sealed

如何从 Sealed Partial 类中的 aa 函数返回值？

我使用这样的用户控件。我有一个用户控件，它调用另一个列表。当我从该列表中选择一行时，我调用 SelectionChanged="RadGrid1_SelectedIndexChanged" 并将我要保存的行保存在模板类型的变量中。（直到这里没有问题）

在主页中我尝试访问该变量时，它总是返回 null。（这里有问题）

用户控件：

```
<UserControl
x:Class="Stuff.Grouping.TableControl"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Stuff.Grouping"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300"
d:DesignWidth="400">

<Grid>
    <SemanticZoom ScrollViewer.HorizontalScrollMode="Disabled" ScrollViewer.VerticalScrollMode="Disabled">
        <SemanticZoom.ZoomedInView>
            <local:GroupingZoomedInView Margin="0 0 30 50"/>
        </SemanticZoom.ZoomedInView>
        <SemanticZoom.ZoomedOutView>
            <GridView Margin="30 30 30 50">
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapGrid Orientation="Horizontal" MaximumRowsOrColumns="7"/>
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>
                <GridView.ItemTemplate>
                    <DataTemplate>
                        <Border Background="#FF3399FF" MinWidth="100" MinHeight="100">
                            <TextBlock Text="{Binding}" FontSize="60" Margin="10"/>
                        </Border>
                    </DataTemplate>
                </GridView.ItemTemplate>
            </GridView>
        </SemanticZoom.ZoomedOutView>
    </SemanticZoom>
</Grid>
</UserControl> 
```

分组ZoomedInView.xaml

```
<UserControl
x:Class="Stuff.Grouping.GroupingZoomedInView"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="using:Stuff.Grouping.Data"
xmlns:telerikGrid="using:Telerik.UI.Xaml.Controls.Grid"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300"
d:DesignWidth="400">

<Grid>
    <Grid.Resources>
        <local:PeopleViewModel x:Key="Model"/>
    </Grid.Resources>
    <telerikGrid:RadDataGrid x:Name="dataGrid" ItemsSource="{Binding Data,Source={StaticResource Model}}" AutoGenerateColumns="False" FontSize="{StaticResource ControlContentThemeFontSize}" SelectionChanged="RadGrid1_SelectedIndexChanged">
        <telerikGrid:RadDataGrid.GroupDescriptors>
            <telerikGrid:DelegateGroupDescriptor>
                <telerikGrid:DelegateGroupDescriptor.KeyLookup>
                    <local:AlpabeticGroupKeyLookup/>
                </telerikGrid:DelegateGroupDescriptor.KeyLookup>
            </telerikGrid:DelegateGroupDescriptor>
        </telerikGrid:RadDataGrid.GroupDescriptors>
        <telerikGrid:RadDataGrid.Columns>
            <telerikGrid:DataGridTextColumn PropertyName="Template"/>
            <telerikGrid:DataGridTextColumn PropertyName="data"/>
            <telerikGrid:DataGridTextColumn PropertyName="info"/>
            <telerikGrid:DataGridTextColumn PropertyName="score"/>
            <telerikGrid:DataGridTextColumn PropertyName="result"/>
            <telerikGrid:DataGridTextColumn PropertyName="repeats"/>
        </telerikGrid:RadDataGrid.Columns>
    </telerikGrid:RadDataGrid>
</Grid>
</UserControl> 
```

GroupingZoomedInView.xaml.cs

```
public sealed partial class GroupingZoomedInView : UserControl, ISemanticZoomInformation
{
    public void RadGrid1_SelectedIndexChanged(object sender, DataGridSelectionChangedEventArgs e)
    {
        template = (Templates)dataGrid.SelectedItem;
    }

    public void StartViewChangeFrom(SemanticZoomLocation source, SemanticZoomLocation destination)
    {
        source.Item = this.dataGrid.GetDataView().Items.OfType<IDataGroup>().Select(c => c.Key);
    }

    public void StartViewChangeTo(SemanticZoomLocation source, SemanticZoomLocation destination)
    {
        var dataview = this.dataGrid.GetDataView();
        var group = dataview.Items.OfType<IDataGroup>().Where(c => c.Key.Equals(source.Item)).FirstOrDefault();

        var lastGroup = dataview.Items.Last() as IDataGroup;
        if (group != null && lastGroup != null)
        {
            this.dataGrid.ScrollItemIntoView(lastGroup.ChildItems[lastGroup.ChildItems.Count - 1], () =>
            {
                this.dataGrid.ScrollItemIntoView(group.ChildItems[0]);
            });
        }
    }

    public Func<Templates> GetTemplateMethod()
    {
        return () => this.template;
    }
} 
```

这里我需要将模板值返回给 MainPage。我怎样才能做到这一点？

```
public MainPage()
{
        GroupingZoomedInView gView = new GroupingZoomedInView();
        Func<Templates> method = gView.GetTemplateMethod();
        Templates temp = method();
 }

 public class Templates(){
    public String filename { get; set; }
    public String data { get; set; }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:12:40.510

你不能从一个类中“返回”一个值。这仅适用于函数。但是，您可以通过多种方式访问​​类中的数据。

**使用公共领域**（有效，但不好的做法）

```
public string template; 
```

**使用公共财产**（更好）

```
public string Template { get; set; } 
```

**使用公共方法**

```
public string GetTemplate()
{
    return this.template;
} 
```

对于此处列出的任何技术，在您的`MainPage`类中，您将只能从方法体内访问模板值。

```
public class MainPage
{
    private GroupingZoomedInView gView;

    public void SomeMethod()
    {
        String temp = gView.GetTemplate();
    }
} 
```

顺便说一句，任何类型的课程都是如此。这个事实是`sealed`或`partial`没有区别。

* * *

**更新**

在评论中，您说您想从函数中返回一个*方法*。在这种情况下，您需要使用上述任何技术，但将返回类型从`string`to更改为`Func<string>`（或一些自定义委托类型，我不会在这里介绍）。

**从成员方法**

```
private string GetTemplate() 
{
    return this.template;
}

public Func<string> GetTemplateMethod()
{
    return new Func<string>(this.GetTemplate);
} 
```

**从 lambda 表达式**

```
private string template;

public Func<string> GetTemplateMethod()
{
    return () => this.template;
} 
```

通过这些技术中的任何一种，`MainPage`您都可以在您的课堂上使用`GetTemplateMethod`这样的方法。

```
public class MainPage
{
    private GroupingZoomedInView gView;

    public void SomeMethod()
    {
        Func<string> method = gView.GetTemplateMethod();
        string temp = method(); // executes the method
    }
} 
```

# php - 无法使用 PHP 脚本连接到 APN

> ID：15286558
> 
> 赞同：2
> 
> 时间：2013-03-08T04:11:36.113
> 
> 标签：php, iphone, ssl, push-notification, apple-push-notifications

我的推送通知有些问题。我已经阅读了大量教程，并提出了下面的脚本。我似乎无法连接到 APN。澄清一下，我没有为应用程序编写应用程序端代码。我只知道 PHP 和其他基于 Web 的语言。

我已经完成了从我的证书和私钥创建 .pem 文件的整个过程。我的网络服务器也有一个 SSL 证书（我是通过我的网络主机提供商完成的，不确定这是否是正确的做法）。我只是不确定究竟要发生什么才能测试一切是否正常。

当我在网页上加载脚本时出现错误：警告：stream_socket_client() [function.stream-socket-client]：无法连接到 ssl://gateway.sandbox.push.apple.com:2195（连接超时）连接失败：110 连接超时

能否请您查看代码并帮助我找出无法连接到 APN 的原因。还有一种方法可以获得更详细的错误报告吗？

这是我的代码：（问题应该在前 15 行左右。）

```
<?PHP
$username = $_GET['username'];
$userIDarr = $_GET['userARR'];
$message = $username.' is d2P';
$passphrase = 'mypass'; // not sure what this refers too.. (from what i have read I think it is meant to be for the iphone side of things)

$apnsHost = 'gateway.sandbox.push.apple.com';
$apnsPort = 2195;
$apnsCert = 'ck.pem';

$streamContext = stream_context_create();
stream_context_set_option($streamContext, 'ssl', 'local_cert', $apnsCert);

// Open a connection to the APNS server
$apns = stream_socket_client('ssl://' . $apnsHost . ':' . $apnsPort, $error, $errorString, 10, STREAM_CLIENT_CONNECT, $streamContext);

if (!$apns)
    exit("Failed to connect: $error $errorString" . PHP_EOL);
echo 'Connected to Apple service. ' . PHP_EOL;

@mysql_connect ("localhost","down2par_down2pa","4m329aMh") or die ("could not connect to MySQL");
@mysql_select_db ("down2par_d2pdb") or die ("no database");

// create array of all device IDs AND badges that will be receiving notifications
$SQLarr = implode(" AND userid =", $userIDarr);
$DB = mysql_query("SELECT diviceID, badge FROM new_fb_users WHERE userid = '$SQLarr'");

while($DBarr = mysql_fetch_array($DB)) {

    $deviceToken = $DBarr['deviceID'];
    $badge = $DBarr['badge'];
    $id = $DBarr['id'];

    mysql_query("UPDATE new_fb_users SET badge = badge+1 WHERE id = $id");

    // create the payload body
    $body['aps'] = array(
        'alert' => $message,
        'sound' => 'default',
        'badge' => ($badge > 0 ? $badge + 1 : 1)
        );
    // Encode the payload as JSON
    $payload = json_encode($body);

    // Build the binary notification
    $msg = chr(0).pack('n', 32).pack('H*', str_replace(' ', '', $deviceToken)).pack('n', strlen($payload)).$payload;
    // Send it to the server
    $result = fwrite($apns, $msg, strlen($msg));
    if (!$result)
        echo 'Failed message'.PHP_EOL;
    else
        echo 'Successful message'.PHP_EOL;
}

// Close the connection to the server
fclose($apns);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:22:50.950

Passphase 是您在创建 p12 文件时输入的密钥。回忆您在导出 p12 文件时输入的内容。有关更多详细信息，请参阅[本教程](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

![参考这个链接](../Images/12aea34e0576fc2f3ca247394d92e8d1.png)

希望这对你有帮助

# python - Python：使用 Excel CSV 文件仅读取某些列和行

> ID：15286560
> 
> 赞同：2
> 
> 时间：2013-03-08T04:11:43.137
> 
> 标签：python, excel, file

虽然我可以读取 csv 文件而不是读取整个文件，但我怎样才能只打印某些行和列？

想象一下，好像这​​是 Excel：

```
 A              B              C                  D                    E
State  |Heart Disease Rate| Stroke Death Rate | HIV Diagnosis Rate |Teen Birth Rate

Alabama     235.5             54.5                 16.7                 18.01

Alaska      147.9             44.3                  3.2                  N/A    

Arizona     152.5             32.7                 11.9                  N/A    

Arkansas    221.8             57.4                 10.2                  N/A    

California  177.9             42.2                  N/A                  N/A    

Colorado    145.3             39                    8.4                 9.25 
```

这是我所拥有的：

```
import csv

try:
    risk = open('riskfactors.csv', 'r', encoding="windows-1252").read() #find the file

except:
    while risk != "riskfactors.csv":  # if the file cant be found if there is an error
    print("Could not open", risk, "file")
    risk = input("\nPlease try to open file again: ")
else:
    with open("riskfactors.csv") as f:
        reader = csv.reader(f, delimiter=' ', quotechar='|')

        data = []
        for row in reader:# Number of rows including the death rates 
            for col in (2,4): # The columns I want read   B and D
                data.append(row)
                data.append(col)
        for item in data:
            print(item) #print the rows and columns 
```

我只需要读取所有统计信息的 B 列和 D 列即可：

```
 A              B                D                    
 State  |Heart Disease Rate| HIV Diagnosis Rate |

 Alabama       235.5             16.7                

  Alaska       147.9             3.2                     

  Arizona      152.5             11.9                     

  Arkansas     221.8             10.2                    

 California    177.9             N/A                     

 Colorado      145.3             8.4 
```

### 已编辑

没有错误

关于如何解决这个问题的任何想法？我尝试的一切都不起作用。非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T05:42:46.000

我希望你听说过 Pandas for Data Analysis。

以下代码将完成读取列的工作，但是关于读取行，您可能需要解释更多。

```
import pandas
io = pandas.read_csv('test.csv',sep=",",usecols=(1,2,4)) # To read 1st,2nd and 4th columns
print io 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T16:03:25.237

如果您仍然卡住，那么您真的没有理由必须使用 CSV 模块读取文件，因为所有 CSV 文件都只是逗号分隔的字符串。所以，对于一些简单的事情，你可以试试这个，它会给你一个表格的元组列表（状态，心脏病率，艾滋病毒诊断率）

```
output = []

f = open( 'riskfactors.csv', 'rU' ) #open the file in read universal mode
for line in f:
    cells = line.split( "," )
    output.append( ( cells[ 0 ], cells[ 1 ], cells[ 3 ] ) ) #since we want the first, second and third column

f.close()

print output 
```

请注意，如果您想进行任何类型的数据分析，您将不得不通过并忽略标题行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T04:24:36.797

试试这个

```
data = []
for row in reader:# Number of rows including the death rates
    data.append([row[1],row[3]) # The columns I want read  B and D
for item in data
            print(item) #print the rows and columns 
```

# c++ - 使用 -fshort-wchar 的含义

> ID：15286568
> 
> 赞同：6
> 
> 时间：2013-03-08T04:12:48.147
> 
> 标签：c++, c, gcc, clang, wchar

在 Mac OS X 系统上浏览文件 wchar.h 时，我发现当未定义 __cplusplust 并且 wchar_t 的最大大小为 2 字节时（通过使用编译器选项 -fshort -wchar)。

似乎对于 C 程序，如果定义了 -fshort-wchar，则不允许使用此类函数。我想知道使用 -fshort-wchar 时使用 wchar_t 函数的含义是什么？

您可能想知道为什么我需要使用 -fshort-wchar。因为，我正在移植一个最初为 Windows 编写的应用程序，其中 wchar_t 的大小为两个字节。保存在 wchar_t 字符串中的数据被写入文件，并且还在两个应用程序之间交换。

什么是处理不同平台上 wchar_t 可变性的好方法？Windows 上的假设是 wchar_t 为 16 位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T05:55:40.467

`-fshort-wchar`如果您想使用正确（32 位）的`wchar_t`. 它可行的情况非常有限，可能主要与独立实现/嵌入式的东西有关。

在移植您正在处理的 Windows 应用程序的情况下，我认为您应该只做一个替换来更改这些用途`wchar_t`（`WCHAR`您可以自由定义）或`char16_t`（由 C11 定义，您可以提供您自己的 C11 之前的定义）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T10:14:18.993

如果我们使用 typedef uint16_t Char;

代码中的字符串文字呢？问题第三方保持不变。这些必须在通过之前转换为 wchar_t(UTF-32_。

# javascript - 在html中放置和调用javascript函数

> ID：15286571
> 
> 赞同：2
> 
> 时间：2013-03-08T04:12:56.893
> 
> 标签：javascript, jquery, html

我是 javascript 的菜鸟，这可能是一个愚蠢的问题，但我编写了一个简单的 javascript 函数来滑动到网页上的特定元素。这是代码：http: [//jsfiddle.net/bhbTr/](http://jsfiddle.net/bhbTr/)

但是，当我尝试将 javascript 和 html 放在一个 html 文件中时，它似乎不起作用。这是我所拥有的：

```
<head>
    <title>Test</title>
    <link rel='stylesheet' id='css' href='style1.css' type='text/css' media='all'>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
<script type="text/javascript">>
    function goToByScroll(id){
          // Remove "link" from the ID
            id = id.replace("link", "");
            var off = $("#"+id).offset().top - 50;
          // Scroll
            $('html,body').animate({
                scrollTop: off},
                'slow');
        }

    $("#navbar > ul > li > a").click(function(e) { 
          // Prevent a page reload when a link is pressed
            e.preventDefault(); 
          // Call the scroll function
        goToByScroll($(this).attr("id"));           
        });

    $("#navbar > a").click(function(e) { 
          // Prevent a page reload when a link is pressed
            e.preventDefault(); 
          // Call the scroll function
            goToByScroll($(this).attr("id"));           
        });
</script>
</head>

<body>
    <!-- Begin Wrapper -->
    <div id="wrapper">
        <div class="navbar" id="navbar">
            <a href="#" id="WhoWeArelink" class="navbarlogo">Test</a>
            <ul>
                <li><a id = "WhoWeArelink" href="#">Who We Are</a></li>
                <li><a id = "WhatWeDolink" href="#">What We do</a></li>
                <li><a id = "OurWorklink" href="#">Our Work</a></li>
                <li><a id = "Contactlink" href="#">Contact Us</a></li>
            </ul>
        </div>
        <div class="contentcontainer">
            <div class="WhoWeAre" id="WhoWeAre">
                <p class="header">uck</p>
                <p class="info">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            </div>
            <div class="WhatWeDo"id="WhatWeDo">
                <p class = "header">Projects</p>
                <p class="info">Projects</p>
            </div>
            <div class="OurWork" id="OurWork">
                <p class = "header">Resume</p>
                <p class="info">Resume</p>
            </div>
            <div class="Contact" id="Contact">
                <p class = "header">Contact</p>
                <p class="info">Contact</p>
            </div>
        </div>
</div>
<!-- End Wrapper -->
<!-- Begin Footer -->
<div class="footer">
        <p style="text-align:center;">Some bullshit copyright (c) insert year here</p>
</div>
<!-- End Footer -->
</body> 
```

我不知道我做错了什么，但我怀疑这与链接没有调用的函数有关。如果有人有任何建议，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:21:42.727

你需要做两件事。首先，取下第二个脚本标签上的额外右括号。

其次，包装您的 JavaScript 代码，使其在准备好文档时执行。您正在使用 jQuery，因此请使用以下代码片段：

```
<script type="text/javascript">
$(function() {
    function goToByScroll(id){
        // Remove "link" from the ID
        id = id.replace("link", "");
        var off = $("#"+id).offset().top - 50;
        // Scroll
        $('html,body').animate({
            scrollTop: off},
            'slow');
    }

    $("#navbar > ul > li > a").click(function(e) { 
        // Prevent a page reload when a link is pressed
        e.preventDefault(); 
        // Call the scroll function
        goToByScroll($(this).attr("id"));           
    });

    $("#navbar > a").click(function(e) { 
        // Prevent a page reload when a link is pressed
        e.preventDefault(); 
        // Call the scroll function
        goToByScroll($(this).attr("id"));           
    });
});
</script> 
```

还有一些建议我必须改进您的代码。我会保持简单并处理这两件事。

首先，您可以将点击处理程序与单个逗号分隔的选择器结合起来。其次，您可以使用 this.id 从 click 函数中的元素中获取 id，无需使用 jQuery 函数访问 id 属性，它可以`this`在 click 处理程序中关键字代表的 HTML 元素上使用。

```
$("#navbar > ul > li > a, #navbar > a").click(function(e) { 
    // Prevent a page reload when a link is pressed
    e.preventDefault();
    // Call the scroll function
    goToByScroll(this.id);
}); 
```

我分叉了你的 jsFiddle 来演示 JavaScript 更改（没有修复脚本标签）：[jsFiddle](http://jsfiddle.net/willslab/457ab/1/)

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:20:02.460

```
<script type="text/javascript">> 
```

最后你有一个额外的尖括号。

# android - Android - SQLite 不插入行

> ID：15286574
> 
> 赞同：1
> 
> 时间：2013-03-08T04:13:09.207
> 
> 标签：android, sqlite

我正在尝试获取一个`CSV`文件并将该数据导入 Android 的`SQLite3`. 该应用程序运行良好，没有任何`SQLite`错误`LogCat`。我不确定为什么没有输入数据。我确保程序实际上`execSQL`通过故意`SQLite`在插入命令中导致语法错误来尝试进行插入，并且它出现在`LogCat`. 所以它确实找到了`CSV`文件并且确实到达了 insert `execSQL`。我只是不确定为什么它没有插入。

```
private static final String CREATE_TABLE_MOVIES = "CREATE TABLE movies (_id integer primary key autoincrement, title text not null, year integer not null, director text not null);";

public DbAdapter(Context ctx){
    super(ctx, DATABASE_NAME, null, DATABASE_VERSION);
    mContext = ctx;
    this.mDb = getWritableDatabase();
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(CREATE_TABLE_MOVIES);

    try {
        BufferedReader in = new BufferedReader(new InputStreamReader(mContext.getAssets().open("movies.csv")));
        String line;

        while((line = in.readLine()) !=null) {
            String[] RowData = line.split(",");

            moviesID = RowData[0];
            moviesTitle = RowData[1];
            moviesYear = RowData[2];
            moviesDirector = RowData[3];
            db.execSQL("insert into movies(_id, title, year, director) values(" + moviesID + ", '" + moviesTitle + "', " + moviesYear + ", '" + moviesDirector + "');");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T04:19:14.283

既然你创建表说它`_id`是**自动递增**的，你为什么要插入它？

尝试这样的事情： -

```
db.execSQL("insert into movies(title, year, director) values(" + "'" + moviesTitle + "', " + moviesYear + ", '" + moviesDirector + "');"); 
```

where`_id`从`insert query`.

# python - How come these Python codes perform so much differently

> ID：15286582
> 
> 赞同：11
> 
> 时间：2013-03-08T04:13:31.950
> 
> 标签：python, performance, python-2.7, time, josephus

Please look at the following code to solve the same set of problem, I do not think that mentioning the problem would anyhow help the purpose, it's yet another iteration of the [Josephus problem](http://en.wikipedia.org/wiki/Josephus_problem):

Solution 1:

```
import sys
from math import log

cases= int(sys.stdin.readline())
current= 0
while current < cases:
    current += 1
    n = int(sys.stdin.readline())
    print 2*(n - 2**(int(log(n,2))))+1 
```

This solution solves the given 10 test cases in cumulative 1.0912 seconds and consumes 4360KiB of memory.

Solution 2:

```
def josephus_2( n ):
    from math import log
    return 2*(n - 2**(int(log(n,2))))+1

import sys
cases= int(sys.stdin.readline())
current= 0
while current < cases:
    current += 1
    n = int(sys.stdin.readline())
    print josephus_2( n ) 
```

this solution solves the same 10 test cases in a total of 1.0497 seconds and 640KiB of memory.

Being a Python n00b I was wondering, while according to the online judge I earn same points for both, but what makes the solution 2 more faster than 1 and much more memory efficient? I know that the time difference can sound very less, but at the same time ranks me first on the fastest solution, even faster than c/c++/perl submissions

[Can this Screenshot help?](http://i.imgur.com/wsF8riO.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:50:58.160

在我以前的经验中，我记得我发现有时将计算部分放在函数（方法）中可能会提高性能：
我刚刚重新体验了使用以下简单代码：

```
n = 1000000
def compute(n):
    j = 0
    for i in xrange(n):
        j += 1

tic()
compute(n)
toc()

>>> 0.271 s

tic()
j = 0
for i in xrange(n):
    j += 1
toc()

>>> 0.849 s 
```

结果显示第一个（使用计算）为 0.271 秒，而内联代码为 0.849 秒。这是显着的改进，而无需更改主要计算部分的任何内容！所以重点是使用一种方法可以提高性能。

以下是您可用于性能比较的代码：

```
from __future__ import division
from time import clock

def compute(n):
    j = 0
    for i in xrange(n):
        j += 1

n = 1000000
print 'solution (2) using a method call...'
t0 = clock()
compute(n)
print clock()-t0
#>>> ~0.2415...                              #faster (solution 2)

print 'solution (1) all inline code...'
t0 = clock()
j = 0
for i in xrange(n):
    j += 1
print clock()-t0
#>>> ~0.6169...                              #slower (solution 1) 
```

# javascript - 在 Opera 和 Chrome 中隐藏/显示 SWF 对象会重新启动 SWF

> ID：15286585
> 
> 赞同：1
> 
> 时间：2013-03-08T04:13:48.353
> 
> 标签：javascript, html, flash

例如，隐藏一个简单的 youtube`<object>`嵌入

```
document.getElementById('youtube').style.display = 'block';
document.getElementById('youtube').style.display = 'none'; 
```

强制 SWF 重新启动。

为什么会这样？有谁知道周围的方法吗？

我在 tabbed 中使用自定义 Flash 上传器`<div>`，切换选项卡会重置上传器，导致文件选择也被重置...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:17:56.533

当您将 display 设置为 时`none`，它实际上已从页面中删除。虽然这不适用于 DOM，但对于浏览器的实现来说可能是正确的。

特别是对于 Flash，我注意到如果它不可见，它就不会一直运行。如果您需要它继续运行，请尝试将其大小设置为 1x1 或将其移出屏幕。

# angularjs - 如何以角度将依赖项注入module.config（configFn）

> ID：15286588
> 
> 赞同：75
> 
> 时间：2013-03-08T04:13:59.373
> 
> 标签：angularjs

`$routeProvider`在 Angular 中，我们可以注入`config`函数

```
module.config(function ($routeProvider) {

}); 
```

我想将我的服务注入其中

```
module.config(function ($routeProvider, myService) {

}); 
```

我确信服务定义正确，但它会抛出一个异常`unknown myService`，当我注入时会抛出一个异常

```
module.config(function ($routeProvider, $http) {

}); 
```

它仍然说`unknown $http`。

你知道为什么吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-03-08T05:01:15.423

从[模块](http://docs.angularjs.org/guide/module)页面，“模块加载和依赖项”部分：

> **配置块**- 在提供者注册和配置阶段执行。只有提供者和常量可以注入到配置块中。这是为了防止在完全配置之前意外实例化服务。
> 
> **运行块**- 在创建注入器后执行并用于启动应用程序。只有实例和常量可以注入运行块。这是为了防止在应用程序运行时进行进一步的系统配置。

所以你不能将你自己的服务，或者像 $http 这样的内置服务注入到 config() 中。使用[run()](http://docs.angularjs.org/api/angular.Module#run)代替。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-07-24T23:54:55.947

我没有足够的声誉发表评论，但想补充马克的回答。

您可以自己注册提供者。它们基本上是带有`$get`方法的对象（或构造函数）。当您注册提供者时，它的标准版本可以像服务或工厂一样使用，但提供者版本可以更早使用。所以`grumpy`注册为的提供者

```
angular.module('...', [])
    .provider('grumpy', GrumpyProviderObject) 
```

然后在配置函数中可用

```
 .config(['grumpyProvider', ..., function (grumpyProvider, ...) { ... }]) 
```

并且可以简单地注入到控制器中

```
 .controller('myController', ['grumpy', ..., function (grumpy, ...) { ... }]) 
```

`grumpy`注入的对象`myController`只是`$get`在`GrumpyProviderObject`. 请注意，您注册的提供者也可以是常规的 JavaScript 构造函数。

**注意：**根据@Problematic 的评论，提供程序初始化（调用`angular.module().provider(…)`必须在配置函数可用之前进行。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-08-07T16:54:28.163

你可以这样做：

```
(function() {
    'use strict';

    angular.module('name', name).config(config);
    // You can do this:
    config.$inject = ['$routeProvider', 'myService'];

    function config($routeProvider, myService) {
        // Or better to use this, but you need to use ng-annotate:
        /* ngInject */

    }
}); 
```

这是[此处描述的最佳实践](https://github.com/johnpapa/angular-styleguide/blob/master/README.md#style-y091)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-17T04:38:47.793

您可以手动调用[`angular.injector`](https://docs.angularjs.org/api/ng/function/angular.injector)以访问在您的应用程序块期间*没有依赖关系的服务。*`.config()`如果您创建的服务没有任何需要遍历的依赖项，那么您可以使用这个：

```
angular.module('myApp').config(function () {
    var myService = angular.injector(['ng']).get('myService');
}); 
```

这也适用于其他简单的服务，例如`$http`：

```
angular.module('myApp').config(function () {
    var http = angular.injector(['ng']).get('$http');
}); 
```

注意：通常您不需要在配置阶段注入服务，最好创建一个允许配置的提供程序。文档说，此功能在 3rd 方库需要访问已经运行的 Angular 应用程序的注入器的情况下公开。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-12-04T09:36:41.343

如果您想注入依赖项（比如说来自服务）以在路由（.config）中调用函数表单，如下所示**templateProvider.getTemplate('about')**

```
.state('index.about', {  

    url: "/about",  
    templateUrl: templateProvider.getTemplate('about'),  
    controller: 'AboutCtrl',  
    controllerAs: 'about',  
    data: {pageTitle: 'About Us Page'}  

}) 
```

**您必须创建一个提供者。不是服务也不是工厂。**

这是一个从名称生成模板路径的 Provider 的真实示例：

```
(function () {  

    'use strict';  
    angular  

        .module('mega-app')  

        .provider('template', provider);  

      function provider(CONSTANT) {  

        // The provider must include a $get() method This $get() method  
        // will be invoked using $injector.invoke() and can therefore use  
        // dependency-injection.  
       this.$get = function () {  

            return {}  

        };  
       /**  
         * generates template path from it's name  
         *  
         * @param name  
         * @returns {string}  
         */  
       this.getTemplate = function (name) {  

            return CONSTANT.TEMPLATES_URL + name + '/' + name + '.html';  
        }  

        /**  
         * generates component path from it's name  
         * @param name  
         * @returns {string}  
         */  
       this.getComponent = function (name) {  

            return CONSTANT.COMPONENTS_URL + name + '.html';  
        }  

    };  
})(); 
```

此类 Provider 在路由 (.config) 中的用法如下：

```
(function () {  

    'use strict';  
    angular  

        .module('mega-app')  

        .config(routes);  
   function routes($stateProvider, $urlRouterProvider, templateProvider) {  

       $stateProvider  
            //----------------------------------------------------------------  
            // First State  
            //----------------------------------------------------------------  
            .state('index', {  

                abstract: true,  
                url: "/index",  
                templateUrl: templateProvider.getComponent('content'),  
                controller: 'IndexCtrl',  
                controllerAs: 'index',  
            })  

            //----------------------------------------------------------------  
            // State  
            //----------------------------------------------------------------  
            .state('index.home', {  

                url: "/home",  
                templateUrl: templateProvider.getTemplate('home'),  
                controller: 'HomeCtrl',  
                controllerAs: 'home',  
                data: {pageTitle: 'Home Page'}  

            })  

            //----------------------------------------------------------------  
            // State  
            //----------------------------------------------------------------  
            .state('index.about', {  

                url: "/about",  
                templateUrl: templateProvider.getTemplate('about'),  
                controller: 'AboutCtrl',  
                controllerAs: 'about',  
                data: {pageTitle: 'About Us Page'}  

            })  

        //----------------------------------------------------------------  
        // Default State  
        //----------------------------------------------------------------  
       $urlRouterProvider.otherwise('/index/home');  
    };  
})(); 
```

**贵宾注意事项：**

要注入提供程序，您必须使用 xxxProvider 对其进行后缀（该提供程序的名称不应后缀，仅在 .config 中注入时）。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2016-07-27T13:00:37.340

如果它可以让你们中的一些人更容易。

根据[这个答案中的解释](https://stackoverflow.com/a/26408752/1132522)，您可以附加`Provider`到您的自定义服务，然后使用`$get()`.

它可能不是最干净的解决方案，但它可以完成工作。

```
module.config(function ($routeProvider, myServiceProvider) {
 // Call a function hello() on myService.
 myServiceProvider.$get().hello();
}); 
```

* * *

## 回答 #7

> 赞同：-15
> 
> 时间：2015-02-02T00:49:36.473

你可以试试这个：

```
module.config(['$routeProvider', '$http', function ($routeProvider, $http) {}]); 
```

# ruby-on-rails - has_many :through, 3 way join

> ID：15286596
> 
> 赞同：2
> 
> 时间：2013-03-08T04:14:23.233
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, has-many-through

I have a Play that has many CostumedActors. A CostumedActor is a join of Actors and Costumes which have a many to many relationship.

This seems to be a pattern that should be quite common, but I'm not clear about the best way to do it in rails.

I have currently set it up as a 3-way join association as follows:

```
class Play < ActiveRecord::Base
  has_many :costumed_actors
  has_many :actors, :through => costumed_actors
  has_many :costumes,:through => costumed_actors
end

class CostumedActor < ActiveRecord::Base
  belongs_to :play
  belongs_to :costume
  belongs_to :actor
end

class Costume < ActiveRecord::Base
  has_many :actors, :through => costumed_actors
  has_many :plays, :through => costumed_actors
end

class Actor < ActiveRecord::Base
  has_many :costumes, :through => costumed_actors
  has_many :plays, :through => costumed_actors
end 
```

Rails doesn't handle this perfectly. If I want to see the actors or costumes in a play, no problem:

```
play.costumes
play.actors 
```

But if I want to see which costume an actor wears, I can't do

```
play.actors.costumes 
```

In this case the .costumes gives me all the costumes each actor wears, across all plays, not just the current one.

I have to do something like:

```
play.costumed_actors.where(:actor => @actor).map {|x| x.costumes} 
```

or more cleanly, by adding a helper method to the has_many :through association

```
class Play
  has_many :costumes, :through => costumed_actors do
    def for_actor(actor)
      where("costumed_actors.actor_id = ?", actor) if !actor.nil?
    end
  end
end

play.costumes.for_actor(@actor) 
```

Also, adding associations doesn't work correctly. I'd like to be able to do something like

```
Play.actors << actor.with_costume(costume) 
```

But I can't see how to phase an association helper method, or even if that approach is possible.

Is this the best way to represent this scenario, and if so is this the best way to read/write the associated records?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:28:40.600

尝试这个：

```
class Play
  has_many :actors_costumes, :through => :actors, :source => :costumes
end 
```

您可以通过以下方式获得演员服装：

```
play.actors_costumes 
```

# google-chrome - customizing gyp and gypi files of chromium source code to add a new file

> ID：15286605
> 
> 赞同：6
> 
> 时间：2013-03-08T04:15:14.477
> 
> 标签：google-chrome, chromium

I am new to chromium source code. I have few doubt regarding chromium source code make files(gyp, gypi).

1) what is the difference between `.gyp` and `.gypi` files?

```
./Source/WebCore/WebCore.gyp/WebCore.gyp
./Source/WebCore/WebCore.gyp/gyp/WebCore.gypi 
```

2) How can i check which file is compiling for linux/mac/windows chromium code. Because when i check the file in `.gyp` file i show that it list almost all the files of webcore for mac/linux/android/ etc.

above doubt is killing me:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-18T04:31:35.920

按照惯例，包含的文件具有后缀 .gypi（gyp 包含）。一个 .gyp 文件可能在其包含字段中包含多个 .gypi 文件。像这儿：

```
 'includes': [
    '../build/win/precompile.gypi',
    '../build/features.gypi',
    '../build/scripts/scripts.gypi',
    '../modules/modules.gypi',
    '../bindings/bindings.gypi',
    'core.gypi',
  ], 
```

要找出正在为您的平台编译的代码，您可以检查代码中的条件，如下所示：

```
 ['OS=="win"', {
      # In generated bindings code: 'switch contains default but no case'.
      # Disable c4267 warnings until we fix size_t to int truncations.
      'msvs_disabled_warnings': [ 4065, 4267 ],

    'include_dirs': [
      '<@(webcore_include_dirs)',
      '<(DEPTH)/gpu',
      '<(angle_path)/include',
    ], 
```

# c++ - replace string at pos with char c++

> ID：15286606
> 
> 赞同：0
> 
> 时间：2013-03-08T04:15:16.777
> 
> 标签：c++, string, replace, char

I am trying to replace a substring of length 1 with a char - but obviously I cannot just stick a char in there. Can I do this on the fly? As in:

```
for (int j=0; j <= startword.size(); j++) { 
    for (char i='a'; i < 'z'; i++) {
        choices.add(startword.replace(j, 1, string(i)); 
```

(but obviously not like that!)

Thanks for your help, this answer is not yet explicit on stackoverflow for c++ (I think only for java). Please excuse some n00bishness here, I am really giving it everything I promise.

Tyler

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:00:35.390

好吧，在 C++ 中，字符串是可变的，您可以使用数组运算符：

```
for (int j=0; j < startword.size(); j++) 
{ 
    for (char i='a'; i < 'z'; i++) 
    {
        string newChoice = startword;
        newChoice[j] = i;
        choices.add(newChoice);
    }
} 
```

编辑：无法索引`newChoice[startWord.size()]`；更改了 for 循环条件。

你也可以这样做（如果`startword`很长可能有用）：

```
for (unsigned j=0; j < startword.size(); j++) 
{ 
    char saveChar = startword[j];
    for (char i='a'; i <= 'z'; i++) 
    {
        startword[j] = i;
        choices.add(startword);
    }
    startword[j] = saveChar;
} 
```

# php - 在php中将所有下划线连接的字母转换为大写

> ID：15286610
> 
> 赞同：-4
> 
> 时间：2013-03-08T04:15:29.040
> 
> 标签：php, regex, camelcasing

我有一个像“kp_o_zmq_k”这样的字符串，我需要将它转换为“kpOZmqK”，我需要将连接到下划线右侧的所有字母（在这种情况下为o，z，k）转换为大写。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T04:21:52.317

```
<?php
function underscore2Camelcase($str) {
  // Split string in words.
  $words = explode('_', strtolower($str));

  $return = '';
  foreach ($words as $word) {
    $return .= ucfirst(trim($word));
  }

  return $return;
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T04:34:48.683

尝试在 php 中使用[preg_replace_callback函数。](http://php.net/manual/fr/function.preg-replace-callback.php)

```
$ptn = "/_[a-z]?/";
$str = "kp_o_zmq_k";
$result = preg_replace_callback($ptn,"callbackhandler",$str);
// print the result
echo $result;

function callbackhandler($matches) {
    return strtoupper(ltrim($matches[0], "_"));
} 
```

# c - 将指针的内容复制到另一个

> ID：15286613
> 
> 赞同：0
> 
> 时间：2013-03-08T04:15:35.787
> 
> 标签：c

```
#include<stdio.h>
#include<malloc.h>
void my_strcpy(char *sour,char *dest){
 if(sour == NULL || dest == NULL){
  return;
 }
 dest = sour;
}
int main(){
 char *d = NULL;
 char *s = "Angus Declan R";
 //d = malloc(sizeof(strlen(s)+1));
 //my_strcpy(s,d);
 d = s;
 printf("\n %s \n",d);
 return 0;
} 
```

在这个我试图使指针“d”指向“s”所指向的位置。为什么它不指向该位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:17:43.420

C 是一种按值传递的语言。 [C FAQ的这个](http://c-faq.com/ptrs/passptrinit.html)问题可以回答你的问题。请注意，即使您修复了函数原型，您的算法也根本不会复制字符串 - 只是一个指针。您可以将该调用替换为：

```
d = s; 
```

在你的`main`功能中。这`malloc`也是不必要的 - 你只是在泄漏它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T04:17:26.283

这是因为`c`语言是按价值传递的。而是传递指针的地址。

```
void my_strcpy(char *sour,char **dest)
// Condition checking and then do -
    *dest = sour ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T06:05:49.543

这里 *d 和 *s 是两个指针，您只是复制存储在 s 指针中的地址，该指针指向一个数组并且数组包含“Angus Declan R”，**d 不能指向该地址**

当你声明/定义像

int *s="安格斯·德克兰 R"; ---> 最初在代码段（这是只读区域）中创建了一个数组，并且 s 现在指向该数组的基地址。即使你不能直接使用 *su 访问字符串，只有选项打印/访问使用地址。

**唯一的原因是在内存的代码段区域中创建的数组。**

这里 %s 通过使用基地址打印值/字符串/字符，直到遇到空值。malloc 是不必要的，在 void my_strcpy() dest = sour; 也是不必要的。就像 d=s; .

如果解释不好，请原谅。

# php - how to write full text search in codeigniter

> ID：15286615
> 
> 赞同：1
> 
> 时间：2013-03-08T04:15:53.367
> 
> 标签：php, mysql, codeigniter

i have written a method and model for keyword search. But unfortunately I am getting the output which are matched with my keyword and also which does not have any match with the keyword I typed.

Here is My Code:

**controller.php :**

```
 function suggestions()
{
        $this->load->model('Booksmodel');
        $term = $this->input->post('term',TRUE); 
        $rows = $this->Booksmodel->GetAutocomplete(array('keyword' => $term)); 
        $json_array = array();
        foreach ($rows as $row) 
        array_push($json_array, $row->book_title);
        array_push($json_array, $row->auth_firstname);
        array_push($json_array, $row->isbn);  

        echo json_encode($json_array);
} 
```

Please help me.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T06:44:59.767

试试这个（在函数中添加了另一个参数，无`'like'`）：

```
 function GetAutocomplete($options = array())
  { 
    $this->load->database();   
    $this->db->limit('10');  
    $this->db->select('book_title,auth_firstname,isbn,auth_lastname,publisher_name');    
    $this->db->like('book_title', $options['keyword'], 'none');
    $this->db->or_like('auth_firstname', $options['keyword'], 'none'); 
    $this->db->or_like('isbn', $options['keyword'], 'none');
    $this->db->or_like('auth_lastname', $options['keyword'], 'none');
    $this->db->or_like('publisher_name', $options['keyword'], 'none'); 

    $query = $this->db->get('bookdetails');
      return $query->result();
    } 
```

'none' 将阻止它`%`在类似函数中使用通配符 ( )。

# java - 如何从预定义的相机应用程序中过滤用户安装的相机应用程序

> ID：15286618
> 
> 赞同：0
> 
> 时间：2013-03-08T04:16:13.493
> 
> 标签：java, android

这是我的一段代码

```
Intent cameraintent= new Intent();
cameraintent.setAction(Intent.ACTION_CAMERA_BUTTON);
cameraintent.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_CAMERA));
sendOrderedBroadcast(cameraintent, null); 
```

但它列出了所有相机应用程序。我想过滤它。还有另一个问题，我需要实现依赖于操作系统的相机的全部功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:28:30.507

您可以使用两种主要形式的意图。

**显式意图**指定了一个组件（通过 setComponent(ComponentName) 或 setClass(Context, Class)），它提供了要运行的确切类。通常这些不会包含任何其他信息，只是作为应用程序在用户与应用程序交互时启动其具有的各种内部活动的一种方式。

**隐式意图**没有指定组件；相反，它们必须包含足够的信息，以便系统确定哪些可用组件最适合为该意图运行。

因此，您可以使用显式意图。

```
intent.setComponent(new ComponentName("com.android.camera", "com.android.camera.CameraButtonIntentReceiver")); 
```

这将确保将意图传递给默认的相机应用程序。

# grammar - 语法 && LL 解析器

> ID：15286626
> 
> 赞同：0
> 
> 时间：2013-03-08T04:16:46.697
> 
> 标签：grammar, ll

所以我有一个家庭作业，我花了 2 多个小时试图找出为什么这个语法不适用于 LL 解析器：

```
<A> → a <B>
<A> → a b <C>
<B> → b d <D>
<C> → d <E>
<D> → m n
<E> → x y 
```

有人可以指出我正确的方向吗？我知道 LL 可能被绊倒的一种方式是，如果它陷入无限循环，我不相信它在这里会发生。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T14:52:30.147

我认为 LL Parser 你的意思是 LL(1) 解析器（一个 LL Parser，前瞻为 1）

对于 LL(1) 解析器可以解析的文法，它必须是 LL(1)。语法必须遵守一些事情才能成为 LL(1)，如果它破坏了其中之一，则称为 LL(1) 冲突。

*   **第一次/第一次冲突：**

    对于每个非终结符，每个产生式都必须有一个不相交的 FIRST 集。（FIRST 集是可以从主语派生的句子开始的所有终结符的集合。）

    EG：在你上面的例子中，非终端有两个产生：

    ```
    <A> -> a <B>
    <A> -> a b <C> 
    ```

    每个作品的第一组如下：

    ```
    FIRST(a <B>) = {a}
    FIRST(a b <C>) = {a} 
    ```

    你可以很清楚地看到这两组相交。这是一个问题，因为在 LL 解析器中，如果到达 A 在堆栈上的点，并且要读取的下一个符号是 'a'，那么解析器不知道是选择`<A> -> a <B>`还是`<A> -> a b <C>`。

*   **FIRST/FOLLOW 冲突：**

    这发生在，对于特定的非终端`A`；`FOLLOW(A)`和`FIRST(A)`相交`A`是`NULLABLE`。您的示例中没有出现这种特殊的冲突。

有关 FIRST、FOLLOW 和 NULLABLE 的更多详细信息，我会

有关这些冲突的更多详细信息以及一些示例，请参阅[有关 LL(1) Conflicts 的 Wikipedia 页面](http://en.wikipedia.org/wiki/LL_parser#LL.281.29_Conflicts)。

# regex - 字符串 abxba 的正则表达式

> ID：15286632
> 
> 赞同：1
> 
> 时间：2013-03-08T04:17:37.527
> 
> 标签：regex

我需要为自学期间在一些讲义中发现的问题编写一个正则表达式。此正则表达式匹配 abxba 形式的字符串，其中 x 是不包含 ba 作为子字符串的 a、b 和 c 的字符串。到目前为止我所拥有的是`^ab(a+c+b+|a+b+c+|b+c+a+|c+a+b+)ba$`，但它显然是不完整的。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:37:45.370

你可以试试这个

```
^ab(?!.*ba.*ba$)(?=.*a.*ba$)(?=.*b.*ba$)(?=.*c.*ba$)[abc]+ba$
    ----------- ------------
         |           |->match further only if there's atleast 1 a
         |->match further only if there's no ba 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:28:27.070

你必须写一个正则表达式吗？您可以只使用`^ab([a-c]*)ba$`抓住字符串的中间并在中间运行一些检查，例如确保它至少包含一个 a、b 和 c，并确保它不包含 ba。

编辑：更好的是，您可以完全跳过正则表达式，只需执行上述所有检查，添加检查以确保它以 ab 开头并以 ba 结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:31:14.997

我使用负前瞻尝试了这个正则表达式：

```
^ab(a|b(?!a)|c)+ba$ 
```

它匹配这个字符串`abbcabcabbbbcccaaaaaaba`但不匹配这个：`abbcabcabbabbcccaaaaaaba`

# list - Word 2010 从多级列表中创建目录

> ID：15286633
> 
> 赞同：3
> 
> 时间：2013-03-08T04:17:39.457
> 
> 标签：list, ms-word, multi-level, tableofcontents

我有一个 50 页的 word 文档，它是一个巨大的多级列表（所有相同的列表——在最深的时候下降了大约 7 个级别）。我需要使用前 3 个级别从列表中创建一个自动 TOC，但是我不知道该怎么做，因为 TOC 似乎只适用于“标题”样式。我什至不能在列表项上应用标题样式，因为它在应用样式时会将其从列表中删除。有什么方法可以自动从多级列表中创建目录？也许宏可以将其转换为单词可以读取的内容，但我仍然想不出该怎么做，因为标题样式在应用时会删除列表项。任何人都知道如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-14T08:14:29.263

好的，我找到了一个简单的方法来做到这一点。

1.  单击您的顶级数字/符号
2.  “定义新的多级列表”
3.  点击“更多>>”
4.  单击您的顶级行，然后单击“将级别链接到样式”
5.  选择“标题1”或者你自己的自定义样式，我不在乎
6.  好的
7.  参考 > 目录 > 插入目录
8.  显示级别：1
9.  选项... > 从可用样式中将“1”放在您在列表中使用的样式旁边
10.  好的，好的，瞧！你有一个来自所有顶层的列表，或者你选择的任何级别，内容！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:59:27.410

您应该能够创建样式，例如和`list1`，它们都是列表样式，并且它们的标题级别设置为 1、2 和 3，然后将这些样式应用于列表中嵌套的前三个级别的元素。然后 ToC 生成应该起作用。`list2``list3`

顺便说一句，这与 Stack Overflow 无关。您最好在[http://www.superuser.com](http://www.superuser.com)上询问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T23:59:18.413

对于其他有这个问题的人，我无法获得一种完全自动化的方式来做到这一点，但我创建了 3 种新样式，并且必须将这些样式应用于我想要在 TOC 中的每一行。然后在添加 TOC 后，我编辑了它的参数以在 1、2、3 位置使用我的新样式。

# text-extraction - 提取具有确切字符串数的行

> ID：15286637
> 
> 赞同：0
> 
> 时间：2013-03-08T04:17:47.453
> 
> 标签：text-extraction

我想从包含确切字符数的文本文件中提取行。我尝试了 colrm 但它没有达到我想要的结果并且排除了非字母数字符号。任何人都可以使用 sed 来做到这一点吗？我是 sed 的新手，但我仍在阅读……感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:37:40.727

这是一个运行它的测试文件，我称该文件为“test”：

```
1
11
123
1234
12345
55555
123456
666666 
```

# grep

要仅打印 5 个字符的行，请使用以下命令

```
cat test | grep '^.\{5\}$' 
```

结果：

```
12345
55555 
```

在命令行上，您需要转义大括号，

# sed

```
cat test | sed '/^.\{5\}$/!d' 
```

在 sed 中，它使用与上面相同的正则表达式，但`/!d`告诉 sed 不要删除与此匹配的行。结果将与上面的两行相同。

# awk

花括号可能会导致某些版本的 awk 出现问题，并且可能需要不可用的特殊标志。这是使用 awk 的一种基本方法

```
cat test |  awk '{ if (length($0) == 5 ) print $0}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:20:51.447

`grep '^.{25}$'`我认为只会返回正好有 25 个字符的行。

解释：

```
^     Start at beginning of string
.{25} match exactly 25 of any character
$     Up to the end of the string` 
```

# arrays - 动作脚本 3 如何制作一个用数组激活的 if 语句

> ID：15286638
> 
> 赞同：0
> 
> 时间：2013-03-08T04:17:48.013
> 
> 标签：arrays, actionscript-3, if-statement

如果我做了一个 if 语句，并且我希望它在目标击中另一个影片剪辑时执行某些操作（我已经知道如何执行此操作）但前提是它是正确的目标，我将如何执行此操作？

```
function stopdrag(e:MouseEvent):void{
    e.currentTarget.stopDrag();
    if(e.currentTarget.hitTestObject(destination) || //right here is where the script would `check the name of the target// ){`
        scaryface.visible=true;
    }
} 
```

我如何确保它仅在目标是数组中的特定值时才有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:42:47.577

你可以设置一个 switch/case 或嵌套 if 语句......如果你没有大量的目标......例如：

```
if (e.currentTarget.hitTestObject(destination1){
doSomething();
}else if{
(e.currentTarget.hitTestObject(destination2){
doSomethingElse();
} 
```

否则，像上面 Vipul 的解决方案是非常明智的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:58:04.093

您可以在创建该数组时创建该目标的自定义属性，例如 ID (arr[0].ID = "abc") 或类似的东西，然后您可以检查 ID。

如果条件是您尝试匹配数组中的任何值，那么您可以检查 for 循环中的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:49:00.623

我不能确切地说出你在问什么。如果您尝试检查目标是否包含在数组中，您可以使用类似以下代码的内容：

```
function stopdrag(e:MouseEvent):void{
    e.currentTarget.stopDrag();
    if(e.currentTarget.hitTestObject(destination) && yourArray.indexOf(e.currentTarget) > 0){
         scaryface.visible=true;
    }
} 
```

这将检查目标是否与目标发生冲突，如果是，将检查目标是否包含在 yourArray 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T21:48:48.067

我想不考虑性能的最简单和最懒惰的方法是

```
if(array.indexOf(e.currentTarget) >= 0){
    //do something
} 
```

# c - 尝试将 islower 与数组和指针一起使用...出现错误？

> ID：15286641
> 
> 赞同：0
> 
> 时间：2013-03-08T04:18:34.317
> 
> 标签：c

我在下面的程序中尝试了数组、带字符串的指针，但我不知道我哪里出错了。

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

// finding out the uper case and lower case in a string

int main()
{
    char *arr_1[] = {"CalCulaTor", "DoveTail", "MachiNing"};
    int i = 0, j;

    while(*(arr_1 + i) != '\0')
    {
        printf(" %d letter is %s ",i,islower(*(arr_1 + i)) ? "Lower case    " : "Not lower case");
        printf("\n");
        i++;
    }

    system("PAUSE");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:21:33.370

您的代码看起来可以处理单个字符串，但是您有一个包含三个字符串的数组。您需要添加另一个循环来处理对该数组的迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:32:07.640

字符串数组的一个常见习惯用法是用 NULL 终止数组。例如：

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

// finding out the uper case and lower case in a string
char *arr_1[] = {
  "CalCulaTor", "DoveTail", "MachiNing", NULL
};

int main()
{
    char **a = arr_1;
    while(*a)
    {
        int i = 0;
        char *c = *a;
        printf ("%s:\n", c);
        while (*c) {
          printf(" %d letter(%c) is %s ", 
            i++,
            *c, 
            (islower(*c) ? "Lower case    " : "Not lower case"));
          c++;
        }
        printf("\n");
        a++;
    }
    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:41:28.737

`char *arr_1[]`是一个指向 char 的指针数组。您必须遍历字符串数组，然后遍历该字符串以获取每个单独的元素。

```
#include <stdio.h>
#include <ctype.h>

int main(void)
{
    char *arr_1[] = {"CalCulaTor", "DoveTail", "MachiNing"};
    size_t i, j;

    for (i = 0; i < 3; i++) {
        puts(arr_1[i]);
        for (j = 0; arr_1[i][j]; j++) {
            printf("'%d' element is %s.\n", j, islower(arr_1[i][j]) ? "Lowercase" : "Uppercase");
        }
        putchar('\n');
    }

    return 0;
} 
```

第一个循环将获取您的字符串（它是一个指向 char 的指针），`arr_1[i]`然后用另一个变量循环它会给您一个指向 char as 的指针中的元素`arr_1[i][j]`。

# view - Ember.js - 如何在 RC1 中手动关联视图和路由

> ID：15286651
> 
> 赞同：1
> 
> 时间：2013-03-08T04:19:24.457
> 
> 标签：view, ember.js, router

我有一个不遵循命名约定的路线和视图：

```
App.PostView = Ember.View.create({
  templateName: 'myTemplate'
});

App.SomeRoute = Ember.Route.extend({ .. }); 
```

通常我会使用 PostRoute 而不是 SomeRoute，但是在这种不遵循命名约定的情况下，我如何向 SomeRoute 指示应该呈现的关联视图是 PostView。我知道您可以在 SomeRoute 中设置 this.render('myTemplate')，但我需要与视图相关联，而不仅仅是与模板相关联。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T09:00:56.213

您的尝试应该确实有效。Ember 也使用传递的值查找视图，您确定这不能正常工作吗？

```
App.PostView = Ember.View.create({
  templateName: 'myTemplate'
});

App.SomeRoute = Ember.Route.extend({ 
  renderTemplates: function(controller,model){
    this.render("post");
  }
}); 
```

# .net - 如何在 asmx 服务中使用不同的 Json 序列化程序？

> ID：15286652
> 
> 赞同：2
> 
> 时间：2013-03-08T04:19:25.520
> 
> 标签：.net, json, serialization, asmx

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
[System.Web.Script.Services.ScriptService]
public class WebService1 : System.Web.Services.WebService
{
    [WebMethod]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string HelloWorld()
    {
        return "Hello World";
    }
} 
```

默认的 ResponseFormat 指示 asmx Web 服务使用内置的 JavaScriptSerializer，我对使用 Json.NET 感兴趣。

# javascript - 使用 Enquire.js 基于媒体查询切换功能

> ID：15286661
> 
> 赞同：1
> 
> 时间：2013-03-08T04:20:34.107
> 
> 标签：javascript, jquery, media-queries, enquire.js

这实际上与[此](https://stackoverflow.com/questions/12808691/using-enquire-js-to-switch-between-scripts-according-to-screen-size)问题相同，但我希望有人可以更彻底地回答。

我正在尝试使用两个不同的 js 函数创建网站的“移动”和“完整”版本。我了解响应式设计，并且我正在通过 CSS 进行大部分更改，但是这两个版本需要具有两个不同的互斥 js 函数。[Enquire.js](http://wicky.nillia.ms/enquire.js/)允许使用媒体查询，如果浏览器窗口没有调整大小，它们可以很好地工作。但是，如果您将窗口的大小从“完整”调整为“移动”，尽管我在下面做出了最好的（可能不是很好）努力，但我示例中的函数 full() 并没有停止运行。然而，警报总是正确的：full() 为“true”，mobile() 为“false”，这些函数似乎忽略了 if 语句。如果有更好的选择，我可以不使用询问。

**js-decider.js**

```
$(function() {

window['fullEnabled'];
window['mobileEnabled'];

enquire.register("screen and (min-width:680px)", {

match : function() {

 window['fullEnabled'] = true;
 window['mobileEnabled'] = false;
 full();

}

}).register("screen and (max-width:679px)", {

match : function() {

 window['fullEnabled'] = false;
 window['mobileEnabled'] = true;
 mobile();

}

}).listen();

}); 
```

**完整的.js**

```
function full() {

    if (window['fullEnabled']==true) {
        alert(window['fullEnabled']);
        // do other stuff
    }

} 
```

**移动.js**

```
function mobile() {

    if (window['mobileEnabled']==true) {
        alert(window['fullEnabled']);
        // do other stuff
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:16:24.943

看起来您的媒体查询是导致您遇到问题的原因。

试试这个：

```
enquire.register("screen and (max-width:679px)", {
    match : function() {
        //small screen
    }
}).register("screen and (min-width:680px)", {
    match : function() {
        //large screen
    }
}).listen(); 
```

# java - 适当的试扣设计

> ID：15286662
> 
> 赞同：4
> 
> 时间：2013-03-08T04:20:37.200
> 
> 标签：java, try-catch

这将被认为是在 Java 中实现 try/catch 的更合适的技术：

A：

```
Date lastMod = null;
BufferedReader inFile = null;
    try {
        inFile = new BufferedReader(new FileReader("C:\\Java\\settings.ini"));
        try {
            lastMod = new Date(Long.parseLong(inFile.readLine()));
        } catch (IOException e) {
            e.printStackTrace();
        }
    } catch(FileNotFoundException e) {
        e.printStackTrace();
    } 
```

或 B：

```
Date lastMod = null;
BufferedReader inFile = null;
    try {
        inFile = new BufferedReader(new FileReader("C:\\Java\\settings.ini"));
        lastMod = new Date(Long.parseLong(inFile.readLine()));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

此外，使用 BufferedReader 的长代码块跟随 try/catch 块是错误的，还是最好在 try/catch 中包含长代码块？

例如：

```
public static void main(String[] args) {
    Date lastMod = null;
    BufferedReader inFile = null;
    try {
        inFile = new BufferedReader(new FileReader("C:\\Java\\settings.ini"));
        lastMod = new Date(Long.parseLong(inFile.readLine()));
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    //Long block of code using inFile
    inFile.readLine();
    inFile.close(); 
```

相对：

```
public static void main(String[] args) {
    Date lastMod = null;
    BufferedReader inFile = null;
    try {
        inFile = new BufferedReader(new FileReader("C:\\Java\\settings.ini"));
        lastMod = new Date(Long.parseLong(inFile.readLine()));
        //Long block of code using inFile
        inFile.readLine();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        inFile.close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:24:24.630

B 更具可读性，当内部 try 块之后，外部 try 块之前没有任何事情发生时。如果您有逻辑要在两者之间执行，那么您必须使用 A

在第二个示例中，使用 finally 的第二个版本对于确保无论如何都会调用 close（即使函数首先返回）至关重要。没有 finally 的第一个版本实际上是错误的，因为您可能会用完所有文件句柄并且无法打开更多文件。

作为附加说明，您可能需要在调用 close 时检查 null。如果您使用的是 java 7，最好使用["try with resources"](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:27:08.120

对于第一个问题：解决方案 A 增加了不必要的复杂性。使用 B，或者，如果您使用的是 Java 7，请尝试使用资源：

```
 Date lastMod = null;
    try (BufferedReader inFile = new BufferedReader(new FileReader("C:\\Java\\settings.ini"))){
        lastMod = new Date(Long.parseLong(inFile.readLine()));
    } catch (FileNotFoundException | IOException e) {
        e.printStackTrace();
    } 
```

对于第二个问题：在第一个版本中，如果`BufferedReader`创建抛出异常怎么办？您将使用`br`after which is null 并抛出 NullPointerException。此外，如果发生其他事情，您将不会调用`inFile.close()`，因此您确实需要`finally`. 由于所有这些原因，第二个解决方案再次更好。

如果您正在使用 try-with-resouces (Java 7)，当然，您不需要 finally 块来释放您的 BufferedReader。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:47:26.020

适当的技术可能还包括不捕获您的异常，而是允许它们冒泡给调用者。务必使用 finally 块来清理任何可能会占用资源的状态，但通常最好在父例程中捕获异常，而不是在引发异常的子例程中捕获异常。

一般来说，如果在调用例程中知道子例程是否成功会有所帮助，那么该子例程不应该捕获它的异常，而应该允许它们冒泡到调用者那里。

# mysql - 需要一些帮助来优化这个 mySQL 查询

> ID：15286663
> 
> 赞同：0
> 
> 时间：2013-03-08T04:20:37.710
> 
> 标签：mysql, performance

我有这个查询运行以从 phpbb3 获取 5 个最近的帖子/主题。该论坛拥有超过 180,000 条记录。当前查询平均需要 20 秒才能完成。有什么想法可以优化它以使其更快吗？

```
SELECT t.topic_id, t.topic_title, t.topic_last_post_id, t.forum_id, p.post_id, p.poster_id, p.post_time, u.user_id, u.username
FROM phpbb_topics t, phpbb_forums f, phpbb_posts p, phpbb_users u
WHERE t.topic_id = p.topic_id AND
f.forum_id = t.forum_id AND
t.forum_id != 4 AND
t.topic_status <> 2 AND
p.post_id = t.topic_last_post_id AND
p.poster_id = u.user_id
ORDER BY p.post_id DESC LIMIT 5; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:58:53.137

首先，我认为该`t.topic_id = p.topic_id`子句是多余的，因为它已经被`p.post_id = t.topic_last_post_id`. 所以试试这个简化版本：

```
SELECT
    t.topic_id,
    t.topic_title,
    t.topic_last_post_id,
    t.forum_id,
    p.post_id,
    p.poster_id,
    p.post_time,
    u.user_id,
    u.username
FROM phpbb_forums f
JOIN phpbb_topics t ON f.forum_id = t.forum_id
JOIN phpbb_posts p ON t.topic_id = p.topic_id
JOIN phpbb_users u ON p.poster_id = u.user_id
WHERE
    t.forum_id != 4 AND
    t.topic_status != 2
ORDER BY p.post_id DESC LIMIT 5; 
```

其次，（这可能是缓慢的原因）确保您在以下列上有索引：`f.forum_id`、`t.forum_id`、`t.topic_id`、`p.topic_id`、`p.poster_id`和。`u.user_id``t.topic_status`

（<> 和 != 是等价的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:51:28.660

您可能必须向表中添加一些索引。

请阅读[本文](http://www.databasejournal.com/features/mysql/article.php/1382791/Optimizing-MySQL-Queries-and-Indexes.htm)，您可以在其中了解该`EXPLAIN`命令。这将使您能够看到查询的瓶颈在哪里，然后您将看到需要创建哪些索引。

例如，如果您`JOIN`在两个表之间创建一个，则必须确保两个字段都有索引。否则 MySQL 将不得不做一些额外的工作来管理跨表。另外，我建议你（如果你还没有）为你用来排序行的字段创建一个索引（`ORDER BY p.post_id`）。这也将有助于查询的性能，否则 MySQL 将不得不创建临时表来排序结果，这也很耗时。

希望这可以帮助你

# php - 从典型输入“dd/mm/aaaa”转换为有效的 Symfony 值

> ID：15286664
> 
> 赞同：0
> 
> 时间：2013-03-08T04:20:40.103
> 
> 标签：php, forms, doctrine, validation, symfony-1.4

我有一个表，我将一个字段设置为 TIMESTAMP，然后我使用 tasks 生成一个模块`doctrine:generate-admin`。默认情况下，Symfony 创建一个`_form.php`模板，其中 TIMESTAMP 字段分别出现，例如：

```
alumnos_fecha_ingreso_day
alumnos_fecha_ingreso_month
alumnos_fecha_ingreso_year
alumnos_fecha_ingreso_hour
alumnos_fecha_ingreso_minute 
```

所以在我的模板中，我有一个字段，其中值输入为“dd/mm/yyyy”（是默认格式），我不想使用 Symfony 方式（这对最终用户来说很难看）。我的问题是我如何处理这个值以获得正确的值和 Symfony 传递表单验证？有没有办法隐藏小时和分钟字段？还是需要完整？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:25:50.910

如果您只想要日/月/年，则必须`with_time`在表单类中将选项定义为 false。

> `with_time`: 是否包含时间（默认为true）

并以您的形式：

```
$this->widgetSchema['my_date'] = new sfWidgetFormDateTime(array(
  // I don't remember if you need to re-define the format
  'date'      => array('format' => '%day%/%month%/%year%'),
  'with_time' => false
)); 
```

# c++ - 将字符转换为宽字符

> ID：15286667
> 
> 赞同：0
> 
> 时间：2013-03-08T04:20:58.690
> 
> 标签：c++, windows, char, wchar

我正在尝试使用该`mbstowcs_s`函数将多字节字符序列转换为相应的宽字符序列。但我一直有以下堆损坏问题。谁能告诉我如何解决这个问题？

![在此处输入图像描述](../Images/3f7a5d240d99b75594f3071649d792dd.png)

这是一个示例代码。调试时，始终是`delete wc_name`导致问题的线路。我知道不应该这样。

```
#include <Windows.h>
#include <iostream>
#include <string>
int main (int argc, char *argv[]) { 
    size_t returnValue; // The number of characters converted.
    const size_t sizeInWords = 50; // The size of the wcstr buffer in words
    const char* c_name = "nanana"; // The address of a sequence of characters
    wchar_t *wc_name = new wchar_t(50); 

    errno_t err = mbstowcs_s(&returnValue, wc_name, sizeInWords, 
                                              c_name, strlen(c_name) );

    wcout << wc_name << endl;
    delete wc_name;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T04:22:59.683

`wchar_t *wc_name = new wchar_t(50);`应该是`wchar_t *wc_name = new wchar_t[50];`分配一个数组。而对应的`delete wc_name`应该是`delete[] wc_name;`。顺便说一句，如果您在编译时知道数组本身的大小，则不需要动态内存分配。你可以简单地做`wchar_t wc_name[50];`。

# applescript - 基于鼠标键条件的 IF 语句

> ID：15286673
> 
> 赞同：2
> 
> 时间：2013-03-08T04:21:44.517
> 
> 标签：applescript

我希望能够通过 Applescript 检查鼠标键的状态，以便脚本只有在粘滞键打开时才能向 5 键发送垃圾邮件（这将触发鼠标左键单击）。这将允许使用关闭粘滞键的快捷方式关闭脚本（按下该`option`键 5 次）。

到目前为止我的代码：

```
on idle
    tell application "System Preferences"
        activate
        set current pane to pane id "com.apple.preference.universalaccess"
    end tell

tell application "System Events"
    tell process "System Preferences"
        click menu item 6 of menu 1 --pseudocode
        if value of checkbox "Enable Mouse Keys" is 1 then
            key code 87 --press the "5" key, triggers mouse press
        end if
    end tell

    end tell

    set rn to (random number from 0.8 to 1.0) as text
    return rn
end idle 
```

我的问题是线路`click menu item 6 of menu 1`以及如​​何访问“辅助功能”窗格的“鼠标和键盘”部分。如果还不是很明显，我对applescript的经验很少。>_>

![在此处输入图像描述](../Images/ba8e5fa5b5e036e90752430109edefa1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:48:06.660

您可以避免打开 prefpane。通过直接从 Universal Access 首选项文件中读取值

```
set plistFile to (path to preferences from user domain) & "com.apple.universalaccess.plist" as string -- Get the  Universal Access plist path of this use
tell application "System Events" to set mouseDriver to value of property list item "mouseDriver" of contents of property list file plistFile -- read only the value for mouse keys 
```

这将返回*true*或*false*取决于它是否打开。

直接读取 plist 的一个警告是，在用户界面中所做的任何更改可能需要大约 5 秒或多或少的时间才能写入文件。

您可以[在此处](http://www.macosxautomation.com/applescript/features/propertylists.html)阅读有关[属性列表项的更多信息](http://www.macosxautomation.com/applescript/features/propertylists.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-16T18:35:19.717

更新到上面针对 OS 10.14 Mojave 的@markhunte 帖子（可能也适用于早期版本）：

```
set plistFile to (path to preferences from user domain) & "com.apple.universalaccess.plist" as string -- Get the  Universal Access plist path of this use
tell application "System Events" to set mouseDriver to value of property list item "stickyKey" of contents of property list file plistFile -- read only the value for mouse keys 
```

plist 项目名称“mouseDriver”更改为“SickyKey”

# c# - 覆盖应用于类的属性

> ID：15286676
> 
> 赞同：0
> 
> 时间：2013-03-08T04:22:03.527
> 
> 标签：c#, .net, attributes, postsharp

我一直在测试 Postsharp，特别是 OnMethodBoundaryAspect 类，创建子类（属性）并将我自己的一些自定义日志记录到 CSV 文件中。

一切正常，这可能与 Postsharp 完全无关

我想将我的子类（称为 MethodTraceAttribute）应用到我的主 Form 对象，然后将它应用到 Form 中的一个方法（使用不同的参数）。

目前它在 CSV 文件中写出两行，一行来自 Form 属性，另一行用于方法属性。

**我希望方法**上的 MethodTraceAttribute覆盖已应用于**类**的方法。

我很确定我已经在 MVC3 中看到了这一点，但通常在 .NET 中这可能吗？- 我认为这可能与 AttributeUsage 属性有关，但已经做了一些阅读，但没有。

编辑：

对于任何感兴趣的人，我发现 Postsharp 有一个类似于 AttributeUsage 的属性，称为 MulticastAttributeUsage - 我已将其设置为 MulticastTargets.Method | MulticastTargets.InstanceConstructor, AllowMultiple= false 现在似乎可以做我想做的事（不再使用 AttributeUsage 属性）。我没有回答这个问题，因为我想找到一种 .NET 方式来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T02:19:53.573

对于任何感兴趣的人，我发现 Postsharp 有一个类似于 called 的属性`AttributeUsage` -`MulticastAttributeUsage`我已将其设置为

`MulticastTargets.Method | MulticastTargets.InstanceConstructor, AllowMultiple= false`

它现在似乎做了我想做的事（不再使用 AttributeUsage 属性）。

# android - 检测我的应用是否已卸载

> ID：15286678
> 
> 赞同：4
> 
> 时间：2013-03-08T04:22:11.813
> 
> 标签：android, uninstallation

是否可以有一个代码来检测我的应用程序是否已被卸载，并且在卸载时，我的应用程序创建的所有相关文件夹都将被自动删除？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T04:30:16.627

关于能够检测到卸载，恐怕是不可能的。

每当删除应用程序包（应用程序已卸载）时，**ACTION_PACKAGE_REMOVED**意图将被发送给所有接收者，**除了**您自己的。

来自文档：-

> 广播动作：现有应用程序包已从设备中删除。数据包含包的名称。正在安装的包没有收到这个 Intent。

这[一点在这里得到证实](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_REMOVED)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:27:43.970

不，亲爱的，您无法检查您的应用程序是否要卸载。

但是你可以在你的缓存目录中创建你的文件夹，这样当你的应用程序被删除时，所有的文件夹和文件都会被自动删除。

请检查一下。[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T12:50:13.640

感谢您的所有解决方案！至少我现在知道我的应用无法检测到卸载。
但是我已经解决了删除我的应用程序通过放置相关文件夹创建的所有相关文件夹的问题：`context.getExternalFilesDir(null).getAbsolutePath()`
每次Android卸载你的应用程序时，它都会删除`/mnt/sdcard/Android/data/com.yourapp.com`文件夹中的所有内容。
`context.getExternalFilesDir(null).getAbsolutePath();`把你的文件夹放在文件夹里面`/mnt/sdcard/Android/data/com.yourapp.com`。

# javascript - jQuery Tablesorter：如何检测列是否已经排序？

> ID：15286679
> 
> 赞同：1
> 
> 时间：2013-03-08T04:22:20.570
> 
> 标签：javascript, jquery, tablesorter

表格中的信息有时已经排序，所以当用户点击标题时，插件会以相同的顺序再次对其进行排序，但看起来什么都没有发生。有没有办法检测信息是否已经排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:39:18.120

我会在列标题元素上设置某种指标，即数据属性 data-sorted="true" 并在再次排序之前对其进行检查。这是一些示例 jQuery 代码：

```
$(".column-header").click(function(event) {
    event.preventDefault();
    if (!$(this).data("sorted")) {
        // do sorting
    }
}); 
```

如果要交替排序方向，可以使用不同的值：asc/desc。

# java - 欧拉计划甚至斐波那契

> ID：15286688
> 
> 赞同：1
> 
> 时间：2013-03-08T04:23:20.507
> 
> 标签：java

我对 Euler 项目的第二个问题的最短解决方案感兴趣：Java 中的偶数斐波那契数。

> 斐波那契数列中的每个新项都是通过添加前两项来生成的。从 1 和 2 开始，前 10 项将是：1, 2, 3, 5, 8, 13, 21, 34, 55, 89, ... 通过考虑斐波那契数列中其值不超过的项四百万，求偶数项之和。

我目前拥有的：

```
public class fibonnaci {
    public static void main(String[] args) {
    int f=0,t=0,n=0,s=1;
    for(;n<4000000;n=f+s){
        f=s;s=n;
        if(n%2==0)t+=n;
    }
    System.out.println(t);
   }
} 
```

为了便于阅读，我添加了空格。

我怎样才能使这个更短（或者如果不是正确的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:36:20.870

您对此的最佳解决方案可能是创建一个斐波那契数数组。创建一个带有计数器的循环。至少迭代，计算下一个数字并将其推送到数组中。请记住，由于 F(n) = F(n-1) + F(n-2)，并且您已经计算并保存了 F(n-1),F(n-2)，这将是简单的加法。如果此数字超出您的限制，请退出循环。

现在遍历数组添加每隔一个数字（这将是偶数）。

这可能是您对 CPU 的最有效使用。

**更新：**正如 C. Lang（间接）指出的那样，您可以在计算时保持总和，以避免在最后遍历列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-16T10:56:40.490

如果您认为`public static void main(String[]a) {System.out.println(4613732);}` *作弊*，那么不乱用奇数怎么样？

```
public static void main(String[] args) {
    int f,s,t=s=2,n=8;
    for(;n<4000000;t+=n,f=s,s=n,n=f+4*s);
    System.out.println(t);
} 
```

# google-maps - 谷歌地图未在 OSClass 中完全加载

> ID：15286703
> 
> 赞同：0
> 
> 时间：2013-03-08T04:24:46.613
> 
> 标签：google-maps, osclass

我有以下代码`osclass\oc-content\themes\modern\item.php`，

```
<strong class="share"><a href="#" id="map" rel="nofollow"><?php _e('Map', 'modern'); ?></a></strong>

<strong class="share"><a href="#" id="photo" rel="nofollow"><?php _e('Photo Gallery', 'modern'); ?></a></strong>

<div class="map" style="display:none;">
    <?php osc_run_hook('location'); ?> 
</div>

    <div class="slider-wrapper theme-light image" >
            <div id="slider" class="nivoSlider">                        
            <?php if( osc_images_enabled_at_items() ) { ?>
                <?php if( osc_count_item_resources() > 0 ) { ?>
                    <?php for ( $i = 0; osc_has_item_resources(); $i++ ) { if (osc_resource_for() == 2 ) {  ?>
                        <img src="<?php echo osc_resource_url(); ?>" width="100%" height="240px;" alt="<?php echo osc_item_title(); ?>" title="<?php echo osc_item_title(); ?>" />
                    <?php } } ?>
                <?php } ?>
            <?php } osc_reset_resources();  ?>  
        </div>
    </div> 
```

JavaScript 代码是，

```
$("#photo").click(function() {      
    $(".image").css("display","block");
    $(".map").css("display","none");
});

$("#map").click(function() {
    $(".map").css("display","block");
    $(".image").css("display","none");
}); 
```

这里的照片加载得很好。但是当我单击时地图会出现以下问题`#map`。

![在此处输入图像描述](../Images/35f470c805eaa1f1a7238b4f4cf73792.png)

如果我在第 1 次加载地图并设置`display:none;`为`.image`均值，则地图将完全加载且良好。

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T10:25:10.180

我刚刚测试了 3.1 版，它正在我的本地主机上运行

# asp.net - 使用单元格引用而不是索引将数据插入 Excel

> ID：15286709
> 
> 赞同：0
> 
> 时间：2013-03-08T04:25:42.350
> 
> 标签：asp.net, c#-4.0, export-to-excel, excel-interop

我的 c# 代码中有一个导出 excel 方法。早些时候我将数据插入到每个单元格中

```
WorksheetObj.Cells[rowvalue,colvalue] = "something"; 
```

但是，有没有办法使用单元格引用将数据插入单元格，比如

```
WorksheetObj.Cells["A",1] = "Something"; 
```

我正在使用 Excel 互操作来实现导出功能。

这可能是重复的，但是，我没有找到有关此的解决方案或帖子..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:52:05.450

尝试这个：

```
WorksheetObj.Range["A1"].Value2 = "Something"; 
```

# java - HashSet 是如何维护桶的？为此使用什么数据结构？

> ID：15286710
> 
> 赞同：3
> 
> 时间：2013-03-08T04:25:44.507
> 
> 标签：java, hash

当将具有不同 hashCode 的元素添加到 HashSet 时，必须添加一个新元素，对吗？这个新的存储桶将添加到什么数据结构中？它是否再次求助于某种数组并在每次添加新元素时调整大小，从而使 HashSet O(n) 的添加和删除变得复杂？

在阅读了几篇文章之后，我了解到 JDK 的一些实现使用 HashMap 作为 HashSet 的备份集合，但是 HashMap 用于此目的是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T04:28:13.563

您可以随时[查看源代码](http://www.docjar.com/html/api/java/util/HashMap.java.html)。

在那里你会看到 HashMap 有一个桶数组：

```
transient Entry[] table; 
```

每个桶本质上是一个链表：

```
static class Entry<K,V> implements Map.Entry<K,V> {
         final K key;
         V value;
         Entry<K,V> next;
         final int hash; 
```

该数组为您提供对给定哈希码的存储桶的恒定时间访问，然后您必须遍历该列表（希望不超过一两个条目）：

```
final Entry<K,V> getEntry(Object key) {
         int hash = (key == null) ? 0 : hash(key.hashCode());
         for (Entry<K,V> e = table[indexFor(hash, table.length)];
              e != null;
              e = e.next) {
             Object k;
             if (e.hash == hash &&
                 ((k = e.key) == key || (key != null && key.equals(k))))
                 return e;
         }
         return null;
} 
```

* * *

> 当将具有不同 hashCode 的元素添加到 HashSet 时，必须添加一个新元素，对吗？

当添加与现有元素具有相同 hashCode 的元素时，它将进入同一个桶（在链表的末尾）。

添加具有新 hashCode 的元素时，它可能会或可能不会进入不同的存储桶（因为您拥有的 hashCode 比存储桶多）。

所有存储桶都是在调整地图大小时提前创建的。如果达到容量限制，则会使用更多存储桶调整其大小，并将所有内容放入新存储桶中。

> 这个新的存储桶将添加到什么数据结构中？

不添加桶。有一个固定的桶数组。当您需要更多容量时，会使用更大的阵列重建整个结构。

> 它是否再次求助于某种数组并在每次添加新元素时调整大小，从而使 HashSet O(n) 的添加和删除变得复杂？

不是每次。理想情况下永远不会。只有当您错误计算容量并最终需要更多时。然后它变得昂贵，因为所有内容都被复制到一个新数组中。这个过程与 ArrayList 基本相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:31:40.797

[即使只是阅读HashSet](http://docs.oracle.com/javase/6/docs/api/java/util/HashSet.html)和[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)的 Javadoc 也可以收集到很多信息。HashSet 由 HashMap 支持。

根据 HashMap Javadoc，它由初始容量和负载因子定义。在超过负载因子之前不会调整后备哈希表的大小，因此要回答您的一个问题，不，不会在地图中的每次新添加/删除时都发生调整大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:39:17.653

`HashMap`使用数组`Map.Entry`：数组中的元素是一对`key,value`。

插入元素时，根据哈希码计算桶的位置。如果插入的密钥与存储在桶中的密钥不同（哈希码**冲突**），则选择下一个空桶。该算法的结果是，在数组“几乎已满”的哈希映射上的操作将相当昂贵：实际上，如果只有一个空闲桶，它们将是 O(n)。

为了避免这个问题，`HashMap`当它的当前计数大于内部阵列容量的某个百分比时自动调整大小（“负载因子”，默认为 75%）。这意味着一个 75 个元素`HashMap`将被一个 100 个元素的数组烘焙。降低负载因子会增加内存开销，但会使平均执行顺序偏向接近恒定。

请注意，如果**每个**元素都具有相同的 hashCode，最坏情况下的插入可能仍然是 O(n)。

# java - Java/clojure：多字符分隔符，并保留分隔符

> ID：15286711
> 
> 赞同：7
> 
> 时间：2013-03-08T04:25:49.150
> 
> 标签：java, string, clojure, split, tokenize

我正在开发一个 clojure 项目，它可以与任何 java 类互操作，所以我的问题的答案可能是 java 或 clojure。

基本上我需要能够根据给定的分隔符（将超过一个字符）将字符串拆分为组件，但同时保留分隔符。

例如：

```
splitting "test:test:test" on ":"  => [ "test" ":" "test" ":" "test" ]
splitting "::test::test::" on "::" => [ "::" "test" "::" "test" "::" ] 
```

我来的壁橱使用 clojure's `clojure.string/split`，但它实际上并没有返回分隔符。第二个最接近的是使用 StringTokenizer，它确实返回分隔符但不接受多字符分隔符。

除了将字符串分解成一系列字符并对其进行奇怪的减少之外，有谁知道任何解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-08T10:09:28.543

这是一个版本，它构建了一个正则表达式来匹配分隔符前后的间隙，而不是分隔符字符串本身（假设 regex 中没有特殊字符`d`）：

```
=> (defn split-with-delim [s d]
     (clojure.string/split s (re-pattern (str "(?=" d ")|(?<=" d ")"))))
#'user/split-with-delim
=> (split-with-delim "test:test:test" ":")
["test" ":" "test" ":" "test"]
=> (split-with-delim "::test::test::" "::")
["" "::" "test" "::" "test" "::"] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T04:41:14.000

```
(defn split-it [s d]
  (interpose d (str/split s (re-pattern d))))

(split-it "test:test:test" ":")
=> ("test" ":" "test" ":" "test")

(split-it "::test::test::" "::")
=> ("" "::" "test" "::" "test") 
```

# java - Android App远程连接数据库

> ID：15286721
> 
> 赞同：2
> 
> 时间：2013-03-08T04:27:31.757
> 
> 标签：java, android, database

我对 Java 或数据库并不陌生，但我对 Android 应用程序开发并不陌生。我有一个应用创意，并已开始将其组合在一起。这是一款非常简单的游戏，我最终希望拥有多人游戏功能。

这个过程中我很不了解的部分是应用程序的后端部分。我需要一个数据库来存储用户名和密码、分数和类似的东西。我还需要在这里存储游戏所需的东西。该应用程序将非常依赖数据库，任何设备都可以访问它并且它们都在查看相同的数据，这一点很重要。

如果我的研究正确，这意味着设备本身上的简单 SQL Lite 数据库对我没有帮助。理想情况下，我会使用 SQL Server 并创建数据库，因为这就是我用于其他项目的东西......但我不知道这是否可能或理想。

我真的只需要有人在这里引导我朝着正确的方向前进。我想要一些简单的东西，任何设备都可以随时轻松访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:31:35.440

您需要编写一个服务器应用程序，供各种客户端连接。该服务器将负责处理客户端提供给它的信息并返回适当的数据。

直接暴露数据库是不明智的；这将允许有创造力的玩家欺骗您的系统（或更糟！），因为他们可以不受限制地访问您的应用程序所做的任何事情。您自己的服务器应用程序可以确保只允许对数据存储进行合理访问。

至于如何实现它，有多种选择。Web 服务现在很流行（在这种情况下，ASP.NET 很可能适合 SQL Server），但是如果您愿意，您可以实现自己的非 HTTP 游戏协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T07:37:45.863

您可以使用 JDBC 从 Adnroid 应用程序访问远程 SQL 数据库。

我在这里提供了示例：[How to save image files to mysql with sql code and how to display them with java?](https://stackoverflow.com/questions/15232857/how-to-save-image-files-to-mysql-with-sql-code-and-how-to-display-them-with-java/15234570#15234570)

我在桌面和 Android 应用程序中使用 JDBC 时遇到的唯一区别是您必须在单独的线程中执行 JDBC 操作，就像 Android 中的任何其他网络操作一样。

# json - 加拿大省的Json文件

> ID：15286733
> 
> 赞同：4
> 
> 时间：2013-03-08T04:29:03.270
> 
> 标签：json, d3.js

我想用geojson在d3中绘制地图。我是为加拿大的地图做的。

现在我想画一张加拿大每个州的地图。例如新斯科舍的地图。我搜索了很多，但我没有得到它的坐标。你能给我它的json文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T17:39:35.483

这是各种格式的 Nova Scotia 几何的链接，包括 geoJSON。 [http://global.mapit.mysociety.org/area/239439.html](http://global.mapit.mysociety.org/area/239439.html)

这个网站有点难导航，但如果你环顾四周，你应该也能找到你需要的任何其他加拿大省份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:32:24.257

[这](https://github.com/johan/world.geo.json/blob/master/countries/CAN.geo.json)是您要查找的 json。

# php - PHP - 从变量中引用 StdClass 对象？

> ID：15286735
> 
> 赞同：0
> 
> 时间：2013-03-08T04:29:23.487
> 
> 标签：php, object

也许我搜索错误，但我无法找到如何在字符串中指定对象类。例子：

我在数据库中保留一个 json 站点列表，执行一个 foreach 循环以从每个站点检索特定项目。但是，每个站点都有不同的结构。

`SITE 1: $result->Food->Price->Today;
SITE 2: $result->Pizza->Slice->discount;`

我试图将“$result->Pizza->Slice->discount”保留在一个变量中（在数据库中指定）并从类中返回它。

听起来很简单，但我是类对象的新手，我发现的只是如何从数组创建对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:44:30.830

将此值存储到您的数据库中：

```
serialize(['Pizza', 'Slice', 'discount']); 
```

读取值时，将其反序列化：

```
unserialize($value_from_db); 
```

要从 JSON 对象中检索值，请使用以下简单函数：

```
function retrieve_value($object, $trail) {

    foreach ($trail as $name)
        if (isset($object->$name))
            $object = $object->$name;
        else
            throw new Exception("Object does not have the property $name");

    return $object;
} 
```

所以你有这样的事情：

```
$value = retrieve_value(json_decode($json), unserialize($db_value)); 
```

不要使用`eval()`，因为它是邪恶的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:32:39.717

一种肮脏的方法是进行 json 编码和解码。

```
$array = array([Your array]);
$obj = json_decode(json_encode($array)); 
```

虽然没有测试代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:35:43.477

我想您可以将路径存储在数据库中，然后将“eval()”与对象上的路径一起使用。只要确保你知道没有人可以改变路径，因为 eval 对未经清理的代码很危险！

```
eval("\$value = \$result->{$pathvar};"); 
```

我没有测试，但类似的东西。当然 $pathvar 将是来自数据库的路径的值，无论存储在什么变量中。

# f# - 为什么 val 关键字在 F# 中不起作用

> ID：15286743
> 
> 赞同：0
> 
> 时间：2013-03-08T04:30:14.927
> 
> 标签：f#

为什么以下代码片段中的 val 关键字会导致编译器错误？我需要获取返回值并显示它。

```
open System

let CylinderVolume radius length =
    let pi = 3.14159
    length * pi * radius * radius

System.Console.WriteLine(CylinderVolume 5.0 10.0)

val cylinderVolume : int -> int -> int 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:51:53.207

你所显示的输出不是我得到的：

```
open System
- 
- let CylinderVolume radius length =
-     let pi = 3.14159
-     length * pi * radius * radius
- 
- 
- System.Console.WriteLine(CylinderVolume 5.0 10.0);;
785.3975

val CylinderVolume : float -> float -> float 
```

该`val CylinderVolume`位只是报告`CylinderVolume`您定义的对象的类型，结果打印在它上面。

# android - Android 应用程序在模拟器中运行，但未在启动器中列出

> ID：15286748
> 
> 赞同：0
> 
> 时间：2013-03-08T04:30:38.350
> 
> 标签：android, android-manifest, android-launcher

我正在学习 Android，无法让我的程序显示在我的 Nexus S 模拟设备的程序列表抽屉中。当我加载模拟器时，它确实在点击“运行新配置”后成功加载了我的程序。我知道这方面有很多线索......但据我所知，我的清单中的一切都是正确的：

```
 <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter> 
```

另外，要明确 Eclipse 中的运行配置确实可以成功运行我的程序。它只是不在模拟设备的应用程序菜单/抽屉中单击并运行：

```
[2013-03-07 20:14:04 - TodDoList] New emulator found: emulator-5554
[2013-03-07 20:14:04 - TodDoList] Waiting for HOME ('android.process.acore') to be launched...
[2013-03-07 20:14:46 - TodDoList] HOME is up on device 'emulator-5554'
[2013-03-07 20:14:46 - TodDoList] Uploading TodDoList.apk onto device 'emulator-5554'
[2013-03-07 20:14:47 - TodDoList] Installing TodDoList.apk...
[2013-03-07 20:15:23 - TodDoList] Success!
[2013-03-07 20:15:23 - TodDoList] Starting activity com.paad.toddolist.ToDoListActivity on device emulator-5554
[2013-03-07 20:15:24 - TodDoList] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.paad.toddolist/.ToDoListActivity } 
```

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.paad.toddolist"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="15" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.paad.toddolist.ToDoListActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是我的 strings.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="app_name">TodDoList</string>
    <string name="addItemHint">New To Do List</string>
    <string name="addItemContentDescription">New To Do Item</string>

</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-23T11:33:40.587

尝试更换

```
android:name="com.paad.toddolist.ToDoListActivity" 
```

和

```
android:name=".ToDoListActivity" 
```

# macos - 在 OSX 中“使用 ls -al --full-time”问题

> ID：15286749
> 
> 赞同：20
> 
> 时间：2013-03-08T04:30:48.467
> 
> 标签：macos, bash, ls

**--full-time**是**ls**的一个方便的小选项，但在批处理文件中使用时不起作用。

**在命令提示符下使用ls -al --full-time**会产生一个扩展的日期和时间：

> 2012-01-16 18:56:00.000000000

在 bash 脚本中使用我得到了这个：

> **ls: 非法选项 -- - 用法: ls [-ABCFGHLOPRSTUWabcdefghiklmnopqrstuwx1] [file ...]**

有没有办法解决。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-08T07:29:14.143

对于本机`ls`命令，option`-T`似乎是 的替代品`--full-time`，它扩展为秒，示例如下：

```
>$  ls -lT
-rw-r--r--   1 raison staff     197 Feb 14 09:12:56 2013 1.c
-rw-r--r--   1 raison staff    1174 Mar  8 09:34:49 2013 1.s
-rw-r--r--   1 raison staff     993 Feb  5 14:44:09 2013 1.x86.s 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-08T04:52:33.257

`ls`(installed as )的 BSD (Mac OS X) 版本`/usr/bin/ls`不支持该`--full-time`选项。

GNU 版本`ls`确实支持`--full-time`. 我将 GNU`ls`安装在不同的目录 ( `/usr/gnu/bin/ls`) 中。

*   你确定你`ls`的机器上有 GNU 吗？
*   如果是这样，您确定您的 PATH 包含`/usr/bin`在您运行脚本之前安装它的目录吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T04:36:35.000

```
$ uname -rs
Darwin 11.4.2
$ ls -al --full-time
ls: illegal option -- -
usage: ls [-ABCFGHLOPRSTUWabcdefghiklmnopqrstuwx1] [file ...] 
```

你确定你`ls`的不是`gls`由自制软件实际安装的吗？

# hibernate - Grails (v2.2) 应用程序通过运行应用程序启动，但在 tomcat 7 上部署战争时死亡

> ID：15286753
> 
> 赞同：0
> 
> 时间：2013-03-08T04:31:23.537
> 
> 标签：hibernate, tomcat, grails

我有一个 grails 2.2 应用程序，当我从 svn 进行干净的结帐并执行 grails run-app 时，它运行良好。（我已经删除了我的 .grails/2.2.0 和 .grails/ivy-cache 目录并重新下载了依赖项）

但是，当我创建战争（grails 战争）并将其部署在 tomcat7 中时，它会因以下错误而死：

> 2013-03-08 04:12:17,096 [pool-2-thread-1] 错误 StackTrace - 完整堆栈跟踪：org.springframework.beans.factory.BeanCreationException：创建名为“transactionManagerPostProcessor”的 bean 时出错：bean 初始化失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“transactionManager”的 bean 时出错：设置 bean 属性“sessionFactory”时无法解析对 bean“sessionFactory”的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“sessionFactory”的 bean 时出错：调用 init 方法失败；嵌套异常是 org.springframework.beans.BeanInstantiationException：无法实例化 bean 类 [org.codehaus.groovy.grails.orm.hibernate.cfg.GrailsAnnotationConfiguration]：构造函数抛出异常；嵌套异常是 java.lang.NoSuchFieldError: INSTANCE at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)

我有以下插件：

*   流口水-gorm v0.5.6
*   乔达时代 v1.4
*   邮件 v1.0.1

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:44:42.540

bean初始化的`transactionManagerPostProcessor`问题通常是`dataSource`.

运行`grails run-app`使用`development`环境。运行默认`grails war`使用`production`环境，所以问题可能出在生产`dataSource`配置上。如果要构建使用开发模式设置的 warfile，请运行`grails -Dgrails.env=development war`.

# jsf - Glassfish 3.1.2.2 上的 JSF 2.1.7/2.1.17：托管 bean 未解析

> ID：15286763
> 
> 赞同：1
> 
> 时间：2013-03-08T04:32:08.530
> 
> 标签：jsf, glassfish, managed-bean, mojarra

我的 JSF 应用程序在 JBoss 7.1.1 上运行。我试过 Glassfish 3.1.2.2（最新），所有托管 bean 都无法识别。两种情况都使用相同版本的 Mojarra 2.1.7。

```
[#|2013-03-07T17:33:36.734-0500|SEVERE|glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=18;_ThreadName=Thread-2;|javax.el.PropertyNotFoundException: /view.xhtml @13,75 listener="#{viewBean.preRenderView}": Target Unreachable, identifier 'viewBean' resolved to null
       at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:107)
       at com.sun.faces.facelets.tag.jsf.core.DeclarativeSystemEventListener.processEvent(EventHandler.java:128)
       at javax.faces.component.UIComponent$ComponentSystemEventListenerAdapter.processEvent(UIComponent.java:2486)
       at javax.faces.event.SystemEvent.processListener(SystemEvent.java:106)
       at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2168)
       at com.sun.faces.application.ApplicationImpl.invokeComponentListenersFor(ApplicationImpl.java:2116)
       at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:288)
       at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:246)
       at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:108)
       at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
       at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
       at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) 
```

小脸页面：

```
<f:view locale="#{viewBean.locale}"> 
<f:event type="preRenderView" listener="#{viewBean.preRenderView}" />
....
</f:view> 
```

从调试开始，所有带有 @ManagedBean 注释的托管 bean 都没有构建。所以所有托管 bean 都被解析为 null。

```
@ManagedBean(name="viewBean")
@ViewScoped
public class ViewBean  {
....
} 
```

它适用于 JBoss 7。

有人在 Mojarra 2.1.7 中使用 Grassfish 3 吗？我用 javax.faces.2.1.17 替换了 jsf impl，没有运气，同样的错误。

谢谢你的帮助。
戴夫

# css - Safari 浏览器和 CSS 边框半径在右侧显示直线

> ID：15286764
> 
> 赞同：2
> 
> 时间：2013-03-08T04:32:18.030
> 
> 标签：css, button, safari

![演示](../Images/5e83e2d6a7027a4cb05189a2836cbeb3.png)

如上图所示，Macbook Air 上的 Safari 版本 6.0.2 (8536.26.17) 在右侧以直线显示边框半径。“按钮”是一个链接标签，上面应用了一个类。同样的按钮在 Chrome 中正确显示，但在 Safari 中不正确。为什么会这样，这让我抓狂。

JSFiddle 链接：http: [//jsfiddle.net/unnmv/](http://jsfiddle.net/unnmv/)

这是我正在使用的 CSS：

```
background: $color;
border: 1px solid darken($color, 15%);
color: $text-color;
cursor: pointer;
display: inline-block;
font: 14px/100% Arial, Helvetica, sans-serif;
outline: none;
padding: 0.5em 2em;
text-align: center;
text-decoration: none;
width: auto;
height: auto;
border-radius:         3px;
-moz-border-radius:    3px;
-webkit-border-radius: 3px; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T02:43:43.997

这对我有用：将以下内容添加到您的 CSS 中：

```
box-sizing:border-box;
-moz-box-sizing:border-box; /* Firefox */
-webkit-box-sizing:border-box; /* Safari */ 
```

我注意到它提到了浏览器之间的间距一致性问题，所以我尝试了这个问题，因为我有同样的问题。它对我有用。

祝你好运！

# mysql - 哪个更有效，INNER JOIN 与较小的 UPDATE 查询

> ID：15286771
> 
> 赞同：0
> 
> 时间：2013-03-08T04:33:15.620
> 
> 标签：mysql, sql-update, inner-join, entity-attribute-value

假设我有一大堆使用 EAV（实体属性值）结构的表，我可以使用查询中的大量内部连接更新 1 个实体的 20 个值

使用所有这些内部连接或有 20 个较小的查询一次更新 1 个值，这样更有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:33:14.443

如果单行内部查询更有效，并且对于多行插入，您可以进行内部连接

# linux - 用户空间与内核空间驱动程序

> ID：15286772
> 
> 赞同：33
> 
> 时间：2013-03-08T04:33:21.043
> 
> 标签：linux, linux-kernel, linux-device-driver, embedded-linux

我正在寻找编写一个 PWM 驱动程序。我知道有两种方法可以控制硬件驱动程序：

1.  用户空间驱动程序。
2.  内核空间驱动

如果一般情况下（不考虑 PWM 驱动程序的情况），我们必须决定是使用用户空间驱动程序还是内核空间驱动程序。那么除了这些，我们还需要考虑哪些因素呢？

1.  用户空间驱动程序可以直接 mmap() /dev/mem 内存到他们的虚拟地址空间，不需要上下文切换。
2.  用户空间驱动程序不能实现中断处理程序（它们必须轮询中断）。
3.  用户空间驱动程序无法执行 DMA（因为可以从内核空间分配支持 DMA 的内存）。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-10T07:43:16.433

从您列出的这三个因素中，只有第一个实际上是正确的。至于其余的——不是真的。用户空间代码可以执行 DMA 操作——这没有问题。有许多硬件设备公司在他们的产品中采用了这种技术。也可以有一个中断驱动的用户空间应用程序，即使所有的 I/O 都是通过完整的内核旁路完成的。当然，简单地做一个`mmap()`on并不容易`/dev/mem`。

您必须在内核中拥有驱动程序的最小部分——这是为您的用户空间提供内核所需的最低限度所必需的（因为如果您考虑一下`/dev/mem`）也由一个字符支持设备驱动）。

对于 DMA，它实际上太简单了——您所要做的就是处理`mmap`请求并将 DMA 缓冲区映射到用户空间。对于中断 - 有点棘手，无论如何，中断必须由内核处理，但是，内核可能不做任何工作，只是唤醒调用的进程，例如，`epoll_wait()`. 另一种方法是像 DOSEMU 那样向进程传递信号，但这非常慢，不推荐使用。

至于您的实际问题，您应该考虑的一个因素是资源共享。只要您不必在多个应用程序之间共享设备，并且在用户空间中没有什么是您不能做的，那就去用户空间吧。您可能会在开发周期中节省大量时间，因为编写用户空间代码非常容易。然而，当两个或更多应用程序需要共享设备（或其资源）时，您可能会花费大量时间来实现它——想象一下多个进程同时分叉、崩溃、映射（相同？）内存等. 毕竟，IPC 通常是通过内核完成的，所以如果应用程序需要开始相互“对话”，性能可能会大大降低。

另一个因素是内核基础设施。假设您要编写网络设备驱动程序。在用户空间中这样做不是问题。但是，如果您这样做，那么您也需要编写一个完整的网络堆栈，因为无法使用 Linux 内核中的默认堆栈。

如果可能的话，我会说去用户空间，并且使事情工作的努力少于编写内核驱动程序，并记住有一天可能需要将代码移动到内核中。事实上，根据是否定义了某些宏，为用户空间和内核空间编译相同的代码是一种常见的做法，因为在用户空间进行测试要愉快得多。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-07T17:34:52.527

Another consideration: it is far easier to debug user-space drivers. You can use gdb, valgrind, etc. Heck, you don't even have to write your driver in C.

There's a third option beyond just user space or kernel space drivers: some of both. You can do just the kernel-space-only stuff in a kernel driver and do everything else in user space. You might not even have to write the kernel space driver if you use the Linux UIO driver framework (see [https://www.kernel.org/doc/html/latest/driver-api/uio-howto.html](https://www.kernel.org/doc/html/latest/driver-api/uio-howto.html)).

I've had luck writing a DMA-capable driver almost completely in user space. UIO provides the infrastructure so you can just read/select/epoll on a file to wait on an interrupt.

You should be cognizant of the security implications of programming the DMA descriptors from user space: unless you have some protection in the device itself or an IOMMU, the user space driver can cause the device to read from or write to any address in physical memory.

# java - 方法不适用于参数

> ID：15286774
> 
> 赞同：0
> 
> 时间：2013-03-08T04:33:31.637
> 
> 标签：java, compiler-construction, parameters, arguments, boolean

我正在尝试创建一个测试器类，但这样做我得到了一个错误，它指出：

```
1 error found:

Error: The method printData(double, double) in the type PayCalculator is not
    applicable for the arguments () 
```

我如何解决它？这是我的测试代码

```
PayCalculator p1 = new PayCalculator();
    p1.setHourlyRate(8.25);
    p1.setHoursWorked(45.0);    
    p1.printData(); 
```

我的主要代码

```
{
  private double hourlyRate;
  private double hoursWorked;

  public PayCalculator()
  {
    hourlyRate = 0.0;
    hoursWorked = 0.0;
  }

  /**
   * Two parameter constructor
   * Add hourlyRate and hoursWorked
   * @param the hourly rate
   * @param the hours worked
   */
  public PayCalculator(double aHourlyRate, double aHoursWorked)
  {
    hourlyRate = aHourlyRate;
    hoursWorked = aHoursWorked;
  }

  /**
   * sets the hourly rate
   * @return hourlyRate
   */ 
  public void setHourlyRate(double aHourlyRate)
  {
    hourlyRate = aHourlyRate;
  }

  /**
   * gets the hourly rate
   * @param hourlyRate
   */
  public double getHourlyRate()
  {
    return hourlyRate;
  }

  /**
   * sets the hours worked
   * @return hoursWorked
   */ 
  public void setHoursWorked(double aHoursWorked)
  {
    hoursWorked = aHoursWorked;
  }

  /**
   * gets the hours worked
   * @param hours worked
   */
  public double getHoursWorked()
  {
    return hoursWorked;
  }

  public boolean workedOvertime()
  {
    if (hoursWorked > 40)
    {
      return true;
    }
    else 
    {
      return false;
    }
  }

  public double numHoursOvertime()
  {
    if (hoursWorked > 40)
    {
      return hoursWorked - 40;
    }
    else 
    {
      return 0;
    }
  }

  public double calculateGrossPay()
  {
    if (hourlyRate  <= 10.25)
    {
      if (hourlyRate <= 40)
        return hourlyRate * hoursWorked;
    }
    else 
    {  
      double grossPay = ((40 * hourlyRate) + ((hourlyRate * 2) * hoursWorked - 40));
      return grossPay;
    }

    if (hoursWorked <= 60)
    {
      return hourlyRate * hoursWorked;
    }
    else
    {
      return 60 * hourlyRate;
    }
  }

  public double determineTaxRate(double grossPay)
  {
    if (grossPay >= 800)
    {
      double tax = 0;
      tax = grossPay * 0.37;
      return tax;
    }
    else if ( grossPay >= 400)
    {
      double tax = 0;
      tax = grossPay * 0.22;
      return tax;
    }
    else
    {
      double tax = 0;
      tax = grossPay * 0.12;
      return tax;
    }
  }

  public double calculateNetPay(double grossPay, double tax)
  {
    double calculateNetPay = grossPay - tax;
    return calculateNetPay;
  }

  public void printData(double grossPay, double tax)
  {
    System.out.println("Hours Worked: " + hoursWorked);
    System.out.println("Hourly rate: " + hourlyRate);
    System.out.println("Number of hours of overtime worked: " + numHoursOvertime());
    System.out.println("Worked overtime? " + workedOvertime());
    System.out.println("Gross pay: " + calculateGrossPay());
    System.out.println("Tax Rate: " + determineTaxRate(grossPay));
    System.out.println("Net Pay: " + calculateNetPay(grossPay, tax));
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:35:10.713

嗯，是。这是方法声明：

```
public void printData(double grossPay, double tax) 
```

这是您尝试调用它的方式：

```
p1.printData(); 
```

您希望 和 使用什么`grossPay`值`tax`？

老实说，您应该`grossPay`已经指定工作时间和小时费率，这似乎很奇怪，但这是另一回事。最直接的问题是您没有提供方法所需的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:38:06.687

您的方法需要两个值`grossPay`和`tax`：

```
public void printData(double grossPay, double tax) 
```

但是你 在调用它时`grossPay`并没有提供它：`tax`

```
p1.printData(); 
```

在调用您的方法时包含 和 的值， `grossPay`它将`tax`正常工作，例如：

```
p1.printData(123.00,2.5); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:38:17.763

您的方法的定义是：

```
public void printData(double grossPay, double tax) 
```

它期望调用带有两个双参数，而您调用时不带参数：

```
p1.printData(); 
```

将双重参数传递给`printData(44.85d, 77.56d)`

# image - LoadMask 图像 - extjs

> ID：15286775
> 
> 赞同：3
> 
> 时间：2013-03-08T04:33:52.027
> 
> 标签：image, load, extjs4, mask

在我看来，我在加载时使用了掩码。现在它正在向我显示默认加载图像（x-mask-loading）我想添加我自己的图像而不是那个默认图像。任何人都可以有一些想法吗？请告诉我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T08:39:32.907

您可以通过将 css 规则应用于 loadMask 元素来更改加载图标（请参阅[loadingCls](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.view.AbstractView-cfg-loadingCls)配置）：

```
Ext.create('Ext.view.View', {
    loadingCls: 'custom-loader'
    // ...
}); 
```

```
/* CSS */
.x-mask-msg .custom-loader {
    background-image: url(http://example.com/custom-loading.gif);
} 
```

查看[演示](http://jsfiddle.net/molecule/frzk8/)。

### 更新

> 这不再适用于 extjs 4.2。签出新[版本](http://jsfiddle.net/eC39Q/)。知道如何解决这个问题吗？

这很奇怪，但 sencha 没有提供用于更改 loadMask 图标的 api（至少我没有找到）。所以唯一的选择是再次摆弄css：

```
/* CSS */
.x-mask-msg .custom-loader .x-mask-msg-text {
    background-image: url(http://example.com/custom-loading.gif);
} 
```

[ExtJs4.2 演示](http://jsfiddle.net/eC39Q/1)。

# c# - 如何创建一个应用程序，使用 C# 从 Excel 工作表动态读取资源文件？

> ID：15286776
> 
> 赞同：0
> 
> 时间：2013-03-08T04:34:02.330
> 
> 标签：c#

我的要求是创建一个应用程序来创建从 excel 表动态读取的资源文件。

我已经完成了从 excel 中读取值的工作。而且我知道如何动态创建资源文件。但是我不知道如何通过从 excel 表中读取值来动态创建资源文件。

在我的项目中，本地化概念就在那里。我们需要从 excel 工作表中创建多个资源文件。

# java - 尝试在泛型类上实现可比较的接口时出现绑定不匹配错误

> ID：15286781
> 
> 赞同：0
> 
> 时间：2013-03-08T04:34:28.737
> 
> 标签：java, generics

我正在为家庭作业制作自定义 PriorityQueue 类，但遇到了障碍。我不知道如何解决我在 Eclipse 中遇到的这个 Bound Mismatch 错误；它不会让我尝试编译，因为它说：

> 有界不匹配：该类型`K`不是该类型的有界参数`<K extends Comparable<K>>`的有效替代品`Entry<K,V>`

优先队列.java：

```
 public class PriorityQueue<K,V> {

    private Entry<K,V> _head;
    private Entry<K,V> _tail;
    private int _size;

    public PriorityQueue() {
      this._head = null;
      this._tail = null;
      this._size = 0;
    }

    public int size() {
      return _size;
    }

    public boolean isEmpty() {
      return (size() == 0);
    }

    public Entry<K,V> min() {
      if (_head == null) {
        return null;
      }
      Entry<K,V> current = _head;
      Entry<K,V> min = _head;;

      while (current != null) {
        if (current.compareTo(min) < 0) {
          min = current;
        }
        current = current.getNext();
      }
      return min;
    }

    public Entry<K,V> insert(K k, V x) {
      Entry<K,V> temp = new Entry<K,V>(k,x);
      if (_tail == null) {
        _tail = temp;
        _head = temp;
      }
      else {
        _tail.setNext(temp);
        temp.setPrev(_tail);
        _tail = temp;
      }
      return temp;
    }

    public Entry<K,V> removeMin() {
      Entry<K,V> smallest = min();
      smallest.getPrev().setNext(smallest.getNext());
      smallest.getNext().setPrev(smallest.getPrev());

      return smallest;
    }

    public String toString() {
      return null;
    }

    public static void main(String[] args) {
      PriorityQueue<Integer, Integer> pq = 
          new PriorityQueue<Integer, Integer>();

      pq.insert(4, 2);
      pq.insert(5, 1);
      pq.insert(1, 5);

      System.out.println(pq.min().toString());
    }
  } 
```

入口.java：

```
public class Entry<K extends Comparable<K>,V> implements Comparable<Entry<K,V>> {

  private V _value;
  private K _key;
  private Entry<K,V> _prev;
  private Entry<K,V> _next;

  public Entry(K key, V value) {
    this._value = value;
    this._key = key;
    this._prev = null;
    this._next = null;
  }

  public V getValue() {
    return this._value;
  }

  public K getKey() {
    return this._key;
  }

  public Entry<K,V> getNext() {
    return _next;
  }

  public void setNext(Entry<K,V> link) {
    this._next = link;
  }

  public Entry<K,V> getPrev() {
    return _prev;
  }

  public void setPrev(Entry<K,V> link) {
    this._prev = link;
  }

  public String toString() {
    return "" + this.getValue();
  }

  @Override
  public int compareTo(Entry<K,V> o) {
    if (o instanceof Entry<?,?>) {
      return this.getKey().compareTo(o.getKey());
    }
    throw new IllegalArgumentException("Objects are not comparable.");
  }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:37:42.303

您必须使 K`Comparable`也扩展为`PriorityQueue`：

```
public class PriorityQueue<K extends Comparable<K>,V> { 
```

实际上，泛型类型 K 将用于`Entry<K,V>`，并且 Entry 具有它必须扩展（实际实现）的约束`Comparable<K>`。您必须告诉编译器 PriorityQueue 的 K 也满足此约束，因此它允许您使用`Entry<K,V>`.

如果没有，有人可以将 PriorityQueue 与不会扩展 Comparable 的 K 一起使用，并且编译器必须检查 K 的所有使用情况，以查看是否没有阻止它使用的约束。

# node.js - 使用路径模块更改路径分隔符

> ID：15286793
> 
> 赞同：7
> 
> 时间：2013-03-08T04:35:47.890
> 
> 标签：node.js, path

这是我的代码：

```
var thisImageName = thisRow["imagename"];
var thisImagePath = path.relative("./public", __dirname + "/public/uploads/" + thisImageName + ".jpg");
console.log(thisImagePath); // returns __dirname\public\uploads\
img.src = thisImagePath.split(path.sep).join("/"); 
```

要获得适当的图像路径，我必须按路径分隔符拆分，然后用适当的斜杠加入数组。有谁知道这样做更有效的方法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-08-25T21:51:19.690

此外，您始终可以通过专门使用 posix 路径 API 在路径中获取正斜杠：

```
var p = path.posix.relative("./public", imagePath); 
```

**编辑：**此 api 仅在节点 0.12 或更高版本中可用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-09-09T15:36:01.243

约翰的回答只会替换 '\' 的第一个实例

```
img.src = thisImagePath.replace(new RegExp('\\' + path.sep, 'g'), '/'); 
```

将替换所有这些。

您可以将 'g' 标志传递给`.replace`but this [non-standard](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)。

# c# - Lync UCMA SDK Server - 全球订阅所有 Presentities 的状态更新

> ID：15286795
> 
> 赞同：2
> 
> 时间：2013-03-08T04:35:56.237
> 
> 标签：c#, ucma, lync-server-2010

是否可以在不单独订阅所有呈现体的情况下从 Lync 服务器全局捕获所有呈现更改？

我们所追求的似乎与 UCMA SDK 中的 RemotePresenceView 类非常相似，但该类只允许您订阅您所知道的呈现体。我们是否需要加载所有存在物然后订阅它们——即使你可以，这是一个可扩展的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T11:46:07.097

请注意您的问题，虽然它已经有点老了，但我想我会回答它以防万一。

我不知道 UCMA 中的任何内容，但也许有一个 SIP 存储库，您可以访问（可能来自 AD？）并像往常一样通过 RemotePresenceView 订阅存在。

我的经验是 RPV 订阅实际上可以很好地扩展，尽管您可能希望以数百个而不是单独的批次调用 RPV.BeginSubscription(sips)，否则您不会总是收到 SubscriptionStateChange 事件。

您可能无法在任何单独的呼叫中使用 RPV.BeginSubscription(sips) 超过 1000 次，但我确实编写了最终订阅超过 10,000 次的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T08:37:13.323

如果您希望捕获整个系统的状态更改，另一种建议是使用 Lync Server 2010 SDK（[下载](http://www.microsoft.com/en-us/download/details.aspx?id=19675)| [MSDN](http://msdn.microsoft.com/en-us/library/gg421042.aspx)）。这将允许您创建一个 SIP 过滤器来“嗅探”每个状态变化的发生。当状态发生变化时，客户端实际上“要求”服务器更改状态，然后服务器将状态变化发送给所有相关方：例如您登录的其他设备，以及任何标记您的状态的人。

您可以编写一个 SIP 过滤器来阅读这些在线状态更改说明。SDK 允许您异步处理您想要对它们执行的任何操作，而不会因减慢消息的传递速度而影响 Lync 的性能。

（SDK 还允许您做其他事情，例如阻止或更改交付等，但这不在此范围内）

# ruby-on-rails - RoR 中的空类字段

> ID：15286796
> 
> 赞同：0
> 
> 时间：2013-03-08T04:35:57.860
> 
> 标签：ruby-on-rails

在 Rails Guide 上，我看到一个类被定义为

```
class Person < ActiveRecord::Base
end 
```

然后它写道

```
>>p = Person.new(:name => "John Doe")
=>#<Person id: nil, name: "John Doe", created_at: nil, :updated_at: nil 
```

既然类 Person 没有字段，为什么在这里将 :name 属性传递给构造函数是有效的？它不应该有一些错误吗？

另外，为什么 id、name、created_at 都没有冒号，而 :updated_at 有一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:38:52.703

因为您的类继承自`ActiveRecord::Base`并且 ActiveRecords 查看您的数据库并动态创建与相应数据库表中的列匹配的属性。

`updated_at`也没有专栏。请再仔细看看。这一定是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:39:14.643

要查看 ActiveRecord 类中定义的字段，您需要查看该`db/schema.rb`文件。这将向您显示通过迁移创建的字段。

# api - SetWindowLong 和 SetLayeredWindowAttributes 不适用于不同的用户 C#

> ID：15286801
> 
> 赞同：2
> 
> 时间：2013-03-08T04:36:26.563
> 
> 标签：api, windows-xp, opacity, alpha, setwindowlong

**目标是**

我想更改在 win xp 上运行的某些应用程序（目标）的不透明度。

**情况**

*   我以 AD (active dir) 用户帐户 (some-domain\username) 登录 win xp
*   大多数目标应用程序以本地用户或其他广告用户身份运行

**问题和我的问题**

`SetWindowLong`&`SetLayeredWindowAttributes`不适用于作为其他用户帐户运行的目标应用程序。但它适用于在同一用户帐户下运行的目标应用程序（登录用户帐户）

***如何更改以不同用户帐户运行的其他应用程序的窗口不透明度？***

**插图应用**

这是一个获胜表单应用程序（我们称之为 OpaciToggler.exe）。我有 2 个按钮（btnRunSomething 和 btnHideThatThing）和一个文本框（txtPid）。就如此容易。

当我单击 btnRunSomething 时，它以不同的用户身份运行 .exe。所有详细信息都在 app.config 中。在这种情况下，我以不同的用户 (localComputer\user1) 运行此应用程序（OpaciToggler.exe，来自 debug/bin）

txtPid 用于手动输入 pid。通常我打开任务管理器（win > run > taskmgr）并找到我想要测试的任何应用程序（目标）的pid（在进程选项卡下），然后在此处输入。

当我单击 btnHideThatThing 时，它将切换目标应用程序的不透明度（其 pid 在 txtPid 中）

**代码 C#**

这就是我调用目标应用程序的方式。

```
 private void btnRunSomething_Click(object sender, EventArgs e)
    {
        System.Diagnostics.Process p = new System.Diagnostics.Process();

        p.StartInfo.Domain = ConfigurationManager.AppSettings["StartInfoDomain"]; 
        p.StartInfo.UserName = ConfigurationManager.AppSettings["StartInfoUserName"]; 

        p.StartInfo.FileName = ConfigurationManager.AppSettings["StartInfoFileName"];
        p.StartInfo.Arguments = ConfigurationManager.AppSettings["StartInfoArguments"];

        System.String rawPassword = ConfigurationManager.AppSettings["StartInfoPassword"];
        System.Security.SecureString encPassword = new System.Security.SecureString();

        foreach (System.Char c in rawPassword)
        {
            encPassword.AppendChar(c);
        }

        p.StartInfo.Password = encPassword;
        p.StartInfo.UseShellExecute = false;

        p.Start();
    } 
```

这就是我尝试调用不透明度的方式

```
 private void btnHideThatThing_Click(object sender, EventArgs e)
    {
        // manual input pid 
        int pid = int.Parse(txtPid.Text);
        IntPtr mwh = Process.GetProcessById(pid).MainWindowHandle;
        doHideThing(mwh);  

        // doHideThing(Process.GetProcessById(int.Parse(txtPid.Text)).MainWindowHandle);
    } 
```

隐藏方法

```
 private void doHideThing(IntPtr hndl)
    {
        SetWindowLong(hndl, GWL_EXSTYLE, GetWindowLong(hndl, GWL_EXSTYLE) ^ WS_EX_LAYERED).ToString();
        // _whatNow = Marshal.GetLastWin32Error();

        SetLayeredWindowAttributes(hndl, 0, (255 * 20) / 100, LWA_ALPHA).ToString();
        // _whatNow = Marshal.GetLastWin32Error();

        RedrawWindow(hndl, IntPtr.Zero, IntPtr.Zero,
            RedrawWindowFlags.Erase | RedrawWindowFlags.Invalidate |
            RedrawWindowFlags.Frame | RedrawWindowFlags.AllChildren);            
    } 
```

其他代码

```
 private const int GWL_EXSTYLE = -20;
    private const int GWL_STYLE = -16;
    private const int WS_EX_LAYERED = 0x80000;
    private const int LWA_ALPHA = 0x2;
    private const int LWA_COLORKEY = 0x1;

    [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
    static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);

    [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall, SetLastError = true)]
    private static extern int GetWindowLong(IntPtr hWnd, int nIndex);

    [DllImport("user32.dll", SetLastError = true)]
    static extern bool RedrawWindow(IntPtr hWnd, IntPtr lprcUpdate, IntPtr hrgnUpdate, RedrawWindowFlags flags); 
```

RedrawWindowFlags 枚举（我不记得我从哪里得到的）

```
[Flags()]
enum RedrawWindowFlags : uint
{
    /// <summary>
    /// Invalidates the rectangle or region that you specify in lprcUpdate or hrgnUpdate.
    /// You can set only one of these parameters to a non-NULL value. If both are NULL, RDW_INVALIDATE invalidates the entire window.
    /// </summary>
    Invalidate = 0x1,

    /// <summary>Causes the OS to post a WM_PAINT message to the window regardless of whether a portion of the window is invalid.</summary>
    InternalPaint = 0x2,

    /// <summary>
    /// Causes the window to receive a WM_ERASEBKGND message when the window is repainted.
    /// Specify this value in combination with the RDW_INVALIDATE value; otherwise, RDW_ERASE has no effect.
    /// </summary>
    Erase = 0x4,

    /// <summary>
    /// Validates the rectangle or region that you specify in lprcUpdate or hrgnUpdate.
    /// You can set only one of these parameters to a non-NULL value. If both are NULL, RDW_VALIDATE validates the entire window.
    /// This value does not affect internal WM_PAINT messages.
    /// </summary>
    Validate = 0x8,

    NoInternalPaint = 0x10,

    /// <summary>Suppresses any pending WM_ERASEBKGND messages.</summary>
    NoErase = 0x20,

    /// <summary>Excludes child windows, if any, from the repainting operation.</summary>
    NoChildren = 0x40,

    /// <summary>Includes child windows, if any, in the repainting operation.</summary>
    AllChildren = 0x80,

    /// <summary>Causes the affected windows, which you specify by setting the RDW_ALLCHILDREN and RDW_NOCHILDREN values, to receive WM_ERASEBKGND and WM_PAINT messages before the RedrawWindow returns, if necessary.</summary>
    UpdateNow = 0x100,

    /// <summary>
    /// Causes the affected windows, which you specify by setting the RDW_ALLCHILDREN and RDW_NOCHILDREN values, to receive WM_ERASEBKGND messages before RedrawWindow returns, if necessary.
    /// The affected windows receive WM_PAINT messages at the ordinary time.
    /// </summary>
    EraseNow = 0x200,

    Frame = 0x400,

    NoFrame = 0x800
} 
```

**示例、测试和测试结果**

*   以 domainA\ad_user1 身份登录 win xp
*   运行 OpaciToggler.exe 应用程序（Instance1，作为 domainA\ad_user1 运行）
*   然后我点击运行一些东西。它会打开另一个 OpaciToggler.exe (Instance2)，作为另一个用户帐户运行（作为 localcomputer\l_user1 运行）或右键单击 .exe，然后单击 run as..

实例1

*   PID：1234
*   运行为：domainA\ad_user1
*   txtPid: 5678 (Instance2, 不工作)
*   txtPid：1234（自我，作品）
*   txtPid：任何 pid 作为同一个帐户运行（例如：notepad.exe、calc.exe 等都可以）

实例2

*   PID：5678
*   运行为：localcomputer\l_user1
*   txtPid：1234（实例1，不起作用）
*   txtPid：5678（自我，作品）
*   txtPid：任何 pid 以同一帐户运行 (localcomputer\l_user1)（例如：notepad.exe、calc.exe 等，不起作用！！）

**再次，我的问题**

***如何更改以不同用户帐户运行的其他应用程序的窗口不透明度？***

感谢和抱歉我的英语不好:(。

# css - 带有标签垂直对齐的 JQuery Mobile 滑块

> ID：15286804
> 
> 赞同：0
> 
> 时间：2013-03-08T04:36:46.180
> 
> 标签：css, jquery-mobile

我有以下烦人的问题，你可以在[这里](http://jsfiddle.net/wigiri/XMKGW/)看到小提琴。它是一个带有标签的简单滑块，这是 HTML：

```
<ul data-role="listview" id="general-settings-list">
    <li data-role="fieldcontain" class="ui-btn ui-li ui-btn-inner">
    <div>
    <label class="ui-label" for="shake">Shake</label>
    </div>
    <div id="slider-container">
    <select name="shake" id="shake" data-role="slider" data-mini="true">
<option value="0">No</option>
<option value="1">Yes</option>
</select>
</div>
</li>
</ul> 
```

使用以下 CSS（使用 Jquery Mobile 1.3、css 和 js）：

```
#slider-container {
    position: relative;
    float:right;  
    margin-top: -10px !important;    
}

#slider-container .ui-slider {
    margin-top: -50px !important;
} 
```

当我调整显示大小（即窗口大小）而不是按原样对齐时： ![目标](../Images/2a6c9d432faedf8c4539bcdcada716ea.png)

它显示未对齐，如下所示：

![问题](../Images/5ebb3171229f30e3ff3f86dafcd30446.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T23:14:25.380

我刚刚将 CSS 更改为：

```
#slider-container {
    position: relative;
    float:right;  
    margin-top: -8px !important;    
} 
```

现在可以使用

# java - 如何创建一个可以滚动的大图像

> ID：15286806
> 
> 赞同：0
> 
> 时间：2013-03-08T04:36:57.250
> 
> 标签：java, android, android-layout, android-canvas

目前我有一个类可以根据 sqlite 文件的内容动态绘制一堆正方形。由于数据非常大，绘图比屏幕大很多倍。我已经阅读了很多建议的方法来做到这一点，并且不确定最好的方法。因为我在渲染后不会更改图像（只需要在重新启动时动态渲染它），[这里](https://stackoverflow.com/questions/4013725/converting-a-canvas-into-bitmap-image-in-android)列出的第一个答案似乎是最好的，但我并不完全理解如何这样做。

如果我理解正确，我：

1.  创建位图，
2.  创建我的画布（大于屏幕分辨率）
3.  抓取缓存的位图并
4.  渲染位图与画布。

但是我缺乏在现有代码中实现这一点的知识。我现有的代码只是创建了一个非常大的画布（我没有定义边界，我只是开始绘制）。我的主要课程如下所示：

```
package com.example.drawdemo;
import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;

public class DrawDemo extends Activity {
    DrawView drawView;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    drawView = new DrawView(this);
    drawView.setBackgroundColor(Color.WHITE);
    setContentView(drawView);
    }
} 
```

而 DrawView 类是这样的：

```
public class DrawView extends View {

    public DrawView(Context context) {
        super(context);            
    } 

    @Override
    public void onDraw(Canvas canvas) {

        //LOTS OF CODE HERE to figure out how to render rectangles through loops
        //  similar to lines like this
        canvas.drawRect(xStart, rectYPointer, xEnd, rectYPointer+rectSize, paint);
        // or this
        canvas.drawText(String.valueOf(rectSize), 130, rectYPointer*2, paint);

    }

} 
```

我采用的方法是否正确，可以让我向下滚动并看到这个比 android 屏幕更大的大图像？如果是这样，我如何迁移我的代码以符合我认为是正确方法的答案中列出的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T09:05:36.113

好吧，我很害怕你没有明白链接主题的重点。这与您尝试实现的目标完全不同。

本主题是关于在稍后使用的位图上绘图。

你已经有一个构建的位图了吗？（或者至少您可以使用以下资源从资源中加载它：

BitmapFactory.decode...（根据您输入的资源或文件，请参阅[此处的文档](http://developer.android.com/reference/android/graphics/BitmapFactory.html)）

您的画布不必很大就可以在屏幕内滚动。画布的大小是视图的大小（这里是屏幕的大小），但您将根据要应用的滚动位置绘制位图。

请参阅： [canvas.drawBitmap() 的文档](http://developer.android.com/reference/android/graphics/Canvas.html#drawBitmap%28android.graphics.Bitmap,%20android.graphics.Rect,%20android.graphics.RectF,%20android.graphics.Paint%29) 和[canvas.translate](http://developer.android.com/reference/android/graphics/Canvas.html#translate%28float,%20float%29)也可以提供帮助。

基本上你想要的是：在你的视图中获取加载位图的引用（使用 bitmapdecode）。然后在 onDraw 中，在视图的画布上绘制位图以将其显示在屏幕上。然后，要添加滚动效果，请尝试在画布上绘制时更改画布的 y 平移。

希望有帮助。

有关在画布上绘图的更多信息（以及一个很好的示例），我建议您打开 API 演示项目源代码：

```
API Demos -> Graphics -> TouchPaint 
```

# jquery - 可以通过 jQuery html() 方法设置的最大数据限制是多少

> ID：15286808
> 
> 赞同：4
> 
> 时间：2013-03-08T04:37:08.990
> 
> 标签：jquery, html, innerhtml

`.html()`从 Ajax 事件获得响应文本后，我将通过 jQuery 方法更改 div 内容。

有时我会得到更多响应数据（包含 html 和脚本以及大约 4MB 的数据）。`.html()`使用 jQuery方法将响应数据设置为 div 内容确实需要更多时间。

有人可以告诉我原因吗？有没有解决方案或替代方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:42:17.503

首先，定期下载和插入 4MB 的 HTML 永远不会成为一个快速的交互式应用程序。它将成为一个网络贪婪和内存贪婪的人，并且表现不佳。

`.html()`除了浏览器可以访问多少内存之外 ，该方法没有技术限制。`.html()`是原生属性之上的一个外壳，`.innerHTML`没有特别的限制。

4MB 的 HTML 需要大量时间来下载，并且浏览器需要大量时间来解析。这可能就是您看到的延迟。时间可能与jQuery无关。在与您设置的实际内容无关的一些初始内务处理之后，jQuery 只是设置`.innerHTML`属性并且浏览器处理解析您提供给它的 HTML 内容。

现在，如果你要替换大量的 HTML（例如另外 4MB 的 HTML 集），那么 jQuery 可能会慢很多，因为它必须遍历旧内容中的每个元素并确保它已经清除了与那些即将被移除的元素。

* * *

你真的应该修复你的页面设计/应用程序设计，这样你就不必使用 4MB 的 HTML。

# php - 样式 PHP 代码 WordPress

> ID：15286810
> 
> 赞同：0
> 
> 时间：2013-03-08T04:37:09.397
> 
> 标签：php, wordpress, styles

如何以白色文本进行以下输出？跨度？分区？

```
<?php global $current_user;
  get_currentuserinfo();
  echo 'Welcome, ' . $current_user->user_firstname . "\n";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:47:53.480

尝试

`echo 'Welcome,<span class="white-text">' . $current_user->user_firstname . "</span>\n";`

css

```
.white-text{
 color:white;
} 
```

您可以使用 span 和 div。

# php - PHP HTML 解析器（是否没有好的 HTML 解析器）

> ID：15286819
> 
> 赞同：0
> 
> 时间：2013-03-08T04:37:47.410
> 
> 标签：php, web-scraping

我整天都在尝试不同的 PHP HTML 解析器来进行网络抓取。他们都很好地处理了 Google.com，或者他们在主页上发布的其他类似示例。但是他们都在“ [http://www.nhl.com/ice/schedulebyseason.htm](http://www.nhl.com/ice/schedulebyseason.htm) ”上失败了。

最初我编写了一个 Perl 脚本来执行此操作。Perl 上的 Web::Scraper 绝对没有问题。我 5 分钟前回去了，它完美地完成了这项工作。但是我的共享主机并不真正支持 Perl。我认为，即使对于 PHP，我也坚持使用 5.3.13。

如果您尝试使用：

1.  PHP 简单的 HTML DOM 解析器
2.  加农

他们失败了。

`Call to a member function find() on a non-object`当我尝试使用返回的已解析文档时，PHP Simple 会引发异常。我认为这就是它失败的原因，返回 null 或其他。

给定 URL 后，ganon 将永远处理。

到底是怎么回事？我是 PHP 的完全新手。

PHP 简单 HTML DOM 解析器示例：

```
 include_once('simple_html_dom.php');

 $doc = file_get_html('http://www.nhl.com/ice/schedulebyseason.htm');

 foreach($doc->find('img') as $img){
  echo $img->id . '<br>';
 } 
```

加农：

```
include_once('ganon.php');

$doc = file_get_dom('http://www.nhl.com/ice/schedulebyseason.htm'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:08:45.393

Symfony 2 框架有一个非常棒的解析器

查看[DomCrawler](http://symfony.com/doc/2.0/components/dom_crawler.html)和[Goutte](https://github.com/fabpot/Goutte)

[您也可以使用composer](http://getcomposer.org/)安装单个组件。

# ios - imageView 背景未更新

> ID：15286820
> 
> 赞同：1
> 
> 时间：2013-03-08T04:37:54.543
> 
> 标签：ios, uiimageview

我的应用程序有一个`UIImageView`as 背景，我有`background.png`.

今天，我得到了一个新资源并对其进行了更新——删除了旧文件（删除），并添加了新文件。

令我惊讶的是，我第一次运行它时，它仍然以某种方式显示旧图像。每隔一次，它就会显示新的图像。

我试图清理，重建，没有帮助。我什至试图删除整个“DerivedData”文件夹，但仍然没有帮助。

有人知道这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:05:06.150

我以前遇到过这个问题，当我将两个同名的文件添加到我的项目中时，它就发生了。您可以在项目导航器中搜索它，看看是否可以找到额外的文件。

您还可以在项目导航器中选择您的项目，选择您的目标并进入 Build Phases 并查看 Copy Bundle Resources 部分中是否有多个对同一文件名的引用。

![在此处输入图像描述](../Images/0f5e4dbbee09e81df14b20b8590034f2.png)

# authentication - 具有基于 Office 365 的 SharePoint 2013 Web 应用程序的多个身份提供者

> ID：15286822
> 
> 赞同：1
> 
> 时间：2013-03-08T04:38:10.660
> 
> 标签：authentication, office365, azure-acs

我正在尝试让多个身份提供商（Google、Facebook、多个 ADFS）与 Office 365 上配置的 SharePoint 2013 Web 应用程序一起工作。

我知道与 ADFS 和 Shibboleth 相关的选项，但我想知道是否有任何方法可以让 Azure ACS 处理此 Web 应用程序的身份验证。我确实有一个与 Azure ACS 配合使用的本地 SharePoint 2013 Web 应用程序，但没有太多关于如何使用 Office 365 或是否可行的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T13:21:54.360

不支持（尚）。
鉴于 Office 365 使用 Windows Azure AD，我们可以希望 ACS 支持有一天会到来。

# node.js - mongodb和node.js中的身份验证和护照

> ID：15286824
> 
> 赞同：3
> 
> 时间：2013-03-08T04:38:20.463
> 
> 标签：node.js, mongodb, authentication, passport.js

我在 mongodb 中有一个这样的集合

```
{
   username:silver,
   Email:sil@gmail.com,
   password:silvester,
} 
```

所以要进行身份验证，我将从数据库中获取数据，然后我将使用这样的 if 语句检查给定的电子邮件是否存在

```
app.post("/login",function(req,res){

   var email=req.body['emailid'];

   collection.find({email:sil@gmail.com}).toArray(function(err,res)
   {
      if(res.length==0){
         console.log("name is not exist");
      }else{
         if(res.email==email){
            console.log("email is exist");
         }else{
            console.log("not exist");
         }
      }
   });
}); 
```

所以在这里如何使用护照模块进行身份验证。让我通过配置示例代码知道它。我正在使用 express3.x 框架。所以如何配置它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T08:51:21.050

[在这里](http://passportjs.org/guide/username-password/)您可以阅读有关本地策略的信息，以及有关配置的信息[。](http://passportjs.org/guide/configure/)

您的本地策略应如下所示：

```
passport.use(new LocalStrategy({
        emailField: 'email',
        passwordField: 'passw',
    },

    function (emailField, passwordField, done) {
        process.nextTick(function () {
            db.collection(dbCollection, function (error, collection) {
                if (!error) {
                    collection.findOne({
                        'email': sil@gmail.com
                        'password': silvester // use there some crypto function
                    }, function (err, user) {
                        if (err) {
                            return done(err);
                        }
                        if (!user) {
                            console.log('this email does not exist');
                            return done(null, false);
                        }
                        return done(null, user);
                    });
                } else {
                    console.log(5, 'DB error');
                }
            });
        });
    })); 
```

# python - 需要在python中添加字典的某些部分

> ID：15286827
> 
> 赞同：1
> 
> 时间：2013-03-08T04:38:43.863
> 
> 标签：python

好的，所以在我们的项目中，我们使用了一个嵌套字典，例如：

```
line4 = {'fmlast14': {'quiz1': 100, 'quiz2': 100,
                      'lab1': 100, 'lab2': 100, 'lab3': 100, 'lab4': 100, 'lab5': 75,
                      'exam0': 92}} 
```

在下一步中，他要求我们“计算平均测验、实验和考试分数。使用标签的公共前缀来查找单独的测验、实验和考试分数。例如，计算平均实验分数'fmlast12'，将与具有前缀 'lab' 的五个标签关联的分数相加，然后除以五。”

我明白他在说什么，但我不明白我应该如何添加仅以“quiz(x)”或“lab(x)”开头的元素。

在这部分之前，我们应该读取第一行并将其标签存储在一个列表中（我们正在读取一个名为 scores.txt 的文本文件然后我们应该读取每个后续​​行并使用嵌套字典存储其内容。这是到目前为止我得到了什么：

```
def read_scores(filename):
#with open(filename, 'r') as f:
    #first_line = f.readline()

    f = open(filename)
    lines = f.readlines()
    lines[1:]
    with open(filename, 'r') as f:
        second_line = f.readline()
        second_line[2:]
    line2 = { 'fmlast12' : {'quiz1' : 66, 'quiz2' : 100, 'lab1' : 100, 'lab2' : 100, 'lab3' : 75, 'lab4' : 75, 'lab5' : 75, 'exam0' : 86}}
    line3 = { 'fmlast13' : {'quiz1' : 100, 'quiz2' : 0, 'lab1' : 100, 'lab2' : 100, 'lab3' : 0, 'lab4' : 50, 'lab5' : 75, 'exam0' : 68}}
    line4 = { 'fmlast14' : {'quiz1' : 100, 'quiz2' : 100, 'lab1' : 100, 'lab2' : 100, 'lab3' : 100, 'lab4' : 100, 'lab5' : 75, 'exam0' : 92}}

def write_report(filename):
    line2 = { 'fmlast12' : {'quiz1' : 66, 'quiz2' : 100, 'lab1' : 100, 'lab2' : 100, 'lab3' : 75, 'lab4' : 75, 'lab5' : 75, 'exam0' : 86}}
    sum(line2.values())

    c = defaultdict(int)
    for d in line2:
        c[d['quiz1']] += d['amt'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:42:18.863

如果这是您的标准字典格式，您可以尝试类似

```
# for lab
In [5]: l = [line4['fmlast14'][x] for x in line4['fmlast14'].keys() if x.startswith('lab')]

In [6]: sum(l)/len(l)
Out[6]: 95

# for quiz

In [7]: l2 = [line4['fmlast14'][x] for x in line4['fmlast14'].keys() if x.startswith('quiz')]

In [8]: l2
Out[8]: [100, 100]

In [9]: avg = sum(l2)/len(l2)

In [10]: avg
Out[10]: 100 
```

你也可以这样做

```
In [22]: [v for k, v in line4['fmlast14'].items() if k.find('quiz') > -1]
Out[22]: [100, 100]

In [23]: [v for k, v in line4['fmlast14'].items() if k.find('lab') > -1]
Out[23]: [100, 100, 100, 100, 75] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:55:29.263

编写一个函数来计算平均值可能是个好主意

```
>>> line2 = { 'fmlast12' : {'quiz1' : 66, 'quiz2' : 100, 'lab1' : 100, 'lab2' : 100, 'lab3' : 75, 'lab4' : 75, 'lab5' : 75, 'exam0' : 86}}
>>> def get_average(d, prefix):
...     scores = [v for k, v in d.items() if k.startswith(prefix)]
...     return float(sum(scores))/len(scores)
... 
>>> get_average(line2['fmlast12'], 'quiz')
83.0
>>> get_average(line2['fmlast12'], 'lab')
85.0 
```

现在你需要整理你的函数来读取分数。目前没有多大意义

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:49:44.997

您还可以使用函数进行优化：

```
def getAvg(dVals, keyVal, nameStart):
    vals = [val for key, val in dVals[keyVal].iteritems() if key.startswith(nameStart)]
    return float(sum(vals) / len(vals))

for line in [line2, line3, line4]:
    person = line.keys().pop()
    print "Avg lab for {0} is {1}.".format(person, getAvg(line2, person , 'lab'))
    print "Avg quiz for {0} is {1}.".format(person, getAvg(line2, person , 'quiz')) 
```

# javascript - 断点在使用 Firebug(1.11.2) 的 Firefox (19.0) 中不起作用

> ID：15286829
> 
> 赞同：1
> 
> 时间：2013-03-08T04:38:54.533
> 
> 标签：javascript, debugging, firefox, firebug, breakpoints

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>An example</title>

        <script type="text/javascript">
            function User(id) {
                this.id = id;
            };
            var bob = new User(32);

            var jack = new User(bob.id); 
            jack.id = 100;   // Set a breakpoint here, but it does not stop here
            alert('end of test' + jack.id);
        </script>
    </head>
    <body>

    </body>
</html> 
```

顺便说一句，断点在 chrome 中正常工作。

我很困惑......这应该是一个非常简单的例子。这是 Firefox 的错误吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:51:28.413

确实，我也复制了它。似乎是一个错误。

但是有一些注意事项：

1.  通常，建议像您正在执行的操作一样直接最小化 JavaScript 的执行，但在页面加载后推迟执行。例如，您可以将所有内容包装在一个名为的函数中`init`，然后将`addEventListener`/`attachListener`用于`load`事件（或 write `<body onload="init()">`）。在 HTML 中执行 JS as-you-go 会减慢页面的渲染速度；所有的 JS 都必须被解析和执行，因为它可能会动态添加一些 HTML 元素，这会改变页面上 HTML 的呈现。因此，请避免以这种方式将计算量大且冗长的脚本添加到页面中。

2.  您还可以将代码包装在所谓的 IIFE（立即调用函数表达式）中：

    ```
     <script type="text/javascript">
     (function () {
         function User(id) {
             this.id = id;
         };
         var bob = new User(32);

         var jack = new User(bob.id); 
         jack.id = 100;   // Set a breakpoint here, but it does not stop here
         alert('end of test' + jack.id);
     })();
     </script> 
    ```

    在这种情况下，Firebug 会正确执行断点。

3.  请注意，在 Firebug 的代码清单中，第 13 行和第 14 行未标记为绿色。这是来自 Firebug 的信息，如果你把它放在这一行，就不会遇到断点。在大多数情况下，这意味着该行中没有 JavaScript（例如：HTML、空行、注释等），但有时这是由于 Firebug 中的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:17:54.650

看起来像萤火虫的虫子。在最后一条语句之前添加新行似乎可以解决问题。

# excel - MS Excel，多行，如果多行具有相同的值，则使用 VLOOKUP 复制数据

> ID：15286839
> 
> 赞同：1
> 
> 时间：2013-03-08T04:39:24.190
> 
> 标签：excel, duplicates, rows, vlookup

我有一个包含以下数据的 Excel 电子表格。

```
ID        lastname           firstname           dob
------------------------------------------------------
123       Alderson           Sophie             01-01-1900
456                          Sophie
5573      Alderson           Sophie 
```

我试图通过*[VLOOKUP](http://office.microsoft.com/en-in/excel-help/vlookup-HP005209335.aspx)*函数和一些条件语句的组合来实现某些目标，但要绕圈子。

在这种情况下，所有记录都属于一个人 (Alderson-sophie)。同一个人可能有 1 条或更多条记录。但所有行可能具有或可能不具有与所示相同的信息。

因此，我需要将属于同一个人的其他行中的任何信息（单元格）复制到第一行（将被视为主行），确保如果行之间的数据存在差异，则值被复制到它，除第一个之外的行保持原样/空白。

任何帮助/指针请..

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-26T16:42:31.620

如果您创建了自己的键列怎么办？也许将 ID、姓氏和名字连接起来创建一个唯一的代码？这就是我们对床单所做的事情。

# xaml - windows phone - 遍历 .resx

> ID：15286843
> 
> 赞同：0
> 
> 时间：2013-03-08T04:39:39.523
> 
> 标签：xaml, windows-phone, resx

我正在学习如何为 Windows Phone 7/8 编写应用程序。我正在开发一个简单的食谱应用程序。起初，我对所有值进行了硬编码，但随后我将数据移动到 .resx 以本地化配方。现在，如果我想实现一个搜索功能怎么办？我不认为遍历 .resx 是理想的方法。我可以使用某种数据库吗？我还能本地化那个数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T23:34:35.977

我只能假设您正在谈论本地化应用程序。如果是这种情况，请从[有关为 Windows Phone 构建本地化应用程序的官方指南](http://msdn.microsoft.com/en-us/library/ff637520%28VS.92%29.aspx)开始。

您可能还对以下内容感兴趣：[Windows Phone 的本地化最佳实践](http://msdn.microsoft.com/en-us/library/ff967552%28v=vs.92%29.aspx)。

# java - Netty：回调在哪里？

> ID：15286846
> 
> 赞同：2
> 
> 时间：2013-03-08T04:39:57.663
> 
> 标签：java, asynchronous, netty

我最近开始使用 JBoss Netty，到目前为止我的理解是 channelPipelineFactory 用于创建 ChannelPipeline，每次服务器收到请求时。ChannelPipeline 包含一系列处理请求的 ChannelHandler。现在我的问题是，如果我的管道中的一个处理程序需要从数据库中获取数据，这就是阻塞 I/O。请求的处理被阻塞了？这与通过 Servlet 进行的常规请求处理有何不同？我对来自 NodeJS 的事件驱动异步 I/O 的理解是，有一个事件循环，并且注册了一系列用于阻塞 I/O 操作的回调函数，并且在 I/O 完成时调用这些函数。Netty 中的等价物是什么？

```
private static final HttpResponseEncoder httpResponseEncoder = new HttpResponseEncoder();
private static final JsonEncoder jsonEncoder = new JsonEncoder();
private static final ExecutionHandler executionHandler = new ExecutionHandler(
        new OrderedMemoryAwareThreadPoolExecutor(5, 1048576, 1048576));

public static void main(String[] args) throws Exception {
    ChannelFactory factory = new NioServerSocketChannelFactory(Executors.newCachedThreadPool(),
            Executors.newCachedThreadPool());
    SocketAddress sockAddress = new InetSocketAddress(8080);

    RedisClient client = new RedisClient("127.0.0.1");
    final RedisAsyncConnection<String, String> connection = client.connectAsync();

    ServerBootstrap bootstrap = new ServerBootstrap(factory);
    bootstrap.setPipelineFactory(new ChannelPipelineFactory() {
        @Override
        public ChannelPipeline getPipeline() throws Exception {
            ChannelPipeline pipeline = Channels.pipeline();
            pipeline.addLast("executionHandler", executionHandler);
            pipeline.addLast("weightedRandomGenerator", new WeightedRandomNumberGenerator(
                    connection));
            pipeline.addLast("encoder", httpResponseEncoder);
            pipeline.addLast("JsonConverter", jsonEncoder);
            return pipeline;
        }
    });
    bootstrap.setOption("child.tcpNoDelay", true);
    bootstrap.setOption("child.keepAlive", true);
    bootstrap.bind(sockAddress);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:12:08.377

如果您需要运行阻塞操作，您需要在执行阻塞操作的 ChannelHandler 前面放置一个 ExecutorHandler。这会将所有 ChannelHandler 从 EventLoop（IO-Thread）“移动”到另一个线程，从而“解除阻塞”EventLoop。

见[1]

[1] [http://netty.io/3.6/api/org/jboss/netty/handler/execution/ExecutionHandler.html](http://netty.io/3.6/api/org/jboss/netty/handler/execution/ExecutionHandler.html)

# ios - 在真实设备上通过命令行实现 UIAutomation

> ID：15286850
> 
> 赞同：7
> 
> 时间：2013-03-08T04:41:13.353
> 
> 标签：ios, command-line, instruments, ui-automation, ios-ui-automation

我知道从`Xcode 4.2`可以`UIAutomation`通过命令行运行脚本开始。我已经尝试过了，并且在模拟器中对我来说工作得很好。我想知道如何在实际设备中运行它。我搜索并获得了在设备上运行的命令，

`instruments -w <device_id> -t /Developer/Platforms/iPhoneOS.platform/Developer/Library/Instruments/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate`

`application -e UIASCRIPT`

`script -e UIARESULTSPATH <results path>`

我到底应该在*应用程序中给出什么，是**ipa*的路径还是其他什么？

提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T07:37:35.353

你需要给它`.ipa`文件的路径。它实际上只需要*应用程序名称*，因此您只需传入应用程序名称即可。 **非常重要：**需要在设备上安装应用程序，Instruments*不会*在设备上安装应用程序，**它只会在设备上运行已安装的应用程序**

# java - 测试StringBuilder和StringBuffer的区别

> ID：15286852
> 
> 赞同：0
> 
> 时间：2013-03-08T04:41:14.930
> 
> 标签：java, stringbuilder, stringbuffer

我只是想直观地看到它们之间的区别，所以下面是代码。但它总是失败。有人可以帮我吗？我也看到过关于 SO 的问题，但没有一个以编程方式显示出差异。

```
public class BBDifferencetest {
     protected static int testnum = 0;

     public static void testStringBuilder() {
             final StringBuilder sb = new StringBuilder();

             Thread t1 = new Thread() {

                     @Override
                     public void run() {
                             for (int x = 0; x < 100; x++) {
                                     testnum++;
                                     sb.append(testnum);
                                     sb.append(" ");                                
                             }
                     }
             };
             Thread t2 = new Thread() {

                     public void run() {

                             for (int x = 0; x < 100; x++) {
                                     testnum++;
                                     sb.append(testnum);
                                     sb.append(" ");
                             }
                     }
             };
             t1.start();
             t2.start();

             try {
                     t1.join();
                     t2.join();
             } catch (InterruptedException e) {
                     e.printStackTrace();
             }

             System.out.println("Result is: " + sb.toString());

        }

     public static void main(String args[]) {
             testStringBuilder();
     }
} 
```

当我执行此操作时，有时会以随机方式获得输出，因此这证明了我的测试。但是当我什至替换`StringBuilder`并`StringBuffer`测试时，它甚至给了我意想不到的输出（而不是从 1 到 200 的顺序输出）。那么有人可以帮助我从视觉上了解差异吗？

**PS：**如果有人有您的代码显示差异，我很乐意接受它作为答案。因为我不确定即使修改了我的代码是否可以实现差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T04:47:20.570

> （而不是从 1 到 200 的顺序）

每个线程都在对`testnum`. 这*本身*不是线程安全的。

然后每个线程再次获取 的值`testnum`以附加它。到那时，另一个线程很可能已经中断并再次增加该值。

如果您将代码更改为：

```
AtomicInteger counter = new AtomicInteger();
...
sb.append(counter.getAndIncrement()); 
```

那么你更有可能看到你所期望的。

为了更清楚，将循环更改为只调用`append`一次，如下所示：

```
for (int x = 0; x < 100; x++) {
    sb.append(counter.incrementAndGet() + " ");
} 
```

当我这样做时，因为`StringBuffer`我总是得到“完美”的输出。因为`StringBuilder`我有时会得到这样的输出：

```
97 98 100    102     104 
```

这里两条线同时附加，内容已经搞砸了。

编辑：这是一个较短的完整示例：

```
import java.util.concurrent.atomic.AtomicInteger;

public class Test {

    public static void main(String[] args) throws InterruptedException {
        final AtomicInteger counter = new AtomicInteger();
        // Change to StringBuffer to see "working" output
        final StringBuilder sb = new StringBuilder();
        Runnable runnable = new Runnable() {
            @Override
            public void run() {
                for (int x = 0; x < 100; x++) {
                    sb.append(counter.incrementAndGet() + " ");
                }
            }
        };

        Thread t1 = new Thread(runnable);
        Thread t2 = new Thread(runnable);
        t1.start();
        t2.start();
        t1.join();
        t2.join();
        System.out.println(sb);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:53:01.113

StringBuffer 在方法级别同步。这意味着如果线程已经在他的方法之一中，则没有人可以进入他的方法之一。但它并不能保证只要另一个线程使用它，一个线程就会被阻塞使用 StringBuilder，因此两个线程仍然会竞争访问方法，并且您可能会随机得到一个无序的结果。

真正锁定对 StringBuffer 的访问的唯一方法是将访问它的代码放在同步块中：

```
public void run() {
    synchronized(sb) {
        for (int x = 0; x < 100; x++) {
           testnum++;
           sb.append(testnum);
           sb.append(" ");                                
        }
    }
} 
```

如果你不这样做，那么线程 1 可以进入 sb.append(testnum) 并且线程 2 将在它的入口处等待，当线程 1 出去时，线程 2 可能会进入内部并在 Thread 之前开始写入1 进入 sb.append(" ")。所以你会看到：

```
12 13 1415  16 .... 
```

问题是，像这样的锁定也会使 StringBuilder 工作。这就是为什么人们可以说 StringBuffer 上的同步机制毫无用处，因此不再使用它的原因（Vector 也是如此）。

因此，这样做并不能向您展示 StringBuilder 和 StringBuffer 之间的区别。Jon Skeet answer中的建议更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:17:38.323

西里尔所说的+1。我想只有固有原子类型（原语 <= 32 位）的数组的性质才能使您免于使用 StringBuilder 获取 ConcurrentModificationException ，例如附加到`List<Integer>`

基本上，您有两个线程，每个线程有 100 个单独的操作。两者在每次追加之前竞争对象的锁定，并在之后释放它，每个 100 次。在每次迭代中获胜的线程将随机化（非常）少量的时间来增加循环计数器和 testnum。

与您的示例不同的更多示例不一定是排序，而是确保在使用 StringBuilder 时实际考虑所有插入。它没有内部同步，因此完全有可能在此过程中某些内容会被修改或覆盖。StringBuffer 将通过内部同步来处理此问题，以确保所有插入都正确插入，但您需要外部同步（例如上面 Cyrille 的示例）来为每个线程的整个迭代序列持有锁，以安全地使用 StringBuilder。

# batch-file - .bat 适用于基于 NT 的 Windows 但不适用于 DOS 或 9x？

> ID：15286854
> 
> 赞同：2
> 
> 时间：2013-03-08T04:41:39.117
> 
> 标签：batch-file, windows-xp, cmd, dos, windows-98

我为不能在 Win32 上运行的游戏编写了一个用于遗留 DOS 系统的批处理文件。该代码在 XP x86 下运行良好，但是当我在 98SE 或 DOS 中运行它时，在第一次提示后出现语法错误。由于 goto，文件运行到一个循环中。我该如何解决？

**源代码：**

```
@echo off
:PROMPT
cls
echo.
echo  Welcome to the Game Selection Wizard!
echo  --------------------------------------
echo.
echo  Please Select a Game: 
echo.
echo  1\. Game1
echo  2\. Game2
echo  3\. Return To MS-DOS
echo.
set /p GAME= Your Current Selection: 
if %game%==1 goto Game1
if %game%==1\. goto Game1
if %game%==2 goto Game2
if %game%==2\. goto Game2
if %game%==3 goto QUIT
if %game%==3\. goto QUIT
goto INVALID
:INVALID
cls
echo.
echo  * * * * * * * * * * * * * * * * * * * * * * * * * * *
echo  *                                                   *
echo  * ERROR:                                            *
echo  * ------                                            *
echo  * The choice you selected is wrong. Try Again!      *
echo  *                                                   *
echo  * * * * * * * * * * * * * * * * * * * * * * * * * * *
echo.
echo  Welcome to the Game Selection Wizard!
echo  -------------------------------------
echo.
echo  Please Select a Game: 
echo.
echo  1\. Game1
echo  2\. Game2
echo  3\. Return To MS-DOS
echo.
set /p gameerror= Your Current Selection: 
if %gameerror%==1 goto Game1
if %gameerror%==1\. goto Game1
if %gameerror%==2 goto Game2
if %gameerror%==2\. goto Game2
if %gameerror%==3 goto QUIT
if %gameerror%==3\. goto QUIT
cls
goto INVALID
:Game1
cls
call A:\GAMES\Game1.exe
goto PROMPT
:Game2
cls
call A:\GAMES\Game2.exe
goto PROMPT
:QUIT
cls
echo.
echo  Are you sure you want to return to MS-DOS?
echo.
set /p quit= Confirmation: 
if %quit%==y goto DIE
if %quit%==Y goto DIE
if %quit%==yes goto DIE
if %quit%==Yes goto DIE
if %quit%==YES goto DIE
if %quit%==n goto PROMPT
if %quit%==N goto PROMPT
if %quit%==no goto PROMPT
if %quit%==No goto PROMPT
if %quit%==NO goto PROMPT
goto QUITERROR
:QUITERROR
cls
echo  * * * * * * * * * * * * * * * * * * * * * * * * * * *
echo  *                                                   *
echo  * ERROR:                                            *
echo  * ------                                            *
echo  * The choice you selected is wrong. Try Again!      *
echo  *                                                   *
echo  * * * * * * * * * * * * * * * * * * * * * * * * * * *
echo.
echo  Are you sure you want to return to MS-DOS?
echo.
set /p quiterror= Confirmation: 
if %quiterror%==y goto DIE
if %quiterror%==Y goto DIE
if %quiterror%==yes goto DIE
if %quiterror%==Yes goto DIE
if %quiterror%==YES goto DIE
if %quiterror%==n goto PROMPT
if %quiterror%==N goto PROMPT
if %quiterror%==no goto PROMPT
if %quiterror%==No goto PROMPT
if %quiterror%==NO goto PROMPT
goto QUITERROR
:DIE
cls
echo.
echo  Returning to MS-DOS... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T05:21:43.080

AFAIR - 很久以前 - SET /P 是 NT-only。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-09T16:17:16.533

首先使用 VER 来检测操作系统，通过管道输出到 FIND（不是 findstr）并寻找“重要字符串”。这只需要做一次 - 所以把它直接放在`@ECHO OFF`

```
set running=NT
ver|find "1998" >nul
if not errorlevel 1 set running=DOS 
```

"1998" 是一个重要的字符串，它应该只出现在 Win98 的 VER 中。其他要查找的值是“2222”（W98SE）和“3000”（WinME） - 因此只需为您需要检测的字符串重复行对。

当你想接受输入时，你需要使用 SET/P 用于 NT 或 CHOICE 用于 DOS

if %running%=NT set /p ....&goto :ntxxx :: else running DOS 选择 ...

其中标签 NTXXX 是您对 NT 输入的处理（例如，您似乎允许“2”或“2.”）

CHOICE 命令对击键作出反应并根据使用的击键设置 ERRORLEVEL。`CHOICE/?`将显示语法。既然`IF ERRORLEVEL xx`意味着`"If errorlevel is xx OR GREATER"`那么有必要处理以 REVERSE 顺序做出的选择（最后位置=最高 ERRORLEVEL 首先）

（我再也无法轻松访问 pre-XP 系统，所以以上所有内容均来自记忆）

有趣的是，CHOICE 再次出现在 Vista 中……

# javascript - 粘性页脚内的粘性页脚

> ID：15286855
> 
> 赞同：0
> 
> 时间：2013-03-08T04:41:54.570
> 
> 标签：javascript, html, css

环境：ASP.NET MVC 4、Visual Studio 2012

我的网站上有一个“粘性页脚”，其中包含通常的版权声明以及联系方式、隐私政策等链接（我使用了来自[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)的粘性页脚代码）。实现此方案的 HTML 位于我的站点模板 (_Layout.cshtml) 中。

现在，我有一个网页，上面有一些按钮，我想在页面底部（就在页脚上方）呈现这些按钮。但我对这整个 CSS 很陌生，我不知道如何构建我的正文 HTML（和相关的 CSS），以便正文有自己的粘性页脚。

仅供参考，我不喜欢使用纯 CSS 来做到这一点。我的网站是一个相当特殊的网站，我毫不犹豫地要求我的客户启用 JavaScript。

例如：

+----------------------------------------------------------
| 页眉，来自_Layout.cshtml
+------------------------------------------ ----
| 页面正文，在我看来
|
|
| 从我的角度来看，粘性“body”页脚
+---------------------------- ------
| 页脚，来自 _Layout.cshtml
+------------------------------ ----

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:53:23.593

您可以在页脚部分中包含要在页面底部呈现的按钮，以便与现有的页脚内容一起，这些新添加的按钮的行为方式也相同。

# c - 使用 AT89S51 串行传输整数值

> ID：15286861
> 
> 赞同：0
> 
> 时间：2013-03-08T04:42:28.267
> 
> 标签：c, microcontroller, 8051

我编写了一个程序来为 AT89S51 串行传输 char 值。它运行良好。

程序如下：-

```
 #include<reg51.h>
 void main()
 {
 TMOD=0x20;
 TH1=0xFD;
 SCON=0x50;
 TR1=1;
 while(1)
 {
 SBUF='A';
 while(TI==0);
 TI=0;
 }
 } 
```

在上面的代码中，传输了字符“A”。

现在我想传输一个整数值，我已经为它编写了一个程序。

程序如下：-

```
 #include<reg51.h>
 void main()
 {
 int i=61;
 TMOD=0x20;
 TH1=0xFD;
 SCON=0x50;
 TR1=1;
 while(1)
 {
 SBUF=i;
 while(TI==0);
 TI=0;
 }
 } 
```

上面的程序正在传输**'='**（即十进制61对应ASCII中**的'='** 字符）。

我想知道如何传输整数值。

请在这方面指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T06:54:04.023

`SBUF`包含要传输的单个字节（即字符）。如果你把'A'放在那里，这就是将要传输的内容（实际上0x41将被传输，它对应于'A'的ASCII值）。分配`i`into的值时`SBUF`，它将被解释为字节，而与 的类型无关`i`。这个字节可以以接收方希望的任何方式解释——它可以将其视为整数或 ASCII 值，就传输而言，它是相同的；不同之处在于处理数据的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T17:58:20.343

如果您只想传输 char 或 unsigned char，Icepack 是正确的，但如果您真的想传输超过 8 位，则必须逐字节进行。您正在尝试做的事情需要将字节放入数组中，并通过线路一次发送一个字节（8051 中的 SBUF 一次只能保存单个 TX 和单个 RX 值）。除了你还有另一个问题，你是先传输最高有效字节，还是最后传输？然后你应该问自己，如果对方知道你的数据格式，你是否想传输二进制数据（只是通过网络传输字节）？或者您是否想使用字符串，如果您想要某种终止符、换行符或其他不可打印的字符，那么数字“34567”将占用例如五个字节（五个 ASCII 码）或更多，

# windows-phone-7 - Windows mobile、windows phone 7 和 windows phone 8 中的应用程序开发

> ID：15286866
> 
> 赞同：0
> 
> 时间：2013-03-08T04:43:22.463
> 
> 标签：windows-phone-7, windows-mobile, windows-phone-8, windows-phone-7.1

windows phone 7 和 windows phone 8 的应用程序开发有什么不同吗？

在 windows mobile 中，这就像开发一个基于表单的应用程序，但在 windows phone 7 中，除了 c# 编码之外，一切都发生了变化。在 wp7 中，我们使用基于 xaml 的设计而不是表单。两者只有 c# 相同。

在 windows phone 7 和 8 中开发应用程序有这种区别吗？两者都使用相同的编码风格和相同的工具和技术？我是否需要学习其他有关 windows phone 8 应用程序开发的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T06:20:23.930

根据编码风格，Windows Phone 7 和 Windows Phone 8 是相同的。但是您需要随[WP8 SDK](https://dev.windowsphone.com/en-us/downloadsdk)一起提供的“Visual Studio 2012 Express for Windows Phone” 。使用 WP8，您可以为 WP 7.5 和 WP 8 开发应用程序。

Windows Phone 8 是对 Windows Phone 7/7.5 的升级。WP8 几乎包含了 WP7 所具有的所有内容，并为其添加了一些附加功能。查看此链接以了解[Windows Phone 8 中的新增功能](http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T07:25:26.380

**工具：**

WP7 和 WP8 都需要带有适当 Windows Phone SDK 的 Visual Studio。对于 WP7，它是 VS2010 和 WP7 SDK，对于 WP8，它是带有 WP8 SDK 的 VS2012。两者都有 Visual Studio Express 免费版。对于 WP8 开发，您需要 Windows 8（对于 WP7，Windows 7 就足够了）。WP8 模拟器还有一个进一步的要求——你的处理器必须支持 SLAT。

**技术：**

WP7 和 WP8 都使用 XAML+C#（或 XAML+VB.NET）进行应用程序开发。两者之间在细节上存在一些差异，但是您不应该真正为此烦恼。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T06:49:15.000

两者都是一样的。我同意！但问题是我们如何才能更好地同时使用 windows phone 7 和 windows phone 8 很重要。Windows Phone 8 SDK 已经支持为这两个版本的 Windows Phone 开发应用程序，面向 Windows Phone 7 的应用程序无需修改即可在 Windows Phone 8 上运行。

借助条件编码功能及其可重用性，Windows 8 应用程序开发运行良好。可以使用基本代码链接为不同平台的 windows phone 的两个独立项目的集成。获取 windows phone 8 上的功能。

下面的链接会帮助你

[http://visualstudiomagazine.com/articles/2012/11/30/developing-for-windows-phones-7-and-8.aspx](http://visualstudiomagazine.com/articles/2012/11/30/developing-for-windows-phones-7-and-8.aspx)

# django - NoReverseMatch - 未找到带有参数和关键字参数 {} 的“详细信息”的反向

> ID：15286868
> 
> 赞同：9
> 
> 时间：2013-03-08T04:43:34.963
> 
> 标签：django

出于某种原因，我似乎无法解决这个错误。我正在使用 Django 1.5

我得到的实际错误是

```
Reverse for 'detail' with arguments '()' and keyword arguments '{u'slug': u'third-post'}' not found. 
```

在我的项目目录中，我有这个 urls.py

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'blog.views.home', name='home'),
    # url(r'^blog/', include('blog.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),

    #include the blogapp url
    url(r'', include('blogapp.urls', namespace='blog')),
) 
```

我的应用程序文件夹中的 urls.py 看起来像这样

```
urlpatterns = patterns ('',

    url(r'^$', 
            ListView.as_view(
                    queryset = Post.objects.order_by('-pub_date')[:5],
                    context_object_name = 'latest_posts',
                    template_name = 'blogapp/default.html'),
            name = 'index'
        ),

    url(r'^post/(?P<slug>\w+)/$',
            PostDetailView.as_view(),
            name = 'detail'
        ),
) 
```

我的帖子详细信息视图如下所示

```
class PostDetailView(DetailView):

    template_name = 'blogapp/post/detail.html'

    def get_object(self):
        return get_object_or_404(Post, slug__iexact = self.kwargs['slug']) 
```

我的 html 中有这个

```
{% for p in latest_posts %}
      <li><a href="{% url 'blog:detail' p.slug %}">{{p.title}}</a></li>
{% endfor %} 
```

我可以打开我的 shell 并获得一个 url

```
>>> from django.core.urlresolvers import reverse
>>> reverse('blog:detail', kwargs={'slug':'test'})
'/post/test/' 
```

奇怪的是在我的 html 中这条线有效

```
<li><a href="{% url 'blog:detail' p.id %}">{{p.title}}</a></li> 
```

为什么 p.id 可以工作而不是 p.slug？

这是回溯

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/

Django Version: 1.5
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs',
 'south',
 'blogapp')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Template error:
In template .../Development/Python/Django/dev/blog/blogapp/templates/blogapp/default.html, error at line 11
   Reverse for 'detail' with arguments '()' and keyword arguments '{u'slug': u'third-post'}' not found.
   1 : {% extends "blogapp/base.html" %}

   2 : 

   3 : {% block title %}Blog Posts{% endblock %}

   4 : 

   5 : {% block body %}

   6 : 

   7 :     {% if latest_posts %}

   8 :         <p>Latest 5 blog posts</p>

   9 :             <ul>

   10 :                 {% for p in latest_posts %}

   11 :                     <li><a href=" {% url 'blog:detail' slug=p.slug %} ">{{p.title}}</a></li>

   12 :                 {% endfor %}

   13 :             </ul>

   14 :     {% else %}

   15 :         <p>No blog posts published.</p>

   16 :     {% endif %}

   17 : 

   18 : {% endblock %}

   19 : 

   20 : 

Traceback:
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  140\.                     response = response.render()
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/response.py" in render
  105\.             self.content = self.rendered_content
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/response.py" in rendered_content
  82\.         content = template.render(context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/base.py" in render
  140\.             return self._render(context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/base.py" in render
  830\.                 bit = self.render_node(node, context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  124\.         return compiled_parent._render(context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/base.py" in _render
  134\.         return self.nodelist.render(context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/base.py" in render
  830\.                 bit = self.render_node(node, context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/loader_tags.py" in render
  63\.             result = block.nodelist.render(context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/base.py" in render
  830\.                 bit = self.render_node(node, context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/defaulttags.py" in render
  284\.                 return nodelist.render(context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/base.py" in render
  830\.                 bit = self.render_node(node, context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/defaulttags.py" in render
  188\.                         nodelist.append(node.render(context))
File ".../.virtualenvs/env1/lib/python2.7/site-packages/django/template/defaulttags.py" in render
  424\.                         raise e

Exception Type: NoReverseMatch at /
Exception Value: Reverse for 'detail' with arguments '()' and keyword arguments '{u'slug': u'third-post'}' not found. 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-08T05:31:11.263

因为你的url代码不支持这个字符“-”，它必须是

```
 url(r'^post/(?P<slug>[\w\-]+)/$',
        PostDetailView.as_view(),
        name = 'detail'
    ), 
```

# seo - 来自“不相关”搜索的流量会改善我的 SEO 吗？

> ID：15286870
> 
> 赞同：-1
> 
> 时间：2013-03-08T04:43:54.650
> 
> 标签：seo, search-engine

我是一个科技夏令营​​项目的创始人。我的网站有一个页面，其中包含针对营地参与者的网络开发资源，并且已经从查询 html 颜色、css 备忘单和其他类似术语的人那里获得了大量流量。

我的问题是：来自这些术语的流量是否会损害我的 SEO 查询涉及夏令营、哈利法克斯技术营或其他更相关的查询？或者任何流量对我的 SEO 有好处吗？

注意：我们对访问这些资源的人没有问题，所以我没有费心对其进行密码保护或添加 robots.txt 或其他任何内容。该站点是 compcamp.ca，我提到的资源页面是 compcamp.ca/web-development-design-resources/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T07:12:36.410

`compcamp.ca/web-development-design-resources/`谷歌在搜索查询（如 CSS 备忘单）方面对该网站进行了很好的排名，因为您网站的内容包含关键字等。“哈利法克斯科技营”等没有关键字。所以谷歌不会对这个子网站进行排名。

如果您想对 fpr “tech camps halifax”进行排名，您必须在包含这些关键字的网站（我希望是起始页）上获取内容。

反过来：在您的备忘单子站点上成功的搜索查询不会损害您在其他子页面中的排名，这些子页面提供不同的信息 = 不同的关键字。

我希望这能回答你的问题，如果没有，请不要问。

# php - 由于目标机器主动拒绝，无法建立连接。WordPress

> ID：15286871
> 
> 赞同：0
> 
> 时间：2013-03-08T04:43:59.350
> 
> 标签：php, mysql, wordpress, host

> 警告：mysql_connect() [function.mysql-connect]: [2002] 无法建立连接，因为目标机器在 D:\Hosting\8224951\html\word 中主动（尝试通过 tcp://localhost:3306 连接） \wp-includes\wp-db.php 在第 1141 行
> 
> 警告：mysql_connect() [function.mysql-connect]：无法建立连接，因为目标机器主动拒绝。在第 1141 行的 D:\Hosting\8224951\html\word\wp-includes\wp-db.php

尝试连接到我的 wordpress 网站时，我总是遇到此错误。我到处搜索，似乎找不到解决方案。

这是我的 wp_db 文件包含在 1141 上。

```
 if ( WP_DEBUG ) {
        $this->dbh = mysql_connect(':/Applications/MAMP/tmp/mysql/mysql.sock', 'ShiftBusinessSol', '123456!');
    } else {
        $this->dbh = mysql_connect(':/Applications/MAMP/tmp/mysql/mysql.sock', 'ShiftBusinessSol', '123456!');
    } 
```

至于配置我有这个：

```
 /** The name of the database for WordPress */
 define('DB_NAME', 'ShiftBusinessSol');
/** MySQL database username */
 define('DB_USER', 'ShiftBusinessSol');
/** MySQL database password */
define('DB_PASSWORD', '123456!');
/** MySQL hostname */
define('DB_HOST', '127.0.0.1:3306');

/** Database Charset to use in creating database tables. */
define('DB_CHARSET', 'utf8');

/** The Database Collate type. Don't change this if in doubt. */
define('DB_COLLATE', ''); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:36:58.267

错误

> [2002] 无法建立连接，因为目标机器主动

在 Wordpress 中表示 的设置`DB_HOST`是错误的。

```
/** MySQL hostname */
define('DB_HOST', '127.0.0.1:3306'); 
```

但是，在*您的*情况下，需要特别注意：

该文件`wp-db.php`已从原始 Wordpress 修改，不再允许您通过标准 Wordpress 配置配置数据库主机。

因此，在您的情况下，请联系为您提供 Wordpress 修改版本的供应商并讨论该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-24T05:23:44.163

连接错误 (2002) 由于目标机器主动拒绝连接，无法建立连接。我已经重新设置了 Windows 并尝试了几乎所有操作.... wamp 刚刚停止工作....现在无论我在 win 10 上下载和安装 wamp 多少次，我似乎都会遇到两个错误，即 2002 错误和 msvcr120.dll错误......我两周前没有这个问题......请提出建议

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-16T08:04:10.243

从命令行检查您的数据库是否正在侦听任何端口。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-18T02:16:09.943

我建议你不要把问题弄得太复杂，让我们使用 wamp 代替 xampp 或者只是购买一个主机然后你可以有更多的时间专注于开发。

# computation - 抽引引理条件 3 概念

> ID：15286874
> 
> 赞同：-1
> 
> 时间：2013-03-08T04:44:31.773
> 
> 标签：computation, pumping-lemma

我正在关注我教科书中关于抽水引理的一个例子：

```
Let C = {w | w has an equal number of 0s and 1s}

Condition 3 stipulates: |xy| <= p

If |xy| <= p, then y must consist only of 0s, so xyyz is not in C. 
Therefore s cannot be pumped 
```

我无法理解条件 3 如何得出“y 必须仅由 0 组成，因此 xyyz 不在 C 中”的结论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:57:22.623

我猜选择的字符串是 0 ^p 1 ^p。由于 |xy| <= p，并且 xyz = 0 ^p 1 ^p，字符串 xy 将是 0 ^k其中 k <= p 因为 0 ^p 1 ^p的前 p 个符号都是 0。由于 xy 仅由 0 组成，因此 y 也必须仅由 0 组成

并学会以适当的方式提出你的问题。你不能指望别人“预测”你的问题，而你只放了一半的信息

# iphone - 从 safari 反向返回应用程序

> ID：15286875
> 
> 赞同：0
> 
> 时间：2013-03-08T04:44:37.253
> 
> 标签：iphone, ios, uiwebview, safari

在我的应用程序中，我通过单击按钮在 Safari 中调用 url，我正在使用以下代码

在野生动物园中，我使用的是支付宝付款。点击捐赠按钮后，是否有机会退回到我的应用程序。

```
-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
 if ( inType == UIWebViewNavigationTypeLinkClicked ) {
    [[UIApplication sharedApplication] openURL:[inRequest URL]];
     return NO;
 }

  return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:48:47.263

否 对于您无法控制的网站，这是不可能的。相反，您可以在 web 视图中打开该链接。

如果您已经开发了网站，您可以使用自定义 URL 将其重定向到您的应用程序。有关详细信息，请参阅[本教程](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

对于您的情况，即 Paypal，这是不可能的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:47:22.693

您可以使用后退按钮将您的网站打开到视图控制器内的网站，而不是使用`[[UIApplication sharedApplication] openURL:]`方法。因此您可以从 safari 回到您的应用程序。

按照这个片段，

```
`NSURL *url = [NSURL URLWithString:<YOUR_URL>];

 NSURLRequest *request = [NSURLRequest requestWithURL:url];

 webViewBrowser.delegate = self;

[webViewBrowser loadRequest:request];` 
```

享受编程！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:49:28.710

如果您尝试从 Safari 导航到您的应用程序，您将需要控制您将用户发送到的网页。在网页上创建一个链接到应用程序的自定义 URL 方案的按钮。然后，当用户单击按钮时，您的应用程序将在设备上打开。

# c++ - C++ MinGW 如何从 Windows 编译 Linx

> ID：15286876
> 
> 赞同：0
> 
> 时间：2013-03-08T04:44:39.593
> 
> 标签：c++, linux, windows, mingw

我目前有适用于 Windows 的 MinGW，并且想为 Linux 开发（我已阅读我需要头文件），我将在哪里获得 Linux 头文件并设置为使用 MinGW code::blocks 编译 Windows 和 Linux 程序。

注意：我已经研究过，但找不到从 Windows 到 Linux 的任何东西，只有 Linux 到 Windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:09:54.947

我不完全明白您所说的“开发”是什么意思，但是如果您想在为某些 Linux 系统生成二进制文件的环境中工作，您就不能真正“开发”，因为您无法在 Windows 上真正运行/调试它们（使用交叉编译）。

另一方面，如果你想开发可在 Linux 上编译的代码，你已经在那里了。由于您使用 MinGW 进行开发，因此您几乎可以保证您的代码将在具有相应版本 GCC 的 Linux 下编译。要为所选的 Linux 发行版生成二进制文件，您可以使用 VM，速度无关紧要，因为您可能不会经常这样做。

# javascript - 可见性隐藏在淡入后多次闪烁

> ID：15286880
> 
> 赞同：1
> 
> 时间：2013-03-08T04:44:50.253
> 
> 标签：javascript, jquery, html

一旦您到达页面上的某个点，我正在尝试在某些图像移动后让一些文本淡入。如果我已经在页面下方并刷新，它工作正常，但是当我从顶部滚动到该区域时，它会执行正确的动画，但随后文本开始一遍又一遍地闪烁。有没有办法阻止这种情况？

这是javascript

```
$(document).ready(function(){
            $(window).scroll(function(){
                if ($(this).scrollTop() > 1350) {
               $('#managecontent1').animate({bottom: '0px'},900);
               $('#managecontent2').animate({bottom: '0px'},900,function(){
                        $('#twocolumntextcontainer').css("visibility","visible").hide().fadeIn('slow');
                   });
           }
                });
        }); 
```

这是HTML

```
<div id="twocolumntextcontainer">
        <div id="twocolumntextleft">
            <p>C.M.S. <span>Wordpress</span></p>
        </div>
        <div id="twocolumntextright">
            <p>F.T.P. <span>FileZilla</span></p>
        </div>
    </div>
    <div class="twocolumnlayout">
        <div id="managecontent1">
            <img src="img/wordpresslogo_203x203.png" />
        </div>
        <div id="managecontent2">
            <img src="img/filezillaicon_210x208.png" />
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:55:54.583

你已经设定了会导致这种情况的条件。

如果你看一下，你是在每次窗口滚动并且 scrollTop 值大于 1350px 时触发动画。如果您继续滚动超过这一点，动画将不断触发。

一旦满足您的条件，您可能希望取消绑定 eventListener（假设您不希望动画再次发生，直到页面刷新）。

在你的 if 语句中添加这个：

```
$(this).unbind('scroll'); 
```

一旦满足您的条件，这将完全从窗口中解除滚动侦听器的绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T04:56:05.143

你可以尝试以下

```
$(document).ready(function () {
            $(window).scroll(function () {
                $('#twocolumntextcontainer').fadeOut("slow");
                if ($(this).scrollTop() > 1350) {
                    $('#managecontent1').animate({ bottom: '0px' }, 900);
                    $('#managecontent2').animate({ bottom: '0px' }, 900, function () {
                        $('#twocolumntextcontainer').fadeIn('slow');
                    });
                }
            });
        }); 
```

# c++ - 访问祖父虚拟方法

> ID：15286881
> 
> 赞同：1
> 
> 时间：2013-03-08T04:44:58.893
> 
> 标签：c++, parent, virtual-functions

好吧，我有三个课程：

```
template<typename E>
class Iterator {
public:
    virtual ~Iterator() {
    }
    virtual bool hasNext() const = 0;
    virtual const E& next() = 0;
};

template<typename E>
class IteratorPtr {
private:
    Iterator<E>* iterator;
    IteratorPtr(const IteratorPtr<E>&);
    IteratorPtr<E>& operator=(const Iterator<E>&);
public:
    IteratorPtr(Iterator<E>* it)
            : iterator(it) {
    }
    ~IteratorPtr() {
        delete iterator;
    }
    Iterator<E>* operator->() const {
        return iterator;
    }
};    

template<typename E>
class Collection
{

public:
    virtual void add(const E & value) = 0;
    virtual void add(const Collection<E>& collection);
    virtual bool remove(const E& value) = 0;
    virtual void clear() = 0;
    virtual ~Collection()
    {

    }
    virtual bool isEmpty() const = 0;
    virtual int size() const = 0;
    virtual bool contains(const E& value) const = 0;
    virtual Iterator<E>* iterator() const = 0;

};

void Collection<E>::add(const Collection<E>& collection)
{
for (IteratorPtr<E> i(collection.iterator()); i->hasNext();) {
    this->add(i->next());
}

} 
```

Obs：所有Set的方法都实现了。

```
template<typename E>
class Set;
template<typename E>
class SortedSet;
template<typename E>
class SetIterator;

template<typename E>
class SetNode {
private:
    friend class Set<E> ;
    friend class SortedSet<E> ;
    friend class SetIterator<E> ;
    SetNode()
            : next(NULL) {
    }
    SetNode(E value)
            : value(value), next(NULL) {
    }
    SetNode(E value, SetNode * next)
            : value(value), next(next) {
    }
    ~SetNode() {
    }
private:
    E value;
    SetNode * next;
};

template<typename E>
class SetIterator: public Iterator<E> {
private:
    friend class Set<E> ;
    SetIterator(SetNode<E> * head)
            : node(head) {
    }
    ~SetIterator() {
    }
    bool hasNext() const {
        return node != NULL;
    }
    const E & next() {
        E& value = node->value;
        node = node->next;
        return value;
    }

private:
    SetNode<E> * node;
};

template<typename E>
class Set: public Collection<E> {

public:
    Set(): numNodes(0), head(NULL) {
    }
    virtual ~Set() {
        clear();
    }
    virtual void add(const E & value);
    virtual bool remove(const E& value);
    virtual void clear();
    virtual bool isEmpty() const;
    virtual int size() const;
    virtual bool contains(const E& value) const;
    virtual Iterator<E>* iterator() const;
private:
    Set(const Set & obj): numNodes(0), head(NULL) {
    }
    virtual bool contains(const E & value, SetNode<E> * & previ) const;
protected:
    int numNodes;
    SetNode<E> * head;

};
template<typename E>
class SortedSet: public Set<E> {

private:
    virtual bool contains(const E& value, SetNode<E> *& prev) const;

public:
    SortedSet(): Set<E>() {
    }
    virtual void add(const E & value);
    virtual ~SortedSet() {
        this->clear();
    }
}; 
```

Set 和 SortedSet 不实现 add 方法，因为它们应该完全按照 Collection::add(const Collection& c) 所做的。

```
int main() {
Set<int> *s = new Set<int>();
s->add(10);
s->add(30);
s->add(12);
s->remove(10);
if (s->contains(30))
    puts("Tem");
SortedSet<int> *ss = new SortedSet<int>();
ss->add(*s);

return 0; 
} 
```

但是此代码在“ss->add(*s);”行中出现错误，说：没有匹配到 'SortedSet::add(Set&)'</p>

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:43:56.917

现在您已经发布了所有相关代码，问题是您在以下位置声明了另一个具有相同名称的函数`Set`：

```
virtual void add(const E & value); 
```

这隐藏了基类中具有相同名称的任何内容；so`Collection::add`不能通过引用`Set`或其任何子类访问。

要修复它，请在 , 中添加 using-declaration 以`Set`将`Collection::add`其纳入范围`Set`：

```
public:
    using Collection::add; 
```

# c# - 在像 facebook 这样的垂直栏中显示 lync 联系人，当点击任何联系人时，应该像 facebook 这样打开标签式对话

> ID：15286882
> 
> 赞同：0
> 
> 时间：2013-03-08T04:45:06.910
> 
> 标签：c#, wpf, lync

我正在尝试制作一个我想要集成 lync 的 wpf 应用程序。如果我想搜索任何员工，我想显示我的 lync 联系人，就像在最右侧垂直条上的 facebook 联系人一样，具有搜索功能。当我想通过单击该联系人开始任何对话时，该联系人应该像停靠在底部的选项卡式对话一样打开，就像在 facebook 中一样，或者类似地，如果我从某人那里得到任何 ping，它应该作为停靠在底部的选项卡打开。我还没有尝试过任何代码，但我只想知道这是否可行或这种方法的任何替代方案。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T14:25:46.303

是的，这一切都是可行的。

Microsoft 提供了一组用于 Lync 的工作 WPF 控件示例。例如，您可以插入 a`contact list control`和 a`contact search input box control`并使用零编码的可搜索联系人列表启动并运行！

有一篇关于[想法](http://thoughtstuff.co.uk/2012/05/microsoft-lyncs-development-secret-its-easy/)的文章，[MSDN 有一个演练](http://msdn.microsoft.com/en-us/library/lync/hh243697%28v=office.14%29.aspx)。

大约有 20 个控件： ![Lync SDK 控件](../Images/d7f0c320f7faf5e0c2eb4b678efb5644.png)

所有控件都可以重新设置外观，它们是基本的 WPF 元素。SDK 包含[有关执行此操作的完整详细信息](http://msdn.microsoft.com/en-us/library/hh378615.aspx)。

# php - 跟踪图像视图时插入的双记录

> ID：15286885
> 
> 赞同：0
> 
> 时间：2013-03-08T04:45:30.997
> 
> 标签：php, mysql, zend-framework

这是我用于跟踪图像视图的代码（tracks.php 脚本）：

```
$img_id = $_GET['img_id'];
$db->insert(TRACKS, $img_id);
header('Content-Type: image/jpeg');
//then output img's content 
```

当我使用`header()`函数并输出图像的内容时，记录被复制。我不知道为什么？

请帮帮我。太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:55:53.123

发生这种情况的原因有很多，如果不运行一些测试并了解有关 $db 对象的更多信息，我将很难追踪。

→ 一个简单的解决方案是在插入之前检查以确保 $img_id 在数据库中不存在。

使用**Zend DB** $db 对象首先检查 img_id 应该是这样的：

```
$select = $db->select();
$select->from( 'table_name', '*' );
$select->where( 'img_id = ?', $img_id );

$rows = $db->fetchAll( $select );

if( count( $rows[0] ) == 0 ) { $db->insert( TRACKS, $img_id ); } 
```

确保首先*清理*$img_id 以防止[sql 注入](http://en.wikipedia.org/wiki/SQL_injection)。

→ 然后检查返回的[rowCount](http://php.net/manual/en/pdostatement.rowcount.php) / [mysql_num_rows()](http://php.net/manual/en/function.mysql-num-rows.php)。如果返回的数字等于 0，则插入 $img_id。否则，请勿插入。

# xslt - XSL Fo - 特殊字符

> ID：15286892
> 
> 赞同：1
> 
> 时间：2013-03-08T04:46:25.320
> 
> 标签：xslt, pdf-generation, xmldocument, xsl-fo

我正在设计一个 xsl 表单，我的源 pdf 包含“钻石”符号

1.  我需要知道如何使用 xsl 使用/创建菱形字符（是否有任何字体系列我可以配置和使用/我可以使用 Unicode 字符获取符号）。
2.  还有如何在 xsl 表单中使用其他特殊字符。还需要知道如何创建空白 ![项目清单](../Images/e8b56be439ece2cfe64dcf7aa9994fd8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:53:37.293

I've found that some Unicode characters can be a bit tricky to use since a lot of fonts don't have certain glyphs. You know the glyph (the diamond) is missing from the font when you see the error WARNING: *Glyph "◆" (0x25c6, blackdiamond) not available in font*.

Here's a small example using a fo:inline to change to a font that has the glyph. I set the fo:root font family so the the entire document defaults to SansSerif; also the fo:page-sequence is set to use monospace font Courier; then the fo:inline uses ZapfDingbats.

Maybe there's an easier way to use a bunch of fonts without defining them (fop font config?) but I'm not familiar with it.

```
<?xml version="1.0" encoding="UTF-8"?>
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format" font-family="SansSerif" font-size="10pt">
  <fo:layout-master-set>
      <fo:simple-page-master margin-right="0.5in" margin-left="0.5in" margin-bottom="1in" margin-top="1in" 
          page-width="8.5in" page-height="11in" master-name="main">
        <fo:region-body margin-top="1cm"/>
        <fo:region-before extent="1cm"/>
        <fo:region-after extent="1.5cm"/>
      </fo:simple-page-master>
  </fo:layout-master-set>

  <fo:page-sequence master-reference="main" font-family="Courier">
    <fo:flow flow-name="xsl-region-body">
      <fo:block>This is a &amp;#x2666; hex (&amp;#9830; decimal): 
        <fo:inline font-family="ZapfDingbats">&#9830;</fo:inline>
      </fo:block>
      <fo:block>Here is &amp;#x25C6;: 
        <fo:inline font-family="ZapfDingbats">&#x25C6;</fo:inline>
      </fo:block>
    </fo:flow>
  </fo:page-sequence>

</fo:root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:16:50.117

您可以在 XML 中使用以下[字符引用](http://www.w3.org/TR/xml11/#sec-references)来生成 ◆ 字符（[Unicode](http://en.wikipedia.org/wiki/List_of_Unicode_characters) U+25C6 黑菱形）。

```
&#x25C6; 
```

# c# - 如何将 Lightswitch 应用程序同时部署为 Web 应用程序和桌面应用程序？

> ID：15286896
> 
> 赞同：1
> 
> 时间：2013-03-08T04:47:04.260
> 
> 标签：c#, visual-studio-lightswitch, lightswitch-2012

我想将我的 LightSwitch 应用程序同时发布为 3 层桌面应用程序和 Web 应用程序。有没有办法以同步的方式做到这一点？是否有任何命令可以让我在尝试 Web 应用程序中的 OOB 操作之前进行检查？基本上，我在网络上找不到任何关于桌面（OOB）和网络部署的信息。我想知道有没有这方面的知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T11:03:18.897

您应该能够使用该属性检测您的 lightswitch 应用程序是在浏览器内还是在浏览器外，该`AutomationFactory.IsAvailable`属性应该在浏览器内返回 false，对于浏览器外返回 true。

关于发布到桌面和 Web，我认为您可以只运行桌面的发布向导，以便它在`../Publish`目录中生成必要的文件，将它们保存在某个位置，然后重新运行 Web 的发布向导。只要您将数据发布到同一位置（前提是您希望在两个应用程序之间共享数据），那么这应该可以工作（但是我没有尝试过，所以不能保证）。

# c# - @Html.RadioButtonFor 布尔值

> ID：15286907
> 
> 赞同：9
> 
> 时间：2013-03-08T04:47:53.197
> 
> 标签：c#, razor, asp.net-mvc-4

我有一个表格：

```
@using (Html.BeginForm("Buy", "Keys", FormMethod.Post))
{
<div class="calc_steps">
    <div class="NumberedRow one">
        1\.  @Html.DropDownListFor(model => model.PaymentSystem, Model.PaymentSystems, new { @class = "calcsteps_select styledselect" })
    </div>
    <div class="NumberedRow two">
        2\. <div class="cnt">
            Укажите тип лицензии
            <div class="radio-jquery-ui">@Html.RadioButtonFor(model => model.IsElite, "false") <label>Обычная</label></div>
            <div class="radio-jquery-ui">@Html.RadioButtonFor(model => model.IsElite, "true") <label>Расширенная</label></div>
           </div>
    </div>
    <div class="NumberedRow three">
        3.
        <div class="cnt">
             Введите срок
            @Html.TextBoxFor(model => model.NumDays)
        </div>
    </div>
    <div class="itog">
        Итого: <span id="ïtogo">0 рублей 00 копеек</span>
    </div>
    <div>
        <input type="submit" value="Купить"/>
    </div>
</div>
} 
```

模型：

```
public class BuyModel
{
    public string PaymentSystem;
    public bool IsElite;
    public int NumDays;
    public IEnumerable<SelectListItem> PaymentSystems;
} 
```

行动：

```
 [HttpPost]
    public ActionResult Buy(BuyModel model)
    {
        return View("BuySummary", model);
    } 
```

当我提交它时，model.IsElite 总是错误的（默认情况下）。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:05:39.493

代替

```
public bool IsElite; 
```

和

```
public bool IsElite {get;set;} 
```

它现在必须工作！

请记住绑定到`properties`而不是变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:00:29.253

像这样。? 你需要为此设置一个属性

```
 public bool IsElite{get;set;}; 
```

然后像这样尝试

```
@Html.RadioButtonFor(model => model.IsElite, "True", model.IsElite== true ? new { Checked = "checked" } : null) 
```

# javascript - jquery jrac，加载时如何设置中心点观看

> ID：15286914
> 
> 赞同：0
> 
> 时间：2013-03-08T04:48:40.973
> 
> 标签：javascript, jquery, jquery-plugins

我在文档中看到有 viewport_content_x，viewport_content_y 但我设置它似乎没有效果。它总是显示在位置 0,0 。[https://github.com/trepmag/jrac](https://github.com/trepmag/jrac)

我是不是配置错了什么？

以及当drop_box移出图像时如何防止错误得到错误的值（crop_x，crop_y，crop_width，...）

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-12T01:57:39.577

看起来文档是错误的。jrac 设置需要 'viewport_content_left' & 'viewport_content_top'

# c# - 命名空间未正确加载

> ID：15286917
> 
> 赞同：0
> 
> 时间：2013-03-08T04:48:49.073
> 
> 标签：c#, xml, namespaces

我正在通过本地文件读取 xml 命名空间。当我输出时，我得到

```
 &quot;&#xD;&#xA; 
```

在命名空间中。我究竟做错了什么？

示例命名空间看起来像

*   xmlns="urn:rosettanet:specification:interchange:ShipmentReceiptNotification:xsd:schema:02.02" xmlns:dacc="urn:rosettanet:specification:domain:Procurement:AccountClassification:xsd:codelist:01.03"

我正在加载命名空间，如下所示：

```
string contents = File.ReadAllText("loadNamespaces.txt");

XmlNode ShipmentReceiptNotification0Node = xmlDoc.CreateElement("ShipmentReceiptNotification", contents); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:58:22.750

在[`CreateElement`](http://msdn.microsoft.com/en-us/library/z1k08cbx.aspx)方法中，第二个参数只是命名空间。只是“ `urn:rosettanet:specification:interchange:ShipmentReceiptNotification:xsd:schema:02.02`”部分。

# arrays - 什么是陆地上最快的 Traversable 实例

> ID：15286919
> 
> 赞同：2
> 
> 时间：2013-03-08T04:48:52.813
> 
> 标签：arrays, performance, haskell

我正在使用广告库[http://hackage.haskell.org/package/ad](http://hackage.haskell.org/package/ad)，我正在寻找最快的可遍历传递给它的各种功能。

理想情况下，它将是一个使用连续内存数组的数据结构，因此我可以将其传递给 C++ 世界中的数值求解器。

我最好的选择是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-08T08:31:16.417

> 一种使用连续内存数组的数据结构，因此我可以将其传递给 C++ 世界中的数值求解器。

使用未[装箱 Vector 类型的 Storable 实例。](http://hackage.haskell.org/packages/archive/vector/latest/doc/html/Data-Vector-Storable.html)

“可存储”约束——能够传递给 C——极大地限制了您的可用数据类型。向量支持非常快速的[批量操作](http://hackage.haskell.org/packages/archive/vector/latest/doc/html/Data-Vector-Storable.html#g:20)。另一种选择是 Repa 数组。

但是，您将受到限制，因为该`ad`包需要 Functor 和 Traversable，但它们只是为了完整性而提供 - 并且实际上序列化为列表以获取可遍历的实例。Traversable 和 Storable 永远不会混合使用，因为 Storable 仅限于某些未装箱的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T22:50:29.167

`instance Traversable (Data.Functor.Constant a)`

（对不起！）

# java - Java 字符串插入错误

> ID：15286920
> 
> 赞同：0
> 
> 时间：2013-03-08T04:48:55.120
> 
> 标签：java, string, random

每当我运行此方法时-

```
stringBot = bot.getText();
        stringTop = top.getText();
        intBot = stringBot.length();
        intTop = stringTop.length();
        String stringMove = "";
        r=0+Math.random()*intTop;
        if (intBot > intTop &&intBot>1 ){
              lastBot = stringBot.charAt(intBot-1);

 //stringMove =stringTop.substring(0,(int) r) + lastBot + stringTop.substring(intTop+1);

              top.setText(stringTop);
              stringBot=stringBot.substring(0,intBot-1);

              bot.setText(stringBot);
        }
        else if (intTop >= intBot &&intTop>1 ){
              lastTop = stringTop.charAt(intTop-1);
              stringMove = stringMove+lastTop;
              top.setText(stringBot+stringMove);
              stringTop=stringTop.substring(0,intTop-1);

              top.setText(stringTop);
        } 
```

我在评论部分收到错误，请帮助我。该错误并不完全是语法错误，因为当我编译时它不会识别错误，直到我单击左按钮时实际运行该方法。然后它给了我一个终端窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:55:40.603

你有`stringTop.substring(intTop+1)`哪里`intTop = stringTop.length();`。
所以你应该有例外，因为`intTop+1`> 的长度`stringTop`。

# android - 单击imageview时如何增加android中的textsize？

> ID：15286923
> 
> 赞同：1
> 
> 时间：2013-03-08T04:49:20.520
> 
> 标签：android, textview

我需要开发一个安卓应用程序。我需要的是，当我点击 ImageView 时，文本大小会自动增加。我怎样才能做到这一点？

以下是我的代码片段。

```
 ImageView fontincrease = (ImageView) findViewById(R.id.imageView3);
       fontincrease.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        count++;
        if (i < 3)
        {
            lblName.textSize += 2;

            i++;
            j = i;
        } }
   }); 
```

我收到错误：`textSize cannot be resolved or is not a field`

**笔记：**

请看[这里](https://itunes.apple.com/gb/app/bbc-news/id377382255?mt=8)。请参阅底部的第二张图像，`-A`图像`+A`就在那里。单击该图像意味着自动增加和减少整个应用程序的 textview 字体大小。我怎样才能在android应用程序中做到这一点？

**编辑：**

我必须更新我的代码，如下所示：

```
ImageView positive = (ImageView) findViewById(R.id.positive);
positive.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
      lblName.setTextSize(lblName.getTextSize() + 2);
     }
    });

     Intent in = getIntent();

     // Get XML values from previous intent
     String title = in.getStringExtra("Title");
     lblName = (TextView) findViewById(R.id.title);
     lblName.setText(title); 
```

我必须运行该应用程序意味着在我的控制台窗口上出现以下错误，我的应用程序也被强制关闭。

```
03-11 04:13:13.462: E/AndroidRuntime(330): FATAL EXCEPTION: main
03-11 04:13:13.462: E/AndroidRuntime(330): java.lang.NullPointerException 
03-11 04:13:13.462: E/AndroidRuntime(330):  at com.xmlparsing.SubCate$2.onClick(SubCate.java:27) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:04:14.723

您在声明之前使用 lblName 。试试这个：

```
Intent in = getIntent();

     // Get XML values from previous intent
     String title = in.getStringExtra("Title");
     lblName = (TextView) findViewById(R.id.title);
     lblName.setText(title);

ImageView positive = (ImageView) findViewById(R.id.positive);
positive.setOnClickListener(new OnClickListener() {
public void onClick(View v) {
      lblName.setTextSize(TypedValue.COMPLEX_UNIT_PX, lblName.getTextSize() + 2)
     }
    }); 
```

在此处阅读有关类型值常量的更多信息：http: [//developer.android.com/reference/android/util/TypedValue.html](http://developer.android.com/reference/android/util/TypedValue.html)

# ios - NSTimer 不重复（iOS 开发）

> ID：15286925
> 
> 赞同：0
> 
> 时间：2013-03-08T04:49:38.317
> 
> 标签：ios, objective-c, cocoa-touch

我想使用 NSTimer 重复触发一个方法。但是该方法只触发一次。这是我的代码

```
- (void)viewDidLoad
{

[super viewDidLoad];   
NSDate *fireDate = [NSDate dateWithTimeIntervalSinceNow:14.0];
NSTimer *timer = [[NSTimer alloc] initWithFireDate:fireDate
                                              interval:2
                                                target:self
                                              selector:@selector(xuanZhuan:)
                                              userInfo:nil
                                               repeats:YES];

NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
[runLoop addTimer:timer forMode:NSDefaultRunLoopMode];     
}

-(void)xuanZhuan:(NSTimer*)theTimer
{
    ...
} 
```

宣专薄荷只开一次，不重复。为什么？如何解决？

**更新：** 我很抱歉。计时器工作正常，问题出在玄转方法上。我现在没有问题了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:01:38.027

尝试：

```
 [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(xuanZhuan:) userInfo:nil repeats:YES]; 
```

而不是上面的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:02:22.673

在 .h 文件中

```
NSTimer *timer; 
```

在 .m 文件中

```
timer =[NSTimer scheduledTimerWithTimeInterval:14.0 target:self selector:@selector(xuanZhuan) userInfo:nil repeats:YES]; 
```

这将`xuanZhuan`在每 14 秒后调用一次您的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:02:47.510

像这样使用计时器：

```
timer=[NSTimer scheduledTimerWithTimeInterval:14 target:self selector:@selector(xuanZhuan) userInfo:Nil repeats:YES]; 
```

这将在每 14 秒后触发该方法。

# android - 如何为多个屏幕设计 android cocos2d 应用程序

> ID：15286928
> 
> 赞同：3
> 
> 时间：2013-03-08T04:49:48.013
> 
> 标签：android, cocos2d-iphone, cocos2d-android

我正在开发 Cocos2d Android，在 cocos2d 中图像保存在 assets 文件夹中，这里我们不能拍摄图像 ldpi、hdipi、mdpi 图像。那么哪种尺寸的图像最适合支持多种设备（手机和平板电脑）。我拍摄了小尺寸图像（240x320），我正在调整图像大小，因此它支持所有设备，但图像看起来很模糊。所以哪种尺寸的图像最适合支持平板电脑和手机的所有屏幕。请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T12:58:08.623

最好的方法是拍摄最高分辨率的照片，即。android 屏幕尺寸的最高尺寸。cocos2d 会根据屏幕尺寸调整适合小型安卓手机。当您拍摄小图像并将其放大以用于大屏幕 Android 手机时，会发生模糊。

但是，如果您使用多个 png 文件，它会增加应用程序的大小。

源码-我在android中使用cocos2d做了一个游戏。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T04:57:16.600

这就是你可以在项目中安排东西的方式

res/layout/my_layout.xml // 正常屏幕尺寸的布局（“默认”） res/layout-small/my_layout.xml // 小屏幕尺寸的布局 res/layout-large/my_layout.xml // 大屏幕的布局size res/layout-xlarge/my_layout.xml // 超大屏幕布局 res/layout-xlarge-land/my_layout.xml // 横向超大布局

```
res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

[这个链接](http://developer.android.com/guide/practices/screens_support.html)将讲述故事的其余部分

# java - JTable valuechanged 然后更改单元格颜色

> ID：15286929
> 
> 赞同：1
> 
> 时间：2013-03-08T04:50:08.933
> 
> 标签：java, swing, colors, jtable, valuechangelistener

我这里`JTable`有两（2）列。右栏是可编辑的，而另一栏不可编辑。

所以，我的问题是，每当用户更改单元格的值时，该特定单元格将更改其单元格颜色。

我想这样做是因为我想让用户知道他/她在表格中做了一些更改。

我在某个地方找到了这个，它以某种方式解决了我的问题，但没有达到我期望的一件事是，在更改值并单击另一个单元格后，颜色变回原来的颜色。我想让它一直存在，直到它被保存。

```
@Override
public Component prepareEditor(TableCellEditor editor, int data, int columns) {
    Component c = super.prepareEditor(editor, data, columns);
    c.setBackground(Color.RED);
    return c;
} 
```

是否可以？如果是，请举一些例子。

更新：

```
 String[] columnname = {"Student Name", "Grade"};

    Object[][] data = {};

    gradetable = new JTable(data, columnname){
        private Object[][] rowData;

        public boolean isCellEditable(int data, int columns){
            return columns == 1;
        }

        public Component prepareRenderer(TableCellRenderer r, int data, int columns){
            final Component c = super.prepareRenderer(r, data, columns);

            if (data % 2 == 0){
                c.setBackground(Color.LIGHT_GRAY);
            }
            else{
                c.setBackground(Color.WHITE);
            }

            if (isCellSelected(data, columns)){
                c.setBackground(Color.ORANGE);
            }                

            return c;
        }

        @Override
        public Component prepareEditor(TableCellEditor editor, int data, int columns) {
            Component c = super.prepareEditor(editor, data, columns);
            c.setBackground(Color.RED);
            return c;
        }
    };

    gradetable.setModel(new DefaultTableModel(data, columnname));
    gradetable.setPreferredScrollableViewportSize(new Dimension (350, 130));
    gradetable.setFillsViewportHeight(true);
    gradetable.getTableHeader().setReorderingAllowed(false);
    gradetable.setGridColor(new Color(128,128,128,128));
    JScrollPane jsp = new JScrollPane(gradetable);
    panel3.add(jsp); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T04:54:06.983

表格使用 a`TableCellRenderer`在屏幕上绘制值。编辑器和渲染器实际上彼此之间没有任何关系（从绘画的角度来看）。

因此，一旦编辑器被解雇（接受或取消），单元格将使用分配的重新绘制`TableCellRenderer`

您需要在表模型中提供某种方式来确定哪些行已更新并更改渲染器的状态以进行匹配。

仅供参考 -`DefaultTableCellRenderer`使用 a`JLabel`作为其基本渲染器，因此默认情况下它是透明的；您需要使其不透明以使其正确渲染。

查看[使用自定义渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)了解更多详情

**更新示例**

这只不过是一个概念证明。它不会满足您的绝对要求，您应该认真查看上面链接的教程。

![示例图片](../Images/eab5a28f8c38b2072bdb6282b6159c4e.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumnModel;
import javax.swing.table.TableModel;

public class TableEdit {

    public static void main(String[] args) {
        new TableEdit();
    }

    public TableEdit() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new BorderLayout());
            JTable table = new JTable(new MyTableModel());
            table.setSurrendersFocusOnKeystroke(true);
            TableColumnModel model = table.getColumnModel();
            model.getColumn(1).setCellRenderer(new MyTableCellRenderer());
            add(new JScrollPane(table));
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }
    }

    public class MyData {

        private String key;
        private String value;
        private boolean changed;

        public MyData(String key, String value) {
            this.key = key;
            this.value = value;
            this.changed = false;
        }

        public String getKey() {
            return key;
        }

        public String getValue() {
            return value;
        }

        public void setValue(String newValue) {
            if (value == null ? newValue != null : !value.equals(newValue)) {
                value = newValue;
                changed = true;
            }
        }

        public boolean hasChanged() {
            return changed;
        }
    }

    public class MyTableModel extends AbstractTableModel {

        private List<MyData> data;

        public MyTableModel() {
            data = new ArrayList<>(25);
            for (int index = 0; index < 5; index++) {
                data.add(new MyData("A" + (index + 1), "B" + (index + 1)));
            }
        }

        @Override
        public int getRowCount() {
            return data.size();
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            MyData myData = data.get(rowIndex);
            Object value = null;
            switch (columnIndex) {
                case 0:
                    value = myData.getKey();
                    break;
                case 1:
                    value = myData.getValue();
                    break;
            }
            return value;
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            return String.class;
        }

        @Override
        public boolean isCellEditable(int rowIndex, int columnIndex) {
            return columnIndex == 1;
        }

        public boolean hasChanged(int rowIndex) {
            MyData myData = data.get(rowIndex);
            return myData.hasChanged();
        }

        @Override
        public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
            MyData myData = data.get(rowIndex);
            myData.setValue(aValue == null ? null : aValue.toString());
        }
    }

    public class MyTableCellRenderer extends DefaultTableCellRenderer {

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
            setOpaque(isSelected);
            TableModel model = table.getModel();
            if (model instanceof MyTableModel) {
                MyTableModel myModel = (MyTableModel) model;
                if (myModel.hasChanged(row)) {
                    if (!isSelected) {
                        setBackground(Color.RED);
                        setOpaque(true);
                    } 
                }
            }
            return this;
        }
    }
} 
```

# php - mysql_fetch 返回未定义的值

> ID：15286930
> 
> 赞同：-4
> 
> 时间：2013-03-08T04:50:09.360
> 
> 标签：php, mysql

到目前为止，这是我的 PHP 代码

```
 <?php
    $con=mysqli_connect("host","user","pass","db_name");
    // Check connection
    if (mysqli_connect_errno())
    {
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }
    $result_set = mysqli_query($con,"SELECT points FROM total WHERE id = 1");
    $row = mysql_fetch($result_set);
    $old_total = $row['total'];
    $new_total = $old_total + $_REQUEST['total'];
    mysqli_query($con,"UPDATE total SET points = $new_total WHERE id = 1");
    mysqli_close($con);
    ?> 
```

当我运行它时，它返回此错误： **调用未定义的函数 mysql_fetch()**我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:52:35.727

它应该`mysqli_fetch`代替`mysql_fetch`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:54:42.273

你必须使用

```
 $row = mysqli_fetch_assoc($result_set); 
```

而不是

```
 $row = mysqli_fetch($result_set); 
```

希望对你有用......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T04:55:04.707

您应该在 mysqli_fecth_array/assoc 中使用 $row['points'] 而不是 $row['total']。

试试下面的代码：

```
<?php
$con=mysqli_connect("host","user","pass","db_name");
// Check connection
if (mysqli_connect_errno())
{
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}
$result_set = mysqli_query($con,"SELECT points FROM total WHERE id = 1");
$row = mysqli_fetch_assoc($result_set);
$old_total = $row['points'];
$new_total = $old_total + $_REQUEST['total'];
mysqli_query($con,"UPDATE total SET points = $new_total WHERE id = 1");
mysqli_close($con);
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T05:05:29.440

最终代码：

```
$result_set = mysqli_query($con,"SELECT points FROM total WHERE id = 1");
$row = mysqli_fetch_assoc($result_set);
$old_total = $row['points'];
$new_total = $old_total + $_REQUEST['total'];
mysqli_query($con,"UPDATE total SET points = $new_total WHERE id = 1");
mysqli_close($con);
?> 
```

# jquery - 如何在 chrome 扩展中实现 jQuery UI

> ID：15286934
> 
> 赞同：2
> 
> 时间：2013-03-08T04:50:20.790
> 
> 标签：jquery, json, jquery-ui, google-chrome-extension

我在我的 chrome 扩展中实现 jQueryUI 时遇到了很多麻烦。我想在我的选项页面中实现一个可选择的。

chrome 扩展是一种浏览器操作，单击该操作会将页面重定向到缓存版本。在我的选项页面中，我将让用户选择要使用的缓存数据库，例如 Google、Yahoo、Bing 等。我想让他们通过可选择的方式进行选择。

可选：http: [//jqueryui.com/selectable/](http://jqueryui.com/selectable/)

我正在尝试实现可选的基本版本 - 基本上只是他们拥有的演示，然后我将围绕工作版本构建我的网页，但我似乎无法让它工作。

清单.json：

```
{
    "manifest_version": 2,

    "name": "WebCache",
    "version": "2.0.0",
    "description": "View a cached version of a web page",

    "browser_action": {
        "default_icon": {
            "19":"/images/icon.png"
        },
        "default_title": "Cache Page"
    },

    "background": {
        "scripts": [
            "redirect.js"
        ]
    },

    "options_page": "options.html",

    "permissions": [
        "tabs", "http://*/*", "https://*/*"
    ]
} 
```

选项.html：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>jQuery UI Selectable - Serialize</title>

    <link rel="stylesheet" href="jQuery/jquery.ui.all.css">
    <link rel="stylesheet" href="options.css" />
    <link rel="stylesheet" href="jQuery/demos.css">
    <link rel="stylesheet" href="jQuery/jquery.ui.base.css">
    <link rel="stylesheet" href="jQuery/jquery.ui.all.css">
    <link rel="stylesheet" href="jQuery/jquery.ui.core.css">
    <link rel="stylesheet" href="jQuery/jquery.ui.selectable.css">
    <script src="options.js"></script>
    <script src="jQuery/jquery-1.9.1.js"></script>
    <script src="jQuery/jquery.ui.core.js"></script>
    <script src="jQuery/jquery.ui.widget.js"></script>
    <script src="jQuery/jquery.ui.mouse.js"></script>
    <script src="jQuery/jquery.ui.selectable.js"></script>

    <style>
    #feedback { font-size: 1.4em; }
    #selectable .ui-selecting { background: #FECA40; }
    #selectable .ui-selected { background: #F39814; color: white; }
    #selectable { list-style-type: none; margin: 0; padding: 0; width: 60%; }
    #selectable li { margin: 3px; padding: 0.4em; font-size: 1.4em; height: 18px; }
    </style>
    <script>
    $(function() {
        $( "#selectable" ).selectable({
            stop: function() {
                var result = $( "#select-result" ).empty();
                $( ".ui-selected", this ).each(function() {
                    var index = $( "#selectable li" ).index( this );
                    result.append( " #" + ( index + 1 ) );
                });
            }
        });
    });
    </script>
</head>

<body>
<p id="feedback">
<span>You've selected:</span> <span id="select-result">none</span>.
</p>

<ol id="selectable">
    <li class="ui-widget-content">Item 1</li>
    <li class="ui-widget-content">Item 2</li>
    <li class="ui-widget-content">Item 3</li>
    <li class="ui-widget-content">Item 4</li>
    <li class="ui-widget-content">Item 5</li>
    <li class="ui-widget-content">Item 6</li>
</ol>
</body>
</html> 
```

我几乎只是剪切和粘贴了演示代码（并添加了对更多 javascript 文件的引用），所以我很困惑为什么它不起作用。现在它显示了一个带有正确格式的 CSS 的列表，就像它在示例中所做的那样，但是 javascript 不起作用。非常感谢任何帮助。

非常感谢，丹尼尔

编辑2：

javascript 在我的编辑器 Coda 中有效，但在扩展中仍然无效。不过，CSS 都在扩展中正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:22:42.187

您将资源指定为内容脚本。如果您只想在选项页面中使用它们，则不需要这样做。

当您查阅开发工具的网络选项卡时，也许您可​​以找到链接资源的正确路径。有404的吗？

请确保，您从 options.html 链接相对资源

# html - 通过贝宝传递产品详细信息

> ID：15286935
> 
> 赞同：2
> 
> 时间：2013-03-08T04:50:32.667
> 
> 标签：html, paypal, paypal-sandbox

我正在创建一个简单的贝宝结帐，客户可以通过 PayPal 结帐。下面是我用于支付宝结帐的示例代码。

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post"> 
<input type="hidden" name="item_name" value="kids t-shirt">
<input type="hidden" name="amount" value="200.00">
<input type="image" src="http://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif"  name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
</form> 
```

如您所见，传递产品名称和价格的简单表格，客户可以在他们的订单摘要中看到。但是我如何传递产品详细信息，例如产品尺寸和颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T05:52:29.400

只需传递一些更隐藏的值。检查下面的代码。

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post"> 
<input type="hidden" name="item_name" value="kids t-shirt">
<input type="hidden" name="amount" value="200.00">
<input type="hidden" name="on0" value="Size" />
<input type="hidden" value="your size value" name="os0">
<input type="hidden" name="on1" value="color" />
<input type="hidden" value="your color value" name="os1">
<input type="image" src="http://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif"  name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
</form> 
```

# sockets - 将套接字描述符动态添加到 io_service 并将其删除

> ID：15286939
> 
> 赞同：1
> 
> 时间：2013-03-08T04:50:57.520
> 
> 标签：sockets, network-programming, boost-asio

我正在编写一个网关服务，它侦听网络套接字并将接收到的数据包路由到单独的守护进程。我打算使用 boost asio，但我遇到了几个问题。这是我计划实现的服务器的设计：

1.  网关将使用 boost asio 监听 TCP 连接。

2.  网关还将使用 boost asio 侦听来自守护程序的流式 Unix 域连接。

3.  每当 tcp 连接上有数据包时，网关会查看数据包中的协议标记，并将数据包放在服务将侦听的 unix 域连接上。

4.  每当服务连接上有数据包时，网关就会查看客户端标签并建立相应的客户端连接。

网关中的每个描述符都是非阻塞的。

我遇到了一个特殊问题，当网关写入服务连接时，如果服务套接字已满，则有可能出现 EAGAIN 或 EWOULDBLOCK 错误。我计划通过排队缓冲区和“等待服务连接准备好写入”来解决这个问题。

如果我要使用 select 系统调用“等待服务连接准备好写入”将转换为在 writefd 列表中添加 fd 并将其传递给 select。一旦服务连接准备好写入，我会将排队的缓冲区写入连接，并将从 select 的 writefdlist 中删除服务连接。

我如何用 boost asio 做同样的事情？这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:56:55.930

使用 boost::asio 你不需要弄乱非阻塞模式和/或返回代码，如 EAGAIN EWOULDBLOCK 等。此外，你不是“向池循环添加套接字”或类似的东西；这对你来说是隐藏的，因为它是更高级的框架。

典型的模式是

1.  您创建 io_service 对象
2.  您创建绑定到 io_service 的套接字
3.  您在套接字上创建一些异步事件（async_connect、async_read、async_write 等）。
4.  您使用 io_service::run 或类似方法运行调度。
5.  asio 将在时间到时触发您的处理程序。

查看boost::asio 页面上的[示例。](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/examples.html)我认为[异步回显服务器](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp)可以说明您的任务的技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T18:48:49.280

如果您想采用这种方法，请使用[`boost::asio::null_buffers`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/null_buffers.html)启用[Reactor-Style 操作](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/overview/core/reactor.html)。[`socket::non_blocking()`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_stream_socket/non_blocking/overload2.html)此外，通过成员函数将 Boost.Asio 套接字设置为非阻塞。此选项将同步套接字操作设置为非阻塞。这与将本机套接字设置为非阻塞不同，因为 Boost.Asio 将本机套接字设置为非阻塞，并模拟同步操作的阻塞。

然而，如果 Proactor-Style 操作是一个选项，那么考虑使用它们，因为它允许应用程序忽略一些较低级别的细节。当使用前摄器样式操作时，Boost.Asio 将代表应用程序执行 I/O，正确处理`EWOULDBLOCK`、`EAGAIN`和`ERROR_RETRY`逻辑。例如，当 Boost.Asio 发生前面提到的错误之一时，它将 I/O 操作推回其内部队列，推迟重新尝试，允许尝试其他操作。

通常，有两个约束需要使用 Reactor-Style 操作而不是 Proactor-Style 操作：

*   另一个库希望自己执行 I/O 操作。
*   内存限制。使用 Proactor，缓冲区的生命周期必须超过读取或写入操作的持续时间，并且并发操作可能需要自己的缓冲区。Reactor 允许缓冲区的生命周期从准备好读取数据时开始，并在不再使用数据时结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T13:49:26.383

如果多个线程将写入用于连接的同一个套接字对象，那么您需要使用互斥锁（如果使用 Windows，则使用临界区）来单线程代码。

至于-“当网关写入服务连接时，如果服务套接字已满，则有可能出现 EAGAIN 或 EWOULDBLOCK 错误”，我相信 ASIO 会在内部为您处理，因此您不必担心它。

# java - 如果 Serializable 类中有不可序列化的字段会有什么影响？

> ID：15286942
> 
> 赞同：1
> 
> 时间：2013-03-08T04:51:08.787
> 
> 标签：java, serialization

我正在做一些代码审查，并遇到了包含不可序列化字段的可序列化类。该字段既未声明为*transient*。这种代码可以称为*代码气味*。如果是，那为什么？

```
public class A implements Serializable{

 private B field ; // B is non serializable

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-08T04:52:36.643

*如果对象的执行时间*类型不是可序列化的，那么当您尝试对其进行序列化时，它将引发异常。

例如，这*确实*序列化：

导入java.io.*；

```
public class Test implements Serializable {
    private Object object;

    public static void main(String[] args) throws Exception {
        Test test = new Test();
        test.object = "";
        // Now serialize test
    }
} 
```

这将创建一个适当的文件 - 但如果`test.object`设置为`new Object()`，那么它将引发异常。

这不仅仅是代码气味 - 这是一个错误，除非`B`是抽象类并且*所有*具体子类都是可序列化的......或者如果你知道它永远不会被序列化的其他方式，除非它的值`field`是可序列化的或 null。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:53:19.477

当您尝试序列化对象时，这将产生异常（除非该字段为空，或者实际对象属于 的可序列化子类`B`）。

您必须使其成为瞬态或可序列化的（或实现您自己的序列化方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T05:03:56.477

不是字段，而是该字段指向的对象可能会导致 NotSerializableException。例如，如果`field`为 null，则不会有异常。或者，如果`field`指向 C 的实例，它是 B 的 Serializable 子类，也不例外。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-08T04:53:06.610

如果您尝试序列化，这将导致错误`A`。因为`B`不可序列化。这是代码气味。

# php - Ajax-PHP 无法按预期工作

> ID：15286946
> 
> 赞同：1
> 
> 时间：2013-03-08T04:51:45.620
> 
> 标签：php, ajax

我正在尝试使用 AJAX 和 PHP 构建一个页面来打印数据库

索引.php

```
 <div id='mainTable'>
      <table border=1>
            <tr><th class='col1'>Mã Sinh Viên</th>
                <th class='col2'>Họ tên</th>
                <th class='col3'>Ngày sinh</th>
                <th class='col4'>Giới tính</th>
                <th class='col5'>Địa chỉ&lt;/th>
            </tr>
    </table>
</div>
<script>
function showPage(page) {
    var xmlhttp;
    if(window.XMLHttpRequest)   {
        xmlhttp= new XMLHttpRequest();
    }
    else    {
        xmlhttp= new ActiveObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()   {
        if(xmlhttp.readystate==4 && xmlhttp.status==200)    {
            $("#mainTable table").append(xmlhttp.responseText);
        }
    }
    xmlhttp.open("GET","showStudent.php?page="+page,true);
    xmlhttp.send();
     }

  $(document).ready(function(){
  showPage(1);
  });
  </script> 
```

显示学生.php

```
<?php
session_start();
$db= new mysqli("localhost","root","","student");
if(!isset($_GET['page']))   {
    $page=1;
}
else    {
    $page= $_GET['page'];
}
$start= ($page-1)*10;
$result= $db->query("SELECT * FROM information LIMIT $start,10");
while($row= $result->fetch_assoc()) {
    $stuId= $row['stuId'];
    $stuName= $row['stuName'];
    $stuDob= $row['stuDoB'];
    $stuSex= $row['stuDoB']?'Nam':'Nữ';
    $stuAdd= $row['stuAdd'];
    echo    "<tr><td class='col1'>$stuId</td>
            <td class='col2'>$stuName</td>
            <td class='col3'>$stuDoB</td>
            <td class='col4'>$stuSex</td>
            <td class='col5'>$stuAdd</td>
            </tr>
            ";  
    }
$_SESSION['page']= $page;
  ?> 
```

正如我所料，当页面加载时，它必须从数据库中打印出一个表，但我只有空白字段。我尝试了另一种使用 PHP 代码的方法，它有效，所以我认为问题出在 AJAX 上。有人可以帮助我吗，我的 AJAX 代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T04:55:09.620

替换这部分：

```
<script>
function showPage(page) {
    var xmlhttp;
    if(window.XMLHttpRequest)   {
        xmlhttp= new XMLHttpRequest();
    }
    else    {
        xmlhttp= new ActiveObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()   {
        if(xmlhttp.readystate==4 && xmlhttp.status==200)    {
            $("#mainTable table").append(xmlhttp.responseText);
        }
    }
    xmlhttp.open("GET","showStudent.php?page="+page,true);
    xmlhttp.send();
     }

  $(document).ready(function(){
  showPage(1);
  });
  </script> 
```

和：

```
<script>
function showPage(page) {
    $.get("showStudent.php?page="+page, function(data){
        $("#mainTable table").append(data);
    });
}

$(document).ready(function(){
    showPage(1);
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T04:58:50.417

你有一个错字（或者你做错了）。`xmlhttp.readystate`应该是`xmlhttp.readyState`，注意大写的 S。还有什么是`ActiveObject`？

# linux - 如何对目录中的所有文件执行grep操作？

> ID：15286947
> 
> 赞同：305
> 
> 时间：2013-03-08T04:51:49.690
> 
> 标签：linux, shell, grep

使用 xenserver，我想对目录中的每个文件执行命令，从命令的输出中提取一些内容并将其附加到文件中。

我很清楚我想使用的命令以及如何根据需要 grep 字符串。

但我不清楚的是如何让它对每个文件执行此命令，然后转到下一个文件，直到找不到更多文件。

* * *

## 回答 #1

> 赞同：302
> 
> 时间：2013-03-08T05:35:59.240

`grep $PATTERN *`就足够了。默认情况下，grep 会跳过所有子目录。但是，如果你想通过它们 grep，`grep -r $PATTERN *`就是这样。

* * *

## 回答 #2

> 赞同：285
> 
> 时间：2013-03-08T05:33:38.493

在 Linux 中，我通常使用此命令递归地`grep`处理目录中的特定文本：

```
grep -rni "string" * 
```

在哪里

*   `r`= 递归，即在当前目录中搜索子目录
*   `n`= 将行号打印到`stdout`
*   `i`= 不区分大小写的搜索

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2015-02-04T19:19:55.393

使用查找。说真的，这是最好的方法，因为这样你就可以真正看到它正在运行的文件：

```
find . -name "*.sql" -exec grep -H "slow" {} \; 
```

请注意，-H 是特定于 mac 的，它会在结果中显示文件名。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2019-12-05T09:00:47.200

要搜索所有子目录，但仅限**特定文件类型**，请使用 grep 和`--include`.

例如，在当前目录中递归搜索 *.yml 和 *.yaml 中的文本：

```
grep "text to search" -r . --include=*.{yml,yaml} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-04T19:31:17.147

如果要执行多个命令，可以使用：

```
for I in `ls *.sql`
do
    grep "foo" $I >> foo.log
    grep "bar" $I >> bar.log
done 
```

# asp.net - 使用 ASP.NET 将 html 文件保存到本地系统

> ID：15286956
> 
> 赞同：1
> 
> 时间：2013-03-08T04:52:42.540
> 
> 标签：asp.net, html

我要从一个站点中提取一些数据，我使用 HTML 敏捷包，但令人惊讶的是，当我使用它的远程地址时无法正确分析该站点，所以我必须将文件保存到本地系统，然后使用 HTML 敏捷包。如何将此文件复制到我的服务器，然后使用 HTML 敏捷包来分析和提取数据？

例如这是我的远程文件：www.testsite.com/testfile.html

我想将此文件保存到我的服务器，然后使用本地文件（我使用 C#）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:19:55.423

经过我的调查，我发现使用 WebRequest 将无法获得完整的 html 源代码，因为页面的其他部分被单独调用，例如使用 ajax、css、图像等的数据。有一种解决方案可以获取完整的 html 代码页面并且使用 WebBrowser 控件，但您应该使用 Windows 应用程序。在这里尝试这个解决方案。

1.  创建 Windows 应用程序。

2.  从工具箱中拖放一个 WebBrowser 控件。

3.  在 Form-Load 上添加以下代码。

    webBrowser1.Url = new Uri(" [http://tse.ir/default.aspx](http://tse.ir/default.aspx) "); webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted;

4.  添加以下方法。

    ```
    private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            var browser = sender as WebBrowser;
            var htmlPath = Path.Combine("C:\\Test", "testhtml.html");
            using (var writer = new StreamWriter(htmlPath, false, Encoding.UTF8))
            {
                if (browser != null) writer.WriteLine(browser.DocumentText);
                writer.Close();
            }
        } 
    ```

5.  运行您的应用程序并检查保存的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T05:09:47.353

您可以享受`http web request`和`http web response`

```
HttpWebRequest req = (HttpWebRequest)WebRequest.Create("http://www.testsite.com/testfile.html");
req.Method = "POST";
req.ContentType = "application/x-www-form-urlencoded";
//string login = string.Format("go=&Fuser={0}&Fpass={1}", user, password);
//byte[] postbuf = Encoding.ASCII.GetBytes(login);
//req.ContentLength = postbuf.Length;
Stream rs = req.GetRequestStream();
rs.Write(postbuf,0,postbuf.Length);
rs.Close();
WebResponse resp = req.GetResponse(); 
```

现在您可以将响应转换为流并将其保存为 html 文件

```
// we will read data via the response stream
Stream ReceiveStream = resp.GetResponseStream();

string filename = ...;

byte[] buffer = new byte[1024];
FileStream outFile = new FileStream(filename, FileMode.Create);

int bytesRead;
while((bytesRead = ReceiveStream.Read(buffer, 0, buffer.Length)) != 0)
outFile.Write(buffer, 0, bytesRead); 
```

# ios - 在保存到相机胶卷期间，如何确定已下载多少？

> ID：15286957
> 
> 赞同：0
> 
> 时间：2013-03-08T04:52:46.097
> 
> 标签：ios, objective-c, uiprogressview

我想`UIProgressView`在用户将图像保存到相机胶卷时显示。

我需要知道在给定点下载了多少图像以确定进度指示器应该显示什么。我如何确定这一点？

我正在做类似的事情：

```
- (void)updateSaveProgressBar
{    
  if ([self.saveProgressView progress] < 1) {
    self.saveProgressView.progress = (float)receivedData / (float)totalData;
    [NSTimer scheduledTimerWithTimeInterval:0.05 target:self selector:@selector(updateSaveProgressBar) userInfo:nil repeats:NO];
  }
} 
```

`self.saveProgressView`是`UIProgressView`。在此示例中，如何确定 的值`receivedData`？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T06:03:44.257

为了显示远程文件下载的进度，您必须使用异步下载`NSURLConnection`，并在每次连接接收数据时更新进度（`connection:didReceiveData:`）。连接成功后，您可以调用`UIImageWriteToSavedPhotosAlbum`将图像保存到相机胶卷。此外，`UIImageWriteToSavedPhotosAlbum`在保存完成时调用回调选择器，您可以使用该选择器向用户显示下载和保存图像的所有过程都已完成。

```
UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), NULL); 
```

完成选择器

```
- (void)               image: (UIImage *) image
    didFinishSavingWithError: (NSError *) error
                 contextInfo: (void *) contextInfo
{

} 
```

祝你好运！

# php - 如何将 GET 值传递给仅给定路径而没有页面的 URL

> ID：15286961
> 
> 赞同：-1
> 
> 时间：2013-03-08T04:52:58.700
> 
> 标签：php, get

我正在编写一个 PHP 脚本（MyPHPScript），它接受一个 URL 并通过`file_get_contents`. 然后该脚本重写所有锚点`<a>`和所有表单动作 ( `action=""`) 以便它们指向 MyPHPScript。

MyPHPScript 可能会遇到如下形式：

```
<form name="MYFORM" method="GET" action="http://www.TargetURL.com/index.php">
    <input type="input" name="Username"/> 
```

并将其重写如下：

```
<form name="MYFORM" method="GET" action="MyPHPScript.php">
    <input type="hidden" name="OriginalAction" value="http://www.TargetURL.com/index.php"/>
    <input type="input" name="Username"/>
</form> 
```

全部处理完毕后，MyPHPScript 会输出 TargetURL 修改后的代码。如果我随后提交此表单，MyPHPScript 会检查 的`GET`值`OriginalAction`并下载该 URL，并将所有相关`GET`值连同它一起传递。

这很好用，但是 TargetURL 上的一种特殊形式如下：

```
<form name="MYFORM" method="GET" action="http://www.TargetURL.com/search/">
    <input type="input" name="SearchTerm"/> 
```

MyPHPScript 将其重写如下：

```
<form name="MYFORM" method="GET" action="MyPHPScript.php">
    <input type="hidden" name="OriginalAction" value="http://www.TargetURL.com/search/"/>
    <input type="input" name="SearchTerm"/> 
```

问题是当我提交此表单时，MYPHPScript 会尝试下载 URL

```
http://www.TargetURL.com/search/?SearchTerm=XYZ 
```

但是，这是行不通的。由于我不控制 TargetURL.com，我只能猜测原因，但我收到错误消息，没有搜索结果表明它没有正确传递 GET。那么，当没有文件名时，我如何将 GET 值传递给 URI，或者上述 URI 是否有效并且 TargetURL.com 可能正在做一些特别的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:55:29.567

像这样传递 GET 值是完全有效的，但似乎该站点正在使用一些 javascript 做一些聪明的事情来阻止这些重写。我怎么一点头绪都没有。对于给您带来的不便，我深表歉意。

# php - 数据库访问最佳实践指南

> ID：15286967
> 
> 赞同：0
> 
> 时间：2013-03-08T04:53:22.423
> 
> 标签：php, javascript, mysql, security, sql-injection

我最近在我的工作场所继承了对 Web 应用程序（主要是 PHP，但也有很多 JavaScript）的控制权。我的首要任务之一是确保应用程序是安全的。不幸的是，应用程序中的数据库访问目前是通过自定义类完成的，而不是 MYSQLi 或 PDO。

我需要一段时间才能完全过渡到 PDO，但与此同时，我想尽我所能使应用程序尽可能安全。目前所有输入都通过，`mysql_real_escape_string()`并且我确保应用程序和数据库都以`UTF8`.

在我完全切换到 PDO 之前，我还能做些什么或应该做些什么（最佳实践）来确保应用程序的安全？

感谢您的所有帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T05:46:58.793

您可以做的一件事是将其放到 Intranet 上（如果您有的话）。您可能会惊讶于您网站的服务器被神秘手指扫描的频率有多高，另一端是异国情调的南美大学。也许。

仔细检查并确保每个输入都经过验证并且完全符合您的期望。努力学习`filter_var()`不同`FILTER_`的 s。它本身`mysql_*`不是邪恶的，它只是旧的，与安全*无关*，它与查询完整性有关。`*_real_escape_string()`

 *众所周知，我会这样做：

```
switch ($_GET['color']) {
    case 'green':
        $color = 'green';
    break;
    case 'blue':
        $color = 'blue';
    break;
    case 'yellow':
        $color = 'yellow';
    break;
    default:
        $color = NULL;
} 
```

这是人为的，但你明白了。毫无疑问地为您收到的数据提供任何好处，并在可能的时间和地点*使用您的数据*。保持简单，但不要简单化，不要认为像 PDO 查询这样的“交钥匙”方法真的可以保护您网站的资产（或您的工作）。

如果我必须验证字段名称，你敢打赌我正在做类似的事情：

```
$field = preg_replace('/[^a-z_]/', $_POST['field']); 
```

对疯狂的正则表达式感到疯狂......我尽量保持简单和直接。否则它们会让我发痒。

PDO 和 MYSQLI 是现代的好工具，但它们不是替代品，也不是解决安全问题的灵丹妙药。核心安全原则和对细节的认真关注是您完成工作的方式。例如，如果你*无法弄清楚为什么某事被认为是“坏主意”*，请研究它直到你明白为止。`eval()`，在坏人手中，能做坏事，就像一把刀。但很容易“得到”。尝试会话固定，或 XRSF/CSRF hacks。这是一场永无止境的冒险。

熟悉*您的*（新）代码，开始并继续进行研究，在任何地方实施严格的验证，不信任来自用户空间的任何东西，并尊重增强安全性永无止境。

如果可以，请**付费让供应商定期对您的站点进行安全扫描**。每月。我认为 Nessus 每年收费 1200 美元。这不是万无一失的，但比任何一个像样的渗透测试人员都可以在 20 分钟内发现的糟糕的低级问题被 pWnd 更好。

对？

* * *

此外，不要将注意力集中在这段代码的想象问题上，而忽略其他关键问题。如果您继承的这段代码运行的是 PHP 4.1，那么有一个古老的 phpMyAdmin 向世界开放（*psst，密码较弱*），而服务器管理被忽略或实践不当，您就会遇到问题。

如果你有这样的服务器，谁需要关注 SQL 注入。如果你不知道`ssh`和隧道，你应该。

保护（通过关闭和监控）端口，维护软件包的升级，使用 SUHOSIN（尽管它不再更新？），可能会查看反向代理（Varnish）和/或其他工具（如 Fail2ban）管理对基础设施的威胁。不要依赖安全模式或魔术引号之类的“技术”，除非代码依赖于它的存在。

* * *

如果你和老维护者相处融洽，问问他担心什么。我刚刚交出了一个维护了八年的网站。我们`looong`谈了...

* * *

1.  [http://www.hardened-php.net/suhosin/](http://www.hardened-php.net/suhosin/)（还在维护吗？）
2.  [http://sectools.org/](http://sectools.org/)
3.  [http://h-online.com/security](http://h-online.com/security)
4.  [http://security.stackexchange.com](http://security.stackexchange.com)
5.  [http://www.schneier.com/](http://www.schneier.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:46:02.690

您的问题中有两个假设，实际上只是严重的妄想。
你假设

*   “所有输入都通过 mysql_real_escape_string()”表示安全
*   “完全切换到 PDO”意味着安全

它们都不是真的。
mysqli 和 PDO 都不是仅仅因为它们的存在就意味着“安全应用程序”。
这只是另一种迷信，在 PHP 人员中传播。

*   人们必须明白，如果他们只关心数据源（即“用户输入”），他们就处于危险之中。
*   必须明白，仅仅“切换到 PDO”本身并没有任何好处
*   必须了解 mysql_real_escape_string() 只能保护**字符串**，而不能保护其他
*   必须了解 PDO 准备好的语句可以保护字符串和 - 哦，重要的是 - 数字！**让所有其他查询部分像以往一样容易受到攻击**。
*   必须了解**正确编写的自定义类可以**比原始 mysqli 或 PDO 更安全（和有用）。无论如何，自定义类是必须的。

只有知识可以使您的代码安全，而不是您正在使用的某些 API。
因此，在开始重写代码之前，这里有 2 条安全 SQL 规则：

1.  **每个**动态进入查询的查询部分都应该通过格式正确的**placeholder**。没有例外
2.  不能通过占位符放置的所有内容都应列入白名单，即根据脚本中硬编码的变体列表进行验证。*

# android - 使用 putExtra() 和 getExtra() 将从另一个活动发送的空变量的值设置为 0 以外的值

> ID：15286971
> 
> 赞同：1
> 
> 时间：2013-03-08T04:53:34.120
> 
> 标签：android, variables, android-intent

我不知道这个问题之前是否被问过，找不到任何关于此的信息：**如何将通过 putExtra/getExtra 发送到另一个应用程序的空变量的值默认设置为非零？**

让我解释一下原因并向您展示一个小架构以使事情更清楚：
![在此处输入图像描述](../Images/241d39a689b363911a72f217199aaa10.png)

如您所见，在我的应用程序中，我有一个与数据库通信并根据您单击的按钮发送不同信息的方法。所以对于每个按钮，我都有这样的代码：

```
private OnClickListener listener_button1 = new OnClickListener() {
    public void onClick(View v) {
        Intent t = new Intent(MainActivity.this,
                ResultListViewActivity.class);
        t.putExtra("myVariable1", 10);
        t.putExtra("myVariable3", 45);
        t.putExtra("myVariable2", 2);
        t.putExtra("myVariable4", 1000);
        startActivity(t); 
```

由于我想让我的程序尽可能轻巧，我只是为每个按钮定义了一个方法，因为它在做同样的事情。问题是，并非每个按钮都发送相同数量的变量：有些只发送 1 或 2 个变量，有些最多发送 4 个变量。当它不发送任何东西时，getExtra() 会自动将值设置为 0，这在我的情况下很糟糕，因为 0 指的是我的数据库中的特定内容（我希望我的变量设置为 1000，因为 1000 没有特别指任何事物）。

所以我想总结一下，不必每次我不使用类似此代码的变量时都必须指定，而是找到一种方法使其成为自动化：

```
 t.putExtra("myVariable4", 1000); 
```

我已经尝试在调用该方法的活动开始时像这样初始化值，但它不起作用：
int variable = 1000;

似乎这部分代码系统地将其设置为 0 ：

```
Bundle bundle = getIntent().getExtras();
    int variable4 = bundle.getInt("variable4"); 
```

ps：我不想手动设置所有没有特定值的变量，因为在我的实际应用程序中，它远远超过 4 个输入和 3 个按钮，因此每个按钮侦听器都会非常繁重变量设置为 1000。
我希望我说得足够清楚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T04:59:16.213

一般是这样的：-

```
bundle.getInt("passedVariable", defaultValue); 
```

在您的情况下，由于默认值为`1000`,

`bundle.getInt("variable4", 1000);`应该为您解决问题。

有关[docs](http://developer.android.com/reference/android/os/Bundle.html#getInt%28java.lang.String,%20int%29)的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T05:00:36.473

你可以设置一个默认值

```
bundle.getInt("variable4",default-value) 
```

# tfs - TFS 回滚到变更集

> ID：15286974
> 
> 赞同：3
> 
> 时间：2013-03-08T04:53:50.213
> 
> 标签：tfs, visual-studio-2012

有很多内容可以解决这个问题，但答案并不令人信服，所以我不得不在这里发布。

我们的代码有两个分支，我将一个合并到另一个分支，但其他团队成员在合并版本中看到了很多覆盖，所以我想要的只是将项目回滚到合并之前的版本 (x)(x+ 1) 发生。

我在 2011 年到处都有 VS 2012/Eclipse TFS。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-08T10:11:55.990

在 Visual Studio 2012 中，您有几个选项。

**回滚到特定版本**

在源代码管理资源管理器中：

1.  右键单击要回滚的分支
2.  点击`Rollback...`
3.  选择`Rollback to a specific version`
4.  输入您希望回滚到的变更集编号。

**回滚单个变更集**（您也可以通过上面加载的对话框执行此操作）

1.  右键单击要回滚的变更集
2.  选择`Rollback entire changset`

签入回滚。

# mysql - perl DBD::mysql 不适用于 mysql 5.6？

> ID：15286991
> 
> 赞同：0
> 
> 时间：2013-03-08T04:55:43.830
> 
> 标签：mysql, perl, osx-mountain-lion, dbi, perlbrew

我将 MySQL 5.6.10 安装到 Mac OSX 10.8.2 的 /usr/local/mysql-5.6.10-osx10.7-x86_64/ 中。然后我尝试运行一个使用 DBI 和 DBD::mysql 连接到 MySQL 数据库的 Perl 程序。我收到以下错误：

```
install_driver(mysql) failed: Can't load '/Users/chap/perl5/perlbrew/perls/perl-
5.16.1/lib/site_perl/5.16.1/darwin-2level/auto/DBD/mysql/mysql.bundle' 
for module DBD::mysql: dlopen(/Users/chap/perl5/perlbrew/perls/perl-
5.16.1/lib/site_perl/5.16.1/darwin-2level/auto/DBD/mysql/mysql.bundle, 
1): Library not loaded: /usr/local/lib/libmysqlclient.18.dylib

Perhaps a required shared library or dll isn't installed where expected 
```

（当我使用“brew”（与 perlbrew 无关）将 mysql 5.5 安装到它自己的目录 /usr/local/Cellar/ 时，这工作正常。由于 brew 还不知道 5.6，我手动安装了它。）

我能够启动 mysqld 并从 mysql 命令行成功连接。这个错误是否表明 Perl 的 DBD::mysql 模块有问题？它是最新的；也许它不能与 MySql 5.6 对话？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:12:38.580

我在 Mac 上安装 DBD::mysql 时遇到了几个问题，我发现以下内容可以在 Mac OSX 10.6.8 上使用 Perl 5.16.1 和 MySQL 5.5.27，其中 mysql 安装在 /usr/local/ 中。请仔细检查以下命令中使用的任何路径和用户名。

```
export DYLD_LIBRARY_PATH=/usr/local/lib:$DYLD_LIBRARY_PATH

curl -kL http://search.cpan.org/CPAN/authors/id/C/CA/CAPTTOFU/DBD-mysql-4.021.tar.gz > DBD-mysql-4.021.tar.gz
gunzip -c DBD-mysql-4.021.tar.gz | tar xopf - 

cd DBD-mysql-4.021 && perl ./Makefile.pl --testuser root --libs="-L/usr/local/mysql/lib -lmysqlclient -lpthread"

install_name_tool -change libmysqlclient.18.dylib /usr/local/mysql/lib/libmysqlclient.18.dylib blib/arch/auto/DBD/mysql/mysql.bundle

make test
sudo make install 
```

然后检查连接（假设您仍然启用了测试数据库和匿名用户）

```
perl -e "use DBD::mysql; my $dbh = DBI->connect('dbi:mysql:test:localhost::3306:mysql_socket=/tmp/mysql.sock'); $dbh->disconnect();" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-08T05:25:04.250

此人通过手动安装 DBD::mysql 和 DBI 而不是通过 CPAN 解决了​​您的问题：

[http://forums.mysql.com/read.php?51,281769,282127#msg-282127](http://forums.mysql.com/read.php?51,281769,282127#msg-282127)

# c# - C# 中的 OAuth 身份验证

> ID：15286995
> 
> 赞同：1
> 
> 时间：2013-03-08T04:55:54.263
> 
> 标签：c#, oauth, compiler-errors

所以我最近在短暂的中断后重新开始编程，我正在寻找一个应用程序用于我的业务。

我想做的是调用[API (Etsy's)](https://www.etsy.com/developers/documentation)。问题是这个 API 使用 OAuth 来访问它，我不知道 OAuth 是如何工作的。我已经尝试阅读它，但无济于事。

我发现[这篇](http://www.deanhume.com/Home/BlogPost/a-simple-guide-to-using-oauth-with-c-/49)我认为看起来很简单的文章，但我被困住了。

它告诉我使用[这个包装器](http://cropperplugins.codeplex.com/SourceControl/changeset/view/65377#1710422)进行 OAuth 身份验证，并且我在我的项目中添加了文件（OAuth.cs 和 Tracing.cs），但是它吐出了一些我不明白的错误，因为我几乎是一个自学成才的程序员.

这是我的代码。

```
public static void getOAuthKey()
    {

        string ConsumerKey = "fakekey";
        string ConsumerSecret = "fakesecret";
        OAuth["consumer_key"] = ConsumerKey;
        OAuth["consumer_secret"] = ConsumerSecret;
        OAuthResponse = requestToken =
            OAuth.AcquireRequestToken("https://openapi.etsy.com/v2/oauth/request_token?scope=transactions_r", "POST");
    } 
```

它吐出以下错误。

*   “OAuth”是一个“命名空间”，但用作“变量”
*   “OAuth”是一个“命名空间”，但用作“变量”
*   当前上下文中不存在名称“OAuthResponse”
*   当前上下文中不存在名称“requestToken”
*   命名空间“OAuth”中不存在类型或命名空间名称“AcqureiRequestToken”（您是否缺少程序集引用？）

任何人都可以帮助我减轻这些错误并克服这个障碍吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T06:15:36.723

请确保您已将 TwitPic 项目的引用从包装器添加到您的项目。

```
public static void getOAuthKey()
            {
                string ConsumerKey = "fakekey";
                string ConsumerSecret = "fakesecret";
                Manager m = new Manager();
                m["consumer_key"] = ConsumerKey;
                m["consumer_secret"] = ConsumerSecret;
                OAuthResponse requestToken =
                    m.AcquireRequestToken(@"https://openapi.etsy.com/v2/oauth/request_token?scope=transactions_r", "POST");
            } 
```