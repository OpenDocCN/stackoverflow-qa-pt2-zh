# StackOverflow 问答 12978000-12978999

# android - 在 Freeswitch 上使用 TLS 和 Android 上的 CsipSimple

> ID：12978006
> 
> 赞同：1
> 
> 时间：2012-10-19T15:54:44.123
> 
> 标签：android, ssl, freeswitch

想知道是否有人能够通过两个 CsipSimple 客户端和 Freeswitch 实现 TLS 和 SRTP？您是否安装了客户端证书？你是如何让两个端点进行通信的（接收来自对方的来电）？

目前，我可以让两个 CSipSimple 端点注册并使用 TLS 发出信号，但无法从它们中的任何一个接收传入呼叫。

# php - 使用 HTML 表单从 MySQL 中删除一行

> ID：12978009
> 
> 赞同：-4
> 
> 时间：2012-10-19T15:54:58.240
> 
> 标签：php, html, mysql, forms

我很难从我的数据库中删除行。

我在一个表单中有一个删除按钮，当它被点击时，它会执行一个 DELETE FROM 查询，但它不起作用，我想知道我的理论是否完全错误（理论是有一个表单和提交按钮以将数据插入数据库有效那么为什么不使用它来删除东西呢？这就是代码

```
$league_id = $_GET['id'];
$delete_entry = "<form action=\"".$_SERVER["REQUEST_URI"]."\ method=\"post\">
                <input type=\"submit\" name=\"ooops\" value=\"Delete Entries\"></p>
                </form>";

if ($_POST['ooops']) { //if the data is rubbish then delete and start again...

$delete_lge_sql = "DELETE FROM st_position WHERE league_id = '$league_id'";
$delete_lge_res = mysqli_query($statto, $delete_lge_sql)
                or die(mysqli_error($statto));
} 
```

当我单击删除条目时，页面重新加载并且 URL 看起来像这样

page.php?ooops=删除+条目

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:05:48.960

您在此声明中遗漏了双引号

```
$delete_entry = "<form action=\"".$_SERVER["REQUEST_URI"]."\ method=\"post\">
            <input type=\"submit\" name=\"ooops\" value=\"Delete Entries\"></p>
            </form>"; 
```

将其更改为

```
$delete_entry = "<form action=\"".$_SERVER["REQUEST_URI"]."\" method=\"post\">
            <input type=\"submit\" name=\"ooops\" value=\"Delete Entries\"></p>
            </form>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:49:32.217

尝试 ：

```
$delete_entry = "<form action=\"".$_SERVER["REQUEST_URI"]."\ method=\"post\">
                <input type=\"hidden\" name=\"ooops\" value=\"1\" />
                <input type=\"submit\" value=\"Delete Entries\">
                </form>"; 
```

这样，您的 $_POST['ooops'] 变量将等于“1”。只需对这个值进行测试，就可以了。

# ruby-on-rails - 模型：未定义的局部变量或方法“current_user”

> ID：12978010
> 
> 赞同：3
> 
> 时间：2012-10-19T15:55:00.363
> 
> 标签：ruby-on-rails, devise, rails-admin

我是 Rails、Rails_Admin 和 Devise 的新手。试图在模型中获取我认为应该由 Devise 提供的 current_user：

```
class Item < ActiveRecord::Base
  attr_accessible :user_id
  belongs_to :user, :inverse_of => :items

  after_initialize do
    if new_record?      
      self.user_id = current_user.id unless self.user_id
    end                                
  end  
end 
```

在 Rails_Admin 我得到：

```
undefined local variable or method `current_user' for #<Item:0x007fc3bd9c4d60> 
```

与

```
self.user_id = _current_user.id unless self.user_id 
```

我看到 config/initializers/rails_admin.rb 中有一行，但不确定它的作用：

```
 config.current_user_method { current_user } # auto-generated 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T16:35:16.700

current_user 不属于模型。这个答案有一些解释。

[Rails 3 设计，current_user 在模型中不可访问？](https://stackoverflow.com/questions/3742785/rails-3-devise-current-user-is-not-accessible-in-a-model#3742981)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T16:20:29.207

您不能在模型中引用 current_user ，因为它仅适用于*Controllers*和*Views*。这是因为它是在*ApplicationController*中定义的。解决这个问题的方法是在控制器中创建 Item 时设置它的*用户属性。*

```
class ItemsController < Application Controller

  def create
    @item = Item.new(params[:item])
    @item.user = current_user # You have access to current_user in the controller
    if @item.save
      flash[:success] = "You have successfully saved the Item."
      redirect_to @item
    else
      flash[:error] = "There was an error saving the Item."
      render :new
    end
  end
end 
```

此外，为了确保在没有设置*用户*属性的情况下不会保存您的*项目*，您可以对 user_id 进行验证。如果未设置，*项目*将不会保存到数据库。

 **```
class Item < ActiveRecord::Base
  attr_accessible :user_id
  belongs_to :user,
             :inverse_of => :items # You probably don't need this inverse_of. In this
                                   # case, Rails can infer this automatically.

  validates :user_id,
            :presence => true
end 
```

验证本质上解决了您在使用 after_initialize 回调在模型中设置用户时尝试做的事情。保证在没有该信息的情况下不会保存*项目。***

# python - 需要找到哪个程序调用了python脚本

> ID：12978013
> 
> 赞同：-1
> 
> 时间：2012-10-19T15:55:17.463
> 
> 标签：python, windows, stack-trace

我正在使用一个构建系统（waf），它是 python 的包装器。有一些程序（perl 脚本、exe 等）调用 python 构建系统。当我从 cmd.exe 执行构建脚本时，**我需要找出调用它的程序**。我的操作系统是 Windows 7。我尝试在 python 模块中获取父 PID，它以 PPID 形式返回“cmd”，以 PID 形式返回“python.exe”，因此这种方法并不能帮助我找到我想要的东西。

我相信我应该在操作系统级别查看一些堆栈跟踪，但无法找到如何去做。请帮助我采用我应该采取的方法或可能的代码片段。我只需要知道调用系统的脚本或程序的名称，例如 caller.perl、callload.exe

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:18:57.197

虽然我不确定为什么需要它，但这本身就是一个有趣的问题，所以这里有一些提示，一旦你有父 PID 循环通过进程并获得名称，例如

使用 WMI

```
import wmi
c = wmi.WMI ()

for process in c.Win32_Process ():
    if process.ProcessId == ppid:
      print process.ProcessId, process.Name 
```

我认为你可以使用 win32 API 做同样的事情，例如

```
processes = win32process.EnumProcesses()
for pid in processes:
    if pid == ppid:
       handle = win32api.OpenProcess(win32con.PROCESS_ALL_ACCESS,
False, pid)
       exe = win32process.GetModuleFileNameEx(handle, 0) 
```

当 progA 直接执行 progB 时，这将适用于简单的情况，但如果中间有很长的子进程链，则可能不是一个好的解决方案。通用案例的最佳方法是调用程序通过将其作为参数传递来告诉他的身份，例如

```
progB --calledfrom progA 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T15:59:28.273

修改 python 脚本，为其添加一个参数，说明调用它的文件。然后将其记录到记录器文件中。所有调用它的脚本都必须通过参数向量向 python 脚本标识自己。

例如：

foo.pl 调用 yourfile.py 为：

```
yourfile.py /path/to/foo.pl 
```

你的文件.py：

```
def main(argv):
   logger.print(argv[1]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T13:17:14.663

我能够使用进程资源管理器查看调用的进程链，并且能够通过遍历父进程来检索名称。感谢所有回复的人。

# asp.net - 为 HTMLInputCheckbox 获取相同的名称

> ID：12978016
> 
> 赞同：0
> 
> 时间：2012-10-19T15:55:23.203
> 
> 标签：asp.net, webforms

超级新手问题在这里。我正在尝试自学 Web 表单，因此我正在尝试使用该`runat="server"`属性。所以这是我的代码：

```
<p>
Number of items:
<input type="checkbox" name="custom_name_qty" value="25" runat="server" />25
<input type="checkbox" name="custom_name_qty" value="50" runat="server" />50
<input type="checkbox" name="custom_name_qty" value="75" runat="server" />75
<input type="checkbox" name="custom_name_qty" value="100" runat="server" />100
<input type="checkbox" name="custom_name_qty" value="Other" runat="server" />Other
</p> 
```

这是生成的内容：

```
<p>
Number of items:
<input name="ctl01" type="checkbox" value="25" />25
<input name="ctl02" type="checkbox" value="50" />50
<input name="ctl03" type="checkbox" value="75" />75
<input name="ctl04" type="checkbox" value="100" />100
<input name="ctl05" type="checkbox" value="Other" />Other 
```

因此，它采用了我的一组具有相同名称的复选框，并为它们提供了不同的名称。为什么是这样？即使我给它们单独的名称（在每个名称的末尾添加一个整数），它们仍然会被重命名。

我在这里做错了什么？如何让复选框输出相同的名称？我什至怎样才能让复选框保留我给他们的名字？我宁愿使用我给的名字而不是“ctl01”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:06:08.570

你没有做错任何事，这[是 asp.net 的默认行为。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.aspx)这可以通过`<asp:CheckListBox />`控制来实现：[CheckListBox](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.checkboxlist.aspx)

```
 <asp:CheckBoxList id="checkboxlist1" 
       AutoPostBack="True"
       CellPadding="5"
       CellSpacing="5"
       RepeatColumns="2"
       RepeatDirection="Vertical"
       RepeatLayout="Flow"
       TextAlign="Right"
       OnSelectedIndexChanged="Check_Clicked"
       runat="server">

     <asp:ListItem>Item 1</asp:ListItem>
     <asp:ListItem>Item 2</asp:ListItem>
     <asp:ListItem>Item 3</asp:ListItem>
     <asp:ListItem>Item 4</asp:ListItem>
     <asp:ListItem>Item 5</asp:ListItem>
     <asp:ListItem>Item 6</asp:ListItem>

  </asp:CheckBoxList> 
```

这显示了如何手动添加项目。您还可以从数据库中填充检查列表

```
 System.Data.DataTable dtOptions = GetValuesFromDataBase();
  checkboxlist1.DataSource = dtOptions;
  checkboxlist1.DataBind(); 
```

**更新**

在 Asp.Net 4 及更高版本中，您可以更好地控制[控件 ID 的生成方式（例如 AutoID、静态、可预测、继承）](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

# redis - Redis 命令行语法

> ID：12978018
> 
> 赞同：0
> 
> 时间：2012-10-19T15:55:26.170
> 
> 标签：redis

有人可以解释一下以下 Redis 命令如何将内容返回给我吗？各个编号的行负责什么？

```
1: *3
2: $4
3: hget
4: $21
5: zc:k:b23_cache_config
6: $1
7: d
8: $5264$5264 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T16:13:59.583

消息格式称为[统一请求协议](http://redis.io/topics/protocol)。

星号`*`表示在此请求中预期有多少参数。所以，`*3`是针对三个论点。

美元符号`$`表示参数中预期的字节数。所以，`$1`是一个字节。

```
*<number of arguments> CR LF
$<number of bytes of argument 1> CR LF
<argument data> CR LF
...
$<number of bytes of argument N> CR LF
<argument data> CR LF 
```

您示例中的原始消息如下所示：

```
*3\r\n$4\r\nhget\r\n$21\r\nzc:k:b23_cache_config\r\n$1\r\nd\r\n 
```

[此特定请求](http://redis.io/commands/hget)将返回 a `bulk reply response`，如下所示：

```
$<number of bytes> CR LF
<DATA> CR LF 
```

如果请求的密钥不存在，那么回复将是：

```
$-1 
```

# ios - 从 iOS 设备解压 PKCS7 有效负载（MDM 注册）

> ID：12978019
> 
> 赞同：1
> 
> 时间：2012-10-19T15:55:27.553
> 
> 标签：ios, node.js, openssl

我正在尝试构建一个 MDM 服务器，因为 Apple 的 ruby​​ 代码是：

```
p7sign = OpenSSL::PKCS7::PKCS7.new(req.body)
store = OpenSSL::X509::Store.new
p7sign.verify(nil, store, nil, OpenSSL::PKCS7::NOVERIFY)
signers = p7sign.signers 
```

我有这个非常基本的 NodeJS 代码来接收和存储 POST 有效负载：

```
exports.profile = function(req, res) {
    var queryData = "";
    req.on('data', function(chunk) {
        queryData += chunk;
    });
    req.on('end', function() {
        fs.writeFileSync('out.p7s', queryData);
    });
    res.send('1');
}; 
```

但是给定的文件：[https ://dl.dropbox.com/u/2310128/ios-mdm.p7s](https://dl.dropbox.com/u/2310128/ios-mdm.p7s)

openssl 似乎根本无法识别！！

```
openssl pkcs7 -in req.p7s -inform DER -print_certs 
```

正在返回：

```
unable to load PKCS7 object
140735186985436:error:0D07207B:asn1 encoding routines:ASN1_get_object:header too long:asn1_lib.c:150: 
```

知道这里可能出了什么问题吗？我应该删除一些额外的填充吗？给定的文件根本不是PKCS7吗？

请求标头：

```
{ host: '192.168.22.39:3000',
  'accept-encoding': 'gzip, deflate',
  'content-type': 'application/pkcs7-signature',
  'accept-language': 'fr-fr',
  cookie: 'connect.sid=s%3Andcjz5pGCdb1AYXhNG8Us5mh.5szK2X1cOpnih9X5kCbqTUdpv8EyJRwNHl4VC6M5Gwk',
  accept: '*/*',
  'content-length': '3564',
  connection: 'keep-alive',
  'user-agent': 'Profile/1.0' } 
```

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:02:10.977

您共享的文件没有行尾字符。我不是 NodeJS 专家，但看起来您没有将文件保存为二进制文件。您可以尝试进行以下更改以查看是否有效吗？

```
req.on('end', function() {
    fs.writeFileSync('out.p7s', queryData, 'binary');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T23:16:51.033

我必须使用`Buffer.concat`正确附加二进制缓冲区并使其工作。

# python - Python3.x：tkinter (ttk) 停止显示小部件

> ID：12978027
> 
> 赞同：1
> 
> 时间：2012-10-19T15:56:06.353
> 
> 标签：python, python-3.x, tkinter, widget

所以我一直在尝试用 tkinter 制作一些基本的 GUI（不要与 Tkinter 混淆），我遇到了一个我不知道解决方案并且在全能的谷歌上找不到任何东西的问题......我有一个在我的电脑上带有目录表的小型 SQLite 数据库。我想将所有目录路径绘制到一个标签中，并在该标签旁边添加一个“rempve”按钮。该按钮应该能够从数据库中删除目录，也可以从 GUI 中删除它。我还有一个“添加”按钮，可以在其中向数据库添加目录，并且这个新目录应该显示在 GUI 中。这是我的基本布局：

```
---------------
| ADD         |
|dir1   REMOVE|
|dir2   REMOVE|
--------------- 
```

我使用 gridlayout 来显示按钮和标签。大多数事情都有效，所有与数据库相关的东西都有效。此外，当启动 GUI 时，当前目录和“删除”按钮也会很好地显示。但是......当使用“删除”按钮时，即使它不再在数据库中，该目录也不会从 GUI 中消失，重新启动 GUI 当然可以修复它。添加标签有效...但我不确定我是否正确执行...
我怎样才能以某种方式使用新信息“重新绘制”GUI？这是我的 GUI 代码：

```
class GUI():

def __init__(self,db):
    self.root = Tk()
    self.root.title("Example")
    self.frame = ttk.Frame(self.root, padding="3 3 12 12")
    self.frame.rowconfigure(5, weight=1)
    self.frame.columnconfigure(5, weight=1)
    self.frame.grid(sticky=W+E+N+S)

    lbl = ttk.Label(self.frame, text="", width=17)
    lbl.grid(row=0, column=2, sticky=W)
    ttk.Button(self.frame, text="Add directory", command=lambda:self.load_file(db), width=30).grid(row=0, column=0, sticky=W, padx=(500,50))
    ttk.Button(self.frame, text="Sort files", command=lambda:self.sort(db,lbl), width=17).grid(row=0, column=1, sticky=W)
    self.draw(db)
    self.root.mainloop()

def load_file(self,db):
    fname = filedialog.askdirectory()
    db.addPath(fname)
    self.draw(db)

def remove_dir(self,db,pid):
    db.removePath(pid)
    self.draw(db)

def sort(self,db,lbl):
    lbl['text'] = 'Sorting...'
    sortFiles.moveFiles(db)
    lbl['text'] = 'Done!'

def draw(self,db):
    i = 0
    paths = db.getPaths()
    for path in paths:
        ttk.Label(self.frame,text=path[1]).grid(row=1+i,column=0,sticky=W)
        ttk.Button(self.frame, text="Remove directory", command=lambda:self.remove_dir(db,path[0]), width=17).grid(row=1+i,column=1, sticky=E)
        i = i+1
    for child in self.frame.winfo_children(): child.grid_configure(padx=5, pady=5)
    if i == 0:
        ttk.Label(self.root,text='No directories added yet').grid(row=1,column=0,sticky=W) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:51:20.530

如果您喜欢在每次添加或删除某些内容时重新绘制 GUI，则需要先销毁所有旧的小部件，然后再创建新的小部件。例如：

```
def draw(self, db):
    # first, delete any existing widgets
    for child in self.frame.winfo_children():
        child.destroy()
    # next, redraw all the widgets
    paths = db.getPaths()
for path in paths:
        ... 
```

您还有另一个错误，这就是您使用 lambda 的方式。与问题中的代码一样，您的所有回调都将看到相同的值。通过将值指定为 lambda 的关键字参数，您将获得正确的值：

```
ttk.Button(..., command=lambda p=path[0]:self.remove_dir(db, p)...) 
```

与实际问题无关，我认为您不需要`db`四处走动。假设您只使用一个数据库，我建议您`self.db = db`在`GUI`构造函数中这样做。这将使您的代码更易于维护，因为您的方法签名将被简化。

最后，当您删除一项时，确实不需要完全重绘 GUI。您一次只能删除一个标签和一个按钮。这需要您花更多时间考虑如何管理程序中的数据。例如，如果您保留对每个标签和按钮的引用，则可以在从数据库中删除路径时将其删除。您的`removeDir`函数可能类似于：

```
def removeDir(self, pid):
    label, button = self.widgets(pid)
    label.destroy()
    button.destroy() 
```

# javascript - InvalidStateError：Chrome 中的 DOM IDBDatabase 异常 11

> ID：12978030
> 
> 赞同：2
> 
> 时间：2012-10-19T15:56:22.690
> 
> 标签：javascript, google-chrome, indexeddb

以下代码：

```
request=window.webkitIndexedDB.open('tileStore'); 
```

产生一个错误的请求：异常 11。打开适用于其他数据库。此外，

```
request=window.webkitIndexedDB.deleteDatabase('tileStore') 
```

正确产生`IDBVersionChangeRequest`错误 11。

如何在不打开或删除数据库的情况下重置数据库状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T08:13:03.123

也许尝试手动删除自己的数据库。不久前我写了一篇关于它的[帖子。](http://www.kristofdegrave.be/2011/11/indexed-db-deleting-your-database.html)如果规范正确实施，errorCode 11 的异常应该意味着您有配额错误。这意味着您达到了数据库的最大文件大小。

# css - 引导程序：`span`/`row` 中的`well` 超出了它的容器：如何使它填充“仅”宽度 = 100%？

> ID：12978032
> 
> 赞同：2
> 
> 时间：2012-10-19T15:56:35.707
> 
> 标签：css, layout, html, twitter-bootstrap

我对 Bootstrap`well`超出其包含元素（这里是 a `class="row"`，它本身在 a 中`class="span4"`）有问题。

在我在这里做的 JSFidle 中清晰可见：http: [//jsfiddle.net/sebastien_worms/fc42w/2/](http://jsfiddle.net/sebastien_worms/fc42w/2/)
和全屏：http: [//jsfiddle.net/sebastien_worms/fc42w/2/embedded/result/](http://jsfiddle.net/sebastien_worms/fc42w/2/embedded/result/)

代码摘录在这里：

```
<div class="span4 pull-right">
    <div class="row">
        <div class="well" style="width:100%;">
            <b>This is the well that bothers me !</b><br> It goes beyond the right end of the screen ... And if you click "inspect element", you can see it goes beyond the right-end of its containing "span4" and "row"...
        </div>
    </div>
</div> 
```

当您使用浏览器的窗口大小（大约 1000 像素宽是最明显的）时，您可以看到超出其包含元素（和屏幕）的井。

...显然，我不能将其设置`well`为`div`： http `span`: [//jsfiddle.net/sebastien_worms/fc42w/3/](http://jsfiddle.net/sebastien_worms/fc42w/3/)

我应该怎么做才能`well`填充 100%（仅）`span4`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-19T16:03:31.007

这是因为你的填充，只需添加这个

```
.well {
    box-sizing: border-box;
} 
```

*   它适用于任何现代浏览器和 IE8 及更高版本

# google-apps-script - 如何从电子表格自定义函数访问 ScriptDB？

> ID：12978033
> 
> 赞同：2
> 
> 时间：2012-10-19T15:56:38.173
> 
> 标签：google-apps-script

在[这篇文章](https://stackoverflow.com/questions/12969813/)中，我建议将[Container Extension](https://developers.google.com/apps-script/execution_extensions)代码`ScriptDB`用作全局数据的中间存储。我为我的答案编写了一个示例代码，但该示例在一行中抛出了异常。我创建了以下更简单的示例来演示该问题。代码和函数都可以通过在编辑器中运行来使用。通过按下电子表格对话框中的按钮，可以毫无问题地执行该功能。该功能无处不在。`error: You do not have permission to call query (line X)``ScriptDb.getMyDb().query(...);``getDBSize``getSource``ScriptDB``getDBSize``Run``Script Manager``getSource`

我发布了示例的电子表格 -[链接](https://docs.google.com/spreadsheet/ccc?key=0AsDEe8rhzR17dGhaUDlqekVEdEdVdzA5eUhSQmFrb1E)。无法共享代码以供查看，但可以将其输出到一个单元格中，该单元格`B3`包含以下代码。

如何允许电子表格代码访问`ScriptDB`？

```
function getDBSize() {
  var db = ScriptDb.getMyDb(); 
  var result = db.query({});  
  var count = result.getSize();
  return count;
}

function getSource() {
  return this.toSource();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:18:58.173

问题是您试图将此函数作为电子表格运行，并且自定义函数比您链接的[Container Extension](https://developers.google.com/apps-script/execution_extensions)`custom function`页面上的所有示例更受限制。

但是，从理论的角度来看，自定义函数以及简单的事件处理程序（例如`onEdit`，`onOpen`），不能访问任何需要用户帐户或与用户相关联的东西，只能访问“通用”方法。例如`UrlFetchApp`，打开当前电子表格，或阅读`ScriptProperties`。

因此，在论文中，查询 a`ScriptDb`应该是可能的，因为它是一个通用调用并且与活动用户无关，它类似于`ScriptProperties`. 我没有看到实际上可以让您查询数据库的解决方法，但您可以使用它`ScriptProperties`。`ScriptDb`您可以使用`JSON.stringify`和轻松保存和检索要保存的任何对象`.parse`。当然，我不是将`ScriptDb`功能与进行比较`ScriptProperties`，这只是一种解决方法。

无论如何，这似乎是我们[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)增强请求的一个很好的候选者。

# javascript - 使用getElementById动态查询

> ID：12978035
> 
> 赞同：0
> 
> 时间：2012-10-19T15:56:42.767
> 
> 标签：javascript

我的 HTML 表单只需要一点帮助，我有以下代码：

```
<form method="get" action="http://solutions-demo.cust-mta.com/automated/action.jsp">

                  <input type="hidden" name="action" value="updateRecipientNoMsg" />
                  <input type="hidden" name="redirect_err" value="/automated/action.jsp" />
                  <input type="hidden" name="redirect_ok" value="http://thankyou.html" />
                  <input type="hidden" id="gid" name="gid" value="200030053" />
                  <input type="hidden" id="pmobilenum" name="pmobilenum" value="123456789" />
                  <input type="hidden" id="uemail" name="uemail" value="[executor]" />
                  <input type="hidden" id="psw" name="psw" value="password" />
                  <input type="hidden" id="pemail" name="pemail" value="[emailBeingUpdated]" />

                  <table border="0">
                    <tr>
                      <td width="100"><div align="left"><font color="#ffffff" face="Arial, sans serif" style="font-size:12px;line-height:14px;">Email</font></div></td>
                      <td width="140"><div align="left"><font face="Arial, sans serif" color="#ffffff" style="font-size:12px;line-height:14px;">
                          <input type="text" name="pemail" />
                      </font></div></td>

                    </tr>
                  </table>

                  <table border="0">
                    <tr>
                      <td width="100"><div align="left"><font color="#ffffff" face="Arial, sans serif" style="font-size:12px;line-height:14px;">Mobile Number</font></div></td>
                      <td width="140"><div align="left"><font face="Arial, sans serif" color="#666666" style="font-size:12px;line-height:14px;">

                          <input type="text" name="pmobilenum" />
                      </font></div></td>

                    </tr>
                  </table>

                  <table>
                    <tr>
                        <td align="center">
                        <input type="submit" name="Submit" />

                        </td>
                    </tr>
                  </table>

</form> 
```

一切正常，我正在联系 REST API 并推送一个操作，即使用电子邮件标识符更新用户手机号码。

目前我已经全部设置好了，所以当你点击它时，数字就会在系统中更新。

但是我希望用户能够输入他们的电子邮件和他们的号码，并且它是给他们的，因为目前为了测试，我已经将它设置为一个特定的电子邮件，所以你输入的任何细节总是会更新硬编码的。

我将如何使用 Javascript 将手机号码和电子邮件中的值放入此处：

```
<input type="hidden" id="pmobilenum" name="pmobilenum" value="INSERT TEXT FROM MOBILE NUMBER TEXT BOX" />
<input type="hidden" id="pemail" name="pmobilenum" value="INSERT TEXT FROM EMAIL TEXT BOX" /> 
```

应该使用 getElementByID 方法并将其变成 JSP 页面吗？

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:24:18.050

服务器不关心是隐藏输入还是文本输入，那么为什么不去掉中间人，去掉隐藏字段呢？您已经为相同`name`的 s 提供了等效的文本字段，因此它应该可以正常工作。

# batch-file - 使用批处理文件一次更改文件扩展名和名称

> ID：12978036
> 
> 赞同：1
> 
> 时间：2012-10-19T15:56:44.567
> 
> 标签：batch-file

我有一个目录，里面有一些软件输出的文件，如下所示：

*   待定.001
*   待定.002
*   待定.003
*   等等

我想使用 .bat 将它们重命名如下：

*   待定001.csv
*   待定002.csv
*   待定003.csv
*   等等

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T11:44:04.307

您可以在循环中重命名文件，使用修饰符`~n`和`~x`循环变量分别提取每个文件的名称和扩展名，以将它们连接到新名称中。由于扩展名将与前导一起提取`.`，因此您还需要一个变量来临时存储扩展名，然后再删除`.`.

以下是如何实现上述内容的示例：

```
@ECHO OFF
FOR %%I IN (Pending.*) DO (
  SET "ext=%%~xI"
  SETLOCAL EnableDelayedExpansion
  RENAME "%%I" "%%~nI!ext:~1!.csv"
  ENDLOCAL
) 
```

启用延迟扩展是因为评估`ext`. 使用 的“正常”扩展`%`在这里不起作用，因为这样变量只会在循环开始之前扩展一次，此时变量仍然为空。相反，在延迟扩展的情况下，每次执行包含它的特定命令时，变量都会被扩展，即在循环的每次迭代中也是如此。

上面的批处理文件会处理*当前*目录中的文件，即首先需要切换到需要处理文件的目录，然后调用批处理。或者，如果您将在例如 Windows 资源管理器中执行此操作，您可能需要将该批处理复制到包含要处理的文件的目录并从那里调用它。

但是，或者，您可能希望使用指定要处理的目录的参数来调用它。要使用该参数，请像这样更改脚本：

```
@ECHO OFF
FOR %%I IN (**"%~1\Pending.*"**) DO (
  SET "ext=%%~xI"
  SETLOCAL EnableDelayedExpansion
  RENAME "%%I" "%%~nI!ext:~1!.csv"
  ENDLOCAL
) 
```

当然，如果文件始终位于同一目录中，您也可以只指定文件的固定路径：

```
@ECHO OFF
FOR %%I IN (**"D:\path\to\files\Pending.*"**) DO (
  SET "ext=%%~xI"
  SETLOCAL EnableDelayedExpansion
  RENAME "%%I" "%%~nI!ext:~1!.csv"
  ENDLOCAL
) 
```

这样，您就可以从存储它的任何地方调用该批次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:22:15.680

你为什么不参考这些帖子：

1.  [如何从命令行或使用 3rd 方工具批量重命名文件？](https://superuser.com/questions/16007/how-can-i-mass-rename-files-from-the-command-line-or-using-a-3rd-party-tool)
2.  [批量重命名命令](http://www.bulkrenameutility.co.uk/Command.php)
3.  [批量重命名实用程序](http://www.bulkrenameutility.co.uk/)
4.  [使用批处理文件](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/batch.mspx?mfr=true)

# iphone - 删除通知

> ID：12978040
> 
> 赞同：0
> 
> 时间：2012-10-19T15:57:05.070
> 
> 标签：iphone, objective-c, ios

我制作了一个具有自定义通知的应用程序，但无论我做什么都无法删除它们。

```
[[UIApplication sharedApplication] cancelLocalNotification:[idkey objectAtIndex:indexPath.row]]; 
```

那是我用来删除的代码；如果我使用所有它的工作。是正确的`idkey`值，`@"3"`在这种情况下，它是字符串中的数字。

这是保存功能的一部分：

```
-(void) addNewNotificationWithKey:(NSString*)key {

    NSLog(@"%@",key);

    Class cls = NSClassFromString(@"UILocalNotification");
    if (cls != nil) {

        UILocalNotification *notif = [[cls alloc] init];
        notif.fireDate = [tempFormatter dateFromString:datuminura];
        notif.timeZone = [NSTimeZone defaultTimeZone];

        notif.alertBody = description1;
        notif.alertAction = @"Open";
        notif.soundName = UILocalNotificationDefaultSoundName; 
```

这样对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:02:20.853

检查您要删除的通知并使用以下[代码](https://stackoverflow.com/questions/6340664/delete-a-particular-local-notification)将其取消。

```
UIApplication *app = [UIApplication sharedApplication];
NSArray *eventArray = [app scheduledLocalNotifications];
for (int i=0; i<[eventArray count]; i++)
{
    UILocalNotification* oneEvent = [eventArray objectAtIndex:i];
    NSDictionary *userInfoCurrent = oneEvent.userInfo;
    NSString *uid=[NSString stringWithFormat:@"%@",[userInfoCurrent valueForKey:@"uid"]];
    if ([uid isEqualToString:uidtodelete])
    {
        //Cancelling local notification
        [app cancelLocalNotification:oneEvent];
        break;
    }
} 
```

[编辑]

将以下行添加到您的本地通知中，以使 [uid isEqualToString:uidtodelete] 条件起作用。

```
NSDictionary *infoDict = [NSDictionary dictionaryWithObject:[NSString stringWithFormat:@"%d",[idkey objectAtIndex:indexPath.row]] forKey:@"uid"]; 
notif.userInfo = infoDict; 
```

# javascript - 母版页中的 Javascript 未触发

> ID：12978043
> 
> 赞同：0
> 
> 时间：2012-10-19T15:57:16.257
> 
> 标签：javascript, jquery, asp.net, master-pages

我有一个用于确认的 javascript 函数：

```
function confirm() {
    var answer = confirm("Are you sure you want to log out?")
    if (answer) {
        return true;
    }

    return false;
} 
```

在我的链接上，我调用了这个函数：

```
<div class="header">
                <a href="" class="logo"></a>
                <div class="topToolbar">
                    <span><a href="/Logout.aspx" onclick="return confirm();">Log Out</a></span>
                </div>
            </div> 
```

问题是它从不调用 javascript 函数，试图发出警报并且没有得到任何东西。

我什至尝试用 jquery bt 来做同样的事情，唯一的区别是我可以在文档就绪功能上获得警报。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T16:00:46.107

你应该重命名你的函数。`confirm`保留用于以下`confirm`功能：

```
function shouldContinue() {
    return confirm("Are you sure you want to log out?");
} 
```

进而：

```
<a href="/Logout.aspx" onclick="return shouldContinue();">Log Out</a> 
```

* * *

实际上更准确地说`confirm`不是保留关键字。您可以覆盖该`confirm`功能。这就是你所做的。除了在这个被覆盖的函数中你再次调用它并因此以递归无限循环结束。

这是一个如何覆盖它的示例：

```
window.confirm = function(msg) {
    alert('this is the overriden confirm function');
    return true;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:07:00.770

您没有在 onclick 中调用该函数，您需要重命名该函数，以免与确认冲突。

```
logoutMessage = function() {
    var answer = confirm("Are you sure you want to log out?")
    if (answer) {
        return true;
    }

    return false;
} ​

<div class="header">
    <a href="" class="logo"></a>
    <div class="topToolbar">
        <span><a href="/Logout.aspx" onclick="return logoutMessage()">Log Out</a></span>
    </div>
</div>​ 
```

理想情况下，您不会`onclick`在 html 中使用该属性。您可以通过使用[事件侦听](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)器将其纯粹保留在 javascript 中，这更清晰，并且避免了污染标记。如果你给注销链接一个id，你可以这样做：

```
document.getElementById("logout").addEventListener("click", logoutConfirm); 
```

这将在点击时调用该函数。

# assembly - mov %eax,(%esp)

> ID：12978048
> 
> 赞同：8
> 
> 时间：2012-10-19T15:57:40.573
> 
> 标签：assembly, x86, att, mov, addressing-mode

以下陈述之间有什么区别？

```
mov %eax,%esp
mov %eax,(%esp) 
```

我正在扩散一个二元炸弹，并且在程序集的早期 遇到了一些`mov`and命令的问题。`leal`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T15:59:45.520

这会将 %eax 中的值复制到 %esp 中。

```
mov %eax,%esp 
```

这会将 %eax 中的值复制到 %esp 指向的内存位置。

```
mov %eax,(%esp) 
```

# c# - 通过 Web API 公开实体时，我是否应该从 EF 上下文中分离实体

> ID：12978053
> 
> 赞同：1
> 
> 时间：2012-10-19T15:57:57.167
> 
> 标签：c#, asp.net-mvc-3, entity-framework, asp.net-mvc-4, asp.net-web-api

我正在使用 EF5 代码优先方法，我只是想知道在通过 Web API 公开实体时是否应该从 EF 上下文中分离实体？

假设我有 API 操作方法

```
[HttpGet]
public HttpResponseMessage Get(int id)
{
    var user = _userRepository.GetById(id);

    if (user != null)
    {
        // detach here???
        _userRepository.Detach(user);

        return Request.CreateResponse(HttpStatusCode.Found, user);
    }

    return Request.CreateErrorResponse(HttpStatusCode.NotFound, string.Format("No user with id={0} is found", id));
} 
```

实际上，最好的做法是什么？我应该创建实体的投影然后公开它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:01:18.353

我不相信 Detach 是必要的，当你取回它时它会自动分离。

[但是考虑到您只在请求/响应环境中使用它，那么首先使用NoTracking](http://msdn.microsoft.com/en-US/data/jj556203)选项加载它是明智的。消除您永远不会使用的功能的开销。

# iphone - iOS：删除 UIButton 后 UIScrollView 不滚动

> ID：12978055
> 
> 赞同：0
> 
> 时间：2012-10-19T15:58:01.840
> 
> 标签：iphone, ios, uiscrollview, uibutton, autolayout

我有一个看起来像这样的视图控制器：

![在此处输入图像描述](../Images/15fd1d4c326258410f31491a600c9b9c.png)

根视图是滚动视图。当视图第一次加载时，它滚动得很好。

但是，有时我需要使用如下代码删除底部的按钮之一：

```
if (item.url==nil||[item.url isEqualToString:@""]) {
    [overdriveButton removeFromSuperview];
} 
```

但是，这样做之后，滚动视图将不再滚动。（屏幕中间的那些视图会展开，所以总是有很多内容延伸到屏幕底部之外）。

请注意，我需要在这里使用自动布局。我怀疑这是问题的一部分。按钮的移除（以及相关的约束）是否会以某种方式混淆滚动视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:14:27.100

要么设置 UIScrollView 的“contentSize”属性，要么调用“sizeToFit”方法。

# django - Django URL（未找到页面）

> ID：12978062
> 
> 赞同：0
> 
> 时间：2012-10-19T15:58:33.353
> 
> 标签：django, django-urls

刚开始使用 Django 并弄清楚 URL 调度程序。根据我在文档中看到的内容，以下正则表达式应该可以捕获`news/story/2012/10/23/this-is-my-first-story`

```
urlpatterns = patterns('news.views',
    url(r'^$', 'index'),
    url(r'^news/story/(?P<year>\d{4})/(?P<month>\d){2}/(?P<day>\d){2}/(?P<title_key>\w+)/$', 'story'),
) 
```

但是，我收到以下错误...

> 使用 中定义的 URLconf `mysite.urls`，Django 按以下顺序尝试了这些 URL 模式：
> 
> *   `^polls/`
> *   `^news/`
> *   `^$`
> *   `^news/`
> *   `^news/story/(?P<year>\d)/(?P<month>\d)/(?P<day>\d)/(?P<title_key>\d)/$`
> *   `^admin/doc/`
> *   `^admin/`
> 
> 当前 URL`news/story/2012/10/23/this-is-my-first-story`与其中任何一个都不匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:13:10.807

首先，每个模式只接受一个数字。您需要将其修改为`\d+`或更适当的`\d{4}`for`year`和`\d{2}`for `month`and `day`。

其次，最后一个模式，for`title_key`设置为只接受数字（`\d`），如果你想要一个slug，你应该使用`[\w-]+`

# line - 在给定距离处沿线查找 3D 点

> ID：12978065
> 
> 赞同：3
> 
> 时间：2012-10-19T15:58:46.310
> 
> 标签：line, distance, direction

我有一个问题，如果我的解决方案是正确的，请告诉我。

我有一个已知点，位于位置 A(x1,y1,z1) 和原点 O(0,0,0)，我想找到位于的点 B(x2,y2,z2) 的坐标线OA，距离OB是OA的1.2倍。

所以，我的想法是求出点O和A组成的直线方程。OA的方向是(-x1,-y1,-z1)，所以直线的方程是：

x = -x1*t;

y = -y1*t;

z = -z1*t;

距离 OA 为 sqrt( (x1-0)^2 + (y1-0)^2 + (z1-0)^2)。已知

距离 OB 为 sqrt( (x2-0)^2 + (y2-0)^2 + (z2-0)^2)。未知

我可以替换为距离OB中的直线方程确定的x，y，z点，结果应该是距离OA的1.2倍。

所以，sqrt( (-x1*t-0)^2 + (-y1*t-0)^2 + (-z1*t-0)^2) = 1.2 * dist(OA)。

我从这里找到 t，求解二次方程，并通过替换直线方程中的 t 来获得点的坐标。

这个对吗？

感谢您的时间。

编辑：这是我的代码：

```
rangeRatio = 1.114;

norm = sqrt((P2(1) - P1(1))^2 + (P2(2) - P1(2))^2 + (P2(3) - P1(3))^2);

P3(1) = P1(1) + ((P2(1,1) - P1(1)) /norm) * rangeRatio;
P3(2) = P1(2) + ((P2(1,2) - P1(2)) /norm) * rangeRatio;
P3(3) = P1(3) + ((P2(1,3) - P1(3)) /norm) * rangeRatio; 
```

我也尝试了 norm = 1，得到的结果略有不同，但并不总是共线的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:13:46.403

它甚至要容易得多；您可以将 a、b 和 c 乘以 1.2。这给出的线是原始线大小的 1.2 倍。

# java - Spring Integration 窃听和异常

> ID：12978068
> 
> 赞同：0
> 
> 时间：2012-10-19T15:58:49.693
> 
> 标签：java, spring, spring-integration

我正在使用 Spring Integration 并在通道上设置了窃听，以便我可以记录一些数据。我担心的一个问题是，如果在记录期间抛出异常，则消息不会沿着我正在窥探的通道传递。

我会认为窃听的目的是让我在不让自己知道的情况下收听消息，但事实并非如此。

除了我将整个事情包装在一个 try/catch 块中之外，还有什么方法可以忽略窃听中的异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T16:41:30.627

你能发布你的配置吗？通常，您可以指定什么是错误通道。如果您不指定一个，它将进入一个名为 errorChannel 的特殊通道（您不必声明此通道，因为它已经可供您使用）。

# javascript - JS/jQuery 性能不佳，尤其是在 IE9 和 Firefox 中

> ID：12978069
> 
> 赞同：6
> 
> 时间：2012-10-19T15:58:55.413
> 
> 标签：javascript, jquery, performance

下面的脚本存在严重的视觉和性能问题。最大的问题是对象的动画变得非常生涩，在 IE9 中几乎是严重的，但在 Firefox 中却越来越烦人。

直到最近它一直非常快 - 但我担心复杂性会减慢速度。奇怪的是，[Sunspider 基准测试](http://www.webkit.org/perf/sunspider/sunspider.html)在我的 IE9 实例中比在 Firefox 中运行得更快。

脚本（这是一个更大的集合 *** 的片段）：

1.  检查用户在游戏中的进度的 HTML5 会话存储日志。
2.  根据舞台，使用[crSpline](https://github.com/MmmCurry/jquery.crSpline)为两点之间的对象设置动画。
3.  通过 scrollLeft 等确保浏览器窗口在大画布上跟随对象。
4.  最后，它通过[colorbox](http://www.jacklmoore.com/colorbox)加载一个弹出窗口。
5.  当此框关闭时，用户进度日志会相应增加，并且对象会再次移动。

我可以对我的代码进行明显的速度改进吗？有相当多的重复，我怎样才能减少呢？是否有我遗漏的无限循环运行？有没有可以用来分析 JS 慢点的软件？

***（我无法提供其他 JS 文件或 HTML，但我已将此脚本确定为问题所在）

* * *

**更新：** 经过更多测试后，似乎 step animate 函数 - 通过 scrollLeft 跟随窗口中的对象 - 导致了生涩的动画。删除它可以大大改善事情。

然而，这不是一个可行的长期解决方案。一个快速的解决方法是在完成时调用跟随函数，但这对于最终用户来说是一个不太流畅的体验，尤其是当对象移动更长的距离时。

**那么，我将如何修改 step 函数以“更慢”/更有效地运行？**我猜测抖动是由于它使用所有可用资源每毫秒跟踪对象引起的。

```
(function ($) {

  sessionStorage.gameMainStage = 0 

  moveShip =  function() {

    switch (sessionStorage.gameMainStage)

{
  case '1':
    $("#object").animate(
      { crSpline: $.crSpline.buildSequence([[715, 425], [582, 524], [556, 646], [722, 688], [963, 629], [1143, 467]]) },{
      duration: 10000,
          step: function() {
            var mover = $('#object'),               
            posX = mover.position().left;
            posY = mover.position().top;

            $(window)
            .scrollLeft(posX - $(window).width() / 2)
            .scrollTop(posY - $(window).height() / 2);
          },
          complete: function() {
            $.colorbox({href:"dialog-1.html", width:"737px", height:"474px", iframe: true, overlayClose: false, escKey: false, close: ""});
          }
      }
    );
    break;

  case '2':
    $("#object").animate(
      { crSpline: $.crSpline.buildSequence([[1143, 467], [1343, 667], [1443, 367],  [1243, 167], [1499, 285]]) },
        {
          duration: 5000,
          step: function() {
            var mover = $('#object'),               
            posX = mover.position().left;
            posY = mover.position().top;

            $(window)
            .scrollLeft(posX - $(window).width() / 2)
            .scrollTop(posY - $(window).height() / 2);
          },
          complete: function() {
            $.colorbox({href:"dialog-2", width:"737px", height:"547px", iframe: true, overlayClose: false, escKey: false, close: ""});
          }

        }
    );
    break;

  case '3':
    $("#object").animate(
      { crSpline: $.crSpline.buildSequence([[1499, 285], [1922, 423]]) },
        {
          duration: 5000,
          step: function() {
            var mover = $('#object'),               
            posX = mover.position().left;
            posY = mover.position().top;

            $(window)
            .scrollLeft(posX - $(window).width() / 2)
            .scrollTop(posY - $(window).height() / 2);
          },
          complete: function() {
            $.colorbox({href:"dialog-3.html", width:"737px", height:"547px", iframe: true, overlayClose: false, escKey: false, close: ""});
          }

        }
    );
    break;  

  case '4':
    $("#object").animate(
      { crSpline: $.crSpline.buildSequence([[1922, 423], [2216, 578]]) },{
        duration: 5000,
          step: function() {
            var mover = $('#object'),               
            posX = mover.position().left;
            posY = mover.position().top;

            $(window)
            .scrollLeft(posX - $(window).width() / 2)
            .scrollTop(posY - $(window).height() / 2);
            }, 

          complete: function() {
            $.colorbox({href:"game-1.html", width:"737px", height:"547px", iframe: true, overlayClose: false, escKey: false, close: ""});
          }
        }
    );
    break;

  case '5':
    $("#object").animate(
      { crSpline: $.crSpline.buildSequence([[2216, 578], [2769, 904]]) },{
      duration: 5000,
          step: function() {
            var mover = $('#object'),               
            posX = mover.position().left;
            posY = mover.position().top;

            $(window)
            .scrollLeft(posX - $(window).width() / 2)
            .scrollTop(posY - $(window).height() / 2);
          }, 

          complete: function() {
            $.colorbox({href:"dialog-4.html", width:"737px", height:"547px", iframe: true, overlayClose: false, escKey: false, close: ""});
          }
      }
    );
    break;

  case '6':
    $("#object").animate(
      { crSpline: $.crSpline.buildSequence([[2769, 904], [3263, 903]]) },{
      duration: 5000,
          step: function() {
            var mover = $('#object'),               
            posX = mover.position().left;
            posY = mover.position().top;

            $(window)
            .scrollLeft(posX - $(window).width() / 2)
            .scrollTop(posY - $(window).height() / 2);
          }, 

          complete: function() {
            $.colorbox({href:"dialog-5.html", width:"737px", height:"547px", iframe: true, overlayClose: false, escKey: false, close: ""});
          }
      }
    );
    break;

  case '7':
    $.colorbox({href:"game-2.html", width:"500px", height:"600px", iframe: true, overlayClose: false, escKey: false, close: ""});
  break;

  case '8':
    $.colorbox({href:"dialog-6.html", width:"737px", height:"567px", iframe: true, overlayClose: false, escKey: false, close: ""});
  break;

  case '9':
    $("#object").animate(
      { crSpline: $.crSpline.buildSequence([[3263, 903], [4141, 820]]) },{
      duration: 5000,
          step: function() {
            var mover = $('#object'),               
            posX = mover.position().left;
            posY = mover.position().top;

            $(window)
            .scrollLeft(posX - $(window).width() / 2)
            .scrollTop(posY - $(window).height() / 2);
          }, 

          complete: function() {
            $.colorbox({href:"dialog-7.html", width:"737px", height:"547px", iframe: true, overlayClose: false, escKey: false, close: ""});
          }
      }
    );
    break;

  case '10':
    $("#object").animate(
      { crSpline: $.crSpline.buildSequence([[4141, 820], [4568, 949], [4447, 1175]]) },{
      duration: 5000,
          step: function() {
            var mover = $('#object'),               
            posX = mover.position().left;
            posY = mover.position().top;

            $(window)
            .scrollLeft(posX - $(window).width() / 2)
            .scrollTop(posY - $(window).height() / 2);
          }, 

          complete: function() {
            $.colorbox({href:"dialog-8.html", width:"737px", height:"434px", iframe: true, overlayClose: false, escKey: false, close: ""});
          }
      }
    );
    break;

  case '11':
    $.colorbox({href:"dialog-9.html", width:"737px", height:"567px", iframe: true, overlayClose: false, escKey: false, close: ""});
  break;

  case '12':
    $("#object").animate(
      { crSpline: $.crSpline.buildSequence([[4447, 1175], [4701, 1124], [4816, 822]]) },{
      duration: 5000,
          step: function() {
            var mover = $('#object'),               
            posX = mover.position().left;
            posY = mover.position().top;

            $(window)
            .scrollLeft(posX - $(window).width() / 2)
            .scrollTop(posY - $(window).height() / 2);
          }, 

          complete: function() {
            $.colorbox({href:"dialog-10.html", width:"900px", height:"687px", iframe: true, overlayClose: false, escKey: false, close: ""});
          }
      }
    );
    break;
}

};

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-21T19:45:54.887

恐怕您使用的库太旧了，无法期待出色的表现。

我在您的代码中看不到任何问题（除了您可以为每个开关案例使用带有配置参数的函数，但这只是重构问题，不会显着影响性能）

CrSpline 使用左侧和顶部 CSS 属性。

您可能想研究利用硬件加速的 CSS 2d 转换：

使用`-webkit/moz/ms-transform: translateX(-1000px) translateY(200px)` 代替`left: -1000px; top: 200px;`

我认为您可以很容易地朝着这个方向重写 crspline 库中的一些代码。

您也可以尝试寻找更新的“样条”库。

还有一点：crSpline 似乎没有使用 requestAnimationFrame 功能。JQuery 的`animate`方法也不行。我建议你看看 TweenLite/TweenMax 库：[http ://www.greensock.com/v12/](http://www.greensock.com/v12/)

为你的工作干杯！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-26T21:10:52.253

我在与 window.resize 和 window.scroll 挂钩的单页应用程序中遇到了这个问题。它在 IE 上似乎比其他浏览器慢得多。

我注意到的第一件事是，在 IE（具体是版本 8）中，附加到 window.scroll 或 .resize 的回调在调整窗口大小（或滚动）时似乎比在 Chrome 或 FF 中触发的次数多得多。因此，任何附加的回调都被调用多次，比 Chrome 增加了它的相对成本。

我们设法通过将这些回调中所做的事情最小化来解决我们的问题，而我们的主要收获是摆脱了 jQuery 选择器。因此，在您的情况下，例如 var mover = $('#object') 在回调函数中，每次事件触发时，IE 都会尝试查找并获取对象并将其包装在 jQuery 中，只需在外部执行一次您的回调，然后使用缓存的对象。在我们的例子中，这提高了性能数量级，即使没有遇到性能问题（这是一个不必要地重复的操作），这似乎也是一件好事。

因此，以案例 8 为例，有如下内容：

```
 case '10':{
    //caching myObject once and then use it afterwards
    var myObject = $("#object"),
        $window = $(window);

    myObject.animate(
      {
      crSpline: $.crSpline.buildSequence([[4141, 820], [4568, 949], [4447, 1175]]) },
      {
      duration: 5000,
          step: function() {
            var mover = myObject, //no need to refetch the object               
            posX = mover.position().left;
            posY = mover.position().top;

            $window.scrollLeft(posX - $window.width() / 2)
            .scrollTop(posY - $window.height() / 2);
          }, 

          complete: function() {
            $.colorbox({href:"dialog-8.html", width:"737px", height:"434px", iframe: true, overlayClose: false, escKey: false, close: ""});
          }
      }
    );
} 
```

ps：此外，我不确定您的应用程序的语义，但您可能需要添加自己的逻辑来跟踪 posX 和 posY 因为它们可能总是引用原始缓存对象，但在所有情况下，请执行我提到的步骤确保选择器的成本是导致问题的原因（就像我的情况一样）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T19:50:11.910

首先，您应该优化您的代码，为您的动画创建一个函数（未经测试，但应该可以）：

```
function animateMyObjet(duration,sequence,callback)
{
    $("#object").animate(
    {   crSpline: $.crSpline.buildSequence(sequence),
        {
          duration: duration,
          step: function() {
            var mover = $('#object'),               
            posX = mover.position().left;
            posY = mover.position().top;

            $(window)
            .scrollLeft(posX - $(window).width() / 2)
            .scrollTop(posY - $(window).height() / 2);
          },
          complete: function() {
            callback();
        }
    }
} 
```

像这样在您的代码中调用：

```
switch (sessionStorage.gameMainStage)
{
  case '1': animateMyObjet(10000,[[715, 425], [582, 524], [556, 646], [722, 688], [963, 629], [1143, 467]],                                                                                  
function() {
$.colorbox({href:"dialog-1.html", width:"737px", height:"474px", iframe: true, overlayClose: false, escKey: false, close: ""});
        break;

case '2' : ...

} 
```

其次，几周前我发现网页元素的数量正在影响 IE9 的性能。尝试隐藏所有不需要的元素，例如由于可滚动容器而隐藏的元素。

有时，屏幕上可见元素的数量也会影响动画性能。对于测试，尝试减小浏览器窗口大小并播放动画。我很确定动画会更流畅。

我希望这些建议对您有所帮助。如果您解决了问题，请不要忘记发布您的最终解决方案！

最后，查看有关 IE9 性能问题的潜在相关主题：[IE9：我的网站上的 CPU 使用率总是很小](https://stackoverflow.com/questions/11800952/ie9-always-small-cpu-utilization-on-my-web-site)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T16:08:14.653

您可以尝试检查 IE 是否不会尝试在与 IE9 浏览器模式和 IE9 文档模式（即怪癖或兼容模式）不同的模式下工作。如果它确实试图强制它使用默认值。[使用标签强制关闭 IE 兼容模式](https://stackoverflow.com/questions/3449286/force-ie-compatibility-mode-off-in-ie-using-tags)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-27T22:09:06.547

我的想法是，如果您经常看到事件处理程序被调用，那么如果当前没有设置超时，那么事件处理程序只需设置一个超时（比如 10 毫秒），并且在超时函数中有移动的内容。

# java - Spring @ResponseBody 视图解析

> ID：12978074
> 
> 赞同：1
> 
> 时间：2012-10-19T15:59:06.873
> 
> 标签：java, spring, model-view-controller

# 问题

有没有人想出另一种视图分辨率的方法`@ResponseBody`（以允许实现部分[`ConcentNegotiatingViewResolver`](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config)功能）？

# 推理

spring 视图解析机制非常强大，特别是[`ContentNegotiatingViewResolver`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/servlet/view/ContentNegotiatingViewResolver.html)允许视图解析，例如路径扩展 ( `foo.json`) 或请求参数 ( `?view=json`)。

但是，当使用`@ResponseBody`注释时，会绕过视图解析链。[`mvc:annotation-driven`](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config)相反，我们得到了一个似乎[`RequestMappingHandlerAdapter`](http://static.springsource.org/spring/docs/3.1.0.RC1/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/RequestMappingHandlerAdapter.html)完全基于`Accept`标题的视图分辨率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T23:09:22.387

事实证明，Spring 的英雄们已经通过[#SPR-8410](https://jira.springsource.org/browse/SPR-8410)和[#SPR-7517](https://jira.springsource.org/browse/SPR-7517)注意到了这个问题。

> 现在已解决。要进行配置，请使用 ParameterContentNeogiationStrategy 声明一个 ContentNegotiationManager bean，并依次使用它来配置 RequestMappingHandlerMapping、RequestMappingHandlerAdapter 和 ExceptionHandlerExceptionResolver。

修复版本`3.2 M2`。

# php - 在 Doctrine 2 的一个领域中处理多重关系

> ID：12978075
> 
> 赞同：5
> 
> 时间：2012-10-19T15:59:26.370
> 
> 标签：php, doctrine, doctrine-orm

我在 Doctrine 2 的一个字段中可能存在多重关系时遇到了一点问题。例如，我有一个`Article`实体，其中一个字段名为`author`. 此字段是实体的多对一`User`。但是，该字段也可以与`Group`实体相关。那么，我怎么能创建这样的模式呢？

我考虑过创建一个名为的新实体，`ArticleAuthor`它有两个字段：`user`和`group`，并且根据表单输入，我填充其中一个字段。这样，该表`ArticleAuthor`就拥有它自己的`id`以及与正确表的正确关系。这是一个正确的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T16:15:08.803

这就是所谓的多态关联。Doctrine 能够使用[继承映射来处理这些问题](https://www.doctrine-project.org/projects/doctrine-orm/en/2.6/reference/inheritance-mapping.html#inheritance-mapping)

因此，您将定义您的基本实体，例如`Author`，然后您将拥有 a`GroupAuthor`和 a `UserAuthor`，它们都扩展了它。这些都需要配置为基础`Author`实体上的映射类。选择单表继承还是类表继承取决于您；最终结果将是相同的。

最后要做的是将`UserAuthor`实体关联到您的`User`实体，并将您的实体关联`GroupAuthor`到您的`Group`实体。

然后你就可以像这样使用它：

```
$author = $article->getAuthor();
if ($author instanceof UserAuthor) {
    $user = $author->getUser();
} elseif ($author instanceof GroupAuthor) {
    $group = $author->getGroup();
    $users = $group->getUsers(); // Not sure if you'd need this?
} 
```

## 编辑：示例映射

“父”实体，`Author.php`

```
/**
 * @ORM\Entity
 * @ORM\Table(name="authors")
 * @ORM\InheritanceType("JOINED")
 * @ORM\DiscriminatorColumn(name="type", type="string")
 * @ORM\DiscriminatorMap( {"user" = "UserAuthor", "group" = "GroupAuthor"} )
 */
class Author
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /* any other shared fields... */
} 
```

映射实体，`UserAuthor.php`

```
/**
 * @ORM\Entity
 * @ORM\Table(name="user_authors")
 */
class UserAuthor extends Author
{
    /* All columns unique to the UserAuthor entity... */
} 
```

ETC

# c# - 从两个不同的来源设置依赖属性：想要不同的后处理

> ID：12978081
> 
> 赞同：0
> 
> 时间：2012-10-19T15:59:36.060
> 
> 标签：c#, wpf, dependency-properties

我有以下 WPF 代码。您可以在评论中看到我的 OnValueChanged 处理程序有问题。我需要那里的代码来区分来自 UI 的值集（通过各种绑定）和来自管理器类的值集。我曾希望 DependencyPropertyChangedEventArgs 有某种来源可以用来区分这一点，但我没有看到类似的东西。想法？有没有办法在不触发其 PropertyChanged 处理程序的情况下设置 WPF DependencyProperty？谢谢你的时间。

```
public class GaugeBaseControl : UserControl
{
    protected readonly AssetModelManager Manager;
    public GaugeBaseControl(AssetModelManager mgr)
    {
        Manager = mgr;
        if(mgr != null)
            mgr.TelemetryValueChanged += MgrOnTelemetryValueChanged; // coming on background thread
    }

    private void MgrOnTelemetryValueChanged(KeyValuePair<string, object> keyValuePair)
    {
        if(_localTelemetryId != keyValuePair.Key)
            return;

        Dispatcher.Invoke(DispatcherPriority.Normal, new Action(() =>
        {
            if (!Equals(Value, keyValuePair.Value))
                Value = keyValuePair.Value;
        }));
    }

    private static void OnValueChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var gbc = (GaugeBaseControl) d;
        var id = gbc.TelemetryId;
        if (!string.IsNullOrEmpty(id))
        {
            // this is the problem:
            // I need to always set gbc.Manager[id] if this event was triggered from the UI (even when equal)
            // however, if it was triggered by TelemetryValueChanged then we don't want to go around in circles
            if (!Equals(gbc.Manager[id], e.NewValue))
                gbc.Manager[id] = e.NewValue;
        }
    }

    private string _localTelemetryId; // to save us a cross-thread check
    private static void OnTelemetryIdChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var gbc = (GaugeBaseControl)d;
        var tid = gbc.TelemetryId;
        gbc._localTelemetryId = tid;
        gbc.Value = string.IsNullOrEmpty(tid) ? null : gbc.Manager[tid];
    }

    public static readonly DependencyProperty TelmetryIdProperty = DependencyProperty.Register("TelemetryId", typeof(string), typeof(GaugeBaseControl), new PropertyMetadata(OnTelemetryIdChanged));
    public static readonly DependencyProperty ValueProperty = DependencyProperty.Register("Value", typeof(object), typeof(GaugeBaseControl), new PropertyMetadata(OnValueChanged));

    public object Value
    {
        get { return GetValue(ValueProperty); }
        set { SetValue(ValueProperty, value);}
    }

    public string TelemetryId
    {
        get { return (string)GetValue(TelmetryIdProperty); }
        set { SetValue(TelmetryIdProperty, value); }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:46:18.687

这似乎有点骇人听闻，但这是我在不改变架构的情况下能想到的最好的方法。您可以在进行内部更新以停止往返时停止监听 TelemetryValueChanged 事件，如下所示：

```
internal void SetManagerIdInternal(string id, object value)
{
    if(mgr != null)
    {
        mgr.TelemetryValueChanged -= MgrOnTelemetryValueChanged;
        mgr[id] = value;
        mgr.TelemetryValueChanged += MgrOnTelemetryValueChanged;
    }
} 
```

并像这样使用它：

```
if (!Equals(gbc.Manager[id], e.NewValue))
    SetManagerIdInternal(id, e.NewValue); 
```

您也可以使用私有字段跳过工作而无需在 MgrOnTelemetryValueChanged 中取消注册/重新注册事件，这可能会提高性能，但我还没有测试过。

# java - 处理大量个性化数据的项目使用哪种数据格式？

> ID：12978083
> 
> 赞同：1
> 
> 时间：2012-10-19T15:59:44.047
> 
> 标签：java, database

我正在为护理专业的学生申请；这是一个程序，用户可以在其中输入有关患者生命体征、皮肤评估、药物管理等的数据。

**关于数据的程序结构流程图：**

![http://puu.sh/1fIWi](../Images/ca7b7247e9b638c8a926576f6a934eaf.png)

该数据需要保存在可被患者整除的结构中，然后被记录的时间整除。问题是这将是一个巨大的数据量，因为需要每 15 分钟输入一次。

**项目与其数据之间必要交互的流程图：**

![http://puu.sh/1gqGN](../Images/e42cfe710ffe0a61ac3e69e57a65b481.png)

*请求随时间变化的患者变量*和*请求填充时间线*都在两个给定日期之间搜索该患者的所有条目。

我能想到的如何组织这些数据的最好方法是基于目录：

**data/PatientName/Month/19102012.file**（日期为 2012 年 10 月 19 日，用于快速省略忽略的日期）这种方式可能还可以，但感觉真的很糟糕，我应该为这些数据使用什么更好的组织？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:04:15.153

老实说，我不认为现在每 15 分钟输入一次患者数据的学生有资格获得*巨大*的数据。因此，几乎任何技术都可以使用。某种关系数据库是一个明显的选择，鉴于上述情况，我认为您不需要任何远程企业规模的东西。

想到的一个问题是，安全重要吗？毕竟这是医疗数据。这可能会影响您选择的技术，因为文件系统以与（例如）文件系统完全不同的方式实现安全性。

我现在可以给出的一条建议是将您的数据存储从解决方案的其余部分中抽象出来。这样，您现在可以实现一些琐碎的事情，并在将来随着您的需求固化而轻松替换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:01:27.947

您可以定义一个`custom class`（**A POJO**），其中包含作为属性所需的所有参数`POJO`，并将其创建的实例填充到`POJO`某个数据库中。

使用`Database`可能是处理大量数据的一种优雅方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T16:12:28.343

您建议的基于目录的方法实际上可能没问题。正如 Brian 和 Rohit 所指出的，关键是您要抽象出数据存储。换句话说，您的系统组件之间应该有一些接口，提供您想要的数据访问方法，*然后*将您*想要*的（即，在一段时间内请求特定患者等）与您*拥有的*连接起来（即，文件系统或数据库等）。

正如布赖恩所指出的，在当今世界，“巨大”指的是与每 15 分钟记录一次条目完全不同的规模。*我会构建一些可行*的东西，然后在它出现时解决规模问题。还有很多其他重要的事情需要担心，例如安全性、可靠性等。

# unix - 标签的使用 在 maven 插件 appassembler 中

> ID：12978086
> 
> 赞同：0
> 
> 时间：2012-10-19T15:59:49.867
> 
> 标签：unix, maven, plugins, appassembler

我正在使用 maven 插件 appassembler 来生成一个 unix 脚本。在它的标签中，我放了这样的东西：

```
<commandLineArguments>
  <commandLineArgument>$1</commandLineArgument>
  <commandLineArgument>$2</commandLineArgument>
  <commandLineArgument>$3</commandLineArgument>
</commandLineArguments> 
```

但是，生成的脚本显示 $1 $2 $3 "$@"

我不知道最后一个来自哪里，因此它重复了前 3 个参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:19:35.150

Mojo 的 AppAssembler Maven 插件生成一个脚本，该脚本始终将提供给脚本的所有命令行参数附加到 JVM 的启动命令上。因此，如果您什么都不做，这`"$@"`将是用于启动程序的 JVM 命令上的最后一件事。

该标签用于在[ARGLIST 匹配器](http://tldp.org/LDP/abs/html/internalvariables.html#ARGLIST)`<commandLineArguments>`之前注入额外的命令行参数。

似乎（对我来说）您认为您需要添加位置标记才能让参数通过，因此您要添加的代码段。那是两者：

1.  不必要，因为默认情况下插件会生成一个传递所有必需参数的脚本。
2.  实际上是一个潜在的错误，因为您配置的内容不能正确处理参数引用和转义。

关于第二点，考虑第二个参数是包含空格字符的文件名的情况。如果我像这样为你启动脚本程序

```
$ bin/foo.sh Document.txt Document\ 2.txt "Copy of Document 3.txt" Doc4.txt 
```

您实际上会看到以下内容通过您提供的配置传递到您的 Java 程序：

1.  `Document.txt`（全部 1 美元）
2.  `Document`（$2 已扩展，但未引用，因此现在重新评估）
3.  `2.txt`
4.  `Copy`（$3 被扩展，但没有被引用，因此也被重新评估，空格再次被视为参数分隔符）
5.  `of`
6.  `Document`
7.  `3.txt`
8.  `Document.txt`（现在 ARGLIST 匹配器正确提供了一切）
9.  `Document 2.txt`
10.  `Copy of Document 3.txt`
11.  `Doc4.txt`

解决方案很简单。停止尝试配置您不需要配置的东西！

# sql - 改进日志异常

> ID：12978087
> 
> 赞同：0
> 
> 时间：2012-10-19T15:59:50.317
> 
> 标签：sql, sql-server, logging, hash

我打算`log4net`在一个新的网络项目中使用。以我的经验，我看到日志表可以有多大，我也注意到错误或异常重复出现。例如，我刚刚查询了一个包含超过 132.000 条记录的日志表，我使用 distinct 发现只有 2.500 条记录是唯一的（~2%），其他的（~98%）只是重复的。所以，我想出了这个想法来改进日志记录。

有几个新列：`counter`和`updated_dt`，每次尝试插入相同的记录时都会更新。

如果要跟踪导致异常的用户，需要创建一个`user_log`或log_user表，来映射NN关系。

创建此模型可能会使系统尝试比较所有这些长文本时变得缓慢且效率低下......这里的技巧，我们还应该有一个`hash column`16 或 32 的二进制文件，对消息和异常进行哈希处理，并在其上配置索引. 我们可以[`HASHBYTES`](http://msdn.microsoft.com/en-us/library/ms174415.aspx)用来帮助我们。我不是 DB 方面的专家，但我认为这样可以更快地找到类似记录。并且由于散列不能保证唯一性，这将有助于更快地对那些相似的记录进行本地化，然后直接通过消息或异常进行比较，以确保它们是唯一的。

这是一个理论/实际的解决方案，但它会起作用还是带来更多的复杂性？我遗漏了哪些方面或需要考虑哪些其他因素？触发器将完成插入或更新的工作，但触发器是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:40:38.867

是的，你可以这么做。这是个好主意，而且会奏效。从多个线程或进程插入时要注意并发问题。您可能需要详细研究锁定。您应该查看锁定提示（在您的情况下`UPDLOCK, HOLDLOCK, ROWLOCK`）和`MERGE`语句。它们可用于维护维度表。

作为替代方案，您可以登录到文件并压缩它。典型的压缩算法非常擅长消除这种类型的精确冗余。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:28:39.297

老实说，我不会太在意包含 132,000 条记录的日志表，我已经在日志表中看到了数百万甚至数十亿条记录。**如果您每隔几分钟**就注销 132,000 条记录，那么您可能需要将其调低一点。

我认为这个想法很有趣，但这是我的主要担忧：

*   **这样做实际上可能会损害应用程序的性能。**Log4Net ADO.NET appender 是同步的。这意味着如果你让你的 INSERT 变得比它需要的更复杂（也就是查找数据是否已经存在，计算哈希码等），你将阻塞调用日志的线程。这不好！您可以将这种写作修复到某种临时表上，并通过工作或其他东西在带外进行，但现在您已经为可能更简单的事情创建了一堆移动部件。
*   时间可能最好花在做其他事情上。存储很便宜，开发人员的时间也很便宜，并且日志不需要非常快地访问，因此非规范化模型应该没问题。

想法？

# wordpress - 添加到 WordPress 主题时，引导日期选择器和时间选择器无法正常工作

> ID：12978093
> 
> 赞同：2
> 
> 时间：2012-10-19T16:00:07.183
> 
> 标签：wordpress, twitter-bootstrap, datepicker, timepicker

真的希望你能帮我解决这个问题，我迷路了......

我已将[`bootstrap-datepicker.js`](https://github.com/eternicode/bootstrap-datepicker)和添加[`bootstrap-timepicker.js`](https://github.com/jdewit/bootstrap-timepicker)到主题的 js 文件夹和相关的 css 文件到 css/bootstrap 文件夹。

我已经修改了 functions.php 以将脚本和样式表排入队列：

```
wp_enqueue_script('bootstrap-js', get_template_directory_uri() .'/js/bootstrap.js');
wp_enqueue_script('bootstrap-datepicker', get_template_directory_uri() .'/js/bootstrap-datepicker.js');
wp_enqueue_script('bootstrap-fileupload', get_template_directory_uri() .'/js/bootstrap-fileupload.js');
wp_enqueue_script('bootstrap-timepicker', get_template_directory_uri() .'/js/bootstrap-timepicker.js');

wp_enqueue_style('bootstrap', get_template_directory_uri().'/css/bootstrap/bootstrap.css');
wp_enqueue_style('responsive', get_template_directory_uri().'/css/bootstrap/bootstrap-responsive.css');
wp_enqueue_style('bootstrap-datepicker', get_template_directory_uri().'/css/bootstrap/bootstrap-datepicker.css');
wp_enqueue_style('bootstrap-fileupload', get_template_directory_uri().'/css/bootstrap/bootstrap-fileupload.css');
wp_enqueue_style('bootstrap-timepicker', get_template_directory_uri().'/css/bootstrap/bootstrap-timepicker.css'); 
```

对象显示正确，但单击它们时没有任何反应。我用下面的 HTML 调用它们（来自每个作者网站的示例代码）：

```
<div class="input-append date" id="datepicker" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
    <input class="span2" size="16" type="text" value="12-02-2012">
    <span class="add-on"><i class="icon-th"></i></span>
</div>

<div class="input-append bootstrap-timepicker-component">
    <input type="text" class="timepicker-default input-small">
    <span class="add-on">
        <i class="icon-time"></i>
    </span>
</div> 
```

当我在 Chrome 中检查元素时，我可以看到 CSS 在那里，并且脚本出现在 Resources > Scripts 部分。网站上的其他一切工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T00:49:36.917

问题是您所做的只是为日期选择器和时间选择器创建标记和样式，您实际上并没有在输入上启用它们。

使用 jQuery，您可以使用以下 javascript 来启用：

```
$('.timepicker-default').timepicker(); // I would change the class, or maybe use an id
$('#datepicker').datepicker(); 
```

您可以在文档中看到更多选项

*   [http://jdewit.github.com/bootstrap-timepicker/](http://jdewit.github.com/bootstrap-timepicker/)
*   [http://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

# c# - 使用 C#、MVC 3 和 KO 更改 URL 参数

> ID：12978095
> 
> 赞同：3
> 
> 时间：2012-10-19T16:00:09.070
> 
> 标签：c#, html, asp.net-mvc-3, url, knockout.js

这是我的情况：

我有一个从数据库中提取数据的搜索页面。显示的每条记录都附加了一个键，以便从数据库中提取该记录的数据。当单击记录文档的链接时，使用 KO 数据绑定将此键添加到 URL 上，并将控制权传递给相应的 MVC 控制器。

这是我的问题：

该密钥显示在 URL 中。我不能允许这样。本网站的用户只被允许访问某些记录。如果用户仅通过更改 URL 中键的最后一个或两个数字就可以看到任何记录，这是不可接受的。到目前为止，我想出的最佳解决方案是在处理搜索结果时使用 AES256 加密来加密每个密钥，然后在将加密传递给另一个控制器后解密。这很好用，除非我进入使用 HTTPS 的环境。我收到 400 个错误。

这是我想太多了吗？有没有办法使用 MVC 和 KO 完全屏蔽 URL 中的密钥？或者即使使用 HTTPS，也应该在 URL 中允许加密？

以下是一些澄清的例子：

如果不对我的代码进行任何更改，以下是 URL 的外观：

> [https://www.website.com/Controller/Method/1234](https://www.website.com/Controller/Method/1234)

使用加密，我想出了这样的事情：

> [https://www.website.com/Controller/Method/dshfiuij823o==](https://www.website.com/Controller/Method/dshfiuij823o==)

只要它适用于 HTTPS，它就可以正常工作。

一种或另一种方式，我需要打乱 URL 中的密钥或摆脱它。或者确定每次调用控制器时不使用键运行搜索的方法。

谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:04:02.347

除非我在这里遗漏了一些非常明显的东西，否则你不能在 Web 服务方面检查登录用户是否对记录具有正确的权限，如果没有，不显示记录吗？

理想情况下，这应该在搜索级别完成，这样用户就不会看到任何他们无法访问的文件。即使他们更改了浏览器中的密钥，他们仍然无法访问。

如果没有会员系统，那么如果您真的想让您的网站安全，就需要实施一个。否则，你就是在玩火。否则，您将需要将文档设置为“公共”或“私有”，其中仍需要进行数据库级别的更改。

**编辑**

如果您*确实*需要使您的 ID 不可猜测，请不要对其进行加密，使用更简单的方法并在您的数据库级别为它们创建 GUID。然后您的 URL 将包含 GUID 而不是加密密钥。由于您不必在每次通话时加密/解密您的记录 ID，这将更加高效。

然而，这仍然不是 100% 安全的，我怀疑是否会通过 PCI 数据安全检查，因为人们仍然可以从查询字符串中查看（和复制/粘贴）GUID，就像使用加密字符串一样容易。实际上，您需要一个会员系统才能完全合规。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:15:11.940

我同意狄克逊的观点。您应该检查用户是否有权查看任何项目。

我也同意使用 GUID 是个好主意。

但是，如果您不喜欢整数作为 id，这里有一个简单的方法：创建 URL 时：将 id 乘以一个大整数，例如 12345。然后在处理请求时，将 URL 中的数字除以您的“秘密” “ 数字。这不是万无一失的。但是一个猜测的人只有很小的机会获得一个真实的身份证——具体来说，12345 分之一的机会得到一个真实的身份证。

# c# - MVC 中的自定义验证似乎找不到声明的方法

> ID：12978102
> 
> 赞同：1
> 
> 时间：2012-10-19T16:00:43.330
> 
> 标签：c#, model-view-controller, postback, custom-validators

我有一个带有以下属性定义的发票对象...

```
[CustomValidation(typeof(InvoiceValidator), "ValidateInvoiceDate")]
 public DateTime InvoiceDate { get; set; } 
```

当我在我的 MVC 应用程序中进行回发时，我会得到一个发票对象，然后执行此操作...

```
if(ModelState.IsValid)
{
   SaveInvoice(invoice);
} 
```

我的验证器看起来像这样......

```
public static class InvoiceValidator
{
   public static ValidationResult ValidateInvoiceDate(DateTime invoiceDate, ValidationContext context)
   {
       // some validation code (omitted)
   }
} 
```

我的问题似乎是让大坝工作，因为目前它只是抛出一个异常：

```
The CustomValidationAttribute method 'ValidateInvoiceDate' does not exist in type 'InvoiceValidator' or is not public and static. 
```

这种说法显然是不对的，验证器类存在，具有正确修饰符（public、static）的方法也存在。这是我之前使用过的代码，通常可以正常工作，但由于某种原因这次无法正常工作。

任何想法还有什么可能导致这个异常被抛出？

我尝试过的事情：

干净的解决方案和完全重建（编译时没有错误）。将方法/验证器类和重构属性重命名为新值，然后重新编译头在此处询问

在我看来，我的代码没有正确运行或其他什么，因为我不明白为什么明确声明的公共静态方法会导致错误，说除此之外没有声明它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:03:33.657

`ValidateCurrencyCode`是你的提示。您是否使用`InvoiceValidator`来验证您的`CurrencyCode`领域？似乎您确实在其他领域使用它，但没有在您的验证器类中实现该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T08:30:32.533

好的，找到了....

事实证明这是错误的：

```
[CustomValidation(typeof(InvoiceValidator), "ValidateInvoiceDate")] 
```

“typeof(InvoiceValidator)”虽然它具有正确的类型名称，但它足够具体，并且一些 T4 生成的代码在更近的范围内生成具有相同名称的类型，因此编译器将其与该类型匹配。

不过，我对此有点恼火……当然，编译器应该为不明确的类型引用而不是运行时错误抛出异常。

坏微软！！

# wpf - 具有一对多 Linq to SQL 表的树视图

> ID：12978112
> 
> 赞同：0
> 
> 时间：2012-10-19T16:01:09.833
> 
> 标签：wpf, vb.net, linq-to-sql

我有几张处理汽车的桌子：

```
<Table(Name:="tblManufacturer")> Public Class dbManufacturers

    Private _ManufacturerID As Integer
    <Column(Storage:="_ManufacturerID", DbType:="int IDENTITY NOT NULL", IsPrimaryKey:=True, IsDbGenerated:=True, Name:="ManufacturerID")> _
    Public Property ManufacturerID() As Integer
        Get
            Return Me._ManufacturerID
        End Get
        Set(value As Integer)
            Me._ManufacturerID = value
        End Set
    End Property

    Private _ManufacturerName As String
    <Column(Storage:="_ManufacturerName", DbType:="Varchar(50)", Name:="ManufacturerName")> _
    Public Property ManufacturerName() As String
        Get
            Return Me._ManufacturerName
        End Get
        Set(value As String)
            Me._ManufacturerName = value
        End Set
    End Property

    Private _Models As EntitySet(Of dbModels) = New EntitySet(Of dbModels)
    <Association(Storage:="_Models", DeleteRule:="CASCADE", OtherKey:="ManufacturerID")> _
    Public Property Models As EntitySet(Of dbModels)
        Get
            Return _Models
        End Get
        Set(value As EntitySet(Of dbModels))
            _Models.Assign(value)
        End Set
    End Property

End Class

<Table(Name:="tblModels")> Public Class dbModels

    Private _ModelID As Integer
    <Column(Storage:="_ModelID", DbType:="int IDENTITY NOT NULL", IsPrimaryKey:=True, IsDbGenerated:=True, Name:="ModelID")> _
    Public Property ModelID() As Integer
        Get
            Return Me._ModelID
        End Get
        Set(value As Integer)
            Me._ModelID = value
        End Set
    End Property

    Private _ManufacturerID As Integer
    <Column(Storage:="_ManufacturerID", DbType:="int", Name:="ManufacturerID")> _
    Public Property ManufacturerID() As Integer
        Get
            Return Me._ManufacturerID
        End Get
        Set(value As Integer)
            Me._ManufacturerID = value
        End Set
    End Property

    Private _ModelName As String
    <Column(Storage:="_ModelName", DbType:="Varchar(200)", Name:="ModelName")> _
    Public Property ModelName() As String
        Get
            Return Me._ModelName
        End Get
        Set(value As String)
            Me._ModelName = value
        End Set
    End Property

End Class 
```

XAML：

```
 <TreeView Name="TreeView1" Margin="3" ItemsSource="{Binding ElementName=ManufacturerInfo, Path=tblManufacturers}">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate>
                    <TextBlock Text="{Binding Path=ManufacturerName}" />
                    <HierarchicalDataTemplate.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Source=Models, Path=ModelName}" /> 
                        </DataTemplate>
                    </HierarchicalDataTemplate.ItemTemplate>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView> 
```

后面的代码：

```
Public Class ManufacturerInfo

    Private LinqDB As New DataContext(My.Settings.dbConnection)
    Property tblManufacturers As Table(Of dbManufacturers) = LinqDB.GetTable(Of dbManufacturers)()

    Public Sub New()
        InitializeComponent()
    End Sub

    Private Sub ManufacturerInfo_Loaded(sender As Object, e As System.Windows.RoutedEventArgs) Handles Me.Loaded
        Me.DataContext = Me
    End Sub

End Class 
```

所以我得到了制造商列表，但没有嵌套模型。有没有办法使这项工作，或者我必须改变我如何做我的 LINQ 查询？

我很难找到类似的树视图示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:29:31.620

弄清楚了。
仍然需要了解数据绑定的微妙艺术。

```
 <TreeView Name="TreeView1" Margin="3" ItemsSource="{Binding ElementName=ManufacturerInfo, Path=tblManufacturers}">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Path=Models}">
                    <TextBlock Text="{Binding Path=ManufacturerName}" />
                    <HierarchicalDataTemplate.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=ModelName}" />
                        </DataTemplate>
                    </HierarchicalDataTemplate.ItemTemplate>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView> 
```

# javascript - 使用 Places Library 在 Google Maps V3 上搜索现有点

> ID：12978113
> 
> 赞同：0
> 
> 时间：2012-10-19T16:01:14.953
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

好吧，自从我第一次发布这个并且我未能正确解释我想要做的事情时，这是我的第二次尝试。

在我的网站上，我实现了 Google Maps V3 Javascript。创建一组预定义的点（从 CMS 中）并通过包含所需信息的数组推送到地图。我的客户想知道的是，该站点的用户是否可以执行搜索以从该数组中查找现有点。我在想这将涉及使用 Places 库，但这会返回来自谷歌的所有有效结果，而不是来自在 CMS 中创建的自定义点数组。

```
$('#points-search').submit(function(){
    geocoder = new gm.Geocoder();

    var searchAddress = $(this).children('input[type="text"]').val();
    var searchPoints = [];

    if (geocoder){
        geocoder.geocode({'address' : searchAddress}, function(results, status){
            if (status == gm.GeocoderStatus.OK){
                $.each(results, function(i, result){
                    searchPoints.push({"lat" : result.geometry.location.Xa, "lng" : result.geometry.location.Ya});
                });
            } else {
                                    alert('nothing found!')
            }
        });
    }

    return false;
}); 
```

当然，该代码还没有完成。理论上我想做的是，比如说，如果我搜索“4777 Avenue Pierre-de Coubertin”，它会在我的 $points 数组中找到合适的点，而不是在蒙特利尔和所有其他点这个地址的世界。

```
lat: 45.5
lng: -73.553459
location: "2 Rue de la Commune Ouest, <br />Montreal, QC H2Y 2E2, Canada"
name: "Montreal Science Centre"
pointType: "Community"
url: "/points/item/montreal-science-centre"

lat: 45.514229
lng: -73.531342
location: "4777 Avenue Pierre-de Coubertin<br />Montreal, QC H1V 1B3, Canada"
name: "Montreal Biodome"
pointType: "Curated"
url: "/points/item/montreal-biodome" 
```

我希望这能更清楚地描述我正在尝试做的事情。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:42:08.540

> 我的客户想知道的是，该站点的用户是否可以执行搜索以从该数组中查找现有点。

答案是肯定的。搜索涉及哪些标准？信息窗口中的数据？最近点？您是否有一个可以更有效地进行搜索的数据库？

> 理论上我想做的是，比如说，如果我搜索“4777 Avenue Pierre-de Coubertin”，它会在我的 $points 数组中找到合适的点，而不是在蒙特利尔和所有其他点这个地址的世界。

你有选择：

1.  在信息窗口中搜索该字符串的文本（或该地址的对象属性，您可能希望制作一个没有 HTML 格式的版本以使搜索更容易）
2.  对输入地址进行地理编码并在标记数组中找到最近的点（假设结果在您感兴趣的区域）。
3.  别的东西或以上的组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:52:40.473

You want to reverse geocode all your addresses and use the harvesine formula to look for proximities. There is also other technology like r-tree, spatial index and space filling curves. Those are also proximity search and can be much faster then a search one-by-one for example with the harvesine formula.

# javascript - Javascript，Canvas：计算飞行气泡的角度

> ID：12978118
> 
> 赞同：1
> 
> 时间：2012-10-19T16:01:23.297
> 
> 标签：javascript, canvas, html5-canvas, angle

**是）我有的：**

很多气泡。但为了更简单，假设我有两个。当它们相遇时，它们会发生碰撞并改变方向。

```
var xVelocityBubble1 = Math.random();
var yVelocityBubble1 = Math.random();

var xVelocityBubble2 = Math.random();
var yVelocityBubble2 = Math.random();

moveBubbles = function() {
xbubble1 += xVelocityBubble1;
ybubble1 += yVelocityBubble1;

xbubble2 -= xVelocityBubble2;
xbubble2 -= yVelocityBubble2;

if (Math.sqrt(Math.pow(xbubble1 - xbubble2, 2) + Math.pow(ybubble1 - ybubble2, 2)) < radius * 2) {
xVelocityBubble1 *= -1;
yVelocityBubble1 *= -1;
xVelocityBubble2 *= -1;
yVelocityBubble2 *= -1;
}
} 
```

**我想要的是：**

我不想让圆圈简单地改变方向，因为那看起来很奇怪和无聊。所以我想计算圆相交的角度，然后我需要计算它们交换了多少动量以及它如何影响每个圆。

**我的问题：**

我真的不知道如何计算角度和动量！有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:25:51.963

如果它们碰撞，要获得这两个气泡之间的角度，请执行以下操作：

获取其中一个气泡移动的方向向量

```
direction = {x: Math.abs(xVelocityBubble1), y: Math.abs(yVelocityBubble1)}; 
```

然后对该向量进行归一化（将它的 x 和 y 分量除以它的长度）

这样做之后，您将获得角度的余弦作为 x 分量，将正弦作为 y，只需在`Math.acos`or中使用它们中的任何一个`Math.asin`，您就会得到它们碰撞的角度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T23:55:49.867

这段代码显示了小行星的碰撞：

```
 for (var i = 0; i < asteroidsLength; i++) {
                var tmpAsteroid = asteroids[i];

                for (var j = i + 1; j < asteroidsLength; j++) {
                    var tmpAsteroidB = asteroids[j];

                    var dX = tmpAsteroidB.x - tmpAsteroid.x;
                    var dY = tmpAsteroidB.y - tmpAsteroid.y;
                    var distance = Math.sqrt((dX * dX) + (dY * dY));

                    if (distance < tmpAsteroid.radius + tmpAsteroidB.radius) {
                        var angle = Math.atan2(dY, dX);
                        var sine = Math.sin(angle);
                        var cosine = Math.cos(angle);

                        // Rotate asteroid position
                        var x = 0;
                        var y = 0;

                        // Rotate asteroidB position
                        var xB = dX * cosine + dY * sine;
                        var yB = dY * cosine - dX * sine;

                        // Rotate asteroid velocity

                        var vX = tmpAsteroid.vX * cosine + tmpAsteroid.vY * sine;
                        var vY = tmpAsteroid.vY * cosine - tmpAsteroid.vX * sine;

                        // Rotate asteroidB velocity
                        var vXb = tmpAsteroidB.vX * cosine + tmpAsteroidB.vY * sine;
                        var vYb = tmpAsteroidB.vY * cosine - tmpAsteroidB.vX * sine;

                        // Conserve momentum
                        var vTotal = vX - vXb;
                        vX = ((tmpAsteroid.mass - tmpAsteroidB.mass) * vX + 2 * tmpAsteroidB.mass * vXb) / (tmpAsteroid.mass + tmpAsteroidB.mass);
                        vXb = vTotal + vX;

                        // Move asteroids apart
                        xB = x + (tmpAsteroid.radius + tmpAsteroidB.radius);

                        // Rotate asteroid positions back
                        tmpAsteroid.x = tmpAsteroid.x + (x * cosine - y * sine);
                        tmpAsteroid.y = tmpAsteroid.y + (y * cosine + x * sine);

                        tmpAsteroidB.x = tmpAsteroid.x + (xB * cosine - yB * sine);
                        tmpAsteroidB.y = tmpAsteroid.y + (yB * cosine + xB * sine);

                        // Rotate asteroid velocities back
                        tmpAsteroid.vX = vX * cosine - vY * sine;
                        tmpAsteroid.vY = vY * cosine + vX * sine;

                        tmpAsteroidB.vX = vXb * cosine - vYb * sine;
                        tmpAsteroidB.vY = vYb * cosine + vXb * sine;
                    };

                }; 
```

# git - 在 repo 根目录中替换后恢复 git 存储库中的本地更改

> ID：12978120
> 
> 赞同：0
> 
> 时间：2012-10-19T16:01:37.450
> 
> 标签：git

知道如何`find . -type f | xargs sed -i 's/[\t ]*$//g'`在 repo 根目录后恢复 git repo 中的本地更改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:10:55.497

由于我一开始误解了这个问题，所以我想我应该澄清一下，这里的问题是你运行的命令也会在 git 的`objects`目录中重写文件。（很明显，您的工作树中的文件可以使用通常的建议恢复`git reset --hard`，但通常需要注意的是，未提交的本地更改将丢失。）

我自己不必处理这种情况，但我建议如下：

1.  将损坏的存储库复制到保存位置，以防万一试图修复损坏会使事情变得更糟。
2.  尝试运行：`git fsck`以评估损坏 - 在其他检查中，这将查看哪些文件的内容不再匹配它们的哈希值。
3.  尝试找到在损坏之前最后一次获取的存储库的任何克隆（并仔细保留它的副本）。如果您小心地`.git/config`正确更新并获得正确的文件权限，则可以使用它来代替损坏的存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:12:30.523

也许你应该尝试：

`git reset --hard HEAD`

这是为了丢弃跟踪文件中的所有修改，并将工作目录恢复为 HEAD 状态

# php - 我正在为 codeignighter 创建一个新库，似乎我无法使用/加载我创建的助手

> ID：12978121
> 
> 赞同：0
> 
> 时间：2012-10-19T16:01:38.263
> 
> 标签：php, class, codeigniter

基本上我有一个具有多个功能的帮助文件。我在配置文件中自动加载帮助程序，因此理论上不需要重新加载它。

但是，当我尝试在我正在处理的新库中使用我创建的函数（来自这个帮助程序）时，它将通过这个错误：

```
"Parse error: syntax error, unexpected '(', expecting ',' or ';' in /home/techwork/public_html/giverhub/application/libraries/Udetails.php on line 7" 
```

每当我在其他任何地方（模块、控制器、视图）使用该功能时，它都可以正常工作。

然后我阅读并认为也许我应该按照以下说明尝试加载帮助程序：http: [//codeigniter.com/user_guide/general/creating_libraries.html](http://codeigniter.com/user_guide/general/creating_libraries.html)

并尝试引用和加载，但这也是通过错误：

```
"Parse error: syntax error, unexpected T_VARIABLE, expecting T_FUNCTION in /home/techwork/public_html/giverhub/application/libraries/Udetails.php on line 5" 
```

这是图书馆：

```
class Udetails{

$CI =& get_instance();// referencing as described in their website
$CI->load->helper('mylogin_helper');// loading the helper
public $member_session = is_member(); // using the function 
public $username = $member_session['username'];
public $current_uID = $member_session['id'];
public $member_status = $member_session['status'];
} 
```

这是助手中的函数：

```
if ( ! function_exists('is_member'))
{
    function is_member(){
        $CI =& get_instance();
    $is_logged_in = $CI->session->userdata('is_logged_in');
    $username = $CI->session->userdata('username');
    $capabilities = $CI->session->userdata('capabilities');
    $user_id = $CI->session->userdata('id');
    switch ($capabilities){
        case 'registered':
          $level = 1;
          break;
        case 'confirmed':
          $level = 2;
          break;
        case 'charity_admin':
          $level = 3;
          break;
        case 'admin':
          $level = 4;
          break;
        case 'super_admin':
          $level = 5;
          break;
        default:
          $level = 0;
    }

    $userdetails = array();
    if(isset($is_logged_in) && $is_logged_in == true){
        if($level > 1){
            $userdetails['username'] = $username;
            $userdetails['status'] = TRUE;
            $userdetails['id'] = $user_id;
            return $userdetails;
        }

    }   

}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:05:10.647

下面一行有问题

```
public $member_session = is_member(); 
```

你不能`initialize class variable with function call`。它应该有一些静态值而不是动态的

因此，您还会在第 7 行遇到解析错误

**编辑**

```
class Udetails{

public $username = $member_session['username'];
public $current_uID = $member_session['id'];
public $member_status = $member_session['status'];

public function get_data(){
    $CI =& get_instance();// referencing as described in their website
    $CI->load->helper('mylogin_helper');// loading the helper

    $member_session = is_member(); // using the function 

    $this->username = $member_session['username'];
    $this->current_uID = $member_session['id'];
    $this->member_status = $member_session['status'];

}

} 
```

在控制器中，

```
$this->load->library('udetails');

echo "<pre>";
 print_r ($this->udetails->get_data()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:19:03.627

```
class Udetails{

    // initializing variables that will be used in other methods
public $username;
public $current_uID;
public $member_status;

public function __construct(){
    $member_session = is_member();
    $this->username = $member_session['username'];
    $this->current_uID = $member_session['id'];
    $this->member_status = $member_session['status'];
}

// All the gets
    public function anothermethod(){
         //$CI =& get_instance(); - need to load those on each method if needed
         //$CI->load->helper('mylogin_helper'); - need to load those on each method if needed
        //can now use any of the variable deined in the construct in other methods.
        return $this->username;
    }
} 
```

在控制器中：

```
$this->load->library('udetails');
$somevar = $this->udetails->anothermethod(); 
```

我希望这会有所帮助。

# zend-framework - zend_db 获得 "select ..., (select ...) as x from ..."

> ID：12978123
> 
> 赞同：0
> 
> 时间：2012-10-19T16:01:41.160
> 
> 标签：zend-framework, zend-db

我有一个无法用 Zend_Db_Select 构建的查询

```
SELECT `f`.*,          
        (SELECT Sum(x) AS `y`
        FROM   z AS pf
        WHERE  pf.q_id = f.id) AS w
FROM  f ...
WHERE ...
GROUP  BY `f`.`id` 
```

所以目前我正在手动运行它`$db->fetchAll($sql)`。

我如何获得

```
select f.* , (select ...) as `something` from ... 
```

想用`->column('f.*, (select...)')`但是没用

如果我这样做（选择...，id）然后加入该id，它可能与左连接一起工作，但我想获得这个非常sql查询。可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:32:55.400

我会推荐加入。您可能会获得更好的性能，因为数据库通常很难优化子选择。用 Zend_Db_Select 编写它也很容易。或者 new`Zend_Db_Expr`可能适用于此。

```
 $select = $db->select()
   ->from('f', array('f.foo', 'f.bar', new Zend_Db_Expr('SELECT Sum(x) AS `y`
                                                         FROM   z AS pf
                                                         WHERE  pf.q_id = f.id') => 'f'))
   ->where(...); 
```

# c# - 在 Windows 浏览器窗体中停用鼠标中键移动

> ID：12978130
> 
> 赞同：2
> 
> 时间：2012-10-19T16:02:30.473
> 
> 标签：c#, winforms, forms, browser

我在 Windows 窗体中有一个 WebBrowser 控件，我想使用鼠标中键单击向我的浏览器添加一个新选项卡。唯一的问题是每次我使用鼠标中键时，都会出现移动页面的箭头。

那么我如何才能仅针对我的链接点击禁用此移动/拖动命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-03T14:29:58.530

试试这个：这个解决方案有两个不同的部分。第一个非常简单 - 只需为浏览器控件的 MouseDown 事件设置一个事件处理程序：

```
 private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
                {
                    if (webBrowser1.Document != null)
                    {
                        webBrowser1.Document.MouseDown += Document_MouseDown;
                    }
                }

 private void Document_MouseDown(object sender, HtmlElementEventArgs e)
            {
                if (e.MouseButtonsPressed == System.Windows.Forms.MouseButtons.Middle)
                {
                    e.ReturnValue = false;

                    // Your custom code
                }
            } 
```

但也有一些 javascript-heavy 网站，此解决方案无法正常工作。对于那些，我找到了另一种解决方案，涉及将 javascript 注入到文档中，这将阻止中键：

```
HtmlElement head = browser.Document.GetElementsByTagName("head")[0];
HtmlElement mscript = browser.Document.CreateElement("script");
IHTMLScriptElement element = (IHTMLScriptElement)mscript.DomElement;
element.text = "function handleMouseEvent(e) { "
               + "var evt = (e==null ? event:e); "
               + "if ( e.which == 2 ) e.preventDefault(); "
               + "return true; } "
               + "document.onmousedown = handleMouseEvent; "
               + "document.onmouseup   = handleMouseEvent; "
               + "document.onclick     = handleMouseEvent; ";
head.AppendChild(mscript); 
```

* * *

更新

JavaScript 注入方法可以通过遵循仅使用托管代码的建议方法进行改进： [stackoverflow.com/a/6222430/1248295](https://stackoverflow.com/a/6222430/1248295)

这是 javascript 注入的另一个示例实现，用 VB.NET 编写：

```
 Private ReadOnly handleMouseEventJs As String =
"
function HandleMouseEvent(e) {
    var evt = (e==null ? event:e); 
    if (e.which == 2) e.preventDefault(); 
    return true;
} 

document.onmousedown = HandleMouseEvent;
// These events below seems are not necessary to handle for this purpose.
// document.onmouseup = HandleMouseEvent;
// document.onclick   = HandleMouseEvent;
"

Private Sub WebBrowser1_Navigated(sender As Object, e As WebBrowserNavigatedEventArgs) _
Handles WebBrowser1.Navigated

    Dim wb As WebBrowser = DirectCast(sender, WebBrowser)
    Dim doc As HtmlDocument = wb.Document
    Dim head As HtmlElement = doc.GetElementsByTagName("head")(0)
    Dim js As HtmlElement = doc.CreateElement("script")
    js.SetAttribute("text", handleMouseEventJs)
    head.AppendChild(js)

    ' This method call seems not necessary at all, it works fine without invocking it.
    ' doc.InvokeScript("HandleMouseEvent", Nothing)

End Sub 
```

* * *

更新 2

而是注入此代码：

```
document.body.onmousedown = function(e) { if (e.button === 1) return false; } 
```

[https://stackoverflow.com/a/30423534/1248295](https://stackoverflow.com/a/30423534/1248295)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T19:41:59.110

单击鼠标中键时显示的移动图标由您的鼠标设置控制。但是您可以检测到鼠标中键单击您的`WebBrowser`控件。

为您的控件注册`DocumentCompleted`事件`WebBrowser`并使用以下代码：

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    webBrowser1.Document.MouseDown += Document_MouseDown;
}

void Document_MouseDown(object sender, HtmlElementEventArgs e)
{
     if (e.MouseButtonsPressed == System.Windows.Forms.MouseButtons.Middle)
     {
        // code to add tab or do sth else
     }
} 
```

# c++ - sqlite 编译语句何时“执行”

> ID：12978133
> 
> 赞同：0
> 
> 时间：2012-10-19T16:02:39.100
> 
> 标签：c++, sql, sqlite

我正在为 SQLite API 编写一个轻量级的包装器。

基本上，我很好奇 SQLite 预编译语句如何/何时执行......

我去的时候：

```
char buffer[] = "INSERT INTO example VALUES (?1, ?2, ?3, ?4, ?5, ?6, ?7)";
sqlite3_stmt* stmt;
sqlite3_prepare_v2(mDb, buffer, strlen(buffer), &stmt, NULL);

for (unsigned i = 0; i < mVal; i++)
{
    std::string id = getID();
    sqlite3_bind_text(stmt, 1, id.c_str(), id.size(), SQLITE_STATIC);
    sqlite3_bind_double(stmt, 2, getDouble());
    sqlite3_bind_double(stmt, 3, getDouble());
    sqlite3_bind_double(stmt, 4, getDouble());
    sqlite3_bind_int(stmt, 5, getInt());
    sqlite3_bind_int(stmt, 6, getInt());
    sqlite3_bind_int(stmt, 7, getInt());

    if (sqlite3_step(stmt) != SQLITE_DONE)
    {
        printf("Commit Failed!\n");
    }

    sqlite3_reset(stmt);
}

sqlite3_finalize(stmt); 
```

实际的 sql 是在什么时候执行的？是在通话期间`sqlite3_prepare_v2`，还是在第一次通话期间`sqlite3_step`？

非常感谢任何清晰度:)

干杯

贾勒特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:16:45.880

根据[SQLite 文档`sqlite3_prepare`](http://www.sqlite.org/c3ref/prepare.html)，我们看到：

> 要执行 SQL 查询，必须首先使用以下例程之一将其编译为字节码程序：sqlite3_prepare、sqlite3_prepare_v2、sqlite3_prepare16、sqlite3_prepare16_v2。

对于[`sqlite3_step`](http://www.sqlite.org/c3ref/step.html)：

> 在使用 sqlite3_prepare_v2() 或 sqlite3_prepare16_v2() 或遗留接口 sqlite3_prepare() 或 sqlite3_prepare16() 之一准备好准备好的语句后，必须调用此函数一次或多次来评估该语句。

更多信息：

SQLite 有一个虚拟机，它执行所有必要的操作来在选定的数据库上执行你的代码。`sqlite3_prepare`（及其家族）将您的 SQL 语句编译成可以在该虚拟机上执行的字节码。另一方面，`sqlite3_step`在 VM 中执行该字节码。

# c++ - typedef 向量模板

> ID：12978137
> 
> 赞同：4
> 
> 时间：2012-10-19T16:03:02.797
> 
> 标签：c++, templates, vector, typedef

我正在尝试向我的类添加一些 typedef，但编译器在以下代码中报告了语法错误：

```
 template<class T>
    class MyClass{
        typedef std::vector<T> storageType; //this is fine
        typedef storageType::iterator iterator; //the error is here 
```

但下一个也不起作用：

```
 typedef std::vector<T>::iterator iterator; 
```

我在许多论坛上寻找答案，但我找不到解决方案或解决方法。感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T16:04:04.623

您缺少一个`typename`：

```
typedef typename std::vector<T>::iterator iterator; 
```

有很多类似的问题。例如，看看以下内容：

*   [C++ 模板类型名迭代器](https://stackoverflow.com/questions/11275444/c-template-typename-iterator)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T16:05:44.483

`std::vector<T>::iterator`是一个依赖类型，所以你需要在它之前添加 typename。

```
typedef typename std::vector<T>::iterator iterator;
        ^ 
```

# java - gson 和参考资料

> ID：12978140
> 
> 赞同：3
> 
> 时间：2012-10-19T16:03:08.747
> 
> 标签：java, android, gson

我在 Android 中有一个小应用程序，它必须通过套接字与服务器通信。问题是：我可以使用 Gson 来序列化对象的引用吗？

我举个例子：如果我有这样的 B 类：

```
public class B{
    int n;

    public B(int n){
        this.n=n;
    }

    public int getN() {
        return n;
    }

    public void setN(int n) {
        this.n = n;
    }

    public B() {
        super();
    }
} 
```

和这样的A类

```
public class A{
    B b1;
    B b2;
    B b3;

    public B getB1() {
        return b1;
    }

    public void setB1(B b1) {
        this.b1 = b1;
    }

    public B getB2() {
        return b2;
    }

    public void setB2(B b2) {
        this.b2 = b2;
    }

    public B getB3() {
        return b3;
    }

    public void setB3(B b3) {
        this.b3 = b3;
    }

    public A(B b1, B b2, B b3) {
        super();
        this.b1 = b1;
        this.b2 = b2;
        this.b3 = b3;
    }

    public A() {
        super();
    }
} 
```

比我打电话

```
B b1 = new B(1); B b2 = new B(2)
A a = new A(b1,b1,b2); 
```

如果我序列化（使用`(new Gson()).toJson(a,A.class)`我获得的对象

`{"b1":{"n":1},"b2":{"n":1},"b3":{"n":2}}`

但我希望有一些链接这个

`{istance1:{b1: {"b1":istance2,"b2":istance2,"b3":istance2},istance2: {"n":1},istance3:{"n":2}}`

你能帮助我吗？我读了很多页，但我没有找到任何东西！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T13:16:14.107

看看 GraphAdapterBuilder，它可以做到这一点。您需要将该文件复制到您的应用程序中，因为它不包含在 Gson 中。

```
Roshambo rock = new Roshambo("ROCK");
Roshambo scissors = new Roshambo("SCISSORS");
Roshambo paper = new Roshambo("PAPER");
rock.beats = scissors;
scissors.beats = paper;
paper.beats = rock;

GsonBuilder gsonBuilder = new GsonBuilder();
new GraphAdapterBuilder()
    .addType(Roshambo.class)
    .registerOn(gsonBuilder);
Gson gson = gsonBuilder.create();

assertEquals("{'0x1':{'name':'ROCK','beats':'0x2'}," +
    "'0x2':{'name':'SCISSORS','beats':'0x3'}," +
    "'0x3':{'name':'PAPER','beats':'0x1'}}",
    gson.toJson(rock).replace('\"', '\'')); 
```

[https://code.google.com/p/google-gson/source/browse/trunk/extras/src/main/java/com/google/gson/graph/GraphAdapterBuilder.java](https://code.google.com/p/google-gson/source/browse/trunk/extras/src/main/java/com/google/gson/graph/GraphAdapterBuilder.java)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T16:14:18.207

JSON 是为数据交换而设计的标准。这样，为了“标准化”通信，它需要遵循一些规则。

如果要使用 GSon 序列化数据，则无法更改其序列化方式。那是模式

如果您真的想以自己的方式生成序列化数据，我认为您还需要为其生成序列化器/反序列化器！

祝你好运

# android - 如果两种情况都可能，如何选择 Activity 或 Fragment？

> ID：12978141
> 
> 赞同：4
> 
> 时间：2012-10-19T16:03:08.447
> 
> 标签：android, android-layout, android-fragments, android-activity

在 Android 应用程序中，类似于应用程序市场，我有一个 Home 视图，另外两个视图包含列表。所有这三个列表都将转到产品列表，但参数不同。还有另一个视图显示产品详细信息视图。

在这种情况下，什么时候应该使用 Fragments，什么时候应该使用 Activities？以及如何确定？知道我在应该出现在整个系统中的工具栏中搜索文本框。

我现在可能拥有的选项是包含搜索工具箱的所有应用程序中的一项活动。此活动将有助于片段之间的导航。另一个选项是在一个活动中设置前 3 个视图，在另一个活动中设置产品列表，并在单独的一个中设置产品详细信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T18:52:48.520

最初创建片段的原因是允许在更大屏幕设备上进行模块化布局选项。经典示例是根据您的屏幕尺寸进行调整的双窗格布局。

![双窗格布局](../Images/d295773960c56c6324a8b042cc2bbbfc.png)

因此，您可能会问自己以确定片段是否适合您的问题类型是：

1.  我是否希望我的应用根据屏幕尺寸调整其外观？
2.  我可以利用更大屏幕的设备在同一屏幕上显示 2、3、4 个片段吗？
3.  我是否在我的所有活动中复制了相同的 UI 元素？

如果是，那么片段就是您要寻找的。如果没有，您可能可以使用活动。

碎片肯定是未来。在您的示例中，包含所有片段的基本活动可以包含搜索栏，并且可以处理附加新片段并充当在片段之间调度数据的中间人。

# spring - 如何用activemq和spring3做集成测试？

> ID：12978146
> 
> 赞同：1
> 
> 时间：2012-10-19T16:03:22.470
> 
> 标签：spring, testing, activemq, mockito

我有这样的代码，但我不确定如何测试我从项目中提取的这段代码。我正在使用 Spring3 和 ActiveMQ。我正在使用 spring 来执行远程 HTTPInvoker，这就是我拥有 GateWay 的原因。所以，当我调用我的方法`submit`时`Gateway`，它会通过 JMSDispatcher 发送一条 JMS 消息。`JmsTemplate`你将如何注入`Gateway`？据我所知，如果我想测试 JMS，我必须在 Spring 的 application-context.xml 中配置它并注入覆盖的 JmsTemplate。那么，我可以测试队列中的消息吗？但我不能注入`JmsTemplate`，`Gateway`因为 Mockito 会抱怨里面没有那个字段`Gateway`。

```
 public class Gateway {
    @Autowired
    private ProcessController processController;
    public void submit() {
         processControllerFactory.submit();
    }

}

public ProcessController {
    @Autowired
    private JMSDispatcher jmsDispatcher;
    public void submit() {
          // do something
          jmsDispatcher.send(message);
    }
}

public JMSDispatcher {
    @Autowired
    @Qualifier("someJmsTemplate")
    private JmsTemplate jmsTemplate;

    public void send(MessageCreator message) {
          jmsTemplate.send(message);
    }
} 

```

# python - TypeError：grsim 的参数无效 - Python

> ID：12978147
> 
> 赞同：0
> 
> 时间：2012-10-19T16:03:28.433
> 
> 标签：python, typeerror, gephi

我试图运行这段代码：

```
#!/usr/bin/env python
"""
The example presented at the MURI review, illustrating the use of
jtlvint and automaton modules

Nok Wongpiromsarn (nok@cds.caltech.edu)
August 3, 2010

minor refactoring by SCL <slivingston@caltech.edu>
1 May 2011.

Small modifications by Yuchen Lin.
12 Aug 2011
"""

#@import_section@
import sys, os
from subprocess import call

from tulip import *
import tulip.polytope as pc
#@import_section_end@

# Specify where the smv file, spc file and aut file will go
#@filename_section@
testfile = 'robot_discrete_simple'
path = os.path.abspath(os.path.dirname(sys.argv[0]))
smvfile = os.path.join(path, 'specs', testfile+'.smv')
spcfile = os.path.join(path, 'specs', testfile+'.spc')
autfile = os.path.join(path, 'specs', testfile+'.aut')
#@filename_section_end@

# Specify the environment variables
#@envvar_section@
env_vars = {'park' : 'boolean'}
#@envvar_section_end@

# Specify the discrete system variable
# Introduce a boolean variable X0reach to handle the spec [](park -> <>X0)
# X0reach starts with TRUE. 
# [](next(X0reach) = X0 | (X0reach & !park))
#@sysdiscvar_section@
sys_disc_vars = {'X0reach' : 'boolean'}
#@sysdiscvar_section_end@

# Specify the transition system representing the continuous dynamics
#@ts_section@
disc_dynamics = prop2part.PropPreservingPartition(list_region=[], list_prop_symbol=[])

# These following propositions specify in which cell the robot is,
# i.e., Xi means that the robot is in cell Ci
disc_dynamics.list_prop_symbol = ['X0', 'X1', 'X2', 'X3', 'X4', 'X5'] 
disc_dynamics.num_prop = len(disc_dynamics.list_prop_symbol)

# Regions. Note that the first argument of Region(poly, prop) should
# be a list of polytopes. But since we are not dealing with the actual
# controller, we will just fill it with a string (think of it as a
# name of the region).  The second argument of Region(poly, prop) is a
# list that specifies which propositions in cont_props above is
# satisfied. As specified below, regioni satisfies proposition Xi.
region0 = pc.Region('C0', [1, 0, 0, 0, 0, 0])
region1 = pc.Region('C1', [0, 1, 0, 0, 0, 0])
region2 = pc.Region('C2', [0, 0, 1, 0, 0, 0])
region3 = pc.Region('C3', [0, 0, 0, 1, 0, 0])
region4 = pc.Region('C4', [0, 0, 0, 0, 1, 0])
region5 = pc.Region('C5', [0, 0, 0, 0, 0, 1])
disc_dynamics.list_region = [region0, region1, region2, region3, region4, region5]
disc_dynamics.num_regions = len(disc_dynamics.list_region)

# The transition relation between regions. disc_dynamics.trans[i][j] =
# 1 if starting from region j, the robot can move to region i while
# only staying in the union of region i and region j.
disc_dynamics.trans =   [[1, 1, 0, 1, 0, 0], \
                         [1, 1, 1, 0, 1, 0], \
                         [0, 1, 1, 0, 0, 1], \
                         [1, 0, 0, 1, 1, 0], \
                         [0, 1, 0, 1, 1, 1], \
                         [0, 0, 1, 0, 1, 1]]
#@ts_section_end@

#@specification@
assumption = 'X0reach & []<>(!park)'
guarantee = '[]<>X5 & []<>(X0reach)'
guarantee += ' & [](next(X0reach) = (X0 | (X0reach & !park)))'
#@specification_end@

# Generate input to JTLV
#@geninput@
prob = jtlvint.generateJTLVInput(env_vars, sys_disc_vars, [assumption, guarantee],
                                 {}, disc_dynamics, smvfile, spcfile, verbose=2)
#@geninput_end@

# Check realizability
#@check@
realizability = jtlvint.checkRealizability(smv_file=smvfile, spc_file=spcfile,
                                           aut_file=autfile, verbose=3)
#@check_end@

# Compute an automaton
#@compaut@
jtlvint.computeStrategy(smv_file=smvfile, spc_file=spcfile, aut_file=autfile,
                        priority_kind=3, verbose=3)
aut = automaton.Automaton(autfile, [], 3)

# Remove dead-end states from automaton.
aut.trimDeadStates()
#@compaut_end@

# Visualize automaton with DOT file

# This example uses environment vs. system turn distinction.  To
# disable it, just use (the default),
if not aut.writeDotFile(fname="rdsimple_example.dot", hideZeros=True):
# if not aut.writeDotFile("rdsimple_example.dot",
#                         distinguishTurns={"env": prob.getEnvVars().keys(),
#                                           "sys": prob.getSysVars().keys()},
#                         turnOrder=("env", "sys")):
# if not aut.writeDotFileEdged(fname="rdsimple_example.dot",
#                              env_vars = prob.getEnvVars().keys(),
#                              sys_vars = prob.getSysVars().keys(),
#                              hideZeros=True):
    print "Error occurred while generating DOT file."
else:
    try:
        call("dot rdsimple_example.dot -Tpng -o rdsimple_example.png".split())
    except:
        print "Failed to create image from DOT file. To do so, try\n\ndot rdsimple_example.dot -Tpng -o rdsimple_example.png\n"

# Simulate.
#@sim@
num_it = 30
env_states = [{'X0reach': True}]
for i in range(1, num_it):
    if (i%3 == 0):
        env_states.append({'park':True})
    else:
        env_states.append({'park':False})

graph_vis = raw_input
destfile = 'rdsimple_example.gexf'
label_vars = ['park', 'cellID', 'X0reach']
delay = 2
vis_depth = 3
aut_states = grsim.grsim([aut], aut_trans_dict={}, env_states=env_states,
                         num_it=num_it, deterministic_env=False,
                         graph_vis=graph_vis, destfile=destfile,
                         label_vars=label_vars, delay=delay,
                         vis_depth=vis_depth)
#@sim_end@ 
```

然而，就在它结束之前，它在#simulate 处失败，它说：

```
Traceback (most recent call last):
  File "/Applications/Python 2.7/tulip-0.3c/examples/robot_discrete_simple.py", line 151, in <module>
    vis_depth=vis_depth)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/tulip/grsim.py", line 109, in grsim
    raise TypeError("Invalid arguments to grsim")
TypeError: Invalid arguments to grsim 
```

不确定此信息是否有帮助，但 DOT 文件也无法创建..

```
Failed to create image from DOT file. To do so, try

dot rdsimple_example.dot -Tpng -o rdsimple_example.png 
```

为什么给我一个 TypeError 问题？我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:08:55.450

以下代码`grsim`引发异常：

```
if not (isinstance(aut_list, list) and len(aut_list) > 0 and
        isinstance(aut_trans_dict, dict) and
        isinstance(env_states, list) and len(env_states) > 0 and
        isinstance(num_it, int) and isinstance(deterministic_env, bool) and
        isinstance(graph_vis, bool) and isinstance(destfile, str) and
        (label_vars == None or isinstance(label_vars, list)) and
        isinstance(delay, int) and isinstance(vis_depth, int)):
    raise TypeError("Invalid arguments to grsim") 
```

您的`graph_vis`变量不是布尔值，而是[`raw_input`函数](http://docs.python.org/library/functions.html#raw_input)：

```
graph_vis = raw_input 
```

你甚至不调用它。

[`documentation`](http://tulip-control.sourceforge.net/doc/simulation.html#module-grsim)也要求一个布尔值：

> `grsim.grsim(aut_list, aut_trans_dict={}, env_states=[{}], num_it=20, deterministic_env=True, graph_vis=False, destfile='sim_graph.gexf', label_vars=None, delay=2, vis_depth=3)`
> 
> [...]
> 
> *   graph_vis – 指定是否在 Gephi 中可视化模拟。

# internet-explorer - IE 64 位浏览器上的 GWT JavaScript 错误

> ID：12978151
> 
> 赞同：1
> 
> 时间：2012-10-19T16:03:41.240
> 
> 标签：internet-explorer, gwt

所以我在这里有点奇怪。

我有一个运行 GWT 2.4 的（巨大的）遗留应用程序。在我的一个自定义小部件中`FlowPanel`，我在构造函数中调用以下内容：

```
super();
DOM.setElementProperty(getElement(), "style", ""); 
```

不言自明。我删除了 GWT 在初始化 FlowPanel 时可能应用或未应用的任何默认内联样式。这些是构造函数中的前两行。构造函数的其余部分应用一个 ID，然后添加一些标签和输入元素。没有什么过于花哨的。

好消息是它适用于 IE9、Chrome、Firefox。它在 32 位版本的 IE8 中也能正常工作。它在 64 位版本的 IE8 中不起作用，并且在调试模式下会出现以下错误：

```
com.google.gwt.core.client.JavaScriptException: (Error): Not implemented 
    at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:248)
    at com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561)
    at com.google.gwt.dev.shell.ModuleSpace.invokeNativeVoid(ModuleSpace.java:289)
    at com.google.gwt.dev.shell.JavaScriptHost.invokeNativeVoid(JavaScriptHost.java:107)
    at com.google.gwt.dom.client.Element$.setPropertyString$(Element.java)
    at com.google.gwt.user.client.DOM.setElementProperty(DOM.java:1127) 
```

...下一行表示`setElementProperty`我上面指出的行。

有人告诉我，它在 32 位 IE 6 中也可以正常工作，尽管 64 位版本也因同样的结果而窒息而死。

所以。**为什么这段代码不能在这些浏览器的 64 位版本中运行？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:10:29.083

您所做的基本上是在 JS:`elt.style = ''`中。您应该这样做`elt.style.cssText = ''`，您可以在 GWT 中使用`DOM.setStyleAttribute(getElement(), "cssText", "")`(old style) 或`getElement().getStyle().setProperty("cssText", "")`or `getElement().getStyle().clearProperty("cssText")`(new style) 执行此操作。

# html - 表格内 Internet Explorer 8/9 中的垂直文本

> ID：12978156
> 
> 赞同：3
> 
> 时间：2012-10-19T16:04:00.680
> 
> 标签：html, css, internet-explorer, less

在用户“bookcasey”的帮助下，我做了一个垂直方向的标题标签的表格。

![在此处输入图像描述](../Images/9c148012af6eeb3b24c4437c083a49a9.png)

它适用于以下浏览器（Firefox、Google chrome、safari），除了 Internet Explorer 8/9。

使用 IE 8/9 它可以工作，但列的宽度太大。任何提示如何调整列的宽度？

* * *

代码是这个链接： [http ://codepen.io/anon/pen/DjFcE](http://codepen.io/anon/pen/DjFcE)

问题与[标题栏中标签的垂直文本有关](https://stackoverflow.com/questions/12963748/vertically-text-for-the-label-in-the-header-column/12963886#comment17578096_12963886)

# c# - 将指向类的指针从 C# 传递到非托管 C++ 代码中

> ID：12978160
> 
> 赞同：5
> 
> 时间：2012-10-19T16:04:07.213
> 
> 标签：c#, c++, marshalling, unmanaged

我在 dll 中有一个 c++ 导出函数：

```
int MyMethod(ulong pid, MyStruct* struct); 
```

MyStruct 被描述为类：

```
class MyStruct
{
public:
uchar   nVersion;
uchar   nModuleType;
uchar   nMachine64;
uchar   nReserved;
ulong  data1;
ulong  data2;
ulong  data3;
}; 
```

我正在尝试将此函数导入到我的 C# 代码中，如下所示：

```
[DllImport("mydll.dll", EntryPoint = "#24")]
private static extern int _MyMethod(long pid, ref MyStruct struct); 
```

C# 中的类：

```
[System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential)]
stuct MyStruct
{
    public byte nVersion;
    public byte nModuleType;
    public byte nMachine64;
    public byte nReserved;
    public ulong data1;
    public ulong data2;
    public ulong data3;
} 
```

我得到`System.AccessViolationException`：

```
MyStruct struct = new MyStruct();
_MyMethod(4728, ref struct); 
```

怎么了？

更新： `System.Runtime.InteropServices.Marshal.SizeOf(struct)`返回 32。为什么？我认为应该是 4 * 1 + 8 * 3 = 28

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:09:47.203

在 C# 中，我们有`class`es 和`struct`s。所有`class`类型都是引用，但`struct`类型是值类型。这意味着当你有类似的东西`class MyStruct`并且你写`MyStruct s`它实际上就像一个指向基类的指针时，当你通过引用传递它时，你实际上传递了那个指针的地址，所以它与 C++ 没有任何关系，它期望一个指向 main 的指针`struct`. 根据这个解决你的问题是转换`class`为`struct`.

`long`并且`ulong`在 C# 中是 64 位类型，而在 C++ 中它们是 32 位（至少是 MSVC），因此当您声明函数时，它的第一个参数是`long`您发送额外的 32 位值，该值可能会覆盖下一个参数并导致它无效：

```
Stack:
    32 bit: [first 32 bit of the first parameter]
    32 bit: [second 32 bit of the first parameter]
    32 bit: [address of your structure] 
```

因此，当调用函数时，它将采用无效参数作为结构的地址。所以只需将您的函数定义更改为：

```
[DllImport("mydll.dll", EntryPoint = "#24")]
private static extern int _MyMethod(int pid, ref MyStruct struct); 
```

一个你的结构：

```
[System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential)]
stuct MyStruct
{
    public byte nVersion;
    public byte nModuleType;
    public byte nMachine64;
    public byte nReserved;
    public uint data1;
    public uint data2;
    public uint data3;
} 
```

可能是您的错误来源在函数的第一个参数中，因为函数需要一个 32 位的值，而您提供了一个 64 位的值，而实际上您为导致该函数的函数提供了 2、32 位的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T18:46:13.547

由于 ulong 的对齐要求，SizeOf() 返回 32，ulong 是一个 8 字节的值类型。StructLayoutAttribute.Pack 的默认值为 8，与本机代码中使用的默认打包相同。因此 data1 与偏移量 8 对齐，并且 nReserved 和 data1 之间有 4 个字节的间隙。所以 4 x 1 + 4 + 3 x 8 = 32。

您可能有这个差距，因为在使用 MSVC 编译器编译的本机 C++ 代码中，一个 ulong 是 4 个字节。与 C# 中的 uint 相同。所以修复结构声明，将ulong替换为uint。

下一个问题，即 AV 的原因，是您在 C# 中将结构声明为类。这是一个总是通过引用传递的引用类型。您当前的声明等同于 C++ 代码中的 MyStruct**。删除声明中的*ref*或将其声明为结构而不是类。

# c# - 从电子邮件 C# 获取收件人列表

> ID：12978161
> 
> 赞同：2
> 
> 时间：2012-10-19T16:04:07.823
> 
> 标签：c#, dynamics-crm-2011

我正在创建一个插件，我想检查电子邮件的收件人是否属于某种类型。我发现“收件人”是一种`ActivityParty`类型，我似乎无法从列表中获取各个收件人。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T18:01:50.547

实际上 'To' 是 ActivityParty 实体的列表。每个 ActivitParty 对象都包含 PartyId 属性，即 EntityReference。因此，如果您想查找电子邮件接收者（或多个接收者）的实体类型，请尝试使用下一个代码：

```
Email email;
...
IEnumerable<ActivityParty> emailRecievers = email.To;
foreach (ActivityParty ap in emailRecievers)
{
    string entityTypeName = ap.PartyId.LogicalName;
    if (entityTypeName == "contact")
    {
        // do something...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T10:42:33.693

我使用下面的代码管理这个：

```
EntityCollection Recipients = email.GetAttributeValue<EntityCollection>("to");

foreach (var party in Recipients.Entities)
{  
var partyName = party.GetAttributeValue<EntityReference>("partyid").Name;
var partyId = party.GetAttributeValue<EntityReference>("partyid").Id;

…
} 
```

# c# - 实体 - 模式映射和命名空间

> ID：12978163
> 
> 赞同：1
> 
> 时间：2012-10-19T16:04:21.783
> 
> 标签：c#, entity-framework, entity-framework-5

在我的 DAL 项目中添加了数据库和实体模型。

## 有一个错误：

**错误 ：**

```
 +      base    {"Schema specified is not valid. Errors: \r\nMultiple types with the name 'TblRecord' exist in the EdmItemCollection in different namespaces.  Convention based mapping requires unique names without regard to namespace in the EdmItemCollection."}   System.Data.EntityException {System.Data.MetadataException} 
```

* * *

**Edmx 文件**

```
<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="3.0" xmlns:edmx="http://schemas.microsoft.com/ado/2009/11/edmx">
  <!-- EF Runtime content -->
  <edmx:Runtime>
    <!-- SSDL content -->
    <edmx:StorageModels>
      <Schema Namespace="Xz.Business.Matches.Store" Alias="Self" Provider="System.Data.SqlServerCe.4.0" ProviderManifestToken="4.0" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns="http://schemas.microsoft.com/ado/2009/11/edm/ssdl">
        <EntityContainer Name="XzBusinessMatchesStoreContainer">
          <EntitySet Name="Records" EntityType="Xz.Business.Matches.Store.Records" store:Type="Tables" />
        </EntityContainer>
        <EntityType Name="Records">
          <Key>
            <PropertyRef Name="Record" />
          </Key>
          <Property Name="Record" Type="nvarchar" Nullable="false" MaxLength="100" />
          <Property Name="Relations" Type="nvarchar" MaxLength="450" />
        </EntityType>
      </Schema>
    </edmx:StorageModels>
    <!-- CSDL content -->
    <edmx:ConceptualModels>
      <Schema Namespace="Xz.Business.Matches" Alias="Self" p1:UseStrongSpatialTypes="false" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns:p1="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns="http://schemas.microsoft.com/ado/2009/11/edm">
        <EntityContainer Name="RecordzEntities" p1:LazyLoadingEnabled="true">
          <EntitySet Name="Records" EntityType="Xz.Business.Matches.TblRecord" />
        </EntityContainer>
        <EntityType Name="TblRecord">
          <Key>
            <PropertyRef Name="Record" />
          </Key>
          <Property Name="Record" Type="String" Nullable="false" MaxLength="100" Unicode="true" FixedLength="false" />
          <Property Name="Relations" Type="String" MaxLength="450" Unicode="true" FixedLength="false" />
        </EntityType>
      </Schema>
    </edmx:ConceptualModels>
    <!-- C-S mapping content -->
    <edmx:Mappings>
      <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2009/11/mapping/cs">
        <EntityContainerMapping StorageEntityContainer="XzBusinessMatchesStoreContainer" CdmEntityContainer="RecordzEntities">
          <EntitySetMapping Name="Records">
            <EntityTypeMapping TypeName="Xz.Business.Matches.TblRecord">
              <MappingFragment StoreEntitySet="Records">
                <ScalarProperty Name="Record" ColumnName="Record" />
                <ScalarProperty Name="Relations" ColumnName="Relations" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
        </EntityContainerMapping>
      </Mapping>
    </edmx:Mappings>
  </edmx:Runtime>
  <!-- EF Designer content (DO NOT EDIT MANUALLY BELOW HERE) -->
  <Designer xmlns="http://schemas.microsoft.com/ado/2009/11/edmx">
    <Connection>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="MetadataArtifactProcessing" Value="EmbedInOutputAssembly" />
      </DesignerInfoPropertySet>
    </Connection>
    <Options>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="ValidateOnBuild" Value="true" />
        <DesignerProperty Name="EnablePluralization" Value="True" />
        <DesignerProperty Name="IncludeForeignKeysInModel" Value="True" />
        <DesignerProperty Name="CodeGenerationStrategy" Value="None" />
      </DesignerInfoPropertySet>
    </Options>
    <!-- Diagram content (shape and connector positions) -->
    <Diagrams></Diagrams>
  </Designer>
</edmx:Edmx> 
```

* * *

**名称和命名空间：**

项目名称：Business.Matches 默认命名空间：Xz.Business.Matches

我添加了一个具有以下定义的实体模型：

型号：RecordzModel

上下文：RecordzContext

模型命名空间：Xz.Business.Matches

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T19:16:07.247

您的项目中似乎有不止一门名为“TblRecord”的课程。将您的类型与 POCO 类型的 EDM 类型匹配时，名称空间将被忽略，因此如果您有多个具有相同名称的类，则它会模棱两可并导致异常。

# node.js - Node.js+Socket.io+MongoDB webapps 是如何真正异步的？

> ID：12978168
> 
> 赞同：22
> 
> 时间：2012-10-19T16:04:44.000
> 
> 标签：node.js, sockets, nonblocking, near-real-time

我有一个很好的老式 LAMP webapp。一周前，我需要为其添加一个推送通知机制。
因此，我所做的是在服务器上添加 node.js+socket.io 并使用 node.js 每 10 秒轮询 MySQL 数据库以检查是否有新项目：如果有，我会将它们发送到客户端（ s) 使用 socket.io。
我对结果非常满意，即使这不是一个适当的实时通知（因为最多有 10 秒的延迟）。

现在，我即将构建一个新的 web 应用程序，它也需要推送通知。我想知道是采用与第一种方法相同的方法（我相信它更稳定和成熟）还是完全采用 Node.js，而不使用 PHP 和 Apache。至于数据库，我已经决定去MongoDB了。

最后，我的问题是：如果我选择 Node.js+Socket.io+MongoDB，我会得到一个**真正** [接近实时的](http://en.wikipedia.org/wiki/Near_real-time)webapp 吗？我的意思是，一旦将新记录插入 MongoDB，是否会触发某种事件，我可以通过 node.js 捕获，对其进行检查，如果相关，将通知发送给客户端？还是会像我的第一个 LAMP webapp 一样，在 db 服务器端和延迟上进行某种轮询？

一个相关的问题：你能在 MySQL 上构建一个实时 webapp，而不像我第一个应用程序那样做任何轮询吗？还是您需要 MongoDB（或 Redis）？

我希望这个问题不会太傻 - 抱歉，我只是从 Node.js 和 co 开始。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-21T19:17:46.357

我理解你的问题，因为我也从php **/apache/mysql切换到****node.js。**

 ***   一般 node.js 是稳定的，模块和你的脚本是错误的主要原因

*   实时与数据库无关，它是关于客户端和服务器的，您可以在请求中查询任意数量的数据并将其推送到另一个客户端。

*   选择 node.js 是非常明智的，但它更难实现。

*   当您将新记录插入数据库时​​，事件就是请求本身，您将与数据库查询一起进行推送事件，例如：

    ```
    // Please note this is not real code, just an example of the idea
    app.get('/query', function(request, response){
        // Query your database
        db.query('SELECT * FROM users', function(rows){

             // Push notification to dan
             socket.emit('database_query_executed', 'to_dan', rows); 

             // End request
             response.end('success'); 

        })   
    }) 
    ```

*   当然你可以使用MySQL！正如我所说，您想要的任何数据库都与数据库无关，因为数据库处于流程的中间，并且完全是可选的。

*   如果您想使用**node.js**进行**推送通知**，使用**php/apache**进行**mysql**，那么您需要为每个服务器创建 2 个请求，例如：

    ```
    // this is javascript
    ajax('http://node.yoursite.com/push', node_options)
    ajax('http://php.yoursite.com/mysql_query', php_options) 
    ```

    或者如果你只想要一个请求，或者你想使用一个表单，你可以调用你的**php**，在 php 中你可以从 php 创建一个**对 node.js 的 http 或 net 请求**，比如：

    ```
    // this is php
    new HttpRequest('http://node.youtsite.com/push', HttpRequest::METH_GET); 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-25T21:52:03.707

使用：

*   一个常规的 MongoDB Collection 作为**Store**，
*   以可尾游标为**队列**[的 MongoDB Capped 集合](http://www.mongodb.org/display/DOCS/Tailable+Cursors)，
*   具有 Socket.IO 的 Node 工作人员将 Queue 作为**Worker**观察，
*   一个节点服务器，用 Socket.IO 客户端为页面提供服务，并作为服务器接收 POST 数据（或者其他数据被添加**）**

它是这样的：

1.  新数据被发送到服务器，
2.  Server 将数据放入 Store，
3.  服务器将数据的 ObjectID 添加到队列中，
4.  Queue 会将新到达的 ObjectID 发送到 Worker 上打开的 Tailable Cursor，
5.  Worker 去从 Store 中获取 ObjectID 中的实际数据，
6.  Worker 通过套接字发出数据，
7.  客户端从套接字接收数据。

这是从最初添加数据一直到客户端接收的“推送” - 没有轮询，因此您可以获得实时的每一步处理时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T19:22:39.413

回复：MongoDB 中的触发器 - 请参阅此答案：[https ://stackoverflow.com/a/12405093/1651408](https://stackoverflow.com/a/12405093/1651408)

MySQL 中有更方便的触发器，但是从它们调用 Node.js 需要一些使用 MySQL UDF（[用户定义函数](http://dev.mysql.com/doc/refman/5.5/en/adding-functions.html)）的工作，例如通过 Unix 套接字推送数据。请注意，仅当其他应用程序（除了您的 Node.js 进程）正在更新数据库时才需要这样做，并且在这种情况下确保选择 InnoDB 作为存储（行级与表级锁定）。

可以看出您的技术选择没有什么大问题`sockets.io`，即使[不支持客户端 Web 套接字](https://stackoverflow.com/questions/1252829/what-browsers-support-html-5-websocket)，您也会（我希望优雅地）退回到轮询。

最后，你的问题一点也不傻，因为推送技术绝对优于大量的轮询请求——它的扩展性更好。编辑：但是，不会将这两种技术描述为**实时的**。

另一个编辑：对于这种非常知名且成功的设置，请阅读：[http ://blog.fogcreek.com/the-trello-tech-stack/](http://blog.fogcreek.com/the-trello-tech-stack/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-27T03:54:43.330

你发现[Chole](https://github.com/mashion/chloe)了吗？它与您的 Web 服务器分开工作，并通过使用 HTTP POST 与其交互。这样，您就可以按照您想要的任何方式编写您的网络应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T01:28:49.437

实际上使用像**Socket.IO**这样的推送技术可以帮助您使用

有效地利用服务器的资源，还可以帮助您将旧浏览器利用到现代浏览器进行 websocket 或类似 websocket 的连接。

****10 秒轮询是一个昂贵****的 HTTP 请求**，尤其是当有很多用户在场时。**

 **与轮询技术不同，**推送技术相对便宜。**用户的客户端正在打开一个专用的套接字（即 websocket）来监听服务器的推送通知。

通常，您的客户端 JavaScript 在收到推送通知时会执行一些操作。

使用**具有不同端口（80 除外）的 LAMP 堆栈和 Socket.IO 将足以**满足您的需求。

但是使用 Node.js + MongoDB + Socket.IO 实际上可以帮助您更有效地管理服务器资源。

因为这三个具有非阻塞性质。

如果您正确理解非阻塞概念并正确实施您的应用程序，

您相同的应用程序，具有相同功能但具有不同语言和不同数据库的应用程序，将能够处理比一般 LAMP 堆栈更多的请求。

* * *

![在此处输入图像描述](../Images/b7d283349c16f0c3dec4397e66f8c21a.png)

**上图是比较 Non-blocking 与 Thread 方式处理并发的著名图表**

**Apache（线程）与 Nginx（非阻塞）**

* * *

MySQL 是一个很棒的数据库。我相信你不需要`join`实时`transactions`通知。

除非您自己实现类似的功能，否则 MongoDB 没有这两个功能。

由于没有这两个特性以及它自己的一些特性，MongoDB 可以比传统的 SQL 数据库更快地存储和获取数据。

从 MySQL 切换到 MongoDB 将减少插入和获取数据的时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T16:12:11.847

使用 JS 你可以打开一个到你的服务器的套接字（不是旧的浏览器），服务器将有一个 ah-hoc 程序（在一个 ad-hoc 端口上，所以你需要打开门并在你的服务器上运行程序的权限），它将从客户端发送数据（几乎）实时，并且没有 HTTP 的协议开销。旧浏览器将回退到轮询机制。

我看不到其他方法可以做到这一点（可能已经有“coocked”框架可以做到这一点）****

# javascript - RangeError：使用NodeJS读取大量文本文件时长度> kMaxLength

> ID：12978169
> 
> 赞同：1
> 
> 时间：2012-10-19T16:04:53.877
> 
> 标签：javascript, node.js

我有一个巨大的（~1.5 gig）文本文件可以用'fs'读取，它给了我这个错误：

```
RangeError
RangeError: length > kMaxLength
    at new Buffer (buffer.js:242:21)
    at fs.js:130:16
    at Object.oncomplete (fs.js:297:15) 
```

这是我的代码的一部分：

```
var fs = require('fs');
fs.readFile('file.txt', 'ASCII', function (err, data) {
  console.log(data)
}); 
```

即使我使用此命令，它也会让我返回错误： node --max-old-space-size=8000 file.js 欢迎任何建议:) 谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:20:59.130

即使对于 64 位安装，您也不能将内存限制增加到超过 ~1.7GB（32 位 ~1GB）。请参阅[常见问题解答](https://github.com/joyent/node/wiki/FAQ)。所以你不能设置`--max-old-space-size`超过这个限制。

您可以改为使用文件的[流式读取](http://nodejs.org/api/fs.html#fs_fs_createreadstream_path_options)接口吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T00:33:30.743

正如 JohnnyHK 所提到的，[使用流](http://nodejs.org/api/stream.html)是正确的解决方案。使用[fs.createReadStream](http://nodejs.org/api/fs.html#fs_fs_createreadstream_path_options)从文件系统创建流：

```
fs.createReadStream('file.txt', {encoding: 'ASCII'}).pipe(process.stdout) 
```

# iphone - iOS5 中的表单（文件被遮盖，小键盘下一个/完成）

> ID：12978171
> 
> 赞同：0
> 
> 时间：2012-10-19T16:05:04.513
> 
> 标签：iphone, ios, keyboard

我正在 iOS 5 中设计一个表单，其中显示了以下字段。

1.  用户 ID - 数字键盘
2.  引脚号 - 数字键盘
3.  密码 - 支持 ASCII
4.  确认密码 - 支持 ASCII

我有很多问题。

1.  当键盘在屏幕上时，底部显示的字段会被键盘遮挡。我如何向他们展示？

2.  Numpad 键盘类型没有下一步/完成按钮实现。[在此链接](https://stackoverflow.com/questions/1347779/how-to-navigate-through-textfields-next-done-buttons)上的SO 中讨论的自定义实现存在问题，我也有 ASCII 键盘，它在底部显示下一个按钮。并且在以横向模式显示时，表格没有空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:19:01.070

这有两个部分。

1.  当键盘出现时保持控件在视图中。
2.  在任何键盘上都有上一个/下一个/完成按钮。

对于第一部分，您想使用滚动视图。请参阅：[移动位于键盘下方的内容](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)。

对于第二部分，您要设置输入附件视图。请参阅：[输入视图和输入附件视图](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/InputViews/InputViews.html#//apple_ref/doc/uid/TP40009542-CH12-SW2)。

希望有帮助。

# java - 从我的 Fraction 类调用 reduce 方法并应用于我的 FractionMath

> ID：12978172
> 
> 赞同：-1
> 
> 时间：2012-10-19T16:05:04.063
> 
> 标签：java

所以这是我的分数课。数学有效，但我想减少分数。注意：这是在 Eclipse SDK Juno 中。

```
public class Fraction {
private int n, d;
public Fraction(int num, int denum){
    n = num;
    d = denum;
}

public int getNumerator(){
return n;
}
public void setNumerator(int num){
    n = num;
}
public int getDenumerator(){
    return d;
}
public void setDenumerator(int denum){
    d = denum;
}
**public void reduce(){
    int gcf = 1, smaller;
    if (n < d){
        smaller = n;
    }
    else{
        smaller = d;
    }
    for (int i = 1;i <= smaller; i++){
        if(n % i == 0 && d % i ==0){
            gcf = i;
        }
    }
    n = n/gcf;
    d = d/gcf;
    System.out.print(n + "/" + d);
}**
} 
```

粗体字是我在 FractionMath 中输出的内容，如下所示。我不知道如何在这个类中应用 reduce 方法。我尝试了 method.Fraction() 但这给了我一个错误......帮助？

```
import java.util.*;

public class FractionMath {
public static void main(String[] args){
    Fraction f1, f2;
    Fraction ans = new Fraction(0,0);
    Scanner sc = new Scanner(System.in);
    System.out.print("Enter the numerator; then denumerator:\n");
    f1 = new Fraction(sc.nextInt(), sc.nextInt());
    System.out.print("Enter another numerator; and denumerator:\n");
    f2 = new Fraction(sc.nextInt(), sc.nextInt());
    System.out.print("Add (1)\nSubtract (2)\nMultiply (3)\nDivide (4)\n");
    int choice = sc.nextInt();
    if (choice == 1){
         if (f1.getDenumerator() == f2.getDenumerator()){
             ans.setNumerator(f1.getNumerator() + f2.getNumerator());
             ans.setDenumerator(f1.getDenumerator());
         }
         else{
             ans.setNumerator(f1.getNumerator() * f2.getDenumerator() + f2.getNumerator() * f1.getDenumerator());
             ans.setDenumerator(f1.getDenumerator() * f2.getDenumerator());
         }
    }
    else if (choice == 2){
        if (f1.getDenumerator() == f2.getDenumerator()){
             ans.setNumerator(f1.getNumerator() - f2.getNumerator());
             ans.setDenumerator(f1.getDenumerator());
         }
         else{
             ans.setNumerator(f1.getNumerator() * f2.getDenumerator() - f2.getNumerator() * f1.getDenumerator());
             ans.setDenumerator(f1.getDenumerator() * f2.getDenumerator());
         }
    }
    else if (choice == 3){
        ans.setNumerator(f1.getNumerator() * f2.getNumerator());
        ans.setDenumerator(f1.getDenumerator() * f2.getDenumerator());
    }
    else if (choice == 4){
        ans.setNumerator(f1.getNumerator() * f2.getDenumerator());
        ans.setDenumerator(f1.getDenumerator() * f2.getNumerator());
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:09:05.027

网上有很多解决方案。也许试试[这个](http://www.speakeasy.org/~shilad/jazz/src/util/Fraction.html)

# macos - 实时面部识别 - Mac

> ID：12978175
> 
> 赞同：1
> 
> 时间：2012-10-19T16:05:12.533
> 
> 标签：macos, processing, face-recognition

我正在做一个大学项目，我正在尝试寻找适用于 mac 的面部识别软件或 SDK，但我没有运气让任何东西正常工作。

我玩过**JavaFaces**，但这似乎不是实时网络摄像头链接，它似乎只是针对您提供的图像搜索预定义图像的数据库。它有效，但我想要一个网络摄像头实时识别。

我也尝试过**OpenCV**，但它似乎只检测 Proce55ing 中的人脸，而不检查任何预定义的图像。**OpenCV 2.4.2**我什至无法开始工作/打开，虽然文档听起来它有一个非常棒的 FR，但我什至不知道它是否适用于 Mac。

我是一个业余编码员，所以我真的不知道所有这些导入库是如何工作的，以及哪些不起作用。

我正在尝试做的是设置我的网络摄像头/DV cam，以及一个构建/软件来查看提要并扫描它检测到的面孔，然后使用已经保存到计算机的预定义面孔运行该面孔。

有人可以给我建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:01:46.260

您可能想看看 Daniel Shiffman 的博客文章[OpenCV Matching Faces Over Time](http://shiffman.net/general/2011/04/26/opencv-matching-faces-over-time/)，这是一个很好的起点。在帖子的最后，他提供了在 Processing 中下载的完整源代码。

# azure - 在 Azure 云服务上发布 TFS 预览版时构建的无限队列

> ID：12978180
> 
> 赞同：0
> 
> 时间：2012-10-19T16:05:34.650
> 
> 标签：azure, build, tfs, azure-web-roles

我为 CI 部署创建了云服务并链接了 TFS 预览项目。我选择了手动模式来触发构建。先前排队的构建已成功完成并部署。基于此云服务的网站运行良好。在队列中等待不超过 3-5 秒。

现在，当我单击 - “队列新构建”时 - 新构建项目已在队列中创建，但它永远不会运行。

我可以从 VS2012 成功地将项目发布到 Azure 云服务。

最常见的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:59:39.750

请参阅[http://tfs.visualstudio.com/en-us/support/current-service-status/](http://tfs.visualstudio.com/en-us/support/current-service-status/)

托管版本目前存在一些问题

# jquery - 访问隐藏的 GUID Infragistics igGrid

> ID：12978181
> 
> 赞同：2
> 
> 时间：2012-10-19T16:05:39.257
> 
> 标签：jquery, infragistics, ignite-ui, iggrid

我目前正在使用 Infragistics Grid 进行与此示例类似的内联编辑：http: [//www.infragistics.com/community/blogs/mihail_mateev/archive/2011/09/25/using-crud-operations-with-jquery -iggrid-entity-framework-and-and-asp-net-mvc3.aspx](http://www.infragistics.com/community/blogs/mihail_mateev/archive/2011/09/25/using-crud-operations-with-jquery-iggrid-entity-framework-and-and-asp-net-mvc3.aspx)。

我遇到了一个问题，即网格上的大多数数据都使用 GUID 键保存，因为正在引用多个现有数据库。问题是，虽然我可以为这些 GUID 创建一个隐藏列，将它们推送到 UI，但当从 Infragistics 访问该行时，所有隐藏数据都被丢弃（空 GUID 最终出现在 JSON 中）。

我已经尝试通过 Infragistics 隐藏这些列，也可以通过 jquery 简单地隐藏它们，但是 Infragistics 访问数据的方式似乎丢弃了任何设置 display:none 的内容。

有没有办法在不显示它们的情况下引用键？我已经在网格中使用了 comboFor 编辑器，但是当网格从更改中更新时，仍然无法不公开 valuekey。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T23:59:44.137

几周前在基础设施论坛上讨论了这个话题（对不起，我找不到它的链接）。

问题是隐藏列未包含在为网格的 CRUD 操作创建的事务中，因此在对事务进行反序列化后，这些隐藏列在服务器上的值为 NULL。请注意，这是行添加/更新的问题 - 在单元格编辑模式下不会发生。

开发团队已经准备了一个修复程序，该修复程序将与即将发布的 Service Relase 一起提供。

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T17:09:06.660

有时对 IG 感到非常沮丧。但是，您有几个选择。如果您只关心您可以看到的列...即，您隐藏了一些列但您不需要访问它们，那么您可以在`editRowEnd`or`editRowEnding`事件触发时访问 ui 对象。否则，您需要使用底层`dataSource`的`dataView`. 这是它的外观，包括网格：

```
 grid = $("#grid").igGrid({
   height: 400,
   width: null,     //if null, the grid should stretch to fit
   virtualization: false,
   autoGenerateColumns: false,
   columns: [
     ......
   ],
   autoupdate: false,
   features: [
    { name: "Updating",
        enableAddRow: true,
        enableDeleteRow: true,
        editMode: 'row',
        editMode: 'cell',
        enableDataDirtyException: false,
        rowAdded: function(evt, ui) {
          alert("this is a visible column (title): " + ui.values.title);
        },
        editRowEnded: function(evt, ui) {
          var row = ui.owner.grid.dataSource.dataView()[ui.owner._rowIndex];
          alert("this is my id column, which is hidden: " + row.id);                  
        },
        rowDeleted: function(e, ui) {
          ... do something
        }
    }, 
```

# java - Android：获取通知的唯一ID

> ID：12978184
> 
> 赞同：16
> 
> 时间：2012-10-19T16:05:44.687
> 
> 标签：java, android, notifications

我有一个`for`看起来像这样的块：

```
for(int counter = 0; counter < sList.size(); counter++){
            String s = sList.get(counter);
            Notification notification = new NotificationCompat.Builder(this).setContentTitle("Title").setContentText(s).setSmallIcon(R.drawable.ic_launcher).setContentIntent(pendingIntent).build();
            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            notificationManager.notify(counter, notification);
} 
```

此块位于由警报管理器触发的服务中。所以这个块很可能在用户看到通知之前被执行了几次。当在 sList 中添加某些内容时重新执行此块时，它会覆盖当前通知，因为通知的 ID 相同。我怎样才能防止这种情况发生？我怎样才能每次都获得一个唯一的 ID？或者是否有可能避免整个 ID 部分，比如告诉 android 无论如何都必须显示通知，无论 ID 是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-01-31T11:42:04.673

```
long time = new Date().getTime();
String tmpStr = String.valueOf(time);
String last4Str = tmpStr.substring(tmpStr.length() - 5);
int notificationId = Integer.valueOf(last4Str);

notificationManager.notify(notificationId, notif); 
```

它获取当前系统时间。然后我只读取它的最后 4 位数字。每次显示通知时，我都使用它来创建唯一 ID。因此，将避免获得相同或重置通知 id 的可能性。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-19T16:21:40.270

我敢肯定，您不应该一次向用户发送这么多通知。您应该显示一个通知，该通知整合了有关一组事件的信息，例如 Gmail 客户端所做的。用于`Notification.Builder`此目的。

```
NotificationCompat.Builder b = new NotificationCompat.Builder(c);
       b.setNumber(g_push.Counter)
        .setLargeIcon(BitmapFactory.decodeResource(c.getResources(), R.drawable.list_avatar))
        .setSmallIcon(R.drawable.ic_stat_example)
        .setAutoCancel(true)
        .setContentTitle(pushCount > 1 ? c.getString(R.string.stat_messages_title) + pushCount : title)
        .setContentText(pushCount > 1 ? push.ProfileID : mess)
        .setWhen(g_push.Timestamp)
        .setContentIntent(PendingIntent.getActivity(c, 0, it, PendingIntent.FLAG_UPDATE_CURRENT))
        .setDeleteIntent(PendingIntent.getBroadcast(c, 0, new Intent(ACTION_CLEAR_NOTIFICATION), PendingIntent.FLAG_CANCEL_CURRENT))
        .setDefaults(Notification.DEFAULT_LIGHTS | Notification.DEFAULT_VIBRATE)
        .setSound(Uri.parse(prefs.getString(
                SharedPreferencesID.PREFERENCE_ID_PUSH_SOUND_URI,
                "android.resource://ru.mail.mailapp/raw/new_message_bells"))); 
```

如果您仍然需要大量状态栏通知，则应将计数器的最后一个值保存在某处并使用 for 循环，如下所示：

```
 int counter = loadLastCounterValue();
    for(String s : sList){
            Notification notification = new NotificationCompat.Builder(this).setContentTitle("Title").setContentText(s).setSmallIcon(R.drawable.ic_launcher).setContentIntent(pendingIntent).build();
            notification.flags |= Notification.FLAG_AUTO_CANCEL;
            notificationManager.notify(++counter, notification);
    }
    saveCounter(counter); 
```

但正如我所说，我认为这是一个糟糕的解决方案，会导致您的应用程序的用户体验不佳。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-10-19T16:22:36.353

您可以简单地在通知生成器中指定一个 id。
相同的 id = 通知的更新
不同的 id = 新的通知。

此外，两个不同的应用程序可以使用相同的通知 ID，它会毫无问题地生成 2 个不同的通知。系统会同时查看 id 和它来自的应用程序。

# php - 如何移动上传的文件

> ID：12978185
> 
> 赞同：0
> 
> 时间：2012-10-19T16:05:46.527
> 
> 标签：php, html

我有一个 HTML Web 表单，用户可以在其中上传多个文件。我在移动文件时遇到了麻烦。

HTML：

我的 HTML：

```
<form enctype="multipart/form-data" method="post" action="save.php">
    <input type="hidden" name="MAX_FILE_SIZE" value="500000"/>
    <input type="file" name="uploads[]" multiple="multiple" />
    <input type="submit" name="submit" value="submit"/>
 </form> 
```

保存.php：

```
 <?php
     foreach ($_FILES['uploads']['name'] as $file) {
     $target= UPLOADPATH . $file;
     move_uploaded_file($file, $target)
     or die('error with moving the file');
      $file= time() . $_FILES['uploads']['name'];
         echo $file;
     } 
```

问题在于 move_uploaded_file()。我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:10:36.900

尝试如下，您需要将第一个参数作为文件源传递

```
foreach ($_FILES['uploads']['name'] as $key => $file) {
 $target= UPLOADPATH . $file;

 move_uploaded_file($_FILES['uploads']['tmp_name'][$key], $target)
 or die('error with moving the file');
  $file= time() . $_FILES['uploads']['name'];
     echo $file;
 } 
```

# javascript - 使用 javascript 更新 URL 上的最后一个路径

> ID：12978189
> 
> 赞同：1
> 
> 时间：2012-10-19T16:05:55.477
> 
> 标签：javascript, url, url-rewriting, path

我做了一个带有分页的过滤系统，我在尝试根据当前 URL 使用 Javascript 重定向时遇到了麻烦。

我可以拥有这种类型的 URL，其中最后一个数字是过滤器：

```
http://localhost/posts/yourPosts/1
http://localhost/posts/subscriptions/3 
```

在每种类型中，第 2 页将以这种方式显示：

```
http://localhost/posts/yourPosts/1/page:2?url=posts%2FyourPosts
http://localhost/posts/subscriptions/3/page:2?url=posts%2FSubscriptions 
```

我目前正在使用：

```
window.location.href = currentURL + '/' + encodeURI($(this).val()); 
```

其中 $(this).val 是要使用的过滤器的编号。

问题是当我在这个 URL 中时它运行良好：

```
http://localhost/posts/yourPosts/
http://localhost/posts/subscriptions/ 
```

但是当我在第 2 页并且我想显示过滤器编号 3 时（比如说，汽车而不是动物），它没有。它显示了这一点：

```
http://localhost/posts/subscriptions/2/page:2?url=posts%2FyourPosts/3 
```

而不是这个：

```
http://localhost/posts/subscriptions/3 
```

有没有简单的方法来处理 URL 来解决这类问题？

我也不能使用绝对路径，因为 URL 并不完全相同。那么...有什么办法可以更改 URL 的最后一个 PATH 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-25T16:34:05.497

快速且有点脏：

```
function fixmybadfilterurl(mybadurl)
{
    var parts = mybadurl.split('?');
    var subpart2 = parts[parts.length-1].split('/');
    var subpart1 = parts[0].split('/');
    subpart1.pop();
    subpart1.pop();
    return(subpart1.join('/')+'/'+subpart2[subpart2.length-1]);
} 
```

所以

```
fixmybadfilterurl('http://localhost/posts/subscriptions/2/page:2?url=posts%2FyourPosts/3'); 
```

将返回

```
'http://localhost/posts/subscriptions/3' 
```

# html - Internet Explorer 字体颜色错误

> ID：12978191
> 
> 赞同：0
> 
> 时间：2012-10-19T16:06:06.323
> 
> 标签：html, css, internet-explorer

目前我在使用 IE 时遇到字体颜色问题。在我的 CSS 中，我指定了颜色，但由于某种原因 IE 忽略了这一点。

[http://www.james-hayward.com/property_type/for-sale/](http://www.james-hayward.com/property_type/for-sale/)

颜色在这里设置：

```
.entry-info a {
    color: #663399;
    cursor: pointer;
} 
```

这似乎适用于所有版本的 IE（因此通常的 IE6/7/8 修复似乎没用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:10:18.767

你有你的规则错误的方式，它应该是`a .entry-info`..但你写它的方式在我看来很糟糕。

这可能有效

```
.entry-info h1 {
    color: #663399;
    cursor: pointer;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:14:06.843

用这个`.entry-info h1 { color: #663399;}`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T16:15:51.213

看起来你的元素嵌套有点过时了，虽然这在 HTML5 中可以工作，但一个简单的更改可以使其跨浏览器兼容并避免这方面的任何问题（对 HTML5 的支持在 IE7、8 中极其有限，在 IE 中不存在6）我建议您将您的 H1 移到您的内部，然后按如下方式引用它：

```
.entry-info h1 a {
    color: #663399;
    cursor: pointer;
} 
```

除此之外，您提供的粘贴规则的顺序错误，因为您的 a 当前超出了您的`.entry-info`样式。

# youtube-api - 服务异常

> ID：12978194
> 
> 赞同：1
> 
> 时间：2012-10-19T16:06:11.067
> 
> 标签：youtube-api, gdata, gdata-api

我正在尝试使用 GData for ObjectiveC 从 iPhone“已安装的应用程序”将视频上传到 youtube。

目前，我在上传票证上收到错误：ServiceException - 错误代码 500。

从文档中我无法弄清楚这个错误的含义以及我做错了什么：

> 500（内部错误）- 500 响应代码表示 YouTube 在处理请求时遇到错误。您可以稍后重试该请求。

我在一周多的时间内只收到了这个错误（所以这不是暂时的中断），我已经尝试过为 Youtube API 注册不同的产品。

谁能在我的请求中发现我做错了什么？

您可以在下面找到来自 GData 的 GTMHttpDebugLogs 的日志：

```
uploadTicket:finishedWithEntry:error:

2012-10-18 17:13:26 +0000
Request: POST https://uploads.gdata.youtube.com/resumable/feeds/api/users/default/uploads
Request headers:
  Accept: application/atom+xml, text/xml
  Authorization: AuthSub token=<authorization subtoken refreshed every time>
  Cache-Control: no-cache
  Content-Length: 793
  Content-Type: application/atom+xml; charset=utf-8
  GData-Version: 2.0
  Slug: video-filename.mp4
  User-Agent: <bundle>/2.0.0 GData-ObjectiveC/1.12 iPhone/5.1 (gzip)
  X-GData-Key: key=<my developer key
  X-Upload-Content-Length: 4005670
  X-Upload-Content-Type: video/mp4

Request body: (793 bytes)
<?xml version="1.0" encoding="UTF-8"?>
<entry xmlns="http://www.w3.org/2005/Atom" xmlns:gml="http://www.opengis.net/gml" xmlns:app="http://www.w3.org/2007/app" xmlns:georss="http://www.georss.org/georss" xmlns:gd="http://schemas.google.com/g/2005" xmlns:media="http://search.yahoo.com/mrss/" xmlns:geo="http://www.w3.org/2003/01/geo/wgs84_pos#" xmlns:yt="http://gdata.youtube.com/schemas/2007"><yt:accessControl action="list"/><media:group><media:description>Video description here</media:description><media:keywords/><media:category scheme="http://gdata.youtube.com/schemas/2007/categories.cat">Music</media:category><media:title>Video title here</media:title></media:group></entry>

Response: status 500
Response headers:
  Cache-Control: no-cache, no-store, must-revalidate
  Content-Length: 171
  Content-Type: application/vnd.google.gdata.error+xml
  Date: Thu, 18 Oct 2012 17:13:19 GMT
  Expires: Fri, 01 Jan 1990 00:00:00 GMT
  Pragma: no-cache
  Server: HTTP Upload Server Built on Oct 3 2012 16:52:30 (1349308350)
  X-GData-User-Country: US
  X-GUploader-UploadID: <### I made this upload id anonymous ###>

Response body: (171 bytes)
<errors xmlns='http://schemas.google.com/g/2005'><error><domain>GData</domain><code>ServiceException</code><internalReason>Internal Error</internalReason></error></errors>
----------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:11:04.270

这是由`<yt:accessControl action="list"/>`您的请求引起的，该请求不是有效值。它应该是这样的`<yt:accessControl action='list' permission='denied'/>`

话虽如此，API 应该优雅地处理这个问题，而不是返回内部服务器错误。我将在内部向相关人员提交一个错误以解决该问题。

# javascript - 这是什么魔法？CSS？Javascript？

> ID：12978199
> 
> 赞同：0
> 
> 时间：2012-10-19T16:06:28.940
> 
> 标签：javascript, css, animation

我正在检查这个微软的网站：[https ://www.windowsazure.com](https://www.windowsazure.com)

使用 chrome 的开发人员工具，我开始四处移动（基本上是 css 的东西）。然后我注意到一些很酷的功能，如果你修改 css 属性，站点将显示从以前状态到新状态的转换，这将发生在颜色属性上，但它也适用于填充和图像。这很棒，因为他们不必关心 CSS 更改时会发生的每一个新动画！

所以我的问题是，这是什么技术？CSS3？Javascript？你知道任何解释如何做到这一点的文档吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T16:07:55.543

您看到的是[CSS3`transition`属性](http://www.alistapart.com/articles/understanding-css3-transitions/)。

# c++ - 如何将 std::basic_string 类型转换为 char 类型的数组？

> ID：12978201
> 
> 赞同：10
> 
> 时间：2012-10-19T16:06:32.153
> 
> 标签：c++, string, type-conversion

运行此代码时出现以下错误：

```
syslog(LOG_ERR | LOG_USER, "%s",errorString); 
```

> 无法将 'const string {aka const std::basic_string}' 转换为 'const char*' for >argument '2' to 'void syslog(int, const char*, ...)' inServer.cpp /PeCounter
> line 478 C /C++ 问题

我正在守护程序，当使用 cout 输出到 stdio 时，errorString 值打印得很好，但在使用 syslog 调用时它不会打印。

将 std::basic_string(char) 转换为“const char”形式的任何方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T16:06:32.153

我发现它有一个似乎可以解决编译问题`std::basic_string`的项目访问方法。`c_str()`

这是一个包含更多信息的网站： http: [//en.cppreference.com/w/cpp/string/basic_string](http://en.cppreference.com/w/cpp/string/basic_string)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T16:08:19.047

`c_str()`or成员函数提供指向包含您的字符串`data()`的数组的第一个元素的指针。`char_type`只要字符串对象本身保持有效且未更改，它就有效（但请注意，可能导致重新分配的操作可能会使指针无效——最好不要存储它）。

# iphone - 在 MonoTouch 的 UIPickerview 中设置内容的对齐方式？

> ID：12978202
> 
> 赞同：0
> 
> 时间：2012-10-19T16:06:34.453
> 
> 标签：iphone, ios, xamarin.ios, monodevelop

如何将我在 UIPickerView 中看到的选项的文本对齐设置为居中对齐？我已经尝试了几乎所有我能设置的东西，但都无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T17:36:30.153

我创建了一个继承自 UIPickerViewModel 的自定义类。这从我的 SQLite 文件中读取了我的数据，将文本转换为 UILabel，并将它们添加到 UILabel 数组中。我对其进行了格式化，使文本为粗体、居中并根据我的喜好着色。当它显示在 UIPickerView 中时，这些格式更改会继续并按我希望的方式显示！

# sql - 我在 sum group by statement 上获得双倍价值

> ID：12978205
> 
> 赞同：1
> 
> 时间：2012-10-19T16:06:41.113
> 
> 标签：sql, oracle10g

```
Table
P_ID   I_ID   S_ID  T_ID Column  Column1

 -- (<Column1> supposed to be <Column>.<Table>-<Column>.<Table1>)

Table

P_ID   I_ID   S_ID  T_ID Column 
```

我在源表上运行了这个查询：

```
select <column> from 
<TABLE>
where 
i_id='<value>'; 
```

我得到的输出为 9000 然后我在目标上运行这个查询来测试 id Column1 得到正确的值

```
select P_ID, I_ID, S_ID, T_ID, 
sum(<column>)
from 
<TABLE> F,<TABLE2> PO
where 
F.P_ID = PO.P_ID
and F.I_ID=PO.I_ID
and F.FLAG='Y'  --something that we need
and T_id>='2012001'  --just for results for 2012
and F.I_id='<Value>'
group by F.P_ID, F.I_ID, F.S_ID, F.T_ID
order by 1;

Here i get Output as
  P_ID     I_ID           S_ID          T_ID           sum(<column>)
 <Value>  <Value>         <Value>      <Value>              18000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:15:18.350

`PO`显然， 中的每一行都有多行`F`。

此外，将您的查询更改为更现代的（自 1996 年以来！）连接语法：

```
from <TABLE> F
join <TABLE2> PO ON F.P_ID = PO.P_ID and F.I_ID=PO.I_ID
where F.FLAG='Y'
... 
```

### 编辑：

如果您只想断言有*一行*（`PO`不关心有多少行），请使用`exists()`：

```
select P_ID, I_ID, S_ID, T_ID, 
sum(<column>)
from <TABLE> F
where exists (
    select * from <TABLE2> PO 
    where F.P_ID = PO.P_ID
    and F.I_ID=PO.I_ID)
and F.FLAG='Y'  --something that we need
and T_id>='2012001'  --just for results for 2012
and F.I_id='<Value>'
group by F.P_ID, F.I_ID, F.S_ID, F.T_ID
order by 1; 
```

# php - 动态构建多维数组

> ID：12978212
> 
> 赞同：0
> 
> 时间：2012-10-19T16:07:05.553
> 
> 标签：php, recursion, multidimensional-array

我的意图是获取一系列字符串，用“_”分解它们并使用该数组中的键来构建一个“主”数组。

我的规则是：

```
if key no exists -> create key under parent array
if key exists -> add key as new array to parent
if key is last -> add value 
```

字符串示例

```
total_players_count
total_rosters_count
players_season1_count
players_season2_count
rosters_season1_count 
```

预期成绩

```
$main = array(
    'total' => array(
        'players'   => array(
            'count' => '123',
        'rosters'   => array(
            'count' => '123')
        )
    ),
    'players' => array(
        'season1'   => array(
            'count' => '123'
        )
    )
); 
```

我希望这表明了我期望写的内容。现在让我来谈谈昨晚我是如何因一系列失败而让自己失望的；）

要点是，我的递归函数运行得不太好，所以我没有发布任何代码。我一直在使用 array_key_exists，但这并没有让我得到预期的结果。我使用 prev()、current() 和 end() 接近了但问题源于我必须解析的意外数量的键（否则我只会循环 3 次并完成。我知道如果我要解析的键数量有限；但我没有。

```
<?php
private function _get_section($parent_key, $sql) {

        $data = array();
        $data[$parent_key] = array();

        foreach ($sql AS $key => $value) {
            $keys       = explode('_', $key);

            if ($keys[0] == $parent_key) {
                $i          = 0;
                $total_keys = count($keys);

                for ($k = 1; $k < $total_keys; $k++) {
                    $i++;

                    if ($i == 1) {
                        echo '1\. (' . $i . ') ' . $keys[$k];
                        $data[$parent_key][$keys[$k]] = array();
                    }
                    else if ($i > 1 && $i < $total_keys - 1) {
                        $data[$parent_key][$keys[$k - 1]][$keys[$k]] = array();
                    }
                    else if ($i == $total_keys - 1) {
                        $tmp = array_reverse($data);

                        // can't get the last key because I need to recursively loop 
                        // through the results to find where to set this last 
                        // key / value
                    }
                }
                $k      = 0;
                $i      = 0;
            }

            $keys       = array();
            $total_keys = 0;
        }
    } 
```

**解决方案（谢谢）**

```
$tree = array();

foreach ($sql AS $key => $value) {
    $parts = explode('_', $key);

    $val = $value;

    foreach (array_reverse($parts) AS $part) {
        $val = array($part => $val);
    }
    $tree = array_merge_recursive($tree, $val);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:12:54.537

未经测试。希望我不需要阅读您的代码即可完全理解您想要什么，因为我没有。我只是看了预期的结果+输入，虽然我想知道发生了`rosters_season1_count`什么？

```
$tree = array();
foreach ($strings as $string) {
    $parts = explode('_', $string);
    $path = '123';
    foreach (array_reverse($parts) as $part) {
        $path = array($part => $path);
    }
    $tree = array_merge_recursive($tree, $path);
} 
```

# php - 使用群和移动进行有效的文件更新

> ID：12978213
> 
> 赞同：2
> 
> 时间：2012-10-19T16:07:06.887
> 
> 标签：php, concurrency, rename, flock

我想更新一个文件，而其他进程可能正在读取它。PHP`flock()`函数正是允许这样做的。

然而，正如我所见，flock 只需要一个文件句柄 .. 这通常来自 fopen。如果我想有效地做到这一点，我不想保持文件打开并写入它，因为文件正在通过网络传输并且写入操作可能会持续几秒钟（比如 2-3 秒）。

所以我希望是否可以将数据写入临时文件然后移动它。在那种情况下，文件的读者只会在我重命名它时受到干扰。

现在将数据写入 temp 将不需要我使用flock。但是，如何使用锁定将临时文件正确移动到实​​际文件。

我还想知道我是否真的需要首先锁定......移动操作不会很快吗？它会伤害同时读取文件吗？而且我预计会有 100 次读取，但只有一次更新，并且该更新将每小时发生一次

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T21:23:34.973

Rename 在 POSIX 系统中是原子的，所以你不需要flock。已经打开文件的读者不会受到干扰。（理由：打开的文件句柄指向 inode，而不是目录条目。重命名仅更改目录条目。）

但是，读者必须关闭并重新打开文件才能获取新内容。如果读者保持文件打开，他们将能够重新阅读旧内容。

# c++ - 获取所有大于某个值的stl向量元素

> ID：12978216
> 
> 赞同：3
> 
> 时间：2012-10-19T16:07:32.547
> 
> 标签：c++, stl, vector

我想知道如何找到具有验证特定条件的值的 stl 矢量元素列表。例如，如果我有一个 int 值向量

```
vector<int> V; 
```

我想得到所有大于 5 的元素。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T16:14:40.353

如果`std::copy_if()`值：

```
std::vector<int> target;
std::copy_if(v.begin(), v.end(), std::back_inserter(target),
             std::bind(std::less<int>(), 5, _1)); 
```

# javascript - 只有在禁用 JavaScript 时才能创建超链接？

> ID：12978221
> 
> 赞同：5
> 
> 时间：2012-10-19T16:07:43.587
> 
> 标签：javascript, jquery, html, css, javascript-events

我一直在研究和学习越来越多的关于 HTML 5、JQuery、CSS3 以及在禁用或不禁用 JavaScript 时隐藏和禁用某些元素的能力。（`<noscript>`标签）

我的问题是，

1.  **仅**当**禁用 JavaScript**时，如何使超链接有效？
***   如果**JavaScript 已启用**，我如何确保我**的下拉登录菜单显示 INSTEAD** of following the hyperlink？**

 ****HTML**

很简单，如果 JS 被禁用，我会隐藏我的购物车区域并更改登录链接。

```
<!-- If JavaScript is disabled it will make the login link take you to a login page instead of a drop-down box. -->         
<noscript>
    <style>
        .login-form, .js-enabled{
            display: none;
        }
        .cart{
            top: -80px;
        }
    </style>                                
    <div class="cart">
        <a href="#" id="cart_img">
            <img src="img/bag.jpg" alt="Check Cart"
            onmouseover="this.src='img/bag-gold.jpg'"
            onmouseout="this.src='img/bag.jpg'">
        </a>
        <a href="#">Why HorseTack?</a> | 
        <a href="#">About</a> | 
        <a href="#">Contact</a> | 
        <a href="http://www.LOGINPAGELINK.com">Login</a>
    </div>
</noscript>
<!-- End JavaScript text -->

<div class="cart js-enabled">
    <a href="#" id="cart_img">
        <img src="img/bag.jpg" alt="Check Cart"
        onmouseover="this.src='img/bag-gold.jpg'"
        onmouseout="this.src='img/bag.jpg'">
    </a>
    <a href="#">Why HorseTack?</a> | 
    <a href="#">About</a> | 
    <a href="#">Contact</a> |                           
    <a href="#" class="login-box">Login</a>
        <div class="login-form">
            <form class="login-frm">
                <label><input type="text" placeholder="Username"></label>
                <label><input type="password" placeholder="Password"></label><br>
                <input type="submit" value="Login"><br>
                <a href="#">New User?</a>
            </form>
        </div>
</div> 
```

**jQuery**

这使得登录框向下滑动（只是为了避免将人们带到登录页面，除非他们必须这样做）

```
 // Login Box Pop-Up
jQuery(document).ready(function() {
    jQuery(".login-form").hide();
    //toggle the componenet with class msg_body
    jQuery(".login-box").click(function()
    {
    jQuery(this).next(".login-form").slideToggle(500);
    });
}); 
```

我想要的不是`<noscript>`复制该标签和内容，而是一种超链接仅在没有 JavaScript 时才起作用的方式。

我已经设置了页面让用户知道他们的 JS 何时被禁用（就像 Stack Overflow 所做的那样）

关于我的问题的任何问题（希望我没有含糊不清？）问！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:09:29.257

> 仅当禁用 JavaScript 时，如何使超链接有效？如果启用了 JavaScript，如何确保我的下拉登录菜单显示 INSTEAD of following the hyperlink？

编写一个 JavaScript 函数来显示菜单。确保它捕获了第一个参数（这将是事件对象）。

[将该函数作为事件处理程序](http://api.jquery.com/on/)绑定到链接。

调用[`preventDefault()`](http://api.jquery.com/event.preventDefault/)事件对象。

```
function (event) { /* display menu then ... */ event.preventDefault(); } 
```

* * *

> `<noscript>`标签

一个问题几乎总是有最坏的解决方案。是[进步](http://en.wikipedia.org/wiki/Progressive_enhancement)的和[不引人注目](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T16:10:37.167

您可以显示链接，如果启用了 javascript，请将其隐藏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T16:15:28.073

您可以将链接放在 div 中，如果启用了 JS，请删除链接并将事件放入该 div 中，例如：

```
<div class="link-holder">
    <a href="page.html">Link</a>
</div> 
```

和 jQuery：

```
$(document).ready()
{
    $('.link-holder').text('').click(function(){
        displayLogin();  //assuming displayLogin() has your function to, well, display the login
    });
} 
```**

# replace - 在文本文件中搜索和替换 - 将常量添加到编号序列

> ID：12978222
> 
> 赞同：2
> 
> 时间：2012-10-19T16:07:44.623
> 
> 标签：replace

我有一个文件，实际上是一个 .bat 文件，但它可以是任何文本文件，其中包含我想要更新的内容。我想在整个文件中替换一些文本之后的数字，如下所示：

`%varXX`其中*XX*是一个数字，一个或两个数字。这些数字通常从 1 到 35。

示例：`%var10`---> 将一个已知数加到 10，如 2，结果为`%var12`. 在本例中，我想选择从 10 开始执行此操作的数字，并且我想选择要添加到所有这些事件中的数字，最多 35 次。有时，我还需要减去而不是添加这个数字。我在windows电脑上。

更新 - 使用 VIM 找到部分解决方案：

```
:%s@%var\(\d\+\)@\='%var' . (submatch(1) + 3)@g 
```

在此示例中，`3`是我要添加的数量。但是，这会搜索后面的任何数字`var`并添加`3`. 如何修改上述命令以从我选择的数字开始？

# java - 如何从字符串中替换“}”？

> ID：12978224
> 
> 赞同：2
> 
> 时间：2012-10-19T16:07:56.437
> 
> 标签：java, string, replace

好吧，我想打电话给

```
String newString = oldString.replaceAll("}",""); 
```

但是我尝试过的 } 出现错误：

```
String newString = oldString.replaceAll("\\}\\","");
String newString = oldString.replaceAll("\}\","");
String newString = oldString.replaceAll("//}//","");
String newString = oldString.replaceAll("/}/",""); 
```

而且它们都不起作用。我怎么能那样做？

谢谢

这是错误：

```
10-19 12:17:44.907: W/System.err(7030): java.util.regex.PatternSyntaxException: Syntax error in regexp pattern near index 1:
10-19 12:17:44.907: W/System.err(7030): }
10-19 12:17:44.907: W/System.err(7030):  ^
10-19 12:17:44.907: W/System.err(7030):     at java.util.regex.Pattern.compileImpl(Native Method)
10-19 12:17:44.907: W/System.err(7030):     at java.util.regex.Pattern.compile(Pattern.java:400)
10-19 12:17:44.907: W/System.err(7030):     at java.util.regex.Pattern.<init>(Pattern.java:383)
10-19 12:17:44.907: W/System.err(7030):     at java.util.regex.Pattern.compile(Pattern.java:374)
10-19 12:17:44.907: W/System.err(7030):     at java.lang.String.replaceAll(String.java:1784)
10-19 12:17:44.907: W/System.err(7030):     at com.rotaryheart.MainActivity$1.onClick(MainActivity.java:70)
10-19 12:17:44.907: W/System.err(7030):     at android.view.View.performClick(View.java:4084)
10-19 12:17:44.907: W/System.err(7030):     at android.view.View$PerformClick.run(View.java:16966)
10-19 12:17:44.907: W/System.err(7030):     at android.os.Handler.handleCallback(Handler.java:615)
10-19 12:17:44.907: W/System.err(7030):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-19 12:17:44.907: W/System.err(7030):     at android.os.Looper.loop(Looper.java:137)
10-19 12:17:44.907: W/System.err(7030):     at android.app.ActivityThread.main(ActivityThread.java:4940)
10-19 12:17:44.907: W/System.err(7030):     at java.lang.reflect.Method.invokeNative(Native Method)
10-19 12:17:44.907: W/System.err(7030):     at java.lang.reflect.Method.invoke(Method.java:511)
10-19 12:17:44.915: W/System.err(7030):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
10-19 12:17:44.915: W/System.err(7030):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
10-19 12:17:44.915: W/System.err(7030):     at dalvik.system.NativeStart.main(Native Method) 
```

这是 MainActivity.java 70 行

```
String newString = oldString.replaceAll("}",""); 
```

好吧，这是我的 onClick 电话

```
go.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            try {
                try {
                  oldString= "} test } for }";

                        Toast.makeText(getApplicationContext(), "Test for }",
                                Toast.LENGTH_SHORT).show();
                        String newString = oldString.replaceAll("}", "");
                        Toast.makeText(getApplicationContext(), ""+newString , Toast.LENGTH_LONG).show();
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T16:09:20.567

`replaceAll`需要一个正则表达式，`{`并且在正则表达式`}`中具有特殊含义。您可以改用该[`replace`方法](http://developer.android.com/reference/java/lang/String.html#replace%28char,%20char%29)（与直觉相反，它**确实**替换了所有出现，但将要替换的字符串作为参数）：

```
String newString = oldString.replace("}",""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T16:09:28.033

试试这个：

```
String newString = oldString.replaceAll("\\}",""); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T16:25:11.407

那么你的第一个代码应该可以正常工作。你不需要逃避你的`}`.

`{`但是，如果您正在使用它，您确实需要避开左大括号 - 。

所以代码： -

```
str = str.replaceAll("}", ""); 
```

工作正常。您遇到的问题可能是因为您对我们隐瞒了一些事情。

如果您有一些其他的正则表达式而不是上面显示的，那么我们无法确切地看到问题所在。

好的，我用你给定的字符串试过了： -

```
 String str = "} test } for }";
   str = str.replaceAll("}", "");
   System.out.println(str); 
```

**输出**： -

```
 test  for 
```

如您所见，我得到了所需的输出，但不明白为什么这在您的代码中不起作用。

但是，您仍然可以尝试使用**`replace()`**方法，看看它是否有效：-

```
String newString = oldString.replace("}", ""); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T16:10:20.437

做就是了：

```
.replaceAll("\\{", ""); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T16:10:26.930

您需要转义特殊字符

试试这个来转义正则表达式中的大括号：

```
\} 
```

在 Java 中看起来像这样：

```
String newString = oldString.replace("\\}",""); 
```

提示：与大多数应用程序`replaceAll`相同`replace`

# jquery - jquery confirmation dialog doing nothing

> ID：12978227
> 
> 赞同：0
> 
> 时间：2012-10-19T16:08:09.223
> 
> 标签：jquery, html

I am trying to use jquery to show confirmation dialog but nothing happens when i click the link here is the code I have, if I put alerts I can see alert in ready function but not in click:

```
$(document).ready(function() {
    $("#mydialog").dialog({
        autoOpen: false,
        modal: true
    });
});
$(".myconfirmLink").click(function(e) {
    e.preventDefault();
    var targetUrl = $(this).attr("href");
    $("#mydialog").dialog({
        buttons: {
            "Yes": function() {
                $(this).dialog("close"), window.location.href = targetUrl;
            },
            "No": function() {
                $(this).dialog("close");
            }
        }
    });
    $("#mydialog").dialog("open");
});​ 
```

and on the link I am calling it like so:

```
<div class="topToolbar">
                    <span> <a href="/Logout.aspx" class="myconfirmLink">Log Out</a></span>
                    <div id="mydialog" title="Confirmation Required">
                <p> Are you sure you want to request a new pack?</p>
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:15:58.590

Move your click binding inside the document.ready function

```
$(document).ready(function() {
    $("#mydialog").dialog({
        autoOpen: false,
        modal: true
    });
    $(".myconfirmLink").click(function(e) {
        e.preventDefault();
        var targetUrl = $(this).attr("href");
        $("#mydialog").dialog({
            buttons: {
                "Yes": function() {
                    $(this).dialog("close"), window.location.href = targetUrl;
                },
                "No": function() {
                    $(this).dialog("close");
                }
            }
        });

        $("#mydialog").dialog("open");
    });
});​ 
```

More than likely it's trying to bind the click event to the element before it exists in the dom. It works fine here

[http://jsfiddle.net/FdBTW/](http://jsfiddle.net/FdBTW/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:16:16.040

It looks like you're setting the click handler outside of the `ready` function. The `$(".myconfirmLink").click(function (e) { ... });` code is being run *before* jQuery is ready for it.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T16:44:51.453

Their is nothing wrong with your code. Just move your confirm link click handler code into a document.ready function to make it work.

# java-me - 在 Lwiit 或 Native J2ME 的菜单栏中仅显示 2 个命令

> ID：12978230
> 
> 赞同：2
> 
> 时间：2012-10-19T16:08:14.060
> 
> 标签：java-me, menu, lwuit, command-behaviors

我在 lwuit 中的表单中添加了 2 个命令。

```
form.addCommand(test);
form.setBackCommand(exitCommand); 
```

我将命令行为更改为 COMMAND_BEHAVIOR_NATIVE，这样我就可以显示状态，并且我的命令也出现在底部，但它们出现在右侧的退出......并在中间测试命令。我只想在菜单栏中显示 2 个命令布局，右侧是 Exit，左侧是包含 test 的选项列表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:10:07.073

首先得到背部`Command`并将其移除。`Command`在此之后，使用 addCommand像标准一样添加出口`Command`。试试这个，如果这不起作用，我们可以尝试其他方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:11:41.590

我不知道 LWUIT，因为我从未使用过它，但遗憾的是，对于本机 JavaME，您无法控制它。决定在何处放置命令的是单个设备。

您可以通过更改优先级参数来移动它们，并且您可以通过这种方式获得可接受的结果，但仅限于某些设备。相同的代码在其他设备上会给出不同的结果。

# c++ - 在 C++ 中捕获分段错误

> ID：12978234
> 
> 赞同：20
> 
> 时间：2012-10-19T16:08:20.253
> 
> 标签：c++, crash, segmentation-fault

块是否`try-catch`捕获分段错误错误？

我正在使用下面给出的函数读取文本文件，但有时文件为空并且程序崩溃。我希望程序继续运行并在该文件为空或正在使用时提供另一个文件。

```
Path2D read_gesture(const char* filename)
{
    Path2D path;
    //MultiStrokeGesture MultiStrokes;

    vector<string> text_file;

    int no_of_paths=0;
    std::ifstream ifs(filename);

    for (std::string line; std::getline(ifs, line); )
    {
        no_of_paths=no_of_paths+1;
        double a, b;
        stringstream ss(line);
        if (!(ss >> a >> b)) {cout<<"wrong format"<<endl;}
        std::cout << "You said, " << a << ", " << b << ".\n";
        path.push_back(Point2D(a,b));

    }
    cout<<"saving gesture"<<endl;
    return path;

} 
```

我试过类似的东西：

```
Path2D path;
try 
{
    path=read_gesture("test.txt");
}
catch(int e)
{
    path=read_gesture("test2.txt");
} 
```

但程序仍然崩溃。问题可能是什么？

*   稍微更正一下，调用的文件和 的文件`catch`不一样`try`，是错别字。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-19T16:10:58.217

C++`try-catch`块仅处理 C++ 异常。像分段错误这样的错误是较低级别的，try-catch 会忽略这些事件，并且表现得与没有 try-catch 块一样。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-19T17:56:26.733

try/catch 只捕获 C++ 异常。只有当您的程序执行非法操作并调用未定义的行为时，才会发生分段错误。

请记住，未定义的行为可以以不同的方式表现出来，包括不崩溃。你很幸运，你的程序崩溃了，通知你有一些东西需要修复，但程序可能不会崩溃；你不能让你的后备代码依赖于崩溃。

适当的做法是不要像处理异常那样处理崩溃，而是确保即使输入不是您所期望的，您的程序也不会做任何非法的事情。在这种情况下，您需要更改代码，以便知道文件何时为空并需要提供另一个。

* * *

通常有一种方法可以处理分段错误，但它并不打算进行您正在寻找的那种恢复。机制是信号。您可以安装一个信号处理程序，该处理程序在引发指定信号时执行，例如用于分段错误的 SIGSEGV。但是，除非您使用 std::raise 显式提升它，否则不需要实际出现这样的信号。此外，当实现引发信号时，您可以在信号处理程序中执行的操作受到严格限制；

> If the signal occurs other than as the result of calling the abort or raise function, the behavior is undefined if the signal handler refers to any object with static storage duration other than by assigning a value to an object declared as volatile sig_atomic_t, or the signal handler calls any function in the standard library other than the abort function, the _Exit function, or the signal function with the first argument equal to the signal number corresponding to the signal that caused the invocation of the handler. Furthermore, if such a call to the signal function results in a SIG_ERR return, the value of errno is indeterminate.

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-19T16:18:29.533

如果你的程序有分段错误，而且这不是你故意做的，那么你就无能为力了。你不能抓住它，即使你能抓住它，你也不能在之后继续这个程序。

此外，以下代码有一个非常严重的问题：

```
try {
    path=read_gesture("test.txt");
}
catch(int e) {
    path=read_gesture("test.txt");
} 
```

“如果一开始不成功，再试一次”对人类来说是一个很好的座右铭，但计算机每次都以完全相同的方式做事。如果一个操作失败了，除非是暂时性的失败（比如网络故障），再试一次都是徒劳的。

您唯一的选择是编写一个*正确的程序，*因为正确的程序不会出现段错误。如果你想找到段错误，你可以在 Valgrind 或 GDB 中运行程序，这两者都应该给出充满线索的回溯（但你必须用你的头脑来找到你程序中真正的错误）。

另一种选择是使用一种不会出现段错误的语言，如 Java、C#、Python、Ruby、Haskell、JavaScript、Go、Rust，或者除了 C 或 C++ 之外的几乎所有现在使用的语言。

**脚注：**这有点简化，因为实际上可以编写得到分段错误的正确程序。然而，这不是你在做什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T16:19:04.770

您可以尝试添加一个小测试来查看 ifs 是否有效：

```
#include <iostream>
#include <fstream>

int main(int argc, char * argv[]){
   std::ifstream ifs( "notExists" );
   if( ifs.is_open()) {
      char line[1024];
      while(! ifs.fail() && ifs.getline( line, sizeof( line ))) {
        std::cout << line << std::endl;
      }
   }
   else {
      std::cout << "file doesn't exists." << std::endl;
   }
   std::cout << "done." << std::endl;
    return 0;
} 
```

该程序运行并输出：

```
file doesn't exists.
done. 
```

[布尔 std::ifstream::is_open();](http://www.cplusplus.com/reference/iostream/ifstream/is_open/)

有关详细信息，请参阅[getline](http://www.cplusplus.com/reference/string/getline/)全局函数，如果它失败，它会设置一些未在此处检查的位。

通过修改内部状态标志来发出错误信号：

*   eofbit：在其操作过程中到达字符源的末尾。
*   failbit：没有提取字符，因为过早地找到了结尾。请注意，某些 eofbit 情况也会设置失败位。
*   badbit：发生了上述以外的错误。

此外，在任何这些情况下，如果使用 is 的成员函数 ios::exceptions 设置了适当的标志，则会引发 ios_base::failure 类型的异常。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T16:40:49.927

首先，您可以（阅读应该）以永远不会产生异常（例如分段错误）的方式编写代码。

首先，您应该检查所有可能无效的指针（例如，类的用户将调用的类的公共函数可能会收到一些无效的指针，但内部实现可能会假定该指针已被检查）。

其次，您应该检查可能失败的功能的结果，例如`malloc`可能无法分配内存或您尝试打开的文件可能被删除或您没有打开它的权限，甚至打开后它的数据可能是无效的，所以你应该检查你的行动的结果。C++ 中的这个过程比 C 容易得多，例如`new`在失败时抛出异常，或者在任何错误或 eof 的情况下`stream`都可以转换为`false`。

但是要回答您的问题，通常`catch`只阻止捕获类型化的异常，但在某些编译器`catch(...)`中也可能捕获诸如分段错误之类的异常，甚至将这些异常转换为 C++ 异常，例如在 Windows 平台下，您可以使用`_set_se_translator`为类似这样的异常设置全局翻译器C++ 异常和使用 MSVC，您还可以编译您的程序以`/EHa`使其能够捕获此类异常，`catch(...)`但所有这些都是特定于特定平台或编译器的扩展，因此可以正确编写您的代码，并且永远不会想到这样的方法来解决您的问题问题。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-19T16:19:29.257

尝试检查它是否可以捕获`catch(...){cout<<'catched';}`

也试试这条线，这样可以防止推送错误的格式点：

`if (!(ss >> a >> b)) {cout<<"wrong format"<<endl; continue;}`

# python - Python：无法获得正确的数据类型

> ID：12978235
> 
> 赞同：0
> 
> 时间：2012-10-19T16:08:24.087
> 
> 标签：python

我是 Python 编程的新手。我在其中一个练习中遇到了问题，想不出出路。所以，我必须检查输入是“int”还是“float”并返回它的绝对值。否则会出现错误消息。我选择使用“raw_input()”来接受用户的输入，但问题是它接受输入作为字符串。再说一次，我是 Python 新手，所以如果这个问题看起来很愚蠢，请原谅，但我真的需要帮助。我也添加了问题和我的代码。谢谢！！

问题：

这是一个两部分：首先，使用一个参数定义一个函数 distance_from_zero（选择您喜欢的任何参数名称）。其次，让该函数执行以下操作：检查它接收的输入的类型。如果类型是 int 或 float，则函数应返回函数输入的绝对值。如果类型是任何其他类型，则函数应返回“这不是整数或浮点数！”

代码：

```
def distance_from_zero(n):
    n=raw_input("Please enter a number:")
    if type(n)==int or type(n)==float:
        print abs(n)
    else:
        print "This isn't an integer or a float!" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:15:22.967

这里有一些问题可以让你像程序员一样思考这个问题。

1.  当您尝试将一串非数字转换为 时会发生什么`int`？
2.  当您尝试将类似整数的字符串转换为 a 时会发生什么`int`？
3.  当您尝试将类似浮点的字符串转换为 时会发生什么`int`？
4.  当您尝试将 float-like-string 转换为 a 时会发生什么`float`？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T16:11:42.733

根据作业的措辞，我认为您根本不需要从用户那里获得输入。 `n`已经是函数的参数，所以只需检查传入的值而不用覆盖它`n=raw_input("Please enter a number:")`。然后只需调用具有不同参数类型的函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T16:12:47.250

```
try:
    float(n)
except Exception:
    //not a float 
```

尝试类似的方法让你开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-09T01:16:47.170

尝试：

```
def distance_from_zero(n):
    if type(n) == int or type(n) == float:
        return abs(n)
    else:
        return "Nope" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-03T04:19:57.173

你需要让它返回而不是打印你的结束语句

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-23T04:45:17.367

```
def distance_from_zero(n):
if type(n) == int or type(n) == float:
    return abs(n)
else:
    return("Nope") 
```

# java - Java - 动态加载类

> ID：12978239
> 
> 赞同：8
> 
> 时间：2012-10-19T16:08:55.573
> 
> 标签：java, class, plugins, dynamic, classloader

我目前正在创建一个插件系统（我的第一次尝试），查看其他人的代码我试图拼凑我自己的类加载器并从目录中加载插件（这些将是类文件）

我的问题是，每当我尝试使用类加载器加载类时，类加载器都找不到引用程序的插件中的任何导入。(ie: MyClass extends Plugin, com.mgmc.plugins noclassdeffound) 不同的命名空间？

一些示例代码：类加载器：

```
/*

* To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.mcgm.game.provider;

import com.mcgm.utils.Misc;
import com.mcgm.utils.Paths;
import java.awt.AWTPermission;
import java.io.*;
import java.net.MalformedURLException;
import java.net.SocketPermission;
import java.net.URL;
import java.security.CodeSigner;
import java.security.CodeSource;
import java.security.Permissions;
import java.security.ProtectionDomain;
import java.util.PropertyPermission;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author Tom
 */
public class GameClassLoader extends ClassLoader {
private final ProtectionDomain domain;
private final URL base;

public GameClassLoader(final URL url) {
    base = url;
    final CodeSource codeSource = new CodeSource(base, (CodeSigner[]) null);
    domain = new ProtectionDomain(codeSource, getPermissions());
}

public void loadGames() {
    for (File f : Paths.compiledFolder.listFiles()) {
        try {
            Class c = loadClass(f.getPath());
            Misc.outPrint(c.getName());
        } catch (ClassNotFoundException ex) {
            Logger.getLogger(GameClassLoader.class.getName()).log(Level.SEVERE, null, ex);
        }
    }
}

private Permissions getPermissions() {
    final Permissions ps = new Permissions();
    ps.add(new AWTPermission("accessEventQueue"));
    ps.add(new PropertyPermission("user.home", "read"));
    ps.add(new PropertyPermission("java.vendor", "read"));
    ps.add(new PropertyPermission("java.version", "read"));
    ps.add(new PropertyPermission("os.name", "read"));
    ps.add(new PropertyPermission("os.arch", "read"));
    ps.add(new PropertyPermission("os.version", "read"));
    ps.add(new SocketPermission("*", "resolve"));
    ps.add(new FilePermission(Paths.compiledFolder.getPath(), "read,write,delete"));
    ps.setReadOnly();
    return ps;
}

@Override
@SuppressWarnings("rawtypes")
public Class<?> loadClass(final String name, final boolean resolve) throws ClassNotFoundException {
    Class clazz = findLoadedClass(name);

    if (clazz == null) {
        try {
            byte[] bytes = loadClassData(name);
            clazz = defineClass(name, bytes, 0, bytes.length, domain);
            if (resolve) {
                resolveClass(clazz);
            }
        } catch (final Exception e) {
            clazz = super.loadClass(name, resolve);
        }
    }

    return clazz;
}

public byte[] loadClassData(final String name) {
    try {
        final InputStream in = getResourceAsStream(name.replace('.', '/') + ".class");
        final byte[] buffer = new byte[4096];
        final ByteArrayOutputStream out = new ByteArrayOutputStream();
        int n;
        while ((n = in.read(buffer, 0, 4096)) != -1) {
            out.write(buffer, 0, n);
        }
        return out.toByteArray();
    } catch (IOException ex) {
        Logger.getLogger(GameClassLoader.class.getName()).log(Level.SEVERE, null, ex);
    }
    return null;

}

@Override
public URL getResource(final String name) {
    try {
        return new URL(base, name);
    } catch (final MalformedURLException e) {
        return null;
    }
}

@Override
public InputStream getResourceAsStream(final String name) {
    try {
        return new URL(base, name).openStream();
    } catch (final IOException e) {
        return null;
    }
}
} 
```

我正在加载的插件：（也找不到注释）

```
import com.mcgm.GameInfo;
import com.mcgm.game.Minigame;
  @GameInfo(name = "RandomGame",
description = "A really long and boring game.",
authors = {"Tom", "Is", "The", "Greatest"},
version = 0.1,
maxPlayers = 100,
teamBased = false,
teamAmount = -1,
PvP = false)
public class game extends Minigame {
} 
```

我如何调用要加载的类：

```
 GameClassLoader classLoader = new GameClassLoader(Paths.compiledFolder.toURI().toURL());
            classLoader.loadClass("game", true); 
```

我认为这对于那些知道自己在做什么的人来说是微不足道的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:00:29.860

最后！经过一天半的搜索，Vulcan 为我指明了正确的方向：我将 GameClassLoader 更改为：

```
public GameClassLoader(final URL url, ClassLoader parent) {
    super(parent); 
```

最后将基本 url 添加到 getResourceAsStream()

```
final InputStream in = getResourceAsStream(base.getFile() + "/" + name.replace('.', '/') + ".class"); 
```

非常感谢你们的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:38:37.663

尝试在资源路径中添加前导斜杠： `final InputStream in = getResourceAsStream("/" + name.replace('.', '/') + ".class");`

这是我每次打电话时都必须尝试的事情`getResourceAsStream()`。我刚刚又为你试了一次。这里的路径是相对于用于调用的类的包的`getResourceAsStream()`，因此需要前导斜杠来表示“从根开始”。

# macos - 从外部设备访问 Parallels Desktop 上的 Windows

> ID：12978240
> 
> 赞同：1
> 
> 时间：2012-10-19T16:09:00.110
> 
> 标签：macos, ip, parallels

我正在使用带有 Windows 7 的 Mac OS X Mountain Lion 和 Parallels Desktop 7。在 Windows 上，我正在开发在 localhost 上运行的服务器 (IIS)。windows的子网ip为10.211.55.3，在Mac上可以通过浏览器访问服务器。但我也想从外部设备（在我的情况下，从安卓手机）访问我的服务器。可能吗？我该怎么做？

在 VM 首选项中，我选择了共享网络。

# nhibernate - 将旧项目从 NHibernate 1.2 升级到 3.3

> ID：12978245
> 
> 赞同：1
> 
> 时间：2012-10-19T16:09:14.140
> 
> 标签：nhibernate, orm, nhibernate-mapping

我们有一个旧项目，最初是用 .NET 2.0 和 VS2005 编写的，最终在 VS2008 中编写。它使用 NHibernate 1.2 进行数据访问。作为我们升级的一部分，我们迁移到了 .NET 4.0 和 VS2010，但是我们在从 NHibernate 1.2 迁移到 3.3 时遇到了一些问题。

我们遇到的主要问题是查询一个表，该表上有一个链接。我们正在运行的查询如下：

```
IQuery query = base.Session.CreateSQLQuery("select t from Transaction t inner join Order o where TransactionDate >= ? && TransactionDate <= ? order by TransactionDate desc"); 
```

我们得到 2 个不同的错误：数据库中不存在 t.Transaction 或 t.Orders。我们知道这些表存在，我检查过多次，我知道那里有数据......

我已经看到了[从 NHibernate 1.2 升级到 3.2 时需要注意](https://stackoverflow.com/questions/8388500/what-to-be-aware-of-when-upgrading-nhibernate-from-1-2-to-3-2)的问题，它提到我们可能需要修改映射文件...但没有提到需要更改的内容...有什么看起来在我们的映射文件中告诉我们需要改变什么？我承认，这是我第一次在较低级别使用 NHibernate（实际上是在与 DB 对话）。到目前为止，所有数据库的东西都已经“完成”了......只是现在升级后才出现问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T01:54:52.110

由于`CreateSQLQuery`，顾名思义，执行原始 SQL，我能想到的唯一解释是您连接到错误的数据库。

考虑到您正在使用`?`参数占位符，我知道您没有使用 SQL Server ......所以它可能是一个需要连接字符串之外的数据源配置的数据库。

这打开了我以前见过的选项：使用不同配置文件/注册表项的 32 位和 64 位驱动程序。

# arrays - 在 3D 阵列中找到最深路径的最快方法是什么？

> ID：12978253
> 
> 赞同：10
> 
> 时间：2012-10-19T16:09:32.580
> 
> 标签：arrays, algorithm, 3d

一个多星期以来，我一直在努力寻找解决问题的方法，但我找不到比一百万次迭代 prog 更好的方法，所以我认为是时候请人帮助我了。

我有一个 3D 数组。比方说，我们谈论的是地面，第一层是表面。另一层是地下的地板。我必须找到最深的路径长度、地下孤立洞穴的数量以及最大洞穴的大小。

这是我的问题的可视化。

```
Input:
5 5 5 // x, y, z
xxxxx
oxxxx
xxxxx
xoxxo
ooxxx

xxxxx
xxoxx

and so... 
```

![](../Images/775b837ab77a6e04be90eff5bed11b35.png)

```
Output:
5 // deepest path - starting from the surface
22 // size of the biggest cave
3 // number of izolated caves (red ones) (izolated - cave that doesn't reach the surface) 
```

请注意，即使 2 楼的红色单元格位于绿​​色单元格旁边，它也不是同一个洞穴，因为它是对角放置的，这不算数。有人告诉我，最好的方法是使用递归算法“分而治之”，但我真的不知道它会是什么样子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:27:46.103

我认为你应该能够在 O(N) 中做到这一点。解析输入时，为每个节点分配一个初始化为 0 的“caveNumber”。每当您访问洞穴时，将其设置为有效数字：

```
CaveCount = 0, IsolatedCaveCount=0
AllSizes = new Vector.
For each node, 
   ProcessNode(size:0,depth:0);

ProcessNode(size,depth):
   If node.isCave and !node.caveNumber 
       if (size==0) ++CaveCount
       if (size==0 and depth!=0) IsolatedCaveCount++
       node.caveNumber = CaveCount
       AllSizes[CaveCount]++
       For each neighbor of node, 
            if (goingDeeper) depth++
            ProcessNode(size+1, depth). 
```

在最坏的情况下，您将访问每个节点 7 次：一次来自外部循环，并且可能来自其六个邻居中的每一个。但是你只会对每一个工作一次，因为在那之后就设置了caveNumber，然后你就忽略了它。

您可以通过在递归 ProcessNode 调用中添加深度参数来进行深度跟踪，并且仅在访问较低的邻居时才增加它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T20:45:50.597

下面显示的解决方案（作为 python 程序）在 time 中运行`O(n lg*(n))`，其中`lg*(n)`几乎恒定的迭代日志函数通常与不相交集森林中的联合操作相关联。

在第一次遍历所有单元格时，程序使用名为`makeset(), findset(), link(),`and的例程创建一个不相交集森林，`union()`正如 Cormen/Leiserson/Rivest 第一版第 22.3 节（不相交集森林）中所解释的那样。在以后通过单元格时，它会计算每个不相交森林的成员数量，检查深度等。第一次通过及时运行`O(n lg*(n))`，随后通过及时运行，`O(n)`但通过简单的程序更改，一些通过可以运行`O(c)`或`O(b)`运行c 个洞穴，总共有 b 个细胞。

请注意，下面显示的代码不受上一个答案中包含的错误的影响，其中上一个答案的伪代码包含该行
`if (size==0 and depth!=0) IsolatedCaveCount++`
该行中的错误是与地表相连的洞穴可能有地下上升分支，这另一个答案会错误地添加到其孤立洞穴的总数中。

下面显示的代码产生以下输出：（
`Deepest: 5 Largest: 22 Isolated: 3`
请注意，图中显示的 24 的计数应该是 22，从 4+9+9。）

```
v=[0b0000010000000000100111000,   # Cave map
   0b0000000100000110001100000,
   0b0000000000000001100111000,
   0b0000000000111001110111100,
   0b0000100000111001110111101]
nx, ny, nz = 5, 5, 5
inlay, ncells = (nx+1) * ny,  (nx+1) * ny * nz
masks = []
for r in range(ny):
    masks += [2**j for j in range(nx*ny)][nx*r:nx*r+nx] + [0]
p = [-1 for i in range(ncells)]  # parent links
r = [ 0 for i in range(ncells)]  # rank
c = [ 0 for i in range(ncells)]  # forest-size counts
d = [-1 for i in range(ncells)]  # depths

def makeset(x): # Ref: CLR 22.3, Disjoint-set forests
    p[x] = x
    r[x] = 0
def findset(x):
    if x != p[x]:
        p[x] = findset(p[x])
    return p[x]
def link(x,y):
    if r[x] > r[y]:
        p[y] = x
    else:
        p[x] = y
        if r[x] == r[y]:
            r[y] += 1
def union(x,y):
    link(findset(x), findset(y))

fa = 0                          # fa = floor above
bc = 0                          # bc = floor's base cell #
for f in v:                     # f = current-floor map
    cn = bc-1                   # cn = cell#
    ml = 0
    for m in masks:
        cn += 1
        if m & f:
            makeset(cn)
            if ml & f:
                union(cn, cn-1)
            mr = m>>nx
            if mr and mr & f:
                union(cn, cn-nx-1)
            if m & fa:
                union(cn, cn-inlay)
        ml = m
    bc += inlay
    fa = f

for i in range(inlay):
    findset(i)
    if p[i] > -1:
        d[p[i]] = 0
for i in range(ncells):
    if p[i] > -1:
        c[findset(i)] += 1
        if d[p[i]] > -1:
            d[p[i]] = max(d[p[i]], i//inlay)
isola = len([i for i in range(ncells) if c[i] > 0 and d[p[i]] < 0])
print "Deepest:", 1+max(d), "  Largest:", max(c), "  Isolated:", isola 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-21T15:22:06.383

听起来您正在解决“连接组件”问题。如果您的 3D 数组可以转换为位数组（例如 0 = 基岩，1 = 洞穴，反之亦然），那么您可以应用图像处理中使用的技术来查找前景或背景的数量和尺寸。

通常，此算法应用于 2D 图像以查找相同颜色的“连接组件”或“斑点”。如果可能，找一个“单程”算法：

[http://en.wikipedia.org/wiki/Connected-component_labeling](http://en.wikipedia.org/wiki/Connected-component_labeling)

相同的技术可以应用于 3D 数据。谷歌搜索“连接的组件 3D”将产生如下链接：

[http://www.ecse.rpi.edu/Homepages/wrf/pmwiki/pmwiki.php/Research/ConnectedComponents](http://www.ecse.rpi.edu/Homepages/wrf/pmwiki/pmwiki.php/Research/ConnectedComponents)

一旦算法处理完您的 3D 阵列，您将拥有一个标记的、连接区域的列表，并且每个区域将是一个体素列表（类似于图像像素的体积元素）。然后，您可以分析每个标记区域以确定体积、与表面的接近程度、高度等。

实现这些算法可能有点棘手，您可能想先尝试 2D 实现。认为它可能没有您喜欢的那么高效，您可以通过对每一层迭代地应用 2D 算法然后将连接区域从顶层重新标记到底层来创建 3D 连接组件标记算法：

1.  对于第 0 层，使用 2D 连通分量算法查找所有连通区域
2.  对于第 1 层，找到所有连接区域。
3.  如果第 0 层中的任何标记像素直接位于第 1 层中的标记像素之上，则将第 1 层中的所有标签更改为第 0 层中的标签。
4.  在堆栈中迭代地应用这种标记技术，直到到达第 N 层。

连接组件标记的一个重要考虑因素是如何考虑要连接的区域。在位的 2D 图像（或 2D 数组）中，我们可以考虑相邻元素的“4 连通”区域

```
X 1 X
1 C 1
X 1 X 
```

其中“C”是中心元素，“1”表示将被视为连接的邻居，“X”是我们认为不连接的相邻邻居。另一种选择是考虑“8 连接邻居”：

```
1 1 1
1 C 1
1 1 1 
```

也就是说，与中心像素相邻的每个元素都被认为是连接的。起初，这听起来像是更好的选择。在现实世界的 2D 图像数据中，噪声棋盘图案或单个噪声像素的对角线串将被检测为连通区域，因此我们通常测试 4 连通性。

对于 3D 数据，您可以考虑 6 连接或 26 连接：6 连接仅考虑与中心体素共享完整立方体面的相邻像素，而 26 连接考虑中心体素周围的每个相邻像素。您提到“对角线放置”不算数，因此 6 连接就足够了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T16:27:22.540

您可以将其观察为一个图形，其中（非对角线）相邻元素如果都为空（洞穴的一部分）则它们是连接的。请注意，您不必将其转换为图形，您可以使用普通的 3d 数组表示。

[寻找洞穴与在图中寻找连接的组件](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29)(O(N))的任务相同，洞穴的大小是该组件的节点数。

# jquery - 模态窗口中的 Twitter Bootstrap Datepicker

> ID：12978254
> 
> 赞同：84
> 
> 时间：2012-10-19T16:09:34.147
> 
> 标签：jquery, twitter-bootstrap, datepicker

我目前正在使用 Twitter Bootstrap 框架，并且在使用模式窗口时，我无法通过 js 元素像 datepicker 或验证一样工作，尽管选择和统一渲染正确。请在下面查看我的模态窗口：

```
 <div class="modal hide in" id="newMember" style="display: block; " aria-hidden="false">
        <div class="modal-header">
          <button class="close" data-dismiss="modal" type="button">×</button>
          <h3>New Member Form</h3>
        </div>
        <form accept-charset="UTF-8" action="/players" class="form-horizontal" id="new_user" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"><input name="authenticity_token" type="hidden" value="KdL6cc2Vb53qeMY+PpBUS70myT4HX1uWofMUBolLea8="></div>
          <div class="modal-body">
            <div class="widget-content nopadding">
              <div class="control-group">
                <label class="control-label" for="user_role">Role</label>
                <div class="controls">
                  <select id="user_role" name="user[role]" style="display: none; " class="chzn-done"><option value="">Select member role</option>
                  <option value="1">Player</option>
                  <option value="2">Coach</option>
                  <option value="3">Parent</option>
                  <option value="4">Manager</option>
                  <option value="5">Non-player</option></select><div id="user_role_chzn" class="chzn-container chzn-container-single" style="width: 222px; "><a href="javascript:void(0)" class="chzn-single"><span>Select member role</span><div><b></b></div></a><div class="chzn-drop" style="left: -9000px; width: 220px; top: 0px; "><div class="chzn-search" style=""><input type="text" autocomplete="off" style="width: 212px; "></div><ul class="chzn-results"><li id="user_role_chzn_o_0" class="active-result result-selected" style="">Select member role</li><li id="user_role_chzn_o_1" class="active-result" style="">Player</li><li id="user_role_chzn_o_2" class="active-result" style="">Coach</li><li id="user_role_chzn_o_3" class="active-result" style="">Parent</li><li id="user_role_chzn_o_4" class="active-result" style="">Manager</li><li id="user_role_chzn_o_5" class="active-result" style="">Non-player</li></ul></div></div>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="user_full_name">Full name</label>
                <div class="controls">
                  <input id="user_first_name" name="user[first_name]" placeholder="First Name" size="30" type="text">
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="user_last_name">Last name</label>
                <div class="controls">
                  <input id="user_last_name" name="user[last_name]" placeholder="Last Name" size="30" type="text">
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="user_email">Email</label>
                <div class="controls">
                  <input id="user_email" name="user[email]" placeholder="Email Address" size="30" type="text">
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="user_date_of_birth">Date of birth</label>
                <div class="controls">
                  <input class="datepicker" data-date-format="dd/mm/yyyy" id="user_dob" name="user[dob]" placeholder="dd/mm/yyyy" readonly="readonly" size="30" type="text">
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="user_gender">Gender</label>
                <div class="controls">
                  <select id="user_gender" name="user[gender]" style="display: none; " class="chzn-done"><option value="">Select gender</option>
                  <option value="Male">Male</option>
                  <option value="Female">Female</option></select><div id="user_gender_chzn" class="chzn-container chzn-container-single" style="width: 222px; "><a href="javascript:void(0)" class="chzn-single"><span>Select gender</span><div><b></b></div></a><div class="chzn-drop" style="left: -9000px; width: 220px; top: 0px; "><div class="chzn-search" style=""><input type="text" autocomplete="off" style="width: 212px; "></div><ul class="chzn-results"><li id="user_gender_chzn_o_0" class="active-result result-selected" style="">Select gender</li><li id="user_gender_chzn_o_1" class="active-result" style="">Male</li><li id="user_gender_chzn_o_2" class="active-result" style="">Female</li></ul></div></div>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="user_team">Team</label>
                <div class="controls">
                  <select id="user_team_id" name="user[team_id]" style="display: none; " class="chzn-done"><option value="">None</option>
                  <option value="4">Metro 3 East</option>
                  <option value="1">State League 3</option>
                  <option value="2">State League 4</option>
                  <option value="3">Metro 3 South</option>
                  <option value="5">Pennant E</option>
                  <option value="6">Under 9 White</option>
                  <option value="7">Under 9 Navy</option>
                  <option value="8">Under 13 Pennant South East</option>
                  <option value="9">Under 17 Pennant South East</option>
                  <option value="10">Under 15 South (1)</option>
                  <option value="11">Under 11 Pennant South East</option>
                  <option value="12">Under 11 South</option></select><div id="user_team_id_chzn" class="chzn-container chzn-container-single" style="width: 222px; "><a href="javascript:void(0)" class="chzn-single"><span>None</span><div><b></b></div></a><div class="chzn-drop" style="left: -9000px; width: 220px; top: 0px; "><div class="chzn-search" style=""><input type="text" autocomplete="off" style="width: 212px; "></div><ul class="chzn-results"><li id="user_team_id_chzn_o_0" class="active-result result-selected" style="">None</li><li id="user_team_id_chzn_o_1" class="active-result" style="">Metro 3 East</li><li id="user_team_id_chzn_o_2" class="active-result" style="">State League 3</li><li id="user_team_id_chzn_o_3" class="active-result" style="">State League 4</li><li id="user_team_id_chzn_o_4" class="active-result" style="">Metro 3 South</li><li id="user_team_id_chzn_o_5" class="active-result" style="">Pennant E</li><li id="user_team_id_chzn_o_6" class="active-result" style="">Under 9 White</li><li id="user_team_id_chzn_o_7" class="active-result" style="">Under 9 Navy</li><li id="user_team_id_chzn_o_8" class="active-result" style="">Under 13 Pennant South East</li><li id="user_team_id_chzn_o_9" class="active-result" style="">Under 17 Pennant South East</li><li id="user_team_id_chzn_o_10" class="active-result" style="">Under 15 South (1)</li><li id="user_team_id_chzn_o_11" class="active-result" style="">Under 11 Pennant South East</li><li id="user_team_id_chzn_o_12" class="active-result" style="">Under 11 South</li></ul></div></div>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="user_mobile">Mobile</label>
                <div class="controls">
                  <input id="user_mobile" maxlength="10" name="user[mobile]" placeholder="i.e 0421813529" size="10" type="tel">
                  <span class="help-block">
                    <input name="user[private_mobile]" type="hidden" value="0"><div class="checker" id="uniform-user_private_mobile"><span><div class="checker" id="uniform-user_private_mobile"><span><input id="user_private_mobile" name="user[private_mobile]" type="checkbox" value="1" style="opacity: 0; "></span></div></span></div>
                    <a href="javascript:void(0)" class="tip-bottom" data-original-title="Normally, all members of the team can see this information. If you don't want teammates to see this information, just click this checkbox. (Note: Team managers will always see this information.)">Private</a>
                  </span>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="user_manager_access">Manager access</label>
                <div class="controls">
                  <input name="user[manager]" type="hidden" value="0"><div class="checker" id="uniform-user_manager"><span><div class="checker" id="uniform-user_manager"><span><input id="user_manager" name="user[manager]" type="checkbox" value="1" style="opacity: 0; "></span></div></span></div>
                </div>
              </div>
              <div class="control-group">
                <label class="control-label" for="user_admin_access">Admin access</label>
                <div class="controls">
                  <input name="user[admin]" type="hidden" value="0"><div class="checker" id="uniform-user_admin"><span><div class="checker" id="uniform-user_admin"><span><input id="user_admin" name="user[admin]" type="checkbox" value="1" style="opacity: 0; "></span></div></span></div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <div class="pull-right">
              <input class="btn btn-primary" name="commit" type="submit" value="Create User">
              <a class="btn btn-danger" data-dismiss="modal" href="#">Cancel</a>
            </div>
          </div>
        </form>
      </div> 
```

* * *

## 回答 #1

> 赞同：245
> 
> 时间：2013-03-03T08:17:14.920

在类 datepicker 中添加高于 1051 的 z-index

在页面或 css 中添加类似的内容

```
<style>
.datepicker{z-index:1151 !important;}
</style> 
```

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2013-09-18T11:47:51.570

对我来说，它只适用于 !important 在 css

```
.datepicker {z-index: 1151 !important;} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-09-12T08:26:33.573

我用：

```
body.modal-open .datepicker {
    z-index: 1200 !important;
} 
```

这样：如果模式**未**打开，并且您希望日期选择器处于正常的 z-index （在我的情况下，我需要它位于菜单下拉菜单下，其 z-index 为 1000），有用。

如果模态**打开**，日期选择器需要超过模态 z-index（1040 或 1050），所以使用`body.modal-open`选择器。

我正在使用 Bootstrap 3.1.1

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-07-21T11:23:30.013

根据[http://www.daterangepicker.com/](http://www.daterangepicker.com/)（选项）

```
$('#dispatch_modal').on('shown.bs.modal', function() {
     $('input:text:visible:first').focus();
     // prepare datepicker
     $('.form_datepicker').daterangepicker({
          singleDatePicker: true,
          showDropdowns: true,
          parentEl: '#dispatch_modal'   
     });
}); 
```

`

parentEl 解决了我的问题...

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-02-08T19:56:11.663

在类 ui-datepicker 中添加 z-indez

```
<style>
    .ui-datepicker{ z-index:1151 !important; }
</style> 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-10-22T10:39:43.580

正如[mccannf](https://stackoverflow.com/users/1736297/mccannf)在[他的评论](https://stackoverflow.com/questions/12978254/twitter-bootstrap-datepicker-within-modal-window/13009680#comment17631568_12978254)中所说：

我建议你看看你的引导 CSS 和 JS。您的模态被设置为非常高的 z-index 值 (99999)。把我上面的jsfiddle和你的比较一下

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-04-15T17:45:03.117

试试这段代码。

`.ui-datepicker{ z-index:1151 !important; }`

当您使用**bootstrap V3时将解决问题**

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-11-20T13:43:07.123

我认为最好更改插件中的逻辑功能。在第 552 行附近我改变了这个：

```
 var zIndex = parseInt(this.element.parents().filter(function(){
                return $(this).css('z-index') !== 'auto';
            }).first().css('z-index'))+10; 
```

进入这个：

```
 var zIndex = parseInt(this.element.parents().filter(function(){
                return $(this).css('z-index') !== 'auto';
            }).first().css('z-index')) + 10 * 1000; //think is enought 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-02-25T13:34:34.197

我有这个错误，因为我滚动底部。日期选择器的顶部位置错误已修复。我现在就像这样使用它：

```
$('#myModal').on('show.bs.modal', function (e) {
            $(document).scrollTop(0);
}); 
```

现在它工作正常。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-03-18T09:32:07.613

你能改变你的css文件吗`bootstrap-timepicker/css/bootstrap-timepicker.css`

从

```
.bootstrap-timepicker-widget.dropdown-menu.open {
  display: inline-block;
} 
```

到

```
.bootstrap-timepicker-widget.dropdown-menu.open {
  display: inline-block;
  z-index:1151;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-10-19T12:04:47.810

如果你使用 bootstrap V3 试试这个。

```
 .bootstrap-datetimepicker-widget 
    {
        z-index: 1200   !important;
    } 

```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-03-10T02:11:12.973

```
$('#effective_to').datepicker({
    dateFormat: "dd-mm-yyyy",
    changeMonth: true,
    changeYear: true,
    beforeShow: function() { 
        $('#ui-datepicker-div').addClass('datepicker');
    }
}); 
```

CSS

```
.datepicker {
    z-index: 100000 !important;
    display: block;
} 
```

这对我有用。即使我通过 ajax 调用模型

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-08-27T21:31:54.233

对于 Bootstrap 3.x 和 Ace 模板[wrapbootstrap](https://wrapbootstrap.com/theme/ace-responsive-admin-template-WB0B30DGR)

模态框内的日期选择器和时间选择器

```
<style>
    body.modal-open .datepicker {
        z-index: 1050 !important;
    }
    body.modal-open .bootstrap-timepicker-widget {
        z-index: 1050 !important;
    }
</style> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-07-13T12:47:34.510

这个解决方案非常适合我在引导模式之上呈现日期选择器。

[http://jsfiddle.net/cmpgtuwy/654/](http://jsfiddle.net/cmpgtuwy/654/)

HTML

```
<br/>
<div class="wrapper">
Some content goes here<br />
Some more content.
<div class="row">
<div class="col-xs-4">

<!-- padding for jsfiddle -->
<div class="input-group date" id="dtp">
<input type="text" class="form-control" />  
<span class="input-group-addon">
  <span class="glyphicon-calendar glyphicon"></span>
</span>
</div>
</div>
</div>
</div> 
```

Javascript

```
$('#dtp').datetimepicker({
format: 'MMM D, YYYY',
widgetParent: 'body'});

$('#dtp').on('dp.show', function() {
      var datepicker = $('body').find('.bootstrap-datetimepicker-widget:last');
      if (datepicker.hasClass('bottom')) {
        var top = $(this).offset().top + $(this).outerHeight();
        var left = $(this).offset().left;
        datepicker.css({
          'top': top + 'px',
          'bottom': 'auto',
          'left': left + 'px'
        });
      }
      else if (datepicker.hasClass('top')) {
        var top = $(this).offset().top - datepicker.outerHeight();
        var left = $(this).offset().left;
        datepicker.css({
          'top': top + 'px',
          'bottom': 'auto',
          'left': left + 'px'
        });
      }
    }); 
```

CSS

```
.wrapper {
height: 100px;
overflow: auto;}
body {
position: relative;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-01-29T15:51:59.297

尝试将 z-index 值更改为`.modal`小于`.modal-backdrop`z `.datepicker`-index 值。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-11-20T05:09:33.757

对于 BootsTrap 日历，请使用此

/*日历索引 CSS* /

```
.bootstrap-datetimepicker-widget {
   z-index:99999 !important;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-02-23T09:29:11.747

尝试使用它对我有用的代码。顺便说一句，它来自这个网站 [https://github.com/eternicode/bootstrap-datepicker/issues/464](https://github.com/eternicode/bootstrap-datepicker/issues/464) 。

```
$('#datepicker').datepicker().on('show', function () {
                var modal = $('#datepicker').closest('.modal');
                var datePicker = $('body').find('.datepicker');
                if (!modal.length) {
                    $(datePicker).css('z-index', 'auto');
                    return;
                }
                var zIndexModal = $(modal).css('z-index');
                $(datePicker).css('z-index', zIndexModal + 1);
            }); 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-06-19T19:00:30.813

嗯。死灵但仍然。

为了 `<link href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css" rel="stylesheet">`

我需要

```
<style type="text/css">
.ui-timepicker-container {z-index: 1151 !important;}
</style> 
```

在文档的 HEAD 中接受覆盖

在诉诸于此之前，我在这里尝试了大多数其他解决方案。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-07-29T14:27:04.827

```
// re initialze datepicker
$(".bootstrap-datepicker").bsdatepicker({
    format: "yyyy-mm-dd",
    autoclose: true,
}).on('changeDate', function (ev) {
    $(this).bsdatepicker('hide');
});
//
$(".dropdown-menu").css({'z-index':'1100'}); 
```

* * *

## 回答 #20

> 赞同：-1
> 
> 时间：2013-11-24T05:40:44.007

试试这个

```
#ui-datepicker-div {
  z-index: 100000;
} 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2015-10-19T09:05:43.417

让我来帮助你，

你可以更新你的 bootstrap.min.css

在类下拉菜单中，您可以将 z-index 值更改为 2000

所以日期选择器会出现

* * *

## 回答 #22

> 赞同：-1
> 
> 时间：2018-09-24T18:22:11.060

将你的数据选择器 JavaScript 代码包装在里面

```
function pageLoad() {} 
```

# enterprise-library - Enterprise Library 4.1 应用程序和 Enterprise Library 5 应用程序在同一台服务器上运行？

> ID：12978258
> 
> 赞同：0
> 
> 时间：2012-10-19T16:10:06.010
> 
> 标签：enterprise-library

某些应用程序使用 EL 4.1 和某些 5 是否有任何问题？这意味着如果我决定一个新应用程序将使用 5.0 并且现有的大多数 Web 应用程序都使用 4.1，那么当我部署到生产环境时，甚至在任何情况下，如果您的应用程序使用不同版本，是否会出现冲突或问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:21:25.273

您不能在*同一个*应用程序中使用多个版本，但我从来没有遇到过在单独的应用程序中使用多个版本的企业库的问题。我能想到的只有一件事你可能需要注意。如果任何使用新版本的 Web 应用程序是另一个使用旧版本的子应用程序，您可能会因为配置继承而遇到一些问题。

# git - 如何使用 git-subtree 进行特定提交？

> ID：12978260
> 
> 赞同：11
> 
> 时间：2012-10-19T16:10:15.653
> 
> 标签：git, cherry-pick, git-subtree

我正在使用 Avery Pennarun 的 git-subtree，它是 git 的扩展。

如何使用 git subtree 从子仓库中挑选提交到我的主仓库中？另外，在我已经对该前缀执行 git subtree pull 之后，如何转到子仓库历史记录中的特定提交？

我主要在壁球提交模式下运行它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T01:08:18.653

> 我如何进入子回购历史中的特定提交？

如果你已经压缩了提交，那么就没有办法了，因为 squash 会丢失不同的提交。

否则，使用未压缩的子树，您可以导航到子树的任何提交，其哈希值与创建子树的原始存储库中的哈希值相同。

`git subtree`（没有壁球）实际上将来自外部存储库的所有相关提交作为当前存储库中的独立树添加到您的存储库中。当您执行 a 时，`git subtree add`您会注意到添加了几个提交（来自外部存储库的所有原始提交）和最后一个合并提交，它将内容从该子树移动到使用该`--prefix`选项指定的给定目录。简而言之，它从另一个不相关的存储库中签出一个分支，然后通过将所有内容移动到给定的子文件夹中将其合并到您当前的分支中。

这意味着您可以使用外部回购的历史记录，您可以像这样签出它，请记住，作为一个完全不同的树，这个签出可能会修改您工作区的所有内容，这在大项目可能很长。

这使我们进入第二个：

> 如何使用 git subtree 从子仓库中挑选提交到我的主仓库中？

似乎目前没有`git subtree`自己支持的“樱桃采摘”。但是考虑到上述所有的含义，可以做到以下几点。

```
# move yourself to the subtree commit of your choice
git checkout <subtree-hash>

# fetch commits from the subtree repository, to have available the commit you want
# to cherry pick.
git fetch <path-to-remote>

# cherry pick the hash you want
git cherry-pick <cherry-hash>

# move back to your original branch
git checkout <your-branch>

# subtree merge your cherry pick (using the previous HEAD),
# so that it gets moved to the correct location specified by prefix.
git subtree merge --prefix <subtree-prefix> HEAD@{1}

# Since you probably fetched more commits that you needed from
# the remote, you might want to clean those that where not needed
git gc 
```

考虑到这样做之后，如果您尝试`git subtree pull`对子树进行更新，并且它包括您挑选的提交，您将以冲突结束，因为您将在同一个地方进行两次更改。

如果您可以访问原始子树存储库，另一个更简单的选择是在一个分支中选择樱桃，然后只`git subtree pull`选择那个特定的分支。

# jquery - 使用 jquery 使用数据属性设置选择选项

> ID：12978265
> 
> 赞同：0
> 
> 时间：2012-10-19T16:10:25.480
> 
> 标签：jquery, attributes, option

[http://medfor.petersenuploads.co.uk/product.php/698/2/clear-ps-honey-jar-with-metal-screw-cap](http://medfor.petersenuploads.co.uk/product.php/698/2/clear-ps-honey-jar-with-metal-screw-cap)

单击“全价”选项卡并“添加”选项之一。这应该设置下面选择框的值，但它不会改变。该事件正确触发但未更改所选项目。

这可能是数据类型问题吗？

```
$('a.addspecific').live(
    'click', function(e) {
        e.preventDefault();
        //console.log($(this).data('sterility'));
        console.log("IN");
        //Update dropdowns for JShop functionality
        $('#capacity').find("option").filter(function() {
            return $(this).text() == $(this).data('capacity');  
        }).attr('selected',true);
        console.log($(this).data('capacity'));
        $('#sterility').find("option").filter(function() {
            return $(this).text() == $(this).data('sterility');  
        }).attr('selected',true);
        console.log($(this).data('sterility'));
        $('#labeltype').find("option").filter(function() {
            return $(this).text() == $(this).data('labeltype');  
        }).attr('selected',true);
        console.log($(this).data('labeltype'));
        $('#itemspercase').find("option").filter(function() {
            return $(this).text() == $(this).data('itemspercase');  
        }).attr('selected',true);
        console.log($(this).data('itemspercase'));
        console.log("OUT");

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:39:58.410

这个上下文是失败的，试试吧：

```
console.log("IN");
var thes = this;

$('#capacity').find("option").filter(function() {
     return $(this).text() == $(thes).data('capacity');  
}).attr('selected',true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:14:20.510

代替

```
.attr('selected',true); 
```

尝试使用

```
.prop('selected',true); 
```

# java - 是否可以直接从 MyBATIS 获取 XMLGregorianCalendar？

> ID：12978272
> 
> 赞同：2
> 
> 时间：2012-10-19T16:10:47.987
> 
> 标签：java, mybatis

我使用公共 StackOverflow 转储并将所有内容存储在 MySQL 中。现在，我想使用 Java 和 MyBATIS 执行一些分析。对于其中一些，我需要为用户或特定问题等提取时间序列。因此，让我们说帖子及其时间戳，我有一个 MyBatis 查询：

```
 <select id="GetAllPostsTimeStamps" resultType="java.util.Date">
     SELECT creationDate from posts
 </select> 
```

它将时间戳数据交给 MyBatis ResultHandler，我在其中进行转换：

```
@Override
public void handleResult(ResultContext context) {
   TimeZone tz = TimeZone.getTimeZone("UTC");
   TimeZone.setDefault(tz);
   Date tstamp = (Date) context.getResultObject();
   XMLGregorianCalendar xmlTstam = Tstamp.makeTimestamp(tstamp.getTime());
   ...etc...
} 
```

我真的需要使用`XMLGregorianCalendar`，因为我所有的下游逻辑都依赖于这种类型。

是否可以用它的处理程序特性告诉 MyBatis 在内部进行 SQL 日期时间到 XMLGregorianCalendar 的转换（即我将只编写一次处理程序），所以我每次需要时都会从中得到正确的时间戳？

编辑以增加清晰度。

因此，当我将带有字段的 java 对象保存`XMLGregorianCalendar`到 DB（MySQL 日期时间类型）时，我使用了 MyBatis 处理程序的实现：

```
XMLGregorianCalendarDateTypeHandler implements TypeHandler<XMLGregorianCalendar>
... 
```

我在这样的`INSERT`查询中指定：

```
 ..., #{creationDate,
           javaType=javax.xml.datatype.XMLGregorianCalendar,
           jdbcType=TIMESTAMP,                
           typeHandler=...XMLGregorianCalendarTypeHandler},... 
```

有没有办法为`SELECT`类型查询指定反向转换处理程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T17:57:43.667

我发现它为什么不起作用，也许它会帮助某人：

因此，当我配置指定两种类型的处理程序时：JDBC 和 Java，这不起作用：

```
<typeHandler javaType="javax.xml.datatype.XMLGregorianCalendar" 
      jdbcType="TIMESTAMP"
      handler="my.package.XMLGregorianCalendarTimestampTypeHandler" /> 
```

但是，如果我只指定 Java 类型，它就可以工作。魔法：

```
<typeHandler javaType="javax.xml.datatype.XMLGregorianCalendar" 
      handler="my.package.XMLGregorianCalendarTimestampTypeHandler" /> 
```

不确定这是错误还是功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:55:30.993

我不知道 MyBatis，但这会有帮助吗？

```
DatatypeFactory factory = DatatypeFactory.newInstance();
XMLGregorianCalendar calendar = factory.newXMLGregorianCalendar();
calendar.setMillisecond(tstamp.getTime()); 
```

# collision-detection - 完全在另一个对象内的对象的 Unity 3D 碰撞检测

> ID：12978276
> 
> 赞同：1
> 
> 时间：2012-10-19T16:11:01.623
> 
> 标签：collision-detection, unity3d

我现在正在做一个游戏项目，我对统一的碰撞检测系统感到困惑。

似乎当一个物体完全在另一个物体内时，比如一个小胶囊在一个大盒子里，引擎不会产生碰撞信息。

有没有办法检测这种碰撞？

另外，使用 isTrigger 和 isKinematic 有什么区别？在我看来，他们似乎在做同样的事情，所以我认为我需要对差异进行更多解释。（除了函数调用的差异：OnTriggerEnter 和 OnCollisionEnter）

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:21:22.027

我得到了它。对于这种碰撞，我们应该使用 OnTriggerStay 或 OnCollisionStay，而不是使用 OnTriggerEnter 或 OnCollisionEnter

# hibernate - MultiKey FK 在使用 Hibernate 的子插入中失败

> ID：12978278
> 
> 赞同：1
> 
> 时间：2012-10-19T16:11:07.913
> 
> 标签：hibernate, foreign-keys, multikey

我得到了以下代码，问题是子 Mmt 没有用 mmt.setMapMovAnomes(miMapMovAnomes) 填充 FK 如果我签入调试，对象 mmt，将数据放入父属性 MapMovAnomes，那么你不会出现任何错误，但如果您签入数据库，则 FK 字段为空。

```
@Test
public void creaMmt()
{
    Transaction tx = null
    Date fecha = getFecha("2012-12-09")
    Integer anho = fecha.year + 1900
    Integer mes = fecha.month
    Integer anomes = anho * 100 + mes
    Integer idmap = 10000
    Mmt mmt = new Mmt()
    MapMovAnomes miMapMovAnomes = new MapMovAnomes()
    Session session = staticFactory.getCurrentSession();
    tx = session.beginTransaction()

    Map miMap = session.get (Map.class, idmap)
        MapMovAnomesId mId = new MapMovAnomesId()
        mId.setAnho(anho)
        mId.setMes(mes)
        mId.setIdMap(idmap)
        miMapMovAnomes.setId(mId)
        miMapMovAnomes.setMap(miMap)
        session.save miMapMovAnomes
    mmt.setMapMovAnomes(miMapMovAnomes)
    mmt.setFechMovimiento(fecha)
    mmt.setCantidad(100)
    mmt.setClaveES("E")
    session.save mmt
    miMapMovAnomes.addMmt(mmt)

    tx.commit();
} 
```

mmt的POJO中的关系

```
 @ManyToOne(fetch = FetchType.LAZY)
@JoinColumns({
        @JoinColumn(name = "id_map", referencedColumnName = "id_map", insertable = false, updatable = false),
        @JoinColumn(name = "anho", referencedColumnName = "anho", insertable = false, updatable = false),
        @JoinColumn(name = "mes", referencedColumnName = "mes", insertable = false, updatable = false) })
public MapMovAnomes getMapMovAnomes() {
    return this.mapMovAnomes;
}

public void setMapMovAnomes(MapMovAnomes mapMovAnomes) {
    this.mapMovAnomes = mapMovAnomes;
} 
```

我还有以下关系： map -> mapMovAnomes 和 map -> mmt

```
@OneToMany(fetch = FetchType.LAZY, mappedBy = "map")
public Set<MapMovAnomes> getMapMovAnomeses() {
    return this.mapMovAnomeses;
}

public void setMapMovAnomeses(Set<MapMovAnomes> mapMovAnomeses) {
    this.mapMovAnomeses = mapMovAnomeses;
}

@OneToMany(fetch = FetchType.LAZY, mappedBy = "map")
public Set<Mmt> getMmts() {
    return this.mmts;
}

public void setMmts(Set<Mmt> mmts) {
    this.mmts = mmts;
} 
```

我发现问题在于我有 map->MapMovAnomes -> mmt 和 map-> mmt，然后如果我取消关系 map->mmt，它工作正常，但是如何才能保持这种关系.

# java - App Engine - 部署新版本错误 500（由于会话）

> ID：12978280
> 
> 赞同：0
> 
> 时间：2012-10-19T16:11:15.370
> 
> 标签：java, google-app-engine

当我将新版本部署到 App Engine 时，用户的会话仍将处于活动状态，因此如果在会话对象中附加了一些更改，则会触发错误 500。

所以要解决这个问题，我必须使用 jsessionid 删除我的 cookie。

如果部署了新版本，我正在寻找一种注销所有用户的方法，就像实际上您将在开发环境中执行此操作一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:17:12.450

正确的方法是让新版本的代码检查会话并验证它是新会话，否则，优雅地失败并重置会话对象。

# c - 尝试在 C 中复制数组时的字符串连接

> ID：12978284
> 
> 赞同：2
> 
> 时间：2012-10-19T16:11:29.900
> 
> 标签：c, arrays, string

我对在我的程序中导致这种行为的原因感到困惑。我只是想将一个`char*`数组的内容复制到另一个数组，而不是复制元素，但它以一种奇怪的方式连接字符串。我正在做这样的事情：

```
char* a[50]; 
char* b[50];

for(int n=0; n<x; n++){
    a[n] = malloc(sizeof(char) * (1 + strlen(b[n])));
    strcpy(a[n], b[n]);
} 
```

有谁之前经历过这个吗？如果有帮助，我可以发布我的输出。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:34:17.953

几个问题：

你循环 while `n < x`。是什么`x`？如果`x >= 50`，您将用完数组的末尾。您的循环条件需要防止这种可能性。

另外，请记住，返回的内存`malloc`是未初始化的。最好为 NULL 终止符分配一个额外的字节。您缺少的是实际设置 NULL 终止符值的代码。这样做的结果是您的`a[]`字符串很可能不是以 NULL 结尾的（最后一个字符是先前存储在该字节中的任何随机垃圾）。当您尝试将它们打印出来或使用类似的字符串函数`strlen`时，您将读取字符串末尾的内容，并读取恰好位于随后的内存范围内的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:34:43.477

尝试使用 strncpy，请注意您在 a[n] 的末尾添加了空终止字符，这样您就可以肯定知道您要复制的内容，而不是依赖于 b[n] 具有空终止字符的假设。

# c# - 防止返回按钮

> ID：12978285
> 
> 赞同：10
> 
> 时间：2012-10-19T16:11:32.360
> 
> 标签：c#, asp.net-mvc, razor, back-button

我在带有 C# 的 ASP.NET MVC 上使用 Razor。

我正在调用外部网页来处理信用卡，它会返回给我。然后我显示收据。

我想阻止他们返回上一个屏幕。

我没有像 asp 这样的底层 cs 页面，因为这些是 .cshtml 文件来获取事件。

这个收据页面是一个视图，所以我不能将 JavaScript 放在标题中，因为它会影响使用它的每个页面。

有谁知道在这种情况下我如何防止后退按钮？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-19T16:13:14.780

一种可能性是从客户端缓存中排除您不想返回的页面。这可以通过设置正确的响应标头来完成。这是一个带有[`[NoCache]`](https://stackoverflow.com/a/1705113/29407)自定义操作过滤器的示例，您可以使用它来装饰相应的控制器操作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T16:14:04.870

首先，如果之前的页面已经向服务器投递了数据，最好`Redirect(...)`在处理成功后进行另一个动作，避免在“刷新”时重新提交数据。

然后还要设置页面过期，所以后退按钮不起作用：

[https://stackoverflow.com/a/5352953/864763](https://stackoverflow.com/a/5352953/864763)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T16:44:10.457

你问错问题了。不要尝试在客户端禁用“返回”。这注定会失败；你也许可以让它变得更难，但你永远不会赢得那场战斗。相反，您应该重新编写您拥有的特定页面，以便它只会处理信用卡一次。你应该（在服务器上）“记住”你已经处理了信用卡，这样如果用户返回页面重新提交它，你可以给他们一个错误消息，说“你已经提交了这个信息，你不能提交此请求两次”。

现在，有几种方法可以实现这一总体目标，有些方法比其他方法更好，但这是您需要努力实现的目标。

一种方法是转到将用户重定向到此信用卡表单的每个页面；就在提交请求之前向该用户的会话添加一些内容（即`"pendingCreditCardSubmission" = true`）一旦他们提交了该请求，您就检查该会话变量。如果为真，则提交请求并将其设置为假，如果为假或不存在，则向用户发送错误消息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-30T19:13:47.860

这就是我们的做法：

```
public class NoBackFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        filterContext.HttpContext.Response.ExpiresAbsolute = DateTime.Now;
        filterContext.HttpContext.Response.Expires = 0;
        filterContext.HttpContext.Response.CacheControl = "no-cache";
        filterContext.HttpContext.Response.Buffer = true;
        filterContext.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        filterContext.HttpContext.Response.Cache.SetExpires(DateTime.UtcNow);
        filterContext.HttpContext.Response.Cache.SetNoStore();
        filterContext.HttpContext.Response.Cache.SetRevalidation(HttpCacheRevalidation.AllCaches);
        if (!filterContext.HttpContext.Request.IsAjaxRequest() && filterContext.HttpContext.Request.HttpMethod != "POST" && !filterContext.Controller.ControllerContext.IsChildAction)
        {
            var after = filterContext.HttpContext.Request.RawUrl;
            var session = GetSession(filterContext);
            if (session["Current"] != null)
            {

                if (session["Before"] != null && session["Before"].ToString() == after)
                    filterContext.HttpContext.Response.Redirect(session["Current"].ToString());
                else
                {
                    session["Before"] = session["Current"];
                    session["Current"] = after;
                }
            }
            else
            {
                session["Current"] = after;
            }
        }
        base.OnActionExecuting(filterContext);

    }

    private HttpSessionStateBase GetSession(ActionExecutingContext context)
    {
        return context.HttpContext.Session;
    }

} 
```

在此之后，您可以在通用范围或控制器范围内实现它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-09T18:32:21.033

很久没有问这个问题了，但我的解决方法是在 WebPageController 类上方添加 [NoCache]。

```
 [NoCache]
public class WebPageController : Controller
{
    public JsonResult JsonError(Exception exception)
    {
        if (exception == null) throw new ArgumentNullException("exception");

        Response.StatusCode = 500;

        return new JsonResult
        {
            JsonRequestBehavior = JsonRequestBehavior.AllowGet,
            Data = new
            {
                error = true,
                success = false,
                message = exception.Message,
                detail = exception.ToString()
            }
        };
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-29T23:50:39.977

在 MVC aspnet 框架中，您可以选择`RedirectToActionPermanent`

然后它告诉浏览器 301 响应代码。

[https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.controllerbase.redirecttoactionpermanent?view=aspnetcore-5.0](https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.controllerbase.redirecttoactionpermanent?view=aspnetcore-5.0)

# excel - vba中的excel组合和选项

> ID：12978286
> 
> 赞同：1
> 
> 时间：2012-10-19T16:11:41.613
> 
> 标签：excel, combinations, options, vba

我将首先描述我的 excel 文件的外观以及我想要做什么。首先想象一些组合，让我们从一个例子开始，这是我的A栏：

```
A
B
C
D
AB
AC
AD
BC
BD
CD
ABC
..

..
..
ABCD 
```

我希望每个人都明白这一点。我想做的是在 VBA 中编写一个代码来执行以下操作。例如，如果我要选择 A，那么我的选项将是：B、C、D 或 BC、D 或 BD、C 或 CD、B 或 BCD.......等等。这样我会得到很多可能性。我希望我的 VBA 将其放置在下一张表中，然后放在列中，因此它将它们彼此相邻放置，以便可见....

我想这样做的不仅仅是 A 到 D，而是整个专栏中的内容，因此请探索所有选项。我知道如果我有 A 到 D 它是 5 个变量，因此等式是 2^4 -1 个选项。但是当 4 增加到可能的 50 时，应该仍然可以放置所有选项。

有人可以帮助我使用此代码或为我指明正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:17:23.363

我编写了一个类来处理处理二项式系数的常用函数，这是您的问题所属的问题类型。它执行以下任务：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。这种方法使得解决这类问题变得非常简单。

2.  将 K 索引转换为已排序二项式系数表中条目的正确索引。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形固有的数学属性来做到这一点。我的论文谈到了这一点。我相信我是第一个发现并发表这种技术的人，但我可能是错的。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。我相信它可能比您找到的链接更快。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可执行上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经用 2 个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

您可能可以从您的 vba 程序中调用我的课程，因此它可能不需要转换为 vba。另一方面，如果您确实需要隐藏它（因为它是一个泛型类并且 vba 可能无法使用 com interop 处理它），那么它不应该是非常简单的。

您的问题的解决方案涉及为每个 N 选择 K 案例生成 K 索引。因此，在上面的示例中，N（A、B、C、D）有 4 种可能性，代码（在 C# 中）看起来像这样：

```
int TotalColumns = 4;
int N = TotalColumns;
// Loop thru all the possible groups of combinations.
for (int K = N - 1; K < N; K++)
{
   // Create the bin coeff object required to get all
   // the combos for this N choose K combination.
   BinCoeff<int> BC = new BinCoeff<int>(N, K, false);
   int NumCombos = BinCoeff<int>.GetBinCoeff(N, K);
   int[] KIndexes = new int[K];
   // Loop thru all the combinations for this N choose K case.
   for (int Combo = 0; Combo < NumCombos; Combo++)
   {
      // Get the k-indexes for this combination, which in this case
      // are the indexes to each column starting with zero.
      BC.GetKIndexes(Loop, KIndexes);
      // Do whatever processing that needs to be done with the indicies in KIndexes.
      ...
   }
   // Handle the final combination which in this case is ABCD since since K < N.
   ...
} 
```

# networking - Windows 7：使用已编译的 .exe 文件“输入”网络密码并绕过“输入密码网络”对话框

> ID：12978288
> 
> 赞同：0
> 
> 时间：2012-10-19T16:11:59.180
> 
> 标签：networking, password-protection

我有一个关于使用密码保护访问某些网络资源的问题。

我已经可以使用我的私人登录名/密码访问网络。每次在干净的 Windows 系统上打开网络资源时，我都必须在相应的字段中输入登录名/密码。

我的问题是关于 C# 函数/库，它可以帮助在 .exe 文件中使用我的登录名/密码来绕过“输入密码网络”对话框。

[http://i.stack.imgur.com/Ym7zz.png](http://i.stack.imgur.com/Ym7zz.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:50:01.477

您可以为此使用[WNetAddConnection3](http://msdn.microsoft.com/en-us/library/windows/desktop/aa385418%28v=vs.85%29.aspx)。但是请注意，这意味着您会将密码保存到文件中。它将在源文件和生成的可执行文件中可读。

# azure - 可以在 SQL Azure 数据库实例上安装链接服务器提供程序吗？

> ID：12978290
> 
> 赞同：1
> 
> 时间：2012-10-19T16:12:09.180
> 
> 标签：azure, azure-sql-database

是否可以在 SQL Azure 数据库实例（即底层主机操作系统）上安装驱动程序，以便可以安装具有特定提供程序的链接服务器？

（我假设可以在 SQL Azure 数据库实例上创建链接服务器）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:14:10.867

不。您可以在 Windows Azure SQL 数据库 (WASD) 实例上安装任何内容。

WASD 的唯一“链接服务器”选项是当您将 WASD 作为链接服务器添加到本地 SQL Server 时。

[您可以在此处](http://blogs.msdn.com/b/windowsazure/archive/2012/09/19/announcing-updates-to-windows-azure-sql-database.aspx)阅读有关 WASD 最新更新的更多信息。

# asp.net - asp.net - 全局使用的公共静态函数

> ID：12978292
> 
> 赞同：2
> 
> 时间：2012-10-19T16:12:10.833
> 
> 标签：asp.net

我是 ASP.NET C# 的新手。我尝试按照本教程页面制作一个全局使用的函数，但没有运气。 [http://aspnet.4guysfromrolla.com/articles/122403-1.aspx](http://aspnet.4guysfromrolla.com/articles/122403-1.aspx)

我尝试做的是在我的代码中的任何位置使用全局函数。我有一个名为“FormatDateNoTime”的函数。我在 App_Code 文件夹下创建了一个类文件。但是当我在我的页面后面的代码之一（例如 Page1.aspx.cs）中调用该函数时，它给了我错误：

错误：当前上下文中不存在名称“MyClass”

App_Code 文件夹下的 MyClass.cs 文件。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

/// <summary>
/// Summary description for Class1
/// </summary>
public class MyClass
{

        //
        // TODO: Add constructor logic here
        //

        public static string FormatDateNoTime(string input)            {
            string thedate;
            DateTime strDate = DateTime.Parse(input);
            thedate = strDate.ToString("MM/dd/yyyy");
            return thedate;
        }
} 
```

我的 Page1.aspx.cs 中的代码调用了 FormateNoTime 函数

```
TextBox BeginDate = (TextBox)FormView1.FindControl("BeginDate");
BeginDate.Text = MyClass.FormatDateNoTime(objDs.Tables[0].Rows[0]["BeginDate"].ToString()); 
```

其他页面似乎无法识别这个 class.function()。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:16:56.373

右键单击 App_Code 中的源文件并将其**"Build Action"**属性设置为**"Compile"**。单击 App_Code 中的 .cs 文件并按**F4**键（或右键单击 -> 属性），您应该会看到**“构建操作”**选项 这样，它将在您的 App_Code 文件夹中构建代码，您应该能够访问您的类中的静态方法。如果上述方法没有帮助，请从 app_code 中删除该类并将其放入根文件夹并尝试编译它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:36:08.787

您拥有的代码无法编译。当您尝试运行 Visual Studio 时，我很确定它会引发错误。注意它在说什么。

此外，更改以下内容：

```
public static string FormatDateNoTime(object sender, EventArgs e)
{
    string thedate;
    DateTime strDate = DateTime.Parse(input);
    thedate = strDate.ToString("MM/dd/yyyy");
    return thedate;
} 
```

至

```
public static string FormatDateNoTime(String input)
{
    string thedate;
    DateTime strDate = DateTime.Parse(input);
    thedate = strDate.ToString("MM/dd/yyyy");
    return thedate;
} 
```

我会进一步验证输入是否可解析为 DateTime，但这是供您探索的。

# php - 在 PHP 5.3 中重新引入 $HTTP_POST_VARS

> ID：12978293
> 
> 赞同：12
> 
> 时间：2012-10-19T16:12:14.640
> 
> 标签：php

我需要在共享托管环境中运行[**旧版**PHP 应用程序。](http://www.edisplayecommerce.it/)我已经向我的客户承诺，我会在一段时间内支持该遗留应用程序，但我发现它不起作用，因为它广泛使用已弃用的`$HTTP_POST_VARS`.

降级 PHP 不是一种选择。修补应用程序*可能*是不可行的，因为 PHP 文件是从 Windows 可执行文件生成的（我不是在开玩笑！），并且每次从桌面重新生成站点时，我们都可能丢失修改。

我在问是否有办法告诉 PHP 重新引入`$HTTP_POST_VARS`主机上的所有网站或仅用于特定的虚拟主机。任何其他选项/建议表示赞赏

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-19T16:45:42.670

你可以这样做

配置文件

```
$HTTP_POST_VARS = &$_POST;
$HTTP_GET_VARS = &$_GET;
$HTTP_COOKIE_VARS = &$_COOKIE; 
```

.htaccess

```
php_value auto_prepend_file /path/to/config.php 
```

PHP 文档[auto_prepend_file 字符串](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)

> 指定在主文件之前自动解析的文件的名称。该文件被包含，就好像它是用 require 函数调用的一样，因此使用了 include_path。
> 
> 特殊值 none 禁用自动前置。

编辑：为了更加彻底，这些是也可以别名的其他超全局变量：

```
$HTTP_SERVER_VARS = &$_SERVER;
$HTTP_POST_FILES = &$_FILES;
$HTTP_SESSION_VARS = &$_SESSION;
$HTTP_ENV_VARS = &$_ENV; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T16:28:19.973

像这样的东西怎么样

```
$HTTP_POST_VARS = $_POST; 
```

如果您可以在页面中包含代码，那应该可以。当然，您必须有权访问源代码并在 windows 中重新编译 exe，但您说*可以*.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T16:40:24.813

`register_long_arrays`适用于 5.3，但他们在 php 5.4 中对此进行了核对

[http://www.php.net/manual/en/ini.core.php#ini.register-long-arrays](http://www.php.net/manual/en/ini.core.php#ini.register-long-arrays)

是的，此设置已标记`PHP_INI_PERDIR`，因此您可以通过单独的 .htaccess 或单独的 ini 文件进行设置，也可以全局设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T16:33:49.287

看起来以下可以工作。

`edisplaypatch.php`首先，使用以下代码创建一个地方

```
<?php

if (getenv('EDISPLAY_PATCH')) {
    if (!isset($HTTP_GET_VARS)) $HTTP_GET_VARS = $_GET;
    if (!isset($HTTP_POST_VARS)) $HTTP_POST_VARS = $_POST;
    if (!isset($HTTP_COOKIE_VARS)) $HTTP_COOKIE_VARS = $_COOKIE;
}

?> 
```

这段代码可以泛化并与任何其他需要旧长数组的程序一起使用

然后在 Apache 的 vhost 配置中添加

```
SetEnv EDISPLAY_PATCH true 
```

重新加载 Apache。

测试代码有效：如果 SetEnv 不存在则不显示任何内容，如果存在则显示您`rnd`在查询字符串中作为参数发送的内容

```
<?php
echo $HTTP_GET_VARS['rnd'];
//phpinfo();
?> 
```

小缺点：我在每个 PHP 请求中都包含一个文件

# c# - 有没有办法在后台线程上建立 TreeView 控件？

> ID：12978294
> 
> 赞同：3
> 
> 时间：2012-10-19T16:12:21.767
> 
> 标签：c#, wpf, treeview

我有一个 TreeView 控件，我需要用大量的 3 层对象列表来填充它，这需要花费大量时间来构建。我正在后台线程上加载数据，然后将 GUI 更新发送到 GUI 线程，但是更新太多了，每次添加节点时我都必须发送它，然后我必须调用 ExpandSubTree() 方法然后展开所有子节点，然后触发更多展开事件，然后崩溃。

有没有一种方法可以在后台线程上建立控件并且它以某种方式处于打开/关闭状态，然后仅在完成后才将其编组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:50:00.823

每个树视图项都有一个属性 Children，如果将每个树视图项的子项绑定到 ObservableCollection，则可以从 BackGroundWorker 或其他线程向其添加项。如果您使用以下集合来绑定树视图项子项，您可以将子项从背景添加到视图。它使用同步上下文将项目添加到视图中：

```
public class ThreadSafeObservableCollection<T> : ObservableCollection<T>
{
    private SynchronizationContext SynchronizationContext;

    public ThreadSafeObservableCollection()
    {
        SynchronizationContext = SynchronizationContext.Current;

        // current synchronization context will be null if we're not in UI Thread
        if (SynchronizationContext == null)
            throw new InvalidOperationException("This collection must be instantiated from UI Thread, if not, you have to pass SynchronizationContext to con                                structor.");
    }

    public ThreadSafeObservableCollection(SynchronizationContext synchronizationContext)
    {
        if (synchronizationContext == null)
            throw new ArgumentNullException("synchronizationContext");

        this.SynchronizationContext = synchronizationContext;
    }

    protected override void ClearItems()
    {
        this.SynchronizationContext.Send(new SendOrPostCallback((param) => base.ClearItems()), null);
    }

    protected override void InsertItem(int index, T item)
    {
        this.SynchronizationContext.Send(new SendOrPostCallback((param) => base.InsertItem(index, item)), null);
    }

    protected override void RemoveItem(int index)
    {
        this.SynchronizationContext.Send(new SendOrPostCallback((param) => base.RemoveItem(index)), null);
    }

    protected override void SetItem(int index, T item)
    {
        this.SynchronizationContext.Send(new SendOrPostCallback((param) => base.SetItem(index, item)), null);
    }

    protected override void MoveItem(int oldIndex, int newIndex)
    {
        this.SynchronizationContext.Send(new SendOrPostCallback((param) => base.MoveItem(oldIndex, newIndex)), null);
    }
} 
```

另外我认为这篇文章一定对你有用：

[使用 ViewModel 模式简化 WPF TreeView](https://web.archive.org/web/20111217134935/http://www.codeproject.com:80/KB/WPF/TreeViewWithViewModel.aspx?)

[WPF 中的自定义 TreeView 布局](https://web.archive.org/web/20111229202341/http://www.codeproject.com:80/KB/WPF/CustomTreeViewLayout.aspx)

希望这对你有用...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:01:08.940

你是在一次创建整棵树吗？您是否为创建的每个项目触发调用？

我会考虑按需加载树。也许当用户去扩展一个节点时，你处理那个事件并去获取数据。我还会考虑每次调用加载项目组

# ruby-on-rails - 在 redirect_to 中传递变量

> ID：12978295
> 
> 赞同：4
> 
> 时间：2012-10-19T16:12:26.247
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的 Rails 应用程序中，`routes.rb`我有

```
match "show_fail" => "Posts#show_fail" 
```

在`posts_controller.rb`：

```
def create
  ...
  return redirect_to show_fail_path, :title => @post.title
end

def show_fail
end 
```

在`show_fail.html.erb`：

```
Unsuccessful posting of post title <%= title %> 
```

但我得到了一个错误`undefined local variable or method 'title'`。为什么它不知道`title`变量，我该如何修复它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:20:13.773

redirect_to show_fail_path(:title => @post.title)

并从 params[:title] 中获取

# android - 由多个视图组成的自定义视图

> ID：12978298
> 
> 赞同：24
> 
> 时间：2012-10-19T16:12:28.850
> 
> 标签：android, android-layout

我有一组我想始终一起使用的视图。这方面的一个例子可能是这样的：

```
<LinearLayout>
    <TextView />
    <EditView />
</LinearLayout> 
```

文本视图是提示，编辑视图是答案。我想给这个组合起一个名字，并且能够使用这个名字把它弹出到 xml 中。我希望它是一个自定义视图，这样我就可以把它很好地放在一个类中，并为它创建各种实用函数。有什么办法可以做到吗？我知道我可以继承 LinearLayout 并在 java 代码中动态创建子级，但这使我无法通过 xml 轻松进行更改。有更好的路线吗？

是的，我也有我想做的地方，而不仅仅是提示。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-19T18:42:29.967

此示例适用于水平数字选择器小部件，但概念相同。

首先为您的自定义组件创建 XML 布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

   <Button
       android:id="@+id/btn_minus"
       android:layout_width="50dp"
       android:layout_height="wrap_content"
       android:text="-" />

   <EditText
       android:id="@+id/edit_text"
       android:layout_width="75dp"
       android:layout_height="wrap_content"
       android:inputType="number"
       android:gravity="center"
       android:focusable="false"
       android:text="0" />

   <Button
       android:id="@+id/btn_plus"
       android:layout_width="50dp"
       android:layout_height="wrap_content"
       android:text="+" />
</LinearLayout> 
```

然后创建java类

```
public class HorizontalNumberPicker extends LinearLayout {
    public HorizontalNumberPicker(Context context, AttributeSet attrs) {
         super(context, attrs);
         LayoutInflater inflater = LayoutInflater.from(context);
         inflater.inflate(R.layout.horizontal_number_picker, this);
     }
 } 
```

向该 java 类添加您需要的任何逻辑，然后您可以在 XML 布局中包含自定义组件，如下所示：

```
<com.example.HorizontalNumberPicker
     android:id ="@+id/horizontal_number_picker"
     android:layout_width ="wrap_content"
     android:layout_height ="wrap_content" /> 
```

查看此链接了解更多信息：http: [//developer.android.com/guide/topics/ui/custom-components.html#compound](http://developer.android.com/guide/topics/ui/custom-components.html#compound)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T16:26:49.893

为此目的使用[复合控件。](http://developer.android.com/guide/topics/ui/custom-components.html#compound)有很多关于它的示例和教程。祝你好运 ）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T16:22:03.593

将该 XML 放入布局 XML 文件中，并在需要时使用充气器充气视图。

```
LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View rowView = inflater.inflate(R.layout.some_id, parent, false); 
```

获得视图后，您可以编写一个实用程序类来接受该视图并对其执行操作。[使用ViewHolder 模式](http://www.youtube.com/watch?v=wDBM6wVEO70)`findViewById()`使用或存储对其他视图的引用来检索文本和编辑视图

# android - 图像文件的工作草稿是否属于 android 项目文件夹？

> ID：12978300
> 
> 赞同：2
> 
> 时间：2012-10-19T16:12:33.487
> 
> 标签：android, eclipse, organization

我很难在谷歌上找到答案：

我有一些不属于 apk 的文件，例如我光栅化的 Inkscape (svg) 文件，以及我用来导出 png 文件的 Gimp (xcf) 文件。我想以最紧凑和最合乎逻辑的方式组织事情，但我不希望我的工作草稿成为 apk 文件的一部分。

对于这些媒体文件的工作草稿，为每个项目（项目文件夹之外）保留另一个文件夹的正确方法是否正确？也许我想太多了。我只想使用最佳实践，而我当前的方法（为每个项目使用一个额外的文件夹）感觉很麻烦。

有没有办法忽略实际的 android/eclipse 项目文件夹中的文件夹？我很想知道其他人正在做什么来保持井井有条。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:15:25.993

只需将项目中的文件放在一个文件夹中

*   不是源文件夹（src 和 gen）
*   不是您的资产或资源文件夹

＆它们不会包含在您的构建中（apk）

# actionscript-3 - AS3 - 动态重新填充一组 MovieClips 中的一系列文本字段

> ID：12978301
> 
> 赞同：1
> 
> 时间：2012-10-19T16:12:34.427
> 
> 标签：actionscript-3

我在 Flash Professional CS5 平台上尝试在 ActionScript3 中开发某些功能时遇到了一个问题，想知道是否有人可以为我指明正确的方向？

**背景**

在我的 ActionScript 类中，我编写了一个 MouseEvent 函数，该函数将同一 MovieClip (user_shape) 的多个实例动态添加到舞台上，形成用户在程序早期阶段设计的形状。

这种形状效果是通过一个 For 循环来实现的，该循环遍历基于多维布尔数组的整个长度，以查找 true 的实例（由用户之前的操作确定），然后在这种情况下将 MovieClip 添加到舞台.

通过单击添加的每组 MovieClip，虽然始终具有相同的实例名称 (user_shape)，但始终被分配一个唯一 ID，我通过包含一个数字变量来设置该 ID，该变量在每次添加批次时递增 1 'user_shape' MovieClips 通过左键单击到舞台。

在将其添加到舞台之前，用户可以从多达八种不同的颜色中选择分配给他们的形状（通过选择框）。对于这八种颜色中的每一种，我都添加了一个数值变量（shapeCounterBlue、shapeCounterRed 等），每次我在舞台上添加某种颜色的形状时，它基本上都会计数 ++，同样它也很重要——如果我选择删除一个形状.

当通过我的主函数添加一个形状时，我将一个动态文本字段附加到每个 MovieClip 并使用我选择的特定颜色的可变计数器编号填充它（见下图）。

![形状](../Images/9098aa06835584b744974029882288ca.png)

**问题**

好的，这是我的问题。当我从舞台上移除一个形状时，我需要每个彩色形状的唯一编号（显示为白色）动态重新填充和更新。正如您在我附上的图片中看到的那样，如果我要删除第二个蓝色形状，我的第三个蓝色形状的数字需要从 3 恢复到 2。

同样，如果我在舞台上有六个红色形状并且我决定删除第三个，那么形状 4、5、6（在删除 3 之前）需要将它们的编号分别更改为 3、4、5。

或者我可以有四个绿色形状并删除第一个形状；这意味着形状 2,3,4 实际上需要更改为 1,2,3。

你明白了。但是有人知道我怎么能做到这一点吗？

我的问题进一步受到以下事实的阻碍：每个 MovieClip 的 textFields 通过我的 For 循环动态添加到 user_shape Child。这意味着在我的 AS 类中，我无法公开声明这些文本字段并访问其中的值，因为它们仅存在于我的添加形状函数中使用的 For 循环中，而没有其他地方。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:18:06.770

至于目标动态创建的文本字段。在您的循环中分配一个您以后可以访问的名称。

```
for(i:int=0;i<myArray.length;i++){
  var txt:TextField = new TextField();
  txt.name = "txt_" + i;
  this.addChild(txt);
} 
```

然后访问循环外的文本字段，目标如下：

```
var targetTxt:TextField = this.getChildByName("txt_10"); 
```

# 更新

好的，所以我有一些时间继续解决您的整个问题

![在此处输入图像描述](../Images/3c74d7f32469323d524162814e9b4c38.png)

（[下载源 FLA/AS 文件](http://www.latcode.com/samples/boxGrid.zip)）

好的，所以我在代码中调用了库中的一些 MC。我创建了一个 Box MC，它有一个标签文本字段、一个边框和一个背景 MC，我可以将它们作为目标颜色。

我创建了一个 countColors()，一旦您单击一个框（从每个框内的 mouseEvent 触发），它就会循环遍历所有框。它计算数组中不同颜色的总数，然后发送一个自定义事件，让所有盒子知道它们可以获取颜色总数来更新它们的标签。

我希望这有帮助。

主文件

```
package  {

import flash.display.MovieClip;
import flash.display.Sprite;
import flash.events.MouseEvent;
import flash.events.Event;

public class main extends MovieClip {

    public static var ROOT:MovieClip;
    public var totalBoxes:int = 100;
    public var boxContainer:Sprite;
    public static var colorArray:Array = [0xFF0000, 0x0000FF, 0x00FF00];
    public static var colorCount:Array = [0,0,0];
    public static var currentColor = 0;

    public function main() {

        // set ref to this
        ROOT = this; // so I can get back to it from the boxes

        // color selection
        redBtn.addEventListener(MouseEvent.CLICK, chooseColor);
        blueBtn.addEventListener(MouseEvent.CLICK, chooseColor);
        greenBtn.addEventListener(MouseEvent.CLICK, chooseColor);

        // add box container to stage
        boxContainer = new Sprite();
        boxContainer.x = boxContainer.y = 10;
        this.addChild(boxContainer);

        var row:int=0;
        var col:int=0;
        for(var i:int=0; i < totalBoxes; i++){

            var box:Box = new Box();
            box.x  = col * box.width;
            box.y = row * box.height;
            box.name = "box_" + i;
            box.ID = i;
            box.updateDisplay();
            boxContainer.addChild(box);

            if(col < 9){
                col++;
            }else{
                col = 0;
                row++;
            }
        }

    }

    private function chooseColor(e:MouseEvent):void
    {

        var btn:MovieClip = e.currentTarget as MovieClip;

        switch(btn.name)
        {
            case "redBtn":
                currentColor=0;
                break;
            case "blueBtn":
                currentColor=1;
                break;
            case "greenBtn":
                currentColor=2;
                break;  
        }

        // move currentColorArrow
        currentColorArrow.x = btn.x;

    }

    public function countColors():void
    {
        colorCount = [0,0,0]; // reset array
        for(var i:int=0; i < totalBoxes; i++){
            var box:Box = boxContainer.getChildByName("box_" + i) as Box;
            if(box.colorID > -1)
            {
                colorCount[ box.colorID ]++;
            }
        }

        // send custom event that boxes are listening for
        this.dispatchEvent(new Event("ColorCountUpdated"));
    }
} 
```

}

盒子.as

```
package  {

import flash.display.MovieClip;
import flash.geom.ColorTransform;
import flash.events.MouseEvent;
import flash.events.Event;

public class Box extends MovieClip {

    public var ID:int;
    public var colorID:int = -1;
    private var active:Boolean = false;
    private var bgColor:Number = 0xEFEFEF;

    public function Box() {

        this.addEventListener(MouseEvent.CLICK, selectBox);
        main.ROOT.addEventListener("ColorCountUpdated", updateCount); // listen to root for custom event to update display

    }

    public function updateDisplay() {

        if(active == false){
            boxLabel.htmlText = "<font color='#000000'>"+ ID +"</font>";
        }else{
            boxLabel.htmlText = "<font color='#FFFFFF'>"+ main.colorCount[colorID] +"</font>";
        }

        var myColorTransform = new ColorTransform();
        myColorTransform.color = bgColor;
        boxBG.transform.colorTransform = myColorTransform;

    }

    private function selectBox(e:MouseEvent):void
    {   

        // set bgColor
        if(active == false){
            bgColor = main.colorArray[main.currentColor];
            colorID = main.currentColor;
        }else{
            bgColor = 0xEFEFEF;
            colorID = -1;
        }

        // set active state
        active = !active // toggle true/false
        main.ROOT.countColors();
    }

    private function updateCount(e:Event):void
    {
        updateDisplay();
    }

} 
```

}

# c# - 使用 C# 在 Metro 应用程序中保存用户设置

> ID：12978303
> 
> 赞同：2
> 
> 时间：2012-10-19T16:12:43.080
> 
> 标签：c#, .net, windows

我想在本地文件夹中的 Metro 应用程序中写入用户选择的设置。我已经完成了如下代码，但它不起作用。

保存设置的代码：

```
 void OnUnloaded(object sender, RoutedEventArgs args)
    {
        //code to save app settings.
        var localSettings = ApplicationData.Current.LocalSettings;
        localSettings.Values["playerPosition"] = playerPosition;
        localSettings.Values["aiPosition"] = aiPosition;
        localSettings.Values["selectedLevel"] = selectedLevel;
    } 
```

读取设置的代码：

```
 var localSettings = ApplicationData.Current.LocalSettings;
        if ((localSettings.Values["playerPosition"]) == null)
        {
            localSettings.Values["playerPosition"] = 1;
            localSettings.Values["aiPosition"] = 1;
            localSettings.Values["selectedLevel"] = "1";

            playerPosition = aiPosition = 1;
            selectedLevel = "1";
        }
        else
        {
            playerPosition = (int)localSettings.Values["playerPosition"];
            aiPosition = (int)localSettings.Values["aiPosition"];
            selectedLevel = (string)localSettings.Values["selectedLevel"]; ---- 
```

显然，我应该将此 localSettings 变量保存在文件中。但是，我找不到执行此操作的代码。另外，Unload 事件是一个好地方，还是应该将它移到 OnNavigatedFrom 事件？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:58:30.530

我自己还没有尝试过，但也许你可以查看这个示例（应用程序设置示例）： [http ://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49](http://code.msdn.microsoft.com/windowsapps/App-settings-sample-1f762f49)

它使用[Windows.UI.ApplicationSettings](http://msdn.microsoft.com/library/windows/apps/BR208189)命名空间。

**编辑：** 阅读[这篇文章](http://www.codeguru.com/csharp/.net/using-local-storage-with-c-and-xaml-in-windows-8-metro-apps.html)和 MSDN 上的[快速入门](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh700361)后，在我看来您不需要保存文件，因为 LocalSettings 会为您处理这个？你没有看到这种行为吗？

# sql - 针对服务器组的 SQL Server 查询

> ID：12978308
> 
> 赞同：2
> 
> 时间：2012-10-19T16:12:57.577
> 
> 标签：sql, sql-server, tsql

所以我使用 tsql 代码来运行一堆服务器，并在每个数据库中查找用户。我的问题是，在特定服务器上，有些数据库我无权访问，也不需要使用。当查询在它们上运行时，它会在整个服务器上停止并移动到下一个服务器。我一直在尝试找到一种从搜索中排除某些数据库的方法。

我想做的是

例如，在服务器 A 上排除了这些数据库 B、C、D 等。我试过 where <> 和 != 并且不起作用或者我的语法错误

```
USE MASTER

If OBJECT_ID('#TDB', 'U') > 0
Drop Table #TDB

DECLARE @dbname varchar(200),
        @sql varchar(max)

CREATE TABLE #TDB (
DataBaseName nvarchar(200), 
UserName nvarchar(200)
)

DECLARE db_cursor CURSOR FOR
SELECT name
FROM master.dbo.sysdatabases WHERE DBID>4
OPEN db_cursor
FETCH NEXT FROM db_cursor INTO @dbname
WHILE @@FETCH_STATUS = 0

BEGIN

SET @sql='insert into #TDb(DataBaseName,UserName)
select '''+@dbname+''' DataBaseName,[user_name] UserName FROM '+@dbname+'.[dbo].[USERS] where'+@dbname+'<>[APSSWATCH]' 

EXEC(@sql)

FETCH NEXT FROM db_cursor INTO @dbname

END

CLOSE db_cursor
DEALLOCATE db_cursor

SELECT * FROM #TDB ORDER BY DataBaseName,UserName
DROP TABLE #TDB 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:20:59.177

```
DECLARE db_cursor CURSOR FOR
SELECT name
FROM master.dbo.sysdatabases WHERE DBID>4 and name<> 'APSSWATCH' 
```

你可以删除这个：

```
where'+@dbname+'<>[APSSWATCH]' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:12:15.353

谢谢你引导我走向正确的方向，而不是

```
name<>'APPSWATCH' 
```

我用了

```
name NOT IN 'APPSWATCH' 
```

它有效

# ios - 允许 HTTP 实时流式传输持续时间少于 10 秒？

> ID：12978310
> 
> 赞同：10
> 
> 时间：2012-10-19T16:13:03.833
> 
> 标签：ios, video, video-streaming, http-live-streaming

我们正在尝试在 iOS 上制作低延迟视频，同时遵守 Apple 针对蜂窝视频的 HLS 指南。从技术角度来看，我们可以将 EXT-X-TARGETDURATION: 设置为 N 秒，其中 N 小于 10（想想 2 或 3 秒）。

实际上，这是否允许？在使用 5 秒或更短的 HLS 段时，是否有人遇到过应用获得批准的情况？我听说过轶事证据表明这是不允许的。

关于 Apple 的规则，我所见过的任何东西都没有限制分段最小值。但是，有一个技术说明指出：

“我们强烈建议目标持续时间为 10 秒。”

问题是该建议是否实际上是一条未说明的规则。

来源：http: [//developer.apple.com/library/ios/#technotes/tn2224/_index.html](http://developer.apple.com/library/ios/#technotes/tn2224/_index.html)

进一步说明 - Apple 提供了一种“媒体流验证器工具”，它不会报告目标持续时间为 2 或 3 秒的流的错误。这进一步表明流持续时间是“有效的”。

感谢您的任何经验/想法。此外，如果您知道任何您认为使用 5 秒或更短的 HLS 段的已批准应用程序，那也会有所帮助，因为我可以检查它们是否确实使用较短的持续时间并将其用作 Apple 批准的补偿。

# sql - 尝试执行命令查询时出现 SQL 错误

> ID：12978312
> 
> 赞同：1
> 
> 时间：2012-10-19T16:13:13.920
> 
> 标签：sql, vb.net, ms-access

当我运行下面的代码时，我不断收到错误消息：`Syntax error (missing operator) in query expression`. 我究竟做错了什么？

```
con = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Database1.accdb"
connOledb.ConnectionString = con

connOledb.Open()
command = New OleDb.OleDbCommand("INSERT INTO Artikels VALUES('1'," + txtOmsch.Text + _
                   "','" + txtCat.Text + "','" + txtAPE.Text + _
                   "','" + txtMarge.Text + "','" + txtVPE.Text + _
                   "','" + txtEen.Text + "','" + txtLen.Text + _
                   "','" + txtBreed.Text + "','" + txtDiep.Text + _
                   txtOmsch.Text + "');")

command.Connection = connOledb
command.ExecuteNonQuery() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:15:06.277

您错过了第二个值的单引号。尝试这个，

```
command = New OleDb.OleDbCommand("INSERT INTO Artikels VALUES('1','" + txtOmsch.Text + _
                               "','" + txtCat.Text + "','" + txtAPE.Text + _
                               "','" + txtMarge.Text + "','" + txtVPE.Text + _
                               "','" + txtEen.Text + "','" + txtLen.Text + _
                               "','" + txtBreed.Text + "','" + txtDiep.Text + _
                               txtOmsch.Text + "');") 
```

您的代码容易受到 sql 注入的影响，请使用参数化查询，因为您正在使用`ADO.NET`，最好试试下面的代码，

```
Dim con As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Database1.accdb"  
Dim query As String = "INSERT INTO Artikels VALUES(@val1, @Omsch, @Cat, @Ape, @VPE, @Een, @len, @breed, @diep,@Omsch)")

Using connOledb As New OleDbConnection(con)
    Using  command As New OleDbCommand()
        With command
            .Connection = con
            .CommandType = CommandType.Text
            .CommandText = query
            .Parameters.AddWithValue("@val1",1)
            .Parameters.AddWithValue("@Omsch",txtOmsch.Text)
            .Parameters.AddWithValue("@Cat",txtCat.Text)
            .Parameters.AddWithValue("@Ape",txtAPE.Text)
            .Parameters.AddWithValue("@VPE",txtVPE.Text)
            .Parameters.AddWithValue("@Een",txtEen.Text )
            .Parameters.AddWithValue("@len",txtLen.Text)
            .Parameters.AddWithValue("@breed",txtBreed.Text)
            .Parameters.AddWithValue("@diep",txtDiep.Text)
        End with
        Try
            connOledb.Open()
            command.ExecuteNonQuery()
        Catch(ex as OleDBException)
            Msgbox(ex.Message.Tostring())
        End Try
    End Using
End Using 
```

或者`Add`

```
.Add("@Omsch", OleDbType.VarChar, 30).Value = txtOmsch.Text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:15:34.143

第二列周围的第一个 ' 缺失

```
con = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Database1.accdb"
connOledb.ConnectionString = con

connOledb.Open()
command = New OleDb.OleDbCommand("INSERT INTO Artikels VALUES('1','" + txtOmsch.Text + _
                               "','" + txtCat.Text + "','" + txtAPE.Text + _
                               "','" + txtMarge.Text + "','" + txtVPE.Text + _
                               "','" + txtEen.Text + "','" + txtLen.Text + _
                               "','" + txtBreed.Text + "','" + txtDiep.Text + _
                               txtOmsch.Text + "');")

command.Connection = connOledb

command.ExecuteNonQuery() 
```

# php - drupal 6模块编程语义错误

> ID：12978317
> 
> 赞同：4
> 
> 时间：2012-10-19T16:13:42.720
> 
> 标签：php, drupal, drupal-6, ahah

我应该编写一个简单的模块（不使用 WebForms）来制作获取数据的表单。但是我的表单元素没有显示出来。我使用drupal 6.0 doc，但我不知道出了什么问题！

这是我的源代码的[链接](http://pastebin.com/vKRrM4Y8)。

我收到错误消息：警告：第 29 行 /var/www/drupal/sites/all/modules/registeration/registration.module 中的registration_register_form() 缺少参数2。

但我写了正确的论点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:33:27.440

在*大多数** 形式中，您不需要传递`$form`and 。`$form_state`

 *试试这个：

```
function registration_register_form(){ 
```

代替：

> 函数registration_register_form($form, &$form_state){

背景：`drupal_get_form`将任何给定的参数传递给`registration_register_form()`但在 中`registration_all()`，您不会传递任何额外的参数。（只是表单函数的回调）。

请注意，您仍然需要在提交函数中传递`$form`和使用 $form_state 的数据。`$form_state``registration_register_form_submit()`

*大多数情况：如果您的表单是多步表单并且表单会根据`$form_state`变量的值发生变化，那么这是一个很好的用例，您*确实*需要将 $form 和 $form_state 传递给`registration_register_form()`

**更新** 检查您的代码后，我发现**了许多**错误。请参阅新版本： http: [//pastebin.com/VNa3veFR](http://pastebin.com/VNa3veFR)（未列出）我已经纠正了我能注意到的大部分问题。请参阅函数名称上方的内联注释和注释块。*

# arrays - VB2010 从字符串或数组中提取一串数字

> ID：12978323
> 
> 赞同：0
> 
> 时间：2012-10-19T16:14:08.140
> 
> 标签：arrays, vb.net, string, numbers, extract

我有一个文件路径，我想从文件路径的开头提取起始目录作业号。除了我不知道如何从文件路径字符串中提取数字字符串。（即：filepath= Q:\2456_blah_blah\file.txt - 或其他东西）我想将“2456”作为字符串提取，然后将该数字字符串放入我在表单上创建的 TextBox2 中。到目前为止，我的代码会吐出一个“0”而不是所需的数字字符串。任何帮助将非常感激。

```
 Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    Me.OpenFileDialog1.FileName = Nothing

    If Me.OpenFileDialog1.ShowDialog = System.Windows.Forms.DialogResult.OK Then
        Me.TextBox1.Text = Me.OpenFileDialog1.FileName

    End If

    If GetInfo() = True Then

        For Each Xitem In ExcelRowList

            Dim lvitem As ListViewItem
            lvitem = Me.ListView1.Items.Add(Xitem.C1)

        Next

    End If
'''Here is where I call the GetFilePathOnly function
    TextBox2.Text = GetFilePathOnly(TextBox1.Text)
End Sub

Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged

End Sub
'''Section below is what defines my number string, then I call it above for the Button1.Click operation(towards the end)
Private Function GetFilePathOnly(ByVal Fullpath As String) As String
    Dim File As String = Fullpath
    Dim number As Double = Val(File)
    Dim outcome As String = number.ToString 'File.Substring(0, File.LastIndexOf("\") + 1)
    Return outcome
End Function 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:17:48.923

一种懒惰的方法是使用拆分：

```
TextBox2.Text = path.Split("\")(1).Split("_")(0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:29:28.173

您也可以轻松地使用正则表达式。

```
Dim numRegex As New Regex("\d+")
Dim number As String = numRegex.Match("Q:\2456_blah_blah\file.txt").Value 
```

# r - R中的factor（）命令仅适用于具有层次结构的分类变量？

> ID：12978326
> 
> 赞同：1
> 
> 时间：2012-10-19T16:14:23.313
> 
> 标签：r

我对何时使用感到很困惑

> 因素（教育）或因素（年龄组）

在 R 中。它用于分类有序数据吗？还是我可以只使用没有层次结构的简单分类数据？

我知道这是非常基本的。我真的需要澄清一下。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T16:39:34.357

我在这里并没有真正看到一个明确的问题，所以也许一个简单的例子就足够了。

假设我们有以下数据。

```
set1 <- c("AA", "B", "BA", "CC", "CA", "AA", "BA", "CC", "CC") 
```

我们想考虑这些数据。

```
f.set1 <- factor(set1) 
```

让我们看看输出。请注意，R 只是按字母顺序排列了级别，但并没有说这意味着层次结构（参见“级别”行）。

```
f.set1
# [1] AA B  BA CC CA AA BA CC CC
# Levels: AA B BA CA CC
is.ordered(f.set1)
# [1] FALSE 
```

但是，`as.numeric`在分解数据上使用可能会让您误以为它是分层的。请注意，在下面的输出中，“5”出现在“4”之前，还请注意`table(f.set1)`(如果您只是简单地执行了`table(set1)`.

```
as.numeric(f.set1)
# [1] 1 2 3 5 4 1 3 5 5
table(f.set1)
# f.set1
# AA  B BA CA CC 
#  2  1  2  1  3 
```

现在让我们将其与我们将`ordered`参数与参数一起 使用时发生的情况进行比较`levels`。使用`levels`加号`ordered = TRUE`告诉我们这个分类数据是分层的，按照指定的顺序`levels`（不是按字母顺序或我们输入数据的顺序）。

```
o.set1 <- factor(set1, 
                 levels = c("CA", "BA", "AA", "CC", "B"), 
                 ordered = TRUE) 
```

即使查看输出现在也向我们展示了层次结构。

```
o.set1
# [1] AA B  BA CC CA AA BA CC CC
# Levels: CA < BA < AA < CC < B
is.ordered(o.set1)
# [1] TRUE 
```

`as.numeric`和函数一样`table`。

```
as.numeric(o.set1)
# [1] 3 5 2 4 1 3 2 4 4
table(o.set1)
# o.set1
# CA BA AA CC  B 
#  1  2  2  3  1 
```

因此，总而言之，`factor()`它本身只是为您的分类数据创建了一个非分层排序因子；`factor()`使用`levels`和`ordered = TRUE`参数创建分层类别。

或者，`ordered()`如果您直接想要创建有序因子，请使用。仍然需要指定类别的顺序：

```
ordered(set1, levels = c("CA", "BA", "AA", "CC", "B")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T16:42:44.353

您可以通过使用`ordered(x)`或 使用创建一个因子来将其标记为有序`factor(x, ordered=TRUE)`。的“详细信息”部分`?factor`解释说：

> 有序因子与其类的因子不同，但方法和模型拟合函数对这两个类的处理完全不同。

您可以通过比较这两个对象的属性来确认该引用的**第一部分**（它们仅在类上有所不同）：

```
f  <- factor(letters[3:1], levels=letters[3:1])
of <- ordered(letters[3:1], levels=letters[3:1])
attributes(f)
# $levels
# [1] "c" "b" "a"
# 
# $class
# [1] "factor"
attributes(of)
# $levels
# [1] "c" "b" "a"
# 
# $class
# [1] "ordered" "factor" 
```

然后，各种因子处理 R 函数（该引用**第二部分**的“方法和模型拟合函数” ）将`is.ordered()`用于测试`"ordered"`该类指示符的存在，将其作为指令以不同于处理有序因子无序的一个。这里有几个例子：

```
## The print method for factors. (Type 'print.factor' to see the function's code)
print(f)
# [1] c b a
# Levels: c b a
print(of)
# [1] c b a
# Levels: c < b < a

## The contrasts function. (Type 'contrasts' to see the function's code.)
contrasts(of)
#                 .L         .Q
# [1,] -7.071068e-01  0.4082483
# [2,]  4.350720e-18 -0.8164966
# [3,]  7.071068e-01  0.4082483
contrasts(f)
#   b a
# c 0 0
# b 1 0
# a 0 1 
```

# struts2 - struts2 在文本字段上动态更改样式

> ID：12978329
> 
> 赞同：0
> 
> 时间：2012-10-19T16:14:43.613
> 
> 标签：struts2, textfield

我正在尝试动态更改`Struts2`文本字段的样式以根据特定条件更改背景颜色。

*   问题 1 - 这可能吗
*   问题 2 - 来自这里的其他帖子 - 我尝试了以下但风格没有得到评估？

关于如何做到这一点或我在下面有什么不正确的任何指示？

```
<s:if test='%{contactStatusCode == "ARE" }'>
<s:set var="AREStyle" value="%{'background:#eeeeee'}"/>

<s:textfield name      = "followUpComment"
             id        = "followUpComment[%{#index.index}]"
             style     = "%{#AREStyle}"
             size      = "15"
             maxlength = "100"  /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T21:38:18.470

如何更改文本字段的 css 类

```
 <s:textfield name="followUpComment" cssClass="%{contactStatusCode == 'ARE' ? 'areClass' : 'notAreClass'}" /> 
```

# codeigniter - 如何使用 CodeIgniter 的路由创建更简洁的 url？

> ID：12978330
> 
> 赞同：-1
> 
> 时间：2012-10-19T16:14:46.720
> 
> 标签：codeigniter

我想将看起来像这样的网址转换为[http://example.com/account?username=theUsername](http://example.com/account?username=theUsername)看起来更像这样[http://example.com/account/theUsername](http://example.com/account/theUsername)。这怎么可能，我使用 CodeIgniter 作为我的框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T04:16:46.480

Codeigniter，默认带有漂亮的 url，比如你在配置中打开了查询字符串：

www.site.com/user/jefferson

你可以看看

[http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

# c# - C# File.Move 服务通过网络变慢

> ID：12978334
> 
> 赞同：1
> 
> 时间：2012-10-19T16:14:56.053
> 
> 标签：c#, networking, file-transfer

我创建了一项服务，将目录中的某些文件类型移动到另一个目录中，这在本地运行良好，并且在我的网络上运行得非常快。在不同的网络上，虽然它的运行速度非常慢（一个 500mb 的文件需要 6 1/2 分钟），但是通过资源管理器复制并粘贴到文件夹中的相同文件在大约 30/40 秒内完成。

文件移动发生的片段。

```
currentlyProcessing.Add(currentFile.FullName);
try
{
    eventMsg("Attempting to move file","DEBUG");

    File.Move(oldFilePath, newFilePath);
    eventMsg("File Moved successfully","DEBUG");

}
catch (Exception ex)
{
    eventMsg("Cannot Move File another resource is using it", "DEBUG");
    eventMsg("Move File Exception : " + ex, "DEBUG");

}
finally
{ 
    if(File.Exists(currentFile.FullName + ".RLK"))
    {
        try
        {
            File.Delete(currentFile.FullName + ".RLK");
        }
        catch (IOException e)
        {
            eventMsg("File Exception : " + e, "DEBUG");
        }

    }
    currentlyProcessing.Remove(oldFilePath);
} 
```

我担心代码很好（因为它在其他网络上按预期工作）所以问题可能是网络，以某种形式或形式。有没有人有任何常见的提示要检查，该服务作为本地系统（或网络服务）运行并且似乎没有访问问题。还有哪些其他因素会影响这一点（网络/硬件除外）。

我希望它具有与我在 Explorer 中看到的类似的传输速度。任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:26:05.830

首先，相互 Ping 以检查延迟，以便您可以查看问题是网络中的全局问题还是与您的软件有关。

```
cmd ping 192.168.1.12 -n 10 
```

如果是网络问题，请执行以下操作：

1.  **重启你的集线器/路由器**
2.  **其中一台 PC 是否使用低信号 WiFi？**
3.  **是否有任何已打开并监控网络活动的防病毒软件？**

如果上述方法都不能解决您的问题，请尝试使用[WireShark](http://www.wireshark.org/)来进一步调查问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:31:35.153

对于如此大的文件，我建议尽可能将它们压缩，特别是因为网络延迟始终是通过互联网上传/下载文件的一个重要因素。您可以使用**System.IO.Packaging**压缩文件。看看这里[Using System.IO.Packaging to generate a ZIP file](https://stackoverflow.com/questions/6386113/using-system-io-packaging-to-generate-a-zip-file)，具体来说：

```
using (Package zip = System.IO.Packaging.Package.Open(zipFilename, FileMode.OpenOrCreate))
        {
            string destFilename = ".\\" + Path.GetFileName(fileToAdd);
            Uri uri = PackUriHelper.CreatePartUri(new Uri(destFilename, UriKind.Relative));
            if (zip.PartExists(uri))
            {
                zip.DeletePart(uri);
            }
            PackagePart part = zip.CreatePart(uri, "",CompressionOption.Normal);
            using (FileStream fileStream = new FileStream(fileToAdd, FileMode.Open, FileAccess.Read))
            {
                using (Stream dest = part.GetStream())
                {
                    CopyStream(fileStream, dest);
                }
            }
        } 
```

此外，如果可能，您可以像提到的其他用户一样使用 FTP。查看 CodePlex 上的[Renci SSHNet 库](http://sshnet.codeplex.com/)。

# delphi - 如何使用 Chromium 发送帖子和标题数据？

> ID：12978338
> 
> 赞同：10
> 
> 时间：2012-10-19T16:15:07.023
> 
> 标签：delphi, delphi-xe, chromium

我正在尝试将一些代码从 TWebBrowser 转换为 Chromium，但无法弄清楚如何使用 HTTP 请求发送帖子和标头数据。

下面是我尝试实现的 TWebBrowser 功能。

```
var
VHeader, PostData: OleVariant;

PostData := VarArrayCreate([0, Length(XMLString) - 1], varByte) ;    
HeaderData := 'Content-Type: application/x-www-form-urlencoded'+ '\n';

WebBrowser1.Navigate(StrUrl,EmptyParam,EmptyParam,PostData,VHeader); 
```

如何使用 Chromium 进行等效操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-20T09:04:04.463

由于缺少 Delphi Chromium Embedded 的文档，我将参考为 CEF 的 C++ 版本发送 Web 请求所需的要求。因此，您需要使用[`LoadRequest`](http://magpcss.org/ceforum/apidocs/projects/%28default%29/CefFrame.html#LoadRequest%28CefRefPtr%3CCefRequest%3E%29)Chromium 中发送请求的方法。为了使用它，您需要[`CefRequest`](http://magpcss.org/ceforum/apidocs/projects/%28default%29/CefRequest.html)请求对象类的对象实例[`HeaderMap`](http://magpcss.org/ceforum/apidocs/projects/%28default%29/CefRequest..HeaderMap.html)以及[`CefPostData`](http://magpcss.org/ceforum/apidocs/projects/%28default%29/CefPostData.html)请求标头和数据规范的对象。

扩展 Henri Gourvest（Delphi CEF 包装器的作者）的示例[`this thread`](https://groups.google.com/forum/?fromgroups=#!topic/delphichromiumembedded/r1_ytEvBHEs)，您可以在 Delphi 中尝试以下伪代码：

```
uses
  ceflib;

function CreateField(const AValue: AnsiString): ICefPostDataElement;
begin
  Result := TCefPostDataElementRef.New;
  Result.SetToBytes(Length(AValue), PAnsiChar(AValue));
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  Header: ICefStringMultimap;
  Data: ICefPostData;
  Request: ICefRequest;
begin
  Header := TCefStringMultimapOwn.Create;
  Header.Append('Content-Type', 'application/x-www-form-urlencoded');

  Data := TCefPostDataRef.New;
  Data.AddElement(CreateField('Data.id=27'));
  Data.AddElement(CreateField('&Data.title=title'));
  Data.AddElement(CreateField('&Data.body=body'));

  Request := TCefRequestRef.New;
  Request.Flags := WUR_FLAG_NONE;
  Request.Assign('http://example.com/', 'POST', Data, Header);

  Chromium1.Browser.MainFrame.LoadRequest(Request);
end; 
```

同样应该做上述代码的另一个版本：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Header: ICefStringMultimap;
  Data: ICefPostData;
  Request: ICefRequest;
begin
  Request := TCefRequestRef.New;
  Request.Url := 'http://example.com/';
  Request.Method := 'POST';
  Request.Flags := WUR_FLAG_NONE;

  Header := TCefStringMultimapOwn.Create;
  Header.Append('Content-Type', 'application/x-www-form-urlencoded');
  Request.SetHeaderMap(Header);

  Data := TCefPostDataRef.New;
  Data.AddElement(CreateField('Data.id=27'));
  Data.AddElement(CreateField('&Data.title=title'));
  Data.AddElement(CreateField('&Data.body=body'));
  Request.PostData := Data;

  Chromium1.Browser.MainFrame.LoadRequest(Request);
end; 
```

# mysql - 更新 column1 > column2 的所有行

> ID：12978342
> 
> 赞同：1
> 
> 时间：2012-10-19T16:15:19.920
> 
> 标签：mysql

是否有可能以某种方式使 MySQL 命令执行此操作： `UPDATE FROM players WHERE column1 > column2 SET column2 = column1`

任何想法如何做到这一点？还是我必须运行 2 个 mysql 命令？一选一更新？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T16:16:24.393

可以做到，你只需要修正你的语法，它应该是：

```
UPDATE players SET column2 = column1 WHERE column1 > column2; 
```

MySQL 5 手册[`UPDATE Syntax`](http://dev.mysql.com/doc/refman/5.0/en/update.html)：

> 单表语法：

```
UPDATE [LOW_PRIORITY] [IGNORE] table_reference
    SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
    [WHERE where_condition]
    [ORDER BY ...]
    [LIMIT row_count] 
```

> 多表语法：

```
UPDATE [LOW_PRIORITY] [IGNORE] table_references
    SET col_name1={expr1|DEFAULT} [, col_name2={expr2|DEFAULT}] ...
    [WHERE where_condition] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T16:17:48.863

你不需要`select`数据来更新它。您可以直接使用`update`.

```
UPDATE players SET column2 = column1 WHERE column1 > column2; 
```

# java - 创建算法来确定幂集中子集的大小

> ID：12978347
> 
> 赞同：0
> 
> 时间：2012-10-19T16:15:25.217
> 
> 标签：java, c++, algorithm, set

我无法为此作业创建算法。如果我能得到一些关于谁从第一个算法开始的提示，我将不胜感激。

该任务的目标是实现和比较各种算法，以计算给定集合的每个可能大小的子集数量。请记住，具有 n 个元素的集合有 2^n 个子集。其中两种算法将用于实际生成子集。您的程序将能够要求用户做出选择，直到他/她希望退出。您的程序的 GUI 是允许的，但不是必需的。选择应允许以下内容：

1.  运行一个算法，该算法基于从 0 开始计算所有 2^n 个整数（您可能无法使用 C/C++/Java int 数据类型）并确定与每个数字对应的子集的大小。该算法必须以某种方式使用整数除法和模数。它需要返回一个数组，其中包含每个可能大小的子集的数量。显示每个可能大小的子集数。n 的值将由用户输入确定。应在 n 上执行错误检查。
2.  运行一个算法，该算法基于从 0 开始计算所有 2^n 个整数（您可能无法使用 C/C++/Java int 数据类型）并确定与每个数字对应的子集的大小。该算法必须以某种方式使用位级操作（逻辑与移位）。它需要返回一个数组，其中包含每个可能大小的子集的数量。显示每个可能大小的子集数。n 的值将由用户输入确定。应在 n 上执行错误检查。

3.  运行一个算法，为 0 到 n（含）之间的所有 k 值生成 C(n,k)，其中 n 由用户输入确定。该算法需要利用递归阶乘函数。它需要返回一个数组，其中包含每个可能大小的子集的数量。显示每个可能大小的子集数。应在 n 上执行错误检查。

4.  运行一个算法，为 0 到 n（含）之间的所有 k 值生成 C(n,k)，其中 n 由用户输入确定。该算法需要利用迭代阶乘算法。它需要返回一个数组，其中包含每个可能大小的子集的数量。显示每个可能大小的子集数。应在 n 上执行错误检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:29:07.283

我看到您所有的问题都与一个主题有关：**递归回溯**。

要生成集合 S 的幂集：

```
function rec( i )
      if i == S.length
         print choocen elements of S
         return
      else
         do not chooce element i of S
         rec(i + 1)
         choose element i of S
         rec(i + 1) 
```

`C(n, k)`一旦你理解了递归的概念，问题是相似的。我不会为你的任务提供解决方案:)

# c# - 使用威瑞信签署 .Net 代码

> ID：12978353
> 
> 赞同：0
> 
> 时间：2012-10-19T16:15:30.617
> 
> 标签：c#, verisign

我不确定他们为什么不能简化签名代码的过程。似乎每次发布都需要一天或更长时间才能弄清楚。我们使用 Verisign 并拥有当前的 pfx 文件。

我有一个以管理员身份运行的应用程序，因此我需要对应用程序和安装程序都进行签名。几个月前我设法完成了一次，并发布了。在这个版本中，我决定简化流程，并设置 Visual Studios 自动签署所需的文件，使用 Properties -> Signing 为每个项目。然后我运行我的脚本，同时将安装程序构建为 PostBuildEvent 以对其进行签名。

我以为一切都很顺利，因为安装人员给出了公司名称。但是，当我运行应用程序时，UAC 中显示“未知”。我决定回到我之前做的方式，构建，签署文件，构建安装程序，最后签署它。这在三个月前有效，但现在我仍然在 UAC 弹出窗口中遇到“未知”问题。

我没有向解决方案添加任何新类，因此我的签名脚本应该仍然有效。我无法弄清楚我可能做错了什么。是否有任何关于如何使用 Verisign 签名的良好文档或应遵循的简单规则？似乎`signtool.exe sign /f "Verisign.2012.pfx" /p myPassword "C:\...\Installer.msi"`在构建后调用所有 .exe 和 .dll 文件，然后创建安装程序并在 .exe 和 .msi 文件上调用相同的文件应该确保所有内容都已签名并且我不应该看到“未知”。

有没有比我更有经验的人（我相信有几个）可能会看到我理解中的巨大漏洞，并让我走上正确的道路？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:44:40.850

我确定我做错了什么。我正在构建项目，然后签署它。之后，我正在构建安装程序并对其进行签名。但是，通过一些测试，我发现构建安装程序会从我的文件中删除数字签名。

在 VS 项目上使用 VeriSign 签名的正确方法不是创建使用项目输出的安装程序。相反，手动选择文件并将其添加到安装程序。之后，您将需要添加一个构建后事件（属性 -> 构建事件 -> 构建后事件命令行）来签署每个项目的输出。

感谢那些提出解决方案的人。

# c# - 在 C# 中计算百分比

> ID：12978355
> 
> 赞同：4
> 
> 时间：2012-10-19T16:15:35.837
> 
> 标签：c#, backgroundworker, percentage

尝试计算完成百分比时我在这里遗漏了什么？我的百分比方程似乎返回了不正确的百分比。

```
Int32 counter = 0;

foreach (var vehicle in vehicles)
{
    counter += 1;

    Int32 percentage = (Int32)((double)counter * vehicles.Count()) / 100;

    _worker.ReportProgress(percentage);

    if (_worker.CancellationPending)
    {
        e.Cancel = true;
        _worker.ReportProgress(0);
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T16:21:29.330

要计算出你应该做的百分比

```
progress
--------  x 100
 total 
```

你在做

```
progress x total
----------------
       100 
```

尝试`(counter * 100) / vehicles.Count()`改用。

注意：如果你在除法之前乘以 100，这意味着你不需要对浮点数/双精度数进行强制转换，但这确实意味着你所有的百分比都被四舍五入了。如果你想要一个更精确的百分比，那么将其转换为双精度数，不要担心顺序。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-19T16:17:43.327

怎么样

```
 Int32 percentage = counter * 100 / vehicles.Count(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T16:22:21.093

试试这个 ：-

```
 int percentage= (int)( ((100f * counter) / vehicles.count())); 
```

强制转换为浮点数以避免整数除法给你一个零，你可以添加 0.5 进行整数舍入。使用 0.5f 而不是 0.5 来防止它扩大到两倍，即

```
 int percentage= (int)(0.5f + ((100f * counter) / vehicles.count())); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-19T15:59:36.827

你也可以使用 Math.round()：

```
Int32 percentage = (Int32)Math.Round( (double)(counter * 100) / vehicles.Count()); 
```

# google-app-engine - GAE 实例的调度和 JDO 初始化

> ID：12978362
> 
> 赞同：1
> 
> 时间：2012-10-19T16:15:59.990
> 
> 标签：google-app-engine, google-cloud-datastore

我知道 GAE 调度程序是备受关注和关注的主题。我也知道这对我的应用程序的性能至关重要。上周我一直在优化和分析我的应用程序。

我还了解调度程序旨在跨应用程序大小的范围工作，并且就并发用户而言，该算法可能不会针对我相对较小规模的应用程序进行优化。

我认为以下对待处理延迟的描述是错误的，这会导致不可避免的延迟：

> Pending Latency 滑块控制请求在由应用程序的默认版本的实例提供服务之前在待处理队列中花费的时间。如果最小挂起延迟很高，App Engine 将允许请求等待而不是启动新实例来处理它们。这可以减少您的应用程序使用的实例小时数，但会导致更多用户可见的延迟。

当我串行执行 10 个请求（全部需要 1-3 秒（启用多线程））时，如果等待延迟为 15 秒，并且有 2 个空闲实例，它怎么可能会启动新实例？

我为什么在乎？我可以把我所有的初始化都放在我的热身代码中吗？错误的。我正在将 GAE/J 与 JDO 一起使用。似乎每个实例第一次遇到实体类型时，它第一次会产生几秒钟的“验证”开销。大多数情况下，除非您将 JDO 日志记录设置为 INFO 级别，否则您甚至不会知道这种情况正在发生。

**我的问题如下：**

**是否有其他人经历过以下与调度程序行为及其与 DS 初始化的交互有关的情况，如果是这样，您能否提出一个解决方案，以便我可以避免发生此类延迟？**

具体来说，情况是：

*   使用 JDO - 每次新实例第一次“接触”实体类型时，都会产生初始化开销（如果您有疑问，请将 JDO 日志记录级别设置为 INFO）。此开销约为 2-3 秒
*   这种开销导致的延迟增加，加上调度程序明显忽略 Pending Latency 参数的事实意味着它更有可能启动一个新实例，而不是计算现有实例可以处理请求。
*   因为新请求正在由新实例处理，所以上述初始化开销是重复的。这样恶性循环就一直存在。

请注意，我已经考虑了以下补救措施：

1.  迁移到休眠或类似 - 一项艰巨的任务，并且不清楚它是否会解决问题。
2.  修改我的应用程序架构以使用后端来提供所有数据库功能，因为至少我可以控制我正在运行的数量等。
3.  也许我缺少一些 JDO 配置可以简单地避免上述开销？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:22:42.037

是的，JDO 在你第一次访问它时会造成延迟。这是因为 JDO 规范要求实现能够提供只能通过自省 DB 收集的信息；即使您不想要这些信息，它仍然必须收集它。对于在 App Engine 上使用 Java 的任何人，我的建议是不要使用 JDO - 使用更适合 App Engine 的东西，例如 Objectify。

在您的情况下，未决延迟设置不太可能导致新实例启动；Min Idle 实例的可能性更大；如果该值大于 0，则一旦实例被请求占用，调度程序就会启动一个额外的实例。

# iphone - 将ios手机推送通知也发送到山狮桌面

> ID：12978363
> 
> 赞同：2
> 
> 时间：2012-10-19T16:16:13.387
> 
> 标签：iphone, ios, push-notification

我假设答案是否定的，但有人问我是否可以让我通过推送通知发送到手机的推送通知也显示在 mt lion 通知中心？

# ruby-on-rails - Rails：多模型表单不会将数据写入模型

> ID：12978366
> 
> 赞同：1
> 
> 时间：2012-10-19T16:16:20.237
> 
> 标签：ruby-on-rails, database, multi-model-forms

好的，这正在驱使我转弯。我有三个模型[与这个问题相关]：Outfit、Outfit_relationship 和 Answer。Outfit 是父模型，其他是子模型。Outfit 模型如下所示：

```
class Outfit < ActiveRecord::Base
  attr_accessible :user_id, :outfit_origin_id, :outfit_parent_id, :outfitrelationship_id #review before going live
  attr_accessible :item_id, :image_size_height, :image_size_width, :image_x_coord, :image_y_coord, :zindex, :outfit_id
  attr_accessible :description, :question_id, :user_id, :outfit_id

  has_many :answers
  has_many :outfit_relationships

  accepts_nested_attributes_for :outfit_relationships, :allow_destroy => :true
  accepts_nested_attributes_for :answers 
```

请注意，第二个和第三个 attr_accessible 用于访问其他模型的属性。我不确定这是否绝对必要，有的文章说有，有的说没有，所以我把它放进去。

我为此数据创建了一个多模型表单，我想用一个按钮发布它。这是代码：

```
<%= form_for(@outfit) do |post_outfit| %>

  <%= post_outfit.fields_for @outfit.outfit_relationships do |build| %>
    <table>
     <tr>
        <td>X Coord <%= build.text_area :image_x_coord, :size => '1x1' %></td>
        <td>Y Coord <%= build.text_area :image_y_coord, :size => '1x1' %></td>
        <td>Z Index <%= build.text_area :zindex, :size => '1x1' %></td>
        <td>Height <%= build.text_area :image_size_height, :size => '1x1' %></td>
        <td>Weight <%= build.text_area :image_size_width, :size => '1x1' %></td>
     </tr>
    </table>
  <% end %>

  <%= post_outfit.fields_for @outfit.answers do |build| %></br></br>
    <%= image_tag current_user.fbprofileimage, :size => "40x40" %></br>
    <%= current_user.name %></br>
    Comment: <%= build.text_area :description, :size => '10x10' %>
  <% end %>

  <%= post_outfit.fields_for @outfit do |build| %> </br>
   origin id: <%= build.text_area :outfit_origin_id, :size => '1x1' %></br>
   parent id:  <%= build.text_area :outfit_parent_id, :size => '1x1' %></br>
  <% end %>     

  <div id="ss_QID_actions_container">
    <%= post_outfit.submit "Submit checked", :class => "btn btn-small btn-primary" %>
  </div>
<% end %> 
```

以下是装备控制器的相关信息：

```
def new 
    @outfit = Outfit.new
    @outfit.save
    @outfit.answers.build
    @outfit.outfit_relationships.build

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @outfit }
    end
  end

def create
@outfit = Outfit.new(params[:id])
@comment = @outfit.answers.create(params[:answer])
@outfitrelationship = @outfit.outfit_relationships.create(params[:outfit_relationship])
redirect_to outfit_path(@outfit) 
```

所以问题是除了ID之外没有任何东西写入我的数据库。我确定我在这里做一些愚蠢的事情，但不知道为什么。

# jquery - 使用 e.target == this 来指定 hitbox

> ID：12978373
> 
> 赞同：2
> 
> 时间：2012-10-19T16:17:16.903
> 
> 标签：jquery, html, css

我在我的 Web 应用程序上创建了一个弹出窗口，我使用了一些 jQuery 让它在单击特定位置时淡入淡出。我稍微工作的一个具体功能是，如果单击背景而不是框本身，则应用程序将关闭。

```
$("#fixedHoverBg").click(function(e){
    if(e.target == this)
    {
        $("#fixedHoverBg").fadeOut("slow");
    }
}); 
```

当在弹出框上方或下方单击背景时效果很好，但不是在它的左侧或右侧。奇怪的是，盒子周围没有容器，所以它不可能是另一个干扰背景点击的元素。

这是我在 HTML 中的 div 结构：

```
<div id='fixedHoverBg'>
<center>
    <div id='selectorWindow'>
        <!-- Content in here -->
    </div>
</center> 
```

CSS：

```
#fixedHoverBg {
    position: fixed;
    background - color: rgba(255, 255, 255, 0.85);
    z - index: 200000;
    width: 100 % ;
    height: 100 % ;
    top: 0;
    left: 0;
    display: none;
}

#selectorWindow {
    width: 730px;
    height: 600px;
    background: radial - gradient(ellipseatcenter, rgba(87, 179, 237, 1) 0 100 % ;
    filter: progid: DXImageTransform.Microsoft.gradient(startColorstr = '#57b3ed', endColorstr = '#328ee0', GradientType = 1);
    margin - top: 90px;
    border: 5px solid#ffae43;
    box - shadow: 0 0 0 6px white,
    0 0 20px 5px rgba(0, 0, 0, 0.4);
    border - radius: 5px;
    position: relative;
    display: block;
}​ 
```

奇怪的是，我似乎看不出是什么导致了这种奇怪的点击效果！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:34:22.933

You shouldn't use the outdated `<center>` tag. It creates a block element around the popup's content that you don't see but on what you click when you click to the left or right of the content.

Replace it by some css and everything should be fine:

```
#selectorWindow {
    margin-left: auto;
    margin-right: auto;
    /* ... */
} 
```

Demo: [http://jsfiddle.net/Qs4wX/](http://jsfiddle.net/Qs4wX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:34:00.160

Your problem is that the `<center>` element si spanning the entire width of viewport (use Firebug or Developer Tools to check that). You can take care of that by modifying your click event selector to include that element as well:

```
$("#fixedHoverBg, #fixedHoverBg > center").click(function(e){
    if(e.target == this)
    {
        $("#fixedHoverBg").fadeOut("slow");
    }
}); 
```

Working demo here: [http://jsfiddle.net/393CR/1/](http://jsfiddle.net/393CR/1/)

# java - 手动操作 ArrayList

> ID：12978375
> 
> 赞同：1
> 
> 时间：2012-10-19T16:17:40.597
> 
> 标签：java, arraylist

我有一个任务，我必须创建一个双端队列，但是我不允许使用任何内置类或接口。我正在使用数组列表实现我的双端队列。我的问题是，例如，当我必须添加到数组列表的开头（队列的开头）时，我不允许这样做：

```
public void addFirst(ArrayList<Integer> array) 
{
    array.add(0, int);
} 
```

有没有办法在不使用 add() 函数的情况下做到这一点？例如手动添加到前面并将数组的其余部分向右移动？或者也许创建一个新的数组列表并复制......我不确定。任何帮助都会很棒；我有一堆函数要编写，完成第一个函数肯定会让我朝着正确的方向前进。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:20:55.230

如果您不允许使用任何内置列表类，我怀疑您应该查看数组，而不是 ArrayList。有像[System.arrayCopy](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)这样的函数可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:43:56.320

```
class ArrayList< T >
{
   private int _capacity;
   private int _size;
   private T   _data;

   ArrayList( int capacity )
   {
      _capacity = capacity;
      _size     = 0;
      _data     = new T[_capacity];
   }

   void add( T t )
   {
      if( _size < _capacity )
      {
         _data[_size++] = t;
      }
      else
      {
         // do it yourself
      }
   }

   void insert( int index, T t )
   {
      if( _size < _capacity )
      {
         System.arrayCopy( _data, index, _data, index + 1, _size - index );
         _data[_size++] = t;
      }
      else
      {
         // do it yourself
      }
   }

   ...
} 
```

# android - 撞痣改变图片但痣不回来

> ID：12978377
> 
> 赞同：0
> 
> 时间：2012-10-19T16:17:44.370
> 
> 标签：android, view, postdelayed

我做了一个游戏，你应该撞到痣。我`postDelayed`用来让痣每隔几秒钟出现和消失一次。

问题是当我触摸痣时，它会变成挤压的痣图片并且痣消失（应该如此），但是当痣回到屏幕时，它会出现错误的图片（挤压的）。

**STAGE 视图类**

```
private Runnable everyThreeSeconds = new Runnable() {
    public void run() {
        moleView.getMole().moveMole();
        isPop = !isPop;
        postDelayed(everyThreeSeconds, (3000))  ;     
    }
};

public AllViews(Context context) {
    super(context);
    test = new Paint();
    first = new First_Stage();
    isPop=false;
    post(everyThreeSeconds);

}

public void setViews(StageView mainView, MoleView moleView,
        PointsView pointsView, TimerView timerView,ClubView clubView)

{
    this.mainView = mainView;
    this.moleView = moleView;
    this.pointsView = pointsView;
    this.timerView = timerView;

}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    mainView.onDraw(canvas);
    pointsView.onDraw(canvas);
    timerView.onDraw(canvas);
    clubPic=BitmapFactory.decodeResource(getResources(), R.drawable.clubdown);
    canvas.drawBitmap(clubPic, this.x-39,this.y-20, null);

    if (isPop){
        moleView.onDraw(canvas);
    }           

     invalidate();

} 
```

**鼹鼠类**

```
public MoleView(Context context, Mole mole) {
    super(context);
    this.mole=mole;
}

@Override
protected void onDraw(Canvas canvas) {
    if (!bool){
        molePic=BitmapFactory.decodeResource(getResources(), R.drawable.nest_full_mole);
        canvas.drawBitmap(molePic, mole.getX(), mole.getY(), null);
    }else {
        molePic=BitmapFactory.decodeResource(getResources(),     R.drawable.pow);
        canvas.drawBitmap(molePic, mole.getX(), mole.getY(), null);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:54:01.080

刚刚添加到 if 条件一个 else 将 true 返回 false 并且它可以工作

```
@Override
protected void onDraw(Canvas canvas) {
 super.onDraw(canvas);
 mainView.onDraw(canvas);
 pointsView.onDraw(canvas);
 timerView.onDraw(canvas);
 clubPic=BitmapFactory.decodeResource(getResources(), R.drawable.clubdown);
 canvas.drawBitmap(clubPic, this.x-39,this.y-20, null);

 if (isPop){
    moleView.onDraw(canvas);
 }else{
        moleView.setBool(false);
    }           

  invalidate(); 
```

# c# - 大量添加/更改方法和构造函数重载是 DDD 的结果吗？

> ID：12978381
> 
> 赞同：2
> 
> 时间：2012-10-19T16:18:01.030
> 
> 标签：c#, domain-driven-design, domain-model

我有一堂课：

```
 public class Person
{
    public string FirstName { get; private set; }
    public string LastName { get; private set; }
    public string Email { get; private set; }
    public string Telephone { get; private set; }
    public Address Address { get; private set; }

    public Person(string firstName, string lastName)
    {
        //do null-checks
        FirstName = firstName;
        LastName = lastName;
        Address = new Address();
    }

    public void AddOrChangeEmail(string email)
    {
        //Check if e-mail is a valid e-mail here
        Email = email;
    }

    public void AddOrChangeTelephone(string telephone)
    {
        //Check if thelephone has correct format and valid symbols
        Telephone = telephone;
    }

    public void AddOrChangeAdress(Address address)
    {
        Address = address;
    } 
```

不在构造函数中的属性是可选的，即此人不需要电子邮件、地址或电话。但是，我想给类的用户一个创建对象的机会，而不必首先提供所需的信息，然后必须找出使用什么方法来添加信息。

**问题：**

1.  创建 3 个额外的重载给他们这个选项是否正确？
2.  我应该允许可选属性上的公共设置器并在那里进行验证吗？
3.  如果此人结婚并更改姓氏，我是否需要其他方法来更改姓氏，或者我是否也应该将此设置器公开，并且只在构造函数中要求它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:25:52.983

1.  不。
2.  是的
3.  公开。

假设您将在`AddOrChange`格式化逻辑或验证等方法中包含更多代码，那么我将执行以下操作。否则，我将完全摆脱这些`AddOrChange`方法：

```
public class Person
{
    private string _email = string.empty;
    private string _telephone = string.empty;
    private Address _address = new Address();

    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { 
        get { return _email }
        set { AddOrChangeEmail(value); }
    }
    public string Telephone { 
        get { return _telephone;}
        set { AddOrChangeTelephone(value); }
     }
    public Address Address { 
        get { return _address;  }
        set { AddOrChangeAddress(value); }
    }

    public Person(string firstName, string lastName)
    {
        //do null-checks
        FirstName = firstName;
        LastName = lastName;
    }

    private void AddOrChangeEmail(string email)
    {
        //Check if e-mail is a valid e-mail here
        _email = email;
    }

    private void AddOrChangeTelephone(string telephone)
    {
        //Check if thelephone has correct format and valid symbols
        _telephone = telephone;
    }

    private void AddOrChangeAddress(Address address)
    {
        _address = address;
    }
} 
```

* * *

要使用此类，您可以执行以下任何操作：

```
Person p = new Person("Tom", "Jones");
p.Telephone = "9995551111"; 
```

或者

```
Person p = new Person("Tom", "Jones") { Telephone = "9995551111", Email="spamme@ms.com" } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T16:24:04.773

`AddOrChange`相当于具有公共设置器的简单属性，因此您不需要这些方法。

```
public class Person
{
    public string FirstName { get; private set; }
    public string LastName { get; private set; }
    public Email Email { get; set; }
    public Telephone Telephone { get; set; }
    public Address Address { get; set; }

    public Person(string firstName, string lastName)
    {
        //do null-checks
        FirstName = firstName;
        LastName = lastName;
    }
} 
```

1.  如果用户在创建人员期间想要提供除所需数据之外的其他内容，她可以使用类初始化器。您还可以向构造函数添加一些可选参数。

    `var bob = new Person("Bob", "Uncle") { Address = someAddress };`

2.  如果人可以搬迁，那么为什么不使用公共设置器来更改地址呢？当然，您应该检查地址是否有效。此外，如果搬迁是一个业务流程（例如，您要在酒店搬迁某人），那么最好在域服务​​上进行此操作（这将验证目标房间是否为空且准备就绪）。

3.  允许更改名称是可以的。通常名称不是此类实体的身份，因此它可能会更改。

此外，我还介绍了电子邮件和电话的价值对象。我认为验证电子邮件地址是否有效不是个人的责任。将其移至电子邮件类。与电话和地址相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-04T09:22:58.713

> 大量添加/更改方法和构造函数重载是 DDD 的结果吗？

不，许多更新方法不是 DDD 的结果。

**代码**

您的`Person`类可以重写为只有 2 个更新方法：

```
class Person

    public function Rename(FirstName as Name, LastName as Name) as Person

    public function ChangeContacts(
        Address as Maybe(of Address), 
        Phone as Maybe(of Phone), 
        Mail as Maybe(of MailAddress)) as Person
end class 
```

`Rename`方法接受两个特殊`Name`类型的必需参数。名称的验证检查在创建名称时进行，而不是在将它们传递给`Person`类时进行。

`ChangeContacts`方法接受三个可选参数，其中任何一个都可以不存在。特殊`Maybe`类型表示它们是可选的。Special`Address`和类型表示这些参数已经有效`Phone`，`MailAddress`不需要在`Person`类中再次验证。

**用例**

人结婚并改姓

```
Person = Person.
    Rename(Person.FirstName, LastNameAfterMarriage) 
```

人购买新的电话号码

```
Person = Person.
    ChangeContacts(Person.Address, NewPhoneNumber, Person.Mail) 
```

人丢失了电话号码

```
Dim NewPhoneNumber = Maybe.Create(Nothing)
Person = Person.
    ChangeContacts(Person.Address, NewPhoneNumber, Person.Mail) 
```

模式是用旧值+一些新值调用更新方法。

# javascript - 如何将javascript编写到自己执行的div

> ID：12978382
> 
> 赞同：0
> 
> 时间：2012-10-19T16:18:06.403
> 
> 标签：javascript

我的应用程序正在从其中包含 javascript 的 XML 文件中检索内容。我正在使用 javascript 并将其放入我的 DOM 中，但脚本没有执行。

如何将 javascript 写入我的页面，然后执行？

我的应用程序是这样的......

```
var javaScriptFromFile = getJS();
myDiv.innerHTML = javaScriptFromFile;
//Next, how do I execute the javascript? 
//Can I make the javascript in the innerHTML self executing? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:20:36.353

你可以[`eval`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/eval)用javascript。或者`<script>`在放入`innerHTML`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:20:56.773

把它放在一个 div 的脚本标签中。但你确定这***真的***是你想要的吗？

# iphone - iPhone上的Google+ OAuth2如何注销

> ID：12978386
> 
> 赞同：1
> 
> 时间：2012-10-19T16:18:31.950
> 
> 标签：iphone, oauth-2.0, google-plus

我正在编写一个应用程序，学生可以使用 goole+ 登录。我关注了GOOGLE Developer，成功登录并获取了用户个人资料信息。现在我正在尝试注销。我删除了应用程序，退出了 safari、iPhone 上的所有 google 帐户、清除了 cookie、使用不同的 google id 登录的历史记录，但即使经过所有步骤，我也从 google 获得了刷新令牌，它返回给我相同的用户配置文件我第一次登录。我知道它有一个到期时间，但我想知道在 accessToekn 自行到期之前是否没有办法注销它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T22:17:52.903

首先，您使用的是 Google+ Platform iOS SDK 吗？ [https://developers.google.com/+/mobile/ios/](https://developers.google.com/+/mobile/ios/)这是您使用 Google+ Platform API 进行 iOS 开发的最佳资源。

然后，您将可以访问诸如`signOut` [https://developers.google.com/+/mobile/ios/api/interface_google_plus_sign_in](https://developers.google.com/+/mobile/ios/api/interface_google_plus_sign_in)之类的函数，该函数会从钥匙串中清除 OAuth 2.0 令牌。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-27T02:06:15.100

*（有时我想知道是否有人在回答之前阅读了这些帖子）*

要注销，在 IOS（Iphone、iPad 等）上的 Google+ 中，在 G+ 中进入**设置**（Google+ 设置，而非设备设置）并选择**SIGN OUT**。就这么简单。

# eclipse - Eclipse 相当于“在 Windows 资源管理器中打开文件夹”

> ID：12978390
> 
> 赞同：3
> 
> 时间：2012-10-19T16:19:06.277
> 
> 标签：eclipse, visual-studio-2010

Visual Studio 中有一个方便的功能，您可以在选择项目时“在 Windows 资源管理器中打开文件夹”，这将打开存储项目和源文件的文件夹。

是否有 Eclipse 的等效功能？我还没有找到一种方法，甚至可以直接从 eclipse 项目资源管理器中找到磁盘上的项目或源文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T17:52:49.573

有一些第三方插件可以提供这种功能。我目前使用的一个叫做 EasyShell。您可以通过打开 Eclipse Marketplace（在*帮助*菜单下）并搜索 EasyShell 轻松安装它。

# python - 在 Python 中使用 pytz 本地化纪元时间

> ID：12978391
> 
> 赞同：19
> 
> 时间：2012-10-19T16:19:12.233
> 
> 标签：python, datetime, timezone, epoch, pytz

我正在使用 pytz 将纪元时间戳转换为不同时区的日期。我想要做的是创建一个 DateTime 对象，它接受一个 Olson 数据库时区和一个纪元时间并返回一个本地化的 datetime 对象。最终，我需要回答诸如“纪元时间 1350663248 在纽约几点钟？”之类的问题。

这里有些东西不能正常工作：

```
import datetime, pytz, time

class DateTime:
    def __init__(self, timezone, epoch):
        self.timezone = timezone
        self.epoch = epoch
        timezoneobject = pytz.timezone(timezone)
        datetimeobject = datetime.datetime.fromtimestamp( self.epoch )
        self.datetime = timezoneobject.localize(datetimeobject)

    def hour(self):
        return self.datetime.hour

if __name__=='__main__':
    epoch = time.time()
    dt = DateTime('America/Los_Angeles',epoch)
    print dt.datetime.hour
    dt = DateTime('America/New_York',epoch)
    print dt.datetime.hour 
```

这将打印相同的小时，而一个应该提前 3 小时左右。这里出了什么问题？我是一个 Python 初学者，感谢任何帮助！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-06T21:53:13.057

`datetime.fromtimestamp(self.epoch)`返回不应与任意 timezone.localize() 一起使用的本地时间；您需要`utcfromtimestamp()`以 UTC 获取日期时间，然后将其转换为所需的时区：

```
from datetime import datetime
import pytz

# get time in UTC
utc_dt = datetime.utcfromtimestamp(posix_timestamp).replace(tzinfo=pytz.utc)

# convert it to tz
tz = pytz.timezone('America/New_York')
dt = utc_dt.astimezone(tz)

# print it
print(dt.strftime('%Y-%m-%d %H:%M:%S %Z%z')) 
```

或者更简单的替代方法是直接从时间戳构造：

```
from datetime import datetime
import pytz

# get time in tz
tz = pytz.timezone('America/New_York')
dt = datetime.fromtimestamp(posix_timestamp, tz)
# print it
print(dt.strftime('%Y-%m-%d %H:%M:%S %Z%z')) 
```

在这种情况下，它隐式地从 UTC 转换。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-01-02T15:41:50.597

要从 unix 时间戳创建[**`datetime`**](https://docs.python.org/3/library/datetime.html)属于特定时区的对象，您可以[**`pytz`**](http://pytz.sourceforge.net/)在`tz`创建`datetime`. 例如：

```
>>> from datetime import datetime
>>> import pytz

>>> datetime.fromtimestamp(1350663248, tz= pytz.timezone('America/New_York'))
datetime.datetime(2012, 10, 19, 12, 14, 8, tzinfo=<DstTzInfo 'America/New_York' EDT-1 day, 20:00:00 DST>) 
```

您可以获得所有时区的列表，使用**[`pytz.all_timezones`](http://pytz.sourceforge.net/#helpers)**它*返回可以使用的时区名称的详尽列表*。

另请查看[tz 数据库时区](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)wiki 列表。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-19T16:28:11.960

```
epochdt = datetime.datetime.fromtimestamp(epoch)
timezone1 = timezone("Timezone/String")
adjusted_datetime = timezone1.localize(epochdt) 
```

从记忆中工作，所以请原谅任何语法错误，但这应该让你走上正确的轨道。

编辑：错过了关于知道时间等的部分。Python 有很棒的[时间/日期格式](http://docs.python.org/library/datetime.html)。在该链接的底部几乎是显示如何从 datetime 对象中提取不同属性的表格。

# python - 避免有两个不同的数字子类（int 和 long）？

> ID：12978393
> 
> 赞同：5
> 
> 时间：2012-10-19T16:19:30.763
> 
> 标签：python, subclassing

在本质上处理自定义枚举类型实现时，我遇到了一种情况，似乎我必须从两者派生出单独但*几乎*相同的子类`int`，`long`因为它们在 Python 中是不同的类。这似乎有点讽刺意味，因为两者的实例通常可以互换使用，因为在大多数情况下，它们只是在需要时自动创建。

我所拥有的工作正常，但本着 DRY（不要重复自己）的精神，我不禁想知道是否有更好的，或者至少更简洁的方法来实现这一点。目标是让子类实例可以在任何地方使用——或者尽可能接近——它们的基类实例本来可以使用。理想情况下，这应该自动发生，类似于内置在检测到需要时`int()`实际返回 a的方式。`long`

这是我当前的实现：

```
class NamedInt(int):
    """Subclass of type int with a name attribute"""
    __slots__ = "_name"  # also prevents additional attributes from being added

    def __setattr__(self, name, value):
        if hasattr(self, name):
            raise AttributeError(
                "'NamedInt' object attribute %r is read-only" % name)
        else:
            raise AttributeError(
                "Cannot add attribute %r to 'NamedInt' object" % name)

    def __new__(cls, name, value):
        self = super(NamedInt, NamedInt).__new__(cls, value)
        # avoid call to this subclass's __setattr__
        super(NamedInt, self).__setattr__('_name', name)
        return self

    def __str__(self):  # override string conversion to be name
        return self._name

    __repr__ = __str__

class NamedLong(long):
    """Subclass of type long with a name attribute"""
    # note: subtypes of variable length 'long' type can't have __slots__

    def __setattr__(self, name, value):
        if hasattr(self, name):
            raise AttributeError(
                "NamedLong object attribute %r is read-only" % name)
        else:
            raise AttributeError(
                "Cannot add attribute %r to 'NamedLong' object" % name)

    def __new__(cls, name, value):
        self = super(NamedLong, NamedLong).__new__(cls, value)
        # avoid call to subclass's __setattr__
        super(NamedLong, self).__setattr__('_name', name)
        return self

    def __str__(self):
        return self._name  # override string conversion to be name

    __repr__ = __str__

class NamedWholeNumber(object):
    """Factory class which creates either a NamedInt or NamedLong
    instance depending on magnitude of its numeric value.
    Basically does the same thing as the built-in int() function
    does but also assigns a '_name' attribute to the numeric value"""
    class __metaclass__(type):
        """NamedWholeNumber metaclass to allocate and initialize the
           appropriate immutable numeric type."""
        def __call__(cls, name, value, base=None):
            """Construct appropriate Named* subclass."""
            # note the int() call may return a long (it will also convert
            # values given in a string along with optional base argument)
            number = int(value) if base is None else int(value, base)

            # determine the type of named numeric subclass to use
            if -sys.maxint-1 <= number <= sys.maxint:
                named_number_class = NamedInt
            else:
                named_number_class = NamedLong

            # return instance of proper named number class
            return named_number_class(name, number) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:27:52.750

覆盖[分配器](https://stackoverflow.com/a/4859158/20862)将使您返回适当类型的对象。

```
class NamedInt(int):
  def __new__(...):
    if should_be_NamedLong(...):
      return NamedLong(...)
     ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:41:29.387

以下是通过多重继承解决 DRY 问题的方法。不幸的是，它不能很好地处理`__slots__`（它会导致 compile-time `TypeError`）所以我不得不把它排除在外。希望这些`__dict__`值不会为您的用例浪费太多内存。

```
class Named(object):
    """Named object mix-in. Not useable directly."""
    def __setattr__(self, name, value):
        if hasattr(self, name):
            raise AttributeError(
                "%r object attribute %r is read-only" %
                (self.__class__.__name__, name))
        else:
            raise AttributeError(
                "Cannot add attribute %r to %r object" %
                (name, self.__class__.__name__))

    def __new__(cls, name, *args):
        self = super(Named, cls).__new__(cls, *args)
        super(Named, self).__setattr__('_name', name)
        return self

    def __str__(self):  # override string conversion to be name
        return self._name

    __repr__ = __str__

class NamedInt(Named, int):
    """NamedInt class. Constructor will return a NamedLong if value is big."""
    def __new__(cls, name, *args):
        value = int(*args) # will raise an exception on invalid arguments
        if isinstance(value, int):
            return super(NamedInt, cls).__new__(cls, name, value)
        elif isinstance(value, long):
            return NamedLong(name, value)

class NamedLong(Named, long):
    """Nothing to see here."""
    pass 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T19:28:05.337

这是一个类装饰器版本：

```
def named_number(Named):

    @staticmethod
    def __new__(cls, name, value, base=None):
        value = int(value) if base is None else int(value, base)
        if isinstance(value, int):
            NamedNumber = Named  # NamedInt / NamedLong
        else:
            NamedNumber = cls = NamedLong
        self = super(NamedNumber, cls).__new__(cls, value)
        super(NamedNumber, self).__setattr__('_name', name)
        return self

    def __setattr__(self, name, value):
        if hasattr(self, name):
            raise AttributeError(
                "'%r' object attribute %r is read-only" % (Named, name))
        else:
            raise AttributeError(
                "Cannot add attribute %r to '%r' object" % (name, Named))

    def __repr__(self):
        return self._name

    __str__ = __repr__

    for k, v in locals().items():
        if k != 'Named':
            setattr(Named, k, v)

    return Named

@named_number
class NamedInt(int):
    __slots__ = '_name'

@named_number
class NamedLong(long): pass 
```

# ios - 垂直滑动/拖屏 IOS / Phonegap

> ID：12978395
> 
> 赞同：0
> 
> 时间：2012-10-19T16:19:40.867
> 
> 标签：ios, html, cordova, phonegap-plugins

是否可以在 Phonegap 中创建垂直滑动屏幕更改 - （如在 Facebook 应用程序中，您可以向左滑动以查看通知）。

我想在主应用程序中包含 5 个页面 - 但也可以向左滑动以查看包含通知/日历项目列表的单独页面

只是想在沿着那条路线前进之前确定这是可能的..

干杯保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:36:45.803

所以你本质上想要滚动但按页面？您可以使用 jQuery Mobile 滚动视图来获取功能[http://jquerymobile.com/demos/1.0a4.1/experiments/scrollview/scrollview-direction.html](http://jquerymobile.com/demos/1.0a4.1/experiments/scrollview/scrollview-direction.html)

# facebook-graph-api - 如何在 Facebook Open Graph API 帖子中发表评论？

> ID：12978397
> 
> 赞同：1
> 
> 时间：2012-10-19T16:19:56.677
> 
> 标签：facebook-graph-api

我使用带有自定义操作的 Facebook Open Graph API 创建帖子。这些帖子显示在时间轴中，标题为“用户名添加了访问...”（“添加”和“访问”是我的自定义操作和对象），然后是带有图像、标题和描述的块。

我创建了一个向 Facebook 发送 HTTP POST 请求的帖子，其中只有一个页面链接。Facebook 从该页面的元标记 og:type、og:url、og:title、og:image、og:description 获取数据。

我想在标题“用户名添加访问...”和图像之间放置一个文本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T12:48:36.163

在打开的图形调用中使用“消息”参数。此键中的文本将显示在您想要的位置。

# html - 让网站像在智能手机上一样出现在 iframe 中？

> ID：12978398
> 
> 赞同：0
> 
> 时间：2012-10-19T16:20:10.077
> 
> 标签：html, css, iframe

如果我有一个 iframe，打开 te url [http://www.google.com](http://www.google.com)，它会加载整个网页，除非有一个移动样式表，就像在桌面浏览器上一样，带有滚动条。如何让它像在智能手机上查看一样打开？

```
<iframe id="frame" src="http://www.google.com" width="320" height="480"></iframe> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:21:51.813

在 iframe 中加载页面时，网站无法指示浏览器伪装成移动浏览器。

您需要可以在不同的 URI 下访问框架中的页面，该 URI 默认提供移动内容和样式表，而不是使用任何类型的检测（无论是媒体查询、用户代理嗅探还是其他任何东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:33:51.483

让第三方网站像在 iframe 中的移动浏览器中一样加载的唯一方法是让浏览器本身发送适当的用户代理字符串。作为网站开发人员，这不是您可以控制的。

但是，如果您可以请求页面内容服务器端，您将发出 http 请求，并且可以控制您向其他服务器发送的用户代理字符串。在 .Net 中，您可以创建一个新的 HttpWebRequest 对象并在发出请求之前设置 UserAgentString。

请记住，这实际上是在“欺骗”其他服务器以返回适用于某些平台的内容。当您回复客户的请求时，您还将从您的服务器呈现其他人的内容。请务必检查您正在处理的任何网站内容的任何服务条款，以确保它不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-28T22:37:13.350

好的..但是建议响应不是那么正确..可以将网站视为iframe中的智能手机..当然，该网站必须准备好响应式设计方法..但有可能

遵循以下 3 个步骤： 在步骤#2 css 代码中编辑 IFrame 的大小和边框。

1.）创建页面到框架创建一个名为“framepage.htm”的新网页，具有响应式设计能力（以我的简单博客为例），它将显示在 IFrame 窗口中。2.) 添加 IFrame 嵌入代码 选择并复制以下代码。将其粘贴到您希望 IFrame 窗口出现的 HTML 网页的内容区域。

```
<iframe name="Framename" src="http://mlaynessanchez.blogspot.com" width="400" height="200" frameborder="0" scrolling="auto" class="frame-area">
</iframe> 
```

3.) 添加 CSS 代码 在模板全局样式 .css 文件的底部选择、复制和粘贴以下 css。css 高度和宽度将覆盖 IFrame HTML 代码。使用您的高度、宽度、边框和溢出选项编辑以下内容。

以下代码适用于响应式和非响应式网页。

```
.frame-area {
  display: block;
  width: 100%;  /* RESPONSIVE WIDTH */
  max-width: 400px;
  height: 300px;
  overflow: auto;  /* EDIT TO hidden FOR NO SCROLLBAR */
  border: #999999 1px solid;
  margin: 0px;
  padding: 0px;
  } 
```

如果您没有全局 css 文件，请将上述代码添加到网页的 head 部分，就在以下标签之间的标签之前。

```
<style type="text/css">
  /* css code goes here */
</style> 
```

来源：[http ://allwebco-templates.com/support/S_script_IFrame.htm](http://allwebco-templates.com/support/S_script_IFrame.htm)

# itunes - iTunes 促销代码在正式发布之前有效吗？

> ID：12978400
> 
> 赞同：2
> 
> 时间：2012-10-19T16:20:17.877
> 
> 标签：itunes

我有一个已上传但尚未批准的付费应用程序。当它被批准时，我会要求一个促销代码。那么人们可以在我的应用程序被重新发布之前通过这些代码下载它吗？

应用程序的版本是 1.0，它不是更新。

抱歉，如果我的问题看起来很无聊，但我找不到答案。

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T07:04:51.783

是的。

诅咒你，最低字数限制！

是的：只要确保将发布日期设置在未来某个时间点即可。只要您的应用正在等待开发者发布而不是审核，促销代码就应该有效。:)

# java - 无法让 log4j 在 JBoss 服务器上的 maven Web 项目中工作

> ID：12978402
> 
> 赞同：2
> 
> 时间：2012-10-19T16:20:23.920
> 
> 标签：java, jboss, log4j

我创建了一个 log4j.properties 并将其插入到 ../WEB-INF/classes/ 这是属性文件

```
# Define the root logger with appender FA
log4j.rootLogger=Debug,FA

# Define the file appender
log4j.appender.FA=org.apache.log4j.FileAppender

# Set the name of the file
log4j.appender.FA.File=c:\log.log
log4j.appender.MaxFileSize=50MB

# Set the immediate flush to true
log4j.appender.FA.ImmediateFlush=true

# Define the layout for file appender
log4j.appender.FA.layout=org.apache.log4j.PatternLayout
log4j.appender.FA.layout.ConversionPattern=%d{MM/dd HH\:mm\:ss} %-5p %30.30c %x - %m\n 
```

我在启动时运行的类中有一个简单的 LOG 语句。我在控制台中看到了这一点——所以 LOG 语句工作正常。

JBoss 5.1 内部 Log4j 似乎占了上风，我在网上找到的任何东西都没有修复它。

我可以尝试报告任何建议或我需要提供的任何其他信息吗？

谢谢大家！

编辑：

我将其从属性文件更改为 xml。这是xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">

<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

    <appender name="console" class="org.apache.log4j.ConsoleAppender">
        <param name="Threshold" value="INFO" />
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%-5p %c{1} - %m%n" />
        </layout>
    </appender>

    <appender name="fileAppender" class="org.apache.log4j.FileAppender">
        <param name="Threshold" value="INFO" />
        <param name="file" value="program.log" />
        <param name="append" value="true"/>
            <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%-5p %c{1} - %m%n" />
        </layout>
    </appender>

    <logger name="com.program">
        <level value="debug" />
        <appender-ref ref="console"/>
        <appender-ref reg="fileAppender" />
    </logger>

</log4j:configuration> 
```

我将公司名称和程序重命名为“com.program”，所以这些只是占位符。

编辑：

这是目录结构：

```
src
 ---main
    ---java
    ---resources
    ---webapp
       ---META-INF
       ---WEB-INF
          ---classes
             +log4j.xml
          +jboss-deployment-structure.xml 
```

Maven pom.xml

```
 <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
        <scope>provided</scope>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:31:34.297

确保`jboss-deployment-structure.xml`放入`WEB-INF`.

配置`jboss-deployment-structure.xml`

```
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.0">
  <deployment>
        <exclusions>
            <module name="org.apache.log4j" />
        </exclusions>       
  </deployment>  
</jboss-deployment-structure> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T18:47:32.597

这个问题有两种解决方案。

默认的 jboss log4j 属性文件优先于您的应用程序 log4j 属性文件，因为类加载器按以下顺序加载资源

```
bootstrap > system > common > webapp 
```

你可以

1.  将现有的 conf/log4j.xml 替换为您的副本，以快速满足您的日志记录需求。这是一个快速而肮脏的解决方案。
2.  或者，您可以通过微调[http://docs.jboss.org/process-guide/en/html/logging.html中讨论的日志记录来解决此问题](http://docs.jboss.org/process-guide/en/html/logging.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:05:56.483

我想到了。Maven 未将 log4j.jar 添加到 lib 文件夹中。我应该早点抓住它，但一切都准备好了！！！

# php - MySQL 仅返回 ID 1 的值

> ID：12978404
> 
> 赞同：0
> 
> 时间：2012-10-19T16:20:29.220
> 
> 标签：php, mysql

我收到以下查询：

```
 SELECT      ur.repair_id, ur.repair_complete, ur.repair_noted_by_client, ur.repair_problem, ur.added_at, ur.added_by, ur.repaired_at, ur.repaired_by,
                aa.account_fullname AS added_by_name,
                ar.account_fullname AS repaired_by_name
    FROM        units_repairs AS ur
    LEFT JOIN   (SELECT account_id, account_fullname FROM accounts LIMIT 1) AS aa ON aa.account_id = ur.added_by
    LEFT JOIN   (SELECT account_id, account_fullname FROM accounts LIMIT 1) AS ar ON ar.account_id = ur.repaired_by
    WHERE       ur.unit_id = 1 
```

仅当`account_id = 1`. 如果让说`repaired_by = 2`那么它说`NULL`...

谢谢，我不知道我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:24:15.633

您正在加入内部查询：

```
SELECT account_id, account_fullname FROM accounts LIMIT 1 
```

你有`LIMIT 1`，它只给你一行（可能有 repaired_by = 1），然后你想过滤并只获取 repaired_by 为 2 的行......而你没有那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:23:42.527

可能行中没有满足条件`repaired_by = 2`的记录，

```
 LEFT JOIN   (SELECT account_id, account_fullname FROM accounts LIMIT 1) AS ar ON ar.account_id = ur.repaired_by 
```

因此，`ar.account_id = ur.repaired_by`返回 NULL。

# c# - .NET Framework 4.5 完整安装如何只有 50MB（因为他们不再有客户端配置文件）？

> ID：12978406
> 
> 赞同：14
> 
> 时间：2012-10-19T16:20:36.547
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, visual-studio-2008

（所有尺寸参考均采用打包尺寸，而非部署/安装尺寸）

基本上，以前的 .NET Framework 3.5 大小只有几百 MB（231.5 MB），3.5 不存在客户端配置文件，但是，4.0 版确实存在客户端配置文件，大小只有 41 MB，而4.0 的完整安装（非 CP）大小为 48.1 MB。

现在，他们说（在问题末尾发布的链接中）大多数应用程序往往需要客户端配置文件 4.0 中未涵盖的类和命名空间，因此他们决定不为 4.5 执行客户端配置文件。他们引用的另一个原因是，由于他们能够将 .NET Framework 4.5 的完整安装版本降低到 50 MB，这也减少了创建客户端配置文件版本的需要（因为 .NET 4.5 完整安装只有 9 MB大于 .NET 4.0 客户端配置文件），并且仅比等效的完整安装（独立脱机安装程序）大 1.MB。

现在，我的问题实际上只有两部分，如下：

1）。当 4.0 和 4.5 版本在 3.5 及以下版本中修复了如此多的问题并添加了如此多的功能时3.5 及以下，而包装尺寸要小几倍？

2）。这是客户端配置文件的最终决定，还是有一天我们会看到.NET 4.5？

3）。4.5 怎么可能只比 4.0 大 1.9 MB，同时解决了这么多的问题，并添加了这么多功能？

**更新：（** *以及任何愿意的人的潜在第四个问题）：*

@Gromer 提出了一个有趣的观点，即不包括语言包。由于他们需要包含 1 种语言，我假设它是英语，这是默认的吗？如果是这样，当大多数人甚至不知道/不了解“.NET Framework”是什么时，普通互联网用户如何下载和安装语言包以供自己使用和语言？我错过了什么或者这不重要吗？框架多久以口语或对话框与最终用户交流一次？

我得到一些信息的文章如下：

[http://blogs.msdn.com/b/dotnet/archive/2012/10/12/improvements-in-net-framework-setup-for-developers-it-pros-and-users.aspx](http://blogs.msdn.com/b/dotnet/archive/2012/10/12/improvements-in-net-framework-setup-for-developers-it-pros-and-users.aspx)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T15:58:49.787

如果您查看 3.5“独立”安装程序，您会惊讶地发现那里有多少子设置。

以**dotnetfx35_with_sp1.exe**为例：它是一个 231MB 的大型链式安装程序。当你用

```
dotnetfx35_with_sp1.exe /x:myfolder 
```

你得到一个 240Mb 的文件夹，分成几个其他文件夹：

```
dotNetMSP [111.2Mb] ==> x64 [45.0Mb], ia64 [36.2Mb], x86 [29.7Mb], [other] 300k 
dotNetFX20 [47.6Mb] ==> about 50/50% between 32 and 64 bit
dotNetFX30 [46.8Mb] ==> x64 [24Mb], x86 [22Mb]
dotNetFX35 [31.5Mb] ==> ia64 [12.8Mb], x64 [10.8Mb], x86 [7.7Mb]
...and some other files around... 
```

如您所知，.NET 3.5 需要 .NET 3.0 和 .NET 2.0，这正是您在此处看到的内容。即使不包含语言包，它们也必须针对许多不同的平台（从 Windows XP 开始）并包含很多补丁。

前进到 .NET 4.x，这些对先前框架的依赖已被删除，同时，它们支持更少（和更新）的操作系统和平台（例如 ia64 支持 - 这对文件大小非常重要 -现在几乎消失了）。

从我在较新的设置中看到的情况来看，他们也可能已经改变了他们运送框架的内部格式，可能是一种更有效的压缩..

最后但并非最不重要的一点是，他们改变了许多内部架构，重写了很多东西，这反过来可能让他们删除了其他旧东西......

可能没有任何一个非凡的变化让他们大幅缩小尺寸：可能是以上所有以及更多:)

只是我的 2c :)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T16:39:14.167

我找不到这方面的来源，但我相信 .Net framework 3.5 安装程序如此之大的原因是它包含所有程序集的预 JIT 版本（包括在某些情况下不会使用的程序集）目标平台不正确），而 .Net 4.0 安装程序没有 - 它在安装时对它们进行 JIT（这就是 .Net framework v4.0 的安装需要这么长时间的原因）

我还记得有人告诉我，.Net 4.5 安装会*快得多*，而不是作为安装的一部分 JITing 程序集，它会在 PC 空闲时在后台 JIT 它们（但是有一个过程可以立即 JIT 程序集应用程序尝试加载，但还没有被 JITed)

我目前正在努力寻找任何资源，但是当我找到它们时我会发布它们。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T16:25:11.853

Scott Hanselman 雄辩地说：

> ### 为什么那个安装程序这么大？
> 
> 巨大的 .NET 下载是为了一件事 - 它适用于可能想要重新分发不仅包含整个 .NET Framework，而且包含所有可能平台的安装程序的开发人员或管理员。它具有 x86、x64 和 ia64 的安装程序。

[http://www.hanselman.com/blog/SmallestDotNetOnTheSizeOfTheNETFramework.aspx](http://www.hanselman.com/blog/SmallestDotNetOnTheSizeOfTheNETFramework.aspx)

和：

> 关于 .NET Framework 的大小存在一些混淆。 **.NET Framework 并不是真正的 200 多兆下载。**
> 
> 我使用哪个安装程序？以下是面向开发人员、ISV 和管理员的简明扼要的全部内容。
> 
> *   离线安装程序 - 一个可以离线运行的文件，可以在任何运行它的系统上安装 .NET Framework。它是完整的，所有平台，可离线安装。
>     
>     
> *   在线安装程序 - 一个 2.7 兆的安装程序，它将检测您需要的文件，然后下载**10 到 60 兆**。

[这篇博](http://blogs.msdn.com/b/pmarcu/archive/2010/04/15/the-net-framework-4-installer-improvements.aspx)文详细介绍了 Microsoft 如何使 .NET 4 框架平台安装更小。具体来说：

> 我们确定了 95% 以上的客户端应用程序使用的框架功能子集，并为此场景制作了一流的包。这样做的结果是，除非您正在利用 ASP.NET 等功能，否则您现在可以依赖较小的框架。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-23T15:43:53.893

我个人的看法是，随着时间的推移，Microsoft 通过 Service Pack 和新的 Windows 版本将越来越多的核心 .NET Framework 功能直接集成到 Windows 操作系统中。

我相信，他们在 V 4.0 中重新设计了操作系统绑定，因此对于支持的操作系统而言，启动和运行 .NET 所需的代码库和额外资源会减少。例如，从 3.5 到 4.0 的支持列表中删除了所有 XP 特殊版本。在 4.5 中，操作系统基础进一步缩小（Vista/7/Win8 和 Server 2008/2013）。

同样像上面提到的那样，除了英语之外的语言被删掉了，其他一些特性被提取到 .NET SDK 包中。

只是我的两分钱。

# mysql - 如何有效地更改具有数百万条目的表上的 MySQL 表结构？

> ID：12978407
> 
> 赞同：8
> 
> 时间：2012-10-19T16:20:36.930
> 
> 标签：mysql, scaling, sharding

我有一个最大约 17 GB 的[MySQL](http://en.wikipedia.org/wiki/MySQL)数据库，有 3800 万个条目。目前，我需要增加一列的大小（varchar 40 到 varchar 80）并添加更多列。

许多字段都已编入索引，包括我需要更改的字段。它是应用程序运行所必需的唯一对的一部分。在昨天尝试进行更改时，查询运行了将近四个小时而没有完成，当时我决定减少中断并恢复服务。

对这种大小的东西进行更改的最有效方法是什么？

其中许多条目也很旧，如果有一种很好的方法可以对条目进行分类，但仍然可以使用它们，这可能会通过使表的大小更易于管理来帮助解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T16:46:53.247

你有一些选择。

在任何情况下，您都应该在执行此操作之前进行备份。

**一种可能性**是让您的服务脱机并在原地执行，就像您尝试过的那样。如果你这样做，你应该禁用键检查和约束。

```
ALTER TABLE bigtable DISABLE KEYS;
SET FOREIGN_KEY_CHECKS=0;
ALTER TABLE (whatever);
ALTER TABLE (whatever else);
...
SET FOREIGN_KEY_CHECKS=1;
ALTER TABLE bigtable ENABLE KEYS; 
```

这将允许 ALTER TABLE 操作进行得更快。当您执行 ENABLE KEYS 时，它将立即重新生成所有索引。

**另一种可能性**是使用您想要的新模式创建一个新表，然后禁用新表上的键，然后按照@Bader 的建议执行并插入旧表的内容。

建立新表后，您将重新启用其上的键，然后将旧表重命名为“old_bigtable”之类的名称，然后将新表重命名为“bigtable”。

您可以在填充新表时保持服务在线。但这可能效果不佳。

**第三种可能性**是将您的巨型表转储（到平面文件），然后将其加载到具有新布局的新表中。这与第二种可能性非常相似，只是您可以免费获得一个表备份。`SELECT DATA INTO OUTFILE`你可以用and让这个过程变得非常快`LOAD DATA INFILE`。您需要有权访问服务器计算机的文件系统才能执行此操作。

在所有情况下，禁用然后重新启用约束和键以使事情快速进行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T16:34:33.810

使用您想要的具有不同名称的新结构创建一个新表，例如 NewTable。

然后使用以下查询将旧表中的数据插入到这个新表中：

```
INSERT INTO NewTable (field1, field2, etc...) SELECT field1, field2, ... FROM OldTable 
```

完成后，您可以删除旧表并将新表重命名为原始名称

```
DROP TABLE `OldTable`;
RENAME TABLE `NewTable` TO `OldTable` ; 
```

我在一张非常大的桌子上尝试过这种方法，它比改变桌子要快得多。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T18:16:05.360

在 MySQL 5.1 和 5.5 中，某些 alter 语句被增强，只修改结构而不重写整个表（[http://dev.mysql.com/doc/refman/5.5/en/alter-table.html](http://dev.mysql.com/doc/refman/5.5/en/alter-table.html) - 在-地方）。虽然这个可用性因您所做的更改类型和使用的引擎而异，但最大的价值来自 InnoDB 插件。在您进行特定更改的情况下，尽管整个表都将被重写。

当我们遇到这些问题时，我们通常会尝试利用副本数据库。只要您是在添加而不是删除，您就可以先对副本运行 DDL，然后安排短暂的中断以将副本提升为主角色。如果您碰巧在 RDS 上，这甚至是他们对副本实例的建议用途之一[http://aws.amazon.com/about-aws/whats-new/2012/10/11/amazon-rds-mysql-rr -促销/](http://aws.amazon.com/about-aws/whats-new/2012/10/11/amazon-rds-mysql-rr-promotion/)。

其他一些替代方案包括：

*   将记录的子集选择到具有所需结构的新表中（用于`INTO OUTFILE`避免表锁定）。完成后，您可以安排维护时段和`REPLACE INTO`/或`UPDATE`自初始数据复制以来原始表中已更改的任何记录。更新完成后`RENAME TABLE...`，两个表中的一个将包含更改。
*   使用 Percona 的 pt-online-schema-change 之类的工具：[http](http://www.percona.com/doc/percona-toolkit/2.1/pt-online-schema-change.html) ://www.percona.com/doc/percona-toolkit/2.1/pt-online-schema-change.html 。此工具适用于触发器，因此如果您想要更改的表上已有触发器，则可能不适合您的需求。

# excel - MIN 数组函数仅非零

> ID：12978411
> 
> 赞同：0
> 
> 时间：2012-10-19T16:20:57.533
> 
> 标签：excel

我一直试图让这个数组函数在“最终数据”AE 列中输出（非零）最小值。你能在这个公式中看到结构错误吗？

```
 =IF($C$4="All EMEA",

MIN(IF('FINAL DATA'!$2:$AE$250000<>0,

('FINAL DATA'!$J$2:$J$250000=$C$4)*('FINAL DATA'!$E$2:$E$250000=$E$4)*( 'FINAL DATA'!$AE$2:$AE$250000))),

MIN(IF('FINAL DATA'!$AE$2:$AE$250000<>0, 

('FINAL DATA'!$K$2:$K$250000=$C$4)*('FINAL DATA'!$E$2:$E$250000=$E$4)*( 'FINAL DATA'!$AE$2:$AE$250000)))

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:58:42.780

通过使用 <>0 可以消除零和空白，所以这不是问题.....[尽管您只想消除空白并将零作为有效的返回值，您应该使用**<>""** ]

您不能将条件与数字范围相乘，因为通过将条件不满足的任何行相乘，您会得到零，请改用多个 IF，如下所示：

`=MIN(IF('FINAL DATA'!$AE$2:$AE$250000<>0,IF('FINAL DATA'!$J$2:$J$250000=$C$4,IF('FINAL DATA'!$E$2:$E$250000=$E$4,'FINAL DATA'!$AE$2:$AE$250000))))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:38:10.037

第二行，你有！$2，没有指定列。

MIN(IF('最终数据' **!$2** :$AE$250000<>0,

此外，您似乎正在尝试针对某个范围运行单个 If 比较，我认为这不会像您尝试使用它的方式那样起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T19:22:54.660

Barry 已经确定了核心问题（测试 returnimg 0 到 MIN 函数）。

这是解决此问题的公式（仍然是数组公式）的重构，并且要短得多

```
=MIN(IF(($S:$S<>0)*($E:$E=$E$4)*(IF($C$4="All EMEA",$J:$J,$K:$K)=$C$4),
 ($S:$S))) 
```

请注意，`0`如果范围内没有符合条件的值 >0，这将返回（与您的原始公式一样，修复后）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T16:37:02.403

`IF()`您可以通过在数组公式中使用函数来消除零。考虑以下：

```
 A
Row  -----
 1       0
 2       7
 3       5
 4       6
 5        
 6       3 
```

数组公式`=MIN(IF($A$1:$A$6>0,$A$1:$A$6))`将返回`3`，因为if 语句的部分`0`消除了空白单元格和空白单元格。`>0`

# sql - 如何使用 Linq 写入数据库

> ID：12978414
> 
> 赞同：0
> 
> 时间：2012-10-19T16:21:01.360
> 
> 标签：sql, sql-server, linq, linq-to-entities

我有一个名为`Fruits`. 在表中，我有 3 列：`Name`、`Date`、`Remove`。

现在我插入了 3 行，其值类似于

```
Apple----20/10/12----N
Mango----21/12/12----Y
Banana--- 15/07/12----N
Grapes----18/12/12----Y 
```

我想删除标记为“Y”的 2 行。

这是我想在 c# 代码中使用 Linq 来实现的。最初，我正在使用连接字符串建立与数据库的连接。我将获得设备上下文 DC，然后我将复制所有行。

现在我将枚举标记为的行`N`并调用remove。

一旦我删除，我会做：`dc.deleteonSubmit<tableName>(var).`

在此之后，我应该调用`dc.submittsavechages();`或使 DB 看起来像什么：

```
Mango----21/12/12----Y
Grapes----18/12/12----Y 
```

如果我在 sql 查询分析器中查询，我应该得到以上结果。如何在 LINQ 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:24:57.393

试试这个：

```
Dim dc as new DataClassesDataContext()

Dim deleteFruits = _
    From f In db.Fruits() _
    Where f.Remove _
    Select f

For Each fruit In deleteFruits
    db.Fruits.DeleteOnSubmit(fruit)
Next

Try
    db.SubmitChanges()
Catch ex As Exception
    Console.WriteLine(ex)
    ' Provide for exceptions
End Try 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:22:22.790

它可以做得更紧凑

```
db.Fruits.DeleteAllOnSubmit(db.Fruites.Where(f=>f.remove == "Y" )) 
```

该`try/db.SubmitChanges()`部分保持不变。

# kinect - Kinect 以 30FPS 的所有帧

> ID：12978415
> 
> 赞同：1
> 
> 时间：2012-10-19T16:21:07.097
> 
> 标签：kinect, kinect-sdk

我正在使用 Microsoft Kinect SDK，我想知道是否可以获得 30fps 的所有帧的深度帧、颜色帧以及骨架数据？使用 Kinect Explorer，我可以看到颜色和深度帧接近 30fps，但一旦我选择骨架视图，它就会下降到 15-20fps 左右。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T17:04:48.300

是的，可以在捕捉骨架的同时以 30fps 的速度捕捉颜色/深度。

见下图，以防你认为我狡猾。:) 这是直接从 Visual Studio 2010 运行的原始 Kinect Explorer。我的工作开发平台是 i5 戴尔笔记本电脑。

![30fps Kinect 资源管理器](../Images/7498ed2fafd93b2afd2a2bc1e4878551.png)

# javascript - 使用 jquery.validate 根据使用的表单来验证提交的表单

> ID：12978417
> 
> 赞同：1
> 
> 时间：2012-10-19T16:21:14.967
> 
> 标签：javascript, jquery

我目前在一个页面上有两个表单，一个更新表单和一个添加表单，我想要做的是提交任一表单，拉取该表单的 id 以及操作，验证特定表单，然后加载返回从网络服务器。

我通过专门使用每个表单的 id 让它工作，但是 js 代码重复了两次，id 更喜欢它更动态一点。

```
<script src="assets/js/jquery-1.8.2.js"></script>
<script src="assets/js/bootstrap.js"></script>
<script src="assets/js/jquery.validate.js"></script>

<div id="myTabContent" class="tab-content">
        <div class="tab-pane active" id="update">                
            <form action="php/update_level.php" method="post" id="form1">
                <h2>Update Level</h2>
                <label>Select Bag Level</label>
                <select id="target" name="levelSelect"> <option selected>Select</option>
                    <?php
                    foreach($result as $row)
                    {?>
                        <option><?php echo $row['Level'] ?></option>
                    <?php
                    }
                    ?>
                </select>
                <div id="upForm">
                </div>
                <div class="message">

                </div>
            </form>
        </div>
        <div class="tab-pane" id="addNew">                
            <form action="php/add_level.php" id="form2">
                <h2>New Level</h2>    
                <label>Level</label>
                <input class="required" maxlength="10" minlenght="1" type="text" name="level" placeholder="Level">
                <label>Description</label>
                <textarea class="required" name="description"  rows="3" placeholder="Description of level type"></textarea>  
                </br>
                <div class="message">

                </div>
                <div class="form-actions">
                <button id="inFormSub" type="submit" class="btn btn-large btn-primary">Submit</button>
                </div>
            </form>                   
        </div>
    </div> 
```

JS：

```
$('form').submit(function(e){
e.preventDefault();
var id=$(this).attr('id');
var action=$(this).attr('action');

console.log(action + ' ' + id); //works outputs update_bag.php form1 on submit of form1
                                //add_bag.php form2 on submit of form2
$(id).validate({
    submitHandler: function() {

        console.log(action + ' ' + id); //doesnt work
        $(id).find('div.message').load(action, $(id).serializeArray());            
    }
}); 
```

有效的 JS

```
 $('#form1').validate({
    submitHandler: function() {
        var action = $('#form1').attr('action');

        console.log(action + ' validate1');
        $('#form2').find('div.message').load(action, $('#form1').serializeArray());            
    }
});    

$('#form2').validate({

    submitHandler: function() {
        var action = $('#form2').attr('action');

        console.log(action + ' validate2');
        $('#form2').find('div.message').load(action, $('#form2').serializeArray());            
    }
}); 
```

我对 JS 和 Jquery 的了解充其量是很少的，我可能正盯着解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:27:52.000

您可以在 submitHandler 上使用表单变量并获取 id 和 action

```
...
submitHandler: function(form){

    console.log($(form).attr('id'), $(form).attr('action'));    

   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:30:13.627

该`$(this).attr("id")`调用仅返回元素的 ID，但这不是适当的 css 选择器，因此您需要自己添加哈希符号

尝试将呼叫更改为：

```
$("#"+id).validate({
   //validate code here
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T18:34:51.780

应用每个元素需要特定数据的插件的一种常见方法是循环使用元素，`each()`以便您可以`this`在循环内访问，以便轻松访问单个表单元素，而无需为每个元素复制代码

```
$('#form1,#form2').each(function() {
    var $form = $(this);
    var action = $form.attr('action');
    $form.validate({
        submitHandler: function() {           
            $form.find('div.message').load(action, $form.serializeArray());
        }
    });
}); 
```

# sql-server - 在 SQL Server 2008 中使用索引表的分区切换进行并行批量加载

> ID：12978422
> 
> 赞同：0
> 
> 时间：2012-10-19T16:21:42.090
> 
> 标签：sql-server, indexing, bulkinsert, data-warehouse, data-partitioning

[这是我之前的一个问题](https://stackoverflow.com/questions/11933163/bulk-inserts-of-heavily-indexed-child-items-sql-server-2008)的后续，在明确决定将分区切换作为快速将数据放入需要保持对读者可用的大量索引的事实类型表中的最佳方式之后。

虽然这似乎是最好的方法，但它还不足以真正满足允许多个（< 5）用户同时批量插入、索引新数据并出现在索引视图中的要求（不是必须是真正的索引视图，只是选择依赖于索引的视图）。

分区的想法是每个分区和以分区为根的索引子树可以并行锁定为只读，复制到工作表中，插入/更新新数据并重建索引，然后切换回主表所以读者不受影响。

问题是单个工作台。每个并行批量插入都需要自己的副本，具有与主表相同的约束以允许切换。

到目前为止，我已经遇到了几堵墙，试图绕过这个瓶颈：

1.  我尝试使用相同的分区函数对工作表进行分区。这不起作用，因为您不能在分区基础上禁用索引以插入其中，同时在另一个上重建索引。
2.  创建一个临时表作为工作表。这不起作用，因为虽然您可以使用相同的索引名称，但您不能轻松地动态创建约束并且无论如何都不能切换它。
3.  有一组固定的命名工作表吗？如何选择一个并在别名下使用它，以便我只有一个存储的过程？
4.  动态SQL？我已经非常努力地避免走那条路。这很复杂。

挑战很大，但在我接受瓶颈之前有人有什么想法吗？Sql 2012 会有帮助吗？适当的数据仓库如何应对这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T05:33:14.370

适当的数据仓库如何应对这个问题？妥协并为 EDW 设定切合实际的目标。数据仓库不可能是所有人的一切。确保您正在实施的是最适合业务的解决方案（不仅仅是技术人员/分析师）。如果您无法从经验丰富的同行和专家那里找到解决方案，您的目标是否现实？

将成本与您跳过的所有环节联系起来。数据真的需要最新吗？如果我告诉您，我们需要在存储上再花费 200,000 美元，因为我们不断地复制分区和重建索引，而当前的解决方案无法满足 IOPS 需求，该怎么办？在某个时候，他们会发现它不是免费的。虽然您不需要只是说不，但您确实需要对相关成本保持现实和坦率。此外，您的存储管理员会感谢您。

至于 2012 年，有一个新的列存储索引可以减少或替换您当前用于覆盖所有分析师搜索请求的所有非聚集索引。它是高度压缩的，涵盖了非常广泛的搜索参数，并利用了新的批处理执行模式。它在低选择性查询（例如经常在事实表上执行的查询）上表现最佳。一个问题是您不能直接进行更新。您必须将分区切换到临时表，将列存储放到临时表上，更新临时表，重新添加列存储，然后将分区切换回事实表。这听起来很多，但可能比维护所有这些非集群要快得多，并且需要更少的 IO。

我的问题一直是“如果它不断变化，它真的是一个事实表吗？”。这不是OLTP吗？尝试抵消交易或至少将所有更新推送到预定的非高峰时间。更新事实表已成为过去。所有的[大男孩](http://en.wikipedia.org/wiki/Column-oriented_DBMS)都在朝着“不赞成更新”的面向列的数据仓库架构发展。PowerPivot 和 Analysis Services 表格模型基于列存储技术构建。

最后，查看 Kimballs 的 DW Toolkit 书籍。他有几个列出最佳实践并涵盖边缘情况的案例。我从他们那里学到的是，数据仓库开发不仅仅是兴奋的数据库开发。它还涉及政治和将资源集中在对企业最有利的事情上。

# emacs - 用 emacs 替换 ssh+screen+editor

> ID：12978424
> 
> 赞同：4
> 
> 时间：2012-10-19T16:21:46.303
> 
> 标签：emacs, remote-access, gnu-screen

我的目标是远程编写代码。到目前为止，我一直在使用 ssh + screen + 一个编辑器（例如 vim）。

我了解使用本地 emacs（或 vim），可以编辑远程文件。但是一旦本地 emacs 关闭并且我想重新打开它（或使用另一台计算机打开它），我需要再次重新打开所有缓冲区。

有没有办法在远程机器上设置一个 emacs 服务器，我可以简单地使用本地 emacs 客户端访问它？这基本上模拟了屏幕行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:31:42.250

我想你可能会在这里找到答案；

[http://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html](http://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html)

根据[http://www.gnu.org/software/emacs/manual/html_node/emacs/emacsclient-Options.html#emacsclient-Options](http://www.gnu.org/software/emacs/manual/html_node/emacs/emacsclient-Options.html#emacsclient-Options)；

Emacs 服务器通常使用称为“本地套接字”的操作系统功能来侦听连接。某些操作系统，例如 Microsoft Windows，不支持本地套接字；在这种情况下，Emacs 使用 TCP。当您启动 Emacs 服务器时，Emacs 会创建一个服务器文件，其中包含一些 emacsclient 建立连接所需的 TCP 信息。默认情况下，服务器文件位于 ~/.emacs.d/server/ 中。在 Microsoft Windows 上，如果 emacsclient 在那里找不到服务器文件，它会在 APPDATA 环境变量指向的目录的 .emacs.d/server/ 子目录中查找。您可以通过 '-f' 或 '--server-file' 选项或通过设置 EMACS_SERVER_FILE 环境变量来告诉 emacsclient 使用特定的服务器文件。

即使本地套接字可用，您也可以通过将变量 server-use-tcp 设置为 t 来告诉 Emacs 使用 TCP。TCP 的一个优点是服务器可以接受来自远程机器的连接。为此，您必须 (i) 将变量 server-host 设置为运行 Emacs 服务器的机器的主机名或 IP 地址，并且 (ii) 向 emacsclient 提供服务器文件。（实现后者的一种方便方法是将服务器文件放在网络文件系统上，例如 NFS。）

当 Emacs 服务器使用 TCP 时，变量 server-port 决定监听的端口号；默认值 nil 表示在服务器启动时选择一个随机端口。

当然，请确保在服务器端调整防火墙设置，以便客户端可以连接到运行 emacs-server 的机器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:25:49.030

我已经多次尝试过另一篇文章中提到的方法，但从未取得任何成功。

emacs 能够做的一件好事是桌面保存模式，它会在您杀死 emacs 时存储所有打开的缓冲区，并在您再次打开 emacs 时恢复它们。默认情况下，它不会恢复流浪汉缓冲区，但您可以调整设置以允许这种情况发生。更多信息可以在[这个 Stack Overflow](https://stackoverflow.com/questions/4053708/emacs-desktop-doesnt-remember-tramp-connections)问题中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:23:26.537

您可以在本地登录，然后 ssh 到远程计算机。在远程机器上，您可以进行“可以加入的屏幕会话”。在本次会议中，您运行了 emacs，所有缓冲区都与您离开时一样。您也可以结合使用桌面保存，以防远程机器需要重新启动，您可能会丢失会话。这是我使用的最实用的解决方案。您可以随时更改“客户端计算机”。您不需要使用本地 emacs 客户端。您还可以为不同的项目制作多个会话，并在不同的终端上为特定项目加入屏幕会话。

# database - VB.net 使用 Access 数据库

> ID：12978427
> 
> 赞同：1
> 
> 时间：2012-10-19T16:22:04.733
> 
> 标签：database, vb.net, ms-access

我有一个组合框，我必须从中选择一个名称（我已经在组合框中加载了访问数据名称）。用户选择姓名后，程序应在三个单独的文本框中显示雇用日期、身份证号码和薪水。除此之外，如果员工全职工作，则应检查一个单选按钮。

我不知道该怎么做。我正在使用 MS Access。

# jquery - 使用 jquery .load() 时检查空输入/文本区域

> ID：12978428
> 
> 赞同：0
> 
> 时间：2012-10-19T16:22:06.570
> 
> 标签：jquery, input, textarea, label

当用户在输入/文本区域中输入文本时，我正在处理标签淡入淡出。到目前为止它运行良好，但我想不出一个好方法来检查输入/文本区域在加载时是否具有现有值，因此我可以自动隐藏标签。

输入/文本区域正在使用 .load() 加载，这就是我使用 $(document) 而不是直接定义选择器的原因。

这是一个示例，显示了我试图克服的问题。任何帮助将不胜感激。另外，如果您有任何建议，我可以如何将此功能包装到一个插件/功能中，这将更加有用。谢谢！

[http://jsfiddle.net/skyros/FTXc3/](http://jsfiddle.net/skyros/FTXc3/ "http://jsfiddle.net/skyros/FTXc3/")

如果你不想去 jsfiddle 和伪代码

```
//JQUERY
$(document).on('click', 'label', function() {
  $(this).next().focus();
});

$(document).on('focus', 'input,textarea', function() {
  var label = (this.value === "") ? $(this).prev('label').show().fadeTo(100, 0.25) : $(this).prev('label').fadeTo(100, 0).hide();
});

$(document).on('blur', 'input,textarea', function() {
  var label = (this.value === "") ? $(this).prev('label').show().fadeTo(100, 1) : $(this).prev('label').fadeTo(100, 0).hide();
});

$(document).on('keypress', 'input, textarea', function() {
  var label = $(this).prev('label').hide();
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:39:16.860

一种方法是使用过滤器函数获取长度> 0的元素，然后隐藏标签

```
$(function(){ // on dom ready
    $('label').filter(function(){
        // return labels that have siblings with input val > 0
        return $.trim($(this).siblings('input[type=text]').val()).length > 0;
    }).hide(); // hide those labels that are returned 
    // or do whatever you want to do with those labels here
}); 
```

[http://jsfiddle.net/wirey00/XwGa6/](http://jsfiddle.net/wirey00/XwGa6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:38:57.423

我会改变：

```
$(document).on('focus', 'input,textarea', function() {
  var label = (this.value === "") ? $(this).prev('label').show().fadeTo(100, 0.25) :     $(this).prev('label').fadeTo(100, 0).hide();
}); 
```

至

```
function input_textarea_focussed() {
  var label = (this.value === "") ? $(this).prev('label').show().fadeTo(100, 0.25) :     $(this).prev('label').fadeTo(100, 0).hide();
};
$(document).on('focus', 'input,textarea', input_textarea_focussed()); 
```

然后添加

```
$(document).on('load', function() {
  $("input, textarea").each(input_textarea_focussed);
}); 
```

# mysql - 输出 mySQL 结果，其中一列中的数据分组到一个单元格中

> ID：12978434
> 
> 赞同：4
> 
> 时间：2012-10-19T16:22:50.220
> 
> 标签：mysql

我有一个 mySQL 查询：

```
SELECT work.ID AS workID
      ,team.ID AS team_ID
      ,team.name AS teamName
  FROM work
  LEFT OUTER JOIN team_work ON team_work.work_ID = work.ID
  LEFT OUTER JOIN team ON team_work.team_ID = team.ID 
```

返回以下示例结果：

```
workID   team_ID   teamName
1        10         Support
2        20         Dev
2        10         Support
3        30         Admin
4        40         Research 
```

我想以表格格式将其输出到屏幕上，以便每个 workID 有一行，以及包含团队名称列表的列。就像是：

```
WORK ID  |   TEAM NAME
-------------------------

1        |    Support

2        |    Dev
         |    Support

3        |    Admin

4        |    Research 
```

我知道查询中的查询不是正确的方法（即使它是最简单的）。我在嵌套数组上看到了一些东西，但作为一个新手，我不太清楚如何去做。

有人想花一些时间来说服我离开壁架吗？

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:25:49.020

```
SELECT work.ID AS workID
      ,group_concat(teamName) AS teamName
FROM work
LEFT OUTER JOIN team_work ON team_work.work_ID = work.ID
LEFT OUTER JOIN team ON team_work.team_ID = team.ID
group by work.ID 
```

# java - 解组 jaxb 对象时出错

> ID：12978436
> 
> 赞同：2
> 
> 时间：2012-10-19T16:23:01.980
> 
> 标签：java, jaxb2, unmarshalling

我有针对 XML 模式的 jaxb 对象。该 xml 架构可以具有不同的根元素。这在主要项目中运行良好。基于这些生成的对象，我正在尝试编写一些测试用例。

我编写了以下代码来获取 JAXBContext

```
JAXBContext jaxbContext = JAXBContext.newInstance("com.store.web.ws.v1.model"); 
```

我得到以下异常

```
com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 counts of IllegalAnnotationExceptions
java.lang.StackTraceElement does not have a no-arg default constructor.
    this problem is related to the following location:
        at java.lang.StackTraceElement
        at public java.lang.StackTraceElement[] java.lang.Throwable.getStackTrace()
        at java.lang.Throwable
        at java.lang.Error
        at public java.lang.Error com.store.web.ws.v1.model.ObjectFactory.createError()
        at com.store.web.ws.v1.model.ObjectFactory

    at com.sun.xml.bind.v2.runtime.IllegalAnnotationsException$Builder.check(IllegalAnnotationsException.java:106)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:466)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:298)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:141)
    at com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1157)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:145)
    at com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:236)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:128)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:277)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:372)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:337)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:244)
    at com.store.web.ws.v1.resource.RequestInfo.main(RequestInfo.java:171) 
```

但是，当我将上下文行更改为

```
JAXBContext jaxbContext = JAXBContext.newInstance(BookType.class); 
```

`SEVERE: unexpected element (uri:"", local:"book"). Expected elements are (none)`根据我之前的[问题](https://stackoverflow.com/questions/11658181/unable-to-understand-jaxb-unmarshalling-behaviour)，我得到以下异常是可以理解的

有人可以在这里帮助我吗？我想根据包名称创建一个上下文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:31:30.053

看起来从您的模式生成的类之一被称为`Error`，并且编译器已经选择了`java.lang.Error`该类而不是`com.store.web.ws.v1.model.Error`该类。尝试明确

```
import com.store.web.ws.v1.model.Error; 
```

在顶部`ObjectFactory.java`并重新编译它，或者未能编辑代码以使用完全限定的类名。

```
public com.store.web.ws.v1.Error createError() {
  return new com.store.web.ws.v1.Error();
} 
```

（或更改类名并使用 将其重新映射到正确的元素名`@XmlRootElement(name="Error")`）

# memory - 将十进制值分隔为最低和最高有效字节

> ID：12978437
> 
> 赞同：0
> 
> 时间：2012-10-19T16:23:05.723
> 
> 标签：memory, low-level, basic, 8-bit

我正在处理一些 65802 代码（不要问：P），我需要将一个 16 位值分成两个 8 位字节以将其存储在内存中。我该怎么办？

编辑：

另外，我将如何获取两个相似的字节并将它们组合成一个 16 位值？

编辑：

澄清一下，我使用的编程语言（MS-BASIC 的一个版本）无法使用 Internet 上提供的许多解决方案。我不能取模，也不能左移或右移。我发现我可以通过将高字节乘以 256 并将其添加到低字节来将两个字节放在一起，但是我将如何反转这个过程呢？

# qt - 如何将函数移动到 QThread？

> ID：12978439
> 
> 赞同：0
> 
> 时间：2012-10-19T16:23:31.667
> 
> 标签：qt, real-time, qthread, qtablewidget

我`refreshLogDisplay()`在 MainWindow 类中调用了一个函数，它可以完成很多 UI 工作。里面的代码是这样的：

```
ui->tablewidget->setRowCount(100);
// ... 
```

因此该函数处理了 MainWindow 类的许多受保护属性。但我想将该函数移动到另一个 QThread。在那个 QThread 中，我想要一个 while 循环每秒调用 500 次“refreshLogDisplay”。每秒 500 次**非常重要**，我不希望任何计时器这样做，因为计时器太慢了。

我只知道如何实现一个继承QThread的子类，它不能访问`ui->tablewidget`东西。有一个[QObject::moveToThread()](http://qt-project.org/doc/qt-4.8/qobject.html#moveToThread)函数，但它似乎没有帮助。

有什么好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-22T08:42:19.100

您无法从线程控制 UI，您必须构建插槽并将它们连接到线程中的信号。像这样 ：

```
void Whatever::increment(){i+=2;emit incremental();} 
void Default::Progress(){ui->tablewidget->setRowCount(i);}
void main(){ //do thread
connect(Whatever,SIGNAL(increamental()),this,SLOT(Progress()));} 
```

# schema.org - 在哪里为文章类型定义 schema.org itemtype：html、body 或 div 标签？

> ID：12978441
> 
> 赞同：3
> 
> 时间：2012-10-19T16:23:45.667
> 
> 标签：schema.org

我有文章页面，页面上唯一的内容是文章。使用 schema.org 微数据标记页面时，是否最好在`<html>`标记的最顶部定义 itemscope 和 itemtype？还是在`<body>`标签里？还是`<div>`在体内？还是没关系？

`<html>`在标签中定义的示例：

```
<html lang="en" itemscope itemtype="http://schema.org/Article">
<body>
    <div>
    <span itemprop="name">How to Tie a Reef Knot</span>
    ...
    </div>
</body>
</html> 
```

与`<div>`体内的 a 相比：

```
<html>
<body>
    <div itemscope itemtype="http://schema.org/Article">
        <span itemprop="name">How to Tie a Reef Knot</span>
        ...
   </div>
</body>
</html> 
```

就 SEO 而言，一个比另一个更好吗？似乎最好将其定义为尽可能靠近页面顶部（即`<html>`标签），以便搜索引擎蜘蛛立即将其拾取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-01T17:26:11.547

如果您检查此页面，您会发现 html 标记确实包含 schema.org 元数据

```
<html itemscope="" itemtype="http://schema.org/QAPage"> 
```

不是每个人都这样做，但 stackoverflow 是前 100 名网站——不管它的价值是什么。

显然，您还需要整个页面中的 schema.org 元数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:06:19.917

你需要把它放在*div*标签上，因为你的文章被包含在它的最底层。所以当搜索引擎蜘蛛抓取你的页面时，它可以更恰当地索引你的文章内容。

尽管您的页面仅包含文章，但它们仍然可能包含其他部分，例如菜单、作者信息等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T10:51:02.243

没关系，从某种意义上说，两者都可以工作，而且都不是“错误的”。你把这些东西放在哪里很大程度上取决于你的页面上有什么信息，以及它是如何排列的（例如，一些模式不能进入某些其他模式）。然而，尽管它实际上是隐含的，但您可能想要放置`WebPage`body 元素，从那里开始通过您的页面代码更具体。

就 SEO 而言绝对没有区别，部分原因是微数据是否提前几分之一微秒解析无关紧要，部分原因是主要搜索引擎当前仅使用[少数精选的微数据位](http://support.google.com/webmasters/bin/topic.py?hl=en&topic=1088472&parent=21997&ctx=topic)`Article`（其中一），谷歌已经[明确表示对排名没有影响](http://www.youtube.com/watch?v=OolDzztYwtQ)（还）。

# java - Android Javamail 自定义身份验证

> ID：12978443
> 
> 赞同：2
> 
> 时间：2012-10-19T16:23:52.697
> 
> 标签：java, android, oauth-2.0, jakarta-mail

所以，我意识到 SASL 没有在 android 中实现，因此 javamail oauth2 方法不会开箱即用。

但是，根据 gmail imap 的 google api 文档（[https://developers.google.com/google-apps/gmail/xoauth2_protocol](https://developers.google.com/google-apps/gmail/xoauth2_protocol)），获取身份验证令牌、对其进行编码并发送“AUTHENTICATE XOAUTH2”似乎相当简单' 手动发送到服务器。

我的问题：我想使用 javamail IMAP 功能（不想自己处理 IMAP 协议命令和响应），但我需要一种方法来简单地插入正确的身份验证命令 - 而不是传统的登录用户名密码。

这可以做到吗？最简单的方法是什么？我可以创建自己的身份验证方法并轻松实现吗？

或者，我可以创建连接，然后将其交给 IMAPStore（怀疑这会在它创建和管理连接池时起作用）。

- -编辑 - -

更具体地说，javax.security.sasl 方法未在 Imap.protocol.IMAPSaslAuthenticator 所依赖的 Android 中实现。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T14:56:49.550

我有一个支持 imap 的 sasl 工作 jar（对于 smtp，您必须按照您所说的发出命令，因为 android 的 java 邮件没有 smtp 的 sasl 基础结构）。我所做的只是将包 javax.security.sasl 和 javax.security.auth.callback 添加到用于 android 源的 java 邮件并重新打包它。我不得不将它放在不同的 namaspace 中，myjavax.security.sasl 等，因为否则 android 构建系统会抱怨该包包含核心库，不知道为什么它不抱怨 javax.mail 无论如何都在核心命名空间中（ javax)。我还必须为某些类中的新命名空间更改一些导入，但基本上是packeges 类本身和com.sun.mail.imap.protocol.IMAPSaslAuthenticator。有了这个，我可以使用从 Android AccountManager 获得的 oauth 2 令牌成功地对 gmail imap 服务器进行身份验证，我没有尝试其他任何方法。对于 smtp，你可以在这里查看我的回答[android中使用XOauth](https://stackoverflow.com/questions/12503303/javamail-api-in-android-using-xoauth/12821612#12821612) 的Javamail api我认为可以使smtp与Sasl一起从这里获取新类[http://kenai.com/projects/javamail/sources/mercurial/show/mail/src/main/java/com/ sun/mail/smtp](http://kenai.com/projects/javamail/sources/mercurial/show/mail/src/main/java/com/sun/mail/smtp)对 smtp 有 Sasl 支持。我认为这非常好，因为我所做的只是添加一些 GPL 类，我添加的类来自 JDK。希望这会有所帮助，如果您需要罐子或有关如何操作的更多解释，请询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T19:20:32.043

如果不破解 JavaMail 类，就没有办法做到这一点。

你不能只使用用户名/密码认证吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T13:07:54.247

从[https://java.net/projects/javamail/pages/OAuth2](https://java.net/projects/javamail/pages/OAuth2)：

> 从 JavaMail 1.5.5 开始，内置了对 OAuth2 身份验证的支持，不再需要 SASL

# ruby-on-rails - 'rails g controller' 可以生成安静的路由吗？

> ID：12978447
> 
> 赞同：3
> 
> 时间：2012-10-19T16:24:06.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

有没有办法使用 rails 生成器来创建具有 RESTful 路由的控制器？

生成一个控制器并指定动作名称会创建一个控制器并添加一个到 的路由`config/routes.rb`，但`create`它是一个`get`：

```
$ rails g controller foos new create
  create  app/controllers/foos_controller.rb
   route  get "foos/create"
   ... 
```

我更愿意看`route post "foos"`，但看不到任何有用的东西`rails g controller --help`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T16:28:18.927

尝试使用`rails generate scaffold_controller Foos`

# android - 如何使用 PhoneGap 调用网络服务

> ID：12978449
> 
> 赞同：0
> 
> 时间：2012-10-19T16:24:16.057
> 
> 标签：android, web-services, cordova

我正在尝试在 Android 上的 phonegap 上开发应用程序。

我想要做的是从我的应用程序中调用一个 web 服务，这将用于数据访问。

我在网上找到了很多关于如何做到这一点的表格，我能找到的最简单的一张看起来很简单，就像这样

```
<script type="text/javascript">
 $(document).ready(function() {
  $.ajax({
type: "POST",
url: "http://www.webservicex.net/stockquote.asmx/GetQuote",
data: "{'usd'}",
contentType: "application/json; charset=utf-8",
dataType: "json",
success: function(msg) {

  // Insert the returned HTML into the <div>.
  $('#Content').html(msg.d);
}
 });
}); 
```

但是，我只能看到我已经放入 div 的文本，div 的内容没有改变。我直接在 Galaxy SIII 设备上进行测试，而不是在模拟器上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:41:33.467

我的猜测是似乎什么都没有发生，因为你得到的是 a `fail`，而不是 a `success`。尝试添加一个错误处理程序，看看会发生什么。

```
.fail(function() { alert("error"); }) 
```

您可能遇到“跨域”问题（因为您试图从不同的域获取 ajax）并且可能需要使用`JSONP`而不是`JSON`用于您的 dataType。有关 的更多信息`JSONP`，请参阅[此帖子](https://stackoverflow.com/questions/5943630/basic-example-of-using-ajax-with-jsonp)或[文档](http://api.jquery.com/jQuery.ajax/)

编辑：

[这是](http://jsfiddle.net/GP3nv/)此代码的实际操作。

```
$(document).ready(function() {

//here is one way using the 'error' handler
    $.ajax({
        type: "POST",
        url: "/failOnPurpose",
        data: "{'usd'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        error:function(jqXHR, textStatus) { 
            alert("error:" + textStatus); 
        },
        success: function(msg) {        
          // Insert the returned HTML into the <div>.
          $('#Content').html(msg.d);
        }    
    });

//here is another way using the 'fail' request handler
    $.ajax({
        type: "POST",
        url: "/failOnPurpose",
        data: "{'usd'}",
        contentType: "application/json; charset=utf-8",
        dataType: "json",            
        success: function(msg) {        
          // Insert the returned HTML into the <div>.
          $('#Content').html(msg.d);
        }    
    }).fail(function(jqXHR, textStatus) {
              alert( "fail: " + textStatus );
    });

});​ 
```

# php - 服务器不显示 php/html 文件

> ID：12978451
> 
> 赞同：2
> 
> 时间：2012-10-19T16:24:22.327
> 
> 标签：php, html

我非常了解使用数据库和服务器，并且刚刚下载了 MAMP。我有一个用 html 和 css 制作的网站，并想向其中注入一个 php 脚本。我已将文件保存在 .php 中，当我从浏览器上的 localhost 端口导航到它时，没有显示任何 html。它只显示一个空白的白页。可能有一个非常明显的答案，但我已经在谷歌搜索了一个小时并没有找到解决方案。

这是 php 脚本。它被包裹在一个

标记文档中的所有其他内容都是 html。

```
<?PHP
                        $filelocation = "Text.txt";
                        if (!file_exists($filelocation)) {
                        echo "Couldn't find datafile, please contact the administrator.";
                        }
                        else {
                        $newfile = fopen($filelocation,"r");
                        $content = fread($newfile, filesize($filelocation));
                        fclose($newfile);
                        }
                        $content = stripslashes($content):
                        $content = htmlentities($content):
                        $content = nl2br($content);
                        echo $content;
                        ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:25:21.750

您的 PHP 代码很可能有错误，无法解析。检查服务器日志以查看错误消息是什么。

乍一看，这似乎是有效的 PHP。

您可以通过执行以下操作更轻松地阅读文件...

```
$content = file_get_contents($filelocation); 
```

但那是偶然的。

在您的 php.ini 文件中打开错误报告，然后重新启动您的网络服务器。这应该提供更详细的错误信息。您还应该检查您的服务器错误日志，因为那里通常也有一些东西。

您是否收到带有空白页的 HTTP 500 响应代码？另外，您确定有问题的文件实际上有任何内容吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:34:12.483

您的代码中有两个语法错误：

```
 $content = stripslashes($content):
 $content = htmlentities($content): 
```

它们必须以分号结尾

```
 $content = stripslashes($content);
 $content = htmlentities($content); 
```

除此之外，您的错误可能会像其他人所说的那样被捕获并写入日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T16:28:25.330

很可能你有一个 php / php 语法错误。

在 .php 文件的第一行写下以下内容：

```
<?php error_reporting(E_ALL); ?> 
```

这应该使解释器向您显示您遇到的错误。

此外，有关您的问题的更多细节不会受到伤害。

# regex - 积极的向后看是行不通的，但向前看是有效的

> ID：12978453
> 
> 赞同：2
> 
> 时间：2012-10-19T16:24:41.180
> 
> 标签：regex, regex-lookarounds

我有包含**所有数字**的字符串。

我想检查是否：

1.  所有数字都在 的范围内`0-4`，并且
2.  字符串的最小长度应该是`5`

所以，我使用了这个正则表达式：

```
(?=^\d{5,}$)(^[0-4]*$) //works 
```

正如预期的那样，这可以完成工作

但是上面的正则表达式在正面使用时不起作用

```
(?<=^\d{5,}$)(^[0-4]*$) //doesn't work 
```

为什么在这种情况下`positive look behind`不起作用但起作用`look ahead`

**编辑**

是的，我可以使用

`^[0-4]{5,}$`

但问题是为什么`look-behind`在上述情况下不起作用

这是参考[THIS](https://stackoverflow.com/questions/12975750/regular-expressionmatch-a-word-and-a-length) question where `lookahead`working but not`lookbehind`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:47:57.943

你不应该从后面看，以匹配“看**后面**的断言”吗？

IE

```
(^[0-4]*$)(?<=^\d{5,}$) 
```

就目前而言，你想要这个：

*   *后跟*5 个或更多字符（构成整个字符串）
*   字符串的开头
*   包含`[0-4]`

这基本上减少到

*   `false`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:28:22.593

问题是您没有将后面的外观固定到输入的末尾。
尝试这个：

```
(?<=^\d{5,})(^[^5-9]*)$ // $ at end (and removed now-redundant $ from each look behind) 
```

此外，负面否定更难阅读。只需使用`[0-4]`而不是`[^5-9]`.

最后，为什么不使用这个：

```
^[0-4]{5,}$ 
```

# .net - 使用 QueryMultiple 的 Dapper 多重映射

> ID：12978454
> 
> 赞同：22
> 
> 时间：2012-10-19T16:24:46.363
> 
> 标签：.net, sql, dapper

我有一个返回多个结果集的存储过程。我正在用 dapper 执行此操作。

结果集之一是 Person JOIN Checks，其中 Person 可以有许多 Check。

最终目标是拥有具有检查对象集合的不同人员对象。

`QueryMultiple`给我一个`Sqlmapper.GridReader`。我看到过载`SqlMapper.GridReader.Read()`需要一个`Func<TFirst, TSecond, TReturn>`.

有没有一个如何使用它的例子？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T16:55:24.757

这是我如何让它工作的：

```
var q = _sqlConnection.QueryMultiple("MySproc",
                                     myParams,
                                     commandType: CommandType.StoredProcedure);
var set1 = q.Read<Set1Type>();

var set2Func = new Func<Person, Check, Person>((p, c) => {
    p.CheckAlert = c;
    return p;
});

var set2 = q.Read(set2Func, "CheckId")
            .GroupBy(x => x.PersonId)
            .Select(x => {
                var person = x.First();
                person.Checks = x.Select(p => p.Check).ToArray();
                person.Check = null; // i really don't like this
                return person;
            })
            .ToArray(); 
```

正如评论所说，我不喜欢 Person 对象上不需要的 check 属性。

我仍然很想听到更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-18T08:49:28.610

这是我使用的解决方案的一个版本。我回避了 Ronnie 在[他的回答](https://stackoverflow.com/a/12978912/575530)中提出的问题，它使用继承层次结构而不是将属性设置为 null，但它的作用大致相同。

下面是 SQL：用户有项目和集合，项目可以在集合中。

```
CREATE TABLE Users
(id UNIQUEIDENTIFIER DEFAULT (NEWID()) NOT NULL,
name NVARCHAR (MAX) NULL,
email NVARCHAR (128) NULL,
PRIMARY KEY (id))

CREATE TABLE Items
(id UNIQUEIDENTIFIER DEFAULT (NEWID()) NOT NULL,
userId UNIQUEIDENTIFIER NOT NULL,
name NVARCHAR (MAX) NULL,
description NVARCHAR (MAX) NULL,
PRIMARY KEY (id),
FOREIGN KEY (userId) REFERENCES Users (id))

CREATE TABLE Collections
(id UNIQUEIDENTIFIER DEFAULT (NEWID()) NOT NULL,
userId UNIQUEIDENTIFIER NOT NULL,
name NVARCHAR (MAX) NULL,
layoutSettings NVARCHAR (MAX) NULL,
PRIMARY KEY (id),
FOREIGN KEY (userId) REFERENCES Users (id))

CREATE TABLE CollectedItems
(itemId UNIQUEIDENTIFIER NOT NULL,
collectionId  UNIQUEIDENTIFIER NOT NULL,
PRIMARY KEY CLUSTERED (itemId, collectionId),
FOREIGN KEY (itemId) REFERENCES Items (id),
FOREIGN KEY (collectionId) REFERENCES Collections (id)) 
```

现在是数据模型类。为了处理具有多个查询的 Dapper 多重映射，集合比我预期的要复杂一些。

```
public class User
{
    public Guid Id { get; set; }
    public string Name { get; set; }
    public string Email { get; set; }
    public List<Item> Items { get; set; }
    public List<Collection> Collections { get; set; }
}

public class Item
{
    public Guid Id { get; set; }
    public Guid UserId { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
}

public class CoreCollection
{
    public Guid Id { get; set; }
    public Guid UserId { get; set; }
    public string Name { get; set; }
    public string LayoutSettings { get; set; }
}

public class PartialDataCollection : CoreCollection
{
    public Guid ItemId { get; set; }
}

public class Collection : CoreCollection
{
    public List<Guid> ItemIds { get; set; }
}

public class CollectedItem
{
    public Guid ItemId { get; set; }
    public Guid CollectionId { get; set; }
    public DateTime CreatedAt { get; set; }
} 
```

最后我们有了控制器方法，它使用带有多个查询的 Dapper 多重映射

```
[Route("GetUser/{id}")]
public User GetUser(Guid id)
{
    var sql = @"SELECT * FROM Users WHERE id = @id
                SELECT * FROM Items WHERE userId = @id
                SELECT * FROM Collections 
                    LEFT OUTER JOIN CollectedItems ON Collections.id = CollectedItems.collectionId  
                    WHERE userId = @id";
    using (var connection = new SqlConnection(ConnectionString))
    {
        var multi = connection.QueryMultiple(sql, new { id = id });
        var user = multi.Read<User>().Single();
        var items = multi.Read<Item>().ToList();
        var partialDataCollections = multi.Read<PartialDataCollection, CollectedItem, PartialDataCollection>(AddCollectedItem, splitOn: "itemId").ToList();

        user.Items = items;

        user.Collections = partialDataCollections.GroupBy(
            pdc => pdc.Id,
            (key, group) => new Collection
            {
                Id = key,
                UserId = group.First().UserId,
                Name = group.First().Name,
                LayoutSettings = group.First().LayoutSettings,
                ItemIds = group.Select(groupMember => groupMember.ItemId).ToList()
            }).ToList();

        return user;
    }
}

private PartialDataCollection AddCollectedItem(PartialDataCollection collection, CollectedItem collectedItem)
{
    if (collection != null && collectedItem != null)
    {
        collection.ItemId = collectedItem.ItemId;
    }
    return collection;
} 
```

在 Ronnie 对设置[他的答案](https://stackoverflow.com/a/12978912/575530)`person.Check = null`感到焦虑的地方，我担心将类添加到我的模型中会增加我的答案的复杂性。但我看不到一个简单的解决方法。`PartialDataCollection`

（注意，我在 Dapper GitHub 项目中提出了这个[问题。）](https://github.com/StackExchange/dapper-dot-net/issues/452)

# javascript - 有一个固定的列，而另一个可在无序列表中滚动

> ID：12978461
> 
> 赞同：2
> 
> 时间：2012-10-19T16:25:18.383
> 
> 标签：javascript, jquery, slider, tabbed

我正在使用创建大宽度 div 的 TabbedContent 脚本。这个 div 中又包含几个无序列表，每个列表将对应一个选项卡。然后，该脚本会调整大 div 的宽度以适应列表显示内容的区域。

现在，我无法在其中设置固定 div 或绝对 div，因为滚动将不再起作用。我需要的是 2 列设置，其中左列需要保持固定，而右列有文本。两者都需要在列表中，并且我需要能够在其他选项卡上复制它。

这是我用来运行标签系统的 .js：

```
 var TabbedContentSolutions = {
    init: function() {  
        $(".tab_thumb").click(function() {

            $(this).siblings().removeClass('active_thumb');
            $(this).addClass('active_thumb');

            var background = $(this).parent().find(".moving_bg2");

            $(background).stop().animate({
                left: $(this).position()['left']
            }, {
                duration: 0
            });

            TabbedContentSolutions.slideContent2($(this));

        });
    },

    slideContent2: function(obj) {

        var margin = $(obj).parent().parent().find(".slide_content2").width();
        margin = margin * ($(obj).prevAll().size() - 1);
        margin = margin * -1;

        $(obj).parent().parent().find(".tabslider2").stop().animate({
            marginLeft: margin + "px"
        }, {
            duration: 0
        });
    }
}

$(document).ready(function() {
    TabbedContentSolutions.init();
}); 
```

这是控制 .js 和 div 的 CSS：

```
 .tabbed_content2 {
    background-color: ##F7931E;
    width: 1000px;

}

.tabbed_content2 .slide_content2 {
    overflow: hidden;
    position: relative;
    width: 1000px;
}

.tabs2{
    margin-top: 10px;
    margin-left: 10px;
    height: 32px;
    width: 670px;
    position: relative;
    float: right;
}

.tabs2 .tab_thumb{
    height: 32px;
    width: 32px;
    margin-left: 9px;
    float: left;
    cursor: pointer;
}

.tabslider2{
    width: 17000px;
    overflow-x: hidden;
}

.tabslider2 ul {
    float: left;
    width: 980px;
    height: 323px;
    margin: 0px;
    padding: 0px;
    padding-right: 10px;
    padding-left: 10px;
    padding-top: 10px;
    overflow-x: hidden;
}

#_solutions{
    width: 980px;
    height: 300px;
    padding-left: 10px;
    padding-right: 10px;
}

.solutions_left{
    width: 273px;
    height: 330px;
    padding-right: 10px;
    float: left;
    }

.solutions_right{
    width: 670px;
    height: 100%;
    overflow: auto;
    float: left;
}

.tabslider2 ul li {
    padding-bottom: 4px;
    list-style-type: none;
}

.active_thumb{
    opacity: .10;
} 
```

这是我用来制作标签的基本 div 设置：

```
 <div id="_Content">
            <div id="_solutionsWrap">
                <div class='tabs2'>
                    <div class='moving_bg2'>
                    </div>
                    <span id="solucoes" class='tab_thumb' style="display:none">
                        asdasdasd
                    </span>
                                <div id="_solutions">
                    <div class='tabbed_content2'>
                        <div class='slide_content2'>
                            <div class='tabslider2'>
                            <ul>
                                <li>
                    <div class="solutions_left">
                        <p></p>
                    </div>
                    <div class="solutions_right">
                    <h1>solutions</h1>
                    <p></p>

                    <p></p>
                    </div>

                    </li>
                    </ul>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> 
```

我知道这听起来令人困惑，但至少会有 17 个不同的选项卡，并且每个选项卡都需要有一个非滚动的让栏来显示图像。

绝对定位根本不起作用，每次您尝试切换选项卡时，div 都会保留在显示区域内。

固定有同样的问题。我不知道如何解决这个问题，因为我对 Javascript 知之甚少，更不用说 jQuery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:06:04.040

我不确定您的选项卡系统，但 jquery-ui 中的一个可以正常工作-

[http://jsfiddle.net/jg5CC/2/](http://jsfiddle.net/jg5CC/2/)

html:

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" />
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
    <div id="tabs-1">
        <div class="image">img5</div>
        <p>aProin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
    </div>
    <div id="tabs-2">
        <div class="image">img4</div>
        <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
    </div>
    <div id="tabs-3">
        <div class="image">img3</div>
        <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
        <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
    </div>
</div>
​ 
```

CSS：

```
.image {
 position: fixed;  
 width: 100px;
 height: 100px;
 background: lightgreen;  
 opacity: 0.7;    
}
p {
 height: 1000px;   
}​ 
```

js：

```
$( "#tabs" ).tabs(); 
```

# jakarta-ee - spring/javaee 自定义 404 错误页面不起作用

> ID：12978465
> 
> 赞同：0
> 
> 时间：2012-10-19T16:25:35.503
> 
> 标签：jakarta-ee, spring-mvc, custom-error-pages

我正在开发这个 Spring 应用程序，我“突然”决定将诸如 404（著名的 HTTP 404 Not Found）之类的错误页面匹配到一个更用户友好的页面。

经过快速研究，我发现添加此代码可以解决`web.xml`问题

```
 <error-page>
        <error-code>404</error-code>
        <location>/error/404.jsp</location>
    </error-page> 
```

这里我们假设我将所需的`404.jsp`文件添加到`/webapp/error/`目录中。

相关文章：

*   [Tomcat web.xml 描述符中的专有 url 模式](https://stackoverflow.com/questions/1495228/exclusive-url-patterns-in-tomcat-web-xml-descriptor)
*   [使用 Spring DispatcherServlet 自定义 404](https://stackoverflow.com/questions/1196569/custom-404-using-spring-dispatcherservlet)

然而，在运行应用程序并输入随机 url（例如`http://localhost:8080/SpringWebApp/myRandomUrladasdad`）后，我发现自己被重定向到另一个标准 404 页面——不是我的。

仅供参考，这是我的整个 web.xml

```
 <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>springapp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>springapp</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>imageServlet</servlet-name>
    <servlet-class>sphbmveclp.account.controllers.ImageFromDirServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>imageServlet</servlet-name>
    <url-pattern>/image/*</url-pattern>
  </servlet-mapping>

  <error-page>
    <error-code>404</error-code>
    <location>/error/404.jsp</location>
  </error-page> 
```

经过大量的谷歌搜索后，我遇到了这个：

[http://www.mkyong.com/spring-mvc/404-error-code-is-not-working-in-spring-mvc/](http://www.mkyong.com/spring-mvc/404-error-code-is-not-working-in-spring-mvc/)

所以我以为我在这里有一些好东西。我认为我的巨大`<url-pattern>/</url-pattern>`可能造成了所有这些麻烦。`<url-pattern>/admin/*</url-pattern>`因此，在这种情况下，我将其更改为更具体的内容。

但是没有运气，它仍然没有按预期工作。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:11:16.200

很确定 404 处理在 Spring 容器之外。你如何处理 Spring-MVC 上的 url 模式？你能发布你的弹簧上下文文件吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T17:20:08.010

这只是关于**在 Eclipse 中运行 Tomcat 的**另一个警告。

如果我手动部署我的应用程序或自动“在”Eclipse 之外（手动部署 Tomcat 中的 .war 文件），不知何故我的配置工作得非常好

还有其他与在 IDE 中运行 Tomcat 相关的问题，例如：

*   内存领域：当您创建一个新服务器时，一组配置文件会从您的 Tomcat 安装中导入（复制）到您工作区的 Servers 项目下的相应文件夹中。有时 Eclipse 不会更新此文件，因此您的更改将被忽略。请参阅[https://www.coderanch.com/t/583979/Tomcat/Memory-Realm-Authentication-Fails-Tomcat](https://www.coderanch.com/t/583979/Tomcat/Memory-Realm-Authentication-Fails-Tomcat)。

结论：在 Eclipse 中运行 Tomcat 时要小心...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T22:11:34.473

经过合理的谷歌搜索后，我发现了这个：http: [//developingdeveloper.wordpress.com/2008/02/20/handling-exceptions-in-spring-mvc-part-1/](http://developingdeveloper.wordpress.com/2008/02/20/handling-exceptions-in-spring-mvc-part-1/)。

# javascript - JavaScript EventSource SSE 未在浏览器中触发

> ID：12978466
> 
> 赞同：28
> 
> 时间：2012-10-19T16:25:37.773
> 
> 标签：javascript, html, node.js, server-sent-events

我一直在开发一个 nodejs 服务器来为我正在用 HTML5 开发的新网站提供服务器端事件。

当我远程登录到服务器时，它工作正常，向我发送所需的 HTTP 响应标头，然后是我目前每 2 或 3 秒生成的事件流，以证明它有效。

我已经尝试了最新版本的 FireFox、Chrome 和 Opera，它们创建了 EventSource 对象并连接到 nodejs 服务器 OK，但是没有一个浏览器生成任何事件，包括 onopen、onmessage 和 onerror。

但是，如果我停止我的 nodejs 服务器，终止来自浏览器的连接，它们都会突然发送所有消息并显示我的所有事件。然后浏览器都尝试按照规范重新连接到服务器。

我在网络服务器上托管所有内容。本地文件中没有运行任何内容。

我已经阅读了我可以在网上找到的所有内容，包括我购买的书籍，但没有任何迹象表明存在任何此类问题。有什么我想念的吗？

**示例服务器实现**

```
 var http = require('http');
  var requests = [];

  var server = http.Server(function(req, res) {
    var clientIP = req.socket.remoteAddress;
    var clientPort = req.socket.remotePort;

    res.on('close', function() {
      console.log("client " + clientIP + ":" + clientPort + " died");

      for(var i=requests.length -1; i>=0; i--) {
        if ((requests[i].ip == clientIP) && (requests[i].port == clientPort)) {
          requests.splice(i, 1);
        }
      }
    });

    res.writeHead(200, {
      'Content-Type': 'text/event-stream', 
      'Access-Control-Allow-Origin': '*', 
      'Cache-Control': 'no-cache', 
      'Connection': 'keep-alive'});

    requests.push({ip:clientIP, port:clientPort, res:res});

    res.write(": connected.\n\n");
  });

  server.listen(8080);

  setInterval(function test() {
    broadcast('poll', "test message");
  }, 2000);

function broadcast(rtype, msg) {
  var lines = msg.split("\n");

  for(var i=requests.length -1; i>=0; i--) {
    requests[i].res.write("event: " + rtype + "\n");
    for(var j=0; j<lines.length; j++) {
      if (lines[j]) {
        requests[i].res.write("data: " + lines[j] + "\n");
      }
    }
    requests[i].res.write("\n");
  }
} 
```

**一个示例 html 页面**

```
<!DOCTYPE html>
<html>
  <head>
    <title>SSE Test</title>
    <meta charset="utf-8" />
    <script language="JavaScript">
      function init() {
        if(typeof(EventSource)!=="undefined") {
          var log = document.getElementById('log');
          if (log) {
            log.innerHTML = "EventSource() testing begins..<br>";
          }

          var svrEvents = new EventSource('/sse');

          svrEvents.onopen = function() {
            connectionOpen(true);
          }

          svrEvents.onerror = function() {
            connectionOpen(false);
          }

          svrEvents.addEventListener('poll', displayPoll, false);             // display multi choice and send back answer

          svrEvents.onmessage = function(event) {
              var log = document.getElementById('log');
              if (log) {
                log.innerHTML += 'message: ' + event.data + "<br>";
              }
            // absorb any other messages
          }
        } else {
          var log = document.getElementById('log');
          if (log) {
            log.innerHTML = "EventSource() not supported<br>";
          }
        }
      }

      function connectionOpen(status) {
          var log = document.getElementById('log');
          if (log) {
            log.innerHTML += 'connected: ' + status + "<br>";
          }
      }

      function displayPoll(event) {
        var html = event.data;
          var log = document.getElementById('log');
          if (log) {
            log.innerHTML += 'poll: ' + html + "<br>";
          }
      }
    </script>
  </head>
  <body onLoad="init()">
    <div id="log">testing...</div>
  </body>
</html> 
```

这些示例是基本的，但与我在书籍和在线看到的所有其他演示相同。eventSource 似乎只有在我结束客户端连接或终止服务器时才有效，但这将是轮询而不是 SSE，我特别想使用 SSE。

有趣的是，当我在线使用它们时，例如来自[html5rock](http://www.html5rocks.com/en/tutorials/eventsource/basics/)的 thouse 之类的演示似乎也无法正常工作。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-30T09:25:50.110

破解它！:)

感谢帮助我进行测试的[Tom Kersten的帮助。](http://tomkersten.com/articles/server-sent-events-with-node)原来代码不是问题。

被警告.. 如果您的客户使用任何类型的防病毒软件来拦截 Web 请求，它可能会在这里引起问题。在这种情况下，提供企业级防病毒和防火墙保护的 Sophos Endpoint Security 具有称为 Web 保护的功能。此功能中有一个扫描下载的选项；似乎 SSE 连接被视为下载，因此在连接关闭并接收到要扫描的流之前不会释放到浏览器。禁用此选项可以解决问题。我已经提交了错误报告，但其他防病毒系统可能会这样做。

感谢您的建议并帮助大家:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T07:34:57.453

[http://www.w3.org/TR/eventsource/#parsing-an-event-stream](http://www.w3.org/TR/eventsource/#parsing-an-event-stream)

> 由于为此类资源建立到远程服务器的连接预计将是长期存在的，因此 UA 应确保使用适当的缓冲。特别是，虽然带行的行缓冲定义为以单个 U+000A 换行 (LF) 字符结尾是安全的，但具有不同预期行结尾的块缓冲或行缓冲可能会导致事件调度延迟。

尝试使用行尾（`"\r\n"`而不是`"\n"`）。

[http://www.w3.org/TR/eventsource/#notes](http://www.w3.org/TR/eventsource/#notes)

> 作者还告诫说，HTTP 分块可能对该协议的可靠性产生意想不到的负面影响。在可能的情况下，应该禁用分块以提供事件流，除非消息的速率足够高以至于这无关紧要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:08:33.483

我修改了您的服务器端脚本，“似乎”部分适用于 Chrome。
但是每 2 个广播的连接中断，并且客户端上只能显示 1 个。

Firefox 适用于第一次广播并因此错误而停止：

> 错误：页面加载时与 /sse 的连接中断。

Chrome 将尝试重新连接并接收第三次广播。

我认为这也与防火墙设置有关，但无法解释为什么有时会起作用。

**注意**：对于响应的事件监听器（第 10 行），'close' & 'end' 有不同的结果，
你可以试试，我的结果是 [close: 1 success/2 broadcast] & [end: 1 success/8 broadcast]

```
var http = require('http'), fs = require('fs'), requests = [];

var server = http.Server(function(req, res) {
  var clientIP = req.socket.remoteAddress;
  var clientPort = req.socket.remotePort;
  if (req.url == '/sse') {
    var allClient="";for(var i=0;i<requests.length;i++){allClient+=requests[i].ip+":"+requests[i].port+";";}
    if(allClient.indexOf(clientIP+":"+clientPort)<0){
      requests.push({ip:clientIP, port:clientPort, res:res});
      res.on('close', function() {
        console.log("client " + clientIP + ":" + clientPort + " died");
        for(var i=requests.length -1; i>=0; i--) {
          if ((requests[i].ip == clientIP) && (requests[i].port == clientPort)) {
            requests.splice(i, 1);
          }
        }
      });
    }
  }else{
    res.writeHead(200, {'Content-Type': 'text/html'});
    res.write(fs.readFileSync('./test.html'));
    res.end();
  }
});
server.listen(80);

setInterval(function test() {
  broadcast('poll', "test message");
}, 500);

var broadcastCount=0;
 function broadcast(rtype, msg) {
    if(!requests.length)return;
    broadcastCount++;
    var lines = msg.split("\n");
    for(var i = requests.length - 1; i >= 0; i--) {
        requests[i].res.writeHead(200, {
            'Content-Type': 'text/event-stream',
            'Cache-Control': 'no-cache',
            'Connection': 'keep-alive'
        });
        requests[i].res.write("event: " + rtype + "\n");
        for(var j = 0; j < lines.length; j++) {
            if(lines[j]) {
                requests[i].res.write("data: " + lines[j] + "\n");
            }
        }
        requests[i].res.write("data: Count\: " + broadcastCount + "\n");
        requests[i].res.write("\n");
    }
    console.log("Broadcasted " + broadcastCount + " times to " + requests.length + " user(s).");
 } 
```

# c++ - Boost.Move 与其他 Boost 库的集成

> ID：12978471
> 
> 赞同：0
> 
> 时间：2012-10-19T16:25:55.450
> 
> 标签：c++, boost, rvalue-reference

*右值*引用通常会提高 C++ 程序的性能。但它们不能直接在 C++03 编译器中使用。幸运`boost::move`的是，即使在 C++03 中似乎也能模仿它：

> 右值引用是 C++0x 的一个主要特性，它支持 C++ 值的移动语义。但是，我们不需要 C++0x 编译器来利用移动语义。Boost.Move 在 C++03 编译器中模拟 C++0x 移动语义，并允许编写在 C++03 和 C++0x 编译器中最佳工作的可移植代码。

像用 C++98/03 编写的标准库之类的东西不会从中受益，`boost::move`因为它们需要重新编写。（新版本的标准库如 VC10 已使用右值引用重写。）

`boost::move`但我想知道自从1.48 引入以来，有多少 Boost 库被重写了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:31:39.963

查看[Boost 版本历史](http://www.boost.org/users/history/)，我看到**Unordered**在 1.48 中更新，**Thread**在 1.50 中更新。我看不到其他采用 Boost.Move 的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T07:40:04.067

我刚刚检查了 Boost 1.51.0，它似乎`boost::move`受到以下库的支持：

*   容器（包括`vector`,`list`等`map`）
*   进程间（包括`smart_ptr`和`unique_ptr`）
*   侵入式
*   线
*   无序

只需在 Boost headers 中搜索，`BOOST_RV_REF`这是`boost::move`支持的标志。

# asp.net - ASP.NET 中的 SignalR 客户端

> ID：12978472
> 
> 赞同：0
> 
> 时间：2012-10-19T16:26:02.313
> 
> 标签：asp.net, signalr, async-await, signalr-hub, signalr.client

我在 asp.net 应用程序中创建了一个服务器集线器，如下所示

```
public class Calc : Hub
{
    public void CalculateSomething(int a, int b)
    {
        // start working in a new thread
        var task = Task.Factory.StartNew(() => DoCalculate(a, b));

        // attach a continuation task to notify
        // the client when the work is done
        task.ContinueWith(t =>
        {
            System.Threading.Thread.Sleep(2000);
            Clients.addMessage(t.Result);
            Caller.notifyCalculateResult(t.Result);
            System.Threading.Thread.Sleep(2000);
            Caller.notifyCalculateResult("Completed");
            Clients.addMessage("Completed");
        });
    }

    private int DoCalculate(int p1, int p2)
    {
        // do some slow work on the input,
        // e.g. call webservice or I/O.
        int result = p1 + p2;
        //int result = DoSlowWork(p1, p2);
        return result;
    }
} 
```

现在在另一个 asp.net 应用程序中，我使用 SiganlR 客户端创建了一个客户端。但它不能正常工作。我正在寻找从服务器推送到客户端的数据

```
using System.Threading.Tasks;
using SignalR;
using SignalR.Client;
using SignalR.Client.Hubs;
namespace WebApplication2
{
    public partial class _Default : Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            // Connect to the service
            var hubConnection = new HubConnection("http://localhost:3119/");

            // Create a proxy to the chat service
            var chat = hubConnection.CreateProxy("Calc");

            // Print the message when it comes in
            chat.On("addMessage", message =>Print(message));

            // Start the connection
            hubConnection.Start().Wait();

            // Send a message to the server
            chat.Invoke("CalculateSomething", 1, 2).Wait();
        }

        private async void Print(object message)
        {
            Response.Write(message);
        }
    }
} 
```

控制台客户端应用程序工作正常。主要问题在于 asp.net，因为它无法处理来自服务器的回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T17:08:35.617

看起来你错误地调用了服务器端方法，试试这个

```
chat.Invoke("CalculateSomething", 1, 2).ContinueWith(task =>
{ 
  Console.WriteLine("Value from server {0}", task.Result);
}); 
```

# vba - Excel 宏：根据列日期选择特定行

> ID：12978474
> 
> 赞同：0
> 
> 时间：2012-10-19T16:26:05.900
> 
> 标签：vba, excel, excel-2007

我正在编写我的第一个宏，并且有一个关于如何根据特定列中的值选择特定行的问题。到目前为止，这是我的代码：

```
Sub Pipeline()

'Module 3
'Iterating through the Funding Date Column and looking for clients going live within 30 days
'Selecting the rows for each client in that target range
'TODO: Export information into an email template in Outlook
'TODO: Send email to distribution list

Dim fundingDate As range
Set fundingDate = range("M4:M500")

Dim todaysDate As Date
todaysDate = Date

For Each cell In fundingDate
  If cell < todaysDate + 30 Then
   'Need to select the entire row
  Else
  cell.Font.ColorIndex = 3
End If
Next

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:29:48.997

替换`'Need to select the entire row`为

`cell.entirerow.select`

**更新** 这是一种更有效的方法，无需所有循环即可获得所需内容。

在您的代码中将 from 替换`For Each cell ...`为`Next`：

```
With fundingDate    
    .AutoFilter 1, "<" & todaysDate + 30        
    .SpecialCells(xlCellTypeVisible).Select 
    'here are your clients going live in next 30 days    
    .AutoFilterMode = False    
End With 
```

如果您在 30 天内没有客户端上线，您可能需要提供一些错误检查（`SpecialCells`方法将在此失败），而且，如果 M4 不是您的列标题，您可能需要调整范围如何获取可见细胞。

# javascript - 从双重选择器中排除一个类的麻烦

> ID：12978478
> 
> 赞同：1
> 
> 时间：2012-10-19T16:26:42.383
> 
> 标签：javascript, jquery, jquery-selectors

我试图从 jquery 函数中排除一个类，但我似乎无法让它正常工作。我试过`.not()`了，但它似乎没有正常工作。

这是我的基本结构......

```
<div id='spotList' class='clickableSpot id_117 '>
    <div id='leftCheckboxBar'>
        <form id='checkboxForm' name='checkboxForm'>
            <input type='checkbox' class='spotCheck' unchecked id='117'/>
        </form>
    </div><!--end leftcheckboxbar-->

    <div id='leftCredits'>
        <ul class='credits'>
            <li id='agencyItem'>Agency: <span class='creditText searchAgency'>Y&R</span></li>
        </ul>
    </div><!--end leftcredits-->
</div><!--END SPOT LIST--> 
```

现在我有一个 jQuery 函数，您可以在其中直接单击`.spotList`复选框或单击`.spotList`div。它看起来像这样，并且可以正常工作...

```
$('.spotCheck, .clickableSpot').click(function(){ 
   /*do stuff*/
}); 
```

我不希望跨度`.creditText`包含在该选择器中。我似乎无法弄清楚。我必须有一种方法可以排除单击该跨度并触发该功能。但是我需要 div 中的所有其他内容都是可点击的，而不是跨度内的那段文本。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:32:52.093

您可以使用对象`target`的属性`event`：

```
$('.spotCheck, .clickableSpot').click(function(event){ 
   if (!$(event.target).hasClass('creditText')) {
     // do something here
   }
}); 
```

您也可以使用`stopPropagation`以下方法：

```
$('.creditText').click(function(event){
    event.stopPropagation()
}) 
```

[http://jsfiddle.net/4rBaM/](http://jsfiddle.net/4rBaM/)

# ruby - 使用 RGL 加载 DOT 文件

> ID：12978487
> 
> 赞同：0
> 
> 时间：2012-10-19T16:27:05.237
> 
> 标签：ruby, dot, ruby-rgl

RGL 支持从图形写入 DOT 文件，是否可以从 DOT 文件创建图形？

*（显然我可以自己解析 DOT 文件并创建一个图表，但我想知道这个功能是否已经存在）。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-11T17:43:58.957

首先，您必须安装 graphviz，它会为您提供“点”命令。然后你可以运行

```
dot -Tpng graph.dot > output.png 
```

但我发现在安装 dot 后，如果您执行类似的操作，rgl 方法 write_to_graphic_file 会自动写入图像

```
graph_obj.write_to_graphic_file('png') 
```

# node.js - 在处理从 Backbone 到 Express / Mongoose 的模型和集合时加载相关实体

> ID：12978492
> 
> 赞同：0
> 
> 时间：2012-10-19T16:27:41.860
> 
> 标签：node.js, mongodb, backbone.js, express, mongoose

我有一个`UserService`对象，它本质上是`Service`带有附加配置参数的对象，并附加到`User`. 在我看来，我想呈现这些列表，`UserServices`但是模型是这样形成的：

```
UserService = Backbone.Model.extend({
    defaults: { 
        id: 0, 
        user_id: 0, // This needs to reference the user object somehow 
        service_id: 0, // This needs to reference the service object somehow
        length: 216000, 
        price: 1000
    }
}); 
```

如果我将此模型绑定到视图，最终呈现的是 service_id 而不是我需要呈现的参数：`service.name`。

我的问题是：

`UserService`服务时模型中应该存储什么？完整的服务对象？猫鼬身份证？别的身份证？（请指定建议）

我应该从哪里获取此信息`service.name`/何时应该拉动`Service`对象以获取该信息？`service.name`渲染时能够在视图中进行操作会很好...

是否有链接功能 - 在加载模型时，加载所需的相关模型？

总的来说，我只需要了解相关模型在 Backbone / Express / Mongoose 中的工作原理。

任何帮助表示赞赏！

**更新：**在做了一些阅读之后，我可以看到几种不同的方法：

1.  在[构造函数/初始化程序](http://backbonejs.org/#Model-constructor)中，根据从服务器返回的引用 ID将对象加载到`Service`对象中。`UserService`

我对那个问题的疑问变成了……参考 ID 是什么？我应该把新检索到的对象放在哪里，可能代替 ID？

1.  使用 toJSON 方法返回一个美化版本的 UserService ，它会在其中检索`Service`对象并返回一个带有服务名称的对象：

    { id: ???, service_name: "this was retrieved from the service object in the toJSON method", length: "1 hour", // 从 toJSON 方法中转换 price: 10.00 // 从 cents 转换为美元toJSON 方法 }

或者也许是一个组合？想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:31:09.963

[解析](http://parse.com)模型可以很好地处理加载相关实体，还有一个[名为 Backbone Relational](https://github.com/PaulUithol/Backbone-relational)的库可以帮助解决这个问题。

否则，我最好的建议是存储对象的 ID 并在成功获取第一个实体后获取相关实体。

任何需要代码示例的人都可以在这里发表评论，我会看看我能想出什么。

# backbone.js - 在服务器响应之前，Backbone-Relational 触发添加事件

> ID：12978497
> 
> 赞同：2
> 
> 时间：2012-10-19T16:27:53.053
> 
> 标签：backbone.js, backbone-relational

我目前在一个项目中使用 Backbone-Relational，但它的行为不像它应该的那样。

假设模型 A 与模型 B 具有 HasMany 关系。模型 A 侦听“add:model_b”事件，以便在将实例添加到模型 A 关系时为模型 B 呈现必要的视图。但是，为了正确渲染视图模板，我们需要来自服务器的一些数据。通过阅读主干文档，在我看来，这样做的合乎逻辑的方法如下：

```
modelA.get("model_b").create(newModelData, {wait: true}); 
```

由于 Backbone-Relational 将关系实现为 Backbone 集合，我只需调用 collection.create 方法来实例化我的新模型 B，并将 {wait: true} 传递给选项以延迟“添加”事件直到服务器响应。

但是，这似乎没有效果：“添加”事件会立即触发，因此在尝试渲染需要尚未包含在模型中的数据的视图时出现错误。有谁知道为什么 {wait: true} 在这种情况下什么都不做，我怎样才能从 Backbone-Relational 中获得所需的行为？

# apache - 如何在位于另一台计算机上的文件夹上添加虚拟主机？

> ID：12978501
> 
> 赞同：0
> 
> 时间：2012-10-19T16:28:14.013
> 
> 标签：apache, vhosts, zend-server-ce

我在我的机器上安装了 Zend Server（Windows 7 家庭版），我正在尝试在位于我们服务器中的文件夹上设置虚拟主机。由于某些原因，我无法在其中设置 apache Web 服务器，因此必须在我自己的计算机上完成。

但我无法完成它。我在 httpd-vhosts.conf 中的虚拟主机设置是这样的：

```
<VirtualHost *:8081>
    ServerAdmin web@web.com.br
    DocumentRoot "\Data\Websites\Online\TheClientName\Site"
    ServerName clientname.local
    ServerAlias clientname.local
    ErrorLog "logs/clientname.log"
</VirtualHost> 
```

和主机文件：

```
172.17.10.1/Data/Websites/Online/TheClientName/Site        clientname.local 
```

我检查了 Apache 日志。有一个警告：

```
Warning: DocumentRoot [C:/Data/Websites/Online/TheClientName/Site] does not exist 
```

我获得了对该文件夹的完全访问权限，并且我将它映射为本地驱动器。我尝试按如下方式设置 DocumentRoot，但没有运气；设置 'Z:\' 后 Apache 不会重新启动。

```
"Z:\Data\Websites\Online\TheClientName\Site" 
```

我想知道是否有办法将此 v-host 指向服务器文件夹。有任何想法吗？

# javascript - Bootstrap、Angular.js 和 Ember.js 中使用的数据属性选项不会与 Unobtrusive Javascript 原则冲突吗？

> ID：12978507
> 
> 赞同：36
> 
> 时间：2012-10-19T16:28:26.307
> 
> 标签：javascript, twitter-bootstrap, ember.js, angularjs, javascript-framework

我一直被告知将 JavaScript 与 HTML 标记分开是一种很好的做法（ala 'unobtrusive javascript'）。然而，我看到了一些新的和流行的框架的相反趋势，例如 Bootstrap、Angular.js 和 Ember.js。有人能告诉我为什么这不被认为是不好的做法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-19T18:32:06.467

不显眼的 Javascript 是网络上许多地方的好习惯。您提到的框架通常用于创建成熟的 Javascript 应用程序。在许多这些应用程序中，没有 Javascript 的体验通常是一个空白页面。在那种环境下，将标记与 Javascript 分开的价值相对较低。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-25T17:45:13.407

我自己也在问同样的问题，并得出以下结论：

HTML 是用于呈现文档的标记语言。每个人都在引用的语义实际上与表示丰富的文档有关。这包括允许更丰富体验的图像和链接。相同的原则可以应用于 Word 文档，您可以将其标记为强调，然后将强调的样式设置为红色，而不是将特定文本标记为红色，这将是语义上表达意图的正确方式。

问题的出现是因为 HTML 实际上包含允许用户交互的元素 - 表单。最初的设计是允许*非*专业人士创建简单的交互式 UI。当我检查不同的桌面 GUI 框架时，实际视图和视图逻辑之间没有分离之类的东西，因为当你构建 GUI 时，你不需要这种分离。

对我来说，重要的是你所写的内容有多少是基于内容的或基于 GUI 的。因为 HTML 有两个目的，所以很难知道服务器要提供什么。基本上像维基百科这样的网站，甚至是 Stackoverflow 都是面向内容的。这意味着如果他们希望更广泛的客户端可以访问，比如机器人和旧版浏览器，他们应该能够流式传输纯 html。当您想要提供内容和一些更丰富的 UI 体验时，我正在考虑两种可能的策略，例如我正在撰写此评论的文本。一种是提供 html 服务，然后初始化 GUI。这也称为不显眼的 javascript 和语义 HTML。这是大多数面向内容的网站所做的。这主要是为了能够从允许其内容更易于访问的浏览器和机器人中受益。另一种策略是识别客户端的类型并提供不同的内容，这只能在客户端可靠地实现，因为在这两种情况下都将提供 html。这仍然接近第一个策略，因为 HTML 被用作/滥用作为内容和 GUI 表示的方式。

如果您正在编写一个不提供内容但提供实际服务/流程的应用程序，那么像 AngularJS 和类似的架构更适合。

以我的经验，大多数企业都必须同时提供。假设您有一个使用 HTML/Javascript 允许用户创建绘图的应用程序。这个应用程序不需要遵循任何不显眼的准则，但它也无法在旧浏览器上运行。但是，如果您在用户之间提供绘图的社交共享，允许评论和其他内容，那么最好以机器人和其他客户端可以轻松访问内容的方式编写网站的这一部分。

# nhibernate - 在多对任意映射上投影带有查询的子查询

> ID：12978510
> 
> 赞同：2
> 
> 时间：2012-10-19T16:28:30.813
> 
> 标签：nhibernate, queryover

我有以下域模型

```
public interface IAppliedTo
{
    public Guid Id { get; set; }
}

public class Widget
{
    public DateTime DateCreated { get; set; }
    public Guid Id { get; set; }
    public ISet<IAppliedTo> AppliesTo { get; set; }
}

public class Master : IAppliedTo
{
    public Guid Id { get; set; }
} 
```

小部件映射已将 ApplysTo 定义为：

```
<set name="AppliesTo" table="WidgetAppliesTo" lazy="true" >
    <key column="WidgetId"></key>
    <many-to-any  id-type="Guid" meta-type="int" >
      <meta-value  class="Master" value="1"/>

      <column name="ObjectType" />
      <column name="ObjectId" />

    </many-to-any>
  </set> 
```

我正在使用 Master 上的 QueryOver 编写查询，并且我想提取适用于 Master 的任何 Widget 的最后一个 CreatedDate。

基本上我想要类似的东西：

```
 Master mast=null;
            Widget widg=null;
            var widgetQuery=QueryOver.Of<Widget>(()=>widg);

            var query = NHibernateSessionManager.Instance.GetSessionFrom()
                .QueryOver<Master>(() => mast)
                .Where(() => mast.Name == "Josh")
                .SelectList(l => 
                    l.SelectSubQuery(widgetQuery.Where(() => widg.AppliesTo.Contains(mast))
                        .Select(Projections.Max(() => widg.DateCreated))
                    )
                 ); 
```

如果我的AppliesTo 是特定类型，我会知道如何执行此操作，但我如何告诉nHibernate 使用ObjectId。本质上，我正在尝试获取此查询：

```
SELECT *,(SELECT MAX(DateCreated) 
          FROM Widget 
          INNER JOIN WidgetAppliesTo
            on Widget.Id=WidgetAppliesTo.ActivityId
            WHERE objectId=[master].Id)
FROM [Master] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T11:33:10.970

这可能有效，但我无法测试它

```
Master mast=null;

var query = NHibernateSessionManager.Instance.GetSessionFrom()
    .QueryOver(() => mast)
    .Where(() => mast.Name == "Josh")
    .SelectList(l =>
        l.SelectSubQuery(QueryOver.Of<Widget>()
            .JoinQueryOver(widg => widg.AppliesTo)
                .Where(obj => obj.Id == mast.Id)
            .Select(Projections.Max<Widget>(widg => widg.DateCreated))
        )
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:36:07.673

到目前为止，我设法做的最好的事情是使用 Sql Projection 来添加它。

```
 .Select(Projections.SqlProjection(
    "(select max(datecreated) from Widget wid
     inner join WidgetAppliesTo widTo on wid.Id=widTo.ActivityId and widTo.ObjectId=this_.Id)
 as lastTouchDate",
new string[]{"lastTouchDate"},
new NHibernate.Type.IType[]{NHibernateUtil.DateTime})
.WithAlias(() => jobDto.LastTouchDate)); 
```

虽然这可行，但我希望看到一个非黑客解决方案

# knockout.js - 虚拟自定义绑定

> ID：12978515
> 
> 赞同：1
> 
> 时间：2012-10-19T16:28:45.460
> 
> 标签：knockout.js, ko-custom-binding

我有一个场景，我想成为 abel 具有可见性绑定。我希望它是虚拟的。

这个小提琴解决了我的问题，但我想要一个 bindgHandler 。我要解决的问题是，如果块属性为 true，则元素应该占用 HTML 中的空间，并且我不想渲染不必要的东西。

[http://jsfiddle.net/7ENpC/1/](http://jsfiddle.net/7ENpC/1/)

我想成为 abel 来做这件事，或者更好当然。

```
<!-- ko foreach: allRows -->
<!-- ko visibility: $data-->
 <div>
   <span data-bind="text:text"></span>
 </div>
<!-- /ko -->
<!-- /ko --> 
```

在 bindingHander 中，我所做的就是

```
if(block)
   $element.css("visibility","hidden");
else
   $element.css("visibility","visible"); 
```

* * *

我无法正确...有人可以帮助我朝正确的方向前进。

```
ko.bindingHandlers.visibility = {
init: function (element, valueAccessor, allBindingsAccessor, viewModel) {

},
update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
                var child = ko.virtualElements.firstChild(element),

       var visible = valueAccessor().visible();
       var block= valueAccessor().block();

   if (!block||!visible) {
       //call the general if binding ?

    } else {
      //Add visibility:hidden class 
    }

}
};
ko.virtualElements.allowedBindings.visibility = true; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:52:27.753

要使自定义绑定能够用作虚拟元素，您需要添加

```
ko.virtualElements.allowedBindings.<your custom binding name here> = true; 
```

所以，在你的情况下，你会想要做

```
ko.virtualElements.allowedBindings.visiblity = true; 
```

在你打电话之前进入你的代码`ko.applyBindings()`。有关详细信息，请参阅[本文档](http://knockoutjs.com/documentation/custom-bindings-for-virtual-elements.html)。

# ruby - 验证两列的唯一性

> ID：12978516
> 
> 赞同：1
> 
> 时间：2012-10-19T16:28:47.023
> 
> 标签：ruby, ruby-on-rails-3, devise

我正在尝试验证两列在我的用户模型中是唯一的。我搜索了谷歌，据我了解，以下代码不起作用：

```
validates :login, :uniqueness=>true
validates :email, :uniqueness=>true 
```

在我的情况下，这样做将验证电子邮件的唯一性，但不会验证登录的唯一性。我设置登录名在数据库上必须是唯一的。但是，如果它已经存在，那么它所要做的就是生成一个运行时错误。我不希望在生产中出现该错误，因为它会导致 500 内部服务器错误，用户无法理解。

关于如何验证这两个领域的独特性的任何想法？

**使用的身份验证：**

*   可以可以
*   设计
*   设计邀请

**更新：**

据我所知，问题是由设计引起的，特别是验证电子邮件和密码的可验证模块。

**更新 2：**

从 Devise 中删除可验证模块将不会导致检查唯一性。

**更新 3：**

看来设计没有引起问题。相反，一个名为 Devise Invitable 的宝石是。删除此 gem 会触发验证。这个 gem 似乎也试图强制验证电子邮件字段。由于这种宝石的性质，这是有道理的，但不应该阻塞。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T17:05:40.797

应该能够做到这一点`scope`，通过设计添加到默认验证。

对于 Rails 3 版本：

```
validates :email, :uniqueness => {:scope => :login} 
```

参考：

*   [rails 3验证多个属性的唯一性](https://stackoverflow.com/questions/3276110/rails-3-validation-on-uniqueness-on-multiple-attributes)
*   [如何验证两个字段的唯一性](https://stackoverflow.com/questions/1633297/how-do-i-validate-two-fields-for-uniqueness)
*   [validates_uniqueness_of 的 API 文档](http://apidock.com/rails/ActiveRecord/Validations/ClassMethods/validates_uniqueness_of)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:07:54.703

问题出在 devise_invitable gem 上。在设计初始化程序中，我必须设置

```
 config.validate_on_invite = true 
```

为确保执行了验证，默认值为 false。我还必须删除设计可验证模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T06:14:45.620

该代码在 Rails 3.2.8 上运行良好。我已经对其进行了测试...

可能你的宝石有问题...

# java - 如何用十位数字填充数组

> ID：12978517
> 
> 赞同：0
> 
> 时间：2012-10-19T16:28:46.523
> 
> 标签：java, arrays

我正在尝试编写一个程序，要求用户输入一个十位数字，然后将每个数字存储在一个数组中。

```
public class checksum {

public static void main(String[] args) {

    int david[] = new int[10];
    System.out.println("Enter your 10 digit number: ");
    Scanner scan = new Scanner(System.in);

    for (int i = 0; i < david.length; i++) {

        david[i] = scan.nextInt();
    }

    System.out.println(david);

} 
```

}

谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:33:16.110

读取它`String`，然后使用填充数组`String.charAt`

```
 int david[] = new int[10];
    System.out.println("Enter your 10 digit number: ");
    Scanner scan = new Scanner(System.in);
    String str = scan.next();
    if (str.length() < david.length) {
        System.out.println("invalid number");
    }
    for (int i = 0; i < david.length; i++) {

        david[i] = Character.digit(str.charAt(i), 10);
    }
    System.out.println(Arrays.toString(david)); 
```

输出：

```
Enter your 10 digit number: 
1234567890
[1, 2, 3, 4, 5, 6, 7, 8, 9, 0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:33:16.307

您已将读取的代码放入循环中，这将使控制台等待 10 个输入。您可以输入一次，然后打破数字。下面是代码

```
public static void main(String[] args) {

    int david[] = new int[10];
    System.out.println("Enter your 10 digit number: ");
    Scanner scan = new Scanner(System.in);

    int number = scan.nextInt();

    for (int i = david.length - 1; i >= 0; i--) {
        david[i] = number%10;
        number /= 10;
    }

    for (int i = 0; i < david.length; i++) {
        System.out.print(david[i]);
    }

}
} 
```

# python - Scipy 稀疏 dia_matrix 求解器

> ID：12978518
> 
> 赞同：3
> 
> 时间：2012-10-19T16:28:48.257
> 
> 标签：python, numpy, scipy, sparse-matrix

在一个 scipy 程序中，我正在创建一个具有 5 个对角线的 dia_matrix （稀疏矩阵类型）。中心对角线 +1 & -1 对角线和 +4 & -4 对角线（通常是 >> 4，但原理相同），即我有一个典型的 PDE 系统矩阵，形式为：

```
[ a0  b0  0   0   0   d0  0   0   0  ... 0.0 ]
[ c1  a1  b1  0   0   0   d1  0   0  ... 0.0 ]
[ 0   c2  a2  b2  0   0   0   d2  0  ... 0.0 ]
[ 0   0   c3  a3  b3  0   0   0   d3 ... 0.0 ]
[ 0   0   0   c4  a4  b4  0   0   0  ... 0.0 ]
[ e5  0   0   0   c5  a5  b5  0   0  ... 0.0 ]
[ :   :   :   :   :   :   :   :   :   :  :   ]
[ 0   0   0   0   0   0   0   0   0  ... aN  ] 
```

当我使用 scipy.linalg.dsolve.spsolve() 求解矩阵方程时，它可以工作，但我收到以下报告

```
>>> SparseEfficiencyWarning: spsolve requires CSC or CSR matrix format
    warn('spsolve requires CSC or CSR matrix format', SparseEfficiencyWarning) 
```

如果 spsolve() 对解决稀疏矩阵类型 dia_matrix's 无效，那么我应该使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:17:57.300

我想，警告说明了一切。看起来它希望您使用 a[`csr_matrix`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csr_matrix.html#scipy.sparse.csr_matrix)或 a [`csc_matrix`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.csc_matrix.html#scipy.sparse.csc_matrix)。

我假设您正在使用[`scipy.sparse.diags`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.diags.html#scipy.sparse.diags). 您应该能够使用`format = 'csr'`或`format = 'csc'`在构造矩阵时使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T00:01:56.963

这个答案我有点晚了，但我希望你发现添加：

```
from scipy.linalg import solve_banded 
```

允许您使用 DIA 矩阵，而不必求助于 CSR 或 CSC。

# asp.net - 控制器 mvc3 单元测试

> ID：12978522
> 
> 赞同：-2
> 
> 时间：2012-10-19T16:29:12.710
> 
> 标签：asp.net, asp.net-mvc-3, unit-testing

如何编写单元测试

```
public ActionResult Details()
{
    EmployeeDTO employee = this.EmployeeService.GetLoggedInEmployee();
    EmployeeModel model = assembler.ToEmployeeModel(employee);
    model.Title = GetEmployeeNameTitle(employee);
    model.Controller = "LoanProcessor";
    model.SelectedTab = MainNavTabs.LoanProcessor;
    return View(model);
} 
```

我不知道如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:21:48.200

为了使您的代码可测试，您应该将依赖项注入控制器（如果您将依赖项传递给控制器​​或直接实例化它们，这段代码并不清楚）。此外，您应该使您的控制器依赖于抽象（最好是接口）而不是具体的实现。

EmployeeService 应该实现这个接口：

```
public interface IEmployeeService
{
   EmployeeDTO GetLoggedInEmployee();
   // other methods of service
} 
```

然后你根据抽象来制作你的控制器（这里只显示一个依赖作为示例）：

```
public class FooController : Controller
{
    private IEmployeeService _employeeService;

    public FooController(IEmployeeService employeeService)
    {
         _employeeService = employeeService;
    }   
} 
```

现在您可以模拟依赖项并开始为控制器编写测试（使用 NUnit 和 Moq 的示例）：

```
[Test]
public void ShouldProvideEmployeeDetails()
{
    // Arrange
    EmployeeDTO bob = new EmployeDTO("Bob", 42);
    Mock<IEmployeeService> employeeService = new Mock<IEmployeeService>();
    employeeService.Setup(s = s.GetLoggedInEmployee()).Returns(bob);
    FooController controller = new FooController(employeeService.Object);
    // Act
    var result = controller.Details() as ViewResult;
    // Assert
    EmployeeModel model = result.ViewData.Model;
    Assert.That(model.Title, Is.EqualTo("Bob"));
    Assert.That(model.Controller, Is.EqualTo("LoanProcessor"));
} 
```

然后编写代码以通过此测试。[您可以在此处](http://dotnetslackers.com/articles/aspnet/Built-in-Unit-Test-for-ASP-NET-MVC-3-in-Visual-Studio-2010-Part-2.aspx)阅读有关 TDD的更多信息。

# java - Android：IOException：权限被拒绝

> ID：12978524
> 
> 赞同：2
> 
> 时间：2012-10-19T16:29:27.460
> 
> 标签：java, android, permissions, ioexception

我正在 SD 卡上创建/保存文件。这是代码：

```
File sdDir = Environment.getExternalStorageDirectory();
public void btnsave_clicked(View v) throws FileNotFoundException, IOException{
     File f;
      f=new File(sdDir, "deposit.dma");
      if(!f.exists())
      f.createNewFile();
...
} 
```

但是当我单击按钮时，它会抛出“权限被拒绝”。不要要求我添加使用权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

我已经在 Manifest 中添加了这个。

我该怎么办？日志信息：

```
10-19 20:25:14.681: E/AndroidRuntime(29016): FATAL EXCEPTION: main
10-19 20:25:14.681: E/AndroidRuntime(29016): java.lang.IllegalStateException: Could not execute method of the activity
10-19 20:25:14.681: E/AndroidRuntime(29016):    at android.view.View$1.onClick(View.java:2168)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at android.view.View.performClick(View.java:2552)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at android.view.View$PerformClick.run(View.java:9229)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at android.os.Handler.handleCallback(Handler.java:587)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at android.os.Looper.loop(Looper.java:130)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at android.app.ActivityThread.main(ActivityThread.java:3701)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at java.lang.reflect.Method.invokeNative(Native Method)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at java.lang.reflect.Method.invoke(Method.java:507)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at dalvik.system.NativeStart.main(Native Method)
10-19 20:25:14.681: E/AndroidRuntime(29016): Caused by: java.lang.reflect.InvocationTargetException
10-19 20:25:14.681: E/AndroidRuntime(29016):    at java.lang.reflect.Method.invokeNative(Native Method)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at java.lang.reflect.Method.invoke(Method.java:507)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at android.view.View$1.onClick(View.java:2163)
10-19 20:25:14.681: E/AndroidRuntime(29016):    ... 11 more
10-19 20:25:14.681: E/AndroidRuntime(29016): Caused by: java.io.IOException: Permission denied
10-19 20:25:14.681: E/AndroidRuntime(29016):    at java.io.File.createNewFileImpl(Native Method)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at java.io.File.createNewFile(File.java:1257)
10-19 20:25:14.681: E/AndroidRuntime(29016):    at org.brotheroftux.depositmaster.MainActivity.btnsave_clicked(MainActivity.java:43)
10-19 20:25:14.681: E/AndroidRuntime(29016):    ... 14 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T16:34:04.387

来自[Android 环境文档](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)

> 应用程序不应该直接使用这个顶级目录，以免污染用户的根命名空间。应用程序私有的任何文件都应放置在 Context.getExternalFilesDir 返回的目录中，如果卸载应用程序，系统将负责删除该目录。其他共享文件应放置在 getExternalStoragePublicDirectory(String) 返回的目录之一中。

换句话说，这并不是一个真正的好习惯（尽管您可能有一些很好的理由；上下文不是很清楚）。

此外，正如 Cthulhu 和 Ted Hopp 评论的那样，确保权限在清单中的正确位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T16:34:19.813

一些 SD 和 MicroSD 卡上有写保护开关。如果你有一个，请确保它没有写保护。

此外，在您插入手机后，请确保您没有选择“打开 USB 存储”。这将安装您的 SD 卡以供您的 PC 访问并禁用您的设备写入。

您可以通过从顶部向下滑动通知栏来检查这一点。我的说“USB 已连接”没问题，但不应启用“打开 USB 存储”。

# ruby - 在 Mac OS X 预装的 ruby 1.8.7 中安装 gems

> ID：12978525
> 
> 赞同：1
> 
> 时间：2012-10-19T16:29:28.503
> 
> 标签：ruby, rubygems, gem, ruby-1.8, ruby-1.8.7

Mac 似乎都预装了 ruby​​ 1.8.7。`gem install gem-name`这对我的目的来说很好，但是当我使用or安装 gems 时`sudo gem install gem-name`，我必须将 gem 的 lib 目录显式添加到我的 ruby​​ 程序顶部的 $LOAD_PATH 中：

```
$LOAD_PATH.unshift File.join("/", "Users", "me", ".gems", "more_dirs", "lib") 
```

为什么我必须这样做？我安装宝石错了吗？

如果我然后安装 rvm 和最新的 ruby​​ 1.9.3，我可以安装 gems 没有问题`gem install gem-name`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T13:11:20.860

在 1.8.7 中没有内置 ruby​​gems。你需要

```
 require 'rubygems' 
```

在脚本的顶部，以避免手动设置 gem 的路径（从评论中提取）

# mysql - 从数组中的某些 id 中查找最新数据，然后更新它

> ID：12978527
> 
> 赞同：0
> 
> 时间：2012-10-19T16:29:44.050
> 
> 标签：mysql

下面的代码是根据一个有许多论坛的板的最新线程来更新一个页面。基本上，我想在每个论坛中找到最新的线程（基于“主题”表中的时间），然后在另一个论坛中更新它`table('forums')`以便稍后显示。这段代码还有更多内容，但我已经放置了基本元素。我的问题是您如何在表格中搜索 x 但只能从某些 id 中搜索？我也不希望它成为资源密集型企业，尤其是在可能有数千行的情况下。

```
$forums=1,2,3; // the forum ids

$DB->query("SELECT * FROM topics WHERE forum_id IN($forums) order by last_post DESC"); // get all columns from 'topics' in 1,2,3 BUT I only need the latest ('last_post' of each)

$News = $DB->fetch_row();

$DB->query("UPDATE forums SET  last_title='" . $News['title'] ."' WHERE id IN($forums)"); 
```

抱歉，如果这听起来令人困惑。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:33:07.043

试试这个，考虑到`'x'`它在`forum_id`列中，

```
$DB->query("SELECT * FROM topics WHERE forum_id IN($forums) AND forum_id ='x' order by last_post DESC "); 
```

# iphone - NSMutableArray 包含一些未知数据

> ID：12978528
> 
> 赞同：0
> 
> 时间：2012-10-19T16:29:46.493
> 
> 标签：iphone, ios5, xcode4

我有一个 NSMutableArray 并且我正在为它分配对象，就像`[appDelegate.array addObject:Obj];`我打电话时`NSLog(@"appdelegate.array %@ ", [appdelegate.array description]) ;`我在 consol 中一样

```
(
    "<Item: 0x6c8b650; frame = (0 0; 0 0); transform = [0, 0, 0, 0, 0, 0]; alpha = 0; opaque = NO; layer = (null)>",
    "<Item: 0x6b825c0; frame = (0 0; 0 0); transform = [0, 0, 0, 0, 0, 0]; alpha = 0; opaque = NO; layer = (null)>",
    "<Item: 0x6b82ad0; frame = (0 0; 0 0); transform = [0, 0, 0, 0, 0, 0]; alpha = 0; opaque = NO; layer = (null)>"
) 
```

任何人都可以建议我更正格式以添加对象以及为什么数组包含`frame = (0 0; 0 0); transform = [0, 0, 0, 0, 0, 0]; alpha = 0; opaque = NO; layer = (null)`？

```
+ (void) getInitialCurrencyToDisplay:(NSString *)dbPath{

    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

    if (sqlite3_open([dbPath UTF8String], &database) == SQLITE_OK) {

        const char *sql = "select  c_name,C_Id from Currency";
        sqlite3_stmt *selectstmt;
        if(sqlite3_prepare_v2(database, sql, -1, &selectstmt, NULL) == SQLITE_OK) {

            while(sqlite3_step(selectstmt) == SQLITE_ROW) {
                NSInteger primaryKey = sqlite3_column_int(selectstmt, 1);

                Currency *Obj = [[Currency alloc]initWithPrimaryKey:primaryKey];
                Obj.C_Name = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 0)];
                Obj.address=[NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)];

                NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
                NSString *documentsDir = [documentPaths objectAtIndex:0];
                NSLog(@"%@", documentsDir);
                NSString *pngFilePath = [NSString stringWithFormat:@"%@/%@.png",documentsDir, Obj.C_Name];

                Obj.C_Image = [[UIImage alloc] initWithContentsOfFile:pngFilePath];

           Obj.isDirty = NO;
                [appDelegate.array addObject:Obj];

            }
        } 
```

我使用上面的代码从数据库中获取数据提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:01:43.100

检查您班级的父`Currency`班级。父类应该`NSObject`和不`UIView`相似。

* * *

请查看[Objective-C 命名约定](http://cocoadevcentral.com/articles/000082.php)。只有类应该以大写字母开头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:08:44.710

从外观上看，您添加了一些空视图或其他内容。既然您要添加“Obj”，您不应该知道它是什么类型的对象吗？你到底想做什么？

# printing - VB6中的自定义打印对话框

> ID：12978530
> 
> 赞同：2
> 
> 时间：2012-10-19T16:29:51.033
> 
> 标签：printing, vb6, printdialog

当用户单击确定时，如何创建此自定义打印对话框并获取红色选项的值？

下面的打印对话框不是手动创建的，我截取此屏幕截图的应用程序可能正在修改默认打印对话框。

红色圈出的项目与我截取屏幕截图的应用程序中的一些数据相关联。

该对话框的类名是**#32770 (Dialog)**，与记事本、写字板和 vb6 通用对话框打印中的打印对话框相同。所以很明显它正在修改对话框，以某种方式向它添加控件

![自定义打印对话框](../Images/98141395559fa2e96471c8892dabe97c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:02:41.440

您可以查看[自定义常用对话框](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646951%28v=vs.85%29.aspx)，但不要指望这对 VB6 来说很简单。它在 C++ 中已经够笨拙了。

您可以创建自己的对话框表单。

*更新：*

或许考虑使用[HOW TO: Raise and Control Print Dialog Boxes from Visual Basic](http://support.microsoft.com/kb/322710)中的下载？

# jquery - 从 ASP.NET 引用 jQuery 中的下拉菜单

> ID：12978531
> 
> 赞同：0
> 
> 时间：2012-10-19T16:29:51.173
> 
> 标签：jquery, asp.net

这是一个新手问题。我已经使用 jQuery 一天左右了。

我只是想在下拉菜单中捕捉每一个变化。

这是我的下拉菜单和参考：

```
 <script src="Scripts/insertRootCauseElements.js" type="text/javascript"></script>
 <asp:DropDownList ID="DropDownListRootCause" runat="server" > </asp:DropDownList> 
```

这是我的处理程序：

```
 $(document).ready(function () {

    //    var selectedValue = $('#DropDownListRootCause').selectedValue;
    //var selectedIndex = $('#DropDownListRootCause').selectedIndex;
    alert("HERE");
    $('#DropDownListRootCause').change(function () {
    alert("Changed " + $('#DropDownListRootCause').selectedIndex);
})
.change();
//    if ($('#DropDownListRootCause').change) {
//        alert("dd change " + selectedIndex);
//    }

}) 
```

我已经尝试了很多变化，但没有什么对我有用。在调试时，我的 jQuery 似乎不知道“DropDownListRootCause”是什么。

我在我的 dd 控件中设置 AutoPostBack=true 找到我的 jQuery 但是

```
$('#DropDownListRootCause').change(function () {
    alert("Changed " + $('#DropDownListRootCause').selectedIndex);
}) 
```

仍然评估为假。

当调试显示“DropDownListRootCause”未定义时，我将 DropDownListRootCause 添加到“Watch”。我试过双引号和单引号，但没有运气。

它一定很简单，但我看不到。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:46:45.993

如果您在源 HTML 中注意到，ASP.Net 会大量更改 ID。很多时候，它最终会看起来像：`$ctr001_DropDownListRootCause`. 这就是您的选择器不起作用的原因。

有两种方法可以`select`正确选择菜单：

1.  `$('[id$="DropDownListRootCause"]')` 这是在做一个[以 selector 结尾的属性](http://api.jquery.com/attribute-ends-with-selector/)。
2.  `$('#<%=DropDownListRootCause.ClientID %>')` ASP.Net 会将完整的 id 写到您的选择器中。 **注意**：您只能在您的 javascript 位于您的`.aspx`文件中时使用它。如果您尝试在`.js`文件中使用它，它将不起作用，因为 ASP.Net 在呈现页面时不会对这些文件做任何事情。

此外，带有选择器的结尾可以修改为更具体：

`$('select[id$="DropDownListRootCause"]')`

编辑：

选择器的末端有陷阱。如果此`select`元素在`GridView`一行或 a内`Repeater`，则选择器将匹配它们。说你有这个`GridView`：

```
<asp:GridView ID="gv"
    runat="server"
    AutoGenerateColumns="False">
    <Columns>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:DropDownList ID="DropDownListRootCause" runat="server" ></asp:DropDownList>
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

（我已经从中删除了绒毛）它会生成看起来像这样的 HTML：

```
<tr onclick="__doPostBack(&#39;gv&#39;,&#39;Select$0&#39;)">
    <td>
        <select name="gv$ctl03$DropDownListRootCause" id="gv_DropDownListRootCause_0"></select>
    </td>
</tr>
<tr onclick="__doPostBack(&#39;gv&#39;,&#39;Select$1&#39;)">
    <td>
        <select name="gv$ctl04$DropDownListRootCause" id="gv_DropDownListRootCause_1"></select>
    </td>
</tr>
<tr onclick="__doPostBack(&#39;gv&#39;,&#39;Select$2&#39;)">
    <td>
        <select name="gv$ctl05$DropDownListRootCause" id="gv_DropDownListRootCause_2"></select>
    </td>
</tr>
<tr onclick="__doPostBack(&#39;gv&#39;,&#39;Select$3&#39;)">
    <td>
        <select name="gv$ctl06$DropDownListRootCause" id="gv_DropDownListRootCause_3"></select>
    </td>
</tr>
<tr onclick="__doPostBack(&#39;gv&#39;,&#39;Select$4&#39;)">
    <td>
        <select name="gv$ctl07$DropDownListRootCause" id="gv_DropDownListRootCause_4"></select>
    </td>
</tr> 
```

同样，我删除了很多不需要显示我在说什么的标记。使用该呈现的 HTML，使用`$('[id$="DropDownListRootCause"]')`将选择**5 个** `select`元素。如果您尝试将相同的事件代码连接到所有 5 个元素，那很好。**但是，如果你想只用其中一个**来做某事，你需要使选择器更具体。

# java - 将 ZipEntry 写入文件的最易读方法？

> ID：12978533
> 
> 赞同：6
> 
> 时间：2012-10-19T16:29:58.973
> 
> 标签：java

给定[ZipFile](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/ZipFile.html) `zip`、它的[ZipEntry](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/zip/ZipEntry.html) `entry`和目标[File](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html) `unzippedEntryFile`，最可读的写入方式是`entry`什么`unzippedEntryFile`？

[我使用Google Guava](http://code.google.com/p/guava-libraries/)和[Apache.Commons.IO](http://commons.apache.org/io/)提出了以下解决方案：

```
InputSupplier<ByteArrayInputStream> entryInputSupplier = ByteStreams.newInputStreamSupplier(IOUtils.toByteArray(zip.getInputStream(entry)));
Files.copy(entryInputSupplier, unzippedEntryFile); 
```

但是，有些事情告诉我它可以变得更简单。

谢谢，
康拉德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:44:07.380

我不知道你的代码有什么不可读的，除了你有很多嵌套调用。这些可以分解并分配给局部变量，这会使代码更长（但在我看来，更具可读性）。

您似乎确实处理了两次数据-一次将其读入字节数组，然后再次将其复制到文件中。我没有对此进行测试，但它应该可以工作并将数据移动量减少一半：

```
final InputStream zipStream = zip.getInputStream(entry);
InputSupplier<InputStream> supplier = new InputSupplier<InputStream>() {
    InputStream getInput() {
        return zipStream;
    }
};
Files.copy(supplier, unzippedEntryFile); 
```

实际上，您可以创建自己的小类来实现`InputSuppler<InputStream>`. 我很惊讶我在 Guava 库中找不到。（显然，[其他人也对此感到惊讶](https://stackoverflow.com/questions/2363408/is-there-a-concise-way-to-create-an-inputsupplier-for-an-inputstream-in-google-g)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:37:15.057

[这是一个快速链接，其中可能包含Zip 文件操作](http://www.java2s.com/Code/Java/File-Input-Output/ReadingtheContentsofaZIPFile.htm)的所有可能方案。如果是简单的文件操作，这里是 Sun 的教程。确信有很多开源 API。这是[IO 教程](http://docs.oracle.com/javase/tutorial/essential/io/file.html)的链接。干杯

# html - 调整彼此相邻的标题标签的边距

> ID：12978535
> 
> 赞同：0
> 
> 时间：2012-10-19T16:30:03.457
> 
> 标签：html, css

我正在寻找一种方法来调整标题标签（`<h1>`, `<h2>`,`<h3>`等）的边距，**仅**当它们在 DOM 中彼此相邻时。

所以这就是我所拥有的：http: [//jsfiddle.net/LtAHW/1/](http://jsfiddle.net/LtAHW/1/)

基本上，我想要实现的是收紧 the`<h2>`和 the之间的间距，`<h3>`但只有当它们一个接一个出现时。所以，在上面的例子中，只有第一个 Sub Section 和第一个 Sub-Sub Section 之间的空间。

我更喜欢可以使用任何标题标签组合的解决方案，但任何想法或建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:24:39.500

嘿，

您是否尝试过相邻的选择器？

```
h2 + h3 {
  margin-top: 10px;
} 
```

**只有**当它紧跟第一个元素时，它才会选择第二个元素。因此，在这种情况下，<h2> 之后的每个 <h3> 元素都将被定位并赋予 10px 的 margin-top。

如果您想要一个适用于任何标题元素组合的解决方案，您可以创建几个类以在需要时使用，如下所示：

```
.h-first + .h-adjacent {
  margin-top: 10px;
} 
```

不是世界上最好的班级名称，但你明白了。您可以将它们与任何标题组合（或任何元素）一起使用，并以这种方式定位事物。

IE7+ 支持相邻选择器，因此您应该参与大多数项目。

希望这就是你要找的！

编辑：

[这是您更新的示例](http://jsfiddle.net/LtAHW/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:45:49.670

如果我理解正确，那么这应该有效：

```
h2 {font-size: 16px;margin:0px;}
h3 {font-size: 14px;margin:0px;} 
```

当然你可以给出你想要多少像素，这只是一个例子。

很简单，只需选择一个标题标签并命名每个紧随其后的子部分，使用相同的标题标签，您可以为标题提供所有相同的功能和**CSS**。

# html - 他们为什么要将整个网站放在一个表单元素中？

> ID：12978539
> 
> 赞同：2
> 
> 时间：2012-10-19T16:30:29.707
> 
> 标签：html, css, forms

取自这个问题，

[问题](https://stackoverflow.com/questions/12978199/what-kind-of-sorcery-is-this-css-javascript)

而这个网站，

[网站](https://www.windowsazure.com/en-us/)

他们为什么要将网站放在一个`form`元素中。

```
<form id="RunwayMasterForm" action="/en-us/" method="post"> 
```

查看标记结构，该`form`元素是 的直接子`body`元素，所有其他元素都包含在该`form`元素中。

他们为什么要那样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:35:05.167

在 Microsoft 的[ASP.Net](http://en.wikipedia.org/wiki/ASP.NET)（Web 表单）的原始形式中，所有页面生成的标记都包含一个包含所有内容的表单标记。

我的猜测是，要么开发人员最初将页面创建为 ASP.Net WebForms“解决方案”的一部分，然后在没有删除表单标签的情况下从该框架迁移，或者只是将其误解为一种标准，尽管在一段时间内使用此类解决方案。

**更新**查看您引用的 SO 问题中的链接（[Windows Azure](https://www.windowsazure.com/en-us/)），这是当前的 MS 页面——是的，确实，这是 WebForms 的实际应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:35:42.003

许多服务器端语言（尤其是那些具有高级抽象的语言，如 ASP.net）通过标准表单输入处理用户交互。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T16:39:18.733

这些页面可能来自 ASP.NET Web 应用程序。

在 ASP.NET 中，所有服务器控件都必须出现在表单标记内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T16:34:54.963

可能是因为他们使用的是 ASP.NET WebForms，它试图尽可能多地抽象出 Web 开发，使其看起来像桌面应用程序开发——这种方法会导致许多妥协和不符合最佳实践的代码。

# ruby-on-rails - Rails button_to 在指定 post 时使用 get 请求

> ID：12978540
> 
> 赞同：4
> 
> 时间：2012-10-19T16:30:40.953
> 
> 标签：ruby-on-rails, post, routes, button-to

因此，在我的 Rails 应用程序中`button_to`，我的一个页面上有一个。当我单击页面上的该按钮时，它会执行相应的操作并执行我想要的所有操作，但是：它使用 GET 请求。当我查看网络下的 chrome 控制台时，它使用 GET 请求显示它。

当我第一次注意到这一点时，我正在通过无线连接到互联网的笔记本电脑上运行 rails 服务器，并且我正在使用我的 ipad 连接到该服务器（用于测试目的），并且连接速度相当慢，因此当单击按钮后加载页面时，参数在地址栏中显示了几秒钟。我不想要这个。

因此，这促使我进行了一些检查，正如我所说，在 chrome 网络选项卡下它显示了一个获取请求，并且在我指定 : 时在我的路由中`via => :post` ，然后转到它中断的页面。它说没有路线匹配`[GET] /----`。当我删除`:via => :post`它工作正常。`/----`这确认它在单击 时使用 GET 请求转到该页面`button_to`。

我尝试`method = post`在`button_to`rails api中指定它默认为帖子。

谁能提供一些关于它为什么使用“get”而不是“post”的见解？如果可能的话，我非常希望它使用 post。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:50:33.727

我考虑过删除这个问题，但我想我会发布答案。

在带有 button_to 的页面上，我有一个带有一些文本字段的表单。这些包含我不想坐在 url 中但我确实需要传递到下一页的半敏感数据。button_to 提交所述表单并重定向到适当的页面。在我指定的表单标签中`method=get`。我只是注意到了。今年最大的*掌脸时刻。*感谢任何阅读并考虑过我的问题的人。

# c# - 在触发数据后设置控件的 DataContext

> ID：12978541
> 
> 赞同：1
> 
> 时间：2012-10-19T16:31:06.790
> 
> 标签：c#, wpf, xaml, datatrigger, contentcontrol

我有一个包含 ContentControl 的视图，它的 ContentTemplate 使用数据触发器根据视图模型中的布尔属性动态更改。

```
 <ContentControl>

            <!-- MyFirstControl user control by default-->
            <local:MyFirstControl/>

            <ContentControl.Style>
                <Style TargetType="ContentControl">                        
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsSelected}"
                                     Value="True">
                            <Setter Property="ContentTemplate">
                                <Setter.Value>
                                    <DataTemplate>
                                        <!-- Different user control when trigger fired-->
                                        <local:MySecondControl />
                                    </DataTemplate>
                                </Setter.Value>
                            </Setter>
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </ContentControl.Style>

        </ContentControl> 
```

MySecondControl 用户控件（在触发触发器时显示）旨在显示一个文本块，其 Text 属性也绑定到同一视图模型中的一个属性。

我显然错了，但我的想法是触发控件将继承相同的数据上下文。相反，它试图使用 MyFirstControl 用户控件作为其数据上下文（我也收到此错误：System.Windows.Data Error: 40 : BindingExpression path error:)。

我试图明确声明触发控件的数据上下文：

```
<local:MySecondControl DataContext="{Binding}"/> 
```

但是，它仍然使用默认控件 (MyFirstControl) 作为其数据上下文。

我的问题是，如何强制触发控件使用与它所在的视图文件相同的数据上下文？

我对 WPF 场景相当陌生，所以我希望这是有道理的！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:40:39.633

`Content`和之间有区别`ContentTemplate`。

`Content`是控件的实际内容，同时`ContentTemplate`定义了如何绘制`Content`

您将`Content`属性设置为`MyFirstControl`. 您的触发器正在更改属性，因此它`ContentTemplate`正在更改您的 Content() 的绘制方式，`MyFirstControl`因此使用.`MySecondControl``Content``DataContext``MyFirstControl`

您可能希望将默认值设置`ContentTemplate`为`MyFirstControl`而不是实际`Content`属性。

```
<ContentControl>

    <ContentControl.Style>
        <Style TargetType="ContentControl">  
            <!-- Set default ContentTemplate -->
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <local:MyFirstControl />
                    </DataTemplate>
                </Setter.Value>
            </Setter>

            <Style.Triggers>
                <DataTrigger Binding="{Binding IsSelected}"
                             Value="True">
                    <Setter Property="ContentTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <!-- Different user control when trigger fired-->
                                <local:MySecondControl />
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ContentControl.Style>

</ContentControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:41:55.227

希望这会有所帮助：

```
<local:MySecondControl DataContext="{Binding Path=DataContext, 
                  RelativeSource={RelativeSource TemplatedParent}}"/> 
```

# wordpress - Roots Theme 和 WooCommerce - 重复的标题

> ID：12978542
> 
> 赞同：5
> 
> 时间：2012-10-19T16:31:12.033
> 
> 标签：wordpress, wordpress-theming, woocommerce

我安装了最新版本的 Roots 主题（6.1.0 - 2012 年 10 月）和最新版本的 WooCommerce 的 WordPress 3.4.2。

我发现 Roots 的 header 方法与 WooCommerce 有冲突，它也吐出了一个默认的 WordPress 标头。我最终得到了两个标题 - 一个是我想要的（来自 Roots - 固定的 Bootstap 顶部导航栏），另一个是我没有的 - 我的站点名称和旧的“只是另一个 WordPress 网站”副标题。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-27T08:54:55.417

这是因为新版本的 Roots 使用“主题包装”，这与 Woo Commerce 寻找模板覆盖的方式不兼容。

经过一番头疼后，我意识到最简单的解决方案就是执行以下操作 - 在您的主题文件夹中，添加一个新`header.php`文件，完全空白。`templates/head.php`这会覆盖您正常 header.php 文件的 WooCommerce 插入，然后 Roots 可以做它的事情并作为您的标题拉出。

您还需要添加一个空白`footer.php`

可能有一个更优雅的解决方案来移除页眉和页脚的钩子，但现在，这是一个对我有用的快速修复。找到其他方法后，我将在此处发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T05:39:02.437

我刚刚在 Roots v 6.3.0 上尝试过这个并遇到了一些问题。我使用了[https://github.com/DoersGuild/wp-roots-woocommerce](https://github.com/DoersGuild/wp-roots-woocommerce)，然后将以下代码块添加到位于根主题根目录下的模板文件夹中的模板文件 page-header.php 中。

```
<?php if ( is_shop() ) {

    /** If the shop page, do not display page-title **/

} elseif ( is_product() ) {

    /** If a product page, do not display page-title **/

} else {
    /** If is any other page, display page-title **/
     the_title( '<h1 class="page-title">', '</h1>' );
} 
```

我希望这可以帮助别人。

# android - 自定义 Facebook 安卓应用

> ID：12978548
> 
> 赞同：0
> 
> 时间：2012-10-19T16:31:31.657
> 
> 标签：android, facebook

我已经在 android 中通过 Faceboo sdk 完成了登录，并且成功了。现在，我想要的是创建一个自定义登录屏幕，并在提交时将请求直接发送到 facebook 服务器，就像原始的 facebook 应用程序一样。我不想重定向到 facebook 生成的登录屏幕。你可以说这就像开发我们自己的 facebook 应用程序。问题是我没有得到任何 API 来做到这一点。有谁知道怎么做..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T16:46:59.517

Facebook 不支持让用户在您自己的自定义登录屏幕上输入用户名/密码。您需要使用 SSO 或对话框选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T11:32:39.190

我知道的唯一解决方案是在服务器端实现登录功能，请参阅以下链接了解更多详细信息：http: [//developers.facebook.com/docs/concepts/login/login-architecture/，http](http://developers.facebook.com/docs/concepts/login/login-architecture/) : [//developers .facebook.com/docs/howtos/login/login-as-app/](http://developers.facebook.com/docs/howtos/login/login-as-app/)

我也遇到过类似的情况，我会去做。如果您成功了，或者您有其他解决方案，请告诉我。

# asp.net-mvc - 找不到名为 Yahoo.Yui.Compressor.Resources.Microsoft.IdentityModel.dll 的嵌入式资源程序集

> ID：12978551
> 
> 赞同：2
> 
> 时间：2012-10-19T16:31:35.620
> 
> 标签：asp.net-mvc, yui-compressor, antiforgerytoken

我在我的 NopCommerce 网站上使用了一个名为 BundleTransformer 的组件，它扩展了 MVC4 的“捆绑”功能。它使用另一个名为 Yahoo.Yui.Compressing 的组件来转换和压缩 javascript 文件。一切正常。JS 文件按预期压缩和捆绑。

但是，AntiForgeryToken 似乎存在问题。在我的注册页面中，我在表单中添加了这个简单的行：

```
@Html.AntiForgeryToken() 
```

这似乎与 Yahoo.Yui.Compressing 冲突。我收到的错误消息如下：

```
Cannot find embedded resource assembly named Yahoo.Yui.Compressor.Resources.Microsoft.IdentityModel.dll

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.DllNotFoundException: Cannot find embedded resource assembly named Yahoo.Yui.Compressor.Resources.Microsoft.IdentityModel.dll

Source Error: 

Line 43: @using (Html.BeginForm())
Line 44: {
Line 45:     @Html.AntiForgeryToken()
Line 46:     <div class="page registration-page">
Line 47:         <div class="page-body">

Source File: e:\www\....\TheWebsite\Themes\TheTheme\Views\Customer\Register.cshtml    Line: 45 

Stack Trace: 

[DllNotFoundException: Cannot find embedded resource assembly named Yahoo.Yui.Compressor.Resources.Microsoft.IdentityModel.dll]
   Yahoo.Yui.Compressor.AssemblyResolver.<Initialise>b__0(Object sender, ResolveEventArgs args) +248
   System.AppDomain.OnAssemblyResolveEvent(RuntimeAssembly assembly, String assemblyFullName) +224

[FileLoadException: Could not load file or assembly 'Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. Could not find the specified DllImport Dll.]
   System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMarkHandle stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName, ObjectHandleOnStack type) +0
   System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark, IntPtr pPrivHostBinder, Boolean loadTypeFromPartialName) +70
   System.RuntimeType.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark) +39
   System.Type.GetType(String typeName) +50
   System.Web.Helpers.Claims.ClaimsIdentityConverter.GetDefaultConverters() +71
   System.Web.Helpers.Claims.ClaimsIdentityConverter..cctor() +91

[TypeInitializationException: The type initializer for 'System.Web.Helpers.Claims.ClaimsIdentityConverter' threw an exception.]
   System.Web.Helpers.Claims.ClaimsIdentityConverter.get_Default() +14
   System.Web.Helpers.AntiForgery.CreateSingletonAntiForgeryWorker() +124
   System.Web.Helpers.AntiForgery..cctor() +8

[TypeInitializationException: The type initializer for 'System.Web.Helpers.AntiForgery' threw an exception.]
   System.Web.Helpers.AntiForgery.GetHtml() +45
   System.Web.Mvc.HtmlHelper.AntiForgeryToken() +21
   ASP._Page_Themes_CambridgeSatchel_Views_Customer_Register_cshtml.Execute() in e:\www\....\TheWebsite\Themes\TheTheme\Views\Customer\Register.cshtml:45
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +199
   System.Web.Mvc.WebViewPage.ExecutePageHierarchy() +104
   System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +78
   System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +236
   System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +107
   System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) +291
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +13
   System.Web.Mvc.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17() +23
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245
   System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +22
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245
   System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +22
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245
   System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +22
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245
   System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +22
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245
   System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +22
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) +245
   System.Web.Mvc.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() +22
   System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) +176
   System.Web.Mvc.Async.<>c__DisplayClass2a.<BeginInvokeAction>b__20() +75
   System.Web.Mvc.Async.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) +99
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +50
   System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeAction(IAsyncResult asyncResult) +27
   System.Web.Mvc.<>c__DisplayClass1d.<BeginExecuteCore>b__18(IAsyncResult asyncResult) +14
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.Controller.EndExecuteCore(IAsyncResult asyncResult) +39
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.Controller.EndExecute(IAsyncResult asyncResult) +29
   System.Web.Mvc.Controller.System.Web.Mvc.Async.IAsyncController.EndExecute(IAsyncResult asyncResult) +10
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__3(IAsyncResult asyncResult) +25
   System.Web.Mvc.Async.<>c__DisplayClass4.<MakeVoidDelegate>b__3(IAsyncResult ar) +23
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +55
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +31
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +9629708
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

有谁知道解决方案？

它似乎是 Yahoo.Yui.Compressor、BundleTransformer 或 AntiForgeryToken 之间的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:36:09.987

升级到 BundleTransformer 1.6.6 解决了这个问题。

BundleTransformer 1.6.5 和 YUI Compressor .NET 2.1.0.0 存在问题，已在上一个版本中修复（请参阅[http://bundletransformer.codeplex.com/discussions/398013/](http://bundletransformer.codeplex.com/discussions/398013/)上的 Taritsyn 评论）

# sql-server-2005 - sp_addrolemember 在 Python 中不起作用

> ID：12978552
> 
> 赞同：1
> 
> 时间：2012-10-19T16:31:36.617
> 
> 标签：sql-server-2005, stored-procedures, cgi, pyodbc

我正在尝试使用此存储过程添加用户权限：

```
exec sp_addrolemember db_datawriter, MYUSER 
```

数据库是 MS SQL 2005，在 SQL Management Studio 中，存储过程使用我授权的 Windows 登录名可以正常工作。

我使用 pyodbc 创建了一个以 Python 作为脚本语言的简单 HTML CGI 网站。我还创建了我在 pyodbc 连接时使用的本地用户“dataviewer”登录，它具有与我的 windows 登录相同的以下服务器角色权限：

![在此处输入图像描述](../Images/7a20a7407eaee380e51efc22b331bead.png)

在网站上，我回显了 Python 使用的 sql 命令，并将确切的命令复制并粘贴到 SQL SMS 中，存储过程可以正常工作。似乎某处存在安全冲突，但不确定发生了什么，因为我的 Windows 登录具有与 dataviewer 登录相同的服务器角色权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:10:58.397

使用 提交事务[`Connection.commit()`](https://code.google.com/p/pyodbc/wiki/Connection#commit)，或`autocommit=True`在连接字符串中设置。

# inform7 - 如何在 Inform 7 中让“内部”和“南方”都通过一扇门？

> ID：12978553
> 
> 赞同：9
> 
> 时间：2012-10-19T16:31:36.717
> 
> 标签：inform7

假设我们有：

> 风暴之门是一扇封闭的门。它在花园的南边和棚子的北边。

以下命令都可以正常通过花园的门：

*   **南**
*   **s**
*   **穿过风暴门**
*   **经过**
*   **进门**

但是**进去**不起作用：

> `>`**进去**
> 
> 你不能走那条路。

而且我找不到合理的方法让它发挥作用。我能做的最好的就是这个，这似乎很荒谬：

> 花园里面是Tumbolia。棚子外面是Tumbolia。
> 
> 与其从花园去 Tumbolia，不如尝试进入风暴之门。
> 
> 与其从棚屋去 Tumbolia，不如尝试进入风暴之门。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-09T22:15:39.737

我想你也可以这样做：

```
The storm door is a closed door. It is south of the Garden and north of the Shed.

The Shed is inside from the Garden.

Instead of going inside from the Garden, try going south.

Instead of going outside from the Shed, try going north. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T20:21:30.820

我能想到的最好的是：

> 当名词在里面时，不要在花园里无处可去，而是尝试进入风暴门。
> 
> 不要在棚子里退出，而是尝试进入风暴门。

有了这个措辞，在花园**里**的所有工作都进入/进入/进入/进入，而在棚子中的所有工作**都出去/外出/外出/外出/离开/退出。**

这里的不对称是因为**out**和**out**被解释为*exiting*，一个特殊的动作。（它被“convert exit into out rule”转换为*外出*，但前提是“outside”方向实际上有门或房间。）而**in**和**go in**被解释为从头开始*进入*；没有方便的通用*输入*动作供我们使用。

为了简单地**输入**工作，添加：

> 进入花园时提供缺失名词的规则：现在名词是风暴之门。

# assembly - 汇编 (,%eax,4)

> ID：12978560
> 
> 赞同：4
> 
> 时间：2012-10-19T16:32:38.073
> 
> 标签：assembly, att, addressing-mode

如果我的命令行之一说：

```
jmp   *0x804a180(,%eax,4) 
```

这意味着什么？我特别问是因为第一个逗号之前没有任何值，而且我不确定地址之前的 * 到底是什么意思。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T16:58:41.073

该指令跳转到其值位于计算为的地址的位置`%eax * 4 + 0x804a180`。

在`*`AT&T 语法中用于指示间接跳转和调用。它的基本意思是“跳转到 this 指向的位置，而不是 this 的值”。区分以下指令很有用：

```
jmp myAddress  # Jumps to the location myAddress
jmp *myPointer # Jumps to the location contained at myPointer 
```

对于空值，它被视为 0。AT&T 寻址的完整形式是`offset(%base, %index, multiplier)`，但这些值中的任何一个都可以省略。除了乘数（默认为 1）之外，每个的默认值都是 0。大多数情况下，您可以将它们排除在外，但如果您有索引且没有基数，则需要逗号，以便汇编程序可以判断哪个这是。

# asp.net - 如何将字节转换为图像

> ID：12978564
> 
> 赞同：0
> 
> 时间：2012-10-19T16:32:48.053
> 
> 标签：asp.net

我正在使用 Telerik 生成报告并在 UI 中将其显示为 PDF。谁能告诉我，如何使用 jquery 和 asp.net mvc3 在 UI 中将该报告显示为图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:35:32.340

你可以尝试这样的事情： -

```
 public Image byteArrayToImage(byte[] byteArray1)
 {
  MemoryStream m1= new MemoryStream(byteArray1);
  Image i1= Image.FromStream(m1);
  return i1;
 } 
```

查看此链接：- [ByteToImage](http://forums.asp.net/t/1718234.aspx/1)

# javascript - 如何保证正确捕获并重新触发表单提交事件？

> ID：12978566
> 
> 赞同：20
> 
> 时间：2012-10-19T16:32:50.300
> 
> 标签：javascript, jquery, forms, event-handling

这可能不是您通常的“如何捕获表单提交事件？” 问题。

我试图*准确*理解jQuery、vanilla Javascript 和浏览器（IE/FF/Chrome/Safari/Opera）如何处理表单提交事件——以及它们之间的关系。（[请参阅我的另一个问题。](https://stackoverflow.com/questions/12755018/where-are-javascript-event-handlers-stored)）经过数小时的谷歌搜索和实验，我仍然无法得出结论，无论是因为不和谐还是含糊不清。

我正在完成一个与网站表单集成的脚本，以便在 AJAX 请求返回之前无法提交表单。

**理想情况下：**

1.  用户填写表格
2.  表单已提交——但没有调用以前绑定的事件处理程序，除了我的
3.  我的处理程序发出 API 请求（当然是异步的）
4.  用户确认 API 响应的验证结果
5.  表单提交正常自动继续，调用之前被抑制的其他处理程序

**我目前的理解是：（**这些可能是错误的，如果是，请纠正我）

*   [jQuery 将表单提交事件处理程序绑定到提交按钮`click`事件](http://api.jquery.com/submit/)
*   直接在提交元素`click`事件上的事件处理程序（无论是在标记中`onclick=""`还是使用 jQuery 绑定）首先执行
*   接下来执行表单`submit`事件上的事件处理程序（无论是在标记中`onsubmit=""`还是使用 jQuery 绑定）
*   调用`$('[type=submit]').click()`不会调用表单的`submit`事件，因此不会调用其处理程序
*   调用`$('form').submit()`不会调用提交按钮的`click`事件，因此不会调用其处理程序
*   然而不知何故，单击提交按钮的用户最终会调用绑定到表单`submit`事件的处理程序......（但如上所述，调用提交按钮上的单击不会做同样的事情）
*   事实上，用户提交表单的*任何*方式（通过提交按钮或按 Enter），使用 jQuery 绑定到表单`submit`事件的处理程序都会被调用......

**现在，我是：**

1.  将使用 jQuery 绑定的处理程序解除绑定到提交按钮的`click`事件，同时保留对它们的引用
2.  将我自己的处理程序绑定到提交按钮的`click`事件，因此它首先执行
3.  `onclick=""`使用和（在它们各自的元素上）获取标记中绑定的任何处理程序`onsubmit=""`并使用 jQuery 重新绑定它们（因此它们在我的之后执行），然后将属性设置为`null`
4.  重新绑定它们的处理程序（从步骤 1 开始），以便它们最后执行

实际上，这在我自己的测试中非常有效，因此我的事件处理程序首先触发（必不可少）。

**问题和我的问题：**

正如预期的那样（到目前为止），我的处理程序首先触发。问题是我的处理程序是异步的，所以我必须抑制（preventDefault/stopPropagation/etc）表单`submit`或提交`click`调用它的按钮事件......直到 API 请求完成。然后，当 API 请求返回时，一切正常，我需要自动重新调用表单提交。但是由于我上面的观察，我如何确保*所有*的事件处理程序都被触发，就好像它是一个自然的表单提交一样？

获取所有事件处理程序的最干净的方法是什么，把我的放在第一位，然后重新调用表单提交，以便以正确的顺序调用所有内容？

`$('form').submit()`和之间有什么区别（如果有的话）`$('form')[0].submit()`？（对于`$('[type=submit]').click()`and也是一样的`$('[type=submit]')[0].click()`）

**tl;博士**，关于 Javascript/jQuery/浏览器表单提交事件处理的规范、清晰、一刀切的文档是什么？（我不是在寻找书籍推荐。）

* * *

一些解释：我正在尝试补偿购物车结帐页面中的大量 Javascript，有时表单仅在用户单击页面底部的按钮（不是提交按钮）时提交，或者有其他棘手的场景。到目前为止，它相当成功，只是重新调用提交才是真正的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T18:52:57.817

使用jQuery绑定到表单的提交处理程序并阻止默认操作，然后，当您要提交表单时，直接在表单节点上触发它。

```
$("#formid").submit(function(e){
    // prevent submit
    e.preventDefault();

    // validate and do whatever else

    // ...

    // Now when you want to submit the form and bypass the jQuery-bound event, use 
    $("#formid")[0].submit();
    // or this.submit(); if `this` is the form node.

}); 
```

通过调用`submit`表单节点的方法，浏览器在不触发 jQuery 的提交处理程序的情况下进行表单提交。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T19:26:10.507

这两个函数可能会帮助您在 jquery 队列的前面绑定事件处理程序。您仍然需要剥离内联事件处理程序 ( `onclick`, `onsubmit`) 并使用 jQuery 重新绑定它们。

```
// prepends an event handler to the callback queue
$.fn.bindBefore = function(type, fn) {

    type = type.split(/\s+/);

    this.each(function() {
        var len = type.length;
        while( len-- ) {
            $(this).bind(type[len], fn);

            var evt = $.data(this, 'events')[type[len]];
            evt.splice(0, 0, evt.pop());
        }
    });
};

// prepends an event handler to the callback queue
// self-destructs after it's called the first time (see jQuery's .one())
$.fn.oneBefore = function(type, fn) {

    type = type.split(/\s+/);

    this.each(function() {
        var len = type.length;
        while( len-- ) {
            $(this).one(type[len], fn);

            var evt = $.data(this, 'events')[type[len]];
            evt.splice(0, 0, evt.pop());
        }
    });
}; 
```

绑定执行 ajax 调用的提交处理程序：

```
$form.bindBefore('submit', function(event) {
    if (!$form.hasClass('allow-submit')) {
        event.preventDefault();
        event.stopPropagation();
        event.stopImmediatePropagation();

        // perform your ajax call to validate/whatever
        var deferred = $.ajax(...);
        deferred.done(function() {
            $form.addClass('allow-submit');
        });

        return false;
    } else {
        // the submit event will proceed normally
    }
}); 
```

绑定一个单独的处理程序来阻止点击事件，`[type="submit"]`直到你准备好：

```
$form.find('[type="submit"]').bindBefore('click', function(event) {
    if (!$form.hasClass('allow-submit')) {
        // block all handlers in this queue
        event.preventDefault();
        event.stopPropagation();
        event.stopImmediatePropagation();
        return false;
    } else {
        // the click event will proceed normally
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T23:22:14.283

必须有很多方法来解决这个问题——这里有一个。

它使您的 ajax 函数 (A) 与所有其他函数（B、C、D 等）分开，仅将 A 放在标准“提交”队列中，将 B、C、D 等放在自定义事件队列中。这避免了使 B、C、D 等依赖于 A 的异步响应所必需的棘手阴谋。

```
$(function(){
    var formSubmitQueue = 'formSubmitQueue';

    //Here's a worker function that performs the ajax.
    //It's coded like this to reduce bulk in the main supervisor Handler A.
    //Make sure to return the jqXHR object that's returned by $.ajax().
    function myAjaxHandler() {
        return $.ajax({
            //various ajax options here
            success: function(data, textStatus, jqXHR) {
                //do whatever is necessary with the response here
            },
            error: function(jqXHR, textStatus, errorThrown) {
                //do whatever is necessary on ajax error here
            }
        });
    }

    //Now build a queue of other functions to be executed on ajax success.
    //These are just dummy functions involving a confirm(), which allows us to reject the master deferred passed into these handlers as a formal variable.
    $("#myForm").on(formSubmitQueue, function(e, def) {
        if(def.state() !== 'rejected') {
            if (!confirm('Handler B')) {
                def.reject();
            }
        }
    }).on(formSubmitQueue, function(e, def) {
        if(def.state() !== 'rejected') {
            if (!confirm('Handler C')) {
                def.reject();
            }
        }
    }).on(formSubmitQueue, function(e, def) {
        if(def.state() !== 'rejected') {
            if (!confirm('Handler D')) {
                def.reject();
            }
        }
    });

    $("#myForm").on('submit', function(e) {
        var $form = $(this);
        e.preventDefault();
        alert('Handler A');
        myAjaxHandler().done(function() {
            //alert('ajax success');
            var def = $.Deferred().done(function() {
                $form.get(0).submit();
            }).fail(function() {
                alert('A handler in the custom queue suppressed form submission');
            });
            //add extra custom handler to resolve the Deferred.
            $form.off(formSubmitQueue+'.last').on(formSubmitQueue+'.last', function(e, def) {
                def.resolve();
            });
            $form.trigger(formSubmitQueue, def);
        }).fail(function() {
            //alert('ajax failed');
        });
    });
}); 
```

**[DEMO](http://jsfiddle.net/qTV4L/)**（带模拟 ajax）

**作为额外的好处**，可以使自定义队列中的任何处理程序抑制任何/所有后续处理程序，和/或抑制表单提交。只需根据需要选择适当的模式：

## 模式一：

仅当所有前面的处理程序都没有拒绝 def 时才执行其操作。并且可以抑制模式 1 和模式 2 的所有后续处理程序。

```
$("#myForm").on(formSubmitQueue, function(e, def) {
    if(def.state() !== 'rejected') {
        //actions as required here
        if (expression) {
            def.reject();
        }
    }
}); 
```

## 模式二：

仅当所有前面的处理程序都没有拒绝 def 时才执行其操作。但不会抑制以下处理程序。

```
$("#myForm").on(formSubmitQueue, function(e, def) {
    if(def.state() !== 'rejected') {
        //actions as required here
    }
}); 
```

## 模式3：

无条件执行其操作，但仍可以抑制模式 1 和模式 2 的所有后续处理程序。

```
$("#myForm").on(formSubmitQueue, function(e, def) {
    //actions as required here
    if (expression) {
        def.reject();
    }
}); 
```

## 模式4：

无条件执行其操作，并且不抑制后续处理程序。

```
$("#myForm").on(formSubmitQueue, function(e, def) {
    //actions as required here
}); 
```

笔记：

*   延迟可以在这些处理程序中解决，以便立即提交表单而不处理队列的其余部分。但一般来说，延迟将由在触发队列之前动态添加到队列的“.last”处理程序解决（回到处理程序 A）。
*   在 Demo 中，所有的处理程序都是模式 1。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T17:13:13.477

这就是我最终这样做的方式，到目前为止，它在许多测试用例中都非常成功。我学到了*很多*关于 jQuery 的事件，尤其是表单提交事件。我没有时间发布我收集的所有信息的综合百科全书，但现在就足够了：

这适用于[SmartyStreets LiveAddress API jQuery 插件](http://smartystreets.com/kb/liveaddress-api/website-forms)，它在用户离开页面之前验证地址。

最成功的方法是抓住提交按钮的`click`事件。下面的代码片段可以在`jquery.liveaddress.js`文件中找到。它获取尽可能多的事件处理程序的引用（jQuery、onclick --- onclick 最先触发），将它们连根拔起，放下自己的 ( `submitHandler`)，并将其他事件处理程序分层。它已在 TortugaRumCakes.com（结帐）和 MedicalCareAlert.com（主页和结帐）以及许多其他网站上成功运行。

完整代码在[GitHub 上](https://github.com/smartystreets/jquery.liveaddress/blob/master/src/jquery.liveaddress.js)。这个特定的部分用于提交按钮上的“点击”，但类似的代码也用于处理表单提交。jQuery 的`submit()`功能似乎是相当专有的......但是这种处理都确保即使在`.submit()`jQuery 对象上以编程方式调用它时也能调用它。

```
var oldHandlers, eventsRef = $._data(this, 'events');

// If there are previously-bound-event-handlers (from jQuery), get those.
if (eventsRef && eventsRef.click && eventsRef.click.length > 0)
{
    // Get a reference to the old handlers previously bound by jQuery
    oldHandlers = $.extend(true, [], eventsRef.click);
}

// Unbind them...
$(this).unbind('click');

// ... then bind ours first ...
$(this).click({ form: f, invoke: this }, submitHandler);

// ... then bind theirs last:
// First bind their onclick="..." handles...
if (typeof this.onclick === 'function')
{
    var temp = this.onclick;
    this.onclick = null;
    $(this).click(temp);
}

// ... then finish up with their old jQuery handles.
if (oldHandlers)
    for (var j = 0; j < oldHandlers.length; j++)
        $(this).click(oldHandlers[j].data, oldHandlers[j].handler); 
```

# python - 列表理解语法

> ID：12978571
> 
> 赞同：2
> 
> 时间：2012-10-19T16:33:13.137
> 
> 标签：python, list-comprehension

我遇到了一段代码，内容如下：

```
queue = [(Xi, Xk) for Xi in csp.vars for Xk in csp.neighbors[Xi]] 
```

这是否相当于：

```
for Xi in csp.vars:
    for Xk in csp.neighbors[Xi]:
        queue.append((Xi, Xk)) 
```

或者这是否表示嵌套 for 语句以外的其他内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:39:36.913

你有它完全正确。请参阅[列表理解文档](http://docs.python.org/reference/expressions.html#list-displays)：

> 提供列表推导时，它由一个表达式组成，后跟至少一个`for`子句和零个或多个`for`or`if`子句。在这种情况下，新列表的元素是通过将每个`for`or`if`子句视为一个块、从左到右嵌套并在每次到达最里面的块时计算表达式以产生一个列表元素而产生的元素。

所以你对 for 循环嵌套的解释是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T16:45:26.397

正如其他人已经指出的那样，这正是它的意思。

我还发现有时在 list-comprehension/genexp 中使用多个 for 会让人感到困惑，所以我通常会避免使用它们。当我使用它们时，我通常将每个 for 放在不同的行中，例如：

```
queue = [(Xi, Xk) for Xi in csp.vars
                  for Xk in csp.neighbors[Xi]] 
```

甚至缩进：

```
queue = [(Xi, Xk) for Xi in csp.vars
                      for Xk in csp.neighbors[Xi]] 
```

这清楚地表明哪个是内部 for 循环。

此外，list-comprehension 可以为每个 for 循环都有一个 if 表达式，因此完整的语法类似于：

```
queue = [(Xi, Xk) for Xi in csp.vars
                      if condition_one()
                          for Xk in csp.neighbors[Xi]
                              if condition_two()
                                  ... ] 
```

尽管我希望你永远不会写出那样的东西。最后的 if 表达式很好，但是将它与 for 混合起来就太麻烦了，而且根本不可读。

# mysql - MySQL JOIN 覆盖原始表值

> ID：12978574
> 
> 赞同：1
> 
> 时间：2012-10-19T16:33:15.907
> 
> 标签：mysql, join

我正在尝试用两个表实现 JOIN，但偶然发现了一个小问题。我有以下数据结构：

**原始表**
ID - 名称 - 值
1 - John - Clerk
2 - Jack - Driver

**连接表**
ID - 名称
1 - John
2 - Jack
3 - Matt

我需要加入我的表，以便结果如下：

**结果**
ID - 名称 - 值
1 - 约翰 - 文员
2 - 杰克 - 司机
3 - 马特 - 空

所以，我写了下面的语句`SELECT * FROM original_table LEFT JOIN join_table ON original_table.ID GROUP BY join_table.ID`

它返回给我以下结果：

**结果**
ID - 姓名 - 值
1 - John - Clerk
2 - Jack - Clerk
3 - Matt - Clerk

为了在连接过程中忽略值列，我应该修复什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:35:56.867

*   *交换*表名
*   *删除*group by 子句。

试试下面的，

```
SELECT  a.id, a.name, b.value
FROM    join_table a 
        LEFT JOIN original b
            on a.id = b.id 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/7da3d/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:36:37.413

试试这个。

SELECT * FROM join_table LEFT JOIN original_table ON original_table.ID = join_table.id;

# jquery - 隐藏容器时回滚视频

> ID：12978576
> 
> 赞同：0
> 
> 时间：2012-10-19T16:33:16.930
> 
> 标签：jquery, html, html5-video

到目前为止，我可以暂停视频，但不能将其回滚到开头（以便下次从 0 开始）。

```
<video id="video" src="videos/movie.ogg" type='video/ogg' controls='controls'>
  Your brwoser doesn't seems to support video
</video> 
```

jQuery代码：

```
 $('#video')[0].pause();//Pause video 
```

好的，它已暂停，但显然，下次我将从暂停的地方运行视频。我需要回滚视频并将其置于初始状态（在 0 秒）。

有没有办法做到这一点？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:38:12.593

应该

```
$('#video')[0].currentTime = 0; 
```

[W3C 当前时间文档](http://www.w3.org/TR/html5/media-elements.html#dom-media-currenttime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:38:33.257

您可以使用 currentTime 方法。

```
$('#video')[0].currentTime = 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-20T13:33:30.263

最好的方法是使用[load 方法](http://www.w3.org/TR/html5/media-elements.html#dom-media-load)。如果没有海报暂停的普通视频并将 currentTime 设置为 0 可能没问题，至少如果你有海报属性，这将无济于事。

load 方法让浏览器根据视频的当前标记和它的源/轨道子项重新启动它的播放器。如果从那时起属性没有改变，它将创建一个真实且完整的回滚到视频的初始状态。

```
$('video').get(0).load();
//in case you are using a autoplay attribute for the first time, but don't want have it after your rollback, do the following
$('video').eq(0).prop('autoplay', false).get(0).load(); 
```

# ajax - 在 Magento 中创建直接 .php 文件作为 AJAX 目标是否足够相关（而不是标准路由器路径）

> ID：12978579
> 
> 赞同：2
> 
> 时间：2012-10-19T16:33:43.317
> 
> 标签：ajax, performance, magento

我将在这里解释一点背景。我要使用的 AJAX 必须运行得非常快，在后端实现一些逻辑并返回 JSON 作为响应。

我不是 Magento 开发的新手，但我一直在努力使用标准的 Magento 请求流创建一个*便宜的请求。*使用分析器我发现，只有**路由**工作（包括`match`、`preDispatch`和`rewrite`更轻量级的，但许多与路由相关的小函数）几乎需要一秒钟。

毫无疑问，我正在将所有必要的数据加载到引导应用程序中，我的脚本看起来非常像`shell`目录中的脚本。

因此，使用我自己的*.php*文件而不是 Magento 路由器，我已经为每个请求节省了近一秒钟的时间——甚至没有触及逻辑。我的基准测试可能不是很准确，但重点是 - 我肯定会节省一些时间，而时间对我来说非常重要。

所以问题是：**这 1 秒值得忽略 Magento 架构**吗？有没有人实现过类似的东西？考虑到 Magento 模块的方法，将此类文件放入的最佳位置在哪里？

如果有人能指出我正确的方向，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:02:12.997

不要忽视 magento 架构。

做到这一点的方法是有一个带有控制器操作的模块，该模块将由 ajax 调用调用。在配置文件中添加一个您认为正确的前端路由器，并且在进行 ajax 调用时调用该前端地址

例如，前端调用“ajaxcontent”将调用下面的代码：

```
<frontend>
            <routers>
                <ajaxmodule>
                    <use>standard</use>
                    <args>
                        <module>Companyname_Ajaxcontent</module>
                        <frontName>ajaxcontent</frontName>
                    </args>
                </gajaxmodule>
            </routers>
        </frontend> 
```

这是一些基本指导，如果您遇到困难，请随时回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-28T16:52:54.983

我最终遵循了脚本方法。（以防有人想知道）

# ssl - 使用 Safari 通过 SSL 进行 Gzip 压缩？

> ID：12978583
> 
> 赞同：1
> 
> 时间：2012-10-19T16:33:52.453
> 
> 标签：ssl, safari, gzip, content-length

今天早上我在尝试访问我正在使用 iPad（Safari Mobile/Webkit）构建的 Web 应用程序时遇到了一个非常奇怪的问题。在前端，Web 应用程序严重依赖 XHR/Ajax 请求。在后端，如果“Accept-Encoding”包含“gzip”，则服务器配置为 gzip 压缩响应。

在我将服务器切换到 SSL 之前，一切都运行良好。然后我开始在 Safari 中遇到间歇性的“CFURLErrorDomain:303”错误。

快速搜索后，我找到了这个链接：

[http://beyondrelational.com/modules/2/blogs/45/posts/12034/failed-to-load-resource-safari-issue.aspx](http://beyondrelational.com/modules/2/blogs/45/posts/12034/failed-to-load-resource-safari-issue.aspx)

根据链接，Safari 在通过 SSL/HTTPS 发出 XHR（ajax）请求时需要内容长度标头。在我的情况下，服务器将内容直接压缩到输出流，所以我无法知道最终内容的长度是多少。

作为一种解决方法，我在服务器上添加了以下逻辑：

```
 if (request.isEncrypted()) gzip =
        !request.getHeader("User-Agent").toLowerCase().contains("webkit"); 
```

换句话说，如果连接是通过 SSL 加密的，并且浏览器是一些 webkit 衍生产品（例如 Safari、Chrome 等），那么不要压缩输出。这似乎有效，但它确实减慢了速度。

所以我的问题是：

Safari 是否支持通过 SSL 的 gzip 压缩响应，或者我是在吠叫错误的树吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T15:49:07.457

原来我看到的错误是服务器中的错误，与 Safari 无关。压缩大字节数组时，服务器依赖于分块传输编码。单独的“块”被分解成小块（标题、正文、预告片）并以单独的消息发送给客户端。SSL 客户端（safari）期待一个连续的“块”，所以当它看到一个不完整的块时它不知道该怎么做。服务器已修补，问题现已解决。

# css - PNG 版本控制 - 又名 login.png?ver=23514

> ID：12978584
> 
> 赞同：0
> 
> 时间：2012-10-19T16:33:56.670
> 
> 标签：css, image

在我的 wordpress 安装中，在登录屏幕的 CSS 文件中，背景图像是这样指定的：

```
.login h1 a {
    background-image:url('../images/wordpress-logo.png?ver=20120216');
    ....
} 
```

所以png后面有一个查询字符串，但是它是怎么读取的呢？在 images 文件夹中， png 被简单地称为`wordpress-logo.png`. 奇怪的是，如果我更换它，它不会显示出来。

显然我可以删除 CSS 文件中的版本控制，但我很好奇它是如何工作的。那么，png 版本控制如何工作以及如何使用它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:54:13.683

那是一个缓存破坏者。

如果您更改图像，您可以更改缓存中的日期以强制浏览器重新下载它。

Web 服务器忽略静态文件上的查询字符串。

# xml - 平均和低到高功能

> ID：12978586
> 
> 赞同：1
> 
> 时间：2012-10-19T16:34:02.063
> 
> 标签：xml, xslt, xslt-1.0

之前发布过关于计数的问题；我正在寻找一种方法来计算国际平均身高，以及显示从最高到最小高度的高低功能......

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="soccer.xslt"?>
<footballclub>
    <player>
        <based>international</based>
        <height>5.5</height >
        <build>medium</build>
        <age>24</age>
    </player>
    <player>
        <based>local</based>
        <height>5.5</height >
        <build>medium</build>
        <age>24</age>
    </player>
    <player>
        <based>international</based>
        <height>5.5</height >
        <build>medium</build>
        <age>24</age>
    </player>
    <player>
        <based>local</based>
        <height>5.5</height >
        <build>medium</build>
        <age>24</age>
    </player>
    <player>
        <based>local</based>
        <height>7.5</height >
        <build>medium</build>
        <age>34</age>
    </player>
    <player>
        <based>international</based>
        <height>5.9</height >
        <build>large</build>
        <age>26</age>
    </player>
</footballclub> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:27:03.337

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:variable name="vInter" select="/*/*[based='international']"/>

 <xsl:template match="/">
     Average height: <xsl:copy-of select="sum($vInter/height) div count($vInter)"/>

     Height high to low:<xsl:text/>

     <xsl:for-each select="$vInter/height">
       <xsl:sort data-type="number" order="descending"/>
       <xsl:value-of select="concat('&#xA;      ', .)"/>
     </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<footballclub>
    <player>
        <based>international</based>
        <height>5.5</height >
        <build>medium</build>
        <age>24</age>
    </player>
    <player>
        <based>local</based>
        <height>5.5</height >
        <build>medium</build>
        <age>24</age>
    </player>
    <player>
        <based>international</based>
        <height>5.5</height >
        <build>medium</build>
        <age>24</age>
    </player>
    <player>
        <based>local</based>
        <height>5.5</height >
        <build>medium</build>
        <age>24</age>
    </player>
    <player>
        <based>local</based>
        <height>7.5</height >
        <build>medium</build>
        <age>34</age>
    </player>
    <player>
        <based>international</based>
        <height>5.9</height >
        <build>large</build>
        <age>26</age>
    </player>
</footballclub> 
```

**产生想要的正确结果**：

```
 Average height: 5.633333333333333

     Height high to low:
        5.9
        5.5
        5.5 
```

# autorun - autorun.inf 文件在电脑上不起作用

> ID：12978592
> 
> 赞同：0
> 
> 时间：2012-10-19T16:34:15.387
> 
> 标签：autorun, dvd, dvd-burning

我为我的 dvd 创建了一个 autorun.inf 文件，以便它显示一个启动页面（只是一个图像），然后直接转到并打开一个 pdf。以及设置驱动器的图标。但是图标没有改变，并且在插入光盘时启动页面或 pdf 都没有打开或显示。

我在 autorun.info 文件中的代码如下

```
[AutoRun]
OPEN=winopen \start_here.pdf filename splash.jpg
ICON=icon.ico 
```

.inf 文件与 start_here.pdf、splash.jpg 和 icon.ico 位于同一文件夹中。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:46:11.827

Open 语句不打开相关文件，而只打开可执行文件和 html 文件。要通过扩展名启动关联文件，您必须使用“ShellExecute”语句。

shellexecute 命令比 open 命令更灵活，允许您在其本地应用程序中打开 PC 上的几乎任何文件，因此可用于打开命令不起作用的 PDF、Word 文件、网页和电影。

```
[AutoRun]
shellexecute=myfile.pdf 
```

# android - Android将图像传递给另一个xml文件

> ID：12978596
> 
> 赞同：0
> 
> 时间：2012-10-19T16:34:32.737
> 
> 标签：android, xml, image

我的 main.xml 中有一个图像，如下所示

```
 <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:contentDescription="@string/hello"
        android:maxHeight="70dp"
        android:maxWidth="70dp" /> 
```

但我需要将它传递给另一个 xml 文件。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:03:17.703

在您的情况下，您有数据参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:07:38.197

是的，有可能。存在一个在 android 中调用的标签，您可以在其他 android xml 文件中“包含”另一个 android xml 布局。我用你的 main.xml 举了一个例子

在 layout2.xml ....

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:orientation="vertical" >

    <include layout="@layout/main"/>

</LinearLayout> 
```

有关此标签的更多信息，请在下面的链接中查看。

[http://developer.android.com/training/improving-layouts/reusing-layouts.html](http://developer.android.com/training/improving-layouts/reusing-layouts.html)

# c# - stx 特殊字符 (0x02) 破坏 xml 解析

> ID：12978599
> 
> 赞同：1
> 
> 时间：2012-10-19T16:34:50.227
> 
> 标签：c#, xml, xml-parsing, linq-to-xml

我正在尝试使用`XElement.Parse`或使用解析 xml，`XmlDocument.LoadXml`但有时似乎 xml 字符串在其末尾具有 STX (0x02) 特殊字符，这导致解析失败。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:41:35.933

如果你知道它在最后，你可以使用[String.TrimEnd()](http://msdn.microsoft.com/en-us/library/system.string.trimend.aspx)。如果它在内容（文本或属性）中的某处，则将其替换为其转义值“”；或干脆将其删除。

# javascript - 使用 JSON 的 JQXMenu 数据绑定

> ID：12978606
> 
> 赞同：0
> 
> 时间：2012-10-19T16:35:12.373
> 
> 标签：javascript, jquery

我正在开发一个应用程序，我需要从文本文件中获取菜单项。我是 JQX 的新手。但是在显示记录时，它什么也没显示。

# 我的文本文件（LeftMenu.txt）如下：

```
[{
 "text": "Menu1",
                "id": "1",
                    "parentid": "-1"
 }, 

{
 "text": "Menu2",
                "id": "2",
                    "parentid": "-1"
},

{
 "text": "Menu3",
                "id": "3",
                    "parentid": "-1"
 }
] 
```

==================================================== =========================

# 代码在这里

```
// prepare the data for Left Menu
        var urlleftpanel = "../../Public/sampledata/leftmenu.txt";

        var sourceleftmenu =
              {
                  datatype: "json",
                  datafields: [
                               { name: 'id' },
                               { name: 'parentid' },
                               { name: 'text' }
                  ],
                  id: 'id',
                  url: urlleftpanel
              };

        // create data adapter.
        var dataAdapter1 = new $.jqx.dataAdapter(sourceleftmenu);
       // perform Data Binding.
        dataAdapter1.dataBind();        

        var records = dataAdapter1.getRecordsHierarchy('id', 'parentid', 'items', [{   name: 'text', map: 'label' }]);
        var records = da.records;
        $('#jqxWidget').jqxMenu({ source: records , height: 53, theme: theme, width: '95px' }); 
```

==================================================== ==================================== 非常急请大家帮忙

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:34:18.470

尝试在源对象中设置 async: false 。

```
 var sourceleftmenu =
              {
                  datatype: "json",
                  async: false,
                  datafields: [
                               { name: 'id' },
                               { name: 'parentid' },
                               { name: 'text' }
                  ],
                  id: 'id',
                  url: urlleftpanel
              }; 
```

# java - Guice 的宗旨

> ID：12978609
> 
> 赞同：27
> 
> 时间：2012-10-19T16:35:18.210
> 
> 标签：java, dependency-injection, guice

我（想我）理解依赖注入的目的，但我只是不明白为什么我需要像 Guice 这样的东西来做到这一点（好吧，显然我*不需要*Guice，但我的意思是为什么使用它会有好处）。假设我有类似这样的现有（非 Guice）代码：

```
public SomeBarFooerImplementation(Foo foo, Bar bar) {
    this.foo = foo;
    this.bar = bar;
}

public void fooThatBar() {
    foo.fooify(bar);
} 
```

在更高级别的某个地方，也许在我的 main() 中，我有：

```
public static void main(String[] args) {
    Foo foo = new SomeFooImplementation();
    Bar bar = new SomeBarImplementation();
    BarFooer barFooer = new SomeBarFooerImplementation(foo, bar);

    barFooer.fooThatBar();
} 
```

现在我基本上得到了依赖注入的好处，对吧？更容易的可测试性等等？当然，如果您愿意，也可以轻松更改 main() 以从配置中获取实现类名，而不是硬编码。

据我了解，要在 Guice 中做同样的事情，我会做类似的事情：

```
public SomeModule extends AbstractModule {
    @Override
    protected void configure() {
        bind(Foo.class).to(SomeFooImplementation.class);
        bind(Bar.class).to(SomeBarImplementation.class);
        bind(BarFooer.class).to(SomeBarFooerImplementation.class);
    }
}

@Inject
public SomeBarFooerImplementation(Foo foo, Bar, bar) {
    this.foo = foo;
    this.bar = bar;
}

public static void main(String[] args) {
    Injector injector = Guice.createInjector(new SomeModule());
    Foo foo = injector.getInstance(Foo.class);

    barFooer.fooThatBar();
} 
```

是这样吗？在我看来，它只是语法糖，而不是特别有用的语法糖。如果将“new XxxImplementation()”的东西分解成一个单独的模块而不是直接在 main() 中执行它有一些优势，那么无论如何不用 Guice 也很容易做到。

所以我觉得我错过了一些非常基本的东西。您能否向我解释一下 Guice 方式的优势？

提前致谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-19T16:45:46.647

在现实生活和更大的应用程序中，组件的级别不仅仅是 2（如您的示例中所示）。它可能是 10 个或更多。需求和依赖关系也可以随心所欲地改变。

当进行“手动 DI”时，这意味着您必须手动更改所有组件的*所有*路径及其传递依赖项。这可能只是一些工作。

使用“真正的 DI”（即 Guice、Spring、CDI），您只需更改一两个受影响的组件和接线（`Module`Guice 上的）即可。

另外：想象一下，您的一些深层嵌套组件位于应由其他组件调用的工厂中。在 Guice 中，您只需注入 a 即可`Provider<Foo>`。手动执行时，您必须将工厂的依赖项及其实例化拖到整个代码中。

这更令人沮丧。

**编辑**澄清最后一点：图像你有一些深度嵌套的逻辑（10个或更多级别）。在底部，您的逻辑将基于某个值创建一个工厂，例如实际温度：如果“暖”则`Cooler`需要 a，如果“冷”则需要 a `Heater`。两者都有接口`TemperatureAdjustor`。两者都`Cooler`需要`Heater`许多不同的依赖项才能完成工作。

由于因素的实例类型，您无法在其中创建一个`main`并将其传递到需要的地方。因此，您最终会将*两个*工厂的依赖关系交给需要它们的位置。（“很多依赖”加上“很多依赖”是“太多而无法保持理智”）

使用像 Guice 这样的“真正的 DI”，您可以使用它`AssistedInject`来避免依赖关系的混乱，并且只将实际的业务价值（这里：温度）提供给工厂并完成。工厂的接线是在模块中完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-16T18:28:31.993

手工编码的 DI 是真正的 DI。

当您考虑 IOC 容器的复杂性时，您必须更深入地了解为什么要使用它。我长期反对 IOC，能够设计和实现干净、快速、整洁的手工编码、真正的 DI。但我接受了容器的想法，因为它们有助于标准化实现并提供更多基于配置的机制来向依赖关系方程添加新的决策。其他人已经为您编写了它们，因此您不必花时间手动编码。

许多人说在大应用程序中使用容器，在小应用程序中手动编写代码。我说反了。小型应用程序的性能不受限制。追求使用打包容器的实现速度。在您将花费大量时间进行优化的大型应用程序中，请考虑手动编码您的 DI。

编辑：但让我补充一点，IOC Container 或手工编码，始终使用 DI 和代码到界面 - 无论您正在处理的应用程序多么简单。即使在小应用程序中也能编写出色的代码。

# rest - 无法使用 NTLM 通过 IIS 媒体服务的 API 进行身份验证

> ID：12978612
> 
> 赞同：1
> 
> 时间：2012-10-19T16:35:40.723
> 
> 标签：rest, iis

IIS 媒体服务 4.1：

我的 win 7 开发盒上有一个专门的网站设置。我正在通过来自浏览器的调用以及测试 C# winform 应用程序打开 Windows Auth 来测试 REST 服务。使用浏览器我尝试点击`http://iismediatestsite/services/smoothstreaming/publishingpoints.isml`我受到挑战（好）但是当我输入我的域凭据时，我进入了一个循环，它不断提示输入凭据。我的域帐户是此框的管理员。如果我使用我的测试应用程序，我将 UseDefaultCredentials 设置为 true，但会返回 401。

使用 Basic Auth 对两个客户端都适用。

有任何想法吗？

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T21:49:43.423

好的，显然这是由 NTLM 通过环回地址进行身份验证时出现的问题引起的。在这里提供了更好的解释和解决方法：

[http://support.microsoft.com/kb/896861](http://support.microsoft.com/kb/896861)

# java - Java 在 Stream 中丢失了国际字符

> ID：12978614
> 
> 赞同：0
> 
> 时间：2012-10-19T16:35:42.387
> 
> 标签：java, character-encoding

我在阅读 Java 中的国际字符时遇到问题。

使用的默认字符集是 UTF-8，我的 Eclipse 工作区也设置为这个。

我正在阅读来自互联网的视频标题（实际上是Gangam Style ;)），其中包含韩文字符，我这样做如下：

```
BufferedReader stdIn = new BufferedReader(new InputStreamReader(shellCommand.getInputStream()));
String fileName = null, output = null;
while ((output = stdInput.readLine()) != null) {
if (output.indexOf("Destination") > 0) {
    System.out.println(output); 
```

我知道它的标题是：“PSY - GANGNAM STYLE (강남스타일) M/V”，但控制台显示以下内容：“PSY - GANGNAM STYLE () M V”，这会在我的程序中进一步导致错误。

InputStream Reader 似乎没有正确读取这些字符。

有没有人有任何想法？我花了最后一个小时在互联网上搜索，但没有找到任何答案。提前谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:38:17.587

> 使用的默认字符集是 UTF-8

默认在哪里？在 Java 本身中，还是在视频中？如果您明确指定这一点，那就*更*清楚了。您也应该检查视频数据是否正确。

> InputStream Reader 似乎没有正确读取这些字符。

好吧，我们所知道的是文本没有在控制台上正确显示。*要么*没有正确读取，*要么*没有正确显示。您应该打印出每个字符的 Unicode 值，以便检查字符串的确切内容。例如：

```
static void logCharacters(String text) {
    for (int i = 0; i < text.length(); i++) {
        char c = text.charAt(i);
        System.out.println(c + " " + Integer.toHexString(c));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:39:11.690

您需要使用`Charset.defaultCharset().name()`else确保默认字符集

```
InputStreamReader in = new InputStreamReader(shellCommand.getInputStream(), "UTF-8"); 
```

我尝试了示例程序，它在 Eclipse 中正确打印。正如 AlexR 所指出的，这可能是 Windows 控制台的问题。

```
byte[] bytes = "PSY - GANGNAM STYLE (강남스타일) M/V".getBytes();
    InputStreamReader reader = new InputStreamReader(new ByteArrayInputStream(bytes));
    BufferedReader bufferedReader = new BufferedReader(reader);
    String str = bufferedReader.readLine();
    System.out.println(str); 
```

输出：

```
 PSY - GANGNAM STYLE (강남스타일) M/V 
```

# java - UUID 的数据类型作为 JPA 实体类中的主键

> ID：12978615
> 
> 赞同：3
> 
> 时间：2012-10-19T16:35:55.917
> 
> 标签：java, db2, jpa-2.0, uuid, openjpa

我需要使用 JPA 将记录读取和写入 DB2 数据库中的表，其中主键是存储在定义为“char(16) 位数据”的列中的 UUID。

由于数据以位格式存储在数据库中，因此我无法将该列视为 JPA 实体类中的字符串。经过一番谷歌搜索后，我在[JPA 和 UUID 主键](http://www.thebinaryidiot.com/archives/2011/06/25/jpa-and-uuid-primary-keys/)上找到了这个网页，并尝试在我的代码中使用带有 @Id 注释的字节数组数据类型，但是当我执行代码时它失败并显示一条错误消息

> 类型“class model.AbstractEntity”将字段“id”声明为主键，但不支持“[B”类型的键。

查看 JPA 标准，似乎不支持字节数组作为主键。

我正在编写的代码是在 WebSphere 8.5 上运行的 EJB 的一部分，容器提供了 OpenJPA。不幸的是，我无法更改数据库架构。

所以我的问题是在一个 JPA 实体类中，当数据库中包含主键的列被定义为“char(16) 数据位”时，我应该使用哪种 Java 数据类型？

我已经看过这些 SO 问题，但它们对我遇到的问题没有帮助。

*   [如何使用 UUID 作为 Hibernate Entity 的主键？](https://stackoverflow.com/questions/3254707/how-to-use-uuid-as-primary-key-for-hibernate-entity)

*   [使用 UUID 作为数据库主键，Java 类型是 byte[]](https://stackoverflow.com/questions/731840/using-a-uuid-as-a-database-primary-key-java-type-is-a-byte)

**更新** 根据@Rick 的建议，我创建了一个标识类，其中包含将用于主键的字节数组。但是，每当我尝试将记录保存到表中时，DB2 都会返回错误：

`Caused by: org.apache.openjpa.lib.jdbc.ReportingSQLException: The value of input variable, expression or parameter number "1" cannot be used because of its data type.. SQLCODE=-301, SQLSTATE=07006, DRIVER=3.63.123 {prepstmnt -937290353 INSERT INTO FRAMEWORK.SITE3 (ID, SITE_ADDRESS, SITE_NAME, ROW_VERSION) VALUES (?, ?, ?, ?) [params=(InputStream) java.io.ByteArrayInputStream@94c7f78e, (String) test, (String) test, (int) 1]} [code=-301, state=07006]`

身份类的代码如下：

```
import java.io.Serializable;
import java.nio.ByteBuffer;
import java.util.Arrays;
import java.util.UUID;

import javax.persistence.Embeddable;
import javax.persistence.Access;
import javax.persistence.AccessType;
import javax.persistence.Column;

@Embeddable
@Access(AccessType.FIELD)
public class UniqueId implements Serializable {

    private static final long serialVersionUID = 4458438725376203754L;

    @Column(name="ID")
    private byte[] id;

    public UniqueId() {}

    public UniqueId(byte[] id) {
         this.id = id;
     }

    public UniqueId(String id) {
        this(toByteArray(UUID.fromString(id)));
    }

    @Override
    public String toString() {
        return toUUID(id).toString();
    }

    public static UniqueId fromString(String s) {
        return fromUUID(UUID.fromString(s));
    }

    public static UniqueId fromUUID(UUID uuid) {
        return new UniqueId(toByteArray(uuid));
    }

    private static byte[] toByteArray(UUID uuid) {
        ByteBuffer bb = ByteBuffer.wrap(new byte[16]);
        bb.putLong(uuid.getMostSignificantBits());
        bb.putLong(uuid.getLeastSignificantBits());
        return bb.array();
    }

    private static UUID toUUID(byte[] byteArray) {
        long msb = 0;
        long lsb = 0;
        for (int i = 0; i <8; i++)
            msb = (msb << 8) | (byteArray[i] & 0xff);
        for (int i = 8; i < 16; i++)
            lsb = (lsb << 8) | (byteArray[i] & 0xff);
        UUID result = new UUID(msb, lsb);
        return result;
    }

    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + Arrays.hashCode(id);
        return result;
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (getClass() != obj.getClass())
            return false;
        UniqueId other = (UniqueId) obj;
        if (!Arrays.equals(id,  other.id))
            return false;
        return true;
    }

    public static UniqueId generate() {
        return fromUUID(UUID.randomUUID());
    }

} 
```

是否需要向类中添加一些特定的内容以将 ByteArrayInputStream 转换为 DB2 可以理解的内容，或者这是否应该由 OpenJPA 在内部处理？我浏览了 OpenJPA 用户指南，但是关于字节数组的使用的信息很少。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T13:41:25.963

OpenJPA 支持实体作为身份字段，正如参考指南第 4.2 节“作为身份字段的实体”中所讨论的那样。对于具有二进制主键列的旧模式，OpenJPA 还支持使用 byte[] 类型的标识字段。当您使用 byte[] 身份字段时，您必须创建一个身份类。下面介绍了身份类别。

[http://openjpa.apache.org/builds/latest/docs/docbook/manual.html#jpa_overview_pc_identity](http://openjpa.apache.org/builds/latest/docs/docbook/manual.html#jpa_overview_pc_identity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-27T11:00:42.173

这个问题在邮件列表中得到了深入的回答： [邮件列表存档](https://mail-archives.apache.org/mod_mbox/openjpa-users/201210.mbox/%3CCAP=qHCth8Y7dRt3yfNDUsa=g2dDn_dP80RDdOoB=wy_q1_13aA@mail.gmail.com%3E)

您不仅需要创建 ID 类，还需要正确注释 ID 列：

**表类**

```
@IdClass(ByteArrayId.class)
@Entity
@Table(name = "xxx", schema = "yyy")
public class MediaShare {

  @Id
  @Column(name = "ID", columnDefinition = "CHAR(16) FOR BIT DATA NOT NULL")
  private byte[] id;
} 
```

**身份等级：**

```
import java.util.Arrays;

public class ByteArrayId {
  private byte[] id;

  /**
   * Equality must be implemented in terms of identity field equality, and     must use instanceof rather than comparing classes
   * directly (some JPA implementations may subclass the identity class).
   */
  public boolean equals(Object other) {
    if (other == this)
      return true;
    if (!(other instanceof ByteArrayId))
      return false;

    ByteArrayId mi = (ByteArrayId) other;
    byte[] comp = mi.id;
    if (id.length != comp.length)
      return false;
    for (int i = 0; i < comp.length; i++)
      if (comp[i] != id[i])
        return false;
    return true;

  }

  /**
   * Hashcode must also depend on identity values.
   */
  public int hashCode() {
    return Arrays.hashCode( id );
  }

  /**
   * Must create Hex-String-Representation of the byte array
   */
  public String toString() {
    StringBuilder ret = new StringBuilder();
    for (Byte b : id) {
      String hexString = Integer.toHexString( b & 0xFF );

      // pad values < 16 with leading '0' so that we have 2 characters
      if (hexString.length() == 1)
        ret.append( "0" );
      ret.append( hexString );
    }

    return ret.toString();
  }

  public byte[] getId() {
    return id;
  }

  public void setId(byte[] id) {
    this.id = id;
  }
} 
```

要搜索 MediaShare，请使用以下 JPQL：

```
String sqlString = "SELECT m FROM MediaShare m WHERE m.id=:id";
Query q = entityManager.createQuery(sqlString);
q.setParameter ("id", byteArray); 
```

# html - HTML 表格 - 最大宽度不适用于 td 后代

> ID：12978619
> 
> 赞同：25
> 
> 时间：2012-10-19T16:36:10.817
> 
> 标签：html, css, html-table

我有一个带有 的表格`width: 100%`和该表格中的一个元素`width: 40em; max-width: 100%`，但是当浏览器窗口变得太小时时，该元素仍在拉伸表格。

如果容器太小，我希望这个元素是固定宽度但不大于容器。如果固定宽度没有足够的空间，`max-width: 100%`应将其缩小以适应可用空间。这适用于桌子之外。

请注意，`max-width`它不在桌子上。它实际上是在一个`<input>`元素上，尽管我链接的代码包含一个单独的表，在`<span>`元素上存在相同的问题。它还包括`<input>`表外的一个行为正确的字段。

[链接到 jsfiddle](http://jsfiddle.net/vekSW/12/)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-19T17:04:35.033

您应该使用[`table-layout: fixed`](https://developer.mozilla.org/en-US/docs/Web/CSS/table-layout)表元素来使 的后代的`max-width`属性`<td>`起作用。

来自[MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/table-layout)：

> `table-layout`CSS 属性定义了用于布局表格单元格、行和列的算法。
> 
> **固定**值：
> 表格和列的宽度由表格和列元素的宽度或第一行单元格的宽度设置。后续行中的单元格不影响列宽。

```
table {
    table-layout: fixed;
} 
```

**[工作演示](http://jsfiddle.net/hashem/vekSW/22/)**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T16:38:45.390

如果你把它放在元素上，元素会被拉伸到`max-width: 100%`.

如果您想要固定宽度，请使用`width: 40px`（而不是 %，在液体布局中使用百分比）

# bash - 将变量传递给lookbehind组内的grep

> ID：12978621
> 
> 赞同：0
> 
> 时间：2012-10-19T16:36:34.387
> 
> 标签：bash, variables, grep

我正在尝试使用 bash 脚本在某些文本中查找整数：

```
#!/bin/bash
var=string2    
cat file.txt | grep -oP '(?<=string1)(\d.*)(<=$var)' 
```

但脚本什么也没输出。
如果我输入“string2”而不是“$var”，我会得到预期的结果。
我想我应该以某种方式转义变量，但我不知道如何。
我尝试了双引号、大括号、转义双引号，但没有任何效果。
我还搜索了stackoverflow man grep 和google。
那么这样做的正确方法是什么？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:40:29.660

变量只在双引号内展开，而不是单引号。所以应该是：

```
cat file.txt | grep -oP "(?<=string1)(\d.*)(<=$var)" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:40:19.817

错误的引用：

```
$ echo '(?<=string1)(\d.*)(<=$var)'  
(?<=string1)(\d.*)(<=$var) 
```

尽管：

```
$ echo "(?<=string1)(\d.*)(<=$var)"
(?<=string1)(\d.*)(<=string2) 
```

`echo`显示`grep`会看到什么。

# javascript - 将文本输入定位在 textarea 的光标位置之上（javascript、Textarea 自动完成）

> ID：12978626
> 
> 赞同：5
> 
> 时间：2012-10-19T16:37:00.970
> 
> 标签：javascript, jquery, html, css, jquery-ui

我想做一个自动完成，如果一个人输入一个“@”，他们会得到一个自动完成的名字列表。

我正在使用 jQueryUI 自动完成，我的解决方案（[http://jsfiddle.net/aUfrz/22/](http://jsfiddle.net/aUfrz/22/)）的唯一问题是需要将可自动完成的文本输入放置在 textarea 光标位置而不是就目前而言。

这是我在 JSFiddle 中的 JS：

```
$(document.body).on('keypress', 'textarea', function(e) {
   var names = [
        "johnny",
        "susie",
        "bobby",
        "seth"
    ],
    $this=$(this),
    char = String.fromCharCode(e.which);

    if(char == '@') {
       console.log('@ sign pressed');
       var input=$('<input style="position:relative; top:0px; left:0px;background:none;border:1px solid red" id="atSign" >');
       $this.parent().append(input);
       input.focus();
       input.autocomplete({
        source: names,
        select: function (event, ui) {
            console.log('value selected'+ui.item.value);
            //$this.val('@'+ui.item.value);
            $this.insertAtCaret(ui.item.value);
            $this.focus();
            input.remove();
        } //select
    });  //autocomplete
  } //if 
}); // keypress 
```

HTML：

```
<textarea></textarea>​ 
```

请注意，我**没有**在此处显示用于在插入符号位置插入所选自动完成建议的 jQuery 插件：`insertAtCaret()`我在 this [other SO question](https://stackoverflow.com/questions/946534/insert-text-into-textarea-with-jquery/946556#946556)中找到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:10:09.937

获得插入符号位置的一种方法是将每个字符的像素宽度乘以插入符号的字符偏移量。[这](http://jsfiddle.net/aUfrz/13/)是一个有点粗略的例子。与 textarea 的 x 偏移量计算如下：

```
e.target.value.length*13 
```

编辑：[这](http://jsfiddle.net/K8jGh/2/)是一个大大改进的版本。一个重要的发现是，在单型字体中，宽高比为 8/13。

**在下面的屏幕截图中，您可以看到当我按下 @ 时，输入出现在插入符号位置。**

![显示它在我的浏览器中的外观的屏幕截图。](../Images/b749c23528734263e14a3ad9b8ad268a.png)

**这是 Chrome 中的屏幕截图，显示了相同的行为**

![在此处输入图像描述](../Images/32de44ad1190615daa9197845077c89b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:24:45.327

This [other SO answer](https://stackoverflow.com/questions/2518442/autocomplete-functionality-on-a-textarea)提到了这个非常漂亮的jQuery插件，[建议](http://imankulov.github.com/asuggest/)是我要使用的。感谢@asad 的帮助。

这是使用的最终产品的 JSFiddle ：http `asuggest()`: [//jsfiddle.net/trpeters1/xjyTW/2/](http://jsfiddle.net/trpeters1/xjyTW/2/)

这是来自这个 JSFiddle 的 JS：

```
$.fn.asuggest.defaults.delimiters = "@";
$.fn.asuggest.defaults.minChunkSize = "0";  

$(document.body).on('keypress', 'textarea', function(e) {
  var names = [
    "johnny",
    "susie",
    "bobby",
    "seth"
  ],
  $this=$(this),
  char = String.fromCharCode(e.which);

   if(char == '@') {
     $this.asuggest(names);
     var v='';
     if($this.click()) { console.log('clicked textarea');           
       v=$this.val(); console.log('texarea value'+v);           
       for(var i=0; i<names.length;i++ ){ 
         if(v.indexOf('@'+names[i]) != -1){
           names.splice(i,1);  console.log('names spliced away: @'+names[i]);              
         } // if indexOf
       } //for
     } //if click
   } //if @
}); //keypress​ 
```

HTML：

```
<textarea></textarea>​ 
```

# android - 特定组件类型的主题属性

> ID：12978628
> 
> 赞同：3
> 
> 时间：2012-10-19T16:37:13.907
> 
> 标签：android, android-theme, android-styles

我可以在主题中定义仅适用于特定组件（例如 EditText）的属性，就像在 CSS 中可以使用的那样，例如，`.table`？我知道我可以定义一种样式并将其设置在所有组件上，但我正在寻找一种更有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T10:15:18.230

在您的主题中，添加`<item name="android:editTextStyle">@style/<your substyle name>`：

```
<style name="My.Mega.Theme" >
    <item name="android:editTextStyle">@style/My.Mega.Theme.EditText</item>
</style>

<style name="My.Mega.Theme.EditText" parent="My.Mega.Theme">
    <item name="android:textSize">14sp</item>
</style> 
```

替换`editTextStyle`为`buttonStyle`for 按钮等。

您甚至可以为同一类的控件使用 css 类的类似物，例如：

（样式文件）：

```
<attr name="note" format="reference" />

<style name="My.Mega.Theme" >
    <item name="note">@style/My.Mega.Theme.SmallText</item>
</style> 
```

（布局文件）：

```
<TextView style="?note"/> 
```

# android - Android 内存不足加载位图

> ID：12978633
> 
> 赞同：0
> 
> 时间：2012-10-19T16:37:41.173
> 
> 标签：android, memory-management, bitmap, out-of-memory

我有一个 android 游戏，可以加载 6 张图像，总共 300kb。我已经阅读并实现了这篇文章[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)虽然它有点帮助，但它并没有 100% 解决我的问题。

当游戏第一次加载时，它运行得很好。没有错误或任何东西。然后当您关闭游戏或按下主屏幕按钮并稍后返回游戏时，它会出现内存不足错误，但只是有时。在我的简历中，我只是开始备份游戏线程。我没有加载任何图像或类似的东西。当然，我不能拥有加载 6 个或更多图像的唯一游戏吗？

我的简历

```
 @Override
    protected void onResume(){
        try{
            game.setIsPaused(false);
            game.startSounds();
            game.threadStart();
        super.onResume();
    } 
```

在自己的线程中加载我的图像

```
bg = bt.resizeBitmapPercent(bt.createBitmap(R.drawable.bg, context, options), imgPercentWidth, imgPercentHeight);
overlay = bt.resizeBitmapPercent(bt.createBitmap(R.drawable.overlay, context, options), imgPercentWidth, imgPercentHeight);
reel = bt.resizeBitmapPercent(bt.createBitmap(R.drawable.reels, context, options), imgPercentWidth, imgPercentHeight);
payOutBG = bt.resizeBitmapPercent(bt.createBitmap(R.drawable.payout, context, options), imgPercentWidth, imgPercentHeight);
achievement = bt.resizeBitmapPercent(bt.createBitmap(R.drawable.achievement, context, options), imgPercentWidth, imgPercentHeight); 
```

调整位图大小和创建位图的方法

```
public Bitmap createBitmap(int id, Context context, BitmapFactory.Options options){
    return BitmapFactory.decodeResource(context.getResources(), id, options);
}
public Bitmap resizeBitmapPercent(Bitmap bitmap, float w, float h){       
    float newWidth = bitmap.getWidth()*w;
    float newHeight = bitmap.getHeight()*h;
    float scaleWidth = (float) newWidth / bitmap.getWidth();
    float scaleHeight = (float) newHeight / bitmap.getHeight();
    Matrix matrix = new Matrix();
    matrix.postScale(scaleWidth, scaleHeight);
    return Bitmap.createBitmap(bitmap, 0, 0,bitmap.getWidth(), bitmap.getHeight(), matrix, true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T12:19:33.150

我能够通过将我所有的非透明图像从 png 转换为 jpeg 并在 Photoshop 中将它们的质量降低到 60 来解决这个问题。它将我的总图像大小从 300kb 降低到 100ish kb。我担心质量下降看起来很糟糕，但你无法判断智能手机或平板电脑的质量下降。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:06:24.570

关闭游戏后总是尝试清空位图

我通常使用此代码

```
bmp.recycle();
bmp = null;
System.runFinalization();
Runtime.getRuntime().gc();
System.gc(); 
```

它将回收位图并使用垃圾收集器

# java - 在 servlet 中写入文件

> ID：12978635
> 
> 赞同：1
> 
> 时间：2012-10-19T16:37:48.493
> 
> 标签：java, file, servlets

我正在使用**servlet**并具有以下代码：

```
public void doPost(blah blah){

   response.setContentType("text/html");

    String datasent = request.getParameter("dataSent");
    System.out.println(datasent);

    try{

        FileWriter writer = new FileWriter("C:/xyz.txt");
        writer.write("hello");

        System.out.println("I wrote");
    }catch(Exception ex){
        ex.printStackTrace();
    }

    response.getWriter().write("I am from server");

} 
```

但是每次它都会抛出一个错误，说访问被拒绝..即使该文件没有锁定并且没有名称为**C:/xyz.txt的文件**

我应该怎么办？;(

```
 java.io.FileNotFoundException: C:\xyz.txt (Access is denied)
at java.io.FileOutputStream.open(Native Method)
at java.io.FileOutputStream.<init>(FileOutputStream.java:212)
at java.io.FileOutputStream.<init>(FileOutputStream.java:104)
at java.io.FileWriter.<init>(FileWriter.java:63)
at test.TestServlet.doPost(TestServlet.java:49)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:306)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:108)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:558)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:379)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:243)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:259)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:237)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:281)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T19:56:25.610

尝试关闭 FileWriter：

```
writer.close(); 
```

我想象会发生什么： Tomcat 中的一个线程创建文件并终止但不关闭其句柄，因此从文件系统视图文件锁定未释放。另一个线程尝试打开它以进行写入，但操作系统仍然无法授予对该文件的写入访问权限，因为它已经有一个待处理。

这称为资源泄漏：Garbage Collector 不会释放程序员手动分配的资源（此处为 IO 句柄）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:54:55.140

尝试查看此[站点](http://csis.pace.edu/~wolf/servlets/Java%20Servlets%20and%20Access%20Databases.html)似乎就是您要查找的内容（向下滚动某些方式）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-19T16:49:27.577

在此过程中，请勿打开文件。尝试如下：

```
FileWriter writer = new FileWriter("C:/xyz.txt", true);
BufferedWriter out = new BufferedWriter(writer);
out.write("your text");
out.close(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T17:13:34.140

该异常表明是FileNotFound Exception。请先尝试制作新文件。尝试使用以下代码。

```
File file = File file("c:/xyz.txt");
if(!file.exists()){  // this will return boolean {true} if file exists.
   file.createNewFile(); // create new empty file.
}
FileWriter writer = new FileWriter("C:/xyz.txt", true);
BufferedWriter out = new BufferedWriter(writer);
out.write("your text");
out.close(); 
```

好的，没问题..尝试使用不同的阅读器和作者来弄清楚它。

```
 String currentExecutablePath = System.getProperty("user.dir");
    String rootPath = currentExecutablePath + "xyz.txt";
    File file = new File(rootPath);
    ServletOutputStream op = res.getOutputStream(); 
    if(file.exists()){
        int length = 0;
        res.setContentType("application/octet-stream");
        res.setContentLength((int) file.length());

        byte[] bbuf = new byte[1000];
        DataInputStream in = new DataInputStream(new FileInputStream(file));            
        while ((in != null) && ((length = in.read(bbuf)) != -1)) {
            op.write(bbuf, 0, length);
        }
    } 
```

# vb.net - .net 中的 Google Contacts API 联系人的 URL 列表检索

> ID：12978646
> 
> 赞同：1
> 
> 时间：2012-10-19T16:38:16.837
> 
> 标签：vb.net, api, contacts

我正在尝试借助 Google API 将我的本地联系人（用 vb.net 编写的 CRM）与 Google 联系人同步。一切都很顺利，直到我尝试检索/更新从 Google 服务器下载的每个联系人的 URL 列表。你是怎样做的？我的意思是电子邮件、IM 地址、电话号码等很容易，因为每个联系人对象都有一个电子邮件、邮政地址等集合，但似乎没有 URL。这就是我解析邮政地址列表的方式：

```
If contact.PostalAddresses.Count > 0 Then
 For Each address As StructuredPostalAddress In contact.PostalAddresses
  ' Do something with the address
 Next
End If 
```

对于 URL，它应该是这样的：

```
If contact.?URLs?.Count > 0 Then
 For Each url As ?URL? In contact.?URLs?
  ' Do something with the URL
 Next
End If 
```

但是没有 URLs 或 Links 集合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T09:06:15.863

解决了

```
If contact.ContactEntry.Websites.Count > 0 Then
  For Each URL As ContactsLink In contact.ContactEntry.Websites                                  
    RichTextBox1.AppendText(URL.Href + vbCrLf)
  Next 
End If 
```

# c - 在 C 中验证整数

> ID：12978647
> 
> 赞同：0
> 
> 时间：2012-10-19T16:38:27.913
> 
> 标签：c, validation, input, integer, validating

我正在用 C 语言创建一个程序，我必须接受一个整数才能继续。我阅读了一些问题以使用以下代码，但我的程序在输入任何字符后不久就会进入无限循环。请帮助我

```
 int tnum,scancheck;
printf("Enter the number of teams(Maximum 4)\n");
scancheck = scanf("%d",&tnum);
while(scancheck != 1)
{
    printf("ERROR: Please enter numbers only\n\n");
    printf("Enter the number of teams(Maximum 4)\n");
    scancheck = scanf("%d",&tnum);  
} 
```

我使用了 Kirilenko 的方法，但我的程序在输入特殊字符时进入无限循环，例如**l=**

**编辑** 问题已解决。谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:41:52.670

您必须`stdin`在对`scanf`. 否则，`scanf`输入无效的行为是将字符放回流中。然后，它进入一个无限循环，每次迭代都读取相同的错误字符。

```
#include <stdio.h>

void clean_stdin(void) {
    int c;
    while ((c = getchar()) != '\n' && c != EOF)
        ;
}

/* ... */

int ret;
int n;

do {
   ret = scanf("%d", &n);
   clean_stdin();
} while (ret != 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:53:46.460

如果您希望从用户那里获得输入，请获取该行并对其进行分析。

```
char   line[1024];
char * err = NULL;
int    num;

while( err == NULL || *err )
{
   fgets( stdin, line );
   num = strtol( line, &err, 10 );
} 
```

直到满足要求为止。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-19T16:42:48.973

如果输入无效，Scanf 会将字符放回标准输入流。因为，我们没有清除标准输入流，它正在走向一个无限循环。

试着在你的 scanf 语句下面写这个

```
fflush(stdin); 
```

# paypal - 如何使用 PayPal API 获得总订单数量折扣

> ID：12978648
> 
> 赞同：0
> 
> 时间：2012-10-19T16:38:27.493
> 
> 标签：paypal

我已经暂时更新了我的合唱协会的网页，需要改变我们对 PayPal API 的使用。这是我需要完成的。

我们想以 1-2 美元的价格出售 20 美元（成人）和 10 美元（学生）的音乐会门票。对于 3 名及以上成人和/或学生的任意组合。价格应该是 16.50 美元（成人）和 8.25 美元（学生）。

```
Examples (just to be absolutely clear):
1 adult ticket : $20
2 adult tickets: $40
3 adult tickets: $49.50
4 adult tickets: $66
etc ...

1 student ticket: $10
2 student tickets: $20
3 student tickets $24.75
4 student tickets: $33
etc ...

1 adult + 1 student: $30
1 adult + 2 student: $33
2 adult + 1 student: $41.25
etc ... 
```

以前，我们的网站有用于各种组合的“添加到购物车”按钮。这让客户感到困惑并且也不可靠，因为 PayPal 提供了可以更改数量的自己的表格。

我想用一个“立即购买”按钮替换我们当前所有的“添加到购物车”按钮，该按钮会指向一个页面，客户可以在该页面中指定任意数量的成人票和学生票（只要两者都不为零）并继续付款与上述定价。

我查看了[PayPal API](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables#id08A6HF080O3%20%22PayPal%20API)并看到了与折扣相关的几个字段（在表 3 中），但完全不清楚是否有一种组合可以满足我的需求。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:53:06.360

在 PayPal 支持和大量谷歌搜索示例代码的帮助下，我想出了以下内容，这些内容似乎在 beta 版中运行良好。keydown 逻辑来自 StackOverflow 上的另一个问题。

该代码为成人和学生数量创建了一对文本框。当客户输入数量以在输入上方显示小计字符串时，就会执行折扣规则。当客户点击“立即购买”时，总额将作为单个项目发送以创建付款表单。S&H 费用也被添加为总额的百分比，以支付交易成本。

为冗长的编码风格道歉。JavaScript 不是我常用的语言。欢迎提出改进建议。

希望有人觉得它有用！

警告——此代码很容易被具有计算机技能的骗子作弊。不要将其用于没有某种形式的购买后审计的有价值的交易。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script><script type="text/javascript">// <![CDATA[
  $(document).ready(function() {
    // Enforce numeric values only. 
    $('#nadult, #nstudent').keydown(function(event) {
        // Allow: backspace, delete, tab, escape, and enter
        if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 || 
             // Allow: Ctrl+A
            (event.keyCode == 65 && event.ctrlKey === true) || 
             // Allow: home, end, left, right
            (event.keyCode >= 35 && event.keyCode <= 39)) {
                 // let it happen, don't do anything
                 return;
        }
        else {
            // Ensure that it is a number and stop the keypress
            if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
                event.preventDefault(); 
            }   
        }
    });
    $('#nadult, #nstudent').keyup(function(event) {
        compute_form_inputs(false);
        });
  });

  function compute_form_inputs(is_submit) {
      // called when buyer click "Buy now" after filling in quantities of adult and student tickets
      var base_adult_price = 20.00;
      var disc_adult_price = 16.50;
      var student_discount = 0.50;
      var handling_fee = 0.05 // Five percent to cover cost of transaction;
      var nadult = $('#nadult').val();
      var nstudent = $('#nstudent').val();
      var iadult = parseInt(nadult);
      if (isNaN(iadult)) { iadult = 0 }
      var istudent = parseInt(nstudent);
      if (isNaN(istudent)) { istudent = 0 }
      var itickets = istudent + iadult;

      if (is_submit && itickets <= 0) { 
          // call off the purchase 
          alert("Please specify at least one adult or student ticket to purchase!");
          return false; 
          } 
      else if (itickets < 3) {
          var adult_price = base_adult_price;
      } 
      else {
          var adult_price = disc_adult_price;
      }

      var student_price = adult_price * student_discount;

      // Build string components that show how many of each were purchased.
      // These go into the PayPal item_name field.
      if (iadult > 0) {
          var adult_info = nadult + " Adult @ $" + adult_price.toFixed(2) + " ea.";
      }
      else {
          var adult_info = "";
      }

      if (istudent > 0) {
          var student_info = nstudent + " Student @ $" + student_price.toFixed(2) +"ea.";
      }
      else {
          var student_info = "";
      }

      if (iadult>0 && istudent>0) {
          var separator = " + ";
      }
      else {
          var separator = "";
      }

      var item_name_string = "ACS Flex tickets: " + adult_info + separator + student_info;
      var amount = iadult * adult_price + istudent * student_price;
      //alert(amount);
      var handling = (amount * handling_fee).toFixed(2);

      //alert(handling);
      $('input[name="item_name"]').val(item_name_string);
      $('input[name="amount"]').val(amount);
      $('input[name="handling"]').val(handling);
      $('input[name="custom"]').val(item_name_string);
      // alert("about to change label")
      $('#subtotal').text(adult_info + separator + student_info + " = $" + amount.toFixed(2))
      return true;
  };  

// ]]></script>

<form name="_xclick" action="https://www.paypal.com/cgi-bin/webscr" onsubmit=compute_form_inputs(true) method="post">
<div style="color: green; margin-bottom: 10px;">
<strong>Subtotal:&nbsp;<label id="subtotal" value=""></strong><super>*</super><br />
</div>
<div>
<input type="text" id="nadult" value="0" size="3"> <strong> Adult </strong>&nbsp;
<input type="text" id="nstudent" value="0" size="3"> <strong> Student </strong>&nbsp;
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="someone@mychoralsociety.org">
<input type="hidden" name="currency_code" value="USD">
<input type="hidden" name="item_name" value="">
<input type="hidden" name="handling" value="">
<input type="hidden" name="amount" value="">
<input type="hidden" name="custom" value="">
<input type="image" src="http://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
</div>
</form>  
<br /> 
<small> * 5% transaction fee will be  added to online and credit card purchase to cover bank fees. </small> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-10T09:16:52.930

将这些行添加到您的按钮代码中。贴现率为 17.5%。添加第一行为零的行，以便折扣不适用于第一个项目。

```
<input type="hidden" name="discount_rate" value="0">
<input type="hidden" name="discount_rate2" value="17.5"> 
```

或者，如果您的按钮是 PayPal 托管的，请将这些添加到第 3 部分的高级变量中

```
discount_rate=0
discount_rate2=17.5 
```

来源：[https ://developer.paypal.com/docs/classic/paypal-payments-standard/integration-guide/Appx_websitestandard_htmlvariables/](https://developer.paypal.com/docs/classic/paypal-payments-standard/integration-guide/Appx_websitestandard_htmlvariables/)

# c# - 如何设置正确的 MEF 配置？

> ID：12978650
> 
> 赞同：3
> 
> 时间：2012-10-19T16:38:30.757
> 
> 标签：c#, .net-4.0, mef

我有一个类库，其中一个名为的类`IConfiguration`是一个只有一个属性的接口。

我有一个名为 which implements 的类库`TexasConfiguration`和`IConfiguration`另一个名为`FloridaConfiguration`which implements的类库`IConfiguration`。

我已经装饰`TexasConfiguration`和`FloridaConfiguration``[Export(typeof(IConfiguration)]`

我有另一个名为密封类的类`ConfigurationSystem`，它包含一个私有构造函数，定义为`private ConfigurationSystem() {}`

我有几个问题。一般来说，我应该把 MEF 的东西放在哪里来设置它。目前，我已将静态方法`ConfigurationSystem`与以下声明一起放入：

```
[Import(typeof(IConfiguration)]
IConfiguration configuration {get; set;} 
```

在上面，它告诉我`configuration`未使用。在这种情况下这是否正常。

我还在 中创建了一个静态方法`ConfigurationSystem`，但是如果我将其设为静态，则无法传递`this`给它，我必须传递`typeof(ConfigurationSystem)`给它：

```
public static void SetupConfiguration()
    {
        using (DirectoryCatalog catalog = new DirectoryCatalog(@"c:\\developement\source\configuration"))
        {
            CompositionContainer container = new CompositionContainer(catalog);
            container.ComposeParts(typeof(ConfigurationSystem));
        }
    } 
```

我希望能够做类似的事情：

```
ConfigurationSystem.SetupConfiguration(); 
```

但除非该方法被声明为静态，否则我不能这样做。简而言之，当应用程序启动时，它会调用一个静态方法`Initialize`，我想在其中调用 my`SetupConfiguration`并将适当的配置对象分配给`IConfiguration`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:46:25.000

MEF 旨在处理对象实例，而不是静态类。调用`container.ComposeParts(typeof(ConfigurationSystem))`绝对不会做任何事情，因为您在这里基本上要求的是 MEF 为`Type`您传递给它的对象组成部分，这显然不是您想要的。

有一个简单的解决方案，但不会导致您过多地更改应用程序的架构。你可以让你的`ConfigurationSystem`班级成为单身人士，然后你就可以打电话`container.ComposeParts(this)`并得到你的零件。

# ios - 链接使用 facebook SDK for iOS (3.1) 的 iOS 6 项目时出现问题

> ID：12978651
> 
> 赞同：0
> 
> 时间：2012-10-19T16:38:32.143
> 
> 标签：ios, xcode, facebook

尝试构建 iOS 6 项目时出现以下错误：

```
file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/.../FacebookSDK.framework/FacebookSDK for architecture armv7s 
```

这个问题应该通过将 facebook sdk 更新到 3.1 版来解决。但我更新了它，我仍然有同样的问题......

有什么想法？更新facebook sdk有什么技巧吗？

非常感谢，

卡洛斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:50:08.370

Facebook SDK 有一个静态库，它不是为新的 iPhone 5 armv7s 架构编译的。这就是您会收到“切片”错误消息的原因。您需要获取 FB SDK 的新版本，或者确保您已清理您的版本，因为 Xcode 可能会看到残留文件。

# sql - 替代构建具有混乱范围的查询？

> ID：12978654
> 
> 赞同：1
> 
> 时间：2012-10-19T16:38:39.170
> 
> 标签：sql, ruby-on-rails, ruby

我正在通过 Ruby 创建查询以生成报告。

```
query = Account.includes(:assets, :location, :category) 
```

报告请求有多个可选参数（例如可以发送类别，或者根本无法初始化）。

目前，我在通过应用范围建立和分配查询后考虑这些

```
if category.present?
  cat = Category.find_by_name(category)
  query = query.in_category(cat) if cat.present?
end 
```

范围是

```
scope :in_category, lambda { |category|
    where("#{table_name}.category_id = :category_id", :category_id => category.id)
  } 
```

我多次这样做，它是有效的。我更喜欢为可读性而构建一个 Where 条件（而不是必须阅读 10 个范围来理解实际查询）。

有没有一种干净的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T09:21:03.510

这个怎么样

```
 Account.includes(:assets, :location, :category).joins(:category).where(Category.arel_table[:name].eq(category)) 
```

# android - java.lang.IllegalStateException：适配器的内容已更改，但 ListView.... 尽管调用了 notifydatasetchanged()

> ID：12978660
> 
> 赞同：2
> 
> 时间：2012-10-19T16:38:54.793
> 
> 标签：android, android-asynctask, listactivity

通过后台线程（异步任务）更新 listactivty 内容的最佳实践是什么？

1)一旦我操作适配器的内容，我就调用**notifyDataSetChanged()来更新适配器，但当用户滚动或单击列表时，我的应用程序仍然强制关闭。**任何防止这种情况的指示都会非常有帮助。

Logcat: java.lang.IllegalStateException: 适配器的内容发生了变化但是ListView没有收到通知。

2) 我应该在哪里更新 listactivity 的内容？在 doInBackground() 或 onProgressUpdate() 内？

3）当用户单击列表项时，我经常遇到崩溃。那么在后台操作期间禁用listactivty上的点击事件会解决问题吗？如果是这样，我不确定如何将项目单击侦听器动态删除或设置为 listactivity。也请指教。

4) 我不认为在后台异步任务执行期间阻止所有 ui 交互是解决问题的唯一方法。我知道有一种简单的方法可以做到这一点，但需要一些帮助。

提前致谢。

这是我的 onCreate...

```
protected void onCreate(Bundle savedInstanceState) {    
super.onCreate(savedInstanceState);
setContentView(R.layout.fa);

tvStatus=(TextView) findViewById(R.id.tvStatus);

 adapter = new SimpleAdapter(
        this,
        mostPopularList,
        R.layout.list_item,
        new String[] {"title","author","views","date"},
        new int[] {R.id.textView1,R.id.textView2,R.id.textView4,R.id.textView3});
        //populateList();

        setListAdapter(adapter);
  } 
```

我的异步任务...

```
 private class LongOperation extends AsyncTask<String, Void, String> {

          @Override
          protected String doInBackground(String... params) {
        // code for adding new listactivty items 
          }      

          @Override
          protected void onPostExecute(String networkStatus) {
            adapter.notifyDataSetChanged();
          }

          @Override
          protected void onPreExecute() {

          }

          @Override
          protected void onProgressUpdate(Void... values) {

           }
          } 
```

日志猫：

我也很少出现非法状态例外......无法重现它。如果我再次遇到它，将发布 logcat。

```
FATAL EXCEPTION: main
java.lang.IndexOutOfBoundsException: Invalid index 7, size is 4
    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
    at java.util.ArrayList.get(ArrayList.java:311)
    at android.widget.SimpleAdapter.bindView(SimpleAdapter.java:147)
    at android.widget.SimpleAdapter.createViewFromResource(SimpleAdapter.java:126)
    at android.widget.SimpleAdapter.getView(SimpleAdapter.java:114)
    at android.widget.AbsListView.obtainView(AbsListView.java:1294)
    at android.widget.ListView.makeAndAddView(ListView.java:1727)
    at android.widget.ListView.fillDown(ListView.java:652)
    at android.widget.ListView.fillGap(ListView.java:623)
    at android.widget.AbsListView.trackMotionScroll(AbsListView.java:2944)
    at android.widget.AbsListView.onTouchEvent(AbsListView.java:2065)
    at android.widget.ListView.onTouchEvent(ListView.java:3315)
    at android.view.View.dispatchTouchEvent(View.java:3766)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:897)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1671)
    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
    at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1655)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1671)
    at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
    at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
    at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1655)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1785)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4627)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:50:17.677

> 2) 我应该在哪里更新 listactivity 的内容？在 doInBackground() 或 onProgressUpdate() 内？

在 onPostExecute()内部`onProgressUpdate()`或内部，因为您更改内容`doInBackground()`并调用异步任务调用您的

```
 @Override
          protected void onPostExecute(String networkStatus) {
            adapter.notifyDataSetChanged();
          } 
```

> 3）当用户单击列表项时，我经常遇到崩溃。那么在后台操作期间禁用listactivty上的点击事件会解决问题吗？如果是这样，我不确定如何将项目单击侦听器动态删除或设置为 listactivity。也请指教。

这不是一个解决方案。您只需要在 UI 线程上更新数据集。（不加载内容，只是从旧内容更新到新内容）。例如

```
private class LongOperation extends AsyncTask<String, Void, String> {

      @Override
      protected List<String> doInBackground(String... params) {
           List<String> items = loadUpdatedDataset(params);
           return items;
      }      

      @Override
      protected void onPostExecute(List<String> loadedItems) {
        updateAdapterDataset(loadedItems);
        adapter.notifyDataSetChanged();
      }

      @Override
      protected void onPreExecute() {

      }

      @Override
      protected void onProgressUpdate(Void... values) {

       }
      } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T16:57:46.423

请在这堂课上看看。有一个使用 AsyncTask 和 Listview 的很好的例子 [http://android.okhelp.cz/java_android_code.php?o=%5Candroid-15%5CGestureBuilder%5Csrc%5Ccom%5Candroid%5Cgesture%5Cbuilder%5CGestureBuilderActivity.java#Problem](http://android.okhelp.cz/java_android_code.php?o=%5Candroid-15%5CGestureBuilder%5Csrc%5Ccom%5Candroid%5Cgesture%5Cbuilder%5CGestureBuilderActivity.java#Problem)。

我相信您的代码中的问题是因为适配器正在更新您的 ListView 并且此时用户单击 ListView 导致您的应用程序崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:08:01.837

此异常具有误导性 - 原因有很多。此崩溃的一个原因是 ArrayList 对象无法完全更改。所以，当我删除一个项目时，我必须这样做：

```
mList.clear();
mList.addAll(newDataList); 
```

这为我解决了崩溃问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-12T03:03:33.127

这个问题困扰了我很久。

当我使用`MotionEvent`单击`listView`之前的调用`Adapter.notifyDataSetChanged()`时，它确实会导致*Illegalstate Exception*。

`ListView.setEnable`所以我认为在 update 之前调用 (false) 很有用`listView`。

# android - 编译前无法为android项目运行ant任务

> ID：12978663
> 
> 赞同：0
> 
> 时间：2012-10-19T16:39:06.367
> 
> 标签：android, ant

我有我正在尝试用 ant 构建的 andorid 项目。android项目需要一个在其他地方生成的jar，我必须通过ant任务将它复制到libs文件夹中。我知道我可以手动复制它并且它可以工作，但在我的情况下，jar 将通过 ant 复制。

生成 build.xml 我做了

```
 android update project --path . 
```

我将此代码添加到 build.xml

```
<target name="-pre-compile">
 <copy todir="${jar.libs.dir}">
   <fileset 
     dir="../path-to-another-project/target" 
     includes="*.jar" />
 </copy>
</target> 
```

上面的代码是之前添加的

```
<import file="custom_rules.xml" optional="true" /> 
```

问题：当我进行 ant 调试时，它会生成错误。它抱怨罐子里的类。当我第二次进行 ant 调试时，它构建良好，没有错误。当我在第一次运行 ant 后观察 libs 文件夹时，jar 文件被复制到 libs 中，但似乎是在编译代码后被复制的。

如果我的代码有问题，我该如何解决？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T12:30:39.170

找到了原因，

作为 Dx 的一部分包含的类路径在 -pre-compile 目标运行之前完成。所以这个时候做这些已经太晚了，

我覆盖 -setup 目标以包含 jar，然后它工作正常

# macos - 为什么Ryzom的编译在Mac上找不到'X11/Xatom.h'？

> ID：12978672
> 
> 赞同：0
> 
> 时间：2012-10-19T16:39:35.430
> 
> 标签：macos, ryzom

合并后尝试编译 Ryzom，它又在对我大喊大叫。有什么建议么？

```
[ 10%] Building CXX object nel/src/misc/CMakeFiles/nelmisc.dir/config_file/cf_lexical.cpp.o
[ 10%] Building CXX object nel/src/misc/CMakeFiles/nelmisc.dir/config_file/config_file.cpp.o
Linking CXX static library ../../../lib/libnelmisc.a
[ 10%] Built target nelmisc
Scanning dependencies of target nel3d_pch_dephelp
[ 10%] Building CXX object nel/src/3d/CMakeFiles/nel3d_pch_dephelp.dir/std3d.cpp.o
Linking CXX static library ../../../lib/libnel3d_pch_dephelp.a
[ 10%] Built target nel3d_pch_dephelp
Scanning dependencies of target pch_Generate_nel3d
[ 10%] Generating std3d.h.gch
[ 10%] Built target pch_Generate_nel3d
Scanning dependencies of target nel_drv_opengl_pch_dephelp
[ 10%] Building CXX object nel/src/3d/driver/opengl/CMakeFiles/nel_drv_opengl_pch_dephelp.dir/stdopengl.cpp.o
Linking CXX static library ../../../../../lib/libnel_drv_opengl_pch_dephelp.a
[ 10%] Built target nel_drv_opengl_pch_dephelp
Scanning dependencies of target pch_Generate_nel_drv_opengl
[ 10%] Generating stdopengl.h.gch
[ 10%] Built target pch_Generate_nel_drv_opengl
Scanning dependencies of target nel_drv_opengl
[ 10%] Building CXX object nel/src/3d/driver/opengl/CMakeFiles/nel_drv_opengl.dir/driver_opengl.cpp.o
/Users/jennifer/Downloads/ryzom/ryzom/code/nel/src/3d/driver/opengl/driver_opengl.cpp:2515:3: warning: #warning "OpenGL Driver: Missing Mac Implementation for ATI version retrieval" 
[ 10%] Building CXX object nel/src/3d/driver/opengl/CMakeFiles/nel_drv_opengl.dir/driver_opengl_extension.cpp.o
[ 10%] Building CXX object nel/src/3d/driver/opengl/CMakeFiles/nel_drv_opengl.dir/driver_opengl_inputs.cpp.o
/Users/jennifer/Downloads/ryzom/ryzom/code/nel/src/3d/driver/opengl/driver_opengl_inputs.cpp:21:24: error: X11/Xatom.h: No such file or directory
/Users/jennifer/Downloads/ryzom/ryzom/code/nel/src/3d/driver/opengl/driver_opengl_inputs.cpp:802:3: warning: #warning "OpenGL Driver: Missing Mac Implementation for getDoubleClickDelay" 
make[2]: *** [nel/src/3d/driver/opengl/CMakeFiles/nel_drv_opengl.dir/driver_opengl_inputs.cpp.o] Error 1 
```

为什么Ryzom的编译在Mac上找不到'X11/Xatom.h'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:49:19.627

非常感谢您的报告！

你是对的，这是一个错误，我想知道为什么以前没有人得到它......也许是因为他们在编译 Ryzom 之前安装了 X Windows 头文件。

我对 Hg 进行了修复，所以你只需要再次拉/更新就可以了 :)

当记者准确地发布我们需要知道的修复它时，这很容易修复编译错误:)

# c - 位域是对象吗？

> ID：12978676
> 
> 赞同：4
> 
> 时间：2012-10-19T16:39:52.763
> 
> 标签：c, object, bit-fields

根据 C11，一个对象是：

> **#C11 § 3：术语、定义和符号**
> *对象*：执行环境中的数据存储区域，其内容可以表示值。

一个位域可以表示一个值，所以它应该是一个对象。但是，有人告诉我事实并非如此。

正确答案是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T16:46:55.947

6.2.6.1p2 说“*除了位域，对象由一个或多个字节的连续序列组成 [...]* ”，因此位域是对象似乎很清楚。同样，6.2.6.1p4 指的是“*非位域对象*”。

3.5p1定义位为数据存储单位；位字段是位区域，因此必须是数据存储区域。该标准区分对象和内存位置（内存位置是“*标量类型的对象，或所有具有非零宽度的相邻位字段的最大序列*”；3.14p1），因此对象不需要具有不同的内存位置。

# jquery - 如何动画/显示隐藏的div？

> ID：12978679
> 
> 赞同：0
> 
> 时间：2012-10-19T16:40:06.990
> 
> 标签：jquery, css, jquery-animate

所以我试图在单击链接时显示一个带有切换转换的 div。

我的代码：

```
 $("nav ul li#about a").click(function (e) {
    $("div#about").slideToggle(200);
    e.preventDefault();
}); 
```

它很好用，但我想要这种效果： [http:](http://ricostacruz.com/jquery.transit/) //ricostacruz.com/jquery.transit/ 向下滚动并找到“其他属性的转换”。你看到规模效应了吗（第一个演示框）？这就是我想要的，而不是 slideToggle。所以我想要这种与 TOGGLE 类似的效果...单击链接时转换 IN 和 OUT。

我希望你们能帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:52:10.977

jQuery slideToggle 方法实际上只是[animate](http://api.jquery.com/animate/)的精美包装。由于这个传输插件模仿了`animate`语法，我们可以很容易地构建一个切换。

```
$("nav ul li#about a").click(function (e) {
    e.preventDefault();
    var about = $("div#about");
    if (about.css('opacity') == 0) {
        about.transition({ opacity: 1.0, scale: 1.0 });
    } else {
        about.transition({ opacity: 0.0, scale: 1.6 });
    }
}); 
```

我还没有测试过这段代码，但它应该检查 about div 在点击时是否不可见，并根据它选择要执行的动画。

# c# - HTTPS 远程发布？

> ID：12978688
> 
> 赞同：1
> 
> 时间：2012-10-19T16:40:44.590
> 
> 标签：c#, ssl, httpcontext

我使用此处的代码进行了页面设置：[http](http://www.jigar.net/articles/viewhtmlcontent78.aspx) ://www.jigar.net/articles/viewhtmlcontent78.aspx ，以便从我的 HTTPS 页面发布到远程 HTTPS 页面。据我所知，这篇文章是明文发送的。

我是不是误会了？如果没有，我怎样才能确保帖子的安全？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T16:42:40.313

> 我是不是误会了？

如果远程 URL 以 HTTPS 开头，则不会以明文形式发送任何内容。整个通信将通过加密的安全通道完成。

在上述文章中，他们**没有**使用 HTTPS：

```
myremotepost.Url = "http://www.jigar.net/demo/HttpRequestDemoServer.aspx"; 
```

如果您想要安全通信，请确保使用它。

另一方面，此方法生成一个`<form>`包含隐藏输入字段中所有值的值。您不应将任何敏感信息（例如密码）放在隐藏字段中，因为有权访问托管页面的任何人都可以浏览源并查看这些值。但就这些值到远程站点的传输而言，如果您使用 HTTPS，它们将被加密而不是明文发送。

# php - PHP 语法错误

> ID：12978690
> 
> 赞同：0
> 
> 时间：2012-10-19T16:40:50.660
> 
> 标签：php, postgresql, syntax

我正在尝试更新 php 中的表，但我不断收到语法错误。

这是我所拥有的：

```
if (isset($_POST['inspect'])) {
    // get gis_id from pole table to update fm_poles
    $sql = "select gis_id from poles where pole_number = '".$_GET['polenumber']."'";
    $rs = pg_query($sql) or die('Query failed: ' . pg_last_error());
    $gisid = $row['gis_id'];
    pg_free_result($rs);

    // update fm_poles
    $sql = "update fm_poles set inspect ='".$_POST['inspect']."',co_date = '".$_POST['co_date']."',size = '".$_POST['size']."',date = ".$_POST['date'].",brand ='".$_POST['brand']."',backspan = ".$_POST['backspan']." WHERE gis_id = ".$gisid."";
    print $sql."<BR>\n";
    $rs = pg_query($sql) or die('Query failed: ' . pg_last_error());
    pg_free_result($rs);
} 
```

这是它给我的错误：

> 更新 fm_poles set inspect ='20120208',co_date = '20030710',size = '30-5',date = 0,brand ='test',backspan = 300 WHERE gis_id =

错误信息：

> 查询失败：错误：字符 129 处输入结尾处的语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:52:09.610

A. 检查您的输入（POST 中的数据），可能其中包含一些非法字符？

例如：$_POST['backspan'] = "我们去游行吧。";

..会导致 SQL 封装出现问题。

[编辑] nvm，我看到你添加了 sql 查询的输出，没有封装问题......

B. 请参阅下面的代码，将来它可能有助于节省连接时的打字时间。:-)

```
$sql = "update fm_poles set inspect = '{$_POST['inspect']}',
co_date = '{$_POST['co_date']}',size = '{$_POST['size']}',
date = '{$_POST['date']}',brand = '{$_POST['brand']}',
backspan = '{$_POST['backspan']}' WHERE gis_id = '{$gisid}';";
print $sql."<BR>\n"; 
```

C. 尝试输入上面的代码或在 WHERE gis_is = $gsid 周围加上单引号，如下所示：WHERE gis_id = '$gsid'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:45:52.170

$gisid 似乎没有值，或者它可能有一些奇怪的字符，所以你的 where 子句说“WHERE gis_id =”。

那么如何使用 mysql_real_escape_string 转义它：

```
WHERE gis_id = ".mysql_real_escape_string($gisid); 
```

并使用 var_dump($gisid) 确保设置正确。

# android - 使用 ArrayAdapter 查看列表中的项目的问题

> ID：12978691
> 
> 赞同：0
> 
> 时间：2012-10-19T16:40:54.513
> 
> 标签：android, android-listview, android-arrayadapter

我的自定义数组适配器中的引用有问题。我有一个活动，我在其中定义了几个字段（包括我现在关心的 2 个按钮和一个进度条）的布局中使用我的数组适配器。当你按下一个按钮时，它应该显示进度条，按下另一个按钮应该隐藏它。

当我按下相应的按钮时，进度条与其行一起显示，但是当我在列表上滚动时变得可见以重用列表。

你能告诉我除了显示我按下的行的进度之外如何做任何事情吗？（不显示任何另一行）

这是我的 xml 适配器（customadapterRutinalineadia）

这是我的 xml：

```
 <Button
            android:id="@+id/btnLineasRutinaDiaEjercicioNoCompletado"
            android:layout_width="33sp"
            android:layout_height="27sp"
            android:layout_alignParentBottom="true"
            android:layout_alignParentRight="true"
            android:text="NoK"
            android:textSize="6sp" />

        <Button
            android:id="@+id/btnLineasRutinaDiaOk"
            android:layout_width="33sp"
            android:layout_height="27sp"
            android:layout_alignParentBottom="true"
            android:layout_toLeftOf="@+id/btnLineasRutinaDiaEjercicioNoCompletado"
            android:text="Ok"
            android:textSize="8sp" />

        <ProgressBar
            android:id="@+id/pgrLineasRutinaDiaProgreso"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_above="@+id/textView13"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_alignRight="@+id/chkLineasRutinaDiaHecho"
            android:visibility="invisible" /> 
```

按钮`btnLineasRutinaDiaOk`用于显示进度条。按钮`btnLineasRutinaDiaEjercicioNoCompletado`用于隐藏进度条。

这是我的`ArrayAdapter`

```
public class CustomAdapterRutinaDiaLineas extends ArrayAdapter<Rutina>{

 ArrayList<Rutina> lstRutinaDia;
 ArrayList<Rutina> arrayDatos;
 Rutina objRutina;
 static Context context;

    public CustomAdapterRutinaDiaLineas(Context contexto, ArrayList<Rutina> arrayDatos) {
       super(contexto, R.layout.ll_lineas_rutina_dia, arrayDatos);
       this.arrayDatos = arrayDatos;
       this.context = contexto;
    }

      @Override
    public View getView( int position,  View convertView, ViewGroup parent){
        View vistaFila =null;

        final int ifila= position;
        //final View auxVistaFila=null;

        if (convertView == null) {
             //  LayoutInflater inflator = context.getLayoutInflater();

            LayoutInflater vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            vistaFila = vi.inflate(R.layout.ll_lineas_rutina_dia, null);

            final View auxVistaFila = vistaFila;
          final ElementosLinea objelementos = new ElementosLinea();
           AsignarElementos(vistaFila,objelementos);

           objelementos.btnOk.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View re) {
                    // TODO Auto-generated method stub

            Rutina objru = (Rutina) objelementos.pgrProgresoCierre.getTag();

                AccesoBd objAcceso = new AccesoBd();
                objru._pgrProgress.setVisibility(View.VISIBLE);

                //new CerrarEjercicio().execute("http://"+objAcceso.IpPc+"/CerrarEjercicioUnico.php");                  
                }
            });

         objelementos.btncerrar.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                Rutina objru = (Rutina) objelementos.pgrProgresoCierre.getTag();

                    AccesoBd objAcceso = new AccesoBd();
                    objru._pgrProgress.setVisibility(View.INVISIBLE);

            }
        });

         vistaFila.setTag(objelementos);
         objelementos.pgrProgresoCierre.setTag(arrayDatos.get(position));

       }else{
           vistaFila=convertView;
           ((ElementosLinea) vistaFila.getTag()).pgrProgresoCierre.setTag(arrayDatos.get(position));
       }

      Rutina datossss = arrayDatos.get(position);
      ElementosLinea objetos = (ElementosLinea)vistaFila.getTag();

           if (datossss.getProgreso()==null){

               datossss.setProgreso(objetos.pgrProgresoCierre);

            }

    return vistaFila;

    }

    private void AsignarElementos(View v,ElementosLinea Objetos){

         //cabeceras

          Objetos.btnOk=(Button)v.findViewById(R.id.btnLineasRutinaDiaOk);

          Objetos.btncerrar=(Button)v.findViewById(R.id.btnLineasRutinaDiaEjercicioNoCompletado);

          Objetos.pgrProgresoCierre=(ProgressBar)v.findViewById(R.id.pgrLineasRutinaDiaProgreso);

    } 
```

我只想显示我单击的项目的进度条，而不显示其他项目。是原因是重新利用列表但找不到解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:24:33.210

我想我理解你的问题。您有一个自定义适配器。适配器中的每个项目都包含 2 个按钮和一个进度条。这些按钮控制它们各自的进度条的可见性。

我的西班牙语很弱，但我想我理解了你的代码。没有测试过这个，但它应该让你接近。您在我删除的进度条标签中存储了一些东西。无法弄清楚您在那里做什么，但您可以轻松地将其重新添加。看起来您正在尝试遵循 ViewHolder 范例，但有点搞砸了。希望下面的代码能让你走上正轨。

此外，将 ArrayAdapters 上下文存储在静态全局字段中也不是一个好主意。ArrayAdapter 已经有方法 getContext() 可以在 Adapter 本身中使用。否则，您不需要从外部访问它的上下文。

**更新**：哦，我明白了，您还想跟踪适配器项目的位置。无需将其存储在 ProgressBar 的标签中。修改了示例代码以解决此问题。

**更新**：修改后的代码可以正常运行。

```
public class CustomAdapterRutinaDiaLineas extends ArrayAdapter<Rutina> {

ArrayList<Rutina> lstRutinaDia;
ArrayList<Rutina> arrayDatos;
Rutina            objRutina;

public CustomAdapterRutinaDiaLineas(Context contexto, ArrayList<Rutina> arrayDatos) {
    super(contexto, R.layout.ll_lineas_rutina_dia, arrayDatos);
    this.arrayDatos = arrayDatos;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vistaFila = null;
    ViewHolder vh;

    if (convertView == null) {
        LayoutInflater vi = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        vistaFila = vi.inflate(R.layout.ll_lineas_rutina_dia, null);
        vh = new ViewHolder();

        vh.position = position;
        vh.btnOk = (Button) v.findViewById(R.id.btnLineasRutinaDiaOk);
        vh.btncerrar = (Button) v.findViewById(R.id.btnLineasRutinaDiaEjercicioNoCompletado);
        vh.pgrProgresoCierre = (ProgressBar) v.findViewById(R.id.pgrLineasRutinaDiaProgreso);
        vh.btnOk.setOnClickListener(new Button.OnClickListener() {
            @Override
            public void onClick(View v) {
                ((ProgressBar)v.getTag()).setVisibility(View.VISIBLE);
            }
        });
        vh.btncerrar.setOnClickListener(new Button.OnClickListener() {
            @Override
            public void onClick(View v) {
                ((ProgressBar)v.getTag()).setVisibility(View.INVISIBLE);
            }
        });
        vh.btncerrar.setTag(vh.pgrProgresoCierre);
        vh.btnOk.setTag(vh.pgrProgresoCierre);

        vistaFila.setTag(vh);
    } else {
        vistaFila = convertView;
        vh = (ViewHolder) vistaFila.getTag();
        vh.position = position;
    }

    Rutina datossss = arrayDatos.get(position);
    if (datossss.getProgreso() == null) {
        datossss.setProgreso(vh.pgrProgresoCierre);
    }

    return vistaFila;
}

private static class ViewHolder {
    int position;
    Button btnOk;
    Button btnCerrar;
    ProgressBar pgrProgresoCierre;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:04:39.093

我没有仔细评估你的代码，但我想我知道发生了什么。这是我的想法：

这是因为您的视图正在被回收，因此当该行再次膨胀时，您在 getView() 中所做的任何事情都可以撤消。

因此，您应该在您的 CustomAdapter 中有一个`ArrayList`或`Array`某种类型的，它可以有一个布尔值列表（这将变得更加复杂，因为您想要保存更多的东西）。

然后，当您单击按钮时，只需将数组中的相应值设置为`true`.

例如，假设您有 10 行，但尚不应该显示任何进度条。您的数组如下所示：

> [假，假，假，假，假，假，假，假，假，假]

假设在第 2 行（数组位置 1）上单击了按钮。然后，显示条形并将数组值设置为 true：

> 【假、真、假、假、假、假、假、假、假、假】

现在，在 中`getView()`，每当您扩充行布局时，您都可以检查数组，观察它是真还是假，并`hidden/not hidden`相应地设置进度条。

如果我对此不满意，我深表歉意，但我希望这会有所帮助。

# c# - 使用 ViewModel 给出空异常错误

> ID：12978693
> 
> 赞同：0
> 
> 时间：2012-10-19T16:41:06.547
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor, entity-framework-4

我正在使用这个视图模型：

```
public class CaseComplaintsViewModel
{
    public int CasesID { get; set; }
    public int CaseComplaintID { get; set; }
    public string ComplaintCode { get; set; }
    public string ComplaintType { get; set; }
} 
```

这是使用视图模型的视图。

```
@model IEnumerable<cummins_db.ViewModels.CaseComplaintsViewModel>

<table width="100%">
    <tr>
        <th></th>
        <th></th>
        <th>Complaint Code</th>
        <th>Complaint Description</th>
        <th>Delete</th>
    </tr>  
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.HiddenFor(modelItem => item.CasesID )    
            </td>
            <td>
                @Html.HiddenFor(modelItem => item.CaseComplaintID )    
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ComplaintCode )    
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.ComplaintType)
            </td>
            <td>
                @Ajax.ActionLink("Delete", "RemoveCodeFromCase", "Cases", new {    caseid           item.CasesID, id = item.CaseComplaintID }, null)
            </td>        
        </tr>
    }
</table> 
```

这是我的控制器操作，它将此部分视图返回到主视图：

```
public ActionResult SelectForCase(int caseid, int compid)
{
    if (ModelState.IsValid)
    {
        CaseComplaint c = new CaseComplaint
        {
            CasesID = caseid,
            ComplaintCodeID = compid
        };
        db.CaseComplaints.Add(c);
        db.SaveChanges();

        var data = (from C in db.CaseComplaints
                    where C.CasesID == caseid
                    select C).ToList().Select( x => new CaseComplaintsViewModel()
                    {
                        CasesID = x.CasesID,
                        CaseComplaintID = x.ComplaintCodeID,
                        ComplaintCode = x.ComplaintCode.ComplaintCodeName,
                        ComplaintType = x.ComplaintCode.ComplaintType
                    }).ToList();

        return PartialView("_CaseComplaintCodes", data);
    }

    return PartialView("_CaseComplaintCodes");
} 
```

在`db.SaveChanges`我尝试加载 ViewModel 之后，我得到一个空异常就行了`ComplaintCode = x.ComplaintCode.ComplaintCodeName`

此视图模型旨在返回`CaseComplaints`ComplaintCode 模型的视图。

代码中的断点显示`ComplaintCode`未加载。我知道我错过了一些东西，但不确定是什么。

谢谢

****** *** ******编辑****** ** *** ** *** *** 这是我的案例模型**

 **```
public class Cases
    {
    //case data model for call center
    //implement lists for all related child tables too

    [Key]
    public int CasesID { get; set; }

    public string CaseNumber { get; set; }

    [Required(ErrorMessage = "Customer is Required")]
    public int CustomerID { get; set; }
    public virtual Customer Customer { get; set; }

    [MaxLength(50)]
    public string UserName { get; set; }  //get user name from the aspnet membership

    [Required(ErrorMessage = "Case Category is Required")]
    public int CaseCategoryID { get; set; }

    public int TechnicianID { get; set; }
    public virtual Technician Technicians { get; set; }

    [Required(ErrorMessage = "Engine Model is Required")]
    public int EngineModelID { get; set; }
    public virtual EngineModel EngineModel { get; set; }

    [MaxLength(50)]
    public string BMSWorkorder { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "Status is Required")]
    public string CaseStatus { get; set; }

    [MaxLength(50)]
    public string OpenedBy { get; set; }

    [Required(ErrorMessage = "Opened Date is Required")]
    [DataType(DataType.DateTime)]
    public DateTime? OpenedDate { get; set; }

    [MaxLength(50)]
    public string ClosedBy { get; set; }

    [DataType(DataType.DateTime)]
    public DateTime? ClosedDate { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage="Caller First Name is Required")]
    public string CallerFirstName { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "Caller Last Name is Required")]
    public string CallerLastName { get; set; }

    [MaxLength(100)]
    public string AdditionalContact { get; set; }

    [MaxLength(10)]
    [Required(ErrorMessage = "Qualified is Required")]
    public string Qualified { get; set; }

    public string Description { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "ESN is Required")]
    public string ESN { get; set; }

    [MaxLength(50)]
    [Required(ErrorMessage = "Mileage is Required")]
    public string Mileage { get; set; }

    [DataType(DataType.Date)]
    public DateTime? DateInService { get; set; }

    [MaxLength(50)]
    public string ESTR { get; set; }

    [MaxLength(50)]
    public string EDS { get; set; }

    [MaxLength(50)]
    public string GensetSerialNumber { get; set; }

    [MaxLength(50)]
    public string GensetModelNumber { get; set; }

    //child Case Notes records
    public virtual ICollection<CaseNotes> CaseNotes { get; set; }

    //child case attachment records
    public virtual ICollection<Attachment> Attachments { get; set; }

    //child case complaint records
    public virtual ICollection<CaseComplaint> CaseComplaint { get; set; }

    //tracking fields
    public DateTime? CreatedOn { get; set; }
    [MaxLength(50)]
    public string CreatedBy { get; set; }
    public DateTime? ModifiedOn { get; set; }
    [MaxLength(50)]
    public string ModifiedBy { get; set; }
    } 
```

这是我的案例投诉模型

```
public class CaseComplaint
    {
    [Key]
    public int CaseComplaintID { get; set; }
    public int CasesID { get; set; }
    public int ComplaintCodeID { get; set; }
    public virtual Cases Cases { get; set; }
    public virtual ComplaintCode ComplaintCode { get; set; }
    } 
```

这是我的投诉代码模型

```
public class ComplaintCode
        {
        public int ComplaintCodeID { get; set; }

        [MaxLength(50)]
        [Required(ErrorMessage="Complaint Code is required")]
        public string ComplaintCodeName { get; set; }

        [MaxLength(50)]
        [Required(ErrorMessage="Complaint Type is required")]
        public string ComplaintType { get; set; }

        public virtual ICollection<CaseComplaint> CaseComplaint { get; set; }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:48:10.283

这是来自数据上下文的数据的问题。使用 Visual Studio 断点，检查`db.CaseComplaints.ToList()`并查看每个项目都有一个不为空的有效 ComplaintCode 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:00:35.893

插入的实体在您以后的选择中使用，并且无法加载其导航属性。这仅适用于从数据库加载的实体。如果您处置了对象上下文并创建了一个新的上下文，它将起作用。或者你可以试试这个选择：

```
var data = (from C in db.CaseComplaints
            where C.CasesID == caseid
            select new CaseComplaintsViewModel()
                    {
                        CasesID = C.CasesID,
                        CaseComplaintID = C.ComplaintCodeID,
                        ComplaintCode = C.ComplaintCode.ComplaintCodeName,
                        ComplaintType = C.ComplaintCode.ComplaintType
                    }).ToList(); 
```

~~还有一些选项可以从数据库中刷新实体，不确定是否可行，但它是您不需要的另一个数据库查询。~~这没有任何作用。**

# java - 你可以在java中有一个单例作为子类吗

> ID：12978694
> 
> 赞同：0
> 
> 时间：2012-10-19T16:41:07.523
> 
> 标签：java, singleton, subclass

你如何在子类中有一个单例模式？例如，在 itemCatalog 下面的代码中扩展了 item。我想使用类项目的 getPrice getter

```
public class ItemCatalog extends Item{

   private static ItemCatalog instance = new ItemCatalog(); 
   private Item itemCatalog[] = new Item[9];

   private ItemCatalog(){
   }

   public static ItemCatalog getInstance(){
      return instance;
   }

   public void populateCatalog(){  
      itemCatalog[0] = new Item("bb","Baked Beans",35);
      itemCatalog[1] = new Item("cf","Cornflakes",100);
      itemCatalog[2] = new Item("s0","Sugar",50);
      itemCatalog[3] = new Item("tb","Tea Bags",115);
      itemCatalog[4] = new Item("ic","Instant Coffee",250);
      itemCatalog[5] = new Item("b0","Bread",50);
      itemCatalog[6] = new Item("s0","Sausages",130);
      itemCatalog[7] = new Item("e0","Eggs",75);
      itemCatalog[8] = new Item("m0","Milk",65);
    }

   public void searchCatalog(String itemCode){  

      for (int i = 0; i < itemCatalog.length; i++){
          if (itemCode.equals(itemCatalog[i].getItemCode())){
             price = itemCatalog[i].getItemprice();
             break;
          }
      }   
   } 
```

编辑2：我想让这个类作为一个单例和一个不是单例的项目类的子类。

当我在构造函数中放置 super(String itemCode, String description, int price) 时出现错误

编辑3：好的，我想我用这些代码行解决了这个问题。我是java新手..仍在练习和学习:) ...感谢大家的洞察力

```
private ItemCatalog() {

    }
   private ItemCatalog(String itemCode,String description, int price){
       super(itemCode,description, price);
   } 
```

编辑 4：我不确定这是否正确，但想在类 item 中使用 getPrice 方法来返回 searchcatalog 的结果，这是一个价格。这会是正确的设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:07:31.497

为什么你希望这是一个子类？子类通常是专业化（车辆 -> 汽车、公共汽车或宠物 -> 猫、狗）。子类的实例继承其父类的所有字段和方法。我看到您的 Item 类有某种 ID、名称和价格。因此，您的 ItemCatalog 实例也有一个 ID、名称和价格。我知道你想要的是一个单例，但我看不出它是 Item 的子类的原因。你能解释一下这个设计决定的原因吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:11:06.147

你的设计需要改变。目录需要与项目分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T16:50:40.033

我不确定问题是什么，但是...

如果您创建实例字段`final`，则不需要`synchronized`getInstance()

如果静态字段是最终的，则引用以线程安全的方式初始化并且无法更改，因此您无需锁定任何内容即可访问它。

# jquery - html5视频静音

> ID：12978695
> 
> 赞同：0
> 
> 时间：2012-10-19T16:41:09.923
> 
> 标签：jquery, html

> **可能重复：**
> [如何使 html5 视频播放器静音](https://stackoverflow.com/questions/6376450/how-to-mute-an-html5-video-player)

现在创建 HTML5 视频静音按钮的正确方法是什么？我已经在这个网站上尝试了其他答案，但它不起作用。

这是我的链接 HTML：

```
<a href="#" class="muted">Mute</a> 
```

我的视频：

```
<video id="video" controls poster="video.jpg" width="600" height="120" >
<source src="images/recvid.mp4" type="video/mp4" />
<source src="images/recvid.webm" type="video/webM" />
<source src="images/recvid.ogv" type="video/ogg" />
<p>Your browser does not support the video tag.</p>
</video> 
```

和我的 jQuery：

```
 $('.muted').click(function() {
   $('#video').prop('muted', true);
     }); 
```

# c# - 无法隐式转换类型字符串

> ID：12978698
> 
> 赞同：2
> 
> 时间：2012-10-19T16:41:17.037
> 
> 标签：c#

我在第二个预填充时不断收到此错误...无法将类型字符串隐式转换为 System.Collections.Generic.IEnumerable，我不确定自己做错了什么。

```
namespace HomeInventory2
{
    public partial class Form1 : Form
    {
        public Form1(string prepopulated)
        {
            InitializeComponent();
            IEnumerable<String> lines = prepopulated;
            textBoxAmount.Text = lines.ElementAtOrDefault(0);
            textBoxCategories.Text = lines.ElementAtOrDefault(1);
            textBoxProperties.Text = lines.ElementAtOrDefault(2);
            textBoxValue.Text = lines.ElementAtOrDefault(3);
        }

        private void label1_Click(object sender, EventArgs e)
        {

        }

        private void submitButton_Click(object sender, EventArgs e)
        {
            CreateInventory create = new CreateInventory();
            create.ItemAmount = textBoxAmount.Text;
            create.ItemCategory = textBoxCategories.Text;
            create.ItemProperties = textBoxValue.Text;
            create.ItemValue = textBoxValue.Text;

            InventoryMngr invtryMngr = new InventoryMngr();
            invtryMngr.Create(create);

        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:43:19.190

这条线

```
IEnumerable<String> lines = prepopulated; 
```

**prepopulated**是一个字符串，您正在尝试将其分配给字符串列表。也许你想先**拆分（）**它？或者，也许您的表单的构造函数应该以一个字符串列表开头。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T16:43:31.250

您正在尝试分配`string`到`IEnumerable<string>`这里：

```
public Form1(string prepopulated)
{
    // ...
    IEnumerable<string> lines = prepopulated;
    // ...
} 
```

您应该将构造函数重构为如下所示：

```
public Form1(IEnumerable<string> prepopulated)
{
    // ...
    IEnumerable<string> lines = prepopulated;
    // ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T16:43:04.697

您的构造函数将单个字符串作为参数：

```
public Form1(string prepopulated) 
```

然后，您尝试将其设置为`IEnumerable<string>`：

```
IEnumerable<String> lines = prepopulated; 
```

相反，您需要传入一个`IEnumerable<string>`：

```
public Form1(IEnumerable<string> prepopulated) 
```

如果您的`prepopulated`字符串是可以解析为多个字符串的字符串，则可以改为这样做。例如，如果它使用带有换行符的字符串“预填充”，您可以改为执行以下操作：

```
IEnumerable<String> lines = prepopulated.Split(new[] {'\n'}, StringSplitOptions.RemoveEmptyEntries); // Split into separate lines 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T16:42:58.847

正如错误消息明确指出的那样，您不能将 a 分配给`string`a `IEnumerable<String>`。

你可能想打电话`.Split()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T16:46:35.120

您不能添加到 IEnumerable，但可以执行以下操作。

```
IEnumerable<String> lines = new List<string>();
//or
//IEnumerable<String> lines = Enumerable.Empty<string>();
//IEnumerable<String> lines = Enumerable.Repeat("My string",1); //only single value
//IEnumerable<String> lines = new string[] {"My string","My other string"}

//or
var lines = new List<string>();
lines.Add("My string");
lines.Add("My other string");   

IEnumerable<String> ienumLines = lines;
return ienumLines;

//or add an extension method

public static void AddRange<T>(this ICollection<T> collection, IEnumerable<T> items) 
{
    foreach(T item in items) 
    {
       collection.Add(item);
    }
} 
```

问候

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T16:52:59.940

尝试将参数`prepopulated`作为类型传递`IEnumerable<String>`

```
public Form1(IEnumerable<String> prepopulated)
{
    InitializeComponent();
    IEnumerable<String> lines = prepopulated;
    // ....
} 
```

或者

假设您的字符串是 like `ABC, DEF, GHI`，那么您可以执行以下操作：

```
// where String Split is based on comma (,)
IEnumerable<String> lines = prepopulated.Split(new[] { ',' }, 
    StringSplitOptions.RemoveEmptyEntries).Select(s => s.Trim()); 
```

你得到结果：

```
ABC
DEF
GHI 
```

# javascript - 访问 iFrame 中的元素（ie9、Chrome、Firefox）

> ID：12978706
> 
> 赞同：0
> 
> 时间：2012-10-19T16:41:52.937
> 
> 标签：javascript, iframe

我在这个看似简单的任务上遇到了一些麻烦。

1.  我想将当前 url 加载到 iFrame 中。
2.  我需要访问几个 div 并删除它们。
3.  我只需要打印修改后的 iFrame。

这是我到目前为止所拥有的，但我无法访问加载的 iFrame 中的任何 html 元素。iFrame 的内容确实按预期打印，但我需要删除几个 div，我正试图这样做：

```
var newWidth = "1024px";
var url = window.location;
var $iFrame = $('<iframe id="printFrame" style="width:' + newWidth + ' !important;     height:100 !important; border: 1px solid #000000;" name="printFrame"></iframe>');

$('#content-area').append($iFrame);

$iFrame
  .load(function () {

   // NEED TO DO THIS IN THE IFRAME DOCUMENT: 
   // $('#content-area').remove();
   // CANT FIGURE OUT HOW

   this.contentWindow.print(); // this prints fine
   $(this).unbind('load');
   })
   .attr('src', url); 
```

谢谢！罗恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:44:25.557

你为什么用 JavaScript 来做这件事？使用打印样式表隐藏您不想打印的元素。

添加新样式表

```
<link rel="stylesheet" type="text/css" media="print" href="print.css" /> 
```

添加要应用的规则*print.css*

```
div.noPrint { display : none; } 
```

如果您仍想使用 iframe 执行此操作，则需要使用[contents()](http://api.jquery.com/contents/)来访问元素。

```
var iframeDivs = $iFrame.contents().find("div"); 
```

# xslt - exsl:node-set 上的 sum 带回了不正确的值

> ID：12978708
> 
> 赞同：-1
> 
> 时间：2012-10-19T16:41:57.853
> 
> 标签：xslt, sum, node-set

我编写了一些 xsl 来创建一些 xml 代码，然后对其进行求和。这是代码：

```
 <xsl:variable name ="tmpTotal">
                <root>
                  <xsl:for-each select="key('idxid',$id)//parent::*/transaction/transaction-date[substring(@iso-date,1,4) = $newyear  ]">
                      <xsl:if test="../transaction-type[@code='E']">
                        <item>
                          <xsl:value-of select="number(../value)"/>
                        </item>
                      </xsl:if>

                    </xsl:for-each>
               </root>
            </xsl:variable>

              <xsl:variable name="value" select="sum(exsl:node-set($tmpTotal)/root/item)" />
              <h3>
                All: <xsl:value-of select="exsl:node-set($tmpTotal)/*"/> <br/>
                Year: <xsl:value-of select="$newyear"/> <br/>
                Value:<xsl:value-of select="$value"/> <br/>

              </h3> 
```

结果如下： 全部：96363464029561 年份：2005 值：73837

数字列表（来自 All: 输出）如下： 9636 3460 29561 总数应为 42657。但是，来自 sum(exsl:node-set($tmpTotal)/root/item) 的总数为 73837。如果xml中的数字是正确的，为什么我得到的总数不正确？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:15:07.613

你的计算是错误的。9636 + 34640 + 29561 = 73837

# java - 无法在 Java swing 小程序中添加文本或中心方块

> ID：12978716
> 
> 赞同：2
> 
> 时间：2012-10-19T16:42:40.507
> 
> 标签：java, swing, applet

单击“输入消息”按钮时，我无法显示字符串，并且由于某种原因我无法使框居中。当我单击绘制方块时，它将绘制方块，如果我单击“以颜色绘制”，它将以彩色绘制。但是，无论我做什么，文本都不会出现。这是我的代码：

```
import java.awt.*;
import java.awt.event.*;
import java.util.Random;
import javax.swing.*;

public class Lab9 extends JApplet implements ActionListener, ItemListener {

 private JRadioButton square;
 private JRadioButton message;
 private JTextField messageField;
 private String messageEntered = "";
 private JComboBox location;
 private JPanel top;
 private JPanel bottom;
 private JCheckBox drawColor;
 private JButton draw;
 private int newWidth;
 private int newHeight;
 private static final String locations[] = {"Centered", "Random location"};
 private boolean drawSquare;
 private Color color;

@Override
public void init() {
    setLayout(new FlowLayout());
    top = new JPanel();
    bottom = new JPanel();

    square = new JRadioButton("Draw square");
    square.addItemListener(this);
    top.add(square);

    message = new JRadioButton("Enter your message:");
    message.addItemListener(this);
    top.add(message);

    messageField = new JTextField(20);
    messageField.addActionListener(this);
    top.add(messageField);

    //bottom panel
    bottom.add(new JLabel("Select where to draw:"));
    location = new JComboBox(locations);
    bottom.add(location);

    drawColor = new JCheckBox("Draw in color");
    drawColor.addItemListener(this);
    bottom.add(drawColor);

    draw = new JButton("Draw it!");
    draw.addActionListener(this);
    bottom.add(draw);

    add(top);
    add(bottom);

}

 @Override 
 public void paint(Graphics g) {
     super.paint(g); 

     g.setColor(color);

     if(drawSquare){

         g.fillRect(newWidth, newHeight, 200, 200);
     }

     else {
         g.setColor(color);
         g.drawString(messageEntered, newWidth, newHeight); // print out entered name 
     }
 }

@Override
public void actionPerformed(ActionEvent e) {

    repaint();
}

@Override
public void itemStateChanged(ItemEvent e) {
    int width = getWidth();
    int height = getHeight();
    Random rand = new Random();

    if(e.getSource() == location && location.getSelectedIndex() == 1) {

         newWidth = rand.nextInt(width) + 20;
         newHeight = rand.nextInt(height) + 20;
    }

    if (e.getSource() == location && location.getSelectedIndex() == 0) {
        newWidth = width/2-100;
        newHeight = height/2-100;
    }

    if(e.getSource() == square && e.getStateChange() == ItemEvent.SELECTED) {
        drawSquare = true;
    }

    if(e.getSource() == message && e.getStateChange() == ItemEvent.SELECTED) {
        drawSquare = false;
        messageEntered = messageField.getText();
    }

    if (e.getSource() == drawColor && e.getStateChange() == ItemEvent.SELECTED) {
        color = new Color(rand.nextInt(256), rand.nextInt(256), rand.nextInt(256));
    }

    if(e.getSource() == drawColor && e.getStateChange() == ItemEvent.DESELECTED) {
        color = Color.BLACK;
    }

} 
```

建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:28:05.473

[如此处](https://stackoverflow.com/a/2658663/230513)所示，该`drawString()`方法需要[基线相对](http://docs.oracle.com/javase/7/docs/api/java/awt/FontMetrics.html)坐标。这个[例子](https://stackoverflow.com/a/11924118/230513)可能有助于理解几何。

```
FontMetrics fm = g.getFontMetrics();
g.drawString(messageEntered, newWidth, newHeight + fm.getAscent()); 
```

顺便说一句，考虑覆盖`paintComponent()`a`JPanel`并将其添加到您的小程序中。

# java - 如何跟踪引发异常的文件？

> ID：12978718
> 
> 赞同：2
> 
> 时间：2012-10-19T16:42:43.827
> 
> 标签：java, tomcat, servlets, netbeans, runtimeexception

我在我的 tomcat 的日志窗口中遇到异常，但我不确定错误在哪个文件中，这是日志输出

```
Oct 19, 2012 11:09:36 AM org.apache.catalina.core.ApplicationContext log
INFO: No Spring WebApplicationInitializer types detected on classpath
Oct 19, 2012 11:09:36 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Oct 19, 2012 11:09:36 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'dispatcher'
Oct 19, 2012 11:09:37 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'MACT'
Oct 19, 2012 11:09:42 AM org.apache.catalina.core.ApplicationContext log
INFO: Destroying Spring FrameworkServlet 'MACT'
Oct 19, 2012 11:09:43 AM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring FrameworkServlet 'MACT'
Oct 19, 2012 11:09:46 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [MACT] in context with path [/MACT] threw exception
java.lang.NumberFormatException: For input string: "Thu Oct 18 13"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Long.parseLong(Long.java:441)
    at java.lang.Long.parseLong(Long.java:483)
    at com.testcomp.mact.web.filter.AuthorizationFilter.doFilter(AuthorizationFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:46:02.950

如果您认为错误与您的编码有关，请在您的命名空间中查找该类。

在这种情况下`com.testcomp.mact.web.filter.AuthorizationFilter.doFilter(AuthorizationFilter.java:70)`，对我来说，它看起来不像任何已知的框架，所以我认为它是您控制下的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:16:46.323

您正在尝试将包含日期值的字符串转换为长值。修改`AuthorizationFilter.doFilter`第 70 行以确保您传递了有效的输入`parseLong`调用。如果您对输入值没有任何控制权，您可以尝试以下操作

```
 try {
         long l = Long.parseLong(s);
         System.out.println("long l = " + l);
      } catch (NumberFormatException e) {
         log.error("NumberFormatException: " + nfe.getMessage()); 
          //Redirect your request to error page saying invalid input

      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T16:49:31.217

com.testcomp.mact.web.filter.AuthorizationFilter.doFilter(AuthorizationFilter.java:70) - 这里方法 doFilter(...) 第 70 行 .. 您正在尝试将字符串 Thu Oct 18 13 转换为 Long。所以这就是错误。

# mysql - PHP 脚本在生成大型 XML 提要时使用大量 CPU

> ID：12978719
> 
> 赞同：0
> 
> 时间：2012-10-19T16:42:44.920
> 
> 标签：mysql, nginx, php

我有一个 nginx+PHP+MySQL 服务器。MySQL 有一个包含作业的大型数据库。我正在运行的 PHP 脚本应该从数据库中检索所有作业并输出包含所有作业的 XML 提要。脚本目前是这样组织的

```
$arr = get_all_job_ids(); //returns 18k PHP array that is fueled by SELECT `id` FROM `jobs`;
foreach ($arr as $i=>$id){
    if ($i>9700){break;} //for debugging
    $job = get_job_by_id($id); //PHP array generated by SELECT `title`, desc, ... FROM `jobs` WHERE `id`=$id;
    $job_xml = replace_job_tags($job, $xml_template); //regular expressions
    echo $job_xml;
    flush();
} 
```

服务器上没有任何人，它只专用于实验，没有其他任何东西在上面运行。首先，即使我做了一些事情，比如释放 sql 结果并明确清理 PHP 可能没有清理的任何内容，总体内存消耗在循环中不断增长。它在 flush() 之后下降，但没有回到迭代开始时的水平。

其次，更重要的是 - 运行时间和 CPU 负载完全不一致。有时可以在 17 秒内很好地生成 9.7k 的作业提要。在这些情况下，根据“top”和“SHOW FULL PROCESSLIST;” 在 get_all_job_ids() 步骤期间 CPU 会短暂飙升至 100%，但随后会平静下来并花时间逐一检索和刷新（）作业。

但在其他时候，php5-fpm 和 mysqld 在初始 id 检索步骤和单个作业的循环查询期间为自己获取所有 CPU。此外，即使根据“SHOW FULL PROCESSLIST;” 正在查询单个作业，http 客户端从未获得任何输出，而是最终收到“504 网关超时”。经过较长时间（分钟）后mysqld和php5-fpm恢复正常。此外，当我排除 get_job_by_id() 步骤并在那里硬编码一个数组时，一切都运行良好且顺利。

我完全不知道是什么导致了这种情况，以及我还可以尝试进一步阐明这个问题。如果您有任何想法，我会很高兴听到它们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:57:39.433

为什么你需要执行“SELECT id FROM foo”然后“SELECT ... FROM foo where id = ...” - 这里的大问题是，这必须在一个查询中完成

# xcode - 当源文件在依赖静态库中更新时，Xcode 不重建应用程序

> ID：12978723
> 
> 赞同：6
> 
> 时间：2012-10-19T16:42:52.093
> 
> 标签：xcode, xcode4

我遇到了 Xcode 的隐式依赖检查和静态库的问题，我认为这是 Xcode 中的一个错误（并且已经报告过）；我在这里提出它，以防其他人对此有任何想法。简而言之，如果应用程序依赖于静态库，并且作为库组件的源文件被修改，Xcode 会重建库但不会重新链接应用程序，因此在应用程序中看不到更改。

更具体地说：我有一个包含应用程序项目和静态库项目的工作区，以便应用程序调用库中的函数（并且结果在应用程序中可见：例如，函数返回显示在标签中的文本应用程序）。静态库包含在应用程序目标的“Link Binary with Libraries”构建阶段。从头开始构建会导致首先构建库，然后是应用程序，正如预期的那样（换句话说，Xcode 已经检测到依赖关系）。

现在，如果我修改库源文件中的消息文本，然后单击“构建并运行”按钮，Xcode 正确重建库，但*无法*重新链接应用程序，所以当应用程序运行时，未修改的消息文本是显示。

我在 Mac OS X 10.8.2 下运行 Xcode 4.5.1。在我报告的场景中，该应用程序是一个 iOS 单视图应用程序，而被调用的静态库函数恰好是用 C++ 实现的。

目前我知道除了清洁和重建之外没有其他解决方法。有没有其他人看到过这个，或者有任何其他见解？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T16:42:52.093

我最初搜索 SO 没有成功，但我一定没有正确地表达我的搜索。但是，在撰写我的问题时，“类似问题”列表提供了更好的结果，我能够找到[解决方法](https://stackoverflow.com/a/11826682/34498)。简单来说：

*   在 Project Navigator 中选择库
*   在文件检查器中找到位置；它可能是“相对于组”
*   将其更改为“相对于构建产品”

这解决了我的测试用例中的问题；现在，只要库的源代码被修改，应用程序就会正确重建。我发现没有必要按照建议手动编辑 project.pbxproj 文件。

我仍然会声称这是 Xcode 中的一个错误，但至少现在我有一个解决方法。

# parsing - 如何删除已分配给变量的 Erlang 字符串中的空格？

> ID：12978727
> 
> 赞同：0
> 
> 时间：2012-10-19T16:42:56.477
> 
> 标签：parsing, file-io, erlang

我正在阅读以下格式的数据：

```
{ok,Volts} = file:open("voltage1.dat",read). 
```

在“voltage.dat”文件中，有一个值被转换为字符串

`" 9.9944639227844667e-001\n"`. 这应该分配给`Volts`变量。

为了稍后使用 string_to_float 函数，我需要去掉空格并删除 \n 分隔符。

我探索了使用`string:strip`,`string:substr`和`re:replace`库函数。

当我尝试其中的每一个时，我使用变量 Volts 作为输入字符串，例如：

```
string:substr(Volts,3,18). 
```

这不起作用。我认为这是因为我输入`Volts`变量的方式。

任何人都可以让我正确吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T19:01:36.470

```
{ok,Volts} = file:open("voltage1.dat",read). 
```

只会打开文件；Volts 是文件描述符，而不是文件的内容。为了读取文件，您可以使用[io 模块](http://www.erlang.org/doc/man/io.html)中的函数。除了读取整个文件然后解释之外，您还可以使用[fread/3](http://www.erlang.org/doc/man/io.html#fread-3)：

```
1> {ok, V} = file:open("voltage.dat",read).
{ok,<0.34.0>}
2> io:fread(V,'',"~f").
{ok,[0.9994463922784467]} 
```

如果您不想/不能这样做（也许您的文件格式更复杂），请记住字符串是列表，因此您可以使用`filter/2`和其他列表函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:42:22.363

如果您控制 in[ut 文件格式，您可以使用 file:consult/1 直接读取条款。

# ios - 当“在后台打开新标签”选项打开时，Safari 会忽略媒体查询。iPad iOS 5+

> ID：12978729
> 
> 赞同：5
> 
> 时间：2012-10-19T16:42:58.630
> 
> 标签：ios, css, ipad, mobile-safari, media-queries

我遇到了一个问题，即运行 iOS 5.1.1 的 iPad 2 上的 Safari 在打开新选项卡的链接时会忽略媒体查询。这只发生在“在后台打开新标签”选项打开时。

您可以在以下位置查看一个简单示例： http: [//www.pauluscreative.com/mq/](http://www.pauluscreative.com/mq/)

重现问题：

1.  按住“测试”链接以调出菜单。
2.  选择“在新标签页中打开”

理想情况下，您应该只看到一个蓝色框，红色应该被媒体查询隐藏。结果是您会看到两个框。

我使用了以下 CSS：

```
<style>
    #red {  height: 40px; width: 40px; background-color: #FF0000;  }
    #blue {  height: 40px; width: 40px; background-color: #0000FF;  }

    @media only screen and (min-device-width : 768px) and (max-device-width : 1024px) {
            #red { display: none; }
    }

</style> 
```

这是一个已知问题、预期行为、错误的媒体查询还是 Safari 的问题。

对于如何解决这个问题，有任何的建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T17:04:33.043

在您提供的示例（链接）中，缺少媒体查询。但是测试链接指向包含它们的另一个文档。

你知道吗？

# java - 硬删除的对象仍然出现在 AppEngine 管理控制台中

> ID：12978732
> 
> 赞同：1
> 
> 时间：2012-10-19T16:43:13.420
> 
> 标签：java, google-app-engine, google-cloud-datastore, objectify

我在 GAE for Java 上使用 Objectify。最近有一种情况，我使用 ofy( ).delete() 删除了对象，这应该是硬删除数据存储中的对象。

但是，我仍然能够在 AppEngine 的管理控制台（数据存储查看器）中看到这个硬删除的对象。当我尝试通过单击 ID/名称列来展开（编辑）此对象时，我收到错误消息“此实体不存在”。我仍然可以使用 ofy().get() 从数据存储中检索此对象。

这是因为索引没有更新吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T19:33:55.790

您将看到高复制数据存储中查询的最终一致性。

这是开始阅读的好地方： [https ://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency](https://developers.google.com/appengine/docs/java/datastore/structuring_for_strong_consistency)

# javascript - 是否有浏览器历史信息的javascript API（仅限当前域）

> ID：12978739
> 
> 赞同：1
> 
> 时间：2012-10-19T16:43:40.003
> 
> 标签：javascript, html, browser, browser-history

是否有程序化 API 可以告诉我网站中最近访问过的页面（30 天）是什么？

我知道这些信息已经存储在浏览器历史记录中。就安全性而言，我只关心脚本正在运行的站点（域）内访问的页面。我的意图是使用（Url，title）历史信息来生成一个自定义的最近访问过的页面列表。我的网站有数百万页。

如果没有这样的标准 API（这个[CSS hack](https://stackoverflow.com/questions/48805/how-do-you-access-browser-history?rq=1)不是一个），那么：

1.  不允许给定域看到对域本身的访问的理论上的安全原因是什么？
2.  还有哪些其他方法可能符合我的意图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:49:36.617

历史 API 中没有任何内容可以为您提供来自您的域的信息。如果您想这样做，请在页面加载时使用浏览器的 localstorage 来存储 URL。其他选择是在服务器上跟踪它并将其存储在您的数据库中。

# iphone - 使用 UIImageView 的 layer.border 属性设置边框

> ID：12978740
> 
> 赞同：1
> 
> 时间：2012-10-19T16:43:40.783
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, uiimageview

我有一个 UIImageView 有一个图像。`initWithFrame:(CGRect)frame`看起来像这样：

```
#define BORDER_WIDTH_SELECTION 3
#define SELECTED_SCALE_VALUE 1.3

    self.layer.masksToBounds = NO;
    smallFrame_ = frame;
    float newX = self.center.x - ((self.frame.size.width*SELECTED_SCALE_VALUE)*0.5);
    float newY = self.center.y - ((self.frame.size.height*SELECTED_SCALE_VALUE)*0.5);
    bigFrame_ = CGRectMake(newX, newY, self.frame.size.width*SELECTED_SCALE_VALUE, self.frame.size.height*SELECTED_SCALE_VALUE);
    self.layer.borderWidth = BORDER_WIDTH_SELECTION; 
```

然后我触发这个

```
- (void) setSelected {
    [self makeThumbnailBig];
    self.layer.borderColor = [UIColor colorWithRed:178.0/255.0 green:19.0/255.0 blue:50.0/255.0 alpha:1.0].CGColor;
}

- (void)makeThumbnailBig
{    
    [UIView animateWithDuration:0.2 animations:^{
        self.frame = bigFrame_;
    }];
} 
```

`ImageView`正确缩放并绘制红色边框，但随后从左侧边框下方的峰值`image`内`ImageView` **出现大约一两个像素**。我已经删除了图像，但这应该让您对这个问题有所了解：

![在此处输入图像描述](../Images/7e1d5763c025d922606f1e8c15e91492.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:50:36.583

在您的代码中有一行

```
self.layer.masksToBounds = NO; 
```

根据问题应该`YES`改为

关于额外像素：

当您通过划分准备图像大小时，您可能会面临魔术图像高分辨率优化的问题。它首先将分形部分添加到 UIImageView 维度。查看[点与像素](http://developer.apple.com/library/ios/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/GraphicsDrawingOverview/GraphicsDrawingOverview.html#//apple_ref/doc/uid/TP40010156-CH14-SW7)

# php - 如何在 PHP 中使用两个变量调用静态方法

> ID：12978742
> 
> 赞同：1
> 
> 时间：2012-10-19T16:43:44.437
> 
> 标签：php, reflection, static

我有两个变量：

```
$a = 'some_class';
$b = 'some_method'; 
```

我想做的是这样的（方法是静态的）：

```
$a::$b; 
```

可能吗？我试过反射类，但我不能调用静态方法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:47:00.860

这应该这样做

```
call_user_func(array($a, $b)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T16:50:23.303

# 如何调用静态方法，3 个选项

你有几个选择：

## 代码

```
<?PHP

    class test {
        static function doThis($arg) {
            echo '<br>hello world '.$arg;
        }
    }

    $class='test';
    $method='doThis';
    $arg='stack';

    //just call
    $class::$method($arg);

    //with function
    call_user_func(array($class, $method), $arg);

    //ugly but possible
    $command=$class.'::'.$method.'("'.$arg.'");';
    eval($command); 
```

## 输出

```
 hello world stack
    hello world stack
    hello world stack 
```

# 当您使用这些选项调用它时会发生什么

带有回溯的代码，这样您就可以看到 PHP 中发生的事情：

## 代码

```
<?PHP

class test {
    static function doThis($arg) {
        echo 'hello world with argument: '.$arg.PHP_EOL;
        print_R(debug_backtrace());
    }
}

function runTest() {

    $class='test';
    $method='doThis';
    $arg='stack';

    //just call
    $class::$method($arg);

    //with function
    call_user_func(array($class, $method), $arg);

    //ugly but possible
    $command=$class.'::'.$method.'("'.$arg.'");';
    eval($command);

}

echo '<pre>';
runTest(); 
```

## 输出

### $class::$method($arg);

```
hello world with argument: stack
Array
(
    [0] => Array
        (
            [file] => folder/test.php
            [line] => 19
            [function] => doThis
            [class] => test
            [type] => ::
            [args] => Array
                (
                    [0] => stack
                )

        )

    [1] => Array
        (
            [file] => folder/test.php
            [line] => 31
            [function] => runTest
            [args] => Array
                (
                )

        )

) 
```

### call_user_func(array($class, $method), $arg);

```
hello world with argument: stack
Array
(
    [0] => Array
        (
            [function] => doThis
            [class] => test
            [type] => ::
            [args] => Array
                (
                    [0] => stack
                )

        )

    [1] => Array
        (
            [file] => folder/test.php
            [line] => 22
            [function] => call_user_func
            [args] => Array
                (
                    [0] => Array
                        (
                            [0] => test
                            [1] => doThis
                        )

                    [1] => stack
                )

        )

    [2] => Array
        (
            [file] => folder/test.php
            [line] => 31
            [function] => runTest
            [args] => Array
                (
                )

        )

) 
```

### 评估（$命令）；

```
hello world with argument: stack
Array
(
    [0] => Array
        (
            [file] => folder/test.php(26) : eval()d code
            [line] => 1
            [function] => doThis
            [class] => test
            [type] => ::
            [args] => Array
                (
                    [0] => stack
                )

        )

    [1] => Array
        (
            [file] => folder/test.php
            [line] => 26
            [function] => eval
        )

    [2] => Array
        (
            [file] => folder/test.php
            [line] => 31
            [function] => runTest
            [args] => Array
                (
                )

        )

) 
```

正如您所看到的，第一种方式在注册之间没有任何步骤，它直接进行调用，而其他 2 个选项本身作为一个函数并从它们自己进行调用。

在实践中差别不大，但在优化这样的过程时可能有意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T16:51:10.063

您必须将 () 添加到 var 的末尾才能将其转换为方法。$a::$b() 不是 $a::$b;

**PHP**

```
<?php

$a = 'some_class';
$b = 'some_method';
$c = 'double';

echo $a::$b();
echo "<br>";
echo $a::$c(15);

class some_class{

    public static function some_method(){
        return "static return";
    }

    public static function double($int){
        return $int*2;
    }
}

?> 
```

**输出**

```
static return
30 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T16:47:36.100

这将为您工作：`$a::$b();`

**例子：**

```
<?php

class A {
    public static function b()
    {
        echo 'Done!', PHP_EOL;
    }
}

$class  = 'A';
$method = 'b';

$class::$method(); // Shows:  Done! 
```

# c++ - 如果我不使用变量，我可以在翻译单元中有多个定义吗？

> ID：12978745
> 
> 赞同：16
> 
> 时间：2012-10-19T16:44:03.967
> 
> 标签：c++, linker, c++11, standards, one-definition-rule

该标准似乎暗示，如果不*使用 odr*（第 3.2/3 节），则对变量的定义数量没有限制：

> 每个程序都应包含该程序中 odr 使用的每个非内联函数或变量的准确定义；无需诊断。

它确实说任何变量都不能在翻译单元中多次定义（第 3.2/1 节）：

> 任何翻译单元都不得包含一个以上的任何变量、函数、类类型、枚举类型或模板的定义。

但是我在整个程序中找不到对非 ODR 使用的变量的限制。那么为什么我不能编译如下内容：

```
// other.cpp
int x;

// main.cpp
int x;
int main() {} 
```

使用 g++ 4.6.3 编译和链接这些文件，我得到一个链接器错误`multiple definition of 'x'`。老实说，我期待这一点，但由于`x`没有在任何地方使用 odr（据我所知），我看不出标准如何限制这一点。还是未定义的行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T17:02:18.483

您的程序违反了链接规则。C++11 §3.5[basic.link]/9 状态：

> 两个相同且在不同范围内声明的名称应表示相同的变量、函数、类型、枚举器、模板或命名空间，如果
> 
> *   两个名称都有外部链接，否则两个名称都有内部链接并在同一个翻译单元中声明；和
>     
>     
> *   两个名称都指同一个命名空间的成员或同一个类的成员，而不是继承；和
>     
>     
> *   当两个名称都表示函数时，函数的参数类型列表是相同的；和
>     
>     
> *   当两个名称都表示函数模板时，签名是相同的。

（我引用了完整的段落以供参考。后两个项目符号在这里不适用。）

在您的程序中，有两个名称`x`相同。它们在不同的作用域中声明（在这种情况下，它们在不同的翻译单元中声明）。两个名称都有外部链接，并且两个名称都引用同一名称空间（全局名称空间）的成员。

这两个名称**不**表示同一个变量。声明`int x;`定义了一个变量。因为程序中有两个这样的定义，所以程序中有两个变量。一个翻译单元中的名称“x”表示这些变量之一；另一个翻译单元中的名称“x”表示另一个。因此，该程序是格式错误的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-19T17:38:31.057

你说得对，标准在这方面有问题。我有一种感觉，这种情况属于 3.2p1（每个翻译单元最多一个定义，如您的问题）和 3.2p6（描述类、枚举、内联函数和各种模板如何在跨翻译单位）。

为了比较，在 C 中，6.9p5 要求（我强调）：

> 外部定义是一个外部声明，它也是函数（内联定义除外）或对象的定义。如果用外部链接声明的标识符在表达式中使用（而不是作为`sizeof`or`_Alignof`运算符的操作数的一部分，其结果是整数常量），则在整个程序的某处，该标识符应该只有一个外部定义；**否则，不得超过一个**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T16:57:28.440

如果标准没有说明未使用变量的定义，那么您不能暗示可能有多个：

> 当本国际标准省略对任何明确的行为定义的描述时，也可能会出现未定义的行为。

所以它可以很好地编译和运行，或者可能在翻译过程中停止并显示错误消息，或者可能会导致运行时崩溃等。

编辑：见 James McNellis 回答标准确实有关于它的规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T16:52:48.257

编译没有错误，错误在于它的链接。默认情况下，您的全局变量或函数对其他文件（具有`extern`存储空间）是公共的，因此最后当链接器想要链接您的代码时，它会看到两个定义`x`并且它无法选择其中一个，所以如果您不`x`使用`main.cpp`in`other.cpp`反之亦然使它们成为静态的（这意味着仅对包含它的文件可见）

```
// other.cpp
static int x;

// main.cpp
static int x; 
```

# html - 任意结构的自动 HTML 表单生成

> ID：12978752
> 
> 赞同：1
> 
> 时间：2012-10-19T16:44:37.630
> 
> 标签：html, forms

有没有东西可以从任意对象创建 HTML 表单，识别适当的元素类型、列表等，并在提交时生成修改后的对象？这看起来接近我的想法，但它对对象结构有要求：

[http://www.dhtmlx.com/docs/products/dhtmlxForm/index.shtml](http://www.dhtmlx.com/docs/products/dhtmlxForm/index.shtml)

# vb.net - 使用网络断开处理 Filewatcher

> ID：12978755
> 
> 赞同：0
> 
> 时间：2012-10-19T16:44:42.310
> 
> 标签：vb.net

有很多关于这个的帖子，都围绕着一个共同的解决方案。我曾尝试使用此解决方案，但不相信它像我希望的那样可靠。如果有人可以指出我做错了什么或提出建议以使其更充分地证明，请发布！

情况：观看共享网络文件夹..如果网络丢失，filewatcher 会丢失它试图观看的内容并且服务终止。以下代码确实有效，但并非一直有效。该事件在尝试设置 FS 的路径属性时被触发。如果找不到路径（网络关闭），则会引发异常。我抓住了它，基本上睡了 x 次，然后再试一次。理想情况下，听起来它可以正常工作，但并不像看起来那么可靠:(

```
Protected Overrides Sub OnStart(ByVal args() As String)

    fs1 = New FileSystemWatcher
    fs1.Filter = My.Settings.MonitoringFilter
    ' fs1.NotifyFilter = NotifyFilters.LastWrite
    fs1.Path = My.Settings.MonitoringDirNOSlash
    ' Add event handlers. 
    AddHandler fs1.Error, AddressOf WatcherError
    fs1.EnableRaisingEvents = True
End Sub

Protected Sub WatcherError(source As Object, e As ErrorEventArgs)
    fs1.Dispose()
    fs1 = New FileSystemWatcher
    Dim c As Integer = 0
    While Not fs1.EnableRaisingEvents
        Try
            fs1.Filter = My.Settings.MonitoringFilter
            fs1.Path = My.Settings.MonitoringDirNOSlash
            AddHandler fs1.Error, AddressOf WatcherError
            fs1.EnableRaisingEvents = True
        Catch ex As Exception
            c += 1
            If c = 1 Then
                ErrorReport(ex.Message)
            End If
            System.Threading.Thread.Sleep(5000)
        End Try
    End While
End Sub 
```

# php - protected/config/main.php 中的可翻译字符串

> ID：12978759
> 
> 赞同：0
> 
> 时间：2012-10-19T16:45:01.250
> 
> 标签：php, yii, multilingual

如何在 Yii's 中翻译字符串`protected/config/main.php`？

`__()`正确配置并在内部`controllers`和`views`. 但在配置文件中它不起作用。

我知道原因，`__()`但还不知道目标语言，正如它在这里定义的那样。那么如何使配置文件可翻译？

```
return array(
  ....
  'basePath' => dirname(__FILE__) . DIRECTORY_SEPARATOR . '..',
  'name' => __("Sitename"),
  'language' => 'fa_ir',
  .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:13:08.907

此时您将无法使用该应用程序，因为这是实际初始化应用程序本身的配置。您可以稍后在初始化后更改您的应用名称

# php - 使用 fetch 时，数组仅返回最后一项

> ID：12978760
> 
> 赞同：1
> 
> 时间：2012-10-19T16:45:12.200
> 
> 标签：php, arrays, while-loop, return, fetch

我正在尝试将数据库结果返回到数组。使用 fetch 时，它只返回数组中的最后一项。

如果我写 $result[$this->topic] .= $a 而不是 $result[$this->topic] = $a，则数组返回所有项目，但仅在一个字符串中。

我的数据库类中的函数，带有while循环：

```
 public function GetTopic($stmt) {

        if ($stmt->execute() == false) {
            throw new Exception($this->mysqli->error);
        }

        $stmt->bind_result($a); 
        $result = array();

        while ($stmt->fetch()) {
            $result[$this->topic] = $a;
        }

        $stmt->close();

        var_dump($result);
        return $result;
    } 
```

我的处理程序类中的函数，我从数据库类中调用函数：

```
 public function GetTopics() {

        $query = "SELECT Topic FROM question";
        $stmt = $this->db->Prepare($query);
        $result = $this->db->GetTopic($stmt);

        return $result;
    } 
```

我也尝试过使用 num_rows 和 store_result 而不是 fetch，这也不起作用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:47:24.683

```
$result[$this->topic][] = $a; 
```

# python - Ruby 等价于 Python str[3:]

> ID：12978768
> 
> 赞同：5
> 
> 时间：2012-10-19T16:45:58.520
> 
> 标签：python, ruby, substring

是否有与 Python 的方法等效的 Ruby 方法来获取以字符串结尾结尾的子字符串，例如`str[3:]`？不方便输入字符串的长度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T16:49:36.633

传递最后一个元素 = -1 的范围

```
str[3..-1] 
```

# linux - perl NET::FTP ls 给出的参数太长错误

> ID：12978776
> 
> 赞同：0
> 
> 时间：2012-10-19T16:46:15.273
> 
> 标签：linux, perl, ftp

我是 Linux 和 perl 的新手。我们的一个 linux 机器上有一个 perl 脚本，它从另一台 linux 机器下载每日生成的日志文件。该脚本在两个月前停止，现在当我尝试再次运行它时，它给出**“Net::FTP=GLOB(0x87423fc)<<< 550 Arguments too long”**错误，我在源机器上查找文件发现到目前为止已经创建了大约 36000~ 个日志文件。

出于测试目的 1.) 我使用 linux ftp 命令连接到源机器并使用 ls 列出文件，这是成功的。2.）我也登录到源机器并运行 ls 命令进入日志文件目录，它成功列出了文件。

谁能告诉为什么 perl 脚本会从服务器获取 550 错误代码以列出这些文件？

以下是我们用于下载文件的 perl 脚本的调试日志跟踪：-

```
Net::FTP>>> Net::FTP(2.77)
Net::FTP>>>   Exporter(5.58)
Net::FTP>>>   Net::Cmd(2.28)
Net::FTP>>>   IO::Socket::INET(1.31)
Net::FTP>>>     IO::Socket(1.30)
Net::FTP>>>       IO::Handle(1.27)
    Net::FTP=GLOB(0x87423fc)<<< 220 hostname.server FTP server (Version wu-2.6.2-5-ncx-1 Wed Jun 29 14:53:11 CEST 2005) ready.
    Net::FTP=GLOB(0x87423fc)>>> USER USR
    Net::FTP=GLOB(0x87423fc)<<< 331 Password required for USR.
    Net::FTP=GLOB(0x87423fc)>>> PASS ....
    Net::FTP=GLOB(0x87423fc)<<< 230 User USR logged in.  Access restrictions apply.
    Net::FTP=GLOB(0x87423fc)>>> CWD /backup
    Net::FTP=GLOB(0x87423fc)<<< 250 CWD command successful.
    Net::FTP=GLOB(0x87423fc)>>> PORT 192,168,1,154,217,0
    Net::FTP=GLOB(0x87423fc)<<< 200 PORT command successful.
    Net::FTP=GLOB(0x87423fc)>>> NLST
    Net::FTP=GLOB(0x87423fc)<<< 550 Arguments too long
    Net::FTP=GLOB(0x87423fc)>>> QUIT
    Net::FTP=GLOB(0x87423fc)<<< 221-You have transferred 0 bytes in 0 files.
    Net::FTP=GLOB(0x87423fc)<<< 221-Total traffic for this session was 393 bytes in 0 transfers.
    Net::FTP=GLOB(0x87423fc)<<< 221-Thank you for using the FTP service on hostname.server
    Net::FTP=GLOB(0x87423fc)<<< 221 Goodbye. 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:21:39.177

这通常意味着 NLST 命令（即 ls ）的结果大于为您的库预先配置的某个阈值。

# c# - MySQLConnector 在 Mono 中调用 Open() 时抛出 NullReferenceException

> ID：12978778
> 
> 赞同：0
> 
> 时间：2012-10-19T16:46:18.770
> 
> 标签：c#, mysql, mono, mysql-connector

我有一个连接到 MySQL 数据库的小项目。在 Windows 7 中，它就像一个魅力，但是当我在 Mono 中做完全相同的事情（使用 monodevelop 和本地测试 mysql 服务器）时，我得到一个`NullReferenceException`. 我查看了连接器手册和已知错误，但我没有任何线索。

也许有人知道为什么会发生这种情况：

![在此处输入图像描述](../Images/eadc1450a1ca14469a04548a13af61cc.png)

[**单击此处查看大图**](http://i50.tinypic.com/2eajhmu.png)
（monodevelop 的屏幕截图，带有错误详细信息）

```
 private static IDbConnection connection;
    private static IDbCommand command;
    private static IDataReader reader;

    public static void Init()
    {
        try
        {
            string myConnectionString = "SERVER=127.0.0.1;PORT=3306;" +
                            "Database=game;" +
                            "UID=root;" +
                            "PASSWORD=root; Pooling=false";

            connection = new MySqlConnection(myConnectionString);
            connection.ConnectionString = myConnectionString;

        }
        catch (Exception e)
        {
            Console.WriteLine("Error at creating connection: " +e.Message);
        }

    }

    public static void LoadMaps()
    {
            connection.Open();

            command = connection.CreateCommand();
            command.CommandText = "SELECT * FROM maps";

            reader = command.ExecuteReader();

            while (reader.Read())
            {
                int ID = reader.GetInt32(0);
                string Name = reader.GetString(1);
                int width = reader.GetInt32(2);
                int height = reader.GetInt32(3);
                Console.WriteLine(ID + " " + Name);

            }
            reader.Close();
            reader = null;
            command.Dispose();
            command = null;
            connection.Close();
    } 
```

编辑：很难相信，但有时它会起作用，我真的不知道为什么，尤其是因为我什么都没改变。奇怪的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T16:56:03.573

好吧，这段代码太晚了，不是吗？对象连接为空，因此您需要查看它的创建位置。

# c - 有人可以解释内部/外部变量名称吗？

> ID：12978781
> 
> 赞同：27
> 
> 时间：2012-10-19T16:46:25.493
> 
> 标签：c, variables

在 C 书中，它说：

> 至少内部名称的前 31 个字符是重要的。对于函数名和外部变量，数量可能小于 31，因为外部名称可能被语言无法控制的汇编程序和加载程序使用。对于外部名称，该标准仅保证 6 个字符和单个大小写的唯一性。if、else、int、float 等关键字是保留的：您不能将它们用作变量名。它们必须小写。

有人可以解释什么是“内部名称”、“外部名称”、“外部变量”吗？如果能举个例子就更好了。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-19T17:06:21.467

我抚摸着我的白胡子，用圣洁而浮夸的声音说：

在过去，当 FORTRAN 和 COBOL 统治着计算世界时，新贵的语言 C 必须适应现有的工具链。这些工具链包括链接编辑器（a/k/a 链接器、a/k/a 加载器）和仅处理短 6 字符符号（变量和函数）名称的汇编器。

这些工具链的 C 编译器在写出供链接编辑器使用的目标文件时，不得不假装变量和函数名称很短。那是个坏消息。好消息是 C 程序中有很多符号不需要出现在目标文件中。

例如，函数的名称......例如“main”和“sqrt”......需要显示在目标模块中，因此来自其他目标模块的代码可以使用它们。“外部”样式全局变量的名称也是如此。这些是外部名称。

但是 C 程序中的所有其他名称，例如函数范围内的变量名称、结构成员的名称等等，都不必进入目标模块。这些被称为“内部名称”。

因此，例如，您可以在函数中包含这些 C 变量

```
 int myFavoriteItem;
 int myFavoriteThing; 
```

那很好。但是您可以将它们声明为外部变量，如下所示：

```
 extern int myFavoriteItem;
 extern int myFavoriteThing; 
```

一些系统会将这些名称写到目标文件中，就好像它们有六个字母一样长（因为目标文件不知道如何处理较长的名称）。然后他们会查看目标文件，就好像他们是这样声明的。

```
 extern int myFavo;
 extern int myFavo; 
```

这些将是重复的声明。C 编译器需要捕获这种事情并抛出错误，而不是向目标文件写入重复的声明。这对程序员有很大帮助：目标文件中的重复声明会生成非常模糊的链接编辑器错误消息。

您引用的段落指定编译器必须识别至少 31 个内部名称字符和 6 个外部名称字符。现代编译器和工具链不再有不同的名称长度限制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-28T07:15:42.580

**外部名称：**

“外部”名称是对其他编译单元可见的名称，例如使用“extern”关键字声明的非静态函数和变量。这些名称必须暴露给链接器和加载器。在过去的日子里，一些链接器和加载器只能处理非常短的名称。

**内部名称：**

“内部”名称是在正在编译的模块之外不可见的名称——基本上是任何具有“静态”作用域的名称，或者是函数本地的任何名称。C 编译器必须处理这些名称，而不是其他任何东西

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T16:52:13.543

“内部名称”是函数内标识符的名称（实际上是局部变量名称）。

“外部名称”将是其他标识符的名称，包括函数名称和在全局范围内声明或使用存储类 extern 声明的任何标识符。

基本上，任何需要“外部可见”的东西都只能保证有 6 个（不区分大小写）唯一字符，这是非常有限的。

在实践中，这不再是一个问题。C99 增加了这些限制，大多数现代编译器取消或显着增加了这些限制。例如，[Visual C++](http://msdn.microsoft.com/en-us/library/e7f8y25b.aspx)在编译 C 时允许所有标识符（内部或外部）中的唯一性为 247 个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T17:08:43.483

外部名称是具有外部链接的标识符。对于具有外部链接的标识符，它必须是文件范围的非静态或明确声明的“extern”。例子：

```
int global_variable;

int main(void)
{
    int local_variable;
    extern int extern_variable;
    return 0;
} 
```

在上面的示例中，标识符`global_variable`和`extern_variable`是外部名称。`local_variable`是一个内部名称。

请注意，在实践中，重要字符的数量不仅仅是 31 和 6。例如，Microsoft 的 C 编译器默认使用 247 个重要字符作为内部和外部名称。GCC 将内部名称的所有字符视为重要字符。外部名称的重要字符取决于链接器（在大多数平台上，适用与内部名称相同的规则；所有字符都是重要的。）

ANSI 标准简单地规定了实现符合标准的有效字符的最小数量。

# php - 文档中的MongoDB默认数据

> ID：12978790
> 
> 赞同：0
> 
> 时间：2012-10-19T16:47:06.053
> 
> 标签：php, mongodb, user-profile

我不知道如何操作这种操作：

我使用 PHP 访问 mongodb。

当我必须创建用户配置文件时（当用户注册时），我想创建默认数据。

1）我每次都可以使用预填充的数组进行原始插入，我将有一个包含一大数组数组的定义，其中预填充了我的所有默认值。

2）我可以拥有一个默认文档（曾经预填充），我会将此文档复制到另一个文档并更改索引键（_id）。

当（例如）用户在网站上注册时，对默认数据进行操作的最佳方式是什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:18:11.130

通常一个好方法是使用 PHP 中的第二种方法，其中单个类代表集合中的单个文档，即您将有一个类`user`代表用户集合中的单个用户。

更进一步，我会使用 Active Record。

在此类中，您通常会使用类属性为您的行定义模式和默认值，并调用一个函数，该函数`save`会将类的属性保存为新记录。

您还可以将表单中的数据验证以及未包含在活动记录中的数据合并到 Yii 和 Lithium 以及其他一些活动记录中。

活动记录还提供了标准化跨平台和数据库的数据查询、检索和使用的基础，这总是好的。

# javascript - 当initcomponent加载存储extjs 4.1.1时视图不显示存储

> ID：12978791
> 
> 赞同：0
> 
> 时间：2012-10-19T16:47:11.797
> 
> 标签：javascript, model-view-controller, view, treeview, extjs4

使用 ExtJs 4.1.1

我有一些商店需要为特定视图的每个实例创建。所以，我在视图的 initcomponent 方法中创建这些存储。这是我正在做的一些代码重构的一部分。我试图使这个视图组件能够用多个实例进行实例化，同时让一个控制器处理所有实例。除了我的目标，这就是我正在做的事情：

一个特定的树存储填充了数据（无论如何，数据确实最终在存储中，并通过萤火虫验证）。在视图中定义了一个树视图，并将填充的树存储作为其存储。但是，当视图出现时。数据不在树视图中。我相信这可能与 initComponent 运行之前的所有静态配置加载有关，尽管我不确定。如果我能对这个过程有所了解，那将非常有帮助。我在想我说 this.store1 属于视图配置中的视图，然后在视图 initComponent 中定义 this.store1。这是错误的方法吗？？？

任何建议表示赞赏。

使用 ExtJs 4.1.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:00:49.627

只需从控制器的商店列表中删除商店的名称，因为这种机制会以某种方式干扰将 ID 分配给商店。这是我的经验中的一个例子：

```
Ext.define('Adminpanel.controller.MenuManager', {
    extend: 'Ext.app.Controller',
    stores: ['Menu'] // <-- reason
});

Ext.define('Adminpanel.view.menuManager.Tree', {
   extend: 'Ext.tree.Panel',
   initComponent: function() {
       this.store = Ext.create('Adminpanel.store.Menu'); // <-- problem
       this.callParent(arguments);
   }
}); 
```

# c - 在运行时以编程方式检查 linux 内核模块是否存在

> ID：12978794
> 
> 赞同：11
> 
> 时间：2012-10-19T16:47:31.017
> 
> 标签：c, kernel-module, system-calls

我正在编写一个 C 守护程序，它依赖于两个内核模块的存在才能完成它的工作。该程序不直接使用这些（或任何其他）模块。它只需要它们存在。因此，我想以编程方式检查这些模块是否已经加载，以便在运行时警告用户。

在我开始做解析`/proc/modules`或`lsmod`输出之类的事情之前，实用函数是否已经存在于某个地方？类似的东西`is_module_loaded(const char* name)`;

我很确定以前有人问过这个问题。但是，我认为我缺少搜索此内容的正确术语。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-19T16:58:29.110

没有这样的功能。事实上， lsmod ( `lsmod.c`) 的源代码中包含以下行，它应该会引导您找到您的解决方案：

```
file = fopen("/proc/modules", "r"); 
```

还有一个已弃用[`query_module`](http://linux.die.net/man/2/query_module)，但现在它似乎只存在于内核头文件中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T17:02:16.007

您可以使用`popen`和`lsmod | grep`欺骗：

```
 FILE *fd = popen("lsmod | grep module_name", "r");

  char buf[16];
  if (fread (buf, 1, sizeof (buf), fd) > 0) // if there is some result the module must be loaded
    printf ("module is loaded\n");
  else
    printf ("module is not loaded\n"); 
```

# java - 已删除的文件出错

> ID：12978797
> 
> 赞同：0
> 
> 时间：2012-10-19T16:47:52.107
> 
> 标签：java, tomcat, spring-mvc, netbeans

我在 tomcat 的日志窗口中遇到错误（使用 netbeans 7.2 和 tomcat 7）。我已删除该文件，但日志仍指向该文件和行号。

```
An error occurred at line: 14 in the generated java file
Only a type can be imported. com.mycomp.domain.LoginModel resolves to a package

An error occurred at line: 6 in the jsp file: /WEB-INF/jsp/header.jsp
LoginModel cannot be resolved to a type
3: <div class="header" >
4:     <!--header start here -->
5:     <%
6:         LoginModel loginModel;
7:         loginModel = (LoginModel) request.getSession(false).getAttribute("loginModel");
8:     %>
9:     <div> 
```

删除 header.jsp 后，我清理并构建了很多次，但仍然是同样的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:05:59.983

听起来项目没有自动部署到服务器。您是否检查过您的部署设置？

# java - Java中的异常和继承

> ID：12978798
> 
> 赞同：11
> 
> 时间：2012-10-19T16:47:56.820
> 
> 标签：java, exception, inheritance

假设我们有这个问题

```
public class Father{
    public void method1(){...}
}

public class Child1 extends Father{
    public void method1() throws Exception{
    super.method1();
    ... 
    }

} 
```

`Child1`扩展`Father`和覆盖`method1`，但给定的实现`Child1.method1`现在抛出异常。这不会编译，因为覆盖方法不能抛出新的异常。

什么是最好的解决方案？

*   将所需的异常传播到`Father`. 对我来说，这是反对封装、继承和一般 OOP（`Father`可能会引发永远不会发生的异常）。
*   使用 a`RuntimeException`代替？此解决方案不会传播`Exception`到`Father`，但 Oracle 文档和其他来源指出，当“客户端代码无法执行任何操作”时，应使用该类异常。不是这种情况，这个异常对恢复blablabla很有用（为什么改用是错误的`RuntimeException`？）。
*   其他..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:58:15.350

使用 RTE 并不是一个坏主意。这是 Spring 框架的方法论，它工作得很好。如果您正在实施应用程序，可能会使用此解决方案。

但是，如果您正在实现公开 API 恕我直言的库，您应该使用已检查的异常。在这种情况下，您应该创建自己的异常，例如`BaseException`。方法`method()`将`Father`抛出它。子类的定义`ChildException extends BaseException`和声明抛出它。`method1()`

这不会破坏封装：基类抛出基异常。它对具体的异常一无所知。子类抛出具体异常，但扩展了基本异常，因此客户端代码可以将其视为基本异常。

作为一个例子，我可以给你`IOException`并`FileNotFoundException`扩展它。您可以`IOException`在具体流存在`FileInputStream`并且抛出时使用输入流捕获`FileNotFoundException`。但客户不知道这一点。它抓住了`IOException`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:01:13.630

*如果超类方法未声明异常，则子类重写方法不能声明已检查异常*。所以你只能使用未经检查的异常。

其他选项是允许 Super 类声明`ParentException`，然后子覆盖方法可以声明任何属于子类的异常`ParentException`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T16:57:21.230

取决于在 Child1 中引发异常的原因。如果它有一些先决条件等，您始终可以使用 RuntimeException 的任何子类，例如 IllegalArgumentException。

但是，如果存在某种 CheckedException，那么逻辑建议您应该使用该方法本身来处理它并以其他方式冒泡消息。

我认为一般的经验法则是

如果您知道如何处理它.. 使用已检查的异常，否则使用未检查的异常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T16:54:42.183

“抛出”部分是方法签名的一部分。
这就是为什么“子”类的方法不是父类方法的覆盖。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T17:05:20.123

> 将所需的异常传播给父亲..对我来说，这是反对封装、继承和一般 OOP（父亲可能会抛出和永远不会发生的异常）

Au contraire：这*很好*OO。对调用方进行映像：

```
Father f = factory.getSomeImplementation();
f.method1();
// user has no chance to see the `Exception` of Child coming... 
```

工厂可以返回 or 的实例`Father`或`Child`完全不同的东西，例如`Brother`. 但在*所有*`method1`情况下，合同必须相同。并且此合同包括已检查的异常。这就是里氏替换原则，是面向对象的基本规则之一。

 *因此，如果异常是业务合同的一部分，`method1` 则必须在根处声明。如果不是（例如简单的参数检查），那么`RuntimeException`无论如何 a 都是要走的路线（即即使没有继承）。*

# c# - 如何静态扫描所有 C# 代码以查找字符串格式参数错误

> ID：12978802
> 
> 赞同：6
> 
> 时间：2012-10-19T16:48:14.323
> 
> 标签：c#, static-analysis, string.format

我们有数千条使用 log4net 库和字符串格式方法调用编码的不同日志消息。

这样做的一个问题是，如果 {0}、{1}、{2} 等字符串格式参数的方法参数数量正确，我们只会在运行时收到错误。

其中许多方法仅在自动化测试期间很少或从未发生的错误条件下被调用。

那么是否有任何工具可以扫描所有 C# 代码并通知任何字符串格式问题？

注意：我在静态代码分析中看到了许多其他问题，这些问题看起来是重复的，但是在查看了其中一些工具之后，它们似乎无法处理这种特定情况。

如果对此没有什么真正的好处，我们将在内部编写此工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:50:46.850

[FxCop/代码分析可以做到这一点](http://msdn.microsoft.com/en-us/library/ms182361.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T16:51:03.760

我们正在使用VS2012。它内置的代码分析工具帮助我们识别所有这些类型的问题。

# android - 我可以使用 styles.xml 设置我的操作栏的主页图标吗？

> ID：12978809
> 
> 赞同：14
> 
> 时间：2012-10-19T16:48:43.777
> 
> 标签：android, actionbarsherlock

我在我的应用程序上使用以下代码将我的主页图标设置为特定的可绘制对象：

```
getSupportActionBar().setDisplayHomeAsUpEnabled(true);
getSupportActionBar().setIcon(R.drawable.ic_menu);
getSupportActionBar().setDisplayShowTitleEnabled(false); 
```

但是我在“创建装饰视图和我的 onCreate 执行”之间遇到了“滞后”问题，正如 Jake Wharton 在这里解释的那样：[ActionBar Lag in hidden title](https://stackoverflow.com/questions/10525734/actionbar-lag-in-hiding-title)

在上面的链接上，解决方案是创建一个新样式，并在 Manifest 中声明它，所以我这样做了：

```
<resources>
<style name="AppTheme" parent="android:Theme.Light" />

<style name="WATheme" parent="Theme.Sherlock.Light">
    <item name="android:actionBarStyle">@style/WATheme.ActionBar</item>
    <item name="actionBarStyle">@style/WATheme.ActionBar</item>
</style>

<style name="WATheme.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid">
    <item name="android:displayOptions">homeAsUp|showHome</item>
    <item name="displayOptions">homeAsUp|showHome</item>
</style>
</resources> 
```

显现：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:theme="@style/WATheme"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

现在工作正常，我的主页按钮配置为向上，但我仍想将图标更改为另一个特定的可绘制对象，仅在此活动中，而无需更改`android:icon`清单中的任何内容。我怎样才能做到这一点？

希望它足够清楚。谢谢你。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-20T00:53:55.590

好吧，只要弄清楚缺少什么。在styles.xml 上，我所要做的就是添加以下几行：

```
<item name="android:icon">@drawable/ic_menu</item>
<item name="icon">@drawable/ic_menu</item> 
```

所以最后我有这样的事情：

```
<resources>
<style name="AppTheme" parent="android:Theme.Light" />

<style name="WATheme" parent="Theme.Sherlock.Light">
    <item name="android:actionBarStyle">@style/WATheme.ActionBar</item>
    <item name="actionBarStyle">@style/WATheme.ActionBar</item>
    <item name="android:icon">@drawable/ic_menu</item>
    <item name="icon">@drawable/ic_menu</item>
</style>

<style name="WATheme.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid">
    <item name="android:displayOptions">homeAsUp|showHome|showTitle</item>
    <item name="displayOptions">homeAsUp|showHome|showTitle</item>
</style>
</resources> 
```

它现在工作得很好，所有 displayOptions 都正确设置并且没有“滞后”。:)

# r - 如何计算属于某个值范围的数据点的百分比？

> ID：12978810
> 
> 赞同：4
> 
> 时间：2012-10-19T16:48:59.233
> 
> 标签：r

给定一个值表（比如 0 到 100 之间）和附图，使用 R 计算有多少数据点落在值 20 到 60 之间（图像中的红色框）的最简单方法是什么？

有没有办法使用 R 的绘图功能创建那个红色框（我是使用图像编辑器完成的......）？

谢谢您的帮助。 ![在此处输入图像描述](../Images/8648b31aa0d45668f6d9110b0d2ac1cb.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T16:53:38.597

要计算包含在区间内的概率质量：

```
x <- rnorm(1e6)  ## data forming your empirical distribution
ll <- -1.96      ## lower bound of interval of interest
ul <- 1.96       ## upper bound of interval of interest

sum(x > ll & x < ul)/length(x)
# [1] 0.949735 
```

* * *

然后绘制直方图和红色框：

```
h <- hist(x, breaks=100, plot=FALSE)       # Calculate but don't plot histogram
maxct <- max(h$counts)                     # Extract height of the tallest bar
## Or, if you want the height of the tallest bar within the interval
# start <- findInterval(ll, h$breaks)
# end   <- findInterval(ul, h$breaks)
# maxct <- max(h$counts[start:end])

plot(h, ylim=c(0, 1.05*maxct), col="blue") # Plot, leaving a bit of space up top

rect(xleft = ll, ybottom = -0.02*maxct,    # Add box extending a bit above
     xright = ul, ytop = 1.02*maxct,       # and a bit below the bars
     border = "red", lwd = 2) 
```

![在此处输入图像描述](../Images/ebcfa0e90bc86749ec3c2475e4f2abd6.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-19T16:58:53.197

```
set.seed(42) 
x <- rlnorm(5000) #some data
hist(x) #histogram
rect(7,-50,10,100,border="red") #red rectangle
table(cut(x,breaks=c(0,7,10,Inf)))/length(x) #fraction of values in intervals
#(0,7]    (7,10]   (10,Inf] 
#0.9754   0.0136   0.0110 
```

`Cut`根据它们所属的区间对值进行分类。`table`然后创建一个计数表，然后可以将其除以总计数`length(x)`。

# ruby - 如何确定文件已写入？

> ID：12978825
> 
> 赞同：1
> 
> 时间：2012-10-19T16:49:55.313
> 
> 标签：ruby, file-io

我有以下 Ruby/Rails 代码：

```
file = File.new("#{folder}/conf.txt", 'a+')
file.write(content)
file.close 
```

问题是有时会创建此文件但它是空的，而我确定内容变量不为空（它也用于代码的另一部分）。

如何确定文件已写入？由于这是我的应用程序中的重要一步，如果无法编写，我想得到一个异常或某种错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T16:51:45.327

从原始数据进行往返，将其写入文件，然后从文件中读取。如果它与原始内容匹配，则可以确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:54:19.460

感谢所有回答问题的人，并对没有引起注意，但在发布问题 1 天后，我开始在 Apache 日志中注意到这样的错误（我使用的是 Passenger + Apache）：

```
[ pid=21526, timestamp=1350608946 ] Process aborted! signo=SIGABRT(6), reason=SI_TKILL, signal sent by PID 21526 with UID 0, backtrace available.
--------------------------------------
[ pid=21526 ] Backtrace with 34 frames:
PassengerHelperAgent[0x525668]
/lib64/libpthread.so.0(+0xf4c0)[0x7fcabb2014c0]
/lib64/libc.so.6(gsignal+0x35)[0x7fcaba7059a5]
/lib64/libc.so.6(abort+0x175)[0x7fcaba707185]
big backtrace... 
```

我搜索了这个问题，但找不到任何有类似问题/回溯的人。

他们，我决定搬到Passenger + Nginx。

1周后，问题就消失了。过去一天发生一两次的事情，在 Nginx 中一次都没有发生。相同的代码（根本没有更新）和相同的机器。

虽然我无法重现这个问题，但在我调查它的过程中，我用“File.close”方法做了几个测试。只要无法写入文件，它就会抛出异常。

不幸的是，我没有足够的经验来研究这个问题，我对 Nginx +Passenger 相当满意。

# android - 写入时显示对话框并且不阻塞 UI

> ID：12978826
> 
> 赞同：0
> 
> 时间：2012-10-19T16:49:57.070
> 
> 标签：android, dialog, android-alertdialog, textwatcher

当我开始用我的软键盘打字时，我试图显示一个带有两个按钮的对话框。是否可以避免对话框阻塞 UI，所以我可以在对话框仍然存在的情况下继续编写？

我还想知道如何使用 TextWatcher 检测空格键击键。

我目前的进展是：

我为我的编辑文本设置了一个 addTextChangedListener，当我开始输入对话框时，会弹出，但不能继续写。

```
private TextWatcher textwatcher = new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before,
            int count) {

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count,
            int after) {
        AlertDialog.Builder builder = new AlertDialog.Builder(
                MainActivity.this);

        builder.setMessage("What do you want to add?")
                .setPositiveButton("Add #",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {

                            }
                        })
                .setNegativeButton("Add @",
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {

                            }
                        });

        AlertDialog dialog = builder.create();
        dialog.setCanceledOnTouchOutside(false);
        dialog.show();
    }

    @Override
    public void afterTextChanged(Editable s) {

    }

}; 
```

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:04:08.270

为什么需要显示对话框？

需要用户操作的侵入式机制中的对话。非侵入式方法是使用[Toast](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)。

# java - 继承无效

> ID：12978827
> 
> 赞同：0
> 
> 时间：2012-10-19T16:49:57.880
> 
> 标签：java, inheritance

嘿，我只是在练习继承，我遇到了一个问题。我的汽车类（子类）中出现错误，即车辆（父类）中的变量不可见。我没有做任何事情来改变这一点，我什至不知道如何让它不可见。谁能帮我这个。

```
public class Vehicle 
{
    private String make, model, colour;
    private int registrationNumber;

    public Vehicle()
    {
        this.make = "";
        this.model = "";
        this.colour = "";
        this.registrationNumber = 0;

    }

    public Vehicle(String make, String model, String colour,
            int registrationNumber) 
    {
        this.make = make;
        this.model = model;
        this.colour = colour;
        this.registrationNumber = registrationNumber;
    }

    public String getMake() 
    {
        return make;
    }

    public void setMake(String make) 
    {
        this.make = make;
    }

    public String getModel() 
    {
        return model;
    }

    public void setModel(String model) 
    {
        this.model = model;
    }

    public String getColour() 
    {
        return colour;
    }

    public void setColour(String colour) 
    {
        this.colour = colour;
    }

    public int getRegistrationNumber() 
    {
        return registrationNumber;
    }

    public void setRegistrationNumber(int registrationNumber) 
    {
        this.registrationNumber = registrationNumber;
    }

    public String toString() 
    {
        return "Vehicle [make=" + make + ", model=" + model + ", colour="
                + colour + ", registrationNumber=" + registrationNumber + "]";
    }

}

public class Car extends Vehicle
{
private int doors;
private String shape;

public Car()
{
    super();
    this.doors = 0;
    this.shape = "";
}

public Car(String make, String model, String colour, int registrationNumber) 
{
    super(make, model, colour, registrationNumber);
    this.make = make;
    this.model = model;
    this.colour = colour;
    this.registrationNumber = registrationNumber;

}

} 
```

错误信息：

```
Description Resource    Path    Location    Type
The field Vehicle.make is not visible   Car.java    /VehicleApp/src line 19 Java Problem
The field Vehicle.model is not visible  Car.java    /VehicleApp/src line 20 Java Problem
The field Vehicle.colour is not visible Car.java    /VehicleApp/src line 21 Java Problem
The field Vehicle.registrationNumber is not visible Car.java    /VehicleApp/src line 22 Java Problem 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T16:52:07.347

“问题”是变量是`private`，因此子类不可用。大概您正在尝试直接在其中访问它们`Car`（很难说，因为您没有包含源代码）。

您*可以*将它们设置为受保护的变量 - 但我强烈建议您将它们保留为`private`，而是使用子类中的属性（get 和 set 方法）。字段是一个实现细节——您应该考虑向子类以及其他代码公开哪些*API 。*

有关 Java 中访问控制的更多详细信息，请参阅[JLS 第 6.6 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.6)。例如：

> 否则，如果声明了成员或构造函数`private`，则当且仅当它出现在包含成员或构造函数声明的顶级类（第 7.6 节）的主体内时，才允许访问。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T16:51:15.633

`private`变量将不可见。它们仅限于定义它们的类。`protected`变量（和函数）将对子类可见。

改变：

```
private String make, model, colour;
private int registrationNumber; 
```

到

```
protected String make, model, colour;
protected int registrationNumber; 
```

我建议不要将它们保密，因为这意味着`Car`不会从`Vehicle`. 强制 a调用它自己的父级的 getter 和 setter 会在and`Car`之间引入一个差距。它的意思是说 a没有颜色、品牌、型号或注册号，但它必须去一个单独的班级 ( ) 并向班级询问它的颜色、品牌、型号和注册号。`Car``Vehicle``Car``Vehicle`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T16:51:26.060

您的`Vehicle`成员是*私有*的。`Vehicle`因此，除了班级之外，任何人都看不到它们。有关更多详细信息，请参见[此处](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T17:15:01.747

当您使用超级构造函数时，您不需要而且实际上也不应该设置父字段，因为`super(...)`构造函数调用将为您执行此操作。

```
public Car(String make, String model, String colour, int registrationNumber) 
{
    super(make, model, colour, registrationNumber);

    // get rid of these:
    // this.make = make;
    // this.model = model;
    // this.colour = colour;
    // this.registrationNumber = registrationNumber;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-19T16:58:18.970

变量：

`private`表示该变量仅在该类中可见。例如

```
Class foo {
    private Object a; //a can only be accessed within foo.
} 
```

`protected`表示该类和继承的类。例如

```
Class foo {
    protected Object a;
}

Class bar extends foo {
    public bar () {
        a = someVariable;
    }
} 
```

`public`表示可以访问该类对象的所有类。例如

```
Class foo{
    public Object a;
}

Class bar{
    public bar(){
        foo foo = new foo();
        foo.a = someVariable;
    }
} 
```

# android - Android onPause 问题

> ID：12978829
> 
> 赞同：0
> 
> 时间：2012-10-19T16:49:59.877
> 
> 标签：android

我的应用程序中有一个搜索功能，我有一个名为 SearchPage2.java 的搜索活动，还有另一个活动 (SearchTaDa.java)，它在单击列表项时显示更多信息。我发现我无法在 SearchPage2.java 中调用`finish()`，`onPause()`因为我希望 ListView 在您按下 SearchTaDa.java 中的软件后退按钮（或硬件后退按钮）时仍然可见。但是因为我没有`finish()`在 SearchPage2.java 中调用，所以当您按下硬件主页按钮退出应用程序，然后重新启动应用程序时，它会直接返回 SearchPage2 活动，而不是从启动屏幕重新启动应用程序，开始应用程序。所以 SearchPage2 onPause 看起来像：

```
 @Override
protected void onPause() {
    super.onPause();
    overridePendingTransition(R.anim.fadein, R.anim.fadeout);
} 
```

和更多信息活动，SearchTaDa.java onPause 看起来像：

```
 @Override
protected void onPause() {
    super.onPause();
    overridePendingTransition(R.anim.fadein, R.anim.fadeout);
    finish();
} 
```

我的问题是我可以在 SearchPage2 活动中调用什么，以便当您重新启动应用程序时它会重新开始，并且不会在搜索页面恢复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:00:02.683

设置全局标志“destroyOnResume”，如果设置了标志，则调用 finish [onResume 。](http://developer.android.com/reference/android/app/Activity.html#onResume%28%29)

更详细：

在代码中的某处，您确定 SearchPage2Activity 是否应该在下次调用时完成并调整您的标志，该标志位于代码中的某处，例如作为全局成员......

```
public static boolean destroySearchPage2OnResume = false; 
```

或将其放入您的[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)中，即使在应用程序被杀死时也能坚持这一点。

在 SearchPage2.java 中，您覆盖 onResumeMethod，当您的应用程序进入后台时，该方法在 onRestart() 或 onPause() 之后被调用。如果您的标志设置为 true，您将立即完成 SearchPage2 活动。

```
@Override
protected void onResume () {
   super.onPause();
   if(destroySearchPage2OnResume){
   this.finish();
   }  
} 
```

顺便说一句，用[no-history-flag](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY)调用你的活动会更干净，而不是在暂停时杀死它......

# c++ - Boost asio tcp，为什么我的服务器端只有一个可以打开和关闭的数据套接字

> ID：12978832
> 
> 赞同：5
> 
> 时间：2012-10-19T16:50:12.263
> 
> 标签：c++, sockets, boost, tcp, boost-asio

简而言之，我的问题是，如果您有一个只有一个活动连接的 tcp 服务器，您是否可以只创建一个服务器端数据套接字。在所有教程中，我看到创建了一个新套接字，但我不明白为什么会这样。为什么不创建一个服务器端套接字，然后打开、关闭、重置它（我最初希望 async_accept 以某种方式做到了）？

更详细地说：

我已经完成了异步日间服务器的 boost asio 教程，并且可以让它编译和工作。我什至可以为我的应用程序修改它并让它按照我的意愿运行:)。但是，我原来的方法没有用，我不明白为什么我希望你能帮上忙。

基本上，我想创建一个 TCP 服务器，它只接受一个 TCP 客户端并忽略所有其他客户端，除非第一个客户端断开连接。我使用acceptor.close() 和acceptor.open() 做到了这一点，这样当第一个连接被接受时，我就关闭了acceptor，然后每当我发现一个eof 错误时，我就重新打开了acceptor 来监听新的连接。我天真地认为，因为我只想要一个活动连接，我只需要创建一个：

```
boost::asio::ip::tcp::socket socket_ 
```

因为我只有一个数据套接字从客户端接收数据，所以按照教程创建一个完整的 tcp_connection 类似乎有点过头了，据我所知，它只返回了一个用 io_service 构造的新套接字。（在本教程中，我认为每次服务器接受新连接时，都会使用此代码创建一个新套接字）：

```
class tcp_connection
  : public boost::enable_shared_from_this<tcp_connection>
{
 public:
  typedef boost::shared_ptr<tcp_connection> pointer;

  static pointer create(boost::asio::io_service& io_service)
  {
    return pointer(new tcp_connection(io_service));
  }

  tcp::socket& socket()
  {
    return socket_;
  }

 private:
  tcp_connection(boost::asio::io_service& io_service)
    : socket_(io_service)
  {
  }

  tcp::socket socket_;
  std::string message_;
}; 
```

因此，我尝试只使用一个 boost::asio::ip::tcp::socket。我在我的服务器类的构造函数中使用 io_service 以与上面的教程类似的方式对其进行了初始化。我的测试表明我的第一个客户端会连接，只有在第一个客户端断开连接后，第二个客户端才会连接。但是，无论我做了什么， async_accept(socket_,.....) 调用上的数据缓冲区永远不会被填满。最初我只是不断收到 eof 错误，然后我尝试关闭 socked 并重新打开它删除了 eof 错误并给出了传输端未连接错误。显然我在这里做了一些非常愚蠢的事情，但我看不出从哲学上讲我正在尝试做的事情有什么问题。当我使用教程技术创建一个新套接字时，一切都按预期工作。

所以我的问题是我可以只有一个套接字并执行取消、关闭、打开之类的操作吗？我是要绑定还是其他什么，但那不是 async_accept 工作吗？

我现在只使用了一周的 boost asio，这是我第一次在这样的论坛上发帖，所以对我来说放轻松;)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T18:37:57.180

你可以，但你不能。

没有理由不能像您所说的那样实现 TCP，但我所知道的操作系统都没有这样做。

原因很简单，因为操作系统*必须*支持多个并发连接，因此这是决定实现的设计要求。要实现“只能有一个”的情况，只需在成功接受新连接后关闭侦听器套接字，稍后再重新打开即可。通常不值得为此付出努力。

您描述的开销很小，不值得尝试优化。

# c# - 另一种测量物体大小的方法

> ID：12978834
> 
> 赞同：1
> 
> 时间：2012-10-19T16:50:19.887
> 
> 标签：c#, memory, serialization

搜索 Google 和 StackOverFlow 会找到很多关于这个问题的参考资料。包括例如：

[在 .NET 中确定复杂对象大小的方法？](https://stackoverflow.com/questions/3057181/ways-to-determine-size-of-complex-object-in-net)

[如何获取内存中的对象大小？](https://stackoverflow.com/questions/605621/how-to-get-object-size-in-memory)

因此，让我在开始时说，我理解通常不可能获得准确的测量结果。但是我并不担心——我正在寻找能给我相对价值而不是绝对价值的东西。因此，如果他们以一种或另一种方式偏离了一点，那也没关系。

我有一个复杂的对象图。它由一个单亲 (T) 和可能有孩子的孩子组成，依此类推。图中的所有对象都来自同一个基类。childrean 是 List T 的形式。

我已经尝试过序列化方法和不安全方法来计算大小。他们给出了不同的答案，但在这两种情况下，“相对”问题是相同的。

我假设父对象的大小将大于子对象大小的总和。事实证明这不是真的。我计算了父母的大小。然后总结了孩子们的大小。在某些情况下，这似乎是有道理的，但在其他情况下，孩子的总和远远超过为父母确定的大小。

所以我的问题是：为什么我的简单假设是序列化对象会导致大小小于子对象的总和。我想出的唯一答案是每个序列化对象都有一个固定的开销（我想这是不言而喻的），并且这些总和可以超过父对象的“自身大小”。如果是这样，有什么方法可以确定该开销可能是多少，以便我可以考虑到它？

非常感谢您的任何建议。

**编辑** 对不起我忘了说所有对象都标记为可序列化序列化方法是：

```
var bf = new BinaryFormatter();
            var ms = new MemoryStream();
            bf.Serialize(ms, testObject);
            byte[] array = ms.ToArray();
            return array.Length; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:59:46.663

这实际上取决于您用于序列化对象的序列化机制。它可能没有序列化子元素，这就是为什么您会看到父大小小于子元素的总和（可能甚至小于每个单独的子元素）的原因之一。

如果您想知道对象的相对大小，请确保您正在序列化图中*所有对象的所有**字段*。

 ***编辑**：因此，如果您使用的是二进制格式化程序，那么您必须查看该序列化程序使用的格式规范以了解开销。格式规范是公开的，可以在[http://msdn.microsoft.com/en-us/library/cc236844(prot.20).aspx](http://msdn.microsoft.com/en-us/library/cc236844(prot.20).aspx)找到。它不是很容易消化，但如果你愿意花时间去理解它，你会确切地发现每个对象在其序列化形式中会有多少开销。*

# html - 图像定位

> ID：12978839
> 
> 赞同：2
> 
> 时间：2012-10-19T16:50:29.170
> 
> 标签：html, css, image, position

我试图为一个网络项目制作一个图像网格，我打算做的是以下内容。！ [图片](http://fc01.deviantart.net/fs70/f/2012/293/2/3/doubt_by_dranes-d5idgqd.png) 所有的盒子都是图片，我需要覆盖 div 宽度的 50% 和高度的 100% [白框]。红色框将覆盖 div 宽度的 25% 和高度的 50%。我已经尝试使用图像位置和表格，这就是我得到 的[图像](http://fc07.deviantart.net/fs71/f/2012/293/4/1/try_by_dranes-d5idgxw.png)，我想知道是否有更好的方法来制作这个。感谢您的帮助和时间:)

* * *

```
 <div class="source_miu">
                <table border="1">
                    <tr>
                        <th rowspan="2"><img src="http://ns223506.ovh.net/rozne/a0983fdf5e6616a0e8515ad95ef1e10e/wallpaper-664645.jpg"></th>
                        <td><img src="http://ns223506.ovh.net/rozne/a039b13699e8fcfd8f6c676279355546/wallpaper-357877.jpg"></td>
                        <td><img src="http://ns223506.ovh.net/rozne/5c5b16fd81a613372f43fdf0f89235d4/wallpaper-988986.jpg"></td>
                    </tr>
                    <tr>
                        <td><img src="http://ns223506.ovh.net/rozne/1ce14f71e1b760232ddb978a60ef6383/wallpaper-664196.jpg"></td>
                        <td><img src="http://ns223506.ovh.net/rozne/9353f6e8133cc441f096552bbdbe8ebd/wallpaper-69508.jpg"></td>
                    </tr>

                </table>
            </div> 
```

* * *

CSS

```
 .source_miu{
    width:100%;
    padding:2%;
    background-color: #3c3c3c;
    }
    .source_miu table{
    width: 100%;
    }
   .source_miu table{
    padding: 0;
    margin: 0;
    width: 100%;
    }
   .source_miu table th{
   height: 50%;
   width:50%;
   }
   .source_miu table td{
   width: 25%;
   height: 50%;
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T16:57:35.023

这应该工作，[小提琴](http://jsfiddle.net/ShvVW/)。

## HTML

```
<div class="container">
    <div class="left">
        <img src="http://fc07.deviantart.net/fs71/f/2012/293/4/1/try_by_dranes-d5idgxw.png" />
    </div>
    <div class="right">
        <img src="http://fc07.deviantart.net/fs71/f/2012/293/4/1/try_by_dranes-d5idgxw.png" />
        <img src="http://fc07.deviantart.net/fs71/f/2012/293/4/1/try_by_dranes-d5idgxw.png" />
        <img src="http://fc07.deviantart.net/fs71/f/2012/293/4/1/try_by_dranes-d5idgxw.png" />
        <img src="http://fc07.deviantart.net/fs71/f/2012/293/4/1/try_by_dranes-d5idgxw.png" />
    </div>
</div>​ 
```

## CSS

```
.container .left, .container .right
{
    display: inline-block;
    width: 50%;
    float: left;
}

.container .left img
{
    width: 100%;
}

.container .right img
{
    display: inline-block;
    width: 50%;
    float: right;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:58:44.727

好吧，您可以确定图片的大小（以像素为单位），这样您就可以确保 25% 的图像具有相同的宽度和高度。

50px 仅用于示例。您可以玩它并尝试直到获得适合您的尺寸。

```
<img src="your image.jpg" width="50px" height="50px"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:11:37.783

这也应该有效，避免使用`display:inline-block;`which 不适用于 IE7 或更低版本——尽管没关系也没关系；）

[http://jsfiddle.net/H5npz/](http://jsfiddle.net/H5npz/)

### 标记：

```
<div class="panels">
  <img class="a" src="/favicon.png" />
  <img class="b" src="/favicon.png" />
  <img class="b" src="/favicon.png" />
  <img class="b" src="/favicon.png" />
  <img class="b" src="/favicon.png" />
</div> 
```

### CSS：

```
.panels {
  oveflow: hidden;
  width: 400px;
  height: 250px;    
}

.panels .a, .panels .b {
   float: left;
   display: block;
   margin: 0;
   padding: 0;
}

.panels .a {
   width: 50%;
   height: 100%;
}

.panels .b {
   width: 25%;
   height: 50%;
} 
```

# python - Python在OS X中获取屏幕像素值

> ID：12978846
> 
> 赞同：10
> 
> 时间：2012-10-19T16:50:46.087
> 
> 标签：python, macos, automation, ui-automation

我正在 OS X 10.8.2 上用 Python 构建自动化游戏机器人，在研究 Python GUI 自动化的过程中，我发现了 autopy。鼠标操作 API 很棒，但屏幕捕获方法似乎依赖于已弃用的 OpenGL 方法......

是否有任何有效的方法可以在 OS X 中获取像素的颜色值？我现在能想到的唯一方法是使用`os.system("screencapture foo.png")`，但这个过程似乎有不必要的开销，因为我会很快轮询。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-23T06:24:39.397

一个小的改进，但使用 TIFF 压缩选项`screencapture`会更快一些：

```
$ time screencapture -t png /tmp/test.png
real        0m0.235s
user        0m0.191s
sys         0m0.016s
$ time screencapture -t tiff /tmp/test.tiff
real        0m0.079s
user        0m0.028s
sys         0m0.026s 
```

正如您所说，这确实有很多开销（子进程创建，从磁盘写入/读取，压缩/解压缩）。

相反，您可以使用 PyObjC 使用`CGWindowListCreateImage`. 我发现捕获一个 1680x1050 像素的屏幕大约需要 70 毫秒（~14fps），并且可以在内存中访问这些值

一些随机的笔记：

*   导入`Quartz.CoreGraphics`模块是最慢的部分，大约 1 秒。导入大多数 PyObjC 模块也是如此。在这种情况下不太重要，但对于短暂的进程，您可能最好在 ObjC 中编写该工具
*   指定一个较小的区域会更快一些，但不是很大（对于 100x100 像素块约 40 毫秒，对于 1680x1050 约 70 毫秒）。大部分时间似乎都花在了`CGDataProviderCopyData`调用上——我想知道是否有办法直接访问数据，因为我们不需要修改它？
*   该`ScreenPixel.pixel`功能非常快，但访问大量像素仍然很慢（因为`0.01ms * 1650*1050`大约需要 17 秒） - 如果您需要访问大量像素，可能`struct.unpack_from`一次性更快地访问它们。

这是代码：

```
import time
import struct

import Quartz.CoreGraphics as CG

class ScreenPixel(object):
    """Captures the screen using CoreGraphics, and provides access to
    the pixel values.
    """

    def capture(self, region = None):
        """region should be a CGRect, something like:

        >>> import Quartz.CoreGraphics as CG
        >>> region = CG.CGRectMake(0, 0, 100, 100)
        >>> sp = ScreenPixel()
        >>> sp.capture(region=region)

        The default region is CG.CGRectInfinite (captures the full screen)
        """

        if region is None:
            region = CG.CGRectInfinite
        else:
            # TODO: Odd widths cause the image to warp. This is likely
            # caused by offset calculation in ScreenPixel.pixel, and
            # could could modified to allow odd-widths
            if region.size.width % 2 > 0:
                emsg = "Capture region width should be even (was %s)" % (
                    region.size.width)
                raise ValueError(emsg)

        # Create screenshot as CGImage
        image = CG.CGWindowListCreateImage(
            region,
            CG.kCGWindowListOptionOnScreenOnly,
            CG.kCGNullWindowID,
            CG.kCGWindowImageDefault)

        # Intermediate step, get pixel data as CGDataProvider
        prov = CG.CGImageGetDataProvider(image)

        # Copy data out of CGDataProvider, becomes string of bytes
        self._data = CG.CGDataProviderCopyData(prov)

        # Get width/height of image
        self.width = CG.CGImageGetWidth(image)
        self.height = CG.CGImageGetHeight(image)

    def pixel(self, x, y):
        """Get pixel value at given (x,y) screen coordinates

        Must call capture first.
        """

        # Pixel data is unsigned char (8bit unsigned integer),
        # and there are for (blue,green,red,alpha)
        data_format = "BBBB"

        # Calculate offset, based on
        # http://www.markj.net/iphone-uiimage-pixel-color/
        offset = 4 * ((self.width*int(round(y))) + int(round(x)))

        # Unpack data from string into Python'y integers
        b, g, r, a = struct.unpack_from(data_format, self._data, offset=offset)

        # Return BGRA as RGBA
        return (r, g, b, a)

if __name__ == '__main__':
    # Timer helper-function
    import contextlib

    @contextlib.contextmanager
    def timer(msg):
        start = time.time()
        yield
        end = time.time()
        print "%s: %.02fms" % (msg, (end-start)*1000)

    # Example usage
    sp = ScreenPixel()

    with timer("Capture"):
        # Take screenshot (takes about 70ms for me)
        sp.capture()

    with timer("Query"):
        # Get pixel value (takes about 0.01ms)
        print sp.width, sp.height
        print sp.pixel(0, 0)

    # To verify screen-cap code is correct, save all pixels to PNG,
    # using http://the.taoofmac.com/space/projects/PNGCanvas

    from pngcanvas import PNGCanvas
    c = PNGCanvas(sp.width, sp.height)
    for x in range(sp.width):
        for y in range(sp.height):
            c.point(x, y, color = sp.pixel(x, y))

    with open("test.png", "wb") as f:
        f.write(c.dump()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-16T04:49:31.273

我在寻找在 Mac OS X 中用于实时处理的屏幕截图的解决方案时遇到了这篇文章。我已尝试按照其他一些帖子中的建议使用 PIL 的 ImageGrab，但无法足够快地获取数据（只有大约 0.5 fps）。

这篇文章中使用 PyObjC的答案[https://stackoverflow.com/a/13024603/3322123拯救了我的一天！](https://stackoverflow.com/a/13024603/3322123)谢谢@dbr！

但是，我的任务需要获取所有像素值而不仅仅是单个像素，并且还要评论@dbr 的第三个注释，我在此类中添加了一个新方法来获取完整图像，以防其他人可能需要它.

图像数据以维度为 (height, width, 3) 的 numpy 数组返回，可直接用于 numpy 或 opencv 等中的后处理……使用 numpy 索引从中获取单个像素值也变得非常简单。

我用 1600 x 1000 的屏幕截图测试了代码——在我的 Macbook 上，使用 capture() 获取数据大约需要 30 毫秒，然后将其转换为 np 数组 getimage() 只需大约 50 毫秒。所以现在我有 >10 fps 并且对于较小的区域甚至更快。

```
import numpy as np

def getimage(self):
    imgdata=np.fromstring(self._data,dtype=np.uint8).reshape(len(self._data)/4,4)
    return imgdata[:self.width*self.height,:-1].reshape(self.height,self.width,3) 
```

请注意，我从 BGRA 4 通道中丢弃了“alpha”通道。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-09-24T02:18:24.040

这一切都非常有帮助，我不得不回来发表评论/但是我没有声誉。但是，我确实有一个示例代码，它结合了上述答案，可以快速截屏/保存，这要归功于@dbr 和 @qqg！

```
import time
import numpy as np
from scipy.misc import imsave
import Quartz.CoreGraphics as CG

image = CG.CGWindowListCreateImage(CG.CGRectInfinite, CG.kCGWindowListOptionOnScreenOnly, CG.kCGNullWindowID, CG.kCGWindowImageDefault)

prov = CG.CGImageGetDataProvider(image)
_data = CG.CGDataProviderCopyData(prov)

width = CG.CGImageGetWidth(image)
height = CG.CGImageGetHeight(image)

imgdata=np.fromstring(_data,dtype=np.uint8).reshape(len(_data)/4,4)
numpy_img = imgdata[:width*height,:-1].reshape(height,width,3)
imsave('test_fast.png', numpy_img) 
```

# ios - 企业无线分发不工作 iOS 5.1.1

> ID：12978847
> 
> 赞同：2
> 
> 时间：2012-10-19T16:50:47.007
> 
> 标签：ios, xcode, ipad, ios5, enterprise-distribution

我一直在寻找，似乎无法找到答案。我希望这里有人可以提供帮助。我对 iOS 应用程序开发有点陌生，所以如果我的术语不对，请多多包涵。

我正在为我工​​作的公司开发一个内部企业 iPad 应用程序。我们有一个企业开发人员帐户，并且我们已经创建了所有必要的证书和分发配置文件（分发证书、分发配置文件）。我们的目标是在我们的一个网站上使用无线分发方法。我已经根据 Apple 的说明创建了必要的文件（.ipa 和清单 .plist）并上传并链接到清单文件。

当我使用运行 iOS 6 的 iPad 测试无线分发方法时，它可以完美运行。当我尝试在运行 iOS 5.1.1 的 iPad 上进行测试时，我得到“无法下载应用程序”，选项为“完成”或“重试”。单击“重试”似乎没有帮助。

xCode 中应用程序的构建设置设置为

**基础 SDK：最新 iOS (iOS 6.0)**

**iOS 部署目标：4.3**

我已经尝试过 Apple 针对无线分发的故障排除建议。我能够使用 Apple Configurator 在 5.1.1 设备上成功安装该应用程序，因此我知道该应用程序实际上可以在设备上运行。

据我所见，许多其他人在使用 iOS 5.1.1 时遇到了问题，但我无法找到有关如何解决此无线分发问题的明确答案。我们公司仍在使用一些无法升级到 6.0 的原始 iPad，如果可能，我们希望能够支持它们。

这只是 iOS 5.1.1 中从未解决的问题吗？

xCode 中是否还有我可能遗漏的其他设置？

我是否需要更改我们服务器上的其他内容（我们已经按照 Apple 说明添加了适当的 MIME 类型）？

非常感谢任何帮助/建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T14:52:57.773

我有一个相当明显的问题——我将我的图标文件命名为 Icon.png，但在清单中将其列为 icon.png。这在 iOS 6 中运行良好，但在 5.1.1 中不行。有时这是最简单的解决方案。文档要求一个 57x57 的图标，但我将它提高到 72x72，因为它是一个仅限 iPad 的应用程序。这也可能有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T10:08:47.317

我也有这个问题。如果您关闭 iOS 设备并重新启动它，该应用程序将在那里......只是在这里帮助我们的一种解决方法。但我会尝试用其他帖子中的图标问题来解决它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T02:27:49.717

我在将 InHouse 应用程序分发到 iPhone iOS 5.1 时遇到了同样的问题。将大图像网址添加到 .plist 后即可解决。

# ruby-on-rails - 在较长的 Rails 控制器操作期间提供更新

> ID：12978853
> 
> 赞同：0
> 
> 时间：2012-10-19T16:51:01.640
> 
> 标签：ruby-on-rails, model-view-controller

我有一个需要很长时间的操作。我希望能够在此过程中提供更新，这样用户就不会因为失去连接或其他原因而感到困惑。我可以做这样的事情：

```
class HeavyLiftingController < ApplicationController
  def data_mine
    render_update :js=>"alert('Just starting!')"
    # do some complicated find etc.
    render_update :js=>"alert('Found the records!')"
    # do some processing ...
    render_update :js=>"alert('Done processig')"
    # send @results to view
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:58:32.230

不，您只能在控制器操作中发出 ONE 渲染。在控制器终止之前，渲染什么都不做。当 data_mine 终止时，会有 3 次渲染，这将导致错误。

更新：

您可能必须在浏览器中设置一个 JavaScript (jquery) 计时器，然后定期向服务器发送 AJAX 请求以确定您的长期运行任务的当前状态。

例如，长时间运行的任务可以在执行过程中写入日志，周期性的 AJAX 请求会读取该日志并创建某种状态显示，然后将其返回给浏览器进行显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:10:46.117

以这种方式处理请求是不可能的。对于每个请求，您只有一个答案。

如果您的操作需要很长时间，那么可能应该异步执行。您可以在此过程中向用户发送电子邮件以通知他进度。

我建议你看看 DelayedJob gem： [http ://rubygems.org/gems/delayed_job](http://rubygems.org/gems/delayed_job)

它将为您处理处理异步内容的最困难部分（序列化/反序列化您的对象、存储等......）。

希望对你有帮助！

# xcode - 如何让编辑按钮在 xcode 中用于表格视图？

> ID：12978857
> 
> 赞同：1
> 
> 时间：2012-10-19T16:51:12.560
> 
> 标签：xcode, tableview, edit

我最近完成了名为 Bird Watching 的关于表视图的苹果教程，并且效果很好。但是，我现在正试图通过添加一个编辑按钮来进一步处理它，并且似乎遇到了问题。

下面是 MasterViewController 用来创建我的表的代码。这工作正常。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath (NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"BirdSightingCell";

static NSDateFormatter *formatter = nil;
if(formatter == nil){
    formatter = [[NSDateFormatter alloc] init];
    [formatter setDateStyle:NSDateFormatterMediumStyle];
}
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

BirdSighting *sightingAtIndex = [self.dataController objectInListAtIndex:indexPath.row];
[[cell textLabel]setText:sightingAtIndex.name];
[[cell detailTextLabel]setText:[formatter stringFromDate:(NSDate *)sightingAtIndex.date]];
return cell;
} 
```

我已经尝试使用其中的一些代码来使编辑按钮正常工作，下面是我创建的。这不起作用，我不知道如何解决它。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{

if (editingStyle == UITableViewCellEditingStyleDelete) {
    BirdSighting *sightingAtIndex = [self.dataController removeObjectAtIndex:indexPath.row];
    [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
} else if (editingStyle == UITableViewCellEditingStyleInsert) {
    // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
}
} 
```

我收到的错误消息之一是“BirdSightingDataController 没有可见的@interface 声明选择器 removeObjectAtIndex。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T00:25:53.683

我在 Apple 网站上查找了*Bird Watching*教程，以准确了解您在说什么以及这些对象是哪些类的实例。

在您的`tableView:commitEditingStyle:forRowAtIndexPath:`方法中，您尝试删除某个对象。删除对象时，您必须确保从视图（在本例中为表视图）和模型对象（在本例中为数据控制器）中删除它。您从表格视图中删除了该行，如下所示：

```
[tableView deleteRowsAtIndexPaths:@[indexPath]withRowAnimation:UITableViewRowAnimationFade]; 
```

这部分看起来不错。但是，您尝试使用以下代码行从数据控制器中删除对象：

```
BirdSighting *sightingAtIndex = [self.dataController removeObjectAtIndex:indexPath.row]; 
```

您将`removeObjectAtIndex:`方法发送到`self.dataController`. 该`removeObjectAtIndex:`方法只能发送到`NSMutableArray`. 您的数据控制器是 的实例`BirdSightingDataController`，而不是`NSMutableArray`. 因此，在尝试将`removeObjectAtIndex:`方法发送到之后`self.dataController`，您会遇到错误。

要访问数据控制器数组的某个索引处的对象，您声明并实现了如下`objectInListAtIndex:`方法：

```
- (BirdSighting *)objectInListAtIndex:(NSUInteger)theIndex {
    return [self.masterBirdSightingList objectAtIndex:theIndex];
} 
```

现在您想删除数据控制器数组的某个索引处的对象，您也可以`removeObjectInListAtIndex:`在`BirdSightingDataController`头文件中声明一个方法。然后，您可以像这样实现它：

```
- (void)removeObjectInListAtIndex:(NSUInteger)theIndex {
    [self.masterBirdSightingList removeObjectAtIndex:theIndex];
} 
```

请注意，此方法不返回任何内容，因为它只是从数组中删除一个对象。确保在头文件和实现文件中都使用`- (void)`而不是。`- (BirdSighting *)`

现在，`removeObjectAtIndex:`您可以简单地从数据控制器中删除对象（用户删除），而不是将方法发送到您的数据控制器，如下所示：

```
[self.dataController removeObjectInListAtIndex:indexPath.row]; 
```

# nuget - nuget本地包源找不到包

> ID：12978858
> 
> 赞同：5
> 
> 时间：2012-10-19T16:51:14.257
> 
> 标签：nuget, nuget-package

我正在尝试构建一些在我的公司内使用的软件包。我已经在我的硬盘驱动器上设置了一个本地文件夹，并将其作为包源添加到官方 nuget 源之前。当我执行时`nuget list janney`，找到了我的包但是执行`install-package janney.myfirstpackage`会引发错误`Install-Package : Unable to find package 'Janney.MyFirstPackage'.`

我究竟做错了什么？这是否表明我搞砸了我的包裹？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T17:09:29.037

在我的包管理器控制台中，我的包源设置为 nuget 而不是全部

# css - 具有活动 LI 的菜单

> ID：12978875
> 
> 赞同：0
> 
> 时间：2012-10-19T16:52:26.953
> 
> 标签：css, menu, html-lists

也许新鲜的眼睛可以看到我哪里出了问题，但我希望活动菜单项具有不同的风格......

HTML：

```
<div id="menu">
    <ul>
        <li id="active"><a href="#">Home</a></li>
        <li><a href="#">Products</a></li>
        <li><a href="#">Services</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
    </ul>
    </div> 
```

还有我的 CSS：

```
#menu ul {list-style-type: none;height: 40px;float: left;margin-top: 43px;margin-left:-32px;}
#menu li {
float: left;
}
#menu li #active {
background: url(../images/menu-bg-hover.png) no-repeat;
color: #ffffff;
}
#menu li a {
background: url(../images/menu-bg.png) no-repeat;
display: block;
width: 100px;
height: 40px;
text-decoration: none;
font-size: 16px;
color: white;
margin: 0 auto;
text-align: center; 
padding-top: 10px;
color:#424242;
font-family: "Helvetica", Arial, sans-serif; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:55:33.710

只需像这样修复样式：

```
#menu li#active {
  background: url(../images/menu-bg-hover.png) no-repeat;
  color: #ffffff;
} 
```

你把它写成`#menu li #active`而不是`#menu li#active`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T16:54:29.143

将您的 CSS 更新为`#menu li#active a`并将其放置在`#menu li a`. 这将确保样式覆盖默认样式，在本例中为背景图像和文本颜色。

`#menu li #active`强制浏览器定位 id`active`下的子元素`li`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T14:03:28.937

消除

```
#menu li #active {
background: url(../images/menu-bg-hover.png) no-repeat;
color: #ffffff;
} 
```

添加

```
#menu #active a{
background: url(../images/menu-bg-hover.png) no-repeat;
color: #ffffff;
} 
```

# java - 我的 BroadcastReceiver 类中的空指针异常

> ID：12978879
> 
> 赞同：3
> 
> 时间：2012-10-19T16:52:33.037
> 
> 标签：java, android, broadcastreceiver

我想在手机启动时搜索数据库并敬酒特定列。即使我觉得代码是正确的，该应用程序也会不断崩溃并出现异常。

```
@Override
public void onReceive(Context ctx, Intent intent) {
    Log.d("omg", "1");
    DBAdapter do = new DBAdapter(ctx);
    Log.d("omg", "2");
    Cursor cursor = do.fetchAllItems();
    Log.d("omg", "3");
    if (cursor.moveToFirst()) {
        Log.d("omg", "4");
        do {
            Log.d("omg", "5");
            String title = cursor.getString(cursor.getColumnIndex("item"));
            Log.d("omg", "6");
            // i = cursor.getInt(cursor.getColumnIndex("id"));
            Toast.makeText(ctx, title, Toast.LENGTH_LONG).show();

        } while (cursor.moveToNext());
    }
    cursor.close();
} 
```

令人沮丧的是，我没有看到我的任何“omg”日志出现在 logcat 中。我只看到我的应用程序崩溃。

我在 logcat 中收到三行错误。

```
10-19 12:31:11.656: E/AndroidRuntime(1471): java.lang.RuntimeException: Unable to start receiver com.test.toaster.MyReciever: java.lang.NullPointerException
10-19 12:31:11.656: E/AndroidRuntime(1471):     at com.test.toaster.DBAdapter.fetchAllItems(DBAdapter.java:96)
10-19 12:31:11.656: E/AndroidRuntime(1471):     at com.test.toaster.MyReciever.onReceive(MyReciever.java:26) 
```

对于任何感兴趣的人，这是我的 DBAdapter fetchAllItems 代码：

```
public Cursor fetchAllItems() {
    return mDb.query(DATABASE_TABLE, new String[] { KEY_ITEM, KEY_PRIORITY,
            KEY_ROWID }, null, null, null, null, null);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:58:33.637

问题在于`mDb`，`null`您`fetchAllItems()`需要`mDb`在尝试使用它之前进行初始化。

这只是一个猜测，但许多 DBAdapter 设计都有一个`open()`方法，是你的吗？如果是这样，您只需在调用之前调用它`fetchAllItems()`。如果没有，您仍然需要调用`mDb = ...`适配器中的某个位置。

# sql - sysdate和getdate()的常用sql是什么

> ID：12978882
> 
> 赞同：9
> 
> 时间：2012-10-19T16:52:48.057
> 
> 标签：sql, sql-server, oracle11g

我需要在 Oracle 和 SQL Server 中都使用 sysdate，但 SQL Server 有一个 GETDATE() 函数。

但我不想创建 2 个单独的查询

是否有任何特定的通用语法为 SQL Server 和 oracle 中的 sysdate 和 getdate 提供相同的输出

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-19T17:12:24.507

`CURRENT_TIMESTAMP`是 SQL Server 和 Oracle 的有效语法。Oracle 将返回会话时区中的当前日期和时间。SQL Server 将返回操作系统的当前日期和时间

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-20T10:37:50.910

您也可以在 t-sql 中为它起别名以匹配 Oracle 的功能？

```
CREATE FUNCTION sysdate ()
RETURNS DATETIME
AS
BEGIN
    RETURN getdate()
END
GO 
```

# jquery - Fancybox v.2.1.2 无法在 IE7 上打开

> ID：12978885
> 
> 赞同：2
> 
> 时间：2012-10-19T16:53:12.300
> 
> 标签：jquery, internet-explorer-7, fancybox-2

我在 Wordpress 中使用 Fancybox v.2.1.2（不是插件）。在 IE7 中，我有加载但它根本没有打开任何东西。

这是我的 JS 代码

```
<!-- Add fancyBox main JS and CSS files -->
<script type="text/javascript" src="/path/to/fancybox/source/jquery.fancybox.js?v=2.1.2"></script>
<link rel="stylesheet" type="text/css" href="/path/to/fancybox/source/jquery.fancybox.css?v=2.1.2" media="screen" />
<script>
jQuery(document).ready(function() {
     jQuery("a.fancybox").fancybox({
        padding : 0
    });  
});
</script> 
```

这是我页面中的代码：

```
<a href="/path/to/images/P1050615.jpg" class="fancybox" rel="gallery[283]"></a>
<div class="hidden">
 <a class="fancybox" href="/path/to/images/P1050616.jpg" rel="gallery[283]"><img src="/path/to/images/P1050616.jpg"></a>
 <a class="fancybox" href="/path/to/images/P1050617.jpg" rel="gallery[283]"><img src="/path/to/images/P1050617.jpg"></a>
</div> 
```

我正在使用 HTML5 Doctype，但即使我更改它，它也不会改变任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T20:17:19.203

恐怕这是一个错误（这不是你的错，不是你的代码）。

我已经直接联系了开发人员，他向我确认该问题有望在下一次提交中得到解决。

您可以同时回滚到 v2.1.1 版本。

**更新**：Fancybox v2.1.3 已经发布

更新日志版本 2.1.3 - 2012 年 10 月 23 日

*   已修复 #426 - IE7 损坏
*   已修复 #423 - iOS 上的背景闪烁
*   已修复 #418 - 自动增长/收缩和居中
*   更新了脚本以使用 jQuery 1.6
*   媒体助手支持 YouTube 视频系列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T00:15:22.333

我发现了这个错误……不是在 Fancybox 中，而是在 IE7、IE8 和 IE9 中！

如果您使用包含以下 CSS 的页面创建 iframe，则 IE 不会显示该页面：

```
html { position: relative; } 
```

如果你知道目标页面的站长，请他删除这个 CSS 声明，它的页面的显示不应该改变......否则，我知道没有解决方案！

就这样 ！

# sql - 删除一条记录的 Informix 触发器

> ID：12978887
> 
> 赞同：2
> 
> 时间：2012-10-19T16:53:41.110
> 
> 标签：sql, informix

当我执行一项任务时，我的表中插入了两行，即。复制。我需要使用插入后触发器删除重复项。我需要从那些 2 中删除一个重复记录。我需要这样的东西

```
CREATE TRIGGER del_rec
INSERT ON table1
AFTER(EXECUTE PROCEDURE del_proc());

CREATE PROCEDURE del_proc()

//check field a,b,c of this table already exists for this id. if yes delete the second one

END PROCEDURE; 
```

例如：

```
table 1:

a b c d e
1 1 1 2 2
1 1 1 2 2 
```

它应该删除第二行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T20:36:37.780

如果可以在其中插入重复项，则您的表格设计错误。您应该有一个独特的约束，以确保它不会发生。

假设由于某种原因您无法修复表格，那么：

```
CREATE TRIGGER ins_table1
    INSERT ON table1 REFERENCING NEW AS new
    FOR EACH ROW (EXECUTE PROCEDURE ins_table1(new.a, new.b, new.c)); 
```

这假定列`a`和足以唯一标识行`b`。`c`我已经重命名了触发器和程序，以更准确地反映它们的相关内容/时间；`del`并不是所有东西都适合作为调用 on 的前缀`INSERT`。

```
CREATE PROCEDURE ins_table1(new_a INTEGER, new_b INTEGER, new_c INTEGER)

    DEFINE l_a LIKE table1.a;

    FOREACH SELECT a INTO l_a
              FROM table1
             WHERE a = new_a AND b = new_b AND c = new_c
       RAISE EXCEPTION -271, -100;
    END FOREACH;

END PROCEDURE; 
```

这对插入的每一行都调用。如果 SELECT 语句返回一行，它将进入 FOREACH 循环的主体，因此将引发异常并且 INSERT 将因或多或少适当的错误而中止（-271 无法将新行插入表中；- 100 ISAM 错误：具有唯一键的记录的重复值）。

如果您尝试使用 AFTER 触发器进行此验证，则必须扫描整个表以查看是否有任何重复项，而不仅仅是针对插入的单个组合键。请注意，一般来说，一个 INSERT 可以有多行（想想`INSERT INTO Table SELECT * FROM SomeWhereElse`）。性能差异将是巨大的！（您对 AFTER 触发器的查询必须类似于`SELECT a, b, c FROM table1 GROUP BY a, b, c HAVING COUNT(*) > 1`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T22:21:02.487

Why not just use `SELECT UNIQUE` to avoid inserting duplicate values, or to remove duplicate values which already exist in the table?

# jquery - 使用 Jquery 的可扩展 div

> ID：12978889
> 
> 赞同：-3
> 
> 时间：2012-10-19T16:53:44.663
> 
> 标签：jquery, css

我有一个网站 (lowrateadvisor.com) 我正在努力让页面顶部的可扩展 div 正常工作。我可以让它在 jsfiddle.net/3shEE/95/ 中工作，只是不在网站上。任何帮助深表感谢。

```
CSS
#expandable a{
color:#fff;
text-decoration:underline;
}
#expandable a:hover{
color:#fff;
text-decoration:none;
}
#expandable {
    width: 100%; 
    height:35px;
    background: transparent;
    overflow: hidden;
background:#000;
color:#fff;
font-size:11px;
text-align:center;
}

#expandable.dropped { 
    background: #666; 
    color: white; 
    border-bottom: 1px solid #111 }

#expandable span {
    display: block;
    width: 100%; height: 50px;
    line-height: 50px; text-align: center;
    cursor: pointer;
}
#expandable ul {
    width: 100%;
} 
```

HTML

```
<div id="expandable">
    <span> Get the lowest possible rates on pre approved home loans, mortgages and refinancing your home.</span>

    <ul>
        <li>We will never...<br /></li>
        <li>&raquo; Ask for your SSN.</li>
        <li>&raquo; Ask for a credit card.</li>
        <li>&raquo; Store your information.</li>
        <li>&raquo; Hassle or Pressure any applicant.</li>
        <li> <a href="http://lowrateadvisor.com/apply-now/">Get Pre Approved</a> | <a href="http://lowrateadvisor.com/get-pre-approved/">Get A Quote</a></li>
    </ul>

</div>​ 
```

查询

```
$("#expandable").hover(function() {
    $(this).stop().animate({"height":"200px"},1000).addClass("dropped");
}, function() {
    $(this).stop().animate({"height":"35px"},1000).removeClass("dropped");
});
​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:12:26.333

看不到任何拼写错误....只是一个 SyntaxError: 第 67 行的非法字符尝试使用 jquery 1.8.2 和这个：

```
<script type="text/javascript">
$(document).ready(function () {
    $("#expandable").hover(function() {
        $(this).stop().animate({"height":"200px"},1000).addClass("dropped");
    }, function() {
        $(this).stop().animate({"height":"35px"},1000).removeClass("dropped");
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:15:29.177

从 JSFiddle 复制代码时有时会发生这种情况。

jQuery 代码的最后一个分号（有时是最后一个）被复制为非法字符。尝试删除最后一行`});`并手动重新输入。

# c# - 输入大小写小数的更流畅的方法

> ID：12978890
> 
> 赞同：0
> 
> 时间：2012-10-19T16:53:45.180
> 
> 标签：c#

我有一个类型的对象，`Entity`根据监视设施，它是“对象{十进制}”类型。我正在使用下面的代码对其进行转换，但我对这种方法并不满意（首先是字符串化，然后是解析）。

```
double d = Double.Parse(entity["key"].ToString()); 
```

有没有更流畅、更推荐的方法来转换该值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:56:37.117

您可以使用以下[`ToDouble`](http://msdn.microsoft.com/en-us/library/kx3x7f55.aspx)方法：

```
double d = Convert.ToDouble(entity["key"]); 
```

另外，将其`decimal`用作数据存储类型然后将其转换为有什么意义`double`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:21:01.060

我建议您使用`double`，而不是`decimal`出于两个原因。首先，正如[本讨论](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/921a8ffc-9829-4145-bdc9-a96c1ec174a5)中所解释的那样，精度略有不同（意味着性能略有下降） 。

其次，与团队的其他成员核实。由于您的目标是`double`从一开始，我猜测您应该插入解决方案其余部分的值类型（特别是因为您提到 Dynamics CRM）**实际上**是`double`.

在任何情况下，以下几行之一就足够了（并且比显式类型转换要好得多）。

```
double dd  = Convert.ToDouble(entity["key"]);
decimal dc = Convert.ToDecimal(entity["key"]); 
```

# c# - 更改 Windows 7 应用程序任务栏图标颜色

> ID：12978894
> 
> 赞同：3
> 
> 时间：2012-10-19T16:54:02.187
> 
> 标签：c#, .net, winforms

我有一个 Windows 窗体应用程序，我想在 Windows 任务栏上的缩略图中添加一个很酷的小视觉效果。

我知道你可以让缩略图显示一个进度选框式的东西，但是我们如何改变它的颜色呢？

![](../Images/e827fc295c0149b353ca02990ad71083.png)

我不是在谈论改变图标的​​颜色，而是改变图标背后的颜色。这甚至可能吗？

任何让我走上正轨的代码、文档或任何东西都将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T17:27:53.023

您可以使用[Windows API 代码包中提供的任务栏 API](http://archive.msdn.microsoft.com/WindowsAPICodePack)

```
// This will highlight the icon in red
TaskbarManager.Instance.SetProgressState(TaskbarProgressBarState.Error);
// to highlight the entire icon
TaskbarManager.Instance.SetProgressValue(100,100); 
```

请注意，此 API 旨在指示正在进行的操作（文件复制等）出现错误。

# postgresql - 用于缓存的 Heroku Postgres RAM 与 Memcache RAM

> ID：12978895
> 
> 赞同：4
> 
> 时间：2012-10-19T16:54:02.910
> 
> 标签：postgresql, caching, heroku, memcached

我在 Heroku 上有一个 Web 应用程序，我试图了解添加具有 1GB RAM 的 Memcached 实例和向我的 Postgres 服务器添加 1GB RAM 之间的区别/权衡。

如果我添加了一个 Memcached 实例，我可能会使用 Johnny Cache（对于 Django - [http://packages.python.org/johnny-cache/](http://packages.python.org/johnny-cache/)）。

我是否应该期望从这两个选项中获得类似的性能改进？一般来说，使用 memcache 与增加 Postgres 缓存的大小相比有什么优势。（我知道人们经常在数据库服务器上运行 memcache，所以必须有一个）。

我很欣赏这可能是一个非常幼稚的问题，但我无法通过谷歌找到任何东西来消除我的困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:05:44.267

为了获得最佳性能，Postgres 需要足够的缓存来保存最常用的对象（索引、表）。因此，shared_buffers 的设置存在一个临界点。在那之后，增加共享缓冲区并没有多大帮助。

将 RAM 的一部分留给文件系统级缓存是很好的。

有关更多信息，请参阅[http://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server](http://wiki.postgresql.org/wiki/Tuning_Your_PostgreSQL_Server)

至于 memcache，它是完全不同的野兽......它可以直接从应用程序中使用，以拥有超快速的非持久键值存储。

所有这三个特征都使 memcached 与关系数据库 (RDB) 不同。

*   超快（RDB 不是）
*   非持久性（RDB 是）
*   仅键值（RDB 更好）

# linux - Bash - 使用 sed 更改配置文件

> ID：12978898
> 
> 赞同：1
> 
> 时间：2012-10-19T16:54:16.660
> 
> 标签：linux, bash, shell, configuration

我在使用更改名为“.backup.conf”的配置文件的shell脚本时遇到了一些问题。

配置文件如下所示：

```
inputdirs=(/etc /etc/apm /usr/local)
outputdir="test_outputdir"
backupmethod="test_outputmethod"
loglocation="test_loglocation"` 
```

我的脚本需要更改配置文件变量之一，而最后 3 个变量我没有遇到任何问题。

如果我想将变量“inputdirs”/etc/ 更改为 /etc/perl，我应该使用什么表达式？

如果我使用带有附加的回声，它只会将其附加到文件的末尾。

我尝试使用以下格式的 sed： `sed -i 's/${inputdirs[$((izbor-1))]}/$novi/g' .backup.conf`其中“izbor”是我想从 inputdirs 更改的变量，“novi”是新路径（例如 /etc/perl）。

因此，使用以下配置文件和变量`$izbor=1`，`$novi=/etc/perl`我应该将第一个变量更改`inputdirs=/etc`为`/etc/perl` ，变量 inputdirs 最终应该看起来像`inputdirs=(/etc/perl /etc/apm /usr/local)`

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:32:14.513

你可以试试这个：

```
enovi="$(printf '%s\n' "$novi" | sed -e 's/[\\&/]/\\&/g')"
izbor1="$(expr "$izbor" - 1)"
sed -rie "s/([(]([^ ]* ){$izbor1})[^ )]*/\\1$enovi/" config.txt 
```

命令摘要：

1.  第一行生成一个`$enovi`具有转义内容的变量`$novi`。基本上，以下字符被转义：`&`、`\`和`/`. 就这样`/etc/perl`变成了`\/etc\/perl`。
2.  我们创建一个新变量 decrementing `$izbor`。
3.  这是实际的替代表达式。我将分部分解释：
    1.  首先我们匹配括号字符`[(]`。
    2.  我们现在将搜索一系列非空格，后跟一个空格 ( `[^ ]*`)。
    3.  此搜索（通过内括号中的分组标识）重复`$izbor1`多次 ( `{$izbor1}`)
    4.  前面的表达式被分组到一个外括号组中，以便被捕获到一个辅助变量`\1`中。
    5.  我们现在匹配我们想要替换的单词。它由不是空格且不是右括号的字符序列组成（这是为了处理最后一个单词的情况）
    6.  替换由捕获的 value 形成`\1`，然后是我们的新字符串。

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:46:45.893

如果您尝试使用 $izbor 作为索引，它可能希望成为`s///`. 假设您的输入匹配`^inputdirs=(`（没有空格），您可能会逃脱：

```
sed -i '/^inputdirs=(/{ 
    s/(/(  /; s/)/ )/;   # Insert spaces inside parentheses
    s@ [^ ][^ ]* @ '"$novi@$izbor"'; 
    s/( /(/; s/ )/)/; }  # Remove inserted spaces
' .backup.conf 
```

前两个表达式确保括号内有空格，因此如果您的输入已经有空格，则可能不需要。上面有点混淆，但基本上你正在做的替换是这样的：

```
s@ [^ ][^ ]* @/etc/perl@2 
```

其中`2`标志告诉 sed 仅替换匹配的第二次出现。这真的很脆弱，因为它不需要空格之前`inputdirs`和括号内的空格并且不处理制表符，但它应该适合你。此外，有些`sed`允许`[^ ][^ ]*`更简单地写为`[^ ]+`，但这并不普遍。

# authentication - Mobli Oauth 范围

> ID：12978899
> 
> 赞同：2
> 
> 时间：2012-10-19T16:54:19.610
> 
> 标签：authentication, mobli

我的访问令牌有问题。我得到的每个令牌都有一个空范围。虽然在我的授权 URL 中，我已经设置了各种组合的范围。我收到所有令牌信息，但范围始终为空白。以下是授权 URL 和令牌输出的示例。

授权网址：

> `https://oauth.mobli.com/authorize?client_id=xxx&response_type=code&state=fa90532ac5dc926609a484b60d9d457e&redirect_uri=http%3A%2F%2Fcontestis.localhost%2Fapis%2Fmobli%2Fweb%2Findex.php&scope=advanced+basic`

令牌输出：

> `Array ( [access_token] => xx [token_type] => mobli_user_related [expires_in] => 7776001 [refresh_token] => xx [user] => Array ( [id] => xx13030 [username] => XX [first_name] => XX [last_name] => XX ) [scopes] => )`

# jquery - 通过每个不同的图像在轮播/灯箱内容中添加链接

> ID：12978900
> 
> 赞同：1
> 
> 时间：2012-10-19T16:54:25.817
> 
> 标签：jquery, hyperlink, lightbox, jcarousel

这是我的问题：我在轮播中有一个灯箱，我想在灯箱中的每个图像加载时显示不同的链接，而不是之前。我通过在 html 结构中添加一个链接来做到这一点。但是每个图像的链接都不同，所以我需要通过它的 src 属性来识别每个图像，然后在加载该图像时添加我想要的链接。这就是我所拥有的，我不知道如何遵循......

html结构：

```
 <a href="images/lightbox/yamm.jpg" class="lb_gallery"  ><img src="images/lightbox/01_thumb.png"/></a> 
            <a href="images/lightbox/blog.jpg" class="lb_gallery" ><img src="images/lightbox/02_thumb.png" /></a>
            <a href="images/lightbox/asisaden.jpg" class="lb_gallery" ><img src="images/lightbox/03_thumb.png" /></a> 
            <a href="images/lightbox/interiordetalle.jpg" class="lb_gallery"><img src="images/lightbox/04_thumb.png" /></a> 

     </div> 
```

我的js代码：

```
 var $img = document.getElementsByTagName("img");
    var src = $img.attr("src");
    if(src == 'images/lightbox/yamm.jpg') {
    $("#ui-lightbox-enlace-wrapper").append('<a href="#" target="_blank">
    Link text</a>');

    } 
```

谢谢。

# java - 一个集合中的强引用和弱引用

> ID：12978902
> 
> 赞同：0
> 
> 时间：2012-10-19T16:54:40.600
> 
> 标签：java, weak-references

假设我们必须有 WeakReference 和“强引用”列表的情况。但是 Java 中没有 StrongReference 类。我的解决方案是

保留对象列表

```
 List<? extends Object> list =new ArrayList(); 
```

当我们从列表中获取元素时，请检查：

```
if(list.get(i) instanceof WeakReference){
     MyClass myObject =  ((MyClass)((WeakReference) list.get(i)).get());
     if(myObject != null){
       myObject.doSomething();
     }
  }else{
     MyClass myObject =  ((MyClass)list.get(i));
     myObject.doSomething();
  } 
```

**是否有更好的解决方案可以将强引用和弱引用放在一个集合中？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:04:34.400

我很想抽象出“强引用或弱引用”的概念：

```
public interface DualRef<T> {
    T get();
} 
```

然后实现两个子类，一个用于弱引用：

```
public class WeakDualRef<T> implements DualRef<T> {
    private final WeakReference<T> mRef;
    public WeakDualRef(T object) {
        mRef = new WeakReference<T>(object);
    }
    public WeakDualRef(WeakReference<T> ref) {
        mRef = ref;
    }
    T get() {
        return mRef.get();
    }
} 
```

另一个用于强参考：

```
public class StrongDualRef<T> implements DualRef<T> {
    private final T mRef;
    public StrongDualRef(T object) {
        mRef = object;
    }
    public T get() {
        return mRef;
    }
} 
```

然后你可以将你的代码实现为：

```
List<DualRef<MyObject>> list = new ArrayList<DualRef<MyObject>>();

// add mixed instances of WeakDualRef<MyObject> or StringDualRef<MyObject> . . .

MyClass myObject = list.get(i).get();
myObject.doSomething(); 
```

所有这些都具有通过正确使用泛型来保持类型安全的优点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:03:56.117

混合类型不是一个好的概念。

```
List< WeakReference > weakRefs  = new ArrayList<>();
List< MyClass >       myClasses = new ArrayList<>(); 
```

用两个循环做两件不同的事情。

为什么混合两种不同类型的对象，它们不共享任何行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:10:09.000

我会这样写

```
Object o = list.get(i);
if (o instanceof WeakReference) o = ((WeakReference) o).get();
if (o instanceof MyClass) ((MyClass) o).doSomething(); 
```

# jquery - jquery 可视化网站优化器代码

> ID：12978913
> 
> 赞同：6
> 
> 时间：2012-10-19T16:55:25.183
> 
> 标签：jquery, web, optimization

我有一个来自视觉网站优化器的 javascript 代码，它将被放置在 HTML 标头上：

```
var _vwo_code=(function(){
var account_id=7237,
settings_tolerance=2000,
library_tolerance=1500,
use_existing_jquery=true,
// DO NOT EDIT BELOW THIS LINE
f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init(); 
```

但我只想在这种情况下运行这段代码：

```
$(document).ready(function(){
  if($('#selectedLang').val() == 'en_US')
  {
    //run the visual website optimizer code
  }
}); 
```

我试过了，但返回错误“_vwo_code is not defined”

```
$(document).ready(function(){
  if($('#selectedLang').val() == 'en_US')
  {
    var _vwo_code=(function(){
    var account_id=7237,
    settings_tolerance=2000,
    library_tolerance=1500,
    use_existing_jquery=true,
    // DO NOT EDIT BELOW THIS LINE
    f=false,d=document;return{use_existing_jquery:function(){return use_existing_jquery;},library_tolerance:function(){return library_tolerance;},finish:function(){if(!f){f=true;var a=d.getElementById('_vis_opt_path_hides');if(a)a.parentNode.removeChild(a);}},finished:function(){return f;},load:function(a){var b=d.createElement('script');b.src=a;b.type='text/javascript';b.innerText;b.onerror=function(){_vwo_code.finish();};d.getElementsByTagName('head')[0].appendChild(b);},init:function(){settings_timer=setTimeout('_vwo_code.finish()',settings_tolerance);this.load('//dev.visualwebsiteoptimizer.com/j.php?a='+account_id+'&u='+encodeURIComponent(d.URL)+'&r='+Math.random());var a=d.createElement('style'),b='body{opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important;}',h=d.getElementsByTagName('head')[0];a.setAttribute('id','_vis_opt_path_hides');a.setAttribute('type','text/css');if(a.styleSheet)a.styleSheet.cssText=b;else a.appendChild(d.createTextNode(b));h.appendChild(a);return settings_timer;}};}());_vwo_settings_timer=_vwo_code.init();
  }
}); 
```

请帮我解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T18:22:23.660

VWO 需要让**_vwo_code**变量在全局范围内可用，但是当您在文档就绪处理程序中定义它时，它仍然在本地范围内，因此无法在外部访问。

所以要解决这个问题，你可以写

```
window._vwo_code=(function(){ 
```

代替

```
var _vwo_code=(function(){ 
```

但请记住，现在 VWO 代码在文档准备好后运行，您可能会在测试页面上看到闪烁（应用更改之前显示的原始内容）。

（注：我在 VWO 工作）

# django - Django ORM 加入另一个表

> ID：12978915
> 
> 赞同：0
> 
> 时间：2012-10-19T16:55:29.037
> 
> 标签：django, orm

我有一张名为`messages`. 在我的应用程序中，用户可以发送不同*类型*的消息。就像转发事件等一样。因此，我在该表中有`type`列`value`。

我想要做的是针对特定的`type`，转到特定的表并确保它`value`是有效的（通常这映射到该`id`表的）。可能有多种类型，并且每种类型都必须映射到不同的表。有没有办法在内置的 django ORM 中逻辑地写这个？现在，如果我使用直接 SQL，我只看到这是可行的，如果我能侥幸逃脱，我宁愿不这样做......

现在我正在做类似的事情：

```
Messages.objects.all().filter(Q(user_id=id))...etc 
```

我想添加到上面的语句中，检查`type`和对于特定的`type`，检查与之关联的表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:01:24.037

听起来你有一个“多态关联”。在 Django 中有几种方法可以做类似的事情，但我认为与您描述的最匹配的是[contenttypes](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/)模块，它使用单独的列来表示类型和值，就像在应用程序中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T18:11:25.360

您可能只想定义一个[多表继承](https://docs.djangoproject.com/en/dev/topics/db/models/#multi-table-inheritance)结构。这会得到相同的结果，因为您有多种类型的消息和字段继承，但您根本不必弄乱一个`type`字段。

```
class Message(models.Model):
    value = models.CharField(max_length=9000)

class Event(Message):
    pass

class Tweet(Message):
    pass 
```

在视图后处理程序中：

```
...
if request.POST['type'] == 'event':
    Event.objects.create(value=request.POST['value'])
elif request.POST['type'] == 'tweet':
    Tweet.objects.create(value=request.POST['value'])
... 
```

然后，获取您的对象：

```
all_tweets = Tweet.objects.all()
all_messages = Message.objects.all()

for message in all_messages:
    try:
        event = message.event
    except Event.DoesNotExist:
        # this message is not an Event
        pass 
```

如果这种结构不适合你，Django 还支持另外两种模型继承方式：[抽象基类](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)和[代理模型](https://docs.djangoproject.com/en/dev/topics/db/models/#proxy-models)。您还可以按照@AndrewGorcester 的建议持有[GenericForeignKey](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#id1)。

# php - PHP 函数中的 MySQL 连接会覆盖现有连接（其他数据库） - 我该如何防止这种情况发生？

> ID：12978920
> 
> 赞同：0
> 
> 时间：2012-10-19T16:55:45.447
> 
> 标签：php, mysql, mysql-connect

我们在脚本的开头打开一个到**host_1**的 MySQL 连接。介于两者之间，我们调用一个函数来打开和关闭与 host_2 的连接**（**函数 retrieve_information_from_host_2）。

不幸的是，函数调用**之后的代码****仍然使用函数的连接**（**host_2**）。

我们需要它来**继续前面的****连接**host_1 。

```
<?php

function retrieve_information_from_host_2($host_2, $username_2, $password_2, $database_2) {
    $connection = mysql_connect($host_2, $username_2, $password_2);
    if($connection) {
        if(mysql_select_db($database_2)) {
            $sql = "SELECT * FROM table WHERE id = 1;";
            $erg = mysql_query($sql);
            $row = mysql_fetch_assoc($erg);

            return $row;
        }
        mysql_close($connection);
    }
}

if(mysql_connect($host_1, $username_1, $password_1)) {
    if(mysql_select_db($database_1)) {
        $sql = "SELECT * FROM table WHERE id = 1;";
        $erg = mysql_query($sql);
        $row = mysql_fetch_assoc($erg); # CORRECT - This returns data from host 1

        $row_host_2 = retrieve_information_from_host_2(); # CORRECT - This returns data from host 2

        $sql = "SELECT * FROM table WHERE id = 2;";
        $erg = mysql_query($sql);
        $row = mysql_fetch_assoc($erg); # WRONG - This returns data from host 2 instead of host 1
    }
    mysql_close();
}
?> 
```

我们通过给每个连接命名来尝试了几乎所有组合

```
$connection_1 = mysql_connect($host_1, $username_1, $password_1);
...
mysql_close($connection_1); 
```

并明确关闭它们等。

没有什么帮助。有人可以给我们解决这个问题的方法吗？

PS：我们绑定到这种方法（函数），不能使用类。

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:06:10.523

有关第二个参数 link_identifier（MySQL 连接），请参阅[mysql_query手册](http://php.net/manual/en/function.mysql-query.php)

> 如果未指定链接标识符，则假定由 mysql_connect() 打开的最后一个链接。

您还应该使用 mysqli 而不是旧的 mysql。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:00:52.433

尝试将您的连接链接标识符作为第二个参数传递。

例如：

```
$connection1 = mysql_connect($host_1, $username_1, $password_1);
$connection2 = mysql_connect($host_2, $username_2, $password_2);
mysql_query('Query',$connection1);
mysql_query('Query',$connection2); 
```

# java - Autoconf Force Java 编译器版本和供应商

> ID：12978921
> 
> 赞同：1
> 
> 时间：2012-10-19T16:55:56.850
> 
> 标签：java, javac, autoconf

我正在使用 autoconf 进行构建。我希望我的配置脚本检查是否存在 Java 编译器并确保版本至少为 1.6 并且它是 Oracle 的 Java 编译器。

我需要在 configure.ac 脚本中添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:57:11.597

AX_PROG_JAVA宏[及其](http://www.gnu.org/software/autoconf-archive/ax_prog_java.html#ax_prog_java)在[GNU Autoconf 宏存档](http://www.gnu.org/software/autoconf-archive/index.html#Top)中的相关宏将是一个很好的起点。但是，它们不会完全按照您的要求进行（确保它是 Oracle 编译器并且至少是 Java 1.6）。

# javascript - Firefox 中的引导 Scrollspy 错误

> ID：12978922
> 
> 赞同：4
> 
> 时间：2012-10-19T16:55:58.630
> 
> 标签：javascript, jquery, debugging, firefox, twitter-bootstrap

我正在使用 Bootstrap 将一些文档放在一起，并在 Firefox 中遇到了 Scrollspy 插件的问题。本质上，“活动”类被附加到我的侧边栏导航中的最后一个列表项，并且即使滚动页面也不会改变。

我已经将我的示例与 Bootstrap 的版本进行了比较，无法确定两者之间的任何差异。该脚本适用于所有其他浏览器，包括 IE8+。

我已经在这里托管了我的工作示例，如果您有时间，任何人都可以查看（页面源非常简单，因此在 Firefox 中查看它可能比在 jsFiddle 或其他东西中更容易查看）：[http ://dev.themusicake.com/](http://dev.themusicake.com/)

可以在此处找到有关 Scrollspy 的文档：http: [//twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

我`<body>`按照建议使用元素上的数据属性：

```
<body data-spy="scroll" data-target=".nav-affix-container"> 
```

控制台中也没有抛出任何错误，增加了找出问题的麻烦。如果有人在过去对这个特定问题有任何疑问，我们将不胜感激任何帮助！

如果您还需要什么，请告诉我！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T12:31:35.617

`height: 100%`从中删除`body`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T12:45:29.233

对我来说，问题是我在内容 div 上使用了 float:left，这导致内容本身的高度 = 0。因此，滚动间谍将无法识别高度（我猜？）

我只是在内容 div 下方使用 clear 来解决问题。

```
 <br style="clear: both"/> 
```

# node.js - 当我更改观看的文件时，fs.watch 触发了两次

> ID：12978924
> 
> 赞同：38
> 
> 时间：2012-10-19T16:56:09.110
> 
> 标签：node.js, windows-8, watch

```
 fs.watch( 'example.xml', function ( curr, prev ) {
   // on file change we can read the new xml
   fs.readFile( 'example.xml','utf8', function ( err, data ) {
     if ( err ) throw err;
     console.dir(data);
     console.log('Done');
   });
 }); 
```

输出：

> *   一些数据
> *   完成 X 1
> *   一些数据
> *   完成 X 2

这是我的使用错误还是..？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-19T17:53:24.600

`fs.watch`api ：

1.  [不稳定](https://nodejs.org/docs/latest/api/fs.html#fs_caveats)_
2.  已经知道关于重复通知的[“行为” 。](https://github.com/joyent/node/search?q=issues+fs.watch+twice&ref=cmdform&type=Issues)具体来说，[windows 案例](https://github.com/joyent/node/issues/1970#issuecomment-2599352)是 windows 设计的结果，其中单个文件修改可以是对 windows API 的多次调用

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-15T03:38:54.853

我通过执行以下操作来考虑这一点：

```
var fsTimeout

fs.watch('file.js', function(e) {

    if (!fsTimeout) {
        console.log('file.js %s event', e)
        fsTimeout = setTimeout(function() { fsTimeout=null }, 5000) // give 5 seconds for multiple events
    }
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-10-09T22:07:40.890

我建议使用`chokidar`（[https://github.com/paulmillr/chokidar](https://github.com/paulmillr/chokidar)），这比`fs.watch`：

> 评论其 README.md：

节点.js `fs.watch`：

*   不报告 OS X 上的文件名。
*   在 OS X 上使用 Sublime 等编辑器时根本不报告事件。
*   **经常报告事件两次。**
*   发出大多数更改为`rename`.
*   还有[很多其他问题](https://github.com/joyent/node/search?q=fs.watch&type=Issues)
*   不提供递归查看文件树的简单方法。

节点.js `fs.watchFile`：

*   在事件处理方面几乎一样糟糕。
*   也不提供任何递归观看。
*   导致 CPU 利用率高。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-10T21:55:31.827

如果您需要查看文件的更改，那么您可以查看我的小型库[on-file-change](https://github.com/jan-swiecki/node-on-file-change)。它检查触发`change`事件之间的文件 sha1 哈希。

解释为什么我们有多个触发事件：

> 您可能会注意到在某些情况下，单个创建事件会生成多个由您的组件处理的 Created 事件。例如，如果您使用 FileSystemWatcher 组件监视目录中新文件的创建，然后使用记事本创建文件对其进行测试，即使只创建了一个文件，您也可能会看到生成了两个 Created 事件。这是因为记事本在写入过程中执行了多个文件系统操作。记事本分批写入磁盘，创建文件内容，然后创建文件属性。其他应用程序可以以相同的方式执行。因为 FileSystemWatcher 监视操作系统活动，所以这些应用程序触发的所有事件都将被拾取。

[资源](https://msdn.microsoft.com/en-us/library/xcc1t119(v=vs.71).aspx)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-11-26T23:48:38.180

## 我的自定义解决方案

我个人喜欢`return`在检查某些东西时防止代码块运行，所以，这是我的方法：

```
var watching = false;
fs.watch('./file.txt', () => {
    if(watching) return;
    watching = true;

    // do something

    // the timeout is to prevent the script to run twice with short functions
    // the delay can be longer to disable the function for a set time
    setTimeout(() => {
        watching = false;
    }, 100);
}; 
```

随意使用此示例来简化您的代码。它可能**并不**比使用其他模块更好，但效果很好！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-09-26T06:36:33.637

我是第一次处理这个问题，所以到目前为止所有的答案可能都比我的解决方案更好，但是它们都不是 100% 适合我的情况，所以我想出了一些稍微不同的东西——我使用了 XOR翻转 0 和 1 之间的整数的操作，有效地跟踪和忽略文件上的每一秒事件：

```
var targetFile = "./watchThis.txt"; 
var flippyBit = 0; 

fs.watch(targetFile, {persistent: true}, function(event, filename) {

      if (event == 'change'){
        if (!flippyBit) {
          var data = fs.readFile(targetFile, "utf8", function(error, data) {
            gotUpdate(data);
          })
        } else {
          console.log("Doing nothing thanks to flippybit.");              
        }
        flipBit(); // call flipBit() function
      }
    });

// Whatever we want to do when we see a change
function gotUpdate(data) {
    console.log("Got some fresh data:");
    console.log(data);
    }

// Toggling this gives us the "every second update" functionality

function flipBit() {
    flippyBit = flippyBit ^ 1;
} 
```

我不想使用与时间相关的函数（如 jwymanm 的答案），因为我正在观看的文件可能会非常频繁地获得合法更新。而且我不想使用 Erik P 建议的观看文件列表，因为我只看一个文件。Jan Święcki 的解决方案似乎有点矫枉过正，因为我正在低功耗环境中处理极短且简单的文件。最后，Bernado 的回答让我有点紧张——如果它在我处理完第一个更新之前到达，它只会忽略第二个更新，我无法处理那种不确定性。如果有人发现自己处于这种非常具体的场景中，我使用的方法可能有一些优点吗？如果它有任何严重问题，请让我知道/编辑这个答案，但到目前为止它似乎运作良好？

**注意：**显然，这*强烈*假设每次实际更改您将获得 2 个事件。显然，我仔细测试了这个假设，并了解了它的局限性。到目前为止，我已经确认：

*   在 Atom 编辑器中修改文件并保存触发器**2 更新**
*   `touch`触发**2 次更新**
*   `>`通过（覆盖文件内容）的输出重定向触发**2 次更新**
*   **附加 via`>>` *有时会触发 1 个更新！****

我可以为不同的行为想出完美的理由，但我们不需要知道*为什么*会发生某些事情来为它做计划——我只是想强调你会想在你自己的环境和上下文中检查自己你自己的用例（duh），不要相信互联网上自认的白痴。话虽这么说，但采取了预防措施，到目前为止我还没有任何奇怪的事情发生。

*****完全公开，我实际上不知道为什么会这样，但是我们已经在处理 watch() 函数的不可预测的行为，那么还有什么不确定性呢？对于在家跟随的任何人，更快速地附加到文件似乎会导致它停止双重更新，但老实说，我真的不知道，而且我对这个解决方案在实际情况下的行为感到满意它会被使用，这是一个单行文件，最快每秒会更新（替换内容）两次。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-21T02:26:25.507

第一个是更改，第二个是重命名

我们可以从监听器函数中有所作为

```
function(event, filename) {

} 
```

侦听器回调获取两个参数（事件、文件名）。event 是“rename”或“change”，filename 是触发事件的文件的名称。

```
// rm sourcefile targetfile
fs.watch( sourcefile_dir , function(event, targetfile)){
    console.log( targetfile, 'is', event)
} 
```

由于源文件被重命名为目标文件，它将调用三个事件作为事实

```
null is rename // sourcefile not exist again
targetfile is rename
targetfile is change 
```

请注意，如果您想捕获所有这三个 evnet，请查看源文件的目录

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-23T22:15:47.373

我有时会多次注册 Watch 事件，导致 Watch 事件触发多次。我通过保留观看文件列表来解决它，如果文件已经在列表中，则避免注册事件：

```
 var watchfiles = {};

function initwatch(fn, callback) {
    if watchlist[fn] {
        watchlist[fn] = true;
        fs.watch(fn).on('change', callback);
    }
} 
```

……

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-13T03:23:50.820

类似/相同的问题。当图像被添加到目录时，我需要对它们做一些事情。这是我处理双重射击的方法：

```
var fs = require('fs');
var working = false;

fs.watch('directory', function (event, filename) {
  if (filename && event == 'change' && active == false) {
    active = true;

    //do stuff to the new file added

    active = false;
}); 
```

它将忽略第二次触发，直到完成与新文件有关的操作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-02-04T14:18:14.290

就像其他人的回答说...这有很多麻烦，但我可以这样处理：

```
var folder = "/folder/path/";

var active = true; // flag control

fs.watch(folder, function (event, filename) {
    if(event === 'rename' && active) { //you can remove this "check" event
        active = false;

        // ... its just an example
        for (var i = 0; i < 100; i++) {
            console.log(i);
        }

        // ... other stuffs and delete the file
        if(!active){
            try {
                fs.unlinkSync(folder + filename);
            } catch(err) {
                console.log(err);
            }
            active = true
        }
    }
}); 
```

希望我能帮助你...

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-25T00:02:00.660

最简单的解决方案：

```
const watch = (path, opt, fn) => {
  var lock = false
  fs.watch(path, opt, function () {
    if (!lock) {
      lock = true
      fn()
      setTimeout(() => lock = false, 1000)
    }
  })
}
watch('/path', { interval: 500 }, function () {
  // ...
}) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-03-09T10:11:58.887

我正在使用 puppeteer 下载文件，保存文件后，我正在发送自动电子邮件。由于上述问题，我注意到，我正在发送 2 封电子邮件。我通过使用`process.exit()`pm2 停止我的应用程序并自动启动来解决。在代码中使用标志并没有救我。

如果将来有人遇到此问题，也可以使用此解决方案。退出程序并自动使用监控工具重新启动。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-12-12T15:43:16.737

我遇到了同样的问题。如果不想触发多次，可以使用**去抖**功能。

```
 fs.watch( 'example.xml', _.debounce(function ( curr, prev ) {
   // on file change we can read the new xml
   fs.readFile( 'example.xml','utf8', function ( err, data ) {
     if ( err ) throw err;
     console.dir(data);
     console.log('Done');
   });
 }, 100)); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-24T03:45:29.037

## 去抖观察者

我得出的一个解决方案是（a）需要有一个解决问题的方法，（b）需要有一个解决方案来确保多个快速`Ctrl+s`操作不会导致竞争条件。这就是我所拥有的...

##### `./**/utilities.js`（某处）

```
export default {
    ...
    debounce(fn, delay) {  // #thxRemySharp https://remysharp.com/2010/07/21/throttling-function-calls/
        var timer = null;

        return function execute(...args) {
            var context = this;
            clearTimeout(timer);
            timer = setTimeout(fn.bind(context, ...args), delay);
        };
    },
    ...
}; 
```

##### `./**/file.js`（别处）

```
import utilities from './**/utilities.js';  // somewhere
...
function watch(server) {
    const debounced = utilities.debounce(observeFilesystem.bind(this, server), 1000 * 0.25);
    const observers = new Set()
        .add( fs.watch('./src', debounced) )
        .add( fs.watch('./index.html', debounced) )
        ;
    console.log(`watching... (${observers.size})`);

    return observers;
}

function observeFilesystem(server, type, filename) {
    if (!filename) console.warn(`Tranfer Dev Therver: filesystem observation made without filename for type ${type}`);
    console.log(`Filesystem event occurred:`, type, filename);
    server.close(handleClose);
}
... 
```

这样，我们传入的观察处理程序`fs.watch`是 [在这种情况下是一个绑定的 bunction]，如果多个调用彼此相隔不到几秒（250 毫秒），它就会被*去抖动。*`1000 * 0.25`

值得注意的是，我还设计了一个`Promise`s 管道来帮助避免其他类型的竞争条件，因为代码还利用了其他回调。另请注意 Remy Sharp 的贡献，其去抖动功能多年来一再证明非常有用。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-02-09T02:53:12.557

这是我的简单解决方案。每次都运行良好。

```
// Update obj as file updates
obj = JSON.parse(fs.readFileSync('./file.json', 'utf-8'));
fs.watch('./file.json', () => {
  const data = JSON.parse(fs.readFileSync('./file.json', 'utf-8') || '{}');
  if(Object.entries(data).length > 0) { // This checks fs.watch() isn't false-firing
    obj = data;
    console.log('File actually changed: ', obj)
  }
}); 
```

# php - 使用javascript分配一个php变量

> ID：12978927
> 
> 赞同：2
> 
> 时间：2012-10-19T16:56:28.160
> 
> 标签：php, javascript, html, codeigniter

我从 envato 市场购买了 modalbox 插件，用 javascript 制作，我想用它来实现我的类别 > 子类别 > 项目。无论如何，我知道 JavaScript 变量可以使用 php 赋值，但我需要相反。

在我的第一步中，我让用户使用基本链接选择一个类别，然后 onclick 甚至将它们带到第二张幻灯片，我想在其中显示与所选该类别相关的子类别和项目。

我尝试了两件事：

```
1) setting onClick = "step2();<?php $chosen_cat = ' . $this->db->escape(trim($category)) . '?>" 
```

希望我可以简单地将所选类别的名称分配给一个值，然后在 step2() javascript 方法中使用 $chosen_cat 来显示产品，但这会破坏 javascript，因为输出存在冲突；

> 2）我把step2()改成step2(category)然后用了，onclick="step2(db->e​​scape($category););" 这会将值传递给 step2() 方法，但是现在我需要调用 <-- 我需要将该字符串打印到 php 但是我不知道如何解决这个问题，因为 PHP -> JS 作为其服务器是可行的客户关系但回来..

$this->db->e​​scape() 是一个[http://codeigniter.com/user_guide/database/queries.html](http://codeigniter.com/user_guide/database/queries.html) codeigniter 方法。

我的代码：

```
<script type="text/javascript">

        function step1() {
            modalbox.show(new Element("div").insert(
                new Element("p", { "align": "justify" }).insert(
                    <?php 
                        $categories = $items;
                        $chosen_cat = '';
                    ?>
                    <?php 
                        $i = 0;
                        foreach($categories as $category => $itemarray) {
                            $i++;
                            if($i==27){
                                echo  $this->db->escape('<a class="category" onclick="step2();<?php $chosen_cat = ' . $this->db->escape(trim($category)) . '?>" href="#">'. trim($category) . '</a>');
                            }
                            else {
                                echo $this->db->escape('<a class="category" onclick="step2();" href="#">' . trim($category) . '</a>')  . '+';
                            }
                        }
                    ?>
                )
            ), {
                "title"     : "Step 1/3",
                "width"     : 800,
                "options"   : [{
                    "label"     : "Next »",
                    "onClick"   : step2
                }]
            });
        };

        function step2() {
            alert(<?php $this->db->escape($chosen_cat); ?>);
            modalbox.show([ new Element("div").insert(
                new Element("p", { "align": "justify" }).insert(
                    "If you open a modalbox when another one is opened, it will stretch to the new " +
                    "modalbox width and height and overwrite the content.<br /\><br /\>" +
                    "You can use HTML or Prototype Elements like a DIV or a TABLE."
                )
            ),
                new Element("p", { "align": "justify" }).insert(
                    "You can have multiple contents on a single modalbox by using an array like this:<br /\><br /\>" +
                    "<pre>modalbox.show([ content1, content2, ... ], options);</pre>"
                )
            ], {
                "title"     : "Step 2/3",
                "width"     : 800,
                "options"   : [{
                    "label"     : "« Previous",
                    "onClick"   : step1
                }, {
                    "label"     : "Next »",
                    "onClick"   : step3
                }]
            }); 
        };
        function step3() {
            modalbox.show([ new Element("div").insert(
                new Element("p", { "align": "justify" }).insert(
                    "If you open a modalbox when another one is opened, it will stretch to the new " +
                    "modalbox width and height and overwrite the content.<br /\><br /\>" +
                    "You can use HTML or Prototype Elements like a DIV or a TABLE."
                )
            ),
                new Element("p", { "align": "justify" }).insert(
                    "You can have multiple contents on a single modalbox by using an array like this:<br /\><br /\>" +
                    "<pre>modalbox.show([ content1, content2, ... ], options);</pre>"
                )
            ], {
                "title"     : "Step 3/3",
                "width"     : 800,
                "hideOnPageClick": false,
                "options"   : [{
                    "label"     : "« Previous",
                    "onClick"   : step2
                }, {
                    "label"     : "Finish",
                    "isDefault" : true,
                    "onClick"   : modalbox.hide
                }]
            });
        };

    </script> 
```

是否可以在 onclick 事件中使用 JavaScript 设置会话变量，例如 $_SESSION['category'] = 'category' 在 js 样式中，然后使用 php 读取该会话并取消设置它我认为这不会产生很大的安全性会话将存在不到一秒钟的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T16:59:20.453

JavaScript 永远不会设置 PHP 变量。JavaScript 在客户端运行，PHP 在服务器上运行。如果您需要从 JS 更改服务器上的某些内容，则必须使用 AJAX，或发送常规 HTTP 请求。

或者，您可以让 PHP 在客户端生成运行时所需的数据，通常通过打印一些 JSON 来成为 JS 变量

在您的示例中，您将需要以下内容（为简单起见，我将使用 jQuery）

```
... onclick="$.ajax('/category.php').done(function(data) {step2(data.category);})" 
```

如果它不是 HTML 中的 JS，那会更好

```
$('#my-button').click(function(){
    $.ajax('/category.php').done(function(data) {
        step2(data.category);
    });
}); 
```

我不能给你一个 AJAX 教程，但主要是当你需要来自服务器的数据时，你会发出一个 AJAX 请求。

# maven - 如何从 Maven 测试运行中获得格式良好的 JUnit 报告？

> ID：12978930
> 
> 赞同：2
> 
> 时间：2012-10-19T16:56:31.873
> 
> 标签：maven, junit, report

我有：

*   包含 junit 4.4、log4j 1.2 和 maven-surefire-plugin 的 pom.xml
*   `@RunWith(classOf[JUnitRunner])`使用和 FunSpec进行的一些 Scala 测试

要运行它，我会这样做`maven clean test`。

我可以使用 Maven 开关生成 Surefire HTML 报告`surefire-report`，但它们不是很详细，而且我认为它们不符合标准 JUnit 报告？

关于如何获得具有良好格式（例如 HTML + CSS）的 JUnit 报告输出的任何提示？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:05:14.607

surefire [-report:report](http://maven.apache.org/plugins/maven-surefire-report-plugin/report-mojo.html)和[surefire-report:report-only](http://maven.apache.org/plugins/maven-surefire-report-plugin/report-only-mojo.html)目标将为 Maven 测试执行生成 HTML 报告。作为 Maven 站点生成的一部分，它可以使用其中一种[皮肤进一步设置样式](http://maven.apache.org/skins/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-09T05:04:34.673

你可以试试 Allure Reports，它可以生成一个报告网站。

[这里](https://github.com/sarkershantonu/Automation-Getting-Started/tree/master/AllureJunit)有一个示例项目

# php - PHP CURL 请求不起作用，没有返回任何数据

> ID：12978932
> 
> 赞同：-1
> 
> 时间：2012-10-19T16:56:38.003
> 
> 标签：php, curl, libcurl

> **可能重复：**
> [我的 PHP curl 请求有什么问题，请帮助.. 我没有收到任何数据](https://stackoverflow.com/questions/12964067/whats-wrong-with-my-php-curl-request-please-help-im-not-getting-any-data-b)

我将 XML 数据发布到应该向我发送（回显）结果的 URL，而不是将它们发送回给我，这是我在运行 PHP 后得到的 .. 我的 curl 代码低于此结果.. . 我怀疑下面的 CURL 代码可能有问题，我如何才能从发布到 URL(mysgproc.php) 的 XML 数据中实际获取结果，我也发布了 url 代码？谢谢一堆

```
HTTP/1.1 200 OK
Date: Fri, 19 Oct 2012 16:30:26 GMT
Server: Apache/2.2.9 (Fedora)
Set-Cookie: ZDEDebuggerPresent=php,phtml,php3; path=/
Content-Length: 238
Connection: close
Content-Type: text/html

<?xml version="1.0" encoding="UTF-8"?><iniResponseMsg  deliveryTimeStamp="19/10/2012 16:30:26 GMT" messageID="9d085e45-9e9b-11da-befd-0014221b359d" correlationID="69c8277d-77af-4fd9-8cc0-7c30d2963bee"> <state>fail</state></iniResponseMsg> 
```

下面是我的代码...

```
<?php
$url ="http://127.0.0.1/sens/msgproc.php";
$xml_data = file_get_contents("/usr/local/www/data/message_test.xml");
#$header ="POST HTTP/1.0 \r\n";
#$header .="Content-type: text/xml \r\n";
#$header .="Content-length: ".strlen($xml_data)." \r\n";
#$header .="Content-transfer-encoding: text\r\n";
#$header .="Connection: close \r\n\r\n";
#$header .= $xml_data;
$headers = array('Content-Type: text/xml','Content-Transfer-Encoding: text','Connection: close');
$ch = curl_init();
curl_setopt ($ch,CURLOPT_SSL_VERIFYPEER, 0);
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch,CURLOPT_POST,true);
curl_setopt($ch,CURLOPT_POSTFIELDS,$xml_data);
curl_setopt($ch, CURLOPT_HEADER, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HTTPHEADER,$headers);
curl_setopt($ch, CURLOPT_TIMEOUT, 4);
#curl_setopt($ch, CURLOPT_CUSTOMREQUEST, $header);
$data = curl_exec($ch);  // if the post is successful , the server will return some data.

#$info = curl_getinfo($ch);
#
#if(!curl_errno($ch))
#   echo 'It took '.$info['total_time'].'seconds to send a request to'.$info['url'];
#
#   else
#

curl_close($ch);
echo $data;
?> 
```

这是 msgproc.php 代码

```
<?php

//$pass='go';

/*******************************************************************************
* COMPONENT NAME:
*  msgproc.php
*
* DESCRIPTION:
*  This script accepts the various XML documents from G*.
*  The document is passed to the correct routine
*  in msgproc.php based on what it is.
*
*******************************************************************************/
require('sensdb.php');
require('dbutil.php');
require('msgproc_util.php');

// first this is to pipe all output to the buffer for loggin later in the file
// echo and print statements will get logged instead of outputted
ob_start();

//$raw_post_data = $HTTP_RAW_POST_DATA;

$raw_post_data = file_get_contents("php://input");

$time_log = date("d/m/Y G:i:s") . ' - aeroastro sensor sys time';

/* CONNECT TO THE DATABASE */
sensdb_connect();

$script_time = date("M-d-Y H:i:s");

// logging variables
$type='';
$byte_count=0;
$message_id='';
$error='';
$error_type='';
$source = $_SERVER['REMOTE_ADDR'];

/*******************************************************************************
* COMPONENT NAME:
*  main process
*
* DESCRIPTION:
*
*******************************************************************************/

/****** formerly function test_read_xml_post() ***********************/
//$fp = fopen("/usr/local/www/data/sensor/sens/message_test.xml", "r");
//$fp = fopen("php://input", "r");

echo "string length:" . strlen($raw_post_data) . ' ';

// reject all data not from Globalstar of development
//if ( $source == "207.88.248.142" ) {
    $data = trim($raw_post_data);
//} else {
//    $data = NULL;
//}

$byte_count += strlen($data);
//fclose($fp);

// test of php5 parsing xml .... much easier
if ( $xml = simplexml_load_string($data) ) {

    // innocent until proven guilty
    $status = true;

    // this will help us find the root element to determine message type
    $dom = dom_import_simplexml($xml);
    $xml_root = $dom->tagName;

    // process stumessages here
    if ( $xml_root == 'stuMessages' ) {

        $type = 'STxMessage';

        // what is the message id
        $xml_messageID = $xml->xpath('/stuMessages/@messageID');
        foreach ( $xml_messageID as $id ) {
            $message_id = $id;
        }

        // what is the packet time
        $packetTimes = $xml->xpath('/stuMessages/@timeStamp');
        foreach ( $packetTimes as $_time ) {
            $packetTime = $_time;
        }

        $time_log .= "\n". $packetTime . ' - globalstar packet time';

        // how many messages
        $message_count = count($xml->xpath('/stuMessages/stuMessage'));

        if ( $message_count >= 1 ) {

            // fomat the sql string
            $sql = get_msglog_sql($type, $source, $byte_count, $message_id, $error );

            if ( mysql_query($sql) ) {

                // get the insert id
                // be careful not to change the sql above which might break  our ability here to get the last insert id
                $incoming_id = mysql_insert_id();

                echo $script_time . " - stu_message packet $message_id logged: insert_id:$incoming_id";
            } else {
                echo $script_time . " - stu_message failed logging";
            }

//            mysql_query("LOCK TABLES STxMessage WRITE");
//            mysql_query("SET AUTOCOMMIT = 0");

            mysql_query("BEGIN");

            foreach( $xml->stuMessage as $stuMessage ) {

                $unixtime    = $stuMessage->unixTime;
                $gps         = $stuMessage->gps;
                $payload    = $stuMessage->payload;
                // convert to an ESN int
                $esn        = $stuMessage->esn;
                $esn        = esn_to_num($esn);

                // test the message time against system time
                // JL 2007
                $time_log .= "\n" . gmdate("d/m/Y H:i:s", "$unixtime") . " - packet stu message time";

                // JL 2006 Apr
                // log message data larger than 255 chars for TSM account a la Tony B
                // these messages don't fit in our DB
                if ( strlen($payload) > 255 ) {

                    // log any output
                    $large_message_log = '/usr/local/www/logs/large_message_log';

                    $sql = 'INSERT INTO STxLargeMessage ( ESN,GPS,Payload,UnixTime,IncomingID) values ("'.$esn.'","'.$gps.'","'.$payload.'","'.$unixtime.'","'.$incoming_id.'")';
                    // Perform Insert of large message
                    $result = @mysql_query($sql);

                    // Let's make sure the file exists and is writable first.
                    if ( is_writable($large_message_log) ) {

                        // The file pointer is at the bottom of the file hence
                        $handle = @fopen($large_message_log, 'a');

                        // Write $response to our opened file.
                        @fwrite($handle, "\n".$data);
                        @fclose($handle);
                    }
                }

                // do we have an ESN for this message
//                $select_esn = 'select ESN from STx where ESN = "'.$esn.'"';
//                $result = mysql_query($select_esn);
//                $result_count = mysql_num_rows($result);

                $sql = 'INSERT INTO STxMessage( ESN,GPS,Payload,UnixTime,IncomingID) values ("'.$esn.'","'.$gps.'","'.$payload.'","'.$unixtime.'","'.$incoming_id.'")';
                // Perform Insert
                $result = mysql_query($sql);

                $GMT_unixtime = gmdate("Y-m-d H:i:s", "$unixtime");

                $update = 'update STx set MessageCount = MessageCount + 1, LastMessageTime = "' . $GMT_unixtime . '" where ESN = "' . $esn . '"';

                // increment the message count by 1
                mysql_query($update);
                unset($update);

                // Check db result
                if ( !$result ) {
                    $status = false;
                    // log the error
                    echo 'Invalid query: ' . mysql_error() . "\n";
                    echo $message .= 'Whole query: ' . $query;
                }
                unset($result);

                unset($unixtime);
                unset($gps);
                unset($payload);
                unset($esn);
            }

            if ( $status ) {
                mysql_query("COMMIT");

            } else {
                mysql_query("ROLLBACK");
            }
//            mysql_query("UNLOCK TABLES");
//            mysql_query("SET AUTOCOMMIT = 1");

        } else { // no data but valid xml, return pass, probably G* "pining" aeroastro for life
            $error = "no data in xml packet id:" . $message_id . "\n";
            echo $error;
        }

        // make our response xml for globalstar
        $response = make_globalstar_response_xml('stuResponseMsg', $message_id, $status);

    } elseif ( $xml_root == 'prvmsgs' ) { // process prvmsgs messages

        /*******************************************************************************
        * COMPONENT NAME:
        *  PRVMSGS
        *
        * DESCRIPTION:
        *  These routines accept the PRVMSGS sent by Globalstar in response to the
        *  INIMSGS that were sent. This routine stores the PRVMSGS into the database,
        *  and also sends a respose message back to Globalstar.
        *
        *******************************************************************************/

        $type = 'PrvMessage';

        // what is the message id
        $xml_messageID = $xml->xpath('/prvmsgs/@prvMessageID');
        foreach ( $xml_messageID as $id ) {
            $message_id = $id;
        }

        // how many messages
        $message_count = count($xml->xpath('/prvmsgs/prvmsg'));

        if ( $message_count >= 1 ) {

            // fomat the sql string for logging
            $sql = get_msglog_sql($type, $source, $byte_count, $message_id, $error );

            if ( mysql_query($sql) ) {
                // get the insert id
                $incoming_id = mysql_insert_id();
                echo $script_time . " - PrvMessage packet $message_id logged";
            } else {
                echo $script_time . " - PrvMessage failed logging";
            }

            mysql_query("BEGIN");

            // loop through the messages
            foreach( $xml->prvmsg as $prvmsg ) {

                $esn = esn_to_num($prvmsg->esn);
                $provid = $prvmsg->provID;
                $tstart = $prvmsg->tStart;
                $tend = $prvmsg->tEnd;
                $txretryminsec = $prvmsg->txRetryMinSec;
                $txretrymaxsec = $prvmsg->txRetryMaxSec;
                $txretries = $prvmsg->txRetries;
                $rfchannel = $prvmsg->rfChannel;

                $sql = 'REPLACE INTO PrvMessage ( ESN, ProvID, TStart, TEnd, TxRetryMinSec, TxRetryMaxSec, TxRetries, RFChannel, IncomingID) values ("'.$esn.'","'.$provid.'","'.$tstart.'","'.$tend.'","'.$txretryminsec.'","'.$txretrymaxsec.'","'.$txretries.'","'.$rfchannel.'","'.$incoming_id.'")';

                // Perform Insert
                $result = mysql_query($sql);

                // insert status "change" record
                $insert_sql = 'insert INTO STxStatusChangeHistory (StatusChangeID, ESN, Status, StatusChangeTimestamp) values ("","'.$esn.'","Provisioned",NOW())';

                // Perform Insert
                $insert = mysql_query($insert_sql);

                // Check result
                if (! $result) {

                    $status = false;
                    // log the error
                    echo 'Invalid provisioning: ' . mysql_error() . "\n";
                    echo 'Whole query: ' . $sql;

                } else {

                    $sql  = 'UPDATE STx SET Status="Provisioned" WHERE ESN ="'.$esn.'"';
                    $result = mysql_query($sql);

                    // Check result
                    if (! $result) {
                        $status = false;
                        // log the error
                        echo 'Invalid STx update during provisioning: ' . mysql_error() . "\n";
                        echo 'Whole query: ' . $sql;
                    }
                }

                unset($result);

                unset($esn);
                unset($provid);
                unset($tstart);
                unset($tend);
                unset($txretryminsec);
                unset($txretrymaxsec);
                unset($txretries);
                unset($rfchannel);

            }

            if ( $status ) {
                mysql_query("COMMIT");
            } else {
                mysql_query("ROLLBACK");
                msglog_update($message_id, "PrvMessage INSERT ERROR");
            }
        }

        // make our response xml for globalstar
        $response = make_globalstar_response_xml('prvResponseMsg', $message_id, $status);

    } elseif ( $xml_root == 'instmsgs' ) { // process instmsgs messages

        /*******************************************************************************
        * COMPONENT NAME:
        *  INSTMSGS
        *
        * DESCRIPTION:
        *  After the VAR gets the PRVMSGS and installs the RTU, it will send the
        *  INSTMSG back here to indicate where the unit was installed.
        *
        *******************************************************************************/

        $type = 'InstMessage';

        // what is the message id
        $xml_messageID = $xml->xpath('/instmsgs/@instMessageID');
        foreach ( $xml_messageID as $id ) {
            $message_id = $id;
        }

        // how many messages
        $message_count = count($xml->xpath('/instmsgs/instmsg'));

        if ( $message_count >= 1 ) {

            // fomat the sql string for logging
            $sql = get_msglog_sql($type, $source, $byte_count, $message_id, $error );

            if ( mysql_query($sql) ) {
                // get the insert id
                $incoming_id = mysql_insert_id();
                echo $script_time . " - InstMessage packet $message_id logged";
            } else {
                echo $script_time . " - InstMessage failed logging";
            }

            mysql_query("BEGIN");

            // loop through the messages
            foreach( $xml->instmsg as $instmsg ) {

                $esn = esn_to_num($instmsg->esn);
                $provid = $instmsg->provID;
                $rfchannel = $instmsg->rfChannel;
                $tactual = $instmsg->tActual;
                $deltat = $instmsg->deltaT;
                $latitude = $instmsg->latitude;
                $longitude = $instmsg->longitude;
                $txretries = $instmsg->txRetries;
                $txoffset = $instmsg->txOffset;
                $txretryminsec = $instmsg->txRetryMinSec;
                $txretrymaxsec = $instmsg->txRetryMaxSec;
                $powerlevel = $instmsg->powerLevel;

                $sql = 'REPLACE INTO InstMessage ( ESN
                ,ProvID
                ,IncomingID
                ,RFChannel
                ,TActual
                ,DeltaT
                ,Latitude
                ,Longitude
                ,TxRetries
                ,TxOffset
                ,TxRetryMinSec
                ,TxRetryMaxSec
                ,PowerLevel ) values ("'.$esn.'"
                ,"'.$provid.'"
                ,"'.$incoming_id.'"
                ,"'.$rfchannel.'"
                ,"'.$tactual.'"
                ,"'.$deltat.'"
                ,"'.$latitude.'"
                ,"'.$longitude.'"
                ,"'.$txretries.'"
                ,"'.$txoffset.'"
                ,"'.$txretryminsec.'"
                ,"'.$txretrymaxsec.'"
                ,"'.$powerlevel.'")';

                // Perform Insert
                $result = mysql_query($sql);

                // Check result
                if (! $result) {

                    $status = false;
                    // log the error
                    echo 'Invalid InstMessage sql: ' . mysql_error() . "\n";
                    echo 'Whole query: ' . $sql;

                } else {

                    $sql  = 'UPDATE STx SET Status="Installed" WHERE ESN ="'.$esn.'"';
                    $result = mysql_query($sql);

                    // Check result
                    if (! $result) {
                        $status = false;
                        // log the error
                        echo 'Invalid STx update during Install: ' . mysql_error() . "\n";
                        echo 'Whole query: ' . $sql;
                    }
                }
                unset($result);
                unset($esn);
                unset($provid);
                unset($tstart);
                unset($tend);
                unset($txretryminsec);
                unset($txretrymaxsec);
                unset($txretries);
                unset($rfchannel);
                unset($txoffset);
                unset($txretryminsec);
                unset($txretrymaxsec);
                unset($powerlevel);
            }

            if ( $status ) {
                mysql_query("COMMIT");
            } else {
                mysql_query("ROLLBACK");
                msglog_update($message_id, "InstMessage INSERT ERROR");
            }
        }

        // make our response xml for globalstar
        $response = make_globalstar_response_xml('instResponseMsg', $message_id, $status);

    } elseif ( $xml_root == 'inimsgs' ) { // process inimsgs messages

        /*******************************************************************************
        * COMPONENT NAME:
        *  INIMSGS
        *
        * DESCRIPTION:
        *  The 'INIMSGS' are the messages sent to begin the provisioning process. The
        *  message contains a range of ESN numbers to be provisiond. The 'INIMSGS'
        *  are forwarded to Globalstar. Then, the 'get_prvmsgs' function is called
        *  to poll the database for the response 'prvmsgs' that Globalstar will send.
        *
        *******************************************************************************/

        $type = 'inimsgs';

        // what is the message id
        $xml_messageID = $xml->xpath('/inimsgs/@iniMessageID');
        foreach ( $xml_messageID as $id ) {
            $message_id = $id;
        }

        // how many messages
        $message_count = count($xml->xpath('/inimsgs/inimsg'));

        if ( $message_count >= 1 ) {

            /* DONT FORGET - have a trigger in the database to set a default route for NASCORP */

            $sql = "INSERT INTO STx (ESN, RouteID, GroupID, SubGroupID, STxModel, STxModelGenType, STxName, Note, Status, FilterProfile) VALUES ";
            $sep = "";

            /* FOR EACH OF THE MESSAGES IN THE PACKET.. .*/
            foreach ( $xml->inimsg as $inimsg ) {

                $groupid = $inimsg->groupID;

                $subgroupid = strlen($inimsg->subGroupID) ?    $inimsg->subGroupID : 'NULL';

                /* FIRST CHECK THAT THE REQUESTED RANGE IS AVAILABLE */
                $esnStart = $inimsg->esnStart;
                $esnEnd   = $inimsg->esnEnd;
                $number   = check_esn_range($esnStart, $esnEnd, $inuse);
                $isreal   = ($inimsg->isReal == 'Yes') ? true : false;
                $route_id = get_route_id($groupid, $inimsg->routeAddress);

                if ( $number > 0 ) {

                    /* SPLIT THE ESN NUMBER INTO MANUFACTURER AND SERIAL NUMBER */
                    $esnS = explode('-', $esnStart);
                    $esnE = explode('-', $esnEnd);

                    /* FOR EACH ESN IN THE SPECIFIED RANGE... */
                    for ( $mfg=(int) $esnS[0]; $mfg <= (int) $esnE[0]; $mfg++ ) {

                        for ( $ser=(int) $esnS[1]; $ser <= (int) $esnE[1]; $ser++ ) {

                            $sxtmodel = $inimsg->stxModel;
                            $sxtmodelgentype='1';

                            switch ($sxtmodel) {
                                case "101-1":
                                    $sxtmodel = '101';
                                    $sxtmodelgentype = "1";
                                break;
                                case "101-2":
                                    $sxtmodel = '101';
                                   $sxtmodelgentype = "2";
                               break;
                                case "101-3":
                                    $sxtmodel = '101';
                                   $sxtmodelgentype = "3";
                               break;
                            }

                            $esn = (($mfg << 23) | $ser);
                            $sql .= $sep;
                            $sql .= sprintf("(%d ,%d ,%d ,%s ,'%s' ,'%s' ,'%s' ,'%s' ,'%s' ,'%s' )",
                             $esn
                            ,$route_id
                            ,$groupid
                            ,$subgroupid
                            ,mysql_escape_string($sxtmodel)
                            ,$sxtmodelgentype
                            ,mysql_escape_string($inimsg->stxName)
                            ,mysql_escape_string($inimsg->note)
                            ,$isreal ? 'Initiated' : 'Fake'
                            ,$inimsg->filterProfile);
                            $sep = ",";
                        }
                    }

                    $groupid     = $inimsg->groupID;
                    $subgroupid = $inimsg->subGroupID;
                    $esnstart     = esn_to_num($inimsg->esnStart);
                    $esnend     = esn_to_num($inimsg->esnEnd);
                    $stxmodel    = $inimsg->stxModel;
                    $stxname     = $inimsg->stxName;
                    // new filter setting
                    $filterprofile     = $inimsg->filterProfile;
                    $routeaddress     = $inimsg->routeAddress;
//                    $mobility         = $inimsg->mobility;
//                    $latdefault     = $inimsg->latDefault;
//                    $londefault     = $inimsg->lonDefault;
                    $stxspacing     = $inimsg->txSpacing;
//                    $txfrequency     = $inimsg->txFrequency;
//                    $trequestedstart = $inimsg->tRequestedStart;
//                    $trequestedend  = $inimsg->tRequestedEnd;
                    $note             = $inimsg->note;
                    $isreal             = $inimsg->isReal;

                    $insert_inimessage = 'INSERT INTO IniMessage (GroupID
                    ,SubGroupID
                    ,ESNStart
                    ,ESNEnd
                    ,STxModel
                    ,STxName
                    ,FilterProfile
                    ,TxSpacing
                    ,RouteAddress
                    ,Note
                    ,IsReal) VALUES ("'.$groupid.'"
                    ,"'.$subgroupid.'"
                    ,"'.$esnstart.'"
                    ,"'.$esnend.'"
                    ,"'.$stxmodel.'"
                    ,"'.$stxname.'"
                    ,"'.$filterprofile.'"
                    ,"'.$stxspacing.'"
                    ,"'.$routeaddress.'"
                    ,"'.$note.'"
                    ,"'.$isreal.'")';

                    mysql_query("BEGIN");

                    if ( mysql_query($insert_inimessage) ) {
                        // not used for anything
                        $inserted = true;
                    } else {
                        $status=false;
                    }

                    unset($groupid);
                    unset($subgroupid);
                    unset($esnstart);
                    unset($esnend);
                    unset($stxmodel);
                    unset($stxname);
                    unset($filterprofile);
                    unset($routeaddress);
                    unset($mobility);
                    unset($stxspacing);
                    unset($note);
                    unset($isreal);

                } else {

                    $status = false;
                    echo $script_time . " invalid ESN range\n".$raw_post_data;
                }
            }

            /* IF THE CONTENTS OF THE MESSAGE LOOKED OK, THEN COMMIT
            IT TO THE DATABASE... */

            /* CREATE THE STx TABLE ENTRIES */
            if ( $status ) {

                if ( $status = mysql_query($sql) ) {
                    mysql_query("COMMIT");
                } else {
                    $doc->errors = mysql_error();
                    mysql_query("ROLLBACK");
                }
            } else {
                $doc->errors = mysql_error();
                mysql_query("ROLLBACK");
            }

        } else {
            $status = false;
            echo $script_time . " no messages in xml \n".$raw_post_data;
        }

        // make our response xml for globalstar
        $response = make_globalstar_response_xml('iniResponseMsg', $message_id, $status);
    }

} else {

    // failed to load xml so lets fail
    $status=false;

    $response = make_globalstar_response_xml('xml_error', 0, $status);    
    echo $script_time . " - xml error\n" . $raw_post_data;
}
// log any output
$msgproc_log = '/usr/local/www/logs/msgproc_log';

// collect any trash here for logging
$buffer_string = ob_get_contents()."\n";

// Let's make sure the file exists and is writable first.
if ( is_writable($msgproc_log) ) {

    // The file pointer is at the bottom of the file hence
    $handle = @fopen($msgproc_log, 'a');

    // Write $response to our opened file.
    @fwrite($handle, $buffer_string);
    @fclose($handle);
}

//empty buffer to logs so that globalstar gets response only
ob_end_clean();

mysql_close();

// send the output for Globalstar to see
echo $response;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:01:34.960

**msgproc.php**有依赖关系。没有人有时间调试它。所以这样做：

*尝试跟踪服务器处理代码。*

```
echo __LINE__, PHP_EOL; flush(); // every few lines :)
// even followed by a die; to slowly move deeper into the code 
```

穷人调试。并查看输出停止的地方，慢慢查明问题。还有 set_error_handler 和 set_exception_handler 看看是否有什么被抓到。

# jsf - 如何将列值传输到我的托管 bean？

> ID：12978934
> 
> 赞同：0
> 
> 时间：2012-10-19T16:56:52.280
> 
> 标签：jsf, jakarta-ee, datatable

我在 JSF 中使用数据表：

```
<h:dataTable  var="dataItem" value="#{operationsBean.creneauxMedecin}" border="1">
            <f:facet name="header">
                <h:outputText value="Rendez-vous de #{operationsBean.medecin.titre} #{operationsBean.medecin.prenom} #{operationsBean.medecin.nom} le #{operationsBean.txtJour}"></h:outputText>
            </f:facet>
            <h:column>
                <f:facet name="header">
                    <h:outputText value="Créneau horaire"></h:outputText>
                </f:facet>
                    <h:outputText id="id" value="#{dataItem.hdebut}h#{dataItem.mdebut}-#{dataItem.hfin}h#{dataItem.mfin}"/>
            </h:column>
            <h:column>
                <f:facet name="header">
                    <h:outputText value="Client"/>
                </f:facet>
                <h:outputText value="#{operationsBean.clt }"/>
            </h:column>
        </h:dataTable> 
```

请问如何将列的（（（dataItem.id）））值转移到我的托管bean？NB dataItem 是一个数据表行，其中包含（id，version，hdebut，mdebut ....）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:08:24.227

您必须在托管 bean 中实现一个动作侦听器方法，并通过命令链接调用它并将参数作为标签的一部分传递，如果您使用谷歌搜索，您可以看到很多示例。

```
<h:commandLink value="click me" actionListener="#{managedbean.actionListenerMethod}">
  <f:param name="paramInternalId" value="#{dataTableIter.id}" />
</h:commandLink> 
```

[http://docs.oracle.com/javaee/5/tutorial/doc/bnaqd.html#bnaqj](http://docs.oracle.com/javaee/5/tutorial/doc/bnaqd.html#bnaqj)

# android - 如何避免同时调用 onItemClick 和 onCreateContextMenu

> ID：12978935
> 
> 赞同：1
> 
> 时间：2012-10-19T16:56:58.113
> 
> 标签：android, callback, android-listview, android-view

我的活动使用 ListView。我想在用户长按一个项目时做 X 和当他正常点击时做 Y 。我的 onCreate() 包含如下代码：

```
mListView = (ListView) findViewById(android.R.id.list);
registerForContextMenu(mListView);
mListView.setOnItemClickListener(this); 
```

我看到的行为是，当用户长按一个项目时，onCreateContextMenu() 和 onItemClick() 都会被调用。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:09:20.773

试试这个，我已经测试过了，上下文菜单只在长按时调用，onclick 只发生 listview 点击项事件

```
package com.example.listview;

import android.app.ListActivity;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.ContextMenu;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class ListViewExampleActivity extends ListActivity {

static final String[] STATES = new String[] { "Haryana", "Punjab", "Rajasthan",
        "Maharashtra", "Madhya Pradesh", "Kerala", "Jammu","Bihar","Karnataka" , "TamilNadu",
                "Uttar Pradesh" ,"Gujrat"};
View listColor;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setListAdapter(new ArrayAdapter<String>(this, R.layout.main,STATES));

    ListView listView = getListView();
    listView.setTextFilterEnabled(true);

    listView.setBackgroundColor(getTitleColor());
    registerForContextMenu(listView);
    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            if(listColor!=null){
                listColor.setBackgroundColor(Color.BLACK);
                listColor=view;
            }else{

                listColor=view;

            }
            Log.i("called", "item click");
            listColor.setBackgroundColor(Color.BLUE);
           //on click of any item the item name will be shown in toast
            Toast.makeText(getApplicationContext(),
            ((TextView) view).getText(), Toast.LENGTH_SHORT).show();
        }
    });

}
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
    ContextMenuInfo menuInfo) {
    Log.i("called", "Context menu");
    Toast.makeText(getApplicationContext(),
            "Context menu", Toast.LENGTH_SHORT).show();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-09T21:05:34.677

为列表视图设置`OnItemLongClickListener`to`null`似乎可以解决问题，让长按处理显示上下文菜单：

```
mListView = (ListView) findViewById(android.R.id.list);
registerForContextMenu(mListView);
mListView.setOnItemClickListener(this);
mListView.setOnItemLongClickListener(null); 
```

如果这感觉太 hacky 设置`OnItemLongClickListener`为`null`，您也可以将其设置为`OnLongClickListener`返回`false`，表示没有消耗长按。

```
mListView.setOnLongClickListener(new OnLongClickListener() {
  @Override
  public boolean onLongClick(View v) {
    return false;
  }
}); 
```

# javascript - 菜单选项卡仅在 Internet Explorer 8 中无法正常工作

> ID：12978936
> 
> 赞同：0
> 
> 时间：2012-10-19T16:57:09.800
> 
> 标签：javascript, html, css, internet-explorer-8

菜单选项卡仅在 Internet Explorer 8 中无法正常工作菜单选项卡仅在 Internet Explorer 8 中无法正常工作我的 HTML 网页上的上述链接中的选项卡在 IE8 中无法正常工作。它们在 IE9、safari、Firefox、opera 等中工作。

IE 中的问题是，当单击选项卡时，它不会打开。

HTML：

```
div id="tab2" class="css-tabs">
        <ul class="noint11_menu">
            <li id="item-1"> <a href="#item-1">Shipping</a>
                <div>
                    <p><img id="shippingtable" src="http://www.ubreakirepair.com/ebaysite/images/shippingtable.png"/></p>
                    <div class="footer">----------</div>
                </div>
            </li>
            <li id="item-2"> <a href="#item-2">Payment</a>
                <div>
                    <p>Tab Content 2</p>
                     <div class="footer">---------</div>
                </div>                
            </li>
            <li id="item-3"> <a href="#item-3">Returns</a>
                <div id="notice">
                    <p>content </p>
                    <div class="footer">---------</div>
                </div>
            </li>
            <li id="item-4" title="click for Tab 4"> <a href="#item-4">Tab 4</a>
                <div>
                    <p>Tab Content 4</p>
                    <div class="footer">------------</div>
                </div>
            </li>
        </ul>
    </div></td> 
```

CSS：

```
.css-tabs {
    position: relative;
    text-align: left; /* This is only if you want the tab items at the center */
    height: auto;
    margin-left:-30px;
    display: 
}
.css-tabs ul.noint11_menu {
    list-style-type: none;
    display: inline-block; /* Change this to block or inline for non-center alignment */
}
.css-tabs ul.noint11_menu > li {
    display: block;
    float: left;
}
.css-tabs ul.noint11_menu li > a {
    color: #EEEEEE;
    text-shadow: 1px 1px 1px #000;
    font-family: 'MuliLight', Arial, sans-serif;
    font-size: 14px;
    text-decoration: none;
    display: block;
    text-align: center;
    border: 1px solid #002232;
    padding: 5px 10px 5px 10px;
    margin-right: 10px;
    -moz-user-select: none;
    cursor: pointer;
    background: #014464;

}
.css-tabs ul.noint11_menu li > div {
    display: none;
    position: absolute;
    width: 100%;
    left: 0;
    color: #ccc;
    text-align: left;
    padding: 0;
    margin-left: 32px;
    background: #181818 /* added this */;
    height:350px

}
.css-tabs ul.noint11_menu li > div > p {
    border: transparent;
    padding: 10px;
    margin: 0;
}
.css-tabs ul.noint11_menu li > a:focus {
    border-bottom: 1px solid #fff;
}
.css-tabs ul.noint11_menu li:target > a {
    cursor: default;
    border-bottom: 1px solid #fff;
}
.css-tabs ul.noint11_menu li:target > div {
    display: block;
}
#item-1 div {display: block}
#item-2 div { height:535px}
#item-3 div { height:535px}
#item-4 div { height:535px}

.footer{color:#fff; text-align:center}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:25:48.330

[IE8 不支持`:target`](http://caniuse.com/#search=target)，这是您显示这些选项卡所依赖的。

我相信您最好的选择是将标签内容分成不同的页面，并在顶部使用一组链接进行导航。您的导航链接可以设置为类似于选项卡的样式，因此该站点仍然可以看起来相同 - 单击每个选项卡后您只需加载一个页面。

即使对于使用现代浏览器的用户，这种选择也不会那么混乱，因为他们的后退和前进按钮在他们浏览网站时将以可预测的方式运行。

`:target`更好地用于突出显示用户在单击部分链接后跳转到的页内锚点。使用它来伪造一个选项卡控件，其中隐藏了页面中的大块主要内容似乎不太容易访问或用户友好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:58:32.013

您正在尝试使用`:target`IE8 不支持的 CSS 功能。

如果您想支持旧版浏览器，最好的解决方案是重新考虑您的导航设计，使其不使用这些浏览器中不存在的现代浏览器功能。

但是，如果您确实需要使用此功能，您可以从[Selectivizr 库](http://selectivizr.com/)中获得一些帮助。这是一个 polyfill 脚本，它为旧版本的 IE 添加了对各种现代 CSS 选择器的支持。

这包括`:target`选择器，因此理论上，将 Selectivizr 添加到您的站点应该可以解决您的问题。（但请注意，在 的情况下`:target`，Selectivizr 仅支持 IE8；如果您还需要支持 IE7 或 IE6，它将无法工作——即使 Selectivizr 也只能用它提供的功能做很多事情）。

（另请注意，Selectivizr 要求您还包括一个支持库，例如 jQuery；我注意到您的页面目前根本没有任何 javascript，因此添加这可能是一个很大的负担，但您至少可以最小化通过使用条件注释对其进行编码来产生影响，以便它仅由 IE8 加载）

# visual-studio-2010 - 没有exe文件的MFC项目

> ID：12978937
> 
> 赞同：0
> 
> 时间：2012-10-19T16:57:12.153
> 
> 标签：visual-studio-2010, mfc

我在基于 c++ 的 Visual Studio mfc 上做了一个项目。它有图形用户界面。我想在其他计算机上使用它的 exe 文件，这样只要该计算机开机，exe 文件就会自动启动。

总之，我不想自己在电脑上打开那个 exe 文件。iT 应该自动执行。

你们应该怎么建议？谢谢

# mysql - 使用 wpdb 的嵌套查询

> ID：12978938
> 
> 赞同：0
> 
> 时间：2012-10-19T16:57:16.757
> 
> 标签：mysql, foreach, wordpress

`<h3><?php echo $name; ?></h3>`我试图为循环中出现的每个项目显示几行数据。

使用当前代码，它只为每个项目显示一行`<h3><?php echo $name; ?></h3>`

我的functions.php文件中有这个 `$newdb = new wpdb('login', 'pass', 'db', 'host');`

```
<?php $result=$newdb->get_results('select tbl1.name, tbl2.col1, tbl2.col2, tbl2.col3 from tbl1, tbl2 where tbl1.name=tbl2.tbl1_name');
$names=array();
foreach($result as $row): ?>
<?php $names[$row->name][]=$row;
endforeach; ?>
<?php foreach($names as $name=>$info): ?>

    <h3><?php echo $name; ?></h3>
    <table>
       <tr><th>col1</th><th>col2</th><th>col3</th></tr>
        <?php foreach($info as $n):?>       
        <tr>
            <td><?php echo $n->col1; ?></td>
            <td><?php echo $n->col2; ?></td>
            <td><?php echo $n->col3; ?></td>    
        </tr>
        <?php endforeach; ?>
    </table>    
<?php endforeach; ?> 
```

所以循环显示标题后跟几行记录，而不仅仅是一行。

```
<h2>Name</h2>
<table>
<tr><th>col1</th><th>col2</th><th>col3</th></tr>
        col1-value1  col2-value1  col3-value1
        col1-value2  col1-value2  col1-value2
        etc.
</table>

<h2>Name</h2>
<table>
<tr><th>col1</th><th>col2</th><th>col3</th></tr>
        col1-value1  col2-value1  col3-value1
        col1-value2  col1-value2  col1-value2
        etc.
</table>

<h2>Name</h2>
<table>
<tr><th>col1</th><th>col2</th><th>col3</th></tr>
        col1-value1  col2-value1  col3-value1
        col1-value2  col2-value2  col3-value2
        etc.
</table>
.....` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T19:22:45.913

可以使用您的想法，但您可以使用一个查询来做到这一点

```
global $wpdb;
$result=$wpdb->get_results('select a.col, b.col1, b.col2, b.col3 from a,b where a.col=b.col5'); 
```

假设你有`tbl1`一个表，它有一个`name`字段和一个`tbl2`表，它有一个字段，例如`tbl1_name`，它具有名称字段和其他字段的名称值`tbl1`，（没有重复）所以你可以加入两个表，如

```
$result=$wpdb->get_results('select tbl1.name, tbl2.col1, tbl2.col2, tbl2.col3 from tbl1, tbl2 where tbl1.name=tbl2.tbl1_name');
$names=array();
foreach($result as $row): ?>
    $names[$row->name][]=$row;
<?php endforeach; ?>
foreach($names as $name=>$info):
    echo $name;
    ?><table><?php
    foreach($info as $n):
    ?>
            <tr>
                <td><?php echo $n->col1; ?></td>
                <td><?php echo $n->col2; ?></td>
                <td><?php echo $n->col3; ?></td>
            </tr>
    <?php
    <?php endforeach; ?>
    ?></table><?php
<?php endforeach; ?> 
```

另请记住`$wpdb`，它是一个全局对象，可通过模板文件使用，因此您无需使用`new`创建实例，只需使用`global`我在回答中写的关键字即可。

[**类参考/wpdb**](http://codex.wordpress.org/Class_Reference/wpdb)和[**sql join**](http://www.datamartist.com/sql-inner-join-left-outer-join-full-outer-join-examples-with-syntax-for-sql-server)和[**这个**](http://w3resource.com/sql/joins/sql-joins.php).

# c# - 可以在 xna 和 c# 或 vb.net 的 xbox 360 上使用 No-SQL 吗？

> ID：12978942
> 
> 赞同：0
> 
> 时间：2012-10-19T16:57:30.580
> 
> 标签：c#, database, xna

我想知道他们是完全用 c# 编写的 no-sql 的 dll 库，可以创建用于 xbox 360 的数据库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:02:04.097

[BerkeleyDB](http://www.oracle.com/technetwork/products/berkeleydb/overview/index.html)是一个 KeyValue 嵌入式数据库，本质上是 SQLite 的 NoSQL 等价物。这是一个[C# 教程](http://www.tsjensen.com/blog/post/2011/09/03/How+To+Get+Berkeley+DB+5228+And+NET+Examples+Working+In+Visual+Studio+2010+SP1.aspx)。

但是，我强烈建议为此寻找替代解决方案。除非您有大量数据，否则最好将所有对象保存在 RAM 中，并根据需要使用 JSON、XML 或任何您想要的序列化程序进行持久化。LINQ 使查询内存对象变得异常容易，就像查询数据库一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:19:39.140

我找到了另一种可能的开源解决方案：http: [//ostrivdb.codeplex.com/](http://ostrivdb.codeplex.com/)

其原因是 xbox 上的 xml 编码本身很糟糕，并且在大型游戏项目中变得过于复杂。

我仍然会点击 Dharuns 的答案，因为他更新了 c# 教程，但我想展示我在说什么。

# javascript - iFrame 链接在

> ID：12978945
> 
> 赞同：0
> 
> 时间：2012-10-19T16:57:49.610
> 
> 标签：javascript, html, css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T19:21:41.370

我猜您使用框架是因为您想将视频保存在某个位置？我建议`<video>`在 html5 中使用标签而不是 iframe。

```
<video width="400" height="225" controls="controls">
  <source src="video/aps_production.mp4" type="video/mp4">
Your browser does not support the video tag.
</video> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:57:33.970

给 iframe 一个 id 并将其定位在链接的 url: 中`iframe id="iframe"`，然后附加`#iframe`到链接所在文档的 url。`a href="url.html#iframe"`

# android - 没有缩放级别 Android 的 MapView

> ID：12978946
> 
> 赞同：2
> 
> 时间：2012-10-19T16:57:54.743
> 
> 标签：android, android-mapview

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:14:06.257

本地 Google 地图应用程序不使用平铺图像，它们以某种方式呈现矢量图形，因此它们可以更精确地缩放地图（注意，您甚至可以更改视角并获得伪 3d 视图）。

我们`MapView`（开发人员）使用平铺图像。这意味着对于每个缩放级别，您都有地图的预渲染图像。这也意味着你不能有任何精度，你有离散的缩放级别（范围从 1 到 20 左右），就是这样，你在这两个缩放级别之间没有任何东西。因此，如果您假设缩放级别为 15 并且您几乎没有捏，您将获得缩放级别 14 或返回到 15。

编辑：谷歌发布了[Maps v2](https://developers.google.com/maps/documentation/android/)，它使用矢量图块，似乎与谷歌地图应用程序中使用的相似：

> Maps API 现在使用矢量切片。它们的数据表示更小，因此地图在您的应用程序中出现的速度更快，并且使用的带宽更少。

# javascript - Java servlet 的请求参数名称设置为整个 json 对象

> ID：12978947
> 
> 赞同：1
> 
> 时间：2012-10-19T16:57:56.117
> 
> 标签：javascript, ajax, json, jsp

我正在通过 ajax 将 json 对象发送到 java servlet。json 对象是键值类型，具有三个指向数组的键和一个指向单个字符串的键。我用这样的javascript构建它：

```
var jsonObject = {"arrayOne": arrayOne, "arrayTwo": arrayTwo, "arrayThree": arrThree, "string": stringVar}; 
```

然后我使用 ajax 将它发送到 java servlet，如下所示：

```
httpRequest.open('POST', url, true);  
httpRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");  
httpRequest.setRequestHeader("Connection", "close");  
var jsonString = jsonObject.toJSONString();   
httpRequest.send(jsonString); 
```

这会将字符串发送到我的 servlet，但它没有像我期望的那样显示。整个 json 字符串被设置为我的请求参数之一的名称。所以在我的 servlet 中，如果我做 request.getParameterNames(); 它将返回一个枚举，其中一个表条目的键是整个对象内容。我可能弄错了，但我的想法是它应该将每个键设置为不同的参数名称。所以我应该有 4 个参数，arrayOne、arrayTwo、arrayThree 和字符串。我做错了什么还是我的想法在这里？任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:06:12.470

当您将 content-type 设置为 时`application/x-www-form-urlencoded`，您是在告诉服务器请求内容将是一个格式为 的字符串`"param1=value1&param2=value2..."`。但是您的实际内容只是一个值；内容类型与`x-www-form-urlencoded`JSON 无关。如果要将请求作为 JSON 传递，则需要将内容类型设置为`application/json`，然后在服务器端有一个 JSON 解析器来解析它并提取键/值对。

或者，您可以保持`x-www-form-urlencoded type`, 循环遍历您的 JSON 对象，并且对于每个键/值对，将值序列化为 JSON 字符串和 URL 编码，并使用它来构建如下所示的请求字符串：

```
arrayOne=<arrayOne JSON string>&arrayTwo=<arrayTwo JSON String>&... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:08:02.840

这是预期的行为，您正在将对象转换为字符串（使用 toJSONString），并将其作为请求参数发送。您可能希望使用 Jackson、Jettison 或 XStream 等库在服务器端解析 JSON 值，请参阅[http://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson /](http://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson/)

# matlab - matlab中的相邻节点和分离

> ID：12978948
> 
> 赞同：1
> 
> 时间：2012-10-19T16:57:58.503
> 
> 标签：matlab, matrix, plot

在 matlab 上，我有一个邻接矩阵并使用一个函数，我想知道如何绘制一个直方图，显示 2 个给定节点（最多 10 个）之间的分离度。到目前为止，我只有一个查找节点邻居的函数。基本上它类似于 6 度分离度的概念，除了 10 度。

谢谢！

```
function n=neighbour(A,v)

global n;

    for i=1:length(v)
        a=find(A(:,v(i))+A(v(i),:)');
        n=setdiff(a(:)',v(i));
    end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:59:02.523

通常，这是使用[Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm)解决的，该算法计算图中所有节点对之间的最短路径。

由于您使用的是 Matlab 并且因为任何两个连接节点之间的距离始终相同（“1 步”），您可以使用涉及矩阵乘法的技巧：如果您有一个邻接矩阵`A`，则提高`A`到`N`th 次幂给出你是一个新矩阵，它告诉你每对节点之间存在多少条*长度路径。`N`*因此，在一个循环中，将 A 提高到 1 次方、2 次方等，并注意每个元素在哪个次方变为非零。最大路径长度等于节点数，因此您可以停在那里。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:29:08.233

无标度网络可视化，包括分离度的直方图可以在这个[链接](http://www.mathworks.nl/matlabcentral/fileexchange/11947-b-a-scale-free-network-generation-and-visualization)中找到，可能会有所帮助......

# sql-server - Upsert - VB.Net、SQL Server 中的高效更新或插入

> ID：12978959
> 
> 赞同：0
> 
> 时间：2012-10-19T16:58:34.370
> 
> 标签：sql-server, vb.net, ado.net

我试图了解如何简化插入记录（如果不存在）或更新记录（如果已存在）的过程。我没有使用存储过程，尽管这可能是最有效的方法。

需要这样做的实际场景是将用户首选项/设置保存到我的 SettingsUser 表中。

在 MS Access 中，我通常会提取一个 DAO 记录集以查找指定的设置。如果记录集返回为空，那么我知道我需要添加一条新记录，我可以使用相同的记录集对象执行此操作。另一方面，如果它不为空，我可以立即更新设置的值。理论上，这只是两个数据库操作。

在 .NET 中执行此操作的推荐方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:06:49.610

存储过程当然是一种简单的方法。在那里您可以尝试更新记录，如果没有记录更改，则添加它。例子：

```
create procedure UpateUserSetting
  @UserId int,
  @Setting int
as

set nocount on

update UserSetting
set Setting = @Setting
where UserId = @UserId

if (@@rowcount = 0) begin

  insert into UserSetting (
    UserId, Setting
  ) values (
    @UserId, @Setting
  )

end 
```

您可以在没有存储过程的情况下执行相同的操作。然后，您将首先运行更新，并检查从[`ExecuteNonQuery`方法](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)返回的受影响行数，并在需要时在另一个查询中插入。

# php - 是否可以使用 PHP 将一个站点上的 Servlet 应用程序嵌入到另一个站点中？

> ID：12978964
> 
> 赞同：0
> 
> 时间：2012-10-19T16:58:44.507
> 
> 标签：php, servlets

假设一个网站有一个使用 Servlet 制作的目录。从理论上讲，如何使用 PHP 将该目录应用程序嵌入到他自己的网站中？那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:05:45.537

最简单的方法是使用 HTML `<iframe>`。

```
<iframe src="http://other.com/catalog"></iframe> 
```

这样，网络浏览器将透明地处理这一切。

如果你真的需要在你自己的 HTML 输出中内联其他目录 webapp 的 HTML 输出，那么你需要使用[curl](http://php.net/manual/en/book.curl.php)来获取它，[解析](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)HTML，提取 body 元素（你[不能](http://validator.w3.org)嵌套`<html>`，里面`<html>`）和操作 HTML `<a>`、`<link>`、`<script>`、`<img>`等元素中的所有相对链接，使它们指向您的域（否则 CSS/JS/images/links 将停止工作），最后只是将其回显到响应中。然而，这一切都不是微不足道的。然后，您基本上充当了另一个 webapp 的代理。请注意，您可能还需要代理来自`<form>`其他 web 应用程序 HTML 的提交的所有请求（如果有）。

# java - 有没有使用 WordNet 的简单的基于 Java 的词义消歧？

> ID：12978968
> 
> 赞同：4
> 
> 时间：2012-10-19T16:59:05.260
> 
> 标签：java, api, word-sense-disambiguation

我正在寻找使用 WordNet 的基于 java 的 WSD，它根据上下文返回适当的词义。你能给我一些吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-02T22:23:16.773

我认为[BabelNet](http://lcl.uniroma1.it/babelnet/)可能对你有用。它根据来自 WordNet 和 Wikipedia 的数据进行词义消歧。

[这篇论文](http://www.aclweb.org/anthology/P12-3012)(pdf) 解释了它是如何工作的，并展示了一个使用其 API 的 WSD 示例。

# perl - Perl：如何从基类导入子程序？

> ID：12978971
> 
> 赞同：6
> 
> 时间：2012-10-19T16:59:23.850
> 
> 标签：perl, oop, inheritance, import, base

我有一个名为 Foo::Base 的基类，我需要继承它的方法，比如“new”，并在一个范围内导入一些子例程名称：

```
package Foo::Base;

sub new { ... }

sub import {
    no strict 'refs';

    my $caller = caller;

    *{"${caller}::my_sub"} = sub { 1 };
}

1; 
```

所以，我需要在我的第二堂课 Foo::Child 中使用这个基类：

```
use base 'Foo::Base'; 
```

...并且它适用于继承，但它不会在范围内导入“my_sub”。我可以添加字符串

```
use Foo::Base; 
```

对于它，它有帮助，但我不想写这样的东西：

```
use base 'Foo::Base';
use Foo::Base; 
```

这看起来有点奇怪......这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T18:30:05.530

有两个原因可能想要做你正在做的事情，它们都是不好的。

首先是你试图从你的父类中导入方法......出于某种原因。也许你误解了 OO 的工作原理。你不需要这样做。只需将继承的方法称为方法，除非这些方法正在做一些古怪的事情，否则它将正常工作。

更有可能这是一个混合使用的模块，其中一些是方法，一些是导入的函数。为此，您可以...

```
use base 'Foo::Base';
use Foo::Base; 
```

你正确地观察到它看起来有点奇怪......因为它有点奇怪。一个也导出的类是混合成语，这将导致奇怪的使用模式。

最好的办法是重新设计类而不是导出函数，或者将函数拆分到它们自己的模块中，或者使它们成为类方法。如果这些功能真的与类没有太大关系，那么最好将它们分离出来。如果它们确实与类有关，则将它们设为类方法。

```
use base 'Foo::Base';

Foo::Base->some_function_that_used_to_be_exported; 
```

这消除了接口不匹配，并且作为奖励，子类可以像任何其他方法一样覆盖类方法行为。

```
package Bar;

use base 'Foo::Base';

# override
sub some_function_that_used_to_be_exported {
    my($class, @args) = @_;

    ...do something extra maybe...

    $class->SUPER::some_function_that_used_to_be_exported(@args);

    ...and maybe something else...
} 
```

如果您无法控制基类，您仍然可以通过编写一个将导出的函数转换为方法的子类来使接口更加健全。

```
package SaneFoo;

use base 'Foo::Base';

# For each function exported by Foo::Base, create a wrapper class
# method which throws away the first argument (the class name) and
# calls the function.
for my $name (@Foo::Base::EXPORT, @Foo::Base::EXPORT_OK) {
    my $function = Foo::Base->can($name);
    *{$name} = sub {
        my $class = shift;
        return $function->(@_);
    };
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-19T17:41:47.203

编写时`use base`，您正在使用**`base`**模块的功能。并且您正在向它传递您希望成为基类的模块的参数。

在 OO IS-A 关系中，不需要导入。您使用 OO 模式调用方法：`$object_or_class->method_name( @args )`. 有时这意味着你不在乎调用者是谁，就像这样：

```
sub inherited_util {
    my ( undef, @args ) = @_;
    ... 
} 
```

或者

```
sub inherited2 { 
    shift;
    ...
} 
```

但是，如果您想*使用*基本模块中定义的实用程序并从该模块中定义的类行为*继承*，那么这正是两个 use 语句所指示的。

尽管如此，如果您想在模块中使用两种不同类型的行为，最好将实用程序类型的东西拆分到它们自己的模块中，并从两个模块中使用它。无论哪种方式，显式行为通常都比隐式行为好。

*但是*，我以前使用过这种模式：

```
sub import { 
    shift;
    my ( $inherit_flag ) = @_;
    my $inherit 
        = lc( $inherit_flag ) ne 'inherit' ? 0
        : shift() && !!shift()             ? 1
        :                                    0
        ;
    if ( $inherit ) { 
        no strict 'refs';
        push @{caller().'::ISA'}, __PACKAGE__;
        ...
    }
    ...
} 
```

这样一来，我就可以使用明确捆绑的用法进行一次调用。

```
use UtilityParent inherit => 1, qw<normal args>; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T21:29:41.927

为了进一步澄清“但是为什么 Foo::Child 中的导入*不起作用*？”的问题，这里有一个程序可以说明实际发生的情况：

```
use Foo::Child;
print my_sub(); # Really? Yes, really!
print Foo::Child::my_sub()," done\n"; 
```

并将其添加到 Foo::Base::import() 例程中：

```
print "Caller is $caller\n"; 
```

当您运行它时，您会看到以下输出：

```
Caller is main
1
Undefined subroutine &Foo::Child::my_sub called at foo_user.pl line 4. 
```

我们看到 Foo::Base 报告，让我们知道调用者是谁：它是主程序！我们看到'1'，这证明是的，main::my_sub 现在存在，然后由于导入到错误的命名空间而失败。

为什么是这样？因为导入过程都是由主程序处理的。Foo::Base 的导入不会被 Foo::Child 中的任何东西调用；它在加载模块的过程中被主程序调用。如果你真的，真的想强制 subs，而不是方法，导入到 Foo::Child，你需要明确地让它发生在 Foo::Child 本身。'use Foo::Base' 会这样做，因为这会使导入以 Foo::Child 作为调用者执行；如果您坚持导入，但双重使用让您过于兴奋，您可以在“使用基础”之后立即调用 Foo::Base::import()。无论如何，这正是双重“使用”所做的。

不过，我更喜欢 Schwern 的类方法，我推荐这种替代方法。

# c++ - 带有 qdebugstream 和 qtextedit 的未知输出

> ID：12978973
> 
> 赞同：1
> 
> 时间：2012-10-19T16:59:28.893
> 
> 标签：c++, qt, iostream

textedit 中的第一个输出是数字 3，我不知道为什么该数字来自 Qt::LogText。这个问题基于我之前提出的一个问题，我使用的是来自下面链接的相同 qdebugstream 头文件。

[将 std::cout 重定向到 QTextEdit](https://stackoverflow.com/questions/10308425/redirect-stdcout-to-a-qtextedit)

下面的新项目是将 cout 重定向到 textedit 的 QT Gui 应用程序。另外，由于 settextformat() 不再是 QTextEdit 的成员，我将 Qt::LogText 转换为字符串。

这是基于另一篇文章，但我不明白解决方案。 [QTextEdit::setTextFormat(Qt::LogText) 不再存在，我还能用什么来记录？](https://stackoverflow.com/questions/3060141/qt-qtexteditsettextformatqtlogtext-does-not-exist-anymore-what-else-can). 有人可以提供更多信息吗？

**主窗口.cpp**

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    ui->textEdit->setReadOnly(true);
    ui->textEdit->setText(QString("%1").arg(Qt::LogText));

    QDebugStream qout(std::cout, ui->textEdit);

    cout << "Send this to the Text Edit!" << endl;

}

MainWindow::~MainWindow()
{
    delete ui;
} 
```

**主窗口.h**

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include "qdebugstream.h"
#include "stdio.h"
#include "iostream"

using namespace std;

namespace Ui {
class MainWindow;
}

class QtextEdit;

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T09:14:46.650

您应该在 Qt 4.x 中使用 QPlainTextEdit，这似乎等同于使用 Q3TextEdit（Qt 3.x 中的 QTextEdit）和 Qt::LogText 的文本格式。

对于 QPlainTextEdit 版本的 QDebugStream 可能如下所示。（您可能会注意到 append() mem func 已重命名为 addPlainText() ，仅此而已）。希望这可以帮助。

```
#ifndef QDEBUGSTREAM_H
#define QDEBUGSTREAM_H

#include <iostream>
#include <streambuf>
#include <string>
#include <QPlainTextEdit>

class QDebugStream : public std::basic_streambuf<char>
{
public:
    QDebugStream(std::ostream &stream, QPlainTextEdit* text_edit)
        : m_stream(stream)
    {
        log_window = text_edit;
        m_old_buf = stream.rdbuf();
        stream.rdbuf(this);
    }
    ~QDebugStream()
    {
        // output anything that is left
        if (!m_string.empty())
            log_window->appendPlainText(m_string.c_str());

        m_stream.rdbuf(m_old_buf);
    }

protected:
    virtual int_type overflow(int_type v)
    {
        if (v == '\n')
        {
            log_window->appendPlainText(m_string.c_str());
            m_string.erase(m_string.begin(), m_string.end());
        }
        else
            m_string += v;

        return v;
    }

    virtual std::streamsize xsputn(const char *p, std::streamsize n)
    {
        m_string.append(p, p + n);

        int pos = 0;
        while (pos != std::string::npos)
        {
            pos = m_string.find('\n');
            if (pos != std::string::npos)
            {
                std::string tmp(m_string.begin(), m_string.begin() + pos);
                log_window->appendPlainText(tmp.c_str());
                m_string.erase(m_string.begin(), m_string.begin() + pos + 1);
            }
        }

        return n;
    }

private:
    std::ostream &m_stream;
    std::streambuf *m_old_buf;
    std::string m_string;

    QPlainTextEdit* log_window;
};

#endif 
```

# actionscript-3 - 仅覆盖一个组件的宽度或高度-Flex Mobile

> ID：12978977
> 
> 赞同：3
> 
> 时间：2012-10-19T16:59:39.983
> 
> 标签：actionscript-3, overriding, skinning

只是关于我正在尝试做的事情的一点背景。我有一个自定义皮肤，其中有一个可设置样式的文本字段来显示日期。单击绑定到日期的可样式化文本字段时，会出现一个日期微调器。在日期微调器后面，我绘制了一个需要覆盖整个屏幕的精灵，这样我就可以检测到点击并让日期微调器消失。

现在的问题-

如果不覆盖获取宽度或获取高度，我无法填满整个屏幕。但是，当我这样做时，日期微调器会中断，因为它会从覆盖中获取高度。只是想知道是否有人知道一种方法来覆盖一个组件并将所有其他组件设置为其默认值。我知道这似乎是一个菜鸟问题，也许我遗漏了一些明显的东西，我对 as3 大多是新手。

这是一些代码-

```
override protected function createChildren():void {
        super.createChildren();
            if(!img) {
                img = new dateButtonBG();
                addChild(img);
            }

            if (!maskSprite) {
                maskSprite =  new Sprite();
                maskSprite.graphics.beginFill(0xFFFFCC, .5);
                maskSprite.graphics.drawRect(-((stage.height)/2),-((stage.width)/2), stage.width, stage.height);
                maskSprite.graphics.endFill(); 
            }

if(!dateButton) {
                dateButton = new StyleableTextField();
                todayDate = new Date();
                BindingUtils.bindProperty(dateButton, "text", date, "selectedDate");
                dateButton.addEventListener(MouseEvent.CLICK, onDateButtonClick);
                addChild(dateButton);
            }
invalidateDisplayList();
}

protected function removeSpinner( event:Event):void{
            maskSprite.removeEventListener(MouseEvent.CLICK, removeSpinner);
            removeChild(date);
            removeChild(maskSprite);
        }

protected function onDateButtonClick (event:Event):void {
            addChild(maskSprite);
            addChild(date);
            maskSprite.addEventListener(MouseEvent.CLICK, removeSpinner);
        }

override public function get width () : Number {
            return _width;
        }

override public function get height () : Number {
            return _height;
        } 
```

代码不完整，只是为了表达我的观点。感谢您的阅读和您的所有帮助。

编辑-我想出了怎么做。添加一些信息以防有人遇到相同的问题-Flex 将精灵（或任何 UI 组件）的大小限制为容器的大小。如果您尝试超过容器的大小，它只会返回容器的大小。在我的代码中-

```
override public function get width () : Number {
            return _width;
        }

override public function get height () : Number {
            return _height;
        } 
```

这通常被吹捧为解决容器大小的问题。然而，这种方法是有缺陷的，因为它覆盖了所有需要宽度和高度的东西。在这种情况下，它会尝试将所有内容都设置为 _height 和 _width 的大小。对于任何具有超过 1 个组件的皮肤，这是一个大问题，您可以尝试单独设置项目的大小，这对我来说不起作用或找到替代方法。这是有效的-

```
public override function validateDisplayList():void {
            super.validateDisplayList();
            yourComponent.width = someConstantW;
            yourComponent.height = someConstantH;
        } 
```

然而，这还不够。您可能需要将组件移出容器以进行此尝试-

```
override protected function layoutContents(unscaledWidth:Number, unscaledHeight:Number):void {
                super.layoutContents(unscaledWidth, unscaledHeight);
                setElementPosition(yourComponent, x, y);
            } 
```

希望我为某人节​​省了几个小时的工作:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:23:29.763

从您发布的代码中不太清楚，但也许您应该覆盖该`updateDisplayList()`方法而不是`width`and `height`。

`updateDisplayList()`是组件实现大小和定位其子对象的 Flex 生命周期方法。

`updateDisplayList()`由 Flex 框架调用，它传入两个值：`unscaledWidth`和`unscaledHeight`. 您的实施`updateDisplayList()`应该尊重这些值并相应地调整子对象的大小/位置。您应该使用其他生命周期方法（如下所示）来进行实际的尺寸/定位。

这是一个示例实现，可帮助您入门。它可能有点偏离，因为我不完全理解您提供的代码片段。

```
override protected function updateDisplayList(unscaledWidth:Number, unscaledHeight:Number):void
{
    super.updateDisplayList(unscaledWidth, unscaledHeight);
    // size/position the background (or whatever it is that should occupy the whole screen)
    background.setLayoutBoundsPosition(0,0); // unnecessary because 0,0 is default
    background.setLayoutBoundsSize(unscaledWidth, unscaledHeight);
    // size/position the text in the center
    var textWidth:Number = text.getPreferredBoundsWidth;
    var textheight:Number = text.getPreferredBoundsHeight
    text.setLayoutBoundsPosition( (unscaledWidth - textWidth)/2, (unscaledHeight - textHeight)/2 );
    text.setLayoutBoundsSize(textWidth, textHeight); // probably not necessary

} 
```

# python - Python OpenCL 主机程序到 cl 程序参数传递

> ID：12978981
> 
> 赞同：2
> 
> 时间：2012-10-19T17:00:04.447
> 
> 标签：python, opencl

嗨，我正在使用 python 尝试 OpenCL。我正在尝试将一个数组和一个 const 变量传递给 cl 程序，并简单地将 const 变量复制到 cl 设备上的数组中。这应该很简单，但我收到以下错误：

```
Traceback (most recent call last):
File "<pyshell#103>", line 1, in <module>
test()
File "D:/Programming/Programs_OpenCL_Python/Host_CL_Parameter_Passing.py", line 141,    in test
event = prg.test( queue, (10,1), None, a_dev, b)
File "C:\Python27\lib\site-packages\pyopencl-2012.1-py2.7-win32.egg\pyopencl\__init__.py", line 457, in kernel_call
self.set_args(*args)
File "C:\Python27\lib\site-packages\pyopencl-2012.1-py2.7-win32.egg\pyopencl\__init__.py", line 509, in kernel_set_args
% (i+1, str(e), advice))
LogicError: when processing argument #2 (1-based): Kernel.set_arg failed: invalid     value - invalid kernel argument 
```

这是代码代码：

```
def test():
    ctx = cl.create_some_context()
    queue = cl.CommandQueue(ctx)
    a = np.empty(10, dtype = int)
    b = int(1)
    a_dev = cl.Buffer(ctx, cl.mem_flags.WRITE_ONLY, a.nbytes)
    prg = cl.Program( ctx, """__kernel void test(__global int *a, const int b){
        int i = get_global_id(0);
        a[i] = b;
    }""").build()
    event = prg.test( queue, (10,1), None, a_dev, b)
    event.wait()
    cl.enqueue_copy( queue, a, a_dev)
    print a 
```

有人可以告诉我问题并给我解决方案吗？这真让我抓狂。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:14:48.023

您需要将整数参数转换为 numpy`int32`类型：

```
event = prg.test( queue, (10,1), None, a_dev, np.int32(b)) 
```

[顺便说一句，我可以通过查看Mandelbrot 示例](http://git.tiker.net/pyopencl.git/blob/HEAD:/examples/demo_mandelbrot.py)来弄清楚这一点

# php - 在 PHP 中使用 $_POST 构造 URL

> ID：12978986
> 
> 赞同：0
> 
> 时间：2012-10-19T17:00:07.520
> 
> 标签：php, xml, post

我正在创建一个页面，用户可以通过提交内容的数字对象标识符 (DOI) 将有关内容的元数据提交到数据库。然后，该站点将在 www.crossref.org 上查找内容的元数据，并在将数据添加到数据库之前提供数据摘要

我创建了一个表单供用户输入 DOI

```
<FORM ACTION="newref-getxml.php" METHOD=POST>
<P><strong>New Reference Form</strong><BR>
DOI: <INPUT NAME="send_doi"><BR>
<BR>
<INPUT TYPE=SUBMIT NAME="submitref" VALUE="SUBMIT">
</FORM> 
```

以及一个用于获取和读取 XML 的文件（出于显而易见的原因，我已从 URL 中删除了我的 API KEY）

```
<?php
  echo $_POST[send_doi]; // check post data is coming though
  $xml = simplexml_load_file("http://www.crossref.org/openurl/id=doi:'$_POST[send_doi]'&noredirect=true&pid=APIKEY&format=unixref");
?>
<p>
   Title: <?php echo $xml->doi_record->crossref->journal->journal_article->titles->title;?><br />
   Year: <?php echo $xml->doi_record->crossref->journal->journal_article->publication_date->year;?><br />
   Journal: <?php echo $xml->doi_record->crossref->journal->journal_metadata->full_title;?><br />
   DOI: <?php echo $xml->doi_record->crossref->journal->journal_article->doi_data->doi;?>
</p> 
```

问题是将用户提交的 DOI 插入到 URL 中，我想我可以粘贴`'$_POST[send_doi]'`到 DOI 应该去的 URL 中，但这不起作用。

我得到的只是

10.3998/3336451.0009.101 标题： 年份： 期刊： DOI：

提交 DOI 时

您如何编写 URL 以包含该`'$_POST[send_doi]'`值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:07:29.337

```
simplexml_load_file("http://www.crossref.org/openurl/id".
    "?doi=".urlencode($_POST[send_doi]).
    "&noredirect=true&pid=APIKEY&format=unixref"); 
```

添加了一个问号，因为我在您的 URL 中没有看到它。一个更好的选择是[**http_build_query**](http://php.net/manual/en/function.http-build-query.php) ()。看看这个！

```
simplexml_load_file('http://www.crossref.org/openurl/id?'. // <- Question Mark here
    http_build_query(array(
        'doi'       => $_POST[send_doi],
        'noredirect'    => 'true',
        'pid'       => 'APIKEY',
        'format'    => 'unixref',
    ))
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:04:07.093

试试这个：

```
$xml = simplexml_load_file("http://www.crossref.org/openurl/id=doi:'{$_POST['send_doi']}'&noredirect=true&pid=APIKEY&format=unixref"); 
```

字符串类型的数组键需要用单引号封装。将变量包含到字符串中时，使用 {} 将变量本身括起来。

此外，请确保验证该输入，以免对该 API 进行错误调用。正则表达式运行良好。参见：preg_match()。

# svn - Google Drive 或 DropBox 上的 SVN 存储库

> ID：12978987
> 
> 赞同：38
> 
> 时间：2012-10-19T17:00:15.970
> 
> 标签：svn, version-control, tortoisesvn, google-drive-api

是否可以在谷歌驱动器或保管箱等上设置 SVN 存储库/服务器？

我想将我的博士项目置于版本控制之下。数据必须保持私密，并且只有我和我的主管可以访问。我付不起钱，所以我想要免费服务。

我有使用[Tortoise SVN](http://tortoisesvn.tigris.org/)的经验。

如果设置 SVN 服务器是不可能/非常困难的，那么还有其他可靠的替代方案可以提供*免费的 Prtivate SVN 存储库*。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-30T12:11:56.863

我使用 Dropbox 作为我的 Prive 或受保护的 svn。试试下面的链接。 [http://foyzulkarim.blogspot.com/2012/12/dropbox-as-svn-repository.html](http://foyzulkarim.blogspot.com/2012/12/dropbox-as-svn-repository.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-10-20T10:38:27.847

对于免费的私人 SVN 托管，请尝试以下操作：

*   [http://riouxsvn.com/](http://riouxsvn.com/)
*   ~~[http://beanstalkapp.com/](http://beanstalkapp.com/)（不再免费）~~

或者使用[BitBucket](http://bitbucket.org)获取免费的私有 git/mercurial 存储库

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-20T11:12:47.990

虽然可能，但它可能非常危险 - 如果您尝试同时从 2 个不同的位置向存储库提交更改，由于文件冲突，您会遇到巨大的混乱。在某处获得免费的私有 SVN 主机，或在您有权访问的服务器上设置存储库。

根据最近的经验进行编辑：如果您打开了由 Dropbox 管理的文件并且您的计算机崩溃了，您的文件可能会被截断为 0 字节。如果管理您的存储库的文件发生这种情况，您的存储库将被损坏。如果您很快发现这一点，您可以使用 Dropbox 的“恢复旧版本”功能**，但**您仍然需要承担风险。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-23T23:33:10.177

我在我的 Ubuntu One 文件夹中创建了自己的 subversion 存储库。然后，我使用 svn+ssh 和我的用户帐户密码将文件导入到存储库。

当我想结账时，我只是从我的 Ubuntu One 文件夹中结账。提交过程与其类似。

您必须在要授予访问权限的设备上设置 Ubutnu One，然后将该文件夹中的项目签出到临时文件夹以进行编辑。

就我而言，我使用 Ubuntu One 文件系统中的一个文件夹，因此我在 Ubuntu One 中有存储库和我的开发文件夹。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T15:14:24.870

我会尝试化石 scm 和 Chisel 托管服务

如果您将来需要，简单、独立且易于与 git 互换

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-05-15T15:47:37.517

这是一个适合我的应用程序。在我们的例子中......我希望销售团队对某些文档（价格表等）使用 SVN......但有点过头了。

我像这样设置了一个 Auto SVN： - 在我的 SVN 服务器中创建了一个 REPO。- 将 repo 签出到名为 AutoSVN 的数据库文件夹中。- 我在我的 PC 上运行 EasySVN，它会自动提交和更新 REPO。

使用“自动”，没有日志评论，但对于这些特定文档并不重要。

销售人员使用 DB 文件夹...并简单地维护那些需要版本控制的文档的文件名，例如价格表。

# android - 黑色文本在 Android 视图中显示为灰色

> ID：12978988
> 
> 赞同：2
> 
> 时间：2012-10-19T17:00:22.010
> 
> 标签：android, colors, textview, viewflipper

我正在使用 ViewFlipper 来替换一些不同的 RelativeLayouts。我的布局非常简单。

```
<RelativeLayout 
                android:id="@+id/display_info_layout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:background="#FFFFFF" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:layout_marginLeft="25dp"
                    android:layout_marginRight="25dp"
                    android:layout_marginTop="20dp"
                    android:text="@string/information"
                    android:color="@color/black" />
            </RelativeLayout> 
```

**问题：** 名为“黑色”的颜色在我的资源中定义为“#000000”。文本元素在其他布局中显示为正确的黑色，但在此布局中显示为暗灰色。

其他布局 ![其他带有普通黑色文本的布局](../Images/7d50d1d062a0580163a60a9ab22d4701.png)

此布局 ![此布局带有灰色文本](../Images/d46758ab588d2d3b078c5b9782a8bd97.png)

**问题：**

1.  这可能是什么原因造成的？
2.  我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T17:06:58.517

你应该使用[android:textColor](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3atextColor)我不认为 android:color 作为属性存在

所以：

```
 <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:layout_marginLeft="25dp"
                    android:layout_marginRight="25dp"
                    android:layout_marginTop="20dp"
                    android:text="@string/information"
                    android:textColor="@color/black" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-11T06:43:38.337

`ContextCompat.getColor(getContext(), color)`为我解决了这个问题

# box-api - box api 是否提供了一种查看用户提及的方法？

> ID：12978991
> 
> 赞同：0
> 
> 时间：2012-10-19T17:00:30.470
> 
> 标签：box-api

在 v2 API 中，我看到了事件端点和 Comments 事件类型。但是无论如何我都看不到在我被明确提及的地方检索评论；除了解析我被叫出来的评论内容，我怎么知道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T02:50:47.793

API 当前不支持@提及（查看/创建）。我们将在未来将其构建到 API 中，但目前正在处理其他事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:31:07.360

我们添加了通过 API 添加@comment 的功能，尽管仍然没有任何东西可以通过/Events 轻松确定@comment。

[http://developers.box.com/docs/#comments](http://developers.box.com/docs/#comments)

curl https://api.box.com/2.0/files/[FILE_ID]/comments H- Bearer XXXXX d- {"tagged_message": "@[USER_ID:USER_NAME]"} X- POST

# c# - 重载的方法匹配有一些无效的参数

> ID：12978994
> 
> 赞同：1
> 
> 时间：2012-10-19T17:00:47.177
> 
> 标签：c#

我不断收到此错误 - HomeInventory2.Form1.Form1(System.Collections.Generic.IEnumerable) 的最佳重载方法匹配有一些无效参数 - 对于星号部分。同时我也在同一个地方收到了这个错误 - 参数 1: cannot convert from 'string' to System.Collections.Generic.IEnumerable

**对不起 - 我应该补充一下，代码将字符串发送到另一个表单，在那里它被拆分并放入单独的文本框中。

```
namespace HomeInventory2
{
    public partial class Form2 : Form
    {
        OpenFileDialog openFileDialog1 = new OpenFileDialog();
        public Form2()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, System.EventArgs e)
        {
            if (openFileDialog1.ShowDialog() == DialogResult.OK)
            {
                richTextBox1.LoadFile(openFileDialog1.FileName, RichTextBoxStreamType.RichText);
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            Application.Run**(new Form1(richTextBox1.Text))**;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:02:56.287

首先，你可能不想在`Application.Run`这里打电话——你已经有了一个表格。

我怀疑您想按行拆分富文本框内容，然后将其传递给新表单并显示它。如果是这种情况，您可以这样做：

```
 private void button2_Click(object sender, EventArgs e)
    {
        // richTextBox1.Lines is a string[], which works with IEnumerable<string> (per line)
        var form = new Form1(richTextBox1.Lines);
        // Just show the form
        form.Show(); 
    } 
```

# java - 为什么在新日期的代码中换行

> ID：12978995
> 
> 赞同：0
> 
> 时间：2012-10-19T17:00:47.547
> 
> 标签：java, netbeans-7

我正在使用 netbeans 7.2。IDE 正在对类名应用直通，这是什么意思，我该如何解决？

```
Date cookiedate = new Date(timeStamp); 
```

看看镜头的样子 ![在此处输入图像描述](../Images/99869d254dec5f35c6e31e839f649b64.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:02:35.937

我怀疑这意味着它*已弃用*。请参阅此处了解[更多信息](http://docs.oracle.com/javase/1.5.0/docs/guide/javadoc/deprecation/deprecation.html)。

> Java 提供了一种表达弃用的方式，因为随着类的发展，它的 API（应用程序编程接口）不可避免地会发生变化：方法被重命名以保持一致性，新的更好的方法被添加，字段也发生了变化。但是这样的变化带来了一个问题。在开发人员过渡到新 API 之前，您需要保留旧 API，但您不希望他们继续使用旧 API 进行编程。
> 
> 弃用类、方法或成员字段的能力解决了这个问题。

我建议改用[Joda-Time](http://joda-time.sourceforge.net/)（关于此处其他海报提出的建议），因为不推荐使用的`Date`/`Calendar`东西使用起来很痛苦（非直观的 api、可变的、线程不安全的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T17:01:55.383

```
new Date(timeStamp); 
```

您正在使用已弃用的 Date 类的参数化构造函数，因此您会看到该行交叉。事实上，大多数`Date`类的方法现在都已被弃用。

请参阅类文档，[`Date`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)其中清楚地将参数化构造函数标记为`Deprecated`.

> 日期（字符串 s）
> 已弃用。
> 从 JDK 1.1 版开始，由 DateFormat.parse(String s) 取代。

[**`Joda Time API`**](http://joda-time.sourceforge.net/)如果您想**在**使用`Dates`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T17:03:08.143

Linethrough 意味着它已被弃用。还有一些其他类/方法可以代替该类/方法。如果您在其中设置了 javadoc，Netbeans 还会在该已弃用的类/方法周围显示您可以使用什么来代替它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T17:02:12.183

这意味着您正在调用的 API 已被弃用，例如，您应该使用 Calendar API，或者如果您正在寻找更复杂的 API，我建议使用[Joda](http://joda-time.sourceforge.net/)

# ruby-on-rails - 在 Rails 引擎中使用另一个 gem 的 javascript

> ID：12978999
> 
> 赞同：5
> 
> 时间：2012-10-19T17:01:07.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, asset-pipeline, rails-engines

我正在尝试创建一个 rails 引擎，它将使用我添加到引擎中的 gem 依赖项中的 javascript。但是，当我在 application.js 中为我的引擎添加以下行时，我不断收到“找不到文件 'fullcalendar'”：

```
//= require fullcalendar 
```

此行正在将 gem 依赖项中的 javascript 加载到 rails 引擎中。

当 gem 安装在普通的 rails 应用程序（而不是引擎）上时，同一行将起作用。我在这里想念什么？引擎可以从另一个引擎/gem 加载 javascript 吗？

**更新：** 我自己研究的问题可能是 sprockets 只在引擎内寻找 javascript。gem 依赖项安装到父应用程序的供应商/缓存中，而不是引擎因此 //require fullcalendar 失败，因为它正在引擎中查找，并且用于 fullcalendar 的 javascript 在父应用程序中。

让我感到困惑的是，如果我在父应用程序 gemfile 中明确包含 fullcalendar，那么我就无法在引擎中访问它。这对我来说没有意义。在这两种情况下，完整的日历 gems javascript 都在父应用程序中，但行为不同。在两个地方包含宝石对我来说没有吸引力，而且似乎不是一个合适的解决方案。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:52:30.797

I had some trouble with this in the past.

```
App > Engine 1 > Engine 2 
```

Engine 1 and Engine 2 worked fine on the app. I created a dummy app in Engine 1 to test Engine 2's functionality, also worked fine. But when I put Engine 1 in App it didn't work at all.

My big mistake here was only including Engine 1 in App, Engine 2 has to be included as well! Inheritance does not work for Gemfiles, just dependencies.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T05:02:14.900

聚会有点晚了，但我最近遇到了同样的问题。这是我的帖子来描述它的解决方案[http://grantrklinsing.com/articles/2013/01/10/adding-3rd-party-assets-to-a-rails-gem.html](http://grantrklinsing.com/articles/2013/01/10/adding-3rd-party-assets-to-a-rails-gem.html)。如果你没有让它工作，希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T00:58:55.933

您使用的 fullcanendar gem 是否带有安装程序？一些 gem 带有用于模型迁移、资产、视图、配置文件等的安装程序。

如果您指的是[fullcalendar-rails](https://github.com/mankind/fullcalendar-rails) gem，它带有一个安装程序，您必须使用该 `rails g fullcalendar:install`命令运行该安装程序。

如果 gem 没有附带安装程序，您可以通过运行手动将 gem 克隆到本地计算机，`git clone gem_github_repository_url_here.git`这将使您能够导航 gem 的文件夹，并且您将可以直接访问 gem 使用的任何资产，这些资产可以是复制到您的 Rails 应用程序。