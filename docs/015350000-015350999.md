# StackOverflow 问答 15350000-15350999

# sql-server-2008 - 按职位和性别划分的员工

> ID：15350001
> 
> 赞同：-2
> 
> 时间：2013-03-11T22:37:09.417
> 
> 标签：sql-server-2008

我必须按职称（例如：医生）和性别计算出我有多少员工。我不知道从哪里开始。我在 SQL 2008 中使用 Adventure Works

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:00:14.093

这是一个非常基本的查询，我认为@bernie 是对的——您不应该先来这里告诉我们您需要做什么。您至少还应该包括您已经尝试过的内容。

```
SELECT JobTitle, Gender, [count] = COUNT(*)
  FROM HumanResources.Employee
  GROUP BY JobTitle, Gender
  ORDER BY JobTitle, Gender; 
```

请注意，数据库中没有医生。

如果您只想计算*特定*职位和*特定*性别的数量，那么：

```
DECLARE @JobTitle NVARCHAR(50), @Gender NCHAR(1);

SELECT @JobTitle = N'Accountant', @Gender = N'F';

SELECT [count] = COUNT(*)
  FROM HumanResources.Employee
  WHERE JobTitle = @JobTitle
    AND Gender = @Gender; 
```

# ios - 在 ios 中读取 UTC 并减去日期

> ID：15350002
> 
> 赞同：0
> 
> 时间：2013-03-11T22:37:11.293
> 
> 标签：ios, ios5, ios6

我从服务器 dateTime (deadline) 字符串中得到类似的`"2013-03-29 04:12:35"`，我需要制作秒表，它将以格式显示在标签中估计的截止时间`hours::minutes:seconds`。我想将截止日期转换为UTC，然后从手机当前的UTC读取，减去并转换为格式`hours::minutes:seconds`。如何在 ios 中读取 UTC 并将字符串转换为 UTC（是否有更简单的方法来完成此任务）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:35:38.063

尝试这个

```
NSString *utcDateString = @"2013-03-29 04:12:35";

NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
//DateFormatter by default will be in local timezone.
[formatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
[formatter setFormat:@"yyyy-MM-dd HH:mm:ss"];

NSDate *utcDate = [formatter dateFromString:utcDateString];

NSDate *currentDate = [NSDate date]; 
```

现在您可以使用本文中提到的方法来查找日期组件（小时、分钟、秒）[。](https://stackoverflow.com/a/7147949/767730)

# cocoa - 从 Mail.app 和 Notes.app 显示 WebArchive

> ID：15350003
> 
> 赞同：1
> 
> 时间：2013-03-11T22:37:11.777
> 
> 标签：cocoa, webview, webarchive

Cocoa 的 WebView 可以显示 .webarchive 文件。我尝试显示的内容来自粘贴板，例如在 Safari 或 Mail.app 中复制网页的部分内容时。

我遇到的问题是来自 Mail 和 Notes 的 webarchives 不会显示在 WebView 中，而来自 Safari 的 webarchives 会显示。

我查看了这些档案的数据（BBEdit 可以解密它们的二进制 plist 格式并将其很好地显示为 XML），发现问题是由 Mail（和 Notes）放在那里的不寻常的 URL 引用引起的：

```
<key>WebResourceURL</key>
<string>x-msg://4/</string> 
```

如果我删除该条目或使用 http:// 将其更改为某些内容，WebView 突然可以显示此类存档。

现在，我如何在我的代码中解决这个问题？

我不想解码 webarchive，找到 WebResourceURL 条目并将其删除，然后再将存档传递给 WebFrame 进行加载。

我想知道我是否必须使用 WebView 或其主框架设置其他东西才能完成这项工作。

我注意到 Xcode 可以很好地显示这些 webarchives，这表明 Xcode 以更“正确”的方式使用 WebKit 来解决问题。但是，也许这只是因为它让 NSWebFrame 从磁盘加载存档，而我的代码从 CFData 对象加载它 - 从文件加载时，WebKit 可能使用该文件 URL 作为基本 URL，而它只会阻塞它当它根本没有获得可用的 URL 时。

* * *

我在这里为 Xcode 创建了一个小演示项目：http: [//files.tempel.org/Various/Mail-WebArchive-Display-Issue.zip](http://files.tempel.org/Various/Mail-WebArchive-Display-Issue.zip)

它包括来自 Mail 的原始存档（“mail-bad.webarchive”）和固定存档（“mail-good.webarchive”），两者都显示在演示应用程序的两个 webView 中。

* * *

我还使用 Apple DTS 打开了技术支持 Indident (TSI)，并回复说我应该提交错误。可以在此处查看错误报告：http: //openradar.appspot.com/radar?id= [2843403](http://openradar.appspot.com/radar?id=2843403)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:37:01.077

在考虑了 Xcode 可能在做什么之后，我找到了一个解决方案：

这不起作用：

```
WebArchive *archive = [[WebArchive alloc] initWithData:webData];
[[webView mainFrame] loadArchive:archive]; 
```

但这确实：

```
[[webView mainFrame] loadData:webData MIMEType:@"application/x-webarchive" textEncodingName:@"" baseURL:NULL]; 
```

因此，加载档案的显式功能是错误的，而想要一个显式 URL 的功能，即使我没有给它，也可以工作。

去搞清楚。

# c++ - 按值调用 vs const 按引用调用

> ID：15350007
> 
> 赞同：3
> 
> 时间：2013-03-11T22:37:50.403
> 
> 标签：c++, reference, constants

我对按值调用和按引用调用 const 之间的区别有点困惑。有人可以向我解释一下吗。例如，它们是否都可以防止更改调用者参数，它们是否适用于所有对象大小，是否复制参数而一个不复制参数，以及在复制时使用更多内存？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T22:41:32.400

> 它们是否都可以防止更改调用者参数

按值传递会创建调用者提供的参数的*副本*，因此无论函数做什么，它都会在单独的对象上执行。这意味着永远不会触及原始对象，因此在这种情况下，答案是“**是**”。

`const`另一方面，通过引用传递，让函数引用调用者提供的同一个对象，但它不会让该函数修改它......*除非*（正如 Luchian Grigore 在评论中正确指出的那样）函数的实现者使用从引用`const_cast<>`中丢弃`const`-ness，只有在知道绑定到引用的对象*未*声明为`const`类型时才能安全地完成此操作（否则，您将获得未定义的行为）。

由于考虑到您的问题，这似乎不是最有可能的情况，并且考虑到通常接受对 的引用`const`表示不会触及该论点的*承诺*，那么答案是，只要我们假设这个承诺是满足，通过引用传递`const`不会改变调用者提供的参数。所以答案再次是“**是**”——我上面提到的一点*警告。*

> 它们对所有物体大小都快吗

**不**，尽管您应该首先定义“快速”。如果要传递的对象的类型复制起来（或移动，如果执行的是移动而不是复制）代价高昂，那么按值传递可能会很慢。无论您传递的值的类型是什么，通过引用传递总是会花费相同的成本（地址的大小）。

请注意，在某些体系结构和某些数据类型（如`char`）上，按值传递可能比按引用传递更快，而对于足够大的 UDT，情况通常相反。

> 制作副本时哪个使用更多内存？

由于其中只有一个导致复制，因此问题有一个明显的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:42:22.600

按值调用将复制它确实保护调用者参数的对象的所有元素，因为如果您要更改某些内容，它只是您正在更改的副本。
通过 const 引用调用不会复制元素，但由于“const”，它将保护调用者的参数。

你 const 参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T22:40:38.997

主要区别在于通过`const`引用（或非常量）传递不会复制参数。（副本实际上会受到复制省略，但理论上它是在您通过值传递时传递给函数的副本）

在某些情况下，按值传递同样快，甚至更快（通常当对象最多为寄存器大小时）。您通常会通过值传递基本类型，并通过引用传递类类型。

通过`const`引用传递时，您仍然可以通过将 const 强制转换（通过`const_cast`）来修改原始值，但如果原始值为 .，则会导致未定义的行为`const`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T22:47:35.593

我想你的意思是：

```
void Fn1(MyType x); 
```

和

```
void Fn2(const MyType& x); 
```

在前一种情况下，始终会创建对象的副本，这会使其速度变慢，尤其是在类型具有非平凡构造函数的情况下。原始对象将不受函数内对副本所做的任何更改的影响，但副本本身可以更改。

后一个示例不会创建副本，并且通常会更快。在函数内部，只能在参数上调用 const 函数（除非您使用诸如丢弃 const 之类的肮脏技巧），从而保证不会修改对象。

重要提示：本讨论不涉及具有特殊语义的类型，例如智能指针。在这种情况下，按值调用仍然允许您更改逻辑上相同的对象，即不是智能 ptr 实例本身，而是它指向的对象。

因此，这里是您的问题的答案：

*   它们是否都可以防止更改调用者参数：是的，原始对象将保持不变（不包括技巧）
*   它们是否对所有对象大小都快：它们不是同样快 - 通过引用调用通常更快，除了一些速度或多或少相同甚至可能稍微快一点的原始类型，具体取决于编译器优化。
*   要么复制参数，而不要复制参数：按值调用创建副本，按引用调用不会
*   制作副本时哪个使用更多内存？引用调用不会创建副本，因此答案很明确

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-03T22:11:13.740

另一点值得一提的是，引用调用函数被转换为内联函数。

# c - 使用从函数到主函数的字符串

> ID：15350009
> 
> 赞同：-1
> 
> 时间：2013-03-11T22:38:03.263
> 
> 标签：c, arrays, function, char, c-strings

我的一个函数从文本文件中读取行并存储到变量中。我需要一种在我的主函数中使用该变量的方法。我已经尝试了几种方法，但没有任何效果。谁能帮我？

```
#include <stdio.h>
#include <string.h>

int test(const char *fname, char **names){

    char usernames[250][50];
    FILE *infile;
    char buffer[BUFSIZ];
    int i =0;

    infile = fopen(fname, "r");

    while(fgets(buffer,50,infile)){
        strcpy(usernames[i],buffer);
        printf("%s",usernames[i]);
        i++;
    }

    int x, y;
    for(y = 0; y < 250; y++)
        for(x = 0; x < 50; x++)
            usernames[y][x] = names[y][x];

    return 0;
}

int main()
{
    char *names;
    test("test.txt", &names);
} 
```

任何人都可以帮忙吗？好久没写C了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:47:45.937

在 C 中，调用者应该为它需要的字符串分配内存，否则，没有人知道谁应该释放内存。然后，您可以将指针传递给将填充它的函数。

```
int main() {
    char names[250][50];
    test("test.txt", names);
    for (int i=0; i < 50; i++) {
        printf("File %d: %s", i, names[i], 250);
    }     
}

void test(const char *fname, char(*names)[50], int maxWords){

    FILE *infile;
    int i =0;
    char buffer[50];

    infile = fopen(fname, "r");

    while(fgets(buffer,50,infile) && i < maxWords){
        strcpy(usernames[i],names[i]);
        i++;
    }    
} 
```

# java - Maven 捆绑插件 - 如何添加主类

> ID：15350011
> 
> 赞同：5
> 
> 时间：2013-03-11T22:38:10.747
> 
> 标签：java, eclipse, maven, maven-bundle-plugin

我有一个 Maven 项目 mjbean，它只有一个依赖项：TestA。这是 mjbean 的 pom.xml：

```
<groupId>com.mbean</groupId>
<artifactId>mjbean</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>bundle</packaging>

<build>
  <defaultGoal>install</defaultGoal>
  <plugins>
    <plugin>
      <groupId>org.apache.felix</groupId>
      <artifactId>maven-bundle-plugin</artifactId>
      <extensions>true</extensions>
      <configuration>
        <instructions>
          <Main-Class>com.mbean.Main</Main-Class>
          <Embed-Dependency>*;scope=compile|runtime</Embed-Dependency>
          <Embed-Transitive>true</Embed-Transitive>
          <Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
          <Import-Package>*</Import-Package>
        </instructions>
      </configuration>
    </plugin>
  </plugins>
</build>

<name>mjbean</name>
<url>http://maven.apache.org</url>

<properties>
  <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencies>
  <dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>3.8.1</version>
    <scope>test</scope>
  </dependency>
  <dependency>
    <groupId>com.testa</groupId>
    <artifactId>TestA</artifactId>
    <version>1.0.0-SNAPSHOT</version>
  </dependency>
</dependencies> 
```

主类很简单：

```
package com.mbean;
import com.testa.Testcl;
public class Main {

public static void main(String[] args) {

    Testcl tcl = new Testcl();
    tcl.testmethod();
    }
} 
```

我已经`<Main-Class>com.mbean.Main</Main-Class>`在 maven-bundle-plugin 中指定了主类。它在 Eclipse 中运行良好。然后我使用 Eclipse 在目标文件夹中生成目标包。当我尝试在命令行中运行它时：`java -jar mjbean-0.0.1-SNAPSHOT.jar`，我收到了这个错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/testa/Testcl
at com.mbean.Main.main(Main.java:12)
Caused by: java.lang.ClassNotFoundException: com.testa.Testcl
at java.net.URLClassLoader$1.run(URLClassLoader.java:366) 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-19T08:10:37.587

接受的答案不正确，`maven-bundle-plugin`确实[支持任何清单标头](https://cwiki.apache.org/confluence/display/FELIX/Apache+Felix+Maven+Bundle+Plugin+%28BND%29#ApacheFelixMavenBundlePlugin%28BND%29-Features)。标头是否属于 OSGI 规范并不重要。

> *清单标头*- 任何以大写字母开头的指令都将出现在生成的捆绑包的清单文件中；标头的值将根据指令由 BND 复制、扩充或生成。

问题中的配置是正确的。

```
<configuration>
    <instructions>
        <Main-Class>com.mbean.Main</Main-Class>
    </instructions>
</configuration> 
```

我猜问题可能是加载了错误的 jar（其他插件可能有多个 jar 文件），或者可能存在一些构建或缓存问题，并且 jar 文件不是最新的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:53:05.513

Main-Class[不是 OSGi bundle standard 的一部分](http://wiki.osgi.org/wiki/Main-Class)，我不相信 maven-bundle-plugin 可以识别它。

您可以按照说明使用现有的 MANIFEST.MF 文件并添加说明

```
<_include>src/main/resources/META-INF/MANIFEST.MF</_include> 
```

然后`Main-Class`在该文件中包含您的指令。这有点笨拙，这*可能*表明您使用了错误的工具来完成这项工作。如果您只需要一个可执行的 jar 文件，还有其他可能更合适的 Maven 插件，例如[maven-jar-plugin](http://maven.apache.org/shared/maven-archiver/examples/classpath.html#Make)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-19T16:50:47.147

将以下内容添加到您的 pom 中的 maven-bundle-plugin 部分...

```
 ...
    <configuration>
      <archive>
        <manifest>
           <mainClass>your.main.Main</mainClass>
        </manifest>
      </archive>
      ... 
```

问候罗兰

# c# - 用于在应用程序的单独插件之间进行通信的最佳 c# 架构/模式

> ID：15350012
> 
> 赞同：0
> 
> 时间：2013-03-11T22:38:11.540
> 
> 标签：c#, design-patterns, plugins, architecture

我目前正在从头开始设计一个系统，我们遇到了一个架构设计场景，我不确定最好的解决方法——但我相信其他人已经解决了，甚至可能有一个模式为了它。

**到目前为止的故事：**

我们有一个多租户网站，我们在其中实现各种功能作为插件，我们的客户将选择他们希望在他们的应用程序中使用的插件。每个插件都可以有各种用户可以添加到页面的“小部件”。（例如，类似于 Android 应用程序通常带有可以添加到主屏幕的小部件的想法）。

插件可以依赖于其他插件来启用（例如电子商务插件需要支付插件）。插件也可以使用其他插件来增强其功能（例如，博客插件可以选择使用评论插件，也可以将评论与电子商务产品一起使用）。

尽可能地，我们希望每个插件都是独立的，具有非常简洁的公共接口。我们相信这种关注点分离将为我们提供整个系统的最佳长期灵活性和可维护性。

**问题：**

当我们开始布局我们目前知道的所有插件（更不用说未来的需求），以及它们与其他插件的依赖关系和可能的关系时 - 它开始与疯狂的蜘蛛网非常相似。我们也开始看到一些循环引用的发生。

例如，导航插件需要知道网站上有哪些页面。但您也可以将导航小部件添加到页面。

**部分/潜在的解决方案：**

我们认为每个插件都应该与其他插件完全分离，但会通过消息从其他插件获取信息并与之通信。这些消息可以分为两种基本类型

*   从另一个插件请求信息（请求/响应消息）
*   事件通知（事件消息）

这两种消息类型都是非常简单的 DTO 类型类——它们不应该包含任何业务逻辑——只是一些其他服务处理请求并提供响应所需的信息。

我已经模拟了几个插件的一个非常简化的版本，我们看到它们与其他插件交互的解决方案是：[http ://screencast.com/t/Mdb9wUmMF](http://screencast.com/t/Mdb9wUmMF)

在此图中，Navigation、Page、Search 和 Other 插件不会相互了解任何信息。但他们会知道可用的消息和 ProcessMessages 接口。

*例如请求/响应消息*

Navigation 和其他插件会知道，如果它向 ProcessMessages 发送 GetPagesRequest，它将返回一个 PagesResponse，其中包含他们需要的所有信息。（导航/其他插件需要立即响应 GetPagesRequest。）

导航和其他插件对页面插件一无所知。

*请求/响应消息要求*

引发请求消息的插件总是（通常？）期望立即收到响应消息。

只有 1 个服务知道如何处理请求消息，并提供将传递回调用插件的响应消息。

*例如事件消息*

当用户在 Page Plugin 中更新页面的 url 时，插件会向 ProcessMessages 发送 PageUrlUpdated 消息。Navigation 和 Other 插件将使用 PageUrlUpdated 消息并执行它需要的任何操作。

*事件消息要求*

引发事件的插件*永远不会*期望得到响应。0-许多插件可能会使用给定的消息。

（技术说明：对于事件消息，我们将它们发送到 MassTransit 和 RabbitMQ - 然后每条消息有 1-n 个消费者）

**问题**

1.  从我们制作的一些草图来看，上述想法似乎可行，并且系统的不同元素之间的相互依赖关系要少得多。但我不知道设计模式或架构结构的名称——或者我是否走错了路。我希望有人能给我指出正确的解决方案——一些好的文档和例子会很棒。（尽量避免重新发明轮子——现有的模式可能会更加稳健和成功）

2.  对于请求消息，我们设想某种从请求消息到将处理消息的具体插件/服务的 StructureMap-ish 映射。再一次 - 我确信这已经解决了，并且有一个模式，或者我们完全走错了路，有更好的解决方案。

非常感谢任何帮助和想法 Saan

PS - 我也会在一个具有一些基本属性的公共项目中拥有一个 IWidget - 所以页面插件可以请求所有实现 IWidget 的类添加到页面

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:21:37.120

您的问题有很多不同的方法；但我可能会建议面向服务的架构。主要是因为它可以以非常快速和敏捷的方式适应业务。这种架构提供了许多好处：

*   轻的
*   敏捷
*   代码可重用性

然而，它确实带来了一系列可能需要克服的障碍，例如：

*   互操作性
*   安全
*   表现
*   持久性

因此，实施其中一些决议可能会缓解此类问题。但是，这需要您对此事有一定的了解。由于这种架构是敏捷的，但一切都暴露在一定程度上。此外，多个实例被实例化怎么办？

这些都是您必须识别的潜在项目。

我个人会做的是找到业务的真正核心——不是项目；但业务。然后确定哪种方法最能完成该任务。这将是一个持续存在的模式，因为业务核心是它的核心。

在这件事上我强烈推荐的一些事情是：

*   [企业应用架构模式](https://rads.stackoverflow.com/amzn/click/com/B008OHVDFM)。
*   [实施领域驱动设计](https://rads.stackoverflow.com/amzn/click/com/B00BCLEBN8)。
*   [领域驱动设计：解决软件核心的复杂性](https://rads.stackoverflow.com/amzn/click/com/B00794TAUG)。
*   [服务设计模式：基本设计解决方案](https://rads.stackoverflow.com/amzn/click/com/B0061LAM5K)。

还有很多其他可行的书籍，但我觉得这些都是很有帮助的。当他们将大量的设计讨论推向高潮时，这些讨论涉及：

*   延迟加载
*   工作单元
*   存储库
*   依赖注入
*   模型扩展框架
*   和更多...

这将填补几个空白；但我怎么强调都不过分。*没有比其他技术更好的技术，它们都有优点和缺点。但最能捕捉您的业务目标的技术是理想的选择*。

我理解您需要回复来帮助您，但请记住：

> ```
>  Ask not the Elves for counsel, as they both say yes and no. 
> ```

仅仅因为我们不了解您的项目或业务，这些目标就会严重影响您的决定。这些是只有你会知道的事情。正如我所说的，我们不知道你会想要考虑：

*   公司目标
*   可维护性
*   公司增长预测
*   公司范式的可能转变。

还有更多，但您必须考虑其中一些变量，以使应用衰减率在一段时间内保持停滞。因此，应用程序的生命周期将持续相当长的一段时间。

希望这会有所帮助，但那是我的两分钱。

# php - php：尝试从对象调用数据

> ID：15350014
> 
> 赞同：0
> 
> 时间：2013-03-11T22:38:16.777
> 
> 标签：php, arrays, object, call

我试图从对象中获取特定的数据集，但无法找出为什么我不能在我的作业中调用该号码。就是这样：

```
$teir = $league->data->summonerLeagues->0->teir; 
```

首先，这是从已设置的联赛中调用数据，这样您就可以在这里看到数据的样子：

```
stdClass Object
(
[data] => stdClass Object
    (
        [summonerLeagues] => Array
            (
                [0] => stdClass Object
                    (
                        [queue] => RANKED_SOLO_5x5
                        [name] => Dr. Mundo's Crushers
                        [tier] => BRONZE
                        [requestorsRank] => III
                        [entries] => Array 
```

此时我正在尝试将变量 $teir 分配给对象中的 teir 但他们在对象中使用 0 并且我调用它的方式一定是问题.....

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T22:39:58.327

数组访问使用方括号，而对象属性使用`->`:

```
$tier = $league->data->summonerLeagues[0]->tier; // Fixed typo per @MikePurcell's comment 
```

# python - 在while循环中计算输入？

> ID：15350021
> 
> 赞同：0
> 
> 时间：2013-03-11T22:38:53.047
> 
> 标签：python, string, python-3.x, while-loop, counter

我需要关于我必须编写的函数的帮助，其中包括一个 while 循环，该循环将继续运行，直到用户输入一个空输入，一旦发生这种情况，该函数将返回输入名称的次数

到目前为止，我的代码是：

```
while True:
    name = input('Enter a name:')

    lst = name.split()
    count={}
    for n in lst:
        if n in count:
            count[n]+=1

    for n in count:
        if count[n] == 1:
            print('There is {} student named {}'.format(count[n],\
                                                    n))
        else:

            print('There are {} students named {}'.format(count[n],\
                                                        n)) 
```

这不会重复它只询问用户一次并返回 1

输出应如下所示：

```
Enter next name:Bob
Enter next name:Mike
Enter next name:Bob
Enter next name:Sam
Enter next name:Mike
Enter next name:Bob
Enter next name:

There is 1 student named Sam
There are 2 students named Mike
There are 3 students named Bob 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:13:47.730

@zzk 说的是

```
for n in lst:
    if n in count:
        count[n]+=1
    else:
        count[n]=1 
```

对于使用每个人的建议的最有效的答案

```
count= {}

while True:

    name = raw_input('Enter a name:')
    lst = name.split()

    for n in lst:
        count[n] = count.get(n, 0) + 1

    if not lst:
        for n in count:
            if count[n] == 1:
                print('There is {} student named {}'.format(count[n],n))
            else:
                print('There are {} students named {}'.format(count[n],n))
        break 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T22:45:53.180

```
 for n in lst:
        if n in count:
            count[n]+=1 
```

在您上面的代码中，`n`永远不会添加到您的`count`字典中。即`count`循环后仍然是空的..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:22:56.303

下面有点过分了。这只是为了知道有标准模块`collections`并且它包含`Counter`类。无论如何，我更喜欢问题中使用的简单解决方案（在删除错误之后）。第一个函数读取输入并在输入空名称时中断。第二个函数显示结果：

```
#!python3

import collections

def enterStudents(names=None):

    # Initialize the collection of counted names if it was not passed
    # as the argument.
    if names is None:
        names = collections.Counter()

    # Ask for names until the empty input.
    while True:
        name = input('Enter a name: ')

        # Users are beasts. They may enter whitespaces.
        # Strip it first and if the result is empty string, break the loop.
        name = name.strip()
        if len(name) == 0:
            break

        # The alternative is to split the given string to the first
        # name and the other names. In the case, the strip is done
        # automatically. The end-of-the-loop test can be based 
        # on testing the list.
        #
        # lst = name.split()
        # if not lst:
        #     break
        #
        # name = lst[0]
        #                   (my thanks to johnthexiii ;)

        # New name entered -- update the collection. The update
        # uses the argument as iterable and adds the elements. Because
        # of this the name must be wrapped in a list (or some other 
        # iterable container). Otherwise, the letters of the name would
        # be added to the collection.
        #
        # The collections.Counter() can be considered a bit overkill.
        # Anyway, it may be handy in more complex cases.    
        names.update([name])    

    # Return the collection of counted names.    
    return names

def printStudents(names):
    print(names)   # just for debugging

    # Use .most_common() without the integer argument to iterate over
    # all elements of the collection.
    for name, cnt in names.most_common():
        if cnt == 1:
            print('There is one student named', name)
        else:
            print('There are {} students named {}'.format(cnt, name))

# The body of a program.
if __name__ == '__main__':
    names = enterStudents()
    printStudents(names) 
```

有部分代码可以删除。中的`name`参数`enterStudents()`允许调用函数以将名称添加到现有集合。初始化 to`None`用于使空的初始集合成为默认集合。

`name.strip()`如果您想收集所有内容，包括空格，则不需要。

它打印在我的控制台上

```
c:\tmp\___python\user\so15350021>py a.py
Enter a name: a
Enter a name: b
Enter a name: c
Enter a name: a
Enter a name: a
Enter a name: a
Enter a name:
Counter({'a': 4, 'b': 1, 'c': 1})
There are 4 students named a
There is one student named b
There is one student named c 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T12:19:15.020

`n`除了您从不添加到您的字典这一事实之外，您`count`在 while 循环的每次迭代中一次又一次地初始化该字典。你必须把它放在循环之外。

```
count= {}

while True:
    name = input('Enter a name:')

    lst = name.split()
    for n in lst:
        if n in count:
            count[n] += 1
        else:
            count[n] = 1

    for n in count:
        if count[n] == 1:
            print('There is {} student named {}'.format(count[n],\
                                                    n))
        else:

            print('There are {} students named {}'.format(count[n],\
                                                        n)) 
```

# java - 创建一个java程序猜谜游戏

> ID：15350022
> 
> 赞同：0
> 
> 时间：2013-03-11T22:38:53.553
> 
> 标签：java

编写一个程序，生成一个介于 1 到 100 之间的随机数，并将其保存为秘密数字。然后程序将检查用户是否可以猜出密码。用户可以继续猜数字直到找到数字，或者用户可以输入 0，这将终止程序。

每次用户进行猜测时，程序都会报告如下：

1.  太高或太低（超过 30 折）
2.  高或低（相差 10 到 30 分）
3.  有点高或有点低（低于 10 分）

如果密码是 74 并且用户输入 26，程序将打印“Way too Low”。如果用户然后说 65，那么程序将打印“A Little Low

我被 if 语句卡住了，也许我的结构不正确。我不确定 。

```
import java.util.Scanner;
public class SecretNumber {
    public static void main(String[] args){
        int random1, answer;
        Scanner input = new Scanner(System.in);

        random1 = (int)(Math.random()*10);
        System.out.print(random1);

        System.out.println("Guess the number");
        answer = input.nextInt();

        while(answer != 0) {

            if (answer > (random1 + 30)){

                System.out.println("Way to high");
            }
            else if ( answer > ( random1 - 30)){

                System.out.println("Way to low");

            }
            else if (answer > random1 + 10 && answer < random1 + 30){

                System.out.println("High");

            }
            else if (answer > random1 - 10 && answer < random1 - 30 ){

                System.out.println("Low");

            }
            else if ( answer > random1 + 10){

                System.out.println("A little high");
            }
            else if ( answer < random1 - 10){

                System.out.println("A little low");

            }
            else if ( answer == random1){

                System.out.println("That is correct");
                System.exit(0);
            }
            else {
                System.out.println("Guess the number");
                answer = input.nextInt();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:50:37.897

将您从最后一个 else 块中获得输入的行移到 else 之后（但仍在您的循环中），它将正常工作。

您要这样做的原因是因为它再次进入猜测条件之一（例如，“太低了！”），然后永远不会进入最终的 else，从而导致无限循环。

```
 while (answer !=0){

        // ommitted

        else if ( answer == random1){

            System.out.println("That is correct");
            System.exit(0);
        }

        System.out.println("Guess the number");
        answer = input.nextInt();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-17T01:07:58.010

我进行了一些更改并以某种方式格式化了我觉得更好但是您可以根据自己的喜好复制和粘贴并重新格式化它，我还删除了路径并将其更改为低于或高于但如果您可以将其添加回来你喜欢

```
/*
*/
package randomnumbergame;

import java.util.Scanner;

public class Randomnumbergame 
{

public static void main(String[] args) 
{
    int random1, answer;

    Scanner input = new Scanner(System.in);

    random1 = (int)(Math.random()*100);

    System.out.println("Guess the number I am thinking of, it is between 1 and a 100 or press 0 to quite");
    answer = input.nextInt();

    while(answer != 0) 
    {

        if (answer > random1)
        {

            System.out.println("Your guess is to high");
        }
        else if ( answer > random1)
        {

            System.out.println("Your guess is to low");

        }         
        else 
        {

            System.out.println("That is correct");

        }

    System.out.println("Guess the number I am thinking of, it is between 1 and a 100 or press 0 to quite");
    answer = input.nextInt();

    }
} 
} 
```

另一方面，该程序正在为我工​​作，但无论我似乎猜测什么，它通常似乎告诉我我是正确的 =/ ，我知道 math.random 部分是正确的，因为这是我今天在课堂上使用的这也是我的导师告诉我要使用的。

# md5 - 解密 md5 哈希函数

> ID：15350023
> 
> 赞同：0
> 
> 时间：2013-03-11T22:39:00.553
> 
> 标签：md5

在一次测试中得到了这个问题。但我仍然无法弄清楚这一点。

您是一名渗透测试人员，受雇于一家金融机构来评估包含客户用户名和密码的 Web 应用程序的安全性。通过 Web 应用程序中的漏洞，您可以下载包含类似于以下条目的表格：用户名密码

jsmith 26fb49c7a06ae7cc88792de48bd94539 stevej 31edaffbaba455bc30c52681ceb1ea9d 您还在侦察中发现数据库正在使用 MD5 哈希值并且未加盐。如何恢复文件中的纯文本密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:46:28.343

MD5 是一种单向散列函数，理论上不可逆转。如果您知道密码哈希没有加盐，那么您将不得不使用[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)来寻找任何可能的匹配项。

有许多在线工具可以做到这一点，例如[Ben Ramsey 的 Reverse MD5 hash lookup](http://tools.benramsey.com/md5/)。

# apache-flex - Air 和 Flex Web 应用程序之间的 SharedObject

> ID：15350024
> 
> 赞同：0
> 
> 时间：2013-03-11T22:39:01.790
> 
> 标签：apache-flex, air, shared-objects

我有一个运行嵌入式 Web flex 应用程序的 Air 应用程序（这样做是因为 remoteObject 调用比 webService 调用更快）。问题是我需要在空气和网络嵌入式应用程序之间有一个 sharedObject 。

这在flex中可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:26:18.577

AIR 应用程序的 SharedObjects 存储在与 Web 应用程序的 SharedObjects 不同的目录中。此外，每个 AIR 应用程序和 Web 域都有自己的 SharedObjects 目录。所以你不能直接从其他应用程序中读取 SharedObjects。

您可以尝试`.sol`使用文件系统 API 从 AIR 应用程序中读取和解析 Web 应用程序的文件，但这并非易事。

# node.js - express.js - 单行中多个路由的单个路由处理程序

> ID：15350025
> 
> 赞同：137
> 
> 时间：2013-03-11T22:39:10.810
> 
> 标签：node.js, regex, express, routing

有没有办法在单个函数调用中做到这一点？

```
var todo = function (req, res){};

app.get("/", todo);
app.get("/blabla", todo);
app.get("/blablablabla", todo); 
```

就像是：

```
app.get("/", "/blabla", "/blablablabla", todo ); 
```

我知道这是一个语法混乱，但只是为了让我了解我想要实现的目标，一组路线会很棒！

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2014-09-26T11:18:48.090

我在寻找相同的功能时遇到了这个问题。

@Jonathan Ong 在上面的评论中提到，不推荐使用数组作为路径，但它在 Express 4 中明确描述，它在 Express 3.x 中有效。这是一个可以尝试的示例：

```
app.get(
    ['/test', '/alternative', '/barcus*', '/farcus/:farcus/', '/hoop(|la|lapoo|lul)/poo'],
    function ( request, response ) {

    }
); 
```

从`request`对象内部，路径为`/hooplul/poo?bandle=froo&bandle=pee&bof=blarg`：

```
"route": {
    "keys": [
        {
            "optional": false, 
            "name": "farcus"
        }
    ], 
    "callbacks": [
        null
    ], 
    "params": [
        null, 
        null, 
        "lul"
    ], 
    "regexp": {}, 
    "path": [
        "/test", 
        "/alternative", 
        "/barcus*", 
        "/farcus/:farcus/", 
        "/hoop(|la|lapoo|lul)/poo"
    ], 
    "method": "get"
}, 
```

注意 params 会发生什么：它知道所有可能路径中的捕获组和参数，无论它们是否在当前请求中使用。

因此，通过数组堆叠多条路径可以很容易地完成，但是如果您希望从通过参数或捕获组使用的路径中获取任何有用的东西，那么副作用可能是不可预测的。它可能对冗余/混叠更有用，在这种情况下它会很好地工作。

编辑：另请参阅[下面](https://stackoverflow.com/questions/15350025/express-js-single-routing-handler-for-multiple-routes-in-a-single-line/26058349#37596851)的@c24w 的答案。

编辑 2：这是一个中等受欢迎的答案。请记住，ExpressJS 与大多数 Node.js 库一样，是一场可移动的盛宴。虽然上面的路由仍然有效（我现在正在使用它，一个非常方便的功能），但我不能保证请求对象的输出（它肯定与我所描述的不同）。请仔细测试以确保您获得所需的结果。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2013-03-11T23:56:06.930

```
app.get('/:var(bla|blabla)?', todo) 
```

`:var`设置`req.param`你不使用的。它仅在这种情况下用于设置正则表达式。

`(bla|blabla)`将正则表达式设置为匹配，因此它匹配字符串`bla`和`blablah`.

`?`使整个正则表达式可选，因此它也匹配`/`。

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2013-06-17T19:52:59.063

就像您提到的那样，您实际上可以传入一个*路径数组，并且效果很好：*

```
var a = ['/', '/blabla', '/blablablabla'];
app.get(a, todo); 
```

* * *

## 回答 #4

> 赞同：42
> 
> 时间：2016-06-02T16:01:39.130

只是为了详细说明[凯文的答案](https://stackoverflow.com/a/26058349/706561)，这是来自[4.x 文档](http://expressjs.com/en/4x/api.html#app.all)：

> 调用中间件函数的路径；可以是以下任何一种：
> 
> *   表示路径的字符串。
> *   路径模式。
> *   匹配路径的正则表达式模式。
> *   **以上任何一种组合的数组。**

* * *

他们有一些[例子](http://expressjs.com/en/4x/api.html#path-examples)，包括：

> `/abcd`这将匹配以、`/xyza`、`/lmn`和开头的路径`/pqr`：
> 
> ```
> app.use(['/abcd', '/xyza', /\/lmn|\/pqr/], function (req, res, next) {
>   next();
> }); 
> ```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2016-11-30T22:18:16.620

我去了一个：

```
['path', 'altPath'].forEach(function(path) {
  app.get(path, function(req, res) { etc. });
}); 
```

# c# - 使用 TimeSpan 计算时差

> ID：15350028
> 
> 赞同：0
> 
> 时间：2013-03-11T22:39:14.940
> 
> 标签：c#, winforms, visual-studio-2010, datetime, timespan

我正在尝试计算两个给定时隙的时差，但答案似乎不正确我做错了什么？

我的代码： ![在此处输入图像描述](../Images/17a7cad145d76bbc4049e66b588a77d4.png)

由于某种原因，给出的值`amFinish`从 16:30 更改为 16:18:00 我不知道为什么！

如果我有一个文本框并且用户输入 16.30 我将如何获取该值并将其计算为 16hrs 和 30mins

答案应该是 05.30，但我得到的是 05.18。有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T22:40:36.383

一小时的30%是18分钟。

16.30 小时是 16 小时和 30/100 小时的部分。

16 个半小时将是 16.50。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T22:51:05.287

正如 Oded 解释的那样，您有十进制`16.3`小时数，即 16 小时 18 分钟。

如果您需要同时指定小时、分钟和秒，请使用`TimeSpan`带有三个参数的构造函数的重载：

```
TimeSpan amStart = new TimeSpan(0, 11, 0);
TimeSpan amFinish = new TimeSpan(16, 30, 0); 
```

如果您需要将 a 转换`string`为 a `TimeSpan`，请使用以下内容：

```
TimeSpan amFinish = TimeSpan.ParseExact("16.30", @"hh\.mm", CultureInfo.InvariantCulture); 
```

# java - 当 jcombobox 在 solaris 中更改时面板刷新问题

> ID：15350034
> 
> 赞同：0
> 
> 时间：2013-03-11T22:39:44.303
> 
> 标签：java, swing, jtable, solaris, jcombobox

我遇到了一个奇怪的问题，使用 jComboBox 会导致面板下方面板部分出现屏幕重绘问题。

具体来说：

我有一个带有表格的面板，该表格位于组合框下方。（表格有一个彩色标题行）

打开和关闭组合框（不选择任何内容）会导致表格标题的颜色不同（变为白色）。

颜色错误的区域是组合框手柄正下方的表格单元格。（从单元格的左侧开始，并恰好在组合框句柄停止的位置停止。）

调整窗口大小可使面板正确着色。（这向我表明这是一个绘画问题，如：[http](http://www.oracle.com/technetwork/java/javase/swing-135905.html) ://www.oracle.com/technetwork/java/javase/swing-135905.html 中所述）

有趣的是，它似乎只发生在 Solaris 上（不是 Linux，没有尝试过 windows）。

提前道歉没有提供一个有效的例子，只是在寻找一些想法来检查。

# c++ - 在数组中存储双精度时，它们会变得混乱

> ID：15350036
> 
> 赞同：-1
> 
> 时间：2013-03-11T22:39:53.573
> 
> 标签：c++, arrays, double

你好，我在 C++ 程序中有一个包含 25 个双精度数的数组。当我将双精度数放入数组时，它们看起来像这样 1.29839，然后当我尝试访问数组中的这个数字时，它看起来像这样 4.45053e-317。我是个新手，真的迷路了。如果有人知道为什么会发生这种情况，我们将不胜感激。

这是代码：

```
int main()
{
    double los[25];
    ifstream html;
    html.open("tmp");
    int count = 0;
    while(html.good())
    {
        //cout << "in\n" ;
        string line;
        getline(html, line);
        if(line.length() > 11)
        {
            string tmp = line.substr(10);
            if(tmp.length() > 3)
            {
                string cmp = tmp.substr(2,2);
                if(cmp == "lo")
                {
                    //cout << "\n" << tmp << "\n";
                    double curr = atof(tmp.substr(13).c_str());
                    los[count] == curr;
                    cout << curr << "\n";
                    count++;
                }
            }
        }
    }
    cout << count << "\n";
    for(int i=0; i<25; i++)
    {
        double curr = los[i];
        cout << curr << "\n";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T22:54:58.617

问题是你没有将任何东西分配到你的数组中。线

```
los[count] == curr; 
```

只是评估它们是否相等，而不是将结果存储在任何地方，因此什么也不做。将其更改为仅使用一个`=`.

为避免其中一些问题，请始终在启用警告的情况下进行编译（`-W -Wall`这是一个很好的起点）。你会得到一个警告，说这条线路什么都不做，我很确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:56:07.817

更改`los[count] == curr;`为`los[count] = curr;`

目前，这条线不像作业那样工作。

# web - 我需要加快我的网站并减少文件调用的数量

> ID：15350038
> 
> 赞同：0
> 
> 时间：2013-03-11T22:39:59.607
> 
> 标签：web, browser-cache

我的虚拟主机要求我加快网站速度并减少文件调用次数。好的，让我稍微解释一下，我的网站 95% 被用作我的数据库（在同一主机中）和我的 Android 应用程序（我有大约 30 个需要来自我的数据库的信息）之间的桥梁，信息只有一种方式（就像现在一样）应用程序调用一个像这样的 json 字符串在站点中： [http](http://www.guiasitio.com/mantenimiento/applinks/prlinks.php) ://www.guiasitio.com/mantenimiento/applinks/prlinks.php 和这个网页在 web 视图中显示为欢迎消息： [http：/ /www.guiasitio.com/movilapp/test.php](http://www.guiasitio.com/movilapp/test.php) 这个页面有一些图片和 jquery，所以我认为这是那些占用大量内存的页面，他们告诉我使用一些代码在个人浏览器中创建这些文件的缓存以节省内存（这是一点中文我，因为我不明白）有人可以给我一个想法，然后给我一个关于如何完成这个的教程吗？Android 应用程序中的 web 视图可以保留这些文件的缓存吗？您对他的所有帮助表示高度赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:03:25.247

如果 CDN 或内容交付网络对您很有效，那么它会是一个简单的解决方案。本质上，您正在卸载工作或将静态文件（主要是图像和 CSS 文件）存储和提供给另一台服务器。除了减少您当前服务器上的负载外，它还将加速您的站点，因为文件将从最接近每个站点访问者的位置提供。

有很多不错的 CDN 选择。[Amazon CloudFront](http://aws.amazon.com/cloudfront/)是一种流行的选择，尽管在我的选择中，最容易设置的服务奖是[CloudFlare](https://www.cloudflare.com) ...他们提供免费计划，只需填写详细信息，更改您域上的 DNS 设置以指向 CloudFlare，您将启动并运行。

通过一些微调，您可以期望将服务器上的请求减少多达 80%

我同时使用 Amazon 和 CloudFlare，效果很好。我发现需要谨慎的主要事情是仔细检查您网站上的所有脚本并确保它们按预期工作。CloudFlare 有一个简单的设置，您也可以在其中指定缓存设置，因此您的列表中还有另一个细节。

祝你好运！

# php - jQuery，未正确从购物车中删除的项目

> ID：15350041
> 
> 赞同：0
> 
> 时间：2013-03-11T22:40:07.453
> 
> 标签：php, ajax, jquery

我对 jQuery 很陌生。我正在构建购物车并尝试从购物车中删除产品。如果我在购物车中有一个项目然后将其删除，它会消失，但如果我将另一个项目添加到购物车，我删除的项目将重新出现。如果我有一张包含多个对象的卡片，当我尝试删除它时，它只会更改总数。

```
$('.addToCart').click(function(){
    var id = this.id;
    var price = parseFloat($('#priceAdd-'+id).val()).toFixed(2);;
    var name = $('#name-'+id).val();
    var total =(parseFloat($('#total').text())+parseFloat(price)).toFixed(2);
    cartSize++;

    $('#product-'+id).fadeOut('fast');
    $('#added-'+id).delay(500).fadeIn('fast');

    $.ajax({
        type: "POST",
        url: 'resources/addToCart.php',
        data: { itemId: id , name: name, price: price},
        cache: false,
        success: function(html){
            $("ol").append(html).slideDown("slow");
            $('#noItems').fadeOut('fast');
            $('#total').html(total);
            $('#mainCart').fadeIn('fast');
        }
    });
});

$('ol').on("click",'.del',function(e){
    var id= e.target.id;
    var productId = $('#productId-'+id).text();
    var productPrice = $('#price-'+id).text();
    var total = $('#total').text();
    var newPrice = (parseFloat(total) - parseFloat(productPrice)).toFixed(2);
    var dataString = 'id='+ id;
    cartSize--;

    alert(id);

    $('#total').html(newPrice);     
    $("#cart-"+id).remove();

    $.ajax({
        type: "POST",
        url: "resources/del.php",
        data: { id: id },
        cache: false,
        success: function(html){
            $('#added-'+productId).fadeOut('Fast');
            $('#product-'+productId).delay(600).fadeIn('Fast');

            if(cartSize == 0){
                $('#noItems').fadeIn('Fast');
                $('#mainCart').fadeOut('Fast');     
            }
        }
    });
    return false;   
}); 
```

任何输入将不胜感激

谢谢

编辑：还有其他人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:49:47.027

我认为当您调用“resources/del.php”时，这不会删除服务器中的项目（仅在视觉上），然后当您使用“resources/addToCart.php”添加另一个项目时，这将返回所有项目（甚至你认为你删除的那个）

# phpmyadmin - phpmyadmin 和视图

> ID：15350044
> 
> 赞同：0
> 
> 时间：2013-03-11T22:40:18.257
> 
> 标签：phpmyadmin

在我的数据库中，当我使用 phpmyadmin 并单击查看表的第二页时，需要很长时间（大约 1 分钟）才能出现。

我相信造成这种情况的原因是数据库中的视图。我给了他们所有的 av 将它们全部推到第二页，但是必须发生一些事情才能使生成列表花费这么长时间？

这篇文章似乎在讨论同样的问题： [heavy mysql views break phpmyadmin](https://stackoverflow.com/questions/11850158/heavy-mysql-views-break-phpmyadmin)

有没有办法让 phpmysql 只显示列表中的视图？

谢谢，

垫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:09:27.820

```
In my database when I use phpmyadmin and click to view the second page
 of tables it take a long time (1min roughly) to appear. 
```

当您单击查看下一页（或任何其他页面）时，您不会创建或查看任何视图。您只是限制查询以减少显示的元组数量。

**例如：** 一般 phpmyadmin 限制没有。元组的数量为 30。因此，每当您键入查询时，phpmyadmin 都会将 LIMIT 0,30 附加到查询并运行它。如果您按下第二页，基本上会执行相同的查询，但这次会附加 LIMIT 30,30。

然而，在视图的情况下，执行时间取决于创建视图时使用的查询的复杂性。尝试重构并形成更好的查询以获得更快的结果

# scala - Scala - 递归视图边界

> ID：15350045
> 
> 赞同：0
> 
> 时间：2013-03-11T22:40:33.960
> 
> 标签：scala

如何让 scala 编译器递归查找隐式视图？

```
type Expression = () => String

implicit def constant(s: String): Expression = () => s

implicit def evaluation[A <% Expression](exprs: Seq[A]): Expression = () => exprs match {
  case "concat" :: args => args.map(_.apply()).mkString
}

Seq("concat", "foo", "bar")() // This works
Seq("concat", "foo", Seq("concat", "bar", "baz"))() // No implicit view available from java.lang.Object => () => String. 
```

我知道最后一个序列具有`Object`没有隐式视图的通用类型，但是如何在不诉诸动态模式匹配的情况下定义类型安全的`AnyRef`？

在 Scala 2.9.2 中尝试过

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:19:15.070

由于内容混合，类型推断发现您有一个`Seq[Any]`。最简单的解决方案是帮助编译器并告诉它你有一个`Seq[Expression]`

```
Seq[Expression]("concat", "foo", Seq("concat", "bar", "baz"))() 
```

## 编辑

这就是你可以用元组解决它的方法：

```
type Expression = () => String

implicit def constant(s: String): Expression = () => s

implicit def evaluation[A <% Expression, B <% Expression, C <% Expression](
  exprs: (A, B, C)): Expression = 
  () => exprs match {
    case ("concat", arg1, arg2) => arg1() + arg2()
  }

("concat", "foo", "bar")()                      //> res0: String = foobar
("concat", "foo", ("concat", "bar", "baz"))()   //> res1: String = foobarbaz 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T05:14:16.200

我还想知道为什么 scala 编译器无法弄清楚内部 Sequence 是一个表达式——我想，你只是忘记了一些括号——它们是：

```
Seq("concat", "foo", Seq("concat", "bar", "baz")())() // added inner brackets 
```

**编辑**

但是，我明白您的观点-这也行不通：

```
val x: Expression = Seq("concat", "foo", "bar") // This works
val y: Expression = Seq("concat", "foo", x) // No implicit view available - again 
```

所以 - 这里也有必要为 x 提供括号。

# linux - 比较 2 个文件，删除不常见的字符串脚本

> ID：15350049
> 
> 赞同：0
> 
> 时间：2013-03-11T22:40:44.497
> 
> 标签：linux, unix, search, scripting, awk

我有两个文件。1 个文件已选择输入和参数

另一个具有所有参数和定义

示例文件 1.txt

```
 message id: "close"
 message id: "open"
 message id: "down"
 message id: "up" 
```

示例文件 2.txt

```
 #comment
  message id: "close"
  message value: " to turn off"

  #comment
  message id: "open"
  message value: "to inite" 
```

等等

我想使用文件 1 的字符串参数在 file2.txt 中搜索消息 id。

我想在它前面用 " 标记每个消息 ID、值和注释，所以它看起来像这样：（仅当消息 ID 在 file1 中时）

```
 " #comment
 " message id: "close"
 " message value: " to turn off"

 " #comment
 " message id: "open"
 " message value: "to inite" 
```

谁能告诉我从哪里开始？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:09:54.047

如果文件 2 中的记录上方总是有注释，并且它们由不包含空格的空行分隔，您可以尝试：

```
awk 'NR==FNR{A[$0]; next}$2 in A{gsub(/^|\n/,"&\"")}1' file1 RS= ORS='\n\n' FS='\n' file2 
```

对于您的特定示例文件，需要匹配的字符位置 1 和或 2 中有空格，例如：

```
awk 'NR==FNR{A[" " $0]; next}$2 in A{gsub(/^|\n/,"&\"")}1' file1 RS= ORS='\n\n' FS='\n' file2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:48:13.723

这个怎么样？

```
$ cat file1.txt | xargs -I % grep file2.txt -e % | cut -d \" -f 2
open
close 
```

**编辑：**另一种方式。

```
$ for i in `cat file1.txt`; do grep file2.txt -e $i | cut -d \" -f 2; done
open
close 
```

# asp.net - 安装 ASP.NET 和 Web Tools 2012.2 更新后服务器没有返回映射数据

> ID：15350050
> 
> 赞同：1
> 
> 时间：2013-03-11T22:40:45.973
> 
> 标签：asp.net, asp.net-mvc-4, visual-studio-2012, page-inspector

去[http://weblogs.asp.net/scottgu/archive/2013/02/18/announcing-release-of-asp-net-and-web-tools-2012-2-update.aspx](http://weblogs.asp.net/scottgu/archive/2013/02/18/announcing-release-of-asp-net-and-web-tools-2012-2-update.aspx)，下载安装成功更新，但现在当我尝试在页面检查器中查看我的网站时，它告诉我“没有从服务器返回映射数据”。创建了一个新的 MVC4 应用程序，并且在该项目页面检查器中工作正常。我确保 Web Essentials 2012 扩展已更新到最新版本，然后安装 2012.2 更新，如博客所述。此页面也没有太大帮助： http: [//msdn.microsoft.com/en-us/library/jj204395.aspx](http://msdn.microsoft.com/en-us/library/jj204395.aspx)：错误没有从服务器返回映射数据描述页面检查器无法在浏览器之间映射和源代码。原因 未确定。修复 没有具体建议。

![在此处输入图像描述](../Images/bef61f32164e9c387c787e3a5932bb91.png)

知道什么可能是错的，我还应该尝试什么？

编辑：这太奇怪了。我什么都没做，现在突然又开始工作了！除非关闭和打开 Visual Studio 和项目几次。这就是它现在的样子——注意第一个和最后一个项目符号的区别： ![在此处输入图像描述](../Images/d9e6aeecd1fe3878a27358c368c701ca.png)

Edit2：在两个项目中都使用了 IISExpress。“没有从服务器返回映射数据”。听起来这可能是 IISExpress 不喜欢安装的新东西的问题？

Edit3：这段代码破坏了页面检查器：

```
<map id="surfer" name="surfer">
   <area shape="poly" coords="0,23,30,13,40,3,64,5,69,19,86,23,98,30,99,51,72,63,68,83,41,83,38,67,1,65" alt="&%#&#064;?!">
</map> 
```

从来没有想过它实际上会破坏整个工具，所以没有费心去测试。这是我得到提示的地方： http: [//social.msdn.microsoft.com/Forums/sv/visualstudiogeneral/thread/470ece78-86c3-4fab-b38c-cb969d515d43](http://social.msdn.microsoft.com/Forums/sv/visualstudiogeneral/thread/470ece78-86c3-4fab-b38c-cb969d515d43)

似乎是页面检查器/剃须刀引擎或两者中的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T14:20:26.997

由页面检查器/剃须刀引擎中的错误引起。很快就会修好。请参阅有问题的 Anands 评论。

# vb.net - 如何在 VB.NET 中获取所有本地存储的用户配置文件的用户名和域？

> ID：15350060
> 
> 赞同：-4
> 
> 时间：2013-03-11T22:42:06.270
> 
> 标签：vb.net, user-profile

如何使用 VB.NET 检索存储在计算机上的所有用户配置文件的用户名和域？下面的代码正是我需要的，但在 VBScript 中。我怎样才能在 VB.NET 中做同样的事情？

```
 Const HKLM = &H80000002
    Const profiles = "SOFTWARE\Microsoft\Windows NT\CurrentVersion\ProfileList"

    sh = CreateObject("WScript.Shell")
    fso = CreateObject("Scripting.FileSystemObject")
    wmi = GetObject("winmgmts://./root/cimv2")
    reg = GetObject("winmgmts://./root/default:StdRegProv")

    reg.EnumKey(HKLM, profiles, subkeys)
    For Each sid In subkeys
        reg.GetStringValue(HKLM, profiles & "\" & sid, "ProfileImagePath", path)
        path = sh.ExpandEnvironmentStrings(path)
        If fso.FolderExists(path) Then
            acct = wmi.Get("Win32_SID.SID='" & sid & "'")
            CheckedListBox1.Items.Add(acct.ReferencedDomainName & "\" & acct.AccountName)
        End If
    Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:59:45.503

对 Win32_UserAccount 的简单查询将提供所需的信息

```
Sub Main
    Dim oquery =  new System.Management.ObjectQuery("SELECT * FROM Win32_UserAccount")
    Dim mosearcher = new System.Management.ManagementObjectSearcher(oquery)
    Dim moc = mosearcher.Get()
    for each mo in moc
        Console.WriteLine(mo.Properties("Caption").Value.ToString())
        Console.WriteLine(mo.Properties("Domain").Value.ToString())
    Next
End Sub 
```

需要引用 System.Management.dll 和导入 System.Management

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T22:49:42.717

我认为这篇关于 Code Project 的文章[http://www.codeproject.com/Articles/19689/Working-with-Active-Directory-in-VB-NET](http://www.codeproject.com/Articles/19689/Working-with-Active-Directory-in-VB-NET)会对您有所帮助。当您阅读它时，您应该会看到提供的答案“ansgar-wiechers”与本文之间的相似之处。

# android - ActionBar 选项卡中的 GoogleMap 片段（使用 ActionBarSherlock）

> ID：15350063
> 
> 赞同：0
> 
> 时间：2013-03-11T22:42:19.390
> 
> 标签：android, google-maps, android-actionbar, actionbarsherlock, fragment

我遇到了一个（我敢肯定）愚蠢的问题，可以用另一双眼睛。

我有一个应用程序需要在应用程序的多个位置显示 GoogleMaps。我在我的主要活动中成功展示了它，所有 Play 库都已就位，V2 密钥已全部设置，等等。

我的（截断）`mapview.xml`看起来像：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" /> 
```

正如我所说，在主要活动上，我可以正确设置 contentView 并绘制地图，没问题。

但是，在另一个活动中，我正在实现选项卡：

```
 ActionBar actionBar = getSupportActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // Add tabs
    actionBar.addTab(actionBar.newTab().setText(R.string.map).setTabListener(this)); 
```

这就是我遇到麻烦的地方。在选项卡选择的侦听器上，我执行以下操作，我确定这会出错（布局是一个空的线性布局）：

```
 GoogleMapFragment mapFragment = new GoogleMapFragment();
    fragmentTransaction = supportFragmentManager.beginTransaction();
    fragmentTransaction.addToBackStack(null);
    fragmentTransaction.replace(layout.getId(), mapFragment);
    fragmentTransaction.commit(); 
```

该地图片段如下所示：

```
@Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.map_view, null);
  } 
```

当它运行时，我会收到各种错误，具体取决于我如何调整它，例如

```
android.view.InflateException: Binary XML file line #2: Error inflating class fragment
Caused by: java.lang.IllegalArgumentException: Binary XML file line #2: Duplicate id 0x7f040058, tag null, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment 
```

就像我说的，我确定这是错误的，似乎我正在尝试对片段进行两次膨胀，或者可能通过在应用程序的两个位置使用相同的片段而遇到问题。

在这一点上，我不确定如何解决它。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T23:27:40.197

您已经在 xml 文件中定义了片段的布局，因此您不必在运行时添加它，只需在活动的 setContentView 中将片段布局（在您的情况下为 mapview.xml）作为参数传递。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T09:04:56.447

尝试在布局中使用 MapView 而不是 Fragment。

```
<com.google.android.gms.maps.MapView
    android:id="@+id/map_view"
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

# php - 编辑表单中未“选中”单选按钮值

> ID：15350068
> 
> 赞同：0
> 
> 时间：2013-03-11T22:42:43.900
> 
> 标签：php, mysql, forms, radio-button

我有一个表格，每行都有选项编辑。当我点击编辑时，会弹出一个表单并显示填写了要编辑的数据的字段。但是未显示选定的单选按钮。
你能说出我的代码中缺少什么吗？就像我怎样才能让正确的单选按钮显示选中的值？

**这是编辑表格：**

```
<form action="edit_movie.php" method="post">
<input type="hidden" name="id" value="<?php echo $movie['id']; ?>" /> <br>
Title:<br> <input type="text" name="title" value="<?php echo $movie['title']; ?>" /> <br>
Release Year:<br> <input type="text" name="release_year" value="<?php echo $movie['release_year']; ?>" /> <br>
Director:<br> <input type="text" name="director" value="<?php echo $movie['director']; ?>" /> <br><br>
Select genre:
<br> <input type="radio" name="genre_id" value="1"<?php if($movie['genre'] == 1) { echo ' checked'; } ?> />Action<br>
<br> <input type="radio" name="genre_id" value="2"<?php if($movie['genre'] == 2) { echo ' checked'; } ?> />Comedy<br>
<br> <input type="radio" name="genre_id" value="3"<?php if($movie['genre'] == 3) { echo ' checked'; } ?> />Drama<br>
<br> <input type="radio" name="genre_id" value="4"<?php if($movie['genre'] == 4) { echo ' checked'; } ?> />Horror<br>
<br> <input type="radio" name="genre_id" value="5"<?php if($movie['genre'] == 5) { echo ' checked'; } ?> />Romance<br>
<br> <input type="radio" name="genre_id" value="6"<?php if($movie['genre'] == 6) { echo ' checked'; } ?> />Thriller<br>
<input type="submit" value="Update movie" />
</form> 
```

**这是编辑的代码：**

```
function get_movie_by_id($id){

   $query = sprintf("SELECT * FROM movies m INNER JOIN categories c ON m.genre_id = c.genre_id WHERE id = '%s' LIMIT 1", mysql_real_escape_string($id));

   $result = mysql_query($query);

   if ( ! $result ){
       return false;
   } else {
         $return = array();

         while ($row = mysql_fetch_assoc($result)){

                $return = array('director' => $row['director'], 'genre' => $row['genre'], 'release_year' => $row['release_year'], 'title' => $row['title'], 'id' => $row['id']); 
         }
             return $return;
     }
}

if ( isset($_GET['edit']) ){

   $movie = get_movie_by_id($_GET['edit']);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:48:06.400

我从您的加入中假设有问题的字段是“genre_id”，而不是“genre”：

```
$return = array('director' => $row['director'], 'genre' => $row['genre_id'], 'release_year' => $row['release_year'], 'title' => $row['title'], 'id' => $row['id']); 
```

# javascript - UrlFetchApp.fetch - 缺少网页代码。如何获取完整代码？

> ID：15350070
> 
> 赞同：1
> 
> 时间：2013-03-11T22:42:50.857
> 
> 标签：javascript, google-apps-script

我正在尝试从此网页获取数据：

[http://www.gymboree.com/shop/dept_item.jsp?PRODUCT%3C%3Eprd_id=845524446027540&FOLDER%3C%3Efolder_id=2534374305278637&ASSORTMENT%3C%3East_id=1408474395917465&bmUID=1363035=0&fitize_type=1363035=27506](http://www.gymboree.com/shop/dept_item.jsp?PRODUCT%3C%3Eprd_id=845524446027540&FOLDER%3C%3Efolder_id=2534374305278637&ASSORTMENT%3C%3East_id=1408474395917465&bmUID=1363035275064&productSizeSelected=0&fit_type=)

通过 UrlFetchApp.fetch(url).getContentText() 但我没有从页面中获取所有数据：

UrlFetchApp.fetch(url).getContentText() 给我：

```
<ul id=""size-options-ul"" class=""size-options""> <!-- AJAX DATA --> 
```

但在这个目录中有一个额外的代码（我点击谷歌浏览器，右键点击页面，然后检查元素。Chrome 给了我这个页面的所有代码）

```
<ul id="size-options-ul" class="size-options"><li id="1689949376460861_0" title="0-3 mos"><a href="javascript:DoSmth()" title="0-3 mos"><span>0-3 mos</span></a></li><li id="1689949376460862_1" title="3-6 mos" class=""><a href="javascript:DoSmth()" title="3-6 mos"><span>3-6 mos</span></a></li><li id="1689949376460864_2" title="6-12 mos" class="selected"><a href="javascript:DoSmth()" title="6-12 mos"><span>6-12 mos</span></a></li><li id="1689949376460865_3" title="12-18 mos" class=""><a href="javascript:DoSmth()" title="12-18 mos"><span>12-18 mos</span></a></li><li id="1689949376460866_4" title="18-24 mos"><a href="javascript:DoSmth()" title="18-24 mos"><span>18-24 mos</span></a></li></ul> 
```

我怎样才能得到完整的代码？也许 UrlFetch 的一些参数可以做到这一点？我认为这个页面是通过 Javascript 动态生成的......但不知何故，Chrome 会从页面中获取所有数据，并且脚本可能是可能的。

谢谢！伊万。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T05:07:51.587

Apps 脚本`UrlFetchApp`不会解释任何内容，因为它会发出 HTTP 请求并仅返回来自服务器的响应。

但是 Chrome 会在页面加载后解释 JavaScript 并将结果插入 DOM（因此您可以在 Inspect Element 中查看当前状态）。

您需要使用可以“解释”JavaScript 的工具查看这些链接

*   [屏幕抓取-w-javascript 链接 1](https://stackoverflow.com/questions/857515/screen-scraping-from-a-web-page-with-a-lot-of-javascript)
*   [屏幕抓取-w-javascript 链接 2](https://stackoverflow.com/questions/125177/whats-a-good-tool-to-screen-scrape-with-javascript-support?lq=1)

# android - 获取数据库内容列表到字符串

> ID：15350073
> 
> 赞同：0
> 
> 时间：2013-03-11T22:43:19.870
> 
> 标签：android, android-fragments, android-viewpager

我想用 viewpager 在问题之间滑动

1) 我可以通过以下代码使用自定义页面，例如 ("text1", "text2", "text3, "text4")：在 pageadapter 中：

```
 protected static final String[] CONTENT = new String[] { "text1", "text2", "text3, "text4", }; 
```

1）但我无法将数据从数据库获取到字符串，例如：

```
new String[] { "myquestion1", "myquestion2", ....... "my lastquestion", } 
```

在我的测验活动中：

```
/**
     * 
     */
    public void initView() {
        this.manageView(true);
    }

    /**
     * updates the user interface
     * 
     * @param start whether this is the start of the quiz
     */
    @SuppressWarnings("boxing")
    public void manageView(final boolean start) {
        if (QuizActivity.ll.getChildCount() > 0) {
            QuizActivity.ll.removeAllViews();
            QuizActivity.ll.addView(QuizActivity.questionText);
        }

        QuizActivity.warning.setVisibility(View.INVISIBLE);
        QuizActivity.warningIcon.setVisibility(View.INVISIBLE);
        if (this.q.isReviewing()) {
            QuizActivity.warning.setVisibility(View.VISIBLE);
            QuizActivity.warningIcon.setVisibility(View.VISIBLE);
            if (this.q.getCurrentQuestion().isAnsweredCorrect()) {
                QuizActivity.warning.setText(R.string.correct);
                QuizActivity.warning.setTextColor(Statics.goodColor);
                QuizActivity.warningIcon.setImageResource(R.drawable.correct);
            } else {
                QuizActivity.warning.setText(R.string.wrong);
                QuizActivity.warning.setTextColor(Statics.badColor);
                QuizActivity.warningIcon.setImageResource(R.drawable.wrong);
            }
        }
        QuizActivity.back.setEnabled((!start || this.q.isBackAllowed())
                && (!this.q.isFirstQuestion()));
        if (this.q.isLastQuestion()) {
            QuizActivity.next.setText(R.string.finish);
            QuizActivity.next.setCompoundDrawablesWithIntrinsicBounds(null, null,
                    this.getResources().getDrawable(R.drawable.finish_quiz), null);
        } else {
            QuizActivity.next.setText(R.string.next);

            QuizActivity.next.setCompoundDrawablesWithIntrinsicBounds(null, null,
                    this.getResources().getDrawable(R.drawable.arrow_right), null);
        }
        QuizActivity.review.setChecked(this.q.getCurrentQuestion().isMarkedForReview());
        if (this.q.isReviewing()) {
            QuizActivity.review.setVisibility(View.GONE);
            if ((null != this.q.getCurrentQuestion().getExplanation())
                    && (this.q.getCurrentQuestion().getExplanation().length() > 0)) {
                QuizActivity.explain.setVisibility(View.VISIBLE);
            } else {
                QuizActivity.explain.setVisibility(View.GONE);
            }
        }
        QuizActivity.progress.setText(this.getString(R.string.q_) + " "
                + this.q.getCurrentQuestionNumber() + "/"
                + this.q.getQuestionCount());
        QuizActivity.title.setText(this.q.getCategory().getParentCategoryTitle() + " - "
                + this.q.getCategory().getCategoryTitle());
        QuizActivity.questionText.setText(this.q.getCurrentQuestion().getQuestionText());
        if (this.q.isShowAmountAnswers()) {
            QuizActivity.questionText.append(" (" + this.getString(R.string.select) +
                    " " + this.q.getCurrentQuestion().getAmountCorrectAnswers() + ")");
        }
        this.userAnswers = this.q.getCurrentQuestion().getUserAnswers();
        this.answers = new LinkedList<CompoundButton>();

        if (!this.q.isShowAmountAnswers()
                || (this.q.getCurrentQuestion().getAmountCorrectAnswers() > 1)) {

            for (final Answer ans : this.q.getCurrentQuestion().getAnswers()) {
                this.answers.add(new CheckBox(this));
                this.answers.getLast().setText(ans.getAnswerText());
                this.answers.getLast().setId(ans.getAnswerId());
                this.answers.getLast().setChecked(this.userAnswers.get(ans.getAnswerId()));
                if (this.q.isReviewing()) {
                    this.answers.getLast().setEnabled(false);
                    if (ans.isAnswerCorrect()) {
                        this.answers.getLast().setTextColor(Statics
                                .goodColor);
                    } else {
                        this.answers.getLast().setTextColor(Statics
                                .badColor);
                    }
                }
                QuizActivity.ll.addView(this.answers.getLast());
            }
        } else {
            final RadioGroup rg = new RadioGroup(this);

            for (final Answer ans : this.q.getCurrentQuestion().getAnswers()) {
                this.answers.add(new RadioButton(this));
                this.answers.getLast().setText(ans.getAnswerText());
                this.answers.getLast().setId(ans.getAnswerId());
                this.answers.getLast().setChecked(this.userAnswers.get(ans.getAnswerId()));
                if (this.q.isReviewing()) {

                    this.answers.getLast().setEnabled(false);
                    if (ans.isAnswerCorrect()) {
                        this.answers.getLast().setTextColor(Statics
                                .goodColor);
                    } else {
                        this.answers.getLast().setTextColor(Statics
                                .badColor);
                    }
                }
                this.answers.getLast()
                        .setOnCheckedChangeListener(new OnCheckedChangeListener() {
                            @SuppressWarnings("synthetic-access")
                            @Override
                            public void onCheckedChanged(final CompoundButton buttonView,
                                    final boolean isChecked) {
                                for (final View rb : QuizActivity.this.answers)
                        {
                            ((CompoundButton) rb).setChecked(false);
                        }
                        buttonView.setChecked(isChecked);
                    }
                        });
                rg.addView(this.answers.getLast());
            }
            QuizActivity.ll.addView(rg);
        }

        QuizActivity.next.setOnClickListener(this);
        QuizActivity.back.setOnClickListener(this);
        QuizActivity.explain.setOnClickListener(this);
    } 
```

那么如何将我的问题列表应用于“ new String[] {...,...,... } ”

# objective-c - 如何使 UILabel 文本在几秒钟后消失？

> ID：15350074
> 
> 赞同：3
> 
> 时间：2013-03-11T22:43:20.183
> 
> 标签：objective-c, cocoa-touch, uikit

我有一个用于匹配纸牌游戏的 UILabel，上面写着“好匹配！” 例如，如果您有匹配项，并且我想在通知用户消息后使其消失。

用什么方法做到这一点？我可以让它消失..？谢谢。

这是我的 updateUI 方法：

```
 -(void) updateUI {

    for (UIButton *cardButton in self.cardButtons) {
        Card *card = [self.game cardAtIndex:[self.cardButtons indexOfObject:cardButton]];
        [cardButton setTitle:card.contents forState:UIControlStateSelected];
        [cardButton setTitle:card.contents forState:UIControlStateSelected|UIControlStateDisabled];
        cardButton.selected = card.isFaceUp;
        cardButton.enabled = !card.unplayble;
        if (card.unplayble) {
            cardButton.alpha = 0.1;
        }
        self.scoreCounter.text = [NSString stringWithFormat:@"Score: %d", self.game.score];

        if (self.game.notification) {
            [UIView animateWithDuration:2 animations:^{
                self.notificationLabel.text = [NSString stringWithFormat:@"%@", self.game.notification];
                self.notificationLabel.alpha = 0;
            }];
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T22:50:27.837

这将在两秒钟内淡出标签。更改为`animateWithDuration:`您想要的任意时间

```
if (self.game.notification == nil) {
[UIView animateWithDuration:2 animations:^{
self.notificationLabel.alpha = 0;
}];
} 
```

如果你想更改文本，试试这个（我现在不能测试它，所以它可能不起作用）

```
[UIView animateWithDuration:2 animations:^{
self.notificationLabel.text = @"text you want to change it to";
}]; 
```

然后，当你想再次使用标签时，你必须将`self.notificationLabel.alpha`back 设置为 1。所以尝试

```
if (self.game.notification) {
self.notificationLabel.alpha = 1;
[UIView animateWithDuration:2 animations:^{
self.notificationLabel.text = [NSString stringWithFormat:@"%@", self.game.notification];
self.notificationLabel.alpha = 0;
}];
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-11T22:50:33.887

我不认为这是可能的。您很可能需要在 Interface Builder 中将 UILabel 替换为 NSView 并使用其中包含的绘图函数来绘制具有透明度的文本。

# javascript - 错误：在 JS 中不允许使用的元素

> ID：15350077
> 
> 赞同：0
> 
> 时间：2013-03-11T22:43:29.720
> 
> 标签：javascript, jquery, html, validation, xhtml

只是一个快速验证问题，我得到：

**文档类型不允许此处的元素“div”**

我的代码：

```
 $('#wrapper').prepend('<div id="slider"></div>'); 
```

这只是一个JS的东西，我该如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:58:07.443

我想不出任何时候你会在一段 JavaScript 的中间遇到这个错误，除非你使用的是 XHTML，在这种情况下，简短的回答是：**停止使用 XHTML，开始使用 HTML 4 或 5。**

[XHTML 1.0 规范](http://www.w3.org/TR/xhtml1/#h-4.8)中描述了您收到错误的原因：

> 在 XHTML 中，脚本和样式元素被声明为具有`#PCDATA`内容。结果，`<`将`&`被视为标记的开始

最新版本的[XHTML 媒体类型说明](http://www.w3.org/TR/xhtml-media-types/#C_4)提供了解决方法：

> 如果您的脚本使用`<`or`&`或`]]>`or ，请使用外部脚本`--`。如果文档包含任何这些字符，请勿在文档中嵌入脚本。

和

> 如果必须嵌入内容，可以使用以下模式：
> 
> ```
> <style>/*<![CDATA[*/
> ...
> /*]]>*/</style> 
> ```

这都是相当大的努力，只是切换到 HTML 是一个更简单的选择。浏览器是为 HTML 设计的，它们的 XHTML 支持是事后才提供的。如果您从 XHTML 中获得任何好处，那将是在您的发布过程中将它与服务器端工具一起使用……而且这样做的人并不多。

# performance - 如何在我自己的 Jitter 中实现 -time-passes 的行为？

> ID：15350078
> 
> 赞同：0
> 
> 时间：2013-03-11T22:43:35.923
> 
> 标签：performance, llvm, jit

我正在研究基于 LLVM 的 Jitter。我对性能有一个真正的问题。我正在阅读很多关于此的内容，我知道这是 LLVM 中的一个问题。但是，我想知道是否还有其他瓶颈。因此，我想在我的 Jitter 中使用 -time-passes 提供的相同机制，但将结果保存到特定文件。这样，我可以做一些简单的数学运算，例如：

real_execution_time = total_time - time_passes

我将选项添加到命令行，但它不起作用：

```
// Disable branch fold for accurate line numbers.
llvm_argv[arrayIndex++] = "-disable-branch-fold";
llvm_argv[arrayIndex++] = "-stats";
llvm_argv[arrayIndex++] = "-time-passes";
llvm_argv[arrayIndex++] = "-info-output-file"; 
llvm_argv[arrayIndex++] = "pepe.txt";

cl::ParseCommandLineOptions(arrayIndex, const_cast<char**>(llvm_argv)); 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:38:06.843

好的，我找到了解决方案。我正在发布解决方案，因为它可能对其他人有用。

在程序中的任何退出（代码）之前，您必须调用

llvm::llvm_shutdown();

此调用将信息刷新到文件中。

我的问题是：

1 - 其他线程在没有提到的调用的情况下退出。

2 - 有一个花哨的 struct llvm::llvm_shutdown_obj 带有一个调用上述方法的析构函数。我在主函数中声明了一个变量，如下所示：

```
llvm::llvm_shutdown_obj X(); 
```

每个人都知道编译器应该调用析构函数，但在这种情况下它没有发生。原因是该变量未被使用，因此编译器将其删除。没有变量 => 没有析构函数 => 没有刷新到文件

# javascript - 为什么我的视图中没有显示对服务 ($http) 中的变量的更新？

> ID：15350085
> 
> 赞同：0
> 
> 时间：2013-03-11T22:43:57.827
> 
> 标签：javascript, ajax, angularjs, angularjs-service

几个小时以来，我一直在解决这个问题，因此非常感谢任何帮助。

我有一个控制器，我在其中定义了一个变量（一个空数组）：

```
function MainCtrl(scope, graph) {
    scope.myVar = [];   
    graph.send("a", "b");
}
MainCtrl.$inject = ['$scope',  'plotData']; 
```

`plotData`是我写的定制服务。它用于`$http`查询数据库，并检索我需要的数据。

```
angular.module('myApp.services', []).
factory('plotData', ['$http', function(async) {

    var mainScope = angular.element("#main").scope();

    return {
        send: function(plotType, plotDetail) {
            var thisObj = this;

            var ajaxConfiguration = {
                method: 'POST',
                url: '******************',
                data: { 
                    type: plotType,
                    detail: plotDetail
                }
            };

            async(ajaxConfiguration).
                success(function(data, status, headers, config) {                   
                    mainScope.myVar = data.plot;
                    /* 
                        data.plot is what i expected! 
                        I also try with: return data.plot;
                    */

                }).
                error(function(data, status, headers, config) { 
                    console.info("error"); 
                });
        },
        doSomething: function(data) { },
        doSomethingElse: function() { }
    };

}]); 
```

问题是在控制器`scope.myVar`中没有改变。基本上我想做的是**从指令更新控制器中定义的变量**。

我做错了什么？

**更新：**

**@dogoku**：据我所知，我不需要使用 $apply ，因为我使用的是仍在 Angular 中的 $http 。

**@马克拉杰科克**：

0) 不，我使用的是真正的 $http 服务：

```
factory('plotData', ['$http', function(async) { 
    /* service */ 
}]); 
```

1）是的，我在代码注释中写道。data.plot 是我所期望的。后端代码效果很好，所以我没有发布它。

2）我会试试你的链接，让你知道。

同时，仍然欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:59:04.400

正如评论中提到的，通过选择器获取范围然后调用 scope() 不是很 Angular。更好的方法是从服务中返回一个承诺。皮特在这里有一个很好的例子来说明如何做到这一点：[https ://stackoverflow.com/a/12513509/215945](https://stackoverflow.com/a/12513509/215945)

~~`angular.copy()`应该在 success() 回调中使用而不是赋值，以便数据绑定不会在控制器中丢失。~~

~~另请参阅[https://stackoverflow.com/a/15345762/215945](https://stackoverflow.com/a/15345762/215945)~~

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:52:11.590

唯一似乎可疑的是您如何获得主要范围，因为当我尝试调用时

```
angular.element('#something'); 
```

使用 AngularJS 1.0.5 或 1.1.3 我收到以下错误：

> 选择器未实现

当您打开开发人员工具时，您可以[在此处](http://jsfiddle.net/eFFQm/)看到。这也可以解释为什么您的范围的属性没有更新。

# java - 传递变量与访问类字段

> ID：15350091
> 
> 赞同：3
> 
> 时间：2013-03-11T22:44:40.107
> 
> 标签：java, oop

我有一个关于程序风格的问题。在类中，将变量传递给方法还是访问方法内的字段更好？

```
public class NumberTest{
   private int num;

   public NumberTest (int num){
      this.num = num;      
      calculateX(num);
      calculateY();
   }

   private void calculateX(int num){
      System.out.println (num);
   }

   private void calculateY(){
      System.out.println(num)
   }           
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:49:55.433

`this`无论如何，当您调用成员函数时，您已经在传递对象（as ）。您也不必从显式指定参数中获得任何好处，除非您需要能够使用具有除`this.num`.

短版：使用后者，除非您需要`calculateX(some_whole_other_number)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T22:50:08.833

这些方法可能看起来有点像你，因为它们给你相同的结果，但它们实际上彼此非常不同。

例如，假设您的`NumberText`方法看起来像

```
public NumberTest (int num){
   this.num = num;

   calculateX(num * 2);
   calculateY();
} 
```

`calculateX`实际上不会占用该领域，但它可以采取完全不同的方式。

一般的经验法则是

`num`如果传递除to以外的其他内容有意义，则`calculateX`您可能应该传递它。否则，不要

另外，如果你这样做

```
private void calculateX(int num){
   System.out.println (num);
} 
```

将参数名称更改为`num`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T23:00:31.630

我会和这里的其他人不同......

在所有*合理*的地方，我喜欢传递论点。这非常轻微地将方法与类实现分离，并使单元测试更容易。例如，有时`this.num`由于其他限制，设置为 94404 是一个非常复杂的过程。

例如，这是一个邮政编码，但您的业务逻辑要求它必须与州和国家/地区字段匹配。或者，在实践中，该字段是从数据库、网站等中读取的……

如果您传递参数，您的单元测试可以快捷方式并只传递值。而且，万一您将来可能遇到不想使用类字段中的内容的特殊情况，您可以这样做。

现在，如果您使用 27 个类字段，您显然不想传入 27 个参数。但是，IMO，如果是 1 或 2，我喜欢将它们传递进去。

接受后添加的小注释：

传入 arg 和使用字段之间还有另一个可能的区别。在多线程环境中，使用传入的参数*可能*比从字段中读取更安全。该字段可能会在函数中间发生更改，而传入的参数（取决于类型和用法）不太可能更改。在此示例中，传入的`int num`值永远不会意外更改，但`this.num`可能会更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T22:53:21.923

num 是 NumberTest 的某种状态吗？以后需要吗？如果是这样，请将其设为字段。

NumberTest 是否只为许多数字提供函数 calculateX？如果是这样，请将 calculateX 设为静态。

# html - 使用不同的定位时，height:auto 属性会变得混乱

> ID：15350092
> 
> 赞同：1
> 
> 时间：2013-03-11T22:45:02.720
> 
> 标签：html, css

我正在尝试为网站制作一个模块。该模块将包括标题、文本和图像。我希望网站管理员能够在页面中插入任意数量的这些模块，理想情况下，他应该能够在模块中输入任意数量的内容，并让它自动调整到适当的高度。

**这是问题所在：**

我似乎无法将名为“myModlue”（包含标题、图像和文本的红色框）的整个模块的高度设置为自动高度，并且在没有两个 div 的情况下将“moduleBody”设置为自动高度矛盾的。为了让“mymodule”识别里面的内容以便自动调整高度，我需要将定位设置为绝对。此时“mymodule”包含应有的所有内容，但“moduleBody”不是....moduleBody 已折叠并且不会承认里面的元素，除非我也将它的位置设置为绝对。当我这样做时，“moduleBody”确实调整了高度，但现在“myModule”不再在高度中包含“moduleBody”，它只看到“moduleHeader”（未设置为位置：绝对；

仅供参考：样式都直接嵌入到 html 中，我的完整版本绝对不会是这样的，我这样做只是因为我想在测试时快速查看事情的外观。奇怪的颜色也用于测试目的。

感谢任何提供帮助的人，林赛 :)

* * *

## 我的模块.html

```
<div id= "myModule"style="height:auto; width: 1000px;  position:absolute; background-color:red;" >

        <div id= "moduleHeader" style = "width:100%; height:auto; background-color:yellow; ">
            <p style="text-align:left; font-family:Arial; font-size:22px; font-size:30px; color:#191970; margin-left:20px;">Who We Are 
            <span><b style="color:#999; font-size:20px;">Learn more about Trinity</b></span></p>
        </div>

        <div id= "moduleBody" style="background-color:#0E1031; width:800px; height:auto; margin-left:auto; margin-right:auto; padding:40px;border:thick solid #1B1851;  border-radius: 15px; position:absolute;">
            <p style=" text-align:justify; height:150px; width:500px;   font-family:Arial; font-size:14px; line-height:150%; float:left; color:white; ">
            The United Church of Christ acknowledges as its sole head, Jesus Christ, Son of God and Savior. 
            It acknowledges as kindred in Christ all who share in this confession. It looks to the Word of 
            God in the Scriptures, and to the presence and power of the Holy Spirit, to prosper its creative 
            and redemptive work in the world. It claims as its own the faith of the historic Church expressed 
            in the ancient creeds and reclaimed in the basic insights of the Protestant Reformers. It affirms 
            the responsibility of the Church in each generation to make this faith its own in reality of worship, 
            in honesty of thought and expression, and in purity of heart before God. In accordance with the teaching 
            of our Lord and the practice prevailing among evangelical Christians, it recognizes two sacraments: 
            Baptism and the Lords Supper or Holy Communion.
            </p>        
            <div id="mod_Image" style="height:250px; width:200px;margin-left:40px; float:left; border:thick solid white;"><img src="churchImg.jpg" style="height:100%; width:100%; "/></div>
        </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T22:59:44.550

您需要设置`overflow: auto;`给您带来麻烦的两个 div。这是包含浮动元素的元素的一个问题 - 它们会自行折叠，因为它们的内容已从正常的内容流中删除（即，它们无法告诉它们应该有多高）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:20:05.437

您看到的行为是由于元素被浮动造成的，这意味着它们已从正常流程中删除，并且在计算包含元素的高度时**不会**被浏览器使用。那里有很多关于 CSS 的博客文章`float`，所以我只链接一个作为[背景阅读](http://coding.smashingmagazine.com/2007/05/01/css-float-theory-things-you-should-know/)。

有很多方法可以解决这个问题，例如在 quirksmode 博客 - [Clearing floats](http://www.quirksmode.org/css/clearing.html)上。最著名的是“清除修复”，可以在[此处](http://nicolasgallagher.com/micro-clearfix-hack/)和下方找到其示例：

```
/**
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    contenteditable attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that are clearfixed.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */
.cf:before,
.cf:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.cf:after {
    clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.cf {
    *zoom: 1;
} 
```

因此，如[**本演示**](http://jsfiddle.net/4zRwA/)或以下所示，应用于您的（清理后的）*HTML* @[](http://jsfiddle.net/4zRwA/)

 **```
<div id= "myModule">
    <div id="moduleHeader">
        <p>Who We Are <span><b style="color:#999; font-size:20px;">Learn more about Trinity</b></span></p>
    </div>
    <div id= "moduleBody" class="cf">
        <p>The United Church of Christ acknowledges as its sole head, Jesus Christ, Son of God and Savior. It acknowledges as kindred in Christ all who share in this confession. It looks to the Word of God in the Scriptures, and to the presence and power of the Holy Spirit, to prosper its creative and redemptive work in the world. It claims as its own the faith of the historic Church expressed in the ancient creeds and reclaimed in the basic insights of the Protestant Reformers. It affirms the responsibility of the Church in each generation to make this faith its own in reality of worship, in honesty of thought and expression, and in purity of heart before God. In accordance with the teaching of our Lord and the practice prevailing among evangelical Christians, it recognizes two sacraments: Baptism and the Lords Supper or Holy Communion.</p>
        <div id="mod_Image"><img src="churchImg.jpg"/></div>
    </div>
 </div> 
```

*CSS*

```
#myModule {
    width:1000px;
    background-color:red;
}

#moduleHeader {
    background-color:yellow;
}

#moduleHeader p {
    text-align:left;
    font-family:Arial;
    font-size:22px;
    font-size:30px;
    color:#191970;
    margin-left:20px;
}

#moduleBody {
    background-color:#0E1031;
    width:800px;
    padding:40px;border:thick solid #1B1851; 
    border-radius: 15px;
}

#moduleBody p {
    text-align:justify;
    height:150px;
    width:500px;
    font-family:Arial;
    font-size:14px;
    line-height:150%;
    float:left;
    color:white; 
}

#mod_Image {
    height:250px;
    width:200px;
    margin-left:40px;
    float:left;
    border:thick solid white;
}

.cf:before,
.cf:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.cf:after {
    clear: both;
} 
```

请注意，您不需要指定任何`height:auto`, `position:absolute`，`width:100%`因为这些是您应用它们的元素的默认值。

另一种方法是删除“clear fix”类`float:left`并使用`display:inline-block`and`vertical-align:top;`代替，就像在[**这个替代演示**](http://jsfiddle.net/4zRwA/2/)中一样。**

# python - Python 类层次结构和设计问题

> ID：15350094
> 
> 赞同：-1
> 
> 时间：2013-03-11T22:45:10.370
> 
> 标签：python, oop, class

我有一些 python 应用程序是聊天服务器。它有多个房间，一个客户端可以连接到一个房间。所以我有班级房间和班级客户。客户端具有 on_open()、on_message() 和 on_close() 等事件以及 send() 函数。收到消息后，我需要将其发送给房间里的其他客户并将其发布到我的消息队列中。这是我的问题。不知道在哪个班做什么。
应该在 Room 类还是在 Client 类中发布到队列？
我应该在哪里向其他客户端广播消息，在 Client 类还是在 Room 类？
或者，也许我应该将所有事件从 Client 类上层传递到 Room 类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:15:42.400

也许你应该让队列管理它自己的关注点，让它监听它需要记录的事件，而不是让它从属于其他任何一个类。

您可能想阅读观察者模式（[http://code.activestate.com/recipes/131499-observer-pattern/](http://code.activestate.com/recipes/131499-observer-pattern/) 和[http://philipuren.com/serendipity/index.php?/archives/4-guid .html](http://philipuren.com/serendipity/index.php?/archives/4-guid.html)）。它专为许多不同类可能想要响应某些状态更改（在您的示例中为传入消息）的情况而设计。在这种情况下，您的 Client 类将是“主题” - 它会保留一个类列表，当类似 on_open() 发生时，它会关心并让他们知道发生了某些事情；观察者（在这种情况下，我建议使用队列）自行决定如何处理这些信息。这增强了未来的灵活性，因为如果您想要添加新功能（例如创建桌面通知或在消息进来时播放声音），则无需更改现有类。

此示例使用装饰器实现 Observer，让您了解使用此策略可以赢得多少未来的灵活性：[http ://reader1000.tumblr.com/post/20361533339/observer-pattern-with-python-decorators](http://reader1000.tumblr.com/post/20361533339/observer-pattern-with-python-decorators)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:48:04.687

恕我直言，队列应该在房间里，因为每个客户端都不负责队列，但是为了让客户端看到消息，他们应该能够看到队列。

# c# - 与 DataTable.Select() 结合的复合格式字符串

> ID：15350097
> 
> 赞同：0
> 
> 时间：2013-03-11T22:45:22.413
> 
> 标签：c#, asp.net

我有一个包含三个元素的数组

```
string[] cat = new string[3] { "XBox360", "PS3", "Wii" }; 
```

然后我基本上比较了数组 agiant a`DataTable`并在某些条件下进行了一些操作。（我没有写）执行匹配的代码是这样的：

```
drResults = dtResults.Select(String.Format("Cat = '{0}' AND Cat_Entries = '{1}'", category, cat[i])); 
```

类别 (Cat) 变量包含类别编号和 Cat_Entries 猫数组的元素。因此，如果 drResult.Lenght > 0，我在代码中执行操作。

我不明白的是 Format() 中的代码是做什么的？我正在查看[Microsoft 的定义](http://msdn.microsoft.com/en-us/library/txafckwd%28v=vs.100%29.aspx)，但让我失望的是“AND”。大括号 {} 之间的数字是否也像顺序索引指示符一样告诉运行时类别元素替换零，并且 cat[i] 替换一？

所有这些当然都在循环和其他代码中，但我认为它并没有真正增加问题，所以我把它省略了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:56:10.627

Select 方法接受一段 SQL 并返回匹配的行。在这种情况下，您正在寻找一行`Cat field = '<category>' AND the Cat_Entries field = '<cat[i]>'`

Format 函数是比创建字符串更好的方法

`"Cat = '" + category + "' AND Cat_Entries = '" + cat[i] + '"`因为后者更难阅读，并且由于必须创建几个临时字符串而可能更慢。

{0} 和 {1} 只是代表您提供的变量的占位符，即。 **类别**和**cat[i]**。您可以根据需要以任何顺序重复使用每一个，例如，拥有它是有效的（尽管很愚蠢）

```
String.Format("Cat_Entries = '{1}' AND Cat = '{0}' AND Cat = '{0}'", category, cat[i]) 
```

# class - 需要帮助在 mfc 对话框类中获取变量

> ID：15350098
> 
> 赞同：0
> 
> 时间：2013-03-11T22:45:27.233
> 
> 标签：class, visual-c++, object, mfc

拜托，我花了一整天的时间试图解决这个问题，但不能。我有一个从带有一些编辑框的对话框创建的类 (artist1)。我想获取在编辑框中输入的数据并将它们保存到我在课堂上公开的变量中。但不知道为什么它不起作用。PS是mfc编程的新手。谢谢这里是我的艺术家班

```
void artist1::OnBnClickedButton1()
{
    //artist1 AA=*art1; 

    CEdit* pEdit1 = (CEdit*)GetDlgItem(IDC_EDIT1); 
    pEdit1->GetWindowText(Name1);
    nn=new CString;
    *nn=Name1;
    CEdit* pEdit2 = (CEdit*)GetDlgItem(IDC_EDIT2); 
    pEdit2->GetWindowText(Age1);
    n2=new CString;
    *n2=Age1;
    CEdit* pEdit3 = (CEdit*)GetDlgItem(IDC_EDIT3); 
    pEdit3->GetWindowText(Nationality1);
    n3=new CString;
    *n3=Nationality1;
    CEdit* pEdit4 = (CEdit*)GetDlgItem(IDC_EDIT4); 
    pEdit4->GetWindowText(Group1);
    n4=new CString;
    *n4=Group1;
    CEdit* pEdit5 = (CEdit*)GetDlgItem(IDC_EDIT5); 
    pEdit5->GetWindowText(num_of_albums1);
    n5=new CString;
    *n5=num_of_albums1;
    SH(Name1,Age1,Nationality1,Group1,num_of_albums1);
    art1=this;
//  memcpy(art1,this,sizeof(this));

    //Name_box.SetWindowText(g);
    //AfxMessageBox( Age );
    //AfxMessageBox( Nationality );
    // TODO: Add your control notification handler code here

}

/*bool artist1::SH()
{
    if(NoShow==false)return true;
    else return false;
}*/
void artist1::OnBnClickedButton2()
{
    //Cooplab1View vm;
    NoShow=false;
    nvalidateRect(NULL,NULL);
    EndDialog(IDD_FORMVIEW);

    // TODO: Add your control notification handler code here
} 
```

这是班级艺术家的标题

```
class artist1 : public CDialogEx
{
    //DECLARE_DYNAMIC(artist1)

public:
    artist1(CWnd* pParent = NULL);   // standard constructor
    virtual ~artist1();
    bool NoShow;
    bool *address;

    CString Albums[5];

    void OnInsertArtist(artist1 &at);
// Dialog Data
    enum { IDD = IDD_FORMVIEW };
private:
    CString Nm;
    CString Ag;
    CString Nation;
    CString group;
    CString No_of_A;
    CString *nnn;

public:
    // artist1* GetTreeObj();
    //virtual CString ShowDetails(CDC* pDC);
    void SH(CString a,CString b,CString c,CString d,CString e)
{
    Name=a;
    Age=b;
    Nationality=c;
    Group=d;
    num_of_albums=e;
}

protected:
    CString Name,Age,Nationality,Group,num_of_albums;
    virtual void DoDataExchange(CDataExchange* pDX);    // DDX/DDV support
    CString Name1,Age1,Nationality1,Group1,num_of_albums1;
    DECLARE_MESSAGE_MAP()
public:
    afx_msg void OnBnClickedButton1();
    virtual CString ShowDetails(CDC* pDC,artist1 & at1);

    afx_msg void OnBnClickedButton2();
}; 
```

我从 CView 类 cpp 文件中调用该类

```
void Cooplab1View::OnDraw(CDC* pDC)
{
    artist1 art;
    artist1 A1;
    Cooplab1Doc* pDoc = GetDocument();
    //ASSERT_VALID(pDoc);
    //if (!pDoc)
    //  return;

    if (noShow)
    {
        art.OnInsertArtist(art);
        //art.OnBnClickedButton1();
        //art=&obj;
    //  art.GetTreeObj();
        art.ShowDetails(pDC,art);
    }

    ASSERT_VALID(pDoc);
    if (!pDoc)
        return;
    // TODO: add draw code for native data here
}

void Cooplab1View::OnInsertArtist1()
{
    noShow=true;
    InvalidateRect(NULL,NULL);
    //UpdateWindow();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:44:14.680

如果要向编辑控件输入值，则应调用 updatedata( FALSE )。如果要将值存储到变量中，请调用 updatedata(TRUE)。而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T03:23:36.087

你的类很乱，但如果你只是想从对话框项中提取用户输入文本，它实际上很简单。

```
void artist1::OnBnClickedButton1()
{
    // Since variables Name,Age,Nationality,Group,num_of_albums are all CString items
    // declare as member variables in the class, 
    // you can just retrieve user entry from the dialog directly into them
    // without calling the "SH(Name1,Age1,Nationality1,Group1,num_of_albums1);"
    GetDlgItemText(IDC_EDIT1, Name);
    GetDlgItemText(IDC_EDIT2, Age);
    GetDlgItemText(IDC_EDIT3, Nationality);
    GetDlgItemText(IDC_EDIT4, Group);
    GetDlgItemText(IDC_EDIT5, num_of_albums);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T22:50:22.687

1.  您应该创建与“编辑框”匹配的变量（右键单击->在 vs2010 中添加变量）并检查它们的值。
    不要执行“GetDlgItem”而不是 GetWindowText。
2.  您应该`UpdateData(TRUE)`在第一行添加`OnBnClickedButton1`
3.  祝你好运 ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T20:11:41.127

我终于解决了这个问题。我声明了一些全局变量，使用 GetDlgItemText 在 OnBnClickedButton1() 中将编辑框中输入的值分配给它们，然后在 OnBnClickedButton2() 中，我将全局变量分配给我的类中的变量，即名称、年龄等。

# knockout.js - ko.mapping.fromJS(rawJSON) 导致一个未定义的对象

> ID：15350100
> 
> 赞同：0
> 
> 时间：2013-03-11T22:45:31.940
> 
> 标签：knockout.js

在 ko.mapping.fromJS 行之后找出为什么会导致未定义的 viewModel 的最佳方法是什么？

rawJSON 在 chrome js 对象资源管理器中看起来不错

```
 var viewModel = ko.mapping.fromJS(rawJSON);
        viewModel = decorateViewModel(viewModel);
        ko.applyBindings(viewModel); 
```

在铬中查看：

```
rawJSON: Object
   Companies: Array[1]
   CompaniesFollowing: Array[0]
   DisplayName: null
   DateCreated: "2013-03-11T21:50:21.9"
   __proto__: Object
viewModel: undefined

  function decorateViewModel(viewModel){
            viewModel.CompaniesFollowing().forEach(function(self) {
                self.isFollowing = ko.observable(true);
                self.toggleIsFollowing = function () {
                    if(self.isFollowing()){
                        unFollowCompany()}
                    else{
                        followCompany();
                    }
                    self.isFollowing(!self.isFollowing());//reverse it so the user can see the button text change
                };
                self.followButtonText = ko.computed(function () {
                    return self.isFollowing() ? "Unfollow" : "Follow";
                });
                self.styleClass = ko.computed(function () {
                    return self.isFollowing() ? "radius button" : "radius secondary button";
                });
            }); 
```

原始JSON：

```
 var rawJSON = { "Companies" : [ { "DateCreated" : "2013-03-11T21:53:31.123",
     "Description" : "eee",
     "EquityOffered" : 3.0,
     "FollowingUsers" : null,
     "Id" : 1,
     "InvestmentFound" : 0.0,
     "InvestmentSought" : 3333.0,
     "LogoFileName" : "4ED564E6-CDBB-4045-8E55-9581B7FA13E0.jpg",
     "Name" : "Model Adapt",
     "SocialDetails" : null
   } ],
  "CompaniesFollowing" : [  ],
  "DateCreated" : "2013-03-11T21:50:21.9",
  "DateUpdated" : "2013-03-11T21:50:21.9",
  "DisplayName" : null,
  "FullName" : null,
  "HomeAddress" : null,
  "Id" : 1,
  "Investor" : { "AvailableFunds" : 0.0,
      "DateCreated" : "2013-03-11T22:30:07.273",
      "DateUpdated" : "2013-03-11T22:30:07.273",
      "Description" : "kbibkb",
      "FollowingUsers" : [  ],
      "Id" : 1,
      "Interests" : "bukb",
      "LogoFileName" : null,
      "Name" : "giu",
      "Skills" : "kbku",
      "SocialDetails" : null
    },
  "InvestorsFollowing" : [ { "AvailableFunds" : 0.0,
        "DateCreated" : "2013-03-11T22:30:07.273",
        "DateUpdated" : "2013-03-11T22:30:07.273",
        "Description" : "kbibkb",
        "FollowingUsers" : [  ],
        "Id" : 1,
        "Interests" : "bukb",
        "LogoFileName" : null,
        "Name" : "giu",
        "Skills" : "kbku",
        "SocialDetails" : null
      } ],
  "LogoFileName" : null,
  "MiniAbout" : null,
  "UserName" : "Master_"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:18:31.357

是否肯定`var viewModel = ko.mapping.fromJS(rawJSON);`会导致 viewmodel 为空，或者是`viewModel = decorateViewModel(viewModel);`因为我会出现您的 decorateViewModel 方法没有返回视图模型，这将导致它在该行被处理后为空。

# php - 尝试搜索 ID 并显示所选信息

> ID：15350105
> 
> 赞同：0
> 
> 时间：2013-03-11T22:46:00.747
> 
> 标签：php, sql, database, edit

我已经制作了一个搜索框，以便您可以输入您希望获得其信息的产品 ID。当我在产品 ID 框中输入数据时，没有返回结果，有人知道我做错了什么吗？我认为 'while ($row = mysql_fetch_array($result)) {' 是错误的，但不太确定，因为我尝试过的一切都不起作用。

```
 <div class="searchbox">
    <form action="Search.php" method="get">
       <fieldset>
       <input name="search" id="search" placeholder="Search for a Product" type="text" />
         <input id="submit" type="button" />
      </fieldset>
    </form>
 </div>
 <div id="content">
 <ul>        
 <?php

 // connect to the database
    include('base.php');

 $search = mysql_real_escape_string($_GET['search']);
 $query = "SELECT * FROM Product WHERE ProductID LIKE '%{$search}%'";
 $result = mysql_query($query); 
 while ($row = mysql_fetch_array($result)) {
 echo "<li><span class='name'><b>{$row['ProductID']}</b></span></li>";
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:36:52.490

您可以使用：

```
$result = mysql_query($query) or die($query."<br/><br/>".mysql_error()); 
```

确认数据正在返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:48:42.803

不要使用 mysql 特定的语法，它已经过时了，以后会给你带来真正的麻烦，特别是如果你决定使用 sqlite 或 postgresql。

使用 PDO 连接，您可以像这样初始化一个：

```
// Usage:   $db = connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword);
// Pre:     $dbHost is the database hostname, 
//          $dbName is the name of the database itself,
//          $dbUsername is the username to access the database,
//          $dbPassword is the password for the user of the database.
// Post:    $db is an PDO connection to the database, based on the input parameters.
function connectToDatabase($dbHost, $dbName, $dbUsername, $dbPassword)
{
    try
    {
         return new PDO("mysql:host=$dbHost;dbname=$dbName;charset=UTF-8", $dbUsername, $dbPassword);
    }
    catch(PDOException $PDOexception)
    {
        exit("<p>An error ocurred: Can't connect to database. </p><p>More preciesly: ". $PDOexception->getMessage(). "</p>");
    }
} 
```

然后初始化变量：

```
$host = 'localhost';
$user = 'root';
$dataBaseName = 'databaseName';
$pass = ''; 
```

现在您可以通过以下方式访问您的数据库

```
$db = connectToDatabase($host , $databaseName, $user, $pass); // You can make it be a global variable if you want to access it from somewhere else. 
```

然后你应该确保你实际上有这个变量：

```
$search = isset($_GET['search']) ? $_GET['search'] : false; 
```

因此，如果某些事情以某种方式失败，您实际上可以跳过数据库。

```
if(!$search)
{
    //.. return some warning error.
}
else
{
    // Do what follows.
} 
```

现在您应该构造一个可以用作准备好的查询的查询，也就是说，它接受准备好的语句，以便您准备查询，然后执行一个变量数组，这些变量将被放入查询中，并且将避免 sql同时注入：

```
$query = "SELECT * FROM Product WHERE ProductID LIKE :search;"; // Construct the query, making it accept a prepared variable search.
$statement = $db->prepare($query); // Prepare the query.
$statement->execute(array(':search' => $search)); // Here you insert the variable, by executing it 'into' the prepared query.
$statement->setFetchMode(PDO::FETCH_ASSOC); // Set the fetch mode.

while ($row = $statement->fetch())
{
    $productId = $row['ProductID'];
    echo "<li class='name><strong>$productId</strong></li>";
} 
```

哦，是的，不要使用 b 标签，它已经过时了。改用 strong （在单独的 css 文件中将 font-weight: bold; 应用于 .name 会更聪明。

如果有任何不清楚的地方，请随时提出问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T22:49:08.117

移除 $search 前后的 {}。

应该：

```
$query = "SELECT * FROM Product WHERE ProductID LIKE '%$search%'"; 
```

# ios - 如何为 iPad 创建来自屏幕底部的弹出框

> ID：15350109
> 
> 赞同：1
> 
> 时间：2013-03-11T22:46:38.107
> 
> 标签：ios, xcode, ipad, popover

我正在寻找一种方法来实现![这种popover](../Images/6e133f694b00df4f4d0262d6b209e00e.png)这种弹出框。

是否有基本的 iOS 命令来生成这种样式，而不是我们在 XCode 中看到的通常的 Arrow + Border 弹出框？或者是否有 API 可以做这种事情。

弹出框从屏幕底部出现，就像有时在 App Store 动画中一样。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T23:59:26.637

你想要做的是创建一个自定义`UIVIewController`的模态演示样式设置为`UIModalPresentationFormSheet`：

```
YourCustomViewController *customVC = [[YourCustomViewController alloc] initWithNib:@"YourCustomViewController" bundle:nil];

customVC.modalPresentationStyle = UIModalPresentationFormSheet;

[self self presentViewController:customVC animated:YES completion:nil]; 
```

您还必须创建一个工具栏并使用“关闭”或“完成”按钮正确格式化它，该按钮将关闭视图控制器

# itunes - 在 iTunes 中查询用户的“正在播放”？

> ID：15350111
> 
> 赞同：0
> 
> 时间：2013-03-11T22:46:47.483
> 
> 标签：itunes, jscript

我正在尝试创建一个类似于 last.fm scrobbler 的应用程序。但专门针对某位艺术家。我希望能够调用用户当前正在播放的专辑，并根据专辑的前 10 个数字（应该是日期，即“1999-05-10”）排队网站或特定信息关于那个日期。如果有人甚至可以开始帮助我，将不胜感激。我注册了 Apple 的 SDK，但还没有得到真正明确的答案。

我知道这一切都始于这样的事情：

```
var iTunesApp = WScript.CreateObject("iTunes.Application");
iTunes.App.CurrentTrack (   [out, retval] IITTrack **   iTrack   ) 
```

但不要觉得我到任何地方。再次任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:57:26.697

要获取包含当前曲目的专辑，请使用对象的`CurrentTrack.Album`属性`iTunes.Application`：

```
var iTunes = WScript.CreateObject("iTunes.Application")
var album = iTunes.CurrentTrack.Album;

var date = album.substr(0, 10);
... 
```

提示：了解 iTunes COM 对象的可用属性和方法的一个好方法是使用一些[ActiveX/COM/OLE 对象浏览器](https://stackoverflow.com/q/262134/113116)，例如 Visual Studio 的对象浏览器，来探索 iTunes 类型库（包含在*iTunes.exe*文件中） .

# sql - 在 regexp_replace 中将大数转换为 Julian 格式

> ID：15350112
> 
> 赞同：0
> 
> 时间：2013-03-11T22:46:52.177
> 
> 标签：sql, database, oracle, plsql

我只需要替换数字并保留剩余部分。例子：

34HUNTAVE ==> 34THUNTAVE

1232432GRACE ST ==> 1232432NDGRACE ST

1232433GRACE ST ==> 1232433RDGRACE ST

问题是 Julian 格式在大数字上给出错误。我怎样才能使它工作。

```
 Does Not Work
    ------------
        SELECT REGEXP_REPLACE ('10425222GRACEST','[[:digit:]]+', 
         TO_CHAR (TO_DATE (REGEXP_REPLACE ('10425222GRACEST','[^[:digit:]]'),'J'),'fmJTH')) FROM dual;

     Works Fine
    ----------
         SELECT REGEXP_REPLACE ('10425BCST','[[:digit:]]+', 
         TO_CHAR (TO_DATE (REGEXP_REPLACE ('10425BCST','[^[:digit:]]'),'J'),'fmJTH')) FROM dual; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:05:05.317

```
select 
  string,
  regexp_substr(string, '^\D*\d+') ||
  regexp_substr(to_char(to_date(
    regexp_replace(string, '^\D*\d*?(\d{1,3})(\D|$).*$', '100\1'), 
    'J'), 'fmjth'), '\D*$') ||
  regexp_replace(string, '^\D*\d+(.*)$', '\1') as new_string
FROM your_table 
```

[小提琴](http://www.sqlfiddle.com/#!4/6870b/2)

# google-apps-script - 使用客户端处理程序进行表单验证：为什么输入序列顺序会改变结果？

> ID：15350114
> 
> 赞同：0
> 
> 时间：2013-03-11T22:47:04.117
> 
> 标签：google-apps-script

我最近（在[这篇文章](https://stackoverflow.com/questions/15302510/google-apps-script-form-validation-on-fields-and-fileupload/15303129#15303129)中）建议了一个脚本，该脚本在允许提交之前检查表单的不同字段是否有答案，我使用带有验证器的客户端处理程序来完成它。

在使用该脚本时，我注意到在某些情况下，即使未满足所有验证条件，也会启用提交按钮。这取决于填写不同字段的顺序。

需要明确的是：如果您一个接一个地填写每个字段，一切都很好，如果由于某种原因您更改了此顺序（从末尾或中间开始），则恰好`fileupload`没有考虑验证并且提交按钮在没有选择文件的情况下启用。

（写这个我意识到它不是很清楚；-）但是[看看在线测试](https://script.google.com/macros/s/AKfycbzhtV-L9bOaUrOUdGyEw4fHWmO-jT1fhXeVpKaH68M50iNx_g1M/exec)会明白我的意思！！）

这是我使用的演示代码，如果您发现其中有什么错误可以解释这种行为，我会很高兴知道。

```
var submissionSSKey = '0AnqSFd3iikE3dFZ6M1JDekJIa1I5UEZIZURGN3hhM3c';
var listitems = ['Select a value','value1','value2','value3','value4','value5','value6']
var Panelstyle = {'background':'beige','padding':'40px','borderStyle':'ridge','borderWidth':'15PX','borderColor':'#eecc99'}

function doGet() {
  var app = UiApp.createApplication().setTitle('Form test').setStyleAttribute('padding','50PX');
  var panel = app.createFormPanel().setStyleAttributes(Panelstyle).setPixelSize(400, 250);
  var title = app.createHTML('<B>Form validation test</B>').setStyleAttribute('fontSize','20px').setStyleAttribute('color','brown');
  var grid = app.createGrid(9,2).setId('grid');
  var list1 = app.createListBox().setName('list1');
   for(var i in listitems){list1.addItem(listitems[i])}    
  var list2 = app.createListBox().setName('list2');
   for(var i in listitems){list2.addItem(listitems[i])}    
  var list3 = app.createListBox().setName('list3');
   for(var i in listitems){list3.addItem(listitems[i])}    
  var Textbox1 = app.createTextBox().setWidth('150px').setName('TB1');
  var Textbox2 = app.createTextBox().setWidth('150px').setName('TB2');
  var DateB = app.createDateBox().setWidth('150px').setName('dateB');
  var upLoad = app.createFileUpload().setName('uploadedFile');
  var submitButton = app.createSubmitButton('<B>Submit</B>'); 
  var warning = app.createHTML('Please fill in all fields').setStyleAttribute('background','#FFcc99').setStyleAttribute('fontSize','20px');
  //file upload
  var cliHandler2 = app.createClientHandler()
  .validateLength(Textbox1, 1, 40).validateLength(Textbox2, 1, 40).validateNotMatches(list1,'Select a value').validateNotMatches(list2,'Select a value')
  .validateNotMatches(list3,'Select a value').validateMatches(DateB, '2','g').validateNotMatches(upLoad, 'FileUpload')
  .forTargets(submitButton).setEnabled(true)
  .forTargets(warning).setHTML('Now you can submit your form').setStyleAttribute('background','#99FF99').setStyleAttribute('fontSize','12px');

  //Grid layout of items on form
  grid.setText(0, 0, 'This is a ')
      .setWidget(0, 1, title)
      .setText(1, 0, 'List Selector 1')
      .setWidget(1, 1, list1.addClickHandler(cliHandler2))
      .setText(2, 0, 'List Selector 2')
      .setWidget(2, 1, list2.addClickHandler(cliHandler2))
      .setText(3, 0, 'List Selector 3')
      .setWidget(3, 1, list3.addClickHandler(cliHandler2))
      .setText(4, 0, 'Text Box 1')
      .setWidget(4, 1, Textbox1.addClickHandler(cliHandler2))
      .setText(5, 0, 'Text Box 2')
      .setWidget(5, 1, Textbox2.addClickHandler(cliHandler2))
      .setText(6, 0, 'Date Box')
      .setWidget(6, 1, DateB)
      .setText(7, 0, 'File Upload')
      .setWidget(7, 1, upLoad.addChangeHandler(cliHandler2))
      .setWidget(8, 0, submitButton)
      .setWidget(8, 1, warning);

  var cliHandler = app.createClientHandler().forTargets(warning).setHTML('<B>PLEASE WAIT WHILE DATA IS UPLOADING<B>').setStyleAttribute('background','yellow');
  submitButton.addClickHandler(cliHandler).setEnabled(false);  
  panel.add(grid);
  app.add(panel);
  return app;
}

function doPost(e) {
  var app = UiApp.getActiveApplication();
  var ListVal1 = e.parameter.list1;  
  var ListVal2 = e.parameter.list2;  
  var ListVal3 = e.parameter.list3;  
  var textVal1 = e.parameter.TB1;
  var textVal2 = e.parameter.TB2;
  var dateVal = e.parameter.dateB;
  var sheet = SpreadsheetApp.openById(submissionSSKey).getSheetByName('Summary');
  var lastRow = sheet.getLastRow();
  var targetRange = sheet.getRange(lastRow+1, 1, 1, 6).setValues([[ListVal1,ListVal2,ListVal3,textVal1,textVal2,dateVal]]);
  var fileBlob = e.parameter.uploadedFile;
  var doc = DocsList.createFile(fileBlob);
  app.add(app.createLabel('Thank you for submitting'));
  return app
} 
```

**编辑：** 这是菲尔回答后代码的修改部分。验证工作更可靠，但仍然缺乏一些恼人的用户友好性......

删除代码，**编辑 2**最终代码，完整的 doGet：

```
var submissionSSKey = '0AnqSFd3iikE3dFZ6M1JDekJIa1I5UEZIZURGN3hhM3c';
var listitems = ['Select a value','value1','value2','value3','value4','value5','value6']
var Panelstyle = {'background':'beige','padding':'40px','borderStyle':'ridge','borderWidth':'15PX','borderColor':'#eecc99'}

function doGet() {
  var app = UiApp.createApplication().setTitle('Form test').setStyleAttribute('padding','50PX');
  var panel = app.createFormPanel().setStyleAttributes(Panelstyle).setPixelSize(400, 250);
  var title = app.createHTML('<B>Form validation test</B>').setStyleAttribute('fontSize','20px').setStyleAttribute('color','brown');
  var grid = app.createGrid(10,2).setId('grid');
  var list1 = app.createListBox().setName('list1');
   for(var i in listitems){list1.addItem(listitems[i])}    
  var list2 = app.createListBox().setName('list2');
   for(var i in listitems){list2.addItem(listitems[i])}    
  var list3 = app.createListBox().setName('list3');
   for(var i in listitems){list3.addItem(listitems[i])}    
  var Textbox1 = app.createTextBox().setWidth('150px').setName('TB1');
  var Textbox2 = app.createTextBox().setWidth('150px').setName('TB2');
  var DateB = app.createDateBox().setWidth('150px').setName('dateB');
  var upLoad = app.createFileUpload().setName('uploadedFile');
  var uploadtracker = app.createTextBox().setVisible(false);
  var submitButton = app.createSubmitButton('<B>Submit</B>'); 
  var warning = app.createHTML('Please fill in all fields').setStyleAttribute('background','#FFcc99').setStyleAttribute('fontSize','20px');
  //file upload
  var cliHandler2 = app.createClientHandler()
  .validateLength(Textbox1, 1, 40).validateLength(Textbox2, 1, 40).validateNotMatches(list1,'Select a value').validateNotMatches(list2,'Select a value')
  .validateNotMatches(list3,'Select a value').validateMatches(DateB, '2','g').validateMatches(uploadtracker, 'selected')
  .forTargets(submitButton).setEnabled(true)
  .forTargets(warning).setHTML('Now you can submit your form').setStyleAttribute('background','#99FF99').setStyleAttribute('fontSize','12px');
  var cliHandler3 = app.createClientHandler().forTargets(uploadtracker).setText('selected')
  //Grid layout of items on form
  grid.setText(0, 0, 'This is a ')
      .setWidget(0, 1, title)
      .setText(1, 0, 'List Selector 1')
      .setWidget(1, 1, list1)
      .setText(2, 0, 'List Selector 2')
      .setWidget(2, 1, list2)
      .setText(3, 0, 'List Selector 3')
      .setWidget(3, 1, list3)
      .setText(4, 0, 'Text Box 1')
      .setWidget(4, 1, Textbox1)
      .setText(5, 0, 'Text Box 2')
      .setWidget(5, 1, Textbox2)
      .setText(6, 0, 'Date Box')
      .setWidget(6, 1, DateB.addValueChangeHandler(cliHandler2))
      .setText(7, 0, 'File Upload')
      .setWidget(7, 1, upLoad.addChangeHandler(cliHandler3).addChangeHandler(cliHandler2))
      .setWidget(8, 0, submitButton)
      .setWidget(8, 1, warning)
      .setWidget(9,0,uploadtracker)
      .addClickHandler(cliHandler2);

  var cliHandler = app.createClientHandler().forTargets(warning).setHTML('<B>PLEASE WAIT WHILE DATA IS UPLOADING<B>').setStyleAttribute('background','yellow');
  submitButton.addClickHandler(cliHandler).setEnabled(false);  
  panel.add(grid);
  app.add(panel);
  return app;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:44:28.540

## 粗略的解决方法

### > 这并不完美

该代码添加了一个隐藏元素，用于保存 FileUpload 是否已更改。如果 FileUpload 已更改，它将 TextBox 设置为，`SELECTED!`但用户可以轻松地将 FileUpload*更改*回未选择文件，并且无法准确清除此 TextBox。

这是基于我们对 FileUpload 的了解。

1.  当用户加载 UiApp 时，FileUpload 最初**没有选择文件**。
2.  当在FileUpload 上触发*change事件时，***所选文件已更改**。

所以基于这两件事，当第一次调用*change*时，我们知道有一个文件被选中。

### > 变更摘要

创建隐藏元素

```
var hidden = app.createTextBox().setStyleAttribute("display","none").setValue(""); 
```

删除`.validateNotMatches(upLoad, 'FileUpload')`并替换为

```
.validateLength(hidden,1,100) 
```

创建一个新的客户端处理程序

```
var cliHandler3 = app.createClientHandler().forTargets(hidden).setText("SELECTED!"); 
```

插入`.addChangeHandler(cliHandler3)`旧行。

```
upLoad.addChangeHandler(cliHandler3).addChangeHandler(cliHandler2) 
```

替换`panel.add(grid)`为（“隐藏”必须添加到 FormPanel 才能工作）

```
var vert = app.createVerticalPanel().add(hidden).add(grid);
panel.add(vert); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T19:10:20.303

看不到在哪里添加评论，但我想问一下 .addClickHandler(clihandler2); 到网格。这是通过在末尾添加它来完成的

```
grid.setText(0, 0, 'This is a ')  [rest of the code (.setText .setWidget etc) ].addClickHandler(cliHandler2); 
```

另外，你能告诉我小部件位置 9,0 上的 uploadtracker 是什么吗？我没有看到它注意到原始代码已发布，但请参阅修改后的代码中 grid.set(text & widgets) 中的 upload 和 uploadtracker。

# ruby-on-rails - Heroku 抛出未定义的方法“devise_for”

> ID：15350116
> 
> 赞同：0
> 
> 时间：2013-03-11T22:47:11.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3, deployment, heroku, devise

我有一个在本地运行的应用程序，它工作正常。我已经为 Facebook 的 OAuth 设置了设计。

当我将应用程序推送到 Heroku 时，我得到了这个异常：

```
/app/app/controllers/users_controller.rb:2:in `<class:SessionsController>':
undefined method `devise_for'
for Users::SessionsController:Class (NoMethodError) 
```

但是我在本地没有这个错误。

这些是我将其推送到 Heroku 后采取的步骤：

*   `heroku run rake db:migrate`
*   `heroku restart`使用和重新启动heroku`heroku ps:restart`

所以问题不在于我仍然需要重新启动我的服务器。

这是我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'
gem 'devise'
gem 'omniauth'
gem 'omniauth-facebook' 
```

可能是什么问题？

## 编辑

以下是错误指向的第一行：

```
# app/controllers/users/users_controller
class Users::SessionsController < Devise::SessionsController
    devise_for :users, :controllers => { :sessions => "users/sessions" }
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:20:07.773

您是否尝试在本地运行它？`devise_for`应该在您的路线上，而不是在控制器中，请参阅[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)以确保您的设置正确。你不需要重写控制器，除非你用它做一些特殊的事情。如果我在你的位置，我会先尝试做最少的改变，然后按照你想要的方式逐步改变它。

# django - 限制用户 django 的某些权限

> ID：15350118
> 
> 赞同：1
> 
> 时间：2013-03-11T22:47:21.057
> 
> 标签：django, django-forms, django-admin

从管理站点 localhost:8080/admin，我创建了一些具有有限权限级别的自定义用户。我正在构建一个系统，每个用户都被指定一个实验室来工作。我对用户的内置权限级别感到满意。但是每次在下拉列表中，对于我创建的每个用户，都会出现所有实验室名称。

我可以以某种方式自定义下拉列表以仅为特定用户分配特定实验室吗？

我的模型.py：

```
 from django.db import models

 # Create your models here.
 class LabName(models.Model):
 labsname=models.CharField(max_length=30,unique=True)
 #room_number=models.CharField(max_length=3)
 def __unicode__(self):
 return self.labsname
 def isOwnedBy(self, user):
    return self.rental.isOwnedBy(user)
 class Meta:
    permissions = (
        ('view_task', 'View task'),
    )

  STAT=(('W','Working'),('N','Not Working'))
 class ComponentDescription(models.Model):
    lab_Title=models.ForeignKey('Labname')
    component_Name = models.CharField(max_length=30)
    description = models.TextField(max_length=200)
    qty = models.IntegerField()
    purchased_Date = models.DateField()
    status = models.CharField(max_length=1,choices=STAT)
    to_Do = models.CharField(max_length=30,blank=True) 
    remarks = models.CharField(max_length=30,blank=True)
    def isOwnedBy(self, user):
        return self.rental.isOwnedBy(user)
    class Meta:
         permissions = ( ('view_task', 'View task'),)

def __unicode__(self):
    return self.component_Name 
```

# bash - BASH - 如何轻松确定可变数量的此类字符中有多少

> ID：15350133
> 
> 赞同：0
> 
> 时间：2013-03-11T22:48:26.963
> 
> 标签：bash

如何轻松确定可变数量的此类字符中有多少

```
VAR="ddfasf♣dsdad ♣ as dsdsd  ♣  sadsd     ♣ df"
echo $VAR # result 4 

VAR="♣♣ as dsd♣sd  ♣  s♣adsd     ♣ df"
echo $VAR # result 5 
```

我试过了，但它不起作用:-(

```
echo "$(echo $VAR | tr -dc ♣ | wc -c)" 
```

非常感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:55:25.847

尝试：

```
chars=${VAR//[!♣]}
echo "${#chars}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:53:35.603

删除 tr 中除指定字符之外的所有字符的选项**是**-C

```
 $(echo $VAR | tr -dC ♣ | wc -c) 
```

# ruby-on-rails - 你能在 Rails <%= @time.now %> 中添加一个 css 类或 id 吗？

> ID：15350134
> 
> 赞同：0
> 
> 时间：2013-03-11T22:48:27.903
> 
> 标签：ruby-on-rails, ruby

我不想将 ruby​​ 代码包装在任何东西中？我的代码中有几个变量，我想给每个变量一个类。我了解如何使用表单标签来做到这一点，但不是这个。有没有人有答案或解决方案？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:01:28.207

就像 summea 说的，Time.now 只会给你一个字符串。要添加一个类，你可以把它放在一个`div`,`span`或`time`HTML 标记中：

```
<%= content_tag :div, @time.now, class: 'your-css-class' %>
<%= content_tag :span, @time.now, class: 'your-css-class' %>
<%= time_tag @time.now, class: 'your-css-class' %> 
```

这些会给你：

```
<div class="your-css-class">TIME_VALUE</div>
<span class="your-css-class">TIME_VALUE</span>
<time datetime="TIME_VALUE" class="your-css-class">TIME_VALUE</time> 
```

请参阅[http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_tag)了解`time_tag`

# php - 代码点火器 | .htaccess 从 url 中删除 index.php

> ID：15350137
> 
> 赞同：7
> 
> 时间：2013-03-11T22:48:54.857
> 
> 标签：php, .htaccess, codeigniter, routing

好的，我完全按照codeigniter文档中的要求做了，创建了新文件.htaccess

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

我正在使用xampp，所以我访问该网站的网址是

```
http://localhost:12/projects/zorkif_nextgen/index.php/main 
```

现在在应用上述 .htaccess 文件后，我在没有 index.php 的情况下尝试了它

```
http://localhost:12/projects/zorkif_nextgen/main 
```

但它不是工作，而是将我重定向到这个 url

```
http://localhost:12/xampp 
```

如何解决这个问题？

另外，在尝试 .htaccess 后，我的页面上出现错误

在页面顶部出现消息，

```
 Error Occured.
Warning!. Make sure you perform the correct action.
The Action has been completed Successfully. 
```

* * *

编辑：

这是我的一些 config.php 文件设置

```
$config['base_url'] = '';
$config['index_page'] = 'index.php';
$config['uri_protocol'] = 'AUTO';
$config['url_suffix'] = '';
$config['enable_hooks'] = FALSE;
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-';
$config['allow_get_array']      = TRUE;
$config['enable_query_strings'] = FALSE;
$config['controller_trigger']   = 'c';
$config['function_trigger']     = 'm';
$config['directory_trigger']    = 'd'; // experimental not currently in use
$config['sess_cookie_name']     = 'zk_ci_session';
$config['sess_expiration']      = 7200;
$config['sess_expire_on_close'] = TRUE;
$config['sess_encrypt_cookie']  = TRUE;
$config['sess_use_database']    = TRUE;
$config['sess_table_name']      = 'sys_ci_sessions';
$config['sess_match_ip']        = FALSE;
$config['sess_match_useragent'] = TRUE;
$config['sess_time_to_update']  = 300;
$config['csrf_protection'] = TRUE;
$config['csrf_token_name'] = 'csrf_test_name';
$config['csrf_cookie_name'] = 'csrf_cookie_name';
$config['csrf_expire'] = 7200;
$config['rewrite_short_tags'] = FALSE; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T03:14:24.900

这对我很有效：

1-在根文件夹中创建 .htaccess 文件，内容如下

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

2-从配置文件更改`$config['index_page'] = 'index.php';`为`$config['index_page'] = '';`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-11T23:30:13.777

尝试将 RewriteBase 定义为 /projects/zorkif_nextgen

```
RewriteBase /projects/zorkif_nextgen 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T22:52:12.480

尝试以下

```
RewriteEngine on
RewriteBase /
# Hide the application and system directories by redirecting the request to index.php
RewriteRule ^(application|system|\.svn) index.php/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [QSA,L] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-03T15:02:27.647

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR] 
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php [NC,L] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-20T15:40:37.437

你可以试试这个

```
<IfModule mod_rewrite.c> 
   RewriteEngine on 
   RewriteCond $1 !^(index\.php|images|swf|uploads|js|css|robots\.txt) 
   RewriteRule ^(.*)$ /ci/index.php/$1 [L] 
</IfModule> 
```

供将来阅读这将帮助您[Codeigniter 使用 htaccess 从 url 中删除索引 php](http://agungmulyawan.com/codeigniter-remove-index-php-url-using-htaccess)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-09T13:38:40.797

您可能已经查看了 config/routes.php。

它可能已设置为默认控制器。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-11T22:54:43.870

不要使用 .htaccess 文件从您的 URL 中删除 index.php。这是您的配置中的一个问题。具体看`$config['base_url']`和`$config['index_page']`

# php - 在linux中使用php从网络上的windows共享文件夹中读取目录

> ID：15350144
> 
> 赞同：0
> 
> 时间：2013-03-11T22:49:15.070
> 
> 标签：php, linux, windows

我需要从windows系统共享文件夹中读取一个目录到linux环境中的PHP脚本但是脚本显示错误“无法打开目录：没有这样的文件或目录”

如何使用 php 读取 linux 中的 windows 共享目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:53:45.727

如果您可以使用以下安装命令在 Linux 机器上安装 Windows 共享，这与 PHP IMO 无关：

`mount -t cifs -o username=WINDOWS_USER_NAME \\\\hostname\\sharename /mnt/myshare`

然后，您应该能够`/mnt/myshare`像 PHP 脚本中的任何其他文件一样读取共享中的文件。

# java - 如何确定 Java 线程在哪个内核上运行？

> ID：15350146
> 
> 赞同：13
> 
> 时间：2013-03-11T22:49:22.067
> 
> 标签：java, multithreading, performance, core

我想实现一个 CoreLocal 映射，它就像 ThreadLocal 一样工作，只是它返回一个特定于当前线程正在运行的核心的值。

这样做的原因是我想编写将从队列中获取作业的代码，但我想优先考虑其关联数据已经在与从队列中选择作业的线程相同的 L1 缓存中的作业. 因此，我不想为整个程序设置一个作业队列，而是希望为每个内核设置一个队列，并且只有当队列为空时，工作线程才会查看其他内核的队列。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-12T02:56:41.007

我不认为有任何调用来获取当前在 JDK 中公开的 CPU，尽管它肯定已经在[之前讨论过](http://cs.oswego.edu/pipermail/concurrency-interest/2011-August/008158.html)¹并被[提议作为 JDK 增强](https://bugs.openjdk.java.net/browse/JDK-7065539)。

我认为，在实现类似的东西之前，最好的选择是使用[JNA](https://github.com/java-native-access/jna)（最简单）或[JNI](https://docs.oracle.com/javase/8/docs/technotes/guides/jni/)（快速）之类的东西来包装本地系统调用，例如[`getcpu`](http://man7.org/linux/man-pages/man2/getcpu.2.html)在 Linux 或[`GetCurrentProcessorNumber`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms683181(v=vs.85).aspx)Windows 上。

至少在 Linux 上，`getcpu`是在没有内核转换的 VDSO 中实现的，所以它应该只需要几纳秒，再加上 JNI 调用的几纳秒。JNA 比较慢。

如果你*真的*需要速度，你总是可以将这个函数添加为定制 JVM 的内在函数（因为 OpenJDK 是开源的）。这将减少几纳秒。

请记住，一旦您获得此信息，它可能已经过时，因此您永远不应该依赖它的正确性，只依赖性能。由于您已经需要处理获取“错误”值，另一种可能的方法是将 CPU ID 的缓存值存储在 a 中`ThreadLocal`，并且只定期更新它。这使得诸如解析`/proc`文件系统之类的缓慢方法变得可行，因为您很少这样做。为了获得最大速度，您可以从计时器线程定期使本地线程无效，而不是在每次调用时检查无效条件。

* * *

¹强烈推荐阅读讨论和增强请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-11T20:14:17.587

有一个相关的[linux 问题](https://stackoverflow.com/questions/8032372/how-can-i-see-which-cpu-core-a-thread-is-running-in)没有令人满意的答案（解析`top`输出不计算在内，接受的答案不再起作用）。我以为

```
/proc/<pid>/task/<tid>/sched 
```

可能会在一行中给出这些信息

```
 current_node=0, numa_group_id=0 
```

但是在我运行 4.4.0-92-generic 内核的 i5-2400 上，这条线对于所有线程总是相同的。我想，“节点”是指整个 CPU（套接字），而我只有一个。

我找不到这方面的文档，或者在[这个文档](https://www.kernel.org/doc/Documentation/filesystems/proc.txt)中错过了它。

* * *

但是，恐怕获得此信息可能无法帮助您：

*   在您正在处理的规模上，从 proc 文件系统读取可能成本太高。
*   与. `ThreadLocal`_ `CoreLocal`_ `someCoreLocalField++`暂停它也会这样做。因此，您需要一些原子或线程局部变量才能使其正常工作，这又可能使其速度太慢而无法满足您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T23:04:01.273

也许你可以检查`/proc/[pid]/status`

这些字段可能会有所帮助：

> cpus_allowed：可以运行此进程的 CPU 掩码
> 
> cpus_allowed_list：与之前相同，但采用“列表格式”

# security - 保护 Symfony2 应用程序

> ID：15350150
> 
> 赞同：0
> 
> 时间：2013-03-11T22:49:39.820
> 
> 标签：security, symfony

我正在开发一个涉及具有分层角色的用户的 Symfony2 应用程序。现在我可以毫无问题地注册、恢复和登录应用程序，因为我已经实现了 Symfony2 文档中描述的角色和用户。

那时，我已经开发了一些 CRUD，以便能够管理应用程序中的对象，但在当前实现中，我必须检查当前用户角色，以便让他或不运行“选定”操作。我的意思是，在每个控制器中，我获取安全上下文，然后是用户对象并检查权限，然后有时我需要检查当前用户是数据的所有者 - 即，如果用户有客户端，我需要检查 url 传递的变量/id/whatever拥有/属于当前用户 - 然后拒绝访问。

所以，就我习惯和感觉舒适地开发上述应用程序而言，我想知道是否有更好的方法或 Symfony2 方法，我可以以标准或更易理解的方式管理角色和数据，以便未来的开发人员不会t 需要通过每个 if 或检查内部控制器 + 操作。我还想指出，我将能够自定义获取或加载数据或对象的方式，以便优化 sql 在后台的运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T00:19:33.290

Symfony ACL 正是您所需要的。您可以将访问权限（即所有者、编辑、查看等）分配给单个用户或分配给具有特定角色的所有用户（或两者兼有）。

如果 ACL 对您的需求来说过于复杂，那么另一种方法是使用自定义[Security Voter](http://kriswallsmith.net/post/15994931191/symfony2-security-voters)。

# arduino - 将数据写入 Arduino 的板载 EEPROM

> ID：15350152
> 
> 赞同：2
> 
> 时间：2013-03-11T22:49:41.027
> 
> 标签：arduino, eeprom

我目前正在尝试编写一个函数来将数据存储到我的 Arduino 上的 EEPROM。到目前为止，我只是在编写一个指定的字符串，然后在程序第一次运行时将其读回。我试图将字符串的长度存储为第一个字节，我的代码如下；

```
#include <EEPROM.h>
#include <LiquidCrystal.h>

LiquidCrystal lcd(8, 13, 9, 4, 5, 6, 7);
char string[] = "Test";

void setup() {
    lcd.begin( 16, 2 );
    for (int i = 1; i <= EEPROM.read(0); i++){ // Here is my error
      lcd.write(EEPROM.read(i));
    }
    delay(5000);
    EEPROM_write(string);
}

void loop() {
}

void EEPROM_write(char data[])
{
    lcd.clear();
    int length = sizeof(data); // I think my problem originates here!
    for (int i = 0; i <= length + 2; i++){
        if (i == 0){
            EEPROM.write(i, length); // Am I storing the length correctly?
            lcd.write(length);
        }
        else{
            byte character = data[i - 1];
            EEPROM.write(i, character);
            lcd.write(character);
        }
    }
} 
```

我遇到的问题是当我读取 EEPROM 的第一个字节时，我得到了假定的长度值。但是，循环只运行了 3 次。我已经评论了我的代码中的一些兴趣点，但错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T23:44:17.913

我认为，在很多方面，你确实是正确的。试试这个写：

```
// Function takes a void pointer to data, and how much to write (no other way to know)
// Could also take a starting address, and return the size of the reach chunk, to be more generic
void EEPROM_write(void * data, byte datasize) {
   int addr = 0;
   EEPROM.write(addr++, datasize);
   for (int i=0; i<datasize; i++) {
      EEPROM.write(addr++, data[i]);
   }
} 
```

你可以这样称呼它：

```
char[] stringToWrite = "Test";
EEPROM_write(stringToWrite, strlen(stringToWrite)); 
```

然后阅读：

```
int addr = 0;
byte datasize = EEPROM.read(addr++);
char stringToRead[0x20];          // allocate enough space for the string here!
char * readLoc = stringToRead;
for (int i=0;i<datasize; i++) {
    readLoc = EEPROM.read(addr++);
    readLoc++;
} 
```

请注意，这不是使用`String`为 Arduino 开发的类：读写会有所不同。但上面应该适用于`char`数组字符串。

Note however, that while `EEPROM_write()` *looks* generic now, it isn't really, since `addr` is harcoded. It can only write data to the beginning of EEPROM.

# css - 当包含元素具有 clear 属性时，浮动元素继承上边距

> ID：15350154
> 
> 赞同：1
> 
> 时间：2013-03-11T22:49:45.840
> 
> 标签：css, google-chrome, css-float

`clear: both;`当容器使用（或左/右）容器时，我偶然发现了一个带有浮动元素的错误。在 Chrome（不是 Safari）中，第一个浮动元素的位置正确，但所有后续元素似乎都继承了父元素的上边距，使它们偏离了线。

这是有问题的代码：http: [//jsfiddle.net/peterjmag/3zJey/1/](http://jsfiddle.net/peterjmag/3zJey/1/)

尝试切换链接以查看差异。此外，尝试各种值`margin-top`on `#product-listing`。

对于那些使用其他浏览器的人来说，这就是小提琴对我来说的样子（在 Chrome 25.0.1364.160 for Mac 中）：

![JSFiddle 输出截图](../Images/355a85cf6ad12294f746a2a8b7e0a8c2.png)

**为什么`clear: both;`会在 Chrome 中导致这种行为？**根据[CSS 2.1 规范](http://www.w3.org/TR/CSS21/visuren.html#flow-control)，该`clear`属性应该只影响文档中较早出现的浮动元素，而不是目标元素中的浮动元素。

（当然，我知道还有其他更优化的方法可以清除文档中的先前元素，这些元素不需要容器 div 上的 clear 属性——我只是想了解为什么会发生这种情况。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:21:22.843

看来这确实是一个 Chrome 错误：[Issue 178134: Floated elements render wrong when parent element has a clear property + a top margin](https://code.google.com/p/chromium/issues/detail?id=178134)。根据该报告，Chrome 27 及更高版本不受影响。

# c# - 如何在 MonoGame / XNA 中绘制虚线

> ID：15350173
> 
> 赞同：8
> 
> 时间：2013-03-11T22:51:21.463
> 
> 标签：c#, xna, monogame

在 MonoGame / XNA 4 中绘制虚线的最简单方法是什么？

我应该使用 3d 基元还是可以用一个简单的精灵来实现它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-19T15:21:21.820

bitbucket 上的用户 C3 发布了一个很好的实用程序类来创建 2D 基元。这些将扩展方法添加到 SpriteBatch 类。存储库在这里：[https ://bitbucket.org/C3/2d-xna-primitives/wiki/Home](https://bitbucket.org/C3/2d-xna-primitives/wiki/Home)

* * *

**欢迎**

欢迎来到 2D XNA Primitives 项目的新家，现在使用 Bitbucket 上的 Mercurial 存储库！现在与 Windows Phone 兼容。

**功能参考**

该库提供的所有公共方法都是扩展方法，这意味着您可以通过您自己的 SpriteBatch 实例直接访问它们，就好像这些方法内置在 SpriteBatch 类中一样。如果以这种方式调用方法，则可以忽略以下*所有*调用的第一个参数。

**公共方法**

画弧

画圆

画线

绘制矩形

填充矩形

放像素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:04:49.170

如果它是一条直线（简单的 90 度转弯），那么精灵可能是最简单的。

（如果您可以通过 HiDef 配置文件访问自定义着色器，那么在保持需求简单的情况下，在着色器中实现虚线并不难）

如果它以不规则的方式扭曲和转动，那么我建议使用 3d 基元。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-19T23:44:21.990

把问题分成两部分。

1）定义曲线的形状，如果它不是直线。

2）沿着这条曲线，用虚线的纹理创建一个三角形条带。

# android - 在 Mac OS X 上为 Android NDK r8d 交叉编译 libfaac 时出错

> ID：15350177
> 
> 赞同：1
> 
> 时间：2013-03-11T22:51:40.137
> 
> 标签：android, android-ndk, libfaac

我正在尝试在 Mac 机器上为 android 交叉编译 libfaac，但遇到了一些困难。

**设置**

*   安卓 NDK r8d
*   Mac OS X 10.7.5（64 位）
*   libfaac 1.28

我找到了这个链接：[Android NDK r6b Cross-compiling libfaac for android (linking libsupc++ questions)](https://stackoverflow.com/questions/7602924/android-ndk-r6b-cross-compiling-libfaac-for-android-linking-libsupc-problems)并将其用作我的脚本的起点，并对我正在使用的最新版本的 android ndk 和处理器 (armv7a) 进行了修改. 这是我的脚本：

```
#!/bin/bash
ANDROID_API=android-14
export ANDROID_NDK=${HOME}/Development/android-ndk-r8d
export ANDROID_SDK=${HOME}/Development/android-sdk-macosx
SYSROOT=$ANDROID_NDK/platforms/$ANDROID_API/arch-arm
ANDROID_BIN=$ANDROID_NDK/toolchains/arm-linux-androideabi-4.7/prebuilt/*-x86/bin/
CROSS_COMPILE=${ANDROID_BIN}/arm-linux-androideabi-
export PATH=$PATH:$ANDROID_SDK/tools:$ANDROID_SDK/platform-tools

export ARM_INC=$ANDROID_NDK/platforms/android-14/arch-arm/usr/include
export ARM_LIB=$ANDROID_NDK/platforms/android-14/arch-arm/usr/lib

DEST=${HOME}/Downloads/faac-1.28/build
CFLAGS=" -I$ARM_INC -fpic -DANDROID -fpic -mthumb-interwork -ffunction-sections -funwind-tables -fstack-protector -fno-short-enums -Wno-psabi -march=armv7-a -mtune=xscale -msoft-float -mthumb -Os -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -DANDROID  -Wa,--noexecstack -MMD -MP "
LDFLAGS=" -nostdlib -Bdynamic -Wl,--whole-archive -Wl,--no-undefined -Wl,-z,noexecstack  -Wl,-z,nocopyreloc -Wl,-soname,/system/lib/libz.so -Wl,-rpath-link=$ARM_LIB,-L$ANDROID_NDK/sources/cxx-stl/gnu-libstdc++/libs/armeabi -L$ANDROID_NDK/toolchains/arm-linux-androideabi-4.7/prebuilt/darwin-x86/arm-linux-androideabi/lib -L$ARM_LIB  -lc -lgcc -lm -ldl  "
FLAGS="--host=arm-androideabi-linux --enable-static --disable-shared --prefix=$DEST --enable-armv7a  "

export CPPFLAGS="$CFLAGS"
export CFLAGS="$CFLAGS"
export CXXFLAGS="$CFLAGS"
export CXX="${CROSS_COMPILE}g++ --sysroot=${SYSROOT}"
export LDFLAGS="$LDFLAGS"
export CC="${CROSS_COMPILE}gcc --sysroot=${SYSROOT}"
export NM="${CROSS_COMPILE}nm"
export STRIP="${CROSS_COMPILE}strip"
export RANLIB="${CROSS_COMPILE}ranlib"
export AR="${CROSS_COMPILE}ar"

./configure $FLAGS
make clean
make -j4 || exit 1
make install || exit 1 
```

**问题**

不幸的是，脚本无法正常运行。我收到一个`configure: error: C compiler cannot create executables`错误，`config.log`文件显示以下罪魁祸首：

```
configure:2767: $? = 1
configure:2790: checking for C compiler default output file name
configure:2817: /Users/jannon/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.7/prebuilt/*-x86/bin//arm-linux-androideabi-gcc --sysroot=/Users/jannon/Development/android-ndk-r8d/platforms/android-14/arch-arm  -I/Users/jannon/Development/android-ndk-r8d/platforms/android-14/arch-arm/usr/include -fpic -DANDROID -fpic -mthumb-interwork -ffunction-sections -funwind-tables -fstack-protector -fno-short-enums -Wno-psabi -march=armv7-a -mtune=xscale -msoft-float -mthumb -Os -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -DANDROID  -Wa,--noexecstack -MMD -MP   -I/Users/jannon/Development/android-ndk-r8d/platforms/android-14/arch-arm/usr/include -fpic -DANDROID -fpic -mthumb-interwork -ffunction-sections -funwind-tables -fstack-protector -fno-short-enums -Wno-psabi -march=armv7-a -mtune=xscale -msoft-float -mthumb -Os -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -DANDROID  -Wa,--noexecstack -MMD -MP   -nostdlib -Bdynamic -Wl,--whole-archive -Wl,--no-undefined -Wl,-z,noexecstack  -Wl,-z,nocopyreloc -Wl,-soname,/system/lib/libz.so -Wl,-rpath-link=/Users/jannon/Development/android-ndk-r8d/platforms/android-14/arch-arm/usr/lib,-L/Users/jannon/Development/android-ndk-r8d/sources/cxx-stl/gnu-libstdc++/libs/armeabi -L/Users/jannon/Development/android-ndk-r8d/toolchains/arm-linux-androideabi-4.7/prebuilt/darwin-x86/arm-linux-androideabi/lib -L/Users/jannon/Development/android-ndk-r8d/platforms/android-14/arch-arm/usr/lib  -lc -lgcc -lm -ldl   conftest.c  >&5
/s/ndk-toolchain/src/build/../gcc/gcc-4.7/libgcc/config/arm/linux-atomic-64bit.c:59: error: undefined reference to '__write'
collect2: error: ld returned 1 exit status
configure:2820: $? = 1
configure:2858: result: 
configure: failed program was:
| /* confdefs.h.  */
| #define PACKAGE_NAME "FAAC"
| #define PACKAGE_TARNAME "faac"
| #define PACKAGE_VERSION "1.28"
| #define PACKAGE_STRING "FAAC 1.28"
| #define PACKAGE_BUGREPORT "faac-dev@lists.sourceforge.net"
| #define PACKAGE "faac"
| #define VERSION "1.28"
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:2865: error: C compiler cannot create executables 
```

**解决方案？**

我不是最精通 c/c++ 编译/链接机制的来龙去脉，所以我真的不知道为什么`__write`没有定义函数。我想我正在使用的编译器、链接器或配置标志可能存在一些问题，但我的环境的一般设置可能有问题。但是，我能够成功地交叉编译其他项目（libx264、libmp3lame、ffmpeg）。

因此，我正在寻找指针以使其正常工作，或者任何其他可以为 android (armv7a) 编译 libfaac 的设置

谢谢！

# java - 在一个方面声明一个方面

> ID：15350179
> 
> 赞同：0
> 
> 时间：2013-03-11T22:51:57.240
> 
> 标签：java, aspectj

我碰巧有一个`@Aspect`声明一个方法，该方法被另一个方面的切入点拦截。这些方面是使用编译时编织创建的，并且容器是使用 Spring 实例化的。

我注释了我的方面，`@Configurable`告诉 Spring 该组件是在容器外部创建的。`Log`在这方面，我碰巧也有一个对象的静态引用。总而言之，代码看起来像这样

```
@Aspect
@Configurable
public class MyAspect {
    private static final Log log = LogFactory.getClass(MyAspect.class);
    // Autowired dependencies

    // Pointcuts and advice

    // Happens to be a pointcut of some other Advice
    @Asynchronous
    private Object someMethod(...) {
    }
} 
```

在 AspectJ 编译期间，我没有看到预期的消息，如下所示：

```
weaveinfo Join point 'method-call(java.lang.Object mypackage.someMethod(...))' in Type 'mypackage.MyAspect' (MyAspect.java:30) advised by around advice from 'anotherpackage.AsynchronousAspect' (from AsynchronousAspect.java)) 
```

正如预期的那样，此时从未调用第三方建议。但是，如果我在建议中添加一个简单的日志条目，例如

```
log.debug("Join point invoked!"); 
```

然后编译正确发生，所有方面都连接（包括我的第三方依赖项）并正确调用。

添加日志条目对改变我的假设有何影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:03:11.260

如果您知道自己在做什么，那么您想做的事情就非常简单而且一点也不危险。请道歉，我不是 Spring 用户，我更喜欢原生 AspectJ 语法而不是 @AspectJ。这个小示例运行得很好：

```
public class Application {
    public static void main(String[] args) {
        System.out.println("Hello world!");
        someMethod();
    }

    private static void someMethod() {
        System.out.println("Doing something ...");
    }
} 
```

```
public aspect FirstAspect {
    void around() : execution(void *..main(..)) {
        System.out.println(thisJoinPointStaticPart + ": " + someMethod("before", "main"));
        proceed();
        System.out.println(thisJoinPointStaticPart + ": " + someMethod("after", "main"));
    }

    private Object someMethod(String position, String methodName) {
        return position + " " + methodName;
    }
} 
```

```
public aspect SecondAspect {
    Object around() : execution(* *..someMethod(..)) {
        System.out.println(thisJoinPointStaticPart + ": before someMethod");
        Object result = proceed();
        System.out.println(thisJoinPointStaticPart + ": after someMethod");
        return result;
    }
} 
```

结果如预期：

```
execution(Object FirstAspect.someMethod(String, String)): before someMethod
execution(Object FirstAspect.someMethod(String, String)): after someMethod
execution(void Application.main(String[])): before main
Hello world!
execution(void Application.someMethod()): before someMethod
Doing something ...
execution(void Application.someMethod()): after someMethod
execution(Object FirstAspect.someMethod(String, String)): before someMethod
execution(Object FirstAspect.someMethod(String, String)): after someMethod
execution(void Application.main(String[])): after main 
```

如果您还关心应用/执行方面的顺序，请使用`declare precedence`.

如果您在访问私人成员时遇到问题，您需要使用`privileged aspect`.

**更新：**`thisEnclosingJoinPointStaticPart`更改了to的用法`thisJoinPointStaticPart`。那只是一个复制和粘贴错误。结果在`execution`连接点上是相同的，但无论如何，更正更好地显示了代码的意图。

# javascript - Python csv.reader() 到 JS？

> ID：15350183
> 
> 赞同：0
> 
> 时间：2013-03-11T22:52:18.113
> 
> 标签：javascript, jquery, python

我有一个 python 代码，例如：

```
import csv
reader = csv.reader(open('myText.txt', 'r'), delimiter=",")
for row in reader:
print row[0] + 'is' + row[1] + '</br>' 
```

**我在 JS 或 JQuery 中**寻找类似的操作/代码[1] 。这个动作的名字也很受欢迎。我正在探索 JS，想知道是否有办法获取在线/离线 csv，对其进行解析、迭代、相应地在我的网站中注入一些 HTML。

[1]：更准确地说，我寻找**reader = csv.reader(open('myText.txt', 'r'), delimiter=",")**的 JS 翻译，剩下的我可以管理。

**注意：** myText.txt 将是[这个在线文件](https://raw.github.com/cburgmer/cjklib/master/cjklib/data/pinyinipamapping.csv)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:03:17.587

对于给定的 CSV 文件，我认为这样的内容就足够了（仅使用`jquery`）：

```
$.get('/path/to/pinyinipamapping.csv')
.done(function(csvData) {
    var body = $('body');
    csvData.split(/\r\n|\n/).forEach(function (rowStr) {
        if (rowStr[0] != '#') {
            var row = rowStr.split(',');
            body.append('<p>' + row[0] + 'is' + row[1] + '</p>');
        }
    });
}); 
```

但是，这不适用于带引号的逗号等。

如需更完整的 CSV 解析，请查看使用[此博客文章中的](http://www.bennadel.com/blog/1504-Ask-Ben-Parsing-CSV-Strings-With-Javascript-Exec-Regular-Expression-Command.htm)[代码解析 CSV 数据的 Javascript 代码](https://stackoverflow.com/questions/1293147/javascript-code-to-parse-csv-data)。此外，您可以考虑使用[jQuery-csv 库](http://code.google.com/p/jquery-csv/)，尽管它处于测试阶段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:02:05.643

对于一个快速简单的文件，它可能是这样的：（受此[答案](https://stackoverflow.com/a/7431565/541842)启发的代码）

```
 // Put here the url to the file
 url = "https://raw.github.com/cburgmer/cjklib/master/cjklib/data/pinyinipamapping.csv";

    $.ajax({
        type: "GET",
        url: url,
        dataType: "text",
        success: function(data) {processData(data);}
     });

function processData(allText) {
    // Get an array of lines
    var allTextLines = allText.split(/\r\n|\n/);
    // Get the number of columns using the first row
    var entries = allTextLines[0].split(',');
    var lines = [];

    // while there are elements in the row
    while (entries.length>0) {
        // remove that line, split it and store in our array 
        lines.push(entries.shift().split(','));
    }
    // Now do your stuff with the array lines

} 
```

# macos - 如何在不破坏现有 bash 命令的情况下向 bash 路径添加内容？

> ID：15350185
> 
> 赞同：0
> 
> 时间：2013-03-11T22:52:29.050
> 
> 标签：macos

我正在做一些 Android 开发，想从任何地方访问命令行工具。

我的主目录中没有现有的 .bash_profile 文件，所以我创建了一个并添加了以下行：

```
export PATH="/Users/Me/desktop/Android/Android SDK bundle/sdk/platform-tools" 
```

我现在可以从终端访问 Android 工具，但是 ls 命令已停止工作，尽管 cd 仍然有效。我明白了

```
-bash: ls: command not found 
```

我应该怎么做才能让它再次工作（为什么 ls 停止工作但 cd 仍然有效？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:58:04.003

尝试：

```
export PATH=$PATH:"/Users/Me/desktop/Android/Android SDK bundle/sdk/platform-tools" 
```

它将附加到当前`PATH`的 sdk 目录。

至于后面的问题，它停止工作是因为你覆盖了你的`PATH`变量，所以 bash 找不到你的二进制文件。但是`cd`，它是一个内置命令（[http://linux.about.com/library/cmd/blcmdl1_builtin.htm](http://linux.about.com/library/cmd/blcmdl1_builtin.htm)），它不需要定位和执行路径。

# jquery - 在没有 HTML 元素或 jQuery 的情况下更改站点标题

> ID：15350191
> 
> 赞同：2
> 
> 时间：2013-03-11T22:52:42.340
> 
> 标签：jquery, seo

我想更改我的页面/网站标题，但我无法访问我正在使用的在线平台上的所有 HTML 代码（包括标题）。

我用过这个：

```
<script type='text/javascript'>
    jQuery(function() {
        jQuery(document).attr('title', 'Whatever you want');     
    });
</script> 
```

但我听说这种变化对 SEO 不友好。真的吗？而我能做些什么呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T22:55:24.623

如果您想对 SEO 友好，则必须在 HTML 中进行更改。

如果您的“平台”带有 CMS，则应该有一个设置页面标题的选项。

# css - CSS3变换旋转嵌套的背景图像

> ID：15350193
> 
> 赞同：0
> 
> 时间：2013-03-11T22:52:45.643
> 
> 标签：css, background-image, css-animations

我有一个总共存在 3 张图像的背景。然而，中间的背景图像*（wrapper2）*在视觉上是“介于”两个背景图像*（wrapper1 和 wrapper2）*之间。当我尝试旋转中间图像*(wrapper2)*时，最上面的图像*(wrapper3)*也会移动。

我该如何防止这种情况，以便只有中间背景图像*（wrapper2）*可以旋转，而另一个*（* wrapper3）不能旋转？

```
<div id="wrapper1">
<div id="wrapper2">
<div id="wrapper3">
<!-- blabla -->
</div>
</div>
</div>

#wrapper1 {
        background-image: url("../media/bg1.png");
        background-size: 300px 200px;
        background-repeat: no-repeat;
}

#wrapper2 {
        background-image: url("../media/bg2.png");
        background-size: 300px 200px;
        background-repeat: no-repeat;
}

#wrapper3 {

        background-image: url("../media/bg3.png");
        background-size: 300px 200px;
        background-repeat: no-repeat;
}

#wrapper2:hover 
{
    animation: TestAnim;        
      animation-iteration-count:  infinite;     
    animation-duration: 10s; 
}

@keyframes TestAnim
{
 0% { transform:rotate(0deg); }
 25% { transform:rotate(-4deg); }
 100% { transform:rotate(0deg); }
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:55:04.393

好吧，我的工作方式是不可能的。我可以定位 div（绝对/相对）并使它们成为兄弟而不是孩子。

但我选择创建我想要的所有旋转的精灵图像并使用 css3 动画。

在 CSS 关键帧动画中，我每次都移动背景位置：

```
0% { background-position: 0 0; width: 300px; height: 200px; }
1% { background-position: 0 -200px; width: 300px; height: 200px; }
... 
```

重要的是您必须定义**step-start**！

```
animation-timing-function: step-start; 
```

此 step-start 在 Internet Explorer 10 中运行良好。 **备注：**对于较旧的浏览器，动画将不起作用*（CSS3 未知或 step-start 未知）*并且您的第一个 sprite 将显示，因此请确保您的第一个 sprite 是你的初始状态。

供您参考：我使用 GIMP 创建动画并使用名为 CSS WebSprites 的插件自动生成我的精灵和 CSS 代码： [GIMP CSS WebSprites 插件](http://registry.gimp.org/node/25908)

# .net - 如何清除来自登录用户“新凭据”的模拟

> ID：15350194
> 
> 赞同：0
> 
> 时间：2013-03-11T22:52:46.110
> 
> 标签：.net, vb.net, pinvoke, impersonation

我有一个 winform，我想在其中模拟不同的用户来调用 IIS 中托管的服务。我从文本框中获取用户凭据，非常基本。[我正在使用登录类型“新凭据”来使用“登录用户”来获取模拟令牌：http: //msdn.microsoft.com/en-us/library/windows/desktop/aa378184](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184(v=vs.85).aspx) (v=vs.85) .aspx （我不能使用登录类型“交互式”，因为我们的组策略不允许它）。

这工作正常，我可以使用模拟身份调用 IIS 服务，因为它具有一组新的网络凭据，但我的问题是我找不到之后如何清除模拟（另外，如果可能的话，我不想使用winapi“reverttoself”功能）。

如何恢复到原始用户网络凭据？这是我的模拟功能：

```
 Friend Shared Function GetContext(ByVal username As String, ByVal domain As String, ByVal password As SecureString) As WindowsImpersonationContext

            Dim token As IntPtr = IntPtr.Zero
            Dim passwordPtr As IntPtr = IntPtr.Zero
            Dim idContext As WindowsIdentity

            Try
                passwordPtr = Marshal.SecureStringToGlobalAllocUnicode(password)

                If NativeMethods.LogonUser( username,
                                            domain,
                                            passwordPtr,
                                            CInt(NativeMethods.LogonSessionType.NewCredentials),
                                            CInt(NativeMethods.LogonProvider.Default),
                                            token) = False Then
                    Throw New ComponentModel.Win32Exception(Marshal.GetLastWin32Error())
                End If

                idContext = New WindowsIdentity(token)

                Return idContext.Impersonate()
            Catch ex As Exception
                Throw
            Finally
                Marshal.ZeroFreeGlobalAllocUnicode(passwordPtr)
                If Not IntPtr.op_Equality(token, IntPtr.Zero) Then
                    NativeMethods.CloseHandle(token)
                End If
            End Try

        End Function 
```

因此，在使用来自该函数的 windowssimpersonationcontext 之后，如果我只是在其上调用“undo()”，它不会恢复为原始用户的网络凭据。如何清除此新凭据？

有任何想法吗？

编辑

想通了，我现在使用 LOGON32_LOGON_NETWORK_CLEARTEXT LogonType，我得到了想要的行为。在函数返回的上下文上调用 Undo() 现在会停止模拟，我可以使用凭据进行网络操作

# windows - Windows 中的 DLL 加载

> ID：15350204
> 
> 赞同：0
> 
> 时间：2013-03-11T22:53:24.427
> 
> 标签：windows

在 Windows 中，如果有两个进程每个都使用相同的 DLL，那么显然每个进程分别将 DLL 加载到其地址空间中，而在 Linux 中，共享对象被加载一次并映射到不同的进程中。有人可以向我解释 Windows 方法的优缺点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:00:19.667

我不确定差异是否如此明显。Windows 通过一次加载 DLL 并将共享部分映射到每个进程，在 DLL 的所有用户之间共享除数据段之外的所有内容。但是，DLL 中的任何全局数据都是为每个进程单独加载的，这样进程就不会无意中共享数据。如果 linux 不是很相似，我会感到惊讶，否则共享库可能会带来重大的安全风险，更不用说潜在的可靠性问题了。这里有几个参考：

从堆栈溢出：

[.dll 文件是为每个程序加载一次还是为所有程序加载一次？](https://stackoverflow.com/questions/2846310/are-dll-files-loaded-once-for-every-program-or-once-for-all-programs)

来自维基百科：

[http://en.wikipedia.org/wiki/Dynamic-link_library](http://en.wikipedia.org/wiki/Dynamic-link_library)

# linux - 在 bash 中解析 CSV 并分配变量

> ID：15350208
> 
> 赞同：4
> 
> 时间：2013-03-11T22:53:45.740
> 
> 标签：linux, bash, parsing, csv, awk

我有一个格式的 csv (Working on Bash on linux)

```
DN , MAC , Partition ,  

123 , abc , xyz  
321 , asd , asd 
```

我可以通过使用 awk 来解析它

```
eval MAC=($(awk -F "," '{print $1}' random.csv)) 
```

这是针对 CSV 中的每一列完成的，因此我可以单独调用`DN[2]`等`MAC[2]`，这是手动的并单独解析它们。

但是如何按行解析 csv？例如：如果我调用`DN`is `123`，对应的`MAC`and`Partition`也应该返回。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T23:01:51.710

尝试循环：

```
while IFS=, read dn mac partition
do 
  echo "Do something with $dn   $mac and $partition"
done < file 
```

* * *

要选择一条记录，您可以使用 case 语句：

```
P2=123
while IFS=, read dn mac partition
do 
  case $dn in
    ($P2) echo echo "Do something with $dn   $mac and $partition" ;;
    (*)   echo "Do nothing" ;;
  esac
done < file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:15:36.483

使用`awk`：

```
read -p "Gimme the DN integer >>> " i
awk -v i=$i -F' , ' '
    NR>1{
        dn[NR]=$1
        mac[NR]=$2
        partition[NR]=$3
    }
    END{
        for (a=2; a<=NR; a++)
            if (i == dn[a])
                print dn[a], mac[a], partition[a]
    }
' file.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T07:31:11.880

你也可以试试这个

file1 存储您要检索其信息的所有 DN

```
#parse.awk

BEGIN { FS="," ; OFS= "\t"}

FNR==NR{ a[$1]; next }

$1 in a { print $1,$2,$3} 
```

称呼`awk -f parse.awk file1 csvfile.csv`

# scala - 如何在这个 Scala 分配/测试/抛出序列中消除 val 重复

> ID：15350210
> 
> 赞同：0
> 
> 时间：2013-03-11T22:54:08.690
> 
> 标签：scala, boilerplate

当 properties.keySet 包含 EXPECTED_IMPORT_KEYS 中不存在的键时，此代码将引发异常。val 在代码中被引用了 3 次，

```
val unexpectedKeys = properties.keySet -- EXPECTED_IMPORT_KEYS
if (unexpectedKeys.nonEmpty) {
   throw new UnexpectedKeysException(unexpectedKeys)
} 
```

在 Scala 中是否有更优雅的方法来实现这一点？我特别想到了重复的 val 引用。这些重复可以消除吗？

知道代码完成后不需要 unexpectedKeys val 可能会有所帮助。

我正在寻找的改进是将 val 发生的次数从三减少。没有必要有一个 val，这只是我最初的表述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:29:49.867

如果你经常需要这个，只需定义一个小辅助方法：

```
def emptyOption[A, CC <: Iterable[A]](coll: B with collection.IterableLike[A, CC]) =
  if (coll.isEmpty) None else Some(coll) 
```

然后像这样使用它：

```
scala> emptyOption(Set[Int]()) foreach (coll => throw new RuntimeException(coll.toString))

scala> emptyOption(Set[Int](1)) foreach (coll => throw new RuntimeException(coll.toString))
java.lang.RuntimeException: Set(1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T23:03:58.557

你可以试试：

```
(properties.keySet -- EXPECTED_IMPORT_KEY) match {
  case residual if residual.nonEmpty => throw new UnexpectedKeysException(residual)
  case _ =>
} 
```

# c# - 如何在 Windows Phone 上发送无人参与的电子邮件

> ID：15350216
> 
> 赞同：1
> 
> 时间：2013-03-11T22:54:42.377
> 
> 标签：c#, windows-phone-7, windows-phone-8, windows-phone-7.1, windows-phone

所以我制作了这个用户输入密码并登录的应用程序，基本上是一个储物柜。我希望如果用户忘记了他的密码，一封带有重置代码的电子邮件可以发送到他们在应用程序第一次运行期间输入的电子邮件 ID。到目前为止，我找到了 EmailComposeTask，但它并没有完全符合我的要求。有没有其他方法可以发送电子邮件，或者有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:50:51.513

首先，我会在处理用户请求的服务器上执行此操作，而不是在电话本身上执行此操作 - 原因有很多，从安全基础设施开始。但是，假设您仍然想这样做。

`EmailComposeTask`对于您的特定情况，这是一个不好的选择，因为用户可以在发送消息之前编辑消息的内容。此外，如果没有在设备上携带帐户但持有设备的其他人决定重置密码，他将能够快速看到传出的重置代码。

因此，您可以使用[LiveMailMessage 之](http://windowsphonegeek.com/marketplace/components/livemailmessage)类的库。这使您能够以无人值守的方式发送电子邮件，例如：

```
MailMessage mailMessage = new MailMessage();
mailMessage.Email = "test@email.id";
mailMessage.Password = "somePassword";
mailMessage.AccountType = MailMessage.accountType.MicrosoftAccount;
mailMessage.To = "destination@email.id";
mailMessage.Subject = "Reset Link";
mailMessage.Body = "Here is the reset link";
mailMessage.Send(); 
```

您也可以快速了解为什么这也有问题 - 您必须保护本地密码存储，因为您需要指定外发邮件帐户的凭据。

# c# - 使用文本框作为值输入计算时间差

> ID：15350218
> 
> 赞同：0
> 
> 时间：2013-03-11T22:54:50.770
> 
> 标签：c#, visual-studio-2010, timespan

我有一个文本框，用户输入 16.30 我将如何获取该值并将其计算为 16 小时和 30 分钟以获得正确的时差

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:01:58.523

DateTime 用于完全限定的日期和时间。听起来你想要的是[TimeSpan.Parse](http://msdn.microsoft.com/en-us/library/se73z7b9.aspx)，它可以处理小时、分钟、秒等的时间差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T22:58:19.763

看看[DateTime.Parse](http://msdn.microsoft.com/en-us/library/1k1skd40.aspx)。

# cron - Cron 作业的新手 - 并且 Cron 作业未运行？

> ID：15350219
> 
> 赞同：1
> 
> 时间：2013-03-11T22:54:54.540
> 
> 标签：cron, cpanel

我对 cron 作业非常陌生，但是我使用的 wordpress 插件之一依赖于一个以我们希望的方式运行（自动报告而不是手动）。

它告诉我去开始一个 cron 工作并给它命令

```
wget --quiet /wp-admin/admin-ajax.php?action=THE_PLUGINS_FUNCTION 
```

好的，我做到了，我每分钟设置一次，所以整个命令看起来像这样

```
(* * * * *) wget --quiet /wp-admin/admin-ajax.php?action=THE_PLUGINS_FUNCTION 
```

当然，查询字符串不是`THE_PLUGINS_FUNCTION`，它的实际名称都是小写的。

但它似乎没有运行？

**更多信息：**

*   我们在**[http://domain.com上使用 wordpress](http://domain.com)**
*   我们需要 cron 在所有子域上运行 - **[http://test.domain.com](http://test.domain.com)**
*   Cron 作业不需要在主站点上运行
*   我们正在使用CPanel

我不确定cron 工作是什么，我也不确定 like和`--quiet`之间的区别，我再次知道关于 cron 工作的“零”`wget``curl`

如果您需要更多信息，请告诉我

**编辑：**我删除了`--quiet`并在我的电子邮件垃圾邮件文件夹中得到了这个：“ /wp-admin/admin-ajax.php?action=repagent_email_reports: Scheme missing。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T23:19:33.877

Cron 作业并不神秘。一个 cron 作业就是一个时间间隔和一个 shell 命令。在每个时间间隔，都会运行 shell 命令。

您在此处提供的 cron 作业由以下两部分组成：

*   `(* * * * *)`表示时间间隔。这是由空格分隔的五个字段。这些字段按顺序表示：分钟、小时、日、月和工作日。如果您在其中一个字段中指定了一个数字，例如`1`在分钟字段中，它只会在当前分钟为 时运行 cron 作业`1`。`10`字段中的A`hour`只会在当前时间为 时运行`10`。A`*`表示任何值都可以。五颗星表示每小时每分钟或每月每天运行一次命令。奇怪的是，如果你有`* 10 * * *`它，它将在每个月的每一天的第 10 个小时的每一分钟运行 cron 作业。

*   `wget --quiet /wp-admin/admin-ajax.php?action=THE_PLUGINS_FUNCTION`是要运行的 shell 命令。这只是一个shell命令。您可以通过在 shell 中运行 shell 命令来测试它。

您遇到的问题是您的论点`wget`不正确。to的`--quiet`参数`wget`意味着它不会产生太多的输出。`/wp-admin/admin-ajax.php?action=THE_PLUGINS_FUNCTION`是要请求的地址。由于不是有效地址`wget`而失败-缺少架构 ( ) 和主机名 ( )。`/wp-admin/admin-ajax.php?action=THE_PLUGINS_FUNCTION``http:``test.domain.com`

您可以通过将其更改为来修复您的 cron 作业：

```
(* * * * *) wget --quiet http://test.domain.com/wp-admin/admin-ajax.php?action=THE_PLUGINS_FUNCTION 
```

您需要为要运行此命令的每个子域添加一个新的 cron 作业。

您可以通过将命令粘贴到 shell 中并运行它来检查以确保您的`wget`命令正常工作。一旦您知道它工作正常，请将其添加为 cron 作业，它应该可以正常工作。

# xaml - WinRT XAML - 如何在 ListView 中水平拉伸按钮

> ID：15350221
> 
> 赞同：1
> 
> 时间：2013-03-11T22:54:56.540
> 
> 标签：xaml, winrt-xaml

我正在尝试在 ListView 中水平拉伸按钮，但我的 xaaml 代码不起作用：

```
 <ListView Grid.Row="2" ItemsSource="{Binding Path=Items}" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <Button Grid.Row="2" Background="White" BorderThickness="4,0,0,1" BorderBrush="#8c0095" Margin="32,-3,32,17" Padding="0" HorizontalAlignment="Stretch" HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch">

                            <TextBlock Text="{Binding Name}" Foreground="#8c0095" FontSize="20" Margin="15,1,0,10" FontWeight="Medium" />

                    </Button>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView> 
```

我该如何解决这个问题？

# ruby-on-rails - Rails 3.2 调试 rspec，capybara 使用 launchy，save_and_open_page 不工作

> ID：15350226
> 
> 赞同：1
> 
> 时间：2013-03-11T22:55:21.073
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, capybara

我正在尝试使用 launchy 来说明为什么我的规格不起作用但`save_and_open_page`无法打开浏览器，并且在我运行我的规格时只会导致以下错误消息：

> 抱歉，您需要安装 launchy ( `gem install launchy`) 并确保它可以打开带有`save_and_open_page`.

我已经运行`bundle install`并`bundle show launchy`产生了：

```
/Users/benjaminunger/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/launchy-2.2.0 
```

我的宝石文件：

```
group :development, :test do 
  gem "rspec-rails", "~> 2.13.0"
  gem 'guard-rspec', '0.5.5'
  gem 'growl', '1.0.3'
  gem 'ruby_gntp', "0.3.4"
  gem 'faker', '1.0.1'
end

group :development do
  gem 'annotate', '~> 2.4.1.beta'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'rb-fsevent', '0.4.3.1', :require => false
  gem 'guard-spork', '0.3.2'
  gem 'spork', '0.9.2'
  gem 'factory_girl_rails', '1.4.0'
  gem "database_cleaner", "~> 0.9.1"
  gem "launchy", "~> 2.2.0"
end 
```

部分规格文件：

```
 describe "clicking on 'Unapproved Users' link" do

    before(:all)  { User.delete_all } 
    before(:all) { 8.times { FactoryGirl.create(:not_approved) } }
    let(:unapproved) { FactoryGirl.create(:not_approved) }
    let(:admin) { FactoryGirl.create(:admin) }
    after(:all)  { User.delete_all }

    before do
      valid_signin(admin)
      visit root_path
      click_link "Unapproved Users"
      save_and_open_page
    end

    it { should have_selector('h1',    text: 'Unapproved Users') }
    it { should have_selector('title', text: 'Unapproved Users') }
    it { should have_link('approve', href: approve_user_path(User.first.id)) }
.
.
. 
```

有人有想法么？非常感谢提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T23:28:00.660

我很尴尬地说我需要停止并重新启动 spork。也许这个问题会帮助其他有同样情况的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T14:20:18.657

对我来说，我只是不习惯使用 Bundler。

我已经完成了手动 gem 安装（在我的系统上存在和设置 RVM），但我忽略了将它添加到 Gemfile。运行 Cucumber 测试时，它可能从该文件创建了一个不包含 Launchy 的上下文。

在那里添加它时，该步骤有效。

# c++ - 无法从 .txt 文件中获取最后一个 int

> ID：15350227
> 
> 赞同：-1
> 
> 时间：2013-03-11T22:55:23.730
> 
> 标签：c++, text-files, ifstream, eof

我的问题涉及从文本文件中读取整数，将它们保存到数组中，然后将数组复制到新的 .txt 文件中。

所以有一个文件“ `krol.txt`”

```
2 4
3 7
3 13
2 4
3 1 
```

问题是它永远不会保存输入 .txt 文件中的最后一个“1”。我不知道为什么。我认为它与文件中最后一个字符的 EOF 有关，但为什么它会这样工作？谁能帮我？

这是我的代码：

```
#include <iostream>
#include <fstream>
#include <cstdlib>

using namespace std;

int main() {
    ofstream outFile;
    ifstream fin;
    fin.open("krol.txt");
    int l=0;
    char ch;

    while (fin.good()) {
        fin.get(ch);

        if(ch=='\n') l++;
    }
    fin.close();

    fin.open("krol.txt");
    int temp[l][2];
    int savel=l;
    l=0;
    int i=0;

    while (fin >> (temp[l][i])) {
        i++;
        if(i==2) { 
                i=0;
                l++;
        }
    }

    outFile.open("save.txt");

    for (int i=0, j=0;j<savel;i++) {
        if (i==2) {
            i=0; j++;
        }
        outFile << temp[j][i];
    }

    outFile.close();
    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:16:38.933

这可以很好地保存所有数字。问题是，它在`save.txt`.

和

```
while (fin.good()){
...
} 
```

你把最后一行数了两次。这为您提供了两个额外的*未初始化* `int`的 s。这两个`int`s 可以显示为任何整数。

我看到两个问题。您获取行数的第一个循环应该更像

```
while (fin.get(ch)){
    if (ch == '\n')
        l++;
} 
```

如果最后一行没有 final `\n`，你可以用比你需要的少一行结束。

并且输出循环可以简化为

```
for (int j = 0; j < savel; j++){
    for (int i = 0; i < 2; i++)
        outFile << temp[j][i] << ' ';
} 
```

最后，如果你使用[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")，你应该考虑使用`std::vector`而不是普通数组。然后你不需要预先分配你的数组，只需一次就可以读取文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:15:27.697

该文件中可能有 4 个 '\n' 字符您考虑过吗？

# maven - Maven 原型插件 - 校验和验证警告

> ID：15350230
> 
> 赞同：2
> 
> 时间：2013-03-11T22:55:30.067
> 
> 标签：maven, maven-2, maven-3, maven-archetype

我在 Windows 7 上使用 Maven 3.5。环境变量“M2_HOME”和“JAVA_HOME”设置正确，并且“JAVA_HOME\bin”和“M2_HOME\bin”包含在我系统的 PATH 中。

我删除了 .m2 目录下的所有文件并从命令行执行：

**$mvn 原型：生成 -DinteractiveMode=true**

Maven成功下载了一些文件，直到显示如下：

```
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/archetype/maven-archetype/2.2/maven-archetype-2.2.pom
[WARNING] Checksum validation failed, expected d5572e8bea6f4876a086779ea878d71731d0ab36 but is 0d9d945a1b1c11a251adc893695c119eb9653cd2 for http://repo.maven.apache.org/maven2/org/apache/maven/archetype/maven-archetype/2.2/maven-archetype-2.2.pom
[WARNING] Checksum validation failed, expected d5572e8bea6f4876a086779ea878d71731d0ab36 but is 0d9d945a1b1c11a251adc893695c119eb9653cd2 for http://repo.maven.apache.org/maven2/org/apache/maven/archetype/maven-archetype/2.2/maven-archetype-2.2.pom
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/archetype/maven-archetype/2.2/maven-archetype-2.2.pom (15 KB at 36.9 KB/sec)
[WARNING] The POM for org.apache.maven.plugins:maven-archetype-plugin:jar:2.2 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
Downloading: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-archetype-plugin/2.2/maven-archetype-plugin-2.2.jar
Downloaded: http://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-archetype-plugin/2.2/maven-archetype-plugin-2.2.jar (86 KB at 207.7 KB/sec)
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Stub Project (No POM) 1
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] >>> maven-archetype-plugin:2.2:generate (default-cli) @ standalone-pom >>>
[INFO]
[INFO] <<< maven-archetype-plugin:2.2:generate (default-cli) @ standalone-pom <<<
[INFO]
[INFO] --- maven-archetype-plugin:2.2:generate (default-cli) @ standalone-pom ---
[WARNING] The POM for org.apache.maven.plugins:maven-archetype-plugin:jar:2.2 is invalid, transitive dependencies (if any) will not be available, enable debug logging for more details
Downloading: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar
Downloaded: http://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar (165 KB at 381.1 KB/sec)
ε°⌡ 12, 2013 12:43:48 AM org.sonatype.guice.bean.reflect.Logs$JULSink warn
WARNING: Error injecting: org.apache.maven.archetype.mojos.CreateProjectFromArchetypeMojo
java.lang.NoClassDefFoundError: org/apache/maven/shared/invoker/MavenInvocationException
        at java.lang.Class.getDeclaredConstructors0(Native Method)
        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2413)
        at java.lang.Class.getDeclaredConstructors(Class.java:1855)
        at com.google.inject.spi.InjectionPoint.forConstructorOf(InjectionPoint.java:245)
        at com.google.inject.internal.ConstructorBindingImpl.create(ConstructorBindingImpl.java:98)
        at com.google.inject.internal.InjectorImpl.createUninitializedBinding(InjectorImpl.java:629)
        at com.google.inject.internal.InjectorImpl.createJustInTimeBinding(InjectorImpl.java:831)
        at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive(InjectorImpl.java:758)
        at com.google.inject.internal.InjectorImpl.getJustInTimeBinding(InjectorImpl.java:255)
        at com.google.inject.internal.InjectorImpl.getBindingOrThrow(InjectorImpl.java:204)
        at com.google.inject.internal.InjectorImpl.getProviderOrThrow(InjectorImpl.java:954)
        at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java:987)
        at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java:950)
        at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1000)
        at org.sonatype.guice.bean.reflect.AbstractDeferredClass.get(AbstractDeferredClass.java:45)
        at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:84)
        at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision(InternalFactoryToInitializableAdapter.java:52)
        at com.google.inject.internal.ProviderInternalFactory$1.call(ProviderInternalFactory.java:70)
        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:100)
        at org.sonatype.guice.plexus.lifecycles.PlexusLifecycleManager.onProvision(PlexusLifecycleManager.java:138)
        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:108)
        at com.google.inject.internal.ProvisionListenerStackCallback.provision(ProvisionListenerStackCallback.java:55)
        at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:68)
        at com.google.inject.internal.InternalFactoryToInitializableAdapter.get(InternalFactoryToInitializableAdapter.java:45)
        at com.google.inject.internal.InjectorImpl$3$1.call(InjectorImpl.java:965)
        at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1011)
        at com.google.inject.internal.InjectorImpl$3.get(InjectorImpl.java:961)
        at com.google.inject.Scopes$1$1.get(Scopes.java:59)
        at org.sonatype.guice.bean.locators.LazyBeanEntry.getValue(LazyBeanEntry.java:83)
        at org.sonatype.guice.plexus.locators.LazyPlexusBean.getValue(LazyPlexusBean.java:49)
        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:253)
        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:245)
        at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo(DefaultMavenPluginManager.java:455)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:92)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.ClassNotFoundException: org.apache.maven.shared.invoker.MavenInvocationException
        at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
        ... 54 more

[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 10.952s
[INFO] Finished at: Tue Mar 12 00:43:48 IST 2013
[INFO] Final Memory: 7M/109M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate (default-cli) on project standalone-pom: Execution default-cli of goal org.apache.maven.plugins:maven-archetype-plugin:2.2:generate failed: A required class w
as missing while executing org.apache.maven.plugins:maven-archetype-plugin:2.2:generate: org/apache/maven/shared/invoker/MavenInvocationException
[ERROR] -----------------------------------------------------
[ERROR] realm =    plugin>org.apache.maven.plugins:maven-archetype-plugin:2.2
[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
[ERROR] urls[0] = file:/C:/Users/Oz/.m2/repository/org/apache/maven/plugins/maven-archetype-plugin/2.2/maven-archetype-plugin-2.2.jar
[ERROR] urls[1] = file:/C:/Users/Oz/.m2/repository/org/codehaus/plexus/plexus-utils/1.1/plexus-utils-1.1.jar
[ERROR] Number of foreign imports: 1
[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]
[ERROR]
[ERROR] -----------------------------------------------------: org.apache.maven.shared.invoker.MavenInvocationException
[ERROR] -> [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException
C:\Users\Oz> 
```

当我从以下位置手动下载有问题的文件时： [http](http://repo.maven.apache.org/maven2/org/apache/maven/archetype/maven-archetype/2.2/maven-archetype-2.2.pom) ://repo.maven.apache.org/maven2/org/apache/maven/archetype/maven-archetype/2.2/maven-archetype-2.2.pom 我注意到该文件是格式不正确（我猜 XML 应该是有效的，但它不是）。

这是一个已知的错误还是我在这里做错了什么？

# java - 打破本地依赖以对 void 方法进行单元测试

> ID：15350239
> 
> 赞同：3
> 
> 时间：2013-03-11T22:56:11.110
> 
> 标签：java, unit-testing, tdd, mockito, legacy

我正在使用 mockito 进行练习，但我对如何测试依赖于本地对象中的方法调用的方法有点困惑。请参见以下示例：

```
public class Worker {          

    public void work() {
                   Vodka vodka = new Vodka();
                   vodka.drink();
     }
} 
```

这个工人，他不做他的工作，他喜欢喝酒。但是我想添加一个测试来证明他在工作时喝酒。但是没有办法这样做，因为我必须在调用方法 work 时验证方法 drink() 是否被调用。我想你同意我的观点，这是不可能测试的，所以我需要在开始测试之前打破依赖关系。这是我的第一个疑问，您认为打破这种依赖的最佳方法是什么？如果我只是将伏特加对象的范围更改为全局，我认为不会很好（我不想将它暴露给班级的其他部分）。我想过创建一个工厂，如下所示：

```
public class Worker {          

    private VodkaFactory vodkaFactory = new VodkaFactory();

    public void work() {
                   Vodka vodka = vodkaFactory.getVodka();
                   vodka.drink();
     }
} 
```

我不确定我是否正确地打破了依赖关系，但我现在想做的是测试在执行 work() 时是否调用了方法 drink()。我试过这个没有运气：

```
@Test
    public void
    does_the_worker_drink_while_working
    () {
        VodkaFactory vodkaFactory = mock(VodkaFactory.class);
        Vodka vodka = mock(Vodka.class);
        Worker worker = new Worker();
        worker.work();
        when(vodkaFactory.getVodka()).thenReturn(vodka);
        verify(vodka,times(1)).drink();
    } 
```

我模拟了工厂，何时会检测到工厂创建了一个新的伏特加对象。但是当我验证该方法调用了 1 次方法drink() 时，mockito 告诉我：

```
Wanted but not invoked:
vodka.drink();
-> at testing_void_methods_from_local_objects.WorkerSpecification.does_the_worker_drink_while_working(WorkerSpecification.java:22)
Actually, there were zero interactions with this mock. 
```

我没有正确存根，或者我做错了什么。你能帮我完成这个测试，并澄清一下测试这些无法测试的方法的最佳方法是什么？

我知道 mockito 有一个名为 doAnswer() 的方法，它用于模拟方法调用，你认为它在这种情况下有用吗？我应该如何使用它？

**更新：**

我正在按照建议在 the`when()`之前获取调用，`work()`并且我正在尝试允许从类外部设置工厂：

```
@Test
public void
does_the_worker_drink_while_working
() {
    VodkaFactory vodkaFactory = mock(VodkaFactory.class);
    Vodka vodka = mock(Vodka.class);
    Worker worker = new Worker();
    when(vodkaFactory.getVodka()).thenReturn(vodka);
    worker.work();
    verify(vodka,times(1)).drink();
} 
```

这是现在的生产代码：

```
public class Worker {          

        private VodkaFactory vodkaFactory;

        public void work() {
                       Vodka vodka = vodkaFactory.getVodka();
                       vodka.drink();
         }

         public void setVodkaFactory(VodkaFactory vodkaFactory) {
               this.vodkaFactory = vodkaFactory;
         } 
```

我得到的例外如下：

```
 java.lang.NullPointerException
        at testing_void_methods_called_from_local_objects.Worker.work(Worker.java:9) 
```

这是说`vodka.drink()`

抱歉，我仍然对问题所在感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T02:28:06.400

你需要设置你的伏特加工厂：

```
@Test
public void
does_the_worker_drink_while_working() {
    VodkaFactory vodkaFactory = mock(VodkaFactory.class);
    Vodka vodka = mock(Vodka.class);
    Worker worker = new Worker();
    when(vodkaFactory.getVodka()).thenReturn(vodka);

    //call your setter        
    worker.setVodkaFactory(vodkaFactory);

    worker.work();
    verify(vodka,times(1)).drink();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T23:02:39.553

您的工人在这里创建自己的工厂类：

```
private VodkaFactory vodkaFactory = new VodkaFactory(); 
```

您正在创建的模拟与工作实例完全分离，因此缺乏交互。为了使其工作，必须从“外部”将工厂注入工人，例如通过[构造函数注入](http://en.wikipedia.org/wiki/Dependency_injection)。

如果这是遗留代码，您可以使用反射将私有工厂实例替换为模拟实例。

正如 JB Nizet 在评论中指出的那样，您的模拟设置在`work`已经调用之后。为了*使事情正确*，请在调用任何使用它的代码之前注入模拟并设置它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T23:07:03.440

与其说是答案，不如说是评论。除了使 factory 成为可注入的依赖项之外，您还可以确保在与 mock`when(vodkaFactory.getVodka()).thenReturn(vodka);`交互之前对其进行训练`worker.work();`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T23:03:01.290

您尝试测试的代码中存在逻辑错误。因为您已经在类`VodkaFactory`内部创建了实例`Worker`，而且您已将该字段设为私有。

`VodkaFactory`最好的解决方案是从类外部传递对的引用。

```
public class Worker {          

    private VodkaFactory vodkaFactory;

    public void work() {
                   Vodka vodka = vodkaFactory.getVodka();
                   vodka.drink();
     }

     public void setVodkaFactory(VodkaFactory vf) {
           vodkaFactory = vf;
     }

} 
```

现在，在您的 @Test 中，您可以使用setter传递您的模拟`VodkaFactory`实例。`setVodkaFactory`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T20:14:31.693

以下是一个完整的[JMockit](http://code.google.com/p/jmockit)单元测试，它独立`Worker#work()`于其`Vodka`依赖项的实现来执行该方法：

```
@Test
public void workTest(@Mocked final Vodka mockBeverage)
{
    new Worker().work();

    new Verifications() {{ mockBeverage.drink(); times = 1; }};
} 
```

# javascript - 使用 Filepicker.io 上传的所有图像的缩略图存储选项有哪些？

> ID：15350242
> 
> 赞同：0
> 
> 时间：2013-03-11T22:56:28.513
> 
> 标签：javascript, amazon-s3, filepicker.io

我正在使用 filepicker.io 将文件上传到 s3。除了存储原始图像外，我还想存储缩略图。

转换网址非常方便。我知道[这些是缓存的](https://stackoverflow.com/questions/13957492/filepicker-io-convert-and-store-vs-fpurl-conversions)，但我认为从长远来看，我应该只存储缩略图。

我尝试转换并存储在`filepicker.pickMultiple`成功回调中，但事情变得有点混乱。

我可以设置文件选择器在上传时执行此操作吗？

编辑：[这](https://stackoverflow.com/questions/14115280/store-files-to-filepicker-io-from-the-command-line)看起来是一个很好的解决方案......但仍然想知道是否有其他选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:42:00.733

您应该对在 pick() 或 pickMultiple() 调用中返回的每个 FPFile 使用 .convert() 调用。为了帮助保持回调等易于管理，请查看[https://github.com/caolan/async](https://github.com/caolan/async)

# ios6 - 如何让 YouTube 自动播放在 UIWebView 中工作？

> ID：15350247
> 
> 赞同：2
> 
> 时间：2013-03-11T22:56:58.687
> 
> 标签：ios6, youtube-javascript-api

平台：iOS 6.1。Xcode 4.6。

我正在使用 YouTube Javascript API 和 UIWebView。我可以手动点击视频缩略图开始播放就好了。但是，自动播放不起作用。正如许多人所建议的那样，我正在为 web 视图设置 mediaPlaybackRequiresUserAction = NO。没运气。

这是代码：

```
@interface VideoPlayerController : UIViewController <UIWebViewDelegate>
    @property(strong, nonatomic) IBOutlet UIWebView* webView;
@end

- (void) viewDidLoad
{
    [super viewDidLoad];    

    self.webView.delegate = self;

    NSString *template = [NSString stringWithContentsOfFile:
                       [[NSBundle mainBundle]
                        pathForResource:@"YouTubeTemplate" ofType:@"txt"]];
    NSString *htmlStr = [NSString stringWithFormat: template,
        200, 200,
        @"3G4exdlsRkY"];
    self.webView.mediaPlaybackRequiresUserAction = NO;
    [self.webView loadHTMLString:htmlStr baseURL:nil];
}

- (void) webViewDidFinishLoad:(UIWebView *)wv {
    self.webView.mediaPlaybackRequiresUserAction = NO;
} 
```

YouTubeTemplate.txt 文件是：

```
<html>
<head>
<script src="https://www.youtube.com/player_api"></script>
<style>
body, div {
    margin: 0px;
    padding: 0px;
}
</style>
</head>
<body>
  <div id="media_area"></div>
</body>
<script>
var ytPlayer = null;

function onYouTubePlayerAPIReady() {
    ytPlayer = new YT.Player('media_area', {height: '%d', width: '%d', videoId: '%@',
        events: {'onReady': onPlayerReady}
    });
}

function onPlayerReady(e) {
    e.target.playVideo();
}
</script>
</html> 
```

所以，基本上， UIWebView 显示视频缩略图。然后我必须点击它才能开始播放。自动播放不起作用。知道我可能做错了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T03:30:17.997

是的，您可以通过将 mediaPlaybackRequiresUserAction 设置为 NO 来使其自动播放。这是一个基于您的 HTML 文件的项目，它会在应用程序启动后自动播放。

[https://dl.dropbox.com/u/17350105/YoutubeAutoPlay.zip](https://dl.dropbox.com/u/17350105/YoutubeAutoPlay.zip)

**编辑**
正如评论中提到的@RajV，由于某种我无法解释的原因，您应该使用`loadRequest:`而不是。`loadHTMLString:`这是一个工作示例：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 150)];
    [webView setMediaPlaybackRequiresUserAction:NO];
    [webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"YT_Player" ofType:@"html"] isDirectory:NO]]];
    [self.view addSubview:webView];
} 
```

顺便说一句，如果你想内联播放 youtube 视频，你可以按照我几天前发布的[这个答案。](https://stackoverflow.com/a/15228772/928315)（哦，这些天我在 Youtube iFrame API 上花了很多时间......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T23:02:42.113

UIWebView 不尊重自动播放，因为 Apple 担心移动带宽使用年龄（即视频在页面加载时开始播放，并且用户在蜂窝网络上，并且它吞噬了他们的数据）。您要么必须访问 DOM（如果可能在 iOS 上，不确定）并手动触发它或解决它。

# javascript - 缩放用户浏览器时如何处理覆盖

> ID：15350251
> 
> 赞同：0
> 
> 时间：2013-03-11T22:57:49.140
> 
> 标签：javascript, jquery, css

我的网站上有一个叠加层，用户单击按钮时会激活该叠加层。

这个覆盖看起来和工作得很好。直到用户决定放大浏览器。当浏览器缩放时，因为覆盖使用位置：固定它不会滚动，用户也无法到达或看到提交按钮。

这对于一些视障用户来说是不可取的。有谁知道我如何能够即时检测到某些东西，并可能检测并重定向到静态页面上包含的表单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:03:49.903

缩放与调整窗口大小具有类似的效果，所以我认为（如果我错了，请纠正我）但您可以使用`resize()`事件来更新覆盖的宽度和高度。请参阅下面的示例。

```
$(window).resize(function(){
   $('#Overlay').css({
      height:window.innerHeight,
      width:window.innerWidth
   )};
}); 
```

**编辑**

这是一个适用于浏览器缩放和调整窗口大小的[小提琴。](http://jsfiddle.net/xR5Sc/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:44:38.280

我不确定我是否完全理解这里的问题，你有一个覆盖，但是覆盖......正在覆盖一些东西，这似乎是一个问题？

好吧，无论如何，我通常会做这样的叠加：

```
.overlay {
    background-color: #777;
    background-color: rgba(0,0,0,0.7);
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    top: 0;
    /* This is important, maybe what you're after, the content you want 
       to show has to have a higher z-index than the overlay itself! */
    z-index: 99; 
} 
```

z-index 将允许您选择元素的堆叠顺序，也许这会解决您的问题。

# iphone - iPhone 屏幕顶部状态栏的确切尺寸是多少？

> ID：15350254
> 
> 赞同：1
> 
> 时间：2013-03-11T22:58:04.770
> 
> 标签：iphone, ios

我试图以`UITableView`编程方式将一个添加到我的视图中，但是将其参数设置如下不起作用（最后一个单元格被裁剪）。

```
table = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 480) style:UITableViewStylePlain]; 
```

我尝试将高度替换为 460，效果很好。但我想知道这个栏的确切大小：

![在此处输入图像描述](../Images/1bd2f95e35c64bc6a88585f4ef1f6ca5.png)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T23:02:36.107

> 您永远不应该在代码中的任何位置硬编码高度的确切值。

只要您使用默认的 UI 组件（///等`UINavigationController`），您通常根本不需要担心状态栏的高度。这些 ViewController 应该在任何设备和任何方向上正确布局。`UITableView``UICollectionView`

如果您确实有自定义布局需求，您应该参考`safeAreaLayoutGuide`on `UIView`，而不是硬编码高度： [https ://developer.apple.com/documentation/uikit/uiview/2891102-safearealayoutguide?language=objc](https://developer.apple.com/documentation/uikit/uiview/2891102-safearealayoutguide?language=objc)

* * *

但是为了使这个答案完整 - 状态栏的大小在不同的设备和不同的方向上是不同的：

*   **直到 iPhone X**的大多数设备在纵向和横向上都有 20pt 的高度。
    （@1x、@2x、@3x 中的 20 像素、40 像素、60 像素）
*   在纵向的**iPhone X**上，它是 44pt（相应地是 44px、88px、132px）。
    在风景中，高度是不同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:49:18.023

您不应该使用设置像素尺寸来调整屏幕大小。使用您的视图框架。IE

```
table = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height) style:UITableViewStylePlain]; 
```

反正。是20分。20px 非视网膜。40px 视网膜。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T01:46:07.197

这个答案是对原始问题评论中 Rob 问题的回答：

> 因此，如果我不硬编码我的屏幕尺寸，如何自动设置它以适合我的 UIViewController？

尝试这个：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    table = [[UITableView alloc] initWithFrame:self.view.bounds style:UITableViewStylePlain];
    // all other table setup
    table.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    [self.view addSubview:table];
} 
```

这假设您希望表格视图填充视图控制器的视图。根据需要进行调整。

这将确保表视图的大小随着视图控制器的视图大小的变化而变化。这包括轮换、通话状态栏等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T00:50:15.727

您的父视图控制器会将其视图调整为正确的大小。你可以

*   让您的视图控制器加载 UIView 的子类并覆盖`-layoutSubviews`
*   使用正确的起始大小 ( `[[ MyViewClass alloc ] initWithFrame:superview.bounds]`) 和正确的自动调整大小掩码插入您的子视图。在使用 autoresizing struts & springs 时，为您的视图提供适当的尺寸是很重要的。

顺便说一句 - 硬编码状态栏高度的另一个问题：它有时是双倍高度。（当用户正在录制音频、拨打电话、使用网络共享、使用导航等时）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-14T14:52:42.017

**iPhone X 更新**

以前所有 iPhone 设备的状态栏高度都是 20pt。但在 iPhone X 上，它是 44pt。所以在实现你的 UI 时要小心。

# php - 为什么这个循环变量不会增加？

> ID：15350259
> 
> 赞同：0
> 
> 时间：2013-03-11T22:58:22.700
> 
> 标签：php, sqlite

我正在尝试编写代码来计算 sqlite 查询返回的用户数量，然后在这些用户之间拆分“账单”，但由于某种原因，我的计数器不会增加，并且我得到除以零错误。我的代码在这里：

```
<?php
session_start();
require 'database.php';
$db = new Database();
$name = $_POST['name'];
$amount = $_POST['amount'];
$due = $_POST['due'];
$gid = $_GET['gid'];
$uid = $_SESSION['id'];
$count = 0;

$users = $db->query("select * from members where(gid='$gid');");
while($data = $users->fetchArray()) {
$count++;
}

$amount = $amount / $count;
while($data = $users->fetchArray()) {
if($data['uid'] == $uid) {
    continue;
} else {
    $temp = $data['uid'];
    $db->exec("insert into bills values(NULL,'$gid','$uid','$temp','$amount','$due','false','$name');");
}
}

header('Location:grouppage.php?gid='.$gid.'');
?> 
```

有人对如何解决这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:04:13.987

不管循环似乎不起作用，如果`while(... fetchArray())`没有重置内部指针，就不能有两个循环。

但是，在这种情况下，您不需要：

```
$users = $db->query("select * from members where(gid='$gid')");
$count = $users->numRows();
if( $count == 0) die("No users found!");
$amount /= $count;
while($data = $users->fetchArray()) {
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:14:32.400

当 select 不返回任何记录时，您不处理大小写。

看看你的代码：

```
$users = $db->query("select * from members where(gid='$gid');");
while($data = $users->fetchArray()) {
$count++;
} 
```

未选择数据 - 未执行 while-body，$count 未递增并保留为零，因此在下一行中出现“除以零”错误。

```
$amount = $amount / $count; 
```

# python - Python PIL 库不工作 image.thumbnail（大小，Image.ANTIALIAS）

> ID：15350260
> 
> 赞同：0
> 
> 时间：2013-03-11T22:58:32.400
> 
> 标签：python, python-imaging-library

我正在尝试从 PIL 导入 Image、ImageChops、ImageOps 在 python 中调试此脚本

我搜索了所有问题似乎是“image.thumbnail（size，Image.ANTIALIAS）”在这里。有人有想法么？谢谢

```
image = Image.open(f_in)
print "got here"
image.thumbnail(size, Image.ANTIALIAS)
print "cannot get here"
image_size = image.size
if pad:
    thumb = image.crop( (0, 0, size[0], size[1]) )

    offset_x = max( (size[0] - image_size[0]) / 2, 0 )
    offset_y = max( (size[1] - image_size[1]) / 2, 0 )

    thumb = ImageChops.offset(thumb, offset_x, offset_y)

else:
    thumb = ImageOps.fit(image, size, Image.ANTIALIAS, (0.5, 0.5))

thumb.save(f_out) 
```

**编辑** 感谢您的快速回答标记。我想到了。

我不得不：

```
pip uninstall PIL
sudo apt-get install libjpeg8-dev 
pip install PIL 
```

我没有安装 libjpeg。不知道为什么我没有收到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:05:39.583

如果程序永远不会到达“无法到达”这一行，那么问题就是`thumbnail`抛出异常。不过，您没有在问题中提到这一点，它应该会产生错误。

PIL 使用延迟图像加载 - 在`open`调用中它可能会打开文件，但实际上并没有尝试读取整个文件。如果您的文件损坏或格式错误，一旦您尝试使用图像，就像`thumbnail`正在做的那样。

# php - PHP 和 MYSQL 通过链接更新一行

> ID：15350261
> 
> 赞同：0
> 
> 时间：2013-03-11T22:58:34.067
> 
> 标签：php, mysql

嘿伙计们，我正在处理一个网页，但我不知道为什么我不能从我的数据库中更新一个值并显示它。

这是我的 PHP 页面显示链接的代码。点击它会调用另一个 PHP 程序进行更新，然后在显示 PHP 程序中重新显示。

```
echo "<td class='text pad center'>".$row['deleted']."&nbsp;&nbsp;</td>";
if ( $row['deleted'] == 'y' ) {
    echo '<td class="text center"><a href="delete.php?id='.$row["id"].'">Restore</a>;&nbsp;&nbsp;</td>';
} else {
    echo '<td class="text center"><a href="delete.php?id='.$row["id"].'">Delete</a>;&nbsp;&nbsp;</td>';
} 
```

在我的更新程序中，我有这段代码将在我的数据库中执行更新，然后发送要重新显示的新值。

```
$id=$_GET['id'];

$sql_query = "SELECT * FROM tablename WHERE id = '$id'";
//Run our sql query
$result = mysqli_query($link, $sql_query) or die('select query failed'. mysqli_error($link));

while ($row = mysqli_fetch_assoc($result)) {
    if ( $row['deleted'] == 'y' ) {
        $change = "UPDATE inventory SET DELETED = 'n' WHERE id = '$id'";
    } else {
        $change = "UPDATE inventory SET DELETED = 'y' WHERE id = '$id'";
    }
    echo "$change";
    mysqli_query($link, $change) or die('select query failed'. mysqli_error($link));
}

//Free resultset (optional)
mysqli_free_result($result);

//Close the MySQL Link
mysqli_close($link);

header("Location: display.php"); 
```

我找不到我的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:11:39.500

由于两个原因，您的代码目前面临很大风险。首先，经典的[SQL 注入问题](http://xkcd.com/327/)，其次[从不使用 GET 来改变事物](http://blog.mischel.com/2008/08/08/hey-you-deleted-my-files/)。此外，您的代码违反了相当多的 DRY。

试试这个重写：

```
echo "<td class='text pad center'>".$row['deleted']."&nbsp;&nbsp;</td>";
echo '<td class="text center"><a href="delete.php?id='.$row["id"].'">'.($row['deleted']=='y'?'Restore':'Delete').'</a>;&nbsp;&nbsp;</td>'; 
```

和：

```
// IMPORTANT: Make sure you didn't forget to connect!
$id=mysqli_real_escape_string($link,$_GET['id']);
mysqli_query($link,"UPDATE tablename SET deleted=IF(deleted='y','n','y') WHERE id='$id'")
    or die('update query failed'. mysqli_error($link));
header("Location: display.php"); 
```

请注意，您应该真正将`0`and`1`用于布尔值，而不是`n`and `y`。如果你这样做，你可以用to toggle替换`deleted=IF(...)`这块。`deleted=1-deleted`

# c++ - pow（num，2）的效率？

> ID：15350262
> 
> 赞同：1
> 
> 时间：2013-03-11T22:58:35.637
> 
> 标签：c++, math, loops, floating-point

我需要多次计算浮点数的平方。（到 10^8 的数量级）

哪个更好（因为时间是一个巨大的限制）：

```
 pdt=pow(num,2);

      OR

 pdt=num*num 
```

或者他们真的一样吗？

**编辑：在相当大的输入上检查两种样式时，我的处理器给出了相互矛盾的结果。**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T23:02:40.473

`num*num`将至少与`pow(num, 2)`任何非反常的 C/C++ 实现一样快，因为没有`pow`至少一个浮点乘法或更耗时的操作就没有实现。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T23:05:26.407

使用没有优化 num * num 的 gcc 会更快，因为`pow`会导致函数调用。在`-O2`它们输出相同的 asm 时（对于 x86）：

```
float numpow(float x){
    return pow(x, 2);
}

float mulpow(float x){
    return x*x;
}

compiled with g++ -S -O2 -c 

__Z6numpowf:
Leh_func_begin1:
    pushq   %rbp
Ltmp0:
    movq    %rsp, %rbp
Ltmp1:
    mulss   %xmm0, %xmm0
    popq    %rbp
    ret
Leh_func_end1:

...
__Z6mulpowf:
Leh_func_begin2:
    pushq   %rbp
Ltmp2:
    movq    %rsp, %rbp
Ltmp3:
    mulss   %xmm0, %xmm0
    popq    %rbp
    ret 
```

# c++ - 在非阻塞模式下的 TThread 中使用 TClientSocket 时，OnConnect 事件未触发

> ID：15350267
> 
> 赞同：1
> 
> 时间：2013-03-11T22:59:00.077
> 
> 标签：c++, c++builder, tthread, tclientsocket

我正在尝试`TClientSocket`在多线程 C++ Windows 应用程序中以非阻塞模式使用 Borlands 组件。我正在创建多个线程（派生自 的类`TThread`），每个线程都创建自己的`TClientSocket`对象。然后我分配线程类的成员函数作为套接字的`OnConnect`,`OnDisconnect`和事件的事件处理程序。`OnSocketError`我在这里遇到的问题是，每当我`TClientSocket::Open()`从函数内部调用`TThread::Execute()`函数时，`OnConnect`事件都不会触发。但是，当我在调用`Open()`函数之前从 VCL 线程调用函数时`TThread::Execute()`，所有事件都会触发，我可以根据需要使用线程-套接字组合。现在我还没有在文档中读到任何内容`TClientSocket`在线程内使用时不应在非阻塞模式下使用，但在我看来，我尝试使用此类的方式在概念上可能存在问题。Borland 文档在这个主题上相当糟糕，这些组件现在已被弃用，因此很难获得可靠的信息。尽管已被弃用，但我必须使用它们，因为我拥有的 Builder 6 包中没有其他选择。任何人都可以告诉我是否有正确/错误的使用方式`TThread`和非阻塞`TClientSocket`组合。我从来没有在使用它作为 VCL 线程的一部分时遇到过问题，也从来没有遇到过使用 TServerSocket 的问题，我真的不明白为什么有些事件没有触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:08:32.560

`TClientSocket`在非阻塞模式下，内部使用隐藏窗口来接收套接字事件。如果在 a 中使用非阻塞`TClientSocket`，`TThread`则必须在`TThread::Execute()`方法内部实现消息循环，以便将这些消息分派到套接字的窗口。此外，作为基于窗口的，这也意味着套接字消息被发送到实际创建套接字窗口的线程，因此您必须确保`TClientSocket`从`TThread::Execute()`方法内部打开。

顺便说一句，BCB6 附带 Indy 8，这是一个替代方案。您还可以安装最新版本的 Indy，甚至是 ICS 或 Synapse 等其他第三方库。

# client - 在 Windows 中创建 WebSphere MQ FTE 代理的要求

> ID：15350273
> 
> 赞同：1
> 
> 时间：2013-03-11T22:59:49.443
> 
> 标签：client, ibm-mq, websphere-mq-fte

我正在使用 WebSphere MQ v7.5 FTE 产品设计一个新的文件传输基础架构，并且想知道在 Windows 框中创建 FTE 代理，基本的最低要求是什么？它是否需要安装 MQ v7.5 服务器版本，还是可以与 MQ v7.5 客户端库一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T19:47:28.647

您至少需要一个 WMQ 队列管理器来充当所有代理的队列中心。常规 FTE 代理可以基于客户端。通常，它们位于文件端点的本地，并直接访问底层文件系统。对于大多数代理，与中央队列管理器的客户端连接效果很好。例外情况是传输量非常高的节点，在这种情况下，可能需要使用本地队列管理器。

例外是“协议桥”代理，它是与远程 FTP、SFTP 和 FTPS 服务器通信的代理。这些必须与队列管理器位于同一主机上。

简短的回答：在您的 Windows 机器上，客户端代理是最低要求。只需将其配置指向网络上某处的队列管理器。

# php - 在 php echo 语句中调用带有参数的 javascript 函数

> ID：15350274
> 
> 赞同：1
> 
> 时间：2013-03-11T22:59:53.810
> 
> 标签：php, javascript

我正在尝试在 php 中调用一个 javascript 函数，该函数将弹出一个确认按钮。如果用户按下是，那么它将继续到页面，否则它将停留在同一页面上。我写了它，但我不知道有什么问题。

php:

```
echo "<a href='edit_members.php?id=$studentid'>Edit</a> or <a href=\"javascript:deleteMembers('del_member.php', '$studentid');\">Delete</a><br/><br/>"; 
```

javascript（我把它放在标签之前）：

```
<script type="text/javascript">
    function deleteMembers(url, id) {
       var deleteMemberConfirmation = confirm("Are you sure you want to delete?");
       if(deleteMemberConfirmation) {
         window.location="http://mvcsf.com/admin/"+url+"?"+id;
        }
       else {
         window.location="http://mvcsf.com/admin/view_members.php";
       }     
     }
</script> 
```

`ERROR_REPORTING(E_ALL);`我在页面顶部启用了，但它没有返回任何内容。我做错了什么？

编辑：我将变量名称更改为 deleteMemberConfirmation，但仍然没有任何效果。我只是单击链接，但没有任何反应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:01:47.250

`delete`是 javascript 中的保留关键字，而不是有效的变量名！

你得到了错误的报价：

```
"<a href=\"javascript:deleteMembers('del_member.php', '$studentid');\">"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T23:01:57.197

您在 HTML*和*JS`'`中用作指示符。您将不得不在一个地方和其他地方使用它。*`"`*

 *工作版本将类似于：

```
echo "<a href=\"edit_members.php?id=$studentid\">Edit</a> or <a href=\"javascript:deleteMembers('del_member.php', '$studentid');\">Delete</a><br/><br/>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T23:10:59.487

对于您的回声，使用单引号`'`和双引号时要小心`"`。当一个单引号遇到另一个单引号时，它将被关闭，除非它像这样被转义`\'`。双引号也是如此。

我不是 100% 确定你是否可以在**href**中使用 javascript ，但另一种解决方案是在调用 javascript 函数时使用 onclick，并且只使用`javascript:void(0)`or`#`作为**href**属性。

```
echo "<a href='edit_members.php?id=$studentid'>Edit</a> or <a href='javascript:void(0)' onclick=\"deleteMembers('del_member.php', '$studentid');\">Delete</a><br/><br/>"; 
```

至于delete，把delete字改成别的（即：）`del`，因为**delete**是javascript的保留字。

```
<script type="text/javascript">
function deleteMembers(url, id) {
    var del = confirm("Are you sure you want to delete?");
    if(del) {
        window.location="http://mvcsf.com/admin/"+url+"?"+id;
    }
    else {
        window.location="http://mvcsf.com/admin/view_members.php";
    }
}
</script> 
```*

# google-app-engine - App Engine 拉取队列如何同时为空，但仍有最旧的任务？

> ID：15350282
> 
> 赞同：0
> 
> 时间：2013-03-11T23:01:22.113
> 
> 标签：google-app-engine, task-queue, pull-queue

我很困惑我的队列是否真的是空的。从这个角度来看，名为“squid-pri-0”的队列表示队列中有 14 个任务：

![在此处输入图像描述](../Images/03e447960432dbcd4eb56a380d377bf0.png)

但是当我点击它时，它说它是空的（见下文）。但是，我也看到了一个不是空白的“旧任务”，让我觉得它并不是真正的空白。我应该相信哪些数字/统计数据？

![在此处输入图像描述](../Images/9582cba96fe95d25b1d6f273d0ab0fa7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:44:49.427

你应该相信队列是空的。当您检查队列时，控制台会以更详细的方式查找任务，并且会注意到概览近似值并正确地告诉您队列中没有任何内容。

# javascript - Windows XP 上的 Chrome 中不显示 3D 变换

> ID：15350293
> 
> 赞同：1
> 
> 时间：2013-03-11T23:02:05.640
> 
> 标签：javascript, html, css

我有一个包含一系列立方体的页面。这些立方体使用 CSS 进行 3D 转换。

它们在 Windows 7 上的 Chrome 中显示良好，但在 Windows XP 上的 Chrome 中，我看到的只是白色背景。两者都运行最新版本的 Chrome。

[在 jsfiddle 上查看完整页面](http://jsfiddle.net/rajkumart08/V8Xdn/1/embedded/result/)

```
<div class="cube" style="-webkit-transform: translateZ(-32.5px);">
    <div class="front" style="-webkit-transform: translateZ(32.5px);">
        <img src="search.png" width="65" height="65">
    </div>
    <div class="back" style="-webkit-transform: rotateX(-180deg) translateZ(32.5px);">
        <img src="search.png" width="65" height="65">
    </div>
    <div class="right" style="-webkit-transform: rotateY(90deg) translateZ(32.5px);">               
        <img src="/search.png" width="65" height="65">
    </div>
    <div class="left" style="-webkit-transform: rotateY(-90deg) translateZ(32.5px);">
        <img src="search.png" width="65" height="65">
    </div>
    <div class="top" style="-webkit-transform: rotateX(90deg) translateZ(32.5px);">
        <img src="search.png" width="65" height="65">
    </div>
    <div class="bottom" style="-webkit-transform: rotateX(-90deg) translateZ(32.5px);">
        <img src="search.png" width="65" height="65">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T18:17:54.720

只有启用 GPU 加速，Chrome 才会正确渲染 3D css。如果您在 safari for windows 上测试相同的代码，它应该可以工作。

要查看您的 chrome 是否启用了 GPU 加速，请在地址栏中输入 about:GPU 并查看它的内容。

[http://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome](http://www.chromium.org/developers/design-documents/gpu-accelerated-compositing-in-chrome)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T11:46:48.663

嗯，也许您没有启用 3D 渲染的 GPU，或者您的图形驱动程序不支持它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:57:35.617

你试过现代化吗？

转到此页面 [http://modernizr.com/download/#-flexboxlegacy-csstransforms3d-shiv-cssclasses-addtest-prefixed-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes-load](http://modernizr.com/download/#-flexboxlegacy-csstransforms3d-shiv-cssclasses-addtest-prefixed-teststyles-testprop-testallprops-hasevent-prefixes-domprefixes-load)

点击下面的下载。

在您的页面上使用 JavaScript。

如果它会按照我想的方式工作，那么在 Chrome 中的 Win7 机器上，html 标签应该有一个类，`csstransforms3d`而在 Chrome 中的 WinXP 机器上，html 标签应该有一个类`no-csstransforms3d`

我不知道modernizr / chrome是否智能看，如果3d加速可用并将其反映在适当的css类中

## 编辑

这是一个小提琴 [http://jsfiddle.net/uSbYL/1/](http://jsfiddle.net/uSbYL/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T11:08:33.017

Follwing 将适用于 chrome 和 firefox CSS 代码

```
.flip-container {
  perspective: 1000;
  -webkit-perspective: 1000;
}
  /* flip the pane when hovered */
  .flip-container:hover .flipper, .flip-container.hover .flipper {
    transform: rotateY(180deg);
    -webkit-transform: rotateY(180deg);
  }

.flip-container, .front, .back {
  float: left;
  height: 179px;
  margin-bottom: 49px;
  margin-left: 31px;
  width: 258px;
}

/* flip speed goes here */
.flipper {
  transition: 0.6s;
  transform-style: preserve-3d;
  -webkit-transition: 0.6s;
  -webkit-transform-style: preserve-3d;
  position: relative;
}

/* hide back of pane during swap */
.front, .back {
  backface-visibility: hidden;
  -webkit-backface-visibility:hidden; /* Chrome and Safari */
  -moz-backface-visibility:hidden; /* Firefox */
  -ms-backface-visibility:hidden;
  position: absolute;
  top: 0;
  left: -42px;
}

/* front pane, placed above back */
.front {
  z-index: 2;
}

/* back, initially hidden pane */
.back {
  transform: rotateY(180deg);
  -webkit-transform: rotateY(180deg);
} 
```

HTML 代码

```
<div class="flip-container" ontouchstart="this.classList.toggle('hover');">
  <div class="flipper">
    <div class="product-box front">
       #front content
    </div>
    <div class="product-box back">
      #back content
    </div>
  </div>
</div> 
```

# php - Login.php 返回空白

> ID：15350295
> 
> 赞同：-2
> 
> 时间：2013-03-11T23:02:20.463
> 
> 标签：php, mysql, syntax-error

我的 login.PHP 页面返回空白。我试过改变我能想到的一切。我知道我可能只是缺少一些简单的东西。它应该返回错误。这是 login.PHP 的代码（我还打开了一个单独的错误报告器来查看我得到了什么错误并且我得到了“array()”

```
include 'core/init.php';

if (empty($_post) === false){
    $username = $_post['username'];
    $password = $_post['password'];

    if (empty($username)=== true || empty($password) === true) {
        $errors[] = 'You need to enter a username and password.';
    }
    else if (user_exists($username) ===false) {
        $errors[] = 'We can\'t find that username. Have you registered?';
    }
    else if (user_active($username) ===false){
        $errors[] = 'You haven\'t activate your account yet.';
    } 
}

print_r($errors);
ini_set('display_errors',1); 
error_reporting(E_ALL); 
```

提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:16:27.383

1.  使用 $_POST 而不是 $_post
2.  使用`$username = isset($_POST["username"]) ? $_POST["username"] : false;`然后问`if ($username)`
3.  在询问 DB 之前不要忘记清理输入

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:05:51.813

```
if (empty($_post) === false){
$username = $_post['username'];
$password = $_post['password']; 
```

应该

```
if (empty($_POST) === false){
$username = $_POST['username'];
$password = $_POST['password']; 
```

尝试添加更多详细信息以查看 if 语句的结束位置，或者`var_dump($_POST)`var_dump($errors)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T23:16:04.907

$_POST['...'] - 总是用户大写，

$_GET['...'] - 也是

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T23:12:58.393

尝试使用 $_POST（全部大写）。

函数不区分大小写，但变量不区分大小写。

# javascript - 使用 javascript 或 jquery 通过标签属性获取文本

> ID：15350308
> 
> 赞同：-3
> 
> 时间：2013-03-11T23:03:21.010
> 
> 标签：javascript, html

html:

```
 <h1 something="true">I am text</h1> 
```

现在我想做的是用 something="true" 提取文本，但我不知道我该怎么做

如果某物是 id 它会更简单，但如果它不是......我们仍然可以使用 getElementBy 方法提取文本。

**Jsfiddle**演示将不胜感激。

编辑：我想提取我是文本的词

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T23:15:28.200

如果您不使用 jQuery，则可以使用 document.querySelector。

```
var text = document.querySelector('[something="true"]').innerHTML; 
```

[JSFiddle](http://jsfiddle.net/nathggns/WErpr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:04:03.540

只需使用[.attr](http://api.jquery.com/attr/)，但您应该使用 html5`data-something`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T23:09:47.227

使用`data-`属性可能会更好：

```
<h1 data-something="true">I am text</h1> 
```

访问该值只需：

```
var getSomething = $('h1').data('something'); 
```

见[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

# php - 从字符串中提取启发式（模糊）日期？

> ID：15350309
> 
> 赞同：5
> 
> 时间：2013-03-11T23:03:46.380
> 
> 标签：php, regex, algorithm, date, heuristics

我在*启发式*地解析包含日期但格式相当随意（未知）的文本字符串时遇到问题。

```
function parseDateStr($text) {
    $cleanText = filter($text);
    # ...
    $day = findDay($cleanText);
    $month = findMonth($cleanText);
    $year = findYear($cleanText);
    # .. assert constraints, parse again or fail
    return sprintf('%04d-%02d-%02d', $year, $month, $day)
} 
```

输入文本是**英语**句子加上任意语法符号（如 \W regexp 类的子集）。该算法的任务是仅在过滤掉任何与日期无关的潜在垃圾（嘈杂）词后提取日期。允许算法失败并且不返回结果。如果在字符串中仅找到两个连接数字 (MM) 和四个其他数字 (YYYY) 的两个组合 - 假设两个数字对应于日期的月份，并且日期被视为 01（第一天）这个月）。结果以“YYYY-MM-DD”（SQL）格式（DATE 类型）给出日期。

**我的想法是继续使用preg_replace** & co设计一系列过滤器。此外，对 $year、$day 的范围使用逻辑约束，使用 $month 的词汇等，但如果可以想到或已经存在类似但更优雅的解决方案或方法，我不会感到惊讶。如果是这样，请让我知道他们。如果可以指出任何批评者或潜在的陷阱，我也将不胜感激。

**与类似问题的关系：**

请注意，该问题与更基本的日期解析问题不同：

*   [PHP 解析日期字符串](https://stackoverflow.com/questions/1279061/php-parse-date-string)
*   [如何解析任何日期格式](https://stackoverflow.com/questions/7505514/how-to-parse-any-date-format)

因为就我而言，我无法指定或确定字符串的格式。另一方面，以下问题讨论了类似的任务：

*   [从Python中的字符串中提取日期](https://stackoverflow.com/questions/3276180/extracting-date-from-a-string-in-python)
*   [从php中的几个字符串变量中提取多个日期格式](https://stackoverflow.com/questions/8410843/extract-multiple-date-format-from-few-string-variables-in-php?rq=1)
*   [从PHP中的字符串中提取日期](https://stackoverflow.com/questions/8034833/extracting-date-from-a-string-in-php)

我不确定最后一个是否重复，我最终不清楚 OP 想要解析什么（尽管**checkdate**和**date_parse**似乎部分有用）。但是关于整个“mokey business”的第一个问题也适用于我的案例，并且已通过模糊解析解决，如

```
dparser.parse("monkey 2010-07-10 love banana",fuzzy=True) 
```

最后，第二个包含了很好的正则*表达式*（几乎是“模糊的”）。

*优雅*的PS我知道代码相当紧凑（性能没有明显的限制，所以使用“hacky”正则表达式是可以的）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T02:17:54.460

# 时间库

好吧，**date_parse**的表现**非常非常**好，了解**原因**非常有教育意义。PHP 函数[**date_parse**](http://www.php.net/manual/en/function.date-parse.php)是[*ext/date/lib*](https://github.com/php/php-src/blob/master/ext/date/lib/parse_date.re)或*timelib*的一部分，并且显然（尽管缺乏适当的文档）它在 C 中的实现（由 Derick Rethans 编写并从 Zend Engine 宏部分与声明一起调用）使它成为一个聪明的工具：

1.  **date_parse**已经很*模糊*：文档页面上有很多警告（和抱怨）函数容忍和解析太多但显然它实际上是一个特性而不是一个错误（否则应该使用**date_parse_from_format**或相应的*DateTime::createFromFormat( )* )
2.  **date_parse**以相对智能的方式使用（大量）正则表达式（基于**[re2c](http://re2c.org/)**）
3.  除了过滤这个“扫描仪”之外，它还会查找单词和日期格式的所有可能组合（从已知月份和时区列表中），最后，通过“单独”查找 YYYY、MM 和 DD 来进行“盲目”猜测"（与我需要做的非常相似）。
4.  **date_parse**是一个真正编译的“扫描器”，它带有前瞻逻辑和错误报告，可以由用户进一步处理（没有例外，只有嵌套结果数组中的消息）。
5.  甚至还有一个包装了 timelib 的 C 代码的[python 包](https://pypi.python.org/pypi/timelib)（所以我什至不确定在“解析猴子业务” *timelib*或*python-dateutil*中哪个最终更好）

# 测试和示例

就我而言，我未能从我的数据集中找到任何未被**date_parse**解析的输入示例，即：

```
echo FuzzyDateParser::fromText('banana 1/2/3');
echo FuzzyDateParser::fromText('Joe Soap was born on 12 February 1981'));
echo FuzzyDateParser::fromText('2005 Feb., reprint'));
echo FuzzyDateParser::fromText('!'); # will fail to parse, producing an empty string.
echo FuzzyDateParser::fromText('monkey 2010-07-10 loves bananas and php'); 
```

FuzzyDateParser 类的代码可以在这个[gist](https://gist.github.com/ewiger/5139596)中找到。它可以作为一个模板来处理错误并实现从**date_parse** 结果回退到自己的自定义逻辑（我最终不必为我的案例做）。

# java - Arraylist 对比较？

> ID：15350312
> 
> 赞同：1
> 
> 时间：2013-03-11T23:03:58.910
> 
> 标签：java, arraylist

目前我有一个 arrayList 包含几个值对。我正在尝试以矩阵格式打印它们，如下例所示。每个奇数是矩阵中的位置，后面的数字是值。该位置在计数器中上升，如果数组中不存在该数字，则将 0 放置在其位置。有点难以解释。

```
arraylist contains (1, 10, 2, 90, 4, 9, 7, 2, 11, 4, 14, 45) 
```

输出：

```
0 10 90 0
9 0  0  2
0 0  0  4
0 0  45 0 
```

我试过了：

```
int position, value;
int size = 16;

for (int i = 0 ; i < size ; i += 2) {
    position = matrix.get(i);

    if(position == i){
        value = matrix.get(i+1);
        System.out.print(value);
    } else {
        System.out.print("0");

      }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:12:23.817

您想读取数组中的数字不是一个接一个，而是两个接两个。试试这个（这不足以解决你的问题，但这会有所帮助）：

```
for (int i = 0 ; i < size ; i += 2) {
    int position = matrix.get(i);
    int value    = matrix.get(i+1);

    ... // Deal with them
} 
```

要使用正确的值实际填充矩阵，您应该使用`Map<Integer, Integer>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:11:52.227

`for`您可以在循环中增加 1 以上，例如

```
for(int i = 0, size = matrix.size( ); i < size ; i = i+2)
{
    ...
} 
```

# jquery - Rails ajax 调用未正确呈现我的 format.js 文件

> ID：15350313
> 
> 赞同：0
> 
> 时间：2013-03-11T23:03:59.593
> 
> 标签：jquery, ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试模仿这个[http://samuelmullen.com/2011/02/dynamic-dropdowns-with-rails-jquery-and-ajax/](http://samuelmullen.com/2011/02/dynamic-dropdowns-with-rails-jquery-and-ajax/)来使用 ajax 制作动态下拉列表。

每次我更改我的第一个下拉列表时，它都会调用我的 ajax 函数并进入正确的 js.erb 文件，如下面的日志条目所示，但它不会在控制台中记录任何内容。

日志条目：

```
"available slots = 20"

Started POST "/arrangements/timeslots_by_location" for 127.0.0.1 at 2013-03-11 17:59:25 -0500
Processing by ArrangementsController#timeslots_by_location as JS
  Parameters: {"id"=>"3"}
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
   (2.8ms)  SELECT COUNT(*) FROM `timeslots` WHERE (location_id = '3' AND arrangement_id is null)
  Timeslot Load (0.4ms)  SELECT `timeslots`.* FROM `timeslots` WHERE (location_id = '3' AND arrangement_id is null) ORDER BY timeslot ASC
  Rendered arrangements/timeslots_by_location.js.erb (6.3ms)
Completed 200 OK in 19ms (Views: 11.3ms | ActiveRecord: 3.6ms)
"available slots = 20"

Started POST "/arrangements/timeslots_by_location" for 127.0.0.1 at 2013-03-11 17:59:25 -0500
Processing by ArrangementsController#timeslots_by_location as JS
  Parameters: {"id"=>"3"}
  User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 1 LIMIT 1
   (0.4ms)  SELECT COUNT(*) FROM `timeslots` WHERE (location_id = '3' AND arrangement_id is null)
  Timeslot Load (0.5ms)  SELECT `timeslots`.* FROM `timeslots` WHERE (location_id = '3' AND arrangement_id is null) ORDER BY timeslot ASC
  Rendered arrangements/timeslots_by_location.js.erb (9.4ms)
Completed 200 OK in 22ms (Views: 16.8ms | ActiveRecord: 1.3ms) 
```

/views/arrangements/timeslots_by_location.js.erb

```
console.log('testing');
$("#arrangement_timeslot_id").html('<option value="2">TEST</option>'); 
```

在萤火虫中，如果我从控制台展开 post 调用，我单击响应选项卡并看到我的 javascript 代码，但它实际上并没有登录到控制台或将我的选项添加到我的下拉列表中。

/controllers/arrangements_controller.rb

```
# Gets the available timeslots based on the location selected
  def timeslots_by_location
    if params[:id].present?
        @available_timeslots = Timeslot.where('location_id = ? AND arrangement_id is null', params[:id]).order('timeslot ASC')
    else
        @available_timeslots = []
    end
    p "available slots = #{@available_timeslots.size}"

    respond_to do |format|
        format.js 
    end
  end 
```

意见/安排/_form.html.erb

```
<%= collection_select(:arrangement, :location_id, Location.all, :id, :name) %> 
```

资产/javascripts/arrangements.js

```
// Setup ajax calls to hit the format.js respond_to in my controller
jQuery.ajaxSetup({
    'beforeSend': function(xhr) { 
        xhr.setRequestHeader("Accept", "text/javascript");
    }
});    

// function that gets called when the location dropdown changes
$.fn.subSelectWithAjax = function() {
  var that = this;

  this.change(function() {
      $.post('/arrangements/timeslots_by_location', {id: that.val()}, null, "script");
  });
}

// Call the subSelectWithAjax function when the location dropdown changes
$(document).ready(function() {
    $("#arrangement_location_id").subSelectWithAjax();
}); 
```

这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:28:51.267

我想到了。我没有发布我的整个 timeslots_by_locations.js.erb 文件。

这个片段在那里：

```
console.log('test = <%= options_for_select(@available_timeslots.map {|sc| [sc.timeslot, sc.id]}).gsub(/n/, '').html_safe %>'); 
```

并且`.gsub(/n/, '')`应该是`.gsub(/\n/, '')`这样导致`<option ..`标签成为`<optio ..`.

# javascript - 如何使用 JavaScript 防止手指触摸（在触摸屏上）？

> ID：15350317
> 
> 赞同：1
> 
> 时间：2013-03-11T23:04:11.230
> 
> 标签：javascript, touch

是否可以使用 JavaScript 防止触摸屏显示器、平板电脑、手机上的触摸手势？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T23:09:22.960

您可以通过阻止`touchstart`事件来做到这一点。如果您在页面范围内执行此操作，您可能希望在正文上执行此操作。

```
var body = document.body;
element.ontouchstart = function(e) {
    e.preventDefault();
} 
```

您还可以`window.addEventListener`用于页面范围的影响。

```
window.addEventListener('touchstart', function(e) {
    e.preventDefault();
} 
```

这也将允许其他人参与到`touchstart`事件中。

## jQuery

也可以通过该`on`方法使用 jQuery。

```
$('body').on('touchstart', function(e) {
    e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:10:14.200

我过去曾使用修改后的[jQuery Block UI](http://archive.plugins.jquery.com/project/blockUI)来执行此操作。

# ruby-on-rails - ActiveAdmin has_many 关系不保存新记录？

> ID：15350318
> 
> 赞同：1
> 
> 时间：2013-03-11T23:04:12.623
> 
> 标签：ruby-on-rails, activeadmin

我有关系 ContentRelease has_many pages。以下 activeadmin 注册模型允许我在 content_release 中编辑页面的属性，但不能为内容发布创建新页面。没有错误，我收到一条成功消息，但没有保存新页面。我究竟做错了什么？

```
ActiveAdmin.register ContentRelease do

  form do |f|
    f.actions

    f.inputs "Details" do
      f.input :active_at
    end

    f.inputs "Pages", :class => 'pages-list' do
      f.has_many :pages do |page|

        page.inputs "Associated Look" do
          page.input :title
          page.input :content_release, :as => :select, :collection => ContentRelease.list
          page.input :look, :as => :select, :collection => Look.current
          page.input :share_url
        end

      end
    end

    f.inputs "Looks", :class => 'looks-list' do
      f.has_many :looks do |look|
        look.inputs do
          look.input :title
        end
      end
    end

    f.actions

  end 
```

# less - 创建一个可以在 LESS 中添加一些东西的 mixin

> ID：15350321
> 
> 赞同：1
> 
> 时间：2013-03-11T23:04:40.690
> 
> 标签：less

我正在尝试创建一个 mixin，它可以立即在 wordpress 中制作与类别相关的颜色。但是，它不起作用。当我尝试以我的风格创建 .category-foo(#000000){} 行时，它要么没有转换为 .css，要么什么都不做。但是，当我将 .category(...){} 更改为 .category-foo 时，它在主样式中声明为 .category-foo 时仍然不起作用。我现在在问，是否有可能在 LESS 中创建这样一个 mixin，允许我根据类别名称添加奖励变量？比如 .category-a（黑色）、.category-b（白色）。这对我来说真的是一种祝福。

```
.category(@catcolor : @white){
    h2{color: @catcolor;}
        a, .foo p, .foo a{color:@catcolor;
            &:hover,&:active{color:lighten(@catcolor, 10%);}
        }
        img{.transition(background-color 0.8s ease-out);
            &:hover,&:active{background-color:@catcolor;}
        }
        .featured-image{.transition(background-color 0.8s ease-out);
            &:hover,&:active{background-color:@catcolor;}
        }
        ::-moz-selection{background-color:@catcolor; color:@white;}
        ::selection{background-color:@catcolor; color:@white;} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T02:05:27.973

您的目标似乎仍然有两种可能性。

## #1 父类别选择器

如果我正确理解您的评论，您希望能够将类别名称添加到选择器，该选择器还将根据该类别类设置其中的 css 样式。如果是这样，这是您示例的简化示例：

**较少的**

```
//mixin defined
.category(@catName: a, @catColor: white) {

  //add category name to selector
  .category-@{catName} {
    h2 {color: @catColor;}
    a, .bar p, .bar a{color:@catColor;
            &:hover,&:active{color:lighten(@catColor, 10%);}
        }
  }
}

//call it
.category(foo, blue); 
```

**CSS 输出**

```
.category-foo h2 {
  color: #0000ff;
}
.category-foo a,
.category-foo .bar p,
.category-foo .bar a {
  color: #0000ff;
}
.category-foo a:hover,
.category-foo .bar p:hover,
.category-foo .bar a:hover,
.category-foo a:active,
.category-foo .bar p:active,
.category-foo .bar a:active {
  color: #3333ff;
} 
```

## #2 类别特定的 Mixin CSS 生成器

也许您不想要一个实际的类别类作为您的父选择器，而只是想根据特定的类别名称生成代码（甚至可能让该名称本身就是一个类）。如果是这样，像这样的嵌套 mixin 会起作用：

**较少的**

```
.category(@catName: a, @catColor: white) {

  //This is common code used by all categories
  //It has an example of using the category name to generate a class name
  .categoryCommonCode() {
    h2 {color: @catColor;}
    a, .@{catName} p, .@{catName}  a {color:@catColor;
            &:hover,&:active{color:lighten(@catColor, 10%);}
        }
  }

  //set up guarded mixins
  .category(foo) {
    .categoryCommonCode();
  .specialFooOnlyClass {color: darken(@catColor, 20%);}
  }

  .category(bar) {
    .categoryCommonCode();
    .specialBarOnlyClass {color: darken(@catColor, 50%);}
  }

  //Call the appropriate nested mixin
  .category(@catName);
}

//Call it
.category(foo, blue); 
```

**CSS 输出**

```
h2 {
  color: #0000ff;
}
a,
.foo p,
.foo a {
  color: #0000ff;
}
a:hover,
.foo p:hover,
.foo a:hover,
a:active,
.foo p:active,
.foo a:active {
  color: #3333ff;
}
.specialFooOnlyClass {
  color: #000099;
} 
```

# ios - 应用程序进入后台时的非持久数据

> ID：15350325
> 
> 赞同：0
> 
> 时间：2013-03-11T23:04:54.520
> 
> 标签：ios, xcode, memory-management, background, didreceivememorywarning

当iOS应用程序进入后台时，内存中的数据是否有可能丢失？

例如，如果操作系统通过以下方式通知应用程序

`didReceiveMemoryWarning`并且应用程序没有采取任何行动来释放一些空间。

到目前为止，我从未注意到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:10:17.603

不是立即，但是如果使用其他应用程序并且系统决定它需要被您的应用程序阻止的内存，则该应用程序可能会在任何时候终止。

# c++ - 具有一维数组的 SetWindowText

> ID：15350330
> 
> 赞同：1
> 
> 时间：2013-03-11T23:05:33.017
> 
> 标签：c++, c

是否可以在 windows api 的文本框中使用 SetWindowsText() 显示一维值数组？

例如。SetWindowText(hwndStatic3, sArray);

****** *** ** *** ** *** ** *** ** *** ** ******编辑****** ** *** ** *** ** *** ******

 **我在 windows api 上有一个文本框，我在其中使用 GetWindowText() 检索写入文本框中的字符串，然后将字符串转换为十进制数组。然后，当我尝试在另一个文本框中使用 SetwindowsText 打印这些值时，我将此十进制数组值转换为十六进制值。但是，只有数组的最后一个值正在打印。如何打印所有值？

****** *** ** *** ** *** ** *** ** *** ** ******编辑****** ** *** ** *** ** *** ******

 **代码：

```
 GetWindowText(hwndtext1, value, 256);

                    for (i = 15; i >= 0; i--)
                   {
                          temp[i] = atoll(value);       //converts sting to decimal
                          ulltoa(temp[i] , sArray, 16); //converts decimal to hexadecimal
                          buf[i] = temp[i];  

                    }
                          SetWindowText(hwndStatic3, sArray); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:13:34.640

`SetWindowText`只是一个带有签名的宏：

```
BOOL SetWindowText(HWND, const TCHAR*); 
```

根据您的构建设置，它将调用以下之一：

```
BOOL SetWindowTextA(HWND, const char*);    //ansi version
BOOL SetWindowTextW(HWND, const wchar_t*); //unicode version 
```

其中`TCHAR`定义为：

```
#ifdef _UNICODE
typedef wchar_t TCHAR;
#else
typedef char TCHAR;
#endif 
```

因此，**字符串数组与您的设置不兼容，`SetWindowText`**但字符数组可以使用，前提是该数组的类型为，或与您的设置兼容`TCHAR *`的类型 (`char *`或)。`wchar_t *`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:15:11.213

首先，`atoll`并且`ulltoa`没有使用 Microsoft Visual C/C++ （这是我用于 Windows 的）记录，所以我正在使用我在网上找到的文档。要么你的版本比我发现的文档做得更多，要么你的示例中遗漏了一些重要的代码。

基于循环控件，我猜您希望始终在从第一个控件*读取的字符串中找到 15 个值。*但是...... `atoll`and`ulltoa`函数一次只对**一个**值进行操作，并且不做任何事情来推进输入列表。因此，您的循环将第*一个*数字从字符串转换为 64 位 int，然后将其转换为字符串 15 次。

由于您说*最后一个*值是您看到的唯一值，因此您的函数实际上必须`value`以某种在您的示例中不明显的方式解析字符串。但是，`ulltoa`似乎总是将值放在同一个字符串变量的同一个位置，循环中的每个后续调用都会覆盖前一个调用。我懒惰的自我会添加一点这样的：

```
int len = 0;
char szOutput[15*20];     // enough space for 15 64 bit hex strings

GetWindowText(hwndtext1, value, 256);

for (i = 15; i >= 0; i--)
{
    temp[i] = atoll(value);       //converts sting to decimal
    ulltoa(temp[i] , sArray, 16); //converts decimal to hexadecimal
    buf[i] = temp[i];
    len += sprintf( szOutput+len, "%s ", sArray );
}
szOutput[len-1] - '\0'; // remove the final space
SetWindowText(hwndStatic3, szOutput); 
```

当然，`sprintf`您也可以`ulltoa`完全跳过调用并将`sprintf`行更改为：

```
 len += sprintf( szOutput+len, "%16.16I64X", temp[i] ); 
```

（或您想要的任何风格/形式的十六进制输出（`printf`有关详细信息，请参阅格式文档。）如果您希望您的列表每行一个项目，则用换行符替换尾随空格。哦，里面`I64`是`%16.16I64X`Microsoft在其他编译器/库中可能有所不同的东西。

仅供参考，`sprintf`我使用的技术让函数继续附加到缓冲区的末尾，但将缓冲区（`len`）的偏移量增加刚刚附加的字符串的长度，即`sprintf`. 这是组装字符串列表（例如您的字符串列表）的一种快速简便的方法。****

# ios - 分段控件更改后如何重新加载 UITableView？

> ID：15350333
> 
> 赞同：1
> 
> 时间：2013-03-11T23:05:50.000
> 
> 标签：ios, ios6

我正在尝试使用分段控件（在 tableview 上方）控制 tableview 的上下文。在更改段上，我想用不同的单元格重新加载表 tableView 中的数据（我有两种类型的单元格和每种类型的两个数据数组）。如何清除和重新加载不同单元格的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T06:25:46.080

我只是为@jaydee3 提到的内容提供了几行代码。

```
- (IBAction)segmentControlValueChanged:(UISegmentedControl *)sender
{
    //Do something
    [self.tableView reloadData];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return self.segmentControl.selectedSegmentIndex?[self.dataArray2 count]:[self.dataArray1 count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(self.segmentControl.selectedSegmentIndex){
       // Create Type cell for selected Index 1
    }
    else{
       // Create Type cell for selected Index 0
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:07:32.973

在您的 tableView`delegate`中，检查分段控件中选择的内容并返回正确的单元格。

如果分段控件发生更改，请调用`reloadData`.`tableView`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-15T22:30:17.897

1.如果要更改 2 个或更多 tableview 中的数据，下面是最重要的行。

```
@IBAction func segmentValueChanged(_ sender: UISegmentedControl) 
{
    self.<YourTableViewName>.reloadData()
} 
```

2.

```
func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
    var index = <segmentObjectCreated>.selectedSegmentIndex

    if index == 0 {
        return <table1ArrayList>.count
    }
    else{
        return <table12ArrayList>.count
    }
} 
```

3.

```
func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
    var cell = <TableViewObj>.dequeueReusableCell(withIdentifier: "cell", for: indexPath)

    var index = <segmentObjectCreated>.selectedSegmentIndex

    if index == 0 {
        cell.textLabel?.text = <table1ArrayList>[indexPath.row].productName
    }
    else {
        cell.textLabel?.text = <table2ArrayList>[indexPath.row].newLaunch
    }
    return cell
} 
```

就是这样，快乐编码！

# sql - Oracle SQL：ON 子句

> ID：15350335
> 
> 赞同：1
> 
> 时间：2013-03-11T23:05:54.067
> 
> 标签：sql, oracle

```
SELECT e.employee_id, e.last_name, d.department_id, d.location_id
FROM employees e JOIN departments d
ON (e.department_id=d.department_id); 
```

ON 子句到底是做什么的？我对为什么 e.department_id 和 d.department_id 不会导致错误感到困惑？e不代表employees表，d代表department表吗？那么如果department_id 不在employees 表中，如何使用e.department_id 呢？我对 ON 子句的目的感到非常困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:07:34.877

该`ON`子句是`JOIN`语法的一部分，它用于标识表应该如何相互连接，换句话说，哪些列将表相互关联。

在您的情况下，您将加入 和 上的`e.department_id`表格`d.department_id`。

`e`是表的别名，`employees`而 是表的`d`别名`departments`。

您当前的查询正在执行`INNER JOIN`，它将仅返回在两个表中匹配的那些行。

如果您想全部返回，`employees`即使没有`departments`与员工行关联，那么您将需要使用`LEFT JOIN`：

```
SELECT e.employee_id, e.last_name, d.department_id, d.location_id
FROM employees e 
LEFT JOIN departments d
  ON e.department_id=d.department_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:33:21.187

不确定它是否有助于您理解，但可以（尽管不推荐）用`WHERE`子句形式的隐式内部连接重写这​​个查询：

```
SELECT e.employee_id, e.last_name, d.department_id, d.location_id
FROM employees e, departments d
WHERE (e.department_id=d.department_id); 
```

# python - 使用 pyodbc 模块的连接字符串不适用于 Enthought Python Distribution

> ID：15350336
> 
> 赞同：1
> 
> 时间：2013-03-11T23:05:54.840
> 
> 标签：python, connection-string, ipython, pyodbc, enthought

**背景**

我一直在使用 64 位版本的 Python 2.7.3。我想学习 matplotlib 和 numpy 库，所以我最终安装了适用于 Windows 的 Enthought Python Distribution，并且我还安装了 ipython 以配合它。现在，突然之间，以前工作的连接字符串不再与这个 Python 发行版中的 pyodbc 库一起工作，我不知道为什么。

**例子**

以下代码之前工作得非常好：

```
import pyodbc
dbFile = r'D:\Dropbox\School\Senior_Project\Database\HarmonicProfileDatabase_be.accdb'
cnxn = pyodbc.connect(r'DRIVER={Microsoft Access Driver (*.mdb, *.accdb)};DBQ='+dbFile) 
```

但是现在返回以下错误：

```
Error: ('IM002', '[IM002] [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified (0) (SQLDriverConnect)') 
```

这些事情让学习编程变得如此令人沮丧，但我离想出一个我一直在努力放弃的项目的解决方案太近了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T12:30:59.853

问题是我使用的 Python（以及 pyodbc）版本是 32 位的。但是，我设法让自己获得了 64 位版本的 office。它们都需要是 32 位（或都是 64 位）才能正常工作。

# c# - 将 C# 中的“程序”结构复制到 VB.NET

> ID：15350340
> 
> 赞同：0
> 
> 时间：2013-03-11T23:06:11.773
> 
> 标签：c#, vb.net

为什么控制台应用程序之间的结构在`C#`和之间看起来如此不同`VB.NET`？

在`C#`我经常创建 Program 类的实例：

```
namespace ConsoleApplicationX {

    class Program {

        static void Main(string[] args) {

            Program p;
            p = new Program();

        ...
        ... 
```

在一个`VB.NET`示例中，我`Main`位于一个名为`__ZooWork.vb`如下的文件中：

```
Module __ZooWork

    Sub Main()

        ...
        ... 
```

我可以对`C#`上面的代码做一个等效的实现`VB.NET`吗？

**编辑**

我尝试了以下方法，但出现错误：

![在此处输入图像描述](../Images/201e865e5cc727a532967382feb1edfa.png)

**进一步编辑**

只是为了确认几个设置 - 这些似乎没有解决它！...

![在此处输入图像描述](../Images/cde66a7c9c1362bdaea021044f3a4c5e.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:09:50.580

这些只是您在开始新项目时可以使用的模板。当然，您可以用两种语言编写等效的代码。

```
Namespace ConsoleApplicationX

    Class Program

        Shared Sub Main()

            Dim p As New Program()
            ...

        End Sub

    End Class

End Namespace 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:42:05.687

您可能不应该创建入口点所在类型的实例。虽然这在任何一种语言中都是*可能*的，但在任何一种语言中都不是好的设计。

只需让您的`Main`方法创建其他类型的实例，而不是其`Main`本身所在的类型，并将其用于您的程序逻辑。

至于错误：

> 程序 [...] 不包含适用于入口点的静态“Main”方法

那是因为您的`Main`方法不是正确的签名。它应该是：

```
Shared Sub Main()

End Sub 
```

`Shared`很重要（它相当于C# 中的`static`；它表示您不需要该类型的实例来调用该方法，这对于入口点很重要，因为在程序运行之前它不会有该类型的实例开始了。

# ruby-on-rails - 如何将此表单的结果提交给方法？

> ID：15350341
> 
> 赞同：0
> 
> 时间：2013-03-11T23:06:29.277
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, routes

提交此表单时收到 NoMethodError，我不知道如何让它工作。尽管 Devise gem 只是一个密码重置表单，`@user.send_reset_password_instructions`在控制台中尝试它就可以了。

这是我认为的表格：

```
<%= form_tag reset_password_path(:email), :id => 'forgotten_password' do %>
  <%= email_field_tag :email, nil, :placeholder => 'Email address' %>
  <%= submit_tag "Reset password" %>
<% end %> 
```

在我的路线中：

```
get "/dashboard/reset_password/:email" => "docs#reset_password", :as => :reset_password 
```

在我的控制器中：

```
def reset_password
  @user = User.where(:email => params[:email]).first
  @user.send_reset_password_instructions
end 
```

这是错误：

```
No route matches [POST] "/dashboard/reset_password/email" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:14:06.203

您的路线需要包含 POST 方法，而不是 GET。`/email`它不应该`/:email`

```
post "/dashboard/reset_password/email" => "docs#reset_password", :as => :reset_password 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:12:56.950

您定义了响应`GET`请求的路线，并且您的表单正在发送`POST`请求。尝试将路线的方法从更改`get`为`post`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:48:22.553

因此，第一部分是使您的路由成为 POST 而不是 GET（如前所述）。通常，每当您将数据发送到服务器并导致更改（例如在用户帐户上设置重置密码令牌并向他们发送电子邮件）时，您都会使用 POST。

将您的路线更改为如下所示：

```
POST "/dashboard/reset_password" => "docs#reset_password", :as => :reset_password 
```

*注意：我还删除了路径的 :email 部分。你真的不需要那个。*

第二部分，您需要稍微调整一下表格。您不需要将 :email 符号传递给路径。在这种情况下，我实际上不确定这会对您有什么影响。您在控制器 (params[:email]) 的 params 哈希中收到电子邮件，因为您的表单中有一个电子邮件字段。

将您的表单更改为如下所示：

```
<%= form_tag reset_password_path, :id => 'forgotten_password' do %>
  <%= email_field_tag :email, nil, :placeholder => 'Email address' %>
  <%= submit_tag "Reset password" %>
<% end %> 
```

这应该在您的表单 HTML 中生成 POST 表单路径“/dashboard/reset_password”。当用户单击页面上的“重置密码”按钮时，表单中的 :email 字段将提交给您。Rails 会将其填充到参数中，并且您的控制器方法“reset_password”能够很好地读取它。

您可能还想在控制器方法中进行一些错误捕获。电子邮件密码重置最常见的问题是电子邮件中存在拼写错误，您将无法找到用户。发生这种情况时向用户返回消息会很有帮助。

祝你好运！

# coffeescript - 咖啡脚本中的对象/数组比较简写？

> ID：15350342
> 
> 赞同：1
> 
> 时间：2013-03-11T23:06:38.820
> 
> 标签：coffeescript, list-comprehension, destructuring

CoffeeScript 有很多有用的关于具有理解和解构的数组和对象的简写。是否有比较整个对象或其多个属性的快速简写？IE

activity.date() 被选中。date() 和 activity.month() 被选中。month()

有点像

活动[日期（），月份（）]被选中[日期（），月份（）]

我在文档中没有看到类似的东西，但我想我会问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:09:11.960

我不知道 CoffeeScript 本身有任何此类功能，但[Underscore.js](http://underscorejs.org/)库[`isEqual`](http://underscorejs.org/#isEqual)为此提供了一个功能：

```
var moe   = {name : 'moe', luckyNumbers : [13, 27, 34]};
var clone = {name : 'moe', luckyNumbers : [13, 27, 34]};
moe == clone;
=> false
_.isEqual(moe, clone);
=> true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:07:22.493

恐怕没有这样的东西，函数调用更是如此。您可以使用下划线的 isEqual 来实现。

# windows - 如何使用批处理脚本删除文件夹名称的前 7 个字符？

> ID：15350344
> 
> 赞同：1
> 
> 时间：2013-03-11T23:06:42.723
> 
> 标签：windows, command-line, batch-file, command-prompt

我确实做了研究，但我无法弄清楚，对不起！谷歌只能帮我添加字符，不能删除字符...

在目录下说`E:\Movies\2011\`

有几个文件夹，例如

```
[0603] Movie_1

[0708] Movie_2

[0811] Movie_3 
```

等等..

所以我想运行一个批处理脚本来删除日期标签，即

```
Movie_1

Movie_2

Movie_3 
```

等等

我正在使用 Windows 8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T23:39:27.933

重命名命令

```
@echo off
setlocal enableextensions enabledelayedexpansion
for %%i in (*) do (set name=%%i && ren "!name!" "!name:~7!")
endlocal 
```

解释：

**setlocal** / **endlocal**的东西只是确保无论您的默认命令行设置是什么，脚本都能正常工作。如果您确保默认启用命令扩展和延迟扩展，或者使用**cmd /e:on /v:on**启动命令提示符，则这些行是可选的。

**for**语句是事情的核心。**它使用(*)**选择目录中的每个文件。如果您只想更改具有某些扩展名的文件，您可以使用不同的模式，例如**(*.avi)**。然后**!name:~7!** 去掉前面的七个字符。 **放 /？**列出了您可以执行的其他一些操作。大多数示例使用**%**而不是**!** 但所有字符串操作都适用于两者。

> 更新以回答评论

您可以在 ! 中执行 % 替换 替代。

```
@echo off
setlocal enableextensions enabledelayedexpansion
set numtrim=7
for %%i in (*) do (set name=%%i && ren "!name!" "!name:~%numtrim%!")
endlocal 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:05:44.313

由于您使用的是 Win8，因此您也可以使用 powershell 来完成此操作。这是我以前转的

blah11-1 blah12-1 blah13-1

至

废话11 废话12 废话13

C:\testing> dir -目录 | foreach { if($ *.Name.Length -gt 6){ $fileName = $* .Name.SubString(0,6)} else { $fileName = $ *.Name }; 重命名项目 -path $* .fullname -newname $fileName; }

现在这只是我在 powershell 命令行上运行的内容，但可以将其移动到脚本中以使其更具可重用性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T23:30:38.490

您可以使用增强的变量替换功能来执行此操作（`SET /?`仅供参考）：

```
@echo off
setlocal
for /d %%i in (*) do call :rename %%i
goto :eof
:rename
set CURDIR=%1
echo ren "%CURDIR%" "%CURDIR:~7%" 
```

魔法发生在`%CURDIR:~7%`，这意味着“ 的值`%CURDIR%`，但跳过前 7 个字符”。

上面的批处理文件没有重命名任何东西（它只是*打印*重命名命令），所以你可以先做一个空运行，然后删除最后一个`echo`来完成真正的工作。

# jquery - 编辑从 jquery 导入的内容

> ID：15350348
> 
> 赞同：1
> 
> 时间：2013-03-11T23:06:56.900
> 
> 标签：jquery, ajax

我有一个基于查询构建表的外部 Coldfusion 页面。然后，我每 10 秒使用 jQuery 导入语句导入该外部表。

```
$('#container').import('coldfusionTable.cfm').html(); 
```

我缺少一些东西，因为我无法在表格中编辑/添加功能。我无法从 jQuery 访问表中的内容。有一些按钮，我想在表格中添加功能。
我错过了一个/许多步骤。请帮忙。

或者至少是一个开始阅读的地方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:53:17.730

答案是将 javascript 放在正在加载的文档中，而不是放在正在加载的文档中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T19:32:21.303

如果您使用方法 lie $('td').click() 那么它们不会触发动态加载的数据。

相反，你必须使用类似的东西

```
$(document).on('click','td',tdClicked);
function tdClicked() {
} 
```

# javascript - 在 javascript 中使用 Jquery 函数

> ID：15350349
> 
> 赞同：-1
> 
> 时间：2013-03-11T23:07:02.047
> 
> 标签：javascript, jquery, asp.net, .net, telerik

**为清晰和简单而彻底修改**

[如本网站](http://www.elevateweb.co.uk/image-zoom/examples#gallery-lightbox)所示，我正在使用提升变焦（镜头变焦功能）。我有一个充满二进制图像的 Radrotator，我在旋转器的 DataBound 上给出了一个 onclick 事件。Onclick 我想根据他们从 Rotator 所有客户端单击的图像更改 Rotator 上方更大的主图像。

屏幕上的图像确实发生了变化，但是，放大功能仍然显示第一张图像。

```
<img id="zoom_07" runat="server" src="small.jpg" alt="image" /> 
```

下面是两个javascript函数。第一个是使用 elevatezoom 来放大图像，而第二个是在旋转器中调用二进制图像的 onclick。

```
 <script type="text/javascript" >
jQuery(document).ready(function ($) {
    $("#zoom_07").elevateZoom({
        zoomType: "lens",
        lensShape: "round",
        lensSize: 200
    });
});

function changeImage(url) {

    var img = document.getElementById('zoom_07');
    img.src = url;
    img.setAttribute('data-zoom-image', url);
} 
```

如何更改放大镜客户端的图像？感谢您在此问题上提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:24:16.400

我对您单击的内容和此处的网址来源做了一些广泛的假设：

```
(function ($) {
    // I invented this, use your element
    $('#clickemeid').click(function () { 
        // I invented this "someattr" attribute, set to where you get that
        var url = $(this).attr('someattr');
        $("#zoom_07").attr('src', url).attr('data-zoom-image', url).elevateZoom({
            zoomType: "lens",
            lensShape: "round",
            lensSize: 200
        });
    });
})(jQuery); 
```

现在，假设您要在 src 和 data-zoom-image 之间切换

```
(function ($) {
    $('#zoom_07').click(function () {
        var me = $(this);
        var zoomurl = me.attr('data-zoom-image');
        var origurl = me.attr('src');
        me.attr('data-zoom-image', origurl).attr('src', zoomurl).elevateZoom({
            zoomType: "lens",
            lensShape: "round",
            lensSize: 200
        });
    });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:11:47.550

jQuery**是**JavaScript，因此您已经在 J​​avaScript 函数中调用它。它恰好是*文档就绪*的匿名函数。

```
function changeImage(url) {
    var img = document.getElementById('zoom_07');
    img.src = url;
    img.setAttribute('data-zoom-image', url);

    $(img).elevatedZoom({
        zoomType: "lens",
        lensShape: "round",
        lensSize: 200
    });
} 
```

上面的代码是您的事件处理程序，已更新以显示您是否希望调用该函数来更新缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T19:53:19.760

[这是](http://www.mind-projects.it/projects/jqzoom/demos.php#demo3)我采用的解决方案。我在旋转器（绑定到二进制图像）中创建了图像标签，并在点击这些图像时更改了主图像。我当然必须将二进制图像转换为常规图像，然后保存它们。

# android - 在活动中绘制图像的最佳方式

> ID：15350351
> 
> 赞同：2
> 
> 时间：2013-03-11T23:07:07.807
> 
> 标签：android, view, android-activity, bitmap, drawing

我需要绘制一个位图，然后在活动类上按下按钮时更改它。我曾尝试使用 View 类，但不幸的是我没有运气。我认为这将是一个足够简单的任务。

有谁知道如何做到这一点？我已经为此苦苦挣扎了 2 天，但似乎无处提供一个体面的解决方案。

活动课

```
public class PhonicsActivity extends Activity{

int letterStatus = 0;

protected void onCreate (Bundle savedInstanceState){

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity1_phonics);

    final Intent phonicsBackIntent = new Intent(this, PhonicsMenu.class);   

    final Button nextButton = (Button) findViewById(R.id.nextbutton);
    final Button backButton = (Button) findViewById(R.id.backbutton);
    final Button menuButton = (Button) findViewById(R.id.menubutton);

    nextButton.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

        }
    }); 
```

查看课程

```
public class PhonicsView extends View {

private int letterStatus = 1;

public PhonicsView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public PhonicsView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO Auto-generated constructor stub
    init();
}

public PhonicsView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO Auto-generated constructor stub
    init();
}

 private void init(){

     }

protected void onDraw(Canvas canvas) {

    drawLetterA(canvas);

    if (letterStatus == 2){

        Bitmap myBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.lettera);
        canvas.drawBitmap(myBitmap, 0, 0, null);

    }

} 
```

我需要活动中的按钮来覆盖上一个图像或清除画布，然后绘制下一个字母。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:18:53.017

这是来自 Google 的手指画尝试开始并对其进行自定义以找出您的问题

```
public class FingerPaint extends GraphicsActivity
        implements ColorPickerDialog.OnColorChangedListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(new MyView(this));

        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0xFFFF0000);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(12);

        mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },
                                       0.4f, 6, 3.5f);

        mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
    }

    private Paint       mPaint;
    private MaskFilter  mEmboss;
    private MaskFilter  mBlur;

    public void colorChanged(int color) {
        mPaint.setColor(color);
    }

    public class MyView extends View {

        private static final float MINP = 0.25f;
        private static final float MAXP = 0.75f;

        private Bitmap  mBitmap;
        private Canvas  mCanvas;
        private Path    mPath;
        private Paint   mBitmapPaint;

        public MyView(Context c) {
            super(c);

            mPath = new Path();
            mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        }

        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
            mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(mBitmap);
        }

        @Override
        protected void onDraw(Canvas canvas) {
            canvas.drawColor(0xFFAAAAAA);

            canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

            canvas.drawPath(mPath, mPaint);
        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }
        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }
        private void touch_up() {
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            mCanvas.drawPath(mPath, mPaint);
            // kill this so we don't double draw
            mPath.reset();
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            float x = event.getX();
            float y = event.getY();

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    touch_start(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_MOVE:
                    touch_move(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_UP:
                    touch_up();
                    invalidate();
                    break;
            }
            return true;
        }
    }

    private static final int COLOR_MENU_ID = Menu.FIRST;
    private static final int EMBOSS_MENU_ID = Menu.FIRST + 1;
    private static final int BLUR_MENU_ID = Menu.FIRST + 2;
    private static final int ERASE_MENU_ID = Menu.FIRST + 3;
    private static final int SRCATOP_MENU_ID = Menu.FIRST + 4;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);

        menu.add(0, COLOR_MENU_ID, 0, "Color").setShortcut('3', 'c');
        menu.add(0, EMBOSS_MENU_ID, 0, "Emboss").setShortcut('4', 's');
        menu.add(0, BLUR_MENU_ID, 0, "Blur").setShortcut('5', 'z');
        menu.add(0, ERASE_MENU_ID, 0, "Erase").setShortcut('5', 'z');
        menu.add(0, SRCATOP_MENU_ID, 0, "SrcATop").setShortcut('5', 'z');

        /****   Is this the mechanism to extend with filter effects?
        Intent intent = new Intent(null, getIntent().getData());
        intent.addCategory(Intent.CATEGORY_ALTERNATIVE);
        menu.addIntentOptions(
                              Menu.ALTERNATIVE, 0,
                              new ComponentName(this, NotesList.class),
                              null, intent, 0, null);
        *****/
        return true;
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        super.onPrepareOptionsMenu(menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        mPaint.setXfermode(null);
        mPaint.setAlpha(0xFF);

        switch (item.getItemId()) {
            case COLOR_MENU_ID:
                new ColorPickerDialog(this, this, mPaint.getColor()).show();
                return true;
            case EMBOSS_MENU_ID:
                if (mPaint.getMaskFilter() != mEmboss) {
                    mPaint.setMaskFilter(mEmboss);
                } else {
                    mPaint.setMaskFilter(null);
                }
                return true;
            case BLUR_MENU_ID:
                if (mPaint.getMaskFilter() != mBlur) {
                    mPaint.setMaskFilter(mBlur);
                } else {
                    mPaint.setMaskFilter(null);
                }
                return true;
            case ERASE_MENU_ID:
                mPaint.setXfermode(new PorterDuffXfermode(
                                                        PorterDuff.Mode.CLEAR));
                return true;
            case SRCATOP_MENU_ID:
                mPaint.setXfermode(new PorterDuffXfermode(
                                                    PorterDuff.Mode.SRC_ATOP));
                mPaint.setAlpha(0x80);
                return true;
        }
        return super.onOptionsItemSelected(item);
    }
} 
```

# c# - 在类中访问 ListBox

> ID：15350356
> 
> 赞同：0
> 
> 时间：2013-03-11T23:07:22.633
> 
> 标签：c#, winforms

我有一个列表框，在一个单独的类中我试图访问列表框的选定值，但它说它不能被访问，因为它不是公共的。我在访问标签时也遇到了同样的问题。

```
 public dataCollector(string i)
    {
        string tag = i;
    }
    public string dataCollector()
    {
        Form1 f = new Form1();
        string workingDirectory = Directory.GetCurrentDirectory();
        var xmlFile = XDocument.Load(workingDirectory + @"\modules.xml");

        var name = from d in xmlFile.Descendants("Name")
                   where d.Value == (String)f.selectionBox.SelectedItem
                   select d.Parent.Element(tag).Value;

        foreach (var item in name)
        {
            f.moduleName.Text = item.ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:13:15.663

选择表单上的 ListBox 并将 Modifier 属性从 Private 更改为 Public。

这是因为表单设计器默认将控件创建为私有。您可以查看 Designer 生成的代码并亲自查看。

示例**Form1.Designer.cs**代码...

```
partial class Form1
{
...
    private System.Windows.Forms.ListBox listBox1;
} 
```

在 Designer 中将 Modifier 属性更改为 public 后...

```
partial class Form1
{
...
    public System.Windows.Forms.ListBox listBox1;
} 
```

# eclipse - EGit 与 Eclipse，这是什么意思？

> ID：15350357
> 
> 赞同：5
> 
> 时间：2013-03-11T23:07:28.420
> 
> 标签：eclipse, git, egit

![git_changes_screenshot](../Images/d3d37293de5f0ca420fe3fc7e688e786.png)

从这个屏幕截图中，“box2”部分是什么意思？

另外，“2”之前的框是否意味着我缺少字体或其他东西？我想我在某处看到数字前应该有一个箭头图标。

我认为这意味着有 2 个本地更改尚未提交，但是当我右键单击存储库并选择提交时，我被告知没有要提交的更改。

![在此处输入图像描述](../Images/494a6875fea49663719bfb57e753de9d.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T06:59:46.243

该框应该是向上或向下箭头，因为当前软件假定您的操作系统可以显示 Unicode 字体。（在 WinXP 上，如果您还没有安装并选择它们，则必须安装）。

向上表示您的本地“master”分支在它正在跟踪的分支之前（可能是“origin/master”），该数字表示它领先 2 次提交，即您已经进行了两次尚未推送的提交。

类似地，向下箭头表示您的本地分支落后，即您已从远程获取但未将新的远程提交合并到本地“主”中。

# asp.net-mvc-4 - MVC 4 - 我可以控制模型错误的显示位置吗？

> ID：15350360
> 
> 赞同：0
> 
> 时间：2013-03-11T23:07:38.510
> 
> 标签：asp.net-mvc-4, forms

我有一个 MVC 4 应用程序，并且正在使用 HTML.BeginForm 在视图上创建一个表单。我有几个字段集，我在其中绝对定位了它们。例如，这是我的 BeginForm 和我的字段集之一：

```
<div style="width:1100px; height:490px;">
@using (Html.BeginForm("Create", "BicycleSellerListing", FormMethod.Post, new { enctype = "multipart/form-data" })) {
    @Html.ValidationSummary(true)

    <fieldset style="position:absolute; top:180px; left:150px; width:550px">
        <legend>Bicycle Information</legend>
...
... 
```

问题是，如果在提交完成时 ModelState 中有错误，则生成的错误会被字段集中的某些字段覆盖。有没有办法可以指示我希望模型状态错误显示在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:34:08.467

有几种方法可以显示错误。`@Html.ValidationSummary()`将在一处显示所有错误。因此，取决于您放置`@Html.ValidationSummary(true)`的位置 - 这就是显示错误的位置。例如，您可以将其放在表格之后，而不是像您拥有的那样放在开头。

另一种方法是使用`@Html.ValidationMessageFor(...)`助手。它采用您的模式的属性名称，因此只会显示该属性的错误。同样，你可以把它放在你想要的任何地方。通常人们把它放在输入旁边，这样错误消息也会显示在输入旁边。

# javascript - 在 Worklight Adapter 中解析 XML 的方法是什么？

> ID：15350362
> 
> 赞同：0
> 
> 时间：2013-03-11T23:07:54.937
> 
> 标签：javascript, dom, xml-parsing, ibm-mobilefirst

在通知 Worklight 适配器中 - 我调用从后端服务传递一个非常长的 XML 字符串的适配器。

后端服务不能更改或更改。

我希望能够将 javascript String 对象转换为我可以解析和使用有用函数的东西，例如：

```
var custNum = doc.getElementsByTagName("data:custNum")[0]; 
```

然而，到目前为止创建“doc”变量的所有尝试都失败了。标准的 DOMParser 和 window 方法是未定义的，并且超出了适配器的范围。我宁愿不诉诸冗长的字符串拆分来找到我的节点！

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T06:13:16.283

设置返回的内容类型：“xml”。这将强制 WL 平台自动为您解析 XML 并将其转换为您可以操作的 JSON。

例如

```
<a>
  <b>
     c
  </b>
</a> 
```

将转换为

```
{"a": 
     {"b":"c"}
} 
```

因此您可以使用 response.ab 之类的语法获取值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T05:13:34.407

您应该使用 XSL 转换过滤从 XML 中删除所有不需要的数据。
像这样的东西应该是你的适配器 JavaScript 函数：

```
function getFeedsFiltered() {

    var input = {
        method : 'get',
        returnedContentType : 'xml',
        path : "rss.xml",
        transformation : {
            type : 'xslFile',
            xslFile : 'filtered.xsl'
        }
    };

    return WL.Server.invokeHttp(input);
} 
```

像这样的东西应该在你的 XSL 文件中

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                xmlns:h="http://www.w3.org/1999/xhtml"
                xmlns:dc="http://purl.org/dc/elements/1.1/" >
    <xsl:output method="text"/>

    <xsl:template match="/">
        {
            'Items': [
                <xsl:for-each select="//item">
                    {
                        'title': '<xsl:value-of select="title"/>',
                        'creator': '<xsl:value-of select="dc:creator"/>',
                        'link': '<xsl:value-of select="link"/>',
                        'pubDate': '<xsl:value-of select="pubDate"/>'
                    },
                </xsl:for-each>
            ]
        }
    </xsl:template>

</xsl:stylesheet> 
```

请查看[IBM Worklight 入门](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html)( [http://www.ibm.com/developerworks/mobile/worklight/getting-started.html](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html) )[模块 5.2 - 创建 HTTP 适配器](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_05_2_-_Creating_HTTP_Adapters.pdf)( [ftp://public.dhe.ibm.com/software /mobile-solutions/worklight/docs/v505/Module_05_2_-_Creating_HTTP_Adapters.pdf](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/Module_05_2_-_Creating_HTTP_Adapters.pdf)）及其[练习和代码示例](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/module_05_2_HTTP_Adapter.zip)（[ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/module_05_2_HTTP_Adapter。邮编](ftp://public.dhe.ibm.com/software/mobile-solutions/worklight/docs/v505/module_05_2_HTTP_Adapter.zip)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:20:19.970

最后我写了一个这样的函数：

```
function findNode(node,string){

    var nodeEnd = node.slice(0, 1) + "/" + node.slice(1);
    var chunk = string.split(node)[1];
    var chunk2 = chunk.split(nodeEnd)[0];

    return chunk2;

} 
```

我使用的 - 又好又简单。

# c# - 在不使用 ForEach 循环的情况下遍历列表

> ID：15350363
> 
> 赞同：7
> 
> 时间：2013-03-11T23:08:03.010
> 
> 标签：c#, lambda

我有一个字符串列表：

```
var list = new List<string> {"apples","peaches", "mango"}; 
```

有没有办法在不使用 foreach 循环的情况下遍历列表并在控制台窗口中显示项目可能是使用 lambdas 和委托。

我希望输出如下所示：

以下水果可供选择：
苹果
桃
芒果

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-11T23:12:16.373

您可以使用[`String.Join`](http://msdn.microsoft.com/en-us/library/system.string.join%28v=vs.110%29.aspx)连接所有行：

```
string lines = string.Join(Environment.NewLine, list);
Console.Write(lines); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-11T23:10:48.943

到目前为止，最明显的是良好的老式`for`循环：

```
for (var i = 0; i < list.Count; i++)
{
    System.Console.WriteLine("{0}", list[i]);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-11T23:11:09.907

```
for (int i = 0; i < list.Count; i++)
    {
    Console.WriteLine(list[i])
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-11T23:12:46.013

我喜欢 linq 的这个特殊方面

```
list.ForEach(Console.WriteLine); 
```

它本身没有使用 ForEach 循环，因为它使用了 ForEach 演员。但是，嘿，它仍然是一个迭代。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T23:13:00.463

您可以使用[`List<T>.ForEach`](http://msdn.microsoft.com/en-us/library/bwabdf9z.aspx)方法，它实际上不是 LINQ 的一部分，但看起来像：

```
list.ForEach(i => Console.WriteLine(i)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-11T23:13:54.067

好吧，您可以尝试以下方法：

```
Debug.WriteLine("The folowing fruits are available:");
list.ForEach(f => Debug.WriteLine(f)); 
```

它非常等价于`foreach`循环，但不使用`foreach`关键字，

`foreach`话虽如此，我不知道为什么在遍历对象列表时要避免循环。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-22T10:07:08.147

迭代 List 的三种方法：

```
//1 METHOD
foreach (var item in myList)
{
    Console.WriteLine("Id is {0}, and description is {1}", item.id, item.description);
}

//2 METHOD   
for (int i = 0; i<myList.Count; i++)
{ 
    Console.WriteLine("Id is {0}, and description is {1}", myList[i].id, myMoney[i].description);
}

//3 METHOD lamda style
myList.ForEach(item => Console.WriteLine("id is {0}, and description is {1}", item.id, item.description)); 
```

# javascript - AngularJS，界面未按预期更新

> ID：15350364
> 
> 赞同：3
> 
> 时间：2013-03-11T23:08:11.750
> 
> 标签：javascript, angularjs

我有一个无序列表，点击每个`ListItem`它都会调用`setActive()`

```
<li ng-repeat="slide in data" ng-click="setActive(slide.slideIndex)">
  <span class="listItemText">
    <b>{{slide.slideIndex + 1}}. </b>{{slide.Title}}
  </span>
</li> 
```

`setActive()`是：

```
$scope.setActive = function(id)
{
    $scope.currentIndex = id;
} 
```

当我单击`List Items`我更新图像时：

`<img id="slide" ng-src="resources/slides/slide{{currentIndex + 1}}.jpg" />`

**一切正常**

什么不工作是我有一个视频播放器，在某些时候`time`我需要更新`$scope.currentIndex`

我认为这会很好：

```
player.addEventListener("timeupdate", function()
{
    currentTime = player.currentTime;
    angular.forEach($scope.data, function(value, key)
    {
        if (currentTime >= $scope.data[key].time && currentTime <= $scope.data[key].time + 0.3 && $scope.currentIndex != key)
        {
            console.log("load id:" + key);
            $scope.setActive(key); //Calling what works when I click a listItem
        }
    });
}); 
```

提示点处的`console.log`作品和日志，但是，直到我列出列表后，图像才会更新`MouseOver`。那时，图像将更新为任何`$scope.currentIndex`发生的情况。我完全迷失了这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:32:02.980

因为您是在典型的 Angular 执行上下文之外更新模型，所以您需要使用 scope.$apply() 以便 Angular 知道它需要运行 $digest 并可能更新视图。在此处查看有关 $apply 的更多信息：

[$rootScope.Scope.$apply](http://docs.angularjs.org/api/ng.%24rootScope.Scope#%24apply)

基本上，如果你在 $apply 中包装你对 setActive 的调用，那么 Angular 就会知道它需要更新视图。这应该可以解决问题：

```
player.addEventListener("timeupdate", function()
{
    currentTime = player.currentTime;
    angular.forEach($scope.data, function(value, key)
    {
        if (currentTime >= $scope.data[key].time && currentTime <= $scope.data[key].time + 0.3 && $scope.currentIndex != key)
        {
            console.log("load id:" + key);

            // Wrap the call in $apply so Angular knows to call $digest
            $scope.$apply(function() {
                $scope.setActive(key);
            });
        }
    });
}); 
```

# java - 没有服务元素的 Apache CXF wdsl2java 代码生成

> ID：15350367
> 
> 赞同：1
> 
> 时间：2013-03-11T23:08:22.243
> 
> 标签：java, web-services, cxf, onvif

我正在尝试为具有 wsdl 的 onvif 开发一个客户端，如下所示：

[http://www.onvif.org/onvif/ver10/device/wsdl/devicemgmt.wsdl](http://www.onvif.org/onvif/ver10/device/wsdl/devicemgmt.wsdl)

wsdl2java 运行良好并生成代码。但是，因为 wsdl 中没有元素，所以它不会生成服务类供我使用。它只为元素生成一个接口。

对于提供服务的每个设备，Web 服务的端点 URI 都会有所不同。我的问题是，鉴于该 URI，我应该如何获取 portType 接口的实例，以便我可以使用该接口与 Web 服务进行交互？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:51:24.373

您真的不需要它来创建服务类来利用生成的存根。可以使用类似于以下内容的内容：

```
import org.apache.cxf.jaxws.JaxWsProxyFactoryBean;

...

protected <T> T getService(final Class<T> serviceClass, final boolean useSoap12) {
    final JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();
    factory.setServiceClass(serviceClass);
    factory.setAddress(endpoint);
    if (useSoap12) {
        factory.setBindingId("http://schemas.xmlsoap.org/wsdl/soap12/");
    }
    return serviceClass.cast(factory.create());
} 
```

`serviceClass`带注释的接口 CXF 在哪里创建。

# c - 如何在 C 中使用 inotify？

> ID：15350369
> 
> 赞同：4
> 
> 时间：2013-03-11T23:08:26.083
> 
> 标签：c, inotify

我搜索了与inotify相关的问题，这个有点不同......

我使用以下代码来监视一个文件（不是目录）的更改。在测试中，当我保存目标文件时 read() 确实返回，这意味着它可以工作。但是 event->mask 是 32768 ，它不是 IN_MODIFY 并且名称为空。另一个问题：它无法连续监控。当我第二次更改文件时，它没有响应。感谢您的帮助！

```
#include <sys/inotify.h>
#include <unistd.h>
#include <stdio.h>

#define EVENT_SIZE  (sizeof (struct inotify_event))
#define BUF_LEN        (16 * (EVENT_SIZE + 16))

int main()
{
    int fd;
    fd = inotify_init();
    if (fd < 0)
        perror("inotify_init()");

    int wd;
    wd = inotify_add_watch(fd, "target.txt", IN_MODIFY);
    if (wd < 0)
        perror("inotify_add_watch");

    char buf[BUF_LEN];
    int len;

start:

    len = read(fd, buf, BUF_LEN);

    if (len > 0)
    {
        int i = 0;
        while (i < len)
        {
            struct inotify_event *event;
            event = (struct inotify_event *) &buf[i];

            printf("wd=%d mask=%x cookie=%u len=%u\n",
                event->wd, event->mask,
                event->cookie, event->len);

            if (event->mask & IN_MODIFY)
                printf("file modified %s", event->name);

            if (event->len)
                printf("name=%s\n", event->name);

            i += EVENT_SIZE + event->len;
        }
    }

    goto start;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T00:03:12.770

`0x8000`对应`IN_IGNORED`于。它在掩码中的存在表明`inotify`手表已被删除，因为文件已被删除。您的编辑器可能删除了旧文件并在其位置放置了一个新文件。第二次更改文件没有效果，因为手表已被移除。

由于您没有查看目录，因此未返回名称。

从[`inotify`手册页](http://man7.org/linux/man-pages/man7/inotify.7.html)。

> 该`name`字段仅在为监视目录中的文件返回事件时出现；它标识相对于监视目录的文件路径名。
> 
> ...
> 
> IN_IGNORED -- 显式删除监视 (inotify_rm_watch(2)) 或自动删除 (文件已删除，或文件系统已卸载)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T03:40:48.800

event->mask 32768 相当于 0x8000 即 IN_IGNORED 更多信息：“/usr/include/linux/inotify.h”

```
 if (event->mask & IN_IGNORED) {
        /*Remove watch*/ inotify_rm_watch(fileDescriptor,watchDescriptor)
        /*Add watch again*/ inotify_add_watch
    } 
```

# macos - 在 Mac OS X 10.8.2 上设置 OpenGL 和 GLFW

> ID：15350370
> 
> 赞同：1
> 
> 时间：2013-03-11T23:08:29.650
> 
> 标签：macos, opengl, terminal, osx-mountain-lion, glfw

我在 Mac 上设置 GLFW/OpenGL 时遇到问题。我正在运行一个完全更新的 Mac OSX 10.8.2，所以我假设我拥有最新的与 mac 兼容的 OpenGL 版本，并且我已经使用 homebrew（OS X 包管理器）编译了 GLFW 库（2.7.7）。

我正在尝试使用以下指南[open.gl](http://open.gl/context#GLFW "遵循 open.gl 指南")并使用推荐的代码片段来验证 OpenGL 和 GLFW 是否正常工作：

```
\#include <GL/glfw.h>

int main()
{
  glfwInit();
  glfwSleep( 1.0 );
  glfwTerminate();
} 
```

这应该会显示一个控制台应用程序并在一秒钟后退出。

我在终端中使用 g++ 进行编译并且没有收到任何编译错误：

```
g++ a.cpp -lglfw -framework OpenGL -framework Cocoa -framework IOkit 
```

当我运行程序时

```
 ./a.out 
```

什么都没有发生，但我确实在它关闭之前得到了 1 秒的延迟，所以我知道很多工作都在起作用。

让我知道是否有任何可能有用的进一步信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T19:58:50.523

您没有 GL 上下文或窗口 - 只是`command line`在终端上运行的应用程序。

请参阅`glfwOpenWindow`文档。

# login - ASP.NET 4 中的登录控件

> ID：15350372
> 
> 赞同：-1
> 
> 时间：2013-03-11T23:08:43.407
> 
> 标签：login

我在 ASP.NET 中使用登录控制表单，成功登录后想跟踪用户名以提供欢迎问候等。另外，如果任何用户试图直接进入随机页面而不通过身份验证，那么我想提出一个错误页面。我尝试了使用 Membership Control 的各种方法来检索用户名，但我遇到了错误。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T16:00:33.017

此任务有两个控件。LoginName 为您提供当前登录的用户名，另一个是 LoginStatus，它为您提供当前状态，无论用户是否成功登录。

```
if (User.Identity.IsAuthenticated == false)
{
    Response.Redirect("your_redirecting_url");
} 
```

# jsf - 在数组列表中插入元素以呈现空行

> ID：15350373
> 
> 赞同：0
> 
> 时间：2013-03-11T23:08:44.580
> 
> 标签：jsf, jsf-2, primefaces

我在前端使用 primefaces 并`selectOneList`在我的支持 bean 中使用 arraylist填充

我想让数组列表用*新行*分隔以进行一些逻辑分隔

如何将元素添加到`ArrayList`将呈现为*空行*的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T07:28:06.820

下面的代码将帮助您实现您想要的功能，即在`<p:selectOneListBox>`. 现在我不确定挤出空字符串是否是该组件的一个功能。所以`""`行不通。

这是一个示例托管 bean：

```
package app.so.dev.web.controller;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

import app.so.dev.web.model.Student;

@ManagedBean(name = "so15350373")
@ViewScoped
public class SO15350373 implements Serializable{

    private static final long serialVersionUID = 2190171095461884759L;
    private List<Student> students;
    private int selected;

    @PostConstruct
    public void init() {
        students = new ArrayList<Student>();
        students.add(new Student(1, "Student 1"));
        students.add(new Student(2, "&nbsp;"));
        students.add(new Student(3, "Student 3"));
        students.add(new Student(4, "&nbsp;"));
        students.add(new Student(5, "Student 5"));
        students.add(new Student(6, "Student 6"));
    }

    public List<Student> getStudents() {
        return students;
    }

    public void setStudents(List<Student> students) {
        this.students = students;
    }

    public int getSelected() {
        return selected;
    }

    public void setSelectedStudent(int selected) {
        this.selected = selected;
    }   
} 
```

这`Student`是一个简单的 POJO，有两个字段`id`和`name`. 为了简洁起见，我没有展示这个类：P。

这是xhtml：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" template="/WEB-INF/templates/globalTemplate.xhtml">

    <ui:define name="title">15350373</ui:define>
    <ui:define name="content">
        <h:form>
            <p:selectOneListbox value="#{so15350373.selected}" id="list">
                <f:selectItems value="#{so15350373.students}" var="student" itemLabel="#{student.name}" itemValue="#{student.id}" />
            </p:selectOneListbox>
        </h:form>
    </ui:define>

</ui:composition> 
```

# c# - SharePoint 2013 Visual Studio 工作流列表IId

> ID：15350382
> 
> 赞同：1
> 
> 时间：2013-03-11T23:09:37.100
> 
> 标签：c#, visual-studio, sharepoint, sharepoint-workflow

我正在尝试使用 Visual Studio 2012 在 SharePoint 2013 上实现一些工作流以用于学习目的。我现在正在处理的工作流程非常简单，它应该将一个列表项复制到另一个列表，但是在获取另一个 ListId 时出现异常。

所以事情是这样的，

*   *首先，我使用GetCurrentListId*活动获取当前列表 guid ，并将其保存到 System.Guid 类型的变量中。
*   *之后，我使用GetCurrentItemGuid*活动获取当前项目 guid ，并将其保存到另一个 System.Guid 类型的变量
*   最后，我使用了*CopyItem* Activity，这个 Activity 需要三个参数：*ListId*、*ItemGuid*和*ToListId*。由于我没有找到任何获得 ListId 的活动，因此我在*ToListId*组合框中选择了我想要的列表，并将其写入表达式编辑器：

    ```
    System.Guid.Parse("{$ListId:List2;}") 
    ```

很简单，对吧？但是当我运行工作流时，我得到了这个异常：

Dispatcher 遇到意外异常：System.Runtime.CallbackException：对 WorkflowInstance 'b1eb965e-d6e4-47d3-9170-ae2677897947' 上的 OnRequestAbort 的调用引发了异常。这被认为是致命的。有关详细信息，请参阅内部异常。---> System.AggregateException：如果通知持久空闲，则应进行处理。---> System.AggregateException：发生一个或多个错误。---> System.FormatException：索引（从零开始）必须大于或等于零且小于参数列表的大小。

我不知道它为什么会抛出该异常，并且我还没有找到任何其他方法来获取不是工作流上下文的 CurrentList 的列表的 GUID。

请有点帮助....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-28T10:21:47.323

> 来自：Shawn Baerwald ( [http://answers.flyppdevportal.com/categories/azure/workflow.aspx?ID=d9b2e284-13e2-431b-8299-b3b4510942ce](http://answers.flyppdevportal.com/categories/azure/workflow.aspx?ID=d9b2e284-13e2-431b-8299-b3b4510942ce) )

Fix/HACK 涉及选择列表之一，单击省略号 (...) 并在生成的编辑框中替换：

```
System.Guid.Parse("{$ListId:Lists/Tasks;}") 
```

使用列表 GUID：

```
System.Guid.Parse("{4CGG7172-6EB0-4414-82E6-92BBE8A5E64A}") 
```

# c# - 如何在 c# 中为我的组合框项目添加价格？

> ID：15350383
> 
> 赞同：0
> 
> 时间：2013-03-11T23:09:40.897
> 
> 标签：c#, winforms, combobox

我想知道如何将价格添加到以下内容：

```
private void OrderForm_Load(object sender, EventArgs e)
{
    comboBox1.Items.Add("0");
    comboBox1.Items.Add("10");
    comboBox1.Items.Add("20");
    comboBox1.Items.Add("30");
    comboBox1.Items.Add("40");
    comboBox1.Items.Add("50");
    comboBox1.Items.Add("60");
    comboBox1.Items.Add("70");
    comboBox1.Items.Add("80");
    comboBox1.Items.Add("90");
    comboBox1.Items.Add("100");
    comboBox2.Items.Add("None");
    comboBox2.Items.Add("Chocolate");
    comboBox2.Items.Add("Vanilla");
    comboBox2.Items.Add("Strawberry");
    comboBox3.Items.Add("Paypal");
    comboBox3.Items.Add("Visa Electron");
    comboBox3.Items.Add("MasterCard");
    comboBox4.Items.Add("None");
    comboBox4.Items.Add("Small");
    comboBox4.Items.Add("Medium");
    comboBox4.Items.Add("Large");
} 
```

“0 - 100”数字的价格应该是“15 英镑”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:22:58.247

组合框将方法的结果显示`ToString`为项目的名称。这意味着您可以创建自己的包含名称和价格的对象，并覆盖`ToString`以仅显示名称。例如：

```
public class MyItem
{
    private readonly string name;
    public string Name
    {
        get { return this.name; }
    }

    private readonly decimal price;
    public decimal Price
    {
        get { return this.price; }
    }

    public MyItem(string name, decimal price)
    {
        this.name = name;
        this.price = price;
    }

    public override string ToString()
    {
        return this.name;
    }
} 
```

然后创建并添加您自己的对象。

```
comboBox2.Items.Add(new MyItem("Chocolate", 10.00m));
comboBox2.Items.Add(new MyItem("Vanilla", 15.00m));
comboBox2.Items.Add(new MyItem("Strawberry", 8.50m)); 
```

每当您从组合框中获得一个项目（例如当前选定的项目）时，该`Price`属性都会告诉您价格。例如：

```
MyItem selectedItem = (MyItem)comboBox2.SelectedItem;
decimal totalPrice = selectedItem.Price + 1.00m /* Shipping */; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:40:27.620

要直接回答您的问题，您可以使用 ComboBox.SelectedIndex 值，如下所示：

```
if (comboBox4.SelectedIndex < 100) {
    price = 15;
} 
```

我**不会**把它放在我的代码中。以这种方式编写代码会让人尖叫“维护地狱”，因此请考虑重构代码。我打算按照 Martin 的使用面向对象存储名称/价格的解决方案提出一个建议，所以我建议尝试一下。

# jsp - JSP servlet 向第三方页面发出 POST 请求

> ID：15350384
> 
> 赞同：1
> 
> 时间：2013-03-11T23:09:42.623
> 
> 标签：jsp, servlets, post

我目前正在做一个学校项目，我必须为一个基于云的商店做一个前端。所有库存、用户信息和资料都在第三方网页上，我们称之为 www.cloud.com。

要检查数据库中的用户，我必须使用请求正文中带有用户名和密码的 xml 向 www.cloud.com/login 发出 POST 请求。然后它将以包含 LoginResponse 的 xml 进行响应，然后我的 servlet 必须处理该响应以查看它是否成功。

阅读此内容后 - **[http://www.javaranch.com/journal/200603/Journal200603.jsp#a5](http://www.javaranch.com/journal/200603/Journal200603.jsp#a5)**我对如何设计系统有了一个很好的想法，但我不太擅长 JSP。

所以我的问题是，如何让我的 servlet 向第三方页面发出 POST 请求？

我在网上搜索了很多关于这个的帖子。根据我的阅读，显然不可能从 servlet 执行常规 POST 请求。我看到了一种解决方法，您可以手动发送整个 HTTP 消息，但必须有更好的方法来做到这一点。

我认为我应该在 .jsp 页面上创建一个表单，对 servlet 执行 POST 操作，这应该调用 servlet 上的 doPost() 方法。然后我应该使用正确的正文将此请求重定向到 www.cloud.com/login。但是后来我不明白如何拦截响应，所以我的 servlet 可以检查登录是否成功。

好吧，我希望这对你有意义。谢谢你的帮助。

/莫腾

# java - FileNotFoundException，文件存在 Java

> ID：15350392
> 
> 赞同：2
> 
> 时间：2013-03-11T23:10:14.530
> 
> 标签：java, file-io, mp3, filenotfoundexception, jlayer

我有一个非常奇怪的问题，我正在尝试使用一些 Java 代码和 JLayer 播放一些 MP3。我有一个方法设置来生成文件路径，但这让我很伤心。这是返回语句（以及该方法中涉及的所有代码）：

```
private static String findSoundFile(String numSeq)
{
    return "file:///Users/user/Desktop/FinishedPhone/" + numSeq + ".mp3"
} 
```

我有一组大约 150 个 mp3 文件，全部命名为 1.mp3、2.mp3 等。它们最多可达 156 个（中间有一些缺失）。根据用户输入的 3 位代码，它会播放其中一种声音。这段代码**完美地**适用于 1-99 之间的任何东西，当你到达 100 时它会停止工作。当用户输入 100 或 110 或你有什么时，Java 会抛出 FileNotFoundException。我向你保证，文件在那里。下面是使用 findSoundFile 返回的文件路径的代码：

```
public static void processNumberSequence(String numSeq) throws IOException
{
    if (numSeq != "")
    {
        String soundLoc = findSoundFile(numSeq);
        File file = new File(soundLoc);
        System.out.println("System can read: " + file.canRead());
        System.out.println(soundLoc);
        SoundPlayer soundToPlay = new SoundPlayer(soundLoc);
        soundToPlay.play();
    }
} 
```

当我填写 numSeq 应该填写的空间时，它变得更奇怪了，如下所示：

```
private static String findSoundFile(String numSeq)
{
    return "file:///Users/user/Desktop/FinishedPhone/110.mp3";
} 
```

上面的代码工作正常，播放声音没有挂断。任何想法将不胜感激，如果有任何困惑，请询问。

堆栈跟踪：

```
java.io.FileNotFoundException: /Users/user/Desktop/FinishedPhone/111.mp3 (No such file or directory)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:120)
at java.io.FileInputStream.<init>(FileInputStream.java:79)
at sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:70)
at sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:161)
at java.net.URL.openStream(URL.java:1010)
at SoundPlayer.play(SoundPlayer.java:26)
at SerialProcessor.processNumberSequence(SerialProcessor.java:37)
at SerialTest.serialEvent(SerialTest.java:98)
at gnu.io.RXTXPort.sendEvent(RXTXPort.java:732)
at gnu.io.RXTXPort.eventLoop(Native Method)
at gnu.io.RXTXPort$MonitorThread.run(RXTXPort.java:1575) 
```

ls -l 文件之一：

```
-rw-r--rw-  1 user  staff  432923 Feb 27 14:15 /Users/user/Desktop/FinishedPhone/111.mp3 
```

ls -l 用于 100 岁以下的人：

```
-rw-r--rw-  1 user  staff  480570 Feb 25 20:43 /Users/user/Desktop/FinishedPhone/99.mp3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:00:15.007

你的 numSeq 有问题。试着像这样修剪它

```
 return "file:///Users/user/Desktop/FinishedPhone/" + numSeq.trim() + ".mp3 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-11T23:54:46.380

好吧，我想问题在于您`file://`在路径前面使用了方案。我不确切知道`File(String pathname)`使用此方案时的行为方式。File 类采用许多构造函数，尤其是`File(URI uri)`Javadoc 中说的这个：

> 通过将给定的 file: URI 转换为抽象路径名来创建一个新的 File 实例。

所以，在我看来，你应该使用这个构造函数而不是之前的构造函数。让我向您展示一些证明我所说的话的代码：

```
 public class FileTest {

    /**
     * @param args
     * @throws URISyntaxException 
     */
    public static void main(String[] args) throws URISyntaxException {
        // TODO Auto-generated method stub
        String pathWithNoScheme = "/home/dimitri/workspace/Coursera/collinear/input6.txt";
        String pathWithScheme = "file://" + pathWithNoScheme;
        URI uri = new URI(pathWithScheme);

        File fileWithNoScheme = new File(pathWithNoScheme);
        System.out.println(fileWithNoScheme.canRead()); //returns true

        File fileWithScheme = new File(uri);
        System.out.println(fileWithScheme.canRead()); //returns true

        fileWithNoScheme = new File(pathWithScheme);
        System.out.println(fileWithNoScheme.canRead()); //returns false

    }

} 
```

如您所见，将`file://`方案传递给`File(String pathName)`构造函数时，它返回 false，但是当我将其传递给 URI 时，它返回 true。

所以更改`findSoundFile`为返回一个`URI`而不是一个字符串或将此方法的返回值包装到一个URI

# java - 我可以使用 Java 访问 Lookback 数据吗？

> ID：15350394
> 
> 赞同：0
> 
> 时间：2013-03-11T23:10:24.173
> 
> 标签：java, rally, lookbackapi

有没有办法从 Java 访问历史数据？我目前正在使用 rally-rest-api (1.0.6) 来提取任务信息。但我想扩展我的查询以包含历史数据。Lookback API 是否仅限于 Javascript？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:55:24.557

虽然 Lookback API (LBAPI) 不限于 Javascript，但 Rally 的 AppSDK2 Javascript 工具包目前是 Rally API，其中构建了 Rally 构建的挂钩以访问 LBAPI 数据。这是通过[Snapshotstore](https://developer.help.rallydev.com/apps/2.0p5/doc/#!/api/Rally.data.lookback.SnapshotStore)提供的。

尽管 AppSDK2 享有特定于 LBAPI 的数据访问功能的好处，但没有特定于语言的 LBAPI。它是一个基于 REST 的 API，可通过任何支持 RESTful 与 Web 服务（包括 java）交互的客户端完全访问。事实上，您可以使用与[Rally 的 Java REST API](https://developer.help.rallydev.com/java-toolkit-rally-rest-api)相同的 Apache 公共功能和 Google GSON Json 解析实用程序，也可以在您自己的代码中实现它们以直接查询 LBAPI。不过，您将使用 Apache 和 GSON 库自己开发 LBAPI 查询挂钩。

回溯 API 文档：

[https://rally1.rallydev.com/analytics/doc](https://rally1.rallydev.com/analytics/doc)

包含有关如何利用 LBAPI REST 端点、如何制定查询以及期望响应的数据类型/格式的可行摘要。

随着 LBAPI 的成熟，我预计 Rally 的 Java、.NET 和 Ruby 工具包将扩展为包括内置的 LBAPI 查询功能。

# java - java -ORBInitialPort 中的 Java 参数

> ID：15350395
> 
> 赞同：0
> 
> 时间：2013-03-11T23:10:33.310
> 
> 标签：java, options

是否可以创建一个类的实例，同时为其提供 java 选项？

我试过了：

```
 String[] arg =  {"-ORBInitialPort 1050"};
        new LMS(arg); 
```

这没有用。我不确定这是否可能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T08:22:58.247

更多的上下文在这里真的很有帮助。运行您的程序的 java 进程的示例调用会很好，因为“java 选项”至少对我来说意味着修改 JVM 行为并且不传递给程序的 Java 选项。

LMS 类构造函数的标头也很好，因为您调用它的方式没有多大意义。

由于它不在这里，让我们回答更多的可能性。

通过 Java 选项，您可能意味着

1.  修改 JVM 设置的选项（根据您的示例，情况并非如此）
2.  作为参数传递给程序的`public static void main(String [] args)`参数
3.  Java 系统属性指定为带有`-D`参数的 JVM 选项

对于 2 - 解析选项数组并将结果保存到变量中。然后将变量传递给类。更具体地说，您需要提供更多信息。您还可以使用 Java 选项解析库，例如[JewelCli](http://jewelcli.lexicalscope.com/)或[Apache Commons CLI](http://commons.apache.org/proper/commons-cli/)。

对于 3 - 使用`-D`参数运行 java 进程并指定属性名称和值，例如，您可以通过方法调用`-DwhateverName=whateverValue`获取此参数的值。`System.getProperty()`

# wpf - WPF 将树视图选择填充到文本框中

> ID：15350396
> 
> 赞同：0
> 
> 时间：2013-03-11T23:10:36.240
> 
> 标签：wpf, textbox, treeview

任何帮助表示赞赏。我对 WPF 很陌生。我有一个由 xml 文件填充的树视图。选择树视图项目后，我需要它显示在文本框中。I have the treeview inside a popup and I've got it so that when the textbox in question is selected, it will bring up the popup with treeview prompting the user to make a selection on the treeview. 之后，它应该将该树视图选择放回同一个文本框中。这是我的代码：

```
 <TextBox Name="text"
    Text="{Binding Path=SelectedItem.name, ElementName=dirTree}"
    Style="{StaticResource CustomTextBoxStyle}"
    Grid.Column="1"
    Margin="47,326,110,140"
    TextChanged="text_TextChanged" /> 
```

树视图部分：

```
 <Popup PlacementTarget="{Binding ElementName=text}"
                       VerticalOffset="20"
                       HorizontalOffset="-180"
                       Margin="0,0,465,279"
                       Name="popup1"
                       AllowsTransparency="True"
                       Placement="Top">
                    <Popup.Style>
                        <Style TargetType="{x:Type Popup}">
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding ElementName=text, Path=IsFocused}"
                                             Value="True">
                                    <Setter Property="IsOpen"
                                            Value="True" />
                                </DataTrigger>
                                <!--<DataTrigger Binding="{Binding ElementName=popupText, Path=IsFocused}"
                                             Value="True">
                                    <Setter Property="IsOpen"
                                            Value="True" />
                                </DataTrigger>-->
                            </Style.Triggers>
                        </Style>
                    </Popup.Style>
                    <Grid>
                        <Border BorderThickness="2"
                                Background="DodgerBlue"
                                BorderBrush="DodgerBlue"
                                Padding="0"
                                CornerRadius="6">

                            <ScrollViewer Height="300"
                                          Name="scrollViewer1"
                                          Width="175"
                                          BorderBrush="Black"
                                          Background="DodgerBlue">
                                <TreeView Name="dirTree"
                                          ItemsSource="{Binding Source={StaticResource xmldata}, XPath=.}"
                                          VirtualizingStackPanel.IsVirtualizing="False"
                                          VirtualizingStackPanel.VirtualizationMode="Standard"
                                          GotFocus="TreeView1_GotFocus"
                                          SelectedItemChanged="{Binding ElementName=dirTree, Path=SelectedItem}"/>
                            </ScrollViewer>
                        </Border>
                    </Grid>

                </Popup> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:50:22.790

在 TreeView 中的 SelectedItemChanged 事件上创建一个事件处理程序，然后从那里更新您的 TextBlock.Text。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <TreeView x:Name="demoTreeView"
              Margin="10"
              SelectedItemChanged="demoTreeView_SelectedItemChanged">
    </TreeView>

    <TextBlock x:Name="demoTextBox" Grid.Row="1"/>
</Grid> 
```

在 .cs 文件中：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        demoTreeView.Items.Add("test1");
        demoTreeView.Items.Add("test2");
        demoTreeView.Items.Add("test3");
        demoTreeView.Items.Add("test4");
    }

    private void demoTreeView_SelectedItemChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
    {
        demoTextBox.Text = e.NewValue.ToString();
    }

} 
```

个性我建议您在属性上使用 MVVM 和绑定，以便在 xaml 和代码隐藏之间实现良好的解耦。

# assembly - 有没有办法让 sbcl 打印出 CPU 寄存器的值？

> ID：15350409
> 
> 赞同：7
> 
> 时间：2013-03-11T23:11:59.097
> 
> 标签：assembly, common-lisp, x86-64, cpu-registers, sbcl

有没有办法让 SBCL 在我的程序中的某个点获取 CPU 寄存器的值并将其打印为整数？

我必须使用gdb吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T23:50:04.530

是的，您可以使用[VOP（虚拟操作）](http://sbcl-internals.cliki.net/VOP)访问 CPU 寄存器。在 VOP 中，您也可以在汇编中编写代码，因此从这个意义上说，您可以使用像 gcc 扩展汇编这样的 VOP。

因此，这是一个示例 VOP 和执行它的相关函数。VOP 接收两个无`get-cpuid-eax`符号 32 位参数作为输入，将它们存储在`eax`and中`ecx`，执行`cpuid`指令，并在调用 VOP的to函数`eax`之后返回寄存器的值。然后该函数将值存储在. 您可以使用 轻松打印该值。`cpuid``get-cpuid-eax``get-cpuid-eax``*result*``(format t "~a" *result*)`

注意：有一些问题（SBCL 或我的代码中的错误？）导致此代码始终无法正常执行。重新编译和重新加载通常会有所帮助。我已经确认了扩展程序集的`cpuid` `eax`输出并在. 对于和中的相同值，所有结果都相同。`gcc``gdb``eax``ecx`

**编辑：**更改函数和 VOP 名称以`get-cpuid-eax`避免与变量名称混淆。

**编辑：**使用 slimv 修复代码格式。

```
(sb-vm::defknown get-cpuid-eax
                 ((无符号字节 32) (无符号字节 32))
                 （无符号字节 32）
                 (sb-c::foldable sb-c::flushable sb-c::movable))

(sb-vm::define-vop (get-cpuid-eax)
  （：政策：快速安全）
  (:translate get-cpuid-eax)
  (:args
    (my-eax :scs (sb-vm::unsigned-reg) :target eax)
    (my-ecx :scs (sb-vm::unsigned-reg) :target ecx))
  (:arg-types sb-vm::unsigned-num sb-vm::unsigned-num)
  （：暂时的
    (:sc sb-vm::unsigned-reg :offset sb-vm::eax-offset)
    eax)
  （：暂时的
    (:sc sb-vm::unsigned-reg :offset sb-vm::ecx-offset)
    ecx)
  （：结果
    (我的结果:scs (sb-vm::unsigned-reg)))
  (:result-types sb-vm::unsigned-num)
  （：发电机
    0
    (sb-vm::move eax my-eax)
    (sb-vm::move ecx my-ecx)
    (sb-vm::inst cpuid)
    (sb-vm::move my-result eax)))

(defun get-cpuid-eax (my-eax my-ecx)
  （声明（类型（无符号字节 32）my-eax my-ecx）
           （优化（速度 3）（安全 0）））
  (defparameter *result* (get-cpuid-eax my-eax my-ecx)))

```

我发现一些 VOP 很短的网站在编写代码时非常有用：

[Dmitry Kaliyanov 的文章“Добавление примитивов виртуальной машины SBCL”（“添加 SBCL 的原始虚拟机”，俄语）](http://lisper.ru/articles/sbcl-add-vop)

[Dmitry Kaliyanov 文章的 Lisp 代码（上图）](http://lisper.ru/apps/format/138)

[Dmitry Ignatiev 的博客条目：SBCL、x86、SSE（俄语）](http://love5an.livejournal.com/355007.html)

[Christophe Rhodes 的演示幻灯片 (pdf)：不便携但很有趣：使用 SBCL 内部](http://www.doc.gold.ac.uk/~mas01cr/talks/2009-05-28%20Milan/slides.pdf)

[kurohuku 的博客条目：“SBCLでCPUID”（日文）](http://kurohuku.blogspot.fi/2009/11/sbclcpuid.html)

[交换字节源代码文件 sbcl-vops.lisp](http://code.ohloh.net/file?fid=I_wCnWaAPDmkEZXGU5xjPHan1Hg&cid=JR-T9Jqewb4&s#L0)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-25T09:28:42.890

cpuid 示例的另一个来源（也支持 64 位）来自优秀的 stmx CL 库。

*   [已知形式](https://github.com/cosmos72/stmx/blob/9a704e142216015783e8bb1f8d7cb8d90a14f6f9/asm/compiler.lisp#L113)
*   [声音](https://github.com/cosmos72/stmx/blob/9a704e142216015783e8bb1f8d7cb8d90a14f6f9/asm/x86-32%2C64-vops.lisp)
*   [包装函数](https://github.com/cosmos72/stmx/blob/9a704e142216015783e8bb1f8d7cb8d90a14f6f9/asm/cpuid.lisp)

# c# - Int64 在 C# 中似乎太短了

> ID：15350412
> 
> 赞同：0
> 
> 时间：2013-03-11T23:12:10.147
> 
> 标签：c#, visual-studio-2010

我正在尝试将最大的 int64 值写入命令行。我尝试使用`0x1111111111111111`16 个，Visual Studio 说它是 int64。我会假设那将是int16。这里缺少什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T23:13:45.080

`0x`是十六进制而不是二进制文字的前缀。这意味着您的号码的二进制表示是`0001000100010001000100010001000100010001000100010001000100010001`

不幸的是，C# 中没有二进制文字，因此您必须自己进行计算 ( `0x7FFFFFFFFFFFFFFF`) 或使用`Convert`类，例如：

```
short s = Convert.ToInt16("1111111111111111", 2); // "2" for binary 
```

为了获得最大的*Int64*数字，您不需要执行任何自己的计算，因为它已经在此字段中可供您使用：

```
Int64.MaxValue 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T23:17:14.457

字面`0x1111111111111111`量是一个十六进制数。每个十六进制数字都可以用四位表示，因此对于 16 个十六进制数字，您需要 4*16 = 64 位。您可能打算写二进制数`1111111111111111`。您可以使用以下代码将二进制文字字符串转换为整数：

```
Convert.ToInt16("1111111111111111", 2) 
```

这将返回所需的数字 (-1)。

要获得最大的值`Int64`，您可以使用`Int64.MaxValue`( `0x7FFFFFFFFFFFFFFF`)，或者如果您真的想要无符号值，您可以使用`UInt64.MaxValue`( `0xFFFFFFFFFFFFFFFF`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T23:16:08.323

最大的 Int64 值是[Int64.MaxValue](http://msdn.microsoft.com/en-us/library/system.int64.maxvalue.aspx)。要以十六进制打印，请尝试：

```
Console.WriteLine(Int64.MaxValue.ToString("X")); 
```

# jquery - 使用命名参数时调试 $.getJSON() 提供不同的结果

> ID：15350414
> 
> 赞同：-1
> 
> 时间：2013-03-11T23:12:20.577
> 
> 标签：jquery, ajax, apache, .htaccess, requirejs

我正在为 jQuery 中似乎非常奇怪的行为而烦恼。

```
 define ['jquery', 'models/ConfigModel'], ($,  ConfigModel) ->
   class MyController
     initialize: () ->
       confData = $.getJSON('/config.json', (data) -> console.log data) 
```

这工作得很好。它返回 config.json 的内容

```
 define ['jquery', 'models/ConfigModel'], ($,  ConfigModel) ->
     class MyController
       initialize: () ->
         confData = $.getJSON
           url: '/config.json' 
           success: (data) -> console.log data 
```

这将返回 index.html 的内容，这可能是由于服务器的 .htaccess 文件所致。

```
 RewriteEngine On
   RewriteRule ^(js|css|media|api|pie|templates|config.json) - [L,NC]
   RewriteCond %{REQUEST_FILENAME} !index.html
   RewriteRule .* index.html [QSA,L] 
```

我也尝试在 Chrome 控制台中使用 JS，并得到了相同的结果。

```
 //works well
   $.getJSON('/config.json', function(data) {console.log(data)}) 
   //index.html
   $.getJSON({url:'/config.json', success: function(data) {console.log(data)}}) 
```

由于我有一个解决方法，因此该解决方案对我来说不如任何人关于调试此类情况的方法的想法重要。

**编辑：**

```
 $.getJSON({url:'/config.json', success: function(data) {console.log(data)}})
    XHR finished loading: "http://site.dev/[object%20Object]]".

     $.getJSON('/config.json', function(data) {console.log(data)})
     XHR finished loading: "http://site.dev/config.json". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:23:31.160

这是 的足迹`getJSON`：

```
jQuery.getJSON( url [, data ] [, success(data, textStatus, jqXHR) ] ) 
```

我从[文档](http://api.jquery.com/jQuery.getJSON/)中复制了这个。您根本*没有*按照您想要的方式使用此功能。

`$.ajax()`如果要传递具有所有设置的对象，则应该使用。

# ios - 计算 UITableView 上的选定行数

> ID：15350417
> 
> 赞同：3
> 
> 时间：2013-03-11T23:12:44.913
> 
> 标签：ios, uitableview

我有以下代码来计算表（tableview1）中选定行的数量。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell * cell = [tableView cellForRowAtIndexPath:indexPath];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }
    int count = 0;
    selectedindex1 = indexPath.row;
    for (NSIndexPath *indexPath in tableview1.indexPathsForSelectedRows) {
        count = count + 1;
    }
    rowcount = count;
} 
```

其中 selectedindex1 和 rowcount 是整数变量。

只要您假设用户不会选择已选择的行，此代码就可以工作。如果这样做，应用程序将无法判断正确的选定行数，因为这样的操作不会触发 didSelectRowAtIndexPath 方法。有没有更好的方法来计算所选行的数量？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T23:26:27.737

我认为这很简单：

```
[[tableView indexPathsForSelectedRows] count] 
```

再说一次，这正是您的代码所做的：

```
int count = 0;
for (NSIndexPath *indexPath in tableview1.indexPathsForSelectedRows) {
    count = count + 1;
}
rowcount = count; 
```

你到底想要发生什么？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T23:22:19.337

也许只保留一个已选择的 indexPath 的运行数组。这样，您就不必担心选择相同的两次。

- 在 vi​​ewDidLoad 中初始化一个数组

```
 NSMutableArray *yourSelectedRowsArray = [[NSMutableArray alloc]init]; 
```

- 然后在 didSelectRowAtIndexPath... 做这样的事情：

```
if(![yourSelectedRowsArray containsObject:indexPath])
{
    [yourSelectedRowsArray addObject:indexPath];
}

NSLog(@"the number of selected rows is %d",yourSelectedRowsArray.count); 
```

- 在 didDeselectRowAtIndexPath.. 中做类似的事情：

```
if([yourSelectedRowsArray containsObject:indexPath])
    {
        [yourSelectedRowsArray removeObject:indexPath];
    }

NSLog(@"the number of selected rows now is %d",yourSelectedRowsArray.count); 
```

然后只需在您想使用它的任何地方访问数组的计数，您就会拥有选定的行数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T23:43:44.300

好的。就像下面这样简单。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    rowcount =  [[tableView indexPathsForSelectedRows] count];
}

- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {
    rowcount =  [[tableView indexPathsForSelectedRows] count];
} 
```

# android - 拦截动态壁纸触摸事件？

> ID：15350420
> 
> 赞同：0
> 
> 时间：2013-03-11T23:12:53.217
> 
> 标签：android, live-wallpaper, touch-event

如果我有一个显示在用户壁纸上方的活​​动，有什么方法可以阻止壁纸接收我已经处理的触摸事件？从 onTouchEvent 返回 true 或 false 似乎没有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:08:58.447

我想通了！

```
private View empty;

@Override public void onCreate(Bundle savedState)
{
    super.onCreate(savedState);
    empty = new View(this);
    setContentView(empty);
}

@Override public void onAttachedToWindow()
{
    View topview = getLayoutInflater().inflate(R.layout.mylayout, null);
    PopupWindow pw = new PopupWindow(topview);
    pw.setWindowLayoutMode(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    pw.showAtLocation(empty, 0, 0, 0);
} 
```

关键见解来自研究[WindowManagerService.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2.1_r1/com/android/server/WindowManagerService.java#WindowManagerService.dispatchPointerElsewhereLocked%28com.android.server.WindowManagerService.WindowState,com.android.server.WindowManagerService.WindowState,android.view.MotionEvent,long,boolean%29)的源代码；具体来说，这部分：

```
if (srcWin != null
    && pointer.getAction() == MotionEvent.ACTION_DOWN
    && mWallpaperTarget == srcWin
    && srcWin.mAttrs.type != WindowManager.LayoutParams.TYPE_KEYGUARD) {
        sendPointerToWallpaperLocked(relWin, pointer, eventTime);
} 
```

动态壁纸必须满足以下四个条件才能接收触摸事件：

1.  `srcWin`（注定要接收触摸的窗口）必须是非空的。我不知道这个检查什么时候会失败，但我认为可以安全地假设这不是一个解决方案。
2.  事件必须是`ACTION_DOWN`为了执行这些检查。如果初始向下已被转发到壁纸，其他代码会将触摸事件转发到壁纸，而无需进行所有这些检查。也不是解决办法。
3.  `mWallpaperTarget`, 壁纸正在下方显示的窗口, 必须等于`srcWin`, 触摸的目标窗口。
4.  窗户不能是键卫。由于 Android 不再允许非系统应用程序使用`TYPE_KEYGUARD`，这不是一个解决方案。

那么诀窍就是在顶部简单地分层另一个窗口！因此，我们现在有一个按以下顺序排列的窗口：

*   壁纸 窗口
*   `mWallpaperTarget`具有`@android:style/Theme.Holo.Wallpaper.NoTitleBar`或类似的活动窗口。
*   `srcWin`， 这`PopupWindow`

由于 Android 只检查严格相等，并且`mWallpaperTarget`!= `srcWin`，触摸不会转发到壁纸，并且不允许交互。

# deployment - Tomcat6 未应用已部署 WAR 文件中的更改

> ID：15350423
> 
> 赞同：0
> 
> 时间：2013-03-11T23:13:00.233
> 
> 标签：deployment, tomcat6

假设应用程序`myapp`位于 Tomcat 的`webapps`. 它通过 部署在那里`myapp.war`，它被放入`webapps`. 最常见的部署形式。

但是，在我对 WAR 组成部分（例如 JSP）进行更改并重新部署 WAR（通过在 webapps 中删除存档后扩展存档来确保更改进入 WAR）后，我启动服务器并且更改不会部署到`myapp`最终目录。如果我完全删除目录，则更改会生效，但是当我刚刚更新时。

有谁知道为什么会出现这个错误以及我需要做些什么来解决这个部署问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T18:52:01.367

进入 webapp 中的项目目录，进入模块目录（rename-to='module_name'）并删除所有文件，但不要删除目录

# javascript - 如何让我的 jquery 发布请求与单击时从函数存储的变量一起使用？

> ID：15350426
> 
> 赞同：1
> 
> 时间：2013-03-11T23:13:06.503
> 
> 标签：javascript, jquery, ajax

一旦用户单击按钮，我一直在试图将游戏名称传递给我的 php 函数。这个想法是用户单击一个按钮，该按钮具有其视频游戏名称的值，然后 php 脚本检查该游戏的排名并将该排名返回到 html。我之前已经使发布请求工作，即使在这里我手动将变量名称设置为其中一个游戏来测试它，它也可以工作。请帮忙！

```
<script>
$(document).ready(function(){
    //global n variable
    n = $();

        $('#target').click(function(){
            //set value of n to the game's name
                n = $(this).val();

        });

        //then send the name as term to my php function to deal with it and return 
        //the ranking
    $.post('getTotal.php', {term: n}, function(data){
        //been trying to see if anything comes through for debugging purposes
                alert(data);

        //commented this out for now, just puts it in the div I left open
        //$('#total').html(data);
    });

});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:16:34.363

你应该把它`$.post`放到你的点击处理程序中......所以它只会在你真正点击按钮时运行......现在你的代码设置了一个`n`变量，它的值是一个空的jQuery对象（为什么？）。然后它在按钮上附加一个点击处理程序。然后它运行一个`$.post`请求——`n`仍然是一个空的 jQuery 对象。单击按钮会在很久以后发生......

此外，应避免使用全局变量。`var`声明变量时应使用关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:51:12.707

只需当用户单击按钮时。在点击处理程序中，获取值并执行 http post

$ajax 或 $POST

例如 -

```
$(document).ready(function() {
      $('#target').click(function()
            $.ajax({  
              type: "POST",
              url: "url...",
              data: "n="+nVal+",
              success: function(html){
                alert( "Submitted");
              }
           });
      });
}); 
```

# ruby-on-rails - 使用 Rails 3 的 Chrome 中的 Google Analytics MIME 类型问题

> ID：15350427
> 
> 赞同：10
> 
> 时间：2013-03-11T23:13:07.343
> 
> 标签：ruby-on-rails, google-chrome, google-analytics

我正在将 GA 添加到 Rails 3 应用程序，当然这通常非常简单。我已经添加了 GA JS 片段，它渲染得很好。一切都在 Safari 中完美运行。然而，在 Chrome 中，它给了我一个控制台错误：资源解释为脚本，但使用 MIME 类型 text/html 传输：“about:blank”，指向加载 ga.js 文件的 JS 行：s.parentNode.insertBefore(气体）。我调查过的一些事情：

*   我用 JS 片段创建了一个计划 HTML 页面，它在 Chrome 中加载到 Rails 外部，没有错误。
*   同一个 HTML 页面，当放入 /public 时，会出现上述错误。
*   根据 Firebug，从 /public 在 Safari 中加载的同一个 HTML 页面不会给出任何错误。
*   我在 Chrome 中尝试了 GA Debug 扩展，但它保持沉默，因为 ga.js 没有被加载。

查看 Chrome 中的开发者控制台，我看到对“ [http://www.google-analytics.com/ga.js](http://www.google-analytics.com/ga.js) ”的请求似乎保持在“待定”状态，并且似乎重定向到“about:blank”由[http://www.google-analytics.com/ga.js](http://www.google-analytics.com/ga.js)发起，这没什么意义。

所以这似乎与 Rails 相关（因为该片段在 Rails 之外的 HTML 中工作），并且不影响 Safari，但除此之外我很困惑。希望我只是盯着它看错了，其他人会指出对我来说显而易见的......？有人遇到过这个吗？任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-29T19:21:56.330

我自己遇到了这个问题。我的网站（g+、twitter 和 fb）上的“断开连接”禁用了共享按钮。必须将其删除才能正确查看该站点。

# javascript - 更改球边框颜色

> ID：15350431
> 
> 赞同：1
> 
> 时间：2013-03-11T23:13:32.237
> 
> 标签：javascript, html, canvas

因此，当在 Canvas Html5 中绘制一个球时，我注意到它周围有一个默认边框，它是黑色的，厚度大约为 1？你知道如何改变颜色吗？我已经知道如何使用 CanvasContext.lineWidth 更改颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:18:54.550

您需要更改上下文的 strokeStyle 属性：

```
context.strokeStyle = '#ffffff'; // Gives a white border 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:17:28.840

要更改描边的颜色，请设置`ctx.strokeStyle`为 CSS 颜色名称。

# ruby-on-rails - 在 Rails 中包含嵌套的 json

> ID：15350434
> 
> 赞同：1
> 
> 时间：2013-03-11T23:13:47.457
> 
> 标签：ruby-on-rails, json, ruby-on-rails-3.2, nested

我使用模型添加了一个嵌套在另一个对象中的对象。像这样：

Ingresso 模型 ->

```
def as_json(options=nil)
  super(:include => [:usuario, :tipo_de_ingresso])
end 
```

在`tipo_de_ingresso`模型中，我想添加另一个嵌套对象。这里：

```
def as_json(options=nil)
  super(:include => :entradas)
end 
```

但是当我得到的时候`ingressos.json`，我输了`entradas`。如果我得到`tipo_de_ingressos.json`,`entradas`是嵌套的，可以，但是当我得到 时`ingressos.json`，它们不存在。

我打电话时如何`entradas`嵌套？`tipo_de_ingresso``ingresso`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T23:19:42.983

尝试这个，

```
# /app/models/Ingresso.rb

def as_json(options=nil)
  super(:include => [:usuario => {}, :tipo_de_ingresso => { :include => :entradas }])
end 
```

**编辑：**

改为`[:usuario, ...`_`[:usuario => {}, ...`

# ios - 在 UIAlertview 之后摇动不再起作用

> ID：15350435
> 
> 赞同：1
> 
> 时间：2013-03-11T23:13:51.470
> 
> 标签：ios, objective-c, cocoa-touch, ios6, uialertview

我已经在 iPad 和 iPad 模拟器上对此进行了测试，并且在一次成功摇动后，从未调用过 motionBegan 方法。以下是我的程序的片段。

```
- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event
{
  if(event.type == UIEventSubtypeMotionShake)
  {
    NSLog(@"Shake event occurred.");

            UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Information" message:@"Some message here" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
            alert.tag = shakeTag;
            [alert show];

  }
}

- (BOOL)canBecomeFirstResponder
{
return YES;
}

-(void)viewDidAppear:(BOOL)animated {
  [super viewDidAppear:NO];
  [self becomeFirstResponder];
}

-(void)viewWillDisappear:(BOOL)animated {
  [super viewWillDisappear:NO];
}

-(void)viewDidDisappear:(BOOL)animated {
  [self resignFirstResponder];
  [super viewDidDisappear:NO];
} 
```

究竟是什么阻止了motionBegan 方法再次发生？我希望 UIAlertView 在第一次摇动时只显示一次，并在所有后续摇动时被关闭。我有一种预感，First Responder 仍然连接到 UIAlertView，这会阻止再次调用 motionBegan 方法。

**更新**：在我相应的 UIView 中，创建了一个 UIActionSheet。在我的 UIView 中调用并实现）并且我在 UIActionSheet 显示在屏幕上的同时触发了 motionBegan 方法（在我的 UIViewController 中），存在不再能够调用motionBegan 方法的问题。

之后，UIAlertView 从任何按钮选择中消失，不再调用 motionBegan 方法，但 UIActionSheet 工作得很好。UIView 中没有 firstResponder 分配，UIViewController 中只存在“canBecomeFirstResponder”。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:36:19.610

1.  由于该代码在您的 viewController 中，因此请删除与响应者链相关的所有内容。你实际上不需要它。它是自动为您制作的。更准确地说，您可以删除：

    ```
    - (BOOL)canBecomeFirstResponder // remove all that method
    {
    return YES;
    }

      [self becomeFirstResponder]; // remove this line

    ...
      [self resignFirstResponder]; // remove this line
    ... 
    ```

    并删除这个以及所有那个方法

    ```
    -(void)viewWillDisappear:(BOOL)animated {
      [super viewWillDisappear:animated];
    } 
    ```

2.  在motionEnd而不是motionBegan中调用您的alertView内容。它可以更好。

# php - SQL join QUERY 多个表和 SELECT 的

> ID：15350438
> 
> 赞同：1
> 
> 时间：2013-03-11T23:13:55.623
> 
> 标签：php, mysql, sql, database

我构建以下查询，

```
 SELECT
        posts.id,
        posts.useraid,
        posts.useradn,
        posts.title,
        posts.createdate,
        posts.forumid,
        posts.type,
        posts.totalreplys,
        users.photo AS creatorphoto
    FROM posts
    JOIN users ON(users.id = posts.useraid)
    WHERE posts.forumid IN(
        SELECT subscribe.forumid AS fsub
        FROM subscribe  
        WHERE subscribe.useraid = '$myid'
    ) AND
    posts.forumid IN(
        SELECT forums.id
        FROM forums
        WHERE forums.relatedto=fsub
    )
    AND posts.type='post' 
    ORDER BY posts.timee DESC LIMIT 20 
```

没有这部分代码可以完美运行

```
AND
    posts.forumid IN(
        SELECT forums.id
        FROM forums
        WHERE forums.relatedto=fsub
    ) 
```

但是，我需要查询来选择他订阅的所有论坛中的所有帖子，包括子论坛帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:22:53.003

'fsub' 在这里没有范围，在您的查询中此时甚至不存在：

```
posts.forumid IN(
    SELECT forums.id
    FROM forums
    WHERE forums.relatedto=fsub
) 
```

我相信你需要使用一个 UNION 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:30:47.207

您为什么不直接将订阅和论坛表添加到主要的 FROM 标准中，而不是使用子查询？

例如，

```
FROM posts
JOIN users ON(users.id = posts.useraid)
JOIN subscribe ON (posts.forumid = subscribe.forumid)
JOIN forums ON (forums.relatedto = posts.forumid) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T23:35:00.580

尝试这个：

```
 SELECT
        posts.id,
        posts.useraid,
        posts.useradn,
        posts.title,
        posts.createdate,
        posts.forumid,
        posts.`type`,
        posts.totalreplys,
        users.photo AS creatorphoto
    FROM posts
    JOIN users 
    ON users.id = posts.useraid AND posts.`type`='post'
    JOIN subscribe
    ON subscribe.forumid = posts.forumid AND subscribe.useraid = '$myid'
    JOIN forums
    ON posts.forumid = forums.relatedto 
    ORDER BY posts.timee DESC LIMIT 20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T05:59:03.987

这是您的答案，您需要先加入订阅和表单，然后再使用子查询进行搜索。

```
SELECT
    posts.id,
    posts.useraid,
    posts.useradn,
    posts.title,
    posts.createdate,
    posts.forumid,
    posts.type,
    posts.totalreplys,
    users.photo AS creatorphoto
FROM posts
JOIN users ON(users.id = posts.useraid)
WHERE posts.forumid IN(
    SELECT subscribe.forumid AS fsub
    FROM subscribe ,forums
    WHERE subscribe.useraid = '$myid'
    and forums.relatedto = subscribe.forumid
    and forums.id = subscribe.forumid     
) 
AND posts.type='post' 
ORDER BY posts.timee DESC LIMIT 20 
```

# html - 如何在一行中使用 perl 的 uri_encode

> ID：15350458
> 
> 赞同：3
> 
> 时间：2013-03-11T23:15:54.050
> 
> 标签：html, macos, perl, html-entities

过去我使用代码`echo "&lt;one two&gt;" | perl -MHTML::Entities -ne 'print decode_entities($_)'`来输出`<one two>`.

现在我想做类似的事情，但我想以`echo "one two" | *perl magic*`输出的方式对其进行编码`one+two`，或者可能`one%20two`。

我想要一个可以对整个字符串进行这种 url 编码的命令，可以像第一个示例一样通过管道传输。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T23:30:19.797

尝试使用*正确的模块*执行此操作=)

```
$ echo 'one two' | perl -MURI::Escape -wlne 'print uri_escape $_'
one%20two 
```

请参阅[URI::Escape 文档](https://metacpan.org/module/URI%3a%3aEscape)

## 笔记

如果您需要更快的东西，请考虑使用[URI::Escape::XS](https://metacpan.org/module/URI%3a%3aEscape%3a%3aXS)

# r - 如何使用 R 有效地引导组（多级）

> ID：15350459
> 
> 赞同：0
> 
> 时间：2013-03-11T23:16:04.567
> 
> 标签：r, sample, statistics-bootstrap

我正在分析一项包含 40 个人的研究，每个人评价 10 个小插曲。

```
indiv     vign      score    score2    gender    
  1         1         5         3        1
  1         2         2         4        1   
  1         3         8         1        1
  .         .         .         .        .
  .         .         .         .        .
  .         .         .         .        .
  39       10         9         1        1 
  40        8         1         5        0 
  40        9         3         8        0 
```

我想采取引导措施，但我很快意识到采样小插曲是没有意义的。我们应该对人进行抽样（所以我们每人抽样大约 10 行）。

以下功能有效，但它是下一个功能的瓶颈。那么问题来了，如何才能更有效地做到这一点？

```
ResampleMultilevel <- function(data, groupvar) {
  n <- length(unique(data[,groupvar]))

  index <- sample(data[ , groupvar], n, replace = TRUE)

  resampled <- NULL      # one of the issues is that we do not know 
                         # the size of the matrix yet, since it may vary. 
  for (i in 1:n) {
   resampled <- rbind(resampled, data[data[, groupvar] == index[i], ])
  }
  return(resampled)
} 
```

子集的问题是我找不到保留重复项的方法。

```
a <- cbind(rep(1:40, each = 10), rep(1:10, 4), rnorm(40), rnorm(40)), rep(1:10, 4), rnorm(40), rnorm(40))

index <- c(1,1)

subset(a, a[,1] == index) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:10:42.607

根据评论，我正在修改答案。

```
a <- cbind(rep(1:40, each = 10), rep(1:10, 4), rnorm(40), rnorm(40))
index <- c(1, 1, 3, 4, 2)
a[a[, 1] %in% index, ]
##       [,1] [,2]        [,3]        [,4]
##  [1,]    1    1  0.28135473  0.47970116
##  [2,]    1    2 -0.12628982  0.34862899
##  [3,]    1    3 -0.41140740  1.30204100
##  [4,]    1    4 -0.61163593 -1.13354157
##  [5,]    1    5 -0.31538238  1.42701315
##  [6,]    1    6 -0.20403098  2.13989392
##  [7,]    1    7  0.37681973  0.65843232
##  [8,]    1    8 -0.94062165  0.97246212
##  [9,]    1    9  0.63377352 -0.48948273
## [10,]    1   10 -0.39817929 -1.03607028
## [11,]    2    1  0.54866153 -0.55127459
## [12,]    2    2  0.08410140  0.01457366
## [13,]    2    3 -1.19006851  1.33213116
## [14,]    2    4 -0.47210092  0.83369309
## [15,]    2    5  0.75968678 -0.48212390
## [16,]    2    6 -1.00205770  0.56376027
## [17,]    2    7  0.67251644  0.07234657
## [18,]    2    8  0.73165780 -0.51483172
## [19,]    2    9 -0.26022238  2.33181762
## [20,]    2   10  0.03370091 -0.71427295
## [21,]    3    1  0.60810461  0.15054307
## [22,]    3    2 -1.29363706  1.30510127
## [23,]    3    3 -0.20479713 -2.39797975
## [24,]    3    4 -0.86927664 -0.10845738
## [25,]    3    5  0.89040130 -0.08459249
## [26,]    3    6 -0.21511823  1.33960644
## [27,]    3    7 -0.32413278 -0.31691484
## [28,]    3    8 -0.61545941 -0.10457591
## [29,]    3    9 -1.85072358  0.93267270
## [30,]    3   10  0.38456423  0.76231047
## [31,]    4    1  0.76016236  1.63854054
## [32,]    4    2 -0.94463491  1.87271085
## [33,]    4    3  1.62451250  1.63298961
## [34,]    4    4 -1.96908559  0.89058201
## [35,]    4    5  1.66755533  0.10288947
## [36,]    4    6 -0.02182803 -0.91358891
## [37,]    4    7 -0.09382921 -0.54950093
## [38,]    4    8  0.74597002  2.31924468
## [39,]    4    9  0.64732694  0.29681494
## [40,]    4   10 -0.66535049  1.81285111 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:52:19.273

一个 <- 索引 <- 5:10

这几乎可以工作，只是结构并不是我想要的矩阵。

`lapply(index, function(x) a[which(a[,1] == x),])`

此外，这几乎可以实现，如果有一种非循环的方式来做到这一点，那就太好了，因为这里它只适用于数字 2：

```
a[which(a[,1] == 2),]       # works
a[which(a[,1] == index), ]  # does not work 
```

# jquery - jQuery 表单向导未提交（或似乎未提交）

> ID：15350462
> 
> 赞同：0
> 
> 时间：2013-03-11T23:16:10.060
> 
> 标签：jquery, jquery-form-wizard

我有一个 jQuery 表单，可以很好地完成每个步骤，但它似乎没有提交。这是代码：

```
 $(function(){
            $("#demoForm").formwizard({ 
                formPluginEnabled: true,
                validationEnabled: true,
                focusFirstInput : true,
                textNext: 'Next',
                formOptions :{
                    url: 'submit.php',
                    type: 'POST',
                    success: function(data){$("#status").fadeTo(500,1,function(){ $(this).html(responseText).fadeTo(5000, 0); })},
                    dataType: 'json',
                    beforeSubmit: function(data){$("#data").html("data sent to the server: " + $.param(data));},
                    resetForm: false
                }   
             }
            ); 
```

BeforeSubmit 事件触发，但从不触发成功。[http://thecodemine.org/](http://thecodemine.org/)上的文档指向此处：http: [//jquery.malsup.com/form/#options-object](http://jquery.malsup.com/form/#options-object)，并建议 malsup.com 上的每个选项都可用于 jQuery 表单向导。

知道为什么这个状态 div 永远不会更新吗？

谢谢！

编辑：

更新的 JS：

```
$(function () {
$("#demoForm").formwizard({
    formPluginEnabled: true,
    validationEnabled: true,
    focusFirstInput: true,
    textNext: 'Next',
    remoteAjax: {
        "cc": { // add a remote ajax call when moving next from the second step
            url: 'submit.php',
            type: 'POST',
            dataType: 'json',
            success: function (data) {
                $("#status").fadeTo(500, 1, function () {
                    $(this).html(responseText).fadeTo(5000, 0)
                });
            }
        }
    },
    formOptions: {
        success: function (data) {
            $("#status").fadeTo(500, 1, function () {
                $(this).html(responseText).fadeTo(5000, 0);
            })
        },
        dataType: 'json',
        beforeSubmit: function (data) {
            $("#data").html("data sent to the server: " + $.param(data));
        },
        resetForm: false
    }
}); 
```

我现在在我的 apache 日志中看到脚本正在调用 submit.php，但它似乎没有将响应放在页面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-15T14:27:49.210

我遇到了同样的问题 - 但设法让它工作。关键是确保数据以 JSON 形式返回。

我正在使用 node.js 和 express，所以只需执行以下操作：

```
res.json({status: 'ok'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:09:07.450

以非常糟糕的方式解决了这个问题。创建了一个 Ajax 函数并使用 beforeSubmit 选项调用它。我不建议任何人这样做，但似乎成功表单选项不起作用，这真的是我要做的所有事情。

# windows - *现在*强制 Windows 更新文件访问时间的方法？

> ID：15350465
> 
> 赞同：3
> 
> 时间：2013-03-11T23:16:32.863
> 
> 标签：windows, file, time

在 Windows XP 上，操作系统将更新文件访问时间（如果启用，并且它在我的系统上）。

但是……根据微软的说法：“NTFS 文件系统将文件的最后一次访问时间的更新延迟到最后一次访问后的 1 小时。” ...这不仅仅意味着“延迟更新磁盘驻留结构” ...不，在访问文件后的一段时间内，“最后访问时间”将与访问之前一样出现。有时几秒钟，有时几分钟（还没有看到一个小时）。

有没有办法（“刷新”、“同步”或某些实用程序或功能）我可以告诉 Windows XP：嘿，现在更新所有那些未更新的文件访问*时间*？

我试图通过跟踪它访问的文件来确定一些旧代码是如何工作的......在大多数其他操作系统上很容易做到，但在 Windows 上却不是。（是的，我也会使用 ProcMon。）

（我还没有在较新版本的 Windows 中研究过这种行为。）

谢谢，斯坦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-20T19:53:56.830

我刚刚[在 superuser.com 上找到了这个答案，](https://superuser.com/a/556818/5186)它解释了 fsutil 可用于禁用 NTFS 上的更新延迟，但会以性能为代价。

```
fsutil behavior set disablelastaccess 0 
```

您必须重新启动系统才能使更改生效[（来源）](http://www.groovypost.com/howto/microsoft/enable-last-access-time-stamp-to-files-folder-windows-7/)。

# objective-c - 想在数组和对象中使用 NSKeyed Archiever n NSKeyedUnarcheiver

> ID：15350467
> 
> 赞同：0
> 
> 时间：2013-03-11T23:16:36.283
> 
> 标签：objective-c

我正在尝试使用 NSKeyedArchiever 将值存储在一个数组中，该数组包含一个具有五个属性的类的对象。但是我无法使用 NSData 或 NSArray 将数据多次存储在一个位置。例如-

我有一个名为 car 的类，它有五个属性，即型号、品牌、年份、车号和颜色。我有一个数组，将汽车对象存储在一个索引中的单个单元中。我正在尝试使用 NSKeyedArchiever n NSKeyedUnarchiever 来执行此步骤.Firtly 我使用 NSKeyed 归档器将值存储到类汽车变量中，然后我想将它存储在一个数组中。但我无法做到这一点。你能帮我写代码吗。我无法弄清楚问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T02:05:09.913

我知道你必须使用 NSCoding 来存储自定义对象。

如在我的示例中，我有一个类 Game 并且我正在使用此 NSCoding 方法对其进行编码和解码

```
-(void)encodeWithCoder:(NSCoder *)aCoder
{
    [aCoder encodeObject:[NSNumber numberWithInt:turnTime] forKey:@"turnTime"];
    [aCoder encodeObject:[NSNumber numberWithBool:time] forKey:@"extra"];
    [aCoder encodeObject:[NSNumber numberWithBool:saved] forKey:@"saved"];
    [aCoder encodeObject:dragon forKey:@"dragon"];
    [aCoder encodeObject:playerJokers forKey:@"playerJokersKey"];
}

- (id)initWithCoder:(NSCoder *)aDecoder
{
    turnTime=[[aDecoder decodeObjectForKey:@"turnTime"] integerValue];
    dragon=[aDecoder decodeObjectForKey:@"dragon"];
    time=[[aDecoder decodeObjectForKey:@"extra"] boolValue];
    saved=[[aDecoder decodeObjectForKey:@"saved"] boolValue];
    playerJokers=[aDecoder decodeObjectForKey:@"playerJokersKey"];
    return self;

} 
```

保存游戏数据

```
-(void)saveGameData
{
    NSLog(@"saveGameData");

    NSUserDefaults * userdefaults=[NSUserDefaults standardUserDefaults];

    NSData * gameData=[NSKeyedArchiver archivedDataWithRootObject:self];

    [userdefaults setObject:gameData forKey:@"gameKey"];

    [userdefaults synchronize];
} 
```

如所见这种方法；您可以将自定义类转换为 NSData 并将其添加到 NSArray。

当你想使用它时；恢复数组，你有一个包含汽车数据的数组。

当我想使用保存的数据时

```
Game * savedGame=[NSKeyedUnarchiver unarchiveObjectWithData:gameData]; 
```

# google-app-engine - 我可以使用 Google App Engine 作为 XMPP 网关吗

> ID：15350470
> 
> 赞同：0
> 
> 时间：2013-03-11T23:17:01.913
> 
> 标签：google-app-engine, azure, amazon-ec2, xmpp, ejabberd

我有一个托管在 Windows Azure 上的云应用程序，我需要将 XMPP 与该服务集成。我可以使用 GAE 的 XMPP API 来实现这一点吗？我需要能够创建新的 Jabber ID 并从 GTalk 等其他客户端发送和接收消息。

据我所知，GAE 只支持 Java、Python，我的专长仅限于 .NET & C#；所以，我必须让我的 Azure 应用程序与 GAE 通信。

最后，我可以使用 GAE 作为运行的替代方案`ejabbered`吗`Windows Azure Virtual Machines or Amazon EC2`？

提前致谢... ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:40:16.260

你可以，但它会非常有限。你可能最好在其他地方运行 ejabbered。

*   使用 GAE 的 XMPP API，您的用户名选择非常有限。请参阅 GAE XMPP 概述 API 文档。

*   您的云应用程序需要通过 HTTP 访问从您的 GAE 应用程序发送和接收消息。这对于发送没什么大不了的，但是您必须采用自己的方式来接收消息。您可以将消息缓冲到 datstore 并轮询消息。您可以使用 Channel API 直接接收消息，但到目前为止 Channel API 客户端仅在 Javascript 中可用，因此您的应用程序需要某种 javascript 解释器才能使用客户端。

*   您将能够从其他 XMPP 地址（如 GTalk 客户端）发送/接收消息。

# api - Youtube 播放器 Iframe API 跳过播放列表中的视频

> ID：15350471
> 
> 赞同：0
> 
> 时间：2013-03-11T23:17:02.333
> 
> 标签：api, youtube, youtube-api, playlist

我在我的网站上嵌入了一个 Youtube 播放列表。

视频播放完后，播放器不会播放下一个视频，而是跳过它并播放下一个。不管是什么视频，它都可以做到。为什么会这样以及如何让它一个接一个地播放所有视频？

这是我的嵌入播放列表的网站：[http ://www.centpourcentmonnaie.fr](http://www.centpourcentmonnaie.fr)

这是我的代码：

```
<div class="video">
<p>
<span id="gauche" onclick="player.previousVideo()">Chapitre pr&eacute;c&eacute;dent</span>
<span id="droite" onclick="player.nextVideo()">Chapitre suivant</span>
</p>

<div id="player"></div>

<script>
  var tag = document.createElement('script');

  tag.src = "//www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '720',
      width: '1280',
      videoId: '3BuJ4RWy49k',
      events: {
        'onReady': onPlayerReady,
      }
    });
  }

    function onPlayerReady(event) { 
        event.target.cuePlaylist({list: "PLE_-2rZv8j2ro-QgxzK9nvi9O61dgE-Hx",suggestedQuality: "hd720"});
    }
</script>
<br>
</p>
</div>
</div> 
```

控制台可以在不同的 Web 浏览器中读取不同的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T20:04:59.640

我使用 playerVars 而不是 cuePlaylist 解决了这段代码的问题：

```
<script>
  var tag = document.createElement('script');

  tag.src = "//www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '720',
      width: '1280',
      videoId: '3BuJ4RWy49k',
      playerVars: { 'autoplay': 1, 'list':'PLE_-2rZv8j2ro-QgxzK9nvi9O61dgE-Hx'},

    });
  }

</script> 
```

# entity-framework - EF 4 数据不刷新 Windows 服务

> ID：15350473
> 
> 赞同：1
> 
> 时间：2013-03-11T23:17:12.893
> 
> 标签：entity-framework, windows-services

我正在运行 Windows 服务，它使用 EF 4 作为其数据源。我在数据库中使用一个字段作为标志，但是当我在程序中看到该字段时，它为空。我认为问题是必须缓存数据，但同时我看到查询正在 SQL Profiler 中运行（它返回正确的值，而不是 null）。当然，如果数据被缓存，这让我想知道为什么要调用数据库。所以任何帮助将不胜感激。

韦德

# matlab - 我试图理解为什么这个计算的维度是错误的？

> ID：15350476
> 
> 赞同：0
> 
> 时间：2013-03-11T23:17:32.300
> 
> 标签：matlab, matrix, poisson

我正在求解泊松方程，并想绘制精确解的误差与网格点数的关系。我的代码是：

```
function [Ntot,err] = poisson(N)

nx = N;                % Number of steps in space(x)
ny = N;                % Number of steps in space(y)       
Ntot = nx*ny;
niter = 1000;           % Number of iterations 
dx = 2/(nx-1);          % Width of space step(x)
dy = 2/(ny-1);          % Width of space step(y)
x = -1:dx:1;             % Range of x(-1,1) 
y = -1:dy:1;             % Range of y(-1,1) 
b = zeros(nx,ny);       
dn = zeros(nx,ny);      

% Initial Conditions
d = zeros(nx,ny);                  
u = zeros(nx,ny);

% Boundary conditions
d(:,1) = 0;
d(:,ny) = 0;
d(1,:) = 0;                  
d(nx,:) = 0;

% Source term
b(round(ny/4),round(nx/4)) = 3000;
b(round(ny*3/4),round(nx*3/4)) = -3000;

i = 2:nx-1;
j = 2:ny-1;

% 5-point difference (Explicit)
for it = 1:niter
    dn = d;
    d(i,j) = ((dy^2*(dn(i + 1,j) + dn(i - 1,j))) + (dx^2*(dn(i,j + 1) + dn(i,j - 1))) - (b(i,j)*dx^2*dy*2))/(2*(dx^2 + dy^2));
    u(i,j) = 2*pi*pi*sin(pi*i).*sin(pi*j);

    % Boundary conditions 
    d(:,1) = 0;
    d(:,ny) = 0;
    d(1,:) = 0;                  
    d(nx,:) = 0;
end

%     
% 
% err = abs(u - d); 
```

我得到的错误是：

下标分配尺寸不匹配。

泊松误差（第 39 行）

```
u(i,j) = 2*pi*pi*sin(pi*i).*sin(pi*j); 
```

我不确定为什么它不在每个网格点计算 u。我尝试将其从 for 循环中取出，但这并没有帮助。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:30:10.600

这是因为`i`和`j`都是 1×(N-2) 向量，所以`u(i, j)`也是一个 (N-2)×(N-2)**矩阵**。但是，表达式`2*pi*pi*sin(pi*i).*sin(pi*j)`是一个 1×(N-2)**向量**。
尺寸显然不匹配，因此出现错误。

我不确定，但我猜您打算执行以下操作：

```
u(i,j) = 2 * pi * pi * bsxfun(@times, sin(pi * i), sin(pi * j)'); 
```

或者，您可以使用基本矩阵乘法来生成 (N-2)-by-(N-2)，如下所示：

```
u(i, j) = 2 * pi * pi * sin(pi * i') * sin(pi * j); %// Note the transpose 
```

PS：[建议不要使用“i”和“j”作为变量名](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)。

# python - 在 Python 中使用 < 128KB 的字符串时出现内存泄漏？

> ID：15350477
> 
> 赞同：16
> 
> 时间：2013-03-11T23:17:33.367
> 
> 标签：python, memory-management, memory-leaks, garbage-collection

## 原标题：Python中打开文件<128KB的内存泄漏？

## 原始问题

运行 Python 脚本时，我发现我认为是内存泄漏。这是我的脚本：

```
import sys
import time

class MyObj(object):
    def __init__(self, filename):
        with open(filename) as f:
            self.att = f.read()

def myfunc(filename):
    mylist = [MyObj(filename) for x in xrange(100)]
    len(mylist)
    return []

def main():
    filename = sys.argv[1]
    myfunc(filename)
    time.sleep(3600)

if __name__ == '__main__':
    main() 
```

main 函数调用`myfunc()`它创建一个包含 100 个对象的列表，每个对象打开并读取一个文件。从返回后`myfunc()`，我希望从 100 项列表和读取文件中释放内存，因为它们不再被引用。但是，当我使用该`ps`命令检查内存使用情况时，Python 进程使用的内存比从注释掉第 12 行和第 13 行的脚本运行的 Python 进程多出约 10,000 KB。

奇怪的是，内存泄漏（如果是这样的话）似乎只发生在小于 128KB 的文件中。我创建了一个 bash 脚本来运行这个脚本，文件大小从 1KB 到 200KB 不等，当文件大小达到 128KB 时，内存增加停止。这是 bash 脚本：

```
#!/bin/bash

echo "PID RSS S TTY TIME COMMAND" > output.txt

for i in `seq 1 200`;
do
    python debug_memory.py "data/stuff_${i}K.txt" &
    pid=$!
    sleep 0.1
    ps -e -O rss | grep $pid | grep -v grep >> output.txt
    kill $pid
done 
```

这是 bash 脚本的输出：

```
PID RSS S TTY TIME COMMAND
28471  5552 S pts/16   00:00:00 python debug_memory.py data/stuff_1K.txt
28477  5656 S pts/16   00:00:00 python debug_memory.py data/stuff_2K.txt
28483  5756 S pts/16   00:00:00 python debug_memory.py data/stuff_3K.txt
28488  5852 S pts/16   00:00:00 python debug_memory.py data/stuff_4K.txt
28494  5952 S pts/16   00:00:00 python debug_memory.py data/stuff_5K.txt
28499  6052 S pts/16   00:00:00 python debug_memory.py data/stuff_6K.txt
28505  6156 S pts/16   00:00:00 python debug_memory.py data/stuff_7K.txt
28511  6256 S pts/16   00:00:00 python debug_memory.py data/stuff_8K.txt
28516  6356 S pts/16   00:00:00 python debug_memory.py data/stuff_9K.txt
28522  6452 S pts/16   00:00:00 python debug_memory.py data/stuff_10K.txt
28527  6552 S pts/16   00:00:00 python debug_memory.py data/stuff_11K.txt
28533  6656 S pts/16   00:00:00 python debug_memory.py data/stuff_12K.txt
28539  6756 S pts/16   00:00:00 python debug_memory.py data/stuff_13K.txt
28544  6852 S pts/16   00:00:00 python debug_memory.py data/stuff_14K.txt
28550  6952 S pts/16   00:00:00 python debug_memory.py data/stuff_15K.txt
28555  7056 S pts/16   00:00:00 python debug_memory.py data/stuff_16K.txt
28561  7156 S pts/16   00:00:00 python debug_memory.py data/stuff_17K.txt
28567  7252 S pts/16   00:00:00 python debug_memory.py data/stuff_18K.txt
28572  7356 S pts/16   00:00:00 python debug_memory.py data/stuff_19K.txt
28578  7452 S pts/16   00:00:00 python debug_memory.py data/stuff_20K.txt
28584  7556 S pts/16   00:00:00 python debug_memory.py data/stuff_21K.txt
28589  7652 S pts/16   00:00:00 python debug_memory.py data/stuff_22K.txt
28595  7756 S pts/16   00:00:00 python debug_memory.py data/stuff_23K.txt
28600  7852 S pts/16   00:00:00 python debug_memory.py data/stuff_24K.txt
28606  7952 S pts/16   00:00:00 python debug_memory.py data/stuff_25K.txt
28612  8052 S pts/16   00:00:00 python debug_memory.py data/stuff_26K.txt
28617  8152 S pts/16   00:00:00 python debug_memory.py data/stuff_27K.txt
28623  8252 S pts/16   00:00:00 python debug_memory.py data/stuff_28K.txt
28629  8356 S pts/16   00:00:00 python debug_memory.py data/stuff_29K.txt
28634  8452 S pts/16   00:00:00 python debug_memory.py data/stuff_30K.txt
28640  8556 S pts/16   00:00:00 python debug_memory.py data/stuff_31K.txt
28645  8656 S pts/16   00:00:00 python debug_memory.py data/stuff_32K.txt
28651  8756 S pts/16   00:00:00 python debug_memory.py data/stuff_33K.txt
28657  8856 S pts/16   00:00:00 python debug_memory.py data/stuff_34K.txt
28662  8956 S pts/16   00:00:00 python debug_memory.py data/stuff_35K.txt
28668  9056 S pts/16   00:00:00 python debug_memory.py data/stuff_36K.txt
28674  9156 S pts/16   00:00:00 python debug_memory.py data/stuff_37K.txt
28679  9256 S pts/16   00:00:00 python debug_memory.py data/stuff_38K.txt
28685  9352 S pts/16   00:00:00 python debug_memory.py data/stuff_39K.txt
28691  9452 S pts/16   00:00:00 python debug_memory.py data/stuff_40K.txt
28696  9552 S pts/16   00:00:00 python debug_memory.py data/stuff_41K.txt
28702  9656 S pts/16   00:00:00 python debug_memory.py data/stuff_42K.txt
28707  9756 S pts/16   00:00:00 python debug_memory.py data/stuff_43K.txt
28713  9852 S pts/16   00:00:00 python debug_memory.py data/stuff_44K.txt
28719  9952 S pts/16   00:00:00 python debug_memory.py data/stuff_45K.txt
28724 10052 S pts/16   00:00:00 python debug_memory.py data/stuff_46K.txt
28730 10156 S pts/16   00:00:00 python debug_memory.py data/stuff_47K.txt
28739 10256 S pts/16   00:00:00 python debug_memory.py data/stuff_48K.txt
28746 10352 S pts/16   00:00:00 python debug_memory.py data/stuff_49K.txt
28752 10452 S pts/16   00:00:00 python debug_memory.py data/stuff_50K.txt
28757 10556 S pts/16   00:00:00 python debug_memory.py data/stuff_51K.txt
28763 10656 S pts/16   00:00:00 python debug_memory.py data/stuff_52K.txt
28769 10752 S pts/16   00:00:00 python debug_memory.py data/stuff_53K.txt
28774 10852 S pts/16   00:00:00 python debug_memory.py data/stuff_54K.txt
28780 10952 S pts/16   00:00:00 python debug_memory.py data/stuff_55K.txt
28786 11052 S pts/16   00:00:00 python debug_memory.py data/stuff_56K.txt
28791 11152 S pts/16   00:00:00 python debug_memory.py data/stuff_57K.txt
28797 11256 S pts/16   00:00:00 python debug_memory.py data/stuff_58K.txt
28802 11356 S pts/16   00:00:00 python debug_memory.py data/stuff_59K.txt
28808 11452 S pts/16   00:00:00 python debug_memory.py data/stuff_60K.txt
28814 11556 S pts/16   00:00:00 python debug_memory.py data/stuff_61K.txt
28819 11656 S pts/16   00:00:00 python debug_memory.py data/stuff_62K.txt
28825 11752 S pts/16   00:00:00 python debug_memory.py data/stuff_63K.txt
28831 11852 S pts/16   00:00:00 python debug_memory.py data/stuff_64K.txt
28836 11956 S pts/16   00:00:00 python debug_memory.py data/stuff_65K.txt
28842 12052 S pts/16   00:00:00 python debug_memory.py data/stuff_66K.txt
28847 12152 S pts/16   00:00:00 python debug_memory.py data/stuff_67K.txt
28853 12256 S pts/16   00:00:00 python debug_memory.py data/stuff_68K.txt
28859 12356 S pts/16   00:00:00 python debug_memory.py data/stuff_69K.txt
28864 12452 S pts/16   00:00:00 python debug_memory.py data/stuff_70K.txt
28871 12556 S pts/16   00:00:00 python debug_memory.py data/stuff_71K.txt
28877 12652 S pts/16   00:00:00 python debug_memory.py data/stuff_72K.txt
28883 12756 S pts/16   00:00:00 python debug_memory.py data/stuff_73K.txt
28889 12856 S pts/16   00:00:00 python debug_memory.py data/stuff_74K.txt
28894 12952 S pts/16   00:00:00 python debug_memory.py data/stuff_75K.txt
28900 13056 S pts/16   00:00:00 python debug_memory.py data/stuff_76K.txt
28906 13156 S pts/16   00:00:00 python debug_memory.py data/stuff_77K.txt
28911 13256 S pts/16   00:00:00 python debug_memory.py data/stuff_78K.txt
28917 13352 S pts/16   00:00:00 python debug_memory.py data/stuff_79K.txt
28922 13452 S pts/16   00:00:00 python debug_memory.py data/stuff_80K.txt
28928 13556 S pts/16   00:00:00 python debug_memory.py data/stuff_81K.txt
28934 13652 S pts/16   00:00:00 python debug_memory.py data/stuff_82K.txt
28939 13752 S pts/16   00:00:00 python debug_memory.py data/stuff_83K.txt
28945 13852 S pts/16   00:00:00 python debug_memory.py data/stuff_84K.txt
28951 13952 S pts/16   00:00:00 python debug_memory.py data/stuff_85K.txt
28956 14052 S pts/16   00:00:00 python debug_memory.py data/stuff_86K.txt
28962 14152 S pts/16   00:00:00 python debug_memory.py data/stuff_87K.txt
28967 14256 S pts/16   00:00:00 python debug_memory.py data/stuff_88K.txt
28973 14352 S pts/16   00:00:00 python debug_memory.py data/stuff_89K.txt
28979 14456 S pts/16   00:00:00 python debug_memory.py data/stuff_90K.txt
28984 14552 S pts/16   00:00:00 python debug_memory.py data/stuff_91K.txt
28990 14652 S pts/16   00:00:00 python debug_memory.py data/stuff_92K.txt
28996 14756 S pts/16   00:00:00 python debug_memory.py data/stuff_93K.txt
29001 14852 S pts/16   00:00:00 python debug_memory.py data/stuff_94K.txt
29007 14956 S pts/16   00:00:00 python debug_memory.py data/stuff_95K.txt
29012 15052 S pts/16   00:00:00 python debug_memory.py data/stuff_96K.txt
29018 15156 S pts/16   00:00:00 python debug_memory.py data/stuff_97K.txt
29024 15252 S pts/16   00:00:00 python debug_memory.py data/stuff_98K.txt
29029 15360 S pts/16   00:00:00 python debug_memory.py data/stuff_99K.txt
29035 15456 S pts/16   00:00:00 python debug_memory.py data/stuff_100K.txt
29040 15556 S pts/16   00:00:00 python debug_memory.py data/stuff_101K.txt
29046 15652 S pts/16   00:00:00 python debug_memory.py data/stuff_102K.txt
29052 15756 S pts/16   00:00:00 python debug_memory.py data/stuff_103K.txt
29057 15852 S pts/16   00:00:00 python debug_memory.py data/stuff_104K.txt
29063 15952 S pts/16   00:00:00 python debug_memory.py data/stuff_105K.txt
29069 16056 S pts/16   00:00:00 python debug_memory.py data/stuff_106K.txt
29074 16152 S pts/16   00:00:00 python debug_memory.py data/stuff_107K.txt
29080 16256 S pts/16   00:00:00 python debug_memory.py data/stuff_108K.txt
29085 16356 S pts/16   00:00:00 python debug_memory.py data/stuff_109K.txt
29091 16452 S pts/16   00:00:00 python debug_memory.py data/stuff_110K.txt
29097 16552 S pts/16   00:00:00 python debug_memory.py data/stuff_111K.txt
29102 16652 S pts/16   00:00:00 python debug_memory.py data/stuff_112K.txt
29108 16756 S pts/16   00:00:00 python debug_memory.py data/stuff_113K.txt
29113 16852 S pts/16   00:00:00 python debug_memory.py data/stuff_114K.txt
29119 16952 S pts/16   00:00:00 python debug_memory.py data/stuff_115K.txt
29125 17056 S pts/16   00:00:00 python debug_memory.py data/stuff_116K.txt
29130 17156 S pts/16   00:00:00 python debug_memory.py data/stuff_117K.txt
29136 17256 S pts/16   00:00:00 python debug_memory.py data/stuff_118K.txt
29141 17356 S pts/16   00:00:00 python debug_memory.py data/stuff_119K.txt
29147 17452 S pts/16   00:00:00 python debug_memory.py data/stuff_120K.txt
29153 17556 S pts/16   00:00:00 python debug_memory.py data/stuff_121K.txt
29158 17656 S pts/16   00:00:00 python debug_memory.py data/stuff_122K.txt
29164 17756 S pts/16   00:00:00 python debug_memory.py data/stuff_123K.txt
29170 17856 S pts/16   00:00:00 python debug_memory.py data/stuff_124K.txt
29175 17952 S pts/16   00:00:00 python debug_memory.py data/stuff_125K.txt
29181 18056 S pts/16   00:00:00 python debug_memory.py data/stuff_126K.txt
29186 18152 S pts/16   00:00:00 python debug_memory.py data/stuff_127K.txt
29192  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_128K.txt
29198  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_129K.txt
29203  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_130K.txt
29209  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_131K.txt
29215  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_132K.txt
29220  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_133K.txt
29226  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_134K.txt
29231  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_135K.txt
29237  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_136K.txt
29243  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_137K.txt
29248  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_138K.txt
29254  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_139K.txt
29260  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_140K.txt
29265  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_141K.txt
29271  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_142K.txt
29276  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_143K.txt
29282  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_144K.txt
29288  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_145K.txt
29293  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_146K.txt
29299  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_147K.txt
29305  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_148K.txt
29310  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_149K.txt
29316  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_150K.txt
29321  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_151K.txt
29327  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_152K.txt
29333  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_153K.txt
29338  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_154K.txt
29344  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_155K.txt
29349  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_156K.txt
29355  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_157K.txt
29361  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_158K.txt
29366  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_159K.txt
29372  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_160K.txt
29378  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_161K.txt
29383  5460 S pts/16   00:00:00 python debug_memory.py data/stuff_162K.txt
29389  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_163K.txt
29394  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_164K.txt
29400  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_165K.txt
29406  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_166K.txt
29411  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_167K.txt
29417  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_168K.txt
29423  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_169K.txt
29428  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_170K.txt
29434  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_171K.txt
29439  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_172K.txt
29445  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_173K.txt
29451  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_174K.txt
29456  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_175K.txt
29463  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_176K.txt
29483  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_177K.txt
29489  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_178K.txt
29496  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_179K.txt
29501  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_180K.txt
29507  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_181K.txt
29512  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_182K.txt
29518  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_183K.txt
29524  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_184K.txt
29529  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_185K.txt
29535  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_186K.txt
29541  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_187K.txt
29546  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_188K.txt
29552  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_189K.txt
29557  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_190K.txt
29563  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_191K.txt
29569  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_192K.txt
29574  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_193K.txt
29580  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_194K.txt
29586  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_195K.txt
29591  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_196K.txt
29597  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_197K.txt
29602  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_198K.txt
29608  5456 S pts/16   00:00:00 python debug_memory.py data/stuff_199K.txt
29614  5452 S pts/16   00:00:00 python debug_memory.py data/stuff_200K.txt 
```

有人可以解释发生了什么吗？为什么使用 <128KB 的文件时内存使用量会增加？

我的完整测试环境位于此处： [https ://github.com/saltycrane/debugging-python-memory-usage/tree/50f73358c7a84a504333ce9c4071b0f3537bbc0f](https://github.com/saltycrane/debugging-python-memory-usage/tree/50f73358c7a84a504333ce9c4071b0f3537bbc0f)

我在 Ubuntu 12.04 上运行 Python 2.7.3。

## 更新 1

此问题并非特定于处理大小小于 128K 的文件。将对象属性设置为与从文件中读取的大小相同的值，我得到了相同的结果。这是更新的代码：

```
import sys
import time

class MyObj(object):
    def __init__(self, size_kb):
        self.att = ' ' * int(size_kb) * 1024

def myfunc(size_kb):
    mylist = [MyObj(size_kb) for x in xrange(100)]
    len(mylist)
    return []

def main():
    size_kb = sys.argv[1]
    myfunc(size_kb)
    time.sleep(3600)

if __name__ == '__main__':
    main() 
```

运行此脚本会产生类似的结果。更新的测试环境位于此处： [https ://github.com/saltycrane/debugging-python-memory-usage/tree/59b7ff61134dfc11c4195e9201b2c1728ed4fcce](https://github.com/saltycrane/debugging-python-memory-usage/tree/59b7ff61134dfc11c4195e9201b2c1728ed4fcce)

## 更新 2

我通过以下方式进一步简化了我的测试脚本： 1\. 删除类并简单地创建字符串列表 2\. 删除`myfunc()`并使用`del`删除`mylist`对象

```
import sys
import time

def main():
    size_kb = sys.argv[1]

    mylist = []
    for x in xrange(100):
        mystr = ' ' * int(size_kb) * 1024
        mylist.append(mystr)

    del mylist

    time.sleep(3600)

if __name__ == '__main__':
    main() 
```

我的简化脚本也给出了与原始脚本相似的结果。但是，如果我不创建单独的字符串变量，我看不到内存增加。这是不会增加内存的脚本：

```
import sys
import time

def main():
    size_kb = sys.argv[1]

    mylist = []
    for x in xrange(100):
        mylist.append(' ' * int(size_kb) * 1024)

    del mylist

    time.sleep(3600)

if __name__ == '__main__':
    main() 
```

更新后的测试环境位于： [https ://github.com/saltycrane/debugging-python-memory-usage/tree/423ca6a50dccbe32572a9d0dea1068ddcb06663b](https://github.com/saltycrane/debugging-python-memory-usage/tree/423ca6a50dccbe32572a9d0dea1068ddcb06663b)

更多问题：

*   其他人可以重现我的结果吗？
*   内存的增加是否符合`ps`预期？

### 关于正在发生的事情的提示

我发现了一些关于“免费列表”的有趣信息，它们似乎与这个问题有关：

*   [为什么删除大对象时Python不释放内存？](http://effbot.org/pyfaq/why-doesnt-python-release-the-memory-when-i-delete-a-large-object.htm)
*   [如何在 Python 中显式释放内存？](https://stackoverflow.com/a/1316799/101911)
*   [Python 内存管理 — Theano v0.6rc3 文档](http://deeplearning.net/software/theano/tutorial/python-memory-management.html#internal-memory-management)

从最后一个链接：

> 为了加快内存分配（和重用），Python 使用了许多用于小对象的列表。每个列表将包含类似大小的对象
> 
> 确实：如果一个项目（大小为 x）被释放（由于缺少引用而被释放），它的位置不会返回到 Python 的全局内存池（甚至更少返回到系统），而只是标记为空闲并添加到大小为 x 的物品。
> 
> 如果小对象内存从未被释放，那么不可避免的结论是，就像金鱼一样，这些小对象列表只会不断增长，不会缩小，并且您的应用程序的内存占用由在任何给定情况下分配的最大数量的小对象所支配观点。

## 更新 3

我在更新 2 中过度简化了代码。`del mystr`在脚本末尾添加该行释放了内存。（见：[https](https://github.com/saltycrane/debugging-python-memory-usage/blob/dd058e4774802cae7cbfca520fb835ea46b645e8/debug_memory_leaks.py) ://github.com/saltycrane/debugging-python-memory-usage/blob/dd058e4774802cae7cbfca520fb835ea46b645e8/debug_memory_leaks.py ）

我将脚本更新为足够复杂来演示该问题。以下代码中仍然存在该问题。最新的代码/环境位于此处：[https ://github.com/saltycrane/debugging-python-memory-usage/tree/fc0c8ce9ba621cb86b6abb93adf1b297a7c0230b](https://github.com/saltycrane/debugging-python-memory-usage/tree/fc0c8ce9ba621cb86b6abb93adf1b297a7c0230b)

```
import gc
import sys
import time

def main():
    size_kb = sys.argv[1]

    mylist = []
    for x in xrange(100):
        mystr = ' ' * int(size_kb) * 1024
        mydict = {'mykey': mystr}
        mylist.append(mydict)

    del mystr
    del mydict
    del mylist

    gc.collect()

    time.sleep(3600)

if __name__ == '__main__':
    main() 
```

我也跑了一些其他环境的脚本。奇怪的结果是从一个干净的 virtualenv 中运行的。在这种情况下，内存下降发生在 260KB 而不是 128KB。见[https://github.com/saltycrane/debugging-python-memory-usage/tree/52fbd5d57ff45affdcd70623ddb74fa1f1ffbbc2](https://github.com/saltycrane/debugging-python-memory-usage/tree/52fbd5d57ff45affdcd70623ddb74fa1f1ffbbc2)

环境：

*   Ubuntu 12.04 64 位，系统 Python 2.7.3：原始运行
*   Ubuntu 12.04 64 位，Python 3.3.0 从源代码编译：类似的结果
*   Scientific Linux 6 64 位，Python 2.6.6：类似的结果
*   Ubuntu 12.04 64 位，来自 virtualenv 的 Python 2.7.3：内存下降发生在 260KB 而不是 128KB

更多参考：

*   [http://revista.python.org.ar/2/en/html/memory-fragmentation.html](http://revista.python.org.ar/2/en/html/memory-fragmentation.html)
*   [http://www.evanjones.ca/python-memory.html](http://www.evanjones.ca/python-memory.html)
*   [http://mail.python.org/pipermail/python-dev/2004-October/049480.html](http://mail.python.org/pipermail/python-dev/2004-October/049480.html)（注意：这是从 2004 年开始的）
*   [http://mail.python.org/pipermail/python-dev/2006-March/061991.html](http://mail.python.org/pipermail/python-dev/2006-March/061991.html)
*   [http://www.evanjones.ca/memoryallocator/](http://www.evanjones.ca/memoryallocator/)
*   [http://www.evanjones.ca/memory-allocator.pdf](http://www.evanjones.ca/memory-allocator.pdf)
*   [http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Objects/obmalloc.c](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Objects/obmalloc.c)

    在阅读了其中的一些内容后，我看到了对 256KB 的“竞技场大小”的引用。也许这有关系？

## 更新 4（大部分已解决）

[schlenk 发现了内存使用量下降到 128KB 的原因](https://stackoverflow.com/a/15452610/101911)。128KB 是“内存分配函数”（malloc？）使用 mmap 而不是使用 sbrk 增加程序中断的点。有趣的是，可以通过环境变量更改阈值。我运行了一个测试，将`MALLOC_MMAP_THRESHOLD_`环境变量设置为不同的值，并且内存使用量的下降与该值相匹配。有关结果，请参见此处： [https ://github.com/saltycrane/debugging-python-memory-usage/blob/97d93cd165a139a6b6f96720de63a92561dd2f05/output_debug_memory_leaks.py.txt](https://github.com/saltycrane/debugging-python-memory-usage/blob/97d93cd165a139a6b6f96720de63a92561dd2f05/output_debug_memory_leaks.py.txt)

我仍然想知道它是否期望我的脚本的行为会泄漏字符串值 < 128KB 的内存。

还有几个链接：

*   [mallopt(3) - Linux 手册页](http://man7.org/linux/man-pages/man3/mallopt.3.html)（来自 schlenk）
*   [Python内存管理与TCMalloc | 推动网络](http://pushingtheweb.com/2010/06/python-and-tcmalloc/)
*   [回复：将 x 设置为 None 并且 del x 不会在 python 2.7.1 (HPUX 11.23, ia64) « python-list « ActiveState List Archives 中释放内存](http://code.activestate.com/lists/python-list/637995/)
*   [问题 3526：SunOS 和 AIX 上的自定义 malloc 实现 - Python 跟踪器](http://bugs.python.org/issue3526)
*   [使malloc中的mmap/brk阈值动态提高性能](http://www.sourceware.org/ml/libc-alpha/2006-03/msg00033.html)

注意：根据最后两个链接，使用 mmap 而不是 sbrk 会影响性能（速度）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T17:53:37.773

您可能会简单地点击 linux 内存分配器的默认行为。

基本上 Linux 有两种分配策略，sbrk() 用于小块内存， mmap() 用于大块。sbrk() 分配的内存块不容易返回到系统，而基于 mmap() 的内存块可以（只需取消映射页面）。

因此，如果您分配的内存块大于 libc 中的 malloc() 分配器决定在 sbrk() 和 mmap() 之间切换的值，您就会看到这种效果。请参阅 mallopt() 调用，尤其是 MMAP_THRESHOLD ( [http://man7.org/linux/man-pages/man3/mallopt.3.html](http://man7.org/linux/man-pages/man3/mallopt.3.html) )。

**更新** 回答你的额外问题：是的，如果内存分配器像 Linux 上的 libc 一样工作，那么预计你会以这种方式泄漏内存。如果您改用 Windows LowFragmentationHeap，它可能不会泄漏，这在 AIX 上类似，具体取决于配置的 malloc。也许其他分配器之一（tcmalloc 等）也可以解决此类问题。sbrk() 速度极快，但存在内存碎片问题。CPython 对此无能为力，因为它没有压缩垃圾收集器，只有简单的引用计数。

Python 提供了一些减少缓冲区分配的方法，例如，请参阅此处的博客文章：http: [//eli.thegreenplace.net/2011/11/28/less-copies-in-python-with-the-buffer-protocol -and-memoryviews/](http://eli.thegreenplace.net/2011/11/28/less-copies-in-python-with-the-buffer-protocol-and-memoryviews/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T00:38:18.020

我会研究垃圾收集。可能是较大的文件更频繁地触发垃圾收集，但小文件正在被释放但共同停留在某个阈值。具体来说，调用 gc.collect() 然后在对象上调用 gc.get_referrers() 以希望显示保存实例的内容。在此处查看 Python 文档：

[http://docs.python.org/2/library/gc.html?highlight=gc#gc.get_referrers](http://docs.python.org/2/library/gc.html?highlight=gc#gc.get_referrers)

# 更新：

该问题与垃圾收集、命名空间和引用计数有关。您发布的 bash 脚本对垃圾收集器的行为给出了相当狭隘的看法。尝试更大的范围，您将看到某些范围将占用多少内存的模式。例如，将 bash for 循环更改为更大的范围，例如：`seq 0 16 2056`.

您注意到如果您`del mystr`删除了对它的任何引用，则内存使用量减少了。如果您将 mystr 变量限制为它自己的函数，可能会发生类似的结果，如下所示：

```
def loopy():
    mylist = []
    for x in xrange(100):
        mystr = ' ' * int(size_kb) * 1024
        mydict = {x: mystr}
        mylist.append(mydict)
    return mylist 
```

我认为您可以使用内存分析器获得更多有用的信息，而不是使用 bash 脚本。这里有几个使用[Pymler](http://pythonhosted.org/Pympler/index.html)的例子。第一个版本类似于更新 3 中的代码：

```
import gc
import sys
import time
from pympler import tracker

tr = tracker.SummaryTracker()
print 'begin:'
tr.print_diff()

size_kb = sys.argv[1]

mylist = []
mydict = {}

print 'empty list & dict:'
tr.print_diff()

for x in xrange(100):
    mystr = ' ' * int(size_kb) * 1024
    mydict = {x: mystr}
    mylist.append(mydict)

print 'after for loop:'
tr.print_diff()

del mystr
del mydict
del mylist

print 'after deleting stuff:'
tr.print_diff()

collected = gc.collect()
print 'after garbage collection (collected: %d):' % collected
tr.print_diff()

time.sleep(2)
print 'took a short nap after all that work:'
tr.print_diff()

mylist = []
print 'create an empty list for some reason:'
tr.print_diff() 
```

和输出：

```
$ python mem_test.py 256
begin:
                  types |   # objects |    total size
======================= | =========== | =============
                   list |         957 |      97.44 KB
                    str |         951 |      53.65 KB
                    int |         118 |       2.77 KB
     wrapper_descriptor |           8 |     640     B
                weakref |           3 |     264     B
      member_descriptor |           2 |     144     B
      getset_descriptor |           2 |     144     B
  function (store_info) |           1 |     120     B
                   cell |           2 |     112     B
         instancemethod |          -1 |     -80     B
       _sre.SRE_Pattern |          -2 |    -176     B
                  tuple |          -1 |    -216     B
                   dict |           2 |   -1744     B
empty list & dict:
  types |   # objects |   total size
======= | =========== | ============
   list |           2 |    168     B
    str |           2 |     97     B
    int |           1 |     24     B
after for loop:
  types |   # objects |   total size
======= | =========== | ============
    str |           1 |    256.04 KB
   list |           0 |    848     B
after deleting stuff:
  types |   # objects |      total size
======= | =========== | ===============
   list |          -1 |      -920     B
    str |          -1 |   -262181     B
after garbage collection (collected: 0):
  types |   # objects |   total size
======= | =========== | ============
took a short nap after all that work:
  types |   # objects |   total size
======= | =========== | ============
create an empty list for some reason:
  types |   # objects |   total size
======= | =========== | ============
   list |           1 |     72     B 
```

请注意，在 for 循环之后，str 类的总大小为 256 KB，与我传递给它的参数基本相同。在显式删除内存中对 mystr 的引用后，`del mystr`将被释放。之后，垃圾已经被捡起来了，以后就没有再减少了`gc.collect()`。

下一个版本使用一个函数为字符串创建不同的命名空间。

```
import gc
import sys
import time
from pympler import tracker

def loopy():
    mylist = []
    for x in xrange(100):
        mystr = ' ' * int(size_kb) * 1024
        mydict = {x: mystr}
        mylist.append(mydict)
    return mylist

tr = tracker.SummaryTracker()
print 'begin:'
tr.print_diff()

size_kb = sys.argv[1]

mylist = loopy()

print 'after for loop:'
tr.print_diff()

del mylist

print 'after deleting stuff:'
tr.print_diff()

collected = gc.collect()
print 'after garbage collection (collected: %d):' % collected
tr.print_diff()

time.sleep(2)
print 'took a short nap after all that work:'
tr.print_diff()

mylist = []
print 'create an empty list for some reason:'
tr.print_diff() 
```

最后是这个版本的输出：

```
$ python mem_test_2.py 256
begin:
                  types |   # objects |    total size
======================= | =========== | =============
                   list |         958 |      97.53 KB
                    str |         952 |      53.70 KB
                    int |         118 |       2.77 KB
     wrapper_descriptor |           8 |     640     B
                weakref |           3 |     264     B
      member_descriptor |           2 |     144     B
      getset_descriptor |           2 |     144     B
  function (store_info) |           1 |     120     B
                   cell |           2 |     112     B
         instancemethod |          -1 |     -80     B
       _sre.SRE_Pattern |          -2 |    -176     B
                  tuple |          -1 |    -216     B
                   dict |           2 |   -1744     B
after for loop:
  types |   # objects |   total size
======= | =========== | ============
   list |           2 |   1016     B
    str |           2 |     97     B
    int |           1 |     24     B
after deleting stuff:
  types |   # objects |   total size
======= | =========== | ============
   list |          -1 |   -920     B
after garbage collection (collected: 0):
  types |   # objects |   total size
======= | =========== | ============
took a short nap after all that work:
  types |   # objects |   total size
======= | =========== | ============
create an empty list for some reason:
  types |   # objects |   total size
======= | =========== | ============
   list |           1 |     72     B 
```

现在，我们不必清理 str，我认为这个例子说明了为什么使用函数是一个好主意。在一个命名空间中有一大块的地方生成代码确实会阻止垃圾收集器完成它的工作。它不会进入你的房子并开始假设东西是垃圾:) 它必须知道收集东西是安全的。

顺便说一句，埃文琼斯的[链接](http://www.evanjones.ca/memoryallocator/)非常有趣。

# css - Joomla：包含没有 iframe 的外部页面以应用自己的 CSS？

> ID：15350480
> 
> 赞同：0
> 
> 时间：2013-03-11T23:17:40.947
> 
> 标签：css, ajax, joomla, joomla2.5

我想将外部页面加载到模块位置，但将我自己模板的 CSS 定义应用于远程加载的内容。我尝试了 Joomla 的包装器模块，但是由于相同的域原则，它将内容加载到 iframe 中，这阻止了应用我自己的模板 CSS 定义......

有没有办法在不包围 iFrame 的情况下加载内容？例如，使用 Ajax 请求从远程站点加载 HTML 代码，然后将其无缝包装到模块位置？

谢谢你的帮助！

问候，萨沙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:35:25.550

抱歉不可能。@include 指令在其所有变体（iframe、@include、$.get 等）中的想法是显示您网站中您无法设置或编辑的外部内容。

对不起，我只能告诉你……祝你好运！

# php - 多维json编码的关联数组php到JS

> ID：15350481
> 
> 赞同：0
> 
> 时间：2013-03-11T23:17:41.383
> 
> 标签：php, javascript, jquery, arrays, json

嗨，最初我的数组看起来像这样

PHP

```
$results = array(
    "banana" => $bananavalue,
    "apple" => $applevalue,
);
echo json_encode($results); 
```

JS

```
var fruits = [];
$.ajax({
  type: "POST",
  url: "actions/MYphp.php",
  data: PassArray,
  dataType: 'json',
  beforeSend: function (html) {
    //    alert(html);
  },
  success: function (html) {
    var obj = html;
    // Now the two will work
    $.each(obj, function (key, value) {
      fruits.push([key, value]);
    }); 
```

但是，我想根据以下内容将其更改为多维水果和蔬菜：

```
results = array(
    "fruit"=>array(
        "banana" => $bananavalue,
        "apple" => $applevalue
    ),
    "vegetables"=>array(
        "lettuce" => $lettuce,
        "cabbage" => $cabbage
    )
);
echo json_encode($results); 
```

问题是如何在 Javascript 中循环每个数组并将其分配给两个数组。（水果和蔬菜）

我努力了

```
$.each(obj['fruit'], function(key, value) {
  fruits.push([key, value]);
}); 
```

但这没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:29:59.233

与 PHP 不同，javascript 没有关联数组。

JSON 编码的 PHP 关联数组解码为 javascript 普通对象。

要在 javascript 中访问数据：

```
$.ajax({
    type: "POST",
    url: "actions/MYphp.php",
    data: PassArray,
    dataType: 'json',
    success: function(obj) {
        //do whatever is required with obj.fruits and obj.vegetables here
    };
}); 
```

通常，您不希望将`obj`or分配给外部范围内的成员，因为它们在 ajax 响应到达之前不可用`obj.fruits`。`obj.vegetables`您通常会在范围内`obj.fruits`和范围内（以及从中调用的函数）做所有必要的事情。`obj.vegetables``success`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:20:37.887

像在 PHP 中那样做，嵌套 2 个循环。

```
$.each(obj, function(keyOfOuterArray, innerArray) {
   // keyOfOuterArray equals to vegetables, fruit
   console.log(keyOfOuterArray); 

   $.each(innerArray, function(keyOfInnerArray, valueOfInnerArray) {
     //valueOfInnerArrayis your inner array value
     console.log(keyOfInnerArray, valueOfInnerArray); 
   });
}); 
```

要回答您的问题，请执行以下操作：

```
var myNewObj = {};
$.each(obj, function(keyOfOuterArray, innerArray) {
   $.each(innerArray, function(keyOfInnerArray, valueOfInnerArray) {
      myNewObj[keyOfOuterArray][keyOfInnerArray] = valueOfInnerArray;
   });
}); 
```

# python - 使用python从网页下载图像

> ID：15350484
> 
> 赞同：3
> 
> 时间：2013-03-11T23:17:59.747
> 
> 标签：python, html-parsing, web-crawler

我正在尝试编写一个从网页下载图像的python脚本。在网页上（我使用的是NASA的每日图片页面），每天都会发布一张新图片，文件名不同。

所以我的解决方案是使用 HTMLParser 解析 html，查找“jpg”，并将图像的路径和文件名写入 HTML 解析器对象的属性（命名为“输出”，参见下面的代码）。

我是 python 和 OOP 的新手（这是我第一个真正的 python 脚本），所以我不确定这是否是通常的做法。欢迎任何建议和指点。

这是我的代码：

```
# Grab image url
response = urllib2.urlopen('http://apod.nasa.gov/apod/astropix.html')
html = response.read() 

class MyHTMLParser(HTMLParser):
def handle_starttag(self, tag, attrs):
    # Only parse the 'anchor' tag.
    if tag == "a":
       # Check the list of defined attributes.
       for name, value in attrs:
           # If href is defined, print it.
           if name == "href":
               if value[len(value)-3:len(value)]=="jpg":
                   #print value
                   self.output=value #return the path+file name of the image

parser = MyHTMLParser()
parser.feed(html)
imgurl='http://apod.nasa.gov/apod/'+parser.output 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:32:41.143

要检查字符串是否以`"jpg"`您可以使用`.endswith()`而不是`len()`和切片结尾：

```
if name == "href" and value.endswith("jpg"):
   self.output = value 
```

如果网页内的搜索更复杂，您可以使用`lxml.html`or`BeautifulSoup`代替，`HTMLParser`例如：

```
from lxml import html

# download & parse web page
doc = html.parse('http://apod.nasa.gov/apod/astropix.html').getroot()

# find <a href that ends with ".jpg" and 
# that has <img child that has src attribute that also ends with ".jpg"
for elem, attribute, link, _ in doc.iterlinks():
    if (attribute == 'href' and elem.tag == 'a' and link.endswith('.jpg') and
        len(elem) > 0 and elem[0].tag == 'img' and
        elem[0].get('src', '').endswith('.jpg')):
        print(link) 
```

# matlab - 如何遍历 MATLAB 中的嵌套结构字段

> ID：15350489
> 
> 赞同：1
> 
> 时间：2013-03-11T23:18:34.957
> 
> 标签：matlab, struct

我有几个主题的数据，每个主题都对一项活动进行了几次试验。我已将所有数据读入结构中，格式为 subject(1).trial(1).something subject(1).trial(2).somethingelse 等。

现在我需要将每个试验读入一个大矩阵 [A] 的行中，以便对每个试验进行一些计算，就好像主题无关紧要一样。所以我从这个开始：

```
for i = 2:numSubjects
    for j = 1:numTrials
    A(j,:) = cat(2,subject(i).trial(j).torque_integral,     subject(i).trial(j).work_integral); 
    end
end 
```

但这仅适用于第一个主题。当主题 (i) 增加到 3 时，试验 (j) 将回到 1。所以这个想法是输出 A 像这样排列：

主题|试用|A

1 1 1

1 2 2

1 3 3

2 1 4

2 2 5

2 3 6

希望这很清楚。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:28:54.403

我不太确定我是否了解您所做或想要做的所有事情，但显然如果您有两个`for`循环，其中内部的一个以 1 开头，外部的每个增量都会以一个开头...

怎么样：

```
k=0;
for i = 2:numSubjects
    for j = 1:numTrials
    k=k+1;
    A(k,:) = cat(2,subject(i).trial(j).torque_integral,     subject(i).trial(j).work_integral); 
    end
end 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:29:55.360

如果我正确阅读了您的问题，则您需要将每个试验放在一行中，因此当使您的 A 变量时，不要使用 j 作为索引，而是使用新索引...大声笑似乎有人在我面前发布了相同的内容...

```
m=1
for i = 2:numSubjects
    for j = 1:numTrials
       A(m,:) = cat(2,subject(i).trial(j).torque_integral,subject(i).trial(j).work_integral);
       m=m+1; 
    end
end 
```

# objective-c - 在同一个 ViewController 中有子视图是否正确？

> ID：15350498
> 
> 赞同：0
> 
> 时间：2013-03-11T23:19:30.617
> 
> 标签：objective-c, addsubview, subviews, xcode4.1

所以，这是我的问题。我有一个 ViewController，我想在不同的位置添加 2 个不同的视图（一个上一个下一个），但它们会同时出现，使用方法“addSubview”，但我不知道这是否正确，在一个 Viewcontroler 中有不同的 subViews？
我没有使用 Storyboard，我使用 XCode4.1 到 iOs 4.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:27:48.493

你混合了视图和视图控制器。

视图控制器可以控制以显示其数据并执行其业务逻辑的视图数量不受严格限制。

一个视图可以拥有的子视图的数量也不受限制。

只有一件事。当这些视图彼此相当独立时，不要将一个视图作为另一个视图的子视图。如果 a 是底层视图并且 b 和 c 是独立的子视图，那么执行：[a addSubView:b]; [a addSubView:c];

哪里有问题？

# ios - 我的对象 vs if( [obj class] 符合ToProtocol:@protocol(MyProtocol) )

> ID：15350503
> 
> 赞同：1
> 
> 时间：2013-03-11T23:19:48.900
> 
> 标签：ios, objective-c

在 Objective-C 中，哪种编码方式更好？

// 版本 #1

```
id obj<MyProtocol>;
[obj myMessage]; 
```

// 版本 #2

```
 id obj;
   if( [[obj class] conformsToProtocol:@protocol(MyProtocol)] )
       [obj myMessage]; 
```

出于某种原因，我在示例代码中看到了版本 1，但对我而言，版本 2 似乎更安全。如果在运行时从不符合协议 MyProtocol 的通用 id 分配 obj 会发生什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T23:22:10.320

第一个是编译时检查。

第二个是运行时检查。

Isaac 对“两者都做”的回答当然是可行的，但协议一致性检查在某些时候在某些地方有很大的开销（警告；过早的优化等等）。同样，协议确实支持@optional 方法。

我建议在运行时同时使用编译时协议检查（即声明性、精确性、接口和使用）`respondsToSelector:`。随着代码的重构并且速度非常快，这将使到/从`@optional`/的转换变得更容易。`@required``respondsToSelector:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:22:09.273

两者都做：

```
id<MyProtocol> obj;
if( [[obj class] conformsToProtocol:@protocol(MyProtocol)] )
{
    [obj myMessage];
} 
```

第一个，变量类型，告诉编译器你打算用这个变量做什么，但不保证这个变量实际上会保存你想要的东西；第二个，一致性检查，测试变量是否实际包含您想要的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T23:39:22.187

由于objective-c 在运行时绑定并且不是类型保存，所以两者都做。正确的声明可以防止在编译时检测到的所有错误。出于充分的理由，其中大多数只是警告。运行时检查可防止应用程序在您未获得预期处理的参考时崩溃。

# c# - 将程序集加载到 AppDomain 中，但出现无法加载文件或程序集异常

> ID：15350504
> 
> 赞同：2
> 
> 时间：2013-03-11T23:19:49.277
> 
> 标签：c#, .net, clr

我正在尝试动态加载一些这样的程序集：

```
using (var svc = new MyClient()) // MyClient is proxy to a WCF service
{
    var bytecode = svc.GetAssembly();
    var assembly = Assembly.Load(bytecode);
    var dependencies = svc.GetDependencies();
    foreach (var dependency in dependencies)
    {
        Assembly.Load(dependency.Bytecode);
        Console.WriteLine("loaded {0}", asm.FullName);
    }
    var type = assembly.GetExportedTypes().First();
    var ctor = type.GetConstructor(new Type[0]);
    var obj = ctor.Invoke(new object[0]);    // get an exception here
} 
```

但是，当调用 ctor 时出现异常，并且 CLR 尝试加载依赖程序集。我已在 for 循环中将依赖项加载到应用程序域中。我该如何解决这个异常？

```
 System.Reflection.TargetInvocationException occurred
  HResult=-2146232828
  Message=Exception has been thrown by the target of an invocation.
  Source=mscorlib
  StackTrace:
       at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor)
       at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
       at System.Reflection.ConstructorInfo.Invoke(Object[] parameters)
       at MyClass.Program.Main(String[] args) in f:\Client\Program.cs:line 25
  InnerException: System.IO.FileNotFoundException
       HResult=-2147024894
       Message=Could not load file or assembly 'Asm2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null' or one of its dependencies. The system cannot find the file specified.
       Source=Asm1
       FileName=Asm2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
       FusionLog==== Pre-bind state information ===
LOG: User = mymachine\me
LOG: DisplayName = Asm2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
 (Fully-specified)
LOG: Appbase = file:///f:/Client/bin/Debug/
LOG: Initial PrivatePath = NULL
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: f:\Client.vshost.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///f:/Client/bin/Debug/Asm2.DLL.
LOG: Attempting download of new URL file:///f:/Client/bin/Debug/Asm2/Asm2.DLL.
LOG: Attempting download of new URL file:///f:/Client/bin/Debug/Asm2.EXE.
LOG: Attempting download of new URL file:///f:/Client/bin/Debug/Asm2/Asm2.EXE.

       StackTrace:
            at MyNamespace.MyClass..ctor()
       InnerException: 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T23:47:38.617

我通过处理解决了类似的问题`AppDomain.CurrentDomain.AssemblyResolve`：

```
AppDomain.CurrentDomain.AssemblyResolve += AssemblyResolve;

private static Assembly AssemblyResolve(object sender, ResolveEventArgs args)
{
    return AppDomain.CurrentDomain.GetAssemblies().FirstOrDefault(a => a.FullName == args.Name);
} 
```

这要求所有依赖项都已加载。

# java - (Java) 从内存中删除一个实例？

> ID：15350505
> 
> 赞同：0
> 
> 时间：2013-03-11T23:19:56.233
> 
> 标签：java

我的问题有点简单。我只想知道，你能从java中的RAM中删除一个对象的实例吗？比如，当你输入：

```
new Cat(); 
```

您没有为那只新猫分配变量，因此您无法访问它。这发生在游戏中。它说类似“new Pig();”，它创建了一个猪的实例。但是当猪死了会发生什么？它是如何被删除的？它可以调用自己的方法来擦除自己吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T23:21:35.537

垃圾收集器在没有“实时”可以得到它之后的某个时候清理它。

您不能明确删除它。它只会在某个时候被垃圾收集。

有很多关于此的文章 - 只需搜索“java 垃圾收集器”即可获得更多详细信息。理想情况下，请阅读*最近*的文章，因为在垃圾收集方面，最先进的技术发展很快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T23:22:28.527

这是一篇关于垃圾收集器如何在 Java 中工作的好文章

[http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html](http://javarevisited.blogspot.com/2011/04/garbage-collection-in-java.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T23:23:00.853

你不能，垃圾收集器负责从内存中删除实例。

您可以使用调用垃圾收集器，`System.gc()`但该方法不能保证从内存中清除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T23:55:53.640

无法手动执行此操作。JVM 中的垃圾收集器负责处理它。Java 不像 C 或 C++ 那样你拥有`free()`并`delete()`分别用于此目的。

您拥有的最接近的东西是`System.gc();`，`Runtime.gc();`但它们不会强制垃圾收集器。他们只是建议。

垃圾收集本身可以强制：[强制垃圾收集](http://docs.oracle.com/javase/7/docs/platform/jvmti/jvmti.html#ForceGarbageCollection)。使用 Java 虚拟机工具接口，函数

```
jvmtiError ForceGarbageCollection(jvmtiEnv* env) 
```

将“强制 VM 执行垃圾回收”。

# c# - 有条件地设置一个 GridViewColumn 单元格模板

> ID：15350508
> 
> 赞同：3
> 
> 时间：2013-03-11T23:20:07.543
> 
> 标签：c#, wpf, mvvm

我有一个视图 DisplayTestsView.cs 并且在那个视图中我有

```
<ListView ItemsSource="{Binding SelectedTechnician.Tests}"
SelectedItem="{Binding SelectedTest}" x:Name="AvailableTestsListView" Height="140">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Id" Width="auto" DisplayMemberBinding="{Binding Id}"/>
            <GridViewColumn Header="Test" Width="auto" DisplayMemberBinding="{Binding TestTypeName}"/>
            <GridViewColumn Header="Status" Width="auto" DisplayMemberBinding="{Binding StutusTypeName}"/>
        </GridView>
    </ListView.View>
</ListView> 
```

我希望 StatusTypeName 单元格文本的 TextColor 是基于条件的某种颜色。例如，如果 StatusTypeName 等于“Incomplete”，那么我希望单元格中的文本变为红色。

从视图中可以看到的测试（实体）列表是 SelectedTechnician.Tests 和 SelectedTechnician 是我的 ViewModel (DisplayTestsViewModel.

我想必须使用 GridViewColumn 上的 CellTemplate 属性，但对如何有条件地操作模板（通常）知之甚少，我不知道从哪里开始。

即使 CellTemplate 与它无关，我如何有条件地将 GridViewColumn 的单元格的文本设置为根据上述类似的条件更改颜色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T23:37:24.560

您是正确的， CellTemplate 是实现颜色更改的正确位置。

你可以做这样的事情（警告 - 未经测试）：

```
<ListView ItemsSource="{Binding SelectedTechnician.Tests}"
SelectedItem="{Binding SelectedTest}" x:Name="AvailableTestsListView" Height="140">
    <ListView.View>
        <GridView>
            <GridViewColumn Header="Id" Width="auto" DisplayMemberBinding="{Binding Id}"/>
            <GridViewColumn Header="Test" Width="auto" DisplayMemberBinding="{Binding TestTypeName}"/>
            <GridViewColumn Header="Status" Width="auto">
                <GridViewColumn.CellTemplate>
                    <DataTemplate>
                        <TextBlock
                            Text="{Binding StatusTypeName}"
                            Foreground="{Binding StatusTypeName, Converter={StaticResource StatusTypeNameToBrushConverter}}" />
                    </DataTemplate>
                </GridViewColumn.CellTemplate>
        </GridView>
    </ListView.View>
</ListView> 
```

`StatusTypeNameToBrushConverter`会是这样的：

```
public class StatusTypeNameToBrushConverter : IValueConverter
{
    public object Convert(
        object value, Type targetType, object parameter, CultureInfo culture)
    {
        var statusTypeName = (string)value;
        switch (statusTypeName)
        {
            case "Incomplete":
                return Brushes.Red;
            default:
                return Brushes.Black;
        }
    }

    public object ConvertBack(
        object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

# avro - Avro 架构演变

> ID：15350509
> 
> 赞同：12
> 
> 时间：2013-03-11T23:20:22.003
> 
> 标签：avro

我有两个问题：

1.  是否可以使用相同的阅读器并解析用两个兼容的模式编写的记录，例如`Schema V2`只有一个额外的可选字段，`Schema V1`并且我希望读者理解两者？我认为这里的答案是否定的，但如果是，我该怎么做？

2.  我尝试使用 写入记录`Schema V1`并读取它`Schema V2`，但出现以下错误：

    org.apache.avro.AvroTypeException：找到 foo，期待 foo

我使用了 avro-1.7.3 并且：

```
 writer = new GenericDatumWriter<GenericData.Record>(SchemaV1);
   reader = new GenericDatumReader<GenericData.Record>(SchemaV2, SchemaV1); 
```

以下是这两种模式的示例（我也尝试过添加命名空间，但没有成功）。

架构 V1：

```
{
"name": "foo",
"type": "record",
"fields": [{
    "name": "products",
    "type": {
        "type": "array",
        "items": {
            "name": "product",
            "type": "record",
            "fields": [{
                "name": "a1",
                "type": "string"
            }, {
                "name": "a2",
                "type": {"type": "fixed", "name": "a3", "size": 1}
            }, {
                "name": "a4",
                "type": "int"
            }, {
                "name": "a5",
                "type": "int"
            }]
        }
    }
}]
} 
```

架构 V2：

```
{
"name": "foo",
"type": "record",
"fields": [{
    "name": "products",
    "type": {
        "type": "array",
        "items": {
            "name": "product",
            "type": "record",
            "fields": [{
                "name": "a1",
                "type": "string"
            }, {
                "name": "a2",
                "type": {"type": "fixed", "name": "a3", "size": 1}
            }, {
                "name": "a4",
                "type": "int"
            }, {
                "name": "a5",
                "type": "int"
            }]
        }
    }
},
{
            "name": "purchases",
            "type": ["null",{
                    "type": "array",
                    "items": {
                            "name": "purchase",
                            "type": "record",
                            "fields": [{
                                    "name": "a1",
                                    "type": "int"
                            }, {
                                    "name": "a2",
                                    "type": "int"
                            }]
                    }
            }]
}]
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-31T23:38:07.790

我遇到了同样的问题。这可能是 avro 的一个错误，但您可能可以通过在“purchase”字段中添加“default”：null 来解决。

查看我的博客了解详情：[http ://ben-tech.blogspot.com/2013/05/avro-schema-evolution.html](http://ben-tech.blogspot.com/2013/05/avro-schema-evolution.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T07:30:17.200

你可以做相反的事情。意味着您可以解析数据模式 1 并从模式 2 写入数据。因为在写入时它将数据写入文件，如果我们在读取时不提供任何字段，那就没问题了。但是如果我们写的字段比读取的少，它在读取时不会识别额外的字段，所以会出错。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-28T14:31:57.820

最好的方法是有一个模式映射来维护像 Confluent Avro 模式注册表这样的模式。

**关键要点：**

```
1\.  Unlike Thrift, avro serialized objects do not hold any schema.
2\.  As there is no schema stored in the serialized byte array, one has to provide the schema with which it was written.
3\.  Confluent Schema Registry provides a service to maintain schema versions.
4\.  Confluent provides Cached Schema Client, which checks in cache first before sending the request over the network.
5\.  Json Schema present in “avsc” file is different from the schema present in Avro Object.
6\.  All Avro objects extends from Generic Record
7\.  During Serialization : based on schema of the Avro Object a schema Id is requested from the Confluent Schema Registry.
8\.  The schemaId which is a INTEGER is converted to Bytes and prepend to serialized AvroObject.
9\.  During Deserialization : First 4 bytes are removed from the ByteArray.  4 bytes are converted back to INTEGER(SchemaId)
10\. Schema is requested from the Confluent Schema Registry and using this schema the byteArray is deserialized. 
```

[http://bytepadding.com/big-data/spark/avro/avro-serialization-de-serialization-using-confluent-schema-registry/](http://bytepadding.com/big-data/spark/avro/avro-serialization-de-serialization-using-confluent-schema-registry/)

# paypal - 构建 Paypal OAuth

> ID：15350511
> 
> 赞同：2
> 
> 时间：2013-03-11T23:20:37.880
> 
> 标签：paypal, paypal-sandbox

我正在尝试获取 Paypal 的 RESTful Web 服务的访问令牌，但不幸的是没有取得任何进展。这是我第一次与 REST 打交道，所以请耐心等待 :)

这是我所拥有的：

1.  贝宝通过贝宝开发者网站为沙盒帐户提供的 Client_id 和密码。
2.  [端点： https](https://api.sandbox.paypal.com/v1/oauth2/token) ://api.sandbox.paypal.com/v1/oauth2/token

我指的文档是：[https ://developer.paypal.com/webapps/developer/docs/integration/direct/make-your-first-call/](https://developer.paypal.com/webapps/developer/docs/integration/direct/make-your-first-call/)

现在是进行 API 调用的有趣部分。我正在使用 PHP 进行开发，所以我使用 CURL 进行调用。像这样的东西；

```
const CLIENT_ID = ****..*** ;
const SECRET = ***..***;

$base64EncodedClientID = base64_encode(self::CLIENT_ID . ":" . self::SECRET);
$headers = array("Authorization" => "Basic " . $base64EncodedClientId, "Accept" =>"*/*", "Content-type" => "multipart/form-data");
$params = array("grant_type"=>"client_credentials");
$url = "https://api.sandbox.paypal.com/v1/oauth2/token";

 $ch = curl_init();
 curl_setopt($ch,CURLOPT_RETURNTRANSFER, 1);
 curl_setopt($ch,CURLOPT_URL, $url);
 curl_setopt($ch,CURLOPT_POST, true);
 curl_setopt($ch,CURLOPT_HEADER, $headers);
 curl_setopt($ch,CURLOPT_POSTFIELDS,$params);
 $response = curl_exec($ch); 
```

很香草对吧？除了我没有得到我期望从 Paypal 得到的 JSON 响应，而是错误的。这意味着我的 CURL 请求没有准备好，可能是我错误地设置了标头或参数不正确。无论如何，该 URL 绝对是可访问的，因为我能够使用相同的凭据通过命令行访问它并获得所需的 JSON 响应。

上面代码的一个明显问题是我提供了 client_id 和 secret 作为标头选项。基本意义告诉我，它们需要成为 POST 字段数据的一部分但是，如果您查看此 Github 代码的第 89 行[https://github.com/paypal/rest-api-sdk-php/blob/master/lib /PayPal/Auth/OAuthTokenCredential.php](https://github.com/paypal/rest-api-sdk-php/blob/master/lib/PayPal/Auth/OAuthTokenCredential.php)（Paypals 的官方 PHP REST SDK），它清楚地表明正在标题字段中设置凭据。

我在哪里搞砸了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T03:59:54.283

使用 curl，您无需手动为 Authorization 标头生成 base64 编码值，只需使用 CURLOPT_USERPWD 选项并将 clientID 和 secret 作为 user:pwd 传递。

`curl_setopt($curl, CURLOPT_USERPWD, $clientId . ":" . $clientSecret);`

这是一个示例 - 查找 get_access_token() 方法： [https ://github.com/paypal/rest-api-curlsamples/blob/master/execute_all_calls.php](https://github.com/paypal/rest-api-curlsamples/blob/master/execute_all_calls.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-26T20:46:04.177

遇到了完全相同的问题。问题是 PayPal 接受内容类型 application/x-www-form-urlencoded。您的代码正在尝试发送 multipart/form-data。CURL 默认发送 application/x-www-form-urlencoded，但您将数据作为数组传递。相反，您应该像 url 编码字符串一样传递数据，因为这是 application/x-www-form-urlencoded 数据的样子：

```
$params = "grant_type=client_credentials"; 
```

你的标题有同样的问题。将其作为字符串数组而不是字典传递。例如：

```
$headers = ["Authorization Basic " . $base64EncodedClientId]; 
```

此外，您不需要传入的其他两个标头。“Accept”标头什么都不做，因为您接受所有内容，并且 Content-type 之一是错误的，两个默认为 'application/x-www- CURL 的 form-urlencoded' 所以除非你需要覆盖它，否则没有必要。

# python - Python标准库包/模块不在名为python的包中是否有原因？

> ID：15350517
> 
> 赞同：1
> 
> 时间：2013-03-11T23:21:15.453
> 
> 标签：python, package, standard-library

就像在 Java 中所做的那样......这使得断言包/模块是否属于标准库的任务变得微不足道。我猜这只是一个约定。未来有没有改变这种情况的计划？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T23:28:03.263

标准库之外的 Python 包偶尔会被采用到标准库中。如果有一个命名约定来区分它们，则必须重命名模块，这会无缘无故地破坏现有代码。

例如，argparse 并不总是标准库的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:34:05.253

根据[PEP 20](http://www.python.org/dev/peps/pep-0020/)，“平面优于嵌套”。

Python 风格指南不鼓励使用嵌套包，标准库（大部分）遵循此约定。

# magento - 从搜索引擎中隐藏 Magento 的分层导航

> ID：15350519
> 
> 赞同：1
> 
> 时间：2013-03-11T23:21:36.037
> 
> 标签：magento, magento-1.7, layered-navigation

我希望有人可以帮助我解决我过去几天一直试图解决的问题。我想完全从搜索引擎中隐藏 Magento 的分层导航，但让用户可以使用它。出于 SEO 的原因，我不想满足于 NoFollowing 所有链接，或者使用 noindex follow 元标记，甚至完全用 Robots.txt 阻止它。处理此问题的最有效方法是仅向启用 Cookie 的用户显示分层导航，因为 Google 不使用 Cookie。使用 JavaScript 也可能达到相同的效果，但我选择了 Cookie 方法。

到目前为止，我已经设法实现了一个粗略的 JS 来检查页面加载后是否启用了 cookie（改编自这个论坛上的另一个线程）。如果启用了 cookie，它什么也不做并显示分层导航，但如果未启用 cookie，我想删除“catalog.leftnav”块。我一生都无法从我的 JS 脚本中弄清楚如何做到这一点。我所能实现的只是删除 div 元素，或者将 style.display 设置为 none 等，虽然所有这些技术都从前端删除了链接，但 Google 仍然可以看到它们。这是我到目前为止在模板/目录/层/filter.phtml 中的代码示例

```
<div id="shop-by-filters">
  <ol>
    <?php foreach ($this->getItems() as $_item): ?>
    <li>
    <?php if ($_item->getCount() > 0): ?>
    <a href="<?php echo $this->urlEscape($_item->getUrl()) ?>" rel="nofollow"><?php echo $_item->getLabel() ?></a>
    <?php else: echo $_item->getLabel() ?>
    <?php endif; ?>
    <?php if ($this->shouldDisplayProductCount()): ?>
    (<?php echo $_item->getCount() ?>)
    <?php endif; ?>
    </li>
    <?php endforeach ?>
  </ol>
</div>

<script type="text/javascript">
if (navigator.cookieEnabled) {
    return true; 
} else if (navigator.cookieEnabled === undefined) {
    document.cookie = "testcookie";
    if (cookie_present("testcookie"))
        return true;   
} else {
var elem = document.getElementById('shop-by-filters');
elem.parentNode.removeChild(elem);
}
</script> 
```

谁能帮我解决这个问题，或者有更好的方法吗？请记住，我仍在尝试了解 Magento，因此如果实施很复杂，我可能需要一些说明。

谢谢你。

布伦登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:41:36.987

首先，Javascript 不会阻止 Google 索引该内容。

你为什么不想'满足于 NoFollowing 所有链接'？这正是 NoFollow 的用途。您还可以告诉 Google 不要关注网站管理员工具中的限定词/查询字符串。

如果出于某种原因您真的想向 Google 隐藏该块，请`$_SERVER['HTTP_USER_AGENT']`在此处编辑模板和字符串与 Google 非常公开的用户代理列表进行比较[http://support.google.com/webmasters/bin/answer.py?hl=en&answer =1061943](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=1061943)

编辑——字符串比较

```
<?php if (stripos($_SERVER['HTTP_USER_AGENT'], 'Googlebot') !== false): ?>
<div id="shop-by-filters">
  <ol>
    <?php foreach ($this->getItems() as $_item): ?>
    <li>
    <?php if ($_item->getCount() > 0): ?>
    <a href="<?php echo $this->urlEscape($_item->getUrl()) ?>" rel="nofollow"><?php echo $_item->getLabel() ?></a>
    <?php else: echo $_item->getLabel() ?>
    <?php endif; ?>
    <?php if ($this->shouldDisplayProductCount()): ?>
    (<?php echo $_item->getCount() ?>)
    <?php endif; ?>
    </li>
    <?php endforeach ?>
  </ol>
</div>
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:17:36.597

我不确定 Google 机器人是否会可靠地解析您的 javascript。

您最好根据当前与 php.ini 的会话隐藏分层导航。

```
<?php if (Mage::getSingleton('customer/session')): ?>
    ...your nav code...
<?php endif ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T23:32:13.070

这是一个巧妙的主题。我们使用此代码向 Google 隐藏分层导航，但我们不确定它是否有效......

```
<div id="filters-no-follow"></div>

<?php
function prepare_for_echo($string) {
$no_br = trim(preg_replace('/\s+/', ' ', $string));
$no_slashes = str_replace('\'', '\\\'', $no_br);
return $no_slashes;
}
?>

<script>
function please_enable_cookies() {
var f = document.getElementById('filters-no-follow');
f.innerHTML = '<div class="no-cookies-error">Enable cookies to choose filters.</div>';
}

function please_load_filters() {
var f = document.getElementById('filters-no-follow');
f.innerHTML = '<?php if ( !empty($filtersHtml) || !empty($stateHtml) ): ?>'
+ '\n<div class="block block-layered-nav">'
+ '\n    <div class="block-title">'
+ '\n        <strong><span><?php echo prepare_for_echo($this->__('Shop By')); ?></span></strong>'
+ '\n    </div>'
+ '\n    <div class="block-content">'
+ '\n        <?php echo prepare_for_echo($this->getStateHtml()); ?>'
+ '\n        <?php if ($this->canShowOptions()): ?>'
+ '\n        <p class="block-subtitle"><?php echo prepare_for_echo($this->__('Shopping Options')); ?></p>'
+ '\n        <dl id="narrow-by-list">'
+ '\n            <?php echo prepare_for_echo($filtersHtml); ?>'
+ '\n        </dl>'
+ '\n        <?php endif; ?>'
+ '\n    </div>'
+ '\n</div>'
+ '\n<?php endif; ?>';
}

function are_cookies_enabled()
{
    var cookieEnabled = (navigator.cookieEnabled) ? true : false;

    if (typeof navigator.cookieEnabled == "undefined" && !cookieEnabled)
    { 
        document.cookie="testcookie";
        cookieEnabled = (document.cookie.indexOf("testcookie") != -1) ? true : false;
    }
    return (cookieEnabled);
}

if(are_cookies_enabled()) {
please_load_filters();
} else {
please_enable_cookies();
}
</script> 
```

# matlab - MATLAB：从起点向量和终点向量开始，在这些点之间运行连续数字

> ID：15350524
> 
> 赞同：0
> 
> 时间：2013-03-11T23:22:07.620
> 
> 标签：matlab, vector

这可能很简单，但这是我的问题。

我有两个向量，开始和结束。起点是连续数字序列的起点，终点是连续数字序列的终点。我想创建一个包含这些运行的向量。

例如，说

```
starts = [2 7 10 18 24]  
ends = [5 8 15 20 30] 
```

我想创建以下向量

```
ans = [2 3 4 5 7 8 10 11 12 13 14 15 18 19 20 24 25 26 27 28 29 30] 
```

使用开始：结束只使用每个向量的第一个元素

* * *

我也想在不使用 (for) 循环的情况下做到这一点，以尽可能快地保持它！

谢谢阅读

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:30:23.453

假设起点和终点的数量始终相同，并且它们始终匹配（例如，第 n 个起点对应于第 n 个终点），那么您可以这样做

```
cell2mat(arrayfun(@(s,e) (s:e), starts, ends, 'UniformOutput', false)) 
```

对于更详细的解释，该`arrayfun(@(s,e) (s:e), starts, ends, 'UniformOutput', false)`部分将生成一个由 n 个元胞数组组成的序列，其中 n 是`starts`和`ends`向量的长度，使得每个元胞数组具有`starts(i):ends(i)`对应于两个向量的第 i 个元素的序列。然后该`cell2mat`函数会将每个单独的单元阵列融合为 1 个更大的矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:52:31.830

当您担心使其变快时，请预先分配：

```
starts = [2 7 10 18 24]  
ends = [5 8 15 20 30]
a = zeros(1,sum(ends)+numel(ends)-sum(starts));
% or a = zeros(1,sum(ends+1-starts))
j = 1;
for i = 1:numel(ends)
    j2 = j+ends(i)-starts(i);
    a(j:j2) = (starts(i):ends(i));
    j = j2+1;
end 
```

# .net - 如何对工作流程的一部分进行单元测试？

> ID：15350530
> 
> 赞同：2
> 
> 时间：2013-03-11T23:22:48.200
> 
> 标签：.net, unit-testing, workflow-foundation-4, workflow-foundation

我打算只测试一个工作流序列（它不是单独的 CodeActivity）。有没有一种方法可以只调用所需的序列并传入所需的参数？

感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T12:44:48.753

我通常做的是将工作流分成几个子工作流。

因此，您可以做的是创建一个活动，将这个序列放入其中，然后在主工作流中替换它。之后，您可以单独测试它。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:53:54.497

答案是：不，你不能。

至少效率不高。您可以使用工作流的 XAML 进行大量思考。我想到了提取内部序列，但是，请不要这样做！

如果您的序列使用在外部作用域上分配的局部变量怎么办？这只是一个想法，在测试孤立的内部序列时可能会出错。

无论如何，你为什么要做这样的事情？这就像对另一个方法内部的方法调用进行单元测试一样。要么调用外部方法（工作流本身），要么隔离内部方法（序列）以便能够对其进行测试。

**编辑：**

好的，如果你想接受它，并且算上你有一个具有*巨大工作流*的 XAML ，也许你可以摆脱这样的事情：

将您的 XAML 加载到活动中：

```
var activity = ActivityXamlServices.Load("c:\hugeworkflow.xaml"); 
```

拥有你的序列化活动，并计算你知道内部序列在哪里，在里面搜索它`activity`。让我们假设该序列位于另一个序列（即工作流根）中：

```
var rootSequence = activity as Sequence;

var innerSequence = rootSequence
                    .Activities
                    .FirstOrDefault(a => a is Sequence) as Sequence; 
```

现在您可以像这样执行内部序列：

```
var arguments = new Dictionary<string, object> 
{
    { "IntArgument", 10 },
    { "StringArgument", "hello world" }
};

WorkflowInvoker.Invoke(innerSequence, arguments); 
```

你怎么能从一个序列中断言一些东西，我不知道。

尚未测试任何此代码，因此可能缺少某些内容，但您明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:35:47.143

您可以使用[codeplex](http://wf.codeplex.com/)`Microsoft.Activities.UnitTesting`中的库对您的个人活动进行单元测试。更多与您的场景相匹配的[文档](http://wf.codeplex.com/wikipage?title=Microsoft.Activities.UnitTesting%20Overview&referringTitle=Home)和[示例。](http://wf.codeplex.com/wikipage?title=How%20do%20I%20use%20Microsoft.Activities.UnitTesting&referringTitle=Microsoft.Activities.UnitTesting%20Overview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T14:42:18.250

您可以采用一种技术来实现这一点，但这并不是很简单。想法是用模拟活动替换这一序列之外的所有其他活动，并使用 Microsoft.Activities.UnitTesting 项目调用工作流。

这个链接[在这里](http://blogs.msdn.com/b/rjacobs/archive/2010/09/24/how-to-unit-test-workflows-mocking-activities.aspx)解释了我的意思

出于好奇，鉴于 SOLID 原则大力提倡接口隔离和单一职责，您是否认为将您称为原子单元（并因此希望独立测试）的工作流程的那些部分隔离到单独的活动或子工作流程中没有任何好处?

# java - 在数组中创建 JButton 时出错

> ID：15350536
> 
> 赞同：0
> 
> 时间：2013-03-11T23:23:59.257
> 
> 标签：java, arrays, swing, jbutton

我正在编写一个程序，它有一个 9x9 按钮，每个按钮从左上角开始从 1 到 81 到右边

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class MS extends JFrame implements ActionListener {

    static JFrame bframe;
    static JPanel p;

    public MS() {
        p = new JPanel(new GridLayout(9,9));  
        private static JButton[][] jgo = new JButton[9][9];
        int count = 1;
        for(int row=0; row < 9; row++)
            for(int col=0; col < col; col++) {
                jgo[row][col] = new JButton("%d",count);
                p.add(jgo[row][col]);
                count++;
            }
        }

    public static void main(String[] args) {  
        bframe=new MS();    //CREATE me and 
        bframe.add(p);      //add the JPanel

                bframe.setSize(810,810);
        bframe.setLocation(0,0);                //where my upper left hand corner goes
        bframe.setVisible(true);                //I start out invisible
        bframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  //need this for the window manager
    }
} 
```

我的错误发生在我的构造函数中，它与我如何制作按钮和设置值有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T23:29:48.667

`JButton`没有任何`JButton(String, int)`用于格式化目的的构造函数，您可能想要这样做：

```
new JButton(Integer.toString(count)) 
```

代替

```
new JButton("%d",count) 
```

* * *

*旁注：*

您不能`private`在构造函数中使用关键字：

```
 private static JButton[][] jgo = new JButton[9][9];
    ^ 
```

此行将立即退出：

```
for (int col = 0; col < col; col++) { 
```

as`col < col`将评估 as`true`并且不会执行内部循环。

该语句只能在类块中有效。

静态变量通常被认为是糟糕的设计。变量`bframe`和`p`可以在本地范围内使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T23:31:32.557

这里是 JButton 类的构造函数列表

```
JButton()
      Creates a button with no set text or icon.
JButton(Action a)
      Creates a button where properties are taken from the Action supplied.
JButton(Icon icon)
      Creates a button with an icon.
JButton(String text)
      Creates a button with text.
JButton(String text, Icon icon)
      Creates a button with initial text and an icon. 
```

没有任何一款像您正在使用的那样。

```
JButton("%d",count); // JButton(String,int); or JButton(format,int); 
```

相反，您可以使用

```
JButton(""+count)://JButton(String text) 
```

# r - ggplot2，geom_segment的颜色段

> ID：15350538
> 
> 赞同：4
> 
> 时间：2013-03-11T23:24:08.707
> 
> 标签：r, time, plot, ggplot2, visualization

我正在制作一些室内和室外活动的相当复杂的情节，但我有点卡住了。我想在我的情节步骤中通过（、、和）对室内/室外花费的时间进行着色（`Xmin`见`Ymin`下文`Zmin`）。*它目前仅*`geom_segment`着色（使用连续变量，有点偏离）。 *`Zmin`*

 *我已经粘贴了所有代码以防其他人想要构建这样的东西，我最初是受到[这篇博文的](http://fishyoperations.com/r/timeline-graph-with-ggplot2/)启发。

任何帮助将不胜感激，谢谢！

```
df <- data.frame(
  date = seq(Sys.Date(), len= 156, by="4 day")[sample(156, 26)],
  action = paste('Then', LETTERS[1:13], 'happed, which was not related to', LETTERS[14:26]),
  IndoorOutdoor = rep(c(-1,1), 13),
  Xmin = sample(90, 26, replace = T),
  Ymin = sample(90, 26, replace = T),
  Zmin = sample(90, 26, replace = T)
)

df$XYZmin <- rowSums(df[,c("Xmin", "Ymin", "Zmin")])*df$IndoorOutdoor

# install.packages("ggplot2", dependencies = TRUE)
require(ggplot2)

# step 1 
plot <- ggplot(df,aes(x=date,y=0))

# step 2, this is where I want to add 'more' color 
plot <- plot + geom_segment(aes(y=0,yend=XYZmin,xend=date, colour= Zmin))

# The text is added as follows
plot <- plot + geom_text(aes(y=XYZmin,label=paste(action, '\n this happed on ', date)),size=2.5,hjust=-.01, vjust=-.01, angle = 35)

# points at the end of the line segments
plot <- plot + geom_point(aes(y=XYZmin))

# #raw a vertical line
plot <- plot + geom_hline(y=0,size=1,color='purple')

#drawing the actual arrow
# plot <- plot + geom_segment(x=2011.4,xend=2012.2,y=.2,yend=0,color='purple',size=1) + geom_segment(x=2011.4,xend=2012.2,y=-.2,yend=0,color='purple',size=1)

plot <- plot + theme(axis.text.y = element_blank()) + ylab('') + xlab('')
plot + labs(title = "Timeline for when what happened") 
```

![在此处输入图像描述](../Images/7602b41cdf62dc9d2c81086431659a99.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T01:21:47.027

这里有两种方法。一个用不同的 s 构造每一行`geom_segment`（我认为这更接近你正在做的事情？）另一个只是使用`geom_bar`，这将是我的偏好（更具可扩展性）。我认为构建时有一个错误`data.frame`- 你在 make 时创建了 56 行`IndoorOutdoor`，这会在以后产生问题。我在下面改了。

```
set.seed(1234)
df <- data.frame(
  date = seq(Sys.Date(), len= 156, by="4 day")[sample(156, 26)],
  action = paste('Then', LETTERS[1:13], 'happed, which was not related to', LETTERS[14:26]),
  IndoorOutdoor = rep(c(-1,1), 13), #Change so there are only 26 rows
  Xmin = sample(90, 26, replace = T),
  Ymin = sample(90, 26, replace = T),
  Zmin = sample(90, 26, replace = T)
)

df$XYZmin <- rowSums(df[,c("Xmin", "Ymin", "Zmin")])*df$IndoorOutdoor
df[,8:10] <- df[,4:6]*df[,3] #Adding the sign to each X/Y/Z
names(df)[8:10] <- paste0(names(df)[4:6],"p") #to differentiate from your X/Y/Z
require(ggplot2) 
```

对于`geom_bar`解决方案，然后我融化`df`以便可以绘制单个值，并将其`fill`映射到变量（`Xmin`等）

```
df.m <- melt(df[,c(1:3,7:10)], measure.vars=c("Xminp", "Yminp", "Zminp"))
plot.alt <- ggplot(df.m, aes(date, value, fill=variable)) + 
  geom_bar(position="stack", stat="identity", width=0.5) + #width is just to make it look like yours
#All of this is from your original plot
  geom_text(aes(y=XYZmin,label=paste(action, '\n this happed on ', date)),size=2.5,hjust=-.01, vjust=-.01, angle = 35) + 

  geom_point(aes(y=XYZmin), show_guide=FALSE) +
  geom_hline(y=0,size=1,color='purple') +
  theme(axis.text.y = element_blank()) + ylab('') + xlab('') +
  labs(title = "Timeline for when what happened")
plot.alt 
```

![在此处输入图像描述](../Images/92018aa67b012329ce4f451a41aad750.png)

或者，这是一种使用以下方式构建它的方法`geom_segment`：

```
plot <- ggplot(df,aes(x=date)) +
#Three geom_segments 
  geom_segment(aes(y=0,yend=Xminp,xend=date), colour= "blue") +
  geom_segment(aes(y=Xminp,yend=Xminp + Yminp,xend=date), colour= "red") +
  geom_segment(aes(y=Xminp + Yminp,yend=Xminp + Yminp + Zminp,xend=date), colour= "green") +
#This is all from your plot
  geom_text(aes(y=XYZmin,label=paste(action, '\n this happed on ', date)),size=2.5,hjust=-.01, vjust=-.01, angle = 35) +
  geom_point(aes(y=XYZmin)) +
  geom_hline(y=0,size=1,color='purple') +
  theme(axis.text.y = element_blank()) + ylab('') + xlab('') +
  labs(title = "Timeline for when what happened")
plot 
```

希望这是有道理的......如果这不是你想要的，请告诉我。 ![在此处输入图像描述](../Images/16f4d3077c318c9e1df871009d57697f.png)*

# google-maps - 从谷歌地图结果中提取数据

> ID：15350543
> 
> 赞同：0
> 
> 时间：2013-03-11T23:24:34.050
> 
> 标签：google-maps

我想创建一个自定义应用程序，将我使用 Google 地图找到的位置聚合到自定义地图中。由于几个原因，谷歌的保存到地图功能不足以满足我的需求。

我想知道是否有一种方法可以创建一个浏览器扩展，让我弹出一个自定义表单，然后将表单数据和 lon/lat 数据传输到我自己的服务器。

除了提取经度和纬度数据外，我自己可以弄清楚大部分内容。这是否存储在我可以在查看标记或位置详细信息时查询的 dom 或窗口对象中的任何位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:18:31.810

只需使用谷歌地图事件监听器来获取坐标数据。

```
var map = new google.maps.Map(document.getElementById("map_canvas"), options);
var pos;
google.maps.event.addListener(map, 'idle', function () {        
  pos = map.getCenter();
}); 
```

您可以使用`pos.lat()`和`pos.lng()`获取经度的纬度

# android - Android：AsyncTask期间电源按钮锁定屏幕时ListView不显示项目

> ID：15350544
> 
> 赞同：0
> 
> 时间：2013-03-11T23:24:35.433
> 
> 标签：android, sqlite, listview, asynchronous, task

我有一个异步任务，它创建一个 HashMap 来创建一个适配器来填充 ListView。我有一个在 doInBackground 方法期间显示的进度对话框。在 onPostExecute() 方法中，我关闭了进度对话框并调用了一个方法，该方法使用保存在 doInBackground 方法中的项目列表填充我的列表视图。

这工作正常。但我注意到一些奇怪的事情：

我看到的问题是，如果我在进度对话框即将关闭时锁定屏幕（在 onPostExecute 中），即使列表视图中包含非空项目，列表视图也不会显示。我在 logcat 消息和调试时验证了它。

屏幕锁定（我按电源按钮一次）是否有可能阻塞 UI 线程？如何解决问题并确保 ListView 显示其项目？

onResume() 的代码：

```
@Override
protected void onResume(){
    super.onResume();
    if(MyAdapter !=null){
        pull_listView.setAdapter(MyAdapter);//pull_listView is listview
        MyAdapter.notifyDataSetChanged();//MyAdapter is the adapter

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:52:08.123

这种情况说明了使用 AsyncTask 进行后台处理的缺点。在某些情况下，IntentService 可能是更好的选择，尤其是当您认为后台工作需要一些时间时。AsyncTask 将后台工作与当前 Activity 联系起来，而 IntentService 则完全解耦。Android 培训课程[Running in a Background Service](http://developer.android.com/training/run-background-service/index.html)向您展示了如何设置 IntentService、请求工作以及在工作完成时通知您的 Activity。将数据从 IntentService 传递到 Activity 有点复杂，但有一些选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:30:43.057

`onStop()`[将根据Activity Lifecycle](http://developer.android.com/reference/android/app/Activity.html)在屏幕熄灭时调用。您可以`override` `onStart()`或`onResume()`并在那里检查以查看您的数据是否已填充。如果没有，请填充。如果屏幕熄灭，您甚至可能想要覆盖“onStop()”以保存数据。

**编辑**

在这种特殊情况下，我会认为`onResume()`或者`onStart()`会很好，但`onResume()`通常是最安全的，因为它保证`Activity`在我给出的链接中显示为 illustrated 之前被调用。你想使用什么样的支票取决于你，取决于你如何处理一切。但是，如果您`AsyncTask`是您的类的内部类，`Activity`您可以简单地创建一个`boolean member variable`，例如在您的中将其`boolean isDone=false;`更改为 true，`doInBackground()`或者`onPostExecute()`您`onResume()`知道数据已加载。如果它为假，那么您可以尝试再次获取数据。希望这是有道理的，可以帮助

# html - 我的在线商店上的这个 SF Visual Search 是什么？

> ID：15350548
> 
> 赞同：5
> 
> 时间：2013-03-11T23:25:07.060
> 
> 标签：html, css, web

我在我的在线商店中发现了这个看起来像插件的东西，但我不知道如何删除它。它只出现在产品详情页面：[http ://heavenlynature.co.nz/shop/shower/berry-chocolate-dessert-soap](http://heavenlynature.co.nz/shop/shower/berry-chocolate-dessert-soap)

到目前为止，我只发现这个插件出现在 Windows 7、Firefox 19 上。有人能解释一下吗？

截图在这里： http: [//francisthedesigner.com/images/bug.jpg](http://francisthedesigner.com/images/bug.jpg)

这是它生成的代码

```
`<div id="SF_VISUAL_SEARCH" style="display: block; z-index: 1990000; position: fixed; -moz-user-select: none; width: 360px; overflow: visible; top: -3325px; left: 1552px; opacity: 100;">
<div id="SF_ScreenLayout" style="opacity: 0.01; z-index: 1989995; width: 100%; height: 100%; position: fixed; left: 0px; top: 0px; display: none; background-color: white;"></div>
<div id="SF_arrSurface" style="position: absolute; z-index: 1989990; opacity: 0.7; left: 0px; top: 0px; display: block; background-color: transparent;">
<sfmsg id="sfMsgId" data="{"imageCount":0,"ip":"1.1.1.1"}"></sfmsg>
<div id="SF_SA_INFO" style="display:none;z-index:1990000;-moz-user-select: none;-khtml-user-select:none;user-select:none;width:324px;height:394px; background: transparent;">
<div id="SF_IIAD_0" style="height: 81px; position: absolute; width: 1140px; background: none repeat scroll 0% 0% transparent; overflow: visible; z-index: 12010 ! important; left: 381px; top: 646px;">
<div id="IIAD_PRT_INFO" style="cursor:pointer; border: none !important;position:absolute;bottom:0px;left: 2px;height: 10px !important; overflow: hidden; line-height:10px !important;z-index:1;font-family:Arial,Helvetica,Verdana !important;font-size:7pt !important;color:#777777 !important;text-decoration:none !important;" onmouseout="this.style.textDecoration = 'none';" onmouseover="this.style.textDecoration = 'underline';" title="Info">SaveNow</div>
<div class="SF_IIAD_TRANS" style="height: 81px; padding-left: 433px; z-index: -1; background: none repeat scroll 0% 0% rgb(255, 255, 255); overflow: visible; opacity: 0.9;">
<div id="SF_IIAD_ITEM_0_0" class="SF_IIAD_ITEM" style="position:static !important; margin: -1px 0 0 !important; overflow: visible !important; text-align: center !important; width: 66px !important; padding-right: 3px !important; display: block; float: left !important; vertical-align: top !important; font-family: arial,sans-serif !important; font-size: small !important; line-height: 1.2 !important;">
<div id="SF_IIAD_ITEM_0_1" class="SF_IIAD_ITEM" style="position:static !important; margin: -1px 0 0 !important; overflow: visible !important; text-align: center !important; width: 66px !important; padding-right: 3px !important; display: block; float: left !important; vertical-align: top !important; font-family: arial,sans-serif !important; font-size: small !important; line-height: 1.2 !important;">
<div style="height: 13px;width: 66px;position: absolute;top: 40px;left:502px;text-align: left;overflow: hidden;background-color: #ffffff;border-top: solid 1px #b57634;border-right: solid 1px #b57634;border-bottom: solid 1px #b57634;">
<div style="border-color: transparent transparent transparent #ffffff;border-style: solid;border-width: 7px 0 7px 5px;position: absolute;top: 40px;left:502px;font-size: 0;height: 0;line-height: 0;width: 0;"></div>
<div class="SF_IIAD_ITEM_INFO" style="display: none; padding: 3px; position: absolute; top: 70px; left: 429px; width: 324px; margin: 0px 0px 0px 2px; background: none repeat scroll 0% 0% rgb(244, 244, 244); border: 1px solid rgb(172, 174, 176); z-index: 2; text-align: left ! important;">
<a style="display: block; width: 59px; height: 59px; text-align: center; vertical-align: middle; border:none;" target="_blank" href="http://www.superfish.com/ws/offerURL.action?itemId=-519949008&userid=509c342431d8d1352414244&sessionid=509c31232013113847-831-1721&dlsource=saven&merchantName=heavenlynature.co.nz&resType=SDC&price=$17.95&identical=0&position=0.2&br=ff&CD_CTID=p2028&clickSrc=1">
<img class="SF_IIAD_IMG" style="width: 54px; height: 54px; border: medium none; padding: 1px; display: inline; opacity: 1;" sfnoicon="1" sfimgevt="-1" src="http://di34.shopping.com/images/di/71/35/5f/71556b674d586144796166644b367a58363467-100x100-0-0.jpg?p=p3.253679ec7feeb2d276a0&a=1&c=36&l=8070993&t=130311183848&r=3">
<img id="SF_II_LOAD_0_1" style="width: 54px; height: 54px; display: none; border: medium none; padding: 1px;" src="http://www.superfish.com/ws/inimg/img/as.gif">
</a>
<a style="border: none !important; height: 10px !important; display: block; font-family: Helvetica !important; font-size: 9px !important; line-height: 9px !important; overflow: hidden; padding: 0; text-align: center; color: #111111; margin-top: -3px; text-decoration: none;" target="_blank" href="http://www.superfish.com/ws/offerURL.action?itemId=-519949008&userid=509c342431d8d1352414244&sessionid=509c31232013113847-831-1721&dlsource=saven&merchantName=heavenlynature.co.nz&resType=SDC&price=$17.95&identical=0&position=0.2&br=ff&CD_CTID=p2028&clickSrc=4" sfprice="1">$17.95</a>
</div>
<div id="SF_IIAD_ITEM_0_2" class="SF_IIAD_ITEM" style="position:static !important; margin: -1px 0 0 !important; overflow: visible !important; text-align: center !important; width: 66px !important; padding-right: 3px !important; display: block; float: left !important; vertical-align: top !important; font-family: arial,sans-serif !important; font-size: small !important; line-height: 1.2 !important;">
</div>
<div style="position: absolute;padding-top: 22px;height:35px; left:671px; top: 0;" title="More results">
<div style="z-index:1;position:absolute;bottom:0px;right:0;height:10px;width:10px;background: url(http://www.superfish.com/ws/inimg/img/b2new.png) 0px -1px no-repeat;cursor:pointer !important; margin:0 !important; padding:0 !important; font-size: 0 !important;" title=" Close SaveNow SlideUp"></div>` 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-23T10:40:55.260

CULPRIT for me - Chrome 浏览器中的 SmoothGestures。

因此，我删除了所有扩展名，然后将它们一一添加。

不幸的是，SmoothGestures 扩展正在使用 SuperFish 技术安装 SF_VISUAL_SEARCH。

它在许多网页上粘贴了“产品搜索”和“视觉搜索”div。

如果它足够受欢迎，它甚至创建了将鼠标悬停在原始网站按钮上的按钮。恶心的软件。

它无处不在 - 在谷歌搜索的中间，好像它是真正的搜索结果的一部分，在主要的 graysonline.com.au 网站之上，完全破坏了该网站，以及它认为可以诱骗你点击的任何其他地方完全不相关的垃圾广告。

再见 SmoothGestures - 我爱你很多年了。可惜你卖光了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T11:27:28.563

我讨厌他们那样做 ssshhi * ***。

我禁用了颜色选择器扩展，它消失了，但我不排除政府以某种方式参与（笑话）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T14:52:13.810

我得到了与上述相同的东西，但我会在某些网站上注入一些广告，但在其他网站上却没有。看起来它的来源是 Awesome Color Picker（Chrome 扩展），即使该扩展已被禁用。卸载扩展后问题消失了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T03:53:59.860

我认为它是一个浏览器插件，在你身上做一些 xss。这可能是这个问题的重复[为什么 Cloudfront 在我的 Web 应用程序中加载脚本？（我不使用它）](https://stackoverflow.com/questions/9197918/why-is-cloudfront-loading-scripts-in-my-web-app-i-dont-use-it)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-17T19:30:26.760

Chrome 中的扩展“MeasureIt！”（带有感叹号）正在为我添加这些。chrome 商店中有 2 个名称相同的扩展。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-24T05:02:10.403

在 Safari 中安装它的一个插件是 Awesome Screenshot Plus。

在 Safari 的“扩展”对话框中，有一个 **“启用 Superfish 支持的类似产品搜索”**复选框。

取消选中此项以禁用该行为。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-26T13:06:14.623

扩展添加拦截器是一个真正的实时保护程序，附带了这个废话……你可以在其中禁用它。扩展很棒，但具有讽刺意味的是。只需禁用它并继续。

Extensions->adblock->options->EasyList（推荐）解开suck*r

# javascript - 从 JSON 到 Servlet 数据

> ID：15350549
> 
> 赞同：1
> 
> 时间：2013-03-11T23:25:11.587
> 
> 标签：javascript, json, jsp, servlets, extjs4

我开始为我的 ExtJS 驱动的 UI 学习 JSON，但现在我遇到了如何将数据从我的 servlet 传递到 JSP 组合框的问题。

我的 servlet 的输出已经可以了。（我希望如此。:)）这是我的 servlet 代码..

```
JSONArray jsonarray = new JSONArray();
            ResultSetMetaData rsmd = rs.getMetaData();

            int y = 1;
            while(rs.next()){
                int numColumns = rsmd.getColumnCount();
                JSONObject obj = new JSONObject();

            for (int i=1; i<numColumns+1; i++) {
                String column_name = rsmd.getColumnName(1);
                    String column_value = rs.getString(i);
                    obj.put(column_value, y);

                }

                jsonarray.put(obj);

                 y++;
            } 
```

然后我在 ExtJS 中的组合框是；

```
 xtype: 'combo',
    name: 'genre',
    fieldLabel: 'Genre',
    mode: 'local',
    store: genres2,
    width: 120,             
    forceSelection: true,
    typeAhead: true,
    triggerAction: 'all',
    emptyText:'Select materials...',
    selectOnFocus:true,
    displayField: 'column_value' 
```

和

```
var genres2 = new Ext.data.SimpleStore({
    root: 'rows',
    totalProperty: 'totalCount',
    method: 'POST',
    proxy: new Ext.data.HttpProxy({  
        url : '/ExtJS_Sample/ConnectionServlet'
    }), 

    autoLoad: true
});

genres2.load(); 
```

希望我做得对。：） 请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:52:19.697

**Ext.data.SimpleStore**定义应该定义了“ fields **”**属性。

例如。，

```
Ext.data.SimpleStore({
root: 'rows',
fields: [ {name: 'company'},
          {name: 'price', type: 'float'},
          {name: 'change', type: 'float'},
          {name: 'pctChange', type: 'float'}],
totalProperty: 'totalCount',
method: 'POST',
proxy: new Ext.data.HttpProxy({  
          url : '/ExtJS_Sample/ConnectionServlet'
       }), 
autoLoad: true 
}); 
```

# php - jquery php 变量 if 语句

> ID：15350550
> 
> 赞同：0
> 
> 时间：2013-03-11T23:25:20.557
> 
> 标签：php, jquery, variables

在过去的几个小时里，我一直在搞砸这个，有时它似乎有效，有时却没有。我觉得我的语法可能有点偏离，但似乎找不到。任何帮助都会很棒。

```
 <script type="text/javascript">
       $(document).ready(function(e) {
       var pick1 = <?php echo json_encode($variable[1]) ; ?>;
       if( pick1 = 'all'  )
 { 
    $("#west tr:eq(1)").hide();

     }
     else 
     { 
     $("#west tr:eq(1)").show();

     }
     });
      </script> 
```

我的问题是我正在使用 php 变量，并且该变量等于“全部”，但它并没有隐藏我想要隐藏的内容。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:26:15.490

`if( pick1 = 'all' )`将“全部”分配给`pick1`，而不是检查是否相等。在这种情况下，它将被强制类型转换为 true，因为它是一个非空字符串。

要检查值而不是设置它，请使用`==`(type coerced in javascript) 或更好`===`的不强制类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:26:57.630

```
if( pick1 == 'all'  ) 
```

更改 = in == 以读取条件（然后是它的布尔值）

# java - JAVA：如何检查网站文档是否包含单词？

> ID：15350551
> 
> 赞同：0
> 
> 时间：2013-03-11T23:25:24.303
> 
> 标签：java, web

**我目前有以下方法：**

```
try {
           URL url = new URL("http://auth.h.gp/HAKUNA%20MATATA.txt");
           Scanner s = new Scanner(url.openStream());
        }
        catch(IOException ex) {
           BotScript.log("Something went wrong =/ Error code:");
           ex.printStackTrace();
           stop();
        } 
```

但是，如何检查它是否包含单词？我以前从未使用过扫描仪，我在网上找到了这个片段。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:30:55.490

好的，到目前为止看起来不错。

然后，您可以使用 Scanner 的[`next()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#next%28%29)方法来获取每个单词。您还可以查询[`hasNext()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNext%28%29)是否有另一个令牌可用于避免错误。

```
boolean foundPumbaa = false;
while (s.hasNext()) {
    if (s.next().equalsIgnoreCase("pumbaa")) {
        foundPumbaa = true;
        System.out.println("We found Pumbaa"); // do something
        break;
    }
}
if (!foundPumbaa) {
    System.out.println("We didn't find Pumbaa");
} 
```

**编辑**以回应评论：
是的，您可以将文本转换为`String`. 最好的方法可能是使用[`BufferedReader`](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html).

来自[Java 教程，“直接从 URL 读取”](http://docs.oracle.com/javase/tutorial/networking/urls/readingURL.html)：

> 以下小型 Java 程序使用 openStream() 获取 URL [http://www.oracle.com/](http://www.oracle.com/)上的输入流。然后它在输入流上打开一个 BufferedReader 并从 BufferedReader 读取，从而从 URL 读取。读取的所有内容都被复制到标准输出流：
> 
> ```
> import java.net.*;
> import java.io.*;
> 
> public class URLReader {
>     public static void main(String[] args) throws Exception {
> 
>         URL oracle = new URL("http://www.oracle.com/");
>         BufferedReader in = new BufferedReader(
>         new InputStreamReader(oracle.openStream()));
> 
>         String inputLine;
>         while ((inputLine = in.readLine()) != null)
>             System.out.println(inputLine);
>         in.close();
>     }
> } 
> ```

在一个真正的程序中`main throws Exception`，你会在一个`try`-`catch`块中拥有它并捕获一个`IOException`和一些不同的`URLExceptions`. 但这应该让你开始。

# c# - 如何在 Nancy on Mono 中获取真正的错误消息？

> ID：15350552
> 
> 赞同：6
> 
> 时间：2013-03-11T23:25:25.780
> 
> 标签：c#, mono, error-logging, nancy

我不知道如何将实际的 500 错误写入响应正文。我得到的只是带有 JavaScript 按钮的 Nancy 500 错误页面来显示错误。由于这一切都是通过 iOS 应用程序在幕后发生的，因此我无法查看错误，实际上 Nancy 根本不会将错误呈现给`div`。

是否有一些奇怪的自托管配置让运行时堆栈跟踪插入到响应中？（显然就在我们调试的时候）。

在普通的 ASP 中，很容易将调试限制在本地主机上。无论如何，我觉得 Nancy 有点盲目编码，只能用 Visual Studio 进行调试。所有响应都来自标准路由处理程序/控制器模块。

我想避免不得不用try catchs来撒播所有东西，而只是让事情失败并在事情失败时得到真正的错误。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T06:20:35.093

实现您自己的`IStatusCodeHandler`并处理 500 个返回码。如果需要，您还可以覆盖`OnError`管道以访问实际异常（您可以在文档中阅读相关内容）。

在调试模式下构建时，会在错误页面上显示详细信息。由于某种原因，它似乎没有为您显示。您可以做的是通过在代码中设置来强制它始终启用：

`StaticConfiguration.DisableErrorTraces = false`

# javascript - 从列表创建复杂数组

> ID：15350553
> 
> 赞同：0
> 
> 时间：2013-03-11T23:25:28.213
> 
> 标签：javascript, arrays, multidimensional-array

如果我有一个包含许多类似于此的项目的数组：

```
[
    ["Core", "Mathematics", "Mathematics 20-4"],
    ["Core", "Mathematics", "Mathematics 30-1"],
    ["Other", "Fine Arts", "Art", "some art course"],
    ["Other", "Fine Arts", "Music", "some music course"],
    ["Other", "Forensics", "some forensics course"],
    ["French Immersion", "Core", "Mathématiques", "Mathématiques 30-1"]
] 
```

结构本质上是“部门->主题->课程”。

我想动态创建一个类似于以下（或任何最有意义的）的数组（或对象）......

```
{
    subjects: [
        {
            title: "Mathematics", courses: [ "Mathematics 20-4", "Mathematics 30-1" ]
        },
        {
            title: "Mathématiques", lang: "fr", courses: [ "Mathématiques 30-1" ]
        }
    ],
    other: {
        subjects: [
            {
                title: "Forensics", courses: [ "some forensics course" ]
            },
            {
                title: "Fine Arts", subjects: [
                    {
                        title: "Art", courses: [ "some art course" ]
                    },
                    {
                        title: "Music", courses: [ "some music course" ]
                    }
                ]
            }
        ]
    }
} 
```

“其他”部门不一定遵循“主题->课程”，而是可以有“主题->主题->课程”和“主题->课程”。也许添加一个 type="course" 和 type="subject" 可能会有所帮助，但我仍然希望它有一个层次结构。

我一直在思考如何将其动态转换为数组或对象结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:41:56.130

```
var courses = {};
for(var i =0; i<arr.length; i++){
   var department = arr[i][0];
   var subject = arr[i][1];
   var course = arr[i][2];
   courses[department]= courses[department] || {};
   courses[department][subject] =  courses[department][subject] || [];
   courses[department][subject].push(course);
} 
```

这将在表单中生成一个对象

```
courses = {
   core:{
     mathematics:["math1","math2"],
     english: ["english1,"english2"]
   }
  Other:{
    "Fine Arts":[...],
    "Forensics":[...]
  }

} 
```

我认为这是你想要的。

然后，例如，如果您想要针对特定​​主题的一系列课程，您可以使用

```
var courselist = courses[<department>][<subject]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:50:45.557

使用来自@ben336、@user1787152 以及[DevShed 论坛主题](http://forums.devshed.com/showpost.php?p=147400&postcount=2)的灵感，我想出了以下代码：

```
var Department,
    departments = [];

Department = function(title) {
    this.title = title;
    this.subjects = [];
};

function parseTitles( titles )
{
    var i, department, departmentTitle,
        hasDepartment = false;

    departmentTitle = titles.shift();

    for (i=0; i<departments.length; i++) {
        if (departments[i].title === departmentTitle) {
            hasDepartment = true;
            break;
        }
    }

    if (!hasDepartment) {
        department = new Department(departmentTitle);
        departments.push(department);
    }

    departments[i].subjects = titles;
} 
```

这些科目被用作一种导航形式，通过 JSON 查询课程。我将主题保留为一个数组，当单击主题数组中的最后一个孩子时，它将查询 JSON 以获取该主题的课程。

我会看看我是否可以赞扬@ben336，因为他发布了唯一的答案，我想给予一些信任。

# android - 为 Android 模拟器设置 IP 地址

> ID：15350555
> 
> 赞同：2
> 
> 时间：2013-03-11T23:25:46.060
> 
> 标签：android, android-emulator, ip, ip-address, static-ip-address

我有一个需要使用特定 IP 地址启动 Android Emulator 的场景？我可以这样启动模拟器吗？

我不想做 IP 转发或其他事情，因为模拟器中运行着一个 Android 程序，它在启动时会使用启动时存在的 Android 模拟器 IP 地址配置自己。

默认情况下，模拟器的 IP 地址是 10.0.2.15，我需要更改它。此外，此 Ip 设置在 init.goldfish.rc 和 init.goldfish.sh 中。如果我更改它们，android 的 ip 仍然是 10.0.2.15。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:10:41.263

我是这样创作的：

在 Android Emulator 中，如果您执行 ifconfig，那么您将看到网桥、eth0 和 eth1 作为网络设备。桥将 10.0.2.15 作为 ip 并且 eth0 启动但没有任何 ip 并且 eth1 关闭而没有任何 ip。

现在在您的主机上创建一个 TAP 和桥接设备，并将您的 TAP 设备与您主机上的任何工作以太网卡桥接。

可以按照以下步骤创建 TAP 设备 (tap1) 和桥接 (br1) 与 eth0：

```
$sudo ip tuntap add dev tap1 mode tap
$sudo ip link show dev tap1
$sudo brctl addbr br1
$sudo brctl addif br1 tap1
$sudo brctl addif br1 eth0
$sudo ip link set eth0 up
$sudo ip link set br1 up
$sudo brctl show 
```

所以现在一旦你的 TAP 启动并且你的 eth1 连接到任何 dhcp 服务器，启动 dhcp 服务器。启动 dhcp 服务器后，使用以下命令运行模拟器：

```
$sudo ./emulator -avd <avd_name> -qemu -net nic,vlan=1 -net user,vlan=1,hostname=<hostname_you_want> -net nic,vlan=2,macaddr=<mac_id_of_eth1_of_android_emulator> -net tap,ifname=tap1,script=no,vlan=2 
```

在您的 android 模拟器 shell 中运行以下命令：

```
$netcfg 
```

您应该能够看到 ip 0.0.0.0 下的 eth1，现在运行以下命令以启动 eth1：

```
$netcfg eth1 dhcp 
```

瞧！你有 eth1 的 IP 地址是从 dhcp 服务器分配的。

让我知道它是否有效！

现在，如果您在 android 模拟器中有任何程序打开外部服务器 ip 地址上的端口，它将通过主机的 eth0 到外部服务器。

# javascript - 修改指令中的模板（动态添加另一个指令）

> ID：15350560
> 
> 赞同：3
> 
> 时间：2013-03-11T23:26:18.867
> 
> 标签：javascript, angularjs, angularjs-directive

# 问题

通过自定义指令动态添加*ng-bind*属性，以便能够在自定义指令中使用*ng-bind、ng-bind-html*或*ng-bind-html-unsafe* ，而无需在任何地方手动添加到模板定义中。

# 例子

[http://jsfiddle.net/nstuart/hUxp7/2/](http://jsfiddle.net/nstuart/hUxp7/2/)

### 指令失效

```
angular.module('app').directive('bindTest', [
'$compile',
function ($compile) {
    return {
        restrict: 'A',
        scope: true,
        compile: function (tElem, tAttrs) {
            if (!tElem.attr('ng-bind')) {
                tElem.attr('ng-bind', 'content');
                $compile(tElem)
            }
            return function (scope, elem, attrs) {
                console.log('Linking...');
                scope.content = "Content!";
            };
        }
    };
}]); 
```

# 解决方案

不知道。真的我不明白为什么像上面的小提琴这样的东西不起作用。尝试使用和不使用额外的*$compile*。

# 解决方法

我可以解决它可能会在指令中添加一个*模板*值，但这会将内容包装在一个额外的 div 中，如果可能的话，我希望能够做到这一点。（见小提琴）

# 第二种解决方法

请参阅此处的小提琴：http: [//jsfiddle.net/nstuart/hUxp7/4/](http://jsfiddle.net/nstuart/hUxp7/4/)（如下面的 Ikarus 博士建议）。我现在正在考虑这是一种解决方法，因为您仍然觉得您应该能够在使用链接功能之前修改模板并且应该找到/应用更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:43:10.470

您可以在链接函数中执行编译部分，如下所示：

```
angular.module('app').directive('bindTest', ['$compile', function ($compile) {
    return {
        restrict: 'A',
        scope: true,
        link: {
            post: function(scope, element, attrs){
                if (!element.attr('ng-bind')) {
                    element.attr('ng-bind', 'content');
                    var compiledElement = $compile(element)(scope);
                }
                console.log('Linking...');
                scope.content = "Content!";                
            }
        }
    };
}]); 
```

让我知道这对你有多好[http://jsfiddle.net/bPCFj/](http://jsfiddle.net/bPCFj/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-26T23:29:27.330

这种方式似乎更优雅（不依赖于 $compile）并且适合您的情况：

```
angular.module('app').directive('myCustomDirective', function () {
    return {
        restrict: 'A',
        scope: {},
        template: function(tElem, tAttrs) {
            return tAttrs['ng-bind'];
        },
        link: function (scope, elem) {
            scope.content = "Happy!";
        }
    };
}); 
```

jsFiddle：http: [//jsfiddle.net/hUxp7/8/](http://jsfiddle.net/hUxp7/8/)

来自[Angular 指令文档](http://docs.angularjs.org/api/ng.%24compile)： *您可以将模板指定为表示模板的字符串或作为接受两个参数 tElement 和 tAttrs（在下面的编译函数 api 中描述）并返回表示模板的字符串值的函数。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-07T06:13:07.163

源代码说明一切！查看[`compileNodes()`函数及其使用`collectDirectives()`](https://github.com/angular/angular.js/blob/master/src/ng/compile.js#L431).

首先，`collectDirectives`查找单个节点上的所有指令。在我们收集了该节点上的所有指令*之后*，这些指令将应用于该节点。

因此，当指令`compile`上的函数`bindTest`执行时，运行`$compile()`已经超出了收集要编译的指令的时间点。

`$compile`指令中的额外调用`bindTest`将​​不起作用，因为您没有将指令链接到`$scope`. 您无权访问函数`$scope`中的`compile`，但您可以在`link`有权访问`$scope`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-07T00:44:20.120

你们是如此亲密。

```
function MyDirective($compile) {
    function compileMyDirective(tElement) {
        tElement.attr('ng-bind', 'someScopeProp');

        return postLinkMyDirective;
    }

    function postLinkMyDirective(iScope, iElement, iAttrs) {
        if (!('ngBind' in iAttrs)) {
            // Before $compile is run below, `ng-bind` is just a DOM attribute
            // and thus is not in iAttrs yet.
            $compile(iElement)(iScope);
        }
    }

    var defObj = {
        compile: compileMyDirective,
        scope: {
            someScopeProp: '=myDirective'
        }
    };

    return defObj;
} 
```

结果将是：

```
<ANY my-directive="'hello'" ng-bind="someScopeProp">hello</ANY> 
```

# node.js - 在 Jade 和 Node.js 上的变量内传递链接时，前后未定义

> ID：15350562
> 
> 赞同：0
> 
> 时间：2013-03-11T23:26:26.540
> 
> 标签：node.js, express, pug

我正在使用快递和翡翠。当我传递包含链接的变量时，我在 url 的前面和末尾都没有定义。这是什么问题，我该如何解决？

与此处相同的问题： [Express image upload and view in jam](https://stackoverflow.com/questions/12251302/express-image-upload-and-view-in-jade) 但那里没有回答。

玉码：

```
block content
h1= title
p Your photos
#photos
img(src=#{purl})
p #{photo.title} 
```

渲染代码

```
res.render('./user/show', { title: 'photos',photo: photo, purl: purl)}); 
```

purl 是链接的变量，当我控制台日志显示在渲染上方时，它应该出现并且 photo.title 出现得太正常了。

更新

这是一个 JADE 问题，因为 EJS 一切都很好......猜猜一个小问题我将不得不切换......如果有人提出解决方案，不客气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:56:42.740

首先，在`res.render()`添加之前`console.log(purl);`

您想排除变量在到达 Jade 模板之前不是未定义的。

在你的玉中，你的图像 src 不需要`#{}`purl 变量。试试这个：

```
img(src=purl) 
```

仅`#{}`当您在文本字符串中并想要引用 javascript 变量时才需要。

如果你真的想，它可以写成`img(src='#{purl}')`

你的段落也可以写成：

```
p= photo.title 
```

其中`=`意味着以下内容被解释为javascript。不需要`#{}`。

如果您想使用`#{}`魅力之类的作品将文字与照片标题混合在一起。

```
p #{photo.title} lorem ipsum 
```

# c# - 快速会员使用

> ID：15350567
> 
> 赞同：7
> 
> 时间：2013-03-11T23:26:57.360
> 
> 标签：c#, reflection, fastmember

我需要提取所有不可枚举的公共读写属性，除非它们是字符串。目前这是通过 refelction 完成的，并且想知道这是否可以通过[FastMember](https://code.google.com/p/fast-member/)完成。

我尝试了类似下面的代码，但它没有做我想要的。我可以使用当前版本的 FastMember 执行此操作吗？

干杯，
贝里尔

```
protected void LoadCache(IHaveEditableStateProperties originator) {
    var type = originator.GetType();
    _accessor = TypeAccessor.Create(type);

    var members = _accessor.GetMembers();
    _editableState = new Dictionary<string, object>();

        foreach (var member in members) {
            if(member.Type == typeof(PropertyInfo)) {
                _editableState.Add(member.Name, _accessor[originator, member.Name]);
            }
        }
    }
    ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T17:37:32.370

据我了解，`member.Type`从 FastMember 返回的是属性或方法的返回类型。它不应该`PropertyInfo`像您在代码中检查的那样。`_accessor[originator, member.Name]`应该返回属性的当前值。

# java - 将特定数据加载到框架上的 jtable 上

> ID：15350570
> 
> 赞同：0
> 
> 时间：2013-03-11T23:27:27.263
> 
> 标签：java, swing, netbeans, arraylist, jtable

![框架设计截图](../Images/7f547fd396997e49627d008d603f8d98.png)

上面的截图展示了一个框架的当前设计，我仍然很难理解这个概念：向表格添加数据。

我之前搜索过这个主题，但我总是看到代码中包含`Vector`s的使用。但是，我希望不使用**向量**，并且对于此表，希望能够仅插入一组特定的数据。

例如，如果所选活动是***保龄球***

该方法将通过一个名为**students.dat**的文件运行，该文件采用以下格式：

```
StudentName
Grade
Email
ParentName
ParentPhone
ParentEmail
Sunday
SundayActivity
Monday
MondayActivity
Tuesday
TuesdayActivity
Wednesday
WednesdayActivity
Thursday
ThursdayActivity 
```

如屏幕截图所示，该方法将仅将参与保龄球的学生的`StudentNames` `Grades`and `Parent Contact`&返回到. 从项目进入 Arraylist 的那一刻起，我不知道接下来要做什么。`ParentEmail``ArrayList`

-另外，当加载到 ArrayList 时，我打算做这样的事情： `StudentNames`into `NamesList`，`Grades`into`GradeList`等来分隔每个数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T01:24:15.867

If you don't want to use Vectors then you need to create a custom TableModel because the DefaultTableModel was written to support Vectors or 2Dimensional arrays.

One way to do this is to copy the DefaultTableModel and change all the occurrences of Vector to ArrayList.

Or if you want to get fancy then you can use my version of a [List Table Model](http://tips4java.wordpress.com/2008/11/24/list-table-model/).

# wordpress - WordPress add_image_size() 创建未定义的附加图像

> ID：15350572
> 
> 赞同：0
> 
> 时间：2013-03-11T23:27:35.403
> 
> 标签：wordpress, wordpress-theming

在我的 wordpress 主题（FoodRecipes）的 functions.php 文件中，我找到了以下代码。

```
if( function_exists( 'add_theme_support' ) ) {
        set_post_thumbnail_size( 50, 50, true ); // Normal post thumbnails
        add_image_size( 'thumbnail-blog', 575, 262, true); // for blog pages
        add_image_size( 'recipe-listing', 250, 212, true); // For recipe listing page
        add_image_size( 'portfolio-thumb', 220, 140, true); // for the portfolio template
        add_image_size( 'portfolio-main', 940, '', false); // for the single portfolio page
        add_image_size( 'full-size', '', '', false);
        add_image_size( 'sidebar-tabs', 63, 53, true);
        add_image_size( 'recipe-4column-thumb', 222, 144, true);
        add_image_size( 'single-carousel-thumb', 132, 104, true);
        add_image_size( 'li-slider-thumb', 515, 262, true);
        add_image_size( 'bs-slider-thumb', 903, 386, true);
        add_image_size( 'weekly-special-thumb', 122, 132, true);
        add_image_size( 'most-rated-thumb', 63, 53, true);
} 
```

当我上传一张 932x603 的图片并查看创建了哪些尺寸的图片时，我发现这些尺寸中的大多数都是创建的（但不是全部），并且还创建了一些我无法解释的额外尺寸。以下是例外情况...

1) 未创建 940x'' 图像。我猜那是因为原始图像小于 940。对吗？

2) 创建了一个 150x150 的图像。为什么？

3) 创建了一个 300x194 的图像。为什么？

对于创建的额外图像，我无法弄清楚创建这些特定尺寸的方向来自哪里。我应该在哪里寻找？为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T05:48:05.290

查看设置>媒体，您会发现默认定义了三种媒体尺寸：

1.  150x150 裁剪（“缩略图”，也称为“后缩略图”或“缩略图”）
2.  300x300（“中等”）
3.  1024x1024（“大”）

...当然，原始图像也有“完整”。

当您上传图像时，WordPress 将创建该图像的所有定义大小的版本，最大但不大于您上传的图像。

因此，您的 932x603 图像将创建一个 150x150 的缩略图（裁剪为 150x150），以及一个 300x194 的中等图像（比例）。它不会创建 1024x662 或任何其他大于原始图像尺寸的图像 - 这就是为什么也没有创建 940px 宽图像的原因。

# ruby - 在 Sinatra 中缓存到静态图像的重定向

> ID：15350573
> 
> 赞同：3
> 
> 时间：2013-03-11T23:27:37.303
> 
> 标签：ruby, caching, sinatra, cache-control

我有一个用于显示状态图像的 Sinatra 路由。虽然这个简单的解决方案有效，但我遇到了缓存问题：

```
get '/stream/:service/:stream_id.png' do
  # Building image_url omitted

  redirect image_url
end 
```

在这里处理缓存以设置最大 TTL 的正确方法是什么？这些图像将嵌入其他站点，否则我可以直接链接到我重定向到的图像。

问题在于它会生成一个类似的 URL `site.com/image.png`，然后将其重定向到其他地方——但它`site.com/image.png`被浏览器认为是缓存的，因此它不会检查它是否已更新。

我已经对 Cache-Control 标头进行了一些试验，但我还没有找到解决方案。

如果这种方法完全愚蠢，我愿意接受其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:32:11.010

您基于每个路由设置 Cache-Control：

```
get '/stream/:service/:stream_id.png' do
  # Building image_url omitted
  response['Cache-Control'] = "public, max-age=0, must-revalidate"
  redirect image_url
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-09T00:53:33.520

你也可以使用 Sinatra 的`expires`方法：

```
# Set the Expires header and Cache-Control/max-age directive. Amount
# can be an integer number of seconds in the future or a Time object
# indicating when the response should be considered "stale". The remaining
# "values" arguments are passed to the #cache_control helper:
#
#   expires 500, :public, :must_revalidate
#   => Cache-Control: public, must-revalidate, max-age=60
#   => Expires: Mon, 08 Jun 2009 08:50:17 GMT 
```

或者`cache_control`方法：

```
# Specify response freshness policy for HTTP caches (Cache-Control header).
# Any number of non-value directives (:public, :private, :no_cache,
# :no_store, :must_revalidate, :proxy_revalidate) may be passed along with
# a Hash of value directives (:max_age, :min_stale, :s_max_age).
#
#   cache_control :public, :must_revalidate, :max_age => 60
#   => Cache-Control: public, must-revalidate, max-age=60
#
# See RFC 2616 / 14.9 for more on standard cache control directives:
# http://tools.ietf.org/html/rfc2616#section-14.9.1 
```

**Sinatra 文档（截至 1.4.6 版本）**

*   [https://github.com/sinatra/sinatra/blob/v1.4.6/lib/sinatra/base.rb#L440](https://github.com/sinatra/sinatra/blob/v1.4.6/lib/sinatra/base.rb#L440)
*   [https://github.com/sinatra/sinatra/blob/v1.4.6/lib/sinatra/base.rb#L469](https://github.com/sinatra/sinatra/blob/v1.4.6/lib/sinatra/base.rb#L469)

# javascript - JavascriptMVC 和引导程序

> ID：15350575
> 
> 赞同：0
> 
> 时间：2013-03-11T23:27:47.803
> 
> 标签：javascript, twitter-bootstrap, javascriptmvc

我正在尝试设置一个项目以使用 javascriptmvc 和 twitter 引导程序。我使用 javascript mvc 内置的应用生成器来创建文件结构，然后添加了资源目录。

```
-AppRoot
    -documentjs
    -funcunit
    -jquery
    -appname
        -fixtures
        -models
        -resources
            -css
            -js
            -img
      .
      .
      .
     -appname.html
     -appname.js 
```

我已经配置了我的 appname.js，它的内容如下：

```
steal(
    './appname.css',            // application CSS file
    './models/models.js',       // steals all your models
    './fixtures/fixtures.js'    // sets up fixtures for your models
).then(
    './resources/bootstrap/css/bootstrap.min.css',
    './resources/bootstrap/js/bootstrap.min.js',
function () {                   // configure your application

    }
) 
```

似乎没有包含任何引导文件。任何关于正确设置 javascriptmvc 和引导程序的想法/建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T02:46:19.043

在您上面提到的文件结构中，您没有引导文件夹，您在资源的根目录中直接有 css、img 和 js，因此您应该在没有该文件夹的情况下包含文件：

```
steal(
'./appname.css',            // application CSS file
'./models/models.js',       // steals all your models
'./fixtures/fixtures.js'    // sets up fixtures for your models
).then(
    './resources/css/bootstrap.min.css',
    './resources/js/bootstrap.min.js',
function () {                   // configure your application

    }
) 
```

或者将 css、img 和 js 移动到 bootstrap 文件夹中，以便包含工作。

# c# - Mono / MonoDevelop：在运行时获取解决方案版本

> ID：15350577
> 
> 赞同：2
> 
> 时间：2013-03-11T23:27:54.670
> 
> 标签：c#, mono, monodevelop

我希望`<ReleaseVersion>`在运行时检索应用程序版本（本质上是解决方案文件中的属性）。如何通过代码访问它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-05T00:37:18.123

在 .NET（因此可能是 MONO）中设置应用程序版本的标准方法是使用`AssemblyVersion`属性。这通常在 AssemblyInfo.cs 文件中指定，但可以在其他文件中指定，如下所示。

要在运行时获取版本，可以使用[AssemblyName.Version 属性](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyname.version.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)。以下是给定链接中代码的略微修改版本：

```
using System;
using System.Reflection;

[assembly:AssemblyVersion("1.1.0.0")]

class Example
{
    static void Main()
    {
        Console.WriteLine("The version of the currently executing assembly is: {0}",
          Assembly.GetExecutingAssembly().GetName().Version);
    }
} 
```

编译并运行时，它会产生：

> 当前正在执行的程序集的版本是：1.1.0.0

以上内容已在 .NET（Visual Studio 2010）和 Mono 3.0（使用`mcs`命令行编译，而不是 Mono Develop）上进行了测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T14:32:50.470

您是否尝试过使用此论坛中的建议->[获取当前版本](http://forums.xamarin.com/discussion/2278/how-do-you-get-current-version-information-programmatically)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-21T14:01:11.177

这是一个丑陋的 hack，但您可以利用`BeforeBuild`目标将该属性写入文件，然后您可以立即将其作为嵌入式资源包含在内。在您的 *.csproj 文件中：

```
<ItemGroup>
    <EmbeddedResource Include="release-version.txt" />
</ItemGroup>

<!-- .... -->

<Target Name="BeforeBuild">
    <Exec WorkingDirectory="$(ProjectDir)" Command="echo $(ReleaseVersion) &gt;release-version.txt" />
</Target> 
```

....然后在您的 C♯ 代码中，您可以创建如下属性：

```
public static string Version {
    get {
        using (StreamReader resourceReader = new StreamReader(Assembly.GetExecutingAssembly().GetManifestResourceStream("SBRL.GlidingSquirrel.release-version.txt")))
        {
            return resourceReader.ReadToEnd().Trim();
        }
    }
} 
```

这应该适用于所有主要操作系统。不要忘记：

*   `using System.Reflection;`如果您还没有添加到文件顶部
*   将`release-version.txt`文件添加到版本控制的忽略列表（例如`.gitignore`，等）

# java - jHiccup 分析不加起来

> ID：15350585
> 
> 赞同：10
> 
> 时间：2013-03-11T23:28:52.170
> 
> 标签：java, performance, jvm

我有以下 jHiccup 结果。

![j打嗝分析图](../Images/f89a120378474fc63b168924bee70ac3.png)

显然，图中有几秒的巨大峰值。我的应用每 100 毫秒左右输出一次日志。当我阅读我的日志时，我从未见过如此巨大的停顿。我还可以通过 JVM 诊断检查在 GC 中花费的总时间，它显示以下内容：

```
Time: 
2013-03-12 01:09:04
Used: 
 1,465,483 kbytes
Committed: 
 2,080,128 kbytes
Max: 
 2,080,128 kbytes
GC time: 
     2 minutes on ParNew (4,329 collections)

8.212 seconds on ConcurrentMarkSweep (72 collections) 
```

big-GC 的总时间约为 8 秒，分布在 72 个单独的集合中。根据我的 JVM 提示，所有这些都低于 200 毫秒以限制暂停。

另一方面，我在我的独立网络日志（wireshark）中恰好观察到一个网络响应时间为 5 秒的实例。这意味着存在暂停，但它们不是 GC，它们不是阻塞线程或可以在分析器或线程转储中观察到的东西。

我的问题是调试或调整此行为的最佳方法是什么？

此外，我想了解 jHiccup 是如何进行测量的。显然这不是 GC 暂停时间。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-12T03:33:07.233

很高兴看到您正在使用 jHiccup，并且它似乎显示了基于现实的打嗝。

jHiccup 观察到运行在 JVM 上的应用程序线程也会看到的“打嗝”。它没有收集原因 - 只是报告事实。原因可能是任何会导致进程无法运行完全准备好运行的代码的原因：GC 暂停是常见原因，但键盘上的临时 ^Z 或跨虚拟主机的“实时迁移”事件之一将是也观察到了.. 有多种可能的原因，包括操作系统或管理程序级别的调度压力（如果存在）、电源管理的疯狂、交换以及许多其他原因。我已经看到 Linux 文件系统压力和透明大页面“背景”碎片整理也会导致多秒的打嗝......

隔离暂停原因的第一步是使用 jHiccup 中的“-c”选项：它启动一个单独的控制进程（具有其他空闲工作负载）。如果您的应用程序和控制进程都显示大小和时间大致相关的打嗝，您就会知道您正在寻找系统级别（而不是进程本地）的原因。如果它们不相关，你就会怀疑你的 JVM 内部——这很可能表明你的 JVM 暂停了一些大事；GC 或其他东西，如锁去偏或类加载派生去优化，如果由于某种原因到达安全点的时间很长（并且在大多数 JVM，有很多可能的原因导致很长一段时间到达安全点）。

jHiccup 的测量非常简单，很难出错。整个东西不到650行java代码，大家可以自己看逻辑。jHiccup 的 HiccupRecorder 线程反复休眠 1 毫秒，当它醒来时，它会记录任何大于 1 毫秒的时间差（从休眠前开始）作为打嗝。一个简单的假设是，如果一个准备运行的线程（HiccupRecorder）没有运行 5 秒，同一进程中的其他线程也会看到类似大小的打嗝。

正如您在上面提到的，jHiccups 观察结果似乎在您的独立网络日志中得到证实，您在其中看到了 5 秒的响应时间，请注意，网络日志不会观察到所有的打嗝，因为只有在打嗝期间实际发出的请求才会有被网络记录器观察到。相比之下，没有大于 ~1 毫秒的打嗝可以隐藏 jHiccup，因为即使没有其他活动，它也会每秒尝试唤醒 1,000 次。

这*可能*不是 GC，但在您排除 GC 之前，我建议您多查看 GC 日志记录。首先，将暂停时间限制为 200 毫秒的 JVM 提示在所有已知的 JVM 上都是无用的。暂停提示相当于说“请”。此外，不要相信您的 GC 日志，除非您在选项中包含 -XX:+PrintGCApplicationStoppedTime （并且即使在那时也怀疑它们）。除非您包含此标志，否则有些停顿和部分停顿可能会很长并且未报告。例如，我看到偶尔长时间运行的计数循环需要 15 秒才能达到安全点而导致的暂停，其中 GC 仅报告暂停的 0.08 秒部分，它实际上做了一些工作。还有很多暂停的原因不被认为是“GC”的一部分

——吉尔。[jHiccup的作者]

# javascript - 带有 Q 承诺的串行执行

> ID：15350587
> 
> 赞同：6
> 
> 时间：2013-03-11T23:29:02.890
> 
> 标签：javascript, q

我想我误解了[Q](https://github.com/kriskowal/q)承诺的工作方式。我希望我的第一个承诺在下一个承诺开始之前解决，但这并没有发生。这是我的代码：

```
var Q = require('q');

function doWork(taskName) {
  var deferred = Q.defer();
  console.log('starting', taskName);
  setTimeout(function() { 
    console.log('done with', taskName);
    deferred.resolve(); 
  });

  return deferred.promise;
}

doWork('task one')
  .then(doWork('task two'))
  .then(function() { console.log('all done'); }); 
```

此代码产生：

```
$ node test.js 
  starting task one
  starting task two
  done with task one
  done with task two
  all done 
```

我希望它产生：

```
$ node test.js 
  starting task one
  done with task one
  starting task two
  done with task two
  all done 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T23:56:51.700

这有效：

```
doWork('task one')
  .then(function() {
    return doWork('task two')
  })
  .then(function() {
    console.log('all done'); 
  }); 
```

这是有道理的——直接调用`doWork`会`then()`立即触发超时，而不是让 Q 有机会等到`task one`完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-28T16:04:44.800

原因是 doWork 需要作为函数引用。如果你想在 '.then' 中引用一个函数，那么你只需给出函数名，你不传递参数。当解析器看到 .then(doWork('taskTwo')) 时，它将在 .then 被评估之前运行 doWork('taskTwo') 。它试图绑定函数参数。

在这种情况下，如果您在前一个任务的已解决承诺中返回下一个任务的参数，那么解析器将使用正确的参数并以正确的顺序调用 doWork。

```
var Q = require('q');
function doWork(taskNum) {
    var deferred = Q.defer();
    console.log('starting', taskNum);
    setTimeout(function() { 
      console.log('done with task', taskNum);
      deferred.resolve(++taskNum); 
    });

    return deferred.promise;
}

doWork(1)
.then(doWork)
.then(function(lastTaskNum) { console.log('all done'); }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-11T15:22:44.110

**使用q**和**request**的示例代码

 **```
var Q       = require('q'),
    request = require('request'),
    api     = {};

api.post = function (options) {

    var deferred = Q.defer();

    request.post(options, function (error, response, body) {
            error ? deferred.reject(error) : deferred.resolve(body);
    });

    return deferred.promise;
};

api.get = function (options) {
    var deferred = Q.defer();

    request.post(options, function (error, response, body) {
            error ? deferred.reject(error) : deferred.resolve(response);
    });

    return deferred.promise;
}

api
    .post({url: 'https://foo.com'})
    .then(function (body) {
            console.log(body);
            return api.get({url: 'http://myspace.hell'});
    }, function (error) {
            //error handling logic
    })
    .then(function (response) {
            console.log(response);
    }, function (error) {
            //error handling logic
    })
    .done(); //when you are done 
```

在上面的代码中，您可以看到我定义了 2 个 API 方法：**get**和**post**。

我正在使用[请求](https://github.com/request/request)库。

*   我**的 post** api 方法，使用request.post() 返回的响应对象的*主体来解决承诺*
*   我的**get** api 方法，通过 request.get() 调用的*响应*来解决承诺

您可以确切地看到如何使用 Promise 链接这 2 个 api 调用。

在第一个**然后**我返回第二个承诺，以便我可以链接承诺。**

# c++ - 使用参数创建新对象

> ID：15350595
> 
> 赞同：1
> 
> 时间：2013-03-11T23:30:11.193
> 
> 标签：c++, parameter-passing, new-operator

```
void ChangeState(int newState)
{
    nextState = newState;

    //Change the state
    switch( nextState ) ///the change still will have a case for everything
    {
    case STATE_INTRO:
    {
        vec.pop_back();
        state ptr(new CIntroState);
        vec.push_back(ptr);
        break;
    }
    case STATE_MENU:
    {
        vec.pop_back();
        state ptr(new CMainMState);
        vec.push_back(ptr);
        break;
    }
    }
} 
```

我有这个功能可以让我改变我的当前状态；然而，我想了想，当我完成时，这将是一个巨大的 switch 语句。目前，它已经有大约 10 个状态，这只是一些示例代码。我正在尝试做一些不同的事情，但我不知道该怎么做。

```
void ChangeState(something)
{
    vec.pop_back();
    state ptr(new something);
    vec.push_back(ptr)
} 
```

如果我能以这种方式带来它，我可以完全避免使用 switch 语句并获得相同的最终结果。有谁知道该怎么做？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:38:29.837

看起来您需要[模板](http://www.cplusplus.com/doc/tutorial/templates/)和[多态性](http://www.cplusplus.com/doc/tutorial/polymorphism/)的组合。使用模板，您无需枚举可能传递给函数的所有不同类型，因为这将在编译期间为您完成。要将所有这些不同的类型存储在同一个向量中，您需要让它们都成为某个超类型的子类，然后您可以将它们并排存储在超类型的向量中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:56:57.837

正如 ryanbwork 所建议的，您需要链接编译时多态性（即模板）和运行时多态性。这里的挑战是尽量避免将当前形式的重复代码（大`switch`）转换为类似冗长但更具声明性的重复代码形式。

正如[另一个](https://stackoverflow.com/questions/2032881/creating-a-new-object-from-dynamic-type-info)流行的 Stack Overflow 问题所揭示的，克隆方法通常是在运行时创建动态确定类型的新实例的方式。克隆实际上是更一般的工厂模式的一种特殊化，您可以为您的类型创建一组工厂，其定义只会比您当前的枚举更详细一点：

```
template <class T>
class factory {
public:
   T* operator()() {return new T;}
};

factory<CIntroState> IntroState;
factory<CMainState>  MainState;
// etc...

template <class Fac>
void ChangeState(Fac newStateFactory)
{
   vec.pop_back();
   vec.push_back(newStateFactory());
} 
```

# excel - 仅从 1 列在 qtp 中填充 Excel 中的数据

> ID：15350601
> 
> 赞同：0
> 
> 时间：2013-03-11T23:30:37.630
> 
> 标签：excel, qtp

我想从 excel 文件中只捕获 1 列并将所有数据放在一个测试框中，比如

AAAAAA BBBBBB CCCCCC DDDDDD EEEEEE FFFFFF

并单击保存按钮，此数据 AAA、BBB 等位于 excel 工作表列中我想将其导入网页的文本框中并处理此文本，我尝试了 for 循环，但是来自 excel 的数据是在同一行输入并在新数据进入时被删除

以下是我正在尝试编写的代码段，任何帮助表示赞赏：

谢谢

```
Browser("Web Browser").Page("Some Web page").Link("Relavent Link").Click

Datatable.Import "C:\QTP\CLIMS\ABOT\Default.xls"
RowCount = Datatable.GetSheet("Global").GetRowCount
CurrentRow = DataTable.GetSheet("Global").GetCurrentRow

runcontrols()
Function runcontrols ()
For runctrl = 1 To RowCount 
Browser("Web Browser").Page("Some Web page").WebEdit("Running Link").SetDataTable("RunControlsA", dtGlobalSheet)
DataTable.SetNextRow
Next
End Function 
```

我的 excel 文件有 3 列，我正在尝试从一列导入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:26:16.917

```
Set objExcel = CreateObject("Excel.Application")
Set objWorkbook = objExcel.Workbooks.Open("C:\Example.xls")
Set currentWorkSheet = objExcel.ActiveWorkbook.Worksheets(1)
intColCount = 5

For ctr = 1 To intColCount
  temp = temp + " " + currentWorkSheet.Cells(1,ctr).Value
Next 
```

![在此处输入图像描述](../Images/7fb556e88bb70d4e95635464850597ec.png)

如果我正确阅读了您的情况，则您有一个如图所示的电子表格，并且正在尝试读取 A 列的内容。在这种情况下，上面的代码将派上用场。如果您需要任何进一步的帮助，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T09:17:21.950

Excel 处理是 QTP 自动化的重要组成部分，有 4 个步骤来实现它。有关更多说明，请参阅以下帖子。

[http://softwaretestingperfection.blogspot.com/2013/09/excel-handling-in-qtp.html](http://softwaretestingperfection.blogspot.com/2013/09/excel-handling-in-qtp.html)

# jquery - 没有真正鼠标悬停时如何在元素上触发鼠标悬停功能

> ID：15350603
> 
> 赞同：9
> 
> 时间：2013-03-11T23:30:42.020
> 
> 标签：jquery, mouseover

在 jQuery 中，当页面加载时，元素是否可以像鼠标悬停一样自动运行，而实际上它并没有被鼠标悬停？我的意思是，我不会把我的指针放在想要的元素上，让它做我放的东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-11T23:34:50.217

使用[.trigger()](http://api.jquery.com/trigger/)触发事件。

```
$('#foo').trigger('mouseover'); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-11T23:32:01.687

您可以直接调用处理程序

```
$('abc').mouseover(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T23:33:22.633

将所需的操作放在`document.ready`函数中，因为这是您真正想要的操作，而不是没有发生的鼠标悬停。

# sql-server - SQL Server 2008 复制问题

> ID：15350605
> 
> 赞同：0
> 
> 时间：2013-03-11T23:30:43.690
> 
> 标签：sql-server, replication

我们有一个列已添加到主数据库并正在复制到辅助数据库。我们现在收到以下错误：

```
Column names in each table must be unique. Column name 'RI_SystemType' in table 'dbo.R_Information' is specified more than once. (Source: MSSQLServer, Error number: 2705)
Get help: http://help/2705 
```

复制当前跨数据库失败，我们认为这是原因。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:54:17.933

好吧，菜鸟的错误。部署脚本还在订阅者中创建了新列。当然，这就是复制的全部意义，所以一旦我们从订阅者那里删除了列，复制就会自己创建它，一切都很好。

# c# - 获取 Facebook 的应用程序访问令牌

> ID：15350612
> 
> 赞同：1
> 
> 时间：2013-03-11T23:31:38.067
> 
> 标签：c#, facebook, facebook-graph-api, facebook-c#-sdk

我必须为我的网络应用程序使用 Facebook 的通知。Facebook Graph API 需要应用程序访问令牌才能执行此操作。

有没有办法通过代码（C# SDK）获取这个令牌，还是由 Facebook 一次性生成？这个令牌是静态的（和秘密的）还是具有过期日期时间？

有关信息：[https](https://developers.facebook.com/tools/access_token/) ://developers.facebook.com/tools/access_token/ - 应用令牌，而不是用户令牌！

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T23:55:47.880

答案是代码的动态方式：

```
var fb = new FacebookClient();
dynamic result = fb.Get( "oauth/access_token", new
{
  client_id = <myAppID>,
  client_secret = <mySecretID>,
  grant_type = "client_credentials"
} );

var apptoken = result.access_token; 
```

或通过组合或 appid|secretid

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T23:37:56.940

您可以将 id 和 secret 与中间的管道符号连接起来：

```
app_id|app_secret 
```

这实际上是 PHP SDK 在内部创建应用访问令牌的方式，因此该方法的可靠性应该没有问题。（从您主动查询应用程序访问令牌的其他端点，您可能会得到另一个与此方案不匹配的令牌。）

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-12T14:22:15.167

您可以像在 github 的另一个 c# sdk 项目中一样调查 getApplicationAccessToken 方法

[https://github.com/barans/FacebookCsharpSdk/blob/master/FacebookCSharpSDK/FacebookClient/FacebookClient.cs](https://github.com/barans/FacebookCsharpSdk/blob/master/FacebookCSharpSDK/FacebookClient/FacebookClient.cs)

# lua - 试图比较 Lua 中一张表的所有条目

> ID：15350620
> 
> 赞同：1
> 
> 时间：2013-03-11T23:32:47.300
> 
> 标签：lua

基本上我有一个对象表，这些对象中的每一个都有一个特定的数字字段。我正在尝试查看这些数字条目是否匹配，但我想不出办法。我认为可能是一个双循环，一个循环遍历表，另一个递减，但这不会在某些时候导致两个值被比较两次吗？我担心它可能看起来在表面上有效，但实际上有细微的错误。这就是我描绘代码的方式：

```
for i = #table, 1, -1 do
    for j = 1, #table do
        if( table[i].n == table[j].n ) then
            table.insert(table2, table[i])
            table.insert(table2, table[j])
        end
    end
end 
```

我想将选定的对象（作为表格）插入到另一个预制的没有任何重复的对象中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:43:55.470

让外部循环遍历表格，让内部循环始终在外部元素之前开始一个元素 - 这样可以避免重复计算和将对象与自身进行比较。此外，如果您调用要检查的表`table`，则可能会隐藏`table`您要访问的库`insert`。因此，假设您调用输入表`t`：

```
for i = 1, #t do
    for j = i+1, #t do
        if( t[i].n == t[j].n ) then
            table.insert(table2, t[i])
            table.insert(table2, t[j])
        end
    end
end 
```

尽管如此，如果三个或更多元素具有相同的值`n`，您将多次添加其中的一些。您可以使用另一个表来记住您已经插入了哪些元素：

```
local done = {}
for i = 1, #t do
    for j = i+1, #t do
        if( t[i].n == t[j].n ) then
            if not done[i] then
                table.insert(table2, t[i])
                done[i] = true
            end
            if not done[j] then
                table.insert(table2, t[j])
                done[j] = true
            end
        end
    end
end 
```

我承认这不是很优雅，但是这里已经很晚了，我的大脑拒绝想一个更整洁的方法。

**编辑：**事实上......使用另一个表，您可以将其减少为一个循环。当您遇到一个新`n`的值时，您将一个新值`n`作为键添加到您的助手表中 - 该值将是`t[i]`您刚刚分析的值。如果遇到`n`表中已经存在的元素，则将保存的元素和当前元素都添加到目标列表中 - 您还可以将辅助表中的元素替换为`true`或不是表的元素：

```
local temp = {}
for i = 1, #t do
    local n = t[i].n
    if not temp[n] then
        temp[n] = t[i]
    else
        if type(temp[n]) == "table" then
            table.insert(table2, temp[n])
            temp[n] = true
        end
        table.insert(table2, t[i])
    end        
end 
```

# php - 如何将内容 HTTP_HOST 变量添加到查询字符串

> ID：15350621
> 
> 赞同：0
> 
> 时间：2013-03-11T23:32:54.227
> 
> 标签：php, apache, .htaccess, mod-rewrite, webserver

我需要创建一个始终将 http_host 重写为查询字符串的重写规则/条件。

我有多个域，它们都指向同一个 DocumentRoot。我现在要做的是，将调用的域名（例如）example1.org 添加到查询字符串以供应用程序内部使用。假设应用程序位于 baseapplication.org

开幕

```
example.org 
```

在我的浏览器中运行到文档根目录，htaccess 应该在内部将其重写为：

```
baseapplication.org?requested_domain=example1.org 
```

我找不到重写规则或条件的组合来运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:43:44.650

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:58:10.937

从 Apache 文档：

### 描述：

假设您想通过仅 DNS A 记录向同一台机器提供用户名主页 www.username.host.domain.com，并且该机器上没有任何虚拟主机。

### 解决方案：

对于 HTTP/1.0 请求没有解决方案，但是对于包含 Host: HTTP 标头的 HTTP/1.1 请求，我们可以使用以下规则集将[http://www.username.host.com/anypath](http://www.username.host.com/anypath)内部重写为 /home/username /任何路径：

```
RewriteEngine on
RewriteCond   %{HTTP_HOST}                 ^www\.[^.]+\.host\.com$
RewriteRule   ^(.+)                        %{HTTP_HOST}$1          [C]
RewriteRule   ^www\.([^.]+)\.host\.com(.*) /home/$1$2 
```

[在Apache Rewrite Guide](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)中还有一些其他的 HTTP 重写。

# java - Spring配置文件是否支持按jdk版本，操作系统自动应用/自动激活，如maven配置文件？或者如何轻松地进行部署切换？

> ID：15350624
> 
> 赞同：1
> 
> 时间：2013-03-11T23:33:39.043
> 
> 标签：java, spring, maven

众所周知，spring 从 3.1 开始就可以支持 profile，它将帮助我们在不同的 env 中切换不同的 bean，例如 datasource、proxy 等。据我所知，配置文件需要在 web.xml 或 JRE 系统属性（-D ....）中指定，但 Maven 配置文件可以通过检测操作系统或 JRE 版本来支持自动应用配置文件。我们可以在春季做与 maven 支持相同的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:29:49.303

目前，此类功能计划用于`4.0 Backlog`) [-SPR-10338](https://jira.springsource.org/browse/SPR-10338)。

（将`ActiveProfilesResolver`接口和`resolver`属性添加到活动配置文件）。

您可以尝试对 jira 问题进行投票，以使其更快地合并。

目前，您可能会尝试根据构造函数中的某些原因为测试和设置系统属性（激活配置文件）实现自定义基类。但是您需要进行`@DirtiesContext`测试以不破坏 spring-test 中的上下文缓存。

# vb.net - 在多行文本框中查找光标所在的行

> ID：15350626
> 
> 赞同：1
> 
> 时间：2013-03-11T23:34:00.517
> 
> 标签：vb.net

我必须找到光标是在多行文本框中的第一行还是最后一行，因为将焦点（导航）转移到 GUI 中的其他控件并且不知道如何获得它。

我可以遍历文本框，获取 selectionstart 属性，计算行数，但我必须知道我是在光标的第一行还是最后一行。

有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:48:54.940

您可以使用[TextBoxBase.GetLineFromCharIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.getlinefromcharindex.aspx)。

```
Dim line as Integer = textBox1.GetLineFromCharIndex(textBox1.SelectionStart) 
```

请记住，这是一个从零开始的行号。所以第 0 行是第一行。

# lync - lyncClient.GetClient() 将 UISuppressionMode 设置为 1 时抛出异常

> ID：15350630
> 
> 赞同：1
> 
> 时间：2013-03-11T23:34:21.790
> 
> 标签：lync, lync-2010

我是 Lync 客户端 2010 SDK 集成的新手。由于我不想显示 Lync UI（我们将开发自己的 UI），我将注册表设置为 UISuppressionMode = 1(DWORD)。但是 lyncClient.GetClient() 会抛出 ClientNotFoundException 异常。谁能告诉我这有什么问题？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:32:15.117

问题很可能是客户端实际上并未运行，这就是找不到它的原因。

当您在 UISuppression 模式下运行时，您需要负责客户端正常执行的所有操作，例如启动、关闭和登录。

您必须使用启动 Lync 客户端`LyncClient.BeginInitialize`- 您不能只从开始菜单启动它。`LyncClient.BeginShutdown`你也应该在完成后打电话。（参考：[MSDN](http://msdn.microsoft.com/en-us/library/lync/hh345230%28v=office.14%29.aspx)）

这里有一篇关于 Lync SDK 中的 UI Suppression 的优秀[MSDN 文章](http://msdn.microsoft.com/en-us/library/jj933224.aspx)，还有一个[关于在 UISuppresion 模式打开时登录 Lync 的 channel9 视频](http://channel9.msdn.com/posts/Sign-In-to-Lync-with-UI-Suppressed)。

# python - 基本 Python 编码

> ID：15350635
> 
> 赞同：0
> 
> 时间：2013-03-11T23:34:47.203
> 
> 标签：python, encoding

我有一个简单的文件：

```
# -*- coding: utf-8 -*-

a = u'Alegría'
print a
print {'a': a} 
```

输出是：

```
Alegría
{'a': u'Alegr\xeda'} 
```

为什么我得到它而不是：

```
Alegría
{'a': u'Alegría'} 
```

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T23:37:09.823

`dict`的字符串表示调用`repr`键和值，并`repr`尽力制作一个字符串表示，您可以将其粘贴到任何文件或解释器中，使用或使用声明的编码，然后取回对象。

你的字符串很好，它只是一个安全的表示。

# c# - ServiceStack CredentialsAuthProvider - appSettings authRealm oAuthProvider

> ID：15350638
> 
> 赞同：1
> 
> 时间：2013-03-11T23:35:01.170
> 
> 标签：c#, servicestack

我正在玩 Auth Plugin `CredentialsAuthProvider`。它在创建时要求 3 个参数`appSettings`，`authRealm`， 和`oAuthProvider`。[我在 wiki 页面https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)上找不到这个 API 的解释

你能解释一下每个参数的作用吗？它们如何影响`CredentialsAuthProvider`我正在创造的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:52:54.640

首先，您不需要提供这些。有一个空的 CredentialsAuthProvider 构造函数可用于基本身份验证。

**authRealm**是用于 HTTP 基本身份验证中的 WWW-Authenticate 标头的领域名称。通常是您的服务器的名称。客户端可以使用它来帮助管理密码。它最终看起来像这样：

```
WWW-Authenticate: Basic realm="My Server" 
```

**OAuth 设置**

**appSettings**只是一种通常在 web.config 中访问设置的方法，主要用于 OAuth。例如，这里是从 SocialBootstrapApi 项目中提取的 facebook OAuth 的设置。

*   oauth.facebook.AppId
*   oauth.facebook.AppSecret
*   oauth.facebook.RedirectUrl
*   oauth.facebook.CallbackUrl

在此示例中， **oAuthProvider**是字符串“facebook”，它只是在您的设置中允许多个 OAuth 提供程序的关键。

有关大量应用设置示例和不同的 OAuth 提供程序，请参阅[https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Web.config#L24](https://github.com/ServiceStack/SocialBootstrapApi/blob/master/src/SocialBootstrapApi/Web.config#L24)。

# c# - 如何启动具有不同文化的新非托管流程？

> ID：15350640
> 
> 赞同：4
> 
> 时间：2013-03-11T23:35:08.183
> 
> 标签：c#, process, globalization, cultureinfo

我需要使用我选择的文化从 .NET 应用程序运行一个新进程。此过程将运行外部非托管第 3 方 exe。我怎样才能让它与特定的文化一起运行？

请注意，我不想改变线程的文化，可以这样做：

```
System.Treading.Thread.CurrentThread.CurrentCulture = new CultureInfo("fr-FR") 
```

我不想为新线程设置默认区域性，这可以通过反射来完成，或者：

```
CultureInfo.DefaultThreadCurrentUICulture = new CultureInfo("fr-FR") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:54:47.827

如果可执行文件是 .Net 应用程序，您可以创建自己的代理可执行文件，按照您想要的方式设置文化，并通过反射加载其可执行文件并启动相应的 Main 方法来“启动”其他应用程序。如果在第一次尝试时没有神奇地启动，您可能需要了解配置和程序集加载 API 才能使所有工作正常。

对于本机应用程序，恐怕您需要更改区域设置或某些应用程序自己的配置。

# c++ - 列出所有物理驱动器 (Windows)

> ID：15350641
> 
> 赞同：6
> 
> 时间：2013-03-11T23:35:08.340
> 
> 标签：c++, c, drives

如何使用 C/C++ 在 Windows 计算机上获取所有物理驱动器路径 (\\.\PhysicalDriveX)？

[这个](https://stackoverflow.com/questions/327718/how-to-list-physical-disks)问题的答案建议获取逻辑驱动器号，然后获取与该已安装驱动器相对应的物理驱动器。问题是，我想让*所有* 物理驱动器连接到计算机，包括未安装的驱动器。

其他答案建议从 0-15 增加一个值并检查是否存在驱动器（\\.\PhysicalDrive0，\\.\PhysicalDrive1，...）或调用 WMIC 列出所有驱动器。 [

由于这些似乎它们会起作用，它们似乎不是最好的方法。有没有一个简单的函数，比如简单地返回一个包含所有物理驱动器路径的 '`GetPhysicalDrives`向量？`std::string`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T00:03:51.430

您可以使用`QueryDosDevice`. 根据描述，您希望这会列出诸如`C:`和之类的东西`D:`，但它也会列出诸如之类的东西`PhysicalDrive0`，`PhysicalDrive1`等等。

主要缺点是它还会列出很多你可能不关心的其他设备名称，所以（例如）在我的机器上，我得到了一个包含近 600 个设备名称的列表，其中只有很小的百分比是与你关心的事情有关。

以防万一，一些（旧）示例代码：

```
#define WIN32_LEAN_AND_MEAN
#include <windows.h>

#include <iostream>

int main(int argc, char **argv) {

    char physical[65536];
    char logical[65536];

    if ( argc > 1) {
        for (int i=1; i<argc; i++) {
            QueryDosDevice(argv[i],logical, sizeof(logical));
            std::cout << argv[i] << " : \t" << logical << std::endl << std::endl;
        }
        return 0;
    }

    QueryDosDevice(NULL, physical, sizeof(physical));

    std::cout << "devices: " << std::endl;

    for (char *pos = physical; *pos; pos+=strlen(pos)+1) {
        QueryDosDevice(pos, logical, sizeof(logical));
        std::cout << pos << " : \t" << logical << std::endl << std::endl;
    }    

    return 0;
} 
```

但是，如果我像 `devlist | grep "^Physical"，它列出了物理驱动器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-07-02T07:48:51.893

是的，您只需键入`NET USE`. 这是一个示例输出...

```
NET USE
New connections will be remembered.

Status       Local     Remote                    Network

-------------------------------------------------------------------------------
             H:        \\romaxtechnology.com\HomeDrive\Users\Henry.Tanner
                                                Microsoft Windows Network
OK           N:        \\ukfs01.romaxtechnology.com\romaxfs
                                                Microsoft Windows Network
OK           X:        \\ukfs03.romaxtechnology.com\exchange
                                                Microsoft Windows Network
OK           Z:        \\ukfs07\Engineering      Microsoft Windows Network
                       \\romaxtechnology.com\HomeDrive
                                                Microsoft Windows Network
OK                     \\ukfs07\IPC$             Microsoft Windows Network
The command completed successfully. 
```

# javascript - 基于媒体查询有条件地显示内容

> ID：15350648
> 
> 赞同：5
> 
> 时间：2013-03-11T23:36:11.403
> 
> 标签：javascript, html, responsive-design

我有一个网站，其中在桌面版本中显示一个侧边栏，其中包含 10 到 20 个小图像。到目前为止，在移动设备上，这个侧边栏只是简单地用 隐藏`display: none`，这是性能最低的解决方案，因为无论如何都会加载所有图像。

我现在想知道最好的方法是在移动设备上完全禁用侧边栏（不使用单独的 AJAX 请求）。

我能想到的最佳解决方案如下：

*   将侧边栏的 HTML 代码写入 JavaScript 变量
*   通过使用 JavaScript 检查媒体查询来测试设备宽度（例如使用`Modernizr.mq`orso）
*   如果此测试产生非移动设备，则将变量的内容写入 DOM，例如使用,`innerHTML`或类似方法`jQuery.append``jQuery.prepend`

我知道 RWD 性能有时可能是一个非常复杂的话题，而且性能最高的解决方案通常并不明显。那么谁能想到比上面提出的更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T23:08:36.903

如果您不希望图像在移动设备上加载，而不是将图像作为`<img>`标签放置，您可以将 div 设置为所需的宽度和高度，并将图像作为背景图像引入。在你的 CSS 中，默认隐藏侧边栏。然后，在您认为超出移动范围的任何宽度上，使用媒体查询来显示侧边栏并在 div 中加载背景图像。

```
#sidebar {
    display: none;
}
#sidebar div#sidebar-img-1 {
    width: 100px;
    height: 100px;
}
/* ... */

@media only screen and (min-width: 480px) {
    /* display sidebar */
    #sidebar {
        display: block;
    }
    /* set background image for sidebar items */
    #sidebar div#sidebar-img-1 {
        background-image: url("sidebar1.jpg");
    }
    /* ... */
} 
```

缺点是通过在样式表中放置内容，您是在用性能换取语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-04T12:48:43.777

我只是在做一些关于如何做到这一点的研究，并被灯丝组遇到了这个问题： [https ://github.com/filamentgroup/Ajax-Include-Pattern/](https://github.com/filamentgroup/Ajax-Include-Pattern/)

似乎很容易设置。它的工作原理看起来像是在数据属性中设置的媒体查询。

因此，您不想出现在移动设备上的侧边栏看起来像这样：

```
<aside href="..." data-append="articles/latest/fragment" data-media="(min-width: 40em)">Possible Mobile Content</aside> 
```

所以你的侧边栏只会出现在至少 40ems (~640px) 宽的屏幕上。当然，您还需要 javascript 文件并启动它，但这些看起来也相当简单。

# x86 - MASM 中的 if-else 宏

> ID：15350651
> 
> 赞同：1
> 
> 时间：2013-03-11T23:36:19.433
> 
> 标签：x86, masm

在 MASM 中，是否可以创建 if...ekse 宏（类似于高级编程语言中的宏）？我还没有为 MASM 找到任何类型的 if-else 语句宏，但我认为用于此目的的宏会非常有用。

如果我能找到一个宏来使在 masm 中编写一系列复杂的 if 语句变得更加容易，那将很有用，如下所示：

```
;jump to each case here
    checkCase1:
    cmp theVariable, 5;
    jne case1; 

    checkCase2:
    cmp theVariable, var2;
    jne case2;

    jmp defaultCase; do this if no other statement is true
;each of the cases are handled here

    case1:
    ;handle case 1
    jmp checkCase2; //check whether case 2 is true

    case2:
    handle case 2
    jmp endOfStatement;
    defaultCase:
        ;this is the default case
endOfStatement:
;this is the end of the statement 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T00:40:38.783

没人看说明书？？？组装已经存在很多年了，MASM 已经存在很多年了！！！大量的样本和文档！！！

例如：

```
.if eax == 1

.elseif eax !=10

.elseif eax >= 11

.else

.endif 
```

MASM32 包含一个 case 宏...

# asp.net - 从 IIS 中托管的 ASP.NET Web 应用接收 WCF 回调服务

> ID：15350652
> 
> 赞同：1
> 
> 时间：2013-03-11T23:36:25.437
> 
> 标签：asp.net, wcf, iis-6, xbap, wcf-callbacks

我已经在这个问题上工作了几天了。

问题有 3 个工作部分。我有一个 ASP.NET 站点、WCF IIS 托管服务和 WPF xbap 应用程序。

我想要做的是将变量从 ASP.NET 站点传递到 WPF xbap 应用程序。所以我设置了一个带有 wsDualHttpBinding 的 WCF 服务，并使用回调来通知 ASP.NET 和 xbap。

现在，当我在我们的服务器上的 IIS 6 中托管 WCF 服务并在本地运行 VS2012 iisexpress 和本地 xbap 中的 ASP.NET 托管时。它工作正常。但是，一旦我将 ASP.NET 站点发布到我们服务器上的 IIS 6，ASP.NET 应用程序就永远不会收到回调。两者都在应用程序池中。

是否有设置，或者我需要寻找什么让 ASP.NET 保持打开回调的侦听端口？XBAP 仍在接收回调，没问题。

服务配置如下：（请注意，由于目前的简单性，我已将缓冲区最大化以排除这种情况）

```
<configuration>
  <system.diagnostics>
    <sources>
      <source propagateActivity="true" name="System.ServiceModel" switchValue="Warning,ActivityTracing">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="ServiceModelTraceListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
       <add initializeData="web_tracelog.svclog" type="System.Diagnostics.XmlWriterTraceListener, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"
    name="ServiceModelTraceListener" traceOutputOptions="Timestamp">
        <filter type="" />
      </add>
    </sharedListeners>
  </system.diagnostics>
  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <bindings>
     <wsDualHttpBinding>
        <binding receiveTimeout="00:01:00" sendTimeout="00:00:05" maxReceivedMessageSize="2147483647"
      messageEncoding="Text" textEncoding="utf-8">
          <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
        maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None" />
        </binding>
      </wsDualHttpBinding>
    </bindings>
    <behaviors>      
      <serviceBehaviors>
        <behavior>
         <serviceMetadata httpGetEnabled="true"/>
         <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="false"
  multipleSiteBindingsEnabled="false" />
    <protocolMapping>
      <add scheme="http" binding="wsDualHttpBinding" />
    </protocolMapping>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <directoryBrowse enabled="true"/>
   </system.webServer>
</configuration> 
```

该服务具有客户端将订阅回调列表的方法。然后方法将通过列表递增以发送调用回调。

```
[ServiceContract(CallbackContract = typeof(IClientCallback))]
public interface IVisualisationService
{
    [OperationContract(IsOneWay = true)]
    void SubscribeToRedenderHoles(string address);

    [OperationContract(IsOneWay = true)]
    void SubscribeToEditSelectedHoles(string address);

    [OperationContract(IsOneWay = true)]
    void SubscribeToShowHoles(string address);

    [OperationContract(IsOneWay = true)]
    void RedenderHoles(Hole3D[] holes, string address, int channelhashcode);

    [OperationContract(IsOneWay = true)]
    void EditSelectedHoles(Guid[] holesIds, string address);

    [OperationContract(IsOneWay = true)]
    void ShowHoles(string address);

}

public interface IClientCallback
{
    [OperationContract(IsOneWay = true)]
    void OnRenderHoles(Hole3D[] holes);

    [OperationContract(IsOneWay = true)]
    void OnEditSelectedHoles(Guid[] holesIds);

    [OperationContract(IsOneWay = true)]
    void OnShowHoles(int channelhashcode);
} 
```

下面是 WCF 服务标头，我跳过了方法。

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)]
public class VisualisationService : IVisualisationService
{ 
```

现在为 ASP.NET 客户端 web.config

```
<system.serviceModel>
    <bindings>
        <wsDualHttpBinding>
            <binding name="WSDualHttpBinding_IVisualisationService" maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" >
              <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>
              <security mode="None" />
            </binding>
        </wsDualHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://hims.mecha.com/VisualisationWcfService/VisualisationService.svc"
            binding="wsDualHttpBinding" bindingConfiguration="WSDualHttpBinding_IVisualisationService"
            contract="VisualisationServiceReference.IVisualisationService"
            name="WSDualHttpBinding_IVisualisationService" />
    </client>
</system.serviceModel> 
```

然后是 XBAP 应用客户端 app.config

```
<configuration>
    <system.serviceModel>
        <bindings>
            <wsDualHttpBinding>
                <binding name="WSDualHttpBinding_IVisualisationService"     maxReceivedMessageSize="2147483647" messageEncoding="Text" textEncoding="utf-8" >
              <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647"/>

                    <security mode="None" />
                </binding>
            </wsDualHttpBinding>
        </bindings>
        <client>
          <endpoint address="http://hims.mecha.com/VisualisationWcfService/VisualisationService.svc"        
            binding="wsDualHttpBinding" bindingConfiguration="WSDualHttpBinding_IVisualisationService"
            contract="VisualisationService.IVisualisationService" name="WSDualHttpBinding_IVisualisationService" />
        </client>
    </system.serviceModel>
</configuration> 
```

在这两个客户端中，我都使用了添加服务引用方法，将 WCF 添加到 ASP.NET 和 XBAP 项目中。我已经将两个客户端都设置为拥有代码，当然还可以处理每个回调的方法。

```
sealed class VisualisationManager : VisualisationService.IVisualisationServiceCallback 
```

我知道它看起来有点啰嗦，但我想尽可能多地展示这个问题。我完全迷失了，为什么它在本地可以正常工作，但在 IIS 6 中托管时却不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T09:17:06.573

迟到的答案，但万一像我这样的人通过大 G 得到这个问题。

我有类似的问题，我的解决方案是向实现回调接口的类添加一个 CallbackBehavior（在你的情况下；IClientCallback）。像这样：

```
[CallbackBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, UseSynchronizationContext = false)]
public class ClientCallback : IClientCallback
... 
```

希望这有帮助。

# css - 我想为移动浏览器覆盖一些我的 CSS

> ID：15350653
> 
> 赞同：0
> 
> 时间：2013-03-11T23:36:34.190
> 
> 标签：css, mobile, overriding

我有一个网站，大部分情况下可以为移动浏览器正确调整大小。但是，我想在移动浏览器中以块格式显示一些项目。有没有办法通过移动浏览器破解来覆盖这些区域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:08:15.843

我认为您的问题不是移动 Safari，而是您对响应式设计的实施。在我的桌面上调整 chrome 窗口的宽度也会导致列重叠。我建议为您的列添加一个显式的最小宽度并将它们全部向左浮动，而不是让最后一个浮动向右。

# css - svg 到 woff 字体

> ID：15350654
> 
> 赞同：1
> 
> 时间：2013-03-11T23:36:34.647
> 
> 标签：css, internet-explorer, fonts, svg, woff

我有一个 SVG 字体文件，这正是我想要的。当我通过转换器运行它时（[http://onlinefontconverter.com/](http://onlinefontconverter.com/)），输出 WOFF 文件在 Chome 和 IE9 中显示不同。在 IE9 中，字体的垂直对齐是关闭的（如果我设置`font-size:100px;line-height:100px;`它在 Chrome 中看起来很好，但在 IE9 中，字形的顶部被切掉了）。

这是 IE9 错误显示 WOFF 文件的问题，还是有更多问题？

我做了一个测试，将我的 Courier New TTF 文件转换为 WOFF，它在两个浏览器中都显示良好。但是，当我使用 Courier New SVG 并将其转换为 WOFF 时，会出现同样的显示问题。

谢谢！

编辑：EOT 文件和 IE10 中也会出现显示问题。在我看来，转换 SVG -> WOFF 时存在一些问题，但我对该主题知之甚少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:45:09.170

对于 IE < 9，您应该使用 EOT 文件。WOFF 适用于现代浏览器。FontSquirrel[网络字体生成器](http://www.fontsquirrel.com/tools/webfont-generator)对此非常有帮助，并且还会为您提供@font-face 工具包。

# iphone - UIButton CGPoint

> ID：15350656
> 
> 赞同：0
> 
> 时间：2013-03-11T23:36:58.867
> 
> 标签：iphone, ios, objective-c, xcode

我有 10 个 UIButtons (l1,l2,l3...l10) 还有 BOOL c1, c2, c3,...c10。

```
- (void) viewDidLoad
{
    c1 = true;
    ////c2,3,..c10 = false

} 
```

现在，如果我按下一个按钮，我有这个代码：

```
- (IBAction)tapButton:(id)sender {

    ///// if user press first Button
    if([sender tag] == 1)
    {

        if(c1 = true){
        /// move l1 button to a1 position & set c1 false and open c2.
        l1.center = a1.center
        c1 = false;
        c2 = true;
    }

    else if (c1 = false)
    {

        /// return l1 button to "o" position (original position)
        l1.center = o1.center;
    }

} 
```

此代码适用于此按钮，如果我尝试重复“SENDER TAG 2, 3... 10”效果不佳。我只是尝试使用与文字游戏完全相同的技巧。

如果你按一个字母，它应该去第一个框/位置，如果你按另一个，它应该去第二个框/位置，如果你从一个框/位置按一个字母，它应该回到原来的位置。

请帮助我，如何使它工作。也许使用开关，或类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:58:47.027

我注意到的第一件事，除了约定我们使用 YES 而不是 true 的事实之外，您没有评估 c1 的值，而是分配它（比较结果总是 true）。正确的代码是：

```
if(c1 == YES) {...} 
```

要不就：

```
if(c1) {...} 
```

让我知道它是否有效，可能还有其他问题。

# .net - Matlab 访问多个 .NET 程序集

> ID：15350657
> 
> 赞同：0
> 
> 时间：2013-03-11T23:37:08.607
> 
> 标签：.net, matlab

我有一个带有类“MyClass”的程序集“A”，它使用来自另一个程序集“B”的类。在我的 C# 解决方案中，我已经在 VS2010 中完成了对 B 的引用，这似乎给了我在 Matlab 中的问题，因为我收到了以下消息。

消息：无法加载文件或程序集“A.MyClass，Version=2.1.1.0，Culture=neutral，PublicKeyToken=null”或其依赖项之一。该系统找不到指定的文件。资料来源：A.MyClass

有什么办法可以解决这个问题还是我错过了一些明显的东西？（使用的命令是 Net.AddAssembly 和 Import（在 A 和 B 上），然后实例化对象并调用方法）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:13:56.110

没关系，发现问题了。其中一个依赖类将无法正确加载，因为它没有命名空间。

# java - 服务器 Java TCP 错误：未报告的异常 java.io.IOException

> ID：15350659
> 
> 赞同：-1
> 
> 时间：2013-03-11T23:37:17.140
> 
> 标签：java, windows

代码文件在这里：

[http://pastebin.com/X3HW8gPy](http://pastebin.com/X3HW8gPy)

这里的代码错误：

[http://imageshack.us/f/152/erroriojava.png/](http://imageshack.us/f/152/erroriojava.png/)

我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:46:35.847

Java 有两种类型的异常：选中和未选中。检查的异常要求程序员在方法可能抛出它们时显式地处理它们。在您的情况下， IOException 是一个已检查的异常，因为它不扩展 RuntimeException，并且 accept 方法可能会抛出它。

有两种方法可以处理已检查的异常，就像错误消息所说的那样：它们可以被捕获（使用 try..catch 块）或被声明为抛出（使用方法的 throws 关键字）。如果您选择第二个选项，那么您的方法的调用者将负责处理异常。

如果您搜索 java 检查的异常，您可以找到更多详细信息和示例。祝你好运！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T00:15:37.653

至少，图像中包含的所有错误都与未报告的异常有关

```
java.io.IOException 
```

因此，您应该为以下行包含 try catch 块或

```
throws IOException 
```

从你的方法

```
flujosES() 
```

和

```
waitConexion() 
```

第 57 行：printMensaje("Conexion recipida de:" + conexion.getInetAddress().getHostName());

第 120 行：salida.flush();

第 121 行：entrada = new ObjectInputStream(conexion.getInputStream());

第 122 行：printMensaje("\nSe recibieron los flujos de E/S\n");

# android - 在安卓应用中显示拍摄的照片

> ID：15350662
> 
> 赞同：2
> 
> 时间：2013-03-11T23:37:54.657
> 
> 标签：android, android-layout, android-intent

按照[android教程](http://developer.android.com/guide/topics/media/camera.html#intent-image)，我可以拍照。

```
public class TakePhotoActivity extends Activity {

    private Uri fileUri;
    // I am not sure what this is for yet
    private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_take_photo);
        // Show the Up button in the action bar.
        setupActionBar();

        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        fileUri = getOutputMediaFileUri();
        intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);

        startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);

    }

    private static Uri getOutputMediaFileUri() {
        return Uri.fromFile(getOutputMediaFile());
    }

    private static File getOutputMediaFile() {
        File mediaStorageDir = new File(
                Environment
                        .getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES),
                "MyCameraApp");
        if (!mediaStorageDir.exists()) {
            if (!mediaStorageDir.mkdirs()) {
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss")
                .format(new Date());
        return new File(mediaStorageDir.getPath() + File.separator + "IMG_"
                + timeStamp + ".jpg");
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE == requestCode) {
            if (RESULT_OK == resultCode) {
//              Toast.makeText(this, "Image saved to:\n" + data.getData(),
//              Toast.LENGTH_LONG).show();
            }
        }
    }
} 
```

现在我想显示我刚拍的照片，使用`onActivityResult`. 有没有人有一些代码可以做到这一点？

编辑以显示 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
tools:context=".TakePhotoActivity" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:contentDescription="@string/desc" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:48:49.283

使它像这样：

```
public class TakePhotoActivity extends Activity {

private Uri fileUri;
// I am not sure what this is for yet
private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
ImageView image;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_take_photo);
    // Show the Up button in the action bar.
    setupActionBar();
    image = (ImageView)findViewById(R.id.imageView1);

    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    fileUri = getOutputMediaFileUri();
    intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);

    startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);

} 
```

然后在这里将位图像这样放在图像视图中

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == 100) {
            try {
                bitmap = MediaStore.Images.Media.getBitmap(getContentResolver(), fileUri);
            } catch (FileNotFoundException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            } catch (IOException e1) {
                // TODO Auto-generated catch block
                e1.printStackTrace();
            }
 image.setImageBitmap(bitmap);

                 sendBroadcast(new Intent(
                        Intent.ACTION_MEDIA_MOUNTED,
                        Uri.parse("file://" + Environment.getExternalStorageDirectory())));

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:45:03.137

```
Bitmap b = MediaStore.Images.Media.getBitmap(this.getContentResolver(), imageUri)
myview.setBackground(new BitmapDrawable(b)); 
```

“myview”是您布局中的任何视图对象。因此，如果您的布局包含 ID 为“@+id/myview”的 RelativeLayout 对象，那么第二行可以说：

findViewById(R.id.myview).setBackground(new BitmapDrawable(b));

# javascript - Jquery将值传递给字符串并使其成为锚点

> ID：15350665
> 
> 赞同：0
> 
> 时间：2013-03-11T23:38:09.850
> 
> 标签：javascript, jquery

再次大师，

如何做到这一点？

```
<td>
<span class="label">Queued:</span><span class="data"><a href="link1">134</a></span><br>
<span class="label">Reject:<span class="data"><a href="link2">3434</a></span><br>
<span class="label">Offers:</span><span class="data"><a href="link3">234</a></span><br>
</td> 
```

由此

```
<table class="obj">
<tr>
<td>
Queued:134,Reject:3434,Offers:234,link1,link2,link3
</td>
<td>
Queued:134,link1,Reject:3434,link2,Offers:234,link3
</td>
</tr>
</table> 
```

link1,link2,link3 的值需要分别进入 Queued:134,Reject:3434 和 Offers:234，点击后进入链接页面。可能的 ？？

帮助将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:51:29.353

我以前从未尝试过这样做，所以这可能是实现这一目标的一种非常尴尬的方式，但下面的作品。您遇到的问题是两个 TD 的格式不同。我的代码的第一部分适用于第一个 TD，我的第二部分代码适用于第二个 TD。

我可以将两段代码结合起来，为第一个 TD 做一个，为第二个做另一个，但我会让你这样做 :)

```
$('.obj td').each(function(){
   fullstring = $(this).text();
   splitString = fullstring.split(',');
   splitStringLength = splitString.length/2;
   for(i=0; i<splitStringLength; i++){
      finalString = splitString[i].split(':');
      label = '<span class="label">' + finalString[0] + '</span>';
      data = '<span class="data"><a href="'+splitString[i+3]+'">'+finalString[1]+'</a></span><br/>';
      $('body').append(label + data);      
   }
}); 
```

});

[第一个 TD 的上述工作小提琴](http://jsfiddle.net/3NPRa/)

```
$('.obj td').each(function(){
       fullstring = $(this).text();
       splitString = fullstring.split(',');
       for(i=0; i<splitString.length; i=i+2){
          finalString = splitString[i].split(':');
          label = '<span class="label">' + finalString[0] + '</span>';
          data = '<span class="data"><a href="'+splitString[i+1]+'">'+finalString[1]+'</a></span><br/>';
          $('body').append(label + data);      
       }
    });
}); 
```

[第二个TD的上述工作小提琴](http://jsfiddle.net/3NPRa/2/)

# java - 如何将解密的文本文件字节块转储到 InputStreamReader？

> ID：15350675
> 
> 赞同：0
> 
> 时间：2013-03-11T23:39:26.077
> 
> 标签：java, encryption, inputstreamreader

在 CBC 解密循环中，我正在处理小（< 32 字节）字节块，所以我不能使用 StringBuilder，因为堆爆炸了。我想我应该把解密的字节转储到某种缓冲数组中。在这一点上，我对如何从这些字节设置和填充 InputStreamReader 感到困惑。如果我可以填充这个 InputStreamReader，那么我想在它周围包装一个 BufferedReader。然后我计划一次从 BufferedReader 读取一行，因为我的文本处理只需要一次操作一行。在此过程中，我不想将任何数据写入磁盘。我对如何处理从我的 CBC 解密循环中获得的字节感到非常困惑。他们显然需要缓冲（因为我的文本文件的一行可能是解密块大小的 20 倍）但我 我对充当中间人的缓冲区感到困惑。我正在使用 BouncyCastle，但目前这块拼图并没有真正引起我的问​​题。~感谢新手的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:51:25.317

从解密块中获取字节，并将它们转储到 PipedOutputStream。然后从中创建一个 PipedInputStream，适当地包装，并将其提供给您的其他代码。

这最好在两个单独的线程中完成。它可能合二为一，但你必须小心不要阻塞（尤其是阅读），否则你会被卡住。

或者您可以在解密器上编写自己的自定义 InputStream 实现。

# python - Python：搜索并查找匹配的一组字符串

> ID：15350681
> 
> 赞同：0
> 
> 时间：2013-03-11T23:40:23.643
> 
> 标签：python

我正在尝试搜索并匹配保存在 .txt 文件中的 cisco 路由器配置上的特定字符串。这是部分 .txt 文件的示例：

```
ip sla 101
udp-jitter 10.0.0.1 48092
request-data-size 64
tos 100
tag hostname
frequency 300
ip sla schedule 101 life forever start-time now
ip sla 102
udp-jitter 10.0.26.36 48092
request-data-size 64
tos 100
owner owner
tag hostname
frequency 300
ip sla schedule 102 life forever start-time now
ip sla 103
udp-jitter 10.0.114.1 48092
tos 100
vrf mskjhhj
owner owner2
tag hostname
ip sla schedule 103 life forever start-time now 
```

因此，想象一下 500 个 .txt 文件，并且在配置上都有不同的变化，但都必须具有“IP SLA 101、102、103 等......”

我要抓取和保存的部分是每个“IP SLA”下的配置。例如，第一行是“ip sla 101”，整个配置如下：

```
ip sla 101
udp-jitter 10.0.0.1 48092
request-data-size 64
tos 100
tag xb02wepr01-004108
frequency 300
ip sla schedule 101 life forever start-time now 
```

我希望能够搜索整个文件并获取每个“ip sla”的信息请记住，某些文件具有不同的配置，唯一相同的是当其中一个 ip sla 是完成它之后是另一个 ip sla，直到没有更多。我不知道我是否解释自己，因为它是思科配置。

这是我的代码：

```
f =open('config.txt')
f =f.readlines()
f_out =open('save_result.txt', 'wb')
for i in f:
    if 'ip sla <any number>:
        ipsla<number>=[]
        ipsla<number>.append(i)
        ipslacurrent = i
    elif i != <any number>:
        ipsla<number>.append(i)
    f_out.write(ipsla<anynumber>)
f_out.close() 
```

我希望这一切都有意义，如果不是我道歉。如果有任何其他方式可以实现这一点，我将不胜感激。可能使用正则表达式，但我没有使用 rgex 的经验。谢谢

# 更新：

我基本上想要的是多变量。在脚本结束时，我希望脚本收集如下示例：

## 例子：

```
ip_sla_101 =['udp-jitter 10.0.0.1 48092', 'request-data-size 64','tos 100','tag hostname','frequency 300','ip sla schedule 101 life forever start-time now']

ip_sla_102 =['udp-jitter 10.0.26.36 48092', 'request-data-size 64','tos 100','owner owner', 'tag hostname','frequency 300','ip sla schedule 102 life forever start-time now']

ip_sla_103 =['udp-jitter 10.0.114.1 48092','tos 100','owner owner2', 'tag hostname', 'ip sla schedule 103 life forever start-time now'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T23:52:26.263

我不太确定你想要什么，但我认为你想抓住整条线，在这种情况下你可以这样做：

```
with open('outfile.txt','w') as out_file:
    with open('infile.txt','r') as in_file:
        for line in in_file:
            if 'ip sla' in line:
                out_file.write(line) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:53:27.010

我们将只使用一个简单的正则表达式来识别“ip sla”后跟数字，而不是字母：

```
import re
matcher = re.compile( "ip sla [0-9]+" ) 
```

这意味着：文字字符串“ip sla”，后跟一组 0-9 中的一个或多个字符（十进制数字）。

现在，您只需要知道 matcher.match(s) 会告诉您字符串 s 是否与模式匹配。

你不需要为其余的做任何花哨的事情。这样的事情将是解决它的一种方法：

```
collected = {} # a dictionary of first-lines to list-of-lines
current = []
for line in f.readlines():
    if matcher.match( line ): #this will match the line
        # we're starting a new section
        if current: # is there anything in the old section?
            collected[ current[0] ] = current # organize by first line
        current = [ line ] # start a new list for the new section
    else:
        current.append( line )
print collected[ "ip sla 101" ] 
```

# grails - Groovy / Grails 使用映射作为函数的参数

> ID：15350684
> 
> 赞同：7
> 
> 时间：2013-03-11T23:41:22.830
> 
> 标签：grails

我有一个非常简单的函数，我定义如下：

```
 def mySimpleFunction(Map myMap) {
   // Function logic here...
  } 
```

但是，当我尝试编译它时，我收到一条警告消息并生成异常，其中指出：[mySimpleFunction] 操作接受类型为 [java.util.Map] 的参数，该参数尚未标记为 Validateable。

如何将此功能标记为可验证？我导入了**org.codehaus.groovy.grails.validation.Validateable**

并将我的课程标记为 @Validateable 。

为了构建我的应用程序，我应该做些什么不同的事情？

先感谢您！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-12T01:16:06.973

如果它是辅助方法，请将其设为私有。在 Grails 2.0+ 中，公共控制器方法被假定为动作，而参数被假定为可绑定的。这意味着它们需要是数字类型、布尔值、字符串等，或者是命令对象类。

如果在控制器类文件中定义了命令对象类，则它们会自动变为可验证的，并且如果它们在其他地方定义，则需要将它们注释为`@Validateable`.

由于这是一个辅助方法而不是一个动作，只需将其设为私有（尤其是因为无论如何都不能从另一个类调用它）：

```
private mySimpleFunction(Map myMap) {
   // Function logic here...
} 
```

# delphi - 自定义组件 TImage 事件导致错误“不存在”

> ID：15350685
> 
> 赞同：1
> 
> 时间：2013-03-11T23:41:35.123
> 
> 标签：delphi, delphi-2010, vcl

我有一个包含以下事件的自定义组件

```
 private
    { Private declarations }
    ...
    fOnImageClick: TNotifyEvent;
    fOnImageMouseUp: TMouseEvent;
    fOnImageMouseDown: TMouseEvent;
    fOnImageMouseMove:  TMouseMoveEvent;
    fOnImageMouseEnter: TNotifyEvent;
    fOnImageMouseLeave: TNotifyEvent;
    fOnImageSelect: TNotifyEvent;
    fOnImageDblClick: TNotifyEvent;
  protected
    ...
  public
    { Public declarations }
     ...
  published
     ...
     property OnImageClick: TNotifyEvent read  fOnImageClick write  fOnImageClick;
     property OnImageSelect: TNotifyEvent read  fOnImageSelect write  fOnImageSelect;
     property OnImageDblClick: TNotifyEvent read  fOnImageDblClick write  fOnImageDblClick;
     property OnImageMouseDown: TMouseEvent read  fOnImageMouseDown write  fOnImageMouseDown;
     property OnImageMouseUp: TMouseEvent read  fOnImageMouseUp write  fOnImageMouseUp;
     property OnImageMouseMove:  TMouseMoveEvent read  fOnImageMouseMove write  fOnImageMouseMove;
     property OnImageMouseLeave: TNotifyEvent read  fOnImageMouseLeave write  fOnImageMouseLeave;
     property OnImageMouseEnter: TNotifyEvent read  fOnImageMouseEnter write  fOnImageMouseEnter;
  end; 
```

我将它们分配给一个 TImage，其父级是 TPanel，其父级是 TScrollBox

```
 img:= TImage.Create(ThumbPnl);
 img.Parent:= ThumbPnl;
 img.Tag:= I;
 img.Align:= alClient;
 img.Stretch:= true;
 img.OnClick:= fOnImageClick;
 img.OnDblClick:= fOnImageDblClick;
 img.OnMouseEnter:= fOnImageMouseEnter;
 img.OnMouseLeave:= fOnImageMouseLeave;
 img.OnMouseDown:= fOnImageMouseDown;
 img.OnMouseUp:= fOnImageMouseUp;
 img.OnMouseMove:= fOnImageMouseMove; 
```

该组件编译和构建就好了。具有此组件的应用程序也可以正常编译和运行。如果我分配一个 OnClick 事件，它会起作用。所有其他事件，如果我分配它们并尝试运行应用程序，我会收到一条错误消息，指出该事件不存在

有谁知道这是为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T01:12:32.090

对于新组件创建者来说，您犯了一个相当常见的错误。你违反了这条规则：

> 组件用户编写事件处理程序，组件编写者“触发”事件

在您的情况下，当您作为组件开发人员不应该这样做时，您正在做的是分配事件。由组件用户分配代码以在`OnClick`,`OnDblClick`等事件中发生。

将事件声明为 Published 和 TNotifyEvent 类型就足够了。

```
property OnSomeEvent: TNotifyEvent read FOnSomeEvent write FOnSomeEvent; 
```

这就是创建事件所需要做的一切。你的工作是“解雇”他们；也就是说，让它们发生。

这是在适当的时候在您的组件中完成的。通常，您要做的是创建一个方法 DoXXXXX，其中 XXXXX 是正在发生的事情。所以你会创建

```
procedure TMyImage.DoSomeEvent;
begin
  if Assigned(FOnSomeEvent) then FOnSomeEvent(Self);
end; 
```

然后，在您的代码中，当事件应该被触发时，您只需调用`DoSomeEvent`.

现在，如果你想*增强*默认事件的功能，那么你需要重写触发事件的方法。

我讨厌这样做，但我的经典组件 Tsmiley 简单而清晰地说明了这一点：

[http://tsmiley.svn.sourceforge.net/viewvc/tsmiley/](http://tsmiley.svn.sourceforge.net/viewvc/tsmiley/)

看一下那个例子，你应该会看到如何创建事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T00:00:45.887

# 什么是事件

Delphi 中的事件是一个方法指针。方法指针基本上是两个指针，一个指向您分配给事件的方法，另一个指向您分配的活动实例（对象）。

# 我假设你在期待什么

我认为您希望内部对象中的事件遵循分配给外部对象的事件，并且这不会自动发生。

当你分配它时，你正在做指针分配。举个例子，你的线

```
img.OnDblClick:= fOnImageDblClick; 
```

使用当时的值执行指针赋值`fOnImageDblClick`。如果是`nil`，`img.OnDblClick`将从`nil`现在开始。如果它当时*指向*，则从现在开始将指向同一对象上的相同方法，**但是**，如果您稍后更改 fOnImageDblClick 指向的位置，则 imgOnDblClick 将不会跟随...它将仍然指向相同的*旧*地址。如果你想改变它，你也必须通过代码进行改变。`Form1.MyComponentImageClick``img.OnDblClick`

 ***如果您希望这种情况发生，您可以在外部类的事件设置器中执行此操作。

首先，像这样声明您的事件：

```
published
  ...
  property OnImageDblClick: TNotifyEvent read  fOnImageDblClick write  SetOnImageDblClick; 

...
procedure TMyClass.SetOnImageDblClick(Value: TNotifyEvent);
begin
  FOnImageDblClick := Value;
  //pass the new value to the inner object.
  if Assigned(Img) then
    Img.OnDblClick := Value;
end; 
```

如果您的`Img`内部对象一直存在，则不需要该`FOnImageDblClick`变量，您也可以为该属性编写一个 getter 并直接从内部对象中获取值，如下所示：

```
function TMyClass.GetOnImageDblClick: TNotifyEvent;
begin
  Result := Img.OnDblClick;
end; 
```***

# java - 是否有 Java gui 代码可以从不同的框架中选择？

> ID：15350687
> 
> 赞同：-1
> 
> 时间：2013-03-11T23:41:43.650
> 
> 标签：java, swing, user-interface, actionlistener

我的意思是我有一个框架，带有一个带有动作监听器的按钮和 4 个不同的框架。当我单击按钮时，它将随机打开这 4 个框架之一。例如，我有框架 1、2、3、4。如果我单击我的按钮，它将通过 setVisible(true) 随机显示其中一个帧我已经设置了代码以使其可见并使当前帧不可见我唯一的问题是我不知道按钮将如何随机从 4 帧中挑选

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:49:09.297

将所有帧添加到[列表](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)或数组中。创建[Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)对象并生成 [0, 3] 之间的随机数。现在，您可以使用带有帧和随机数生成器的列表。例如：

```
frames.get(random.nextInt(frames.size())); 
```

frames - 所有帧的列表random - [Random](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)类
的实例。

也可以看看：

*   [生成随机数](http://www.javapractices.com/topic/TopicAction.do?Id=62)。
*   [使用标准集合](http://www.javapractices.com/topic/TopicAction.do?Id=9)。
*   [比旧类更喜欢集合](http://www.javapractices.com/topic/TopicAction.do?Id=39)

# maven - 自定义 Maven 清理文件集不起作用

> ID：15350688
> 
> 赞同：0
> 
> 时间：2013-03-11T23:41:53.103
> 
> 标签：maven, fileset

我创建了一个名为“dist”的附加目标目录，我正在向其中复制一些构建工件。因为它不在默认的目标目录中，所以我根据插件的[删除附加文件](http://maven.apache.org/plugins/maven-clean-plugin/examples/delete_additional_files.html)说明添加了一个适当的清理插件配置，如下所示：

```
 <plugin>
            <artifactId>maven-clean-plugin</artifactId>
            <version>2.5</version>
            <configuration>
                <fileset>
                    <followSymlinks>false</followSymlinks>
                    <directory>dist</directory>
                    <includes>
                        <include>*</include>
                    </includes>
                </fileset>
            </configuration>
        </plugin> 
```

但是“dist”目录及其内容在任何“mvn clean”之后仍然存在。我尝试了许多变体，并检查了“mvn help:effective-pom”或“mvn -X”调试输出的输出，我发现：

1.  配置显示在子模块的有效 pom 中。
2.  没有错误信息
3.  调试输出中**没有**“dist”目录或其内容的迹象。
4.  像这样的明确引用`<directory>${basedir}/dist</directory>`没有区别。
5.  同样，使用或多或少的显式`<include>`引用，如“ *.jar”或“* */*.txt”也没有区别。

我正在使用 maven 3.0.3，干净的插件 2.5。我试过2.4，以防万一。没有不同。此外，没有权限问题。

我在谷歌浏览了几十个例子，都只是重复文档的说明。我对 Maven 比较陌生，仍在学习。我对明显的事情视而不见吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T15:01:19.777

您需要在`<fileset>`标签中包含`<filesets>`标签

```
<plugin>
    <artifactId>maven-clean-plugin</artifactId>
    <configuration>
        <filesets>
            <fileset>
                <directory>dist</directory>
            </fileset>
        </filesets>
    </configuration>
</plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-17T11:37:16.420

几乎，

这是一个有效的：

```
<plugin>
<artifactId>maven-clean-plugin</artifactId>
<version>2.5</version>
<configuration>
    <filesets>
        <fileset>
            <followSymlinks>false</followSymlinks>
            <directory>${basedir}</directory>
            <includes>
                <include>dist/**</include> 
                <include>target</include> 
            </includes>
        </fileset>
    </filesets>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T01:44:44.893

尝试使用而不是：

```
 <includes>
                        <include>*</include>
                  </includes> 
```

就像是

```
 <includes>
                        <include>**/*.*</include>
                   </includes> 
```

它使用 Maven 2.2.1 对我有用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T14:51:51.747

这将起作用：

```
 <plugin>
        <artifactId>maven-clean-plugin</artifactId>
        <version>2.5</version>
        <configuration>
            <fileset>
                <followSymlinks>false</followSymlinks>
                <directory>${basedir}</directory> <!-- Careful with this -->
                <includes>
                    <include>dist</include> 
                    <include>target</include> 
                </includes>
            </fileset>
        </configuration>
    </plugin> 
```

# java - 如何用Java进行二进制算术运算？

> ID：15350689
> 
> 赞同：1
> 
> 时间：2013-03-11T23:41:54.250
> 
> 标签：java, string, math, binary, arithmetic-expressions

对于 Java 分配，我需要能够将通过命令行（无论多大）作为字符串引入的任何数字传递到二进制文件中。

然后生成允许这些数字加、乘、减和除的方法。

我的问题首先是：

如何将我的字符串变成二进制

例如：

123 将变为 1111011

8403678 将变为 100000000011101011011110

等等……

然后最大的问题是让它们相加、相减等。

最后，我需要能够将结果从二进制转换回十进制，这比前一种情况（从二进制转换为十进制字符串）更难以理解如何做到这一点。

例如：

如果将 1111011 添加到 100000000011101011011110 中，则结果将是 100000000011101101011001 ，然后它将变为 8403801 ，结果我将打印出来。

这个项目的最终目标是创建我们自己的类，例如 java.math.BigInteger（当然不使用它）并处理任意大的数字（比 Int 可以处理的更大）。

如果需要任何额外的信息，请告诉我，我会及时回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:03:04.103

由于您必须能够在不使用 BigInteger 的情况下处理大数，因此您需要找到一种表示任意大数的方法。显然`int`不会这样做。一种简单的方法是将数字表示为字符串。例如，数字 123 可以存储为字符串“123”。

转换为二进制需要一些中间操作，例如除法和取模。因此，当您的数字存储在字符串中时，值得考虑如何执行这些操作。由于这是家庭作业，我不想只给你答案，而是一些指导。

说你想做加法。

1.  想想你如何手动添加大数字。您使用每个数字的哪些数字，以及如何操纵它们来获得答案？这个算法相当简单，一旦你能解释它，你也可以给计算机指示去做。（除此之外，您先添加个位，然后添加十位等……如果必须，请记住携带！）
2.  请注意，您可以使用诸如`charAt(int n)`. 这将返回字符串索引 n 处的字符。通过使用将其转换为整数`Integer.parseInt()`（它接受一个数字字符串并将其转换为整数）。
3.  所以现在你可以想：如果我想要一个数字的数字，那么字符串中的索引是什么？从这里开始，您应该能够弄清楚如何从大数字字符串中获取您想要的任何数字。现在，您可以实现您的算法。

最后，要将基数从十转换为二进制，您确实需要了解数字基数的工作原理。这给出了一个清晰而快速的介绍：[http](http://www.math.grin.edu/~rebelsky/Courses/152/97F/Readings/student-binary) ://www.math.grin.edu/~rebelsky/Courses/152/97F/Readings/student-binary 上面链接中的“从十进制转换为二进制”部分描述了一种方法正是你想要做的。祝你好运。

# function - 在 PowerShell 的 foreach 函数中更改变量名称

> ID：15350693
> 
> 赞同：1
> 
> 时间：2013-03-11T23:42:12.133
> 
> 标签：function, powershell, foreach

我有一个脚本，其中一部分需要运行三个不同的时间，所以我想我会尝试通过使用函数调用相同的代码而不是一次又一次地复制和粘贴来扩展我有限的 PowerShell 知识，并制作更长的时间-不必要的脚本。

我想在函数中重用的代码：

```
$users = Get-Content users.txt
foreach ($user in $users){
    # Get some information from Exchange about the user
    $dn = (Get-MailboxStatistics -id $user).displayname
    $ic = (Get-MailboxStatistics -id $user).itemcount

    # Make a hash table where user=itemcount
    $firstrun += @{"$dn"="$ic"} # Each time the script runs, we
                                # need a different hash table

    # Kick off some Exchange maintenance on the user. (Removed
    # to keep the post shorter)
    # Item count should lower after a few seconds.
} 
```

当代码第二次和第三次重复时，我希望创建一个新的哈希表（“secondrun”和“thirdrun”）。我的第一个问题是每次更改函数中的哈希表名称 - 可以这样做吗？

我也开始怀疑哈希表是否甚至是适合这项工作的工具，或者是否有更好的工具？对于更多背景知识，在我有了第二个哈希表之后，我想做一个比较：

```
foreach ($user in $users){
    $c1 = $firstrun.get_item($user)
    $c2 = $secondrun.get_item($user)

    # If the item count hasn't substantially dropped
    if ($c2 -ge $c1){
        # Do some different Exchange tasks on the user (removed
        # to keep the post shorter)
    }
} 
```

最后将进行第三次运行，它将简单地创建第三个哈希表（同样，user=itemcount）。然后，我将使用每个哈希表中的值将某种报告输出到文本文件。

我想在这个阶段我有两个主要问题 - 在函数中更改哈希表的变量名，而且在函数运行后我很难维护哈希表 - 尝试像全局变量一样声明它们不会似乎工作。我愿意接受有关如何更好地完成这一切的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:34:00.570

如果我明白你在说什么，那么你正在执行以下操作：

1.  填充将用户集映射到他们的项目计数的哈希表。
2.  做一些修剪物品的事情
3.  重新生成哈希表
4.  比较步骤 1 和 3 中生成的哈希表；再次对名单采取行动。
5.  重新生成哈希表
6.  根据所有三个表格生成报告

从上面的列表中可以看出，您确实想要生成一个生成哈希表并返回它的函数：

```
function Get-UsersItemCount
{
    $ht = @{}
    $users = Get-Content users.txt
    foreach ($user in $users){
        # Get some information from Exchange about the user
        $dn = (Get-MailboxStatistics -id $user).displayname
        $ic = (Get-MailboxStatistics -id $user).itemcount

        # Make a hash table where user=itemcount
        $ht += @{"$dn"="$ic"}
    }

    $ht # Returns the hashtable
} 
```

现在你可以调用这个函数三次：

```
$firstrun = Get-UsersItemCount

# Do first run stuff
$secondrun = Get-UsersItemCount

# Do second run stuff
$thirdrun = Get-UsersItemCount

# Generate your report 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:54:16.620

您可以只使用一个哈希表，使值成为一个数组，每次传递一个元素：

```
$ht = @{}

$users = Get-Content users.txt
foreach ($user in $users){
    # Get some information from Exchange about the user
    $stats = Get-MailboxStatistics $user |
               select -expand itemcount
    $ht[user] += @($stats)}
}

# Kick off some Exchange maintenance on the user. (Removed to
# keep post shorter)
# Item count should lower after a few seconds.

foreach ($user in $users){
    # Get some information from Exchange about the user
    $stats = Get-MailboxStatistics $user |
               select -expand itemcount
    $ht[user] += @($stats)

    # If the item count hasn't substantially dropped
    if ($ht[$user][1] -ge $ht[$user][0])
        # Do some different Exchange tasks on the user (removed
        # to keep the post shorter)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T00:31:26.767

如果我是你，我会怎么做？我假设哈希表的名称无关紧要。如果是这种情况，您可以获取当前日期时间并使用它来命名您的哈希表，例如

```
$HashTblName = "HashTbl_$($(get-date).ToString("yyyyMMddhhmmssff"))" 
```

# android - 移动物体触摸 xy

> ID：15350694
> 
> 赞同：-1
> 
> 时间：2013-03-11T23:42:14.747
> 
> 标签：android, opengl-es, path-finding, opengl-es-1.1

我正在尝试根据用户的触摸位置将对象移动到新的 x,y 位置，但我碰到了一堵砖墙。

目前，我正在手动编码轴的移动，但它正在生成一个脚本化的“x then y”，从而产生一个平方的移动。理想情况下，我想获得到触摸位置的线性路径，而不是正方形。

我的基本运动计算在这里：

```
 //check target not met on x axis
        if(spriteX != spriteTargetX){
            //check if its left or right
            if(spriteTargetX<spriteX){
                spriteX -=spriteSpeed;

            }else{

                spriteX +=spriteSpeed;
            }                               
        }
        if(spriteY != spriteTargetY){
            //check if its up or down
            if(spriteTargetY<spriteY){
                spriteY -=spriteSpeed;
            }else{
                spriteY +=spriteSpeed;
            }                                           
        } 
```

上述算法总是导致方形运动。老实说，我不知道我是否应该进行某种距离/角度计算。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:21:02.647

一种简单的方法是将运动方向表示为单位向量，然后乘以速度。我将列出基本步骤，并举例说明您所处的位置`(1,1)`并希望快速`(4,5)`移动`2`：

* * *

*   获取目的地和当前之间的差异。（diff.x 和 diff.y）

> ```
> diff.x = 3
> diff.y = 4 
> ```

*   获取从目的地到当前的总距离。

> ```
> dist = 5 ( sqrt(3^2 + 4^2) = 5 ) 
> ```

*   将 diff.x 和 diff.y 除以距离

> ```
> diff.x = 0.6  
> diff.y = 0.8 
> ```

*   将 diff.x 和 diff.y 乘以所需的速度

> ```
> diff.x = 1.2 
> diff.y = 1.6 
> ```

*   将 diff.x 和 diff.y 分别添加到 sprite 的 x 和 y

> ```
> sprite.x = 2.2
> sprite.y = 2.6 
> ```

# python - python中所有嵌套字典的值总和

> ID：15350698
> 
> 赞同：3
> 
> 时间：2013-03-11T23:42:54.380
> 
> 标签：python, dictionary

我有一本计数器字典，例如：

```
from collections import Counter, defaultdict

numbers = defaultdict(Counter)

numbers['a']['first'] = 1
numbers['a']['second'] = 2
numbers['b']['first'] = 3 
```

我想得到总和：1+2+3 = 6

在 python 3 中执行此操作的最简单/惯用的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T23:47:33.880

使用嵌套推导：

```
sum(x for counter in numbers.values() for x in counter.values()) 
```

或者先对计数器求和（从一个空的开始），然后是它们的值：

```
sum(sum(numbers.values(), Counter()).values()) 
```

或者首先是每个计数器的值，然后是中间结果：

```
sum(sum(c.values()) for c in numbers.values()) 
```

或使用链：

```
from itertools import chain
sum(chain.from_iterable(d.values() for d in numbers.values())) 
```

我更喜欢第一种方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T23:49:18.443

```
sum(sum(c.values()) for c in numbers.values()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T23:47:04.260

```
from itertools import chain
sum(chain.from_iterable(d.values() for d in numbers.values()))
# outputs: 6 
```

在 python 2.x 中的性能使用方面`.itervalues()`，避免了构建中间列表（适用于此处的所有解决方案）。

```
sum(chain.from_iterable(d.itervalues() for d in numbers.itervalues())) 
```

# spss - 案例摘要中的变量变化图

> ID：15350700
> 
> 赞同：1
> 
> 时间：2013-03-11T23:43:06.260
> 
> 标签：spss

```
[a]                   [b]                   [c]
Chrome            Chrome            Chrome
Chrome            Internet Explorer Chrome
Chrome            Chrome            Chrome
Firefox           Firefox           Chrome
Internet Explorer Chrome            Chrome
Safari            Safari            Chrome 
```

如果这是基本的，我对 SPSS 很抱歉。尝试生成从 a 到 b 的每个选项的频率变化的图形表示（折线图）。然后是a，b，c。

我想，对于每个变量，我需要计算每个选项的百分比，然后绘制它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:21:16.337

生成我认为您想要的内容的简短答案是将您的数据从宽变为长，然后生成摘要图表。下面的例子：

```
*Making fake data that looks like yours.
input program.
loop #i = 1 to 1000.
    compute caseid = #i.
    compute A = TRUNC(RV.UNIFORM(1,4)).
    compute B = TRUNC(RV.UNIFORM(1,4)).
    compute C = TRUNC(RV.UNIFORM(1,4)).
    end case.
end loop.
end file.
end input program.
dataset name Sim.
value labels A B C
1 'Chrome'
2 'Firefox'
3 'IE'.

*Reshape Wide to long.
VARSTOCASES
/MAKE Browser from A B C
/INDEX Period.

*Now make the summary chart.
GGRAPH
  /GRAPHDATASET NAME="graphdataset" VARIABLES=Period COUNT()[name="COUNT"] Browser
  /GRAPHSPEC SOURCE=INLINE.
BEGIN GPL
 SOURCE: s=userSource(id("graphdataset"))
 DATA: Period=col(source(s), name("Period"), unit.category())
 DATA: COUNT=col(source(s), name("COUNT"))
 DATA: Browser=col(source(s), name("Browser"), unit.category())
 GUIDE: axis(dim(1), label("Period"))
 GUIDE: axis(dim(2), label("Count"))
 GUIDE: legend(aesthetic(aesthetic.color.interior), label("Browser"))
 SCALE: cat(dim(1))
 SCALE: linear(dim(2))
 SCALE: cat(aesthetic(aesthetic.color.interior), include("1.00", "2.00","3.00"))
 ELEMENT: line(position(Period*COUNT), color.interior(Browser), missing.wings())
END GPL. 
```

这产生了这个图表：

![在此处输入图像描述](../Images/b8753f984fd4f4429abb07c664ef03d7.png)

如果您有重复的测量数据（即同一个人浏览多个时间段），您可以在数据中拥有更多的结构，可以绘制图表。一种方法您可以考虑以初始状态为条件的面积图。下面是一个示例，通过一些事后编辑图表产生了这个：

![在此处输入图像描述](../Images/32278ec615c5277c45aa78e3c700456c.png)

```
do if Period = 1.
    compute initial_browser = Browser.
else if Period > 1.
    compute initial_browser = lag(Browser).
end if.
value labels initial_browser
1 'Chrome'
2 'Firefox'
3 'IE'.

GGRAPH
  /GRAPHDATASET NAME="graphdataset" VARIABLES=Period COUNT()[name=
  "COUNT"] initial_browser Browser
  /GRAPHSPEC SOURCE=INLINE.
BEGIN GPL
 SOURCE: s=userSource(id("graphdataset"))
 DATA: Period=col(source(s), name("Period"), unit.category())
 DATA: COUNT=col(source(s), name("COUNT"))
 DATA: initial_browser=col(source(s), name("initial_browser"),unit.category())
 DATA: Browser=col(source(s), name("Browser"), unit.category())
 GUIDE: axis(dim(1), label("Period"))
 GUIDE: axis(dim(2), label("Count"))
 GUIDE: axis(dim(4), label("Initial Browser"), opposite())
 GUIDE: legend(aesthetic(aesthetic.color.interior), label("Browser"))
 SCALE: cat(dim(1))
 SCALE: linear(dim(2), include(0))
 SCALE: cat(dim(4))
 SCALE: cat(aesthetic(aesthetic.color.interior), include("1.00", "2.00",
  "3.00"))
 ELEMENT: area.stack(position(Period*COUNT*1*initial_browser),
  color.interior(Browser), missing.wings())
END GPL. 
```

如果是这种情况，还有很多其他的图表可能性。

# javascript - jQuery 表单验证

> ID：15350701
> 
> 赞同：0
> 
> 时间：2013-03-11T23:43:07.287
> 
> 标签：javascript, jquery

我一直在研究这个 jQuery 表单，它只允许用户在填写所有字段后提交。所以基本上，提交字段（或者在我的情况下是“请求”字段）是灰色的，直到所有字段都不为空。但是我的按钮总是变暗，有人可以帮我解决这个问题吗？我有以下 jQuery：

```
$(function() {
    var $submit = $(".request input");
    var $required = $(".required");
    function containsBlanks(){
        var blanks = $required.map(function(){ return $(this).val() == "";});
        // the inArray helper method checks if value is within an array
        return $.inArray(true, blanks) != -1;
    }

    function requiredFilledIn(){
        if(containsBlanks()) 
        $submit.attr("disabled","disabled");
    else 
        $submit.removeAttr("disabled");
    }

    $("#form2 span").hide();
    $("input").focus(function(){
        $(this).next().fadeIn("slow");
    }).blur(function(){
        $(this).next().fadeOut("slow");
    }).keyup(function(){
        //Check all required fields.
        requiredFilledIn();
    });

    requiredFilledIn();
}); 
```

这是我的表格

```
 <div id="form2" title="Request a Call-back">
        <p class="validateTips">All form fields are required. The submit button will activate once this is done.</p>
        <form action="includes/requestcall.php" method="post">
            <fieldset>
                <label for="name">Name:</label>
                <input type="text" name="name" id="name" size="30" class="required" />
                <span>Please enter your Name</span>
                <br />
                <br />
                <label for="number">Number:</label>
                <input type="text" name="number" id="number" size="30" class="required" />
                <span>Please enter your number</span>
                <br />
                <br />
                <label for="time">Preferred Time:</label>
                <input type="text" name="time" id="time" size="30" class="required" />
                <span>Please enter your preferred time</span>
                <br />
            </fieldset>
            <p class="request">
            <input type="submit" value="Request" class="btn-submit">
            </p>
        </form>
    </div> 
```

我仍在学习 jQuery，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:10:46.427

我已经稍微调整了代码以使用过滤器函数来检索空文本框以及使用更改事件。

[这是在 JSFiddle 上运行标记的更新脚本的链接](http://jsfiddle.net/justinmichaels/Vwf4b/)

这是更新的脚本：

```
$(function () {
    var $submit = $("input.btn-submit").attr("disabled", "disabled").css("color", "red");
    var $required = $(".required");

    function requiredFilledIn() {
        var blanks = $required.filter(function () {
            return $(this).val() === "";
        });
        if (blanks.length > 0) $submit.attr("disabled", "disabled").css("color", "red");
        else $submit.removeAttr("disabled").css("color", "black");
    }

    $("#form2 span").hide();
    $("input:text").focus(function () {
        $(this).next().fadeIn("slow");
    }).blur(function () {
        $(this).next().fadeOut("slow");
    }).change(function () {
        //Check all required fields.
        requiredFilledIn();
    });
}); 
```

# node.js - Windows 上的 node.js 和 redis (hiredis)

> ID：15350702
> 
> 赞同：0
> 
> 时间：2013-03-11T23:43:09.327
> 
> 标签：node.js, node-redis

我在使用 node.js 和 redis 但没有hiredis的聊天应用程序上使用该代码，因为我无法在Windows机器上安装它

```
var app = require('express')()
  , redis = require('redis')
  , client = redis.createClient()
  , server = require('http').createServer(app)
  , io = require('socket.io').listen(server)
  ;

server.listen(80);

io.sockets.on('connection', function (socket) {
    console.log("client connected")

    socket.on('join', function(userid) {
        socket.set('userid', userid);

        var userco = userid+":connects";

        client.incr(userco);
    });

    socket.on('disconnect', function(userid) {

        socket.get('userid', function(err, userid) {

            var userco = userid+":connects";
            client.decr(userco);
            var usercoco = client.get(userco);
            console.log(usercoco);
            if (parseInt(usercoco)<1) {
               io.sockets.emit("remove-user",{id:userid});
            }
        });
    });
}); 
```

但是 parseInt 方法也不起作用，remove-user 事件也不起作用..您对此有任何解释和解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:08:22.640

```
var usercoco = client.get(userco);
console.log(usercoco); 
```

`.get`是一个 ASYNC 函数，它不返回变量。

```
client.get(userco, function(err, res) { console.log(usercoco); } 
```

它将在完成时登录到控制台。

# node.js - Passport.js 无法序列化用户

> ID：15350704
> 
> 赞同：10
> 
> 时间：2013-03-11T23:43:14.267
> 
> 标签：node.js, express, passport.js

我仅将 passport.js 用于 Google、Facebook 和 Twitter 登录。

Node.js v0.8.19 与 express.js 3.1.0 和 passportjs 版本 0.1.16。（护照-facebook - 0.1.5，推特 - 0.1.4 护照-goolge-oauth - 0.1.5）

在运行 passport.js 一个小时左右的应用程序停止将用户序列化到 req.user 会话后，一切都可以正常工作一段时间。

Facebook 和 google 正在从各自的 api 接收有意义的完整数据

```
passport.use(new FacebookStrategy({
    clientID: FACEBOOK_APP_ID,
    clientSecret: FACEBOOK_APP_SECRET,
    callbackURL: "http://localhost:3000/auth/facebook/callback"
  },
  function(accessToken, refreshToken, profile, done) {
      var temp = {} 
      temp.name = profile.displayName
      temp.id = profile.id
      console.log(temp)
      return done(null, temp);
})); 
```

此处的console.log 将成功打印用户ID 和名称，但是在调用之后

```
passport.serializeUser(function(user, done) {
  done(null, user);
});

passport.deserializeUser(function(obj, done) {
  done(null, obj);
}); 
```

序列化和反序列化取自 passport-facebook[示例。](https://github.com/jaredhanson/passport-facebook/blob/master/examples/login/app.js)

用户不会附加到 req.user。

Twitter 从来没有走那么远，在返回回调 url 后，twitter 给出了错误：

```
Error: failed to find request token in session
[03/11 23:28:24 GMT]     at Strategy.OAuthStrategy.authenticate 
```

**注意：**这些故障只发生在一段时间后，正常工作一段时间。这就是为什么我认为这可能是一个内存问题，就像我将会话保存在内存中而不是一个厨师。

这是我的快速应用配置

```
app.configure(function(){
  app.set('port', process.env.PORT || 8080);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.cookieParser());
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieSession({ secret: 'tobo!', cookie: { maxAge: new Date(Date.now() +     3600000), }}));
  app.use(passport.initialize());
  app.use(passport.session());
  app.use(app.router);
  app.use(express.static(__dirname + '/public'));
}); 
```

我查看了邮件列表等，但找不到与此问题匹配的内容。我已经检查了我的本地主机和 nodejitsu 服务器。一切都工作了一段时间然后失败了。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-15T17:05:40.877

首先，您必须了解序列化和反序列化的含义。

1）根据您的第一个问题`serializeUser`，当您返回时，获取一个用户对象并在会话中存储您想要的任何信息。`done(null, user)`

2）`deserializeUser`获取存储在会话中的信息（由cookieSession在每个请求中发送）并检查会话是否对用户仍然有效，并且`if(!err) done(null,user)`为真，将用户保持在会话中，`else done(err,null)`将其从会话中删除，将您重定向到`app.get('/auth/:provider/callback')`在检查会话是否超时后，无论您将用户发送到什么位置。这应该澄清你的第二个问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T16:27:34.837

我仍然不明白为什么会出现问题，但我已经通过执行以下操作解决了它。

改变

```
 app.use(express.cookieSession({ secret: 'tobo!', cookie: { maxAge: new Date(Date.now() +     3600000), }})); 
```

至

```
app.use(express.cookieSession({ secret: 'tobo!', maxAge: 360*5 })); 
```

我认为序列化整个用户对象应该可以工作，因为 deserializeUser 只会传回传递的 cookie。但是通过不序列化它正在工作的整个用户对象。

```
passport.serializeUser(function(user, done) {
    console.log('serializeUser: ' + user._id)
    done(null, user._id);
});

passport.deserializeUser(function(id, done) {
    db.users.findById(id, function(err, user){
        console.log(user)
        if(!err) done(null, user);
        else done(err, null)  
    })
}); 
```

自从我这样做以来，我的问题**为零**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-25T08:13:48.220

```
//app.use(session(...)) must comes before app.user(passport.session())
//other wise items will not be save or serialize to session

app.use(
  session({
    secret: process.env.SESSION_SECRET,
    resave: false,
    saveUninitialized: false,
  })
);

app.use(passport.session());
```

# ruby-on-rails - 如何使用 link_to 帮助器进行生产？

> ID：15350706
> 
> 赞同：0
> 
> 时间：2013-03-11T23:43:19.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:50:44.030

这对我有用：

```
<%= link_to "linky", "/", id: "logo" %> 
```

如果您不希望有一个值，您可以省略“linky”，但保留字符串声明，如：

```
<%= link_to "", "/", id: "logo" %> 
```

这返回

```
<a id="logo" href="/">linky</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:51:22.290

会不会是：

```
<%= link_to '', root_path, :id => "logo" %> 
```

# asp.net-web-api - WebAPI - 控制器与 ApiController？

> ID：15350715
> 
> 赞同：0
> 
> 时间：2013-03-11T23:44:12.127
> 
> 标签：asp.net-web-api

所以我想这是一个语义问题。但是在我的 WebAPI 项目中，我有一个视图应该允许用户查找资源（资源是什么并不重要）。所以我创建了一个名为的控制器`FindResourceController`，它是从`Controller`. 然后我使用 razor 和 jQuery 创建我的视图。我的控制器有一个名为 Index 的方法，它返回这个视图。

到目前为止一切都很好。

但我也想`ApiController`从我的角度来处理 jQuery 请求`FindResource`。按照开箱即用的约定，API url 的路由方式类似于`api/FindResource/`，所以我应该命名我的 api 控制器`FindResourceController`并从`ApiController`. 但是我已经有这门课了。所以我可以将它命名为 FindResourceApiControler，但映射到的 url`api/FindResourceApi/`似乎是多余的。

这对我来说似乎有点笨拙。所以要么我错过了一些东西，要么这就是它的方式......所以，当你做这样的事情时，你在你的 web api 项目中做了什么？

编辑：到目前为止，这就是我找到的所有 [链接到文章](http://www.elylucas.net/post/MVC4-Quick-Tip-1%E2%80%93Put-your-API-Controllers-in-a-different-folder-to-avoid-class-naming-collisions.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:51:05.043

将类型放在不同的命名空间中对您来说是一种选择吗？您可以有一个 Controllers 命名空间和一个 ApiControllers 命名空间，并且每个都有一个 FindResourceController。虽然它可能会导致一些冲突，所以它不是一个完美的解决方案，但它可能对你有用。

# jquery - 带有固定位置的 Jquery UI 可排序

> ID：15350718
> 
> 赞同：1
> 
> 时间：2013-03-11T23:44:16.413
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有一些代码片段，它显示了两个相互连接的可排序列表。一切都很好。

演示 - [jsFiddle 示例](http://jsfiddle.net/7EHeB/10)

在演示中，字母被丢弃在可排序的开头或结尾或之间。一般来说，所有字母都被压缩，没有空格。这是可排序的自然行为。但现在我想以不同的方式移动（拖放）字母。

我想将位置 3 的字母 [例如字母 N] 移动到下面列表中的位置 3，而不是左侧。除了我希望可排序列表 [现在没有字母 N] 不会被挤压，但它们之间的差距应该保持不变。除了我想在 ul 元素上保持可排序的行为，以便我能够相互排序字母/空格，将间隙移动到其他位置，但只能在同一个可排序列表上。

我尝试使用 li 元素中的 span 来完成此操作，然后断开列表并仅使用可拖动和可放置，但我不知道如何使其正确。我尝试了两种方法。

**FIRST :**将 span 添加到 li 元素中，使 li 元素成为某种桶（每个桶中只能有一个字母）。然后只需添加：

```
 $("#letters li span").draggable({
         connectToSortable: "#subword",
         revert: "invalid"
    });

    $("#subword li span").draggable({
         connectToSortable: "#letters",
         revert: "invalid"
    }); 
```

但它只将 span 放在可排序的末尾，而不是放在我拖放到的 li 元素内。

**第二：**在 li droppable 和 span draggable 上添加，但我不能在 li 上使用 sortable。我总是会拖动 li 上的 span 元素。

有人可以帮我解决这个问题，因为我处于死胡同。如果有什么没有很好的解释，请询问。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T05:17:52.050

演示：http: [//jsfiddle.net/proqb/5qupZ/](http://jsfiddle.net/proqb/5qupZ/)

这是一个简短的 JS 片段：

```
$(function () {
    $("#sortable1").sortable();
    $("#sortable2").sortable();

    $(".droppable").droppable({
        accept: ".alienNode",
        drop: function (event, ui) {

                    ui.draggable.parent().droppable("enable");

            $(this).append("<div class='alienNode'>" + ui.draggable.html() + '</div>');

            ui.draggable.remove();

            $(this).find(".alienNode").draggable({
                handle: ".handler",
                revert: "invalid"
            });

            $(this).droppable("disable");

        }
    });

    $(".prerender").droppable("disable");

    $(".alienNode").draggable({
        handle: ".handler",
        revert: "invalid"
    });
}); 
```

此解决方案的总体思路是您不使用 connectedSortable。

相反，有 2 个可排序列表。每个 List 都包含 Draggable Droppables（现在是透明的 - 如果你想看到它们 - 你可以给它们背景颜色属性）。这些子节点仅接受具有特定类属性的元素，因此您只能将特定节点放入其中。最后还有一个内部节点，它是一个纯 Draggable，具有此 Fixed Class 属性，可以在两个列表中拖放。

可排序列表的长度当然可以动态更改，因此您不必使用固定数量的起始元素来限制自己，但这取决于您和您的需要。

如果您想使用我的解决方案，则必须解决一些情况，例如：

1) 自定义 onRevert 事件（它不是 JQuery 中定义的事件，它的功能失常会导致节点重复），或者你可以用其他东西替换它的机制。

2) 为可排序的 UL-s 制作背景图像网格，这样您就可以查看可以拖动元素的位置，或者可能实现占位符机制。

3）制作适当的处理程序，以便可以直观地拖动节点。目前，您可以按字母（这是内部节点的处理程序）或黑色背景拖动 - 这就像内部节点容器的处理程序一样。

4) 使可拖动对象粘在放置区域上也可能是个好主意。

我不认为您之前开发的机制可以在我的解决方案中使用，但您可以尝试在我的示例中重新实现它。

最后 - 如果您遇到任何其他问题，如果您想更快、更准确地自定义机制，您可以随时切换到有更多选项的 YUI，这里是拖放部分：http: [//yuilibrary.com/yui/docs/ dd/](http://yuilibrary.com/yui/docs/dd/) :)

无论如何，我希望其中一些对您有所帮助:)

# ios - 无法更改 UILabel.titleLabel.text

> ID：15350719
> 
> 赞同：1
> 
> 时间：2013-03-11T23:44:16.520
> 
> 标签：ios

我试图设置 titleLabel.text 但它不会从默认标题文本更改的奇怪问题。我已经在调试器中逐步检查了它并检查了 taskTitle 值，它是正确的新值，但 titleButton.titleLabel.text 属性似乎没有进行值分配。

```
- (void)setChallengeTitle:(NSString *)taskTitle
{
    titleButton.titleLabel.text = taskTitle;
    titleButton.titleLabel.font = [UIFont fontWithName:@"Gotham Bold" size:18];

    CGSize stringsize = [taskTitle sizeWithFont:[UIFont fontWithName:@"Gotham Bold" size:18]];
    //I have to add a little bit since it doesn't seem to calculate the size of gotham correctly
    int buttonWidth = stringsize.width + 20;
    if (buttonWidth > 320)
        buttonWidth = 320;

    [titleButton setFrame:CGRectMake( (320 - buttonWidth)/2 ,10, buttonWidth, 40)];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:10:00.117

您是否尝试过`UIButton`通过方法设置文本？

尝试：

`[titleButton setTitle:taskTitle forState:UIControlStateNormal]`

`UIControlStateNormal`将为所有州设置标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:56:43.670

如果它显示默认文本，则可能意味着它没有正确连接为 IBOutlet。

在界面生成器中检查您的链接。

希望能帮助到你..

# java - Java 服务器多线程

> ID：15350720
> 
> 赞同：-1
> 
> 时间：2013-03-11T23:44:17.887
> 
> 标签：java, multithreading, sockets, networking, client-server

如何在 Java 中实现多线程服务器？服务器侦听端口（例如 5000）并在单独的线程中提供连接并继续侦听更多客户端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T23:47:51.567

这是一个典型的例子：

```
ServerSocket ss = new ServerSocket(port);
ExecutorService executor = Executors.newCachedThreadPool();

while(true)
{
    Socket s = ss.accept();
    Runnable r = new TaskImplementsRunnable(s);
    executor.submit(r)
} 
```

```
public class TaskImplementsRunnable implements Runnable
{
    private Socket socket;

    public TaskImplementsRunnable(Socket socket)
    {
        this.socket = socket;
    }

    @Override
    public void run()
    {
        try
        {
            PrintWriter writer = new PrintWriter(socket.getOutputStream(), true);
            BufferedReader reader = new BufferedReader(new  InputStreamReader(socket.getInputStream()));

            String command;
            while((command = reader.readLine()) != null)
            {
                if(command.equalsIgnoreCase("command 1"))
                {
                    writer.println("This is command 1!");
                }
                else if(command.equalsIgnoreCase("command 2"))
                {
                    writer.println("This is command 2!");
                }
                else if(command.equalsIgnoreCase("exit"))
                {
                    break;
                }
                else
                {
                    writer.println("This is unknown command!");
                }
            }
        }
        catch(IOException e)
        {
            e.printStackTrace();
        }

        try
        {
            writer.close();
            reader.close();
        }
        catch(IOException e){}
    }
} 
```

# html - html5 中的音频标签安全性

> ID：15350723
> 
> 赞同：12
> 
> 时间：2013-03-11T23:44:30.827
> 
> 标签：html, security, audio

**长版：**

我使用 html5 音频标签在我的网站上播放 mp3 文件。使用 Flash，我可以流式传输 mp3 并确保 95% 的安全。

使用 html5 很容易找到 mp3 的位置并从那里下载。即使我使用唯一的哈希来保护它，在 chrome 中检查网络选项卡并查看带有哈希的 mp3 url 也不难。

我想知道是否有其他方法可以保护 mp3 不被翻录，是否值得花时间。例如， [bandcamp](http://www.bandcamp.com/)确实会生成唯一的哈希，但下载 mp3 仍然非常容易。对于 youtube，您可以下载可以处理 flv 流并翻录音频并将其保存为 mp3 格式的网站。

我能想到的第一层安全措施是将 mp3 文件的扩展名更改为 .txt 或其他常见格式。

95% 的用户没有发现该扩展程序，因为它在 Windows 和 Apple 上默认隐藏。这将阻止前 95% 的用户发现并播放 mp3 文件。

**简洁版本**

任何防止用户在使用 html5 音频标签时窃取 mp3 文件的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T23:53:32.407

**简答**

不。

将音频文件重命名为 .txt 不会帮助您保护 mp3 音频文件的安全性。如果有的话，它会给您带来更多问题，因为现在，您的 mp3 音频文件将以不正确的 MIME 类型发送，这可能会导致浏览器的内置音频播放器出现问题。

我能给你的最好的建议是：

1.  确保检查 REFERER http 标头，确保它来自具有 mp3 播放器的页面。
2.  使用唯一哈希保护 mp3 文件。
3.  不允许两次下载相同的哈希*

*请注意，即使这样做也可能会导致问题，例如，如果用户从缓存中重新打开选项卡，再次播放文件，而 mp3 文件未缓存，会发生什么情况？

最后，即使您的 mp3 文件是 IIS 和 Apache 历史上受保护程度最高的 mp3 文件，到底是什么阻止了我打开 Adob​​e Audition 并录制音频流？

尽管您对 Bandcamp 的 MP3 音频流的看法是正确的，但 mp3 的质量不如购买专辑后的正常下载。

即使是谷歌也没有真正对其视频流提供任何体面的保护这一事实应该说明一些事情。一家从 YouTube 上的视频观看中赚取数十亿美元的公司甚至无法制定（或者更好地 - 没有费心实施）任何可行的方法来保护他们的视频。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-01T13:01:22.260

**有点儿。**

Grooveshark 将 POST 请求发送到正在流式传输的 MP3 的服务器端脚本，这使得在不自己动态创建 POST 请求的情况下很难仅访问和欺骗 - 特别是看到您必须尝试存储音频文件那是收集的。但是您可以使用新的 AudioContext 来帮助大多数现代平台解决这个问题......

我使用了 HTML5Rocks.com 中的一个很好的示例来更改使用的标题，如下所示：

```
var dogBarkingBuffer = null;
// Fix up prefixing
window.AudioContext = window.AudioContext || window.webkitAudioContext;
var context = new AudioContext();

function loadDogSound(url) {
  var request = new XMLHttpRequest();
  request.open('POST', url, true);
  request.setRequestHeader("Content-type","application/x-www-form-urlencoded");
  request.responseType = 'arraybuffer';

  // Decode asynchronously
  request.onload = function() {
    context.decodeAudioData(request.response, function(buffer) {
      dogBarkingBuffer = buffer;
    }, onError);
  }
  //this is the encryption key
  request.send("key=98753897358975387943");
} 
```

[有关的](http://www.html5rocks.com/en/tutorials/webaudio/intro/)

如您所见，我还发送了一个密钥值，它也可能是公共/私有对的一部分。这应该阻止任何人试图干预——当然，除了简单地在播放 MP3 时录制它，但是在计算机内部或外部的任何环境中，有什么可能阻止这种情况呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-19T14:35:49.580

你可以让 MP3 本身没有吸引力。一些想法：

*   不要在文件中包含专辑封面、专辑信息等（id3 标签）。更好的是，用“此文件来自 myMusicSite.com”之类的内容填写所有 id3 标签字段。

*   将您的文件分成几个较小的部分，然后在浏览器中按顺序播放它们。必须下载所有单独的部分会使您的文件的吸引力大大降低。您可能会遇到无间隙播放的问题，但不确定它的支持程度。

*   将它们编码并播放为视频，可能使用您的徽标或其他内容作为视频流。生成的文件不会大很多，尤其是。如果您使用静态图像。这将意味着用户无法轻松地在 mp3 播放器、手机等上播放您的文件。

*   如评论中所述，在录音中轻声说出您的域名或网站名称几次。

# javascript - notificationData 中允许的最大 Worklight 有效负载是多少？

> ID：15350724
> 
> 赞同：0
> 
> 时间：2013-03-11T23:44:33.557
> 
> 标签：javascript, json, ibm-mobilefirst

我有一个工作灯通知适配器 - 有效负载如下所示：

```
WL.Server.notifyAllDevices(userSubscription, {
        badge: 1,
        sound: "sound.mp3",
        activateButtonLabel: "ClickMe",
        alert: notificationText,
        payload: {
            valueOne : inp1,
            valueTwo : inp2,
            valueThree : inp3
        }
    }); 
```

下面是调用此 2 次的示例 - 来自 messages.log 的消息：

[

```
3/11/13 23:37:52:595 GMT] 00000981 com.notnoop.apns.internal.ApnsConnectionImpl                 W Failed to send message com.notnoop.apns.EnhancedApnsNotification@bb51701b... trying again
java.net.SocketException: Connection closed by remote host
    at com.ibm.jsse2.qc.k(qc.java:71)
    at com.ibm.jsse2.h.write(h.java:29)
    at java.io.OutputStream.write(OutputStream.java:86)
    at com.notnoop.apns.internal.ApnsConnectionImpl.sendMessage(ApnsConnectionImpl.java:161)
    at com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:46)
    at com.notnoop.apns.internal.AbstractApnsService.push(AbstractApnsService.java:52)
    at com.notnoop.apns.internal.ApnsServiceImpl.push(ApnsServiceImpl.java:36)
    at com.worklight.integration.notification.apns.ApplicationConnection.sendNotification(ApplicationConnection.java:84)
    at com.worklight.integration.notification.apns.APNSMediator.sendNotification(APNSMediator.java:85)
    at com.worklight.integration.notification.Mediator$4.run(Mediator.java:174)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:482)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:345)
    at java.util.concurrent.FutureTask.run(FutureTask.java:177)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1121)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:614)
    at java.lang.Thread.run(Thread.java:780)

[3/11/13 23:41:53:849 GMT] 00000bff com.notnoop.apns.internal.ApnsConnectionImpl                 W Exception while waiting for error code
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:200)
    at java.net.SocketInputStream.read(SocketInputStream.java:132)
    at com.ibm.jsse2.a.a(a.java:100)
    at com.ibm.jsse2.a.a(a.java:125)
    at com.ibm.jsse2.qc.a(qc.java:207)
    at com.ibm.jsse2.qc.a(qc.java:488)
    at com.ibm.jsse2.e.read(e.java:32)
    at java.io.InputStream.read(InputStream.java:113)
    at com.notnoop.apns.internal.ApnsConnectionImpl$1MonitoringThread.run(ApnsConnectionImpl.java:102) 
```

然而，如果我将我的有效载荷减少到只有 2 个值 - 它可以工作。2是某种限制吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:46:55.667

有效载荷值大小没有限制。SocketException 是否始终以超过 2 个值发生在您身上？

# android-maps-v2 - Android 谷歌地图版本 2 不显示

> ID：15350725
> 
> 赞同：2
> 
> 时间：2013-03-11T23:44:45.297
> 
> 标签：android-maps-v2

我知道有很多关于这个话题的帖子，但我很困惑。我有 (2) 部不同的手机正在测试我的应用程序。谷歌地图（支持地图片段）在每台设备上都能正常显示，但只有当我直接从 Eclipse 定位每台设备时（使用电缆）。如果我创建一个 APK 文件（通过 Eclipse 导出）并以这种方式在设备上安装 APK 文件，应用程序运行良好，但地图不显示（仅显示缩放按钮）。这是LogCat：

```
03-11 18:02:02.710: W/dalvikvm(31316): Unable to resolve superclass of Lmaps/p/s; (427)
03-11 18:02:02.710: W/dalvikvm(31316): Link of class 'Lmaps/p/s;' failed
03-11 18:02:02.710: W/dalvikvm(31316): Unable to resolve superclass of Lmaps/y/bo; (3820)
03-11 18:02:02.710: W/dalvikvm(31316): Link of class 'Lmaps/y/bo;' failed
03-11 18:02:02.710: W/dalvikvm(31316): Unable to resolve superclass of Lmaps/i/k; (4208)
03-11 18:02:02.710: W/dalvikvm(31316): Link of class 'Lmaps/i/k;' failed
03-11 18:02:02.710: E/dalvikvm(31316): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
03-11 18:02:02.710: W/dalvikvm(31316): VFY: unable to resolve new-instance 3540 (Lmaps/i/k;) in Lmaps/z/ag; 
```

我使用了调试密钥，因为我现在只是在测试。显然，每部手机都设置正确（Google Play 服务等），这让我相信我没有从 Eclipse 正确导出 APK 文件。帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T20:06:28.640

找到了解决方案。导出 APK 文件时，我没有正确签署应用程序。必须使用调试密钥库 - 通常位于用户文件夹的“.android”文件夹中。密码是“安卓”。如果您正确输入所有内容，您应该能够从“别名”中选择“androiddebugkey”。密码也是“android”。

当然，当您直接从 Eclipse 下载应用程序到您的手机（通过电缆）并对其进行测试时，该应用程序会在调试模式下自动“签名”，这就是它在这种情况下工作的原因。

# c++ - cocos2d-X 中的 bool bRet 循环的意义何在？

> ID：15350726
> 
> 赞同：0
> 
> 时间：2013-03-11T23:44:49.873
> 
> 标签：c++, cocos2d-x

我是 Cocos2D-X 的菜鸟，但我已经编程了很长时间......我想知道这段代码的意义是什么：

我的困惑主要在于这部分：

> 布尔 bRet = 假；做{}同时（0）

这是给出一些上下文的整个方法：

```
 bool GameScene::init()
    {
        CCLog("GameScene::init");
    bool bRet = false;
    do 
    {
        //////////////////////////////////////////////////////////////////////////
        // super init first
        //////////////////////////////////////////////////////////////////////////
        CC_BREAK_IF(! CCLayer::init());

            // Initialize the parent - gets the sprite sheet loaded, sets the background and inits the clouds
            MainScene::init();

            // Start off as game suspended
            gameSuspended = true;

            // Get the bird sprite
            CCSprite *bird = CCSprite::createWithSpriteFrame(CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName("bird.png"));
            this->addChild(bird, 4, kBird);

            // Initialize the platforms
            initPlatforms();

            // Create the bonus sprite
            CCSprite *bonus;

            // Load in the bonus images, 5, 10, 50, 100
            for(int i=0; i<kNumBonuses; i++) 
            {
                    bonus = CCSprite::createWithSpriteFrame(CCSpriteFrameCache::sharedSpriteFrameCache()->spriteFrameByName(bonus_image[i]));
                    this->addChild(bonus,4, kBonusStartTag+i);
                    bonus->setVisible(false);
            }

            // Create the Score Label
            CCLabelBMFont* scoreLabel = CCLabelBMFont::labelWithString("0",  "Images/bitmapFont.fnt");
            this->addChild(scoreLabel, 5, kScoreLabel);

            // Center the label
            scoreLabel->setPosition(ccp(CCDirector::sharedDirector()->getWinSize().width/2,CCDirector::sharedDirector()->getWinSize().height - 50));

            // Start the GameScene stepping
            schedule(schedule_selector(GameScene::step));

            // Enable the touch events
            setTouchEnabled(true);
            // Enable accelerometer events
            setAccelerometerEnabled(true);

            // Start the game
            startGame();

    bRet = true;
} while (0);

return bRet;
} 
```

此代码来自：[https ://code.google.com/p/tweejump-cocos2dx/source/browse/trunk/Classes/GameScene.cpp](https://code.google.com/p/tweejump-cocos2dx/source/browse/trunk/Classes/GameScene.cpp)

这是一款开源游戏。

我知道 bRet 代表布尔返回值，但我对一些事情感到困惑......我对此感到困惑的一个原因是为什么还要像这样的程序？其次，当 bRet == false 是否等于 0 时，while 循环如何知道......我错过了什么吗？

我的另一个问题是你怎么知道何时使用语法 CCdataType* varName = ..., vs. CCdataType *pVarName = ... 我知道第二个是指针，但也许我错过了一些东西......我不明白其中的区别。第一个是尊重声明吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T23:52:39.743

您的示例错过了解释一切的基本部分 - 代码中的真正逻辑。我不是 Cocos 方面的专家，但据我所知，它通常是这样使用的：

```
bool bRet = false;
do 
{
    CC_BREAK_IF(!conditionA); // same as  if (!conditionA) break;
    ... some code which possibly sets bRet
    CC_BREAK_IF(!conditionB);        
    ... some other code which possibly sets bRet
    CC_BREAK_IF(!conditionC);        
    ... some other code which possibly sets bRet
    bRet = true;
} while (0);
return bRet; 
```

在这种情况下，它允许代码跳转到 return 语句，而无需求助于`goto`，或嵌套一堆`if`语句。将其与此进行比较：

```
bool bRet = false;
if (conditionA); 
{
    ... some code which possibly sets bRet
    if (conditionB)
    {
        ... some other code which possibly sets bRet
        if (conditionC);        
        {
            ... some other code which possibly sets bRet
        }
    }
}
bRet = true;

return bRet; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T23:59:16.553

我[在 Cocos2d-x 论坛上找到了理由](http://www.cocos2d-x.org/boards/6/topics/16774)。

以前，Cocos2d-x 的开发人员编写了管理它的代码，使用 s 进行清理`goto`：

```
#define check(ret)  if(!ret) goto cleanup;

void func()
{
  bool bRet = false;

  bRet = doSomething();
  check(bRet);
  bRet = doSomethingElse();
  check(bRet);

  bRet = true;

cleanup:
  // Do clean up here

  return bRet;
} 
```

如您所见，如果在此过程中出现任何问题，这是在函数末尾跳转到清理的一种非常讨厌的方式。对函数的每次调用都会返回是否成功。然后`check`宏用于查看是否`bRet`为真，如果不是，则直接跳转到`cleanup`标签。

然后他决定把 s 去掉，`goto`改成`break`from`do while`循环：

```
#define CC_BREAK_IF(cond)  if(!cond) break;

void func()
{
  bool bRet = false;

  do {
    bRet = doSomething();
    CC_BREAK_IF(bRet);
    bRet = doSomethingElse();
    CC_BREAK_IF(bRet);

    bRet = true;
  } while (0);

  // Do clean up here

  return bRet;
} 
```

这具有完全相同的效果。它只是`break`用作一种在循环`goto`后跳转到代码的机制。`do while`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T00:06:53.533

没有意义，这只是糟糕的风格。整个方法可以（并且应该）重写为：

```
bool GameScene::init()
{
    CCLog("GameScene::init");

    if (!CCLayer::init())
        return false;

    // Initialize the parent - gets the sprite sheet loaded, sets the background and inits the clouds
    MainScene::init();

    // … lots of scene setup code here ...

    return true;
} 
```

我已经看到引擎运行其主循环的类似代码，但在这种情况下，它将是一个无限循环：

```
do
{
    // run game loop as fast as it can

    // end the game
    if (userQuits)
        break;
} while(true); 
```

即使您需要额外的范围，例如为了避免局部变量的名称冲突，一对额外的大括号就足够了。像这样：

```
{
    int x = 10;
    // do stuff
}
{
    int x = 234; // this x is in its own scope
    // do other stuff
} 
```

# java - Jung Java Graph如何在视图中设置顶点ID

> ID：15350729
> 
> 赞同：0
> 
> 时间：2013-03-11T23:45:21.200
> 
> 标签：java, graph, jung

我使用 Jung Java 库来创建简单的图形。我想在视图中显示顶点的 id，但现在我只渲染了一个没有这个的图形。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:43:17.000

[http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/visualization/PluggableRenderContext.html#setVertexLabelTransformer(org.apache.commons.collections15.Transformer)](http://jung.sourceforge.net/doc/api/edu/uci/ics/jung/visualization/PluggableRenderContext.html#setVertexLabelTransformer(org.apache.commons.collections15.Transformer))

并提供一个从您的 Vertex 类中提取其名称的 Transformer。

# asp.net - ASP.NET MVC 4 数据库错误

> ID：15350732
> 
> 赞同：0
> 
> 时间：2013-03-11T23:45:45.837
> 
> 标签：asp.net, sql, asp.net-mvc-4

我已将我的网站发布到虚拟主机，但我有一些严重的数据库问题。这是我的错误

```
Description: An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately. 

Parser Error Message: The connection name 'LocalSqlServer' was not found in the applications configuration or the connection string is empty.

Line 255:            <providers>
Line 256:                <add name="AspNetSqlMembershipProvider"
Line 257:                    type="System.Web.Security.SqlMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
Line 258:                    connectionStringName="LocalSqlServer"
Line 259:                    enablePasswordRetrieval="false"
Source File: C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\machine.config    Line: 257 
```

这是到我的主机的连接字符串：

```
<connectionStrings>
    <remove name="LocalSqlServer" />
    <add name="SiteSqlServer" connectionString="Server=(localhost);Database=ulprojec_******-***;uid=ulprojec_***;pwd=********a;" />   

</connectionStrings> 
```

这是我从微软网站获得的会员连接字符串，但它仍然使第一个错误发生：

```
<membership defaultProvider="SiteSqlServer"
      userIsOnlineTimeWindow="15">
      <providers>
        <add 
          name="SiteSqlServer" 
          type="System.Web.Security.SqlMembershipProvider" 
          connectionStringName="SiteSqlServer"
          applicationName="georgi-it"
          enablePasswordRetrieval="false"
          enablePasswordReset="true"
          requiresQuestionAndAnswer="true"
          requiresUniqueEmail="false"
          passwordFormat="Hashed"
          maxInvalidPasswordAttempts="5"
          passwordAttemptWindow="10" />
      </providers>
    </membership> 
```

我真的真的很感激任何帮助，因为我已经绝望了。

**编辑：我整理了这个**

我现在有这个问题：

```
Exception Details: System.ArgumentException: Invalid value for key 'attachdbfilename'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:02:48.020

好吧，如果错误是您收到的错误，这意味着您在以下部分中使用了连接字符串“LocalSqlServer”：

```
<providers>
Line 256:                <add name="AspNetSqlMembershipProvider"
Line 257:                    type="System.Web.Security.SqlMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"
**Line 258:                    connectionStringName="LocalSqlServer"**
Line 259:                    enablePasswordRetrieval="false" 
```

在这里，您正在删除连接字符串。

```
<connectionStrings>
    **<remove name="LocalSqlServer" />**
    <add name="SiteSqlServer" connectionString="Server=(localhost);Database=ulprojec_******-***;uid=ulprojec_***;pwd=********a;" />   

</connectionStrings> 
```

我认为您可以看到连接字符串存在简单的命名问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-29T12:58:59.393

如果您不使用成员资格功能，请从根 web.cofig 文件的 system.web 部分中删除成员资格、配置文件和角色管理器标签。这帮助我解决了这个问题。

# ruby-on-rails - 带有 has_many 关联的 Rails 3 查询

> ID：15350735
> 
> 赞同：3
> 
> 时间：2013-03-11T23:45:57.873
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我有以下型号`recommendations`：`ratings`和`product`。一个`product` `has_many` `recommendations`，一个`recommendation` `has_many` `products`，一个`recommendation` `has_many` `ratings`和`rating` `belongs_to`一个`recommendation`。
我目前正在使用以下查询来查找索引中的所有记录：

```
@recommendations = Recommendation.find(:all, :joins => :products, :conditions => ["product_id = ? AND rating_set = ?", (params["product_id"]), (params["rating_set_id"])]) 
```

为了获得每条记录的推荐评级，我认为我有另一个范围。

我要设置什么`@recommendatons`来取回由特定`product_id`and找到的所有推荐和评级`rating_set`？

我试过了：

```
 Recommendation.find(:all, :joins => :products,:include => :ratings, :conditions => ["product_id = ? AND rating_set = ?",2086981,40]).each do |rec|
puts rec.rating
end 
```

哪个被打印出来了`Nil`。

**更新模型：**

产品

```
class Product < ActiveRecord::Base  
  has_many :product_recommendations, :dependent => :destroy
  has_many :recommendations, :through => :product_recommendations
end 
```

推荐

```
class Recommendation < ActiveRecord::Base
  has_many :product_recommendations, :dependent => :destroy
  has_many :products, :through => :product_recommendations
  has_many :ratings
end 
```

评分：

```
class Rating < ActiveRecord::Base
  belongs_to :recommendation  
end 
```

这是我需要的结果（这仅在创建评级时才有效，这就是我不能使用它的原因）：

```
@recommendations = Rating.find(:all, :conditions => ["product_id = ? AND rating_set = ?", (params["product_id"]), (params["rating_set_id"])]) 
```

我在查询什么：我需要找到 product_id 和 rating_set = 的所有推荐？，？并鉴于此，找到属于这些建议中的每一个的所有评级。

**更新**

我可以使用以下查询取回属于推荐的所有评分： `Recommendation.joins(:product_recommendations).includes(:ratings).where(:product_recommendations => { :rating_set => 48, :product_id => 2144877 })` 当我遍历返回的评分数组时，它们的范围不限于正确的 rating_set，而是我得到所有 rating_set 的所有评分属于具体建议。如何获取每个推荐和 rating_set 的一系列评分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:22:17.533

您的数据模型是否真的如您所描述的那样？您最初的描述似乎表明这都是父->子（一对多）关系。产品具有一对多的推荐和推荐具有一对多的评级

这意味着这样的表结构：

```
products table
:id

recommendations table
:id
:product_id

ratings table
:id
:recommendation_id 
```

但是，您发布的所有生成的 SQL 查询似乎都显示了某种名为`product_recommendations`. 那是什么？您实际上是否在产品和推荐之间使用名为 的连接表建立了多对多关系`product_recommendations`？

如果是这样，我会说您的查询应该可以工作，但您需要通过定义字段而不是产品和推荐模型来`has_many`帮助`belongs_to`Rails `has_and_belongs_to_many`。

看看这是否有帮助[http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association](http://guides.rubyonrails.org/association_basics.html#the-has_and_belongs_to_many-association)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:00:54.570

尝试这个，

```
recommendations = Recommendation.joins(:product).includes(:ratings).where(:product_id => 2086981, :rating_set => 40).all
recommendations.each do |rec|
  puts rec.ratings # this will return an array of ratings if this recommendation has ratings.
end 
```

我认为您的`:joins => :products`应该是单数：`:joins => :product`并且您的`:include`应该是`:includes`.

**编辑：**

与发布的新模型代码中的关系匹配的新查询：

```
recommendations = Recommendation.joins(:products, :product_recommendations).includes(:ratings).where(:products => { :id => 2086981 }, : product_recommendations => { :rating_set => 40 }).all
recommendations.each do |rec|
  puts rec.ratings # this will return an array of ratings if this recommendation has ratings.
end 
```

# c# - 创建一个运行无限循环的 Windows 服务

> ID：15350736
> 
> 赞同：0
> 
> 时间：2013-03-11T23:46:06.930
> 
> 标签：c#, windows-services

我只使用 MVC4 进行 Web 开发，所以我并没有真正使用过 Windows 服务。我正在尝试创建一个服务，该服务将每 5 秒查询一次我的数据库并检查特定结果。如果结果出现然后运行我的自定义代码。我最初尝试使用 Timer 类在我的 Global.asax 文件中执行此操作，但我发现这是一种不好的做法：

```
var timer = new Timer(5000);
timer.Elapsed += new ElapsedEventHandler(Callback);
timer.Interval = 5000;
timer.Enabled = true; 
```

有人告诉我，Windows 服务最适合解决这个问题。那里有任何教程或代码片段吗？

更新：

对不起，我意识到那是模糊的。

我只是在寻找最好的方法来检查我的数据库，看看我的任何记录是否已经达到他们的“结束时间”（想象一下创建一个拍卖并为其设置一个结束时间，所以当拍卖结束时我可以发送一封电子邮件通知用户）。我在 global.asax 中使用 Timer 进行了尝试，但我知道这样做有很多问题，所以另一个用户建议我创建一个 Windows 服务，对吗？如果是这样，我在哪里可以开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:29:50.010

我不确定您要达到的复杂程度，但这是一个简单的模板，您可以使用它看看会发生什么：

```
using System;
using System.ServiceModel;
using System.ServiceProcess;

namespace MyService
{
   public class MyWindowsService:ServiceBase
   {
    public ServiceHost serviceHost = null;

    private static System.Timers.Timer scheduledTimer;

    public MyWindowsService()
    {
        ServiceName = "MyService";
        //Additional Initilizing code.
    }

    public static void Main()
    {
        ServiceBase.Run(new MyWindowsService());
    }

    protected override void OnStart(string[] args)
    {
        scheduledTimer = new System.Timers.Timer();
        scheduledTimer.AutoReset = true;
        scheduledTimer.Enabled = true;
        scheduledTimer.Interval = 5000;
        scheduledTimer.Elapsed += new System.Timers.ElapsedEventHandler(scheduledTimer_Elapsed);
        scheduledTimer.Start();
    }

    void scheduledTimer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        //DO CHECK.
    }

    protected override void OnStop()
    {
        if (scheduledTimer != null)
        {
            scheduledTimer.Stop();
            scheduledTimer.Elapsed -= scheduledTimer_Elapsed;
            scheduledTimer.Dispose();
            scheduledTimer = null;
        }
    }

    private void InitializeComponent()
    {
        this.ServiceName = "MyService";
    }
} 
```

# kineticjs - 使用 kinetic.js 在比例图上绘制点

> ID：15350738
> 
> 赞同：1
> 
> 时间：2013-03-11T23:46:11.150
> 
> 标签：kineticjs

在此处查看[jsfiddle 示例](http://jsfiddle.net/tigz_uk/B8UDq/1/)

我正在尝试放大图表并在其周围平移，然后在图表上的特定位置放置一个大头针，但我不确定动力学缩放是如何工作的。当我需要计算相对于观察口的下降坐标时，这是一个问题。

该演示在 scale = 1 时运行良好，但是当您使用滚轮鼠标滚动或滚动时，引脚会掉到错误的位置。

不正确的功能是这个：

```
function getRelativePos(shape,stage) {
    var mousePos = stage.getUserPosition();
    var pos = shape.getAbsolutePosition();
    var size = shape.getSize();
    var scale = shape.getScale();

    var x = (mousePos.x - pos.x) * scale.x ;
    var y = (mousePos.y - pos.y) * scale.y ;
    return {
        x:x,
        y:y
    };    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:38:16.323

我固定的功能：

```
function getRelativePos(shape,stage) {
    var mousePos = stage.getUserPosition();
    var pos = shape.getAbsolutePosition();
    var scale = shape.getScale();

       // return relative mouse position
    var x = (mousePos.x - pos.x) / scale.x ;
    var y = (mousePos.y - pos.y) / scale.y ;
    return {
        x:x,
        y:y
    };    
} 
```

示例[http://jsfiddle.net/lavrton/B8UDq/4/](http://jsfiddle.net/lavrton/B8UDq/4/)

# javascript - 使用“$”替换会产生奇怪的结果

> ID：15350739
> 
> 赞同：3
> 
> 时间：2013-03-11T23:46:13.453
> 
> 标签：javascript

我正在尝试替换一些文本，例如：

`I need the %r for the bike.`

Where`%r`被另一个值替换。

可以说我替换`%r`为`$$$$`.

```
var text = 'I need the %r for the bike.';

return text.replace("%r", "$$$$"); 
```

而不是得到预期的结果：

`I need the $$$$ for the bike.`

我得到：

`I need the $$ for the bike.`

我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:47:25.480

`$`是替换中的特殊字符，因为您需要在结果`$$`中获得一个结果`$`符号。你需要额外的`$`字符才能得到你想要的。有关详细信息，请参阅[MDN 参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)`.replace()`。

替换字符串中的各种特殊序列是：

```
$$ - Inserts a "$"
$& - Insert the matched substring
$` - Inserts the portion of the string that precedes the matched substring
$' - Inserts the portion of the string that follows the matched substring
$n - Where n or nn are decimal digits, inserts the nth parenthesized submatch string, provided the first argument was a RegExp object. 
```

# objective-c - 绑定 #define 用作常量

> ID：15350740
> 
> 赞同：1
> 
> 时间：2013-03-11T23:46:14.623
> 
> 标签：objective-c, binding, xamarin.ios

我试图绑定的代码在 .h 文件之一中放置了一个非常重要的键：

```
#define xAppKey @"REPLACE_WITH_YOUR_APP_KEY" 
```

然后在整个 ObjC 代码中重用该值。我怀疑在绑定过程中，这个值没有通过。基于 SO 上的其他一些线程，至少似乎是这样。我的问题可能是其他问题，还是有可能在包装代码中没有兑现这个值？

很抱歉，如果我的 Objective-C 术语不正确，我对此一无所知。

**编辑**

我只是想澄清什么可能不明显。通过“绑定”，我指的是将其绑定到作为本机库的 monotouch。如果这已经很清楚了，请继续...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T23:54:27.170

xAppKey 是一个宏。它根本不会被束缚。相反。在预编译时，它将被替换为`@"REPLACE_WITH_YOUR_APP_KEY"`然后编译，就好像这个字符串一直在重复一样。

正是出于这个原因，一些专家建议用常量字符串替换它们。这些专家可能是对的。但是，我喜欢#define。

正是出于这个原因，您不应该在#define 语句中添加任何注释。

```
#define xAppKey @"REPLACE_WITH_YOUR_APP_KEY" // This is the application key 
```

这样的事情几乎肯定会导致编译时错误，这可能很难理解。例子：

```
NSLog (@"%@", xAppKey); 
```

没有注释也可以正常工作，因为它将被转换为：

```
NSLog (@"%@", @"REPLACE_WITH_YOUR_APP_KEY"); 
```

但随着评论，它将被转换为：

```
NSLog (@"%@", @"REPLACE_WITH_YOUR_APP_KEY" // This is the application key); 
```

这不会编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T09:05:20.413

`#define`在 Obj-C 中包含a的`.h`目的是允许它被利用该库的应用程序替换。在这种情况下，您的 (Obj-C) 库可能仅作为源分发。

但是您想为它创建 (Xamarin.iOS) 绑定。所以你需要**编译**这个库，编译会`xApiKey`一劳永逸地修复它的值。

您的目标可能是`xApiKey`通过 Xamarin.iOS 将其公开给消费应用程序。您必须修改`Obj-C`库以使用属性而不是常量，然后通过绑定（静态）属性访问器`Xamarin.iOS`

# java - 如何将方法变成类？

> ID：15350741
> 
> 赞同：0
> 
> 时间：2013-03-11T23:46:33.490
> 
> 标签：java, class, methods

我是新来的。我正在学习 Java 中的一个更大的类，并从中创建更小的类。这是我要放入类中的代码的第一部分：

```
 public void initializeMainScreen() {
    final Display display = getWindowManager().getDefaultDisplay();
    int CAMERA_WIDTH = display.getWidth();
    int CAMERA_HEIGHT = display.getHeight();

    mainScreen = new ArrayList<Sprite>();

    BitmapTextureAtlas tempTexture = new BitmapTextureAtlas(512, 256,
            TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    TextureRegion tempTextureRegion = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(tempTexture, this, "gfx/gametitle.png", 0,
                    0);
    mEngine.getTextureManager().loadTexture(tempTexture);

 Sprite tempSprite = new Sprite(getCenter(CAMERA_WIDTH, tempTextureRegion
         .getWidth()), getCenter(CAMERA_HEIGHT, 4 * tempTextureRegion
                 .getHeight() + 20), tempTextureRegion);
    UISprite us = new UISprite(CAMERA_WIDTH, CAMERA_HEIGHT, tempSprite);

 us.width = 0.5f;
    us.height = 1/5f;
 us.leftMargin = 0.26f;
 us.topMargin = 0.01f;
    us.SetProperties();

    mainScreen.add(us.sprite); 
```

我把它改成这样：

```
public class MenuScreen extends GameActivity {

ArrayList<Sprite> mainScreen;
public Sprite sprite;

public void initializeMainScreen() {
    final Display display = getWindowManager().getDefaultDisplay();
    int CAMERA_WIDTH = display.getWidth();
    int CAMERA_HEIGHT = display.getHeight();

    mainScreen = new ArrayList<Sprite>();

    BitmapTextureAtlas tempTexture = new BitmapTextureAtlas(512, 256,
            TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    TextureRegion tempTextureRegion = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(tempTexture, this, "gfx/gametitle.png", 0, 
                    0);
    mEngine.getTextureManager().loadTexture(tempTexture);

 Sprite tempSprite = new Sprite(getCenter(CAMERA_WIDTH, tempTextureRegion
         .getWidth()), getCenter(CAMERA_HEIGHT, 4 * tempTextureRegion
                 .getHeight() + 20), tempTextureRegion);
    UISprite us = new UISprite(CAMERA_WIDTH, CAMERA_HEIGHT, tempSprite);

 us.width = 0.5f;
    us.height = 1/5f;
 us.leftMargin = 0.26f;
 us.topMargin = 0.01f;
    us.SetProperties();

    mainScreen.add(us.sprite); 
```

一切都解决了，但我在 GameActivity.java 中遇到一个错误，告诉我“对于 GameActivity 类型，方法 initializeMainScreen() 是未定义的。” 当我已经导入 GameActivity 并扩展它时。还有什么我需要做的吗？

我想将其余代码放入其中并没有什么坏处，但它直接来自 GameActivity.java

```
public void initializeMainScreen() {
    final Display display = getWindowManager().getDefaultDisplay();
    int CAMERA_WIDTH = display.getWidth();
    int CAMERA_HEIGHT = display.getHeight();

    mainScreen = new ArrayList<Sprite>();

    BitmapTextureAtlas tempTexture = new BitmapTextureAtlas(512, 256,
            TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    TextureRegion tempTextureRegion = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(tempTexture, this, "gfx/gametitle.png", 0, 
                    0);
    mEngine.getTextureManager().loadTexture(tempTexture);

 Sprite tempSprite = new Sprite(getCenter(CAMERA_WIDTH, tempTextureRegion
         .getWidth()), getCenter(CAMERA_HEIGHT, 4 * tempTextureRegion
                 .getHeight() + 20), tempTextureRegion);
    UISprite us = new UISprite(CAMERA_WIDTH, CAMERA_HEIGHT, tempSprite);

 us.width = 0.5f;
    us.height = 1/5f;
 us.leftMargin = 0.26f;
 us.topMargin = 0.01f;
    us.SetProperties();

    mainScreen.add(us.sprite);

    tempTexture = new BitmapTextureAtlas(512, 256,
            TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    tempTextureRegion = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(tempTexture, this, "gfx/logo.png", 0, 0); 
    mEngine.getTextureManager().loadTexture(tempTexture);

    tempSprite = new Sprite(CAMERA_WIDTH - tempTextureRegion.getWidth()
            - 10, CAMERA_HEIGHT - tempTextureRegion.getHeight() + 5,
            tempTextureRegion) {
        @Override
        public boolean onAreaTouched(final TouchEvent t, final float x, 
                final float y) {
            if (t.isActionDown()) {
                unloadScreen(mainScreen);
                loadScreen(aboutScreen);
                currentScreenID = ABOUT_SCREEN_ID;
                return true;
            }
            return false;
        }
    };

    us = new UISprite(CAMERA_WIDTH, CAMERA_HEIGHT, tempSprite);

    us.width = 0.2f;
    us.height = 1/9f;
    us.bottomMargin = 0.0f;
    us.rightMargin = 0.0f;
    us.SetProperties();

    mainScreen.add(us.sprite);

    StackPanel sp = new StackPanel(CAMERA_WIDTH, CAMERA_HEIGHT);        

    tempTexture = new BitmapTextureAtlas(512, 256,
            TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    tempTextureRegion = BitmapTextureAtlasTextureRegionFactory
         .createFromAsset(tempTexture, this, "gfx/newgamebutton.png", 0, 
                    0);
    mEngine.getTextureManager().loadTexture(tempTexture);

    tempSprite = new Sprite(getCenter(CAMERA_WIDTH, tempTextureRegion
            .getWidth()), getCenter(CAMERA_HEIGHT, 4 * tempTextureRegion
            .getHeight() + 20), tempTextureRegion) {
        @Override
        public boolean onAreaTouched(final TouchEvent t, final float x,
                final float y) {
            if (t.isActionDown()) {
                unloadScreen(mainScreen);

                if (chooseLevelScreen.size() > 0)  {
                    loadScreen(chooseLevelScreen.get(0));
                    currentScreenID = CHOOSELEVEL_SCREEN_ID;
                }
                return true;
            }
            return false;
     }
 };
    us = new UISprite(CAMERA_WIDTH, CAMERA_HEIGHT, tempSprite);

 us.width = 0.41f;
 us.height = 1 / 8f;
    us.bottomMargin = 0.0f;
    us.rightMargin = 0.0f;
    us.SetProperties();

    sp.AddElement(us);

    tempTexture = new BitmapTextureAtlas(512, 256,
            TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    tempTextureRegion = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(tempTexture, this, "gfx/optionsbutton.png", 0, 
                    0);
    mEngine.getTextureManager().loadTexture(tempTexture);

    tempSprite = new Sprite(getCenter(CAMERA_WIDTH, tempTextureRegion
            .getWidth()), getCenter(CAMERA_HEIGHT, 4 * tempTextureRegion
            .getHeight() + 20)
            + tempTextureRegion.getHeight() + 10, tempTextureRegion) {
        @Override
        public boolean onAreaTouched(final TouchEvent t, final float x,
                final float y) {
            if (t.isActionDown()) {
                unloadScreen(mainScreen);
                loadScreen(optionScreen);
                currentScreenID = OPTION_SCREEN_ID;
                return true;
            }
            return false;
        }
    };

    us = new UISprite(CAMERA_WIDTH, CAMERA_HEIGHT, tempSprite);

 us.width = 0.41f;
 us.height = 1 / 8f;
    us.bottomMargin = 0.0f;
    us.rightMargin = 0.0f;
    us.SetProperties();

    sp.AddElement(us);

    tempTexture = new BitmapTextureAtlas(512, 256, 
            TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    tempTextureRegion = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(tempTexture, this, "gfx/helpbutton.png", 0, 0); 
    mEngine.getTextureManager().loadTexture(tempTexture);

    tempSprite = new Sprite(getCenter(CAMERA_WIDTH, tempTextureRegion
            .getWidth()), getCenter(CAMERA_HEIGHT, 4 * tempTextureRegion
            .getHeight() + 20)
            + 2 * tempTextureRegion.getHeight() + 20, tempTextureRegion) {
        @Override
        public boolean onAreaTouched(final TouchEvent t, final float x,
                final float y) {
            if (t.isActionDown()) {
                unloadScreen(mainScreen);
                mScene.setBackground(new ColorBackground(0, 0, 0));
                loadScreen(helpScreen);
                currentScreenID = HELP_SCREEN_ID;
                return true;
            }
            return false;
        }
    };

    us = new UISprite(CAMERA_WIDTH, CAMERA_HEIGHT, tempSprite);

 us.width = 0.41f;
 us.height = 1 / 8f;
    us.bottomMargin = 0.0f;
    us.rightMargin = 0.0f;
    us.SetProperties();

    sp.AddElement(us);

    tempTexture = new BitmapTextureAtlas(512, 256,
            TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    tempTextureRegion = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(tempTexture, this, "gfx/quitbutton.png", 0, 0); 
    mEngine.getTextureManager().loadTexture(tempTexture);

    tempSprite = new Sprite(getCenter(CAMERA_WIDTH, tempTextureRegion
            .getWidth()), getCenter(CAMERA_HEIGHT, 4 * tempTextureRegion
            .getHeight() + 20)
            + 3 * tempTextureRegion.getHeight() + 30, tempTextureRegion) {
        @Override
        public boolean onAreaTouched(final TouchEvent t, final float x,
                final float y) {
            if (t.isActionDown()) {
                finish();
                return true;
            }
            return false;
        }
    };

    us = new UISprite(CAMERA_WIDTH, CAMERA_HEIGHT, tempSprite);

 us.width = 0.41f;
 us.height = 1 / 8f;
    us.bottomMargin = 0.0f;
    us.rightMargin = 0.0f;
    us.SetProperties();

    sp.AddElement(us);

    for (UIElement element : sp.elements) {
        mainScreen.add(((UISprite)element).sprite);
    }
} 
```

}

GameActivity.java 很大，很难在这里粘贴

```
public class GameActivity extends LayoutGameActivity implements
    IOnSceneTouchListener, IAccelerometerListener {
// ===========================================================
// Constants
// ===========================================================
public static final short CATEGORYBIT_NO = 0;
public static final short CATEGORYBIT_WALL = 1;
public static final short CATEGORYBIT_BOX = 2;
public static final short CATEGORYBIT_CIRCLE = 4;
public static final short MASKBITS_WALL = CATEGORYBIT_WALL
        + CATEGORYBIT_BOX + CATEGORYBIT_CIRCLE;
public static final short MASKBITS_BOX = CATEGORYBIT_WALL + CATEGORYBIT_BOX; // Missing:
// CATEGORYBIT_CIRCLE
public static final short MASKBITS_CIRCLE = CATEGORYBIT_WALL
        + CATEGORYBIT_CIRCLE; // Missing: CATEGORYBIT_BOX
public static final short MASKBITS_NOTHING = 0; // Missing: all
public static final short MASKBITS_ONLY_WALL = CATEGORYBIT_WALL; // Missing:
// all
// but
// wall
public static final FixtureDef WALL_FIXTURE_DEF = PhysicsFactory
        .createFixtureDef(0, 0.5f, 0.8f, false, CATEGORYBIT_WALL,
                MASKBITS_WALL, (short) 0);
public static final FixtureDef BOX_FIXTURE_DEF = PhysicsFactory
        .createFixtureDef(1, 0.5f, 0.5f, false, CATEGORYBIT_BOX,
                MASKBITS_BOX, (short) 0);
public static final FixtureDef CIRCLE_FIXTURE_DEF = PhysicsFactory
        .createFixtureDef(1, 0.5f, 0.5f, false, CATEGORYBIT_CIRCLE,
                MASKBITS_CIRCLE, (short) 0);
public static final FixtureDef NO_FIXTURE_DEF = PhysicsFactory
        .createFixtureDef(1, 0.5f, 0.5f, false, CATEGORYBIT_NO,
                MASKBITS_NOTHING, (short) 0);
public static final FixtureDef ONLY_WALL_FIXTURE_DEF = PhysicsFactory
        .createFixtureDef(1, 0.2f, 1f, false, CATEGORYBIT_CIRCLE,
                MASKBITS_ONLY_WALL, (short) -1);

public static final int NOSCREEN = 0;
public static final int MAIN_SCREEN_ID = 1;
public static final int OPTION_SCREEN_ID = 2;
public static final int HELP_SCREEN_ID = 3;
public static final int ABOUT_SCREEN_ID = 4;
public static final int CHOOSELEVEL_SCREEN_ID = 5;
public static final int PAUSE_SCREEN_ID = 6;
public static final int LOADING_SCREEN_ID = 7; 
```

[如果有帮助，这里](https://github.com/sebnil/Sketchy-Truck/blob/master/src/se/treplex/sketchytruck/GameActivity.java)的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:18:52.217

对于你的问题：

```
How do I turn a method into a class?

1) Create a new class.
2) Copy the method from the old class into the constructor of the new class
3) Create a getter for the return value. 
```

例子：

```
class OldClass {
    OldClass() {
    }

    int methodToBeAClass(int x) {
        x++;
        return x;
    }
}

class MethodToBeAClass {
    int result;

    MethodToBeAClass(int x) {
        x++;
        result = x;
    }

    int getResult() {
        return result;
    }
} 
```

用法：

```
 final MethodToBeAClass methodToBeAClass = new MethodToBeAClass(1);
    final int x = methodToBeAClass.getResult(); 
```

# c++ - 创建单链表时正确设置指针的问题

> ID：15350745
> 
> 赞同：1
> 
> 时间：2013-03-11T23:46:55.590
> 
> 标签：c++, pointers, linked-list, singly-linked-list

```
struct Number_Node
{
    int number;
    struct Number_Node* next_number;
};

int counter=0;

int main()
{
    int input=0;
    Number_Node* n;
    Number_Node* h;
    Number_Node* t;
    do
    {
        cout << "Enter Number: ";
        cin >> input;
        n = new Number_Node;
        n->number=input;
        t=n;
        if(counter==0)
        {
            h=n;
            counter++;
        }
        t->next_number=n;
        t=t->next_number;
        n->next_number=NULL;

    }while(input!=-1);

    Number_Node *tmpPtr;
    tmpPtr=h;
    while(tmpPtr!=NULL)
    {
        cout << tmpPtr->number << endl;
        tmpPtr=tmpPtr->next_number;
    }
    return 0;

} 
```

这是我的代码，出于某种原因，只有第一个节点打印，然后事情结束。我在这里做错了什么？另外，将链表从低到高排序背后的想法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:52:00.457

基本上，你要做的是：

```
n = new Number_Node;
t=n;
t->next_number=n;
t=t->next_number;
n->next_number=NULL; 
```

这等于：

```
n = new Number_Node;
n->next_number=n;
n=n->next_number;
n->next_number=NULL; 
```

这意味着您永远不会`next_number`正确设置指针。您的代码应如下所示：

```
Number_Node* newNode  = NULL;
Number_Node* head     = NULL;
Number_Node* lastNode = NULL;
do
{
    // create new node:
    cout << "Enter Number: ";
    cin >> input;
    newNode = new Number_Node;
    newNode->number = input;
    newNode->next_number = NULL;

    // make last node to point to new node:
    if (lastNode)
        lastNode->next_number = newNode;

    // set the head:
    if (counter == 0)
    {
        head = newNode;
        counter++;
    }

    // store the last node:
    lastNode = newNode;

} while (input != -1); 
```

# pdf - 如何阻止 Ghostscript 和 pdfwrite 将图像分解为多个 XObject？

> ID：15350755
> 
> 赞同：0
> 
> 时间：2013-03-11T23:48:01.053
> 
> 标签：pdf, tiff, ghostscript

编辑：我做了更多的调查，可以澄清问题，我也会把原来的问题留在下面。

似乎当使用具有多个条带的 TIFF 图像数据时，pdfwrite 会生成一个输出 PDF，每个条带一个 XObject。在我的例子中，每个条带有 25 行，因此整页图像被分解为 25 像素高的图像。这会很好，除非它会产生令人不快的视觉伪影。

使用 tiffcp 将文件还原为一个大条可解决此问题，但 Acrobat Distiller 不需要此解决方法，因为它默认将图像维护为一个大 XObject。

我们可以让 Ghostscript 做同样的事情吗？

* * *

我正在尝试使用 pdfwrite 而不是 Acrobat Distiller 将 PS 文件转换为 PDF。该文件包含许多使用 GetTiff 函数调用的扫描 TIFF 图像（我认为这最初是由 Xerox 提供的）。

Distiller 的输出很好，但 pdfwrite 似乎为每个图像生成多个垂直 XObject，而不是像 Distiller 那样只生成一个。它们都以完全相同的大小出现在 PDF 中，如下所示：

```
104 0 obj
<</Subtype/Image
/ImageMask true
/Width 2550
/Height 25
/BitsPerComponent 1/Length 7975>>stream 
```

有没有办法阻止这种行为？大量放大或打印时，输出看起来不错，但在屏幕上以常规缩放比例显示图像之间的边界处会出现渲染伪影。

我只尝试了一个基本的命令行（除了-sDEVICE 和-sOutputFile 没有选项）以及各种图像选项，但到目前为止没有区别。我试过 9.05 和 8.54 版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:56:41.673

Ghostscript 不会直接使用 TIFF 文件，因此您必须使用它做其他事情。我的怀疑是，无论您使用哪种工具转换为 PostScript，该工具都会生成多个图像。我对“GetTiff”“函数”一无所知，但我怀疑这就是问题所在。为什么不简单地使用 libtiff ？

Adobe Acrobat distiller 具有“连接”连续图像的功能，如果它们具有相同的宽度和颜色空间并且是连续的。

pdfwrite 不这样做。

# c++ - c++ boost gzip 内存中二进制压缩

> ID：15350758
> 
> 赞同：0
> 
> 时间：2013-03-11T23:48:07.503
> 
> 标签：c++, boost, binary, compression, gzip

我正在尝试使用 boost iostream 和 gzip 压缩数组中的数据，这是我的代码：

```
struct String_sink  : public boost::iostreams::sink 
{
    std::string& s;
    String_sink(std::string& s):s(s){}
    std::streamsize write(const char* s, std::streamsize n) 
    {
        this->s.append(s, n);
        return n;
    }
};

boost::iostreams::stream< boost::iostreams::array_source > source ((char*)dataBitstream.GetData(), dataBitstream.GetNumberOfBytesUsed());
std::string compressed;
boost::iostreams::filtering_streambuf<boost::iostreams::input> outStream; 
outStream.push(boost::iostreams::gzip_compressor(1)); 
outStream.push(source); 
boost::iostreams::copy(outStream, String_sink(compressed)); 
```

虽然这会压缩数据，但它会将其作为文本进行。我希望它以**二进制**形式进行。原因是如果我使用标志将“dataBitstream”保存到文件中`ios_base::binary`，然后使用 gzip.exe 压缩文件，结果大小比我在代码中得到的小 50%。这两种情况我都使用“1”作为压缩级别。如果没有二进制标志，文件确实会压缩到与我在代码中看到的大小相同的大小。

所以有人知道如何将数组压缩为二进制吗？到目前为止，我已经尝试使用`std::stringstream::binary`标记的字符串流作为输入，并为调用该`read()`函数的字符串流创建一个接收器。这没有用。

是否可以强制将数组压缩为二进制数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:35:44.000

我正在看这条线：

```
outStream.push(boost::iostreams::gzip_compressor(1)); 
```

并将其与我在 Google 上搜索的有关[Boost 的 gzip 设施](http://www.boost.org/doc/libs/1_47_0/libs/iostreams/doc/classes/gzip.html)的文档进行比较。

```
basic_gzip_compressor( const gzip_params& = zlib::default_compression, 
                       std::streamsize buffer_size = default value ); 
```

因此，您将压缩值指定为 1。这是最低设置（即最小压缩量）。默认值（在普通 gzip.exe 命令行的情况下使用）是 5。尝试使用它，甚至是 9（不保证压缩更多，但可能会使用更多时间和内存）。

在这种情况下，我不认为文本与二进制文件应该有所不同。

# javascript - 使用正则表达式变量作为 普通变量 - Javascript

> ID：15350761
> 
> 赞同：1
> 
> 时间：2013-03-11T23:48:15.417
> 
> 标签：javascript, regex

```
x.innerHTML.replace(/@(.*?)/g, '<img src="'+get_data($1)+'">$1</img>') 
```

有什么方法可以将 $1 用于 get_data 函数？感谢您的建议。

### 更新

评论中明确指出，OP 还希望匹配 @word 形式的数据并专门提取单词字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:52:44.017

您可以调用`x.innerHTML.replace(rx,function)`，该函数将使用以下参数调用：

*   匹配的子串
*   1美元，2美元……
*   比赛的偏移量
*   完整的比赛

所以你可以这样做：

```
x.innerHTML.replace(/@(\S+)/g,function(string,data1){

 return '<img src="'+get_data(data1)+'">'+data1+'</img>');

}); 
```

这是[关于替换的 MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:52:18.883

这行得通吗？

```
var str = x.innerHTML.replace(/@(.*?)/g, "$1");
var img = '<img src="'+get_data(str)+'">'+str+'</img>'; 
```

# java - 比较Java中的整数

> ID：15350763
> 
> 赞同：1
> 
> 时间：2013-03-11T23:48:20.413
> 
> 标签：java, integer

如果我们有类似下面的表达式，

```
Integer x=500;
Integer y=500;

System.out.println(x==y); 
```

那么，操作的结果`x==y`将是`false`因为我们正在比较对象引用。

* * *

如果我对这两个变量有一个循环，`x`如下`y`所示，

```
Integer x=0;
Integer y=0;

for(int i=0;i<2000;i++)
{
    System.out.println((x==y)+" : "+x+++" : "+y++);
} 
```

然后，它会一直显示，直到两者的`true`值都为。在所有其他情况下（即当和的值增加时- 当这些变量的值大于 时）。`x``y``127``x``y``127``127`

那么为什么会这样呢？这种行为有什么规范吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:57:03.733

值 -128 到 +127 的整数被[缓存](https://www.owasp.org/index.php/Java_gotchas#Immutable_Objects_.2F_Wrapper_Class_Caching)在 JVM 中。

此外，这里是关于它的[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)页面。具体来说，第 5.1.7 节指出

> 如果被装箱的值 p 是真、假、一个字节或 \u0000 到 \u007f 范围内的一个字符，或者一个介于 -128 和 127（含）之间的 int 或短数字，则令 r1 和 r2 为p 的任意两个拳击转换。r1 == r2 总是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T23:49:01.727

这是原始类型装箱的情况，它是正确的。Java`Integers`使用享元模式缓存最大 128 的值。

# python - 转置多维表

> ID：15350764
> 
> 赞同：0
> 
> 时间：2013-03-11T23:48:21.933
> 
> 标签：python, pandas

我目前正在通过大量 PDF 解析我的方式，并根据它们所属的模块提取硬件地址列表。这个想法是构建一个依赖关系图，这将有助于任何未来的代码逆向。由于问题的性质非常大，我使用 pandas 作为主要的数据库 API，因为它很容易将函数应用于列。

数据库 数据库包括两个字段，即地址和模块名称（见下文）。其中每条记录详细说明了单个（且唯一）地址相对于其成员的模块的成员资格。Associate Modules 字段的类型为 List 并且可以具有不同数量的元素。但是地址只有一个值。

问题 理想情况下，使用优化的 Pandas API，如何将下面的“RawTable”转换为“依赖表”？非常感谢代码示例。

```
<Current Database>
xxxxx*[Pandas::RawTable]******
* Address * Associate Modules *
******************************
*   1000  * ["1A","2A","3A"] *
*   1001  * ["2A","4A","5A"] *
*   1002  *   ["1A", "4A"]   *
******************************

<Future Database>
******[Pandas:: DependencyTable****
* Associate Modules *   Address   *
***********************************
*     "1A"         *     1000     *
*     "1A"         *     1002     *
*     "2A"         *     1000     *
*     "2A"         *     1001     *
*     "3A"         *     1000     *
*     "4A"         *     1001     *
*     "4A"         *     1002     *
*     "5A"         *     1001     *
*********************************** 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:49:16.797

看起来模块被加载为一列列表。

```
In [1]: df = DataFrame(
        {'Address': [1000, 1001, 1002],
        'Associate Modules': [['1A', '2A', '3A'],
                              ['2A', '4A', '5A'], 
                              ['1A', '4A']]}) 
```

我首先将相关的模块拆分为单独的列。

```
In [2]: modules = df['Associate Modules'].apply(Series)
In [3]: modules.index = df['Address']
In [4]: modules
Out[4]: 
          0   1    2
Address             
1000     1A  2A   3A
1001     2A  4A   5A
1002     1A  4A  NaN 
```

然后堆叠 DataFrame，并删除我们的虚拟列索引。

```
In [5]: result = modules.stack()
In [6]: result.index = result.index.get_level_values(0)

In [7]: result
Out[7]: 
Address
1000       1A
1000       2A
1000       3A
1001       2A
1001       4A
1001       5A
1002       1A
1002       4A 
```

如果您希望 Address 作为适当的列而不是索引，请使用该`reset_index()`方法。可能有一种更时尚的方式，但不是太丑陋。

# android - Android：显示没有上下文的弹出窗口

> ID：15350765
> 
> 赞同：0
> 
> 时间：2013-03-11T23:48:27.763
> 
> 标签：android, cocos2d-x, cocos2d-android

我有一个最近发布的 Android 游戏（内置于 cocos2dx），Google 通知我启动崩溃，但有以下异常：

```
java.lang.ExceptionInInitializerError
    at java.lang.Class.newInstanceImpl(Native Method)
    at java.lang.Class.newInstance(Class.java:1409)
    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3683)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
    at dalvik.system.NativeStart.main(Native Method)
    Caused by: java.lang.UnsatisfiedLinkError: Couldn't load game: findLibrary returned null
    at java.lang.Runtime.loadLibrary(Runtime.java:429)
    at java.lang.System.loadLibrary(System.java:554)
    ... 
```

它似乎发生在这种方法中：

```
static {
    System.loadLibrary("game");
} 
```

我做了一些研究，这似乎是由许多问题造成的，甚至应用程序在安装过程中以某种方式损坏。我想向用户显示一个对话框并要求他们重新下载该应用程序。我可以在 System.loadLibrary 调用周围放置一个 try/catch，但不确定如何在没有上下文的情况下执行任何操作。我认为我还没有一个，因为在我的主要活动中调用 onCreate() 之前调用了它。

关于如何通知用户尝试重新下载的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:01:39.060

为`Activity`您的`dialog`. 在你`manifest`的那个`Activity`指定

```
android:theme="@android:style/Theme.Dialog" 
```

这将使您`Activity`有一个外观`Dialog`但给您更多的灵活性。您可以在此使用[AlertDialog.Builder](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)`Activity`来显示您`Dialog`然后从那里做任何您需要做的事情。你需要`Context`一个`Dialog`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-26T22:11:37.283

当我更改库名称时，我遇到了同样的问题。我猜你是在 NDK 下编程。所以在你的`CMakeLists.txt`文件中检查你是否有这样的：

```
cmake_minimum_required(VERSION 3.4.1)
project(project_name)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11 -Wall")
...
add_library(*game* SHARED gl_code.cpp)
...
target_link_libraries(*game* ...) 
```

PS：没有'*'

PS2：我不知道 cocos2dx，但我在他们的页面上看到它是 C++，所以你是在本地编程，这个错误`loadLibrary`意味着 Java 找不到模块“游戏”。

# java - 嗨，我如何在数组中找到值和位置

> ID：15350766
> 
> 赞同：0
> 
> 时间：2013-03-11T23:48:35.860
> 
> 标签：java, arrays, matrix

到目前为止我有这段代码，它打印了值，但我似乎想不出一种方法来获得位置..

```
public static ArrayList defineSeq(){

  for(int i=0; i<sparseRix.length; i++){
    for(int j=0; j<sparseRix.length; j++){

      int value =sparseRix[i][j];
      int postion // What do i do here to get the postion

      System.out.println("Value is " +value +"position" is +position);  
    }
  }
  return arrayList;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:52:19.970

`i`一起`j`是你的立场。要么使用一个数组来返回它，要么使用原始数组的宽度来生成一个值，比如`i*width + j`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T17:27:31.547

由于您从 2D 数组开始，您可能无法使用 1D 位置来定位值。

你最好的选择应该是使用“结构”，称之为位置。然后您可以使用 position.i 和 position.j 变量定位元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T23:53:28.100

i*sparseRix.length+j 如果左上角是第 0 个位置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T00:04:29.753

如果按位置表示每个值的行和列

```
 System.out.printf("Value is %s, in row %s and column %s \n", value, i, j); 
```

或者，如果您的意思是第一、第二等位置。

```
 System.out.printf("Value is %s, in position %sth \n", value, i*sparseRix.length+j); 
```

如上所述...

# delphi - Indy 的 telnet 组件可以浏览和下载文件吗？

> ID：15350768
> 
> 赞同：0
> 
> 时间：2013-03-11T23:48:45.490
> 
> 标签：delphi, telnet, indy

TIdTelnet (Indy10) 可以执行以下操作吗？

*   CD通过导演
*   LS 目录
*   下载文件
*   通过“安全外壳”登录？

我在许多问题中看到 TIdTelnet 非常专业，可能并不总是适合使用的组件。但是，作为参考，**我需要为我的软件编写代码以使用的服务器**似乎与流行的 SSH 客户端兼容。

据我从谷歌得知，我应该只需要将 TidTelnet 附加到一个 SSH 处理程序（但显然没有很多替代方案），那么 TidTelnet 应该适用于上述情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T00:29:45.700

不，Telnet 绝不是一种文件传输协议。

它在某些仍支持 telnet 的设备上为您提供未加密的远程 shell。大多数运行 Linux 等的真实主机只提供带有 ssh 的远程 shell。

使用 ssh+sftp 或 FTP 或其他协议（例如 http+WebDAV）导航远程文件系统

Telnet 没有文件传输功能。你为什么不自己看一个 TidTelnet 代码并不难读。

Indy 库有很多组件，我无法猜测您为什么会关注 Telnet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T01:14:37.493

Telnet 本身不进行文件传输，但您可以通过 telnet 运行 x、y 或 zmodem 之类的东西来传输文件：

`xmodem -s passwords.txt`

虽然它不是很有用。

*   要查找文件，您必须`ls`手动解析结果。
*   您首先需要禁用 telnet 连接的转义命令；否则，如果文件中包含错误的字符，它将破坏您的连接。:)
*   都是未加密的

只使用用于处理文件的协议可能是一个更好的主意：

*   桑巴
*   [SFTP（SSH 文件传输协议）](http://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol)
*   基于 HTTPS 的 WebDAV

因此，总而言之，Telnet 可能不是您要在此处使用的协议。

# c++ - 从 std::stringstream 中提取整个 std::string

> ID：15350771
> 
> 赞同：0
> 
> 时间：2013-03-11T23:48:56.040
> 
> 标签：c++

请考虑以下代码：

```
std::stringstream test;
test << std::string("This is a test.");
std::string str;
test >> str;
std::cout << "\"" << str << "\"" << std::endl; 
```

这仅输出字符串“This”，而不是“This is a test”。

为什么会这样，我怎样才能得到整个字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T23:50:04.023

[`std::stringstream::str`](http://en.cppreference.com/w/cpp/io/basic_stringstream/str)：

```
std::string str = test.str(); 
```

# sql - 在预期条件的上下文中指定的非布尔类型的表达式

> ID：15350774
> 
> 赞同：1
> 
> 时间：2013-03-11T23:49:06.483
> 
> 标签：sql, wpf, database, visual-studio-2010

在上下文中指定的非布尔类型的表达式，当我将鼠标悬停在顶行时预期条件见图像：

[sql图片问题](http://i.stack.imgur.com/nlEX9.png)

```
SELECT Bookings.Date, Bookings.Timebegan, Bookings.Timefinished, Bookings_1.Date, Bookings_1.Timebegan, Bookings_1.Timefinished, 
              Bookings.RoomID, Bookings_1.RoomID
FROM     Bookings,
              Bookings AS Bookings_1
WHERE Not Nz(([Bookings_1].[Timebegan]>=[Bookings].[Timefinished]) Or
  ([Bookings_1].[Timefinished]<=[Bookings].[Timebegan]) Or
  ([Bookings].[RoomID]!=[Bookings_1].[RoomID]) Or
  ([Bookings].[ID]=[Bookings_1].[ID]),False)
ORDER BY Bookings.ID, Bookings_1.ID; 
```

有谁有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:51:57.693

好谜（德摩根定律提醒；]）。试试这个：

```
WHERE  
    (
        [Bookings_1].[Timebegan] is NULL
        OR [Bookings].[Timefinished] is NULL
        OR [Bookings_1].[Timefinished] is NULL
        OR [Bookings].[Timebegan] is NULL
        OR [Bookings].[RoomID] is NULL
        OR [Bookings_1].[RoomID] is NULL
        OR [Bookings].[ID] is NULL
        OR [Bookings_1].[ID] is NULL
        OR 
        (
         [Bookings_1].[Timebegan]<[Bookings].[Timefinished]
         AND [Bookings_1].[Timefinished]>[Bookings].[Timebegan] 
         AND [Bookings].[RoomID]=[Bookings_1].[RoomID]
         AND [Bookings].[ID]<>[Bookings_1].[ID]
        )
    ) 
```

# c++ - 如何在 c++ 中从 pthread 返回一个双精度值？

> ID：15350776
> 
> 赞同：4
> 
> 时间：2013-03-11T23:49:15.650
> 
> 标签：c++, concurrency, pthreads, pthread-join

阅读此线程后：[How to return a value from thread in C](https://stackoverflow.com/questions/2251452/how-to-return-a-value-from-thread-in-c) on how to return an integer value from a pthread 我测试了它是否可以用于双精度，但它没有。有没有办法像原始线程中描述的那样从 pthread 进程返回双精度、长整数或字符串，而不是返回整数 42？

如果是怎么办？

如果我有一个包含 10 个位置的静态数组和 10 个 pthreads 每次修改不同的位置，我会遇到麻烦吗？一个例子就像“线程 0 只修改数组 [0]，线程 1 只修改数组 [1] 等等”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T05:26:52.213

线程只需为您希望它返回的结果动态分配内存：

```
void *myThread(void*)
{
   double* result = (double*) malloc(sizeof(double));

   *result = 42.0;

   return result;
} 
```

应该收集该结果的任何内容都会取消引用使用适当强制转换返回的指针（`void*`毕竟这是 C），然后释放内存：

```
// calling thread (or whatever will collect the value)
void* thread_result;
int err = pthread_join( thread_handle, &thread_result);

double dbl = *(double*) thread_result;
free(thread_result); 
```

作为替代方案，无论创建什么线程，都可以将指针传递给线程应该将它的结果放入线程的`void*`参数中（如果线程需要的不仅仅是那一点信息，则可能作为结构的一部分）。如果您有理由避免动态内存分配，这可能会让您避免动态内存分配，但它可能会使数据的所有权和生命周期管理起来更加复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T03:31:37.797

这些只是将[Steve Jessop 的 C 解决方案](https://stackoverflow.com/a/2251472/315052)重新表述为 C++。这些玩具示例（注意缺少错误检查）使用模板来明确如何更改代码以使用`double`. 例如，如果在工作完成后需要返回多个值，则`double`可以将 替换为类型。`class`在实践中，基类和模板可能会被删除，并且`work()`方法`MyWorker`将由调用者直接调用，而不是通过虚拟方法。

首先，使用`pthread`：

```
#include <iostream>
#include <pthread.h>

class WorkerBase {
protected: virtual ~WorkerBase () {}
public:    virtual void * work () = 0;
};

template <typename T>
struct Worker : public WorkerBase { T result; };

extern "C" void *invoke_worker (void *arg) {
    return static_cast<WorkerBase *>(arg)->work();
}

struct MyWorker : public Worker<double> {
    void * work () {
        result = 4.2;
        return 0;
    }
};

int main () {
    pthread_t t;
    MyWorker w;
    pthread_create(&t, 0, invoke_worker, &w);
    pthread_join(t, 0);
    std::cout << "result: " << w.result << std::endl;
    return 0;
} 
```

其次，使用 C++11 `std::thread`：

```
#include <iostream>
#include <thread>

class WorkerBase {
protected: virtual ~WorkerBase () {}
public:    virtual void work () = 0;
           static void invoke (WorkerBase *w) { w->work(); }
};

template <typename T>
struct Worker : public WorkerBase { T result; };

class MyWorker : public Worker<double> {
    void work () { result = 4.2; }
};

int main () {
    MyWorker w;
    std::thread t(MyWorker::invoke, &w);
    t.join();
    std::cout << "result: " << w.result << std::endl;
    return 0;
} 
```

你的帖子中有另一个我错过的问题：

> 如果我有一个包含 10 个位置的静态数组和 10 个 pthreads 每次修改不同的位置，我会遇到麻烦吗？

这是否会给您带来麻烦可能取决于数组元素类型和您的硬件架构。在实践中，对于在机器字边界上对齐的数组元素，我没有观察到这在 x86 架构上是一个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-09T13:48:38.970

我不认为这太难了。我不使用 cstdlib 中的 malloc(size_t)，而只是新的。下面的示例将参数作为结构传递给线程，并返回另一个结构。为了表明它可以采用任何变量类型，我还使用了字符串向量...

```
#include <iostream>
#include <pthread.h>
#include <vector>
#include <string.h>
#include <cstdlib>
using namespace std;

struct thread_data {
    int number;
    vector<string> strings;
    thread_data (){}
    thread_data(int nr) {
        number = nr;
        strings.push_back("aba\n");
    }
};

struct thread_return_data {
    int S;
    vector<string> R;
};

void *Thread (void *threadarg) {
    thread_return_data *R = new thread_return_data;
    thread_data * Q;
    Q = (thread_data *) threadarg;
    cout << Q->number << endl;
    R->S = 16; //random number
    R->R.push_back("14fjnv"); //random string
    R->R.push_back("28jfhn"); //random string
    pthread_exit(R);
    return 0;
}

int main() {
    thread_data A(4444); //initialize with random int
    thread_return_data *B; //is pointer
    pthread_t aThread; //is variable

    pthread_create(&aThread, NULL, Thread, (void *)&A);
    pthread_join(aThread, (void **)&B);

    cout << B->S << endl;
    cout << B->R[0] << endl;
    cout << B->R[1] << endl;
    cout << A.strings[0];
    delete B;

    return 0;
} 
```

# python - 如何检查使用哪个编译器构建 Python

> ID：15350780
> 
> 赞同：18
> 
> 时间：2013-03-11T23:49:27.777
> 
> 标签：python, compiler-construction

有没有办法知道使用哪个编译器`Python`在特定的 linux 机器上构建安装？

我尝试`ldd`在`Python`动态库 [1] 上使用，但我无法理解它是使用`gcc`英特尔编译器还是英特尔编译器编译的。

[1]

```
$ ldd libpython2.7.so.1.0
linux-vdso.so.1 =>  (0x00007fff4a5ff000)
libpthread.so.0 => /lib64/libpthread.so.0 (0x00002ab8de8ae000)
libdl.so.2 => /lib64/libdl.so.2 (0x00002ab8deac9000)
libutil.so.1 => /lib64/libutil.so.1 (0x00002ab8deccd000)
libm.so.6 => /lib64/libm.so.6 (0x00002ab8deed1000)
libc.so.6 => /lib64/libc.so.6 (0x00002ab8df154000)
/lib64/ld-linux-x86-64.so.2 (0x0000003b9a400000) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-11T23:51:06.243

REPL 中最简单的方法是`sys.version`：

```
>>> import sys
>>> print(sys.version)
3.7.0 (default, Jul 24 2018, 19:03:02) 
[GCC 8.1.0] 
```

它通常还应该在您启动交互式解释器时告诉您：

```
$ python3
Python 3.7.0 (default, Jul 24 2018, 19:03:02) 
[GCC 8.1.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

在 shell 中最简单的方法：`-V` *两次*传递命令行选项以打印有关构建的信息。这似乎是一个新功能，在 Python 2 中没有。

```
$ python3 -VV
Python 3.7.0 (default, Jul 24 2018, 19:03:02) 
[GCC 8.1.0] 
```

# three.js - 如何使用three.js SSAO 着色器？

> ID：15350781
> 
> 赞同：2
> 
> 时间：2013-03-11T23:49:44.540
> 
> 标签：three.js, webgl, ssao

我正在尝试使用 SSAO 后处理着色器渲染场景。没有任何错误，但我看不出使用和不使用 SSAO 通道渲染的场景之间有什么区别。我像这样初始化渲染器：

```
// Create WebGL Renderer
var renderParameters = { antialias: false, alpha: false, clearColor: 0xFFFFFF };
renderer = new THREE.WebGLRenderer(renderParameters);
renderer.autoClear = false;
renderer.setSize(viewportWidth, viewportHeight);

// Create render targets
renderTargetParametersRGB = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBFormat };
renderTargetParametersRGBA = { minFilter: THREE.LinearFilter, magFilter: THREE.LinearFilter, format: THREE.RGBAFormat };
depthTarget = new THREE.WebGLRenderTarget(width, height, renderTargetParametersRGBA);
colorTarget = new THREE.WebGLRenderTarget(width, height, renderTargetParametersRGB);

// The shader pass to draw the scene
var renderScenePass = new THREE.RenderPass(scene, camera);

// Copy to screen render pass
var copyToScreenPass = new THREE.ShaderPass(THREE.CopyShader);
copyToScreenPass.renderToScreen = true;

// SSAO render pass
effectSSAO = new THREE.ShaderPass(THREE.SSAOShader);
effectSSAO.uniforms['tDepth'].texture = depthTarget;
effectSSAO.uniforms['size'].value.set(width, height);
effectSSAO.uniforms['cameraNear'].value = camera.near; // 1
effectSSAO.uniforms['cameraFar'].value = camera.far;  // 1000
//effectSSAO.uniforms.onlyAO.value = 1;

// Setup post processing chain
composer = new THREE.EffectComposer(renderer, colorTarget);
composer.addPass(effectSSAO);
composer.addPass(copyToScreenPass); 

// Depth pass
depthPassPlugin = new THREE.DepthPassPlugin();
depthPassPlugin.renderTarget = depthTarget;
renderer.addPrePlugin(depthPassPlugin); 
```

在渲染函数中，我像这样渲染场景：

```
requestAnimationFrame(render);
depthPassPlugin.enabled = true;
renderer.render(scene, camera, composer.renderTarget2, true);
depthPassPlugin.enabled = false;
composer.render(0.1); 
```

正如我之前所说，一切似乎都运行良好，但屏幕上没有可见的 AO 效果。也许我只是使用了错误的参数值？我已经确保通过将 depthTarget 渲染到屏幕来更新深度通道。如果我打开 effectSSAO.uniforms.onlyAO.value，我会得到一个非常“平坦”的实际场景（包括纹理）的褐色渲染，但仍然没有 AO。有人可以给我一个建议下一步该尝试什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T16:28:20.427

[在https://twitter.com/mrdoob/status/300919764262477824](https://twitter.com/mrdoob/status/300919764262477824)有一个使用当前版本的 three.js (r56) 的示例

这是代码的直接链接：http: [//goo.gl/RzfwH](http://goo.gl/RzfwH)

感谢 Altered Qualia 和 MrDoob 提供的示例代码和three.js 库！

# ios - 无法使用 FMDB 包装器插入 SQLITE 数据库

> ID：15350784
> 
> 赞同：0
> 
> 时间：2013-03-11T23:50:08.940
> 
> 标签：ios, sqlite, fmdb

我是 IOS 开发的新手，所以我正在关注这个

[教程](http://www.highoncoding.com/Articles/836_Persisting_iOS_Application_Data_in_SQLite_Database_Using_FMDB.aspx)

正如本教程中提到的，我使用 SQLITE 命令行创建了我的数据库，创建了我的表，然后通过将数据库添加到 Supporting Files 文件夹将其导入到我的 XCode 4.6 项目中。

我只想用数据填充表，所以我有一个函数，它首先找到我的数据库并将其复制到 Documents 文件夹（如果不存在，已经存在）：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *writableDBPath = [documentsDirectory stringByAppendingPathComponent:@"Customers.db"];
FMDatabase* db = [FMDatabase databaseWithPath:writableDBPath]; 
```

这很好用，因为 writebleDBPath 指向 Customers.db 所在的实际路径（在项目的 Documents 文件夹中）

现在我打开数据库并尝试添加一条新记录：

```
[db open];
BOOL success =  [db executeUpdate:@"INSERT INTO customers (firstname,lastname) VALUES (?,?);",[patient.firstName UTF8String],[patient.secondName UTF8String], nil];

[db close]; 
```

但成功的价值始终是“否”。

我包括用于创建 sqlite 数据库的代码：

```
CREATE TABLE customers(id integer primary key, firstname varchar(30), lastname varchar(30)) 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T23:55:19.783

如果`id`是主键，也许您也需要设置它。

尝试调用`[db lastErrorMessage]`以查看问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T23:56:53.093

您在教程中遗漏了一个步骤：

```
NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:self.databaseName];
[fileManager copyItemAtPath:databasePathFromApp toPath:databasePath error:nil]; 
```

它从包中复制数据库文件。这假设您创建了数据库及其架构并将其与应用程序一起包含在包中。

# javascript - 悬停弹出窗口在我的主代码中不起作用

> ID：15350785
> 
> 赞同：0
> 
> 时间：2013-03-11T23:50:13.900
> 
> 标签：javascript, jquery, html, css, jquery-ui

我正在处理鼠标悬停弹出窗口......当我单独执行时它工作正常......但是当我将它与我的整个代码结合起来时它不能正常工作......我什至包括了jquery库...... ..如何解决它....在下面提供我的代码....

[http://jsfiddle.net/rajkumart08/X9a6j/1/embedded/result/](http://jsfiddle.net/rajkumart08/X9a6j/1/embedded/result/)

```
<script type="text/javascript">

            var tooltipTimeout;

            $("#someelem").hover(function()
                                {tooltipTimeout = setTimeout(showTooltip, 2000);}, 
                                hideTooltip);

            function showTooltip()
                {
                var tooltip = $("<div id='tooltip' class='tooltip'>I'm the tooltip!</div>");
                tooltip.appendTo($("#someelem"));
                }

            function hideTooltip()
                {
                clearTimeout(tooltipTimeout);
                $("#tooltip").fadeOut().remove();
                }
            </script>

            <style>

                #someelem
    {
    cursor: pointer;
    }

.tooltip
    {
    display: block;
    position: absolute;
    background-color: rgb(130, 150, 200);
    padding: 5px;
    }

<span id="someelem">Hover me for 2 seconds!</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:17:47.130

```
$(document).ready(function(){
    $("#someelem").hover(function() {
        console.log("In hover");
                tooltipTimeout = setTimeout(showTooltip, 2000);

            },
            hideTooltip);
     }); 
```

借助`$(document).ready(function(){ });`它进入悬停功能。它正在控制台日志中打印“悬停”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:00:06.823

您确定 DOM 元素在 Javascript 之前加载吗？

尝试将您发布的代码块包装在一个就绪函数中

```
$(function(){
    // code you posted
}); 
```

# dojo - dojo 小部件已注册

> ID：15350787
> 
> 赞同：0
> 
> 时间：2013-03-11T23:50:32.113
> 
> 标签：dojo, widget, registry, destroy

使用 Dojo 库运行此代码时，我收到一个[小部件已注册错误。](https://i.stack.imgur.com/apB8x.jpg)

![在此处输入图像描述](../Images/2fbabee1c1388b0b51d8a2f90544fde7.png)

在控制台中，我可以看到有一个具有此 ID 的小部件，但我无法销毁它。

```
function layoutDialog2(data, taskBoard, idName)
{ 
    var _idName = idName;
    var _taskBoard = taskBoard;
    var d = addDialog(); //dialog
    var idD = d.get("id"); //random ID
    var f = addNew(d, Form, {id: "f"+idD, style: "border: 1px solid red"});
    var c = addNew(d, ContentPane, {id: "cp"+idD});    

    for (var i=0; i<7; i++)
    {
        var l1 = addNew2(f, "label", {style: "1px solid green"});
        var span1 = addNew2(l1, "span", {innerHTML: "a"+i+": "});
        var t1 = addNew(l1, TextBox, {name: "a"+i, value: data["a"+i]});
        var br1 = addNew2(l1, "br", {});        
    }

    var b1 = addNew(c, Button, {label: "Change", onClick: function() { change(); }});
    var b2 = addNew(c, Button, {label: "DELETE", onClick: function() { deleteTask(); }});

    function change()
    {
        console.log(_taskBoard);
        _taskBoard.destroyRecursive(); 
        console.log(_taskBoard);

        var v1 = registry.byId("f"+idD); //get form value
        var v1 = v1.get("value");
        layoutTask(v1);
        _taskBoard.destroyRecursive();
    }

    function deleteTask()
    {
        _taskBoard.destroyRecursive();
    }

    d.show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:27:45.890

您需要清除已创建的 Dijit 的任何 ID 的注册表。在我的项目中，我们创建了一个辅助函数来为我们执行此操作：

```
destroyFieldsByIdArray: function (fieldIdArray) {
                var i,
                    idToDestroy;
                for (i = 0; i < fieldIdArray.length; i += 1) {
                    idToDestroy = fieldIdArray[i];
                    if (dijit.byId(idToDestroy)) {
                        dijit.byId(idToDestroy).destroyRecursive(true);
                    }
                }
            } 
```

# facebook - Facebook API 获取新事件大图

> ID：15350790
> 
> 赞同：3
> 
> 时间：2013-03-11T23:51:01.193
> 
> 标签：facebook, api, image

我注意到 facebook 现在允许为事件设置封面图片，但我似乎无法再通过 API 检索它。

示例： http: [//www.facebook.com/events/160889490733938/](http://www.facebook.com/events/160889490733938/)

从图形 api 资源管理器调用该事件的 id/图片，我得到：

```
{
  "data": {
    "url": "https://fbcdn-profile-a.akamaihd.net/static-ak/rsrc.php/v2/yE/r/tKlGLd_GmXe.png", 
    "is_silhouette": true
  }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T09:11:56.583

这张新图片`pic_cover`在[FQL 事件表中被调用](https://developers.facebook.com/docs/reference/fql/event/) ~~- 但在我的测试中它总是返回`null`。~~

文档中有一个挂锁标志，表明该字段只能由某些应用程序读取，但没有进一步说明。

~~API事件文档中还没有对应的东西。~~

~~我认为由于这是一项新功能，我们将不得不等待一段时间，直到 Facebook 也会在 API 中反映这一变化。也许打开一个错误报告（或加入现有的报告）可以帮助加快这一速度。~~

**更新：**

似乎现在可以获得事件的封面图片 - FQL`pic_cover`和`cover`API（必须通过`fields`参数请求）都返回我设置为事件封面图片的图像。

（正如另一个答案所建议的那样，它似乎也不是只有所有者才能访问的——对于公共事件，即使我不是创建者，我也会得到它。）

API 的文档`event`似乎还没有更新，目前还没有提及该`cover`字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:28:29.630

我有同样的问题，我认为问题是（目前） pic_cover 属于事件创建者或上传者，而不是事件本身，因此需要额外的权限才能获得它。

我仍然没有找到解决方案，但我认为这可能有助于解决问题。

# android - 在 Android 3.0+ 上设置首选项的初始摘要

> ID：15350791
> 
> 赞同：1
> 
> 时间：2013-03-11T23:51:05.660
> 
> 标签：android, settings, android-preferences

在接下来的代码中有两个`findpreference(key)`，第一个是 in `onCreate()`，它返回 null，但第二个正确返回首选项。我需要第一个很好地初始化首选项摘要。我花了很多时间尝试不同的方法，阅读文档和谷歌搜索，但我还没有找到方法，请帮忙。

```
public class Settings30Activity extends PreferenceActivity implements OnSharedPreferenceChangeListener {

    protected SettingsFragment settingsFragment;

    @SuppressLint("NewApi")
    @TargetApi(11)
    public static class SettingsFragment extends PreferenceFragment {
       @Override
       public void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          addPreferencesFromResource(R.xml.preferences);            
       }            
     }

    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       settingsFragment = new SettingsFragment();    

   //findPreference 1 (returns null):        
       Preference stylePref=settingsFragment.findPreference("pref_style"); 
       stylePref.setSummary(sharedPreferences.getString(key, ""));

    }

   public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {     
    if (key.equals("pref_style")) {
    //findPreference 2(returns the preference ok):
        Preference stylePref=settingsFragment.findPreference("pref_style");
        stylePref.setSummary(sharedPreferences.getString(key, ""));            
    }
} 
```

}

在调试时，我可以在变量中看到对象 settingsFragment/mPreferenceManager 在活动生命周期中如何为空，直到`onSharedPreferenceChanged()`刚刚被调用，然后 settingsFragment/mPreferenceManager/mSharedPreferences 获得 sharedPrefereces 并且`findpreference()`运行良好。但我不知道该怎么做，因为它在外面工作`onSharedPreferenceChanged()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T17:25:10.803

这是我的最终代码，以防其他人需要它，它运行良好：

```
public class Settings30Activity extends PreferenceActivity implements 
    On SharedPreferenceChangeListener {

     protected SettingsFragment settingsFragment;    

 @SuppressLint("NewApi")
 @TargetApi(11)
 public static class SettingsFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preferences);          
        setSummaries();
    }        

    @SuppressLint("NewApi")
    public void setSummaries(){
        final SharedPreferences sh = getPreferenceManager().getSharedPreferences() ;

        //Pref1
        Preference stylePref = findPreference("pref_style");
        stylePref.setSummary(sh.getString("pref_style", ""));

        //here the other preferences..
     }  
}//End fragment

 @SuppressLint("NewApi")
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    settingsFragment = new SettingsFragment(); 
    getFragmentManager().beginTransaction()
            .replace(android.R.id.content, settingsFragment)
            .commit();
 }

 public void onSharedPreferenceChanged(SharedPreferences sharedPreferences, String key) {       

    if (key.equals("pref_style")) {
        Preference pref = settingsFragment.findPreference(key);
        // Set summary to be the user-description for the selected value
        pref.setSummary(sharedPreferences.getString(key, ""));            
    }
    //here the others preferences
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:31:43.167

它返回是`null`因为您在第一次通话中。`key``null``findPreference(key)`

在第二次调用中，`key`作为参数传递给`onSharedPreferenceChanged()`，这就是它在那里工作的原因。

当您正在寻找一个名为“pref_style”的键时，您可以为整个类定义该名称（例如`static final String PREF_STYLE_KEY = "pref_style"`），然后在您`findPreference(PREF_STYLE_KEY)`的第一个调用和语句中调用。`key.equals(PREF_STYLE_KEY)``if()`

# ruby-on-rails - 在 Rails 3.2.12 中使用 ActiveResource 的复杂属性

> ID：15350804
> 
> 赞同：1
> 
> 时间：2013-03-11T23:52:11.667
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activeresource

我正在尝试将 Web 服务响应转换为 Rails 应用程序中的对象，我收到以下 json：

```
{
    "id": 1,
    "status": true,
    "password": "123",
    "userType": {
        "description": "description",
        "userTypeId": 1
    },
    "email": "abc@gmail.com"
} 
```

我想像这样在 UserType Ruby 类中转换 userType 属性：

```
class UserType
  attr_accessor :userTypeId, :description
end 
```

我正在使用 ActiveResource 与 web 服务进行通信，我尝试使用属性方法将 userType json 属性转换为 UserType 类，但属性方法不接受复杂类型，只接受字符串、整数等...

如何将 userType（webservice 响应）转换为 UserType Ruby 类？

> Rails 3.2.12 和 Ruby 1.9.3p194

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:19:44.467

您应该能够实现`userType`为实例方法。

```
class MyResource < ActiveResource::Base
  self.site = "http://api.example.com/"

  def userType
    UserType.new(userTypeId: super.userTypeId, description: super.description) 
  end
end 
```

这是因为 ActiveResource 自动为您传递给类构造函数的属性散列中的每个键创建一个“getter”方法。当被调用的属性方法对应一个hash值时，ActiveResource返回一个自动生成的类的实例`MyResource::UserType`，分别对方法`userTypeId`和`description`方法进行响应。您可以通过`super`在被覆盖的方法中调用并将 和 的值传递`userTypeId`给`description`您自己的类来获取此实例。

**编辑：** - 更正了类名

PS：查看[ActiveResource#load](http://api.rubyonrails.org/classes/ActiveResource/Base.html#method-i-hash)方法以获取有关如何生成属性 getter 方法的更多详细信息。

# c - i_zone[7] 如何代表 512 块？

> ID：15350811
> 
> 赞同：0
> 
> 时间：2013-03-11T23:52:45.367
> 
> 标签：c, kernel

我正在阅读Linux 0.12的内核，inode.c中的代码：

```
static int _bmap(struct m_inode * inode,int block,int create)
{
    struct buffer_head * bh;
    int i;

    if (block<0)
        panic("_bmap: block<0");
    if (block >= 7+512+512*512)
        panic("_bmap: block>big");
    if (block<7) {
        if (create && !inode->i_zone[block])
            if (inode->i_zone[block]=new_block(inode->i_dev)) {
                inode->i_ctime=CURRENT_TIME;
                inode->i_dirt=1;
            }
        return inode->i_zone[block];
    }
block -= 7;
    if (block<512) {
        if (create && !inode->i_zone[7])
            if (inode->i_zone[7]=new_block(inode->i_dev)) {
                inode->i_dirt=1;
                inode->i_ctime=CURRENT_TIME;
            }
        if (!inode->i_zone[7])
            return 0;
        if (!(bh = bread(inode->i_dev,inode->i_zone[7])))
            return 0;
        i = ((unsigned short *) (bh->b_data))[block];
        if (create && !i)
            if (i=new_block(inode->i_dev)) {
                ((unsigned short *) (bh->b_data))[block]=i;
                bh->b_dirt=1;
            }
        brelse(bh);
        return i;
    }
block -= 512;
    if (create && !inode->i_zone[8])
        if (inode->i_zone[8]=new_block(inode->i_dev)) {
            inode->i_dirt=1;
            inode->i_ctime=CURRENT_TIME;
        }
    if (!inode->i_zone[8])
        return 0;
    if (!(bh=bread(inode->i_dev,inode->i_zone[8])))
        return 0;
    i = ((unsigned short *)bh->b_data)[block>>9];
    if (create && !i)
        if (i=new_block(inode->i_dev)) {
            ((unsigned short *) (bh->b_data))[block>>9]=i;
            bh->b_dirt=1;
        }
    brelse(bh);
    if (!i)
        return 0;
    if (!(bh=bread(inode->i_dev,i)))
        return 0;
    i = ((unsigned short *)bh->b_data)[block&511];
    if (create && !i)
        if (i=new_block(inode->i_dev)) {
            ((unsigned short *) (bh->b_data))[block&511]=i;
            bh->b_dirt=1;
        }
    brelse(bh);
    return i;
} 
```

我知道 i_zone[0] ~ i_zone[6] 可以存储一个块。但是 i_zone 怎么代表 512 块呢？和 i_zone[8] 如何代表 512*512 块？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:02:07.493

`i_zone[0]`通过`i_zone[6]`存储7个数据块的地址。这些是“直接”块。

`i_zone[7]`存储一个块的地址，该块本身存储 512 个数据块的地址。这是一个“间接”块。

`i_zone[8]`存储块的地址，该块本身存储 512 个间接块的地址，每个间接块存储 512 个数据块的地址。这是一个“双重间接”块。

# excel - csv文件读取错误值

> ID：15350814
> 
> 赞同：1
> 
> 时间：2013-03-11T23:53:06.677
> 
> 标签：excel, vba

我有一个将 CSV 文件读入记录集中的代码：

这是主要部分：

```
conn.Open ("Provider=Microsoft.Jet.OLEDB.4.0;" & _
         "Data Source=" & Sheets("Reference").Range("DataSource").Value & ";" & _
         "Extended Properties=""text; HDR=Yes; FMT=Delimited; IMEX=1;""")
strSQL = "Select * from file.csv"
rsFutures.Open strSQL, conn

 vTemp = rsFutures("Start /Index")
 If Not IsNull(vTemp) Then cells(1,1) = vTemp 
```

我有一个问题，文件中的值3S6S，记录集为36？？？！！！！！！怎么会这样？

非常感谢所有想法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:06:22.037

任何将来可能遇到类似问题的人，我的解决方案是创建 Schema.ini 文件，该文件立即处理记录集列类型。这是小样本：

```
[myfile.csv] 
Format=CSVDelimited 
ColNameHeader=True 
Col1=TR Char Width 255 
Col2=Book Char Width 255 
... 
ColN=Comment Char Width 255
CharacterSet=ANSI 
```

只需将其保存在您将 csv 文件导出（或保存）到的同一文件夹中。祝你好运。

ps 谢谢布拉德

# php - mysql权限1and1

> ID：15350815
> 
> 赞同：0
> 
> 时间：2013-03-11T23:53:13.000
> 
> 标签：php, mysql, mysqli

有谁知道让我的用户帐户访问表格？我很好地连接到数据库，但是当我尝试选择表时，它告诉我拒绝用户'dboxxxxx'@'%'访问数据库。

我正在使用基本的 php 代码

```
$con = mysqli_connect('xxxxxx.db.1and1.com', 'xxxxx', 'xxxxxx');

if (!$con) {
    die('Could not connect: ' . mysql_error());
}
else {echo 'success!';}

$selected = mysqli_select_db($con,'userTable');
if(!$selected){
    die ('cannot use db: '.mysqli_error($con));
} 
```

1and1 phpmyadmin 上没有我可以看到的权限选项，除非我完全错过了它。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:14:18.467

首先，您需要提供`dboxxxxx`用户名，而不是`'dboxxxxx'@'%'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:06:05.650

您是在本地还是在服务器内运行此代码？1und1 防火墙阻止来自外部网络的连接

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T23:59:56.470

您可能没有正确连接到数据库。

尝试我所做的更改。请注意，我不知道您正在使用类和函数。

**更新**

```
 $mysqli = new mysqli('xxxxx.db.1and1.com', 'xxxx', 'xxxx','xxxx'); 
    if(mysqli_connect_errno ())
    {
        printf('Unable to connect to database ' . mysqli_connect_error()); 
    } 
    else 
    { 
        $stmt = $mysqli->stmt_init(); 
        if(!$stmt)
        { 
            echo "init failed"; 
        } 
        else 
        { 
            $cmd = "insert into `userTable` (`oauthtoken`,`oauthtokensec`,`userid`,screenname`) VALUES ('?','?','?','?')"; 

            if($stmt->prepare($cmd))
            { 
                $stmt->bind_param('1','1','1','1'); 
                $stmt->execute(); 
                echo $stmt->affected_rows . " Row(s) Inserted"; 
                $stmt->close(); 
            }
            else
            { 
                echo "Prepare Failed"; 
            } 

        } $mysqli->close(); 
    } 
```

# user-agent - Studio 3 错误消息重新 W3C 验证

> ID：15350821
> 
> 赞同：1
> 
> 时间：2013-03-11T23:53:52.157
> 
> 标签：user-agent, validation, aptana3, http-status-code-403

只是一个新手的快速问题。在使用 W3C 验证时，是否有其他人使用 Aptana Studio 3 收到任何错误消息？

```
Status: 403 Forbidden Vary: Referer Content-type: text/html

Markup Validation Service

Sorry! This document can not be checked.
No User-Agent header found! 
```

一个快速的谷歌建议其他编辑器/IDE 用户正在经历类似的事情，例如 HTML-Kit。看起来 W3C 验证服务需要一个用户代理字符串，这将由浏览器直接提供，但可能不是由编辑器/IDE 提供？

我知道可以通过使用不同的验证服务或通过浏览器检查代码来解决此问题。只是想我会标记它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T13:18:18.010

为此，我已向 Aptana Studio 项目提交了修复程序。此修复涉及将 http 用户代理添加到发送到 w3c 的帖子中。

[w3c_validation.rb](https://github.com/ashpointduty/html.ruble/blob/744b8e6296845250590d49b18adda8b468fc03d6/commands/w3c_validation.rb)

将 w3c_validation.rb 文件中的文本替换为以下文本。示例路径：C:\Users\user\AppData\Local\Aptana Studio 3\configuration\org.eclipse.osgi\bundles\101\1.cp\bundles\html.ruble\commands\w3c_validation.rb

```
require 'ruble'

command t(:validate_syntax) do |cmd|
  cmd.key_binding = 'CONTROL+M2+V'
  cmd.scope = 'text.html'
  cmd.output = :show_as_html
  cmd.input = :document
  cmd.invoke do |context|
    $KCODE = 'U'
    page = $stdin.read
    page.gsub!(/<\?(php|=).*?\?>|<%.*?%>/m, '')

    w3c_url = 'http://validator.w3.org/check'

    require 'net/http'
    require 'uri'

#fix for w3c blocking http requests without a user-agent
#changed the way the http post is sent to w3c so that it includes a user-agent

uri = URI(w3c_url)
req = Net::HTTP::Post.new(uri.path)
req.set_form_data({'ss' => "1", 'fragment' => page})
req['User-Agent'] = 'Aptana'

response = Net::HTTP.start(uri.host, uri.port) do |http|
  http.request(req)
end
    status = response['x-w3c-validator-status']

    content = response.body
    content = content.gsub(/<\/title>/, '\&<base href="http://validator.w3.org/">')
    # content.gsub!(/Line (\d+),? Column (\d+)/i) do
    # # FIXME These links won't work for us!
    # "<a href='txmt://open?line=#\$1&column=#{\$2.to_i + 1}'>#\$&</a>"
    # end
    content
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:53:24.520

IDE 中的浏览器不符合 W3C HTTP 标准

此外，您无法使用 Web 工具检查尚未发布到 Web 的页面。您需要设置一个小型测试服务器才能使用它。

首先，使用不同的浏览器。所有浏览器都应该发送一个用户代理字符串，任何网站都不应依赖于该字符串的存在，或者将已知的不良浏览器列入黑名单。

你真的应该在兼容的浏览器中测试你的代码，例如 Chrome 或 Firefox，使用合规性测试开发工具集，而不是在你的 IDE 中。

如果必须，您可以改为从 W3C 网站下载工具的客户端版本来检查您的代码。它是一个可在所有平台上使用的命令行工具。Firefox、Chrome 和衍生工具的扩展使用这些工具的库版本。（同样，您不能使用 IDE 浏览器。）

# c++ - 返回带有模板类的类成员结构

> ID：15350824
> 
> 赞同：1
> 
> 时间：2013-03-11T23:53:54.513
> 
> 标签：c++, class, struct, g++

我正在尝试创建一个从模板类返回类定义结构的函数。g++ 给出错误信息`error: expected constructor, destructor, or type conversion before ‘*’ token`。以下是相关代码：

来自 BSTDict.cpp：

```
Node*& BSTDict<T, Compare>::add_helper(Node*& r, T key) { ... } 
```

来自 BSTDict.hpp：

```
struct Node {
    T key;
    T data;
    Node* left;
    Node* right;
};

...

Node*& add_helper(Node*& r, T key); 
```

我做了很多测试，我认为问题出在 Node 上（不管引用和指针如何）。我也试过`BSTDict<T, Compare>::Node*& BSTDict<T, Compare>::add_helper(Node*& r, T key) { ... }`了。任何帮助，将不胜感激。谢谢。

编辑：这里是[BSTDict.hpp](http://pastebin.com/SVj61nka)和[BSTDict.cpp](http://pastebin.com/NaerC8Fc)。它们是更大计划的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:55:48.923

```
template <typename T, typename Compare>
    typename BSTDict<T, Compare>::Node*& 
    BSTDict<T, Compare>::add_helper(Node*& r, T key) 
    { 
       // ... 
    } 
```

我不确定`/*typename*/`那里是否需要。我必须看到更多你的代码（我必须弥补`template<>`限定词 msyefl 已经:)）

# ruby-on-rails - 守望者还是设计者？Rails 身份验证有什么更好的方法？

> ID：15350833
> 
> 赞同：3
> 
> 时间：2013-03-11T23:55:09.330
> 
> 标签：ruby-on-rails, authentication

Ruby on Rails 身份验证使用什么更好？守望者还是设计者？各自的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:19:58.637

我为我的rails应用程序尝试了几种身份验证解决方案，从头开始构建它并使用sorcy或authlogic等几个gem，设计是最好的，因为它基于warden但具有更多功能，你可以查看railscasts教程以集成设计您的 Rails 应用程序 [http://railscasts.com/episodes?utf8=%E2%9C%93&search=devise](http://railscasts.com/episodes?utf8=%E2%9C%93&search=devise)

还可以设计与其他身份验证（如 openId 和 facebook 和 twitter）配合使用，,,

# regex - 使用 grep 查找动态文本

> ID：15350834
> 
> 赞同：2
> 
> 时间：2013-03-11T23:55:14.907
> 
> 标签：regex, linux, bash, awk, grep

需要有关 bash 脚本的帮助。我们正在修改我们的数据库结构，问题是我们有许多实时站点具有引用当前数据库结构的预写查询。我需要找到所有引用 MySQL 表的脚本。这是我开始的：

```
grep -ir 'from' /var/www/sites/inspection.certifymyshop.com/ > resultsList.txt 
```

我正在尝试递归地遍历我们的脚本并将找到的所有表名导出到文本文件中，我们可以使用“->from”和“->join”前缀来帮助我们：

```
->from('databaseName.table_name dtn')  // dtn = table alias 
```

或者

```
->join('databaseName.table_name dtn')  // dtn = table alias 
```

我需要在单引号内找到数据库和表名（即databaseName.table_name）。我还需要列出在匹配项下方或旁边找到的文件名，如下所示：

> someDatabaseName.someTableName | /var/www/sites/blah.com/index.php | 第 36 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:02:31.040

尝试这样做：

```
grep -oPriHn -- "->(?:from|join)\('\K[^']+" . |
    awk -F'[ :]' '{print $3, "|", $1, "| line " $2}' 
```

如果这符合您的需要，我也可以更多地解释该片段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T00:15:35.393

仅使用 grep 的一个问题是从结果中删除 from、join 或任何标识前缀。为了解决这个问题，我们还可以使用 sed

```
grep -EHroi -- '->(from|join)\('\''[^'\'' ]*' /path/to/files | sed -re 's/:.*(from|join)\('\''/:/g' 
```

您也可以在 for 循环中单独使用 sed

```
for i in `find /path/to/files -type f -print`
do
   echo $i
   sed -nre 's/^.*->(from|join)\('\''([^'\'' ]*)['\'' ].*$/\2/gp' $i
done 
```

编辑：上面的 for 循环用带空格的文件名中断，所以这是前面使用 find 的 sed 语句

```
find ./ -type f -exec sh -c "echo {} ; sed -nre 's/^.*->(from|join)\('\''([^'\'' ]*)['\'' ].*$/\2/gp' \"{}\" ;" \; 
```

# mysql - 每个表上都有一个主键是否意味着我的表/数据库是“正确”索引的（MySQL）？

> ID：15350837
> 
> 赞同：1
> 
> 时间：2013-03-11T23:55:31.870
> 
> 标签：mysql, sql, indexing

在 MySQL 中，每个表上都有一个主键是否意味着我的表/数据库被“正确”索引？

如果没有，我是否只需要在常用的`join`字段和/或通常以`where`子句作为目标的字段上放置索引？

我总是听说我需要“正确”索引我的数据库并了解索引的一个要点是限制查询需要执行的搜索。但是，我从来没有真正理解人们所说的“正确”是什么意思。在阅读其他 SO Q&A 时，我意识到答案可能并不简单，但任何答案都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:53:49.770

不，主键并不一定意味着您的表已正确索引（除非您只有非常简单的查询）。

根据您的应用程序对表运行的查询设计索引。

请参阅我的演示文稿[如何设计索引，真的](http://www.slideshare.net/billkarwin/how-to-design-indexes-really)。

# android - 不同分辨率相同密度的Android文本缩放

> ID：15350838
> 
> 赞同：0
> 
> 时间：2013-03-11T23:55:38.167
> 
> 标签：android, size, resolution

我有 2 台设备，一台运行 Gingerbread 的 1024x600 7" 平板电脑 hdpi 和一个连接到尺寸为 1920x1008 22"、运行 ICS 的 hdpi 触摸屏的集线器。Android 操作系统似乎将两者都视为“大”（240dp）。

因此，它们具有相同的实际密度 (240dpi)、相同的广义密度 (hdpi)、相同的广义尺寸（大）但实际尺寸不同（7" 与 22"）

我为布局指定的文本和间距尺寸在 22" 上效果很好，但在 7" 上它们看起来很大并且不适合屏幕。

我尝试过使用 dp 和 sp，没有区别，因为我认为问题在于 Android 将这些东西视为相同的大小/密度。有人对我如何能够适当地缩放尺寸有任何建议吗？该程序最终也需要在 4.5 英寸手持设备上得到支持。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:01:25.113

对不起，我之前的回答完全错误=）

理想情况下，您应该能够为 7" 平板电脑进行设计，并将您的布局扩展到电视。但如果这不起作用，您应该能够使用 layout-sw1008dp 之类的东西。“sw”前缀允许您指定屏幕最小边的最小尺寸 - 所以在电视的情况下，高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T06:04:07.860

我在我的应用程序中也面临这样的问题。但我找到了一个很好的解决方案。我只有一种布局`tablet`，目录名称是`layout-sw600dp`. 现在，当部分涉及高度和宽度问题时，我创建了几个不同`values`的目录来放置`dimensions`和`font size`其他存根。所以平板屏幕没有任何`constant`价值`layout`。

```
androd:layout_width:"60dp" // i drop this scenario

androd:layout_width:"@dimen/tab_width" // i used this scenario 
```

你的`values`目录名称会像

```
values-xlarge
values-large 
```

所有值都将从您的值目录中获取。它不会创建不同的布局，但一个布局可以多次使用。

请参阅我的[堆栈答案](https://stackoverflow.com/questions/14108074/layouts-on-different-models-of-mobiles/14108211#14108211)，这可能会对您有所帮助。

# ios - iCarousel 的内存问题和来自 coredata 的图像

> ID：15350842
> 
> 赞同：0
> 
> 时间：2013-03-11T23:55:51.000
> 
> 标签：ios, core-data, icarousel

我有一个 iCarousel 的基本实现，我从核心数据存储中提取图像。当您加载大量图像时，我遇到了与内存相关的崩溃，正如我猜想的那样。问题是我不知道使用 AsyncImageView 库的任何方法，因为核心数据对象没有 NSURL 尊重。有谁知道另一种管理这个内存问题的方法？

这是我的 iCarousel viewForItemAtIndex

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{

    JournalEntry *journalEntry = (JournalEntry *)[fetchedResultsController objectAtIndexPath:[NSIndexPath indexPathForRow:index inSection:0]];

    if (view == nil)
    {
        view = [[[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 240.0f, 240.0f)] autorelease];
        view.contentMode = UIViewContentModeScaleAspectFit;
    }

    [((UIImageView *)view) setImage:[journalEntry.image valueForKey:@"image"]];

    NSLog(@"%i", index);

    return view;
} 
```

这里的参考是直接从 iPhoneCoreDataRecipes 示例代码中将图像添加到我的核心数据存储的代码。

```
@implementation ImageToDataTransformer

+ (BOOL)allowsReverseTransformation {
    return YES;
}

+ (Class)transformedValueClass {
    return [NSData class];
}

- (id)transformedValue:(id)value {
    NSData *data = UIImagePNGRepresentation(value);
    return data;
}

- (id)reverseTransformedValue:(id)value {
    UIImage *uiImage = [[UIImage alloc] initWithData:value];
    return [uiImage autorelease];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:53:27.933

经过一段时间的研究，结果发现大内存增长是由于 coredata 缓存而不是 iCarousel。这可以通过在 managedObjectContext 上调用 reset 来清除。

# ruby-on-rails - Cancan 能力如何处理两个用户模型

> ID：15350847
> 
> 赞同：1
> 
> 时间：2013-03-11T23:56:29.250
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

我与康康宝石一起工作。

如何获得“CANCAN”来管理两个模型的权限？

谢谢

====================================

我可以做这个 ？？？？

```
class Ability

  include CanCan::Ability

  def initialize(user)
   # code
  end

  def initialize(accounts)
     #code  
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-13T08:51:10.867

```
class ApplicationHelper
  def current_auth_resource
    if admin_signed_in?
      current_admin
    else
      current_user
    end
  end

  def current_ability
      @current_ability or @current_ability = Ability.new(current_auth_resource)
  end
end

class ApplicationController
  include ApplicationHelper
end

class Ability
  include CanCan::Ability

  def initialize(user)      
    if user.is_a?(Admin)
      # add admin permissions only
    elsif user.is_a?(User)
      # add user permissions only
    else
      # add guest permissions only
    end
  end
end 
```

检查[这个](https://github.com/ryanb/cancan/issues/656)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T00:40:30.790

您需要在您的ability.rb 文件中指定某些用户可以操作和执行操作的模型。

```
class Ability
  include CanCan::Ability

  # usual setup
  def initialize(user)
    user ||= User.new

    if user.has_role? :admin
      can :manage, :all
    end

    if user.has_role? :less_important_role
      can [:read, :update], Model1
      can :manage, Model2
    end
  end
end 
```

查看[文档](https://github.com/ryanb/cancan/wiki/Defining-Abilities)以阅读有关定义能力的更多信息。

# java - 自定义 FXML 注释

> ID：15350848
> 
> 赞同：0
> 
> 时间：2013-03-11T23:56:32.590
> 
> 标签：java, javafx-2, fxml

对于一些附加/自定义属性，例如选项卡索引或工具提示文本，最好使用自定义注释来注释 FXML。我对此有三个建议：

XML-评论：

```
<!-- @TabIndex(index=1) -->
<Button fx:id="test_audio" text="Test" /> 
```

fx 属性：

```
<Button fx:id="test_audio" fx:tab_index="1" text="Test" /> 
```

自定义 XML 命名空间属性：

```
<Button fx:id="test_audio" custom:tab_index="1" text="Test" /> 
```

有没有办法做到这一点并在运行时获取属性值？

# scheme - 如何在 Chicken Scheme 中使用 abort 程序

> ID：15350854
> 
> 赞同：0
> 
> 时间：2013-03-11T23:56:56.073
> 
> 标签：scheme, abort, chicken-scheme

我正在尝试使用[Chicken Scheme 的](http://wiki.call-cc.org/) [中止](http://wiki.call-cc.org/man/4/Exceptions#raising-exceptions)程序，如下面的代码所示：

```
(module change-calculator (export calculate-change)
  (import scheme)

  (define (calculate-change coin-values amount)
    (cond ((null? coin-values) (abort '"coin-values should contain at least one value."))
          ((= 0 amount) '() )))
) 
```

但收到以下警告：

```
Warning: reference to possibly unbound identifier `abort' in:
Warning:    calculate-change 
```

该文档没有提到需要导入的任何其他模块。我试过导入`extras,utils,srfi-12`没有任何成功。谁能告诉我使用中止程序的正确方法？还是我错过了其他东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T01:30:28.773

啊，一个容易犯的错误。该行`(import scheme)`应该是`(import scheme chicken)`. 祝你的模块好运！

# c - 在c中实现exp函数的方法是什么？

> ID：15350856
> 
> 赞同：2
> 
> 时间：2013-03-11T23:57:00.630
> 
> 标签：c, math, exp

我想计算有限精度下exp函数的误差（数据类型为双精度）。是泰勒级数还是其他特殊算法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T00:32:43.090

一般来说，实现 e ^(*x*)的最佳方式是调用`exp`您的计算平台提供的函数。

如果做不到这一点，实现该`exp`功能会很复杂，并且需要一些深奥的技能。一个实现通常包括：

*   测试各种特殊情况的输入，例如 NaN。
*   将输入乘以专门准备的 log [2] e 表示，将问题从^(*x*)转换为 2 ^(*y*)，其中*y* = *x* • log [2] e。
*   *将y*的整数部分移动到浮点编码的指数字段中。
*   用[minimax polynomial评估](http://en.wikipedia.org/wiki/Minimax_polynomial)*y*的小数部分的指数。
*   结合上面的两个结果。

此外：

*   [minimax 多项式是使用 Remez 算法](http://en.wikipedia.org/wiki/Remez_algorithm)或类似算法设计的，通常使用特殊软件。
*   这项工作必须以一定的精度完成，以便可以精确计算最终结果。

泰勒级数不适合评估函数，因为它们远离其中心点是不准确的。这意味着它们需要太多项来收敛到必要的精度。项太多不仅需要时间，而且难以准确地进行算术运算。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T15:01:17.020

虽然我同意 Eric 在他的回复中所说的大部分内容，但有几点值得补充。我编写了一个工具，除其他外，它允许评估指数到高（用户指定）精度。

当精度可能变化时，必须求助于级数逼近之类的工具，因为这样就没有单一的多项式逼近就足够了。即便如此，也有很多技巧可以使用。事实上，我对我用来加速这样一个系列的各种技巧感到惊讶。

任何此类努力的一个很好的入门参考是 Hart 的“计算机近似”，这本书很遗憾地不容易找到。它提供了许多多项式近似，但也适度详细地讨论了范围缩减技巧。

指数级数本身就特别有趣。我在 HPFMod2.pdf 文件的第 4.1 节中描述了我用于指数的方法，该文件包含在[HPF](http://www.mathworks.com/matlabcentral/fileexchange/36534-hpf-a-big-decimal-class)中。

例如，要计算 exp(123.456789)，可能会尝试直接使用系列，但更好的是存储 e 本身的值。然后我们可以使用范围缩减来计算

```
exp(123.456789) = exp(1)*exp(2)*exp(8)*exp(16)*exp(32)*exp(64)*exp(.456789) 
```

我们通过重复平方得到 2 的幂的指数，那么小数部分将适度快速收敛。（例如，最终系列中 100 位精度需要 31 项。）

但是，假设我们只是碰巧注意到

```
123.456789 = 28*ln(10) + 58.9844063961667 
```

现在，我们可以将所需的指数写为：

```
exp(123.456789) = 10^28 * exp(1)*exp(2)*exp(8)*exp(16)*exp(32)*exp(-0.0155936038332811) 
```

只要我们知道（已存储）ln(10) 的值，最终系列将只需要大约 17 项即可达到所需的 100 位精度。

# drupal - Drupal 6：无法以编程方式添加/撤销用户角色（触发器/操作模块）

> ID：15350857
> 
> 赞同：1
> 
> 时间：2013-03-11T23:57:01.033
> 
> 标签：drupal, drupal-6

我正在尝试使用触发器和自定义操作为给定特定配置文件字段的用户（添加/编辑）赋予特殊角色。所以这是我的代码：

```
function mymodule_action_info() {
    return array(
        'mymodule_user_appropriate_role' => array(
            'description' => t('Assign user special role'),
            'type' => 'user',
            'configurable' => FALSE,
            'hooks' => array(
                'user' => array('insert', 'update'),
            ),
        ),
    );
} 
```

接着

```
function mymodule_user_appropriate_role(&$object, $context = array()) {
    // get the uid from the object
    if( isset( $object->uid ) ){
        $thisUID = $object->uid;
    }else if( isset( $context['uid'] ) ){
        $thisUID = $context['uid'];
    }else{
        global $user;
        $thisUID = $user->uid;
    }
    // make sure we have a user record
    if( $thisUID ){
        // load user object
        $thisUser = user_load( $thisUID );
        // get user profile object
        profile_load_profile( $thisUser );

        if( $thisUser->profile_special_field == "value1" ){

            // FIRST APPROACH
            db_query( 'INSERT INTO {users_roles} (uid, rid) VALUES (%d, %d)', $thisUser->uid, 5 ); // 5 is the custom role ID

            // SECOND APPROACH
            $thisUserRoles = $thisUser->roles;
            if( !isset( $thisUserRoles[5] ) ){
                $thisUserRoles[5] = "RID 5 Rule Name";
            }
            user_save( $thisUser, array( 'roles' => $thisUserRoles ) );

            // THIRD APPROACH
            $allUserRoles = user_roles();
            user_save( $thisUser, array( 'roles' => array( array_search( 'RID 5 Rule Name', $allUserRoles ) => 1 ) ) );

        }
    }
} 
```

但是这三种方法都没有奏效。我确定该操作已被调用并输入`if( $thisUser->profile_special_field == "value1" )`语句

从昨天开始我一直在努力解决这个问题，所以非常欢迎任何帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:17:33.947

我最终得到了 hook_user。这是供参考的代码：

```
function mymodule_helper_user($op, &$edit, &$account, $category = NULL){

    // DEFINE OPERATIONS LIST TO ACT ON
    $opList = array( 'insert', 'update', 'after_update', 'submit' );

    if( in_array( $op, $opList ) ){

        // REVOKE ALL CUSTOM ROLES, HERE RID 5 AND 6
        db_query( 'DELETE FROM {users_roles} WHERE rid IN (5,6) AND uid = %d', $account->uid );

        if( $account->profile_custom_field == 'value1' ){
            // GIVE CUSTOM RID 5
            db_query( 'INSERT IGNORE INTO {users_roles} (uid, rid) VALUES (%d, %d)', $account->uid, 5 );
        }else if( $account->profile_custom_field == 'value2' ){
            // GIVE CUSTOM RID 6
            db_query( 'INSERT IGNORE INTO {users_roles} (uid, rid) VALUES (%d, %d)', $account->uid, 6 );
        }
    }

} 
```

对于操作列表，在“update”上执行它对我不起作用，而不是“after_update”，这就是为什么我添加了四个*可疑*操作，直到我测试并只保留需要的内容

希望能帮助到你

# ruby-on-rails - 在 Active Model Serializer 中创建根节点

> ID：15350859
> 
> 赞同：13
> 
> 时间：2013-03-11T23:57:04.627
> 
> 标签：ruby-on-rails, activerecord, active-model-serializers

我的 Rails 应用程序中有一个 JSON 数组，使用 Active Model Serializer 以这种格式：

```
[
  {
    "contact" : {}
  },
  {
    "contact" : {}
  }
] 
```

如何做到这一点，以便我删除联系人上方的一级节点使用活动模型序列化程序，如下所示：

```
[
 {
 },
 {
 }
] 
```

我还想删除节点名称“联系人”。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-12T02:57:33.133

这在[RailsCast #409 Active Model Serializers](http://railscasts.com/episodes/409-active-model-serializers)中有介绍。

为了删除根节点，您可以在控制器中添加`root: false`对的调用。`render`假设您`contact`在 JSON 中的 s 来自一个`contacts#index`方法，您的代码可能类似于：

```
def index
  @contacts = Contacts.all
  respond_to do |format|
    format.html
    format.json { render json: @contacts, root: false }
  end
end 
```

或者，如果您不想要任何 JSON 中的任何根节点，请在 中`ApplicationController`添加以下方法：

```
def default_serializer_options
  {root: false}
end 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-08-29T23:37:19.510

对于使用 ActiveModel::Serializer v0.10.x 的人，您需要创建一个初始化程序并包括以下内容：

```
# config/initializers/serializer.rb
ActiveModelSerializers.config.adapter = :json
ActiveModelSerializers.config.json_include_toplevel_object = true 
```

然后，只需重新启动您的应用程序，您应该会获得所需的根对象。

这适用于 Rails 5.1.x。YMMV。HTH。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-17T11:21:51.240

如果我没记错的话，通常根节点默认具有您的控制器的名称。

```
format.json { render json: @contacts} 
```

当然你需要删除root false，它会删除节点的名称。

如果您希望联系人作为根对象，请使用以下命令：

```
format.json { render json :@contacts, :root => 'contact' } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-16T13:16:09.913

> */config/initializers/serializer.rb*

```
ActiveModelSerializers.config.adapter = :json_api # Default: `:attributes` 
```

> 默认情况下，ActiveModelSerializers 将使用属性适配器（**无 JSON 根**）。但我们强烈建议您使用 JsonApi Adapter，它遵循jsonapi.org/format 中指定的格式的**1.0**。

# ruby - 如何在 Ruby 中就地“替换”数字对象

> ID：15350860
> 
> 赞同：-2
> 
> 时间：2013-03-11T23:57:16.873
> 
> 标签：ruby, pass-by-reference

我正在尝试调整 Ruby/Rails 函数中的变量。许多其他语言的标准内容。

在 c 中：

```
void change(int *io){
  *io = 1;
} 
```

现在我们都知道 Ruby 是通过引用传递的（*笑脸*）。这段代码完美运行：

```
def tester()
  value = 'dave'
  test_replace(value)
  p value.to_s;
end

def test_replace(ioValue)
  ioValue.replace 'test'  
end 
```

输出是“测试”。

所以问题是：固定数字没有替换方法。它们的传递方式与其他值不同。

所以我的问题是：我如何在 Ruby 中“io”一个“int”？

```
def tester()
  value = 10
  test_replace(value)
  p value.to_s;
end

def test_replace(ioValue)
  ioValue.replace 15  
end 
```

这引起了

> 10:Fixnum 的未定义方法“替换”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T00:54:01.367

@Linuxios 在他关于按值传递的解释中是正确的，但他的解决方法非常尴尬。使用支持替换的[SimpleDelegator](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/delegate/rdoc/SimpleDelegator.html)将 fixnum 装箱非常容易：

```
class NumberBox < SimpleDelegator
  alias_method :replace, :__setobj__
  class <<self; alias_method :[], :new; end
end

def tester()
  value = NumberBox[10]
  test_replace(value)
  p value.to_s;
end

def test_replace(ioValue)
  ioValue.replace 15  
end 
```

上面的`value`行为与它委托给的对象完全一样，在初始化时建立（with`::new`或 the `NumberBox::[]`），除了它还支持将新对象绑定为受委托者的`__setobj__`方法及其别名。`replace`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T00:03:16.187

实际上有两种方法可以做到这一点：

1.  包裹在一个对象中
2.  包裹在一个数组中
3.  创建一个可变整数代理对象

选项二很简单，我不会举例。选项 1 如下所示：

```
class IntRef < BasicObject
  def initialize(i)
    @int = i
  end
  def replace(v)
    @int = v
  end
  def method_missing(name, *args, &block)
    @int.send(name, *args, &block)
  end
end 
```

或选项三：代理对象！

```
class MutableInt < BasicObject
  def initialize(i)
    @int = i
  end
  def method_missing(name, *args, &block)
    v = @int.send(name, *args, &block)
    if(v.is_a?(::Fixnum))
      @int = v
      return self
    end
    v
  end
end 
```

**警告：**任何事情，*你*对这个代理所做的任何事情都会粘住并改变对象。谨防。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T07:16:26.920

> 现在我们都知道 Ruby 是通过引用传递的

相反，Ruby 只是按值传递。没有通过引用。与 Java、Python 等相同。

# backbone.js - 在 Backbone.js 中具有新值和未定义值的 Model.set()

> ID：15350864
> 
> 赞同：3
> 
> 时间：2013-03-11T23:57:36.717
> 
> 标签：backbone.js, backbone-model

我想将呼叫保存到我的服务器，所以我目前正在使用`Model.save()`选项`patch`和发送`changedAttributes()`.

我想删除一个属性并添加一个新属性。`Model.set()`/每次`unset()`都会修改，这样我就不能将它与上述/方案一起使用。`changedAttributes()``Model.save()``patch`

我想我想简单地调用`Model.set()`并传入一个对象，其中包含我希望取消设置`undefined`的值以及我希望设置的值。

`unset()`有没有一种方法可以让我`set()`一次性获得`changedAttributes()`？或者也许确定`changedAttributes()`一组组合的操作？

```
// Currently
var m = new Backbone.Model({ "foo": "bar" });
m.unset("foo");
console.log(m.changedAttributes()); // { "foo": undefined }
m.set("baz", "bar");
console.log(m.changedAttributes()); // { "baz": "bar" }
console.log(m.attributes); // { "baz": "bar" }

// At this point, how do I get the combination of changed attributes? something like: { "foo": undefined, "baz": "bar" }?
// Is that even possible? Am I doing something horribly wrong?

//================================================================

// What (I think) I want is for Model.set() to remove attributes with values of undefined, so I only have to make one call and changedAttributes() will be pristine. Maybe with a option or something?
var w = new Backbone.Model({ "foo": "bar" });
w.set({ "foo": undefined, "baz": "bar" });
console.log(w.changedAttributes()); // { "foo": undefined, "baz": "bar" }
console.log(w.attributes); // I would like it to be { "baz": "bar" }, "foo" having been removed in the set() call.

//================================================================

// I was trying to avoid processing the objects by hand. I realize that I can do something like the following.
var h = new Backbone.Model({ "foo": "bar" });
var changes = { "foo": undefined, "baz": "bar" };
_.each(changes, function(val, key) {
    if (_.isUndefined(val)) {
        h.unset(key, { "silent": true });
    } else {
        h.set(key, val, { "silent": true });
    }
});
h.trigger('change'); // Trigger a change event after all the changes have been done.
console.log(changes); // { "foo": undefined, "baz": "bar" }
console.log(h.attributes); // { "baz": "bar" } 
```

上述代码在行动中的小提琴：http: [//jsfiddle.net/clayzermk1/AmBfh/](http://jsfiddle.net/clayzermk1/AmBfh/)

大约一年前似乎已经对此主题进行了一些讨论[https://github.com/documentcloud/backbone/pull/879](https://github.com/documentcloud/backbone/pull/879)。似乎我想要的功能在某个时候存在。

**编辑：**正如@dennis-rongo 指出的那样，我显然可以手动完成。重申我上面的问题：**“Backbone 是否允许一次设置/删除属性？” 如果不是，该决定背后的理由是什么？**Derick Bailey 创建了 Backbone.Memento ( [https://github.com/derickbailey/backbone.memento](https://github.com/derickbailey/backbone.memento) ) 来处理属性状态，Backbone 上有几个与此场景密切相关的模型状态问题 ( [https://github.com /documentcloud/backbone/pull/2360](https://github.com/documentcloud/backbone/pull/2360)，有点相关：[https](https://github.com/documentcloud/backbone/issues/2316) ://github.com/documentcloud/backbone/issues/2316 ，高度相关：[https](https://github.com/documentcloud/backbone/issues/2301) ://github.com/documentcloud/backbone/issues/2301 ）。

**编辑 2：**我不是在寻找手动解决方案，我可以*让它*或多或少地做我想要的（参见上面的示例代码）。**我正在寻找当前设计的理由，并为此常见场景提供一个干净的示例 - 一次性设置和取消设置。**

**更新：在**[https://github.com/documentcloud/backbone/issues/2301](https://github.com/documentcloud/backbone/issues/2301)中有一些关于这个主题的对话。我已经提交了一个拉取请求（[https://github.com/documentcloud/backbone/pull/2368](https://github.com/documentcloud/backbone/pull/2368)），试图鼓励对当前实现的讨论。

感谢所有发布答案的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:04:49.650

这个皮肤有很多方法！因此，我将重点关注您提出的问题部分：

> `unset()`有没有一种方法可以让我`set()`一次性获得`changedAttributes()`？

因为我认为这就是去这里的方式。

`Backbone.Model.unset()`只是`Backbone.Model.set()`. 从来源：

```
unset: function(attr, options) {
  return this.set(attr, void 0, _.extend({}, options, {unset: true}));
}, 
```

那么为什么不直接做`m.set({"baz": "bar", "foo": void 0});`呢？看看我从你那里分叉出来的这个小提琴：http: [//jsfiddle.net/dimadima/Q8ZuV/](http://jsfiddle.net/dimadima/Q8ZuV/)。从那里粘贴，结果将是

```
console.log(m.changedAttributes()); // { "baz": "bar", "foo": undefined }
console.log(m.attributes); // // {foo: undefined, baz: "bar"}, unfortunately "foo"is not deleted 
```

所以`m.attributes`有点不对劲，因为您未设置的密钥尚未*删除*，但您可以对此进行测试。

无论如何，我建议您浏览一下来源，`Backbone.Model.set()`以了解您的其他选择是什么。如果你愿意，我可以详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:49:19.353

像这样的东西应该工作。

基本上循环遍历所有`unset`无效的属性和属性（虚假和非布尔值）。

```
/** Create a Model and set attributes */
var President = Backbone.Model.extend({});
var m = new President({first: 'Abraham', last: 'Lincoln', age: 90});

/** Blank out an attribute or two */
m.set({age: ''});

/** Loop through each attributes and unset falsy ones.  
    Also pass in silent = true so it doesn't trigger a change event 
       (in case you have listeners).
*/
_.each(m.toJSON(), function(val, col){
   if (typeof val !=='boolean' && !val) {
       m.unset(col, {silent: true});
   }
}, this);

/** Output the new Model */
console.log(m.toJSON()); 
```

**或者**

`Model`如果您愿意朝那个方向发展，您可以创建一个仅包含更改的属性的新属性。

```
var President = Backbone.Model.extend({});
var m = new President({
    first: 'Abraham', last: 'Lincoln', age: 90, registered: true});

/** Blank out or change an attribute or two */
m.set({first: null});

/** Pass changed attributes to a new Model */
var t = new President();
if (!_.isEmpty(m.changedAttributes())) {
    _.each(m.changedAttributes(), function(val, col) {
        t.set(col, val);
   }, this);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:12:11.057

当前的实现将允许您调用`set()`并传入具有混合属性的对象来设置和取消设置。要有效地取消设置属性，请为其分配 的值`undefined`。键将保留在`attributes`模型的散列中，但任何时候模型被序列化为 JSON，`undefined`值都不会出现在序列化中（这是由于 的实现`JSON.stringify()`）。它不会`delete`来自模型的属性。

[在MDN - JSON - stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify#Description)`JSON.stringify()`上描述了在序列化中删除`undefined`值的行为：

> 如果在转换过程中遇到未定义、函数或 XML 值，则将其省略（当在对象中找到时）或审查为 null（当在数组中找到时）。

我没有为我的特定案例（BSON）使用 JSON 序列化，所以我最终不得不为自己手动编写一个解决方案。

我在 GitHub 上发起了一个 pull request 的讨论，最后决定保持 API 不变。有关详细信息，请参阅此拉取请求：[https](https://github.com/documentcloud/backbone/pull/2368) ://github.com/documentcloud/backbone/pull/2368 。

再次感谢所有参与讨论的人，包括 SO 和 GH。

# java - phong 着色器中的 LibGdx 着色器“没有名称的统一......”

> ID：15350865
> 
> 赞同：0
> 
> 时间：2013-03-11T23:57:53.767
> 
> 标签：java, opengl-es-2.0, libgdx, vertex-shader

我对 OpenGL 和 LibGdx 很陌生。我从[这些教程](http://www.learnopengles.com/category/android-tutorials/)开始，但想应用 phong 纹理。我尝试合并一些示例，但遇到了问题。

我在屏幕中央有一个球体和旋转立方体。我还有数百件事要解决，但目前，我不明白为什么 LibGdx 报告说找不到我的制服材料......

> 线程“LWJGL 应用程序”com.badlogic.gdx.utils.GdxRuntimeException 中的异常：java.lang.IllegalArgumentException：着色器中没有名称为“uMvpMatrix”的统一

### 像素着色器

*我不相信片段着色器是相关的，但它在底部以防万一。*

```
 #version 120
         uniform mat4 uMvpMatrix;
         varying vec3 diffuseColor; 
         // the diffuse Phong lighting computed in the vertex shader
         varying vec3 specularColor; 
         // the specular Phong lighting computed in the vertex shader
         varying vec4 texCoords; // the texture coordinates 

         void main()
         {                              
            vec3 normalDirection = 
               normalize(gl_NormalMatrix * gl_Normal);
            vec3 viewDirection = 
               -normalize(vec3(gl_ModelViewMatrix * gl_Vertex)); 
            vec3 lightDirection;
            float attenuation;

            if (0.0 == gl_LightSource[0].position.w) 
               // directional light?
            {
               attenuation = 1.0; // no attenuation
               lightDirection = 
                  normalize(vec3(gl_LightSource[0].position));
            } 
            else // point light or spotlight (or other kind of light) 
            {
               vec3 vertexToLightSource = 
                  vec3(gl_LightSource[0].position 
                  - gl_ModelViewMatrix * gl_Vertex);
               float distance = length(vertexToLightSource);
               attenuation = 1.0 / distance; // linear attenuation 
               lightDirection = normalize(vertexToLightSource);

               if (gl_LightSource[0].spotCutoff <= 90.0) // spotlight?
               {
                  float clampedCosine = max(0.0, dot(-lightDirection, 
                     gl_LightSource[0].spotDirection));
                  if (clampedCosine < gl_LightSource[0].spotCosCutoff) 
                     // outside of spotlight cone?
                  {
                     attenuation = 0.0;
                  }
                  else
                  {
                     attenuation = attenuation * pow(clampedCosine, 
                        gl_LightSource[0].spotExponent);
                  }
               }
            }

            vec3 ambientLighting = vec3(gl_LightModel.ambient); 
               // without material color!

            vec3 diffuseReflection = attenuation 
               * vec3(gl_LightSource[0].diffuse) 
               * max(0.0, dot(normalDirection, lightDirection)); 
               // without material color!

            vec3 specularReflection;
            if (dot(normalDirection, lightDirection) < 0.0) 
               // light source on the wrong side?
            {
               specularReflection = vec3(0.0, 0.0, 0.0); 
                  // no specular reflection
            }
            else // light source on the right side
            {
               specularReflection = attenuation 
                  * vec3(gl_LightSource[0].specular) 
                  * vec3(gl_FrontMaterial.specular) 
                  * pow(max(0.0, dot(reflect(-lightDirection, 
                  normalDirection), viewDirection)), 
                  gl_FrontMaterial.shininess);
            }

            diffuseColor = ambientLighting + diffuseReflection;
            specularColor = specularReflection;
            texCoords = gl_MultiTexCoord0;
            gl_Position = gl_ModelViewProjectionMatrix * gl_Vertex;
         } 
```

### 设置

```
shader = new ShaderProgram(vertexShader, fragmentShader);
mesh = Shapes.genCube();
mesh.getVertexAttribute(Usage.Position).alias = "a_position"; 
```

### 使成为

```
...
float aspect = Gdx.graphics.getWidth() / (float) Gdx.graphics.getHeight();
projection.setToProjection(1.0f, 20.0f, 60.0f, aspect);
view.idt().trn(0, 0, -2.0f);
model.setToRotation(axis, angle);
combined.set(projection).mul(view).mul(model);

Gdx.gl20.glViewport(0, 0, Gdx.graphics.getWidth(), Gdx.graphics.getHeight());

shader.begin();
shader.setUniformMatrix("uMvpMatrix", combined);
mesh.render(shader, GL20.GL_TRIANGLES);
shader.end(); 
```

### 堆栈跟踪

```
at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:113)
Caused by: java.lang.IllegalArgumentException: no uniform with name 'uMvpMatrix' in shader
at com.badlogic.gdx.graphics.glutils.ShaderProgram.fetchUniformLocation(ShaderProgram.java:283)
at com.badlogic.gdx.graphics.glutils.ShaderProgram.setUniformMatrix(ShaderProgram.java:539)
at com.badlogic.gdx.graphics.glutils.ShaderProgram.setUniformMatrix(ShaderProgram.java:527)
at com.overshare.document.Views.Test.onRender(Test.java:150)
    ... 
```

### 片段着色器

```
#ifdef GL_ES
precision mediump float;
#endif
precision mediump float;       
varying vec4 v_Color;          
void main()                    
{                              
    gl_FragColor = v_Color;     
} 
```

* * *

有人可以告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:19:38.530

此外，问题可能出在精度说明符中。在设备（Nexus S）上，下一个统一定义将引发相同的错误：

```
uniform float yShift; 
```

使用精度说明符解决了这个问题：

```
uniform lowp float yShift; 
```

LibGDX 允许检查着色器编译并获取错误日志：

```
if(!shader.isCompiled()){
    String log = shader.getLog();
} 
```

最后，还有忽略着色器错误的标志：

```
ShaderProgram.pedantic = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T03:45:53.083

我遇到了类似的事情。我认为因为你的着色器不*使用*“uMvpMatrix”统一，它的声明被优化了，所以当你去设置它时它“不存在”。如果你改变你的着色器以某种方式引用矩阵，你应该走得更远。

请参阅（间接） [（未使用的）GLSL 制服/输入/输出是否有助于注册压力？](https://stackoverflow.com/questions/12148992/do-unused-glsl-uniforms-in-out-contribute-to-register-pressure)

我相信有一些方法可以离线开发和编译着色器，所以对于复杂的着色器，在 Libgdx 之外开发它可能是有意义的（希望你会得到更好的错误消息）。Libgdx 只是将巨大的字符串传递到较低的层，它对着色器本身没有多大作用，因此不应该存在兼容性问题。

# javascript - 在jquery中，如何在一段时间内更改标题中的文本？

> ID：15350867
> 
> 赞同：1
> 
> 时间：2013-03-11T23:57:57.690
> 
> 标签：javascript, jquery, html

```
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>5</title>

<link rel="stylesheet" type="text/css" href="css/stage.css" />

<script src="jslibs/jquery-1.9.1.min.js"></script>
<script>
$(document).click(function(event) {
     var x = event.offsetX,
     y = event.offsetY;

     $('#player').animate({
         top: y,
         left: x
     }, 1000);

     $('#change').html('hello');
});
</script>

</head>
<body>
<div id="header">
<h1 id="change">Mario is standing still...</h1>
</div>
<div id="stage">
<img id="player" src="images/mario.gif" alt="Mario" />
</div>

</body>
</html> 
```

那是我的代码，但是当我单击它时，它只会永久更改为 hello，我希望它仅更改为 hello 1000 毫秒。我一直在到处寻找 jqueryAPI、google、任何地方。我就是不能让它发生。有人有想法么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:02:24.400

您只需要在 setTimeout 中重新设置您正在执行的操作

```
$(document).click(function(event) {
 var x = event.offsetX,
 y = event.offsetY;

 $('#player').animate({
     top: y,
     left: x
 }, 1000);

 var original = $('#change').html();
 $('#change').html('hello');
 setTimeout(function(){
     $('#change').html(original);
 }, 1000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:00:33.250

您可以使用该[`setTimeout()`](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)功能来延迟命令：

```
$('#change').html('hello');
setTimeout(function() {
    $('#change').html('Mario is standing still...');
}, 1000); 
```

该函数是原生 JavaScript 的一部分，它与 jQuery 没有任何关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T00:03:28.753

试试这个代码而不是当前行

```
 $('#change').html('hello').delay(1000).html('Mario is standing still...'); 
```

或者，如果“马里奥站着不动……”的价值是可以改变的，你可以使用

```
 var originalText = $('#change').html();
    $('#change').html('hello').delay(1000).html(originalText); 
```

# iphone - 使用导航控制器故事板将值传递给 tableview

> ID：15350869
> 
> 赞同：2
> 
> 时间：2013-03-11T23:58:12.720
> 
> 标签：iphone, ios5, ios6, storyboard, uistoryboardsegue

如何将值传递给具有导航控制器的表视图控制器？

我有代码来推送新的视图控制器并使其处于活动状态，但无法将值传递给表视图。

```
UIViewController *newTopViewController = [self.storyboard instantiateViewControllerWithIdentifier:identifier]; 
```

问题是我将导航控制器拖到情节提要上，并将其附加到表格视图中。我将该表格视图链接到我的自定义表格视图类。当我从名称“nav”（导航控制器的故事板 ID）实例化视图控制器时，我将导航控制器作为正在实例化的视图控制器（newTopViewController）；那么如何将值从我实例化视图的位置传递给 tableview 控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T02:58:00.973

我知道这已经得到了回答（做得很好 ttarules），但我想我会传递一些额外的评论。在导航控制器中嵌入某种类型的视图控制器是很常见的。将标准视图控制器包装在导航控制器中，然后对其进行模态转场，为您提供模态场景，并带有一个漂亮的导航栏来放置按钮等。同样在 iPad 上，替换转场通常可以使用导航控制器。这完全取决于您如何设计事物，但如果您知道控制器如何堆叠以及如何轻松引用它们，您将拥有更多设计选择。这是一个片段，您可以在准备 segue 方法中使用它来轻松检测它。

```
if ([segue.destinationViewController isKindOfClass:[UINavigationController class]]) {

    //note: have to get reference to next vc through nav controller
    self.nextViewController = [[(UINavigationController*)segue.destinationViewController viewControllers]lastObject];
}
else {
    self.nextViewController = segue.destinationViewController;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:05:09.693

如果您已经打算使用该 VC，您应该在 prepareForSegue 中传递它。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"whateverYourSegueIsCalled"])
   {
        YourTableViewController *tableView=(YourTableViewController*)segue.destinationViewController;
        tableView.anyPublicProperty = yourValue;
    }
} 
```

编辑：

好的，既然你实际上只是嵌入了 tableView，你只需要访问 navigationViewController 的 viewControllers 属性。

所以它会在你的 navigationViewController 类中是这样的：

```
YourTableViewController *tableView = (YourTableViewController*)[self.navigationController.viewControllers objectAtIndex:0];
tableView.yourPublicProperty = whateverValueYouWant; 
```

- 除非您还嵌入了其他 VC，否则您的 tableView 将是索引 0 处的对象。所以您可以打印出您的 vc，然后从那里找出它。

# c++ - C ++中的聊天程序返回无限消息

> ID：15350871
> 
> 赞同：0
> 
> 时间：2013-03-11T23:58:37.377
> 
> 标签：c++, windows, sockets, chat

这是我遇到问题的聊天应用程序代码。

聊天系统通过拥有一个主服务器来工作，所有客户端都连接到该服务器。所以，这里是主服务器的代码。

```
#pragma comment(lib, "Ws2_32.lib")

#include <WinSock2.h>
#include <Windows.h>
#include <iostream>

using namespace std;

SOCKADDR_IN addr;

SOCKET sListen;
SOCKET sConnect;
SOCKET* Connections;

int addrlen = sizeof(addr);
int ConCounter = 0;

struct Buffer
{
    int ID;
    char Message[256];
};

int ServerThread(int ID)
{
    Buffer sbuffer;

    char* Recv = new char[256];
    ZeroMemory(Recv, 256);

    char* Send = new char[sizeof(Buffer)];
    ZeroMemory(Send, sizeof(Buffer));

    for(;; Sleep(10))
    {
        if(recv(Connections[ID], Recv, 256, NULL))
        {
            sbuffer.ID = ID;
            memcpy(sbuffer.Message, Recv, 256);
            memcpy(Send, &sbuffer, sizeof(Buffer));

            for(int a = 0; a != ConCounter; a++)
            {
                if(Connections[a] == Connections[ID])
                {

                }
                else
                {
                    send(Connections[a], Send, sizeof(Buffer), NULL);
                }
            }
            ZeroMemory(Recv, 256);
        }
    }

    return 0;
}

int InitWinSock()
{
    int RetVal = 0;
    WSAData wsaData;
    WORD DllVersion = MAKEWORD(2,1);
    RetVal = WSAStartup(DllVersion, &wsaData);

    return RetVal;
}

int main()
{
    int RetVal = 0;
    RetVal = InitWinSock();
    if(RetVal != 0)
    {
        MessageBoxA(NULL, "Winsock startup failed", "Error", MB_OK | MB_ICONERROR);
        exit(1);
    }

    Connections = (SOCKET*)calloc(64, sizeof(SOCKET));

    sListen = socket(AF_INET, SOCK_STREAM, NULL);
    sConnect = socket(AF_INET, SOCK_STREAM, NULL);

    addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    addr.sin_port        = htons(1234);
    addr.sin_family      = AF_INET;

    bind(sListen, (SOCKADDR*)&addr, sizeof(addr));

    listen(sListen, 64);

    for(;; Sleep(50))
    {
        if(sConnect = accept(sListen, (SOCKADDR*)&addr, &addrlen))
        {
            Connections[ConCounter] = sConnect;

            char* ID = new char[64];
            ZeroMemory(ID, sizeof(ID));

            itoa(ConCounter, ID, 10);
            send(Connections[ConCounter], ID, sizeof(ID), NULL);

            ConCounter = ConCounter + 1;
            CreateThread(NULL, NULL, (LPTHREAD_START_ROUTINE) ServerThread, (LPVOID)(ConCounter - 1), NULL, NULL);
        }
    }

    return 0;
} 
```

以下是客户端聊天的来源：

```
#pragma comment(lib, "Ws2_32.lib")

#include <WinSock2.h>
#include <Windows.h>
#include <iostream>

using namespace std;

SOCKADDR_IN addr;

SOCKET sConnect;

// For this we need to send two information at one time:
// 1\. The main message
// 2\. The ID

// To send more than one information I will use a struct
struct Buffer
{
    int ID;
    char Message[256];
};

int ClientThread()
{
    Buffer sbuffer;

    char buffer[sizeof(sbuffer)] = {0};

    for(;; Sleep(10))
    {
        // The server will send a struct to the client
        // containing message and ID
        // But send only accepts a char as buffer parameter
        // so here we need to recv a char buffer and then
        // we copy the content of this buffer to our struct
        if(recv(sConnect, buffer, sizeof(sbuffer), NULL))
        {
            memcpy(&sbuffer, buffer, sizeof(sbuffer));
            cout << "<Client " << sbuffer.ID << ":> " << sbuffer.Message <<endl;
        }
    }

    return 0;
}

int main()
{
    system("cls");

    int RetVal = 0;

    WSAData wsaData;
    WORD DllVersion = MAKEWORD(2,1);
    RetVal = WSAStartup(DllVersion, &wsaData);
    if(RetVal != 0)
    {
        MessageBoxA(NULL, "Winsock startup failed", "Error", MB_OK | MB_ICONERROR);
        exit(1);
    }

    sConnect = socket(AF_INET, SOCK_STREAM, NULL);

    addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    addr.sin_port        = htons(1234);
    addr.sin_family      = AF_INET;

    cout << "Connect to Masterserver? [ENTER]" <<endl;
    getchar();
    RetVal = connect(sConnect, (SOCKADDR*)&addr, sizeof(addr));

    if(RetVal != 0)
    {
        MessageBoxA(NULL, "Could not connect to server", "Error", MB_OK | MB_ICONERROR);
        main();
    }
    else
    {
        int ID;
        char* cID = new char[64];
        ZeroMemory(cID, 64);

        recv(sConnect, cID, 64, NULL);
        ID = atoi(cID);

        cout << "Connected" <<endl;
        cout << "You are Client No: " << ID <<endl;

        CreateThread(NULL, NULL, (LPTHREAD_START_ROUTINE) ClientThread, NULL, NULL, NULL);

        for(;; Sleep(10))
        {
            char* buffer = new char[256];
            ZeroMemory(buffer, 256);

            cin >> buffer;
            getchar();

            send(sConnect, buffer, 256, NULL);
        }
    }

    return 0;
} 
```

现在，一切正常，除非您连接两个客户端（运行应用程序两次）并关闭其中一个客户端，关闭应用程序的客户端向聊天中发送无限的消息，这些消息永远不会停止！有什么帮助解决这个问题吗？

如果可能的话，我想请人帮我评论源代码！

更新代码：

```
#pragma comment(lib, "Ws2_32.lib")

#include <WinSock2.h>
#include <Windows.h>
#include <iostream>
#include <string>

using namespace std;

SOCKADDR_IN addr;

SOCKET sConnect;

struct Buffer
{
    int ID;
    char Message[256];
};

int ClientThread()
{
    Buffer sbuffer;

    string buffer;
    //char buffer[sizeof(sbuffer)] = {0};

    for(;; Sleep(10))
    {
        if(recv(sConnect, buffer.c_str(), sizeof(sbuffer), NULL)!=SOCKET_ERROR)
        {
            strncpy(sbuffer.Message, buffer.c_str(), sizeof(sbuffer.Message));
            cout << "<Client " << sbuffer.ID << ":> " << sbuffer.Message <<endl;
        }
    }

    return 0;
}

int main()
{
    system("cls");

    int RetVal = 0;

    WSAData wsaData;
    WORD DllVersion = MAKEWORD(2,1);
    RetVal = WSAStartup(DllVersion, &wsaData);
    if(RetVal != 0)
    {
        MessageBoxA(NULL, "Winsock startup failed", "Error", MB_OK | MB_ICONERROR);
        exit(1);
    }

    sConnect = socket(AF_INET, SOCK_STREAM, NULL);

    addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    addr.sin_port        = htons(1234);
    addr.sin_family      = AF_INET;

    cout << "Connect to Masterserver? [ENTER]" <<endl;
    getchar();
    RetVal = connect(sConnect, (SOCKADDR*)&addr, sizeof(addr));

    if(RetVal != 0)
    {
        MessageBoxA(NULL, "Could not connect to server", "Error", MB_OK | MB_ICONERROR);
        main();
    }
    else
    {
        int ID;
        char* cID = new char[64];
        ZeroMemory(cID, 64);

        recv(sConnect, cID, 64, NULL);
        ID = atoi(cID);

        cout << "Connected" <<endl;
        cout << "You are Client No: " << ID <<endl;

        CreateThread(NULL, NULL, (LPTHREAD_START_ROUTINE) ClientThread, NULL, NULL, NULL);

        for(;; Sleep(10))
        {
            char* buffer = new char[256];
            ZeroMemory(buffer, 256);

            getline(cin,buffer);
            //cin >> buffer;
            getchar();

            send(sConnect, buffer, 256, NULL);
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:03:12.627

当客户端正常断开连接时，`recv()`将返回 0。当客户端异常断开连接或发生任何其他错误时，`recv()`将返回`SOCKET_ERROR`，然后您可以使用`WSAGetLastError()`它找出错误的原因。当返回 <= 0 时，您需要处理这两种情况并让服务器“忘记客户端” `recv()`（除了`SOCKET_ERROR`/的特定情况`WSAEWOULDBLOCK`，这不是致命错误）。目前，您正在处理套接字错误，就好像您确实从客户端接收到数据一样。

您*正在*测试`recv()`针对零的返回值，但这不是`recv()`错误返回的值（`SOCKET_ERROR`实际上是 -1 的别名，并且`if (-1)`评估为真，而不是假）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T00:30:55.683

您的服务器陷入循环的原因是您没有`recv()`正确使用 的返回值。

您的代码还有其他问题（滥用`CreateThread()`, 对于初学者）。

试试这个：

```
#pragma comment(lib, "Ws2_32.lib")

#include <WinSock2.h>
#include <Windows.h>
#include <iostream>

using namespace std;

SOCKADDR_IN addr;
int addrlen;

SOCKET sListen;
SOCKET sConnect;
SOCKET Connections[64];

struct Buffer
{
    int ID;
    char Message[256];
};

bool doSend(SOCKET s, void *data, int datalen)
{
    char pdata = (char*) data;

    while (datalen > 0)
    {
        int numSent = send(s, pdata, datalen, NULL);
        if (numSent < 1)
            return false;

        pdata += numSent;
        datalen -= numSent;
    }

    return true;
}

DWORD WINAPI ServerThread(LPVOID lpParam)
{
    int ID = (int) lpParam;
    SOCKET sThisClient = Connections[ConID];

    char cID[64];
    ZeroMemory(cID, sizeof(cID));
    itoa(ID, cID, 10);

    if (doSend(sThisClient, cID, sizeof(cID)))
    {
        Buffer sbuffer;
        sbuffer.ID = ID;
        ZeroMemory(sbuffer.Message, sizeof(sbuffer.Message));

        for (;; Sleep(10))
        {
            int numRecv = recv(sThisClient, sbuffer.Message, sizeof(sbuffer.Message), NULL);
            if (numRecv < 1)
                break;

            for (int a = 0; a < 64; a++)
            {
                SOCKET sOtherClient = Connections[a];
                if ((sOtherClient != INVALID_SOCKET) && (sOtherClient != sClient))
                    doSend(sOtherClient, &sbuffer, sizeof(Buffer));
            }
        }

        ZeroMemory(sbuffer.Message, sizeof(sbuffer.Message));
    }

    closesocket(Connections[ID]);
    Connections[ID] = INVALID_SOCKET;

    return 0;
}

int main()
{
    for (int i = 0; i < 64; ++i)
       Connections[i] = INVALID_SOCKET;

    WSAData wsaData;
    int RetVal = WSAStartup(MAKEWORD(2,1), &wsaData);
    if (RetVal != 0)
    {
        MessageBoxA(NULL, "Winsock startup failed", "Error", MB_OK | MB_ICONERROR);
        exit(1);
    }

    sListen = socket(AF_INET, SOCK_STREAM, NULL);
    if (sListen == INVALID_SOCKET)
    {
        MessageBoxA(NULL, "Socket create failed", "Error", MB_OK | MB_ICONERROR);
        exit(1);
    }

    sConnect = socket(AF_INET, SOCK_STREAM, NULL);
    if (sConnect == INVALID_SOCKET)
    {
        MessageBoxA(NULL, "Socket create failed", "Error", MB_OK | MB_ICONERROR);
        exit(1);
    }

    addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    addr.sin_port        = htons(1234);
    addr.sin_family      = AF_INET;

    if (bind(sListen, (SOCKADDR*)&addr, sizeof(addr)) != 0)
    {
        MessageBoxA(NULL, "bind failed", "Error", MB_OK | MB_ICONERROR);
        exit(1);
    }

    if (listen(sListen, 64) != 0)
    {
        MessageBoxA(NULL, "listen failed", "Error", MB_OK | MB_ICONERROR);
        exit(1);
    }

    for(;; Sleep(50))
    {
        addrlen = sizeof(addr);

        sConnect = accept(sListen, (SOCKADDR*)&addr, &addrlen);
        if (sConnect != INVALID_SOCKET)
        {
            int ConID = -1;
            for (int i = 0; i < 64; ++i)
            {
                if (Connections[i] == INVALID_SOCKET);
                {
                    ConID = i;
                    break;
                }
            }

            if (ConID == -1)
            {
                closesocket(sConnect);
                continue;
            }

            Connections[ConID] = sConnect;

            HANDLE hThread = CreateThread(NULL, NULL, &ServerThread, (LPVOID)ConID, NULL, NULL);
            if (!hThread)
            {
                closesocket(sConnect);
                Connections[ConID] = INVALID_SOCKET;
                continue;
            }

            CloseHandle(hThread);
        }
    }

    return 0;
} 
```

.

```
#pragma comment(lib, "Ws2_32.lib")

#include <WinSock2.h>
#include <Windows.h>
#include <iostream>

using namespace std;

SOCKADDR_IN addr;

SOCKET sConnect;

struct Buffer
{
    int ID;
    char Message[256];
};

bool doRecv(SOCKET s, void *data, int datalen)
{
    char pdata = (char*) data;

    while (datalen > 0)
    {
        int numRecv = recv(s, pdata, datalen, NULL);
        if (numRecv < 1)
            return false;

        pdata += numRecv;
        datalen -= numRecv;
    }

    return true;
}

DWORD WINAPI ClientThread(LPVOID lpParam)
{
    Buffer sbuffer;

    for(;; Sleep(10))
    {
        if (!doRecv(sConnect, &sbuffer, sizeof(sbuffer)))
            break;

        cout << "<Client " << sbuffer.ID << ":> " << sbuffer.Message << endl;
    }

    return 0;
}

int main()
{
    system("cls");

    WSAData wsaData;
    int RetVal = WSAStartup(MAKEWORD(2,1), &wsaData);
    if (RetVal != 0)
    {
        MessageBoxA(NULL, "Winsock startup failed", "Error", MB_OK | MB_ICONERROR);
        exit(1);
    }

    sConnect = socket(AF_INET, SOCK_STREAM, NULL);
    if (sConnect == INVALID_SOCKET)
    {
        MessageBoxA(NULL, "Socket create failed", "Error", MB_OK | MB_ICONERROR);
        exit(1);
    }

    addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    addr.sin_port        = htons(1234);
    addr.sin_family      = AF_INET;

    do
    {
        cout << "Connect to Masterserver? [ENTER]" << endl;
        getchar();

        RetVal = connect(sConnect, (SOCKADDR*)&addr, sizeof(addr));
        if (RetVal == 0)
            break;

        MessageBoxA(NULL, "Could not connect to server", "Error", MB_OK | MB_ICONERROR);
    }
    while (true);

    char cID[64];
    ZeroMemory(cID, 64);

    if (!doRecv(sConnect, cID, 64))
        exit(1);

    int ID = atoi(cID);

    cout << "Connected" << endl;
    cout << "You are Client ID: " << ID << endl;

    if (!CreateThread(NULL, NULL, &ClientThread, NULL, NULL, NULL))
        exit(1);

    for(;; Sleep(10))
    {
        string buffer;
        getline(cin, buffer);

        doSend(sConnect, buffer.c_str(), buffer.length());
    }

    return 0;
} 
```

**更新：**鉴于您最近的更新，您的客户端代码仍然存在问题。你有没有试过我上面给你的代码？下面是对您最近的代码的修复，但我仍然建议您查看上面的代码，它解决了原始代码的许多其他问题：

```
#pragma comment(lib, "Ws2_32.lib")

#include <WinSock2.h>
#include <Windows.h>
#include <iostream>
#include <string>

using namespace std;

SOCKADDR_IN addr;

SOCKET sConnect;

struct Buffer
{
    int ID;
    char Message[256];
};

int ClientThread()
{
    Buffer sbuffer;

    char buffer[sizeof(sbuffer)];

    for(;; Sleep(10))
    {
        int numRead = recv(sConnect, &buffer, sizeof(buffer), NULL);
        if (numRead < 1) break;

        memcpy(&sbuffer, buffer, numRead);
        cout << "<Client " << sbuffer.ID << ":> " << sbuffer.Message << endl;
    }

    return 0;
}

int main()
{
    system("cls");

    int RetVal = 0;

    WSAData wsaData;
    WORD DllVersion = MAKEWORD(2,1);
    RetVal = WSAStartup(DllVersion, &wsaData);
    if (RetVal != 0)
    {
        MessageBoxA(NULL, "Winsock startup failed", "Error", MB_OK | MB_ICONERROR);
        exit(1);
    }

    sConnect = socket(AF_INET, SOCK_STREAM, NULL);

    addr.sin_addr.s_addr = inet_addr("127.0.0.1");
    addr.sin_port        = htons(1234);
    addr.sin_family      = AF_INET;

    do
    {
        cout << "Connect to Masterserver? [ENTER]" <<endl;
        getchar();

        RetVal = connect(sConnect, (SOCKADDR*)&addr, sizeof(addr));
        if (RetVal == 0) break;

        MessageBoxA(NULL, "Could not connect to server", "Error", MB_OK | MB_ICONERROR);
    }
    while (true);

    char cID[64];
    ZeroMemory(cID, 64);

    recv(sConnect, cID, 64, NULL);
    int ID = atoi(cID);

    cout << "Connected" << endl;
    cout << "You are Client No: " << ID << endl;

    CreateThread(NULL, NULL, (LPTHREAD_START_ROUTINE) ClientThread, NULL, NULL, NULL);

    for(;; Sleep(10))
    {
        string buffer;
        getline(cin, buffer);
        if (send(sConnect, buffer.c_str(), buffer.length(), NULL) < 1)
            exit(1);
    }

    return 0;
} 
```

# javascript - 错误的javascript，带有表的jquery

> ID：15350885
> 
> 赞同：0
> 
> 时间：2013-03-12T00:00:12.383
> 
> 标签：javascript, jquery, html

我在一个项目中，当隐藏的对象和未隐藏的品牌我这个错误列不尊重我，我上面的所有对象我都离开了演示，所以他们可以我提到的 [http://jsfiddle.net/FT9BJ/](http://jsfiddle.net/FT9BJ/)

并且部分html只缺了demo中的javascript代码就能查代码html

```
 <html>
    <head>
    </head>
    <body>
    <table  width="70%" border="1">
                    <tbody>
    <tr>
    <td>
        <label>Area Medica</label>
    </td>
        <td>
        <select id="estado" onchange="habilitarComboa1(this.value);">
        <option value="1">Seleccione 1 opcion</option>
        <option value="2">Laboratorio</option>
        <option value="3">Datos Generales</option>
        <option value="4">Enfermeria</option>
        <option value="5">Nutricion</option>
        <option value="6">Odontologia</option>
        <option value="7">Área médica</option>
        </select>
        </td>

        <td>
            <label  id="departamento1" >Resultado</label>
        </td>
    <td id="columna1" style="display:none">

        <select name="departamento" id="departamento" onchange="habilitarCombo1a1(this.value);" style="display:none" >
        <option value="">Seleccione una opcion</option>
        <option value="BH-Eritrocitos"> BH-Eritrocitos  </option>
        <option value="BH-Hematócrito"> BH-Hematócrito  </option>
        <option value="BH-Hemoglobina"> BH-Hemoglobina  </option>
        <option value="BH-VCM"> BH-VCM  </option>
        <option value="BH-CMHbC">   BH-CMHbC    </option>
        <option value="BH-CMHb">    BH-CMHb </option>
        <option value="BH-Leucocitos">  BH-Leucocitos   </option>
        <option value="BH-Plaquetas">   BH-Plaquetas    </option>
        <option value="RD-Relativos-Linfocitos">    RD-Relativos-Linfocitos </option>
        <option value="RD-Relativos-Monocitos"> RD-Relativos-Monocitos  </option>
        <option value="RD-Relativos-Eosinófilos">   RD-Relativos-Eosinófilos    </option>
        <option value="RD-Relativos-Basófilos"> RD-Relativos-Basófilos  </option>
        <option value="RD-Relativos-NeuSegmentados">    RD-Relativos-NeuSegmentados </option>
        <option value="RD-Relativos-NeuBanda">  RD-Relativos-NeuBanda   </option>
        <option value="Grupo Sanguíneo">    Grupo Sanguíneo </option>
        <option value="Factor RH">  Factor RH   </option>
        <option value="Du"> Du  </option>
        <option value="QCGlucosa">  QC-Glucosa  </option>
        <option value="QC-Triglicéridos">   QC-Triglicéridos    </option>
        <option value="QC-Colésterol">  QC-Colésterol   </option>
        <option value="VDRL">   VDRL    </option>
        <option value="EGO-Densidad">   EGO-Densidad    </option>
        <option value="EGO-PH"> EGO-PH  </option>
        <option value="EGO-EQ-Glucosa"> EGO-EQ-Glucosa  </option>
        <option value="Bilirubina"> EGO-EQ-Bilirubina</option>
        <option value="EGO-EQ-Urobilinógeno">   EGO-EQ-Urobilinógeno    </option>
        <option value="EGO-EQ-Nitritos">    EGO-EQ-Nitritos </option>
        <option value="EGO-EQ-Proteínas">   EGO-EQ-Proteínas    </option>
        <option value="EGO-EQ-CuerposCetónicos">    EGO-EQ-CuerposCetónicos </option>
        <option value="EGO-EQ-Sangre">  EGO-EQ-Sangre   </option>
        <option value="EGO-EQ-Leucocitos">  EGO-EQ-Leucocitos   </option>
        <option value="EGO-EM-Leucocitos">  EGO-EM-Leucocitos   </option>
        <option value="EGO-EM-Bacterias">   EGO-EM-Bacterias    </option>
        <option value="EGO-EM-Parasitos">   EGO-EM-Parasitos    </option>
        <option value="EGO-EM-CelEpiteliales">  EGO-EM-CelEpiteliales   </option>
        <option value="EGO-EM-Eritrocitos"> EGO-EM-Eritrocitos  </option>
        <option value="EGO-EM-Levaduras">   EGO-EM-Levaduras    </option>
        <option value="EGO-EM-FilamentoMucoso"> EGO-EM-FilamentoMucoso  </option>
        <option value="EGO-EM-Cristales">   EGO-EM-Cristales    </option>
        <option value="EGO-EM-Cilindros">   EGO-EM-Cilindros    </option>   
        </select>

            <select  id="areamed" style= "display:none" onchange="habilitarCombo021(this.value);">
            <option selected="" value="">[Seleccione una opcion]</option>
            <option value="4">peso</option>
            <option value="5">Talla</option>
            <option value="6">Pliegue Tricipial</option>
            <option value="7">Embarazada</option>
            <option value="8">Cintura</option>
            <option value="9">IMC</option>
            </select>

        <!-- odontologia -->
        <select  id="odontologia" style= "display:none" onchange="habilitarCombo021(this.value);">
       <option selected="" value="">[Seleccione una opcion]</option>
       <option value="10">veces cepilla dientes</option>
       <option value="11">Tecnica cepillado</option>
       <option value="12">Profilaxis aguda</option>
       <option value="13" >Gingivorragia espontanea</option>
       <option value="14">Gingivorragia mecánica</option>
       <option value="15">Ortodoncia actual</option>
       <option value="16">Ortodoncia anterior</option>
       <option value="17" >dolor terceros molares</option>
       <option value="18">Total CPO</option>
       <option value="19">Dientes con caries</option>
        </select>

    <!-- nutricion -->
    <select  id="nutricion" style= "display:none" onchange="habilitarCombo021(this.value);">
       <option value="">Selecciona una opcion</option>
       <option value="20">Fumar</option>
       <option value="21">Bebidas Alcoholicas</option>
       <option value="22">Adicción drogas</option>
       <option value="23">Vida sexual</option>
       <option value="24">Edad vida sexual</option>
       <option value="25">Anticoncepción </option>
       <option value="26">Protección (Preservativo) </option>
       <option value="27">Núm. Parejas sexuales</option>
        </select>
    </td>

    <td id="columna2" style="display:none">
        <!-- select para elementos tipo numerico -->
        <select name="articulo" id="articulo"  style="display:none">
        <option selected="" value="">selecione valor</option>
        <option value="<"><</option>
        <option value=">">></option>
        <option value="=">=</option>
        </select>

        <!-- select para  grupo sanguineo -->
        <select name="sangre" id="sangre"  style="display:none">
        <option selected="" value="">selecione valor</option>
        <option value="A">A</option>
        <option value="B">B</option>
        <option value="AB">AB</option>
        <option value="AB">O</option>
        </select>
        <!-- select para  factor rh y vdrl -->
            <!-- area de enfermeria  -->
        <!-- select enfermeria  -->
        <select name="enfermeria" id="enfermeria" onchange="habilitarCombo5a1(this.value);" style="display:none" >
        <option value="">seleciona una opcion</option>
        <option value="1">Frecuencia cardiaca numerico</option>
        <option value="2">Temperatura axilar numerico</option>
        <option value="3">Frecuencia de respiración</option>
        <option value="4">Frecuencia de pulso numerico</option>
        </select>

            <select name="aream" id="aream" style="display:none" onchange="habilitarCombo4a1(this.value);" >
        <option value="">Selecciona una opcion</option>
        <option value="1">Sexo</option>
        <option value="2">Fecha de nacimiento</option>
        <option value="3">Discapacidad</option>
        <option value="4">Edad</option>
        <option value="5">Area</option>
        <option value="6">Codigo del programa</option>
        <option value="7">Descripcion del programa</option>
        </select>

    </td>

    <!-- area medica -->
    <td id="columna3" style="display:none">
    <select name="posinega" id="posinega"  style="display:none">
        <option selected="" value="">selecione valor</option>
        <option value="+">+</option>
        <option value="-">-</option>

        </select>

        <select  id="mayme"  style="display:none">
        <option selected="" value="">selecione valor</option>
        <option value="1"> < </option>
        <option value="2"> > </option>
        <option value="3"> = </option>
        </select>
    <!-- etiqueta -->
        <label style="display:none">Area Medica</label>
    <!-- select  -->

        <!-- select boleano  -->
        <select name="sino" id="sino"style="display:none">
        <option value="1">Si </option>
        <option value="2">No</option>
        </select>
    </td>

    <td id="columna4" style="display:none">
    <input name="articulo2" id="articulo2" style="display:none"/>
        <!-- select sexo -->
        <select name="sexo" id="sexo"  style="display:none">
        <option value="1">Masculino </option>
        <option value="2">Femenino</option>
        </select>
        <!-- select areas  -->
        <select name="areas1" id="areas1"  style="display:none" >
        <option value="1">HUMANIDADES</option>
        <option value="2">AREA CIENCIAS BIOLOGICO AGROPECUARIAS</option>
        <option value="3">AREA TECNICA  </option>
        <option value="4">AREA ECONOMICO ADMINISTRATIVA </option>
        <option value="5">AREA CIENCIAS DE LA SALUD </option>
        </select>

    </td>

    <!-- numerico para la funcion de enfermeria -->

    <td id="columna5" style="display:none">

        <select  id="si"  style="display:none">
        <option label= "Yes" value= "yes"> Sí </option>
        <option selected= "selected" label= "No" value= "no"> No </option>
        </select>
        </td>
        <!-- boton de la funcion agregar -->
        <td><input type="button" value="+" class="clsAgregarFila"></td>
    </tr>
        </table>
        <script type="text/javascript" src="jss/jquery-1.9.0.min.js"></script>
        <script type="text/javascript" src="jss/manipulacion.js"></script>

    </body>

    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:57:48.347

如果页面不存在，则将 jQuery 添加到页面并重新定义`habilitarComboa1`

```
<script type="text/javascript">
if(typeof jQuery === undefined){
    var src = document.createElement('script'); src.src = "//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js";
    document.getElementsByTagName('body')[0].appendChild(src);
}

$(function(){
    // hide all of the options initially
    $('.options').hide();
})

var habilitarComboa1 = function(dato){
    var $option = $('#'+dato).show();
    $('.options').not($option).hide();
}
</script> 
```

将选项的值更改为链接选择列表的 id

```
<select id="estado" onchange="habilitarComboa1(this.value);">
    <option value="departmento">Laboratorio</option>
</select> 
```

将类“选项”添加到隐藏的选择列表中

```
<select name="departamento" id="departamento" class="options" onchange="habilitarCombo1a1(this.value);" style="display:none" >
    <option value="">Seleccione una opcion</option>
</select> 
```

# c++ - C ++：输入文件行的最后一个元素中的strtok奇怪行为？

> ID：15350888
> 
> 赞同：0
> 
> 时间：2013-03-12T00:00:19.083
> 
> 标签：c++, strtok

我正在逐行读取文件（示例如下所示），并且对于每一行，我使用 strtok 来获取按制表符划分的元素（如代码所示）。现在，当我使用数据创建文件时，我会这样做：键入“A”，键入 tab，键入“10” ，**按 enter**等等。在这种情况下，当打印数字时，后面会跟着奇怪的字符，有时是字母/数字。这个问题的“补丁”是按以下方式输入数据：键入“A”，按tab，键入“10”**按tab**。谁能向我解释为什么会这样，有没有更好的方法来解决它？

```
sample.txt

 A    10
 B    20
 C    30 

 //str contains a line of the file           
 char * pch = strtok (str,"\t");
 //print character
 if(pch !=NULL){
    cout<<pch<<endl;
 }
 //print number
 pch = strtok (NULL, "\t");
 if(pch !=NULL){
    cout<<pch<<endl;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T04:18:28.787

我不知道问题的原因是什么，但我通过在从文件读取的每一行的末尾添加一个制表符（“\t”）字符来“修复”它。

# mysql - 来自多个表的内部联接

> ID：15350890
> 
> 赞同：1
> 
> 时间：2013-03-12T00:00:25.457
> 
> 标签：mysql, sql, mysql-error-1052

我有3张桌子，如下：

```
Patron
======
patron_num

Booking_For_Schedule
====================
tname
date
time
booking_num

Booking_By_Patron
=================
booking_num
patron_num 
```

我想检索带有`patron_num`、`date`、`time`和列的结果`tname`，如下所示：

```
patron_num     date      time     tname
     1      2013-11-03  20:00    TestName 
```

...ETC

这个作业问题的目的是教我们 INNER JOINS，但我遇到了一些困难。某种 SO 用户可以将我推向正确的方向吗？

这是我的 SQL：

```
SELECT `patron_num`,`date`,`time`,`tname`
FROM `booking_for_schedule` `F`
INNER JOIN `booking_by_patron` `B` on `F`.`booking_num` = `B`.`booking_num`
INNER JOIN `patron` `P` on `B`.`patron_num`=`P`.`patron_num` 
```

返回错误：`#1052 - Column 'patron_num' in field list is ambiguous`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:02:52.393

```
SELECT `P`.`patron_num`,`date`,`time`,`tname`
FROM `booking_for_schedule` `F`
INNER JOIN `booking_by_patron` `B` on `F`.`booking_num` = `B`.`booking_num`
INNER JOIN `patron` `P` on `B`.`patron_num`=`P`.`patron_num` 
```

将有助于消除歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:03:12.550

由于`patron_num`在多个表中，您需要指定要使用哪一个。您可以通过在表别名之前添加表别名来执行此操作，就像您在联接中一样。例子：

```
SELECT `B`.`patron_num`,`date`,`time`,`tname`
FROM `booking_for_schedule` `F`
INNER JOIN `booking_by_patron` `B` on `F`.`booking_num` = `B`.`booking_num`
INNER JOIN `patron` `P` on `B`.`patron_num`=`P`.`patron_num` 
```

# c# - 如果 Controller 的 Action 没有匹配的参数，RouteValues 会去哪里？

> ID：15350891
> 
> 赞同：0
> 
> 时间：2013-03-12T00:00:26.807
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-routing

如果我的一个视图中有以下代码：

```
@Html.Action("Grid", "Product", new { section = SectionType.Product }) 
```

这将调用`Grid`my 的 action 方法`ProductController`，这一切都很好。如果 Grid 方法是这样定义的：

```
public ActionResult Grid(SectionType section) { ... } 
```

然后参数将按照我的要求`section`填充为 。`SectionType.Product`但是，如果我**不**将参数放在方法声明中，如下所示：

```
public ActionResult Grid() { ... } 
```

然后`section`在视图中设置的值似乎完全消失了。它不在`Request.Params`，它不在`Request.QueryString`，事实上我似乎在任何地方都找不到它。

谁能告诉我这个值会发生什么？我可以从任何地方检索它，还是如果方法在参数列表中没有要求它，MVC 是否会完全丢弃它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:20:49.677

[您可以通过以下 RouteValueDictionary](http://msdn.microsoft.com/en-us/library/system.web.routing.routevaluedictionary.aspx) `Values`集合访问从路由中提取的任何`RouteData`参数`RequestContext`：

```
var section = Request.RequestContext.RouteData.Values["section"]; 
```

我不确定，如果它是需要的枚举类型（即`SectionType`）装箱到 an`object`中，或者只是一个`string`（也装箱到 an`object`中），您需要自己适当地转换为枚举类型。

如果没有可以获取`section`参数值的段的路由，则应该将其存储在 中，`Request.QueryString`并且应该可以通过 访问`Request.QueryString["section"]`。同样在这种情况下，生成的 html 应该看起来像`...?section=SomeSection`，而如果你有合适的路线，它必须看起来像`.../SomeSection`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:14:17.420

我猜`SectionType`是一个枚举。如果是，则如果在 Action 中找不到匹配的参数，则会发生错误。

```
// throw exception if you don't pass section value
public ActionResult Grid(SectionType section) { ... } 
```

> 参数字典包含“MvcApplication1.Controllers.HomeController”中方法“System.Web.Mvc.ActionResult Index(MvcApplication1.Controllers.SectionType)”的不可为空类型“MvcApplication1.Controllers.SectionType”的参数“section”的空条目'。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数

`non-nullable`从上面的消息中可以看出，如果在 Action 中没有找到匹配的参数并且参数是类型，则会发生异常。

如果您像这样更改您的操作：

```
// nullable SectionType
public ActionResult Grid(SectionType? section) { ... } 
```

或者

```
// default value
public ActionResult Grid(SectionType section = SectionType.Area) { ... } 
```

当`section`是`nullable`类型时，将调用`section`值为空的动作。当`section`具有默认值时，将使用`section`值为 null 的动作调用，但在动作中它将使用默认值。

# ember.js - Ember.CollectionView 所有孩子 didInsertElement 回调

> ID：15350894
> 
> 赞同：2
> 
> 时间：2013-03-12T00:00:35.520
> 
> 标签：ember.js

从 Ember.CollectionView 是否有一种在渲染所有 childView 元素后调用函数的简单方法？

对于所有孩子来说，像 didInsertElement 这样的东西。

这就是我现在正在做的事情。有没有更好的办法？

```
App.CollectionView = Ember.CollectionView.extend

  didInsertChildElements: ( ->
    if @get('childViews').everyProperty('state', 'inDOM')
     @dosomething()
  ).observes('childViews')

  itemViewClass: Ember.View.extend() 
```

这里的编辑是我正在尝试做的一个更好的例子。

对于每个 ChildView，我使用 didInsertElement 设置位置，然后从父级滚动到使用父级 didInsertElement 回调的指定子级。问题是父母的 didInsertElement 回调在孩子之前被调用。

```
App.CollectionView = Ember.CollectionView.extend
  dateBinding: 'controller.date'

  didInsertElement: ->
    #@scrollTo @get('date')#old way
    Ember.run.scheduleOnce('afterRender', @, 'scrollToDate')

  scrollToDate: ->
    @scrollTo @get('date')

  scrollTo: (date) ->
    day = @get('childViews').findProperty('date', date)
    pos = day.get('position')
    #console.log pos
    @$().scrollTop(pos)

  itemViewClass: Ember.View.extend
    templateName: 'home/day'
    dateBinding: 'content.date'
    position: null

    didInsertElement: ->
      @set 'position', @$().offset().top
      #console.log @get('position') 
```

编辑

安排 afterRender 回调工作！Ember.run.scheduleOnce('afterRender', @, 'scrollToDate')

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T01:38:21.970

对于每个 ContainerView，子视图有两种进入 dom 的方式：要么在父视图 render() 时将它们与父视图本身一起插入，在这种情况下，当为parentView，或者由于 childViewsDidChange 将回调添加到“渲染”队列，它们被迫进入 DOM。

然后你可能会做的是在`afterRender`队列中添加你自己的回调，当`[]`发生变化时（视图本身在这里充当数组，用于观察目的），此时任何非“inDOM”视图都将被插入到视图中。

```
didInsertChildElements: ( ->
    if @get('state') === 'inDom'
        Ember.run.scheduleOnce('afterRender', this, 'dosomething');
).observes('[]') 
```

# javascript - 如何以编程方式创建用户可以下载的 Javascript 客户端文件？

> ID：15350895
> 
> 赞同：6
> 
> 时间：2013-03-12T00:00:43.473
> 
> 标签：javascript, file, client-side

我想尝试创建一个 Javascript 应用程序，该应用程序从用户的表单中获取输入，然后根据用户的表单输入生成一个文件。

然后，用户应该可以在不接触服务器的情况下下载该文件。

您如何使用 JavaScript 在客户端创建文件，以及可以将其存储在客户端的何处，以便无需先在服务器上创建就可以下载它？

更新：更具体地说，正如格雷厄姆回答的那样，我正在寻找创建文件的方法，而不必触及文件系统本身，而只是创建一个可以由用户下载的文件对象（Blob）。谢谢格雷厄姆！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T04:18:23.367

在不必使用文件系统的情况下执行此操作的一种方法是创建 blob。假设我们有一堆数据（在您的情况下，来自表单），我们希望将其保存到文本“文件”中。我们实际上可以做如下事情：

```
var formBlob = new Blob([someStringVariable], { type: 'text/plain' }); 
```

从这里，我们可以链接用户以将其下载为实际文件，如下所示：

```
someLink.href = window.URL.createObjectURL(formBlob); 
```

如果我们希望这些数据持久存在，我们可以将我们的 blob 序列化为 base64 字符串并将其保存到 localStorage 或任何其他持久类型的存储。将 blob 转换为 base64 有点超出此答案的范围，但您可以在此处找到一个很好的参考/库：[http ://blog.danguer.com/2011/10/24/base64-binary-decoding-in-javascript/](http://blog.danguer.com/2011/10/24/base64-binary-decoding-in-javascript/)

# c++ - 以下涉及输入和字符串的 C++ 代码有什么问题？

> ID：15350897
> 
> 赞同：1
> 
> 时间：2013-03-12T00:00:47.440
> 
> 标签：c++

```
#include <iostream>

typedef int temperature;
temperature celsiustemperature[4];

int main()
{
    using namespace std;
    cout << "Enter a start temperature in celsius: ";
    cin >> celsiustemperature[0];
    cout << "Enter an end temperature in celsius: ";
    cin >> celsiustemperature[1];
    cout << "You printed " << celsiustemperature[0] << " and " << celsiustemperature[1] << "." << " Is this correct?" << endl;
    char szYesOrNo;
    cin >> szYesOrNo;
    switch (szYesOrNo)
    {
        case "yes":
               cout << "win";
               break;
        case "no":
              cout << "winner";
              break;
     }
     return 0;
} 
```

我无法弄清楚以下代码有什么问题。很抱歉没有添加评论；`win`如果用户输入`yes`和`winner`用户输入，我希望它打印`no`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T00:03:41.503

这不会编译，因为`szYesOrNo`是 a `char`，并且您正在将它与`switch`语句中的字符串文字进行比较。字符串文字属于 类型`const char[]`，不能直接与 比较`char`。

使用`std::string`而不是`char`：

```
std::string szYesOrNo; 
```

这也将迫使您删除`switch`, 因为`switch`无法对`string`值进行操作（另请注意，您`switch`没有`default`大小写，因此它不会处理不正确的输入）。这样做：

```
if (szYesOrNo == "yes")
{
    cout << "win";
}
else if (szYesOrNo == "no")
{
     cout << "winner";
}
else
{
    // Handle wrong input...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:03:58.537

你不能打开一个字符串。仅适用于类整数类型（整数、枚举、字符、长整数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T00:04:14.187

您的代码的主要问题是您声明了一个变量，`char szYesOrNo;`它只能包含一个符号，例如一个字母，但随后期望该字符输入一个完整的单词。您应该使用 a`string`来代替。当你解决这个问题时，你将需要使用`if`语句而不是`switch`语句来做出决定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T00:04:27.170

首先，`szYesOrNo`是一个单一的`char`因此只能包含一个字符。当你这样做时`cin >> szYesOrNo;`，你只是在阅读`y`或`n`。

其次，您正在尝试使用`switch`语句将这个单曲`char`与字符串文字`"yes"`和`"no"`. 这种比较没有意义。字符串文字的类型是“N 数组`const char`”。

相反，`std::string`像这样使用：

```
string szYesOrNo;
cin >> szYesOrNo;
if (szYesOrNo == "yes") {
  cout << "win";
} else if (szYesOrNo == "no") {
  cout << "winner";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T00:04:42.403

szYesOrNo 是一个字符，所以你不能在“是”的情况下切换它，它是一个字符串（3个字符）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T00:02:59.493

```
char szYesOrNo; 
```

这是一个单一的字符。

```
switch (szYesOrNo)
{
    case "yes": 
```

这会将单个字符的值与string的**地址**`"yes"`进行比较，这不是您想要的。

输入到字符串，或比较字符。

比较字符：

```
switch (szYesOrNo)
{
    case 'y': 
```

要比较字符串，不能使用 switch 语句。您可以使用嵌套`if/else`：

```
string szYesOrNo;

if(szYesOrNo == "yes") {
    cout << "win";
} else if(szYesOrNo == "no") {
    cout << "winner";
} 
```

您可以`==`在将 a`string`与 a进行比较时使用`char[]`（这是什么`"yes"`）。`string`确保比较内容而不仅仅是地址。

# django-haystack - Django-Haystack - 如何将 Haystack 与 django-comments 一起使用？

> ID：15350899
> 
> 赞同：1
> 
> 时间：2013-03-12T00:00:58.773
> 
> 标签：django-haystack

我在 Django-Haystack 上苦苦挣扎。

我需要做一个包含文章和评论文章的索引。我的疑问是如何将文章和评论放入基于文档的索引中。

如何在评论和文章中搜索关键字并输出带有该关键字的文章（文章评论，文章）？

有可能的？

此致，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T23:32:46.047

首先要做的是忘记 a`SearchIndex`必须与模型完全对应的概念。它只来自一个。

最简单的方法是使用模板将注释添加到索引文档中。这假定您的`Article`模型是一个`title`字段：

```
class ArticleIndex(SearchIndex, indexes.Indexable):
    text = CharField(document=True, use_template=True)
    title = CharField(model_attr='title')

    def get_model(self):
        return Article 
```

请注意，关键字参数`use_template`设置为 true。默认值为[search/indexes/{app_label}/{model_name}_{field_name}.txt](https://django-haystack.readthedocs.org/en/latest/searchfield_api.html?highlight=use_template#template-name)。在该模板中，只需输出您要索引的内容。例如

```
{{ object.title|safe }}

{{ object.body|safe }}

{% for comment in object.comments.all %}
{{ comment|safe }}
{% endfor %} 
```

虽然我担心这里的特定反向关系名称可能是错误的，但这就是你想要做的事情的要点。同样，这是完成您具体说明的简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:52:25.490

这对我有用：

在你的`models.py`，假设评论附加到一个`Article`，你想要一个返回附加到它的评论的方法（没有简单的方法来做到这一点）：

```
class Article:
    def comments(self):
        ids = [self.id]
        ctype = ContentType.objects.get_for_model(Article)
        comments = Comment.objects.filter(content_type=ctype,
                                          object_pk__in=ids,
                                          is_removed=False)
        return comments 
```

在你的`search_indexes.py`，确保`ArticleIndex`有`use_template=True`：

```
from django.contrib.contenttypes.models import ContentType
from django.contrib.comments.models import Comment

class ArticleIndex(SearchIndex):
    text = CharField(use_template=True) 
```

在您的索引模板中，例如[templates/search/indexes/article_text.txt](https://django-haystack.readthedocs.org/en/latest/searchfield_api.html?highlight=use_template#template-name)：

```
{% for comment in object.comments.all %}
    {{ comment }}
{% endfor %} 
```

现在，唯一剩下的问题是在添加或删除评论时更新该特定索引对象。这里我们使用信号：

在你的 models.py 中：

```
from django.dispatch import receiver
from haystack import site
from django.contrib.comments.signals import (comment_was_posted,
                                             comment_was_flagged)

@receiver(comment_was_posted)
def comment_posted(sender, **kwargs):
    site.get_index(Article).update_object(kwargs['comment'].content_object)

@receiver(comment_was_flagged)
def comment_flagged(sender, **kwargs):
    site.get_index(Article).update_object(kwargs['comment'].content_object) 
```

# jquery - jquery如何使用模型绑定

> ID：15350903
> 
> 赞同：0
> 
> 时间：2013-03-12T00:01:38.400
> 
> 标签：jquery, asp.net-mvc-3

MVC 模型绑定器在从我的页面获取值并将它们作为我的复杂输入中的属性传递到我的操作方法方面做得很好。

我正在尝试创建一个购物车类型的页面，用户可以在其中配置行项目列表，然后提交整个订单。

起初，当用户想要添加一个项目时，我使用 Ajax 表单——现有 lineitem 的列表将被传递回控制器，一个新的 lineitem 将被添加，并返回列表的部分视图。

不幸的是，在提交 Ajax 表单后，您似乎无法重定向到另一个页面。不过，我不想在 jQuery 中这样做，因为当 MVC 模型绑定器做得如此出色时，我不想显式地创建复杂对象的列表。

编辑：澄清一下，这是我的问题：

我希望我的表单有 2 个操作，这两个操作都需要传回 lineitems 列表。

据我了解，我必须使用 javascript 至少执行其中一项操作。任何一个：

1.  使用一个 HtmlForm 提交整个订单，返回一个新视图
2.  单击“添加项目”按钮时，使用 jQuery 添加 lineitem

或者

1.  使用 AjaxForm 动态添加新的 lineitems
2.  提交订单后使用javascript进行重定向，但这意味着我也必须使用javascript提交数据

有没有办法在不使用 javascript 的情况下做到这一点？当 movdel binder 在我没有任何工作的情况下执行此操作时，我不想自己使用 JSON 创建 lineitems 列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:22:13.007

好的，我想了解您的需求...

*   从表单动作属性中获取目标动作 url
*   序列化表单以将其发送到控制器

并重定向到新页面。

```
$.ajax({
 url: $('#FormID').attr('action'),
 type: 'POST',
 data: $('#FormID').serialize(),
 success: function (result) {
  window.location = result;
 }
}); 
```

这里有一些文档信息[API jquery .serialize()](http://api.jquery.com/serialize/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:06:55.960

“不幸的是，在提交 Ajax 表单后，您似乎无法重定向到另一个页面。”

这并不完全正确。您可以让控制器的操作方法返回 javascript 重定向的 url 字符串。

```
public string SomeMethod(ViewModel vm)
{
  ...
  return "http://www.google.com";
} 
```

在你看来

```
$.ajax({
 url: "@(Url.Action("SomeMethod"))",
 type: 'POST',
 traditional: true,
 data: { ViewModel: jsonObject },
 success: function (result) {
  window.location = result;
 }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T00:07:05.133

您可以在您的视图中使用 javascript 重定向，该视图会随着表单提交返回......在您的视图底部有这样的东西。

```
@if(Model.ShouldRedirect)
{
    <script type="text/javascript">
      window.location = '/path/to/new/url';
    </script>
} 
```

# c++ - 比较对象指针

> ID：15350905
> 
> 赞同：0
> 
> 时间：2013-03-12T00:01:41.587
> 
> 标签：c++, pointers

我有这个函数来测试两个引用是否指向同一个对象。但我不断收到错误无效操作数到二进制表达式。

```
bool Collider::remove(Actor &actor){

    for(int x=0; x< this->stack.size(); x++){
        if( actor == this->stack[x]){
            return true;
        }
    }

    return false;
} 
```

这就是我定义变量堆栈的方式

```
vector<Actor*> stack; 
```

我有点理解这个问题，但不能完全正确地理解语法。
实际上我什至在这里比较对象，不是吗？看来我实际上是在测试这两个指针是否指向同一个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:27:08.697

`actor`是一个对象，它是通过引用传递的；它*不是*一个指针。所以你必须做的是比较`actor`指针的地址。我们通过使用一元运算符来做到这一点`&`：

```
if (&actor == this->stack[x]) 
```

`==`在实际对象上使用`actor`是无效的，除非它有足够的`operator==`. 否则你会得到你之前所说的错误。

# javascript - 谷歌地图，设置叠加空间

> ID：15350906
> 
> 赞同：1
> 
> 时间：2013-03-12T00:01:42.850
> 
> 标签：javascript, google-maps, google-maps-api-3

假设这是我的谷歌地图的最右边：![在此处输入图像描述](../Images/ef8c542123ad0eaaab7f57e4e4c4811e.png)

我有一个包含信息的不透明度框，我想知道是否有办法让像标记这样的覆盖不会出现在框后面，或者为它们定义一个区域，或者添加一个整体的覆盖边距填充，或者像让谷歌滚动地图直到infowindow 在地图上没有时就像 google 一样在全视野范围内

也许有人对此有意见？能有一个简单的覆盖吗？

***任何***提示_

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:43:22.450

在控件位置创建一个[自定义控件](https://developers.google.com/maps/documentation/javascript/controls#CustomControls)`RIGHT_CENTER`，其宽度等于框的宽度，高度为`0`.

此控件的高度`0`将被隐藏，但 API 仍将识别此控件并尝试将 infoWindow 平移到控件未覆盖的位置。

# python - Tornado 和 Mongodb 的阻塞和异步注意事项是什么？

> ID：15350907
> 
> 赞同：3
> 
> 时间：2013-03-12T00:01:55.340
> 
> 标签：python, asynchronous, tornado, pymongo, python-multithreading

我正在与 Mongodb 一起运行 Tornado Web 服务器（使用 pymongo 驱动程序）。我正在尝试做出架构决策以最大限度地提高性能。

当一起使用 Tornado 和 pymongo 时，我有几个关于结果应用程序的阻塞/非阻塞和异步方面的子问题：

## 问题一：连接池

该`pymongo.mongo_client.MongoClient`对象似乎自动实现了一个连接池。“连接池”的预期目的是为了让我可以从不同的线程同时访问 mongodb？如果使用单个线程中的单个 MongoClient 实例运行，是否真的没有“池”，因为任何时候都只会打开一个连接？

## 问题二：多线程Mongo调用

以下常见问题解答：

[http://api.mongodb.org/python/current/faq.html#does-pymongo-support-asynchronous-frameworks-like-gevent-tornado-or-twisted](http://api.mongodb.org/python/current/faq.html#does-pymongo-support-asynchronous-frameworks-like-gevent-tornado-or-twisted)

状态：

> 目前没有很好的方法将 PyMongo 与 Tornado 或 Twisted 结合使用。PyMongo 提供了内置的连接池，因此这些框架的一些好处可以通过编写共享 MongoClient 的多线程代码来实现。

所以我假设我只传递一个`MongoClient`对每个线程的引用？或者还有更多的东西吗？当每个线程产生结果时触发回调的最佳方法是什么？我是否应该让一个线程运行谁的工作是观察一个队列（python `Queue.Queue`）来处理每个结果，然后在 Tornado 中调用`finish()`左侧打开的对象？`RequestHandler`（当然`tornado.web.asynchronous`需要使用装饰器）

## 问题 3：多个实例

最后，有没有可能我只是在创作作品？我是否应该通过运行 Tornado 的单线程实例来简化事情，然后每个核心启动 3-4 个实例？（上面的常见问题参考似乎暗示了这一点）

毕竟，python 中的 GIL 不会导致有效的不同进程吗？或者 Tornado 的“非阻塞”方面是否有额外的性能考虑（正负）？（我知道这在 I/O 方面是非阻塞的，正如这里指出的那样： [Tornado 真的是非阻塞的吗？](https://stackoverflow.com/questions/3638844/is-tornado-really-non-blocking)）

（附加说明：我知道 asyncmongo 在： [https](https://github.com/bitly/asyncmongo) ://github.com/bitly/asyncmongo 但想直接使用 pymongo 而不是引入这个额外的依赖。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:17:57.553

据我了解，网络服务器有两个概念：

1.  基于线程 (apache)
2.  事件驱动（龙卷风）

你有python的GIL，GIL不适合线程，事件驱动是一种只使用一个线程的模型，所以选择事件驱动。

Pymongo 会阻止龙卷风，所以这里有一些建议：

1.  使用 Pymongo：使用它，并通过创建索引使您的数据库调用更快，但要注意；索引不适用于将扫描大量值的操作，例如：`gte`
2.  使用[AsyncMongo](https://github.com/bitly/asyncmongo)，似乎已经更新，但仍然不是所有 mongodb 功能。
3.  使用[Mongotor](https://github.com/marcelnicolay/mongotor)，这个就像是对 Asynchmongo 的更新，它有 ODM（对象文档映射器），拥有 MongoDB 所需的所有东西（聚合、副本集..），而你真正想念的唯一功能是 GridFS。
4.  使用[Motor](https://github.com/mongodb/motor)，这是与 Tornado 一起使用的*完整*解决方案，它具有 GridFS 支持，并且它是 Tornado 的官方 Mongodb 异步驱动程序，它使用了[Greenlet](https://github.com/python-greenlet/greenlet)的 hack ，因此唯一的缺点是不与 PyPy 一起使用。

现在，如果您决定使用 Tornado 以外的其他解决方案，如果您使用 Gevent，那么您可以使用 Pymongo，因为[据说](http://api.mongodb.org/python/current/faq.html#does-pymongo-support-asynchronous-frameworks-like-gevent-tornado-or-twisted)：

> PyMongo 完全支持的唯一异步框架是 Gevent。

注意：对不起，如果跑题了，但是这句话：

> 目前没有很好的方法将 PyMongo 与 Tornado 结合使用

应该从文档中删除，Mongotor 和 Motor 以完美的方式工作（尤其是 Motor）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-24T04:38:21.580

虽然这个问题很老，但我觉得给出的答案并不能完全解决用户提出的所有问题。

> 如果使用单个线程中的单个 MongoClient 实例运行，是否真的没有“池”，因为任何时候都只会打开一个连接？

如果您的脚本不使用线程，这是正确的。但是，如果您的脚本是多线程的，那么在给定时间将打开多个连接

> 最后，有没有可能我只是在创作作品？我是否应该通过运行 Tornado 的单线程实例来简化事情，然后每个核心启动 3-4 个实例？

不，你不是！与多个分叉相比，创建多个线程占用的资源更少。

> 毕竟，python 中的 GIL 不会导致有效的不同进程吗？

GIL 只防止多个线程同时访问解释器。不阻止多个线程同时执行 I/O。事实上，这正是 motor with asyncio 实现异步性的方式。

它使用线程池执行器为每个查询生成一个新线程，并在线程完成时返回结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T00:13:27.250

你也知道电机吗？: [http://emptysquare.net/blog/introducing-motor-an-asynchronous-mongodb-driver-for-python-and-tornado/](http://emptysquare.net/blog/introducing-motor-an-asynchronous-mongodb-driver-for-python-and-tornado/) 由 pymongo 的合著者 Jesse Davis 编写

# grails - 用插件创建ICal，好像只能下载，不知道怎么附加发送邮件功能

> ID：15350911
> 
> 赞同：1
> 
> 时间：2013-03-12T00:02:18.447
> 
> 标签：grails, grails-plugin, grails-2.0

标准 Grails 邮件插件[Mail-Plugin](http://grails.org/plugin/mail)

用于创建 ICal 文件的 ICal 插件[I-Cal-Plugin](http://grails.org/plugin/ic-alendar)

我已经非常轻松地成功使用了邮件，附加文件等，但是，让 Ical 使用`attachBytes`from`mail plugin`证明是困难的

```
sendMail {
            multipart true
            to test@test.com
            subject "whatever..."
            html g.render(template:"/emails/Attendees", model:[ instance: inst])
            inline "banner",  "image/jpeg", new File("./web-app/images/emailTemplates/email_banner.png")
            inline "footer",  "image/jpeg", new File("./web-app/images/emailTemplates/lEdvn.png")
         } 
```

要附加您使用的文件`attachBytes`，我试图使用在示例`render`中找到的标准示例函数`ical docs`

```
 def ical = render(contentType: 'text/calendar', filename: '<optional filename>') {
                calendar {
                    events {
                        event(start: Date.parse('dd.MM.yyyy HH:mm', '31.10.2009 14:00'),
                                end: Date.parse('dd.MM.yyyy HH:mm', '31.10.2009 15:00'),
                                description: 'Events description',
                                summary: 'Short info1') {
                                    organizer(name: 'Silvio Wangler', email: 'a@b.com')
                                }
                          }
              }
  } 
```

`def ical`技术上无关紧要的仍然呈现即在到达此代码块时立即下载。这个想法是保存并附加到电子邮件中，无需下载。

谢谢你的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:19:09.640

任何偶然发现这篇文章的人都是答案：

```
def builder = new ICalendarBuilder()

builder.calendar {
events {
    event(start: new Date(), end: (new Date()).next(), summary: 'Text') {
        organizer(name:'Silvio', email:'test@test.com')
        reminder(minutesBefore: 15, description: 'Alarm 123')
    }
  }
} 
```

然后对于电子邮件`sendMail`功能添加：

```
attachBytes "appointment.ics", "text/calendar", builder.cal.toString().getBytes('UTF-8') 
```

# java - 位置值在 android 中使用 facebook API 为空

> ID：15350913
> 
> 赞同：0
> 
> 时间：2013-03-12T00:02:21.210
> 
> 标签：java, android, facebook, api, location

我正在尝试制作一个简单的应用程序，我唯一想要检索的是我当前位置的坐标，使用 facebook 用户的数据。我正在按照本指南开始使用： [https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)

唯一的区别是我替换的地方

```
user.getName(); 
```

和

```
user.getLocation().getLatitude(); //it's always null and so throws exception. 
```

然后我尝试了其他方法，例如 getCountry() 或 getState(); 该值始终为空。

有人知道如何解决这个问题并使用这些方法获取位置值吗？谢谢。

这是我的部分代码：

```
 @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // start Facebook Login
    Session.openActiveSession(this, true, new Session.StatusCallback() {

     // callback when session changes state

     @Override
     public void call(Session session, SessionState state, Exception exception) {
     if (session.isOpened()) {
      // make request to the /me API
      Request.executeMeRequestAsync(session, new Request.GraphUserCallback() {

       // callback after Graph API response with user object

       @Override
       public void onCompleted(GraphUser user, Response response) {
        if (user != null) {
         TextView txt = (TextView) findViewById(R.id.text);
         txt.setText("Latitude is: " + user.getLocation().getLatitude());
        }
       }
      });

     }
   }
 });
} 
```

编辑：在 facebook sdk 附带的 hackbook 项目示例中，我看到可以通过位置 ID 获取坐标（纬度和经度），有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T23:00:29.410

您必须使用**getProperty**方法 - 检索城市和国家/地区的示例是 -

```
user.getLocation().getProperty("name"); 
```

检查[**链接**](https://developers.facebook.com/docs/reference/android/3.0/GraphUser/)，它说 - GraphUser 提供由 Graph API 定义的用户的强类型表示。请注意，**此接口旨在与 GraphObject.Factory 一起使用，而不是直接实现**。

这个[**链接**](https://developers.facebook.com/docs/howtos/androidsdk/3.0/fetch-user-data/#prerequisities)有一些例子，这将使事情更清楚。

我从这里引用这个 - 此响应中的一些数据可以作为 GraphUser 接口属性的强类型属性进行访问 - 例如：***名称***和***生日***。**其他属性可以通过使用 getProperty() 方法并选择所需的键来访问**- 例如：***locale***和***languages***。此步骤向您展示如何访问用户的姓名、生日、语言、位置和语言环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:24:27.140

好的，我想我终于有了答案：为了从 ID 获取坐标，我使用了这个查询：

```
http://graph.facebook.com/ID 
```

然后只需解析结果以获取坐标（如果有更简单的方法，请纠正我）ID 很容易通过以下方式获取：

```
user.getLocation(); 
```

顺便说一句，在我的第一次尝试中，我仍然不知道为什么返回的值是 null，也许我的解决方法的结果并不像我想象的那么准确，但我意识到当有人发布某些内容时，facebook 并没有注册一个如此准确的位置到他的墙上，但只是帖子所在城市的坐标。（再次，如果我错了，请纠正我）。

谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T21:14:26.137

getLocation() 方法只返回用户的当前城市。

# javascript - 如何防止 Javascript 点击事件发生两次？

> ID：15350921
> 
> 赞同：0
> 
> 时间：2013-03-12T00:02:52.593
> 
> 标签：javascript, google-maps, twitter-bootstrap

我在让谷歌地图 iframe 在中心加载时遇到了一个大问题，在 twitter 引导模式内。我发现工作的解决方案是在打开模式后通过 javascript 加载 iframe。目前我的代码遇到的问题是，一旦模式关闭并重新打开，iframe 就会被卸载。那么问题是如何防止点击事件发生两次呢？

我的代码：

```
<script type="text/javascript"> 
$(function() {
$("#map_link").click(function(event) {  
    event.preventDefault();
    $("#map").slideToggle(); 
    $("#map").html('Iframe_code_is_situated_here').css('display','block');
    });  
});
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:04:08.293

```
$("#map_link").one('click', function(event) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:04:37.517

跟踪它是否被点击，如果它被点击则返回 false

```
 $(function() {
    var click_limit = 1, clicks = 0;

    $("#map_link").click(function(event) {  
       if (clicks++ === click_limit){ return false; }
       event.preventDefault();
       $("#map").slideToggle(); 
       $("#map").html('Iframe_code_is_situated_here').css('display','block');
    });  
}); 
```

# c++ - 将 std::string 转换为任何数字类型或 std::string 的成员函数模板

> ID：15350927
> 
> 赞同：1
> 
> 时间：2013-03-12T00:03:04.513
> 
> 标签：c++

请考虑成员函数模板。我的问题嵌入在评论表单中。

```
template<typename T>
GetValueResult GetValue(
                          const std::string &key,
                          T &val,
                          std::ios_base &(*manipulator)(std::ios_base &) = std::dec
                       )
{
   // This member function template is intended to work for all built-in
   // numeric types and std::string. However, when T = std::string, I get only
   // the first word of the map element's value. How can I fix this?

   // m_configMap is map<string, string>
   ConfigMapIter iter = m_configMap.find(key);

   if (iter == m_configMap.end())
      return CONFIG_MAP_KEY_NOT_FOUND;

   std::stringstream ss;
   ss << iter->second;

   // Convert std::string to type T. T could be std::string.
   // No real converting is going on this case, but as stated above
   // I get only the first word. How can I fix this?
   if (ss >> manipulator >> val)
      return CONFIG_MAP_SUCCESS;
   else
      return CONFIG_MAP_VALUE_INVALID;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:15:31.220

流上的`<<`and`>>`运算符旨在处理由空格分隔的标记。所以如果一个字符串看起来像 "1 2" 那么你`stringstream`只会读入`1`第一个`<<`。

如果您想要多个值，我建议您在流上使用循环。这样的事情可能会...

```
//stringstream has a const string& constructor
std::stringstream ss(iter->second); 

while (ss >> manipulator >> value) { /* do checks here /* } 
```

有了这个，我建议你看看 Boost，特别是[lexical_cast](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_lexical_cast.html)，它可能会做你想要的开箱即用。

# asp.net - Http 请求未到达 IIS 模块

> ID：15350928
> 
> 赞同：2
> 
> 时间：2013-03-12T00:03:11.163
> 
> 标签：asp.net, iis-7, http-headers, content-type

在开发用于基本身份验证的 IIS 模块期间，我遇到了一个问题。该模块在浏览页面时工作正常，但是在调用 Web 服务时，请求似乎没有到达该模块，并且一些中间模块控制了请求。

使用提琴手，我发现`Content-type`在 http 请求头设置为`application/json`中间模块/处理程序时触发。所以以下请求不起作用：

*`WWW-Authenticate`正常工作时，服务器应通过设置响应头来要求客户端发送用户凭据*

```
GET /WebServices/service.asmx/someMethod?param=test HTTP/1.1
Host: localhost
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Content-Type: application/json

asdfasdf
asdfasdfasdf 
```

响应：*注意响应中的**jsonerror**标头*

```
HTTP/1.1 401 Unauthorized
Content-Type: application/json; charset=utf-8
Server: Microsoft-IIS/7.5
jsonerror: true
X-Powered-By: ASP.NET
Date: Mon, 11 Mar 2013 23:49:02 GMT
Content-Length: 105

{"Message":"Authentication failed.","StackTrace":null,"ExceptionType":"System.In
validOperationException"} 
```

这个工作正常的地方：*注意没有`content-type`*

```
GET /WebServices/service.asmx/someMethod?param=test HTTP/1.1
Host: localhost
Connection: keep-alive
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.22 (KHTML, like Gecko) Chrome/25.0.1364.152 Safari/537.22
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

asdfasdf
asdfasdfasdf 
```

正确的响应是：*注意响应中的`WWW-Authenticate`标头*

```
HTTP/1.1 401 Unauthorized
Location: http://localhost/WebServices/service.asmx/someMethod?param=test
Server: Microsoft-IIS/7.5
WWW-Authenticate: Basic
X-Powered-By: ASP.NET
Date: Mon, 11 Mar 2013 23:59:48 GMT
Content-Length: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:48:28.003

好吧，中间的模块是 ScriptModule，我们在配置中添加了 3.5 和 4.0 版本。通过 dotpeek 检查它们，我发现脚本模块检查请求是否`content-type`存在`application/json`，然后尝试将请求作为 REST 请求或 Web 服务调用处理。

通过删除它们，没有什么特别的事情发生。我假设它们将在使用脚本管理器或 Microsoft 特定 AJAX 服务时使用。[您可以在ASP.Net Ajax Programming Tricks](http://books.google.com.au/books?id=GkWTN3cVDRQC&lpg=PA117&ots=F1VUOfrJ4w&dq=asp.net%20scriptmodule%20-%22the%20entry%22&pg=PA117#v=onepage&q=asp.net%20scriptmodule%20-%22the%20entry%22&f=false)中找到有关它的更多信息

# jquery - HTMLElementVariable.animate( ... ) 替代方案？

> ID：15350933
> 
> 赞同：0
> 
> 时间：2013-03-12T00:03:19.663
> 
> 标签：jquery

```
var $e = $('.class');
$e.animate({ something:1 }); 
```

为什么我不能从变量中调用任何 jquery 函数？

我正在尝试单独为数组的每个元素设置动画。如何根据变量在数组中的位置为 $e 中的变量设置动画。我知道我可以使用这个：

```
for (...) {
   $('.class')[i].animate();
} 
```

但我猜它会执行得更慢，特别是如果有很多元素。那么有没有替代的方法呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:06:47.727

该`.animate()`函数是一个 jQuery 函数，因此您不能在 DOM 元素上调用它（`for`您在问题中提到的循环实际上不起作用）。但是，您可以使用[`.each()`](http://api.jquery.com/each/)迭代一组匹配的元素，并分别为它们设置动画：

```
$('.class').each(function(index, element) {
    $(element).animate(); // index is its position in the list
}); 
```

# javascript - 带有序数 x 轴刻度的 dc.js 条形图无法正确呈现

> ID：15350935
> 
> 赞同：3
> 
> 时间：2013-03-12T00:03:30.563
> 
> 标签：javascript, d3.js, crossfilter

我最近发现了 dc.js，并一直在尝试使用 d3.js 网站上提供的条形图示例来实现一个简单的条形图：http: [//bl.ocks.org/mbostock/3885304](http://bl.ocks.org/mbostock/3885304)。

但是，作为 dc.js 实现的一部分，需要一个交叉过滤器维度和组。

因此，使用带有“字母”和“频率”的简单 TSV 文件，我将代码更改为如下所示：

```
d3.tsv('testdata.tsv', function(error, data) {
  var cf = crossfilter(data);

  var dimension = cf.dimension(function(d){
    return d.letter;
  }

  var group = dimension.group().reduce(
    function(p,v){ 
      p.frequency += v.frequency
    }, 
    function(p,v){ 
      p.frequency -= v.frequency
    },
    function(){ 
      return { frequency: 0  };
  }); 
```

我对应该将 valueAccessor 设置为什么（在我的条形图上）有点困惑，因为当我将 valueAccessor 设置为返回“频率”时，我将 xAxis 比例设置为具有所有“字母”域的序数在数据集中，我得到了一个渲染的条形图，其中几乎所有的 x 轴值（“A - Y”）都位于零点，一个 x 轴值（即“Z”）位于 x 轴线的末端.

我试过设置范围，但似乎没有奏效。任何关于我误解的想法将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T22:02:30.757

原来我必须将 .xUnits 属性设置为 dc.units.ordinal() 才能使 x 轴正确间隔！

# azure - 从 azure 启动任务运行 powershell

> ID：15350936
> 
> 赞同：2
> 
> 时间：2013-03-12T00:03:36.110
> 
> 标签：azure

在我的 ServiceDefinition.csdef 文件中，我有这个：

```
 <Startup>
      <Task commandLine="powershell -ExecutionPolicy Unrestricted -command &quot;Install-WindowsFeature Net-Framework-Core&quot;" taskType="simple" executionContext="elevated"/>
 </Startup> 
```

但是当我尝试将它发布到天蓝色时，我得到：

```
Cannot find file named 'approot\bin\powershell' for startup task powershell -ExecutionPolicy Unrestricted -command "Install-WindowsFeature Net-Framework-Core"  of role WebRole. 
```

我正在尝试运行 powershell，以便可以安装 .net 3.5 是 OS 系列“3”（Windows 2012）。该命令在远程进入我的实例时从 cmd 行运行良好。

运行powershell的正确语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:25:26.900

在 Michael Volodarsky 的帮助下，我得到了它的帮助。

1.  在“启动”文件夹中创建一个名为“install35.cmd”的文件：

powershell -ExecutionPolicy Unrestricted -command "Install-WindowsFeature Net-Framework-Core" exit 0

1.  另存为/高级/将代码页设置为 windows 1252
2.  在解决方案资源管理器中，右键单击并设置构建类型=内容，始终复制
3.  在启动任务中，添加：

# ios - IOS拦截webview加载并将网页资源保存到磁盘

> ID：15350937
> 
> 赞同：1
> 
> 时间：2013-03-12T00:03:39.680
> 
> 标签：ios, webview, resources, save, nsurlcache

我已经读到您可以跟踪正在下载的单个资源以用于加载 web 视图，请参见[此处](https://stackoverflow.com/questions/9527682/is-there-a-way-to-track-loading-of-individual-resources-in-an-uiwebview-for-ios)。我想要做的是拦截每个资源并将其保存到文件中。然后，如果用户想保存网页，我会将保存的资源和 html 保存在永久位置。但我是新手，不知道如何设置。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T06:50:50.717

查看用于缓存整个网络流量的 URLProtocol 子类，另外还有太多的库用于此。

[让我为你谷歌它](http://goo.gl/M2xtY)

# html - 另一个里面有多个块？

> ID：15350939
> 
> 赞同：0
> 
> 时间：2013-03-12T00:03:45.140
> 
> 标签：html, css

我试图将我的名字放在另一个包含网站名称的块中，但无法弄清楚。我可以使用什么？

我正在尝试使用较小的扩展名来获取我的网站名称，shich 工作。但后来我想在它下面没有我的名字，中间没有空格。

```
<div id="sitename">
  <span id="address">website</span>
  <span id="extension">.blah</span>
  <span id="name">namegoeshere</span>
</div>

#sitename {
  width: 330px;
  margin: 35px auto 0 auto;
  text-align: center;
  cursor: default;
}

#address {
  display: inline-block;
  height: 65px;
  font-size: 50pt;
  font-weight: 800;
  color: rgb(99,99,99);
}

#extension {
  display: inline-block;
  height: 65px;
  font-size: 30pt;
  font-weight: 800;
  color: rgb(99,99,99)
}

#name {
  display: block;
  width: 72%; 
  text-align: right;
  font-size: 11.5pt;
  font-weight: 500;
  color: rgb(99,99,99);
} 
```

小提琴：http: [//jsfiddle.net/CX5Dn/](http://jsfiddle.net/CX5Dn/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:23:54.537

这是你想要达到的目标吗

html

```
<div id="sitename">
  <span id="address">website<span id="extension">.blah</span></span>
  <span id="name">namegoeshere</span>
</div> 
```

css

```
#sitename {
  width: 330px;
  margin: 35px auto 0 auto;
  text-align: center;
  cursor: default;
}

#address {
  display: inline-block;
  height: 65px;
  font-size: 50pt;
  font-weight: 800;
  color: rgb(99,99,99);
}

#extension {
  display: inline-block;
  height: 65px;
  font-size: 30pt;
  font-weight: 800;
  color: rgb(99,99,99)
}

#name {
  display: block;
  width: 72%; 
  text-align: right;
  font-size: 11.5pt;
  font-weight: 500;
  color: rgb(99,99,99);
} 
```

工作[演示](http://jsfiddle.net/CX5Dn/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T00:08:40.187

名称的边距。

```
#name {
display: block;
width: 72%; 
text-align: right;
font-size: 11.5pt;
font-weight: 500;
color: rgb(99,99,99);
margin-top: -20px;
} 
```

# slickgrid - Slickgrid自动编辑和选择单元格范围

> ID：15350944
> 
> 赞同：1
> 
> 时间：2013-03-12T00:04:10.517
> 
> 标签：slickgrid

我正在尝试使用 [autoEdit = true]，然后尝试用鼠标选择多个单元格，但我无法让它工作。似乎我只能在选择任何单元格之前按下转义键时才能实现这一点。

有什么建议么？

# jquery - 使用 jQuery 从 codeigniter 获取数据后，Fancybox'ing Handlebars 模板

> ID：15350949
> 
> 赞同：0
> 
> 时间：2013-03-12T00:04:28.120
> 
> 标签：jquery, ajax, fancybox, ember.js, handlebars.js

我目前在加载我正在尝试制作的向导时遇到问题。当用户将项目添加到他们的队列中时，我会在数据库中使用适当的信息创建一个新项目。如果返回 true，则调用一个 js 函数来获取 Handlebars.js 模板，编译，然后将其推送到 Fancybox 加载中。我也将数据传递给该函数以用于模板。

它看起来像这样：

```
function launchProjectWizard(data)  {
        var source;
        var template;

        $.ajax({
            url : '/assets/templates/handlebars/projectWizard.handlebars',
            cache : true,
            dataType: "json",
            success : function(temp) {
                source = temp;
                template = Handlebars.compile(source);

                $.fancybox({
                    afterLoad : function() {
                        this.content = Handlebars.compile(this.template(JSON.parse(data)));
                    }
                }); //fancy
            }
        }); //ajax
    } 
```

我目前没有收到任何错误。但也没有任何事情发生。Fancybox 没有启动，没有抛出错误，什么也没有。之前将项目保存到数据库的调用工作正常。

然而，当我删除“dataType”行时，我确实让 Fancybox 启动，但问题是它只是将原始车把模板转储到其内容中，没有编译。

使用这些支持技术在 Codeigniter 中处理模态向导过程是否有更简单或更好的方法？我应该把 Handlebars 排除在外吗？

感谢您的任何帮助，

* * *

**编辑1：** 我在控制台中得到这个输出，因为我的`data`对象被传递到函数中。Handlebars 是否因为`team`Array 而不是 Object 而跳闸？然而它没有抛出任何错误..

`Object {title: Object, team: Array[2], pid: 179}`

# list - 从霍夫曼树中取出对子

> ID：15350954
> 
> 赞同：1
> 
> 时间：2013-03-12T00:04:48.807
> 
> 标签：list, tree, scheme, huffman-code

我正在尝试编写一个 Huffman-leaves 程序；该过程从创建的霍夫曼树中返回一个对列表。运行方式示例

```
 (huffman-leaves sample-tree) 
   ->((A . 8) (C . 5) (B . 1) (D . 1)) 
```

我想出了什么，但让作家们阻止了......

```
(define (huffman-leaves tree)
  (define (huffman-get-pairs current-branch pairs)
     (if (or (null? tree) (null? current-branch))
         pairs
         (let ((next-branch
                (get-branch (car current-branch) current-branch)))
           (not (member? next-branch pairs)
                (if (leaf? next-branch)
                    (cons (append  pairs next-branch)
                          (display pairs)
                          (huffman-get-pairs (cadr current-branch) pairs))
                    (huffman-get-pairs next-branch pairs))))))
  (huffman-get-pairs tree '()))

  (member? item 'list) #if item in list return #t else #false 
```

我知道我做错了什么，但我看不到。如何停止在方案中的霍夫曼树中搜索？我应该做不同的任何提示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T01:28:42.197

我建议：

1.  为 Huffman 树编写数据定义

2.  制作示例输入霍夫曼树，根据步骤 1 中的数据定义和预期输出（在本例中为叶子列表）进行编码。

3.  按照[设计配方](http://htdp.org)为该`huffman-leaves`功能构建一个基本模板。

4.  `...`根据您在步骤 2 中构建的示例填写模板。

5.  将步骤 2 中的示例转换为测试，并测试步骤 4 中的代码。

抱歉，如果上述内容似乎含糊不清，但这是我迄今为止在此问题中提供的详细程度（或缺乏详细程度）所能提供的最佳建议。如果您可以为上述步骤提供答案，并明确说明您被阻止的步骤，那么我们可以帮助您以更系统的方式克服您的作家阻止。

* * *

如果您更喜欢真正的代码，您可以按照以下方向为您的问题制定一个非常通用的解决方案：

```
;; make-visitor : (X -> Y) (X -> [Listof X]) (Y [Listof Z] -> Z) -> Z
;; Very generic descend+map+recombine routine
;; (note X, Y, Z are implicitly universally quantified above).
(define (make-visitor transform children combine)
  (lambda (x)
    (let rec ((x x)) ;; rec : X -> Z
      (combine (transform x)
               (map rec (children x))))))

;; ... the hard bit is coming up with the appropriate lambda
;; expressions for `transform`, `children`, and `combine` above.

(define leaves
  (make-visitor (lambda (x) ...)
                (lambda (x) ...)
                (lambda (y zs) ...))) 
```

我实际上不建议尝试直接跳到这种形式的解决方案；如果您尝试遵循设计配方并直接解决您的问题，您会做得更好。但是一旦你这样做了，它可以成为一个教育练习，看看你是否可以将你自己的解决方案改造成上面的通用例程。

# mysql - 我可以结合 INSERT、JOIN 和 ON DUPLICATE KEY UPDATE

> ID：15350956
> 
> 赞同：0
> 
> 时间：2013-03-12T00:05:07.323
> 
> 标签：mysql, join, on-duplicate-key

这是我今天的数据库结构......

`inventory_transactions``quantity_offset`存储具有负值或正值的库存变动。他们还有一个`inventory_transaction_id`

`shipments`存储装运，它们是`inventory_transactions`一组`shipment_id`

`inventory_transactions`和之间的关系`shipments`在一个名为的表中`shipment_inventory_transactions`

我希望能够做的是增加与给定相关联`quantity_offset`的 an （增加货件中给定库存项目的数量），如果该项目已经存在于货件中。`inventory_transaction``shipment`

如果该项目不存在，请在`inventory_transactions`和中创建所需的行`shipment_inventory_transactions`

`JOIN`我认为and的某种组合`ON DUPLICATE KEY UPDATE`可以做到这一点，但我无法理解它。

为了简化情况，我正在考虑删除该`shipment_inventory_transactions`表，因为 shipping 和 inventory_transactions 之间的关系现在将是 1 对 1。这里唯一的问题是每个inventory_transaction 可以与发货或收据相关联，但不能同时与两者相关联。将它们存储在同一列中听起来很恶心。但是我不喜欢在每一行中都有一个额外的列，因为只会使用一个或另一个。

哇... 大脑转储完成。如果这是有道理的，并且您可以提供一个让我无法理解的明智答案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:08:33.473

最终，我发现简化数据库以消除多对多关系让我可以通过简单的插入来完成我想要的。此时最好进行简化，而不是添加随着应用程序增长而成为问题的巨大复杂性。

# sql-server - 为什么我的 tsql varbinary 数据被截断

> ID：15350958
> 
> 赞同：2
> 
> 时间：2013-03-12T00:05:09.067
> 
> 标签：sql-server, tsql, binary, truncation

如果我从注册表中获取我的时区信息到 ​​SQL 中，我会得到完整的 TZI 数据结构：

```
DECLARE @TzKey nvarchar(512)
Set @TzKey = 'SOFTWARE\Microsoft\Windows NT\CurrentVersion\Time Zones\Pacific Standard Time'
EXEC master.dbo.xp_regread 'HKEY_LOCAL_MACHINE', @TzKey, 'TZI' 
```

它返回完整的二进制值

> '0xE0010000000000000C4FFFFFF00000B0000000100020000000000000000000300000002000200000000000000'

但是，如果我将它存储在这样的变量中：

```
DECLARE @TzKey nvarchar(512)
DECLARE @TZI binary(85) 
Set @TzKey = 'SOFTWARE\Microsoft\Windows NT\CurrentVersion\Time Zones\Pacific Standard Time'
EXEC master.dbo.xp_regread 'HKEY_LOCAL_MACHINE', @TzKey, 'TZI', @TZI OUTPUT 
```

然后`SELECT @TZI AS TzInfo`返回`'0xE001'`

我已经尝试了所有我能想到的二进制/varbinary 和长度（包括 MAX）排列。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T07:13:48.670

我会使用 an`INSERT ... EXEC`然后从插入结果的表中读取值：

```
DECLARE @TzKey nvarchar(512)
DECLARE @TZI binary(85) 
Set @TzKey = 'SOFTWARE\Microsoft\Windows NT\CurrentVersion\Time Zones\Pacific Standard Time'
declare @Results table (Value sysname,Data varbinary(300))
insert into @Results
EXEC master.dbo.xp_regread 'HKEY_LOCAL_MACHINE', @TzKey, 'TZI' --, @TZI OUTPUT
select @TZI = Data from @Results 
```

（插入关于使用/依赖未记录程序的常见警告）

# iphone - xcdatamodel 未在设备上编译

> ID：15350961
> 
> 赞同：1
> 
> 时间：2013-03-12T00:05:19.127
> 
> 标签：iphone, ios, xcode, device, xcdatamodel

我的项目中包含我的 App.xcdatamodel 文件。在为模拟器编译时，会生成 App.mom 文件，我的核心数据管理器会找到并运行它。设备编译运行时，不会生成App.mom文件。

xcdatamodel 包含在 Target Membership 中（选中复选框），xcdatamodel 文件包含在 App 目标的“Compile Sources”中。

我有另一个用于旧版本数据库的 xcdatamodel。它包含在 Target Membership 和“Compile Sources”下。这个旧版本的数据库运行良好，模拟器和设备运行始终成功生成 .mom 文件。

# dynamics-crm-2011 - Dynamics CRM 2011 Online - 如何阅读订单的所有产品？

> ID：15350964
> 
> 赞同：1
> 
> 时间：2013-03-12T00:06:16.943
> 
> 标签：dynamics-crm-2011, microsoft-dynamics, dynamics-crm-online

我有以下代码...

```
var oDataPath = Xrm.Page.context.getServerUrl() + "/xrmservices/2011/organizationdata.svc

var oDataSelect = "/SalesOrderSet?" +
    "&$filter=(guid'" + id + "')" + 
    "&$expand=order_details" 
```

我的问题是……实体的 id 是包含完整的 url 还是仅包含 guid？如果它是完整的网址，我只需要......

```
var oDataSelect = id + "&$expand=order_details" 
```

而不是 oDataPath，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T19:18:51.350

消极的。您需要插入 id 作为 guid。如果您导航到以下位置，您可以自己查看：

> Xrm.Page.context.getServerUrl() + "/SalesOrderSet"

如果您在浏览器中执行此操作，您可能需要右键单击并查看源代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T06:09:39.220

如果您用 js 编写客户端，请尝试 JayData。您的查询将类似于：

```
crm.SalesRecords.filter('it.id==1').include('order_details').toArray() 
```

# javascript - 调用 clearRect 后，HTML5 画布未在 Chrome 中重绘

> ID：15350969
> 
> 赞同：3
> 
> 时间：2013-03-12T00:06:51.123
> 
> 标签：javascript, html, canvas

我已经盯着这个太久了，需要一些帮助。我有以下简化的小提琴示例，适用于 IE，但不适用于 Chrome（没有错误，只是在 Chrome 中清除画布后没有重绘图像）：

[http://jsfiddle.net/JrLh7/3/](http://jsfiddle.net/JrLh7/3/)

```
var myApp = {};
// redraw function that will be called during init and then will loop.
myApp.redrawFunction = function() {
    window.requestAnimationFrame(myApp.redrawFunction);
    // clear canvas (not needed in this simplified example, but I need it in my real app)
    myApp.drawingContext.clearRect(0, 0, myApp.canvas.width, myApp.canvas.height);
    // draw an image.
    var myImage = new Image();
    myImage.onload = function() {
        myApp.drawingContext.drawImage(myImage, 0, 0);
    };
    myImage.src= "http://www.w3.org/html/logo/img/mark-word-icon.png";
};
// initialize
$(function () {
    // setup the animation frame objects.
    window.requestAnimationFrame = window.requestAnimationFrame
        || window.mozRequestAnimationFrame
        || window.webkitRequestAnimationFrame
        || window.msRequestAnimationFrame;
    window.cancelAnimationFrame = window.CancelAnimationFrame
        || window.CancelRequestAnimationFrame
        || window.mozCancelAnimationFrame
        || window.mozCancelRequestAnimationFrame
        || window.msCancelAnimationFrame
        || window.msCancelRequestAnimationFrame
        || window.webkitCancelAnimationFrame
        || window.webkitCancelRequestAnimationFrame;
    // get canvas references.
    myApp.canvas = $("canvas")[0];
    myApp.drawingContext = myApp.canvas.getContext("2d");
    $(myApp.canvas).css("background-color", "#999999");
    // update canvas size to fill screen.
    myApp.canvas.width = $(window).width();
    myApp.canvas.height = $(window).height();
    $(window).resize(function (){
        myApp.canvas.width = $(window).width();
        myApp.canvas.height = $(window).height();
    });
    // start redraw loop
    myApp.redrawFunction();
}); 
```

如果你在 IE 10 中打开这个小提琴，它就可以工作（你会看到一个徽标）。如果你在 Chrome 中打开它，你会看到一个空白的画布，这表明我的 drawImage 调用在清除画布后不起作用。有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:23:42.833

问题是您正在清除画布，然后您正在等待加载图像，当图像加载时，动画再次运行，清除画布并等待新图像加载。因此，您总是在调用 后立即看到画布状态`clearRect`，因为当您调用时`drawImage`，动画例程会在您有机会看到结果之前再次启动，`drawImage()`您将看到 的结果`clearRect()`。

解决方案是在图像准备好绘制之前不要清除画布。[http://jsfiddle.net/JrLh7/6/](http://jsfiddle.net/JrLh7/6/)

```
var myApp = {};
// redraw function that will be called during init and then will loop.
myApp.redrawFunction = function() {
    // Don't clear the canvas here, it will be empty until the onload handler is called 
    var myImage = new Image();
    myImage.onload = function() {
        // Clear canvas and immediately paint the image
        myApp.drawingContext.clearRect(0, 0, myApp.canvas.width, myApp.canvas.height);
        myApp.drawingContext.drawImage(myImage, 0, 0);
        // Then you should ask for another frame after you've finished painting the canvas
       window.requestAnimationFrame(myApp.redrawFunction);
    };
    myImage.src= "http://www.w3.org/html/logo/img/mark-word-icon.png";
}; 
```

**笔记**

拥有一个异步的动画例程没有多大意义。如果是这样，至少，在完成画布绘制之前，您不应该请求新的动画帧。

# ruby-on-rails - 如何在 AngularJS 表达式中访问 Rails 生成的 JSON 对象的布尔属性值？

> ID：15350973
> 
> 赞同：2
> 
> 时间：2013-03-12T00:07:01.597
> 
> 标签：ruby-on-rails, ruby, json, angularjs, angularjs-directive

**场景：**

我在具有`ng-class`指令的元素上使用该`ng-repeat`指令。如果满足某些条件，我将`ng-class`在我的元素上添加一个类。我遇到的问题是我的条件。由于它们来自我使用 Ruby on Rails 生成的一些 JSON，因此我的 JSON 中返回布尔值的键以问号结尾。引用时，问号在 JSON 键中完全有效，但是当我尝试使用点符号在 AngularJS 表达式中访问它们时，Chrome 中的控制台会显示错误：

**失败的代码：**

```
<tr ng-repeat="foo in bars" ng-class="{'boo': foo.bar.baz? || !foo.bar.yes? }"> 
```

**错误：**

```
Error: Lexer Error: Unexpected next character  at columns 39-39 [?] in expression 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:07:01.597

因此解决方案是通过方括号访问 JSON 键值对，并引用键名。

**工作代码：**

```
<tr ng-repeat="foo in bars" ng-class="{'boo': foo.bah['baz?'] || !foo.bar['yes?'] }"> 
```

我在使用 AngularJS 1.0.5、Ruby 1.8.7、Rails 2.3.17 时发现了这个解决方案

[http://www.json.org/](http://www.json.org/)

这里也是一个很好的讨论：

[是否有任何实际理由为 JSON 键使用带引号的字符串？](https://stackoverflow.com/questions/4201441/is-there-any-practical-reason-to-use-quoted-strings-for-json-keys)

# jquery - Jquery 的新手。这段代码我不明白什么？显示隐藏

> ID：15350978
> 
> 赞同：0
> 
> 时间：2013-03-12T00:07:20.710
> 
> 标签：jquery

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Demo</title>
</head>
<body>
<a href="http://jquery.com/">jQuery</a>
<script src="jquery-1.9.1.js"></script>
<script>
  $('.targetDiv').hide();
  $('.show').click(function () {
     $('.targetDiv').hide();
     $('#div' + $(this).attr('target')).show();
  });

  $('.hide').click(function () {
     $('#div' + $(this).attr('target')).hide();

  });
</script>
<div class="buttons">
  <a  class="show" target="1">Option 1</a>
  <a  class="show" target="2">Option 2</a>
  <a  class="show" target="3">Option 3</a>
  <a  class="show" target="4">Option 4</a>
  <a  class="hide" target="1">Close 1</a>
  <a  class="hide" target="2">Close 2</a>
  <a  class="hide" target="3">Close 3</a>
  <a  class="hide" target="4">Close 4</a>
</div>

<div id="div1" class="targetDiv">Lorum Ipsum 1</div>
<div id="div2" class="targetDiv">Lorum Ipsum 2</div>
<div id="div3" class="targetDiv">Lorum Ipsum 3</div>
<div id="div4" class="targetDiv">Lorum Ipsum 4</div>
</body>
</html> 
```

我不确定我在这里做错了什么。它适用于 Jfiddle，但当我尝试这样做时它无法正常工作。

1.  另存为 HTML 文件。
2.  保存在同一个文件中。
3.  从 Jquery.com 下载开发包（另存为`jquery-1.9.1.js`）

任何信息都将根据要求添加。我应该将一个文件保存为 HTML，另一个文件保存为 JS 并链接它们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T00:33:33.597

JavaScript 在加载后立即运行。在这种情况下，它将在页面准备好之前加载。这就是为什么 JavaScript 提供事件让我们知道页面何时加载的原因。

jQuery 为我们提供了很好的函数来帮助解决这个问题：

```
$(document).ready(function() {
    // CODE
}); 
```

你也会经常看到这个：

```
$( function() {
    // CODE
}); 
```

这是 的简写`.ready()`，但基本相同。两者都会等到 DOM 加载完成后再执行其中的代码。您的代码在 jsfiddle 上运行的原因是因为它默认为您自动包装代码（查看左侧菜单中的选项，您将看到`onLoad`已选择的选项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:31:25.923

用这个包装你的 JavaScript 代码（非 jQuery`script`标签之间的东西）：

```
$(document).ready(function() {
    // your code
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T01:46:51.450

当然，如果你想在 jQuery 脚本上编写代码，你必须制作另一个 jquery scipt。您下载的是脚本 jquery api 脚本

# java - java中的多线程

> ID：15350981
> 
> 赞同：-3
> 
> 时间：2013-03-12T00:07:22.983
> 
> 标签：java, multithreading

所以我想做的是写一个服务器和一个客户端。服务器应该在不同的线程上侦听连接和服务该连接并继续侦听更多客户端。一旦连接，客户端将通过它希望服务器解析的 IP 发送。服务器应该将其写回客户端。这就是我到目前为止所得到的......我如何让服务器变得更好。以及如何编写客户端您如何编写客户端文件以连接到此并将其发送到他们想要的 ip。

```
 import java.io.IOException;
 import java.io.PrintStream;
 import java.net.ServerSocket;
 import java.net.Socket;

public class Server implements Runnable {
Socket csocket;
Server(Socket csocket) {
  this.csocket = csocket;
 }

public static void main(String args[]) 
throws Exception {
   ServerSocket ssock = new ServerSocket(6053);
   System.out.println("Listening");
   while (true) {
      Socket sock = ssock.accept();
      System.out.println("Connected");
     new Thread(new Server(sock)).start();
   }
}
public void run() {
   try {
      PrintStream pstream = new PrintStream
      (csocket.getOutputStream());

      pstream.close();
      csocket.close();
   }
   catch (IOException e) {
      System.out.println(e);
   }
} 
```

}

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T00:11:36.687

你能做的就是让它变得“用户友好”，我以前做过这件事，并制作了一个成功的 IM 程序。

想法：

1.  使其能够获得全球IP
2.  显示握手（如果已连接 = true）{ system.out.print(已连接！);}

# tsql - T-SQL SELECT 语句以在没有更新或变量的情况下排除 ( And ) 之间的文本

> ID：15350984
> 
> 赞同：-1
> 
> 时间：2013-03-12T00:07:57.207
> 
> 标签：tsql

我想知道这是否可能，我有一组凌乱的名字数据可供使用，并且它由其他应用程序共享，所以我不想运行任何更新语句。但数据有时会包含一个 AKA，例如：

罗伯特（又名鲍勃）

我正在尝试获取一个干净的数据，其中只显示“罗伯特”。

我想到的一种方法是使用临时表，然后使用 CHARINDEX 表示 ( 和 )，然后替换 ( 和 ) 之间的内容。这似乎是一个冗长的方法。

有没有更聪明的方法？

编辑：数据地狱的更多例子。有时括号出现在前面或混淆，例如：

（比尔）威廉

小理查德（迪克）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:16:45.237

未经测试：

```
FirstName = case when charindex('(AKA', FirstName) = 0 
                 then FirstName 
                 else substring(FirstName, 1, charindex('(AKA', FirstName)) end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T07:07:44.870

如果嘈杂的字符串模式不可预测，最好使用 SQL CLR TVF（表值函数），使用 C# 代码正则表达式。以 xml 作为输入参数，其中包含您需要处理的数据，返回已处理数据的表。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T00:45:01.107

彼得让球为我滚动！感谢您让我开始走上正轨！

```
 SELECT
 CASE WHEN FirstName like '%)%'
 THEN REPLACE(FirstName,
 SUBSTRING(FirstName,CHARINDEX('(',FirstName),CHARINDEX(')',FirstName)-CHARINDEX('(',FirstName)+1),'')
 ELSE FirstName END 
```

# actionscript-3 - AS3如何控制外接swf的暂停键

> ID：15350985
> 
> 赞同：0
> 
> 时间：2013-03-12T00:08:06.047
> 
> 标签：actionscript-3, actionscript-2

我只是想控制外部加载 swf 的按钮。

```
var swfRequest:URLRequest = new URLRequest('http://mysite.com/player/001.swf');
var swfLoader:Loader = new Loader();
swfLoader.load(swfRequest);
var holder:MovieClip = new MovieClip();
holder.addChild(swfLoader);
addChild(holder); 
```

在主 swf 中，我创建了带有实例名称的新按钮：pauseBtn，我希望这个按钮与外部 swf 通信，女巫有带有实例名称的暂停按钮：动作脚本 2.0 中的 pausebtn

外部btn：

```
on (release)
{
    status_playing = false;
    playbtn._visible = true;
    pausebtn._visible = false;
    stop ();
} 
```

请帮助我如何与这些按钮进行通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T03:26:19.627

通常，我认为您不能直接在 AS3 内容和 AS2 内容之间进行通信。一种解决方法是使用 LocalConnection 对象来处理两者之间的通信。

在创建对象并连接它们之后它将如何工作，主 swf 将向其 LocalConnection 对象发送一条消息，加载的 swf 将接收该消息并使用它来处理您需要的任何事情。

LocalConnection - AS3 参考：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/LocalConnection.html)

LocalConnection - AS2 参考：[http ://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001176.html#312868](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00001176.html#312868)

# android - 为什么 drawableStart 的行为与 Android 文档不匹配？

> ID：15350990
> 
> 赞同：9
> 
> 时间：2013-03-12T00:08:30.067
> 
> 标签：android, button, drawable, spacing

我创建了一个非常基本的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Button"
            android:drawableStart="@drawable/ic_launcher" />

    </LinearLayout>
</RelativeLayout> 
```

根据[文档`drawableStart`](http://developer.android.com/reference/android/R.attr.html#drawableStart)，

> “要绘制到文本开头的drawable。”

但是，在我的 Android 4.0.4 手机上运行时，我看到的是：

![在此处输入图像描述](../Images/e5c51f3b21a42b4404d3f7aeed68ea65.png)

为什么图标和文字之间有这么大的差距？根据[这个答案](https://stackoverflow.com/a/8386510/193619)，

> “使用 Android 4.0（API 级别 14），您可以使用 android:drawableStart 属性在文本开头放置一个可绘制对象。”

但这不是我观察到的行为。为什么属性不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-18T08:42:14.693

对开始和结束有很多误解。**布局 xml 中的**
**开始**和**结束**可替代**左右**以匹配布局方向（LTR 或 RTL）。 因此，当文档说：

 **> “要绘制到文本开头的drawable。”

你必须阅读：

> “根据布局方向绘制到视图开头的drawable”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T02:21:32.083

原因是因为 drawableStart 使按钮成为复合布局，即图像视图和文本视图都包裹在一个“按钮”中......

因此，您所看到的是 ImageView 放置在 Textview 的前面。但是 TextView 仍然设置了其默认布局属性，以便将其绘制在为它留下的空间的中心，因此存在间隙（注意它在空间中居中通过将图像放在文本的开头离开）

所以你基本上需要覆盖按钮 TextView 的重力属性 -

`android:gravity="center_vertical|center_horizontal|left"`

请参阅下面的通知，您只需要让按钮由 1 个布局包裹，另一个是多余的......即，RelativeLayout 也可以是一个 LinearLayout，因为您在布局中只有一个视图！

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:drawableStart="@drawable/ic_launcher"
        android:gravity="center_vertical|center_horizontal|left"
        android:text="@string/app_name" />

</RelativeLayout> 
```**

# android - Android在按钮点击时重新加载textViews

> ID：15350996
> 
> 赞同：0
> 
> 时间：2013-03-12T00:08:50.850
> 
> 标签：android, textview, oncreate

在一个活动中，我从自定义对象加载了一些文本值。

这些文本值进入 textViews，textViews 显示在屏幕上。

我有上一个和下一个按钮，当点击它们时，应该用新值刷新 textViews。

这是一些代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity);

    myObj = (Object)getIntent().getSerializableExtra("Stuff");

    myTextView.setText(myObj.currentData().getText());

    prevButton = (Button) findViewById(R.id.prevButton);
    nextButton = (Button) findViewById(R.id.nextButton);

        prevButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Log.d("TAG", "prevButton tapped");
            myObj.prevData();
                            //Would like to call refresh view here
        }
    });

    nextButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Log.d("TAG", "nextButton tapped");
            myObj.nextData();   
                            //Would like to call refresh view here too
        }
    });

 } 
```

现在我注意到当我点击上一个或下一个按钮然后旋转设备时，视图会更新。我试图在不旋转设备的情况下重现它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T00:17:39.773

您可以保持简单并执行以下操作：

```
public void onCreate(Bundle onSavedInstanceState) {
     // Other code
     refreshTextView();
}

public void onClick(View v) {
     // Advance currentData()
     refreshTextView();
}

private void refreshTextView() {
     myTextView.setText(myObj.currentData().getText());
} 
```

# sql - 如何在多个表上运行 SQL 查询

> ID：15350997
> 
> 赞同：0
> 
> 时间：2013-03-12T00:08:53.487
> 
> 标签：sql

我正在构建一个包含车辆组件的数据库。共有三个表：

*   车辆表（每辆车都有唯一 ID 号的车辆列表）
*   轮胎表（列出轮胎的序列号 (SN) 和零件号 (PN) 以及安装轮胎的车辆 (ID)）
*   过滤器表（列出过滤器的序列号 (SN) 和部件号 (PN) 以及安装它的车辆 (ID)）

我想创建一个 Access SQL 查询，它提取安装在特定车辆上的所有过滤器和轮胎的序列号和零件号（假设我们正在搜索车辆 ID 为 5 的本田思域）。我创建了以下代码，但它返回所有结果的笛卡尔积。每辆车上安装了两个过滤器和两个轮胎，因此它返回以下结果，其中结果被组合和复制。

*   轮胎 1（PN 和 SN）| 过滤器 1（PN 和 SN）
*   轮胎 1（PN 和 SN）| 过滤器 2（PN 和 SN）
*   轮胎 2（PN 和 SN）| 过滤器 1（PN 和 SN）
*   轮胎 2（PN 和 SN）| 过滤器 2（PN 和 SN）

无论如何我可以创建一个返回的查询：

*   轮胎 1（PN 和 SN）
*   轮胎 2（PN 和 SN）
*   过滤器 1（PN 和 SN）
*   过滤器 2（PN 和 SN）

我的代码如下：

```
SELECT DISTINCT Tires.SN, Tires.PN, Tires.ID, Filters.ID, Filters.PN, Filters.SN,
Vehicle.ID 
FROM (Vehicle 
INNER JOIN Filters ON Vehicle.[ID] = Filters.[ID]) 
INNER JOIN Tires ON Vehicle.[ID] = Tires.[ID] 
WHERE Vehicle.[ID] = 5; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T00:25:40.067

如果您*真的*只需要 Vehicle.ID 的单个值，那么您可以使用`UNION`如下查询：

```
SELECT 'Tire',Tires.SN, Tires.PN 
FROM Tires
WHERE Vehicle.[ID]=5
UNION 
SELECT 'Filter',Filters.PN, Filters.SN
FROM Filters
WHERE Vehicle.[ID]=5
ORDER BY 1; 
```

# android - 确定 Android 通知的 addAction 点击

> ID：15350998
> 
> 赞同：63
> 
> 时间：2013-03-12T00:09:00.657
> 
> 标签：android, android-intent, notifications, broadcastreceiver, android-4.0-ice-cream-sandwich

我正在尝试使用新的通知界面。我在通知中添加了 3 个按钮，我想在单击每个按钮后将某些内容保存到我的数据库中。

通知本身运行良好，并在调用时显示，我只是不知道如何捕获三个不同按钮单击中的每一个。

我正在使用 a`BroadcastReceiver`来捕捉点击，但我不知道如何判断点击了哪个按钮。

这是`AddAction`（我排除了通知的其余部分，因为它运行良好）的代码 -

```
 //Yes intent
    Intent yesReceive = new Intent();  
    yesReceive.setAction(CUSTOM_INTENT);
    Bundle yesBundle = new Bundle();            
    yesBundle.putInt("userAnswer", 1);//This is the value I want to pass
    yesReceive.putExtras(yesBundle);
    PendingIntent pendingIntentYes = PendingIntent.getBroadcast(this, 12345, yesReceive, PendingIntent.FLAG_UPDATE_CURRENT);
    mBuilder.addAction(R.drawable.calendar_v, "Yes", pendingIntentYes);

    //Maybe intent
    Intent maybeReceive = new Intent();  
    maybeReceive.setAction(CUSTOM_INTENT);
    Bundle maybeBundle = new Bundle();            
    maybeBundle.putInt("userAnswer", 3);//This is the value I want to pass
    maybeReceive.putExtras(maybeBundle);
    PendingIntent pendingIntentMaybe = PendingIntent.getBroadcast(this, 12345, maybeReceive, PendingIntent.FLAG_UPDATE_CURRENT);
    mBuilder.addAction(R.drawable.calendar_question, "Partly", pendingIntentMaybe);

    //No intent
    Intent noReceive = new Intent();  
    noReceive.setAction(CUSTOM_INTENT);
    Bundle noBundle = new Bundle();            
    noBundle.putInt("userAnswer", 2);//This is the value I want to pass
    noReceive.putExtras(noBundle);
    PendingIntent pendingIntentNo = PendingIntent.getBroadcast(this, 12345, noReceive, PendingIntent.FLAG_UPDATE_CURRENT);
    mBuilder.addAction(R.drawable.calendar_x, "No", pendingIntentNo); 
```

这是`BroadcastReceiver`-的代码

```
 public class AlarmReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    Log.v("shuffTest","I Arrived!!!!");
     //Toast.makeText(context, "Alarm worked!!", Toast.LENGTH_LONG).show();

    Bundle answerBundle = intent.getExtras();
    int userAnswer = answerBundle.getInt("userAnswer");
    if(userAnswer == 1)
    {
        Log.v("shuffTest","Pressed YES");
    }
    else if(userAnswer == 2)
    {
        Log.v("shuffTest","Pressed NO");
    }
    else if(userAnswer == 3)
    {
        Log.v("shuffTest","Pressed MAYBE");
    }

}           
} 
```

我已经`BroadcastReceiver`在 Manifest 中注册了。另外，我想提一下，`BroadcastReceiver`当我单击通知中的一个按钮时会调用它，但意图总是包含额外的“2”。

这是通知iteslf - ![通知](../Images/228001679fa8dc57492b8c6ca80311d5.png)

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-03-20T10:45:09.330

这是因为您将[FLAG_UPDATE_CURRENT](http://developer.android.com/reference/android/app/PendingIntent.html#FLAG_UPDATE_CURRENT)与具有相同操作的 Intent 一起使用

从文档：

> 如果描述的 PendingIntent 已经存在，则保留它，但用这个新 Intent 中的内容替换其额外数据。

当您指定`pendingIntentMaybe`and`pendingIntentNo`时，系统使用`PendingIntent`创建的 for `pendingIntentYes`，但它会覆盖 extras。因此，所有三个变量都指向同一个对象，并且最后指定的附加项是 for `pendingIntentNo`。

您应该为每个`Intent`. 您仍然可以拥有一个`BroadcastReceiver`，并让它拦截所有三个动作。这在语义上也不会那么混乱:)

您的通知海报：

```
//Yes intent
Intent yesReceive = new Intent();  
yesReceive.setAction(YES_ACTION);
PendingIntent pendingIntentYes = PendingIntent.getBroadcast(this, 12345, yesReceive, PendingIntent.FLAG_UPDATE_CURRENT);
mBuilder.addAction(R.drawable.calendar_v, "Yes", pendingIntentYes);

//Maybe intent
Intent maybeReceive = new Intent();  
maybeReceive.setAction(MAYBE_ACTION);
PendingIntent pendingIntentMaybe = PendingIntent.getBroadcast(this, 12345, maybeReceive, PendingIntent.FLAG_UPDATE_CURRENT);
mBuilder.addAction(R.drawable.calendar_question, "Partly", pendingIntentMaybe);

//No intent
Intent noReceive = new Intent();  
noReceive.setAction(NO_ACTION);
PendingIntent pendingIntentNo = PendingIntent.getBroadcast(this, 12345, noReceive, PendingIntent.FLAG_UPDATE_CURRENT);
mBuilder.addAction(R.drawable.calendar_x, "No", pendingIntentNo); 
```

您的接收器：

```
@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();

    if(YES_ACTION.equals(action)) {
        Log.v("shuffTest","Pressed YES");
    } else if(MAYBE_ACTION.equals(action)) {
        Log.v("shuffTest","Pressed NO");
    } else if(NO_ACTION.equals(action)) {
        Log.v("shuffTest","Pressed MAYBE");
    }
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-06-12T14:16:03.577

**一步步**

**第1步**

```
public void noto2() // paste in activity
{
    Notification.Builder notif;
    NotificationManager nm;
    notif = new Notification.Builder(getApplicationContext());
    notif.setSmallIcon(R.drawable.back_dialog);
    notif.setContentTitle("");
    Uri path = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
    notif.setSound(path);
    nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    Intent yesReceive = new Intent();
    yesReceive.setAction(AppConstant.YES_ACTION);
    PendingIntent pendingIntentYes = PendingIntent.getBroadcast(this, 12345, yesReceive, PendingIntent.FLAG_UPDATE_CURRENT);
    notif.addAction(R.drawable.back_dialog, "Yes", pendingIntentYes);

    Intent yesReceive2 = new Intent();
    yesReceive2.setAction(AppConstant.STOP_ACTION);
    PendingIntent pendingIntentYes2 = PendingIntent.getBroadcast(this, 12345, yesReceive2, PendingIntent.FLAG_UPDATE_CURRENT);
    notif.addAction(R.drawable.back_dialog, "No", pendingIntentYes2);

    nm.notify(10, notif.getNotification());
} 
```

**步骤 1.5**

> > 我创建了一个全局类 AppConstant

```
 public class AppConstant 
   {
  public static final String YES_ACTION = "YES_ACTION";
  public static final String STOP_ACTION = "STOP_ACTION";
  } 
```

**第2步：**

```
 public class NotificationReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    String action = intent.getAction();
    if (AppConstant.YES_ACTION.equals(action)) {
        Toast.makeText(context, "YES CALLED", Toast.LENGTH_SHORT).show();
    }
    else  if (AppConstant.STOP_ACTION.equals(action)) {
        Toast.makeText(context, "STOP CALLED", Toast.LENGTH_SHORT).show();
    }
} 
```

}

**第 3 步**

```
 <receiver android:name=".NotificationReceiver">
        <intent-filter>
            <action android:name="YES_ACTION"/>
            <action android:name="STOP_ACTION"/>

        </intent-filter>
    </receiver> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-08-09T11:19:13.187

在我的情况下，它在添加意图过滤器后对我有用

```
 <receiver android:name=".AlarmReceiver">
      <intent-filter>
           <action android:name="YES_ACTION"/>
           <action android:name="NO_ACTION"/>
           <action android:name="MAYBE_ACTION"/>
      </intent-filter>
  </receiver> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-14T10:01:36.537

这里`YES_ACTION`一定是`yourfullpackagename.YES`

像

```
private static final String YES_ACTION = "com.example.packagename.YES"; 
```

同样，您可以使用`NO_ACTION`或`MAYBE_ACTION`

在 BroadcastReceiver 你必须使用与`YES_ACTION`上面声明的相同，

意味着在 BroadcastReceiver 类中，您可以通过以下方式检查自定义广播

```
public class NotificationReceiver extends BroadcastReceiver {

private static final String YES_ACTION = "com.example.packagename.YES";
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub
    String action = intent.getAction();
    if(YES_ACTION.equals(action)) {
        Toast.makeText(context, "CALLED", Toast.LENGTH_SHORT).show();
    }
} 
```

}

注意：代替 YES_ACTION 字符串中的 YES，您也可以使用其他词。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-17T05:14:45.480

***这对我有用***

[查看示例图片](https://i.stack.imgur.com/kwqMy.jpg)

*在您的服务中*

```
private void sendNotification(String title, String body) {

    Intent activityIntent = new Intent(this, HomeActivity.class);
    activityIntent.setAction(Long.toString(System.currentTimeMillis()));

    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, activityIntent, 0);

    Intent broadcastIntent = new Intent(this, MyReceiver.class);
    broadcastIntent.putExtra("quotes_copy", body);
    PendingIntent actionIntent = PendingIntent.getBroadcast(this, 0, broadcastIntent, PendingIntent.FLAG_UPDATE_CURRENT);

    NotificationManager notificationManager = (NotificationManager) getApplicationContext().getSystemService(Context.NOTIFICATION_SERVICE);

    if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.O) {
        CharSequence name = getString(R.string.channel_name);
        String description = getString(R.string.channel_description);
        int importance = NotificationManager.IMPORTANCE_HIGH;
        NotificationChannel mChannel = new NotificationChannel(NOTI_CHANNEL_ID, name, importance);
        mChannel.setDescription(description);
        mChannel.enableLights(true);
        mChannel.setLightColor(Color.RED);
        mChannel.enableVibration(true);
        mChannel.setVibrationPattern(new long[]{100, 200, 300, 400, 500, 400, 300, 200, 400});
        mChannel.setShowBadge(false);
        notificationManager.createNotificationChannel(mChannel);
    }

    NotificationCompat.Builder builder = new NotificationCompat.Builder(getApplicationContext(), NOTI_CHANNEL_ID)
            .setSmallIcon(R.drawable.ic_logo)
            .setContentTitle(title)
            .setContentText(body)
            .setAutoCancel(true)
            .setContentIntent(contentIntent)
            .setContentTitle(title)
            .addAction(R.drawable.ic_logo, "Copy", actionIntent);

    random = new Random();
    NOTIFY_ID = random.nextInt(1000);
    notificationManager.notify(NOTIFY_ID, builder.build());

} 
```

*在您的接收器类中*

```
 @Override
public void onReceive(Context context, Intent intent) {

    String message = intent.getStringExtra("quotes_copy");

    Toast.makeText(context, message, Toast.LENGTH_SHORT).show();

} 
```

*显现*

```
<receiver android:name=".Utils.MyReceiver"/> 
```