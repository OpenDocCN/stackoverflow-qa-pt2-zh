# StackOverflow 问答 15829000-15829999

# sql - 将 sql 查询转换为休眠查询以返回特定对象的列表

> ID：15829003
> 
> 赞同：0
> 
> 时间：2013-04-05T08:15:41.940
> 
> 标签：sql, hibernate, hql, converter

我想将下面的查询转换为 hql 以返回我，`List<Article>`因为使用 createSqlQuery 是不可能的，我必须手动转换结果：
这是 sql 查询：

```
Query query = getSessionFactory().getCurrentSession().createSQLQuery(
                 "select * 
                  from article 
                  where articleID in (select articleID 
                                      from article_depot 
                                      where depotID = "+depotID+")"
              ); 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:31:06.753

假设您在和之间有**OneToMany**关系（一个仓库包含多篇文章），如果已正确映射，则查询将是：`article_depot``article`

```
Query query = getSessionFactory().getCurrentSession().createQuery("SELECT d.article from article_depot d where d.depotId = :depotId");
query.setParameter("depotId", depotId);
List<article> resultList = query.getResultList(); 
```

# android - 无法使用 json 从 url 获取数据 (NullPointerException)

> ID：15829004
> 
> 赞同：0
> 
> 时间：2013-04-05T08:15:52.980
> 
> 标签：android, json, url, nullpointerexception

我正在尝试从[http://projectxapp.herokuapp.com/dashboard/ads/api/v1/ads/的 Json 格式获取数据](http://projectxapp.herokuapp.com/dashboard/ads/api/v1/ads/)

它显示 NullPointerException，我尝试了多种方法来解决它。但是我还是没有想法！！objectList 似乎是空的。

```
public class ImagePagerActivity extends Activity {
// url to make request
private static String url =         
  "http://projectxapp.herokuapp.com/dashboard/ads/api/v1/ads/";

// JSON Node names
static final String TAG_META = "meta";
static final String TAG_META_LIMIT = "limit";
private static final String TAG_META_NEXT = "next";
private static final String TAG_META_total_count = "count";
private static final String TAG_OBJECTS = "objects";
private static final String TAG_OBJECTS_END_TIME = "endTime";
private static final String TAG_OBJECTS_ID = "id";
private static final String TAG_OBJECTS_LINK = "link";
private static final String TAG_OBJECTS_PHOTO = "photo";
private static final String TAG_OBJECTS_PHOTO_HEIGHT = "height";
static final String TAG_OBJECTS_PHOTO_RESOURCE_URI = "resourceUri";
private static final String TAG_OBJECTS_PHOTO_SOURCE = "source";
private static final String TAG_OBJECTS_PHOTO_WIDTH = "width";
private static final String TAG_OBJECTS_RESOURCE_URI = "OResourceUri";
private static final String TAG_OBJECTS_START_TIME = "startTime";
// contacts JSONArray
JSONArray meta = null;
JSONArray objects = null;

//
private static final String TEST_FILE_NAME = "Universal Image Loader @#&=+-_.,!()~'%20.png";
private static final String STATE_POSITION = "STATE_POSITION";
ImageLoader imageLoader = ImageLoader.getInstance();
DisplayImageOptions options;

ViewPager pager;

@SuppressWarnings("null")
@SuppressLint("NewApi")
public void onCreate(Bundle savedInstanceState) {
    //
    StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
            .detectDiskReads().detectDiskWrites().detectNetwork() 
            .penaltyLog().build());
    StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
            .detectLeakedSqlLiteObjects().detectLeakedClosableObjects()
            .penaltyLog().penaltyDeath().build());
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    ;
    setContentView(R.layout.mos);

    File testImageOnSdCard = new File("/mnt/sdcard", TEST_FILE_NAME);
    if (!testImageOnSdCard.exists()) {
        copyTestImageToSdCard(testImageOnSdCard);
    }

    ArrayList<HashMap<String, String>> objectsList = new     
                                           ArrayList<HashMap<String, String>>();
    JSONParser jParser = new JSONParser();
    JSONObject json = null;
    try {

        json = jParser.getStringContent(url);
    } catch (Exception e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    try {
        // Getting Array of Contacts
        objects = json.getJSONArray(TAG_OBJECTS);

        // looping through All Contacts
        for (int i = 0; i < objects.length(); i++) {
            JSONObject c = objects.getJSONObject(i);
            String link = c.getString(TAG_OBJECTS_LINK);
            JSONObject photo = c.getJSONObject(TAG_OBJECTS_PHOTO);
            String source = photo.getString(TAG_OBJECTS_PHOTO_SOURCE);
        HashMap<String, String> map = new HashMap<String, String>();
            map.put(TAG_OBJECTS_LINK, link);
            map.put(TAG_OBJECTS_PHOTO_SOURCE, source);
            // adding HashList to ArrayList
            objectsList.add(map);
        }

    } catch (JSONException e) {
        e.printStackTrace();
    }

     String[] imageUrls = null;
     if(objectsList.isEmpty());
     Toast.makeText(this, "No Data", Toast.LENGTH_LONG).show();
     Log.i("getData1", "!!!!!!!!!!!");
             //
             for(int i=0; i<objects.length(); i++)
     {
         Log.i("getData2", "!!!!!!!!!!!");
        imageUrls[i]=objectsList.get(i).get(TAG_OBJECTS_PHOTO_RESOURCE_URI);
        Log.i("getData3", "!!!!!!!!!!!");
     }
             //
       private void copyTestImageToSdCard(final File testImageOnSdCard) {
    new Thread(new Runnable() {
        @Override
        public void run() {
            try {
                InputStream is = getAssets().open(TEST_FILE_NAME);
                FileOutputStream fos = new FileOutputStream(
                        testImageOnSdCard);
                byte[] buffer = new byte[8192];
                int read;
                try {
                    while ((read = is.read(buffer)) != -1) {
                        fos.write(buffer, 0, read);
                    }
                } finally {
                    fos.flush();
                    fos.close();
                    is.close();
                }
            } catch (IOException e) {
                L.w("Can't copy test image onto SD card");
            }
        }
    }).start();
} 
```

有 JSONParser()。

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}
public static JSONObject getStringContent(String uri) throws Exception {

    try {
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet();
        request.setURI(new URI(uri));
        HttpResponse response = client.execute(request);
        InputStream ips  = response.getEntity().getContent();
        BufferedReader buf = new BufferedReader(new InputStreamReader(ips,"UTF-8"));

        StringBuilder sb = new StringBuilder();
        String s;
        while(true )
        {
            s = buf.readLine();
            if(s==null || s.length()==0)
                break;
            sb.append(s);

        }
        buf.close();
        ips.close();
        jObj = new JSONObject(sb.toString());
        return jObj;

        } 

} 
```

这些是下面的 logcat 消息！

```
 04-05 07:25:17.889: E/StrictMode(630):   at  
   java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
   04-05 07:25:17.889: E/StrictMode(630):   at java.lang.Thread.run(Thread.java:856)
   04-05 07:25:21.831: E/AndroidRuntime(3285): FATAL EXCEPTION: main
   04-05 07:25:21.831: E/AndroidRuntime(3285): java.lang.RuntimeException: Unable to        
   start activity ComponentInfo{com.sai.mosorder/com.sai.mosorder.ImagePagerActivity}:
   java.lang.NullPointerException
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at      
   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at   
   android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at   
   android.app.ActivityThread.access$600(ActivityThread.java:141)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at   
   android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at    
   android.os.Handler.dispatchMessage(Handler.java:99)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at     
   android.os.Looper.loop(Looper.java:137)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at   
   android.app.ActivityThread.main(ActivityThread.java:5041)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at  
   java.lang.reflect.Method.invokeNative(Native Method)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at   
   java.lang.reflect.Method.invoke(Method.java:511)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at  
   com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at    
   com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at    
   dalvik.system.NativeStart.main(Native Method)
   04-05 07:25:21.831: E/AndroidRuntime(3285): Caused by:     
   java.lang.NullPointerException
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at    
   com.sai.mosorder.ImagePagerActivity.onCreate(ImagePagerActivity.java:132)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at   
   android.app.Activity.performCreate(Activity.java:5104)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at    
   android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  at 
   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
   04-05 07:25:21.831: E/AndroidRuntime(3285):  ... 11 more
   04-05 07:25:22.200: E/SurfaceFlinger(37): ro.sf.lcd_density must be defined as a    
   build property
   04-05 07:25:22.560: E/SurfaceFlinger(37): ro.sf.lcd_density must be defined as a     
   build property
   04-05 07:26:07.869: E/ActivityThread(630):   at    
   com.android.exchange.ExchangeService$7.run(ExchangeService.java:1856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:25:58.223

我找到了答案！！！！如果您对在 android 上使用 Json 感到困惑。你必须检查这个网站。

[http://mobiforge.com/developing/story/sumption-json-services-android-apps](http://mobiforge.com/developing/story/consuming-json-services-android-apps)

# php - PHP/jQuery 提交/保存所有特殊字符值的输入

> ID：15829006
> 
> 赞同：2
> 
> 时间：2013-04-05T08:15:54.207
> 
> 标签：php, javascript, jquery, character

例子..

**HTML：**

```
<input type="hidden" value=""> 
```

**PHP：**

```
<input type="hidden" value="<?php echo $value;?>"> 
```

**jQuery :**

```
$("input:hidden").val(text); 
```

如果`text`*（JS 变量）*是自由文本，则允许所有 html 特殊字符（如单引号/双引号）并保存到`input:hidden`（因此由 PHP 提交）

什么是正确的方法？

我可以用吗

`echo htmlentities($value);`... 在 PHP 中

或替换 jQuery 中的引号，例如`.val(text.replace(/'/g,"’"))`

要不然是啥 ？

PS：请考虑一下我何时将值设置为 input 以使用 jQuery 保存值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:19:37.440

转换为[htmlentities](http://ca3.php.net/manual/en/function.htmlentities.php)应该可以正常工作。

如果要删除所有 HTML 标签，也可以使用[strip_tags ：](http://ca2.php.net/manual/en/function.strip-tags.php)

**注意：**这不会阻止所有 XSS 攻击

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:18:02.323

如果要将 PHP 变量回显到某些 HTML 中，请使用：

```
<input type="hidden" value="<?php echo htmlspecialchars($value); ?>"> 
```

[http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

如果要将 PHP 变量回显到某些 JavaScript 中，请使用：

```
<?php echo json_encode($value); ?> 
```

[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

# html - 带有背景的标题周围的动态背景

> ID：15829011
> 
> 赞同：0
> 
> 时间：2013-04-05T08:16:04.483
> 
> 标签：html, css, background

我遇到了一个非常严重的问题。

我有一个带有背景的标题，它的左右两端不同。标题、内容以及围绕它们的包装器都是 1065 像素宽。

我创建了另一个“background_wrapper”，它包含一个在标题图形上继续的图形。它具有左右不同的末端和空白空间，与标题图形一样宽。它必须保持在标题图形的末尾，就像浏览器窗口为 100% 宽（在 PC 屏幕上）时一样。但是，如果我调整它的大小，它会变得越来越小（每次都是 100%），所以它会移动到标题后面。

**我在这里上传了它：http: [//bf3zone.bplaced.net/Coding/](http://bf3zone.bplaced.net/Coding/)**

我的代码：

```
 <body>
<div id="background_addition">
<div id="wrapper" class="clearfix">
    <div id="header">
        <div id="logo">
            <a href="index.html" title="M3 Institut - Zurück zum Start">
                <img src="images/logo_hover.png" alt="M3 Institut - Menschen machen Märkte" class="b" />
                <img src="images/logo.png" alt="" class="a" />
            </a>
        </div>
        <ul class="nav">
            <li><a href="index.html" title="Start" class="current_page_item">Start</a></li>
            <li><a href="">Tab 1</a></li>
            <li><a href="">Tab 2</a></li>
            <li><a href="">Tab 3</a></li>
            <li><a href="">Tab 4</a></li>
            <li><a href="">Tab 5</a></li>
            <li><a href="">Tab 6</a></li>
            <li><a href="">Blog</a></li>
        </ul>
    </div> 
```

我所有包含正文/标题/包装器的东西的CSS：

```
 * {
    margin:0;
    padding:0;
    } 

html, body {
    display: block; 
    background: url(images/background.jpg) repeat-x; 
    font: normal 100% Arial, sans-serif; /* 16px */ 
    line-height: 140%;
    color: #464646; 
    clear: both; 
    }

html, body, #wrapper {
    height: 100%;
    margin: 0 auto;
    }

body > #wrapper {
    height: auto; 
    min-height: 100%;
    }

#wrapper {
    width: 1065px;
    }

#background_addition {
background: url(images/wrapper.png) no-repeat center top;
}

#header {
width: 1065px;
height: 193px;
background: url(images/header_background.png) no-repeat top left;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:52:39.867

解决方案：使用标题的宽度为您的身体添加一个最小宽度。

```
html, body {
      min-width: 1064px;
      } 
```

# string - 如何找到一堆最近的字符串？

> ID：15829012
> 
> 赞同：3
> 
> 时间：2013-04-05T08:16:07.750
> 
> 标签：string, image, matlab, signals

我有一个字符串和一个模式。如何在 matlab 中使用 strfind 并找到一堆最接近的字符串？换句话说， strfind 找到了完全匹配，而我有兴趣找到一堆最接近的字符串（例如 10 个最接近的字符串）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:00:00.537

您可以从文件交换中使用[此](http://www.mathworks.de/matlabcentral/fileexchange/17585-calculation-of-distance-between-strings/content/strdist.m)函数，该函数`strdist`计算两个字符串之间的 Levenshtein 距离。

这是一个方便的包装函数。你给它一个字符串`str`和一个字符串数组`strarray`（以及可选的一些要返回的字符串`n`），它给你一个包含最接近`n`字符串的单元格数组：

```
function result = strfuzzy(str,strarray,n)
#STRFUZZY
#
#   Inputs
#       str         String
#       strarray    Cell array of strings
#       n           Integer, 1 <= n <= length(strarray)
#
#   Outputs
#       result      Cell array of length n containing the closest matches to str
#

if nargin < 2, error('Requires at least two arguments'), end
if nargin < 3, n = length(strarray); end

A = cellfun( @(x) strdist(str,x), strarray );
[tmp,idx] = sort(A);
result = strarray(idx);
result = result(1:n);

end 
```

以下是如何使用它：

```
>> strarray = {'cat', 'hey', 'hay', 'hat', 'Hey'};
>> strfuzzy('hey', strarray)
ans = 
    'hey'    'hay'    'Hey'    'hat'    'cat'
>> strfuzzy('bat', strarray, 3)
ans = 
    'cat'    'hat'    'hay' 
```

# java - 如何使用多帧？

> ID：15829013
> 
> 赞同：0
> 
> 时间：2013-04-05T08:16:08.647
> 
> 标签：java, swing, jframe, multiple-instances

好吧，我有几个 JFrame，我把它们放在不同的类中。使用 JFrame 作为开始框架，呈现按钮列表每个人都可以开始一个框架。如果我只使用`frame.setVisible (true)`. 我在第一个上面有框架。我想知道如何打开第二个并关闭第一个，如果您有示例，我将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:29:27.343

如果你真的想要有很多帧，你可以这样做：

首先，不要一次启动所有帧，只启动包含按钮的帧。如果单击了相应的按钮，则应调用相应框架的 start 方法（将启动该框架的方法）。在带有按钮调用的框架中

> this.dispose();

停止所有框架的操作（包括任务栏中图标的可见性和存在）。

* * *

这是一个例子：

```
private void ButtonActionPerformed(){
this.dispose();
OtherFrameClass.createWindow();
} 
```

只是为了在此示例中澄清该方法是按下按钮时调用的方法，而 createWindow() 方法是启动下一个窗口的方法

* * *

这将起作用，但不是一个优雅的答案。请参阅[使用多个 JFrame，好/坏做法？](https://stackoverflow.com/questions/9554636/the-use-of-multiple-jframes-good-bad-practice).

# c - 在c中的udp中接收文本文件

> ID：15829016
> 
> 赞同：-1
> 
> 时间：2013-04-05T08:16:17.363
> 
> 标签：c, sockets, udp

我正在尝试通过 UDP 套接字接收文本文件，然后再次将其保存为文本文件。代码构建良好，但运行时，输出是一个空白控制台，并且文本文件也没有创建。经过一番研究，我发现我应该将接收到的字节数提供给`fwrite`函数，所以我尝试使用该`size_t`类型，但它对我没有帮助:(。

这是我的代码片段：

```
char file_buffer[100];
while(1)
{
    // Tranmsit data to get file /
    server_length = sizeof(struct sockaddr_in);
    if (sendto(sd, send_buffer, (int)strlen(send_buffer) + 1, 0, (struct sockaddr  *)&server, server_length) == -1)
    { 
        fprintf(stderr, "Error transmitting data.\n");
        closesocket(sd);
        WSACleanup();
        exit(0);
    }
    size_t data=0;
    if(data=recvfrom(sd, file_buffer, BUFFER_SIZE, 0, (struct sockaddr *) &server, &server_length)<0)
    {
        printf("Error receiving file.");
        exit(1);
    }        

    FILE *fp=NULL;
    fp = fopen("new_file.txt","w+");
    fwrite(file_buffer, 1, data, fp);
    {
        printf("Error writing file! \n");
        exit(1);
    }
    fclose(fp);
    printf("File received:)\n");        
} 
```

如果有人让我知道我的错误是什么，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:21:16.433

由于[运算符优先级](http://en.cppreference.com/w/c/language/operator_precedence)，这是一个错误：

```
if(data=recvfrom(sd, file_buffer, BUFFER_SIZE, 0, (struct sockaddr *) &server, &server_length)<0) 
```

as`<`的优先级高于`=`. 这意味着`data`将根据测试结果分配`1`或分配。改成：`0``<`

```
if((data = recvfrom(sd,
                    file_buffer,
                    BUFFER_SIZE,
                    0,
                    (struct sockaddr *) &server,
                    &server_length)) < 0) 
```

在继续使用之前确保文件已经被实际打开`fp`，检查结果`fwrite()`判断状态，查询`errno`判断失败原因：

```
FILE *fp = fopen("new_file.txt","w+");
if (fp)
{
    if (fwrite(file_buffer, 1, data, fp) != data)
    {
        fprintf(stderr, "Error writing file: %s\n", strerror(errno));
        exit(1);
    }
    fclose(fp);
    printf("File received:)\n");
}
else
{
    fprintf(stderr, "Error opening file: %s\n", strerror(errno));
} 
```

# android - 如何从android连接到ftp服务器

> ID：15829017
> 
> 赞同：0
> 
> 时间：2013-04-05T08:16:19.480
> 
> 标签：android

我经历了很多关于从 ftp 服务器上传文件的讨论。我认为有两种连接和上传方式：

1：我必须使用 apache 库并使用它的类，如 ftpclient。

2：使用 URLConnection 像这样的代码：

```
 public void getFile(URL u) throws IOException { 
        // url de type "http://www.monsite.com/monrep/mavideo.wmv" 
        String FileName = u.getFile(); 
        FileName = FileName.substring(FileName.lastIndexOf('/') + 1); 
        URLConnection uc = u.openConnection(); 
        int FileLenght = uc.getContentLength(); 
        if (FileLenght == -1) { 
           monView2.setText("Fichier non valide:"+ FileName); 
        } 

        try 
        { 
           InputStream myInput = uc.getInputStream(); 
           String outFileName = "/sdcard/GPTO/"+ NomParcours + "/" + FileName; 
           FileOutputStream myOutPut = new FileOutputStream(outFileName); 
           byte[]buff = new byte[1024]; 
           int l = myInput.read(buff); 

           while(l>0) 
           { 
              myOutPut.write(buff, 0, l); 
              l = myInput.read(buff); 
           } 
           myOutPut.flush(); 
           myOutPut.close(); 
      } 
      catch(Exception e) 
      { 
         monView2.setText( e.toString()); 
      } 
 } 
```

请以正确的方式指导我，我是 Android 的初学者，我只知道基础知识，实现相同目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:21:11.857

```
ftpClient.connect(InetAddress.getByName(server));
ftpClient.login(user, password);
ftpClient.changeWorkingDirectory(serverRoad);
ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
BufferedInputStream buffIn=null;
buffIn=new BufferedInputStream(new FileInputStream(file));
ftpClient.enterLocalPassiveMode();
ftpClient.storeFile("mysampletext.txt", buffIn);
buffIn.close();
ftpClient.logout();
ftpClient.disconnect(); 
```

导入 ftp 库后使用此代码。[关联](http://commons.apache.org/proper/commons-net/)

# antlr4 - Antlr4 如何捕获表达式的求值顺序

> ID：15829019
> 
> 赞同：0
> 
> 时间：2013-04-05T08:16:20.983
> 
> 标签：antlr4

我有以下语法

```
grammar Expr;   

prog: expr;

expr: LP expr RP
| expr LP expr RP
| LP expr RP expr
| expr '*' '{' ',' expr 
| expr op=NOT expr
| expr op=AND expr
| expr op=OR expr
| ID
;

NEWLINE:'\r'? '\n' ; 

NOT: '~';    
AND: '&';
OR: '|';

LP : '(';
RP : ')';

// lexer/terminal rules start with an upper case letter
ID
  :
    (
    'a'..'z'
    | 'A'..'Z'
    | '0'..'9' | ' '
    | ('+'|'-'|'*'|'/'|'_')
  | '='
  | '~'
  | '{'
  | '}'
  | ','
  )+ 
  ;

WS : [ \t\n]+ -> skip ; 
```

我想提取正在评估的表达式的节点，并按照评估的顺序需要它。因此对于诸如 1*{A42,A53,A16,A3}&(A26|A41)&(A51=P&A2=F|A7=C) 之类的表达式，它将按以下顺序进行评估

```
A26 | A41 
A51 & A2=F
A51 & A2F | AF=C
1*{A42,A53,A16,A3}&(A26|A41)
1*{A42,A53,A16,A3}&(A26|A41)&(A51=P&A2=F|A7=C) 
```

主要兴趣是弄清楚表达式的计算顺序。

你怎么处理这件事。我尝试编写访问者实现，但不知道如何提取订单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:42:36.903

每次您通过“expr”规则递归时，Antlr 都会生成一个新的上下文对象。上下文的顺序将提供您想要的信息。每个包含 ID 的非空 TerminalNode 的上下文都将表示评估成功。因此，在最简单的情况下，遍历解析树并在“enterEveryRule”中查看 ID。在“enterEveryRule”和“exitEveryRule”中观察成功之间的最高拐点（升序切换到降序，反之亦然），以区分有效和未使用的连词符号。

FWIW，您的前三个规则替代是模棱两可的，第四个不太可能达到您的预期，并且可以组合 5-7 以简化您的分析。

# html - CSS 悬停禁用嵌套表

> ID：15829020
> 
> 赞同：2
> 
> 时间：2013-04-05T08:16:30.850
> 
> 标签：html, css, hover

我对 CSS`:hover`类有疑问。如何禁用第二`:hover`行内的第二个表类。

这是[小提琴](http://jsfiddle.net/bigboytr/yrZ8R/)

**HTML**

```
<table border="0" width="100%" id="product-table">
  <tr>
    <td colspan="2">Title of the table</td>
  </tr>
  <tr>
    <td width="20%"><b>Text text</b></td>
    <td>someting about product</td>
  </tr>
  <tr>
    <td><b>text text</b></td>
    <td>
        <table border="0" width="100%">
        <thead>
            <tr bgcolor="#ddd">
                <td colspan="6"><strong>Title of inside</strong></td>
            </tr>
            <tr bgcolor="#efefef">
                <td width="20%"><strong>No</strong></td>
                <td width="20%"><strong>Date</strong></td>
                <td width="20%"><strong>Define</strong></td>
            </tr>
        </thead>
        <tbody id="hat_ekle">
            <tr>
                <td>123</td>
                <td>2013</td>
                <td>some text</td>
            </tr>
            <tr>
                <td>234</td>
                <td>2013</td>
                <td>some text</td>
            </tr>
        </tbody>
        </table>
    </td>
  </tr>
</table> 
```

**CSS**

```
#product-table tr:hover { background:#333; } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:21:38.070

一种方法是使选择器更具限制性：

```
#product-table > tbody > tr:hover { background:#333; } 
```

演示：http: [//jsfiddle.net/yrZ8R/2/](http://jsfiddle.net/yrZ8R/2/)

`>`表示仅应匹配直接子级。

也可以看看：

*   [CSS 选择器 3 级](http://www.w3.org/TR/selectors/#selectors)
*   [为什么我们`<tbody>`在选择器](https://stackoverflow.com/questions/7490364/why-do-browsers-still-inject-tbody-in-html5)中使用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-13T09:13:07.153

这个对我有用。

```
.table-hover tbody tr:hover td table tr td {
    background-color: revert;
} 
```

# google-chrome - 仅限 Chrome 的问题：使用 servlet 提供图像。一张图片加载，一张图片不加载

> ID：15829021
> 
> 赞同：2
> 
> 时间：2013-04-05T08:16:35.853
> 
> 标签：google-chrome, servlets, struts2

**编辑**：

我有一个包含以下 HTML 代码的页面：

```
<img src="/static/ads/1111.png"> <!-- 1 -->
<img src="/static/2222.png"> <!-- 2 --> 
```

当我加载页面时，无法显示第一张图片。显示第 2 个图像。

检查 Chrome DevTools 的网络选项卡中的图像请求，该请求始终处于“待处理”状态。

更奇怪的是，当我直接访问 1 号图像时`http://localhost:8080/static/ads/1111.png`，图像实际上会加载。

这个问题似乎只影响谷歌浏览器。我在 Firefox 中对其进行了测试，它在那里工作。

对于 Chrome，我收到控制台错误：

`Port error: Could not establish connection. Receiving end does not exist.`

当我比较 Image No. 1 的请求标头时

```
Cache-Control:no-cache
Pragma:no-cache
Referer:http://localhost:8181/index.html
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31 
```

与 2 号图像

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:no-cache
Connection:keep-alive
Host:localhost:8181
Pragma:no-cache
Referer:http://localhost:8181/index.html
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_3) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31 
```

有一个很大的不同。有谁知道发生了什么？

* * *

**更多信息**

我正在使用 BalusC 的[FileServlet](http://balusc.blogspot.sg/2009/02/fileservlet-supporting-resume-and.html)来提供在我的 web-app 目录之外找到的文件。

我的 Web 应用程序使用 Struts2 作为其框架。

我的 web.xml：

```
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>fileServlet</servlet-name>
    <servlet-class>com.FileServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>fileServlet</servlet-name>
    <url-pattern>/static/*</url-pattern>
</servlet-mapping> 
```

我在 struts.xml 中排除了这条路径，如下所示：

```
<constant name="struts.action.excludePattern" value="/static/.*"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T01:53:18.093

来自 JB 尼泽特：

您确定您没有使用某些会过滤掉来自 ** /ads/ ** 的图像的广告拦截插件吗？

# javascript - 如何将 XSL 变量传递给 Javascript 函数？

> ID：15829024
> 
> 赞同：1
> 
> 时间：2013-04-05T08:16:45.153
> 
> 标签：javascript, xslt

下面是我的示例 XSL 文件

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt">
    <xsl:template match="/">
        <html>
            <head>
                <script type="text/javascript">
                //<![CDATA[
                function showHide(elementid){
                    if (document.getElementById(elementid).style.display == 'none'){
                        document.getElementById(elementid).style.display = '';
                    } else {
                        document.getElementById(elementid).style.display = 'none';
                    }
                }
                //]]></script>
                <!-- Inserting pie chart  -->
                <script type="text/javascript" src="https://www.google.com/jsapi"></script>
                <script type="text/javascript">
                //<![CDATA[
                google.load("visualization", "1", {packages:["corechart"]});
                google.setOnLoadCallback(drawChart);
                function drawChart() {
                    var data = google.visualization.arrayToDataTable([
                        ['Task', 'Hours per Day'],
                        ['Work',     11],
                        ['Eat',      2],
                        ['Commute',  2],
                        ['Watch TV', 2],
                        ['Sleep',    7]
                    ]);

                    var options = {
                        title: 'My Daily Activities'
                    };

                    var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
                    chart.draw(data, options);
                }
            //]]></script>
            <!--Finishing pie chRt -->
            </head>
            <body>
                <h2>eBuilder Automation Test Suite-Summary</h2>
                <div id="chart_div" style="width: 600px; height: 400px;"></div>
                <table border="1">
                    <tr bgcolor="#808080">
                        <th>Name</th>
                        <th>Total TCS</th>
                        <th>Passed</th>
                        <th>Skipped</th>
                        <th>Errors</th>
                        <th>Failures</th>
                        <th>Pass Rate</th>
                        <th>Tot Time Taken</th>
                    </tr>
                    <xsl:for-each select="testsuite">
                        <xsl:variable name="PassCount">
                            <number>
                                <xsl:value-of select="(@tests - @skipped - @errors - @failures)"/>
                            </number>
                        </xsl:variable>
                        <tr>
                            <td>
                                <xsl:value-of select="@name"/>
                            </td>
                            <td>
                                <xsl:value-of select="@tests"/>
                            </td>

                            <td bgcolor="#32CD32">
                                <xsl:value-of select="(@tests - @skipped - @errors - @failures)"/>
                            </td>
                            <td bgcolor="#FFFF00">
                                <xsl:value-of select="@skipped"/>
                            </td>
                            <td>
                                <xsl:value-of select="@errors"/>
                            </td>
                            <td bgcolor="#FF0000">
                                <xsl:value-of select="@failures"/>
                            </td>
                            <td>
                                <font color="red">
                                    <xsl:value-of select="(msxsl:node-set($PassCount)/number) div @tests * 100"/>%
                                </font> 
                            </td>
                            <td bgcolor="#008000">
                                <xsl:value-of select="@time"/>
                            </td>
                            <!--xsl:value-of select="@failures div @tests *100"/-->
                        </tr>
                    </xsl:for-each>
                </table>
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

我想像下面这样传递 XSL 变量`PassCount`：

```
var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work',     passcount],
          ['Eat',      2],
          ['Commute',  2],
          ['Watch TV', 2],
          ['Sleep',    7]
        ]); 
```

有什么聪明的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:11:53.313

希望我能回答你的问题（我不太确定，但无论如何）

如果您不使用 CDATA，使用 xslt 生成 javascript 应该没有问题。您可以使用 xsl:value-of 将 xslt var 值放在您喜欢的任何位置。但是如果没有 CDATA，您必须在您的 javascript 代码中转义一些字符 (<,&)。

```
 'Work',     <xsl:value-of select="(msxsl:node-set($PassCount)/number)/> ], 
```

或者

```
var passcount = <xsl:value-of select="(msxsl:node-set($PassCount)/number)/>;
....
['Work',     passcount], 
```

# php - codeigniter添加模型的多个条件

> ID：15829027
> 
> 赞同：0
> 
> 时间：2013-04-05T08:17:01.210
> 
> 标签：php, codeigniter, web

这是我的代码

```
public function get_news($NewsId= FALSE)
{
    if ($NewsId === FALSE)
    {
    $query = $this->db->get('news');
    return $query->result_array();
    $config['per_page']; $this->uri->segment(3);
    }
    $query = $this->db->get_where('news',
                             array('NewsId' => $NewsId,
                                    'Language' => '2');
    return $query->row_array();
} 
```

***如果我删除语言*条件，这不起作用所以它** 在代码中工作我想再添加一个条件，比如当前是 NewId => $NewsId，我想在此代码中再添加一个 LanId = $LanId

提前问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:35:49.907

```
$this-db->where(field1,condition1);
$this-db->where(field2,condition2);
$this-db->where(field3,condition3);
$this->db->get(table); 
```

you can set as many as you wish

there's litereally no difference. but since you insist,

```
$this->db->get_where('table',
    array('field1'=>'condition1',
          'field2'=>'condition2',
          'field3'=>'condition3')
); 
```

# javascript - 在 DOM 元素出现时更改其属性

> ID：15829029
> 
> 赞同：0
> 
> 时间：2013-04-05T08:17:01.523
> 
> 标签：javascript, jquery

有没有办法在创建 DOM 元素时更改它的属性？我有一个由插件创建的输入（有一个 ID）。当它出现时，我需要更改该输入的占位符。

IE

```
$("#token-input_sample").live("attr","placeholder","place"); 
```

上面的代码不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:19:23.953

`on()`应该用于将事件绑定到现在或将来存在的元素。要操作元素的属性或属性，您应该使用以下[`prop()`](http://api.jquery.com/prop/)函数：

```
$('#token-input_sample').prop('placeholder', 'place'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:22:02.677

```
$("#token-input_sample").attr("placeholder", "Type an ID").blur();

$("#token-input_sample").attr("placeholder", "Type an ID"); 
```

此[链接](http://diveintohtml5.info/forms.html#placeholder)也可能对您有所帮助

# linq - Linq To Entity 将值与列表进行比较

> ID：15829031
> 
> 赞同：3
> 
> 时间：2013-04-05T08:17:07.043
> 
> 标签：linq, entity-framework, linq-to-entities, entity-framework-5

我正在使用**Entity Framework 5.0**，但 LINQ 查询有问题。我有以下方法，它接受一个整数值，然后将其传递给查询。这工作正常。

```
public IList<tblcoursebooking> GetStandardReport(int AttendanceID)
{
    return _UoW.tblcoursebookingRepo.All
           .Where(cb => cb.Attended.Equals(AttendanceID)
           .ToList();

} 
```

但是，我需要更改该方法，使其接受**整数列表**，然后提取出所有记录，其中**Attended**等于任何整数列表。像这样的东西

```
public IList<tblcoursebooking> GetStandardReport(List<int> AttendanceIDs)
{
    return _UoW.tblcoursebookingRepo.All
           .Where(cb => cb.Attended.Equals == any AttendanceIDs
           .ToList();
} 
```

我想尝试使用**Contains**或**Any** LINQ 关键字，但是，由于**Attended**是单个值，而不是集合，点后我唯一可用的属性是

**CompareTo、等于、GetHashCode、GetType、GetTypeCode、ToString**

有人可以帮忙吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T08:30:22.530

使用该`Contains`函数，它将根据给定列表匹配每个 ID：

```
return _UoW.tblcoursebookingRepo.All
       .Where(cb => AttendanceIDs.Contains(cb.Attended))
       .ToList(); 
```

一般来说，请记住，Where 子句只不过是一个带有嵌套 if 语句的花哨的 foreach（不过，这是一个非常花哨的语句）。它需要一个计算结果为布尔值的表达式。如果你只检查一项，而不使用 LinQ，你很快就会想出类似的东西：

```
if(AttendanceIDs.Contains(myItem.Attended)) 
```

您可以以完全相同的方式处理 LinQ 的 Where 子句，如上所示 :) 如果您被难住了，想想您将如何检查它一次，因为 LinQ 将为您完成迭代部分。

**更新**

正如费萨尔的回答中提到的，`WhereIn`提供了类似的功能。还没有使用它，但它似乎是一种更简洁的方法。

不过，我并没有改变我的答案，因为我觉得指出如何在`Where`子句中使用布尔评估更为重要，这也应该有助于您将来可能遇到的与 a`WhereIn`无关的所有类似问题。

但尽管如此，您也可以`WhereIn`在这种特殊情况下使用:-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T08:30:47.443

您需要使用 WhereIn。

```
public static void Main()
{
  using (MyObjectContext context = new MyObjectContext())
  {
    //Using method 1 - collection provided as collection
    var contacts1 =
      context.Contacts.WhereIn(c => c.Name, GetContactNames());

    //Using method 2 - collection provided statically
    var contacts2 = context.Contacts.WhereIn(c => c.Name,
      "Contact1",
      "Contact2",
      "Contact3",
      "Contact4"
      );
  }
} 
```

[使用 Linq to Entities 的“包含（）”解决方法？](https://stackoverflow.com/questions/374267/contains-workaround-using-linq-to-entities?rq=1)

# c++ - CIN 到 string 或 int 变量，然后到重载的构造函数

> ID：15829033
> 
> 赞同：0
> 
> 时间：2013-04-05T08:17:21.350
> 
> 标签：c++, string, int, auto, cin

这里是新手，所以放轻松:) 我已经用谷歌搜索了，似乎真的找不到一个优雅的解决方案。我正在做一些编码来学习一些概念。

我有一个名为“sally”的类，它有一个重载两次的构造函数，即我的 sally.cpp 是：

```
#include "sally.h"
#include <iostream>
#include <string>
using namespace std;

sally::sally()
{
}
sally::sally(int x)
{
    inputvarint = x;
    cout << "you have an int of value: " << inputvarint << endl;
}

sally::sally(string y)
{
    inputstring = y;
    cout << "you have a string that is: " << inputstring << endl;
} 
```

在我的 main.cpp 中，如果我创建对象`sally myobj;`然后通过对象调用函数，即`sally.myobj(55)`我得到正确的构造函数并告诉我我有一个 INT 值，或者如果我去`sally.myobj("johhny")`我让另一个构造函数去告诉我有一个字符串，上面写着“johnny”，所以那部分我很好。

我想知道的是，有没有一种优雅的方式可以使用 CIN 从用户那里获取输入，或者直接将其传递给对象 - 不使用变量（我已经尝试过但无法让它工作）。

基本上，我希望用户能够输入一个字符串或一个 int 并在 sally.myobj(); 中使用它。调用，并让构造函数来确定它是什么类型的数据。

之类的东西： `auto x = 0;`然后`cin >> x`不工作，因为最初的声明是一个 int，所以它保持这样。

有没有办法声明一个没有类型的变量并根据 CIN 的输入为其分配一个类型？

抱歉，如果这个问题的答案非常明显，但我正处于旅程的开始阶段（我正在学习这个人的第 40 篇教程：[http](http://www.youtube.com/watch?v=tvC1WCdV1XU) ://www.youtube.com/watch?v=tvC1WCdV1XU ）并阅读 Stanley Lippman 的 C++ Primer（第 5 版）和 Matt Weisfield 的 The Object-Oriented Thought Process。它们是我目前唯一的资源（那个和谷歌）。

提前致谢

塞布

编辑：

在看到下面的一些回复后，它帮助我弄清楚了什么可以/不能做什么，我已经使用一个利用一些正则表达式的解析函数来解决它，如果字符串内容被认为是 INT 然后转换它并将其放入一个新变量并关闭到构造函数中：

莎莉.cpp：

```
#include "sally.h"
#include <iostream>
#include <string>
#include <regex>
using namespace std;

sally::sally()
{
}
sally::sally(int x)
{
    inputvarint = x;
    cout << "Constructor output: you have an int of value: " << inputvarint << endl;
}

sally::sally(string y)
{
    inputstring = y;
    cout << "Constructor Output: you have a string that is: " << inputstring << endl;
}
void sally::StringParser(string x){

regex e("^[0-9]+$"); //test if the string starts with ends with and has a whole lot of numbers in between, i.e. and INT of any length

bool match = regex_match(x, e);

if(match){
    cout << "you have an int" << endl;
    int newvar = atoi(x.c_str());
    sally::sally(newvar);
}
else {sally::sally(x);}

} 
```

然后我简单地说`sally myobj;`x`myobj.StringParser(x);`是来自 CIN 的输入，Parsing 函数负责其余部分并将其传递给构造函数。

我确信我可以使用具有不同 REGEX 的 SWITCH 语句来处理浮点数等，然后创建额外的构造函数。但就目前而言，我*似乎*找到了解决方案。

热衷于看看我的方法是否有任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:32:31.957

I think c++ variables must always have a type. IN this case is better to save it as a string and then evaluate it. If its a number, convert to int and pass to the constructor: If its not a number pass the string to the constructor You can check if its a number using something like this:

```
bool is_number(const std::string& s)
{
  std::string::const_iterator it = s.begin();
  while (it != s.end() && std::isdigit(*it)) ++it;
    return !s.empty() && it == s.end();
} 
```

from [How to determine if a string is a number with C++?](https://stackoverflow.com/questions/4654636/how-to-determine-if-a-string-is-a-number-with-c)

For converting the string to an int, there a various ways, but you can try this one:

```
string str = "123";
int numb;
istringstream ( str ) >> numb; 
```

So the final idea would be something like:

```
get input as a string
if(input is a number)
{
  convert to number;
  call constructor;
}
else
  call constructor with the string 
```

Hope helped you out.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:20:40.373

不幸的是，真的没有办法做到这一点。

您*可以*做的是将输入读取为字符串，然后尝试使用 eg 将其转换为整数，[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)如果成功，则您有一个整数。

* * *

不引发异常的替代方法是使用[`std::strtol`](http://en.cppreference.com/w/cpp/string/byte/strtol)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:28:34.530

您遇到的问题不是特定于**C++**的问题。但是关于输入**编码**的一般问题。

如果不向您的输入添加一些附加信息，就**不可能**实现所需的操作。

当您阅读字符输入时，如果给定输入“ **2** ”，则无法区分以下两种使用场景：

*   你想打电话给**莎莉（2）**

*   你想打电话给**莎莉（“2”）**

您必须在输入中提供一些附加（类型）信息以区分这两种情况（例如“i:2”和“s:2”）并尝试解析指示的值。

# iphone - 大量更新的模型崩溃时的 deleteRowsAtIndexPaths

> ID：15829034
> 
> 赞同：0
> 
> 时间：2013-04-05T08:17:21.407
> 
> 标签：iphone, ios, objective-c, ipad, uitableview

视图控制器有一个数据模型，它不断地、积极地更新

UItableview (storyTable) 经常被调用来更新和反映迄今为止的变化。

（更改代码以仅反映单个 beginUpdates endUpdates） - 仍然崩溃

```
 [self.storyTable beginUpdates];
                if([deleteIndexPaths count]){
                    DLog(@"Table refresh delele rows :%@",deleteIndexPaths);

                    [self.storyTable deleteRowsAtIndexPaths:deleteIndexPaths withRowAnimation:UITableViewRowAnimationNone];

                }

                if ([addIndexPaths count]){
                    DLog(@"Table refresh add rows :%@",addIndexPaths);

                    [self.storyTable insertRowsAtIndexPaths:addIndexPaths withRowAnimation:UITableViewRowAnimationTop];

                }
                if ([changedIndexPaths count]){

                    DLog(@"Table refresh change rows :%@",changedIndexPaths);
                    [self.storyTable reloadRowsAtIndexPaths:changedIndexPaths withRowAnimation:UITableViewRowAnimationFade ];

                }
                [self.storyTable endUpdates];
                //[self.storyTable endUpdates];
                tableIsAnimating = NO;

        } 
```

不时崩溃并显示以下消息：（主要在 deleteRowsAtIndexPaths...）

> *** -[UITableView _endCellAnimationsWithContext:] 中的断言失败，/SourceCache/UIKit/UIKit-2380.17/UITableView.m:1070
> 
> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：第 0 节中的行数无效。更新后现有节中包含的行数 (20) 必须等于该节中包含的行数更新前的节 (20)，加上或减去从该节插入或删除的行数（0 插入，10 删除），加上或减去移入或移出该节的行数（0 移入，0 移动出去）。'

或者 ：

> ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“尝试将第 20 行插入第 0 节，但更新后第 0 节中只有 20 行”

**问题：如何添加一些保护代码来防止崩溃？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:22:43.190

我认为这里的问题是，当同时删除、添加和更改混合时，您的 indexPaths 在第一个-endUpdates 之后将全部错误。

你可以试试这个：

```
[self.storyTable beginUpdates];
if([deleteIndexPaths count]){
   [self.storyTable deleteRowsAtIndexPaths:deleteIndexPaths withRowAnimation:UITableViewRowAnimationNone];
}
if ([addIndexPaths count]){
   [self.storyTable insertRowsAtIndexPaths:addIndexPaths withRowAnimation:UITableViewRowAnimationTop];
}
if ([changedIndexPaths count]){
   [self.storyTable reloadRowsAtIndexPaths:changedIndexPaths withRowAnimation:UITableViewRowAnimationFade ];
}
[self.storyTable endUpdates]; 
```

这样 indexPaths 将在所有操作中都有效。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-03-06T07:37:55.180

我认为你的 tableview 改变不是因为你 deleterowsatindexpath 而是 reloaddata，换句话说，使用 deleterowateindexpath 不会做基本的删除工作。

# xslt - 某些子 XML 的 XSLT 文本

> ID：15829037
> 
> 赞同：0
> 
> 时间：2013-04-05T08:17:30.813
> 
> 标签：xslt

是否可以测试不具有某些内容和属性的某个 XML 属于另一个 XML 节点？

例如：

```
<a>
   <node/>
   <node>
      <node attr="attr1">
         <d>test</d>
      </node>
    </node>
   <node>
      <c attr="attr2">
         <d>test</d>
      </c>
   </node>
</a> 
```

在这里我只需要选择`<node>`子内容正好是的节点

```
<node>
   <c attr="attr1">
      <d>test</d>
   </c>
</node> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:49:28.777

```
node[c[@attr = 'attr1'][d = 'test']] 
```

*将选择至少*包含该内容的节点，如果您*只*想要该内容，则必须添加进一步的约束，例如

```
node[count(@*) = 0][count(node()) = 1]
  [c[count(@*) = 1][count(node()) = 1][@attr = 'attr1'][d[. = 'test'][not(*)]] 
```

（这假设您的样式表有`<xsl:strip-space elements="*"/>`，因此可以忽略纯空格文本节点）

# ios - 如何在 tableViewCell 中制作背景图片

> ID：15829039
> 
> 赞同：0
> 
> 时间：2013-04-05T08:17:35.767
> 
> 标签：ios, tableview, tableviewcell

我有我的表视图。但我对 tableViewCell 中的图像有一些问题。背景颜色仅显示在左右角，但在我的 tableView 的所有背景中以中间颜色显示。当我更改表格中的背景颜色时，tableViewCell 中间的颜色也发生了变化...

我在 tableViewCell 中添加图像的代码：何时推送...

```
cell.backgroundView = [[[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"noselected.png"]stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease]; 
```

并推动。按下显示好的。

```
cell.selectedBackgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"yesselected.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease]; 
```

另外：我尝试了 UIColour cleareColor 但没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T12:07:53.727

尝试这个...

如果您只想为每个单元格显示一个图像。

```
 cell.backgroundView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"name_of_the_image_AND_no_need_to write_extension"]]; 
```

如果要为不同的单元格显示不同的图像

**首先创建一个图像数组**来保存所有需要在单元格中显示的图像..

```
 imgArr = [[NSArray alloc]initWithObjects:[UIImage imageNamed:@"image1"],
                                          [UIImage imageNamed:@"image2"],
                                          [UIImage imageNamed:@"image3"],
                                          nil]; 
```

然后，在**cellForRowAtIndexPath**方法中

```
cell.backgroundView = [[UIImageView alloc]initWithImage:[imgArr objectAtIndex:indexPath.row]]; 
```

# ssl - TLS 握手“证书”消息中的多个证书

> ID：15829040
> 
> 赞同：0
> 
> 时间：2013-04-05T08:17:36.327
> 
> 标签：ssl, ssl-certificate, x509certificate

我的任务是从 HTTPS 消息中解析服务器名称。我被要求从“client hello”扩展以及“certicate”、“commonname”字段中解析它。

“证书”消息中有多个证书。例如，当使用 https 打开 google 并通过 wireshark 收听时，我看到 2 个证书第一个有 commonname "*.google.com" ，第二个有 commonname "Google internet authority" 。第一个是我连接的服务器名称，第二个是签署证书的机构。

我的问题是我能否确定服务器名称（在我的情况下为 google.com）将始终出现在第一个证书消息中。如果我只想获取服务器名，是否需要关心证书消息中的其他证书。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:07:06.227

事实上，rfc 2246、4346 和 5246（分别为 TLS 1.0、TLS 1.1 和 TLS 1.2）都声明服务器证书应该是第一个：

> “这是 X.509v3 证书的序列（链）。发件人的证书必须在列表中排在第一位。随后的每个证书都必须直接证明它前面的证书。”

在 SSL 3.0 中也很清楚：

> “ certificate_list：这是一个 X.509.v3
> 证书的序列（链），首先是发送者的证书，然后
> 是任何证书颁发机构的证书，依次
> 向上。”

但在现实世界中，有很多配置错误的服务器以任何顺序发送证书，所以你必须重新排序，抱歉。

# java - 带有源和附加依赖项的 Maven 包

> ID：15829047
> 
> 赞同：0
> 
> 时间：2013-04-05T08:18:03.193
> 
> 标签：java, maven

我很难使用 maven 将 java 源文件和附加的依赖项添加到输出 jar 文件中。

我想要归档的是在一个可以分发的 jar 中包含已编译的类、源文件和所有依赖项（没有源）。

```
- com/name/project/*.class
- com/name/project/*.java
- lib/*.jar
- META-INF/MANIFEST.MF 
```

这是我到目前为止所拥有的 pom.xml：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.7</version>
            <executions>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}/lib</outputDirectory>
                        <overWriteReleases>false</overWriteReleases>
                        <overWriteSnapshots>false</overWriteSnapshots>
                        <overWriteIfNewer>true</overWriteIfNewer>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <artifactId>maven-jar-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <classpathPrefix>lib/</classpathPrefix>
                        <mainClass>com.name.project/main</mainClass>
                    </manifest>
                </archive>
            </configuration>
        </plugin> 
```

我希望任何人都可以帮助我。

干杯丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:32:49.843

我决定不将依赖罐添加到我的输出罐中。相反，我使用以下 pom.xml 将我的源代码与已编译的依赖项一起包含到 jar 中。我不得不排除 * */* .java 文件，因为一些奇怪的依赖关系也包含了源代码。

```
<build>
    <sourceDirectory>src/</sourceDirectory>
    <resources>
        <resource>
            <directory>${project.build.sourceDirectory}</directory>
        </resource>
        <resource>
            <directory>${basedir}/src/main/resources</directory>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.7</version>
            <executions>
                <execution>
                    <id>unpack-dependencies</id>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>unpack-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${project.build.directory}/classes</outputDirectory>
                        <excludes>**\/*.java</excludes>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

谢谢您的帮助。

干杯丹

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:48:46.213

JAR 通常真的不应该包含其他 JAR，但是当然没有什么可以阻止您这样做。

您可以使用以下部分巧妙地包含源代码`resource`：

```
<build>
    </resources>
        <resource>
            <directory>src/main/java</directory>
        </resource>
    </resources>
    ... 
```

我冒昧地猜测您可能能够将您的`copy-dependencies`任务绑定到`resources`阶段，看看是否会在最终工件中包含依赖项 JAR。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:50:39.837

也许你应该看到[这个链接](https://stackoverflow.com/questions/2037188/how-to-configure-eclipse-build-path-to-use-maven-dependencies)。只需检查您是否正确配置了您的 maven+IDE 合作

# javascript - 从 .gpx 文件导入坐标并使用 Google Maps API 显示的最佳方式

> ID：15829048
> 
> 赞同：10
> 
> 时间：2013-04-05T08:18:07.873
> 
> 标签：javascript, jquery, html, google-maps, google-maps-api-3

我是一名山地车手，我`Samsung S3 Galaxy`使用诸如`Endomondo`和之类的程序跟踪我的骑行`Strava`。关于我的骑行的所有内容都保存在这两个网站上。

我有自己的个人网站，在那里我展示了我住的各个地区的山路。通过`GPS`使用 Endomondo 和 Strava 记录的路线数据我已导出到`.gpx`文件中。我需要 .gpx 文件中的这些数据显示在我自己的个人网站上。所以我开始寻找使用`Google Maps API`.gpx 文件而不使用外部工具的解决方案。

我努力寻找答案。我遇到了这个人`jQuery`用来提取 XML 文件中的数据并在他的谷歌地图上显示这些数据的帖子： [http ://www.jacquet80.eu/blog/post/2011/02/Display-GPX-tracks -使用-Google-Maps-API](http://www.jacquet80.eu/blog/post/2011/02/Display-GPX-tracks-using-Google-Maps-API)

这就是将它实现到我的 HTML 标记中的方式：

```
<script>
     function initialize() {
          var route1Latlng = new google.maps.LatLng(-33.7610590,18.9616790);
          var mapOptions = {
               center: route1Latlng,
               zoom: 11,
               mapTypeId: google.maps.MapTypeId.ROADMAP
          };
          var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

          $.ajax({
               type: "GET",
               url: "gpx/my_route.gpx",
               dataType: "xml",
               success: function (xml) {
                    var points = [];
                    var bounds = new google.maps.LatLngBounds();
                    $(xml).find("trkpt").each(function () {
                         var lat = $(this).attr("lat");
                         var lon = $(this).attr("lon");
                         var p = new google.maps.LatLng(lat, lon);
                         points.push(p);
                         bounds.extend(p);
                    });
                    var poly = new google.maps.Polyline({
                         // use your own style here
                         path: points,
                         strokeColor: "#FF00AA",
                         strokeOpacity: .7,
                         strokeWeight: 4
                    });
                    poly.setMap(map);
                    // fit bounds to track
                    map.fitBounds(bounds);
               }
          });
     }
     google.maps.event.addDomListener(window, 'load', initialize);
</script> 
```

有用。但这是正确的方法吗？有没有更好的方法来实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:18:39.597

如果您使用 PostgreSQL 数据库，我建议您使用[PostGIS](http://postgis.net/)并将您的记录导入数据库。然后，您可以轻松生成 kml 文件 ( [ST_asKml](http://postgis.org/docs/ST_AsKML.html) ) 并在 Google 地图上显示它们。如果您的 gpx 很大，您可以在数据库查询中使用[ST_Simplify](http://www.postgis.org/docs/ST_Simplify.html)以便更快地加载页面，并且您的数据库中仍然有完整的详细路线。

你也有很多可能性：

*   搜索指定区域的游乐设施
*   测量一个月的总距离
*   以及更多

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-29T02:27:01.180

**2020 年更新**

适用于谷歌地图的最新 API：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Add Map</title>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap&libraries=drawing&v=weekly"
      defer
    ></script>
    <style type="text/css">
      #map {
        height: 400px;
        width: 400px;
      }
    </style>
    <script>
        function initMap() {    
            const map = new google.maps.Map(document.getElementById("map"), {
                zoom: 3,
                center: { lat: 0, lng: -180 },
                mapTypeId: "satellite",
                disableDefaultUI: true,
            });

            fetch('2020-10-12_2007.gpx')
                .then(response => response.text())
                .then(str => (new window.DOMParser()).parseFromString(str, "text/xml"))
                //.then(data => console.log(data))
                .then(doc =>
                {
                    var points = [];
                    var bounds = new google.maps.LatLngBounds();

                    const nodes = [...doc.getElementsByTagName('trkpt')];
                    nodes.forEach(node =>
                    {
                        var lat = node.getAttribute("lat");
                        var lon = node.getAttribute("lon");
                        //console.log(lat);

                        var p = new google.maps.LatLng(lat, lon);
                        points.push(p);
                        bounds.extend(p);
                    })

                    var poly = new google.maps.Polyline({
                             path: points,
                             strokeColor: "#0000FF",
                             strokeOpacity: 1,
                             strokeWeight: 4
                        });
                        poly.setMap(map);
                        // fit bounds to track
                        map.fitBounds(bounds);
                })
        }
    </script>
  </head>
  <body>
    <h3>My Google Maps Demo</h3>
    <!--The div element for the map -->
    <div id="map"></div>
  </body>
</html> 
```

# c# - 为什么并发字典没有可见的 Add() 方法？

> ID：15829050
> 
> 赞同：8
> 
> 时间：2013-04-05T08:18:12.490
> 
> 标签：c#, multithreading, dictionary, concurrency

我只是想知道 ConcurrentDictionary 怎么可能没有在 Visual Studio IDE 中可见的 Add 方法。我似乎只得到了 TryX 方法，例如 TryAdd、TryUpdate 等。

我可以看到这些`ConcurrentDictionary`工具`IDictionary`，如果我将其转换为`IDictionary`我会返回 Add Method。

我通过 iLSpy 查看了该类，我可以看到 Add Method 已完全实现，并且实际上确实在后台调用了 Concurrent`TryAdd`方法。

我期待在 Add 方法上看到某种属性来抑制它，但我什么也没看到。

这是否已被 Microsoft 加入 IDE 以默认隐藏 Add 方法？

如果有人可以对此有所了解，将不胜感激

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T14:55:04.343

他们不鼓励使用该`Add`方法，因为如果该键已存在于字典中，该方法将引发异常。对于大多数字典，开发人员可以编写代码以保证在任何正常情况下都不会抛出异常。但是，要使用*并发*`Contains`字典执行此操作（后跟`Add`），您需要在访问字典的方法中使用排他锁，这违背了并发字典的全部目的。

 *`TryAdd`结合`Contains`和`Add`检查而不需要您锁定字典，并允许您再次编写在正常情况下不会引发异常的代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-05T08:21:02.967

那是因为**显式接口实现**。请参阅[http://msdn.microsoft.com/en-us/library/aa288461(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa288461(v=vs.71).aspx)*

# java - 在 var 初始化期间使用 this.var

> ID：15829053
> 
> 赞同：10
> 
> 时间：2013-04-05T08:18:22.417
> 
> 标签：java, initialization, undefined-behavior

在研究[另一个问题](https://stackoverflow.com/questions/15820302/recursive-initializer-works-when-i-add-this)时，我惊讶地发现以下 Java 代码编译时没有错误：

```
public class Clazz {
    int var = this.var + 1;
} 
```

在我的 JDK6 中，`var`初始化为`1`.

上述代码是否具有明确定义的语义，或者其行为未定义？如果你说它定义明确，请引用[JLS](http://docs.oracle.com/javase/specs/)的相关部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:12:56.977

[在 8.3.2.3节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2.3)的示例 8.3.2.3-1 中顺便提到了它。在示例的文本中

```
class Z {
    static int peek() { return j; }
    static int i = peek();
    static int j = 1;
}
class Test {
    public static void main(String[] args) {
        System.out.println(Z.i);
    }
} 
```

标题说：

> ***... i 的变量初始化器使用类方法 peek在 j 被其变量初始化器初始化之前**访问变量 j 的值，此时它仍然具有其默认值 (§4.12.5) 。*

这应该直接映射到您的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T08:54:15.273

[第 8.3.2.2 章。第 2 段](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2.2-110)：

> 允许实例变量的初始化表达式引用当前对象 this（第 15.8.3 节）并使用关键字 super（第 15.11.2 节，第 15.12 节）。

虽然下一段补充说：

> 有时限制使用在使用后以文本形式出现声明的实例变量，即使这些实例变量在范围内。有关管理对实例变量的前向引用的精确规则，请参见第 8.3.2.3 节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:30:11.053

[第16章介绍](http://docs.oracle.com/javase/specs/jls/se5.0/html/intro.html#237592)

> 第 16 章描述了语言确保在使用前明确设置局部变量的精确方法。虽然所有其他变量都会自动初始化为默认值，但 Java 编程语言不会自动初始化局部变量以避免掩盖编程错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T11:07:51.053

在按照[JSL](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2.3)的情况下，不允许使用**简单**名称。所以必须使用***这个***关键字来访问这些变量。`forward references`

 *```
class UseBeforeDeclaration {
    int h = j++;  // error - `j` read before declaration
    int l = this.j * 3;  // ok - not accessed via simple name
    int j;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T16:54:47.307

由于所有非局部变量都被分配了一个初始值（并且分配发生在其他任何事情之前），因此在任何时候读取它们都没有问题。

该规范在某些情况下选择性地禁止某些访问，理由是此类访问很可能是编程错误。但是如果允许这些访问，它们将具有明确定义的语义。

实际上，程序员可以轻松绕过限制并“间接”访问该字段；如果允许，该访问的语义与“直接”访问相同。

```
int var = this.var + 1;       // suppose javac forbids this

int var = this.getVar() + 1;  // but can javac forbid this? 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-05T09:20:17.873

这没有错。this 关键字引用当前对象，用于区分局部变量和实例变量。局部变量的值同样可以赋值给实例变量，反之亦然。这意味着我们可以将实例变量的值分配给局部变量。

请参阅[http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf](http://docs.oracle.com/javase/specs/jls/se7/jls7.pdf)中的第**4.12.3 章变量种类**（第 80 页）。这里也给出了例子。

```
 **Example 4.12.3-1\. Different Kinds of Variables**
      class Point { 
      static int numPoints; // numPoints is a class variable 
      int x, y; // x and y are instance variables 
      int[] w = new int[10]; // w[0] is an array component 
      int setX(int x) { // x is a method parameter 
        int oldx = this.x; // oldx is a local variable 
        this.x = x; 
        return oldx; 
      } 
    } 
```*

# javascript - 在 PDF 中播放声音

> ID：15829054
> 
> 赞同：1
> 
> 时间：2013-04-05T08:18:23.437
> 
> 标签：javascript, pdf, audio, adobe-reader

我正在使用[Scribus](http://www.scribus.net/canvas/Scribus)（Adobe inDesign 的开源替代品）来创建 PDF 电子书，我想在某些页面上添加一些 show wav 文件。可以添加 javascript 来使您的 PDF 具有交互性，但我根本无法添加声音。我尝试了数百个 javascript，但都没有工作。有人有向 PDF 或 Scribus 添加声音的经验吗？

我正在使用 Adob​​e 阅读器打开 PDF，并且启用了 javascripts。弹出警报等其他功能确实有效，但声音根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:07:47.863

PDF 不是交互式的，因为该标准旨在作为一种便携式打印格式。话虽如此，您可以很容易地附加文件（pdftk 对此很有用），但自“outlook.PDFworm”以来，PDF 中的自动运行脚本是一个非常重要的“不可以”。只需将文件添加到文档中并指示您的读者单击链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:36:03.370

就在这周，我用自己的工具完成了这项工作。正确的做法是创建一个 SoundAction 并根据您的喜好触发它。您不需要使用 javascript，只需使用您认为有意义的任何事件（PageView 等）并连接一个作为 SoundAction 的 Action。支持大多数基本 WAV 格式，但您可能需要进行一些转换。

# gwt - 自定义 ClickHandler 类

> ID：15829055
> 
> 赞同：2
> 
> 时间：2013-04-05T08:18:33.483
> 
> 标签：gwt, interface, onclick, behavior

有没有办法在 GWT 中使用 Clickhandler 接口来构建自定义子类？我需要 ClickHandlers，它应该对每一次点击做出反应。对于已实现的 ClickHandler 而言，实现此行为不是问题，但如果不必将此代码片段添加到每个 ListBox 元素，那就太好了：

```
 boolean ingoreClick;
 lastSelection =  -1 ;
 listBox.addClickHandler(new ClickHandler() {

    @Override
    public void onClick(ClickEvent event) {

        if (!ignoreClick) {
            lastSelection = listBox.getSelectedIndex();
        }
        ignoreClick = !ignoreClick;     
    }
}); 
```

现在想象一下有listbox1、listbox2等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:34:59.617

是的，因为`Clickhandler`is 和 interface 您可以在自定义类中实现任何行为并在任何地方使用它。

```
 public class MyClickHancler implements ClickHandler {
    boolean first = false;
    String name;

    public MyClickHancler(String name) {
      this.name = name;
    }

    public void onClick(ClickEvent event) {
      if (first = !first) {
        System.out.println("First click on " + name);
      } else {
        System.out.println("Second click on " + name);
      }
    }
  }

  [...]

  widget1.addClickHandler(new MyClickHancler("widget-1"));
  widget2.addClickHandler(new MyClickHancler("widget-2")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:41:45.043

嗯，很简单，Manolo的回答基本解决了，你只需要稍微改进一下即可：

```
public abstract class EvenClickHandler implements ClickHandler {
    private boolean eventClick= true;

    public void onClick(ClickEvent event) {
        if (eventClick = !eventClick) {
          onEvenClick(event);
        }
    }

    protected abstract void onEvenClick(ClickEvent e);

}

...

listBox.addClickHandler(new EvenClickHandler (){

   protected void onEvenClick(ClickEvent e){
      lastSelection = listBox.getSelectedIndex();
   }

}); 
```

# c++ - C++：BOOST-ASIO async_read_some 不返回数据包字节数？

> ID：15829061
> 
> 赞同：0
> 
> 时间：2013-04-05T08:19:03.617
> 
> 标签：c++, size, byte, boost-asio, packet

我尝试使用以下代码读取套接字（在服务器端）中的可用字节数，并且该变量`packet_bytes`不执行任何操作。我期望读取数据包使用的字节数，`packet_bytes`但这似乎不起作用。

```
std::size_t packet_bytes = 0;

socket_.async_read_some(boost::asio::buffer(data_, max_length),
            boost::bind(&session::handle_read, this,
            boost::asio::placeholders::error,
            packet_bytes)); 
```

我也试过`std::size_t packet_bytes = socket_.available();`了，也没有返回任何东西。这是[整个代码](http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:23:46.933

调用中的`packet_bytes`参数`bind`也应该是一个占位符：

```
socket_.async_read_some(boost::asio::buffer(data_, max_length),
    boost::bind(&session::handle_read, this,
                boost::asio::placeholders::error,
                boost::asio::placeholders::bytes_transferred)); 
```

然后在您的处理程序函数中，该参数将是读取的字节数。

参见例如[手册](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/ReadHandler.html)中的示例。

# javascript - JavaScript 的正确函数约定

> ID：15829066
> 
> 赞同：0
> 
> 时间：2013-04-05T08:19:29.390
> 
> 标签：javascript

我一直在上 Codecademy JavaScript 课程，他们告诉我们使用这样的函数：

```
var functionName = function(parameters) {}; 
```

我以前做过一些 JavaScript，而且我总是这样做：

```
function myFunction(parameters){} 
```

正确的方法是什么？有什么区别吗？我什么时候应该使用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:25:00.717

这取决于，通常对于正常功能，您将希望使用第二种方式：

```
function myFunction(parameters) {
} 
```

如果需要，您可以使用第一种方式将函数分配给变量，也可以通过混合和匹配。

```
// Assign an anonymous function to functionName
var functionName = function (parameters) {
}

// Assign a pointer to myFunction to functionName
var functionName = myFunction 
```

不过，它们做的事情略有不同，想象一个`for`包含这些的循环，第一个循环每次迭代都会创建一个新函数，而第二个只会引用一个已经存在的函数。

```
for (var i = 0; i < 10; i++)
    // Creates 10 functions
    var functionName = function (parameters) {
    }

    // Uses an existing function
    var functionName = myFunction
} 
```

不过，这实际上取决于您在做什么，例如，您可以使用这样的内联函数，这非常好。

```
window.onload = function () {
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:47:41.487

不同之处在于您何时这样做：

```
functionName();
var functionName = function(parameters) {};
//you get error

functionName1();
function functionName1(parameters) {};
//you get no error 
```

原因是javascript预解析代码。我建议使用第二种创建对象的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:36:34.850

我知道的一些差异。

```
function myFunction(parameters){} 
```

上面的函数始终是可调用的，无论是在它位于代码中的位置之前还是之后。

```
var functionName = function(parameters) {}; 
```

这只有在代码运行后才可调用（即对象已被定义）。

所以你可以做这样的事情；

```
if(condition) {
    var functionName = function(parameters) {};
}

if(functionName != undefined) { functionName(); } 
```

您也可以将它们用作回调；

```
function anotherMethod(parameters, callbackFunction){
    // Do things with parameters
    callbackFunction(parameters);
}

var functionName = function(parameters) {};
anotherMethod(parameters, functionName); 
```

此外，可能最重要的事情通常是后一种格式允许命名空间，而不是在全局空间中收集所有函数，这可能最终在使用多个大型库的大型项目中出现重复的函数名称。

```
var uniqueName1 = {
    firstFunction: function(){},
    secondFunction: function(){},
};

var uniqueName2 = {
    firstFunction: function(){},
    secondFunction: function(){},
};

uniqueName1.firstFunction();
uniqueName2.firstFunction(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:59:25.533

两种方式都是正确的。性能可能会因[检查](http://jsperf.com/testing-2)性能而异。

# java - java注解中的枚举使用较少

> ID：15829067
> 
> 赞同：1
> 
> 时间：2013-04-05T08:19:32.593
> 
> 标签：java, enums, annotations

我想在 java 项目中使用自定义注释。目前我有这个：

```
@Parallel(synchronicity=Sync.SYNC, concurrency=Conc.MUTEX) 
```

Sync 和 Conc 都是枚举。

这有点太冗长了。并不是说同步性是一个长词，而是我必须指定枚举名称。我宁愿用以下方式之一来写它：

```
@Parallel(synchronicity=SYNC, concurrency=MUTEX)

@Parallel(Sync.SYNC, Conc.MUTEX) 
```

但两者似乎都不可能。有没有人知道如何使注释中枚举的使用不那么冗长？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T08:21:29.703

添加

```
import static com.foo.bar.Sync.*;
import static com.foo.bar.Conc.*; 
```

到你的进口，能够使用

```
@Parallel(synchronicity=SYNC, concurrency=MUTEX) 
```

# blackberry - 使用 oAuth 和 TWITTER API ME 1.8 库的黑莓 Twitter 应用程序

> ID：15829069
> 
> 赞同：2
> 
> 时间：2013-04-05T08:19:34.510
> 
> 标签：blackberry, twitter-oauth, network-connection

我正在为 BB 构建一个 Twitter 应用程序，它连接到 Twitter 并代表用户发帖。使用 TWITTER API ME 1.8 库和 oAuth 身份验证方法。这是代码：

```
 class ShowAuthBrowser extends MainScreen implements OAuthDialogListener {
    BrowserField b = new BrowserField();

    public ShowAuthBrowser() {

        _authManager = new VerticalFieldManager(NO_VERTICAL_SCROLL
                | NO_VERTICAL_SCROLLBAR);
        _pinManager = new HorizontalFieldManager(NO_VERTICAL_SCROLL
                | NO_VERTICAL_SCROLLBAR);
        authButton = new ButtonField("OK");
        authPin = new TextField(Field.EDITABLE);
        _labelStatus = new LabelField("Your app is being authorized...");
        _authManager.add(_labelStatus);
        _authManager.add(b);

        _pinManager.add(authButton);
        _pinManager.add(authPin);

        pageWrapper = new BrowserFieldOAuthDialogWrapper(b, CONSUMER_KEY,
                CONSUMER_SECRET, CALLBACK_URL, this);

        pageWrapper.setOAuthListener(this);

        add(_pinManager);
        add(_authManager);

        authButton.setChangeListener( new FieldChangeListener( ) {
            public void fieldChanged( Field field, int context ) {
                if( field == authButton ) {
                       doAuth(authPin.getText());
                }
            }
        } );
    }

    public void doAuth(String pin) {
        try {
            if (pin == null) {
                pageWrapper.login();
            } else {
                this.deleteAll();
                add(b);
                pageWrapper.login(pin);
            }

        } catch (Exception e) {
            final String message = "Error loggin Twitter: "
                    + e.getMessage();
            Dialog.alert(message);

        }
    }

    public void onAccessDenied(String response) {

        System.out.println("Access denied! -> " + response);
        updateScreenLog("Acceso denegado! -> " + response);

    }

    public void onAuthorize(final Token token) {

        System.out.println("In authorize: "+token);
        final Token myToken = token;
        _tokenValue = StoreToken.fetch();
        _tokenValue.token = myToken.getToken();
        _tokenValue.secret = myToken.getSecret();
        _tokenValue.userId = myToken.getUserId();
        _tokenValue.username = myToken.getUsername();
        _tokenValue.save();

        UiApplication.getUiApplication().invokeLater(new Runnable() {

            public void run() {
                deleteAll();
                Credential c = new Credential(CONSUMER_KEY,
                        CONSUMER_SECRET, myToken);
                TweetToFriend tw = new TweetToFriend();
                String message = "Test Tweet...";
                boolean done = false;
                done = tw.doTweet(message, c);
                if (done == true) {
                    Dialog.alert("Tweet succusfully...");
                    close();
                }
            }
        });

    }

    public void onFail(String arg0, String arg1) {
        updateScreenLog("Error authenticating user! -> " + arg0 + ", "
                + arg1);
    }
}

private void updateScreenLog(final String message) {
    UiApplication.getUiApplication().invokeLater(new Runnable() {

        public void run() {
            _labelStatus.setText(message);
        }
    });
} 
```

这里`onAuthorize()`永远不会被调用，而是`onFail()`每次都被调用并且`oAuth_io_exception`抛出一个 , General socket 错误。

谁能帮帮我。

谢谢。

# c# - 使用 LINQ 聚合对象

> ID：15829071
> 
> 赞同：2
> 
> 时间：2013-04-05T08:19:38.247
> 
> 标签：c#, entity-framework-4, linq-to-entities

我有 SQL 查询来获取块数，按块名称分组

```
var sql = @"select count(*) [COUNT], o.NAME from WISH w
                            left join objects o on o.ID = w.[BLOCKID]
                            where w.ISDELETE = 0
                            group by o.NAME"
var cmd = new SqlCommand(sql, connection);
var reader = cmd.ExecuteReader();
Label labelClear = (Label)Master.FindControl("labelClear");

if (reader.HasRows)
{
   while (reader.Read())
   {
      labelClear.Text += reader["NAME"].ToString() + " - " + reader["COUNT"].ToString() + "; ";
   }
 } 
```

这使得输出字符串如下：

```
"BLOCKNAME1 - 15; BLOCKNAME2 - 3; BLOCKNAME3 - 28" etc. 
```

（其中 15、3 和 28 - BLOCKNAME1、BLOCKNAME2 和 BLOCKNAME3 的计数）。

我尝试将此查询转换为 LINQ：

```
((Label)Master.FindControl("labelClear")).Text = 
Db.WISH.Where(x => x.ISDELETE == 0)
.GroupBy(x => x.OBJECTS_BLOCK.NAME)
.Select(g => new { Name = g.Key, Cnt =  SqlFunctions.StringConvert((decimal?)g.Count()) })
.Aggregate((a, b) => a.Name + ": " + a.Cnt + ", " + b.Name + ": " + b.Cnt ); 
```

但是在最后一行出现错误（使用聚合）：

```
Cannot implicitly convert type 'string' to 'AnonymousType#2' 
```

将结果聚合成字符串的正确方法是什么

```
"BLOCKNAME1 - 15; BLOCKNAME2 - 3; BLOCKNAME3 - 28" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:04:25.323

试试那个：

```
((Label)Master.FindControl("labelClear")).Text = 
Db.WISH.Where(x => x.ISDELETE == 0)
.GroupBy(x => x.OBJECTS_BLOCK.NAME)
.Select(g => new { Name = g.Key, Cnt =  SqlFunctions.StringConvert((decimal?)g.Count()) })
.AsEnumerable()
.Aggregate(string.Empty, (a, b) => a + ", " + b.Name + ": " + b.Cnt, s => s.Substring(2)); 
```

参数说明`Aggregate`：

*   `string.Empty`- 初始种子值
*   `(a, b) => a + ", " + b.Name + ":" + b.Cnt`- 聚合函数。它将当前种子值与新值字符串连接起来。
*   `s => s.Substring(2)`- 结果选择功能。删除前 2 个字符，这是不必要的`,`

`AsEnumerable`将字符串连接从数据库移动到应用程序是必要的。EF 不支持`Aggregate`带有该参数的方法。`Count()`仍由 DB 执行。

# perl - 从数组数组中检索数组？

> ID：15829075
> 
> 赞同：0
> 
> 时间：2013-04-05T08:19:52.247
> 
> 标签：perl, multidimensional-array, reference

```
use strict;
my @a;
my @b = ();
@a = (3, 4);

push @b, [@a];

my @c = @b[0];
print @c; 
```

如何正确检索@c？它告诉我标量值@b[0] 最好写成 $b[0]。

（出于隐私原因，这不是我的真实代码，但在真实代码中我有这样的内容：

```
my @a = @{$b[$i]};
print @a; 
```

这表示“使用未初始化的值”，但仍会打印应有的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:39:53.913

如果您存储了一个数组引用`$b[0]`-这是您的情况-那么您将其检索为

```
$ref = $b[0]    # I just want it as a reference 
```

或者

```
@arr = @{$b[0]} # I want it as a (new) array 
```

或者

```
$elt = $b[0][1] # I want to directly access the second element
$elt = $b[0]->[1] # alternative syntax, same thing. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:32:26.220

有关数组访问语法的详细信息，请参阅 perldata

`@c[0]`是单元素数组 slice(!) `$c[0]`是正确的

`$c[0]->[0]`是“3”和`$c[0]->[1]`“4”

有关数组数组的更多详细信息，请参阅 perldsc 和 perllol

# media-queries - @media 查询被 iphone 忽略

> ID：15829078
> 
> 赞同：3
> 
> 时间：2013-04-05T08:20:02.377
> 
> 标签：media-queries, html-email

出于某种原因，当我发送电子邮件时，我的媒体查询不适用。我将它从 Outlook 2007 发送到 gmail 并使用 iphone 4s 查看它。我尝试使用更简单的@media 查询规则（即只更改字体颜色的媒体查询）发送测试电子邮件，但这些也不起作用。此外，我尝试从教程发送演示 html 电子邮件（例如： http: [//www.netmagazine.com/tutorials/build-responsive-emails](http://www.netmagazine.com/tutorials/build-responsive-emails)），但媒体查询也被忽略了

我在下面附上了我的代码的开头：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org    /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Sample</title>
<style type="text/css">
    @media only screen and (max-width: 480px) { 
        table[class="contenttable"] { 
            width:400px !important;
            text-align: left !important;
        }

        table[class="contenttable2"] { 
            width: 382px !important;
            text-align: left !important;
        }

        td[class="changer"] { 
            width:382px !important;
            height: 10px !important;
        }

        td[class="autoalign"] {
            padding: 0 !important;
            text-align: center !important;
        }

        img[class="logo"]  {
            margin-left: -10px !important;
        }

        td[class="autotext"] {
            font-size: 14px !important;
            text-align:left !important;
            height: 70px !important;
        }

        td[class="textresize"] {
            font-size: 8px !important;
        }

        img[class="imgHide"] {
            display:none !important;
            height:0 !important;
            width:0 !important;     
        }
    }
</style>
</head>
<body style="padding:0; margin:0; webkit-text-size-adjust:none;-ms-text-size-adjust: 100%;"> 
<table width="600" border="0" cellpadding="0" cellspacing="0" class="contenttable" align="center" style="font-family: Arial;"> 
```

我完全不知道问题是什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T08:25:39.730

不幸的是，gmail 不支持媒体查询（参见[http://www.emailonacid.com/blog/details/C13/media_queries_in_html_emails](http://www.emailonacid.com/blog/details/C13/media_queries_in_html_emails)），尽管很多都支持。你最好的选择是首先设计没有媒体查询，并使用一些常规的 CSS 来让列堆叠等，接受这样一个事实，即你的设计在任何地方看起来都不完美，但仍然可以访问。然后你可以添加一些媒体查询魔法，让它在每个支持它的客户端上看起来都很棒。有关这种方法的一个很好的示例，请参见[http://www.zurb.com/article/1119/create-emails-for-any-device-introducing- ，以及](http://www.zurb.com/article/1119/create-emails-for-any-device-introducing-)[http://www.zurb.com/playground/responsive -email-templates](http://www.zurb.com/playground/responsive-email-templates)一些基本模板，让您启动和运行。

# asp.net - 如何将数据集与gridview绑定

> ID：15829079
> 
> 赞同：3
> 
> 时间：2013-04-05T08:20:09.660
> 
> 标签：asp.net, gridview, datatable

这是我的代码 .aspx.cs 页面

```
public string makequery()
{
    string query = string.Empty;
    if (ddlPortal2.SelectedValue == "Select" && tbFrom.Text == null && tbTo.Text == null && ddlQuery.SelectedValue == "Select")
    {
        query = "SELECT * FROM Form3 and ORDER BY CONVERT(VARCHAR(25), [Datetime], 101) between '" + tbFrom.Text + "' and '" + tbTo.Text + "' DESC";
        return query;
    }
    else if(ddlPortal2.SelectedItem.Text!="Select" && tbFrom.Text!=null && tbTo.Text!=null && ddlQuery.SelectedItem.Text=="Select")
    {
        query = "Select * from Form3 where Portal='" + ddlPortal2.SelectedValue + "' and ORDER BY CONVERT(VARCHAR(25), [Datetime], 101) between '" + tbFrom.Text + "' and '" + tbTo.Text + "' DESC";
        return query;
    }
    else if (ddlPortal2.SelectedItem.Text != "Select" && tbFrom.Text == null && tbTo.Text == null && ddlQuery.SelectedItem.Text != "Select")
    {
        query = "Select * from Form3 where Portal='" + ddlPortal2.SelectedValue + "' and ORDER BY CONVERT(VARCHAR(25), [Datetime], 101) between '" + tbFrom.Text + "' and '" + tbTo.Text + "' DESC";
        return query;
    }
    return null;
}
public void GridViewBind()
{
    string query = makequery();
    DataSet ds = new DataSet();
    if (ds != null)
    {
        if (ds.Tables[0].Rows.Count != 0)
        {
            GridView1.DataSource = ds;
            GridView1.DataBind();
        }
        else
        {
            GridView1.DataSource = null;
            GridView1.DataBind();
        }
    }
}
protected void btnSearch_Click(object sender, EventArgs e)
{
    this.GridViewBind();
} 
```

.aspx 页面代码：

```
<div id="Portal" runat="server">
<asp:Label ID="lblPortal" runat="server" Text="Select Portal"/>
    <asp:DropDownList ID="ddlPortal2" runat="server" AutoPostBack="True">
        <asp:ListItem>Select</asp:ListItem>
        <asp:ListItem>TRAVELONG</asp:ListItem>
        <asp:ListItem>ONETRAVEL</asp:ListItem>
        <asp:ListItem>.UK-BSP</asp:ListItem>
        <asp:ListItem>.CV-YYZ</asp:ListItem>
        <asp:ListItem>.CV-YVR</asp:ListItem>
    </asp:DropDownList>
   <asp:Label ID="lbFrom" Text="From" runat="server" />
<asp:TextBox ID="tbFrom" runat="server" />
 <asp:RequiredFieldValidator ID="rfvFrom" runat="server" ControlToValidate="tbFrom" ErrorMessage="Enter Valid Date">*</asp:RequiredFieldValidator>
       <asp:Label ID="lblto" Text="To" runat="server" />
<asp:TextBox ID="tbTo" runat="server" />
        <asp:RequiredFieldValidator ID="rfvTo" runat="server" ControlToValidate="tbTo" 
        ErrorMessage="Enter To date">*</asp:RequiredFieldValidator>
         <asp:DropDownList ID="ddlQuery" runat="server" Width="87px">
           <asp:ListItem>All</asp:ListItem>
           <asp:ListItem Value="Query ">Query</asp:ListItem>
           <asp:ListItem>Non Query</asp:ListItem>
    </asp:DropDownList>
<asp:Button ID="btnSearch" runat="server" Text="Search" 
    onclick="btnSearch_Click" ValidationGroup="1"/><br />

        <br />           
    <asp:ValidationSummary ID="ValidationSummary1" runat="server" />
    </div>
<div id="Main" runat="server">
<asp:GridView ID="GridView1" runat="server" CellPadding="4" ForeColor="#333333" 
        GridLines="None" onrowcommand="GridView1_RowCommand" 
        AutoGenerateColumns="False">
        <Columns>
       <asp:TemplateField HeaderText="Select">
            <itemtemplate>
            <asp:LinkButton CommandName="cmdBind"  runat="server" Text='<%#Eval("ID")%>' ID="ID" ToolTip='<%#Eval("ID")%>'>LinkButton                </asp:LinkButton>                                                                   
            </itemtemplate>
            </asp:TemplateField>
            <asp:TemplateField HeaderText="Date">
            <ItemTemplate>
                    <asp:Label ID="lblDateTime" runat="server" Text='<%# Eval("DateTime","{0:d}") %>'></asp:Label>
                    </ItemTemplate>
                    </asp:TemplateField>   
            <asp:BoundField DataField="Portal" HeaderText="Portal" SortExpression="Portal" ItemStyle-HorizontalAlign="Center"/>
            <asp:BoundField DataField="TID" HeaderText="TID" SortExpression="TID" ItemStyle-HorizontalAlign="Center"/>
            <asp:BoundField DataField="PNR" HeaderText="PNR" SortExpression="PNR" ItemStyle-HorizontalAlign="Center"/>
            <asp:BoundField DataField="TicketNumber" HeaderText="TicketNumber" SortExpression="TicketNumber" ItemStyle-HorizontalAlign="Center"/>
          <asp:TemplateField HeaderText="Unused Tkt Amount" SortExpression="ddlUnusedAmount" ItemStyle-HorizontalAlign="Center">
        <ItemTemplate>
            <asp:Label ID="lblUnusedAmount" runat="server" Text='<%#Eval("UnusedTicketAmount")+ "-" + Eval("ddlUnusedAmount")%>' ></asp:Label>
        </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Penality" SortExpression="ddlAirlinePenality" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:Label ID="lblAirlinePenality" runat="server" Text='<%#Eval("AirlinePenality")+ "-" + Eval("ddlAirlinePenality")%>' ></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Net Refund" SortExpression="ddlNetRefundProcess" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:Label ID="lblNetRefund" runat="server" Text='<%#Eval("NetRefundProcess")+ "-" + Eval("ddlNetRefundProcess")%>' ></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Refundable Commission"   SortExpression="ddlRefundableCommission" ItemStyle-HorizontalAlign="Center">
            <ItemTemplate>
                <asp:Label ID="lblRefundableCommission" runat="server" Text='<%#Eval("RefundableCommission")+ "-" + Eval("ddlRefundableCommission")%>' ></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
            <asp:BoundField DataField="ESACCode" HeaderText="ESACCode" SortExpression="ESACCode" ItemStyle-HorizontalAlign="Center"/>
            <asp:BoundField DataField="WaiverCode" HeaderText="WaiverCode" SortExpression="WaiverCode" ItemStyle-HorizontalAlign="Center"/>
            <asp:BoundField DataField="RefundType" HeaderText="RefundType" SortExpression="RefundType" ItemStyle-HorizontalAlign="Center" />
             <asp:BoundField DataField="Comment" HeaderText="Bart Comment" ItemStyle-HorizontalAlign="Center"/> 
        <asp:BoundField DataField="Query" HeaderText="ARC Verified" ItemStyle-HorizontalAlign="Center" />
    </Columns> 
```

现在，我在这里创建了两个函数，一个是进行查询，第二个是在我绑定时`dataset`绑定该查询找不到表 0。 `gridview``dataset`

我想要的是当我选择字段并按下搜索按钮时，我可以根据所选字段在我的网格中查看详细信息，但我无法将它与我的`dataset`. 你们能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:07:11.447

只需对您的代码进行一些小的更改，如下所示

```
public string makequery()
{
    string query = string.Empty;
    if (ddlPortal2.SelectedValue == "Select" && tbFrom.Text == null && tbTo.Text == null && ddlQuery.SelectedValue == "Select")
    {
        query = "SELECT * FROM Form3 and ORDER BY CONVERT(VARCHAR(25), [Datetime], 101) between '" + tbFrom.Text + "' and '" + tbTo.Text + "' DESC";
        return query;
    }
    else if(ddlPortal2.SelectedItem.Text!="Select" && tbFrom.Text!=null && tbTo.Text!=null && ddlQuery.SelectedItem.Text=="Select")
    {
        query = "Select * from Form3 where Portal='" + ddlPortal2.SelectedValue + "' and ORDER BY CONVERT(VARCHAR(25), [Datetime], 101) between '" + tbFrom.Text + "' and '" + tbTo.Text + "' DESC";
        return query;
    }
    else if (ddlPortal2.SelectedItem.Text != "Select" && tbFrom.Text == null && tbTo.Text == null && ddlQuery.SelectedItem.Text != "Select")
    {
        query = "Select * from Form3 where Portal='" + ddlPortal2.SelectedValue + "' and ORDER BY CONVERT(VARCHAR(25), [Datetime], 101) between '" + tbFrom.Text + "' and '" + tbTo.Text + "' DESC";
        return query;
    }
    return null;
}
public void GridViewBind()
{
    string query = makequery();
    sqlconnection con=new sqlconnection("Your Connection string"); 

    DataSet ds = new DataSet();

   SqlDataAdapter ad= new SqlDataAdapter(query,con);

   ad.fill(ds);

    if (ds != null)
    {
        if (ds.Tables[0].Rows.Count != 0)
        {
            GridView1.DataSource = ds;
            GridView1.DataBind();
        }
        else
        {
            GridView1.DataSource = null;
            GridView1.DataBind();
        }
    }
}
protected void btnSearch_Click(object sender, EventArgs e)
{
    this.GridViewBind();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:25:53.543

你需要一些像这样的额外代码

```
private DataSet GetDataset(string query) 
{
    DataSet dataset = new DataSet();
    using (SqlConnection connection = 
        new SqlConnection(connectionDetailsGoHere))
    {
        connection.Open();
        SqlDataAdapter adapter = new SqlDataAdapter();
        adapter.SelectCommand = new SqlCommand(query, connection);
        adapter.Fill(dataset);
        connection.Close();
    }
        return dataset;
}

public void GridViewBind()
{
    string query = makequery();
    DataSet ds = GetDataset(query); // Updated
    if (ds != null)
    {
        if (ds.Tables[0].Rows.Count != 0)
        {
            GridView1.DataSource = ds;
            GridView1.DataBind();
        }
        else
        {
            GridView1.DataSource = null;
            GridView1.DataBind();
        }
    }
} 
```

您的查询看起来也不准确，可能不会执行。对于 1，你不能`AND`直接在之前`ORDER BY`

您的查询实际上很混乱，您尝试按条件排序，这实际上是不正确的。您想改用该`WHERE`子句。

```
query = "SELECT * FROM Form3 WHERE CONVERT(VARCHAR(25), [Datetime], 101) between '" + tbFrom.Text + "' and '" + tbTo.Text + "' ORDER BY [Datetime] DESC"; 
```

我认为[这个站点将帮助您使用 SQL](http://www.w3schools.com/sql/default.asp)和[这个站点使用 DataSet](http://msdn.microsoft.com/en-us/library/system.data.dataset.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:32:29.233

这是一个简单的方法：

```
private DataTable LoadData()
{
    DataTable dt = new DataTable();
    SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["yourConnectionStringName"].ToString());
    SqlCommand command = new SqlCommand();

    command.CommandType = CommandType.StoredProcedure;
    command.CommandText = "yourProcName";

    command.Connection = connection;
    connection.Open();
    SqlDataAdapter da = new SqlDataAdapter(command);
    da.Fill(dt);
    connection.Close();

    return dt;
}

private void BindGrid()
{
    GridView1.DataSource = this.LoadData();
    GridView1.DataBind();
}

protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        this.BindGrid();
    }
} 
```

修改上面的代码以满足您的需要。我习惯`stored procedure`加载数据，你也可以使用`inline`查询。`inline`如果要使用查询，只需修改这两行。

```
command.CommandType = CommandType.Text;
command.CommandText = "SELECT * FROM yourTable"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:06:29.443

您的所有查询都使用“AND order by yourColumns”。我不认为'AND'是必要的。它以这种方式工作（注意没有AND）

```
select ColumnA, ColumnB from yourTable where ColumnA='abc' order by ColumnB 
```

此外，您没有执行查询，因此没有结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-31T10:02:51.603

我发现了问题所在。网格视图的背景颜色与字母颜色相同，因此它不可见......**对不起，因为那个简单的事情打扰了你......**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-14T07:30:09.123

这也有效，真的很简单

```
dataGridView1.DataSource = dataset.Tables[0]; 
```

无需为桌面应用程序设置任何其他参数。这也将填充列名。

# ios6 - 存折 Web 服务参考中的 If-Modified-Since 和 lastUpdated 有什么区别

> ID：15829081
> 
> 赞同：0
> 
> 时间：2013-04-05T08:20:19.363
> 
> 标签：ios6, http-headers, http-status-codes, passbook

我正在做一个服务器来更新存折中的通行证。我可以从服务器注册和注销它。接下来，我必须在更新通行证时获取通行证序列和最新版本的通行证。If-Modified-Since 和 lastUpdated 有什么区别？我不知道如何获得它们？它们来自我的数据库还是其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:43:14.873

`If-Modified-Since`是随 .pkpass 包一起发送的 HTTP 标头。如果您最初没有通过 Web 服务器分发通行证，您的 Passbook Web 服务应发送它以响应“[获取最新版本的通行证](https://developer.apple.com/library/ios/#documentation/PassKit/Reference/PassKit_WebService/WebService.html#//apple_ref/doc/uid/TP40011988)”请求。

`lastUpdated`是您存储在数据库中的标签，用于指示 .pkpass 包上次更改的时间。

这两者都应该匹配相同的时间点。约定是将`If-Modified-Since`标头作为[RFC 1123](http://www.csgnetwork.com/timerfc1123calc.html)格式化日期发送，并将`lastUpdated`标签存储为时间戳，尽管将其存储为格式化日期是完全可以接受的。

# grails - Grails：\${} 和 ${} 之间的区别

> ID：15829083
> 
> 赞同：2
> 
> 时间：2013-04-05T08:20:28.180
> 
> 标签：grails, grails-2.0, gsp

有人可以告诉我：

```
<g:if test="${foo.bar}"> 
```

和

```
<g:if test="\${foo.bar}"> 
```

在“$”之前使用“\”的一个真实例子是：

```
<g:if test="\${flash.message}"> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:29:10.690

`\${...}`会将文字美元大括号放入输出中，而不是将内容作为表达式进行评估。我很少需要在普通的 GSP 中使用它，但它在脚手架模板中非常常见，其中模板引擎`${}`对其自己的生成时表达式使用与生成的 GSP 在运行时使用的相同的语法 - 所以你需要`\${}`在脚手架模板中生成GSP 中的表达式，然后在呈现页面时在运行时进行真实评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T00:43:56.990

这个[http://grails.1312388.n4.nabble.com/How-do-you-avoid-interpolation-of-an-html-attribute-in-GSP-to-print-a-literal-with-td1353164.html](http://grails.1312388.n4.nabble.com/How-do-you-avoid-interpolation-of-an-html-attribute-in-GSP-to-print-a-literal-with-td1353164.html)帮助我避免插入美元符号。\$ 对我不起作用。

# python - Django文件上传

> ID：15829087
> 
> 赞同：3
> 
> 时间：2013-04-05T08:20:43.343
> 
> 标签：python, django, file, mime-types

我需要能够在服务器上上传文件，但在上传之前，我想验证这个文件是图像还是名为 image.jpeg 的脚本。为此，我正在使用一个名为`python-magic`

```
import magic

attachment = request.FILES['file'].read()
m = magic.open(magic.MAGIC_MIME_TYPE)
m.load()
ft = m.buffer(attachment)
m.close() 
```

它对我来说工作正常。但是我应该阅读整个文件吗？

```
 attachment = request.FILES['file'].read() 
```

我认为这是一个坏主意，所以我的问题是文件头的重量是多少？所以我只能读取几个字节并验证文件的 mime 类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:13:44.577

[您可以首先按照此处的建议使用](https://stackoverflow.com/a/43588/237690)[mimetype](http://docs.python.org/lib/module-mimetypes.html)模块猜测 mimetype 。如果您对猜测没问题，请将文件上传到您的网络服务器。如果您之后将访问该文件，您可以使用您提供的源进行整个检查，因为无论如何您都必须阅读该文件。

# java - 调用公共方法导致 NullPointerException - Android

> ID：15829094
> 
> 赞同：0
> 
> 时间：2013-04-05T08:21:06.903
> 
> 标签：java, android

啊，大家好，我只是想问一下我正在创建的程序中有什么问题。这是片段代码

**PlayActivity.class**

```
//more codes here
 public void stFLabel(int numFace, Context ct) {

    try {
        if(numFace > 0)
            faceLebel.setText("Face Hint : I See You Human");
        else
            faceLebel.setText("Face Hint : Where Are You?");
    }
    catch(NullPointerException e)
    {
        e.printStackTrace();
            Log.d(TAG, "stFLabel Has Error");
        }
    }
//more codes here 
```

* ***CameraPreview.class* ***

```
//More codes
...
PlayActivity pacT = new PlayActivity();
...
//More Codes
..
public void pausy(int numFace) {
pacT.stFLabel(numFace, mContext);
} 
```

**LOGCAT**

```
04-05 16:11:26.150: D/FaceDetection(27929): face detected: 1 Face 1 Location X: 65Y: -1
04-05 16:11:26.150: W/System.err(27929): java.lang.NullPointerException
04-05 16:11:26.150: W/System.err(27929):    at com.delihente.faceplay.PlayActivity.stFLabel(PlayActivity.java:90)
04-05 16:11:26.150: W/System.err(27929):    at com.delihente.faceplay.CameraPreview.pausy(CameraPreview.java:62)
04-05 16:11:26.150: W/System.err(27929):    at com.delihente.faceplay.CameraPreview$1.onFaceDetection(CameraPreview.java:53)
04-05 16:11:26.150: W/System.err(27929):    at android.hardware.Camera$EventHandler.handleMessage(Camera.java)
04-05 16:11:26.150: W/System.err(27929):    at android.os.Handler.dispatchMessage(Handler.java)
04-05 16:11:26.150: W/System.err(27929):    at android.os.Looper.loop(Looper.java)
04-05 16:11:26.150: W/System.err(27929):    at android.app.ActivityThread.main(ActivityThread.java)
04-05 16:11:26.150: W/System.err(27929):    at java.lang.reflect.Method.invokeNative(Native Method)
04-05 16:11:26.150: W/System.err(27929):    at java.lang.reflect.Method.invoke(Method.java:511)
04-05 16:11:26.150: W/System.err(27929):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java)
04-05 16:11:26.150: W/System.err(27929):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java)
04-05 16:11:26.150: W/System.err(27929):    at dalvik.system.NativeStart.main(Native Method)
04-05 16:11:26.150: D/(27929): stFLabel Has Error 
```

**更多信息 ：**

```
PlayAcvitiy.class extends Activity (Main Class)
CameraPreview.class - The camera preview class provided by google android development
faceLebel = TextView on PlayAcvitiy.class
mContext = PlayActivity.class Context 
```

我想知道是什么导致了 NullPointerException（修复会更好），我已经阅读了近 3 页关于我的问题的谷歌搜索，但没有一个对我有帮助。另外，请不要提及将方法更改为静态，因为这不可能是因为它会在 CameraPreview.class 检测/取消检测人脸时更改 TextView 标签。提前致谢！

编辑：我也在这里阅读了很多相关问题，但似乎都没有帮助

编辑 2：**问题已解决**，感谢所有人，特别是 PrafulBhatnagar，我了解到在 Main Activity 中使用方法需要引用其上下文。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:25:56.437

唯一的原因`NullPointerException`是，

`faceLebel`是**Null**内部`stFLabel()`方法。

只要确保您`faceLebel`使用与当前活动布局 xml 相同的 id。

另外，请确保您已声明`setContentView(<R.layout.xml_File_Name>)`；在`oncreate()`活动之后`super.onCreate().`

**更新：**

我怀疑`stFLabel()`在**CameraPreview.class**中调用您的方法。因为你不能像这样制作 Activity 的构造函数，`PlayActivity pacT = new PlayActivity();`

您必须使用 Activity 的上下文来调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:30:55.900

在调用 set label 之前检查是否`faceLeble`像下面这样启动

```
faceLebel = (TextView)findViewById(R.id.txtViewId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:40:41.633

在 android 中，你永远不应该自己创建 Activity 对象。

当您从应用程序托盘启动应用程序时，系统会为您的启动器创建对象`Activity`并启动它。`startActivity()`如果我们想从一个屏幕转到另一个屏幕，我们会使用，这里系统再次创建对象`Activity`。

所以通常系统会创建 Activity 的对象并调用它的生命周期方法`onCreate(), onStart()`等。我们使用这些生命周期回调来初始化/取消初始化`Activity`..

您的代码中的问题是您正在尝试自己创建`Activity`对象；所以现在有两个实例，一个由系统创建，其中所有状态都已初始化，另一个由您的代码创建，其中类上的状态尚未初始化，因为没有调用生命周期方法，因此`NullPointerException`.

您可以使用以下代码来修复此错误：

`((PlayActivity)mContext).stFLabel(numFace, mContext);`...假设`mContext`存储对`PlayActivity`

希望能帮助到你..

# php - 如何正确使用array_diff_key？

> ID：15829106
> 
> 赞同：-4
> 
> 时间：2013-04-05T08:21:39.773
> 
> 标签：php, arrays

我有数组

```
array (
  500 => 
  array (
    1 => 1,
    6 => 2,
    2 => 1,
  ),
  550 => 
  array (
    3 => 1,
    6 => 2,
    4 => 1,
    5 => 1,
  ),
) 
```

我怎样才能得到下一个结果？

```
array(
    1 => 1,
    2 => 1,
    3 => 1,
    4 => 1,
    5 => 1,
) 
```

我正在尝试使用`array_diff_key`/ `array_intersect_key`，但无法达到目标。有什么建议么？

更新。

我不需要迭代。仅直接`array_*`函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:53:38.277

您可能正在寻找联合和关键交集的关键区别：

```
$array = array_diff_key(
    ($a = $array['500']) + ($b = $array['550']), 
    array_intersect_key($a, $b)
); 
```

对于您的输入数组，这给出了所需的输出（[Demo](http://eval.in/14932)）：

```
Array
(
    [1] => 1
    [2] => 1
    [3] => 1
    [4] => 1
    [5] => 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:27:58.157

```
<?php
$array1 = array('blue'  => 1, 'red'  => 2, 'green'  => 3, 'purple' => 4);
$array2 = array('green' => 5, 'blue' => 6, 'yellow' => 7, 'cyan'   => 8);

var_dump(array_diff_key($array1, $array2));
?> 
```

上面的示例将输出：

```
array(2) {
  ["red"]=>
  int(2)
  ["purple"]=>
  int(4)
} 
```

参考 [http://php.net/manual/en/function.array-diff-key.php](http://php.net/manual/en/function.array-diff-key.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:28:43.157

恐怕你在问不可能的事。您的最终数组包含两个相同值的键（巧合的是，每个键都具有相同的值）。数组必须具有不同值的键，否则它们将简单地相互覆盖。

```
// impossible:
$ar = array(
  1 => 1,
  // ...
  1 => 1 // this value would overwrite the first
); 
```

说了这么多，很难理解第一个数组和第二个数组是什么关系，所以无法给出更好的答案。

编辑：斯康的答案是正确的（[https://stackoverflow.com/a/15829227/932508](https://stackoverflow.com/a/15829227/932508)）。

您可以使用此行获得最终数组：

```
$finalArray = $forwardDiff + $backwardDiff; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:29:01.007

这应该工作

```
$foo = array (
  500 => 
  array (
    1 => 1,
    6 => 2,
    2 => 1,
  ),
  550 => 
  array (
    3 => 1,
    6 => 2,
    4 => 1,
    5 => 1,
  ),
);

$bar = array();
$forwardDiff = array_diff_key($foo[500], $foo[550]);
$backwardDiff = array_diff_key($foo[550], $foo[500])
foreach (array_merge($forwardDiff, $backwardDiff) as $key) {
  $bar = isset($foo[500][$key]) ? $foo[500][$key] : $foo[550][$key];
} 
```

编辑：修复错误的合并功能..

# java - SmartGwt with hibernate 用于数据库连接

> ID：15829113
> 
> 赞同：2
> 
> 时间：2013-04-05T08:21:55.077
> 
> 标签：java, mysql, hibernate, smartgwt

我正在使用**eclipse indigo**。我想将**休眠与 smartgwt** [智能 gwt 展示一起使用](http://www.smartclient.com/smartgwtee/showcase/#hibernateAutoDerivation)

我有一个网格，所以想要使用像 smartgwt 展示 EE 这样的休眠数据源（ds）从数据库中获取数据。我不明白如何使用 hibernate(ds) 连接到数据库并从表中获取数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-24T07:11:13.737

这是一个古老的问题，但由于这里没有回答，

问题是表在客户端，因此您首先必须将数据移动到服务器端并在那里执行休眠操作。为此，我建议使用 gwt-rpc 自定义数据源。你可以在这里的代码。

[https://code.google.com/p/smartgwt-extensions/](https://code.google.com/p/smartgwt-extensions/)

一旦你完成了这项工作，你就可以在服务器端进行常规的休眠操作。

# jsf - JSF 页面中的 EL 评估不是顺序的

> ID：15829114
> 
> 赞同：0
> 
> 时间：2013-04-05T08:21:59.347
> 
> 标签：jsf, jsf-2, facelets, el

我有一个带有 ui:composition 标记的 XHTML，我正在 AJAX 上加载它。我正在使用 jQuery Ajax GET 来加载此 XHTML 的 URL。在加载的页面中，我有一个 EL 表达式，之后我还包括另一个具有更多 EL 表达式的源。总是，包含源的 EL 表达式比出现在它之前的表达式更早地被评估。

一些.xhtml

```
<ui:composition ...
    #{relationshipAction.followMember(param['relateToProfile'])}
    <ui:include src="someOther.xhtml">
        <ui:param name="profileUri" value="#{param['relateToProfile']}" />
        <ui:param name="qualifier" value="#{param['qualifier']}" />
        <ui:param name="cellStyleClass" value="#{param['cellStyle']}" />
    </ui:include> 
```

在这里，我希望`#{relationshipAction.followMember(param['relateToProfile'])}`在包含的 someOther.xhtml 中的任何 EL 之前进行评估。但总是首先评估 someOther.xhtml 中的 EL。

知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:05:24.853

[You should stop doing business logic in getter methods](https://stackoverflow.com/questions/2090033/why-jsf-calls-getters-multiple-times/2090062#2090062).

Use bean's (post)constructor or (action)listener method for that instead. Bean properties must return already-prepared values. I've yesterday answered a question wherein the OP made the same conceptual mistake. You may find it helpful as well: [Bean methods execution precedence in JSF](https://stackoverflow.com/questions/15816224/bean-methods-execution-precedence-in-jsf/15816310#15816310).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:55:34.030

The spec doesn't say that EL expressions are evaluated in textual order. A component is at liberty to evaluate an EL-expression in whatever phase of the JSF lifecycle it chooses. It is also at liberty to evaluate it only under specific circumstances, or even evaluate it several times.

You should not assume any particular order except for those rare cases where the spec actually defines it. In your case, JSF 2.2's viewAction component, or a preRenderView event might be a better fit. BalusC [explains](http://balusc.blogspot.ch/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters) their use quite readably, I think.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:58:20.843

您需要知道的一件非常重要的事情是

```
<ui:include> is evaluated during view build time, not during view render time 
```

因此，在您的包含, 的视图被渲染**之前**`<ui:include>`进行了评估。**`#{relationshipAction.followMember(param['relateToProfile'])}`**

# android - 如果我从 Play 开发者控制台中删除了一个 APK，在我点击发布之前它是否仍可供下载？

> ID：15829116
> 
> 赞同：6
> 
> 时间：2013-04-05T08:22:11.627
> 
> 标签：android, apk, google-play

在新的 Play 商店开发者控制台上将更新的 APK 上传到我的游戏时，我会收到红色喇叭和坏消息，因为它与之前上传的版本冲突。我想我必须按下前一个 APK 旁边的存档按钮，但这很可怕。

有人可以确认在我点击“发布”按钮之前最终用户实际上不会看到任何更改吗？我的应用在几分钟内都不会下架？

编辑：最初提到删除，当我指的是存档

更新：我昨天硬着头皮点击了存档。尚未在新 APK 上点击发布。我的 Play 商店页面现在声称该游戏昨天已更新。抱紧我，我害怕。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-07T17:31:51.960

它在您发布时首先有效。只是在玩我自己的 apk 来测试它。如果您进行了错误的配置，例如归档最新的 apk 版本，它将禁用发布按钮，因此您无法发布。

它只会在您存档时创建草稿。该草案首先在发布时有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:26:38.733

您无法删除已发布的文件，因此如果您看到“删除”按钮，则仅适用于已上传的**未发布**APK。您可以安全地清除它，因为它只是本地更改

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-07T17:53:29.847

当您想在 Play 商店中更新应用程序时，您必须： 1\. 增加 androidmanifest.xml 中的版本代码 2\. 将 apk 上传到 playstore 3\. 发布 apk

注意：“已发布”的 Apk 可供用户下载。

# xcode - 在 xcode iOS 中为样板代码提供值的快捷键

> ID：15829117
> 
> 赞同：0
> 
> 时间：2013-04-05T08:22:20.213
> 
> 标签：xcode

![在此处输入图像描述](https://i.stack.imgur.com/BLVi0.png)

这里我们需要点击每一个来给值，有没有可用的键盘快捷键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:25:06.810

您可以使用“Tab”键迭代它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:47:56.517

您可以通过`control`+`/`方向从左到右来完成。

也按`tab`从左到右的方向。

如果你想后退`control`+ `shift`+`/`方向从右到左。

也通过`shift`+ `tab`。方向从右到左。

# java - Facebook SDK 3.0 将图片上传到 Facebook 页面（不在相册中）

> ID：15829119
> 
> 赞同：2
> 
> 时间：2013-04-05T08:22:25.087
> 
> 标签：java, android, facebook, facebook-graph-api

大家好，我是 android 开发的菜鸟，我正在尝试实现一项功能，该功能将允许用户在 Facebook 页面上发布消息，并可选择从设备 SD 卡上传图片/图像。

我正在使用 Facebook sdk 3.0

我设法让它工作，但不是在 Facebook 页面墙上，而是通过用户个人资料时间线。

提前致谢。

****编辑****

```
case REQUEST_PICK_IMAGE:
            if (resultCode == RESULT_OK) {
                imageUri = intent.getData();

                AsyncFacebookRunner mAsyncFbRunner1 = new AsyncFacebookRunner(mFacebook);
                Log.d(TAG, imageUri.toString() + " " + imageUri.getPath());
                Bundle params = new Bundle();
                try {
                    in = new FileInputStream(getRealPathFromURI(imageUri));
                    buf = new BufferedInputStream(in);
                    byte[] bMapArray= new byte[buf.available()];
                    buf.read(bMapArray);
                    params.putByteArray("picture", bMapArray);
                } catch (IOException e) {
                    e.printStackTrace();
                }
                params.putString("method", "photos.upload");
                params.putString("caption", "sample post via gallery");
                mAsyncFbRunner1.request("PAGE_ID" + "/feed", params, "POST", new PhotoUploadListener(), null);
            }
            break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T05:41:19.043

以下代码对我有用。我正在使用最新的 Facebook SDK 3.0

```
showLoader(getResources().getString(R.string.sharing_on_facebook_wall));

Request.Callback callback= new Request.Callback() 
{
    public void onCompleted(com.facebook.Response response) 
    {
        hideLoader();

        FacebookRequestError error = response.getError();
        if (error != null) 
            Toast.makeText(getApplicationContext(), error.getErrorMessage(), Toast.LENGTH_SHORT).show();
        else 
            Toast.makeText(getApplicationContext(), "Posted successfully.", Toast.LENGTH_LONG).show();
    }
};

Session session = Session.getActiveSession();
Bundle postParams = new Bundle();

postParams.putString("name", "Title");
postParams.putString("link", "http://www.stackoverflow.com");
postParams.putString("description", "description");
postParams.putString("caption", "PictureTestApp");
postParams.putString("picture", imageUrl);

Request request = new Request(session, "me/feed", postParams, HttpMethod.POST, callback);

RequestAsyncTask task = new RequestAsyncTask(request);
task.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T18:15:38.597

> “我想做的是在 Facebook 页面上发布一条消息，其中包含手机内存或 SD 卡中的图片/图像。”

目前没有办法做到这一点。您可以从 SDCARD（而不是通过 URL）上传照片的唯一位置是特定相册。

# linux - 如何编写多行 shell 脚本

> ID：15829128
> 
> 赞同：1
> 
> 时间：2013-04-05T08:23:13.993
> 
> 标签：linux, shell, unix, shell-exec

我有一台远程机器，我想在其中替换文件的内容。

我正在使用以下命令

```
ssh abc@host
abc
sed -i s/enable=false/enable=true/g /config/pqr.properties 
```

其中 abc 是用户名和密码。

如何将其放入 shell 脚本中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:27:04.890

坏方法：

编写`expect`脚本以将密码提供给 ssh。

正确的方式：

为 ssh 生成密钥并通过 ssh 密钥进行授权。您的命令将如下所示：

```
ssh abc@host 'sed -i s/enable=false/enable=true/g /config/pqr.properties' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:17:28.880

按照此处所述设置授权密钥[http://wiki.qnap.com/wiki/How_To_Set_Up_Authorized_Keys](http://wiki.qnap.com/wiki/How_To_Set_Up_Authorized_Keys)

`ssh user@host command`随后应该在脚本中工作。

# css - 如何在此 CSS 文件中将文本的颜色更改为白色而不是黑色

> ID：15829129
> 
> 赞同：0
> 
> 时间：2013-04-05T08:23:14.897
> 
> 标签：css, forms, webforms

我有这个 css 文件。如何将文本更改为白色而不是黑色？

```
#contactform {
    margin:50px auto;
    padding:20px;
    -moz-border-radius:15px;
    -webkit-border-radius:15px;
    border-radius:15px;
}
#contactform .captch span{
    font-size: 16px;
    font-weight: bold;
    font-style: italic;
}

#contactform .form {
    text-align:left; 
    font-size:18px; 
    font-weight:normal; 
    font-family:"Times New Roman", Times, serif; 
    color:#666;
}

#contactform input.text,textarea.text, select.text {
    padding:5px; 
    margin-bottom:10px; 
    background: url(images/input-bg.gif) top left no-repeat; 
}

#contactform #result {
    color:#FF0000;
    font-style: italic;
    margin-bottom: 5px
}
#contactform .message {
    padding: 5px 3px;
}

#contactform img.loading-img {
    padding: 5px 3px;
}

#contactform textarea.text {
    height:100px;
}

#contactform input#submit {
    padding: 5px 10px;
    background: #f2f2f2;
    border:1px solid #e5e5e5;
    font-family: Georgia, "Times New Roman", Times, serif;
    font-style: italic;
    font-size: 18px;
    color: #000;
    -moz-border-radius:15px;
    -webkit-border-radius:15px;
    border-radius:15px;
}
#contactform table , #contactform tr td , #contactform tr{
    border: none !important;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:34:07.883

```
color: #ffffff 
```

for color white

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:26:18.040

欢迎来到stackoverflow

我可能会建议您，如果有其他问题，您可以将其他用户作为您自己的示例。您的帖子非常混乱且格式错误。

白色文本的 CSS 属性是`color: #ffffff ;`

以下链接是关于 css 的一个很好的信息来源[https://developer.mozilla.org/de/docs/CSS](https://developer.mozilla.org/de/docs/CSS)

编辑：

现在看起来好多了：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:27:16.083

使用所有 F：

```
color:#FFFFFF; 
```

或者，速记：

```
color:#fff; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:27:42.030

当您想让整个页面上的文本颜色为白色时，请添加：

`color: #fff;`到您的 html，正文如下：

```
html,body{
color: #fff;
} 
```

当你想要它只有一个 div 时，只需添加：

```
color: #fff; 
```

在 css 中给它

# c# - 在winrt中打印多个文档

> ID：15829133
> 
> 赞同：-1
> 
> 时间：2013-04-05T08:23:30.860
> 
> 标签：c#, printing, windows-runtime, components, windows-store-apps

我写了一个小应用程序来从客户那里获得销售。现在我不想为 ech 客户打印账单。

我不明白如何在 winrt 应用程序中通过代码设置分页符。谁能给我一个例子？还是目前不支持？

或者是否有任何免费的报告或某事的组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:08:17.700

请看看这些帖子

[如何打印文本框的内容](https://stackoverflow.com/questions/15563886/how-to-print-the-contents-of-a-textbox)

[从 MSDN 打印样本](http://code.msdn.microsoft.com/windowsapps/Print-Sample-c544cce6)

[从 MVVM XAML Windows 8 Store 应用程序打印 - 最后的前沿](http://blogs.u2u.be/diederik/post/2013/01/20/Printing-from-MVVM-XAML-Windows-8-Store-apps.aspx)

然后，如果您遇到任何问题，请随时问我。

# c# - 根据计算对键/对进行排序

> ID：15829143
> 
> 赞同：3
> 
> 时间：2013-04-05T08:23:53.800
> 
> 标签：c#, sorting, dictionary

我有`KeyValuePair`一个`value`包含我班级之一的通用列表。

因此，对于每个值，我计算一列，并根据该值以表格格式显示它。

但这里我的问题是：对于每个值列表，它包含一行，`0`作为我通过计算得到的列值。

所以我希望这个价值处于首位。但现在它可以在任何地方。

那么如何根据该计算对其进行排序。

这是我的代码：

```
 @foreach (KeyValuePair<String, List<MyClass>> keyValuePair in aClient.ESelectionDictionary)
{
    foreach (MyClass eData in keyValuePair.Value)
    {
        string weight;
        ............
        //Here comes some calculations
        ............
        if (weight == 0d)
        {
            addclass = "class=hidden";
        }
        else
        {
            addclass = "class=main";
        }
    }
} 
```

所以这里对于 , 中的所有值`eData`，`weight`总是`0d`除了一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:33:34.153

添加中间集合，您将在其中按所需顺序获取项目并实现两个循环，第一个将按您要查找的顺序填充集合，第二个循环将呈现表格：

```
var list = new List<MyClass>(keyValuePair.Value.Count);

foreach (MyClass eData in keyValuePair.Value)
{
    string weight;
    ............
    //Here comes some calculations
    ............
    if (weight == 0d)
    {
        list.Insert(0, eData);
    }
    else
    {
        list.Add(eData);
    }
}

foreach (var eData in list)
    // render eData into table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:23:59.530

根据您的自定义函数排序的列表创建一个新字典，以计算列索引：

```
var reshuffled = aClient.ESelectionDictionary.ToDictionary(
   kvp => kvp.Key,
   kvp => kvp.Value.OrderBy(CalculateColumnIndex)
); 
```

# mysql - 为什么无法提取我的 SQL 表的一列（文本列）？

> ID：15829144
> 
> 赞同：1
> 
> 时间：2013-04-05T08:23:55.050
> 
> 标签：mysql, syntax-error

当我尝试在 MySQL 中提取表的一列（包含文本）时，出现语法错误：

> 意外的 key_sym，而其他列的情况并非如此。

任何人都知道问题是什么？

我正在尝试这个简单的代码：

```
SELECT key, name 
FROM data1.info 
```

如果我用任何其他列名替换列“key”，它会起作用，但不适用于这个。

键列包含与键类似的内容：

```
8997897986575625757576557576523686812638612836263816283618263861826361836 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:45:26.337

`key`是保留字，因此当您使用保留字时，您必须在列名周围使用反引号（`）

```
SELECT `key`,name FROM data1.info 
```

[保留字列表](https://dev.mysql.com/doc/refman/4.1/en/reserved-words.html)

# javascript - 对于 Javascript 游戏引擎，重用全局变量比制作本地变量效率更高还是更低？

> ID：15829147
> 
> 赞同：3
> 
> 时间：2013-04-05T08:24:09.153
> 
> 标签：javascript, performance, memory, garbage

很多 Javascript 性能指南倾向于强调两点：

*   保持在范围内；通过每个范围逐步查找变量是昂贵的。
*   不要通过不断创建不必要的变量来滥用垃圾收集器。

对于以 60fps 或类似高速运行的程序，性能是否存在差异？[JSPerf](http://jsperf.com/global-verses-local)在我的系统上似乎介于两者之间，所以我想了解更多关于如何优化这类东西的信息。考虑以下两个代码示例：

```
var t0;

function doSomethingGlobal() {
    t0 = getWhatever();
    t0.func1();
    t0.func2();
} 
```

诗句

```
function doSomethingLocal() {
    var t0 = getWhatever();
    t0.func1();
    t0.func2();
} 
```

[http://jsperf.com/global-verses-local](http://jsperf.com/global-verses-local)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:05:47.480

我认为这取决于您访问全局变量的频率，以及全局变量在执行上下文中的嵌套程度。例如，从一个“更高”的执行上下文访问一个变量会比从一个更高的十级访问变量更快（取决于 JS 引擎，我想结果和引擎优化会有所不同）。

我对[您的测试进行了一些修改，以对全局变量进行 50 次访问，结果非常重要，](http://jsperf.com/global-verses-local/2)**在此特定测试**中本地访问速度快了约 5 倍（对于我在 Firefox 19.0 和 Chrome 26 中的简短测试）。

与所有与性能相关的问题一样，经验法则只能让您到目前为止。**您**必须对代码进行基准测试并进行对**您****的**代码有意义的优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:30:18.037

请注意，您的第二个陈述并不完全正确。你说：

> 不要通过不断创建不必要的变量来滥用垃圾收集器。

你要：

> 不要通过不断分配不必要的对象来滥用垃圾收集器。

问题不是存储变量的位置（这是您在区分本地和全局时所说的），因为局部变量将在堆栈上分配，这既便宜又容易。它跟踪存储在这些位置的对象，无论您在何处存储引用，其成本都基本相同。

众所周知，全局变量的查找速度通常较慢，因此这是避免使用它们的原因之一。它们也更难使用，并导致代码更难维护，在我看来，这是避免使用它们的最大原因。从垃圾收集器的角度来看，没有理由选择其中之一。

最后，除非您有特定的理由相信变量访问会显着降低您的页面速度，否则您为什么还要担心它们的性能呢？先写可维护的代码！

# ocr - Tesseract 的 hOCR 输出是否真的包含每个字符的边界框和置信度？

> ID：15829148
> 
> 赞同：7
> 
> 时间：2013-04-05T08:24:10.087
> 
> 标签：ocr, tesseract, hocr

在[Tesseract 常见问题解答](https://code.google.com/p/tesseract-ocr/wiki/FAQ#How_can_I_get_the_coordinates_and_confidence_of_each_character?)中，他们说您可以：

> 如何获得**每个角色**的坐标和置信度？
> 
> 有两种选择。如果您不想进入编程领域，可以使用 Tesseract 的 hocr 输出格式（详细信息请阅读 Tesseract 手册页）。

但是当我创建一个示例 hOCR 输出（它是一个 .html 文件）时，边界框和置信度仅**在 word 级别**可用。

我在这里错过了什么吗？

我添加了示例输入/输出作为插图（输入已调整大小）。

* * *

## 这是输入图像：

![在此处输入图像描述](https://i.stack.imgur.com/zopu2.png)

* * *

## 这是 Tesseract 的 hOCR 输出：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name='ocr-system' content='tesseract'/>
</head>
<body>
<div class='ocr_page' id='page_1' title='image "in2.tif"; bbox 0 0 1882 354'>
<div class='ocr_carea' id='block_1_1' title="bbox 78 59 457 100">
<p class='ocr_par'>
<span class='ocr_line' id='line_1_1' title="bbox 78 61 456 97"><span class='ocr_word' id='word_1_1' title="bbox 78 62 175 97"><span class='ocrx_word' id='xword_1_1' title="x_wconf -2">Dear</span></span> <span class='ocr_word' id='word_1_2' title="bbox 205 62 271 96"><span class='ocrx_word' id='xword_1_2' title="x_wconf -14">Mr:</span></span> <span class='ocr_word' id='word_1_3' title="bbox 303 61 456 97"><span class='ocrx_word' id='xword_1_3' title="x_wconf -2">Grover:</span></span></span>
</p>
</div>
<div class='ocr_carea' id='block_1_2' title="bbox 75 154 1842 317">
<p class='ocr_par'>
<span class='ocr_line' id='line_1_2' title="bbox 78 161 1787 210"><span class='ocr_word' id='word_1_4' title="bbox 78 161 111 196"><span class='ocrx_word' id='xword_1_4' title="x_wconf -2">If</span></span> <span class='ocr_word' id='word_1_5' title="bbox 137 161 270 205"><span class='ocrx_word' id='xword_1_5' title="x_wconf -2">you&#39;ve</span></span> <span class='ocr_word' id='word_1_6' title="bbox 298 162 393 197"><span class='ocrx_word' id='xword_1_6' title="x_wconf -1">been</span></span> <span class='ocr_word' id='word_1_7' title="bbox 422 161 571 206"><span class='ocrx_word' id='xword_1_7' title="x_wconf -3">looking</span></span> <span class='ocr_word' id='word_1_8' title="bbox 598 162 657 197"><span class='ocrx_word' id='xword_1_8' title="x_wconf -2">for</span></span> <span class='ocr_word' id='word_1_9' title="bbox 685 174 707 198"><span class='ocrx_word' id='xword_1_9' title="x_wconf -1">a</span></span> <span class='ocr_word' id='word_1_10' title="bbox 734 162 929 207"><span class='ocrx_word' id='xword_1_10' title="x_wconf -4">reporting</span></span> <span class='ocr_word' id='word_1_11' title="bbox 956 163 1031 198"><span class='ocrx_word' id='xword_1_11' title="x_wconf -1">tool</span></span> <span class='ocr_word' id='word_1_12' title="bbox 1059 162 1140 199"><span class='ocrx_word' id='xword_1_12' title="x_wconf -3">that</span></span> <span class='ocr_word' id='word_1_13' title="bbox 1168 164 1294 199"><span class='ocrx_word' id='xword_1_13' title="x_wconf -4">allows</span></span> <span class='ocr_word' id='word_1_14' title="bbox 1321 175 1428 200"><span class='ocrx_word' id='xword_1_14' title="x_wconf -1">users</span></span> <span class='ocr_word' id='word_1_15' title="bbox 1456 169 1494 200"><span class='ocrx_word' id='xword_1_15' title="x_wconf -3">to</span></span> <span class='ocr_word' id='word_1_16' title="bbox 1523 169 1649 200"><span class='ocrx_word' id='xword_1_16' title="x_wconf -2">create</span></span> <span class='ocr_word' id='word_1_17' title="bbox 1677 170 1787 210"><span class='ocrx_word' id='xword_1_17' title="x_wconf -3">great</span></span></span>
<span class='ocr_line' id='line_1_3' title="bbox 77 210 1841 260"><span class='ocr_word' id='word_1_18' title="bbox 77 210 226 256"><span class='ocrx_word' id='xword_1_18' title="x_wconf -3">looking</span></span> <span class='ocr_word' id='word_1_19' title="bbox 253 216 399 256"><span class='ocrx_word' id='xword_1_19' title="x_wconf -4">reports</span></span> <span class='ocr_word' id='word_1_20' title="bbox 427 211 581 256"><span class='ocrx_word' id='xword_1_20' title="x_wconf -3">quickly,</span></span> <span class='ocr_word' id='word_1_21' title="bbox 613 224 654 248"><span class='ocrx_word' id='xword_1_21' title="x_wconf -2">as</span></span> <span class='ocr_word' id='word_1_22' title="bbox 682 213 763 248"><span class='ocrx_word' id='xword_1_22' title="x_wconf -1">well</span></span> <span class='ocr_word' id='word_1_23' title="bbox 792 224 832 248"><span class='ocrx_word' id='xword_1_23' title="x_wconf -1">as</span></span> <span class='ocr_word' id='word_1_24' title="bbox 859 212 1056 258"><span class='ocrx_word' id='xword_1_24' title="x_wconf -4">providing</span></span> <span class='ocr_word' id='word_1_25' title="bbox 1083 212 1144 249"><span class='ocrx_word' id='xword_1_25' title="x_wconf -2">the</span></span> <span class='ocr_word' id='word_1_26' title="bbox 1173 214 1315 249"><span class='ocrx_word' id='xword_1_26' title="x_wconf -2">control</span></span> <span class='ocr_word' id='word_1_27' title="bbox 1344 215 1417 249"><span class='ocrx_word' id='xword_1_27' title="x_wconf -2">and</span></span> <span class='ocr_word' id='word_1_28' title="bbox 1445 214 1639 250"><span class='ocrx_word' id='xword_1_28' title="x_wconf -2">industrial</span></span> <span class='ocr_word' id='word_1_29' title="bbox 1667 215 1841 260"><span class='ocrx_word' id='xword_1_29' title="x_wconf -3">strength</span></span></span>
<span class='ocr_line' id='line_1_4' title="bbox 76 260 1370 306"><span class='ocr_word' id='word_1_30' title="bbox 76 261 243 296"><span class='ocrx_word' id='xword_1_30' title="x_wconf -2">features</span></span> <span class='ocr_word' id='word_1_31' title="bbox 272 260 353 297"><span class='ocrx_word' id='xword_1_31' title="x_wconf -2">that</span></span> <span class='ocr_word' id='word_1_32' title="bbox 381 273 427 297"><span class='ocrx_word' id='xword_1_32' title="x_wconf -1">an</span></span> <span class='ocr_word' id='word_1_33' title="bbox 458 261 499 297"><span class='ocrx_word' id='xword_1_33' title="x_wconf -2">IS</span></span> <span class='ocr_word' id='word_1_34' title="bbox 527 262 776 306"><span class='ocrx_word' id='xword_1_34' title="x_wconf -2">professional</span></span> <span class='ocr_word' id='word_1_35' title="bbox 804 263 1110 299"><span class='ocrx_word' id='xword_1_35' title="x_wconf -2">demands...look</span></span> <span class='ocr_word' id='word_1_36' title="bbox 1139 275 1184 299"><span class='ocrx_word' id='xword_1_36' title="x_wconf -1">no</span></span> <span class='ocr_word' id='word_1_37' title="bbox 1212 263 1370 299"><span class='ocrx_word' id='xword_1_37' title="x_wconf -3">further!</span></span></span>
</p>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T05:03:08.080

你已经看到了：它不存在。

因此，您可以修改 Tesseract 源代码以输出支持所需 x_confs 属性的 hOCR 格式，也可以使用其`ResultIterator`API 类在字符（符号）级别获得信心（确保使用`SetVariable("save_blob_choices", "T")`after`Init`方法）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-09-04T07:01:42.570

现在，这似乎在 Tesseract 4.x 中可用。

请参阅我的答案：

[https://stackoverflow.com/a/57766860/1021819](https://stackoverflow.com/a/57766860/1021819)

> 在配置文件中将 hocr_char_boxes 设置为 1。或者，在命令行中，您更新的命令将是：
> 
> tesseract [图像名称] outputbase --oem 1 -l eng --psm 8 -c hocr_char_boxes=1 hocr 注意 hocr 输出选项并在该文件中查找 ..._wconf，例如
> 
> 让我知道这是否适合您，否则我将删除答案。
> 
> 来源： [https ://github.com/tesseract-ocr/tesseract/issues/1465#issuecomment-513139976](https://github.com/tesseract-ocr/tesseract/issues/1465#issuecomment-513139976)

# eclipse - Subclipse 在更改忽略文件后识别更改？

> ID：15829153
> 
> 赞同：0
> 
> 时间：2013-04-05T08:24:30.107
> 
> 标签：eclipse, svn, subclipse

我在 Eclipse 中使用 Subclipse。将一些文件添加到根目录和所有子目录的 SVN 忽略列表后，同步视图会显示所有目录的更改。目录中没有文件已更改，它仅显示目录已更改（每个目录上的黑色传出箭头）。

我很困惑，因为如何更改已经存在的目录？

尝试将目录与最新版本的存储库进行比较时会显示“所选输入没有差异”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:10:04.277

该`svn:ignore`属性已在每个文件夹中设置。由于 svn 属性也是版本化的，这构成了对存储库的更改。这对任何客户都是如此，而不仅仅是 Subclipse。我不熟悉 Subclipse，所以我不知道为什么它没有出现在差异中，但我知道 TortoiseSVN 会出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:08:50.703

您更改了目录的属性以忽略这些文件名。没有任何*内容*差异 - 只是目录属性。

# sql-server-2005 - 将主键更改为可为空的列而不丢失数据

> ID：15829154
> 
> 赞同：0
> 
> 时间：2013-04-05T08:24:31.463
> 
> 标签：sql-server-2005, primary-key

我有一张表，其中有一些数据。

我在一列上有一个主键，但我想将它更改为我最近添加的另一列。我将该列添加为可为空的，我对其进行了更新以使其不为空。

我用了

```
ALTER TABLE MyTable MODIFY Termdefid INT NOT NULL 
```

但我收到错误

> “修改”附近的语法不正确。

之后我想这样做（当然，在我放弃当前的 PK 之后）：

```
ALTER TABLE [dbo].[MyTable] ADD  CONSTRAINT [PK_MyTable] PRIMARY KEY CLUSTERED 
(
    [TermdefID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON, FILLFACTOR = 90) ON [PRIMARY]
GO 
```

我无法制作我的新专栏`NOT NULL`。这是我的问题。我怎样才能做到这一点？

我使用 SQL Server 2005，也许这是我的问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:31:45.037

在 SQL Server 中，主键列**不能为空**

另外：您的`ALTER TABLE`命令对 SQL Server 无效 - 它应该是：

```
ALTER TABLE MyTable 
ALTER COLUMN Termdefid INT NOT NULL 
```

但同样：如果该列是您的主键的一部分，**则它不能为 nullable**。

[请参阅有关主键约束](http://msdn.microsoft.com/en-us/library/ms191236%28v=sql.105%29.aspx)的相关MSDN 文档：

> *一张表只能有一个 PRIMARY KEY 约束，**参与 PRIMARY KEY 约束的列不能接受空值**。因为 PRIMARY KEY 约束保证数据的唯一性，所以它们经常在标识列上定义。*

# php - 使用 PHP 在我的网站中添加支付和取款系统

> ID：15829163
> 
> 赞同：0
> 
> 时间：2013-04-05T08:24:58.073
> 
> 标签：php, mysql, paypal, payment-gateway

我正在使用 PHP-MySQL 系统编写一个网站。该网站将有支付和提款系统。

对于付款，我将添加贝宝（万事达卡/签证）作为支付系统。很好。但是，我的问题是，如果有人使用万事达卡或维萨卡向我的网站付款，付款将添加到哪里？是我的Paypal帐户吗？

我想添加 Moneybookers、Alertpay 和 Paypal 作为提款方式。但是，我根本不知道如何将它们添加到我的网站作为提款系统。我在谷歌上搜索了很多，但没有找到类似的东西。任何人都可以将我锚定到一个完整的教程，教如何这样做。

Odesk 和类似网站正在使用支付和提款系统。我想添加与它们相同的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:59:28.347

如前所述，PayPal 将处理付款处理，资金将进入您的 PayPal 账户。从那里您可以将它们留在您的 PayPal 帐户中，或将它们提取到您的银行。您可以将您的账户设置为每天自动从您的 PayPal 账户中提取资金并将其发送到您的银行账户。如果您希望将它们发送到多个帐户，这将是您需要手动执行的操作。如果您尝试将资金提取到其他 PayPal 账户，您可以使用 MassPayment API 或 Adaptive Payments Pay API 将资金发送到其他账户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:47:00.193

付款金额将记入您的贝宝账户，信用卡信息将由贝宝系统处理，

而且我认为不可能自动从任何支付提供商处提取金额。

# c++ - 当我的 Boost::asio tcp 服务器刚刚开始运行（又名 io_service.run() ）时，如何启动“事件”？

> ID：15829165
> 
> 赞同：1
> 
> 时间：2013-04-05T08:24:59.990
> 
> 标签：c++, boost, c++11, boost-asio

基于 boost::asio 客户端/服务器关系，只有当服务器线程处于“**等待连接**”状态时，我才必须从服务器程序启动客户端程序。

我的问题是如何知道那个状态？

作为示例，使用[asio 示例/序列化](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/serialization/) [链接](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/serialization/)，并将 server.cpp 的主要功能替换为该代码：

```
#include <conio.h>
#include <concrt.h> // wait function
#include <future>
#include <thread>

void server_thread( std::promise<bool>& run )
{ 
    boost::asio::io_service io_service;
    s11n_example::server server(io_service, 123);
    // too early to run.set_value( true );
    io_service.run();
    // too late to run.set_value( true );
}

int main(int argc, char* argv[])
{
    std::promise<bool> run;
    std::thread thrd( server_thread, boost::ref( run ) );
    thrd.detach(); 

    bool launched = run.get_future().get();
    // server is waiting for connection
    // launch the client
    if( launched )
    {
        int rc = system( "start client.exe localhost 123" );
        if( rc )
            std::cerr << "system failed returning " << rc << std::endl ;
    }
    else
        std::cerr << "server_thread failure" << std::endl ;

    std::cout << "hit a key to exit"  ;
    while( !_kbhit() )
        Concurrency::wait( 100 );

    return 0;
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T15:46:38.770

简而言之，`s11n_example::server`在构造函数调用完成后传入连接将立即排队的状态。

* * *

通过定义状态和操作之间的区别可能更容易理解这一点。状态决定了操作系统可以对对象做什么；应用程序启动执行操作并可能依赖于状态的操作。例如，当一个套接字处于*打开*状态时，操作系统会将数据排队；*读取*操作检索排队的数据。这同样适用于受体。当一个acceptor处于*listen*状态时，OS会对连接进行排队；接受*操作*将完成连接，将其从队列中删除。

An`acceptor`的*[states]*和*transitions()*如下：

```
 .----> [closed] ------.     [closed]:    socket not open
     |                     |     [opened]:    socket open but not listening for
     |                     V                  connections
  close() <------.      open()   [listening]: incoming connections will be
     ^           |         |                  queued until accepted(), causing
     |           |         V                  the connection to be established
[listening]      '---- [opened]
     ^                     |
     |                     |
     '------ listen() <----' 
```

各种重载的构造函数将导致`acceptor`其生命周期以关闭、打开或侦听状态开始。在 的情况下[`s11n_example::server`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/example/serialization/server.cpp)，接受器是用端点构造的，因此[这种](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_socket_acceptor/basic_socket_acceptor/overload3.html)重载将导致接受器在构造后处于侦听状态。这相当于做：

```
using boost::asio::ip::tcp;
tcp::endpoint endpoint_(tcp::v4(), 123);
tcp::acceptor acceptor_(io_service); // closed state
acceptor.open(endpoint_.protocol()); // opened state
acceptor.bind(endpoint);
acceptor.listen();                   // listening state 
```

因此，可以在`server`构造之后和之前设置承诺`io_service.run()`：

```
void server_thread(std::promise<bool>& run)
{ 
    boost::asio::io_service io_service;
    s11n_example::server server(io_service, 123);
    // The server's acceptor is in a listening state, so connection attempts
    // will be queued even without the io_service event loop running.  The
    // server also has an outstanding asynchronous accept operation.
    run.set_value(true);
    // Run the service, this will start an asynchronous loop that accepts 
    // connections.
    io_service.run();
} 
```

需要注意的一个微妙之处是 Boost.Asio 的接受器不提供：

*   用于接受连接的基于反应器的操作。因此，无法检测连接何时准备好被接受（即连接排队等待接受）。
*   `acceptor`检测是否处于侦听状态的更高级别的方法。不过，这可以通过查询接受者的[`native_handle`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/basic_socket_acceptor/native_handle.html). 例如，使用[`getsockopt()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738544%28v=vs.85%29.aspx)来获取 的值`SOL_SOCKET/SO_ACCEPTCONN`。

# ruby-on-rails - format.js 在 Rails 2 中不起作用

> ID：15829170
> 
> 赞同：0
> 
> 时间：2013-04-05T08:25:21.573
> 
> 标签：ruby-on-rails

我有两个名为`client/orders`and的控制器`notary/orders`。在“客户/订单”中有 click_me 链接。当我单击链接时，我应该将 ajax 请求传递到`notary/orders/pending_orders`页面`reload the notary/orders/pending_orders`。

这是我在 client/orders/new 中的 Ajax 调用

```
<script>
    jQuery.noConflict();
jQuery(document).ready(function(){
alert(9);
jQuery(".test_link").live("click", function(){
  alert("am clicked");
      jQuery.ajax({
      url: "/notary/orders/pending_orders",
      dataType: 'script',
      type: "get",
      data: {data:'hi'},
      success:function(){
          alert("success");
      },
      error:function(){
          alert("failure");   
      }
    });
}) 
```

});

```
<%= link_to "click me", "javascript:void(0);" , :class => "test_link" %> 
```

这是我的代码`notary/orders/pending_orders`

```
if request.xhr?
   respond_to do |format|
   format.js { render :js=>'location.reload();',
   :location => "notary/orders/pending_orders"}
   end
    end 
```

但它`client/orders/new`不会重新加载`notary/orders/pending_orders`。但我想重新加载公证/订单/pending_orders。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T04:56:24.223

我猜链接`<%= link_to "click me", "javascript:void(0);" , :class => "test_link" %>` 在里面`client/orders/new`，你想`notary/orders/pending_orders`从`client/orders/new`.

由于您是从 发出请求`client/orders/new`，因此您的所有响应都只会得到更新`client/orders/new`。

似乎您正在`client/orders/new`从一个浏览器执行操作并在另一个浏览器中侦听页面`notary/orders/pending_orders`以在后端发生某些更改时更新通知。

`notary/orders/pending_orders`要在后端发生更改时自动更新页面（例如：在 中显示通知），我用来做的是，我会为此设置一个单独的侦听器，

```
 <script type="text/javascript">
      jQuery(document).ready(function(){
        notificationListener();
      }); 

      function notificationListener(){
        jQuery.ajax({
           url: "/notary/orders/pending_orders",
           type: "get",
           data: {data:'yourdata'},
           success:function(){
             if(expected result){
                //code to update browser view
             }
             else{
                setTimeout(notificationListener(),10000)
             }
           },
           error:function(){
              //
           }
      });
    }

</script> 
```

# css - span 会导致里面的内容变低吗？

> ID：15829171
> 
> 赞同：1
> 
> 时间：2013-04-05T08:25:22.867
> 
> 标签：css

我正在添加一个跨度来包装文本的某个部分，以便我可以对其应用特定的字体，但由于某种原因，它下降到下面，因此它的一部分位于包含所有文本的段落的基线之下。

任何人对如何将其（跨度）向上移动以使其与文本的其余部分位于同一行有任何想法吗？

我正在尝试相对定位，但我想知道是否有更好的方法。

这是代码：

```
<!Doctype HTML>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <style type="text/css">
        html, body{
        margin:0;
        padding:0;
        font-size:16px;
        }
        .container{
        height:342px;
        width:100%;
        padding-top:2em;
        padding-left:2em;
        background:#ffffff;
        background:rgb(255, 255, 255);
        -moz-box-sizing:border-box;
        -webkit-box-sizing:border-box;
       box-sizing:border-box;
       color:#333333;
       color:rgb(51, 51, 51);
       font-family:'Trend';
       font-size:120%;
       font-size:1.2rem;
       *behavior:url(../scripts/boxsizing.htc);
    }
    #welcome{
        background:#8cc047;
        background:rgb(140, 192, 71);
    }
    #welcome p.title{
        margin:0;
        font-size:225%;
        font-size:2.25rem;
    }
    #name{
        position:relative;
        font-family:'Cubano-web',Cubano,'Trend';
        left:16px;
        top:-7.1px;
    }
    </style>
    </head>
    <body>
        <header class="container" id="welcome">
        <p class="title">Hello,</p>
        <p class="title">I'm <span id="name">Noah</span>&mdash;</p>
        </header>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:28:17.137

我可能误解了这个问题，但如果你希望它在同一行，你不应该将文本分成 2 个`<p>`标签

[jsFiddle](http://jsfiddle.net/Tyriar/HfvKA/)

```
<header class="container" id="welcome">
    <p class="title">Hello, I'm <span id="name">Noah</span>&mdash;</p>
</header> 
```

## 编辑

好的，所以我认为您正在使用几乎没有人会使用的自定义字体，这就是引发这个问题的原因。我建议您使用[Mac 和 Windows 的标准字体](http://www.ampsoft.net/webdesign-l/WindowsMacFonts.html)或 CSS3[`@font-face`](http://www.font-face.com/)以包含不同的字体，否则您无法确定用户是否会拥有它们（就像现在一样）。

至于对齐自定义字体，基本上你不能很好地做到这一点并保证它会正确显示。例如，您可以尝试`position:relative;`使用之前使用的方法，在这种情况下，我建议您使用`em`not `px`。使用`em`将解决缩放和不同设备带来的许多响应问题，因为您将根据字体大小而不是像素来移动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:34:58.700

如果这是您需要的，请在第一行和另一行中的其他文本中打招呼，然后将此 css 添加到标题类

```
.title{
    clear:both;
    float:left;
    display:inline;
  } 
```

并删除 top 和 left 属性，`#name` 使其像这样..

删除`position:relative`也；

```
 #name{
            font-family:'Cubano-web',Cubano,'Trend';
    } 
```

这是小提琴
[http://jsfiddle.net/tFJ2x/1/](http://jsfiddle.net/tFJ2x/1/)

# javascript - 停止 chrome 后退/前进两指轻扫

> ID：15829172
> 
> 赞同：33
> 
> 时间：2013-04-05T08:25:39.557
> 
> 标签：javascript, google-chrome, swipe

我想禁用导致 Chrome 后退或前进的两指滑动。我有一个网站，如果用户不专门保存，用户可能会失去工作进度。

我尝试过使用`window.onbeforeunload`，但如果我在 url 中有哈希值（后退会在 www.example.com/work/#step1#unsaved www.example.com/work/#step0 之间更改）和事件似乎没有触发。

我正要切换到另一个解决方案，但今天我注意到在 Google Docs 中它已完全禁用。他们是如何做到这一点的？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2019-05-10T06:32:30.473

[禁用 Chrome 两指向后/向前滑动](https://stackoverflow.com/questions/17474930/disable-chrome-two-fingers-back-forward-swipe)

这对我有用：

```
body {
  overscroll-behavior-x: none;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-10T19:13:05.620

默认情况下，使特定页面在新选项卡/窗口中打开（通过将 target="_blank"> 放入超链接）。这样就没有前一页可以返回。

或者默认阻止水平滚动。为此，您可以使用 jquery.mousewheel 执行以下操作：

```
$(document).on("mousewheel",function(event,delta){ 
  // prevent horizontal scrolling
  if (event.originalEvent.wheelDeltaX !== 0) {
    event.preventDefault();
  } 
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-02-24T23:28:26.923

假设您有一个水平滚动元素，添加`overscroll-behavior-x: contain;`是防止滚动动作溢出到页面并导致导航的最简单方法。

[https://dev.to/danburzo/css-micro-tip-prevent-history-navigation-on-horizo​​ntally-scrolling-elements-3iil](https://dev.to/danburzo/css-micro-tip-prevent-history-navigation-on-horizontally-scrolling-elements-3iil)

[https://caniuse.com/#feat=css-overscroll-behavior](https://caniuse.com/#feat=css-overscroll-behavior)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-09-27T04:25:13.340

禁用或替换 Google Chrome 61 的滑动手势

将我带到这里的问题被标记为“重复”并且无法回答。我相信这个答案更适合“重复”的问题，但是，我觉得这个答案可能会为有人回答这两个问题节省时间。

更好的问题： [在 javascript 中禁用 Chrome 浏览器上的导航滑动](https://stackoverflow.com/questions/13415370/disable-navigation-swipe-on-chrome-browser-in-javascript)

这篇 Google 开发人员文章帮助我允许 e.preventDefault() 从 Chrome 61 开始工作并防止滑动手势。

[https://developers.google.com/web/updates/2017/01/scrolling-intervention](https://developers.google.com/web/updates/2017/01/scrolling-intervention)

givanse 对以下问题的回答是我用来编写自己的滑动事件处理程序的代码：

[在 iPhone 和 Android 上通过 JavaScript 检测手指滑动](https://stackoverflow.com/questions/2264072/detect-a-finger-swipe-through-javascript-on-the-iphone-and-android#23230280)

总之，以下两个事件用于实现滑动手势：

```
handleTouchStart (e) {
  ...
},
handleTouchMove (e) {
  ...
  e.preventDefault()
} 
```

从 Chrome 56 开始，默认行为是使事件侦听器处于被动状态，从而禁用阻止 Chrome 滑动手势的功能。要覆盖此行为，可以按如下方式添加事件侦听器：

```
document.addEventListener(
  'touchstart',
  this.handleTouchStart,
  {passive: false}
)
document.addEventListener(
  'touchmove',
  this.handleTouchMove,
  {passive: false}
) 
```

通过将 {passive: false} 对象作为第三个参数传递给 addEventListener 方法，监听器被注册为活动的并且可以使用 e.preventDefault() 事件方法停止 Chrome 的默认行为。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-11T15:50:59.607

我一直在做类似的事情，我想覆盖向前/向后历史滑动手势。根据您的滑动区域，您可以按如下方式调整选择器：

```
html { touch-action:none; } 
```

这是相关文档，它为您提供所有触摸操作的所有属性，例如浏览器内置的平移或缩放功能。

[https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action](https://developer.mozilla.org/en-US/docs/Web/CSS/touch-action)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-12T23:56:33.787

在@roy riojas 和@redgetan 先前给出的答案的基础上-我结合了他们的答案以使其具有动态性并防止向前和向后-再次-根据@roy的评论-您必须知道元素的类别，并且对于此实现 - 实际正在滚动的嵌套元素的类

```
(function ($) {
  $(document).on('mousewheel', function(e) { 
    var $target = $(e.target).closest('.scrollable-h');
    var scroll = $target.scrollLeft();
    var maxScroll = $target.find('.scrollable-h-content').width() - $target.width();

    if(scroll <= 0) {
      if(scroll <= 0 && e.originalEvent.wheelDeltaX >= 0) {
        e.preventDefault();
      }
    }
    if(scroll >= maxScroll) {
      if (scroll >1 && e.originalEvent.wheelDeltaX <= 0) {
        e.preventDefault();
      }
    }
});}(jQuery)); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-13T08:28:31.017

我可以通过在地址栏中键入 chrome://flags 并向下转到“Overscroll history navigation”并从下拉菜单中将其设置为“Disabled”来禁用它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-09T22:39:02.127

嗨，这在 chrome 上对我有用，但不适用于整个页面，但适用于我有可滚动内容的地方。

在 Google Docs (Spreadsheets) 中，它似乎可以正常工作，因为它们没有后页可走。如果您导航到另一个 URL（手动），它不会阻止您导航回来。

```
$(document).on('mousewheel', function(e) { 
  var $target = $(e.target).closest('.scrollable-h');
  if ($target.scrollLeft () <= 4) {
    $target.scrollLeft(5);
    return false;
  }
}); 
```

要记住的一件事是，上面的代码做了两个假设：

1.  您的具有水平滚动内容的元素有一个类*scrollable-h*
2.  如果检查 scrollLeft 是否大于 4px 然后让它滚动到 5px 返回 false 有效地取消后退手势

重要提示： - 这只会防止向后滑动手势，当快速完成时，如果你做得非常慢，它有时仍会触发。

*   此外，这不会阻止向前滑动手势，但也可以通过检查元素是否已达到最大 scrollLeft 来完成。如果是这种情况，则将其向后移动 20 像素并返回 false 以防止事件发生……如果碰巧对您有意义，则由您添加此用例。

您可以在此处查看概念证明。[http://jsfiddle.net/royriojas/JVA6m/#base](http://jsfiddle.net/royriojas/JVA6m/#base)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-27T18:30:53.193

您可以使用以下代码禁用后退/前进：

```
document.addEventListener("wheel", function(event) {
    event.preventDefault();
}, { passive: false }); 
```

请注意，添加 {passive: false } 是必不可少的，至少在 Chrome 中是这样。如果您只想在某些区域禁用后退/前进，则可以使用这样的代码（假设您使用的是 jquery，并将类 disable-back-forward 添加到要禁用后退/前进的部分）：

```
document.addEventListener("wheel", function(event) {
    if ($(event.target).closest('.disable-back-forward').length)
        event.preventDefault();
}, { passive: false }); 
```

* * *

## 回答 #10

> 赞同：-4
> 
> 时间：2013-04-12T19:50:57.130

你在错误的层面上看待问题。OnBeforeUnload 根本没有被触发，因为从浏览器的角度来看没有任何东西被卸载。因此，坦率地说，您实现了错误的版本控制机制 - 片段用于页面状态，而不是您现在使用的文档状态。

如果你坚持通过散列片段来维护状态，你需要使用另一种机制来防止页面状态改变。由于当前所有浏览器都支持 LocalStorage，我会使用它。好吧，在此过程中，将所有文档状态数据放在那里而不是在 URL 中，因为 Google Docs 就是这样做的，这就是他们没有这个问题的原因。

# javascript - 画布 todataurl 损坏的图像

> ID：15829174
> 
> 赞同：1
> 
> 时间：2013-04-05T08:25:40.990
> 
> 标签：javascript, base64, jspdf

我有一个允许用户签署文档的应用程序，在画布上绘制签名。

```
function initialize(xsize, ysize) {
         // get references to the canvas element as well as the 2D drawing context
         sigCanvas = document.getElementById("canvassignature");
         sigCanvas.width = xsize;
         sigCanvas.height = ysize;
         var context = sigCanvas.getContext("2d");
         context.strokeStyle = 'Black';
         // This will be defined on a TOUCH device such as iPad or Android, etc.
         var is_touch_device = 'ontouchstart' in document.documentElement;

         if (is_touch_device) {
            // create a drawer which tracks touch movements
            var drawer = {
               isDrawing: false,
               touchstart: function (coors) {
                  context.beginPath();
                  context.moveTo(coors.x, coors.y);
                  this.isDrawing = true;
               },
               touchmove: function (coors) {
                  if (this.isDrawing) {
                     context.lineTo(coors.x, coors.y);
                     context.stroke();
                  }
               },
               touchend: function (coors) {
                  if (this.isDrawing) {
                     this.touchmove(coors);
                     this.isDrawing = false;
                  }
               }
            }; 
```

然后我使用 todataurl 从画布中获取图像并将其保存在本地存储中。

```
function save_canvas(index) {

          sigCanvas = document.getElementById("canvassignature");
          var img = sigCanvas.toDataURL('image/jpeg');

          window.localStorage.setItem("fm"+ index, img);
          sigCanvas.width = sigCanvas.width;
      } 
```

现在我想使用 jsPDF 将该登录导出为 pdf。为此，我应该在 png 上使用 jpeg 图像，所以我使用 toDataUrl('image,JPEG')。当我从 localStorage 重新拍摄图像时，

```
function firma(titlenum) {
    canvasnum = titlenum;
    xcoord = (window.event.clientX-50);
    ycoord = (window.event.clientY-50);
    idsign = "fm" + titlenum;
    var img_firma = window.localStorage.getItem(idsign);
    if (null != img_firma && img_firma != "") {
        alert(img_firma);
        $('#pagesign').hide();
        $('#pagesignimg').show(); 
        var toAppend = new Image;
        toAppend.title = 'Firma';
        toAppend.src = img_firma;
        toAppend.className = "imgfirma";
        $('#div_firmaimg').empty();
        document.getElementById('div_firmaimg').appendChild(toAppend);
        document.getElementById('signnascosteimg').click();
    } else {
        alert(img_firma);
        $('#pagesign').show(); 
        $('#pagesignimg').hide();
        initialize(0, 0);
        document.getElementById(idsign).className = "editsign";
        document.getElementById('signnascoste').click();
    }   
} 
```

`base64`结果损坏如下：

```
data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAICAgICAQICAgICAgIDAwYEAwMDAwcFBQQGCAcICAgHCAgJCg0LCQkMCggICw8LDA0ODg4OCQsQEQ8OEQ0ODg7/2wBDAQICAgMDAwYEBAYOCQgJDg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg4ODg7/wAARCAKGBRADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD+f+iiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK 
```

我不明白为什么....

# ios - iOS CoreLocation：找到位置后将其关闭或让它运行

> ID：15829176
> 
> 赞同：-1
> 
> 时间：2013-04-05T08:25:47.637
> 
> 标签：ios, core-location, battery

我构建了一个 GPS 跟踪器，它每 20 秒获取一次当前位置，或者如果设备旋转超过 xx°。

现在我不确定节省电池能量的最佳解决方案是什么：

1) 获得职位后停止 CoreLocation 服务，如果计时器到期则将其打开

2）跟踪时不要关闭CoreLocation服务

那么，打开和关闭服务是否比不关闭服务消耗更多的电池电量（在跟踪期间）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:35:49.017

You should turn it off when you are not tracking. But you should not alternate between on and off while tracking.

If your interval was 3-4x longer I would say turn it off in between.

# asp.net - asp.net 母版页中的 AJAX 脚本管理器

> ID：15829177
> 
> 赞同：1
> 
> 时间：2013-04-05T08:25:49.080
> 
> 标签：asp.net, ajax, scriptmanager

我在母版页下的页面中使用 Ajax。我对脚本管理器的位置有疑问。我不希望脚本管理器适用于所有页面，只适用于一个页面。

这是母版页：

```
 <div>

                <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

                </asp:ContentPlaceHolder>

            </div> 
```

这是我要添加脚本管理器的页面

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
   <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:TextBox ID="TextBox1" runat="server" Width="120"></asp:TextBox>
    <asp:NumericUpDownExtender
        ID="NumericUpDownExtender1" runat="server" TargetControlID="TextBox1" Maximum="9" Minimum="1" Width="120">
    </asp:NumericUpDownExtender>
</asp:Content> 
```

当我运行它时，会出现这个问题：“必须将类型为'ScriptManager'的控件'ContentPlaceHolder1_ScriptManager1'放在带有runat = server的表单标签内。”

所以我在互联网上读到我必须将母版页中的内容放在这样的表单标签内：

```
 <div>
            <form id="form1" runat="server" style="height: 25px">
                <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

                </asp:ContentPlaceHolder>
                </form>
            </div> 
```

但是当我这样做时，会出现另一个问题：“一个页面只能有一个服务器端表单标签。”

我不知道该怎么办，谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:42:41.543

在 Asp.net 中，不允许有更多的表单标签。您只有一个包含所有内容的大表单，而不是拥有许多表单。

在大师：

```
<body>
  <form id="form1" runat=server>

   <asp:ContentPlaceHolder runat="server" ID="MainContent" />

   </form>
</body> 
```

在 ContentPlaceHolder 中：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
    'your code here'
</asp:Content> 
```

在所有文件中使用搜索来检查您是否有多个表单标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:26:29.323

问题是因为我在此页面中有另一个表格。但不是表单中的表单，为什么我的母版页中不能有多个表单？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-12T13:49:40.307

网站母版页：

```
 <form runat="server">
             <asp:ScriptManager runat="server">
                 <Scripts>

                     <asp:ScriptReference Name="jquery" />
                     <asp:ScriptReference Name="jquery" Path="~/Scripts/jquery-3.4.1.js" />
                   <asp:ScriptReference Name="jquery" Path="~/Scripts/jquery-3.4.1.min.js" />
                  <asp:ScriptReference  Path="~/Scripts/YourScript.js" />
</Scripts>
</asp:ScriptManager>
            <div>
                <ul class="nav">
                    <li><a runat="server" id="about" href="~/About">About</a></li>
                </ul>
            </div>

<asp:ContentPlaceHolder ID="MainContent" runat="server"> </asp:ContentPlaceHolder> 
```

这些是 Aspx 页面代码：

```
<asp:Content ID="BodyContent" ContentPlaceHolderID="MainContent" runat="server">
<div runat=server id=subMenus></div>
</asp:Content> 
```

和 JS 文件：

```
$('#about').click(function (e) {

        e.preventDefault();
        $('#MainContent_subMenus').load('let.aspx');

    }); 
```

所以 jquery '加载'一个 ajax 调用。这个函数通过 <asp:Content ID="BodyContent" 到*id=subMenus* div的 aspx 文件给出

> PS：

*注意 ID 母版页几乎在每个元素之前都给出了“MainContent_”标签。*

**这个对我有用。我希望这对你有帮助。**

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T08:45:41.850

把你的`script manager`里面`contentplace holder`。

# c++ - 计算某些单词在 C++ 文本文件中出现的次数

> ID：15829178
> 
> 赞同：0
> 
> 时间：2013-04-05T08:25:49.377
> 
> 标签：c++, string, file-io

我正在尝试用两个不同的文本文件制作一个程序。其中一个包含我要分析的实际文本，另一个包含单词列表。该程序应该检查列表中的单词何时出现在文本中并对其进行计数。这是我到目前为止的（非工作）代码：

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;

int main () {

    string word1;
    string word2;
    int listHits = 0;

    ifstream data1 ("text.txt");
    if ( ! data1 ) {
    cout << "could not open file: " << "text.txt" << endl;
        exit ( EXIT_FAILURE );
  }

    ifstream data2 ("list.txt");
    if ( ! data2 ) {
    cout << "could not open file: " << "list.txt" << endl;
        exit ( EXIT_FAILURE );
  }

    while ( data1 >> word1 ) {
        while ( data2 >> word2 ) {
            if ( word1 == word2 ) {
                listHits++;
            }
        }
    }

    cout << "Your text had " << listHits << " words from the list " << endl;

    system("pause");

    return 0;
} 
```

如果 text.txt 包含

> 这里有一段文字。它将被加载到程序中。

和 list.txt 包含

> 将

预期的结果是 3。但是，无论文本文件中有什么，程序总是给我答案 0。我已经检查了程序实际上是否设法通过计算它执行循环的次数来读取文件，并且它作品。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:30:49.687

你的程序只通过一次“目标词列表”（即`data2`）文件。文件流是“一种方式”：一旦你用完它，你需要倒带它，或者它会留在最后。内循环

```
while ( data2 >> word2 )
    ... 
```

将只执行第一次，即 . 的第一个单词`data1`。对于第二个和所有后续单词， the`data2`已经在文件末尾，因此代码甚至不会进入循环。

您应该在内存中阅读目标词，并在内部循环中使用该列表。更好的是，将单词放在 a 中`set<string>`，然后使用该集合进行计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:28:30.577

在我看来，您总是只将第一个文件的第一个字母与整个第二个文件进行比较，您这样做：

```
 while ( data1 >> word1 ) {
        while ( data2 >> word2 ) { // <---- after this ends the first time, it will never enter again
            if ( word1 == word2 ) {
                listHits++;
            }
        } 
```

您需要在第二个循环完成后“重置” data2 以便它从文件开头再次开始读取：

```
 while ( data1 >> word1 ) {
        while ( data2 >> word2 ) {
            if ( word1 == word2 ) {
                listHits++;
            }    
        }
        data2.seekg (0, data2.beg);
   } 
```

# visual-studio-2010 - 带有 Visual Studio 2010 的 Dotnetnuke 7

> ID：15829180
> 
> 赞同：0
> 
> 时间：2013-04-05T08:25:54.963
> 
> 标签：visual-studio-2010, dotnetnuke

我开始开发 Dotnetnuke 并下载了包`"DotNetNuke_Community_07.00.05_Source"`。此软件包包含两个解决方案：`"DotNetNuke_Community_Source.sln"`和`"DotNetNuke_Community_UnitTests_Source.sln"`.

显然，**这些解决方案文件只能使用 Visual Studio 2012 打开**。我已经安装了操作系统 Windows XP 和 Visual Studio 2010。

有什么方法可以使用 Visual Studio 2010 打开这些解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:12:57.987

要为 DotNetNuke 进行开发，您无需打开 DNN 解决方案，您应该从查看模块开发模板开始。

我最新的模板都是VS2012的，但是你可以在这里使用旧版本

[https://christoctemplate.codeplex.com/releases/view/93348](https://christoctemplate.codeplex.com/releases/view/93348)

基本上，要为 DNN 开发，您需要创建自定义扩展（模块/皮肤）并安装它们。您很少需要打开 DNN 解决方案本身。

# validation - struts2 中的验证

> ID：15829183
> 
> 赞同：1
> 
> 时间：2013-04-05T08:26:00.437
> 
> 标签：validation, struts2

```
public class Admin extends ActionSupport implements ModelDriven<AdminData>
  {
   AdminData adminData = new AdminData();
   public AdminData getModel()
     {
        return adminData;
    }

   @Validations(requiredStrings ={
      @RequiredStringValidator(type=ValidatorType.FIELD,fieldName="emailId"),
    @RequiredStringValidator(type=ValidatorType.FIELD,fieldName="password")}
    public String auth()
    {
     }

     @Validations(requiredStrings ={
     @RequiredStringValidator(type=ValidatorType.FIELD,fieldName="emailId"),
        @RequiredStringValidator(type=ValidatorType.FIELD,fieldName="firstName"),
        @RequiredStringValidator(type=ValidatorType.FIELD,fieldName="surName"),
        @RequiredStringValidator(type=ValidatorType.FIELD,fieldName="password")}
   public String create() throws DatabaseException
   {

    }

} 
```

我的问题是，当我调用`create()`方法时，验证没有问题，但是当我调用`auth()`方法时，验证有问题，因为当我调用 auth 方法时，它用于验证名字和姓氏。

并且在 AdminData.java 中有所有的 getset

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:16:49.093

默认情况下，Struts2 验证器将检查所有方法的所有验证约束。您可以将 struts 配置为仅查找与当前方法相关的验证约束。只需打开`validateAnnotatedMethodOnly`你的`struts.xml`：

```
<struts>
    <package ...>
        <interceptors>
            <interceptor-stack name="defaultStack">

                .....

                <!-- Turning per method validation on -->
                <interceptor-ref name="validation">
                    <param name="validateAnnotatedMethodOnly">true</param>
                    <param name="excludeMethods">input,back,cancel,browse</param>
                </interceptor-ref>

                ......

            </interceptor-stack>
        </interceptors>
    </package>
</struts> 
```

请参阅相应的文档条目：[每种方法的不同验证](http://struts.apache.org/release/2.0.x/docs/validations-annotation.html#ValidationsAnnotation-Differentvalidationspermethod)

# php - 通过服务访问方法--- Symfony2

> ID：15829184
> 
> 赞同：0
> 
> 时间：2013-04-05T08:26:05.137
> 
> 标签：php, symfony

我的控制器 PurchaseOrder 控制器

```
<?php

namespace CJ\BusinessBundle\Controller;

use Symfony\Component\HttpFoundation\Request;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Method;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;
use CJ\BusinessBundle\Entity\PurchaseOrder;
use CJ\BusinessBundle\Form\PurchaseOrderType;

/**
 * PurchaseOrder controller.
 *
 * @Route("/purchaseorder")
 */
class PurchaseOrderController extends Controller
{
/**
 * Lists all PurchaseOrder entities.
 *
 * @Route("/", name="purchaseorder")
 * @Method("GET")
 * @Template()
 */
public function indexAction()
{
    $em = $this->getDoctrine()->getManager();

    $entities = $em->getRepository('CJBusinessBundle:PurchaseOrder')->findAll();

    return array(
        'entities' => $entities,
    );
}

/**
 * Creates a new PurchaseOrder entity.
 *
 * @Route("/", name="purchaseorder_create")
 * @Method("POST")
 * @Template("CJBusinessBundle:PurchaseOrder:new.html.twig")
 */
public function createAction(Request $request)
{
    $entity  = new PurchaseOrder();
    $form = $this->createForm(new PurchaseOrderType(), $entity);
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();
        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('purchaseorder_show', array('id' => $entity->getId())));
    }

    return array(
        'entity' => $entity,
        'form'   => $form->createView(),
    );
}

/**
 * Displays a form to create a new PurchaseOrder entity.
 *
 * @Route("/new", name="purchaseorder_new")
 * @Method("GET")
 * @Template()
 */
public function newAction()
{
    $entity = new PurchaseOrder();
    $form   = $this->createForm(new PurchaseOrderType(), $entity);

    $purchase = $this->get('cj.businessbundle.purchase');
    $purchase->newAction();

    return array(
        'entity' => $entity,
        'form'   => $form->createView(),
    );
}

/**
 * Finds and displays a PurchaseOrder entity.
 *
 * @Route("/{id}", name="purchaseorder_show")
 * @Method("GET")
 * @Template()
 */
public function showAction($id)
{
    $em = $this->getDoctrine()->getManager();

    $entity = $em->getRepository('CJBusinessBundle:PurchaseOrder')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find PurchaseOrder entity.');
    }

    $deleteForm = $this->createDeleteForm($id);

    return array(
        'entity'      => $entity,
        'delete_form' => $deleteForm->createView(),
    );
}

/**
 * Displays a form to edit an existing PurchaseOrder entity.
 *
 * @Route("/{id}/edit", name="purchaseorder_edit")
 * @Method("GET")
 * @Template()
 */
public function editAction($id)
{
    $em = $this->getDoctrine()->getManager();

    $entity = $em->getRepository('CJBusinessBundle:PurchaseOrder')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find PurchaseOrder entity.');
    }

    $editForm = $this->createForm(new PurchaseOrderType(), $entity);
    $deleteForm = $this->createDeleteForm($id);

    return array(
        'entity'      => $entity,
        'edit_form'   => $editForm->createView(),
        'delete_form' => $deleteForm->createView(),
    );
}

/**
 * Edits an existing PurchaseOrder entity.
 *
 * @Route("/{id}", name="purchaseorder_update")
 * @Method("PUT")
 * @Template("CJBusinessBundle:PurchaseOrder:edit.html.twig")
 */
public function updateAction(Request $request, $id)
{
    $em = $this->getDoctrine()->getManager();

    $entity = $em->getRepository('CJBusinessBundle:PurchaseOrder')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find PurchaseOrder entity.');
    }

    $deleteForm = $this->createDeleteForm($id);
    $editForm = $this->createForm(new PurchaseOrderType(), $entity);
    $editForm->bind($request);

    if ($editForm->isValid()) {
        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('purchaseorder_edit', array('id' => $id)));
    }

    return array(
        'entity'      => $entity,
        'edit_form'   => $editForm->createView(),
        'delete_form' => $deleteForm->createView(),
    );
}

/**
 * Deletes a PurchaseOrder entity.
 *
 * @Route("/{id}", name="purchaseorder_delete")
 * @Method("DELETE")
 */
public function deleteAction(Request $request, $id)
{
    $form = $this->createDeleteForm($id);
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();
        $entity = $em->getRepository('CJBusinessBundle:PurchaseOrder')->find($id);

        if (!$entity) {
            throw $this->createNotFoundException('Unable to find PurchaseOrder entity.');
        }

        $em->remove($entity);
        $em->flush();
    }

    return $this->redirect($this->generateUrl('purchaseorder'));
}

/**
 * Creates a form to delete a PurchaseOrder entity by id.
 *
 * @param mixed $id The entity id
 *
 * @return Symfony\Component\Form\Form The form
 */
private function createDeleteForm($id)
{
    return $this->createFormBuilder(array('id' => $id))
        ->add('id', 'hidden')
        ->getForm()
    ;
}
} 
```

服务.yml

```
services:
   cj.businessbundle.purchase:
      class: CJ\BusinessBundle\Controller\PurchaseController 
```

控制器内部的访问方法[不是购买控制器]

```
$purchase = $this->get('cj.businessbundle.purchase');
$purchase->newAction(); 
```

得到错误：

> FatalErrorException：错误：在 /home/cj/public_html/Symfony/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php 第 163 行中的非对象上调用成员函数 get()

新的 Action 确实存在

我认为我在定义服务时做错了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T10:21:56.040

当您打电话时，`$this->get("your.service")`您要求依赖注入容器加载该服务。您要求它加载您的控制器之一，该控制器扩展了 Symfony 的控制器类，该控制器类扩展了[ContainerAware](http://api.symfony.com/2.0/Symfony/Component/DependencyInjection/ContainerAware.html)。您收到的错误是因为加载的控制器可能正在尝试使用`$this->container->get("request")`但未`$this->container`设置访问“请求”之类的服务。

ContainerAware 有一个方法`setContainer`，您可以在设置服务时使用`calls:`services.yml 中的参数实际运行该方法：

```
services:
   cj.businessbundle.purchase:
      class: CJ\BusinessBundle\Controller\PurchaseController
      calls:
        - [setContainer, [@service_container]] 
```

Symfony2 为加载的控制器（PurchaseOrderController）执行此操作，但如果您只是自己加载控制器类，则不会。

从 PurchaseController 中提取 newAction（或所需的逻辑）作为服务本身而不是将整个控制器设置为服务会更好。这样，Purchase 和 PurchaseOrder 控制器都可以调用服务来创建新的购买（或任何 newAction 所做的），并且您不会每次都加载整个控制器。查看[FOS 用户捆绑用户管理器](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Model/UserManager.php)以获取一个很好的服务示例或[http://symfony.com/doc/2.1/book/service_container.html#what-is-a-service](http://symfony.com/doc/2.1/book/service_container.html#what-is-a-service)

# java - 编译JNI的问题

> ID：15829185
> 
> 赞同：3
> 
> 时间：2013-04-05T08:26:09.390
> 
> 标签：java, c, linux, gcc, java-native-interface

我通过引用已经使用 JNI 生成的头文件来实现以下 C 代码：

```
#include <jni.h>
#include <stdio.h>
#include "HelloWorld.h"

JNIEXPORT void JNICALL 
Java_HelloWorld_print(JNIEnv *env, jobject obj)
{
     printf("Hello World!\n");
     return;
} 
```

当我尝试使用以下方法编译它（生成so库）时：

```
cc -g -I/usr/lib/jvm/java-7-openjdk/include
-I/usr/lib/jvm/java-7-openjdk/include/linux HelloWorld.c -o libHelloWorld.so 
```

我收到了这个错误：

```
/usr/lib/gcc/i686-linux-gnu/4.6.1/../../../i386-linux-gnu/crt1.o: In function `_start':
(.text+0x18): undefined reference to `main'
collect2: ld returned 1 exit status 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:36:00.737

您必须添加[-shared](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)链接器选项

首先创建目标文件：

```
cc -c HelloWorld.c 
```

然后创建so

```
cc -shared -o libHelloWorld.so HelloWorld.o 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:38:29.140

创建so文件有2个步骤：

```
 cc -c test.c
 cc -shared test.o -o test.so 
```

查看[静态、共享动态和可加载 Linux 库](http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html)以了解详细信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-05-01T12:29:16.200

插入 -shared 标志

```
gcc -I/usr/lib/jvm/default-java/include -I/usr/lib/jvm/default-java/include/linux -o libmyhello.so -shared HelloWorld.c 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-05T08:31:42.290

您需要添加主要功能。添加

```
int main(){
 return 0;
} 
```

, 或者`int main(char *argv[], int argc)`

# node.js - 如何同步 couchdb 视图？

> ID：15829189
> 
> 赞同：1
> 
> 时间：2013-04-05T08:26:20.300
> 
> 标签：node.js, couchdb

我开始使用 nodejs 和 couchdb，我想让我的视图函数与服务器保持同步，因为我想让它们处于版本控制中。

我想过推出自己的解决方案，包括将视图与他们自己的代码哈希一起存储，但其他人一定已经创建了类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:28:07.777

您可以简单地将 CouchDB 复制与旨在仅选择设计文档的复制过滤器一起使用。

# javascript - 在此切换上需要帮助以进行少量更改

> ID：15829190
> 
> 赞同：0
> 
> 时间：2013-04-05T08:26:23.250
> 
> 标签：javascript, jquery, css, toggle

在下面的这段代码中，我只希望当我点击面板内的任何内容（面板内的 p 标签中包含的内容）时，不应该滑动面板，直到使用面板或其他地方的点击而不是面板内的子元素 p，请参阅 html如果使用了其他点击事件，则在小提琴中寻求帮助并单击尝试不应关闭面板。这个脚本是早先 praveen 先生帮助我的。

代码是

```
$(document).ready(function () {
    $("#toggle li > .panel").hide();
    $('.plusminus').html('+');

    $('#toggle li').click(function () {
        if( !$(this).children('.panel').is(":visible") ) {
            $("#toggle li > .panel").slideUp();
            $('.plusminus').html('+');
        }
        a = $(this).children(".plusminus");
        $(this).children(".panel").slideToggle('fast', function(){
            a.html($(this).is(":visible") ? '--' : '+');
        });
    });

    $("body").click(function(event){
        if ($(event.target).closest("ul").attr('id') != "toggle") {
            $("#toggle li > .panel").slideUp();
            $('.plusminus').html('+');
        }
    });
}); 
```

玩的小提琴是

[http://jsfiddle.net/praveenscience/Ss3xU/26/](http://jsfiddle.net/praveenscience/Ss3xU/26/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:39:54.033

移除`$("#toggle li > .panel").hide();`以`document load`使面板打开`load`

当您在面板内单击时，添加`$("#toggle li > .panel").click(function(event){ event.stopPropagation(); });` 将使下拉菜单不关闭

# html - 如何模拟Windows Phone浏览器？

> ID：15829191
> 
> 赞同：3
> 
> 时间：2013-04-05T08:26:26.290
> 
> 标签：html, windows-phone-7, responsive-design

我正在创建一些页面，`responsible web design`所以我遇到了一些问题。我的页面在每个桌面浏览器（更改屏幕分辨率后）和 iPhone 上都能正常工作。

但它有问题`Windows Phone`。所以我想检查有什么问题，但是当我`user agent`从手机使用自定义时，我无法在桌面浏览器上复制我的问题：

```
Mozilla/5.0 (compatible; MSIE 9.0; Windows Phone OS 7.5; Trident/5.0; 
IEMobile/9.0; NOKIA; Lumia 710) 
```

有没有`developer tool`类似于 Chrome 的模拟器（适用于 Windows Phone）？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:51:29.940

试试[这个（HTML 调试器）。](http://sgrebnov.github.com/IeMobileDebugger/)我相信它会帮助你。

# c++ - 有人可以帮我修改这段代码。我正在尝试显示棋盘格 C++ QT

> ID：15829192
> 
> 赞同：1
> 
> 时间：2013-04-05T08:26:28.473
> 
> 标签：c++, qt

我是 Qt 和 C++ 的新手。我正在尝试创建一个棋盘，其中每个方块都是一个对象。我想弄清楚的是如何让每个方形对象成为我要声明的板对象的一部分并将其显示在屏幕上。我可以在主类中使用 MyWidget.show() 在屏幕上显示一个小部件。但我想做类似 Board.show() 的事情，并让所有属于该类成员的方形对象（具有高度、宽度和颜色）显示出来。使用该代码，我尝试了没有任何显示，尽管我能够显示一个不在棋盘类中的方块。

主文件

```
#include <qtgui>
#include "square.h"
#include "board.h"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);
    //Square square;
    //square.show();
    Board board;
    board.show();
    return app.exec();
} 
```

board.h 和 board.cpp

```
#ifndef BOARD_H
#define BOARD_H

#include <QWidget>

class Board : public QWidget
{
public:
    Board();
};

#endif // BOARD_H

#include "board.h"
#include "square.h"

Board::Board()
{
    Square square;
    //square.show();
} 
```

square.h 和 square.cpp**强文本**

```
#ifndef SQUARE_H
#define SQUARE_H

#include <QWidget>

class Square : public QWidget
{
public:
    Square();

protected:
    void paintEvent(QPaintEvent *);
};

#endif // SQUARE_H

#include "square.h"
#include <QtGui>

Square::Square()
{
    QPalette palette(Square::palette());
    palette.setColor(backgroundRole(), Qt::white);
    setPalette(palette);
}

void Square::paintEvent(QPaintEvent *)
{
    QPainter painter(this);
    painter.setRenderHint(QPainter::Antialiasing);
    painter.setBrush(QBrush("#c56c00"));
    painter.drawRect(10, 15, 90, 60);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:39:47.767

Your`Square`被创建为一个自动变量（即，它的生命周期是 的构造函数的范围`Board`）。 `show()`只要事件循环可以处理小部件，就会使小部件可见，这里不是这种情况（`square`将在事件循环之前删除）。

此外，您[应该`Q_OBJECT`在从`QObject`](https://stackoverflow.com/questions/3689714/when-should-q-object-be-used). `Board`派生自`QWidget`, 派生自`QObject`。

所以，改变你的班级`Board`：

```
class Square;
class Board : public QWidget
{
Q_OBJECT
public:
    Board();
private:
    Square* square;
}; 
```

构造函数：

```
Board::Board()
{
    square = new Square();
    square->show();
} 
```

和析构函数：

```
Board::~ Board()
{
    delete square;
} 
```

注意：对我来说，`Square`上课是没用的。您可以在 中绘制一个网格`paintEvent`，`Board`它会更快，消耗更少的内存，并且更易于维护。

**编辑**：这是一个更好的方法：

```
void Board::paintEvent(QPaintEvent* pe)
{
    // Initialization
    unsigned int numCellX = 8, numCellY = 8;
    QRect wRect = rect();
    unsigned int cellSizeX = wRect.width() / numCellX;
    unsigned int cellSizeY = wRect.height() / numCellY;
    QPainter painter(this);
    painter.setRenderHint(QPainter::Antialiasing);

    // Draw the background. The whole widget is drawed.
    painter.setBrush(QColor(0,0,0)); //black
    painter.drawRect(wRect);

    // Draw the cells which are of the other color
    // Note: the grid may not fit in the whole rect, because the size of the widget
    // should be a multiple of the size of the cells. If not, a black line at the right
    // and at the bottom may appear.
    painter.setBrush(QColor(255,255,255)); //white
    for(unsigned int j = 0; j < numCellY; j++)
        for(unsigned int i = j % 2; i < numCellX; i+=2)
            painter.drawRect(i * cellSizeX, j * cellSizeY, cellSizeX, cellSizeY);
} 
```

# asp.net - 评论框与 facebook 相同，但在 asp.net 中

> ID：15829194
> 
> 赞同：0
> 
> 时间：2013-04-05T08:26:40.523
> 
> 标签：asp.net

我创建了一个 Web 应用程序，并创建了一个页面来显示与 Facebook 相同的帖子，但我的评论框在 asp.net 中不起作用。

```
[WebMethod]
public static string LoadImages( int Skip, int Take ) {
    // string image;
    System.Threading.Thread.Sleep( 2000 );
    StringBuilder GetImages = new StringBuilder();
    // string Imagespath = HttpContext.Current.Server.MapPath("~/networking/image/");
    // string SitePath = HttpContext.Current.Server.MapPath("~/networking");
    //var Files = (from file in Directory.GetFiles(Imagespath) select new { image = file.Replace(SitePath, "") }).Skip(Skip).Take(Take);
    int records = 0;
    var Files = ProductDataManager.GetRequiredPost( 1, 100, ref records ).Skip( Skip ).Take( Take );

    foreach( var file in Files ) {
        string postimage = null;
        if( file.PostImage != "" ) {
            postimage = file.PostImage.Replace( "\\", "/" ).Substring( 13 );
        }
        string image = null;
        if( file.PostImage != "" ) {
            image = file.ImageUrl.Replace( "\\", "/" ).Substring( 13 );
        }
        GetImages.AppendFormat( String.Format( @"                 
                            <div style='clear: both;'>
                                <div style='float: left;'>
                                    <img src='{0}' id='userimage1' height='50' width='50' runat='server'/>
                                </div>
                                <div style='float: left; margin-left: 8px; font-family: Arial; font-size: 14px; font-weight: bold;
                                    color: Navy;'>
                                    <span id='ctl00_ContentPlaceHolder1_gdvgrid_ctl06_username1'>{1}</span>
                                </div>
                                <div style='float: right;'>

                                </div>
                            </div>
                            <div style='margin-left: 70px; clear: both;'>
                                <div style='clear: both; color: Black; font-family: Arial; width: 400px;'>
                                    <span id='txtsub1' style='display:inline-block;width:400px;font-family: Arial; font-size: 15px; color: #64635d;'>{2}</span>
                                </div>
                                <div style='clear: both; font-family: Arial;'>
                                    <img src='{3}' width='400'/>
                                </div>
                                <div style='color: Black; width: 400px; text-align: justify'>
                                    <span style='font-family: Arial;
                                        font-size: 12px; color: #64635d; text-align: justify; line-height: 15px;'>{4}</span>
                                </div>

        <div style='float: left; margin-top: 10px; margin-right: 10px;'>
                <a onclick='$find(&#39;SendMail3&#39;).show();return false;' id='ctl00_ContentPlaceHolder1_gdvgrid_ctl{6}_btnsendenq' href='href='javascript:__doPostBack(&#39;ctl00$ContentPlaceHolder1$gdvgrid$ctl{7}$btnsendenq&#39;,&#39;&#39;)' style='font-size: 12px; color: #6d84b4;' tabindex='-1'>Send Enquiry</a>
        </div>
        <div style='float: left; margin-top: 10px; margin-right: 10px;'>
            <a onclick='$find(&#39;Commentdialog&#39;).show();return false;' id='ctl00_ContentPlaceHolder1_gdvgrid_ctl{8}_btnsendenq' href='javascript:__doPostBack(&#39;ctl00$ContentPlaceHolder1$gdvgrid$ctl{9}$lnkcomment&#39;,&#39;&#39;)' style='font-size: 12px; color: #6d84b4;' tabindex='-1'>Comment</a>
                                </div>
<div style='display: none'>
            <input type='submit' name='ctl00$ContentPlaceHolder1$gdvgrid$ctl{10}$btncomment' value='Comment' id='ctl00_ContentPlaceHolder1_gdvgrid_ctl{11}_btncomment' style='width:100px;'>

</div>

<div style='clear: both; color: #c0c0c0; font-size: 12px; padding-top: 10px; font-weight: bold;'>
                                    <span id='ctl00_ContentPlaceHolder1_gdvgrid_ctl06_lbldate'>{5}</span>
                                </div>
                            </div>

                            <div style='border-bottom: 2px solid gray; padding-bottom: 10px;'>
                            </div>

                            ", image, file.CompanyIdentity, file.PostTitle, postimage, file.PostDescription, file.CreateDate, file.Userid, file.Userid, file.ScrapID, file.ScrapID, file.ScrapID, file.ScrapID ) );
    }
    return GetImages.ToString();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:34:37.160

You can integrate facebook comment box instead of implement your own.

[Facebook Comments Box](http://developers.facebook.com/docs/reference/plugins/comments/): Comments Box is a social plugin that enables user commenting on your site. Features include moderation tools and distribution.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T10:45:31.490

您可以使用 asp.net 转发器来显示评论并使用 SQL 来存储评论。算法 -> 获取名称和注释 ->> 在 sql 数据库表中插入数据 ->> 将数据绑定到 asp.net 转发器。如何使用 asp 中继器：[http](http://www.w3schools.com/aspnet/aspnet_repeater.asp) ://www.w3schools.com/aspnet/aspnet_repeater.asp 对于 facebook 样式，使用 css。

# mysql - 日期间隔和 MySQL

> ID：15829195
> 
> 赞同：-2
> 
> 时间：2013-04-05T08:26:41.577
> 
> 标签：mysql, date, intervals

**你好！**

是否可以在 MySQL 中排除日期间隔。假设：我选择了两个日期

```
start_date = "2013-04-02" 
```

和

```
end_date = "2013-04-12" 
```

该表`reservation`包含每个项目的两列（项目可能没有唯一的 id，因为单个项目可以进行许多预订）：`reserved_from`和`reserved_until`（类型 = 日期）。

假设对于第一项

```
reserved_from = "2013-04-05" 
```

和

```
reserved_until = "2013-04-07 
```

是否可以选择开始日期和结束日期之间未保留的所有项目？多重预订和特殊情况（`reserved_from < "start_date"`等）呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:38:02.090

尝试：

```
Not between start_date and end_date 
```

它将选择两者之间不存在日期的所有项目。

# iphone - 在 UIPageViewController 中禁用/启用滚动

> ID：15829197
> 
> 赞同：9
> 
> 时间：2013-04-05T08:27:03.833
> 
> 标签：iphone, ios, objective-c

我有一个`viewController`继承自`UIPageViewController`( `@interface PageScrollViewController : UIPageViewController`) 现在我想知道如何启用和禁用滚动`UIPageViewController`？当使用 a`UIScrollView`你会做`setScrollEnabled:NO`并且 `self.view.userInteractionEnabled = NO;`不是一个选项，因为这会阻止整个`UIView`而不是仅仅滚动。

**编辑** 这是在`PageScrollViewController : UIPageViewController`课堂上：

```
if ([[notification name] isEqualToString:@"NotificationDisable"]){
    NSLog (@"Successfully received the disable notification!");
    for (UIGestureRecognizer *recognizer in self.gestureRecognizers) {
        recognizer.enabled = NO;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-06-17T08:22:40.770

或者你可以在你的 PagingVC 中强制禁用分页：

```
self.delegate = nil;
self.dataSource = nil; 
```

并再次启用它：

```
self.delegate = self;
self.dataSource = self; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-05T08:34:29.670

尝试循环`gestureRecognizers`并`UIPageViewController`禁用/启用它们：

```
for (UIGestureRecognizer *recognizer in pageViewController.gestureRecognizers) {        
        recognizer.enabled = NO;
} 
```

注意：正如在[这个 SO post](https://stackoverflow.com/questions/13103613/uipageviewcontroller-returns-no-gesture-recognizers-in-ios-6)中发现的那样，这种方法只适用于`UIPageViewControllerTransitionStylePageCurl`. 您可能想尝试[此解决方案](https://stackoverflow.com/a/13293661/184245)（尽管它似乎有点 hacky）。

```
 for recognizer in pageViewController.gestureRecognizers {
    recognizer.isEnabled = false
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-13T16:06:42.380

我做了以下事情（我有一个持有 UIPageViewController 的控制器）。

```
self.pageController.view.userInteractionEnabled = NO; 
```

当您想要启用滑动或滚动时，只需启用用户交互即可。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-18T08:51:05.210

设置 UIPageViewController`dataSource`属性以`nil`防止滚动，因为页面视图控制器无法确定要转换到的“下一个”视图控制器。

```
self.dataSource = nil // scrolling disabled

self.dataSource = self // scrolling enabled 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-09-15T07:44:11.147

`UIPageViewController`内部管理`UIScrollView`以完成工作。我们可以找出`UIScrollView`并更新它的`isScrollEnabled`属性。

```
let view = myPageViewController.view
for subview in view.subviews {
    if let scrollview = subview as? UIScrollView {
        scrollview.isScrollEnabled = false
        break
    }
} 
```

或者使用这个`UIPageViewController`扩展。

```
extension UIPageViewController {

    var scrollView: UIScrollView {
        for subview in view.subviews {
            if let scrollview = subview as? UIScrollView {
                return scrollview
            }
        }
        fatalError()
    }

    var isScrollEnabled: Bool {
        get {
            return scrollView.isScrollEnabled
        }
        set {
            scrollView.isScrollEnabled = newValue
        }
    }
} 
```

# jquery - JQuery“出现”事件

> ID：15829205
> 
> 赞同：13
> 
> 时间：2013-04-05T08:27:48.250
> 
> 标签：jquery

在调用 $(document).ready 之后，我的应用程序向 DOM 添加了一些元素。我正在使用 jQuery 1.9.0

以下示例有效。

```
$(document).on("click", "#box-descr", function(evt) {
    console.log("I showed up");
}); 
```

但是，我想在元素出现在屏幕上时执行该功能。我在这里看不到任何用于此目的的事件[http://api.jquery.com/category/events/](http://api.jquery.com/category/events/)

基本上它是一个单页应用程序，因此仅调用一次文档就绪，但元素在用户与 UI 交互时进出屏幕。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-05T08:31:33.987

可能是你想要的`.ready()`功能：

```
$("#box-descr").ready(function(){
   console.log("I showed up");   
}); 
```

或者，如果您将其淡入：

```
$("#box-descr").fadeIn(1000, function(){
   console.log("I showed up");   
}); 
```

* * *

更新：正如**@Jeff Tian**的评论——

您需要将事件委托给最近的静态父级或`document`类似的：

```
$(document).on("ready", "#box-descr", function(){
   console.log("I showed up");   
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-14T17:05:05.940

事件很好，但由于没有用于外观的本机事件，事件需要知道何时添加项目，以便可以手动触发事件。您可以使用轮询来测试某物的外观并在它出现时执行操作。这对于添加到您无法控制的内容（例如来自用户输入、ajax 或其他程序）的内容非常有用。

```
setInterval(function() {
    $('.my-element-class:not(.appeared)')
        .addClass('appeared')
        .each(function() {
            console.log("here I am!")
        });
}, 250); 
```

这将每秒按类名（或您提供的任何其他选择器标准）检查元素的外观 4 次，并在出现新项目时运行代码。一旦看到一个项目，就会添加 .appeared 类以防止再次检测到该实例。如果您只想测试一种外观，您可以简化并在检测后关闭轮询。

```
var testAppearTmr = setInterval(function() {
    if ($('.my-element-class').length) {
        clearInterval(testAppearTmr);
        console.log("here I am!")
    }
}, 250); 
```

jQuery[出现](https://github.com/morr/jquery.appear)插件是围绕这些技术构建的，并且具有更多选项，例如测试项目是否在视图区域中，但如果您要做的只是测试添加到 dom 的一些项目，上面的代码是比插件更省钱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T08:37:43.463

我认为您是在问是否可以在将目标元素添加到 DOM 时触发事件。如果这不是你想要的，请告诉我。

```
$(document).on('click', '#box-descr', function(evt) {
    console.log("I showed up");
});

// Later in your code you add the element to the DOM
$('<div />', { id : 'box-descr' }).appendTo('body');

// Then trigger the click event for the added element 
$('#box-descr').trigger('click'); 
```

希望这就是你要找的

您可以将其缩短为

```
$('<div />', { id : 'box-descr' }).appendTo('body').trigger('click'); 
```

# php - 如何使用带有数据库 mysql 的 javascript 创建数组？

> ID：15829206
> 
> 赞同：0
> 
> 时间：2013-04-05T08:27:51.857
> 
> 标签：php, javascript, mysql, database

任何人都可以帮助我解决这个问题提前谢谢你这是一个谷歌图表我需要动态更改任务和每天的小时数，所以基本上需要一个可以连接到数据库并将它们放在数组中的数据库我该怎么做.

```
 <html>
      <head>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
          google.load("visualization", "1", {packages:["corechart"]});
          google.setOnLoadCallback(drawChart);
          function drawChart() {
            var data = google.visualization.arrayToDataTable([
              ['Task', 'Hours per Day'],
              ['Work',     11],
              ['Eat',      2],
              ['Commute',  2],
              ['Watch TV', 2],
              ['Sleep',    7]
            ]);

            var options = {
              title: 'My Daily Activities'
            };

            var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
            chart.draw(data, options);
          }
        </script>
      </head>
      <body>
        <div id="chart_div" style="width: 900px; height: 500px;"></div>
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:42:42.150

首先你需要设计一个数据库结构。例如：

```
** Activities ** 
| ID |   Task   | Hours  | 
| 1  |   Work   |   11   |
| 2  |   Eat    |   2    |
| 3  | Cummute  |   2    |
| 4  | Watch TV |   2    | 
| 5  |  Sleep   |   7    | 
```

现在您需要建立数据库连接。（最简单的方法，有更好的方法可以做到这一点，这只是一个例子）

```
<?php
 $link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
 if (!$link) {
     die('Not connected : ' . mysql_error());
 } 

 // make foo the current db
 $db_selected = mysql_select_db('your_db_name', $link);
 if (!$db_selected) {
     die ('Can\'t use database : ' . mysql_error());
 }
?> 
```

您需要动态构建此代码：

```
 var data = google.visualization.arrayToDataTable([
      ['Task', 'Hours per Day'],
      ['Work',     11],
      ['Eat',      2],
      ['Commute',  2],
      ['Watch TV', 2],
      ['Sleep',    7]
    ]); 
```

在这个例子中，标题是静态的

```
 var data = google.visualization.arrayToDataTable([
      ['Task', 'Hours per Day'],
      <?php
         $query = mysql_query("SELECT * FROM Activities");
         $count = mysql_row_count($query);
         $i = 0;
         $last = ',';
         while ($row = mysql_fetch_array($result)) {
          $i++;
          if($i == $count) { $last = ''; )
          echo "['". $row['Task'] .", ". $row['Hours'] ." '] " . $last
         }
       ?>
    ]); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T08:34:56.703

尝试以下操作：

1.  使用 mysqli_connect 建立数据库连接并查询数据库以获取结果集
2.  如下所述分配 PHP 变量：

    ```
     ['Task', 'Hours per Day'],
              ['Work',     <?php echo $work; ?>],
              ['Eat',      <?php echo $eat; ?>],
              ['Commute',  <?php echo $commute; ?>],
              ['Watch TV', <?php echo $watchTv; ?>],
              ['Sleep',    <?php echo $sleep; ?>] 
    ```

变量：

```
$work
$eat
$commute
$watchTv
$sleep 
```

是包含来自 DB 的相应值的 PHP 变量

我希望这会有所帮助。

# javascript - Javascript/JQuery 制作我定义的所有 DOM 元素的多维数组？

> ID：15829215
> 
> 赞同：1
> 
> 时间：2013-04-05T08:28:33.530
> 
> 标签：javascript, jquery, arrays, dom, multidimensional-array

可以说`DOM`我的表格上有以下内容：

```
<body>
    <input id="input_1" class="post" type="text" value="abc" />
    <input id="input_2" class="xxxx" type="text" value="xyz" /> <!--TO IGNORE-->
    <input id="input_3" class="post" type="checkbox" checked="checked" />
    <input id="input_4" class="post" type="radio" checked="checked" />
    <select id="input_5" class="post">
        <option value="1">One</option>
        <option value="2" selected="selected">Two</option>
    </select>
    <input id="input_6" class="xxxx" type="checkbox" /> <!--TO IGNORE-->
</body> 
```

如何获得所有`class="post"`元素的值数组？
所以 an`Multidimentional Array`将是这样的方式：

```
POST_ELEMENTS[0]["input_1"] = "abc";
POST_ELEMENTS[1]["input_3"] = 1;
POST_ELEMENTS[2]["input_4"] = 1;
POST_ELEMENTS[3]["input_5"] = "two"; 
```

*   请问如何构建这种`Array`属于所有特定类的？`class="post"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:32:39.340

You don't need a 2 dimension array, the index of an array will indicate `0`, `1`, `2`, etc.

## Array-like jQuery object

You can get an array-like object which allows you to access matching elements already.

```
var posts = $('.post');

alert(posts[0].id); // input_1
alert(posts[0].value); // abc 
```

## Array-like pure JS lookup

You can also use the pure JavaScript method `getElementsByClassName` to grab all the elements (though jQuery functions won't work without casting `$()`)

```
var posts = document.getElementsByClassName('post');

alert(posts[0].id); // input_1
alert(posts[0].value); // abc 
```

## Array

Alernatively to construct an actual array (not an array-like object) you can do this:

```
var posts = [];
$('.post').each(function () {
    posts.push(this);
});

alert(posts[0].id); // input_1
alert(posts[0].value); // abc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:39:42.373

您可以获取所有节点，`getElementsByClassName()`然后将它们映射为您想要的格式：

```
var POST_ELEMENTS = {};
[].forEach.call(
    document.getElementsByClassName('post'), 
    function(item) {
        POST_ELEMENTS[item.id] = item.value;
    }
); 
```

[**演示**](http://jsbin.com/oyosoh/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T08:30:59.700

```
var posts = {}

$('.post').each(function(v,i){
    posts[this.id] = this.value
}) 
```

将返回一维数组 { 'input_1': 1, 'input_2' : 2 }

```
var posts = []

$('.post').each(function(v,i){
    var obj = {}
    obj[this.id] = this.value
    posts.push( obj)
}) 
```

将创建多维数组

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T09:00:51.590

```
var obj=[];
  console.log(obj);
$('.post').each(function(key,value)
                {  obj[key]={};
                obj[key][$(value).attr('id')]=$(value).attr('value');               

              }); 
```

这是我的[小提琴](http://jsfiddle.net/prabhu5013/ancmX/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T08:32:28.297

I don't see any reason for there being 2 dimensions - you only need one here as far as I can see:

```
var posts = {};
$('.port').each(function() {
    posts[this.id] = this.value;
}); 
```

with the result being an object of key/value pairs:

```
posts = {
    'input_1': abc',
    ...
} 
```

# html - title="tooltip description" 的自定义 IE8 工具提示

> ID：15829221
> 
> 赞同：0
> 
> 时间：2013-04-05T08:28:51.370
> 
> 标签：html, css, internet-explorer-8, tooltip

有没有可能使用 css 在 IE8 上设置 title="title description" 的样式？不使用jQuery？就像是：

html

```
<a href="#" title="tooltip description">this must be a toltip</a> 
```

css

```
 a[title]:hover{
        background: lime;
        border:1px solid #eaeaea;
        opacity: .6; 
        position: absolute;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:29:38.783

不，标题弹出窗口由浏览器管理。它的内容甚至不会被解释为 HTML，您也无法设置它的样式。

如果你想要一个样式化的弹出窗口，你必须使用一些 javascript 自己生成它。在这个[相关问题](https://stackoverflow.com/questions/15027301/change-font-size-of-td-title-attribute)中，我展示了如何简单地做到这一点（这里使用 jQuery，但你可以适应 vanilla js）。

**[示范](http://jsbin.com/axinaz/2/)**

# servicestack - ServiceStack 和 Swagger - ApiMember 作为路径和查询

> ID：15829222
> 
> 赞同：4
> 
> 时间：2013-04-05T08:28:53.083
> 
> 标签：servicestack, swagger

我正在寻找有关 ServiceStack 中的 Swagger 集成的以下问题的解决方案。

我的 RequestObject 具有必需的属性 ID。我想提供以下路线：

```
[Route("/User/byId/{Id}", "GET", Summary = @"test", Notes = "test")]
[Route("/User/byId", "GET", Summary = @"test", Notes = "test")] 
```

基本上，这应该留下在查询字符串中提供 Id 或作为 ServiceConsumer 的路径的选择。

Swagger UI 正确显示了 2 条路由，但无法对两种方式进行测试，因为 API-Member 属性不允许将其指定为 ParameterType 'path' 或 'query'。

来源：[https ://gist.github.com/JohannesFerner/5317496](https://gist.github.com/JohannesFerner/5317496)

有什么方法可以提供 API 成员规范，特别是针对相应的 Route，或者将其定义为有效的路径和查询？

像这样：

```
[ApiMember(Name = "Id", ParameterType="path,query", Description = "User Id",  DataType = "int", IsRequired = true)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T03:24:11.563

在这种情况下，我发现创建两个单独的 DTO 类以方便在 Swagger 中正确记录每条路线是最容易的。DTO 类可能具有相同的属性（`Id`在这种情况下，看起来像），以及不同的`Route`和`ApiMember`属性。您将有两个服务方法，每个 DTO 一个，它们可以调用一个共享方法，传递`Id`属性的值，这样就不会重复大部分实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-24T02:37:24.907

您可以多次提供 ApiMember。所以扩展你的例子：

```
[Route("/User/byId/{Id}", "GET", Summary = @"test", Notes = "test")]
[Route("/User/byId", "GET", Summary = @"test", Notes = "test")]
public class TestRoute
{
    [ApiMember(Name = "Id", ParameterType="path", Description = "User Id",  DataType = "int", IsRequired = false)]
    [ApiMember(Name = "Id", ParameterType="query", Description = "User Id",  DataType = "int", IsRequired = false)]
    public int Id { get; set; }
} 
```

这当然会导致两条路线的规范，都接受 id 查询参数或路径参数。

如果您使用 swagger-codegen，不幸的是，这将创建一个如下所示的调用：

```
public GetTestId(int Id1, int Id2 = null) 
```

# c - 用于大型密集矩阵乘法的循环平铺/阻塞

> ID：15829223
> 
> 赞同：18
> 
> 时间：2013-04-05T08:28:54.730
> 
> 标签：c, performance, openmp, sse, matrix-multiplication

我想知道是否有人可以向我展示如何有效地使用循环平铺/循环阻塞来进行大型密集矩阵乘法。我正在用 1000x1000 矩阵做***C = AB 。***我已经按照 Wikipedia 上的示例进行循环平铺，但使用平铺得到的结果比不使用时更差。

[http://en.wikipedia.org/wiki/Loop_tiling](http://en.wikipedia.org/wiki/Loop_tiling)

[http://software.intel.com/en-us/articles/how-to-use-loop-blocking-to-optimize-memory-use-on-32-bit-intel-architecture](http://software.intel.com/en-us/articles/how-to-use-loop-blocking-to-optimize-memory-use-on-32-bit-intel-architecture)

我在下面提供了一些代码。由于缓存未命中，天真的方法非常慢。transpose 方法在缓冲区中创建***B的转置。***此方法给出最快的结果（矩阵乘法为 O(n^3)，转置为 O(n^2)，因此转置速度至少快 1000 倍）。没有阻塞的wiki方法也很快，不需要缓冲区。阻塞方法较慢。阻塞的另一个问题是它必须多次更新块。这对线程/OpenMP 来说是一个挑战，因为如果不小心，它可能会导致竞争条件。

我应该指出，使用 AVX 和转置方法的修改，我得到的结果比 Eigen 更快。但是，我使用 SSE 的结果比 Eigen 慢一些，所以我认为我可以更好地使用缓存。

编辑：我想我知道我想做什么。它来自 1969 年的 Cannon 算法。
[http://en.wikipedia.org/wiki/Matrix_multiplication#Communication-avoiding_and_distributed_algorithms](http://en.wikipedia.org/wiki/Matrix_multiplication#Communication-avoiding_and_distributed_algorithms)

***我需要进行块矩阵乘法并让每个线程处理C***而不是***A***和***B***的子矩阵。例如，如果我将矩阵分成四个块。我会做：

```
+-+      +-+     +-+      +-+   +-+      +-+
|          |     |          |   |          |
| C1    C2 |     | A1    A2 |   | B1    B2 |
|          |  =  |          | x |          |
| C3    C4 |     | A3    A4 |   | B3    B4 |
|          |     |          |   |          |
+-+      +-+     +-+      +-+   +-+      +-+

thread 1: C1 = A1B1 + A2B3
thread 2: C2 = A1B2 + A2B4
thread 3: C3 = A3B1 + A4B3
thread 4: C4 = A3B2 + A4B4 
```

这消除了竞争条件。我得考虑一下。

```
void matrix_mult_naive(const float*A , const float* B, float* C, const int N, const int M, const int K) {
    #pragma omp parallel for
    for(int i=0; i<N; i++) {
        for(int j=0; j<K; j++) {
            float tmp = 0;
            for(int l=0; l<M; l++) {
                tmp += A[M*i+l]*B[K*l+j];
            }
            C[K*i + j] = tmp;
        }
    }
}
void matrix_mult_transpose(const float*A , const float* B, float* C, const int N, const int M, const int K) {
    float *B2 = (float*)aligned_malloc(M*K*sizeof(float), 32);
    transpose(B, B2, M, K, 1);
    #pragma omp parallel for
    for(int i=0; i<N; i++) {
        for(int j=0; j<K; j++) {
            float tmp = 0;
            for(int l=0; l<M; l++) {
                tmp += A[M*i+l]*B2[M*j+l];
            }
            C[K*i + j] = tmp;
        }
    }
    aligned_free(B2);
}

void matrix_mult_wiki(const float*A , const float* B, float* C, const int N, const int M, const int K) {
    for(int i=0; i<N; i++) {
        for(int j=0; j<K; j++) {
            C[K*i + j] = 0;
        }  
    }
    #pragma omp parallel for
    for(int i=0; i<N; i++) {
        for(int l=0; l<M; l++) {
            float a  = A[M*i+l];
            for(int j=0; j<K; j++) {
                C[K*i + j] += a*B[K*l+j];
            }
        }
    }
}

void matrix_mult_wiki_block(const float*A , const float* B, float* C, const int N, const int M, const int K) {
   const int block_size = 8;  //I have tried several different block sizes
   for(int i=0; i<N; i++) {
       for(int j=0; j<K; j++) {
           C[K*i + j] = 0;
       }
    }
    for(int l2=0; l2<M; l2+=block_size) {
        for(int j2=0; j2<K; j2+=block_size) {
        #pragma omp parallel for
            for(int i=0; i<N; i++) {
                for(int l=l2; l<min(M, l2+block_size); l++) {
                    for(int j=j2; j<min(K, j2+block_size); j++) {
                        C[K*i + j] += A[M*i+l]*B[K*l+j];
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-12T04:24:46.353

我得到的最好结果是再添加一个`for`循环来阻止你的`N`，并重新排列循环。我还提升了循环不变代码，但编译器的优化器应该希望自动执行此操作。块大小应该是缓存行大小除以`sizeof(float)`. 这比转置方法快了约 50%。

如果您只需要选择 AVX 或阻塞之一，使用 AVX 扩展 ( `vfmadd###ps`and `haddps`) 仍然会快得多。鉴于您已经在测试块大小是否是`64 / sizeof(float)`== 16 个浮点数 == 两个 256 位 AVX 寄存器的倍数，因此使用两者是最好且直接的添加。

*   转置：1,816,522 个刻度
*   平铺：892,431（快 51%）
*   AVX+平铺：230,512（快 87%）

平铺：

```
void matrix_mult_wiki_block(const float*A , const float* B, float* C,
                            const int N, const int M, const int K) {
    const int block_size = 64 / sizeof(float); // 64 = common cache line size
    for(int i=0; i<N; i++) {
        for(int j=0; j<K; j++) {
            C[K*i + j] = 0;
        }
    }
    for (int i0 = 0; i0 < N; i0 += block_size) {
        int imax = i0 + block_size > N ? N : i0 + block_size;

        for (int j0 = 0; j0 < M; j0 += block_size) {
            int jmax = j0 + block_size > M ? M : j0 + block_size;

            for (int k0 = 0; k0 < K; k0 += block_size) {
                int kmax = k0 + block_size > K ? K : k0 + block_size;

                for (int j1 = j0; j1 < jmax; ++j1) {
                    int sj = M * j1;

                    for (int i1 = i0; i1 < imax; ++i1) {
                        int mi = M * i1;
                        int ki = K * i1;
                        int kij = ki + j1;

                        for (int k1 = k0; k1 < kmax; ++k1) {
                            C[kij] += A[mi + k1] * B[sj + k1];
                        }
                    }
                }
            }
        }
    }
} 
```

* * *

至于 Cannon 参考，[SUMMA 算法](http://www.netlib.org/lapack/lawnspdf/lawn96.pdf)是一个更好的算法。

* * *

如果其他人正在优化高瘦乘法（{~1e9 x 50} x {50 x 50}，我如何在这里结束），转置方法的性能几乎与*n* = 18 的阻塞方法相同（浮动）。*n* =18 是一种病态的情况（比 17 或 19 差得多），我不太了解导致这种情况的缓存访问模式。所有较大的*n*都通过阻塞方法得到改善。

# c# - 在 MonoTouch 中的视图控制器（缓存数据）之间传递数据的最佳方式

> ID：15829226
> 
> 赞同：4
> 
> 时间：2013-04-05T08:29:00.780
> 
> 标签：c#, ios, coding-style, xamarin.ios, xamarin

所以我重写了一个我之前用objective-c编写的应用程序。在objective-c中，我会将数据（5个数组）存储在单独的NSUserdefaults中，然后在新的ViewController中调用它们。

自从我开始使用 MonoTouch 编程以来，这感觉有点不对劲。我现在也为此使用共享代码并创建了一个获取数据的类。让我解释一下我的应用程序的流程是如何工作的：

1.  用户在文本字段中输入一个数字。
2.  现在这个数字被发送到将获取数据并过滤它的类。完成的将返回 5 个数组/列表。
3.  现在我必须以某种方式保存或传递数据并推送到下一个 ViewController，数据将显示在 Labels 中。

那么解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-07T16:20:22.683

子类化 ViewController，在它的数据构造函数中添加一些新参数，以便在显示数据时将数据传递给控制器​​。

```
public class MyViewController : UIViewController
{
    private MyData _myData;

    public MyViewController(MyData myData)
    {
        _myData = myData;
    }
} 
```

然后使用它：

（假设我们已经在另一个具有 NavigationController 的视图控制器中）：

```
var myViewController = new MyViewController(myData);
this.NavigationController.PushViewController(myViewController, true); 
```

或（作为“模态”）

```
var myViewController = new MyViewController(myData);
this.PresentViewController(myViewController, true); 
```

# javascript - 用 javascript 解析外部 XML (rss)？

> ID：15829238
> 
> 赞同：0
> 
> 时间：2013-04-05T08:29:46.537
> 
> 标签：javascript, jquery, xml, rss

我想在没有 PHP 的情况下解析这个 RSS：

```
<rss version="2.0">
  <channel>
    <item>
       <title>Test</title>
       <link>http://www.test.com</link>
       <image>
          <url>http://foo.bar/test.jpg</url>
       </image>
       <description>
       <![CDATA[Description text here!<br><a href="http://www.test.se" target="_blank" rel="external" data-ajax="false">Link!</a></div>]]>
       </description>
    </item>
  </channel>
</rss> 
```

我可以在没有 PHP 的情况下做到这一点吗？我是 jQuery/javascript 的新手 **。XML 在这里：** [http ://hundkartan.se/karta/kartdata/cron_webbutiker_mob.xml](http://hundkartan.se/karta/kartdata/cron_webbutiker_mob.xml)

我将在 phonegap 中使用它，所以它是一个外部提要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:44:47.483

我的建议是将 json 与 javascript 一起使用。[您可以使用一些外部脚本（如XML2JSON](http://www.thomasfrank.se/xml_to_json.html) ）将 XML 转换为 json 文件。

javascript 原生支持 JSON，因此访问成员非常简单。例如，要获得所有`link`你可以简单地做的事情：

```
<head>
    <script type="text/javascript" src="xml2json.js"></script>
    ...
</head>
...

<body> 
    <script>
    var json = xml2json.parser(XML_file);
    var channel = json.rss.channel;
    var links = [];
    for(var i = 0; i < channel.item.length; i++)
        links.push(channel.item[i].link);
    ...
    </script>
    ...
</body> 
```

# blogger - 在 Blogger 中，使用带有特定帖子的 linkwithin

> ID：15829239
> 
> 赞同：2
> 
> 时间：2013-04-05T08:29:58.937
> 
> 标签：blogger, labels

我只想在入口页面（项目）中为标签类型显示 LinkWithin 小部件。

我试过这段代码来完成它，但它不起作用。

```
<b:widget id='HTML7' locked='false' title='LinkWithin' type='HTML'>
    <b:includable id='main'>
        <b:if cond='data:blog.pageType == "item"'>
            <b:loop values='data:post.labels' var='label'>
                <b:if cond='label.name == "films"'>
                    <data:content/>
                </b:if>
            </b:loop>
        </b:if>
    </b:includable>
</b:widget> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:22:21.280

**更新的答案（第二次尝试）：**

之前的答案是使用小部件，当我们在那里循环标签时，我们得到了博客的所有可用标签，但我们想要帖子的内容。

所以我将代码移动到模板中的不同位置，现在它似乎可以正常工作了。

在模板中找到`<data:postLabelsLabel/>`（在我的模板中下降了 80%）并在`</div>`包含此标记的结束后复制以下代码：

```
<b:if cond='data:blog.pageType == &quot;item&quot;'>
   <ul>
    <b:loop values='data:post.labels' var='label'>
      <b:if cond='data:label.name == &quot;Películas&quot;'>
        <li>
          <data:content/>
        </li>
      </b:if>
    </b:loop>
  </ul>
</b:if> 
```

同样，您需要替换为在**Dashboard > Layout > LinksWithin Gadget**`<data:content/>`中找到的 HTML 内容。

 **您还可以从上一个答案中删除该 LinksWithin。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T16:30:45.867

尝试在星号之间添加代码

```
<b:loop values='data:post.labels' var='label'>
**<b:if cond='data:label.isLast'>**
   <b:if cond='label.name == "films"'>
     <data:content/>
   </b:if>
</b:if>
</b:loop> 
```

我得到了我的工作。**

# android - State_pressed 改变视图的颜色

> ID：15829240
> 
> 赞同：0
> 
> 时间：2013-04-05T08:30:05.450
> 
> 标签：android

我有这个xml 文件，它作为背景元素`selector`应用于 a ：`RelativeLayout`

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true">
        <shape>
            <solid
                android:color="#449def" />
            <stroke
                android:width="1dp"
                android:color="#2f6699" />
            <corners
                android:radius="3dp" />
            <padding
                android:left="10dp"
                android:top="10dp"
                android:right="10dp"
                android:bottom="10dp" />
        </shape>
    </item>

     <item android:state_pressed="false">
        <shape>
            <gradient
                android:startColor="#f3ae1b"
                android:endColor="#bb6008"
                android:angle="270" />
            <stroke
                android:width="1dp"
                android:color="#bb6008" />
            <corners
                android:radius="10dp" />
            <padding
                android:left="0dp"
                android:top="10dp"
                android:right="0dp"
                android:bottom="10dp" />
        </shape>
    </item>
</selector> 
```

我的问题是：为什么当状态改变时这个布局的颜色没有改变？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:33:38.907

您必须使布局可点击。添加：

```
android:clickable="true" 
```

到您的 RelativeLayout 定义

# layout - Yii 为布局创建 BaseController

> ID：15829251
> 
> 赞同：0
> 
> 时间：2013-04-05T08:30:23.650
> 
> 标签：layout, yii, controller

我正在阅读“**如何在应用程序中实现多个页面布局”的**[链接](http://www.yiiframework.com/wiki/28/#hh1)很容易，直到它说：要对所有布局使用控制器，您最好在 protected/components/BaseController.php 中创建**BaseController** ，这很容易，我使用以下内容创建了 php 文件：

 ****```
abstract class BaseController extends CController
{
    public $crumbs=array();
    public $portlets=array();
    public $portlets2=array();
} 
```

我将这些行放在组件部分的 main.ph 中：

```
 'BaseController'=>array(
            'class'=>'application.components.BaseControllert',
        ), 
```

当我在我的布局中使用时：

> $this->portlets

它返回

> 未定义属性“HomeController.portlets”。

这意味着它会在主控制器内部查找该变量。

我该如何解决这个问题？

*   根据此链接[链接](http://www.yiiframework.com/wiki/28/#hh1)编写的所有布局代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:45:00.163

您只是忘记了所有控制器都必须扩展此类。

仔细阅读：[http ://www.yiiframework.com/wiki/28/#hh1](http://www.yiiframework.com/wiki/28/#hh1)

> 然后我们可以从这个基类派生出每个单独的具体控制器类

你只需要像这样修改你的控制器：

```
class MyController extends BaseController {
.....
} 
```****

# asp.net - 文本框和标签显示

> ID：15829253
> 
> 赞同：1
> 
> 时间：2013-04-05T08:30:31.880
> 
> 标签：asp.net

我是 asp.net 的新手，遇到了一些小问题。问题是为文本框和标签设置 Display="Dynamic" 但它显示了一些错误，并且是否有任何相同的标签，如用于文本框和标签的 Display="Dynamic"....，

**代码是：**

```
<tr>
            <td align="right" style="padding-right: 5px; width: 50%;" >
                <asp:Label ID="lblFirstName" runat="server" Text="FIRSTNAME :"></asp:Label>
            </td>
            <td align="left" style="padding-left: 5px; width: 50%;" >
                <asp:TextBox ID="txtFirstName" runat="server" Width="70%"></asp:TextBox>
                <br />
                <asp:RequiredFieldValidator ID="rfvFirstName" runat="server" Display="Dynamic" ControlToValidate="txtFirstName"
                    ErrorMessage="You can't leave this empty." Style="color: #FF0000;"></asp:RequiredFieldValidator>
            </td>
        </tr> 
```

请帮助我完成这个流程......，

# windows - 我可以在单个 DLL 标头中混合 C 和 C++ 导出吗？

> ID：15829259
> 
> 赞同：2
> 
> 时间：2013-04-05T08:30:51.033
> 
> 标签：windows, visual-c++, dll

在这里帮帮我，因为我半信半疑我不能做我想做的事，半信半疑应该有一个合适的解决方法。

我有一个用 C++ 实现的 DLL，因此将一些类导出到链接到它的其他 C++ 模块。没关系。现在我想从一个 C 模块（另一个 DLL）链接到这个 DLL，所以我将提供一个“扁平化”的 C 接口并在内部处理 C++ 的东西。那也没关系。

问题是我想将它作为单个 .h 和关联的 .lib 提供给 C 或 C++ 客户端。所以我的 DLL 中有类似于以下内容的内容：

```
#ifdef DLL_EXPORTS
#define DLL_API __declspec(dllexport)
#else
#define DLL_API __declspec(dllimport)
#endif

// export a class for the C++ clients
class DLL_API CExportedClass 
{
public:
    CExportedClass(); 
    // etc. etc.
};

// export flattened C interface for non-C++ clients
#ifdef __cplusplus
extern "C" {
#endif

DLL_API void DoSomethingInternally(); // i.e. implementation uses CExportedClass

#ifdef __cplusplus
}
#endif 
```

当然，这在导入 C++ 模块时可以正常工作，但在导入 C 模块时无法编译，因为它无法识别`class`声明。

所以我认为我什至可以做到这一点是错误的吗？我需要分成两个标题吗？在声明（或其他类型）`#ifdef __cplusplus`周围使用是否正确且可接受？`class``#ifdef`

在这里真正为“干净”的答案而苦苦挣扎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T08:36:46.903

MSDN上有几篇关于混合C和C++的文章：

*   [http://msdn.microsoft.com/en-us/library/aa270933%28v=vs.60%29.aspx](http://msdn.microsoft.com/en-us/library/aa270933%28v=vs.60%29.aspx)

*   [http://msdn.microsoft.com/en-us/library/s6y4zxec%28v=vs.60%29.aspx](http://msdn.microsoft.com/en-us/library/s6y4zxec%28v=vs.60%29.aspx)

我认为您可以简单地查看 windows.h 或类似的头文件，它们对 C 和 C++ 都适用，没有任何问题。

基本上这是它的工作原理：

在头文件的最开始

```
#ifndef _MYHEADER__H
#define _MYHEADER__H

#ifdef __cplusplus
extern "C" {
#endif 

//Decalrations
//........
//........

//Bottom of your header

#ifdef __cplusplus
}
#endif
#endif 
```

所以你的标题应该是这样的：

```
#ifdef DLL_EXPORTS
#define DLL_API __declspec(dllexport)
#else
#define DLL_API __declspec(dllimport)
#endif

#ifdef __cplusplus
//This part of header is not visible for ANSI C compiler
// export a class for the C++ clients
class DLL_API CExportedClass 
{
public:
    CExportedClass(); 
    // etc. etc.
};
#endif

#ifdef __cplusplus
extern "C" {
#endif 

DLL_API void DoSomethingInternally(); // i.e. implementation uses CExportedClass

#ifdef __cplusplus      
}
#endif 
```

这是它寻找 ANSI C 编译器的方式：

```
#ifdef DLL_EXPORTS
#define DLL_API __declspec(dllexport)
#else
#define DLL_API __declspec(dllimport)
#endif
DLL_API void DoSomethingInternally(); 
```

这是它寻找 C++ 编译器的方式：

```
#ifdef DLL_EXPORTS
#define DLL_API __declspec(dllexport)
#else
#define DLL_API __declspec(dllimport)
#endif

class DLL_API CExportedClass 
{
public:
    CExportedClass(); 
    // etc. etc.
};
extern "C" {

    DLL_API void DoSomethingInternally();

} 
```

但是，您在标头中声明类，因此 C 编译器不会对此感到满意，您应该将其放在“C”声明之外。

看看这里：

[http://www.parashift.com/c++-faq/mixing-c-and-cpp.html](http://www.parashift.com/c++-faq/mixing-c-and-cpp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T10:34:39.133

答案在您的问题中，如果 __cplusplus 未定义，那么您不希望编译器看到 C++ 声明：

```
#ifdef __cplusplus
// C++ declarations here
#endif 
```

将它们全部放在一个 .lib 文件中有点棘手，您无法链接 DLL。但是，您可以运行 lib.exe 来合并 C 和 C++ 项目的导入库。从未真正尝试过，但它应该可以工作。肯定会起作用的是将 C 和 C++ 源代码文件混合在一个项目中并生成一个 DLL。这可能是您应该追求的，您的客户将被需要部署两个 DLL 的单个 .lib 所迷惑。还有一个提示，你可能一开始就不应该这样做。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T09:19:14.963

您可以使用一个标头或多个标头，这无关紧要。但是您必须将所有 C++ 内容导出为 C++ 内容，并将所有 C 内容导出为 C 内容。不要像 Hans 建议的那样混合——它无论如何都行不通。

列出所有 C 函数并将它们放在“C”边界、一个单独的标题或仅一个标题中。如果您将 C 和 C++ 放在头文件中，只需使用`__cplusplus`符号控制编译（对于客户端）。

# jakarta-ee - struts2 junit 2.3.12 插件 - 无法在 struts2 junit4 中编写成功的测试

> ID：15829260
> 
> 赞同：2
> 
> 时间：2013-04-05T08:30:52.087
> 
> 标签：jakarta-ee, maven, struts2, junit4, struts2-junit-plugin

我正在使用 struts2 junit 2.3.12 插件。

1.  如果我直接运行测试，那么我得到：

`java.lang.NoClassDefFoundError: javax/servlet/ServletContext`

所以我包括

```
<dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency> 
```

在我的 POM 中，之后我得到：

```
java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/servlet/ServletException 
```

因此，我删除了上述依赖项并添加：

```
 <dependency>
            <groupId>org.jboss.spec</groupId>
            <artifactId>jboss-javaee-6.0</artifactId>
            <version>1.0.0.Final</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency> 
```

之后我得到

```
SEVERE:   [53:22.549] Dispatcher initialization failed 
```

下面是我的测试：

```
public class TestAction extends StrutsTestCase {

    @Test
    public void testRegister() throws Exception {
        ActionProxy proxy = getActionProxy("/gotoregister");
        assertNotNull(proxy);

        proxy = getActionProxy("/registeraction");
        UserAction action = (UserAction) proxy.getAction();
        assertNotNull(action);
        request.setParameter("usernameexists", "true");
        request.setParameter("emailexists", "false");
        request.setParameter("basicinfo.firstname", "fname");
        request.setParameter("basicinfo.lastname", "lname");
        request.setParameter("user.username", "test");
        request.setParameter("user.email", "nitin.cool4urchat@gmail.com");
        request.setParameter("user.passwd", "nn");
        request.setParameter("repasswd", "nn");
        request.setParameter("gender", "nn");
        request.setParameter("basicinfo.country", "India");
        String result = action.execute();
        assertEquals("input", result);
        System.out.println(action.getActionErrors());
        System.out.println(action.getActionMessages());
    }
} 
```

请帮助我编写一个成功的测试。

[编辑] - 我想我应该添加完整的 POM，所以下面是 POM 的最大部分：

```
<repositories>
        <repository>
            <id>java.net2</id>
            <name>Repository hosting the jee6 artifacts</name>
            <url>http://download.java.net/maven/2</url>
        </repository>
        <repository>
            <id>JBoss repository</id>
            <url>http://repository.jboss.org/nexus/content/groups/public/</url>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>net.sourceforge.htmlunit</groupId>
            <artifactId>htmlunit</artifactId>
            <version>2.12</version>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-lang3</artifactId>
            <version>3.0</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>1.4.5</version>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.4</version>
        </dependency>
        <dependency>
            <groupId>javax.persistence</groupId>
            <artifactId>persistence-api</artifactId>
            <version>1.0</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>

<!--        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
            <type>jar</type>
            <scope>compile</scope>
        </dependency>-->
<!--        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.5.6-Final</version>
        </dependency>-->
<!--        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi-ooxml</artifactId>
            <version>3.8-beta4</version>
        </dependency>-->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.6</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-c3p0</artifactId>
            <version>${hibernate.version}</version>
        </dependency>
<!--        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.6.1</version>
        </dependency>-->

<!--        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.6.1</version>
        </dependency>-->
<!--        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-servlet</artifactId>
            <version>2.1.4</version>
        </dependency>
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
            <version>2.1.4</version>
        </dependency>-->
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>${struts.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-json-plugin</artifactId>
            <version>${struts.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-tiles-plugin</artifactId>
            <version>${struts.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-junit-plugin</artifactId>
            <version>${struts.version}</version>
        </dependency>
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
            <version>2.1</version>
        </dependency>
<!--        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate</artifactId>
            <version>3.2.5.ga</version>
        </dependency>-->
<!--        <dependency>
            <groupId>javax.sql</groupId>
            <artifactId>jdbc-stdext</artifactId>
            <version>2.0</version>
        </dependency>
        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.0.1B</version>
        </dependency>-->

<!--        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-web-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>-->
        <!--
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
            <scope>test</scope>
        </dependency>-->
        <dependency>
            <groupId>org.jboss.spec</groupId>
            <artifactId>jboss-javaee-6.0</artifactId>
            <version>1.0.0.Final</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency>

<!--        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit-dep</artifactId>
            <version>4.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.jmock</groupId>
            <artifactId>jmock-junit4</artifactId>
            <version>2.6.0</version>
            <scope>test</scope>
        </dependency>-->
<!--        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.11</version>
            <version>3.8.2</version>
            <scope>test</scope>
        </dependency>-->
    </dependencies>
    <build>
        <plugins>
<!--            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>maven-jetty-plugin</artifactId>
                <version>6.1.14</version>
                <configuration>
                    <scanIntervalSeconds>5</scanIntervalSeconds>
                    <webDefaultXml>src/main/resources/webdefault.xml</webDefaultXml>
                    <connectors>
                        <connector implementation="org.eclipse.jetty.server.bio.SocketConnector">
                            <port>8080</port>
                        </connector>
                    </connectors>
                </configuration>
            </plugin>-->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.0.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <encoding>${project.build.sourceEncoding}</encoding>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1-beta-1</version>
                <configuration>
                    <failOnMissingWebXml>false</failOnMissingWebXml>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.2</version>
                <configuration>
                    <encoding>${project.build.sourceEncoding}</encoding>
                </configuration>
            </plugin>
        </plugins>
        <finalName>GoldenTraderMaven</finalName>
    </build>
    <profiles>
        <profile>
            <id>endorsed</id>
            <activation>
                <property>
                    <name>sun.boot.class.path</name>
                </property>
            </activation>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-compiler-plugin</artifactId>
                        <version>2.0.2</version>
                        <configuration>
                             javaee6 contains upgrades of APIs contained within the JDK itself.
                                 As such these need to be placed on the bootclasspath, rather than classpath of the
                                 compiler.
                                 If you don't make use of these new updated API, you can delete the profile.
                                 On non-SUN jdk, you will need to create a similar profile for your jdk, with the similar property as sun.boot.class.path in Sun's JDK.
                            <compilerArguments>
                                <bootclasspath>${settings.localRepository}/javax/javaee-endorsed-api/6.0/javaee-endorsed-api-6.0.jar${path.separator}${sun.boot.class.path}</bootclasspath>
                            </compilerArguments>
                        </configuration>
                        <dependencies>
                            <dependency>
                                <groupId>javax</groupId>
                                <artifactId>javaee-endorsed-api</artifactId>
                                <version>6.0</version>
                            </dependency>
                        </dependencies>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <netbeans.hint.deploy.server>Tomcat60</netbeans.hint.deploy.server>
        <struts.version>2.3.12</struts.version>
        <hibernate.version>3.6.10.Final</hibernate.version>
    </properties>
</project> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T08:49:57.663

您需要将依赖项添加`javax.servlet:servlet-api`到`javax.servlet.jsp:jsp-api`项目 pom.xml 文件中。

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.4</version>
    <type>jar</type>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>javax.servlet.jsp</groupId>
    <artifactId>jsp-api</artifactId>
    <version>2.1</version>
    <type>jar</type>
    <scope>test</scope>
</dependency> 
```

# javascript - 不同字符编码时从键盘搜索选项

> ID：15829263
> 
> 赞同：5
> 
> 时间：2013-04-05T08:30:56.663
> 
> 标签：javascript, html, character-encoding

我有选择标签，其中包含格鲁吉亚语选项：

```
<select>
    <option value="1"> პირველი </option>
    <option value="2"> მეორე </option>
    <option value="3"> მესამე </option>
</select> 
```

当我展开选择标签并在键盘上按“მ”时，我想搜索以“მ”开头的选项。当字符用英语书写时，默认情况下一切正常。我不知道如何解决它，你能建议什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:59:36.040

我的键盘上没有格鲁吉亚字符，但至少我懂俄语：

HTML：

```
<select id="select">
    <option value="0">Ноль</option>
    <option value="1">Один</option>
    <option value="2">Два</option>
    <option value="3">Три</option>
    <option value="4">Четыре</option>
    <option value="5">Пять</option>
    <option value="6">Шесть</option>
    <option value="7">Семь</option>
    <option value="8">Восемь</option>
    <option value="9">Девять</option>
</select> 
```

JS：

```
document.getElementById('select').addEventListener('keypress', function (event) {
    var length = this.options.length;
    var char = String.fromCharCode(event.which);
    var keys = {
        a: 'ф',
        b: 'и',
        c: 'с',
        d: 'в',
        e: 'у',
        f: 'а',
        g: 'п',
        h: 'р',
        i: 'ш',
        j: 'о',
        k: 'л',
        l: 'д',
        m: 'ь',
        n: 'т',
        o: 'щ',
        p: 'з',
        q: 'й',
        r: 'к',
        s: 'ы',
        t: 'е',
        u: 'г',
        v: 'м',
        w: 'ц',
        x: 'ч',
        y: 'н',
        z: 'я',
        '[': 'х',
        ']': 'ъ',
        ';': 'ж',
        '\'': 'э',
        ',': 'б',
        '.': 'ю',
        '/': '.',
    };
    var key = keys[char];
    for (var i = 0; i < length; i++) {
        if (this.options[i].innerHTML.charAt(0).toLowerCase() === key) {
            this.selectedIndex = i;
            break;
        }
    }
}); 
```

还有一个工作示例： http: [//jsfiddle.net/wdSQv/1/](http://jsfiddle.net/wdSQv/1/)（在 Firefox 20 中测试）

# php - PHP file_get_contents 在 & 处中断

> ID：15829266
> 
> 赞同：1
> 
> 时间：2013-04-05T08:31:05.417
> 
> 标签：php, file-get-contents

**解决方案** 因为objective-c 不编码&（因为它是保留的），所以您应该创建自己的方法。资料来源：[使用带有 Obj-C 的帖子发送放大器 (&)](https://stackoverflow.com/questions/6888824/sending-an-amp-using-a-post-with-obj-c)

对于我的 iOS 和 Android 应用程序，我使用 php 脚本来获取一些数据。该脚本有 1 个参数，它是一个链接。基本上该脚本如下所示：

```
$link= urlVariable('link'); 
$source = file_get_contents($link);

$xml = new SimpleXMLElement($source);

//Do stuff with the xml 
```

但是当我发送带有 & 符号的链接时，它会在 file_get_contents 上崩溃

```
Warning: file_get_contents(https://www.example.com/xxxx/name_more_names_) [function.file-get-contents]: failed to open stream: HTTP request failed! 
```

但完整的论点是

```
name_more_names_&_more_names_after_the_ampersand.file 
```

我尝试在将链接发送到 file_get_contents 之前对其进行编码，但没有成功。

也试过：

```
function file_get_contents_utf8($fn) {
     $content = file_get_contents($fn);
      return mb_convert_encoding($content, 'UTF-8',
          mb_detect_encoding($content, 'UTF-8, ISO-8859-1', true));
} 
```

结果相同。

有人知道为什么它会在&处中断吗？我不是网络开发人员，而是应用程序开发人员，所以请原谅我缺乏这方面的知识。

**编辑** 也试过这个：

```
$link= urlVariable('link'); 
$encodedLink = urlencode($link);
$source = file_get_contents($encodedLink); 
```

这是结果：

```
Warning: file_get_contents(https%3A%2F%2Fwww.example.com%2Fxxxxx%2Fname_more_names_) [function.file-get-contents]: failed to open stream: No such file or directory in 
```

**编辑#2**

我找到了为什么我的网址在 & 符号处停止。我用这个方法从 url 中检索我的论点：

```
 function  urlVariable($pVariableName)
    {
        if (isset ($_GET[$pVariableName]))   
        {
            $lVariable = $_GET[$pVariableName];
        }
        else
        {
            $lVariable = null;
        }
        return $lVariable;
    } 
```

_GET() 用 & 符号分隔参数对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:33:13.547

URL 的 & 符号应该正确编码：

```
https://www.example.com/xxxx/name_more_names_%26_more_names_after_the_ampersand.file 
```

在 PHP 中，您可以像这样对路径进行编码：

```
$path = parse_url($url, PHP_URL_PATH);
$url = substr_replace($url, '/' . urlencode(substr($path, 1)), strpos($url, $path), strlen($path)); 
```

**更新**

如果你还有一个树结构，你需要做更多的工作：

```
$path = parse_url($url, PHP_URL_PATH);
$newpath = '/' . str_replace('%2F', '/', urlencode(substr($path, 1)));

$url = substr_replace($url, $newpath, strpos($url, $path), strlen($path)); 
```

**更新 2**

如果您的脚本被称为 like `script?link=<some-url>`，您需要确保`<some-url>`也正确编码：

```
script?link=https%3A%2F%2Fwww.example.com%2Fxxxxx%2Fname_more_names_%26_more_names_after_the_ampersand.file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T12:11:37.567

采用

```
$url = urlencode($url);
$data = file_get_contents($url); 
```

# mysql - 从 Excel 连接到 MySQL

> ID：15829269
> 
> 赞同：1
> 
> 时间：2013-04-05T08:31:15.430
> 
> 标签：mysql, excel

我正在尝试使用 Excel 中的“来自 SQL Server”选项连接到 MySQL 数据库。我提供了连接详细信息：和`Server address`，但连接没有通过。我应该在服务器端进行任何更改以使此连接成为可能吗？`username``password`

感谢您提供的任何帮助。

![在此处输入图像描述](https://i.stack.imgur.com/gwyE6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:58:38.277

[SQL Server](http://www.microsoft.com/en-us/sqlserver/)是 Microsoft 的特定 RDBMS 产品；也就是说，它是 MySQL 的竞争产品。您想使用“来自 Microsoft Query”，前提是您安装了[MySQL ODBC 连接器](http://dev.mysql.com/downloads/connector/odbc/)。

# c# - SQL 数据读取器返回值

> ID：15829273
> 
> 赞同：0
> 
> 时间：2013-04-05T08:31:27.967
> 
> 标签：c#, sql, datareader

我想返回我的数据库值，在这种情况下：我的浏览器历史记录来自 SQL

我有的：

```
// lezen van records
public void lezen(string tabelNaam)
{
    // parameters aanmaken en opvullen
    SqlParameter Para1 = new SqlParameter();
    Para1.ParameterName = "@tabelNaam";
    Para1.Value = tabelNaam;
    // maken van een sql verbinding
    SqlConnection Conn = new SqlConnection();
    Conn.ConnectionString = @"Integrated security=true; Initial Catalog=OpdrachtW3; Data Source=LAPTOP-ROY\SQLEXPRESS";
    Conn.Open();
    // Aanmaken van Query
    SqlCommand Cmd = new SqlCommand();
    // Aangeven dat de Query plaatsvind op bovenstaande connectie
    Cmd.Connection = Conn;

    Cmd.CommandText = string.Format("select * from [{0}]", tabelNaam);
    Cmd.Parameters.Add(Para1);

    SqlDataReader dr = Cmd.ExecuteReader();

    List<string> RecordsInfo = new List<string>();
    int i = 0;

    Browser brw = new Browser();
    while (dr.Read())
    {
        i++;
        //int favonr = dr.GetInt32(0);
        //string websiteUrl = dr.GetString(1);
        //string websiteNaam = dr.GetString(2);
        dbRecords = dr.GetString(1);
        RecordsInfo.Add(dr["websiteUrl"].ToString());
        //RecordsInfo = dr.GetString(1).ToString();
    }
    dr.Close();
    Conn.Close();
    return;
} 
```

*   while 循环正在工作，但我不知道如何返回每个值，而不仅仅是循环的最新值。

我的电话看起来像：

```
DatabaseConnection df = new DatabaseConnection();
waarde1 = "websiteNaam";
waarde2 = "websiteUrl";
tabelNaam = "favorieteWebsites";
df.lezen(tabelNaam);
// er zijn items gevonden
try
{
    if (df.dbRecords != null)
    {
        // komt nog niet voor
        if (!cbFavorieten.Items.Contains(df.RecordsInfo))
        {
            cbFavorieten.Items.Add(Convert.ToString(df.RecordsInfo));
        }
    }
}
catch
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:49:21.473

这很简单。

只需让您的函数返回 RecordInfo 如下：

```
public List<string> lezen(string tabelNaam)
{
   ....

   return RecordsInfo;
} 
```

您需要调整调用该方法的代码

```
var x = df.lezen(tabel); 
```

# ios - iOS 游戏引擎选择

> ID：15829285
> 
> 赞同：0
> 
> 时间：2013-04-05T08:31:51.420
> 
> 标签：ios, 3d, cocos2d-iphone, game-engine

我对 iOS 游戏开发非常陌生，但我在 iOS 应用程序上做了一些工作，并且在 Objective-C 中占有相当大的份额。我已经为我的游戏设计了概念，但我不确定是否需要 2D 引擎或 3D 引擎。我可以举出的最接近的例子是《部落冲突》中可能的 3D 部分，其中有一些看起来是 3D 的建筑物，但你从不转身或任何东西，你只会看到人或我的角色在它们之间行走具有放大和缩小和平移的可能性。我有点倾向于使用 Cocos2D，因为它看起来非常简单且有文档记录，但我最终想要一些值得的东西，如果我想创建一个合适的游戏或扩展我正在工作的游戏，这不会限制我有一天上。

那么我应该使用 3D 还是 2D 开发，如果是，我应该使用什么引擎或开发环境？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:01:49.787

如果您不知道是否需要 2D 或 3D 引擎，那么根据定义，您的游戏概念并没有计划好。;)

您需要 2D 还是 3D 完全取决于您。

如果您担心受到游戏引擎的限制，请选择一个开源的。这样您就可以自己进行任何更改。尽管您不应高估对引擎进行更改所需的时间和精力，因为这通常需要深入了解引擎的内部工作原理。

对于在这里选择游戏引擎，我有更[一般的建议](http://www.learn-cocos2d.com/2012/05/the-game-engine-dating-guide-how-to-find-the-right-engine-for-your-game/)。最好的建议是选择一个**您**最有效率的引擎，而不是根据其功能集选择一个引擎 - 除非您有绝对不可协商的要求（例如 3D 渲染）。

# c# - Gridview删除选定的行

> ID：15829287
> 
> 赞同：3
> 
> 时间：2013-04-05T08:31:58.637
> 
> 标签：c#, asp.net

我想在更新时删除选定的 gridview 行，但不知道该怎么做。

我的更新代码：

```
 //Update selected assignment
    protected void ButtonUpdateAssignmentClick(object sender, EventArgs e)
    {           
        try
        {
            using (var db = new KnowItCvdbEntities())
            {
                SPWeb theSite = SPControl.GetContextWeb(Context);
                SPUser theUser = theSite.CurrentUser;
                string strUserName = theUser.LoginName;

                var theEmplAssignment = (
                                                from p
                                                    in db.EMPLOYEES
                                                where p.username == strUserName
                                                select p).FirstOrDefault();

                _emp = theEmplAssignment;

                if (_emp != null)
                {
                    int assignmentId = Convert.ToInt32(HiddenField_Assignment_Id.Value);

                    var theEmplAssignmentName =
                                                (from p in db.EMPLOYEES_ASSIGNMENT
                                                 where p.employee_id == _emp.employee_id && p.assignment_id == assignmentId
                                                 select p).First();

                    if (theEmplAssignmentName != null)
                    {
                        theEmplAssignmentName.company_name = TextBoxCompanyName.Text;
                        theEmplAssignmentName.sector = TextBoxSector.Text;
                        theEmplAssignmentName.area = TextBoxArea.Text;
                        theEmplAssignmentName.from_date = TextBoxFromDate.Text;
                        theEmplAssignmentName.to_date = TextBoxToDate.Text;
                        theEmplAssignmentName.reference_name = TextBoxReference.Text;
                        theEmplAssignmentName.description = TextBoxDesc.Text;

                        db.SaveChanges();

                        //Populate gridview 
                        if (Session["DataTableAssignment"] != null)
                        {
                            _dt = (DataTable)Session["DataTableAssignment"];
                        }
                        else
                        {
                            _dt.Columns.Add("Company name");
                            _dt.Columns.Add("Sector");
                            _dt.Columns.Add("Area");
                            _dt.Columns.Add("From");
                            _dt.Columns.Add("To");
                            _dt.Columns.Add("Tools");
                            _dt.Columns.Add("Technology");
                            _dt.Columns.Add("Description");
                            _dt.Columns.Add("Reference");
                            _dt.Columns.Add("AssignmentId");
                        }
                        //dt.Rows.Clear();

                        DataRow dr = _dt.NewRow();
                        dr["Company name"] = theEmplAssignmentName.company_name;
                        dr["Sector"] = theEmplAssignmentName.sector;
                        dr["Area"] = theEmplAssignmentName.area;
                        dr["From"] = theEmplAssignmentName.from_date;
                        dr["To"] = theEmplAssignmentName.to_date;
                        dr["Description"] = theEmplAssignmentName.description;
                        dr["Reference"] = theEmplAssignmentName.reference_name;
                        dr["AssignmentId"] = theEmplAssignmentName.assignment_id;

                        List<ASSIGNMENT_TOOLS> assignmentTools = (from p in db.ASSIGNMENT_TOOLS
                                                                  where
                                                                      p.employee_id == _emp.employee_id &&
                                                                      p.assignment_id == assignmentId
                                                                  select p).ToList();

                        string sToolValue = string.Empty;
                        foreach (var vTool in assignmentTools)
                        {
                            sToolValue += vTool.tool_name + ", ";
                        }
                        dr["Tools"] = sToolValue;

                        List<ASSIGNMENT_TECHNOLOGY> assignmentTech = (from p in db.ASSIGNMENT_TECHNOLOGY
                                                                      where
                                                                          p.employee_id == _emp.employee_id &&
                                                                          p.assignment_id == assignmentId
                                                                      select p).ToList();

                        string sTechValue = string.Empty;
                        foreach (var vTech in assignmentTech)
                        {
                            sTechValue += vTech.technology_name + ", ";
                        }
                        dr["Technology"] = sTechValue;

                        _dt.Rows.Add(dr);
                        Session["DataTableAssignment"] = _dt;

                        GridViewShowAssignments.DataSource = _dt;
                        GridViewShowAssignments.DataBind();

                        TextBoxCompanyName.Text = string.Empty;
                        TextBoxSector.Text = string.Empty;
                        TextBoxArea.Text = string.Empty;
                        TextBoxFromDate.Text = string.Empty;
                        TextBoxToDate.Text = string.Empty;
                        TextBoxDesc.Text = string.Empty;
                        TextBoxReference.Text = string.Empty;
                        ListBoxAssignmentTools.Items.Clear();
                        ListBoxAssignmentTechnology.Items.Clear();
                    }
                }
            }
        }
        catch (Exception x)
        {
            LabelProvAssignment.Text = x.Message;
        }
    } 
```

现在我有一个作业，想编辑它，我点击编辑，输入一些新值，然后点击更新： ![在此处输入图像描述](https://i.stack.imgur.com/kL9ct.jpg)

但是更新完成后会显示以下内容： ![在此处输入图像描述](https://i.stack.imgur.com/iHARU.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:58:59.410

您的代码中的问题是您总是在数据表中添加新行。

```
 DataRow dr = _dt.NewRow(); 
```

![在此处输入图像描述](https://i.stack.imgur.com/iiDkG.jpg)

当您将表带回会话时会产生问题。您需要先从 dt 中删除特定行，然后再将其重新绑定到 gridview

```
 if (Session["DataTableAssignment"] != null)
 {
     _dt = (DataTable)Session["DataTableAssignment"];                   

      DataRow row = _dt.Select("the condition")
      _dt.Rows.Remove(row);

 } 
```

我希望它会帮助你。

# jquery - 使用 .val 填充文本区域

> ID：15829288
> 
> 赞同：0
> 
> 时间：2013-04-05T08:31:59.277
> 
> 标签：jquery, forms, input

我目前正在尝试在输入时使用来自多个输入的值填充文本区域，我的问题是每次进入新输入时，它都会从文本区域中清除以前的信息并添加新信息，无论如何我可以保留以前字段中的信息并添加新信息。

html

```
<input type="text" name="fname" ><br>
<input type="text" name="lname"><br>

<textarea type="text" id="content"></textarea><br> 
```

jQuery

```
 $("input").keyup(function () {
  var value = $(this).val();
  $("#content").text(value);
  }).keyup(); 
```

Codepen [http://codepen.io/michael52/pen/uzeqs](http://codepen.io/michael52/pen/uzeqs)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T08:36:14.377

为什么不根据其他两个框构建 textarea 的内容，而不是 textarea 的旧值：

```
<input type="text" name="fname" id="fname"><br>
<input type="text" name="lname" id="lname"><br>

<textarea type="text" id="content"></textarea><br> 
```

JS：

```
$("input").keyup(function () {
  var value = $('#fname').val() + ' ' + $('#lname').val();
  $("#content").text(value);
}).keyup(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:36:16.690

您需要附加新内容，而不是替换旧内容：

```
$("#content").text(function(_, oldText) {
    return oldText + value;
}); 
```

# javascript - 当其中任何一个更改时，对许多下拉列表的内容求和

> ID：15829289
> 
> 赞同：1
> 
> 时间：2013-04-05T08:32:09.403
> 
> 标签：javascript, jquery, html, jquery-selectors

我在一个页面上有几个下拉列表，它们都包含一些数字。当用户更改其中任何一个时，我需要遍历所有这些并对所有数字求和。

我将如何使用 jQuery 来做到这一点？

```
<select id="number1">
  <option value="1">1</option>
  <option value="3">3</option>
</select>
<select id="number2">
  <option value="1">1</option>
  <option value="3">3</option>
</select>
<select id="number4">
  <option value="1">1</option>
  <option value="3">3</option>
</select> 
```

我试过类似的东西：

```
$('select[id*="number"].change(function() { // when any one dropdown change

    $('select[id*="number"].change(function() { // go through them all
        var current = $(this);

        // add current value to array
    });
});

$.each(arr,function() {
    total += this; // sum items
}); 
```

但它并不像预期的那样工作。有小费吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:35:29.377

您似乎正在尝试将调用嵌套`change()`在彼此内部。不要`change()`第二次使用，使用`.each()`. （此外，您在每个选择器的末尾都缺少关闭`')`，因此您的代码根本无法工作。）

遍历处理程序外部的数组是没有意义的`change()`，因为该代码何时实际运行？

试试这个：

```
$('select[id*="number"]').change(function() { // when any one dropdown change
    total = 0; // reset the total
    $('select[id*="number"]').each(function() { // go through them all
        total += +this.value; // use unary plus to convert string value for addition
    });
    // do something with total here
}); 
```

演示：http: [//jsfiddle.net/nnnnnn/8L9Hz/](http://jsfiddle.net/nnnnnn/8L9Hz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:43:20.327

检查这个[小提琴](http://jsfiddle.net/aDzHB/1/)。

javascript代码

```
 $(function(){
     $('.my_number').change(function(){
       var sum = 0;
       $('.my_number').each(function(){
          sum = sum + parseInt(this.value);
       })
     $("#result").html(sum);
  })

}) 
```

HTML 代码

```
<select class= "my_number" id="number1">
  <option value="1">1</option>
  <option value="3">3</option>
</select>
<select class= "my_number" id="number2">
  <option value="1">1</option>
  <option value="3">3</option>
</select>
<select class= "my_number" id="number4">
  <option value="1">1</option>
  <option value="3">3</option>
</select>
<div id="result"></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:59:28.887

另一种可能性是使用`Array.prototype.reduce`对值求和

```
var selects = $('select[id*="number"]');
selects.change(function () { // when any one dropdown change
    var total = [].reduce.call(selects, function (l, c) {
        return l + ~~c.value
    }, 0);
    console.log(total)
}); 
```

*请注意兼容性。您必须使用[shim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce#Browser_compatibility)来支持较旧的浏览器*

这是一个[小提琴](http://jsfiddle.net/fMCfm/1/)

# c# - 删除项目在列表 C# 中具有相同的键

> ID：15829309
> 
> 赞同：-5
> 
> 时间：2013-04-05T08:33:30.007
> 
> 标签：c#, list, removeall

我有一个`List<Object>`n `Objects`。在 n 个对象中，它们有一些相同的对象`Id`。例子`List<T> = {t1, t2, t3, t4, t5....,t10}.`

假如说：

`t1.Id = t5.id`

所以我想从中`t5`删除`List`。

谁能帮帮我。

在这个问题中： [使用 LINQ 删除列表中的对象，](https://stackoverflow.com/questions/853526/using-linq-to-remove-objects-within-a-listt)您知道对象重复（例如：“bob”），但在我的问题中，在这个列表中，我不知道之前有任何对象重复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T08:35:47.563

仅使用 LINQ to Objects：

```
source = source.GroupBy(t => t.id).Select(g => g.First()).ToList(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T08:36:07.903

您可以使用[moreLinq](http://code.google.com/p/morelinq/wiki/OperatorsOverview)（从 NuGet 获取）扩展`DistinctBy`

```
var result = list.DistinctBy(x => x.Id).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:36:39.647

试试这个：

```
list.RemoveAll(input => list.Count(i => i.Id == input.Id) > 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:38:46.193

```
var res = items.GroupBy(item => item.Id).Select(item2 => item2.First()).ToList(); 
```

# xslt - Getting date format in xslt

> ID：15829318
> 
> 赞同：0
> 
> 时间：2013-04-05T08:34:18.623
> 
> 标签：xslt

I have a xslt code for getting date.my code is like

```
<xsl:copy-of select="substring-before(msxsl:node-set($notes)/root/item/LASTCHANGED,'T')"/> 
```

her I got Output Like 2013-04-05

but I need to get Output Like 15 jan 2013.

How can I achive this?any one help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T12:00:53.160

只需更改顺序

**XSLT**

```
<?xml version='1.0'?>
<xsl:stylesheet version="1.0"
      xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
      xmlns:ms="urn:schemas-microsoft-com:xslt"
      xmlns:dt="urn:schemas-microsoft-com:datatypes">
  <xsl:template match="/">
  <HTML>
  <HEAD>
  </HEAD>
  <BODY> 
   <xsl:for-each select="XMLSamples/FileDetails/Date">
      <DIV>
          Date Unedited:
          <xsl:value-of select="."/>
      </DIV>
      <DIV>
          Date Edited:
          <xsl:value-of select="ms:format-date(., 'MMM dd, yyyy')"/>
      </DIV>
   </xsl:for-each>
  </BODY> 
  </HTML>
</xsl:template>
</xsl:stylesheet> 
```

**输出**

未编辑日期：2000-02-16T15:56:00

编辑日期：2000 年 2 月 16 日

# c++ - 将属性表应用于空 C++ Visual Studio 项目

> ID：15829319
> 
> 赞同：2
> 
> 时间：2013-04-05T08:34:19.367
> 
> 标签：c++, visual-studio, visual-c++, properties

我创建了一个空的 Visual C++ 项目并添加了一个`main.cpp`类似：

```
#include <mylib.h>

int main() {
     abc();
     return 0;
} 
```

`abc()`说的功能在哪里`mylib`。要使用`mylib`以下设置需要指向正确的位置。

```
Configaration Setting -> VC++ Directories -> Executable Directories 
Configaration Setting -> VC++ Directories -> Include Directories 
Configaration Setting -> VC++ Directories -> Library Directories 
Configaration Setting -> Linker -> Input -> Additional Dependencies 
```

这对于多个项目来说非常繁琐，所以我想为这些设置设置一个属性表。当我向项目添加属性表时，会生成以下 XML 存根：

```
<?xml version="1.0" encoding="utf-8"?> 
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <ImportGroup Label="PropertySheets" />
  <PropertyGroup Label="UserMacros" />
  <PropertyGroup />
  <ItemDefinitionGroup />
  <ItemGroup />
</Project> 
```

但是属性表的属性编辑器是空白的？

![在此处输入图像描述](https://i.stack.imgur.com/1n9ZX.png)

我只是想要一个简单的解决方案来将所需的外部库设置添加到项目中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:02:17.040

要编辑*属性表*，请选择

**查看->物业经理**

在该视图中，打开*属性页*并通过双击您的设置文件来编辑您的设置。只是不要使用*Properties Window*。

# html - HTML5 : How to pass extra data to HTML5 video player

> ID：15829320
> 
> 赞同：1
> 
> 时间：2013-04-05T08:34:27.213
> 
> 标签：html, webkit

How to pass extra data to HTML5 video player, like "Video name" so that play will display "Video name" some where on the screen. Or "Video Copy control info" so that browser will restrict the user to save file.

I could not find any attributes in VIDEO tag to specify these things. Please help to pass some data from HTML space to browser's internal.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:38:45.173

> 如何将额外数据传递给 HTML5 视频播放器，例如“视频名称”，以便播放将在屏幕上的某个位置显示“视频名称”。

视频元素没有为此提供任何特殊功能。

创建段落、标题、div 或其他一些元素。然后在里面放一个文本节点。然后将其添加到 DOM（例如，紧跟在视频元素之后）。添加 CSS 来品味。

> 或“视频复制控制信息”，以便浏览器限制用户保存文件。

您不能阻止用户保存浏览器必须下载才能播放的文件。

# ios - Flex-Air mobile TextInput cursor starts in the middle of a TextField on iOS

> ID：15829325
> 
> 赞同：0
> 
> 时间：2013-04-05T08:34:38.510
> 
> 标签：ios, apache-flex, mobile, air, textinput

I am developing an Air Application for mobile Devices. During the registration process we have some TextInput Fields.

On all devices everthing works fine but on iOs the cursor and the input text is placed somewhere in the middle of the TextInput - I think at the point the user clicks into the field...

Can I avoid this behaviour?

Thanks,

Christian

Seems the TextInputSkin makes the problem...

```
s|TextInput
{
    skinClass:        ClassReference("spark.skins.mobile.TextInputSkin");
    contentBackgroundColor: #807F7F;
    color:          #FFFFFF;
    fontSize:       32;
    fontFamily:     GGStandardFont;
    fontWeight:     normal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T16:57:55.967

我遇到过类似的问题，这似乎源于对 TextInput 使用自定义字体。

在编辑 TextInput 时将字体系列设置为网络安全字体（即 Arial）有帮助。然后重新设置字体。

例如。（弹性）

```
softKeyboardActivating="setStyle('fontFamily', 'Arial')"
softKeyboardDeactivating="setStyle('fontFamily', 'MyCustomFont')" 
```

# android - Calling AsyncTask from the Activity

> ID：15829330
> 
> 赞同：0
> 
> 时间：2013-04-05T08:34:58.227
> 
> 标签：android, asynchronous

For this code snippet( I have excluded the `doInBackground(), postExecute()` etc. ) How should I pass the Activity parameter while calling the Async Task from the CheckServer Activity?

```
public class CheckServer  extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

    HttpTicket ticket= new HttpTicket(); //HOW IS THIS LINE DONE? WHAT PARAM SHOULD BE PASSED?

    }

    @SuppressWarnings("unused")
    private class HttpTicket extends AsyncTask<String, String, String>
    {
        private Activity activity;
        private ProgressDialog dialog;

         public HttpTicket(Activity activity) {

            this.activity = activity;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:36:20.030

在你的活动 onCreate()

```
 HttpTicket ticket= new HttpTicket(Activity.this);
 //passing context to the asynctask constructor
 ticket.execute();
 //call execute to laod asynctask 
```

定义 asynctask 如下

```
private class HttpTicket extends AsyncTask<String, String, String>
{
    private Activity activity;
    private ProgressDialog dialog;

     public HttpTicket(Activity activity) {

        this.activity = activity;
        dialog = new ProgressDialog(activity);
        dialog.setTitle("Wait...");
    }
   protected void onPreExecute()
   {
      dialog.show();
   }
   protected String doInBackground(String params)
   {  
      //background opearation

     return "string";
   }
   protected void onPostExecute(String result)
   {
       dialog.dismiss();
       //update ui
   }

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:37:00.640

你可以简单地做

```
HttpTicket mHttpTicket = new HttpTicket(this); 
mHttpTicket.execute(); 
```

您也可以删除构造函数，并将其作为参数传递给 OnPreExecute。然后你给它`execute(this);`

# asp.net - how to get or retain file upload control value after postback

> ID：15829337
> 
> 赞同：0
> 
> 时间：2013-04-05T08:35:15.553
> 
> 标签：asp.net, ajax

hi i have usercontrol on which there is one file upload control, user control is inside Tab container which on aspx page.hirarchy is like bellow:

1.Master Page 2.aspx Page having ajax tab control. 3.User control which is inside tab container. 4.file upload control which is on user control. and submit button

Problem i am facing: When i click on submit button as page load event is called before buttons on click event value of file upload control is getting nulll.

could you please tell me how can i fetch the file upload control value after postback. thanks is advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:39:47.670

文件上传控件不会随每个请求保留已发布的文件。
当用户选择一个文件时，它将在发生的下一个 PostBack 请求中可用。

您应该在每次回发时检查[PostedFile](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.postedfile.aspx)并将此文件保存在服务器上。
在 ViewState 中保留对其路径的引用。
然后，您可以在用户完成所有输入后处理该文件。

# c# - 双向冒泡排序 c#

> ID：15829339
> 
> 赞同：3
> 
> 时间：2013-04-05T08:35:28.250
> 
> 标签：c#, algorithm, sorting

我有一个编写双向冒泡排序的家庭作业。有人可以看看我的逻辑是否正确。我不想要代码，因为我想自己弄清楚。我只想对我的理解进行逻辑检查。

据我了解双向冒泡排序您实现了 2 个循环，一个从列表中的位置 1 开始并执行正常的冒泡排序。当第一个 for 循环结束时，第二个 for 循环执行反向工作。我只是不完全理解每个循环的终止条件是什么。

for 循环条件会如下所示吗？

循环 1 -`for(i = 0; i < Count -i; i++)`

循环 2 -`for(j = Count - i; j > i; j--)`

在每个循环中，将指定交换条件。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:39:06.593

“经典”冒泡排序在每次迭代时都会遍历整个数组，因此循环应该是

```
for(i = 0; i < Count - 1; i++) 
```

和

```
for(j = Count - 1; j > 0; j--) 
```

两个循环都跳过一个索引：第一个循环跳过最后一个索引，而第二个循环跳过第一个索引。这样您的代码就可以安全地与`data[i]`和`data[i+1]`进行`data[j]`比较`data[j-1]`。

**编辑**“[优化”](http://en.wikipedia.org/wiki/Bubble_sort#Optimizing_bubble_sort)冒泡排序在第 - 次迭代中跳过初始`k`元素。`k`由于冒泡排序是双向的，因此您将能够跳过初始元素`k`和尾部`k`元素，如下所示：

```
 int k = 0;
 do { // The outer loop
     ...
     for(int i = k; i < Count - k - 1; i++)
         ...
     for(int j = Count - k - 1; j > k ; j--)
         ...
     k++;
} while (<there were swaps>); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:43:17.037

双向冒泡排序是这样工作的：

而不是每次都从底部到顶部传递列表（冒泡排序），而是从底部开始**一次，**然后**从列表顶部**开始。

维基百科文章在解释它方面做得更好：

[http://en.wikipedia.org/wiki/Cocktail_sort](http://en.wikipedia.org/wiki/Cocktail_sort)

- 富有的

# asp.net - 在网格中显示图像

> ID：15829341
> 
> 赞同：0
> 
> 时间：2013-04-05T08:35:32.237
> 
> 标签：asp.net, css, telerik-grid

我正在使用 RadGrid ，在这个网格中有带有 ImageUrl 的按钮。在 IE8 中我有一些问题正确显示它们（水平）而不是这样

![在此处输入图像描述](https://i.stack.imgur.com/GI5Cg.gif)

所以我想我应该改变按钮的宽度，但后来发生了一些事情，我真的不知道为什么会发生这种情况......我刚刚将**宽度**从 20px 更改为 30px

![在此处输入图像描述](https://i.stack.imgur.com/8g8GB.gif)

有人可以帮助我如何改变它，就像在其他所有浏览器中一样正常（水平两个图像......

我的代码

```
 <telerik:RadGrid ID="rgGrid" runat="server" DataSourceID="SqlDataSource1" 
          AllowSorting="True" AllowPaging="True" PageSize="20" 
          AllowFilteringByColumn="True" ShowStatusBar="True" Width="100%" 
          CellSpacing="0" GridLines="None" OnItemCommand="rgGrid_ItemCommand">
     <MasterTableView AutoGenerateColumns="False" DataKeyNames="OrganisationId">
         <NoRecordsTemplate>
             Can't find Organisations to display
         </NoRecordsTemplate>
       <Columns>
           <telerik:GridBoundColumn DataField="OrganisationId" DataType="System.Int32" 
               FilterControlAltText="Filter OrganisationId column"
               HeaderText="OrganisationId" ReadOnly="True" SortExpression="OrganisationId" 
               UniqueName="OrganisationId" Visible="false">
           </telerik:GridBoundColumn>
           <telerik:GridBoundColumn DataField="OrganisationName" FilterControlAltText="Filter 
                    OrganisationName column" HeaderText="Name" ItemStyle-Width="60px" 
                    SortExpression="OrganisationName" UniqueName="OrganisationName">
               <ItemStyle Width="60px" />
           </telerik:GridBoundColumn>
           <telerik:GridBoundColumn DataField="CountryName" FilterControlAltText="Filter 
                    CountryName column" HeaderText="Country" ItemStyle-Width="60px" 
                    SortExpression="CountryName" UniqueName="CountryName">
                <ItemStyle Width="60px" />
           </telerik:GridBoundColumn>
           <telerik:GridTemplateColumn UniqueName="DeleteColumn" ItemStyle-Width="20px" 
                    AllowFiltering="false"ItemStyle-HorizontalAlign="Right"  >
              <ItemTemplate>
                 <telerik:RadButton ID="btnEdit" CommandName="Edit" runat="server" 
                      Width="30px" ToolTip="View Details" Height="20px" 
                      CommandArgument='<%# DataBinder.Eval(Container.DataItem, "OrganisationId")%>'>
                      <Image ImageUrl="~/Resources/Images/Grid/edit-app.png" 
                          IsBackgroundImage="true" />
                 </telerik:RadButton>
                 <telerik:RadButton ID="btnDelete" CommandName="Delete" runat="server" 
                      Width="20px" ToolTip="Delete Vacation"
                      Height="20px" CommandArgument='<%# DataBinder.Eval(Container.DataItem, "OrganisationId")%>'>
                 <Image ImageUrl="~/Resources/Images/Grid/delete-app.png" 
                        IsBackgroundImage="true" />
               </telerik:RadButton>
           </ItemTemplate>
       </telerik:GridTemplateColumn>
    </Columns>
  </MasterTableView>
  </telerik:RadGrid> 
```

感谢您的帮助和快速回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:58:33.617

先给图像一个类：

```
<Image ImageUrl="~/Resources/Images/Grid/edit-app.png" 
IsBackgroundImage="true" CssClass="someclass" /> 
```

添加CSS

```
.someclass {
   background-repeat: no-repeat;
} 
```

因为它被渲染为背景图像。

# xna - 通过托管DX读取，缩放和移动图像，如遥感图像（例如jpg，tiff，img）

> ID：15829355
> 
> 赞同：0
> 
> 时间：2013-04-05T08:36:21.597
> 
> 标签：xna, directx, zooming, tiff, gdal

对不起，我的英语很差，但我会尽量清楚地描述我的问题。首先，我想操作（读取、缩放、移动、缩放矩形）一些格式如 jpg、tiff 和 img 的图像。我曾尝试通过 gdal 来执行此操作，使用 rasterio 进行缩放和移动，但结果很奇怪。它比我使用 gdi+ 执行的速度慢。我问过其他人，但是，答案可能是 rasterio 直接从硬读取图像磁盘，但 gdi+ 在 ram 中做事。也许我操作的图像是小图像，小于 4000*3000。所以现在我在gdi+中操作图像。但我想我是否可以在directx中做同样的事情？我的意思是我使用directx 而不是gdi+。因为我认为它会更快。而且因为我只能用c#，所以我想有人可以给我一些关于managed dx或xna thx的建议~~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:18:34.787

如果我理解您的问题，那么您正在尝试构建一个简单的图像查看器。如果是这样，您可以使用 XNA 轻松完成它，它会运行得非常快。

您需要做的就是加载图像并将其显示到屏幕上，平移和缩放也非常简单。

阅读本教程： [http ://rbwhitaker.wikidot.com/spritebatch-basics](http://rbwhitaker.wikidot.com/spritebatch-basics)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-15T14:22:59.723

已经有一个名为 TuiView 的快速图像查看器，它易于安装和使用。

文档在这里：[http ://tuiview.org](http://tuiview.org)

# ios - 导航栏标题和后退按钮名称相同吗？

> ID：15829358
> 
> 赞同：5
> 
> 时间：2013-04-05T08:36:32.363
> 
> 标签：ios, xcode, uinavigationcontroller, uinavigationbar

我在我的故事板项目中为导航栏创建了一个标题，但是当我移动到下一个视图控制器时，后退按钮显示与我之前的导航栏（主导航栏）标题相同的名称。？我可以设置单独的标题和后退按钮名称吗？

我尝试了以下代码，但它不起作用？为什么？

```
 self.navigationItem.title=@"Recent Books";
self.navigationItem.backBarButtonItem.title=@"Back"; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-05T08:39:31.320

根据[UINavigationItem 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationItem_Class/Reference/UINavigationItem.html#//apple_ref/occ/instp/UINavigationItem/backBarButtonItem)

> “当此导航项位于堆栈中顶部项的正下方时，导航控制器会从此导航项派生导航栏的后退按钮。[...] 如果您想为后退按钮指定自定义图像或标题，您可以将自定义栏按钮项（带有您的自定义标题或图像）分配给此属性。"

所以在你推其他 VC 的第一个 VC 中试试这个

```
self.navigationItem.title=@"Recent Books";
UIBarButtonItem *backButton = [[UIBarButtonItem alloc]
                                   initWithTitle:@"Back"
                                   style:UIBarButtonItemStylePlain
                                   target:nil
                                   action:nil];
self.navigationItem.backBarButtonItem=backButton; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T08:59:45.943

假设您正在推动您的视图控制器 A -> B

在 viewcontroller A 中尝试在`viewDidLoad`方法中添加此代码

```
UIBarButtonItem *btn_Back = [[UIBarButtonItem alloc] initWithTitle:@"Back"
 style:UIBarButtonItemStylePlain target:nil action:nil];
self.navigationItem.backBarButtonItem=btn_Back; 
```

所以你会在视图控制器 B 中看到你的“返回”按钮

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T08:42:01.160

以下应该可以解决您的问题

```
-(void)viewDidAppear:(BOOL)animated
{
    self.navigationController.navigationBar.backItem.title = @"back";
} 
```

你也可以使用这个 Objective-C 语法

```
[[self.navigationController.navigationBar backItem] setTitle:@"back"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T09:46:46.140

只需以这种方式进行，这是我迄今为止找到的最简单的方法之一：

**创建一个自定义后退按钮并将其添加到导航栏左按钮项属性中：**

```
- (void)viewDidLoad
{
UIButton *backBtn = [UIButton buttonWithType:UIButtonTypeCustom];
UIImage *backBtnImage = [UIImage imageNamed:@"Backnavigation.png"]  ; // Here set the back button image
[backBtn setBackgroundImage:backBtnImage forState:UIControlStateNormal];
[backBtn addTarget:self action:@selector(handleBack:) forControlEvents:UIControlEventTouchUpInside];
backBtn.frame = CGRectMake(0, 0, 24, 24);
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithCustomView:backBtn] ;
self.navigationItem.leftBarButtonItem = backButton;
}

//Handle the Back Button Event
- (void) handleBack:(id)sender
{
    // do your custom handler code here
    [self.navigationController popViewControllerAnimated:YES];
} 
```

此外，这样做，您不需要每次都更改 NavigationBar 的标题。

*这是供您参考的后退按钮：* ![在此处输入图像描述](https://i.stack.imgur.com/J0Ovi.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-09T12:25:23.283

您可以在要设置您选择的 backButton 标题的视图控制器 的**viewWillAppear(animated:Bool)**方法中使用以下代码：`self.navigationController?.navigationBar.topItem?.backBarButtonItem = UIBarButtonItem(title: "Back Title", style: .plain, target: nil, action: nil)`

# android - 如何禁用 Http 类的 LogCat 输出

> ID：15829363
> 
> 赞同：0
> 
> 时间：2013-04-05T08:36:46.053
> 
> 标签：android, http, logcat

我正在使用 Http 类发出大量 GET / POST 请求并在 LogCat 中收到大量垃圾邮件：

```
04-05 10:26:21.662: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.protocol.max-redirects': null
04-05 10:26:21.662: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.route.forced-route': null
04-05 10:26:21.662: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.route.local-address': null
04-05 10:26:21.662: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.route.default-proxy': null
04-05 10:26:21.662: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.conn-manager.timeout': null
04-05 10:26:21.662: I/org.apache.http.impl.conn.tsccm.ThreadSafeClientConnManager(6644): ThreadSafeClientConnManager.getConnection: HttpRoute[{}->http://<ADDRESS>], timeout = 0
04-05 10:26:21.662: I/org.apache.http.impl.conn.tsccm.ConnPoolByRoute(6644): Total connections kept alive: 0
04-05 10:26:21.662: I/org.apache.http.impl.conn.tsccm.ConnPoolByRoute(6644): Total issued connections: 0
04-05 10:26:21.662: I/org.apache.http.impl.conn.tsccm.ConnPoolByRoute(6644): Total allocated connection: 0 out of 20
04-05 10:26:21.662: I/org.apache.http.impl.conn.tsccm.ConnPoolByRoute(6644): No free connections [HttpRoute[{}-><ADDRESS>]][null]
04-05 10:26:21.662: I/org.apache.http.impl.conn.tsccm.ConnPoolByRoute(6644): Available capacity: 2 out of 2 [HttpRoute[{}-><ADDRESS>]][null]
04-05 10:26:21.662: I/org.apache.http.impl.conn.tsccm.ConnPoolByRoute(6644): Creating new connection [HttpRoute[{}-><ADDRESS>]]
04-05 10:26:21.662: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.connection.stalecheck': null
04-05 10:26:21.672: I/org.apache.http.impl.client.DefaultRequestDirector(6644): Stale connection check
04-05 10:26:21.672: I/org.apache.http.impl.client.DefaultRequestDirector(6644): Stale connection detected
04-05 10:26:21.672: I/org.apache.http.impl.conn.DefaultClientConnection(6644): Connection closed
04-05 10:26:21.672: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.connection.timeout': 10000
04-05 10:26:21.882: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.tcp.nodelay': null
04-05 10:26:21.882: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.socket.timeout': 15000
04-05 10:26:21.892: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.socket.linger': null
04-05 10:26:21.892: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.socket.buffer-size': null
04-05 10:26:21.892: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.protocol.element-charset': null
04-05 10:26:21.902: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.connection.max-line-length': null
04-05 10:26:21.902: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.protocol.element-charset': null
04-05 10:26:21.902: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.connection.max-header-count': null
04-05 10:26:21.912: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.connection.max-line-length': null
04-05 10:26:21.912: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.connection.max-status-line-garbage': null
04-05 10:26:21.912: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.virtual-host': null
04-05 10:26:21.912: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.default-headers': null
04-05 10:26:21.912: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.protocol.version': null
04-05 10:26:21.912: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.useragent': null
04-05 10:26:21.912: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.protocol.version': null
04-05 10:26:21.912: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.protocol.expect-continue': false
04-05 10:26:21.922: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.protocol.cookie-policy': null
04-05 10:26:21.922: I/org.apache.http.client.protocol.RequestAddCookies(6644): CookieSpec selected: best-match
04-05 10:26:21.922: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.protocol.cookie-datepatterns': null
04-05 10:26:21.922: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.protocol.single-cookie-header': null
04-05 10:26:21.922: I/org.apache.http.impl.client.DefaultRequestDirector(6644): Attempt 1 to execute request
04-05 10:26:21.922: I/org.apache.http.impl.client.ClientParamsStack(6644): 'http.protocol.version': null
04-05 10:26:21.922: I/org.apache.http.wire(6644): >> "POST /aap.do HTTP/1.1[EOL]"
04-05 10:26:21.922: I/org.apache.http.wire(6644): >> "Content-Length: 567[EOL]"
04-05 10:26:21.932: I/org.apache.http.wire(6644): >> "Content-Type: application/octet-stream[EOL]"
04-05 10:26:21.932: I/org.apache.http.wire(6644): >> "Host: <ADDRESS>[EOL]"
04-05 10:26:21.932: I/org.apache.http.wire(6644): >> "Connection: Keep-Alive[EOL]"
04-05 10:26:21.932: I/org.apache.http.wire(6644): >> "[EOL]"
(...) 
```

我浏览了整个网络，不敢相信没有人真正发布了禁用此功能的方法！任何人？

*编辑*

说清楚 - 我知道我可以在发布等时通过 ProGuard 过滤/删除它 - 我想做的事情是在开发过程中摆脱（而不是过滤）这些日志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-03T01:27:41.330

Logger.getLogger("org.apache.http.wire").setLevel(Level.OFF); Logger.getLogger("").setLevel(Level.OFF);

有关更多详细信息，请参阅[如何在 Android 上为 apache commons HttpClient 启用日志记录](https://stackoverflow.com/questions/3246792/how-to-enable-logging-for-apache-commons-httpclient-on-android)

# jaxb - jaxb 解组创建重复的对象列表：如何解组列表中的对象？

> ID：15829366
> 
> 赞同：1
> 
> 时间：2013-04-05T08:36:55.173
> 
> 标签：jaxb

jaxb 解组创建重复的对象列表：如何解组列表中的对象？

xml 文件和代码如下所示，同时解组读取元素获取重复列表我正在使用 jaxb 注释，我的最终输出是重复列表

```
<data_reading>

    <load_survey>
        <interval_settings value="30" xunit="mins" />
        <measurement name="energy_real" xunit="KWH" />
        <reading interval="00" value="000.010" />
        <reading interval="01" value="000.000" />
        <reading interval="02" value="000.050" />
        <reading interval="03" value="000.080" />
        <reading interval="04" value="000.010" />

    </load_survey>
</data_reading>

These are my classes
@XmlAccessorType(XmlAccessType.FIELD)
public class LoadSurvey {

    @XmlElement(name="interval_settings")
    private IntervalSettings interval_settings;
    @XmlElement(name="measurement")
    private Measurement measurement;
    @XmlElement(name="reading", type = Reading.class)
    private List<Reading> readings;
//setter and getters
}

@XmlRootElement(name="data_reading")
@XmlAccessorType(XmlAccessType.FIELD)
public class DataReading {

    @XmlElement(name="load_survey")
    private LoadSurvey load_survey;

}

This is my code Here i am getting following output

[data_reading [load_survey=LoadSurvey [interval_settings=IntervalSettings [value=30, xunit=mins], measurement=Measurement [name=energy_real, xunit=KWH], readings=[Reading [interval=00, value=0.23], Reading [interval=01, value=0.23], Reading [interval=02, value=0.22], Reading [interval=03, value=0.21], Reading [interval=04, value=0.23], Reading [interval=05, value=0.24], Reading [interval=00, value=0.23], Reading [interval=01, value=0.23], Reading [interval=02, value=0.22], Reading [interval=03, value=0.21], Reading [interval=04, value=0.23], Reading [interval=05, value=0.24]]]]

Getting Readings list duplicates with jaxb please provide any solution 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:02:55.913

在列表中获取重复项的唯一方法是，如果您已经映射了字段（实例）变量和相应的属性（get/set 方法）。由于您已指定`XmlAccessType.FIELD`，请确保您没有`get`为 list 属性注释方法。

**了解更多信息**

*   [http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html](http://blog.bdoughan.com/2010/09/jaxb-collection-properties.html)
*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

* * *

你的例子对我来说很好。我在下面包括了我所做的：

**JAVA模型**

下面是一个部分模型，重点关注您观察到问题的部分。

**数据读取**

```
import javax.xml.bind.annotation.*;

@XmlRootElement(name="data_reading")
@XmlAccessorType(XmlAccessType.FIELD)
public class DataReading {

    @XmlElement(name="load_survey")
    private LoadSurvey load_survey;

} 
```

**负载调查**

```
import java.util.List;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class LoadSurvey {

    @XmlElement(name="reading")
    private List<Reading> readings;

} 
```

**阅读**

```
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Reading {

    @XmlAttribute
    private String interval;

    @XmlAttribute
    private String value;

} 
```

**演示代码**

**演示**

```
import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(DataReading.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum15833602/input.xml");
        DataReading dataReading = (DataReading) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(dataReading, System.out);
    }

} 
```

**输入.xml/输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<data_reading>
    <load_survey>
        <reading interval="00" value="000.010"/>
        <reading interval="01" value="000.000"/>
        <reading interval="02" value="000.050"/>
        <reading interval="03" value="000.080"/>
        <reading interval="04" value="000.010"/>
    </load_survey>
</data_reading> 
```

# java - 如何在jsp页面上显示来自mysql数据库的图像？

> ID：15829367
> 
> 赞同：3
> 
> 时间：2013-04-05T08:36:55.547
> 
> 标签：java, mysql, jsp, tomcat, servlets

我想显示存储在 MySQL 数据库中的图像。为了检索图像，我使用了一个 servlet。请告诉我如何在jsp页面中显示它。这是流程：

```
login.html ---> dologin.jsp 
```

login.html 和 servlet 几乎准备就绪。请告诉我如何完成 dologin.jsp。

登录.html

```
<html>
<head>
<style type="text/css">
html, body, div, h1, h2, h3, h4, h5, h6, p, img, dl,
  dt, dd, ol, ul, li, table, tr, td, form, object, embed,
  article, aside, command, details, fieldset,
  figcaption, figure, footer, group, header, hgroup, legend
{
  margin: 0;
  padding: 0;
  border: 0;
}
html {
  font: 82.5% verdana, helvetica, sans-serif;
  background: #fff;
  color: #333;
  line-height: 1;
  direction: ltr;
}
html, body {
  position: absolute;
  height: 100%;
  min-width: 100%;
}   

table {
  border-collapse: collapse;
  border-spacing: 0;
}

.signin-header {
  padding: 10px 12px 5px;
  background:#00AAFF;
  border: 1px solid #e5e5e5;
  width: 362px;
  float: right;
}
.signin-box {
  padding: 20px 25px 15px;
  background:#DEDEDE;
  border: 1px solid #e5e5e5;
  width: 335px;
  float: right;
}

.button {
  min-width: 46px;
  text-align: center;
  color: #444;
  font-size: 11px;
  font-weight: bold;
  height: 27px;
  padding: 0 8px;
  line-height: 27px;
  border-radius: 2px;
  transition: all 0.218s;
  border: 1px solid #dcdcdc;
  background-color: #f5f5f5;
  cursor: default;
}

*+html .button {
  min-width: 70px;
}

button.button,
input[type=submit].button {
  height: f1f1f1px;
  line-height: 29px;
  vertical-align: bottom;
  margin: 0;
}

.button:hover {
  border: 1px solid #c6c6c6;
  color: #333;
  text-decoration: none;
  transition: all 0.0s;
  background-color: #f8f8f8;
  box-shadow: 0 1px 1px rgba(0,0,0,0.1);
}
.button:active {
  background-color: #f6f6f6;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
}
.button:visited {
  color: #666;
}  
.button-submit {
  border: 1px solid #3079ed;
  color: #fff;
  text-shadow: 0 1px rgba(0,0,0,0.1);
  background-color: #4d90fe;
}
.button-submit:hover {
  border: 1px solid #2f5bb7;
  color: #fff;
  text-shadow: 0 1px rgba(0,0,0,0.3);
  background-color: #357ae8;
}
button-submit:active {
  background-color: #357ae8;
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.3);
}

.footer-bar {
  position: absolute;
  bottom: 0;
  height: 35px;
  width: 100%;
  border-top: 1px solid #ebebeb;
  overflow: hidden;
}
.footer {
  padding-top: 9px;
  font-size: .85em;
  white-space: nowrap;
  line-height: 0;
}
.footer ul {
  color: #999;
  float: left;
  max-width: 80%;
}
.footer ul li {
  display: inline;
  padding: 0 1.5em 0 0;
}
.footer a {
  color: #333;
}
.footer .lang-chooser-wrap {
  float: right;
  max-width: 20%;
}
.footer .lang-chooser-wrap img {
  vertical-align: middle;
}
.footer .attribution {
  float: right;
}
.footer .attribution span {
  vertical-align: text-top;
}
.content {
  padding: 0 44px;
}

.table {
  padding: 0 55px
}
</style>
<script type="text/javascript">
function ccheck()
{
uid=document.f1.uid.value;
cpass=document.f1.cpass.value;

if(uid=="" || uid==null)
{
alert("Plz. Enter Your User ID");
document.f1.uid.focus();
return false;
}
if(cpass=="" || cpass==null)
{
alert("Plz. Enter Your Password");
document.f1.cpass.focus();
return false;
}
return true;
}
</script>
<title>Login Page</title>
</head>
<body onload="document.f1.uid.focus()" style="background-image:url('medical.jpg');background-position: center">
    <form id="f1" name="f1" action="doDelete.jsp" method="get" onsubmit="return ccheck()">

        <img src="header.png"><br><br><br><br><br>
        <table><tr><td>
            <table class="table"><tr><td>
                <table class="table"><tr><td>
                    <div class="content"><div class="signin-header"><h3>Welcome to DiaEmr</h3></div></div>
                </td></tr>
                <tr><td>
                    <div class="content">
                    <div class="signin-box">
                    <p class="one">
                        Welcome to all at the <b>"Workshop on Ileal Interposition".</b><br>

                        <b>Brazil</b> to inaugurate & launch this very important Data Registry<br>
                        Key features of the solution-<br>
                    </div>  
                </div>
            </td></tr></table>
        </td>
        <td>image</td>
        <td>
            <table class="table"><tr><td>
                <div class="content">
                    <div class="signin-header">
                        <h3>Portal Login</h3>
                    </div>
                </div>
            </td></tr>
            <tr><td>
                <div class="content">
                    <div align="center" class="signin-box">
                        <table class="table"><tr><td>
                            <b>User ID</b></td>
                        <td><input name="uid" type="text" /></td>
                        </tr>
                        <tr><td>
                            <b>Password</b></td>
                        <td><input name="cpass" type="password" /></td>
                        </tr>
                        <tr>
                            <td><input type="submit" class="button button-submit" value="Submit" /></td>
                            <td><input type="reset" class="button button-submit" value="Reset" /></td>
                        <tr>New User<a href ="UserRegistration.jsp">Register</a></tr><br>
                        </tr></table>
                    </div>
                </div>
            </td></tr></table>
        </td></tr></table>
    </td></tr></table>
    <div class="footer-bar">
        <img align="left" src="footer.png">
    </div>
</form>
</body>
</html> 
```

小服务程序

```
import java.sql.*;
import DB.DataBaseConnection;

import java.io.IOException;
import java.io.InputStream;

import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class imagetestServlet
 */
@WebServlet("/imagetestServlet")
public class imagetestServlet extends HttpServlet {

    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public imagetestServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    public void doGet(HttpServletRequest request, HttpServletResponse response) 
              throws IOException,ServletException {

                 Blob image = null;
                  Connection con = null;
                  Statement stmt = null;
                  ResultSet rs = null;
                  DataBaseConnection db= new DataBaseConnection();
                  ServletOutputStream out = response.getOutputStream();
                  try {
                  Class.forName("com.mysql.jdbc.Driver");
                  con=db.connet();
                  stmt = con.createStatement();
                  rs = stmt.executeQuery("select img from one where  id = '4'");
                  if (rs.next()) {
                  image = rs.getBlob(1);
                  } else {
                  response.setContentType("text/html");

                  out.println("<font color='red'>image not found for given id</font>");

                  return;
                  }
                  response.setContentType("image/gif");
             InputStream in = image.getBinaryStream();
              int length = (int) image.length();
              int bufferSize = 1024;
              byte[] buffer = new byte[bufferSize];
              while ((length = in.read(buffer)) != -1) {
              out.write(buffer, 0, length);
              }
              in.close();
              out.flush();

            } catch (Exception e) {
              response.setContentType("text/html");
              out.println("<html><head><title>Unable To Display image</title></head>");
              out.println("<body><h4><font color='red'>Image Display Error=" + e.getMessage() +
               "</font></h4></body></html>");
              return;
              } 
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:24:45.527

**你为什么不试试这样：**

1.  我有一个**getImageDetails.jsp**来根据 user_id 或 name 或其他一些约束从数据库中检索图像数据，如下所示（将代码放在 jsp/servlet 页面中）

    ```
    int img_id = Integer.parseInt(request.getParameter("your_id"));
    Connection con = //get your connection object here ;
    ResultSet rs = null;
    PreparedStatement pstmt = null;
    OutputStream oImage;
    try {
    pstmt = con.prepareStatement("your sql statement for retriving the image column data");
    pstmt.setInt(1, img_id);
    rs = pstmt.executeQuery();
        if(rs.next()) {
            byte barray[] = rs.getBytes(1);
            response.setContentType("image/gif");
            oImage=response.getOutputStream();
            oImage.write(barray);
            oImage.flush();
            oImage.close();
        }
    }
    catch(Exception ex){
        //ex.printStackTrace();
    }finally {
        try{
        if(con!=null)
           con.close();
        }catch(Exception ex){
           // ex.printStackTrace();
        }
    } 
    ```

2.  然后我从 html 或任何其他 jsp 页面调用此页面，如下所示

    **<img src="getImageDetails.jsp?your_id=12" width="50" height="50" />**

请尝试这样你会得到答案

让我知道状态快乐编码

# java - 子菜单上未设置图标

> ID：15829368
> 
> 赞同：0
> 
> 时间：2013-04-05T08:36:58.817
> 
> 标签：java, android, android-menu

我在 android 中创建了一个子菜单，我想在子菜单上添加图标，但它不显示。我编写了以下代码片段：

```
 int base = Menu.FIRST;

    SubMenu sm = menu.addSubMenu(base, base + 1, Menu.NONE, "submenu");
    MenuItem item1 = sm.add(base, base + 2, base + 2, "sub item1");

    sm.add(base, base + 3, base + 3, "sub item2").setIcon(R.drawable.block_user);
    sm.add(base, base + 4, base + 4, "sub item3").setIcon(R.drawable.extendedaway);
    item1.setIcon(R.drawable.away);
    sm.setIcon(R.drawable.chaty); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:32:00.667

我认为子菜单不支持图标。在 SO 中进行搜索，例如：[添加带有子菜单项的图标](https://stackoverflow.com/questions/12634171/adding-icon-with-submenu-items)

请参阅本教程：[http ://www.linuxtopia.org/online_books/android/devguide/guide/topics/ui/menus.html](http://www.linuxtopia.org/online_books/android/devguide/guide/topics/ui/menus.html)

> **选项菜单**
> 
> 这是 Activity 的主要菜单项集。按下设备 MENU 键即可显示。选项菜单中有两组菜单项：
> 
> 图标菜单 这是在按下 MENU 键时最初在屏幕底部可见的项目集合。它最多支持六个菜单项。这些是唯一支持图标的菜单项和唯一不支持复选框或单选按钮的菜单项。
> 
> 扩展菜单 这是由图标菜单中的“更多”菜单项公开的项目的垂直列表。它仅在图标菜单超载时存在，并且由第六个选项菜单项和其余项组成。

它有点过时了，但我认为它没有改变。

# spring-ws - Spring 3.1 Web 服务工作示例

> ID：15829372
> 
> 赞同：2
> 
> 时间：2013-04-05T08:37:04.893
> 
> 标签：spring-ws, spring-tool-suite

请向我推荐一些有用的链接，这些链接逐步实现了 Spring Web 服务示例示例。我需要在 Spring Tool Suite 中安装一些插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T13:17:33.477

正如@evandongen 所说，Spring 3.1 具有 REST Web 服务。SOAP Web 服务可以使用 Spring-WS 实现，目前版本为 2.1.3。[Spring-WS 手册](http://static.springsource.org/spring-ws/sites/2.0/reference/html/tutorial.html)有一个教程，它逐步向您展示如何实现 SOAP Web 服务。

# dynamics-crm-2011 - Dynamics CRM 获取扩展属性

> ID：15829373
> 
> 赞同：0
> 
> 时间：2013-04-05T08:37:06.743
> 
> 标签：dynamics-crm-2011, dynamics-crm

我为系统实体创建了一个自定义字段。**如何通过后期绑定通过 XRM Web 服务访问属性值？**

我正在使用这段代码，但它给了我`EntityReference`对象：

```
Entity objCase = service.Retrieve("incident", new Guid(Request.QueryString["EntityID"]), attributes);
string strValue = objCase.Attributes["new_papid"]).ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:57:14.423

您正在检索查找值，在这种情况下，您需要先转换为实体引用

```
Entity objCase = service.Retrieve("incident", new Guid(Request.QueryString["EntityID"]), attributes);
EntityReference pap = (EntityReference)objCase.Attributes["new_papid"];
Guid papId = pap.Id; // ID of the record;
string papName = pap.Name; // Primary attribute of the entity; 
```

# java - 获取 WSDL（服务器端）时如何强制执行基本身份验证

> ID：15829374
> 
> 赞同：2
> 
> 时间：2013-04-05T08:37:07.437
> 
> 标签：java, web-services, authentication, wsdl, server-side

我正在寻找一种方法来强制客户端在尝试检索我的`WSDL`文件时使用 HTTP 基本身份验证。使用`JAX-WS`我创建了以下 Web 服务，我使用 GlassFish 3：

```
@WebService(serviceName = "Hello")
@Stateless
public class HelloService {
    @WebMethod(operationName = "sayHello")
    @RolesAllowed("myrole")
    public String sayHello(@WebParam(name = "name") @XmlElement(required=true) String name){
        return "Hello "+name;
    }
} 
```

在谷歌搜索之后，似乎向`web.xml`描述符添加安全约束应该可以解决这个问题，所以我做了

```
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<security-constraint>
    <display-name>HelloSC</display-name>
    <web-resource-collection>
        <web-resource-name>HelloRC</web-resource-name>
        <url-pattern>/*</url-pattern>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
        <http-method>HEAD</http-method>
    </web-resource-collection>
    <auth-constraint>
        <role-name>myrole</role-name>
    </auth-constraint>
    <user-data-constraint>
        <transport-guarantee>NONE</transport-guarantee>
    </user-data-constraint>
</security-constraint>
<login-config>
    <auth-method>BASIC</auth-method>
    <realm-name>file</realm-name>
</login-config> 
```

现在，当我部署并将浏览器指向 http:// `myserver`/Hello 时，浏览器会要求提供凭据。此外，该`sayHello`方法只能使用正确的凭据使用。

问题：到目前为止一切顺利，但如果我将浏览器指向 WSDL (http:/// `myserver`Hello/HelloService?wsdl)，则不会要求我提供凭据，它只是加载，并且要求它应该受密码保护

我的理解是 url 模式也应该适用于 WSDL。毕竟这是一个 GET 请求......

任何指针？

编辑：所以我将 .war 部署到 JBoss 实例，它按预期工作。似乎 GlassFish 缺少一些配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:48:41.723

您的配置看起来正确。我想如果您`[http://example.org/Hello/HelloService?wsdl](http://example.org/Hello/HelloService?wsdl)`在新浏览器中打开（或关闭当前浏览器的所有窗口并再次打开它），您将需要执行基本身份验证。这里的问题是，在第一次成功身份验证后，浏览器会在每个请求中发送基本身份验证标头，并且请求由服务器进行身份验证。

*评论后* 添加 请尝试添加额外的http-method

```
<http-method>DELETE</http-method>
<http-method>PUT</http-method>
<http-method>HEAD</http-method>
<http-method>OPTIONS</http-method>
<http-method>TRACE</http-method>
<http-method>GET</http-method>
<http-method>POST</http-method> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T15:45:40.780

对于任何感兴趣的人，这仅在 GlassFish 3 特定描述符中添加安全约束后才有效： **META-INF/glassfish-ejb-jar.xml**：

```
<glassfish-ejb-jar>
  <enterprise-beans>
    <ejb>
      <ejb-name>HelloService</ejb-name>
      <webservice-endpoint>
        <port-component-name>Hello</port-component-name>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
      </webservice-endpoint>
    </ejb>
  </enterprise-beans>
</glassfish-ejb-jar> 
```

然后从**web.xml中删除安全约束**

# installation - 为什么我需要为 wix 中的版本升级指定新的 guid

> ID：15829375
> 
> 赞同：3
> 
> 时间：2013-04-05T08:37:08.303
> 
> 标签：installation, wix

我刚刚根据上一个问题/答案更新了我们的 wix 安装脚本[如何实施 WiX 安装程序升级？](https://stackoverflow.com/questions/114165/how-to-implement-wix-installer-upgrade). 这个想法是为了防止旧版本“降级”新版本。所以我有部分 wix 文件看起来像：

```
 <Product Id="A_GUID"
    <Upgrade Id="18626be5-521c-4b58-ab8a-54baddf66679">
      <UpgradeVersion
        Property="NEWERVERSIONDETECTED"
        Minimum="$(var.Version)"
        IncludeMinimum="no"
        OnlyDetect="yes"
        ExcludeLanguages="yes"        
        />
     </Upgrade>

     <CustomAction Id="NewerVersionFound" Error="Can't downgrade." />

     <InstallExecuteSequence>
       <Custom Action="NewerVersionFound"
             After="FindRelatedProducts">NEWERVERSIONDETECTED</Custom>
       <RemoveExistingProducts After="InstallInitialize" />
     </InstallExecuteSequence> 
```

我有两个版本，比如 2.1 和 2.2。当前的做法是保持 Product Id Guid（如上面的“A_GUID”）对于次要版本（如 2.x）相同，并且只更改主要版本 - 因此从 1.x 移动到 2.x 我们更改了 Guid .

但是，如果 2.1 和 2.2 的 Product Guid 保持不变，尽管 '$(var.Version)' 发生了变化，上述方法将不起作用。如果我更改 Guid，它确实有效（并防止降级 2.2 -> 2.1）。

我想知道为什么会这样（假设我做得正确） - 为什么我们需要两位信息（guid 和版本）才能工作？

Edit1a：wix 中有一个 UpgradeCode Guid，每个版本都保持相同。Edit1b：如果相关，这是使用旧版本的 wix (2.x) 完成的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T08:59:47.657

它与产品指南无关。

它始终与您在产品节点上指定为属性的 UpgradeCode 相关。

```
<Product Id="*" Name="name" Version="$(var.Version)" UpgradeCode="12345678-55F7-4731-A318-772EF75D2830"> 
```

在升级节点中，您正在查看升级代码（而不是产品 guid）。您可以指定多个升级代码来查找软件的不同版本。但升级代码通常应该在产品中保持不变。请参阅 MS 主页上的最佳实践。

```
 <Upgrade Id="12345678-55F7-4731-A318-772EF75D2830">
        <UpgradeVersion ExcludeLanguages="no" Property="OLDVERSIONFOUND"   
            IgnoreRemoveFailure="yes" MigrateFeatures="no" IncludeMinimum="no"                
            Minimum="0.0.0.0" Maximum="$(var.Version)" IncludeMaximum="no"                
        />
        <UpgradeVersion OnlyDetect="yes" Property="NEWAPPFOUND" IncludeMinimum="yes" Minimum="$(var.Version)" Maximum="99.99.99.99" />
    </Upgrade> 
```

通过自定义操作（您已经拥有），您可以对此做出反应。

```
 <CustomAction Id="OldAppFound" Error="Newer app of [ProductName] is installed" /> 
```

当然，您需要在序列中安排测试（您也这样做了）

```
 <InstallExecuteSequence>
        <Custom Action="OldAppFound" After="FindRelatedProducts">NEWAPPFOUND</Custom>
    </InstallExecuteSequence>
    <InstallUISequence>
        <Custom Action="OldAppFound" After="FindRelatedProducts">NEWAPPFOUND</Custom>
    </InstallUISequence> 
```

如有必要，请删除旧的（您的代码中也有）

```
 <InstallExecuteSequence>    
        <RemoveExistingProducts After="InstallInitialize" />
    </InstallExecuteSequence> 
```

# css - 使用“display: table-cell”有没有办法获得“colspan”功能？

> ID：15829377
> 
> 赞同：62
> 
> 时间：2013-04-05T08:37:13.133
> 
> 标签：css

使用`display: table-cell`有没有一种方法`colspan`可以获得使用真实表格单元格时可用的功能？

特别是我需要一些“单元格”来跨越多个列。

真实表格是不可能的，因为我使用的是*每行*布局的表单，它不会验证为真实表格。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-04-05T08:40:00.150

不，您不能将 colspan 或 rowspan 添加到 display:table-cell。这是表格单元格功能的限制之一！

您可以查看此参考链接中的限制

[http://www.onenaught.com/posts/201/use-css-displaytable-for-layout](http://www.onenaught.com/posts/201/use-css-displaytable-for-layout)

如果要将 COLSPAN 功能引入 table-cell，则必须使用 table-row-group 和 table-caption 功能，如下所示

```
display: table-caption 
```

和

```
table-row-group; 
```

检查这个小提琴链接：http: [//jsfiddle.net/ZQQY4/](http://jsfiddle.net/ZQQY4/)

# android - 在 android 中请求应用链接 - 没有请求 ID

> ID：15829378
> 
> 赞同：0
> 
> 时间：2013-04-05T08:37:14.890
> 
> 标签：android, facebook

我已经设置了一个基本应用程序，使用“发送请求”和“处理请求应用程序链接”文档作为参考。

现在，当我在我的应用程序设置中仅检查“Facebook 登录”时，请求应用程序链接根本不起作用 - facebook 应用程序进入无限“等待我加载某些内容”状态。

当我同时检查“Facebook 登录”和“深度链接”时，请求应用链接确实有效 - 但是，没有请求 ID 发送到我的应用。实际上，getIntent().getData() 只返回：http://www.facebook.com/apps/application.php?id=[app id]

这是我发送请求的代码：

```
Bundle params = new Bundle();
params.putString("message", invite_message);
WebDialog requestsDialog = (
    new WebDialog.RequestsDialogBuilder(this,
        Session.getActiveSession(), params)).setOnCompleteListener(new OnCompleteListener() {

            @Override
            public void onComplete(Bundle values, FacebookException error) {
                on_invite_request_complete(values, error);
            }

        }).build();
requestsDialog.show(); 
```

除了仔细检查 Facebook 的应用程序设置之外，还有什么建议吗？还是在这些场景中真的很容易错过一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:45:14.690

没关系 - 查看“了解问题”页面显示，自 28 日 3 月以来，Facebook 在 Android 上的通知存在问题。

# html - 获取UIWebView当前滚动偏移的div

> ID：15829379
> 
> 赞同：6
> 
> 时间：2013-04-05T08:37:15.723
> 
> 标签：html, objective-c, uiwebview, uiscrollview

我有两个不同的 HTML 文件，两个不同`UIWebViews`的 & 一个`UISegmentControl`. 在 上`segmentChanged`，我`WebView`通过加载 HTML 文件显示了 。两个 HTML 文件都包含公共部分，仅更改了部分内容。现在我想实现这样的功能，当用户读取`section 1.1`first`WebView`并点击`Segment`加载 second`WebView`时，第二个`WebView`需要`scroll`达到`section 1.1`他首先读取的内容`WebView`，反之亦然。还有n个部分。我使用了以下 javacript 但它需要 current 的参数`div id`。但是`scroll`，我怎样才能获得当前的可见性`div id`。我给了`id`for each `div`。

```
function pointInView(id)
{
    var divid = document.getElementById(id);
    divid.scrollIntoView(true);
    return false;
} 
```

任何人请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T03:15:47.537

我认为 jquery 可能会来拯救你。

你可以使用 jQuery，因为它是跨浏览器兼容的吗？

```
http://stackoverflow.com/questions/5353934/check-if-element-is-visible-on-screen 
```

查看 BenM 的答案表格

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T04:17:11.530

我进行了很多搜索以从当前获取 div id，`scroll offset`但没有得到解决方案。所以我选择了另一个选项，将每个部分的开始和结束偏移量存储在两个文件中。所以我在数据库中创建了一个查找表并将每个部分的开始和结束偏移量存储在两个文件中。

前任。当用户`scrolls`第一个`webview`到`section 1.1`& 点击开关打开第二个`webview`，然后我`scrolled`第二个`webview`到第二个文件中的 1.1 节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T22:18:32.180

你真的不需要一个 db 条目。只需通过类似的方式捕获点击事件

```
$('.action').click(function(){
    document.location = yourSecondFIleLocation+'?offset = ' + $('selectorDiv').detOffsetFromParentDiv(); //or get the scroll offset from the page.
}); 
```

并使用 php 或 jQuery 在第二页上捕获它以滚动到它。

如果您在代码中放入段落标记并正确链接到它们，这甚至是可以实现的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T05:23:22.073

请在下面尝试，

要在任何位置滚动任何滚动视图，我们设置滚动视图的内容偏移量。为了解决您的问题，我们有两种解决方案，

1.  在您的情况下，当用户查看第一个 Web 视图时，将第一个 Web 视图的内容偏移量保存在任何变量中，例如 CGFloat offset = webView1.scrollView.contentOffset.y; 然后，当您打开第二个 Web 视图时，将此偏移值提供给第二个 Web 视图滚动偏移量。

2.  根据您的需要设置 webView1.scrollView.contentOffset=webView2.scrollView.contentOffset 或反之亦然

我希望这能帮到您。

# linux - 审计特定的系统调用参数值

> ID：15829381
> 
> 赞同：3
> 
> 时间：2013-04-05T08:37:23.367
> 
> 标签：linux, system-calls, auditing, timestamp

我想在我的 GNU/Linux 机器上部署专注于一些更复杂场景的审计，例如执行 touch -m 'faketime' somefile 之类的命令。我对 exec 进行了跟踪，发现了普通触摸和带有时间戳修改标志的触摸之间的区别。它们分别是：

> utimes("/proc/self/fd/0", NULL) = 0
> 
> utimes("/proc/self/fd/0", {{1364383142, 0}, {1364383160, 875693}}) = 0

因此，捕获 utimes 系统调用的可疑事件似乎很容易；它的第二个 (a1) 参数必须为 NULL。我尝试设置以下审计规则：

> -a 退出，总是 -F arch=b32 -S utimes -F a1!=0 -k TIMESTAMP_TAMPERING

但是它没有接听电话。auditd 在 a1-4 参数中不接受值（NULL）的文本表示，至少我在尝试实现它时遇到了麻烦。有什么建议么？提前致谢。

# c# - 在 C# 类中使用 set

> ID：15829382
> 
> 赞同：-1
> 
> 时间：2013-04-05T08:37:27.350
> 
> 标签：c#, .net

我有以下课程：

```
public class Class1
{
    private int pam1;

    public Class1()
    {

    }

    public void ChangePam1(int _NewValue)
    {
        UpdatePam1(_NewValue);
        pam1 = _NewValue;
    }

    public int Pam1
    {
        set { this.pam1 = value; }
        get { return this.pam1; }
    }
} 
```

目前，当我想更改 的值时`Pam1`，我执行以下操作：

```
int n = 500;
Class1 c1 = new Class1();
c1.ChangePam1(n); 
```

我怎样才能改变它使用`Set`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T08:38:13.933

你可以这样做（它会调用`set`）：

```
public class Class1
{
    private int pam1;

    public Class1(){}

    private void ChancePam1(int newValue)
    {
        UpdatePam1(newValue);
        pam1 = newValue;
    }

    public int Pam1
    {
        set { ChancePam1(value); }
        get { return this.pam1; }
    }
} 
```

然后：

```
int n = 500;
Class1 c1 = new Class1();
c1.Pam1 = n; 
```

也有看看[这个](http://msdn.microsoft.com/en-us/library/w86s7x04.aspx)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T08:39:18.513

只需设置`c1`对象的`Pam1`属性。

```
c1.Pam1 = n; 
```

或者你可以使用；

```
public int Pam1
{
    set { ChancePam1(value); }
    get { return this.pam1; }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T08:40:46.763

如果您想让它做其他事情，请在您的代码中定义它

```
public int Pam1
{
    set { 
         this.pam1 = value; 
         UpdatePam1(value);
         }
    get { return this.pam1; }
} 
```

您`setter`几乎可以像正常方法一样工作。

如有疑问，请考虑有关该主题的[MSDN 。](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-05T08:41:56.593

以下列方式改变你的班级可能是一个好主意：

```
public class Class1
{
    private int pam1;

    public Class1()
    {

    }

    public int Pam1
    {
        set { UpdatePam1(_NewValue);this.pam1 = value; }
        get { return this.pam1; }
    }
} 
```

...并与您的财产合作：

```
int n = 500;
Class1 c1 = new Class1();
c1.pam1=n; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-05T08:42:38.810

你只需要在你的集合中调用 UpdatePam1(value)

```
public int Pam1
{
    set { UpdatePam1(value);
          pam1 = value; 
        }
    get { return this.pam1; }
} 
```

或者

```
 public int Pam1
{
    set { ChangePam1(value); }
    get { return this.pam1; }
} 
```

# cuda - CUDA：指令获取问题

> ID：15829384
> 
> 赞同：1
> 
> 时间：2013-04-05T08:37:39.010
> 
> 标签：cuda

我编写了一个内核，它在指令获取方面存在一些问题。超过 75% 的问题停止原因是由于指令获取。

我不知道如何改善这一点。Nvidia 没有说明指令获取策略，Nsight 文档也没有带来任何启示：“如果尚未获取下一条汇编指令，则指令获取停止原因。”

有什么办法可以避免这个问题（或减少影响）？![在此处输入图像描述](https://i.stack.imgur.com/weRPL.png)

# ios - 水平展开的uiscrollview还是uitableview？

> ID：15829389
> 
> 赞同：1
> 
> 时间：2013-04-05T08:37:55.837
> 
> 标签：ios, uitableview, uiscrollview, collapse, expandable

![非展开时的状态 <code>uiscrollview</code>](https://i.stack.imgur.com/FFJqr.png)

![<code>uiscrollview</code> 展开时的状态](https://i.stack.imgur.com/uhkuA.png)

我想创建一个`uiscrollview`像上面显示的图像一样的扩展。我尝试使用关键字进行搜索，但找不到与我想要实现的目标类似的任何示例。

我想知道我是否应该使用`uiscrollview`or `uitableview`？

任何建议将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:41:40.367

你可以创建一个 UITableView 然后逆时针旋转 90 度，它会像一个魅力一样工作。

只需创建一个 UITableView 子类（ir Horizo​​ntalUITableView）并在 initWithFrame 中，将视图旋转 90 度：

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        self.transform = CGAffineTransformMakeRotation(-M_PI/2.0);
        self.showsVerticalScrollIndicator = NO;
    }
    return self;
} 
```

您还需要继承您的 UITableViewCell 并将它们旋转 90 度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:22:26.857

假设我正确解释了您的图像，我建议您首先创建一个 UIView 子类来代表其中一个堆栈。它将需要管理项目/图像列表，并能够在展开/折叠模式之间进行动画处理。然后创建一个 UIScrollView 子类来管理一组这些堆栈，并让它根据每个堆栈展开/折叠时的当前大小为堆栈的布局设置动画。

# php - 为什么 session 使用 codeigniter 自动过期？如果在网页上使用 ajax 调用

> ID：15829396
> 
> 赞同：1
> 
> 时间：2013-04-05T08:38:15.337
> 
> 标签：php, jquery, ajax, codeigniter, session

我是 php codeigniter 会话的新人。我在我的网站上有一个关于会话到期的问题。我正在使用 ajax coll 在我们的网站页面上加载广告 div，并添加到购物车功能以在同一页面上添加多个产品。但是由于会话在批准后过期，我的购物车添加的产品是空的。4-5分钟。我对这个问题做了很多研究。我认为我的站点会话由于同时处理 ajax 和更新会话 ID 而过期。但我不确定。

**我已经配置了 config.php 文件，例如 -**

```
$config['sess_cookie_name'] = 'ci_session';
$config['sess_expiration']  = 0;
$config['sess_encrypt_cookie']= FALSE;
$config['sess_use_database']= TRUE;
$config['sess_table_name']  = 'ci_sessions';
$config['sess_match_ip']    = FALSE;
$config['sess_match_useragent']= TRUE;
$config['sess_time_to_update'] = 300; 
```

我还创建了表（ci_sessions）。

**请给我一个解决方案来解决这个问题。**

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:46:49.047

去年 CI 中有一个 session.php 补丁解决了 ajax+session 过期问题请看下面的补丁[LINK HERE](http://upshots.org/codeigniter/codeigniter-ajax-session-bug-fix)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T10:20:00.380

只要确保，有两个选择。

[1.](http://upshots.org/codeigniter/codeigniter-ajax-session-bug-fix)换成`system\libraries\Session.php`这个

2.扩展你原来的 session.php 像@undefined 答案。

如果你做 1 则不**要做**2，反之亦然。

我不知道更多。祝你好运 ！。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T08:54:41.663

这是一个 CI 错误，发送 Ajax 请求时会破坏会话，您可以扩展 CI_Session 类并`sess_update`仅在请求不是 Ajax 时调用。

```
class MY_Session extends CI_Session
{
    function sess_update()
    {
        // Listen to HTTP_X_REQUESTED_WITH
        if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH'] !== 'XMLHttpRequest') {
            parent::sess_update();
        }
    }
} 
```

为了加载`MY_Session`类，您可以将此函数添加到您的`config`文件中：

```
function __autoload($classname) {
    if (strpos($classname, 'CI_') !== 0) {
        $file = APPPATH . 'libraries/' . $classname . '.php';
        if (file_exists($file) && is_file($file)) {
            @include_once($file);
        }
    }
} 
```

# c# - 使用ie10 c# winform的webbrowser

> ID：15829397
> 
> 赞同：5
> 
> 时间：2013-04-05T08:38:18.700
> 
> 标签：c#, winforms, registry

我想强制 webbrowser 在我的 c# winform 应用程序中使用 IE10。我知道还有其他类似的问题，但我已经阅读了很多，但我不知道我错在哪里。

这是我的代码：

```
RegistryKey registrybrowser = Registry.LocalMachine.OpenSubKey
           (@"SOFTWARE\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION", true);
        registrybrowser.SetValue("myAppName", 0x02710, RegistryValueKind.DWord); //Even with QWord 
```

我尝试了不同的方法来设置值，例如：

```
registrybrowser.SetValue("myAppName", 1000, RegistryValueKind.DWord); //Even with QWord and String
registrybrowser.SetValue("myAppName", 1000); //even with 0x02710 
```

我在 InitializeComponent() 之前将它写在我的主项目的构造函数中。我在 .manifest 文件中设置了管理员权限

感谢所有人， BlackShawarna

编辑：我发现 RegistryKey.SetValue(...); 在另一个路径中创建了一个键：

```
(@"SOFTWARE\Wow6432Node\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION") 
```

即使我的指示说：`Registry.LocalMachine.OpenSubKey (@"SOFTWARE\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION", true);`

我认为这是因为 IE10 在 32 位模式下工作。但是，即使我指定了另一个路径，我也不明白为什么它会写入该路径，最重要的是，为什么即使我打开 Registry.LocalMachine.OpenSubKey(@"Software\Wow6432Node...." );

如果我只在 x64 模式下运行我的程序，转到 properties/build/x64，它不会在我的原始路径中写入密钥。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-16T13:32:34.903

我的应用程序将值写入“HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION”时遇到了同样的问题。

我将 LocalMachine 更改为 CurrentUser，现在它可以工作了。

```
string executablePath = Environment.GetCommandLineArgs()[0];
string executableName = System.IO.Path.GetFileName(executablePath);

RegistryKey registrybrowser = Registry.CurrentUser.OpenSubKey
   (@"SOFTWARE\Microsoft\Internet Explorer\Main\FeatureControl\FEATURE_BROWSER_EMULATION", true);

if (registrybrowser == null)
{
    RegistryKey registryFolder = Registry.CurrentUser.OpenSubKey
        (@"SOFTWARE\Microsoft\Internet Explorer\Main\FeatureControl", true);
    registrybrowser = registryFolder.CreateSubKey("FEATURE_BROWSER_EMULATION");
}
registrybrowser.SetValue(executableName, 0x02710, RegistryValueKind.DWord);
registrybrowser.Close(); 
```

可执行文件名称类似于“myAppName.exe”

注意：如果 DLL 中的 WebBrowser 控件，您需要指定宿主 EXE 的名称，无论它可能是什么，例如`System.AppDomain.CurrentDomain.FriendlyName`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-26T13:11:07.950

`FEATURE_BROWSER_EMULATION` `"myAppName.exe"=10000`（或 0x02710）而不是 1000。

在`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION`

和`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION`

这个对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T18:33:29.470

你必须说“myAppName.exe”而不是“myAppName”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-09T21:38:04.093

*如果*您可以控制正在呈现的页面（例如 Intranet 页面）以及使用 WebBrowser 控件呈现页面的应用程序，则可以在页面中指定元标记

```
<meta http-equiv="X-UA-Compatible" content="IE=10" /> 
```

并根据需要使用 WebBrowser 控件。您必须在机器上安装 IE 10。

万一您想模拟其他版本的 IE，您可以简单地替换`"IE=10"`为`"IE=EmulateIE9"`等`"IE=EmulateIE8"`。

# javascript - 如何将特殊字符作为字符串连接到javascript中的文本？

> ID：15829399
> 
> 赞同：1
> 
> 时间：2013-04-05T08:38:24.217
> 
> 标签：javascript, special-characters

如何将字符`\`作为字符串连接到javascript中的文本？我想用javascript写这个代码行：

```
var x = "$$\" + $("#formul").val() + "$$"; 
```

这该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T08:39:02.110

转义反斜杠：

```
var x = "$$\\" + $("#formul").val() + "$$"; 
```

您当前遇到的问题是反斜杠是转义字符。它转义了以下`"`字符，因此您的字符串不会关闭。

# vb.net - 在 Visual Basic 中使用 toupper 和 tolower

> ID：15829402
> 
> 赞同：2
> 
> 时间：2013-04-05T08:38:38.813
> 
> 标签：vb.net, case, tolower, toupper

试图让它改变解析字符串段的第一个字母的大小写。因此，如果用户在 txtName 中输入“JOHN WAYNE DOE”，那么它将显示“John Wayne Doe” return 是“JOHN WAYNE DOE” 我认为这是一个逻辑错误，因为众所周知我经常这样做，只是不知道我在哪里犯了错误。

```
 Dim name As String = txtName.Text
    name = name.Trim
    Dim names() As String = name.Split(CChar(" "))
    Dim firstName As String = names(0)
    Dim middleName As String = names(1)
    Dim lastName As String = names(2)

    Dim firstLetters1 As String = firstName.Substring(0, 1).ToUpper
    Dim otherletters1 As String = firstName.Substring(1).ToLower

    Dim firstLetters2 As String = middleName.Substring(0, 1).ToUpper
    Dim otherletters2 As String = middleName.Substring(1).ToLower

    Dim firstletters3 As String = lastName.Substring(0, 1).ToUpper
    Dim otherletters3 As String = lastName.Substring(1).ToLower

    MessageBox.Show("First Name: " & firstName & vbCrLf & "Middle Name: " & middleName & vbCrLf & "Last Name: " & lastName) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:00:25.777

只是提到这个替代方案

```
Dim currentCulture As CultureInfo = System.Threading.Thread.CurrentThread.CurrentCulture 
Dim titleCase = currentCulture.TextInfo.ToTitleCase(txtName.Text)
Console.WriteLine(titleCase)
Dim names() As String = titleCase.Split(" "c)
...... 
```

此方法确保字符串的正确大小写尊重当前区域性。
并且不需要如此多的直接拆分和字符串连接以及固有的内存占用。（在内部，一个 StringBuilder 用于操作输入字符串，最后只有一个 ToString() 来返回结果）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:43:05.373

试试这个：

```
MessageBox.Show(_
    "First Name: " & firstLetters1 & otherletters1 & vbCrLf & _
    "Middle Name: " & firstLetters2 & otherletters2 & vbCrLf & _ 
    "Last Name: " & firstLetters3 & otherletters3) 
```

String 是不可变类，您的`ToUpper`和`ToLower`调用会创建新实例。在消息框中，您传递的是旧的未处理实例。

* * *

**更新** 或者，您可以使用我们的旧电话：

```
 MessageBox.Show("First Name: " & firstName & vbCrLf & "Middle Name: " & middleName & vbCrLf & "Last Name: " & lastName) 
```

只要你之前这样做：

```
firstName = firstLetters1 & otherletters1
middleName = firstLetters2 & otherletters2
lastName = firstLetters3 & otherletters3 
```

这可能会让您更好地了解字符串的不变性是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:31:16.993

```
Dim Name As String = "JOHN WAYNE DOE"
Name = Microsoft.VisualBasic.StrConv(Name, VbStrConv.ProperCase) 
```

> 将给出输出“John Wayne Doe”

# android - ViewPager 转换上的 PageCurl 动画？

> ID：15829408
> 
> 赞同：9
> 
> 时间：2013-04-05T08:39:04.257
> 
> 标签：android, android-viewpager, android-animation

这是页面卷曲动画的演示： [http ://www.youtube.com/watch?v=aVZHN_o45sg](http://www.youtube.com/watch?v=aVZHN_o45sg)

有几个页面卷曲动画库：

*   [https://github.com/harism/android_page_curl](https://github.com/harism/android_page_curl)
*   [https://github.com/MysticTreeGames/android-page-curl](https://github.com/MysticTreeGames/android-page-curl)

它们旨在与位图可绘制对象一起使用，而不一定与视图组一起使用。如果想知道是否有人为 ViewPagers 提出了类似的页面卷曲过渡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T19:58:53.040

不是直接的方法..但是，如何通过 getDrawingCache() 方法创建视图组的位图并将位图传递给库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-03T05:07:02.897

[这](https://github.com/wajahatkarim3/EasyFlipViewPager/)是我刚刚遇到的一个图书馆；它有一个很好的页面卷曲转换。这不是您想要的完全相同的页面卷曲；但也许对任何人都有一些补救措施

**它看起来如何**

![](https://raw.githubusercontent.com/wajahatkarim3/EasyFlipViewPager/master/Art/book_flip_demo.gif)

**依赖**

```
implementation 'com.wajahatkarim3.easyflipviewpager:easyflipviewpager:1.0.0' 
```

**用法**

```
// Get ViewPager and Set Adapter        
myViewPager = findViewById(R.id.myViewPager);
pagerAdapter = new MyPagerAdapter(this);
myViewPager.setAdapter(pagerAdapter);

// Create an object of page transformer
BookFlipPageTransformer bookFlipPageTransformer = new BookFlipPageTransformer();

// Enable / Disable scaling while flipping. If true, then next page will scale in (zoom in). By default, its true.
bookFlipPageTransformer.setEnableScale(true);

// The amount of scale the page will zoom. By default, its 5 percent.
bookFlipPageTransformer.setScaleAmountPercent(10f);

// Assign the page transformer to the ViewPager.
myViewPager.setPageTransformer(true, bookFlipPageTransformer); 
```

# c++ - 在 Arduino 上使用最少数量的 PWM 引脚连接多个 RGB LED？

> ID：15829409
> 
> 赞同：0
> 
> 时间：2013-04-05T08:39:05.793
> 
> 标签：c++, arduino, rgb, led, pwm

我目前有一个**阳极**RGB 连接到我的 arduino 上的 11、10 和 9 个 PWM 引脚。但是我想在我的项目中再添加 3 个 LED，但我不想占用每一个 PWM 引脚。有没有办法让我在使用最少数量的引脚的同时连接所有 4 个 LED？请记住，我确实想将所有 12 个电阻器用于 4 个 LED。哦，如果有帮助的话，所有的 LED 都会做同样的事情（它们都是红色的，都变成蓝色，等等）。

这是我的电路板现在的样子：

![在此处输入图像描述](https://i.stack.imgur.com/GLrOI.png)

如果有人可以帮助我，那就太棒了！！！！感谢帮助！

PS 我附上了 .fzz 文件，这样如果你们中的任何人想编辑原理图，这将非常容易。[点击这里。](http://arduino.cc/forum/index.php?action=dlattach;topic=158540.0;attach=40427)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:02:12.730

如果所有操作总是相同的，只需将它们并联，这意味着您只需将第二个 LED 放入现有 LED 下方的面包板中。

如果 4 个 LED 的功耗太大，则必须使用晶体管作为放大器。我想给你发一张示意图，但我没有软件可以画出这样的。然而，使用晶体管放大 arduino 输出是很常见的事情......

希望我能帮上忙！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T17:59:58.947

无论您是在同一条 PWM 线路上串联还是并联连接 RGB LED，您的主要问题都将是从每条 PWM 线路中汲取的电流。Arduino 线路通常支持来自每个 GPIO 引脚的高达 40mA（最大 200mA/芯片）。如果您想要最大亮度，LED 通常允许每个通道高达 20mA。这意味着如果您想要每个 LED 的最大亮度，您真的不应该在每个 GPIO 引脚上放置两个以上的通道。这个计算告诉你，唯一合理的结果是使用晶体管实际为 LED 供电，并使用你的 Arduino 来控制晶体管。这是如何做到这一点的[一个描述](http://sunburst.usd.edu/~schieber/psyc770/transistors101.html)，但我相信你可以找到更多。

就 LED 接线而言，您实际上有两种选择：

*   [正如Kai Benjamin Heinz](https://stackoverflow.com/users/2245279/kai-benjamin-heinz)建议的那样串联连接 LED
*   将它们并联

我更喜欢并行配置：它更容易调试，也更容易确保所有 LED 的正确电流限制。还有 LED 正向电压的问题：大多数 LED 需要 1.8V-3V 的正向电压才能导通。如果您只有 5v 可以使用，那么您最多只能串联两个 LED，然后您无法确保每个 LED 上的正向电压正确。如果您尝试将三个串联起来，您可能会得到其中一些比其他更暗的结果，或者整个东西根本不亮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T22:22:33.523

根据 LED 上的计时粒度，您可以执行以下操作：

Arduino => 移位寄存器 => 晶体管 => 电阻器 => LED 引脚。

查看 Arduino 的 bitshift out 库。这将使您只使用几个引脚：时钟、信号和锁存器。

您可以菊花链串行输入、并行输出寄存器，以增加您可以通过这种方式控制的 LED 数量。然后会发生这样的事情：您发送一个位流，代表您想要打开/关闭哪些位，然后切换锁存器以更新值。通过这种方式，您可以 PWN 驱动大量三色 LED，而不会烧毁 IO 引脚。

请注意，时机变得至关重要。正如其他人所建议的，您可以获得专用的 RGB 驱动器 IC，但如果您想使用容易找到的部件，锁存移位寄存器是一个不错的选择。

如果你搜索，有很多关于移位寄存器上的 PWM 以及库的很好的教程。

# security - 在线时远程密码，离线时本地密码

> ID：15829414
> 
> 赞同：1
> 
> 时间：2013-04-05T08:39:24.337
> 
> 标签：security, passwords

所以我有一个应用程序，我希望用户能够在离线时使用。所以在线时会有密码，当用户离线时我会使用相同的密码。

它不是一个超级隐私敏感的应用程序，但我仍然宁愿不将整个散列加盐密码存储在本地磁盘上。所以我在想，我只是对密码进行哈希处理，并将结果哈希的前 4 位存储在磁盘上。这样，用户仍然在线或离线输入相同的密码。

这是一个好主意还是我被严重误导了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:19:43.507

当您在本地存储密码的哈希时没有任何问题，只需确保您需要像 BCrypt 这样的慢速密钥派生函数来创建哈希。

不必通过 Internet 传输哈希值，可能的过程如下所示：

1.  用户第一次输入他的密码。
2.  我们使用唯一的盐和高成本因素在本地对密码进行哈希处理，并将其存储在本地。
3.  我们将**原始密码**传输到服务器。
4.  服务器使用另一个唯一盐和正常成本因子对密码进行哈希处理，并将其存储在数据库中。

这样，本地密码哈希看起来与服务器密码哈希不同，您不会透露任何有关服务器密码哈希的信息。由于成本因素较高，暴力破解本地密码需要更多时间。由于无论如何您都想在本地存储某些内容，因此最好存储一个安全的散列，而不是散列的不安全部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:15:51.470

通常，此功能是一个坏主意。攻击者甚至不需要 SQL 注入来破坏密码哈希。

如果您存储生成的哈希的前 4 位数字，那么您可能会产生大量可能的密码。基数 16 的 4 位数字是 16^4 或只有 65536 个密码，或者换一种说法，它总是需要不超过 65536 次猜测才能获得一些正确的密码......这是**非常不安全**的。

加密文件系统也有类似的问题。他们必须能够验证密码，并且他们希望防止离线暴力破解。他们通常使用密钥拉伸，使用 bcrypt、scrypt 甚至 pbkdf2 来消耗相当数量的 ram 和 CPU 以验证密码是否正确。几千轮的 bcrypt 应该足以防止大多数离线攻击。

# django - 使用 login() 会丢失会话数据

> ID：15829415
> 
> 赞同：3
> 
> 时间：2013-04-05T08:39:30.363
> 
> 标签：django, session, login

会话何时创建和销毁？在我的应用程序中，我有

```
def app_login(request):
    request.session.set_expiry(0)
    if 'current_day' not in request.session:
        request.session['current_day'] = Utilities.default_day() 
```

然后再往下我使用：

```
 login(request, user) 
```

如果我以用户身份登录，这可以正常工作，并且“current_day”会保留在会话中。但是，如果我以该用户身份注销并以另一个用户身份登录，则“current_day”将丢失，并且在调用 login() 后无法立即使用。

我假设

```
logout(request) 
```

不会清除会话，并且当第二个用户尝试登录时，数据“current_'day”在会话中仍然可用，但调用 login(user) 可能会创建一个新会话。

这个假设是否正确以及如何最好地纠正这个假设？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:44:01.187

[登录源](https://github.com/django/django/blob/master/django/contrib/auth/__init__.py)：

```
def login(request, user):
    """
    Persist a user id and a backend in the request. This way a user doesn't
    have to reauthenticate on every request. Note that data set during
    the anonymous session is retained when the user logs in.
    """
    if user is None:
        user = request.user
    # TODO: It would be nice to support different login methods, like signed cookies.
    if SESSION_KEY in request.session:
        if request.session[SESSION_KEY] != user.pk:
            # To avoid reusing another user's session, create a new, empty
            # session if the existing session corresponds to a different
            # authenticated user.
            request.session.flush()
    else:
        request.session.cycle_key()
    request.session[SESSION_KEY] = user.pk
    request.session[BACKEND_SESSION_KEY] = user.backend
    if hasattr(request, 'user'):
        request.user = user
    user_logged_in.send(sender=user.__class__, request=request, user=user) 
```

匿名会话被保留（它们没有`SESSION_KEY`），作为不同的用户刷新会话重新登录。

注销也会刷新会话：

```
def logout(request):
    """
    Removes the authenticated user's ID from the request and flushes their
    session data.
    """
    # Dispatch the signal before the user is logged out so the receivers have a
    # chance to find out *who* logged out.
    user = getattr(request, 'user', None)
    if hasattr(user, 'is_authenticated') and not user.is_authenticated():
        user = None
    user_logged_out.send(sender=user.__class__, request=request, user=user)

    request.session.flush()
    if hasattr(request, 'user'):
        from django.contrib.auth.models import AnonymousUser
        request.user = AnonymousUser() 
```

这是刷新会话时仅有的两种情况。

您应该`current_day`在登录后设置（或使用自定义中间件检查每个请求是否存在）。

# safari - NPRuntime 插件说 Safari 中缺少插件（Windows）

> ID：15829432
> 
> 赞同：0
> 
> 时间：2013-04-05T08:40:35.167
> 
> 标签：safari, npapi, browser-plugin, npruntime

我开发了一个 NPRuntime 插件，一切正常，但它没有在 Safari 中初始化。我在 MozillaPlugins 注册表项中注册了该插件，它适用于 Chrome/FF/Opera，但 Safari 写道该插件丢失，尽管我在未安装的 safari 插件列表中找到了我的插件。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:58:27.390

这真的很难说。Apple 对 Windows 上的 Safari 的支持并不好，所以我自己也不太愿意支持它。如果这真的很重要，我建议您在所有 NPP_ 方法（​​以及您的 NP_ 函数）中添加日志记录，然后查看调用了什么；找出它是否甚至加载您的插件。通常，如果在启动期间某些事情没有按照浏览器的要求运行，它就会表现得好像根本没有找到它。

您还可以使用[进程监视器](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来查看它是否正在尝试加载文件。

# console - Glassfish 管理控制台 - 404 错误

> ID：15829434
> 
> 赞同：1
> 
> 时间：2013-04-05T08:40:44.450
> 
> 标签：console, glassfish, http-status-code-404, admin

我的 Glassfish 安装中有几个 WAR。有一天我发现 Glassfish 管理控制台消失了。当我尝试访问时，[请单击此处](https://myservername.com:4848/)- 我看到 404 HTTP 错误。

为什么 Glassfish 管理控制台丢失以及如何将其退回？

我不能简单地重新安装，因为它是生产服务器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-07T16:11:23.767

`http://myservername.com:4848/login.jsf` 尝试在此 url 中访问控制台：`http://myservername.com:4848`重定向到`http://myservername.com:4848/common/index.jsf`并且不起作用，因为 url 不存在。

我在这个主题中找到了这个解决方案：[https ://www.java.net/node/699754](https://www.java.net/node/699754)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-03T18:51:05.650

它很旧，但也许可以帮助某人。我现在遇到了类似的问题，问题的原因是磁盘空间不足。我删除了一些日志文件，重新启动 GF 后管理控制台恢复工作。

# android - 在android中的ksoap中解析日期参数时抛出双ID异常

> ID：15829435
> 
> 赞同：1
> 
> 时间：2013-04-05T08:40:46.290
> 
> 标签：android, android-ksoap2

我正在使用 android 中的 SOAP 解析。

实际上我的问题是，当我尝试将日期作为参数传递时，它会引发 doubleID 异常。

我的代码如下：

```
public SoapPrimitive getUserList() {

        SoapPrimitive result = null;

    String isNewTask = null;

    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    String startTime = "02-06-2013";
    SimpleDateFormat dateFormat = new SimpleDateFormat("MM-dd-yyyy"); 

    try {
        date1 = dateFormat.parse(startTime);
        System.out.println(date1);
    } 
    catch (ParseException e1) {
        // TODO Auto-generated catch block
        Log.i("ParseException",e1.getMessage());        
    }

    request.addProperty("fromDate", date1);

    request.addProperty("toDate", date1);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
new MarshalDate().register(envelope); 

    AndroidHttpTransport transport = new AndroidHttpTransport(URL);

        transport.debug = true;

        try {

            transport.call(SOAP_ACTION, envelope);

            result = (SoapPrimitive)envelope.getResponse();

            int count = request.getPropertyCount();

            String c = String.valueOf(count);

            Log.i("Count Value",c);

            isNewTask = result.toString();

            Log.i("Test", "------------------------------" + isNewTask);

        } 
        catch (IOException e) {
            Log.i("IOException",e.getMessage());
        } 
        catch (XmlPullParserException e) {
            Log.i("XmlPullParserException",e.getMessage());
        }

        return  result;
    } 
```

我已经关注了问题[kSOAP2 double ID exception](https://stackoverflow.com/questions/6130028/ksoap2-double-id-exception) 并且根据该问题也完成了......但没有成功。

请帮助我...提前谢谢...:)

# c# - 不将土耳其字符 Window 8 应用程序插入 Sqlite

> ID：15829441
> 
> 赞同：4
> 
> 时间：2013-04-05T08:41:13.953
> 
> 标签：c#, sqlite, microsoft-metro, windows-store-apps

我一直在使用 Windows 8 应用程序上的 Sqlite 数据库。（用于 Windows 运行时的 Sqlite）
插入数据库时​​出现土耳其语字符问题。
我该如何解决这个问题。你能帮助我吗？
非常感谢。
简单的来。

```
using (var db = new SQLite.SQLiteConnection(App.DbPath))
    db.Execute("Insert Into Stock (Name) Values('ŞşİıĞğ')"); 
```

我试试这个，但结果-> ÞþÝýÐð

```
string a = "ŞşİıĞğ";    
string b = string.Empty;    
byte[] utf8Bytes = Encoding.UTF8.GetBytes(a);    
b= Encoding.UTF8.GetString(utf8Bytes, 0, utf8Bytes.Length);    

using (var db = new SQLite.SQLiteConnection(App.DbPath))
    db.Execute("Insert Into Stock (Name) Values('"+ b +"')"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:50:04.707

最有可能的问题是您的列无法正确处理 UTF-16（unicode）（可能是客户端 API）。最安全的选择是在客户端与 utf-8 进行转换，然后读取/写入数据库。

`System.Encoding.UTF8`拥有所有的魔力。

# python - 基于多个文件中的列表的多个正则表达式替换

> ID：15829445
> 
> 赞同：0
> 
> 时间：2013-04-05T08:41:33.577
> 
> 标签：python, regex, sed, awk, text-processing

我有一个包含多个文本文件的文件夹，我需要使用多个替换列表进行处理和格式化，如下所示：

```
old string1~new string1
old string2~new string2
etc~blah 
```

我从多个文本文件的每一行的替换列表中运行每个替换对。现在我有一组 python 脚本来执行这个操作。我想知道的是，如果我切换到 sed 或 awk，它会使代码更简单、更易于维护吗？它会是一个更好的解决方案还是我应该更好地改进我的 Python 代码？我问是因为传入的文本文件定期出现，并且通常与以前有一些不同的结构，比如错误、拼写错误、多个空格，因为这些文件是由人类创建的。所以我必须不断地调整我的代码和替换列表以使其正常工作。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:53:00.797

除非您的 python 代码真的很糟糕，否则切换到 awk 不太可能使其更易于维护。也就是说，它在 awk 中非常简单，但不能很好地扩展：

```
cat replacement-list-files* | awk 'FILENAME == "-" { 
  split( $0, a, "~" ); repl[ a[1] ] = a[2]; next }
  { for( i in repl ) gsub( i, repl[i] ) }1' - input-file 
```

请注意，这一次只对一个文件有效。替换为处理多个文件之`1`类的东西`{ print > ( FILENAME ".new" ) }`，但是如果要处理大量文件，则必须处理关闭文件，并且很快就会变得无法维护。如果您已经有了可行的解决方案，请坚持使用 Python。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:11:49.803

这是正则表达式替换脚本（大部分只是在外观上与@WilliamPursell 发布的不同）：

```
 awk -F'~' '
   NR==FNR{ map[$1] = $2; next }
   {
      for (old in map) {
         gsub(old,map[old]
      }
   }
   ' /wherever/mappingFile file 
```

但这是我认为您真正需要的字符串替换脚本：

```
 awk -F'~' '
   NR==FNR{ map[$1] = $2; next }
   {
      for (old in map) {
         rlength = length(old)
         while (rstart = index($0,old)) {
            $0 = substr($0,1,rstart-1) map[old] substr($0,rstart+rlength)
         }
      }
   }
   ' /wherever/mappingFile file 
```

在任何一种情况下，只需将其包含在 shell 循环中即可影响多个文件：

```
for file in *
do
   awk -F'~' '...' /wherever/mappingFile "$file" > tmp && mv tmp "$file"
done 
```

# c# - 将 JavaScriptConverter 转换为 json.net JsonConverter

> ID：15829446
> 
> 赞同：1
> 
> 时间：2013-04-05T08:41:36.850
> 
> 标签：c#, json, serialization, xamarin.android, json.net

我需要将以下类重写为 Json.Net JsonConverter 以使代码与 Xamarin mono for android 一起使用

```
 private class ResourceConverter : JavaScriptConverter
    {
        public ResourceConverter() { }

        public override IEnumerable<Type> SupportedTypes
        {
            get { return new ReadOnlyCollection<Type>(new List<Type>(new Type[] { typeof(SystemCertificate) })); }
        }

        public override object Deserialize(IDictionary<string, object> dictionary, Type type, JavaScriptSerializer serializer)
        {
            if (dictionary.ContainsKey("Certificate"))
            {
                SystemCertificate customerResource = new SystemCertificate();
                customerResource.SystemID = dictionary["SystemID"].ToString();
                string base64Text = dictionary["Certificate"].ToString();
                customerResource.Certificate = Convert.FromBase64CharArray(base64Text.ToCharArray(), 0, base64Text.Length);
                return customerResource;
            }
            return null;
        }

        public override IDictionary<string, object> Serialize(object obj, JavaScriptSerializer serializer)
        {
            if (obj is SystemCertificate)
            {
                SystemCertificate systemCertificate = obj as SystemCertificate;
                Dictionary<string, object> dic = new Dictionary<string, object>();
                dic.Add("SystemID", systemCertificate.SystemID);
                return dic;
            }
            return null;
        }
    } 
```

问题是JsonConverter的序列化基础方法（WriteJson）是一个void，我真的不知道该怎么办，请帮帮我。

```
 private class ResourceConverterGen2 : JsonConverter
    {
        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            throw new NotImplementedException();
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            throw new NotImplementedException();
        }

        public override bool CanConvert(Type objectType)
        {
            throw new NotImplementedException();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:30:15.607

您需要写入`JsonWriter`传递给该`WriteJson`方法的实例。您可以使用该`serializer`参数来帮助您执行此操作，如下面的代码所示。

```
public class StackOverflow_15829446
{
    private class ResourceConverterGen2 : JsonConverter
    {
        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            SystemCertificate systemCertificate = (SystemCertificate)value;
            Dictionary<string, string> dic = new Dictionary<string, string>();
            dic.Add("SystemID", systemCertificate.SystemId);
            dic.Add("Certificate", Convert.ToBase64String(systemCertificate.Certificate));
            serializer.Serialize(writer, dic);
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            var dic = serializer.Deserialize<Dictionary<string, string>>(reader);
            SystemCertificate systemCertificate = new SystemCertificate();
            systemCertificate.SystemId = dic["SystemID"];
            systemCertificate.Certificate = Convert.FromBase64String(dic["Certificate"]);
            return systemCertificate;
        }

        public override bool CanConvert(Type objectType)
        {
            return typeof(SystemCertificate) == objectType;
        }
    }
    public class SystemCertificate
    {
        public byte[] Certificate;
        public string SystemId;
    }
    public static void Test()
    {
        SystemCertificate cert = new SystemCertificate
        {
            SystemId = "123",
            Certificate = new byte[] { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }
        };
        JsonSerializer js = new JsonSerializer();
        js.Converters.Add(new ResourceConverterGen2());
        StringBuilder sb = new StringBuilder();
        StringWriter sw = new StringWriter(sb);
        js.Serialize(sw, cert);
        Console.WriteLine(sb.ToString());
        StringReader sr = new StringReader(sb.ToString());
        SystemCertificate cert2 = (SystemCertificate)js.Deserialize(sr, typeof(SystemCertificate));
        Console.WriteLine("Id={0},Cert={1}", cert2.SystemId, string.Join(",", cert2.Certificate.Select(b => string.Format("{0:X2}", (int)b))));
    }
} 
```

# android - Google Analytics for Mobile 是否为 Android 应用程序提供任何离线数据跟踪？

> ID：15829447
> 
> 赞同：13
> 
> 时间：2013-04-05T08:41:39.773
> 
> 标签：android, mobile, google-analytics, analytics

正如问题所说，Google Analytics for Mobile 是否为 Android 应用程序提供任何离线数据跟踪？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T08:55:15.580

如果应用程序离线，Google Analytics 将事件存储在 SQLite 数据库中，并等待用户再次在线发送它们。

# rdf - .rdf 和 .owl 扩展名与 Jena 之间的混淆

> ID：15829448
> 
> 赞同：1
> 
> 时间：2013-04-05T08:41:41.423
> 
> 标签：rdf, jena, owl

Jena 无法处理 OWL 格式的文件，所以我使用 Protégé 创建了一个本体，将其保存为 RDF/XML，但文件以`.owl`. 以下代码将使用 owl-full 语言读取本体。

```
OntModel model = ModelFactory.createOntologyModel(OntModelSpec.OWL_MEM);
model.read(fileInputStream, null); // sometimes it could be read(fileInputStream, "RDF/XML") 
```

我不应该在某处使用 RDFS 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:51:13.440

Protege 主要用于 OWL，这就是为什么你有一个`.owl`文件扩展名。尽管如此，如果您在 Protege 中将其保存为“RDF/XML”，它会生成一个有效的 RDF 文档，然后您应该能够使用能够处理纯 RDF 的工具（如 Jena）打开该文档。一个小技巧是用`.owl`扩展替换`.rdf`。

我建议您了解您的问题：

*   `.owl`使用文本编辑器打开您的文件。您应该在里面看到一些 RDF/XML。

*   验证文件的内容，以便您看到内容确实在 RDF 中被序列化。例如，您可以使用[http://www.w3.org/RDF/Validator/](http://www.w3.org/RDF/Validator/)之类的在线工具来执行此操作。

*   如果您不喜欢 RDF/XML 格式，您可以将其转换为 turtle，例如使用[http://www.rdfabout.com/demo/validator/](http://www.rdfabout.com/demo/validator/)之类的工具（我认为 Jena 提供了一些方法来做到这一点也）。

*   将三元组保存在一个带有`.rdf`扩展名的文件中，它现在应该可以被 RDF 工具读取。

# wcf - WCF - 从服务实现调用方法

> ID：15829449
> 
> 赞同：0
> 
> 时间：2013-04-05T08:41:45.977
> 
> 标签：wcf, service, constructor, contract

我想要做的是以下几点：

1) 我有以下 WCF 服务合同：

```
[ServiceContract]
public interface IUploadService
{
    [OperationContract]
    ServiceData Upload(Request request);
}

[DataContract]
public class Request
{
    [DataMember]
    public long AbnNumber;

    [DataMember]
    public string Email;
} 
```

2）本合同是这样执行的。

```
public class UploadService : IUploadService
{
    public bool Upload(Request request)
    {
       // Some code
    }
} 
```

在“一些代码”部分，我想调用一个验证类来验证客户端的请求，所以是这样的：

```
var result = validation.ValidateRequest(request); 
```

所以我的问题是：在方法中创建我的验证类的实例是一个坏主意`Upload`吗？像这样：

```
public class UploadService : IUploadService
{
    public bool Upload(Request request)
    {
       var validation = new Validation();

       var result = validation.ValidateRequest(request);
    }
} 
```

我知道您可以通过创建构造函数来解决此问题，但据我所知，您无法在 WCF 服务实现类中创建构造函数，还是我错了？

我是 WCF 的新手，所以如果我完全走错了方向，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:45:57.407

就我个人而言，我喜欢尽可能少的服务方法。我会有一个单独的项目来处理上传。然后，这使您可以更轻松地重用此代码，并在不创建服务的情况下测试功能。

至于您是否应该像这样创建您的 Validation，它实际上取决于它的作用，但通常我会确保 Validation 类实现一个包含 ValidateRequest(Request) 的接口，然后注入它。如果需要，您可以在测试中模拟它。

所以你的服务代码看起来像

```
public class UploadService : IUploadService
{
    private readonly IUploadHandler _uploadHandler;

    public UploadService(IUploadHandler uploadHandler)
    {
        _uploadHandler = uploadHandler;
    }

    public bool Upload(Request request)
    {
       //would possibly do some mapping here to create a different type of object to pass to the handler
       _uploadHandler.Upload(request);
    }
} 
```

并且不同项目中的处理程序看起来像

```
public class UploadHandler : IUploadHandler
{
    private readonly IValidation _validator;

    public UploadHandler(IValidation validator)
    {
        _validator = validator;
    }

    public bool Upload(Request request)
    {
        return _validator.ValidateRequest(request);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T23:22:17.570

> 所以我的问题是：在 Upload 方法中创建我的验证类的实例是不是一个坏主意？

这取决于您将使用 Singleton 还是 Per Call 服务。通常最好为每个请求创建新的 Service 实例，在这种情况下，可以在操作中创建所有实例。

关于这个主题的有趣讨论[WCF 服务是否通常是单例的？](https://stackoverflow.com/questions/1756487/should-wcf-service-typically-be-singleton-or-not_)

如果您决定不为每个请求创建验证类，则有两个选项：

1.  使其成为单例
2.  为您的服务创建自定义 ServiceHostFactory 并在其中初始化您的服务（使用构造函数）。有关此主题的有用链接：[使用 ServiceHostFactory 扩展托管](http://msdn.microsoft.com/en-us/library/aa702697.aspx)、[将 StructureMap 与 WCF 集成](http://lostechies.com/jimmybogard/2008/07/30/integrating-structuremap-with-wcf/)

# regex - 重写引擎。如何翻译网址

> ID：15829455
> 
> 赞同：0
> 
> 时间：2013-04-05T08:42:08.230
> 
> 标签：regex, url, rewrite

我是正则表达式和重写引擎的新手

我要翻译：domain.com/type/id

在 domain.com/index.php?type=type&id=id

我使用 RewriteRule (\w+)/(\d+)$ ./index.php?id=$1&type=$2

我几乎可以正常工作，并且可以获得两个变量，但是网站在包含其他文件时存在问题。我的主要 URL 是：[http://domain.com/repos/site](http://domain.com/repos/site)并在尝试键入[http://domain.com/repos/site/ee/9](http://domain.com/repos/site/ee/9)之类的 URL 后，萤火虫说：

“网络错误：404 未找到 - [http://domain.com/repos/site/ee/lib/geoext/script/geoext.js](http://domain.com/repos/site/ee/lib/geoext/script/geoext.js) ”

似乎站点将“ee”作为 ulr 的一部分，而不是作为 GET 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:04:53.430

是的，你当然必须改变你的道路。路径行为：
- href="mypath": 将 "/mypath" 从当前 URL 附加到 URL
- href="./mypath": 与以前相同
- href="/mypath": 将 mypath 附加**到 root**。这是你想要的行为

注意：您也可以使用“../”返回您所在的父目录。

# java - EditText 下一个按钮键盘

> ID：15829457
> 
> 赞同：6
> 
> 时间：2013-04-05T08:42:10.560
> 
> 标签：java, android

我有一个布局，用户需要在一些editText中写入他的详细信息，这些editText放置在垂直线性布局中。

然而，每次用户需要打开键盘，在editText上写一些东西，然后点击android中的后退按钮，然后再次点击下一个editText并一遍又一遍地写下他的细节。

我想实现它，而不是打开和关闭键盘，而不是键盘上的输入按钮，我将有一个下一个按钮，在用户在特定的 EditText 上输入他的详细信息后，它将跳到下一个 EditText 而不关闭和打开每次都是键盘。

我看到有一些应用程序具有此功能，但是我没有找到如何实现它

多谢

这是我的布局示例：

```
<LinearLayout
        android:layout_width="283dp"
        android:layout_height="match_parent"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/aaa"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="aaaa" >

            <requestFocus />
        </TextView>

        <EditText
            android:id="@+id/bbb"
            android:layout_width="match_parent"
            android:layout_height="36dp"
            android:background="@drawable/text_back"
            android:ems="10"
            android:inputType="bbb" />

        <TextView
            android:id="@+id/cccc"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="ccc" />

        <EditText
            android:id="@+id/emailTextGroup"
            android:layout_width="match_parent"
            android:layout_height="30dp"
            android:background="@drawable/text_back"
            android:ems="10"
            android:inputType="textMultiLine" />

        <TextView
            android:id="@+id/dd"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="ddd" />

        <EditText
            android:id="@+id/fff"
            android:layout_width="match_parent"
            android:layout_height="38dp"
            android:background="@drawable/text_back"
            android:ems="10"
            android:inputType="fff" />

        <TextView
            android:id="@+id/yyy"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="yyy" />

        <EditText
            android:id="@+id/eeee"
            android:layout_width="match_parent"
            android:layout_height="32dp"
            android:background="@drawable/text_back"
            android:ems="10"
            android:inputType="textMultiLine" />

         <TextView
            android:id="@+id/yyyy"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="iii" />

        <EditText
            android:id="@+id/ooo"
            android:layout_width="match_parent"
            android:layout_height="30dp"
            android:background="@drawable/text_back"
            android:ems="10"
            android:inputType="textMultiLine" />

        <TextView
            android:id="@+id/ppp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:ems="10"
            android:inputType="ppp" />

        <EditText
            android:id="@+id/sss"
            android:layout_width="match_parent"
            android:layout_height="30dp"
            android:background="@drawable/text_back"
            android:ems="10"
            android:inputType="textMultiLine" />

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T08:49:25.823

您应该在`XML`文件中为您的 s 添加一个属性`EditText`：

`android:imeOptions="actionNext"`.

下一个按钮将使用户进入下一个可以接收输入的字段。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T08:48:02.650

有一个非常好的文档：

[下一个焦点向下](http://developer.android.com/reference/android/view/View.html#attr_android:nextFocusDown)

如果我对您的理解正确，则此标签顺序正是您所需要的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T08:48:24.540

这就是我的editText的样子，它有下一个按钮，并且是

```
<EditText
        android:id="@+id/typefish"
        android:layout_width="370dp"
        android:layout_height="wrap_content"

        android:singleLine="true" /> 
```

它之后的那个或最后一个也有

```
android:imeOptions="actionDone" 
```

# linq - 如何跟踪我的 linq 查询（在 c# 和 xaml 中的 Windows 8 应用程序上使用 linqtotwitter）

> ID：15829460
> 
> 赞同：0
> 
> 时间：2013-04-05T08:42:26.057
> 
> 标签：linq, logging, microsoft-metro, trace

我正在使用 linqtotwitter 开发一个 Windows 8 Metro 应用程序。

我需要在我的日志文件中跟踪我的 linq 查询，但我搜索并没有找到 hox 我可以这样做。我读到的所有内容都是关于 linq to sql 的，有数据库，我没有数据库。我通过 linqtotwitter 查询 Twitter API 来获取信息。

我怎样才能得到我的查询的踪迹？

我的代码：

```
User usersResponse = new User();

        usersResponse = (from user in twitterCtxProp.User
                         where user.Type == UserType.Lookup &&
                          user.ScreenName == name
                         select user).SingleOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T12:36:37.737

它是开源的，因此请检查源代码以查看开发人员是否使用了 Systems.Diagnostics trace、nlogger 或其他一些日志记录框架。如果是这样，通过一些 web.config 编辑，您可以查看跟踪。如果他使用了 outputdebugstring，您可以使用 debugview [http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896647.aspx)查看跟踪。

如果他没有对库进行跟踪（并非所有开发人员都接受跟踪的想法），那么您会想要选择您最喜欢的库并添加一些跟踪命令。

最后，如果您对最终结果感兴趣（但不是图书馆如何去那里），请使用 fiddler 来查看通过网络传输到 twitter 的内容：[http ://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

# xpages - comboBox 在 readmode web 中生成一个表而不是 span

> ID：15829469
> 
> 赞同：6
> 
> 时间：2013-04-05T08:42:42.497
> 
> 标签：xpages

当在 Web 上查看包含列中带有组合框的表的 Xpage 时，Domino 生成的 html 为组合框创建了一个表，但为其他组件创建了一个跨度*（当前在 textFields 和 computedFields 上测试）*。
然后用一个让我烦恼的垂直对齐差异的像素来渲染它。
我该如何克服呢？

```
<table>
        <tbody>
            <tr>
                <td colspan="3">
                    <table id="view:_id1:_id2:_id3:legend1:callbackFieldControlSet:CounterpartyName">
                        <tbody>
                            <tr>
                                <td>
                                    AVANZA SWEDEN
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr>
                <td>
                    <span id="view:_id1:_id2:_id3:legend1:callbackFieldControlSet:CounterpartyShort">AVANZA SWEDEN</span>
                </td>
            </tr>
        </tbody>
    </table> 
```

在编辑模式下，差异仍然存在，但组合框生成的 html 不是表格而是选择，然后我可以使用 css 控制它。
见下图。

**示例读取模式**
![示例阅读模式](https://i.stack.imgur.com/fr7DX.png)

**示例编辑模式（css 编辑）：**
![示例编辑模式](https://i.stack.imgur.com/FInPK.png)

```
<xp:table>
        <xp:tr>
            <xp:td>
                <xp:label
                    value="Counterparty name:"
                    id="counterpartyName_Label1"
                    for="CounterpartyName"
                >
                </xp:label>
            </xp:td>
            <xp:td>
                <xp:comboBox
                    id="CounterpartyName"
                    value="#{document1.CounterpartyName}"
                    required="true"
                >
                </xp:comboBox>
            </xp:td>
        </xp:tr>
        <xp:tr>
            <xp:td>
                <xp:label
                    value="Counterparty short:"
                    id="counterpartyShort_Label1"
                    for="CounterpartyShort"
                >
                </xp:label>
            </xp:td>
            <xp:td>
                <xp:inputText
                    value="#{document1.CounterpartyShort}"
                    id="CounterpartyShort"
                    required="true"
                    styleClass="xspInputFieldEditBox"
                >
                </xp:inputText>
            </xp:td>
        </xp:tr>
        <xp:tr>
            <xp:td>
                <xp:label
                    value="Bic Code:"
                    id="bicCode_Label1"
                    for="BicCode"
                >
                </xp:label>
            </xp:td>
            <xp:td>
                <xp:inputText
                    value="#{document1.BicCode}"
                    id="BicCode"
                    styleClass="xspInputFieldEditBox"
                >
                </xp:inputText>
            </xp:td>
        </xp:tr>
    </xp:table> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-05T11:53:31.407

*我看到你已经接受了一个答案，但我提出了一个替代解决方案，它只是消除了生成的 HTML。我意识到这可能是一个乏味的解决方案:)*

[我在XPages 为 checkbox group 生成表时](https://stackoverflow.com/questions/13973812/stop-generation-tables-and-fieldset-tag-in-output-of-check-box-radio-button-gr)遇到了类似的问题。Tim Tripcony 建议我[创建一个自定义渲染器](http://www-10.lotus.com/ldd/ddwiki.nsf/dx/Creating_a_Basic_UI_Control_for_XPages#Creating+the+control+renderer)来修改控件的输出。一开始它有点棘手，但一旦你掌握了它，它就会做得很好。在您的只读字段的情况下，它会更简单:)

**1.创建自定义渲染器**

在这里，我创建了一个自定义渲染器 Java 类，名为`pkg.MyRenderer`. 您可以在“代码 > Java”中创建此 Java 文件。在这里，我只输出组合框的选定值，仅此而已。

```
package pkg;

import java.io.IOException;
import java.io.Writer;
import javax.faces.component.UISelectOne;
import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.render.Renderer;

public class MyRenderer extends Renderer {
    public void encodeBegin(FacesContext context, UIComponent component) throws IOException {
        UISelectOne obj = (UISelectOne)component;
        Writer writer = context.getResponseWriter();
        writer.write(obj.getValue().toString());
    }

    public void encodeEnd(FacesContext context, UIComponent component) throws IOException {
    }
} 
```

**2.注册您的自定义渲染器**

现在在包资源管理器中转到“YourDatabase.nsf > WebContent > WEB-INF > **faces-config.xml** ”。在那里您需要注册您的自定义渲染器。您只需要确保`component-family`与组合框所属的相同。

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config>
    <render-kit>
        <renderer>
            <component-family>javax.faces.SelectOne</component-family>
            <renderer-type>pkg.MyRendererType</renderer-type>
            <renderer-class>pkg.MyRenderer</renderer-class>
        </renderer>
    </render-kit>
</faces-config> 
```

**3.分配你的自定义渲染器来控制**

由于您希望自定义渲染器仅在它处于只读模式时才处于活动状态，因此您检查它，然后将`rendererType`控制设置为ie中`renderer-type`定义的。`faces-config.xml``pkg.MyRendererType`

在这里，我检查控件`comboBox1`是否处于只读模式，如果是，则使用`pkg.MyRendererType`else 使用控件的渲染器。

```
<xp:comboBox id="comboBox1" .....>
    <xp:this.rendererType><![CDATA[${javascript:var cb:com.ibm.xsp.component.xp.XspSelectOneMenu = getComponent("comboBox1");
cb.isReadonly() ? "pkg.MyRendererType" : cb.getRendererType();}]]></xp:this.rendererType>
.....
.....
.....
</xp:comboBox> 
```

当您在只读模式下使用控件运行它时，只会显示组合框的值，而不会显示其他任何内容（没有表格，*耶！*）。当控件不处于只读模式时，会像以前一样显示一个下拉列表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-05T10:20:38.433

问题是内部表格有自己的边界（一如既往：一个用于表格本身，一个用于 td）需要折叠。只需创建一些 CSS 来处理这个问题：

1.  为您的外部表提供自己的样式类，例如“myOuterTable”
2.  然后，您的 css 将处理“.myOuterTable”中的任何表，如下所示：

    table.myOuterTable 表 {border-collapse:collapse;}

这在编辑和阅读模式下都可以正常工作，因为只有在阅读模式下你才有额外的“内部”表格；在编辑模式下，没有什么可以折叠...

甚至可以在 IE 中工作，顺便说一句...

希望对你有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T10:10:20.663

3 种可能的操作（取决于复杂性）：

*   编写自己的下拉组件
*   添加一个文本字段。使用可见属性根据读取/编辑模式仅显示/隐藏一个
*   使用 css 和 padding（可以取负值）移动一个像素

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-24T13:50:56.457

此代码将使用 dojo 修复页面上的所有组合框，运行 onClientLoad：

```
if("#{javascript:document1.isEditable()}" == "false"){
    // Search for all nested tables with ids
    dojo.query('table td table[id]').forEach(function(node) {
        var value = '';

        // Locate the first table cell, which contains the value
        dojo.query('td:first-child', node).forEach(function(innerNode) {
            value = innerNode.innerHTML;
        });

        // Replace the table with only the value (or a blank)
        node.outerHTML = value;
    });
} 
```

笔记：

*   更新第 1 行中的文档名称以匹配页面上的文档名称。
*   此代码假定您的组合框已经嵌套在表格单元格中。如果不是这样，您可以在第 3 行中优化选择器。
*   如果您遇到影响页面中其他表格的冲突，您可能需要在第 3 行中优化选择器。

# mysql - MySQL Self Join 不包括所有行

> ID：15829472
> 
> 赞同：-1
> 
> 时间：2013-04-05T08:42:56.927
> 
> 标签：mysql, self-join

我在进行自我加入时遇到问题。

我有下表：

```
CREATE TABLE  `test`.`tableN` (
`id` int(10) unsigned NOT NULL auto_increment,  
`Group` int(10) unsigned NOT NULL,  
`Item` int(10) unsigned NOT NULL,
`data` varchar(45) default NULL,
PRIMARY KEY  (`id`)
) 
ENGINE=InnoDB;

INSERT INTO `test`.`tableN` (`Group`,`Item`,`data`)
VALUES 
(1,100,'aaa'),
(1,200,'bbb'),
(2,100,'ccc'),
(2,200,'ddd'),
(3,100,'eee'); 
```

然后我需要做的是运行一个查询，该查询在单个行中输出每个“项目”的数据。

我得到的查询是：

```
SELECT
t1.`Group`,
t1.`item`,
t1.`data`,
t2.`item`,
t2.`data`
FROM tableN t1
LEFT JOIN tableN t2 ON t2.`group`=t1.`group`
WHERE 1=1
AND t1.item = 100
AND t2.item = 200
GROUP BY t1.`Group`; 
```

问题是，这只返回 2 行（第 1 组和第 2 组）。我还需要它为 Group=3 返回一行，即使 item=200 没有条目。

请问我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:54:34.720

摆脱你的 where 子句，将它全部移动到你的左连接：

```
SELECT
    t1.`Group`,
    t1.`item`,
    t1.`data`,
    t2.`item`,
    t2.`data`
  FROM `test`.`tableN` AS t1
  LEFT JOIN `test`.`tableN` t2 ON t2.`group`=t1.`group` AND t1.item = 100 AND t2.item = 200
  GROUP BY t1.`Group`; 
```

[小提琴](http://sqlfiddle.com/#!8/1c627/8)

**编辑：如果只有组匹配并且 100 和 200 都不等于 t1 （或 t2），这（当然）也会让你获得一排**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:50:52.947

```
SELECT  `GROUP`,
        MAX(CASE WHEN Item = 100 THEN data END) Item100,
        MAX(CASE WHEN Item = 200 THEN data END) Item200
FROM    TableN
WHERE   Item IN (100, 200)
GROUP   BY `GROUP` 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/82aa1/2)

输出

```
╔═══════╦═════════╦═════════╗
║ GROUP ║ ITEM100 ║ ITEM200 ║
╠═══════╬═════════╬═════════╣
║     1 ║ aaa     ║ bbb     ║
║     2 ║ ccc     ║ ddd     ║
║     3 ║ eee     ║ (null)  ║
╚═══════╩═════════╩═════════╝ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T08:51:25.773

将 t2.item = 200 条件放入 JOIN 子句。

```
SELECT
t1.`Group`,
t1.`item`,
t1.`data`,
t2.`item`,
t2.`data`
FROM tableN t1
LEFT JOIN tableN t2 ON t2.`group`=t1.`group` AND t2.item = 200
WHERE 1=1
AND t1.item = 100
GROUP BY t1.`Group`; 
```

# azure - Windows Azure 将 £（英镑符号）转换为 $（美元符号）

> ID：15829483
> 
> 赞同：1
> 
> 时间：2013-04-05T08:43:33.140
> 
> 标签：azure, web-config, azure-web-app-service

在我的代码中，我有这个：

```
@String.Format("{0:c}", item.Amount) 
```

当我在调试模式下运行它时，它显示例如 4.50 英镑。当我将我的应用程序部署到 Windows Azure 时，它​​会输出 4.50 美元。

我已经部署到西欧网站，但显然配置设置为美国语言环境。有谁知道我是否可以手动告诉我的 Azure 网站改用 £ 符号？

我正在转向配置下的应用程序设置部分，但我不知道放在这里的键/值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T08:53:43.013

读[这个](http://msdn.microsoft.com/en-us/library/bz9tc508%28v=vs.100%29.aspx)。

解决方案类似于：

```
<globalization uiCulture="en-GB" culture="en-GB" /> 
```

在您`system.web`的 web.config 部分中。

很高兴知道 Windows Azure 中的所有 VM 都使用默认的美国语言环境和 UTC 时间运行。

# java - Spring MVC 默认视图解析器不起作用？

> ID：15829486
> 
> 赞同：0
> 
> 时间：2013-04-05T08:43:47.977
> 
> 标签：java, spring, spring-mvc, freemarker

我希望任何无法解析为特定控制器映射的请求都可以转到名称从请求路径派生的视图。

例如`localhost/success`，最终应该渲染一个位于`/WEB-INF/view/freemarker/success.ftl`. 我从 Spring 文档中收集到[，默认情况下应该启用此行为](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-coc-r2vnt)，因为它似乎不适用于我的设置。

```
<mvc:annotation-driven />
<mvc:interceptors>
    <!-- On pre-handle, resolve the device that originated the web request -->
    <bean
        class="org.springframework.mobile.device.DeviceResolverHandlerInterceptor" />
</mvc:interceptors>

<!-- Spring Mobile -->
<bean
    class="org.springframework.mobile.device.view.LiteDeviceDelegatingViewResolver">
    <constructor-arg>
        <!-- Freemarker -->
        <bean id="viewResolver"
            class="org.springframework.web.servlet.view.freemarker.FreeMarkerViewResolver">
            <property name="cache" value="false" />
            <property name="prefix" value="" />
            <property name="suffix" value=".ftl" />
        </bean>
    </constructor-arg>
    <property name="mobilePrefix" value="mobile/" />
    <property name="tabletPrefix" value="tablet/" />
</bean>

<bean id="freemarkerConfig"
    class="org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer">
    <property name="templateLoaderPath" value="/WEB-INF/view/freemarker/" />
</bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:46:40.153

结果发现没有`HandlerMapping`为这些请求找到实现，因此`DispatcherServlet`从未调用`DefaultRequestToViewNameTranslator`.

添加以下内容提供了适当的`HandlerMapping`，从而填补了缺失的链接。现在唯一的缺点是，对于任何无法满足的请求，它都会在 SEVERE 处引发异常日志记录，而不是`DispatcherServlet`更礼貌的 WARNING。

```
<mvc:view-controller path="/*" /> 
```

# c# - ClickOnce 部署的问题（对我来说，这很烦人）？

> ID：15829487
> 
> 赞同：1
> 
> 时间：2013-04-05T08:43:49.867
> 
> 标签：c#, visual-studio, deployment, sql-server-ce

我刚刚第一次尝试使用 ClickOnce 来部署我的 SQL Server Compact 应用程序。我觉得这样的部署很不专业：

1.  输出设置是一个包含 3 个对象的文件夹，一个名为**Application Files**的文件夹，一个**setup.exe**和一个**.application**文件，这是我在专业产品设置包中从未见过的。

2.  另外，单击**setup.exe**似乎可以帮助用户如此快速地安装应用程序，但用户没有机会选择他/她想要安装应用程序的位置。它默认安装在目标计算机的某个位置。即使我在安装后尝试寻找它的位置，我也找不到它。

3.  最后，安装完成后，在所有程序菜单中有一个名为“ **Microsoft** ”的文件夹，安装的应用程序快捷方式位于其中。我想知道为什么总是**微软**？我什至尝试通过**项目属性**窗口在**装配信息中编辑我的****公司信息。**当我在其属性窗口中找不到它的目标可执行文件时，应用程序快捷方式有点奇怪。

 ****有了以上 ClickOnce 可以带给我的所有内容，我认为它只是测试应用程序而不是发布商业应用程序是一项有趣的工作。

如果#1、#2、#3 中有任何错误，您能否纠正我，请给我一个更好的部署解决方案，我只对 SQL Server（基于服务和基于文件）应用程序感兴趣？

您的帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:52:46.880

ClickOnce 安装是每个用户的“沙盒”安装，而不是您在安装普通应用程序时考虑的普通安装。服务器将 .application 文件用作清单，并在单击时确定是否需要更新安装。

找不到 setup.exe 的原因是它不存在。一旦安装了文件，就不会保留它。用户不应该知道文件在哪里，系统管理应用程序的位置和更新。

因此，尽管如此，您似乎需要更正常的安装，而不是 ClickOnce。ClickOnce 不打算安装服务或其他每台机器文件。****

# c# - 将 lambda 表达式转换为派生类型

> ID：15829488
> 
> 赞同：7
> 
> 时间：2013-04-05T08:43:58.043
> 
> 标签：c#, linq, lambda, expression, derived-class

我需要一点魔法。我相信我正在尝试做的事情是有道理的，但如果我没有看到计划存在问题，那么原因同样受欢迎。

我有一个表情

`Expression<Func<Entity, bool>>`

我想转换/转换甚至创建一个全新的表达式：

`Expression<Func<Derived, bool>>`

这被用作 EF 过滤器查询，作为参数传递给存储库方法。存储库返回一个可枚举的实体，因此我可以很容易地使用协方差，但我想在返回查询之前对其派生状态进行一些后处理。

在我看来，EF 必须自己在内部执行此操作，但我希望能够运行我的查询，以便结果的类型是派生类型而不是实体。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-02-05T18:04:55.053

在`Expression`关卡上工作，您可以构建一个具有`Derived`类型作为参数的新表达式：

```
var entityExpr = (Expression<Func<Entity, bool>>)(e => e.Str == "");
var derivedExpr = Expression.Lambda<Func<Derived, bool>>(entityExpr.Body, entityExpr.Parameters); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T08:58:23.127

如果您有表达式`Expression<Func<Entity, bool>>`，则可以向其中添加一个`Cast<Derived>`以过滤到该特定类型的所有实体。

# java - java提取Zip文件

> ID：15829489
> 
> 赞同：0
> 
> 时间：2013-04-05T08:43:58.643
> 
> 标签：java, zip, extract

我正在寻找一种提取 Zip 文件的方法。到目前为止，我已经尝试过 java.util.zip 和 org.apache.commons.compress，但都给出了损坏的输出。

基本上，输入是一个包含一个 .doc 文件的 ZIP 文件。

java.util.zip：输出损坏。org.apache.commons.compress：输出空白文件，但大小为 2 mb。

到目前为止，只有像 Winrar 这样的商业软件才能完美运行。有没有利用这个的java库？

这是我使用 java.util 库的方法：

```
public void extractZipNative(File fileZip)
{
    ZipInputStream zis;
    StringBuilder sb;
    try {
        zis = new ZipInputStream(new FileInputStream(fileZip));
        ZipEntry ze = zis.getNextEntry();

        byte[] buffer = new byte[(int) ze.getSize()];

        FileOutputStream fos = new FileOutputStream(this.tempFolderPath+ze.getName());

        int len;
        while ((len=zis.read(buffer))>0)
        {
            fos.write(buffer);
        }
        fos.flush();
        fos.close();

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally 
    {
        if (zis!=null) 
        {
            try { zis.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    } 
```

}

非常感谢，迈克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:46:44.800

我认为您的输入可能会被一些“不兼容”的 zip 程序（如 7zip）压缩。尝试先调查它是否可以使用经典的 WinZip 等解压缩。

Java 的 zip 处理能够很好地处理来自“兼容” zip 压缩器的压缩档案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:05:29.643

这是我的代码中的错误。我需要指定字节写入的偏移量和长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-10T22:00:34.423

这个对我有用

```
 ZipFile Vanilla = new ZipFile(new File("Vanilla.zip")); //zipfile defined and needs to be in directory
    Enumeration<? extends ZipEntry> entries = Vanilla.entries();// all (files)entries of zip file

    while(entries.hasMoreElements()){//runs while there is files in zip
        ZipEntry entry = entries.nextElement();//gets name of file in zip
        File folderw =new File("tkwgter5834");//creates new directory
        InputStream stream = Vanilla.getInputStream(entry);//gets input
        FileInputStream inpure= new FileInputStream("Vanilla.zip");//file input stream for zip file to read bytes of file
        FileOutputStream outter = new FileOutputStream(new File(folderw +"//"+ entry.toString())); //fileoutput stream creates file inside defined directory(folderw variable) by file's name
        outter.write(inpure.readAllBytes());// write into files which were created 
        outter.close();//closes fileoutput stream
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:49:40.837

你试过jUnrar吗？也许它可能有效： [https ://github.com/edmund-wagner/junrar](https://github.com/edmund-wagner/junrar)

如果这也不起作用，我猜您的存档在某种程度上已损坏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-30T22:19:39.070

如果您知道要在其中运行此代码的环境，我认为您最好只调用系统为您解压缩它。它会比你在 java 中实现的任何东西都要快得多。

我编写了代码来提取带有嵌套目录的 zip 文件，它运行缓慢并且占用了大量 CPU。我最终用这个替换它：

```
 Runtime.getRuntime().exec(String.format("unzip %s -d %s", archive.getAbsolutePath(), basePath)); 
```

这样效果好很多。

# ruby-on-rails - 如何获得包含条件的值？

> ID：15829497
> 
> 赞同：0
> 
> 时间：2013-04-05T08:44:47.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有三张桌子说商店，物品和物品类型

shop 包含商店的名称， item 包含每个商店的项目， item_type 包含该项目的不同类型以及可用或不可用等状态。

现在我想渲染

```
format.json { render json: {:shop => @shops.as_json(:include => :items)}} 
```

但根据条件，说 item_type_id='1' 和 item_type_status='available' 状态的项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:59:46.950

尝试这个：

```
@shops = Shop.includes(:items).where("items.itemp_type = ?", 'accesories')
format.json { render json: { :shop => @shops.as_json(:include => :items) } } 
```

**编辑：**

一种方法是使用要渲染的对象创建一个散列，然后将其传递给 render 方法。像这样：

```
respond_to do |format|
  format.json  { render :json => {:shops => @shops, 
                                  :items => @items }}
end 
```

如果模型没有通过活动记录关联，那可能是您最好的解决方案。

如果关联确实存在，您可以将 :include 参数传递给渲染调用，如下所示：

```
respond_to do |format|
  format.json  { render :json => @shops.to_json(:include => [:items])}
end 
```

请注意，如果您采用这种方法，则不必在上面的部分中检索 @items 变量，Rails 会自动从 @shops 变量中加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:10:33.500

您可以将一个或多个方法传递给 to_json 或 as_json 方法并包含所需的记录。来自 Rails api 的示例：

```
user.as_json(:methods => :permalink)
# => {"id": 1, "name": "Konata Izumi", "age": 16,
  "created_at": "2006/08/01", "awesome": true,
  "permalink": "1-konata-izumi"} 
```

# git - git 拉一个版本，但推另一个

> ID：15829498
> 
> 赞同：0
> 
> 时间：2013-04-05T08:44:58.047
> 
> 标签：git

在我本地分支的 git bash 中，我写道：

```
git pull production master 
```

我检查了文件，它们似乎与远程服务器中的文件相同.. 一切正常。

后来我写道：

```
git add .
git commit -m 'ggggg' 
```

这是奇怪的部分：响应是：“没有什么可以提交工作目录干净”。

这很奇怪，因为在我从远程分支中提取之前，许多文件都不同

你可以猜到接下来会发生什么——检查我的本地分支是否确实与远程分支同步（通过查看文件看起来确实如此）我写道：

```
git push production master 
```

并通过推送旧版本完全破坏了远程分支（：

所以..我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:53:19.030

该命令`git pull`使用远程的内容更改您的工作目录。完成时工作目录与`git`索引/存储库一致。因此，没有什么 to `add`nor `commit`。本质上，`git pull`它会`add`自动`commit`为您服务。

您可能看到的问题是由于位于“master”以外的分支上。你从'master'拉到分支'foo'；一切顺利合并；然后您将“foo”推回“master”并更改了遥控器。也许。

# javascript - Android 4.1 webview javascript 不工作。

> ID：15829501
> 
> 赞同：2
> 
> 时间：2013-04-05T08:45:02.867
> 
> 标签：javascript, android, webview

我有一个函数调用`javascript:alert('load')`试图显示一个警告框。即使我已经这样做了，它也不起作用`setJavaScriptEnabled(true);`

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // Handle item selection
    WebView wvMyWeb = (WebView)findViewById(R.id.webView1);
    wvMyWeb.setWebViewClient(new MyWebViewClient());
    wvMyWeb.getSettings().setJavaScriptEnabled(true);

    switch (item.getItemId()) {
        case R.id.menu_save:
            alertbox("Setting","Save Clicked");
            wvMyWeb.loadUrl("http://ec.m.zkiz.com");
            return true;
        case R.id.menu_load:
            wvMyWeb.loadUrl("javascript:alert('load')");
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T11:39:02.263

您没有指定 chrome 客户端，[`WebChromeClient`](http://developer.android.com/reference/android/webkit/WebChromeClient.html)它将满足您的需求。只需将其添加到您的 webview ：

```
webView.setWebChromeClient(new WebChromeClient()); 
```

如果您想以`alert`特定方式处理事件，您还可以执行以下操作：

```
webView.setWebChromeClient(new WebChromeClient() { 
    @Override public boolean onJsAlert(WebView view, String url, String message, JsResult result) {
        /* Do whatever you need here */
        return super.onJsAlert(view, url, message, result); 
    } 
}); 
```

# python - 这个单行 for 循环在 Python 中是如何工作的？[列表理解]

> ID：15829509
> 
> 赞同：2
> 
> 时间：2013-04-05T08:45:36.243
> 
> 标签：python

这是代码示例：

```
from django.shortcuts import render_to_response
import MySQLdb

def book_list(request):
    db = MySQLdb.connect(user='me', db='mydb', passwd='secret', host='localhost')
    cursor = db.cursor()
    cursor.execute('SELECT name FROM books ORDER BY name')
    names = [row[0] for row in cursor.fetchall()]
    db.close()
    return render_to_response('book_list.html', {'names': names}) 
```

该行特别是：

```
names = [row[0] for row in cursor.fetchall()] 
```

我只是想了解，这行特别如何，我知道这是一种简写方式，但是有人可以提供长版本的外观吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:47:56.827

那行是一个[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)。这是一个“长”版本。

```
names  = []

for row in cursor.fetchall():
    names.append(row[0]) 
```

# import - 无法在 Eclipse 中导入 PMD 规则集

> ID：15829512
> 
> 赞同：11
> 
> 时间：2013-04-05T08:45:41.913
> 
> 标签：import, eclipse-plugin, sonarqube, rules, pmd

我想在我的 IDE (Eclipse) 中使用与我的 Sonar 配置文件相同的规则集。

我从 Sonar Permalinks 获得了 PMD XML 规则集，并希望将其导入我的 PMD Eclipse 插件，但是当我尝试这样做时，“确定”按钮被停用......

![无法在 PMD Eclipse 插件中导入 PMD 规则集](https://i.stack.imgur.com/gTA9y.jpg)

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-05T15:12:55.790

问题可能是 Sonar 正在以 v4.x 格式导出您的规则集，而您的 Eclipse 插件期望它们采用 v5.x 格式。

尝试更改您的规则：

```
<rule ref="rulesets/basic.xml/UnusedNullCheckInEquals">
    <priority>3</priority>
</rule> 
```

到

```
<rule ref="rulesets/java/basic.xml/UnusedNullCheckInEquals">
    <priority>3</priority>
</rule> 
```

请注意**ref**属性。一个简单的查找和替换所有将适合您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-04T06:22:40.780

Ivan Nikolov 的建议帮助了我，但我还必须更改一条规则：

```
<rule ref="rulesets/java/controversial.xml/UnusedModifier">
  <priority>5</priority>
</rule> 
```

到

```
<rule ref="rulesets/java/unusedcode.xml/UnusedModifier">
  <priority>5</priority>
</rule> 
```

这是我来自声纳的 PMD 配置文件，它适用于 PMD-plugin 4.0.2：

```
<?xml version="1.0" encoding="UTF-8"?>
<ruleset xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         name="pmd-eclipse"
         xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd">
  <rule ref="rulesets/java/basic.xml/UnusedNullCheckInEquals">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/StringInstantiation">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/ConstructorCallsOverridableMethod">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strictexception.xml/AvoidCatchingNPE">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strictexception.xml/AvoidRethrowingException">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/migrating.xml/ReplaceEnumerationWithIterator">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/optimizations.xml/AvoidArrayLoops">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/unusedcode.xml/UnusedFormalParameter">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/ClassCastExceptionWithToArray">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strictexception.xml/AvoidThrowingNullPointerException">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/unusedcode.xml/UnusedPrivateField">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/CompareObjectsWithEquals">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/UseIndexOfChar">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/BigIntegerInstantiation">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/FinalFieldCouldBeStatic">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/naming.xml/SuspiciousEqualsMethodName">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/InstantiationToGetClass">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/naming.xml/SuspiciousHashcodeMethodName">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/coupling.xml/LooseCoupling">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/unusedcode.xml/UnusedLocalVariable">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/UnnecessaryCaseChange">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/SingularField">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/CloseResource">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strictexception.xml/AvoidCatchingThrowable">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/CollapsibleIfStatements">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/UselessOperationOnImmutable">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/clone.xml/CloneMethodMustImplementCloneable">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/UselessOverridingMethod">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/unusedcode.xml/UnusedModifier">
    <priority>5</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/PreserveStackTrace">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/optimizations.xml/UseArraysAsList">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/EqualsNull">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/BrokenNullCheck">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/logging-jakarta-commons.xml/UseCorrectExceptionLogging">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/InefficientStringBuffering">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/sunsecure.xml/ArrayIsStoredDirectly">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/finalizers.xml/FinalizeOverloaded">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/controversial.xml/DontImportSun">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/imports.xml/DontImportJavaLang">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/MissingStaticMethodInNonInstantiatableClass">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/StringBufferInstantiationWithChar">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/optimizations.xml/UseArrayListInsteadOfVector">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/StringToString">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/SimplifyConditional">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/migrating.xml/ReplaceVectorWithList">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/codesize.xml/NcssMethodCount">
    <priority>3</priority>
    <properties>
      <property name="minimum" value="50" />
    </properties>
  </rule>
  <rule ref="rulesets/java/logging-java.xml/AvoidPrintStackTrace">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/naming.xml/MethodWithSameNameAsEnclosingClass">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/naming.xml/SuspiciousConstantFieldName">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/codesize.xml/NcssTypeCount">
    <priority>3</priority>
    <properties>
      <property name="minimum" value="800" />
    </properties>
  </rule>
  <rule ref="rulesets/java/design.xml/AvoidInstanceofChecksInCatchClause">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/migrating.xml/IntegerInstantiation">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/migrating.xml/AvoidAssertAsIdentifier">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/UnnecessaryLocalBeforeReturn">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/finalizers.xml/AvoidCallingFinalize">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/BooleanInstantiation">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/UnconditionalIfStatement">
    <priority>2</priority>
  </rule>
  <rule ref="rulesets/java/clone.xml/CloneThrowsCloneNotSupportedException">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/migrating.xml/ReplaceHashtableWithMap">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/basic.xml/AvoidDecimalLiteralsInBigDecimalConstructor">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strictexception.xml/SignatureDeclareThrowsException">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/finalizers.xml/EmptyFinalizer">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/design.xml/IdempotentOperations">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strictexception.xml/ExceptionAsFlowControl">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/finalizers.xml/FinalizeDoesNotCallSuperFinalize">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/UseStringBufferLength">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/migrating.xml/AvoidEnumAsIdentifier">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/logging-java.xml/SystemPrintln">
    <priority>3</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/UselessStringValueOf">
    <priority>4</priority>
  </rule>
  <rule ref="rulesets/java/strings.xml/AvoidDuplicateLiterals">
    <priority>3</priority>
  </rule>
</ruleset> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-04T08:53:37.110

我还必须将语言添加到我的 XPath 规则中，例如：

```
<rule name="DontUseDate" language="java" class="net.sourceforge.pmd.lang.rule.XPathRule" ...></rule> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-31T16:51:43.057

伊万尼科洛夫的回答是正确的。您的问题是不同版本的规则集格式。就我而言，我试图将从 PMD 插件版本 3.2.6 导出的规则集导入插件版本 4.0.0。以下是我的发现：

*   所有规则都需要 Ivan Nikolov 提到的路径更改。要小心，因为并非所有规则都属于 java（我还看到了 XML 的规则，...）。我对 PMD 没有那么深入，所以我不知道在哪个版本中引入了其他技术的规则。
*   导出 PMD 插件 4.0.0 的默认规则集以与旧的自定义规则集文件进行比较很有用。通过这种方式，您可以解决可以在下一点发现的问题。
*   在您的行为期间引发了未可视化的异常。此异常可以在最后的工作区日志文件 (/.metadata/.log) 中看到。这可以给你一个线索，还有什么需要改变的。使用前一点了解如何解决问题。就我而言，它已将一条规则的路径从更改为

在这些更改之后，我能够将手动迁移的自定义规则集文件导入 PMD 插件 4.0.0。

希望这可以帮助。

顺便说一句：我发现 4.0.0 版本的 PMD 插件非常有问题，所以我降级回 3.2.6

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-21T10:32:15.793

除了别人说的，你可能还得找到这个：

```
net.sourceforge.pmd.rules.XPathRule 
```

并将其替换为：

```
net.sourceforge.pmd.lang.rule.XPathRule 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-08T12:04:15.523

为什么不使用[Sonar Eclipse](http://docs.codehaus.org/display/SONAR/Installing+Sonar+in+Eclipse)？您无需担心规则集的同步。

# silverlight - 从浏览器中订阅剪贴板事件

> ID：15829514
> 
> 赞同：0
> 
> 时间：2013-04-05T08:45:43.653
> 
> 标签：silverlight, internet-explorer, activex, clipboard

使用 Win32 API 可以订阅剪贴板事件（[剪贴板事件 C#](https://stackoverflow.com/questions/621577/clipboard-event-c-sharp)）。

是否可以从网页中的 Active X 控件或 SilverLight 中执行此操作？

我的情况是，我想知道剪贴板中何时有新内容出现，但我在 Internet Explorer（最低版本 8）中的网页中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T10:15:22.150

答案是否定的，你不能@Vlad 我希望在有新东西到来时得到通知——这似乎不可能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:10:22.857

In Silverlight 5 you can enable trusted applications in browser:
[http://msdn.microsoft.com/en-us/library/gg192793(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/gg192793(v=vs.95).aspx)
In trusted applications you can use p/invoke to call WinAPI.

# android - 带有 ZXing 和 ZBar 的 QR 扫描仪无法读取卡片上的低质量代码

> ID：15829515
> 
> 赞同：4
> 
> 时间：2013-04-05T08:45:50.883
> 
> 标签：android, qr-code, zxing, zbar

我已经使用**ZXing**和**ZBar**制作了应用程序。两者都工作正常并始终读取**质量好的二维码**。

但问题是当我扫描**卡**上的代码时，它的**质量****不太**好，它从不扫描。我什至尝试使用**5 MP**相机设备，但结果相同。我尝试了许多来自 Google Play 商店的应用程序，但它们都不起作用。卡的质量没那么差。谁能告诉我解决方案或为此建议任何其他 API。我知道它不是 API，而是 QR 码的质量。任何帮助，将不胜感激。

 ****这是卡片图片![在此处输入图像描述](https://i.stack.imgur.com/YoO8w.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-12T14:18:06.757

在 ImageScanner 上尝试这些设置，

```
scanner = new ImageScanner();
//Slows the frame, but does the job
scanner.setConfig(0, Config.X_DENSITY, 1);
scanner.setConfig(0, Config.Y_DENSITY, 1);
scanner.setConfig(0, Config.ENABLE, 0);
// Only enable the codes your app requires
scanner.setConfig(Symbol.QRCODE, Config.ENABLE, 1); 
```

在我的应用程序中产生了巨大的变化。****

# android - 无法同步对 notify() 的调用

> ID：15829520
> 
> 赞同：1
> 
> 时间：2013-04-05T08:46:16.077
> 
> 标签：android, multithreading

原谅我，但我无法调用 NotificationBuilder 的 notify() 方法。我有这个代码：

```
timer.scheduleAtFixedRate(
              new TimerTask() {
                @Override
                public void run() {
                    synchronized (this) {
            Builder notif = new NotificationCompat.Builder(c);
        notif.setContentIntent(contIntent)
                .setWhen(System.currentTimeMillis())
                .setTicker("Notification ticker")
                .setSmallIcon(R.drawable.ic_launcher)
                .setContentTitle("Vinceri")
                .setContentText("Ha recibido una oferta de trabajo")
                .setAutoCancel(true);

        notif.notify();
        }
}
} 
```

而且无论我把同步块放在哪里，我都会得到同样的异常：

```
04-05 10:42:55.116: E/AndroidRuntime(18244): FATAL EXCEPTION: Timer-0
04-05 10:42:55.116: E/AndroidRuntime(18244): java.lang.IllegalMonitorStateException: object not locked by thread before notifyAll()
04-05 10:42:55.116: E/AndroidRuntime(18244):    at java.lang.Object.notifyAll(Native Method)
04-05 10:42:55.116: E/AndroidRuntime(18244):    at com.publidirecta.vinceriazafata.NotificationService$1.run(NotificationService.java:126)
04-05 10:42:55.116: E/AndroidRuntime(18244):    at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

这可能是一个菜鸟问题，但是......我必须做些什么才能不收到那个例外？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:51:52.060

假设您正在尝试将通知添加到 android 通知抽屉。您需要执行以下操作：

```
Builder notif = new NotificationCompat.Builder(c);
        notif.setContentIntent(contIntent)
                .setWhen(System.currentTimeMillis())
                .setTicker("Notification ticker")
                .setSmallIcon(R.drawable.ic_launcher)
                .setContentTitle("Vinceri")
                .setContentText("Ha recibido una oferta de trabajo")
                .setAutoCancel(true);
      //create notification from builder
      Notification notification = notif.build();
      //get instance of NotificationManager
      NotificationManager notificationmanager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
      //call notify method of NotificationManager to add this notification to android notification drawer..
      notificationmanager.notify(0, notification); 
```

# c# - 将 C# 日期时间解析为 javascript 日期时间

> ID：15829521
> 
> 赞同：19
> 
> 时间：2013-04-05T08:46:34.943
> 
> 标签：c#, javascript, jquery, datetime

我知道我的问题与其他问题相似，但我没有找到任何解决问题的方法。

我有一个 C# DateTime 属性

```
 public DateTime MyDate { get;set;} 
```

当我使用 ajax 获取一些信息时，我在 javascript 中写了如下内容：

```
$.each(object, function(k,v){
  alert(object.MyDate);
}); 
```

它返回如下内容：

```
/Date(1362478277517)/ 
```

可以将该日期时间转换为javascript日期吗？

谢谢你。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-05T08:48:10.763

`new Date(object.MyDate);`应该管用。

编辑： `var date = new Date(parseInt(object.MyDate.substr(6)));`

我也见过这种方法：

```
var milli = "/Date(1245398693390)/".replace(/\/Date\((-?\d+)\)\//, '$1');
var d = new Date(parseInt(milli)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-28T00:46:55.180

我正在使用.Net Core 2.0。& MySQL 5.7

在我目前的开发中，我将返回的值直接分配给 DOM 对象，如下所示：

```
DOMControl.value = response.CreatedOn.toString().split(".")[0]; 
```

我正在返回结果对象的[JsonResult](https://docs.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.mvc.jsonresult?view=aspnetcore-2.0)，结果 JSON 以如下日期值到达：

```
{
  ...
  createdOn : "2017-11-28T00:43:29.0472483Z"
  ...
} 
```

我希望这对某人有所帮助。

# asp.net - 关闭浏览器后 Session_End 不调用

> ID：15829522
> 
> 赞同：-1
> 
> 时间：2013-04-05T08:46:38.627
> 
> 标签：asp.net, session, web-config, sessionend

我在 web.config 中使用以下设置

```
<sessionState mode="InProc" cookieless="false" timeout="10"/> 
```

...

```
<authentication mode="Forms">
<forms loginUrl="login.aspx" timeout="10"/> 
```

并`Session_End`根据 Session 的值，我更改数据库中列的值（如果此列的值为 1 表示用户在线）但有时在用户关闭浏览器的一天后，此列的值 steel 为 1（表示用户关闭浏览器后 Session_End 不调用)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:51:30.353

如果您的浏览器关闭，则不会调用任何事件，它将在超时后调用。

应该调用该事件，但不一定在超时后立即调用。

您可以从浏览器尝试：开始会话，等待 > 1 分钟，以某种方式进行回发

这应该有助于验证 Timeout 是否有效，我认为您也会看到 SessionEnd 发生在那个时候。否则，只需等待并开始其他一些会话。系统会在某个时候出现或调用它。

[http://forums.asp.net/t/1689960.aspx/1](http://forums.asp.net/t/1689960.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:51:07.743

没有 Session_End 不会在页面关闭时调用。您需要为此使用脚本

```
<script>    
window.onbeforeunload = function (evt) {
var message = ‘Are you sure you want to leave?’;
if (typeof evt == ‘undefined’) {
evt = window.event;
}
if (evt) {
evt.returnValue = message;
}
return message;
}

</script> 
```

使用此脚本，您可以识别用户何时关闭浏览器

# c# - 实体框架代码优先 - 保存时如何忽略列

> ID：15829523
> 
> 赞同：5
> 
> 时间：2013-04-05T08:46:39.850
> 
> 标签：c#, .net, entity-framework, entity-framework-4.1, entity-framework-5

我有一个名为 Client 的类首先使用实体​​框架代码映射到数据库表。该表有一个计算字段，我需要在我的 Client 类中可用，但我知道无法写入该字段。有没有办法将实体框架配置为在保存时忽略该属性，但在读取时包含该属性？

我曾尝试在我的配置类中使用 Ignore 方法，或使用 [NotMapped] 属性，但这些会阻止从数据库中读取该属性。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T08:52:31.350

您可以使用[`DatabaseGeneratedAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.databasegeneratedattribute%28v=vs.95%29.aspx)with`DatabaseGeneratedOption.Computed`选项：

```
[DatabaseGenerated(DatabaseGeneratedOption.Computed)]
public ComputedPropertyType ComputedProperty { get; set; } 
```

或者，如果您更喜欢流利的 api，您可以[`HasDatabaseGeneratedOption`](http://msdn.microsoft.com/en-us/library/hh829746%28v=vs.103%29.aspx)在您的课程中使用方法`DbContext`：

```
public class EntitiesContext : DbContext
{
    public DbSet<EntityType> Enities { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<EntityType>().Property(e => e.ComputedProperty).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T08:51:35.213

将属性标记为已计算：

```
modelBuilder
    .Entity<MyEntityType>()
    .Property(_ => _.MyProperty)
    .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Computed); 
```

# database - 多对多关系 - 很多

> ID：15829526
> 
> 赞同：0
> 
> 时间：2013-04-05T08:46:59.103
> 
> 标签：database, many-to-many

我有一个关于在数据库中存储关系的一般性问题。

让我们举一个社会例子：**追随者**。我想存储**朋友 A (id 1) 正在关注朋友 B (id 5)。**

我用数据库中**的多对多关系来**做到这一点。

**插入：**

```
 table flw (friend,following,relation_id): (1,5,1) 
```

所以我们继续……与朋友 A、B、C、D 的一百万个关系，……

现在我的问题是，当我需要获取朋友 A（或 B、C、...）关注的所有关系时......它需要获得数百万条记录。这仍然有效吗？我无法想象 facebook 通过十亿行来获取我的朋友列表。

解决方案可能是使用多个数据库。但是，这是（数百万个多对多关系）存储我的示例中的内容的（唯一）正确方法吗？

# f# - F# 中的类型扩展和成员可见性

> ID：15829530
> 
> 赞同：17
> 
> 时间：2013-04-05T08:47:08.907
> 
> 标签：f#, lexical-scope, type-extension

F# 具有称为[“类型扩展”](http://msdn.microsoft.com/en-us/library/dd233211.aspx)的功能，使开发人员能够扩展现有类型。有两种类型的扩展：*固有扩展*和*可选扩展*。第一个类似于 C# 中的部分类型，第二个类似于方法扩展（但更强大）。

要使用内部扩展，我们应该将两个声明放入同一个文件中。在这种情况下，编译器会将两个定义合并为一种最终类型（即，这是一种类型的两个“部分”）。

问题是这两种类型对不同的成员和值有不同的访问规则：

```
// SampleType.fs
// "Main" declaration
type SampleType(a: int) =
    let f1 = 42
    let func() = 42

    [<DefaultValue>]
    val mutable f2: int
    member private x.f3 = 42
    static member private f4 = 42

    member private this.someMethod() =
        // "Main" declaration has access to all values (a, f1 and func())
        // as well as to all members (f2, f3, f4)
        printf "a: %d, f1: %d, f2: %d, f3: %d, f4: %d, func(): %d"
            a f1 this.f2 this.f3 SampleType.f4 (func())

// "Partial" declaration
type SampleType with

    member private this.anotherMethod() =
        // But "partial" declaration has no access to values (a, f1 and func())
        // and following two lines won't compile
        //printf "a: %d" a
        //printf "f1: %d" f1
        //printf "func(): %d" (func())

        // But has access to private members (f2, f3 and f4)
        printf "f2: %d, f3: %d, f4: %d"
            this.f2 this.f3 SampleType.f4 
```

我阅读了 F# 规范，但没有找到任何想法为什么 F# 编译器区分值和成员声明。

在 F# 规范的 8.6.1.3[部分](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc335818937)中说“实例定义定义的函数和值在**词法范围**内（因此隐式私有）到正在定义的对象。”。部分声明可以访问所有私有成员（静态和实例）。我的猜测是，“词法范围”规范作者专门指的是“主要”声明，但这种行为对我来说似乎很奇怪。

问题是：这种行为是故意的，其背后的理由是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T11:35:57.310

这是一个很好的问题！正如您所指出的，规范说“本地值在*词法范围*内限定为正在定义的对象”，但查看 F# 规范，它实际上并没有定义在这种情况下词法范围的含义。

如您的示例所示，当前行为是对象定义的词法范围只是主要类型定义（不包括内在扩展）。我对此并不感到惊讶，但我看到其他解释也很有意义......

我认为这样做的一个很好的理由是这两种扩展应该表现相同（尽可能），并且您应该能够根据需要将代码从使用一种重构为使用另一种。这两种类型的区别仅在于它们在封面下的编译方式。如果一种允许访问词法范围而另一种不允许访问，则此属性将被破坏（因为，*扩展成员*在技术上无法做到这一点）。

也就是说，我认为这可以（至少）在规范中得到澄清。报告此问题的最佳方法是将电子邮件发送`fsbugs`到`microsoft`dot `com`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T08:51:37.890

我把这个问题发给了`fsbugs`at `microsoft`dot `com`，得到了 Don Syme 的以下回答：

> 嗨，谢尔盖，
> 
> 是的，这种行为是故意的。当您在类范围中使用“let”时，标识符在类型定义上具有词法范围。该值甚至可能不会放在一个字段中——例如，如果一个值没有被任何方法捕获，那么它就成为构造函数的本地值。这种分析是在班级本地完成的。
> 
> 我了解您希望该功能像 C# 中的部分类一样工作。然而，它只是不能那样工作。

我认为应该在规范中更清楚地定义术语“词法范围”，因为否则当前的行为也会令其他开发人员感到惊讶。

非常感谢唐的回应！

# r - 如何在 R 中更改此日期的格式

> ID：15829531
> 
> 赞同：1
> 
> 时间：2013-04-05T08:47:08.887
> 
> 标签：r

我在 R 中有这个日期：

```
> head(mydates)

[1] "2007-01-01" "2007-01-02" "2007-01-03" "2007-01-04" "2007-01-05" "2007-01-08"
> class(mydates)

[1] "Date" 
```

我想把它改成这种格式

```
> head(targetdates)

[1] "2007-01-01 GMT" "2007-01-02 GMT" "2007-01-03 GMT" "2007-01-04 GMT"
[5] "2007-01-05 GMT" "2007-01-08 GMT"
> class(targetdates)

[1] "POSIXct" "POSIXt" 
```

我该怎么做（在 R 中）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:50:51.087

您可以使用`as.POSIXlt`：

```
R> as.POSIXlt(mydates, tz="GMT")
[1] "2007-01-01 UTC" "2007-01-02 UTC" "2007-01-03 UTC" "2007-01-04 UTC"
[5] "2007-01-05 UTC" "2007-01-08 UTC" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:13:34.253

你可以使用`as.POSIXct`

```
mydates
## [1] "2007-01-01" "2007-01-02" "2007-01-03" "2007-01-04" "2007-01-05" "2007-01-08"

class(mydates)
## [1] "Date"

Sys.setenv(TZ = "GMT") #necessary of you want dates to be printed in GMT
as.POSIXct(mydates)
## [1] "2007-01-01 GMT" "2007-01-02 GMT" "2007-01-03 GMT" "2007-01-04 GMT" "2007-01-05 GMT" "2007-01-08 GMT" 
```

另请阅读`?POSIXct`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:42:12.550

使用该`lubridate`软件包，您可以通过以下功能将日期“强制”为 GMT `force_tz`：

```
library(lubridate)

mydate <- as.Date("2007-01-01")
class(mydate)
#[1] "Date"

mydate1 <- as.POSIXlt(mydate) # or use as.POSIXct but you get a datetime format then.
mydate1
#[1] "2007-01-01 UTC"

mydate2 <- force_tz(mydate1, tzone = "GMT")
mydate2
#[1] "2007-01-01 GMT"

class(mydate2)
#[1] "POSIXlt" "POSIXt" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:44:23.580

试试这个：

```
> as.POSIXct(format(mydates), tz = "GMT")
[1] "2007-01-01 GMT" "2007-01-02 GMT" "2007-01-03 GMT" "2007-01-04 GMT"
[5] "2007-01-05 GMT" "2007-01-08 GMT" 
```

`"Date"`（如果您的数据是每天的，那么您为什么要这样做而不是坚持上课。）

# python - Numpy 数组创建

> ID：15829532
> 
> 赞同：3
> 
> 时间：2013-04-05T08:47:13.260
> 
> 标签：python, arrays, numpy

首先，我要对这个问题的随意性表示歉意，但我正在重写我的一些脚本以使用 Numpy 数组而不是嵌套的 python 列表（用于性能和内存），但我仍然在为他们的声明而苦苦挣扎。

我正在尝试使用 numpy 数组创建一个结构，我从数组中的 1000 个（任意值）元素开始，其中每个元素应该包含一个浮点数（如 [x][0]）和一个包含坐标的嵌套数组（所以 10.0000 x 2 浮动每个顶级元素）（作为 [x][1]，嵌套数组中的每个元素可作为 [x][1][y][z] 访问，其中 y 是嵌套数组中的元素，z 指定哪个2个坐标）。以下问题[Nested Structured Numpy Array](https://stackoverflow.com/q/9909399/1093485)创建了一个几乎相同的结构（作为我的问题和我想要的结构的参考）。

示意图原始数据示例：

```
time 0
  m/z 10 int 10
  m/z 20 int 20
  m/z 30 int 1000
  ...
time 1
  <repeat> 
```

我已经读过我必须使用 dtype 部分来定义嵌套数组，但我不太确定空数组的维度的声明部分，有人可以帮我吗？到目前为止，这是我想出的。

`data=np.zeroes((1000,2 /* Now add nested array */), dtype=[('time', 'f'), [('m/z','f'), ('intensity','f')]])`

PS：矩阵可能是更好的选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T09:31:21.563

```
>>> a = np.zeros(1000, dtype='float32, (10000,2)float32')
>>> a[200][0]
0.0
>>> a[200][1][2000]
array([ 0.,  0.], dtype=float32) 
```

请注意，这会创建 1000 个维度 (10000,2) 的数组。如果您只执行仅查看其中一个数组的操作，那很好。使用单独的 (1000,10000,2) 数组，您可以更好地利用 NumPy 中的矢量化操作。例如，您可以在一个操作中增加所有第二个坐标，如下所示：

```
>>> b = np.zeros((1000,10000,2))
>>> b[:,:,1] += 1 
```

试图做同样的事情`a[:][1][:,1]`是一个错误。

# iphone - 使用 NSPredicate 获取核心数据对象的问题

> ID：15829534
> 
> 赞同：1
> 
> 时间：2013-04-05T08:47:17.467
> 
> 标签：iphone, ios, objective-c, ipad, core-data

在开始之前，让我告诉你我的数据模型是什么样子的：

![在此处输入图像描述](https://i.stack.imgur.com/Vv3pI.png)

然后我有一个带有以下谓词的获取请求：

```
NSArray *allowedPackNames = @[@"success, happiness, free"];
            self.fetchedResultsController = [Author MR_fetchAllGroupedBy:nil
                                                           withPredicate:[NSPredicate predicateWithFormat:@"ANY quotes.quote.pack.packName IN %@", allowedPackNames]
                                                                sortedBy:AuthorKeys.name
                                                               ascending:YES
                                                                delegate:self]; 
```

我想获取所有具有成功、幸福或免费的 packName 的引文的作者。正如您在下面的关系表中看到的，作者有一个 NSSet 引号。但是，当我执行此操作时，出现以下错误：

```
CoreData: error: (1) I/O error for database at /Users/Abdul/Library/Application Support/iPhone Simulator/6.1/Applications/DA17421B-A54D-42E3-9694-FDCBFF7F8BA4/Library/Application Support/MyCoolApp/MyCoolApp.sqlite.  SQLite error code:1, 'no such column: t2.ZQUOTE'
2013-04-05 15:26:47.175 MyCoolApp[78622:c07] Core Data: annotation: -executeRequest: encountered exception = I/O error for database at /Users/Aditya/Library/Application Support/iPhone Simulator/6.1/Applications/DA17421B-A54D-42E3-9694-FDCBFF7F8BA4/Library/Application Support/MyCoolApp/MyCoolApp.sqlite.  SQLite error code:1, 'no such column: t2.ZQUOTE' with userInfo = {
    NSFilePath = "/Users/Abdul/Library/Application Support/iPhone Simulator/6.1/Applications/DA17421B-A54D-42E3-9694-FDCBFF7F8BA4/Library/Application Support/MyCoolApp/MyCoolApp.sqlite";
    NSSQLiteErrorDomain = 1;
} 
```

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:51:38.727

如果我没看错，谓词应该是

```
[NSPredicate predicateWithFormat:@"ANY quotes.pack.packName IN %@", allowedPackNames] 
```

即您必须删除“报价”，这是*报价*实体的属性，而不是关系。

# python - 为多个目标编写一个包含一条规则的生成文件？

> ID：15829538
> 
> 赞同：1
> 
> 时间：2013-04-05T08:47:34.373
> 
> 标签：python, windows, qt, makefile, pyqt4

这似乎是一个非常简单的问题，但我找不到任何方法来解决它。

我的意图是通过调用 pyuic4 命令（来自[PyQt](http://www.riverbankcomputing.co.uk/software/pyqt/intro)）将每个“.ui”文件转换为“.py”文件。我试图用一个非常短的makefile来管理它：

```
%.py: %.ui
    pyuic4 $< --output $@ 
```

这就是我目前所需要的。

makefile 名为“Makefile”，位于调用“make”的文件夹中，“.ui”文件也是如此。“pyuic4(.bat)”位于系统路径（Windows 7）中，“make”所在的[Unix Utilities也是如此。](http://unxutils.sourceforge.net/)

从 Windows 控制台运行“make”时，它会显示：

```
make: *** No targets.  Stop. 
```

从命令行使用显式文件名调用 pyuic4 是可行的。

我知道我可以自己指定任何目标文件，但如果可能的话，我想避免这种情况。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:21:10.687

根据 kasterma 的评论，您需要告诉 make 要构建哪个目标，但您只提供了一个模式规则。这可以通过以下方式完成。

```
UIFILES := $(wildcard *.ui)
PYFILES := $(UIFILES:.ui=.py)

.PHONY: all
all: $(PYFILES)

%.py: %.ui
    pyuic4 $< --output $@ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:42:12.607

由于您显然使用的是 GNU Makefile 语法，我建议您这样编写规则：

```
UIFILES = $(wildcard *.ui)

.PHONY: ui2py

ui2py: $(UIFILES)
        @for uifile in $(UIFILES); do \
                pyuic4 $$(uifile) --output $${uifile%.ui}.py; \
        done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T06:14:12.060

虽然问题可以通过 perror 或 eriktous 的解决方案来解决，但我现在采用 eriktous 提到的第三种方式，只需使用 shell 脚本调用 pyuic4 命令。它的运行速度非常快，即使输出会产生相同的文件，也不会对源代码控制造成任何损害。

我遇到了第二点，这可能让我分心。pyuic4命令真正命名为pyuic4.bat，是Windows中的“批处理文件”，类似于Linux/Unix环境下的shell脚本；相似，但不相同。如果从另一个批处理文件调用批处理文件，则应使用前导“调用”语句调用它，以防止在第一次调用后终止批处理。

如果我有三个文件（@符号是为了防止在执行过程中列出命令）

```
D:\Projekte\test>type main.cmd
@sub1
@sub2

D:\Projekte\test>type sub1.cmd
@echo This is sub 1

D:\Projekte\test>type sub2.cmd
@echo This is sub 2 
```

...结果只是

```
D:\Projekte\test>main
This is sub 1 
```

所以我对这个非常小的东西的“解决方案”是一个名为“update.cmd”的简单批处理文件，可以通过以下行的副本进行扩展：

```
call pyuic4 mainwindow.ui --output mainwindow.py 
```

这不是我最初想要的，但它对我有用。

但无论如何，谢谢你的帮助:-)

# hibernate - Hibernate 统计 TransactionCount 与 SuccessTransactionCount

> ID：15829543
> 
> 赞同：0
> 
> 时间：2013-04-05T08:47:49.563
> 
> 标签：hibernate

我在我的应用程序上启用了休眠统计。通过 JConsole.exe 我发现了以下条目

```
TransactionCount = 62
SuccessfulTransactionCount = 31 
```

TransactionCount 值反映事务总数，而 SuccessTransactionCount 反映成功事务。这是否意味着有 31 个失败的交易？

# jquery - chrome 中的 $.ajax 错误处理

> ID：15829545
> 
> 赞同：0
> 
> 时间：2013-04-05T08:47:54.263
> 
> 标签：jquery, google-chrome

嗨，我正在使用 jquery 表单帖子。当我发布表单时，它在 IE 中运行良好，但不适用于 Chrome。我把代码放在这里：

```
$(document).ready(function(){
    $('#signup').submit(function(){

        var username    = $('#username').val();
        var password    = $('#password').val();
        var cpassword   = $('#cpassword').val();
        var email       = $('#email').val();
        if(password != cpassword){
            alert("Passwords are not equal");
            $('#cpassword').css('border','1px solid red');
        }else{
             $.ajax({
                type    :'post',

                url     :'http://localhost/tmc/includes/ajax-signup.php',

                data    :({password:password,username:username,email:email}),

                success : function(msg){
                    alert(msg);

                },                  
            });
        }
        //$("#submit").hide();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:58:47.897

添加`id='submit'`到您的提交按钮并尝试这样的调用：

```
 $('#submit').click(function(e){

        e.preventDefault();

        var username    = $('#username').val();
        var password    = $('#password').val();
        var cpassword   = $('#cpassword').val();
        var email       = $('#email').val();
        if(password != cpassword){
            alert("Passwords are not equal");
            $('#cpassword').css('border','1px solid red');
        }else{
             $.ajax({
                type    :'POST',
                url     :'http://localhost/tmc/includes/ajax-signup.php',
                data    : {password:password,username:username,email:email},
                success : function(msg){
                    alert(msg);
                },                  
            });
        }
        //$("#submit").hide();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:53:31.480

我认为你需要这个：

```
$(function() {
    $.ajaxSetup({
        error: function(jqXHR, exception) {
            if (jqXHR.status === 0) {
                alert('Not connect.\n Verify Network.');
            } else if (jqXHR.status == 404) {
                alert('Requested page not found. [404]');
            } else if (jqXHR.status == 500) {
                alert('Internal Server Error [500].');
            } else if (exception === 'parsererror') {
                alert('Requested JSON parse failed.');
            } else if (exception === 'timeout') {
                alert('Time out error.');
            } else if (exception === 'abort') {
                alert('Ajax request aborted.');
            } else {
                alert('Uncaught Error.\n' + jqXHR.responseText);
            }
        }
    });
}); 
```

只需立即进行 ajax 调用，您将在遇到任何错误时收到相应的警报！此外，使用它还有一个优点。您不需要`error`再次为任何 ajax 调用编写方法。它使用[ajaxSetup()](http://api.jquery.com/jQuery.ajaxSetup/)充当***全局 ajax 错误处理程序***。

另外，我还想提一提的是，只需删除`comma`ajax 调用中的额外内容。

```
$.ajax({
    type: 'post',
    url: 'http://localhost/tmc/includes/ajax-signup.php',
    data: ({
        password: password,
        username: username,
        email: email
    }),
    success: function (msg) {
        alert(msg);
    } //,  <---- remove this extra comma, no need of it
}); 
```

# c++ - C++ 混合指向不同字符类型的指针

> ID：15829549
> 
> 赞同：1
> 
> 时间：2013-04-05T08:47:57.210
> 
> 标签：c++, casting, warnings

我正在用 C++ 编写一个程序，该程序采用 ACT（Adobe 颜色表）文件并将其转换为纯文本可读的 JASC-PAL 文件。我想从 ACT 文件中读取二进制数据并将其存储在内存中以供使用。我编写了以下代码来做到这一点，它使用 BCC55 构建。问题是我收到构建警告：“警告 W8079：在函数 read_file() 中混合指向不同 'char' 类型的指针”。

```
unsigned char * memblock;

bool read_file()
{
    int filesize;
    ifstream act ("test.act", ios::binary|ios::ate);
    if (act.is_open())
    {
        filesize = act.tellg();
        act.seekg(0);
        memblock = new unsigned char [filesize];
        act.read(memblock, filesize);
        act.close();
        cout << "Color Table loaded to memory." << endl;
        return true;
    }
    else
    {
        cout << "Failed to open file." << endl;
        return false;
    }
} 
```

在 Embarcadero 文档 wiki 上查看此警告似乎是因为我将一个无符号字符指针传递给一个需要常规字符指针的函数。它说这在技术上是不正确的，但通常是无害的。我的问题是，严格来说，如果这是不正确的，那么我该如何在构建时不引起 W8079 警告的情况下执行此操作？由于警告是无害的并且我的代码按预期工作，我是否应该为此烦恼？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:50:33.680

添加演员表。在这种情况下，我将只使用一个简单的 C 转换。

```
act.read((char*)memblock, filesize); 
```

但你也可以使用 reinterpret_cast

```
act.read(reinterpret_cast<char*>(memblock), filesize); 
```

但这使它看起来比实际更重要。正如文档所说，这是无害的。

# php - strlen() php 函数给出了错误的 unicode 字符长度

> ID：15829554
> 
> 赞同：21
> 
> 时间：2013-04-05T08:48:14.037
> 
> 标签：php, strlen

我正在尝试获取此 unicode 字符串的长度

```
$text = 'نام سلطان م';
$length = strlen($text);
echo $length; 
```

输出

```
20 
```

它如何确定 unicode 字符串的长度？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-04-05T08:51:25.467

`strlen()`没有正确处理多字节字符，因为它假定 1 个字符等于 1 个字节，这对 unicode 根本无效。这种行为被[清楚地记录在案](http://php.net/strlen)：

> strlen() 返回**字节数**而不是字符串中的**字符数**。

解决方案是改用`mb_strlen()`函数（`mb`代表`multi byte`）（[参见 mb_strlen() 文档](http://php.net/mb_strlen)）。

**编辑**

如果由于某种原因无法更改代码/不可行，则可能希望确保字符串函数被多字节对应函数自动重载：

> 要使用函数重载，请将 php.ini 中的 mbstring.func_overload 设置为一个正值，该值表示指定要重载的函数类别的位掩码组合。它应该设置为 1 以重载 mail() 函数。2个用于字符串函数，4个用于正则表达式函数。例如，如果设置为 7，邮件、字符串和正则表达式函数将被重载。

这由 PHP 支持并[在此处记录](http://php.net/manual/en/mbstring.overload.php)（**请注意，此功能在 PHP 7.2 和更新版本中已弃用**）。

请注意，您可能还需要编辑您的`php.ini`以确保启用 mb_string 模块。[此处记录了](http://php.net/manual/en/mbstring.configuration.php)可用的设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T08:49:40.290

您正在寻找[`mb_strlen`](http://www.php.net/manual/en/function.mb-strlen.php).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T08:53:36.060

函数`strlnen`不计算字符数，而是字节数。对于多字节字符，它将返回更高的数字。
改为使用`mb_strlen()`来计算实际的字符数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:56:09.020

就像引用的其他答案的附录一样`mb_strlen()`：

如果`php.in`设置`mbstring.func_overload`将第 2 位设置为 1，则将根据默认字符集`strlen`计算*字符数；*否则它将计算字符串中的*字节数*

# ruby-on-rails - 如何获取视频的属性

> ID：15829555
> 
> 赞同：2
> 
> 时间：2013-04-05T08:48:14.583
> 
> 标签：ruby-on-rails, ruby, video, gem

有谁知道如何在 Ruby on rails（方法或 gem）上获取视频的属性？

例如：就像图像属性（宽度，高度，尺寸......等）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:06:39.653

对于视频分析，我最多更喜欢 FFMPEG。实际上我没有在任何 Rails 项目中使用它，但你可以找到 gem [streamio-ffmpeg gem](https://github.com/streamio/streamio-ffmpeg)，它看起来很有希望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:58:55.457

请注意，视频有*很多*属性和子格式。

您可以使用二进制获取 XML 视频描述`mediainfo`，并使用 eg`nokogiri`对其进行解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-20T08:51:18.333

您可以使用

```
Paperclip::Geometry.for_file(source) 
```

你会得到高度，宽度，方向

# java - 使用 Positive Lookbehind 的意外正则表达式行为

> ID：15829558
> 
> 赞同：0
> 
> 时间：2013-04-05T08:48:20.310
> 
> 标签：java, regex

我正在编写一个正则表达式来匹配一个数字序列，然后是一个点，然后是另一个数字序列，总长度，包括点，整个序列应该是 13。为此，我写的正则表达式曾是：`(\d{6,12})\.(\d{0,6})(?<=.{13})`

当我对以下两个数据样本运行此表达式时，我希望只有第二个匹配，但相反，两者都是数学运算。谁能帮我理解为什么？

*   `1234567.123456`> 匹配，但我希望它不匹配；
*   `1234567.12345`> 匹配。

这是我用来测试的 Java 代码： import java.util.regex.Pattern;

```
public class App {
    public static void main(String[] args) {
        Pattern matcher = Pattern.compile("(\\d{6,12})\\.(\\d{0,6})(?<=.{13})");
        System.out.println(matcher.matcher("1234567.123456").matches());
        System.out.println(matcher.matcher("1234567.12345").matches());
    }
} 
```

输出：

```
true
true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:49:20.963

您需要将后向断言锚定到字符串的开头，否则它将匹配子字符串：

```
Pattern matcher = Pattern.compile("(\\d{6,12})\\.(\\d{0,6})(?<=^.{13})"); 
```

或者使用前瞻断言（更容易理解，IMO）：

```
Pattern matcher = Pattern.compile("(?=.{13}$)(\\d{6,12})\\.(\\d{0,6})"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:50:31.370

您需要使用锚来匹配字符串的开头：

```
"(\\d{6,12})\\.(\\d{0,6})(?<=^.{13})" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T08:50:33.040

您可能希望在`^`后向表达式中添加一个锚 ( )：

```
(?<=^.{13}) 
```

# unity3d - Unity 中的集成 Awesomomium - RenderBuffer 是 UnityEngine.RenderBuffer 和 AwesomiumMono.RenderBuffer 之间的模糊引用

> ID：15829561
> 
> 赞同：0
> 
> 时间：2013-04-05T08:48:26.350
> 
> 标签：unity3d, awesomium

我必须将 Awesomium 集成到 Unity 3d 中。我已经完成了中定义的步骤

[http://labs.awesomium.com/unity3d-integration-tutorial-part-1/](http://labs.awesomium.com/unity3d-integration-tutorial-part-1/)

但是当我必须将 webTexture.cs 拖到播放器对象上时，它会给出以下错误。

Assets/WebTexture.cs(226,13)：错误 CS0104：`RenderBuffer' is an ambiguous reference between`UnityEngine.RenderBuffer' 和 `AwesomiumMono.RenderBuffer'

请协助！

谢谢， 万达娜

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T10:44:14.723

我自己修好了

在 WebTexture.cs（Awesomium 提供的类文件）中，Reference 有歧义。

而不是 ** RenderBuffer _rBuffer = webView.Render();** 调用 AwesomiumMono.RenderBuffer _rBuffer = webView.Render();

它将修复并加载您的 Web 容器。

# mysql - 在 django 中完全复制 mysql 数据库

> ID：15829567
> 
> 赞同：0
> 
> 时间：2013-04-05T08:48:46.197
> 
> 标签：mysql, django

我的团队正在 django 中建立一个网站。我们正在使用 MySql，我们为该项目创建的数据库称为“投票”

我们总是共享代码，但问题是我的项目团队添加到数据库中的任何内容都必须由我再次手动添加，以便使用它。

有什么方法可以将我的团队创建的整个数据库复制到我的系统中？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:50:53.220

我想到了 3 种方法：

1.  [导出和导入整个 mysql 数据库](http://www.mydigitallife.info/how-to-backup-and-restore-export-and-import-mysql-databases-tutorial/)（使用`mysqldump`或类似）。
2.  [使用 Django 的固定装置系统。](https://docs.djangoproject.com/en/dev/howto/initial-data/)这允许您将 DB 的内容转储到 json/xml 文件中，这些文件可以稍后由团队的其他成员通过`python manage.py loaddata ...`. 这些在现实中可能是非常喜怒无常的，我通常发现它们比它们值得实施更麻烦。
3.  使用[South 的数据迁移](http://codeinthehole.com/writing/prefer-data-migrations-to-initial-data/)。South 主要关注管理模式迁移，即优雅地处理模型上字段的添加和删除，这样您就不会最终得到一个不稳定的数据库。您还可以使用它来编写数据迁移，这将允许您以编程方式将数据添加到您可以在团队成员之间共享的数据库中。

# javascript - 如何删除 iFrame 中的某个元素

> ID：15829569
> 
> 赞同：7
> 
> 时间：2013-04-05T08:48:47.403
> 
> 标签：javascript, html, iframe, web

我有一个网站，里面有一个 iFrame。iFrame 链接到外部页面。我想使用 Javascript（其他方法也可以）删除外部网站中的一些元素（该网站有 HTML 编码），而无需任何人单击任何“删除”按钮或执行任何操作，因此当我的网页和iframe 加载，没有人可以看到它。例如，我想删除一个网站的标志和一些内容。我尝试了很多方法，但它们在 iFrame 中不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:16:51.173

不幸的是，如果 Iframe 链接到外部站点，则无法访问 Iframe 中的元素，没有使用 javascript 的解决方法。

# directx - SlimDX - AMD 6350 上 Win7 + DX9 中的低分辨率

> ID：15829570
> 
> 赞同：0
> 
> 时间：2013-04-05T08:49:00.197
> 
> 标签：directx, visualization, resolution, directx-9, slimdx

几个月前，我在一台带有 SlimDX 和旧 Geforce 的旧 XP 机器上实现了可视化。它工作得很好。现在我在一台新计算机上开始这些东西：

Windows7 英特尔 I7 AMD HD6350

它仍然是 DirectX 9 设备。但是现在的分辨率很低！！！我在 Photoshop 中测试了一个屏幕截图。可视化中的一个像素由我的屏幕上的 4 个像素组成。我绘制的控件有 1000 x 1000 像素，但 Slimdx 将 500x500 像素拉伸到此控件...抗锯齿和其他东西打开和关闭 - 什么也没发生。

任何人的想法？：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:32:27.343

找到解决办法！！！

从 Win7 开始，Backbuffer Size 必须手动设置！

# regex - 如何检查同一行中是否有双打？

> ID：15829571
> 
> 赞同：0
> 
> 时间：2013-04-05T08:49:03.967
> 
> 标签：regex, date, vim

我有一个包含许多行的文本文件，如下所示：

```
IMG_0106.JPG    y:\2004_05_23_bern basel\       2004_05_23
IMG_0107.JPG    y:\2004_05_23_dortmund\         2004_05_23
IMG_0108.JPG    y:\2004_05_25_paris\            2004_05_24
IMG_0110.JPG    y:\2004_05_25_paris\            2004_05_25 
```

我想检查在同一行中是否有双日期，在哪里没有。

第 1,2,4 行有一个日期匹配。
第 3 行没有日期匹配 (2004_05_25 != 2004_05_24)

我知道如何找到双线，但在这种情况下我不知道如何在同一行中找到双线。
有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:16:24.237

这应该有效：

```
grep '\([0-9]\{4\}_[0-9]\{2\}_[0-9]\{2\}\).*\1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:16:38.783

这个`:g`带有正则表达式的命令会给你那些日期重复的行，你可以在这些行上做你的操作：

```
:g/\v(\d{4}_\d{2}_\d{2}).*\1 
```

如果您只想找到它们，（或使用 hlsearch 突出显示它们），只需执行`/sameRegex`

# c# - 在特定路径中应用程序任务栏图标设置错误 - 这个设置在哪里？

> ID：15829572
> 
> 赞同：1
> 
> 时间：2013-04-05T08:49:04.387
> 
> 标签：c#, wpf, windows, icons, taskbar

我正在开发一个应用程序（C#/WPF），当它安装在 Program Files 文件夹中并运行任务栏上的图标时，错误地显示为这样；

![在此处输入图像描述](https://i.stack.imgur.com/X0xHw.png)

但是，如果我重命名或复制到另一个文件夹，运行时会出现正确的图标。似乎在此路径中为此文件设置了一个图标。我查看了注册表，但没有运气，还清除了图标缓存。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:16:29.630

这是图标被缓存并且缓存没有被刷新的症状。通常重启可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T18:44:34.160

我有同样的问题，并通过安装项目修复它。

在 Visual Studio 中：

1.  右键单击设置项目。

2.  选择查看 -> 文件系统。

3.  显示应用程序快捷方式的属性（通常在用户程序菜单下）。

4.  快捷方式将有一个属性调用图标。将其设置为应用程序的 EXE，或将其设置为安装包中的图标。

5.  构建安装项目，然后重新安装。

# c++ - 注销 COM 的问题（高级安装程序）

> ID：15829573
> 
> 赞同：1
> 
> 时间：2013-04-05T08:49:11.693
> 
> 标签：c++, windows, com, advanced-installer

问题定义：

在 COM 注销期间挂断一段时间并说`The setup was unable to automatically close all requested applications. Please ensure that the applications holding files in use are closed before continuing with the installation`。但实际上我的扩展程序已成功卸载和卸载。

环境定义：

我为测试创建了某种虚拟 shell 命名空间扩展。它实现`IContextMenu`并且所有方法都返回`S_OK`并且不执行任何其他操作，并且 rgs 文件是

```
HKCR
{
    xxx.sergz.dummyShellExt.1 = s 'DummyNSE Class'
    {
        CLSID = s '{6C0FBE00-9898-4BB0-806F-3ED7D2F1170D}'
    }
    xxx.sergz.dummyShellExt = s 'DummyNSE Class'
    {
        CurVer = s 'xxx.sergz.dummyShellExt.1'
    }
    NoRemove CLSID
    {
        ForceRemove {6C0FBE00-9898-4BB0-806F-3ED7D2F1170D} = s 'DummyNSE Class'
        {
            ProgID = s 'xxx.sergz.dummyShellExt.1'
            VersionIndependentProgID = s 'xxx.sergz.dummyShellExt'
            ForceRemove Programmable
            InprocServer32 = s '%MODULE%'
            {
                val ThreadingModel = s 'Apartment'
            }
            TypeLib = s '{3DC947F0-6691-4043-B414-29F749209905}'
            Version = s '1.0'
        }
    }
    NoRemove Directory
    {
        NoRemove Background
        {
            NoRemove ShellEx
            {
                NoRemove ContextMenuHandlers
                {
                   ForceRemove DummyShellExt = s '{6C0FBE00-9898-4BB0-806F-3ED7D2F1170D}'
                }
            }
        }
    }
}

HKLM
{
  NoRemove Software
  {
    NoRemove Microsoft
    {
      NoRemove Windows
      {
        NoRemove CurrentVersion
        {
          NoRemove Shell Extensions
          {
            NoRemove Approved
            {
              val '{6C0FBE00-9898-4BB0-806F-3ED7D2F1170D}' = s 'xxx.sergz Dummy shell extension.'
            }
          }
        }
      }
    }
  }
} 
```

我选择`Professional`安装程序并只添加了我的 dll 文件。`Registration`在我选择的文件属性选项卡上`Auto register file...`，`Extract registration info...`并且`Synchronization`是`Enabled`。在`Product Information->Install Parameters->PackageType`我选择`64-bit package for x64...`.

现在我构建 MSI 并安装扩展。启动资源管理器并右键单击文件夹背景上的某处。根据我的日志，我的扩展已加载并且是 DLL_PROCESS_ATTACH 和几次 DLL_THREAD_ATTACH。

我再次启动 MSI 并选择`Remove`. 它说你必须关闭`... applications are using files...`并且只有`Windows Explorer`在列表中。我选择`Automatically close ...`并按 OK。

所有资源管理器窗口都已关闭，但资源管理器似乎没有关闭。

状态是“正在关闭应用程序”，根据我的日志，dll 已经被卸载。问题就在这里。dll 已卸载，但 MSI 仍在等待某些内容，然后显示`The setup was unable to automatically close all requested applications. Please ensure that the applications holding files in use are closed before continuing with the installation`。我单击“确定”并继续该过程，最终成功删除了我的 DLL。

我使用的是 Windows 8 64 位。

这种等待的原因是什么以及应用程序无法关闭的消息。我怎样才能弄清楚？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:19:05.187

对，这行不通，shell 扩展很可能会被加载，而且 MSI 不会杀死 Explorer.exe。你也不想这样，这对用户来说是一个可怕的景象。

您需要使用另一种方法来取消/注册扩展。目前尚不清楚“专业安装程序”可能意味着什么。但是您始终可以通过自己修改注册表来取消/注册 COM 服务器，而不是将其留给 DLL 来完成。这实际上是推荐的方式。您已经知道 .rgs 文件中的注册表项。您还可以使用 WiX 工具集中的 Heat.exe 收割机。DLL 需要通过在下次用户登录时延迟删除来删除，方法是将其添加到 PendingFileRenameOperations 注册表项中。检查您的安装程序创建工具以了解正确的过程。

# ruby - Ruby 字符串到格式化的 JSON

> ID：15829574
> 
> 赞同：0
> 
> 时间：2013-04-05T08:49:12.373
> 
> 标签：ruby, json, nokogiri

我已经用 Nokogiri 从页面中删除了部分数据。

```
require 'net/http'
require 'nokogiri'
require 'open-uri'
require 'json'

sources = {
   cb: "http://www.cbbankmm.com/fxratesho.php",
}

puts "Currencies from CB Bank are"
if @page = Nokogiri::HTML(open(sources[:cb]))
    (1..3).each do |i|
        puts @page.css("tr")[i].text.gsub(/\s+/,'')
    end
end 
```

结果是

```
Currencies from CB Bank are
USD873883
SGD706715
EURO11241135 
```

我想将输出格式化为以下 JSON 格式

```
{
    "bank":"CB",
    "rates": {
        "USD":"[873,883]",
        "SGD":"[706,715]",
        "EURO":"[1124,1135]"
    }
} 
```

我必须使用哪种 gems 方法来获得上述 Hash 或 JSON 格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:26:25.103

一些抽象可能是一个想法。因此，也许有一门课程可以帮助您完成这项工作：

```
class Currencies

  def initialize(page, bank)
    @page = page
    @bank = bank
  end

  def parsed
    @parsed ||= @page.css("tr").collect{ |el| el.text.gsub(/\s+/,'') }
  end

  def to_hash
    {
      bank: @bank,
      rates: {
        USD: usd,
        SGD: sgd,
        .... 
      }
    }
  end

  def usd
    parsed[0].gsub(/^USD/, '')
  end

  def sgd
    parsed[1].gsub(/^SGD/, '')
  end

  ...

end 
```

像这样使用它

```
Currencies.new(Nokogiri::HTML(open(sources[:cb])), "CB").to_hash.to_json 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:08:24.070

只需在 Ruby 中创建一个等效的哈希结构，然后执行例如

```
hash = {
    "bank" => "CB",
    "rates" => {
        "USD" => "[873,883]",
        "SGD" => "[706,715]",
        "EURO" => "[1124,1135]"
    }
}

hash.to_json 
```

您已经包含了`json`宝石。显然，您在当前有`puts`语句的地方构建 Ruby 哈希。

编辑：如果布局对您很重要，您可能更喜欢：

```
JSON.pretty_generate( hash ) 
```

# linux - bash 脚本中的“for”循环只运行一次

> ID：15829580
> 
> 赞同：1
> 
> 时间：2013-04-05T08:49:31.670
> 
> 标签：linux, bash, shell, for-loop

脚本目标很简单。

我有很多目录，其中包含一些捕获的流量文件。我想为每个目录运行一个命令。所以我想出了一个脚本。但我不知道为什么脚本只在第一次匹配时运行。

```
#!/bin/bash
# Collect throughput from a group of directory containing capture files
# Group of directory can be specify by pattern
# Usage: ./collectThroughputList [regex]
#       [regex] is the name pattern of the group of directory

for DIR in $( ls -d $1 ); do
   if test -d "$DIR"; then
       echo Collecting throughputs from directory: "$DIR"
       ( sh collectThroughput.sh $DIR > $DIR.txt )
   fi
done
   echo Done\! 
```

我尝试使用：

```
for DIR in $1; do 
```

或者

```
for DIR in `ls -d $1`; do 
```

或者

```
for DIR in $( ls -d "$1" ); do 
```

或者

```
for DIR in $( ls -d $1 ); do 
```

但结果是一样的。for 循环只运行一次。

最后我找到了这个并做了一些技巧让它工作。但是，我想知道为什么我的第一个脚本不起作用。

```
find *Delay50ms* -type d -exec bash -c "cd '{}' && echo enter '{}' && ../collectThroughput.sh ../'{}' > ../'{}'.txt" \; 
```

“*Delay*”是我要运行命令的目录模式名称。感谢您指出问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T08:58:16.847

由于您想查找 $1 下的所有子目录，请像这样使用它：

```
for DIR in $(find $1 -type d) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T09:05:00.687

## 问题

您遇到的问题很可能是由于您尝试使用某种模式，例如`*`作为脚本的参数。

用类似的东西运行它：

```
my_script * 
```

这里发生的是，shell 将`*`在调用您的脚本之前扩展。因此，`$1`在您的脚本中执行分词后，将仅引用`ls`.

## 例子

给定以下目录布局：

```
 directory_a
 directory_b
 directory_c 
```

调用`my_script *`将导致：

```
my_script directory_a  directory_b directory_c 
```

因此被称为你的循环只是迭代`$(ls -d directory_a)`它实际上只是一个人`directory_a`而已。

## 解决方案

要让程序与您一起运行，`$1=*`您必须`*`在调用脚本之前转义。

尝试运行：

```
my_script \* 
```

为了有效地看到它，它会做它打算做的事情。您的脚本中的这种方式`$1`将包含您希望脚本工作的方式，`*`而不是最有可能的方式。`directory_a`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:36:45.900

正如 mikyra 指出的那样，shell 在将参数`*`传递给脚本之前会将参数扩展到目录中的所有条目。

如果您想要通配符的外壳扩展（例如`*`匹配除隐藏文件之外的所有文件），您可以简单地将扩展留给外壳并使用结果，通过迭代所有参数，而不仅仅是第一个参数：

```
for DIR in $@; do
   # ...
done 
```

如果您想自己进行扩展（例如，因为模式应该只应用于预过滤列表或不同目录中的文件，或者因为您想要正则表达式扩展而不是 shell 通配符），您必须保护参数不被 shell 扩展，或者使用反斜杠符号（如 mikyra's `\*`）或使用引号（通常更容易使用）：

```
my_script "*" 
```

# javascript - 从 Web 应用程序获取文件位置

> ID：15829581
> 
> 赞同：0
> 
> 时间：2013-04-05T08:49:32.120
> 
> 标签：javascript, html

我正在制作一个新项目，它**不会**放在服务器上，但我想当用户使用文件上传时，它会获取用户上传的文件的链接......我知道 javascript 不能做这个..

有没有其他方法可以做到这一点？

从文件输入框中获取文件位置...

# c# - 计算特定字符串组合的行数

> ID：15829582
> 
> 赞同：2
> 
> 时间：2013-04-05T08:49:35.373
> 
> 标签：c#

我想数数没有。出现 ProductServices 和 Add Product 的行数。

日志是：

> INFO [ProductServices] 添加产品已由 gulanand 对 id 为 424 () 的产品执行 INFO [ProductServices] 添加产品已由 gulanand 对 id 为 424 () 的产品执行id 424 () INFO [ProductServices] Update Product has been executed by gulanand on product with id 424 () INFO [ProductServices] Update Product has been executed by gulanand on product with id 424 () INFO [ProductServices] Add Product has been executed by gulanand 在 id 为 424 () 的产品上添加产品 gulanand 对 id 为 424 () 的产品执行了添加产品 gulanand 在 id 为 424 () 的产品上执行

我试过的代码是：

```
IEnumerable<string> textLines =
    Directory.GetFiles(@"C:\Users\karansha\Desktop\Ashish Logs\", "*.*")
                        .Select(filePath => File.ReadAllLines(filePath))
                        .SelectMany(line => line);

List<string> users = new List<string>();

Regex r = new Regex(@"*ProductServices\sAdd Product");
foreach (string Line in textLines)
{
    if (r.IsMatch(Line))
    {
        users.Add(Line);
    }
}
//string[] textLines1 = new List<string>(users).ToArray();
int countlines = users.Count();
Console.WriteLine("ProductsCreated=" + countlines); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:53:23.313

这是你想要的吗？

```
 int count = File.ReadAllLines().Count(x=>x.Contains("MONKEY")); 
```

Linq是Luvly！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:51:37.157

这个怎么样：（对于每个文件）

```
string[] lines = File.ReadAllLines(filePath)
int count = lines.Count(input => input.Contains("ProductServices") && 
                                 input.Contains("Add Product")); 
```

# java - 用 vlcj 播放 youtube 视频不再有效

> ID：15829583
> 
> 赞同：2
> 
> 时间：2013-04-05T08:49:36.123
> 
> 标签：java, ubuntu, youtube, vlc, vlcj

我在使用 vlcj 播放 youtube 视频时遇到问题。直到上周左右一切正常。我打电话给 mediaPlayer.playMedia(" [http://www.youtube.com/watch?v=1t8fl96HPQI](http://www.youtube.com/watch?v=1t8fl96HPQI) ") 并且工作正常，但现在不行了。它根本不会产生任何错误。请注意，我可以播放本地文件和其他在线流媒体网址，但不能播放 youtube 视频。

这是我正在使用的代码。（基本上它是一个现成的例子）

```
/*
 * This file is part of VLCJ.
 *
 * VLCJ is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * VLCJ is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with VLCJ.  If not, see <http://www.gnu.org/licenses/>.
 * 
 * Copyright 2009, 2010, 2011 Caprica Software Limited.
 */

package com.javacodegeeks.youtube.test;

import java.awt.BorderLayout;
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Frame;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.util.List;

import javax.swing.BoxLayout;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UIManager.LookAndFeelInfo;
import javax.swing.border.EmptyBorder;

import uk.co.caprica.vlcj.binding.internal.libvlc_media_t;
import uk.co.caprica.vlcj.player.MediaPlayer;
import uk.co.caprica.vlcj.player.MediaPlayerEventAdapter;
import uk.co.caprica.vlcj.player.MediaPlayerFactory;
import uk.co.caprica.vlcj.player.embedded.EmbeddedMediaPlayer;
import uk.co.caprica.vlcj.test.VlcjTest;

/**
 * A minimal YouTube player.
 * <p>
 * The URL/MRL must be in the following format:
 * <pre>
 *   http://www.youtube.com/watch?v=000000
 * </pre>
 * The only thing that makes this different from a 'regular' media player
 * application is the following piece of code:
 * <pre>
 *   mediaPlayer.setPlaySubItems(true); // <--- This is very important for YouTube media
 * </pre>
 * Note that it is also possible to programmatically play the sub-item in 
 * response to events - this is slightly more complex but more flexible.
 * <p>
 * The YouTube web page format changes from time to time. This means that the
 * lua scripts that vlc provides to parse the YouTube web pages when looking
 * for the media to stream may not work. If you get errors, especially errors
 * alluding to malformed urls, then you may need to update your vlc version to
 * get newer lua scripts.
 */
public class NewClass extends VlcjTest {

  private MediaPlayerFactory factory;
  private EmbeddedMediaPlayer mediaPlayer;
  private Frame mainFrame;

  private JLabel urlLabel;
  private JTextField urlTextField;
  private JButton playButton;

  public static void main(String[] args) throws Exception {
    setLookAndFeel();

    SwingUtilities.invokeLater(new Runnable() {
      @Override
      public void run() {
        new NewClass().start();
      }
    });
  }

  public NewClass() {
    mainFrame = new Frame("vlcj YouTube Test");
    mainFrame.setIconImage(new ImageIcon(getClass().getResource("/icons/vlcj-logo.png")).getImage());
    mainFrame.setSize(800, 600);
    mainFrame.addWindowListener(new WindowAdapter() {
      @Override
      public void windowClosing(WindowEvent e) {
        exit(0);
      }
    });
    mainFrame.setLayout(new BorderLayout());

    JPanel cp = new JPanel();
    cp.setBackground(Color.black);
    cp.setLayout(new BorderLayout());

    JPanel ip = new JPanel();
    ip.setBorder(new EmptyBorder(4, 4, 4, 4));
    ip.setLayout(new BoxLayout(ip, BoxLayout.X_AXIS));

    urlLabel = new JLabel("URL:");
    urlLabel.setDisplayedMnemonic('u');
    urlLabel.setToolTipText("Enter a URL in the format http://www.youtube.com/watch?v=000000");
    urlTextField = new JTextField(40);
    urlTextField.setFocusAccelerator('u');
    urlTextField.setToolTipText("Enter a URL in the format http://www.youtube.com/watch?v=000000");
    playButton = new JButton("Play");
    playButton.setMnemonic('p');

    ip.add(urlLabel);
    ip.add(urlTextField);
    ip.add(playButton);

    cp.add(ip, BorderLayout.NORTH);

    Canvas vs = new Canvas();
    vs.setBackground(Color.black);
    cp.add(vs, BorderLayout.CENTER);

    mainFrame.add(cp, BorderLayout.CENTER);

    urlTextField.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent e) {
        play();
      }
    });

    playButton.addActionListener(new ActionListener() {
      @Override
      public void actionPerformed(ActionEvent e) {
        play();
      }
    });

    factory = new MediaPlayerFactory();

    mediaPlayer = factory.newEmbeddedMediaPlayer();
    mediaPlayer.setVideoSurface(factory.newVideoSurface(vs));

    mediaPlayer.setPlaySubItems(true); // <--- This is very important for YouTube media

    mediaPlayer.addMediaPlayerEventListener(new MediaPlayerEventAdapter() {
      @Override
      public void mediaSubItemAdded(MediaPlayer mediaPlayer, libvlc_media_t subItem) {
        List<String> items = mediaPlayer.subItems();
        System.out.println(items);
        System.out.println(mediaPlayer.subItemCount());
      }
    });
  }

  private void start() {
    mainFrame.setVisible(true);
  }

  private void play() {
    String mrl = urlTextField.getText();
    mediaPlayer.playMedia(mrl);

  }

  private void exit(int value) {
    mediaPlayer.stop();
    mediaPlayer.release();
    factory.release();
    System.exit(value);
  }

  /**
   * Set the cross platform look and feel.
   * 
   * @throws Exception if an error occurs
   */

//  private static void setLookAndFeel() throws Exception {
//    String lookAndFeelClassName = null;
//    LookAndFeelInfo[] lookAndFeelInfos = UIManager.getInstalledLookAndFeels();
//    for(LookAndFeelInfo lookAndFeel : lookAndFeelInfos) {
//      if("Nimbus".equals(lookAndFeel.getName())) {
//        lookAndFeelClassName = lookAndFeel.getClassName();
//      }
//    }
//    if(lookAndFeelClassName == null) {
//      lookAndFeelClassName = UIManager.getSystemLookAndFeelClassName();
//    }
//    UIManager.setLookAndFeel(lookAndFeelClassName);
//  }
} 
```

对于 youtube 视频，您需要以下代码：

```
mediaPlayer.setPlaySubItems(true); // <--- This is very important for YouTube media 
```

下面的代码获取所有子项。

```
mediaPlayer.addMediaPlayerEventListener(new MediaPlayerEventAdapter() {
      @Override
      public void mediaSubItemAdded(MediaPlayer mediaPlayer, libvlc_media_t subItem) {
        List<String> items = mediaPlayer.subItems();
        System.out.println(items);
        System.out.println(mediaPlayer.subItemCount());
      }
    }); 
```

当它工作时，我注意到上面的代码正在打印 2 个子项，其中一个是视频的实际 url。

但现在它只打印一个像这样的子项：

[http://www.youtube.com/get_video_info?video_id=1t8fl96HPQI&el=detailpage]

这不是视频的实际网址，我认为这就是不播放的原因。

关于为什么会发生这种情况的任何想法？谷歌是否改变了他们 youtube 页面的格式？

我尝试按照我找到的教程中的建议升级 vlc youtube.lua 文件，但没有运气。

此外，当我在 vlc 中使用相同的链接时，它工作正常。

眼镜：

Ubuntu 12.0.4 64 位

VLC 媒体播放器 2.0.5 双花

vlcj 2.2.0

提前致谢，

马里奥斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:19:08.850

> 谷歌是否改变了他们 youtube 页面的格式？

最有可能的。这种情况一直都在发生，以至于我在我的应用程序中不依赖这个功能（即使如果可以的话它会很好。）这太喜怒无常了，对 Youtube 布局的一个小改动就停止了在职的。我不确定 VLCJ 使用的 Lua 文件是否与 VLC 的安装相同（尽管我可能在那里错了。）

# javascript - 在Javascript中使用Ragex从字符串中删除数字和点

> ID：15829591
> 
> 赞同：0
> 
> 时间：2013-04-05T08:49:58.810
> 
> 标签：javascript

我想使用 Regax 删除数字，数字后的小数（没有字符后）。

示例：让我有一个字符串名称 abc4.5、asdjh44400.555 和 dasqw123123。

那么输出应该是 abc,asdjh 和 dasqw。

它应该删除所有数字并用空字符串替换。

我在谷歌搜索试图做上述要求，但没有成功。

我试过了

```
var abc = "asp.net 4.5";
alert(abc.replace("[0-9]+(?:\.[0-9]*)?", ""));` 
```

请帮助我使用 java 脚本找到解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:53:34.413

```
'abc4.5,asdjh44400.555 and dasqw123123.'.replace(/\d+.\d+/g,'') // -> abc,asdjh and dasqw. 
```

# c++ - 访问坐标的最有效方法

> ID：15829592
> 
> 赞同：0
> 
> 时间：2013-04-05T08:50:04.097
> 
> 标签：c++

给定以下定义

```
union {
  double coords[3];
  struct {
    double x,y,z;
  };
} p; 
```

可以通过索引和名称访问 3D 点的坐标（两种方式都有其优点）。但它们是等价的吗？更准确地说：将以下表达式

```
... p.coords[0] ... p.x ...
... p.coords[1] ... p.y ...
... p.coords[2] ... p.z ... 
```

（成对，对于每一行）生成相同的（汇编）代码？访问坐标的两种方式在效率上是否存在差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:55:10.863

`p.x,...`可能会更快，但是人们会注意到的差别不大。当您使用数组时，需要花费时间将给定索引中每个双精度的大小相乘以获得所需的内存地址；但在另一种方法 ( `p.x,...`) 中，编译器知道我们正在访问的地址，因此不需要计算。但是，如果编译器足够聪明，可以计算出常数，那就没有区别了。

# javascript - 如果在父页面的 iframe 中找到元素 ID，则执行某些操作

> ID：15829595
> 
> 赞同：0
> 
> 时间：2013-04-05T08:50:22.580
> 
> 标签：javascript, iframe

我在同一域的父页面中有一个 iframe。我需要在 iframe 中找到 ID 'applications' 来触发父页面的更改。这个javascript函数正确吗？

```
function load(){
if (window.frames[0].document.getElementById('applications'))
{
var str=document.getElementById("tst").innerHTML;
var n=str.replace("Login","Delogare");
document.getElementById("tst").innerHTML=n;
document.getElementById('tst').title ='logout';
document.getElementById('tst').href='logout';
document.getElementById('prt').href='../profil/cont.html?refresh';
}} 
```

# html - 为什么这个 DIV 填充在顶部？

> ID：15829597
> 
> 赞同：1
> 
> 时间：2013-04-05T08:50:24.297
> 
> 标签：html, css

这是我的问题的测试用例：

[http://game-point.net/misc/testParaPadding/](http://game-point.net/misc/testParaPadding/)

我希望`progressBarGreen.png`图像位于 DIV 内，并且 DIV 的高度（15px）正好可以容纳它，但是在 DIV 的顶部有几个像素填充。为什么？浏览器似乎正在调整内容的大小，就好像它包含文本一样，因为如果我删除`font-family`正文的样式，填充会发生变化，但 DIV 中没有文本。

有趣的是，这个问题不会在 Firefox 的 quirks 模式下发生。

[jsFiddle 示例](http://jsfiddle.net/4Vyxe/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:52:50.163

你需要`line-height:15px`在`div`拿着图像

*编辑：*解释这种行为[line-height 甚至影响无文本块](https://stackoverflow.com/questions/12133024/line-height-affecting-even-no-text-blocks)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:54:29.953

您的图片大小合适，但默认情况下图片是内联元素，并且会受到页面的`line-height`、`font-size`和其他内联元素属性的影响。

如果您在图像的样式读数中添加一行`display: block;`，它将成为块级元素，并且不受任何这些属性的影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T08:55:05.370

的[初始值](http://www.w3.org/wiki/CSS/Properties/vertical-align)始终`vertical-align`是“基线”。您可以通过`vertical-align:top`在图像中添加 a 来解决此问题；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:04:06.590

采用

```
position:absolute; 
```

将另一个 DIV 上的图像完全放在其中。

检查这个小提琴：http: [//jsfiddle.net/sRhXc/2/](http://jsfiddle.net/sRhXc/2/)

# arm - 在 ARM cortex A-9 的 U-boot 中启用中断

> ID：15829601
> 
> 赞同：4
> 
> 时间：2013-04-05T08:50:32.267
> 
> 标签：arm, interrupt-handling, interrupt, u-boot

我正在尝试在 uboot 中配置一个 GPIO 中断，这是为了在没有任何操作系统干预（裸机）的情况下测试中断响应时间。我能够配置引脚复用，并成功地使用 GPIO 引脚设置中断。

我的问题是关于中断服务程序的注册。我看到我平台的中断向量表位于地址 0xFFFF0000 （我阅读了系统控制寄存器以找出这一点）。GPIO 的中断 ID 是 56，我刚刚计算了我的中断服务例程应该驻留的地址，并尝试用指向我的 ISR 例程的指针写入地址。这是正确的做法吗？还是我必须自己处理所有其他事情，例如上下文保存等？

注意：我使用的是 ARM Cortex A-9。

编辑 ：

根据我浏览代码的答案，我有以下问题。的定义

我的架构（arm v7）的 do_irq 没有做太多，CONFIG_USE_IRQ 对我不起作用，因为没有为我定义像 arch_interrupt_init 这样的函数。所以我可以得出结论，我的架构不支持中断。现在，如果我必须自己定义它，我需要实现哪些功能才能使其正常工作？由于这是我项目的一小部分，我想看看我是否可以做到这一点是否可行。我只想知道这是否需要几行代码或需要一些努力来实现这种中断支持。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T13:52:21.573

ARM 将所有中断引导到地址`0xFFFF0018`（或`0x00000018`）。这通常是一个无条件*分支*。然后代码将检查一些*中断控制器*硬件以确定数字**56**。通常，有一个例程来设置中断号的处理程序，因此您不必手动修补代码；该表取决于如何实现`u-boot`中断处理。

在我的`u-boot`源^(注释)中，中断表如下所示，

```
.globl _start
_start:
    b       reset
    ldr     pc, _undefined_instruction
    ldr     pc, _software_interrupt
    ldr     pc, _prefetch_abort
    ldr     pc, _data_abort
    ldr     pc, _not_used
    ldr     pc, _irq
    ldr     pc, _fiq
...
_irq:
        .word irq 
```

`_irq`安装中断处理例程的标签也是如此；它在同一个文件中执行一些汇编程序，然后`do_irq()`根据**CONFIG_USE_IRQ**调用。部分 API 在 *lib_arm/interrupts.c* 中。一些**CPU**被定义为处理*irqs*，例如*cpu/arm720t/interrupts.c*，用于 S3C4510B。在这里您可以看到代码从该控制器获取一个寄存器，然后分支到一个表。

所以默认情况下`u-boot`似乎不支持*中断*。这并不奇怪，因为引导加载程序通常基于简单和速度的*轮询。*

**注意：**我`u-boot`的基于 2009.01-rc3。

# android - 这个表达式是什么意思：“R.string.gcm_registered”？

> ID：15829604
> 
> 赞同：2
> 
> 时间：2013-04-05T08:50:33.957
> 
> 标签：android, push-notification, manifest, google-cloud-messaging

我正在尝试在我的应用程序上启用推送通知。

我有客户端示例代码，现在我正在尝试获取一些代码以在我的应用程序上实现它。对于那些已经在你的应用程序上实现推送通知的人，我相信你对这个类很熟悉`GCMIntentService`。

所以我在我的项目中复制这个类，我正确地配置了 Manifest（或者我认为我这样做了），但是我在文件中得到了错误。

错误在表达式中，例如`R.string."something"`

例如，我收到以下错误：

```
R.string.gcm_registered

R.string.gcm_message

R.string.gcm_deleted

R.string.gcm_error

R.string.gcm_recoverable_error

R.drawable.ic_stat_gcm 
```

错误始终是 gcm 无法解析或不是字段。

但是这个表情到底是什么？！是一堂课还是什么？

是我没有正确配置的清单上的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:53:15.483

它是字符串，可能在您正在使用的示例应用程序中，位于 /res/values/strings.xml

你把字符串放在那里有一个本地化的地方来放置你的用户可见的字符串，所以你有 1\. 一个地方可以找到你所有的字符串，如果你想更改和/或重用 2\. 轻松访问翻译将翻译放入每个示例 /res/values-de/strings.xml

在您使用的任何示例中查找该文件，您会发现一些 XML 定义的字符串。将它们复制到您自己的项目中，在同一个地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:04:15.353

这可能会帮助您，在您的`strings.xml`和`save`

```
R.string.gcm_registered

R.string.gcm_message

R.string.gcm_deleted

R.string.gcm_error 
```

# android - 使用 Doclava 生成 android 项目 javadoc 时出错

> ID：15829606
> 
> 赞同：5
> 
> 时间：2013-04-05T08:50:43.057
> 
> 标签：android, javadoc, doclet

我正在尝试使用 javadoc & doclava 生成我的 android 项目的文档。我下载了doclava jar，并尝试通过Project-> generate javadoc 生成文档。

如果我理解了机制，我有两种方法可以告诉 javadoc 使用 doclava doclet：

1) 使用以下选项选择“使用自定义 doclet”：

Doclet 名称：com.google.doclava.Doclava
Doclet 路径：/full/path/of/my/doclava/dir/doclava-1.0.6.jar

2）选择“使用标准doclet”，然后在“javadoc选项”中输入：

-doclet com.google.doclava.Doclava
-docletpath ${/full/path/of/my/doclava/dir/doclava-1.0.6.jar}

我遇到了这些问题：

*   如果我使用第一种方法，我可以成功生成文档，但似乎无法识别 android 类。当 doclava 解析“import android.util.SparseArray”时出现错误

*   如果我使用第二种方法，我会收到此错误：“javadoc：错误 - 找不到 doclet 类 com.google.doclava.Doclava 1 错误”

事实上：如果我不使用 Doclava，我的文档会正确生成并带有指向 android api 的链接。

我只想创建带有指向 android/java 文档（用于 android/java 对象）的链接的项目 javadoc，并具有“android 外观和感觉”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-25T09:02:38.500

对于那些对该主题感兴趣的人，我使用第一个解决方案解决了我的问题，这是使用的 ant 目标：

```
<target name="build-javadoc">
    <echo message="Creating Javadoc.." />
    <delete dir="${doc.dir}" />
    <javadoc    access="public" 
                destdir="${doc.dir}" 
                sourcepath="${src.dir}" 
                docletpath="${doclet.dir}/doclava-1.0.6.jar" 
                classpath="lib:libs:/Users/myusername/android-sdks/platforms/android-17/android.jar" 
                packagenames="com.my.package">

        <doclet name="com.google.doclava.Doclava">
            <!-- Title -->
            <param name="-hdf" />
            <param name="project.name" />
            <param name="Project Name" />

            <!-- Overview -->
            <param name="-overview" />
            <param name="src/overview-summary.html" />

            <!-- Template -->
            <param name="-templatedir" />
            <param name="Doc/My_Template" />

            <!-- federation Java -->
            <param name="-federate" />
            <param name="JDK" />
            <param name="http://download.oracle.com/javase/6/docs/api/index.html?" />
            <param name="-federationxml" />
            <param name="JDK" />
            <param name="http://doclava.googlecode.com/svn/static/api/openjdk-6.xml" />

            <!-- federation Android-->
            <param name="-federate" />
            <param name="android" />
            <param name="http://d.android.com/reference" />
            <param name="-federationxml" />
            <param name="android" />
            <param name="http://doclava.googlecode.com/svn/static/api/android-8.xml" />

        </doclet>
    </javadoc>

    <echo message="...Done" />
</target> 
```

希望它可以帮助某人

# java - 显示不同输出的 Servlet？

> ID：15829610
> 
> 赞同：0
> 
> 时间：2013-04-05T08:50:53.343
> 
> 标签：java, jakarta-ee, servlets

我正在使用一个简单的 servlet 代码：

```
 myCon = DriverManager.getConnection(url);

        myStmt = myCon.createStatement();
        ResultSet rs;

        String course = req.getParameter("Course").trim();

         out.println(course);///////HERE IS THE PROBLEM

        String query="select * from TBSolvedbanks where COURSE_CODE='"+course+"' ;";
        rs=myStmt.executeQuery(query);

        out.println("<BANKS>");

        while(rs.next())
        {
            out.println("<BANK>");
            out.println("<NUMBER>"+rs.getString("NUMBER")+"</NUMBER>");
            out.println("<NAME>"+rs.getString("NAME")+"</NAME>");
            out.println("<TITLE>"+rs.getString("TITLE")+"</TITLE>");
            out.println("<DESCRIPTION>"+rs.getString("DESCRIPTION")+"</DESCRIPTION>");
            out.println("<MODULE_TAG>"+rs.getString("MODULE_TAG")+"</MODULE_TAG>");
            out.println("<ADDITIONAL_TAGS>"+rs.getString("ADDITIONAL_TAGS")+"</ADDITIONAL_TAGS>");
            out.println("</BANK>");

        }
        out.println("</BANKS>"); 
    } 
```

当我在 Jboss 服务器上运行此代码时，它工作正常并打印：

```
 BEME1104
                <BANKS>
                <BANK>
               <NUMBER>1</NUMBER>
               <NAME>firstbank</NAME>
               <TITLE>Question Bank 1</TITLE>
               <DESCRIPTION>in this file,we discussed basic things including shortnotes          of Properties of substances and aproaches</DESCRIPTION>
               <MODULE_TAG>MODULE I</MODULE_TAG>
               <ADDITIONAL_TAGS>Uses of point,path function,processes,equilibrium,curves</ADDITIONAL_TAGS>
               </BANK> 
```

但是当我评论这一行时

```
 out.println(course); 
```

它打印没有标签的值，如下所示：

```
"1 firstbank Question Bank 1 in this file,we discussed basic things including shortnotes of Properties of substances and aproaches MODULE I Uses of point,path function,processes,equilibrium,curves" 
```

我不知道为什么我遇到这个问题，而相同的代码在另一个 servlet 中运行良好。请帮助我，我是 servlet 的新手？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:56:32.340

检查浏览器中的页面源。您没有设置响应的内容类型。所以浏览器可能将第一个显示为纯文本，因为它不以任何看起来像 HTML 的内容开头，并尝试将第二个显示为 HTML，但由于它不是有效的 HTML，它看起来不太好。

如果您希望始终将响应显示为纯文本，请添加

```
response.setContentType("text/plain"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T08:59:48.707

@Navdeep 辛格贝迪...

在while循环之前使用下面的代码，然后再试一次......

PrintWriter out = response.getWriter();

# sharepoint-2010 - 在图片库 webpart (ootb) 中调整图片大小

> ID：15829613
> 
> 赞同：1
> 
> 时间：2013-04-05T08:51:04.330
> 
> 标签：sharepoint-2010

我有一个图片库webpart，当我将这个图片库webpart添加到主页时，它会更有吸引力，但是webpart里面的图片尺寸非常小。我想用大图片显示这个 webpart 请在 ootb 中给出任何建议这样做

```
.ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .ms-WPBody TD {
    BORDER-LEFT-WIDTH: 0px; HEIGHT: auto !important; BORDER-RIGHT-WIDTH: 0px; VERTICAL-ALIGN: middle; BORDER-BOTTOM-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BORDER-TOP-WIDTH: 0px; WIDTH: auto !important
}
.ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .ms-WPBody TD DIV {
    BORDER-LEFT-WIDTH: 0px; HEIGHT: auto !important; BORDER-RIGHT-WIDTH: 0px; VERTICAL-ALIGN: middle; BORDER-BOTTOM-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BORDER-TOP-WIDTH: 0px; WIDTH: 100% !important
}
.ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .ms-WPBody TD IMG {
    BORDER-LEFT-WIDTH: 0px; HEIGHT: 190px !important; BORDER-RIGHT-WIDTH: 0px; VERTICAL-ALIGN: middle; BORDER-BOTTOM-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BORDER-TOP-WIDTH: 0px; WIDTH: 800px !important
}
.ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .s4-wpcell-plain {
    BORDER-LEFT-WIDTH: 0px; HEIGHT: auto !important; BORDER-RIGHT-WIDTH: 0px; VERTICAL-ALIGN: middle; BORDER-BOTTOM-WIDTH: 0px; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BORDER-TOP-WIDTH: 0px; WIDTH: 100% !important
}
.ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .ms-PartSpacingVertical {
    MARGIN-TOP: 0px
}
.ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .style1 {
    COLOR: #808080
}</style>< 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T14:05:06.100

.ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .ms-WPBody TD { BORDER-LEFT-WIDTH: 0px; 高度：自动！重要；边框右宽：0px；垂直对齐：中间；边框底宽：0px；填充底部：0px；填充顶部：0px；填充左：0px；边距：0px；填充右：0px；边框顶部宽度：0px；宽度：自动！重要} .ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .ms-WPBody TD DIV { BORDER-LEFT-WIDTH: 0px; 高度：自动！重要；边框右宽：0px；垂直对齐：中间；边框底宽：0px；填充底部：0px；填充顶部：0px；填充左：0px；边距：0px；填充右：0px；边框顶部宽度：0px；宽度：100% ！重要 } .ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .ms-WPBody TD IMG { BORDER-LEFT-WIDTH: 0px; 高度：190 像素！重要；边框右宽：0px；垂直对齐：中间；边框底宽：0px；填充底部：0px；填充顶部：0px；填充左：0px；边距：0px；填充右：0px；边框顶部宽度：0px；WIDTH: 800px !important } .ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .s4-wpcell-plain { BORDER-LEFT-WIDTH: 0px; 高度：自动！重要；边框右宽：0px；垂直对齐：中间；边框底宽：0px；填充底部：0px；填充顶部：0px；填充左：0px；边距：0px；填充右：0px；边框顶部宽度：0px；WIDTH: 100% !important } .ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .ms-PartSpacingVertical { MARGIN-TOP: 0px } .ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .style1 { 颜色: #808080 } s4-wpcell-plain { BORDER-LEFT-WIDTH: 0px; 高度：自动！重要；边框右宽：0px；垂直对齐：中间；边框底宽：0px；填充底部：0px；填充顶部：0px；填充左：0px；边距：0px；填充右：0px；边框顶部宽度：0px；WIDTH: 100% !important } .ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .ms-PartSpacingVertical { MARGIN-TOP: 0px } .ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .style1 { 颜色: #808080 } s4-wpcell-plain { BORDER-LEFT-WIDTH: 0px; 高度：自动！重要；边框右宽：0px；垂直对齐：中间；边框底宽：0px；填充底部：0px；填充顶部：0px；填充左：0px；边距：0px；填充右：0px；边框顶部宽度：0px；WIDTH: 100% !important } .ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .ms-PartSpacingVertical { MARGIN-TOP: 0px } .ExternalClass237F341FAE1F4564B3E1B16D76A5E0CA .style1 { 颜色: #808080 }

# c#-4.0 - 绘制大圆形锚线帽

> ID：15829615
> 
> 赞同：3
> 
> 时间：2013-04-05T08:51:08.190
> 
> 标签：c#-4.0, gdi+

我必须画一个大的圆形锚箭头。我使用此代码，但它提供了小圆形锚帽：

```
Pen pen=new pen(Color.Black);
pen.StartCap=LineCap.RoundAnchor; 
```

该怎么办？给我任何建议。

# c++ - 在 apache qpid 中如何列出代理状态？

> ID：15829617
> 
> 赞同：0
> 
> 时间：2013-04-05T08:51:19.657
> 
> 标签：c++, apache, qpid

在[Apache Qpid 中](http://qpid.apache.org/)如何列出代理状态？

我正在使用`qpid-stat -b`：

```
Brokers
  broker  cluster       uptime   conn  sess  exch  queue
  ========================================================
  ?       <standalone>  17m 29s     1     1     8     5 
```

除了这些还有什么选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:09:41.243

这取决于您所说的经纪人身份是什么意思。你可以试试`qpid-tool`。[您可以在此处](https://access.redhat.com/site/documentation/en-US/Red_Hat_Enterprise_MRG/1.3/html/Messaging_User_Guide/sect-Messaging_User_Guide-Management_Tools-Using_qpid_tool.html)和[此处](http://qpid.apache.org/books/0.12/AMQP-Messaging-Broker-CPP-Book/html/ch02.html#MgmtC-2B-2B-Usingqpidtool)阅读有关它的更多信息。

> 该实用程序提供了一个 telnet 风格的界面，可以查看、列出所有统计信息并操作所有方法。下面简单截取。如果您有问题或想要添加功能，最好只是使用它并邮寄列表。

### 例子

```
% qpid-tool
Management Tool for QPID
qpid: list
Summary of Objects by Type:
    Package                 Class         Active  Deleted
    =======================================================
    org.apache.qpid.broker  exchange      8       0
    com.redhat.rhm.store    store         1       0
    org.apache.qpid.broker  broker        1       0
    org.apache.qpid.broker  binding       16      12
    org.apache.qpid.broker  session       2       1
    org.apache.qpid.broker  connection    2       1
    org.apache.qpid.broker  vhost         1       0
    org.apache.qpid.broker  queue         6       5
    org.apache.qpid.broker  system        1       0
    org.apache.qpid.broker  subscription  6       5 
```

# angularjs - Angular JS：当视图外观相同时，使用 ng-repeat 处理来自每个视图重复的不同 UI 组件

> ID：15829620
> 
> 赞同：0
> 
> 时间：2013-04-05T08:51:29.173
> 
> 标签：angularjs, angularjs-directive, angular-ui, angularjs-scope

为大标题道歉，我想不出更好的东西。让我解释一下我遇到的问题。

我必须渲染三张卡片，每张卡片都有相同的外观，这意味着它们每个都有一个标题部分和一个正文部分。我正在使用 ng-repeat 从模型中获取数据并渲染这些卡片。

代码：

```
<div class="card">
   <a href="#/cards/{{card.id}}"><h1>{{card.title}}</h1></a>
   <div ng-repeat="widget in card.widgets" class="widget">
     <h2>{{widget.title}}</h2>
         {{widget.type}}
   </div>
</div> 
```

现在，这些卡片的每一个主体都应该有不同的 UI。例如，一张卡片的 body 可能有一个使用 Hight Charts 的图表，另一张卡片可能只想使用 jQuery UI 库中的 UI，等等。

当我使用 ng-repeat 循环时，我将如何实现它？让我知道我的起始方向是否正确？

模型数据如下所示：

```
[
 {
  "id": "c001",
  "title": "CARD 1",
  "widgets": [
    {
      "title": "title 1.1",
      "type": "line-graph"
    },
    {
      "title": "title 1.2",
      "type": "bar-chart"
    }
   ]
 },
 {
  "id": "c002",
  "title": "CARD 2",
  "widgets": [
    {
     "title": "title 2.1",
     "type": "graph"
    },
    {
     "title": "title 2.2",
     "type": "bar-chart"
    }
   ]
  },
  {
   "id": "c003",
   "title": "CARD 3",
   "widgets": [
    {
      "title": "title 3.1",
      "type": "line-graph"
    },
    {
      "title": "title 3.1",
      "type": "bar-chart"
    }
   ]
   }
] 
```

![三卡申请](https://i.stack.imgur.com/IGNNY.png)

在这方面寻求帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T11:33:15.993

您的问题的解决方案是将 ng-switch 和 ng-repeat 结合起来以实现您试图获得的效果。基本上你会重复这些项目并在其类型之间切换。Angular 只包含与 switch 匹配的 DOM 部分。

这是您应该做什么的粗略想法/ html。

```
<div class="card">
   <a href="#/cards/{{card.id}}"><h1>{{card.title}}</h1></a>
   <div ng-repeat="widget in card.widgets" class="widget">
     <h2>{{widget.title}}</h2>
         <div ng-switch on="widget.type">
            <div ng-switch-when="line-graph">
               <!--do something here relevant to line graph-->
               <div line-graph="widget.data"></div>
            </div>
            <div ng-switch-when="graph">
               <!--do something here relevant to graph-->
               <div graph="widget.data"></div> 
            </div>
            <!-- and so on... add more if you need-->
         </div>
   </div>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:43:16.177

我是 Angular 的新手，但我相信您可以通过指令封装所有这些。我们的想法是我们将拥有自己的指令，我们将其添加到 div 中，然后传入类型，然后指令可以从那里处理逻辑并创建适当的图表/元素/任何内容，并在 javascript 文件中完成所有创建该指令。

```
<div chart="line-graph"></div>
<div chart="bar-chart"></div>

module.directive('chart', function(){
  return{
    //logic to build various charts with different libraries here
  }
}); 
```

编写它可能是一个相当复杂的指令，但它会是一种优雅的编写方式。@ganaraj 确实在 ng-switch 内部使用了 div graph="widget.data" ，但并没有真正提到指令部分，只是切换。这将使各个指令更简单，因此如果每种类型都有很大的不同，这可能是更好的整体方法。

simpulton 下面的这篇文章很好地涵盖了它的指令部分。你甚至可以让它更进一步，让它更像一个小部件，标签可以是（他的“第五幕：小部件指令”），然后传递类型和数据。他正在编写一个指令来对一些用 CSS 创建的圆圈进行动画处理，所以你没有理由不能使用它来应用一些 highchart 或 jQuery UI 代码。它写得非常好，并且在 jsfiddle 中包含代码，因此您可以看到它也可以正常工作。

[http://onehungrymind.com/angularjs-directives-basics/](http://onehungrymind.com/angularjs-directives-basics/)

# git - 排除 git push 的配置参考

> ID：15829621
> 
> 赞同：1
> 
> 时间：2013-04-05T08:51:29.363
> 
> 标签：git

当我打电话时，`git remote show <remote_name>`我看到下面

```
 Local branches configured for 'git pull':
    master           merges with remote master
  Local refs configured for 'git push':
    master           pushes to master           (up to date) 
```

如何排除已配置的推送？所以`git push`从主分支会抛出错误，只有推送将具有明确的远程名称`git push <remote_name> <remote_branch_name>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T10:54:31.123

如果您将 gitconfig 更改为`push.default`，`nothing`那么您将需要每次都在所有分支上指定`<remote_name>`和。`<remote_branch_name>`

`git config --global push.default nothing`（删除项目特定配置的--global）

设置后，当您 git push 时，您应该会收到类似于以下内容的错误。

> 致命：您没有指定要推送的任何 refspec，并且 push.default 为“无”。

**更新：**

如果您只想禁用特定分支的自动推送，我只需删除跟踪配置。

一种方法是编辑您的项目`.git/config`并删除`[branch="branchname"]`配置。

或以编程`git config --unset branch.branchname.remote`方式：删除`remote=remotename`分支配置的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T10:55:03.690

确保您没有`push`配置远程配置：

```
git config --unset remote.<remote_name>.push 
```

配置`push.default`为`nothing`：

```
git config push.default nothing 
```

不幸的是，它似乎`git remote show <remote_name>`没有考虑到`config.push`设置（它总是假设“匹配”），所以`Local refs configured for 'git push'`仍然会在输出中列出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T10:58:08.423

目前还不完全清楚你想要什么，但如果你想一起禁用一个裸机`git push`，你可以这样做：

```
git config --local push.default nothing 
```

这意味着 bare`git push`将假定没有默认的 refspec，并且您必须指定它。我能想到的唯一另一件事是创建一个别名，并将其用于推送。所以，在你的这样的东西`.gitconfig`：

```
[aliases]
p = "!_() { cur=$(git symbolic-ref HEAD); if test \"$cur\" = refs/heads/master -a -z \"$1\"; then { echo \"please specify push target\"; exit 1; } ; fi; git push \"$@\" ; }; _" 
```

`git p`当在 master 上的命令行上没有指定其他命令行参数时，然后将拒绝推送。否则，它将使用推送默认值。

我相信这就是你现在可以从 git 获得的所有灵活性。如果你需要更多的东西，也许在 git list 上谈论它可能会说服某人为你实现一个特性。不过，您将需要一个引人注目的用例。

# javascript - 是否可以开始/暂停自动刷新内容？

> ID：15829624
> 
> 赞同：0
> 
> 时间：2013-04-05T08:51:32.400
> 
> 标签：javascript, jquery

我正在使用此脚本每 10 秒自动刷新一次我的内容。

```
var auto_refresh = setInterval(
function ()
{
$('#stats').load('stats.php').fadeIn("slow");
}, 10000); 
```

但是，我需要添加开始/暂停按钮来开始和暂停刷新。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:54:24.603

一般来说，您可以`setInterval()`通过添加标志来获得任何暂停效果：

```
var paused = false,
    auto_refresh = setInterval(function (){
       if (paused) return false;
       $('#stats').load('stats.php').fadeIn("slow");
    }, 10000);

$("#idOfPauseButton").click(function() {
    paused = !paused;
    this.value = paused ? "Restart" : "Pause";
}); 
```

我发现这种方法比使用`clearInterval()`暂停并`setInterval()`再次重新启动更简单。

显然，这假设您使用单个按钮来暂停/重新启动：

```
<input id="idOfPauseButton" value="Pause" type="button"> 
```

演示：http: [//jsfiddle.net/nnnnnn/NWa56/](http://jsfiddle.net/nnnnnn/NWa56/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:06:01.487

你也可以试试这个：

HTML

```
<button onclick="int=Stop();">Pause</button>
<button onclick="int=Start();">Start</button> 
```

JS

```
var int = Start();

function Start() {
    // Start Loading the content
    var auto_refresh = setInterval(
    function () {
        $('#stats').load('stats.php').fadeIn("slow");
    }, 10000);
    return auto_refresh;
}

function Stop() {
    // Stop loading the content
    // The ID value returned by setInterval() is used as 
    // the parameter for the clearInterval() method.
    return clearInterval(int);
} 
```

# google-chrome - 谷歌浏览器无法在 xvfb 中运行，因为缺少扩展“RANDR”

> ID：15829633
> 
> 赞同：9
> 
> 时间：2013-04-05T08:51:45.870
> 
> 标签：google-chrome, xvfb, xrandr

我尝试在 xvfb 显示器上运行 Google Chrome，但 google 显示有关 RANDR 扩展的错误。问题是我将 RANDR 添加到 xvfb 并加载它。所以我的步骤是：

1.  使用命令运行 xvfb 服务器：

    `Xvfb :1 -screen 0 1280x1024x24 +extension RANDR`

2.  此命令为我提供成功加载的 RAND 模块的输出

    `Initializing built-in extension Generic Event Extension
    Initializing built-in extension SHAPE
    Initializing built-in extension MIT-SHM
    Initializing built-in extension XInputExtension
    Initializing built-in extension XTEST
    Initializing built-in extension BIG-REQUESTS
    Initializing built-in extension SYNC
    Initializing built-in extension XKEYBOARD
    Initializing built-in extension XC-MISC
    Initializing built-in extension SECURITY
    Initializing built-in extension XINERAMA
    Initializing built-in extension XFIXES
    Initializing built-in extension RENDER
    Initializing built-in extension RANDR
    Initializing built-in extension COMPOSITE
    Initializing built-in extension DAMAGE
    Initializing built-in extension MIT-SCREEN-SAVER
    Initializing built-in extension DOUBLE-BUFFER
    Initializing built-in extension RECORD
    Initializing built-in extension DPMS
    Initializing built-in extension X-Resource
    Initializing built-in extension XVideo
    Initializing built-in extension XVideo-MotionCompensation
    [dix] Could not init font path element /var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType, removing from list!`

3.  在其他终端运行：

    `export DISPLAY=:1 && google-chrome`

4.  Chrome 输出到终端：

    `Xlib: extension "RANDR" missing on display ":1".
    Created new window in existing browser session.`

5.  Google Chrome 在我的 x11 会话中启动

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T05:10:09.583

尝试

```
env DISPLAY=:1 google-chrome 
```

# ios - 如何将 FBRequest requestForMyFriends 的结果作为 JSON 格式的文件获取？

> ID：15829634
> 
> 赞同：0
> 
> 时间：2013-04-05T08:51:46.140
> 
> 标签：ios, objective-c, json, facebook, facebook-graph-api

我正在使用 Objective-C 并为 iPhone 开发。

我正在向登录用户的朋友发送请求，并将数据写入文件到磁盘，如下所示：

```
[[FBRequest requestForMyFriends] startWithCompletionHandler:^(FBRequestConnection *connection,
                                                                       NSDictionary *results,
                                                                       NSError *error)
{
if(!error){

NSDictionary* friends = results;

NSLog(@"Found %i friends", friends.count);

NSArray* paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docDir = [paths objectAtIndex:0];
NSString* fileName = [docDir stringByAppendingPathComponent:@"userInfo.dat"];

if ([friends writeToFile:fileName atomically:YES]) {
    NSLog(@"Wrote friends file to disk!");
    sendFBEvent(FB_EVENT_DETAILS_FRIENDS, [fileName UTF8String]);
}
else{
    NSLog(@"Couldn't write friends details to disk!");
} 
```

这可行，但检索并写入磁盘的文件是 XML 文件。我几乎可以肯定，在以前的版本中，我能够将文件保存为 JSON 格式，但是我已经丢失了该版本，并且不记得我是如何实现它的。

如果有人能告诉我如何以 JSON 格式文件的形式保存此文件，我将不胜感激？我以前用一种非常简单的方法完成了它，它与我目前的方法没有太大区别，但如果我能记住如何做的话，我会被诅咒的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:03:55.440

Gah，非常抱歉，但当答案是 Objective C 的原生内容时，我正在搜索 Facebook 相关结果：

[Objective-C / iOS：将对象数组转换为 JSON 字符串](https://stackoverflow.com/questions/9139454/objective-c-ios-converting-an-array-of-objects-to-json-string)

原来你可以使用

```
NSData* jsonData = [NSJSONSerialization dataWithJSONObject:contactsToBeSynced options:NSJSONWritingPrettyPrinted error:&error]; 
```

将从请求中提取的数组转换为 JSON。对此感到抱歉，希望这至少对将来的某人有用！

# c# - 如何将过滤器表达式应用于网格视图？

> ID：15829635
> 
> 赞同：0
> 
> 时间：2013-04-05T08:51:47.597
> 
> 标签：c#, asp.net, devexpress

我有这个网格视图和一个从数据库获得的过滤器表达式。现在我想将过滤器表达式应用于网格，以便对网格中的数据进行排序。条件中的列与网格的列匹配。这不是问题。

我可以设置`grid.FilterExpression = filter`，但是如何像过滤条件一样将值排序到网格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:59:11.960

代码：用于填充所有下拉列表的 HTML 标记

```
<asp:SqlDataSource ID="sqlDataSourceCity" runat="server" 
ConnectionString="<%$ ConnectionStrings:northWindConnectionString %>" 
SelectCommand="SELECT DISTINCT City FROM Customers">
</asp:SqlDataSource>

<asp:DropDownList ID="ddlCountry" runat="server" 
                  AppendDataBoundItems="True" 
                  AutoPostBack="True" 
                  DataSourceID="sqlDataSourceCountry" 
                  DataTextField="Country" 
                  DataValueField="Country" Width="100px">
<asp:ListItem Value="%">All</asp:ListItem>
</asp:DropDownList>

<asp:SqlDataSource ID="sqlDataSourceCountry" runat="server" 
ConnectionString="<%$ ConnectionStrings:northWindConnectionString %>" 
SelectCommand="SELECT DISTINCT [Country] FROM [Customers]"> 
```

带有过滤器表达式的 gridview 和 sqldatasource 的 HTML 标记

```
<asp:GridView ID="GridView1" runat="server" 
              AllowPaging="True" 
              DataSourceID="sqlDataSourceGridView" 
              AutoGenerateColumns="False"
              CssClass="GridViewStyle" 
              GridLines="None" Width="650px" 
              ShowHeader="false">
<Columns>
<asp:BoundField DataField="CustomerID" HeaderText="Customer ID"/>
<asp:BoundField DataField="CompanyName" HeaderText="Company"/>
<asp:BoundField DataField="ContactName" HeaderText="Name"/>
<asp:BoundField DataField="City" HeaderText="city"/>
<asp:BoundField DataField="Country" HeaderText="Country"/>
</Columns>
</asp:GridView>

<asp:SqlDataSource ID="sqlDataSourceGridView" 
                   runat="server" 
ConnectionString="<%$ ConnectionStrings:northWindConnectionString %>" 
SelectCommand="SELECT [CustomerID], [CompanyName], [ContactName], 
[City], [Country] FROM [Customers]" 
FilterExpression="[City] like '{0}%' and [Country] like '{1}%'">
<FilterParameters>
<asp:ControlParameter ControlID="ddlCity" Name="City" 
                      PropertyName="SelectedValue" 
                      Type="String" />
<asp:ControlParameter ControlID="ddlCountry" Name="Country" 
                      PropertyName="SelectedValue" 
                      Type="String" />
</FilterParameters>
</asp:SqlDataSource> 
```

来源：- [http://csharpdotnetfreak.blogspot.com/2011/04/gridview-filterexpression-dropdownlist.html](http://csharpdotnetfreak.blogspot.com/2011/04/gridview-filterexpression-dropdownlist.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:34:49.917

我建议你阅读这篇有用的文章

[http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_FilterExpressiontopic](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewASPxGridView_FilterExpressiontopic)

# ruby-on-rails - 根据用户的状态设计登录？

> ID：15829642
> 
> 赞同：1
> 
> 时间：2013-04-05T08:52:16.120
> 
> 标签：ruby-on-rails

我正在使用 Devise gem 进行身份验证。在我的用户表中有一个用于活动和非活动状态的状态列。我想做的是应用程序控制器中的某种类型的东西：

```
before_filter :check_user_status  

def check_user_status  
  if @current_user.status == "inactive"  
  #destroy user session  
  redirect_to new_session_path  
end 
```

如果他处于活动状态，用户将能够访问任何控制器，否则他应该被重定向到登录页面。我希望它在应用程序控制器中，以便在任何控制器操作之前首先执行 check_user_status。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:03:33.327

您应该查看`active_for_authentication?`实现这一点的方法。查看[文档](http://rdoc.info/github/plataformatec/devise/master/Devise/Models/Authenticatable)以了解更多详细信息和示例。

# eclipse - eclipse如何在调试透视图中显示包资源管理器

> ID：15829645
> 
> 赞同：7
> 
> 时间：2013-04-05T08:52:36.137
> 
> 标签：eclipse

Eclipse 中的包资源管理器仅显示在 Java 选项卡（透视）上，但我也想在调试模式下显示它。有没有办法做到这一点？我在 Windows-> 在调试模式下显示视图中找不到它，但它在 java 模式下存在（实际上，那是项目资源管理器，但看起来是一样的）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T08:57:37.370

您可以通过选择 Window / Show view / Other... / Java / Package Explorer 打开它。

# jquery - 带有图像的 jQuery 值滑块

> ID：15829649
> 
> 赞同：3
> 
> 时间：2013-04-05T08:52:47.810
> 
> 标签：jquery, jquery-ui, slider, jquery-ui-slider

有没有人知道一个好的解决方案（或者可能是一个插件）来创建如下图所示的滑块（使用 jquery、jquery ui、任何其他库）？

[图像值滑块 img](http://pictat.com/show.php?i=/2013/4/5/43539slider.png)

所以这个想法是基本上你滑动背景图像，而不是一个小指示器。

## 更新

我正在尝试将 ui 滑块与可拖动属性连接起来，但运气不佳。你可以在这里玩：[JSBIN](http://jsbin.com/usuxog/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:59:05.510

**编辑：** 您可以制作该图像。将它放在一个 div 中使其溢出隐藏。使其可拖动。

拖动图片时，调用slider的滑块函数。这样它看起来像一个滑块。

# performance - IE浏览器运行缓慢

> ID：15829650
> 
> 赞同：-1
> 
> 时间：2013-04-05T08:52:48.743
> 
> 标签：performance, internet-explorer

对于某些用户，我正在开发的网站在 IE 中加载缓慢。它在其他浏览器中加载正常，但在 IE 中加载不正常。

该网站是[http://tinyurl.com/ctzxlv8](http://tinyurl.com/ctzxlv8)。

非常感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:11:30.477

浏览器的一个常见问题是并非所有浏览器都以相同的方式运行相同的语法。当然，有一个标准的 html，但是每个浏览器都试图扩展语法以便能够运行更多的 web ......浏览器开发人员认为：更多的灵活性 -> 更多的 web 可重现 -> 更多的用户。但是，当您只使用一个浏览器来检查您的 Web 是否运行时，这对于 Web 开发人员来说可能是一个陷阱。例如：我使用了很多 firefox，但它接受的语法比标准语法多得多。它可以完美地运行我的代码，但 IExplorer 在尝试理解我的非标准代码时可能会遇到一些问题。

我想说的是，在[验证器](http://validator.w3.org/)上检查你的 html 语法。您的网站有 65 个错误，124 个警告。将它们修复为标准代码，可能会有所帮助;-)。

# jquery - 在 Mac OS 上使用 Safari 强制 Angular 在历史上重新输入控制器

> ID：15829656
> 
> 赞同：3
> 
> 时间：2013-04-05T08:53:06.317
> 
> 标签：jquery, angularjs

我有以下控制器，它在页面加载时执行并更改提交按钮的值和状态。完整的例子可以在[这里](http://plnkr.co/edit/pl7d7uCuA4tRbproT5PP?p=preview)看到，并且基于[这个](https://stackoverflow.com/questions/15807471/prevent-multiple-form-submissions-using-angular-js-disable-form-button)问题。

```
app.controller('FormSubmitCtrl', function($scope, $rootScope, $timeout) {
    $scope.loading = false;
    $scope.load = function($event) {
        $rootScope.event_target = $event.target;
        $scope.loading = true;
        $timeout(function() { $scope.loading = false; }, 5000);
      }
});

app.directive('disabler', function($compile, $rootScope) {
    return {
      link: function(scope, elm, attrs) {
        //var btnContents = $compile(elm.contents())(scope);
        scope.$watch(attrs.ngModel, function(value) {
          if (value) {
             scope.initial_value = elm.attr('value');
             if (elm.attr('name') == $rootScope.event_target.name){
                 elm.attr('value', scope.$eval(attrs.disabler));
                 setTimeout(function(){
                        elm.attr('disabled',true);
                 }, 0);
             }
           } else {
             //elm.html('').append(btnContents);
              if (typeof $rootScope.event_target != "undefined"){
                  //server did not respond in timeline fashion .. inform user
                  if (elm.attr('name') == $rootScope.event_target.name){
                     elm.attr('value', scope.initial_value);
                     elm.attr('disabled',false);
                  }
              }
           }
         });
       }
     }
}); 
```

表单.html

```
<input id="submit_item_button" name="form2_submit_btn1" type="submit" value="Go" class="btn" disabler="'Loading..'" ng-model="loading" ng-click="load($event)"/> 
```

如果用户在页面上成功提交表单，用户将被服务器重定向到另一个页面。如果用户现在立即使用历史返回按钮重新进入页面，则不再进入控制器。这是一个问题，因为上面的控制器将范围变量 loading 更改为 true，如果用户返回，他仍然会看到显示值“正在加载”的按钮。

如果控制器将在历史记录中输入，则加载变量将设置为 false，并且按钮将显示初始值和正确值。

偶然我发现当我包含（仅包含，没有方法调用它..！）[jquery地址插件](http://www.asual.com/jquery/address/)（[粘贴bin代码](http://pastebin.com/LHuhHKjS)）时，控制器在历史记录中输入，加载变量设置为false并且提交按钮显示正确的值，而不是加载..值。因此，地址插件似乎触发了一些事件，进而触发了角度控制器。因为我不再需要地址插件，所以我想摆脱它，特别是我想了解发生了什么。

我现在的问题是：如果用户通过使用浏览器中的历史后退按钮进入页面，我如何告诉 Angular 重新进入控制器！？

**更新：**我仅在 OSX 上的 Safari 中遇到此问题。使用 Chrome，控制器也会在历史记录中输入，这是预期的行为。请参阅 Thom Porter 的示例设置：http: [//so.thomporter.com/force-angular-to-re-enter-controller-on-history-back/](http://so.thomporter.com/force-angular-to-re-enter-controller-on-history-back/)

# jquery - 带有 Durandal SPA 模板的 MVC 身份验证和防伪令牌

> ID：15829657
> 
> 赞同：32
> 
> 时间：2013-04-05T08:53:14.870
> 
> 标签：jquery, asp.net-mvc, durandal

我的 SPA 的某些区域需要对所有用户开放，而某些区域需要身份验证。在这些区域中，我要保护的是通过 AJAX 加载的数据。

我有一个身份验证服务（见下文），我将其作为依赖项添加到我的 durandal **main.js 中**。该服务称为：

```
authentication 
```

在我的**main.js 中**，我调用

```
authentication.handleUnauthorizedAjaxRequest(function () {
        app.showMessage('You are not authorized, please login')
        .then(function () {
            router.navigateTo('#/user/login');
        });
    }); 
```

它警告用户他们没有被授权，并将用户导航到登录视图/视图模型，他们可以在其中输入详细信息并尝试登录。

构建此身份验证视图模型时想到的一些问题：

*   我正在做的事情有什么明显的担忧吗？
*   这就是我“注定”在杜兰达尔做事的方式吗？
*   我在重新发明轮子吗？我在杜兰达尔身上看不到这样的东西。

大多数人似乎都在创建单独**的 cshtml**页面；一个用于登录（如果用户未通过身份验证），以及通常的**index.cshtml**是否有任何充分的理由让我切换到该方法？

我在服务器端“用户控制器”上的登录操作具有我需要发送的 [ValidateAntiForgeryToken] 属性。
我还有一个“防伪”服务（见下文），我还将它作为依赖项添加到我的**main.js viewModel**文件中（也在我的 main.js 中）。

```
antiforgery.addAntiForgeryTokenToAjaxRequests(); 
```

这会拦截所有 ajax 请求（连同内容），并将 MVC AntiForgeryToken 值添加到数据中。似乎完全按照我的意愿工作。如果有任何错误/错误，请告诉我。

下面完成认证服务。

```
// services/authentication.js
define(function (require) {
    var system = require('durandal/system'),
    app = require('durandal/app'),
    router = require('durandal/plugins/router');

    return {
        handleUnauthorizedAjaxRequests: function (callback) {
            if (!callback) {
                return;
            }
            $(document).ajaxError(function (event, request, options) {
                if (request.status === 401) {
                    callback();
                }
            });
        },

        canLogin: function () {         
            return true;
        },
        login: function (userInfo, navigateToUrl) {
            if (!this.canLogin()) {
                return system.defer(function (dfd) {
                    dfd.reject();
                }).promise();
            }
            var jqxhr = $.post("/user/login", userInfo)
                .done(function (data) {
                    if (data.success == true) {
                        if (!!navigateToUrl) {
                            router.navigateTo(navigateToUrl);
                        } else {
                            return true;
                        }
                    } else {
                        return data;
                    }
                })
                .fail(function (data) {
                    return data;
                });

            return jqxhr;
        }
    };
});

// services/antiforgery.js
define(function (require) {
    var app = require('durandal/app');

    return {
        /*  this intercepts all ajax requests (with content)
            and adds the MVC AntiForgeryToken value to the data
            so that your controller actions with the [ValidateAntiForgeryToken] attribute won't fail

            original idea came from http://stackoverflow.com/questions/4074199/jquery-ajax-calls-and-the-html-antiforgerytoken

            to use this

            1) ensure that the following is added to your Durandal Index.cshml
            <form id="__AjaxAntiForgeryForm" action="#" method="post">
                @Html.AntiForgeryToken()
            </form>

            2) in  main.js ensure that this module is added as a dependency

            3) in main.js add the following line
            antiforgery.addAntiForgeryTokenToAjaxRequests();

        */
        addAntiForgeryTokenToAjaxRequests: function () {
            var token = $('#__AjaxAntiForgeryForm     input[name=__RequestVerificationToken]').val();
            if (!token) {
                app.showMessage('ERROR: Authentication Service could not find     __RequestVerificationToken');
            }
            var tokenParam = "__RequestVerificationToken=" + encodeURIComponent(token);

            $(document).ajaxSend(function (event, request, options) {
                if (options.hasContent) {
                    options.data = options.data ? [options.data, tokenParam].join("&") :     tokenParam;
                }
            });
        }

    };
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-05T22:07:20.077

我更喜欢在标题中传递防伪令牌。这种方式很容易从服务器上的请求中解析出来，因为它不会与表单的数据混合。

然后我创建了一个自定义操作过滤器来检查防伪令牌。

我已经[创建了一篇](https://stackoverflow.com/questions/15416264/validateantiforgerytoken-with-spa-architecture/15512292#15512292)关于如何做到这一点的帖子。

# f# - 纯函数式语言中的 η 展开

> ID：15829660
> 
> 赞同：13
> 
> 时间：2013-04-05T08:53:24.230
> 
> 标签：f#, functional-programming, ocaml, lambda-calculus

在 OCaml 中，拥有 in 是合法的`.mli`：

```
val f : 'a -> 'a
val g : 'a -> 'a 
```

和`.ml`：

```
let f x = x
let g = f 
```

然而在 F# 中，这被拒绝了：

```
eta_expand.ml(2,5): error FS0034: Module 'Eta_expand' contains
    val g : ('a -> 'a)    
but its signature specifies
    val g : 'a -> 'a    

The arities in the signature and implementation differ. The signature specifies that 'g' is function definition or lambda expression accepting at least 1 argument(s), but the implementation is a computed function value. To declare that a computed function value is a permitted implementation simply parenthesize its type in the signature, e.g.
    val g: int -> (int -> int)
instead of
    val g: int -> int -> int. 
```

一种解决方法是对 g 的定义进行 η 扩展：

```
let g x = f x 
```

如果我的代码是纯功能性的（没有例外，没有副作用等），这应该是等效的（实际上，多态性可能会更好，这取决于语言如何概括类型：在 OCaml 中，部分应用程序不会产生多态性函数，但它们的 η-展开确实）。

系统的 η 展开有什么缺点吗？

两个答案避开了关于 η-expansion 的问题 :-) 而是建议我在我的函数类型周围添加括号。这是因为，显然，F# 在类型级别区分函数的“真实”定义（作为 λ 表达式和计算定义，如在部分应用程序中）；这大概是因为 λ 表达式直接映射到 CLR 函数，而计算定义映射到委托对象。（我不确定这种解释，如果非常熟悉 F# 的人可以指出描述这一点的参考文档，我将不胜感激。）

*一个解决方案是系统地为 中的所有*函数类型添加括号`.mli`，但我担心这会导致效率低下。另一种方法是检测计算函数并在`.mli`. 第三种解决方案是将 η-展开明显的情况，并将其他情况用括号括起来。

我对 F#/CLR 内部结构不够熟悉，无法衡量哪些会导致显着的性能或接口损失。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T11:19:18.997

理论上，F# 函数类型`'a -> 'b -> 'c`与`'a -> ('b -> 'c)`. 也就是说，在 F# 中使用柯里化形式表示多个参数函数。在大多数情况下，例如在调用高阶函数时，您可以使用其中一个。

但是，出于实际原因，F# 编译器实际上会区分这些类型 - 动机是它们在编译的 .NET 代码中以不同的方式表示。这会影响性能以及与 C# 的互操作性，因此进行区分很有用。

函数`Foo : int -> int -> int`将被编译为成员`int Foo(int, int)`- 默认情况下编译器不使用柯里化形式，因为这在`Foo`使用两个参数（更常见的情况）调用时效率更高，并且更适合互操作。函数`Bar : int -> (int -> int)`将被编译为`FSharpFunc<int, int> Bar(int)`- 实际上使用柯里化形式（因此仅使用单个参数调用它会更有效，并且很难从 C# 中使用）。

这也是为什么 F# 在涉及签名时不将类型视为相等的原因 - 签名指定类型，但在这里它还指定如何编译函数。实现文件必须提供正确类型的函数，但在这种情况下，也必须提供正确的编译形式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T09:04:06.297

有趣的是我`fsi`给出了一个更有帮助的错误信息：

```
/test.fs(2,5): error FS0034: Module 'Test' contains
    val g : ('a -> 'a) but its signature specifies
    val g : 'a -> 'a The arities in the signature and implementation differ. 
          The signature specifies that 'g' is function definition or lambda expression 
          accepting at least 1 argument(s), but the implementation is a computed 
          function value. To declare that a computed function value is a permitted 
          implementation simply parenthesize its type in the signature, e.g.
        val g: int -> (int -> int) instead of
        val g: int -> int -> int. 
```

如果您添加括号以获取`g :('a -> 'a)`所有内容都可以

# validation - 敲除可观察数组验证的问题

> ID：15829668
> 
> 赞同：1
> 
> 时间：2013-04-05T08:53:46.277
> 
> 标签：validation, knockout.js, ko.observablearray

我对 observablearray 元素的验证规则有疑问。我正在使用自定义消息模板来显示错误，问题是当错误出现时它不会显示，但是，我可以在相关字段中看到“*”。以下是我的模型：

```
function ViewModel(item) {
var parse = JSON.parse(item.d);
var self = this;
this.ID = ko.observable(parse.ID).extend({ required: { params: true, message: "ID is required" }});
this.Name = ko.observable(parse.Name);
this.WeeklyData = ko.observableArray([]);
var records = $.map(parse.WeeklyData, function (data) { return new Data(data) });
this.WeeklyData(records);
}

var Data = function (data) {
this.Val = ko.observable(data).extend({
    min: { params: 0, message: "Invalid Minimum Value" },
    max: { params: 168, message: "Invalid Maximum Value" }   
}); 
```

这是我正在使用的验证配置：

```
 // enable validation
    ko.validation.configure({
    registerExtenders: true,
    messagesOnModified: false,
    insertMessages: true,
    parseInputAttributes: false,
    messageTemplate: "customMessageTemplate",
    grouping: { deep: true }
    });
    ko.validation.init(); 
```

我的任何自定义消息模板都是这样的：

```
 <script id="customMessageTemplate" type="text/html">
      <em class="errorMsg" data-bind='visible: !field.isValid()'>*</em>
   </script>

   <ul data-bind="foreach: Errors">
     <li class="errorMsg" data-bind="text: $data"></li>
   </ul> 
```

使用此实现，我在自定义模板中看不到验证消息。但是如果我删除配置 deep: true，它不会验证 observable 数组元素，而是另一个 observable(ID)，然后消息会正确显示。

我对此感到非常困惑并且有点卡住了，如果有人可以提供帮助，我将不胜感激/

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:55:10.300

What i understand from your question is that you are trying to validate your observableArray entries, so that if any entry in your `WeeklyData` observableArray fails the following condition:

```
arrayEntry % 15 === 0 
```

you want to show error message. If this is the case, than the following custom validator can do the job for you :

```
var fminIncrements = function (valueArray) {
  var check = true;    
  ko.utils.arrayFirst(valueArray, function(value){
        if(parseInt(value, 10) % 15 !== 0)
        {
          check = false;
          return true;
        }
     }); 
  return check;
}; 
```

And you have to apply this validator on the observableArray *(no need to set validation on individual entries of the array)*. This validator takes array as input and validate its each entry, if any one entry fails the validation it will retrun false and than you will see the error message.

Your viewmodel looks like :

```
function viewModel() { 
    var self = this;

    self.WeeklyData = ko.observableArray([
      15, 
      40
    ]).extend({ 
        validation: {
          validator: fminIncrements,
          message: "use 15 min increments" 
        }
    });

    self.errors = ko.validation.group(self);
} 
```

And here is the [**working fiddle**](http://jsbin.com/ocizes/16/edit).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T14:02:53.623

单个项目未显示消息-仅在摘要中-您如何在单个文本框中指定消息？

# inno-setup - Inno Setup 静默安装 UAC

> ID：15829669
> 
> 赞同：0
> 
> 时间：2013-04-05T08:53:47.297
> 
> 标签：inno-setup, uac

我正在尝试使用 Inno Setup 构建静默安装。我正在使用 /SILENT 和 /VERYSILENT 命令参数，一切正常，除了开始时弹出的 UAC 窗口。

我该如何解决这个问题？

我发现一些帖子松散地提到了使用 SignTool，但其他消息来源说这只会将 UAC 框更改为蓝色并填充发布者参数。

有人可以在这里帮忙吗？该场景是一个安装程序，它将通过 Internet 分发，以在没有任何用户交互的情况下静默更新机器上的现有软件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:02:53.017

要在没有 UAC 提示的情况下运行提升的设置，您需要从已经提升的东西运行它。如果程序可以在没有用户控制访问的情况下提升，它将破坏 UAC 的全部意义。

签署可执行文件只会显示发布者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-27T10:11:17.063

基本思想是首先安装在本地系统帐户下运行的服务，该服务将启动您的更新安装程序，以便更新可以绕过 UAC，并且不强制最终用户以管理员身份运行。如果您不想自己开发，可以使用这样的 3rd 方解决方案：

[http://www.autoupdateplus.com/](http://www.autoupdateplus.com/)

当您的用户第一次安装您的应用程序时，会安装“更新程序服务”，并且所有后续更新都可以静默。

（我们曾经使用 AutoUpdate+，但后来决定推出我们自己的，它只是下载我们应用程序的完整安装程序文件并静默运行。这在 AutoUpdate+ 中是不可能的，我们必须使用更改的文件创建更新包，这变成了太麻烦了，有太多的错误空间。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T07:00:17.450

我找到了一种解决方案，例如如果我在临时安装 EXE 之前执行以下操作，那么在安装后我将其还原。那么，我希望我的目的得到解决。

[注册表] 根：“HKLM”；子项：“SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System”；值类型：双字；ValueName: "ConsentPromptBehaviorAdmin"; 值数据：“0x00000000”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-18T15:27:24.223

您可以将其安装为用户软件。那么你对 UAC 没有任何问题，因为它不是系统范围的软件。ProgramData 必须存储在用户文件夹中，并且必须在 CurrentUser 下完成注册设置。

不确定你是否喜欢这样做。

但无论如何。您不必照顾 UAC。公司将拥有一个具有更高权限的部署服务器，因此静默部署不会强制在那里发送 UAC 消息。

UAC 消息是正常行为

# wordpress - 404 正在工作，而不是自定义博客模板

> ID：15829670
> 
> 赞同：2
> 
> 时间：2013-04-05T08:53:53.767
> 
> 标签：wordpress, http-status-code-404, blogs

我现在正在开发一个 Wordpress 模板。我有一个静态索引页面。对于我的博客文章，我使用了一个名为`Blog`. 但是当我在这个模板下创建一个页面`Blog`并尝试查看该页面时；它不显示博客页面，而是显示`404.php`

我正在使用这些文件：

```
index.php //static index page
blog.php //blog page under Blog template
404.php 
```

这是我的网站[http://ratcat.bugs3.com/samata/](http://ratcat.bugs3.com/samata/) 这是无法正常工作的博客页面[http://ratcat.bugs3.com/samata/blog-6](http://ratcat.bugs3.com/samata/blog-6)

如需更多帮助，这里是我的 blog.php 主要代码段：

```
 <div class="single_post">
                <?php
                // The Query
                $page = (get_query_var('paged')) ? get_query_var('paged') : 1;
                query_posts("paged=$page");
                // The Loop
                if(have_posts()) :
                while ( have_posts() ) : the_post();
                ?>
                <table>
                    <tr>
                        <td class="left_date">

                                <h1><?php the_time('d') ?></h1>
                                <p><?php the_time('M') ?></p>
                                <span class="year"><p><?php the_time('Y') ?></p></span>

                        </td>
                        <td>
                            <a href="<?php the_permalink(); ?>" ><h2><?php the_title(); ?></h2></a>
                            <div class="author_tag">
                                <span class="author">By: <?php the_author_posts_link(); ?></span>
                                <span class="tag"><?php the_tags(); ?></span>
                            </div>
                            <div class="post">
                                <a href="<?php the_permalink(); ?>"><?php the_post_thumbnail('post-image', array('class' => 'post-thumb')); ?></a>
                                <p><?php the_excerpt(); ?></p>
                                <div class="read_comment">
                                    <a href="<?php the_permalink(); ?>" title="Full post"><span class="read">Read more</span></a>
                                    <span class="comment"><?php comments_popup_link('No Comment', '1 Comment', '% Comments'); ?></span>
                                </div>
                            </div>
                        </td>
                    </tr>
                </table>
                <div class="clear"></div>
                <div class="gap"></div>
                <?php
                    endwhile; ?>
                    <table class="nav_post">
                        <tr>
                            <td><div class="nav-previous"><?php next_posts_link( __( '<span class="meta-nav">&laquo;</span> Previous posts') ); ?></div></td>
                            <td><div class="nav-next"><?php previous_posts_link( __( 'Next posts <span class="meta-nav">&raquo;</span>') ); ?></div></td>
                        </tr>
                    </table>
                    <?php
                    endif;
                    // Reset Query
                    wp_reset_query();
                ?>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:13:28.693

阅读本文，我认为您的问题是您应该调用模板 page-blog.php 以使其自动用作具有“博客”名称（可能是 slug？）的页面的模板。

请参阅此处的法典；

[http://codex.wordpress.org/Pages#Page_Templates](http://codex.wordpress.org/Pages#Page_Templates)

> WordPress 模板层次结构还可以自动识别特定的页面或帖子，而无需将它们分配给特定的页面模板文件。如果模板文件名中带有 ID 或 slug 的 Page 是用户创建的，则会自动使用相应的 Page 模板文件。
> 
> 页面-{id}.php
> 
> 页面-{slug}.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T11:45:42.847

尝试一些事情，比如在你的 blog.php 上放一个模板代码，比如粘贴代码

```
<?php
/*
 * Template name: blog Template
 */
?> 
```

之后，在您的管理员中，您的博客页面编辑您的模板，您可以在编辑博客页面时在下拉列表中看到博客模板。希望这对你有用。

# ip - 将子域绑定到 IP

> ID：15829673
> 
> 赞同：-1
> 
> 时间：2013-04-05T08:54:20.450
> 
> 标签：ip, port, ubuntu-11.04

我有 Ubuntu 11.04 Natty，我正在使用 bind9 服务。我把它配置成这样：

```
$TTL                    86400

example.com.         IN      SOA     ns1.example.com. root.example.com. (2012111201 10800 3600 604800 86400)
example.com.         IN      NS      ns1.example.com.
example.com.         IN      NS      ns2.example.com.

ns1.example.com.     IN      A       55.55.44.44
ns2.example.com.     IN      A       44.44.55.55
example.com.         IN      A       55.55.44.44

*.example.com.       IN      CNAME   example.com. 
```

现在，我所有的子域都指向我的主域的 IP，第一个 NS (55.55.44.44)

如果端口更改，我想要做的是让子域指向另一个 IP。例如：

端口 80 上的 test.example.com 将指向 55.55.44.44，端口 25565 上的 test.example.com 将指向 33.33.33.33

**进一步说明：** 我在 test.example.com 的 80 端口上托管了一个网站，在 bind9 服务所在的同一台服务器上。但是如果你将 test.example.com 保存在 Minecraft 中，它必须指向 33.33.33.33:25565。

所以：

```
test.example.com:80       ->    55.55.44.44:80
test.example.com:25565    ->    33.33.33.33:25565 
```

这可能吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:03:11.060

不可以。DNS 仅解析到 IP 地址级别。

您可以获得的最接近的是配置 DNS 解析为执行端口转发的机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:04:26.900

不，这是不可能的。DNS 不知道端口。

# animation - 将 Kinect 坐标转换为角色模型

> ID：15829676
> 
> 赞同：1
> 
> 时间：2013-04-05T08:54:28.440
> 
> 标签：animation, xna, kinect

我有最新的 Kinect SDK、XNA 4.0 和一个带有骨架的模型，我正在研究使用 kinect 创建一些简单的游戏。我听说各种引擎，例如 DigitalRune 引擎，提供了一种简单的方法来将 Kinect 传感器生成的骨架映射到模型的骨架。

哪个引擎最适合这项任务，为什么？如果您可以列出最好的免费引擎和您必须付费的引擎，以及任何其他建议（如果您有的话），我希望您能列出它们。

我真的需要帮助。虽然我确实设法找到了大约五个可能适合我需要的引擎（Ploobs、Engine Nine、DigitalRune、Hilva、Xen、XNA Final Engine），但我无法判断哪个比另一个更好，因为在相关论坛，我真的没有时间（或更重要的是，知识）来测试所有这些引擎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T10:35:56.057

我认为 XNA 更好，因为它在游戏编程方面提供了更高的透明度，毫无疑问，它是最常用于游戏编程的，而且你会有大量的教程。xna 框架将是最好的，即使您也可以拥有电子书。

# uiscrollview - 无法在 Monotouch 中动态地将 UIbutton 添加到 UIscrollview

> ID：15829681
> 
> 赞同：0
> 
> 时间：2013-04-05T08:54:40.740
> 
> 标签：uiscrollview, xamarin.ios

我面临一个非常奇怪的问题。我正在尝试将 UIbuttons 添加到 Monotouch 中的 UIscrollview 中。但是 UIbutton 没有显示出来。

这是代码：

```
UIImage img = UIImage.FromFile("ecu.png");
UIButton btn = UIButton.FromType(UIButtonType.Custom);
btn.SetBackgroundImage(img,UIControlState.Normal);
btn.Frame = new RectangleF(UIScreen.MainScreen.Bounds.Size.Width - 185, 0,    185,UIScreen.MainScreen.Bounds.Size.Height, 100, 150, 150);
btn.TouchUpInside += (sender, e) => {
UIAlertView alert = new UIAlertView("Info","Tapped",null,"Ok",null);
            alert.Show();
        } ;
scrollimages.AddSubview (btn); 
```

如果我将按钮添加到视图，相同的代码将起作用。我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:57:00.570

在 Interface Builder 中将 UIScrollView 添加到视图后，我刚刚尝试了以下代码：

```
 UIImage img = UIImage.FromFile("ecu.png");
        UIButton btn = UIButton.FromType(UIButtonType.Custom);
        btn.SetBackgroundImage(img,UIControlState.Normal);
        btn.Frame = new RectangleF(0.0f, 0.0f, 150.0f, 150.0f);
        btn.TouchUpInside += (sender, e) => {
            UIAlertView alert = new UIAlertView("Info","Tapped",null,"Ok",null);
            alert.Show();
        } ;
        this.ScrollImages.AddSubview (btn); 
```

它按预期工作。奇怪的事情似乎是 RectangleF 构造函数有 7 个参数。您是否刚刚尝试将原点设置为 0,0 以查看是否在此处添加了按钮？

# php - PHP中的动态类名

> ID：15829690
> 
> 赞同：0
> 
> 时间：2013-04-05T08:55:08.407
> 
> 标签：php, dynamic, autoload

我正在尝试创建一个具有 GeneralObj 的系统。GeneralObj 允许用户使用表名字符串为数据库表启动特殊对象。到目前为止，它运行完美。

```
class GeneralObj{
    function __construct($tableName) {
        //...
    }
} 
```

但是，每次都输入 new GeneralObj(XXX) 太累了。我想知道是否可以将过程简化为喜欢 new XXX()，它实际上与 new GeneralObj(XXX) 运行相同？我发现 PHP 在设置 include_path 中提供了用于动态加载文件的 __autoload 方法，但它需要一个存在的实际定义文件。我真的不想复制和复制相同的定义文件，只是稍微改变一下。

出于原因， eval 不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:16:49.010

也许您可以在自动加载器中自动创建文件：

```
function __autoload($class_name) {
    // check for classes ending with 'Table'
    if (preg_match('/(.*?)Table/', $class_name, $match)) {
        $classPath = PATH_TO_TABLES . '/' . $match[1] . '.php';
        // auto-create the file
        if (!file_exists($classPath)) {
            $classContent = "
class $class_name extends GeneralObj {
    public __construct() {
        parent::__construct('{$match[1]}');
    }
}";
            file_put_contents($classPath, $classContent);
        }
        require_once $classPath;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:40:48.483

使用继承。使 GeneralObj 成为表特定类的超类。通过这种方式，您可以动态派生类名并实例化对象。例子：

```
class someTable extends GeneralObj {

}

$tableName = 'some';
$className = $tableName . 'Table';

$obj = new $className; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:01:14.190

不，这是不可能的。

runkit扩展允许对 PHP 运行时环境[进行](http://www.php.net/manual/en/book.runkit.php)编程操作，但它不能这样做。即使可以，恕我直言，这将是一个非常糟糕的主意，极大地影响了应用程序的要求和复杂性，以换取节省一些击键。

在不相关的注释中，您的`GeneralObj`类具有听起来像[依赖注入容器](http://fabien.potencier.org/article/12/do-you-need-a-dependency-injection-container)的可疑功能。也许您应该考虑用一个替换它？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:14:37.900

像这样的自动加载器：

```
myAutoloader::Register();

class myAutoloader
{
    /**
     * Register the Autoloader with SPL
     *
     */
    public static function Register() {
        if (function_exists('__autoload')) {
            //  Register any existing autoloader function with SPL, so we don't get any clashes
            spl_autoload_register('__autoload');
        }
        //  Register ourselves with SPL
        return spl_autoload_register(array('myAutoloader', 'Load'));
    }   //  function Register()

    /**
     * Autoload a class identified by name
     *
     * @param   string  $pClassName     Name of the object to load
     */
    public static function Load($pClassName){
        if (class_exists($pClassName,FALSE)) {
            //  Already loaded
            return FALSE;
        }

        $pClassFilePath = str_replace('_',DIRECTORY_SEPARATOR,$pClassName) . '.php';

        if (file_exists($pClassFilePath) === FALSE) {
            //  Not a class file
            return new GeneralObj($pClassName);
        }

        require($pClassFilePath);
    }   //  function Load()

} 
```

如果无法实例化表类，则由 GeneralObj 引发异常

# dynamics-crm-2011 - Microsoft Dynamics CRM 2011。按 ID 获取实体的通用方法

> ID：15829693
> 
> 赞同：0
> 
> 时间：2013-04-05T08:55:12.573
> 
> 标签：dynamics-crm-2011, dynamics-crm

在 CRM 4.0 中，我的存储库中有通用方法：

```
public T GetEntityById(Guid id)
{
    var entities =
        from e in m_context.GetEntities(typeof (T).Name)
        where e.GetPropertyValue<Guid>(IdentityFieldName) == id
        select e;
    return (T) entities.FirstOrDefault();
} 
```

但是 CRM 2011 呢？`ICrmEntity`错过了 GetPropertyValue 方法...

通过 ID 获取通用实体的替代方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:06:40.293

类似的东西`(T) m_context.Retrieve(typeof (T).Name, id, new ColumnSet())`。
看[这里](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.iorganizationservice.retrieve.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T12:35:38.777

在寻找相同答案时发现了这个问题，这就是我最终解决它的方式。

```
 public T GetEntityByID<T>(Guid guid) where T : Entity
    {
        return (T) (_organizationService.Retrieve((typeof(T)).Name, guid, new ColumnSet()));
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T12:42:54.313

您真的想使用 ToEntity 方法，而不是强制转换。有时 typeof(T).Name 会有大小写差异，所以我也写了一个辅助函数：

```
/// <summary>
/// Retrieves the Entity of the given type with the given Id, with the given columns
/// </summary>
/// <typeparam name="T">An early bound Entity Type</typeparam>
/// <param name="service">open IOrganizationService</param>
/// <param name="id">Primary Key of Entity</param>
/// <param name="columnSet">Columns to retrieve</param>
/// <returns></returns>
public static T GetEntity<T>(this IOrganizationService service, Guid id, ColumnSet columnSet)
    where T : Entity
{
    return service.Retrieve(EntityHelper.GetEntityLogicalName<T>(), id, columnSet).ToEntity<T>()
}

public static string GetEntityLogicalName<T>() where T : Entity
{
    return GetEntityLogicalName(typeof(T));
}

public static string GetEntityLogicalName(Type type)
{
    var field = type.GetField("EntityLogicalName");
    if (field == null)
    {
        if (type == typeof(Entity))
        {
            return "entity";
        }
        else
        {
            throw new Exception("Type " + type.FullName + " does not contain an EntityLogicalName Field");
        }
    }
    return (string)field.GetValue(null);
} 
```

# c# - 为静态方法调用 EventHandlers

> ID：15829698
> 
> 赞同：0
> 
> 时间：2013-04-05T08:55:39.650
> 
> 标签：c#, static

我有一个类，它有两个静态方法 A() 和 B()。
这里 A() 方法需要订阅一些事件，例如：

```
push.Events.OnDeviceSubscriptionExpired += new PushSharp.Common.ChannelEvents.DeviceSubscriptionExpired(Events_OnDeviceSubscriptionExpired); 
push.Events.OnDeviceSubscriptionIdChanged += new PushSharp.Common.ChannelEvents.DeviceSubscriptionIdChanged(Events_OnDeviceSubscriptionIdChanged); 
```

我将它们保存在类的构造函数中，但它不适用于静态方法实际上，当控件传递给静态方法时，它不会通过构造函数。
在这里，我想要两件事：

1.  如何在类中设置事件处理程序以便可以通过静态方法保存？
2.  如何订阅和取消订阅它们以使它们不能重叠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:03:40.120

您可以尝试在静态构造函数中做您想做的事情。

```
public class MyClass
{
    static MyClass()
    {
       // TODO : Attach your static event handlers here
    }
} 
```

请注意，您只能在此处使用静态属性、字段、事件等。如果您的对象是单例，那么还有其他含义，您应该阅读 Jon Skeet 关于 C# 中的单例实现的文章以全面了解事物。

# iphone - 从 http url 获取 Matt Gallagher 的 AudioStreamer 的持续时间？

> ID：15829700
> 
> 赞同：0
> 
> 时间：2013-04-05T08:55:45.237
> 
> 标签：iphone, ios, objective-c, duration, audiostreamer

我正在使用 Matt Gallagher 的 AudioStreamer 从 url 流式传输 mp3 文件。我需要知道流持续时间，但我找不到怎么做？！

我尝试使用 AudioStreamer 对象的持续时间属性，但它返回 0 可能是因为流来自 url。

请帮忙！

```
audioStreamer = [[AudioStreamer alloc] initWithURL:[NSURL URLWithString:@"http://ia701509.us.archive.org/25/items/TvQuran.com__Maher/001.mp3"]]; 

        [audioStreamer start]; 
```

开始流后我想得到它的持续时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:01:07.403

我使用 ID3 标签和 AVAsset 找到了一个很好的解决方案

```
 NSURL *url = [NSURL  URLWithString:@"your url here"]; 
        AVAsset *asset = [AVURLAsset URLAssetWithURL:url options:nil];
        NSLog(@"> Duration = %.2f seconds", CMTimeGetSeconds(asset.duration)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:33:26.887

```
AVAudioPlayer * sound = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:nil];
sound.delegate = self;
sound.volume = 1;
NSLog([NSString stringWithFormat:@"%f", sound.duration]); 
```

试试这个....

# bash - 如何使用 bash 脚本更改多个文件的扩展名？

> ID：15829702
> 
> 赞同：3
> 
> 时间：2013-04-05T08:55:48.653
> 
> 标签：bash, batch-rename

我对 linux 的使用非常陌生，也许这是我第一次使用，所以我希望能提供一些详细的帮助。我的服务器（Linux）上的多个目录中有 500 多个文件我想使用 bash 脚本将它们的扩展名更改为 .xml 我使用了很多代码，但它们都没有工作我使用的一些代码：

```
for file in *.txt
do
mv ${file} ${file/.txt}/.xml
done 
```

或者

```
for file in *.*
do
mv ${file} ${file/.*}/.xml
done 
```

我不知道第二个是否是有效代码我试图更改 txt 扩展名，因为提示说没有这样的文件 '.txt'

我希望有一些好的帮助谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T08:59:22.337

### 解释

1.  对于递归，您需要 Bash`>=4`并启用`**`（即`globstar`）；
2.  首先，我使用[参数扩展](http://mywiki.wooledge.org/BashFAQ/073)来删除字符串`.txt`，它必须锚定在文件名（`%`）的末尾：
3.  将模式（纯单词或 glob）`#` [锚定到开头，](http://mywiki.wooledge.org/BashFAQ/100#Substituting_part_of_a_string)
4.  并将其`%`锚定到最后。
5.  然后我附加新的扩展名`.xml`
6.  文件名要格外小心，你应该**[总是引用参数扩展](http://mywiki.wooledge.org/Quotes)**。

### 代码

这应该在`Bash`（请注意，我只有`echo`旧/新文件名，实际重命名文件，使用`mv`代替`echo`）：

```
shopt -s globstar # enable ** globstar/recursivity
for i in **/*.txt; do
    [[ -d "$i" ]] && continue; # skip directories
    echo "$i" "${i/%.txt}.xml";
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T09:18:57.783

如果它是一个或两个子目录的问题，您可以使用 rename 命令：

```
rename .txt .xml *.txt 
```

这会将执行命令的目录中的所有 .txt 文件重命名为 .xml 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-15T03:15:58.970

我想将“file.txt”重命名为“file.jpg.txt”，使用重命名easy peezy：

重命名 's/.txt$/.jpg.txt/' *.txt

man rename 会告诉你你需要知道的一切。

爱上 Linux，一切都有一个工具 :-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-05T10:29:57.317

如果所有文件都在同一目录中，则可以使用单个命令完成。例如要将所有jpg文件转换为png，转到相关目录位置然后使用命令

重命名 .jpg .png *

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-01-15T10:43:36.230

# 传递 dir 路径的命令行参数

```
#!/bin/sh
cd $1
names_1=`ls`
for file in ${names_1}
do
mv ${file} ${file}.jpg
done 
```

# objective-c - 尝试在目标 c 中使用 youtube api 获取 channelId 时出现异常

> ID：15829706
> 
> 赞同：3
> 
> 时间：2013-04-05T08:55:55.503
> 
> 标签：objective-c, youtube-api

我正在尝试使用 google-api-objectivec-client 获取 youtube 频道 ID。我遇到的问题基本上是由于某种原因我在尝试访问 channelId 时收到异常。我正在使用的代码：

```
GTLServiceYouTube *service = [[GTLServiceYouTube alloc] init];
service.APIKey = _MY_API_KEY_;
GTLQueryYouTube *query = [GTLQueryYouTube queryForSearchListWithPart:@"id"];
query.q = @"google";
query.type = @"channel";
query.maxResults = 1;
GTLServiceTicket *ticket = [service executeQuery:query completionHandler:^(GTLServiceTicket *ticket, id object, NSError *error) {
    if (error == nil) {
        GTLYouTubeSearchListResponse *products = object;
        for (id item in products.items) {
            GTLYouTubeSearchResult *result = item;
            NSLog(@"Identifier:%@",result.identifier);
            GTLYouTubeResourceId* resourceId = result.identifier;
            NSLog(@"kind:%@",resourceId.kind);
            NSLog(@"channel:%@",resourceId.channelId);
        }
    }else{
        NSLog(@"Error: %@", error.description);
    }
}]; 
```

运行此代码时得到的输出是：

```
2013-04-05 11:37:12.615 YouTest[21704:11303] Identifier:GTLYouTubeChannel 0x7233b00: {kind:"youtube#channel" channelId?:"UCK8sQmJBp8GCxrOtXWBpyEA"}
2013-04-05 11:37:12.617 YouTest[21704:11303] kind:youtube#channel
2013-04-05 11:37:12.617 YouTest[21704:11303] -[GTLYouTubeChannel channelId]: unrecognized selector sent to instance 0x7233b00
2013-04-05 11:37:12.618 YouTest[21704:11303] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[GTLYouTubeChannel channelId]: unrecognized selector sent to instance 0x7233b00' 
```

所以我的实现在我试图访问resourceId的channelId时崩溃了。从文档中我了解到 channelId 应该在那里，因为 resourceId 的类型是 youtube#channel。channelId 当然可以从我也打印的 result.identifier 字符串中解析出来，但是由于 channelId 有一个属性，我更喜欢使用它。

关于我的代码有什么问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-20T01:04:51.720

Google 库中确实存在错误。但是，我通过直接访问 JSON 字符串并在 NSString+SBJSON.h 类的帮助下解析它来解决这个问题，如本例所示。

```
#import "NSString+SBJSON.h"

...

GTLYouTubeResourceId *resource = channel.snippet.resourceId;

NSDictionary *jsonObject = [resource.JSONString JSONValue];

NSString *channelid = [jsonObject valueForKey:@"channelId"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:39:21.367

我对 Objective-C 不是很熟悉，但是是的，生成的客户端库的 YouTube 数据 API v3 绑定似乎有问题。您是否使用[项目页面](https://code.google.com/p/google-api-objectivec-client/)中的最新版本？如果您可以使用最新版本重现它，您可能希望针对客户端库[提交错误。](https://code.google.com/p/google-api-objectivec-client/issues/list)在进一步解决此问题时，我会检查您在`query.type = @"video";`尝试访问响应项的 videoId 时是否有同样的问题。

不过，这是您可以尝试的替代方法。频道的 id 也会在[snippet.channelId](https://developers.google.com/youtube/v3/docs/search#snippet.channelId)属性中返回。`GTLQueryYouTube *query = [GTLQueryYouTube queryForSearchListWithPart:@"snippet"];`如果您通过查看是否可以读取该值来请求片段部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-07T21:57:25.797

## 解决方法代码：

```
 channel.snippet.resourceId.JSON[@"channelId"]; 
```

无需自己解析 JSON，因为底层 JSON 已暴露。

看起来自动绑定对 GTLYouTubeResourceId 不起作用，因为“youtube#channel”的“kind”元素放弃了运行时对象的创建，而是创建了 GTLYouTubeChannel。

## 彻底的解决方法代码：

```
ticket.surrogates = @{ (id)[GTLYouTubeChannel class] : [GTLYouTubeResourceId class] }; 
```

如果您真的想强制该绑定工作，您可以在执行查询时在票证上更进一步的上游解决方法。

## 全局解决方法补丁：

[https://github.com/google/google-api-objectivec-client/pull/109](https://github.com/google/google-api-objectivec-client/pull/109)

该问题有公开票：

[https://github.com/google/google-api-objectivec-client/issues/63](https://github.com/google/google-api-objectivec-client/issues/63)

[https://github.com/google/google-api-objectivec-client/issues/92](https://github.com/google/google-api-objectivec-client/issues/92)

似乎他们想更改 API 以不调用 resourceId.kind 'kind' 以避免此问题。但是，当我们等待 API 更改时，这三种变通方法中的任何一种都应该满足您的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-24T23:23:59.810

我遇到过同样的问题。用以下方法解决了...

```
 NSDictionary *jsonObject = [NSJSONSerialization JSONObjectWithData:[resourceId.JSONString dataUsingEncoding:NSUTF8StringEncoding] options:0 error:nil];
            NSString *channelId = [jsonObject valueForKey:@"channelId"];
            NSLog(@"channelId is %@", channelId); 
```

# ant - echoproperties 任务取决于日志级别

> ID：15829708
> 
> 赞同：1
> 
> 时间：2013-04-05T08:56:07.997
> 
> 标签：ant

是否有机会使 echoproperties 任务依赖于日志级别（类似于 echo 任务中的 level 参数）？仅当 ant 以调试模式 (-debug) 运行时，才有一些 echoproperties 输出会很有帮助。

替代方案：如何在 Ant 中检测当前日志级别？是否有包含日志级别的 ea 属性？

谢谢！坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T16:37:37.007

考虑为此用例使用 ant[记录任务。](http://ant.apache.org/manual/Tasks/recorder.html)

请参阅[如何在 ant 中捕获 antcall 的输出？](https://stackoverflow.com/questions/10851785/how-do-i-capture-the-output-of-an-antcall-inside-of-ant/).

# functional-programming - 如何转换我的数据类型？

> ID：15829713
> 
> 赞同：0
> 
> 时间：2013-04-05T08:56:26.123
> 
> 标签：functional-programming, sml, smlnj, ml

我为多列表定义了一个数据类型： `datatype intnest= INT of int | LIST of intnest list;` 现在我正在尝试编写可以将此类型转换为主要类型的函数。

例如： `[INT 1, INT 2, LIST[INT 6, INT 8]] => [1,2, [6,8]]` 我该怎么做？提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:31:54.663

参考[您之前的问题](https://stackoverflow.com/questions/15787639/how-can-i-define-a-heteregeneous-list-datatype)，您不能！

正如我试图解释的那样：在 SML 中不可能有这样的价值！

只需在您的口译员中尝试一下

```
- val _ = [1,2, [6,8]];
stdIn:28.9-28.21 Error: operator and operand don't agree [literal]
  operator domain: int * int list
  operand:         int * int list list
  in expression:
    2 :: (6 :: 8 :: nil) :: nil 
```

如果我们用基本结构而不是语法糖来构造列表，那么列表`[1,2,3]`就变成了`1 :: 2 :: 3 :: nil`

现在，如果我们看一下两个“构建​​块”的类型 cons 和 nil

```
- op::;
val it = fn : 'a * 'a list -> 'a list
- nil;
val it = [] : 'a list 
```

然后我们看到中缀运算符 cons，`'a`在左侧接受一个类型的参数，`'a`在右侧接受一个列表。
因此我们可以看到，如果我们构建一个 int 列表，那么我们必须在左侧给它一个 int，在右侧给它一个 int 列表（如上面的示例）。从这里应该很清楚，我们不能做这样的事情：

```
[1, 2] :: 3 :: nil 
```

这相当于`(1 :: 2 :: nil) :: 3 :: nil`

# c# - 当应用程序在 Windows 8 XAML/C# 应用程序中超过 1 页时出现 SuspensionManager 错误

> ID：15829716
> 
> 赞同：3
> 
> 时间：2013-04-05T08:56:34.933
> 
> 标签：c#, windows-8, winrt-xaml, suspend

我正在编写一个 Windows 8 XAML/C# 应用程序，但会话管理器有点问题。

在我的 App.xaml.cs 中，我的 OnSuspending 方法如下所示：

```
 private async void OnSuspending(object sender, SuspendingEventArgs e)
    {
        var deferral = e.SuspendingOperation.GetDeferral();
        //TODO: Save application state and stop any background activity
        await SuspensionManager.SaveAsync();
        deferral.Complete();
    } 
```

我已经在 App.xaml.cs 的 OnLaunched 方法中使用 SuspensionManager 注册了我的 rootFrame：

```
SuspensionManager.RegisterFrame(rootFrame, "AppFrame"); 
```

因此，在我的应用程序的第一页中，我重写了 SaveState 方法。它看起来像这样：

```
 protected override void SaveState(Dictionary<string, object> pageState)
    {
        Save(true);

        base.SaveState(pageState);
    } 
```

当应用程序被挂起时，这个方法被调用并且一切正常。

我有一个与第一页相同的 SaveState 方法的第二页（如上所述）。

当我从第一页导航到第二页并暂停应用程序时，没有调用任何 SaveState 方法并且应用程序崩溃并出现以下错误：

SuspensionManager 失败：未指定的错误

杰出的！！里面信息不多！！

那么，我需要对具有多个页面的 SuspensionManager 做任何不同的事情吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:40:04.763

SuspensionManager 管理器可以处理多个页面 - 没有问题。鉴于上下文很少，我建议如下：

1.  您是否对使用网格应用模板创建 vs 项目时自动生成的常用文件进行了任何更改？如果是 - 尝试创建一个新项目。
2.  您是否在 frame.navigate 调用中传递了任何不可序列化的参数？这是不太可能的，因为在这种情况下 - 您可以在输出窗口中看到类似这样的内容 - WinRT 信息：GetNavigationState 不支持传递给 Frame.Navigate 的参数类型的序列化。

# iphone - 使用 viewControllers 获取数组的属性

> ID：15829717
> 
> 赞同：0
> 
> 时间：2013-04-05T08:56:36.027
> 
> 标签：iphone, ios, objective-c

我得到了一个包含来自不同类型的视图控制器的数组，`viewControllersArray`因此首先我检查类型是否正确（QuestionViewController），然后我想打印出该属性。

```
for(NSUInteger i = 0; i<viewControllersArray.count; i++) { 
if ([[viewControllersArray objectAtIndex:i] isKindOfClass:[QuestionViewController class]])    {
    NSLog(@"%@",((QuestionViewController*)[viewControllersArray objectAtIndex:i]).getQAnswer ); 
    }
} 
```

然而，这只是向我显示 (null) 而不是 NSString 属性。

**编辑**

到目前为止，我得到的是：

```
for(NSUInteger i = 0; i<viewControllersArray.count; i++) { 
    if ([[viewControllersArray objectAtIndex:i] isKindOfClass:[QuestionViewController class]]){
        NSLog(@"IDENT: %@", [[viewControllersArray objectAtIndex:i] ident]);
        NSLog(@"ANSWER: %@", [[viewControllersArray objectAtIndex:i] getQAnswer]);
    }
} 
```

第二个 NSLog (getQAnswer) 有效。getQAnswer 是 QuestionViewController 中的一个方法。第一个 NSLog (ident) 显示不正确的输出 (null)，这是属性：

```
@property (strong, nonatomic) NSString *ident; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:00:13.407

你输入到`QuestionViewController`

采用

```
NSLog(@"%@", [[viewControllersArray objectAtIndex:i] getQAnswer]); 
```

**编辑**：

根据你的评论`viewControllersArray[0]`给你`SendViewController`。

你应该改变

```
isKindOfClass: 
```

到

```
if( [[viewControllersArray objectAtIndex:i] class] == [QuestionViewController class]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:14:36.560

如果你得到一个空值，那只能意味着 qAnswer 的值没有设置。如果对象不是 QuestionViewController 类型，则不会进入 if 条件。

您确定设置了 qAnswer 的值吗？如果您使用的是getter/setter，您不应该使用`[viewcontroller getQAnswer]`or `viewcontroller.qAnswer`（除非您有一个名为getQAnswer 的变量）？

数组中是否还有任何视图控制器是 QuestionViewController 的子类的对象？如果有，那么该视图控制器也将满足条件并进入 if 条件。

如果是这种情况，请尝试使用`isMemberOfClass:`. 看[这里](https://stackoverflow.com/questions/3653929/iphone-sdk-difference-between-iskindofclass-and-ismemberofclass)

# javascript - 编译到 11g 时附加库

> ID：15829718
> 
> 赞同：0
> 
> 时间：2013-04-05T08:56:39.127
> 
> 标签：javascript, oracle11g, migration, oracleforms

我有问题 frmjdapi 库。我编写了将 Oracle 表单、菜单和库从 6i 编译到 11g 的脚本。我找到了 AttachedLibrary，但它只将 Oracle 库附加到菜单和表单。如何使用此类将库附加到库或存在其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:54:11.943

方法很简单，当您将 pll 文件转换为 pld 时，所有库都按格式列在 pld 顶部：

```
.attach LIBRARY some_library END NOCONFIRM\r\n 
```

所以在编译 pll 之前将其转换为 pld 并将库添加到列表的后面。然后将其转换回 pll 并附加库。

# c# - MEF 不提供对象

> ID：15829721
> 
> 赞同：0
> 
> 时间：2013-04-05T08:56:56.080
> 
> 标签：c#, mef

更新：

这是一个 mvc 插件项目，使用 MEF 在运行时获取控制器和操作。[http://www.fidelitydesign.net/?p=104](http://www.fidelitydesign.net/?p=104)

我添加了一个新项目，并在它的类中添加了一个已经组成的类型的导出。

```
 [Export(typeof(IController)), ExportMetadata("Name", "Clocks")]
  public class ClocksController : Controller
  {

    public XmlActionResult Index()
    {
     var p = DeviceLogic.GetUnassigned;
    }
  [Import(typeof(DeviceLogic))]
  DeviceLogic DeviceLogic { get; set; }
  } 
```

这在另一个项目中组成：

```
 [Export]
  public class ImportControllerFactory : DefaultControllerFactory
  {
    [ImportMany]
    private IEnumerable<PartFactory<IController, IControllerMetadata>> ControllerFactories;
  } 
```

申请开始

```
[ImportMany]
private IEnumerable<ImportControllerFactory> ControllerFactories; 
```

控制器工厂为空，直到我真正组成部分

```
container.ComposeParts(this); 
```

那工作正常，所以我决定尝试模仿它，让 devicelogic 出现在我遇到问题的项目中。

我创建了一个空接口（IEmpty）进行测试并尝试了这个：

```
 [Export(typeof(IEmpty))]
  public class RequestProcessor : IEmpty
  {

    [Import(typeof(DeviceLogic))]
    DeviceLogic DeviceLogic { get; set; }
  } 
```

并在我的应用程序开始添加

```
[ImportMany]
private IEnumerable<IEmpty> TestMef; 
```

这充满了合成后的一个实例，所以这似乎奏效了。我的问题是，是否有人对为什么 devicelogic 在 requestprocessor 中为 null 而在 clocksController 中没有任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:09:07.513

您需要`SatisfyImportsOnce`在实例化后调用 MEF 的方法：

```
YourMEFContainter.SatisfyImportsOnce(dataTransfer) 
```

# visual-studio-2012 - 升级到 VS 2012 Update 2 后无法通过 Resharper 运行 MSTest 单元测试

> ID：15829723
> 
> 赞同：24
> 
> 时间：2013-04-05T08:57:10.817
> 
> 标签：visual-studio-2012, resharper

所有测试都处于待处理状态。我无法运行或调试它们。我看到其他人也遇到了同样的问题：http: [//youtrack.jetbrains.com/issue/RSRP-339546](http://youtrack.jetbrains.com/issue/RSRP-339546)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-05T16:03:35.797

Jetbrains 已经在处理这个案子：

> 我们将发布 ReSharper 7 的更新以解决测试运行程序和 Visual Studio Update Pack 2 的问题。
> 
> — JetBrains ReSharper (@resharper) [2013 年 4 月 5 日](https://twitter.com/resharper/status/320154098211094529)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T07:27:56.727

Jetbrains 修复它：http: [//youtrack.jetbrains.com/issue/RSRP-339987](http://youtrack.jetbrains.com/issue/RSRP-339987)

似乎在大多数情况下都可以工作，但仍然不适用于 Windows Phone。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T09:02:15.750

以管理员身份运行 VS。我对 vs2012 和 resharper 有完全相同的问题，现在它就像魅力一样

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-12T19:58:00.343

I'm using ReSharper 8.0.2 and VS 2012 and had this issue. I downloaded VS2012 Update 3 from here: [http://www.microsoft.com/visualstudio/eng/visual-studio-update](http://www.microsoft.com/visualstudio/eng/visual-studio-update) and it solved the issue

# java - 如何在java中调用变量

> ID：15829724
> 
> 赞同：-5
> 
> 时间：2013-04-05T08:57:12.403
> 
> 标签：java, android

我创建了两个java文件，在一个java文件中我得到了整数类型位置变量中的android列表视图位置，如何将该位置值调用到另一个java文件中

```
public void onItemClick(AdapterView<?> parent, View view, int position,long id) {     
        Intent intent = new Intent(this, Play.class);
        startActivity(intent);
        int pos = position; //<------------ I assigned pos for position i need to call pos to another Play.class file
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:59:08.690

```
ClassName cn = new ClassName(); // Creating instance of class
cn.variable; 
```

如果变量是静态的，您可以这样调用。

```
ClassName.variable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:05:55.337

让一个 java 文件 File1.java 在其中具有列表视图位置的值：

```
public class File1{

    public File1(){
    yourMethodWhereListViewPositionAvailable();
    }
     private Integer listViewPosition;
     public Integer getListViewPosition(){
        return this.listViewPosition;
     }
     public void setListViewPosition(Integer listViewPosition){
        this.listViewPosition=Integer listViewPosition;
     }

     private void yourMethodWhereListViewPositionAvailable(){
        ............
        this.setListViewPosition(listViewPosition);
        ...................
     }
    } 
```

在 File2 你需要 list view position 的值，然后这样做：

```
public class File2{
    .....................
    File1 file1 = new File1();
    file1.getListViewPosition();//You will get the value
   ..........................
} 
```

如果有帮助或疑虑，请告诉我。

# java - jqgrid 只读组合框

> ID：15829728
> 
> 赞同：0
> 
> 时间：2013-04-05T08:57:25.503
> 
> 标签：java, javascript, html, servlets, jqgrid

我正在使用 JSP 和 Servlet（IDE：Eclipse，数据库：Oracle10）开发一个 Web 应用程序。我正在使用 jqGrid 以表格格式显示记录。

我想在对话框中设置`combobox`只读。`Edit`

**colNames & colModel**

```
colNames:['User Name', 'Seq No.'],
colModel:[
            {name:'USER_ID',index:'USER_ID', width:200,sortable:true,editable:true,edittype:"select", editoptions: {maxlength: 20,dataUrl: 'ServletName?action=comboUserID'}},
            {name:'SEQUENCE_NUMBER',index:'SEQUENCE_NUMBER', width:50,sortable:true, editable:true, editrules: { required: true, number:true},editoptions: {size:4,maxlength: 2}}
         ], 
```

**寻呼机代码**

```
).navGrid('#pager10_d1',{cloneToTop:true,edit:true,add:true,del:true,view:true,search: true},
                {
                    width:350,
                    modal:true,
                    jqModal: false,
                    savekey: [true,13],
                    closeOnEscape:true,
                    mtype:'POST',
                    closeOnSubmit: true,
                    recreateForm: true,
                    editurl:'MyServletName',
                    editData:
                    {
                        action: 'userRolesUPDATE',
                        userID: function () {return userID;}
                    },
                    beforeShowForm: function(form)
                    {
                        $('#USER_ID',form).attr('readonly','readonly');
                    }

                }
                //add dialog and other dialog code here
                ); 
```

我指的是[Oleg 的这个答案](https://stackoverflow.com/a/3952654/1551233)，但在我的表单上它不起作用，组合框仍然是可编辑的。相同的代码适用`Field`于网格中的其他代码，但不适用于`combobox`. 所以让我知道我的代码是否有任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:11:24.160

我认为`<select>`(combobox) 不能是只读的。您可以改为使用*禁用它*

```
$("#USER_ID", form).prop("disabled", true); 
```

或者

```
$("#USER_ID", form).attr("disabled", "disabled"); 
```

如果您使用旧版本的 jQuery（1.6 之前）。

# arrays - Codeigniter 通过发布信息与发布信息的数据库结果一起查看

> ID：15829732
> 
> 赞同：0
> 
> 时间：2013-04-05T08:57:30.607
> 
> 标签：arrays, codeigniter, activerecord

我有一个收集`CustomerName`,`Period`和`UnitOfMeasure`[buom] 的表格。

然后我将此信息传递给我的控制器，控制器将发布数据放入一个数组并将其传递给视图。

该控制器目前 100% 工作。

```
function new_blank_order_lines() 
  {
 if($this->input->post()){ 
     $data = array(
    'customer' =>$this->input->post('customer'),
    'period' =>$this->input->post('period'),
    'buom' =>$this->input->post('buom')
       );
     $this->session->set_userdata($data);
     $this->Sales_model->get_creditlimit($this->input->post('customer'));
   }
    $this->load->view('sales/new_blank_order_lines',$this->session->all_userdata());
    }
    else {
      redirect('/sales/permError');
    }
  } 
```

我想要做的是查询客户`credit limit`并`credit balance`使用客户发布值并将其传递给我的视图以在下一个表单中使用。

所以我的模型是：

```
function get_creditlimit($customer)
{
    $this->db->select('creditlimit','creditbalance');
    $this->db->from('Customers');
    $this->db->where('Customername',$customer);
    $q = $this->db->get();
    if($q->num_rows() > 0) 
    {
        return $q->result();
    }
} 
```

所以在我的控制器中我调用模型函数： `$this->Sales_model->get_creditlimit($this->input->post('customer'));` 在这里我将`customer`后值传递给模型以获取正确的信用额度？它是否正确？

我的问题是如何将发布信息数组传递给视图并将信用额度信息传递给视图。

我是否需要将模型结果添加到数组并传递单个数组？如果是这样，我该怎么做？

一如既往地感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:19:16.627

只需将其添加到 $data 数组：

```
$data = array(
 'customer' =>$this->input->post('customer'),
 'period' =>$this->input->post('period'),
 'buom' =>$this->input->post('buom'),
 'creditLimit' => $this->Sales_model->get_creditlimit($this->input->post('customer'))
); 
```

# android - 使用集合更新应用小部件的问题

> ID：15829738
> 
> 赞同：10
> 
> 时间：2013-04-05T08:57:48.257
> 
> 标签：android, android-widget, android-appwidget

我为我的应用程序使用集合创建了一个应用程序小部件，该小部件显示该特定日期的日期和项目列表。一切正常，并且小部件正在根据需要进行更新，但有时通过单击下一个和上一个按钮更改小部件中的日期时会发生什么情况，列表未刷新意味着项目未在该特定日期更新。这种行为是随机的，它有时只发生。那么为什么会发生这种情况，我的代码有什么问题。

我使用过的代码：

**WidgetProvider.class**

```
public class WidgetProvider extends AppWidgetProvider 
{   
    private ThemeManager    m_ThemeManagerObject;

    private static String   WIDGET_NEXT_BUTTON = "in.test.widgetApp.WIDGET_NEXT_BUTTON";

    private static String   WIDGET_PREV_BUTTON = "in.test.widgetApp.WIDGET_PREV_BUTTON";    

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) 
    {               
        super.onUpdate(context, appWidgetManager, appWidgetIds);

        // Set Date to current Date
        NoteManager.getSingletonObject().setWidgetToCurrentDate();

        // Code to update the widget by current date 
        updateAppWidget(context, AppWidgetManager.getInstance(context), appWidgetIds);
    }   

    @Override
    public void onReceive(Context context, Intent intent) 
    {           
        super.onReceive(context, intent);

        int numOfDays = 1;

        ComponentName thisWidget = new ComponentName(context, WidgetProvider.class);
        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
        int[] appWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);

        if (intent.getAction().equals(WIDGET_NEXT_BUTTON)) 
        {
            // Increase no of days by one
            // Update the widget by new date 
            NoteManager.getSingletonObject().setWidgetDate(numOfDays);          
            updateAppWidget(context, AppWidgetManager.getInstance(context), appWidgetIds);
        }   
        else if (intent.getAction().equals(WIDGET_PREV_BUTTON)) 
        {
            // Decrease no of days by one
            // Update the widget by new date 
            NoteManager.getSingletonObject().setWidgetDate(-numOfDays);         
            updateAppWidget(context, AppWidgetManager.getInstance(context), appWidgetIds);
        }                   
    }

        public void updateAppWidget(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds)
{
    // Get the folder path of all-page-view
    ContextWrapper cw = new ContextWrapper(context.getApplicationContext());
    File customDirectoryPath = cw.getDir(Utilities.CUSTOM_DIRECTORY_NAME_PREFIX, Context.MODE_PRIVATE);
    File allPageDirectoryPath = new File(customDirectoryPath.getPath() + "/" + Utilities.All_PAGE_DIRECTORY_NAME_PREFIX); 

    if (!(allPageDirectoryPath.exists()))
        allPageDirectoryPath.mkdirs();

    // Create an singleton object of ThemeManager class
    m_ThemeManagerObject = ThemeManager.getSingletonObject();
    m_ThemeManagerObject.readTheme(allPageDirectoryPath.getPath());

    // Create an instance of SimpleDateFormat class
    SimpleDateFormat dateFormater = new SimpleDateFormat("dd-MMM, EEE", Locale.US);

    /* loop through all widget instances */
    for (int widgetId : appWidgetIds) 
    { 
        // Create an instance of remote view class
        RemoteViews remoteView = new RemoteViews(context.getPackageName(), R.layout.widget_list);       
        Intent svcIntent = new Intent(context, WidgetService.class);
        svcIntent.setData(Uri.fromParts("content", String.valueOf(widgetId), null));        
        remoteView.setRemoteAdapter(R.id.widget_list, svcIntent);   

        // Show day, month and week day inside the widget
        remoteView.setTextViewText(R.id.txt_date, dateFormater.format(NoteManager.getSingletonObject().getWidgetDate().getTime()));

        // If the list is empty. Show empty widget with juswrite-icon & empty text to the user          
        remoteView.setEmptyView(R.id.widget_list, R.id.widget_empty_text);              

        // On click of next button
        Intent nextButtonIntent = new Intent(WIDGET_NEXT_BUTTON);
        /* use widgetId as second parameter - it helped me to better address particular widget instance */
        PendingIntent nextButtonPendingIntent = PendingIntent.getBroadcast(context, widgetId, nextButtonIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        remoteView.setOnClickPendingIntent(R.id.btn_next_month, nextButtonPendingIntent);
        remoteView.setInt(R.id.btn_next_month, "setBackgroundResource", m_ThemeManagerObject.getNextButtonBgImage());

        // On click of previous button
        Intent prevButtonIntent = new Intent(WIDGET_PREV_BUTTON);
        /* use widgetId as second parameter - same as above */
        PendingIntent prevButtonPendingIntent = PendingIntent.getBroadcast(context, widgetId, prevButtonIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        remoteView.setOnClickPendingIntent(R.id.btn_prev_month, prevButtonPendingIntent);
        remoteView.setInt(R.id.btn_prev_month, "setBackgroundResource", m_ThemeManagerObject.getPrevButtonBgImage());

        // Open application on click of app widget
        Intent clickIntent = new Intent(context, AllPageViewActivity.class);
        PendingIntent clickPI = PendingIntent.getActivity(context, 0,clickIntent,PendingIntent.FLAG_UPDATE_CURRENT);
        remoteView.setOnClickPendingIntent(R.id.widget_empty_text, clickPI);
        remoteView.setOnClickPendingIntent(R.id.txt_date, clickPI);

        /* update one widget instance at a time*/
        appWidgetManager.updateAppWidget(widgetId, remoteView);
    }
}
} 
```

**WidgetService.class**

```
public class WidgetService extends RemoteViewsService 
{
    @Override
    public RemoteViewsFactory onGetViewFactory(Intent intent) 
    {
        return(new WidgetDisplay(this.getApplicationContext(), intent));
    }
} 
```

**WidgetDisplay.class**

```
public class WidgetDisplay implements RemoteViewsService.RemoteViewsFactory
{
    private File m_CustomDirectoryPath, m_AllPageDirectoryPath;

    private NoteManager m_NoteManagerObject;

    private ThemeManager m_ThemeManagerObject;

    private ArrayList<String>   m_AlarmItemNameArrayList;

    private ArrayList<Integer>  m_ItemIndexArray;

    private Context ctxt=null;

    int appWidgetId;

    Bitmap canvasBackground;

    public WidgetDisplay(Context ctxt, Intent intent) 
    {
        this.ctxt=ctxt;

        appWidgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,
                AppWidgetManager.INVALID_APPWIDGET_ID);

        setImageInView(this.ctxt);

    }

    private void setImageInView(Context context) 
    {
        ContextWrapper cw = new ContextWrapper(ctxt.getApplicationContext());
        m_CustomDirectoryPath = cw.getDir(Utilities.CUSTOM_DIRECTORY_NAME_PREFIX, Context.MODE_PRIVATE);
        m_AllPageDirectoryPath = new File(m_CustomDirectoryPath.getPath() + "/" + Utilities.All_PAGE_DIRECTORY_NAME_PREFIX); 

        m_NoteManagerObject = NoteManager.getSingletonObject();
        m_ThemeManagerObject = ThemeManager.getSingletonObject();

        m_NoteManagerObject.readSettings(m_AllPageDirectoryPath.getPath());
        m_NoteManagerObject.readAllPageChangesFromFile(m_AllPageDirectoryPath.getPath());
        m_NoteManagerObject.readAlarmFromFile(m_AllPageDirectoryPath.getPath());
        m_ThemeManagerObject.readTheme(m_AllPageDirectoryPath.getPath());

        m_AlarmItemNameArrayList = new ArrayList<String>(m_NoteManagerObject.getAlarmCount());
        m_ItemIndexArray = new ArrayList<Integer>(m_NoteManagerObject.getAlarmCount());

        SimpleDateFormat sdFormatter = new SimpleDateFormat("dd-MMM-yyyy", Locale.US);      
        String selectedDate = sdFormatter.format(m_NoteManagerObject.getWidgetDate());

        for(int i=0; i<m_NoteManagerObject.getAlarmCount(); i++)
        {
            String ArrayDate = sdFormatter.format(m_NoteManagerObject.getAlarmTime(i));         
            if(selectedDate.equals(ArrayDate))
            {
                File noteDirectoryPath = new File(m_CustomDirectoryPath.getPath() + "/" + m_NoteManagerObject.getAlarmFolder(i));
                m_AlarmItemNameArrayList.add(noteDirectoryPath.getPath() + "/" + m_NoteManagerObject.getAlarmItem(i));

                m_ItemIndexArray.add(i);
            }
        }
    }

    @Override
    public int getCount() 
    {
        return(m_AlarmItemNameArrayList.size());
    }

    @Override
    public RemoteViews getViewAt(int position) 
    {       
        new ImageLoaderTask(position).executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);

        // Set combine image to the image view using remote view instance
        RemoteViews remoteView = new RemoteViews(ctxt.getPackageName(), R.layout.widget_list_item);
        remoteView.setImageViewBitmap(R.id.image_view, canvasBackground);

        // Set time text view using remote view instance
        SimpleDateFormat timeFormater;

        if(m_NoteManagerObject.get24HourFormat())
        {
            timeFormater = new SimpleDateFormat("HH:mm", Locale.US);
        }
        else
        {
            timeFormater = new SimpleDateFormat("hh:mm a", Locale.US );
        }

        // Show time on the top of each image view
        String time = timeFormater.format(m_NoteManagerObject.getAlarmTime(m_ItemIndexArray.get(position)));            
        remoteView.setTextViewText(R.id.text_alarm_time,  time);        

        Intent clickIntent = new Intent(ctxt, AllPageViewActivity.class);
        PendingIntent clickPI=PendingIntent.getActivity(ctxt, 0,clickIntent,PendingIntent.FLAG_UPDATE_CURRENT);
        remoteView.setOnClickPendingIntent(R.id.image_view, clickPI);

        return(remoteView);
    }

    class ImageLoaderTask extends AsyncTask<URL, Integer, Long>
    {
        private int position;

        ImageLoaderTask(int position)
        {
            this.position = position;
        }

        @Override
        protected void onPreExecute()
        {
            // Get foreground and background image
            Bitmap bitmapImage = BitmapFactory.decodeFile(m_AlarmItemNameArrayList.get(position)).copy(Bitmap.Config.ARGB_8888, true);
            canvasBackground = BitmapFactory.decodeResource(ctxt.getResources(), m_ThemeManagerObject.getWidgetListItemBgImage(m_ItemIndexArray.get(position), bitmapImage)).copy(Bitmap.Config.ARGB_8888, true);

            // Scaled foreground image and combine with the background image
            bitmapImage = Bitmap.createScaledBitmap(bitmapImage, 380, bitmapImage.getHeight() / 2, true);               
            Canvas comboImage = new Canvas(canvasBackground);
            comboImage.drawBitmap(bitmapImage, 0f, 0f, null);
        }

        @Override
        protected Long doInBackground(URL... urls)
        {
            return null;
        }

        @Override
        protected void onProgressUpdate(Integer... progress)
        {

        }

        @Override
        protected void onPostExecute(Long result)
        {

        }
    }

    @Override
    public void onCreate(){ 
    }

    @Override
    public void onDestroy(){
    }

    @Override
    public RemoteViews getLoadingView()
    {
        return(null);
    }

    @Override
    public int getViewTypeCount(){
        return(1);
    }

    @Override
    public long getItemId(int position){
        return(position);
    }

    @Override
    public boolean hasStableIds(){
        return(true);
    }

    @Override
    public void onDataSetChanged(){
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-03T10:38:37.013

**WidgetProvider.class**

```
public class WidgetProvider extends AppWidgetProvider 
{   
    private NoteManager         m_NoteManagerObject;

    private ThemeManager        m_ThemeManagerObject;

    private SimpleDateFormat    m_DateFormater;

    private static String       WIDGET_NEXT_BUTTON = "in.test.widgetApp.WIDGET_NEXT_BUTTON";

    private static String       WIDGET_PREV_BUTTON = "in.test.widgetApp.WIDGET_PREV_BUTTON";    

    public WidgetProvider()
    {
        // Create an singleton object of NoteManager class
        m_NoteManagerObject = NoteManager.getSingletonObject();
        // Create an singleton object of ThemeManager class
        m_ThemeManagerObject = ThemeManager.getSingletonObject();
        // Create an instance of SimpleDateFormat class
        m_DateFormater = new SimpleDateFormat("dd-MMM, EEE", Locale.US);
    }

    @Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) 
    {               
        super.onUpdate(context, appWidgetManager, appWidgetIds);

        // Set Date to current Date
        m_NoteManagerObject.setWidgetToCurrentDate();

        // Get the folder path of all-page-view
        ContextWrapper cw = new ContextWrapper(context.getApplicationContext());
        File customDirectoryPath = cw.getDir(Utilities.CUSTOM_DIRECTORY_NAME_PREFIX, Context.MODE_PRIVATE);
        File allPageDirectoryPath = new File(customDirectoryPath.getPath() + "/" + Utilities.All_PAGE_DIRECTORY_NAME_PREFIX); 

        if (!(allPageDirectoryPath.exists()))
            allPageDirectoryPath.mkdirs();

        m_ThemeManagerObject.readTheme(allPageDirectoryPath.getPath());     

        // Set up the intent that starts the WidgetService, which will
        // provide the views for this collection.   
        // When intents are compared, the extras are ignored, so we need to embed the extras
        // into the data so that the extras will not be ignored.
        Intent intent  = new Intent(context, WidgetService.class);
        intent.setData(Uri.fromParts("content", String.valueOf(appWidgetIds), null));

        // Instantiate the RemoteViews object for the App Widget layout.
        // Set up the RemoteViews object to use a RemoteViews adapter. 
        // This adapter connects to a RemoteViewsService  through the specified intent.
        // This is how you populate the data.
        RemoteViews remoteView = new RemoteViews(context.getPackageName(), R.layout.widget_list);           
        remoteView.setRemoteAdapter(R.id.widget_list, intent);  

        // Show day, month and week day inside the widget
        remoteView.setTextViewText(R.id.txt_date, m_DateFormater.format(m_NoteManagerObject.getWidgetDate().getTime()));

        // The empty view is displayed when the collection has no items.        
        remoteView.setEmptyView(R.id.widget_list, R.id.widget_empty_text);              

        // On click of next button
        // This section makes it possible for items to have individualized behavior.
        // Set the action for the intent.
        // When the user touches a particular view, it will have the effect of
        // broadcasting ACTION.
        Intent nextButtonIntent = new Intent(context, WidgetProvider.class);            
        nextButtonIntent.setAction(WIDGET_NEXT_BUTTON);
        PendingIntent nextButtonPendingIntent = PendingIntent.getBroadcast(context, 0, nextButtonIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        remoteView.setOnClickPendingIntent(R.id.btn_next_month, nextButtonPendingIntent);
        remoteView.setInt(R.id.btn_next_month, "setBackgroundResource", m_ThemeManagerObject.getNextButtonBgImage());

        // On click of previous button
        // This section makes it possible for items to have individualized behavior.
        // Set the action for the intent.
        // When the user touches a particular view, it will have the effect of
        // broadcasting ACTION.
        Intent prevButtonIntent = new Intent(context, WidgetProvider.class);
        prevButtonIntent.setAction(WIDGET_PREV_BUTTON);
        PendingIntent prevButtonPendingIntent = PendingIntent.getBroadcast(context, 0, prevButtonIntent, PendingIntent.FLAG_UPDATE_CURRENT);
        remoteView.setOnClickPendingIntent(R.id.btn_prev_month, prevButtonPendingIntent);
        remoteView.setInt(R.id.btn_prev_month, "setBackgroundResource", m_ThemeManagerObject.getPrevButtonBgImage());

        // Open application on click of app widget
        Intent clickIntent = new Intent(context, AllPageViewActivity.class);
        PendingIntent clickPI = PendingIntent.getActivity(context, 0,clickIntent,PendingIntent.FLAG_UPDATE_CURRENT);
        remoteView.setOnClickPendingIntent(R.id.widget_empty_text, clickPI);
        remoteView.setOnClickPendingIntent(R.id.txt_date, clickPI); 

        appWidgetManager.updateAppWidget(appWidgetIds, remoteView); 
    }   

    @Override
    public void onReceive(Context context, Intent intent) 
    {           
        super.onReceive(context, intent);

        int numOfDays = 1;

        ComponentName thisWidget = new ComponentName(context, WidgetProvider.class);
        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
        int[] appWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);

        if (intent.getAction().equals(WIDGET_NEXT_BUTTON)) 
        {
            // Increase no of days by one
            m_NoteManagerObject.setWidgetDate(numOfDays);

            // Update remote view
            RemoteViews remoteView = new RemoteViews(context.getPackageName(), R.layout.widget_list);               
            remoteView.setTextViewText(R.id.txt_date, m_DateFormater.format(m_NoteManagerObject.getWidgetDate().getTime()));
            appWidgetManager.updateAppWidget(appWidgetIds, remoteView); 

            // Update list content of the widget
           // This will call onDataSetChanged() method of WidgetDisplay class
            appWidgetManager.notifyAppWidgetViewDataChanged(appWidgetIds, R.id.widget_list);
        }   
        else if (intent.getAction().equals(WIDGET_PREV_BUTTON)) 
        {
            // Decrease no of days by one
            m_NoteManagerObject.setWidgetDate(-numOfDays);  

            // Update remote view
            RemoteViews remoteView = new RemoteViews(context.getPackageName(), R.layout.widget_list);               
            remoteView.setTextViewText(R.id.txt_date, m_DateFormater.format(m_NoteManagerObject.getWidgetDate().getTime()));
            appWidgetManager.updateAppWidget(appWidgetIds, remoteView); 

            // Update list content of the widget
              // This will call onDataSetChanged() method of WidgetDisplay class
            appWidgetManager.notifyAppWidgetViewDataChanged(appWidgetIds, R.id.widget_list);
        }                   
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T11:17:57.610

您可以尝试在您的和待处理的意图中更改`PendingIntent.FLAG_UPDATE_CURRENT`to是否会有所帮助。`PendingIntent.FLAG_CANCEL_CURRENT``nextButtonPendingIntent``prevButtonPendingIntent`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T20:21:54.153

当您为每个小部件创建`PendingIntents`in`updateAppWidget`时，您将创建以下两个：

```
PendingIntent nextButtonPendingIntent = PendingIntent.getBroadcast(context, widgetId, nextButtonIntent, PendingIntent.FLAG_UPDATE_CURRENT);
PendingIntent prevButtonPendingIntent = PendingIntent.getBroadcast(context, widgetId, prevButtonIntent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

对于两者，您将第二个参数设置为`widgetId`. PendingIntent 系统不会查看`Intent`参数是否不同。（事实上​​，它绝对不应该这样做 - 否则您无法将现有的 PendingIntent 更新为新的 Intent。）这意味着`nextButtonPendingIntent`和`prevButtonPendingIntent`最终相同。

解决方案是将已知的、不同的数字放入该参数中，并将其他有用的信息（如小部件 ID）放入意图中：

```
nextButtonIntent.putExtra("widget_id", widgetId); 
```

并在`onReceive():`

```
int widgetId = intent.getIntExtra("widget_id"); 
```

# c# - 如何将字符串的第二次出现与正则表达式匹配？

> ID：15829739
> 
> 赞同：-1
> 
> 时间：2013-04-05T08:57:48.947
> 
> 标签：c#, regex

我有这样的网址

```
http://www.abc.com/h/x/y 
```

我想使用正则表达式从中解析“x/y”。我正在使用以下正则表达式

```
h/(?<Group>[\s\S]*?)\s*?/ 
```

但它只匹配“x”，但我想要“x/y”。我可以使用编程语言找到“/”的第二次出现，然后对其进行解析，但我只想从正则表达式中进行。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:32:27.533

我有一个更简单的解决方案。请进行 string.Length 验证检查，这是一个快速模型。

```
 string myString = @"http://www.microsoft.com/products/surface/order/pay.aspx";
    char charToFind = '/';
    int nthOccuranceToFind = 4;
    int startIndex = -1;
    int nthPosOfCharToFind = 0;

    while (nthOccuranceToFind > 0)
    {
        int findIndex = startIndex + 1;
        startIndex = myString.IndexOf(charToFind, findIndex);
        --nthOccuranceToFind;
    }

    //startIndex here will contain index of nth occurance. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:09:09.717

我不会使用正则表达式，而只是：

```
var url = "http://www.abc.com/h/x/y";
var ix1 = url.LastIndexOf('/');
var ix2 = url.LastIndexOf('/', ix1 - 1);
var part = url.Substring(ix2 + 1); 
```

这个是可以理解的，不需要解释复杂的正则表达式:)

（+ 验证它是否是一个有效的 url 可以在实际解析之前单独完成）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:24:42.063

最终的正则表达式最喜欢取决于您想要解析的有效 URL，例如是`h`常量还是也可以更改？

我可能会使用这样的东西：

```
http://(?:[a-z\d\-]+\.)*[a-z\d]+/h/(.*) 
```

*   与协议匹配的第一部分 ( `http://`) 相当明显。
*   `(?:[a-z\d\-]+\.)*`带有量词的非捕获组 ( )`*`将匹配 TLD 下的所有（子）域，包括最后一个`.`（如果有）。如果给出了 IP，这将包含 IP 的第一部分。
*   `[a-z\d]+`将匹配 TLD 或 - 对于 Intranet 内容 - 域名（如`localhost`）。如果给出了 IP，这将包含最后一个字节。
*   实际的捕获 Group( `(.*)`) 将简单地捕获`/h/`.

这种实现有两个缺点：

*   在当前状态下，不支持 IPv6 IP。也没有给出端口号或其他协议。这些将需要最小的调整，我相信您可以自己解决。
*   这仍然会解析无效的 URL，例如`http://--some-weird.--.com/h/1/2/3`.

# html - 如何悬停一个 div 并悬停一些元素？

> ID：15829740
> 
> 赞同：1
> 
> 时间：2013-04-05T08:57:51.427
> 
> 标签：html, css, parameters

我希望当鼠标停留在 上时`div` `hello`，带有类`nice_day`和图像的段落不会受到影响。

应该如何使用css3？

```
<div class="hello">
  <div class="stack"><img src="1.png"/></div>
  <div class="overflow"><p class="ilove"><img src="2.png"/>Im a text</p>
       <p class ="programming"Im other text</p>
         <div class="Have">
             <img src="3.png"/>
            <p class="nice_day"></p>
         </div>
  </div>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:02:56.247

## 选项 #1 - 选择性添加

这种方法着眼于`:hover`祖先的状态，只在需要的地方添加样式。

1.  简单：http: [//jsfiddle.net/gF7Ju/2/](http://jsfiddle.net/gF7Ju/2/)
2.  多个元素：http: [//jsfiddle.net/gF7Ju/3/](http://jsfiddle.net/gF7Ju/3/)

**CSS**

```
/* just for formatting so we can see the boxes */

.hello {
    border: 1px solid red;    
}

.hello > div {
    padding: 6px;
    border: 1px solid silver;
}

/* 

Selector(s) here to determine which element(s) should be impacted by the
parent's hover, and which should not.

*/

.hello:hover div:first-child {
    background-color: yellow;    
} 
```

**HTML**

```
<div class="hello">
    <div>Hover effect</div>
    <div>No hover effect</div>
</div> 
```

## 选项 #2 - 有选择地取消/忽略

根据悬停时应修改的属性，您可以将悬停样式应用于祖先，然后重新设置子项的样式（例如，设置`background-color`为白色，即使父项的悬停背景是黄色的）。

在可能的情况下，我更喜欢第一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:02:45.373

**如果**要在父元素悬停时保留子元素的样式，则需要*取消*父样式，如下所示

```
.hello{text-decoration: underline;}
.hello:hover img, .hello:hover .nice_day{text-decoration: none} 
```

请注意，我们正在`text-decoration: none`为子元素设置`img`；并以防它们在悬停`.nice_day`时加下划线。`.hello`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:04:17.503

您可以再次将默认 CSS 设置为`p.nice_day`：

```
div.hello:hover p.nice_day{
   //your default css of .nice_day
} 
```

# linux - 添加没有 crontab 的 cron 作业

> ID：15829744
> 
> 赞同：5
> 
> 时间：2013-04-05T08:58:03.823
> 
> 标签：linux, cron

是否可以在不使用 crontab 命令的情况下添加 cronjob？（或者除了直接编辑文件之外的任何其他内容。）我需要编辑文件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T09:21:53.420

您可以直接编辑以下文件：

```
/etc/crontab
/etc/cron.d/*
/etc/cron.{hourly,daily,weekly,monthly}/* 
```

这些是系统范围的文件。在这些文件中，您必须在要执行的命令之前指定用户名。

相反，每个用户的 crontab 存储在这里： `/var/spool/cron/<username>`

# magento - 获取自定义属性

> ID：15829745
> 
> 赞同：0
> 
> 时间：2013-04-05T08:58:04.967
> 
> 标签：magento

我想知道如何获得自定义属性，我尝试通过我的自定义属性调用“tim_color”`$_product->getAttributeText('tim_color');`

执行后出现致命错误调用非对象上的成员函数 getAttributeText() 时使用

`$data['color'] = $product->getTim_color();`

结果我得到了 id，但我需要属性的名称，我该如何解决这个问题

我的脚本代码：

```
$mage_csv = new Varien_File_Csv(); //mage CSV
$products_model = Mage::getModel('catalog/product')->getCollection();; //get products model
$products_model ->addAttributeToSelect('*');
$products_row = array();

foreach ($products_model as $prod)
{
    #print_r($prod);
    $product = Mage::getModel('catalog/product')->load($prod->getId());
    $data = array();
    $data['id_product'] = $product->getId();
    $data['color'] = $product->getTim_color();
    $data['sku'] = $product->getSku();
    $data['name'] = strip_tags($product->getName());
    $data['description'] = trim(preg_replace('/\s+/', ' ', strip_tags($product->getDescription())));
    $data['price'] = $product->getPrice();
    $products_row[] = $data;
} 
```

谢谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:21:06.707

尝试，

```
$_product->getData(’tim_color’); 
```

我希望你也能得到属性值`getAttributeText()`。查看，

```
$_product = Mage::getModel('catalog/product')->load($item->getId()); //getting product
$_product->getAttributeText('tim_color'); //getting custom attribute value 
```

详细讨论在[这里](http://www.magentocommerce.com/boards/viewthread/30879/)和[这里](http://www.magentocommerce.com/boards/viewthread/216409/)。

# ms-access - 如果没有匹配的记录，则 COUNT 计算为零

> ID：15829750
> 
> 赞同：0
> 
> 时间：2013-04-05T08:58:28.977
> 
> 标签：ms-access, ms-access-2007

采取以下措施：

```
SELECT 
    Count(a.record_id) AS newrecruits
    ,a.studyrecord_id
FROM 
    visits AS a 
INNER JOIN 
(
    SELECT 
        record_id
        , MAX(modtime) AS latest 
    FROM 
        visits 
    GROUP BY 
        record_id
)  AS b 
ON (a.record_id = b.record_id) AND (a.modtime = b.latest)
WHERE (((a.visit_type_id)=1))
GROUP BY a.studyrecord_id; 
```

`COUNT`如果没有记录，我想修改该部分以显示零，因为我假设`COUNT`将评估为`Null`.

我尝试了以下但仍然没有结果：

```
IIF(ISNULL(COUNT(a.record_id)),0,COUNT(a.record_id)) AS newrecruits 
```

这是一个问题，因为加入是打开的`record_id`吗？我尝试将其更改为`INNER`，`LEFT`但也没有收到任何结果。

**Q** 如果没有符合条件的记录，如何使上述评估为零？

**编辑：**

稍微详细说明一下推理。

研究表包含一个名为“original_recruits”的字段，该字段基于使用数据库之前的活动。

访问表跟踪 new_recruits（每项研究的记录计数）。

我将这些组合在另一个查询中（original_recruits + new_recruits）- 如果没有新招募人员，我仍然需要显示 original_recruits，因此如果没有记录，我需要将其评估为零而不是 null，因此最终总和仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:05:20.197

似乎您想按 StudyRecords 计算记录。
如果在没有记录时需要计数为零，则需要连接到名为 StudyRecords 的表。
你有吗？否则，当您没有行时要求行是无稽之谈！

假设 StudyRecords 存在，那么查询应该如下所示：

```
SELECT 
    Count(a.record_id) AS newrecruits -- a.record_id will be null if there is zero count for a studyrecord, else will contain the id
    sr.Id
FROM 
    visits AS a 
    INNER JOIN 
    (
        SELECT 
            record_id
            , MAX(modtime) AS latest 
        FROM 
            visits 
        GROUP BY 
            record_id
    )  AS b 
    ON (a.record_id = b.record_id) AND (a.modtime = b.latest)
    LEFT OUTER JOIN studyrecord sr
        ON sr.Id = a.studyrecord_id
WHERE a.visit_type_id = 1
GROUP BY sr.Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:01:43.360

我通过修改最终查询解决了这个问题，在该查询中我显示了将原始新兵和新兵相结合以包括`IIF`那里的结果。

```
SELECT
    a.*
    , IIF(IsNull([totalrecruits]),consents,totalrecruits)/a.target AS prog
    , IIf(IsNull([totalrecruits]),consents,totalrecruits) AS trecruits
FROM
    q_latest_studies AS a
LEFT JOIN q_totalrecruitment AS b
ON a.studyrecord_id=b.studyrecord_id
; 
```

# javascript - Jquery拖放：将元素从li更改为div并返回

> ID：15829754
> 
> 赞同：0
> 
> 时间：2013-04-05T08:58:47.753
> 
> 标签：javascript, jquery, jquery-ui, draggable, droppable

我正在尝试以下操作：

阶段1：

1.  在**#canvas**中拖放时将可拖动元素从**li**更改为**div**
***   **在#canvas**内移动可拖动元素**

 ****第 2 阶段：

1.  在**#imagelist**中拖放时将可拖动元素从**div**更改为**li**
***   **在#imagelist**中移动可拖动元素**

 ****JS：

```
$(function () {
    var $imagelist = $("#imagelist");
    var $canvas = $("#canvas");

    $('li', $imagelist).draggable();

    $canvas.droppable({
        drop: function (event, ui) {}
    });

    $imagelist.droppable({
        drop: function (event, ui) {}
    });
}); 
```

html:

```
<div id="listwrapper">
  <ul id="imagelist">
     <li class="draggable>Content that should not be lost on drag/drop</li>
     <li class=" draggable>Content that should not be lost on drag/drop</li>
  </ul>
</div>
<div id="canvas">
  <div class="draggable">Content that should not be lost on drag/drop</div>
</div> 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:05:48.577

您可以创建一个新函数来更改元素类型 - 这是我认为您需要的：

```
(function($) {
    $.fn.changeElementType = function(newType) {
        var attrs = {};

        $.each(this[0].attributes, function(idx, attr) {
            attrs[attr.nodeName] = attr.nodeValue;
        });

        this.replaceWith(function() {
            return $("<" + newType + "/>", attrs).append($(this).contents());
        });
    };
})(jQuery); 
```

[看这里](https://stackoverflow.com/questions/8584098/how-to-change-an-element-type-using-jquery)

[和这里](https://stackoverflow.com/questions/918792/use-jquery-to-change-an-html-tag)********

# javascript - 在googlep maps api v3中将地区，城市，州，国家转换为纬度和经度？

> ID：15829761
> 
> 赞同：1
> 
> 时间：2013-04-05T08:59:02.077
> 
> 标签：javascript, google-maps, google-maps-api-3

我需要使用 google maps api v3 获取由 areaname、cityname、statename 和 countryname 组成的字符串的纬度和经度......这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:00:48.657

这称为**[地理编码](https://developers.google.com/maps/documentation/geocoding/)**。

这是一个示例请求。您需要用逗号分隔您所在位置的 4 个部分：

```
http://maps.googleapis.com/maps/api/geocode/json?address=Kemp+Town,+Brighton,%20East%20Sussex,+UK&sensor=true 
```

# jquery - jQuery自定义主题？

> ID：15829765
> 
> 赞同：0
> 
> 时间：2013-04-05T08:59:10.317
> 
> 标签：jquery, css, jquery-ui

我有 2 个 jQuery 主题。自定义主题和带有范围侧边栏的主题。但现在我需要在侧边栏中混合两个主题？

例如：

```
<div class="sidebar">
    <div id="accordionwidget">
        <div id="datepicker">
        </div>
    </div>
</div> 
```

手风琴小部件和日期选择器都使用带有范围侧边栏的主题。但我喜欢为日期选择器使用自定义主题。

我是否需要复制自定义主题并将其范围设置为日期选择器？如果我这样做，我会将 CSS 文件加倍。或者我可以向日期选择器添加一个类来覆盖范围侧边栏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:48:54.247

这不是一个好的做法，但在某些情况下，`!important`在 CSS 中使用它可能是可以的。使用`!important`将覆盖任何预先存在的样式。

例子：

HTML：

```
<p class="blue">

</p> 
```

CSS：

```
p.blue{
    color: yellow; /* will get overridden */
}

.blue{
   color: blue !important;
} 
```

您可以在此处阅读有关[使用 !important的更多信息](http://css-tricks.com/when-using-important-is-the-right-choice/)

# javascript - 为 youtube 搜索生成一个 url

> ID：15829767
> 
> 赞同：2
> 
> 时间：2013-04-05T08:59:12.740
> 
> 标签：javascript, youtube

如何使用 javascript 或 php 为 youtube 生成一个 url，在特定用户帐户上搜索具有最佳标题匹配的视频？

我正在使用这段代码：

```
<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
</head>

<script type="text/javascript">
    function mysearch()
    {
        var elem=document.getElementById('inputsearchquery');
        var url="http://www.youtube.com/user/QueenVEVO/videos?query="+encodeURIComponent(elem.value);
        var win=window.open(url, '_blank');
        win.focus();
    }
</script>

<body>
    <h2>Enter search string (user: Queen)</h2>
    <input id="inputsearchquery" type="text" value="the show must go on">
    <button type="button" onclick="mysearch()">Search</button>
</body> 
```

唯一的问题是 youtube 没有将最佳标题匹配放在顶部！“节目必须继续”的视频排在第13位，我期待它在顶部？

谁能告诉我如何更改网址，以便 youtube 将最佳标题匹配放在顶部？还是我真的必须使用 youtube api 来完成这项任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:32:06.067

我不确定我是否理解您的问题，但您可以使用 GET 搜索。

像这样 [http://www.youtube.com/results?search_query=the+show+must+go+on&oq=the+show+must+go+on](http://www.youtube.com/results?search_query=the+show+must+go+on&oq=the+show+must+go+on)

“search_query”部分可能来自您网站的用户。您必须将其解析为 GET 语法并将其发送到 youtube。然后，您可以获取结果的来源并使用正则表达式搜索您的字符串，也许还有高视图计数或类似的东西。

但我相信学习 youtube api 会为你节省更多的时间和工作！

# ios - 在应用商店中创建指向应用的 iOS 链接 - 最好的方法？

> ID：15829768
> 
> 赞同：16
> 
> 时间：2013-04-05T08:59:14.607
> 
> 标签：ios, url, app-store, hyperlink

以下是我的要求：

`iPhone`

`iPad`

`iOS 5`

我做了一些挖掘并提出以下选项：

```
http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=487547243

http://itunes.apple.com/gb/app/anyValue/id487547243?mt=8

http://itunes.com/apps/seligmanVenturesLtd/mouseTrapFree

http://itunes.com/apps/mouseTrapFree

itms://itunes.com/apps/mouseTrapFree

itms-apps://itunes.com/apps/mouseTrapFree 
```

只是想知道其中一个（或一些）是否比其他更好？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-07T16:32:22.123

好的，所以已经做了很多研究/测试，这是我的结论：

1.  您在代码中使用的链接不应依赖于应用程序的“当前”名称，因为这可能会随着时间而改变（例如 Light Alarm Lite 与 Light Alarm Free）。因此，恕我直言，以下 4 个已出： http:
    [//itunes.com/apps/seligmanVenturesLtd/mouseTrapFree](http://itunes.com/apps/seligmanVenturesLtd/mouseTrapFree)
    [http://itunes.com/apps/mouseTrapFree](http://itunes.com/apps/mouseTrapFree)
    itms://itunes.com/apps/mouseTrapFree
    itms-apps://itunes .com/apps/mouseTrapFree

2.  剩下的是 iTunes 和 phobos URL。我刚刚通过 iOS 6 共享功能测试了这两个 URL（所以这在 iOS 5 上可能会有所不同，但给定的数字每天都在减少，因为我并不介意）。我测试了通过 SMS、电子邮件、Facebook、Twitter 访问（在 iPhone 5 上并使用 Mac）。

两种 url 类型产生的结果几乎相同，但以下情况除外：

**Phobos：** 例如[http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=346542660](http://phobos.apple.com/WebObjects/MZStore.woa/wa/viewSoftware?id=346542660) + 无 - 在 facebook 上分享这个链接创建了一个没有任何图像的 facebook 链接......这对我来说是最棒的这意味着我将继续使用 iTunes 网址（见下文）。

**iTunes** 例如[http://itunes.apple.com/gb/app/appName/id346542660?mt=8](http://itunes.apple.com/gb/app/appName/id346542660?mt=8) + 在 iphone 的“邮件”应用程序上打开链接时，应用程序商店在“邮件”应用程序中打开，底部没有出现任何标签，因此可以说这会增加对您的应用程序的关注 - 无

总之，我将继续使用 iTunes 类型的 url。例如：例如[http://itunes.apple.com/gb/app/appName/id346542660?mt=8](http://itunes.apple.com/gb/app/appName/id346542660?mt=8)
（注意：您不必在此 url 中规定 '/appName'，只需将其保留为 '/appName /' 工作正常，这意味着如果您的应用名称随时间变化，您不必担心。

干杯，查理

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-05T06:22:19.500

可以很容易地创建应用商店上应用的 URL/链接，但有几种方法可以实现最终结果。首先，我们需要明确链接的目的（例如，链接可能用于 Facebook 帖子或在应用程序内部用于敦促用户通过应用程序内的警报/按钮对应用程序进行评分）。我们可以将如何使用链接大致分为 3 类：

**1.**我们希望在 iOS（或 OS X）域之外公开使用该链接。意味着您可以使用此链接在您的 Facebook 墙上分享，或者您希望将链接嵌入到邮件中。我说在 iOS 域之外是因为您的朋友没有 iPhone（或任何其他 iOS 设备）或 MacBook，他们也可能使用从 Facebook 或他们的邮件应用程序/客户端单击该链接。
**2.**我们想使用iOS（或OS X）域内的链接。表示当我们确定我们的链接将被使用 iOS 或 OS X 的设备点击时。
**3.**我们希望将应用用户（已经是我们应用的用户）发送到应用商店中应用的特定部分（如评论部分） .

对于**第 1 类和第 2 类**，最好使用这种类型的 URL：
[https](https://itunes.apple.com/app/dots-a-game-about-connecting/id632285588?mt=8)
://itunes.apple.com/app/dots-a-game-about-connecting/id632285588?mt=8 当您嵌入此链接时，它可能会导致在几个结果中：

*   如果用户从 iPhone（从任何 iPhone 应用程序或 iPhone 上的邮件应用程序）单击此链接：您在 App Store 上的应用程序页面将直接打开
*   如果用户从任何 Android 手机或浏览器（Chrome/Safari/等）单击此链接：您在 itunes.apple.com 网站上的应用页面将在默认浏览器中打开。即使您在 MacBook 上打开它，它也不会打开 iTunes App Store，但会在浏览器本身中显示您的应用页面。

旁注：网络上有几个地方也建议使用下面提到的链接：http: [//appstore.com/dotsagameaboutconnecting](http://appstore.com/dotsagameaboutconnecting)
当您嵌入此链接时，可能会导致几种结果：

*   如果用户在 iPhone 或 MacBook 上点击此链接：您在 App Store 上的应用页面将直接打开。所以这个链接对 MacBook 用户来说更好一些，因为它将 MacBook 用户直接发送到 iTunes，而不是停留在 Safari 浏览器中。
*   如果用户从任何 Android 手机或浏览器（Chrome/Safari/etc.）单击此链接：如果用户从安装了 iTunes 的 PC 上单击，则此链接将在 iTunes 上打开您的应用程序（在 Android 设备和没有的 PC 上）没有 iTunes）它将打开一个 Apple.com 页面，显示“下载 iTunes”，而不会提及您的应用程序。该页面的屏幕截图如下：

![未安装 iTunes。 下载 iTunes。](https://i.stack.imgur.com/kIOZN.png)

因此，如果您不确定谁会点击您的链接（iOS 域外部/内部），或者如果您想更安全，那么我建议您采用第一种方法。阅读[此处](https://developer.apple.com/library/ios/qa/qa1633/_index.html)了解如何为您的应用创建特定链接。

对于**类别 3**，只需在某些功能/操作中使用以下代码：

```
NSString *myAppID = @"632285588";
NSString *url = [NSString stringWithFormat: @"itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=%@", myAppID];
//iOS7 doesn't approve above format so add iOS7 specific format
if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 7.0) {
    url = [NSString stringWithFormat: @"itms-apps://itunes.apple.com/app/id%@", myAppID];
}
[[UIApplication sharedApplication] openURL: [NSURL URLWithString: url]]; 
```

有关上述代码的详细信息，请参阅[此](https://stackoverflow.com/questions/3654144/direct-rate-in-itunes-link-in-my-app)答案。

对于正在开发第一版应用程序且应用程序仍未在应用商店发布的开发人员来说，如何为要发布的应用程序获取正确的链接总是很困惑。为此：从 iTunesConnect 获取您的应用 ID。使用 iTunesConnect 创建您的新应用程序 - 为其命名、描述、图标、屏幕截图等。在 iTunesConnect 上创建应用程序后（甚至无需提交应用程序），您可以从应用程序的标识符部分获取 Apple ID。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T09:02:45.260

您不应该对以下问题有任何问题：

`http://itunes.apple.com/gb/app/notebookpro/id<APP_ID>?mt=8`

我相信，它将在所有主要浏览器/操作系统上打开。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T09:12:58.827

我在我们的应用程序中使用了 itms-apps: 方法，它还允许您选择用户将登陆您的应用程序的哪个“部分”。

因此，如果您想向他们展示**评论**，这就是我使用的：`itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewContentsUserReviews?type=Purple+Software&id=XXXXXXX`

并**更新**到我们应用程序的最新版本：`itms-apps://ax.itunes.apple.com/WebObjects/MZStore.woa/wa/viewSoftwareUpdate?id=XXXXXXX&mt=8`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-23T05:23:05.737

[https://itunes.apple.com/app/id##app-id##?mt=8](https://itunes.apple.com/app/id##app-id##?mt=8)

替换`##app-id##`为真实的 app-id。

例如：

```
https://itunes.apple.com/app/id346542660?mt=8 
```

## 概括

1.  没有国家代码。前任：`gb`
2.  不`appName`，只有`app-id`。
3.  `https`协议。

# amazon-s3 - AWS EC2 上的 Hbase

> ID：15829769
> 
> 赞同：3
> 
> 时间：2013-04-05T08:59:19.687
> 
> 标签：amazon-s3, amazon-ec2, hbase

我打算托管一个网站并希望使用 HBase 作为我的数据库。该网站是一个照片共享/托管的东西，我不想使用任何 RDBMS。我想在托管、学习 HBase 以及 Web 开发人员和后端设计人员面临和解决的问题方面获得一些经验。

简而言之，我想在 Python + HBase 中创建和托管一个网站，以学习它们

我有使用 EC2 和 S3 的经验，我会使用 aws 作为基础架构。

我想保留的内容：

*   HBase 的 3 个默认 (1.7 G) 实例
*   如有必要，还有 3 个用于 webserver + memcached

我想弄清楚他们是否可以开始。当然，随着时间的推移，如果需要，我会进行基准测试、代码优化并购买更大的实例（如果我能负担得起的话）。

到目前为止，如果针对 1000 个用户，上述规格看起来还可以吗？

除了上传他们的照片外，用户还将查看照片或添加评论。假设一位用户平均每周上传 20 张照片。

我正在寻找类似这样的答案：“不，HBase 只能在一个中等大小的实例中运行 1000 个用户......”或者“天哪，只有 3 个默认服务器可供 1000 个用户使用......”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T21:42:10.137

总共 1000 个用户，还是 1000 个并发用户？您的设置应该适合总共 1000 个用户。

至于 EC2 上的 HBase：我强烈建议在 Elastic Map Reduce 上运行 HBase ( [http://aws.typepad.com/aws/2012/06/apache-hbase-on-emr.html](http://aws.typepad.com/aws/2012/06/apache-hbase-on-emr.html) )。这样做可以节省您配置自己的 EC2 集群的时间。相信我，我已经做到了这两种方式，不能足够推荐 EMR 方法。:)

# php - jQuery，ajax 多个复选框到 $_POST 数组

> ID：15829774
> 
> 赞同：0
> 
> 时间：2013-04-05T08:59:27.897
> 
> 标签：php, jquery, ajax, arrays, checkbox

我正在尝试将 $_POST 数据发送到另一个页面以添加简单购物车的会话。

我在 PHP while 循环中有多个表单，每个表单都有多个复选框，除了复选框之外，一切都有效。

我的问题是如何更改这段代码以将“item_extras”更改为数组？

> if(this.checked) item_extras = $(this).val();

我尝试了以下方法，但这只是创建了包含所有值的一行，而不是数组中的另一行。如果这太令人困惑，如果有帮助，我可以创建一个示例。

> if(this.checked) item_extras += $(this).val();

```
$('form[id^="add_item_form"]').on('submit', function(){
    //alert("On Click Works");
    event.preventDefault();
    addItem($(this));
});

function addItem(ele) {
    //alert("I'm in the addItem Function");
    var item_id = ele.parent().parent().find("input[name=item_id]").val(); // get item id
    var item_name = ele.parent().parent().find("input[name=item_name]").val(); // get item name
    var item_options = ele.parent().parent().find('#options').val(); // get selected option
    var item_extras = "";

    $item_extras = ele.parent().parent().find('input[name^="extra"]'); // find all extras

    $item_extras.each(function() {
        if(this.checked) item_extras = $(this).val(); // how do i make this into an array???
    });

    alert("BEFORE AJAX");

    var dataString = 'item_id=' + item_id + '&item_name=' + item_name + '&item_options=' + item_options + '&item_extras[]=' + item_extras;

    alert(dataString);

    $.ajax({
        type: "POST",
        cache: false,
        url: "includes/cart.php",
        data: dataString,
        success: function () {
            $.ajax({
                url: 'includes/cart.php',
                success: function(data) {
                $('#cart').html(data);
                alert("AJAX SUCCESS");
                }
            });
        }
    });

    return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:03:45.137

您可以使用序列化方法。 [Form.serialize()](http://api.jquery.com/serialize/)

```
$( "form" ).on( "submit", function( event ) {
  event.preventDefault();
   var data = $(this).serialize();
}); 
```

# php - Joomla：在自定义视图中保存表单时出错

> ID：15829776
> 
> 赞同：3
> 
> 时间：2013-04-05T08:59:32.623
> 
> 标签：php, model-view-controller, joomla, joomla3.0, joomla-component

我创建了一个带有表单的自定义组件来更新要在前端显示的四种产品的价格。

我的主要控制器代码在这里：

```
public function display($cachable = false, $urlparams = false) {

    require_once JPATH_COMPONENT.'/helpers/calculator.php';

    $view       = JFactory::getApplication()->input->getCmd('view', 'pricetable');
    $layout     = JFactory::getApplication()->input->getCmd('layout', 'edit');

    JFactory::getApplication()->input->set( 'layout', $layout );
    JFactory::getApplication()->input->set('view', $view);
    JFactory::getApplication()->input->set('id', 1);

    parent::display($cachable, $urlparams);
    return $this;
} 
```

id 设置为 1，因此它仅从数据库加载第一行。

价格表容器的代码是：

```
function __construct() {
    $this->view_list = 'pricetable';
    parent::__construct();
} 
```

现在在管理后端，表单会根据需要加载第一行数据。当我尝试保存它被重定向到的表单时`administrator/index.php?option=com_calculator&view=pricetable`，错误是：

> 错误：不允许您使用该链接直接访问该页面 (#1)。

我的表单操作是：

```
<?php echo JRoute::_('index.php?option=com_calculator&task=pricetable.edit&id='.(int) $this->item->id); ?> 
```

请建议我在哪里做错了。这是第三天，我在挠头。:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T11:24:54.310

您可以随时在代码中更新操作（或调用它们）。新实例或更新新实例 - 只需`if`在代码中再添加一个并`hidden`在表单上输入。例如：

`<input type="hidden" name="task" value="update" />`

# javascript - 无法在 IE9 中设置 cookie

> ID：15829778
> 
> 赞同：0
> 
> 时间：2013-04-05T08:59:44.520
> 
> 标签：javascript, cookies

我正在使用以下代码：

```
<script>
    var time = new Date();

    time.setFullYear(time.getFullYear() + 1, time.getMonth(), time.getDay());

    expires = ";expires=" + time.toGMTString();

    document.write(expires);

    document.cookie = "aardvark=cats; expires= " + time +"; path=/";

    document.write('\ndone: ' + document.cookie);
</script> 
```

我已将其放入一个 html 文件并在本地运行，还尝试在 JSFiddle 上运行它，并尝试将其上传到我的站点并在我的浏览器中访问它。

在 Internet Explorer 9 中，我的计算机上没有创建任何 cookie。有什么想法为什么不呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:14:58.843

查看您的代码时，很可能是在 DOM 完全加载后执行此代码段。加载 dom 会隐式关闭文档，而`document.write`需要打开文档。如果不是以下三种情况之一：

*   最好的情况：什么也没发生，什么也没写
*   更糟糕的是：创建了一个新页面
*   最糟糕，也是最常见的：现有文档被覆盖

检查这个问题，为什么`document.write`：不被使用[为什么 document.write 被认为是“不好的做法”？](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice)

正如已接受的链接问题的分析器还提到（并且因为这也为 OP 修复了问题）调用`document.write`XHTML dom 根本不起作用。现在可能 FF/Chrome/Chromium/Safari/Opera 都默认将 DOM 渲染为 HTML5。IE9 可能会选择 XHTML 过渡或其他东西......显式设置 doctype 似乎是操作的修复，所以我猜`<!DOCTYPE html>`是什么诀窍

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:28:22.077

我现在已经修好了。需要设置 DOCTYPE。

我认为 cookie 永远存在并且可以使用默认的 DOCTYPE 工作，但事实并非如此。

# java - jquery验证功能后触发jsf ajax

> ID：15829780
> 
> 赞同：0
> 
> 时间：2013-04-05T08:59:46.230
> 
> 标签：java, javascript, jquery, ajax, jsf

我在 JSF ajax 请求和 jQuery Event 中遇到问题。

我正在使用 jQuery 事件来验证这样的表单部分：

```
 jQuery(".btnNextStep").live("click", function(e) {
    var error = !validate(id);
            ...
    return error; 
```

在同一个按钮下，我有一个 Ajax 事件：

```
<h:commandButton type="button" value="Etape suivante" class="btn btn-large btn-primary btnNextStep" id="btnFormIdentite">
<f:ajax execute="identite" render="@none" />
</h:commandButton> 
```

问题是即使 jQuery 事件返回 false ，也会提交 ajax 请求！

我该怎么做才能在 jquery 验证功能之后发送请求？

我已经尝试过 onEvent ，`f:ajax`但似乎无法在 jQuery 命名空间内调用函数：

```
 (jQuery(document).ready( function() {...) 
```

我希望你能理解我的问题。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:18:54.800

尝试像这样定义您的验证功能：

```
function vlidateNextStep() {
    var error = false;
    error = !validate(id);
            ...
    return error;
} 
```

并在点击时使用：

```
<h:commandButton type="button" value="Etape suivante" class="btn btn-large btn-primary btnNextStep" id="btnFormIdentite" onClick="return vlidateNextStep();">
    <f:ajax execute="identite" render="@none" />
</h:commandButton> 
```

# python - 如何在pyqt的QLineEdit中限制用户输入

> ID：15829782
> 
> 赞同：22
> 
> 时间：2013-04-05T08:59:46.897
> 
> 标签：python, pyqt4, qlineedit

我有一个`QLineEdit`并且我想限制`QLineEdit`只接受整数。它应该像输入掩码一样工作。但我不想使用`inputmask`，因为如果用户单击`QLineEdit`光标将位于单击鼠标的位置。用户需要导航到 0 位置并输入他想要的内容。

有没有替代品。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2017-06-25T20:02:30.467

您可以使用 QValidator 它的工作原理如下：

```
#To allow only int
self.onlyInt = QIntValidator()
self.LineEdit.setValidator(self.onlyInt) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-05T15:10:29.587

您可以使用异常处理来验证这一点：

```
number = self.ui.number_lineEdit.text()
try:
    number = int(number)
except Exception:
    QtGui.QMessageBox.about(self, 'Error','Input can only be a number')
    pass 
```

您还可以使用[验证器](http://pyqt.sourceforge.net/Docs/PyQt4/qvalidator.html)来验证输入字符串。

# c# - 仅在使用 installshield 安装应用程序时执行代码

> ID：15829789
> 
> 赞同：3
> 
> 时间：2013-04-05T09:00:18.907
> 
> 标签：c#, registry, installshield

我只是想知道在安装应用程序时是否可以只运行一次小代码。

我想用安装路径创建一个注册表。我之所以需要它，是因为我的应用程序中也有一个 Windows 服务，它的安装路径总是更改为 system32。

我有一个 ini 文件，它是在安装时在安装文件夹中创建的。我还需要使用我的服务和 Windows 表单来访问该文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T07:00:57.440

You don't need any extra code, just create a registry key in HKLM\software\yoursoftware-here with a key name like Installpath and a value of [INSTALLDIR] in your install, then reference that key in your service.

This assumes you are using a basic MSI project in install shield.

# java - 休眠是否检查列的长度？

> ID：15829790
> 
> 赞同：1
> 
> 时间：2013-04-05T09:00:22.983
> 
> 标签：java, hibernate, size, hbmxml

我只能访问 db 和只读访问 hbm.xml 文件。需要增加列大小。我在此表的 hbm.xml 文件中的表/列定义中看到没有属性长度。在这种情况下，应用程序是否应该使用增加的列大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:02:35.750

是的，它会。Hibernate 不关心列的长度。

你为什么不简单地测试一下？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T09:04:47.693

Hibernate 不限制其属性的长度，它是在数据库级别设置的限制。

通常，DB 会为相关字段分配足够的长度。

既然你说你只有读取权限，我认为它无论如何都不相关......

# android - 谷歌云消息传递 apache tomcat 不工作

> ID：15829791
> 
> 赞同：0
> 
> 时间：2013-04-05T09:00:23.643
> 
> 标签：android, apache, web-applications, tomcat6, google-cloud-messaging

我正在我的应用程序中制作 GCM 服务，并遵循本教程

[http://lalit3686.blogspot.in/2012/07/android-steps-to-run-gcm-demo.html](http://lalit3686.blogspot.in/2012/07/android-steps-to-run-gcm-demo.html)

但在第 8 步，我得到了在此服务器上找不到请求的 URL /gcm-demo。”在提供的 URL localhost/gcm-demo 上

我搜索了很多无法弄清楚是什么问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:02:43.510

默认为 8080 端口，您是否尝试过使用以下 URL：

```
http://localhost:8080/gcm-demo 
```

# html - 使用带有无序列表的 z-index 的 Css

> ID：15829794
> 
> 赞同：2
> 
> 时间：2013-04-05T09:00:27.697
> 
> 标签：html, css, html-lists

美好的一天
，我有这个例子：

[http://jsfiddle.net/xARSw/](http://jsfiddle.net/xARSw/)

```
<ul>
    <li id="li1">li 1</li>
    <li id="li2">li 2</li>
    <li id="li3">li 3</li>
</ul> 
```

和 CSS：

```
li {
    border:solid 1px red;
    float:left;
    width:150px;
    height:150px;
    -webkit-border-top-left-radius: 50px;
    -webkit-border-top-right-radius: 50px;
    -moz-border-radius-topleft: 50px;
    -moz-border-radius-topright: 50px;
    border-top-left-radius: 50px;
    border-top-right-radius: 50px;
    text-align:center;
    list-style: none;
}
#li1 {
    background:#282828;
}
#li2 {
    margin-left:-15px;
    background:#888888;
}
#li3 {
    margin-left:-15px;
    background:#B8B8B8;
} 
```

我想做的是在`li2`后面`li1`和`li3`后面显示`li2`。

我试图使用`z-index`但没有得到任何结果。有什么帮助或建议吗？问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:06:02.837

z-index 仅在元素定位为绝对或相对时才有效，例如：`http://jsfiddle.net/xARSw/3/`

我已设置`position: relative;`所有列表项并将 z-index 设置为 2，然后将第二个元素的 z-index 更改为 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:05:39.620

```
#li1,
#li2,
#li3
{

    position:relative;
}

#li1
{
    z-index:100;
}

#li2 
{

    z-index:90;
}

#li3 
{

    z-index:80;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:10:26.640

你肯定需要绝对或相对位置，然后倒计时

```
li {
  position:relative;
}
#li1 {
   z-index:3;
}
#li2 {
    margin-left:-15px;
    z-index:2;
}
#li3 {
    margin-left:-15px;
    z-index:1;
} 
```

# android - Android Java 代码：将列值转换为行？

> ID：15829796
> 
> 赞同：0
> 
> 时间：2013-04-05T09:00:30.983
> 
> 标签：android

我在sqlite中有一个表值，例如..

```
101 Local Local Local   Local   Local   Local
102 9     12    9       12      9       9
  1 3:55    4:20    4:40    5:00    5:20    5:40
 18 4:50    5:15    5:35    5:55    6:15    6:35 
```

上面的值我需要存储在
ArrayList> listData = new ArrayList>(); 或其他一些数组

```
 Local  9   3:55    4:50
 Local  12  4:20    5:15
 Local  9   4:40    5:35
 Local  12  5:00    5:55
 Local  9   5:20    6:15
 Local  9   5:40    6:35 
```

请帮我找到:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:15:17.707

我认为最好的方法是为您的表实体创建一个域/容器对象。

```
public class TableEntity {
  private int col1;
  private String col2;
  private String col3;

  // generate getters and setters...
} 
```

然后通过读取 sqlite 表的值创建新对象并返回 ArrayList：

```
ArrayList<TableEntity> lAllTableEntitys = new ArrayList<TableEntity>();
while(cursor.moveToNext()){
TableEntity tableEntity = new TableEntity();
tableEntity.setCol1(cursor.getString(cursor.getColumnIndex("col1")));
tableEntity.setCol2(cursor.getString(cursor.getColumnIndex("col2")));
tableEntity.setCol3(cursor.getString(cursor.getColumnIndex("col3")));
lAllTableEntitys.add(tableEntity);
}
return lAllTableEntitys; 
```

之后，您可以轻松阅读

```
tableEntity.getCol1();
tableEntity.getCol2();
tableEntity.getCol3(); 
```

# sql-server - 为 Windows 用户创建 SQL 登录

> ID：15829797
> 
> 赞同：0
> 
> 时间：2013-04-05T09:00:34.067
> 
> 标签：sql-server, authentication

我有一个通过网络连接到 SQL Server 的 .Net 应用程序。用户以 Windows 用户身份登录。SQL Server 仅设置为 Windows 身份验证。在客户端计算机上，尚未在 SQL Server 上将用户创建为登录名。在应用程序第一次启动时，应用程序需要检查 windows 用户是否是 sql server 登录名，如果不是，则登录名必须由 .net 应用程序创建。

我的问题是我使用哪个用户登录到 SQL Server 以检查登录是否存在。显然它不能是当前的 windows 用户，因为这个用户必须首先创建并且在第一次运行时在 sql server 上不存在。

我已经知道一旦建立连接后如何继续操作，并且需要在 Windows 用户不存在作为 SQL Server 上的登录名时使用正确登录名的帮助。请记住，服务器仅为 Windows 身份验证设置。

所有这些都必须通过 .net 代码（vb 或 c#）来完成。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:24:25.827

我不完全理解您的问题，但根据我认为您要问的问题来回答：

由于您使用的是仅 Windows 身份验证，因此您需要在 Windows 中以管理员身份登录。一旦您以管理员身份登录，Windows 将识别并为您提供所有身份验证权限，因此当您进入 SQL 服务器时，这些权限将自动传递，允许您创建新用户权限并授予访问权限等...

让我知道这是否正确回答了您的问题。

# c - Shellcode：执行 2 次 execve() 调用

> ID：15829803
> 
> 赞同：2
> 
> 时间：2013-04-05T09:00:54.017
> 
> 标签：c, assembly, buffer-overflow, shellcode, execve

我正在尝试在汇编中编写 shellcode。我需要执行一个`/usr/bin/killall`命令和一个`/usr/bin/wget`命令。我有两个命令在`execve()`系统调用的 shellcode 中完美运行。但是现在我想将这两个结合起来，但是这是不可能的，因为程序在`execve()`执行第一次调用时就退出了。（来自`execve()`:的手册页`execve()`不会返回成功）。

如何进行 2 次`execve()`通话？还是有另一种方法可以从同一个 shell 代码`/usr/bin/killall`中调用两者？`/usr/bin/wget`

提前问候和感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:18:54.343

当您使用 exec 系列函数时，您调用它的程序将被替换到当前进程中。因此，当进行第一次 execve 调用时，您的整个过程映像就会消失，因此永远不会进行第二次调用。要解决这个问题，您必须在调用 execve 之前分叉另一个进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:22:22.897

首先，不能`execve()`一个接一个地执行两个。仅仅是因为，根据定义，`execve()`调用将用新进程覆盖原始进程的内存，您将永远无法再次切换回原始进程。

如果命令没有杀死执行 shellcode 本身的进程，那么您建议的第二个选项（合并`/usr/bin/killall`并`/usr/bin/wget`进入 shellcode）是完全可能的。`killall`如果是这样的话，我真的需要更多关于为什么需要这种行为的信息，因为这对我来说似乎有点荒谬（但我肯定会错过你运行 shellcode 的上下文）。

# r - R中有快捷方式/别名/指针的概念吗？

> ID：15829805
> 
> 赞同：5
> 
> 时间：2013-04-05T09:00:56.290
> 
> 标签：r

我正在研究 R 中的一个相当大的数据集，该数据集分为几个数据帧。

问题是我用整个集合做一些事情，有时我只需要使用或修改集合的一部分并且我的选择器变得非常笨重，fe

```
aListOfItems$attribute4([aListOfItems$attribute1 == true & aListOfItems$attribute2 == 6
& aListOfItems$attribute3 == "C"),] <- aListOfItems([aListOfItems$attribute1 == true &   
aListOfItems$attribute2 == 6 & aListOfItems$attribute3 == "C"),aListOfItems$attribute5]
* aListOfItems([aListOfItems$attribute1 == true & aListOfItems$attribute2 == 6 &
aListOfItems$attribute3 == "C"),aListOfItems$attribute7] 
```

*（这会将所有条目的选定*部分的属性 4 设置为 (attribute5 * attribute6) 。）

这很难阅读、理解和编辑。

由于 RAM 的原因，将它们拆分为不同的数据帧并不是一个真正的选择，因为我会定期刷新这些数据并重建所有单独的数据帧也会很痛苦。

那么，有没有办法做类似的事情

```
items_t6C <- &(aListOfItems([aListOfItems$attribute1 == true & aListOfItems$attribute2
 == 6 & aListOfItems$attribute3 == "C"),] 
```

所以我可以使用

```
items_t6C$attribute4 <- # do something 
```

或者，也许可以将这样的选择器存储在字符串变量中并使用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T09:19:54.347

您可以首先构造一个逻辑向量，给它一个有意义的名称，然后在命令中使用它。它使您的脚本更长一点，但更容易阅读：

```
interesting_bit = with(aListOfItems, attribute1 &   
                                     attribute2 == 6 & 
                                     attribute3 == "C") 
```

此外，使用一点缩进也使代码更具可读性。

```
aListOfItems$attribute4[interesting_bit,] <- 
     aListOfItems[interesting_bit,aListOfItems$attribute5]
   * aListOfItems[interesting_bit,aListOfItems$attribute7] 
```

并且 using`within`在可读性方面做得更多：

```
aListOfItems[interesting_bit,] = within(aListOfItems[interesting_bit,], {
      attribute4 = attribute5 * attribute7
   } 
```

此外，对于逻辑，无需显式测试`== true`：

```
interesting_bit = aListOfItems$attribute1 &   
         aListOfItems$attribute2 == 6 & aListOfItems$attribute3 == "C" 
```

这最终减少了这一点：

```
aListOfItems$attribute4([aListOfItems$attribute1 == true & aListOfItems$attribute2 == 6
& aListOfItems$attribute3 == "C"),] <- aListOfItems([aListOfItems$attribute1 == true &   
aListOfItems$attribute2 == 6 & aListOfItems$attribute3 == "C"),aListOfItems$attribute5]
* aListOfItems([aListOfItems$attribute1 == true & aListOfItems$attribute2 == 6 &
aListOfItems$attribute3 == "C"),aListOfItems$attribute7] 
```

对此（注意额外使用`with`）：

```
interesting_bit = with(aListOfItems, attribute1 &   
                                     attribute2 == 6 & 
                                     attribute3 == "C")
aListOfItems[interesting_bit,] = within(aListOfItems[interesting_bit,], {
      attribute4 = attribute5 * attribute7
   } 
```

这段代码不仅看起来不那么令人生畏，而且还能立即传达出你在做什么，这很难从你的原始代码中推断出来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T20:43:49.153

该`data.table`软件包可能对您有用。

`data.table`主要通过参考工作。特别是在分配和修改列时。尤其是当您达到 RAM 限制时，data.table 的效率非常显着

此外，data.table 已内置到`with` `within` `by` `subset`etc 的功能中，使调用更短，代码更易读。

例如，上面的繁琐语句可以简化为：

```
aDTofItems[attribute1 & attribute2==6 & attribute3=="C", # filter
           attribute4 := attribute5 * attribute6]        # assign 
```

此外，如果您要过滤的属性是`key`表的属性，那么该行会更短：

```
aDTofItems[.(TRUE, 6, "C"),     # filter
           attribute4 := attribute5 * attribute6]   # assign 
```

假设每个元素的结构是可比较的，您可以将列表强制转换为 data.table 使用

```
aDTofItems <- rbindlist(aListOfItems)
# note, if you have factors in your list you should convert them to character before calling rbindlist

# or similarly, although a bit slower 
aDTofItems <- data.table(do.call(rbind, aListOfItems)) 
```

# http - 将 Netty 4 HTTP 文件服务器示例更改为使用 ChunkedStream 而不是 ChunkedFile

> ID：15829810
> 
> 赞同：2
> 
> 时间：2013-04-05T09:01:44.367
> 
> 标签：http, netty, chunked-encoding, http-chunked

当总数据大小未知时，我试图围绕 Netty 4 实现 HTTP 服务器的方式来使用分块传输编码服务 HttpResponses 主体。

作为一个起点，我只是更改了 HttpStaticFileServerHandler（在[https://github.com/netty/netty/tree/netty-4.0.0.CR1/example/src/main/java/io/netty/example/http中找到/file](https://github.com/netty/netty/tree/netty-4.0.0.CR1/example/src/main/java/io/netty/example/http/file)）使用 ChunkedStream 而不是 ChunkedFile（它们都是 ChunkedByteInputs）。

我知道在原始示例用例中使用 FileInputStream 并不理想，但我认为它是重用已知代码的一个很好的示例。

因此，这里是与 io.netty.example.http.file 包中的 HttpStaticFileServerHandler 类的差异（与 4.0.0.CR1 相比）：

```
diff --git a/example/src/main/java/io/netty/example/http/file/HttpStaticFileServerHandler.java b/example/src/main/java/io/netty/example/http/file/HttpStaticFileServerHandler.java
index 904579b..0d3592f 100644
--- a/example/src/main/java/io/netty/example/http/file/HttpStaticFileServerHandler.java
+++ b/example/src/main/java/io/netty/example/http/file/HttpStaticFileServerHandler.java
@@ -27,13 +27,14 @@ import io.netty.handler.codec.http.FullHttpResponse;
 import io.netty.handler.codec.http.HttpHeaders;
 import io.netty.handler.codec.http.HttpResponse;
 import io.netty.handler.codec.http.HttpResponseStatus;
-import io.netty.handler.stream.ChunkedFile;
+import io.netty.handler.stream.ChunkedStream;
 import io.netty.util.CharsetUtil;

 import javax.activation.MimetypesFileTypeMap;
 import java.io.File;
+import java.io.FileInputStream;
 import java.io.FileNotFoundException;
-import java.io.RandomAccessFile;
+import java.io.InputStream;
 import java.io.UnsupportedEncodingException;
 import java.net.URLDecoder;
 import java.text.SimpleDateFormat;
@@ -159,17 +160,15 @@ public class HttpStaticFileServerHandler extends ChannelInboundMessageHandlerAda
             }
         }

-        RandomAccessFile raf;
+        InputStream raf; // Use an InputStream instead of a RandomAccessFile
         try {
-            raf = new RandomAccessFile(file, "r");
+            raf = new FileInputStream(file);
         } catch (FileNotFoundException fnfe) {
             sendError(ctx, NOT_FOUND);
             return;
         }
-        long fileLength = raf.length();

         HttpResponse response = new DefaultHttpResponse(HTTP_1_1, OK);
-        setContentLength(response, fileLength);
         setContentTypeHeader(response, file);
         setDateAndCacheHeaders(response, file);
         if (isKeepAlive(request)) {
@@ -180,7 +179,7 @@ public class HttpStaticFileServerHandler extends ChannelInboundMessageHandlerAda
         ctx.write(response);

         // Write the content.
-        ChannelFuture writeFuture = ctx.write(new ChunkedFile(raf, 0, fileLength, 8192));
+        ChannelFuture writeFuture = ctx.write(new ChunkedStream(raf)); // Use a ChunkedStream instead of a ChunkedFile

         // Decide whether to close the connection or not.
         if (!isKeepAlive(request)) { 
```

这里是完整的更改文件：[https ://gist.github.com/eskatos/5311587](https://gist.github.com/eskatos/5311587)

变化很小：使用 FileInputStream 代替 RandomAccessFile 和 ChunkedStream 代替 ChunkedFile。管道未受影响。

要重现，只需将更改应用到 Netty 示例，运行它并尝试下载任何文件。

在此更改之后，目录列表显然有效，因为响应没有分块，但文件下载却没有。客户端下载文件但从未完成下载，保持连接并永远等待。我已经尝试了从浏览器到 curl、wget 等的几种方法。我还尝试将 ByteLoggingHandler 添加到管道中，我可以看到一个空的尾随块，所以我不明白为什么浏览器仍在等待数据。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T02:49:08.957

如果你不指定`Content-Length`header，客户端不知道你发送的内容的长度，因此它会一直等到服务器关闭连接，直到断开连接之前收到的所有内容都被认为是内容。

因此，您必须执行以下操作之一：

1.  添加`Content-Length`标题
2.  发送内容后关闭连接
3.  `Transfer-Encoding: chunked`使用带有标头的分块编码发送内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T22:08:37.003

为了终止未知大小的分块传输（内容长度未知，因此未指定），您只需发送一个空块作为最后一个块。这允许保持连接打开以支持keepalive：

```
 ctx.write(new ChunkedInputAdapter(new ChunkedStream(raf, 8192)));
        ChannelFuture writeFuture = ctx.writeAndFlush(LastHttpContent.EMPTY_LAST_CONTENT); 
```

这是一个完整的例子： [https ://github.com/scireum/sirius/blob/develop/web/src/sirius/web/http/Response.java#L649](https://github.com/scireum/sirius/blob/develop/web/src/sirius/web/http/Response.java#L649)

# javascript - JS Facebook API 请求似乎中断了会话

> ID：15829811
> 
> 赞同：3
> 
> 时间：2013-04-05T09:01:45.507
> 
> 标签：javascript, facebook, firefox, firefox-addon, facebook-apps

我有一个通过 XMLHttpRequest 请求不同 API 的 Firefox 扩展。但是，Facebook 的点赞/分享/评论计数请求会导致在某些在线商店和某些网站中注销。

例如，GMX webmail 必须在每次点击后恢复会话。一些网上商店似乎完全松开了会话，以至于有一个空篮子。

该问题仅在启用 facebook 请求时发生。

**请求网址**

```
http://api.facebook.com/method/fql.query?query=SELECT%20normalized_url,%20share_count,%20like_count,%20comment_count,%20click_count,%20total_count%20FROM%20link_stat%20WHERE%20url=%22www.heise.de%22&format=JSON 
```

**请求的 Javascript 代码**

```
 var querystring = facebookURL + encodedUrl + facebookURLParams; // looks like the above
        var mFacebookRequest = new XMLHttpRequest();
        mFacebookRequest.onload = parseFacebookResponse;
        mFacebookRequest.open( "GET", querystring );
// already tried without user-agent
        mFacebookRequest.setRequestHeader( "User-Agent", "Mozilla/4.0 (compatible; GoogleToolbar 2.0.114-big; Windows XP 5.1)" ); 
```

**parseFacebookResponse 函数**

```
 function parseFacebookResponse() {
                var fbcount = "-";
                var share_count = 0;
                var like_count = 0;
                var comment_count = 0;

                var aDoc = mFacebookRequest.responseText;
                if( aDoc == null || aDoc == -1 || aDoc.length == 0 )
                {

                } else {

                    var jsonDoc = JSON.parse( aDoc );
                    var temp = jsonDoc[0];

                    share_count     = parseInt(temp['share_count']);
                    like_count      = parseInt(temp['like_count']);
                    comment_count   = parseInt(temp['comment_count']);

                } 
```

**代码运行良好，并且显示了数字。但它让我退出。任何想法？！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T20:37:36.900

您正在发出跨域 XML HTTP 请求。再加上 GMX 网站设置了一个立即过期的会话 cookie 的可能性——您的会话被终止。这只是一个假设。

# google-app-engine - 如何及时扇出 URL Fetch 请求？

> ID：15829813
> 
> 赞同：1
> 
> 时间：2013-04-05T09:01:51.170
> 
> 标签：google-app-engine

我的应用程序每分钟左右都会创建一些数据，并且需要通过 URL Fetch 回调将其发送到 1000 多个远程服务器。每个服务器的回调 URL 存储在单独的实体上。创建数据和将其发送到远程服务器之间的时间延迟应该大约小于 5 秒。

我最初的想法是使用 Pipeline API 将 URL Fetch 请求扇出到不同的任务队列。

不幸的是，任务队列不能保证及时执行。因此，从请求任务队列开始到实际执行可能需要几分钟到几小时。根据以前的经验，这个差距通常超过一分钟，因此不一定合适。

App Engine 内部有什么方法可以实现我想要的吗？也许您知道可以及时进行扇出的外部服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:28:27.170

好吧，这里的 gae 可能没有好的解决方案。您可以保持后端运行；每秒敲击数据存储/内存缓存以发送新数据，然后产生数十个异步 url-fetches。但这确实效率低下...

如果您想要第 3 方服务，pubnub.com 可以进行扇出，但我不知道它是否适合您的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:41:50.277

使用异步 API 怎么样？然后，您可以在一个位置同时进行大量 URL 调用。

如果性能特别敏感，您可以从后端执行它们并使用 B8 实例。

# python - Django XML 无法加载外部实体

> ID：15829814
> 
> 赞同：1
> 
> 时间：2013-04-05T09:01:57.483
> 
> 标签：python, django

我收到一个名为 xml 的参数，其中包含一个 xml 文档。这是我尝试过的......

```
from lxml.cssselect import CSSSelector, etree
from lxml.etree import fromstring

if request.POST:

    parser = etree.XMLParser(ns_clean=True, recover=True)
    h = etree.parse(request.POST['xml'], parser)

    return HttpResponse(h) 
```

但我收到此错误：

```
[Fri Apr 05 09:50:13 2013] [error] IOError: Error reading file '<?xml version="1.0" encoding="ISO-8859-1"?>
[Fri Apr 05 09:50:13 2013] [error] <delivery_receipt>
[Fri Apr 05 09:50:13 2013] [error]     <version>1.1</version>
[Fri Apr 05 09:50:13 2013] [error]     <msisdn>447777111111</msisdn>
[Fri Apr 05 09:50:13 2013] [error]     <submission_ref>12345678901234567890123456789012</submission_ref>
[Fri Apr 05 09:50:13 2013] [error]     <status>Delivered</status>
[Fri Apr 05 09:50:13 2013] [error]     <reason>4</reason>
[Fri Apr 05 09:50:13 2013] [error]     <gmt_timestamp>20130405095100</gmt_timestamp>
[Fri Apr 05 09:50:13 2013] [error]     <retry>0</retry>
[Fri Apr 05 09:50:13 2013] [error] </delivery_receipt>': failed to load external entity "<?xml version="1.0" encoding="ISO-8859-1"?>
[Fri Apr 05 09:50:13 2013] [error] <delivery_receipt>
[Fri Apr 05 09:50:13 2013] [error]     <version>1.1</version>
[Fri Apr 05 09:50:13 2013] [error]     <msisdn>447777111111</msisdn>
[Fri Apr 05 09:50:13 2013] [error]     <submission_ref>12345678901234567890123456789012</submission_ref> 
```

ETC

有任何想法吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:08:37.430

`request.POST`默认情况下返回 unicode 字符串。您遇到的下一个问题与您提供的编码与您提供的文档中声明的编码不匹配有关。

```
doc = request.POST.get('xml','')
if not doc:
  raise Exception()
h = etree.XML(doc.encode('ascii'), parser) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:08:43.460

`etree.parse`需要一个文件名（或文件对象）。没有文件名为`<all your xml>`.

您需要将 XML 提供给解析器：

```
from lxml.cssselect import CSSSelector, etree
from lxml.etree import fromstring

if request.POST:

    parser = etree.XMLParser(ns_clean=True, recover=True)
    parser.feed(request.POST['xml'])
    h = parser.close()
    ... 
```

或使用`fromstring`或`XML`功能。

```
h = fromstring(request.POST['xml'], parser=parser) 
```

或者

```
h = etree.XML(request.POST['xml'], parser=parser) 
```

[lxml.etree 教程](http://lxml.de/tutorial.html#parsing-from-strings-and-files)

# javascript - 输入的数据改变字符串长度

> ID：15829815
> 
> 赞同：0
> 
> 时间：2013-04-05T09:02:09.663
> 
> 标签：javascript, string, function, alter

我是 JavaScript 新手，我一直在做一些工作，用 HTML 和 JavaScript 创建表单。在这项工作中，我一直试图根据输入到前一个字段中的文本来限制字段的字符串。

我一直在尝试的是，如果在“国家”文本框中输入“澳大利亚”国家，而不是“邮政编码”文本框仅限于 4 个数字（澳大利亚邮政编码标准）

到目前为止，我已经完成了这么多的功能：

```
document.getElementById('txtcountry').onblur = function postcode()
{
var country = document.getElementById('txtcountry').value;
if (country == "Australia" || category == "australia")
{
    document.getElementById('txtpostcode').maxLength = 4;
    }
    else
{
    document.getElementById('txtpostcode').maxLength = 9;
}
} 
```

这是我必须使用该函数的初始 HTML 片段：

```
<b>Postcode:</b> <input type="text" id="txtpostcode" name="postcode">
<br>
<b>Country:</b> <input type="text" id="txtcountry" name="country"> 
```

我正在使用以下方法调用该函数：

```
<form name="rego" action="submit.htm" onsubmit="return !!(validateText() & validateCheckBoxes(this) & validateRadioButton() & validateEmail() & populateInstitution() & postcode());" method="POST"> 
```

任何帮助将不胜感激！

更新：在一些帮助后，我已经将我的功能更新为完成的功能，因为它似乎不起作用，我需要一些进一步的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:05:56.363

您是否尝试设置`maxLength`属性：

```
var pc = document.getElementById('txtpostcode');
pc.maxLength = 4;
pc.value = pc.value.substr(0,4); // remove any extra characters already entered 
```

...然后添加一个`else`条件以将其设置`maxLength`为其他国家/地区的默认值。

然后，您将从您的领域的事件中调用您的`postcode()`函数。`blur``txtcountry`

编辑：请注意，您显示的函数`category`在测试的第二部分中有一个未定义的变量`if`- 应该是`country`. 正如我已经提到的，您确实需要从某个地方调用该函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:20:59.550

我会用

```
var country = document.getElementById('txtcountry');
if (country.value == "Australia" || category == "australia")
{
  country.setAttribute("maxlength","4");
  country.value = country.value.substr(0,4);
} 
```

# vba - 如何使用 VBA 在 powerpoint 中插入列

> ID：15829820
> 
> 赞同：0
> 
> 时间：2013-04-05T09:02:23.110
> 
> 标签：vba, powerpoint

问题有点棘手，我用谷歌搜索并获得了一个链接[http://joelblogs.co.uk/2010/08/13/automatically-create-summary-slides-in-powerpoint-2010/](http://joelblogs.co.uk/2010/08/13/automatically-create-summary-slides-in-powerpoint-2010/) 与 VBA 代码这对我有帮助在单个父幻灯片中插入一个演示文稿的所有其他幻灯片的标题摘要。代码工作正常，但是当带有标题的幻灯片数量超过 30 或 50 时，目录父幻灯片无法保存整个标题名称，因为名称将被隐藏并超出幻灯片演示。因此，我想确认是否有任何 VBA 代码通过 VBA 在目录幻灯片中将摘要名称的内容分配到三列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:15:17.640

根据您有示例的链接，您需要在宏的 and 处添加该代码：

```
With summary.Shapes(2).TextFrame2
    .Column.Number = 3
End With 
```

在摘要文本框中设置了 3 列。请记住，您可能还需要设置字体大小，以将文本保留在文本框中。

**附加信息：**我看到的是，只要您将更多文本放入摘要形状（`Shapes(2)`在我的示例中），字体大小就会发生变化（减小）。然后，您可以跟踪字体大小以检查是否应该增加列数。这是一个例子：

```
With summary.Shapes(2).TextFrame2
    If .TextRange.Font.Size < 20 Then
        'additionally check here if max approved column numbers is not exceeded.
        .Column.Number = .Column.Number + 1
    End If
End With 
```

这是我完整的基本测试代码（可以为任何新的空演示文稿运行）：

```
Sub test_loop()
    Dim summary As Slide
    Set summary = ActivePresentation.Slides.Add(1, ppLayoutText)

    Dim enterText as string
Do
    enterText = InputBox("Additional text to insert into Shape:")

With summary.Shapes(2).TextFrame2
    .TextRange.Text = .TextRange.Text & Chr(10) & enterText
    If .TextRange.Font.Size < 20 Then
        .Column.Number = .Column.Number + 1
    End If
End With

Loop While enterText <> ""
End Sub 
```

# javascript - 类与 addClassName jscript

> ID：15829821
> 
> 赞同：0
> 
> 时间：2013-04-05T09:02:25.167
> 
> 标签：javascript, prototypejs

使用类与 addClassName jscript 有什么区别？

在 for 循环中，每当我向现有类添加一个类时，然后在每个循环循环之后它都会向它添加新类。所以每次进入循环的条件都在变化。

当我使用 class 而不是 addClassName 时，一切都开始正常工作。在每个反向会话之后，循环匹配条件。

怎么解释？

工作版本：

```
 for (var i = 0; i < fields.length; i++) //instead of .each
    {
            alert(0.5);
            alert(fields[i].className);

        if (fields[i].className == 'text' || fields[i].className == 'date' || fields[i].className == 'number' || fields[i].className == 'text error' || fields[i].className == 'date error' || fields[i].className == 'number error' || fields[i].className == 'text valid' || fields[i].className == 'date valid' || fields[i].className == 'number valid' || fields[i].className == 'text valid error' || fields[i].className == 'date valid error' || fields[i].className == 'number valid error' )
        {
        alert(0.3);

        var val = fields[i];        

        var classname = "";
        if(val.value.length <= 4) {
            classname = fields[i].className + " error";

            fields[i].class = classname;

            Effect.Shake(fields[i], { times:3 }, 50);
            errorString = 'Please complete all required fields.';

           alert(0.6);
           alert(val.value);
           alert(0.66);
           alert(fields[i].name);
           alert(val.value.class);
           //error++;
        }  

        else {

            classname = fields[i].className + " valid";
            fields[i].class = classname;
            alert(8.5);
           alert(val.value.class);

        }

        } 
        alert(8.8);
            alert(fields[i].class); 
    } 
```

不工作的版本：

```
 for (var i = 0; i < fields.length; i++) //instead of .each
    {

        if (fields[i].className == 'text' || fields[i].className == 'date' ||      fields[i].className == 'number' || fields[i].className == 'text error' || fields[i].className == 'date error' || fields[i].className == 'number error' )
        {
        var val = fields[i];        

        if(val.value.length <= 4) {             
            fields[i].addClassName('error');

            Effect.Shake(fields[i], { times:3 }, 50);
            errorString = 'Please complete all required fields.';

            error++;
        } else {
            fields[i].addClassName('valid');

        }

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:10:48.693

## 解释

`class`是[保留关键字](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words)（供将来可能使用），因此不应将其用作对象属性（如`someobject.reservedKeyword`），因此`className`不应`class`用作 nnnnnn 在您的问题的评论中指出的那样。

在您的代码中，这不起作用：

```
fields[i].class = classname 
```

...但是这个会

```
fields[i].className = classname 
```

这是prototypejs的源码`addClassName`

```
function addClassName(element, className) {
    if (!(element = $(element))) return;

    if (!hasClassName(element, className))
      element.className += (element.className ? ' ' : '') + className;

    return element;
} 
```

查看[prototypejs链接](https://github.com/sstephenson/prototype/blob/ecacc02/src/prototype/dom/dom.js#L2448)

## 解决方案

因此使用`addClassName`和。在您的代码中：`removeClassName``hasClassName`

```
for (var i = 0; i < fields.length; i++) {
    if(fields[i].hasClassName("text") || fields[i].hasClassName("number") || fields[i].hasClassName("date")) {
        if(fields[i].value.length<=4) {
            fields[i].addClassName("error");
            fields[i].removeClassName("valid");
            Effect.Shake(fields[i], { times:3 }, 50);
            errorString = 'Please complete all required fields.';
        }
        else {
            fields[i].addClassName("valid");
            fields[i].removeClassName("error");
        }
    }
} 
```

注意：在[现代浏览器](http://caniuse.com/#search=classList)中，我们使用`classList`属性来代替：

```
prototype.js                         | modern browsers
---------------------------------------------------------------------
element.hasClassName("someclass")    | element.classList.contains("someclass")
element.addClassName("someclass")    | element.classList.add("someclass")
element.removeClassName("someclass") | element.classList.remove("someclass") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:17:15.000

[`addClassName`](http://prototypejs.org/doc/latest/dom/Element/addClassName/index.html)是将类添加到 HTML 元素的原型方法。

如果您一直在分配`$('something').class`您所做的事情，特别是向该对象添加一个属性，则每次将其设置为该对象时，它将被替换，如果您创建一个引用相同元素的新对象，它将不具有该属性并且 - 当然 - 它不会与 HTML 元素的类相关联。

# fortran90 - 如何处理 Fortran 中超大的表达式？

> ID：15829822
> 
> 赞同：0
> 
> 时间：2013-04-05T09:02:31.657
> 
> 标签：fortran90

我有一个像这样的fortran程序，

```
program test
integer,parameter :: f=selected_real_kind(20)
Real(kind=f)::b1,b2,c1,v,xd,xe,res
b1=1._f
b2=0.5_f
v=1._f/3._f
c1=0.25_f
xd=0.2_f
xe=1._f/6._f
res= "extremely large expressions"
write(*,*) res
end program 
```

res 只是一个非常大的表达式，超过 50000 行。而且我无法使用 gfortran 编译器编译该程序。错误原因是，内存不足分配 65536 字节欢迎任何建议。谢谢！

# android - 列表视图项。处理高度巨大的图像

> ID：15829827
> 
> 赞同：0
> 
> 时间：2013-04-05T09:02:45.793
> 
> 标签：android, image, listview

我有列表视图项目，里面有简单的视图，我需要在其中显示高度巨大的图像。我有缓存系统，可以将大图像分割成更小的图像。

问题：

处理在一个列表视图项中显示大图像的最佳方法是什么？当然我可以在运行时向项目添加一些视图（例如 10 个视图 1000px 高度），但我认为我会内存不足。

我的意思是让我的应用程序显示图像，如 9gag 应用程序。

**9gag 应用程序**

![在此处输入图像描述](https://i.stack.imgur.com/ozv3d.png)

**9gag 视图层次结构**

![在此处输入图像描述](https://i.stack.imgur.com/m1Frw.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:04:49.137

不要将大的位图加载到内存中考虑将较小的版本加载到内存中，在 BitmapFactory.Options 对象中将 inSampleSize 设置为 true。例如，分辨率为 2048x1536 的图像使用 inSampleSize 为 4 进行解码会生成大约 512x384 的位图。

[使用这些通用准则来加载大型位图](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

# linux - 审计过程

> ID：15829829
> 
> 赞同：2
> 
> 时间：2013-04-05T09:02:54.557
> 
> 标签：linux, system-calls, auditing, procfs

我想跟踪 GNU/Linux 机器上的重要系统更改，例如禁用 PaX、启用流量转发、ICMP 重定向、更改 printk 详细级别等。一般来说，所有这些操作都基于 /proc/sys/kernel/* 文件的更改。到目前为止，我还没有找到任何审计 procfs 的方法。也许使用 /proc/sys/kernel/* 值作为第一个参数（a0）为“写入”系统调用设置监视规则是可行的方法......只是想知道。但是，无法在 a0-3 auditd rules -F 参数中使用通配符，因此在最坏的情况下，我必须为该目录中的每个重要文件创建单独的规则。我会感谢任何有关此问题的提示，在此先感谢。

# ios - iPhone 应用程序中的通知栏

> ID：15829831
> 
> 赞同：3
> 
> 时间：2013-04-05T09:03:08.030
> 
> 标签：ios, objective-c, cocoa-touch

每当我的用户失去与我的服务器的连接时，我想创建一个通知栏，例如*活动电话通知栏。*

是否有捷径可寻？在 API 中找不到它，但必须有一些受支持的方式 - 还是我应该手动编程？

![示例图像](https://i.stack.imgur.com/ysoh8.png)

示例：不同之处在于我希望它在我的应用程序中处于活动状态，而我想自己定义文本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:09:49.853

没有可用于执行此操作的直接 API，但您可以像这样更改状态栏颜色

```
self.window.backgroundColor = [UIColor colorWithRed:0.78f green:0.13f blue:0.11f alpha:1];
[[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackTranslucent]; 
```

并使用您的自定义文本在下面添加另一个视图。

或者，如果您只是想在状态栏中使用自定义颜色放置一些信息，请查看[KGStatusBar](https://github.com/kevingibbon/KGStatusBar)或[MTStatusBarOverlay](https://github.com/myell0w/MTStatusBarOverlay)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T09:19:04.530

如果这是您所要求的，您可以在状态栏级别设置一个窗口，并用您自己的实际替换手机的状态栏。可以在[这里找到实现方式](https://stackoverflow.com/a/2834029/312312)

但是请记住，在这种情况下，您的应用程序*可能*会被 Apple 拒绝。

很多应用程序都使用它来短暂显示状态栏位置的一些信息，然后再次显示状态栏。Groupon 应用程序实际上就是这样做的，`UIPageControl`当您浏览它们的不同时，它会显示一个，`UITableViews`以显示有多少`UITableViews`可用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:30:00.370

这是我前几天遇到的一个不错的库，名为“ **KGStatusBar**，iOS 的最小状态栏”。[https://github.com/kevingibbon/KGStatusBar](https://github.com/kevingibbon/KGStatusBar)。我还没有尝试过，但看了一眼来源，它似乎很可靠。

# c# - 如何在 jquery asp.net 中单击成功按钮后关闭 UserControl？

> ID：15829836
> 
> 赞同：0
> 
> 时间：2013-04-05T09:03:12.030
> 
> 标签：c#, asp.net, jquery

嗨 iam 在 asp.net 中使用 jquery

我有一个带有少量控制和保存按钮的用户控件。

我正在编写 Ajax 调用来保存数据。

我正在成功保存我的数据。但是在 mu SUccess 警报之后，我的用户控制弹出窗口仍然在页面中。我只是想隐藏/关闭。

为此，我尝试了这段代码并且没有工作。

```
 success: function (html) {
                     try {
                         alert("added successfuly");
                         $(".modalBackground").hide();
                     } catch (ex) {
                         alert("ErrCode:1");

                     } 
```

我的 ASCX：

WHich 包含一个 ModalPopup 文件很少

```
 <ajax:ModalPopupExtender ID="ModalPopupContext" runat="server" 
           TargetControlID="btnContextPopup" BehaviorID="ModalPopupExtender" PopupControlID="pnlpopupContext" BackgroundCssClass="modalBackground">
     </ajax:ModalPopupExtender>

                 <panel ....>

                 TextBox1 
                 Textbox2
             <asp:ImageButton ID="imgbtnUpdate" runat="server"       ClientIDMode="Static" CssClass="imgbtnUpdateADDContext" TabIndex="8" ImageUrl="~/image_repository/UpdateVoyage.png" />
        </panel> 
```

这是我用来保存数据的按钮。如果成功，单击此按钮后，我的 UserControl 必须关闭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:07:17.753

试试这个：

```
success: function (html) {
         try {
              alert("Port added successfuly");
              $("PanelClassName").hide(); // Panel which is in ajax:ModalPopupExtender               
              } catch (ex) {
              alert("ErrCode:1");
              }
           return false;
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:20:25.587

只需将您的 UserControl 代码放在面板中，然后成功隐藏该面板

```
<asp:panel runnat="server" id="pnl">
<ajax:ModalPopupExtender ID="ModalPopupContext" runat="server" 
           TargetControlID="btnContextPopup" BehaviorID="ModalPopupExtender" PopupControlID="pnlpopupContext" BackgroundCssClass="modalBackground">
     </ajax:ModalPopupExtender>

                 <panel ....>

                 TextBox1 
                 Textbox2
             <asp:ImageButton ID="imgbtnUpdate" runat="server"       ClientIDMode="Static" CssClass="imgbtnUpdateADDContext" TabIndex="8" ImageUrl="~/image_repository/UpdateVoyage.png" />
        </panel>
</panel> 
```

**现在在成功部分**

```
 success: function (html) {
                     try {
                         alert("Port added successfuly");
                 var pnel= document.getElementById('<%= pnl.ClientID%>');
                     pnel.hide();
                     } catch (ex) {
                         alert("ErrCode:1");

                     } 
```

# ruby - 如何在 Ruby 中为日志文件创建通用路径

> ID：15829839
> 
> 赞同：0
> 
> 时间：2013-04-05T09:03:22.223
> 
> 标签：ruby, logging

在这里，我使用 Dir::pwd 在目录的当前路径下创建日志文件夹。但我想更改它以从将在任何其他机器上运行的配置文件中选择目录路径。

```
date_directory= "#{Dir::pwd}/logs/#{DateHelper.getDirectoryYearStamp}/#{DateHelper.getDirectoryMonthStamp}/#{DateHelper.getDirectoryDateStamp}/"
          FileUtils.mkdir_p(date_directory) unless Dir.exists?(date_directory) 
```

我厌倦了给出绝对路径并且它有效。但是如何通过传递相对路径来创建目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:06:04.480

您已经使用相对路径，通用解决方案也是如此，当前文件夹的子文件夹是相对位置。您发布的代码是否有效？但是在您的问题中，您提到了配置文件，这是您想要的吗？什么样的文件？一个 yaml、ini 或一个简单的文本文件？如果您可以使用简单的文本文件

```
path = File.read("#{File.dirname(__FILE__)}/path.txt") 
```

编辑：根据您的评论，以下片段将在 /some/x/y/z 文件夹中每天创建一个日志文件。

```
require 'logger'

$log = Logger.new("/some/x/y/z/logs.txt", 'daily' )
$log.info "teststring" 
```

在文件“C:\some\x\y\z\logs.txt”中给出

```
# Logfile created on 2013-04-05 13:17:27 +0200 by logger.rb/31641
I, [2013-04-05T13:20:19.811837 #3300]  INFO -- : teststring 
```

# c# - 实体框架 4.0。如何在 SQL Server 上创建新属性，如计算列

> ID：15829840
> 
> 赞同：1
> 
> 时间：2013-04-05T09:03:23.233
> 
> 标签：c#, entity-framework

我需要基于另一个属性创建一个新列。新属性必须是不同的数据类型。我需要使用新属性来创建与另一个对象的关联。新属性必须是 Int32。

我需要类似`cast(stringField as int)`SQL 的东西。

我知道我可以使用部分类来创建新属性，但我需要创建一个新的关联。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:04:51.217

您可以使用部分类添加属性

```
public partial class YourClass
{
    public int YourProperty
    {
        get { return int.Parse(this.aStringValue); }
    }
} 
```

可以通过您对关联的含义或部分类实现对您不起作用的原因提供更多详细信息。

# ios - iOS Facebook SDK 在我拥有管理员权限的页面上发布图片

> ID：15829844
> 
> 赞同：4
> 
> 时间：2013-04-05T09:03:34.193
> 
> 标签：ios, objective-c, facebook-ios-sdk

我在尝试在 FB 页面上发布图片时遇到问题，我是管理员。图片是上传到我自己的帐户而不是我的页面上的。

这是我用来执行此操作的代码：

```
- (void)apiGraphUserPhotosPost:(UIImage*)img  withMessage:(NSString*)message { 
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSUInteger c;
    for (c = 0; c < [gFBPageArray count]; c++)
    {
        if ([[[gFBPageArray objectAtIndex:c] objectForKey:@"name"] isEqualToString:[defaults objectForKey:@"FBPostAs"]])
            break;
    }
    params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
              img, @"picture", message, @"message", [[gFBPageArray objectAtIndex:c] objectForKey:@"access_token"], @"access_token",nil];
    [[self facebook] requestWithGraphPath:[NSString stringWithFormat:@"/%@/photos", [[gFBPageArray objectAtIndex:c] objectForKey:@"id"]]
                                       andParams:params
                                   andHttpMethod:@"POST"
                                     andDelegate:self];
} 
```

`[defaults objectForKey:@"FBPostAs"]`包含我要上传图片的 FB 页面的名称。

gFBPageArray 包含我拥有管理员权限的 FB 页面列表。

难道我做错了什么？

我对 /PageID/feed 和 /PageID/videos 做了类似的事情，效果很好......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T14:00:59.647

你可以在这里找到这个问题的答案：[picture-post-to-facebook-ends-up-in-the-wrong-place](https://stackoverflow.com/questions/9374117/picture-post-to-facebook-ends-up-in-the-wrong-place?rq=1)

如果您愿意，我可以在此处（复制/粘贴）代码提供更多详细信息。

# iphone - IOS中的单元测试

> ID：15829847
> 
> 赞同：3
> 
> 时间：2013-04-05T09:03:45.127
> 
> 标签：iphone, ios, objective-c, unit-testing

我的应用程序中有一个 UIbutton。当我单击该按钮时，它会删除 NSMutableArray 中的最后一个对象。为此，我想编写单元测试。请任何人给我你的建议。

我使用此代码来了解何时执行了对 UIButton 的单击：

```
[viewControllerObject.backButton1 sendActionsForControlEvents:UIControlEventTouchUpInside]; 
```

谢谢，瑞奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:20:23.483

在“单元”级别，您正在测试两件事：

*   点击按钮会发送操作方法吗？
*   动作方法是否从数组中删除最后一个对象？

忽略第一个，这是 Apple 的问题（或者说这是一个集成测试）。如果您考虑 Assemble、Act、Assert 过程，则第二个很简单：

1.  组装：构建您的视图控制器及其内容数组。
2.  动作：调用动作方法。
3.  断言：检查最后一个对象是否被删除。

```
-(void)testRemovalOfLastObjectOnButtonAction
{
    //... build and populate the view controller
    id lastObject = [array lastObject];
    [viewController buttonTapped: sender];
    STAssertFalse([array containsObject: lastObject], @"Object %@ should be removed", lastObject);       
} 
```

注意我明确测试最后一个对象是否被删除，而不是计数是否减少：如果*任何*对象被删除，就会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T09:07:00.267

您可以通过几种不同的方式执行此操作。一个建议是观看这个很棒的[教程](http://qualitycoding.org/uiviewcontroller-tdd/)

该视频解释了如何在 UIKit 中进行单元测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:17:44.843

XCode 原生支持单元测试。如果您开始一个新项目，请查找显示“包含单元测试”的复选标记。如果你使用它，你将有一个名为`<project_name>Tests`. 打开其中的 .m 文件，您将看到一个`- (void)testExample`可以放置测试的方法。

您可以使用许多函数进行测试，例如`STAssertTrue`和`STAssertNotNil`。在此处查看 Apple 文档：[https ://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/UnitTesting/03-Writing_Test_Case_Methods/writing_tests.html#//apple_ref/doc/uid/TP40002143-CH4- SW1](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/UnitTesting/03-Writing_Test_Case_Methods/writing_tests.html#//apple_ref/doc/uid/TP40002143-CH4-SW1)

在你的情况下，你可能会做这样的事情：

```
NSInteger arrayCount = mArray.count;
[yourInstance performButtonAction];
STAssertEquals(arrayCount -1, mArray.count); 
```

# hibernate - 在hibernate xml映射中映射没有主键的数据库视图

> ID：15829848
> 
> 赞同：7
> 
> 时间：2013-04-05T09:03:46.320
> 
> 标签：hibernate, model-view-controller, spring-mvc, hibernate-mapping, hbmxml

> **我创建了一个仅用于获取数据的视图（只读）**

视图：Grid_View

**> 我的休眠 hbm 文件**

```
<hibernate-mapping>   
     <class name="hibernate.domain.View" table="Grid_View" mutable="false">
         <property name="ACCT_BR_CD" type="string">
            <column name="ACCT_BR_CD"/>
        </property>
        <property name="ACCT_NO" type="string">
            <column name="ACCT_NO"/>
        </property>
        <property name="LGL_ENTY_NM" type="string">
            <column name="LGL_ENTY_NM"/>
        </property>
        <property name="CUST_CTRY_CD" type="string">
            <column name="CUST_CTRY_CD"/>
        </property>
        <property name="ACCT_SRC_SYS_CD" type="string">
            <column name="ACCT_SRC_SYS_CD"/>
        </property>    
    </class>
</hibernate-mapping> 
```

**> 因为在我看来它们不是主键，所以我没有在我的映射中提到 id 字段。** 但在休眠状态下，id 是必需的。

**> 我的问题**

如何在休眠映射文件中进行没有 id 的映射。而且它们不是具有唯一值的列，因此它们没有任何机会使它们成为键。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:22:47.387

您有两个选择，要么添加**复合键**，要么添加

```
<id column="ROWID" type="string" /> 
```

Hibernate 需要唯一的键来映射。最好的方法是添加主键。

# java - Java 字符串索引超出范围

> ID：15829849
> 
> 赞同：0
> 
> 时间：2013-04-05T09:03:52.703
> 
> 标签：java, for-loop, multidimensional-array, indexof

所以我得到那个字符串索引超出范围意味着我超出了集合的范围，但我不太确定我是如何用我的代码做到这一点的。

此代码应该从包含 3 个整数的文本文件中读取（前两个与此相关，分别为行数和列数），然后是一系列字符。因此，它首先读取并保存前三个数字，然后将文件的其余部分转换为字符串。然后，它通过使用文本文件的尺寸设置一个字符数组，然后用文本文件的字符一个字符一个字符地填充这些值。

但是，当我尝试打印代码时，遇到字符串索引超出范围错误，无法找到问题所在。

这是代码：

```
 import java.util.*;  
  import java.io.*;

public class SnakeBox {
// instance variables
  private char[][] box;
  private int snakeCount;
  private int startRow, startCol;
  private int endRow, endCol;
    private int rows, cols, snakes;
  Scanner keyboard = new Scanner(System.in);

/** Create and initialize a SnakeBox by reading a file.
    @param filename the external name of a plain text file
*/
  public SnakeBox(String fileName) throws IOException{
     Scanner infile = new Scanner(new FileReader(fileName));

     int count = 0;
     String s = "";
     rows = infile.nextInt();
     cols = infile.nextInt();
     snakes = infile.nextInt();
        infile.nextLine();
     box = new char[rows][cols];
     while (infile.hasNext()) {
        s += infile.next();
     }
     for (int i = 0; i < rows; i++) {

        for (int j = 0; j < cols; j++) {
           count++;
           char c = s.charAt(count);           
           box [i][j] = c;
        }
     }
  } 
```

文本文件是：

```
 16 21 4
+++++++++++++++++++++
+                   +
+         SSSSS     +
+    S   S          +
+    S    SS        +
+    S      S       +
+ S  S       SS     +
+  SS  S            +
+     S             +
+    S  SSSSSS      +
+   S         S     +
+  S           S    +
+ S     SSS   S     +
+      S     S      +
+       SSSSS       +
+++++++++++++++++++++ 
```

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T09:05:35.807

改变

```
count++;
char c = s.charAt(count); 
```

到

```
char c = s.charAt(count);   
count++; 
```

编辑：另一个问题是 Scanner.next() 返回下一个令牌，忽略所有空格。查看 Achintya Jha 的答案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T09:19:03.697

问题不是上面所说的：在给定的文件中有将近 59 个标记，总共等于 117 个字符（我手动计算）。而count的最大值将达到21*16 =336。

如果名为“infile.dat”的输入文件具有以下格式：

你好那里 1234
CSstudents 再见 6556

它有六个标记，我们可以使用以下代码读取它们：

```
while (filein.hasNext()) {      // while there is another token to read
    String s = filein.next();   // reads in the String tokens "Hello" "CSstudents" 
    String r = filein.next();   // reads in the String tokens "There" "goodbye"
    int x = filein.nextInt();   // reads in the int tokens 1234  6556 

} 
```

请注意 Scanner 对象如何跳过所有空白字符到下一个标记的开头。所以我的建议是使用[Scanner#hasNextLine() & Scanner#nextLine()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html#hasNextLine%28%29)

```
while (infile.hasNextLine) {
    s += infile.nextLine();
} 
```

# ios - 如何以横向模式播放视频但应用程序仅支持纵向模式？

> ID：15829851
> 
> 赞同：2
> 
> 时间：2013-04-05T09:03:59.987
> 
> 标签：ios, xcode, uiwebview, orientation

我正在制作一个仅支持肖像模式的应用程序。这里我在 uiwebview 中加载 youtube 视频。所以当我切换到横向模式时，视频也必须以横向模式播放。但是在录制完视频播放器之后。我的视图控制器正在更改为横向模式，但它一直处于纵向模式，只有这里是我的 webview 代码

```
 web=[[UIWebView alloc]initWithFrame:CGRectMake(2,0, 140, 99)];
          web.backgroundColor=[UIColor redColor];
        [web setDataDetectorTypes: UIDataDetectorTypeNone];

        NSString *embedHTML = @"<iframe title=\"YouTube video player\" width=\"320\" height=\"460\" scrolling=\"no\" src=\"http://www.youtube.com/embed/%@?modestbranding=1&amp;rel=0;autoplay=1;showinfo=0;loop=1;autohide=1\" frameborder=\"0\" allowfullscreen allowTransparency=\"true\"></iframe>";

        NSString *htmlStr = [NSString stringWithFormat:embedHTML, [youtubeId_array objectAtIndex:i]];              
         web.tag=i+100;
        web.scrollView.bounces=NO;
        [web loadHTMLString:htmlStr baseURL:nil];
        [view addSubview:web];

  -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return ( toInterfaceOrientation=UIInterfaceOrientationPortrait);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:15:54.937

您是否尝试过在返回应用程序时`rootViewController`设置？`self`

在您的视图控制器中：

```
import "AppDelegate.h"
...
- (void)functionRunWhenVideoFinish {
    ...
    self.appDelegate.window.rootViewController = self;
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T12:51:16.997

**在 Appdelegate 和所需的视图控制器中添加这些行**

单击完成按钮应用程序将移动所需的方向。

```
-(BOOL)shouldAutorotate
{
    return NO; 
}

-(NSUInteger)supportedInterfaceOrientations
{
    //LandScapeMode:- UIInterfaceOrientationMaskLandscape;
    //PortraitMode:- 
    return UIInterfaceOrientationMaskPortrait 
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    //LandScapeMode:- UIInterfaceOrientationLandscapeRight;
   // ProtraitMode:-
   return UIInterfaceOrientationPortrait
} 
```

# iphone - 如何在 iOS 中通过 wifi 传输大文件

> ID：15829856
> 
> 赞同：12
> 
> 时间：2013-04-05T09:04:11.567
> 
> 标签：iphone, ios, bonjour, nsstream

我从 Apple 的网站下载[了 WiTap代码。](http://developer.apple.com/library/ios/#samplecode/WiTap/Introduction/Intro.html)它用于通过本地 wifi 网络传输数据。我正在一个项目中作为客户端 - 服务器架构进行交互。我正在将 NSData 从客户端发送到服务器。

我做了2个项目；一个用于客户端，一个用于服务器

在客户端项目中，我进行了以下更改为此我通过添加以下方法修改了**AppController.m文件**

**AppController.m**（客户端）

```
- (void)sendData:(NSData*)pobjData
{
    assert(self.streamOpenCount == 2);

    if ( [self.outputStream hasSpaceAvailable] ) 
    {
        NSInteger   bytesWritten;

        NSUInteger length = [pobjData length];

        bytesWritten = [self.outputStream write:[pobjData bytes] maxLength:[pobjData length]];

        NSLog(@"written bytes -> %d",bytesWritten);
    }
} 
```

然后通过调用这个方法我发送数据。

在服务器端项目中，我通过修改以下方法修改了 AppController.m 文件。

**AppController.m**（服务器端）

```
- (void)stream:(NSStream *)stream handleEvent:(NSStreamEvent)eventCode
{
    #pragma unused(stream)

    switch(eventCode) {

        case NSStreamEventOpenCompleted: {
            self.streamOpenCount += 1;
            assert(self.streamOpenCount <= 2);

            // Once both streams are open we hide the picker and the game is on.

            if (self.streamOpenCount == 2) {
                [self dismissPicker];

                [self.server deregister];
            }
        } break;

        case NSStreamEventHasSpaceAvailable: {
            assert(stream == self.outputStream);
            // do nothing
        } break;

        case NSStreamEventHasBytesAvailable:
        {
            if (stream == self.inputStream)
            {

                NSInteger bytesRead;
                uint32_t buffer[32768];

                NSMutableData *_data = [NSMutableData data];

                // Pull some data off the network.
                bytesRead = [self.inputStream read:buffer maxLength:sizeof(buffer)];
                if (bytesRead == -1) {

                } else if (bytesRead == 0) {

                } else {
                    // FIXME: Popup an alert

                    const long long expectedContentLength = bytesRead;
                    NSUInteger expectedSize = 0;

                    // expectedContentLength can be represented as NSUInteger, so cast it:
                    expectedSize = (NSUInteger)expectedContentLength;

                    [_data appendBytes:buffer length:expectedSize];

                    NSLog(@"\"Data received has length: %d", _data.length);

                    [self performSelector:@selector(getData:) withObject:_data afterDelay:1.0];
                }
            }
        }
            break;

        default:
            assert(NO);
            // fall through
        case NSStreamEventErrorOccurred:
            // fall through
        case NSStreamEventEndEncountered: {
            [self setupForNewGame];
        } break;
    }
} 
```

并添加了将接收到的数据写入文件的方法

```
 #define kUserDirectoryPath NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)

-(void)getData:(NSMutableData *)pData
{
                NSFileManager *tmpmanager = [NSFileManager defaultManager];
                [tmpmanager createFileAtPath:[AppController getDocumentDirectoryPath:[NSString stringWithFormat:@"%@.png",[NSDate date]]] contents:pData attributes:nil];
}

+(NSString*)getDocumentDirectoryPath:(NSString*)pStrPathName
{
            NSString *strPath=nil;

            if(pStrPathName)
                strPath = [[kUserDirectoryPath objectAtIndex:0] stringByAppendingPathComponent:pStrPathName];

            return strPath;
} 
```

我将 .png 文件转换为 NSData 并将它们从客户端发送到服务器端。服务器将文件下载到文档目录

问题是，当我从客户端传输文件时，它会在文档目录中下载到服务器端。在小文件的情况下一切正常。如果文件大小超过 8kB ，则写入文档目录的文件会损坏。

请帮助我能够发送大文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T22:32:39.340

问题是您的代码直到最后都不会循环收集所有可用数据（或者循环发送所有数据）。因此，您只会收到第一个数据缓冲区。如果图像很小，则可以，如果图像较大，则永远不会。

您需要编写代码，以便在有缓冲区空间时继续发送，直到发送所有数据并继续读取数据（到`NSMutableData`实例变量，而不是局部变量），直到到达流的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:33:39.937

您可以使用 AsyncSocket ，可以从

[https://github.com/roustem/AsyncSocket](https://github.com/roustem/AsyncSocket) ,

这是一个基于 CFSocket 和 CFNetwork 构建的 Objective-C 包装器，它可以在本地 wifi 上使用 TCP/UDP 协议处理大量数据传输。

你可以在这里找到维基[https://github.com/darkseed/cocoaasyncsocket/wiki/iPhone](https://github.com/darkseed/cocoaasyncsocket/wiki/iPhone)

该类非常简单，易于实现。试一试

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T05:22:28.347

You have make a web service from where you need to put IP address of the system, Where you want to send the file and after that when you can connected with the entered IP address you can send the file in Base64 and NSData format.

# css - 媒体查询黑莓9900加粗？

> ID：15829863
> 
> 赞同：1
> 
> 时间：2013-04-05T09:04:33.620
> 
> 标签：css, blackberry, responsive-design, media-queries

我需要只适用于黑莓 9900 粗体的媒体查询。

我尝试过，`@media only screen and (max-height: 480px) and (max-width: 640px)`但没有成功。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:10:53.790

帮助解决问题的代码是：

```
<meta name="viewport" content="target-densitydpi=device-dpi"> 
<meta name="viewport" content="width=device-width, initial-scale = 1.0, maximum-scale = 1.0" /> 
```

# git - git：删除奇怪的远程分支

> ID：15829866
> 
> 赞同：1
> 
> 时间：2013-04-05T09:04:47.323
> 
> 标签：git, branch

我已经开始使用一个杂乱的存储库：任务是删除所有无用的合并分支。当我列出远程分支时，我可以看到：

```
remotes/origin/xx12
remotes/origin/xx13
remotes/origin/remotes/origin/xx14 
```

我可以跑

```
git push origin :xx12
git push origin :xx13 
```

删除`xx12`和`xx13`。但我不知道如何删除`xx14`哪些有奇怪的路径`remotes/origin/remotes/origin`。我不知道它是如何完成的以及为什么，但我想安全地删除它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:09:54.260

远程分支的名称是“remotes/origin/xx14”。因此，您可以像删除其他文件一样使用其全名删除它。尝试：

```
git push origin :remotes/origin/xx14 
```

# android - LazyList 设置项目高度

> ID：15829872
> 
> 赞同：0
> 
> 时间：2013-04-05T09:04:54.790
> 
> 标签：android, android-listview, android-view, android-inflate, android-lazyadapter

我正在使用带有lazyadapter的listview，现在我需要更改项目行高，但这似乎有点棘手。这是我的适配器：

```
public class AlbumDetailsAdapter extends BaseAdapter {

    private Activity activity;
    private ArrayList<Songs> data;
    private static LayoutInflater inflater = null;
    private MediaPlayer mediaPlayer;

    public AlbumDetailsAdapter(Activity a, ArrayList<Songs> products) {
        activity = a;
        mediaPlayer = new MediaPlayer();
        data = products;
        inflater = (LayoutInflater) activity
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        View vi = convertView;
        if (convertView == null)
            vi = inflater.inflate(R.layout.songs_items, parent);

        TextView songNumber = (TextView) vi
                .findViewById(R.id.songs_item_number);
        TextView albumTitle = (TextView) vi
                .findViewById(R.id.songs_item_album_title);
        TextView singer = (TextView) vi
                .findViewById(R.id.songs_item_album_singer);
        final ImageView playSong = (ImageView) vi.findViewById(R.id.songs_item_play);
        ImageView downloadSong = (ImageView) vi
                .findViewById(R.id.songs_item_download);

        if (!data.get(position).getSONG_MP3()
                .equals("http://nelu.burduja.com/musica/songs_with/")) {
            downloadSong.setBackgroundResource(R.drawable.down_yes);
            if (!mediaPlayer.isPlaying()) {
                playSong.setBackgroundResource(R.drawable.play_nr);
            }
            playSong.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    if (mediaPlayer.isPlaying()) {
                        mediaPlayer.release();
                        playSong.setBackgroundResource(R.drawable.play_nr);
                        mediaPlayer=new MediaPlayer();
                    } else {
                        playSong.setBackgroundResource(android.R.drawable.ic_media_pause);
                        try {
                            mediaPlayer.setDataSource(data.get(position)
                                    .getSONG_MP3());
                            final ProgressDialog bufferingDialog=new ProgressDialog(activity);
                            bufferingDialog.setMessage("Buffering ...");
                            bufferingDialog.show();
                            mediaPlayer.prepareAsync();
                            mediaPlayer.setOnPreparedListener(new OnPreparedListener() {

                                @Override
                                public void onPrepared(MediaPlayer arg0) {
                                    bufferingDialog.dismiss();
                                    mediaPlayer.start();
                                }
                            });
                            mediaPlayer.setOnCompletionListener(new OnCompletionListener() {

                                @Override
                                public void onCompletion(MediaPlayer arg0) {
                                    playSong.setBackgroundResource(R.drawable.play_nr);
                                    mediaPlayer.release();
                                }
                            });

                        } catch (IllegalArgumentException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (SecurityException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IllegalStateException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                }
            });
        }
        ImageView youtube = (ImageView) vi.findViewById(R.id.songs_item_video);
        if (data.get(position).getSONG_MP4().length() > 0) {
            youtube.setBackgroundResource(R.drawable.video_nr);
            youtube.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Intent intent = new Intent(Intent.ACTION_VIEW, Uri
                            .parse(data.get(position).getSONG_MP4()));
                    v.getContext().startActivity(intent);
                }
            });
        }

        albumTitle.setText(data.get(position).getSONG_TITLE());
        singer.setText(data.get(position).getSONG_ARTIST());
        songNumber.setText((position + 1) + "");
        return vi;
    }
} 
```

还有我的 song_item xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:gravity="center_vertical"
    android:background="@drawable/list_item_sel"
    android:orientation="horizontal"
    android:weightSum="100" >

    <TextView
        android:id="@+id/songs_item_number"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="10"
        android:textColor="@android:color/white" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="55"
        android:gravity="center_horizontal"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/songs_item_album_title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:textColor="@android:color/white"
            android:textSize="20sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/songs_item_album_singer"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical"
            android:textColor="@android:color/white" />
    </LinearLayout>

        <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="35"
        android:gravity="right"
        android:orientation="horizontal" >

    <ImageView
        android:id="@+id/songs_item_play"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:contentDescription="@string/app_name"
        android:background="@drawable/play_pr" />

    <ImageView
        android:id="@+id/songs_item_video"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:contentDescription="@string/app_name"
        android:background="@drawable/video_pr"/>

    <ImageView
        android:id="@+id/songs_item_download"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:contentDescription="@string/app_name"
        android:background="@drawable/down_no"/>
    </LinearLayout>
</LinearLayout> 
```

无论我在 xml 中进行什么更改，我都无法更改列表视图的项目高度。谁能告诉我我该怎么做。我还看到我必须尝试放入`vi = inflater.inflate(R.layout.songs_items, parent);`适配器 getview 方法，但应用程序崩溃并给我一个错误

```
04-05 11:02:37.502: E/AndroidRuntime(12776): FATAL EXCEPTION: main
04-05 11:02:37.502: E/AndroidRuntime(12776): java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.AdapterView.addView(AdapterView.java:471)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.LayoutInflater.inflate(LayoutInflater.java:497)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at com.outsoucefarm.musicagratis.functions.AlbumDetailsAdapter.getView(AlbumDetailsAdapter.java:55)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.AbsListView.obtainView(AbsListView.java:2033)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.ListView.makeAndAddView(ListView.java:1781)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.ListView.fillDown(ListView.java:672)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.ListView.fillFromTop(ListView.java:732)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.ListView.layoutChildren(ListView.java:1634)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.AbsListView.onLayout(AbsListView.java:1863)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.View.layout(View.java:11278)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:925)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.View.layout(View.java:11278)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.View.layout(View.java:11278)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1628)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1486)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1399)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.View.layout(View.java:11278)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.View.layout(View.java:11278)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.ViewGroup.layout(ViewGroup.java:4224)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1489)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.os.Looper.loop(Looper.java:137)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at android.app.ActivityThread.main(ActivityThread.java:4440)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at java.lang.reflect.Method.invokeNative(Native Method)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at java.lang.reflect.Method.invoke(Method.java:511)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-05 11:02:37.502: E/AndroidRuntime(12776):    at dalvik.system.NativeStart.main(Native Method) 
```

所以请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:47:30.257

解决了这个问题。该行`vi = inflater.inflate(R.layout.songs_items, null);`应该是`vi = inflater.inflate(R.layout.songs_items, parent, false);`

# java - java mail api javax.mail.MessageException 连接失败 pop3

> ID：15829873
> 
> 赞同：0
> 
> 时间：2013-04-05T09:04:57.683
> 
> 标签：java, jakarta-mail, pop3

我想使用 java mail api 从用户帐户中读取邮件。

邮件服务器是一个特定的邮件服务器：

ReadEMail.java - 客户端

```
Properties props = System.getProperties();
props.put("mail.debug", "true");
props.put("mail.pop3.host", host);
props.put("mail.pop3.port", port);
props.put("mail.pop3.user", username);
props.put("mail.pop3.timeout", "158000");
props.put("mail.pop3.connectiontimeout", "158000");
/*  Create the session and get the store for read the mail. */
session = Session.getInstance(props);
store = session.getStore("pop3");
session.setDebug(true);
store.connect(host,username, password); 
```

客户端的错误信息：

```
DEBUG POP3: mail.pop3.apop.enable: false

DEBUG POP3: mail.pop3.disablecapa: false
DEBUG POP3: connecting to host "localhost", port 4444, isSSL false
S: +OK  Mail Server Ready 
C: CAPA
S: 
javax.mail.MessagingException: Connect failed;
  nested exception is:
    java.io.IOException: Unexpected response: 
    at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:210)
    at javax.mail.Service.connect(Service.java:295)
    at javax.mail.Service.connect(Service.java:176)
    at com.mail.reader.MailReader.connect(MailReader.java:67)
    at com.mail.reader.TestMailReader.main(TestMailReader.java:21)
Caused by: java.io.IOException: Unexpected response: 
    at com.sun.mail.pop3.Protocol.readResponse(Protocol.java:752)
    at com.sun.mail.pop3.Protocol.multilineCommand(Protocol.java:766)
    at com.sun.mail.pop3.Protocol.capa(Protocol.java:675)
    at com.sun.mail.pop3.Protocol.<init>(Protocol.java:140)
    at com.sun.mail.pop3.POP3Store.getPort(POP3Store.java:261)
    at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:206)
    ... 4 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:32:11.327

鉴于它似乎抱怨对 CAPA 的意外响应，可能是您的邮件服务器发送了非标准响应。您可以尝试设置`mail.pop3.disablecapa`为 true，这样它就不会发送 CAPA。

顺便`System.getProperties();`说一句，返回一个共享的 Properties 对象，不确定这是否是您的意图。也许做一个`new Properties();`？

# ios - MonoTouch + Jenkins - 如何使用我的钥匙串帐户为 iOS 设备构建

> ID：15829875
> 
> 赞同：0
> 
> 时间：2013-04-05T09:05:08.677
> 
> 标签：ios, xcode, xamarin.ios, jenkins, keychain

我已经成功安装了`Jenkins`CI。它使用自己的用户`jenkins`进行构建操作。

我会设置构建步骤。当 Jenkins 尝试为 iOS 设备构建项目时，出现错误：

```
ERROR: No valid iPhone code signing keys found in keychain. 
```

似乎`jenkins`用户帐户在我的基本用户帐户拥有的钥匙串中没有密钥和证书。如何授予`jenkins`用户访问我的钥匙串实体的权限？

*注意：似乎`Xcode`原生项目的代码签名问题是通过[Xcode 插件](https://wiki.jenkins-ci.org/display/JENKINS/Xcode+Plugin#XcodePlugin-Userinteractionisnotallowed)解决的。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:55:57.187

您可以将用户的证书复制到系统证书。然后，Jenkins 用户将能够看到这些证书。看到这个答案[https://stackoverflow.com/a/9477067/1131820](https://stackoverflow.com/a/9477067/1131820)

# c# - 我无法修复代码分析规则 CA2202

> ID：15829877
> 
> 赞同：4
> 
> 时间：2013-04-05T09:05:11.640
> 
> 标签：c#, itextsharp, code-analysis

我有一个函数（见下面的代码片段）。

我启用了代码分析，但发现违反了 CA2202 规则。

（**编辑**：我在 pdfStamper 上添加了关闭，否则 PDF 将被损坏）

> CA2202：不要多次处理对象
> 
> 方法实现包含可能导致对同一对象的 IDisposable.Dispose 或 Dispose 等效项（例如某些类型的 Close() 方法）的多次调用的代码路径。

在 CA2202 MSDN 页面（[此处](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28CA2202%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29&rd=true)）中，建议的修复不起作用。

如何在不必抑制这种违规的情况下重写代码？

```
private byte[] DoGenerateFinishedGamePdf(int gameSessionLogId)
{
   var finishedGameCertificatePdfFile = httpServerUtilityWrapper.MapPath(ConfigurationManager.AppSettings["FinishedGameCertificateFile"]);

   var pdfReader = new PdfReader(finishedGameCertificatePdfFile); // note that PdfReader is not IDisposeable

   using (MemoryStream memoryStream = new MemoryStream())
   using (PdfStamper pdfStamper = new PdfStamper(pdfReader, memoryStream))
   {
      var fields = pdfStamper.AcroFields;
      fields.SetField("CityName", "It works!");

      pdfReader.Close();

      pdfStamper.FormFlattening = true;
      pdfStamper.FreeTextFlattening = true;
      pdfStamper.Close();

      return memoryStream.ToArray();
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:11:38.667

啊，大家最喜欢的警告！在这种情况下，MemoryStream.Dispose 是幂等的（当前的实现什么都不做）所以这不是一个真正的问题，但是“修复”如下：

```
MemoryStream memoryStream = null;
try
{
  memoryStream = new MemoryStream();
  using (PdfStamper pdfStamper = new PdfStamper(pdfReader, memoryStream))
  {
    memoryStream = null;

    var fields = pdfStamper.AcroFields;
    fields.SetField("CityName", "It works!");

    pdfReader.Close();

    pdfStamper.FormFlattening = true;
    pdfStamper.FreeTextFlattening = true;
    pdfStamper.Close();

    return memoryStream.ToArray();
  }
}
finally
{
  if (memoryStream != null) memoryStream.Dispose();
} 
```

由于 PdfStamper “拥有” MemoryStream，它会在调用 PdfStamper.Dispose 时将其处理掉，所以如果我们不处理 PdfStamper，我们只需要在 MemoryStream 上调用 Dispose，这只会在 PdfStamper 的构造失败时发生.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:13:03.170

发生这种情况是因为 PdfStamper 正在处理流，即使它不应该。它没有创造它，也没有拥有它，所以它没有处理它的业务。

您的代码确实创建了流并且它确实拥有它，因此它应该处理它是很自然的。如果 PdfStamper 没有不恰当地处理流，那么您的嵌套使用一切都会好起来的。

您的第一步可能应该是提交错误报告/功能请求，要求删除或至少可以避免流的 PdfStamper 处置。完成此操作后，您可以非常安全地抑制 CA2202 违规，因为 MemoryStream 的双重处置不会产生有害后果。

顺便说一句， PdfStamper.Dispose() 调用 PdfStamper.Close() （至少在版本 5.4.0 中），所以你应该能够删除 PdfStamper.Close() 调用。

# extjs - TreePanel 没有扩展 ExtJS 3

> ID：15829882
> 
> 赞同：2
> 
> 时间：2013-04-05T09:05:28.277
> 
> 标签：extjs, extjs3, expand, treenode, treepanel

这是我的代码 -

```
 var myTree = {
     containerScroll: "true",
     width: 500,
     root: new Ext.tree.AsyncTreeNode({
         id: "source",
         text: "Root",
         expanded: true,
         draggable: true,
         expandable: true
     }),
     loader: new Ext.tree.TreeLoader({
         dataUrl: 'page.php?action=Get_Tree',
         preloadChildren: true,
         expandAll: function () {}
     }),
     xtype: "treepanel",
     loadMask: {
         msg: 'Loading...'
     },
     maskDisabled: false,
     id: "tree",
     listeners: {
         click: function (node, event) {
             // Render entity data in right panel
             handleAction(node);
         }
     }
 } 
```

当用户单击树的任何节点时，我从数据库中获取数据并使用`handleAction`方法渲染另一个面板。就我而言，我需要在另一个面板中显示节点的信息并更新它。在更新处理程序上，我需要将节点的文本/ID 更改为现在更新。

这工作正常，但我需要刷新树，以便我可以查看更新的节点。但是，它对我不起作用:(。

这是我更新节点的代码 -

```
var tree = Ext.getCmp('tree');
var id = req.responseText.split('#')[1];
var myId = 'Spec#' + entityId;
var node = tree.getNodeById(myId);
node.id = 'Spec#' + id;
node.text = updated_spec_id;
tree.enable();
tree.getLoader().dataUrl = 'page.php?todo=Get_Tree';
tree.getLoader().load(tree.root);
// This I have tried but not succeed. 
tree.getView().refresh();
tree.expandAll();
node.expand();
tree.getRootNode().expand(true); 
```

但是，当我使用鼠标单击手动展开它时，节点会更新。

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T19:24:53.903

你试过`doLayout`函数吗？文档摘录：

> 如果调用 add 时容器已经渲染，您可能需要调用 doLayout 来刷新视图，这会导致渲染任何未渲染的子组件。这是必需的，以便您可以在需要时添加多个子组件，同时只刷新一次布局。

在我看来，你的树表现正常。因为，您已经使用了`click`事件，因此当您单击节点时会触发此事件。

# spring - 未为事务代理创建 CGLIB 代理

> ID：15829883
> 
> 赞同：1
> 
> 时间：2013-04-05T09:05:32.493
> 
> 标签：spring, spring-aop, spring-transactions, cglib

这是我正在做的事情：

```
@Component("jdbcBookDao")
public class JdbcBookDao extends JdbcDaoSupport implements BookDao{

@Autowired
public void injectDataSource(DataSource dataSource){
    setDataSource(dataSource);
}

@Transactional
public int getStock(int isbn){
    String sql = "SELECT bs.STOCK FROM BOOK b, BOOK_STOCK bs WHERE b.id=bs.book_id AND b.isbn=?";
    return getJdbcTemplate().queryForInt(sql, isbn);
}
} 
```

在应用程序上下文中，我已经声明：

```
<tx:annotation-driven proxy-target-class="true"/> 
```

有了这个配置，我希望当我从上下文中获取 jdbcBookdao 时，它将是一个 CGLIB 代理（因为我已将 proxy-target-class 设置为 true）。但是当我调试时，它是作为 JdkDynamicAopProxy 的实例出现的。有人可以解释为什么即使我请求 CGLIB 代理也会创建 JDK 代理？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T09:04:31.070

如果您使用接口，则根据您将 Spring 源代码转换为对象，然后使用 JDK 代理，如果您使用普通类，则使用 cgLib。

```
e   public AopProxy createAopProxy(AdvisedSupport config) throws AopConfigException {
    if (config.isOptimize() || config.isProxyTargetClass() || hasNoUserSuppliedProxyInterfaces(config)) {
        Class targetClass = config.getTargetClass();
        if (targetClass == null) {
            throw new AopConfigException("TargetSource cannot determine target class: " +
                    "Either an interface or a target is required for proxy creation.");
        }
        if (targetClass.isInterface()) {
            return new JdkDynamicAopProxy(config);
        }
        if (!cglibAvailable) {
            throw new AopConfigException(
                    "Cannot proxy target class because CGLIB2 is not available. " +
                    "Add CGLIB to the class path or specify proxy interfaces.");
        }
        return CglibProxyFactory.createCglibProxy(config);
    }
    else {
        return new JdkDynamicAopProxy(config);
    }
}nter code here 
```

# java - 如何使用基于 Spring 的表单标签日期字段？

> ID：15829893
> 
> 赞同：1
> 
> 时间：2013-04-05T09:05:58.987
> 
> 标签：java, spring, jsp, date

在我的 Spring 应用程序中有 jsp 和 form。

demo.jsp 有一个字段`<form:input path="fromDate"/>`

在我的 DemoForm 中有字段`private Date fromDate;`，

当我们存储值 Null 值存储...

我的问题是他们的任何直接标签，用于将日期存储在我的 spring 提供的 jsp 标签中。

其他明智的给我其他替代方式..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:22:20.943

您需要在控制器中为 Date 定义自定义编辑器。请尝试以下代码。

```
@InitBinder
public void initBinder(HttpServletRequest request, ServletRequestDataBinder binder) {
    DateFormat df = new SimpleDateFormat("dd-MM-yyyy");
    df.setLenient(false);
    CustomDateEditor editor = new CustomDateEditor(df, true); // second argument 'allowEmpty' is set to true to allow  null/empty values.
    binder.registerCustomEditor(Date.class, editor);
} 
```

# ios - 适用于 Windows 的 iOS 模拟器

> ID：15829896
> 
> 赞同：3
> 
> 时间：2013-04-05T09:06:21.873
> 
> 标签：ios, macos

有没有适用于 Windows 的 iOS 模拟器？我需要一个而不是购买 macbook，只是为此。我希望我的测试人员使用它而不是购买 macbook。

对不起菜鸟问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:09:36.727

Hackintosh 将帮助您 :) 但是，如果您要在 iOS/Mac 上进行编程：购买 Mac ;) [http://www.hackintosh.com](http://www.hackintosh.com)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T09:10:08.050

不，唯一的官方方法是购买 Mac 进行开发。有一种东西叫做 hackintosh，但我不建议安装没有使用许可证的软件。盗版很糟糕。买个 Mac。

# sql - 为数据库优先方法记录 Entity Framework 5 的 SQL 语句

> ID：15829898
> 
> 赞同：0
> 
> 时间：2013-04-05T09:06:23.453
> 
> 标签：sql, asp.net-mvc, entity-framework

我正在尝试使用实体框架跟踪提供程序来记录生成的 SQL 语句。

我将上下文类更改为如下内容：

```
public partial class MyDBContext: DbContext
{

    public MyDBContext(string nameOrConnectionString)
    : base(EFTracingProviderUtils.CreateTracedEntityConnection(nameOrConnectionString), true)
{
    // enable sql tracing
    ((IObjectContextAdapter) this).ObjectContext.EnableTracing();
}

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        throw new UnintentionalCodeFirstException();
    }

    //DbSets definition....
} 
```

但这不会在“输出”窗口中记录 SQL 语句...

我应该在课堂上还是在 web.config 文件中有更多内容？（我正在开发一个 ASP.NET MVC 4 项目）

我在以下帖子中使用该解决方案：[Entity Framework 4.1 - EFTracingProvider](https://stackoverflow.com/a/6678775/1204249)

但我做了一些我不知道它们是否重要的​​更改：

该类是部分的而不是抽象的，构造函数是公共的而不是受保护的......

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:10:44.733

修改代码后，您需要在 web.config 中启用跟踪，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.diagnostics>
    <sources>
      <source name="EntityFramework.NorthwindEntities" switchValue="All" />
    </sources>
  </system.diagnostics>
</configuration> 
```

TraceSource 的名称应该是带有“EntityFramework”前缀的上下文名称。确保在将应用程序部署到生产环境时禁用跟踪，方法是`switchValue`将`Off`.

# c# - Sync Fx：同步成功，但没有同步数据

> ID：15829905
> 
> 赞同：1
> 
> 时间：2013-04-05T09:06:52.943
> 
> 标签：c#, winforms, synchronization, microsoft-sync-framework

我已经使用sync fx制作了一个用于离线场景数据同步的winform应用程序。问题是当我同步数据库时，应用程序给我一条消息说应用程序已成功同步（完成成功同步的行数）但是当我检查我的数据库时，数据未同步并且仍然相同。知道为什么会这样吗？

而且我想知道，有哪些可能会导致数据同步失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:08:07.207

订阅提供程序的 ApplyChangeFailed 事件，以查看同步期间是否遇到错误或冲突。

您可能还想说明您正在同步哪些数据库（sql ce？、sql express、server、localdb、Azure？）以及哪些更改失败（插入、更新、删除？）

# coffeescript - 在 CoffeeScript 中将十六进制值拆分为多行

> ID：15829907
> 
> 赞同：1
> 
> 时间：2013-04-05T09:06:59.140
> 
> 标签：coffeescript, hex

如何打破 Coffeescript 中的长十六进制值，使其跨越多行？

```
authKey = 0xe6b86ae8bdf696009c90e0e650a92c63d52a4b3232cca36e0ff2f5911e93bd0067df904dc21ba87d29c32bf17dc88da3cc20ba65c6c63f21eaab5bdb29036b83 
```

类似于

```
authKey = 0xe6b86ae8bdf696009c90e0e650a92c63d52a4b323\
          2cca36e0ff2f5911e93bd0067df904dc21ba87d29c3\
          2bf17dc88da3cc20ba65c6c63f21eaab5bdb29036b83 
```

使用**\**会导致*意外的“NUMBER”*错误，使用**换行符**会导致*意外的“INDENT”*错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:15:13.467

在 CoffeeScript 中这样做实际上没有意义，因为数字存储为 64 位 IEEE 754 值，并且您有太多的精度位，无法将值存储为数字。

如果你写

```
authKey = 0xe6b86ae8bdf696009c90e0e650a92c63d52a4b3232cca36e0ff2f5911e93bd0067df904dc21ba87d29c32bf17dc88da3cc20ba65c6c63f21eaab5bdb29036b83
console.log(authKey) 
```

那么记录的值是

```
1.2083806867379407e+154 
```

您希望将您的 authKey 存储为字符串或字节数组，这两者对于跨多行写入都是微不足道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:38:06.227

就像其他人所说的那样，与字符串相比，将其存储在数字中并没有多大意义。但是，我决定将一些东西放在一起以允许它：

```
stringToNumber = ( str ) -> parseInt( str.replace( /\n/g, '' ) )

authKey = stringToNumber """
  0xe6b86ae8bdf696009c90e0e650a92c63d52a4b323
  2cca36e0ff2f5911e93bd0067df904dc21ba87d29c3
  2bf17dc88da3cc20ba65c6c63f21eaab5bdb29036b83
""" 
```

就像雷说的那样，这只会导致：

```
1.2083806867379407e+154 
```

# jquery - jQuery Alpabetical 按名称在表格、A、B、C 等列表中过滤

> ID：15829910
> 
> 赞同：0
> 
> 时间：2013-04-05T09:07:00.127
> 
> 标签：jquery, html, css, filter

我有一个工作演示，但仅适用于列表视图，我需要能够单击顶部的 A、B、C 等列表，然后按表中的联系人姓名进行过滤。

因此，一旦您单击 A，它将显示表中以“A”开头的所有名称。

正如我所提到的，它适用于列表视图，但不确定如何让它在表格中工作？

[http://jsfiddle.net/37UxT/1/](http://jsfiddle.net/37UxT/1/)

希望有人可以提供帮助。它基于来自[http://www.ihwy.com/Labs/jquery-listnav-plugin.aspx](http://www.ihwy.com/Labs/jquery-listnav-plugin.aspx)的插件不确定在哪里或如何手动执行此操作，因为对于 jQuery 来说是相当新的。

```
$('ul.list-nav').listnav({         
    includeAll: false,                 
    noMatchText: 'Sorry, nothing matched this filter, please try another letter.', 
        includeAll: true, 
    initLetter: 'n', 
    showCounts: false                
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:51:46.877

我相信那里有许多“表格排序器”插件，但这个简短的代码可以实现您正在寻找的东西

**脚本**

```
 var alphas = 'abcdefghijklmnopqrstuvwxyz';
     $(document).ready(function () {
        var tmp = '';
        for (var x = 0; x < 26; x++) tmp += '<a href="#">' + alphas[x].toUpperCase() + '</a>&nbsp;&nbsp;';
        $('#table_filter').append(tmp);

        $('#table_filter a').click(function () {

           if ($(this).attr('id') == 'show_all') {
              $('#searchNames tbody tr').css('display', 'table-row');
              $('#message').html('displaying all rows');
              return false;
           }

           var alpha = $(this).html();
           $('#searchNames tbody tr').hide().filter(function () {
              var td = $('td:first', $(this));
              return td.length && td.html() && new RegExp('^' + alpha + '.*$', 'i').test(td.html().toLowerCase());
           }).css('display', 'table-row');
           $('#message').html('displaying rows with "' + alpha + '"');
           return false;
        })
     }); 
```

**和标记**

```
 <div id="table_filter">
     <a id="show_all" href="#">Show All</a>
  </div>
  <p id="message"></p>
  <table class="table1" id="searchNames" style="width:500px;">
     <thead>
        <tr>
           <th>CONTACT NAME</th>
           <th>col 2</th>
        </tr>
     </thead>
     <tbody>
        <tr>
           <td>ssfjkn jkdsnf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>asdl kln</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>apodf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>opkpokj</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>lkohasd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>nlkcn</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>qwdsdfsd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>essfjkn jkdsnf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>easdl kln</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>qapodf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>oopkpokj</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>dlkohasd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>snlkcn</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>vqwdsdfsd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>ssfjkn jkdsnf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>asdl kln</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>apodf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>opkpokj</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>lkohasd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>nlkcn</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>qwdsdfsd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>essfjkn jkdsnf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>easdl kln</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>qapodf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>oopkpokj</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>dlkohasd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>snlkcn</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>vqwdsdfsd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>ssfjkn jkdsnf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>asdl kln</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>apodf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>opkpokj</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>lkohasd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>nlkcn</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>qwdsdfsd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>essfjkn jkdsnf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>easdl kln</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>qapodf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>oopkpokj</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>dlkohasd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>snlkcn</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>vqwdsdfsd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>ssfjkn jkdsnf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>asdl kln</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>apodf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>opkpokj</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>lkohasd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>nlkcn</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>qwdsdfsd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>essfjkn jkdsnf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>easdl kln</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>qapodf</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>oopkpokj</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>dlkohasd</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>snlkcn</td>
           <td>Col2</td>
        </tr>
        <tr>
           <td>vqwdsdfsd</td>
           <td>Col2</td>
        </tr>
     </tbody>
  </table> 
```

**和 jsfiddle**

[http://jsfiddle.net/Khq9k/2/](http://jsfiddle.net/Khq9k/2/)

**更新**

使其基于 4 过滤`<td>`，替换

```
var td = $('td:first', $(this)); 
```

和

```
var td = $('td:nth-child(4)', $(this)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-08T20:57:02.967

上面的帖子不适用于从数据库中获取的动态值。我试着写一些不那么复杂的东西，效果也很好。

```
$( document ).ready(function() {
var alphas = 'abcdefghijklmnopqrstuvwxyz';
var tmp = '';
        for (var x = 0; x < 26; x++) tmp += '<a href="#">' + alphas[x].toUpperCase() + '</a>&nbsp;&nbsp;';
        $('#table_filter').append(tmp);

        $('#table_filter a').click(function () {
           var alpha = $(this).html();
           if(alpha == 'Show All'){
                $('#searchNames tbody tr').css('display', 'table-row');
           }
           else {
                $('#searchNames tbody tr').each(function( index ) {
                    var cur = $(':nth-child(1)', this).text().trim();
                    if(cur.charAt(0) === alpha) {
                        $(this).css('display', 'table-row');
                    }
                    else {
                        $(this).hide();
                    }
                });

           }
        });
    }); 
```

# iphone - 如何通过从iphone的UITapGestureRecognizer的角落拖动视图来增加视图的大小和高度？

> ID：15829911
> 
> 赞同：0
> 
> 时间：2013-04-05T09:07:03.047
> 
> 标签：iphone, ios, objective-c, xcode, uigesturerecognizer

我正在做一个必须显示一个图像的项目，当我单击图像时，一个“白色视图”将出现在图像的上侧。当我双击“两个大头针”时，会出现在“白色视图”上。当我拉这两个引脚时，白色视图的宽度和高度会增加和减少。

我无法做到这一点。

来自专家的任何想法都将受到高度欢迎。

```
Second_View.h file

#import <UIKit/UIKit.h>

@interface Second_View : UIViewController<UIGestureRecognizerDelegate>{

UITapGestureRecognizer *tap;
UISwipeGestureRecognizer *swipe;
UIPanGestureRecognizer *pan;
CGPoint startLocation;
CGFloat lastScale;
CGFloat firstX;
CGFloat firstY;
CGPoint lastLocation;

UIImageView *imageVw;
}

@property (nonatomic)  CGPoint center;

@property (nonatomic)  NSInteger count;

@property(nonatomic,retain) UIImageView *imageVw;

@end

Second_View.m file
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
self.view.backgroundColor = [UIColor grayColor];

imageVw = [[UIImageView alloc]initWithFrame:CGRectMake(200, 200, 500, 400)];
imageVw.image = [UIImage imageNamed:@"redacted2.jpg"];
imageVw.userInteractionEnabled=YES;
imageVw.autoresizesSubviews = YES;
imageVw.alpha = 0.93;  // for opacity
[self.view addSubview:imageVw];

tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
tap.numberOfTapsRequired = 1;
[imageVw addGestureRecognizer:tap];
tap.delegate=self;
pan=[[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(panAction:)];
[pan setMinimumNumberOfTouches:1];
[pan setMaximumNumberOfTouches:2];
[pan setDelegate:self];
count=0;
[imageVw addGestureRecognizer:pan];

}

- (void)panAction:(UIPanGestureRecognizer *)gestureRecognizer {
CGPoint translatedPoint = [(UIPanGestureRecognizer*)gestureRecognizer        translationInView:self.view];

if ([(UIPanGestureRecognizer*)gestureRecognizer state] ==     UIGestureRecognizerStateBegan) {
firstX = [[gestureRecognizer view] center].x;
firstY = [[gestureRecognizer view] center].y;
}

translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);

[[gestureRecognizer view] setCenter:translatedPoint];

if ([(UIPanGestureRecognizer*)gestureRecognizer state] ==   UIGestureRecognizerStateEnded) {
CGFloat velocityX = (0.2*[(UIPanGestureRecognizer*)gestureRecognizer     velocityInView:self.view].x);

CGFloat finalX = translatedPoint.x + velocityX;
CGFloat finalY = firstY;// translatedPoint.y + (.35*[(UIPanGestureRecognizer*)sender    velocityInView:self.view].y);

if (UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation])) {
if (finalX < 0) {
//finalX = 0;
} else if (finalX > 768) {
//finalX = 768;
}

if (finalY < 0) {
finalY = 0;
} else if (finalY > 1024) {
finalY = 1024;
}
} else {
if (finalX < 0) {
//finalX = 0;
} else if (finalX > 1024) {
//finalX = 768;
}

if (finalY < 0) {
finalY = 0;
} else if (finalY > 768) {
finalY = 1024;
}
}
}
}

-(void)handleTap:(UIPanGestureRecognizer *)gestureRecognizer
{

CGPoint location = [gestureRecognizer locationInView:gestureRecognizer.view];
NSLog(@"x:%f y:%f",location.x,location.y);

NSArray *subViewsOfImage = [imageVw subviews];

for (id subView in subViewsOfImage) {
CGRect frame1=[subView frame];
int x=0;
int y=0;
x=frame1.origin.x+frame1.size.width;
y=frame1.origin.y+frame1.size.height;

if ((location.x>=frame1.origin.x && location.x<x) && (location.y>=frame1.origin.y &&   location.y<y) )
{
NSLog(@"No");
return;
}
}

derivedView *view=[[derivedView alloc]initWithFrame:CGRectMake(location.x, location.y, 100, 30)];
[view setBackgroundColor:[UIColor whiteColor]];
[imageVw addSubview: view];
NSArray * subViewsOfImage1 = [imageVw subviews];
NSLog(@"subViewsOfImage = %@",subViewsOfImage1);
NSLog(@"Yes");

} 
```

派生视图.h 文件

```
#import <UIKit/UIKit.h>

@interface derivedView : UIView<UIGestureRecognizerDelegate>
{
UIPanGestureRecognizer *pan;
UITapGestureRecognizer *tap1;
UITapGestureRecognizer *tap2;
UITapGestureRecognizer *tap3;
CGPoint lastLocation;
CGFloat firstX;
CGFloat firstY;
UIImageView *rPinImgView;
UIImageView *lPinImgView;

}

@end 
```

派生视图.m 文件

```
- (id)initWithFrame:(CGRect)frame
{
self = [super initWithFrame:frame];

if (self) {
// Initialization code
pan=[[UIPanGestureRecognizer alloc]initWithTarget:self action:@selector(panAction:)];
[pan setDelegate:self];
[self addGestureRecognizer:pan];
tap1=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tapAction:)];
[tap1 setDelegate:self];
[self addGestureRecognizer:tap1];

}
return self;
}

- (void)tapAction:(UITapGestureRecognizer *)gestureRecognizer {

//       lPinImgView=[[UIImageView alloc]initWithFrame:CGRectMake(-15,-20, 30, 30)];
//    lPinImgView.image=[UIImage imageNamed:@"pin"];
//    // pin.frame=CGRectMake(frame1.origin.x, frame1.origin.y-15, 10, 10);
//    
//    rPinImgView=[[UIImageView alloc]initWithFrame:CGRectMake      (self.frame.size.width-15 ,23, 30, 30)];
//    //pin1.frame=CGRectMake(frame1.origin.x+frame1.size.width, frame1.origin.y+5, 10, 10);
//    rPinImgView.image=[UIImage imageNamed:@"pin1"];
//    [self addSubview:lPinImgView];
//    [self addSubview:rPinImgView];
NSArray *subViews=[self subviews];
NSLog(@"subViews%@",subViews);
if ([subViews count]>0) {
[lPinImgView removeFromSuperview];
[rPinImgView removeFromSuperview];
}else
{
lPinImgView=[[UIImageView alloc]initWithFrame:CGRectMake(-15,-20, 30, 30)];
lPinImgView.image=[UIImage imageNamed:@"pin"];
// pin.frame=CGRectMake(frame1.origin.x, frame1.origin.y-15, 10, 10);

rPinImgView=[[UIImageView alloc]initWithFrame:CGRectMake(self.frame.size.width-15 ,23, 30, 30)];
//pin1.frame=CGRectMake(frame1.origin.x+frame1.size.width, frame1.origin.y+5, 10, 10);
rPinImgView.image=[UIImage imageNamed:@"pin1"];
tap2=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector (rPinImageTap:)];
[rPinImgView addGestureRecognizer:tap2];
[tap2 setDelegate:self];
tap3=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(lPinImageTap:)];
[rPinImgView addGestureRecognizer:tap3];
[tap3 setDelegate:self];
[self addSubview:lPinImgView];
[self addSubview:rPinImgView];

}

- (void)lPinImageTap:(UIPanGestureRecognizer *)gestureRecognizer
{

}
- (void)rPinImageTap:(UIPanGestureRecognizer *)gestureRecognizer
{

}
- (void)panAction:(UIPanGestureRecognizer *)gestureRecognizer {

CGPoint translatedPoint = [(UIPanGestureRecognizer*)gestureRecognizer   translationInView:self];

if ([(UIPanGestureRecognizer*)gestureRecognizer state] ==     UIGestureRecognizerStateBegan) {
firstX = [[gestureRecognizer view] center].x;
firstY = [[gestureRecognizer view] center].y;
}

//  translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY);
translatedPoint = CGPointMake(firstX+translatedPoint.x, firstY+translatedPoint.y);

[[gestureRecognizer view] setCenter:translatedPoint];

if ([(UIPanGestureRecognizer*)gestureRecognizer state] ==   UIGestureRecognizerStateEnded) {
CGFloat velocityX = (0.2*[(UIPanGestureRecognizer*)gestureRecognizer   velocityInView:self].x);

CGFloat finalX = translatedPoint.x + velocityX;
CGFloat finalY = firstY;// translatedPoint.y + (.35*[(UIPanGestureRecognizer*)sender velocityInView:self.view].y);

if (UIDeviceOrientationIsPortrait([[UIDevice currentDevice] orientation])) {
if (finalX < 0) {
//finalX = 0;
} else if (finalX > 768) {
//finalX = 768;
}

if (finalY < 0) {
finalY = 0;
} else if (finalY > 1024) {
finalY = 1024;
}
} else {
if (finalX < 0) {
//finalX = 0;
} else if (finalX > 1024) {
//finalX = 768;
}

if (finalY < 0) {
finalY = 0;
} else if (finalY > 768) {
finalY = 1024;
}
}
}
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:10:08.313

查看下面的链接并下载项目并检查：

[https://github.com/spoletto/SPUserResizableView](https://github.com/spoletto/SPUserResizableView)

# c# - 登录期间以大写输入的文本仍然可以成功登录

> ID：15829912
> 
> 赞同：0
> 
> 时间：2013-04-05T09:07:10.883
> 
> 标签：c#, sql

我在 c# 中有我的 windows 应用程序的登录页面。即使我以大写形式输入用户名和密码，即打开大写字母，登录仍然成功。

这不应该是这种情况，因为数据库中的条目是小写的。

```
public partial class frmlogin : Form
{
    SqlConnection con = new SqlConnection("Data Source=TH07L019;Initial Catalog=procurement;Integrated Security=True");
    DataTable dt = new DataTable();
    SqlCommand cmd = new SqlCommand();
    SqlDataAdapter adp = new SqlDataAdapter();

    public frmlogin()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        cmd.Connection = con;
    }

    private void button1_Click(object sender, EventArgs e)
    {
        con.Open();
        cmd.CommandText = "select * from login where username='" + txtusername.Text + "' and password='" + txtpassword.Text + "'";
        adp.SelectCommand = cmd;
        adp.Fill(dt);
        if (dt.Rows.Count > 0)
        {
            frmmain main = new frmmain();
            main.Show();
        }
        else
        {
            MessageBox.Show("Please enter correct name and passowrd", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
            txtusername.Clear();
            txtpassword.Clear();
        }
        con.Close();
    }
} 
```

如何解决这个问题呢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:10:34.497

这很可能是数据库问题 - 默认[排序规则](http://msdn.microsoft.com/en-gb/library/ms143726.aspx#Collation_Defn)可能不区分大小写，这意味着数据库中的任何字符串比较都将不区分大小写。

您需要将这些字段的排序规则更改为区分大小写，或在用户名/密码检查查询中添加提示以使用此类排序规则。

笔记：

你的代码和实现有几个问题——一个是它对[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)开放——你不应该像那样将字符串连接到 SQL 中，而是使用[参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)。

此外，以纯文本形式存储密码是非常不安全的——如果您的数据库落入恶意之手，他们将拥有所有密码。你应该使用哈希。我建议阅读Troy Hunt[关于构建安全密码重置功能的所有你想知道的内容。](http://www.troyhunt.com/2012/05/everything-you-ever-wanted-to-know.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T09:11:08.553

撇开以纯文本形式存储密码从安全角度来看是最糟糕的想法，以及用户可以通过输入“特殊”密码^+对您的数据库执行 SQL 注入攻击这一事实，您的代码忽略大写字母的原因是您的 RDBMS 具有不区分大小写的字符串比较。

* * *

^+ *想象一下*（不要*尝试*）一个如下所示的密码字符串：

```
';drop table login-- 
```

你知道[会发生](http://xkcd.com/327/)什么吗？此外，

```
';select 1;-- 
```

将成为您的“主密码”，让任何人都可以像其他人一样登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:17:28.427

您应该在数据库中将默认排序规则更改为区分大小写，或者您可以在查询本身中更改排序规则。喜欢：

```
select * from login where username = 'someusername' COLLATE SQL_Latin1_General_CP1_CS_AS 
and password = 'somepassword' COLLATE SQL_Latin1_General_CP1_CS_AS 
```

# python - gdata-python-client 中的 gdata.client 和 gdata.service 有什么区别？

> ID：15829914
> 
> 赞同：1
> 
> 时间：2013-04-05T09:07:16.303
> 
> 标签：python, gdata, gdata-python-client

当我同时阅读这两本书时，它们似乎针对的是同一件事，并且是由同一位作者撰写的。那么这两者有什么不同呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:04:04.197

该`service.py`模块用于库的实现，通过引入实现`v1`大大改进。大多数（如果不是全部）其余 GData API**仅**使用实现。`client.py``v2`**`client`**

 **从[来源](https://code.google.com/p/gdata-python-client/source/browse/src/gdata/client.py)`client.py`：_

```
"""Provides a client to interact with Google Data API servers.

This module is used for version 2 of the Google Data APIs. The primary class
in this module is GDClient.

  GDClient: handles auth and CRUD operations when communicating with servers.
  GDataClient: deprecated client for version one services. Will be removed.
""" 
```**

# actionscript-3 - SecureSocket.isSupported == false

> ID：15829916
> 
> 赞同：0
> 
> 时间：2013-04-05T09:07:33.113
> 
> 标签：actionscript-3, security, sockets

我尝试使用 SecureSocket 但 SecureSocket.isSupported == false。当我使用简单的 Socket 时，一切正常。

有人使用 SecureSocket 吗？

这是我的代码： Security.allowDomain(' *'); Security.allowInsecureDomain("* "); Security.loadPolicyFile("xmlsocket://" + 主机 + ':' + 端口 + "/crossdomain.xml");

```
 if(SecureSocket.isSupported)
            {
                c = new SecureSocket();
                receiveBuffer = new ByteArray();
                receiveBuffer.endian = Endian.LITTLE_ENDIAN;

                c.addEventListener(Event.CLOSE, closeHandler);
                c.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
                c.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);

                c.addEventListener(Event.CONNECT, connectHandler);
            }

            else
            {
                try
                {
                    c = new SecureSocket();
                }
                catch(e:Error)
                {
                    trace(e.toString());
                }
        } 
```

后来我有错误：[SWF] /assets/flash/ssl/Main.swf - 63,146 bytes after decompression Error: Request for resource at tlssocket://game9.lgr.su:8081 by requestor from [https://game9.lgr .su/assets/flash/ssl/Main.swf](https://game9.lgr.su/assets/flash/ssl/Main.swf)失败，因为无法访问服务器。

*** 违反安全沙盒 *与 game9.lgr.su:8081 的连接停止 -** [https://game9.lgr.su/assets/flash/ssl/Main.swf](https://game9.lgr.su/assets/flash/ssl/Main.swf) 不允许

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T11:00:22.757

问题出在服务器端。我们在 Node JS 上的服务器端正在监听 NOT SECURE SOCKET 但正在获得 SECURE 连接。因此，当服务器以未加密的内容响应时，客户端的套接字刚刚关闭。所以做更好的服务器。

# android - 当我点击手机上的后退按钮时如何关闭我的 Android 应用程序？

> ID：15829918
> 
> 赞同：-1
> 
> 时间：2013-04-05T09:07:39.410
> 
> 标签：android

我创建了一个 Android 应用程序。

当我点击手机上的后退按钮时，我需要关闭或退出我的应用程序。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:30:02.417

您必须处理后退按钮功能

```
@Override
public void onBackPressed() {
    // TODO Auto-generated method stub
    super.onBackPressed();
    finish();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T09:11:09.800

当您按下后退按钮时，活动将从堆栈中弹出并销毁。堆栈中的前一个活动获得焦点。

假设您有 3 个活动。A、B 和 C。您导航到 C。A 到 B 到 c。您可以使用以下代码从 C 导航到 A。

您可以覆盖按下的后退按钮并调用`finish()`.

如果您在活动 A 中，您只需按返回按钮即可退出。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if (keyCode == KeyEvent.KEYCODE_BACK) {
    onBackPressed();

}

return super.onKeyDown(keyCode, event);
  }

 public void onBackPressed() {
Intent myIntent = new Intent(C.this, A.class);
myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);//clear the backstack
startActivity(myIntent);
finish();
return;
   } 
```

编辑：

stackoverflow 上的一些开发人员和一些人认为后退按钮至少应该回到上一个活动。它应该是那样的。因此，覆盖默认功能并清除回栈可能不是一个好主意。

您可能还想考虑使用导航抽屉

[http://developer.android.com/design/patterns/navigation.html](http://developer.android.com/design/patterns/navigation.html)

还要检查这个

[退出应用程序不受欢迎吗？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T09:10:44.463

```
@Override
public void onBackPressed() {
  this.finish();
} 
```

试试这个

假设您在某些内部活动中，请在应用程序类上设置一些布尔值，并在所有其他活动的简历中检查该布尔值，然后在设置布尔值时完成它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T09:25:43.883

您不需要调用任何方法来关闭应用程序；Android会照顾它。每当您按下后退按钮时，`finish()`都会调用该按钮`Activity`并销毁活动。你问的不是`Service`对吗？因为服务在后台运行，您必须根据需要关闭服务。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T09:36:47.183

请阅读 CommonsWare 的这个答案：[退出应用程序是否令人不悦？](https://stackoverflow.com/questions/2033914/quitting-an-application-is-that-frowned-upon/2034238#2034238)

它很好地解释了为什么这**不是**Android 应用程序设计的好方法。结论：

> 同样，我建议您不要尝试将您的应用程序移植到 Web，因为您在 Android 上报告的一些相同问题也会在 Web 应用程序中发现（例如，没有“终止”）。或者反过来说，如果你确实将应用程序移植到 Web 上，你可能会发现 Web 应用程序的流程可能更适合 Android，那时你可以重新访问 Android 端口。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-05T09:12:01.840

试试这个。

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {

        finish();
    }
    return false;
} 
```

# actionscript-3 - dispatchEvent 或每帧检查变量？在简单的亲子关系中什么更好？

> ID：15829919
> 
> 赞同：1
> 
> 时间：2013-04-05T09:07:44.603
> 
> 标签：actionscript-3, events, event-dispatching, enterframeevent

假设我有一个父对象和一个子对象。在某些时候，孩子中的变量（布尔值）发生了变化，父母需要注意。现在，在变量发生更改后让子级调度事件，或者让父级在已经存在的 enterFrameEventHandler 中的每一帧检查这个子级变量，在性能方面是否更便宜？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:58:16.203

这是正确的。事件循环检查。但更好的事件是回调。事件生成很重。如果您的变量或其他任何更改经常发生，那么您将在每次发生更改时创建一个新的 Event 实例。

由于这个问题，Rob Penner 编写了库信号：

[https://github.com/robertpenner/as3-signals](https://github.com/robertpenner/as3-signals)

# wordpress - wordpress 中不同域站点的单个 wp-admin

> ID：15829922
> 
> 赞同：1
> 
> 时间：2013-04-05T09:07:47.273
> 
> 标签：wordpress, mapping

我有两个不同的域

1)firstsite.com .........域名注册[http://godaddy.com/](http://godaddy.com/)并托管justhost

2)secondsite.com ..........域名注册[http://godaddy.com/](http://godaddy.com/)并托管justhost

两个站点都有不同的 Cpanel、Ftp、数据库

我已经安装了 wordpress 两个站点根目录

**任务**：为两个站点制作单个 wp-admin（意思是说使用单个管理面板操作两个站点）

我已经按照这些步骤在**firstsite.com 网站上进行操作**

1）首先在链接下方的帮助下创建多站点网络设置

[创建网络](http://codex.wordpress.org/Create_A_Network)

2）对于域映射，请使用以下链接

[WordPress MU 域映射](http://wordpress.org/extend/plugins/wordpress-mu-domain-mapping/)

但是该设置成功地适用于子域而不是单独的域（我可以包括其他站点，例如 sub.firstsite.com，并且没有单独的域 secondsite.com 的选项）

所以请指导我我在做什么是正确的方式还是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:12:30.630

您正在以正确的方式进行操作:)

但是网络管理只管理用户/站点/扩展/主题。每个子站点都有自己的管理员，用于常规的 Wordpress 管理员。

例如我的网络：

主网站[http://basgrospoing.fr](http://basgrospoing.fr)

子站点：

*   [http://worldgamecup.basgrospoing.fr](http://worldgamecup.basgrospoing.fr)
*   [http://kenbogard.basgrospoing.fr](http://kenbogard.basgrospoing.fr)
*   [http://republicofighters.basgrospoing.fr](http://republicofighters.basgrospoing.fr)

# javascript - 带有动态列表的 Jquery 可排序

> ID：15829924
> 
> 赞同：0
> 
> 时间：2013-04-05T09:07:48.597
> 
> 标签：javascript, jquery, jquery-ui-sortable

我有一段脚本可以正常工作，但只与一个脚本有关`<ul>`。

```
$("#sortme").sortable({
    update : function () {
        serial = $('#sortme').sortable('serialize');
        $.ajax({
            url: "includes/sort_menu.php",
            type: "post",
            data: serial,
            error: function(){
                alert("theres an error");
            }
        });
    }
}); 
```

这基本上安排了以后需要填充的**部分。**对于每个部分，`ul`都会创建一个新项目，并将下一个项目放置在相应的部分中。

为了使新项目可排序，我在将新项目附加到该部分时使用了以下代码：

```
$('ul.sortable.'+section+'').sortable(); 
```

这工作正常，并允许我重新排序指定部分中的项目。

由于这段代码包含在将项目添加到该部分时调用的函数中，因此出现了我想要保存订单的问题（就像在顶部脚本中发生的那样）。到目前为止，当物品重新排序时，我无法触发类似的功能。

重新排序特定列表时如何激活功能？

# c# - 如何允许来自 ASP.NET Web 应用程序和 Windows 服务的 SQL Server 数据库连接？

> ID：15829928
> 
> 赞同：0
> 
> 时间：2013-04-05T09:08:05.167
> 
> 标签：c#, asp.net, .net, sql-server, service

我有一个 ASP.NET Web 应用程序和在同一台服务器上运行的 Windows 服务。他们都需要使用以下代码连接到同一个数据库：

```
using (SqlConnection cn = new SqlConnection(strDBConnect))
{
    cn.Open();

    //And so on...
} 
```

但是当我尝试从服务连接时，它给了我这个异常：

> “无法打开用户默认数据库。登录失败。\r\n用户 'NT AUTHORITY\SYSTEM' 登录失败。”

我用于两者的连接字符串是，但在实际部署服务器上可能会有所不同：

> 数据源=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename='C:\Users\User\Databases\App_Data\Database1.mdf';用户实例=true;连接超时=15

所以我假设我需要在连接字符串中添加一些共享参数。所以我的问题是，如何确保多个进程可以连接到 SQL Server 数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:11:38.790

创建特定用户。

使用此用户作为 App Pool 的身份

将此用户用作服务的身份。

将此用户添加到具有必要权限的 sql server。

# json - 三.js及部分模型

> ID：15829929
> 
> 赞同：0
> 
> 时间：2013-04-05T09:08:06.163
> 
> 标签：json, html, three.js, webgl

有谁知道在使用 Three.js 时如何访问部分 3d 模型。我的 3d 模型由不同的部分组成，我需要单独移动它们。

有谁知道怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T18:01:45.737

我有一个类似的问题。我所做的是在搅拌机中为模型设置动画，导出动画，并在需要时使用 three.js 调用动画片段。

# optimization - 向量化代码以高效实施

> ID：15829930
> 
> 赞同：1
> 
> 时间：2013-04-05T09:08:24.040
> 
> 标签：optimization, parallel-processing, arm, vectorization, neon

以下是[IIR 代码](http://en.wikipedia.org/wiki/Digital_biquad_filter#Direct_Form_2)。我需要对代码进行矢量化处理，以便高效地编写 NEON 代码。

矢量化示例 **非矢量化代码**

```
for(i=0;i<100;i++)
a[i] =a[i]*b[i];     //only one independent multiplication cannot take
                     //advantage of multiple multiplication units 
```

**矢量化代码**

```
for(i=0;i<25;i++)
{
a[i*4] =a[i*4]*b[i*4];                //four  independent multiplications can use
a[(i+1)*4] =a[(i+1)*4]*b[(i+1)*4];    // multiple multiplication units to perform the 
a[(i+2)*4] =a[(i+2)*4]*b[(i+2)*4];    //operation in parallel
a[(i+3)*4] =a[(i+3)*4]*b[(i+3)*4];
} 
```

请帮我对下面的for循环进行向量化，以便利用硬件的向量能力有效地实现代码（我的硬件可以同时执行4次乘法）。

```
 main()
    {
        for(j=0;j<NUMBQUAD;j++)
    {
        for(i=2;i<SAMPLES+2 ;i++)
        {
            w[i] = x[i-2] + a1[j]* w[i-1] + a2[j]*w[i-2];
            y[i-2] = w[i] + b1[j]* w[i-1] + b2[j]*w[i-2];

        }
        w[0]=0;
        w[1] =0;
    }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:34:58.000

修正（或验证）方程后，您应该注意到方程的每一轮都有 4 个独立的乘法。任务变成找到将输入向量 x[...]、y[...]、w[...] 置换到某个寄存器的正确且最少数量的指令

```
 q0 = | w[i-1] | w[i-2] | w[i-1] | w[i-2]|
   q1 = | a1[j]  | a2[j]  | b1[j]  | b2[j] |   // vld1.32 {d0,d1}, [r1]!
   q2 =   q0 .* q1 
```

通过反转 for 循环，可以实现一种潜在的更有效的*波前并行方法。*

```
 x0 = *x++;

   w0 =  x0 + a*w1 + b*w2;  // pipeline warming stage
   y0 =  w0 + c*w1 + d*w2;  // 

   [REPEAT THIS]
     // W2 = W1; W1 = W0;
     W0 = y0 + A*W1 + B*W2;
     Y0 = W0 + C*W1 + D*W2;
     // w2 = w1; w1 = w0;

     x0 = *x++;
     *output++= Y0;

     w0 = x0 + a*w1 + b*w2;
     y0 = w0 + c*w1 + d*w2;
   [REPEAT ENDS]

   W0 = y0 + A*W1 + B*W2;   // pipeline cooling stage
   Y0 = W0 + C*W1 + D*W2;
   *output++= Y0; 
```

虽然 x0->w0->y0->W0->Y0 之间仍然存在依赖关系，但在小写和大写表达式之间存在完全 2 路并行性的机会。`w2=w1; w1=w0;`也可以尝试通过展开循环并进行手动寄存器重命名来摆脱值的移位。

# java - Postgresql 提交的数据不可见

> ID：15829933
> 
> 赞同：4
> 
> 时间：2013-04-05T09:08:29.020
> 
> 标签：java, postgresql, jdbc

我注意到我的应用程序中有奇怪的行为。提交后看起来提交的数据不可见。算法如下所示：

```
connection1 - insert into table row with id = 5
connection1 - commit, close
connection2 - open
connection2 - select from table row with id = 5 (no results)
connection2 - insert into table row with id = 5 (PRIMARY KEY VIOLATION, result is in db) 
```

如果在connection2上选择没有返回结果，那么我会插入，否则它是更新的。服务器有很多数据库（~200），看起来提交已经完成，但稍后会在数据库中进行更改。我使用java和jdbc。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:44:19.753

此行为对应于 REPEATABLE READ 隔离模式，请参阅[SET TRANSACTION](http://www.postgresql.org/docs/current/static/sql-set-transaction.html)：

> REPEATABLE READ
> 当前事务的所有语句只能看到在该事务中执行第一个查询或数据修改语句之前提交的行。

尝试`connection.setTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED)`看看它是否有所作为。

# php - azure：使用 PHP 设置 blob 内容类型

> ID：15829936
> 
> 赞同：0
> 
> 时间：2013-04-05T09:08:30.257
> 
> 标签：php, azure, blob, contenttype

如何使用 php 中的 setBlobProperties 来设置 ContentType？下面的代码是我通过谷歌找到的，但那个代码不起作用。视频确实出现在 blob 存储中，但内容类型设置为：application/octet-stream。此外，语言未设置为“nl-BE”，但显示为“空”。

```
$storageClient->putLargeBlob($_POST['container'], $_POST['filename'], $tempFile);
$storageClient->setBlobProperties($_POST['container'], $_POST['filename'], null, array(
    'x-ms-blob-content-language' => 'nl-BE',
    'x-ms-blob-content-type' => 'video/mp4'
)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:27:09.013

好的，对不起..这段代码确实有效，但我指的是错误的（有两个同名的php页面，并且正在编辑我不使用的那个）。

对不起！但是现在，将来正在寻找这个的人将把这个作为答案:)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-19T06:48:26.430

使用新的sdk，可以如下设置内容类型（我在这个例子中设置了gif图像的内容类型）。

```
$blobRestProxy = ServicesBuilder::getInstance()->createBlobService($connectionString);
//upload
$blob_name = "image.gif";
$content = fopen("image.gif", "r");

$options = new CreateBlobOptions();
$options->setBlobContentType("image/gif");
try {
    //Upload blob
    $blobRestProxy->createBlockBlob("containername", $blob_name, $content, $options);
    echo "success";
} catch(ServiceException $e){
    $code = $e->getCode();
    $error_message = $e->getMessage();
    echo $code.": ".$error_message."<br />";
} 
```

# android - 当用户移动地图时禁用我的位置并在他按下我的位置按钮时重新启用

> ID：15829938
> 
> 赞同：0
> 
> 时间：2013-04-05T09:08:36.350
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在使用`setMyLocationEnabled(true)`Google **Maps Android API v2**进行自动位置跟踪并像 Google Maps 应用程序一样显示指示器。我需要相机位置跟随我的位置指示器，以便它始终可见，除非用户平移地图。

因此，我正在使用该`onMyLocationChange`方法将相机移动到新位置，但是当用户平移地图或使用我的应用程序中的搜索字段时，会`onMyLocationChange`继续调用并且相机总是返回到我的位置坐标。

如何在启用我的位置时自动移动相机，在手动操作地图（平移、旋转或搜索）时禁用它，并在用户按下我的位置按钮时启用它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:40:01.980

**编辑：**

现在有`GoogleMap.setOnMyLocationButtonClickListener`，因此您可以跳过第 1 点并使用它。

* * *

2 月版的 Maps API v2 无法做到这一点。你能做的最好的事情是：

1.  拥有自己的“前往我的位置”按钮，以了解何时开始跟踪
2.  您自己的位置更改侦听器
3.  在with (returning !)的`View`顶部知道何时需要停止跟踪`SupportMapFragment``onTouchListener``false`

这个解决方案并不完美，因为它会在用户放大平移之前停止跟踪 - 当他们第一次触摸地图时它会停止，但我认为这是一个不会给用户带来任何混淆的解决方案：他们触摸了地图，所以可以期望跟踪停止并可以按下按钮启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:19:15.247

那么你为什么不只是为什么不打电话给`setMyLocationEnabled(false)`当用户与`TextView`？

您可以与地图检查的唯一交互是：

```
map.setOnMapClickListener(listener);
map.setOnMapLongClickListener(listener);
map.setOnMarkerClickListener(listener);
map.setOnMarkerDragListener(listener); 
```

您可以对这些交互执行相同的操作以禁用`my-location layer`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T06:32:16.270

从方法中删除这两行（如果有）

```
@Override
public void onLocationChanged(Location location) {
      //Remove these two lines
      googleMap.moveCamera(CameraUpdateFactory.newLatLng(latLng));
      googleMap.animateCamera(CameraUpdateFactory.zoomTo(15));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-13T03:39:24.720

您可以使用 setOnCameraMoveStartedListener 中的 REASON_GESTURE 来检测用户手势。

```
mMap.setOnCameraMoveStartedListener(new GoogleMap.OnCameraMoveStartedListener() {
    @Override
    public void onCameraMoveStarted(int reason) {
        if (reason == GoogleMap.OnCameraMoveStartedListener.REASON_GESTURE) {
            //Camera motion initiated in response to user gestures on the map.
        } else if (reason == GoogleMap.OnCameraMoveStartedListener.REASON_API_ANIMATION){
            //Non-gesture animation initiated in response to user actions.
        } else if (reason == GoogleMap.OnCameraMoveStartedListener.REASON_DEVELOPER_ANIMATION){
            //Developer initiated animation.
        }
    }
}); 
```

有关更多详细信息，请参阅文档：[https ://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraMoveStartedListener](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraMoveStartedListener)

# android - 在使用适配器和可绘制对象时尝试在 ListView 中分隔项目。保证金不起作用

> ID：15829940
> 
> 赞同：2
> 
> 时间：2013-04-05T09:08:41.807
> 
> 标签：android, android-arrayadapter, margins, android-drawable

我试图有一个列表视图，其中项目具有圆角并且项目彼此间隔开。这是使用自定义 ArrayAdapter 完成的。

```
MyCustomAdapter arrAdapter = new MyCustomAdapter();
setListAdapter(arrAdapter); 
```

我正在使用可绘制的图像来圆角

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="rectangle" >

  <corners android:radius="10dp" />

  <gradient
    android:angle="90"
    android:endColor="#993333"
    android:startColor="#ffffff"
    android:type="sweep" />

  <solid android:color="#ffffff" />

  <stroke
    android:width="1dp"
    android:color="#000000"  />
</shape> 
```

并将其设置在布局中作为最顶层容器的背景 - LinearLayout

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:layout_margin="4dp"
android:background="@drawable/square"
android:orientation="horizontal" >

<TextView
    android:id="@+id/routeTag"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="5dp"
    android:background="@drawable/circle"
    android:padding="10dp"
    android:text="text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/stop"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:padding="5dp"
            android:text="some text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="14sp" />

        <TextView
            android:id="@+id/stopD"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:padding="5dp"
            android:text="(text)"
            android:textColor="#777777"
            android:textSize="10sp" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/nextTT"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:paddingBottom="5dp"
            android:paddingLeft="5dp"
            android:paddingRight="9dp"
            android:paddingTop="5dp"
            android:text="text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="14sp" />

        <TextView
            android:id="@+id/moreTT"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_toRightOf="@id/nextTrainTime"
            android:paddingBottom="5dp"
            android:text="text"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="12sp" />
    </RelativeLayout>
</LinearLayout>

</LinearLayout> 
```

出于某种原因，在图形显示中，我能够完全按照我的意愿看到单个元素 - 周围有边距（我也希望它远离屏幕左右边缘）。但是当我运行它并让适配器完成它的工作时，我得到一个项目列表，触摸屏幕的两侧并且它们之间没有空间分开形成用于分隔正常列表中的项目的单行。

任何人都知道如何使它表现？我有广泛的搜索。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:24:03.680

您的项目和宽屏之间的空间可以通过以下方式完成：

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

   <item android:left="10dp"
      android:right="10dp" 
      android:top="10dp" 
      android:bottom="10dp">
      <shape android:shape="rectangle">...</shape>
</item> 
```

`android:left` `android:right`在我的例子中，我在 ListView 块上使用了 android:divider 和 android:dividerHeight 来分隔 ListView 的每个元素，以及带有属性的左右空间。

我得到信息的帖子是[这个](https://stackoverflow.com/questions/4984313/spacing-between-listview-items-android)

# c++ - 递归函数不完全递归对象/子对象

> ID：15829942
> 
> 赞同：0
> 
> 时间：2013-04-05T09:08:46.803
> 
> 标签：c++, recursion

我有一个递归函数`find()`，它试图找到具有给定 ID 的项目。下面我将类中的相关部分提取出来，做一个编译示例：

```
#include <iostream>
#include <cstdarg>
#include <cstdio>
#include <string>
#include <vector>

class Item {
private:
    std::vector<Item> subitems;

public:
    std::wstring id;

public:
    Item()
    : subitems(0), id(L"") {}

    Item(const Item& rhs)
    : subitems(rhs.subitems.size()) {
        for (std::size_t i = 0; i < rhs.subitems.size(); ++i)
            subitems[i] = rhs.subitems[i];
        id = rhs.id;
    }

    Item& operator==(const Item& rhs) {
        if (this != &rhs) {
            for (std::size_t i = 0; i < rhs.subitems.size(); ++i)
                subitems[i] = rhs.subitems[i];
            id = rhs.id;
        }
        return *this;
    }

    std::vector<Item> getSubitems() {
        return subitems;
    }

    Item addSubitems(Item * item ...) {
        va_list args;
        va_start(args, item);
        for (Item * arg = item; arg != NULL; arg = va_arg(args, Item *)) {
            subitems.push_back(*item);
        }
        va_end(args);

        return *this;
    }

    Item addSubitems(std::vector<Item>& items) {
        for (typename std::vector<Item>::value_type &item : items) {
            subitems.push_back(item);
        }

        return *this;
    }

    static Item * find(int id, std::vector<Item>& items) {
        std::wstring id_str = std::to_wstring(id);
        std::wcout << "--> find id=" << id_str << std::endl;
        std::wcout << "size of items=" << items.size() << std::endl;
        for (typename std::vector<Item>::value_type &c : items) {
            std::wcout << "it .. cur id=" << c.id << std::endl;
            if (!c.id.empty() && c.id == id_str) {
                std::wcout << "==> found" << std::endl;
                return &c;
            }

            if (!(c.getSubitems()).empty()) {
                std::wcout << "-> find " << id << " in subitems" << std::endl;
                std::vector<Item> subcls = c.getSubitems();
                std::wcout << "size of subitems=" << subcls.size() << std::endl;
                Item * sub = find(id, subcls);
                if (sub != NULL) {
                    std::wcout << "==> found in subitems" << std::endl;
                    return sub;
                }
            }
        }
        return NULL;
    }
};

int main() {
    Item c1;
    c1.id = L"0";
    Item c2;
    c2.id = L"1";
    Item c3;
    c3.id = L"2";
    Item c4;
    c4.id = L"3";
    //std::vector<Item> cll4({c4});
    //std::vector<Item> cll3({c3});
    //std::vector<Item> cll2({c2});

    c3.addSubitems(&c4, NULL);
    c2.addSubitems(&c3, NULL);
    c1.addSubitems(&c2, NULL);

    //c1.addSubitems(cll2);
    //c2.addSubitems(cll3);
    //c3.addSubitems(cll4);

    std::vector<Item> items({c1});

    Item * c = Item::find(2, items);
    std::wcout 
        << "Found item=" 
        << ((c != NULL && c == &c3) ? "true" : "false") << std::endl;
    std::wcout
        << ((c != NULL) ? c->id : L"") << std::endl;

    return 0;
} 
```

我创建了一些`Items`并添加`sub-Items`到它们中。现在我希望能够查找一个项目的 ID 并使用递归`find()`方法返回找到的项目或子项目对象。如果我使用`addSubitems()`（带有变量 args）添加项目，它将找到该项目但不返回（有效）项目对象。如果我通过传递项目向量来使用 addSubitems 方法，则 find() 方法不会完全递归所有子项目。

实际上，在过去的 4 个小时里，我一直在解决这个问题，而且我没有想法，这可能是我监督或错过的一件简单的事情。我添加了复制构造函数 / 和赋值运算符后记（只是为了看看行为是否有变化），但没有。不用担心item ID是字符串类型（原因是为了后面的序列化），这个类还处于早期阶段，所以我现在选择了字符串类型。

有人可以指出我的缺陷/问题以使这门课变得直截了当！提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:22:22.097

好吧，“它会找到项目但不返回（有效）项目对象”的一个问题。是：

您将 Item* 发送到 addSubItems 方法，然后将 (*Item) 添加到向量；这将初始化一个副本 c'tor，所以稍后，当您执行 is &c == &c3 时，显然这是错误的，因为虽然对象确实相同，但地址不会是因为它们是彼此的副本。

并不是说我理解您为什么要复制，但解决方案是测试

```
if (c == c3) -> activating the Item operator == 
```

或分配成员，保存一个

```
std::vector<Item*> subitems; 
```

然后问`if (c == c3) -> asking about the addresses`

# android - 复数在android中无法按预期工作

> ID：15829943
> 
> 赞同：6
> 
> 时间：2013-04-05T09:08:53.147
> 
> 标签：android, string

我正在使用 android-sdk 提供的复数字符串。我使用以下代码创建了一个复数字符串：

```
 <plurals name="valuestr">
        <item quantity="zero">Choose a value.</item>
        <item quantity="one">%d unit.</item>
        <item quantity="other">%d units.</item>
    </plurals> 
```

Java 代码：

```
textView.setText(getResources().getQuantityString(R.plurals.valuestr,0,0)); 
```

当我设置“0”以外的任何值时，这工作正常，但是当我设置“0”时，它显示**“0 单位”。**.

请帮忙！

**更新**

在互联网上搜索更多内容时，我遇到了一个使用`java.text.MessageFormat`类的解决方法：

```
<resources>
    <string name="item_shop">{0,choice,0#No items|1#One item|1&lt;{0} items}</string>
</resources> 
```

然后，从代码中您所要做的就是：

```
String fmt = resources.getText(R.string.item_shop);
textView.setText(MessageFormat.format(fmt, amount)); 
```

[您可以在MessageFormat 的 javadocs 中](http://download.oracle.com/javase/6/docs/api/java/text/MessageFormat.html)阅读有关格式字符串的更多信息

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T09:12:57.247

最近在 G+ 上发布了一篇关于此的帖子。简而言之，这是因为这不会选择最接近的匹配整数（0 = 零），而是因为它会寻找最佳的**语法**选择。

在您的示例中，您使用单位。正确的用法是；0 个单位 1 个单位 2 个单位

使，零几乎等于任何其他大于 1 的数量

在这里阅读全文； [https://plus.google.com/116539451797396019960/posts/VYcxa1jUGNo](https://plus.google.com/116539451797396019960/posts/VYcxa1jUGNo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-18T01:21:57.610

在资源文件部分中定义的`<plurals>`复数仅用于区分单数/复数字符串的语法。您不应像以前那样将它们用于其他显示逻辑。您应该在代码中添加一些检查逻辑。

[Android 开发者指南](http://developer.android.com/guide/topics/resources/string-resource.html#Plurals)清楚地说明了这一点：

> 虽然历史上称为“数量字符串”（在 API 中仍然称为），但数量字符串只能用于复数。例如，当有未读邮件时，使用数量字符串来实现诸如 Gmail 的“收件箱”与“收件箱 (12)”之类的东西是错误的。使用数量字符串而不是 if 语句似乎很方便，但重要的是要注意某些语言（例如中文）根本不区分这些语法，因此您总是会得到另一个字符串。

在我看来，您的解决方法 - 尽管在技术上适用于您当前的实施 - 看起来也不是一个干净的解决方案。未来的业务需求可能需要包含更复杂的逻辑，而不仅仅是显示不同的文本。或者，您的资源文件中可能有一个通用的“未选择项目”字符串，用于不同的位置，只有在您不坚持解决方案时才能重复使用。

通常，我会避免使用两种不同的格式化技术（String.format 样式格式化程序`%d`与 MessageFormat 样式格式化程序`{0}`，并选择一种您会在整个应用程序中坚持使用的格式化技术。

# java - 在数据库中保存数据的 SWT 问题

> ID：15829944
> 
> 赞同：0
> 
> 时间：2013-04-05T09:09:00.507
> 
> 标签：java, swt, toplink

我正在尝试使用 swt 创建一个可编辑的表，而我无法使用 toplink 保存在数据库中修改的日期：

```
 if (referenceViewId.equalsIgnoreCase(TISTableViewPart.ID)) {
        //TODO YUCHEN : Register and save objects in db
        System.out.println("test");

        final IViewPart viewPart = workbenchPage.findView(TISTableViewPart.ID);
        final TISTableViewPart vdv = (TISTableViewPart) viewPart;

        WorkingUnitMasterDataImpl sessionUow = new WorkingUnitMasterDataImpl();

        Object test = vdv.getLocalComposite().getTableViewer().getElementAt(1);
        sessionUow.registerObject(test);

        try {
            sessionUow.commitAndResume();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

 } 
```

通过使用

```
Object test = vdv.getLocalComposite().getTableViewer().getElementAt(1); 
```

我只能获取表格第一个列的对象，然后我使用

```
sessionUow.registerObject(test); 
```

保存更改。有人有想法将整个表作为一个对象来注册和提交简历吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:04:10.970

如果您使用正确设置了 ContentProvider 的 TableViewer，则假定 ContentProvider 包含表格包含的所有元素。

尝试通过 getElements() 方法访问这些元素，以防您的内容提供者实现 IStructuredContentProvider。

```
Object[] elements = tableViever.getContentProvider().getElements(); 
```

如果您想注册对象更改，您可以在 ContentProvider 的 setInput() 方法中进行。实际上，IContentProvider 接口的 javadoc 建议将此方法作为注册更改的地方。

如果您需要在某个时刻访问输入，TableViewer 对象允许您通过 getInput() 方法访问表输入：

```
Object tableInput = tableViewer.getInput(); 
```

祝你好运！

# c# - 将 C# 字符串解析为 hh:mm:ss

> ID：15829946
> 
> 赞同：0
> 
> 时间：2013-04-05T09:09:08.497
> 
> 标签：c#

给定两个字符串

```
string date = "02Mar13";
string duration = "03.20min"; 
```

我如何解析它们`DateTime`并以以下格式显示它们

```
string date = "02 March 2013";
string duration = "00:03:20"; 
```

我浏览了[这里](http://www.csharp-examples.net/string-format-datetime/)的列表，但没有一个符合我的要求。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T09:18:02.913

您需要使用[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-gb/library/8kb3ddd4.aspx)解析这些，并使用一个输出：

```
DateTime dt = DateTime.ParseExact(date + duration, 
                                  "ddMMMyymm.ss'min'", 
                                  CultureInfo.InvariantCulture);

string newDate = dt.ToString("dd MMMM yyyy");
string newDuration = dt.ToString("HH:mm:ss"); 
```

注意事项：我`'min'`用来表示`min`字符串中的文字 - 这是自定义格式字符串的一部分，允许内部字符串文字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T09:15:31.890

```
string date = "02Mar13";
string duration = "03.20min";
DateTime newDate = DateTime.ParseExact(date + duration, "ddMMMyymm.ss\\min", null);

date = newDate.ToString("dd MMMM yyyy");
duration = newDate.ToString("hh:mm:ss"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:16:23.277

[使用DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)进行 DateTime 解析非常简单：

```
DateTime.ParseExact(date, "ddMMMyy", null).ToString("dd MMMM yyyy"); // "02 March 2013" 
```

至于第二部分，如果是语义上的*持续时间*，那么使用[TimeSpan.ParseExact](http://msdn.microsoft.com/en-us/library/system.timespan.parseexact.aspx)更合适（尽管它需要对格式字符串进行一些摆弄）：

```
TimeSpan.ParseExact(duration, "mm\\.ss'min'", null).ToString("hh\\:mm\\:ss"); // "00:03:20" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T09:19:43.193

如何产生 dateResult

```
 string date = "02Mar13";
        string duration = "03.20min";
        var mat=Regex.Match(duration, "(.+?)min");
        var dateResult = DateTime.ParseExact(date + mat.Groups[1].Value.Replace(".",":"), "ddMMMyyHH:mm", Thread.CurrentThread.CurrentCulture); 
```

# java - 根据第一个下拉列表选择，第二个下拉列表应包含相关内容

> ID：15829948
> 
> 赞同：0
> 
> 时间：2013-04-05T09:09:14.780
> 
> 标签：java, struts2

根据第一个下拉列表项选择，我想要第二个下拉列表应该包含相关内容。我怎么能在java中做到这一点？例如，假设第一个下拉列表包含国家名称，第二个下拉列表包含州名称。如果我选择一个特定的国家，比如“印度”，从第一个下拉列表中选择名称，那么第二个列表应该只显示国家的相关州，即“印度”的州。这两个列表都是动态的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:20:29.717

这比 Java 和 struts 2 更像是 Javascript。

您可以通过两个选项获得一个 Map，其中第一个下拉列表的值作为键，另一个下拉列表的值与该项目相关。

Then when the first combobox's value is selected you can get the values form the javascript map and set it to the second dropdown.

其他选项是在第一个下拉列表的选择上发送一个 ajax 请求，并从结果中填充第二个下拉列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:21:46.380

我建议为此使用javascript：

*   使用 ajax，通过执行返回选项的 struts 操作，并重新加载您的`select`内容，例如使用 jquery：

    `$("#stateSelect").load('http://host/myStateAction.do?country=' + country);`

*   或在页面加载时加载整个国家/地区映射，并使用纯 JavaScript 更新第二个列表，无需服务器调用。为此，您可以例如在每个国家/地区存储`option`一个`data-states`包含相应州的属性。

`<option value="code" data-states="state1,state2,state3">countryName</option>`

否则，如果您想避免使用 javascript，您可以在触发更改事件时提交表单，然后在服务器端（struts 操作）根据第一个列表的值填充第二个列表，然后重定向到表单页面。`<select onchange="documents.forms['myForm'].submit()">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:26:19.213

你必须像下面这样使用 JavaScript：
这比从 java 端处理更好：

这是您的示例 HTML 文件：

```
<select id="country" name="country" aria-required="true" class="required">
    <option value="">Select Your Country</option>
    <option value="USA">India</option>
    <option value="CA">Pakisthan</option>
</select>
<p><label for="state">Select Your State<span title="required">*</span>
</label></p>
<select id="state" name="state" aria-required="true" class="required">
    <option value="" selected="">Select Your State</option>
    <optgroup label="India">
        <option value="WB">West Bengal</option>
        <option value="BH">Bihar</option>        
    </optgroup>
    <optgroup label="Pakisthan">
        <option value="LH">Lahore</option>
        <option value="IB">Islamabad</option>
    </optgroup>
</select> 
```

这是您的示例 JavaScript：

```
var stateVar = $('#state option, #state optgroup');
stateVar.hide();
$('#country').change(function () {
    stateVar.hide();
    $("#state optgroup[label='" + $(this).find(':selected').html() + "']")
        .children()
        .andSelf()
        .show();
}); 
```

你也可以使用 AJAX，它对你来说可能有点复杂，所以最好使用简单的 JavaScript。
您可以尝试这种方法，如有任何疑问，请告诉我。

# php - 使用rand() php函数显示随机xml文件

> ID：15829952
> 
> 赞同：-1
> 
> 时间：2013-04-05T09:09:33.743
> 
> 标签：php, xml, random

我正在尝试编写一个随机生成 xml 文件的 php。php 将生成 1-10 之间的随机数，每个数字 1-10 将在 php 中分配一个 xml 文件，该文件将在生成相应数字时出现。

到目前为止，我有：

```
<?php
 print rand() . "<br>"; 
 print rand(1, 10); 
 ?> 
```

如何将 xml 文件集成到这个 php 中？使用这个 xml 示例：

**示例 1**

```
<?xml version="3.0" encoding="utf-8" ?> 
<channel>
<title>The Dog in the Park</title> 
<link>http://pets.com/doginthepark/</link> 
<description>
  The dog in the park
<item> 
<guid>1234</guid>
<title>poodle's video</title> 
```

**示例 2**

```
<?xml version="3.0" encoding="utf-8" ?> 
<channel>
<title>The Cat in the Park</title> 
<link>http://pets.com/kitteninthepark/</link> 
<description>
  The cat in the park
<item> 
<guid>1235</guid>
<title>kitten video</title>
<item>
<guid>123455</guid>
<title>tiger video</title> 
```

因此，上面的 XML 文件具有分配的数字 1 和 2。如何将代码中的数字分配给正确的 XML，以及如何生成数字 1-10 的随机 XML 返回，它还显示 XML 文件详细信息.

任何帮助将不胜感激！抱歉，如果这个问题很明显，我是这方面的新手:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:21:10.377

你不能把 xml 文件放到一个数组中。然后在页面提交时有这样的东西

```
 echo file_get_contents($xmlarray[rand(1,10)]); 
```

我想这会奏效。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:18:34.710

尝试这个：

```
<?
header('Content-type: text/xml');
$XMLFiles = array ("path/dogs.xml", "path/cats.xml", "path/moreFiles.xml");
$XMLFile = $XMLFiles[rand(0,9)];
header('Content-Disposition: attachment; filename="'.$XMLFile.'"');
print file_get_contents($XMLFile);
?> 
```

将直接将您的 XML 文件之一输出为 XML 文件！
使用标题时不要输出任何其他内容！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T09:25:15.347

我会这样做，这样您就不必在每次添加新的 xml 文件时重新编码数组随机值，​​并且文件的名称无关紧要。

```
<?php

    $files = glob('path/to/files/*.xml');
    $xml = file_get_contents($files[rand(0, count($files)-1)]);
    // do something with the xml here
    echo $xml;

?> 
```

供参考：[`glob`](http://php.net/glob), [`file_get_contents`](http://php.net/file_get_contents), [`rand`](http://php.net/rand),[`count`](http://php.net/count)

# asp.net - Session.Remove(Key) 抛出空引用异常

> ID：15829953
> 
> 赞同：1
> 
> 时间：2013-04-05T09:09:35.250
> 
> 标签：asp.net, session, session-variables, session-state

在会话中添加一项时，我的 aspx.cs 页面出现以下错误

```
Session["request_params"]=new Hashtable(); 
```

参数异常

项目已添加。字典中的键：'request_params' 正在添加的键：'request_params'

但据我了解，向会话添加或更新值永远不会引发任何异常。

我正在使用 InProc 会话模式。

任何人的任何建议。

# mysql - MySQL 将 column_name 与列数据匹配

> ID：15829957
> 
> 赞同：-2
> 
> 时间：2013-04-05T09:09:37.307
> 
> 标签：mysql, mysqli

所以我正在尝试使用两个（已经）生成的表。在一个表 1 中有一个名为的列`column_code` 在表 2 中，列的名称与中的数据相同`column_code`

每个示例表 1：

```
meta_data
----------------------------------
| pid         | 1                |
| question    | favorite website |
| column_code | AA123ZZ          |
---------------------------------- 
```

哪里`column_code`有一个名为：的内容`'AA123ZZ'` ，问题是：你最喜欢的网站是什么

表 2：

```
content
-----------------------------------
| id          | 4                 |
| submit_date | 14-01-2013        |
| AA123ZZ     | stackoverflow.com |
----------------------------------- 
```

这个 table_name 的内容`AA123ZZ`例如是“ *stackoverflow.com* ”

现在我想要的是一个查询，其结果将类似于：

```
id: = 1
what is your favorite website: stackoverflow.com 
```

所以实际上`AA123ZZ`代表这个问题，我没有其他方法可以将它们匹配在一起，我该怎么做？

很抱歉，我无法更清楚地说明这一点。我得到了这两张桌子，确实它们似乎缺少了一些东西。

## 所以试着让这个更清楚一点。

在内容表中，表名`AA123ZZ`是问题的“代码”。

数据库的创建者应该只是将问题作为列名而不是此代码`AA123ZZ`。现在我需要将此代码与里面的内容相匹配`meta_data`。

因此，在 question_column 中的 meta_data 中，您可以找到：“最喜欢的网站”，然后`column_code`您会在`AA123ZZ`.

在该`AA123ZZ`列的内容表中，您会发现：*stackoverflow.com*

如您所见，我无法在内部连接中轻松匹配这些。

那么有没有办法将一个表中的 column_name 与另一个表中的列的内容相匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T10:42:00.463

您不能连接`column name`本身可变的表。您将需要在此处修复模式，也许要从表中包含一个`foreign key`值到`meta_data`表中，`content`然后您可以从那里`join`对两个表执行简单操作。

[阅读有关外键的更多信息](http://www.w3schools.com/sql/sql_foreignkey.asp)

# asp.net - 多个Page_Load方法，调用哪个？

> ID：15829959
> 
> 赞同：1
> 
> 时间：2013-04-05T09:09:45.010
> 
> 标签：asp.net, pageload

在现有的 ASP.NET 应用程序中，我有一个包含`Page_Load`方法的基类：

```
public class PageBaseClass : System.Web.UI.Page {
    protected virtual void Page_Load(object sender, EventArgs e) {
        // do stuff...
    }
} 
```

我有一个从这个基类继承的实际页面。但是，它不会覆盖现有`Page_Load`方法，而是像这样声明一个新方法：

```
public class ActualPage : PageBaseClass {
    protected void Page_Load(object sender, EventArgs e) {
        // do other stuff...
    }
} 
```

编译器警告我`Page_Load`实际页面中的方法正在隐藏现有`Page_Load`方法。如此有效，有两种单独`Page_Load`的方法，因为旧的方法没有被覆盖，而是隐藏了。

现在我的问题是，在这种情况下，ASP.NET 体系结构在其生命周期中做了什么？调用的是哪一个？或者他们都被称为？

*注意：我知道这是一个糟糕的设计，我不确定原作者的想法，我只是想了解正在发生的事情以及这将如何影响系统的逻辑。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:21:04.557

经过一番挖掘，我发现了发生了什么。

简短的回答：只调用最顶层的方法！

起初，我设置了一些断点，例如 MelanciaUK 在评论中建议的。这向我表明只有最顶层的方法被调用。

深入挖掘，我查看了 volpav 的建议。设置为true`AutoEventWireup`是真的，它会自动将方法连接到事件处理程序（因为这确实不是手动完成的）。然而，与他声称的不同，只有 top`Page_Load`方法被调用。

反思类型给了我一些线索：

```
var pageloads = this.GetType().GetMethods(System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic).Where(m => m.Name == "Page_Load");
var pageload = this.GetType().GetMethod("Page_Load", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic); 
```

该`pageloads`值最终包含两个结果：两种`Page_Load`方法，一种具有声明类型`ActualPage`，另一种具有声明类型`PageBaseClass`。

我虽然这会导致第二次调用出现问题，因为有两个结果，我希望它会抛出一个`AmbiguousMatchException`. 然而，它没有。它包含`MethodInfo`for 中的方法`ActualPage`。

深入挖掘后，我偶然发现了 K. Scott Allen 的一篇文章：Inside AutoEventWireup [http://odetocode.com/blogs/scott/archive/2006/02/16/inside-autoeventwireup.aspx](http://odetocode.com/blogs/scott/archive/2006/02/16/inside-autoeventwireup.aspx)

根据他的文章，连接事件发生如下：

```
Delegate.CreateDelegate(typeof(EventHandler), this, "Page_Load", true, false); 
```

我自己执行这个，我发现这个调用创建了一个指向`Page_Load`方法的委托`ActualPage`，就像`GetMethod`调用返回那个方法一样。

因此，如果一个事件方法被自动连接起来，它似乎不会连接任何被隐藏的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:24:27.877

这两种方法中的代码都将被调用，因为它们本质上是一个事件处理程序（一个由基类附加，另一个由您的“ActualPage”类附加）。这是由于“AutoEventWireup”属性设置为“true”（默认情况下在您的标记中设置）。

关于“AutoEventWireup”的相关问题：[AutoEventWireUp 页面属性是什么意思？](https://stackoverflow.com/questions/680878/what-does-autoeventwireup-page-property-mean)

**更新**

原来我说这两种方法都将被调用是错误的，事实上，只有在“ActualPage”上声明的方法才会被调用。请参阅下面的 Rene 的答案。

# c# - JsonSerializer 调用容器 Equals 覆盖方法

> ID：15829962
> 
> 赞同：1
> 
> 时间：2013-04-05T09:10:06.327
> 
> 标签：c#, json, serialization, polymorphism, overriding

首先，环顾四周并了解覆盖/虚拟等。但没有发现任何特定于我的情况的案例——我敢肯定这不是唯一的。我只想确保我使用的实现是正确的实现。我有以下代码设置来演示我的问题：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Text;
using Newtonsoft.Json;
using Newtonsoft.Json.Converters;

namespace Sandpit
{
    public class Program
    {
        static void Main()
        {
            var fixture = new Fixture
                {
                    Name = "Fixture Name",
                    Participants = new List<Participant> {new Participant {Name = "Participant Name"}}
                };

            var writer = new StringWriter(new StringBuilder());
            var serializer = new JsonSerializer();
            serializer.Converters.Add(new StringEnumConverter());
            serializer.Serialize(writer, fixture);

            Console.Write(writer.ToString());
            Console.ReadKey();
        }
    }

    public class Fixture
    {
        public string Name { get; set; }
        public List<Participant> Participants { get; set; }

        public override bool Equals(object obj)
        {
            var fixture = (Fixture)obj;

            return fixture.Name == Name;
        }

        public override int GetHashCode()
        {
            return Name.GetHashCode();
        }
    }

    public class Participant
    {
        public string Name { get; set; }

        public override bool Equals(object obj)
        {
            var participant = (Participant)obj;

            return participant.Name == Name;
        }

        public override int GetHashCode()
        {
            return Name.GetHashCode();
        }
    }
} 
```

现在，当它运行时，我在`var fixture = (Fixture)obj;`.

> 无法将“System.Collections.Generic.List`1[Sandpit.Participant]”类型的对象转换为“Sandpit.Fixture”类型。

我不明白为什么它会进入那里。以及为什么这会破坏重写`object`方法的正确实现。

我知道我可以通过这样做来解决这个问题`public new bool Equals(object obj)`。我这样做对吗？这些对象也很好地集成到我正在处理的应用程序中，进行此更改是否可能有任何副作用？

非常感谢，马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:17:25.523

`Fixture`对您的和`Participant`课程进行的小改动可以解决此问题：

```
public class Fixture 
{
    public string Name { get; set; }
    public List<Participant> Participants { get; set; }

    public override bool Equals(object obj)
    {
        var fixture = obj as Fixture;
        return fixture == null ? false : fixture.Name == Name;
    }

    public override int GetHashCode()
    {
        return Name.GetHashCode();
    }
}

public class Participant 
{
    public string Name { get; set; }

    public override bool Equals(object obj)
    {
        var participant = obj as Participant;
        return participant == null ? false : participant.Name == Name;
    }

    public override int GetHashCode()
    {
        return Name.GetHashCode();
    }
} 
```

如果要与另一种类型的元素进行比较，则可以确定两者不相等。

# jquery - jQuery在关闭时更改切换顺序

> ID：15829965
> 
> 赞同：1
> 
> 时间：2013-04-05T09:10:12.230
> 
> 标签：jquery, toggle, simultaneous

我正在寻找重新定义我的切换功能。现在它可以很好地切换，但是，第一个切换“打开”两个不同的部分 - 这很好。关闭它们时，我想同时关闭它们，或者至少先关闭列表。此外，如果单击列表以外的任何内容，我还想关闭两者。

```
$('#LoginButton').click(function(){
 $('.username').animate({
        width : 'toggle'
 }, 1000, 'swing',function(){ //Set new LoginButton width
    var newWidth = ($('.username').width()); //get new width
    $('#LoginButton').toggleClass('expanded'); //just for rounded corners
    $("#profilesettings").width(newWidth).toggle(300); //new list width animation
 });
}); 
```

我现在拥有的：[小提琴](http://jsfiddle.net/EverybdyLies/CTms3/12/)

任何帮助是极大的赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:18:54.727

您正在使用方法的回调函数`animate`，该`hide`方法应在`.username`元素可见时调用，因此动画同时执行。

```
$('#LoginButton').click(function () {
    var $username = $('.username'),
        $profile = $('#profilesettings'),
        state = true;

    if ($username.is(':visible')) {
        $profile.hide(1000);
        state = false;
    }
    $username.animate({
        width: 'toggle'
    }, 1000, 'swing', function () {
        if (state) {
            var newWidth = $(this).width();
            $profile.width(newWidth).show(300);
        }
        $('#LoginButton').toggleClass('expanded');
    });
}); 
```

[http://jsfiddle.net/wxXyM/](http://jsfiddle.net/wxXyM/)

# eclipse - Python 没有出现在首选项窗口中

> ID：15829971
> 
> 赞同：0
> 
> 时间：2013-04-05T09:10:40.940
> 
> 标签：eclipse, pydev

我正在尝试在 Windows 7 上的 Eclipse Helios 中安装 Pydev。我已经通过`help/Install new software`. 尝试配置 Eclipse 以查找我安装的 Python 时，( `Window -> Preferences`) 出现的列表不包含 Python。当我在谷歌浏览这个时，有人建议以管理员身份运行 eclipse。当我再次尝试安装软件时，它说

```
 Software being installed: Pydev Mylyn Integration 0.4.0
 (org.python.pydev.mylyn.feature.feature.group 0.4.0)
  Missing requirement: Pydev Mylyn Integration 0.4.0 
  (org.python.pydev.mylyn.feature.feature.group 0.4.0) requires
 'org.eclipse.mylyn.context.core 0.0.0' but it could not be found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:59:59.920

你为什么使用旧版本的 Eclipse？我首先尝试的是[下载](http://www.eclipse.org/downloads/)稳定的 Eclipse 版本（当前是 Juno），使用新的工作空间位置打开它（以避免加载任何旧的配置文件）并使用他们[建议的方法](http://pydev.org/manual_101_install.html)安装 PyDev （添加`pydev.org/updates`软件源并选择他们的包）。

如果您在执行此操作后仍然遇到问题，请告诉我们 - 就我个人而言，我从未遇到过类似的问题。

# c# - mvc 编辑器用于禁用

> ID：15829972
> 
> 赞同：1
> 
> 时间：2013-04-05T09:10:42.453
> 
> 标签：c#, asp.net, asp.net-mvc

我正在使用下面的代码来允许将用户名添加到 from 但我只希望管理员用户能够手动添加用户名。但是一个普通用户只能查看他们出现的用户名，我将如何进行互连，以便可以在标签中查看编辑器中的数据

当前要放入编辑器的代码

```
@Html.EditorFor(model => model.UserName) 
```

代码已更改

```
 @if (ViewBag.isAdmin == false)
            {
                @Html.LabelFor(model => model.UserName, new { id = "username" })
            }
            else
            {
                @Html.EditorFor(model => model.UserName)
            } 
```

渲染代码

```
<label id="username" for="UserName">UserName</label>
<input id="UserName" class="text-box single-line" type="text" value="" name="UserName" data-val-required="Please enter a user name." data-val="true"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:50:39.783

```
@if (ViewBag.isAdmin)
{
    @Html.EditorFor(model => model.UserName)
}
else
{
    @Model.UserName
    @Html.HiddenFor(model => model.UserName)
} 
```

这是简单的方法。

# php - 生成的 CSRF 令牌过多（PHP），我该如何处理它们？

> ID：15829977
> 
> 赞同：3
> 
> 时间：2013-04-05T09:10:52.250
> 
> 标签：php, token, csrf, csrf-protection, unused-variables

我遇到了一个问题。按照 OWASP 备忘单，我在 PHP 中实现了一个一次性 CSRF 令牌系统（基本上是从 OWASP 复制和粘贴）。每个表单或链接（生成某些操作的链接）都会创建自己的 CSRF 令牌，一旦使用，它将被删除。应用程序是一个网站，因此可以同时打开多个选项卡。

问题是每次加载页面时，它都会创建一个新的 CSRF 令牌（即使您只是点击重新加载而不发送表单）。例如，在管理面板中，有一个项目列表，每个项目都可以使用具有 CSRF 令牌的链接删除（所有链接都使用相同的 CSRF 令牌），但如果您重新加载页面，则会生成一个新的 csrf。

在一天结束时，我得到了比我想要的更多的未使用令牌。这是某些服务器中的问题。

TLDR；我为每个请求生成一个令牌。我删除了所有使用的令牌（除了 ajax 请求令牌，一个小时后我删除了）。我的问题是未使用的令牌，归根结底，它们太多了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:17:33.253

没有（实用的）方法可以知道您的用户是否仍将使用令牌。因此，您将不得不在 x 小时后自动删除（从而使它们无效），例如通过使用 cronjob。

只是一个建议：你确定你真的需要一次性代币吗？OWASP 自己说这对于安全性来说不是绝对必要的：“一般来说，开发人员只需要为当前会话生成一次这个令牌。[...]）（[https://www.owasp.org/index.php/Cross -Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet)）。

请记住，一次性令牌也会使标签式浏览或使用浏览器历史记录变得非常痛苦。

# c# - 如何根据子项的大小调整 WPF MenuItem 的大小

> ID：15829985
> 
> 赞同：1
> 
> 时间：2013-04-05T09:11:21.500
> 
> 标签：c#, wpf, combobox, menuitem

我有上下文菜单。menuitems 之一包含组合框。当呈现带有组合框的菜单项时，menuitem 比组合框宽得多。 ![有问题的快照](https://i.stack.imgur.com/NtmSH.png) 任何想法如何设置菜单项的大小以连接到组合框。这是我创建菜单和组合框的方法：

```
XamComboEditor combo = new XamComboEditor();
combo.ItemsSource = Context.RecipientOptions;
combo.DisplayMemberPath = "Display";
combo.IsEditable = true;
combo.MinWidth = 250;
combo.DropDownResizeMode = PopupResizeMode.None;
combo.HorizontalAlignment = HorizontalAlignment.Stretch;
combo.LimitToList = false;
combo.SetBinding(XamComboEditor.SelectedItemProperty, new Binding("Recipient") 
                 {Source = this, Mode = BindingMode.TwoWay});
MenuItem comboMenu = new MenuItem {Header = combo, StaysOpenOnClick = true, 
                                   RenderSize = combo.RenderSize,};
menu.Items.Add(comboMenu);          
MenuItem removeMenu = new MenuItem {Header = "Remove this recipient"};
removeMenu.Click += (sender, e) => RemoveRecipient();
removeMenu.IsEnabled = ActionSet.Actions.Count > 1 || Recipient != null;

menu.Items.Add(removeMenu); 
```

我试图设置 RenderSize 但在运行时它为零。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T11:52:52.120

[这](http://msdn.microsoft.com/de-de/library/ms747082%28v=vs.85%29.aspx)是来自 Microsoft 的 MenuItem ControlTemplate 示例的链接。您可以编辑这个以获得所需的方面。例如在这个 xaml 中：

```
<ControlTemplate x:Key="{x:Static MenuItem.SubmenuItemTemplateKey}" TargetType="MenuItem">
    <Border Name="Border" >
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" SharedSizeGroup="Icon"/>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" SharedSizeGroup="Shortcut"/>
                <ColumnDefinition Width="13"/>
            </Grid.ColumnDefinitions>
            <ContentPresenter Name="Icon" Margin="6,0,6,0" VerticalAlignment="Center" ContentSource="Icon"/>
            <Border Name="Check"  
                    Width="13" Height="13" 
                    Visibility="Collapsed"
                    Margin="6,0,6,0" 
                    Background="{StaticResource NormalBrush}"
                    BorderThickness="1"
                    BorderBrush="{StaticResource NormalBorderBrush}">
                <Path Name="CheckMark"
                      Width="7" Height="7" 
                      Visibility="Hidden" 
                      SnapsToDevicePixels="False" 
                      Stroke="{StaticResource GlyphBrush}"
                      StrokeThickness="2"
                      Data="M 0 0 L 7 7 M 0 7 L 7 0" />
            </Border>
            <ContentPresenter Name="HeaderHost"
                              Grid.Column="1"
                              ContentSource="Header"
                              RecognizesAccessKey="True"/>
            <TextBlock x:Name="InputGestureText"
                        Grid.Column="2"
                        Text="{TemplateBinding InputGestureText}"
                        Margin="5,2,0,2"
                        DockPanel.Dock="Right" />
        </Grid>
    </Border>
    <ControlTemplate.Triggers>
        <Trigger Property="Icon" Value="{x:Null}">
            <Setter TargetName="Icon" Property="Visibility" Value="Hidden"/>
        </Trigger>
        <Trigger Property="IsChecked" Value="true">
            <Setter TargetName="CheckMark" Property="Visibility" Value="Visible"/>
        </Trigger>
        <Trigger Property="IsCheckable" Value="true">
            <Setter TargetName="Check" Property="Visibility" Value="Visible"/>
            <Setter TargetName="Icon" Property="Visibility" Value="Hidden"/>
        </Trigger>
        <Trigger Property="IsHighlighted" Value="true">
            <Setter TargetName="Border" Property="Background" Value="{StaticResource SelectedBackgroundBrush}"/>
        </Trigger>
        <Trigger Property="IsEnabled" Value="false">
            <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

如果不需要，您可以编辑 Grid.CollumnDefinitions 以调整大小甚至删除某些列。如果您从单独的 ResourceDictionary 中的链接添加 controlTemplate（我建议您这样做），请不要忘记将它也添加到 App.xaml 文件中的 MergeDictionaries 中，以使其在整个应用程序中可见。如果您直接将其添加到应用程序的根目录中，请执行以下操作：

```
 <Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/YourApplicationName;component\MenuStyle.xaml"/>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

我希望这可以帮助您解决问题。

# sql - 查询结果为空

> ID：15829987
> 
> 赞同：0
> 
> 时间：2013-04-05T09:11:25.593
> 
> 标签：sql

我正在尝试以下查询

```
`select
 skillmgt.*, competences.Competence_Description
 from skillmgt
 inner join competences
 on skillmgt.eid=competences.competence_id
 where eid=121 and datename(yyyy,timestamp)=2013` 
```

查询成功运行，但它没有返回任何结果，尽管我的结果`eid's`等于 some`competence_id's`并且该`where`子句也是 true

实际上，即使没有该`where`子句，它也不起作用！

编辑：通过这样做解决了它：

```
 select skillmgt.*,competences.* from competences
 join skillmgt
 on competences.competence_id=skillmgt.cid
 where skillmgt.eid=121 and datename(yyyy,skillmgt.timestamp)='2013' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:13:00.543

`datename`返回一个字符串。根据您的 SQL 风格，您应该尝试

```
select
 skillmgt.*, competences.Competence_Description
 from skillmgt
 inner join competences
 on skillmgt.eid=competences.competence_id
 where eid=121 and datename(yyyy,timestamp)="2013" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T11:30:07.607

试试这个代码：

```
select
 skillmgt.*, competences.Competence_Description
 from skillmgt,competences
where skillmgt.eid = competences.competence_id
... 
```

# magento - url 重写 magento 1.7

> ID：15829988
> 
> 赞同：0
> 
> 时间：2013-04-05T09:11:29.000
> 
> 标签：magento, url

例如，我更改了我的 url 重写以从 url 中删除类别

url/category/subcategory（重写前）

url/子类别（重写后）

并且一切正常，但是当我进行索引管理时，它们都会重新生成默认值我如何阻止它将它们更改回原来的状态我希望我的新重写保持不变需要永远将它们全部恢复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:16:31.583

转到**管理 -> 系统 -> 索引管理**-> 选择**目录 URL 重写**并将索引模式更改为“手动更新”。而已。你完成了。

# sql - SQLDataReader 对象名称无效

> ID：15829990
> 
> 赞同：0
> 
> 时间：2013-04-05T09:11:36.477
> 
> 标签：sql, database, login, sqldatareader

我正在尝试通过从我的数据库 UsersDB 中读取用户详细信息来通过登录表单对用户进行身份验证。在尝试读取时，我收到一个错误：无效的对象名称：UsersDB

将新用户添加到数据库时我没有收到任何错误，所以我不知道为什么会收到此错误。这是我得到的堆栈跟踪：

```
[SqlException (0x80131904): Invalid object name 'UsersDB'.]
System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction) +388
System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose) +810
System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady) +4403
System.Data.SqlClient.SqlDataReader.TryConsumeMetaData() +82
System.Data.SqlClient.SqlDataReader.get_MetaData() +135
System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +6666037
System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async, Int32 timeout, Task& task, Boolean asyncWrite) +6667856
System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, TaskCompletionSource`1 completion, Int32 timeout, Task& task, Boolean asyncWrite) +577
System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) +107
System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method) +288
System.Data.SqlClient.SqlCommand.ExecuteReader() +302
AuthWebRole.Account.UserLogin.Buttonlogin_Click(Object sender, EventArgs e) in c:\Users\Tamara\Documents\Visual Studio 2012\Projects\TCWalletAzure\AuthWebRole\Account\UserLogin.aspx.cs:32
System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +155
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3804 
```

编辑：

查询如下：（我在我的代码中替换了我的用户名和密码）

```
string strcon = "Server=tcp:qemcclhlar.database.windows.net,1433;Database=UsersDB;User ID=[userid];Password=[mypassword];Trusted_Connection=False;Encrypt=True;Connection Timeout=30";
        SqlConnection con = new SqlConnection(strcon);

        SqlCommand com = new SqlCommand("CheckUser", con);
        com.CommandType = CommandType.StoredProcedure;
        SqlParameter user = new SqlParameter("username", UserName.Text);
        SqlParameter pword = new SqlParameter("password", Password.Text);
        com.Parameters.Add(user);
        com.Parameters.Add(pword);
        con.Open();
        SqlDataReader rd = com.ExecuteReader();
        if (rd.HasRows)
        {
            rd.Read();
            LabelInfo.Text = "Login successful.";
        }

        else
        {
            LabelInfo.Text = "Invalid username or password.";

        } 
```

数据库架构：

数据库：带有表 UserTable 的 UsersDB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:40:46.617

那么这里重要的可能是连接字符串。执行以下操作：创建一个空文本文件并将其重命名为“myconnection.udl”。现在双击该文件，它将启动一个小程序。您可以配置与数据库的连接并对其进行测试。现在在记事本中打开 udl 文件，您将看到正确的连接字符串。将连接字符串复制到您的应用连接设置。UDL 文件通常被误解。它们只是一个保存连接设置的文本文件。然后他们调用连接 dll。如果 udl 文件有效，那么您有一个正确的连接字符串 100%

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T10:33:31.217

我解决了我的问题 - 我在过程查询中输入了错误的表。它必须如下：

创建 PROCEDURE CheckUser (@username as varchar(50), @password as varchar(50)) AS SELECT * FROM UserTable WHERE Username=@username AND Password=@password

我错误地输入了 UsersDB 而不是 UserTable

# java - 无法加载 org.bouncycastle.jce.provider.JDKKeyPairGenerator$RSABeanInfo

> ID：15829999
> 
> 赞同：0
> 
> 时间：2013-04-05T09:12:09.627
> 
> 标签：java, maven, maven-2, maven-3

在构建我的应用程序时，我遇到了错误。我在网上搜索，我没有找到任何解决方案............

```
Apr 05, 2013 2:46:34 AM org.apache.catalina.loader.WebappClassLoader validateJarFile
INFO: validateJarFile(/cisco/software/apache-tomcat-7.0.37/webapps/rmsportal-0.1/WEB-INF/lib/javax.servlet-api-3.0.1.jar) - jar not loaded. See Servlet Spec 2.3, section 9.7.2\. Offending class: javax/servlet/Servlet.class
Apr 05, 2013 2:46:46 AM org.apache.catalina.loader.WebappClassLoader loadClass
INFO: Illegal access: this web application instance has been stopped already.  Could not load org.bouncycastle.jce.provider.JDKKeyPairGenerator$RSABeanInfo.  The eventual following stack trace is caused by an error thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access, and has no functional impact.
java.lang.IllegalStateException
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1599)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1558)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:264)
.
.
.

at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)

Apr 05, 2013 2:47:11 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error listenerStart
Apr 05, 2013 2:47:11 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/rmsportal-0.1] startup failed due to previous errors
Apr 05, 2013 2:47:11 AM org.apache.catalina.loader.WebappClassLoader clearReferencesJdbc
SEVERE: The web application [/rmsportal-0.1] registered the JDBC driver [org.h2.Driver] but failed to unregister it when the web application was stopped. To prevent a memory leak, the JDBC Driver has been forcibly unregistered. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:30:01.233

根本原因可能是以下行

```
INFO: validateJarFile(/cisco/software/apache-tomcat-7.0.37/.../WEB-INF/lib/
      javax.servlet-api-3.0.1.jar) -  
      jar not loaded. See Servlet Spec 2.3, section 9.7.2\. 
      Offending class: javax/servlet/Servlet.class

INFO: Illegal access: this web application instance has been stopped already. 
```

我了解您已将 配置`javax.servlet-api-3.0.1`为`compile`范围。请尝试将其更改为`provided`范围。

我希望这可能会有所帮助。